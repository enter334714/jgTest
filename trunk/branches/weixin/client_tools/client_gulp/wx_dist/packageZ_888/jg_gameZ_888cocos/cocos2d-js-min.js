!function(C$zua,C$zuo,C$zut){function newRequire(C$zut,C$zue){var C$zui=C$zuo[C$zut];if(!C$zui){var C$zur=C$zua[C$zut];if(!C$zur)return;var C$zun={};C$zui=C$zuo[C$zut]={exports:C$zun},C$zur[0](function(C$zut){return newRequire(C$zur[1][C$zut]||C$zut)},C$zui,C$zun)}return C$zui.exports}for(var C$zue=0;C$zue<C$zut.length;C$zue++)newRequire(C$zut[C$zue])}({1:[function(C$zut,C$zue,C$zui){C$zue.exports={1001:"cocos2d: removeAction: Target not found",1002:"cc.ActionManager.removeActionByTag(): an invalid tag",1003:"cc.ActionManager.removeActionByTag(): target must be non-null",1004:"cc.ActionManager.getActionByTag(): an invalid tag",1005:"cocos2d : getActionByTag(tag = %s): Action not found",1006:"[Action step]. override me",1007:"[Action update]. override me",1008:"cocos2d: FiniteTimeAction#reverse: Implement me",1009:"cc.EaseElastic.reverse(): it should be overridden in subclass.",1010:"cc.IntervalAction: reverse not implemented.",1011:"cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.",1012:"cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass.",1013:"The speed parameter error",1014:"The repeat parameter error",1015:"parameters should not be ending with null in Javascript",1016:"cc.RotateTo.reverse(): it should be overridden in subclass.",1019:"Failed to construct, Sequence construction needs two or more actions.",1020:"Failed to construct, Spawn construction needs two or more actions.",1021:"cc.Speed.initWithAction(): action must be non nil",1022:"cc.Follow.initWithAction(): followedNode must be non nil",1023:"cc.ActionEase.initWithAction(): action must be non nil",1024:"Invalid configuration. It must at least have one control point",1025:"cc.Sequence.initWithTwoActions(): arguments must all be non nil",1026:"cc.RepeatForever.initWithAction(): action must be non null",1027:"cc.Spawn.initWithTwoActions(): arguments must all be non null",1028:"cc.ReverseTime.initWithAction(): action must be non null",1029:"cc.ReverseTime.initWithAction(): the action was already passed in.",1030:"cc.Animate.initWithAnimation(): animation must be non-NULL",1031:"Illegal parameter get passed in cc.tween: %s.",1100:"Expected 'data' dict, but not found. Config file: %s",1101:"Please load the resource first : %s",1200:"cocos2d: Director: Error in gettimeofday",1201:"cocos2d: Director: unrecognized projection",1203:"cocos2d: Director: Error in gettimeofday",1204:"running scene should not null",1205:"the scene should not null",1206:"loadScene: The scene index to load (%s) is out of range.",1207:"loadScene: Unknown name type to load: '%s'",1208:"loadScene: Failed to load scene '%s' because '%s' is already being loaded.",1209:"loadScene: Can not load the scene '%s' because it was not in the build settings before playing.",1210:"Failed to preload '%s', %s",1211:"loadScene: The scene index to load (%s) is out of range.",1212:"loadScene: Unknown name type to load: '%s'",1213:"loadScene: Failed to load scene '%s' because '%s' is already loading",1214:"loadScene: Can not load the scene '%s' because it was not in the build settings before playing.",1215:"Failed to preload '%s', %s",1216:"Director.runSceneImmediate: scene is not valid",1300:"element type is wrong!",1400:"'%s' is deprecated, please use '%s' instead.",1404:"cc.spriteFrameCache is removed, please use cc.loader to load and cache sprite frames of atlas format.",1405:"The '%s' has been removed, please use '%s' instead.",1406:"'%s.%s' is removed",1408:"'%s' is not support in the '%s', please use '%s' instead.",1502:"cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",1503:"cc.Scheduler.pauseTarget():target should be non-null",1504:"cc.Scheduler.resumeTarget():target should be non-null",1505:"cc.Scheduler.isTargetPaused():target should be non-null",1506:"warning: you CANNOT change update priority in scheduled function",1507:'CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: %s to %s"',1508:"Argument callback must not be empty",1509:"Argument target must be non-nullptr",1510:"cc.Scheduler: Illegal target which doesn't have uuid or instanceId.",1511:"cc.Scheduler: pause state of the scheduled task doesn't match the element pause state in Scheduler, the given paused state will be ignored.",1513:"cc.Scheduler: scheduler stopped using `__instanceId` as id since v2.0, you should do scheduler.enableForTarget(target) before all scheduler API usage on target",1605:"child already added. It can't be added again",1606:"child must be non-null",1610:"cocos2d: removeChildByTag(tag = %s): child not found!",1612:"cc.Node.stopActionBy(): argument tag an invalid tag",1613:"cc.Node.getActionByTag(): argument tag is an invalid tag",1617:"child must be non-null",1618:"cc.Node.runAction(): action must be non-null",1619:"callback function must be non-null",1620:"interval must be positive",1623:"Set '%s' to normal node (not persist root node).",1624:"Replacing with the same sgNode",1625:"The replacement sgNode should not contain any child.",1626:"Should not set alpha via 'color', set 'opacity' please.",1627:"Not support for asynchronous creating node in SG",1632:"Node name can not include '/'.",1633:"Internal error, should not remove unknown node from parent.",1634:"addChild: The child to add must be instance of cc.Node, not %s.",1635:"reorderChild: this child is not in children list.",1636:"Node's zIndex value can't be greater than cc.macro.MAX_ZINDEX, setting to the maximum value",1637:"Node's zIndex value can't be smaller than cc.macro.MIN_ZINDEX, setting to the minimum value",1638:"Private node's zIndex can't be set, it will keep cc.macro.MIN_ZINDEX as its value",1639:"cc.Action is deprecated now, please use cc.TweenAction instead",1800:"cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",1801:"cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",1802:"cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",1803:"cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",1900:"Invalid parameter.",2e3:"Don't call this method if the event is for touch.",2200:"Resolution not valid",2201:"should set resolutionPolicy",2300:"The touches is more than MAX_TOUCHES, nUnusedIndex = %s",2400:"WebGL error %s",2602:"cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",2603:"cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",2606:"cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",2607:"cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",2608:"%s is null, please check.",2609:"cc.Sprite.initWithFile(): filename should be non-null",2610:"cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",2614:"cc.Sprite.addChild(): child should be non-null",2616:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",2617:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",2618:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",2619:"cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",2623:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",2625:"too many tiles, only 16384 tiles will be show",2626:"Unrecognized fill type in bar fill",2627:"Can not generate quad",2628:"%s does not exist",2712:"Invalid spriteFrameName",3005:"cocos2d: '%s' id=%s %s x %s",3006:"cocos2d: '%s' id= HTMLCanvasElement %s x %s",3007:"cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",3103:"cc.Texture.addImage(): path should be non-null",3112:"cc.Texture.addImage(): path should be non-null",3113:"NSInternalInconsistencyException",3116:"WebGLRenderingContext.CLAMP_TO_EDGE should be used in NPOT textures",3117:"Mimpap texture only works in POT textures",3119:"Lazy init texture with image element failed due to image loading failure: %s",3120:"Loading texture from '%s' with unsupported type: '%s'. Add '%s' into 'cc.macro.SUPPORT_TEXTURE_FORMATS' please.",3300:"Rect width exceeds maximum margin: %s",3400:"Rect height exceeds maximum margin: %s",3500:"0 priority is forbidden for fixed priority since it's used for scene graph based priority.",3501:"Invalid listener type!",3502:"Can't set fixed priority with scene graph based listener.",3503:"Invalid parameters.",3504:"listener must be a cc.EventListener object when adding a fixed priority listener",3505:"The listener has been registered, please don't register it again.",3506:"Unsupported listener target.",3507:"Invalid scene graph priority!",3508:"If program goes here, there should be event in dispatch.",3509:"_inDispatch should be 1 here.",3510:"%s's scene graph node not contains in the parent's children",3511:"event is undefined",3600:"cc.Class will automatically call super constructor of %s, you should not call it manually.",3601:"The editor property 'playOnFocus' should be used with 'executeInEditMode' in class '%s'",3602:"Unknown editor property '%s' in class '%s'.",3603:"Use 'cc.Float' or 'cc.Integer' instead of 'cc.Number' please.",3604:"Can only indicate one type attribute for %s.",3605:"The default value of %s is not instance of %s.",3606:"No needs to indicate the '%s' attribute for %s, which its default value is type of %s.",3607:"The default value of %s must be an empty string.",3608:"The type of %s must be cc.String, not String.",3609:"The type of %s must be cc.Boolean, not Boolean.",3610:"The type of %s must be cc.Float or cc.Integer, not Number.",3611:"Can not indicate the '%s' attribute for %s, which its default value is type of %s.",3612:"%s Just set the default value to 'new %s()' and it will be handled properly.",3613:"'No need to use 'serializable: false' or 'editorOnly: true' for the getter of '%s.%s', every getter is actually non-serialized.",3614:"Should not define constructor for cc.Component %s.",3615:"Each script can have at most one Component.",3616:"Should not specify class name %s for Component which defines in project.",3617:"Can not instantiate CCClass '%s' with arguments.",3618:"ctor of '%s' can not be another CCClass",3619:"ctor of '%s' must be function type",3620:"this._super declared in '%s.%s' but no super method defined",3621:"Unknown type of %s.%s, maybe you want is '%s'.",3622:"Unknown type of %s.%s, property should be defined in 'properties' or 'ctor'",3623:"Can not use 'editor' attribute, '%s' not inherits from Components.",3624:"'%s' overrided '%s' but '%s' is defined as 'false' so the super method will not be called. You can set '%s' to null to disable this warning.",3625:"[isChildClassOf] superclass should be function type, not",3626:"Can't remove '%s' because '%s' depends on it.",3627:"Should not add renderer component (%s) to a Canvas node.",3628:"Should not add %s to a node which size is already used by its other component.",3633:"Properties function of '%s' should return an object!",3634:"Disallow to use '.' in property name",3635:"Default array must be empty, set default value of %s.%s to [], and initialize in 'onLoad' or 'ctor' please. (just like 'this.%s = [...];')",3636:"Do not set default value to non-empty object, unless the object defines its own 'clone' function. Set default value of %s.%s to null or {}, and initialize in 'onLoad' or 'ctor' please. (just like 'this.%s = {foo: bar};')",3637:"Can not declare %s.%s, it is already defined in the prototype of %s",3638:"'%s': the getter of '%s' is already defined!",3639:"Can not apply the specified attribute to the getter of '%s.%s', attribute index: %s",3640:"'%s': the setter of '%s' is already defined!",3641:"Can not construct %s because it contains object property.",3642:"Cannot define %s.%s because static member name can not be '%s'.",3643:"Can not define a member called 'constructor' in the class '%s', please use 'ctor' instead.",3644:"Please define 'type' parameter of %s.%s as the actual constructor.",3645:"Please define 'type' parameter of %s.%s as the constructor of %s.",3646:"Unknown 'type' parameter of %s.%s\uff1a%s",3647:"The length of range array must be equal or greater than 2",3648:"Can not declare %s.%s method, it is already defined in the properties of %s.",3649:"CCClass %s have conflict between its ctor and __ctor__.",3651:'Can not call `_super` or `prototype.ctor` in ES6 Classes "%s", use `super` instead please.',3652:"Failed to `new %s()` under the hood, %s\nIt is used for getting default values declared in TypeScript in the first place.\nPlease ensure the constructor can be called during the script's initialization.",3653:'Please do not specifiy "default" attribute in decorator of "%s" property in "%s" class.  \nDefault value must be initialized at their declaration:\n \n// Before:\n@property({\n  type: cc.Integer\n  default: 0  // <--\n})\nmyProp;\n// After:\n@property({\n  type: cc.Integer\n})\nmyProp = 0;   // <--',3654:'Please specifiy a default value for "%s.%s" at its declaration:\n \n// Before:\n@property(...)\nmyProp;\n// After:\n@property(...)\nmyProp = 0;',3655:'Can not specifiy "get" or "set"  attribute in decorator for "%s" property in "%s" class.  \nPlease use:\n \n@property(...)\nget %s () {\n    ...\n}\n@property\nset %s (value) {\n    ...\n}',3656:"The default value of %s.%s must be an empty string.",3700:"internal error: _prefab is undefined",3701:"Failed to load prefab asset for node '%s'",3800:"The target can not be made persist because it's not a cc.Node or it doesn't have _id property.",3801:"The node can not be made persist because it's not under root node.",3802:"The node can not be made persist because it's not in current scene.",3803:"The target can not be made persist because it's not a cc.Node or it doesn't have _id property.",3804:"getComponent: Type must be non-nil",3805:"Can't add component '%s' because %s already contains the same component.",3806:"Can't add component '%s' to %s because it conflicts with the existing '%s' derived component.",3807:"addComponent: Failed to get class '%s'",3808:"addComponent: Should not add component ('%s') when the scripts are still loading.",3809:"addComponent: The component to add must be a constructor",3810:"addComponent: The component to add must be child class of cc.Component",3811:"_addComponentAt: The component to add must be a constructor",3812:"_addComponentAt: Index out of range",3813:"removeComponent: Component must be non-nil",3814:"Argument must be non-nil",3815:"Component not owned by this entity",3816:"Node '%s' is already activating",3817:"Sorry, the component of '%s' which with an index of %s is corrupted! It has been removed.",3818:"Failed to read or parse project.json",3819:"Warning: target element is not a DIV or CANVAS",3820:"The renderer doesn't support the renderMode %s",3821:"Cannot change hierarchy while activating or deactivating the parent.",3900:"Invalid clip to add",3901:"Invalid clip to remove",3902:"clip is defaultClip, set force to true to force remove clip and animation state",3903:"animation state is playing, set force to true to force stop and remove clip and animation state",3904:"motion path of target [%s] in prop [%s] frame [%s] is not valid",3905:"sprite frames must be an Array.",3906:"Can't find easing type [%s]",3907:"animator not added or already removed",3912:"already-playing",4e3:"Sorry, the cc.Font has been modified from Raw Asset to Asset. Please load the font asset before using.",4003:"Label font size can't be shirnked less than 0!",4004:"force notify all fonts loaded!",4011:"Property spriteFrame of Font '%s' is invalid. Using system font instead.",4012:"The texture of Font '%s' must be already loaded on JSB. Using system font instead.",4013:"Sorry, lineHeight of system font not supported on JSB.",4200:"MaskType: IMAGE_STENCIL only support WebGL mode.",4201:"The alphaThreshold invalid in Canvas Mode.",4202:"The inverted invalid in Canvas Mode.",4300:"can not found the %s page.",4400:"Invalid RichText img tag! The sprite frame name can't be found in the ImageAtlas!",4600:"Script attached to '%s' is missing or invalid.",4700:"The dom control is not created!",4800:"unknown asset type",4901:"loadRes: should not specify the extname in %s %s",4902:"No need to release non-cached asset.",4903:"Can not get class '%s'",4914:"Resources url '%s' does not exist.",4915:"Pack indices and data do not match in size",4916:"Failed to download package for %s",4920:"Sorry, you shouldn't use id as item identity any more, please use url or uuid instead, the current id is being set as url: (%s)",4921:"Invalid pipe or invalid index provided!",4922:"The pipe to be inserted is already in the pipeline!",4923:"Uuid Loader: Parse asset [ %s ] failed : %s",4924:"JSON Loader: Input item doesn't contain string content",4925:"Uuid Loader: Deserialize asset [ %s ] failed : %s",4926:"Audio Downloader: no web audio context.",4927:"Audio Downloader: audio not supported on this browser!",4928:"Load %s failed!",4929:"Load Webp ( %s ) failed",4930:"Load image ( %s ) failed",4931:"Download Uuid: can not find type of raw asset[ %s ]: %s",4932:'Since v1.10, for any atlas ("%s") in the "resources" directory, it is not possible to find the contained SpriteFrames via `loadRes`, `getRes` or `releaseRes`. Load the SpriteAtlas first and then use `spriteAtlas.getSpriteFrame(name)` instead please.',4933:"Download Font [ %s ] failed, using Arial or system default font instead",5e3:"object already destroyed",5001:"object not yet destroyed",5100:"Not a plist file!",5200:"Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option",5201:"browser don't support web audio",5202:"This feature supports WebGL render mode only.",5300:"Type of target to deserialize not matched with data: target is %s, data is %s",5301:"Can not find script '%s'",5302:"Can not find class '%s'",5402:"cc.js.addon called on non-object:",5403:"cc.js.mixin: arguments must be type object:",5404:"The base class to extend from must be non-nil",5405:"The class to extend must be non-nil",5406:"Class should be extended before assigning any prototype members.",5500:"'notify' can not be used in 'get/set' !",5501:"'notify' must be used with 'default' !",5502:"Invalid url of %s.%s",5503:"The 'url' attribute of '%s.%s' is undefined when loading script.",5504:"The 'url' type of '%s.%s' must be child class of cc.RawAsset.",5505:"The 'url' type of '%s.%s' must not be child class of cc.Asset, otherwise you should use 'type: %s' instead.",5506:"Can not specify 'type' attribute for '%s.%s', because its 'url' is already defined.",5507:"The 'default' attribute of '%s.%s' must be an array",5508:"Invalid type of %s.%s",5509:"The 'type' attribute of '%s.%s' must be child class of cc.Asset, otherwise you should use 'url: %s' instead",5510:"The 'type' attribute of '%s.%s' can not be 'Number', use cc.Float or cc.Integer instead please.",5511:"The 'type' attribute of '%s.%s' is undefined when loading script",5512:"Can not serialize '%s.%s' because the specified type is anonymous, please provide a class name or set the 'serializable' attribute of '%s.%s' to 'false'.",5513:"The 'default' value of '%s.%s' should not be used with a 'get' function.",5514:"The 'default' value of '%s.%s' should not be used with a 'set' function.",5515:"The 'default' value of '%s.%s' can not be an constructor. Set default to null please.",5516:"Property '%s.%s' must define at least one of 'default', 'get' or 'set'.",5517:"'%s.%s' hides inherited property '%s.%s'. To make the current property override that implementation, add the `override: true` attribute please.",5601:"Can not get current scene.",5602:"Scene is destroyed",5603:"reference node is destroyed",5700:"no %s or %s on %s",5800:"%s.lerp not yet implemented.",5801:"%s.clone not yet implemented.",5802:"%s.equals not yet implemented.",5900:"MotionStreak only support WebGL mode.",5901:"cc.MotionStreak.getOpacity has not been supported.",5902:"cc.MotionStreak.setOpacity has not been supported.",6e3:"Custom should not be false if file is not specified.",6001:"The new %s must not be NaN",6017:"Incomplete or corrupt PNG file",6018:"Invalid filter algorithm: %s",6019:"Invalid byte order value.",6020:"You forgot your towel!",6021:"Unknown Field Tag: %s",6022:"Too many bits requested",6023:"No bits requested",6024:"Cannot recover from missing StripByteCounts",6025:"Cannot handle sub-byte bits per sample",6026:"Cannot handle sub-byte bits per pixel",6027:"Palette image missing color map",6028:"Unknown Photometric Interpretation: %s",6029:"Unkown error",6030:"cc.ParticleSystem: error decoding or ungzipping textureImageData",6031:"cc.ParticleSystem: unknown image format with Data",6032:"cc.ParticleSystem.initWithDictionary() : error loading the texture",6400:"asset.url is not usable in core process",6402:"AssetLibrary has already been initialized!",6500:"Widget target must be one of the parent nodes of it",6600:"collider not added or already removed",6601:"Can't find testFunc for (%s, $s).",6700:"Can't init canvas '%s' because it conflicts with the existing '%s', the scene should only have one active canvas at the same time.",6800:"Callback of event must be non-nil",6801:"The message must be provided",6900:"The thing you want to instantiate must be an object",6901:"The thing you want to instantiate is nil",6902:"The thing you want to instantiate is destroyed",6903:"The instantiate method for given asset do not implemented",6904:"Can not instantiate array",6905:"Can not instantiate DOM element",7e3:"Failed to init asset's raw path.",7001:"Should not load '%s' from script dynamically, unless it is placed in the 'resources' folder.",7002:"Sorry can not load '%s' because it is not placed in the 'resources' folder.",7003:"Failed to init builtin asset's raw path.",7100:"%s already defined in Enum.",7101:"Sorry, 'cc.Enum' not available on this platform, please report this error here: https://github.com/cocos-creator/engine/issues/new",7200:"Method 'initWithTMXFile' is no effect now, please set property 'tmxAsset' instead.",7201:"Method 'initWithXML' is no effect now, please set property 'tmxAsset' instead.",7202:"Add component TiledLayer into node failed.",7203:"Property 'mapLoaded' is unused now. Please write the logic to the callback 'start'.",7210:"TMX Hexa zOrder not supported",7211:"TMX invalid value",7215:"cocos2d: Warning: TMX Layer %s has no tiles",7216:"cocos2d: TMXFormat: Unsupported TMX version: %s",7217:"cocos2d: TMXFomat: Unsupported orientation: %s",7218:"cc.TMXMapInfo.parseXMLFile(): unsupported compression method",7219:"cc.TMXMapInfo.parseXMLFile(): Only base64 and/or gzip/zlib maps are supported",7221:"cc.TMXMapInfo.parseXMLFile(): Texture '%s' not found.",7222:"Parse %s failed.",7236:"cc.TMXLayer.getTileAt(): TMXLayer: the tiles map has been released",7237:"cc.TMXLayer.getTileGIDAt(): TMXLayer: the tiles map has been released",7238:"cc.TMXLayer.setTileGID(): TMXLayer: the tiles map has been released",7239:"cc.TMXLayer.setTileGID(): invalid gid: %s",7240:"cc.TMXLayer.getTileFlagsAt(): TMXLayer: the tiles map has been released",7241:"cc.TiledMap.initWithXML(): Map not found. Please check the filename.",7401:"Failed to set _defaultArmatureIndex for '%s' because the index is out of range.",7402:"Failed to set _animationIndex for '%s' because the index is out of range.",7501:"Failed to set _defaultSkinIndex for '%s' because the index is out of range.",7502:"Failed to set _animationIndex for '%s' because its skeletonData is invalid.",7503:"Failed to set _animationIndex for '%s' because the index is out of range.",7504:"Can not render dynamic created SkeletonData",7505:"Invalid type of atlasFile, atlas should be registered as raw asset.",7506:"Failed to load spine atlas '$s'",7507:"Please re-import '%s' because its textures is not initialized! (This workflow will be improved in the future.)",7508:"The atlas asset of '%s' is not exists!",7509:"Spine: Animation not found: %s",7510:"Spine: Animation not found: %s",7600:"The context of RenderTexture is invalid.",7601:"cc.RenderTexture._initWithWidthAndHeightForWebGL() : only RGB and RGBA formats are valid for a render texture;",7602:"Could not attach texture to the framebuffer",7603:"clearDepth isn't supported on Cocos2d-Html5",7604:"saveToFile isn't supported on Cocos2d-Html5",7605:"newCCImage isn't supported on Cocos2d-Html5",7700:"On the web is always keep the aspect ratio",7701:"Can't know status",7702:"Video player's duration is not ready to get now!",7800:"Web does not support loading",7801:"Web does not support query history",7802:"Web does not support query history",7803:"The current browser does not support the GoBack",7804:"The current browser does not support the GoForward",7805:"Web does not support zoom",7900:"cc.math.Matrix3.assign(): current matrix equals matIn",7901:"cc.math.mat4Assign(): pOut equals pIn",7902:"cc.mat.Matrix4.assignFrom(): mat4 equals current matrix",7903:"cc.math.Matrix4 equal: pMat1 and pMat2 are same object.",7904:"cc.math.Matrix4.extractPlane: Invalid plane index",7905:"cc.math.mat4Assign(): pOut equals pIn",7906:"cc.mat.Matrix4.assignFrom(): mat4 equals current matrix",7907:"cc.math.Matrix4 equals: pMat1 and pMat2 are same object.",7908:"Invalid matrix mode specified",7909:"current quaternion is an invalid value",8e3:"Can't handle this field type or size",8001:"No bytes requested",8002:"Too many bytes requested",8003:"Missing StripByteCounts!",8103:"cc.GLProgram.link(): Cannot link invalid program",8104:"cocos2d: ERROR: Failed to link program: %s",8105:"cocos2d: cc.shaderCache._loadDefaultShader, error shader type",8106:"Please load the resource firset : %s",8107:"cc.GLProgram.getUniformLocationForName(): uniform name should be non-null",8108:"cc.GLProgram.getUniformLocationForName(): Invalid operation. Cannot get uniform location when program is not initialized",8109:"modelView matrix is undefined.",8200:"Please set node's active instead of rigidbody's enabled.",8300:"Should only one camera exists, please check your project.",8301:"Camera does not support Canvas Mode.",8400:"Wrong type arguments, 'filePath' must be a String.",8401:"Since 1.10, `%s` accept %s instance directly, not a URL string. Please directly reference the %s object in your script, or load %s by loader first. Don't use %s's URL anymore.",9e3:"Stencil manager does not support level bigger than %d in this device.",9001:"Stencil manager is already empty, cannot pop any mask.",9100:"LabelAtlas '%s' cannot be loaded, raw texture does not exist.",9101:"LabelAtlas '%s' cannot be loaded, fnt data does not exist.",9102:"Program not support highp precision, will change to mediump.",9103:"%s : Failed to set property [%s], property not found.",9104:"%s : Failed to define [%s], define not found.",9105:"%s : Failed to set property [%s], property length not correct.",9106:"%s : Set property [%s] warning : should transform object to ArrayBuffer.",9107:"%s : illegal property: [%s], myabe defined an unused property;",9200:"cc.view.enableAntiAlias is deprecated now, please use cc.Texture2D.setFilters instead","0100":"%s not yet implemented."}},{}],2:[function(C$zut,C$zue,C$zui){"use strict";C$zut("../core/platform/CCClass");var C$zur=C$zut("../core/utils/misc");cc.Action=cc.Class({name:"cc.Action",ctor:function(){this.originalTarget=null,this.target=null,this.tag=cc.Action.TAG_INVALID},clone:function(){var C$zut=new cc.Action;return C$zut.originalTarget=null,C$zut.target=null,C$zut.tag=this.tag,C$zut},isDone:function(){return!0},startWithTarget:function(C$zut){this.originalTarget=C$zut,this.target=C$zut},stop:function(){this.target=null},step:function(C$zut){cc.logID(1006)},update:function(C$zut){cc.logID(1007)},getTarget:function(){return this.target},setTarget:function(C$zut){this.target=C$zut},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(C$zut){this.originalTarget=C$zut},getTag:function(){return this.tag},setTag:function(C$zut){this.tag=C$zut},retain:function(){},release:function(){}}),cc.Action.TAG_INVALID=-1,cc.FiniteTimeAction=cc.Class({name:"cc.FiniteTimeAction",extends:cc.Action,ctor:function(){this._duration=0},getDuration:function(){return this._duration*(this._timesForRepeat||1)},setDuration:function(C$zut){this._duration=C$zut},reverse:function(){return cc.logID(1008),null},clone:function(){return new cc.FiniteTimeAction}}),cc.Speed=cc.Class({name:"cc.Speed",extends:cc.Action,ctor:function(C$zut,C$zue){this._speed=0,this._innerAction=null,C$zut&&this.initWithAction(C$zut,C$zue)},getSpeed:function(){return this._speed},setSpeed:function(C$zut){this._speed=C$zut},initWithAction:function(C$zut,C$zue){return C$zut?(this._innerAction=C$zut,this._speed=C$zue,!0):(cc.errorID(1021),!1)},clone:function(){var C$zut=new cc.Speed;return C$zut.initWithAction(this._innerAction.clone(),this._speed),C$zut},startWithTarget:function(C$zut){cc.Action.prototype.startWithTarget.call(this,C$zut),this._innerAction.startWithTarget(C$zut)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},step:function(C$zut){this._innerAction.step(C$zut*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return new cc.Speed(this._innerAction.reverse(),this._speed)},setInnerAction:function(C$zut){this._innerAction!==C$zut&&(this._innerAction=C$zut)},getInnerAction:function(){return this._innerAction}}),cc.speed=function(C$zut,C$zue){return new cc.Speed(C$zut,C$zue)},cc.Follow=cc.Class({name:"cc.Follow",extends:cc.Action,ctor:function(C$zut,C$zue){this._followedNode=null,this._boundarySet=!1,this._boundaryFullyCovered=!1,this._halfScreenSize=null,this._fullScreenSize=null,this.leftBoundary=0,this.rightBoundary=0,this.topBoundary=0,this.bottomBoundary=0,this._worldRect=cc.rect(0,0,0,0),C$zut&&(C$zue?this.initWithTarget(C$zut,C$zue):this.initWithTarget(C$zut))},clone:function(){var C$zut=new cc.Follow;var C$zue=this._worldRect;C$zue=new cc.Rect(C$zue.x,C$zue.y,C$zue.width,C$zue.height);return C$zut.initWithTarget(this._followedNode,C$zue),C$zut},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(C$zut){this._boundarySet=C$zut},initWithTarget:function(C$zut,C$zue){if(!C$zut)return cc.errorID(1022),!1;C$zue=C$zue||cc.rect(0,0,0,0),this._followedNode=C$zut,this._worldRect=C$zue,this._boundarySet=!(0===C$zue.width&&0===C$zue.height),this._boundaryFullyCovered=!1;C$zut=cc.winSize;return this._fullScreenSize=cc.v2(C$zut.width,C$zut.height),this._halfScreenSize=this._fullScreenSize.mul(.5),this._boundarySet&&(this.leftBoundary=-(C$zue.x+C$zue.width-this._fullScreenSize.x),this.rightBoundary=-C$zue.x,this.topBoundary=-C$zue.y,this.bottomBoundary=-(C$zue.y+C$zue.height-this._fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=(this.topBoundary+this.bottomBoundary)/2),this.topBoundary===this.bottomBoundary&&this.leftBoundary===this.rightBoundary&&(this._boundaryFullyCovered=!0)),!0},step:function(C$zut){var C$zue=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO);var C$zui=this._followedNode.convertToWorldSpaceAR(cc.Vec2.ZERO);C$zue=C$zue.sub(C$zui);C$zui=this.target.parent.convertToNodeSpaceAR(C$zue.add(this._halfScreenSize));this._boundarySet?this._boundaryFullyCovered||this.target.setPosition(C$zur.clampf(C$zui.x,this.leftBoundary,this.rightBoundary),C$zur.clampf(C$zui.y,this.bottomBoundary,this.topBoundary)):this.target.setPosition(C$zui.x,C$zui.y)},isDone:function(){return!this._followedNode.activeInHierarchy},stop:function(){this.target=null,cc.Action.prototype.stop.call(this)}}),cc.follow=function(C$zut,C$zue){return new cc.Follow(C$zut,C$zue)}},{"../core/platform/CCClass":189,"../core/utils/misc":264}],3:[function(C$zut,C$zue,C$zui){"use strict";function getControlPointAt(C$zut,C$zue){return C$zut[Math.min(C$zut.length-1,Math.max(C$zue,0))]}function reverseControlPoints(C$zut){var C$zue=[];for(var C$zui=C$zut.length-1;0<=C$zui;C$zui--)C$zue.push(cc.v2(C$zut[C$zui].x,C$zut[C$zui].y));return C$zue}function cloneControlPoints(C$zut){var C$zue=[];for(var C$zui=0;C$zui<C$zut.length;C$zui++)C$zue.push(cc.v2(C$zut[C$zui].x,C$zut[C$zui].y));return C$zue}cc.CardinalSplineTo=cc.Class({name:"cc.CardinalSplineTo",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui){this._points=[],this._deltaT=0,this._tension=0,this._previousPosition=null,this._accumulatedDiff=null,void 0!==C$zui&&cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui)},initWithDuration:function(C$zut,C$zue,C$zui){return C$zue&&0!==C$zue.length?!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this.setPoints(C$zue),this._tension=C$zui,!0):(cc.errorID(1024),!1)},clone:function(){var C$zut=new cc.CardinalSplineTo;return C$zut.initWithDuration(this._duration,cloneControlPoints(this._points),this._tension),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._deltaT=1/(this._points.length-1),this._previousPosition=cc.v2(this.target.x,this.target.y),this._accumulatedDiff=cc.v2(0,0)},update:function(C$zut){C$zut=this._computeEaseTime(C$zut);var C$zue=this._points;C$zut=1===C$zut?(C$zur=C$zue.length-1,1):(C$zut-(C$zui=this._deltaT)*(C$zur=0|C$zut/C$zui))/C$zui;C$zui=getControlPointAt(C$zue,C$zur-1),C$zus=getControlPointAt(C$zue,+C$zur),C$zul=getControlPointAt(C$zue,C$zur+1),C$zue=getControlPointAt(C$zue,C$zur+2),C$zur=this._tension,C$zuo=(C$zur=(1-C$zur)/2)*(2*(C$zun=(C$zut=C$zut)*C$zut)-(C$zua=C$zun*C$zut)-C$zut),C$zuc=C$zur*(C$zun-C$zua)+(2*C$zua-3*C$zun+1),C$zut=C$zur*(C$zua-2*C$zun+C$zut)+(-2*C$zua+3*C$zun),C$zur*=C$zua-C$zun,C$zua=C$zui.x*C$zuo+C$zus.x*C$zuc+C$zul.x*C$zut+C$zue.x*C$zur,C$zun=C$zui.y*C$zuo+C$zus.y*C$zuc+C$zul.y*C$zut+C$zue.y*C$zur;C$zuo=cc.v2(C$zua,C$zun);var C$zui,C$zur,C$zun,C$zua,C$zuo;var C$zus,C$zuc,C$zul;cc.macro.ENABLE_STACKABLE_ACTIONS&&(C$zus=this.target.x-this._previousPosition.x,C$zuc=this.target.y-this._previousPosition.y,0==C$zus&&0===C$zuc||(C$zus=(C$zul=this._accumulatedDiff).x+C$zus,C$zuc=C$zul.y+C$zuc,C$zul.x=C$zus,C$zul.y=C$zuc,C$zuo.x+=C$zus,C$zuo.y+=C$zuc)),this.updatePosition(C$zuo)},reverse:function(){var C$zut=reverseControlPoints(this._points);return cc.cardinalSplineTo(this._duration,C$zut,this._tension)},updatePosition:function(C$zut){this.target.setPosition(C$zut),this._previousPosition=C$zut},getPoints:function(){return this._points},setPoints:function(C$zut){this._points=C$zut}}),cc.cardinalSplineTo=function(C$zut,C$zue,C$zui){return new cc.CardinalSplineTo(C$zut,C$zue,C$zui)},cc.CardinalSplineBy=cc.Class({name:"cc.CardinalSplineBy",extends:cc.CardinalSplineTo,ctor:function(C$zut,C$zue,C$zui){this._startPosition=cc.v2(0,0),void 0!==C$zui&&this.initWithDuration(C$zut,C$zue,C$zui)},startWithTarget:function(C$zut){cc.CardinalSplineTo.prototype.startWithTarget.call(this,C$zut),this._startPosition.x=C$zut.x,this._startPosition.y=C$zut.y},reverse:function(){var C$zut=this._points.slice();var C$zue;var C$zui=C$zut[0];for(var C$zur=1;C$zur<C$zut.length;++C$zur)C$zue=C$zut[C$zur],C$zut[C$zur]=C$zue.sub(C$zui),C$zui=C$zue;var C$zun=reverseControlPoints(C$zut);C$zui=C$zun[C$zun.length-1],C$zun.pop(),C$zui.x=-C$zui.x,C$zui.y=-C$zui.y,C$zun.unshift(C$zui);for(C$zur=1;C$zur<C$zun.length;++C$zur)(C$zue=C$zun[C$zur]).x=-C$zue.x,C$zue.y=-C$zue.y,C$zue.x+=C$zui.x,C$zue.y+=C$zui.y,C$zui=C$zun[C$zur]=C$zue;return cc.cardinalSplineBy(this._duration,C$zun,this._tension)},updatePosition:function(C$zut){var C$zue=this._startPosition;var C$zui=C$zut.x+C$zue.x;C$zut=C$zut.y+C$zue.y;this._previousPosition.x=C$zui,this._previousPosition.y=C$zut,this.target.setPosition(C$zui,C$zut)},clone:function(){var C$zut=new cc.CardinalSplineBy;return C$zut.initWithDuration(this._duration,cloneControlPoints(this._points),this._tension),C$zut}}),cc.cardinalSplineBy=function(C$zut,C$zue,C$zui){return new cc.CardinalSplineBy(C$zut,C$zue,C$zui)},cc.CatmullRomTo=cc.Class({name:"cc.CatmullRomTo",extends:cc.CardinalSplineTo,ctor:function(C$zut,C$zue){C$zue&&this.initWithDuration(C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$zut,C$zue,.5)},clone:function(){var C$zut=new cc.CatmullRomTo;return C$zut.initWithDuration(this._duration,cloneControlPoints(this._points)),C$zut}}),cc.catmullRomTo=function(C$zut,C$zue){return new cc.CatmullRomTo(C$zut,C$zue)},cc.CatmullRomBy=cc.Class({name:"cc.CatmullRomBy",extends:cc.CardinalSplineBy,ctor:function(C$zut,C$zue){C$zue&&this.initWithDuration(C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$zut,C$zue,.5)},clone:function(){var C$zut=new cc.CatmullRomBy;return C$zut.initWithDuration(this._duration,cloneControlPoints(this._points)),C$zut}}),cc.catmullRomBy=function(C$zut,C$zue){return new cc.CatmullRomBy(C$zut,C$zue)}},{}],4:[function(C$zul,C$zuh,C$zuu){"use strict";cc.easeIn=function(C$zut){return{_rate:C$zut,easing:function(C$zut){return Math.pow(C$zut,this._rate)},reverse:function(){return cc.easeIn(1/this._rate)}}},cc.easeOut=function(C$zut){return{_rate:C$zut,easing:function(C$zut){return Math.pow(C$zut,1/this._rate)},reverse:function(){return cc.easeOut(1/this._rate)}}},cc.easeInOut=function(C$zut){return{_rate:C$zut,easing:function(C$zut){return(C$zut*=2)<1?.5*Math.pow(C$zut,this._rate):1-.5*Math.pow(2-C$zut,this._rate)},reverse:function(){return cc.easeInOut(this._rate)}}};var C$zut={easing:function(C$zut){return 0===C$zut?0:Math.pow(2,10*(C$zut-1))},reverse:function(){return C$zue}};cc.easeExponentialIn=function(){return C$zut};var C$zue={easing:function(C$zut){return 1===C$zut?1:1-Math.pow(2,-10*C$zut)},reverse:function(){return C$zut}};cc.easeExponentialOut=function(){return C$zue};var C$zui={easing:function(C$zut){return 1!==C$zut&&0!==C$zut?(C$zut*=2)<1?.5*Math.pow(2,10*(C$zut-1)):.5*(2-Math.pow(2,-10*(C$zut-1))):C$zut},reverse:function(){return C$zui}};cc.easeExponentialInOut=function(){return C$zui};var C$zur={easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:-1*Math.cos(C$zut*Math.PI/2)+1},reverse:function(){return C$zun}};cc.easeSineIn=function(){return C$zur};var C$zun={easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:Math.sin(C$zut*Math.PI/2)},reverse:function(){return C$zur}};cc.easeSineOut=function(){return C$zun};var C$zua={easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:-.5*(Math.cos(Math.PI*C$zut)-1)},reverse:function(){return C$zua}};cc.easeSineInOut=function(){return C$zua};var C$zuo={easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:(--C$zut,-Math.pow(2,10*C$zut)*Math.sin((C$zut-.075)*Math.PI*2/.3))},reverse:function(){return C$zus}};cc.easeElasticIn=function(C$zut){return C$zut&&.3!==C$zut?{_period:C$zut,easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:(--C$zut,-Math.pow(2,10*C$zut)*Math.sin((C$zut-this._period/4)*Math.PI*2/this._period))},reverse:function(){return cc.easeElasticOut(this._period)}}:C$zuo};var C$zus={easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:Math.pow(2,-10*C$zut)*Math.sin((C$zut-.075)*Math.PI*2/.3)+1},reverse:function(){return C$zuo}};function _bounceTime(C$zut){return C$zut<1/2.75?7.5625*C$zut*C$zut:C$zut<2/2.75?7.5625*(C$zut-=1.5/2.75)*C$zut+.75:C$zut<2.5/2.75?7.5625*(C$zut-=2.25/2.75)*C$zut+.9375:7.5625*(C$zut-=2.625/2.75)*C$zut+.984375}cc.easeElasticOut=function(C$zut){return C$zut&&.3!==C$zut?{_period:C$zut,easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:Math.pow(2,-10*C$zut)*Math.sin((C$zut-this._period/4)*Math.PI*2/this._period)+1},reverse:function(){return cc.easeElasticIn(this._period)}}:C$zus},cc.easeElasticInOut=function(C$zut){return{_period:C$zut=C$zut||.3,easing:function(C$zut){var C$zue=this._period;var C$zui;return 0===C$zut||1===C$zut?C$zut:(C$zut*=2,C$zui=(C$zue=C$zue||(this._period=.3*1.5))/4,--C$zut<0?-.5*Math.pow(2,10*C$zut)*Math.sin((C$zut-C$zui)*Math.PI*2/C$zue):Math.pow(2,-10*C$zut)*Math.sin((C$zut-C$zui)*Math.PI*2/C$zue)*.5+1)},reverse:function(){return cc.easeElasticInOut(this._period)}}};var C$zuc={easing:function(C$zut){return 1-_bounceTime(1-C$zut)},reverse:function(){return C$zu_}};cc.easeBounceIn=function(){return C$zuc};var C$zu_={easing:_bounceTime,reverse:function(){return C$zuc}};cc.easeBounceOut=function(){return C$zu_};var C$zud={easing:function(C$zut){return C$zut<.5?.5*(1-_bounceTime(1-(C$zut*=2))):.5*_bounceTime(2*C$zut-1)+.5},reverse:function(){return C$zud}};cc.easeBounceInOut=function(){return C$zud};var C$zuf={easing:function(C$zut){return 0===C$zut||1===C$zut?C$zut:C$zut*C$zut*(2.70158*C$zut-1.70158)},reverse:function(){return C$zup}};cc.easeBackIn=function(){return C$zuf};var C$zup={easing:function(C$zut){return--C$zut*C$zut*(2.70158*C$zut+1.70158)+1},reverse:function(){return C$zuf}};cc.easeBackOut=function(){return C$zup};var C$zum={easing:function(C$zut){return(C$zut*=2)<1?C$zut*C$zut*(3.5949095*C$zut-2.5949095)/2:(C$zut-=2)*C$zut*(3.5949095*C$zut+2.5949095)/2+1},reverse:function(){return C$zum}};cc.easeBackInOut=function(){return C$zum},cc.easeBezierAction=function(C$zue,C$zui,C$zur,C$zun){return{easing:function(C$zut){return Math.pow(1-C$zut,3)*C$zue+3*C$zut*Math.pow(1-C$zut,2)*C$zui+3*Math.pow(C$zut,2)*(1-C$zut)*C$zur+Math.pow(C$zut,3)*C$zun},reverse:function(){return cc.easeBezierAction(C$zun,C$zur,C$zui,C$zue)}}};var C$zuv={easing:function(C$zut){return Math.pow(C$zut,2)},reverse:function(){return C$zuv}};cc.easeQuadraticActionIn=function(){return C$zuv};var C$zuy={easing:function(C$zut){return-C$zut*(C$zut-2)},reverse:function(){return C$zuy}};cc.easeQuadraticActionOut=function(){return C$zuy};var C$zug={easing:function(C$zut){return(C$zut*=2)<1?C$zut*C$zut*.5:-.5*(--C$zut*(C$zut-2)-1)},reverse:function(){return C$zug}};cc.easeQuadraticActionInOut=function(){return C$zug};var C$zub={easing:function(C$zut){return C$zut*C$zut*C$zut*C$zut},reverse:function(){return C$zub}};cc.easeQuarticActionIn=function(){return C$zub};var C$zuC={easing:function(C$zut){return-(--C$zut*C$zut*C$zut*C$zut-1)},reverse:function(){return C$zuC}};cc.easeQuarticActionOut=function(){return C$zuC};var C$zux={easing:function(C$zut){return(C$zut*=2)<1?.5*C$zut*C$zut*C$zut*C$zut:-.5*((C$zut-=2)*C$zut*C$zut*C$zut-2)},reverse:function(){return C$zux}};cc.easeQuarticActionInOut=function(){return C$zux};var C$zuA={easing:function(C$zut){return C$zut*C$zut*C$zut*C$zut*C$zut},reverse:function(){return C$zuA}};cc.easeQuinticActionIn=function(){return C$zuA};var C$zuS={easing:function(C$zut){return--C$zut*C$zut*C$zut*C$zut*C$zut+1},reverse:function(){return C$zuS}};cc.easeQuinticActionOut=function(){return C$zuS};var C$zuT={easing:function(C$zut){return(C$zut*=2)<1?.5*C$zut*C$zut*C$zut*C$zut*C$zut:.5*((C$zut-=2)*C$zut*C$zut*C$zut*C$zut+2)},reverse:function(){return C$zuT}};cc.easeQuinticActionInOut=function(){return C$zuT};var C$zuw={easing:function(C$zut){return-1*(Math.sqrt(1-C$zut*C$zut)-1)},reverse:function(){return C$zuw}};cc.easeCircleActionIn=function(){return C$zuw};var C$zuE={easing:function(C$zut){return--C$zut,Math.sqrt(1-C$zut*C$zut)},reverse:function(){return C$zuE}};cc.easeCircleActionOut=function(){return C$zuE};var C$zuP={easing:function(C$zut){return(C$zut*=2)<1?-.5*(Math.sqrt(1-C$zut*C$zut)-1):(C$zut-=2,.5*(Math.sqrt(1-C$zut*C$zut)+1))},reverse:function(){return C$zuP}};cc.easeCircleActionInOut=function(){return C$zuP};var C$zuM={easing:function(C$zut){return C$zut*C$zut*C$zut},reverse:function(){return C$zuM}};cc.easeCubicActionIn=function(){return C$zuM};var C$zuR={easing:function(C$zut){return--C$zut*C$zut*C$zut+1},reverse:function(){return C$zuR}};cc.easeCubicActionOut=function(){return C$zuR};var C$zuI={easing:function(C$zut){return(C$zut*=2)<1?.5*C$zut*C$zut*C$zut:.5*((C$zut-=2)*C$zut*C$zut+2)},reverse:function(){return C$zuI}};cc.easeCubicActionInOut=function(){return C$zuI}},{}],5:[function(C$zut,C$zue,C$zui){"use strict";cc.ActionInstant=cc.Class({name:"cc.ActionInstant",extends:cc.FiniteTimeAction,isDone:function(){return!0},step:function(C$zut){this.update(1)},update:function(C$zut){},reverse:function(){return this.clone()},clone:function(){return new cc.ActionInstant}}),cc.Show=cc.Class({name:"cc.Show",extends:cc.ActionInstant,update:function(C$zut){var C$zue=this.target.getComponentsInChildren(cc.RenderComponent);for(var C$zui=0;C$zui<C$zue.length;++C$zui)C$zue[C$zui].enabled=!0},reverse:function(){return new cc.Hide},clone:function(){return new cc.Show}}),cc.show=function(){return new cc.Show},cc.Hide=cc.Class({name:"cc.Hide",extends:cc.ActionInstant,update:function(C$zut){var C$zue=this.target.getComponentsInChildren(cc.RenderComponent);for(var C$zui=0;C$zui<C$zue.length;++C$zui)C$zue[C$zui].enabled=!1},reverse:function(){return new cc.Show},clone:function(){return new cc.Hide}}),cc.hide=function(){return new cc.Hide},cc.ToggleVisibility=cc.Class({name:"cc.ToggleVisibility",extends:cc.ActionInstant,update:function(C$zut){var C$zue=this.target.getComponentsInChildren(cc.RenderComponent);for(var C$zui=0;C$zui<C$zue.length;++C$zui){var C$zur=C$zue[C$zui];C$zur.enabled=!C$zur.enabled}},reverse:function(){return new cc.ToggleVisibility},clone:function(){return new cc.ToggleVisibility}}),cc.toggleVisibility=function(){return new cc.ToggleVisibility},cc.RemoveSelf=cc.Class({name:"cc.RemoveSelf",extends:cc.ActionInstant,ctor:function(C$zut){this._isNeedCleanUp=!0,void 0!==C$zut&&this.init(C$zut)},update:function(C$zut){this.target.removeFromParent(this._isNeedCleanUp)},init:function(C$zut){return this._isNeedCleanUp=C$zut,!0},reverse:function(){return new cc.RemoveSelf(this._isNeedCleanUp)},clone:function(){return new cc.RemoveSelf(this._isNeedCleanUp)}}),cc.removeSelf=function(C$zut){return new cc.RemoveSelf(C$zut)},cc.DestroySelf=cc.Class({name:"cc.DestroySelf",extends:cc.ActionInstant,update:function(){this.target.destroy()},reverse:function(){return new cc.DestroySelf},clone:function(){return new cc.DestroySelf}}),cc.destroySelf=function(){return new cc.DestroySelf},cc.FlipX=cc.Class({name:"cc.FlipX",extends:cc.ActionInstant,ctor:function(C$zut){this._flippedX=!1,void 0!==C$zut&&this.initWithFlipX(C$zut)},initWithFlipX:function(C$zut){return this._flippedX=C$zut,!0},update:function(C$zut){this.target.scaleX=Math.abs(this.target.scaleX)*(this._flippedX?-1:1)},reverse:function(){return new cc.FlipX(!this._flippedX)},clone:function(){var C$zut=new cc.FlipX;return C$zut.initWithFlipX(this._flippedX),C$zut}}),cc.flipX=function(C$zut){return new cc.FlipX(C$zut)},cc.FlipY=cc.Class({name:"cc.FlipY",extends:cc.ActionInstant,ctor:function(C$zut){this._flippedY=!1,void 0!==C$zut&&this.initWithFlipY(C$zut)},initWithFlipY:function(C$zut){return this._flippedY=C$zut,!0},update:function(C$zut){this.target.scaleY=Math.abs(this.target.scaleY)*(this._flippedY?-1:1)},reverse:function(){return new cc.FlipY(!this._flippedY)},clone:function(){var C$zut=new cc.FlipY;return C$zut.initWithFlipY(this._flippedY),C$zut}}),cc.flipY=function(C$zut){return new cc.FlipY(C$zut)},cc.Place=cc.Class({name:"cc.Place",extends:cc.ActionInstant,ctor:function(C$zut,C$zue){this._x=0,void(this._y=0)!==C$zut&&(void 0!==C$zut.x&&(C$zue=C$zut.y,C$zut=C$zut.x),this.initWithPosition(C$zut,C$zue))},initWithPosition:function(C$zut,C$zue){return this._x=C$zut,this._y=C$zue,!0},update:function(C$zut){this.target.setPosition(this._x,this._y)},clone:function(){var C$zut=new cc.Place;return C$zut.initWithPosition(this._x,this._y),C$zut}}),cc.place=function(C$zut,C$zue){return new cc.Place(C$zut,C$zue)},cc.CallFunc=cc.Class({name:"cc.CallFunc",extends:cc.ActionInstant,ctor:function(C$zut,C$zue,C$zui){this._selectorTarget=null,this._function=null,this._data=null,this.initWithFunction(C$zut,C$zue,C$zui)},initWithFunction:function(C$zut,C$zue,C$zui){return C$zut&&(this._function=C$zut),C$zue&&(this._selectorTarget=C$zue),void 0!==C$zui&&(this._data=C$zui),!0},execute:function(){this._function&&this._function.call(this._selectorTarget,this.target,this._data)},update:function(C$zut){this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(C$zut){C$zut!==this._selectorTarget&&(this._selectorTarget&&(this._selectorTarget=null),this._selectorTarget=C$zut)},clone:function(){var C$zut=new cc.CallFunc;return C$zut.initWithFunction(this._function,this._selectorTarget,this._data),C$zut}}),cc.callFunc=function(C$zut,C$zue,C$zui){return new cc.CallFunc(C$zut,C$zue,C$zui)}},{}],6:[function(C$zut,C$zue,C$zui){"use strict";function bezierAt(C$zut,C$zue,C$zui,C$zur,C$zun){return Math.pow(1-C$zun,3)*C$zut+3*C$zun*Math.pow(1-C$zun,2)*C$zue+3*Math.pow(C$zun,2)*(1-C$zun)*C$zui+Math.pow(C$zun,3)*C$zur}cc.ActionInterval=cc.Class({name:"cc.ActionInterval",extends:cc.FiniteTimeAction,ctor:function(C$zut){this.MAX_VALUE=2,this._elapsed=0,this._firstTick=!1,this._easeList=null,this._speed=1,this._timesForRepeat=1,this._repeatForever=!1,this._repeatMethod=!1,this._speedMethod=!1,void 0!==C$zut&&cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)},getElapsed:function(){return this._elapsed},initWithDuration:function(C$zut){return this._duration=0===C$zut?cc.macro.FLT_EPSILON:C$zut,this._elapsed=0,this._firstTick=!0},isDone:function(){return this._elapsed>=this._duration},_cloneDecoration:function(C$zut){C$zut._repeatForever=this._repeatForever,C$zut._speed=this._speed,C$zut._timesForRepeat=this._timesForRepeat,C$zut._easeList=this._easeList,C$zut._speedMethod=this._speedMethod,C$zut._repeatMethod=this._repeatMethod},_reverseEaseList:function(C$zut){if(this._easeList){C$zut._easeList=[];for(var C$zue=0;C$zue<this._easeList.length;C$zue++)C$zut._easeList.push(this._easeList[C$zue].reverse())}},clone:function(){var C$zut=new cc.ActionInterval(this._duration);return this._cloneDecoration(C$zut),C$zut},easing:function(C$zut){this._easeList?this._easeList.length=0:this._easeList=[];for(var C$zue=0;C$zue<arguments.length;C$zue++)this._easeList.push(arguments[C$zue]);return this},_computeEaseTime:function(C$zut){var C$zue=this._easeList;if(!C$zue||0===C$zue.length)return C$zut;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)C$zut=C$zue[C$zui].easing(C$zut);return C$zut},step:function(C$zut){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=C$zut;C$zut=this._elapsed/(1.192092896e-7<this._duration?this._duration:1.192092896e-7);this.update(0<(C$zut=C$zut<1?C$zut:1)?C$zut:0),this._repeatMethod&&1<this._timesForRepeat&&this.isDone()&&(this._repeatForever||this._timesForRepeat--,this.startWithTarget(this.target),this.step(this._elapsed-this._duration))},startWithTarget:function(C$zut){cc.Action.prototype.startWithTarget.call(this,C$zut),this._elapsed=0,this._firstTick=!0},reverse:function(){return cc.logID(1010),null},setAmplitudeRate:function(C$zut){cc.logID(1011)},getAmplitudeRate:function(){return cc.logID(1012),0},speed:function(C$zut){return C$zut<=0?cc.logID(1013):(this._speedMethod=!0,this._speed*=C$zut),this},getSpeed:function(){return this._speed},setSpeed:function(C$zut){return this._speed=C$zut,this},repeat:function(C$zut){return C$zut=Math.round(C$zut),isNaN(C$zut)||C$zut<1?cc.logID(1014):(this._repeatMethod=!0,this._timesForRepeat*=C$zut),this},repeatForever:function(){return this._repeatMethod=!0,this._timesForRepeat=this.MAX_VALUE,this._repeatForever=!0,this}}),cc.actionInterval=function(C$zut){return new cc.ActionInterval(C$zut)},cc.Sequence=cc.Class({name:"cc.Sequence",extends:cc.ActionInterval,ctor:function(C$zut){this._actions=[],this._split=null,this._last=0,this._reversed=!1;var C$zue=C$zut instanceof Array?C$zut:arguments;if(1!==C$zue.length){var C$zui=C$zue.length-1;if(0<=C$zui&&null==C$zue[C$zui]&&cc.logID(1015),0<=C$zui){var C$zur,C$zun=C$zue[0];for(var C$zua=1;C$zua<C$zui;C$zua++)C$zue[C$zua]&&(C$zur=C$zun,C$zun=cc.Sequence._actionOneTwo(C$zur,C$zue[C$zua]));this.initWithTwoActions(C$zun,C$zue[C$zui])}}else cc.errorID(1019)},initWithTwoActions:function(C$zut,C$zue){if(!C$zut||!C$zue)return cc.errorID(1025),!1;var C$zui=C$zut._duration,C$zur=C$zue._duration;return C$zui*=C$zut._repeatMethod?C$zut._timesForRepeat:1,C$zur*=C$zue._repeatMethod?C$zue._timesForRepeat:1,this.initWithDuration(C$zui+C$zur),this._actions[0]=C$zut,this._actions[1]=C$zue,!0},clone:function(){var C$zut=new cc.Sequence;return this._cloneDecoration(C$zut),C$zut.initWithTwoActions(this._actions[0].clone(),this._actions[1].clone()),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._split=this._actions[0]._duration/this._duration,this._split*=this._actions[0]._repeatMethod?this._actions[0]._timesForRepeat:1,this._last=-1},stop:function(){-1!==this._last&&this._actions[this._last].stop(),cc.Action.prototype.stop.call(this)},update:function(C$zut){var C$zue,C$zui=0;var C$zur=this._split,C$zun=this._actions,C$zua=this._last;(C$zut=this._computeEaseTime(C$zut))<C$zur?(C$zue=0!==C$zur?C$zut/C$zur:1,0===C$zui&&1===C$zua&&this._reversed&&(C$zun[1].update(0),C$zun[1].stop())):(C$zue=(C$zui=1)===C$zur?1:(C$zut-C$zur)/(1-C$zur),-1===C$zua&&(C$zun[0].startWithTarget(this.target),C$zun[0].update(1),C$zun[0].stop()),0===C$zua&&(C$zun[0].update(1),C$zun[0].stop())),C$zut=C$zun[C$zui],C$zua===C$zui&&C$zut.isDone()||(C$zua!==C$zui&&C$zut.startWithTarget(this.target),C$zue*=C$zut._timesForRepeat,C$zut.update(1<C$zue?C$zue%1:C$zue),this._last=C$zui)},reverse:function(){var C$zut=cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse());return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut._reversed=!0,C$zut}}),cc.sequence=function(C$zut){var C$zue=C$zut instanceof Array?C$zut:arguments;if(1===C$zue.length)return cc.errorID(1019),null;var C$zui=C$zue.length-1;0<=C$zui&&null==C$zue[C$zui]&&cc.logID(1015);var C$zur=null;if(0<=C$zui){C$zur=C$zue[0];for(var C$zun=1;C$zun<=C$zui;C$zun++)C$zue[C$zun]&&(C$zur=cc.Sequence._actionOneTwo(C$zur,C$zue[C$zun]))}return C$zur},cc.Sequence._actionOneTwo=function(C$zut,C$zue){var C$zui=new cc.Sequence;return C$zui.initWithTwoActions(C$zut,C$zue),C$zui},cc.Repeat=cc.Class({name:"cc.Repeat",extends:cc.ActionInterval,ctor:function(C$zut,C$zue){this._times=0,this._total=0,this._nextDt=0,this._actionInstant=!1,this._innerAction=null,void 0!==C$zue&&this.initWithAction(C$zut,C$zue)},initWithAction:function(C$zut,C$zue){var C$zui=C$zut._duration*C$zue;return!!this.initWithDuration(C$zui)&&(this._times=C$zue,(this._innerAction=C$zut)instanceof cc.ActionInstant&&(this._actionInstant=!0,--this._times),!(this._total=0))},clone:function(){var C$zut=new cc.Repeat;return this._cloneDecoration(C$zut),C$zut.initWithAction(this._innerAction.clone(),this._times),C$zut},startWithTarget:function(C$zut){this._total=0,this._nextDt=this._innerAction._duration/this._duration,cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._innerAction.startWithTarget(C$zut)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},update:function(C$zut){C$zut=this._computeEaseTime(C$zut);var C$zue=this._innerAction;var C$zui=this._duration;var C$zur=this._times;var C$zun=this._nextDt;if(C$zun<=C$zut){for(;C$zun<C$zut&&this._total<C$zur;)C$zue.update(1),this._total++,C$zue.stop(),C$zue.startWithTarget(this.target),C$zun+=C$zue._duration/C$zui,this._nextDt=1<C$zun?1:C$zun;1<=C$zut&&this._total<C$zur&&(C$zue.update(1),this._total++),this._actionInstant||(this._total===C$zur?C$zue.stop():C$zue.update(C$zut-(C$zun-C$zue._duration/C$zui)))}else C$zue.update(C$zut*C$zur%1)},isDone:function(){return this._total===this._times},reverse:function(){var C$zut=new cc.Repeat(this._innerAction.reverse(),this._times);return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut},setInnerAction:function(C$zut){this._innerAction!==C$zut&&(this._innerAction=C$zut)},getInnerAction:function(){return this._innerAction}}),cc.repeat=function(C$zut,C$zue){return new cc.Repeat(C$zut,C$zue)},cc.RepeatForever=cc.Class({name:"cc.RepeatForever",extends:cc.ActionInterval,ctor:function(C$zut){this._innerAction=null,C$zut&&this.initWithAction(C$zut)},initWithAction:function(C$zut){return C$zut?(this._innerAction=C$zut,!0):(cc.errorID(1026),!1)},clone:function(){var C$zut=new cc.RepeatForever;return this._cloneDecoration(C$zut),C$zut.initWithAction(this._innerAction.clone()),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._innerAction.startWithTarget(C$zut)},step:function(C$zut){var C$zue=this._innerAction;C$zue.step(C$zut),C$zue.isDone()&&(C$zue.startWithTarget(this.target),C$zue.step(C$zue.getElapsed()-C$zue._duration))},isDone:function(){return!1},reverse:function(){var C$zut=new cc.RepeatForever(this._innerAction.reverse());return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut},setInnerAction:function(C$zut){this._innerAction!==C$zut&&(this._innerAction=C$zut)},getInnerAction:function(){return this._innerAction}}),cc.repeatForever=function(C$zut){return new cc.RepeatForever(C$zut)},cc.Spawn=cc.Class({name:"cc.Spawn",extends:cc.ActionInterval,ctor:function(C$zut){this._one=null,this._two=null;var C$zue=C$zut instanceof Array?C$zut:arguments;if(1!==C$zue.length){var C$zui=C$zue.length-1;if(0<=C$zui&&null==C$zue[C$zui]&&cc.logID(1015),0<=C$zui){var C$zur,C$zun=C$zue[0];for(var C$zua=1;C$zua<C$zui;C$zua++)C$zue[C$zua]&&(C$zur=C$zun,C$zun=cc.Spawn._actionOneTwo(C$zur,C$zue[C$zua]));this.initWithTwoActions(C$zun,C$zue[C$zui])}}else cc.errorID(1020)},initWithTwoActions:function(C$zut,C$zue){if(!C$zut||!C$zue)return cc.errorID(1027),!1;var C$zui=!1;var C$zur=C$zut._duration;var C$zun=C$zue._duration;return this.initWithDuration(Math.max(C$zur,C$zun))&&(this._one=C$zut,this._two=C$zue,C$zun<C$zur?this._two=cc.Sequence._actionOneTwo(C$zue,cc.delayTime(C$zur-C$zun)):C$zur<C$zun&&(this._one=cc.Sequence._actionOneTwo(C$zut,cc.delayTime(C$zun-C$zur))),C$zui=!0),C$zui},clone:function(){var C$zut=new cc.Spawn;return this._cloneDecoration(C$zut),C$zut.initWithTwoActions(this._one.clone(),this._two.clone()),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._one.startWithTarget(C$zut),this._two.startWithTarget(C$zut)},stop:function(){this._one.stop(),this._two.stop(),cc.Action.prototype.stop.call(this)},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this._one&&this._one.update(C$zut),this._two&&this._two.update(C$zut)},reverse:function(){var C$zut=cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse());return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut}}),cc.spawn=function(C$zut){var C$zue=C$zut instanceof Array?C$zut:arguments;if(1===C$zue.length)return cc.errorID(1020),null;0<C$zue.length&&null==C$zue[C$zue.length-1]&&cc.logID(1015);var C$zui=C$zue[0];for(var C$zur=1;C$zur<C$zue.length;C$zur++)null!=C$zue[C$zur]&&(C$zui=cc.Spawn._actionOneTwo(C$zui,C$zue[C$zur]));return C$zui},cc.Spawn._actionOneTwo=function(C$zut,C$zue){var C$zui=new cc.Spawn;return C$zui.initWithTwoActions(C$zut,C$zue),C$zui},cc.RotateTo=cc.Class({name:"cc.RotateTo",extends:cc.ActionInterval,statics:{_reverse:!1},ctor:function(C$zut,C$zue){this._startAngle=0,this._dstAngle=0,void(this._angle=0)!==C$zue&&this.initWithDuration(C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._dstAngle=C$zue,!0)},clone:function(){var C$zut=new cc.RotateTo;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._dstAngle),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut);C$zut=C$zut.angle%360;var C$zue=cc.RotateTo._reverse?this._dstAngle-C$zut:this._dstAngle+C$zut;180<C$zue&&(C$zue-=360),C$zue<-180&&(C$zue+=360),this._startAngle=C$zut,this._angle=cc.RotateTo._reverse?C$zue:-C$zue},reverse:function(){cc.logID(1016)},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this.target&&(this.target.angle=this._startAngle+this._angle*C$zut)}}),cc.rotateTo=function(C$zut,C$zue){return new cc.RotateTo(C$zut,C$zue)},cc.RotateBy=cc.Class({name:"cc.RotateBy",extends:cc.ActionInterval,statics:{_reverse:!1},ctor:function(C$zut,C$zue){C$zue*=cc.RotateBy._reverse?1:-1,this._deltaAngle=0,void(this._startAngle=0)!==C$zue&&this.initWithDuration(C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._deltaAngle=C$zue,!0)},clone:function(){var C$zut=new cc.RotateBy;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._deltaAngle),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._startAngle=C$zut.angle},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this.target&&(this.target.angle=this._startAngle+this._deltaAngle*C$zut)},reverse:function(){var C$zut=new cc.RotateBy;return C$zut.initWithDuration(this._duration,-this._deltaAngle),this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut}}),cc.rotateBy=function(C$zut,C$zue){return new cc.RotateBy(C$zut,C$zue)},cc.MoveBy=cc.Class({name:"cc.MoveBy",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui){this._positionDelta=cc.v2(0,0),this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),void 0!==C$zue&&cc.MoveBy.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui)},initWithDuration:function(C$zut,C$zue,C$zui){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(void 0!==C$zue.x&&(C$zui=C$zue.y,C$zue=C$zue.x),this._positionDelta.x=C$zue,this._positionDelta.y=C$zui,!0)},clone:function(){var C$zut=new cc.MoveBy;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._positionDelta),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut);var C$zue=C$zut.x;C$zut=C$zut.y;this._previousPosition.x=C$zue,this._previousPosition.y=C$zut,this._startPosition.x=C$zue,this._startPosition.y=C$zut},update:function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua;C$zut=this._computeEaseTime(C$zut),this.target&&(C$zue=this._positionDelta.x*C$zut,C$zut=this._positionDelta.y*C$zut,C$zui=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$zur=this.target.x,C$zun=this.target.y,C$zua=this._previousPosition,C$zui.x=C$zui.x+C$zur-C$zua.x,C$zui.y=C$zui.y+C$zun-C$zua.y,C$zue+=C$zui.x,C$zut+=C$zui.y,C$zua.x=C$zue,C$zua.y=C$zut,this.target.setPosition(C$zue,C$zut)):this.target.setPosition(C$zui.x+C$zue,C$zui.y+C$zut))},reverse:function(){var C$zut=new cc.MoveBy(this._duration,cc.v2(-this._positionDelta.x,-this._positionDelta.y));return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut}}),cc.moveBy=function(C$zut,C$zue,C$zui){return new cc.MoveBy(C$zut,C$zue,C$zui)},cc.MoveTo=cc.Class({name:"cc.MoveTo",extends:cc.MoveBy,ctor:function(C$zut,C$zue,C$zui){this._endPosition=cc.v2(0,0),void 0!==C$zue&&this.initWithDuration(C$zut,C$zue,C$zui)},initWithDuration:function(C$zut,C$zue,C$zui){return!!cc.MoveBy.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui)&&(void 0!==C$zue.x&&(C$zui=C$zue.y,C$zue=C$zue.x),this._endPosition.x=C$zue,this._endPosition.y=C$zui,!0)},clone:function(){var C$zut=new cc.MoveTo;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._endPosition),C$zut},startWithTarget:function(C$zut){cc.MoveBy.prototype.startWithTarget.call(this,C$zut),this._positionDelta.x=this._endPosition.x-C$zut.x,this._positionDelta.y=this._endPosition.y-C$zut.y}}),cc.moveTo=function(C$zut,C$zue,C$zui){return new cc.MoveTo(C$zut,C$zue,C$zui)},cc.SkewTo=cc.Class({name:"cc.SkewTo",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui){this._skewX=0,this._skewY=0,this._startSkewX=0,this._startSkewY=0,this._endSkewX=0,this._endSkewY=0,this._deltaX=0,void(this._deltaY=0)!==C$zui&&cc.SkewTo.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui)},initWithDuration:function(C$zut,C$zue,C$zui){var C$zur=!1;return cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._endSkewX=C$zue,this._endSkewY=C$zui,C$zur=!0),C$zur},clone:function(){var C$zut=new cc.SkewTo;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._endSkewX,this._endSkewY),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._startSkewX=C$zut.skewX%180,this._deltaX=this._endSkewX-this._startSkewX,180<this._deltaX&&(this._deltaX-=360),this._deltaX<-180&&(this._deltaX+=360),this._startSkewY=C$zut.skewY%360,this._deltaY=this._endSkewY-this._startSkewY,180<this._deltaY&&(this._deltaY-=360),this._deltaY<-180&&(this._deltaY+=360)},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this.target.skewX=this._startSkewX+this._deltaX*C$zut,this.target.skewY=this._startSkewY+this._deltaY*C$zut}}),cc.skewTo=function(C$zut,C$zue,C$zui){return new cc.SkewTo(C$zut,C$zue,C$zui)},cc.SkewBy=cc.Class({name:"cc.SkewBy",extends:cc.SkewTo,ctor:function(C$zut,C$zue,C$zui){void 0!==C$zui&&this.initWithDuration(C$zut,C$zue,C$zui)},initWithDuration:function(C$zut,C$zue,C$zui){var C$zur=!1;return cc.SkewTo.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui)&&(this._skewX=C$zue,this._skewY=C$zui,C$zur=!0),C$zur},clone:function(){var C$zut=new cc.SkewBy;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._skewX,this._skewY),C$zut},startWithTarget:function(C$zut){cc.SkewTo.prototype.startWithTarget.call(this,C$zut),this._deltaX=this._skewX,this._deltaY=this._skewY,this._endSkewX=this._startSkewX+this._deltaX,this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){var C$zut=new cc.SkewBy(this._duration,-this._skewX,-this._skewY);return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut}}),cc.skewBy=function(C$zut,C$zue,C$zui){return new cc.SkewBy(C$zut,C$zue,C$zui)},cc.JumpBy=cc.Class({name:"cc.JumpBy",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui,C$zur,C$zun){this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),this._delta=cc.v2(0,0),this._height=0,void(this._jumps=0)!==C$zur&&cc.JumpBy.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui,C$zur,C$zun)},initWithDuration:function(C$zut,C$zue,C$zui,C$zur,C$zun){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(void 0===C$zun&&(C$zun=C$zur,C$zur=C$zui,C$zui=C$zue.y,C$zue=C$zue.x),this._delta.x=C$zue,this._delta.y=C$zui,this._height=C$zur,this._jumps=C$zun,!0)},clone:function(){var C$zut=new cc.JumpBy;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._delta,this._height,this._jumps),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut);var C$zue=C$zut.x;C$zut=C$zut.y;this._previousPosition.x=C$zue,this._previousPosition.y=C$zut,this._startPosition.x=C$zue,this._startPosition.y=C$zut},update:function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua;C$zut=this._computeEaseTime(C$zut),this.target&&(C$zue=C$zut*this._jumps%1,C$zue=4*this._height*C$zue*(1-C$zue),C$zue+=this._delta.y*C$zut,C$zut=this._delta.x*C$zut,C$zui=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$zur=this.target.x,C$zun=this.target.y,C$zua=this._previousPosition,C$zui.x=C$zui.x+C$zur-C$zua.x,C$zui.y=C$zui.y+C$zun-C$zua.y,C$zut+=C$zui.x,C$zue+=C$zui.y,C$zua.x=C$zut,C$zua.y=C$zue,this.target.setPosition(C$zut,C$zue)):this.target.setPosition(C$zui.x+C$zut,C$zui.y+C$zue))},reverse:function(){var C$zut=new cc.JumpBy(this._duration,cc.v2(-this._delta.x,-this._delta.y),this._height,this._jumps);return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut}}),cc.jumpBy=function(C$zut,C$zue,C$zui,C$zur,C$zun){return new cc.JumpBy(C$zut,C$zue,C$zui,C$zur,C$zun)},cc.JumpTo=cc.Class({name:"cc.JumpTo",extends:cc.JumpBy,ctor:function(C$zut,C$zue,C$zui,C$zur,C$zun){this._endPosition=cc.v2(0,0),void 0!==C$zur&&this.initWithDuration(C$zut,C$zue,C$zui,C$zur,C$zun)},initWithDuration:function(C$zut,C$zue,C$zui,C$zur,C$zun){return!!cc.JumpBy.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui,C$zur,C$zun)&&(void 0===C$zun&&(C$zui=C$zue.y,C$zue=C$zue.x),this._endPosition.x=C$zue,this._endPosition.y=C$zui,!0)},startWithTarget:function(C$zut){cc.JumpBy.prototype.startWithTarget.call(this,C$zut),this._delta.x=this._endPosition.x-this._startPosition.x,this._delta.y=this._endPosition.y-this._startPosition.y},clone:function(){var C$zut=new cc.JumpTo;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._endPosition,this._height,this._jumps),C$zut}}),cc.jumpTo=function(C$zut,C$zue,C$zui,C$zur,C$zun){return new cc.JumpTo(C$zut,C$zue,C$zui,C$zur,C$zun)},cc.BezierBy=cc.Class({name:"cc.BezierBy",extends:cc.ActionInterval,ctor:function(C$zut,C$zue){this._config=[],this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),C$zue&&cc.BezierBy.prototype.initWithDuration.call(this,C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._config=C$zue,!0)},clone:function(){var C$zut=new cc.BezierBy;this._cloneDecoration(C$zut);var C$zue=[];for(var C$zui=0;C$zui<this._config.length;C$zui++){var C$zur=this._config[C$zui];C$zue.push(cc.v2(C$zur.x,C$zur.y))}return C$zut.initWithDuration(this._duration,C$zue),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut);var C$zue=C$zut.x;C$zut=C$zut.y;this._previousPosition.x=C$zue,this._previousPosition.y=C$zut,this._startPosition.x=C$zue,this._startPosition.y=C$zut},update:function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo;C$zut=this._computeEaseTime(C$zut),this.target&&(C$zue=(C$zuo=this._config)[0].x,C$zui=C$zuo[1].x,C$zur=C$zuo[2].x,C$zun=C$zuo[0].y,C$zua=C$zuo[1].y,C$zuo=C$zuo[2].y,C$zue=bezierAt(0,C$zue,C$zui,C$zur,C$zut),C$zui=bezierAt(0,C$zun,C$zua,C$zuo,C$zut),C$zur=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$zun=this.target.x,C$zua=this.target.y,C$zuo=this._previousPosition,C$zur.x=C$zur.x+C$zun-C$zuo.x,C$zur.y=C$zur.y+C$zua-C$zuo.y,C$zue+=C$zur.x,C$zui+=C$zur.y,C$zuo.x=C$zue,C$zuo.y=C$zui,this.target.setPosition(C$zue,C$zui)):this.target.setPosition(C$zur.x+C$zue,C$zur.y+C$zui))},reverse:function(){var C$zut=this._config;var C$zue=C$zut[0].x,C$zui=C$zut[0].y;var C$zur=C$zut[1].x,C$zun=C$zut[1].y;var C$zua=C$zut[2].x,C$zut=C$zut[2].y;C$zur=[cc.v2(C$zur-C$zua,C$zun-C$zut),cc.v2(C$zue-C$zua,C$zui-C$zut),cc.v2(-C$zua,-C$zut)];C$zun=new cc.BezierBy(this._duration,C$zur);return this._cloneDecoration(C$zun),this._reverseEaseList(C$zun),C$zun}}),cc.bezierBy=function(C$zut,C$zue){return new cc.BezierBy(C$zut,C$zue)},cc.BezierTo=cc.Class({name:"cc.BezierTo",extends:cc.BezierBy,ctor:function(C$zut,C$zue){this._toConfig=[],C$zue&&this.initWithDuration(C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._toConfig=C$zue,!0)},clone:function(){var C$zut=new cc.BezierTo;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._toConfig),C$zut},startWithTarget:function(C$zut){cc.BezierBy.prototype.startWithTarget.call(this,C$zut);C$zut=this._startPosition;var C$zue=this._toConfig;var C$zui=this._config;C$zui[0]=C$zue[0].sub(C$zut),C$zui[1]=C$zue[1].sub(C$zut),C$zui[2]=C$zue[2].sub(C$zut)}}),cc.bezierTo=function(C$zut,C$zue){return new cc.BezierTo(C$zut,C$zue)},cc.ScaleTo=cc.Class({name:"cc.ScaleTo",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui){this._scaleX=1,this._scaleY=1,this._startScaleX=1,this._startScaleY=1,this._endScaleX=0,this._endScaleY=0,this._deltaX=0,void(this._deltaY=0)!==C$zue&&cc.ScaleTo.prototype.initWithDuration.call(this,C$zut,C$zue,C$zui)},initWithDuration:function(C$zut,C$zue,C$zui){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._endScaleX=C$zue,this._endScaleY=null!=C$zui?C$zui:C$zue,!0)},clone:function(){var C$zut=new cc.ScaleTo;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._endScaleX,this._endScaleY),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._startScaleX=C$zut.scaleX,this._startScaleY=C$zut.scaleY,this._deltaX=this._endScaleX-this._startScaleX,this._deltaY=this._endScaleY-this._startScaleY},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this.target&&(this.target.scaleX=this._startScaleX+this._deltaX*C$zut,this.target.scaleY=this._startScaleY+this._deltaY*C$zut)}}),cc.scaleTo=function(C$zut,C$zue,C$zui){return new cc.ScaleTo(C$zut,C$zue,C$zui)},cc.ScaleBy=cc.Class({name:"cc.ScaleBy",extends:cc.ScaleTo,startWithTarget:function(C$zut){cc.ScaleTo.prototype.startWithTarget.call(this,C$zut),this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX,this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){var C$zut=new cc.ScaleBy(this._duration,1/this._endScaleX,1/this._endScaleY);return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut},clone:function(){var C$zut=new cc.ScaleBy;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._endScaleX,this._endScaleY),C$zut}}),cc.scaleBy=function(C$zut,C$zue,C$zui){return new cc.ScaleBy(C$zut,C$zue,C$zui)},cc.Blink=cc.Class({name:"cc.Blink",extends:cc.ActionInterval,ctor:function(C$zut,C$zue){this._times=0,this._originalState=!1,void 0!==C$zue&&this.initWithDuration(C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._times=C$zue,!0)},clone:function(){var C$zut=new cc.Blink;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._times),C$zut},update:function(C$zut){var C$zue;C$zut=this._computeEaseTime(C$zut),this.target&&!this.isDone()&&(C$zue=1/this._times,this.target.opacity=C$zue/2<C$zut%C$zue?255:0)},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._originalState=C$zut.opacity},stop:function(){this.target.opacity=this._originalState,cc.ActionInterval.prototype.stop.call(this)},reverse:function(){var C$zut=new cc.Blink(this._duration,this._times);return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut}}),cc.blink=function(C$zut,C$zue){return new cc.Blink(C$zut,C$zue)},cc.FadeTo=cc.Class({name:"cc.FadeTo",extends:cc.ActionInterval,ctor:function(C$zut,C$zue){this._toOpacity=0,void(this._fromOpacity=0)!==C$zue&&cc.FadeTo.prototype.initWithDuration.call(this,C$zut,C$zue)},initWithDuration:function(C$zut,C$zue){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._toOpacity=C$zue,!0)},clone:function(){var C$zut=new cc.FadeTo;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._toOpacity),C$zut},update:function(C$zut){C$zut=this._computeEaseTime(C$zut);var C$zue=void 0!==this._fromOpacity?this._fromOpacity:255;this.target.opacity=C$zue+(this._toOpacity-C$zue)*C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._fromOpacity=C$zut.opacity}}),cc.fadeTo=function(C$zut,C$zue){return new cc.FadeTo(C$zut,C$zue)},cc.FadeIn=cc.Class({name:"cc.FadeIn",extends:cc.FadeTo,ctor:function(C$zut){null==C$zut&&(C$zut=0),this._reverseAction=null,this.initWithDuration(C$zut,255)},reverse:function(){var C$zut=new cc.FadeOut;return C$zut.initWithDuration(this._duration,0),this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut},clone:function(){var C$zut=new cc.FadeIn;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._toOpacity),C$zut},startWithTarget:function(C$zut){this._reverseAction&&(this._toOpacity=this._reverseAction._fromOpacity),cc.FadeTo.prototype.startWithTarget.call(this,C$zut)}}),cc.fadeIn=function(C$zut){return new cc.FadeIn(C$zut)},cc.FadeOut=cc.Class({name:"cc.FadeOut",extends:cc.FadeTo,ctor:function(C$zut){null==C$zut&&(C$zut=0),this._reverseAction=null,this.initWithDuration(C$zut,0)},reverse:function(){var C$zut=new cc.FadeIn;return C$zut._reverseAction=this,C$zut.initWithDuration(this._duration,255),this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut},clone:function(){var C$zut=new cc.FadeOut;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._toOpacity),C$zut}}),cc.fadeOut=function(C$zut){return new cc.FadeOut(C$zut)},cc.TintTo=cc.Class({name:"cc.TintTo",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui,C$zur){this._to=cc.color(0,0,0),this._from=cc.color(0,0,0),C$zue instanceof cc.Color&&(C$zur=C$zue.b,C$zui=C$zue.g,C$zue=C$zue.r),void 0!==C$zur&&this.initWithDuration(C$zut,C$zue,C$zui,C$zur)},initWithDuration:function(C$zut,C$zue,C$zui,C$zur){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._to=cc.color(C$zue,C$zui,C$zur),!0)},clone:function(){var C$zut=new cc.TintTo;this._cloneDecoration(C$zut);var C$zue=this._to;return C$zut.initWithDuration(this._duration,C$zue.r,C$zue.g,C$zue.b),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._from=this.target.color},update:function(C$zut){C$zut=this._computeEaseTime(C$zut);var C$zue=this._from,C$zui=this._to;C$zue&&(this.target.color=cc.color(C$zue.r+(C$zui.r-C$zue.r)*C$zut,C$zue.g+(C$zui.g-C$zue.g)*C$zut,C$zue.b+(C$zui.b-C$zue.b)*C$zut))}}),cc.tintTo=function(C$zut,C$zue,C$zui,C$zur){return new cc.TintTo(C$zut,C$zue,C$zui,C$zur)},cc.TintBy=cc.Class({name:"cc.TintBy",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui,C$zur){this._deltaR=0,this._deltaG=0,this._deltaB=0,this._fromR=0,this._fromG=0,void(this._fromB=0)!==C$zur&&this.initWithDuration(C$zut,C$zue,C$zui,C$zur)},initWithDuration:function(C$zut,C$zue,C$zui,C$zur){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut)&&(this._deltaR=C$zue,this._deltaG=C$zui,this._deltaB=C$zur,!0)},clone:function(){var C$zut=new cc.TintBy;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration,this._deltaR,this._deltaG,this._deltaB),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut);C$zut=C$zut.color;this._fromR=C$zut.r,this._fromG=C$zut.g,this._fromB=C$zut.b},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this.target.color=cc.color(this._fromR+this._deltaR*C$zut,this._fromG+this._deltaG*C$zut,this._fromB+this._deltaB*C$zut)},reverse:function(){var C$zut=new cc.TintBy(this._duration,-this._deltaR,-this._deltaG,-this._deltaB);return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut}}),cc.tintBy=function(C$zut,C$zue,C$zui,C$zur){return new cc.TintBy(C$zut,C$zue,C$zui,C$zur)},cc.DelayTime=cc.Class({name:"cc.DelayTime",extends:cc.ActionInterval,update:function(C$zut){},reverse:function(){var C$zut=new cc.DelayTime(this._duration);return this._cloneDecoration(C$zut),this._reverseEaseList(C$zut),C$zut},clone:function(){var C$zut=new cc.DelayTime;return this._cloneDecoration(C$zut),C$zut.initWithDuration(this._duration),C$zut}}),cc.delayTime=function(C$zut){return new cc.DelayTime(C$zut)},cc.ReverseTime=cc.Class({name:"cc.ReverseTime",extends:cc.ActionInterval,ctor:function(C$zut){this._other=null,C$zut&&this.initWithAction(C$zut)},initWithAction:function(C$zut){return C$zut?C$zut===this._other?(cc.errorID(1029),!1):!!cc.ActionInterval.prototype.initWithDuration.call(this,C$zut._duration)&&(this._other=C$zut,!0):(cc.errorID(1028),!1)},clone:function(){var C$zut=new cc.ReverseTime;return this._cloneDecoration(C$zut),C$zut.initWithAction(this._other.clone()),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._other.startWithTarget(C$zut)},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this._other&&this._other.update(1-C$zut)},reverse:function(){return this._other.clone()},stop:function(){this._other.stop(),cc.Action.prototype.stop.call(this)}}),cc.reverseTime=function(C$zut){return new cc.ReverseTime(C$zut)},cc.TargetedAction=cc.Class({name:"cc.TargetedAction",extends:cc.ActionInterval,ctor:function(C$zut,C$zue){this._action=null,this._forcedTarget=null,C$zue&&this.initWithTarget(C$zut,C$zue)},initWithTarget:function(C$zut,C$zue){return!!this.initWithDuration(C$zue._duration)&&(this._forcedTarget=C$zut,this._action=C$zue,!0)},clone:function(){var C$zut=new cc.TargetedAction;return this._cloneDecoration(C$zut),C$zut.initWithTarget(this._forcedTarget,this._action.clone()),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut),this._action.startWithTarget(this._forcedTarget)},stop:function(){this._action.stop()},update:function(C$zut){C$zut=this._computeEaseTime(C$zut),this._action.update(C$zut)},getForcedTarget:function(){return this._forcedTarget},setForcedTarget:function(C$zut){this._forcedTarget!==C$zut&&(this._forcedTarget=C$zut)}}),cc.targetedAction=function(C$zut,C$zue){return new cc.TargetedAction(C$zut,C$zue)}},{}],7:[function(C$zut,C$zue,C$zui){"use strict";C$zut("../core/platform/CCClass");var C$zur=C$zut("../core/platform/js");function C$zuOc(){this.actions=[],this.target=null,this.actionIndex=0,this.currentAction=null,this.paused=!1,this.lock=!1}cc.ActionManager=function(){this._hashTargets=C$zur.createMap(!0),this._arrayTargets=[],this._currentTarget=null,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},cc.ActionManager.prototype={constructor:cc.ActionManager,_elementPool:[],_searchElementByTarget:function(C$zut,C$zue){for(var C$zui=0;C$zui<C$zut.length;C$zui++)if(C$zue===C$zut[C$zui].target)return C$zut[C$zui];return null},_getElement:function(C$zut,C$zue){var C$zui=this._elementPool.pop();return(C$zui=C$zui||new C$zuOc).target=C$zut,C$zui.paused=!!C$zue,C$zui},_putElement:function(C$zut){C$zut.actions.length=0,C$zut.actionIndex=0,C$zut.currentAction=null,C$zut.paused=!1,C$zut.target=null,C$zut.lock=!1,this._elementPool.push(C$zut)},addAction:function(C$zut,C$zue,C$zui){var C$zur;C$zut&&C$zue?((C$zur=this._hashTargets[C$zue._id])?C$zur.actions||(C$zur.actions=[]):(C$zur=this._getElement(C$zue,C$zui),this._hashTargets[C$zue._id]=C$zur,this._arrayTargets.push(C$zur)),C$zur.actions.push(C$zut),C$zut.startWithTarget(C$zue)):cc.errorID(1e3)},removeAllActions:function(){var C$zut=this._arrayTargets;for(var C$zue=0;C$zue<C$zut.length;C$zue++){var C$zui=C$zut[C$zue];C$zui&&this._putElement(C$zui)}this._arrayTargets.length=0,this._hashTargets=C$zur.createMap(!0)},removeAllActionsFromTarget:function(C$zut,C$zue){null==C$zut||(C$zut=this._hashTargets[C$zut._id])&&(C$zut.actions.length=0,this._deleteHashElement(C$zut))},removeAction:function(C$zut){if(null!=C$zut){var C$zue=C$zut.getOriginalTarget();var C$zui=this._hashTargets[C$zue._id];if(C$zui){for(var C$zur=0;C$zur<C$zui.actions.length;C$zur++)if(C$zui.actions[C$zur]===C$zut){C$zui.actions.splice(C$zur,1),C$zui.actionIndex>=C$zur&&C$zui.actionIndex--;break}}else cc.logID(1001)}},_removeActionByTag:function(C$zut,C$zue,C$zui){for(var C$zur=0,C$zun=C$zue.actions.length;C$zur<C$zun;++C$zur){var C$zua=C$zue.actions[C$zur];if(C$zua&&C$zua.getTag()===C$zut&&(!C$zui||C$zua.getOriginalTarget()===C$zui)){this._removeActionAtIndex(C$zur,C$zue);break}}},removeActionByTag:function(C$zut,C$zue){C$zut===cc.Action.TAG_INVALID&&cc.logID(1002);var C$zui=this._hashTargets;if(C$zue){var C$zur=C$zui[C$zue._id];C$zur&&this._removeActionByTag(C$zut,C$zur,C$zue)}else for(var C$zun in C$zui){C$zun=C$zui[C$zun];this._removeActionByTag(C$zut,C$zun)}},getActionByTag:function(C$zut,C$zue){C$zut===cc.Action.TAG_INVALID&&cc.logID(1004);var C$zui=this._hashTargets[C$zue._id];if(C$zui){if(null!=C$zui.actions)for(var C$zur=0;C$zur<C$zui.actions.length;++C$zur){var C$zun=C$zui.actions[C$zur];if(C$zun&&C$zun.getTag()===C$zut)return C$zun}cc.logID(1005,C$zut)}return null},getNumberOfRunningActionsInTarget:function(C$zut){C$zut=this._hashTargets[C$zut._id];return C$zut&&C$zut.actions?C$zut.actions.length:0},pauseTarget:function(C$zut){C$zut=this._hashTargets[C$zut._id];C$zut&&(C$zut.paused=!0)},resumeTarget:function(C$zut){C$zut=this._hashTargets[C$zut._id];C$zut&&(C$zut.paused=!1)},pauseAllRunningActions:function(){var C$zut=[];var C$zue=this._arrayTargets;for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur&&!C$zur.paused&&(C$zur.paused=!0,C$zut.push(C$zur.target))}return C$zut},resumeTargets:function(C$zut){if(C$zut)for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue]&&this.resumeTarget(C$zut[C$zue])},pauseTargets:function(C$zut){if(C$zut)for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue]&&this.pauseTarget(C$zut[C$zue])},purgeSharedManager:function(){cc.director.getScheduler().unscheduleUpdate(this)},_removeActionAtIndex:function(C$zut,C$zue){C$zue.actions[C$zut];C$zue.actions.splice(C$zut,1),C$zue.actionIndex>=C$zut&&C$zue.actionIndex--,0===C$zue.actions.length&&this._deleteHashElement(C$zue)},_deleteHashElement:function(C$zut){var C$zue=!1;if(C$zut&&!C$zut.lock&&this._hashTargets[C$zut.target._id]){delete this._hashTargets[C$zut.target._id];var C$zui=this._arrayTargets;for(var C$zur=0,C$zun=C$zui.length;C$zur<C$zun;C$zur++)if(C$zui[C$zur]===C$zut){C$zui.splice(C$zur,1);break}this._putElement(C$zut),C$zue=!0}return C$zue},update:function(C$zut){var C$zue,C$zui=this._arrayTargets;for(var C$zur=0;C$zur<C$zui.length;C$zur++){if(this._currentTarget=C$zui[C$zur],!(C$zue=this._currentTarget).paused&&C$zue.actions){for(C$zue.lock=!0,C$zue.actionIndex=0;C$zue.actionIndex<C$zue.actions.length;C$zue.actionIndex++){var C$zun;C$zue.currentAction=C$zue.actions[C$zue.actionIndex],C$zue.currentAction&&(C$zue.currentAction.step(C$zut*(C$zue.currentAction._speedMethod?C$zue.currentAction._speed:1)),C$zue.currentAction&&C$zue.currentAction.isDone()&&(C$zue.currentAction.stop(),C$zun=C$zue.currentAction,C$zue.currentAction=null,this.removeAction(C$zun)),C$zue.currentAction=null)}C$zue.lock=!1}0===C$zue.actions.length&&this._deleteHashElement(C$zue)&&C$zur--}}}},{"../core/platform/CCClass":189,"../core/platform/js":209}],8:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCActionManager"),C$zut("./CCAction"),C$zut("./CCActionInterval"),C$zut("./CCActionInstant"),C$zut("./CCActionEase"),C$zut("./CCActionCatmullRom"),C$zut("./tween")},{"./CCAction":2,"./CCActionCatmullRom":3,"./CCActionEase":4,"./CCActionInstant":5,"./CCActionInterval":6,"./CCActionManager":7,"./tween":9}],9:[function(C$zus,C$zuc,C$zuh){"use strict";var C$zul=C$zus("../animation/bezier");var C$zuu=0;var C$zur=cc.Class({name:"cc.TweenAction",extends:cc.ActionInterval,ctor:function(C$zut,C$zue,C$zui){var C$zur;this._opts=C$zui=C$zui||Object.create(null),this._props=Object.create(null),C$zui.progress=C$zui.progress||this.progress,C$zui.easing&&"string"==typeof C$zui.easing&&(C$zur=C$zui.easing,C$zui.easing=cc.easing[C$zur],C$zui.easing||cc.warnID(1031,C$zur));var C$zun=this._opts.relative;for(var C$zua in C$zue){var C$zuo=C$zue[C$zua];var C$zus=void 0,C$zuc=void 0;var C$zul;void 0!==C$zuo.value&&(C$zuo.easing||C$zuo.progress)&&("string"==typeof C$zuo.easing?(C$zus=cc.easing[C$zuo.easing])||cc.warnID(1031,C$zuo.easing):C$zus=C$zuo.easing,C$zuc=C$zuo.progress,C$zuo=C$zuo.value),"number"==typeof C$zuo||C$zuo.lerp&&(!C$zun||C$zuo.add||C$zuo.mul)&&C$zuo.clone?((C$zul=Object.create(null)).value=C$zuo,C$zul.easing=C$zus,C$zul.progress=C$zuc,this._props[C$zua]=C$zul):cc.warn("Can not animate "+C$zua+" property, because it do not have [lerp, (add|mul), clone] function.")}this._originProps=C$zue,this.initWithDuration(C$zut)},clone:function(){var C$zut=new C$zur(this._duration,this._originProps,this._opts);return this._cloneDecoration(C$zut),C$zut},startWithTarget:function(C$zut){cc.ActionInterval.prototype.startWithTarget.call(this,C$zut);var C$zue=!!this._opts.relative;var C$zui=this._props;for(var C$zur in C$zui){var C$zun=C$zut[C$zur];C$zur=C$zui[C$zur];"number"==typeof C$zun?(C$zur.start=C$zun,C$zur.current=C$zun,C$zur.end=C$zue?C$zun+C$zur.value:C$zur.value):(C$zur.start=C$zun.clone(),C$zur.current=C$zun.clone(),C$zur.end=C$zue?(C$zun.add||C$zun.mul).call(C$zun,C$zur.value):C$zur.value)}},update:function(C$zut){var C$zue=this._opts;var C$zui=C$zut;C$zue.easing&&(C$zui=C$zue.easing(C$zut));var C$zur=this.target;if(C$zur){var C$zun=this._props;var C$zua=this._opts.progress;for(var C$zuo in C$zun){var C$zus=C$zun[C$zuo];var C$zuc=C$zus.easing?C$zus.easing(C$zut):C$zui;C$zus=C$zus.current=(C$zus.progress||C$zua)(C$zus.start,C$zus.end,C$zus.current,C$zuc);C$zur[C$zuo]=C$zus}}},progress:function(C$zut,C$zue,C$zui,C$zur){return"number"==typeof C$zut?C$zui=C$zut+(C$zue-C$zut)*C$zur:C$zut.lerp(C$zue,C$zur,C$zui),C$zui}});var C$zue=cc.Class({name:"cc.SetAction",extends:cc.ActionInstant,ctor:function(C$zut){this._props={},void 0!==C$zut&&this.init(C$zut)},init:function(C$zut){for(var C$zue in C$zut)this._props[C$zue]=C$zut[C$zue];return!0},update:function(){var C$zut=this._props;var C$zue=this.target;for(var C$zui in C$zut)C$zue[C$zui]=C$zut[C$zui]},clone:function(){var C$zut=new C$zue;return C$zut.init(this._props),C$zut}});function Tween(C$zut){this._actions=[],this._finalAction=null,this._target=C$zut,this._tag=cc.Action.TAG_INVALID}Tween.stopAll=function(){cc.director.getActionManager().removeAllActions()},Tween.stopAllByTag=function(C$zut){cc.director.getActionManager().removeActionByTag(C$zut)},Tween.stopAllByTarget=function(C$zut){cc.director.getActionManager().removeAllActionsFromTarget(C$zut)},Tween.prototype.then=function(C$zut){return C$zut instanceof cc.Action?this._actions.push(C$zut.clone()):this._actions.push(C$zut._union()),this},Tween.prototype.target=function(C$zut){return this._target=C$zut,this},Tween.prototype.start=function(){var C$zut=this._target;return C$zut?C$zut instanceof cc.Object&&!C$zut.isValid?void 0:(this._finalAction&&cc.director.getActionManager().removeAction(this._finalAction),this._finalAction=this._union(),void 0===C$zut._id&&(C$zut._id=++C$zuu),this._finalAction.setTag(this._tag),cc.director.getActionManager().addAction(this._finalAction,C$zut,!1),this):(cc.warn("Please set target to tween first"),this)},Tween.prototype.stop=function(){return this._finalAction&&cc.director.getActionManager().removeAction(this._finalAction),this},Tween.prototype.tag=function(C$zut){return this._tag=C$zut,this},Tween.prototype.clone=function(C$zut){var C$zue=this._union();return cc.tween(C$zut).then(C$zue.clone())},Tween.prototype.union=function(){var C$zut=this._union();return this._actions.length=0,this._actions.push(C$zut),this},Tween.prototype._union=function(){var C$zut=this._actions;return C$zut=1===C$zut.length?C$zut[0]:cc.sequence(C$zut)},Object.assign(Tween.prototype,{bezierTo:function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zue.x,C$zuo=C$zue.y,C$zus=C$zui.x,C$zuc=C$zui.y;return(C$zun=C$zun||Object.create(null)).progress=function(C$zut,C$zue,C$zui,C$zur){return C$zui.x=(0,C$zul.bezier)(C$zut.x,C$zua,C$zus,C$zue.x,C$zur),C$zui.y=(0,C$zul.bezier)(C$zut.y,C$zuo,C$zuc,C$zue.y,C$zur),C$zui},this.to(C$zut,{position:C$zur},C$zun)},bezierBy:function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zue.x,C$zuo=C$zue.y,C$zus=C$zui.x,C$zuc=C$zui.y;return(C$zun=C$zun||Object.create(null)).progress=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zut.x,C$zut=C$zut.y;return C$zui.x=(0,C$zul.bezier)(C$zun,C$zua+C$zun,C$zus+C$zun,C$zue.x,C$zur),C$zui.y=(0,C$zul.bezier)(C$zut,C$zuo+C$zut,C$zuc+C$zut,C$zue.y,C$zur),C$zui},this.by(C$zut,{position:C$zur},C$zun)},flipX:function(){var C$zut=this;return this.call(function(){C$zut._target.scaleX*=-1},this)},flipY:function(){var C$zut=this;return this.call(function(){C$zut._target.scaleY*=-1},this)},blink:function(C$zut,C$zue,C$zui){var C$zun=1/C$zue;return(C$zui=C$zui||Object.create(null)).progress=function(C$zut,C$zue,C$zui,C$zur){return 1<=C$zur?C$zut:C$zun/2<C$zur%C$zun?255:0},this.to(C$zut,{opacity:1},C$zui)}});var C$zun=[];function wrapAction(C$zur){return function(){C$zun.length=0;for(var C$zut=arguments.length,C$zue=0;C$zue<C$zut;C$zue++){var C$zui=C$zun[C$zue]=arguments[C$zue];C$zui instanceof Tween&&(C$zun[C$zue]=C$zui._union())}return C$zur.apply(this,C$zun)}}var C$zui={to:function(C$zut,C$zue,C$zui){return(C$zui=C$zui||Object.create(null)).relative=!1,new C$zur(C$zut,C$zue,C$zui)},by:function(C$zut,C$zue,C$zui){return(C$zui=C$zui||Object.create(null)).relative=!0,new C$zur(C$zut,C$zue,C$zui)},set:function(C$zut){return new C$zue(C$zut)},delay:cc.delayTime,call:cc.callFunc,hide:cc.hide,show:cc.show,removeSelf:cc.removeSelf,sequence:wrapAction(cc.sequence),parallel:wrapAction(cc.spawn)};var C$zu_={repeat:cc.repeat,repeatForever:function(C$zut){return cc.repeat(C$zut,1e9)},reverseTime:cc.reverseTime};var C$zuo=Object.keys(C$zui);for(var C$zut=0;C$zut<C$zuo.length;C$zut++)!function(C$zut){var C$zue=C$zuo[C$zut];Tween.prototype[C$zue]=function(){var C$zut=C$zui[C$zue].apply(this,arguments);return this._actions.push(C$zut),this}}(C$zut);C$zuo=Object.keys(C$zu_);for(var C$zua=0;C$zua<C$zuo.length;C$zua++)!function(C$zut){var C$zua=C$zuo[C$zut];Tween.prototype[C$zua]=function(){var C$zut=this._actions;var C$zue=arguments[arguments.length-1];var C$zui=arguments.length-1;C$zue instanceof cc.Tween?C$zue=C$zue._union():C$zue instanceof cc.Action||(C$zue=C$zut[C$zut.length-1],--C$zut.length,C$zui+=1);var C$zur=[C$zue];for(var C$zun=0;C$zun<C$zui;C$zun++)C$zur.push(arguments[C$zun]);return C$zue=C$zu_[C$zua].apply(this,C$zur),C$zut.push(C$zue),this}}(C$zua);cc.tween=function(C$zut){return new Tween(C$zut)},cc.Tween=Tween},{"../animation/bezier":15}],10:[function(C$zut,C$zue,C$zua){"use strict";var C$zui=cc.js;var C$zur=C$zut("./playable");var C$zun=C$zut("./animation-curves"),C$zu_=C$zun.EventAnimCurve,C$zud=C$zun.EventInfo;var C$zuf=C$zut("./types").WrapModeMask;var C$zup=C$zut("../core/utils/binary-search").binarySearchEpsilon;function AnimationAnimator(C$zut,C$zue){C$zur.call(this),this.target=C$zut,this.animation=C$zue,this._anims=new C$zui.array.MutableForwardIterator([])}C$zui.extend(AnimationAnimator,C$zur);C$zun=AnimationAnimator.prototype;function initClipData(C$zut,C$zue){var C$zui=C$zue.clip;C$zue.duration=C$zui.duration,C$zue.speed=C$zui.speed,C$zue.wrapMode=C$zui.wrapMode,C$zue.frameRate=C$zui.sample,(C$zue.wrapMode&C$zuf.Loop)===C$zuf.Loop?C$zue.repeatCount=1/0:C$zue.repeatCount=1;var C$zuh=C$zue.curves=C$zui.createCurves(C$zue,C$zut);var C$zur=C$zui.events;var C$zun;if(C$zur)for(var C$zua=0,C$zuu=C$zur.length;C$zua<C$zuu;C$zua++){C$zun||((C$zun=new C$zu_).target=C$zut,C$zuh.push(C$zun));var C$zuo=C$zur[C$zua];var C$zus=C$zuo.frame/C$zue.duration;var C$zuc=void 0;var C$zul=C$zup(C$zun.ratios,C$zus);0<=C$zul?C$zuc=C$zun.events[C$zul]:(C$zuc=new C$zud,C$zun.ratios.push(C$zus),C$zun.events.push(C$zuc)),C$zuc.add(C$zuo.func,C$zuo.params)}}C$zun.playState=function(C$zut,C$zue){C$zut.clip&&(C$zut.curveLoaded||initClipData(this.target,C$zut),C$zut.animator=this,C$zut.play(),"number"==typeof C$zue&&C$zut.setTime(C$zue),this.play())},C$zun.stopStatesExcept=function(C$zut){var C$zue=this._anims;var C$zui=C$zue.array;for(C$zue.i=0;C$zue.i<C$zui.length;++C$zue.i){var C$zur=C$zui[C$zue.i];C$zur!==C$zut&&this.stopState(C$zur)}},C$zun.addAnimation=function(C$zut){-1===this._anims.array.indexOf(C$zut)&&this._anims.push(C$zut),C$zut._setEventTarget(this.animation)},C$zun.removeAnimation=function(C$zut){var C$zue=this._anims.array.indexOf(C$zut);0<=C$zue?(this._anims.fastRemoveAt(C$zue),0===this._anims.array.length&&this.stop()):cc.errorID(3907),C$zut.animator=null},C$zun.sample=function(){var C$zut=this._anims;var C$zue=C$zut.array;for(C$zut.i=0;C$zut.i<C$zue.length;++C$zut.i)C$zue[C$zut.i].sample()},C$zun.stopState=function(C$zut){C$zut&&C$zut.stop()},C$zun.pauseState=function(C$zut){C$zut&&C$zut.pause()},C$zun.resumeState=function(C$zut){C$zut&&C$zut.resume(),this.isPaused&&this.resume()},C$zun.setStateTime=function(C$zut,C$zue){if(void 0!==C$zue)C$zut&&(C$zut.setTime(C$zue),C$zut.sample());else{C$zue=C$zut;var C$zui=this._anims.array;for(var C$zur=0;C$zur<C$zui.length;++C$zur){var C$zun=C$zui[C$zur];C$zun.setTime(C$zue),C$zun.sample()}}},C$zun.onStop=function(){var C$zut=this._anims;var C$zue=C$zut.array;for(C$zut.i=0;C$zut.i<C$zue.length;++C$zut.i)C$zue[C$zut.i].stop()},C$zun.onPause=function(){var C$zut=this._anims.array;for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];C$zui.pause(),C$zui.animator=null}},C$zun.onResume=function(){var C$zut=this._anims.array;for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];C$zui.animator=this,C$zui.resume()}},C$zun._reloadClip=function(C$zut){initClipData(this.target,C$zut)},C$zue.exports=AnimationAnimator},{"../core/utils/binary-search":256,"./animation-curves":12,"./playable":19,"./types":20}],11:[function(C$zut,C$zue,C$zun){"use strict";var C$zui=C$zut("./types").WrapMode;var C$zur=C$zut("./animation-curves"),C$zum=C$zur.DynamicAnimCurve,C$zuv=C$zur.quickFindIndex;var C$zuy=C$zut("./motion-path-helper").sampleMotionPaths;var C$zug=C$zut("../core/utils/binary-search").binarySearchEpsilon;var C$zus=cc.Class({name:"cc.AnimationClip",extends:cc.Asset,properties:{_duration:{default:0,type:cc.Float},duration:{get:function(){return this._duration}},sample:{default:60},speed:{default:1},wrapMode:{default:C$zui.Normal},curveData:{default:{},visible:!1},events:{default:[],visible:!1}},statics:{createWithSpriteFrames:function(C$zut,C$zue){if(!Array.isArray(C$zut))return cc.errorID(3905),null;var C$zui=new C$zus;C$zui.sample=C$zue||C$zui.sample,C$zui._duration=C$zut.length/C$zui.sample;var C$zur=[];var C$zun=1/C$zui.sample;for(var C$zua=0,C$zuo=C$zut.length;C$zua<C$zuo;C$zua++)C$zur[C$zua]={frame:C$zua*C$zun,value:C$zut[C$zua]};return C$zui.curveData={comps:{"cc.Sprite":{spriteFrame:C$zur}}},C$zui}},onLoad:function(){this._duration=Number.parseFloat(this.duration),this.speed=Number.parseFloat(this.speed),this.wrapMode=Number.parseInt(this.wrapMode),this.frameRate=Number.parseFloat(this.sample)},createPropCurve:function(C$zut,C$zue,C$zui){var C$zuh=[];var C$zuu=C$zut instanceof cc.Node&&"position"===C$zue;var C$zur=new C$zum;C$zur.target=C$zut,C$zur.prop=C$zue;for(var C$zun=0,C$zu_=C$zui.length;C$zun<C$zu_;C$zun++){var C$zua=C$zui[C$zun];var C$zuo=C$zua.frame/this.duration;C$zur.ratios.push(C$zuo),C$zuu&&C$zuh.push(C$zua.motionPath);C$zuo=C$zua.value;C$zur.values.push(C$zuo);C$zuo=C$zua.curve;if(C$zuo){if("string"==typeof C$zuo){C$zur.types.push(C$zuo);continue}if(Array.isArray(C$zuo)){C$zuo[0]===C$zuo[1]&&C$zuo[2]===C$zuo[3]?C$zur.types.push(C$zum.Linear):C$zur.types.push(C$zum.Bezier(C$zuo));continue}}C$zur.types.push(C$zum.Linear)}C$zuu&&C$zuy(C$zuh,C$zur,this.duration,this.sample,C$zut);var C$zus=C$zur.ratios;var C$zuc,C$zud;var C$zuf=!0;for(var C$zul=1,C$zup=C$zus.length;C$zul<C$zup;C$zul++)if(C$zuc=C$zus[C$zul]-C$zus[C$zul-1],1===C$zul)C$zud=C$zuc;else if(1e-6<Math.abs(C$zuc-C$zud)){C$zuf=!1;break}C$zur._findFrameIndex=C$zuf?C$zuv:C$zug;C$zue=C$zur.values[0];return null==C$zue||C$zur._lerp||("number"==typeof C$zue?C$zur._lerp=C$zum.prototype._lerpNumber:C$zue instanceof cc.Quat?C$zur._lerp=C$zum.prototype._lerpQuat:C$zue instanceof cc.Vec2||C$zue instanceof cc.Vec3?C$zur._lerp=C$zum.prototype._lerpVector:C$zue.lerp&&(C$zur._lerp=C$zum.prototype._lerpObject)),C$zur},createTargetCurves:function(C$zut,C$zue,C$zui){var C$zur=C$zue.props;var C$zun=C$zue.comps;if(C$zur)for(var C$zua in C$zur){var C$zuh=C$zur[C$zua];C$zua=this.createPropCurve(C$zut,C$zua,C$zuh);C$zui.push(C$zua)}if(C$zun)for(var C$zuo in C$zun){var C$zus=C$zut.getComponent(C$zuo);if(C$zus){var C$zuc=C$zun[C$zuo];for(var C$zul in C$zuc){var C$zuu=C$zuc[C$zul];C$zul=this.createPropCurve(C$zus,C$zul,C$zuu);C$zui.push(C$zul)}}}},createCurves:function(C$zut,C$zue){var C$zui=this.curveData;var C$zur=C$zui.paths;var C$zun=[];for(var C$zua in this.createTargetCurves(C$zue,C$zui,C$zun),C$zur){var C$zuo=cc.find(C$zua,C$zue);C$zuo&&(C$zua=C$zur[C$zua],this.createTargetCurves(C$zuo,C$zua,C$zun))}return C$zun}});cc.AnimationClip=C$zue.exports=C$zus},{"../core/utils/binary-search":256,"./animation-curves":12,"./motion-path-helper":18,"./types":20}],12:[function(C$zut,C$zue,C$zua){"use strict";var C$zuo=C$zut("./bezier").bezierByTime;var C$zu_=C$zut("../core/utils/binary-search").binarySearchEpsilon;var C$zud=C$zut("./types").WrapModeMask;var C$zuf=C$zut("./types").WrappedInfo;function computeRatioByType(C$zut,C$zue){var C$zui;return"string"==typeof C$zue?(C$zui=cc.easing[C$zue])?C$zut=C$zui(C$zut):cc.errorID(3906,C$zue):Array.isArray(C$zue)&&(C$zut=C$zuo(C$zue,C$zut)),C$zut}C$zut=cc.Class({name:"cc.AnimCurve",sample:function(C$zut,C$zue,C$zui){},onTimeChangedManually:void 0});var C$zui=cc.Class({name:"cc.DynamicAnimCurve",extends:C$zut,ctor:function(){this._cachedIndex=0},properties:{target:null,prop:"",values:[],ratios:[],types:[]},_findFrameIndex:C$zu_,_lerp:void 0,_lerpNumber:function(C$zut,C$zue,C$zui){return C$zut+(C$zue-C$zut)*C$zui},_lerpObject:function(C$zut,C$zue,C$zui){return C$zut.lerp(C$zue,C$zui)},_lerpQuat:(C$zun=cc.quat(),function(C$zut,C$zue,C$zui){return C$zut.lerp(C$zue,C$zui,C$zun)}),_lerpVector:(C$zur=cc.v3(),function(C$zut,C$zue,C$zui){return C$zut.lerp(C$zue,C$zui,C$zur)}),sample:function(C$zut,C$zue,C$zui){var C$zur=this.values;var C$zun=this.ratios;var C$zua=C$zun.length;var C$zuo,C$zus,C$zuc;0!==C$zua&&(C$zuc=!0,(C$zus=this._cachedIndex)<0&&0<(C$zus=~C$zus)&&C$zus<C$zun.length&&(C$zuo=C$zun[C$zus-1],C$zus=C$zun[C$zus],C$zuo<C$zue&&C$zue<C$zus&&(C$zuc=!1)),C$zuc&&(this._cachedIndex=this._findFrameIndex(C$zun,C$zue)),C$zuc=(C$zuo=this._cachedIndex)<0?(C$zuo=~C$zuo)<=0?C$zur[0]:C$zua<=C$zuo?C$zur[C$zua-1]:(C$zus=C$zur[C$zuo-1],this._lerp?(C$zua=(C$zue-(C$zuc=C$zun[C$zuo-1]))/(C$zun[C$zuo]-C$zuc),(C$zue=this.types[C$zuo-1])&&(C$zua=computeRatioByType(C$zua,C$zue)),C$zun=C$zur[C$zuo],this._lerp(C$zus,C$zun,C$zua)):C$zus):C$zur[C$zuo],this.target[this.prop]=C$zuc)}});var C$zur;var C$zun;C$zui.Linear=null,C$zui.Bezier=function(C$zut){return C$zut};function C$zuqE(){this.events=[]}C$zuqE.prototype.add=function(C$zut,C$zue){this.events.push({func:C$zut||"",params:C$zue||[]})};var C$zus=cc.Class({name:"cc.EventAnimCurve",extends:C$zut,properties:{target:null,ratios:[],events:[],_wrappedInfo:{default:function(){return new C$zuf}},_lastWrappedInfo:null,_ignoreIndex:NaN},_wrapIterations:function(C$zut){return C$zut-(0|C$zut)==0&&--C$zut,0|C$zut},sample:function(C$zuh,C$zuu,C$zut){var C$zue=this.ratios.length;var C$zui=C$zut.getWrappedInfo(C$zut.time,this._wrappedInfo);var C$zur=C$zui.direction;var C$zun=C$zu_(this.ratios,C$zui.ratio);if(C$zun<0&&(C$zun=~C$zun-1,C$zur<0&&(C$zun+=1)),this._ignoreIndex!==C$zun&&(this._ignoreIndex=NaN),C$zui.frameIndex=C$zun,!this._lastWrappedInfo)return this._fireEvent(C$zun),void(this._lastWrappedInfo=new C$zuf(C$zui));var C$zua=C$zut.wrapMode;var C$zuo=this._wrapIterations(C$zui.iterations);C$zut=this._lastWrappedInfo;var C$zus=this._wrapIterations(C$zut.iterations);var C$zuc=C$zut.frameIndex;C$zut=C$zut.direction;var C$zul=-1!==C$zus&&C$zuo!==C$zus;if(C$zuc===C$zun&&C$zul&&1===C$zue)this._fireEvent(0);else if(C$zuc!==C$zun||C$zul){C$zur=C$zut;do{if(C$zuc!==C$zun){if(-1===C$zur&&0===C$zuc&&0<C$zun?((C$zua&C$zud.PingPong)===C$zud.PingPong?C$zur*=-1:C$zuc=C$zue,C$zus++):1===C$zur&&C$zuc===C$zue-1&&C$zun<C$zue-1&&((C$zua&C$zud.PingPong)===C$zud.PingPong?C$zur*=-1:C$zuc=-1,C$zus++),C$zuc===C$zun)break;if(C$zuo<C$zus)break}}while(C$zuc+=C$zur,cc.director.getAnimationManager().pushDelayEvent(this,"_fireEvent",[C$zuc]),C$zuc!==C$zun&&-1<C$zuc&&C$zuc<C$zue)}this._lastWrappedInfo.set(C$zui)},_fireEvent:function(C$zut){if(!(C$zut<0||C$zut>=this.events.length||this._ignoreIndex===C$zut)){var C$zue=this.events[C$zut].events;if(this.target.isValid){var C$zui=this.target._components;for(var C$zur=0;C$zur<C$zue.length;C$zur++){var C$zun=C$zue[C$zur];var C$zua=C$zun.func;for(var C$zuo=0;C$zuo<C$zui.length;C$zuo++){var C$zus=C$zui[C$zuo];var C$zuc=C$zus[C$zua];C$zuc&&C$zuc.apply(C$zus,C$zun.params)}}}}},onTimeChangedManually:function(C$zut,C$zue){this._lastWrappedInfo=null,this._ignoreIndex=NaN;C$zue=C$zue.getWrappedInfo(C$zut,this._wrappedInfo);C$zut=C$zue.direction;C$zue=C$zu_(this.ratios,C$zue.ratio);C$zue<0&&(C$zue=~C$zue-1,C$zut<0&&(C$zue+=1),this._ignoreIndex=C$zue)}});C$zue.exports={AnimCurve:C$zut,DynamicAnimCurve:C$zui,EventAnimCurve:C$zus,EventInfo:C$zuqE,computeRatioByType:computeRatioByType,quickFindIndex:function(C$zut,C$zue){var C$zui=C$zut.length-1;if(0==C$zui)return 0;var C$zur=C$zut[0];if(C$zue<C$zur)return 0;var C$zun=C$zut[C$zui];return C$zun<C$zue?~C$zut.length:(C$zut=(C$zue=(C$zue-C$zur)/(C$zun-C$zur))/(1/C$zui))-(C$zun=0|C$zut)<1e-6?C$zun:1+C$zun-C$zut<1e-6?1+C$zun:~(1+C$zun)}}},{"../core/utils/binary-search":256,"./bezier":15,"./types":20}],13:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.js;var C$zun=cc.Class({ctor:function(){this._anims=new C$zur.array.MutableForwardIterator([]),this._delayEvents=[],cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},update:function(C$zut){var C$zue=this._anims;var C$zui=C$zue.array;for(C$zue.i=0;C$zue.i<C$zui.length;++C$zue.i){var C$zur=C$zui[C$zue.i];C$zur._isPlaying&&!C$zur._isPaused&&C$zur.update(C$zut)}var C$zun=this._delayEvents;for(var C$zua=0;C$zua<C$zun.length;C$zua++){var C$zuo=C$zun[C$zua];C$zuo.target[C$zuo.func].apply(C$zuo.target,C$zuo.args)}C$zun.length=0},destruct:function(){},addAnimation:function(C$zut){-1===this._anims.array.indexOf(C$zut)&&this._anims.push(C$zut)},removeAnimation:function(C$zut){C$zut=this._anims.array.indexOf(C$zut);0<=C$zut?this._anims.fastRemoveAt(C$zut):cc.errorID(3907)},pushDelayEvent:function(C$zut,C$zue,C$zui){this._delayEvents.push({target:C$zut,func:C$zue,args:C$zui})}});cc.AnimationManager=C$zue.exports=C$zun},{}],14:[function(C$zut,C$zue,C$zua){"use strict";var C$zui=cc.js;var C$zur=C$zut("./playable");C$zut=C$zut("./types");var C$zuc=C$zut.WrappedInfo;var C$zun=C$zut.WrapMode;var C$zul=C$zut.WrapModeMask;function AnimationState(C$zut,C$zue){C$zur.call(this),this._currentFramePlayed=!1,this._delay=0,this._delayTime=0,this._wrappedInfo=new C$zuc,this._lastWrappedInfo=null,this._process=process,this._clip=C$zut,this._name=C$zue||C$zut&&C$zut.name,this.animator=null,this.curves=[],this.delay=0,this.repeatCount=1,this.duration=1,this.speed=1,this.wrapMode=C$zun.Normal,this.time=0,this._target=null,this._lastframeEventOn=!1,this.emit=function(){var C$zut=new Array(arguments.length);for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)C$zut[C$zue]=arguments[C$zue];cc.director.getAnimationManager().pushDelayEvent(this,"_emit",C$zut)}}C$zui.extend(AnimationState,C$zur);C$zut=AnimationState.prototype;function process(){var C$zut=this.sample();var C$zue;this._lastframeEventOn&&(C$zue=this._lastWrappedInfo||(this._lastWrappedInfo=new C$zuc(C$zut)),1<this.repeatCount&&(0|C$zut.iterations)>(0|C$zue.iterations)&&this.emit("lastframe",this),C$zue.set(C$zut)),C$zut.stopped&&(this.stop(),this.emit("finished",this))}function simpleProcess(){var C$zut=this.time;var C$zue=this.duration;C$zue<C$zut?0===(C$zut%=C$zue)&&(C$zut=C$zue):C$zut<0&&0!==(C$zut%=C$zue)&&(C$zut+=C$zue);var C$zui=C$zut/C$zue;var C$zur=this.curves;for(var C$zun=0,C$zua=C$zur.length;C$zun<C$zua;C$zun++)C$zur[C$zun].sample(C$zut,C$zui,this);this._lastframeEventOn&&(void 0===this._lastIterations&&(this._lastIterations=C$zui),(0<this.time&&this._lastIterations>C$zui||this.time<0&&this._lastIterations<C$zui)&&this.emit("lastframe",this),this._lastIterations=C$zui)}C$zut._emit=function(C$zut,C$zue){this._target&&this._target.isValid&&this._target.emit(C$zut,C$zut,C$zue)},C$zut.on=function(C$zut,C$zue,C$zui){return this._target&&this._target.isValid?("lastframe"===C$zut&&(this._lastframeEventOn=!0),this._target.on(C$zut,C$zue,C$zui)):null},C$zut.once=function(C$zut,C$zue,C$zui){var C$zur;return this._target&&this._target.isValid?("lastframe"===C$zut&&(this._lastframeEventOn=!0),(C$zur=this)._target.once(C$zut,function(C$zut){C$zue.call(C$zui,C$zut),C$zur._lastframeEventOn=!1})):null},C$zut.off=function(C$zut,C$zue,C$zui){this._target&&this._target.isValid&&("lastframe"===C$zut&&(this._target.hasEventListener(C$zut)||(this._lastframeEventOn=!1)),this._target.off(C$zut,C$zue,C$zui))},C$zut._setEventTarget=function(C$zut){this._target=C$zut},C$zut.onPlay=function(){this.setTime(0),this._delayTime=this._delay,cc.director.getAnimationManager().addAnimation(this),this.animator&&this.animator.addAnimation(this),this.emit("play",this)},C$zut.onStop=function(){this.isPaused||cc.director.getAnimationManager().removeAnimation(this),this.animator&&this.animator.removeAnimation(this),this.emit("stop",this)},C$zut.onResume=function(){cc.director.getAnimationManager().addAnimation(this),this.emit("resume",this)},C$zut.onPause=function(){cc.director.getAnimationManager().removeAnimation(this),this.emit("pause",this)},C$zut.setTime=function(C$zut){this._currentFramePlayed=!1,this.time=C$zut||0;var C$zue=this.curves;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];C$zun.onTimeChangedManually&&C$zun.onTimeChangedManually(C$zut,this)}},C$zut.update=function(C$zut){0<this._delayTime&&(this._delayTime-=C$zut,0<this._delayTime)||(this._currentFramePlayed?this.time+=C$zut*this.speed:this._currentFramePlayed=!0,this._process())},C$zut._needRevers=function(C$zut){var C$zue=this.wrapMode;var C$zui=!1;return(C$zue&C$zul.PingPong)===C$zul.PingPong&&(C$zut-(0|C$zut)==0&&0<C$zut&&--C$zut,1&C$zut&&(C$zui=!C$zui)),C$zui=(C$zue&C$zul.Reverse)===C$zul.Reverse?!C$zui:C$zui},C$zut.getWrappedInfo=function(C$zut,C$zue){C$zue=C$zue||new C$zuc;var C$zui=!1;var C$zur=this.duration;var C$zun=this.repeatCount;var C$zua=0<C$zut?C$zut/C$zur:-C$zut/C$zur;C$zun<=C$zua&&(C$zui=!0,C$zut=(C$zun=0===(C$zun=(C$zua=C$zun)-(0|C$zun))?1:C$zun)*C$zur*(0<C$zut?1:-1)),C$zur<C$zut?C$zut=0==(C$zun=C$zut%C$zur)?C$zur:C$zun:C$zut<0&&0!==(C$zut%=C$zur)&&(C$zut+=C$zur);C$zun=!1;var C$zuo=this._wrapMode&C$zul.ShouldWrap;var C$zus=(C$zun=C$zuo?this._needRevers(C$zua):C$zun)?-1:1;return this.speed<0&&(C$zus*=-1),C$zue.ratio=(C$zut=C$zuo&&C$zun?C$zur-C$zut:C$zut)/C$zur,C$zue.time=C$zut,C$zue.direction=C$zus,C$zue.stopped=C$zui,C$zue.iterations=C$zua,C$zue},C$zut.sample=function(){var C$zut=this.getWrappedInfo(this.time,this._wrappedInfo);var C$zue=this.curves;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)C$zue[C$zui].sample(C$zut.time,C$zut.ratio,this);return C$zut},C$zui.get(C$zut,"clip",function(){return this._clip}),C$zui.get(C$zut,"name",function(){return this._name}),C$zui.obsolete(C$zut,"AnimationState.length","duration"),C$zui.getset(C$zut,"curveLoaded",function(){return 0<this.curves.length},function(){this.curves.length=0}),C$zui.getset(C$zut,"wrapMode",function(){return this._wrapMode},function(C$zut){this._wrapMode=C$zut,this.time=0,C$zut&C$zul.Loop?this.repeatCount=1/0:this.repeatCount=1}),C$zui.getset(C$zut,"repeatCount",function(){return this._repeatCount},function(C$zut){this._repeatCount=C$zut;var C$zue=this._wrapMode&C$zul.ShouldWrap;var C$zui=(this.wrapMode&C$zul.Reverse)===C$zul.Reverse;this._process=1/0!==C$zut||C$zue||C$zui?process:simpleProcess}),C$zui.getset(C$zut,"delay",function(){return this._delay},function(C$zut){this._delayTime=this._delay=C$zut}),cc.AnimationState=C$zue.exports=AnimationState},{"./playable":19,"./types":20}],15:[function(C$zut,C$zue,C$zui){"use strict";var C$zuu=Math.cos,C$zu_=Math.acos,C$zud=Math.max,C$zuf=2*Math.PI,C$zup=Math.sqrt;function crt(C$zut){return C$zut<0?-Math.pow(-C$zut,1/3):Math.pow(C$zut,1/3)}C$zue.exports={bezier:function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=1-C$zun;return C$zua*(C$zua*(C$zut+(3*C$zue-C$zut)*C$zun)+3*C$zui*C$zun*C$zun)+C$zur*C$zun*C$zun*C$zun},bezierByTime:function(C$zut,C$zue){var C$zui,C$zur,C$zun,C$zua,C$zuo,C$zuh,C$zus,C$zuc,C$zul;return C$zur=+(C$zue=C$zue),C$zun=C$zue-(C$zui=C$zut)[0],C$zua=3*C$zur,C$zuo=3*C$zun,C$zui=3*(C$zue-C$zui[2]),C$zui=1/3*(C$zun=(C$zua-6*C$zun+C$zui)*(C$zue=1/(C$zuo-C$zur-C$zui+(C$zue-1)))),C$zul=1/3*(C$zua=1/3*(3*(C$zuo=(C$zuo-C$zua)*C$zue)-C$zun*C$zun)),C$zun=(C$zur=(C$zuo=(C$zun=(2*C$zun*C$zun*C$zun-9*C$zun*C$zuo+27*(C$zur*C$zue))/27)/2)*C$zuo+C$zul*C$zul*C$zul)<0?(C$zul=C$zup((C$zue=1/3*-C$zua)*C$zue*C$zue),C$zue=C$zu_((C$zua=-C$zun/(2*C$zul))<-1?-1:1<C$zua?1:C$zua),C$zus=(C$zun=2*crt(C$zul))*C$zuu(C$zue*(1/3))-C$zui,C$zuc=C$zun*C$zuu((C$zue+C$zuf)*(1/3))-C$zui,C$zua=C$zun*C$zuu((C$zue+2*C$zuf)*(1/3))-C$zui,0<=C$zus&&C$zus<=1?0<=C$zuc&&C$zuc<=1?0<=C$zua&&C$zua<=1?C$zud(C$zus,C$zuc,C$zua):C$zud(C$zus,C$zuc):0<=C$zua&&C$zua<=1?C$zud(C$zus,C$zua):C$zus:0<=C$zuc&&C$zuc<=1?0<=C$zua&&C$zua<=1?C$zud(C$zuc,C$zua):C$zuc:C$zua):0==C$zur?(C$zuc=-(C$zuh=C$zuo<0?crt(-C$zuo):-crt(C$zuo))-C$zui,0<=(C$zus=2*C$zuh-C$zui)&&C$zus<=1?0<=C$zuc&&C$zuc<=1?C$zud(C$zus,C$zuc):C$zus:C$zuc):(C$zul=C$zup(C$zur),C$zus=(C$zuh=crt(-C$zuo+C$zul))-crt(C$zuo+C$zul)-C$zui),C$zue=C$zut[1],((1-C$zun)*(C$zue+(C$zut[3]-C$zue)*C$zun)*3+C$zun*C$zun)*C$zun}}},{}],16:[function(C$zut,C$zue,C$zui){"use strict";var C$zur={constant:function(){return 0},linear:function(C$zut){return C$zut},quadIn:function(C$zut){return C$zut*C$zut},quadOut:function(C$zut){return C$zut*(2-C$zut)},quadInOut:function(C$zut){return(C$zut*=2)<1?.5*C$zut*C$zut:-.5*(--C$zut*(C$zut-2)-1)},cubicIn:function(C$zut){return C$zut*C$zut*C$zut},cubicOut:function(C$zut){return--C$zut*C$zut*C$zut+1},cubicInOut:function(C$zut){return(C$zut*=2)<1?.5*C$zut*C$zut*C$zut:.5*((C$zut-=2)*C$zut*C$zut+2)},quartIn:function(C$zut){return C$zut*C$zut*C$zut*C$zut},quartOut:function(C$zut){return 1- --C$zut*C$zut*C$zut*C$zut},quartInOut:function(C$zut){return(C$zut*=2)<1?.5*C$zut*C$zut*C$zut*C$zut:-.5*((C$zut-=2)*C$zut*C$zut*C$zut-2)},quintIn:function(C$zut){return C$zut*C$zut*C$zut*C$zut*C$zut},quintOut:function(C$zut){return--C$zut*C$zut*C$zut*C$zut*C$zut+1},quintInOut:function(C$zut){return(C$zut*=2)<1?.5*C$zut*C$zut*C$zut*C$zut*C$zut:.5*((C$zut-=2)*C$zut*C$zut*C$zut*C$zut+2)},sineIn:function(C$zut){return 1-Math.cos(C$zut*Math.PI/2)},sineOut:function(C$zut){return Math.sin(C$zut*Math.PI/2)},sineInOut:function(C$zut){return.5*(1-Math.cos(Math.PI*C$zut))},expoIn:function(C$zut){return 0===C$zut?0:Math.pow(1024,C$zut-1)},expoOut:function(C$zut){return 1===C$zut?1:1-Math.pow(2,-10*C$zut)},expoInOut:function(C$zut){return 0===C$zut?0:1===C$zut?1:(C$zut*=2)<1?.5*Math.pow(1024,C$zut-1):.5*(2-Math.pow(2,-10*(C$zut-1)))},circIn:function(C$zut){return 1-Math.sqrt(1-C$zut*C$zut)},circOut:function(C$zut){return Math.sqrt(1- --C$zut*C$zut)},circInOut:function(C$zut){return(C$zut*=2)<1?-.5*(Math.sqrt(1-C$zut*C$zut)-1):.5*(Math.sqrt(1-(C$zut-=2)*C$zut)+1)},elasticIn:function(C$zut){var C$zue,C$zui=.1;return 0===C$zut?0:1===C$zut?1:(C$zue=!C$zui||C$zui<1?(C$zui=1,.1):.4*Math.asin(1/C$zui)/(2*Math.PI),-C$zui*Math.pow(2,10*--C$zut)*Math.sin((C$zut-C$zue)*(2*Math.PI)/.4))},elasticOut:function(C$zut){var C$zue,C$zui=.1;return 0===C$zut?0:1===C$zut?1:(C$zue=!C$zui||C$zui<1?(C$zui=1,.1):.4*Math.asin(1/C$zui)/(2*Math.PI),C$zui*Math.pow(2,-10*C$zut)*Math.sin((C$zut-C$zue)*(2*Math.PI)/.4)+1)},elasticInOut:function(C$zut){var C$zue,C$zui=.1;return 0===C$zut?0:1===C$zut?1:(C$zue=!C$zui||C$zui<1?(C$zui=1,.1):.4*Math.asin(1/C$zui)/(2*Math.PI),(C$zut*=2)<1?C$zui*Math.pow(2,10*--C$zut)*Math.sin((C$zut-C$zue)*(2*Math.PI)/.4)*-.5:C$zui*Math.pow(2,-10*--C$zut)*Math.sin((C$zut-C$zue)*(2*Math.PI)/.4)*.5+1)},backIn:function(C$zut){return C$zut*C$zut*(2.70158*C$zut-1.70158)},backOut:function(C$zut){return--C$zut*C$zut*(2.70158*C$zut+1.70158)+1},backInOut:function(C$zut){return(C$zut*=2)<1?C$zut*C$zut*(3.5949095*C$zut-2.5949095)*.5:.5*((C$zut-=2)*C$zut*(3.5949095*C$zut+2.5949095)+2)},bounceIn:function(C$zut){return 1-C$zur.bounceOut(1-C$zut)},bounceOut:function(C$zut){return C$zut<1/2.75?7.5625*C$zut*C$zut:C$zut<2/2.75?7.5625*(C$zut-=1.5/2.75)*C$zut+.75:C$zut<2.5/2.75?7.5625*(C$zut-=2.25/2.75)*C$zut+.9375:7.5625*(C$zut-=2.625/2.75)*C$zut+.984375},bounceInOut:function(C$zut){return C$zut<.5?.5*C$zur.bounceIn(2*C$zut):.5*C$zur.bounceOut(2*C$zut-1)+.5},smooth:function(C$zut){return C$zut<=0?0:1<=C$zut?1:C$zut*C$zut*(3-2*C$zut)},fade:function(C$zut){return C$zut<=0?0:1<=C$zut?1:C$zut*C$zut*C$zut*(C$zut*(6*C$zut-15)+10)}};function _makeOutIn(C$zue,C$zui){return function(C$zut){return C$zut<.5?C$zui(2*C$zut)/2:C$zue(2*C$zut-1)/2+.5}}C$zur.quadOutIn=_makeOutIn(C$zur.quadIn,C$zur.quadOut),C$zur.cubicOutIn=_makeOutIn(C$zur.cubicIn,C$zur.cubicOut),C$zur.quartOutIn=_makeOutIn(C$zur.quartIn,C$zur.quartOut),C$zur.quintOutIn=_makeOutIn(C$zur.quintIn,C$zur.quintOut),C$zur.sineOutIn=_makeOutIn(C$zur.sineIn,C$zur.sineOut),C$zur.expoOutIn=_makeOutIn(C$zur.expoIn,C$zur.expoOut),C$zur.circOutIn=_makeOutIn(C$zur.circIn,C$zur.circOut),C$zur.backOutIn=_makeOutIn(C$zur.backIn,C$zur.backOut),C$zur.bounceIn=function(C$zut){return 1-C$zur.bounceOut(1-C$zut)},C$zur.bounceInOut=function(C$zut){return C$zut<.5?.5*C$zur.bounceIn(2*C$zut):.5*C$zur.bounceOut(2*C$zut-1)+.5},C$zur.bounceOutIn=_makeOutIn(C$zur.bounceIn,C$zur.bounceOut),cc.easing=C$zue.exports=C$zur},{}],17:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./bezier"),C$zut("./easing"),C$zut("./types"),C$zut("./motion-path-helper"),C$zut("./animation-curves"),C$zut("./animation-clip"),C$zut("./animation-manager"),C$zut("./animation-state"),C$zut("./animation-animator")},{"./animation-animator":10,"./animation-clip":11,"./animation-curves":12,"./animation-manager":13,"./animation-state":14,"./bezier":15,"./easing":16,"./motion-path-helper":18,"./types":20}],18:[function(C$zut,C$zue,C$zur){"use strict";var C$zuN=C$zut("./animation-curves").DynamicAnimCurve;var C$zuk=C$zut("./animation-curves").computeRatioByType;var C$zui=C$zut("./bezier").bezier;var C$zuz=C$zut("../core/utils/binary-search").binarySearchEpsilon;var C$zuG=cc.v2;function Curve(C$zut){this.points=C$zut||[],this.beziers=[],this.ratios=[],this.progresses=[],this.length=0,this.computeBeziers()}function Bezier(){this.start=C$zuG(),this.end=C$zuG(),this.startCtrlPoint=C$zuG(),this.endCtrlPoint=C$zuG()}Curve.prototype.computeBeziers=function(){var C$zut;this.beziers.length=0,this.ratios.length=0,this.progresses.length=0,this.length=0;for(var C$zue=1;C$zue<this.points.length;C$zue++){var C$zui=this.points[C$zue-1];var C$zur=this.points[C$zue];(C$zut=new Bezier).start=C$zui.pos,C$zut.startCtrlPoint=C$zui.out,C$zut.end=C$zur.pos,C$zut.endCtrlPoint=C$zur.in,this.beziers.push(C$zut),this.length+=C$zut.getLength()}var C$zun=0;for(C$zue=0;C$zue<this.beziers.length;C$zue++)C$zut=this.beziers[C$zue],this.ratios[C$zue]=C$zut.getLength()/this.length,this.progresses[C$zue]=C$zun+=this.ratios[C$zue];return this.beziers},Bezier.prototype.getPointAt=function(C$zut){C$zut=this.getUtoTmapping(C$zut);return this.getPoint(C$zut)},Bezier.prototype.getPoint=function(C$zut){var C$zue=C$zui(this.start.x,this.startCtrlPoint.x,this.endCtrlPoint.x,this.end.x,C$zut);C$zut=C$zui(this.start.y,this.startCtrlPoint.y,this.endCtrlPoint.y,this.end.y,C$zut);return new C$zuG(C$zue,C$zut)},Bezier.prototype.getLength=function(){var C$zut=this.getLengths();return C$zut[C$zut.length-1]},Bezier.prototype.getLengths=function(C$zut){if(C$zut=C$zut||(this.__arcLengthDivisions||200),this.cacheArcLengths&&this.cacheArcLengths.length===C$zut+1)return this.cacheArcLengths;var C$zue=[];var C$zui,C$zur=this.getPoint(0),C$zun=C$zuG();var C$zua,C$zuo=0;for(C$zue.push(0),C$zua=1;C$zua<=C$zut;C$zua++)C$zui=this.getPoint(C$zua/C$zut),C$zun.x=C$zur.x-C$zui.x,C$zun.y=C$zur.y-C$zui.y,C$zuo+=C$zun.mag(),C$zue.push(C$zuo),C$zur=C$zui;return this.cacheArcLengths=C$zue},Bezier.prototype.getUtoTmapping=function(C$zut,C$zue){var C$zui=this.getLengths();var C$zur=0,C$zun=C$zui.length;var C$zua;C$zua=C$zue||C$zut*C$zui[C$zun-1];var C$zuo,C$zus=0,C$zuc=C$zun-1;for(;C$zus<=C$zuc;)if((C$zuo=C$zui[C$zur=Math.floor(C$zus+(C$zuc-C$zus)/2)]-C$zua)<0)C$zus=C$zur+1;else{if(!(0<C$zuo)){C$zuc=C$zur;break}C$zuc=C$zur-1}if(C$zui[C$zur=C$zuc]===C$zua)return C$zur/(C$zun-1);C$zue=C$zui[C$zur];return(C$zur+(C$zua-C$zue)/(C$zui[C$zur+1]-C$zue))/(C$zun-1)},C$zue.exports={sampleMotionPaths:function(C$zuh,C$zut,C$zuu,C$zu_,C$zud){function createControlPoints(C$zut){return C$zut instanceof cc.Vec2?{in:C$zut,pos:C$zut,out:C$zut}:Array.isArray(C$zut)&&6===C$zut.length?{in:C$zuG(C$zut[2],C$zut[3]),pos:C$zuG(C$zut[0],C$zut[1]),out:C$zuG(C$zut[4],C$zut[5])}:{in:cc.Vec2.ZERO,pos:cc.Vec2.ZERO,out:cc.Vec2.ZERO}}var C$zue=C$zut.values=C$zut.values.map(function(C$zut){return C$zut=Array.isArray(C$zut)?2===C$zut.length?cc.v2(C$zut[0],C$zut[1]):cc.v3(C$zut[0],C$zut[1],C$zut[2]):C$zut});if(0!==C$zuh.length&&0!==C$zue.length){var C$zuf=!1;for(var C$zup=0;C$zup<C$zuh.length;C$zup++){var C$zum=C$zuh[C$zup];if(C$zum&&!function(C$zut){if(Array.isArray(C$zut)){for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];if(!Array.isArray(C$zur)||6!==C$zur.length)return}return 1}}(C$zum)&&(cc.errorID(3904,C$zud?C$zud.name:"","position",C$zup),C$zum=null),C$zum&&0<C$zum.length){C$zuf=!0;break}}if(C$zuf&&1!==C$zue.length){var C$zuv=C$zut.types;var C$zui=C$zut.ratios;var C$zuy=C$zut.values=[];var C$zug=C$zut.types=[];var C$zub=C$zut.ratios=[];var C$zuC=0;var C$zux=C$zuN.Linear;for(var C$zur=0,C$zuA=C$zuh.length;C$zur<C$zuA-1;C$zur++){var C$zuS=C$zuh[C$zur];var C$zuT=C$zui[C$zur];var C$zuw=C$zui[C$zur+1]-C$zuT;var C$zuE=C$zue[C$zur];var C$zuP=C$zue[C$zur+1];var C$zuM=C$zuv[C$zur];var C$zuR=[];var C$zun=C$zuC/C$zuw;var C$zuI=1/(C$zuw*C$zuu*C$zu_);var C$zua;if(C$zuS&&0<C$zuS.length){var C$zuB=[];C$zuB.push(createControlPoints(C$zuE));for(var C$zuo=0,C$zuD=C$zuS.length;C$zuo<C$zuD;C$zuo++){var C$zuL=createControlPoints(C$zuS[C$zuo]);C$zuB.push(C$zuL)}C$zuB.push(createControlPoints(C$zuP));var C$zus=new Curve(C$zuB);C$zus.computeBeziers();var C$zuV=C$zus.progresses;for(;1e-6<1-C$zun;){var C$zuc,C$zuO,C$zuF;var C$zul;C$zul=(C$zua=C$zuk(C$zua=C$zun,C$zuM))<0?(C$zuF=(0-C$zua)*(C$zuc=C$zus.beziers[0]).getLength(),C$zuO=C$zuc.start.sub(C$zuc.endCtrlPoint).normalize(),C$zuc.start.add(C$zuO.mul(C$zuF))):1<C$zua?(C$zuF=(C$zua-1)*(C$zuc=C$zus.beziers[C$zus.beziers.length-1]).getLength(),C$zuO=C$zuc.end.sub(C$zuc.startCtrlPoint).normalize(),C$zuc.end.add(C$zuO.mul(C$zuF))):(C$zua=(C$zua-=0<(C$zul=(C$zul=C$zuz(C$zuV,C$zua))<0?~C$zul:C$zul)?C$zuV[C$zul-1]:0)/C$zus.ratios[C$zul],C$zus.beziers[C$zul].getPointAt(C$zua)),C$zuR.push(C$zul),C$zun+=C$zuI}}else for(;1e-6<1-C$zun;)C$zua=C$zuk(C$zua=C$zun,C$zuM),C$zuR.push(C$zuE.lerp(C$zuP,C$zua)),C$zun+=C$zuI;C$zux="constant"===C$zuM?C$zuM:C$zuN.Linear;for(C$zuo=0,C$zuD=C$zuR.length;C$zuo<C$zuD;C$zuo++)addNewDatas(C$zuR[C$zuo],C$zux,C$zuT+C$zuC+C$zuI*C$zuo*C$zuw);C$zuC=1e-6<Math.abs(C$zun-1)?(C$zun-1)*C$zuw:0}C$zui[C$zui.length-1]!==C$zub[C$zub.length-1]&&addNewDatas(C$zue[C$zue.length-1],C$zux,C$zui[C$zui.length-1])}}function addNewDatas(C$zut,C$zue,C$zui){C$zuy.push(C$zut),C$zug.push(C$zue),C$zub.push(C$zui)}},Curve:Curve,Bezier:Bezier}},{"../core/utils/binary-search":256,"./animation-curves":12,"./bezier":15}],19:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.js;var C$zun=C$zut("../core/CCDebug");function Playable(){this._isPlaying=!1,this._isPaused=!1,this._stepOnce=!1}C$zut=Playable.prototype;C$zur.get(C$zut,"isPlaying",function(){return this._isPlaying},!0),C$zur.get(C$zut,"isPaused",function(){return this._isPaused},!0);function C$zuJq(){}C$zut.onPlay=C$zuJq,C$zut.onPause=C$zuJq,C$zut.onResume=C$zuJq,C$zut.onStop=C$zuJq,C$zut.onError=C$zuJq,C$zut.play=function(){this._isPlaying?this._isPaused?(this._isPaused=!1,this.onResume()):this.onError(C$zun.getError(3912)):(this._isPlaying=!0,this.onPlay())},C$zut.stop=function(){this._isPlaying&&(this._isPlaying=!1,this.onStop(),this._isPaused=!1)},C$zut.pause=function(){this._isPlaying&&!this._isPaused&&(this._isPaused=!0,this.onPause())},C$zut.resume=function(){this._isPlaying&&this._isPaused&&(this._isPaused=!1,this.onResume())},C$zut.step=function(){this.pause(),this._stepOnce=!0,this._isPlaying||this.play()},C$zue.exports=Playable},{"../core/CCDebug":27}],20:[function(C$zut,C$zue,C$zui){"use strict";var C$zur={Loop:2,ShouldWrap:4,PingPong:22,Reverse:36};var C$zun=cc.Enum({Default:0,Normal:1,Reverse:C$zur.Reverse,Loop:C$zur.Loop,LoopReverse:C$zur.Loop|C$zur.Reverse,PingPong:C$zur.PingPong,PingPongReverse:C$zur.PingPong|C$zur.Reverse});function WrappedInfo(C$zut){C$zut?this.set(C$zut):(this.ratio=0,this.time=0,this.direction=1,this.stopped=!0,this.iterations=0,this.frameIndex=void 0)}cc.WrapMode=C$zun,WrappedInfo.prototype.set=function(C$zut){this.ratio=C$zut.ratio,this.time=C$zut.time,this.direction=C$zut.direction,this.stopped=C$zut.stopped,this.iterations=C$zut.iterations,this.frameIndex=C$zut.frameIndex},C$zue.exports={WrapModeMask:C$zur,WrapMode:C$zun,WrappedInfo:WrappedInfo}},{}],21:[function(C$zut,C$zue,C$zul){"use strict";var C$zui=C$zut("../core/event/event-target");var C$zur=C$zut("../core/platform/CCSys");var C$zun=C$zut("../core/assets/CCAudioClip").LoadMode;var C$zua=!1;var C$zuo=[];function C$zumq(C$zut){C$zui.call(this),this._shouldRecycleOnEnded=!1,this._src=C$zut,this._element=null,this.id=0,this._volume=1,this._loop=!1,this._nextTime=0,this._state=C$zumq.State.INITIALZING,this._onended=function(){this._state=C$zumq.State.STOPPED,this.emit("ended")}.bind(this)}var C$zus;cc.js.extend(C$zumq,C$zui),C$zumq.State={ERROR:-1,INITIALZING:0,PLAYING:1,PAUSED:2,STOPPED:3},(C$zut=C$zumq.prototype)._bindEnded=function(C$zut){C$zut=C$zut||this._onended;var C$zue=this._element;this._src&&C$zue instanceof HTMLAudioElement?C$zue.addEventListener("ended",C$zut):C$zue.onended=C$zut},C$zut._unbindEnded=function(){var C$zut=this._element;C$zut instanceof HTMLAudioElement?C$zut.removeEventListener("ended",this._onended):C$zut&&(C$zut.onended=null)},C$zut._onLoaded=function(){this._createElement(),this.setVolume(this._volume),this.setLoop(this._loop),0!==this._nextTime&&this.setCurrentTime(this._nextTime),this.getState(!1)===C$zumq.State.PLAYING?this.play():this._state=C$zumq.State.INITIALZING},C$zut._createElement=function(){var C$zut=this._src._nativeAsset;C$zut instanceof HTMLAudioElement?(this._element||(this._element=document.createElement("audio")),this._element.src=C$zut.src):this._element=new C$zuc(C$zut,this)},C$zut.play=function(){this._state=C$zumq.State.PLAYING,this._element&&(this._bindEnded(),this._element.play(),this._touchToPlay())},C$zut._touchToPlay=function(){var C$zut;this._src&&this._src.loadMode===C$zun.DOM_AUDIO&&this._element.paused&&C$zuo.push({instance:this,offset:0,audio:this._element}),C$zua||(C$zua=!0,C$zut="ontouchend"in window?"touchend":"mousedown",cc.game.canvas.addEventListener(C$zut,function(){var C$zut;for(;C$zut=C$zuo.pop();)C$zut.audio.play(C$zut.offset)}))},C$zut.destroy=function(){this._element=null},C$zut.pause=function(){this._element&&this.getState()===C$zumq.State.PLAYING&&(this._unbindEnded(),this._element.pause(),this._state=C$zumq.State.PAUSED)},C$zut.resume=function(){this._element&&this.getState()===C$zumq.State.PAUSED&&(this._bindEnded(),this._element.play(),this._state=C$zumq.State.PLAYING)},C$zut.stop=function(){if(this._element){this._element.pause();try{this._element.currentTime=0}catch(C$zut){}for(var C$zut=0;C$zut<C$zuo.length;C$zut++)if(C$zuo[C$zut].instance===this){C$zuo.splice(C$zut,1);break}this._unbindEnded(),this.emit("stop"),this._state=C$zumq.State.STOPPED}},C$zut.setLoop=function(C$zut){this._loop=C$zut,this._element&&(this._element.loop=C$zut)},C$zut.getLoop=function(){return this._loop},C$zut.setVolume=function(C$zut){this._volume=C$zut,this._element&&(this._element.volume=C$zut)},C$zut.getVolume=function(){return this._volume},C$zut.setCurrentTime=function(C$zue){if(this._element){this._nextTime=0,this._unbindEnded(),this._bindEnded(function(){this._bindEnded()}.bind(this));try{this._element.currentTime=C$zue}catch(C$zut){var C$zui=this._element;C$zui.addEventListener&&C$zui.addEventListener("loadedmetadata",function func(){C$zui.removeEventListener("loadedmetadata",func),C$zui.currentTime=C$zue})}}else this._nextTime=C$zue},C$zut.getCurrentTime=function(){return this._element?this._element.currentTime:0},C$zut.getDuration=function(){return this._element?this._element.duration:0},C$zut.getState=function(C$zut){return(C$zut=void 0===C$zut?!0:C$zut)&&this._forceUpdatingState(),this._state},C$zut._forceUpdatingState=function(){var C$zut=this._element;C$zut&&(C$zumq.State.PLAYING===this._state&&C$zut.paused?this._state=C$zumq.State.STOPPED:C$zumq.State.STOPPED!==this._state||C$zut.paused||(this._state=C$zumq.State.PLAYING))},Object.defineProperty(C$zut,"src",{get:function(){return this._src},set:function(C$zui){var C$zut;return this._unbindEnded(),C$zui?(this._src=C$zui).loaded?this._onLoaded():(C$zut=this,C$zui.once("load",function(){C$zui===C$zut._src&&C$zut._onLoaded()}),cc.loader.load({url:C$zui.nativeUrl,skips:["Loader"]},function(C$zut,C$zue){C$zut?cc.error(C$zut):C$zui.loaded||(C$zui._nativeAsset=C$zue)})):(this._src=null,this._element instanceof C$zuc?this._element=null:this._element&&(this._element.src=""),this._state=C$zumq.State.INITIALZING),C$zui},enumerable:!0,configurable:!0}),Object.defineProperty(C$zut,"paused",{get:function(){return!this._element||this._element.paused},enumerable:!0,configurable:!0}),C$zus=cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE||cc.sys.browserType===cc.sys.BROWSER_TYPE_BAIDU||cc.sys.browserType===cc.sys.BROWSER_TYPE_UC?.01:0;var C$zuc=function(C$zut,C$zue){this._audio=C$zue,this._context=C$zur.__audioSupport.context,this._buffer=C$zut,this._gainObj=this._context.createGain(),this.volume=1,this._gainObj.connect(this._context.destination),this._loop=!1,this._startTime=-1,this._currentSource=null,this.playedLength=0,this._currentTimer=null,this._endCallback=function(){this.onended&&this.onended(this)}.bind(this)};(C$zut=C$zuc.prototype).play=function(C$zut){this._currentSource&&!this.paused&&(this._currentSource.onended=null,this._currentSource.stop(0),this.playedLength=0);var C$zue=this._context.createBufferSource();C$zue.buffer=this._buffer,C$zue.connect(this._gainObj),C$zue.loop=this._loop,this._startTime=this._context.currentTime,(C$zut=C$zut||this.playedLength)&&(this._startTime-=C$zut);var C$zui=this._buffer.duration;var C$zur=C$zut;var C$zun;this._loop?C$zue.start?C$zue.start(0,C$zur):C$zue.notoGrainOn?C$zue.noteGrainOn(0,C$zur):C$zue.noteOn(0,C$zur):(C$zui=C$zui-C$zut,C$zue.start?C$zue.start(0,C$zur,C$zui):C$zue.noteGrainOn?C$zue.noteGrainOn(0,C$zur,C$zui):C$zue.noteOn(0,C$zur,C$zui)),(this._currentSource=C$zue).onended=this._endCallback,C$zue.context.state&&"suspended"!==C$zue.context.state||0!==this._context.currentTime||(C$zun=this,clearTimeout(this._currentTimer),this._currentTimer=setTimeout(function(){0===C$zun._context.currentTime&&C$zuo.push({instance:C$zun._audio,offset:C$zut,audio:C$zun})},10)),cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI&&cc.sys.isMobile&&"interrupted"===C$zue.context.state&&C$zue.context.resume()},C$zut.pause=function(){var C$zut;clearTimeout(this._currentTimer),this.paused||(this.playedLength=this._context.currentTime-this._startTime,this.playedLength%=this._buffer.duration,C$zut=this._currentSource,this._currentSource=null,this._startTime=-1,C$zut&&C$zut.stop(0))},Object.defineProperty(C$zut,"paused",{get:function(){return(!this._currentSource||!this._currentSource.loop)&&(-1===this._startTime||this._context.currentTime-this._startTime>this._buffer.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(C$zut,"loop",{get:function(){return this._loop},set:function(C$zut){return this._currentSource&&(this._currentSource.loop=C$zut),this._loop=C$zut},enumerable:!0,configurable:!0}),Object.defineProperty(C$zut,"volume",{get:function(){return this._volume},set:function(C$zue){if(this._volume=C$zue,this._gainObj.gain.setTargetAtTime)try{this._gainObj.gain.setTargetAtTime(C$zue,this._context.currentTime,C$zus)}catch(C$zut){this._gainObj.gain.setTargetAtTime(C$zue,this._context.currentTime,.01)}else this._gainObj.gain.value=C$zue;C$zur.os===C$zur.OS_IOS&&!this.paused&&this._currentSource&&(this._currentSource.onended=null,this.pause(),this.play())},enumerable:!0,configurable:!0}),Object.defineProperty(C$zut,"currentTime",{get:function(){return this.paused||(this.playedLength=this._context.currentTime-this._startTime,this.playedLength%=this._buffer.duration),this.playedLength},set:function(C$zut){return this.paused?this.playedLength=C$zut:(this.pause(),this.playedLength=C$zut,this.play()),C$zut},enumerable:!0,configurable:!0}),Object.defineProperty(C$zut,"duration",{get:function(){return this._buffer.duration},enumerable:!0,configurable:!0}),C$zue.exports=cc.Audio=C$zumq},{"../core/assets/CCAudioClip":35,"../core/event/event-target":115,"../core/platform/CCSys":198}],22:[function(C$zut,C$zue,C$zuc){"use strict";var C$zur=C$zut("./CCAudio");var C$zul=C$zut("../core/assets/CCAudioClip");var C$zui=cc.js;var C$zuh=0;var C$zua=C$zui.createMap(!0);var C$zuo={};var C$zun=[];function C$zuzG(C$zut){var C$zue=C$zuh++;var C$zui=C$zuo[C$zut];function C$zuLG(){var C$zut;C$zuBG(this.id)&&(delete C$zua[this.id],C$zut=C$zui.indexOf(this.id),cc.js.array.fastRemoveAt(C$zui,C$zut)),(C$zut=this)._shouldRecycleOnEnded&&(C$zut._finishCallback=null,C$zut.off("ended"),C$zut.off("stop"),C$zut.src=null,C$zun.includes(C$zut)||(C$zun.length<32?C$zun.push(C$zut):C$zut.destroy()),C$zut._shouldRecycleOnEnded=!1)}return C$zui=C$zui||(C$zuo[C$zut]=[]),C$zus._maxAudioInstance<=C$zui.length&&(C$zut=C$zui.shift(),C$zuBG(C$zut).stop()),(C$zut=C$zun.pop()||new C$zur).on("ended",function(){this._finishCallback&&this._finishCallback(),C$zuLG.call(this)},C$zut),C$zut.on("stop",C$zuLG,C$zut),C$zut.id=C$zue,C$zua[C$zue]=C$zut,C$zui.push(C$zue),C$zut}function C$zuBG(C$zut){return C$zua[C$zut]}function C$zuoG(C$zut){return void 0===C$zut?C$zut=1:"string"==typeof C$zut&&(C$zut=Number.parseFloat(C$zut)),C$zut}var C$zus={AudioState:C$zur.State,_maxWebAudioSize:2097152,_maxAudioInstance:24,_id2audio:C$zua,play:function(C$zut,C$zue,C$zui){var C$zur=C$zut;var C$zun;if("string"==typeof C$zut)cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$zun=C$zuzG(C$zur=C$zut),C$zul._loadByUrl(C$zur,function(C$zut,C$zue){C$zue&&(C$zun.src=C$zue)});else{if(!C$zut)return;C$zur=C$zut.nativeUrl,(C$zun=C$zuzG(C$zur)).src=C$zut}return C$zun._shouldRecycleOnEnded=!0,C$zun.setLoop(C$zue||!1),C$zui=C$zuoG(C$zui),C$zun.setVolume(C$zui),C$zun.play(),C$zun.id},setLoop:function(C$zut,C$zue){C$zut=C$zuBG(C$zut);C$zut&&C$zut.setLoop&&C$zut.setLoop(C$zue)},isLoop:function(C$zut){C$zut=C$zuBG(C$zut);return!(!C$zut||!C$zut.getLoop)&&C$zut.getLoop()},setVolume:function(C$zut,C$zue){C$zut=C$zuBG(C$zut);C$zut&&C$zut.setVolume(C$zue)},getVolume:function(C$zut){C$zut=C$zuBG(C$zut);return C$zut?C$zut.getVolume():1},setCurrentTime:function(C$zut,C$zue){C$zut=C$zuBG(C$zut);return!!C$zut&&(C$zut.setCurrentTime(C$zue),!0)},getCurrentTime:function(C$zut){C$zut=C$zuBG(C$zut);return C$zut?C$zut.getCurrentTime():0},getDuration:function(C$zut){C$zut=C$zuBG(C$zut);return C$zut?C$zut.getDuration():0},getState:function(C$zut){C$zut=C$zuBG(C$zut);return C$zut?C$zut.getState():this.AudioState.ERROR},setFinishCallback:function(C$zut,C$zue){C$zut=C$zuBG(C$zut);C$zut&&(C$zut._finishCallback=C$zue)},pause:function(C$zut){C$zut=C$zuBG(C$zut);return!!C$zut&&(C$zut.pause(),!0)},_pauseIDCache:[],pauseAll:function(){for(var C$zut in C$zua){var C$zue=C$zua[C$zut];C$zue.getState()===C$zur.State.PLAYING&&(this._pauseIDCache.push(C$zut),C$zue.pause())}},resume:function(C$zut){C$zut=C$zuBG(C$zut);C$zut&&C$zut.resume()},resumeAll:function(){for(var C$zut=0;C$zut<this._pauseIDCache.length;++C$zut){var C$zue=this._pauseIDCache[C$zut];C$zue=C$zuBG(C$zue);C$zue&&C$zue.resume()}this._pauseIDCache.length=0},stop:function(C$zut){C$zut=C$zuBG(C$zut);return!!C$zut&&(C$zut.stop(),!0)},stopAll:function(){for(var C$zut in C$zua){C$zut=C$zua[C$zut];C$zut&&C$zut.stop()}},setMaxAudioInstance:function(C$zut){this._maxAudioInstance=C$zut},getMaxAudioInstance:function(){return this._maxAudioInstance},uncache:function(C$zut){var C$zue=C$zut;if("string"==typeof C$zut)cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$zue=C$zut;else{if(!C$zut)return;C$zue=C$zut.nativeUrl}var C$zui=C$zuo[C$zue];if(C$zui)for(;0<C$zui.length;){var C$zur=C$zui.pop();var C$zun=C$zua[C$zur];C$zun&&(C$zun.stop(),delete C$zua[C$zur])}},uncacheAll:function(){var C$zut;for(var C$zue in this.stopAll(),C$zua)(C$zut=C$zua[C$zue])&&C$zut.destroy();for(;C$zut=C$zun.pop();)C$zut.destroy();C$zua=C$zui.createMap(!0),C$zuo={}},getProfile:function(C$zut){},preload:function(C$zut,C$zue){cc.warn("`cc.audioEngine.preload` is deprecated, use `cc.loader.loadRes(url, cc.AudioClip)` instead please."),cc.loader.load(C$zut,C$zue&&function(C$zut){C$zut||C$zue()})},setMaxWebAudioSize:function(C$zut){this._maxWebAudioSize=1024*C$zut},_breakCache:null,_break:function(){for(var C$zut in this._breakCache=[],C$zua){var C$zue=C$zua[C$zut];C$zue.getState()===C$zur.State.PLAYING&&(this._breakCache.push(C$zut),C$zue.pause())}},_restore:function(){if(this._breakCache){for(;0<this._breakCache.length;){var C$zut=this._breakCache.pop();C$zut=C$zuBG(C$zut);C$zut&&C$zut.resume&&C$zut.resume()}this._breakCache=null}},_music:{id:-1,loop:!1,volume:1},_effect:{volume:1,pauseCache:[]},playMusic:function(C$zut,C$zue){var C$zui=this._music;return this.stop(C$zui.id),C$zui.id=this.play(C$zut,C$zue,C$zui.volume),C$zui.loop=C$zue,C$zui.id},stopMusic:function(){this.stop(this._music.id)},pauseMusic:function(){return this.pause(this._music.id),this._music.id},resumeMusic:function(){return this.resume(this._music.id),this._music.id},getMusicVolume:function(){return this._music.volume},setMusicVolume:function(C$zut){C$zut=C$zuoG(C$zut);var C$zue=this._music;return C$zue.volume=C$zut,this.setVolume(C$zue.id,C$zue.volume),C$zue.volume},isMusicPlaying:function(){return this.getState(this._music.id)===this.AudioState.PLAYING},playEffect:function(C$zut,C$zue){return this.play(C$zut,C$zue||!1,this._effect.volume)},setEffectsVolume:function(C$zut){C$zut=C$zuoG(C$zut);var C$zue=this._music.id;for(var C$zui in this._effect.volume=C$zut,C$zua){var C$zur=C$zua[C$zui];C$zur&&C$zur.id!==C$zue&&C$zus.setVolume(C$zui,C$zut)}},getEffectsVolume:function(){return this._effect.volume},pauseEffect:function(C$zut){return this.pause(C$zut)},pauseAllEffects:function(){var C$zut=this._music.id;var C$zue=this._effect;for(var C$zui in C$zue.pauseCache.length=0,C$zua){var C$zur=C$zua[C$zui];C$zur&&C$zur.id!==C$zut&&C$zur.getState()===this.AudioState.PLAYING&&(C$zue.pauseCache.push(C$zui),C$zur.pause())}},resumeEffect:function(C$zut){this.resume(C$zut)},resumeAllEffects:function(){var C$zut=this._effect.pauseCache;for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];C$zui=C$zua[C$zui];C$zui&&C$zui.resume()}},stopEffect:function(C$zut){return this.stop(C$zut)},stopAllEffects:function(){var C$zut=this._music.id;for(var C$zue in C$zua){C$zue=C$zua[C$zue];C$zue&&C$zue.id!==C$zut&&C$zue.getState()===C$zus.AudioState.PLAYING&&C$zue.stop()}}};C$zue.exports=cc.audioEngine=C$zus},{"../core/assets/CCAudioClip":35,"./CCAudio":21}],23:[function(C$zut,C$zue,C$zui){"use strict";var C$zur={name:"Jacob__Codec"};C$zur.Base64=C$zut("./base64"),C$zur.GZip=C$zut("./gzip"),C$zur.unzip=function(){return C$zur.GZip.gunzip.apply(C$zur.GZip,arguments)},C$zur.unzipBase64=function(){var C$zue=C$zur.Base64.decode.apply(C$zur.Base64,arguments);try{return C$zur.GZip.gunzip.call(C$zur.GZip,C$zue)}catch(C$zut){return C$zue.slice(7)}},C$zur.unzipBase64AsArray=function(C$zut,C$zue){C$zue=C$zue||1;var C$zui,C$zur,C$zun,C$zua=this.unzipBase64(C$zut),C$zuo=[];for(C$zui=0,C$zun=C$zua.length/C$zue;C$zui<C$zun;C$zui++)for(C$zuo[C$zui]=0,C$zur=C$zue-1;0<=C$zur;--C$zur)C$zuo[C$zui]+=C$zua.charCodeAt(C$zui*C$zue+C$zur)<<8*C$zur;return C$zuo},C$zur.unzipAsArray=function(C$zut,C$zue){C$zue=C$zue||1;var C$zui,C$zur,C$zun,C$zua=this.unzip(C$zut),C$zuo=[];for(C$zui=0,C$zun=C$zua.length/C$zue;C$zui<C$zun;C$zui++)for(C$zuo[C$zui]=0,C$zur=C$zue-1;0<=C$zur;--C$zur)C$zuo[C$zui]+=C$zua.charCodeAt(C$zui*C$zue+C$zur)<<8*C$zur;return C$zuo},cc.codec=C$zue.exports=C$zur},{"./base64":24,"./gzip":25}],24:[function(C$zut,C$zue,C$zui){"use strict";var C$zul=C$zut("../core/utils/misc").BASE64_VALUES;C$zut={name:"Jacob__Codec__Base64"};C$zut.decode=function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus=[],C$zuc=0;for(C$zut=C$zut.replace(/[^A-Za-z0-9\+\/\=]/g,"");C$zuc<C$zut.length;)C$zur=C$zul[C$zut.charCodeAt(C$zuc++)],C$zue=(15&(C$zun=C$zul[C$zut.charCodeAt(C$zuc++)]))<<4|(C$zua=C$zul[C$zut.charCodeAt(C$zuc++)])>>2,C$zui=(3&C$zua)<<6|(C$zuo=C$zul[C$zut.charCodeAt(C$zuc++)]),C$zus.push(String.fromCharCode(C$zur<<2|C$zun>>4)),64!==C$zua&&C$zus.push(String.fromCharCode(C$zue)),64!==C$zuo&&C$zus.push(String.fromCharCode(C$zui));return C$zus=C$zus.join("")},C$zut.decodeAsArray=function(C$zut,C$zue){var C$zui,C$zur,C$zun,C$zua=this.decode(C$zut),C$zuo=[];for(C$zui=0,C$zun=C$zua.length/C$zue;C$zui<C$zun;C$zui++)for(C$zuo[C$zui]=0,C$zur=C$zue-1;0<=C$zur;--C$zur)C$zuo[C$zui]+=C$zua.charCodeAt(C$zui*C$zue+C$zur)<<8*C$zur;return C$zuo},C$zue.exports=C$zut},{"../core/utils/misc":264}],25:[function(C$zut,C$zue,C$zui){"use strict";function C$zuJJ(C$zut){this.data=C$zut,this.debug=!1,this.gpflags=void 0,this.files=0,this.unzipped=[],this.buf32k=new Array(32768),this.bIdx=0,this.modeZIP=!1,this.bytepos=0,this.bb=1,this.bits=0,this.nameBuf=[],this.fileout=void 0,this.literalTree=new Array(C$zuJJ.LITERALS),this.distanceTree=new Array(32),this.treepos=0,this.Places=null,this.len=0,this.fpos=new Array(17),this.fpos[0]=0,this.flens=void 0,this.fmax=void 0}C$zuJJ.gunzip=function(C$zut){return C$zut.constructor===Array||(C$zut.constructor,String),new C$zuJJ(C$zut).gunzip()[0][0]},C$zuJJ.HufNode=function(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1},C$zuJJ.LITERALS=288,C$zuJJ.NAMEMAX=256,C$zuJJ.bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],C$zuJJ.cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C$zuJJ.cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],C$zuJJ.cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C$zuJJ.cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C$zuJJ.border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C$zuJJ.prototype.gunzip=function(){return this.outputArr=[],this.nextFile(),this.unzipped},C$zuJJ.prototype.readByte=function(){return this.bits+=8,this.bytepos<this.data.length?this.data.charCodeAt(this.bytepos++):-1},C$zuJJ.prototype.byteAlign=function(){this.bb=1},C$zuJJ.prototype.readBit=function(){var C$zut;return this.bits++,C$zut=1&this.bb,this.bb>>=1,0===this.bb&&(this.bb=this.readByte(),C$zut=1&this.bb,this.bb=this.bb>>1|128),C$zut},C$zuJJ.prototype.readBits=function(C$zut){var C$zue=0,C$zui=C$zut;for(;C$zui--;)C$zue=C$zue<<1|this.readBit();return C$zue=C$zut?C$zuJJ.bitReverse[C$zue]>>8-C$zut:C$zue},C$zuJJ.prototype.flushBuffer=function(){this.bIdx=0},C$zuJJ.prototype.addBuffer=function(C$zut){this.buf32k[this.bIdx++]=C$zut,this.outputArr.push(String.fromCharCode(C$zut)),32768===this.bIdx&&(this.bIdx=0)},C$zuJJ.prototype.IsPat=function(){for(;;){if(this.fpos[this.len]>=this.fmax)return-1;if(this.flens[this.fpos[this.len]]===this.len)return this.fpos[this.len]++;this.fpos[this.len]++}},C$zuJJ.prototype.Rec=function(){var C$zut=this.Places[this.treepos];var C$zue;if(17===this.len)return-1;if(this.treepos++,this.len++,0<=(C$zue=this.IsPat()))C$zut.b0=C$zue;else if(C$zut.b0=32768,this.Rec())return-1;if(0<=(C$zue=this.IsPat()))C$zut.b1=C$zue,C$zut.jump=null;else if(C$zut.b1=32768,C$zut.jump=this.Places[this.treepos],C$zut.jumppos=this.treepos,this.Rec())return-1;return this.len--,0},C$zuJJ.prototype.CreateTree=function(C$zut,C$zue,C$zui,C$zur){var C$zun;for(this.Places=C$zut,this.treepos=0,this.flens=C$zui,this.fmax=C$zue,C$zun=0;C$zun<17;C$zun++)this.fpos[C$zun]=0;return this.len=0,this.Rec()?-1:0},C$zuJJ.prototype.DecodeValue=function(C$zut){var C$zue,C$zui,C$zur=0,C$zun=C$zut[C$zur];for(;;)if(this.readBit()){if(!(32768&C$zun.b1))return C$zun.b1;for(C$zun=C$zun.jump,C$zue=C$zut.length,C$zui=0;C$zui<C$zue;C$zui++)if(C$zut[C$zui]===C$zun){C$zur=C$zui;break}}else{if(!(32768&C$zun.b0))return C$zun.b0;C$zun=C$zut[++C$zur]}return-1},C$zuJJ.prototype.DeflateLoop=function(){var C$zuh,C$zuu,C$zut;do{var C$zue;if(C$zuh=this.readBit(),0===(C$zuu=this.readBits(2)))for(this.byteAlign(),C$zue=this.readByte(),C$zue|=this.readByte()<<8,C$zuo=this.readByte(),65535&(C$zue^~(C$zuo|=this.readByte()<<8))&&document.write("BlockLen checksum mismatch\n");C$zue--;)C$zui=this.readByte(),this.addBuffer(C$zui);else if(1===C$zuu)for(;;)if(23<(C$zur=C$zuJJ.bitReverse[this.readBits(7)]>>1)?199<(C$zur=C$zur<<1|this.readBit())?C$zur=(C$zur-=128)<<1|this.readBit():143<(C$zur-=48)&&(C$zur+=136):C$zur+=256,C$zur<256)this.addBuffer(C$zur);else{if(256===C$zur)break;for(C$zur-=257,C$zuc=this.readBits(C$zuJJ.cplext[C$zur])+C$zuJJ.cplens[C$zur],C$zur=C$zuJJ.bitReverse[this.readBits(5)]>>3,8<C$zuJJ.cpdext[C$zur]?(C$zul=this.readBits(8),C$zul|=this.readBits(C$zuJJ.cpdext[C$zur]-8)<<8):C$zul=this.readBits(C$zuJJ.cpdext[C$zur]),C$zul+=C$zuJJ.cpdist[C$zur],C$zur=0;C$zur<C$zuc;C$zur++){var C$zui=this.buf32k[this.bIdx-C$zul&32767];this.addBuffer(C$zui)}}else if(2===C$zuu){var C$zur,C$zun,C$zua,C$zuo,C$zu_;var C$zus=new Array(320);for(C$zua=257+this.readBits(5),C$zuo=1+this.readBits(5),C$zu_=4+this.readBits(4),C$zur=0;C$zur<19;C$zur++)C$zus[C$zur]=0;for(C$zur=0;C$zur<C$zu_;C$zur++)C$zus[C$zuJJ.border[C$zur]]=this.readBits(3);for(C$zuc=this.distanceTree.length,C$zut=0;C$zut<C$zuc;C$zut++)this.distanceTree[C$zut]=new C$zuJJ.HufNode;if(this.CreateTree(this.distanceTree,19,C$zus,0))return this.flushBuffer(),1;C$zun=C$zua+C$zuo,C$zut=0;for(;C$zut<C$zun;)if((C$zur=this.DecodeValue(this.distanceTree))<16)C$zus[C$zut++]=C$zur;else if(16===C$zur){var C$zud;if(C$zun<C$zut+(C$zur=3+this.readBits(2)))return this.flushBuffer(),1;for(C$zud=C$zut?C$zus[C$zut-1]:0;C$zur--;)C$zus[C$zut++]=C$zud}else{if(C$zun<C$zut+(C$zur=17===C$zur?3+this.readBits(3):11+this.readBits(7)))return this.flushBuffer(),1;for(;C$zur--;)C$zus[C$zut++]=0}for(C$zuc=this.literalTree.length,C$zut=0;C$zut<C$zuc;C$zut++)this.literalTree[C$zut]=new C$zuJJ.HufNode;if(this.CreateTree(this.literalTree,C$zua,C$zus,0))return this.flushBuffer(),1;for(C$zuc=this.literalTree.length,C$zut=0;C$zut<C$zuc;C$zut++)this.distanceTree[C$zut]=new C$zuJJ.HufNode;var C$zuf=new Array;for(C$zut=C$zua;C$zut<C$zus.length;C$zut++)C$zuf[C$zut-C$zua]=C$zus[C$zut];if(this.CreateTree(this.distanceTree,C$zuo,C$zuf,0))return this.flushBuffer(),1;for(;;)if(256<=(C$zur=this.DecodeValue(this.literalTree))){var C$zuc,C$zul;if(0===(C$zur-=256))break;for(C$zur--,C$zuc=this.readBits(C$zuJJ.cplext[C$zur])+C$zuJJ.cplens[C$zur],C$zur=this.DecodeValue(this.distanceTree),8<C$zuJJ.cpdext[C$zur]?(C$zul=this.readBits(8),C$zul|=this.readBits(C$zuJJ.cpdext[C$zur]-8)<<8):C$zul=this.readBits(C$zuJJ.cpdext[C$zur]),C$zul+=C$zuJJ.cpdist[C$zur];C$zuc--;){C$zui=this.buf32k[this.bIdx-C$zul&32767];this.addBuffer(C$zui)}}else this.addBuffer(C$zur)}}while(!C$zuh);return this.flushBuffer(),this.byteAlign(),0},C$zuJJ.prototype.unzipFile=function(C$zut){var C$zue;for(this.gunzip(),C$zue=0;C$zue<this.unzipped.length;C$zue++)if(this.unzipped[C$zue][1]===C$zut)return this.unzipped[C$zue][0]},C$zuJJ.prototype.nextFile=function(){this.outputArr=[],this.modeZIP=!1;var C$zut=[];if(C$zut[0]=this.readByte(),C$zut[1]=this.readByte(),120===C$zut[0]&&218===C$zut[1]&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),"geonext.gxt"],this.files++),31===C$zut[0]&&139===C$zut[1]&&(this.skipdir(),this.unzipped[this.files]=[this.outputArr.join(""),"file"],this.files++),80===C$zut[0]&&75===C$zut[1]&&(this.modeZIP=!0,C$zut[2]=this.readByte(),C$zut[3]=this.readByte(),3===C$zut[2]&&4===C$zut[3])){C$zut[0]=this.readByte(),C$zut[1]=this.readByte(),this.gpflags=this.readByte(),this.gpflags|=this.readByte()<<8;C$zut=this.readByte();C$zut|=this.readByte()<<8,this.readByte(),this.readByte(),this.readByte(),this.readByte();var C$zue=this.readByte();(C$zue|=this.readByte()<<8)|this.readByte()<<16|this.readByte()<<24;C$zue=this.readByte();(C$zue|=this.readByte()<<8)|this.readByte()<<16|this.readByte()<<24;var C$zui=this.readByte();C$zui|=this.readByte()<<8;var C$zur=this.readByte();for(C$zur|=this.readByte()<<8,C$zua=0,this.nameBuf=[];C$zui--;){var C$zun=this.readByte();"/"===C$zun|":"===C$zun?C$zua=0:C$zua<C$zuJJ.NAMEMAX-1&&(this.nameBuf[C$zua++]=String.fromCharCode(C$zun))}this.fileout||(this.fileout=this.nameBuf);var C$zua=0;for(;C$zua<C$zur;)C$zun=this.readByte(),C$zua++;8==C$zut&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),this.nameBuf.join("")],this.files++),this.skipdir()}},C$zuJJ.prototype.skipdir=function(){var C$zut=[];var C$zue,C$zui,C$zur;if(8&this.gpflags&&(C$zut[0]=this.readByte(),C$zut[1]=this.readByte(),C$zut[2]=this.readByte(),C$zut[3]=this.readByte(),C$zue=this.readByte(),C$zue|=this.readByte()<<8,this.readByte(),this.readByte(),C$zue=this.readByte(),C$zue=(C$zue=(C$zue|=this.readByte()<<8)|this.readByte()<<16)|this.readByte()<<24),this.modeZIP&&this.nextFile(),C$zut[0]=this.readByte(),8!==C$zut[0])return 0;if(this.gpflags=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),4&this.gpflags)for(C$zut[0]=this.readByte(),C$zut[2]=this.readByte(),this.len=C$zut[0]+256*C$zut[1],C$zui=0;C$zui<this.len;C$zui++)this.readByte();if(8&this.gpflags)for(C$zui=0,this.nameBuf=[];C$zur=this.readByte();)(C$zui="7"!==C$zur&&":"!==C$zur?C$zui:0)<C$zuJJ.NAMEMAX-1&&(this.nameBuf[C$zui++]=C$zur);if(16&this.gpflags)for(;C$zur=this.readByte(););2&this.gpflags&&(this.readByte(),this.readByte()),this.DeflateLoop(),C$zue=this.readByte(),C$zue=(C$zue=(C$zue|=this.readByte()<<8)|this.readByte()<<16)|this.readByte()<<24,this.modeZIP&&this.nextFile()},C$zue.exports=C$zuJJ},{}],26:[function(C$zut,C$zue,C$zui){"use strict";!function(){function i(C$zut){throw C$zut}var C$zuQ=void 0,C$zuK=!0,C$zuo=this;function y(C$zut,C$zue){var C$zui=C$zut.split("."),C$zur=C$zuo;C$zui[0]in C$zur||!C$zur.execScript||C$zur.execScript("var "+C$zui[0]);for(var C$zun;C$zui.length&&(C$zun=C$zui.shift());)C$zui.length||C$zue===C$zuQ?C$zur=C$zur[C$zun]||(C$zur[C$zun]={}):C$zur[C$zun]=C$zue}var C$zutt="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;function ba(C$zut){if("string"==typeof C$zut){var C$zue,C$zui,C$zur=C$zut.split("");for(C$zue=0,C$zui=C$zur.length;C$zue<C$zui;C$zue++)C$zur[C$zue]=(255&C$zur[C$zue].charCodeAt(0))>>>0;C$zut=C$zur}for(var C$zun,C$zua=1,C$zuo=0,C$zus=C$zut.length,C$zuc=0;0<C$zus;){for(C$zus-=C$zun=1024<C$zus?1024:C$zus;C$zuo+=C$zua+=C$zut[C$zuc++],--C$zun;);C$zua%=65521,C$zuo%=65521}return(C$zuo<<16|C$zua)>>>0}function J(C$zut,C$zue){this.index="number"==typeof C$zue?C$zue:0,this.i=0,this.buffer=C$zut instanceof(C$zutt?Uint8Array:Array)?C$zut:new(C$zutt?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&i(Error("invalid index")),this.buffer.length<=this.index&&this.f()}J.prototype.f=function(){var C$zut,C$zue=this.buffer,C$zui=C$zue.length,C$zur=new(C$zutt?Uint8Array:Array)(C$zui<<1);if(C$zutt)C$zur.set(C$zue);else for(C$zut=0;C$zut<C$zui;++C$zut)C$zur[C$zut]=C$zue[C$zut];return this.buffer=C$zur},J.prototype.d=function(C$zut,C$zue,C$zui){var C$zur,C$zun=this.buffer,C$zua=this.index,C$zuo=this.i,C$zus=C$zun[C$zua];if(C$zui&&1<C$zue&&(C$zut=8<C$zue?(C$zul[255&C$zut]<<24|C$zul[C$zut>>>8&255]<<16|C$zul[C$zut>>>16&255]<<8|C$zul[C$zut>>>24&255])>>32-C$zue:C$zul[C$zut]>>8-C$zue),C$zue+C$zuo<8)C$zus=C$zus<<C$zue|C$zut,C$zuo+=C$zue;else for(C$zur=0;C$zur<C$zue;++C$zur)C$zus=C$zus<<1|C$zut>>C$zue-C$zur-1&1,8==++C$zuo&&(C$zuo=0,C$zun[C$zua++]=C$zul[C$zus],C$zus=0,C$zua===C$zun.length&&(C$zun=this.f()));C$zun[C$zua]=C$zus,this.buffer=C$zun,this.i=C$zuo,this.index=C$zua},J.prototype.finish=function(){var C$zut=this.buffer,C$zue=this.index;return 0<this.i&&(C$zut[C$zue]<<=8-this.i,C$zut[C$zue]=C$zul[C$zut[C$zue]],C$zue++),C$zutt?C$zut.subarray(0,C$zue):(C$zut.length=C$zue,C$zut)};var C$zui,C$zur=new(C$zutt?Uint8Array:Array)(256);for(C$zui=0;C$zui<256;++C$zui){for(var C$zun=C$zuc=C$zui,C$zus=7,C$zuc=C$zuc>>>1;C$zuc;C$zuc>>>=1)C$zun=C$zun<<1|1&C$zuc,--C$zus;C$zur[C$zui]=(C$zun<<C$zus&255)>>>0}var C$zul=C$zur;function la(C$zut){this.buffer=new(C$zutt?Uint16Array:Array)(2*C$zut),this.length=0}function S(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zuh,C$zus,C$zuc,C$zuu=C$zut.length,C$zul=0,C$zu_=Number.POSITIVE_INFINITY;for(C$zus=0;C$zus<C$zuu;++C$zus)C$zut[C$zus]>C$zul&&(C$zul=C$zut[C$zus]),C$zut[C$zus]<C$zu_&&(C$zu_=C$zut[C$zus]);for(C$zue=1<<C$zul,C$zui=new(C$zutt?Uint32Array:Array)(C$zue),C$zur=1,C$zun=0,C$zua=2;C$zur<=C$zul;){for(C$zus=0;C$zus<C$zuu;++C$zus)if(C$zut[C$zus]===C$zur){for(C$zuh=C$zun,C$zuc=C$zuo=0;C$zuc<C$zur;++C$zuc)C$zuo=C$zuo<<1|1&C$zuh,C$zuh>>=1;for(C$zuc=C$zuo;C$zuc<C$zue;C$zuc+=C$zua)C$zui[C$zuc]=C$zur<<16|C$zus;++C$zun}++C$zur,C$zun<<=1,C$zua<<=1}return[C$zui,C$zul,C$zu_]}function ma(C$zut,C$zue){this.h=C$zuet,this.w=0,this.input=C$zut,this.b=0,C$zue&&(C$zue.lazy&&(this.w=C$zue.lazy),"number"==typeof C$zue.compressionType&&(this.h=C$zue.compressionType),C$zue.outputBuffer&&(this.a=C$zutt&&C$zue.outputBuffer instanceof Array?new Uint8Array(C$zue.outputBuffer):C$zue.outputBuffer),"number"==typeof C$zue.outputIndex&&(this.b=C$zue.outputIndex)),this.a||(this.a=new(C$zutt?Uint8Array:Array)(32768))}C$zutt&&new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),la.prototype.getParent=function(C$zut){return 2*((C$zut-2)/4|0)},la.prototype.push=function(C$zut,C$zue){var C$zui,C$zur,C$zun,C$zua=this.buffer;for(C$zui=this.length,C$zua[this.length++]=C$zue,C$zua[this.length++]=C$zut;0<C$zui&&(C$zur=this.getParent(C$zui),C$zua[C$zui]>C$zua[C$zur]);)C$zun=C$zua[C$zui],C$zua[C$zui]=C$zua[C$zur],C$zua[C$zur]=C$zun,C$zun=C$zua[C$zui+1],C$zua[C$zui+1]=C$zua[C$zur+1],C$zua[C$zur+1]=C$zun,C$zui=C$zur;return this.length},la.prototype.pop=function(){var C$zut,C$zue,C$zui,C$zur,C$zun,C$zua=this.buffer;for(C$zue=C$zua[0],C$zut=C$zua[1],this.length-=2,C$zua[0]=C$zua[this.length],C$zua[1]=C$zua[this.length+1],C$zun=0;!((C$zur=2*C$zun+2)>=this.length)&&(C$zur+2<this.length&&C$zua[C$zur+2]>C$zua[C$zur]&&(C$zur+=2),C$zua[C$zur]>C$zua[C$zun]);)C$zui=C$zua[C$zun],C$zua[C$zun]=C$zua[C$zur],C$zua[C$zur]=C$zui,C$zui=C$zua[C$zun+1],C$zua[C$zun+1]=C$zua[C$zur+1],C$zua[C$zur+1]=C$zui,C$zun=C$zur;return{index:C$zut,value:C$zue,length:this.length}};var C$zut,C$zuet=2,C$zuh={NONE:0,r:1,j:C$zuet,N:3},C$zuit=[];for(C$zut=0;C$zut<288;C$zut++)switch(C$zuK){case C$zut<=143:C$zuit.push([C$zut+48,8]);break;case C$zut<=255:C$zuit.push([C$zut-144+400,9]);break;case C$zut<=279:C$zuit.push([C$zut-256,7]);break;case C$zut<=287:C$zuit.push([C$zut-280+192,8]);break;default:i("invalid literal: "+C$zut)}function wa(C$zut,C$zue){this.length=C$zut,this.G=C$zue}ma.prototype.n=function(){var C$zuh,C$zuu,C$zu_,C$zud=this.input;switch(this.h){case 0:for(C$zuu=0,C$zu_=C$zud.length;C$zuu<C$zu_;){var C$zuf,C$zup,C$zum=C$zuv=C$zutt?C$zud.subarray(C$zuu,C$zuu+65535):C$zud.slice(C$zuu,C$zuu+65535),C$zuv=(C$zuu+=C$zuv.length)===C$zu_,C$zuy=C$zuQ,C$zut=this.a,C$zue=this.b;if(C$zutt){for(C$zut=new Uint8Array(this.a.buffer);C$zut.length<=C$zue+C$zum.length+5;)C$zut=new Uint8Array(C$zut.length<<1);C$zut.set(this.a)}if(C$zut[C$zue++]=0|(C$zuv?1:0),C$zuf=65536+~(C$zuv=C$zum.length)&65535,C$zut[C$zue++]=255&C$zuv,C$zut[C$zue++]=C$zuv>>>8&255,C$zut[C$zue++]=255&C$zuf,C$zut[C$zue++]=C$zuf>>>8&255,C$zutt)C$zut.set(C$zum,C$zue),C$zue+=C$zum.length,C$zut=C$zut.subarray(0,C$zue);else{for(C$zuy=0,C$zup=C$zum.length;C$zuy<C$zup;++C$zuy)C$zut[C$zue++]=C$zum[C$zuy];C$zut.length=C$zue}this.b=C$zue,this.a=C$zut}break;case 1:var C$zug=new J(new Uint8Array(this.a.buffer),this.b);C$zug.d(1,1,C$zuK),C$zug.d(1,2,C$zuK);var C$zub,C$zuC,C$zux,C$zuA=sa(this,C$zud);for(C$zub=0,C$zuC=C$zuA.length;C$zub<C$zuC;C$zub++)if(C$zux=C$zuA[C$zub],J.prototype.d.apply(C$zug,C$zuit[C$zux]),256<C$zux)C$zug.d(C$zuA[++C$zub],C$zuA[++C$zub],C$zuK),C$zug.d(C$zuA[++C$zub],5),C$zug.d(C$zuA[++C$zub],C$zuA[++C$zub],C$zuK);else if(256===C$zux)break;this.a=C$zug.finish(),this.b=this.a.length;break;case C$zuet:var C$zuS,C$zuT,C$zuw,C$zuE,C$zuP,C$zuM,C$zuR,C$zuI,C$zuB,C$zuD,C$zui,C$zuL,C$zur=new J(new Uint8Array(this.a),this.b),C$zuV=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C$zuO=Array(19);for(C$zu$=C$zuet,C$zur.d(1,1,C$zuK),C$zur.d(C$zu$,2,C$zuK),C$zuS=sa(this,C$zud),C$zu$=ua(C$zuP=ta(this.L,15)),C$zuZ=ua(C$zuM=ta(this.K,7)),C$zuT=286;257<C$zuT&&0===C$zuP[C$zuT-1];C$zuT--);for(C$zuw=30;1<C$zuw&&0===C$zuM[C$zuw-1];C$zuw--);var C$zun,C$zuF,C$zua,C$zuN,C$zuo,C$zus,C$zuk=C$zuT,C$zuz=C$zuw,C$zuc=new(C$zutt?Uint32Array:Array)(C$zuk+C$zuz),C$zul=new(C$zutt?Uint32Array:Array)(316),C$zuG=new(C$zutt?Uint8Array:Array)(19);for(C$zun=C$zuF=0;C$zun<C$zuk;C$zun++)C$zuc[C$zuF++]=C$zuP[C$zun];for(C$zun=0;C$zun<C$zuz;C$zun++)C$zuc[C$zuF++]=C$zuM[C$zun];if(!C$zutt)for(C$zun=0,C$zuN=C$zuG.length;C$zun<C$zuN;++C$zun)C$zuG[C$zun]=0;for(C$zun=C$zuo=0,C$zuN=C$zuc.length;C$zun<C$zuN;C$zun+=C$zuF){for(C$zuF=1;C$zun+C$zuF<C$zuN&&C$zuc[C$zun+C$zuF]===C$zuc[C$zun];++C$zuF);if(C$zua=C$zuF,0===C$zuc[C$zun])if(C$zua<3)for(;0<C$zua--;)C$zuG[C$zul[C$zuo++]=0]++;else for(;0<C$zua;)(C$zus=C$zua-3<(C$zus=C$zua<138?C$zua:138)&&C$zus<C$zua?C$zua-3:C$zus)<=10?(C$zul[C$zuo++]=17,C$zul[C$zuo++]=C$zus-3,C$zuG[17]++):(C$zul[C$zuo++]=18,C$zul[C$zuo++]=C$zus-11,C$zuG[18]++),C$zua-=C$zus;else if(C$zul[C$zuo++]=C$zuc[C$zun],C$zuG[C$zuc[C$zun]]++,--C$zua<3)for(;0<C$zua--;)C$zul[C$zuo++]=C$zuc[C$zun],C$zuG[C$zuc[C$zun]]++;else for(;0<C$zua;)C$zua-3<(C$zus=C$zua<6?C$zua:6)&&C$zus<C$zua&&(C$zus=C$zua-3),C$zul[C$zuo++]=16,C$zul[C$zuo++]=C$zus-3,C$zuG[16]++,C$zua-=C$zus}for(C$zuh=C$zutt?C$zul.subarray(0,C$zuo):C$zul.slice(0,C$zuo),C$zuR=ta(C$zuG,7),C$zui=0;C$zui<19;C$zui++)C$zuO[C$zui]=C$zuR[C$zuV[C$zui]];for(C$zuE=19;4<C$zuE&&0===C$zuO[C$zuE-1];C$zuE--);for(C$zuI=ua(C$zuR),C$zur.d(C$zuT-257,5,C$zuK),C$zur.d(C$zuw-1,5,C$zuK),C$zur.d(C$zuE-4,4,C$zuK),C$zui=0;C$zui<C$zuE;C$zui++)C$zur.d(C$zuO[C$zui],3,C$zuK);for(C$zui=0,C$zuL=C$zuh.length;C$zui<C$zuL;C$zui++)if(C$zuB=C$zuh[C$zui],C$zur.d(C$zuI[C$zuB],C$zuR[C$zuB],C$zuK),16<=C$zuB){switch(C$zui++,C$zuB){case 16:C$zuD=2;break;case 17:C$zuD=3;break;case 18:C$zuD=7;break;default:i("invalid code: "+C$zuB)}C$zur.d(C$zuh[C$zui],C$zuD,C$zuK)}var C$zuU,C$zuW,C$zuH,C$zuj,C$zuX,C$zuq,C$zuJ,C$zuY,C$zu$=[C$zu$,C$zuP],C$zuZ=[C$zuZ,C$zuM];for(C$zuX=C$zu$[0],C$zuq=C$zu$[1],C$zuJ=C$zuZ[0],C$zuY=C$zuZ[1],C$zuU=0,C$zuW=C$zuS.length;C$zuU<C$zuW;++C$zuU)if(C$zuH=C$zuS[C$zuU],C$zur.d(C$zuX[C$zuH],C$zuq[C$zuH],C$zuK),256<C$zuH)C$zur.d(C$zuS[++C$zuU],C$zuS[++C$zuU],C$zuK),C$zuj=C$zuS[++C$zuU],C$zur.d(C$zuJ[C$zuj],C$zuY[C$zuj],C$zuK),C$zur.d(C$zuS[++C$zuU],C$zuS[++C$zuU],C$zuK);else if(256===C$zuH)break;this.a=C$zur.finish(),this.b=this.a.length;break;default:i("invalid compression type")}return this.a};var C$zuu,C$zu_,C$zud=[];for(C$zuu=3;C$zuu<=258;C$zuu++)C$zu_=function(){var C$zut=C$zuu;switch(C$zuK){case 3===C$zut:return[257,C$zut-3,0];case 4===C$zut:return[258,C$zut-4,0];case 5===C$zut:return[259,C$zut-5,0];case 6===C$zut:return[260,C$zut-6,0];case 7===C$zut:return[261,C$zut-7,0];case 8===C$zut:return[262,C$zut-8,0];case 9===C$zut:return[263,C$zut-9,0];case 10===C$zut:return[264,C$zut-10,0];case C$zut<=12:return[265,C$zut-11,1];case C$zut<=14:return[266,C$zut-13,1];case C$zut<=16:return[267,C$zut-15,1];case C$zut<=18:return[268,C$zut-17,1];case C$zut<=22:return[269,C$zut-19,2];case C$zut<=26:return[270,C$zut-23,2];case C$zut<=30:return[271,C$zut-27,2];case C$zut<=34:return[272,C$zut-31,2];case C$zut<=42:return[273,C$zut-35,3];case C$zut<=50:return[274,C$zut-43,3];case C$zut<=58:return[275,C$zut-51,3];case C$zut<=66:return[276,C$zut-59,3];case C$zut<=82:return[277,C$zut-67,4];case C$zut<=98:return[278,C$zut-83,4];case C$zut<=114:return[279,C$zut-99,4];case C$zut<=130:return[280,C$zut-115,4];case C$zut<=162:return[281,C$zut-131,5];case C$zut<=194:return[282,C$zut-163,5];case C$zut<=226:return[283,C$zut-195,5];case C$zut<=257:return[284,C$zut-227,5];case 258===C$zut:return[285,C$zut-258,0];default:i("invalid length: "+C$zut)}}(),C$zud[C$zuu]=C$zu_[2]<<24|C$zu_[1]<<16|C$zu_[0];var C$zuw=C$zutt?new Uint32Array(C$zud):C$zud;function sa(C$zus,C$zut){function b(C$zut,C$zue){var C$zui,C$zur=C$zut.G,C$zun=[],C$zua=0;var C$zuo;switch(C$zui=C$zuw[C$zut.length],C$zun[C$zua++]=65535&C$zui,C$zun[C$zua++]=C$zui>>16&255,C$zun[C$zua++]=C$zui>>24,C$zuK){case 1===C$zur:C$zuo=[0,C$zur-1,0];break;case 2===C$zur:C$zuo=[1,C$zur-2,0];break;case 3===C$zur:C$zuo=[2,C$zur-3,0];break;case 4===C$zur:C$zuo=[3,C$zur-4,0];break;case C$zur<=6:C$zuo=[4,C$zur-5,1];break;case C$zur<=8:C$zuo=[5,C$zur-7,1];break;case C$zur<=12:C$zuo=[6,C$zur-9,2];break;case C$zur<=16:C$zuo=[7,C$zur-13,2];break;case C$zur<=24:C$zuo=[8,C$zur-17,3];break;case C$zur<=32:C$zuo=[9,C$zur-25,3];break;case C$zur<=48:C$zuo=[10,C$zur-33,4];break;case C$zur<=64:C$zuo=[11,C$zur-49,4];break;case C$zur<=96:C$zuo=[12,C$zur-65,5];break;case C$zur<=128:C$zuo=[13,C$zur-97,5];break;case C$zur<=192:C$zuo=[14,C$zur-129,6];break;case C$zur<=256:C$zuo=[15,C$zur-193,6];break;case C$zur<=384:C$zuo=[16,C$zur-257,7];break;case C$zur<=512:C$zuo=[17,C$zur-385,7];break;case C$zur<=768:C$zuo=[18,C$zur-513,8];break;case C$zur<=1024:C$zuo=[19,C$zur-769,8];break;case C$zur<=1536:C$zuo=[20,C$zur-1025,9];break;case C$zur<=2048:C$zuo=[21,C$zur-1537,9];break;case C$zur<=3072:C$zuo=[22,C$zur-2049,10];break;case C$zur<=4096:C$zuo=[23,C$zur-3073,10];break;case C$zur<=6144:C$zuo=[24,C$zur-4097,11];break;case C$zur<=8192:C$zuo=[25,C$zur-6145,11];break;case C$zur<=12288:C$zuo=[26,C$zur-8193,12];break;case C$zur<=16384:C$zuo=[27,C$zur-12289,12];break;case C$zur<=24576:C$zuo=[28,C$zur-16385,13];break;case C$zur<=32768:C$zuo=[29,C$zur-24577,13];break;default:i("invalid distance")}var C$zus,C$zuc;for(C$zui=C$zuo,C$zun[C$zua++]=C$zui[0],C$zun[+C$zua]=C$zui[1],C$zun[5]=C$zui[2],C$zus=0,C$zuc=C$zun.length;C$zus<C$zuc;++C$zus)C$zuh[C$zup++]=C$zun[C$zus];C$zuu[C$zun[0]]++,C$zuv[C$zun[3]]++,C$zum=C$zut.length+C$zue-1,C$zul=null}var C$zue,C$zuc,C$zui,C$zu_,C$zur,C$zun,C$zud,C$zul,C$zua,C$zuf={},C$zuh=C$zutt?new Uint16Array(2*C$zut.length):[],C$zup=0,C$zum=0,C$zuu=new(C$zutt?Uint32Array:Array)(286),C$zuv=new(C$zutt?Uint32Array:Array)(30),C$zuy=C$zus.w;if(!C$zutt){for(C$zui=0;C$zui<=285;)C$zuu[C$zui++]=0;for(C$zui=0;C$zui<=29;)C$zuv[C$zui++]=0}for(C$zuu[256]=1,C$zue=0,C$zuc=C$zut.length;C$zue<C$zuc;++C$zue){for(C$zui=C$zur=0,C$zu_=3;C$zui<C$zu_&&C$zue+C$zui!==C$zuc;++C$zui)C$zur=C$zur<<8|C$zut[C$zue+C$zui];if(C$zuf[C$zur]===C$zuQ&&(C$zuf[C$zur]=[]),C$zun=C$zuf[C$zur],!(0<C$zum--)){for(;0<C$zun.length&&32768<C$zue-C$zun[0];)C$zun.shift();if(C$zuc<=C$zue+3){for(C$zul&&b(C$zul,-1),C$zui=0,C$zu_=C$zuc-C$zue;C$zui<C$zu_;++C$zui)C$zua=C$zut[C$zue+C$zui],C$zuh[C$zup++]=C$zua,++C$zuu[C$zua];break}if(0<C$zun.length){var C$zug,C$zub=C$zuQ,C$zuC=0,C$zuo=C$zuQ,C$zux=C$zuQ,C$zuA=C$zuQ,C$zuS=C$zut.length,C$zux=0,C$zuT=C$zun.length;C$zut:for(;C$zux<C$zuT;C$zux++){if(C$zug=C$zun[C$zuT-C$zux-1],(C$zuo=3)<C$zuC){for(C$zuA=C$zuC;3<C$zuA;C$zuA--)if(C$zut[C$zug+C$zuA-1]!==C$zut[C$zue+C$zuA-1])continue C$zut;C$zuo=C$zuC}for(;C$zuo<258&&C$zue+C$zuo<C$zuS&&C$zut[C$zug+C$zuo]===C$zut[C$zue+C$zuo];)++C$zuo;if(C$zuC<C$zuo&&(C$zub=C$zug,C$zuC=C$zuo),258===C$zuo)break}C$zud=new wa(C$zuC,C$zue-C$zub),C$zul?C$zul.length<C$zud.length?(C$zua=C$zut[C$zue-1],C$zuh[C$zup++]=C$zua,++C$zuu[C$zua],b(C$zud,0)):b(C$zul,-1):C$zud.length<C$zuy?C$zul=C$zud:b(C$zud,0)}else C$zul?b(C$zul,-1):(C$zua=C$zut[C$zue],C$zuh[C$zup++]=C$zua,++C$zuu[C$zua])}C$zun.push(C$zue)}return C$zuh[C$zup++]=256,C$zuu[256]++,C$zus.L=C$zuu,C$zus.K=C$zuv,C$zutt?C$zuh.subarray(0,C$zup):C$zuh}function ta(C$zuh,C$zut){var C$zue,C$zuu,C$zu_,C$zui,C$zud,C$zuf=C$zuh.length,C$zup=new la(572),C$zum=new(C$zutt?Uint8Array:Array)(C$zuf);if(!C$zutt)for(C$zui=0;C$zui<C$zuf;C$zui++)C$zum[C$zui]=0;for(C$zui=0;C$zui<C$zuf;++C$zui)0<C$zuh[C$zui]&&C$zup.push(C$zui,C$zuh[C$zui]);if(C$zue=Array(C$zup.length/2),C$zuu=new(C$zutt?Uint32Array:Array)(C$zup.length/2),1===C$zue.length)return C$zum[C$zup.pop().index]=1,C$zum;for(C$zui=0,C$zud=C$zup.length/2;C$zui<C$zud;++C$zui)C$zue[C$zui]=C$zup.pop(),C$zuu[C$zui]=C$zue[C$zui].value;var C$zur,C$zun,C$zua,C$zuv,C$zuy,C$zuo=C$zuu.length,C$zus=new(C$zutt?Uint16Array:Array)(C$zut),C$zuc=new(C$zutt?Uint8Array:Array)(C$zut),C$zug=new(C$zutt?Uint8Array:Array)(C$zuo),C$zul=Array(C$zut),C$zub=Array(C$zut),C$zuC=Array(C$zut),C$zux=(1<<C$zut)-C$zuo,C$zuA=1<<C$zut-1;for(C$zus[C$zut-1]=C$zuo,C$zun=0;C$zun<C$zut;++C$zun)C$zux<C$zuA?C$zuc[C$zun]=0:(C$zuc[C$zun]=1,C$zux-=C$zuA),C$zux<<=1,C$zus[C$zut-2-C$zun]=(C$zus[C$zut-1-C$zun]/2|0)+C$zuo;for(C$zus[0]=C$zuc[0],C$zul[0]=Array(C$zus[0]),C$zub[0]=Array(C$zus[0]),C$zun=1;C$zun<C$zut;++C$zun)C$zus[C$zun]>2*C$zus[C$zun-1]+C$zuc[C$zun]&&(C$zus[C$zun]=2*C$zus[C$zun-1]+C$zuc[C$zun]),C$zul[C$zun]=Array(C$zus[C$zun]),C$zub[C$zun]=Array(C$zus[C$zun]);for(C$zur=0;C$zur<C$zuo;++C$zur)C$zug[C$zur]=C$zut;for(C$zua=0;C$zua<C$zus[C$zut-1];++C$zua)C$zul[C$zut-1][C$zua]=C$zuu[C$zua],C$zub[C$zut-1][C$zua]=C$zua;for(C$zur=0;C$zur<C$zut;++C$zur)C$zuC[C$zur]=0;for(1===C$zuc[C$zut-1]&&(--C$zug[0],++C$zuC[C$zut-1]),C$zun=C$zut-2;0<=C$zun;--C$zun){for(C$zur=0,C$zuy=C$zuC[C$zun+1],C$zua=0;C$zua<C$zus[C$zun];C$zua++)(C$zuv=C$zul[C$zun+1][C$zuy]+C$zul[C$zun+1][C$zuy+1])>C$zuu[C$zur]?(C$zul[C$zun][C$zua]=C$zuv,C$zub[C$zun][C$zua]=C$zuo,C$zuy+=2):(C$zul[C$zun][C$zua]=C$zuu[C$zur],C$zub[C$zun][C$zua]=C$zur,++C$zur);C$zuC[C$zun]=0,1===C$zuc[C$zun]&&function b(C$zut){var C$zue=C$zub[C$zut][C$zuC[C$zut]];C$zue===C$zuo?(b(C$zut+1),b(C$zut+1)):--C$zug[C$zue],++C$zuC[C$zut]}(C$zun)}for(C$zu_=C$zug,C$zui=0,C$zud=C$zue.length;C$zui<C$zud;++C$zui)C$zum[C$zue[C$zui].index]=C$zu_[C$zui];return C$zum}function ua(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua=new(C$zutt?Uint16Array:Array)(C$zut.length),C$zuo=[],C$zus=[],C$zuc=0;for(C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)C$zuo[C$zut[C$zue]]=1+(0|C$zuo[C$zut[C$zue]]);for(C$zue=1,C$zui=16;C$zue<=C$zui;C$zue++)C$zus[C$zue]=C$zuc,1<<C$zue<(C$zuc+=0|C$zuo[C$zue])&&i("overcommitted"),C$zuc<<=1;for(C$zuc<65536&&i("undercommitted"),C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)for(C$zuc=C$zus[C$zut[C$zue]],C$zus[C$zut[C$zue]]+=1,C$zur=C$zua[C$zue]=0,C$zun=C$zut[C$zue];C$zur<C$zun;C$zur++)C$zua[C$zue]=C$zua[C$zue]<<1|1&C$zuc,C$zuc>>>=1;return C$zua}function Da(C$zut,C$zue){this.input=C$zut,this.a=new(C$zutt?Uint8Array:Array)(32768),this.h=C$zua.j;var C$zui,C$zur={};for(C$zui in(C$zue?"number"!=typeof C$zue.compressionType:C$zue={})||(this.h=C$zue.compressionType),C$zue)C$zur[C$zui]=C$zue[C$zui];C$zur.outputBuffer=this.a,this.z=new ma(this.input,C$zur)}var C$zua=C$zuh;function V(C$zut,C$zue){switch(this.k=[],this.l=32768,this.e=this.g=this.c=this.q=0,this.input=C$zutt?new Uint8Array(C$zut):C$zut,this.s=!1,this.m=C$zug,this.B=!1,C$zue?(C$zue.index&&(this.c=C$zue.index),C$zue.bufferSize&&(this.l=C$zue.bufferSize),C$zue.bufferType&&(this.m=C$zue.bufferType),C$zue.resize&&(this.B=C$zue.resize)):C$zue={},this.m){case C$zuy:this.b=32768,this.a=new(C$zutt?Uint8Array:Array)(32768+this.l+258);break;case C$zug:this.b=0,this.a=new(C$zutt?Uint8Array:Array)(this.l),this.f=this.J,this.t=this.H,this.o=this.I;break;default:i(Error("invalid inflate mode"))}}Da.prototype.n=function(){var C$zut,C$zue,C$zui,C$zur,C$zun=0;if(C$zur=this.a,(C$zut=C$zuO)===C$zuO?C$zui=Math.LOG2E*Math.log(32768)-8:i(Error("invalid compression method")),C$zur[C$zun++]=C$zui=C$zui<<4|C$zut,C$zut===C$zuO)switch(this.h){case C$zua.NONE:C$zue=0;break;case C$zua.r:C$zue=1;break;case C$zua.j:C$zue=2;break;default:i(Error("unsupported compression type"))}else i(Error("invalid compression method"));return C$zur[C$zun++]=(C$zut=C$zue<<6|0)|31-(256*C$zui+C$zut)%31,C$zui=ba(this.input),this.z.b=C$zun,C$zun=(C$zur=this.z.n()).length,C$zutt&&((C$zur=new Uint8Array(C$zur.buffer)).length<=C$zun+4&&(this.a=new Uint8Array(C$zur.length+4),this.a.set(C$zur),C$zur=this.a),C$zur=C$zur.subarray(0,C$zun+4)),C$zur[C$zun++]=C$zui>>24&255,C$zur[C$zun++]=C$zui>>16&255,C$zur[C$zun++]=C$zui>>8&255,C$zur[C$zun++]=255&C$zui,C$zur},y("Zlib.Deflate",Da),y("Zlib.Deflate.compress",function(C$zut,C$zue){return new Da(C$zut,C$zue).n()}),y("Zlib.Deflate.CompressionType",C$zua),y("Zlib.Deflate.CompressionType.NONE",C$zua.NONE),y("Zlib.Deflate.CompressionType.FIXED",C$zua.r),y("Zlib.Deflate.CompressionType.DYNAMIC",C$zua.j);var C$zuy=0,C$zug=1,C$zuh={D:C$zuy,C:C$zug};V.prototype.p=function(){for(;!this.s;){var C$zuh=X(this,3);switch(1&C$zuh&&(this.s=C$zuK),C$zuh>>>=1){case 0:var C$zut=this.input,C$zue=this.c,C$zui=this.a,C$zur=this.b,C$zun=C$zuQ,C$zuu=C$zui.length,C$zua=C$zuQ;switch(this.e=this.g=0,(C$zuc=C$zut[C$zue++])===C$zuQ&&i(Error("invalid uncompressed block header: LEN (first byte)")),C$zun=C$zuc,(C$zuc=C$zut[C$zue++])===C$zuQ&&i(Error("invalid uncompressed block header: LEN (second byte)")),C$zun|=C$zuc<<8,(C$zuc=C$zut[C$zue++])===C$zuQ&&i(Error("invalid uncompressed block header: NLEN (first byte)")),C$zul=C$zuc,(C$zuc=C$zut[C$zue++])===C$zuQ&&i(Error("invalid uncompressed block header: NLEN (second byte)")),C$zun===~(C$zul|=C$zuc<<8)&&i(Error("invalid uncompressed block header: length verify")),C$zue+C$zun>C$zut.length&&i(Error("input buffer is broken")),this.m){case C$zuy:for(;C$zur+C$zun>C$zui.length;){if(C$zun-=C$zua=C$zuu-C$zur,C$zutt)C$zui.set(C$zut.subarray(C$zue,C$zue+C$zua),C$zur),C$zur+=C$zua,C$zue+=C$zua;else for(;C$zua--;)C$zui[C$zur++]=C$zut[C$zue++];this.b=C$zur,C$zui=this.f(),C$zur=this.b}break;case C$zug:for(;C$zur+C$zun>C$zui.length;)C$zui=this.f({v:2});break;default:i(Error("invalid inflate mode"))}if(C$zutt)C$zui.set(C$zut.subarray(C$zue,C$zue+C$zun),C$zur),C$zur+=C$zun,C$zue+=C$zun;else for(;C$zun--;)C$zui[C$zur++]=C$zut[C$zue++];this.c=C$zue,this.b=C$zur,this.a=C$zui;break;case 1:this.o(C$zuE,C$zuM);break;case 2:C$zus=C$zup=C$zuf=C$zud=C$zuv=C$zum=C$zul=C$zuc=C$zuo=void 0;var C$zuo=this;var C$zu_=function(C$zut,C$zue,C$zui){var C$zur,C$zun,C$zua,C$zuo;for(C$zuo=0;C$zuo<C$zut;)switch(C$zur=mb(this,C$zue),C$zur){case 16:for(C$zua=3+X(this,2);C$zua--;)C$zui[C$zuo++]=C$zun;break;case 17:for(C$zua=3+X(this,3);C$zua--;)C$zui[C$zuo++]=0;C$zun=0;break;case 18:for(C$zua=11+X(this,7);C$zua--;)C$zui[C$zuo++]=0;C$zun=0;break;default:C$zun=C$zui[C$zuo++]=C$zur}return C$zui};var C$zud,C$zuf,C$zup,C$zus,C$zuc=X(C$zuo,5)+257,C$zul=X(C$zuo,5)+1,C$zum=X(C$zuo,4)+4,C$zuv=new(C$zutt?Uint8Array:Array)(C$zub.length);for(C$zus=0;C$zus<C$zum;++C$zus)C$zuv[C$zub[C$zus]]=X(C$zuo,3);C$zud=S(C$zuv),C$zuf=new(C$zutt?Uint8Array:Array)(C$zuc),C$zup=new(C$zutt?Uint8Array:Array)(C$zul),C$zuo.o(S(C$zu_.call(C$zuo,C$zuc,C$zud,C$zuf)),S(C$zu_.call(C$zuo,C$zul,C$zud,C$zup)));break;default:i(Error("unknown BTYPE: "+C$zuh))}}return this.t()};var C$zuf,C$zup,C$zue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C$zub=C$zutt?new Uint16Array(C$zue):C$zue,C$zue=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],C$zum=C$zutt?new Uint16Array(C$zue):C$zue,C$zue=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],C$zuv=C$zutt?new Uint8Array(C$zue):C$zue,C$zue=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C$zuC=C$zutt?new Uint16Array(C$zue):C$zue,C$zue=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C$zux=C$zutt?new Uint8Array(C$zue):C$zue,C$zuA=new(C$zutt?Uint8Array:Array)(288);for(C$zuf=0,C$zup=C$zuA.length;C$zuf<C$zup;++C$zuf)C$zuA[C$zuf]=C$zuf<=143?8:C$zuf<=255?9:C$zuf<=279?7:8;var C$zuS,C$zuT,C$zuE=S(C$zuA),C$zuP=new(C$zutt?Uint8Array:Array)(30);for(C$zuS=0,C$zuT=C$zuP.length;C$zuS<C$zuT;++C$zuS)C$zuP[C$zuS]=5;var C$zuM=S(C$zuP);function X(C$zut,C$zue){for(var C$zui,C$zur=C$zut.g,C$zun=C$zut.e,C$zua=C$zut.input,C$zuo=C$zut.c;C$zun<C$zue;)(C$zui=C$zua[C$zuo++])===C$zuQ&&i(Error("input buffer is broken")),C$zur|=C$zui<<C$zun,C$zun+=8;return C$zui=C$zur&(1<<C$zue)-1,C$zut.g=C$zur>>>C$zue,C$zut.e=C$zun-C$zue,C$zut.c=C$zuo,C$zui}function mb(C$zut,C$zue){for(var C$zui,C$zur=C$zut.g,C$zun=C$zut.e,C$zua=C$zut.input,C$zuo=C$zut.c,C$zus=C$zue[0],C$zuc=C$zue[1];C$zun<C$zuc;)(C$zui=C$zua[C$zuo++])===C$zuQ&&i(Error("input buffer is broken")),C$zur|=C$zui<<C$zun,C$zun+=8;return C$zue=C$zus[C$zur&(1<<C$zuc)-1],C$zut.g=C$zur>>(C$zus=C$zue>>>16),C$zut.e=C$zun-C$zus,C$zut.c=C$zuo,65535&C$zue}function nb(C$zut,C$zue){var C$zui,C$zur;this.input=C$zut,this.c=0,C$zue?(C$zue.index&&(this.c=C$zue.index),C$zue.verify&&(this.M=C$zue.verify)):C$zue={},C$zui=C$zut[this.c++],C$zur=C$zut[this.c++],(15&C$zui)===C$zuO?this.method=C$zuO:i(Error("unsupported compression method")),0!=((C$zui<<8)+C$zur)%31&&i(Error("invalid fcheck flag:"+((C$zui<<8)+C$zur)%31)),32&C$zur&&i(Error("fdict flag is not supported")),this.A=new V(C$zut,{index:this.c,bufferSize:C$zue.bufferSize,bufferType:C$zue.bufferType,resize:C$zue.resize})}V.prototype.o=function(C$zut,C$zue){var C$zui=this.a,C$zur=this.b;this.u=C$zut;for(var C$zun,C$zua,C$zuo,C$zus,C$zuc=C$zui.length-258;256!==(C$zun=mb(this,C$zut));)if(C$zun<256)C$zuc<=C$zur&&(this.b=C$zur,C$zui=this.f(),C$zur=this.b),C$zui[C$zur++]=C$zun;else for(C$zus=C$zum[C$zua=C$zun-257],0<C$zuv[C$zua]&&(C$zus+=X(this,C$zuv[C$zua])),C$zun=mb(this,C$zue),C$zuo=C$zuC[C$zun],0<C$zux[C$zun]&&(C$zuo+=X(this,C$zux[C$zun])),C$zuc<=C$zur&&(this.b=C$zur,C$zui=this.f(),C$zur=this.b);C$zus--;)C$zui[C$zur]=C$zui[C$zur++-C$zuo];for(;8<=this.e;)this.e-=8,this.c--;this.b=C$zur},V.prototype.I=function(C$zut,C$zue){var C$zui=this.a,C$zur=this.b;this.u=C$zut;for(var C$zun,C$zua,C$zuo,C$zus,C$zuc=C$zui.length;256!==(C$zun=mb(this,C$zut));)if(C$zun<256)C$zuc<=C$zur&&(C$zuc=(C$zui=this.f()).length),C$zui[C$zur++]=C$zun;else for(C$zus=C$zum[C$zua=C$zun-257],0<C$zuv[C$zua]&&(C$zus+=X(this,C$zuv[C$zua])),C$zun=mb(this,C$zue),C$zuo=C$zuC[C$zun],0<C$zux[C$zun]&&(C$zuo+=X(this,C$zux[C$zun])),C$zuc<C$zur+C$zus&&(C$zuc=(C$zui=this.f()).length);C$zus--;)C$zui[C$zur]=C$zui[C$zur++-C$zuo];for(;8<=this.e;)this.e-=8,this.c--;this.b=C$zur},V.prototype.f=function(){var C$zut,C$zue,C$zui=new(C$zutt?Uint8Array:Array)(this.b-32768),C$zur=this.b-32768,C$zun=this.a;if(C$zutt)C$zui.set(C$zun.subarray(32768,C$zui.length));else for(C$zut=0,C$zue=C$zui.length;C$zut<C$zue;++C$zut)C$zui[C$zut]=C$zun[C$zut+32768];if(this.k.push(C$zui),this.q+=C$zui.length,C$zutt)C$zun.set(C$zun.subarray(C$zur,32768+C$zur));else for(C$zut=0;C$zut<32768;++C$zut)C$zun[C$zut]=C$zun[C$zur+C$zut];return this.b=32768,C$zun},V.prototype.J=function(C$zut){var C$zue,C$zui=this.input.length/this.c+1|0,C$zur=this.input,C$zun=this.a;return C$zut&&("number"==typeof C$zut.v&&(C$zui=C$zut.v),"number"==typeof C$zut.F&&(C$zui+=C$zut.F)),C$zur=C$zui<2?(C$zut=(C$zur.length-this.c)/this.u[2]/2*258|0)<C$zun.length?C$zun.length+C$zut:C$zun.length<<1:C$zun.length*C$zui,C$zutt?(C$zue=new Uint8Array(C$zur)).set(C$zun):C$zue=C$zun,this.a=C$zue},V.prototype.t=function(){var C$zut,C$zue,C$zui,C$zur,C$zun,C$zua=0,C$zuo=this.a,C$zus=this.k,C$zuc=new(C$zutt?Uint8Array:Array)(this.q+(this.b-32768));if(0===C$zus.length)return C$zutt?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(C$zue=0,C$zui=C$zus.length;C$zue<C$zui;++C$zue)for(C$zur=0,C$zun=(C$zut=C$zus[C$zue]).length;C$zur<C$zun;++C$zur)C$zuc[C$zua++]=C$zut[C$zur];for(C$zue=32768,C$zui=this.b;C$zue<C$zui;++C$zue)C$zuc[C$zua++]=C$zuo[C$zue];return this.k=[],this.buffer=C$zuc},V.prototype.H=function(){var C$zut,C$zue=this.b;return C$zutt?this.B?(C$zut=new Uint8Array(C$zue)).set(this.a.subarray(0,C$zue)):C$zut=this.a.subarray(0,C$zue):(this.a.length>C$zue&&(this.a.length=C$zue),C$zut=this.a),this.buffer=C$zut},nb.prototype.p=function(){var C$zut,C$zue=this.input;return C$zut=this.A.p(),this.c=this.A.c,this.M&&((C$zue[this.c++]<<24|C$zue[this.c++]<<16|C$zue[this.c++]<<8|C$zue[this.c++])>>>0!==ba(C$zut)&&i(Error("invalid adler-32 checksum"))),C$zut},y("Zlib.Inflate",nb),y("Zlib.Inflate.BufferType",C$zuh),C$zuh.ADAPTIVE=C$zuh.C,C$zuh.BLOCK=C$zuh.D,y("Zlib.Inflate.prototype.decompress",nb.prototype.p);C$zutt&&new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);C$zutt&&new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]);C$zutt&&new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]);C$zutt&&new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);C$zutt&&new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);var C$zuR,C$zuI,C$zuB=new(C$zutt?Uint8Array:Array)(288);for(C$zuR=0,C$zuI=C$zuB.length;C$zuR<C$zuI;++C$zuR)C$zuB[C$zuR]=C$zuR<=143?8:C$zuR<=255?9:C$zuR<=279?7:8;S(C$zuB);var C$zuD,C$zuL,C$zuV=new(C$zutt?Uint8Array:Array)(30);for(C$zuD=0,C$zuL=C$zuV.length;C$zuD<C$zuL;++C$zuD)C$zuV[C$zuD]=5;S(C$zuV);var C$zuO=8}.call(window);var C$zur=window.Zlib;C$zur.Deflate=C$zur.Deflate,C$zur.Deflate.compress=C$zur.Deflate.compress,C$zur.Inflate=C$zur.Inflate,C$zur.Inflate.BufferType=C$zur.Inflate.BufferType,C$zur.Inflate.prototype.decompress=C$zur.Inflate.prototype.decompress,C$zue.exports=C$zur},{}],27:[function(C$zut,C$zue,C$zul){"use strict";var C$zui=C$zut("./platform/utils");var C$zur=C$zut("../../DebugInfos")||{};var C$zun;cc.log=cc.warn=cc.error=cc.assert=console.log.bind?console.log.bind(console):console.log;function getTypedFormatter(){return function(){var C$zut=C$zur[arguments[0]]||"unknown id";if(1===arguments.length)return C$zut;if(2===arguments.length)return cc.js.formatStr(C$zut,arguments[1]);var C$zue=cc.js.shiftArguments.apply(null,arguments);return cc.js.formatStr.apply(null,[C$zut].concat(C$zue))}}cc._throw=function(C$zut){C$zui.callInNextTick(function(){throw C$zut})};var C$zua=getTypedFormatter();cc.logID=function(){cc.log(C$zua.apply(null,arguments))};var C$zuo=getTypedFormatter();cc.warnID=function(){cc.warn(C$zuo.apply(null,arguments))};var C$zus=getTypedFormatter();cc.errorID=function(){cc.error(C$zus.apply(null,arguments))};var C$zuh=getTypedFormatter();cc.assertID=function(C$zut){C$zut||cc.assert(!1,C$zuh.apply(null,cc.js.shiftArguments.apply(null,arguments)))};var C$zuc=cc.Enum({NONE:0,INFO:1,WARN:2,ERROR:3,INFO_FOR_WEB_PAGE:4,WARN_FOR_WEB_PAGE:5,ERROR_FOR_WEB_PAGE:6});C$zue.exports=cc.debug={DebugMode:C$zuc,_resetDebugSetting:function(C$zut){var C$zui;cc.log=cc.warn=cc.error=cc.assert=function(){},C$zut!==C$zuc.NONE&&(C$zut>C$zuc.ERROR?(C$zui=function(C$zut){var C$zue,C$zui;cc.game.canvas&&(C$zun||((C$zue=document.createElement("Div")).setAttribute("id","logInfoDiv"),C$zue.setAttribute("width","200"),C$zue.setAttribute("height",cc.game.canvas.height),(C$zui=C$zue.style).zIndex="99999",C$zui.position="absolute",C$zui.top=C$zui.left="0",(C$zun=document.createElement("textarea")).setAttribute("rows","20"),C$zun.setAttribute("cols","30"),C$zun.setAttribute("disabled","true"),(C$zui=C$zun.style).backgroundColor="transparent",C$zui.borderBottom="1px solid #cccccc",C$zui.borderTopWidth=C$zui.borderLeftWidth=C$zui.borderRightWidth="0px",C$zui.borderTopStyle=C$zui.borderLeftStyle=C$zui.borderRightStyle="none",C$zui.padding="0px",C$zui.margin=0,C$zue.appendChild(C$zun),cc.game.canvas.parentNode.appendChild(C$zue)),C$zun.value=C$zun.value+C$zut+"\r\n",C$zun.scrollTop=C$zun.scrollHeight)},cc.error=function(){C$zui("ERROR :  "+cc.js.formatStr.apply(null,arguments))},cc.assert=function(C$zut,C$zue){!C$zut&&C$zue&&(C$zue=cc.js.formatStr.apply(null,cc.js.shiftArguments.apply(null,arguments)),C$zui("ASSERT: "+C$zue))},C$zut!==C$zuc.ERROR_FOR_WEB_PAGE&&(cc.warn=function(){C$zui("WARN :  "+cc.js.formatStr.apply(null,arguments))}),C$zut===C$zuc.INFO_FOR_WEB_PAGE&&(cc.log=function(){C$zui(cc.js.formatStr.apply(null,arguments))})):console&&console.log.apply&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),console.error.bind?cc.error=console.error.bind(console):cc.error=function(){return console.error.apply(console,arguments)},cc.assert=function(C$zut,C$zue){if(!C$zut)throw C$zue=C$zue&&cc.js.formatStr.apply(null,cc.js.shiftArguments.apply(null,arguments)),new Error(C$zue)}),C$zut!==C$zuc.ERROR&&(console.warn.bind?cc.warn=console.warn.bind(console):cc.warn=function(){return console.warn.apply(console,arguments)}),C$zut===C$zuc.INFO&&(console.log.bind?cc.log=console.log.bind(console):cc.log=function(){return console.log.apply(console,arguments)}))},getError:getTypedFormatter(),isDisplayStats:function(){return!!cc.profiler&&cc.profiler.isShowingStats()},setDisplayStats:function(C$zut){cc.profiler&&cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&(C$zut?cc.profiler.showStats():cc.profiler.hideStats(),cc.game.config.showFPS=!!C$zut)}}},{"../../DebugInfos":1,"./platform/utils":213}],28:[function(C$zut,C$zue,C$zus){"use strict";var C$zui=C$zut("./event/event-target");var C$zuh=C$zut("./load-pipeline/auto-release-utils");var C$zur=C$zut("./component-scheduler");var C$zun=C$zut("./node-activator");var C$zuu=C$zut("./platform/CCObject");var C$zu_=C$zut("./CCGame");var C$zuc=C$zut("./renderer");var C$zua=C$zut("./event-manager");var C$zuo=C$zut("./CCScheduler");cc.Director=function(){C$zui.call(this),this._paused=!1,this._purgeDirectorInNextLoop=!1,this._winSizeInPoints=null,this._loadingScene="",this._scene=null,this._totalFrames=0,this._lastUpdate=0,this._deltaTime=0,this._startTime=0,this._maxParticleDeltaTime=0,this._scheduler=null,this._compScheduler=null,this._nodeActivator=null,this._actionManager=null;var C$zut=this;C$zu_.on(C$zu_.EVENT_SHOW,function(){C$zut._lastUpdate=performance.now()}),C$zu_.once(C$zu_.EVENT_ENGINE_INITED,this.init,this)},cc.Director.prototype={constructor:cc.Director,init:function(){return this._totalFrames=0,this._lastUpdate=performance.now(),this._startTime=this._lastUpdate,this._paused=!1,this._purgeDirectorInNextLoop=!1,this._winSizeInPoints=cc.size(0,0),this._scheduler=new C$zuo,cc.ActionManager?(this._actionManager=new cc.ActionManager,this._scheduler.scheduleUpdate(this._actionManager,C$zuo.PRIORITY_SYSTEM,!1)):this._actionManager=null,this.sharedInit(),!0},sharedInit:function(){this._compScheduler=new C$zur,this._nodeActivator=new C$zun,C$zua&&C$zua.setEnabled(!0),cc.AnimationManager?(this._animationManager=new cc.AnimationManager,this._scheduler.scheduleUpdate(this._animationManager,C$zuo.PRIORITY_SYSTEM,!1)):this._animationManager=null,cc.CollisionManager?(this._collisionManager=new cc.CollisionManager,this._scheduler.scheduleUpdate(this._collisionManager,C$zuo.PRIORITY_SYSTEM,!1)):this._collisionManager=null,cc.PhysicsManager?(this._physicsManager=new cc.PhysicsManager,this._scheduler.scheduleUpdate(this._physicsManager,C$zuo.PRIORITY_SYSTEM,!1)):this._physicsManager=null,cc.Physics3DManager?(this._physics3DManager=new cc.Physics3DManager,this._scheduler.scheduleUpdate(this._physics3DManager,C$zuo.PRIORITY_SYSTEM,!1)):this._physics3DManager=null,cc._widgetManager&&cc._widgetManager.init(this),cc.loader.init(this)},calculateDeltaTime:function(C$zut){C$zut=C$zut||performance.now(),this._deltaTime=C$zut>this._lastUpdate?(C$zut-this._lastUpdate)/1e3:0,1<this._deltaTime&&(this._deltaTime=1/60),this._lastUpdate=C$zut},convertToGL:function(C$zut){var C$zue=C$zu_.container;var C$zui=cc.view;var C$zur=C$zue.getBoundingClientRect();var C$zun=C$zur.left+window.pageXOffset-C$zue.clientLeft;C$zue=C$zur.top+window.pageYOffset-C$zue.clientTop;C$zun=C$zui._devicePixelRatio*(C$zut.x-C$zun);C$zue=C$zui._devicePixelRatio*(C$zue+C$zur.height-C$zut.y);return C$zui._isRotated?cc.v2(C$zui._viewportRect.width-C$zue,C$zun):cc.v2(C$zun,C$zue)},convertToUI:function(C$zut){var C$zue=C$zu_.container;var C$zui=cc.view;var C$zur=C$zue.getBoundingClientRect();var C$zun=C$zur.left+window.pageXOffset-C$zue.clientLeft;C$zue=C$zur.top+window.pageYOffset-C$zue.clientTop;var C$zua=cc.v2(0,0);return C$zui._isRotated?(C$zua.x=C$zun+C$zut.y/C$zui._devicePixelRatio,C$zua.y=C$zue+C$zur.height-(C$zui._viewportRect.width-C$zut.x)/C$zui._devicePixelRatio):(C$zua.x=C$zun+C$zut.x*C$zui._devicePixelRatio,C$zua.y=C$zue+C$zur.height-C$zut.y*C$zui._devicePixelRatio),C$zua},end:function(){this._purgeDirectorInNextLoop=!0},getWinSize:function(){return cc.size(cc.winSize)},getWinSizeInPixels:function(){return cc.size(cc.winSize)},pause:function(){this._paused||(this._paused=!0)},purgeCachedData:function(){cc.loader.releaseAll()},purgeDirector:function(){this._scheduler.unscheduleAll(),this._compScheduler.unscheduleAll(),this._nodeActivator.reset(),C$zua&&C$zua.setEnabled(!1),cc.isValid(this._scene)&&this._scene.destroy(),this._scene=null,cc.renderer.clear(),cc.AssetLibrary.resetBuiltins(),cc.game.pause(),cc.loader.releaseAll()},reset:function(){this.purgeDirector(),C$zua&&C$zua.setEnabled(!0),this._actionManager&&this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._animationManager&&this._scheduler.scheduleUpdate(this._animationManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._collisionManager&&this._scheduler.scheduleUpdate(this._collisionManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._physicsManager&&this._scheduler.scheduleUpdate(this._physicsManager,cc.Scheduler.PRIORITY_SYSTEM,!1),cc.game.resume()},runSceneImmediate:function(C$zut,C$zue,C$zui){cc.assertID(C$zut instanceof cc.Scene,1216),console.time("InitScene"),C$zut._load(),console.timeEnd("InitScene"),console.time("AttachPersist");var C$zur=Object.keys(C$zu_._persistRootNodes).map(function(C$zut){return C$zu_._persistRootNodes[C$zut]});for(var C$zun=0;C$zun<C$zur.length;C$zun++){var C$zua=C$zur[C$zun];var C$zuo=C$zut.getChildByUuid(C$zua.uuid);var C$zus;C$zuo?(C$zus=C$zuo.getSiblingIndex(),C$zuo._destroyImmediate(),C$zut.insertChild(C$zua,C$zus)):C$zua.parent=C$zut}console.timeEnd("AttachPersist");var C$zuc=this._scene;console.time("AutoRelease");var C$zul=C$zuc&&C$zuc.autoReleaseAssets&&C$zuc.dependAssets;C$zuh.autoRelease(C$zul,C$zut.dependAssets,C$zur),console.timeEnd("AutoRelease"),console.time("Destroy"),cc.isValid(C$zuc)&&C$zuc.destroy(),this._scene=null,C$zuu._deferredDestroy(),console.timeEnd("Destroy"),C$zue&&C$zue(),this.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,C$zut),this._scene=C$zut,console.time("Activate"),C$zut._activate(),console.timeEnd("Activate"),cc.game.resume(),C$zui&&C$zui(null,C$zut),this.emit(cc.Director.EVENT_AFTER_SCENE_LAUNCH,C$zut)},runScene:function(C$zut,C$zue,C$zui){cc.assertID(C$zut,1205),cc.assertID(C$zut instanceof cc.Scene,1216),C$zut._load(),this.once(cc.Director.EVENT_AFTER_UPDATE,function(){this.runSceneImmediate(C$zut,C$zue,C$zui)},this)},_getSceneUuid:function(C$zut){var C$zue=C$zu_._sceneInfos;if("string"==typeof C$zut){C$zut.endsWith(".fire")||(C$zut+=".fire"),"/"===C$zut[0]||C$zut.startsWith("db://")||(C$zut="/"+C$zut);for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];if(C$zur.url.endsWith(C$zut))return C$zur}}else if("number"==typeof C$zut){if(0<=C$zut&&C$zut<C$zue.length)return C$zue[C$zut];cc.errorID(1206,C$zut)}else cc.errorID(1207,C$zut);return null},loadScene:function(C$zut,C$zue,C$zui){if(this._loadingScene)return cc.warnID(1208,C$zut,this._loadingScene),!1;var C$zur=this._getSceneUuid(C$zut);return C$zur?(C$zur=C$zur.uuid,this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,C$zut),this._loadingScene=C$zut,this._loadSceneByUuid(C$zur,C$zue,C$zui),!0):(cc.errorID(1209,C$zut),!1)},preloadScene:function(C$zui,C$zut,C$zur){void 0===C$zur&&(C$zur=C$zut,C$zut=null);var C$zue=this._getSceneUuid(C$zui);C$zue?(this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,C$zui),cc.loader.load({uuid:C$zue.uuid,type:"uuid"},C$zut,function(C$zut,C$zue){C$zut&&cc.errorID(1210,C$zui,C$zut.message),C$zur&&C$zur(C$zut,C$zue)})):(C$zue='Can not preload the scene "'+C$zui+'" because it is not in the build settings.',C$zur(new Error(C$zue)),cc.error("preloadScene: "+C$zue))},_loadSceneByUuid:function(C$zun,C$zua,C$zuo,C$zut){console.time("LoadScene "+C$zun),cc.AssetLibrary.loadAsset(C$zun,function(C$zut,C$zue){console.timeEnd("LoadScene "+C$zun);var C$zui=cc.director;if(C$zui._loadingScene="",C$zut)C$zut="Failed to load scene: "+C$zut,cc.error(C$zut);else{var C$zur;if(C$zue instanceof cc.SceneAsset)return(C$zur=C$zue.scene)._id=C$zue._uuid,C$zur._name=C$zue._name,void C$zui.runSceneImmediate(C$zur,C$zuo,C$zua);C$zut="The asset "+C$zun+" is not a scene",cc.error(C$zut)}C$zua&&C$zua(C$zut)})},resume:function(){this._paused&&(this._lastUpdate=performance.now(),this._lastUpdate||cc.logID(1200),this._paused=!1,this._deltaTime=0)},setDepthTest:function(C$zut){cc.Camera.main&&(cc.Camera.main.depth=!!C$zut)},setClearColor:function(C$zut){cc.Camera.main&&(cc.Camera.main.backgroundColor=C$zut)},getRunningScene:function(){return this._scene},getScene:function(){return this._scene},getAnimationInterval:function(){return 1e3/C$zu_.getFrameRate()},setAnimationInterval:function(C$zut){C$zu_.setFrameRate(Math.round(1e3/C$zut))},getDeltaTime:function(){return this._deltaTime},getTotalTime:function(){return performance.now()-this._startTime},getTotalFrames:function(){return this._totalFrames},isPaused:function(){return this._paused},getScheduler:function(){return this._scheduler},setScheduler:function(C$zut){this._scheduler!==C$zut&&(this._scheduler=C$zut)},getActionManager:function(){return this._actionManager},setActionManager:function(C$zut){this._actionManager!==C$zut&&(this._actionManager&&this._scheduler.unscheduleUpdate(this._actionManager),this._actionManager=C$zut,this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1))},getAnimationManager:function(){return this._animationManager},getCollisionManager:function(){return this._collisionManager},getPhysicsManager:function(){return this._physicsManager},getPhysics3DManager:function(){return this._physics3DManager},startAnimation:function(){cc.game.resume()},stopAnimation:function(){cc.game.pause()},_resetDeltaTime:function(){this._lastUpdate=performance.now(),this._deltaTime=0},mainLoop:function(C$zut){this._purgeDirectorInNextLoop?(this._purgeDirectorInNextLoop=!1,this.purgeDirector()):(this.calculateDeltaTime(C$zut),this._paused||(this.emit(cc.Director.EVENT_BEFORE_UPDATE),this._compScheduler.startPhase(),this._compScheduler.updatePhase(this._deltaTime),this._scheduler.update(this._deltaTime),this._compScheduler.lateUpdatePhase(this._deltaTime),this._compScheduler.clearup(),this.emit(cc.Director.EVENT_AFTER_UPDATE),C$zuu._deferredDestroy()),this.emit(cc.Director.EVENT_BEFORE_DRAW),C$zuc.render(this._scene,this._deltaTime),this.emit(cc.Director.EVENT_AFTER_DRAW),C$zua.frameUpdateListeners(),this._totalFrames++)},__fastOn:function(C$zut,C$zue,C$zui){this.on(C$zut,C$zue,C$zui)},__fastOff:function(C$zut,C$zue,C$zui){this.off(C$zut,C$zue,C$zui)}},cc.js.addon(cc.Director.prototype,C$zui.prototype),cc.Director.EVENT_PROJECTION_CHANGED="director_projection_changed",cc.Director.EVENT_BEFORE_SCENE_LOADING="director_before_scene_loading",cc.Director.EVENT_BEFORE_SCENE_LAUNCH="director_before_scene_launch",cc.Director.EVENT_AFTER_SCENE_LAUNCH="director_after_scene_launch",cc.Director.EVENT_BEFORE_UPDATE="director_before_update",cc.Director.EVENT_AFTER_UPDATE="director_after_update",cc.Director.EVENT_BEFORE_VISIT="director_before_draw",cc.Director.EVENT_AFTER_VISIT="director_before_draw",cc.Director.EVENT_BEFORE_DRAW="director_before_draw",cc.Director.EVENT_AFTER_DRAW="director_after_draw",cc.Director.PROJECTION_2D=0,cc.Director.PROJECTION_3D=1,cc.Director.PROJECTION_CUSTOM=3,cc.Director.PROJECTION_DEFAULT=cc.Director.PROJECTION_2D,cc.Director.EVENT_BEFORE_PHYSICS="director_before_physics",cc.Director.EVENT_AFTER_PHYSICS="director_after_physics",cc.director=new cc.Director,C$zue.exports=cc.director},{"./CCGame":29,"./CCScheduler":33,"./component-scheduler":72,"./event-manager":113,"./event/event-target":115,"./load-pipeline/auto-release-utils":140,"./node-activator":161,"./platform/CCObject":195,"./renderer":220}],29:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./event/event-target");C$zut("../audio/CCAudioEngine");var C$zuo=C$zut("./CCDebug");var C$zua=C$zut("./renderer/index.js");var C$zus=C$zut("../core/renderer/utils/dynamic-atlas/manager");var C$zuc={EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",EVENT_RESTART:"game_on_restart",EVENT_GAME_INITED:"game_inited",EVENT_ENGINE_INITED:"engine_inited",EVENT_RENDERER_INITED:"engine_inited",RENDER_TYPE_CANVAS:0,RENDER_TYPE_WEBGL:1,RENDER_TYPE_OPENGL:2,_persistRootNodes:{},_paused:!0,_configLoaded:!1,_isCloning:!1,_prepared:!1,_rendererInitialized:!1,_renderContext:null,_intervalId:null,_lastTime:null,_frameTime:null,_sceneInfos:[],frame:null,container:null,canvas:null,renderType:-1,config:null,onStart:null,setFrameRate:function(C$zut){this.config.frameRate=C$zut,this._intervalId&&window.cancelAnimFrame(this._intervalId),this._intervalId=0,this._paused=!0,this._setAnimFrame(),this._runMainLoop()},getFrameRate:function(){return this.config.frameRate},step:function(){cc.director.mainLoop()},pause:function(){this._paused||(this._paused=!0,cc.audioEngine&&cc.audioEngine._break(),this._intervalId&&window.cancelAnimFrame(this._intervalId),this._intervalId=0)},resume:function(){this._paused&&(this._paused=!1,cc.audioEngine&&cc.audioEngine._restore(),cc.director._resetDeltaTime(),this._runMainLoop())},isPaused:function(){return this._paused},restart:function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){for(var C$zut in C$zuc._persistRootNodes)C$zuc.removePersistRootNode(C$zuc._persistRootNodes[C$zut]);cc.director.getScene().destroy(),cc.Object._deferredDestroy(),cc.audioEngine&&cc.audioEngine.uncacheAll(),cc.director.reset(),C$zuc.pause(),cc.AssetLibrary._loadBuiltins(function(){C$zuc.onStart(),C$zuc.emit(C$zuc.EVENT_RESTART)})})},end:function(){close()},_initEngine:function(){this._rendererInitialized||(this._initRenderer(),this._initEvents(),this.emit(this.EVENT_ENGINE_INITED))},_loadPreviewScript:function(C$zut){C$zut()},_prepareFinished:function(C$zut){var C$zue=this;this._initEngine(),this._setAnimFrame(),cc.AssetLibrary._loadBuiltins(function(){console.log("Cocos Creator v"+cc.ENGINE_VERSION),C$zue._prepared=!0,C$zue._runMainLoop(),C$zue.emit(C$zue.EVENT_GAME_INITED),C$zut&&C$zut()})},eventTargetOn:C$zur.prototype.on,eventTargetOnce:C$zur.prototype.once,on:function(C$zut,C$zue,C$zui,C$zur){this._prepared&&C$zut===this.EVENT_ENGINE_INITED||!this._paused&&C$zut===this.EVENT_GAME_INITED?C$zue.call(C$zui):this.eventTargetOn(C$zut,C$zue,C$zui,C$zur)},once:function(C$zut,C$zue,C$zui){this._prepared&&C$zut===this.EVENT_ENGINE_INITED||!this._paused&&C$zut===this.EVENT_GAME_INITED?C$zue.call(C$zui):this.eventTargetOnce(C$zut,C$zue,C$zui)},prepare:function(C$zue){var C$zui=this;var C$zut;this._prepared?C$zue&&C$zue():(C$zut=this.config.jsList)&&0<C$zut.length?cc.loader.load(C$zut,function(C$zut){if(C$zut)throw new Error(JSON.stringify(C$zut));C$zui._loadPreviewScript(function(){C$zui._prepareFinished(C$zue)})}):this._loadPreviewScript(function(){C$zui._prepareFinished(C$zue)})},run:function(C$zut,C$zue){this._initConfig(C$zut),this.onStart=C$zue,this.prepare(C$zuc.onStart&&C$zuc.onStart.bind(C$zuc))},addPersistRootNode:function(C$zut){if(cc.Node.isNode(C$zut)&&C$zut.uuid){var C$zue=C$zut.uuid;if(!this._persistRootNodes[C$zue]){var C$zui=cc.director._scene;if(cc.isValid(C$zui))if(C$zut.parent){if(!(C$zut.parent instanceof cc.Scene))return void cc.warnID(3801);if(C$zut.parent!==C$zui)return void cc.warnID(3802)}else C$zut.parent=C$zui;(this._persistRootNodes[C$zue]=C$zut)._persistNode=!0}}else cc.warnID(3800)},removePersistRootNode:function(C$zut){var C$zue=C$zut.uuid||"";C$zut===this._persistRootNodes[C$zue]&&(delete this._persistRootNodes[C$zue],C$zut._persistNode=!1)},isPersistRootNode:function(C$zut){return C$zut._persistNode},_setAnimFrame:function(){this._lastTime=performance.now();var C$zut=C$zuc.config.frameRate;this._frameTime=1e3/C$zut,cc.director._maxParticleDeltaTime=this._frameTime/1e3*2,60!==C$zut&&30!==C$zut?(window.requestAnimFrame=this._stTime,window.cancelAnimFrame=this._ctTime):(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||this._stTime,window.cancelAnimFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||this._ctTime)},_stTime:function(C$zut){var C$zue=performance.now();var C$zui=Math.max(0,C$zuc._frameTime-(C$zue-C$zuc._lastTime));var C$zur=window.setTimeout(function(){C$zut()},C$zui);return C$zuc._lastTime=C$zue+C$zui,C$zur},_ctTime:function(C$zut){window.clearTimeout(C$zut)},_runMainLoop:function(){var C$zue,C$zui,C$zut,C$zur,C$zun,C$zua;this._prepared&&(C$zut=(C$zue=this).config,C$zur=cc.director,C$zun=!0,C$zua=C$zut.frameRate,C$zuo.setDisplayStats(C$zut.showFPS),C$zui=function(C$zut){C$zue._paused||(C$zue._intervalId=window.requestAnimFrame(C$zui),30===C$zua&&(C$zun=!C$zun)||C$zur.mainLoop(C$zut))},C$zue._intervalId=window.requestAnimFrame(C$zui),C$zue._paused=!1)},_initConfig:function(C$zut){"number"!=typeof C$zut.debugMode&&(C$zut.debugMode=0),C$zut.exposeClassName=!!C$zut.exposeClassName,"number"!=typeof C$zut.frameRate&&(C$zut.frameRate=60);var C$zue=C$zut.renderMode;("number"!=typeof C$zue||2<C$zue||C$zue<0)&&(C$zut.renderMode=0),"boolean"!=typeof C$zut.registerSystemEvent&&(C$zut.registerSystemEvent=!0),C$zut.showFPS=1!==C$zue&&!!C$zut.showFPS,this._sceneInfos=C$zut.scenes||[],this.collisionMatrix=C$zut.collisionMatrix||[],this.groupList=C$zut.groupList||[],C$zuo._resetDebugSetting(C$zut.debugMode),this.config=C$zut,this._configLoaded=!0},_determineRenderType:function(){var C$zut=this.config,C$zut=parseInt(C$zut.renderMode)||0;this.renderType=this.RENDER_TYPE_CANVAS;var C$zue=!1;if(0===C$zut?cc.sys.capabilities.opengl?(this.renderType=this.RENDER_TYPE_WEBGL,C$zue=!0):cc.sys.capabilities.canvas&&(this.renderType=this.RENDER_TYPE_CANVAS,C$zue=!0):1===C$zut&&cc.sys.capabilities.canvas?(this.renderType=this.RENDER_TYPE_CANVAS,C$zue=!0):2===C$zut&&cc.sys.capabilities.opengl&&(this.renderType=this.RENDER_TYPE_WEBGL,C$zue=!0),!C$zue)throw new Error(C$zuo.getError(3820,C$zut))},_initRenderer:function(){var C$zut,C$zue,C$zui,C$zur,C$zun;this._rendererInitialized||("CANVAS"===(C$zun=(C$zun=this.config.id)instanceof HTMLElement?C$zun:document.querySelector(C$zun)||document.querySelector("#"+C$zun)).tagName?(C$zut=C$zun.width,C$zue=C$zun.height,this.canvas=C$zui=C$zun,this.container=C$zur=document.createElement("DIV"),C$zui.parentNode&&C$zui.parentNode.insertBefore(C$zur,C$zui)):("DIV"!==C$zun.tagName&&cc.warnID(3819),C$zut=C$zun.clientWidth,C$zue=C$zun.clientHeight,this.canvas=C$zui=document.createElement("CANVAS"),this.container=C$zur=document.createElement("DIV"),C$zun.appendChild(C$zur)),C$zur.setAttribute("id","Cocos2dGameContainer"),C$zur.appendChild(C$zui),this.frame=C$zur.parentNode===document.body?document.documentElement:C$zur.parentNode,C$zun="gameCanvas",-1<(" "+(C$zur=C$zui).className+" ").indexOf(" "+C$zun+" ")||(C$zur.className&&(C$zur.className+=" "),C$zur.className+=C$zun),C$zui.setAttribute("width",C$zut||480),C$zui.setAttribute("height",C$zue||320),C$zui.setAttribute("tabindex",99),this._determineRenderType(),this.renderType===this.RENDER_TYPE_WEBGL&&(C$zun={stencil:!0,antialias:cc.macro.ENABLE_WEBGL_ANTIALIAS,alpha:cc.macro.ENABLE_TRANSPARENT_CANVAS},C$zua.initWebGL(C$zui,C$zun),this._renderContext=C$zua.device._gl,!cc.macro.CLEANUP_IMAGE_CACHE&&C$zus&&(C$zus.enabled=!0)),this._renderContext||(this.renderType=this.RENDER_TYPE_CANVAS,C$zua.initCanvas(C$zui),this._renderContext=C$zua.device._ctx),this.canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return!1},this._rendererInitialized=!0)},_initEvents:function(){var C$zue,C$zut=window;this.config.registerSystemEvent&&cc.internal.inputManager.registerSystemEvent(this.canvas),void 0!==document.hidden?C$zue="hidden":void 0!==document.mozHidden?C$zue="mozHidden":void 0!==document.msHidden?C$zue="msHidden":void 0!==document.webkitHidden&&(C$zue="webkitHidden");var C$zua=!1;function onHidden(){C$zua||(C$zua=!0,C$zuc.emit(C$zuc.EVENT_HIDE))}function onShown(C$zut,C$zue,C$zui,C$zur,C$zun){C$zua&&(C$zua=!1,C$zuc.emit(C$zuc.EVENT_SHOW,C$zut,C$zue,C$zui,C$zur,C$zun))}if(C$zue){var C$zui=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"];for(var C$zur=0;C$zur<C$zui.length;C$zur++)document.addEventListener(C$zui[C$zur],function(C$zut){(document[C$zue]||C$zut.hidden?onHidden:onShown)()})}else C$zut.addEventListener("blur",onHidden),C$zut.addEventListener("focus",onShown);-1<navigator.userAgent.indexOf("MicroMessenger")&&(C$zut.onfocus=onShown),"onpageshow"in window&&"onpagehide"in window&&(C$zut.addEventListener("pagehide",onHidden),C$zut.addEventListener("pageshow",onShown),document.addEventListener("pagehide",onHidden),document.addEventListener("pageshow",onShown)),this.on(C$zuc.EVENT_HIDE,function(){C$zuc.pause()}),this.on(C$zuc.EVENT_SHOW,function(){C$zuc.resume()})}};C$zur.call(C$zuc),cc.js.addon(C$zuc,C$zur.prototype),cc.game=C$zue.exports=C$zuc},{"../audio/CCAudioEngine":22,"../core/renderer/utils/dynamic-atlas/manager":223,"./CCDebug":27,"./event/event-target":115,"./renderer/index.js":220}],30:[function(C$zut,C$zue,C$zur){"use strict";var C$zup=C$zut("./value-types");var C$zul=C$zut("./utils/base-node");var C$zuu=C$zut("./utils/prefab-helper");var C$zu_=C$zut("./utils/trans-pool").NodeMemPool;var C$zui=C$zut("./utils/affine-transform");var C$zus=C$zut("./event-manager");var C$zud=C$zut("./platform/CCMacro");var C$zuf=C$zut("./platform/js");C$zut("./event/event");var C$zuv=C$zut("./event/event-target");var C$zun=C$zut("./renderer/render-flow");var C$zuy=cc.Object.Flags.Destroying;var C$zug=Math.PI/180;var C$zua=!!cc.ActionManager;function C$zuVv(){}var C$zub=new C$zup.Vec3;var C$zuC=new C$zup.Quat;var C$zux=new C$zup.Vec3;var C$zuA=new C$zup.Vec3;var C$zuS=new C$zup.Quat;var C$zuT=new C$zup.Quat;var C$zuw=new C$zup.Vec3;var C$zuE=new C$zup.Vec3;var C$zuP=new C$zup.Vec3;var C$zuM=new C$zup.Vec3;var C$zuR=new C$zup.Vec3;var C$zuI=new C$zup.Quat;var C$zuB=new C$zup.Quat;var C$zuD=new C$zup.Vec3;var C$zuL=new C$zup.Quat;var C$zuV=new C$zup.Vec3;var C$zuO=new C$zup.Quat;var C$zuF=new C$zup.Vec3;var C$zuN=new C$zup.Vec3;var C$zuk=new C$zup.Quat;var C$zuz=new C$zup.Quat;new C$zup.Quat;var C$zum=cc.mat4();var C$zuG=new C$zup.Vec3;var C$zuo=new Array(16);C$zuo.length=0;C$zut=cc.Enum({DEBUG:31});var C$zuh=cc.Enum({POSITION:1,SCALE:2,ROTATION:4,SKEW:8,TRS:7,RS:6,TRSS:15,PHYSICS_POSITION:16,PHYSICS_SCALE:32,PHYSICS_ROTATION:64,PHYSICS_TRS:112,PHYSICS_RS:96,ALL_POSITION:17,ALL_SCALE:34,ALL_ROTATION:68,ALL_TRS:119,ALL:65535});var C$zuc=cc.Enum({TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_WHEEL:"mousewheel",POSITION_CHANGED:"position-changed",ROTATION_CHANGED:"rotation-changed",SCALE_CHANGED:"scale-changed",SIZE_CHANGED:"size-changed",ANCHOR_CHANGED:"anchor-changed",COLOR_CHANGED:"color-changed",CHILD_ADDED:"child-added",CHILD_REMOVED:"child-removed",CHILD_REORDER:"child-reorder",GROUP_CHANGED:"group-changed",SIBLING_ORDER_CHANGED:"sibling-order-changed"});var C$zuU=[C$zuc.TOUCH_START,C$zuc.TOUCH_MOVE,C$zuc.TOUCH_END,C$zuc.TOUCH_CANCEL];var C$zuW=[C$zuc.MOUSE_DOWN,C$zuc.MOUSE_ENTER,C$zuc.MOUSE_MOVE,C$zuc.MOUSE_LEAVE,C$zuc.MOUSE_UP,C$zuc.MOUSE_WHEEL];var C$zuH=!0;function C$zuwz(C$zut,C$zue){0!==C$zut&&(C$zuH&&cc.warn("`cc.Node.skewX/Y` is deprecated since v2.2.1, please use 3D node instead.",""),C$zuH=!1)}var C$zuj=null;function C$zuAz(C$zut,C$zue){var C$zui=C$zut.getLocation();var C$zur=this.owner;return!!C$zur._hitTest(C$zui,this)&&(C$zue.type=C$zuc.TOUCH_START,C$zue.touch=C$zut,C$zue.bubbles=!0,C$zur.dispatchEvent(C$zue),!0)}function C$zuDz(C$zut,C$zue){var C$zui=this.owner;C$zue.type=C$zuc.TOUCH_MOVE,C$zue.touch=C$zut,C$zue.bubbles=!0,C$zui.dispatchEvent(C$zue)}function C$zuhz(C$zut,C$zue){var C$zui=C$zut.getLocation();var C$zur=this.owner;C$zur._hitTest(C$zui,this)?C$zue.type=C$zuc.TOUCH_END:C$zue.type=C$zuc.TOUCH_CANCEL,C$zue.touch=C$zut,C$zue.bubbles=!0,C$zur.dispatchEvent(C$zue)}function C$zuQz(C$zut,C$zue){C$zut.getLocation();var C$zui=this.owner;C$zue.type=C$zuc.TOUCH_CANCEL,C$zue.touch=C$zut,C$zue.bubbles=!0,C$zui.dispatchEvent(C$zue)}function C$zuvz(C$zut){var C$zue=C$zut.getLocation();var C$zui=this.owner;C$zui._hitTest(C$zue,this)&&(C$zut.type=C$zuc.MOUSE_DOWN,C$zut.bubbles=!0,C$zui.dispatchEvent(C$zut))}function C$zuzz(C$zut){var C$zue=C$zut.getLocation();var C$zui=this.owner;if(C$zui._hitTest(C$zue,this))this._previousIn||(C$zuj&&C$zuj._mouseListener&&(C$zut.type=C$zuc.MOUSE_LEAVE,C$zuj.dispatchEvent(C$zut),C$zuj._mouseListener._previousIn=!1),C$zuj=this.owner,C$zut.type=C$zuc.MOUSE_ENTER,C$zui.dispatchEvent(C$zut),this._previousIn=!0),C$zut.type=C$zuc.MOUSE_MOVE,C$zut.bubbles=!0,C$zui.dispatchEvent(C$zut);else{if(!this._previousIn)return;C$zut.type=C$zuc.MOUSE_LEAVE,C$zui.dispatchEvent(C$zut),this._previousIn=!1,C$zuj=null}C$zut.stopPropagation()}function C$zuBz(C$zut){var C$zue=C$zut.getLocation();var C$zui=this.owner;C$zui._hitTest(C$zue,this)&&(C$zut.type=C$zuc.MOUSE_UP,C$zut.bubbles=!0,C$zui.dispatchEvent(C$zut),C$zut.stopPropagation())}function C$zuoz(C$zut){var C$zue=C$zut.getLocation();var C$zui=this.owner;C$zui._hitTest(C$zue,this)&&(C$zut.type=C$zuc.MOUSE_WHEEL,C$zut.bubbles=!0,C$zui.dispatchEvent(C$zut),C$zut.stopPropagation())}function _searchComponentsInParent(C$zut,C$zue){if(C$zue){var C$zui=0;var C$zur=null;for(var C$zun=C$zut;C$zun&&cc.Node.isNode(C$zun);C$zun=C$zun._parent,++C$zui){var C$zua;C$zun.getComponent(C$zue)&&(C$zua={index:C$zui,node:C$zun},C$zur?C$zur.push(C$zua):C$zur=[C$zua])}return C$zur}return null}function _checkListeners(C$zut,C$zue){if(C$zut._objFlags&C$zuy)return 1;var C$zui=0;if(C$zut._bubblingListeners)for(;C$zui<C$zue.length;++C$zui)if(C$zut._bubblingListeners.hasEventListener(C$zue[C$zui]))return 1;if(C$zut._capturingListeners)for(;C$zui<C$zue.length;++C$zui)if(C$zut._capturingListeners.hasEventListener(C$zue[C$zui]))return 1}function _getActualGroupIndex(C$zut){var C$zue=C$zut.groupIndex;return C$zue=0===C$zue&&C$zut.parent?_getActualGroupIndex(C$zut.parent):C$zue}function _updateCullingMask(C$zut){var C$zue=_getActualGroupIndex(C$zut);C$zut._cullingMask=1<<C$zue;for(var C$zui=0;C$zui<C$zut._children.length;C$zui++)_updateCullingMask(C$zut._children[C$zui])}function updateLocalMatrix3D(){var C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo;this._localMatDirty&C$zuh.TRSS&&(C$zut=(C$zue=this._matrix).m,C$zup.Trs.toMat4(C$zue,this._trs),(this._skewX||this._skewY)&&(C$zue=C$zut[0],C$zui=C$zut[1],C$zur=C$zut[4],C$zun=C$zut[5],C$zua=Math.tan(this._skewX*C$zug),C$zuo=Math.tan(this._skewY*C$zug),1/0===C$zua&&(C$zua=99999999),C$zut[0]=C$zue+C$zur*(C$zuo=1/0===C$zuo?99999999:C$zuo),C$zut[1]=C$zui+C$zun*C$zuo,C$zut[4]=C$zur+C$zue*C$zua,C$zut[5]=C$zun+C$zui*C$zua),this._localMatDirty&=~C$zuh.TRSS,this._worldMatDirty=!0)}function updateLocalMatrix2D(){var C$zut=this._localMatDirty;var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul;C$zut&C$zuh.TRSS&&(C$zue=this._matrix.m,C$zui=this._trs,C$zut&(C$zuh.RS|C$zuh.SKEW)&&(C$zut=-this._eulerAngles.z,C$zul=this._skewX||this._skewY,C$zur=C$zui[7],C$zun=C$zui[8],C$zut||C$zul?(C$zus=C$zuo=0,C$zuc=C$zua=1,C$zut&&(C$zut=C$zut*C$zug,C$zus=Math.sin(C$zut),C$zua=C$zuc=Math.cos(C$zut),C$zuo=-C$zus),C$zue[0]=C$zua*=C$zur,C$zue[1]=C$zuo*=C$zur,C$zue[4]=C$zus*=C$zun,C$zue[5]=C$zuc*=C$zun,C$zul&&(C$zut=C$zue[0],C$zua=C$zue[1],C$zuo=C$zue[4],C$zus=C$zue[5],C$zuc=Math.tan(this._skewX*C$zug),C$zul=Math.tan(this._skewY*C$zug),1/0===C$zuc&&(C$zuc=99999999),C$zue[0]=C$zut+C$zuo*(C$zul=1/0===C$zul?99999999:C$zul),C$zue[1]=C$zua+C$zus*C$zul,C$zue[4]=C$zuo+C$zut*C$zuc,C$zue[5]=C$zus+C$zua*C$zuc)):(C$zue[0]=C$zur,C$zue[1]=0,C$zue[4]=0,C$zue[5]=C$zun)),C$zue[12]=C$zui[0],C$zue[13]=C$zui[1],this._localMatDirty&=~C$zuh.TRSS,this._worldMatDirty=!0)}function calculWorldMatrix3D(){var C$zut;this._localMatDirty&C$zuh.TRSS&&this._updateLocalMatrix(),this._parent?(C$zut=this._parent._worldMatrix,C$zup.Mat4.mul(this._worldMatrix,C$zut,this._matrix)):C$zup.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1}function calculWorldMatrix2D(){this._localMatDirty&C$zuh.TRSS&&this._updateLocalMatrix();var C$zut=this._parent;C$zut?this._mulMat(this._worldMatrix,C$zut._worldMatrix,this._matrix):C$zup.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1}function mulMat2D(C$zut,C$zue,C$zui){C$zue=C$zue.m,C$zui=C$zui.m,C$zut=C$zut.m;var C$zur=C$zue[0],C$zun=C$zue[1],C$zua=C$zue[4],C$zuo=C$zue[5],C$zuh=C$zue[12],C$zue=C$zue[13];var C$zus=C$zui[0],C$zuc=C$zui[1],C$zul=C$zui[4],C$zuu=C$zui[5],C$zu_=C$zui[12],C$zui=C$zui[13];0!==C$zun||0!==C$zua?(C$zut[0]=C$zus*C$zur+C$zuc*C$zua,C$zut[1]=C$zus*C$zun+C$zuc*C$zuo,C$zut[4]=C$zul*C$zur+C$zuu*C$zua,C$zut[5]=C$zul*C$zun+C$zuu*C$zuo,C$zut[12]=C$zur*C$zu_+C$zua*C$zui+C$zuh,C$zut[13]=C$zun*C$zu_+C$zuo*C$zui+C$zue):(C$zut[0]=C$zus*C$zur,C$zut[1]=C$zuc*C$zuo,C$zut[4]=C$zul*C$zur,C$zut[5]=C$zuu*C$zuo,C$zut[12]=C$zur*C$zu_+C$zuh,C$zut[13]=C$zuo*C$zui+C$zue)}var C$zuX=C$zup.Mat4.mul;C$zul={name:"cc.Node",extends:C$zul,properties:{_opacity:255,_color:cc.Color.WHITE,_contentSize:cc.Size,_anchorPoint:cc.v2(.5,.5),_position:void 0,_scale:void 0,_trs:null,_eulerAngles:cc.Vec3,_skewX:0,_skewY:0,_zIndex:{default:void 0,type:cc.Integer},_localZOrder:{default:0,serializable:!1},_is3DNode:!1,_groupIndex:{default:0,formerlySerializedAs:"groupIndex"},groupIndex:{get:function(){return this._groupIndex},set:function(C$zut){this._groupIndex=C$zut,_updateCullingMask(this),this.emit(C$zuc.GROUP_CHANGED,this)}},group:{get:function(){return cc.game.groupList[this.groupIndex]||""},set:function(C$zut){this.groupIndex=cc.game.groupList.indexOf(C$zut)}},x:{get:function(){return this._trs[0]},set:function(C$zut){var C$zue=this._trs;C$zut!==C$zue[0]&&(C$zue[0]=C$zut,this.setLocalDirty(C$zuh.ALL_POSITION),1&this._eventMask&&this.emit(C$zuc.POSITION_CHANGED))}},y:{get:function(){return this._trs[1]},set:function(C$zut){var C$zue=this._trs;C$zut!==C$zue[1]&&(C$zue[1]=C$zut,this.setLocalDirty(C$zuh.ALL_POSITION),1&this._eventMask&&this.emit(C$zuc.POSITION_CHANGED))}},z:{get:function(){return this._trs[2]},set:function(C$zut){var C$zue=this._trs;C$zut!==C$zue[2]&&(C$zue[2]=C$zut,this.setLocalDirty(C$zuh.ALL_POSITION),this._renderFlag|=C$zun.FLAG_WORLD_TRANSFORM,1&this._eventMask&&this.emit(C$zuc.POSITION_CHANGED))}},rotation:{get:function(){return cc.warn("`cc.Node.rotation` is deprecated since v2.1.0, please use `-angle` instead. (`this.node.rotation` -> `-this.node.angle`)"),-this.angle},set:function(C$zut){cc.warn("`cc.Node.rotation` is deprecated since v2.1.0, please set `-angle` instead. (`this.node.rotation = x` -> `this.node.angle = -x`)"),this.angle=-C$zut}},angle:{get:function(){return this._eulerAngles.z},set:function(C$zut){C$zup.Vec3.set(this._eulerAngles,0,0,C$zut),C$zup.Trs.fromAngleZ(this._trs,C$zut),this.setLocalDirty(C$zuh.ALL_ROTATION),4&this._eventMask&&this.emit(C$zuc.ROTATION_CHANGED)}},rotationX:{get:function(){return cc.warn("`cc.Node.rotationX` is deprecated since v2.1.0, please use `eulerAngles.x` instead. (`this.node.rotationX` -> `this.node.eulerAngles.x`)"),this._eulerAngles.x},set:function(C$zut){cc.warn("`cc.Node.rotationX` is deprecated since v2.1.0, please set `eulerAngles` instead. (`this.node.rotationX = x` -> `this.node.is3DNode = true; this.node.eulerAngles = cc.v3(x, 0, 0)`"),this._eulerAngles.x!==C$zut&&(this._eulerAngles.x=C$zut,this._eulerAngles.x===this._eulerAngles.y?C$zup.Trs.fromAngleZ(this._trs,-C$zut):C$zup.Trs.fromEulerNumber(this._trs,C$zut,this._eulerAngles.y,0),this.setLocalDirty(C$zuh.ALL_ROTATION),4&this._eventMask&&this.emit(C$zuc.ROTATION_CHANGED))}},rotationY:{get:function(){return cc.warn("`cc.Node.rotationY` is deprecated since v2.1.0, please use `eulerAngles.y` instead. (`this.node.rotationY` -> `this.node.eulerAngles.y`)"),this._eulerAngles.y},set:function(C$zut){cc.warn("`cc.Node.rotationY` is deprecated since v2.1.0, please set `eulerAngles` instead. (`this.node.rotationY = y` -> `this.node.is3DNode = true; this.node.eulerAngles = cc.v3(0, y, 0)`"),this._eulerAngles.y!==C$zut&&(this._eulerAngles.y=C$zut,this._eulerAngles.x===this._eulerAngles.y?C$zup.Trs.fromAngleZ(this._trs,-C$zut):C$zup.Trs.fromEulerNumber(this._trs,this._eulerAngles.x,C$zut,0),this.setLocalDirty(C$zuh.ALL_ROTATION),4&this._eventMask&&this.emit(C$zuc.ROTATION_CHANGED))}},eulerAngles:{get:function(){return C$zup.Trs.toEuler(this._eulerAngles,this._trs)},set:function(C$zut){C$zup.Trs.fromEuler(this._trs,C$zut),this.setLocalDirty(C$zuh.ALL_ROTATION),this._renderFlag|=C$zun.FLAG_TRANSFORM,4&this._eventMask&&this.emit(C$zuc.ROTATION_CHANGED)}},quat:{get:function(){var C$zut=this._trs;return new C$zup.Quat(C$zut[3],C$zut[4],C$zut[5],C$zut[6])},set:function(C$zut){this.setRotation(C$zut)}},scale:{get:function(){return this._trs[7]},set:function(C$zut){this.setScale(C$zut)}},scaleX:{get:function(){return this._trs[7]},set:function(C$zut){this._trs[7]!==C$zut&&(this._trs[7]=C$zut,this.setLocalDirty(C$zuh.ALL_SCALE),2&this._eventMask&&this.emit(C$zuc.SCALE_CHANGED))}},scaleY:{get:function(){return this._trs[8]},set:function(C$zut){this._trs[8]!==C$zut&&(this._trs[8]=C$zut,this.setLocalDirty(C$zuh.ALL_SCALE),2&this._eventMask&&this.emit(C$zuc.SCALE_CHANGED))}},scaleZ:{get:function(){return this._trs[9]},set:function(C$zut){this._trs[9]!==C$zut&&(this._trs[9]=C$zut,this.setLocalDirty(C$zuh.ALL_SCALE),this._renderFlag|=C$zun.FLAG_TRANSFORM,2&this._eventMask&&this.emit(C$zuc.SCALE_CHANGED))}},skewX:{get:function(){return this._skewX},set:function(C$zut){C$zuwz(C$zut),this._skewX=C$zut,this.setLocalDirty(C$zuh.SKEW)}},skewY:{get:function(){return this._skewY},set:function(C$zut){C$zuwz(C$zut),this._skewY=C$zut,this.setLocalDirty(C$zuh.SKEW)}},opacity:{get:function(){return this._opacity},set:function(C$zut){C$zut=cc.misc.clampf(C$zut,0,255),this._opacity!==C$zut&&(this._opacity=C$zut,this._renderFlag|=C$zun.FLAG_OPACITY_COLOR)},range:[0,255]},color:{get:function(){return this._color.clone()},set:function(C$zut){this._color.equals(C$zut)||(this._color.set(C$zut),this._renderFlag|=C$zun.FLAG_COLOR,32&this._eventMask&&this.emit(C$zuc.COLOR_CHANGED,C$zut))}},anchorX:{get:function(){return this._anchorPoint.x},set:function(C$zut){var C$zue=this._anchorPoint;C$zue.x!==C$zut&&(C$zue.x=C$zut,16&this._eventMask&&this.emit(C$zuc.ANCHOR_CHANGED))}},anchorY:{get:function(){return this._anchorPoint.y},set:function(C$zut){var C$zue=this._anchorPoint;C$zue.y!==C$zut&&(C$zue.y=C$zut,16&this._eventMask&&this.emit(C$zuc.ANCHOR_CHANGED))}},width:{get:function(){return this._contentSize.width},set:function(C$zut){C$zut!==this._contentSize.width&&(this._contentSize.width=C$zut,8&this._eventMask&&this.emit(C$zuc.SIZE_CHANGED))}},height:{get:function(){return this._contentSize.height},set:function(C$zut){C$zut!==this._contentSize.height&&(this._contentSize.height=C$zut,8&this._eventMask&&this.emit(C$zuc.SIZE_CHANGED))}},zIndex:{get:function(){return this._localZOrder>>16},set:function(C$zut){C$zut>C$zud.MAX_ZINDEX?(cc.warnID(1636),C$zut=C$zud.MAX_ZINDEX):C$zut<C$zud.MIN_ZINDEX&&(cc.warnID(1637),C$zut=C$zud.MIN_ZINDEX),this.zIndex!==C$zut&&(this._localZOrder=65535&this._localZOrder|C$zut<<16,this.emit(C$zuc.SIBLING_ORDER_CHANGED),this._onSiblingIndexChanged())}},is3DNode:{get:function(){return this._is3DNode},set:function(C$zut){this._is3DNode=C$zut,this._update3DFunction()}},up:{get:function(){return C$zup.Vec3.transformQuat(C$zuV,C$zup.Vec3.UP,this.getWorldRotation(C$zuO)).clone()}},right:{get:function(){return C$zup.Vec3.transformQuat(C$zuV,C$zup.Vec3.RIGHT,this.getWorldRotation(C$zuO)).clone()}},forward:{get:function(){return C$zup.Vec3.transformQuat(C$zuV,C$zup.Vec3.FORWARD,this.getWorldRotation(C$zuO)).clone()}}},ctor:function(){this._reorderChildDirty=!1,this._widget=null,this._renderComponent=null,this._capturingListeners=null,this._bubblingListeners=null,this._touchListener=null,this._mouseListener=null,this._initDataFromPool(),this._eventMask=0,this._cullingMask=1,this._childArrivalOrder=1,this._renderFlag=C$zun.FLAG_TRANSFORM|C$zun.FLAG_OPACITY_COLOR},statics:{EventType:C$zuc,_LocalDirtyFlag:C$zuh,isNode:function(C$zut){return C$zut instanceof C$zuq&&(C$zut.constructor===C$zuq||!(C$zut instanceof cc.Scene))},BuiltinGroupIndex:C$zut},_onSiblingIndexChanged:function(){this._parent&&this._parent._delaySort()},_onPreDestroy:function(){this._onPreDestroyBase();C$zua&&cc.director.getActionManager().removeAllActionsFromTarget(this),C$zuj===this&&(C$zuj=null),(this._touchListener||this._mouseListener)&&(C$zus.removeListeners(this),this._touchListener&&(this._touchListener.owner=null,this._touchListener.mask=null,this._touchListener=null),this._mouseListener&&(this._mouseListener.owner=null,this._mouseListener.mask=null,this._mouseListener=null)),this._backDataIntoPool(),this._reorderChildDirty&&cc.director.__fastOff(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this)},_onPostActivated:function(C$zut){var C$zue=C$zua?cc.director.getActionManager():null;C$zut?(this._renderFlag|=C$zun.FLAG_WORLD_TRANSFORM,C$zue&&C$zue.resumeTarget(this),C$zus.resumeTarget(this),this._checkListenerMask()):(C$zue&&C$zue.pauseTarget(this),C$zus.pauseTarget(this))},_onHierarchyChanged:function(C$zut){this._updateOrderOfArrival(),_updateCullingMask(this),this._parent&&this._parent._delaySort(),this._renderFlag|=C$zun.FLAG_WORLD_TRANSFORM,this._onHierarchyChangedBase(C$zut),cc._widgetManager&&(cc._widgetManager._nodesOrderDirty=!0),C$zut&&this._activeInHierarchy&&this._checkListenerMask()},_update3DFunction:function(){this._is3DNode?(this._updateLocalMatrix=updateLocalMatrix3D,this._calculWorldMatrix=calculWorldMatrix3D,this._mulMat=C$zuX):(this._updateLocalMatrix=updateLocalMatrix2D,this._calculWorldMatrix=calculWorldMatrix2D,this._mulMat=mulMat2D),this._renderComponent&&this._renderComponent._on3DNodeChanged&&this._renderComponent._on3DNodeChanged(),this._renderFlag|=C$zun.FLAG_TRANSFORM,this._localMatDirty=C$zuh.ALL},_initDataFromPool:function(){this._spaceInfo||(this._spaceInfo=C$zu_.pop());var C$zut=this._spaceInfo;this._matrix=cc.mat4(C$zut.localMat),C$zup.Mat4.identity(this._matrix),this._worldMatrix=cc.mat4(C$zut.worldMat),C$zup.Mat4.identity(this._worldMatrix),this._localMatDirty=C$zuh.ALL,this._worldMatDirty=!0;C$zut=this._trs=this._spaceInfo.trs;C$zut[0]=0,C$zut[1]=0,C$zut[2]=0,C$zut[3]=0,C$zut[4]=0,C$zut[5]=0,C$zut[6]=1,C$zut[7]=1,C$zut[8]=1,C$zut[9]=1},_backDataIntoPool:function(){C$zu_.push(this._spaceInfo),this._matrix=null,this._worldMatrix=null,this._trs=null,this._spaceInfo=null},_toEuler:function(){var C$zut;this.is3DNode?C$zup.Trs.toEuler(this._eulerAngles,this._trs):(C$zut=Math.asin(this._trs[5])/C$zug*2,C$zup.Vec3.set(this._eulerAngles,0,0,C$zut))},_fromEuler:function(){this.is3DNode?C$zup.Trs.fromEuler(this._trs,this._eulerAngles):C$zup.Trs.fromAngleZ(this._trs,this._eulerAngles.z)},_upgrade_1x_to_2x:function(){this._is3DNode&&this._update3DFunction();var C$zut=this._trs;var C$zue;C$zut?(C$zue=C$zut,C$zut=this._trs=this._spaceInfo.trs,11===C$zue.length?C$zut.set(C$zue.subarray(1)):C$zut.set(C$zue)):C$zut=this._trs=this._spaceInfo.trs,void 0!==this._zIndex&&(this._localZOrder=this._zIndex<<16,this._zIndex=void 0),this._fromEuler(),0!==this._localZOrder&&(this._zIndex=(4294901760&this._localZOrder)>>16),this._color.a<255&&255===this._opacity&&(this._opacity=this._color.a,this._color.a=255)},_onBatchCreated:function(){var C$zut=this._prefab;C$zut&&C$zut.sync&&C$zut.root===this&&C$zuu.syncWithPrefab(this),this._upgrade_1x_to_2x(),this._updateOrderOfArrival(),this._cullingMask=1<<_getActualGroupIndex(this),this._activeInHierarchy||(C$zua&&cc.director.getActionManager().pauseTarget(this),C$zus.pauseTarget(this));var C$zue=this._children;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)C$zue[C$zui]._onBatchCreated();0<C$zue.length&&(this._renderFlag|=C$zun.FLAG_CHILDREN)},_onBatchRestored:function(){var C$zut;this._upgrade_1x_to_2x(),this._cullingMask=1<<_getActualGroupIndex(this),this._activeInHierarchy||((C$zut=cc.director.getActionManager())&&C$zut.pauseTarget(this),C$zus.pauseTarget(this));var C$zue=this._children;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)C$zue[C$zui]._onBatchRestored();0<C$zue.length&&(this._renderFlag|=C$zun.FLAG_CHILDREN)},_checkListenerMask:function(){var C$zut;this._touchListener?(C$zut=this._touchListener.mask=_searchComponentsInParent(this,cc.Mask),this._mouseListener&&(this._mouseListener.mask=C$zut)):this._mouseListener&&(this._mouseListener.mask=_searchComponentsInParent(this,cc.Mask))},_checknSetupSysEvent:function(C$zut){var C$zue=!1;var C$zui=!1;return-1!==C$zuU.indexOf(C$zut)?(this._touchListener||(this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,owner:this,mask:_searchComponentsInParent(this,cc.Mask),onTouchBegan:C$zuAz,onTouchMoved:C$zuDz,onTouchEnded:C$zuhz,onTouchCancelled:C$zuQz}),C$zus.addListener(this._touchListener,this),C$zue=!0),C$zui=!0):-1!==C$zuW.indexOf(C$zut)&&(this._mouseListener||(this._mouseListener=cc.EventListener.create({event:cc.EventListener.MOUSE,_previousIn:!1,owner:this,mask:_searchComponentsInParent(this,cc.Mask),onMouseDown:C$zuvz,onMouseMove:C$zuzz,onMouseUp:C$zuBz,onMouseScroll:C$zuoz}),C$zus.addListener(this._mouseListener,this),C$zue=!0),C$zui=!0),C$zue&&!this._activeInHierarchy&&cc.director.getScheduler().schedule(function(){this._activeInHierarchy||C$zus.pauseTarget(this)},this,0,0,0,!1),C$zui},on:function(C$zut,C$zue,C$zui,C$zur){if(this._checknSetupSysEvent(C$zut))return this._onDispatch(C$zut,C$zue,C$zui,C$zur);switch(C$zut){case C$zuc.POSITION_CHANGED:this._eventMask|=1;break;case C$zuc.SCALE_CHANGED:this._eventMask|=2;break;case C$zuc.ROTATION_CHANGED:this._eventMask|=4;break;case C$zuc.SIZE_CHANGED:this._eventMask|=8;break;case C$zuc.ANCHOR_CHANGED:this._eventMask|=16;break;case C$zuc.COLOR_CHANGED:this._eventMask|=32}return this._bubblingListeners||(this._bubblingListeners=new C$zuv),this._bubblingListeners.on(C$zut,C$zue,C$zui)},once:function(C$zut,C$zue,C$zui,C$zur){(this._checknSetupSysEvent(C$zut)&&C$zur?this._capturingListeners=this._capturingListeners||new C$zuv:this._bubblingListeners=this._bubblingListeners||new C$zuv).once(C$zut,C$zue,C$zui)},_onDispatch:function(C$zut,C$zue,C$zui,C$zur){var C$zun;{if("boolean"==typeof C$zui?(C$zur=C$zui,C$zui=void 0):C$zur=!!C$zur,C$zue)return C$zun=null,(C$zun=C$zur?this._capturingListeners=this._capturingListeners||new C$zuv:this._bubblingListeners=this._bubblingListeners||new C$zuv).hasEventListener(C$zut,C$zue,C$zui)||(C$zun.on(C$zut,C$zue,C$zui),C$zui&&C$zui.__eventTargets&&C$zui.__eventTargets.push(this)),C$zue;cc.errorID(6800)}},off:function(C$zut,C$zue,C$zui,C$zur){var C$zun=-1!==C$zuU.indexOf(C$zut);var C$zua=!C$zun&&-1!==C$zuW.indexOf(C$zut);if(C$zun||C$zua)this._offDispatch(C$zut,C$zue,C$zui,C$zur),C$zun?this._touchListener&&!_checkListeners(this,C$zuU)&&(C$zus.removeListener(this._touchListener),this._touchListener=null):C$zua&&this._mouseListener&&!_checkListeners(this,C$zuW)&&(C$zus.removeListener(this._mouseListener),this._mouseListener=null);else if(this._bubblingListeners)if(this._bubblingListeners.off(C$zut,C$zue,C$zui),!this._bubblingListeners.hasEventListener(C$zut))switch(C$zut){case C$zuc.POSITION_CHANGED:this._eventMask&=-2;break;case C$zuc.SCALE_CHANGED:this._eventMask&=-3;break;case C$zuc.ROTATION_CHANGED:this._eventMask&=-5;break;case C$zuc.SIZE_CHANGED:this._eventMask&=-9;break;case C$zuc.ANCHOR_CHANGED:this._eventMask&=-17;break;case C$zuc.COLOR_CHANGED:this._eventMask&=-33}},_offDispatch:function(C$zut,C$zue,C$zui,C$zur){"boolean"==typeof C$zui?(C$zur=C$zui,C$zui=void 0):C$zur=!!C$zur,C$zue?(C$zur=C$zur?this._capturingListeners:this._bubblingListeners)&&(C$zur.off(C$zut,C$zue,C$zui),C$zui&&C$zui.__eventTargets&&C$zuf.array.fastRemove(C$zui.__eventTargets,this)):(this._capturingListeners&&this._capturingListeners.removeAll(C$zut),this._bubblingListeners&&this._bubblingListeners.removeAll(C$zut))},targetOff:function(C$zut){var C$zue=this._bubblingListeners;C$zue&&(C$zue.targetOff(C$zut),1&this._eventMask&&!C$zue.hasEventListener(C$zuc.POSITION_CHANGED)&&(this._eventMask&=-2),2&this._eventMask&&!C$zue.hasEventListener(C$zuc.SCALE_CHANGED)&&(this._eventMask&=-3),4&this._eventMask&&!C$zue.hasEventListener(C$zuc.ROTATION_CHANGED)&&(this._eventMask&=-5),8&this._eventMask&&!C$zue.hasEventListener(C$zuc.SIZE_CHANGED)&&(this._eventMask&=-9),16&this._eventMask&&!C$zue.hasEventListener(C$zuc.ANCHOR_CHANGED)&&(this._eventMask&=-17),32&this._eventMask&&!C$zue.hasEventListener(C$zuc.COLOR_CHANGED)&&(this._eventMask&=-33)),this._capturingListeners&&this._capturingListeners.targetOff(C$zut),C$zut&&C$zut.__eventTargets&&C$zuf.array.fastRemove(C$zut.__eventTargets,this),this._touchListener&&!_checkListeners(this,C$zuU)&&(C$zus.removeListener(this._touchListener),this._touchListener=null),this._mouseListener&&!_checkListeners(this,C$zuW)&&(C$zus.removeListener(this._mouseListener),this._mouseListener=null)},hasEventListener:function(C$zut){var C$zue=!1;return C$zue=!(C$zue=this._bubblingListeners?this._bubblingListeners.hasEventListener(C$zut):C$zue)&&this._capturingListeners?this._capturingListeners.hasEventListener(C$zut):C$zue},emit:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this._bubblingListeners&&this._bubblingListeners.emit(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua)},dispatchEvent:function(C$zut){!function(C$zut,C$zue){var C$zui,C$zur;for(C$zue.target=C$zut,C$zuo.length=0,C$zut._getCapturingTargets(C$zue.type,C$zuo),C$zue.eventPhase=1,C$zur=C$zuo.length-1;0<=C$zur;--C$zur)if((C$zui=C$zuo[C$zur])._capturingListeners&&((C$zue.currentTarget=C$zui)._capturingListeners.emit(C$zue.type,C$zue,C$zuo),C$zue._propagationStopped))return C$zuo.length=0;if(C$zuo.length=0,C$zue.eventPhase=2,(C$zue.currentTarget=C$zut)._capturingListeners&&C$zut._capturingListeners.emit(C$zue.type,C$zue),!C$zue._propagationImmediateStopped&&C$zut._bubblingListeners&&C$zut._bubblingListeners.emit(C$zue.type,C$zue),!C$zue._propagationStopped&&C$zue.bubbles)for(C$zut._getBubblingTargets(C$zue.type,C$zuo),C$zue.eventPhase=3,C$zur=0;C$zur<C$zuo.length;++C$zur)if((C$zui=C$zuo[C$zur])._bubblingListeners&&((C$zue.currentTarget=C$zui)._bubblingListeners.emit(C$zue.type,C$zue),C$zue._propagationStopped))return C$zuo.length=0;C$zuo.length=0}(this,C$zut),C$zuo.length=0},pauseSystemEvents:function(C$zut){C$zus.pauseTarget(this,C$zut)},resumeSystemEvents:function(C$zut){C$zus.resumeTarget(this,C$zut)},_hitTest:function(C$zuh,C$zut){var C$zuu=this._contentSize.width,C$zu_=this._contentSize.height,C$zue=C$zuF,C$zui=C$zuN;var C$zud=cc.Camera.findCamera(this);if(C$zud?C$zud.getScreenToWorldPoint(C$zuh,C$zue):C$zue.set(C$zuh),this._updateWorldMatrix(),!C$zup.Mat4.invert(C$zum,this._worldMatrix))return!1;C$zup.Vec2.transformMat4(C$zui,C$zue,C$zum),C$zui.x+=this._anchorPoint.x*C$zuu,C$zui.y+=this._anchorPoint.y*C$zu_;var C$zur=!1;if(0<=C$zui.x&&0<=C$zui.y&&C$zui.x<=C$zuu&&C$zui.y<=C$zu_&&(C$zur=!0,C$zut&&C$zut.mask)){var C$zun=C$zut.mask;var C$zua=this;var C$zuf=C$zun?C$zun.length:0;for(var C$zuo=0,C$zus=0;C$zua&&C$zus<C$zuf;++C$zuo,C$zua=C$zua.parent){var C$zuc=C$zun[C$zus];if(C$zuo===C$zuc.index){if(C$zua!==C$zuc.node){C$zun.length=C$zus;break}var C$zul=C$zua.getComponent(cc.Mask);if(C$zul&&C$zul._enabled&&!C$zul._hitTest(C$zue)){C$zur=!1;break}C$zus++}else if(C$zuo>C$zuc.index){C$zun.length=C$zus;break}}}return C$zur},_getCapturingTargets:function(C$zut,C$zue){var C$zui=this.parent;for(;C$zui;)C$zui._capturingListeners&&C$zui._capturingListeners.hasEventListener(C$zut)&&C$zue.push(C$zui),C$zui=C$zui.parent},_getBubblingTargets:function(C$zut,C$zue){var C$zui=this.parent;for(;C$zui;)C$zui._bubblingListeners&&C$zui._bubblingListeners.hasEventListener(C$zut)&&C$zue.push(C$zui),C$zui=C$zui.parent},runAction:C$zua?function(C$zut){var C$zue;if(this.active)return cc.assertID(C$zut,1618),C$zue=cc.director.getActionManager(),C$zue._suppressDeprecation||(C$zue._suppressDeprecation=!0,cc.warnID(1639)),C$zue.addAction(C$zut,this,!1),C$zut}:C$zuVv,pauseAllActions:C$zua?function(){cc.director.getActionManager().pauseTarget(this)}:C$zuVv,resumeAllActions:C$zua?function(){cc.director.getActionManager().resumeTarget(this)}:C$zuVv,stopAllActions:C$zua?function(){cc.director.getActionManager().removeAllActionsFromTarget(this)}:C$zuVv,stopAction:C$zua?function(C$zut){cc.director.getActionManager().removeAction(C$zut)}:C$zuVv,stopActionByTag:C$zua?function(C$zut){C$zut!==cc.Action.TAG_INVALID?cc.director.getActionManager().removeActionByTag(C$zut,this):cc.logID(1612)}:C$zuVv,getActionByTag:C$zua?function(C$zut){return C$zut===cc.Action.TAG_INVALID?(cc.logID(1613),null):cc.director.getActionManager().getActionByTag(C$zut,this)}:function(){return null},getNumberOfRunningActions:C$zua?function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this)}:function(){return 0},getPosition:function(C$zut){return C$zut=C$zut||new C$zup.Vec3,C$zup.Trs.toPosition(C$zut,this._trs)},setPosition:function(C$zut,C$zue,C$zui){var C$zur;C$zui=void 0===C$zue?(C$zur=C$zut.x,C$zue=C$zut.y,C$zut.z||0):(C$zur=C$zut,C$zui||0);C$zut=this._trs;C$zut[0]===C$zur&&C$zut[1]===C$zue&&C$zut[2]===C$zui||(C$zut[0]=C$zur,C$zut[1]=C$zue,C$zut[2]=C$zui,this.setLocalDirty(C$zuh.ALL_POSITION),this._renderFlag|=C$zun.FLAG_WORLD_TRANSFORM,1&this._eventMask&&this.emit(C$zuc.POSITION_CHANGED))},getScale:function(C$zut){return void 0!==C$zut?C$zup.Trs.toScale(C$zut,this._trs):(cc.errorID(1400,"cc.Node.getScale","cc.Node.scale or cc.Node.getScale(cc.Vec3)"),this._trs[7])},setScale:function(C$zut,C$zue,C$zui){C$zut&&"number"!=typeof C$zut?(C$zue=C$zut.y,C$zui=void 0===C$zut.z?1:C$zut.z,C$zut=C$zut.x):void 0!==C$zut&&void 0===C$zue?C$zui=C$zue=C$zut:void 0===C$zui&&(C$zui=1);var C$zur=this._trs;C$zur[7]===C$zut&&C$zur[8]===C$zue&&C$zur[9]===C$zui||(C$zur[7]=C$zut,C$zur[8]=C$zue,C$zur[9]=C$zui,this.setLocalDirty(C$zuh.ALL_SCALE),this._renderFlag|=C$zun.FLAG_TRANSFORM,2&this._eventMask&&this.emit(C$zuc.SCALE_CHANGED))},getRotation:function(C$zut){return C$zut instanceof C$zup.Quat?C$zup.Trs.toRotation(C$zut,this._trs):(cc.warn("`cc.Node.getRotation()` is deprecated since v2.1.0, please use `-cc.Node.angle` instead. (`this.node.getRotation()` -> `-this.node.angle`)"),-this.angle)},setRotation:function(C$zut,C$zue,C$zui,C$zur){var C$zun;"number"==typeof C$zut&&void 0===C$zue?(cc.warn("`cc.Node.setRotation(degree)` is deprecated since v2.1.0, please set `-cc.Node.angle` instead. (`this.node.setRotation(x)` -> `this.node.angle = -x`)"),this.angle=-C$zut):(C$zun=C$zut,void 0===C$zue&&(C$zun=C$zut.x,C$zue=C$zut.y,C$zui=C$zut.z,C$zur=C$zut.w),(C$zut=this._trs)[3]===C$zun&&C$zut[4]===C$zue&&C$zut[5]===C$zui&&C$zut[6]===C$zur||(C$zut[3]=C$zun,C$zut[4]=C$zue,C$zut[5]=C$zui,C$zut[6]=C$zur,this.setLocalDirty(C$zuh.ALL_ROTATION),4&this._eventMask&&this.emit(C$zuc.ROTATION_CHANGED)))},getContentSize:function(){return cc.size(this._contentSize.width,this._contentSize.height)},setContentSize:function(C$zut,C$zue){var C$zui=this._contentSize;if(void 0===C$zue){if(C$zut.width===C$zui.width&&C$zut.height===C$zui.height)return;C$zui.width=C$zut.width,C$zui.height=C$zut.height}else{if(C$zut===C$zui.width&&C$zue===C$zui.height)return;C$zui.width=C$zut,C$zui.height=C$zue}8&this._eventMask&&this.emit(C$zuc.SIZE_CHANGED)},getAnchorPoint:function(){return cc.v2(this._anchorPoint)},setAnchorPoint:function(C$zut,C$zue){var C$zui=this._anchorPoint;if(void 0===C$zue){if(C$zut.x===C$zui.x&&C$zut.y===C$zui.y)return;C$zui.x=C$zut.x,C$zui.y=C$zut.y}else{if(C$zut===C$zui.x&&C$zue===C$zui.y)return;C$zui.x=C$zut,C$zui.y=C$zue}this.setLocalDirty(C$zuh.ALL_POSITION),16&this._eventMask&&this.emit(C$zuc.ANCHOR_CHANGED)},_invTransformPoint:function(C$zut,C$zue){this._parent?this._parent._invTransformPoint(C$zut,C$zue):C$zup.Vec3.copy(C$zut,C$zue);C$zue=this._trs;return C$zup.Trs.toPosition(C$zux,C$zue),C$zup.Vec3.sub(C$zut,C$zut,C$zux),C$zup.Trs.toRotation(C$zuS,C$zue),C$zup.Quat.conjugate(C$zuT,C$zuS),C$zup.Vec3.transformQuat(C$zut,C$zut,C$zuT),C$zup.Trs.toScale(C$zux,C$zue),C$zup.Vec3.inverseSafe(C$zuA,C$zux),C$zup.Vec3.mul(C$zut,C$zut,C$zuA),C$zut},getWorldPosition:function(C$zut){C$zup.Trs.toPosition(C$zut,this._trs);var C$zue=this._parent;var C$zui;for(;C$zue;)C$zui=C$zue._trs,C$zup.Trs.toScale(C$zub,C$zui),C$zup.Vec3.mul(C$zut,C$zut,C$zub),C$zup.Trs.toRotation(C$zuC,C$zui),C$zup.Vec3.transformQuat(C$zut,C$zut,C$zuC),C$zup.Trs.toPosition(C$zub,C$zui),C$zup.Vec3.add(C$zut,C$zut,C$zub),C$zue=C$zue._parent;return C$zut},setWorldPosition:function(C$zut){var C$zue=this._trs;this._parent?this._parent._invTransformPoint(C$zuw,C$zut):C$zup.Vec3.copy(C$zuw,C$zut),C$zup.Trs.fromPosition(C$zue,C$zuw),this.setLocalDirty(C$zuh.ALL_POSITION),1&this._eventMask&&this.emit(C$zuc.POSITION_CHANGED)},getWorldRotation:function(C$zut){C$zup.Trs.toRotation(C$zuk,this._trs),C$zup.Quat.copy(C$zut,C$zuk);var C$zue=this._parent;for(;C$zue;)C$zup.Trs.toRotation(C$zuk,C$zue._trs),C$zup.Quat.mul(C$zut,C$zuk,C$zut),C$zue=C$zue._parent;return C$zut},setWorldRotation:function(C$zut){this._parent?(this._parent.getWorldRotation(C$zuz),C$zup.Quat.conjugate(C$zuz,C$zuz),C$zup.Quat.mul(C$zuz,C$zuz,C$zut)):C$zup.Quat.copy(C$zuz,C$zut),C$zup.Trs.fromRotation(this._trs,C$zuz),this.setLocalDirty(C$zuh.ALL_ROTATION)},getWorldScale:function(C$zut){C$zup.Trs.toScale(C$zuE,this._trs),C$zup.Vec3.copy(C$zut,C$zuE);var C$zue=this._parent;for(;C$zue;)C$zup.Trs.toScale(C$zuE,C$zue._trs),C$zup.Vec3.mul(C$zut,C$zut,C$zuE),C$zue=C$zue._parent;return C$zut},setWorldScale:function(C$zut){this._parent?(this._parent.getWorldScale(C$zuP),C$zup.Vec3.div(C$zuP,C$zut,C$zuP)):C$zup.Vec3.copy(C$zuP,C$zut),C$zup.Trs.fromScale(this._trs,C$zuP),this.setLocalDirty(C$zuh.ALL_SCALE)},getWorldRT:function(C$zut){var C$zue=C$zuM;var C$zui=C$zuI;var C$zur=this._trs;C$zup.Trs.toPosition(C$zue,C$zur),C$zup.Trs.toRotation(C$zui,C$zur);var C$zun=this._parent;for(;C$zun;)C$zur=C$zun._trs,C$zup.Trs.toScale(C$zuR,C$zur),C$zup.Vec3.mul(C$zue,C$zue,C$zuR),C$zup.Trs.toRotation(C$zuB,C$zur),C$zup.Vec3.transformQuat(C$zue,C$zue,C$zuB),C$zup.Trs.toPosition(C$zuR,C$zur),C$zup.Vec3.add(C$zue,C$zue,C$zuR),C$zup.Quat.mul(C$zui,C$zuB,C$zui),C$zun=C$zun._parent;return C$zup.Mat4.fromRT(C$zut,C$zui,C$zue),C$zut},lookAt:function(C$zut,C$zue){this.getWorldPosition(C$zuD),C$zup.Vec3.sub(C$zuD,C$zuD,C$zut),C$zup.Vec3.normalize(C$zuD,C$zuD),C$zup.Quat.fromViewUp(C$zuL,C$zuD,C$zue),this.setWorldRotation(C$zuL)},_updateLocalMatrix:updateLocalMatrix2D,_calculWorldMatrix:function(){this._localMatDirty&C$zuh.TRSS&&this._updateLocalMatrix();var C$zut=this._parent;C$zut?this._mulMat(this._worldMatrix,C$zut._worldMatrix,this._matrix):C$zup.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1},_mulMat:mulMat2D,_updateWorldMatrix:function(){if(this._parent&&this._parent._updateWorldMatrix(),this._worldMatDirty){this._calculWorldMatrix();var C$zut=this._children;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)C$zut[C$zue]._worldMatDirty=!0}},setLocalDirty:function(C$zut){this._localMatDirty|=C$zut,this._worldMatDirty=!0,C$zut===C$zuh.ALL_POSITION||C$zut===C$zuh.POSITION?this._renderFlag|=C$zun.FLAG_WORLD_TRANSFORM:this._renderFlag|=C$zun.FLAG_TRANSFORM},setWorldDirty:function(){this._worldMatDirty=!0},getLocalMatrix:function(C$zut){return this._updateLocalMatrix(),C$zup.Mat4.copy(C$zut,this._matrix)},getWorldMatrix:function(C$zut){return this._updateWorldMatrix(),C$zup.Mat4.copy(C$zut,this._worldMatrix)},convertToNodeSpaceAR:function(C$zut,C$zue){return this._updateWorldMatrix(),C$zup.Mat4.invert(C$zum,this._worldMatrix),C$zut instanceof cc.Vec2?(C$zue=C$zue||new cc.Vec2,C$zup.Vec2.transformMat4(C$zue,C$zut,C$zum)):(C$zue=C$zue||new cc.Vec3,C$zup.Vec3.transformMat4(C$zue,C$zut,C$zum))},convertToWorldSpaceAR:function(C$zut,C$zue){return this._updateWorldMatrix(),C$zut instanceof cc.Vec2?(C$zue=C$zue||new cc.Vec2,C$zup.Vec2.transformMat4(C$zue,C$zut,this._worldMatrix)):(C$zue=C$zue||new cc.Vec3,C$zup.Vec3.transformMat4(C$zue,C$zut,this._worldMatrix))},convertToNodeSpace:function(C$zut){this._updateWorldMatrix(),C$zup.Mat4.invert(C$zum,this._worldMatrix);var C$zue=new cc.Vec2;return C$zup.Vec2.transformMat4(C$zue,C$zut,C$zum),C$zue.x+=this._anchorPoint.x*this._contentSize.width,C$zue.y+=this._anchorPoint.y*this._contentSize.height,C$zue},convertToWorldSpace:function(C$zut){this._updateWorldMatrix();C$zut=new cc.Vec2(C$zut.x-this._anchorPoint.x*this._contentSize.width,C$zut.y-this._anchorPoint.y*this._contentSize.height);return C$zup.Vec2.transformMat4(C$zut,C$zut,this._worldMatrix)},getNodeToParentTransform:function(C$zut){C$zut=C$zut||C$zui.identity(),this._updateLocalMatrix();var C$zue=this._contentSize;return C$zuG.x=-this._anchorPoint.x*C$zue.width,C$zuG.y=-this._anchorPoint.y*C$zue.height,C$zup.Mat4.copy(C$zum,this._matrix),C$zup.Mat4.transform(C$zum,C$zum,C$zuG),C$zui.fromMat4(C$zut,C$zum)},getNodeToParentTransformAR:function(C$zut){return C$zut=C$zut||C$zui.identity(),this._updateLocalMatrix(),C$zui.fromMat4(C$zut,this._matrix)},getNodeToWorldTransform:function(C$zut){C$zut=C$zut||C$zui.identity(),this._updateWorldMatrix();var C$zue=this._contentSize;return C$zuG.x=-this._anchorPoint.x*C$zue.width,C$zuG.y=-this._anchorPoint.y*C$zue.height,C$zup.Mat4.copy(C$zum,this._worldMatrix),C$zup.Mat4.transform(C$zum,C$zum,C$zuG),C$zui.fromMat4(C$zut,C$zum)},getNodeToWorldTransformAR:function(C$zut){return C$zut=C$zut||C$zui.identity(),this._updateWorldMatrix(),C$zui.fromMat4(C$zut,this._worldMatrix)},getParentToNodeTransform:function(C$zut){return C$zut=C$zut||C$zui.identity(),this._updateLocalMatrix(),C$zup.Mat4.invert(C$zum,this._matrix),C$zui.fromMat4(C$zut,C$zum)},getWorldToNodeTransform:function(C$zut){return C$zut=C$zut||C$zui.identity(),this._updateWorldMatrix(),C$zup.Mat4.invert(C$zum,this._worldMatrix),C$zui.fromMat4(C$zut,C$zum)},convertTouchToNodeSpace:function(C$zut){return this.convertToNodeSpace(C$zut.getLocation())},convertTouchToNodeSpaceAR:function(C$zut){return this.convertToNodeSpaceAR(C$zut.getLocation())},getBoundingBox:function(){this._updateLocalMatrix();var C$zut=this._contentSize.width;var C$zue=this._contentSize.height;C$zut=cc.rect(-this._anchorPoint.x*C$zut,-this._anchorPoint.y*C$zue,C$zut,C$zue);return C$zut.transformMat4(C$zut,this._matrix)},getBoundingBoxToWorld:function(){return this._parent?(this._parent._updateWorldMatrix(),this._getBoundingBoxTo()):this.getBoundingBox()},_getBoundingBoxTo:function(){var C$zut=this._contentSize.width;var C$zue=this._contentSize.height;var C$zui=cc.rect(-this._anchorPoint.x*C$zut,-this._anchorPoint.y*C$zue,C$zut,C$zue);if(this._calculWorldMatrix(),C$zui.transformMat4(C$zui,this._worldMatrix),!this._children)return C$zui;var C$zur=this._children;for(var C$zun=0;C$zun<C$zur.length;C$zun++){var C$zua=C$zur[C$zun];C$zua&&C$zua.active&&((C$zua=C$zua._getBoundingBoxTo())&&C$zui.union(C$zui,C$zua))}return C$zui},_updateOrderOfArrival:function(){var C$zut=this._parent?++this._parent._childArrivalOrder:0;this._localZOrder=4294901760&this._localZOrder|C$zut,this.emit(C$zuc.SIBLING_ORDER_CHANGED)},addChild:function(C$zut,C$zue,C$zui){cc.assertID(C$zut,1606),cc.assertID(null===C$zut._parent,1605),C$zut.parent=this,void 0!==C$zue&&(C$zut.zIndex=C$zue),void 0!==C$zui&&(C$zut.name=C$zui)},cleanup:function(){C$zua&&cc.director.getActionManager().removeAllActionsFromTarget(this),C$zus.removeListeners(this);var C$zut,C$zue,C$zui=this._children.length;for(C$zut=0;C$zut<C$zui;++C$zut)(C$zue=this._children[C$zut])&&C$zue.cleanup()},sortAllChildren:function(){if(this._reorderChildDirty){this._reorderChildDirty=!1;var C$zut=this._children;this._childArrivalOrder=1;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)(C$zun=C$zut[C$zue])._updateOrderOfArrival();if(C$zus._setDirtyForNode(this),1<C$zut.length){var C$zur,C$zun;for(var C$zua=1,C$zuo=C$zut.length;C$zua<C$zuo;C$zua++){for(C$zun=C$zut[C$zua],C$zur=C$zua-1;0<=C$zur&&C$zun._localZOrder<C$zut[C$zur]._localZOrder;)C$zut[C$zur+1]=C$zut[C$zur],C$zur--;C$zut[C$zur+1]=C$zun}this.emit(C$zuc.CHILD_REORDER,this)}cc.director.__fastOff(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this)}},_delaySort:function(){this._reorderChildDirty||(this._reorderChildDirty=!0,cc.director.__fastOn(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this))},_restoreProperties:!1,onRestore:!1};var C$zuq=cc.Class(C$zul);C$zut=C$zuq.prototype;C$zuf.getset(C$zut,"position",C$zut.getPosition,C$zut.setPosition,!1,!0),cc.Node=C$zue.exports=C$zuq},{"./event-manager":113,"./event/event":116,"./event/event-target":115,"./platform/CCMacro":194,"./platform/js":209,"./renderer/render-flow":221,"./utils/affine-transform":254,"./utils/base-node":255,"./utils/prefab-helper":267,"./utils/trans-pool":273,"./value-types":279}],31:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./CCNode");var C$zun=C$zut("./renderer/render-flow");cc.Object.Flags.HideInHierarchy;var C$zua=C$zur._LocalDirtyFlag;C$zut=cc.Class({name:"cc.PrivateNode",extends:C$zur,properties:{x:{get:function(){return this._originPos.x},set:function(C$zut){var C$zue=this._originPos;C$zut!==C$zue.x&&(C$zue.x=C$zut,this._posDirty(!0))},override:!0},y:{get:function(){return this._originPos.y},set:function(C$zut){var C$zue=this._originPos;C$zut!==C$zue.y&&(C$zue.y=C$zut,this._posDirty(!0))},override:!0},zIndex:{get:function(){return cc.macro.MIN_ZINDEX},set:function(){cc.warnID(1638)},override:!0},showInEditor:{default:!1,editorOnly:!0,override:!0}},ctor:function(C$zut){this._localZOrder=cc.macro.MIN_ZINDEX<<16,this._originPos=cc.v2()},_posDirty:function(C$zut){this.setLocalDirty(C$zua.POSITION),this._renderFlag|=C$zun.FLAG_TRANSFORM,!0===C$zut&&1&this._eventMask&&this.emit(C$zur.EventType.POSITION_CHANGED)},_updateLocalMatrix:function(){var C$zut;this._localMatDirty&&((C$zut=this.parent)&&(this._trs[0]=this._originPos.x-(C$zut._anchorPoint.x-.5)*C$zut._contentSize.width,this._trs[1]=this._originPos.y-(C$zut._anchorPoint.y-.5)*C$zut._contentSize.height),this._super())},getPosition:function(){return new cc.Vec2(this._originPos)},setPosition:function(C$zut,C$zue){void 0===C$zue&&(C$zue=(C$zut=C$zut.x).y);var C$zui=this._originPos;C$zui.x===C$zut&&C$zui.y===C$zue||(C$zui.x=C$zut,C$zui.y=C$zue,this._posDirty(!0))},setParent:function(C$zut){var C$zue=this._parent;this._super(C$zut),C$zue!==C$zut&&(C$zue&&C$zue.off(C$zur.EventType.ANCHOR_CHANGED,this._posDirty,this),C$zut&&C$zut.on(C$zur.EventType.ANCHOR_CHANGED,this._posDirty,this))},_updateOrderOfArrival:function(){}});cc.js.getset(C$zut.prototype,"parent",C$zut.prototype.getParent,C$zut.prototype.setParent),cc.js.getset(C$zut.prototype,"position",C$zut.prototype.getPosition,C$zut.prototype.setPosition),cc.PrivateNode=C$zue.exports=C$zut},{"./CCNode":30,"./renderer/render-flow":221}],32:[function(C$zut,C$zue,C$zui){"use strict";cc.Scene=cc.Class({name:"cc.Scene",extends:C$zut("./CCNode"),properties:{_is3DNode:{default:!0,override:!0},autoReleaseAssets:{default:void 0,type:cc.Boolean}},ctor:function(){this._anchorPoint.x=0,this._anchorPoint.y=0,this._activeInHierarchy=!1,this._inited=!cc.game._isCloning,this.dependAssets=null},destroy:function(){if(cc.Object.prototype.destroy.call(this)){var C$zut=this._children;for(var C$zue=0;C$zue<C$zut.length;++C$zue)C$zut[C$zue].active=!1}this._active=!1,this._activeInHierarchy=!1},_onHierarchyChanged:function(){},_instantiate:null,_load:function(){this._inited||(this._onBatchCreated(),this._inited=!0)},_activate:function(C$zut){C$zut=!1!==C$zut,cc.director._nodeActivator.activateNode(this,C$zut)}}),C$zue.exports=cc.Scene},{"./CCNode":30}],33:[function(C$zut,C$zur,C$zun){"use strict";var C$zue=C$zut("./platform/js");C$zut=C$zut("./platform/id-generater");var C$zuc=new C$zut("Scheduler");function C$zufy(C$zut,C$zue,C$zui,C$zur){this.target=C$zut,this.priority=C$zue,this.paused=C$zui,this.markedForDeletion=C$zur}var C$zua=[];C$zufy.get=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zua.pop();return C$zun?(C$zun.target=C$zut,C$zun.priority=C$zue,C$zun.paused=C$zui,C$zun.markedForDeletion=C$zur):C$zun=new C$zufy(C$zut,C$zue,C$zui,C$zur),C$zun},C$zufy.put=function(C$zut){C$zua.length<20&&(C$zut.target=null,C$zua.push(C$zut))};function C$zuPy(C$zut,C$zue,C$zui,C$zur){this.list=C$zut,this.entry=C$zue,this.target=C$zui,this.callback=C$zur}var C$zuo=[];C$zuPy.get=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zuo.pop();return C$zun?(C$zun.list=C$zut,C$zun.entry=C$zue,C$zun.target=C$zui,C$zun.callback=C$zur):C$zun=new C$zuPy(C$zut,C$zue,C$zui,C$zur),C$zun},C$zuPy.put=function(C$zut){C$zuo.length<20&&(C$zut.list=C$zut.entry=C$zut.target=C$zut.callback=null,C$zuo.push(C$zut))};function C$zury(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this.timers=C$zut,this.target=C$zue,this.timerIndex=C$zui,this.currentTimer=C$zur,this.currentTimerSalvaged=C$zun,this.paused=C$zua}var C$zus=[];function CallbackTimer(){this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null,this._callback=null}C$zury.get=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=C$zus.pop();return C$zuo?(C$zuo.timers=C$zut,C$zuo.target=C$zue,C$zuo.timerIndex=C$zui,C$zuo.currentTimer=C$zur,C$zuo.currentTimerSalvaged=C$zun,C$zuo.paused=C$zua):C$zuo=new C$zury(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua),C$zuo},C$zury.put=function(C$zut){C$zus.length<20&&(C$zut.timers=C$zut.target=C$zut.currentTimer=null,C$zus.push(C$zut))};C$zut=CallbackTimer.prototype;C$zut.initWithCallback=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){return this._lock=!1,this._scheduler=C$zut,this._target=C$zui,this._callback=C$zue,this._elapsed=-1,this._interval=C$zur,this._delay=C$zua,this._useDelay=0<this._delay,this._repeat=C$zun,this._runForever=this._repeat===cc.macro.REPEAT_FOREVER,!0},C$zut.getInterval=function(){return this._interval},C$zut.setInterval=function(C$zut){this._interval=C$zut},C$zut.update=function(C$zut){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=C$zut,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},C$zut.getCallback=function(){return this._callback},C$zut.trigger=function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)},C$zut.cancel=function(){this._scheduler.unschedule(this._callback,this._target)};var C$zui=[];CallbackTimer.get=function(){return C$zui.pop()||new CallbackTimer},CallbackTimer.put=function(C$zut){C$zui.length<20&&!C$zut._lock&&(C$zut._scheduler=C$zut._target=C$zut._callback=null,C$zui.push(C$zut))},cc.Scheduler=function(){this._timeScale=1,this._updatesNegList=[],this._updates0List=[],this._updatesPosList=[],this._hashForUpdates=C$zue.createMap(!0),this._hashForTimers=C$zue.createMap(!0),this._currentTarget=null,this._currentTargetSalvaged=!1,this._updateHashLocked=!1,this._arrayForTimers=[]},cc.Scheduler.prototype={constructor:cc.Scheduler,_removeHashElement:function(C$zut){delete this._hashForTimers[C$zut.target._id];var C$zue=this._arrayForTimers;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui]===C$zut){C$zue.splice(C$zui,1);break}C$zury.put(C$zut)},_removeUpdateFromHash:function(C$zut){C$zut=C$zut.target._id;var C$zue=this._hashForUpdates[C$zut];if(C$zue){var C$zui=C$zue.list,C$zur=C$zue.entry;for(var C$zun=0,C$zua=C$zui.length;C$zun<C$zua;C$zun++)if(C$zui[C$zun]===C$zur){C$zui.splice(C$zun,1);break}delete this._hashForUpdates[C$zut],C$zufy.put(C$zur),C$zuPy.put(C$zue)}},_priorityIn:function(C$zut,C$zue,C$zui){for(var C$zur=0;C$zur<C$zut.length;C$zur++)if(C$zui<C$zut[C$zur].priority)return void C$zut.splice(C$zur,0,C$zue);C$zut.push(C$zue)},_appendIn:function(C$zut,C$zue){C$zut.push(C$zue)},enableForTarget:function(C$zut){C$zut._id||(C$zut.__instanceId?cc.warnID(1513):C$zut._id=C$zuc.getNewId())},setTimeScale:function(C$zut){this._timeScale=C$zut},getTimeScale:function(){return this._timeScale},update:function(C$zut){var C$zue,C$zui,C$zur,C$zun;for(this._updateHashLocked=!0,1!==this._timeScale&&(C$zut*=this._timeScale),C$zue=0,C$zur=(C$zui=this._updatesNegList).length;C$zue<C$zur;C$zue++)(C$zun=C$zui[C$zue]).paused||C$zun.markedForDeletion||C$zun.target.update(C$zut);for(C$zue=0,C$zur=(C$zui=this._updates0List).length;C$zue<C$zur;C$zue++)(C$zun=C$zui[C$zue]).paused||C$zun.markedForDeletion||C$zun.target.update(C$zut);for(C$zue=0,C$zur=(C$zui=this._updatesPosList).length;C$zue<C$zur;C$zue++)(C$zun=C$zui[C$zue]).paused||C$zun.markedForDeletion||C$zun.target.update(C$zut);var C$zua,C$zuo=this._arrayForTimers;for(C$zue=0;C$zue<C$zuo.length;C$zue++){if(C$zua=C$zuo[C$zue],this._currentTarget=C$zua,this._currentTargetSalvaged=!1,!C$zua.paused)for(C$zua.timerIndex=0;C$zua.timerIndex<C$zua.timers.length;++C$zua.timerIndex)C$zua.currentTimer=C$zua.timers[C$zua.timerIndex],C$zua.currentTimerSalvaged=!1,C$zua.currentTimer.update(C$zut),C$zua.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&(this._removeHashElement(this._currentTarget),--C$zue)}for(C$zue=0,C$zui=this._updatesNegList;C$zue<C$zui.length;)(C$zun=C$zui[C$zue]).markedForDeletion?this._removeUpdateFromHash(C$zun):C$zue++;for(C$zue=0,C$zui=this._updates0List;C$zue<C$zui.length;)(C$zun=C$zui[C$zue]).markedForDeletion?this._removeUpdateFromHash(C$zun):C$zue++;for(C$zue=0,C$zui=this._updatesPosList;C$zue<C$zui.length;)(C$zun=C$zui[C$zue]).markedForDeletion?this._removeUpdateFromHash(C$zun):C$zue++;this._updateHashLocked=!1,this._currentTarget=null},schedule:function(C$zut,C$zue,C$zui,C$zur,C$zul,C$zun){"function"!=typeof C$zut&&(C$zua=C$zut,C$zut=C$zue,C$zue=C$zua),4!==arguments.length&&5!==arguments.length||(C$zun=!!C$zur,C$zur=cc.macro.REPEAT_FOREVER,C$zul=0),cc.assertID(C$zue,1502);var C$zua=C$zue._id;C$zua||(C$zue.__instanceId?(cc.warnID(1513),C$zua=C$zue._id=C$zue.__instanceId):cc.errorID(1510));var C$zuo=this._hashForTimers[C$zua];var C$zus,C$zuc;if(C$zuo?C$zuo.paused!==C$zun&&cc.warnID(1511):(C$zuo=C$zury.get(null,C$zue,0,null,null,C$zun),this._arrayForTimers.push(C$zuo),this._hashForTimers[C$zua]=C$zuo),null==C$zuo.timers)C$zuo.timers=[];else for(C$zuc=0;C$zuc<C$zuo.timers.length;++C$zuc)if((C$zus=C$zuo.timers[C$zuc])&&C$zut===C$zus._callback)return cc.logID(1507,C$zus.getInterval(),C$zui),void(C$zus._interval=C$zui);(C$zus=CallbackTimer.get()).initWithCallback(this,C$zut,C$zue,C$zui,C$zur,C$zul),C$zuo.timers.push(C$zus),this._currentTarget===C$zuo&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)},scheduleUpdate:function(C$zut,C$zue,C$zui){var C$zur=C$zut._id;C$zur||(C$zut.__instanceId?(cc.warnID(1513),C$zur=C$zut._id=C$zut.__instanceId):cc.errorID(1510));var C$zun=this._hashForUpdates[C$zur];if(C$zun&&C$zun.entry){if(C$zun.entry.priority===C$zue)return C$zun.entry.markedForDeletion=!1,void(C$zun.entry.paused=C$zui);if(this._updateHashLocked)return cc.logID(1506),C$zun.entry.markedForDeletion=!1,void(C$zun.entry.paused=C$zui);this.unscheduleUpdate(C$zut)}C$zun=C$zufy.get(C$zut,C$zue,C$zui,!1);var C$zua;0===C$zue?(C$zua=this._updates0List,this._appendIn(C$zua,C$zun)):(C$zua=C$zue<0?this._updatesNegList:this._updatesPosList,this._priorityIn(C$zua,C$zun,C$zue)),this._hashForUpdates[C$zur]=C$zuPy.get(C$zua,C$zun,C$zut,null)},unschedule:function(C$zut,C$zue){if(C$zue&&C$zut){var C$zui=C$zue._id;C$zui||(C$zue.__instanceId?(cc.warnID(1513),C$zui=C$zue._id=C$zue.__instanceId):cc.errorID(1510));var C$zur=this._hashForTimers[C$zui];if(C$zur){var C$zun=C$zur.timers;for(var C$zua=0,C$zuo=C$zun.length;C$zua<C$zuo;C$zua++){var C$zus=C$zun[C$zua];if(C$zut===C$zus._callback)return C$zus!==C$zur.currentTimer||C$zur.currentTimerSalvaged||(C$zur.currentTimerSalvaged=!0),C$zun.splice(C$zua,1),CallbackTimer.put(C$zus),C$zur.timerIndex>=C$zua&&C$zur.timerIndex--,void(0===C$zun.length&&(this._currentTarget===C$zur?this._currentTargetSalvaged=!0:this._removeHashElement(C$zur)))}}}},unscheduleUpdate:function(C$zut){var C$zue;C$zut&&((C$zue=C$zut._id)||(C$zut.__instanceId?(cc.warnID(1513),C$zue=C$zut._id=C$zut.__instanceId):cc.errorID(1510)),(C$zut=this._hashForUpdates[C$zue])&&(this._updateHashLocked?C$zut.entry.markedForDeletion=!0:this._removeUpdateFromHash(C$zut.entry)))},unscheduleAllForTarget:function(C$zut){if(C$zut){var C$zue=C$zut._id;C$zue||(C$zut.__instanceId?(cc.warnID(1513),C$zue=C$zut._id=C$zut.__instanceId):cc.errorID(1510));C$zue=this._hashForTimers[C$zue];if(C$zue){var C$zui=C$zue.timers;-1<C$zui.indexOf(C$zue.currentTimer)&&!C$zue.currentTimerSalvaged&&(C$zue.currentTimerSalvaged=!0);for(var C$zur=0,C$zun=C$zui.length;C$zur<C$zun;C$zur++)CallbackTimer.put(C$zui[C$zur]);C$zui.length=0,this._currentTarget===C$zue?this._currentTargetSalvaged=!0:this._removeHashElement(C$zue)}this.unscheduleUpdate(C$zut)}},unscheduleAll:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllWithMinPriority:function(C$zut){var C$zue,C$zui,C$zur=this._arrayForTimers;for(C$zue=C$zur.length-1;0<=C$zue;C$zue--)C$zui=C$zur[C$zue],this.unscheduleAllForTarget(C$zui.target);var C$zun;var C$zua=0;if(C$zut<0)for(C$zue=0;C$zue<this._updatesNegList.length;)C$zua=this._updatesNegList.length,(C$zun=this._updatesNegList[C$zue])&&C$zun.priority>=C$zut&&this.unscheduleUpdate(C$zun.target),C$zua==this._updatesNegList.length&&C$zue++;if(C$zut<=0)for(C$zue=0;C$zue<this._updates0List.length;)C$zua=this._updates0List.length,(C$zun=this._updates0List[C$zue])&&this.unscheduleUpdate(C$zun.target),C$zua==this._updates0List.length&&C$zue++;for(C$zue=0;C$zue<this._updatesPosList.length;)C$zua=this._updatesPosList.length,(C$zun=this._updatesPosList[C$zue])&&C$zun.priority>=C$zut&&this.unscheduleUpdate(C$zun.target),C$zua==this._updatesPosList.length&&C$zue++},isScheduled:function(C$zut,C$zue){cc.assertID(C$zut,1508),cc.assertID(C$zue,1509);var C$zui=C$zue._id;C$zui||(C$zue.__instanceId?(cc.warnID(1513),C$zui=C$zue._id=C$zue.__instanceId):cc.errorID(1510));C$zue=this._hashForTimers[C$zui];if(!C$zue)return!1;if(null==C$zue.timers)return!1;var C$zur=C$zue.timers;for(var C$zun=0;C$zun<C$zur.length;++C$zun)if(C$zut===C$zur[C$zun]._callback)return!0;return!1},pauseAllTargets:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},pauseAllTargetsWithMinPriority:function(C$zut){var C$zue=[];var C$zui,C$zur=this._arrayForTimers;var C$zun,C$zua;for(C$zun=0,C$zua=C$zur.length;C$zun<C$zua;C$zun++)(C$zui=C$zur[C$zun])&&(C$zui.paused=!0,C$zue.push(C$zui.target));var C$zuo;if(C$zut<0)for(C$zun=0;C$zun<this._updatesNegList.length;C$zun++)(C$zuo=this._updatesNegList[C$zun])&&C$zuo.priority>=C$zut&&(C$zuo.paused=!0,C$zue.push(C$zuo.target));if(C$zut<=0)for(C$zun=0;C$zun<this._updates0List.length;C$zun++)(C$zuo=this._updates0List[C$zun])&&(C$zuo.paused=!0,C$zue.push(C$zuo.target));for(C$zun=0;C$zun<this._updatesPosList.length;C$zun++)(C$zuo=this._updatesPosList[C$zun])&&C$zuo.priority>=C$zut&&(C$zuo.paused=!0,C$zue.push(C$zuo.target));return C$zue},resumeTargets:function(C$zut){if(C$zut)for(var C$zue=0;C$zue<C$zut.length;C$zue++)this.resumeTarget(C$zut[C$zue])},pauseTarget:function(C$zut){cc.assertID(C$zut,1503);var C$zue=C$zut._id;C$zue||(C$zut.__instanceId?(cc.warnID(1513),C$zue=C$zut._id=C$zut.__instanceId):cc.errorID(1510));C$zut=this._hashForTimers[C$zue];C$zut&&(C$zut.paused=!0);C$zut=this._hashForUpdates[C$zue];C$zut&&(C$zut.entry.paused=!0)},resumeTarget:function(C$zut){cc.assertID(C$zut,1504);var C$zue=C$zut._id;C$zue||(C$zut.__instanceId?(cc.warnID(1513),C$zue=C$zut._id=C$zut.__instanceId):cc.errorID(1510));C$zut=this._hashForTimers[C$zue];C$zut&&(C$zut.paused=!1);C$zut=this._hashForUpdates[C$zue];C$zut&&(C$zut.entry.paused=!1)},isTargetPaused:function(C$zut){cc.assertID(C$zut,1505);var C$zue=C$zut._id;C$zue||(C$zut.__instanceId?(cc.warnID(1513),C$zue=C$zut._id=C$zut.__instanceId):cc.errorID(1510));C$zut=this._hashForTimers[C$zue];if(C$zut)return C$zut.paused;C$zut=this._hashForUpdates[C$zue];return!!C$zut&&C$zut.entry.paused}},cc.Scheduler.PRIORITY_SYSTEM=1<<31,cc.Scheduler.PRIORITY_NON_SYSTEM=cc.Scheduler.PRIORITY_SYSTEM+1,C$zur.exports=cc.Scheduler},{"./platform/id-generater":205,"./platform/js":209}],34:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./CCRawAsset");cc.Asset=cc.Class({name:"cc.Asset",extends:C$zut,ctor:function(){this.loaded=!0,this.url=""},properties:{nativeUrl:{get:function(){if(this._native){var C$zut=this._native;if(47===C$zut.charCodeAt(0))return C$zut.slice(1);var C$zue;if(cc.AssetLibrary)return C$zue=cc.AssetLibrary.getLibUrlNoExt(this._uuid,!0),46===C$zut.charCodeAt(0)?C$zue+C$zut:C$zue+"/"+C$zut;cc.errorID(6400)}return""},visible:!1},_native:"",_nativeAsset:{get:function(){return this._$nativeAsset},set:function(C$zut){this._$nativeAsset=C$zut}}},statics:{deserialize:!1,preventDeferredLoadDependents:!1,preventPreloadNativeObject:!1},toString:function(){return this.nativeUrl},serialize:!1,createNode:null,_setRawAsset:function(C$zut,C$zue){this._native=!1!==C$zue?C$zut||void 0:"/"+C$zut}}),C$zue.exports=cc.Asset},{"./CCRawAsset":42}],35:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./CCAsset");C$zut=C$zut("../event/event-target");var C$zun=cc.Enum({WEB_AUDIO:0,DOM_AUDIO:1});var C$zua=cc.Class({name:"cc.AudioClip",extends:C$zur,mixins:[C$zut],ctor:function(){this.loaded=!1,this._audio=null},properties:{loadMode:{default:C$zun.WEB_AUDIO,type:C$zun},_nativeAsset:{get:function(){return this._audio},set:function(C$zut){C$zut instanceof cc.AudioClip?this._audio=C$zut._nativeAsset:this._audio=C$zut,this._audio&&(this.loaded=!0,this.emit("load"))},override:!0}},statics:{LoadMode:C$zun,_loadByUrl:function(C$zui,C$zur){var C$zun=cc.loader.getItem(C$zui)||cc.loader.getItem(C$zui+"?useDom=1");C$zun&&C$zun.complete?C$zun._owner instanceof C$zua?C$zur(null,C$zun._owner):C$zur(null,C$zun.content):cc.loader.load(C$zui,function(C$zut,C$zue){if(C$zut)return C$zur(C$zut);C$zun=cc.loader.getItem(C$zui)||cc.loader.getItem(C$zui+"?useDom=1"),C$zur(null,C$zun.content)})}},destroy:function(){cc.audioEngine.uncache(this),this._super()}});cc.AudioClip=C$zua,C$zue.exports=C$zua},{"../event/event-target":115,"./CCAsset":34}],36:[function(C$zut,C$zue,C$zui){"use strict";function C$zuob(){this.u=0,this.v=0,this.w=0,this.h=0,this.offsetX=0,this.offsetY=0,this.textureID=0,this.valid=!1,this.xAdvance=0}function C$zuCb(C$zut){this._letterDefinitions={},this._texture=C$zut}C$zuCb.prototype={constructor:C$zuCb,addLetterDefinitions:function(C$zut,C$zue){this._letterDefinitions[C$zut]=C$zue},cloneLetterDefinition:function(){var C$zut={};for(var C$zue in this._letterDefinitions){var C$zui=new C$zuob;cc.js.mixin(C$zui,this._letterDefinitions[C$zue]),C$zut[C$zue]=C$zui}return C$zut},getTexture:function(){return this._texture},getLetter:function(C$zut){return this._letterDefinitions[C$zut]},getLetterDefinitionForChar:function(C$zut){C$zut=C$zut.charCodeAt(0);return this._letterDefinitions.hasOwnProperty(C$zut)?this._letterDefinitions[C$zut]:null},clear:function(){this._letterDefinitions={}}};var C$zur=cc.Class({name:"cc.BitmapFont",extends:cc.Font,properties:{fntDataStr:{default:""},spriteFrame:{default:null,type:cc.SpriteFrame},fontSize:{default:-1},_fntConfig:null,_fontDefDictionary:null},onLoad:function(){var C$zut=this.spriteFrame;!this._fontDefDictionary&&C$zut&&(this._fontDefDictionary=new C$zuCb(C$zut._texture));C$zut=this._fntConfig;if(C$zut){var C$zue=C$zut.fontDefDictionary;for(var C$zui in C$zue){var C$zur=new C$zuob;var C$zun=C$zue[C$zui].rect;C$zur.offsetX=C$zue[C$zui].xOffset,C$zur.offsetY=C$zue[C$zui].yOffset,C$zur.w=C$zun.width,C$zur.h=C$zun.height,C$zur.u=C$zun.x,C$zur.v=C$zun.y,C$zur.textureID=0,C$zur.valid=!0,C$zur.xAdvance=C$zue[C$zui].xAdvance,this._fontDefDictionary.addLetterDefinitions(C$zui,C$zur)}}}});cc.BitmapFont=C$zur,cc.BitmapFont.FontLetterDefinition=C$zuob,cc.BitmapFont.FontAtlas=C$zuCb,C$zue.exports=C$zur},{}],37:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.BufferAsset",extends:cc.Asset,ctor:function(){this._buffer=null},properties:{_nativeAsset:{get:function(){return this._buffer},set:function(C$zut){this._buffer=C$zut.buffer||C$zut},override:!0},buffer:function(){return this._buffer}}});cc.BufferAsset=C$zue.exports=C$zur},{}],38:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.Font",extends:cc.Asset});cc.Font=C$zue.exports=C$zur},{}],39:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.JsonAsset",extends:cc.Asset,properties:{json:null}});C$zue.exports=cc.JsonAsset=C$zur},{}],40:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.LabelAtlas",extends:cc.BitmapFont,onLoad:function(){this.spriteFrame?this._fntConfig?this._super():cc.warnID(9101,this.name):cc.warnID(9100,this.name)}});cc.LabelAtlas=C$zur,C$zue.exports=C$zur},{}],41:[function(C$zue,C$zut,C$zui){"use strict";var C$zur=cc.Enum({AUTO:0,SINGLE_INSTANCE:1,MULTI_INSTANCE:2});C$zur=cc.Class({name:"cc.Prefab",extends:cc.Asset,ctor:function(){this._createFunction=null,this._instantiatedTimes=0},properties:{data:null,optimizationPolicy:C$zur.AUTO,asyncLoadAssets:!1,readonly:{default:!1,editorOnly:!0}},statics:{OptimizationPolicy:C$zur,OptimizationPolicyThreshold:3},createNode:!1,compileCreateFunction:function(){var C$zut=C$zue("../platform/instantiate-jit");this._createFunction=C$zut.compile(this.data)},_doInstantiate:function(C$zut){return this.data._prefab?this.data._prefab._synced=!0:cc.warnID(3700),this._createFunction||this.compileCreateFunction(),this._createFunction(C$zut)},_instantiate:function(){var C$zut;return this.data._prefab._synced=!0,C$zut=this.data._instantiate(),++this._instantiatedTimes,C$zut},destroy:function(){this.data&&this.data.destroy(),this._super()}});cc.Prefab=C$zut.exports=C$zur,cc.js.obsolete(cc,"cc._Prefab","Prefab")},{"../platform/instantiate-jit":207}],42:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../platform/CCObject");var C$zun=C$zut("../platform/js");cc.RawAsset=cc.Class({name:"cc.RawAsset",extends:C$zur,ctor:function(){Object.defineProperty(this,"_uuid",{value:"",writable:!0})}}),C$zun.value(cc.RawAsset,"isRawAssetType",function(C$zut){return C$zun.isChildClassOf(C$zut,cc.RawAsset)&&!C$zun.isChildClassOf(C$zut,cc.Asset)}),C$zun.value(cc.RawAsset,"wasRawAssetType",function(C$zut){return C$zut===cc.Texture2D||C$zut===cc.AudioClip||C$zut===cc.ParticleAsset||C$zut===cc.Asset}),C$zue.exports=cc.RawAsset},{"../platform/CCObject":195,"../platform/js":209}],43:[function(C$zut,C$zue,C$zui){"use strict";var C$zua=(C$zur=C$zut("../../renderer/gfx"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zuo=C$zut("../renderer");var C$zur=C$zut("./CCTexture2D");C$zut=cc.Enum({RB_FMT_D24S8:C$zua.default.RB_FMT_D24S8,RB_FMT_S8:C$zua.default.RB_FMT_S8,RB_FMT_D16:C$zua.default.RB_FMT_D16});C$zur=cc.Class({name:"cc.RenderTexture",extends:C$zur,statics:{DepthStencilFormat:C$zut},ctor:function(){this._framebuffer=null},initWithSize:function(C$zut,C$zue,C$zui){this.width=Math.floor(C$zut||cc.visibleRect.width),this.height=Math.floor(C$zue||cc.visibleRect.height),this._resetUnderlyingMipmaps();var C$zur={colors:[this._texture]};var C$zun;this._depthStencilBuffer&&this._depthStencilBuffer.destroy(),C$zui&&(C$zun=new C$zua.default.RenderBuffer(C$zuo.device,C$zui,C$zut,C$zue),C$zui===C$zua.default.RB_FMT_D24S8?C$zur.depthStencil=C$zun:C$zui===C$zua.default.RB_FMT_S8?C$zur.stencil=C$zun:C$zui===C$zua.default.RB_FMT_D16&&(C$zur.depth=C$zun)),this._depthStencilBuffer=C$zun,this._framebuffer&&this._framebuffer.destroy(),this._framebuffer=new C$zua.default.FrameBuffer(C$zuo.device,C$zut,C$zue,C$zur),this._packable=!1,this.loaded=!0,this.emit("load")},updateSize:function(C$zut,C$zue){this.width=Math.floor(C$zut||cc.visibleRect.width),this.height=Math.floor(C$zue||cc.visibleRect.height),this._resetUnderlyingMipmaps();var C$zui=this._depthStencilBuffer;C$zui&&C$zui.update(this.width,this.height),this._framebuffer._width=C$zut,this._framebuffer._height=C$zue},drawTextureAt:function(C$zut,C$zue,C$zui){C$zut._image&&0!==C$zut._image.width&&this._texture.updateSubImage({x:C$zue,y:C$zui,image:C$zut._image,width:C$zut.width,height:C$zut.height,level:0,flipY:!1,premultiplyAlpha:C$zut._premultiplyAlpha})},readPixels:function(C$zut,C$zue,C$zui,C$zur,C$zun){if(!this._framebuffer||!this._texture)return C$zut;C$zue=C$zue||0,C$zui=C$zui||0;C$zur=C$zur||this.width;C$zun=C$zun||this.height;C$zut=C$zut||new Uint8Array(C$zur*C$zun*4);var C$zua=cc.game._renderContext;var C$zuo=C$zua.getParameter(C$zua.FRAMEBUFFER_BINDING);return C$zua.bindFramebuffer(C$zua.FRAMEBUFFER,this._framebuffer.getHandle()),C$zua.readPixels(C$zue,C$zui,C$zur,C$zun,C$zua.RGBA,C$zua.UNSIGNED_BYTE,C$zut),C$zua.bindFramebuffer(C$zua.FRAMEBUFFER,C$zuo),C$zut},destroy:function(){this._super(),this._framebuffer&&(this._framebuffer.destroy(),this._framebuffer=null)}});cc.RenderTexture=C$zue.exports=C$zur},{"../../renderer/gfx":312,"../renderer":220,"./CCTexture2D":50}],44:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.SceneAsset",extends:cc.Asset,properties:{scene:null,asyncLoadAssets:void 0}});cc.SceneAsset=C$zur,C$zue.exports=C$zur},{}],45:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.Script",extends:cc.Asset});cc._Script=C$zur;var C$zun=cc.Class({name:"cc.JavaScript",extends:C$zur});cc._JavaScript=C$zun;C$zun=cc.Class({name:"cc.CoffeeScript",extends:C$zur});cc._CoffeeScript=C$zun;C$zun=cc.Class({name:"cc.TypeScript",extends:C$zur});cc._TypeScript=C$zun},{}],46:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.SpriteAtlas",extends:cc.Asset,properties:{_spriteFrames:{default:{}}},getTexture:function(){var C$zut=Object.keys(this._spriteFrames);return 0<C$zut.length&&(C$zut=this._spriteFrames[C$zut[0]])?C$zut.getTexture():null},getSpriteFrame:function(C$zut){var C$zue=this._spriteFrames[C$zut];return C$zue?(C$zue.name||(C$zue.name=C$zut),C$zue):null},getSpriteFrames:function(){var C$zut=[];for(var C$zue in this._spriteFrames)C$zut.push(this.getSpriteFrame(C$zue));return C$zut}});cc.SpriteAtlas=C$zur,C$zue.exports=C$zur},{}],47:[function(C$zut,C$zue,C$zui){"use strict";var C$zua=C$zut("../event/event-target");var C$zur=C$zut("../utils/texture-util");var C$zuv=[{u:0,v:0},{u:0,v:0},{u:0,v:0},{u:0,v:0}];var C$zun=cc.Class({name:"cc.SpriteFrame",extends:C$zut("../assets/CCAsset"),mixins:[C$zua],properties:{_textureSetter:{set:function(C$zut){C$zut&&(this._texture!==C$zut&&this._refreshTexture(C$zut),this._textureFilename=C$zut.url)}},insetTop:{get:function(){return this._capInsets[1]},set:function(C$zut){this._capInsets[1]=C$zut,this._texture&&this._calculateSlicedUV()}},insetBottom:{get:function(){return this._capInsets[3]},set:function(C$zut){this._capInsets[3]=C$zut,this._texture&&this._calculateSlicedUV()}},insetLeft:{get:function(){return this._capInsets[0]},set:function(C$zut){this._capInsets[0]=C$zut,this._texture&&this._calculateSlicedUV()}},insetRight:{get:function(){return this._capInsets[2]},set:function(C$zut){this._capInsets[2]=C$zut,this._texture&&this._calculateSlicedUV()}}},ctor:function(){C$zua.call(this);var C$zut=arguments[0];var C$zue=arguments[1];var C$zui=arguments[2];var C$zur=arguments[3];var C$zun=arguments[4];this._rect=null,this.uv=[],this._texture=null,this._original=null,this._offset=null,this._originalSize=null,this._rotated=!1,this._flipX=!1,this._flipY=!1,this.vertices=null,this._capInsets=[0,0,0,0],this.uvSliced=[],this._textureFilename="",void 0!==C$zut&&this.setTexture(C$zut,C$zue,C$zui,C$zur,C$zun)},textureLoaded:function(){return this._texture&&this._texture.loaded},onTextureLoaded:function(C$zut,C$zue){return this.textureLoaded()?(C$zut.call(C$zue),!0):(this.once("load",C$zut,C$zue),this.ensureLoadTexture(),!1)},isRotated:function(){return this._rotated},setRotated:function(C$zut){this._rotated=C$zut,this._texture&&this._calculateUV()},isFlipX:function(){return this._flipX},isFlipY:function(){return this._flipY},setFlipX:function(C$zut){this._flipX=C$zut,this._texture&&this._calculateUV()},setFlipY:function(C$zut){this._flipY=C$zut,this._texture&&this._calculateUV()},getRect:function(){return cc.rect(this._rect)},setRect:function(C$zut){this._rect=C$zut,this._texture&&this._calculateUV()},getOriginalSize:function(){return cc.size(this._originalSize)},setOriginalSize:function(C$zut){this._originalSize?(this._originalSize.width=C$zut.width,this._originalSize.height=C$zut.height):this._originalSize=cc.size(C$zut)},getTexture:function(){return this._texture},_textureLoadedCallback:function(){var C$zut=this._texture;var C$zue;C$zut&&(C$zue=C$zut.width,C$zut=C$zut.height,this._rect?this._checkRect(this._texture):this._rect=cc.rect(0,0,C$zue,C$zut),this._originalSize||this.setOriginalSize(cc.size(C$zue,C$zut)),this._offset||this.setOffset(cc.v2(0,0)),this._calculateUV(),this.emit("load"))},_refreshTexture:function(C$zut){(this._texture=C$zut).loaded?this._textureLoadedCallback():C$zut.once("load",this._textureLoadedCallback,this)},getOffset:function(){return cc.v2(this._offset)},setOffset:function(C$zut){this._offset=cc.v2(C$zut)},clone:function(){return new C$zun(this._texture||this._textureFilename,this._rect,this._rotated,this._offset,this._originalSize)},setTexture:function(C$zut,C$zue,C$zui,C$zur,C$zun){this._rect=C$zue||null,C$zur?this.setOffset(C$zur):this._offset=null,C$zun?this.setOriginalSize(C$zun):this._originalSize=null,this._rotated=C$zui||!1;C$zue=C$zut;return"string"==typeof C$zue&&C$zue&&(this._textureFilename=C$zue,this._loadTexture()),C$zue instanceof cc.Texture2D&&this._texture!==C$zue&&this._refreshTexture(C$zue),!0},_loadTexture:function(){var C$zut;this._textureFilename&&(C$zut=C$zur.loadImage(this._textureFilename),this._refreshTexture(C$zut))},ensureLoadTexture:function(){this._texture?this._texture.loaded||(this._refreshTexture(this._texture),C$zur.postLoadTexture(this._texture)):this._textureFilename&&this._loadTexture()},_checkRect:function(C$zut){var C$zue=this._rect;var C$zui=C$zue.x,C$zur=C$zue.y;this._rotated?(C$zui+=C$zue.height,C$zur+=C$zue.width):(C$zui+=C$zue.width,C$zur+=C$zue.height),C$zui>C$zut.width&&cc.errorID(3300,C$zut.url+"/"+this.name,C$zui,C$zut.width),C$zur>C$zut.height&&cc.errorID(3400,C$zut.url+"/"+this.name,C$zur,C$zut.height)},_flipXY:function(C$zut){var C$zue;this._flipX&&(C$zue=C$zut[0],C$zut[0]=C$zut[1],C$zut[1]=C$zue,C$zue=C$zut[2],C$zut[2]=C$zut[3],C$zut[3]=C$zue),this._flipY&&(C$zue=C$zut[0],C$zut[0]=C$zut[2],C$zut[2]=C$zue,C$zue=C$zut[1],C$zut[1]=C$zut[3],C$zut[3]=C$zue)},_calculateSlicedUV:function(){var C$zut=this._rect;var C$zue=this._texture.width;var C$zui=this._texture.height;var C$zur=this._capInsets[0];var C$zun=this._capInsets[2];C$zun=C$zut.width-C$zur-C$zun;var C$zua=this._capInsets[1];var C$zuo=this._capInsets[3];var C$zuh=C$zut.height-C$zua-C$zuo;var C$zus=this.uvSliced;if(C$zus.length=0,this._rotated){C$zuv[0].u=C$zut.x/C$zue,C$zuv[1].u=(C$zut.x+C$zuo)/C$zue,C$zuv[2].u=(C$zut.x+C$zuo+C$zuh)/C$zue,C$zuv[3].u=(C$zut.x+C$zut.height)/C$zue,C$zuv[3].v=C$zut.y/C$zui,C$zuv[2].v=(C$zut.y+C$zur)/C$zui,C$zuv[1].v=(C$zut.y+C$zur+C$zun)/C$zui,C$zuv[0].v=(C$zut.y+C$zut.width)/C$zui,this._flipXY(C$zuv);for(var C$zuc=0;C$zuc<4;++C$zuc){var C$zuu=C$zuv[C$zuc];for(var C$zul=0;C$zul<4;++C$zul){var C$zu_=C$zuv[3-C$zul];C$zus.push({u:C$zuu.u,v:C$zu_.v})}}}else{C$zuv[0].u=C$zut.x/C$zue,C$zuv[1].u=(C$zut.x+C$zur)/C$zue,C$zuv[2].u=(C$zut.x+C$zur+C$zun)/C$zue,C$zuv[3].u=(C$zut.x+C$zut.width)/C$zue,C$zuv[3].v=C$zut.y/C$zui,C$zuv[2].v=(C$zut.y+C$zua)/C$zui,C$zuv[1].v=(C$zut.y+C$zua+C$zuh)/C$zui,C$zuv[0].v=(C$zut.y+C$zut.height)/C$zui,this._flipXY(C$zuv);for(var C$zud=0;C$zud<4;++C$zud){var C$zuf=C$zuv[C$zud];for(var C$zup=0;C$zup<4;++C$zup){var C$zum=C$zuv[C$zup];C$zus.push({u:C$zum.u,v:C$zuf.v})}}}},_setDynamicAtlasFrame:function(C$zut){C$zut&&(this._original={_texture:this._texture,_x:this._rect.x,_y:this._rect.y},this._texture=C$zut.texture,this._rect.x=C$zut.x,this._rect.y=C$zut.y,this._calculateUV())},_resetDynamicAtlasFrame:function(){this._original&&(this._rect.x=this._original._x,this._rect.y=this._original._y,this._texture=this._original._texture,this._original=null,this._calculateUV())},_calculateUV:function(){var C$zut=this._rect,C$zue=this._texture,C$zui=this.uv,C$zur=C$zue.width,C$zun=C$zue.height;var C$zua,C$zuo;var C$zus;this._rotated?(C$zue=0===C$zur?0:C$zut.x/C$zur,C$zus=0===C$zur?0:(C$zut.x+C$zut.height)/C$zur,C$zuo=0===C$zun?0:(C$zut.y+C$zut.width)/C$zun,C$zua=0===C$zun?0:C$zut.y/C$zun,C$zui[0]=C$zue,C$zui[1]=C$zua,C$zui[2]=C$zue,C$zui[3]=C$zuo,C$zui[4]=C$zus,C$zui[5]=C$zua,C$zui[6]=C$zus,C$zui[7]=C$zuo):(C$zue=0===C$zur?0:C$zut.x/C$zur,C$zua=0===C$zur?0:(C$zut.x+C$zut.width)/C$zur,C$zus=0===C$zun?0:(C$zut.y+C$zut.height)/C$zun,C$zuo=0===C$zun?0:C$zut.y/C$zun,C$zui[0]=C$zue,C$zui[1]=C$zus,C$zui[2]=C$zua,C$zui[3]=C$zus,C$zui[4]=C$zue,C$zui[5]=C$zuo,C$zui[6]=C$zua,C$zui[7]=C$zuo),this._flipX&&(C$zut=C$zui[0],C$zui[0]=C$zui[2],C$zui[2]=C$zut,C$zut=C$zui[1],C$zui[1]=C$zui[3],C$zui[3]=C$zut,C$zut=C$zui[4],C$zui[4]=C$zui[6],C$zui[6]=C$zut,C$zut=C$zui[5],C$zui[5]=C$zui[7],C$zui[7]=C$zut),this._flipY&&(C$zus=C$zui[0],C$zui[0]=C$zui[4],C$zui[4]=C$zus,C$zus=C$zui[1],C$zui[1]=C$zui[5],C$zui[5]=C$zus,C$zus=C$zui[2],C$zui[2]=C$zui[6],C$zui[6]=C$zus,C$zus=C$zui[3],C$zui[3]=C$zui[7],C$zui[7]=C$zus);var C$zuc=this.vertices;if(C$zuc){C$zuc.nu.length=0;for(var C$zul=C$zuc.nv.length=0;C$zul<C$zuc.u.length;C$zul++)C$zuc.nu[C$zul]=C$zuc.u[C$zul]/C$zur,C$zuc.nv[C$zul]=C$zuc.v[C$zul]/C$zun}this._calculateSlicedUV()},_serialize:!1,_deserialize:function(C$zut,C$zue){var C$zui=C$zut.rect;C$zui&&(this._rect=new cc.Rect(C$zui[0],C$zui[1],C$zui[2],C$zui[3])),C$zut.offset&&this.setOffset(new cc.Vec2(C$zut.offset[0],C$zut.offset[1])),C$zut.originalSize&&this.setOriginalSize(new cc.Size(C$zut.originalSize[0],C$zut.originalSize[1])),this._rotated=1===C$zut.rotated,this._name=C$zut.name;C$zui=C$zut.capInsets;C$zui&&(this._capInsets[0]=C$zui[0],this._capInsets[1]=C$zui[1],this._capInsets[2]=C$zui[2],this._capInsets[3]=C$zui[3]),this.vertices=C$zut.vertices,this.vertices&&(this.vertices.nu=[],this.vertices.nv=[]);C$zui=C$zut.texture;C$zui&&C$zue.result.push(this,"_textureSetter",C$zui)}});C$zut=C$zun.prototype;C$zut.copyWithZone=C$zut.clone,C$zut.copy=C$zut.clone,C$zut.initWithTexture=C$zut.setTexture,cc.SpriteFrame=C$zun,C$zue.exports=C$zun},{"../assets/CCAsset":34,"../event/event-target":115,"../utils/texture-util":272}],48:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./CCFont");C$zut=cc.Class({name:"cc.TTFFont",extends:C$zut,properties:{_fontFamily:null,_nativeAsset:{type:cc.String,get:function(){return this._fontFamily},set:function(C$zut){this._fontFamily=C$zut||"Arial"},override:!0}}});cc.TTFFont=C$zue.exports=C$zut},{"./CCFont":38}],49:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.TextAsset",extends:cc.Asset,properties:{text:""},toString:function(){return this.text}});C$zue.exports=cc.TextAsset=C$zur},{}],50:[function(C$zut,C$zun,C$zus){"use strict";C$zue=(C$zue=C$zut("../../renderer/gfx"))&&C$zue.__esModule?C$zue:{default:C$zue};var C$zue;var C$zuh=C$zut("../event/event-target");var C$zua=C$zut("../renderer");C$zut("../platform/CCClass");var C$zuu=new(C$zut("../platform/id-generater"))("Tex");var C$zu_=1024;var C$zuf=cc.Enum({RGB565:C$zue.default.TEXTURE_FMT_R5_G6_B5,RGB5A1:C$zue.default.TEXTURE_FMT_R5_G5_B5_A1,RGBA4444:C$zue.default.TEXTURE_FMT_R4_G4_B4_A4,RGB888:C$zue.default.TEXTURE_FMT_RGB8,RGBA8888:C$zue.default.TEXTURE_FMT_RGBA8,RGBA32F:C$zue.default.TEXTURE_FMT_RGBA32F,A8:C$zue.default.TEXTURE_FMT_A8,I8:C$zue.default.TEXTURE_FMT_L8,AI8:C$zue.default.TEXTURE_FMT_L8_A8,RGB_PVRTC_2BPPV1:C$zue.default.TEXTURE_FMT_RGB_PVRTC_2BPPV1,RGBA_PVRTC_2BPPV1:C$zue.default.TEXTURE_FMT_RGBA_PVRTC_2BPPV1,RGB_A_PVRTC_2BPPV1:C$zu_++,RGB_PVRTC_4BPPV1:C$zue.default.TEXTURE_FMT_RGB_PVRTC_4BPPV1,RGBA_PVRTC_4BPPV1:C$zue.default.TEXTURE_FMT_RGBA_PVRTC_4BPPV1,RGB_A_PVRTC_4BPPV1:+C$zu_,RGB_ETC1:C$zue.default.TEXTURE_FMT_RGB_ETC1,RGBA_ETC1:1026,RGB_ETC2:C$zue.default.TEXTURE_FMT_RGB_ETC2,RGBA_ETC2:C$zue.default.TEXTURE_FMT_RGBA_ETC2});var C$zuc=cc.Enum({REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648});var C$zul=cc.Enum({LINEAR:9729,NEAREST:9728});var C$zuo={9728:0,9729:1};var C$zui=[];var C$zur={width:void 0,height:void 0,minFilter:void 0,magFilter:void 0,wrapS:void 0,wrapT:void 0,format:void 0,genMipmaps:void 0,images:void 0,image:void 0,flipY:void 0,premultiplyAlpha:void 0};function _getSharedOptions(){for(var C$zut in C$zur)C$zur[C$zut]=void 0;return C$zui.length=0,C$zur.images=C$zui,C$zur}var C$zup=cc.Class({name:"cc.Texture2D",extends:C$zut("../assets/CCAsset"),mixins:[C$zuh],properties:{_nativeAsset:{get:function(){return this._image},set:function(C$zut){C$zut._compressed&&C$zut._data?this.initWithData(C$zut._data,this._format,C$zut.width,C$zut.height):this.initWithElement(C$zut)},override:!0},_format:C$zuf.RGBA8888,_premultiplyAlpha:!1,_flipY:!1,_minFilter:C$zul.LINEAR,_magFilter:C$zul.LINEAR,_mipFilter:C$zul.LINEAR,_wrapS:C$zuc.CLAMP_TO_EDGE,_wrapT:C$zuc.CLAMP_TO_EDGE,_genMipmaps:!1,genMipmaps:{get:function(){return this._genMipmaps},set:function(C$zut){var C$zue;this._genMipmaps!==C$zut&&((C$zue=_getSharedOptions()).genMipmaps=C$zut,this.update(C$zue))}},_packable:!0,packable:{get:function(){return this._packable},set:function(C$zut){this._packable=C$zut}}},statics:{PixelFormat:C$zuf,WrapMode:C$zuc,Filter:C$zul,_FilterIndex:C$zuo,extnames:[".png",".jpg",".jpeg",".bmp",".webp",".pvr",".pkm"]},ctor:function(){this._id=C$zuu.getNewId(),this.loaded=!1,this.width=0,this.height=0,this._hashDirty=!0,this._hash=0,this._texture=null},getImpl:function(){return this._texture},getId:function(){return this._id},toString:function(){return this.url||""},update:function(C$zut){var C$zue;C$zut&&(C$zue=!1,void 0!==C$zut.width&&(this.width=C$zut.width),void 0!==C$zut.height&&(this.height=C$zut.height),void 0!==C$zut.minFilter&&(this._minFilter=C$zut.minFilter,C$zut.minFilter=C$zuo[C$zut.minFilter]),void 0!==C$zut.magFilter&&(this._magFilter=C$zut.magFilter,C$zut.magFilter=C$zuo[C$zut.magFilter]),void 0!==C$zut.mipFilter&&(this._mipFilter=C$zut.mipFilter,C$zut.mipFilter=C$zuo[C$zut.mipFilter]),void 0!==C$zut.wrapS&&(this._wrapS=C$zut.wrapS),void 0!==C$zut.wrapT&&(this._wrapT=C$zut.wrapT),void 0!==C$zut.format&&(this._format=C$zut.format),void 0!==C$zut.flipY&&(this._flipY=C$zut.flipY,C$zue=!0),void 0!==C$zut.premultiplyAlpha&&(this._premultiplyAlpha=C$zut.premultiplyAlpha,C$zue=!0),void 0!==C$zut.genMipmaps&&(this._genMipmaps=C$zut.genMipmaps),C$zue&&this._image&&(C$zut.image=this._image),C$zut.images&&0<C$zut.images.length?this._image=C$zut.images[0]:void 0!==C$zut.image&&(this._image=C$zut.image,C$zut.images||(C$zui.length=0,C$zut.images=C$zui),C$zut.images.push(C$zut.image)),this._texture&&this._texture.update(C$zut),this._hashDirty=!0)},initWithElement:function(C$zut){var C$zue;C$zut&&((this._image=C$zut).complete||C$zut instanceof HTMLCanvasElement?this.handleLoadedTexture():(C$zue=this,C$zut.addEventListener("load",function(){C$zue.handleLoadedTexture()}),C$zut.addEventListener("error",function(C$zut){cc.warnID(3119,C$zut.message)})))},initWithData:function(C$zut,C$zue,C$zui,C$zur){var C$zun=_getSharedOptions();return C$zun.image=C$zut,C$zun.images=[C$zun.image],C$zun.genMipmaps=this._genMipmaps,C$zun.premultiplyAlpha=this._premultiplyAlpha,C$zun.flipY=this._flipY,C$zun.minFilter=C$zuo[this._minFilter],C$zun.magFilter=C$zuo[this._magFilter],C$zun.wrapS=this._wrapS,C$zun.wrapT=this._wrapT,C$zun.format=this._getGFXPixelFormat(C$zue),C$zun.width=C$zui,C$zun.height=C$zur,this._texture?this._texture.update(C$zun):this._texture=new C$zua.Texture2D(C$zua.device,C$zun),this.width=C$zui,this.height=C$zur,this._checkPackable(),this.loaded=!0,this.emit("load"),!0},getHtmlElementObj:function(){return this._image},destroy:function(){this._packable&&cc.dynamicAtlasManager&&cc.dynamicAtlasManager.deleteAtlasTexture(this),this._image=null,this._texture&&this._texture.destroy(),this._super()},getPixelFormat:function(){return this._format},hasPremultipliedAlpha:function(){return this._premultiplyAlpha||!1},handleLoadedTexture:function(){var C$zut;this._image&&this._image.width&&this._image.height&&(this.width=this._image.width,this.height=this._image.height,(C$zut=_getSharedOptions()).image=this._image,C$zut.images=[C$zut.image],C$zut.width=this.width,C$zut.height=this.height,C$zut.genMipmaps=this._genMipmaps,C$zut.format=this._getGFXPixelFormat(this._format),C$zut.premultiplyAlpha=this._premultiplyAlpha,C$zut.flipY=this._flipY,C$zut.minFilter=C$zuo[this._minFilter],C$zut.magFilter=C$zuo[this._magFilter],C$zut.wrapS=this._wrapS,C$zut.wrapT=this._wrapT,this._texture?this._texture.update(C$zut):this._texture=new C$zua.Texture2D(C$zua.device,C$zut),this._checkPackable(),this.loaded=!0,this.emit("load"),cc.macro.CLEANUP_IMAGE_CACHE&&this._image instanceof HTMLImageElement&&this._clearImage())},description:function(){return"<cc.Texture2D | Name = "+this.url+" | Dimensions = "+this.width+" x "+this.height+">"},releaseTexture:function(){this._image=null,this._texture&&this._texture.destroy()},setWrapMode:function(C$zut,C$zue){var C$zui;this._wrapS===C$zut&&this._wrapT===C$zue||((C$zui=_getSharedOptions()).wrapS=C$zut,C$zui.wrapT=C$zue,this.update(C$zui))},setFilters:function(C$zut,C$zue){var C$zui;this._minFilter===C$zut&&this._magFilter===C$zue||((C$zui=_getSharedOptions()).minFilter=C$zut,C$zui.magFilter=C$zue,this.update(C$zui))},setFlipY:function(C$zut){var C$zue;this._flipY!==C$zut&&((C$zue=_getSharedOptions()).flipY=C$zut,this.update(C$zue))},setPremultiplyAlpha:function(C$zut){var C$zue;this._premultiplyAlpha!==C$zut&&((C$zue=_getSharedOptions()).premultiplyAlpha=C$zut,this.update(C$zue))},_checkPackable:function(){var C$zut=cc.dynamicAtlasManager;var C$zue,C$zui;C$zut&&(this._isCompressed()?this._packable=!1:(C$zue=this.width,C$zui=this.height,!this._image||C$zue>C$zut.maxFrameSize||C$zui>C$zut.maxFrameSize||this._getHash()!==C$zut.Atlas.DEFAULT_HASH?this._packable=!1:this._image&&this._image instanceof HTMLCanvasElement&&(this._packable=!0)))},_getOpts:function(){var C$zut=_getSharedOptions();return C$zut.width=this.width,C$zut.height=this.height,C$zut.genMipmaps=this._genMipmaps,C$zut.format=this._format,C$zut.premultiplyAlpha=this._premultiplyAlpha,C$zut.anisotropy=this._anisotropy,C$zut.flipY=this._flipY,C$zut.minFilter=C$zuo[this._minFilter],C$zut.magFilter=C$zuo[this._magFilter],C$zut.mipFilter=C$zuo[this._mipFilter],C$zut.wrapS=this._wrapS,C$zut.wrapT=this._wrapT,C$zut},_getGFXPixelFormat:function(C$zut){return C$zut===C$zuf.RGBA_ETC1?C$zut=C$zuf.RGB_ETC1:C$zut===C$zuf.RGB_A_PVRTC_4BPPV1?C$zut=C$zuf.RGB_PVRTC_4BPPV1:C$zut===C$zuf.RGB_A_PVRTC_2BPPV1&&(C$zut=C$zuf.RGB_PVRTC_2BPPV1),C$zut},_resetUnderlyingMipmaps:function(C$zut){var C$zue=this._getOpts();C$zue.images=C$zut||[null],this._texture?this._texture.update(C$zue):this._texture=new C$zua.Texture2D(C$zua.device,C$zue)},_serialize:!1,_deserialize:function(C$zut,C$zuh){var C$zue=cc.renderer.device;C$zut=C$zut.split(",");var C$zui=C$zut[0];if(C$zui){var C$zur=C$zui.split("_");var C$zun="";var C$zua="";var C$zuu=999;var C$zu_=this._format;var C$zud=cc.macro.SUPPORT_TEXTURE_FORMATS;for(var C$zuo=0;C$zuo<C$zur.length;C$zuo++){var C$zus=C$zur[C$zuo].split("@");var C$zuc=C$zus[0];C$zuc=C$zup.extnames[C$zuc.charCodeAt(0)-48]||C$zuc;var C$zul=C$zud.indexOf(C$zuc);-1!==C$zul&&C$zul<C$zuu?(C$zus=C$zus[1]?parseInt(C$zus[1]):this._format,(".pvr"!==C$zuc||C$zue.ext("WEBGL_compressed_texture_pvrtc"))&&(C$zus!==C$zuf.RGB_ETC1&&C$zus!==C$zuf.RGBA_ETC1||C$zue.ext("WEBGL_compressed_texture_etc1"))&&(C$zus!==C$zuf.RGB_ETC2&&C$zus!==C$zuf.RGBA_ETC2||C$zue.ext("WEBGL_compressed_texture_etc"))&&(".webp"===C$zuc&&!cc.sys.capabilities.webp||(C$zuu=C$zul,C$zua=C$zuc,C$zu_=C$zus))):C$zun=C$zun||C$zuc}C$zua?(this._setRawAsset(C$zua),this._format=C$zu_):(this._setRawAsset(C$zun),cc.warnID(3120,C$zuh.customEnv.url,C$zun,C$zun))}8===C$zut.length&&(this._minFilter=parseInt(C$zut[1]),this._magFilter=parseInt(C$zut[2]),this._wrapS=parseInt(C$zut[3]),this._wrapT=parseInt(C$zut[4]),this._premultiplyAlpha=49===C$zut[5].charCodeAt(0),this._genMipmaps=49===C$zut[6].charCodeAt(0),this._packable=49===C$zut[7].charCodeAt(0))},_getHash:function(){if(!this._hashDirty)return this._hash;var C$zut=this._genMipmaps?1:0;var C$zue=this._premultiplyAlpha?1:0;var C$zui=this._flipY?1:0;var C$zur=this._minFilter===C$zul.LINEAR?1:2;var C$zun=this._magFilter===C$zul.LINEAR?1:2;var C$zua=this._wrapS===C$zuc.REPEAT?1:this._wrapS===C$zuc.CLAMP_TO_EDGE?2:3;var C$zuo=this._wrapT===C$zuc.REPEAT?1:this._wrapT===C$zuc.CLAMP_TO_EDGE?2:3;var C$zus=this._format;this._image;return this._hash=Number(""+C$zur+C$zun+C$zus+C$zua+C$zuo+C$zut+C$zue+C$zui),this._hashDirty=!1,this._hash},_isCompressed:function(){return this._format<C$zuf.A8||this._format>C$zuf.RGBA32F},_clearImage:function(){cc.loader.removeItem(this._image.id||this._image.src),this._image.src=""}});cc.Texture2D=C$zun.exports=C$zup},{"../../renderer/gfx":312,"../assets/CCAsset":34,"../event/event-target":115,"../platform/CCClass":189,"../platform/id-generater":205,"../renderer":220}],51:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCRawAsset"),C$zut("./CCAsset"),C$zut("./CCFont"),C$zut("./CCPrefab"),C$zut("./CCAudioClip"),C$zut("./CCScripts"),C$zut("./CCSceneAsset"),C$zut("./CCSpriteFrame"),C$zut("./CCTexture2D"),C$zut("./CCRenderTexture"),C$zut("./CCTTFFont"),C$zut("./CCSpriteAtlas"),C$zut("./CCBitmapFont"),C$zut("./CCLabelAtlas"),C$zut("./CCTextAsset"),C$zut("./CCJsonAsset"),C$zut("./CCBufferAsset"),C$zut("./material")},{"./CCAsset":34,"./CCAudioClip":35,"./CCBitmapFont":36,"./CCBufferAsset":37,"./CCFont":38,"./CCJsonAsset":39,"./CCLabelAtlas":40,"./CCPrefab":41,"./CCRawAsset":42,"./CCRenderTexture":43,"./CCSceneAsset":44,"./CCScripts":45,"./CCSpriteAtlas":46,"./CCSpriteFrame":47,"./CCTTFFont":48,"./CCTextAsset":49,"./CCTexture2D":50,"./material":58}],52:[function(C$zut,C$zue,C$zui){"use strict";C$zur=(C$zur=C$zut("../CCAsset"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;var C$zun=C$zut("./effect-parser");C$zut=cc.Class({name:"cc.EffectAsset",extends:C$zur.default,ctor:function(){this._effect=null},properties:{properties:Object,techniques:[],shaders:[]},onLoad:function(){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){var C$zut=cc.renderer._forward._programLib;for(var C$zue=0;C$zue<this.shaders.length;C$zue++)C$zut.define(this.shaders[C$zue]);this._initEffect()}},_initEffect:function(){this._effect||(this._effect=(0,C$zun.parseEffect)(this),Object.freeze(this._effect))},getInstantiatedEffect:function(){return this._initEffect(),this._effect.clone()},getEffect:function(){return this._initEffect(),this._effect}});C$zue.exports=cc.EffectAsset=C$zut},{"../CCAsset":34,"./effect-parser":55}],53:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=C$zut("../CCAsset");var C$zus=C$zut("../CCTexture2D");var C$zuc=C$zus.PixelFormat;var C$zun=C$zut("./CCEffectAsset");var C$zul=C$zut("../../utils/texture-util");var C$zuh=cc.gfx;C$zut=cc.Enum({SPRITE:"2d-sprite",GRAY_SPRITE:"2d-gray-sprite",UNLIT:"unlit"});var C$zua=cc.Class({name:"cc.Material",extends:C$zur,ctor:function(){this._manualHash=!1,this._dirty=!0,this._effect=null},properties:{_defines:{default:void 0,type:Object},_props:{default:void 0,type:Object},_effectAsset:{type:C$zun,default:null},_techniqueIndex:0,_techniqueData:Object,effectName:void 0,effectAsset:{get:function(){return this._effectAsset},set:function(C$zut){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&((this._effectAsset=C$zut)?this._effect=this._effectAsset.getInstantiatedEffect():cc.error("Can not set an empty effect asset."))}},effect:{get:function(){return this._effect}},techniqueIndex:{get:function(){return this._techniqueIndex},set:function(C$zut){this._techniqueIndex=C$zut,this._effect.switchTechnique(C$zut)}}},statics:{getBuiltinMaterial:function(C$zut){return cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Material:cc.AssetLibrary.getBuiltin("material","builtin-"+C$zut)},BUILTIN_NAME:C$zut,createWithBuiltin:function(C$zut,C$zue){void 0===C$zue&&(C$zue=0);C$zut=cc.AssetLibrary.getBuiltin("effect","builtin-"+C$zut);return C$zua.create(C$zut,C$zue)},create:function(C$zut,C$zue){if(void 0===C$zue&&(C$zue=0),!C$zut)return null;var C$zui=new C$zua;return C$zui.effectAsset=C$zut,C$zui.techniqueIndex=C$zue,C$zui}},setProperty:function(C$zut,C$zue,C$zui,C$zur){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){if("string"==typeof C$zui&&(C$zui=parseInt(C$zui)),C$zue instanceof C$zus){var C$zun=C$zue.getPixelFormat();C$zun=C$zun===C$zuc.RGBA_ETC1||C$zun===C$zuc.RGB_A_PVRTC_4BPPV1||C$zun===C$zuc.RGB_A_PVRTC_2BPPV1;var C$zua="CC_USE_ALPHA_ATLAS_"+C$zut;var C$zuo=this.getDefine(C$zua,C$zui);if((C$zun||C$zuo)&&this.define(C$zua,C$zun),!C$zue.loaded)return C$zue.once("load",function(){this._effect.setProperty(C$zut,C$zue,C$zui)},this),void C$zul.postLoadTexture(C$zue)}this._effect.setProperty(C$zut,C$zue,C$zui,C$zur)}},getProperty:function(C$zut,C$zue){return"string"==typeof C$zue&&(C$zue=parseInt(C$zue)),this._effect.getProperty(C$zut,C$zue)},define:function(C$zut,C$zue,C$zui,C$zur){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&("string"==typeof C$zui&&(C$zui=parseInt(C$zui)),this._effect.define(C$zut,C$zue,C$zui,C$zur))},getDefine:function(C$zut,C$zue){return"string"==typeof C$zue&&(C$zue=parseInt(C$zue)),this._effect.getDefine(C$zut,C$zue)},setCullMode:function(C$zut,C$zue){void 0===C$zut&&(C$zut=C$zuh.CULL_BACK),this._effect.setCullMode(C$zut,C$zue)},setDepth:function(C$zut,C$zue,C$zui,C$zur){void 0===C$zui&&(C$zui=C$zuh.DS_FUNC_LESS),this._effect.setDepth(C$zut=void 0===C$zut?!1:C$zut,C$zue=void 0===C$zue?!1:C$zue,C$zui,C$zur)},setBlend:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){void 0===C$zue&&(C$zue=C$zuh.BLEND_FUNC_ADD),void 0===C$zui&&(C$zui=C$zuh.BLEND_SRC_ALPHA),void 0===C$zur&&(C$zur=C$zuh.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$zun&&(C$zun=C$zuh.BLEND_FUNC_ADD),void 0===C$zua&&(C$zua=C$zuh.BLEND_SRC_ALPHA),void 0===C$zuo&&(C$zuo=C$zuh.BLEND_ONE_MINUS_SRC_ALPHA),this._effect.setBlend(C$zut=void 0===C$zut?!1:C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus=void 0===C$zus?4294967295:C$zus,C$zuc)},setStencilEnabled:function(C$zut,C$zue){void 0===C$zut&&(C$zut=C$zuh.STENCIL_INHERIT),this._effect.setStencilEnabled(C$zut,C$zue)},setStencil:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){void 0===C$zut&&(C$zut=C$zuh.STENCIL_INHERIT),void 0===C$zue&&(C$zue=C$zuh.DS_FUNC_ALWAYS),void 0===C$zun&&(C$zun=C$zuh.STENCIL_OP_KEEP),void 0===C$zua&&(C$zua=C$zuh.STENCIL_OP_KEEP),void 0===C$zuo&&(C$zuo=C$zuh.STENCIL_OP_KEEP),this._effect.setStencil(C$zut,C$zue,C$zui=void 0===C$zui?0:C$zui,C$zur=void 0===C$zur?255:C$zur,C$zun,C$zua,C$zuo,C$zus=void 0===C$zus?255:C$zus,C$zuc)},updateHash:function(C$zut){this._manualHash=C$zut,this._effect&&this._effect.updateHash(C$zut)},getHash:function(){return this._manualHash||this._effect&&this._effect.getHash()},onLoad:function(){if(this.effectAsset=this._effectAsset,this._effect){this._techniqueIndex&&this._effect.switchTechnique(this._techniqueIndex),this._techniqueData=this._techniqueData||{};var C$zut=this._techniqueData;for(var C$zue in C$zut){var C$zui=C$zut[C$zue=parseInt(C$zue)];if(C$zui){for(var C$zur in C$zui.defines)this.define(C$zur,C$zui.defines[C$zur],C$zue);for(var C$zun in C$zui.props)this.setProperty(C$zun,C$zui.props[C$zun],C$zue)}}}}});C$zui.default=C$zua,cc.Material=C$zua,C$zue.exports=C$zui.default},{"../../utils/texture-util":272,"../CCAsset":34,"../CCTexture2D":50,"./CCEffectAsset":52}],54:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zua=(C$zut=C$zut("../../../renderer/core/pass"))&&C$zut.__esModule?C$zut:{default:C$zut};function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}var C$zuo=cc.gfx;(C$zut=EffectBase.prototype)._createPassProp=function(C$zut,C$zue){var C$zui=C$zue._properties[C$zut];var C$zur;if(C$zui)return C$zur=Object.create(null),C$zur.name=C$zut,C$zur.type=C$zui.type,C$zui.value instanceof Float32Array?C$zur.value=new Float32Array(C$zui.value):C$zur.value=C$zui.value,C$zue._properties[C$zut]=C$zur},C$zut._setPassProperty=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zui._properties.hasOwnProperty(C$zut);if(C$zun){if(C$zun.value===C$zue)return}else C$zun=this._createPassProp(C$zut,C$zui);return this._dirty=!0,C$zua.default.prototype.setProperty.call(C$zui,C$zut,C$zue,C$zur)},C$zut.setProperty=function(C$zut,C$zue,C$zui,C$zur){var C$zun=!1;var C$zua=this.passes;var C$zuo=0,C$zus=C$zua.length;void 0!==C$zui&&(C$zus=(C$zuo=C$zui)+1);for(var C$zuc=C$zuo;C$zuc<C$zus;C$zuc++)this._setPassProperty(C$zut,C$zue,C$zua[C$zuc],C$zur)&&(C$zun=!0);C$zun||cc.warnID(9103,this.name,C$zut)},C$zut.getProperty=function(C$zut,C$zue){var C$zui=this.passes;if(!(C$zue>=C$zui.length)){var C$zur=0,C$zun=C$zui.length;void 0!==C$zue&&(C$zun=(C$zur=C$zue)+1);for(var C$zua=C$zur;C$zua<C$zun;C$zua++){var C$zuo=C$zui[C$zua].getProperty(C$zut);if(void 0!==C$zuo)return C$zuo}}},C$zut.define=function(C$zut,C$zue,C$zui,C$zur){var C$zun=!1;var C$zua=this.passes;var C$zuo=0,C$zus=C$zua.length;void 0!==C$zui&&(C$zus=(C$zuo=C$zui)+1);for(var C$zuc=C$zuo;C$zuc<C$zus;C$zuc++)C$zua[C$zuc].define(C$zut,C$zue,C$zur)&&(C$zun=!0);C$zun||cc.warnID(9104,this.name,C$zut)},C$zut.getDefine=function(C$zut,C$zue){var C$zui=this.passes;if(!(C$zue>=C$zui.length)){var C$zur=0,C$zun=C$zui.length;void 0!==C$zue&&(C$zun=(C$zur=C$zue)+1);for(var C$zua=C$zur;C$zua<C$zun;C$zua++){var C$zuo=C$zui[C$zua].getDefine(C$zut);if(void 0!==C$zuo)return C$zuo}}},C$zut.setCullMode=function(C$zut,C$zue){void 0===C$zut&&(C$zut=C$zuo.CULL_BACK);var C$zui=this.passes;var C$zur=0,C$zun=C$zui.length;void 0!==C$zue&&(C$zun=(C$zur=C$zue)+1);for(var C$zua=C$zur;C$zua<C$zun;C$zua++)C$zui[C$zua].setCullMode(C$zut);this._dirty=!0},C$zut.setDepth=function(C$zut,C$zue,C$zui,C$zur){var C$zun=this.passes;var C$zua=0,C$zuo=C$zun.length;void 0!==C$zur&&(C$zuo=(C$zua=C$zur)+1);for(var C$zus=C$zua;C$zus<C$zuo;C$zus++)C$zun[C$zus].setDepth(C$zut,C$zue,C$zui);this._dirty=!0},C$zut.setBlend=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zuh,C$zuu,C$zu_,C$zua){var C$zuo=this.passes;var C$zus=0,C$zuc=C$zuo.length;void 0!==C$zua&&(C$zuc=(C$zus=C$zua)+1);for(var C$zul=C$zus;C$zul<C$zuc;C$zul++)C$zuo[C$zul].setBlend(C$zut,C$zue,C$zui,C$zur,C$zun,C$zuh,C$zuu,C$zu_);this._dirty=!0},C$zut.setStencilEnabled=function(C$zut,C$zue){void 0===C$zut&&(C$zut=C$zuo.STENCIL_INHERIT);var C$zui=this.passes;var C$zur=0,C$zun=C$zui.length;void 0!==C$zue&&(C$zun=(C$zur=C$zue)+1);for(var C$zua=C$zur;C$zua<C$zun;C$zua++)C$zui[C$zua].setStencilEnabled(C$zut);this._dirty=!0},C$zut.setStencil=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){var C$zuh=this.passes;var C$zuu=0,C$zu_=C$zuh.length;void 0!==C$zuc&&(C$zu_=(C$zuu=C$zuc)+1);for(var C$zul=C$zuu;C$zul<C$zu_;C$zul++){var C$zud=C$zuh[C$zul];C$zud.setStencilFront(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus),C$zud.setStencilBack(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus)}this._dirty=!0},C$zut=EffectBase,(C$zur=[{key:"name",get:function(){return this._name}},{key:"technique",get:function(){return this._technique}},{key:"passes",get:function(){return[]}}])&&_defineProperties(C$zut.prototype,C$zur),C$zun&&_defineProperties(C$zut,C$zun);C$zur=EffectBase;function EffectBase(){this._dirty=!0,this._name="",this._technique=null}var C$zur,C$zun;C$zui.default=C$zur,cc.EffectBase=C$zur,C$zue.exports=C$zui.default},{"../../../renderer/core/pass":303}],55:[function(C$zut,C$zur,C$zue){"use strict";C$zue.__esModule=!0,C$zue.parseEffect=function(C$zut){var C$zue=function(C$zut){var C$zue=C$zut.techniques.length;var C$zui=new Array(C$zue);for(var C$zur=0;C$zur<C$zue;++C$zur){var C$zun=C$zut.techniques[C$zur];var C$zuh=C$zun.name||C$zur;var C$zuu=C$zun.passes.length;var C$zu_=new Array(C$zuu);for(var C$zua=0;C$zua<C$zuu;++C$zua){var C$zuo=C$zun.passes[C$zua];var C$zus=C$zuo.name||C$zua;var C$zuc=C$zut.name+"-"+C$zuh+"-"+C$zus;var C$zul=C$zuo.stage||"opaque";var C$zud=function(C$zut,C$zue){var C$zur=C$zue.properties||{};var C$zui=getInvolvedProgram(C$zue.program);for(var C$zun in C$zur)(function(C$zue){if(!C$zui.uniforms.find(function(C$zut){return C$zut.name===C$zue}))cc.warnID(9107,C$zut.name,C$zue)})(C$zun);var C$zua={};return C$zui.uniforms.forEach(function(C$zut){var C$zue=C$zut.name,C$zui=C$zua[C$zue]=Object.assign({},C$zut),C$zue=C$zur[C$zue];C$zum.enums2default[C$zut.type];C$zue=C$zue?C$zue.type===C$zuv.default.PARAM_TEXTURE_2D?null:C$zue.type===C$zuv.default.PARAM_INT||C$zue.type===C$zuv.default.PARAM_FLOAT?Array.isArray(C$zue.value)?C$zue.value[0]:C$zue.value:new Float32Array(C$zue.value):C$zum.enums2default[C$zut.type],C$zui.value=C$zue}),C$zua}(C$zut,C$zuo);var C$zuf=function(C$zut){var C$zue={};return getInvolvedProgram(C$zut.program).defines.forEach(function(C$zut){C$zue[C$zut.name]=C$zum.enums2default[C$zut.type]}),C$zue}(C$zuo);C$zus=C$zu_[C$zua]=new C$zup.default(C$zus,C$zuc,C$zuo.program,C$zul,C$zud,C$zuf);C$zuo.rasterizerState&&C$zus.setCullMode(C$zuo.rasterizerState.cullMode);C$zuc=C$zuo.blendState&&C$zuo.blendState.targets[0];C$zuc&&C$zus.setBlend(C$zuc.blend,C$zuc.blendEq,C$zuc.blendSrc,C$zuc.blendDst,C$zuc.blendAlphaEq,C$zuc.blendSrcAlpha,C$zuc.blendDstAlpha,C$zuc.blendColor);C$zul=C$zuo.depthStencilState;C$zul&&(C$zus.setDepth(C$zul.depthTest,C$zul.depthWrite,C$zul.depthFunc),C$zus.setStencilFront(C$zul.stencilTest,C$zul.stencilFuncFront,C$zul.stencilRefFront,C$zul.stencilMaskFront,C$zul.stencilFailOpFront,C$zul.stencilZFailOpFront,C$zul.stencilZPassOpFront,C$zul.stencilWriteMaskFront),C$zus.setStencilBack(C$zul.stencilTest,C$zul.stencilFuncBack,C$zul.stencilRefBack,C$zul.stencilMaskBack,C$zul.stencilFailOpBack,C$zul.stencilZFailOpBack,C$zul.stencilZPassOpBack,C$zul.stencilWriteMaskBack))}C$zui[C$zur]=new C$zuy.default(C$zuh,C$zu_)}return C$zui}(C$zut);return new C$zui.default(C$zut.name,C$zue,0,C$zut)};var C$zup=_interopRequireDefault(C$zut("../../../renderer/core/pass"));var C$zum=C$zut("../../../renderer/types");var C$zuv=_interopRequireDefault(C$zut("../../../renderer/enums"));var C$zui=_interopRequireDefault(C$zut("./effect"));var C$zuy=_interopRequireDefault(C$zut("../../../renderer/core/technique"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function getInvolvedProgram(C$zut){return cc.renderer._forward._programLib.getTemplate(C$zut)}},{"../../../renderer/core/pass":303,"../../../renderer/core/technique":305,"../../../renderer/enums":307,"../../../renderer/types":335,"./effect":57}],56:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zun=_interopRequireDefault(C$zut("../../../renderer/murmurhash2_gc"));var C$zua=_interopRequireDefault(C$zut("./utils"));C$zut=_interopRequireDefault(C$zut("./effect-base"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}cc.gfx;C$zut=function(C$zui){C$zur=C$zui,(C$zut=EffectVariant).prototype=Object.create(C$zur.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zur;_createSuper(EffectVariant);var C$zut,C$zue;function EffectVariant(C$zut){var C$zue;return(C$zue=C$zui.call(this)||this)._effect=void 0,C$zue._passes=[],C$zue._stagePasses={},C$zue._hash=0,C$zue.init(C$zut),C$zue}C$zut=EffectVariant,(C$zur=[{key:"effect",get:function(){return this._effect}},{key:"name",get:function(){return this._effect&&this._effect.name+" (variant)"}},{key:"passes",get:function(){return this._passes}},{key:"stagePasses",get:function(){return this._stagePasses}}])&&_defineProperties(C$zut.prototype,C$zur),C$zue&&_defineProperties(C$zut,C$zue);var C$zur=EffectVariant.prototype;return C$zur._onEffectChanged=function(){},C$zur.init=function(C$zut){if(C$zut instanceof EffectVariant&&(C$zut=C$zut.effect),this._effect=C$zut,this._dirty=!0,C$zut){var C$zue=C$zut.passes;var C$zui=this._passes;C$zui.length=0;var C$zur=this._stagePasses={};for(var C$zun=0;C$zun<C$zue.length;C$zun++){var C$zua=C$zui[C$zun]=Object.setPrototypeOf({},C$zue[C$zun]);C$zua._properties=Object.setPrototypeOf({},C$zue[C$zun]._properties),C$zua._defines=Object.setPrototypeOf({},C$zue[C$zun]._defines),C$zur[C$zua._stage]||(C$zur[C$zua._stage]=[]),C$zur[C$zua._stage].push(C$zua)}}},C$zur.updateHash=function(C$zut){},C$zur.getHash=function(){if(!this._dirty)return this._hash;this._dirty=!1;var C$zut="";C$zut+=C$zua.default.serializePasses(this._passes);var C$zue=this._effect;return C$zue&&(C$zut+=C$zua.default.serializePasses(C$zue.passes)),this._hash=(0,C$zun.default)(C$zut,666),this.updateHash(this._hash),this._hash},EffectVariant}(C$zut.default);C$zui.default=C$zut,cc.EffectVariant=C$zut,C$zue.exports=C$zui.default},{"../../../renderer/murmurhash2_gc":330,"./effect-base":54,"./utils":61}],57:[function(C$zut,C$zue,C$zui){"use strict";function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zui.__esModule=!0,C$zui.default=void 0;C$zut=function(C$zua){C$zui=C$zua,(C$zut=Effect).prototype=Object.create(C$zui.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zui;_createSuper(Effect);var C$zut,C$zue;function Effect(C$zut,C$zue,C$zui,C$zur){var C$zun;return(C$zun=C$zua.call(this)||this)._techniques=[],C$zun._asset=null,C$zun.init(C$zut,C$zue,C$zui,C$zur,!0),C$zun}C$zut=Effect,(C$zui=[{key:"technique",get:function(){return this._technique}},{key:"passes",get:function(){return this._technique.passes}}])&&_defineProperties(C$zut.prototype,C$zui),C$zue&&_defineProperties(C$zut,C$zue);var C$zui=Effect.prototype;return C$zui.init=function(C$zut,C$zue,C$zui,C$zur,C$zun){this._name=C$zut,this._techniques=C$zue,this._technique=C$zue[C$zui],this._asset=C$zur},C$zui.switchTechnique=function(C$zut){C$zut>=this._techniques.length?cc.warn("Can not switch to technique with index ["+C$zut+"]"):this._technique=this._techniques[C$zut]},C$zui.clear=function(){this._techniques=[]},C$zui.clone=function(){var C$zut=[];for(var C$zue=0;C$zue<this._techniques.length;C$zue++)C$zut.push(this._techniques[C$zue].clone());var C$zui=this._techniques.indexOf(this._technique);return new Effect(this._name,C$zut,C$zui,this._asset)},Effect}(((C$zut=C$zut("./effect-base"))&&C$zut.__esModule?C$zut:{default:C$zut}).default);C$zui.default=C$zut,cc.Effect=C$zut,C$zue.exports=C$zui.default},{"./effect-base":54}],58:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCEffectAsset"),C$zut("./CCMaterial"),C$zut("./material-variant")},{"./CCEffectAsset":52,"./CCMaterial":53,"./material-variant":60}],59:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zua=_interopRequireDefault(C$zut("./utils"));C$zut=_interopRequireDefault(C$zut("../../utils/pool"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zur=new(function(C$zun){var C$zut;C$zut=C$zun,(C$zue=MaterialPool).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(MaterialPool);function MaterialPool(){var C$zut;for(var C$zue=arguments.length,C$zui=new Array(C$zue),C$zur=0;C$zur<C$zue;C$zur++)C$zui[C$zur]=arguments[C$zur];return(C$zut=C$zun.call.apply(C$zun,[this].concat(C$zui))||this).enabled=!1,C$zut._pool={},C$zut}var C$zue=MaterialPool.prototype;return C$zue.get=function(C$zut,C$zue){var C$zui=this._pool;if(C$zut instanceof cc.MaterialVariant){if(!C$zut._owner)return C$zut._owner=C$zue,C$zut;if(C$zut._owner===C$zue)return C$zut;C$zut=C$zut.material}var C$zur,C$zun;return!this.enabled||C$zui[C$zur=C$zut.effectAsset._uuid]&&(C$zun=C$zua.default.serializeDefines(C$zut._effect._defines)+C$zua.default.serializeTechniques(C$zut._effect._techniques),C$zun=C$zui[C$zur][C$zun]&&C$zui[C$zur][C$zun].pop()),C$zun?this.count--:((C$zun=new cc.MaterialVariant(C$zut))._name=C$zut._name+" (Instance)",C$zun._uuid=C$zut._uuid),C$zun._owner=C$zue,C$zun},C$zue.put=function(C$zut){var C$zue,C$zui,C$zur;this.enabled&&C$zut._owner&&((C$zue=this._pool)[C$zui=C$zut.effectAsset._uuid]||(C$zue[C$zui]={}),C$zur=C$zua.default.serializeDefines(C$zut._effect._defines)+C$zua.default.serializeTechniques(C$zut._effect._techniques),C$zue[C$zui][C$zur]||(C$zue[C$zui][C$zur]=[]),this.count>this.maxSize||(this._clean(C$zut),C$zue[C$zui][C$zur].push(C$zut),this.count++))},C$zue.clear=function(){this._pool={},this.count=0},C$zue._clean=function(C$zut){C$zut._owner=null},MaterialPool}(C$zut.default));C$zut.default.register("material",C$zur),C$zui.default=C$zur,C$zue.exports=C$zui.default},{"../../utils/pool":266,"./utils":61}],60:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zun=_interopRequireDefault(C$zut("./CCMaterial"));var C$zua=_interopRequireDefault(C$zut("./effect-variant"));var C$zuo=_interopRequireDefault(C$zut("./material-pool"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zut=(0,cc._decorator.ccclass)("cc.MaterialVariant")(C$zut=function(C$zui){C$zue=C$zui,(C$zut=MaterialVariant).prototype=Object.create(C$zue.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zue;_createSuper(MaterialVariant);var C$zut,C$zue,C$zur;function MaterialVariant(C$zut){var C$zue;return(C$zue=C$zui.call(this)||this)._owner=null,C$zue._material=null,C$zue.init(C$zut),C$zue}return MaterialVariant.createWithBuiltin=function(C$zut,C$zue){return MaterialVariant.create(C$zun.default.getBuiltinMaterial(C$zut),C$zue)},MaterialVariant.create=function(C$zut,C$zue){return C$zut?C$zuo.default.get(C$zut,C$zue):null},C$zut=MaterialVariant,(C$zue=[{key:"uuid",get:function(){return this._material.uuid}},{key:"owner",get:function(){return this._owner}},{key:"material",get:function(){return this._material}}])&&_defineProperties(C$zut.prototype,C$zue),C$zur&&_defineProperties(C$zut,C$zur),MaterialVariant.prototype.init=function(C$zut){this._effect=new C$zua.default(C$zut.effect),this._effectAsset=C$zut._effectAsset,this._material=C$zut},MaterialVariant}(C$zun.default))||C$zut;C$zui.default=C$zut,cc.MaterialVariant=C$zut,C$zue.exports=C$zui.default},{"./CCMaterial":53,"./effect-variant":56,"./material-pool":59}],61:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zun=(C$zut=C$zut("../../../renderer/enums"))&&C$zut.__esModule?C$zut:{default:C$zut};function serializeDefines(C$zut){var C$zue="";for(var C$zui in C$zut)C$zue+=C$zui+C$zut[C$zui];return C$zue}function serializeUniforms(C$zut){var C$zue="";for(var C$zui in C$zut){C$zui=C$zut[C$zui];var C$zur=C$zui.value;C$zur&&(C$zui.type===C$zun.default.PARAM_TEXTURE_2D||C$zui.type===C$zun.default.PARAM_TEXTURE_CUBE?C$zue+=C$zur._id+";":C$zue+=C$zur.toString()+";")}return C$zue}C$zui.default={serializeDefines:serializeDefines,serializePasses:function(C$zut){var C$zue="";for(var C$zui=0;C$zui<C$zut.length;C$zui++)C$zue+=(C$zur=C$zut[C$zui],C$zua=C$zun=void 0,C$zua=C$zur._programName+C$zur._cullMode,C$zur._blend&&(C$zua+=C$zur._blendEq+C$zur._blendAlphaEq+C$zur._blendSrc+C$zur._blendDst+C$zur._blendSrcAlpha+C$zur._blendDstAlpha+C$zur._blendColor),C$zur._depthTest&&(C$zua+=C$zur._depthWrite+C$zur._depthFunc),C$zur._stencilTest&&(C$zua+=C$zur._stencilFuncFront+C$zur._stencilRefFront+C$zur._stencilMaskFront+C$zur._stencilFailOpFront+C$zur._stencilZFailOpFront+C$zur._stencilZPassOpFront+C$zur._stencilWriteMaskFront+C$zur._stencilFuncBack+C$zur._stencilRefBack+C$zur._stencilMaskBack+C$zur._stencilFailOpBack+C$zur._stencilZFailOpBack+C$zur._stencilZPassOpBack+C$zur._stencilWriteMaskBack),C$zun||(C$zua+=serializeUniforms(C$zur._properties)),C$zua+=serializeDefines(C$zur._defines));var C$zur,C$zun,C$zua;return C$zue},serializeUniforms:serializeUniforms},C$zue.exports=C$zui.default},{"../../../renderer/enums":307}],62:[function(C$zut,C$zue,C$zui){"use strict";C$zut("../CCNode").EventType;var C$zub=56;var C$zuC=7;var C$zua=cc.Enum({ONCE:0,ON_WINDOW_RESIZE:1,ALWAYS:2});var C$zux=cc.Vec2.ZERO;var C$zuA=cc.Vec2.ONE;function align(C$zut,C$zue){var C$zuh=C$zue._target;var C$zuu;var C$zu_,C$zui;C$zuh?function(C$zut,C$zuh,C$zue,C$zui){var C$zur=C$zut._parent.scaleX;var C$zun=C$zut._parent.scaleY;var C$zua=0;var C$zuo=0;for(var C$zus=C$zut._parent;;){if(C$zua+=C$zus.x,C$zuo+=C$zus.y,!(C$zus=C$zus._parent))return C$zue.x=C$zue.y=0,C$zui.x=C$zui.y=1;if(C$zus===C$zuh)break;var C$zuc=C$zus.scaleX;var C$zul=C$zus.scaleY;C$zua*=C$zuc,C$zuo*=C$zul,C$zur*=C$zuc,C$zun*=C$zul}C$zui.x=0!==C$zur?1/C$zur:1,C$zui.y=0!==C$zun?1/C$zun:1,C$zue.x=-C$zua,C$zue.y=-C$zuo}(C$zut,C$zuu=C$zuh,C$zu_=C$zux,C$zui=C$zuA):C$zuu=C$zut._parent;C$zud=(C$zud=C$zuu)instanceof cc.Scene?cc.visibleRect:C$zud._contentSize;var C$zud;var C$zuf=C$zuu._anchorPoint;var C$zup=C$zuu instanceof cc.Scene;var C$zum=C$zut.x,C$zuv=C$zut.y;var C$zuy=C$zut._anchorPoint;var C$zur,C$zun,C$zua,C$zug,C$zuo,C$zus,C$zuc,C$zul;C$zue._alignFlags&C$zub&&(C$zua=C$zud.width,C$zus=C$zup?(C$zuo=cc.visibleRect.left.x,cc.visibleRect.right.x):(C$zuo=-C$zuf.x*C$zua)+C$zua,C$zuo+=C$zue._isAbsLeft?C$zue._left:C$zue._left*C$zua,C$zus-=C$zue._isAbsRight?C$zue._right:C$zue._right*C$zua,C$zuh&&(C$zuo=(C$zuo+=C$zu_.x)*C$zui.x,C$zus=(C$zus+=C$zu_.x)*C$zui.x),C$zuc=C$zuy.x,(C$zur=C$zut.scaleX)<0&&(C$zuc=1-C$zuc,C$zur=-C$zur),C$zum=C$zue.isStretchWidth?(C$zul=C$zus-C$zuo,0!==C$zur&&(C$zut.width=C$zul/C$zur),C$zuo+C$zuc*C$zul):(C$zul=C$zut.width*C$zur,C$zue.isAlignHorizontalCenter?(C$zur=C$zue._isAbsHorizontalCenter?C$zue._horizontalCenter:C$zue._horizontalCenter*C$zua,C$zua=(.5-C$zuf.x)*C$zud.width,C$zuh&&(C$zur*=C$zui.x,C$zua=(C$zua+=C$zu_.x)*C$zui.x),C$zua+(C$zuc-.5)*C$zul+C$zur):C$zue.isAlignLeft?C$zuo+C$zuc*C$zul:C$zus+(C$zuc-1)*C$zul)),C$zue._alignFlags&C$zuC&&(C$zua=C$zud.height,C$zur=C$zup?(C$zun=cc.visibleRect.bottom.y,cc.visibleRect.top.y):(C$zun=-C$zuf.y*C$zua)+C$zua,C$zun+=C$zue._isAbsBottom?C$zue._bottom:C$zue._bottom*C$zua,C$zur-=C$zue._isAbsTop?C$zue._top:C$zue._top*C$zua,C$zuh&&(C$zun=(C$zun+=C$zu_.y)*C$zui.y,C$zur=(C$zur+=C$zu_.y)*C$zui.y),C$zuo=C$zuy.y,(C$zus=C$zut.scaleY)<0&&(C$zuo=1-C$zuo,C$zus=-C$zus),C$zuv=C$zue.isStretchHeight?(C$zug=C$zur-C$zun,0!==C$zus&&(C$zut.height=C$zug/C$zus),C$zun+C$zuo*C$zug):(C$zug=C$zut.height*C$zus,C$zue.isAlignVerticalCenter?(C$zuc=C$zue._isAbsVerticalCenter?C$zue._verticalCenter:C$zue._verticalCenter*C$zua,C$zul=(.5-C$zuf.y)*C$zud.height,C$zuh&&(C$zuc*=C$zui.y,C$zul=(C$zul+=C$zu_.y)*C$zui.y),C$zul+(C$zuo-.5)*C$zug+C$zuc):C$zue.isAlignBottom?C$zun+C$zuo*C$zug:C$zur+(C$zuo-1)*C$zug)),C$zut.setPosition(C$zum,C$zuv)}function refreshScene(){var C$zut=cc.director.getScene();if(C$zut){if(C$zur.isAligning=!0,C$zur._nodesOrderDirty)C$zuo.length=0,function visitNode(C$zut){var C$zue=C$zut._widget;C$zue&&(align(C$zut,C$zue),C$zue.alignMode!==C$zua.ALWAYS?C$zue.enabled=!1:C$zuo.push(C$zue));var C$zui=C$zut._children;for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];C$zun._active&&visitNode(C$zun)}}(C$zut),C$zur._nodesOrderDirty=!1;else{var C$zue,C$zui=C$zur._activeWidgetsIterator;for(C$zui.i=0;C$zui.i<C$zuo.length;++C$zui.i)align((C$zue=C$zuo[C$zui.i]).node,C$zue)}C$zur.isAligning=!1}}var C$zuo=[];var C$zur=cc._widgetManager=C$zue.exports={_AlignFlags:{TOP:1,MID:2,BOT:4,LEFT:8,CENTER:16,RIGHT:32},isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new cc.js.array.MutableForwardIterator(C$zuo),init:function(C$zut){C$zut.on(cc.Director.EVENT_AFTER_UPDATE,refreshScene);C$zut=this.onResized.bind(this);window.addEventListener("resize",C$zut),window.addEventListener("orientationchange",C$zut)},add:function(C$zut){C$zut.node._widget=C$zut,this._nodesOrderDirty=!0},remove:function(C$zut){C$zut.node._widget=null,this._activeWidgetsIterator.remove(C$zut)},onResized:function(){var C$zut=cc.director.getScene();C$zut&&this.refreshWidgetOnResized(C$zut)},refreshWidgetOnResized:function(C$zut){var C$zue=cc.Node.isNode(C$zut)&&C$zut.getComponent(cc.Widget);C$zue&&C$zue.alignMode===C$zua.ON_WINDOW_RESIZE&&(C$zue.enabled=!0);var C$zui=C$zut._children;for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];this.refreshWidgetOnResized(C$zun)}},updateAlignment:function updateAlignment(C$zut){var C$zue=C$zut._parent;cc.Node.isNode(C$zue)&&updateAlignment(C$zue);var C$zui=C$zut._widget||C$zut.getComponent(cc.Widget);C$zui&&C$zue&&align(C$zut,C$zui)},AlignMode:C$zua}},{"../CCNode":30}],63:[function(C$zut,C$zuh,C$zuu){"use strict";var C$zua=C$zut("../value-types");var C$zu_=C$zut("../geom-utils");var C$zud=C$zut("../utils/affine-transform");var C$zur=C$zut("../renderer/index");var C$zuf=C$zut("../renderer/render-flow");var C$zui=C$zut("../CCGame");var C$zun=null;C$zun=C$zut("../../renderer/scene/camera");var C$zuo=cc.mat4();var C$zus=cc.mat4();var C$zup=cc.v3();var C$zum=cc.v3();var C$zue=cc.v3();var C$zuc=[];var C$zul=null;function repositionDebugCamera(){var C$zut,C$zue;C$zul&&(C$zut=C$zul.getNode(),C$zue=cc.game.canvas,C$zut.z=C$zue.height/1.1566,C$zut.x=C$zue.width/2,C$zut.y=C$zue.height/2)}C$zut=cc.Enum({COLOR:1,DEPTH:2,STENCIL:4});var C$zuv=cc.Enum({OPAQUE:1,TRANSPARENT:2});C$zut=cc.Class({name:"cc.Camera",extends:cc.Component,ctor:function(){var C$zut;C$zui.renderType!==C$zui.RENDER_TYPE_CANVAS?((C$zut=new C$zun).setStages(["opaque"]),C$zut.dirty=!0,this._inited=!1,this._camera=C$zut):this._inited=!0},editor:!1,properties:{_cullingMask:4294967295,_clearFlags:C$zut.DEPTH|C$zut.STENCIL,_backgroundColor:cc.color(0,0,0,255),_depth:0,_zoomRatio:1,_targetTexture:null,_fov:60,_orthoSize:10,_nearClip:1,_farClip:4096,_ortho:!0,_rect:cc.rect(0,0,1,1),_renderStages:1,_alignWithScreen:!0,zoomRatio:{get:function(){return this._zoomRatio},set:function(C$zut){this._zoomRatio=C$zut},tooltip:!1},fov:{get:function(){return this._fov},set:function(C$zut){this._fov=C$zut},tooltip:!1},orthoSize:{get:function(){return this._orthoSize},set:function(C$zut){this._orthoSize=C$zut},tooltip:!1},nearClip:{get:function(){return this._nearClip},set:function(C$zut){this._nearClip=C$zut,this._updateClippingpPlanes()},tooltip:!1},farClip:{get:function(){return this._farClip},set:function(C$zut){this._farClip=C$zut,this._updateClippingpPlanes()},tooltip:!1},ortho:{get:function(){return this._ortho},set:function(C$zut){this._ortho=C$zut,this._updateProjection()},tooltip:!1},rect:{get:function(){return this._rect},set:function(C$zut){this._rect=C$zut,this._updateRect()},tooltip:!1},cullingMask:{get:function(){return this._cullingMask},set:function(C$zut){this._cullingMask=C$zut,this._updateCameraMask()},tooltip:!1},clearFlags:{get:function(){return this._clearFlags},set:function(C$zut){this._clearFlags=C$zut,this._camera&&this._camera.setClearFlags(C$zut)},tooltip:!1},backgroundColor:{get:function(){return this._backgroundColor},set:function(C$zut){this._backgroundColor.equals(C$zut)||(this._backgroundColor.set(C$zut),this._updateBackgroundColor())},tooltip:!1},depth:{get:function(){return this._depth},set:function(C$zut){this._depth=C$zut,this._camera&&this._camera.setPriority(C$zut)},tooltip:!1},targetTexture:{get:function(){return this._targetTexture},set:function(C$zut){this._targetTexture=C$zut,this._updateTargetTexture()},tooltip:!1},renderStages:{get:function(){return this._renderStages},set:function(C$zut){this._renderStages=C$zut,this._updateStages()},tooltip:!1},alignWithScreen:{get:function(){return this._alignWithScreen},set:function(C$zut){this._alignWithScreen=C$zut}},_is3D:{get:function(){return this.node&&this.node._is3DNode}}},statics:{main:null,cameras:C$zuc,ClearFlags:C$zut,findCamera:function(C$zut){for(var C$zue=0,C$zui=C$zuc.length;C$zue<C$zui;C$zue++){var C$zur=C$zuc[C$zue];if(C$zur.containsNode(C$zut))return C$zur}return null},_findRendererCamera:function(C$zut){var C$zue=C$zur.scene._cameras;for(var C$zui=0;C$zui<C$zue._count;C$zui++)if(C$zue._data[C$zui]._cullingMask&C$zut._cullingMask)return C$zue._data[C$zui];return null},_setupDebugCamera:function(){var C$zut,C$zue;C$zul||C$zui.renderType!==C$zui.RENDER_TYPE_CANVAS&&(C$zut=new C$zun,(C$zul=C$zut).setStages(["opaque"]),C$zut.setFov(60*Math.PI/180),C$zut.setNear(.1),C$zut.setFar(4096),C$zut.dirty=!0,C$zut.cullingMask=1<<cc.Node.BuiltinGroupIndex.DEBUG,C$zut.setPriority(cc.macro.MAX_ZINDEX),C$zut.setClearFlags(0),C$zut.setColor(0,0,0,0),C$zue=new cc.Node,C$zut.setNode(C$zue),repositionDebugCamera(),cc.view.on("design-resolution-changed",repositionDebugCamera),C$zur.scene.addCamera(C$zut))}},_updateCameraMask:function(){var C$zut;this._camera&&(C$zut=this._cullingMask&~(1<<cc.Node.BuiltinGroupIndex.DEBUG),this._camera.cullingMask=C$zut)},_updateBackgroundColor:function(){var C$zut;this._camera&&(C$zut=this._backgroundColor,this._camera.setColor(C$zut.r/255,C$zut.g/255,C$zut.b/255,C$zut.a/255))},_updateTargetTexture:function(){var C$zut;this._camera&&(C$zut=this._targetTexture,this._camera.setFrameBuffer(C$zut?C$zut._framebuffer:null))},_updateClippingpPlanes:function(){this._camera&&(this._camera.setNear(this._nearClip),this._camera.setFar(this._farClip))},_updateProjection:function(){var C$zut;this._camera&&(C$zut=this._ortho?1:0,this._camera.setType(C$zut))},_updateRect:function(){var C$zut;this._camera&&(C$zut=this._rect,this._camera.setRect(C$zut.x,C$zut.y,C$zut.width,C$zut.height))},_updateStages:function(){var C$zut=this._renderStages;var C$zue=[];C$zut&C$zuv.OPAQUE&&C$zue.push("opaque"),C$zut&C$zuv.TRANSPARENT&&C$zue.push("transparent"),this._camera.setStages(C$zue)},_init:function(){var C$zut;this._inited||(this._inited=!0,(C$zut=this._camera)&&(C$zut.setNode(this.node),C$zut.setClearFlags(this._clearFlags),C$zut.setPriority(this._depth),this._updateBackgroundColor(),this._updateCameraMask(),this._updateTargetTexture(),this._updateClippingpPlanes(),this._updateProjection(),this._updateStages(),this._updateRect(),this.beforeDraw()))},onLoad:function(){this._init()},onEnable:function(){C$zui.renderType!==C$zui.RENDER_TYPE_CANVAS&&(cc.director.on(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),C$zur.scene.addCamera(this._camera)),C$zuc.push(this)},onDisable:function(){C$zui.renderType!==C$zui.RENDER_TYPE_CANVAS&&(cc.director.off(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),C$zur.scene.removeCamera(this._camera)),cc.js.array.remove(C$zuc,this)},getScreenToWorldMatrix2D:function(C$zut){return this.getWorldToScreenMatrix2D(C$zut),C$zua.Mat4.invert(C$zut,C$zut),C$zut},getWorldToScreenMatrix2D:function(C$zut){this.node.getWorldRT(C$zuo);var C$zue=this.zoomRatio;var C$zui=C$zuo.m;C$zui[0]*=C$zue,C$zui[1]*=C$zue,C$zui[4]*=C$zue,C$zui[5]*=C$zue;C$zue=C$zui[12];var C$zur=C$zui[13];var C$zun=cc.visibleRect.center;return C$zui[12]=C$zun.x-(C$zui[0]*C$zue+C$zui[4]*C$zur),C$zui[13]=C$zun.y-(C$zui[1]*C$zue+C$zui[5]*C$zur),C$zut!==C$zuo&&C$zua.Mat4.copy(C$zut,C$zuo),C$zut},getScreenToWorldPoint:function(C$zut,C$zue){return this.node.is3DNode?(C$zue=C$zue||new cc.Vec3,this._camera.screenToWorld(C$zue,C$zut,cc.visibleRect.width,cc.visibleRect.height)):(C$zue=C$zue||new cc.Vec2,this.getScreenToWorldMatrix2D(C$zuo),C$zua.Vec2.transformMat4(C$zue,C$zut,C$zuo)),C$zue},getWorldToScreenPoint:function(C$zut,C$zue){return this.node.is3DNode?(C$zue=C$zue||new cc.Vec3,this._camera.worldToScreen(C$zue,C$zut,cc.visibleRect.width,cc.visibleRect.height)):(C$zue=C$zue||new cc.Vec2,this.getWorldToScreenMatrix2D(C$zuo),C$zua.Vec2.transformMat4(C$zue,C$zut,C$zuo)),C$zue},getRay:function(C$zut){return cc.geomUtils?(C$zua.Vec3.set(C$zue,C$zut.x,C$zut.y,1),this._camera.screenToWorld(C$zum,C$zue,cc.visibleRect.width,cc.visibleRect.height),this.ortho?(C$zua.Vec3.set(C$zue,C$zut.x,C$zut.y,-1),this._camera.screenToWorld(C$zup,C$zue,cc.visibleRect.width,cc.visibleRect.height)):this.node.getWorldPosition(C$zup),C$zu_.Ray.fromPoints(new C$zu_.Ray,C$zup,C$zum)):C$zut},containsNode:function(C$zut){return C$zut._cullingMask&this.cullingMask},render:function(C$zut){if(!(C$zut=C$zut||cc.director.getScene()))return null;this.node.getWorldMatrix(C$zuo),this.beforeDraw(),C$zuf.render(C$zut),C$zur._forward.renderCamera(this._camera,C$zur.scene)},_onAlignWithScreen:function(){var C$zut=cc.game.canvas.height/cc.view._scaleY;this._targetTexture&&(C$zut=cc.visibleRect.height);var C$zue=this._fov*cc.macro.RAD;this.node.z=C$zut/(2*Math.tan(C$zue/2)),C$zue=2*Math.atan(Math.tan(C$zue/2)/this.zoomRatio),this._camera.setFov(C$zue),this._camera.setOrthoHeight(C$zut/2/this.zoomRatio),this.node.setRotation(0,0,0,1)},beforeDraw:function(){var C$zut;this._camera&&(this._alignWithScreen?this._onAlignWithScreen():(C$zut=this._fov*cc.macro.RAD,C$zut=2*Math.atan(Math.tan(C$zut/2)/this.zoomRatio),this._camera.setFov(C$zut),this._camera.setOrthoHeight(this._orthoSize/this.zoomRatio)),this._camera.dirty=!0)}});cc.js.mixin(C$zut.prototype,{getNodeToCameraTransform:function(C$zut){var C$zue=C$zud.identity();return C$zut.getWorldMatrix(C$zus),this.containsNode(C$zut)&&(this.getWorldToCameraMatrix(C$zuo),C$zua.Mat4.mul(C$zus,C$zus,C$zuo)),C$zud.fromMat4(C$zue,C$zus),C$zue},getCameraToWorldPoint:function(C$zut,C$zue){return this.getScreenToWorldPoint(C$zut,C$zue)},getWorldToCameraPoint:function(C$zut,C$zue){return this.getWorldToScreenPoint(C$zut,C$zue)},getCameraToWorldMatrix:function(C$zut){return this.getScreenToWorldMatrix2D(C$zut)},getWorldToCameraMatrix:function(C$zut){return this.getWorldToScreenMatrix2D(C$zut)}}),C$zuh.exports=cc.Camera=C$zut},{"../../renderer/scene/camera":332,"../CCGame":29,"../geom-utils":123,"../renderer/index":220,"../renderer/render-flow":221,"../utils/affine-transform":254,"../value-types":279}],64:[function(C$zut,C$zue,C$zui){"use strict";cc.Collider.Box=cc.Class({properties:{_offset:cc.v2(0,0),_size:cc.size(100,100),offset:{tooltip:!1,get:function(){return this._offset},set:function(C$zut){this._offset=C$zut},type:cc.Vec2},size:{tooltip:!1,get:function(){return this._size},set:function(C$zut){this._size.width=C$zut.width<0?0:C$zut.width,this._size.height=C$zut.height<0?0:C$zut.height},type:cc.Size}},resetInEditor:!1});var C$zur=cc.Class({name:"cc.BoxCollider",extends:cc.Collider,mixins:[cc.Collider.Box],editor:!1});cc.BoxCollider=C$zue.exports=C$zur},{}],65:[function(C$zut,C$zue,C$zui){"use strict";cc.Collider.Circle=cc.Class({properties:{_offset:cc.v2(0,0),_radius:50,offset:{get:function(){return this._offset},set:function(C$zut){this._offset=C$zut},type:cc.Vec2},radius:{tooltip:!1,get:function(){return this._radius},set:function(C$zut){this._radius=C$zut<0?0:C$zut}}},resetInEditor:!1});var C$zur=cc.Class({name:"cc.CircleCollider",extends:cc.Collider,mixins:[cc.Collider.Circle],editor:!1});cc.CircleCollider=C$zue.exports=C$zur},{}],66:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.Collider",extends:cc.Component,properties:{editing:{default:!1,serializable:!1,tooltip:!1},tag:{tooltip:!1,default:0,range:[0,1e7],type:cc.Integer}},onDisable:function(){cc.director.getCollisionManager().removeCollider(this)},onEnable:function(){cc.director.getCollisionManager().addCollider(this)}});cc.Collider=C$zue.exports=C$zur},{}],67:[function(C$zut,C$zue,C$zui){"use strict";var C$zuD=(C$zur=C$zut("../value-types/vec2"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zua=C$zut("./CCContact");var C$zuh=C$zua.CollisionType;var C$zuo=C$zut("../CCNode").EventType;var C$zuL=new C$zuD.default;var C$zur=cc.Class({mixins:[cc.EventTarget],properties:{enabled:!1,enabledDrawBoundingBox:!1},ctor:function(){this._contacts=[],this._colliders=[],this._debugDrawer=null,this._enabledDebugDraw=!1,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},update:function(C$zut){if(this.enabled){var C$zue,C$zui;var C$zur=this._colliders;for(C$zue=0,C$zui=C$zur.length;C$zue<C$zui;C$zue++)this.updateCollider(C$zur[C$zue]);var C$zun=this._contacts;var C$zua=[];for(C$zue=0,C$zui=C$zun.length;C$zue<C$zui;C$zue++){var C$zuo=C$zun[C$zue].updateState();C$zuo!==C$zuh.None&&C$zua.push([C$zuo,C$zun[C$zue]])}for(C$zue=0,C$zui=C$zua.length;C$zue<C$zui;C$zue++){var C$zus=C$zua[C$zue];this._doCollide(C$zus[0],C$zus[1])}this.drawColliders()}},_doCollide:function(C$zut,C$zue){var C$zui;switch(C$zut){case C$zuh.CollisionEnter:C$zui="onCollisionEnter";break;case C$zuh.CollisionStay:C$zui="onCollisionStay";break;case C$zuh.CollisionExit:C$zui="onCollisionExit"}var C$zur=C$zue.collider1;var C$zun=C$zue.collider2;var C$zua=C$zur.node._components;var C$zuo=C$zun.node._components;var C$zus,C$zuc,C$zul;for(C$zus=0,C$zuc=C$zua.length;C$zus<C$zuc;C$zus++)(C$zul=C$zua[C$zus])[C$zui]&&C$zul[C$zui](C$zun,C$zur);for(C$zus=0,C$zuc=C$zuo.length;C$zus<C$zuc;C$zus++)(C$zul=C$zuo[C$zus])[C$zui]&&C$zul[C$zui](C$zur,C$zun)},shouldCollide:function(C$zut,C$zue){C$zut=C$zut.node,C$zue=C$zue.node;var C$zui=cc.game.collisionMatrix;return C$zut!==C$zue&&C$zui[C$zut.groupIndex][C$zue.groupIndex]},initCollider:function(C$zut){var C$zue;C$zut.world||((C$zue=C$zut.world={}).aabb=cc.rect(),C$zue.preAabb=cc.rect(),C$zue.matrix=cc.mat4(),C$zue.radius=0,C$zut instanceof cc.BoxCollider?(C$zue.position=null,C$zue.points=[cc.v2(),cc.v2(),cc.v2(),cc.v2()]):C$zut instanceof cc.PolygonCollider?(C$zue.position=null,C$zue.points=C$zut.points.map(function(C$zut){return cc.v2(C$zut.x,C$zut.y)})):C$zut instanceof cc.CircleCollider&&(C$zue.position=cc.v2(),C$zue.points=null))},updateCollider:function(C$zut){var C$zuh=C$zut.offset;var C$zue=C$zut.world;var C$zui=C$zue.aabb;var C$zuu=C$zue.matrix;C$zut.node.getWorldMatrix(C$zuu);var C$zur=C$zue.preAabb;if(C$zur.x=C$zui.x,C$zur.y=C$zui.y,C$zur.width=C$zui.width,C$zur.height=C$zui.height,C$zut instanceof cc.BoxCollider){C$zur=C$zut.size;C$zui.x=C$zuh.x-C$zur.width/2,C$zui.y=C$zuh.y-C$zur.height/2,C$zui.width=C$zur.width,C$zui.height=C$zur.height;C$zur=C$zue.points;var C$zu_=C$zur[0],C$zud=C$zur[1],C$zuf=C$zur[2],C$zur=C$zur[3];C$zuo=C$zuu,C$zuS=C$zu_,C$zus=C$zud,C$zuT=C$zuf,C$zuw=C$zur,C$zuc=(C$zua=C$zui).x,C$zul=C$zua.y,C$zuE=C$zua.width,C$zua=C$zua.height,C$zuP=(C$zuo=C$zuo.m)[0],C$zuM=C$zuo[1],C$zuR=C$zuo[4],C$zuI=C$zuo[5],C$zuB=C$zuP*C$zuc+C$zuR*C$zul+C$zuo[12],C$zuc=C$zuM*C$zuc+C$zuI*C$zul+C$zuo[13],C$zul=C$zuP*C$zuE,C$zuo=C$zuM*C$zuE,C$zuP=C$zuR*C$zua,C$zuM=C$zuI*C$zua,C$zus.x=C$zuB,C$zus.y=C$zuc,C$zuT.x=C$zul+C$zuB,C$zuT.y=C$zuo+C$zuc,C$zuS.x=C$zuP+C$zuB,C$zuS.y=C$zuM+C$zuc,C$zuw.x=C$zul+C$zuP+C$zuB,C$zuw.y=C$zuo+C$zuM+C$zuc;C$zuE=Math.min(C$zu_.x,C$zud.x,C$zuf.x,C$zur.x);C$zuR=Math.min(C$zu_.y,C$zud.y,C$zuf.y,C$zur.y);C$zuI=Math.max(C$zu_.x,C$zud.x,C$zuf.x,C$zur.x);C$zua=Math.max(C$zu_.y,C$zud.y,C$zuf.y,C$zur.y);C$zui.x=C$zuE,C$zui.y=C$zuR,C$zui.width=C$zuI-C$zuE,C$zui.height=C$zua-C$zuR}else if(C$zut instanceof cc.CircleCollider){C$zuD.default.transformMat4(C$zuL,C$zut.offset,C$zuu),C$zue.position.x=C$zuL.x,C$zue.position.y=C$zuL.y;C$zus=C$zuu.m;C$zuT=C$zus[12],C$zuS=C$zus[13];C$zus[12]=C$zus[13]=0,C$zuL.x=C$zut.radius,C$zuL.y=0,C$zuD.default.transformMat4(C$zuL,C$zuL,C$zuu);C$zul=Math.sqrt(C$zuL.x*C$zuL.x+C$zuL.y*C$zuL.y);C$zue.radius=C$zul,C$zui.x=C$zue.position.x-C$zul,C$zui.y=C$zue.position.y-C$zul,C$zui.width=2*C$zul,C$zui.height=2*C$zul,C$zus[12]=C$zuT,C$zus[13]=C$zuS}else if(C$zut instanceof cc.PolygonCollider){var C$zup=C$zut.points;var C$zum=C$zue.points;C$zum.length=C$zup.length;var C$zuv=1e6,C$zuy=1e6,C$zug=-1e6,C$zub=-1e6;for(var C$zun=0,C$zuC=C$zup.length;C$zun<C$zuC;C$zun++){C$zum[C$zun]||(C$zum[C$zun]=cc.v2()),C$zuL.x=C$zup[C$zun].x+C$zuh.x,C$zuL.y=C$zup[C$zun].y+C$zuh.y,C$zuD.default.transformMat4(C$zuL,C$zuL,C$zuu);var C$zux=C$zuL.x;var C$zuA=C$zuL.y;C$zug<(C$zum[C$zun].x=C$zux)&&(C$zug=C$zux),C$zux<C$zuv&&(C$zuv=C$zux),C$zub<(C$zum[C$zun].y=C$zuA)&&(C$zub=C$zuA),C$zuA<C$zuy&&(C$zuy=C$zuA)}C$zui.x=C$zuv,C$zui.y=C$zuy,C$zui.width=C$zug-C$zuv,C$zui.height=C$zub-C$zuy}var C$zua,C$zuo,C$zuS,C$zus,C$zuT,C$zuw,C$zuc,C$zul,C$zuE,C$zuP,C$zuM,C$zuR,C$zuI,C$zuB},addCollider:function(C$zut){var C$zue=this._colliders;if(-1===C$zue.indexOf(C$zut)){for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];this.shouldCollide(C$zut,C$zun)&&(C$zun=new C$zua(C$zut,C$zun),this._contacts.push(C$zun))}C$zue.push(C$zut),this.initCollider(C$zut)}C$zut.node.on(C$zuo.GROUP_CHANGED,this.onNodeGroupChanged,this)},removeCollider:function(C$zut){var C$zue=this._colliders;var C$zui=C$zue.indexOf(C$zut);if(0<=C$zui){C$zue.splice(C$zui,1);var C$zur=this._contacts;for(var C$zun=C$zur.length-1;0<=C$zun;C$zun--){var C$zua=C$zur[C$zun];C$zua.collider1!==C$zut&&C$zua.collider2!==C$zut||(C$zua.touching&&this._doCollide(C$zuh.CollisionExit,C$zua),C$zur.splice(C$zun,1))}C$zut.node.off(C$zuo.GROUP_CHANGED,this.onNodeGroupChanged,this)}else cc.errorID(6600)},onNodeGroupChanged:function(C$zut){var C$zue=C$zut.getComponents(cc.Collider);for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];cc.PhysicsCollider&&C$zun instanceof cc.PhysicsCollider||(this.removeCollider(C$zun),this.addCollider(C$zun))}},drawColliders:function(){if(this._enabledDebugDraw){this._checkDebugDrawValid();var C$zut=this._debugDrawer;C$zut.clear();var C$zue=this._colliders;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zut.strokeColor=cc.Color.WHITE,C$zun instanceof cc.BoxCollider||C$zun instanceof cc.PolygonCollider){var C$zua=C$zun.world.points;if(0<C$zua.length){C$zut.moveTo(C$zua[0].x,C$zua[0].y);for(var C$zuo=1;C$zuo<C$zua.length;C$zuo++)C$zut.lineTo(C$zua[C$zuo].x,C$zua[C$zuo].y);C$zut.close(),C$zut.stroke()}}else C$zun instanceof cc.CircleCollider&&(C$zut.circle(C$zun.world.position.x,C$zun.world.position.y,C$zun.world.radius),C$zut.stroke());this.enabledDrawBoundingBox&&(C$zun=C$zun.world.aabb,C$zut.strokeColor=cc.Color.BLUE,C$zut.moveTo(C$zun.xMin,C$zun.yMin),C$zut.lineTo(C$zun.xMin,C$zun.yMax),C$zut.lineTo(C$zun.xMax,C$zun.yMax),C$zut.lineTo(C$zun.xMax,C$zun.yMin),C$zut.close(),C$zut.stroke())}}},_checkDebugDrawValid:function(){var C$zut;this._debugDrawer&&this._debugDrawer.isValid||((C$zut=new cc.Node("COLLISION_MANAGER_DEBUG_DRAW")).zIndex=cc.macro.MAX_ZINDEX,cc.game.addPersistRootNode(C$zut),this._debugDrawer=C$zut.addComponent(cc.Graphics))}});cc.js.getset(C$zur.prototype,"enabledDebugDraw",function(){return this._enabledDebugDraw},function(C$zut){C$zut&&!this._enabledDebugDraw?(this._checkDebugDrawValid(),this._debugDrawer.node.active=!0):!C$zut&&this._enabledDebugDraw&&(this._debugDrawer.clear(!0),this._debugDrawer.node.active=!1),this._enabledDebugDraw=C$zut}),cc.CollisionManager=C$zue.exports=C$zur},{"../CCNode":30,"../value-types/vec2":288,"./CCContact":68}],68:[function(C$zut,C$zue,C$zui){"use strict";var C$zuo=C$zut("./CCIntersection");var C$zur=cc.Enum({None:0,CollisionEnter:1,CollisionStay:2,CollisionExit:3});function Contact(C$zut,C$zue){this.collider1=C$zut,this.collider2=C$zue,this.touching=!1;var C$zui=C$zut instanceof cc.BoxCollider||C$zut instanceof cc.PolygonCollider;var C$zur=C$zue instanceof cc.BoxCollider||C$zue instanceof cc.PolygonCollider;var C$zun=C$zut instanceof cc.CircleCollider;var C$zua=C$zue instanceof cc.CircleCollider;C$zui&&C$zur?this.testFunc=C$zuo.polygonPolygon:C$zun&&C$zua?this.testFunc=C$zuo.circleCircle:C$zui&&C$zua?this.testFunc=C$zuo.polygonCircle:C$zun&&C$zur?(this.testFunc=C$zuo.polygonCircle,this.collider1=C$zue,this.collider2=C$zut):cc.errorID(6601,cc.js.getClassName(C$zut),cc.js.getClassName(C$zue))}Contact.prototype.test=function(){var C$zut=this.collider1.world;var C$zue=this.collider2.world;return!!C$zut.aabb.intersects(C$zue.aabb)&&(this.testFunc===C$zuo.polygonPolygon?this.testFunc(C$zut.points,C$zue.points):this.testFunc===C$zuo.circleCircle?this.testFunc(C$zut,C$zue):this.testFunc===C$zuo.polygonCircle&&this.testFunc(C$zut.points,C$zue))},Contact.prototype.updateState=function(){var C$zut=this.test();var C$zue=C$zur.None;return C$zut&&!this.touching?(this.touching=!0,C$zue=C$zur.CollisionEnter):C$zut&&this.touching?C$zue=C$zur.CollisionStay:!C$zut&&this.touching&&(this.touching=!1,C$zue=C$zur.CollisionExit),C$zue},Contact.CollisionType=C$zur,C$zue.exports=Contact},{"./CCIntersection":69}],69:[function(C$zut,C$zue,C$zui){"use strict";var C$zur={};function lineLine(C$zut,C$zue,C$zui,C$zur){var C$zun=(C$zur.x-C$zui.x)*(C$zut.y-C$zui.y)-(C$zur.y-C$zui.y)*(C$zut.x-C$zui.x);var C$zua=(C$zue.x-C$zut.x)*(C$zut.y-C$zui.y)-(C$zue.y-C$zut.y)*(C$zut.x-C$zui.x);C$zur=(C$zur.y-C$zui.y)*(C$zue.x-C$zut.x)-(C$zur.x-C$zui.x)*(C$zue.y-C$zut.y);if(0!=C$zur){C$zui=C$zun/C$zur;C$zue=C$zua/C$zur;if(0<=C$zui&&C$zui<=1&&0<=C$zue&&C$zue<=1)return!0}return!1}function linePolygon(C$zut,C$zue,C$zui){var C$zur=C$zui.length;for(var C$zun=0;C$zun<C$zur;++C$zun)if(lineLine(C$zut,C$zue,C$zui[C$zun],C$zui[(C$zun+1)%C$zur]))return!0;return!1}function pointInPolygon(C$zut,C$zue){var C$zui=!1;var C$zuh=C$zut.x;var C$zur=C$zut.y;var C$zun=C$zue.length;for(var C$zua=0,C$zuo=C$zun-1;C$zua<C$zun;C$zuo=C$zua++){var C$zus=C$zue[C$zua].x,C$zuc=C$zue[C$zua].y,C$zuu=C$zue[C$zuo].x,C$zul=C$zue[C$zuo].y;C$zur<C$zuc!=C$zur<C$zul&&C$zuh<(C$zuu-C$zus)*(C$zur-C$zuc)/(C$zul-C$zuc)+C$zus&&(C$zui=!C$zui)}return C$zui}function pointLineDistance(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zui.x-C$zue.x;var C$zua=C$zui.y-C$zue.y;var C$zuo=C$zun*C$zun+C$zua*C$zua;var C$zus=((C$zut.x-C$zue.x)*C$zun+(C$zut.y-C$zue.y)*C$zua)/C$zuo;return C$zur=C$zur?!C$zuo||C$zus<0?C$zue:1<C$zus?C$zui:cc.v2(C$zue.x+C$zus*C$zun,C$zue.y+C$zus*C$zua):cc.v2(C$zue.x+C$zus*C$zun,C$zue.y+C$zus*C$zua),C$zun=C$zut.x-C$zur.x,C$zua=C$zut.y-C$zur.y,Math.sqrt(C$zun*C$zun+C$zua*C$zua)}C$zur.lineLine=lineLine,C$zur.lineRect=function(C$zut,C$zue,C$zui){var C$zur=new cc.Vec2(C$zui.x,C$zui.y);var C$zun=new cc.Vec2(C$zui.x,C$zui.yMax);var C$zua=new cc.Vec2(C$zui.xMax,C$zui.yMax);return C$zui=new cc.Vec2(C$zui.xMax,C$zui.y),!!lineLine(C$zut,C$zue,C$zur,C$zun)||(!!lineLine(C$zut,C$zue,C$zun,C$zua)||(!!lineLine(C$zut,C$zue,C$zua,C$zui)||!!lineLine(C$zut,C$zue,C$zui,C$zur)))},C$zur.linePolygon=linePolygon,C$zur.rectRect=function(C$zut,C$zue){var C$zui=C$zut.x;var C$zur=C$zut.y;var C$zun=C$zut.x+C$zut.width;C$zut=C$zut.y+C$zut.height;var C$zua=C$zue.x;var C$zuo=C$zue.y;var C$zus=C$zue.x+C$zue.width;return C$zue=C$zue.y+C$zue.height,C$zui<=C$zus&&C$zua<=C$zun&&C$zur<=C$zue&&C$zuo<=C$zut},C$zur.rectPolygon=function(C$zut,C$zue){var C$zui,C$zur;var C$zun=new cc.Vec2(C$zut.x,C$zut.y);var C$zua=new cc.Vec2(C$zut.x,C$zut.yMax);var C$zuo=new cc.Vec2(C$zut.xMax,C$zut.yMax);var C$zus=new cc.Vec2(C$zut.xMax,C$zut.y);if(linePolygon(C$zun,C$zua,C$zue))return!0;if(linePolygon(C$zua,C$zuo,C$zue))return!0;if(linePolygon(C$zuo,C$zus,C$zue))return!0;if(linePolygon(C$zus,C$zun,C$zue))return!0;for(C$zui=0,C$zur=C$zue.length;C$zui<C$zur;++C$zui)if(pointInPolygon(C$zue[C$zui],C$zut))return!0;return!!pointInPolygon(C$zun,C$zue)||(!!pointInPolygon(C$zua,C$zue)||(!!pointInPolygon(C$zuo,C$zue)||!!pointInPolygon(C$zus,C$zue)))},C$zur.polygonPolygon=function(C$zut,C$zue){var C$zui,C$zur;for(C$zui=0,C$zur=C$zut.length;C$zui<C$zur;++C$zui)if(linePolygon(C$zut[C$zui],C$zut[(C$zui+1)%C$zur],C$zue))return!0;for(C$zui=0,C$zur=C$zue.length;C$zui<C$zur;++C$zui)if(pointInPolygon(C$zue[C$zui],C$zut))return!0;for(C$zui=0,C$zur=C$zut.length;C$zui<C$zur;++C$zui)if(pointInPolygon(C$zut[C$zui],C$zue))return!0;return!1},C$zur.circleCircle=function(C$zut,C$zue){return C$zut.position.sub(C$zue.position).mag()<C$zut.radius+C$zue.radius},C$zur.polygonCircle=function(C$zut,C$zue){var C$zui=C$zue.position;if(pointInPolygon(C$zui,C$zut))return!0;for(var C$zur=0,C$zun=C$zut.length;C$zur<C$zun;C$zur++)if(pointLineDistance(C$zui,0===C$zur?C$zut[C$zut.length-1]:C$zut[C$zur-1],C$zut[C$zur],!0)<C$zue.radius)return!0;return!1},C$zur.pointInPolygon=pointInPolygon,C$zur.pointLineDistance=pointLineDistance,cc.Intersection=C$zue.exports=C$zur},{}],70:[function(C$zut,C$zue,C$zui){"use strict";cc.Collider.Polygon=cc.Class({properties:{threshold:{default:1,serializable:!1,visible:!1},_offset:cc.v2(0,0),offset:{get:function(){return this._offset},set:function(C$zut){this._offset=C$zut},type:cc.Vec2},points:{tooltip:!1,default:function(){return[cc.v2(-50,-50),cc.v2(50,-50),cc.v2(50,50),cc.v2(-50,50)]},type:[cc.Vec2]}},resetPointsByContour:!1});var C$zur=cc.Class({name:"cc.PolygonCollider",extends:cc.Collider,mixins:[cc.Collider.Polygon],editor:!1});cc.PolygonCollider=C$zue.exports=C$zur},{}],71:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCCollisionManager"),C$zut("./CCCollider"),C$zut("./CCBoxCollider"),C$zut("./CCCircleCollider"),C$zut("./CCPolygonCollider")},{"./CCBoxCollider":64,"./CCCircleCollider":65,"./CCCollider":66,"./CCCollisionManager":67,"./CCPolygonCollider":70}],72:[function(C$zut,C$zuo,C$zus){"use strict";C$zut("./platform/CCClass");var C$zue=C$zut("./platform/CCObject").Flags;var C$zui=C$zut("./platform/js").array;var C$zur=C$zue.IsStartCalled;var C$zun=C$zue.IsOnEnableCalled;C$zue.IsEditorOnEnableCalled;function sortedIndex(C$zut,C$zue){var C$zui=C$zue.constructor._executionOrder;var C$zur=C$zue._id;for(var C$zun=0,C$zua=C$zut.length-1,C$zuo=C$zua>>>1;C$zun<=C$zua;C$zuo=C$zun+C$zua>>>1){var C$zus=C$zut[C$zuo];var C$zuc=C$zus.constructor._executionOrder;if(C$zui<C$zuc)C$zua=C$zuo-1;else if(C$zuc<C$zui)C$zun=C$zuo+1;else{C$zuc=C$zus._id;if(C$zur<C$zuc)C$zua=C$zuo-1;else{if(!(C$zuc<C$zur))return C$zuo;C$zun=C$zuo+1}}}return~C$zun}function stableRemoveInactive(C$zut,C$zue){var C$zui=C$zut.array;var C$zur=C$zut.i+1;for(;C$zur<C$zui.length;){var C$zun=C$zui[C$zur];C$zun._enabled&&C$zun.node._activeInHierarchy?++C$zur:(C$zut.removeAt(C$zur),C$zue&&(C$zun._objFlags&=~C$zue))}}C$zut=cc.Class({__ctor__:function(C$zut){var C$zue=C$zui.MutableForwardIterator;this._zero=new C$zue([]),this._neg=new C$zue([]),this._pos=new C$zue([]),this._invoke=C$zut},statics:{stableRemoveInactive:stableRemoveInactive},add:null,remove:null,invoke:null});function compareOrder(C$zut,C$zue){return C$zut.constructor._executionOrder-C$zue.constructor._executionOrder}var C$zua=cc.Class({extends:C$zut,add:function(C$zut){var C$zue=C$zut.constructor._executionOrder;(0===C$zue?this._zero:C$zue<0?this._neg:this._pos).array.push(C$zut)},remove:function(C$zut){var C$zue=C$zut.constructor._executionOrder;(0===C$zue?this._zero:C$zue<0?this._neg:this._pos).fastRemove(C$zut)},cancelInactive:function(C$zut){stableRemoveInactive(this._zero,C$zut),stableRemoveInactive(this._neg,C$zut),stableRemoveInactive(this._pos,C$zut)},invoke:function(){var C$zut=this._neg;0<C$zut.array.length&&(C$zut.array.sort(compareOrder),this._invoke(C$zut),C$zut.array.length=0),this._invoke(this._zero),this._zero.array.length=0;C$zut=this._pos;0<C$zut.array.length&&(C$zut.array.sort(compareOrder),this._invoke(C$zut),C$zut.array.length=0)}});var C$zuc=cc.Class({extends:C$zut,add:function(C$zut){var C$zue=C$zut.constructor._executionOrder;var C$zui;0===C$zue?this._zero.array.push(C$zut):(C$zui=sortedIndex(C$zue=(C$zue<0?this._neg:this._pos).array,C$zut))<0&&C$zue.splice(~C$zui,0,C$zut)},remove:function(C$zut){var C$zue=C$zut.constructor._executionOrder;0===C$zue?this._zero.fastRemove(C$zut):0<=(C$zut=sortedIndex((C$zue=C$zue<0?this._neg:this._pos).array,C$zut))&&C$zue.removeAt(C$zut)},invoke:function(C$zut){0<this._neg.array.length&&this._invoke(this._neg,C$zut),this._invoke(this._zero,C$zut),0<this._pos.array.length&&this._invoke(this._pos,C$zut)}});function createInvokeImpl(C$zun,C$zut,C$zua,C$zuo){return function(C$zue,C$zui){try{C$zuo(C$zue,C$zui)}catch(C$zut){cc._throw(C$zut);var C$zur=C$zue.array;for(C$zua&&(C$zur[C$zue.i]._objFlags|=C$zua),++C$zue.i;C$zue.i<C$zur.length;++C$zue.i)try{C$zun(C$zur[C$zue.i],C$zui)}catch(C$zut){cc._throw(C$zut),C$zua&&(C$zur[C$zue.i]._objFlags|=C$zua)}}}}var C$zul=createInvokeImpl(function(C$zut){C$zut.start(),C$zut._objFlags|=C$zur},0,C$zur,function(C$zut){var C$zue=C$zut.array;for(C$zut.i=0;C$zut.i<C$zue.length;++C$zut.i){var C$zui=C$zue[C$zut.i];C$zui.start(),C$zui._objFlags|=C$zur}});var C$zuh=createInvokeImpl(function(C$zut,C$zue){C$zut.update(C$zue)},0,void 0,function(C$zut,C$zue){var C$zui=C$zut.array;for(C$zut.i=0;C$zut.i<C$zui.length;++C$zut.i)C$zui[C$zut.i].update(C$zue)});var C$zuu=createInvokeImpl(function(C$zut,C$zue){C$zut.lateUpdate(C$zue)},0,void 0,function(C$zut,C$zue){var C$zui=C$zut.array;for(C$zut.i=0;C$zut.i<C$zui.length;++C$zut.i)C$zui[C$zut.i].lateUpdate(C$zue)});function ctor(){this.startInvoker=new C$zua(C$zul),this.updateInvoker=new C$zuc(C$zuh),this.lateUpdateInvoker=new C$zuc(C$zuu),this.scheduleInNextFrame=[],this._updating=!1}C$zue=cc.Class({ctor:ctor,unscheduleAll:ctor,statics:{LifeCycleInvoker:C$zut,OneOffInvoker:C$zua,createInvokeImpl:createInvokeImpl,invokeOnEnable:function(C$zut){var C$zue=cc.director._compScheduler;var C$zui=C$zut.array;for(C$zut.i=0;C$zut.i<C$zui.length;++C$zut.i){var C$zur=C$zui[C$zut.i];C$zur._enabled&&(C$zur.onEnable(),C$zur.node._activeInHierarchy&&C$zue._onEnabled(C$zur))}}},_onEnabled:function(C$zut){cc.director.getScheduler().resumeTarget(C$zut),C$zut._objFlags|=C$zun,this._updating?this.scheduleInNextFrame.push(C$zut):this._scheduleImmediate(C$zut)},_onDisabled:function(C$zut){cc.director.getScheduler().pauseTarget(C$zut),C$zut._objFlags&=~C$zun;var C$zue=this.scheduleInNextFrame.indexOf(C$zut);0<=C$zue?C$zui.fastRemoveAt(this.scheduleInNextFrame,C$zue):(!C$zut.start||C$zut._objFlags&C$zur||this.startInvoker.remove(C$zut),C$zut.update&&this.updateInvoker.remove(C$zut),C$zut.lateUpdate&&this.lateUpdateInvoker.remove(C$zut))},enableComp:function(C$zut,C$zue){if(!(C$zut._objFlags&C$zun)){if(C$zut.onEnable){if(C$zue)return void C$zue.add(C$zut);if(C$zut.onEnable(),!C$zut.node._activeInHierarchy)return}this._onEnabled(C$zut)}},disableComp:function(C$zut){C$zut._objFlags&C$zun&&(C$zut.onDisable&&C$zut.onDisable(),this._onDisabled(C$zut))},_scheduleImmediate:function(C$zut){!C$zut.start||C$zut._objFlags&C$zur||this.startInvoker.add(C$zut),C$zut.update&&this.updateInvoker.add(C$zut),C$zut.lateUpdate&&this.lateUpdateInvoker.add(C$zut)},_deferredSchedule:function(){var C$zut=this.scheduleInNextFrame;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];this._scheduleImmediate(C$zur)}C$zut.length=0},_earlyStartForNewComps:function(){0<this.scheduleInNextFrame.length&&(this._deferredSchedule(),this.startInvoker.invoke())},startPhase:function(){this._updating=!0,0<this.scheduleInNextFrame.length&&this._deferredSchedule(),this.startInvoker.invoke(),this._earlyStartForNewComps()},updatePhase:function(C$zut){this.updateInvoker.invoke(C$zut)},lateUpdatePhase:function(C$zut){this.lateUpdateInvoker.invoke(C$zut),this._updating=!1},clearup:function(){this._earlyStartForNewComps()}});C$zuo.exports=C$zue},{"./platform/CCClass":189,"./platform/CCObject":195,"./platform/js":209,"./utils/misc":264}],73:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../../animation/animation-animator");var C$zun=C$zut("../../animation/animation-clip");var C$zua=C$zut("../event/event-target");var C$zuo=C$zut("../platform/js");var C$zus=cc.Enum({PLAY:"play",STOP:"stop",PAUSE:"pause",RESUME:"resume",LASTFRAME:"lastframe",FINISHED:"finished"});C$zut=cc.Class({name:"cc.Animation",extends:C$zut("./CCComponent"),mixins:[C$zua],editor:!1,statics:{EventType:C$zus},ctor:function(){cc.EventTarget.call(this),this._animator=null,this._nameToState=C$zuo.createMap(!0),this._didInit=!1,this._currentClip=null},properties:{_defaultClip:{default:null,type:C$zun},defaultClip:{type:C$zun,get:function(){return this._defaultClip},set:function(C$zut){},tooltip:!1},currentClip:{get:function(){return this._currentClip},set:function(C$zut){this._currentClip=C$zut},type:C$zun,visible:!1},_writableClips:{get:function(){return this._clips},set:function(C$zut){this._didInit=!1,this._clips=C$zut,this._init()},type:[C$zun]},_clips:{default:[],type:[C$zun],tooltip:!1,visible:!0},playOnLoad:{default:!1,tooltip:!1}},start:function(){var C$zut;this.playOnLoad&&this._defaultClip&&(this._animator&&this._animator.isPlaying||(C$zut=this.getAnimationState(this._defaultClip.name),this._animator.playState(C$zut)))},onEnable:function(){this._animator&&this._animator.resume()},onDisable:function(){this._animator&&this._animator.pause()},onDestroy:function(){this.stop()},getClips:function(){return this._clips},play:function(C$zut,C$zue){C$zut=this.playAdditive(C$zut,C$zue);return this._animator.stopStatesExcept(C$zut),C$zut},playAdditive:function(C$zut,C$zue){this._init();C$zut=this.getAnimationState(C$zut||this._defaultClip&&this._defaultClip.name);var C$zui;return C$zut&&(this.enabled=!0,(C$zui=this._animator).isPlaying&&C$zut.isPlaying?C$zut.isPaused?C$zui.resumeState(C$zut):(C$zui.stopState(C$zut),C$zui.playState(C$zut,C$zue)):C$zui.playState(C$zut,C$zue),this.enabledInHierarchy||C$zui.pause(),this.currentClip=C$zut.clip),C$zut},stop:function(C$zut){this._didInit&&(C$zut?(C$zut=this._nameToState[C$zut])&&this._animator.stopState(C$zut):this._animator.stop())},pause:function(C$zut){this._didInit&&(C$zut?(C$zut=this._nameToState[C$zut])&&this._animator.pauseState(C$zut):this.enabled=!1)},resume:function(C$zut){this._didInit&&(C$zut?(C$zut=this._nameToState[C$zut])&&this._animator.resumeState(C$zut):this.enabled=!0)},setCurrentTime:function(C$zut,C$zue){this._init(),C$zue?(C$zue=this._nameToState[C$zue])&&this._animator.setStateTime(C$zue,C$zut):this._animator.setStateTime(C$zut)},getAnimationState:function(C$zut){this._init();C$zut=this._nameToState[C$zut];return C$zut&&!C$zut.curveLoaded&&this._animator._reloadClip(C$zut),C$zut||null},addClip:function(C$zut,C$zue){if(C$zut){this._init(),cc.js.array.contains(this._clips,C$zut)||this._clips.push(C$zut),C$zue=C$zue||C$zut.name;var C$zui=this._nameToState[C$zue];if(C$zui){if(C$zui.clip===C$zut)return C$zui;C$zui=this._clips.indexOf(C$zui.clip);-1!==C$zui&&this._clips.splice(C$zui,1)}C$zui=new cc.AnimationState(C$zut,C$zue);return this._nameToState[C$zue]=C$zui}cc.warnID(3900)},removeClip:function(C$zue,C$zut){if(C$zue){var C$zui;for(var C$zur in this._init(),this._nameToState)if((C$zui=this._nameToState[C$zur]).clip===C$zue)break;if(C$zue===this._defaultClip){if(!C$zut)return void cc.warnID(3902);this._defaultClip=null}if(C$zui&&C$zui.isPlaying){if(!C$zut)return void cc.warnID(3903);this.stop(C$zui.name)}this._clips=this._clips.filter(function(C$zut){return!(C$zut===C$zue)}),C$zui&&delete this._nameToState[C$zui.name]}else cc.warnID(3901)},sample:function(C$zut){this._init(),C$zut?(C$zut=this._nameToState[C$zut])&&C$zut.sample():this._animator.sample()},on:function(C$zut,C$zue,C$zui,C$zur){this._init();C$zue=this._EventTargetOn(C$zut,C$zue,C$zui,C$zur);if("lastframe"===C$zut){var C$zun=this._nameToState;for(var C$zua in C$zun)C$zun[C$zua]._lastframeEventOn=!0}return C$zue},off:function(C$zut,C$zue,C$zui,C$zur){if(this._init(),"lastframe"===C$zut){var C$zun=this._nameToState;for(var C$zua in C$zun)C$zun[C$zua]._lastframeEventOn=!1}this._EventTargetOff(C$zut,C$zue,C$zui,C$zur)},_init:function(){this._didInit||(this._didInit=!0,this._animator=new C$zur(this.node,this),this._createStates())},_createStates:function(){this._nameToState=C$zuo.createMap(!0);var C$zut=null;var C$zue=!1;for(var C$zui=0;C$zui<this._clips.length;++C$zui){var C$zur=this._clips[C$zui];C$zur&&(C$zut=new cc.AnimationState(C$zur),this._nameToState[C$zut.name]=C$zut,this._defaultClip===C$zur&&(C$zue=C$zut))}this._defaultClip&&!C$zue&&(C$zut=new cc.AnimationState(this._defaultClip),this._nameToState[C$zut.name]=C$zut)}});C$zut.prototype._EventTargetOn=C$zua.prototype.on,C$zut.prototype._EventTargetOff=C$zua.prototype.off,cc.Animation=C$zue.exports=C$zut},{"../../animation/animation-animator":10,"../../animation/animation-clip":11,"../event/event-target":115,"../platform/js":209,"./CCComponent":78}],74:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../utils/misc");var C$zun=C$zut("./CCComponent");var C$zua=C$zut("../assets/CCAudioClip");C$zut=cc.Class({name:"cc.AudioSource",extends:C$zun,editor:!1,ctor:function(){this.audio=new cc.Audio},properties:{_clip:{default:null,type:C$zua},_volume:1,_mute:!1,_loop:!1,_pausedFlag:{default:!1,serializable:!1},isPlaying:{get:function(){return this.audio.getState()===cc.Audio.State.PLAYING},visible:!1},clip:{get:function(){return this._clip},set:function(C$zut){var C$zui;if("string"==typeof C$zut)return cc.warnID(8401,"cc.AudioSource","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$zui=this,void C$zua._loadByUrl(C$zut,function(C$zut,C$zue){C$zue&&(C$zui.clip=C$zue)});C$zut!==this._clip&&(this._clip=C$zut,this.audio.stop(),this.preload&&(this.audio.src=this._clip))},type:C$zua,tooltip:!1,animatable:!1},volume:{get:function(){return this._volume},set:function(C$zut){return C$zut=C$zur.clamp01(C$zut),this._volume=C$zut,this._mute||this.audio.setVolume(C$zut),C$zut},tooltip:!1},mute:{get:function(){return this._mute},set:function(C$zut){return this._mute=C$zut,this.audio.setVolume(C$zut?0:this._volume),C$zut},animatable:!1,tooltip:!1},loop:{get:function(){return this._loop},set:function(C$zut){return this._loop=C$zut,this.audio.setLoop(C$zut),C$zut},animatable:!1,tooltip:!1},playOnLoad:{default:!1,tooltip:!1,animatable:!1},preload:{default:!1,animatable:!1}},_ensureDataLoaded:function(){this.audio.src!==this._clip&&(this.audio.src=this._clip)},_pausedCallback:function(){this.audio.getState()===cc.Audio.State.PLAYING&&(this.audio.pause(),this._pausedFlag=!0)},_restoreCallback:function(){this._pausedFlag&&this.audio.resume(),this._pausedFlag=!1},onLoad:function(){this.audio.setVolume(this._mute?0:this._volume),this.audio.setLoop(this._loop)},onEnable:function(){this.preload&&(this.audio.src=this._clip),this.playOnLoad&&this.play(),cc.game.on(cc.game.EVENT_HIDE,this._pausedCallback,this),cc.game.on(cc.game.EVENT_SHOW,this._restoreCallback,this)},onDisable:function(){this.stop(),cc.game.off(cc.game.EVENT_HIDE,this._pausedCallback,this),cc.game.off(cc.game.EVENT_SHOW,this._restoreCallback,this)},onDestroy:function(){this.stop(),this.audio.destroy(),cc.audioEngine.uncache(this._clip)},play:function(){var C$zut;this._clip&&(C$zut=this.audio,this._clip.loaded&&C$zut.stop(),this._ensureDataLoaded(),C$zut.setCurrentTime(0),C$zut.play())},stop:function(){this.audio.stop()},pause:function(){this.audio.pause()},resume:function(){this._ensureDataLoaded(),this.audio.resume()},rewind:function(){this.audio.setCurrentTime(0)},getCurrentTime:function(){return this.audio.getCurrentTime()},setCurrentTime:function(C$zut){return this.audio.setCurrentTime(C$zut),C$zut},getDuration:function(){return this.audio.getDuration()}});cc.AudioSource=C$zue.exports=C$zut},{"../assets/CCAudioClip":35,"../utils/misc":264,"./CCComponent":78}],75:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","mouseenter","mouseleave","mousewheel"];function stopPropagation(C$zut){C$zut.stopPropagation()}C$zut=cc.Class({name:"cc.BlockInputEvents",extends:C$zut("./CCComponent"),editor:{menu:"i18n:MAIN_MENU.component.ui/Block Input Events",inspector:"packages://inspector/inspectors/comps/block-input-events.js",help:"i18n:COMPONENT.help_url.block_input_events"},onEnable:function(){for(var C$zut=0;C$zut<C$zur.length;C$zut++)this.node.on(C$zur[C$zut],stopPropagation,this)},onDisable:function(){for(var C$zut=0;C$zut<C$zur.length;C$zut++)this.node.off(C$zur[C$zut],stopPropagation,this)}});cc.BlockInputEvents=C$zue.exports=C$zut},{"./CCComponent":78}],76:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./CCComponent");C$zut=C$zut("../utils/gray-sprite-state");var C$zun=cc.Enum({NONE:0,COLOR:1,SPRITE:2,SCALE:3});var C$zua=cc.Enum({NORMAL:0,HOVER:1,PRESSED:2,DISABLED:3});C$zur=cc.Class({name:"cc.Button",extends:C$zur,mixins:[C$zut],ctor:function(){this._pressed=!1,this._hovered=!1,this._fromColor=null,this._toColor=null,this._time=0,this._transitionFinished=!0,this._fromScale=cc.Vec2.ZERO,this._toScale=cc.Vec2.ZERO,this._originalScale=null,this._graySpriteMaterial=null,this._spriteMaterial=null,this._sprite=null},editor:!1,properties:{interactable:{default:!0,tooltip:!1,notify:function(){this._updateState(),this.interactable||this._resetState()},animatable:!1},_resizeToTarget:{animatable:!1,set:function(C$zut){C$zut&&this._resizeNodeToTargetNode()}},enableAutoGrayEffect:{default:!1,tooltip:!1,notify:function(){this._updateDisabledState()}},transition:{default:C$zun.NONE,tooltip:!1,type:C$zun,animatable:!1,notify:function(C$zut){this._updateTransition(C$zut)},formerlySerializedAs:"transition"},normalColor:{default:cc.Color.WHITE,displayName:"Normal",tooltip:!1,notify:function(){this.transition===C$zun.Color&&this._getButtonState()===C$zua.NORMAL&&(this._getTarget().opacity=this.normalColor.a),this._updateState()}},pressedColor:{default:cc.color(211,211,211),displayName:"Pressed",tooltip:!1,notify:function(){this.transition===C$zun.Color&&this._getButtonState()===C$zua.PRESSED&&(this._getTarget().opacity=this.pressedColor.a),this._updateState()},formerlySerializedAs:"pressedColor"},hoverColor:{default:cc.Color.WHITE,displayName:"Hover",tooltip:!1,notify:function(){this.transition===C$zun.Color&&this._getButtonState()===C$zua.HOVER&&(this._getTarget().opacity=this.hoverColor.a),this._updateState()},formerlySerializedAs:"hoverColor"},disabledColor:{default:cc.color(124,124,124),displayName:"Disabled",tooltip:!1,notify:function(){this.transition===C$zun.Color&&this._getButtonState()===C$zua.DISABLED&&(this._getTarget().opacity=this.disabledColor.a),this._updateState()}},duration:{default:.1,range:[0,10],tooltip:!1},zoomScale:{default:1.2,tooltip:!1},normalSprite:{default:null,type:cc.SpriteFrame,displayName:"Normal",tooltip:!1,notify:function(){this._updateState()}},pressedSprite:{default:null,type:cc.SpriteFrame,displayName:"Pressed",tooltip:!1,formerlySerializedAs:"pressedSprite",notify:function(){this._updateState()}},hoverSprite:{default:null,type:cc.SpriteFrame,displayName:"Hover",tooltip:!1,formerlySerializedAs:"hoverSprite",notify:function(){this._updateState()}},disabledSprite:{default:null,type:cc.SpriteFrame,displayName:"Disabled",tooltip:!1,notify:function(){this._updateState()}},target:{default:null,type:cc.Node,tooltip:!1,notify:function(C$zut){this._applyTarget(),C$zut&&this.target!==C$zut&&this._unregisterTargetEvent(C$zut)}},clickEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{Transition:C$zun},__preload:function(){this._applyTarget(),this._resetState()},_resetState:function(){this._pressed=!1,this._hovered=!1;var C$zut=this._getTarget();var C$zue=this.transition;var C$zui=this._originalScale;C$zue===C$zun.COLOR&&this.interactable?this._setTargetColor(this.normalColor):C$zue===C$zun.SCALE&&C$zui&&C$zut.setScale(C$zui.x,C$zui.y),this._transitionFinished=!0},onEnable:function(){this.normalSprite&&this.normalSprite.ensureLoadTexture(),this.hoverSprite&&this.hoverSprite.ensureLoadTexture(),this.pressedSprite&&this.pressedSprite.ensureLoadTexture(),this.disabledSprite&&this.disabledSprite.ensureLoadTexture(),this._registerNodeEvent()},onDisable:function(){this._resetState(),this._unregisterNodeEvent()},_getTarget:function(){return this.target||this.node},_onTargetSpriteFrameChanged:function(C$zut){this.transition===C$zun.SPRITE&&this._setCurrentStateSprite(C$zut.spriteFrame)},_onTargetColorChanged:function(C$zut){this.transition===C$zun.COLOR&&this._setCurrentStateColor(C$zut)},_onTargetScaleChanged:function(){var C$zut=this._getTarget();this._originalScale&&(this.transition!==C$zun.SCALE||this._transitionFinished)&&(this._originalScale.x=C$zut.scaleX,this._originalScale.y=C$zut.scaleY)},_setTargetColor:function(C$zut){var C$zue=this._getTarget();C$zue.color=C$zut,C$zue.opacity=C$zut.a},_getStateColor:function(C$zut){switch(C$zut){case C$zua.NORMAL:return this.normalColor;case C$zua.HOVER:return this.hoverColor;case C$zua.PRESSED:return this.pressedColor;case C$zua.DISABLED:return this.disabledColor}},_getStateSprite:function(C$zut){switch(C$zut){case C$zua.NORMAL:return this.normalSprite;case C$zua.HOVER:return this.hoverSprite;case C$zua.PRESSED:return this.pressedSprite;case C$zua.DISABLED:return this.disabledSprite}},_setCurrentStateColor:function(C$zut){switch(this._getButtonState()){case C$zua.NORMAL:this.normalColor=C$zut;break;case C$zua.HOVER:this.hoverColor=C$zut;break;case C$zua.PRESSED:this.pressedColor=C$zut;break;case C$zua.DISABLED:this.disabledColor=C$zut}},_setCurrentStateSprite:function(C$zut){switch(this._getButtonState()){case C$zua.NORMAL:this.normalSprite=C$zut;break;case C$zua.HOVER:this.hoverSprite=C$zut;break;case C$zua.PRESSED:this.pressedSprite=C$zut;break;case C$zua.DISABLED:this.disabledSprite=C$zut}},update:function(C$zut){var C$zue=this._getTarget();var C$zui;this._transitionFinished||this.transition!==C$zun.COLOR&&this.transition!==C$zun.SCALE||(this.time+=C$zut,(C$zut=1)<=(C$zut=0<this.duration?this.time/this.duration:C$zut)&&(C$zut=1),this.transition===C$zun.COLOR?(C$zui=this._fromColor.lerp(this._toColor,C$zut),this._setTargetColor(C$zui)):this.transition===C$zun.SCALE&&this._originalScale&&(C$zue.scale=this._fromScale.lerp(this._toScale,C$zut)),1===C$zut&&(this._transitionFinished=!0))},_registerNodeEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},_unregisterNodeEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},_registerTargetEvent:function(C$zut){C$zut.on(cc.Node.EventType.SCALE_CHANGED,this._onTargetScaleChanged,this)},_unregisterTargetEvent:function(C$zut){C$zut.off(cc.Node.EventType.SCALE_CHANGED,this._onTargetScaleChanged,this)},_getTargetSprite:function(C$zut){var C$zue=null;return C$zue=C$zut?C$zut.getComponent(cc.Sprite):C$zue},_applyTarget:function(){var C$zut=this._getTarget();this._sprite=this._getTargetSprite(C$zut),this._originalScale||(this._originalScale=cc.Vec2.ZERO),this._originalScale.x=C$zut.scaleX,this._originalScale.y=C$zut.scaleY,this._registerTargetEvent(C$zut)},_onTouchBegan:function(C$zut){this.interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),C$zut.stopPropagation())},_onTouchMove:function(C$zut){var C$zue,C$zui,C$zur;this.interactable&&this.enabledInHierarchy&&this._pressed&&(C$zue=C$zut.touch,C$zue=this.node._hitTest(C$zue.getLocation()),C$zur=this._getTarget(),C$zui=this._originalScale,this.transition===C$zun.SCALE&&C$zui?C$zue?(this._fromScale.x=C$zui.x,this._fromScale.y=C$zui.y,this._toScale.x=C$zui.x*this.zoomScale,this._toScale.y=C$zui.y*this.zoomScale,this._transitionFinished=!1):(this.time=0,this._transitionFinished=!0,C$zur.setScale(C$zui.x,C$zui.y)):(C$zur=C$zue?C$zua.PRESSED:C$zua.NORMAL,this._applyTransition(C$zur)),C$zut.stopPropagation())},_onTouchEnded:function(C$zut){this.interactable&&this.enabledInHierarchy&&(this._pressed&&(cc.Component.EventHandler.emitEvents(this.clickEvents,C$zut),this.node.emit("click",this)),this._pressed=!1,this._updateState(),C$zut.stopPropagation())},_onTouchCancel:function(){this.interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},_onMouseMoveIn:function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this.transition===C$zun.SPRITE&&!this.hoverSprite||this._hovered||(this._hovered=!0,this._updateState()))},_onMouseMoveOut:function(){this._hovered&&(this._hovered=!1,this._updateState())},_updateState:function(){var C$zut=this._getButtonState();this._applyTransition(C$zut),this._updateDisabledState()},_getButtonState:function(){return this.interactable?this._pressed?C$zua.PRESSED:this._hovered?C$zua.HOVER:C$zua.NORMAL:C$zua.DISABLED},_updateColorTransitionImmediately:function(C$zut){C$zut=this._getStateColor(C$zut);this._setTargetColor(C$zut),this._fromColor=C$zut.clone(),this._toColor=C$zut},_updateColorTransition:function(C$zut){var C$zue;C$zut===C$zua.DISABLED?this._updateColorTransitionImmediately(C$zut):(C$zue=this._getTarget(),C$zut=this._getStateColor(C$zut),this._fromColor=C$zue.color.clone(),this._toColor=C$zut,this.time=0,this._transitionFinished=!1)},_updateSpriteTransition:function(C$zut){C$zut=this._getStateSprite(C$zut);this._sprite&&C$zut&&(this._sprite.spriteFrame=C$zut)},_updateScaleTransition:function(C$zut){C$zut===C$zua.PRESSED?this._zoomUp():this._zoomBack()},_zoomUp:function(){this._originalScale&&(this._fromScale.x=this._originalScale.x,this._fromScale.y=this._originalScale.y,this._toScale.x=this._originalScale.x*this.zoomScale,this._toScale.y=this._originalScale.y*this.zoomScale,this.time=0,this._transitionFinished=!1)},_zoomBack:function(){var C$zut;this._originalScale&&(C$zut=this._getTarget(),this._fromScale.x=C$zut.scaleX,this._fromScale.y=C$zut.scaleY,this._toScale.x=this._originalScale.x,this._toScale.y=this._originalScale.y,this.time=0,this._transitionFinished=!1)},_updateTransition:function(C$zut){C$zut===C$zun.COLOR?this._updateColorTransitionImmediately(C$zua.NORMAL):C$zut===C$zun.SPRITE&&this._updateSpriteTransition(C$zua.NORMAL),this._updateState()},_applyTransition:function(C$zut){var C$zue=this.transition;C$zue===C$zun.COLOR?this._updateColorTransition(C$zut):C$zue===C$zun.SPRITE?this._updateSpriteTransition(C$zut):C$zue===C$zun.SCALE&&this._updateScaleTransition(C$zut)},_resizeNodeToTargetNode:!1,_updateDisabledState:function(){var C$zut;this._sprite&&(C$zut=!1,this.enableAutoGrayEffect&&(this.transition===C$zun.SPRITE&&this.disabledSprite||this.interactable||(C$zut=!0)),this._switchGrayMaterial(C$zut,this._sprite))}});cc.Button=C$zue.exports=C$zur},{"../utils/gray-sprite-state":260,"./CCComponent":78}],77:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../camera/CCCamera");C$zut=C$zut("./CCComponent");var C$zun=cc.Class({name:"cc.Canvas",extends:C$zut,editor:!1,resetInEditor:!1,statics:{instance:null},properties:{_designResolution:cc.size(960,640),designResolution:{get:function(){return cc.size(this._designResolution)},set:function(C$zut){this._designResolution.width=C$zut.width,this._designResolution.height=C$zut.height,this.applySettings()},tooltip:!1},_fitWidth:!1,_fitHeight:!0,fitHeight:{get:function(){return this._fitHeight},set:function(C$zut){this._fitHeight!==C$zut&&(this._fitHeight=C$zut,this.applySettings())},tooltip:!1},fitWidth:{get:function(){return this._fitWidth},set:function(C$zut){this._fitWidth!==C$zut&&(this._fitWidth=C$zut,this.applySettings())},tooltip:!1}},_fitDesignResolution:!1,__preload:function(){if(C$zun.instance)return cc.warnID(6700,this.node.name,C$zun.instance.node.name);(C$zun.instance=this).applySettings();var C$zut=this.getComponent(cc.Widget);C$zut&&C$zut.updateAlignment();C$zut=cc.find("Main Camera",this.node);C$zut||((C$zut=new cc.Node("Main Camera")).parent=this.node,C$zut.setSiblingIndex(0));var C$zue=C$zut.getComponent(C$zur);C$zue||(C$zue=C$zut.addComponent(C$zur),C$zut=C$zur.ClearFlags,C$zue.clearFlags=C$zut.COLOR|C$zut.DEPTH|C$zut.STENCIL,C$zue.depth=-1),C$zur.main=C$zue},onDestroy:function(){C$zun.instance===this&&(C$zun.instance=null)},applySettings:function(){var C$zut=cc.ResolutionPolicy;C$zut=this.fitHeight&&this.fitWidth?C$zut.SHOW_ALL:this.fitHeight||this.fitWidth?this.fitWidth?C$zut.FIXED_WIDTH:C$zut.FIXED_HEIGHT:C$zut.NO_BORDER;var C$zue=this._designResolution;cc.view.setDesignResolutionSize(C$zue.width,C$zue.height,C$zut)}});cc.Canvas=C$zue.exports=C$zun},{"../camera/CCCamera":63,"./CCComponent":78}],78:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../platform/CCObject");var C$zun=C$zut("../platform/js");var C$zua=new(C$zut("../platform/id-generater"))("Comp");C$zur.Flags.IsOnEnableCalled;var C$zuo=C$zur.Flags.IsOnLoadCalled;var C$zus=!!cc.ActionManager;C$zut=cc.Class({name:"cc.Component",extends:C$zur,ctor:function(){this._id=C$zua.getNewId(),this.__eventTargets=[]},properties:{node:{default:null,visible:!1},name:{get:function(){if(this._name)return this._name;var C$zut=cc.js.getClassName(this);var C$zue=C$zut.lastIndexOf(".");return 0<=C$zue&&(C$zut=C$zut.slice(C$zue+1)),this.node.name+"<"+C$zut+">"},set:function(C$zut){this._name=C$zut},visible:!1},uuid:{get:function(){return this._id},visible:!1},__scriptAsset:!1,_enabled:!0,enabled:{get:function(){return this._enabled},set:function(C$zut){var C$zue;this._enabled!==C$zut&&(this._enabled=C$zut,this.node._activeInHierarchy&&(C$zue=cc.director._compScheduler,C$zut?C$zue.enableComp(this):C$zue.disableComp(this)))},visible:!1,animatable:!0},enabledInHierarchy:{get:function(){return this._enabled&&this.node._activeInHierarchy},visible:!1},_isOnLoadCalled:{get:function(){return this._objFlags&C$zuo}}},update:null,lateUpdate:null,__preload:null,onLoad:null,start:null,onEnable:null,onDisable:null,onDestroy:null,onFocusInEditor:null,onLostFocusInEditor:null,resetInEditor:null,addComponent:function(C$zut){return this.node.addComponent(C$zut)},getComponent:function(C$zut){return this.node.getComponent(C$zut)},getComponents:function(C$zut){return this.node.getComponents(C$zut)},getComponentInChildren:function(C$zut){return this.node.getComponentInChildren(C$zut)},getComponentsInChildren:function(C$zut){return this.node.getComponentsInChildren(C$zut)},_getLocalBounds:null,onRestore:null,destroy:function(){this._super()&&this._enabled&&this.node._activeInHierarchy&&cc.director._compScheduler.disableComp(this)},_onPreDestroy:function(){C$zus&&cc.director.getActionManager().removeAllActionsFromTarget(this),this.unscheduleAllCallbacks();var C$zut=this.__eventTargets;for(var C$zue=C$zut.length-1;0<=C$zue;--C$zue){var C$zui=C$zut[C$zue];C$zui&&C$zui.targetOff(this)}C$zut.length=0,cc.director._nodeActivator.destroyComp(this),this.node._removeComponent(this)},_instantiate:function(C$zut){return(C$zut=C$zut||cc.instantiate._clone(this,this)).node=null,C$zut},schedule:function(C$zut,C$zue,C$zui,C$zur){cc.assertID(C$zut,1619),C$zue=C$zue||0,cc.assertID(0<=C$zue,1620),C$zui=isNaN(C$zui)?cc.macro.REPEAT_FOREVER:C$zui,C$zur=C$zur||0;var C$zun=cc.director.getScheduler();var C$zua=C$zun.isTargetPaused(this);C$zun.schedule(C$zut,this,C$zue,C$zui,C$zur,C$zua)},scheduleOnce:function(C$zut,C$zue){this.schedule(C$zut,0,0,C$zue)},unschedule:function(C$zut){C$zut&&cc.director.getScheduler().unschedule(C$zut,this)},unscheduleAllCallbacks:function(){cc.director.getScheduler().unscheduleAllForTarget(this)}});C$zut._requireComponent=null,C$zut._executionOrder=0,C$zun.value(C$zut,"_registerEditorProps",function(C$zut,C$zue){var C$zui=C$zue.requireComponent;C$zui&&(C$zut._requireComponent=C$zui);C$zui=C$zue.executionOrder;C$zui&&"number"==typeof C$zui&&(C$zut._executionOrder=C$zui)}),C$zut.prototype.__scriptUuid="",cc.Component=C$zue.exports=C$zut},{"../platform/CCObject":195,"../platform/id-generater":205,"../platform/js":209}],79:[function(C$zut,C$zue,C$zui){"use strict";cc.Component.EventHandler=cc.Class({name:"cc.ClickEvent",properties:{target:{default:null,type:cc.Node},component:"",_componentId:"",_componentName:{get:function(){return this._genCompIdIfNeeded(),this._compId2Name(this._componentId)},set:function(C$zut){this._componentId=this._compName2Id(C$zut)}},handler:{default:""},customEventData:{default:""}},statics:{emitEvents:function(C$zut){var C$zue;if(0<arguments.length)for(var C$zui=0,C$zur=(C$zue=new Array(arguments.length-1)).length;C$zui<C$zur;C$zui++)C$zue[C$zui]=arguments[C$zui+1];for(var C$zun=0,C$zua=C$zut.length;C$zun<C$zua;C$zun++){var C$zuo=C$zut[C$zun];C$zuo instanceof cc.Component.EventHandler&&C$zuo.emit(C$zue)}}},emit:function(C$zut){var C$zue=this.target;var C$zui;cc.isValid(C$zue)&&(this._genCompIdIfNeeded(),C$zui=cc.js._getClassById(this._componentId),C$zue=C$zue.getComponent(C$zui),!cc.isValid(C$zue)||"function"==typeof(C$zui=C$zue[this.handler])&&(null!=this.customEventData&&""!==this.customEventData&&(C$zut=C$zut.slice()).push(this.customEventData),C$zui.apply(C$zue,C$zut)))},_compName2Id:function(C$zut){C$zut=cc.js.getClassByName(C$zut);return cc.js._getClassId(C$zut)},_compId2Name:function(C$zut){C$zut=cc.js._getClassById(C$zut);return cc.js.getClassName(C$zut)},_genCompIdIfNeeded:function(){this._componentId||(this._componentName=this.component,this.component="")}})},{}],80:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../platform/CCMacro");var C$zun=C$zut("./CCRenderComponent");C$zut("../assets/material/CCMaterial");var C$zua=C$zut("../renderer/utils/label/label-frame");C$zut=C$zur.TextAlignment;C$zur=C$zur.VerticalTextAlignment;var C$zuo=cc.Enum({NONE:0,CLAMP:1,SHRINK:2,RESIZE_HEIGHT:3});var C$zus=cc.Enum({NONE:0,BITMAP:1,CHAR:2});var C$zuc=cc.Class({name:"cc.Label",extends:C$zun,ctor:function(){this._actualFontSize=0,this._assemblerData=null,this._frame=null,this._ttfTexture=null,this._letterTexture=null,cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?this._updateMaterial=this._updateMaterialCanvas:this._updateMaterial=this._updateMaterialWebgl},editor:!1,properties:{_useOriginalSize:!0,_string:{default:"",formerlySerializedAs:"_N$string"},string:{get:function(){return this._string},set:function(C$zut){var C$zue=this._string;this._string=""+C$zut,this.string!==C$zue&&this.setVertsDirty(),this._checkStringEmpty()},multiline:!0,tooltip:!1},horizontalAlign:{default:C$zut.LEFT,type:C$zut,tooltip:!1,notify:function(C$zut){this.horizontalAlign!==C$zut&&this.setVertsDirty()},animatable:!1},verticalAlign:{default:C$zur.TOP,type:C$zur,tooltip:!1,notify:function(C$zut){this.verticalAlign!==C$zut&&this.setVertsDirty()},animatable:!1},actualFontSize:{displayName:"Actual Font Size",animatable:!1,readonly:!0,get:function(){return this._actualFontSize},tooltip:!1},_fontSize:40,fontSize:{get:function(){return this._fontSize},set:function(C$zut){this._fontSize!==C$zut&&(this._fontSize=C$zut,this.setVertsDirty())},range:[0,512],tooltip:!1},fontFamily:{default:"Arial",tooltip:!1,notify:function(C$zut){this.fontFamily!==C$zut&&this.setVertsDirty()},animatable:!1},_lineHeight:40,lineHeight:{get:function(){return this._lineHeight},set:function(C$zut){this._lineHeight!==C$zut&&(this._lineHeight=C$zut,this.setVertsDirty())},tooltip:!1},overflow:{default:C$zuo.NONE,type:C$zuo,tooltip:!1,notify:function(C$zut){this.overflow!==C$zut&&this.setVertsDirty()},animatable:!1},_enableWrapText:!0,enableWrapText:{get:function(){return this._enableWrapText},set:function(C$zut){this._enableWrapText!==C$zut&&(this._enableWrapText=C$zut,this.setVertsDirty())},animatable:!1,tooltip:!1},_N$file:null,font:{get:function(){return this._N$file},set:function(C$zut){this.font!==C$zut&&(C$zut||(this._isSystemFontUsed=!0),(this._N$file=C$zut)&&this._isSystemFontUsed&&(this._isSystemFontUsed=!1),"string"==typeof C$zut&&cc.warnID(4e3),this.enabledInHierarchy&&this._forceUpdateRenderData())},type:cc.Font,tooltip:!1,animatable:!1},_isSystemFontUsed:!0,useSystemFont:{get:function(){return this._isSystemFontUsed},set:function(C$zut){if(this._isSystemFontUsed!==C$zut){if(this._isSystemFontUsed=!!C$zut,C$zut){if(this.font=null,!this.enabledInHierarchy)return;this._forceUpdateRenderData()}this.markForValidate()}},animatable:!1,tooltip:!1},_bmFontOriginalSize:{displayName:"BMFont Original Size",get:function(){return this._N$file instanceof cc.BitmapFont?this._N$file.fontSize:-1},visible:!0,animatable:!1},_spacingX:0,spacingX:{get:function(){return this._spacingX},set:function(C$zut){this._spacingX=C$zut,this.setVertsDirty()},tooltip:!1},_batchAsBitmap:!1,cacheMode:{default:C$zus.NONE,type:C$zus,tooltip:!1,notify:function(C$zut){this.cacheMode!==C$zut&&(C$zut!==C$zus.BITMAP||this.font instanceof cc.BitmapFont||this._frame&&this._frame._resetDynamicAtlasFrame(),C$zut===C$zus.CHAR&&(this._ttfTexture=null),this.enabledInHierarchy&&this._forceUpdateRenderData())},animatable:!1},_styleFlags:0,enableBold:{get:function(){return!!(1&this._styleFlags)},set:function(C$zut){C$zut?this._styleFlags|=1:this._styleFlags&=-2,this.setVertsDirty()},animatable:!1,tooltip:!1},enableItalic:{get:function(){return!!(2&this._styleFlags)},set:function(C$zut){C$zut?this._styleFlags|=2:this._styleFlags&=-3,this.setVertsDirty()},animatable:!1,tooltip:!1},enableUnderline:{get:function(){return!!(4&this._styleFlags)},set:function(C$zut){C$zut?this._styleFlags|=4:this._styleFlags&=-5,this.setVertsDirty()},animatable:!1,tooltip:!1},_underlineHeight:0,underlineHeight:{get:function(){return this._underlineHeight},set:function(C$zut){this._underlineHeight!==C$zut&&(this._underlineHeight=C$zut,this.setVertsDirty())},tooltip:!1}},statics:{HorizontalAlign:C$zut,VerticalAlign:C$zur,Overflow:C$zuo,CacheMode:C$zus,_shareAtlas:null,clearCharCache:function(){C$zuc._shareAtlas&&C$zuc._shareAtlas.clearAllCache()}},onLoad:function(){this._batchAsBitmap&&this.cacheMode===C$zus.NONE&&(this.cacheMode=C$zus.BITMAP,this._batchAsBitmap=!1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(this.cacheMode=C$zus.NONE)},onEnable:function(){this._super(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._nodeSizeChanged,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this),this._forceUpdateRenderData()},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._nodeSizeChanged,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},onDestroy:function(){this._assembler&&this._assembler._resetAssemblerData&&this._assembler._resetAssemblerData(this._assemblerData),this._assemblerData=null,this._letterTexture=null,this._ttfTexture&&(this._ttfTexture.destroy(),this._ttfTexture=null),this._super()},_nodeSizeChanged:function(){this.overflow!==C$zuo.NONE&&this.setVertsDirty()},_updateColor:function(){this.font instanceof cc.BitmapFont||this.setVertsDirty(),C$zun.prototype._updateColor.call(this)},_validateRender:function(){if(this.string){if(this._materials[0]){var C$zut=this.font;if(!(C$zut instanceof cc.BitmapFont))return;var C$zue=C$zut.spriteFrame;if(C$zue&&C$zue.textureLoaded()&&C$zut._fntConfig)return}this.disableRender()}else this.disableRender()},_resetAssembler:function(){this._frame=null,C$zun.prototype._resetAssembler.call(this)},_checkStringEmpty:function(){this.markForRender(!!this.string)},_on3DNodeChanged:function(){this._resetAssembler(),this._applyFontTexture()},_onBMFontTextureLoaded:function(){this._frame._texture=this.font.spriteFrame._texture,this.markForRender(!0),this._updateMaterial(),this._assembler&&this._assembler.updateRenderData(this)},_applyFontTexture:function(){var C$zut=this.font;C$zut instanceof cc.BitmapFont?(C$zut=C$zut.spriteFrame,(this._frame=C$zut)&&C$zut.onTextureLoaded(this._onBMFontTextureLoaded,this)):(this._frame||(this._frame=new C$zua),this.cacheMode===C$zus.CHAR?(this._letterTexture=this._assembler._getAssemblerData(),this._frame._refreshTexture(this._letterTexture)):this._ttfTexture||(this._ttfTexture=new cc.Texture2D,this._assemblerData=this._assembler._getAssemblerData(),this._ttfTexture.initWithElement(this._assemblerData.canvas)),this.cacheMode!==C$zus.CHAR&&(this._frame._resetDynamicAtlasFrame(),this._frame._refreshTexture(this._ttfTexture)),this._updateMaterial(),this._assembler&&this._assembler.updateRenderData(this)),this.markForValidate()},_updateMaterialCanvas:function(){this._frame&&(this._frame._texture.url=this.uuid+"_texture")},_updateMaterialWebgl:function(){var C$zut;!this._frame||(C$zut=this.getMaterial(0))&&C$zut.setProperty("texture",this._frame._texture)},_forceUpdateRenderData:function(){this.setVertsDirty(),this._resetAssembler(),this._applyFontTexture()},_enableBold:function(C$zut){cc.warn("`label._enableBold` is deprecated, use `label.enableBold = true` instead please"),this.enableBold=!!C$zut},_enableItalics:function(C$zut){cc.warn("`label._enableItalics` is deprecated, use `label.enableItalics = true` instead please"),this.enableItalic=!!C$zut},_enableUnderline:function(C$zut){cc.warn("`label._enableUnderline` is deprecated, use `label.enableUnderline = true` instead please"),this.enableUnderline=!!C$zut}});cc.Label=C$zue.exports=C$zuc},{"../assets/material/CCMaterial":53,"../platform/CCMacro":194,"../renderer/utils/label/label-frame":225,"./CCRenderComponent":89}],81:[function(C$zut,C$zue,C$zui){"use strict";C$zut=cc.Class({name:"cc.LabelOutline",extends:C$zut("./CCComponent"),editor:!1,properties:{_color:cc.Color.WHITE,_width:1,color:{tooltip:!1,get:function(){return this._color},set:function(C$zut){this._color=C$zut,this._updateRenderData()}},width:{tooltip:!1,get:function(){return this._width},set:function(C$zut){this._width!==C$zut&&(this._width=C$zut,this._updateRenderData())},range:[0,512]}},onEnable:function(){this._updateRenderData()},onDisable:function(){this._updateRenderData()},_updateRenderData:function(){var C$zut=this.node.getComponent(cc.Label);C$zut&&C$zut.setVertsDirty()}});cc.LabelOutline=C$zue.exports=C$zut},{"./CCComponent":78}],82:[function(C$zut,C$zue,C$zui){"use strict";C$zut=cc.Class({name:"cc.LabelShadow",extends:C$zut("./CCComponent"),editor:!1,properties:{_color:cc.Color.WHITE,_offset:cc.v2(2,2),_blur:2,color:{tooltip:!1,get:function(){return this._color},set:function(C$zut){this._color=C$zut,this._updateRenderData()}},offset:{tooltip:!1,get:function(){return this._offset},set:function(C$zut){this._offset=C$zut,this._updateRenderData()}},blur:{tooltip:!1,get:function(){return this._blur},set:function(C$zut){this._blur=C$zut,this._updateRenderData()},range:[0,1024]}},onEnable:function(){this._updateRenderData()},onDisable:function(){this._updateRenderData()},_updateRenderData:function(){var C$zut=this.node.getComponent(cc.Label);C$zut&&C$zut.markForRender(!0)}});cc.LabelShadow=C$zue.exports=C$zut},{"./CCComponent":78}],83:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCNode").EventType;var C$zuE=cc.Enum({NONE:0,HORIZONTAL:1,VERTICAL:2,GRID:3});var C$zuP=cc.Enum({NONE:0,CONTAINER:1,CHILDREN:2});var C$zun=cc.Enum({HORIZONTAL:0,VERTICAL:1});var C$zuM=cc.Enum({BOTTOM_TO_TOP:0,TOP_TO_BOTTOM:1});var C$zuR=cc.Enum({LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1});C$zut=cc.Class({name:"cc.Layout",extends:C$zut("./CCComponent"),editor:!1,properties:{_layoutSize:cc.size(300,200),_layoutDirty:{default:!0,serializable:!1},_resize:C$zuP.NONE,_N$layoutType:C$zuE.NONE,type:{type:C$zuE,get:function(){return this._N$layoutType},set:function(C$zut){this._N$layoutType=C$zut,this._doLayoutDirty()},tooltip:!1,animatable:!1},resizeMode:{type:C$zuP,tooltip:!1,animatable:!1,get:function(){return this._resize},set:function(C$zut){this.type===C$zuE.NONE&&C$zut===C$zuP.CHILDREN||(this._resize=C$zut,this._doLayoutDirty())}},cellSize:{default:cc.size(40,40),tooltip:!1,type:cc.Size,notify:function(){this._doLayoutDirty()}},startAxis:{default:C$zun.HORIZONTAL,tooltip:!1,type:C$zun,notify:function(){this._doLayoutDirty()},animatable:!1},paddingLeft:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingRight:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingTop:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingBottom:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},spacingX:{default:0,notify:function(){this._doLayoutDirty()},tooltip:!1},spacingY:{default:0,notify:function(){this._doLayoutDirty()},tooltip:!1},verticalDirection:{default:C$zuM.TOP_TO_BOTTOM,type:C$zuM,notify:function(){this._doLayoutDirty()},tooltip:!1,animatable:!1},horizontalDirection:{default:C$zuR.LEFT_TO_RIGHT,type:C$zuR,notify:function(){this._doLayoutDirty()},tooltip:!1,animatable:!1},affectedByScale:{default:!1,notify:function(){this._doLayoutDirty()},animatable:!1,tooltip:!1}},statics:{Type:C$zuE,VerticalDirection:C$zuM,HorizontalDirection:C$zuR,ResizeMode:C$zuP,AxisDirection:C$zun},onEnable:function(){this._addEventListeners(),this.node.getContentSize().equals(cc.size(0,0))&&this.node.setContentSize(this._layoutSize),this._doLayoutDirty()},onDisable:function(){this._removeEventListeners()},_doLayoutDirty:function(){this._layoutDirty=!0},_doScaleDirty:function(){this._layoutDirty=this._layoutDirty||this.affectedByScale},_addEventListeners:function(){cc.director.on(cc.Director.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(C$zur.SIZE_CHANGED,this._resized,this),this.node.on(C$zur.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(C$zur.CHILD_ADDED,this._childAdded,this),this.node.on(C$zur.CHILD_REMOVED,this._childRemoved,this),this.node.on(C$zur.CHILD_REORDER,this._doLayoutDirty,this),this._addChildrenEventListeners()},_removeEventListeners:function(){cc.director.off(cc.Director.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(C$zur.SIZE_CHANGED,this._resized,this),this.node.off(C$zur.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(C$zur.CHILD_ADDED,this._childAdded,this),this.node.off(C$zur.CHILD_REMOVED,this._childRemoved,this),this.node.off(C$zur.CHILD_REORDER,this._doLayoutDirty,this),this._removeChildrenEventListeners()},_addChildrenEventListeners:function(){var C$zut=this.node.children;for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];C$zui.on(C$zur.SCALE_CHANGED,this._doScaleDirty,this),C$zui.on(C$zur.SIZE_CHANGED,this._doLayoutDirty,this),C$zui.on(C$zur.POSITION_CHANGED,this._doLayoutDirty,this),C$zui.on(C$zur.ANCHOR_CHANGED,this._doLayoutDirty,this),C$zui.on("active-in-hierarchy-changed",this._doLayoutDirty,this)}},_removeChildrenEventListeners:function(){var C$zut=this.node.children;for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];C$zui.off(C$zur.SCALE_CHANGED,this._doScaleDirty,this),C$zui.off(C$zur.SIZE_CHANGED,this._doLayoutDirty,this),C$zui.off(C$zur.POSITION_CHANGED,this._doLayoutDirty,this),C$zui.off(C$zur.ANCHOR_CHANGED,this._doLayoutDirty,this),C$zui.off("active-in-hierarchy-changed",this._doLayoutDirty,this)}},_childAdded:function(C$zut){C$zut.on(C$zur.SCALE_CHANGED,this._doScaleDirty,this),C$zut.on(C$zur.SIZE_CHANGED,this._doLayoutDirty,this),C$zut.on(C$zur.POSITION_CHANGED,this._doLayoutDirty,this),C$zut.on(C$zur.ANCHOR_CHANGED,this._doLayoutDirty,this),C$zut.on("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()},_childRemoved:function(C$zut){C$zut.off(C$zur.SCALE_CHANGED,this._doScaleDirty,this),C$zut.off(C$zur.SIZE_CHANGED,this._doLayoutDirty,this),C$zut.off(C$zur.POSITION_CHANGED,this._doLayoutDirty,this),C$zut.off(C$zur.ANCHOR_CHANGED,this._doLayoutDirty,this),C$zut.off("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()},_resized:function(){this._layoutSize=this.node.getContentSize(),this._doLayoutDirty()},_doLayoutHorizontally:function(C$zuh,C$zuu,C$zu_,C$zud){var C$zuf=this.node.getAnchorPoint();var C$zup=this.node.children;var C$zut=1;var C$zum=this.paddingLeft;var C$zuv=-C$zuf.x*C$zuh;this.horizontalDirection===C$zuR.RIGHT_TO_LEFT&&(C$zut=-1,C$zuv=(1-C$zuf.x)*C$zuh,C$zum=this.paddingRight);var C$zuy=C$zuv+C$zut*C$zum-C$zut*this.spacingX;var C$zug=0;var C$zue=0;var C$zui=0;var C$zub=0;var C$zur=0;var C$zuC=0;var C$zux=0;for(var C$zun=0;C$zun<C$zup.length;++C$zun)(C$zua=C$zup[C$zun]).activeInHierarchy&&C$zux++;var C$zuA=this.cellSize.width;this.type!==C$zuE.GRID&&this.resizeMode===C$zuP.CHILDREN&&(C$zuA=(C$zuh-(this.paddingLeft+this.paddingRight)-(C$zux-1)*this.spacingX)/C$zux);for(C$zun=0;C$zun<C$zup.length;++C$zun){var C$zua=C$zup[C$zun];var C$zuo=this._getUsedScaleValue(C$zua.scaleX);var C$zus=this._getUsedScaleValue(C$zua.scaleY);var C$zuS,C$zuT,C$zuc,C$zuw,C$zul;C$zua.activeInHierarchy&&(this._resize===C$zuP.CHILDREN&&(C$zua.width=C$zuA/C$zuo,this.type===C$zuE.GRID&&(C$zua.height=this.cellSize.height/C$zus)),C$zul=C$zua.anchorX,C$zuo=C$zua.width*C$zuo,(C$zue=C$zue<C$zui?C$zui:C$zue)<=(C$zus=C$zua.height*C$zus)&&(C$zui=C$zue,C$zue=C$zus,C$zuC=C$zua.getAnchorPoint().y),C$zuy=C$zuy+C$zut*(C$zul=this.horizontalDirection===C$zuR.RIGHT_TO_LEFT?1-C$zua.anchorX:C$zul)*C$zuo+C$zut*this.spacingX,C$zuS=C$zut*(1-C$zul)*C$zuo,C$zuu&&(C$zuc=C$zuy+C$zuS+C$zut*(0<C$zut?this.paddingRight:this.paddingLeft),C$zuT=this.horizontalDirection===C$zuR.LEFT_TO_RIGHT&&C$zuc>(1-C$zuf.x)*C$zuh,C$zuc=this.horizontalDirection===C$zuR.RIGHT_TO_LEFT&&C$zuc<-C$zuf.x*C$zuh,(C$zuT||C$zuc)&&(C$zue<=C$zus?(C$zug+=C$zui=0===C$zui?C$zue:C$zui,C$zui=C$zue):(C$zug+=C$zue,C$zui=C$zus,C$zue=0),C$zuy=C$zuv+C$zut*(C$zum+C$zul*C$zuo),C$zub++)),C$zuT=C$zu_(C$zua,C$zug,C$zub),C$zuh>=C$zuo+this.paddingLeft+this.paddingRight&&C$zud&&C$zua.setPosition(cc.v2(C$zuy,C$zuT)),C$zuc=1,C$zul=0===C$zue?C$zus:C$zue,this.verticalDirection===C$zuM.TOP_TO_BOTTOM?(C$zur=C$zur||this.node._contentSize.height,(C$zuw=C$zuT+(C$zuc=-1)*(C$zul*C$zuC+this.paddingBottom))<C$zur&&(C$zur=C$zuw)):(C$zur=C$zur||-this.node._contentSize.height)<(C$zuw=C$zuT+C$zuc*(C$zul*C$zuC+this.paddingTop))&&(C$zur=C$zuw),C$zuy+=C$zuS)}return C$zur},_getVerticalBaseHeight:function(C$zut){var C$zue=0;var C$zui=0;if(this.resizeMode===C$zuP.CONTAINER){for(var C$zur=0;C$zur<C$zut.length;++C$zur){var C$zun=C$zut[C$zur];C$zun.activeInHierarchy&&(C$zui++,C$zue+=C$zun.height*this._getUsedScaleValue(C$zun.scaleY))}C$zue+=(C$zui-1)*this.spacingY+this.paddingBottom+this.paddingTop}else C$zue=this.node.getContentSize().height;return C$zue},_doLayoutVertically:function(C$zuh,C$zuu,C$zu_,C$zud){var C$zuf=this.node.getAnchorPoint();var C$zup=this.node.children;var C$zut=1;var C$zum=this.paddingBottom;var C$zuv=-C$zuf.y*C$zuh;this.verticalDirection===C$zuM.TOP_TO_BOTTOM&&(C$zut=-1,C$zuv=(1-C$zuf.y)*C$zuh,C$zum=this.paddingTop);var C$zuy=C$zuv+C$zut*C$zum-C$zut*this.spacingY;var C$zug=0;var C$zue=0;var C$zui=0;var C$zub=0;var C$zur=0;var C$zuC=0;var C$zux=0;for(var C$zun=0;C$zun<C$zup.length;++C$zun)(C$zua=C$zup[C$zun]).activeInHierarchy&&C$zux++;var C$zuA=this.cellSize.height;this.type!==C$zuE.GRID&&this.resizeMode===C$zuP.CHILDREN&&(C$zuA=(C$zuh-(this.paddingTop+this.paddingBottom)-(C$zux-1)*this.spacingY)/C$zux);for(C$zun=0;C$zun<C$zup.length;++C$zun){var C$zua=C$zup[C$zun];var C$zuo=this._getUsedScaleValue(C$zua.scaleX);var C$zus=this._getUsedScaleValue(C$zua.scaleY);var C$zuS,C$zuT,C$zuc,C$zuw,C$zul;C$zua.activeInHierarchy&&(this.resizeMode===C$zuP.CHILDREN&&(C$zua.height=C$zuA/C$zus,this.type===C$zuE.GRID&&(C$zua.width=this.cellSize.width/C$zuo)),C$zul=C$zua.anchorY,C$zuo=C$zua.width*C$zuo,C$zus=C$zua.height*C$zus,(C$zue=C$zue<C$zui?C$zui:C$zue)<=C$zuo&&(C$zui=C$zue,C$zue=C$zuo,C$zuC=C$zua.getAnchorPoint().x),C$zuy=C$zuy+C$zut*(C$zul=this.verticalDirection===C$zuM.TOP_TO_BOTTOM?1-C$zua.anchorY:C$zul)*C$zus+C$zut*this.spacingY,C$zuS=C$zut*(1-C$zul)*C$zus,C$zuu&&(C$zuc=C$zuy+C$zuS+C$zut*(0<C$zut?this.paddingTop:this.paddingBottom),C$zuT=this.verticalDirection===C$zuM.BOTTOM_TO_TOP&&C$zuc>(1-C$zuf.y)*C$zuh,C$zuc=this.verticalDirection===C$zuM.TOP_TO_BOTTOM&&C$zuc<-C$zuf.y*C$zuh,(C$zuT||C$zuc)&&(C$zue<=C$zuo?(C$zug+=C$zui=0===C$zui?C$zue:C$zui,C$zui=C$zue):(C$zug+=C$zue,C$zui=C$zuo,C$zue=0),C$zuy=C$zuv+C$zut*(C$zum+C$zul*C$zus),C$zub++)),C$zuT=C$zu_(C$zua,C$zug,C$zub),C$zuh>=C$zus+(this.paddingTop+this.paddingBottom)&&C$zud&&C$zua.setPosition(cc.v2(C$zuT,C$zuy)),C$zuc=1,C$zul=0===C$zue?C$zuo:C$zue,this.horizontalDirection===C$zuR.RIGHT_TO_LEFT?(C$zur=C$zur||this.node._contentSize.width,(C$zuw=C$zuT+(C$zuc=-1)*(C$zul*C$zuC+this.paddingLeft))<C$zur&&(C$zur=C$zuw)):(C$zur=C$zur||-this.node._contentSize.width)<(C$zuw=C$zuT+C$zuc*(C$zul*C$zuC+this.paddingRight))&&(C$zur=C$zuw),C$zuy+=C$zuS)}return C$zur},_doLayoutBasic:function(){var C$zut=this.node.children;var C$zue=null;for(var C$zui=0;C$zui<C$zut.length;++C$zui){var C$zur=C$zut[C$zui];C$zur.activeInHierarchy&&(C$zue?C$zue.union(C$zue,C$zur.getBoundingBoxToWorld()):C$zue=C$zur.getBoundingBoxToWorld())}var C$zun,C$zua,C$zuo;C$zue&&(C$zun=this.node.convertToNodeSpaceAR(cc.v2(C$zue.x,C$zue.y)),C$zun=cc.v2(C$zun.x-this.paddingLeft,C$zun.y-this.paddingBottom),C$zua=this.node.convertToNodeSpaceAR(cc.v2(C$zue.xMax,C$zue.yMax)),C$zua=(C$zua=cc.v2(C$zua.x+this.paddingRight,C$zua.y+this.paddingTop)).sub(C$zun),0!==(C$zua=cc.size(parseFloat(C$zua.x.toFixed(2)),parseFloat(C$zua.y.toFixed(2)))).width&&(C$zuo=-C$zun.x/C$zua.width,this.node.anchorX=parseFloat(C$zuo.toFixed(2))),0!==C$zua.height&&(C$zuo=-C$zun.y/C$zua.height,this.node.anchorY=parseFloat(C$zuo.toFixed(2))),this.node.setContentSize(C$zua))},_doLayoutGridAxisHorizontal:function(C$zut,C$zue){var C$zui=C$zue.width;var C$zur=1;var C$zun=-C$zut.y*C$zue.height;var C$zua=this.paddingBottom;this.verticalDirection===C$zuM.TOP_TO_BOTTOM&&(C$zur=-1,C$zun=(1-C$zut.y)*C$zue.height,C$zua=this.paddingTop);C$zue=function(C$zut,C$zue,C$zui){return C$zun+C$zur*(C$zue+C$zut.anchorY*C$zut.height*this._getUsedScaleValue(C$zut.scaleY)+C$zua+C$zui*this.spacingY)}.bind(this);var C$zuo=0;var C$zus;this.resizeMode===C$zuP.CONTAINER&&(C$zus=this._doLayoutHorizontally(C$zui,!0,C$zue,!1),(C$zuo=C$zun-C$zus)<0&&(C$zuo*=-1),C$zun=-C$zut.y*C$zuo,this.verticalDirection===C$zuM.TOP_TO_BOTTOM&&(C$zur=-1,C$zun=(1-C$zut.y)*C$zuo)),this._doLayoutHorizontally(C$zui,!0,C$zue,!0),this.resizeMode===C$zuP.CONTAINER&&this.node.setContentSize(C$zui,C$zuo)},_doLayoutGridAxisVertical:function(C$zut,C$zue){var C$zui=C$zue.height;var C$zur=1;var C$zun=-C$zut.x*C$zue.width;var C$zua=this.paddingLeft;this.horizontalDirection===C$zuR.RIGHT_TO_LEFT&&(C$zur=-1,C$zun=(1-C$zut.x)*C$zue.width,C$zua=this.paddingRight);C$zue=function(C$zut,C$zue,C$zui){return C$zun+C$zur*(C$zue+C$zut.anchorX*C$zut.width*this._getUsedScaleValue(C$zut.scaleX)+C$zua+C$zui*this.spacingX)}.bind(this);var C$zuo=0;var C$zus;this.resizeMode===C$zuP.CONTAINER&&(C$zus=this._doLayoutVertically(C$zui,!0,C$zue,!1),(C$zuo=C$zun-C$zus)<0&&(C$zuo*=-1),C$zun=-C$zut.x*C$zuo,this.horizontalDirection===C$zuR.RIGHT_TO_LEFT&&(C$zur=-1,C$zun=(1-C$zut.x)*C$zuo)),this._doLayoutVertically(C$zui,!0,C$zue,!0),this.resizeMode===C$zuP.CONTAINER&&this.node.setContentSize(C$zuo,C$zui)},_doLayoutGrid:function(){var C$zut=this.node.getAnchorPoint();var C$zue=this.node.getContentSize();this.startAxis===C$zun.HORIZONTAL?this._doLayoutGridAxisHorizontal(C$zut,C$zue):this.startAxis===C$zun.VERTICAL&&this._doLayoutGridAxisVertical(C$zut,C$zue)},_getHorizontalBaseWidth:function(C$zut){var C$zue=0;var C$zui=0;if(this.resizeMode===C$zuP.CONTAINER){for(var C$zur=0;C$zur<C$zut.length;++C$zur){var C$zun=C$zut[C$zur];C$zun.activeInHierarchy&&(C$zui++,C$zue+=C$zun.width*this._getUsedScaleValue(C$zun.scaleX))}C$zue+=(C$zui-1)*this.spacingX+this.paddingLeft+this.paddingRight}else C$zue=this.node.getContentSize().width;return C$zue},_doLayout:function(){var C$zut;this.type===C$zuE.HORIZONTAL?(C$zut=this._getHorizontalBaseWidth(this.node.children),this._doLayoutHorizontally(C$zut,!1,function(C$zut){return C$zut.y},!0),this.node.width=C$zut):this.type===C$zuE.VERTICAL?(C$zut=this._getVerticalBaseHeight(this.node.children),this._doLayoutVertically(C$zut,!1,function(C$zut){return C$zut.x},!0),this.node.height=C$zut):this.type===C$zuE.NONE?this.resizeMode===C$zuP.CONTAINER&&this._doLayoutBasic():this.type===C$zuE.GRID&&this._doLayoutGrid()},_getUsedScaleValue:function(C$zut){return this.affectedByScale?Math.abs(C$zut):1},updateLayout:function(){this._layoutDirty&&0<this.node.children.length&&(this._doLayout(),this._layoutDirty=!1)}});cc.Layout=C$zue.exports=C$zut},{"../CCNode":30,"./CCComponent":78}],84:[function(C$zut,C$zue,C$zun){"use strict";var C$zuh=_interopRequireDefault(C$zut("../../renderer/gfx"));var C$zua=_interopRequireDefault(C$zut("../value-types/mat4"));var C$zuo=_interopRequireDefault(C$zut("../value-types/vec2"));var C$zui=_interopRequireDefault(C$zut("../assets/material/material-variant"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}var C$zuu=C$zut("../utils/misc");var C$zu_=C$zut("./CCRenderComponent");var C$zur=C$zut("../renderer/render-flow");var C$zud=C$zut("../graphics/graphics");var C$zuf=new C$zuo.default;var C$zus=new C$zua.default;var C$zuc=[];var C$zul=cc.Enum({RECT:0,ELLIPSE:1,IMAGE_STENCIL:2});C$zut=cc.Class({name:"cc.Mask",extends:C$zu_,editor:!1,ctor:function(){this._graphics=null,this._enableMaterial=null,this._exitMaterial=null,this._clearMaterial=null},properties:{_spriteFrame:{default:null,type:cc.SpriteFrame},_type:C$zul.RECT,type:{get:function(){return this._type},set:function(C$zut){this._type!==C$zut&&this._resetAssembler(),this._type=C$zut,this._type!==C$zul.IMAGE_STENCIL&&(this.spriteFrame=null,this.alphaThreshold=0,this._updateGraphics()),this._activateMaterial()},type:C$zul,tooltip:!1},spriteFrame:{type:cc.SpriteFrame,tooltip:!1,get:function(){return this._spriteFrame},set:function(C$zut){this._spriteFrame!==C$zut&&(this._spriteFrame=C$zut,this.setVertsDirty(),this._updateMaterial())}},alphaThreshold:{default:.1,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS?this._updateMaterial():cc.warnID(4201)}},inverted:{default:!1,type:cc.Boolean,tooltip:!1,notify:function(){cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&cc.warnID(4202)}},_segments:64,segements:{get:function(){return this._segments},set:function(C$zut){this._segments=C$zuu.clampf(C$zut,3,1e4),this._updateGraphics()},type:cc.Integer,tooltip:!1},_resizeToTarget:{animatable:!1,set:function(C$zut){C$zut&&this._resizeNodeToTargetNode()}}},statics:{Type:C$zul},onRestore:function(){this._activateMaterial()},onEnable:function(){this._super(),this._type!==C$zul.IMAGE_STENCIL&&this._updateGraphics(),this.node.on(cc.Node.EventType.POSITION_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.ROTATION_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.SCALE_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._updateGraphics,this)},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.POSITION_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.ROTATION_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.SCALE_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._updateGraphics,this),this.node._renderFlag&=~C$zur.FLAG_POST_RENDER},onDestroy:function(){this._super(),this._removeGraphics()},_resizeNodeToTargetNode:!1,_validateRender:function(){var C$zut;this._type===C$zul.IMAGE_STENCIL&&((C$zut=this._spriteFrame)&&C$zut.textureLoaded()||this.disableRender())},_activateMaterial:function(){this._createGraphics();var C$zut=this._materials[0];(C$zut=C$zut?C$zui.default.create(C$zut,this):C$zui.default.createWithBuiltin("2d-sprite",this)).define("USE_ALPHA_TEST",!0),this._type===C$zul.IMAGE_STENCIL?(C$zut.define("CC_USE_MODEL",!1),C$zut.define("USE_TEXTURE",!0)):(C$zut.define("CC_USE_MODEL",!0),C$zut.define("USE_TEXTURE",!1)),this._enableMaterial||(this._enableMaterial=C$zui.default.createWithBuiltin("2d-sprite",this)),this._exitMaterial||(this._exitMaterial=C$zui.default.createWithBuiltin("2d-sprite",this),this._exitMaterial.setStencilEnabled(C$zuh.default.STENCIL_DISABLE)),this._clearMaterial||(this._clearMaterial=C$zui.default.createWithBuiltin("clear-stencil",this)),this.setMaterial(0,C$zut),this._graphics._materials[0]=C$zut,this._updateMaterial()},_updateMaterial:function(){var C$zut=this._materials[0];var C$zue;C$zut&&(this._type===C$zul.IMAGE_STENCIL&&this.spriteFrame&&(C$zue=this.spriteFrame.getTexture(),C$zut.setProperty("texture",C$zue)),C$zut.setProperty("alphaThreshold",this.alphaThreshold))},_createGraphics:function(){this._graphics||(this._graphics=new C$zud,cc.Assembler.init(this._graphics),this._graphics.node=this.node,this._graphics.lineWidth=0,this._graphics.strokeColor=cc.color(0,0,0,0))},_updateGraphics:function(){var C$zut=this.node;var C$zue=this._graphics;C$zue.clear(!1);var C$zui=C$zut._contentSize.width;var C$zur=C$zut._contentSize.height;var C$zun=-C$zui*C$zut._anchorPoint.x;C$zut=-C$zur*C$zut._anchorPoint.y;if(this._type===C$zul.RECT)C$zue.rect(C$zun,C$zut,C$zui,C$zur);else if(this._type===C$zul.ELLIPSE){var C$zua=function(C$zut,C$zue,C$zui){C$zuc.length=0;var C$zur=2*Math.PI/C$zui;for(var C$zun=0;C$zun<C$zui;++C$zun)C$zuc.push(cc.v2(C$zue.x*Math.cos(C$zur*C$zun)+C$zut.x,C$zue.y*Math.sin(C$zur*C$zun)+C$zut.y));return C$zuc}(cc.v2(C$zun+C$zui/2,C$zut+C$zur/2),{x:C$zui/2,y:C$zur/2},this._segments);for(var C$zuo=0;C$zuo<C$zua.length;++C$zuo){var C$zus=C$zua[C$zuo];0===C$zuo?C$zue.moveTo(C$zus.x,C$zus.y):C$zue.lineTo(C$zus.x,C$zus.y)}C$zue.close()}cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?C$zue.stroke():C$zue.fill()},_removeGraphics:function(){this._graphics&&(this._graphics.destroy(),this._graphics._destroyImmediate(),this._graphics=null)},_hitTest:function(C$zut){var C$zue=this.node;var C$zui=C$zue.getContentSize(),C$zur=C$zui.width,C$zui=C$zui.height,C$zun=C$zuf;if(C$zue._updateWorldMatrix(),!C$zua.default.invert(C$zus,C$zue._worldMatrix))return!1;C$zuo.default.transformMat4(C$zun,C$zut,C$zus),C$zun.x+=C$zue._anchorPoint.x*C$zur,C$zun.y+=C$zue._anchorPoint.y*C$zui;C$zut=!1;return this.type===C$zul.RECT||this.type===C$zul.IMAGE_STENCIL?C$zut=0<=C$zun.x&&0<=C$zun.y&&C$zun.x<=C$zur&&C$zun.y<=C$zui:this.type===C$zul.ELLIPSE&&(C$zut=(C$zue=C$zun.x-.5*C$zur)*C$zue/((C$zue=C$zur/2)*C$zue)+(C$zur=C$zun.y-.5*C$zui)*C$zur/((C$zue=C$zui/2)*C$zue)<1),C$zut=this.inverted?!C$zut:C$zut},markForRender:function(C$zut){var C$zue=C$zur.FLAG_RENDER|C$zur.FLAG_UPDATE_RENDER_DATA|C$zur.FLAG_POST_RENDER;C$zut?(this.node._renderFlag|=C$zue,this.markForValidate()):this.node._renderFlag&=~C$zue},disableRender:function(){this.node._renderFlag&=~(C$zur.FLAG_RENDER|C$zur.FLAG_UPDATE_RENDER_DATA|C$zur.FLAG_POST_RENDER)}});cc.Mask=C$zue.exports=C$zut},{"../../renderer/gfx":312,"../assets/material/material-variant":60,"../graphics/graphics":131,"../renderer/render-flow":221,"../utils/misc":264,"../value-types/mat4":281,"../value-types/vec2":288,"./CCRenderComponent":89}],85:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../components/CCRenderComponent");var C$zun=C$zut("../../core/utils/blend-func");C$zut=cc.Class({name:"cc.MotionStreak",extends:C$zur,mixins:[C$zun],editor:!1,ctor:function(){this._points=[]},properties:{preview:{default:!1,editorOnly:!0,notify:!1,animatable:!1},_fadeTime:1,fadeTime:{get:function(){return this._fadeTime},set:function(C$zut){this._fadeTime=C$zut,this.reset()},animatable:!1,tooltip:!1},_minSeg:1,minSeg:{get:function(){return this._minSeg},set:function(C$zut){this._minSeg=C$zut},animatable:!1,tooltip:!1},_stroke:64,stroke:{get:function(){return this._stroke},set:function(C$zut){this._stroke=C$zut},animatable:!1,tooltip:!1},_texture:{default:null,type:cc.Texture2D},texture:{get:function(){return this._texture},set:function(C$zut){this._texture!==C$zut&&(this._texture=C$zut,this._updateMaterial())},type:cc.Texture2D,animatable:!1,tooltip:!1},_color:cc.Color.WHITE,color:{get:function(){return this._color},set:function(C$zut){this._color=C$zut},type:cc.Color,tooltip:!1},_fastMode:!1,fastMode:{get:function(){return this._fastMode},set:function(C$zut){this._fastMode=C$zut},animatable:!1,tooltip:!1}},onEnable:function(){this._super(),this.reset()},_updateMaterial:function(){var C$zut=this.getMaterial(0);C$zut&&C$zut.setProperty("texture",this._texture),C$zun.prototype._updateMaterial.call(this)},onFocusInEditor:!1,onLostFocusInEditor:!1,reset:function(){this._points.length=0,this._assembler&&this._assembler._renderData.clear()},lateUpdate:function(C$zut){this._assembler&&this._assembler.update(this,C$zut)}});cc.MotionStreak=C$zue.exports=C$zut},{"../../core/utils/blend-func":257,"../components/CCRenderComponent":89}],86:[function(C$zut,C$zue,C$zui){"use strict";var C$zua=cc.Enum({Unified:0,Free:1});var C$zuo=cc.Enum({Horizontal:0,Vertical:1});var C$zur=cc.Enum({PAGE_TURNING:0});var C$zun=cc.Class({name:"cc.PageView",extends:cc.ScrollView,editor:!1,ctor:function(){this._curPageIdx=0,this._lastPageIdx=0,this._pages=[],this._initContentPos=cc.v2(),this._scrollCenterOffsetX=[],this._scrollCenterOffsetY=[]},properties:{sizeMode:{default:C$zua.Unified,type:C$zua,tooltip:!1,notify:function(){this._syncSizeMode()}},direction:{default:C$zuo.Horizontal,type:C$zuo,tooltip:!1,notify:function(){this._syncScrollDirection()}},scrollThreshold:{default:.5,type:cc.Float,slide:!0,range:[0,1,.01],tooltip:!1},autoPageTurningThreshold:{default:100,type:cc.Float,tooltip:!1},pageTurningEventTiming:{default:.1,type:cc.Float,range:[0,1,.01],tooltip:!1},indicator:{default:null,type:cc.PageViewIndicator,tooltip:!1,notify:function(){this.indicator&&this.indicator.setPageView(this)}},pageTurningSpeed:{default:.3,type:cc.Float,tooltip:!1},pageEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{SizeMode:C$zua,Direction:C$zuo,EventType:C$zur},__preload:function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this._updateAllPagesSize,this)},onEnable:function(){this._super(),this.node.on("scroll-ended-with-threshold",this._dispatchPageTurningEvent,this)},onDisable:function(){this._super(),this.node.off("scroll-ended-with-threshold",this._dispatchPageTurningEvent,this)},onLoad:function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)},onDestroy:function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._updateAllPagesSize,this)},getCurrentPageIndex:function(){return this._curPageIdx},setCurrentPageIndex:function(C$zut){this.scrollToPage(C$zut,!0)},getPages:function(){return this._pages},addPage:function(C$zut){C$zut&&-1===this._pages.indexOf(C$zut)&&this.content&&(this.content.addChild(C$zut),this._pages.push(C$zut),this._updatePageView())},insertPage:function(C$zut,C$zue){C$zue<0||!C$zut||-1!==this._pages.indexOf(C$zut)||!this.content||(this._pages.length<=C$zue?this.addPage(C$zut):(this._pages.splice(C$zue,0,C$zut),this.content.addChild(C$zut),this._updatePageView()))},removePage:function(C$zut){var C$zue;C$zut&&this.content&&(-1!==(C$zue=this._pages.indexOf(C$zut))?this.removePageAtIndex(C$zue):cc.warnID(4300,C$zut.name))},removePageAtIndex:function(C$zut){var C$zue=this._pages;var C$zui;C$zut<0||C$zut>=C$zue.length||(C$zui=C$zue[C$zut])&&(this.content.removeChild(C$zui),C$zue.splice(C$zut,1),this._updatePageView())},removeAllPages:function(){if(this.content){var C$zut=this._pages;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)this.content.removeChild(C$zut[C$zue]);this._pages.length=0,this._updatePageView()}},scrollToPage:function(C$zut,C$zue){C$zut<0||C$zut>=this._pages.length||(C$zue=void 0!==C$zue?C$zue:.3,this._curPageIdx=C$zut,this.scrollToOffset(this._moveOffsetValue(C$zut),C$zue,!0),this.indicator&&this.indicator._changedState())},getScrollEndedEventTiming:function(){return this.pageTurningEventTiming},_syncScrollDirection:function(){this.horizontal=this.direction===C$zuo.Horizontal,this.vertical=this.direction===C$zuo.Vertical},_syncSizeMode:function(){var C$zut,C$zue;!this.content||(C$zut=this.content.getComponent(cc.Layout))&&(this.sizeMode===C$zua.Free&&0<this._pages.length&&(C$zue=this._pages[this._pages.length-1],this.direction===C$zuo.Horizontal?(C$zut.paddingLeft=(this._view.width-this._pages[0].width)/2,C$zut.paddingRight=(this._view.width-C$zue.width)/2):this.direction===C$zuo.Vertical&&(C$zut.paddingTop=(this._view.height-this._pages[0].height)/2,C$zut.paddingBottom=(this._view.height-C$zue.height)/2)),C$zut.updateLayout())},_updatePageView:function(){var C$zut=this.content.getComponent(cc.Layout);C$zut&&C$zut.enabled&&C$zut.updateLayout();var C$zue=this._pages.length;this._curPageIdx>=C$zue&&(this._curPageIdx=0===C$zue?0:C$zue-1,this._lastPageIdx=this._curPageIdx);var C$zui=this._initContentPos;for(var C$zur=0;C$zur<C$zue;++C$zur){var C$zun=this._pages[C$zur];C$zun.setSiblingIndex(C$zur),this.direction===C$zuo.Horizontal?this._scrollCenterOffsetX[C$zur]=Math.abs(C$zui.x+C$zun.x):this._scrollCenterOffsetY[C$zur]=Math.abs(C$zui.y+C$zun.y)}this.indicator&&this.indicator._refresh()},_updateAllPagesSize:function(){if(this.sizeMode===C$zua.Unified){var C$zut=this._pages;var C$zue=this._view.getContentSize();for(var C$zui=0,C$zur=C$zut.length;C$zui<C$zur;C$zui++)C$zut[C$zui].setContentSize(C$zue)}},_initPages:function(){if(this.content){this._initContentPos=this.content.position;var C$zut=this.content.children;for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];0<=this._pages.indexOf(C$zui)||this._pages.push(C$zui)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}},_dispatchPageTurningEvent:function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,cc.Component.EventHandler.emitEvents(this.pageEvents,this,C$zur.PAGE_TURNING),this.node.emit("page-turning",this))},_isScrollable:function(C$zut,C$zue,C$zui){return this.sizeMode!==C$zua.Free?this.direction===C$zuo.Horizontal?Math.abs(C$zut.x)>=this._view.width*this.scrollThreshold:this.direction===C$zuo.Vertical?Math.abs(C$zut.y)>=this._view.height*this.scrollThreshold:void 0:this.direction===C$zuo.Horizontal?(C$zur=this._scrollCenterOffsetX[C$zue],C$zun=this._scrollCenterOffsetX[C$zui],Math.abs(C$zut.x)>=Math.abs(C$zur-C$zun)*this.scrollThreshold):this.direction===C$zuo.Vertical?(C$zur=this._scrollCenterOffsetY[C$zue],C$zun=this._scrollCenterOffsetY[C$zui],Math.abs(C$zut.y)>=Math.abs(C$zur-C$zun)*this.scrollThreshold):void 0;var C$zur,C$zun},_isQuicklyScrollable:function(C$zut){if(this.direction===C$zuo.Horizontal){if(Math.abs(C$zut.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===C$zuo.Vertical&&Math.abs(C$zut.y)>this.autoPageTurningThreshold)return!0;return!1},_moveOffsetValue:function(C$zut){var C$zue=cc.v2(0,0);return this.sizeMode===C$zua.Free?this.direction===C$zuo.Horizontal?C$zue.x=this._scrollCenterOffsetX[C$zut]:this.direction===C$zuo.Vertical&&(C$zue.y=this._scrollCenterOffsetY[C$zut]):this.direction===C$zuo.Horizontal?C$zue.x=C$zut*this._view.width:this.direction===C$zuo.Vertical&&(C$zue.y=C$zut*this._view.height),C$zue},_getDragDirection:function(C$zut){return this.direction===C$zuo.Horizontal?0===C$zut.x?0:0<C$zut.x?1:-1:this.direction===C$zuo.Vertical?0===C$zut.y?0:C$zut.y<0?1:-1:void 0},_handleReleaseLogic:function(C$zut){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent("scroll-ended"))},_autoScrollToPage:function(){if(this._startBounceBackIfNeeded()){var C$zut=this._getHowMuchOutOfBoundary();(0<(C$zut=this._clampDelta(C$zut)).x||C$zut.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(C$zut.x<0||0<C$zut.y)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{C$zut=this._touchBeganPosition.sub(this._touchEndPosition);var C$zue=this._curPageIdx,C$zui=C$zue+this._getDragDirection(C$zut);var C$zur=this.pageTurningSpeed*Math.abs(C$zue-C$zui);if(C$zui<this._pages.length){if(this._isScrollable(C$zut,C$zue,C$zui))return void this.scrollToPage(C$zui,C$zur);C$zut=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(C$zut))return void this.scrollToPage(C$zui,C$zur)}this.scrollToPage(C$zue,C$zur)}},_onTouchBegan:function(C$zut,C$zue){this._touchBeganPosition=C$zut.touch.getLocation(),this._super(C$zut,C$zue)},_onTouchMoved:function(C$zut,C$zue){this._super(C$zut,C$zue)},_onTouchEnded:function(C$zut,C$zue){this._touchEndPosition=C$zut.touch.getLocation(),this._super(C$zut,C$zue)},_onTouchCancelled:function(C$zut,C$zue){this._touchEndPosition=C$zut.touch.getLocation(),this._super(C$zut,C$zue)},_onMouseWheel:function(){}});cc.PageView=C$zue.exports=C$zun},{}],87:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Enum({HORIZONTAL:0,VERTICAL:1});C$zut=cc.Class({name:"cc.PageViewIndicator",extends:C$zut("./CCComponent"),editor:!1,properties:{_layout:null,_pageView:null,_indicators:[],spriteFrame:{default:null,type:cc.SpriteFrame,tooltip:!1},direction:{default:C$zur.HORIZONTAL,type:C$zur,tooltip:!1},cellSize:{default:cc.size(20,20),tooltip:!1},spacing:{default:0,tooltip:!1}},statics:{Direction:C$zur},onLoad:function(){this._updateLayout()},setPageView:function(C$zut){this._pageView=C$zut,this._refresh()},_updateLayout:function(){this._layout=this.getComponent(cc.Layout),this._layout||(this._layout=this.addComponent(cc.Layout)),this.direction===C$zur.HORIZONTAL?(this._layout.type=cc.Layout.Type.HORIZONTAL,this._layout.spacingX=this.spacing):this.direction===C$zur.VERTICAL&&(this._layout.type=cc.Layout.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=cc.Layout.ResizeMode.CONTAINER},_createIndicator:function(){var C$zut=new cc.Node;var C$zue=C$zut.addComponent(cc.Sprite);return C$zue.spriteFrame=this.spriteFrame,C$zue.sizeMode=cc.Sprite.SizeMode.CUSTOM,C$zut.parent=this.node,C$zut.width=this.cellSize.width,C$zut.height=this.cellSize.height,C$zut},_changedState:function(){var C$zut=this._indicators;if(0!==C$zut.length){var C$zue=this._pageView._curPageIdx;if(!(C$zue>=C$zut.length)){for(var C$zui=0;C$zui<C$zut.length;++C$zui)C$zut[C$zui].opacity=127.5;C$zut[C$zue].opacity=255}}},_refresh:function(){if(this._pageView){var C$zut=this._indicators;var C$zue=this._pageView.getPages();if(C$zue.length!==C$zut.length){var C$zui=0;if(C$zue.length>C$zut.length)for(C$zui=0;C$zui<C$zue.length;++C$zui)C$zut[C$zui]||(C$zut[C$zui]=this._createIndicator());else for(C$zui=C$zut.length-C$zue.length;0<C$zui;--C$zui){var C$zur=C$zut[C$zui-1];this.node.removeChild(C$zur),C$zut.splice(C$zui-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}}});cc.PageViewIndicator=C$zue.exports=C$zut},{"./CCComponent":78}],88:[function(C$zut,C$zue,C$zui){"use strict";var C$zuh=C$zut("../utils/misc");C$zut=C$zut("./CCComponent");var C$zuu=cc.Enum({HORIZONTAL:0,VERTICAL:1,FILLED:2});C$zut=cc.Class({name:"cc.ProgressBar",extends:C$zut,editor:!1,_initBarSprite:function(){var C$zut,C$zue,C$zui,C$zur;!this.barSprite||(C$zut=this.barSprite.node)&&(C$zue=this.node.getContentSize(),C$zui=this.node.getAnchorPoint(),C$zur=C$zut.getContentSize(),C$zut.parent===this.node&&this.node.setContentSize(C$zur),this.barSprite.fillType===cc.Sprite.FillType.RADIAL&&(this.mode=C$zuu.FILLED),C$zur=C$zut.getContentSize(),this.mode===C$zuu.HORIZONTAL?this.totalLength=C$zur.width:this.mode===C$zuu.VERTICAL?this.totalLength=C$zur.height:this.totalLength=this.barSprite.fillRange,C$zut.parent===this.node&&(C$zur=-C$zue.width*C$zui.x,C$zut.setPosition(cc.v2(C$zur,0))))},_updateBarStatus:function(){if(this.barSprite){var C$zut=this.barSprite.node;if(C$zut){var C$zue=C$zut.getAnchorPoint();var C$zui=C$zut.getContentSize();var C$zur=C$zut.getPosition();var C$zun=cc.v2(0,.5);var C$zua=C$zuh.clamp01(this.progress);var C$zuo=this.totalLength*C$zua;var C$zus;var C$zuc;var C$zul;switch(this.mode){case C$zuu.HORIZONTAL:this.reverse&&(C$zun=cc.v2(1,.5)),C$zus=cc.size(C$zuo,C$zui.height),C$zuc=this.totalLength,C$zul=C$zui.height;break;case C$zuu.VERTICAL:C$zun=this.reverse?cc.v2(.5,1):cc.v2(.5,0),C$zus=cc.size(C$zui.width,C$zuo),C$zuc=C$zui.width,C$zul=this.totalLength}this.mode===C$zuu.FILLED?this.barSprite.type!==cc.Sprite.Type.FILLED?cc.warn("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this.reverse&&(C$zuo*=-1),this.barSprite.fillRange=C$zuo):this.barSprite.type!==cc.Sprite.Type.FILLED?(C$zua=C$zun.x-C$zue.x,C$zue=C$zun.y-C$zue.y,C$zua=cc.v2(C$zuc*C$zua,C$zul*C$zue),C$zut.setPosition(C$zur.x+C$zua.x,C$zur.y+C$zua.y),C$zut.setAnchorPoint(C$zun),C$zut.setContentSize(C$zus)):cc.warn("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}}},properties:{barSprite:{default:null,type:cc.Sprite,tooltip:!1,notify:function(){this._initBarSprite()},animatable:!1},mode:{default:C$zuu.HORIZONTAL,type:C$zuu,tooltip:!1,notify:function(){var C$zut;!this.barSprite||(C$zut=this.barSprite.node)&&(C$zut=C$zut.getContentSize(),this.mode===C$zuu.HORIZONTAL?this.totalLength=C$zut.width:this.mode===C$zuu.VERTICAL?this.totalLength=C$zut.height:this.mode===C$zuu.FILLED&&(this.totalLength=this.barSprite.fillRange))},animatable:!1},_N$totalLength:1,totalLength:{range:[0,Number.MAX_VALUE],tooltip:!1,get:function(){return this._N$totalLength},set:function(C$zut){this.mode===C$zuu.FILLED&&(C$zut=C$zuh.clamp01(C$zut)),this._N$totalLength=C$zut,this._updateBarStatus()}},progress:{default:1,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){this._updateBarStatus()}},reverse:{default:!1,tooltip:!1,notify:function(){this.barSprite&&(this.barSprite.fillStart=1-this.barSprite.fillStart),this._updateBarStatus()},animatable:!1}},statics:{Mode:C$zuu}});cc.ProgressBar=C$zue.exports=C$zut},{"../utils/misc":264,"./CCComponent":78}],89:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=_interopRequireDefault(C$zut("../renderer/assembler"));var C$zun=_interopRequireDefault(C$zut("../assets/material/material-variant"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}var C$zua=C$zut("./CCComponent");var C$zuo=C$zut("../renderer/render-flow");var C$zus=C$zut("../assets/material/CCMaterial");C$zut=cc.Class({name:"RenderComponent",extends:C$zua,editor:!1,properties:{_materials:{default:[],type:C$zus},materials:{get:function(){return this._materials},set:function(C$zut){this._materials=C$zut,this._activateMaterial()},type:[C$zus],displayName:"Materials",animatable:!1}},ctor:function(){this._vertsDirty=!0,this._assembler=null},_resetAssembler:function(){C$zur.default.init(this),this._updateColor(),this.setVertsDirty()},__preload:function(){this._resetAssembler(),this._activateMaterial()},onEnable:function(){this.node._renderComponent&&(this.node._renderComponent.enabled=!1),(this.node._renderComponent=this).node._renderFlag|=C$zuo.FLAG_OPACITY_COLOR,this.setVertsDirty()},onDisable:function(){this.node._renderComponent=null,this.disableRender()},onDestroy:function(){var C$zut=this._materials;for(var C$zue=0;C$zue<C$zut.length;C$zue++)cc.pool.material.put(C$zut[C$zue]);C$zut.length=0,cc.pool.assembler.put(this._assembler)},setVertsDirty:function(){this._vertsDirty=!0,this.markForRender(!0)},_on3DNodeChanged:function(){this._resetAssembler()},_validateRender:function(){},markForValidate:function(){cc.RenderFlow.registerValidate(this)},markForRender:function(C$zut){var C$zue=C$zuo.FLAG_RENDER|C$zuo.FLAG_UPDATE_RENDER_DATA;C$zut?(this.node._renderFlag|=C$zue,this.markForValidate()):this.node._renderFlag&=~C$zue},disableRender:function(){this.node._renderFlag&=~(C$zuo.FLAG_RENDER|C$zuo.FLAG_UPDATE_RENDER_DATA)},getMaterial:function(C$zut){if(C$zut<0||C$zut>=this._materials.length)return null;var C$zue=this._materials[C$zut];if(!C$zue)return null;var C$zui=C$zun.default.create(C$zue,this);return C$zui!==C$zue&&this.setMaterial(C$zut,C$zui),C$zui},getMaterials:function(){var C$zut=this._materials;for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue]=C$zun.default.create(C$zut[C$zue],this);return C$zut},setMaterial:function(C$zut,C$zue){return C$zue!==this._materials[C$zut]&&(C$zue=C$zun.default.create(C$zue,this),this._materials[C$zut]=C$zue),this._updateMaterial(),this.markForRender(!0),C$zue},_getDefaultMaterial:function(){return C$zus.getBuiltinMaterial("2d-sprite")},_activateMaterial:function(){var C$zut=this._materials;var C$zue;C$zut[0]||(C$zue=this._getDefaultMaterial(),C$zut[0]=C$zue);for(var C$zui=0;C$zui<C$zut.length;C$zui++)C$zut[C$zui]=C$zun.default.create(C$zut[C$zui],this);this._updateMaterial()},_updateMaterial:function(){},_updateColor:function(){this._assembler.updateColor&&this._assembler.updateColor(this)},_checkBacth:function(C$zut,C$zue){var C$zui=this._materials[0];(C$zui&&C$zui.getHash()!==C$zut.material.getHash()||C$zut.cullingMask!==C$zue)&&(C$zut._flush(),C$zut.node=C$zui.getDefine("CC_USE_MODEL")?this.node:C$zut._dummyNode,C$zut.material=C$zui,C$zut.cullingMask=C$zue)}});cc.RenderComponent=C$zue.exports=C$zut},{"../assets/material/CCMaterial":53,"../assets/material/material-variant":60,"../renderer/assembler":217,"../renderer/render-flow":221,"./CCComponent":78}],90:[function(C$zut,C$zue,C$zus){"use strict";var C$zui=C$zut("../platform/js");var C$zur=C$zut("../platform/CCMacro");var C$zuu=C$zut("../utils/text-utils");var C$zuh=new(C$zut("../utils/html-text-parser"));var C$zu_=C$zur.TextAlignment;var C$zun=C$zur.VerticalTextAlignment;var C$zua="RICHTEXT_CHILD";var C$zul="RICHTEXT_Image_CHILD";C$zut=cc.Label.CacheMode;var C$zuo=new C$zui.Pool(function(C$zut){if(!cc.isValid(C$zut))return!1;C$zut=C$zut.getComponent(cc.LabelOutline);return C$zut&&(C$zut.width=0),!0},20);C$zuo.get=function(C$zut,C$zue){var C$zui=this._get();(C$zui=C$zui||new cc.PrivateNode(C$zua)).setPosition(0,0),C$zui.setAnchorPoint(.5,.5),C$zui.skewX=0;var C$zur=C$zui.getComponent(cc.Label);return(C$zur=C$zur||C$zui.addComponent(cc.Label)).string="",C$zur.horizontalAlign=C$zu_.LEFT,C$zur.verticalAlign=C$zun.CENTER,C$zui};C$zur=cc.Class({name:"cc.RichText",extends:cc.Component,ctor:function(){this._textArray=null,this._labelSegments=[],this._labelSegmentsCache=[],this._linesWidth=[],this._updateRichTextStatus=this._updateRichText},editor:!1,properties:{string:{default:"<color=#00ff00>Rich</c><color=#0fffff>Text</color>",multiline:!0,tooltip:!1,notify:function(){this._updateRichTextStatus()}},horizontalAlign:{default:C$zu_.LEFT,type:C$zu_,tooltip:!1,animatable:!1,notify:function(C$zut){this.horizontalAlign!==C$zut&&(this._layoutDirty=!0,this._updateRichTextStatus())}},fontSize:{default:40,tooltip:!1,notify:function(C$zut){this.fontSize!==C$zut&&(this._layoutDirty=!0,this._updateRichTextStatus())}},_fontFamily:"Arial",fontFamily:{tooltip:!1,get:function(){return this._fontFamily},set:function(C$zut){this._fontFamily!==C$zut&&(this._fontFamily=C$zut,this._layoutDirty=!0,this._updateRichTextStatus())},animatable:!1},font:{default:null,type:cc.TTFFont,tooltip:!1,notify:function(C$zut){this.font!==C$zut&&(this._layoutDirty=!0,this.font?(this.useSystemFont=!1,this._onTTFLoaded()):this.useSystemFont=!0,this._updateRichTextStatus())}},_isSystemFontUsed:!0,useSystemFont:{get:function(){return this._isSystemFontUsed},set:function(C$zut){this._isSystemFontUsed!==C$zut&&(this._isSystemFontUsed=C$zut,this._layoutDirty=!0,this._updateRichTextStatus())},animatable:!1,tooltip:!1},cacheMode:{default:C$zut.NONE,type:C$zut,tooltip:!1,notify:function(C$zut){this.cacheMode!==C$zut&&this._updateRichTextStatus()},animatable:!1},maxWidth:{default:0,tooltip:!1,notify:function(C$zut){this.maxWidth!==C$zut&&(this._layoutDirty=!0,this._updateRichTextStatus())}},lineHeight:{default:40,tooltip:!1,notify:function(C$zut){this.lineHeight!==C$zut&&(this._layoutDirty=!0,this._updateRichTextStatus())}},imageAtlas:{default:null,type:cc.SpriteAtlas,tooltip:!1,notify:function(C$zut){this.imageAtlas!==C$zut&&(this._layoutDirty=!0,this._updateRichTextStatus())}},handleTouchEvent:{default:!0,tooltip:!1,notify:function(C$zut){this.handleTouchEvent!==C$zut&&this.enabledInHierarchy&&(this.handleTouchEvent?this._addEventListeners():this._removeEventListeners())}}},statics:{HorizontalAlign:C$zu_,VerticalAlign:C$zun},onEnable:function(){this.handleTouchEvent&&this._addEventListeners(),this._updateRichText(),this._activateChildren(!0)},onDisable:function(){this.handleTouchEvent&&this._removeEventListeners(),this._activateChildren(!1)},start:function(){this._onTTFLoaded()},_onColorChanged:function(C$zue){this.node.children.forEach(function(C$zut){C$zut.color=C$zue})},_addEventListeners:function(){this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.COLOR_CHANGED,this._onColorChanged,this)},_removeEventListeners:function(){this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.COLOR_CHANGED,this._onColorChanged,this)},_updateLabelSegmentTextAttributes:function(){this._labelSegments.forEach(function(C$zut){this._applyTextAttribute(C$zut,null,!0)}.bind(this))},_createFontLabel:function(C$zut){return C$zuo.get(C$zut,this)},_onTTFLoaded:function(){var C$zui;!(this.font instanceof cc.TTFFont)||this.font._nativeAsset?(this._layoutDirty=!0,this._updateRichText()):(C$zui=this,cc.loader.load(this.font.nativeUrl,function(C$zut,C$zue){C$zui._layoutDirty=!0,C$zui._updateRichText()}))},_measureText:function(C$zui,C$zut){var C$zur=this;function C$zu$ps(C$zut){var C$zue;return 0===C$zur._labelSegmentsCache.length?(C$zue=C$zur._createFontLabel(C$zut),C$zur._labelSegmentsCache.push(C$zue)):C$zue=C$zur._labelSegmentsCache[0],C$zue._styleIndex=C$zui,C$zur._applyTextAttribute(C$zue,C$zut,!0),C$zue.getContentSize().width}return C$zut?C$zu$ps(C$zut):C$zu$ps},_onTouchEnded:function(C$zur){var C$zun=this;var C$zua=this.node.getComponents(cc.Component);for(var C$zut=0;C$zut<this._labelSegments.length;++C$zut)!function(C$zut){C$zut=C$zun._labelSegments[C$zut];var C$zue=C$zut._clickHandler;var C$zui=C$zut._clickParam;C$zue&&C$zun._containsTouchLocation(C$zut,C$zur.touch.getLocation())&&(C$zua.forEach(function(C$zut){C$zut.enabledInHierarchy&&C$zut[C$zue]&&C$zut[C$zue](C$zur,C$zui)}),C$zur.stopPropagation())}(C$zut)},_containsTouchLocation:function(C$zut,C$zue){return C$zut.getBoundingBoxToWorld().contains(C$zue)},_resetState:function(){var C$zut=this.node.children;for(var C$zue=C$zut.length-1;0<=C$zue;C$zue--){var C$zui=C$zut[C$zue];C$zui.name!==C$zua&&C$zui.name!==C$zul||(C$zui.parent===this.node?C$zui.parent=null:C$zut.splice(C$zue,1),C$zui.name===C$zua&&C$zuo.put(C$zui))}this._labelSegments.length=0,this._labelSegmentsCache.length=0,this._linesWidth.length=0,this._lineOffsetX=0,this._lineCount=1,this._labelWidth=0,this._labelHeight=0,this._layoutDirty=!0},onRestore:!1,_activateChildren:function(C$zut){for(var C$zue=this.node.children.length-1;0<=C$zue;C$zue--){var C$zui=this.node.children[C$zue];C$zui.name!==C$zua&&C$zui.name!==C$zul||(C$zui.active=C$zut)}},_addLabelSegment:function(C$zut,C$zue){var C$zui;return(C$zui=0===this._labelSegmentsCache.length?this._createFontLabel(C$zut):this._labelSegmentsCache.pop())._styleIndex=C$zue,C$zui._lineCount=this._lineCount,C$zui.active=this.node.active,C$zui.setAnchorPoint(0,0),this._applyTextAttribute(C$zui,C$zut),this.node.addChild(C$zui),this._labelSegments.push(C$zui),C$zui},_updateRichTextWithMaxWidth:function(C$zut,C$zuh,C$zue){var C$zui=C$zuh;if(0<this._lineOffsetX&&C$zui+this._lineOffsetX>this.maxWidth){var C$zur=0;for(;this._lineOffsetX<=this.maxWidth;){var C$zun=this._getFirstWordLen(C$zut,C$zur,C$zut.length);var C$zua=C$zut.substr(C$zur,C$zun);C$zua=this._measureText(C$zue,C$zua);if(!(this._lineOffsetX+C$zua<=this.maxWidth)){var C$zuo;0<C$zur&&(C$zuo=C$zut.substr(0,C$zur),this._addLabelSegment(C$zuo,C$zue),C$zut=C$zut.substr(C$zur,C$zut.length),C$zui=this._measureText(C$zue,C$zut)),this._updateLineInfo();break}this._lineOffsetX+=C$zua,C$zur+=C$zun}}if(C$zui>this.maxWidth){var C$zus=C$zuu.fragmentText(C$zut,C$zui,this.maxWidth,this._measureText(C$zue));for(var C$zuc=0;C$zuc<C$zus.length;++C$zuc){var C$zul=C$zus[C$zuc];C$zul=this._addLabelSegment(C$zul,C$zue).getContentSize();this._lineOffsetX+=C$zul.width,1<C$zus.length&&C$zuc<C$zus.length-1&&this._updateLineInfo()}}else this._lineOffsetX+=C$zui,this._addLabelSegment(C$zut,C$zue)},_isLastComponentCR:function(C$zut){return C$zut.length-1===C$zut.lastIndexOf("\n")},_updateLineInfo:function(){this._linesWidth.push(this._lineOffsetX),this._lineOffsetX=0,this._lineCount++},_needsUpdateTextLayout:function(C$zut){if(this._layoutDirty||!this._textArray||!C$zut)return!0;if(this._textArray.length!==C$zut.length)return!0;for(var C$zue=0;C$zue<this._textArray.length;++C$zue){var C$zui=this._textArray[C$zue];var C$zur=C$zut[C$zue];if(C$zui.text!==C$zur.text)return!0;C$zui=C$zui.style,C$zur=C$zur.style;if(C$zui){if(C$zur){if(!C$zui.outline!=!C$zur.outline)return!0;if(C$zui.size!==C$zur.size||!C$zui.italic!=!C$zur.italic||C$zui.isImage!==C$zur.isImage)return!0;if(C$zui.src!==C$zur.src||C$zui.imageAlign!==C$zur.imageAlign||C$zui.imageHeight!==C$zur.imageHeight||C$zui.imageWidth!==C$zur.imageWidth||C$zui.imageOffset!==C$zur.imageOffset)return!0}else if(C$zui.size||C$zui.italic||C$zui.isImage||C$zui.outline)return!0}else if(C$zur&&(C$zur.size||C$zur.italic||C$zur.isImage||C$zur.outline))return!0}return!1},_addRichTextImageElement:function(C$zut){var C$zue=C$zut.style.src;C$zue=this.imageAtlas.getSpriteFrame(C$zue);if(C$zue){var C$zui=new cc.PrivateNode(C$zul);var C$zur=C$zui.addComponent(cc.Sprite);switch(C$zut.style.imageAlign){case"top":C$zui.setAnchorPoint(0,1);break;case"center":C$zui.setAnchorPoint(0,.5);break;default:C$zui.setAnchorPoint(0,0)}C$zut.style.imageOffset&&(C$zui._imageOffset=C$zut.style.imageOffset),C$zur.type=cc.Sprite.Type.SLICED,C$zur.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.node.addChild(C$zui),this._labelSegments.push(C$zui);var C$zun=C$zue.getRect();var C$zua=1;var C$zuo=C$zun.width;C$zun=C$zun.height;var C$zus=C$zut.style.imageWidth;var C$zuc=C$zut.style.imageHeight;C$zuo*=C$zua=0<C$zuc?C$zuc/C$zun:this.lineHeight/C$zun,C$zun*=C$zua,0<C$zus&&(C$zuo=C$zus),0<this.maxWidth?(this._lineOffsetX+C$zuo>this.maxWidth&&this._updateLineInfo(),this._lineOffsetX+=C$zuo):(this._lineOffsetX+=C$zuo,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),C$zur.spriteFrame=C$zue,C$zui.setContentSize(C$zuo,C$zun),C$zui._lineCount=this._lineCount,C$zut.style.event?(C$zut.style.event.click&&(C$zui._clickHandler=C$zut.style.event.click),C$zut.style.event.param?C$zui._clickParam=C$zut.style.event.param:C$zui._clickParam=""):C$zui._clickHandler=null}else cc.warnID(4400)},_updateRichText:function(){if(this.enabledInHierarchy){var C$zut=C$zuh.parse(this.string);if(!this._needsUpdateTextLayout(C$zut))return this._textArray=C$zut,void this._updateLabelSegmentTextAttributes();this._textArray=C$zut,this._resetState();var C$zue=!1;for(var C$zui=0;C$zui<this._textArray.length;++C$zui){var C$zur=this._textArray[C$zui];var C$zun=C$zur.text;if(""===C$zun){if(C$zur.style&&C$zur.style.newline){this._updateLineInfo();continue}if(C$zur.style&&C$zur.style.isImage&&this.imageAtlas){this._addRichTextImageElement(C$zur);continue}}var C$zua=C$zun.split("\n");for(var C$zuo=0;C$zuo<C$zua.length;++C$zuo){var C$zus=C$zua[C$zuo];var C$zuc;""!==C$zus?(C$zue=!1,0<this.maxWidth?(C$zuc=this._measureText(C$zui,C$zus),this._updateRichTextWithMaxWidth(C$zus,C$zuc,C$zui)):(C$zuc=this._addLabelSegment(C$zus,C$zui).getContentSize(),this._lineOffsetX+=C$zuc.width,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),1<C$zua.length&&C$zuo<C$zua.length-1&&this._updateLineInfo()):this._isLastComponentCR(C$zun)&&C$zuo===C$zua.length-1||(this._updateLineInfo(),C$zue=!0)}}C$zue||this._linesWidth.push(this._lineOffsetX),0<this.maxWidth&&(this._labelWidth=this.maxWidth),this._labelHeight=(this._lineCount+C$zuu.BASELINE_RATIO)*this.lineHeight,this.node.setContentSize(this._labelWidth,this._labelHeight),this._updateRichTextPosition(),this._layoutDirty=!1}},_getFirstWordLen:function(C$zut,C$zue,C$zui){var C$zur=C$zut.charAt(C$zue);if(C$zuu.isUnicodeCJK(C$zur)||C$zuu.isUnicodeSpace(C$zur))return 1;var C$zun=1;for(var C$zua=C$zue+1;C$zua<C$zui&&(C$zur=C$zut.charAt(C$zua),!C$zuu.isUnicodeSpace(C$zur)&&!C$zuu.isUnicodeCJK(C$zur));++C$zua)C$zun++;return C$zun},_updateRichTextPosition:function(){var C$zut=0;var C$zue=1;var C$zuh=this._lineCount;for(var C$zui=0;C$zui<this._labelSegments.length;++C$zui){var C$zur=this._labelSegments[C$zui];var C$zun=C$zur._lineCount;C$zue<C$zun&&(C$zut=0,C$zue=C$zun);var C$zua=0;switch(this.horizontalAlign){case C$zu_.LEFT:C$zua=-this._labelWidth/2;break;case C$zu_.CENTER:C$zua=-this._linesWidth[C$zun-1]/2;break;case C$zu_.RIGHT:C$zua=this._labelWidth/2-this._linesWidth[C$zun-1]}C$zur.x=C$zut+C$zua;var C$zuo=C$zur.getContentSize();if(C$zur.y=this.lineHeight*(C$zuh-C$zun)-this._labelHeight/2,C$zun===C$zue&&(C$zut+=C$zuo.width),C$zur.getComponent(cc.Sprite)){var C$zus=this.lineHeight;var C$zuc=this.lineHeight*(1+C$zuu.BASELINE_RATIO);switch(C$zur.anchorY){case 1:C$zur.y+=C$zus+(C$zuc-C$zus)/2;break;case.5:C$zur.y+=C$zuc/2;break;default:C$zur.y+=(C$zuc-C$zus)/2}var C$zul;C$zur._imageOffset&&(1===(C$zuo=C$zur._imageOffset.split(",")).length&&C$zuo[0]?(C$zul=parseFloat(C$zuo[0]),Number.isInteger(C$zul)&&(C$zur.y+=C$zul)):2===C$zuo.length&&(C$zul=parseFloat(C$zuo[0]),C$zuo=parseFloat(C$zuo[1]),Number.isInteger(C$zul)&&(C$zur.x+=C$zul),Number.isInteger(C$zuo)&&(C$zur.y+=C$zuo)))}C$zuo=C$zur.getComponent(cc.LabelOutline);C$zuo&&C$zuo.width&&(C$zur.y=C$zur.y-C$zuo.width)}},_convertLiteralColorValue:function(C$zut){var C$zue=C$zut.toUpperCase();return cc.Color[C$zue]||cc.color().fromHEX(C$zut)},_applyTextAttribute:function(C$zut,C$zue,C$zui){var C$zur=C$zut.getComponent(cc.Label);var C$zun,C$zua;C$zur&&(C$zua=C$zut._styleIndex,C$zun=null,(C$zun=this._textArray[C$zua]?this._textArray[C$zua].style:C$zun)&&C$zun.color?C$zut.color=this._convertLiteralColorValue(C$zun.color):C$zut.color=this.node.color,C$zur.cacheMode=this.cacheMode,this.font instanceof cc.Font&&!this._isSystemFontUsed?C$zur.font=this.font:C$zur.fontFamily=this.fontFamily,C$zur.useSystemFont=this._isSystemFontUsed,C$zur.lineHeight=this.lineHeight,C$zur.enableBold=C$zun&&C$zun.bold,C$zur.enableItalics=C$zun&&C$zun.italic,C$zun&&C$zun.italic&&(C$zut.skewX=12),C$zur.enableUnderline=C$zun&&C$zun.underline,C$zun&&C$zun.outline&&((C$zua=(C$zua=C$zut.getComponent(cc.LabelOutline))||C$zut.addComponent(cc.LabelOutline)).color=this._convertLiteralColorValue(C$zun.outline.color),C$zua.width=C$zun.outline.width),C$zun&&C$zun.size?C$zur.fontSize=C$zun.size:C$zur.fontSize=this.fontSize,null!==C$zue&&(C$zur.string=C$zue="string"!=typeof C$zue?""+C$zue:C$zue),C$zui&&C$zur._forceUpdateRenderData(),C$zun&&C$zun.event?(C$zun.event.click&&(C$zut._clickHandler=C$zun.event.click),C$zun.event.param?C$zut._clickParam=C$zun.event.param:C$zut._clickParam=""):C$zut._clickHandler=null)},onDestroy:function(){for(var C$zut=0;C$zut<this._labelSegments.length;++C$zut)this._labelSegments[C$zut].removeFromParent(),C$zuo.put(this._labelSegments[C$zut])}});cc.RichText=C$zue.exports=C$zur},{"../platform/CCMacro":194,"../platform/js":209,"../utils/html-text-parser":261,"../utils/text-utils":271}],91:[function(C$zut,C$zue,C$zui){"use strict";var C$zuo=C$zut("../utils/misc");C$zut("./CCComponent");var C$zuh=cc.Enum({HORIZONTAL:0,VERTICAL:1});C$zut=cc.Class({name:"cc.Scrollbar",extends:C$zut("./CCComponent"),editor:!1,properties:{_scrollView:null,_touching:!1,_autoHideRemainingTime:{default:0,serializable:!1},_opacity:255,handle:{default:null,type:cc.Sprite,tooltip:!1,notify:function(){this._onScroll(cc.v2(0,0))},animatable:!1},direction:{default:C$zuh.HORIZONTAL,type:C$zuh,tooltip:!1,notify:function(){this._onScroll(cc.v2(0,0))},animatable:!1},enableAutoHide:{default:!0,animatable:!1,tooltip:!1},autoHideTime:{default:1,animatable:!1,tooltip:!1}},statics:{Direction:C$zuh},setTargetScrollView:function(C$zut){this._scrollView=C$zut},_convertToScrollViewSpace:function(C$zut){var C$zue=this._scrollView.node;C$zut=C$zut.convertToWorldSpaceAR(cc.v2(-C$zut.anchorX*C$zut.width,-C$zut.anchorY*C$zut.height));C$zut=C$zue.convertToNodeSpaceAR(C$zut);return C$zut.x+=C$zue.anchorX*C$zue.width,C$zut.y+=C$zue.anchorY*C$zue.height,C$zut},_setOpacity:function(C$zut){this.handle&&(this.node.opacity=C$zut,this.handle.node.opacity=C$zut)},_onScroll:function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul;!this._scrollView||(C$zue=this._scrollView.content)&&(C$zuc=C$zue.getContentSize(),C$zul=this._scrollView.node.getContentSize(),C$zui=this.node.getContentSize(),this._conditionalDisableScrollBar(C$zuc,C$zul)||(this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)),C$zus=C$zuo=C$zua=C$zun=C$zur=0,this.direction===C$zuh.HORIZONTAL?(C$zur=C$zuc.width,C$zun=C$zul.width,C$zus=C$zui.width,C$zua=C$zut.x,C$zuo=-this._convertToScrollViewSpace(C$zue).x):this.direction===C$zuh.VERTICAL&&(C$zur=C$zuc.height,C$zun=C$zul.height,C$zus=C$zui.height,C$zua=C$zut.y,C$zuo=-this._convertToScrollViewSpace(C$zue).y),C$zuc=this._calculateLength(C$zur,C$zun,C$zus,C$zua),C$zul=this._calculatePosition(C$zur,C$zun,C$zus,C$zuo,C$zua,C$zuc),this._updateLength(C$zuc),this._updateHanlderPosition(C$zul)))},_updateHanlderPosition:function(C$zut){var C$zue;this.handle&&(C$zue=this._fixupHandlerPosition(),this.handle.node.setPosition(C$zut.x+C$zue.x,C$zut.y+C$zue.y))},_fixupHandlerPosition:function(){var C$zut=this.node.getContentSize();var C$zue=this.node.getAnchorPoint();var C$zui=this.handle.node.getContentSize();var C$zur=this.handle.node.parent;C$zue=this.node.convertToWorldSpaceAR(cc.v2(-C$zut.width*C$zue.x,-C$zut.height*C$zue.y));C$zur=C$zur.convertToNodeSpaceAR(C$zue);return this.direction===C$zuh.HORIZONTAL?C$zur=cc.v2(C$zur.x,C$zur.y+(C$zut.height-C$zui.height)/2):this.direction===C$zuh.VERTICAL&&(C$zur=cc.v2(C$zur.x+(C$zut.width-C$zui.width)/2,C$zur.y)),this.handle.node.setPosition(C$zur),C$zur},_onTouchBegan:function(){this.enableAutoHide&&(this._touching=!0)},_conditionalDisableScrollBar:function(C$zut,C$zue){return C$zut.width<=C$zue.width&&this.direction===C$zuh.HORIZONTAL||C$zut.height<=C$zue.height&&this.direction===C$zuh.VERTICAL},_onTouchEnded:function(){if(this.enableAutoHide&&(this._touching=!1,!(this.autoHideTime<=0))){if(this._scrollView){var C$zut=this._scrollView.content;if(C$zut){C$zut=C$zut.getContentSize();var C$zue=this._scrollView.node.getContentSize();if(this._conditionalDisableScrollBar(C$zut,C$zue))return}}this._autoHideRemainingTime=this.autoHideTime}},_calculateLength:function(C$zut,C$zue,C$zui,C$zur){return C$zur&&(C$zut+=20*(0<C$zur?C$zur:-C$zur)),C$zui*(C$zue/C$zut)},_calculatePosition:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){C$zut-=C$zue;C$zun&&(C$zut+=Math.abs(C$zun));C$zue=0;C$zun=(C$zui-C$zua)*(C$zue=C$zut?C$zuo.clamp01(C$zue=C$zur/C$zut):C$zue);return this.direction===C$zuh.VERTICAL?cc.v2(0,C$zun):cc.v2(C$zun,0)},_updateLength:function(C$zut){var C$zue,C$zui;this.handle&&(C$zui=(C$zue=this.handle.node).getContentSize(),C$zue.setAnchorPoint(cc.v2(0,0)),this.direction===C$zuh.HORIZONTAL?C$zue.setContentSize(C$zut,C$zui.height):C$zue.setContentSize(C$zui.width,C$zut))},_processAutoHide:function(C$zut){!this.enableAutoHide||this._autoHideRemainingTime<=0||this._touching||(this._autoHideRemainingTime-=C$zut,this._autoHideRemainingTime<=this.autoHideTime&&(this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime),C$zut=this._opacity*(this._autoHideRemainingTime/this.autoHideTime),this._setOpacity(C$zut)))},start:function(){this.enableAutoHide&&this._setOpacity(0)},hide:function(){this._autoHideRemainingTime=0,this._setOpacity(0)},show:function(){this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},update:function(C$zut){this._processAutoHide(C$zut)}});cc.Scrollbar=C$zue.exports=C$zut},{"../utils/misc":264,"./CCComponent":78}],92:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCNode").EventType;var C$zun=cc.v2();var C$zua=cc.v2();function C$zuxGs(){return(new Date).getMilliseconds()}var C$zuo=cc.Enum({SCROLL_TO_TOP:0,SCROLL_TO_BOTTOM:1,SCROLL_TO_LEFT:2,SCROLL_TO_RIGHT:3,SCROLLING:4,BOUNCE_TOP:5,BOUNCE_BOTTOM:6,BOUNCE_LEFT:7,BOUNCE_RIGHT:8,SCROLL_ENDED:9,TOUCH_UP:10,AUTOSCROLL_ENDED_WITH_THRESHOLD:11,SCROLL_BEGAN:12});var C$zus={"scroll-to-top":C$zuo.SCROLL_TO_TOP,"scroll-to-bottom":C$zuo.SCROLL_TO_BOTTOM,"scroll-to-left":C$zuo.SCROLL_TO_LEFT,"scroll-to-right":C$zuo.SCROLL_TO_RIGHT,scrolling:C$zuo.SCROLLING,"bounce-bottom":C$zuo.BOUNCE_BOTTOM,"bounce-left":C$zuo.BOUNCE_LEFT,"bounce-right":C$zuo.BOUNCE_RIGHT,"bounce-top":C$zuo.BOUNCE_TOP,"scroll-ended":C$zuo.SCROLL_ENDED,"touch-up":C$zuo.TOUCH_UP,"scroll-ended-with-threshold":C$zuo.AUTOSCROLL_ENDED_WITH_THRESHOLD,"scroll-began":C$zuo.SCROLL_BEGAN};C$zut=cc.Class({name:"cc.ScrollView",extends:C$zut("./CCViewGroup"),editor:!1,ctor:function(){this._topBoundary=0,this._bottomBoundary=0,this._leftBoundary=0,this._rightBoundary=0,this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[],this._touchMovePreviousTimestamp=0,this._touchMoved=!1,this._autoScrolling=!1,this._autoScrollAttenuate=!1,this._autoScrollStartPosition=cc.v2(0,0),this._autoScrollTargetDelta=cc.v2(0,0),this._autoScrollTotalTime=0,this._autoScrollAccumulatedTime=0,this._autoScrollCurrentlyOutOfBoundary=!1,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.v2(0,0),this._outOfBoundaryAmount=cc.v2(0,0),this._outOfBoundaryAmountDirty=!0,this._stopMouseWheel=!1,this._mouseWheelEventElapsedTime=0,this._isScrollEndedWithThresholdEventFired=!1,this._scrollEventEmitMask=0,this._isBouncing=!1,this._scrolling=!1},properties:{content:{default:void 0,type:cc.Node,tooltip:!1,formerlySerializedAs:"content",notify:function(C$zut){this._calculateBoundary()}},horizontal:{default:!0,animatable:!1,tooltip:!1},vertical:{default:!0,animatable:!1,tooltip:!1},inertia:{default:!0,tooltip:!1},brake:{default:.5,type:cc.Float,range:[0,1,.1],tooltip:!1},elastic:{default:!0,animatable:!1,tooltip:!1},bounceDuration:{default:1,range:[0,10],tooltip:!1},horizontalScrollBar:{default:void 0,type:cc.Scrollbar,tooltip:!1,notify:function(){this.horizontalScrollBar&&(this.horizontalScrollBar.setTargetScrollView(this),this._updateScrollBar(0))},animatable:!1},verticalScrollBar:{default:void 0,type:cc.Scrollbar,tooltip:!1,notify:function(){this.verticalScrollBar&&(this.verticalScrollBar.setTargetScrollView(this),this._updateScrollBar(0))},animatable:!1},scrollEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1},cancelInnerEvents:{default:!0,animatable:!1,tooltip:!1},_view:{get:function(){if(this.content)return this.content.parent}}},statics:{EventType:C$zuo},scrollToBottom:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!1,applyToVertical:!0});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui,!0)},scrollToTop:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(0,1),applyToHorizontal:!1,applyToVertical:!0});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui)},scrollToLeft:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!0,applyToVertical:!1});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui)},scrollToRight:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(1,0),applyToHorizontal:!0,applyToVertical:!1});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui)},scrollToTopLeft:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(0,1),applyToHorizontal:!0,applyToVertical:!0});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui)},scrollToTopRight:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(1,1),applyToHorizontal:!0,applyToVertical:!0});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui)},scrollToBottomLeft:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!0,applyToVertical:!0});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui)},scrollToBottomRight:function(C$zut,C$zue){var C$zui=this._calculateMovePercentDelta({anchor:cc.v2(1,0),applyToHorizontal:!0,applyToVertical:!0});C$zut?this._startAutoScroll(C$zui,C$zut,!1!==C$zue):this._moveContent(C$zui)},scrollToOffset:function(C$zut,C$zue,C$zui){var C$zur=this.getMaxScrollOffset();var C$zun=cc.v2(0,0);0===C$zur.x?C$zun.x=0:C$zun.x=C$zut.x/C$zur.x,0===C$zur.y?C$zun.y=1:C$zun.y=(C$zur.y-C$zut.y)/C$zur.y,this.scrollTo(C$zun,C$zue,C$zui)},getScrollOffset:function(){var C$zut=this._getContentTopBoundary()-this._topBoundary;var C$zue=this._getContentLeftBoundary()-this._leftBoundary;return cc.v2(C$zue,C$zut)},getMaxScrollOffset:function(){var C$zut=this._view.getContentSize();var C$zue=this.content.getContentSize();var C$zui=C$zue.width-C$zut.width;C$zue=C$zue.height-C$zut.height;return C$zui=0<=C$zui?C$zui:0,C$zue=0<=C$zue?C$zue:0,cc.v2(C$zui,C$zue)},scrollToPercentHorizontal:function(C$zut,C$zue,C$zui){C$zut=this._calculateMovePercentDelta({anchor:cc.v2(C$zut,0),applyToHorizontal:!0,applyToVertical:!1});C$zue?this._startAutoScroll(C$zut,C$zue,!1!==C$zui):this._moveContent(C$zut)},scrollTo:function(C$zut,C$zue,C$zui){C$zut=this._calculateMovePercentDelta({anchor:cc.v2(C$zut),applyToHorizontal:!0,applyToVertical:!0});C$zue?this._startAutoScroll(C$zut,C$zue,!1!==C$zui):this._moveContent(C$zut)},scrollToPercentVertical:function(C$zut,C$zue,C$zui){C$zut=this._calculateMovePercentDelta({anchor:cc.v2(0,C$zut),applyToHorizontal:!1,applyToVertical:!0});C$zue?this._startAutoScroll(C$zut,C$zue,!1!==C$zui):this._moveContent(C$zut)},stopAutoScroll:function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime},setContentPosition:function(C$zut){C$zut.fuzzyEquals(this.getContentPosition(),1e-4)||(this.content.setPosition(C$zut),this._outOfBoundaryAmountDirty=!0)},getContentPosition:function(){return this.content.getPosition()},isScrolling:function(){return this._scrolling},isAutoScrolling:function(){return this._autoScrolling},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},_onMouseWheel:function(C$zut,C$zue){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$zut,C$zue)||(C$zue=cc.v2(0,0),this.vertical?C$zue=cc.v2(0,-.1*C$zut.getScrollY()):this.horizontal&&(C$zue=cc.v2(-.1*C$zut.getScrollY(),0)),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(C$zue),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(C$zut)))},_checkMouseWheel:function(C$zut){if(!this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent("scroll-ended"),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=C$zut,.1<this._mouseWheelEventElapsedTime&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent("scroll-ended"),this._stopMouseWheel=!1)},_calculateMovePercentDelta:function(C$zut){var C$zue=C$zut.anchor;var C$zui=C$zut.applyToHorizontal;C$zut=C$zut.applyToVertical;this._calculateBoundary(),C$zue=C$zue.clampf(cc.v2(0,0),cc.v2(1,1));var C$zur=this._view.getContentSize();var C$zun=this.content.getContentSize();var C$zua;var C$zuo;C$zua=-(this._getContentBottomBoundary()-this._bottomBoundary),C$zuo=-(this._getContentLeftBoundary()-this._leftBoundary);var C$zus=cc.v2(0,0);var C$zuc=0;return C$zui&&(C$zuc=C$zun.width-C$zur.width,C$zus.x=C$zuo-C$zuc*C$zue.x),C$zut&&(C$zuc=C$zun.height-C$zur.height,C$zus.y=C$zua-C$zuc*C$zue.y),C$zus},_moveContentToTopLeft:function(C$zut){var C$zue=this.content.getContentSize();var C$zui;C$zui=-(this._getContentBottomBoundary()-this._bottomBoundary);var C$zur=cc.v2(0,0);var C$zun=0;var C$zua;C$zua=-(this._getContentLeftBoundary()-this._leftBoundary),C$zue.height<C$zut.height&&(C$zun=C$zue.height-C$zut.height,C$zur.y=C$zui-C$zun),C$zue.width<C$zut.width&&(C$zun=C$zue.width-C$zut.width,C$zur.x=C$zua),this._updateScrollBarState(),this._moveContent(C$zur),this._adjustContentOutOfBoundary()},_calculateBoundary:function(){var C$zut,C$zue,C$zui;this.content&&((C$zut=this.content.getComponent(cc.Layout))&&C$zut.enabledInHierarchy&&C$zut.updateLayout(),C$zue=(C$zut=this._view.getContentSize()).width*this._view.anchorX,C$zui=C$zut.height*this._view.anchorY,this._leftBoundary=-C$zue,this._bottomBoundary=-C$zui,this._rightBoundary=this._leftBoundary+C$zut.width,this._topBoundary=this._bottomBoundary+C$zut.height,this._moveContentToTopLeft(C$zut))},_hasNestedViewGroup:function(C$zut,C$zue){if(C$zut.eventPhase===cc.Event.CAPTURING_PHASE){if(C$zue)for(var C$zui=0;C$zui<C$zue.length;++C$zui){var C$zur=C$zue[C$zui];if(this.node===C$zur)return!!C$zut.target.getComponent(cc.ViewGroup);if(C$zur.getComponent(cc.ViewGroup))return!0}return!1}},_stopPropagationIfTargetIsMe:function(C$zut){C$zut.eventPhase===cc.Event.AT_TARGET&&C$zut.target===this.node&&C$zut.stopPropagation()},_onTouchBegan:function(C$zut,C$zue){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$zut,C$zue)||(C$zue=C$zut.touch,this.content&&this._handlePressLogic(C$zue),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(C$zut)))},_onTouchMoved:function(C$zut,C$zue){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$zut,C$zue)||(C$zue=C$zut.touch,this.content&&this._handleMoveLogic(C$zue),this.cancelInnerEvents&&(7<C$zue.getLocation().sub(C$zue.getStartLocation()).mag()&&!this._touchMoved&&C$zut.target!==this.node&&((C$zue=new cc.Event.EventTouch(C$zut.getTouches(),C$zut.bubbles)).type=cc.Node.EventType.TOUCH_CANCEL,C$zue.touch=C$zut.touch,C$zue.simulate=!0,C$zut.target.dispatchEvent(C$zue),this._touchMoved=!0),this._stopPropagationIfTargetIsMe(C$zut))))},_onTouchEnded:function(C$zut,C$zue){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$zut,C$zue)||(this._dispatchEvent("touch-up"),C$zue=C$zut.touch,this.content&&this._handleReleaseLogic(C$zue),this._touchMoved?C$zut.stopPropagation():this._stopPropagationIfTargetIsMe(C$zut)))},_onTouchCancelled:function(C$zut,C$zue){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$zut,C$zue)||(C$zut.simulate||(C$zue=C$zut.touch,this.content&&this._handleReleaseLogic(C$zue)),this._stopPropagationIfTargetIsMe(C$zut)))},_processDeltaMove:function(C$zut){this._scrollChildren(C$zut),this._gatherTouchMove(C$zut)},_getLocalAxisAlignDelta:function(C$zut){return this.node.convertToNodeSpaceAR(C$zut.getLocation(),C$zun),this.node.convertToNodeSpaceAR(C$zut.getPreviousLocation(),C$zua),C$zun.sub(C$zua)},_handleMoveLogic:function(C$zut){C$zut=this._getLocalAxisAlignDelta(C$zut);this._processDeltaMove(C$zut)},_scrollChildren:function(C$zut){C$zut=this._clampDelta(C$zut);this.elastic&&(C$zue=this._getHowMuchOutOfBoundary(),C$zut.x*=0===C$zue.x?1:.5,C$zut.y*=0===C$zue.y?1:.5),this.elastic||(C$zue=this._getHowMuchOutOfBoundary(C$zut),C$zut=C$zut.add(C$zue));var C$zue=-1;0<C$zut.y?this.content.y-this.content.anchorY*this.content.height+C$zut.y>=this._bottomBoundary&&(C$zue="scroll-to-bottom"):C$zut.y<0&&this.content.y-this.content.anchorY*this.content.height+this.content.height+C$zut.y<=this._topBoundary&&(C$zue="scroll-to-top"),C$zut.x<0?this.content.x-this.content.anchorX*this.content.width+this.content.width+C$zut.x<=this._rightBoundary&&(C$zue="scroll-to-right"):0<C$zut.x&&this.content.x-this.content.anchorX*this.content.width+C$zut.x>=this._leftBoundary&&(C$zue="scroll-to-left"),this._moveContent(C$zut,!1),0===C$zut.x&&0===C$zut.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent("scroll-began")),this._dispatchEvent("scrolling")),-1!==C$zue&&this._dispatchEvent(C$zue)},_handlePressLogic:function(){this._autoScrolling&&this._dispatchEvent("scroll-ended"),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=C$zuxGs(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()},_clampDelta:function(C$zut){var C$zue=this.content.getContentSize();var C$zui=this._view.getContentSize();return C$zue.width<C$zui.width&&(C$zut.x=0),C$zue.height<C$zui.height&&(C$zut.y=0),C$zut},_gatherTouchMove:function(C$zut){for(C$zut=this._clampDelta(C$zut);5<=this._touchMoveDisplacements.length;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(C$zut);C$zut=C$zuxGs();this._touchMoveTimeDeltas.push((C$zut-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=C$zut},_startBounceBackIfNeeded:function(){if(!this.elastic)return!1;var C$zut=this._getHowMuchOutOfBoundary();if((C$zut=this._clampDelta(C$zut)).fuzzyEquals(cc.v2(0,0),1e-4))return!1;var C$zue=Math.max(this.bounceDuration,0);return this._startAutoScroll(C$zut,C$zue,!0),this._isBouncing||(0<C$zut.y&&this._dispatchEvent("bounce-top"),C$zut.y<0&&this._dispatchEvent("bounce-bottom"),0<C$zut.x&&this._dispatchEvent("bounce-right"),C$zut.x<0&&this._dispatchEvent("bounce-left"),this._isBouncing=!0),!0},_processInertiaScroll:function(){var C$zut;this._startBounceBackIfNeeded()||!this.inertia||!(C$zut=this._calculateTouchMoveVelocity()).fuzzyEquals(cc.v2(0,0),1e-4)&&this.brake<1&&this._startInertiaScroll(C$zut),this._onScrollBarTouchEnded()},_handleReleaseLogic:function(C$zut){C$zut=this._getLocalAxisAlignDelta(C$zut);this._gatherTouchMove(C$zut),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent("scroll-ended"))},_isOutOfBoundary:function(){return!this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)},_isNecessaryAutoScrollBrake:function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},getScrollEndedEventTiming:function(){return 1e-4},_processAutoScrolling:function(C$zut){var C$zue=this._isNecessaryAutoScrollBrake();var C$zui=C$zue?.05:1;this._autoScrollAccumulatedTime+=C$zut*(1/C$zui);C$zut=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(C$zur=C$zut,C$zut=--C$zur*C$zur*C$zur*C$zur*C$zur+1);var C$zur=this._autoScrollStartPosition.add(this._autoScrollTargetDelta.mul(C$zut));var C$zun=Math.abs(C$zut-1)<=1e-4;Math.abs(C$zut-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent("scroll-ended-with-threshold"),this._isScrollEndedWithThresholdEventFired=!0),this.elastic?(C$zut=C$zur.sub(this._autoScrollBrakingStartPosition),C$zue&&(C$zut=C$zut.mul(C$zui)),C$zur=this._autoScrollBrakingStartPosition.add(C$zut)):(C$zue=C$zur.sub(this.getContentPosition()),(C$zui=this._getHowMuchOutOfBoundary(C$zue)).fuzzyEquals(cc.v2(0,0),1e-4)||(C$zur=C$zur.add(C$zui),C$zun=!0)),C$zun&&(this._autoScrolling=!1);C$zut=C$zur.sub(this.getContentPosition());this._moveContent(this._clampDelta(C$zut),C$zun),this._dispatchEvent("scrolling"),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent("scroll-ended"))},_startInertiaScroll:function(C$zut){var C$zue=C$zut.mul(.7);this._startAttenuatingAutoScroll(C$zue,C$zut)},_calculateAttenuatedFactor:function(C$zut){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*C$zut+C$zut*C$zut*8e-9))},_startAttenuatingAutoScroll:function(C$zut,C$zue){C$zue=this._calculateAutoScrollTimeByInitalSpeed(C$zue.mag());var C$zui=C$zut.normalize();var C$zur=this.content.getContentSize();var C$zun=this._view.getContentSize();var C$zua=C$zur.width-C$zun.width;C$zur=C$zur.height-C$zun.height;C$zun=this._calculateAttenuatedFactor(C$zua);var C$zuo=this._calculateAttenuatedFactor(C$zur);C$zui=cc.v2(C$zui.x*C$zua*(1-this.brake)*C$zun,C$zui.y*C$zur*C$zuo*(1-this.brake));C$zua=C$zut.mag();C$zun=C$zui.mag()/C$zua;C$zui=C$zui.add(C$zut),0<this.brake&&7<C$zun&&(C$zun=Math.sqrt(C$zun),C$zui=C$zut.mul(C$zun).add(C$zut)),0<this.brake&&3<C$zun&&(C$zue*=C$zun=3),0===this.brake&&1<C$zun&&(C$zue*=C$zun),this._startAutoScroll(C$zui,C$zue,!0)},_calculateAutoScrollTimeByInitalSpeed:function(C$zut){return Math.sqrt(Math.sqrt(C$zut/5))},_startAutoScroll:function(C$zut,C$zue,C$zui){C$zut=this._flattenVectorByDirection(C$zut);this._autoScrolling=!0,this._autoScrollTargetDelta=C$zut,this._autoScrollAttenuate=C$zui,this._autoScrollStartPosition=this.getContentPosition(),this._autoScrollTotalTime=C$zue,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition=cc.v2(0,0),this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)||(this._autoScrollCurrentlyOutOfBoundary=!0)},_calculateTouchMoveVelocity:function(){var C$zut;if((C$zut=this._touchMoveTimeDeltas.reduce(function(C$zut,C$zue){return C$zut+C$zue},0))<=0||.5<=C$zut)return cc.v2(0,0);var C$zue=cc.v2(0,0);return C$zue=this._touchMoveDisplacements.reduce(function(C$zut,C$zue){return C$zut.add(C$zue)},C$zue),cc.v2(C$zue.x*(1-this.brake)/C$zut,C$zue.y*(1-this.brake)/C$zut)},_flattenVectorByDirection:function(C$zut){return C$zut.x=this.horizontal?C$zut.x:0,C$zut.y=this.vertical?C$zut.y:0,C$zut},_moveContent:function(C$zut,C$zue){C$zut=this._flattenVectorByDirection(C$zut);C$zut=this.getContentPosition().add(C$zut);this.setContentPosition(C$zut);C$zut=this._getHowMuchOutOfBoundary();this._updateScrollBar(C$zut),this.elastic&&C$zue&&this._startBounceBackIfNeeded()},_getContentLeftBoundary:function(){return this.getContentPosition().x-this.content.getAnchorPoint().x*this.content.getContentSize().width},_getContentRightBoundary:function(){var C$zut=this.content.getContentSize();return this._getContentLeftBoundary()+C$zut.width},_getContentTopBoundary:function(){var C$zut=this.content.getContentSize();return this._getContentBottomBoundary()+C$zut.height},_getContentBottomBoundary:function(){return this.getContentPosition().y-this.content.getAnchorPoint().y*this.content.getContentSize().height},_getHowMuchOutOfBoundary:function(C$zut){if((C$zut=C$zut||cc.v2(0,0)).fuzzyEquals(cc.v2(0,0),1e-4)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var C$zue=cc.v2(0,0);return this._getContentLeftBoundary()+C$zut.x>this._leftBoundary?C$zue.x=this._leftBoundary-(this._getContentLeftBoundary()+C$zut.x):this._getContentRightBoundary()+C$zut.x<this._rightBoundary&&(C$zue.x=this._rightBoundary-(this._getContentRightBoundary()+C$zut.x)),this._getContentTopBoundary()+C$zut.y<this._topBoundary?C$zue.y=this._topBoundary-(this._getContentTopBoundary()+C$zut.y):this._getContentBottomBoundary()+C$zut.y>this._bottomBoundary&&(C$zue.y=this._bottomBoundary-(this._getContentBottomBoundary()+C$zut.y)),C$zut.fuzzyEquals(cc.v2(0,0),1e-4)&&(this._outOfBoundaryAmount=C$zue,this._outOfBoundaryAmountDirty=!1),C$zue=this._clampDelta(C$zue)},_updateScrollBarState:function(){var C$zut,C$zue;this.content&&(C$zut=this.content.getContentSize(),C$zue=this._view.getContentSize(),this.verticalScrollBar&&(C$zut.height<C$zue.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(C$zut.width<C$zue.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show()))},_updateScrollBar:function(C$zut){this.horizontalScrollBar&&this.horizontalScrollBar._onScroll(C$zut),this.verticalScrollBar&&this.verticalScrollBar._onScroll(C$zut)},_onScrollBarTouchBegan:function(){this.horizontalScrollBar&&this.horizontalScrollBar._onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar._onTouchBegan()},_onScrollBarTouchEnded:function(){this.horizontalScrollBar&&this.horizontalScrollBar._onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar._onTouchEnded()},_dispatchEvent:function(C$zut){if("scroll-ended"===C$zut)this._scrollEventEmitMask=0;else if("scroll-to-top"===C$zut||"scroll-to-bottom"===C$zut||"scroll-to-left"===C$zut||"scroll-to-right"===C$zut){var C$zue=1<<C$zus[C$zut];if(this._scrollEventEmitMask&C$zue)return;this._scrollEventEmitMask|=C$zue}cc.Component.EventHandler.emitEvents(this.scrollEvents,this,C$zus[C$zut]),this.node.emit(C$zut,this)},_adjustContentOutOfBoundary:function(){var C$zut;this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary()&&(C$zut=this._getHowMuchOutOfBoundary(cc.v2(0,0)),C$zut=this.getContentPosition().add(C$zut),this.content&&(this.content.setPosition(C$zut),this._updateScrollBar(0)))},start:function(){this._calculateBoundary(),this.content&&cc.director.once(cc.Director.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)},_hideScrollbar:function(){this.horizontalScrollBar&&this.horizontalScrollBar.hide(),this.verticalScrollBar&&this.verticalScrollBar.hide()},onDisable:function(){this._unregisterEvent(),this.content&&(this.content.off(C$zur.SIZE_CHANGED,this._calculateBoundary,this),this.content.off(C$zur.SCALE_CHANGED,this._calculateBoundary,this),this._view&&(this._view.off(C$zur.POSITION_CHANGED,this._calculateBoundary,this),this._view.off(C$zur.SCALE_CHANGED,this._calculateBoundary,this),this._view.off(C$zur.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollbar(),this.stopAutoScroll()},onEnable:function(){this._registerEvent(),this.content&&(this.content.on(C$zur.SIZE_CHANGED,this._calculateBoundary,this),this.content.on(C$zur.SCALE_CHANGED,this._calculateBoundary,this),this._view&&(this._view.on(C$zur.POSITION_CHANGED,this._calculateBoundary,this),this._view.on(C$zur.SCALE_CHANGED,this._calculateBoundary,this),this._view.on(C$zur.SIZE_CHANGED,this._calculateBoundary,this))),this._updateScrollBarState()},update:function(C$zut){this._autoScrolling&&this._processAutoScrolling(C$zut)}});cc.ScrollView=C$zue.exports=C$zut},{"../CCNode":30,"./CCViewGroup":99}],93:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../utils/misc");C$zut=C$zut("./CCComponent");var C$zun=cc.Enum({Horizontal:0,Vertical:1});C$zut=cc.Class({name:"cc.Slider",extends:C$zut,editor:!1,ctor:function(){this._offset=cc.v2(),this._touchHandle=!1,this._dragging=!1},properties:{handle:{default:null,type:cc.Button,tooltip:!1,notify:function(){}},direction:{default:C$zun.Horizontal,type:C$zun,tooltip:!1},progress:{default:.5,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){this._updateHandlePosition()}},slideEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{Direction:C$zun},__preload:function(){this._updateHandlePosition()},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.on(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this))},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.off(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this))},_onHandleDragStart:function(C$zut){this._dragging=!0,this._touchHandle=!0,this._offset=this.handle.node.convertToNodeSpaceAR(C$zut.touch.getLocation()),C$zut.stopPropagation()},_onTouchBegan:function(C$zut){this.handle&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(C$zut.touch),C$zut.stopPropagation())},_onTouchMoved:function(C$zut){this._dragging&&(this._handleSliderLogic(C$zut.touch),C$zut.stopPropagation())},_onTouchEnded:function(C$zut){this._dragging=!1,this._touchHandle=!1,this._offset=cc.v2(),C$zut.stopPropagation()},_onTouchCancelled:function(C$zut){this._dragging=!1,C$zut.stopPropagation()},_handleSliderLogic:function(C$zut){this._updateProgress(C$zut),this._emitSlideEvent()},_emitSlideEvent:function(){cc.Component.EventHandler.emitEvents(this.slideEvents,this),this.node.emit("slide",this)},_updateProgress:function(C$zut){var C$zue;this.handle&&(C$zut=(C$zue=this.node).convertToNodeSpaceAR(C$zut.getLocation()),this.direction===C$zun.Horizontal?this.progress=C$zur.clamp01((C$zut.x-this._offset.x+C$zue.anchorX*C$zue.width)/C$zue.width):this.progress=C$zur.clamp01((C$zut.y-this._offset.y+C$zue.anchorY*C$zue.height)/C$zue.height))},_updateHandlePosition:function(){var C$zut;this.handle&&(C$zut=this.direction===C$zun.Horizontal?cc.v2(-this.node.width*this.node.anchorX+this.progress*this.node.width,0):cc.v2(0,-this.node.height*this.node.anchorY+this.progress*this.node.height),C$zut=this.node.convertToWorldSpaceAR(C$zut),this.handle.node.position=this.handle.node.parent.convertToNodeSpaceAR(C$zut))}});cc.Slider=C$zue.exports=C$zut},{"../utils/misc":264,"./CCComponent":78}],94:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../utils/misc");C$zut("../CCNode").EventType;var C$zun=C$zut("./CCRenderComponent");var C$zua=C$zut("../utils/blend-func");var C$zuo=cc.Enum({SIMPLE:0,SLICED:1,TILED:2,FILLED:3,MESH:4});C$zut=cc.Enum({HORIZONTAL:0,VERTICAL:1,RADIAL:2});var C$zus=cc.Enum({CUSTOM:0,TRIMMED:1,RAW:2});var C$zuc=cc.Enum({NORMAL:0,GRAY:1});C$zun=cc.Class({name:"cc.Sprite",extends:C$zun,mixins:[C$zua],editor:!1,properties:{_spriteFrame:{default:null,type:cc.SpriteFrame},_type:C$zuo.SIMPLE,_sizeMode:C$zus.TRIMMED,_fillType:0,_fillCenter:cc.v2(0,0),_fillStart:0,_fillRange:0,_isTrimmedMode:!0,_atlas:{default:null,type:cc.SpriteAtlas,tooltip:!1,editorOnly:!0,visible:!0,animatable:!1},spriteFrame:{get:function(){return this._spriteFrame},set:function(C$zut,C$zue){var C$zui=this._spriteFrame;C$zui!==C$zut&&(this._spriteFrame=C$zut,this._applySpriteFrame(C$zui))},type:cc.SpriteFrame},type:{get:function(){return this._type},set:function(C$zut){this._type!==C$zut&&(this._type=C$zut,this.setVertsDirty(),this._resetAssembler())},type:C$zuo,animatable:!1,tooltip:!1},fillType:{get:function(){return this._fillType},set:function(C$zut){C$zut!==this._fillType&&(this._fillType=C$zut,this.setVertsDirty(),this._resetAssembler())},type:C$zut,tooltip:!1},fillCenter:{get:function(){return this._fillCenter},set:function(C$zut){this._fillCenter.x=C$zut.x,this._fillCenter.y=C$zut.y,this._type===C$zuo.FILLED&&this.setVertsDirty()},tooltip:!1},fillStart:{get:function(){return this._fillStart},set:function(C$zut){this._fillStart=C$zur.clampf(C$zut,-1,1),this._type===C$zuo.FILLED&&this.setVertsDirty()},tooltip:!1},fillRange:{get:function(){return this._fillRange},set:function(C$zut){this._fillRange=C$zur.clampf(C$zut,-1,1),this._type===C$zuo.FILLED&&this.setVertsDirty()},tooltip:!1},trim:{get:function(){return this._isTrimmedMode},set:function(C$zut){this._isTrimmedMode!==C$zut&&(this._isTrimmedMode=C$zut,this._type!==C$zuo.SIMPLE&&this._type!==C$zuo.MESH||this.setVertsDirty())},animatable:!1,tooltip:!1},sizeMode:{get:function(){return this._sizeMode},set:function(C$zut){(this._sizeMode=C$zut)!==C$zus.CUSTOM&&this._applySpriteSize()},animatable:!1,type:C$zus,tooltip:!1}},statics:{FillType:C$zut,Type:C$zuo,SizeMode:C$zus,State:C$zuc},setVisible:function(C$zut){this.enabled=C$zut},setState:function(){},getState:function(){},onEnable:function(){this._super(),this._applySpriteFrame(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},_updateMaterial:function(){var C$zut=this._spriteFrame&&this._spriteFrame.getTexture();var C$zue=this.getMaterial(0);C$zue&&C$zue.setProperty("texture",C$zut),C$zua.prototype._updateMaterial.call(this)},_applyAtlas:!1,_validateRender:function(){var C$zut=this._spriteFrame;this._materials[0]&&C$zut&&C$zut.textureLoaded()||this.disableRender()},_applySpriteSize:function(){var C$zut;this._spriteFrame&&this.isValid&&(C$zus.RAW===this._sizeMode?(C$zut=this._spriteFrame._originalSize,this.node.setContentSize(C$zut)):C$zus.TRIMMED===this._sizeMode&&(C$zut=this._spriteFrame._rect,this.node.setContentSize(C$zut.width,C$zut.height)),this.setVertsDirty())},_applySpriteFrame:function(C$zut){var C$zue=C$zut&&C$zut.getTexture();C$zue&&!C$zue.loaded&&C$zut.off("load",this._applySpriteSize,this);C$zut=this._spriteFrame;C$zut?(this._updateMaterial(),C$zue===(C$zue=C$zut.getTexture())&&C$zue&&C$zue.loaded?this._applySpriteSize():(this.disableRender(),C$zut.onTextureLoaded(this._applySpriteSize,this))):this.disableRender()}});cc.Sprite=C$zue.exports=C$zun},{"../CCNode":30,"../utils/blend-func":257,"../utils/misc":264,"./CCRenderComponent":89}],95:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Enum({NONE:0,CHECKBOX:1,TEXT_ATLAS:2,SLIDER_BAR:3,LIST_VIEW:4,PAGE_VIEW:5});var C$zun=cc.Enum({VERTICAL:0,HORIZONTAL:1});var C$zua=cc.Enum({TOP:0,CENTER:1,BOTTOM:2});var C$zuo=cc.Enum({LEFT:0,CENTER:1,RIGHT:2});C$zur=cc.Class({name:"cc.StudioComponent",extends:cc.Component,editor:!1,properties:!1,statics:{ComponentType:C$zur,ListDirection:C$zun,VerticalAlign:C$zua,HorizontalAlign:C$zuo}});var C$zus=C$zut("../utils/prefab-helper");C$zur.PlaceHolder=cc.Class({name:"cc.StudioComponent.PlaceHolder",extends:cc.Component,properties:{_baseUrl:"",nestedPrefab:cc.Prefab},onLoad:function(){this.nestedPrefab&&this._replaceWithNestedPrefab()},_replaceWithNestedPrefab:function(){var C$zut=this.node;var C$zue=C$zut._prefab;C$zue.root=C$zut,C$zue.asset=this.nestedPrefab,C$zus.syncWithPrefab(C$zut)}}),cc.StudioComponent=C$zue.exports=C$zur;C$zun=cc.Class({name:"cc.StudioWidget",extends:cc.Widget,editor:!1,_validateTargetInDEV:function(){}});cc.StudioWidget=C$zue.exports=C$zun},{"../utils/prefab-helper":267}],96:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../utils/gray-sprite-state");C$zur=cc.Class({name:"cc.Toggle",extends:C$zut("./CCButton"),mixins:[C$zur],editor:!1,properties:{_N$isChecked:!0,isChecked:{get:function(){return this._N$isChecked},set:function(C$zut){var C$zue;C$zut!==this._N$isChecked&&((C$zue=this.toggleGroup||this._toggleContainer)&&C$zue.enabled&&this._N$isChecked&&!C$zue.allowSwitchOff||(this._N$isChecked=C$zut,this._updateCheckMark(),C$zue&&C$zue.enabled&&C$zue.updateToggles(this),cc.Toggle._triggerEventInScript_isChecked&&this._emitToggleEvents()))},tooltip:!1},toggleGroup:{default:null,tooltip:!1,type:C$zut("./CCToggleGroup")},checkMark:{default:null,type:cc.Sprite,tooltip:!1},checkEvents:{default:[],type:cc.Component.EventHandler},_resizeToTarget:{animatable:!1,set:function(C$zut){C$zut&&this._resizeNodeToTargetNode()}}},statics:{_triggerEventInScript_check:!1,_triggerEventInScript_isChecked:!1},onEnable:function(){this._super(),this._registerToggleEvent(),this.toggleGroup&&this.toggleGroup.enabledInHierarchy&&this.toggleGroup.addToggle(this)},onDisable:function(){this._super(),this._unregisterToggleEvent(),this.toggleGroup&&this.toggleGroup.enabledInHierarchy&&this.toggleGroup.removeToggle(this)},_hideCheckMark:function(){this._N$isChecked=!1,this._updateCheckMark()},toggle:function(C$zut){this.isChecked=!this.isChecked,cc.Toggle._triggerEventInScript_isChecked||!cc.Toggle._triggerEventInScript_check&&!C$zut||this._emitToggleEvents()},check:function(){this.isChecked=!0,!cc.Toggle._triggerEventInScript_isChecked&&cc.Toggle._triggerEventInScript_check&&this._emitToggleEvents()},uncheck:function(){this.isChecked=!1,!cc.Toggle._triggerEventInScript_isChecked&&cc.Toggle._triggerEventInScript_check&&this._emitToggleEvents()},_updateCheckMark:function(){this.checkMark&&(this.checkMark.node.active=!!this.isChecked)},_updateDisabledState:function(){var C$zut;this._super(),this.enableAutoGrayEffect&&this.checkMark&&(C$zut=!this.interactable,this._switchGrayMaterial(C$zut,this.checkMark))},_registerToggleEvent:function(){this.node.on("click",this.toggle,this)},_unregisterToggleEvent:function(){this.node.off("click",this.toggle,this)},_emitToggleEvents:function(){this.node.emit("toggle",this),this.checkEvents&&cc.Component.EventHandler.emitEvents(this.checkEvents,this)}});cc.Toggle=C$zue.exports=C$zur,C$zut("../platform/js").get(C$zur.prototype,"_toggleContainer",function(){var C$zut=this.node.parent;return cc.Node.isNode(C$zut)?C$zut.getComponent(cc.ToggleContainer):null})},{"../platform/js":209,"../utils/gray-sprite-state":260,"./CCButton":76,"./CCToggleGroup":98}],97:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.ToggleContainer",extends:cc.Component,editor:!1,properties:{allowSwitchOff:{tooltip:!1,default:!1},checkEvents:{default:[],type:cc.Component.EventHandler}},updateToggles:function(C$zue){this.enabledInHierarchy&&C$zue.isChecked&&(this.toggleItems.forEach(function(C$zut){C$zut!==C$zue&&C$zut.isChecked&&C$zut.enabled&&C$zut._hideCheckMark()}),this.checkEvents&&cc.Component.EventHandler.emitEvents(this.checkEvents,C$zue))},_allowOnlyOneToggleChecked:function(){var C$zue=!1;return this.toggleItems.forEach(function(C$zut){C$zue?C$zut._hideCheckMark():C$zut.isChecked&&(C$zue=!0)}),C$zue},_makeAtLeastOneToggleChecked:function(){var C$zut;this._allowOnlyOneToggleChecked()||this.allowSwitchOff||0<(C$zut=this.toggleItems).length&&C$zut[0].check()},onEnable:function(){this.node.on("child-added",this._allowOnlyOneToggleChecked,this),this.node.on("child-removed",this._makeAtLeastOneToggleChecked,this)},onDisable:function(){this.node.off("child-added",this._allowOnlyOneToggleChecked,this),this.node.off("child-removed",this._makeAtLeastOneToggleChecked,this)},start:function(){this._makeAtLeastOneToggleChecked()}});C$zut("../platform/js").get(C$zur.prototype,"toggleItems",function(){return this.node.getComponentsInChildren(cc.Toggle)}),cc.ToggleContainer=C$zue.exports=C$zur},{"../platform/js":209}],98:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.ToggleGroup",extends:cc.Component,ctor:function(){this._toggleItems=[]},editor:!1,properties:{allowSwitchOff:{tooltip:!1,default:!1},toggleItems:{get:function(){return this._toggleItems}}},updateToggles:function(C$zue){this.enabledInHierarchy&&this._toggleItems.forEach(function(C$zut){C$zue.isChecked&&C$zut!==C$zue&&C$zut.isChecked&&C$zut.enabled&&C$zut._hideCheckMark()})},addToggle:function(C$zut){-1===this._toggleItems.indexOf(C$zut)&&this._toggleItems.push(C$zut),this._allowOnlyOneToggleChecked()},removeToggle:function(C$zut){C$zut=this._toggleItems.indexOf(C$zut);-1<C$zut&&this._toggleItems.splice(C$zut,1),this._makeAtLeastOneToggleChecked()},_allowOnlyOneToggleChecked:function(){var C$zue=!1;return this._toggleItems.forEach(function(C$zut){C$zue&&C$zut.enabled&&C$zut._hideCheckMark(),C$zut.isChecked&&C$zut.enabled&&(C$zue=!0)}),C$zue},_makeAtLeastOneToggleChecked:function(){this._allowOnlyOneToggleChecked()||this.allowSwitchOff||0<this._toggleItems.length&&(this._toggleItems[0].isChecked=!0)},start:function(){this._makeAtLeastOneToggleChecked()}});C$zut=C$zut("../platform/js");var C$zun=!1;C$zut.get(cc,"ToggleGroup",function(){return C$zun||(cc.errorID(1405,"cc.ToggleGroup","cc.ToggleContainer"),C$zun=!0),C$zur}),C$zue.exports=C$zur},{"../platform/js":209}],99:[function(C$zut,C$zue,C$zui){"use strict";C$zut=cc.Class({name:"cc.ViewGroup",extends:C$zut("./CCComponent")});cc.ViewGroup=C$zue.exports=C$zut},{"./CCComponent":78}],100:[function(C$zuh,C$zuu,C$zu_){"use strict";var C$zut=C$zuh("../base-ui/CCWidgetManager");var C$zue=C$zut.AlignMode;var C$zui=C$zut._AlignFlags;var C$zur=C$zui.TOP;var C$zun=C$zui.MID;var C$zua=C$zui.BOT;var C$zuo=C$zui.LEFT;var C$zus=C$zui.CENTER;var C$zuc=C$zui.RIGHT;var C$zud=C$zur|C$zua;var C$zul=C$zuo|C$zuc;C$zui=cc.Class({name:"cc.Widget",extends:C$zuh("./CCComponent"),editor:!1,properties:{target:{get:function(){return this._target},set:function(C$zut){this._target=C$zut},type:cc.Node,tooltip:!1},isAlignTop:{get:function(){return 0<(this._alignFlags&C$zur)},set:function(C$zut){this._setAlign(C$zur,C$zut)},animatable:!1,tooltip:!1},isAlignVerticalCenter:{get:function(){return 0<(this._alignFlags&C$zun)},set:function(C$zut){C$zut?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=C$zun):this._alignFlags&=~C$zun},animatable:!1,tooltip:!1},isAlignBottom:{get:function(){return 0<(this._alignFlags&C$zua)},set:function(C$zut){this._setAlign(C$zua,C$zut)},animatable:!1,tooltip:!1},isAlignLeft:{get:function(){return 0<(this._alignFlags&C$zuo)},set:function(C$zut){this._setAlign(C$zuo,C$zut)},animatable:!1,tooltip:!1},isAlignHorizontalCenter:{get:function(){return 0<(this._alignFlags&C$zus)},set:function(C$zut){C$zut?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=C$zus):this._alignFlags&=~C$zus},animatable:!1,tooltip:!1},isAlignRight:{get:function(){return 0<(this._alignFlags&C$zuc)},set:function(C$zut){this._setAlign(C$zuc,C$zut)},animatable:!1,tooltip:!1},isStretchWidth:{get:function(){return(this._alignFlags&C$zul)==C$zul},visible:!1},isStretchHeight:{get:function(){return(this._alignFlags&C$zud)==C$zud},visible:!1},top:{get:function(){return this._top},set:function(C$zut){this._top=C$zut},tooltip:!1},bottom:{get:function(){return this._bottom},set:function(C$zut){this._bottom=C$zut},tooltip:!1},left:{get:function(){return this._left},set:function(C$zut){this._left=C$zut},tooltip:!1},right:{get:function(){return this._right},set:function(C$zut){this._right=C$zut},tooltip:!1},horizontalCenter:{get:function(){return this._horizontalCenter},set:function(C$zut){this._horizontalCenter=C$zut},tooltip:!1},verticalCenter:{get:function(){return this._verticalCenter},set:function(C$zut){this._verticalCenter=C$zut},tooltip:!1},isAbsoluteHorizontalCenter:{get:function(){return this._isAbsHorizontalCenter},set:function(C$zut){this._isAbsHorizontalCenter=C$zut},animatable:!1},isAbsoluteVerticalCenter:{get:function(){return this._isAbsVerticalCenter},set:function(C$zut){this._isAbsVerticalCenter=C$zut},animatable:!1},isAbsoluteTop:{get:function(){return this._isAbsTop},set:function(C$zut){this._isAbsTop=C$zut},animatable:!1},isAbsoluteBottom:{get:function(){return this._isAbsBottom},set:function(C$zut){this._isAbsBottom=C$zut},animatable:!1},isAbsoluteLeft:{get:function(){return this._isAbsLeft},set:function(C$zut){this._isAbsLeft=C$zut},animatable:!1},isAbsoluteRight:{get:function(){return this._isAbsRight},set:function(C$zut){this._isAbsRight=C$zut},animatable:!1},alignMode:{default:C$zue.ON_WINDOW_RESIZE,type:C$zue,tooltip:!1},_wasAlignOnce:{default:void 0,formerlySerializedAs:"isAlignOnce"},_target:null,_alignFlags:0,_left:0,_right:0,_top:0,_bottom:0,_verticalCenter:0,_horizontalCenter:0,_isAbsLeft:!0,_isAbsRight:!0,_isAbsTop:!0,_isAbsBottom:!0,_isAbsHorizontalCenter:!0,_isAbsVerticalCenter:!0,_originalWidth:0,_originalHeight:0},statics:{AlignMode:C$zue},onLoad:function(){void 0!==this._wasAlignOnce&&(this.alignMode=this._wasAlignOnce?C$zue.ONCE:C$zue.ALWAYS,this._wasAlignOnce=void 0)},onEnable:function(){C$zut.add(this)},onDisable:function(){C$zut.remove(this)},_validateTargetInDEV:!1,_setAlign:function(C$zut,C$zue){var C$zui;C$zue!==0<(this._alignFlags&C$zut)&&(C$zui=0<(C$zut&C$zul),C$zue?(this._alignFlags|=C$zut,C$zui?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=this.node.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=this.node.height))):(C$zui?this.isStretchWidth&&(this.node.width=this._originalWidth):this.isStretchHeight&&(this.node.height=this._originalHeight),this._alignFlags&=~C$zut))},updateAlignment:function(){C$zut.updateAlignment(this.node)}});Object.defineProperty(C$zui.prototype,"isAlignOnce",{get:function(){return cc.warn("`widget.isAlignOnce` is deprecated, use `widget.alignMode === cc.Widget.AlignMode.ONCE` instead please."),this.alignMode===C$zue.ONCE},set:function(C$zut){cc.warn("`widget.isAlignOnce` is deprecated, use `widget.alignMode = cc.Widget.AlignMode.*` instead please."),this.alignMode=C$zut?C$zue.ONCE:C$zue.ALWAYS}}),cc.Widget=C$zuu.exports=C$zui},{"../base-ui/CCWidgetManager":62,"./CCComponent":78}],101:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./CCComponent");C$zut=cc.Class({name:"cc.WXSubContextView",extends:C$zut,editor:!1,properties:{_fps:60,fps:{get:function(){return this._fps},set:function(C$zut){this._fps!==C$zut&&(this._fps=C$zut,this._updateInterval=1/C$zut,this._updateSubContextFrameRate())},tooltip:!1}},ctor:function(){this._sprite=null,this._tex=new cc.Texture2D,this._context=null,this._updatedTime=performance.now(),this._updateInterval=0},onLoad:function(){wx.getOpenDataContext?(this._updateInterval=1e3/this._fps,this._context=wx.getOpenDataContext(),this.reset(),this._tex.setPremultiplyAlpha(!0),this._tex.initWithElement(sharedCanvas),this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite),this._sprite.srcBlendFactor=cc.macro.BlendFactor.ONE),this._sprite.spriteFrame=new cc.SpriteFrame(this._tex)):this.enabled=!1},reset:function(){var C$zut;this._context&&(this.updateSubContextViewport(),(C$zut=this._context.canvas)&&(C$zut.width=this.node.width,C$zut.height=this.node.height))},onEnable:function(){this._runSubContextMainLoop(),this._registerNodeEvent(),this._updateSubContextFrameRate(),this.updateSubContextViewport()},onDisable:function(){this._unregisterNodeEvent(),this._stopSubContextMainLoop()},update:function(C$zut){if(void 0===C$zut)return this._context&&this._context.postMessage({fromEngine:!0,event:"step"}),void this._updateSubContextTexture();performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())},_updateSubContextTexture:function(){this._tex&&this._context&&(this._tex.initWithElement(this._context.canvas),this._sprite._activateMaterial())},updateSubContextViewport:function(){var C$zut,C$zue,C$zui;this._context&&(C$zut=this.node.getBoundingBoxToWorld(),C$zue=cc.view._scaleX,C$zui=cc.view._scaleY,this._context.postMessage({fromEngine:!0,event:"viewport",x:C$zut.x*C$zue+cc.view._viewportRect.x,y:C$zut.y*C$zui+cc.view._viewportRect.y,width:C$zut.width*C$zue,height:C$zut.height*C$zui}))},_registerNodeEvent:function(){this.node.on("position-changed",this.updateSubContextViewport,this),this.node.on("scale-changed",this.updateSubContextViewport,this),this.node.on("size-changed",this.updateSubContextViewport,this)},_unregisterNodeEvent:function(){this.node.off("position-changed",this.updateSubContextViewport,this),this.node.off("scale-changed",this.updateSubContextViewport,this),this.node.off("size-changed",this.updateSubContextViewport,this)},_runSubContextMainLoop:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!0})},_stopSubContextMainLoop:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!1})},_updateSubContextFrameRate:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"frameRate",value:this._fps})}});cc.WXSubContextView=C$zue.exports=C$zut},{"./CCComponent":78}],102:[function(C$zut,C$zue,C$zul){"use strict";var C$zui=C$zut("../../platform/CCMacro");var C$zur=C$zut("../editbox/EditBoxImplBase");var C$zun=C$zut("../CCLabel");var C$zua=C$zut("./types");var C$zuo=C$zua.InputMode;var C$zus=C$zua.InputFlag;C$zua=C$zua.KeyboardReturnType;var C$zuc=cc.Class({name:"cc.EditBox",extends:cc.Component,editor:!1,properties:{_useOriginalSize:!0,_string:"",string:{tooltip:!1,get:function(){return this._string},set:function(C$zut){C$zut=""+C$zut,0<=this.maxLength&&C$zut.length>=this.maxLength&&(C$zut=C$zut.slice(0,this.maxLength)),this._string=C$zut,this._updateString(C$zut)}},textLabel:{tooltip:!1,default:null,type:C$zun,notify:function(C$zut){this.textLabel&&this.textLabel!==C$zut&&(this._updateTextLabel(),this._updateLabels())}},placeholderLabel:{tooltip:!1,default:null,type:C$zun,notify:function(C$zut){this.placeholderLabel&&this.placeholderLabel!==C$zut&&(this._updatePlaceholderLabel(),this._updateLabels())}},background:{tooltip:!1,default:null,type:cc.Sprite,notify:function(C$zut){this.background&&this.background!==C$zut&&this._updateBackgroundSprite()}},_N$backgroundImage:{default:void 0,type:cc.SpriteFrame},backgroundImage:{get:function(){return this.background?this.background.spriteFrame:null},set:function(C$zut){this.background&&(this.background.spriteFrame=C$zut)}},returnType:{default:C$zua.DEFAULT,tooltip:!1,displayName:"KeyboardReturnType",type:C$zua},_N$returnType:{default:void 0,type:cc.Float},inputFlag:{tooltip:!1,default:C$zus.DEFAULT,type:C$zus,notify:function(){this._updateString(this._string)}},inputMode:{tooltip:!1,default:C$zuo.ANY,type:C$zuo,notify:function(C$zut){this.inputMode!==C$zut&&(this._updateTextLabel(),this._updatePlaceholderLabel())}},fontSize:{get:function(){return this.textLabel?this.textLabel.fontSize:0},set:function(C$zut){this.textLabel&&(this.textLabel.fontSize=C$zut)}},_N$fontSize:{default:void 0,type:cc.Float},lineHeight:{get:function(){return this.textLabel?this.textLabel.lineHeight:0},set:function(C$zut){this.textLabel&&(this.textLabel.lineHeight=C$zut)}},_N$lineHeight:{default:void 0,type:cc.Float},fontColor:{get:function(){return this.textLabel?this.textLabel.node.color:cc.Color.BLACK},set:function(C$zut){this.textLabel&&(this.textLabel.node.color=C$zut,this.textLabel.node.opacity=C$zut.a)}},_N$fontColor:void 0,placeholder:{tooltip:!1,get:function(){return this.placeholderLabel?this.placeholderLabel.string:""},set:function(C$zut){this.placeholderLabel&&(this.placeholderLabel.string=C$zut)}},_N$placeholder:{default:void 0,type:cc.String},placeholderFontSize:{get:function(){return this.placeholderLabel?this.placeholderLabel.fontSize:0},set:function(C$zut){this.placeholderLabel&&(this.placeholderLabel.fontSize=C$zut)}},_N$placeholderFontSize:{default:void 0,type:cc.Float},placeholderFontColor:{get:function(){return this.placeholderLabel?this.placeholderLabel.node.color:cc.Color.BLACK},set:function(C$zut){this.placeholderLabel&&(this.placeholderLabel.node.color=C$zut,this.placeholderLabel.node.opacity=C$zut.a)}},_N$placeholderFontColor:void 0,maxLength:{tooltip:!1,default:20},_N$maxLength:{default:void 0,type:cc.Float},stayOnTop:{default:!1,notify:function(){cc.warn("editBox.stayOnTop is removed since v2.1.")}},_tabIndex:0,tabIndex:{tooltip:!1,get:function(){return this._tabIndex},set:function(C$zut){this._tabIndex!==C$zut&&(this._tabIndex=C$zut,this._impl&&this._impl.setTabIndex(C$zut))}},editingDidBegan:{default:[],type:cc.Component.EventHandler},textChanged:{default:[],type:cc.Component.EventHandler},editingDidEnded:{default:[],type:cc.Component.EventHandler},editingReturn:{default:[],type:cc.Component.EventHandler}},statics:{_ImplClass:C$zur,KeyboardReturnType:C$zua,InputFlag:C$zus,InputMode:C$zuo},_init:function(){this._upgradeComp(),this._isLabelVisible=!0,this.node.on(cc.Node.EventType.SIZE_CHANGED,this._syncSize,this),(this._impl=new C$zuc._ImplClass).init(this),this._updateString(this._string),this._syncSize()},_updateBackgroundSprite:function(){var C$zut=this.background;var C$zue;C$zut||(C$zut=(C$zut=(C$zue=(C$zue=this.node.getChildByName("BACKGROUND_SPRITE"))||new cc.Node("BACKGROUND_SPRITE")).getComponent(cc.Sprite))||C$zue.addComponent(cc.Sprite),C$zue.parent=this.node,this.background=C$zut),C$zut.type=cc.Sprite.Type.SLICED,void 0!==this._N$backgroundImage&&(C$zut.spriteFrame=this._N$backgroundImage,this._N$backgroundImage=void 0)},_updateTextLabel:function(){var C$zut=this.textLabel;var C$zue;C$zut||(C$zut=(C$zut=(C$zue=(C$zue=this.node.getChildByName("TEXT_LABEL"))||new cc.Node("TEXT_LABEL")).getComponent(C$zun))||C$zue.addComponent(C$zun),C$zue.parent=this.node,this.textLabel=C$zut),C$zut.node.setAnchorPoint(0,1),C$zut.overflow=C$zun.Overflow.CLAMP,this.inputMode===C$zuo.ANY?(C$zut.verticalAlign=C$zui.VerticalTextAlignment.TOP,C$zut.enableWrapText=!0):(C$zut.verticalAlign=C$zui.VerticalTextAlignment.CENTER,C$zut.enableWrapText=!1),C$zut.string=this._updateLabelStringStyle(this._string),void 0!==this._N$fontColor&&(C$zut.node.color=this._N$fontColor,C$zut.node.opacity=this._N$fontColor.a,this._N$fontColor=void 0),void 0!==this._N$fontSize&&(C$zut.fontSize=this._N$fontSize,this._N$fontSize=void 0),void 0!==this._N$lineHeight&&(C$zut.lineHeight=this._N$lineHeight,this._N$lineHeight=void 0)},_updatePlaceholderLabel:function(){var C$zut=this.placeholderLabel;var C$zue;C$zut||(C$zut=(C$zut=(C$zue=(C$zue=this.node.getChildByName("PLACEHOLDER_LABEL"))||new cc.Node("PLACEHOLDER_LABEL")).getComponent(C$zun))||C$zue.addComponent(C$zun),C$zue.parent=this.node,this.placeholderLabel=C$zut),C$zut.node.setAnchorPoint(0,1),C$zut.overflow=C$zun.Overflow.CLAMP,this.inputMode===C$zuo.ANY?(C$zut.verticalAlign=C$zui.VerticalTextAlignment.TOP,C$zut.enableWrapText=!0):(C$zut.verticalAlign=C$zui.VerticalTextAlignment.CENTER,C$zut.enableWrapText=!1),C$zut.string=this.placeholder,void 0!==this._N$placeholderFontColor&&(C$zut.node.color=this._N$placeholderFontColor,C$zut.node.opacity=this._N$placeholderFontColor.a,this._N$placeholderFontColor=void 0),void 0!==this._N$placeholderFontSize&&(C$zut.fontSize=this._N$placeholderFontSize,this._N$placeholderFontSize=void 0)},_upgradeComp:function(){void 0!==this._N$returnType&&(this.returnType=this._N$returnType,this._N$returnType=void 0),void 0!==this._N$maxLength&&(this.maxLength=this._N$maxLength,this._N$maxLength=void 0),void 0!==this._N$backgroundImage&&this._updateBackgroundSprite(),void 0===this._N$fontColor&&void 0===this._N$fontSize&&void 0===this._N$lineHeight||this._updateTextLabel(),void 0===this._N$placeholderFontColor&&void 0===this._N$placeholderFontSize||this._updatePlaceholderLabel(),void 0!==this._N$placeholder&&(this.placeholder=this._N$placeholder,this._N$placeholder=void 0)},_syncSize:function(){var C$zut;this._impl&&(C$zut=this.node.getContentSize(),this._impl.setSize(C$zut.width,C$zut.height))},_showLabels:function(){this._isLabelVisible=!0,this._updateLabels()},_hideLabels:function(){this._isLabelVisible=!1,this.textLabel&&(this.textLabel.node.active=!1),this.placeholderLabel&&(this.placeholderLabel.node.active=!1)},_updateLabels:function(){var C$zut;this._isLabelVisible&&(C$zut=this._string,this.textLabel&&(this.textLabel.node.active=""!==C$zut),this.placeholderLabel&&(this.placeholderLabel.node.active=""===C$zut))},_updateString:function(C$zut){var C$zue=this.textLabel;var C$zui;C$zue&&(C$zui=(C$zui=C$zut)&&this._updateLabelStringStyle(C$zut),C$zue.string=C$zui,this._updateLabels())},_updateLabelStringStyle:function(C$zut,C$zue){var C$zui=this.inputFlag;if(C$zue||C$zui!==C$zus.PASSWORD)C$zui===C$zus.INITIAL_CAPS_ALL_CHARACTERS?C$zut=C$zut.toUpperCase():C$zui===C$zus.INITIAL_CAPS_WORD?C$zut=C$zut.replace(/(?:^|\s)\S/g,function(C$zut){return C$zut.toUpperCase()}):C$zui===C$zus.INITIAL_CAPS_SENTENCE&&(C$zut=(C$zue=C$zut).charAt(0).toUpperCase()+C$zue.slice(1));else{var C$zur="";var C$zun=C$zut.length;for(var C$zua=0;C$zua<C$zun;++C$zua)C$zur+="\u25cf";C$zut=C$zur}return C$zut},editBoxEditingDidBegan:function(){cc.Component.EventHandler.emitEvents(this.editingDidBegan,this),this.node.emit("editing-did-began",this)},editBoxEditingDidEnded:function(){cc.Component.EventHandler.emitEvents(this.editingDidEnded,this),this.node.emit("editing-did-ended",this)},editBoxTextChanged:function(C$zut){C$zut=this._updateLabelStringStyle(C$zut,!0),this.string=C$zut,cc.Component.EventHandler.emitEvents(this.textChanged,C$zut,this),this.node.emit("text-changed",this)},editBoxEditingReturn:function(){cc.Component.EventHandler.emitEvents(this.editingReturn,this),this.node.emit("editing-return",this)},onEnable:function(){this._registerEvent(),this._impl&&this._impl.enable()},onDisable:function(){this._unregisterEvent(),this._impl&&this._impl.disable()},onDestroy:function(){this._impl&&this._impl.clear()},__preload:function(){this._init()},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)},_onTouchBegan:function(C$zut){C$zut.stopPropagation()},_onTouchCancel:function(C$zut){C$zut.stopPropagation()},_onTouchEnded:function(C$zut){this._impl&&this._impl.beginEditing(),C$zut.stopPropagation()},setFocus:function(){cc.errorID(1400,"setFocus()","focus()"),this._impl&&this._impl.setFocus(!0)},focus:function(){this._impl&&this._impl.setFocus(!0)},blur:function(){this._impl&&this._impl.setFocus(!1)},isFocused:function(){return!!this._impl&&this._impl.isFocused()},update:function(){this._impl&&this._impl.update()}});cc.EditBox=C$zue.exports=C$zuc,cc.sys.isBrowser&&C$zut("./WebEditBoxImpl")},{"../../platform/CCMacro":194,"../CCLabel":80,"../editbox/EditBoxImplBase":103,"./WebEditBoxImpl":104,"./types":106}],103:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({ctor:function(){this._delegate=null,this._editing=!1},init:function(C$zut){},enable:function(){},disable:function(){this._editing&&this.endEditing()},clear:function(){},update:function(){},setTabIndex:function(C$zut){},setSize:function(C$zut,C$zue){},setFocus:function(C$zut){C$zut?this.beginEditing():this.endEditing()},isFocused:function(){return this._editing},beginEditing:function(){},endEditing:function(){}});C$zue.exports=C$zur},{}],104:[function(C$zut,C$zur,C$zul){"use strict";var C$zu_=(C$zue=C$zut("../../value-types/mat4"))&&C$zue.__esModule?C$zue:{default:C$zue};var C$zuh=C$zut("../../platform/utils");var C$zuu=C$zut("../../platform/CCMacro");var C$zue=C$zut("./types");var C$zus=C$zut("../CCLabel");var C$zun=C$zut("./tabIndexUtil");C$zut=cc.EditBox;var C$zuf=cc.js;var C$zua=C$zue.InputMode;var C$zuo=C$zue.InputFlag;var C$zup=C$zue.KeyboardReturnType;var C$zum={zoomInvalid:!1};cc.sys.OS_ANDROID!==cc.sys.os||cc.sys.browserType!==cc.sys.BROWSER_TYPE_SOUGOU&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_360||(C$zum.zoomInvalid=!0);var C$zuv=0;var C$zud=cc.v3();var C$zuc=null;var C$zui=!1;var C$zuy=!1;var C$zug=C$zut._ImplClass;function WebEditBoxImpl(){C$zug.call(this),this._domId="EditBoxId_"+ ++C$zuv,this._placeholderStyleSheet=null,this._elem=null,this._isTextArea=!1,this._worldMat=new C$zu_.default,this._cameraMat=new C$zu_.default,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this._cacheViewportRect=cc.rect(0,0,0,0),this._inputMode=null,this._inputFlag=null,this._returnType=null,this._eventListeners={},this._textLabelFont=null,this._textLabelFontSize=null,this._textLabelFontColor=null,this._textLabelAlign=null,this._placeholderLabelFont=null,this._placeholderLabelFontSize=null,this._placeholderLabelFontColor=null,this._placeholderLabelAlign=null,this._placeholderLineHeight=null}C$zuf.extend(WebEditBoxImpl,C$zug),C$zut._ImplClass=WebEditBoxImpl,Object.assign(WebEditBoxImpl.prototype,{init:function(C$zut){C$zut&&((this._delegate=C$zut).inputMode===C$zua.ANY?this._createTextArea():this._createInput(),C$zun.add(this),this.setTabIndex(C$zut.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),C$zui=cc.view.isAutoFullScreenEnabled(),C$zuy=cc.view._resizeWithBrowserSize)},clear:function(){this._removeEventListeners(),this._removeDomFromGameContainer(),C$zun.remove(this),C$zuc===this&&(C$zuc=null)},update:function(){},setTabIndex:function(C$zut){this._elem.tabIndex=C$zut,C$zun.resort()},setSize:function(C$zut,C$zue){var C$zui=this._elem;C$zui.style.width=C$zut+"px",C$zui.style.height=C$zue+"px"},beginEditing:function(){C$zuc&&C$zuc!==this&&C$zuc.setFocus(!1),this._editing=!0,(C$zuc=this)._delegate.editBoxEditingDidBegan(),this._showDom(),this._elem.focus()},endEditing:function(){this._elem&&this._elem.blur()},_createInput:function(){this._isTextArea=!1,this._elem=document.createElement("input")},_createTextArea:function(){this._isTextArea=!0,this._elem=document.createElement("textarea")},_addDomToGameContainer:function(){cc.game.container.appendChild(this._elem),document.head.appendChild(this._placeholderStyleSheet)},_removeDomFromGameContainer:function(){C$zuh.contains(cc.game.container,this._elem)&&cc.game.container.removeChild(this._elem),C$zuh.contains(document.head,this._placeholderStyleSheet)&&document.head.removeChild(this._placeholderStyleSheet),delete this._elem,delete this._placeholderStyleSheet},_showDom:function(){this._updateMatrix(),this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._elem.style.display="",this._delegate._hideLabels(),cc.sys.isMobile&&this._showDomOnMobile()},_hideDom:function(){this._elem.style.display="none",this._delegate._showLabels(),cc.sys.isMobile&&this._hideDomOnMobile()},_showDomOnMobile:function(){cc.sys.os===cc.sys.OS_ANDROID&&(C$zui&&(cc.view.enableAutoFullScreen(!1),cc.screen.exitFullScreen()),C$zuy&&cc.view.resizeWithBrowserSize(!1),this._adjustWindowScroll())},_hideDomOnMobile:function(){cc.sys.os===cc.sys.OS_ANDROID&&(C$zuy&&cc.view.resizeWithBrowserSize(!0),setTimeout(function(){C$zuc||C$zui&&cc.view.enableAutoFullScreen(!0)},800)),this._scrollBackWindow()},_adjustWindowScroll:function(){var C$zut=this;setTimeout(function(){window.scrollY<100&&C$zut._elem.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})},800)},_scrollBackWindow:function(){setTimeout(function(){var C$zut=cc.sys;C$zut.browserType!==C$zut.BROWSER_TYPE_WECHAT||C$zut.os!==C$zut.OS_IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)},800)},_updateMatrix:function(){var C$zut=this._delegate.node;C$zut.getWorldMatrix(this._worldMat);var C$zue=this._worldMat;var C$zui=C$zue.m;var C$zur=cc.view;var C$zun,C$zua,C$zuo,C$zuh,C$zuu,C$zus,C$zuc,C$zul;this._m00===C$zui[0]&&this._m01===C$zui[1]&&this._m04===C$zui[4]&&this._m05===C$zui[5]&&this._m12===C$zui[12]&&this._m13===C$zui[13]&&this._w===C$zut._contentSize.width&&this._h===C$zut._contentSize.height&&this._cacheViewportRect.equals(C$zur._viewportRect)||(this._m00=C$zui[0],this._m01=C$zui[1],this._m04=C$zui[4],this._m05=C$zui[5],this._m12=C$zui[12],this._m13=C$zui[13],this._w=C$zut._contentSize.width,this._h=C$zut._contentSize.height,this._cacheViewportRect.set(C$zur._viewportRect),C$zui=C$zur._scaleX,C$zun=C$zur._scaleY,C$zuc=C$zur._viewportRect,C$zur=C$zur._devicePixelRatio,C$zud.x=-C$zut._anchorPoint.x*this._w,C$zud.y=-C$zut._anchorPoint.y*this._h,C$zu_.default.transform(C$zue,C$zue,C$zud),cc.Camera.findCamera(C$zut).getWorldToScreenMatrix2D(this._cameraMat),C$zua=this._cameraMat,C$zu_.default.mul(C$zua,C$zua,C$zue),C$zui/=C$zur,C$zun/=C$zur,C$zue=cc.game.container,C$zuo=(C$zua=C$zua.m)[0]*C$zui,C$zuh=C$zua[1],C$zuu=C$zua[4],C$zus=C$zua[5]*C$zun,C$zul=C$zue&&C$zue.style.paddingLeft&&parseInt(C$zue.style.paddingLeft),C$zul+=C$zuc.x/C$zur,C$zue=C$zue&&C$zue.style.paddingBottom&&parseInt(C$zue.style.paddingBottom),C$zue+=C$zuc.y/C$zur,C$zuc=C$zua[12]*C$zui+C$zul,C$zur=C$zua[13]*C$zun+C$zue,C$zum.zoomInvalid&&(this.setSize(C$zut.width*C$zuo,C$zut.height*C$zus),C$zus=C$zuo=1),(C$zui=this._elem).style.transform=C$zul="matrix("+C$zuo+","+-C$zuh+","+-C$zuu+","+C$zus+","+C$zuc+","+-C$zur+")",C$zui.style["-webkit-transform"]=C$zul,C$zui.style["transform-origin"]="0px 100% 0px",C$zui.style["-webkit-transform-origin"]="0px 100% 0px")},_updateInputType:function(){var C$zut=this._delegate,C$zue=C$zut.inputMode,C$zui=C$zut.inputFlag,C$zut=C$zut.returnType,C$zur=this._elem;if(this._inputMode!==C$zue||this._inputFlag!==C$zui||this._returnType!==C$zut){if(this._inputMode=C$zue,this._inputFlag=C$zui,this._returnType=C$zut,this._isTextArea)return C$zun="none",C$zui===C$zuo.INITIAL_CAPS_ALL_CHARACTERS?C$zun="uppercase":C$zui===C$zuo.INITIAL_CAPS_WORD&&(C$zun="capitalize"),void(C$zur.style.textTransform=C$zun);var C$zun;C$zui!==C$zuo.PASSWORD?(C$zun=C$zur.type,C$zue===C$zua.EMAIL_ADDR?C$zun="email":C$zue===C$zua.NUMERIC||C$zue===C$zua.DECIMAL?C$zun="number":C$zue===C$zua.PHONE_NUMBER?(C$zun="number",C$zur.pattern="[0-9]*"):C$zue===C$zua.URL?C$zun="url":(C$zun="text",C$zut===C$zup.SEARCH&&(C$zun="search")),C$zur.type=C$zun,C$zue="none",C$zui===C$zuo.INITIAL_CAPS_ALL_CHARACTERS?C$zue="uppercase":C$zui===C$zuo.INITIAL_CAPS_WORD&&(C$zue="capitalize"),C$zur.style.textTransform=C$zue):C$zur.type="password"}},_updateMaxLength:function(){var C$zut=this._delegate.maxLength;this._elem.maxLength=C$zut=C$zut<0?65535:C$zut},_initStyleSheet:function(){var C$zut=this._elem;C$zut.style.display="none",C$zut.style.border=0,C$zut.style.background="transparent",C$zut.style.width="100%",C$zut.style.height="100%",C$zut.style.active=0,C$zut.style.outline="medium",C$zut.style.padding="0",C$zut.style.textTransform="uppercase",C$zut.style.position="absolute",C$zut.style.bottom="0px",C$zut.style.left="2px",C$zut.className="cocosEditBox",C$zut.id=this._domId,this._isTextArea?(C$zut.style.resize="none",C$zut.style.overflow_y="scroll"):(C$zut.type="text",C$zut.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")},_updateStyleSheet:function(){var C$zut=this._delegate,C$zue=this._elem;C$zue.value=C$zut.string,C$zue.placeholder=C$zut.placeholder,this._updateTextLabel(C$zut.textLabel),this._updatePlaceholderLabel(C$zut.placeholderLabel)},_updateTextLabel:function(C$zut){if(C$zut){var C$zue=C$zut.font;C$zue=!C$zue||C$zue instanceof cc.BitmapFont?C$zut.fontFamily:C$zue._fontFamily;var C$zui=C$zut.fontSize*C$zut.node.scaleY;if(this._textLabelFont!==C$zue||this._textLabelFontSize!==C$zui||this._textLabelFontColor!==C$zut.fontColor||this._textLabelAlign!==C$zut.horizontalAlign){this._textLabelFont=C$zue,this._textLabelFontSize=C$zui,this._textLabelFontColor=C$zut.fontColor,this._textLabelAlign=C$zut.horizontalAlign;var C$zur=this._elem;switch(C$zur.style.fontSize=C$zui+"px",C$zur.style.color=C$zut.node.color.toCSS(),C$zur.style.fontFamily=C$zue,C$zut.horizontalAlign){case C$zus.HorizontalAlign.LEFT:C$zur.style.textAlign="left";break;case C$zus.HorizontalAlign.CENTER:C$zur.style.textAlign="center";break;case C$zus.HorizontalAlign.RIGHT:C$zur.style.textAlign="right"}}}},_updatePlaceholderLabel:function(C$zut){if(C$zut){var C$zue=C$zut.font;C$zue=!C$zue||C$zue instanceof cc.BitmapFont?C$zut.fontFamily:C$zut.font._fontFamily;var C$zui=C$zut.fontSize*C$zut.node.scaleY;if(this._placeholderLabelFont!==C$zue||this._placeholderLabelFontSize!==C$zui||this._placeholderLabelFontColor!==C$zut.fontColor||this._placeholderLabelAlign!==C$zut.horizontalAlign||this._placeholderLineHeight!==C$zut.fontSize){this._placeholderLabelFont=C$zue,this._placeholderLabelFontSize=C$zui,this._placeholderLabelFontColor=C$zut.fontColor,this._placeholderLabelAlign=C$zut.horizontalAlign,this._placeholderLineHeight=C$zut.fontSize;var C$zur=this._placeholderStyleSheet;var C$zun=C$zut.node.color.toCSS();var C$zua=C$zut.fontSize;var C$zuo;switch(C$zut.horizontalAlign){case C$zus.HorizontalAlign.LEFT:C$zuo="left";break;case C$zus.HorizontalAlign.CENTER:C$zuo="center";break;case C$zus.HorizontalAlign.RIGHT:C$zuo="right"}C$zur.innerHTML="#"+this._domId+"::-webkit-input-placeholder,#"+this._domId+"::-moz-placeholder,#"+this._domId+":-ms-input-placeholder{text-transform: initial; font-family: "+C$zue+"; font-size: "+C$zui+"px; color: "+C$zun+"; line-height: "+C$zua+"px; text-align: "+C$zuo+";}",cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE&&(C$zur.innerHTML+="#"+this._domId+"::-ms-clear{display: none;}")}}},_registerEventListeners:function(){var C$zue=this,C$zui=this._elem,C$zut=!1,C$zur=this._eventListeners;C$zur.compositionStart=function(){C$zut=!0},C$zur.compositionEnd=function(){C$zut=!1,C$zue._delegate.editBoxTextChanged(C$zui.value)},C$zur.onInput=function(){C$zut||C$zue._delegate.editBoxTextChanged(C$zui.value)},C$zur.onClick=function(C$zut){C$zue._editing&&cc.sys.isMobile&&C$zue._adjustWindowScroll()},C$zur.onKeydown=function(C$zut){C$zut.keyCode===C$zuu.KEY.enter?(C$zut.stopPropagation(),C$zue._delegate.editBoxEditingReturn(),C$zue._isTextArea||C$zui.blur()):C$zut.keyCode===C$zuu.KEY.tab&&(C$zut.stopPropagation(),C$zut.preventDefault(),C$zun.next(C$zue))},C$zur.onBlur=function(){C$zue._editing=!1,C$zuc=null,C$zue._hideDom(),C$zue._delegate.editBoxEditingDidEnded()},C$zur.onResize=function(){C$zue._updateMatrix()},C$zui.addEventListener("compositionstart",C$zur.compositionStart),C$zui.addEventListener("compositionend",C$zur.compositionEnd),C$zui.addEventListener("input",C$zur.onInput),C$zui.addEventListener("keydown",C$zur.onKeydown),C$zui.addEventListener("blur",C$zur.onBlur),C$zui.addEventListener("touchstart",C$zur.onClick),window.addEventListener("resize",C$zur.onResize),window.addEventListener("orientationchange",C$zur.onResize)},_removeEventListeners:function(){var C$zut=this._elem,C$zue=this._eventListeners;C$zut.removeEventListener("compositionstart",C$zue.compositionStart),C$zut.removeEventListener("compositionend",C$zue.compositionEnd),C$zut.removeEventListener("input",C$zue.onInput),C$zut.removeEventListener("keydown",C$zue.onKeydown),C$zut.removeEventListener("blur",C$zue.onBlur),C$zut.removeEventListener("touchstart",C$zue.onClick),window.removeEventListener("resize",C$zue.onResize),window.removeEventListener("orientationchange",C$zue.onResize),C$zue.compositionStart=null,C$zue.compositionEnd=null,C$zue.onInput=null,C$zue.onKeydown=null,C$zue.onBlur=null,C$zue.onClick=null,C$zue.onResize=null}})},{"../../platform/CCMacro":194,"../../platform/utils":213,"../../value-types/mat4":281,"../CCLabel":80,"./tabIndexUtil":105,"./types":106}],105:[function(C$zut,C$zue,C$zui){"use strict";C$zue.exports={_tabIndexList:[],add:function(C$zut){var C$zue=this._tabIndexList;-1===C$zue.indexOf(C$zut)&&C$zue.push(C$zut)},remove:function(C$zut){var C$zue=this._tabIndexList;C$zut=C$zue.indexOf(C$zut);-1!==C$zut&&C$zue.splice(C$zut,1)},resort:function(){this._tabIndexList.sort(function(C$zut,C$zue){return C$zut._delegate._tabIndex-C$zue._delegate._tabIndex})},next:function(C$zut){var C$zue=this._tabIndexList;var C$zui=C$zue.indexOf(C$zut);C$zut.setFocus(!1),-1===C$zui||(C$zut=C$zue[C$zui+1])&&0<=C$zut._delegate._tabIndex&&C$zut.setFocus(!0)}}},{}],106:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Enum({DEFAULT:0,DONE:1,SEND:2,SEARCH:3,GO:4,NEXT:5});var C$zun=cc.Enum({ANY:0,EMAIL_ADDR:1,NUMERIC:2,PHONE_NUMBER:3,URL:4,DECIMAL:5,SINGLE_LINE:6});var C$zua=cc.Enum({PASSWORD:0,SENSITIVE:1,INITIAL_CAPS_WORD:2,INITIAL_CAPS_SENTENCE:3,INITIAL_CAPS_ALL_CHARACTERS:4,DEFAULT:5});C$zue.exports={KeyboardReturnType:C$zur,InputMode:C$zun,InputFlag:C$zua}},{}],107:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCComponent"),C$zut("./CCComponentEventHandler"),C$zut("./missing-script");var C$zur=C$zut("./WXSubContextView");var C$zun=C$zut("./SwanSubContextView");C$zur=C$zur||cc.Class({name:"cc.WXSubContextView",extends:cc.Component}),C$zun=C$zun||cc.Class({name:"cc.SwanSubContextView",extends:cc.Component});C$zut=[C$zut("./CCSprite"),C$zut("./CCWidget"),C$zut("./CCCanvas"),C$zut("./CCAudioSource"),C$zut("./CCAnimation"),C$zut("./CCButton"),C$zut("./CCLabel"),C$zut("./CCProgressBar"),C$zut("./CCMask"),C$zut("./CCScrollBar"),C$zut("./CCScrollView"),C$zut("./CCPageViewIndicator"),C$zut("./CCPageView"),C$zut("./CCSlider"),C$zut("./CCLayout"),C$zut("./editbox/CCEditBox"),C$zut("./CCLabelOutline"),C$zut("./CCLabelShadow"),C$zut("./CCRichText"),C$zut("./CCToggleContainer"),C$zut("./CCToggleGroup"),C$zut("./CCToggle"),C$zut("./CCBlockInputEvents"),C$zut("./CCMotionStreak"),C$zur,C$zun];C$zue.exports=C$zut},{"./CCAnimation":73,"./CCAudioSource":74,"./CCBlockInputEvents":75,"./CCButton":76,"./CCCanvas":77,"./CCComponent":78,"./CCComponentEventHandler":79,"./CCLabel":80,"./CCLabelOutline":81,"./CCLabelShadow":82,"./CCLayout":83,"./CCMask":84,"./CCMotionStreak":85,"./CCPageView":86,"./CCPageViewIndicator":87,"./CCProgressBar":88,"./CCRichText":90,"./CCScrollBar":91,"./CCScrollView":92,"./CCSlider":93,"./CCSprite":94,"./CCToggle":96,"./CCToggleContainer":97,"./CCToggleGroup":98,"./CCWidget":100,"./SwanSubContextView":void 0,"./WXSubContextView":101,"./editbox/CCEditBox":102,"./missing-script":108}],108:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.js;var C$zun=C$zut("../utils/misc").BUILTIN_CLASSID_RE;var C$zua=cc.Class({name:"cc.MissingClass",properties:{_$erialized:{default:null,visible:!1,editorOnly:!0}}});var C$zuo=cc.Class({name:"cc.MissingScript",extends:cc.Component,editor:{inspector:"packages://inspector/inspectors/comps/missing-script.js"},properties:{compiled:{default:!1,serializable:!1},_$erialized:{default:null,visible:!1,editorOnly:!0}},ctor:!1,statics:{safeFindClass:function(C$zut,C$zue){var C$zui=C$zur._getClassById(C$zut);return C$zui||(C$zut?(cc.deserialize.reportMissingClass(C$zut),C$zuo.getMissingWrapper(C$zut,C$zue)):null)},getMissingWrapper:function(C$zut,C$zue){return C$zue.node&&(/^[0-9a-zA-Z+/]{23}$/.test(C$zut)||C$zun.test(C$zut))?C$zuo:C$zua}},onLoad:function(){cc.warnID(4600,this.node.name)}});cc._MissingScript=C$zue.exports=C$zuo},{"../utils/misc":264}],109:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.js;C$zut("../event/event");function C$zuaks(C$zut,C$zue){cc.Event.call(this,cc.Event.MOUSE,C$zue),this._eventType=C$zut,this._button=0,this._x=0,this._y=0,this._prevX=0,this._prevY=0,this._scrollX=0,this._scrollY=0}C$zur.extend(C$zuaks,cc.Event);C$zut=C$zuaks.prototype;C$zut.setScrollData=function(C$zut,C$zue){this._scrollX=C$zut,this._scrollY=C$zue},C$zut.getScrollX=function(){return this._scrollX},C$zut.getScrollY=function(){return this._scrollY},C$zut.setLocation=function(C$zut,C$zue){this._x=C$zut,this._y=C$zue},C$zut.getLocation=function(){return cc.v2(this._x,this._y)},C$zut.getLocationInView=function(){return cc.v2(this._x,cc.view._designResolutionSize.height-this._y)},C$zut._setPrevCursor=function(C$zut,C$zue){this._prevX=C$zut,this._prevY=C$zue},C$zut.getPreviousLocation=function(){return cc.v2(this._prevX,this._prevY)},C$zut.getDelta=function(){return cc.v2(this._x-this._prevX,this._y-this._prevY)},C$zut.getDeltaX=function(){return this._x-this._prevX},C$zut.getDeltaY=function(){return this._y-this._prevY},C$zut.setButton=function(C$zut){this._button=C$zut},C$zut.getButton=function(){return this._button},C$zut.getLocationX=function(){return this._x},C$zut.getLocationY=function(){return this._y},C$zuaks.NONE=0,C$zuaks.DOWN=1,C$zuaks.UP=2,C$zuaks.MOVE=3,C$zuaks.SCROLL=4,C$zuaks.BUTTON_LEFT=0,C$zuaks.BUTTON_RIGHT=2,C$zuaks.BUTTON_MIDDLE=1,C$zuaks.BUTTON_4=3,C$zuaks.BUTTON_5=4,C$zuaks.BUTTON_6=5,C$zuaks.BUTTON_7=6,C$zuaks.BUTTON_8=7;function C$zuiks(C$zut,C$zue){cc.Event.call(this,cc.Event.TOUCH,C$zue),this._eventCode=0,this._touches=C$zut||[],this.touch=null,this.currentTouch=null}C$zur.extend(C$zuiks,cc.Event),(C$zut=C$zuiks.prototype).getEventCode=function(){return this._eventCode},C$zut.getTouches=function(){return this._touches},C$zut._setEventCode=function(C$zut){this._eventCode=C$zut},C$zut._setTouches=function(C$zut){this._touches=C$zut},C$zut.setLocation=function(C$zut,C$zue){this.touch&&this.touch.setTouchInfo(this.touch.getID(),C$zut,C$zue)},C$zut.getLocation=function(){return this.touch?this.touch.getLocation():cc.v2()},C$zut.getLocationInView=function(){return this.touch?this.touch.getLocationInView():cc.v2()},C$zut.getPreviousLocation=function(){return this.touch?this.touch.getPreviousLocation():cc.v2()},C$zut.getStartLocation=function(){return this.touch?this.touch.getStartLocation():cc.v2()},C$zut.getID=function(){return this.touch?this.touch.getID():null},C$zut.getDelta=function(){return this.touch?this.touch.getDelta():cc.v2()},C$zut.getDeltaX=function(){return this.touch?this.touch.getDelta().x:0},C$zut.getDeltaY=function(){return this.touch?this.touch.getDelta().y:0},C$zut.getLocationX=function(){return this.touch?this.touch.getLocationX():0},C$zut.getLocationY=function(){return this.touch?this.touch.getLocationY():0},C$zuiks.MAX_TOUCHES=5,C$zuiks.BEGAN=0,C$zuiks.MOVED=1,C$zuiks.ENDED=2,C$zuiks.CANCELED=3;function C$zuHks(C$zut,C$zue){cc.Event.call(this,cc.Event.ACCELERATION,C$zue),this.acc=C$zut}C$zur.extend(C$zuHks,cc.Event);function C$zudks(C$zut,C$zue,C$zui){cc.Event.call(this,cc.Event.KEYBOARD,C$zui),this.keyCode=C$zut,this.isPressed=C$zue}C$zur.extend(C$zudks,cc.Event),cc.Event.EventMouse=C$zuaks,cc.Event.EventTouch=C$zuiks,cc.Event.EventAcceleration=C$zuHks,cc.Event.EventKeyboard=C$zudks,C$zue.exports=cc.Event},{"../event/event":116}],110:[function(C$zut,C$zue,C$zur){"use strict";C$zut=C$zut("../platform/js");cc.EventListener=function(C$zut,C$zue,C$zui){this._onEvent=C$zui,this._type=C$zut||0,this._listenerID=C$zue||"",this._registered=!1,this._fixedPriority=0,this._node=null,this._target=null,this._paused=!0,this._isEnabled=!0},cc.EventListener.prototype={constructor:cc.EventListener,_setPaused:function(C$zut){this._paused=C$zut},_isPaused:function(){return this._paused},_setRegistered:function(C$zut){this._registered=C$zut},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_getListenerID:function(){return this._listenerID},_setFixedPriority:function(C$zut){this._fixedPriority=C$zut},_getFixedPriority:function(){return this._fixedPriority},_setSceneGraphPriority:function(C$zut){this._target=C$zut,this._node=C$zut},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return null!==this._onEvent},clone:function(){return null},setEnabled:function(C$zut){this._isEnabled=C$zut},isEnabled:function(){return this._isEnabled},retain:function(){},release:function(){}},cc.EventListener.UNKNOWN=0,cc.EventListener.TOUCH_ONE_BY_ONE=1,cc.EventListener.TOUCH_ALL_AT_ONCE=2,cc.EventListener.KEYBOARD=3,cc.EventListener.MOUSE=4,cc.EventListener.ACCELERATION=6,cc.EventListener.CUSTOM=8;var C$zui=cc.EventListener.ListenerID={MOUSE:"__cc_mouse",TOUCH_ONE_BY_ONE:"__cc_touch_one_by_one",TOUCH_ALL_AT_ONCE:"__cc_touch_all_at_once",KEYBOARD:"__cc_keyboard",ACCELERATION:"__cc_acceleration"};function C$zuAAs(C$zut,C$zue){this._onCustomEvent=C$zue,cc.EventListener.call(this,cc.EventListener.CUSTOM,C$zut,this._callback)}C$zut.extend(C$zuAAs,cc.EventListener),C$zut.mixin(C$zuAAs.prototype,{_onCustomEvent:null,_callback:function(C$zut){null!==this._onCustomEvent&&this._onCustomEvent(C$zut)},checkAvailable:function(){return cc.EventListener.prototype.checkAvailable.call(this)&&null!==this._onCustomEvent},clone:function(){return new C$zuAAs(this._listenerID,this._onCustomEvent)}});function C$zuDAs(){cc.EventListener.call(this,cc.EventListener.MOUSE,C$zui.MOUSE,this._callback)}C$zut.extend(C$zuDAs,cc.EventListener),C$zut.mixin(C$zuDAs.prototype,{onMouseDown:null,onMouseUp:null,onMouseMove:null,onMouseScroll:null,_callback:function(C$zut){var C$zue=cc.Event.EventMouse;switch(C$zut._eventType){case C$zue.DOWN:this.onMouseDown&&this.onMouseDown(C$zut);break;case C$zue.UP:this.onMouseUp&&this.onMouseUp(C$zut);break;case C$zue.MOVE:this.onMouseMove&&this.onMouseMove(C$zut);break;case C$zue.SCROLL:this.onMouseScroll&&this.onMouseScroll(C$zut)}},clone:function(){var C$zut=new C$zuDAs;return C$zut.onMouseDown=this.onMouseDown,C$zut.onMouseUp=this.onMouseUp,C$zut.onMouseMove=this.onMouseMove,C$zut.onMouseScroll=this.onMouseScroll,C$zut},checkAvailable:function(){return!0}});function C$zuhAs(){cc.EventListener.call(this,cc.EventListener.TOUCH_ONE_BY_ONE,C$zui.TOUCH_ONE_BY_ONE,null),this._claimedTouches=[]}C$zut.extend(C$zuhAs,cc.EventListener),C$zut.mixin(C$zuhAs.prototype,{constructor:C$zuhAs,_claimedTouches:null,swallowTouches:!1,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,onTouchCancelled:null,setSwallowTouches:function(C$zut){this.swallowTouches=C$zut},isSwallowTouches:function(){return this.swallowTouches},clone:function(){var C$zut=new C$zuhAs;return C$zut.onTouchBegan=this.onTouchBegan,C$zut.onTouchMoved=this.onTouchMoved,C$zut.onTouchEnded=this.onTouchEnded,C$zut.onTouchCancelled=this.onTouchCancelled,C$zut.swallowTouches=this.swallowTouches,C$zut},checkAvailable:function(){return!!this.onTouchBegan||(cc.logID(1801),!1)}});function C$zuQAs(){cc.EventListener.call(this,cc.EventListener.TOUCH_ALL_AT_ONCE,C$zui.TOUCH_ALL_AT_ONCE,null)}C$zut.extend(C$zuQAs,cc.EventListener),C$zut.mixin(C$zuQAs.prototype,{constructor:C$zuQAs,onTouchesBegan:null,onTouchesMoved:null,onTouchesEnded:null,onTouchesCancelled:null,clone:function(){var C$zut=new C$zuQAs;return C$zut.onTouchesBegan=this.onTouchesBegan,C$zut.onTouchesMoved=this.onTouchesMoved,C$zut.onTouchesEnded=this.onTouchesEnded,C$zut.onTouchesCancelled=this.onTouchesCancelled,C$zut},checkAvailable:function(){return null!==this.onTouchesBegan||null!==this.onTouchesMoved||null!==this.onTouchesEnded||null!==this.onTouchesCancelled||(cc.logID(1802),!1)}});function C$zuvAs(C$zut){this._onAccelerationEvent=C$zut,cc.EventListener.call(this,cc.EventListener.ACCELERATION,C$zui.ACCELERATION,this._callback)}C$zut.extend(C$zuvAs,cc.EventListener),C$zut.mixin(C$zuvAs.prototype,{constructor:C$zuvAs,_onAccelerationEvent:null,_callback:function(C$zut){this._onAccelerationEvent(C$zut.acc,C$zut)},checkAvailable:function(){return cc.assertID(this._onAccelerationEvent,1803),!0},clone:function(){return new C$zuvAs(this._onAccelerationEvent)}});function C$zuzAs(){cc.EventListener.call(this,cc.EventListener.KEYBOARD,C$zui.KEYBOARD,this._callback)}C$zut.extend(C$zuzAs,cc.EventListener),C$zut.mixin(C$zuzAs.prototype,{constructor:C$zuzAs,onKeyPressed:null,onKeyReleased:null,_callback:function(C$zut){C$zut.isPressed?this.onKeyPressed&&this.onKeyPressed(C$zut.keyCode,C$zut):this.onKeyReleased&&this.onKeyReleased(C$zut.keyCode,C$zut)},clone:function(){var C$zut=new C$zuzAs;return C$zut.onKeyPressed=this.onKeyPressed,C$zut.onKeyReleased=this.onKeyReleased,C$zut},checkAvailable:function(){return null!==this.onKeyPressed||null!==this.onKeyReleased||(cc.logID(1800),!1)}}),cc.EventListener.create=function(C$zut){cc.assertID(C$zut&&C$zut.event,1900);var C$zue=C$zut.event;delete C$zut.event;var C$zui=null;for(var C$zur in C$zue===cc.EventListener.TOUCH_ONE_BY_ONE?C$zui=new C$zuhAs:C$zue===cc.EventListener.TOUCH_ALL_AT_ONCE?C$zui=new C$zuQAs:C$zue===cc.EventListener.MOUSE?C$zui=new C$zuDAs:C$zue===cc.EventListener.CUSTOM?(C$zui=new C$zuAAs(C$zut.eventName,C$zut.callback),delete C$zut.eventName,delete C$zut.callback):C$zue===cc.EventListener.KEYBOARD?C$zui=new C$zuzAs:C$zue===cc.EventListener.ACCELERATION&&(C$zui=new C$zuvAs(C$zut.callback),delete C$zut.callback),C$zut)C$zui[C$zur]=C$zut[C$zur];return C$zui},C$zue.exports=cc.EventListener},{"../platform/js":209}],111:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../platform/js");C$zut("./CCEventListener");var C$zul=cc.EventListener.ListenerID;function C$zuuDs(){this._fixedListeners=[],this._sceneGraphListeners=[],this.gt0Index=0}var C$zuh={DIRTY_NONE:0,DIRTY_FIXED_PRIORITY:1,DIRTY_SCENE_GRAPH_PRIORITY:2,DIRTY_ALL:3,_listenersMap:{},_priorityDirtyFlagMap:{},_nodeListenersMap:{},_toAddedListeners:[],_toRemovedListeners:[],_dirtyListeners:{},_inDispatch:0,_isEnabled:!(C$zuuDs.prototype={constructor:C$zuuDs,size:function(){return this._fixedListeners.length+this._sceneGraphListeners.length},empty:function(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length},push:function(C$zut){(0===C$zut._getFixedPriority()?this._sceneGraphListeners:this._fixedListeners).push(C$zut)},clearSceneGraphListeners:function(){this._sceneGraphListeners.length=0},clearFixedListeners:function(){this._fixedListeners.length=0},clear:function(){this._sceneGraphListeners.length=0,this._fixedListeners.length=0},getFixedPriorityListeners:function(){return this._fixedListeners},getSceneGraphPriorityListeners:function(){return this._sceneGraphListeners}}),_currentTouch:null,_currentTouchListener:null,_internalCustomListenerIDs:[],_setDirtyForNode:function(C$zut){var C$zue=this._nodeListenersMap[C$zut._id];if(void 0!==C$zue)for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui]._getListenerID();null==this._dirtyListeners[C$zun]&&(this._dirtyListeners[C$zun]=!0)}if(0<C$zut.childrenCount){var C$zua=C$zut._children;for(var C$zuo=0,C$zus=C$zua.length;C$zuo<C$zus;C$zuo++)this._setDirtyForNode(C$zua[C$zuo])}},pauseTarget:function(C$zut,C$zue){if(C$zut instanceof cc._BaseNode){var C$zui,C$zur,C$zun=this._nodeListenersMap[C$zut._id];if(C$zun)for(C$zui=0,C$zur=C$zun.length;C$zui<C$zur;C$zui++)C$zun[C$zui]._setPaused(!0);if(!0===C$zue){var C$zua=C$zut._children;for(C$zui=0,C$zur=C$zua?C$zua.length:0;C$zui<C$zur;C$zui++)this.pauseTarget(C$zua[C$zui],!0)}}else cc.warnID(3506)},resumeTarget:function(C$zut,C$zue){if(C$zut instanceof cc._BaseNode){var C$zui,C$zur,C$zun=this._nodeListenersMap[C$zut._id];if(C$zun)for(C$zui=0,C$zur=C$zun.length;C$zui<C$zur;C$zui++)C$zun[C$zui]._setPaused(!1);if(this._setDirtyForNode(C$zut),!0===C$zue){var C$zua=C$zut._children;for(C$zui=0,C$zur=C$zua?C$zua.length:0;C$zui<C$zur;C$zui++)this.resumeTarget(C$zua[C$zui],!0)}}else cc.warnID(3506)},_addListener:function(C$zut){0===this._inDispatch?this._forceAddEventListener(C$zut):this._toAddedListeners.push(C$zut)},_forceAddEventListener:function(C$zut){var C$zue=C$zut._getListenerID();var C$zui=this._listenersMap[C$zue];C$zui||(C$zui=new C$zuuDs,this._listenersMap[C$zue]=C$zui),C$zui.push(C$zut),0===C$zut._getFixedPriority()?(this._setDirty(C$zue,this.DIRTY_SCENE_GRAPH_PRIORITY),null===(C$zui=C$zut._getSceneGraphPriority())&&cc.logID(3507),this._associateNodeAndEventListener(C$zui,C$zut),C$zui.activeInHierarchy&&this.resumeTarget(C$zui)):this._setDirty(C$zue,this.DIRTY_FIXED_PRIORITY)},_getListeners:function(C$zut){return this._listenersMap[C$zut]},_updateDirtyFlagForSceneGraph:function(){for(var C$zut in this._dirtyListeners)this._setDirty(C$zut,this.DIRTY_SCENE_GRAPH_PRIORITY);this._dirtyListeners={}},_removeAllListenersInVector:function(C$zut){var C$zue;if(C$zut)for(var C$zui=C$zut.length-1;0<=C$zui;C$zui--)(C$zue=C$zut[C$zui])._setRegistered(!1),null!=C$zue._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$zue._getSceneGraphPriority(),C$zue),C$zue._setSceneGraphPriority(null)),0===this._inDispatch&&cc.js.array.removeAt(C$zut,C$zui)},_removeListenersForListenerID:function(C$zut){var C$zue,C$zui=this._listenersMap[C$zut];var C$zur,C$zun;C$zui&&(C$zur=C$zui.getFixedPriorityListeners(),C$zun=C$zui.getSceneGraphPriorityListeners(),this._removeAllListenersInVector(C$zun),this._removeAllListenersInVector(C$zur),delete this._priorityDirtyFlagMap[C$zut],this._inDispatch||(C$zui.clear(),delete this._listenersMap[C$zut]));var C$zua,C$zuo=this._toAddedListeners;for(C$zue=C$zuo.length-1;0<=C$zue;C$zue--)(C$zua=C$zuo[C$zue])&&C$zua._getListenerID()===C$zut&&cc.js.array.removeAt(C$zuo,C$zue)},_sortEventListeners:function(C$zut){var C$zue=this.DIRTY_NONE,C$zui=this._priorityDirtyFlagMap;(C$zue=C$zui[C$zut]?C$zui[C$zut]:C$zue)!==this.DIRTY_NONE&&(C$zui[C$zut]=this.DIRTY_NONE,C$zue&this.DIRTY_FIXED_PRIORITY&&this._sortListenersOfFixedPriority(C$zut),C$zue&this.DIRTY_SCENE_GRAPH_PRIORITY&&cc.director.getScene()&&this._sortListenersOfSceneGraphPriority(C$zut))},_sortListenersOfSceneGraphPriority:function(C$zut){C$zut=this._getListeners(C$zut);var C$zue;!C$zut||(C$zue=C$zut.getSceneGraphPriorityListeners())&&0!==C$zue.length&&C$zut.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes)},_sortEventListenersOfSceneGraphPriorityDes:function(C$zut,C$zue){var C$zui=C$zut._getSceneGraphPriority(),C$zur=C$zue._getSceneGraphPriority();if(!(C$zue&&C$zur&&C$zur._activeInHierarchy&&null!==C$zur._parent))return-1;if(!C$zut||!C$zui||!C$zui._activeInHierarchy||null===C$zui._parent)return 1;var C$zun=C$zui,C$zua=C$zur,C$zuo=!1;for(;C$zun._parent._id!==C$zua._parent._id;)C$zun=null===C$zun._parent._parent?(C$zuo=!0,C$zur):C$zun._parent,C$zua=null===C$zua._parent._parent?(C$zuo=!0,C$zui):C$zua._parent;if(C$zun._id===C$zua._id){if(C$zun._id===C$zur._id)return-1;if(C$zun._id===C$zui._id)return 1}return C$zuo?C$zun._localZOrder-C$zua._localZOrder:C$zua._localZOrder-C$zun._localZOrder},_sortListenersOfFixedPriority:function(C$zut){C$zut=this._listenersMap[C$zut];if(C$zut){var C$zue=C$zut.getFixedPriorityListeners();if(C$zue&&0!==C$zue.length){C$zue.sort(this._sortListenersOfFixedPriorityAsc);var C$zui=0;for(var C$zur=C$zue.length;C$zui<C$zur&&!(0<=C$zue[C$zui]._getFixedPriority());)++C$zui;C$zut.gt0Index=C$zui}}},_sortListenersOfFixedPriorityAsc:function(C$zut,C$zue){return C$zut._getFixedPriority()-C$zue._getFixedPriority()},_onUpdateListeners:function(C$zut){var C$zue=C$zut.getFixedPriorityListeners();var C$zui=C$zut.getSceneGraphPriorityListeners();var C$zur,C$zun,C$zua,C$zuo=this._toRemovedListeners;if(C$zui)for(C$zur=C$zui.length-1;0<=C$zur;C$zur--)(C$zun=C$zui[C$zur])._isRegistered()||(cc.js.array.removeAt(C$zui,C$zur),-1!==(C$zua=C$zuo.indexOf(C$zun))&&C$zuo.splice(C$zua,1));if(C$zue)for(C$zur=C$zue.length-1;0<=C$zur;C$zur--)(C$zun=C$zue[C$zur])._isRegistered()||(cc.js.array.removeAt(C$zue,C$zur),-1!==(C$zua=C$zuo.indexOf(C$zun))&&C$zuo.splice(C$zua,1));C$zui&&0===C$zui.length&&C$zut.clearSceneGraphListeners(),C$zue&&0===C$zue.length&&C$zut.clearFixedListeners()},frameUpdateListeners:function(){var C$zut=this._listenersMap,C$zue=this._priorityDirtyFlagMap;for(var C$zui in C$zut)C$zut[C$zui].empty()&&(delete C$zue[C$zui],delete C$zut[C$zui]);var C$zur=this._toAddedListeners;if(0!==C$zur.length){for(var C$zun=0,C$zua=C$zur.length;C$zun<C$zua;C$zun++)this._forceAddEventListener(C$zur[C$zun]);C$zur.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()},_updateTouchListeners:function(C$zut){var C$zue=this._inDispatch;if(cc.assertID(0<C$zue,3508),!(1<C$zue)){var C$zui;(C$zui=this._listenersMap[C$zul.TOUCH_ONE_BY_ONE])&&this._onUpdateListeners(C$zui),(C$zui=this._listenersMap[C$zul.TOUCH_ALL_AT_ONCE])&&this._onUpdateListeners(C$zui),cc.assertID(1===C$zue,3509);var C$zur=this._toAddedListeners;if(0!==C$zur.length){for(var C$zun=0,C$zua=C$zur.length;C$zun<C$zua;C$zun++)this._forceAddEventListener(C$zur[C$zun]);this._toAddedListeners.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}},_cleanToRemovedListeners:function(){var C$zut=this._toRemovedListeners;for(var C$zue=0;C$zue<C$zut.length;C$zue++){var C$zui=C$zut[C$zue];var C$zur=this._listenersMap[C$zui._getListenerID()];var C$zun,C$zua;C$zur&&(C$zua=C$zur.getFixedPriorityListeners(),(C$zur=C$zur.getSceneGraphPriorityListeners())&&-1!==(C$zun=C$zur.indexOf(C$zui))&&C$zur.splice(C$zun,1),C$zua&&-1!==(C$zun=C$zua.indexOf(C$zui))&&C$zua.splice(C$zun,1))}C$zut.length=0},_onTouchEventCallback:function(C$zut,C$zue){if(!C$zut._isRegistered())return!1;var C$zui=C$zue.event,C$zur=C$zui.currentTouch;C$zui.currentTarget=C$zut._node;var C$zun,C$zua=!1;var C$zuo=C$zui.getEventCode(),C$zus=cc.Event.EventTouch;if(C$zuo===C$zus.BEGAN){if(!cc.macro.ENABLE_MULTI_TOUCH&&C$zuh._currentTouch){var C$zuc=C$zuh._currentTouchListener._node;if(C$zuc&&C$zuc.activeInHierarchy)return!1}C$zut.onTouchBegan&&(C$zua=C$zut.onTouchBegan(C$zur,C$zui))&&C$zut._registered&&(C$zut._claimedTouches.push(C$zur),C$zuh._currentTouchListener=C$zut,C$zuh._currentTouch=C$zur)}else if(0<C$zut._claimedTouches.length&&-1!==(C$zun=C$zut._claimedTouches.indexOf(C$zur))){if(C$zua=!0,!cc.macro.ENABLE_MULTI_TOUCH&&C$zuh._currentTouch&&C$zuh._currentTouch!==C$zur)return!1;C$zuo===C$zus.MOVED&&C$zut.onTouchMoved?C$zut.onTouchMoved(C$zur,C$zui):C$zuo===C$zus.ENDED?(C$zut.onTouchEnded&&C$zut.onTouchEnded(C$zur,C$zui),C$zut._registered&&C$zut._claimedTouches.splice(C$zun,1),C$zuh._clearCurTouch()):C$zuo===C$zus.CANCELED&&(C$zut.onTouchCancelled&&C$zut.onTouchCancelled(C$zur,C$zui),C$zut._registered&&C$zut._claimedTouches.splice(C$zun,1),C$zuh._clearCurTouch())}return C$zui.isStopped()?(C$zuh._updateTouchListeners(C$zui),!0):!(!C$zua||!C$zut.swallowTouches)&&(C$zue.needsMutableSet&&C$zue.touches.splice(C$zur,1),!0)},_dispatchTouchEvent:function(C$zut){this._sortEventListeners(C$zul.TOUCH_ONE_BY_ONE),this._sortEventListeners(C$zul.TOUCH_ALL_AT_ONCE);var C$zue=this._getListeners(C$zul.TOUCH_ONE_BY_ONE);var C$zui=this._getListeners(C$zul.TOUCH_ALL_AT_ONCE);if(null!==C$zue||null!==C$zui){var C$zur=C$zut.getTouches(),C$zun=cc.js.array.copy(C$zur);var C$zua={event:C$zut,needsMutableSet:C$zue&&C$zui,touches:C$zun,selTouch:null};if(C$zue)for(var C$zuo=0;C$zuo<C$zur.length;C$zuo++)C$zut.currentTouch=C$zur[C$zuo],C$zut._propagationStopped=C$zut._propagationImmediateStopped=!1,this._dispatchEventToListeners(C$zue,this._onTouchEventCallback,C$zua);C$zui&&0<C$zun.length&&(this._dispatchEventToListeners(C$zui,this._onTouchesEventCallback,{event:C$zut,touches:C$zun}),C$zut.isStopped())||this._updateTouchListeners(C$zut)}},_onTouchesEventCallback:function(C$zut,C$zue){if(!C$zut._registered)return!1;var C$zui=cc.Event.EventTouch,C$zur=C$zue.event,C$zue=C$zue.touches,C$zun=C$zur.getEventCode();return C$zur.currentTarget=C$zut._node,C$zun===C$zui.BEGAN&&C$zut.onTouchesBegan?C$zut.onTouchesBegan(C$zue,C$zur):C$zun===C$zui.MOVED&&C$zut.onTouchesMoved?C$zut.onTouchesMoved(C$zue,C$zur):C$zun===C$zui.ENDED&&C$zut.onTouchesEnded?C$zut.onTouchesEnded(C$zue,C$zur):C$zun===C$zui.CANCELED&&C$zut.onTouchesCancelled&&C$zut.onTouchesCancelled(C$zue,C$zur),!!C$zur.isStopped()&&(C$zuh._updateTouchListeners(C$zur),!0)},_associateNodeAndEventListener:function(C$zut,C$zue){var C$zui=this._nodeListenersMap[C$zut._id];C$zui||(this._nodeListenersMap[C$zut._id]=C$zui=[]),C$zui.push(C$zue)},_dissociateNodeAndEventListener:function(C$zut,C$zue){var C$zui=this._nodeListenersMap[C$zut._id];C$zui&&(cc.js.array.remove(C$zui,C$zue),0===C$zui.length&&delete this._nodeListenersMap[C$zut._id])},_dispatchEventToListeners:function(C$zut,C$zue,C$zui){var C$zur=!1;var C$zun=C$zut.getFixedPriorityListeners();var C$zua=C$zut.getSceneGraphPriorityListeners();var C$zuo,C$zus,C$zuc=0;if(C$zun&&0!==C$zun.length)for(;C$zuc<C$zut.gt0Index;++C$zuc)if((C$zus=C$zun[C$zuc]).isEnabled()&&!C$zus._isPaused()&&C$zus._isRegistered()&&C$zue(C$zus,C$zui)){C$zur=!0;break}if(C$zua&&!C$zur)for(C$zuo=0;C$zuo<C$zua.length;C$zuo++)if((C$zus=C$zua[C$zuo]).isEnabled()&&!C$zus._isPaused()&&C$zus._isRegistered()&&C$zue(C$zus,C$zui)){C$zur=!0;break}if(C$zun&&!C$zur)for(;C$zuc<C$zun.length;++C$zuc)if((C$zus=C$zun[C$zuc]).isEnabled()&&!C$zus._isPaused()&&C$zus._isRegistered()&&C$zue(C$zus,C$zui)){C$zur=!0;break}},_setDirty:function(C$zut,C$zue){var C$zui=this._priorityDirtyFlagMap;null==C$zui[C$zut]?C$zui[C$zut]=C$zue:C$zui[C$zut]=C$zue|C$zui[C$zut]},_sortNumberAsc:function(C$zut,C$zue){return C$zut-C$zue},hasEventListener:function(C$zut){return!!this._getListeners(C$zut)},addListener:function(C$zut,C$zue){if(cc.assertID(C$zut&&C$zue,3503),cc.js.isNumber(C$zue)||C$zue instanceof cc._BaseNode){if(C$zut instanceof cc.EventListener){if(C$zut._isRegistered())return void cc.logID(3505)}else cc.assertID(!cc.js.isNumber(C$zue),3504),C$zut=cc.EventListener.create(C$zut);if(C$zut.checkAvailable()){if(cc.js.isNumber(C$zue)){if(0===C$zue)return void cc.logID(3500);C$zut._setSceneGraphPriority(null),C$zut._setFixedPriority(C$zue),C$zut._setRegistered(!0),C$zut._setPaused(!1),this._addListener(C$zut)}else C$zut._setSceneGraphPriority(C$zue),C$zut._setFixedPriority(0),C$zut._setRegistered(!0),this._addListener(C$zut);return C$zut}}else cc.warnID(3506)},addCustomListener:function(C$zut,C$zue){C$zut=new cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:C$zut,callback:C$zue});return this.addListener(C$zut,1),C$zut},removeListener:function(C$zut){if(null!=C$zut){var C$zue,C$zui=this._listenersMap;for(var C$zur in C$zui){var C$zun=C$zui[C$zur];var C$zua=C$zun.getFixedPriorityListeners(),C$zuo=C$zun.getSceneGraphPriorityListeners();if((C$zue=this._removeListenerInVector(C$zuo,C$zut))?this._setDirty(C$zut._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY):(C$zue=this._removeListenerInVector(C$zua,C$zut))&&this._setDirty(C$zut._getListenerID(),this.DIRTY_FIXED_PRIORITY),C$zun.empty()&&(delete this._priorityDirtyFlagMap[C$zut._getListenerID()],delete C$zui[C$zur]),C$zue)break}if(!C$zue){var C$zus=this._toAddedListeners;for(var C$zuc=C$zus.length-1;0<=C$zuc;C$zuc--){var C$zul=C$zus[C$zuc];if(C$zul===C$zut){cc.js.array.removeAt(C$zus,C$zuc),C$zul._setRegistered(!1);break}}}this._currentTouchListener===C$zut&&this._clearCurTouch()}},_clearCurTouch:function(){this._currentTouchListener=null,this._currentTouch=null},_removeListenerInCallback:function(C$zut,C$zue){if(null==C$zut)return!1;for(var C$zui=C$zut.length-1;0<=C$zui;C$zui--){var C$zur=C$zut[C$zui];if(C$zur._onCustomEvent===C$zue||C$zur._onEvent===C$zue)return C$zur._setRegistered(!1),null!=C$zur._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$zur._getSceneGraphPriority(),C$zur),C$zur._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(C$zut,C$zui):this._toRemovedListeners.push(C$zur),!0}return!1},_removeListenerInVector:function(C$zut,C$zue){if(null==C$zut)return!1;for(var C$zui=C$zut.length-1;0<=C$zui;C$zui--){var C$zur=C$zut[C$zui];if(C$zur===C$zue)return C$zur._setRegistered(!1),null!=C$zur._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$zur._getSceneGraphPriority(),C$zur),C$zur._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(C$zut,C$zui):this._toRemovedListeners.push(C$zur),!0}return!1},removeListeners:function(C$zut,C$zue){if(cc.js.isNumber(C$zut)||C$zut instanceof cc._BaseNode)if(void 0!==C$zut._id){var C$zui,C$zur=this._nodeListenersMap[C$zut._id];if(C$zur){var C$zun=cc.js.array.copy(C$zur);for(C$zui=0;C$zui<C$zun.length;C$zui++)this.removeListener(C$zun[C$zui]);delete this._nodeListenersMap[C$zut._id]}var C$zua=this._toAddedListeners;for(C$zui=0;C$zui<C$zua.length;){var C$zuo=C$zua[C$zui];C$zuo._getSceneGraphPriority()===C$zut?(C$zuo._setSceneGraphPriority(null),C$zuo._setRegistered(!1),C$zua.splice(C$zui,1)):++C$zui}if(!0===C$zue){var C$zus,C$zuc=C$zut.children;for(C$zui=0,C$zus=C$zuc.length;C$zui<C$zus;C$zui++)this.removeListeners(C$zuc[C$zui],!0)}}else C$zut===cc.EventListener.TOUCH_ONE_BY_ONE?this._removeListenersForListenerID(C$zul.TOUCH_ONE_BY_ONE):C$zut===cc.EventListener.TOUCH_ALL_AT_ONCE?this._removeListenersForListenerID(C$zul.TOUCH_ALL_AT_ONCE):C$zut===cc.EventListener.MOUSE?this._removeListenersForListenerID(C$zul.MOUSE):C$zut===cc.EventListener.ACCELERATION?this._removeListenersForListenerID(C$zul.ACCELERATION):C$zut===cc.EventListener.KEYBOARD?this._removeListenersForListenerID(C$zul.KEYBOARD):cc.logID(3501);else cc.warnID(3506)},removeCustomListeners:function(C$zut){this._removeListenersForListenerID(C$zut)},removeAllListeners:function(){var C$zut=this._listenersMap,C$zue=this._internalCustomListenerIDs;for(var C$zui in C$zut)-1===C$zue.indexOf(C$zui)&&this._removeListenersForListenerID(C$zui)},setPriority:function(C$zut,C$zue){if(null!=C$zut){var C$zui=this._listenersMap;for(var C$zur in C$zui){C$zur=C$zui[C$zur].getFixedPriorityListeners();if(C$zur)if(-1!==C$zur.indexOf(C$zut))return null!=C$zut._getSceneGraphPriority()&&cc.logID(3502),void(C$zut._getFixedPriority()!==C$zue&&(C$zut._setFixedPriority(C$zue),this._setDirty(C$zut._getListenerID(),this.DIRTY_FIXED_PRIORITY)))}}},setEnabled:function(C$zut){this._isEnabled=C$zut},isEnabled:function(){return this._isEnabled},dispatchEvent:function(C$zut){if(this._isEnabled)if(this._updateDirtyFlagForSceneGraph(),this._inDispatch++,C$zut&&C$zut.getType){if(C$zut.getType().startsWith(cc.Event.TOUCH))return this._dispatchTouchEvent(C$zut),void this._inDispatch--;C$zue=C$zut,C$zui=cc.Event;C$zue=(C$zue=C$zue.type)===C$zui.ACCELERATION?C$zul.ACCELERATION:C$zue===C$zui.KEYBOARD?C$zul.KEYBOARD:C$zue.startsWith(C$zui.MOUSE)?C$zul.MOUSE:(C$zue.startsWith(C$zui.TOUCH)&&cc.logID(2e3),"");var C$zue;this._sortEventListeners(C$zue);var C$zui=this._listenersMap[C$zue];null!=C$zui&&(this._dispatchEventToListeners(C$zui,this._onListenerCallback,C$zut),this._onUpdateListeners(C$zui)),this._inDispatch--}else cc.errorID(3511)},_onListenerCallback:function(C$zut,C$zue){return C$zue.currentTarget=C$zut._target,C$zut._onEvent(C$zue),C$zue.isStopped()},dispatchCustomEvent:function(C$zut,C$zue){C$zut=new cc.Event.EventCustom(C$zut);C$zut.setUserData(C$zue),this.dispatchEvent(C$zut)}};C$zur.get(cc,"eventManager",function(){return cc.errorID(1405,"cc.eventManager","cc.EventTarget or cc.systemEvent"),C$zuh}),C$zue.exports=cc.internal.eventManager=C$zuh},{"../platform/js":209,"./CCEventListener":110}],112:[function(C$zut,C$zue,C$zui){"use strict";cc.Touch=function(C$zut,C$zue,C$zui){this._lastModified=0,this.setTouchInfo(C$zui,C$zut,C$zue)},cc.Touch.prototype={constructor:cc.Touch,getLocation:function(){return cc.v2(this._point.x,this._point.y)},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return cc.v2(this._prevPoint.x,this._prevPoint.y)},getStartLocation:function(){return cc.v2(this._startPoint.x,this._startPoint.y)},getDelta:function(){return this._point.sub(this._prevPoint)},getLocationInView:function(){return cc.v2(this._point.x,cc.view._designResolutionSize.height-this._point.y)},getPreviousLocationInView:function(){return cc.v2(this._prevPoint.x,cc.view._designResolutionSize.height-this._prevPoint.y)},getStartLocationInView:function(){return cc.v2(this._startPoint.x,cc.view._designResolutionSize.height-this._startPoint.y)},getID:function(){return this._id},setTouchInfo:function(C$zut,C$zue,C$zui){this._prevPoint=this._point,this._point=cc.v2(C$zue||0,C$zui||0),this._id=C$zut,this._startPointCaptured||(this._startPoint=cc.v2(this._point),cc.view._convertPointWithScale(this._startPoint),this._startPointCaptured=!0)},_setPoint:function(C$zut,C$zue){void 0===C$zue?(this._point.x=C$zut.x,this._point.y=C$zut.y):(this._point.x=C$zut,this._point.y=C$zue)},_setPrevPoint:function(C$zut,C$zue){this._prevPoint=void 0===C$zue?cc.v2(C$zut.x,C$zut.y):cc.v2(C$zut||0,C$zue||0)}}},{}],113:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCEvent"),C$zut("./CCTouch"),C$zut("./CCEventListener");C$zut=C$zut("./CCEventManager");C$zue.exports=C$zut},{"./CCEvent":109,"./CCEventListener":110,"./CCEventManager":111,"./CCTouch":112}],114:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.js;var C$zun=C$zut("../platform/callbacks-invoker");function EventListeners(){C$zun.call(this)}C$zur.extend(EventListeners,C$zun),EventListeners.prototype.emit=function(C$zut,C$zue){var C$zui=C$zut.type;C$zui=this._callbackTable[C$zui];if(C$zui){var C$zur=!C$zui.isInvoking;C$zui.isInvoking=!0;var C$zun=C$zui.callbackInfos;for(var C$zua=0,C$zuo=C$zun.length;C$zua<C$zuo;++C$zua){var C$zus=C$zun[C$zua];if(C$zus&&C$zus.callback&&(C$zus.callback.call(C$zus.target,C$zut,C$zue),C$zut._propagationImmediateStopped))break}C$zur&&(C$zui.isInvoking=!1,C$zui.containCanceled&&C$zui.purgeCanceled())}},C$zue.exports=EventListeners},{"../platform/callbacks-invoker":202}],115:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../platform/js");var C$zun=C$zut("../platform/callbacks-invoker");var C$zuo=C$zur.array.fastRemove;function EventTarget(){C$zun.call(this)}C$zur.extend(EventTarget,C$zun);C$zut=EventTarget.prototype;C$zut.__on=C$zut.on,C$zut.on=function(C$zut,C$zue,C$zui,C$zur){if(C$zue)return this.hasEventListener(C$zut,C$zue,C$zui)||(this.__on(C$zut,C$zue,C$zui,C$zur),C$zui&&C$zui.__eventTargets&&C$zui.__eventTargets.push(this)),C$zue;cc.errorID(6800)},C$zut.__off=C$zut.off,C$zut.off=function(C$zut,C$zue,C$zui){if(C$zue)this.__off(C$zut,C$zue,C$zui),C$zui&&C$zui.__eventTargets&&C$zuo(C$zui.__eventTargets,this);else{C$zue=this._callbackTable[C$zut];if(C$zue){var C$zur=C$zue.callbackInfos;for(var C$zun=0;C$zun<C$zur.length;++C$zun){var C$zua=C$zur[C$zun]&&C$zur[C$zun].target;C$zua&&C$zua.__eventTargets&&C$zuo(C$zua.__eventTargets,this)}this.removeAll(C$zut)}}},C$zut.targetOff=function(C$zut){this.removeAll(C$zut),C$zut&&C$zut.__eventTargets&&C$zuo(C$zut.__eventTargets,this)},C$zut.once=function(C$zut,C$zue,C$zui){this.on(C$zut,C$zue,C$zui,!0)},C$zut.dispatchEvent=function(C$zut){this.emit(C$zut.type,C$zut)},cc.EventTarget=C$zue.exports=EventTarget},{"../platform/callbacks-invoker":202,"../platform/js":209}],116:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("../platform/js");cc.Event=function(C$zut,C$zue){this.type=C$zut,this.bubbles=!!C$zue,this.target=null,this.currentTarget=null,this.eventPhase=0,this._propagationStopped=!1,this._propagationImmediateStopped=!1},cc.Event.prototype={constructor:cc.Event,unuse:function(){this.type=cc.Event.NO_TYPE,this.target=null,this.currentTarget=null,this.eventPhase=cc.Event.NONE,this._propagationStopped=!1,this._propagationImmediateStopped=!1},reuse:function(C$zut,C$zue){this.type=C$zut,this.bubbles=C$zue||!1},stopPropagation:function(){this._propagationStopped=!0},stopPropagationImmediate:function(){this._propagationImmediateStopped=!0},isStopped:function(){return this._propagationStopped||this._propagationImmediateStopped},getCurrentTarget:function(){return this.currentTarget},getType:function(){return this.type}},cc.Event.NO_TYPE="no_type",cc.Event.TOUCH="touch",cc.Event.MOUSE="mouse",cc.Event.KEYBOARD="keyboard",cc.Event.ACCELERATION="acceleration",cc.Event.NONE=0,cc.Event.CAPTURING_PHASE=1,cc.Event.AT_TARGET=2,cc.Event.BUBBLING_PHASE=3;function C$zuezs(C$zut,C$zue){cc.Event.call(this,C$zut,C$zue),this.detail=null}C$zut.extend(C$zuezs,cc.Event),(C$zuezs.prototype.reset=C$zuezs).prototype.setUserData=function(C$zut){this.detail=C$zut},C$zuezs.prototype.getUserData=function(){return this.detail},C$zuezs.prototype.getEventName=cc.Event.prototype.getType;var C$zur=new C$zut.Pool(10);C$zuezs.put=function(C$zut){C$zur.put(C$zut)},C$zuezs.get=function(C$zut,C$zue){var C$zui=C$zur._get();return C$zui?C$zui.reset(C$zut,C$zue):C$zui=new C$zuezs(C$zut,C$zue),C$zui},cc.Event.EventCustom=C$zuezs,C$zue.exports=cc.Event},{"../platform/js":209}],117:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./event"),C$zut("./event-listeners"),C$zut("./event-target"),C$zut("./system-event")},{"./event":116,"./event-listeners":114,"./event-target":115,"./system-event":118}],118:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../event/event-target");var C$zun=C$zut("../event-manager");var C$zua=C$zut("../platform/CCInputManager");var C$zuo=cc.Enum({KEY_DOWN:"keydown",KEY_UP:"keyup",DEVICEMOTION:"devicemotion"});var C$zus=null;var C$zuc=null;C$zut=cc.Class({name:"SystemEvent",extends:C$zur,statics:{EventType:C$zuo},setAccelerometerEnabled:function(C$zut){C$zut&&window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then(function(C$zut){console.log("Device Motion Event request permission: "+C$zut),C$zua.setAccelerometerEnabled("granted"===C$zut)}):C$zua.setAccelerometerEnabled(C$zut)},setAccelerometerInterval:function(C$zut){C$zua.setAccelerometerInterval(C$zut)},on:function(C$zut,C$zue,C$zui,C$zur){this._super(C$zut,C$zue,C$zui,C$zur),C$zut!==C$zuo.KEY_DOWN&&C$zut!==C$zuo.KEY_UP||(C$zus=C$zus||cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyPressed:function(C$zut,C$zue){C$zue.type=C$zuo.KEY_DOWN,cc.systemEvent.dispatchEvent(C$zue)},onKeyReleased:function(C$zut,C$zue){C$zue.type=C$zuo.KEY_UP,cc.systemEvent.dispatchEvent(C$zue)}}),C$zun.hasEventListener(cc.EventListener.ListenerID.KEYBOARD)||C$zun.addListener(C$zus,1)),C$zut===C$zuo.DEVICEMOTION&&(C$zuc=C$zuc||cc.EventListener.create({event:cc.EventListener.ACCELERATION,callback:function(C$zut,C$zue){C$zue.type=C$zuo.DEVICEMOTION,cc.systemEvent.dispatchEvent(C$zue)}}),C$zun.hasEventListener(cc.EventListener.ListenerID.ACCELERATION)||C$zun.addListener(C$zuc,1))},off:function(C$zut,C$zue,C$zui){this._super(C$zut,C$zue,C$zui),!C$zus||C$zut!==C$zuo.KEY_DOWN&&C$zut!==C$zuo.KEY_UP||(C$zue=this.hasEventListener(C$zuo.KEY_DOWN),C$zui=this.hasEventListener(C$zuo.KEY_UP),C$zue||C$zui||C$zun.removeListener(C$zus)),C$zuc&&C$zut===C$zuo.DEVICEMOTION&&C$zun.removeListener(C$zuc)}});cc.SystemEvent=C$zue.exports=C$zut,cc.systemEvent=new cc.SystemEvent},{"../event-manager":113,"../event/event-target":115,"../platform/CCInputManager":193}],119:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zus=_interopRequireDefault(C$zut("../value-types/vec3"));var C$zur=_interopRequireDefault(C$zut("../value-types/mat3"));var C$zuo=_interopRequireDefault(C$zut("./enums"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}var C$zun=new C$zus.default;var C$zua=new C$zus.default;var C$zuc=new C$zur.default;function aabb(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=C$zuo.default.SHAPE_AABB,this.center=new C$zus.default(C$zut,C$zue,C$zui),this.halfExtents=new C$zus.default(C$zur,C$zun,C$zua)}aabb.create=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){return new aabb(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua)},aabb.clone=function(C$zut){return new aabb(C$zut.center.x,C$zut.center.y,C$zut.center.z,C$zut.halfExtents.x,C$zut.halfExtents.y,C$zut.halfExtents.z)},aabb.copy=function(C$zut,C$zue){return C$zus.default.copy(C$zut.center,C$zue.center),C$zus.default.copy(C$zut.halfExtents,C$zue.halfExtents),C$zut},aabb.fromPoints=function(C$zut,C$zue,C$zui){return C$zus.default.scale(C$zut.center,C$zus.default.add(C$zun,C$zue,C$zui),.5),C$zus.default.scale(C$zut.halfExtents,C$zus.default.sub(C$zua,C$zui,C$zue),.5),C$zut},aabb.set=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){return C$zus.default.set(C$zut.center,C$zue,C$zui,C$zur),C$zus.default.set(C$zut.halfExtents,C$zun,C$zua,C$zuo),C$zut},(C$zut=aabb.prototype).getBoundary=function(C$zut,C$zue){C$zus.default.sub(C$zut,this.center,this.halfExtents),C$zus.default.add(C$zue,this.center,this.halfExtents)},C$zut.transform=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua,C$zuo;C$zus.default.transformMat4((C$zun=C$zun||this).center,this.center,C$zut),C$zun=C$zun.halfExtents,C$zua=this.halfExtents,C$zut=C$zut,C$zuo=C$zuc.m,C$zut=C$zut.m,C$zuo[0]=Math.abs(C$zut[0]),C$zuo[1]=Math.abs(C$zut[1]),C$zuo[2]=Math.abs(C$zut[2]),C$zuo[3]=Math.abs(C$zut[4]),C$zuo[4]=Math.abs(C$zut[5]),C$zuo[5]=Math.abs(C$zut[6]),C$zuo[6]=Math.abs(C$zut[8]),C$zuo[7]=Math.abs(C$zut[9]),C$zuo[8]=Math.abs(C$zut[10]),C$zus.default.transformMat3(C$zun,C$zua,C$zuc)},C$zui.default=aabb,C$zue.exports=C$zui.default},{"../value-types/mat3":280,"../value-types/vec3":289,"./enums":121}],120:[function(C$zue,C$zui,C$zut){"use strict";C$zut.__esModule=!0,C$zut.point_plane=point_plane,C$zut.pt_point_plane=function(C$zut,C$zue,C$zui){var C$zur=point_plane(C$zue,C$zui);return C$zuo.Vec3.subtract(C$zut,C$zue,C$zuo.Vec3.multiplyScalar(C$zut,C$zui.n,C$zur))},C$zut.pt_point_aabb=function(C$zut,C$zue,C$zui){return C$zuo.Vec3.copy(C$zut,C$zue),C$zuo.Vec3.subtract(C$zur,C$zui.center,C$zui.halfExtents),C$zuo.Vec3.add(C$zun,C$zui.center,C$zui.halfExtents),C$zut.x=(C$zut.x<C$zur.x?C$zur:C$zut).x,C$zut.y=(C$zut.y<C$zur.x?C$zur:C$zut).y,C$zut.z=(C$zut.z<C$zur.x?C$zur:C$zut).z,C$zut.x=(C$zut.x>C$zun.x?C$zun:C$zut).x,C$zut.y=(C$zut.y>C$zun.x?C$zun:C$zut).y,C$zut.z=(C$zut.z>C$zun.x?C$zun:C$zut).z,C$zut},C$zut.pt_point_obb=function(C$zut,C$zue,C$zui){var C$zur=C$zui.orientation.m;C$zuo.Vec3.set(C$zus,C$zur[0],C$zur[1],C$zur[2]),C$zuo.Vec3.set(C$zuc,C$zur[3],C$zur[4],C$zur[5]),C$zuo.Vec3.set(C$zul,C$zur[6],C$zur[7],C$zur[8]),C$zuu[0]=C$zus,C$zuu[1]=C$zuc,C$zuu[2]=C$zul,C$zu_[0]=C$zui.halfExtents.x,C$zu_[1]=C$zui.halfExtents.y,C$zu_[2]=C$zui.halfExtents.z,C$zuo.Vec3.subtract(C$zuh,C$zue,C$zui.center),C$zuo.Vec3.set(C$zut,C$zui.center.x,C$zui.center.y,C$zui.center.z);for(var C$zun=0;C$zun<3;C$zun++){var C$zua=C$zuo.Vec3.dot(C$zuh,C$zuu[C$zun]);(C$zua=C$zua>C$zu_[C$zun]?C$zu_[C$zun]:C$zua)<-C$zu_[C$zun]&&(C$zua=-C$zu_[C$zun]),C$zut.x+=C$zua*C$zuu[C$zun].x,C$zut.y+=C$zua*C$zuu[C$zun].y,C$zut.z+=C$zua*C$zuu[C$zun].z}return C$zut};var C$zuo=C$zue("../value-types");var C$zus=new C$zuo.Vec3;var C$zuc=new C$zuo.Vec3;var C$zul=new C$zuo.Vec3;var C$zuh=new C$zuo.Vec3;var C$zur=new C$zuo.Vec3;var C$zun=new C$zuo.Vec3;var C$zuu=new Array(3);var C$zu_=new Array(3);function point_plane(C$zut,C$zue){return C$zuo.Vec3.dot(C$zue.n,C$zut)-C$zue.d}},{"../value-types":279}],121:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zui.default={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256},C$zue.exports=C$zui.default},{}],122:[function(C$zut,C$zur,C$zue){"use strict";C$zue.__esModule=!0,C$zue.frustum=void 0;var C$zuo=C$zut("../value-types");var C$zus=_interopRequireDefault(C$zut("./enums"));var C$zuc=_interopRequireDefault(C$zut("./plane"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}var C$zul=new Array(8);C$zul[0]=new C$zuo.Vec3(1,1,1),C$zul[1]=new C$zuo.Vec3(-1,1,1),C$zul[2]=new C$zuo.Vec3(-1,-1,1),C$zul[3]=new C$zuo.Vec3(1,-1,1),C$zul[4]=new C$zuo.Vec3(1,1,-1),C$zul[5]=new C$zuo.Vec3(-1,1,-1),C$zul[6]=new C$zuo.Vec3(-1,-1,-1),C$zul[7]=new C$zuo.Vec3(1,-1,-1);frustum.create=function(){return new frustum},frustum.clone=function(C$zut){return frustum.copy(new frustum,C$zut)},frustum.copy=function(C$zut,C$zue){C$zut._type=C$zue._type;for(var C$zui=0;C$zui<6;++C$zui)C$zuc.default.copy(C$zut.planes[C$zui],C$zue.planes[C$zui]);for(var C$zur=0;C$zur<8;++C$zur)C$zuo.Vec3.copy(C$zut.vertices[C$zur],C$zue.vertices[C$zur]);return C$zut},C$zut=frustum,(C$zui=[{key:"accurate",set:function(C$zut){this._type=C$zut?C$zus.default.SHAPE_FRUSTUM_ACCURATE:C$zus.default.SHAPE_FRUSTUM}}])&&_defineProperties(C$zut.prototype,C$zui),C$zun&&_defineProperties(C$zut,C$zun),(C$zui=frustum.prototype).update=function(C$zut,C$zue){C$zut=C$zut.m;if(C$zuo.Vec3.set(this.planes[0].n,C$zut[3]+C$zut[0],C$zut[7]+C$zut[4],C$zut[11]+C$zut[8]),this.planes[0].d=-(C$zut[15]+C$zut[12]),C$zuo.Vec3.set(this.planes[1].n,C$zut[3]-C$zut[0],C$zut[7]-C$zut[4],C$zut[11]-C$zut[8]),this.planes[1].d=-(C$zut[15]-C$zut[12]),C$zuo.Vec3.set(this.planes[2].n,C$zut[3]+C$zut[1],C$zut[7]+C$zut[5],C$zut[11]+C$zut[9]),this.planes[2].d=-(C$zut[15]+C$zut[13]),C$zuo.Vec3.set(this.planes[3].n,C$zut[3]-C$zut[1],C$zut[7]-C$zut[5],C$zut[11]-C$zut[9]),this.planes[3].d=-(C$zut[15]-C$zut[13]),C$zuo.Vec3.set(this.planes[4].n,C$zut[3]+C$zut[2],C$zut[7]+C$zut[6],C$zut[11]+C$zut[10]),this.planes[4].d=-(C$zut[15]+C$zut[14]),C$zuo.Vec3.set(this.planes[5].n,C$zut[3]-C$zut[2],C$zut[7]-C$zut[6],C$zut[11]-C$zut[10]),this.planes[5].d=-(C$zut[15]-C$zut[14]),this._type===C$zus.default.SHAPE_FRUSTUM_ACCURATE){for(var C$zui=0;C$zui<6;C$zui++){var C$zur=this.planes[C$zui];var C$zun=1/C$zur.n.length();C$zuo.Vec3.multiplyScalar(C$zur.n,C$zur.n,C$zun),C$zur.d*=C$zun}for(var C$zua=0;C$zua<8;C$zua++)C$zuo.Vec3.transformMat4(this.vertices[C$zua],C$zul[C$zua],C$zue)}},C$zui.transform=function(C$zut){if(this._type===C$zus.default.SHAPE_FRUSTUM_ACCURATE){for(var C$zue=0;C$zue<8;C$zue++)C$zuo.Vec3.transformMat4(this.vertices[C$zue],this.vertices[C$zue],C$zut);C$zuc.default.fromPoints(this.planes[0],this.vertices[1],this.vertices[5],this.vertices[6]),C$zuc.default.fromPoints(this.planes[1],this.vertices[3],this.vertices[7],this.vertices[4]),C$zuc.default.fromPoints(this.planes[2],this.vertices[6],this.vertices[7],this.vertices[3]),C$zuc.default.fromPoints(this.planes[3],this.vertices[0],this.vertices[4],this.vertices[5]),C$zuc.default.fromPoints(this.planes[4],this.vertices[2],this.vertices[3],this.vertices[0]),C$zuc.default.fromPoints(this.planes[0],this.vertices[7],this.vertices[6],this.vertices[5])}};C$zut=frustum;function frustum(){this.planes=void 0,this.vertices=void 0,this._type=void 0,this._type=C$zus.default.SHAPE_FRUSTUM,this.planes=new Array(6);for(var C$zut=0;C$zut<6;++C$zut)this.planes[C$zut]=C$zuc.default.create(0,0,0,0);this.vertices=new Array(8);for(var C$zue=0;C$zue<8;++C$zue)this.vertices[C$zue]=new C$zuo.Vec3}var C$zun,C$zui;var C$zuh;(C$zue.frustum=C$zut).createOrtho=(C$zuh=new C$zuo.Vec3,function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){C$zue/=2;C$zui/=2;C$zuo.Vec3.set(C$zuh,C$zue,C$zui,C$zur),C$zuo.Vec3.transformMat4(C$zut.vertices[0],C$zuh,C$zua),C$zuo.Vec3.set(C$zuh,-C$zue,C$zui,C$zur),C$zuo.Vec3.transformMat4(C$zut.vertices[1],C$zuh,C$zua),C$zuo.Vec3.set(C$zuh,-C$zue,-C$zui,C$zur),C$zuo.Vec3.transformMat4(C$zut.vertices[2],C$zuh,C$zua),C$zuo.Vec3.set(C$zuh,C$zue,-C$zui,C$zur),C$zuo.Vec3.transformMat4(C$zut.vertices[3],C$zuh,C$zua),C$zuo.Vec3.set(C$zuh,C$zue,C$zui,C$zun),C$zuo.Vec3.transformMat4(C$zut.vertices[4],C$zuh,C$zua),C$zuo.Vec3.set(C$zuh,-C$zue,C$zui,C$zun),C$zuo.Vec3.transformMat4(C$zut.vertices[5],C$zuh,C$zua),C$zuo.Vec3.set(C$zuh,-C$zue,-C$zui,C$zun),C$zuo.Vec3.transformMat4(C$zut.vertices[6],C$zuh,C$zua),C$zuo.Vec3.set(C$zuh,C$zue,-C$zui,C$zun),C$zuo.Vec3.transformMat4(C$zut.vertices[7],C$zuh,C$zua),C$zuc.default.fromPoints(C$zut.planes[0],C$zut.vertices[1],C$zut.vertices[6],C$zut.vertices[5]),C$zuc.default.fromPoints(C$zut.planes[1],C$zut.vertices[3],C$zut.vertices[4],C$zut.vertices[7]),C$zuc.default.fromPoints(C$zut.planes[2],C$zut.vertices[6],C$zut.vertices[3],C$zut.vertices[7]),C$zuc.default.fromPoints(C$zut.planes[3],C$zut.vertices[0],C$zut.vertices[5],C$zut.vertices[4]),C$zuc.default.fromPoints(C$zut.planes[4],C$zut.vertices[2],C$zut.vertices[0],C$zut.vertices[3]),C$zuc.default.fromPoints(C$zut.planes[0],C$zut.vertices[7],C$zut.vertices[5],C$zut.vertices[6])})},{"../value-types":279,"./enums":121,"./plane":127}],123:[function(C$zut,C$zue,C$zui){"use strict";var C$zur={enums:C$zui.__esModule=!0,Triangle:!0,Aabb:!0,Ray:!0,intersect:!0,Sphere:!0,Obb:!0,Frustum:!0,Line:!0,Plane:!0};C$zui.Plane=C$zui.Line=C$zui.Frustum=C$zui.Obb=C$zui.Sphere=C$zui.intersect=C$zui.Ray=C$zui.Aabb=C$zui.Triangle=C$zui.enums=void 0;var C$zun=_interopRequireDefault(C$zut("./enums"));C$zui.enums=C$zun.default;C$zun=_interopRequireDefault(C$zut("./triangle"));C$zui.Triangle=C$zun.default;C$zun=_interopRequireDefault(C$zut("./aabb"));C$zui.Aabb=C$zun.default;C$zun=_interopRequireDefault(C$zut("./ray"));C$zui.Ray=C$zun.default;C$zun=_interopRequireDefault(C$zut("./intersect"));C$zui.intersect=C$zun.default;C$zun=_interopRequireDefault(C$zut("./sphere"));C$zui.Sphere=C$zun.default;C$zun=_interopRequireDefault(C$zut("./obb"));C$zui.Obb=C$zun.default;C$zun=_interopRequireDefault(C$zut("./frustum"));C$zui.Frustum=C$zun.default;C$zun=_interopRequireDefault(C$zut("./line"));C$zui.Line=C$zun.default;C$zun=_interopRequireDefault(C$zut("./plane"));C$zui.Plane=C$zun.default;var C$zua=C$zut("./distance");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}Object.keys(C$zua).forEach(function(C$zut){"default"!==C$zut&&"__esModule"!==C$zut&&(Object.prototype.hasOwnProperty.call(C$zur,C$zut)||(C$zui[C$zut]=C$zua[C$zut]))}),cc.geomUtils=C$zue.exports},{"./aabb":119,"./distance":120,"./enums":121,"./frustum":122,"./intersect":124,"./line":125,"./obb":126,"./plane":127,"./ray":128,"./sphere":129,"./triangle":130}],124:[function(C$zut,C$zur,C$zun){"use strict";C$zun.__esModule=!0,C$zun.default=void 0;var C$zu_=_interopRequireDefault(C$zut("../../renderer/gfx"));var C$zue=_interopRequireDefault(C$zut("../../renderer/memop/recycle-pool"));var C$zuf=C$zut("../value-types");var C$zul=_interopRequireDefault(C$zut("./aabb"));var C$zua=function(C$zut){if(C$zut&&C$zut.__esModule)return C$zut;if(null===C$zut||"object"!=typeof C$zut&&"function"!=typeof C$zut)return{default:C$zut};var C$zue=_getRequireWildcardCache();if(C$zue&&C$zue.has(C$zut))return C$zue.get(C$zut);var C$zui={};var C$zur=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C$zun in C$zut){var C$zua;Object.prototype.hasOwnProperty.call(C$zut,C$zun)&&((C$zua=C$zur?Object.getOwnPropertyDescriptor(C$zut,C$zun):null)&&(C$zua.get||C$zua.set)?Object.defineProperty(C$zui,C$zun,C$zua):C$zui[C$zun]=C$zut[C$zun])}return C$zui.default=C$zut,C$zue&&C$zue.set(C$zut,C$zui),C$zui}(C$zut("./distance"));var C$zui=_interopRequireDefault(C$zut("./enums"));var C$zud=_interopRequireDefault(C$zut("./ray"));C$zut=_interopRequireDefault(C$zut("./triangle"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var C$zut=new WeakMap;return _getRequireWildcardCache=function(){return C$zut},C$zut}function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function getVec3(C$zut,C$zue,C$zui,C$zur){C$zuf.Vec3.set(C$zut,C$zue[C$zui*C$zur],C$zue[C$zui*C$zur+1],C$zue[C$zui*C$zur+2])}var C$zuh,C$zuu;C$zuh=C$zut.default.create(),C$zuu=1/0;function C$zutms(C$zut,C$zue){C$zuu=1/0;var C$zui=C$zue._subMeshes;for(var C$zur=0;C$zur<C$zui.length;C$zur++)if(C$zui[C$zur]._primitiveType===C$zu_.default.PT_TRIANGLES){var C$zun=C$zue._subDatas[C$zur]||C$zue._subDatas[0];var C$zua=C$zue._getAttrMeshData(C$zur,C$zu_.default.ATTR_POSITION);var C$zuo=C$zun.getIData(Uint16Array);var C$zus=C$zun.vfm.element(C$zu_.default.ATTR_POSITION).num;for(var C$zuc=0;C$zuc<C$zuo.length;C$zuc+=3){getVec3(C$zuh.a,C$zua,C$zuo[C$zuc],C$zus),getVec3(C$zuh.b,C$zua,C$zuo[C$zuc+1],C$zus),getVec3(C$zuh.c,C$zua,C$zuo[C$zuc+2],C$zus);var C$zul=C$zuA(C$zut,C$zuh);0<C$zul&&C$zul<C$zuu&&(C$zuu=C$zul)}}return C$zuu}function cmp(C$zut,C$zue){return C$zut.distance-C$zue.distance}function transformMat4Normal(C$zut,C$zue,C$zui){C$zui=C$zui.m;var C$zur=C$zue.x,C$zun=C$zue.y,C$zue=C$zue.z,C$zua=C$zui[3]*C$zur+C$zui[7]*C$zun+C$zui[11]*C$zue;return C$zut.x=(C$zui[0]*C$zur+C$zui[4]*C$zun+C$zui[8]*C$zue)*(C$zua=C$zua?1/C$zua:1),C$zut.y=(C$zui[1]*C$zur+C$zui[5]*C$zun+C$zui[9]*C$zue)*C$zua,C$zut.z=(C$zui[2]*C$zur+C$zui[6]*C$zun+C$zui[10]*C$zue)*C$zua,C$zut}function distanceValid(C$zut){return 0<C$zut&&C$zut<1/0}var C$zup,C$zuo,C$zum,C$zuv,C$zuy,C$zus,C$zug,C$zub,C$zuc;C$zup=new C$zue.default(function(){return{distance:0,node:null}},1),C$zuo=[],C$zum=C$zul.default.create(),C$zuv=new C$zuf.Vec3,C$zuy=new C$zuf.Vec3,C$zus=new C$zud.default,C$zug=cc.mat4(),C$zub=cc.mat4(),C$zuc=new C$zuf.Vec3;function C$zuNms(C$zut,C$zur,C$zun,C$zua){return C$zup.reset(),C$zuo.length=0,function traversal(C$zut,C$zue){var C$zui=C$zut.children;for(var C$zur=C$zui.length-1;0<=C$zur;C$zur--)traversal(C$zui[C$zur],C$zue);C$zue(C$zut)}(C$zut=C$zut||cc.director.getScene(),function(C$zut){var C$zue,C$zui;C$zua&&!C$zua(C$zut)||(C$zuf.Mat4.invert(C$zub,C$zut.getWorldMatrix(C$zug)),C$zuf.Vec3.transformMat4(C$zus.o,C$zur.o,C$zub),C$zuf.Vec3.normalize(C$zus.d,transformMat4Normal(C$zus.d,C$zur.d,C$zub)),C$zue=1/0,(C$zui=C$zut._renderComponent)instanceof cc.MeshRenderer?C$zue=C$zuW(C$zus,C$zui._boundingBox):C$zut.width&&C$zut.height&&(C$zuf.Vec3.set(C$zuv,-C$zut.width*C$zut.anchorX,-C$zut.height*C$zut.anchorY,C$zut.z),C$zuf.Vec3.set(C$zuy,C$zut.width*(1-C$zut.anchorX),C$zut.height*(1-C$zut.anchorY),C$zut.z),C$zul.default.fromPoints(C$zum,C$zuv,C$zuy),C$zue=C$zuW(C$zus,C$zum)),distanceValid(C$zue)&&distanceValid(C$zue=C$zun?C$zun(C$zus,C$zut,C$zue):C$zue)&&(C$zuf.Vec3.scale(C$zuc,C$zus.d,C$zue),transformMat4Normal(C$zuc,C$zuc,C$zug),(C$zui=C$zup.add()).node=C$zut,C$zui.distance=C$zuf.Vec3.mag(C$zuc),C$zuo.push(C$zui)))}),C$zuo.sort(cmp),C$zuo}function C$zuwms(C$zut,C$zue){var C$zui=C$zuf.Vec3.dot(C$zut.d,C$zue.n);return Math.abs(C$zui)<Number.EPSILON?0:(C$zuf.Vec3.multiplyScalar(C$zuC,C$zue.n,C$zue.d),(C$zut=C$zuf.Vec3.dot(C$zuf.Vec3.subtract(C$zuC,C$zuC,C$zut.o),C$zue.n)/C$zui)<0?0:C$zut)}C$zuC=new C$zuf.Vec3(0,0,0);var C$zuC;function C$zukms(C$zut,C$zue){return C$zuf.Vec3.subtract(C$zux,C$zut.e,C$zut.s),(C$zut=(C$zue.d-C$zuf.Vec3.dot(C$zut.s,C$zue.n))/C$zuf.Vec3.dot(C$zux,C$zue.n))<0||1<C$zut?0:C$zut}C$zux=new C$zuf.Vec3(0,0,0);var C$zux;C$zuS=new C$zuf.Vec3(0,0,0),C$zuT=new C$zuf.Vec3(0,0,0),C$zuw=new C$zuf.Vec3(0,0,0),C$zuE=new C$zuf.Vec3(0,0,0),C$zuP=new C$zuf.Vec3(0,0,0);var C$zuA=function(C$zut,C$zue,C$zui){C$zuf.Vec3.subtract(C$zuS,C$zue.b,C$zue.a),C$zuf.Vec3.subtract(C$zuT,C$zue.c,C$zue.a),C$zuf.Vec3.cross(C$zuw,C$zut.d,C$zuT);var C$zur=C$zuf.Vec3.dot(C$zuS,C$zuw);if(C$zur<Number.EPSILON&&(!C$zui||C$zur>-Number.EPSILON))return 0;C$zui=1/C$zur;C$zuf.Vec3.subtract(C$zuE,C$zut.o,C$zue.a);C$zur=C$zuf.Vec3.dot(C$zuE,C$zuw)*C$zui;if(C$zur<0||1<C$zur)return 0;C$zuf.Vec3.cross(C$zuP,C$zuE,C$zuS);C$zue=C$zuf.Vec3.dot(C$zut.d,C$zuP)*C$zui;if(C$zue<0||1<C$zur+C$zue)return 0;C$zut=C$zuf.Vec3.dot(C$zuT,C$zuP)*C$zui;return C$zut<0?0:C$zut};var C$zuS,C$zuT,C$zuw,C$zuE,C$zuP;C$zut=C$zuA;function C$zuhms(C$zut,C$zue,C$zui){C$zuf.Vec3.subtract(C$zuM,C$zue.b,C$zue.a),C$zuf.Vec3.subtract(C$zuR,C$zue.c,C$zue.a),C$zuf.Vec3.subtract(C$zuI,C$zut.s,C$zut.e),C$zuf.Vec3.cross(C$zuD,C$zuM,C$zuR);var C$zur=C$zuf.Vec3.dot(C$zuI,C$zuD);if(C$zur<=0)return 0;if(C$zuf.Vec3.subtract(C$zuB,C$zut.s,C$zue.a),(C$zut=C$zuf.Vec3.dot(C$zuB,C$zuD))<0||C$zur<C$zut)return 0;if(C$zuf.Vec3.cross(C$zuL,C$zuI,C$zuB),(C$zut=C$zuf.Vec3.dot(C$zuR,C$zuL))<0||C$zur<C$zut)return 0;var C$zun=-C$zuf.Vec3.dot(C$zuM,C$zuL);return C$zun<0||C$zur<C$zut+C$zun?0:(C$zui&&(C$zur=1-(C$zut*=C$zur=1/C$zur)-(C$zun*=C$zur),C$zuf.Vec3.set(C$zui,C$zue.a.x*C$zur+C$zue.b.x*C$zut+C$zue.c.x*C$zun,C$zue.a.y*C$zur+C$zue.b.y*C$zut+C$zue.c.y*C$zun,C$zue.a.z*C$zur+C$zue.b.z*C$zut+C$zue.c.z*C$zun)),1)}C$zuM=new C$zuf.Vec3(0,0,0),C$zuR=new C$zuf.Vec3(0,0,0),C$zuI=new C$zuf.Vec3(0,0,0),C$zuB=new C$zuf.Vec3(0,0,0),C$zuD=new C$zuf.Vec3(0,0,0),C$zuL=new C$zuf.Vec3(0,0,0);var C$zuM,C$zuR,C$zuI,C$zuB,C$zuD,C$zuL;function C$zuQms(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){if(C$zuf.Vec3.subtract(C$zuV,C$zue,C$zut),C$zuf.Vec3.subtract(C$zuO,C$zui,C$zut),C$zuf.Vec3.subtract(C$zuF,C$zur,C$zut),C$zuf.Vec3.subtract(C$zuN,C$zun,C$zut),C$zuf.Vec3.cross(C$zuz,C$zuN,C$zuV),0<=(C$zue=C$zuf.Vec3.dot(C$zuO,C$zuz))){var C$zus=-C$zuf.Vec3.dot(C$zuF,C$zuz);if(C$zus<0)return 0;var C$zuc=C$zuf.Vec3.dot(C$zuf.Vec3.cross(C$zuG,C$zuV,C$zuF),C$zuO);if(C$zuc<0)return 0;C$zuo&&C$zuf.Vec3.set(C$zuo,C$zui.x*(C$zus*=C$zul=1/(C$zus+C$zue+C$zuc))+C$zur.x*(C$zue*=C$zul)+C$zun.x*(C$zuc*=C$zul),C$zui.y*C$zus+C$zur.y*C$zue+C$zun.y*C$zuc,C$zui.z*C$zus+C$zur.z*C$zue+C$zun.z*C$zuc)}else{C$zuf.Vec3.subtract(C$zuk,C$zua,C$zut);var C$zul=C$zuf.Vec3.dot(C$zuk,C$zuz);if(C$zul<0)return 0;C$zus=C$zuf.Vec3.dot(C$zuf.Vec3.cross(C$zuG,C$zuV,C$zuO),C$zuk);if(C$zus<0)return 0;C$zuo&&(C$zur=1/(C$zul+(C$zue=-C$zue)+C$zus),C$zuf.Vec3.set(C$zuo,C$zui.x*(C$zul*=C$zur)+C$zua.x*(C$zue*=C$zur)+C$zun.x*(C$zus*=C$zur),C$zui.y*C$zul+C$zua.y*C$zue+C$zun.y*C$zus,C$zui.z*C$zul+C$zua.z*C$zue+C$zun.z*C$zus))}return 1}C$zuV=new C$zuf.Vec3(0,0,0),C$zuO=new C$zuf.Vec3(0,0,0),C$zuF=new C$zuf.Vec3(0,0,0),C$zuN=new C$zuf.Vec3(0,0,0),C$zuk=new C$zuf.Vec3(0,0,0),C$zuz=new C$zuf.Vec3(0,0,0),C$zuG=new C$zuf.Vec3(0,0,0);var C$zuV,C$zuO,C$zuF,C$zuN,C$zuk,C$zuz,C$zuG;function C$zuvms(C$zut,C$zue){var C$zui=C$zue.radius;C$zue=C$zue.center;var C$zur=C$zut.o;return C$zut=C$zut.d,C$zui*=C$zui,C$zuf.Vec3.subtract(C$zuU,C$zue,C$zur),C$zue=C$zuU.lengthSqr(),C$zur=C$zuf.Vec3.dot(C$zuU,C$zut),(C$zut=C$zui-(C$zue-C$zur*C$zur))<0?0:(C$zut=Math.sqrt(C$zut),(C$zue=C$zue<C$zui?C$zur+C$zut:C$zur-C$zut)<0?0:C$zue)}C$zuU=new C$zuf.Vec3(0,0,0);var C$zuU;C$zuH=new C$zuf.Vec3,C$zuj=new C$zuf.Vec3;var C$zuW=function(C$zut,C$zue){var C$zui=C$zut.o,C$zut=C$zut.d;var C$zur=1/C$zut.x,C$zun=1/C$zut.y,C$zut=1/C$zut.z;C$zuf.Vec3.subtract(C$zuH,C$zue.center,C$zue.halfExtents),C$zuf.Vec3.add(C$zuj,C$zue.center,C$zue.halfExtents);C$zue=(C$zuH.x-C$zui.x)*C$zur;C$zur=(C$zuj.x-C$zui.x)*C$zur;var C$zua=(C$zuH.y-C$zui.y)*C$zun;C$zun=(C$zuj.y-C$zui.y)*C$zun;var C$zuo=(C$zuH.z-C$zui.z)*C$zut;C$zui=(C$zuj.z-C$zui.z)*C$zut;C$zut=Math.max(Math.max(Math.min(C$zue,C$zur),Math.min(C$zua,C$zun)),Math.min(C$zuo,C$zui));C$zue=Math.min(Math.min(Math.max(C$zue,C$zur),Math.max(C$zua,C$zun)),Math.max(C$zuo,C$zui));return C$zue<0||C$zue<C$zut?0:C$zut};var C$zuH,C$zuj;C$zue=C$zuW;C$zud=function(){var C$zur;new C$zuf.Vec3;var C$zud;new C$zuf.Vec3;var C$zun;new C$zuf.Vec3;var C$zua=new C$zuf.Vec3;var C$zuo=new C$zuf.Vec3;var C$zus=new C$zuf.Vec3;var C$zuc=new C$zuf.Vec3;var C$zul=new Array(3);var C$zuh=new Array(3);var C$zuu=new Array(3);var C$zu_=new Array(6);return function(C$zut,C$zue){C$zul[0]=C$zue.halfExtents.x,C$zul[1]=C$zue.halfExtents.y,C$zul[2]=C$zue.halfExtents.z,C$zur=C$zue.center,C$zud=C$zut.o,C$zun=C$zut.d;C$zut=C$zue.orientation.m;C$zuf.Vec3.set(C$zua,C$zut[0],C$zut[1],C$zut[2]),C$zuf.Vec3.set(C$zuo,C$zut[3],C$zut[4],C$zut[5]),C$zuf.Vec3.set(C$zus,C$zut[6],C$zut[7],C$zut[8]),C$zuf.Vec3.subtract(C$zuc,C$zur,C$zud),C$zuh[0]=C$zuf.Vec3.dot(C$zua,C$zun),C$zuh[1]=C$zuf.Vec3.dot(C$zuo,C$zun),C$zuh[2]=C$zuf.Vec3.dot(C$zus,C$zun),C$zuu[0]=C$zuf.Vec3.dot(C$zua,C$zuc),C$zuu[1]=C$zuf.Vec3.dot(C$zuo,C$zuc),C$zuu[2]=C$zuf.Vec3.dot(C$zus,C$zuc);for(var C$zui=0;C$zui<3;++C$zui){if(0===C$zuh[C$zui]){if(0<-C$zuu[C$zui]-C$zul[C$zui]||-C$zuu[C$zui]+C$zul[C$zui]<0)return 0;C$zuh[C$zui]=1e-7}C$zu_[2*C$zui+0]=(C$zuu[C$zui]+C$zul[C$zui])/C$zuh[C$zui],C$zu_[2*C$zui+1]=(C$zuu[C$zui]-C$zul[C$zui])/C$zuh[C$zui]}C$zue=Math.max(Math.max(Math.min(C$zu_[0],C$zu_[1]),Math.min(C$zu_[2],C$zu_[3])),Math.min(C$zu_[4],C$zu_[5]));C$zut=Math.min(Math.min(Math.max(C$zu_[0],C$zu_[1]),Math.max(C$zu_[2],C$zu_[3])),Math.max(C$zu_[4],C$zu_[5]));return C$zut<0||C$zut<C$zue||C$zue<0?0:C$zue}}();function C$zuCms(C$zut,C$zue){return C$zuf.Vec3.subtract(C$zuX,C$zut.center,C$zut.halfExtents),C$zuf.Vec3.add(C$zuq,C$zut.center,C$zut.halfExtents),C$zuf.Vec3.subtract(C$zuJ,C$zue.center,C$zue.halfExtents),C$zuf.Vec3.add(C$zuY,C$zue.center,C$zue.halfExtents),C$zuX.x<=C$zuY.x&&C$zuq.x>=C$zuJ.x&&C$zuX.y<=C$zuY.y&&C$zuq.y>=C$zuJ.y&&C$zuX.z<=C$zuY.z&&C$zuq.z>=C$zuJ.z}C$zuX=new C$zuf.Vec3,C$zuq=new C$zuf.Vec3,C$zuJ=new C$zuf.Vec3,C$zuY=new C$zuf.Vec3;var C$zuX,C$zuq,C$zuJ,C$zuY;function getOBBVertices(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){C$zuf.Vec3.set(C$zua[0],C$zut.x+C$zui.x*C$zue.x+C$zur.x*C$zue.y+C$zun.x*C$zue.z,C$zut.y+C$zui.y*C$zue.x+C$zur.y*C$zue.y+C$zun.y*C$zue.z,C$zut.z+C$zui.z*C$zue.x+C$zur.z*C$zue.y+C$zun.z*C$zue.z),C$zuf.Vec3.set(C$zua[1],C$zut.x-C$zui.x*C$zue.x+C$zur.x*C$zue.y+C$zun.x*C$zue.z,C$zut.y-C$zui.y*C$zue.x+C$zur.y*C$zue.y+C$zun.y*C$zue.z,C$zut.z-C$zui.z*C$zue.x+C$zur.z*C$zue.y+C$zun.z*C$zue.z),C$zuf.Vec3.set(C$zua[2],C$zut.x+C$zui.x*C$zue.x-C$zur.x*C$zue.y+C$zun.x*C$zue.z,C$zut.y+C$zui.y*C$zue.x-C$zur.y*C$zue.y+C$zun.y*C$zue.z,C$zut.z+C$zui.z*C$zue.x-C$zur.z*C$zue.y+C$zun.z*C$zue.z),C$zuf.Vec3.set(C$zua[3],C$zut.x+C$zui.x*C$zue.x+C$zur.x*C$zue.y-C$zun.x*C$zue.z,C$zut.y+C$zui.y*C$zue.x+C$zur.y*C$zue.y-C$zun.y*C$zue.z,C$zut.z+C$zui.z*C$zue.x+C$zur.z*C$zue.y-C$zun.z*C$zue.z),C$zuf.Vec3.set(C$zua[4],C$zut.x-C$zui.x*C$zue.x-C$zur.x*C$zue.y-C$zun.x*C$zue.z,C$zut.y-C$zui.y*C$zue.x-C$zur.y*C$zue.y-C$zun.y*C$zue.z,C$zut.z-C$zui.z*C$zue.x-C$zur.z*C$zue.y-C$zun.z*C$zue.z),C$zuf.Vec3.set(C$zua[5],C$zut.x+C$zui.x*C$zue.x-C$zur.x*C$zue.y-C$zun.x*C$zue.z,C$zut.y+C$zui.y*C$zue.x-C$zur.y*C$zue.y-C$zun.y*C$zue.z,C$zut.z+C$zui.z*C$zue.x-C$zur.z*C$zue.y-C$zun.z*C$zue.z),C$zuf.Vec3.set(C$zua[6],C$zut.x-C$zui.x*C$zue.x+C$zur.x*C$zue.y-C$zun.x*C$zue.z,C$zut.y-C$zui.y*C$zue.x+C$zur.y*C$zue.y-C$zun.y*C$zue.z,C$zut.z-C$zui.z*C$zue.x+C$zur.z*C$zue.y-C$zun.z*C$zue.z),C$zuf.Vec3.set(C$zua[7],C$zut.x-C$zui.x*C$zue.x-C$zur.x*C$zue.y+C$zun.x*C$zue.z,C$zut.y-C$zui.y*C$zue.x-C$zur.y*C$zue.y+C$zun.y*C$zue.z,C$zut.z-C$zui.z*C$zue.x-C$zur.z*C$zue.y+C$zun.z*C$zue.z)}function getInterval(C$zut,C$zue){var C$zui=C$zuf.Vec3.dot(C$zue,C$zut[0]),C$zur=C$zui;for(var C$zun=1;C$zun<8;++C$zun){var C$zua=C$zuf.Vec3.dot(C$zue,C$zut[C$zun]);C$zui=C$zua<C$zui?C$zua:C$zui,C$zur=C$zur<C$zua?C$zua:C$zur}return[C$zui,C$zur]}var C$zu$=function(){var C$zuc=new Array(15);for(var C$zut=0;C$zut<15;C$zut++)C$zuc[C$zut]=new C$zuf.Vec3(0,0,0);var C$zul=new Array(8);var C$zuh=new Array(8);for(var C$zue=0;C$zue<8;C$zue++)C$zul[C$zue]=new C$zuf.Vec3(0,0,0),C$zuh[C$zue]=new C$zuf.Vec3(0,0,0);var C$zuu=new C$zuf.Vec3;var C$zu_=new C$zuf.Vec3;return function(C$zut,C$zue){var C$zui=C$zue.orientation.m;C$zuf.Vec3.set(C$zuc[0],1,0,0),C$zuf.Vec3.set(C$zuc[1],0,1,0),C$zuf.Vec3.set(C$zuc[2],0,0,1),C$zuf.Vec3.set(C$zuc[3],C$zui[0],C$zui[1],C$zui[2]),C$zuf.Vec3.set(C$zuc[4],C$zui[3],C$zui[4],C$zui[5]),C$zuf.Vec3.set(C$zuc[5],C$zui[6],C$zui[7],C$zui[8]);for(var C$zur=0;C$zur<3;++C$zur)C$zuf.Vec3.cross(C$zuc[6+3*C$zur],C$zuc[C$zur],C$zuc[0]),C$zuf.Vec3.cross(C$zuc[6+3*C$zur+1],C$zuc[C$zur],C$zuc[1]),C$zuf.Vec3.cross(C$zuc[6+3*C$zur+1],C$zuc[C$zur],C$zuc[2]);var C$zun;C$zuf.Vec3.subtract(C$zuu,C$zut.center,C$zut.halfExtents),C$zuf.Vec3.add(C$zu_,C$zut.center,C$zut.halfExtents),C$zui=C$zuu,C$zut=C$zu_,C$zun=C$zul,C$zuf.Vec3.set(C$zun[0],C$zui.x,C$zut.y,C$zut.z),C$zuf.Vec3.set(C$zun[1],C$zui.x,C$zut.y,C$zui.z),C$zuf.Vec3.set(C$zun[2],C$zui.x,C$zui.y,C$zut.z),C$zuf.Vec3.set(C$zun[3],C$zui.x,C$zui.y,C$zui.z),C$zuf.Vec3.set(C$zun[4],C$zut.x,C$zut.y,C$zut.z),C$zuf.Vec3.set(C$zun[5],C$zut.x,C$zut.y,C$zui.z),C$zuf.Vec3.set(C$zun[6],C$zut.x,C$zui.y,C$zut.z),C$zuf.Vec3.set(C$zun[7],C$zut.x,C$zui.y,C$zui.z),getOBBVertices(C$zue.center,C$zue.halfExtents,C$zuc[3],C$zuc[4],C$zuc[5],C$zuh);for(var C$zua=0;C$zua<15;++C$zua){var C$zuo=getInterval(C$zul,C$zuc[C$zua]);var C$zus=getInterval(C$zuh,C$zuc[C$zua]);if(C$zus[0]>C$zuo[1]||C$zuo[0]>C$zus[1])return 0}return 1}}();function C$zuYms(C$zut,C$zue){var C$zui=C$zut.halfExtents.x*Math.abs(C$zue.n.x)+C$zut.halfExtents.y*Math.abs(C$zue.n.y)+C$zut.halfExtents.z*Math.abs(C$zue.n.z);return(C$zut=C$zuf.Vec3.dot(C$zue.n,C$zut.center))+C$zui<C$zue.d?-1:C$zut-C$zui>C$zue.d?0:1}function C$zuIms(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.planes.length;C$zui++)if(-1===C$zuYms(C$zut,C$zue.planes[C$zui]))return 0;return 1}var C$zuZ=function(){var C$zul=new Array(8);var C$zuh=0,C$zuu=0;for(var C$zut=0;C$zut<C$zul.length;C$zut++)C$zul[C$zut]=new C$zuf.Vec3(0,0,0);return function(C$zut,C$zue){var C$zui,C$zur=!1;for(var C$zun=0;C$zun<C$zue.planes.length;C$zun++){if(-1===(C$zui=C$zuYms(C$zut,C$zue.planes[C$zun])))return 0;1===C$zui&&(C$zur=!0)}if(!C$zur)return 1;for(var C$zua=0;C$zua<C$zue.vertices.length;C$zua++)C$zuf.Vec3.subtract(C$zul[C$zua],C$zue.vertices[C$zua],C$zut.center);for(var C$zuo=C$zuu=C$zuh=0;C$zuo<C$zue.vertices.length;C$zuo++)C$zul[C$zuo].x>C$zut.halfExtents.x?C$zuh++:C$zul[C$zuo].x<-C$zut.halfExtents.x&&C$zuu++;if(C$zuh===C$zue.vertices.length||C$zuu===C$zue.vertices.length)return 0;for(var C$zus=C$zuu=C$zuh=0;C$zus<C$zue.vertices.length;C$zus++)C$zul[C$zus].y>C$zut.halfExtents.y?C$zuh++:C$zul[C$zus].y<-C$zut.halfExtents.y&&C$zuu++;if(C$zuh===C$zue.vertices.length||C$zuu===C$zue.vertices.length)return 0;for(var C$zuc=C$zuu=C$zuh=0;C$zuc<C$zue.vertices.length;C$zuc++)C$zul[C$zuc].z>C$zut.halfExtents.z?C$zuh++:C$zul[C$zuc].z<-C$zut.halfExtents.z&&C$zuu++;return C$zuh===C$zue.vertices.length||C$zuu===C$zue.vertices.length?0:1}}();function C$zuems(C$zut,C$zue){return C$zuf.Vec3.subtract(C$zuQ,C$zue,C$zut.center),C$zuf.Vec3.transformMat3(C$zuQ,C$zuQ,C$zuf.Mat3.transpose(C$zuK,C$zut.orientation)),C$zue=C$zuQ,C$zut=C$zut.halfExtents,Math.abs(C$zue.x)<C$zut.x&&Math.abs(C$zue.y)<C$zut.y&&Math.abs(C$zue.z)<C$zut.z}C$zuQ=new C$zuf.Vec3(0,0,0),C$zuK=new C$zuf.Mat3;var C$zuQ,C$zuK;var C$zutt=function(C$zut,C$zue){var C$zui=C$zut.orientation.m;C$zui=C$zut.halfExtents.x*C$zuuVs(C$zue.n,C$zui[0],C$zui[1],C$zui[2])+C$zut.halfExtents.y*C$zuuVs(C$zue.n,C$zui[3],C$zui[4],C$zui[5])+C$zut.halfExtents.z*C$zuuVs(C$zue.n,C$zui[6],C$zui[7],C$zui[8]);C$zut=C$zuf.Vec3.dot(C$zue.n,C$zut.center);return C$zut+C$zui<C$zue.d?-1:C$zut-C$zui>C$zue.d?0:1};function C$zuuVs(C$zut,C$zue,C$zui,C$zur){return Math.abs(C$zut.x*C$zue+C$zut.y*C$zui+C$zut.z*C$zur)}function C$zubms(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.planes.length;C$zui++)if(-1===C$zutt(C$zut,C$zue.planes[C$zui]))return 0;return 1}var C$zuet=function(){var C$zuh=new Array(8);var C$zuu=0,C$zu_=0,C$zud=0;for(var C$zut=0;C$zut<C$zuh.length;C$zut++)C$zuh[C$zut]=new C$zuf.Vec3(0,0,0);function C$zuAVs(C$zut,C$zue,C$zui,C$zur){return C$zut.x*C$zue+C$zut.y*C$zui+C$zut.z*C$zur}return function(C$zut,C$zue){var C$zui,C$zur=!1;for(var C$zun=0;C$zun<C$zue.planes.length;C$zun++){if(-1===(C$zui=C$zutt(C$zut,C$zue.planes[C$zun])))return 0;1===C$zui&&(C$zur=!0)}if(!C$zur)return 1;for(var C$zua=0;C$zua<C$zue.vertices.length;C$zua++)C$zuf.Vec3.subtract(C$zuh[C$zua],C$zue.vertices[C$zua],C$zut.center);C$zud=C$zu_=0;var C$zuo=C$zut.orientation.m;for(var C$zus=0;C$zus<C$zue.vertices.length;C$zus++)(C$zuu=C$zuAVs(C$zuh[C$zus],C$zuo[0],C$zuo[1],C$zuo[2]))>C$zut.halfExtents.x?C$zu_++:C$zuu<-C$zut.halfExtents.x&&C$zud++;if(C$zu_===C$zue.vertices.length||C$zud===C$zue.vertices.length)return 0;for(var C$zuc=C$zud=C$zu_=0;C$zuc<C$zue.vertices.length;C$zuc++)(C$zuu=C$zuAVs(C$zuh[C$zuc],C$zuo[3],C$zuo[4],C$zuo[5]))>C$zut.halfExtents.y?C$zu_++:C$zuu<-C$zut.halfExtents.y&&C$zud++;if(C$zu_===C$zue.vertices.length||C$zud===C$zue.vertices.length)return 0;for(var C$zul=C$zud=C$zu_=0;C$zul<C$zue.vertices.length;C$zul++)(C$zuu=C$zuAVs(C$zuh[C$zul],C$zuo[6],C$zuo[7],C$zuo[8]))>C$zut.halfExtents.z?C$zu_++:C$zuu<-C$zut.halfExtents.z&&C$zud++;return C$zu_===C$zue.vertices.length||C$zud===C$zue.vertices.length?0:1}}();var C$zuit=function(){var C$zuc=new Array(15);for(var C$zut=0;C$zut<15;C$zut++)C$zuc[C$zut]=new C$zuf.Vec3(0,0,0);var C$zul=new Array(8);var C$zuh=new Array(8);for(var C$zue=0;C$zue<8;C$zue++)C$zul[C$zue]=new C$zuf.Vec3(0,0,0),C$zuh[C$zue]=new C$zuf.Vec3(0,0,0);return function(C$zut,C$zue){var C$zui=C$zut.orientation.m;var C$zur=C$zue.orientation.m;C$zuf.Vec3.set(C$zuc[0],C$zui[0],C$zui[1],C$zui[2]),C$zuf.Vec3.set(C$zuc[1],C$zui[3],C$zui[4],C$zui[5]),C$zuf.Vec3.set(C$zuc[2],C$zui[6],C$zui[7],C$zui[8]),C$zuf.Vec3.set(C$zuc[3],C$zur[0],C$zur[1],C$zur[2]),C$zuf.Vec3.set(C$zuc[4],C$zur[3],C$zur[4],C$zur[5]),C$zuf.Vec3.set(C$zuc[5],C$zur[6],C$zur[7],C$zur[8]);for(var C$zun=0;C$zun<3;++C$zun)C$zuf.Vec3.cross(C$zuc[6+3*C$zun],C$zuc[C$zun],C$zuc[0]),C$zuf.Vec3.cross(C$zuc[6+3*C$zun+1],C$zuc[C$zun],C$zuc[1]),C$zuf.Vec3.cross(C$zuc[6+3*C$zun+1],C$zuc[C$zun],C$zuc[2]);getOBBVertices(C$zut.center,C$zut.halfExtents,C$zuc[0],C$zuc[1],C$zuc[2],C$zul),getOBBVertices(C$zue.center,C$zue.halfExtents,C$zuc[3],C$zuc[4],C$zuc[5],C$zuh);for(var C$zua=0;C$zua<15;++C$zua){var C$zuo=getInterval(C$zul,C$zuc[C$zua]);var C$zus=getInterval(C$zuh,C$zuc[C$zua]);if(C$zus[0]>C$zuo[1]||C$zuo[0]>C$zus[1])return 0}return 1}}();function C$zuKms(C$zut,C$zue){var C$zui=C$zuf.Vec3.dot(C$zue.n,C$zut.center);return C$zut=C$zut.radius*C$zue.n.length(),C$zui+C$zut<C$zue.d?-1:C$zui-C$zut>C$zue.d?0:1}function C$zuZms(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.planes.length;C$zui++)if(-1===C$zuKms(C$zut,C$zue.planes[C$zui]))return 0;return 1}function C$zunms(C$zut,C$zue){for(var C$zui=0;C$zui<6;C$zui++){var C$zur=C$zue.planes[C$zui];var C$zun=C$zut.radius,C$zua=C$zut.center;var C$zuo=C$zur.n,C$zur=C$zur.d;var C$zus=C$zuf.Vec3.dot(C$zuo,C$zua);if(C$zus+C$zun<C$zur)return 0;if(!(C$zur<C$zus-C$zun)){C$zuf.Vec3.add(C$zurt,C$zua,C$zuf.Vec3.multiplyScalar(C$zurt,C$zuo,C$zun));for(var C$zuc=0;C$zuc<6;C$zuc++)if(C$zuc!==C$zui&&C$zuc!==C$zui+C$zunt[C$zui]){var C$zul=C$zue.planes[C$zuc];if(C$zuf.Vec3.dot(C$zul.n,C$zurt)<C$zul.d)return 0}}}return 1}C$zurt=new C$zuf.Vec3(0,0,0),C$zunt=[1,-1,1,-1,1,-1];var C$zurt,C$zunt;function C$zu$ms(C$zut,C$zue){var C$zui=C$zut.radius+C$zue.radius;return C$zuf.Vec3.squaredDistance(C$zut.center,C$zue.center)<C$zui*C$zui}function C$zuFms(C$zut,C$zue){return C$zua.pt_point_aabb(C$zuat,C$zut.center,C$zue),C$zuf.Vec3.squaredDistance(C$zut.center,C$zuat)<C$zut.radius*C$zut.radius}C$zuat=new C$zuf.Vec3;var C$zuat;function C$zuWms(C$zut,C$zue){return C$zua.pt_point_obb(C$zuot,C$zut.center,C$zue),C$zuf.Vec3.squaredDistance(C$zut.center,C$zuot)<C$zut.radius*C$zut.radius}C$zuot=new C$zuf.Vec3;var C$zuot;C$zue={rayAabb:C$zue,rayMesh:C$zutms,raycast:C$zuNms,rayTriangle:C$zut,ray_sphere:C$zuvms,ray_aabb:C$zuW,ray_obb:C$zud,ray_plane:C$zuwms,ray_triangle:C$zuA,line_plane:C$zukms,line_triangle:C$zuhms,line_quad:C$zuQms,sphere_sphere:C$zu$ms,sphere_aabb:C$zuFms,sphere_obb:C$zuWms,sphere_plane:C$zuKms,sphere_frustum:C$zuZms,sphere_frustum_accurate:C$zunms,aabb_aabb:C$zuCms,aabb_obb:C$zu$,aabb_plane:C$zuYms,aabb_frustum:C$zuIms,aabb_frustum_accurate:C$zuZ,obb_obb:C$zuit,obb_plane:C$zutt,obb_frustum:C$zubms,obb_frustum_accurate:C$zuet,obb_point:C$zuems,resolve:function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=null);var C$zur=C$zut._type,C$zun=C$zue._type;var C$zua=this[C$zur|C$zun];return C$zur<C$zun?C$zua(C$zut,C$zue,C$zui):C$zua(C$zue,C$zut,C$zui)}};C$zue[C$zui.default.SHAPE_RAY|C$zui.default.SHAPE_SPHERE]=C$zuvms,C$zue[C$zui.default.SHAPE_RAY|C$zui.default.SHAPE_AABB]=C$zuW,C$zue[C$zui.default.SHAPE_RAY|C$zui.default.SHAPE_OBB]=C$zud,C$zue[C$zui.default.SHAPE_RAY|C$zui.default.SHAPE_PLANE]=C$zuwms,C$zue[C$zui.default.SHAPE_RAY|C$zui.default.SHAPE_TRIANGLE]=C$zuA,C$zue[C$zui.default.SHAPE_LINE|C$zui.default.SHAPE_PLANE]=C$zukms,C$zue[C$zui.default.SHAPE_LINE|C$zui.default.SHAPE_TRIANGLE]=C$zuhms,C$zue[C$zui.default.SHAPE_SPHERE]=C$zu$ms,C$zue[C$zui.default.SHAPE_SPHERE|C$zui.default.SHAPE_AABB]=C$zuFms,C$zue[C$zui.default.SHAPE_SPHERE|C$zui.default.SHAPE_OBB]=C$zuWms,C$zue[C$zui.default.SHAPE_SPHERE|C$zui.default.SHAPE_PLANE]=C$zuKms,C$zue[C$zui.default.SHAPE_SPHERE|C$zui.default.SHAPE_FRUSTUM]=C$zuZms,C$zue[C$zui.default.SHAPE_SPHERE|C$zui.default.SHAPE_FRUSTUM_ACCURATE]=C$zunms,C$zue[C$zui.default.SHAPE_AABB]=C$zuCms,C$zue[C$zui.default.SHAPE_AABB|C$zui.default.SHAPE_OBB]=C$zu$,C$zue[C$zui.default.SHAPE_AABB|C$zui.default.SHAPE_PLANE]=C$zuYms,C$zue[C$zui.default.SHAPE_AABB|C$zui.default.SHAPE_FRUSTUM]=C$zuIms,C$zue[C$zui.default.SHAPE_AABB|C$zui.default.SHAPE_FRUSTUM_ACCURATE]=C$zuZ,C$zue[C$zui.default.SHAPE_OBB]=C$zuit,C$zue[C$zui.default.SHAPE_OBB|C$zui.default.SHAPE_PLANE]=C$zutt,C$zue[C$zui.default.SHAPE_OBB|C$zui.default.SHAPE_FRUSTUM]=C$zubms,C$zue[C$zui.default.SHAPE_OBB|C$zui.default.SHAPE_FRUSTUM_ACCURATE]=C$zuet,C$zun.default=C$zue,C$zur.exports=C$zun.default},{"../../renderer/gfx":312,"../../renderer/memop/recycle-pool":327,"../value-types":279,"./aabb":119,"./distance":120,"./enums":121,"./ray":128,"./triangle":130}],125:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zuo=C$zut("../value-types");var C$zus=(C$zut=C$zut("./enums"))&&C$zut.__esModule?C$zut:{default:C$zut};function line(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),void 0===C$zun&&(C$zun=0),void 0===C$zua&&(C$zua=-1),this.s=void 0,this.e=void 0,this._type=void 0,this._type=C$zus.default.SHAPE_LINE,this.s=new C$zuo.Vec3(C$zut,C$zue,C$zui),this.e=new C$zuo.Vec3(C$zur,C$zun,C$zua)}line.create=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){return new line(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua)},line.clone=function(C$zut){return new line(C$zut.s.x,C$zut.s.y,C$zut.s.z,C$zut.e.x,C$zut.e.y,C$zut.e.z)},line.copy=function(C$zut,C$zue){return C$zuo.Vec3.copy(C$zut.s,C$zue.s),C$zuo.Vec3.copy(C$zut.e,C$zue.e),C$zut},line.fromPoints=function(C$zut,C$zue,C$zui){return C$zuo.Vec3.copy(C$zut.s,C$zue),C$zuo.Vec3.copy(C$zut.e,C$zui),C$zut},line.set=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){return C$zut.s.x=C$zue,C$zut.s.y=C$zui,C$zut.s.z=C$zur,C$zut.e.x=C$zun,C$zut.e.y=C$zua,C$zut.e.z=C$zuo,C$zut},line.len=function(C$zut){return C$zuo.Vec3.distance(C$zut.s,C$zut.e)},line.prototype.length=function(){return C$zuo.Vec3.distance(this.s,this.e)},C$zui.default=line,C$zue.exports=C$zui.default},{"../value-types":279,"./enums":121}],126:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zum=C$zut("../value-types");var C$zup=(C$zut=C$zut("./enums"))&&C$zut.__esModule?C$zut:{default:C$zut};function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}var C$zuo=new C$zum.Vec3;var C$zua=new C$zum.Vec3;var C$zus=new C$zum.Mat3;obb.create=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf){return new obb(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf)},obb.clone=function(C$zut){var C$zue=C$zut.orientation.m;return new obb(C$zut.center.x,C$zut.center.y,C$zut.center.z,C$zut.halfExtents.x,C$zut.halfExtents.y,C$zut.halfExtents.z,C$zue[0],C$zue[1],C$zue[2],C$zue[3],C$zue[4],C$zue[5],C$zue[6],C$zue[7],C$zue[8])},obb.copy=function(C$zut,C$zue){return C$zum.Vec3.copy(C$zut.center,C$zue.center),C$zum.Vec3.copy(C$zut.halfExtents,C$zue.halfExtents),C$zum.Mat3.copy(C$zut.orientation,C$zue.orientation),C$zut},obb.fromPoints=function(C$zut,C$zue,C$zui){return C$zum.Vec3.multiplyScalar(C$zut.center,C$zum.Vec3.add(C$zuo,C$zue,C$zui),.5),C$zum.Vec3.multiplyScalar(C$zut.halfExtents,C$zum.Vec3.subtract(C$zua,C$zui,C$zue),.5),C$zum.Mat3.identity(C$zut.orientation),C$zut},obb.set=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup){return C$zum.Vec3.set(C$zut.center,C$zue,C$zui,C$zur),C$zum.Vec3.set(C$zut.halfExtents,C$zun,C$zua,C$zuo),C$zum.Mat3.set(C$zut.orientation,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup),C$zut},C$zut=obb,(C$zun=[{key:"type",get:function(){return this._type}}])&&_defineProperties(C$zut.prototype,C$zun),C$zur&&_defineProperties(C$zut,C$zur),(C$zun=obb.prototype).getBoundary=function(C$zut,C$zue){var C$zui,C$zur,C$zun,C$zua;C$zui=C$zuo,C$zur=this.halfExtents,C$zun=this.orientation,C$zua=C$zus.m,C$zun=C$zun.m,C$zua[0]=Math.abs(C$zun[0]),C$zua[1]=Math.abs(C$zun[1]),C$zua[2]=Math.abs(C$zun[2]),C$zua[3]=Math.abs(C$zun[3]),C$zua[4]=Math.abs(C$zun[4]),C$zua[5]=Math.abs(C$zun[5]),C$zua[6]=Math.abs(C$zun[6]),C$zua[7]=Math.abs(C$zun[7]),C$zua[8]=Math.abs(C$zun[8]),C$zum.Vec3.transformMat3(C$zui,C$zur,C$zus),C$zum.Vec3.subtract(C$zut,this.center,C$zuo),C$zum.Vec3.add(C$zue,this.center,C$zuo)},C$zun.transform=function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zum.Vec3.transformMat4(C$zun.center,this.center,C$zut),C$zum.Mat3.fromQuat(C$zun.orientation,C$zui),C$zum.Vec3.multiply(C$zun.halfExtents,this.halfExtents,C$zur)},C$zun.translateAndRotate=function(C$zut,C$zue,C$zui){C$zum.Vec3.transformMat4(C$zui.center,this.center,C$zut),C$zum.Mat3.fromQuat(C$zui.orientation,C$zue)},C$zun.setScale=function(C$zut,C$zue){C$zum.Vec3.multiply(C$zue.halfExtents,this.halfExtents,C$zut)};C$zut=obb;function obb(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf){void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=1),void 0===C$zun&&(C$zun=1),void 0===C$zua&&(C$zua=1),void 0===C$zuo&&(C$zuo=1),void 0===C$zus&&(C$zus=0),void 0===C$zuc&&(C$zuc=0),void 0===C$zul&&(C$zul=0),void 0===C$zuh&&(C$zuh=1),void 0===C$zuu&&(C$zuu=0),void 0===C$zu_&&(C$zu_=0),void 0===C$zud&&(C$zud=0),void 0===C$zuf&&(C$zuf=1),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=C$zup.default.SHAPE_OBB,this.center=new C$zum.Vec3(C$zut,C$zue,C$zui),this.halfExtents=new C$zum.Vec3(C$zur,C$zun,C$zua),this.orientation=new C$zum.Mat3(C$zuo,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf)}var C$zur,C$zun;C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../value-types":279,"./enums":121}],127:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zun=C$zut("../value-types");var C$zua=(C$zut=C$zut("./enums"))&&C$zut.__esModule?C$zut:{default:C$zut};var C$zuo=new C$zun.Vec3(0,0,0);var C$zus=new C$zun.Vec3(0,0,0);var C$zur=cc.mat4();var C$zuc=cc.v4();function plane(C$zut,C$zue,C$zui,C$zur){void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=1),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),this.n=void 0,this.d=void 0,this._type=void 0,this._type=C$zua.default.SHAPE_PLANE,this.n=new C$zun.Vec3(C$zut,C$zue,C$zui),this.d=C$zur}plane.create=function(C$zut,C$zue,C$zui,C$zur){return new plane(C$zut,C$zue,C$zui,C$zur)},plane.clone=function(C$zut){return new plane(C$zut.n.x,C$zut.n.y,C$zut.n.z,C$zut.d)},plane.copy=function(C$zut,C$zue){return C$zun.Vec3.copy(C$zut.n,C$zue.n),C$zut.d=C$zue.d,C$zut},plane.fromPoints=function(C$zut,C$zue,C$zui,C$zur){return C$zun.Vec3.subtract(C$zuo,C$zui,C$zue),C$zun.Vec3.subtract(C$zus,C$zur,C$zue),C$zun.Vec3.normalize(C$zut.n,C$zun.Vec3.cross(C$zut.n,C$zuo,C$zus)),C$zut.d=C$zun.Vec3.dot(C$zut.n,C$zue),C$zut},plane.set=function(C$zut,C$zue,C$zui,C$zur,C$zun){return C$zut.n.x=C$zue,C$zut.n.y=C$zui,C$zut.n.z=C$zur,C$zut.d=C$zun,C$zut},plane.fromNormalAndPoint=function(C$zut,C$zue,C$zui){return C$zun.Vec3.copy(C$zut.n,C$zue),C$zut.d=C$zun.Vec3.dot(C$zue,C$zui),C$zut},plane.normalize=function(C$zut,C$zue){var C$zui=C$zue.n.len();return C$zun.Vec3.normalize(C$zut.n,C$zue.n),0<C$zui&&(C$zut.d=C$zue.d/C$zui),C$zut},plane.prototype.transform=function(C$zut){C$zun.Mat4.invert(C$zur,C$zut),C$zun.Mat4.transpose(C$zur,C$zur),C$zun.Vec4.set(C$zuc,this.n.x,this.n.y,this.n.z,this.d),C$zun.Vec4.transformMat4(C$zuc,C$zuc,C$zur),C$zun.Vec3.set(this.n,C$zuc.x,C$zuc.y,C$zuc.z),this.d=C$zuc.w},C$zui.default=plane,C$zue.exports=C$zui.default},{"../value-types":279,"./enums":121}],128:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zuo=C$zut("../value-types");var C$zus=(C$zut=C$zut("./enums"))&&C$zut.__esModule?C$zut:{default:C$zut};function ray(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),void 0===C$zun&&(C$zun=0),void 0===C$zua&&(C$zua=-1),this.o=void 0,this.d=void 0,this._type=void 0,this._type=C$zus.default.SHAPE_RAY,this.o=new C$zuo.Vec3(C$zut,C$zue,C$zui),this.d=new C$zuo.Vec3(C$zur,C$zun,C$zua)}ray.create=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){return new ray(C$zut=void 0===C$zut?0:C$zut,C$zue=void 0===C$zue?0:C$zue,C$zui=void 0===C$zui?0:C$zui,C$zur=void 0===C$zur?0:C$zur,C$zun=void 0===C$zun?0:C$zun,C$zua=void 0===C$zua?1:C$zua)},ray.clone=function(C$zut){return new ray(C$zut.o.x,C$zut.o.y,C$zut.o.z,C$zut.d.x,C$zut.d.y,C$zut.d.z)},ray.copy=function(C$zut,C$zue){return C$zuo.Vec3.copy(C$zut.o,C$zue.o),C$zuo.Vec3.copy(C$zut.d,C$zue.d),C$zut},ray.fromPoints=function(C$zut,C$zue,C$zui){return C$zuo.Vec3.copy(C$zut.o,C$zue),C$zuo.Vec3.normalize(C$zut.d,C$zuo.Vec3.subtract(C$zut.d,C$zui,C$zue)),C$zut},ray.set=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){return C$zut.o.x=C$zue,C$zut.o.y=C$zui,C$zut.o.z=C$zur,C$zut.d.x=C$zun,C$zut.d.y=C$zua,C$zut.d.z=C$zuo,C$zut},ray.prototype.computeHit=function(C$zut,C$zue){C$zuo.Vec3.normalize(C$zut,this.d),C$zuo.Vec3.scaleAndAdd(C$zut,this.o,C$zut,C$zue)},C$zui.default=ray,C$zue.exports=C$zui.default},{"../value-types":279,"./enums":121}],129:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zua=C$zut("../value-types");var C$zun=(C$zut=C$zut("./enums"))&&C$zut.__esModule?C$zut:{default:C$zut};var C$zur=new C$zua.Vec3;function sphere(C$zut,C$zue,C$zui,C$zur){void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=1),this.center=void 0,this.radius=void 0,this._type=void 0,this._type=C$zun.default.SHAPE_SPHERE,this.center=new C$zua.Vec3(C$zut,C$zue,C$zui),this.radius=C$zur}sphere.create=function(C$zut,C$zue,C$zui,C$zur){return new sphere(C$zut,C$zue,C$zui,C$zur)},sphere.clone=function(C$zut){return new sphere(C$zut.center.x,C$zut.center.y,C$zut.center.z,C$zut.radius)},sphere.copy=function(C$zut,C$zue){return C$zua.Vec3.copy(C$zut.center,C$zue.center),C$zut.radius=C$zue.radius,C$zut},sphere.fromPoints=function(C$zut,C$zue,C$zui){return C$zua.Vec3.multiplyScalar(C$zut.center,C$zua.Vec3.add(C$zur,C$zue,C$zui),.5),C$zut.radius=.5*C$zua.Vec3.subtract(C$zur,C$zui,C$zue).len(),C$zut},sphere.set=function(C$zut,C$zue,C$zui,C$zur,C$zun){return C$zut.center.x=C$zue,C$zut.center.y=C$zui,C$zut.center.z=C$zur,C$zut.radius=C$zun,C$zut},(C$zut=sphere.prototype).clone=function(){return sphere.clone(this)},C$zut.copy=function(C$zut){return sphere.copy(this,C$zut)},C$zut.getBoundary=function(C$zut,C$zue){C$zua.Vec3.set(C$zut,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),C$zua.Vec3.set(C$zue,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)},C$zut.transform=function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zua.Vec3.transformMat4(C$zun.center,this.center,C$zut),C$zun.radius=this.radius*C$zur.maxAxis()},C$zut.translateAndRotate=function(C$zut,C$zue,C$zui){C$zua.Vec3.transformMat4(C$zui.center,this.center,C$zut)},C$zut.setScale=function(C$zut,C$zue){C$zue.radius=this.radius*C$zut.maxAxis()},C$zui.default=sphere,C$zue.exports=C$zui.default},{"../value-types":279,"./enums":121}],130:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zul=_interopRequireDefault(C$zut("../value-types/vec3"));var C$zuh=_interopRequireDefault(C$zut("./enums"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function triangle(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this.a=new C$zul.default(C$zut,C$zue,C$zui),this.b=new C$zul.default(C$zur,C$zun,C$zua),this.c=new C$zul.default(C$zuo,C$zus,C$zuc),this._type=C$zuh.default.SHAPE_TRIANGLE}triangle.create=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){return new triangle(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc)},triangle.clone=function(C$zut){return new triangle(C$zut.a.x,C$zut.a.y,C$zut.a.z,C$zut.b.x,C$zut.b.y,C$zut.b.z,C$zut.c.x,C$zut.c.y,C$zut.c.z)},triangle.copy=function(C$zut,C$zue){return C$zul.default.copy(C$zut.a,C$zue.a),C$zul.default.copy(C$zut.b,C$zue.b),C$zul.default.copy(C$zut.c,C$zue.c),C$zut},triangle.fromPoints=function(C$zut,C$zue,C$zui,C$zur){return C$zul.default.copy(C$zut.a,C$zue),C$zul.default.copy(C$zut.b,C$zui),C$zul.default.copy(C$zut.c,C$zur),C$zut},triangle.set=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul){return C$zut.a.x=C$zue,C$zut.a.y=C$zui,C$zut.a.z=C$zur,C$zut.b.x=C$zun,C$zut.b.y=C$zua,C$zut.b.z=C$zuo,C$zut.c.x=C$zus,C$zut.c.y=C$zuc,C$zut.c.z=C$zul,C$zut},C$zui.default=triangle,C$zue.exports=C$zui.default},{"../value-types/vec3":289,"./enums":121}],131:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../components/CCRenderComponent");var C$zun=C$zut("../assets/material/CCMaterial");var C$zua=C$zut("./types");var C$zuo=C$zua.LineCap;var C$zus=C$zua.LineJoin;var C$zuc=cc.Class({name:"cc.Graphics",extends:C$zur,editor:!1,ctor:function(){this._impl=new C$zuc._Impl(this)},properties:{_lineWidth:1,_strokeColor:cc.Color.BLACK,_lineJoin:C$zus.MITER,_lineCap:C$zuo.BUTT,_fillColor:cc.Color.WHITE,_miterLimit:10,lineWidth:{get:function(){return this._lineWidth},set:function(C$zut){this._lineWidth=C$zut,this._impl.lineWidth=C$zut}},lineJoin:{get:function(){return this._lineJoin},set:function(C$zut){this._lineJoin=C$zut,this._impl.lineJoin=C$zut},type:C$zus},lineCap:{get:function(){return this._lineCap},set:function(C$zut){this._lineCap=C$zut,this._impl.lineCap=C$zut},type:C$zuo},strokeColor:{get:function(){return this._strokeColor},set:function(C$zut){this._impl.strokeColor=this._strokeColor=cc.color(C$zut)}},fillColor:{get:function(){return this._fillColor},set:function(C$zut){this._impl.fillColor=this._fillColor=cc.color(C$zut)}},miterLimit:{get:function(){return this._miterLimit},set:function(C$zut){this._miterLimit=C$zut,this._impl.miterLimit=C$zut}}},statics:{LineJoin:C$zus,LineCap:C$zuo},onRestore:function(){this._impl||(this._impl=new C$zuc._Impl(this))},onDestroy:function(){this.clear(!0),this._super(),this._impl=null},_getDefaultMaterial:function(){return C$zun.getBuiltinMaterial("2d-base")},_updateMaterial:function(){var C$zut=this._materials[0];C$zut&&C$zut.define("CC_USE_MODEL",!0)},moveTo:function(C$zut,C$zue){C$zut instanceof cc.Vec2?cc.warn("[moveTo] : Can not pass Vec2 as [x, y] value, please check it."):this._impl.moveTo(C$zut,C$zue)},lineTo:function(C$zut,C$zue){C$zut instanceof cc.Vec2?cc.warn("[moveTo] : Can not pass Vec2 as [x, y] value, please check it."):this._impl.lineTo(C$zut,C$zue)},bezierCurveTo:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this._impl.bezierCurveTo(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua)},quadraticCurveTo:function(C$zut,C$zue,C$zui,C$zur){this._impl.quadraticCurveTo(C$zut,C$zue,C$zui,C$zur)},arc:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this._impl.arc(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua)},ellipse:function(C$zut,C$zue,C$zui,C$zur){this._impl.ellipse(C$zut,C$zue,C$zui,C$zur)},circle:function(C$zut,C$zue,C$zui){this._impl.circle(C$zut,C$zue,C$zui)},rect:function(C$zut,C$zue,C$zui,C$zur){this._impl.rect(C$zut,C$zue,C$zui,C$zur)},roundRect:function(C$zut,C$zue,C$zui,C$zur,C$zun){this._impl.roundRect(C$zut,C$zue,C$zui,C$zur,C$zun)},fillRect:function(C$zut,C$zue,C$zui,C$zur){this.rect(C$zut,C$zue,C$zui,C$zur),this.fill()},clear:function(C$zut){this._impl.clear(C$zut),this._assembler&&this._assembler.clear(C$zut)},close:function(){this._impl.close()},stroke:function(){this._assembler||this._resetAssembler(),this._assembler.stroke(this)},fill:function(){this._assembler||this._resetAssembler(),this._assembler.fill(this)}});cc.Graphics=C$zue.exports=C$zuc,cc.Graphics.Types=C$zua,cc.Graphics.Helper=C$zut("./helper")},{"../assets/material/CCMaterial":53,"../components/CCRenderComponent":89,"./helper":132,"./types":134}],132:[function(C$zut,C$zue,C$zui){"use strict";var C$zub=C$zut("./types").PointFlags;var C$zug=Math.PI;var C$zuC=Math.min;var C$zuT=Math.max;var C$zux=Math.cos;var C$zuA=Math.sin;var C$zuS=Math.abs;var C$zus=Math.sign;var C$zuc=.5522847493;C$zue.exports={arc:function(C$zuh,C$zuu,C$zu_,C$zut,C$zud,C$zue,C$zuf){var C$zui=0,C$zur=0;var C$zun,C$zua,C$zuo,C$zus;var C$zup=0,C$zum=0,C$zuv=0,C$zuy=0;var C$zuc,C$zul;if(C$zui=C$zue-C$zud,C$zuf=C$zuf||!1)if(C$zuS(C$zui)>=2*C$zug)C$zui=2*C$zug;else for(;C$zui<0;)C$zui+=2*C$zug;else if(C$zuS(C$zui)>=2*C$zug)C$zui=2*-C$zug;else for(;0<C$zui;)C$zui-=2*C$zug;for(C$zul=0|C$zuT(1,C$zuC(C$zuS(C$zui)/(.5*C$zug)+.5,5)),C$zur=C$zuS(4/3*(1-C$zux(C$zue=C$zui/C$zul/2))/C$zuA(C$zue)),C$zuf||(C$zur=-C$zur),C$zuc=0;C$zuc<=C$zul;C$zuc++)C$zun=C$zuu+(C$zus=C$zux(C$zuo=C$zud+C$zui*(C$zuc/C$zul)))*C$zut,C$zua=C$zu_+(C$zuo=C$zuA(C$zuo))*C$zut,C$zuo=-C$zuo*C$zut*C$zur,C$zus=C$zus*C$zut*C$zur,0===C$zuc?C$zuh.moveTo(C$zun,C$zua):C$zuh.bezierCurveTo(C$zup+C$zuv,C$zum+C$zuy,C$zun-C$zuo,C$zua-C$zus,C$zun,C$zua),C$zup=C$zun,C$zum=C$zua,C$zuv=C$zuo,C$zuy=C$zus},ellipse:function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zut.moveTo(C$zue-C$zur,C$zui),C$zut.bezierCurveTo(C$zue-C$zur,C$zui+C$zun*C$zuc,C$zue-C$zur*C$zuc,C$zui+C$zun,C$zue,C$zui+C$zun),C$zut.bezierCurveTo(C$zue+C$zur*C$zuc,C$zui+C$zun,C$zue+C$zur,C$zui+C$zun*C$zuc,C$zue+C$zur,C$zui),C$zut.bezierCurveTo(C$zue+C$zur,C$zui-C$zun*C$zuc,C$zue+C$zur*C$zuc,C$zui-C$zun,C$zue,C$zui-C$zun),C$zut.bezierCurveTo(C$zue-C$zur*C$zuc,C$zui-C$zun,C$zue-C$zur,C$zui-C$zun*C$zuc,C$zue-C$zur,C$zui),C$zut.close()},roundRect:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo;C$zua<.1?C$zut.rect(C$zue,C$zui,C$zur,C$zun):(C$zuo=C$zuC(C$zua,.5*C$zuS(C$zur))*C$zus(C$zur),C$zua=C$zuC(C$zua,.5*C$zuS(C$zun))*C$zus(C$zun),C$zut.moveTo(C$zue,C$zui+C$zua),C$zut.lineTo(C$zue,C$zui+C$zun-C$zua),C$zut.bezierCurveTo(C$zue,C$zui+C$zun-C$zua*(1-C$zuc),C$zue+C$zuo*(1-C$zuc),C$zui+C$zun,C$zue+C$zuo,C$zui+C$zun),C$zut.lineTo(C$zue+C$zur-C$zuo,C$zui+C$zun),C$zut.bezierCurveTo(C$zue+C$zur-C$zuo*(1-C$zuc),C$zui+C$zun,C$zue+C$zur,C$zui+C$zun-C$zua*(1-C$zuc),C$zue+C$zur,C$zui+C$zun-C$zua),C$zut.lineTo(C$zue+C$zur,C$zui+C$zua),C$zut.bezierCurveTo(C$zue+C$zur,C$zui+C$zua*(1-C$zuc),C$zue+C$zur-C$zuo*(1-C$zuc),C$zui,C$zue+C$zur-C$zuo,C$zui),C$zut.lineTo(C$zue+C$zuo,C$zui),C$zut.bezierCurveTo(C$zue+C$zuo*(1-C$zuc),C$zui,C$zue,C$zui+C$zua*(1-C$zuc),C$zue,C$zui+C$zua),C$zut.close())},tesselateBezier:function tesselateBezier(C$zut,C$zue,C$zuh,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuu,C$zuc){var C$zu_,C$zud,C$zuf,C$zup,C$zum,C$zuv,C$zuy,C$zug;var C$zul;10<C$zuu||(C$zum=.5*(C$zun+C$zuo),C$zuv=.5*(C$zua+C$zus),C$zuy=.5*((C$zu_=.5*(C$zue+C$zui))+(C$zuf=.5*(C$zui+C$zun))),C$zug=.5*((C$zud=.5*(C$zuh+C$zur))+(C$zup=.5*(C$zur+C$zua))),((C$zul=C$zuS((C$zui-C$zuo)*(C$zui=C$zus-C$zuh)-(C$zur-C$zus)*(C$zur=C$zuo-C$zue)))+(C$zun=C$zuS((C$zun-C$zuo)*C$zui-(C$zua-C$zus)*C$zur)))*(C$zul+C$zun)<C$zut._tessTol*(C$zur*C$zur+C$zui*C$zui)?C$zut._addPoint(C$zuo,C$zus,0===C$zuc?C$zuc|C$zub.PT_BEVEL:C$zuc):(tesselateBezier(C$zut,C$zue,C$zuh,C$zu_,C$zud,C$zuy,C$zug,C$zul=.5*(C$zuy+(C$zua=.5*(C$zuf+C$zum))),C$zur=.5*(C$zug+(C$zun=.5*(C$zup+C$zuv))),C$zuu+1,0),tesselateBezier(C$zut,C$zul,C$zur,C$zua,C$zun,C$zum,C$zuv,C$zuo,C$zus,C$zuu+1,C$zuc)))}}},{"./types":134}],133:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./graphics")},{"./graphics":131}],134:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Enum({BUTT:0,ROUND:1,SQUARE:2});var C$zun=cc.Enum({BEVEL:0,ROUND:1,MITER:2});var C$zua=cc.Enum({PT_CORNER:1,PT_LEFT:2,PT_BEVEL:4,PT_INNERBEVEL:8});C$zue.exports={LineCap:C$zur,LineJoin:C$zun,PointFlags:C$zua}},{}],135:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./platform"),C$zut("./assets"),C$zut("./CCNode"),C$zut("./CCPrivateNode"),C$zut("./CCScene"),C$zut("./components"),C$zut("./graphics"),C$zut("./collider"),C$zut("./collider/CCIntersection"),C$zut("./physics"),C$zut("./camera/CCCamera"),C$zut("./geom-utils"),C$zut("./mesh"),C$zut("./3d"),C$zut("./base-ui/CCWidgetManager")},{"./3d":void 0,"./CCNode":30,"./CCPrivateNode":31,"./CCScene":32,"./assets":51,"./base-ui/CCWidgetManager":62,"./camera/CCCamera":63,"./collider":71,"./collider/CCIntersection":69,"./components":107,"./geom-utils":123,"./graphics":133,"./mesh":158,"./physics":173,"./platform":206}],136:[function(C$zut,C$zue,C$zui){"use strict";var C$zun=C$zut("../platform/js");var C$zur=C$zut("./pipeline");var C$zuc=C$zut("./loading-items");var C$zus=C$zut("./asset-loader");var C$zu_=C$zut("./downloader");var C$zud=C$zut("./loader");var C$zuf=C$zut("./asset-table");var C$zuu=C$zut("../platform/utils").callInNextTick;var C$zup=C$zut("./auto-release-utils");var C$zum=C$zut("./released-asset-checker");var C$zuo=Object.create(null);C$zuo.assets=new C$zuf,C$zuo.internal=new C$zuf;var C$zua={url:null,raw:!1};function getResWithUrl(C$zut){var C$zue,C$zui;if("object"==typeof C$zut){if((C$zui=C$zut).url)return C$zui;C$zue=C$zut.uuid}else C$zui={},C$zue=C$zut;return C$zut=C$zui.type?"uuid"===C$zui.type:cc.AssetLibrary._uuidInSettings(C$zue),cc.AssetLibrary._getAssetInfoInRuntime(C$zue,C$zua),C$zui.url=C$zut?C$zua.url:C$zue,C$zua.url&&"uuid"===C$zui.type&&C$zua.raw?(C$zui.type=null,C$zui.isRawAsset=!0):C$zut||(C$zui.isRawAsset=!0),C$zui}var C$zul=[];var C$zuh=[];function CCLoader(){var C$zut=new C$zus;var C$zue=new C$zu_;var C$zui=new C$zud;C$zur.call(this,[C$zut,C$zue,C$zui]),this.assetLoader=C$zut,this.md5Pipe=null,this.downloader=C$zue,this.loader=C$zui,this.onProgress=null,this._autoReleaseSetting=C$zun.createMap(!0),this._releasedAssetChecker_DEBUG=new C$zum}C$zun.extend(CCLoader,C$zur);C$zut=CCLoader.prototype;C$zut.init=function(C$zut){var C$zue=this;C$zut.on(cc.Director.EVENT_AFTER_UPDATE,function(){C$zue._releasedAssetChecker_DEBUG.checkCouldRelease(C$zue._cache)})},C$zut.getXMLHttpRequest=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},C$zut.addDownloadHandlers=function(C$zut){this.downloader.addHandlers(C$zut)},C$zut.addLoadHandlers=function(C$zut){this.loader.addHandlers(C$zut)},C$zut.load=function(C$zut,C$zue,C$zur){void 0===C$zur&&(C$zur=C$zue,C$zue=this.onProgress||null);var C$zun=this;var C$zua=!1;var C$zuo;C$zut instanceof Array||(C$zut=C$zut?(C$zua=!0,[C$zut]):[]);for(var C$zui=C$zul.length=0;C$zui<C$zut.length;++C$zui){var C$zus=C$zut[C$zui];C$zus&&C$zus.id&&(cc.warnID(4920,C$zus.id),C$zus.uuid||C$zus.url||(C$zus.url=C$zus.id)),((C$zuo=getResWithUrl(C$zus)).url||C$zuo.uuid)&&(C$zus=this._cache[C$zuo.url],C$zul.push(C$zus||C$zuo))}C$zue=C$zuc.create(this,C$zue,function(C$zue,C$zui){C$zuu(function(){var C$zut;C$zur&&(C$zua?(C$zut=C$zuo.url,C$zur.call(C$zun,C$zue,C$zui.getContent(C$zut))):C$zur.call(C$zun,C$zue,C$zui),C$zur=null),C$zui.destroy()})});C$zuc.initQueueDeps(C$zue),C$zue.append(C$zul),C$zul.length=0},C$zut.flowInDeps=function(C$zui,C$zut,C$zur){for(var C$zue=C$zuh.length=0;C$zue<C$zut.length;++C$zue){var C$zun=getResWithUrl(C$zut[C$zue]);var C$zua;(C$zun.url||C$zun.uuid)&&((C$zua=this._cache[C$zun.url])?C$zuh.push(C$zua):C$zuh.push(C$zun))}var C$zuo=C$zuc.create(this,C$zui?function(C$zut,C$zue,C$zui){this._ownerQueue&&this._ownerQueue.onProgress&&this._ownerQueue._childOnProgress(C$zui)}:null,function(C$zut,C$zue){C$zur(C$zut,C$zue),C$zui&&C$zui.deps&&(C$zui.deps.length=0),C$zue.destroy()});C$zui&&(C$zus=C$zuc.getQueue(C$zui),C$zuo._ownerQueue=C$zus._ownerQueue||C$zus);var C$zus=C$zuo.append(C$zuh,C$zui);return C$zuh.length=0,C$zus},C$zut._assetTables=C$zuo,C$zut._getResUuid=function(C$zut,C$zue,C$zui,C$zur){C$zui=C$zuo[C$zui=C$zui||"assets"];if(!C$zut||!C$zui)return null;var C$zun=C$zut.indexOf("?");-1!==C$zun&&(C$zut=C$zut.substr(0,C$zun));C$zun=C$zui.getUuid(C$zut,C$zue);var C$zua;return C$zun||(C$zua=cc.path.extname(C$zut))&&(C$zut=C$zut.slice(0,-C$zua.length),(C$zun=C$zui.getUuid(C$zut,C$zue))&&!C$zur&&cc.warnID(4901,C$zut,C$zua)),C$zun},C$zut._getReferenceKey=function(C$zut){var C$zue;return"object"==typeof C$zut?C$zue=C$zut._uuid||null:"string"==typeof C$zut&&(C$zue=this._getResUuid(C$zut,null,null,!0)||C$zut),C$zue?(cc.AssetLibrary._getAssetInfoInRuntime(C$zue,C$zua),this._cache[C$zua.url]?C$zua.url:C$zue):(cc.warnID(4800,C$zut),C$zue)},C$zut._urlNotFound=function(C$zue,C$zui,C$zur){C$zuu(function(){C$zue=cc.url.normalize(C$zue);var C$zut=(C$zui?C$zun.getClassName(C$zui):"Asset")+' in "resources/'+C$zue+'" does not exist.';C$zur&&C$zur(new Error(C$zut),[])})},C$zut._parseLoadResArgs=function(C$zut,C$zue,C$zui){var C$zur;return void 0===C$zui&&(C$zur=C$zut instanceof Array||C$zun.isChildClassOf(C$zut,cc.RawAsset),C$zue?(C$zui=C$zue,C$zur&&(C$zue=this.onProgress||null)):void 0!==C$zue||C$zur||(C$zui=C$zut,C$zue=this.onProgress||null,C$zut=null),void 0===C$zue||C$zur||(C$zue=C$zut,C$zut=null)),{type:C$zut,onProgress:C$zue,onComplete:C$zui}},C$zut.loadRes=function(C$zut,C$zue,C$zui,C$zur,C$zun){5!==arguments.length&&(C$zun=C$zur,C$zur=C$zui,C$zui="assets");var C$zua=this._parseLoadResArgs(C$zue,C$zur,C$zun);C$zue=C$zua.type,C$zur=C$zua.onProgress,C$zun=C$zua.onComplete;var C$zuo=this;var C$zus=C$zuo._getResUuid(C$zut,C$zue,C$zui);C$zus?this.load({type:"uuid",uuid:C$zus},C$zur,function(C$zut,C$zue){C$zue&&C$zuo.setAutoReleaseRecursively(C$zus,!1),C$zun&&C$zun(C$zut,C$zue)}):C$zuo._urlNotFound(C$zut,C$zue,C$zun)},C$zut._loadResUuids=function(C$zut,C$zue,C$zus,C$zuc){var C$zul,C$zuh;0<C$zut.length?(C$zul=this,C$zuh=C$zut.map(function(C$zut){return{type:"uuid",uuid:C$zut}}),this.load(C$zuh,C$zue,function(C$zut,C$zue){if(C$zus){var C$zui=[];var C$zur=C$zuc&&[];for(var C$zun=0;C$zun<C$zuh.length;++C$zun){var C$zua=C$zuh[C$zun].uuid;var C$zuo=this._getReferenceKey(C$zua);C$zuo=C$zue.getContent(C$zuo);C$zuo&&(C$zul.setAutoReleaseRecursively(C$zua,!1),C$zui.push(C$zuo),C$zur&&C$zur.push(C$zuc[C$zun]))}C$zuc?C$zus(C$zut,C$zui,C$zur):C$zus(C$zut,C$zui)}})):C$zus&&C$zuu(function(){C$zuc?C$zus(null,[],[]):C$zus(null,[])})},C$zut.loadResArray=function(C$zut,C$zue,C$zui,C$zur,C$zun){5!==arguments.length&&(C$zun=C$zur,C$zur=C$zui,C$zui="assets");var C$zua=this._parseLoadResArgs(C$zue,C$zur,C$zun);C$zue=C$zua.type,C$zur=C$zua.onProgress,C$zun=C$zua.onComplete;var C$zuo=[];var C$zuh=C$zue instanceof Array;for(var C$zus=0;C$zus<C$zut.length;C$zus++){var C$zuc=C$zut[C$zus];var C$zul=C$zuh?C$zue[C$zus]:C$zue;var C$zuu=this._getResUuid(C$zuc,C$zul,C$zui);if(!C$zuu)return void this._urlNotFound(C$zuc,C$zul,C$zun);C$zuo.push(C$zuu)}this._loadResUuids(C$zuo,C$zur,C$zun)},C$zut.loadResDir=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua;5!==arguments.length&&(C$zun=C$zur,C$zur=C$zui,C$zui="assets"),C$zuo[C$zui]&&(C$zue=(C$zua=this._parseLoadResArgs(C$zue,C$zur,C$zun)).type,C$zur=C$zua.onProgress,C$zun=C$zua.onComplete,C$zui=C$zuo[C$zui].getUuidArray(C$zut,C$zue,C$zua=[]),this._loadResUuids(C$zui,C$zur,C$zun,C$zua))},C$zut.getRes=function(C$zut,C$zue){var C$zui=this._cache[C$zut];if(!C$zui){C$zut=this._getResUuid(C$zut,C$zue,null,!0);if(!C$zut)return null;C$zue=this._getReferenceKey(C$zut);C$zui=this._cache[C$zue]}return(C$zui=C$zui&&C$zui.alias?C$zui.alias:C$zui)&&C$zui.complete?C$zui.content:null},C$zut.getResCount=function(){return Object.keys(this._cache).length},C$zut.getDependsRecursively=function(C$zut){var C$zue;return C$zut?(C$zut=this._getReferenceKey(C$zut),(C$zue=C$zup.getDependsRecursively(C$zut)).push(C$zut),C$zue):[]},C$zut.release=function(C$zut){var C$zue,C$zui,C$zur;if(Array.isArray(C$zut))for(var C$zun=0;C$zun<C$zut.length;C$zun++){var C$zua=C$zut[C$zun];this.release(C$zua)}else C$zut&&((C$zue=this._getReferenceKey(C$zut))&&C$zue in cc.AssetLibrary.getBuiltinDeps()||((C$zui=this.getItem(C$zue))&&(C$zur=this.removeItem(C$zue),C$zut=C$zui.content,C$zur&&this._releasedAssetChecker_DEBUG.setReleased(C$zui,C$zue)),C$zut instanceof cc.Asset&&((C$zur=C$zut.nativeUrl)&&this.release(C$zur),C$zut.destroy())))},C$zut.releaseAsset=function(C$zut){C$zut=C$zut._uuid;C$zut&&this.release(C$zut)},C$zut.releaseRes=function(C$zut,C$zue,C$zui){C$zue=this._getResUuid(C$zut,C$zue,C$zui);C$zue?this.release(C$zue):cc.errorID(4914,C$zut)},C$zut.releaseResDir=function(C$zut,C$zue,C$zui){if(C$zuo[C$zui=C$zui||"assets"]){var C$zur=C$zuo[C$zui].getUuidArray(C$zut,C$zue);for(var C$zun=0;C$zun<C$zur.length;C$zun++){var C$zua=C$zur[C$zun];this.release(C$zua)}}},C$zut.releaseAll=function(){for(var C$zut in this._cache)this.release(C$zut)},C$zut.removeItem=function(C$zut){var C$zue=C$zur.prototype.removeItem.call(this,C$zut);return delete this._autoReleaseSetting[C$zut],C$zue},C$zut.setAutoRelease=function(C$zut,C$zue){C$zut=this._getReferenceKey(C$zut);C$zut&&(this._autoReleaseSetting[C$zut]=!!C$zue)},C$zut.setAutoReleaseRecursively=function(C$zut,C$zue){C$zue=!!C$zue;C$zut=this._getReferenceKey(C$zut);if(C$zut){this._autoReleaseSetting[C$zut]=C$zue;var C$zui=C$zup.getDependsRecursively(C$zut);for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];this._autoReleaseSetting[C$zun]=C$zue}}},C$zut.isAutoRelease=function(C$zut){C$zut=this._getReferenceKey(C$zut);return!!C$zut&&!!this._autoReleaseSetting[C$zut]},cc.loader=new CCLoader,C$zue.exports=cc.loader},{"../platform/js":209,"../platform/utils":213,"./asset-loader":137,"./asset-table":138,"./auto-release-utils":140,"./downloader":142,"./loader":145,"./loading-items":146,"./pipeline":149,"./released-asset-checker":150}],137:[function(C$zut,C$zue,C$zui){"use strict";C$zut("../utils/CCPath");var C$zuo=C$zut("../CCDebug");var C$zur=C$zut("./pipeline");var C$zus=C$zut("./loading-items");function C$zuois(C$zut){this.id="AssetLoader",this.async=!0,this.pipeline=null}C$zuois.ID="AssetLoader";var C$zuc=[];C$zuois.prototype.handle=function(C$zur,C$zun){var C$zua=C$zur.uuid;if(!C$zua)return C$zur.content||null;cc.AssetLibrary.queryAssetInfo(C$zua,function(C$zut,C$zue,C$zui){C$zut?C$zun(C$zut):(C$zur.url=C$zur.rawUrl=C$zue,(C$zur.isRawAsset=C$zui)?(C$zut=cc.path.extname(C$zue).toLowerCase())?(C$zut=C$zut.substr(1),C$zui=C$zus.getQueue(C$zur),C$zuc[0]={queueId:C$zur.queueId,id:C$zue,url:C$zue,type:C$zut,error:null,alias:C$zur,complete:!0},C$zui.append(C$zuc),C$zur.type=C$zut,C$zun(null,C$zur.content)):C$zun(new Error(C$zuo.getError(4931,C$zua,C$zue))):(C$zur.type="uuid",C$zun(null,C$zur.content)))})},C$zur.AssetLoader=C$zue.exports=C$zuois},{"../CCDebug":27,"../utils/CCPath":253,"./loading-items":146,"./pipeline":149}],138:[function(C$zut,C$zue,C$zui){"use strict";var C$zun=C$zut("../utils/misc").pushToMap;var C$zud=C$zut("../platform/js");function Entry(C$zut,C$zue){this.uuid=C$zut,this.type=C$zue}function AssetTable(){this._pathToUuid=C$zud.createMap(!0)}C$zut=AssetTable.prototype;C$zut.getUuid=function(C$zut,C$zue){C$zut=cc.url.normalize(C$zut);var C$zui=this._pathToUuid[C$zut];if(C$zui)if(Array.isArray(C$zui)){if(!C$zue)return C$zui[0].uuid;for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];if(C$zud.isChildClassOf(C$zun.type,C$zue))return C$zun.uuid}if(C$zud.isChildClassOf(C$zue,cc.SpriteFrame))for(var C$zua=0;C$zua<C$zui.length;C$zua++){var C$zuo=C$zui[C$zua];if(C$zud.isChildClassOf(C$zuo.type,cc.SpriteAtlas)){cc.errorID(4932,C$zut);break}}}else{if(!C$zue||C$zud.isChildClassOf(C$zui.type,C$zue))return C$zui.uuid;C$zud.isChildClassOf(C$zue,cc.SpriteFrame)&&C$zud.isChildClassOf(C$zui.type,cc.SpriteAtlas)&&cc.errorID(4932,C$zut)}return""},C$zut.getUuidArray=function(C$zut,C$zue,C$zui){"/"===(C$zut=cc.url.normalize(C$zut))[C$zut.length-1]&&(C$zut=C$zut.slice(0,-1));var C$zuh=this._pathToUuid;var C$zur=[];var C$zuu=C$zud.isChildClassOf;var C$zun;for(var C$zua in C$zuh)if(C$zua.startsWith(C$zut)&&(C$zul=C$zua,C$zu_=C$zut,!(C$zul.length>C$zu_.length)||(46===(C$zul=C$zul.charCodeAt(C$zu_.length))||47===C$zul))||!C$zut){var C$zuo=C$zuh[C$zua];if(Array.isArray(C$zuo))for(var C$zus=0;C$zus<C$zuo.length;C$zus++){var C$zuc=C$zuo[C$zus];!C$zue||C$zuu(C$zuc.type,C$zue)?(C$zur.push(C$zuc.uuid),C$zui&&C$zui.push(C$zua)):C$zuc.type===cc.SpriteAtlas&&(C$zun=C$zua)}else!C$zue||C$zuu(C$zuo.type,C$zue)?(C$zur.push(C$zuo.uuid),C$zui&&C$zui.push(C$zua)):C$zuo.type===cc.SpriteAtlas&&(C$zun=C$zua)}var C$zul,C$zu_;return 0===C$zur.length&&C$zun&&C$zud.isChildClassOf(C$zue,cc.SpriteFrame)&&cc.errorID(4932,C$zun),C$zur},C$zut.add=function(C$zut,C$zue,C$zui,C$zur){C$zut=C$zut.substring(0,C$zut.length-cc.path.extname(C$zut).length);C$zue=new Entry(C$zue,C$zui);C$zun(this._pathToUuid,C$zut,C$zue,C$zur)},C$zut._getInfo_DEBUG=function(C$zut,C$zue){var C$zui=this._pathToUuid;var C$zur=Object.keys(C$zui);for(var C$zun=0;C$zun<C$zur.length;++C$zun){var C$zua=C$zur[C$zun];var C$zuo=C$zui[C$zua];if(Array.isArray(C$zuo))for(var C$zus=0;C$zus<C$zuo.length;C$zus++){var C$zuc=C$zuo[C$zus];if(C$zuc.uuid===C$zut)return C$zue.path=C$zua,C$zue.type=C$zuc.type,!0}else if(C$zuo.uuid===C$zut)return C$zue.path=C$zua,C$zue.type=C$zuo.type,!0}return!1},C$zut.reset=function(){this._pathToUuid=C$zud.createMap(!0)},C$zue.exports=AssetTable},{"../platform/js":209,"../utils/misc":264}],139:[function(C$zut,C$zue,C$zus){"use strict";var C$zui=C$zut("../platform/CCSys");var C$zur=C$zut("../CCDebug");var C$zuo=C$zui.__audioSupport;var C$zun=C$zuo.format;var C$zua=C$zuo.context;function loadDomAudio(C$zue,C$zui){var C$zut=document.createElement("audio");C$zut.src=C$zue.url;function C$zuZHs(){clearTimeout(C$zur),C$zut.removeEventListener("canplaythrough",C$zun,!1),C$zut.removeEventListener("error",C$zua,!1),C$zuo.USE_LOADER_EVENT&&C$zut.removeEventListener(C$zuo.USE_LOADER_EVENT,C$zun,!1)}var C$zur=setTimeout(function(){(0===C$zut.readyState?C$zua:C$zun)()},8e3);var C$zun=function(){C$zuZHs(),C$zui(null,C$zut)};var C$zua=function(){C$zuZHs();var C$zut="load audio failure - "+C$zue.url;cc.log(C$zut),C$zui(C$zut)};C$zut.addEventListener("canplaythrough",C$zun,!1),C$zut.addEventListener("error",C$zua,!1),C$zuo.USE_LOADER_EVENT&&C$zut.addEventListener(C$zuo.USE_LOADER_EVENT,C$zun,!1)}function loadWebAudio(C$zut,C$zue){C$zua||C$zue(new Error(C$zur.getError(4926)));var C$zui=cc.loader.getXMLHttpRequest();C$zui.open("GET",C$zut.url,!0),C$zui.responseType="arraybuffer",C$zui.onload=function(){C$zua.decodeAudioData(C$zui.response,function(C$zut){C$zue(null,C$zut)},function(){C$zue("decode error - "+C$zut.id,null)})},C$zui.onerror=function(){C$zue("request error - "+C$zut.id,null)},C$zui.send()}C$zue.exports=function(C$zut,C$zue){if(0===C$zun.length)return new Error(C$zur.getError(4927));(C$zuo.WEB_AUDIO?C$zut._owner instanceof cc.AudioClip?C$zut._owner.loadMode===cc.AudioClip.LoadMode.WEB_AUDIO?loadWebAudio:loadDomAudio:C$zut.urlParam&&C$zut.urlParam.useDom?loadDomAudio:loadWebAudio:loadDomAudio)(C$zut,C$zue)}},{"../CCDebug":27,"../platform/CCSys":198}],140:[function(C$zut,C$zue,C$zui){"use strict";var C$zu_=C$zut("../platform/js");function parseDepends(C$zut,C$zue){C$zut=cc.loader.getItem(C$zut);if(C$zut){var C$zui=C$zut.dependKeys;if(C$zui)for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];C$zue[C$zun]||(C$zue[C$zun]=!0,parseDepends(C$zun,C$zue))}}}function visitAsset(C$zut,C$zue){C$zut._uuid&&(C$zue[C$zut=cc.loader._getReferenceKey(C$zut)]||(C$zue[C$zut]=!0,parseDepends(C$zut,C$zue)))}function visitNode(C$zut,C$zuh){for(var C$zue=0;C$zue<C$zut._components.length;C$zue++){C$zui=void 0;C$zur=void 0;C$zun=void 0;C$zua=void 0;C$zuo=void 0;C$zus=void 0;C$zuc=void 0;C$zuu=void 0;C$zul=void 0;C$zu_=void 0;var C$zui=C$zut._components[C$zue];var C$zur=C$zuh;var C$zun=Object.getOwnPropertyNames(C$zui);for(var C$zua=0;C$zua<C$zun.length;C$zua++){var C$zuo=C$zui[C$zun[C$zua]];if("object"==typeof C$zuo&&C$zuo)if(Array.isArray(C$zuo))for(var C$zus=0;C$zus<C$zuo.length;C$zus++){var C$zuc=C$zuo[C$zus];C$zuc instanceof cc.RawAsset&&visitAsset(C$zuc,C$zur)}else if(C$zuo.constructor&&C$zuo.constructor!==Object)C$zuo instanceof cc.RawAsset&&visitAsset(C$zuo,C$zur);else{var C$zuu=Object.getOwnPropertyNames(C$zuo);for(var C$zul=0;C$zul<C$zuu.length;C$zul++){var C$zu_=C$zuo[C$zuu[C$zul]];C$zu_ instanceof cc.RawAsset&&visitAsset(C$zu_,C$zur)}}}}for(var C$zud=0;C$zud<C$zut._children.length;C$zud++)visitNode(C$zut._children[C$zud],C$zuh)}C$zue.exports={autoRelease:function(C$zut,C$zue,C$zuh){var C$zui=cc.loader._autoReleaseSetting;var C$zur=C$zu_.createMap();if(C$zue)for(var C$zun=0;C$zun<C$zue.length;C$zun++)C$zur[C$zue[C$zun]]=!0;for(var C$zua=0;C$zua<C$zuh.length;C$zua++)visitNode(C$zuh[C$zua],C$zur);if(C$zut)for(var C$zuo=0;C$zuo<C$zut.length;C$zuo++){var C$zus=C$zut[C$zuo];!1===C$zui[C$zus]||C$zur[C$zus]||cc.loader.release(C$zus)}var C$zuu=Object.keys(C$zui);for(var C$zuc=0;C$zuc<C$zuu.length;C$zuc++){var C$zul=C$zuu[C$zuc];!0!==C$zui[C$zul]||C$zur[C$zul]||cc.loader.release(C$zul)}},getDependsRecursively:function(C$zut){var C$zue={};return parseDepends(C$zut,C$zue),Object.keys(C$zue)}}},{"../platform/js":209}],141:[function(C$zut,C$zue,C$zui){"use strict";C$zue.exports=function(C$zut,C$zue){C$zut=C$zut.url;var C$zui=cc.loader.getXMLHttpRequest(),C$zur="Load binary data failed: "+C$zut;C$zui.open("GET",C$zut,!0),C$zui.responseType="arraybuffer",C$zui.onload=function(){var C$zut=C$zui.response;C$zut?(C$zut=new Uint8Array(C$zut),C$zue(null,C$zut)):C$zue({status:C$zui.status,errorMessage:C$zur+"(no response)"})},C$zui.onerror=function(){C$zue({status:C$zui.status,errorMessage:C$zur+"(error)"})},C$zui.ontimeout=function(){C$zue({status:C$zui.status,errorMessage:C$zur+"(time out)"})},C$zui.send(null)}},{}],142:[function(C$zut,C$zua,C$zus){"use strict";var C$zue=C$zut("../platform/js");var C$zuo=C$zut("../CCDebug");C$zut("../utils/CCPath");var C$zuc=C$zut("./pipeline");var C$zur=C$zut("./pack-downloader");var C$zui=C$zut("./binary-downloader");var C$zun=C$zut("./text-downloader");var C$zul=C$zut("./utils").urlAppendTimestamp;function skip(){return null}function downloadScript(C$zut,C$zue,C$zui){var C$zur=C$zut.url,C$zut=document,C$zun=document.createElement("script");function loadHandler(){C$zun.parentNode.removeChild(C$zun),C$zun.removeEventListener("load",loadHandler,!1),C$zun.removeEventListener("error",errorHandler,!1),C$zue(null,C$zur)}function errorHandler(){C$zun.parentNode.removeChild(C$zun),C$zun.removeEventListener("load",loadHandler,!1),C$zun.removeEventListener("error",errorHandler,!1),C$zue(new Error(C$zuo.getError(4928,C$zur)))}"file:"!==window.location.protocol&&(C$zun.crossOrigin="anonymous"),C$zun.async=C$zui,C$zun.src=C$zul(C$zur),C$zun.addEventListener("load",loadHandler,!1),C$zun.addEventListener("error",errorHandler,!1),C$zut.body.appendChild(C$zun)}function downloadImage(C$zut,C$zue,C$zui,C$zur){void 0===C$zui&&(C$zui=!0);var C$zun=C$zul(C$zut.url);if(C$zur=C$zur||new Image,C$zui&&"file:"!==window.location.protocol?C$zur.crossOrigin="anonymous":C$zur.crossOrigin=null,C$zur.complete&&0<C$zur.naturalWidth&&C$zur.src===C$zun)return C$zur;var C$zua=function loadCallback(){C$zur.removeEventListener("load",loadCallback),C$zur.removeEventListener("error",C$zuDs0),C$zur.id=C$zut.id,C$zue(null,C$zur)};function C$zuDs0(){C$zur.removeEventListener("load",C$zua),C$zur.removeEventListener("error",C$zuDs0),"https:"!==window.location.protocol&&C$zur.crossOrigin&&"anonymous"===C$zur.crossOrigin.toLowerCase()?downloadImage(C$zut,C$zue,!1,C$zur):C$zue(new Error(C$zuo.getError(4930,C$zun)))}C$zur.addEventListener("load",C$zua),C$zur.addEventListener("error",C$zuDs0),C$zur.src=C$zun}function downloadVideo(C$zut,C$zue){C$zue(null,C$zut.url)}var C$zuh={js:downloadScript,png:downloadImage,jpg:downloadImage,bmp:downloadImage,jpeg:downloadImage,gif:downloadImage,ico:downloadImage,tiff:downloadImage,webp:downloadImage,image:downloadImage,pvr:C$zui,pkm:C$zui,mp3:C$zut=C$zut("./audio-downloader"),ogg:C$zut,wav:C$zut,m4a:C$zut,txt:C$zun,xml:C$zun,vsh:C$zun,fsh:C$zun,atlas:C$zun,tmx:C$zun,tsx:C$zun,json:C$zun,ExportJson:C$zun,plist:C$zun,fnt:C$zun,font:skip,eot:skip,ttf:skip,woff:skip,svg:skip,ttc:skip,uuid:function(C$zut,C$zue){var C$zui=C$zur.load(C$zut,C$zue);return void 0===C$zui?this.extMap.json(C$zut,C$zue):C$zui||void 0},binary:C$zui,bin:C$zui,dbbin:C$zui,skel:C$zui,mp4:downloadVideo,avi:downloadVideo,mov:downloadVideo,mpg:downloadVideo,mpeg:downloadVideo,rm:downloadVideo,rmvb:downloadVideo,default:C$zun};function C$zuRs0(C$zut){this.id="Downloader",this.async=!0,this.pipeline=null,this._curConcurrent=0,this._loadQueue=[],this._subpackages={},this.extMap=C$zue.mixin(C$zut,C$zuh)}C$zuRs0.ID="Downloader",C$zuRs0.PackDownloader=C$zur,C$zuRs0.prototype.addHandlers=function(C$zut){C$zue.mixin(this.extMap,C$zut)},C$zuRs0.prototype._handleLoadQueue=function(){for(;this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT;){var C$zut=this._loadQueue.shift();if(!C$zut)break;var C$zue=this.handle(C$zut.item,C$zut.callback);void 0!==C$zue&&(C$zue instanceof Error?C$zut.callback(C$zue):C$zut.callback(null,C$zue))}},C$zuRs0.prototype.handle=function(C$zut,C$zui){var C$zur=this;var C$zue=this.extMap[C$zut.type]||this.extMap.default;var C$zun=void 0;if(this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT){if(this._curConcurrent++,void 0!==(C$zun=C$zue.call(this,C$zut,function(C$zut,C$zue){C$zur._curConcurrent=Math.max(0,C$zur._curConcurrent-1),C$zur._handleLoadQueue(),C$zui&&C$zui(C$zut,C$zue)})))return this._curConcurrent=Math.max(0,this._curConcurrent-1),this._handleLoadQueue(),C$zun}else if(C$zut.ignoreMaxConcurrency){if(void 0!==(C$zun=C$zue.call(this,C$zut,C$zui)))return C$zun}else this._loadQueue.push({item:C$zut,callback:C$zui})},C$zuRs0.prototype.loadSubpackage=function(C$zut,C$zue,C$zui){!C$zui&&C$zue&&(C$zui=C$zue,C$zue=null);var C$zur=this._subpackages[C$zut];C$zur?C$zur.loaded?C$zui&&C$zui():downloadScript({url:C$zur.path+"index.js"},function(C$zut){C$zut||(C$zur.loaded=!0),C$zui&&C$zui(C$zut)}):C$zui&&C$zui(new Error("Can't find subpackage "+C$zut))},C$zuc.Downloader=C$zua.exports=C$zuRs0},{"../CCDebug":27,"../platform/js":209,"../utils/CCPath":253,"./audio-downloader":139,"./binary-downloader":141,"./pack-downloader":148,"./pipeline":149,"./text-downloader":152,"./utils":154}],143:[function(C$zut,C$zue,C$zur){"use strict";var C$zuh=C$zut("../utils/text-utils");var C$zuu=null;var C$zu_={};var C$zud=-1;var C$zuf=[];C$zui=void 0;var C$zup=function(){var C$zut,C$zue;return C$zui=void 0===C$zui?!!window.FontFace&&(C$zut=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),C$zue=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor),C$zut?42<parseInt(C$zut[1],10):!C$zue):C$zui};var C$zui;function _checkFontLoaded(){var C$zut=!0;var C$zue=Date.now();for(var C$zui=C$zuf.length-1;0<=C$zui;C$zui--){var C$zur=C$zuf[C$zui];var C$zun=C$zur.fontFamilyName;var C$zua,C$zuo;3e3<C$zue-C$zur.startTime?(cc.warnID(4933,C$zun),C$zur.callback(null,C$zun),C$zuf.splice(C$zui,1)):(C$zua=C$zur.refWidth,C$zuu.font=C$zuo="40px "+C$zun,C$zua!==C$zuh.safeMeasureText(C$zuu,"BES bswy:->@123\u4e01\u3041\u1101",C$zuo)?(C$zuf.splice(C$zui,1),C$zur.callback(null,C$zun)):C$zut=!1)}C$zut&&(clearInterval(C$zud),C$zud=-1)}var C$zum={loadFont:function(C$zut,C$zue){C$zut=C$zut.url;var C$zui=C$zum._getFontFamily(C$zut);if(C$zu_[C$zui])return C$zui;C$zuu||((C$zur=document.createElement("canvas")).width=100,C$zur.height=100,C$zuu=C$zur.getContext("2d"));var C$zur="40px "+C$zui;C$zuu.font=C$zur;C$zur=C$zuh.safeMeasureText(C$zuu,"BES bswy:->@123\u4e01\u3041\u1101",C$zur);var C$zun=document.createElement("style");C$zun.type="text/css";var C$zua="";isNaN(+C$zui)?C$zua+="@font-face { font-family:"+C$zui+"; src:":C$zua+="@font-face { font-family:'"+C$zui+"'; src:",C$zun.textContent=(C$zua+="url('"+C$zut+"');")+"}",document.body.appendChild(C$zun);C$zut=document.createElement("div");C$zua=C$zut.style;var C$zuo,C$zus,C$zuc,C$zul;C$zua.fontFamily=C$zui,C$zut.innerHTML=".",C$zua.position="absolute",C$zua.left="-100px",C$zua.top="-100px",document.body.appendChild(C$zut),C$zup()?(C$zuo=Date.now(),C$zus=C$zui,C$zuc=C$zue,C$zua=new Promise(function(C$zue,C$zut){(function check(){3e3<=Date.now()-C$zuo?C$zut():document.fonts.load("40px "+C$zus).then(function(C$zut){1<=C$zut.length?C$zue():setTimeout(check,100)},function(){C$zut()})})()}),C$zul=null,C$zut=new Promise(function(C$zut,C$zue){C$zul=setTimeout(C$zue,3e3)}),Promise.race([C$zut,C$zua]).then(function(){C$zul&&(clearTimeout(C$zul),C$zul=null),C$zuc(null,C$zus)},function(){cc.warnID(4933,C$zus),C$zuc(null,C$zus)})):(C$zut={fontFamilyName:C$zui,refWidth:C$zur,callback:C$zue,startTime:Date.now()},C$zuf.push(C$zut),-1===C$zud&&(C$zud=setInterval(_checkFontLoaded,100))),C$zu_[C$zui]=C$zun},_getFontFamily:function(C$zut){var C$zue=C$zut.lastIndexOf(".ttf");if(-1===C$zue)return C$zut;var C$zui=C$zut.lastIndexOf("/");return C$zut=-1!==(C$zut=-1===C$zui?C$zut.substring(0,C$zue)+"_LABEL":C$zut.substring(C$zui+1,C$zue)+"_LABEL").indexOf(" ")?'"'+C$zut+'"':C$zut}};C$zue.exports=C$zum},{"../utils/text-utils":271}],144:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./downloader"),C$zut("./loader"),C$zut("./loading-items"),C$zut("./pipeline"),C$zut("./CCLoader")},{"./CCLoader":136,"./downloader":142,"./loader":145,"./loading-items":146,"./pipeline":149}],145:[function(C$zut,C$zue,C$zun){"use strict";var C$zui=C$zut("../platform/js");var C$zua=C$zut("../platform/CCSAXParser").plistParser;var C$zuo=C$zut("./pipeline");var C$zus=C$zut("../assets/CCTexture2D");var C$zur=C$zut("./uuid-loader");C$zut=C$zut("./font-loader");function loadJSON(C$zue){if("string"!=typeof C$zue.content)return new Error("JSON Loader: Input item doesn't contain string content");try{return JSON.parse(C$zue.content)}catch(C$zut){return new Error("JSON Loader: Parse json ["+C$zue.id+"] failed : "+C$zut)}}function loadImage(C$zut){if(C$zut._owner instanceof cc.Asset)return null;var C$zue=C$zut.content;if(cc.sys.platform!==cc.sys.FB_PLAYABLE_ADS&&!(C$zue instanceof Image))return new Error("Image Loader: Input item doesn't contain Image content");var C$zui=C$zut.texture||new C$zus;return C$zui._uuid=C$zut.uuid,C$zui.url=C$zut.url,C$zui._setRawAsset(C$zut.rawUrl,!1),C$zui._nativeAsset=C$zue,C$zui}function loadAudioAsAsset(C$zut,C$zue){if(C$zut._owner instanceof cc.Asset)return null;var C$zui=new cc.AudioClip;return C$zui._setRawAsset(C$zut.rawUrl,!1),C$zui._nativeAsset=C$zut.content,C$zui.url=C$zut.url,C$zui}function loadBinary(C$zut){return C$zut.load?C$zut.load(C$zut.content):null}function readBEUint16(C$zut,C$zue){return C$zut[C$zue]<<8|C$zut[C$zue+1]}var C$zuc={png:loadImage,jpg:loadImage,bmp:loadImage,jpeg:loadImage,gif:loadImage,ico:loadImage,tiff:loadImage,webp:loadImage,image:loadImage,pvr:function(C$zut){C$zut=C$zut.content instanceof ArrayBuffer?C$zut.content:C$zut.content.buffer;var C$zue=new Int32Array(C$zut,0,13);if(55727696!=C$zue[0])return new Error("Invalid magic number in PVR header");var C$zui=C$zue[7];var C$zur=C$zue[6];return C$zue=C$zue[12]+52,{_data:new Uint8Array(C$zut,C$zue),_compressed:!0,width:C$zui,height:C$zur}},pkm:function(C$zut){C$zut=C$zut.content instanceof ArrayBuffer?C$zut.content:C$zut.content.buffer;var C$zue=new Uint8Array(C$zut);var C$zui=readBEUint16(C$zue,6);if(0!==C$zui&&1!==C$zui&&3!==C$zui)return new Error("Invalid magic number in ETC header");C$zui=readBEUint16(C$zue,12);var C$zur=readBEUint16(C$zue,14);return readBEUint16(C$zue,8),readBEUint16(C$zue,10),{_data:new Uint8Array(C$zut,16),_compressed:!0,width:C$zui,height:C$zur}},mp3:loadAudioAsAsset,ogg:loadAudioAsAsset,wav:loadAudioAsAsset,m4a:loadAudioAsAsset,json:loadJSON,ExportJson:loadJSON,plist:function(C$zut){return"string"!=typeof C$zut.content?new Error("Plist Loader: Input item doesn't contain string content"):C$zua.parse(C$zut.content)||new Error("Plist Loader: Parse ["+C$zut.id+"] failed")},uuid:C$zur,prefab:C$zur,fire:C$zur,scene:C$zur,binary:loadBinary,dbbin:loadBinary,bin:loadBinary,skel:loadBinary,font:C$zut.loadFont,eot:C$zut.loadFont,ttf:C$zut.loadFont,woff:C$zut.loadFont,svg:C$zut.loadFont,ttc:C$zut.loadFont,default:function(){return null}};function C$zuwM0(C$zut){this.id="Loader",this.async=!0,this.pipeline=null,this.extMap=C$zui.mixin(C$zut,C$zuc)}C$zuwM0.ID="Loader",C$zuwM0.prototype.addHandlers=function(C$zut){this.extMap=C$zui.mixin(this.extMap,C$zut)},C$zuwM0.prototype.handle=function(C$zut,C$zue){return(this.extMap[C$zut.type]||this.extMap.default).call(this,C$zut,C$zue)},C$zuo.Loader=C$zue.exports=C$zuwM0},{"../assets/CCTexture2D":50,"../platform/CCSAXParser":196,"../platform/js":209,"./font-loader":143,"./pipeline":149,"./uuid-loader":155}],146:[function(C$zut,C$zue,C$zui){"use strict";var C$zun=C$zut("../platform/callbacks-invoker");C$zut("../utils/CCPath");var C$zuo=C$zut("../platform/js");var C$zuu=0|998*Math.random();var C$zuc=C$zuo.createMap(!0);var C$zua=[];var C$zus={WORKING:1,COMPLETE:2,ERROR:3};var C$zul=C$zuo.createMap(!0);function createItem(C$zut,C$zue){var C$zui="object"==typeof C$zut?C$zut.url:C$zut;var C$zur={queueId:C$zue,id:C$zui,url:C$zui,rawUrl:void 0,urlParam:function(C$zut){if(C$zut){C$zut=C$zut.split("?");var C$zue;if(C$zut&&C$zut[0]&&C$zut[1])return C$zue={},C$zut[1].split("&").forEach(function(C$zut){C$zut=C$zut.split("=");C$zue[C$zut[0]]=C$zut[1]}),C$zue}}(C$zui),type:"",error:null,content:null,complete:!1,states:{},deps:null};if("object"==typeof C$zut&&(C$zuo.mixin(C$zur,C$zut),C$zut.skips))for(var C$zun=0;C$zun<C$zut.skips.length;C$zun++){var C$zua=C$zut.skips[C$zun];C$zur.states[C$zua]=C$zus.COMPLETE}return C$zur.rawUrl=C$zur.url,C$zui&&!C$zur.type&&(C$zur.type=cc.path.extname(C$zui).toLowerCase().substr(1)),C$zur}var C$zuh=[];function C$zur10(C$zut,C$zue,C$zui,C$zur){C$zun.call(this),this._id=++C$zuu,(C$zuc[this._id]=this)._pipeline=C$zut,this._errorUrls=C$zuo.createMap(!0),this._appending=!1,this._ownerQueue=null,this.onProgress=C$zui,this.onComplete=C$zur,this.map=C$zuo.createMap(!0),this.completed={},this.totalCount=0,this.completedCount=0,this._pipeline?this.active=!0:this.active=!1,C$zue&&(0<C$zue.length?this.append(C$zue):this.allComplete())}C$zur10.ItemState=new cc.Enum(C$zus),C$zur10.create=function(C$zut,C$zue,C$zui,C$zur){void 0===C$zui?"function"==typeof C$zue&&(C$zur=C$zue,C$zue=C$zui=null):void 0===C$zur&&("function"==typeof C$zue?(C$zur=C$zui,C$zui=C$zue,C$zue=null):(C$zur=C$zui,C$zui=null));var C$zun=C$zua.pop();return C$zun?(C$zun._pipeline=C$zut,C$zun.onProgress=C$zui,C$zun.onComplete=C$zur,(C$zuc[C$zun._id]=C$zun)._pipeline&&(C$zun.active=!0),C$zue&&C$zun.append(C$zue)):C$zun=new C$zur10(C$zut,C$zue,C$zui,C$zur),C$zun},C$zur10.getQueue=function(C$zut){return C$zut.queueId?C$zuc[C$zut.queueId]:null},C$zur10.itemComplete=function(C$zut){var C$zue=C$zuc[C$zut.queueId];C$zue&&C$zue.itemComplete(C$zut.id)},C$zur10.initQueueDeps=function(C$zut){var C$zue=C$zul[C$zut._id];C$zue?(C$zue.completed.length=0,C$zue.deps.length=0):C$zul[C$zut._id]={completed:[],deps:[]}},C$zur10.registerQueueDep=function(C$zut,C$zue){var C$zui=C$zut.queueId||C$zut;if(!C$zui)return!1;C$zui=C$zul[C$zui];if(C$zui)-1===C$zui.deps.indexOf(C$zue)&&C$zui.deps.push(C$zue);else if(C$zut.id)for(var C$zur in C$zul){C$zur=C$zul[C$zur];-1!==C$zur.deps.indexOf(C$zut.id)&&-1===C$zur.deps.indexOf(C$zue)&&C$zur.deps.push(C$zue)}},C$zur10.finishDep=function(C$zut){for(var C$zue in C$zul){C$zue=C$zul[C$zue];-1!==C$zue.deps.indexOf(C$zut)&&-1===C$zue.completed.indexOf(C$zut)&&C$zue.completed.push(C$zut)}};C$zut=C$zur10.prototype;C$zuo.mixin(C$zut,C$zun.prototype),C$zut.append=function(C$zut,C$zue){if(!this.active)return[];C$zue&&!C$zue.deps&&(C$zue.deps=[]),this._appending=!0;var C$zui,C$zur,C$zun=[];for(C$zui=0;C$zui<C$zut.length;++C$zui){var C$zua,C$zuo;!(C$zur=C$zut[C$zui]).queueId||this.map[C$zur.id]?"string"==typeof((C$zus=C$zur).url||C$zus)&&(C$zuo=(C$zus=createItem(C$zur,this._id)).id,this.map[C$zuo]||(this.map[C$zuo]=C$zus,this.totalCount++,C$zue&&C$zue.deps.push(C$zus),C$zur10.registerQueueDep(C$zue||this._id,C$zuo),C$zun.push(C$zus))):(this.map[C$zur.id]=C$zur,C$zue&&C$zue.deps.push(C$zur),C$zur.complete||function checkCircleReference(C$zut,C$zue,C$zui){if(C$zut&&C$zue){var C$zur=!1;if(C$zuh.push(C$zue.id),C$zue.deps){var C$zun,C$zua,C$zuo=C$zue.deps;for(C$zun=0;C$zun<C$zuo.length;C$zun++){if((C$zua=C$zuo[C$zun]).id===C$zut.id){C$zur=!0;break}if(!(0<=C$zuh.indexOf(C$zua.id))&&C$zua.deps&&checkCircleReference(C$zut,C$zua,!0)){C$zur=!0;break}}}return C$zui||(C$zuh.length=0),C$zur}}(C$zue,C$zur))?(this.totalCount++,this.itemComplete(C$zur.id)):(C$zua=this,(C$zuo=C$zuc[C$zur.queueId])&&(this.totalCount++,C$zur10.registerQueueDep(C$zue||this._id,C$zur.id),C$zuo.addListener(C$zur.id,function(C$zut){C$zua.itemComplete(C$zut.id)})))}var C$zus;return this._appending=!1,this.completedCount===this.totalCount?this.allComplete():this._pipeline.flowIn(C$zun),C$zun},C$zut._childOnProgress=function(C$zut){var C$zue;this.onProgress&&(C$zue=C$zul[this._id],this.onProgress(C$zue?C$zue.completed.length:this.completedCount,C$zue?C$zue.deps.length:this.totalCount,C$zut))},C$zut.allComplete=function(){var C$zut=C$zuo.isEmptyObject(this._errorUrls)?null:this._errorUrls;this.onComplete&&this.onComplete(C$zut,this)},C$zut.isCompleted=function(){return this.completedCount>=this.totalCount},C$zut.isItemCompleted=function(C$zut){return!!this.completed[C$zut]},C$zut.exists=function(C$zut){return!!this.map[C$zut]},C$zut.getContent=function(C$zut){C$zut=this.map[C$zut];var C$zue=null;return C$zut&&(C$zut.content?C$zue=C$zut.content:C$zut.alias&&(C$zue=C$zut.alias.content)),C$zue},C$zut.getError=function(C$zut){C$zut=this.map[C$zut];var C$zue=null;return C$zut&&(C$zut.error?C$zue=C$zut.error:C$zut.alias&&(C$zue=C$zut.alias.error)),C$zue},C$zut.addListener=C$zun.prototype.on,C$zut.hasListener=C$zun.prototype.hasEventListener,C$zut.removeListener=C$zun.prototype.off,C$zut.removeAllListeners=C$zun.prototype.removeAll,C$zut.removeItem=function(C$zut){var C$zue=this.map[C$zut];C$zue&&this.completed[C$zue.alias||C$zut]&&(delete this.completed[C$zut],delete this.map[C$zut],C$zue.alias&&(delete this.completed[C$zue.alias.id],delete this.map[C$zue.alias.id]),this.completedCount--,this.totalCount--)},C$zut.itemComplete=function(C$zut){var C$zue=this.map[C$zut];var C$zui;C$zue&&(C$zui=C$zut in this._errorUrls,C$zue.error instanceof Error||C$zuo.isString(C$zue.error)?this._errorUrls[C$zut]=C$zue.error:C$zue.error?C$zuo.mixin(this._errorUrls,C$zue.error):!C$zue.error&&C$zui&&delete this._errorUrls[C$zut],this.completed[C$zut]=C$zue,this.completedCount++,C$zur10.finishDep(C$zue.id),this.onProgress&&(C$zui=C$zul[this._id],this.onProgress(C$zui?C$zui.completed.length:this.completedCount,C$zui?C$zui.deps.length:this.totalCount,C$zue)),this.emit(C$zut,C$zue),this.removeAll(C$zut),!this._appending&&this.completedCount>=this.totalCount&&this.allComplete())},C$zut.destroy=function(){this.active=!1,this._appending=!1,this._pipeline=null,this._ownerQueue=null,C$zuo.clear(this._errorUrls),this.onProgress=null,this.onComplete=null,this.map=C$zuo.createMap(!0),this.completed={},this.totalCount=0,this.completedCount=0,C$zun.call(this),C$zul[this._id]&&(C$zul[this._id].completed.length=0,C$zul[this._id].deps.length=0),delete C$zuc[this._id],delete C$zul[this._id],-1===C$zua.indexOf(this)&&C$zua.length<10&&C$zua.push(this)},cc.LoadingItems=C$zue.exports=C$zur10},{"../platform/callbacks-invoker":202,"../platform/js":209,"../utils/CCPath":253}],147:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./pipeline");var C$zur=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-]{8,})/;function C$zu$20(C$zut,C$zue,C$zui){this.id="MD5Pipe",this.async=!1,this.pipeline=null,this.md5AssetsMap=C$zut,this.md5NativeAssetsMap=C$zue,this.libraryBase=C$zui}C$zu$20.ID="MD5Pipe",C$zu$20.prototype.handle=function(C$zut){return C$zut.url=this.transformURL(C$zut.url),null},C$zu$20.prototype.transformURL=function(C$zut){var C$zui=!C$zut.startsWith(this.libraryBase)?this.md5NativeAssetsMap:this.md5AssetsMap;return C$zut=C$zut.replace(C$zur,function(C$zut,C$zue){C$zue=C$zui[C$zue];return C$zue?C$zut+"."+C$zue:C$zut})},C$zut.MD5Pipe=C$zue.exports=C$zu$20},{"./pipeline":149}],148:[function(C$zut,C$zue,C$zui){"use strict";var C$zua=C$zut("./unpackers");var C$zud=C$zut("../utils/misc").pushToMap;var C$zuo=0,C$zun=2,C$zus=3;function UnpackerData(){this.unpacker=null,this.state=C$zuo,this.duration=0}var C$zuc={};var C$zul={};var C$zuh={};var C$zuu=[];var C$zu_=null;function error(C$zut,C$zue){return new Error("Can not retrieve "+C$zut+" from packer "+C$zue)}C$zue.exports={msToRelease:12e4,initPacks:function(C$zut){for(var C$zue in C$zuc={},C$zul=C$zut){var C$zui=C$zut[C$zue];for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];var C$zua=1===C$zui.length;C$zud(C$zuc,C$zun,C$zue,C$zua)}}},_loadNewPack:function(C$zui,C$zur,C$zun){var C$zua=this;var C$zuo=cc.AssetLibrary.getLibUrlNoExt(C$zur)+".json";cc.loader.load({url:C$zuo,ignoreMaxConcurrency:!0},function(C$zut,C$zue){if(C$zut)return cc.errorID(4916,C$zui),C$zun(C$zut);C$zuh[C$zur].url=C$zuo;C$zut=C$zua._doLoadNewPack(C$zui,C$zur,C$zue);C$zut?C$zun(null,C$zut):C$zun(error(C$zui,C$zur))})},_doPreload:function(C$zut,C$zue){var C$zui=C$zuh[C$zut];C$zui||((C$zui=C$zuh[C$zut]=new UnpackerData).state=C$zun),C$zui.state!==C$zus&&(C$zui.unpacker=new C$zua.JsonUnpacker,C$zui.unpacker.load(C$zul[C$zut],C$zue),C$zui.state=C$zus)},_doLoadNewPack:function(C$zut,C$zue,C$zui){var C$zur=C$zuh[C$zue];var C$zun;return C$zur.state!==C$zus&&("string"==typeof C$zui&&(C$zui=JSON.parse(C$zui)),Array.isArray(C$zui)?C$zur.unpacker=new C$zua.JsonUnpacker:C$zui.type===C$zua.TextureUnpacker.ID&&(C$zur.unpacker=new C$zua.TextureUnpacker),C$zur.unpacker.load(C$zul[C$zue],C$zui),C$zur.state=C$zus,C$zur.duration=0,C$zuu.push(C$zue),C$zun=this,C$zu_=C$zu_||setInterval(function(){var C$zut=C$zun.msToRelease/5e3;for(var C$zue=C$zuu.length-1;0<=C$zue;C$zue--){var C$zui=C$zuu[C$zue];++C$zuh[C$zui].duration>C$zut&&C$zun.release(C$zui)}0===C$zuu.length&&(clearInterval(C$zu_),C$zu_=null)},5e3)),C$zur.unpacker.retrieve(C$zut)},_selectLoadedPack:function(C$zut){var C$zue=C$zuo;var C$zui="";for(var C$zur=0;C$zur<C$zut.length;C$zur++){var C$zun=C$zut[C$zur];var C$zua=C$zuh[C$zun];if(C$zua){C$zua=C$zua.state;if(C$zua===C$zus)return C$zun;C$zue<C$zua&&(C$zue=C$zua,C$zui=C$zun)}}return C$zue!==C$zuo?C$zui:C$zut[0]},load:function(C$zut,C$zue){C$zut=C$zut.uuid;var C$zui=C$zuc[C$zut];var C$zur;if(C$zui)return Array.isArray(C$zui)&&(C$zui=this._selectLoadedPack(C$zui)),C$zur=C$zuh[C$zui],C$zur&&C$zur.state===C$zus?(C$zur.duration=0,C$zur.unpacker.retrieve(C$zut)||error(C$zut,C$zui)):(C$zur||(console.log("Create unpacker %s for %s",C$zui,C$zut),(C$zur=C$zuh[C$zui]=new UnpackerData).state=C$zun),this._loadNewPack(C$zut,C$zui,C$zue),null)},release:function(C$zut){var C$zue=C$zuh[C$zut];C$zue&&(cc.loader.release(C$zue.url),delete C$zuh[C$zut],cc.js.array.fastRemove(C$zuu,C$zut))}}},{"../utils/misc":264,"./unpackers":153}],149:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../platform/js");var C$zun=C$zut("./loading-items");var C$zuo=C$zun.ItemState;function C$zuUX0(C$zut){this._pipes=C$zut,this._cache=C$zur.createMap(!0);for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];C$zui.handle&&C$zui.id&&(C$zui.pipeline=this,C$zui.next=C$zue<C$zut.length-1?C$zut[C$zue+1]:null)}}C$zuUX0.ItemState=C$zuo;C$zut=C$zuUX0.prototype;C$zut.insertPipe=function(C$zut,C$zue){var C$zui,C$zur;!C$zut.handle||!C$zut.id||C$zue>this._pipes.length?cc.warnID(4921):0<this._pipes.indexOf(C$zut)?cc.warnID(4922):(C$zui=null,C$zue<(C$zut.pipeline=this)._pipes.length&&(C$zui=this._pipes[C$zue]),C$zur=null,(C$zur=0<C$zue?this._pipes[C$zue-1]:C$zur)&&(C$zur.next=C$zut),C$zut.next=C$zui,this._pipes.splice(C$zue,0,C$zut))},C$zut.insertPipeAfter=function(C$zut,C$zue){C$zut=this._pipes.indexOf(C$zut);C$zut<0||this.insertPipe(C$zue,C$zut+1)},C$zut.appendPipe=function(C$zut){C$zut.handle&&C$zut.id&&(C$zut.pipeline=this,C$zut.next=null,0<this._pipes.length&&(this._pipes[this._pipes.length-1].next=C$zut),this._pipes.push(C$zut))},C$zut.flowIn=function(C$zut){var C$zue,C$zui,C$zur=this._pipes[0];if(C$zur){for(C$zue=0;C$zue<C$zut.length;C$zue++)C$zui=C$zut[C$zue],this._cache[C$zui.id]=C$zui;for(C$zue=0;C$zue<C$zut.length;C$zue++)(function flow(C$zut,C$zui){var C$zur=C$zut.id;var C$zue=C$zui.states[C$zur];var C$zun=C$zut.next;var C$zua=C$zut.pipeline;C$zui.error||C$zue===C$zuo.WORKING||C$zue===C$zuo.ERROR||(C$zue===C$zuo.COMPLETE?C$zun?flow(C$zun,C$zui):C$zua.flowOut(C$zui):(C$zui.states[C$zur]=C$zuo.WORKING,(C$zue=C$zut.handle(C$zui,function(C$zut,C$zue){C$zut?(C$zui.error=C$zut,C$zui.states[C$zur]=C$zuo.ERROR,C$zua.flowOut(C$zui)):(C$zue&&(C$zui.content=C$zue),C$zui.states[C$zur]=C$zuo.COMPLETE,C$zun?flow(C$zun,C$zui):C$zua.flowOut(C$zui))}))instanceof Error?(C$zui.error=C$zue,C$zui.states[C$zur]=C$zuo.ERROR,C$zua.flowOut(C$zui)):void 0!==C$zue&&(null!==C$zue&&(C$zui.content=C$zue),C$zui.states[C$zur]=C$zuo.COMPLETE,C$zun?flow(C$zun,C$zui):C$zua.flowOut(C$zui))))})(C$zur,C$zui=C$zut[C$zue])}else for(C$zue=0;C$zue<C$zut.length;C$zue++)this.flowOut(C$zut[C$zue])},C$zut.flowInDeps=function(C$zut,C$zue,C$zui){return C$zun.create(this,function(C$zut,C$zue){C$zui(C$zut,C$zue),C$zue.destroy()}).append(C$zue,C$zut)},C$zut.flowOut=function(C$zut){C$zut.error?delete this._cache[C$zut.id]:this._cache[C$zut.id]||(this._cache[C$zut.id]=C$zut),C$zut.complete=!0,C$zun.itemComplete(C$zut)},C$zut.copyItemStates=function(C$zut,C$zue){if(C$zue instanceof Array)for(var C$zui=0;C$zui<C$zue.length;++C$zui)C$zue[C$zui].states=C$zut.states;else C$zue.states=C$zut.states},C$zut.getItem=function(C$zut){C$zut=this._cache[C$zut];return C$zut&&(C$zut.alias||C$zut)},C$zut.removeItem=function(C$zut){var C$zue=this._cache[C$zut];return C$zue&&C$zue.complete&&delete this._cache[C$zut],C$zue},C$zut.clear=function(){for(var C$zut in this._cache){var C$zue=this._cache[C$zut];delete this._cache[C$zut],C$zue.complete||(C$zue.error=new Error("Canceled manually"),this.flowOut(C$zue))}},cc.Pipeline=C$zue.exports=C$zuUX0},{"../platform/js":209,"./loading-items":146}],150:[function(C$zut,C$zue,C$zui){"use strict";function C$zuM30(){this._releasedKeys=C$zus.createMap(!0),this._dirty=!1}function C$zuX30(C$zut,C$zue,C$zui){C$zui[C$zut]||cc.log('"'+C$zut+'" was released but maybe still referenced by '+((C$zui=C$zue).uuid?(C$zur=C$zur||{path:"",type:null},cc.loader._assetTables.assets._getInfo_DEBUG(C$zui.uuid,C$zur)?(C$zur.path="resources/"+C$zur.path,'"'+C$zur.path+'" (type: '+C$zus.getClassName(C$zur.type)+", uuid: "+C$zui.uuid+")"):'"'+C$zui.rawUrl+'" ('+C$zui.uuid+")"):'"'+C$zui.rawUrl+'"'))}var C$zus=C$zut("../platform/js");C$zuM30.prototype.setReleased=function(C$zut,C$zue){this._releasedKeys[C$zue]=!0,this._dirty=!0};var C$zur=null;C$zuM30.prototype.checkCouldRelease=function(C$zut){if(this._dirty){this._dirty=!1;var C$zue=this._releasedKeys;for(var C$zui in C$zut){var C$zur=C$zut[C$zui];var C$zun=(C$zur=C$zur.alias?C$zur.alias:C$zur).dependKeys;if(C$zun)for(var C$zua=0;C$zua<C$zun.length;++C$zua){var C$zuo=C$zun[C$zua];C$zue[C$zuo]&&(C$zuX30(C$zuo,C$zur,C$zut),delete C$zue[C$zuo])}}C$zus.clear(C$zue)}},C$zue.exports=C$zuM30},{"../platform/js":209}],151:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./pipeline");var C$zur=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-]{8,})/;var C$zun=Object.create(null);function C$zuh30(C$zut){for(var C$zue in this.id="SubPackPipe",this.async=!1,this.pipeline=null,C$zut){var C$zui=C$zut[C$zue];C$zui.uuids&&C$zui.uuids.forEach(function(C$zut){C$zun[C$zut]=C$zui.path})}}C$zuh30.ID="SubPackPipe",C$zuh30.prototype.handle=function(C$zut){return C$zut.url=this.transformURL(C$zut.url),null},C$zuh30.prototype.transformURL=function(C$zut){C$zue=(C$zue=(C$zue=C$zut).match(C$zur))?C$zue[1]:"";if(C$zue){var C$zue=C$zun[C$zue];if(C$zue)return C$zut.replace("res/raw-assets/",C$zue+"raw-assets/")}return C$zut},C$zut.SubPackPipe=C$zue.exports=C$zuh30},{"./pipeline":149}],152:[function(C$zut,C$zue,C$zui){"use strict";var C$zun=C$zut("./utils").urlAppendTimestamp;C$zue.exports=function(C$zut,C$zue){C$zut=C$zut.url;C$zut=C$zun(C$zut);var C$zui=cc.loader.getXMLHttpRequest(),C$zur="Load text file failed: "+C$zut;C$zui.open("GET",C$zut,!0),C$zui.overrideMimeType&&C$zui.overrideMimeType("text/plain; charset=utf-8"),C$zui.onload=function(){4===C$zui.readyState?200===C$zui.status||0===C$zui.status?C$zue(null,C$zui.responseText):C$zue({status:C$zui.status,errorMessage:C$zur+"(wrong status)"}):C$zue({status:C$zui.status,errorMessage:C$zur+"(wrong readyState)"})},C$zui.onerror=function(){C$zue({status:C$zui.status,errorMessage:C$zur+"(error)"})},C$zui.ontimeout=function(){C$zue({status:C$zui.status,errorMessage:C$zur+"(time out)"})},C$zui.send(null)}},{"./utils":154}],153:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../assets/CCTexture2D");C$zut=C$zut("../platform/js");function JsonUnpacker(){this.jsons={}}function TextureUnpacker(){this.contents={}}JsonUnpacker.prototype.load=function(C$zut,C$zue){C$zue.length!==C$zut.length&&cc.errorID(4915);for(var C$zui=0;C$zui<C$zut.length;C$zui++){var C$zur=C$zut[C$zui];var C$zun=C$zue[C$zui];this.jsons[C$zur]=C$zun}},JsonUnpacker.prototype.retrieve=function(C$zut){return this.jsons[C$zut]||null},TextureUnpacker.ID=C$zut._getClassId(C$zur),TextureUnpacker.prototype.load=function(C$zut,C$zue){var C$zui=C$zue.data.split("|");C$zui.length!==C$zut.length&&cc.errorID(4915);for(var C$zur=0;C$zur<C$zut.length;C$zur++)this.contents[C$zut[C$zur]]=C$zui[C$zur]},TextureUnpacker.prototype.retrieve=function(C$zut){C$zut=this.contents[C$zut];return C$zut?{__type__:TextureUnpacker.ID,content:C$zut}:null},C$zue.exports={JsonUnpacker:JsonUnpacker,TextureUnpacker:TextureUnpacker}},{"../assets/CCTexture2D":50,"../platform/js":209}],154:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=/\?/;C$zue.exports={urlAppendTimestamp:function(C$zut){return cc.game.config.noCache&&"string"==typeof C$zut&&(C$zur.test(C$zut)?C$zut+="&_t="+ +new Date:C$zut+="?_t="+ +new Date),C$zut}}},{}],155:[function(C$zut,C$zue,C$zui){"use strict";var C$zus=C$zut("../platform/js");var C$zuc=C$zut("../CCDebug");C$zut("../platform/deserialize");var C$zuf=C$zut("./loading-items");function isSceneObj(C$zut){return C$zut&&(C$zut[0]&&"cc.Scene"===C$zut[0].__type__||C$zut[1]&&"cc.Scene"===C$zut[1].__type__||C$zut[0]&&"cc.Prefab"===C$zut[0].__type__)}function loadUuid(C$zue,C$zut){if("string"==typeof C$zue.content)try{C$zua=JSON.parse(C$zue.content)}catch(C$zut){return new Error(C$zuc.getError(4923,C$zue.id,C$zut.stack))}else{if("object"!=typeof C$zue.content)return new Error(C$zuc.getError(4924));C$zua=C$zue.content}var C$zui=isSceneObj(C$zua);C$zuo=C$zui?cc._MissingScript.safeFindClass:function(C$zut){var C$zue=C$zus._getClassById(C$zut);return C$zue||(cc.warnID(4903,C$zut),Object)};var C$zur=cc.deserialize.Details.pool.get();var C$zun;try{C$zun=cc.deserialize(C$zua,C$zur,{classFinder:C$zuo,target:C$zue.existingAsset,customEnv:C$zue})}catch(C$zut){cc.deserialize.Details.pool.put(C$zur);var C$zua=C$zut.stack;return new Error(C$zuc.getError(4925,C$zue.id,C$zua))}C$zun._uuid=C$zue.uuid,C$zun.url=C$zun.nativeUrl,C$zuo=C$zun,C$zua=C$zui,(C$zui=(C$zui=C$zue).deferredLoadRaw)?C$zuo instanceof cc.Asset&&C$zuo.constructor.preventDeferredLoadDependents&&(C$zui=!1):C$zua&&(C$zuo instanceof cc.SceneAsset||C$zuo instanceof cc.Prefab)&&(C$zui=C$zuo.asyncLoadAssets);var C$zuo=function(C$zuh,C$zut,C$zue,C$zuu){var C$zui=C$zue.uuidList;var C$zur=C$zue.uuidObjList;var C$zun=C$zue.uuidPropList;var C$zua=C$zue._stillUseUrl;var C$zuo;var C$zus,C$zuc;var C$zu_=C$zuh.dependKeys=[];if(C$zuu)for(C$zuo=[],C$zus=0;C$zus<C$zui.length;C$zus++){C$zuc=C$zui[C$zus];var C$zud=C$zur[C$zus];var C$zuf=C$zun[C$zus];var C$zul=cc.AssetLibrary._getAssetInfoInRuntime(C$zuc);C$zul.raw?(C$zul=C$zul.url,C$zud[C$zuf]=C$zul,C$zu_.push(C$zul)):C$zuo.push({type:"uuid",uuid:C$zuc,deferredLoadRaw:!0,_owner:C$zud,_ownerProp:C$zuf,_stillUseUrl:C$zua[C$zus]})}else{for(C$zuo=new Array(C$zui.length),C$zus=0;C$zus<C$zui.length;C$zus++)C$zuc=C$zui[C$zus],C$zuo[C$zus]={type:"uuid",uuid:C$zuc,_owner:C$zur[C$zus],_ownerProp:C$zun[C$zus],_stillUseUrl:C$zua[C$zus]};C$zut._native&&!C$zut.constructor.preventPreloadNativeObject&&C$zuo.push({url:C$zut.nativeUrl,_owner:C$zut,_ownerProp:"_nativeAsset"})}return C$zuo}(C$zue,C$zun,C$zur,C$zui);if(cc.deserialize.Details.pool.put(C$zur),0===C$zuo.length)return C$zun.onLoad&&C$zun.onLoad(),C$zut(null,C$zun);var C$zuh,C$zuu,C$zud,C$zu_;C$zui=this.pipeline,C$zuh=C$zun,C$zuu=C$zuo,C$zud=C$zut,(C$zur=C$zue).content=C$zuh,C$zu_=C$zur.dependKeys,C$zui.flowInDeps(C$zur,C$zuu,function(C$zut,C$zue){var C$zui;var C$zur=C$zue.map;for(var C$zul in C$zur)(C$zui=C$zur[C$zul]).uuid&&C$zui.content&&(C$zui.content._uuid=C$zui.uuid);function loadCallback(C$zut){var C$zue=C$zut.content;this._stillUseUrl&&(C$zue=C$zue&&cc.RawAsset.wasRawAssetType(C$zue.constructor)?C$zue.nativeUrl:C$zut.rawUrl),"_nativeAsset"===this._ownerProp&&(this._owner.url=C$zut.url),this._owner[this._ownerProp]=C$zue,C$zut.uuid!==C$zuh._uuid&&C$zu_.indexOf(C$zut.id)<0&&C$zu_.push(C$zut.id)}for(var C$zun=0;C$zun<C$zuu.length;C$zun++){var C$zua=C$zuu[C$zun];var C$zuo=C$zua.uuid;var C$zus=C$zua.url;C$zua._owner;C$zua._ownerProp;var C$zuc;(C$zui=C$zur[C$zus])&&(C$zus=C$zua,C$zui.complete||C$zui.content?C$zui.error?cc._throw(C$zui.error.message||C$zui.error.errorMessage||C$zui.error):loadCallback.call(C$zus,C$zui):(C$zuc=(C$zua=C$zuf.getQueue(C$zui))._callbackTable[C$zuo])?C$zuc.unshift(loadCallback,C$zus):C$zua.addListener(C$zuo,loadCallback,C$zus))}if(!C$zut&&C$zuh.onLoad)try{C$zuh.onLoad()}catch(C$zut){cc._throw(C$zut)}C$zud(C$zut,C$zuh)})}(C$zue.exports=loadUuid).isSceneObj=isSceneObj},{"../CCDebug":27,"../platform/deserialize":204,"../platform/js":209,"./loading-items":146}],156:[function(C$zut,C$zue,C$zur){"use strict";var C$zul=_interopRequireDefault(C$zut("../../renderer/core/input-assembler"));var C$zuy=_interopRequireDefault(C$zut("../../renderer/gfx"));var C$zuh=C$zut("./mesh-data");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}var C$zuu=C$zut("../renderer");C$zut=C$zut("../event/event-target");function applyColor(C$zut,C$zue,C$zui){C$zut[C$zue]=C$zui._val}function applyVec2(C$zut,C$zue,C$zui){C$zut[C$zue]=C$zui.x,C$zut[C$zue+1]=C$zui.y}function applyVec3(C$zut,C$zue,C$zui){C$zut[C$zue]=C$zui.x,C$zut[C$zue+1]=C$zui.y,C$zut[C$zue+2]=C$zui.z}var C$zuv={5120:"getInt8",5121:"getUint8",5122:"getInt16",5123:"getUint16",5124:"getInt32",5125:"getUint32",5126:"getFloat32"};var C$zub={5120:"setInt8",5121:"setUint8",5122:"setInt16",5123:"setUint16",5124:"setInt32",5125:"setUint32",5126:"setFloat32"};C$zui=new ArrayBuffer(2),new DataView(C$zui).setInt16(0,256,!0);var C$zug=256===new Int16Array(C$zui)[0];var C$zui=cc.Class({name:"cc.Mesh",extends:cc.Asset,mixins:[C$zut],properties:{_nativeAsset:{override:!0,get:function(){return this._buffer},set:function(C$zut){this._buffer=ArrayBuffer.isView(C$zut)?C$zut.buffer:C$zut,this.initWithBuffer()}},_vertexBundles:{default:null,type:C$zuh.VertexBundle},_primitives:{default:null,Primitive:C$zuh.Primitive},_minPos:cc.v3(),_maxPos:cc.v3(),subMeshes:{get:function(){return this._subMeshes},set:function(C$zut){this._subMeshes=C$zut}},subDatas:{get:function(){return this._subDatas}}},ctor:function(){this._subMeshes=[],this.loaded=!1,this._subDatas=[]},initWithBuffer:function(){this._subMeshes.length=0;var C$zut=this._primitives;for(var C$zue=0;C$zue<C$zut.length;C$zue++){var C$zui=C$zut[C$zue];var C$zur=C$zui.data;C$zur=new Uint8Array(this._buffer,C$zur.offset,C$zur.length);var C$zun=this._vertexBundles[C$zui.vertexBundleIndices[0]];var C$zua=C$zun.data;C$zun=new C$zuy.default.VertexFormat(C$zun.formats);var C$zuo=new Uint8Array(this._buffer,C$zua.offset,C$zua.length);var C$zus=this._canVertexFormatBatch(C$zun);var C$zuc=new C$zuh.MeshData;C$zuc.vData=C$zuo,C$zuc.iData=C$zur,C$zuc.vfm=C$zun,C$zuc.offset=C$zua.offset,C$zuc.canBatch=C$zus,this._subDatas.push(C$zuc);C$zua=new C$zuy.default.VertexBuffer(C$zuu.device,C$zun,C$zuy.default.USAGE_STATIC,C$zuo);C$zus=new C$zuy.default.IndexBuffer(C$zuu.device,C$zui.indexUnit,C$zuy.default.USAGE_STATIC,C$zur);this._subMeshes.push(new C$zul.default(C$zua,C$zus))}this.loaded=!0,this.emit("load")},_canVertexFormatBatch:function(C$zut){var C$zue=C$zut._attr2el[C$zuy.default.ATTR_POSITION];return!C$zue||C$zue.type===C$zuy.default.ATTR_TYPE_FLOAT32&&C$zut._bytes%4==0},init:function(C$zut,C$zue,C$zui,C$zur){void 0===C$zui&&(C$zui=!1),void 0===C$zur&&(C$zur=0);C$zue=new Uint8Array(C$zut._bytes*C$zue);var C$zun=new C$zuh.MeshData;C$zun.vData=C$zue,C$zun.vfm=C$zut,C$zun.vDirty=!0,C$zun.canBatch=this._canVertexFormatBatch(C$zut);C$zut=new C$zuy.default.VertexBuffer(C$zuu.device,C$zut,C$zui?C$zuy.default.USAGE_DYNAMIC:C$zuy.default.USAGE_STATIC,C$zue);C$zun.vb=C$zut,this._subMeshes[C$zur]=new C$zul.default(C$zun.vb);C$zui=this._subDatas[C$zur];C$zui&&(C$zui.vb&&C$zui.vb.destroy(),C$zui.ib&&C$zui.ib.destroy()),this._subDatas[C$zur]=C$zun,this.loaded=!0,this.emit("load"),this.emit("init-format")},setVertices:function(C$zut,C$zue,C$zui){C$zui=this._subDatas[C$zui=C$zui||0];var C$zur=C$zui.vfm.element(C$zut);if(!C$zur)return cc.warn("Cannot find "+C$zut+" attribute in vertex defines.");var C$zuh="number"==typeof C$zue[0];var C$zun=C$zur.num;var C$zua=C$zuh?C$zue.length/C$zun|0:C$zue.length;var C$zuo;C$zui.vData.byteLength<C$zua*C$zur.stride&&C$zui.setVData(new Uint8Array(C$zua*C$zui.vfm._bytes));C$zua=4;C$zut===C$zuy.default.ATTR_COLOR?C$zuh?(C$zuo=C$zui.getVData(),C$zua=1):C$zuo=C$zui.getVData(Uint32Array):C$zuo=C$zui.getVData(Float32Array);var C$zuu=C$zur.stride/C$zua;var C$zu_=C$zur.offset/C$zua;if(C$zuh)for(var C$zus=0,C$zud=C$zue.length/C$zun;C$zus<C$zud;C$zus++){var C$zuf=C$zus*C$zun;var C$zup=C$zus*C$zuu+C$zu_;for(var C$zuc=0;C$zuc<C$zun;C$zuc++)C$zuo[C$zup+C$zuc]=C$zue[C$zuf+C$zuc]}else{var C$zum;C$zum=C$zut===C$zuy.default.ATTR_COLOR?applyColor:2===C$zun?applyVec2:applyVec3;for(var C$zul=0,C$zuv=C$zue.length;C$zul<C$zuv;C$zul++)C$zum(C$zuo,C$zul*C$zuu+C$zu_,C$zue[C$zul])}C$zui.vDirty=!0},setIndices:function(C$zut,C$zue,C$zui){C$zue=C$zue||0;var C$zur=C$zut;C$zut instanceof Uint16Array?C$zur=new Uint8Array(C$zut.buffer,C$zut.byteOffset,C$zut.byteLength):Array.isArray(C$zut)&&(C$zur=new Uint16Array(C$zut),C$zur=new Uint8Array(C$zur.buffer,C$zur.byteOffset,C$zur.byteLength));C$zut=C$zui?C$zuy.default.USAGE_DYNAMIC:C$zuy.default.USAGE_STATIC;C$zui=this._subDatas[C$zue];C$zui.ib?(C$zui.iData=C$zur,C$zui.iDirty=!0):(C$zui.iData=C$zur,C$zut=new C$zuy.default.IndexBuffer(C$zuu.device,C$zuy.default.INDEX_FMT_UINT16,C$zut,C$zur,C$zur.byteLength/C$zuy.default.IndexBuffer.BYTES_PER_INDEX[C$zuy.default.INDEX_FMT_UINT16]),C$zui.ib=C$zut,this._subMeshes[C$zue]._indexBuffer=C$zui.ib)},setPrimitiveType:function(C$zut,C$zue){this._subMeshes[C$zue=C$zue||0]?this._subMeshes[C$zue]._primitiveType=C$zut:cc.warn("Do not have sub mesh at index "+C$zue)},clear:function(){this._subMeshes.length=0;var C$zut=this._subDatas;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue].vb;C$zur&&C$zur.destroy();C$zur=C$zut[C$zue].ib;C$zur&&C$zur.destroy()}C$zut.length=0},setBoundingBox:function(C$zut,C$zue){this._minPos=C$zut,this._maxPos=C$zue},destroy:function(){this.clear()},_uploadData:function(){var C$zut=this._subDatas;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];var C$zun,C$zua;C$zur.vDirty&&(C$zun=C$zur.vb,C$zua=C$zur.vData,C$zun.update(0,C$zua),C$zur.vDirty=!1),C$zur.iDirty&&(C$zun=C$zur.ib,C$zua=C$zur.iData,C$zun.update(0,C$zua),C$zur.iDirty=!1)}},_getAttrMeshData:function(C$zut,C$zue){C$zut=this._subDatas[C$zut];if(!C$zut)return[];var C$zui=C$zut.vfm;var C$zur=C$zui.element(C$zue);if(!C$zur)return[];C$zut.attrDatas||(C$zut.attrDatas={});var C$zun=C$zut.attrDatas;var C$zua=C$zun[C$zue];if(C$zua)return C$zua;C$zua=C$zun[C$zue]=[];C$zun=C$zut.vData;var C$zuo=new DataView(C$zun.buffer,C$zun.byteOffset,C$zun.byteLength);var C$zuh=C$zur.stride;var C$zuu=C$zur.offset;var C$zus=C$zur.num;var C$zu_=C$zur.bytes/C$zus;var C$zud=C$zuv[C$zur.type];var C$zuf=C$zun.byteLength/C$zui._bytes;for(var C$zuc=0;C$zuc<C$zuf;C$zuc++){var C$zup=C$zuc*C$zuh+C$zuu;for(var C$zul=0;C$zul<C$zus;C$zul++){var C$zum=C$zuo[C$zud](C$zup+C$zul*C$zu_,C$zug);C$zua.push(C$zum)}}return C$zua},copyAttribute:function(C$zut,C$zue,C$zuh,C$zuu,C$zu_){var C$zui=!1;var C$zur=this._subDatas[C$zut];if(!C$zur)return C$zui;var C$zun=C$zur.vfm;var C$zua=C$zun.element(C$zue);if(!C$zua)return C$zui;var C$zuo=C$zub[C$zua.type];if(!C$zuo)return C$zui;var C$zus=this._getAttrMeshData(C$zut,C$zue);var C$zud=C$zur.vData.byteLength/C$zun._bytes;var C$zuf=C$zua.bytes/C$zua.num;if(0<C$zus.length){var C$zup=new DataView(C$zuh,C$zu_);var C$zum=C$zuu;var C$zuv=C$zua.num;for(var C$zuc=0;C$zuc<C$zud;++C$zuc){var C$zuy=C$zuc*C$zuv;for(var C$zul=0;C$zul<C$zuv;++C$zul)C$zup[C$zuo](C$zum*C$zuc+C$zuf*C$zul,C$zus[C$zuy+C$zul],C$zug)}C$zui=!0}return C$zui},copyIndices:function(C$zut,C$zue){C$zut=this._subDatas[C$zut];if(!C$zut)return!1;C$zut=C$zut.iData;var C$zui=C$zut.length/2;var C$zur=new DataView(C$zut.buffer,C$zut.byteOffset,C$zut.byteLength);var C$zun=C$zuv[C$zuy.default.INDEX_FMT_UINT8];for(var C$zua=0;C$zua<C$zui;++C$zua)C$zue[C$zua]=C$zur[C$zun](2*C$zua);return!0}});cc.Mesh=C$zue.exports=C$zui},{"../../renderer/core/input-assembler":302,"../../renderer/gfx":312,"../event/event-target":115,"../renderer":220,"./mesh-data":159}],157:[function(C$zut,C$zur,C$zun){"use strict";var C$zuS=_interopRequireDefault(C$zut("../../renderer/gfx"));var C$zuT=_interopRequireDefault(C$zut("../../renderer/core/input-assembler"));var C$zue=_interopRequireDefault(C$zut("../geom-utils/aabb"));var C$zua=C$zut("../utils/mesh-util");var C$zuw=_interopRequireDefault(C$zut("../value-types/vec3"));var C$zuR=_interopRequireDefault(C$zut("../value-types/mat4"));var C$zuE=_interopRequireDefault(C$zut("../assets/material/material-variant"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}var C$zuo=C$zut("../components/CCRenderComponent");var C$zus=C$zut("./CCMesh");var C$zuc=C$zut("../renderer/render-flow");var C$zuP=C$zut("../renderer");var C$zul=C$zut("../assets/material/CCMaterial");var C$zui=cc.Enum({OFF:0,ON:1});C$zut=cc.Class({name:"cc.MeshRenderer",extends:C$zuo,editor:!1,properties:{_mesh:{default:null,type:C$zus},_receiveShadows:!1,_shadowCastingMode:C$zui.OFF,_enableAutoBatch:!1,mesh:{get:function(){return this._mesh},set:function(C$zut){this._mesh!==C$zut&&(this._setMesh(C$zut),C$zut?(this.markForRender(!0),this.node._renderFlag|=C$zuc.FLAG_TRANSFORM):this.disableRender())},type:C$zus,animatable:!1},textures:{default:[],type:cc.Texture2D,visible:!1},receiveShadows:{get:function(){return this._receiveShadows},set:function(C$zut){this._receiveShadows=C$zut,this._updateReceiveShadow()},animatable:!1},shadowCastingMode:{get:function(){return this._shadowCastingMode},set:function(C$zut){this._shadowCastingMode=C$zut,this._updateCastShadow()},type:C$zui,animatable:!1},enableAutoBatch:{get:function(){return this._enableAutoBatch},set:function(C$zut){this._enableAutoBatch=C$zut}}},statics:{ShadowCastingMode:C$zui},ctor:function(){this._boundingBox=cc.geomUtils&&new C$zue.default,this._debugDatas={wireFrame:[],normal:[]}},onEnable:function(){var C$zut=this;this._super(),this._mesh&&!this._mesh.loaded?(this.disableRender(),this._mesh.once("load",function(){C$zut.isValid&&(C$zut._setMesh(C$zut._mesh),C$zut.markForRender(!0))}),(0,C$zua.postLoadMesh)(this._mesh)):this._setMesh(this._mesh),this._updateRenderNode(),this._updateMaterial()},onDestroy:function(){this._setMesh(null),cc.pool.assembler.put(this._assembler)},_updateRenderNode:function(){this._assembler.setRenderNode(this.node)},_setMesh:function(C$zut){cc.geomUtils&&C$zut&&C$zue.default.fromPoints(this._boundingBox,C$zut._minPos,C$zut._maxPos),this._mesh&&this._mesh.off("init-format",this._updateMeshAttribute,this),C$zut&&C$zut.on("init-format",this._updateMeshAttribute,this),this._mesh=C$zut,this._updateMeshAttribute()},_getDefaultMaterial:function(){return C$zul.getBuiltinMaterial("unlit")},_validateRender:function(){var C$zut=this._mesh;C$zut&&0<C$zut._subDatas.length||this.disableRender()},_updateMaterial:function(){var C$zut=this.textures;if(C$zut&&0<C$zut.length){var C$zue=this._getDefaultMaterial();for(var C$zui=0;C$zui<C$zut.length;C$zui++){var C$zur=this._materials[C$zui];C$zur&&C$zur._uuid!==C$zue._uuid||(C$zur||(C$zur=C$zuE.default.create(C$zue,this),this.setMaterial(C$zui,C$zur)),C$zur.setProperty("diffuseTexture",C$zut[C$zui]))}}this._updateReceiveShadow(),this._updateCastShadow(),this._updateMeshAttribute()},_updateReceiveShadow:function(){var C$zut=this.getMaterials();for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue].define("CC_USE_SHADOW_MAP",this._receiveShadows,void 0,!0)},_updateCastShadow:function(){var C$zut=this.getMaterials();for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue].define("CC_CASTING_SHADOW",this._shadowCastingMode===C$zui.ON,void 0,!0)},_updateMeshAttribute:function(){var C$zut=this._mesh&&this._mesh.subDatas;if(C$zut){var C$zue=this.getMaterials();for(var C$zui=0;C$zui<C$zue.length&&C$zut[C$zui];C$zui++){var C$zur=C$zut[C$zui].vfm;var C$zun=C$zue[C$zui];C$zun.define("CC_USE_ATTRIBUTE_COLOR",!!C$zur.element(C$zuS.default.ATTR_COLOR),void 0,!0),C$zun.define("CC_USE_ATTRIBUTE_UV0",!!C$zur.element(C$zuS.default.ATTR_UV0),void 0,!0),C$zun.define("CC_USE_ATTRIBUTE_NORMAL",!!C$zur.element(C$zuS.default.ATTR_NORMAL),void 0,!0),C$zun.define("CC_USE_ATTRIBUTE_TANGENT",!!C$zur.element(C$zuS.default.ATTR_TANGENT),void 0,!0)}for(var C$zua in this._debugDatas)this._debugDatas[C$zua].length=0}},_checkBacth:function(){}});var C$zuh=cc.Color.BLACK;var C$zuI=cc.Color.RED;var C$zuM=[cc.v3(),cc.v3()];var C$zuB=cc.mat4();var C$zuu={normal:function(C$zut,C$zuh,C$zue,C$zui){C$zue=C$zue.vfm;var C$zuu=C$zue.element(C$zuS.default.ATTR_NORMAL);var C$zur=C$zue.element(C$zuS.default.ATTR_POSITION);var C$zun=C$zue.element(C$zuS.default.ATTR_JOINTS);var C$zua=C$zue.element(C$zuS.default.ATTR_WEIGHTS);if(C$zuu&&C$zur){var C$zu_=[];var C$zuo=[];var C$zud;C$zuw.default.set(C$zuM[0],5,0,0),C$zuR.default.invert(C$zuB,C$zut.node._worldMatrix),C$zuw.default.transformMat4Normal(C$zuM[0],C$zuM[0],C$zuB),C$zud=C$zuM[0].mag();C$zue=C$zut.mesh;var C$zus=C$zue._getAttrMeshData(C$zui,C$zuS.default.ATTR_POSITION);var C$zuf=C$zue._getAttrMeshData(C$zui,C$zuS.default.ATTR_NORMAL);var C$zup=C$zue._getAttrMeshData(C$zui,C$zuS.default.ATTR_JOINTS);var C$zum=C$zue._getAttrMeshData(C$zui,C$zuS.default.ATTR_WEIGHTS);var C$zuv=C$zus.length/C$zur.num;for(var C$zuc=0;C$zuc<C$zuv;C$zuc++){var C$zuy=C$zuc*C$zuu.num;var C$zug=C$zuc*C$zur.num;C$zuw.default.set(C$zuM[0],C$zuf[C$zuy],C$zuf[1+C$zuy],C$zuf[2+C$zuy]),C$zuw.default.set(C$zuM[1],C$zus[C$zug],C$zus[1+C$zug],C$zus[2+C$zug]),C$zuw.default.scaleAndAdd(C$zuM[0],C$zuM[1],C$zuM[0],C$zud);for(var C$zul=0;C$zul<2;C$zul++){if(C$zuo.push(C$zuM[C$zul].x,C$zuM[C$zul].y,C$zuM[C$zul].z),C$zun){var C$zub=C$zuc*C$zun.num;for(var C$zuC=0;C$zuC<C$zun.num;C$zuC++)C$zuo.push(C$zup[C$zub+C$zuC])}if(C$zua){var C$zux=C$zuc*C$zua.num;for(var C$zuA=0;C$zuA<C$zua.num;C$zuA++)C$zuo.push(C$zum[C$zux+C$zuA])}}C$zu_.push(2*C$zuc,2*C$zuc+1)}C$zut=[{name:C$zuS.default.ATTR_POSITION,type:C$zuS.default.ATTR_TYPE_FLOAT32,num:3}];C$zun&&C$zut.push({name:C$zuS.default.ATTR_JOINTS,type:C$zuS.default.ATTR_TYPE_FLOAT32,num:C$zun.num}),C$zua&&C$zut.push({name:C$zuS.default.ATTR_WEIGHTS,type:C$zuS.default.ATTR_TYPE_FLOAT32,num:C$zua.num});C$zue=new C$zuS.default.VertexFormat(C$zut);C$zui=new C$zuS.default.VertexBuffer(C$zuP.device,C$zue,C$zuS.default.USAGE_STATIC,new Float32Array(C$zuo));C$zut=new Uint16Array(C$zu_);C$zue=new C$zuS.default.IndexBuffer(C$zuP.device,C$zuS.default.INDEX_FMT_UINT16,C$zuS.default.USAGE_STATIC,C$zut,C$zut.length);C$zut=C$zuE.default.createWithBuiltin("unlit");return C$zut.setProperty("diffuseColor",C$zuI),{material:C$zut,ia:new C$zuT.default(C$zui,C$zue,C$zuS.default.PT_LINES)}}},wireFrame:function(C$zul,C$zut,C$zue){var C$zui=C$zue.getIData(Uint16Array);C$zue=C$zuE.default.createWithBuiltin("unlit");C$zue.setProperty("diffuseColor",C$zuh);var C$zur=[];for(var C$zun=0;C$zun<C$zui.length;C$zun+=3){var C$zua=C$zui[C$zun+0];var C$zuo=C$zui[C$zun+1];var C$zus=C$zui[C$zun+2];C$zur.push(C$zua,C$zuo,C$zuo,C$zus,C$zus,C$zua)}var C$zuc=new Uint16Array(C$zur);C$zuc=new C$zuS.default.IndexBuffer(C$zuP.device,C$zuS.default.INDEX_FMT_UINT16,C$zuS.default.USAGE_STATIC,C$zuc,C$zuc.length);return{material:C$zue,ia:new C$zuT.default(C$zut._vertexBuffer,C$zuc,C$zuS.default.PT_LINES)}}};C$zut.prototype._updateDebugDatas=function(){var C$zut=this._debugDatas;var C$zue=this._mesh.subMeshes;var C$zui=this._mesh._subDatas;for(var C$zur in C$zut){var C$zun=C$zut[C$zur];if(C$zun.length!==C$zue.length&&cc.macro["SHOW_MESH_"+C$zur.toUpperCase()]){C$zun.length=C$zue.length;for(var C$zua=0;C$zua<C$zue.length;C$zua++)C$zun[C$zua]=C$zuu[C$zur](this,C$zue[C$zua],C$zui[C$zua],C$zua)}}},cc.MeshRenderer=C$zur.exports=C$zut},{"../../renderer/core/input-assembler":302,"../../renderer/gfx":312,"../assets/material/CCMaterial":53,"../assets/material/material-variant":60,"../components/CCRenderComponent":89,"../geom-utils/aabb":119,"../renderer":220,"../renderer/render-flow":221,"../utils/mesh-util":263,"../value-types/mat4":281,"../value-types/vec3":289,"./CCMesh":156}],158:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCMesh"),C$zut("./CCMeshRenderer"),C$zut("./mesh-renderer")},{"./CCMesh":156,"./CCMeshRenderer":157,"./mesh-renderer":160}],159:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.MeshData=MeshData,C$zui.Primitive=C$zui.VertexBundle=C$zui.VertexFormat=C$zui.BufferRange=void 0;C$zut=(C$zut=C$zut("../../renderer/gfx"))&&C$zut.__esModule?C$zut:{default:C$zut};var C$zur=cc.Class({name:"cc.BufferRange",properties:{offset:0,length:0}});C$zui.BufferRange=C$zur;var C$zun=cc.Class({name:"cc.mesh.VertexFormat",properties:{name:"",type:-1,num:-1,normalize:!1}});C$zui.VertexFormat=C$zun;C$zun=cc.Class({name:"cc.mesh.VertexBundle",properties:{data:{default:null,type:C$zur},formats:{default:[],type:C$zun},verticesCount:0}});C$zui.VertexBundle=C$zun;C$zun=cc.Class({name:"cc.mesh.Primitive",properties:{vertexBundleIndices:{default:[],type:cc.Float},data:{default:null,type:C$zur},indexUnit:C$zut.default.INDEX_FMT_UINT16,topology:C$zut.default.PT_TRIANGLES}});function MeshData(){this.vData=null,this.float32VData=null,this.uint32VData=null,this.iData=null,this.uint16IData=null,this.vfm=null,this.offset=0,this.vb=null,this.ib=null,this.vDirty=!1,this.iDirty=!1,this.enable=!0}C$zui.Primitive=C$zun,MeshData.prototype.setVData=function(C$zut){this.vData=C$zut,this.float32VData=null,this.uint32VData=null},MeshData.prototype.getVData=function(C$zut){return C$zut===Float32Array?(this.float32VData||(this.float32VData=new Float32Array(this.vData.buffer,this.vData.byteOffset,this.vData.byteLength/4)),this.float32VData):C$zut===Uint32Array?(this.uint32VData||(this.uint32VData=new Uint32Array(this.vData.buffer,this.vData.byteOffset,this.vData.byteLength/4)),this.uint32VData):this.vData},MeshData.prototype.getIData=function(C$zut){return C$zut===Uint16Array?(this.uint16IData||(this.uint16IData=new Uint16Array(this.iData.buffer,this.iData.byteOffset,this.iData.byteLength/2)),this.uint16IData):this.iData}},{"../../renderer/gfx":312}],160:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=_interopRequireDefault(C$zut("../renderer/assembler"));var C$zup=_interopRequireDefault(C$zut("../../renderer/gfx"));var C$zum=_interopRequireDefault(C$zut("../value-types/vec3"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zut=C$zut("./CCMeshRenderer");var C$zuv=new C$zum.default;var C$zun=function(C$zue){var C$zut;C$zut=C$zue,(C$zui=MeshRendererAssembler).prototype=Object.create(C$zut.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zut;_createSuper(MeshRendererAssembler);function MeshRendererAssembler(){return C$zue.apply(this,arguments)||this}var C$zui=MeshRendererAssembler.prototype;return C$zui.init=function(C$zut){C$zue.prototype.init.call(this,C$zut),this._worldDatas={},this._renderNode=null},C$zui.setRenderNode=function(C$zut){this._renderNode=C$zut},C$zui.fillBuffers=function(C$zut,C$zue){if(C$zut.mesh){C$zut.mesh._uploadData();var C$zui=C$zue.cullingMask===C$zut.node._cullingMask;var C$zur=C$zut.enableAutoBatch;var C$zun=C$zut._materials;var C$zua=C$zut.mesh._subMeshes;var C$zuh=C$zut.mesh.subDatas;for(var C$zuo=0;C$zuo<C$zua.length;C$zuo++){var C$zus=C$zua[C$zuo];var C$zuc=C$zuh[C$zuo];var C$zul=C$zun[C$zuo]||C$zun[0];C$zur&&C$zuc.canBatch&&C$zus._primitiveType===C$zup.default.PT_TRIANGLES?(C$zui&&C$zul.getHash()===C$zue.material.getHash()||C$zue._flush(),C$zue.material=C$zul,C$zue.cullingMask=C$zut.node._cullingMask,C$zue.node=C$zue._dummyNode,this._fillBuffer(C$zut,C$zuc,C$zue,C$zuo)):(C$zue._flush(),C$zue.material=C$zul,C$zue.cullingMask=C$zut.node._cullingMask,C$zue.node=this._renderNode,C$zue._flushIA(C$zus))}!cc.macro.SHOW_MESH_WIREFRAME&&!cc.macro.SHOW_MESH_NORMAL||C$zut.node._cullingMask&1<<cc.Node.BuiltinGroupIndex.DEBUG||(C$zue._flush(),C$zue.node=this._renderNode,C$zut._updateDebugDatas(),cc.macro.SHOW_MESH_WIREFRAME&&this._drawDebugDatas(C$zut,C$zue,"wireFrame"),cc.macro.SHOW_MESH_NORMAL&&this._drawDebugDatas(C$zut,C$zue,"normal"))}},C$zui._fillBuffer=function(C$zuh,C$zut,C$zue,C$zui){var C$zur=C$zut.getVData(Float32Array);var C$zun=C$zut.vfm;var C$zua=C$zur.byteLength/C$zun._bytes|0;var C$zuo=C$zut.getIData(Uint16Array);var C$zus=C$zuo.length;C$zut=C$zue.getBuffer("mesh",C$zun);var C$zuc=C$zut.request(C$zua,C$zus);var C$zuu=C$zuc.indiceOffset,C$zu_=C$zuc.byteOffset>>2,C$zud=C$zuc.vertexOffset,C$zuc=C$zut._vData,C$zuf=C$zut._iData;!C$zue.worldMatDirty&&this._worldDatas[C$zui]||this._updateWorldVertices(C$zui,C$zua,C$zur,C$zun,C$zuh.node._worldMatrix),C$zuc.set(this._worldDatas[C$zui],C$zu_);for(var C$zul=0;C$zul<C$zus;C$zul++)C$zuf[C$zuu+C$zul]=C$zud+C$zuo[C$zul]},C$zui._updateWorldVertices=function(C$zut,C$zue,C$zui,C$zur,C$zuh){var C$zun=this._worldDatas[C$zut];C$zun||(C$zun=this._worldDatas[C$zut]=new Float32Array(C$zui.length)).set(C$zui);var C$zuu=C$zur._bytes/4;var C$zua=C$zur._elements;for(var C$zuo=0,C$zu_=C$zua.length;C$zuo<C$zu_;C$zuo++){var C$zus=C$zua[C$zuo];var C$zud=C$zus.offset/4;if(C$zus.name===C$zup.default.ATTR_POSITION||C$zus.name===C$zup.default.ATTR_NORMAL){var C$zuf=C$zus.name===C$zup.default.ATTR_NORMAL?C$zum.default.transformMat4Normal:C$zum.default.transformMat4;for(var C$zuc=0;C$zuc<C$zue;C$zuc++){var C$zul=C$zuc*C$zuu+C$zud;C$zuv.x=C$zui[C$zul],C$zuv.y=C$zui[1+C$zul],C$zuv.z=C$zui[2+C$zul],C$zuf(C$zuv,C$zuv,C$zuh),C$zun[C$zul]=C$zuv.x,C$zun[1+C$zul]=C$zuv.y,C$zun[2+C$zul]=C$zuv.z}}}},C$zui._drawDebugDatas=function(C$zut,C$zue,C$zui){var C$zur=C$zut._debugDatas[C$zui];if(C$zur)for(var C$zun=0;C$zun<C$zur.length;C$zun++){var C$zua=C$zur[C$zun];var C$zuo;C$zua&&(C$zuo=C$zua.material,C$zue.material=C$zuo,C$zue._flushIA(C$zua.ia))}},MeshRendererAssembler}(C$zur.default);C$zui.default=C$zun,C$zur.default.register(C$zut,C$zun),C$zue.exports=C$zui.default},{"../../renderer/gfx":312,"../renderer/assembler":217,"../value-types/vec3":289,"./CCMeshRenderer":157}],161:[function(C$zut,C$zur,C$zuc){"use strict";var C$zui=C$zut("./component-scheduler");var C$zue=C$zut("./platform/CCObject").Flags;var C$zu_=C$zut("./platform/js");var C$zua=C$zue.IsPreloadStarted;var C$zuo=C$zue.IsOnLoadStarted;var C$zun=C$zue.IsOnLoadCalled;var C$zud=C$zue.Deactivating;var C$zul=cc.Class({extends:C$zui.LifeCycleInvoker,add:function(C$zut){this._zero.array.push(C$zut)},remove:function(C$zut){this._zero.fastRemove(C$zut)},cancelInactive:function(C$zut){C$zui.LifeCycleInvoker.stableRemoveInactive(this._zero,C$zut)},invoke:function(){this._invoke(this._zero),this._zero.array.length=0}});var C$zuh=C$zui.createInvokeImpl(function(C$zut){C$zut.__preload()},!1,void 0,function(C$zut){var C$zue=C$zut.array;for(C$zut.i=0;C$zut.i<C$zue.length;++C$zut.i)C$zue[C$zut.i].__preload()});var C$zuu=C$zui.createInvokeImpl(function(C$zut){C$zut.onLoad(),C$zut._objFlags|=C$zun},!1,C$zun,function(C$zut){var C$zue=C$zut.array;for(C$zut.i=0;C$zut.i<C$zue.length;++C$zut.i){var C$zui=C$zue[C$zut.i];C$zui.onLoad(),C$zui._objFlags|=C$zun}});var C$zus=new C$zu_.Pool(4);function ctor(){this._activatingStack=[]}C$zus.get=function(){var C$zut=this._get()||{preload:new C$zul(C$zuh),onLoad:new C$zui.OneOffInvoker(C$zuu),onEnable:new C$zui.OneOffInvoker(C$zui.invokeOnEnable)};C$zut.preload._zero.i=-1;var C$zue=C$zut.onLoad;return C$zue._zero.i=-1,C$zue._neg.i=-1,C$zue._pos.i=-1,(C$zue=C$zut.onEnable)._zero.i=-1,C$zue._neg.i=-1,C$zue._pos.i=-1,C$zut};C$zut=cc.Class({ctor:ctor,reset:ctor,_activateNodeRecursively:function(C$zut,C$zue,C$zui,C$zur){if(C$zut._objFlags&C$zud)cc.errorID(3816,C$zut.name);else{C$zut._activeInHierarchy=!0;var C$zun=C$zut._components.length;for(var C$zua=0;C$zua<C$zun;++C$zua){var C$zuo=C$zut._components[C$zua];C$zuo instanceof cc.Component?this.activateComp(C$zuo,C$zue,C$zui,C$zur):(C$zus=C$zut,C$zuh=C$zua,(C$zuo=C$zuo)?C$zus._removeComponent(C$zuo):C$zu_.array.removeAt(C$zus._components,C$zuh),--C$zua,--C$zun)}var C$zus,C$zuh;C$zut._childArrivalOrder=C$zut._children.length;for(var C$zuc=0,C$zuu=C$zut._children.length;C$zuc<C$zuu;++C$zuc){var C$zul=C$zut._children[C$zuc];C$zul._localZOrder=4294901760&C$zul._localZOrder|C$zuc+1,C$zul._active&&this._activateNodeRecursively(C$zul,C$zue,C$zui,C$zur)}C$zut._onPostActivated(!0)}},_deactivateNodeRecursively:function(C$zut){C$zut._objFlags|=C$zud,C$zut._activeInHierarchy=!1;var C$zue=C$zut._components.length;for(var C$zui=0;C$zui<C$zue;++C$zui){var C$zur=C$zut._components[C$zui];if(C$zur._enabled&&(cc.director._compScheduler.disableComp(C$zur),C$zut._activeInHierarchy))return void(C$zut._objFlags&=~C$zud)}for(var C$zun=0,C$zua=C$zut._children.length;C$zun<C$zua;++C$zun){var C$zuo=C$zut._children[C$zun];if(C$zuo._activeInHierarchy&&(this._deactivateNodeRecursively(C$zuo),C$zut._activeInHierarchy))return void(C$zut._objFlags&=~C$zud)}C$zut._onPostActivated(!1),C$zut._objFlags&=~C$zud},activateNode:function(C$zut,C$zue){if(C$zue){C$zue=C$zus.get();this._activatingStack.push(C$zue),this._activateNodeRecursively(C$zut,C$zue.preload,C$zue.onLoad,C$zue.onEnable),C$zue.preload.invoke(),C$zue.onLoad.invoke(),C$zue.onEnable.invoke(),this._activatingStack.pop(),C$zus.put(C$zue)}else{this._deactivateNodeRecursively(C$zut);var C$zui=this._activatingStack;for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];C$zun.preload.cancelInactive(C$zua),C$zun.onLoad.cancelInactive(C$zuo),C$zun.onEnable.cancelInactive()}}C$zut.emit("active-in-hierarchy-changed",C$zut)},activateComp:function(C$zut,C$zue,C$zui,C$zur){cc.isValid(C$zut,!0)&&(C$zut._objFlags&C$zua||(C$zut._objFlags|=C$zua,C$zut.__preload&&(C$zue?C$zue.add(C$zut):C$zut.__preload())),C$zut._objFlags&C$zuo||(C$zut._objFlags|=C$zuo,C$zut.onLoad?C$zui?C$zui.add(C$zut):(C$zut.onLoad(),C$zut._objFlags|=C$zun):C$zut._objFlags|=C$zun),!C$zut._enabled||C$zut.node._activeInHierarchy&&cc.director._compScheduler.enableComp(C$zut,C$zur))},destroyComp:function(C$zut){cc.director._compScheduler.disableComp(C$zut),C$zut.onDestroy&&C$zut._objFlags&C$zun&&C$zut.onDestroy()},resetComp:!1});C$zur.exports=C$zut},{"./component-scheduler":72,"./platform/CCObject":195,"./platform/js":209,"./utils/misc":264}],162:[function(C$zut,C$zue,C$zur){"use strict";var C$zul=C$zut("./CCPhysicsTypes").PTM_RATIO;var C$zuh=C$zut("./CCPhysicsTypes").ContactType;var C$zui=[];var C$zud=[cc.v2(),cc.v2()];var C$zuc=new b2.WorldManifold;var C$zuu={points:[],separations:[],normal:cc.v2()};function ManifoldPoint(){this.localPoint=cc.v2(),this.normalImpulse=0,this.tangentImpulse=0}var C$zuf=[new ManifoldPoint,new ManifoldPoint];new b2.Manifold;var C$zu_={type:0,localPoint:cc.v2(),localNormal:cc.v2(),points:[]};var C$zua={normalImpulses:[],tangentImpulses:[]};function PhysicsContact(){}PhysicsContact.prototype.init=function(C$zut){this.colliderA=C$zut.GetFixtureA().collider,this.colliderB=C$zut.GetFixtureB().collider,this.disabled=!1,this.disabledOnce=!1,this._impulse=null,this._inverted=!1,(this._b2contact=C$zut)._contact=this},PhysicsContact.prototype.reset=function(){this.setTangentSpeed(0),this.resetFriction(),this.resetRestitution(),this.colliderA=null,this.colliderB=null,this.disabled=!1,this._impulse=null,this._b2contact._contact=null,this._b2contact=null},PhysicsContact.prototype.getWorldManifold=function(){var C$zut=C$zuu.points;var C$zue=C$zuu.separations;var C$zui=C$zuu.normal;this._b2contact.GetWorldManifold(C$zuc);var C$zur=C$zuc.points;var C$zun=C$zuc.separations;var C$zua=this._b2contact.GetManifold().pointCount;C$zut.length=C$zue.length=C$zua;for(var C$zuo=0;C$zuo<C$zua;C$zuo++){var C$zus=C$zud[C$zuo];C$zus.x=C$zur[C$zuo].x*C$zul,C$zus.y=C$zur[C$zuo].y*C$zul,C$zut[C$zuo]=C$zus,C$zue[C$zuo]=C$zun[C$zuo]*C$zul}return C$zui.x=C$zuc.normal.x,C$zui.y=C$zuc.normal.y,this._inverted&&(C$zui.x*=-1,C$zui.y*=-1),C$zuu},PhysicsContact.prototype.getManifold=function(){var C$zut=C$zu_.points;var C$zue=C$zu_.localNormal;var C$zui=C$zu_.localPoint;var C$zur=this._b2contact.GetManifold();var C$zun=C$zur.points;var C$zua=C$zut.length=C$zur.pointCount;for(var C$zuo=0;C$zuo<C$zua;C$zuo++){var C$zus=C$zuf[C$zuo];var C$zuc=C$zun[C$zuo];C$zus.localPoint.x=C$zuc.localPoint.x*C$zul,C$zus.localPoint.Y=C$zuc.localPoint.Y*C$zul,C$zus.normalImpulse=C$zuc.normalImpulse*C$zul,C$zus.tangentImpulse=C$zuc.tangentImpulse,C$zut[C$zuo]=C$zus}return C$zui.x=C$zur.localPoint.x*C$zul,C$zui.y=C$zur.localPoint.y*C$zul,C$zue.x=C$zur.localNormal.x,C$zue.y=C$zur.localNormal.y,C$zu_.type=C$zur.type,this._inverted&&(C$zue.x*=-1,C$zue.y*=-1),C$zu_},PhysicsContact.prototype.getImpulse=function(){var C$zut=this._impulse;if(!C$zut)return null;var C$zue=C$zua.normalImpulses;var C$zui=C$zua.tangentImpulses;var C$zur=C$zut.count;for(var C$zun=0;C$zun<C$zur;C$zun++)C$zue[C$zun]=C$zut.normalImpulses[C$zun]*C$zul,C$zui[C$zun]=C$zut.tangentImpulses[C$zun];return C$zui.length=C$zue.length=C$zur,C$zua},PhysicsContact.prototype.emit=function(C$zut){var C$zue;switch(C$zut){case C$zuh.BEGIN_CONTACT:C$zue="onBeginContact";break;case C$zuh.END_CONTACT:C$zue="onEndContact";break;case C$zuh.PRE_SOLVE:C$zue="onPreSolve";break;case C$zuh.POST_SOLVE:C$zue="onPostSolve"}var C$zui=this.colliderA;var C$zur=this.colliderB;C$zut=C$zui.body;var C$zun=C$zur.body;var C$zua;var C$zuo,C$zus,C$zuc;if(C$zut.enabledContactListener)for(C$zua=C$zut.node._components,this._inverted=!1,C$zuo=0,C$zus=C$zua.length;C$zuo<C$zus;C$zuo++)(C$zuc=C$zua[C$zuo])[C$zue]&&C$zuc[C$zue](this,C$zui,C$zur);if(C$zun.enabledContactListener)for(C$zua=C$zun.node._components,this._inverted=!0,C$zuo=0,C$zus=C$zua.length;C$zuo<C$zus;C$zuo++)(C$zuc=C$zua[C$zuo])[C$zue]&&C$zuc[C$zue](this,C$zur,C$zui);(this.disabled||this.disabledOnce)&&(this.setEnabled(!1),this.disabledOnce=!1)},PhysicsContact.get=function(C$zut){var C$zue;return(C$zue=0===C$zui.length?new cc.PhysicsContact:C$zui.pop()).init(C$zut),C$zue},PhysicsContact.put=function(C$zut){C$zut=C$zut._contact;C$zut&&(C$zui.push(C$zut),C$zut.reset())};C$zut=PhysicsContact.prototype;C$zut.setEnabled=function(C$zut){this._b2contact.SetEnabled(C$zut)},C$zut.isTouching=function(){return this._b2contact.IsTouching()},C$zut.setTangentSpeed=function(C$zut){this._b2contact.SetTangentSpeed(C$zut/C$zul)},C$zut.getTangentSpeed=function(){return this._b2contact.GetTangentSpeed()*C$zul},C$zut.setFriction=function(C$zut){this._b2contact.SetFriction(C$zut)},C$zut.getFriction=function(){return this._b2contact.GetFriction()},C$zut.resetFriction=function(){return this._b2contact.ResetFriction()},C$zut.setRestitution=function(C$zut){this._b2contact.SetRestitution(C$zut)},C$zut.getRestitution=function(){return this._b2contact.GetRestitution()},C$zut.resetRestitution=function(){return this._b2contact.ResetRestitution()},PhysicsContact.ContactType=C$zuh,cc.PhysicsContact=C$zue.exports=PhysicsContact},{"./CCPhysicsTypes":164}],163:[function(C$zut,C$zun,C$zua){"use strict";var C$zue=C$zut("./CCPhysicsTypes");var C$zui=C$zue.ContactType;var C$zuc=C$zue.BodyType;var C$zud=C$zue.RayCastType;var C$zuo=C$zue.DrawBits;var C$zuf=C$zue.PTM_RATIO;C$zue.ANGLE_TO_PHYSICS_ANGLE;var C$zuh=C$zue.PHYSICS_ANGLE_TO_ANGLE;var C$zuu=C$zut("./utils").convertToNodeRotation;var C$zu_=C$zut("./platform/CCPhysicsDebugDraw");var C$zur=new b2.AABB;var C$zup=new b2.Vec2;var C$zum=new b2.Vec2;var C$zus=cc.v2();var C$zul=cc.Class({mixins:[cc.EventTarget],statics:{DrawBits:C$zuo,PTM_RATIO:C$zuf,VELOCITY_ITERATIONS:10,POSITION_ITERATIONS:10,FIXED_TIME_STEP:1/60,MAX_ACCUMULATOR:.2},ctor:function(){this._debugDrawFlags=0,this._debugDrawer=null,this._world=null,this._bodies=[],this._joints=[],this._contactMap={},this._contactID=0,this._delayEvents=[],this._accumulator=0,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this),this.enabledAccumulator=!1},pushDelayEvent:function(C$zut,C$zue,C$zui){this._steping?this._delayEvents.push({target:C$zut,func:C$zue,args:C$zui}):C$zut[C$zue].apply(C$zut,C$zui)},update:function(C$zut){var C$zue=this._world;if(C$zue&&this.enabled){this.emit("before-step"),this._steping=!0;var C$zui=C$zul.VELOCITY_ITERATIONS;var C$zur=C$zul.POSITION_ITERATIONS;if(this.enabledAccumulator){this._accumulator+=C$zut;var C$zun=C$zul.FIXED_TIME_STEP;C$zut=C$zul.MAX_ACCUMULATOR;for(this._accumulator>C$zut&&(this._accumulator=C$zut);this._accumulator>C$zun;)C$zue.Step(C$zun,C$zui,C$zur),this._accumulator-=C$zun}else{C$zut=1/cc.game.config.frameRate;C$zue.Step(C$zut,C$zui,C$zur)}this.debugDrawFlags&&(this._checkDebugDrawValid(),this._debugDrawer.clear(),C$zue.DrawDebugData()),this._steping=!1;var C$zua=this._delayEvents;for(var C$zuo=0,C$zus=C$zua.length;C$zuo<C$zus;C$zuo++){var C$zuc=C$zua[C$zuo];C$zuc.target[C$zuc.func].apply(C$zuc.target,C$zuc.args)}C$zua.length=0,this._syncNode()}},testPoint:function(C$zut){var C$zue=C$zup.x=C$zut.x/C$zuf;C$zut=C$zup.y=C$zut.y/C$zuf;var C$zui=.2/C$zuf;C$zur.lowerBound.x=C$zue-C$zui,C$zur.lowerBound.y=C$zut-C$zui,C$zur.upperBound.x=C$zue+C$zui,C$zur.upperBound.y=C$zut+C$zui;C$zue=this._aabbQueryCallback;C$zue.init(C$zup),this._world.QueryAABB(C$zue,C$zur);C$zut=C$zue.getFixture();return C$zut?C$zut.collider:null},testAABB:function(C$zut){C$zur.lowerBound.x=C$zut.xMin/C$zuf,C$zur.lowerBound.y=C$zut.yMin/C$zuf,C$zur.upperBound.x=C$zut.xMax/C$zuf,C$zur.upperBound.y=C$zut.yMax/C$zuf;C$zut=this._aabbQueryCallback;return C$zut.init(),this._world.QueryAABB(C$zut,C$zur),C$zut.getFixtures().map(function(C$zut){return C$zut.collider})},rayCast:function(C$zut,C$zue,C$zui){if(C$zut.equals(C$zue))return[];C$zui=C$zui||C$zud.Closest,C$zup.x=C$zut.x/C$zuf,C$zup.y=C$zut.y/C$zuf,C$zum.x=C$zue.x/C$zuf,C$zum.y=C$zue.y/C$zuf;C$zut=this._raycastQueryCallback;C$zut.init(C$zui),this._world.RayCast(C$zut,C$zup,C$zum);var C$zur=C$zut.getFixtures();if(0<C$zur.length){var C$zun=C$zut.getPoints();var C$zua=C$zut.getNormals();var C$zuo=C$zut.getFractions();var C$zuh=[];for(var C$zus=0,C$zuu=C$zur.length;C$zus<C$zuu;C$zus++){var C$zu_=C$zur[C$zus];var C$zuc=C$zu_.collider;if(C$zui===C$zud.AllClosest){var C$zul=C$zuh.find(function(C$zut){return C$zut.collider===C$zuc});if(C$zul){C$zuo[C$zus]<C$zul.fraction&&(C$zul.fixtureIndex=C$zuc._getFixtureIndex(C$zu_),C$zul.point.x=C$zun[C$zus].x*C$zuf,C$zul.point.y=C$zun[C$zus].y*C$zuf,C$zul.normal.x=C$zua[C$zus].x,C$zul.normal.y=C$zua[C$zus].y,C$zul.fraction=C$zuo[C$zus]);continue}}C$zuh.push({collider:C$zuc,fixtureIndex:C$zuc._getFixtureIndex(C$zu_),point:cc.v2(C$zun[C$zus].x*C$zuf,C$zun[C$zus].y*C$zuf),normal:cc.v2(C$zua[C$zus]),fraction:C$zuo[C$zus]})}return C$zuh}return[]},syncPosition:function(){var C$zut=this._bodies;for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue].syncPosition()},syncRotation:function(){var C$zut=this._bodies;for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue].syncRotation()},_registerContactFixture:function(C$zut){this._contactListener.registerContactFixture(C$zut)},_unregisterContactFixture:function(C$zut){this._contactListener.unregisterContactFixture(C$zut)},_addBody:function(C$zut,C$zue){var C$zui=this._world;var C$zur=C$zut.node;C$zui&&C$zur&&(C$zut._b2Body=C$zui.CreateBody(C$zue),C$zut._b2Body.body=C$zut,this._bodies.push(C$zut))},_removeBody:function(C$zut){var C$zue=this._world;C$zue&&(C$zut._b2Body.body=null,C$zue.DestroyBody(C$zut._b2Body),C$zut._b2Body=null,cc.js.array.remove(this._bodies,C$zut))},_addJoint:function(C$zut,C$zue){C$zue=this._world.CreateJoint(C$zue);C$zue&&((C$zue._joint=C$zut)._joint=C$zue,this._joints.push(C$zut))},_removeJoint:function(C$zut){C$zut._isValid()&&this._world.DestroyJoint(C$zut._joint),C$zut._joint&&(C$zut._joint._joint=null),cc.js.array.remove(this._joints,C$zut)},_initCallback:function(){var C$zut;this._world?this._contactListener||((C$zut=new cc.PhysicsContactListener).setBeginContact(this._onBeginContact),C$zut.setEndContact(this._onEndContact),C$zut.setPreSolve(this._onPreSolve),C$zut.setPostSolve(this._onPostSolve),this._world.SetContactListener(C$zut),this._contactListener=C$zut,this._aabbQueryCallback=new cc.PhysicsAABBQueryCallback,this._raycastQueryCallback=new cc.PhysicsRayCastCallback):cc.warn("Please init PhysicsManager first")},_init:function(){this.enabled=!0,this.debugDrawFlags=C$zuo.e_shapeBit},_getWorld:function(){return this._world},_syncNode:function(){var C$zut=this._bodies;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];var C$zun=C$zur.node;var C$zua=C$zur._b2Body;var C$zuo=C$zua.GetPosition();C$zus.x=C$zuo.x*C$zuf,C$zus.y=C$zuo.y*C$zuf;C$zuo=C$zua.GetAngle()*C$zuh;null!==C$zun.parent.parent&&(C$zus=C$zun.parent.convertToNodeSpaceAR(C$zus),C$zuo=C$zuu(C$zun.parent,C$zuo));C$zua=C$zun._eventMask;C$zun._eventMask=0,C$zun.position=C$zus,C$zun.angle=-C$zuo,C$zun._eventMask=C$zua,C$zur.type===C$zuc.Animated&&C$zur.resetVelocity()}},_onBeginContact:function(C$zut){cc.PhysicsContact.get(C$zut).emit(C$zui.BEGIN_CONTACT)},_onEndContact:function(C$zut){var C$zue=C$zut._contact;C$zue&&(C$zue.emit(C$zui.END_CONTACT),cc.PhysicsContact.put(C$zut))},_onPreSolve:function(C$zut){C$zut=C$zut._contact;C$zut&&C$zut.emit(C$zui.PRE_SOLVE)},_onPostSolve:function(C$zut,C$zue){C$zut=C$zut._contact;C$zut&&(C$zut._impulse=C$zue,C$zut.emit(C$zui.POST_SOLVE),C$zut._impulse=null)},_checkDebugDrawValid:function(){var C$zut;this._debugDrawer&&this._debugDrawer.isValid||((C$zut=new cc.Node("PHYSICS_MANAGER_DEBUG_DRAW")).zIndex=cc.macro.MAX_ZINDEX,cc.game.addPersistRootNode(C$zut),this._debugDrawer=C$zut.addComponent(cc.Graphics),(C$zut=new C$zu_(this._debugDrawer)).SetFlags(this.debugDrawFlags),this._world.SetDebugDraw(C$zut))}});cc.js.getset(C$zul.prototype,"enabled",function(){return this._enabled},function(C$zut){var C$zue;C$zut&&!this._world&&((C$zue=new b2.World(new b2.Vec2(0,-10))).SetAllowSleeping(!0),this._world=C$zue,this._initCallback()),this._enabled=C$zut}),cc.js.getset(C$zul.prototype,"debugDrawFlags",function(){return this._debugDrawFlags},function(C$zut){C$zut&&!this._debugDrawFlags?this._debugDrawer&&this._debugDrawer.node&&(this._debugDrawer.node.active=!0):!C$zut&&this._debugDrawFlags&&this._debugDrawer&&this._debugDrawer.node&&(this._debugDrawer.node.active=!1),C$zut&&(this._checkDebugDrawValid(),this._world.m_debugDraw.SetFlags(C$zut)),(this._debugDrawFlags=C$zut)&&(this._checkDebugDrawValid(),this._world.m_debugDraw.SetFlags(C$zut))}),cc.js.getset(C$zul.prototype,"gravity",function(){var C$zut;return this._world?(C$zut=this._world.GetGravity(),cc.v2(C$zut.x*C$zuf,C$zut.y*C$zuf)):cc.v2()},function(C$zut){this._world&&this._world.SetGravity(new b2.Vec2(C$zut.x/C$zuf,C$zut.y/C$zuf))}),cc.PhysicsManager=C$zun.exports=C$zul},{"./CCPhysicsTypes":164,"./platform/CCPhysicsDebugDraw":185,"./utils":187}],164:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Enum({Static:0,Kinematic:1,Dynamic:2,Animated:3});cc.RigidBodyType=C$zur;var C$zun=cc.Enum({Closest:0,Any:1,AllClosest:2,All:3});cc.RayCastType=C$zun,C$zue.exports={BodyType:C$zur,ContactType:{BEGIN_CONTACT:"begin-contact",END_CONTACT:"end-contact",PRE_SOLVE:"pre-solve",POST_SOLVE:"post-solve"},RayCastType:C$zun,DrawBits:b2.DrawFlags,PTM_RATIO:32,ANGLE_TO_PHYSICS_ANGLE:-Math.PI/180,PHYSICS_ANGLE_TO_ANGLE:-180/Math.PI}},{}],165:[function(C$zut,C$zue,C$zui){"use strict";function At(C$zut,C$zue){var C$zui=C$zue.length;return C$zue[C$zut<0?C$zui- -C$zut%C$zui:C$zut%C$zui]}function Copy(C$zut,C$zue,C$zui){var C$zur=[];for(;C$zue<C$zut;)C$zue+=C$zui.length;for(;C$zut<=C$zue;++C$zut)C$zur.push(At(C$zut,C$zui));return C$zur}function Reflex(C$zut,C$zue){return Right(C$zut,C$zue)}function Right(C$zut,C$zue,C$zui){var C$zur,C$zun;return void 0===C$zui&&(C$zut=At((C$zur=C$zut)-1,C$zun=C$zue),C$zue=At(C$zur,C$zun),C$zui=At(C$zur+1,C$zun)),Area(C$zut,C$zue,C$zui)<0}function Left(C$zut,C$zue,C$zui){return 0<Area(C$zut,C$zue,C$zui)}function LeftOn(C$zut,C$zue,C$zui){return 0<=Area(C$zut,C$zue,C$zui)}function RightOn(C$zut,C$zue,C$zui){return Area(C$zut,C$zue,C$zui)<=0}function SquareDist(C$zut,C$zue){var C$zui=C$zue.x-C$zut.x;C$zue=C$zue.y-C$zut.y;return C$zui*C$zui+C$zue*C$zue}function ForceCounterClockWise(C$zut){IsCounterClockWise(C$zut)||C$zut.reverse()}function IsCounterClockWise(C$zut){return C$zut.length<3||0<function(C$zut){var C$zue;var C$zui=0;for(C$zue=0;C$zue<C$zut.length;C$zue++){var C$zur=(C$zue+1)%C$zut.length;C$zui=(C$zui+=C$zut[C$zue].x*C$zut[C$zur].y)-C$zut[C$zue].y*C$zut[C$zur].x}return C$zui/=2}(C$zut)}function LineIntersect(C$zut,C$zue,C$zui,C$zur){var C$zun=cc.v2();var C$zua=C$zue.y-C$zut.y;C$zue=C$zut.x-C$zue.x;C$zut=C$zua*C$zut.x+C$zue*C$zut.y;var C$zuo=C$zur.y-C$zui.y;C$zur=C$zui.x-C$zur.x;C$zui=C$zuo*C$zui.x+C$zur*C$zui.y;var C$zus=C$zua*C$zur-C$zuo*C$zue;var C$zuc;return C$zuc=0,Math.abs(C$zus-C$zuc)<=1e-6||(C$zun.x=(C$zur*C$zut-C$zue*C$zui)/C$zus,C$zun.y=(C$zua*C$zui-C$zuo*C$zut)/C$zus),C$zun}function Area(C$zut,C$zue,C$zui){return C$zut.x*(C$zue.y-C$zui.y)+C$zue.x*(C$zui.y-C$zut.y)+C$zui.x*(C$zut.y-C$zue.y)}C$zue.exports={ConvexPartition:function ConvexPartition(C$zut){ForceCounterClockWise(C$zut);var C$zue=[];var C$zui,C$zur,C$zuh;var C$zun;var C$zuu=cc.v2();var C$zu_=cc.v2();var C$zua=0,C$zuo=0;var C$zud,C$zuf;for(var C$zus=0;C$zus<C$zut.length;++C$zus)if(Reflex(C$zus,C$zut)){C$zur=C$zuh=1e8;for(var C$zuc=0;C$zuc<C$zut.length;++C$zuc)Left(At(C$zus-1,C$zut),At(C$zus,C$zut),At(C$zuc,C$zut))&&RightOn(At(C$zus-1,C$zut),At(C$zus,C$zut),At(C$zuc-1,C$zut))&&(C$zun=LineIntersect(At(C$zus-1,C$zut),At(C$zus,C$zut),At(C$zuc,C$zut),At(C$zuc-1,C$zut)),Right(At(C$zus+1,C$zut),At(C$zus,C$zut),C$zun)&&(C$zui=SquareDist(At(C$zus,C$zut),C$zun))<C$zur&&(C$zur=C$zui,C$zuu=C$zun,C$zua=C$zuc)),Left(At(C$zus+1,C$zut),At(C$zus,C$zut),At(C$zuc+1,C$zut))&&RightOn(At(C$zus+1,C$zut),At(C$zus,C$zut),At(C$zuc,C$zut))&&(C$zun=LineIntersect(At(C$zus+1,C$zut),At(C$zus,C$zut),At(C$zuc,C$zut),At(C$zuc+1,C$zut)),Left(At(C$zus-1,C$zut),At(C$zus,C$zut),C$zun)&&(C$zui=SquareDist(At(C$zus,C$zut),C$zun))<C$zuh&&(C$zuh=C$zui,C$zuo=C$zuc,C$zu_=C$zun));if(C$zua==(C$zuo+1)%C$zut.length){var C$zup=C$zuu.add(C$zu_).div(2);(C$zud=Copy(C$zus,C$zuo,C$zut)).push(C$zup),(C$zuf=Copy(C$zua,C$zus,C$zut)).push(C$zup)}else{var C$zum=0,C$zuv=C$zua;for(;C$zuo<C$zua;)C$zuo+=C$zut.length;for(C$zuc=C$zua;C$zuc<=C$zuo;++C$zuc){var C$zul;!function(C$zut,C$zue,C$zui){if(Reflex(C$zut,C$zui)){if(LeftOn(At(C$zut,C$zui),At(C$zut-1,C$zui),At(C$zue,C$zui))&&RightOn(At(C$zut,C$zui),At(C$zut+1,C$zui),At(C$zue,C$zui)))return}else if(RightOn(At(C$zut,C$zui),At(C$zut+1,C$zui),At(C$zue,C$zui))||LeftOn(At(C$zut,C$zui),At(C$zut-1,C$zui),At(C$zue,C$zui)))return;if(Reflex(C$zue,C$zui)){if(LeftOn(At(C$zue,C$zui),At(C$zue-1,C$zui),At(C$zut,C$zui))&&RightOn(At(C$zue,C$zui),At(C$zue+1,C$zui),At(C$zut,C$zui)))return}else if(RightOn(At(C$zue,C$zui),At(C$zue+1,C$zui),At(C$zut,C$zui))||LeftOn(At(C$zue,C$zui),At(C$zue-1,C$zui),At(C$zut,C$zui)))return;for(var C$zur=0;C$zur<C$zui.length;++C$zur)if((C$zur+1)%C$zui.length!=C$zut&&C$zur!=C$zut&&(C$zur+1)%C$zui.length!=C$zue&&C$zur!=C$zue){var C$zun=cc.v2();if(function(C$zut,C$zue,C$zui,C$zur,C$zuh){if(C$zut!=C$zui&&C$zut!=C$zur&&C$zue!=C$zui&&C$zue!=C$zur){var C$zun=C$zut.x;C$zut=C$zut.y;var C$zua=C$zue.x;C$zue=C$zue.y;var C$zuo=C$zui.x;C$zui=C$zui.y;var C$zus=C$zur.x;var C$zuc,C$zul;if(C$zur=C$zur.y,!(Math.max(C$zun,C$zua)<Math.min(C$zuo,C$zus)||Math.max(C$zuo,C$zus)<Math.min(C$zun,C$zua)))if(!(Math.max(C$zut,C$zue)<Math.min(C$zui,C$zur)||Math.max(C$zui,C$zur)<Math.min(C$zut,C$zue)))return C$zuc=(C$zus-C$zuo)*(C$zut-C$zui)-(C$zur-C$zui)*(C$zun-C$zuo),C$zul=(C$zua-C$zun)*(C$zut-C$zui)-(C$zue-C$zut)*(C$zun-C$zuo),C$zur=(C$zur-C$zui)*(C$zua-C$zun)-(C$zus-C$zuo)*(C$zue-C$zut),Math.abs(C$zur)<1e-6?void 0:(C$zul/=C$zur,0<(C$zuc/=C$zur)&&C$zuc<1&&0<C$zul&&C$zul<1&&(C$zuh.x=C$zun+C$zuc*(C$zua-C$zun),C$zuh.y=C$zut+C$zuc*(C$zue-C$zut),1))}}(At(C$zut,C$zui),At(C$zue,C$zui),At(C$zur,C$zui),At(C$zur+1,C$zui),C$zun))return}return 1}(C$zus,C$zuc,C$zut)||(C$zul=1/(SquareDist(At(C$zus,C$zut),At(C$zuc,C$zut))+1),Reflex(C$zuc,C$zut)?RightOn(At(C$zuc-1,C$zut),At(C$zuc,C$zut),At(C$zus,C$zut))&&LeftOn(At(C$zuc+1,C$zut),At(C$zuc,C$zut),At(C$zus,C$zut))?C$zul+=3:C$zul+=2:C$zul+=1,C$zum<C$zul&&(C$zuv=C$zuc,C$zum=C$zul))}C$zud=Copy(C$zus,C$zuv,C$zut),C$zuf=Copy(C$zuv,C$zus,C$zut)}return C$zue=(C$zue=C$zue.concat(ConvexPartition(C$zud))).concat(ConvexPartition(C$zuf))}C$zue.push(C$zut);for(C$zus=C$zue.length-1;0<=C$zus;C$zus--)0==C$zue[C$zus].length&&C$zue.splice(C$zus,0);return C$zue},ForceCounterClockWise:ForceCounterClockWise,IsCounterClockWise:IsCounterClockWise}},{}],166:[function(C$zut,C$zuh,C$zuu){"use strict";var C$zue=C$zut("../CCNode").EventType;var C$zun=C$zut("./CCPhysicsTypes").PTM_RATIO;var C$zua=C$zut("./CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE;var C$zui=C$zut("./CCPhysicsTypes").PHYSICS_ANGLE_TO_ANGLE;var C$zuo=C$zut("./utils").getWorldRotation;var C$zus=C$zut("./CCPhysicsTypes").BodyType;var C$zur=new b2.Vec2;var C$zuc=new b2.Vec2;var C$zul=cc.Vec2.ZERO;C$zut=cc.Class({name:"cc.RigidBody",extends:cc.Component,editor:!1,properties:{_type:C$zus.Dynamic,_allowSleep:!0,_gravityScale:1,_linearDamping:0,_angularDamping:0,_linearVelocity:cc.v2(0,0),_angularVelocity:0,_fixedRotation:!1,enabled:{get:function(){return this._enabled},set:function(){cc.warnID(8200)},visible:!1,override:!0},enabledContactListener:{default:!1,tooltip:!1},bullet:{default:!1,tooltip:!1},type:{type:C$zus,tooltip:!1,get:function(){return this._type},set:function(C$zut){this._type=C$zut,this._b2Body&&(C$zut===C$zus.Animated?this._b2Body.SetType(C$zus.Kinematic):this._b2Body.SetType(C$zut))}},allowSleep:{tooltip:!1,get:function(){return this._b2Body?this._b2Body.IsSleepingAllowed():this._allowSleep},set:function(C$zut){this._allowSleep=C$zut,this._b2Body&&this._b2Body.SetSleepingAllowed(C$zut)}},gravityScale:{tooltip:!1,get:function(){return this._gravityScale},set:function(C$zut){this._gravityScale=C$zut,this._b2Body&&this._b2Body.SetGravityScale(C$zut)}},linearDamping:{tooltip:!1,get:function(){return this._linearDamping},set:function(C$zut){this._linearDamping=C$zut,this._b2Body&&this._b2Body.SetLinearDamping(this._linearDamping)}},angularDamping:{tooltip:!1,get:function(){return this._angularDamping},set:function(C$zut){this._angularDamping=C$zut,this._b2Body&&this._b2Body.SetAngularDamping(C$zut)}},linearVelocity:{tooltip:!1,type:cc.Vec2,get:function(){var C$zut=this._linearVelocity;var C$zue;return this._b2Body&&(C$zue=this._b2Body.GetLinearVelocity(),C$zut.x=C$zue.x*C$zun,C$zut.y=C$zue.y*C$zun),C$zut},set:function(C$zut){this._linearVelocity=C$zut;var C$zue=this._b2Body;var C$zui;C$zue&&((C$zui=C$zue.m_linearVelocity).Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zue.SetLinearVelocity(C$zui))}},angularVelocity:{tooltip:!1,get:function(){return this._b2Body?this._b2Body.GetAngularVelocity()*C$zui:this._angularVelocity},set:function(C$zut){this._angularVelocity=C$zut,this._b2Body&&this._b2Body.SetAngularVelocity(C$zut*C$zua)}},fixedRotation:{tooltip:!1,get:function(){return this._fixedRotation},set:function(C$zut){this._fixedRotation=C$zut,this._b2Body&&this._b2Body.SetFixedRotation(C$zut)}},awake:{visible:!1,tooltip:!1,get:function(){return!!this._b2Body&&this._b2Body.IsAwake()},set:function(C$zut){this._b2Body&&this._b2Body.SetAwake(C$zut)}},awakeOnLoad:{default:!0,tooltip:!1,animatable:!1},active:{visible:!1,get:function(){return!!this._b2Body&&this._b2Body.IsActive()},set:function(C$zut){this._b2Body&&this._b2Body.SetActive(C$zut)}}},getLocalPoint:function(C$zut,C$zue){return C$zue=C$zue||cc.v2(),this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zut=this._b2Body.GetLocalPoint(C$zur,C$zue),C$zue.x=C$zut.x*C$zun,C$zue.y=C$zut.y*C$zun),C$zue},getWorldPoint:function(C$zut,C$zue){return C$zue=C$zue||cc.v2(),this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zut=this._b2Body.GetWorldPoint(C$zur,C$zue),C$zue.x=C$zut.x*C$zun,C$zue.y=C$zut.y*C$zun),C$zue},getWorldVector:function(C$zut,C$zue){return C$zue=C$zue||cc.v2(),this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zut=this._b2Body.GetWorldVector(C$zur,C$zue),C$zue.x=C$zut.x*C$zun,C$zue.y=C$zut.y*C$zun),C$zue},getLocalVector:function(C$zut,C$zue){return C$zue=C$zue||cc.v2(),this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zut=this._b2Body.GetLocalVector(C$zur,C$zue),C$zue.x=C$zut.x*C$zun,C$zue.y=C$zut.y*C$zun),C$zue},getWorldPosition:function(C$zut){var C$zue;return C$zut=C$zut||cc.v2(),this._b2Body&&(C$zue=this._b2Body.GetPosition(),C$zut.x=C$zue.x*C$zun,C$zut.y=C$zue.y*C$zun),C$zut},getWorldRotation:function(){return this._b2Body?this._b2Body.GetAngle()*C$zui:0},getLocalCenter:function(C$zut){var C$zue;return C$zut=C$zut||cc.v2(),this._b2Body&&(C$zue=this._b2Body.GetLocalCenter(),C$zut.x=C$zue.x*C$zun,C$zut.y=C$zue.y*C$zun),C$zut},getWorldCenter:function(C$zut){var C$zue;return C$zut=C$zut||cc.v2(),this._b2Body&&(C$zue=this._b2Body.GetWorldCenter(),C$zut.x=C$zue.x*C$zun,C$zut.y=C$zue.y*C$zun),C$zut},getLinearVelocityFromWorldPoint:function(C$zut,C$zue){return C$zue=C$zue||cc.v2(),this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zut=this._b2Body.GetLinearVelocityFromWorldPoint(C$zur,C$zue),C$zue.x=C$zut.x*C$zun,C$zue.y=C$zut.y*C$zun),C$zue},getMass:function(){return this._b2Body?this._b2Body.GetMass():0},getInertia:function(){return this._b2Body?this._b2Body.GetInertia()*C$zun*C$zun:0},getJointList:function(){if(!this._b2Body)return[];var C$zut=[];var C$zue=this._b2Body.GetJointList();if(!C$zue)return[];C$zut.push(C$zue.joint._joint);var C$zui=C$zue.prev;for(;C$zui;)C$zut.push(C$zui.joint._joint),C$zui=C$zui.prev;var C$zur=C$zue.next;for(;C$zur;)C$zut.push(C$zur.joint._joint),C$zur=C$zur.next;return C$zut},applyForce:function(C$zut,C$zue,C$zui){this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zuc.Set(C$zue.x/C$zun,C$zue.y/C$zun),this._b2Body.ApplyForce(C$zur,C$zuc,C$zui))},applyForceToCenter:function(C$zut,C$zue){this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),this._b2Body.ApplyForceToCenter(C$zur,C$zue))},applyTorque:function(C$zut,C$zue){this._b2Body&&this._b2Body.ApplyTorque(C$zut/C$zun,C$zue)},applyLinearImpulse:function(C$zut,C$zue,C$zui){this._b2Body&&(C$zur.Set(C$zut.x/C$zun,C$zut.y/C$zun),C$zuc.Set(C$zue.x/C$zun,C$zue.y/C$zun),this._b2Body.ApplyLinearImpulse(C$zur,C$zuc,C$zui))},applyAngularImpulse:function(C$zut,C$zue){this._b2Body&&this._b2Body.ApplyAngularImpulse(C$zut/C$zun/C$zun,C$zue)},syncPosition:function(C$zut){var C$zue=this._b2Body;var C$zui,C$zur;C$zue&&(C$zur=this.node.convertToWorldSpaceAR(C$zul),(C$zui=this.type===C$zus.Animated?C$zue.GetLinearVelocity():C$zue.GetPosition()).x=C$zur.x/C$zun,C$zui.y=C$zur.y/C$zun,this.type===C$zus.Animated&&C$zut?(C$zur=C$zue.GetPosition(),C$zut=cc.game.config.frameRate,C$zui.x=(C$zui.x-C$zur.x)*C$zut,C$zui.y=(C$zui.y-C$zur.y)*C$zut,C$zue.SetAwake(!0),C$zue.SetLinearVelocity(C$zui)):C$zue.SetTransformVec(C$zui,C$zue.GetAngle()))},syncRotation:function(C$zut){var C$zue=this._b2Body;var C$zui,C$zur;C$zue&&(C$zui=C$zua*C$zuo(this.node),this.type===C$zus.Animated&&C$zut?(C$zut=C$zue.GetAngle(),C$zur=cc.game.config.frameRate,C$zue.SetAwake(!0),C$zue.SetAngularVelocity((C$zui-C$zut)*C$zur)):C$zue.SetTransformVec(C$zue.GetPosition(),C$zui))},resetVelocity:function(){var C$zut=this._b2Body;var C$zue;C$zut&&((C$zue=C$zut.m_linearVelocity).Set(0,0),C$zut.SetLinearVelocity(C$zue),C$zut.SetAngularVelocity(0))},onEnable:function(){this._init()},onDisable:function(){this._destroy()},_registerNodeEvents:function(){var C$zut=this.node;C$zut.on(C$zue.POSITION_CHANGED,this._onNodePositionChanged,this),C$zut.on(C$zue.ROTATION_CHANGED,this._onNodeRotationChanged,this),C$zut.on(C$zue.SCALE_CHANGED,this._onNodeScaleChanged,this)},_unregisterNodeEvents:function(){var C$zut=this.node;C$zut.off(C$zue.POSITION_CHANGED,this._onNodePositionChanged,this),C$zut.off(C$zue.ROTATION_CHANGED,this._onNodeRotationChanged,this),C$zut.off(C$zue.SCALE_CHANGED,this._onNodeScaleChanged,this)},_onNodePositionChanged:function(){this.syncPosition(!0)},_onNodeRotationChanged:function(C$zut){this.syncRotation(!0)},_onNodeScaleChanged:function(C$zut){if(this._b2Body){var C$zue=this.getComponents(cc.PhysicsCollider);for(var C$zui=0;C$zui<C$zue.length;C$zui++)C$zue[C$zui].apply()}},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){var C$zut,C$zue,C$zui;this._inited||(this._registerNodeEvents(),C$zut=new b2.BodyDef,this.type===C$zus.Animated?C$zut.type=C$zus.Kinematic:C$zut.type=this.type,C$zut.allowSleep=this.allowSleep,C$zut.gravityScale=this.gravityScale,C$zut.linearDamping=this.linearDamping,C$zut.angularDamping=this.angularDamping,C$zue=this.linearVelocity,C$zut.linearVelocity=new b2.Vec2(C$zue.x/C$zun,C$zue.y/C$zun),C$zut.angularVelocity=this.angularVelocity*C$zua,C$zut.fixedRotation=this.fixedRotation,C$zut.bullet=this.bullet,C$zui=(C$zue=this.node).convertToWorldSpaceAR(C$zul),C$zut.position=new b2.Vec2(C$zui.x/C$zun,C$zui.y/C$zun),C$zut.angle=-Math.PI/180*C$zuo(C$zue),C$zut.awake=this.awakeOnLoad,cc.director.getPhysicsManager()._addBody(this,C$zut),this._inited=!0)},__destroy:function(){this._inited&&(cc.director.getPhysicsManager()._removeBody(this),this._unregisterNodeEvents(),this._inited=!1)},_getBody:function(){return this._b2Body}});cc.RigidBody=C$zuh.exports=C$zut},{"../CCNode":30,"./CCPhysicsTypes":164,"./utils":187}],167:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../../../external/box2d/box2d");for(var C$zun in window.b2={},C$zur){var C$zua;-1===C$zun.indexOf("b2_")&&(C$zua=C$zun.replace("b2",""),b2[C$zua]=C$zur[C$zun])}b2.maxPolygonVertices=8},{"../../../external/box2d/box2d":362}],168:[function(C$zut,C$zue,C$zui){"use strict";var C$zua=C$zut("../CCPhysicsTypes").PTM_RATIO;C$zut=cc.Class({name:"cc.PhysicsBoxCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Box],editor:{menu:!1,requireComponent:cc.RigidBody},_createShape:function(C$zut){var C$zue=Math.abs(C$zut.x);C$zut=Math.abs(C$zut.y);var C$zui=this.size.width/2/C$zua*C$zue;var C$zur=this.size.height/2/C$zua*C$zut;C$zue=this.offset.x/C$zua*C$zue;C$zut=this.offset.y/C$zua*C$zut;var C$zun=new b2.PolygonShape;return C$zun.SetAsBox(C$zui,C$zur,new b2.Vec2(C$zue,C$zut),0),C$zun}});cc.PhysicsBoxCollider=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],169:[function(C$zut,C$zue,C$zui){"use strict";var C$zuo=C$zut("../CCPhysicsTypes").PTM_RATIO;C$zut=cc.Class({name:"cc.PhysicsChainCollider",extends:cc.PhysicsCollider,editor:{menu:!1,inspector:!1,requireComponent:cc.RigidBody},properties:{loop:!1,points:{default:function(){return[cc.v2(-50,0),cc.v2(50,0)]},type:[cc.Vec2]},threshold:{default:1,serializable:!1,visible:!1}},_createShape:function(C$zut){var C$zue=new b2.ChainShape;var C$zui=this.points;var C$zur=[];for(var C$zun=0;C$zun<C$zui.length;C$zun++){var C$zua=C$zui[C$zun];C$zur.push(new b2.Vec2(C$zua.x/C$zuo*C$zut.x,C$zua.y/C$zuo*C$zut.y))}return this.loop?C$zue.CreateLoop(C$zur,C$zur.length):C$zue.CreateChain(C$zur,C$zur.length),C$zue},resetInEditor:!1,resetPointsByContour:!1});cc.PhysicsChainCollider=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],170:[function(C$zut,C$zue,C$zui){"use strict";var C$zun=C$zut("../CCPhysicsTypes").PTM_RATIO;C$zut=cc.Class({name:"cc.PhysicsCircleCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Circle],editor:{menu:!1,requireComponent:cc.RigidBody},_createShape:function(C$zut){var C$zue=Math.abs(C$zut.x);C$zut=Math.abs(C$zut.y);var C$zui=this.offset.x/C$zun*C$zue;C$zut=this.offset.y/C$zun*C$zut;var C$zur=new b2.CircleShape;return C$zur.m_radius=this.radius/C$zun*C$zue,C$zur.m_p=new b2.Vec2(C$zui,C$zut),C$zur}});cc.PhysicsCircleCollider=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],171:[function(C$zut,C$zue,C$zui){"use strict";var C$zuu=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zud=C$zut("../utils").getWorldScale;C$zut=cc.Class({name:"cc.PhysicsCollider",extends:cc.Collider,ctor:function(){this._fixtures=[],this._shapes=[],this._inited=!1,this._rect=cc.rect()},properties:{_density:1,_sensor:!1,_friction:.2,_restitution:0,density:{tooltip:!1,get:function(){return this._density},set:function(C$zut){this._density=C$zut}},sensor:{tooltip:!1,get:function(){return this._sensor},set:function(C$zut){this._sensor=C$zut}},friction:{tooltip:!1,get:function(){return this._friction},set:function(C$zut){this._friction=C$zut}},restitution:{tooltip:!1,get:function(){return this._restitution},set:function(C$zut){this._restitution=C$zut}},body:{default:null,type:cc.RigidBody,visible:!1}},onDisable:function(){this._destroy()},onEnable:function(){this._init()},start:function(){this._init()},_getFixtureIndex:function(C$zut){return this._fixtures.indexOf(C$zut)},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){if(!this._inited){var C$zut=this.body||this.getComponent(cc.RigidBody);if(C$zut){var C$zue=C$zut._getBody();if(C$zue){var C$zui=C$zut.node;var C$zur=C$zud(C$zui);var C$zun=0===(this._scale=C$zur).x&&0===C$zur.y?[]:this._createShape(C$zur);C$zun instanceof Array||(C$zun=[C$zun]);C$zur=1<<C$zui.groupIndex;var C$zua=0;var C$zuo=cc.game.collisionMatrix[C$zui.groupIndex];for(var C$zus=0;C$zus<C$zuo.length;C$zus++)C$zuo[C$zus]&&(C$zua|=1<<C$zus);var C$zuh={categoryBits:C$zur,maskBits:C$zua,groupIndex:0};var C$zuu=cc.director.getPhysicsManager();for(var C$zuc=0;C$zuc<C$zun.length;C$zuc++){var C$zu_=C$zun[C$zuc];var C$zul=new b2.FixtureDef;C$zul.density=this.density,C$zul.isSensor=this.sensor,C$zul.friction=this.friction,C$zul.restitution=this.restitution,C$zul.shape=C$zu_,C$zul.filter=C$zuh;C$zul=C$zue.CreateFixture(C$zul);C$zul.collider=this,C$zut.enabledContactListener&&C$zuu._registerContactFixture(C$zul),this._shapes.push(C$zu_),this._fixtures.push(C$zul)}this.body=C$zut,this._inited=!0}}}},__destroy:function(){if(this._inited){var C$zut=this._fixtures;var C$zue=this.body._getBody();var C$zui=cc.director.getPhysicsManager();for(var C$zur=C$zut.length-1;0<=C$zur;C$zur--){var C$zun=C$zut[C$zur];C$zun.collider=null,C$zui._unregisterContactFixture(C$zun),C$zue&&C$zue.DestroyFixture(C$zun)}this.body=null,this._fixtures.length=0,this._shapes.length=0,this._inited=!1}},_createShape:function(){},apply:function(){this._destroy(),this._init()},getAABB:function(){var C$zut=1e7,C$zue=1e7;var C$zui=-1e7,C$zur=-1e7;var C$zun=this._fixtures;for(var C$zua=0;C$zua<C$zun.length;C$zua++){var C$zuo=C$zun[C$zua];var C$zuh=C$zuo.GetShape().GetChildCount();for(var C$zus=0;C$zus<C$zuh;C$zus++){var C$zuc=C$zuo.GetAABB(C$zus);C$zuc.lowerBound.x<C$zut&&(C$zut=C$zuc.lowerBound.x),C$zuc.lowerBound.y<C$zue&&(C$zue=C$zuc.lowerBound.y),C$zuc.upperBound.x>C$zui&&(C$zui=C$zuc.upperBound.x),C$zuc.upperBound.y>C$zur&&(C$zur=C$zuc.upperBound.y)}}C$zue*=C$zuu,C$zui*=C$zuu,C$zur*=C$zuu;var C$zul=this._rect;return C$zul.x=C$zut*=C$zuu,C$zul.y=C$zue,C$zul.width=C$zui-C$zut,C$zul.height=C$zur-C$zue,C$zul}});cc.PhysicsCollider=C$zue.exports=C$zut},{"../CCPhysicsTypes":164,"../utils":187}],172:[function(C$zut,C$zue,C$zui){"use strict";var C$zuf=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zup=C$zut("../CCPolygonSeparator");C$zut=cc.Class({name:"cc.PhysicsPolygonCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Polygon],editor:{menu:!1,inspector:!1,requireComponent:cc.RigidBody},_createShape:function(C$zut){var C$zue=[];var C$zui=this.points;0<C$zui.length&&C$zui[0].equals(C$zui[C$zui.length-1])&&--C$zui.length;var C$zuh=C$zup.ConvexPartition(C$zui);var C$zuu=this.offset;for(var C$zur=0;C$zur<C$zuh.length;C$zur++){var C$zu_=C$zuh[C$zur];var C$zun=null,C$zua=[];var C$zuo=null;for(var C$zus=0,C$zud=C$zu_.length;C$zus<C$zud;C$zus++){C$zun=C$zun||new b2.PolygonShape;var C$zuc=C$zu_[C$zus];var C$zul=(C$zuc.x+C$zuu.x)/C$zuf*C$zut.x;C$zuc=(C$zuc.y+C$zuu.y)/C$zuf*C$zut.y;C$zul=new b2.Vec2(C$zul,C$zuc);C$zua.push(C$zul),C$zuo=C$zuo||C$zul,C$zua.length===b2.maxPolygonVertices&&(C$zun.Set(C$zua,C$zua.length),C$zue.push(C$zun),C$zun=null,C$zus<C$zud-1&&(C$zua=[C$zuo,C$zua[C$zua.length-1]]))}C$zun&&(C$zun.Set(C$zua,C$zua.length),C$zue.push(C$zun))}return C$zue}});cc.PhysicsPolygonCollider=C$zue.exports=C$zut},{"../CCPhysicsTypes":164,"../CCPolygonSeparator":165}],173:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./box2d-adapter"),C$zut("./CCPhysicsManager"),C$zut("./CCRigidBody"),C$zut("./CCPhysicsContact"),C$zut("./collider/CCPhysicsCollider"),C$zut("./collider/CCPhysicsChainCollider"),C$zut("./collider/CCPhysicsCircleCollider"),C$zut("./collider/CCPhysicsBoxCollider"),C$zut("./collider/CCPhysicsPolygonCollider"),C$zut("./joint/CCJoint"),C$zut("./joint/CCDistanceJoint"),C$zut("./joint/CCRevoluteJoint"),C$zut("./joint/CCMouseJoint"),C$zut("./joint/CCMotorJoint"),C$zut("./joint/CCPrismaticJoint"),C$zut("./joint/CCWeldJoint"),C$zut("./joint/CCWheelJoint"),C$zut("./joint/CCRopeJoint"),C$zut("./platform/CCPhysicsContactListner"),C$zut("./platform/CCPhysicsAABBQueryCallback"),C$zut("./platform/CCPhysicsRayCastCallback")},{"./CCPhysicsContact":162,"./CCPhysicsManager":163,"./CCRigidBody":166,"./box2d-adapter":167,"./collider/CCPhysicsBoxCollider":168,"./collider/CCPhysicsChainCollider":169,"./collider/CCPhysicsCircleCollider":170,"./collider/CCPhysicsCollider":171,"./collider/CCPhysicsPolygonCollider":172,"./joint/CCDistanceJoint":174,"./joint/CCJoint":175,"./joint/CCMotorJoint":176,"./joint/CCMouseJoint":177,"./joint/CCPrismaticJoint":178,"./joint/CCRevoluteJoint":179,"./joint/CCRopeJoint":180,"./joint/CCWeldJoint":181,"./joint/CCWheelJoint":182,"./platform/CCPhysicsAABBQueryCallback":183,"./platform/CCPhysicsContactListner":184,"./platform/CCPhysicsRayCastCallback":186}],174:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;C$zut=cc.Class({name:"cc.DistanceJoint",extends:cc.Joint,editor:!1,properties:{_distance:1,_frequency:0,_dampingRatio:0,distance:{tooltip:!1,get:function(){return this._distance},set:function(C$zut){this._distance=C$zut,this._joint&&this._joint.SetLength(C$zut)}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$zut){this._frequency=C$zut,this._joint&&this._joint.SetFrequency(C$zut)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$zut){this._dampingRatio=C$zut,this._joint&&this._joint.SetDampingRatio(C$zut)}}},_createJointDef:function(){var C$zut=new b2.DistanceJointDef;return C$zut.localAnchorA=new b2.Vec2(this.anchor.x/C$zur,this.anchor.y/C$zur),C$zut.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$zur,this.connectedAnchor.y/C$zur),C$zut.length=this.distance/C$zur,C$zut.dampingRatio=this.dampingRatio,C$zut.frequencyHz=this.frequency,C$zut}});cc.DistanceJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],175:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;C$zut=cc.Class({name:"cc.Joint",extends:cc.Component,editor:{requireComponent:cc.RigidBody},properties:{anchor:{default:cc.v2(0,0),tooltip:!1},connectedAnchor:{default:cc.v2(0,0),tooltip:!1},connectedBody:{default:null,type:cc.RigidBody,tooltip:!1},collideConnected:{default:!1,tooltip:!1}},onDisable:function(){this._destroy()},onEnable:function(){this._init()},start:function(){this._init()},apply:function(){this._destroy(),this._init()},getWorldAnchor:function(){var C$zut;return this._joint?(C$zut=this._joint.GetAnchorA(),cc.v2(C$zut.x*C$zur,C$zut.y*C$zur)):cc.Vec2.ZERO},getWorldConnectedAnchor:function(){var C$zut;return this._joint?(C$zut=this._joint.GetAnchorB(),cc.v2(C$zut.x*C$zur,C$zut.y*C$zur)):cc.Vec2.ZERO},getReactionForce:function(C$zut){var C$zue=cc.v2();return this._joint?this._joint.GetReactionForce(C$zut,C$zue):C$zue},getReactionTorque:function(C$zut){return this._joint?this._joint.GetReactionTorque(C$zut):0},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){var C$zut;this._inited||(this.body=this.getComponent(cc.RigidBody),!this._isValid()||(C$zut=this._createJointDef())&&(C$zut.bodyA=this.body._getBody(),C$zut.bodyB=this.connectedBody._getBody(),C$zut.collideConnected=this.collideConnected,cc.director.getPhysicsManager()._addJoint(this,C$zut),this._inited=!0))},__destroy:function(){this._inited&&(cc.director.getPhysicsManager()._removeJoint(this),this._joint=null,this._inited=!1)},_createJointDef:function(){return null},_isValid:function(){return this.body&&this.body._getBody()&&this.connectedBody&&this.connectedBody._getBody()}});cc.Joint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],176:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zun=C$zut("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE;C$zut=cc.Class({name:"cc.MotorJoint",extends:cc.Joint,editor:!1,properties:{_linearOffset:cc.v2(0,0),_angularOffset:0,_maxForce:1,_maxTorque:1,_correctionFactor:.3,anchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},connectedAnchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},linearOffset:{tooltip:!1,get:function(){return this._linearOffset},set:function(C$zut){this._linearOffset=C$zut,this._joint&&this._joint.SetLinearOffset(new b2.Vec2(C$zut.x/C$zur,C$zut.y/C$zur))}},angularOffset:{tooltip:!1,get:function(){return this._angularOffset},set:function(C$zut){this._angularOffset=C$zut,this._joint&&this._joint.SetAngularOffset(C$zut)}},maxForce:{tooltip:!1,get:function(){return this._maxForce},set:function(C$zut){this._maxForce=C$zut,this._joint&&this._joint.SetMaxForce(C$zut)}},maxTorque:{tooltip:!1,get:function(){return this._maxTorque},set:function(C$zut){this._maxTorque=C$zut,this._joint&&this._joint.SetMaxTorque(C$zut)}},correctionFactor:{tooltip:!1,get:function(){return this._correctionFactor},set:function(C$zut){this._correctionFactor=C$zut,this._joint&&this._joint.SetCorrectionFactor(C$zut)}}},_createJointDef:function(){var C$zut=new b2.MotorJointDef;return C$zut.linearOffset=new b2.Vec2(this.linearOffset.x/C$zur,this.linearOffset.y/C$zur),C$zut.angularOffset=this.angularOffset*C$zun,C$zut.maxForce=this.maxForce,C$zut.maxTorque=this.maxTorque,C$zut.correctionFactor=this.correctionFactor,C$zut}});cc.MotorJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],177:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zun=new b2.Vec2;C$zut=cc.Class({name:"cc.MouseJoint",extends:cc.Joint,editor:!1,properties:{_target:1,_frequency:5,_dampingRatio:.7,_maxForce:0,connectedBody:{default:null,type:cc.RigidBody,visible:!1,override:!0},collideConnected:{default:!0,visible:!1,override:!0},anchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},connectedAnchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},mouseRegion:{tooltip:!1,default:null,type:cc.Node},target:{tooltip:!1,visible:!1,get:function(){return this._target},set:function(C$zut){this._target=C$zut,this._joint&&(C$zun.x=C$zut.x/C$zur,C$zun.y=C$zut.y/C$zur,this._joint.SetTarget(C$zun))}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$zut){this._frequency=C$zut,this._joint&&this._joint.SetFrequency(C$zut)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$zut){this._dampingRatio=C$zut,this._joint&&this._joint.SetDampingRatio(C$zut)}},maxForce:{tooltip:!1,visible:!1,get:function(){return this._maxForce},set:function(C$zut){this._maxForce=C$zut,this._joint&&this._joint.SetMaxForce(C$zut)}}},onLoad:function(){var C$zut=this.mouseRegion||this.node;C$zut.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),C$zut.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),C$zut.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),C$zut.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onEnable:function(){},start:function(){},onTouchBegan:function(C$zut){var C$zue=cc.director.getPhysicsManager();C$zut=this._pressPoint=C$zut.touch.getLocation();cc.Camera&&cc.Camera.main&&(C$zut=cc.Camera.main.getScreenToWorldPoint(C$zut));C$zue=C$zue.testPoint(C$zut);C$zue&&((this.connectedBody=C$zue.body).awake=!0,this.maxForce=1e3*this.connectedBody.getMass(),this.target=C$zut,this._init())},onTouchMove:function(C$zut){this._pressPoint=C$zut.touch.getLocation()},onTouchEnd:function(C$zut){this._destroy(),this._pressPoint=null},_createJointDef:function(){var C$zut=new b2.MouseJointDef;return C$zun.x=this.target.x/C$zur,C$zun.y=this.target.y/C$zur,C$zut.target=C$zun,C$zut.maxForce=this.maxForce,C$zut.dampingRatio=this.dampingRatio,C$zut.frequencyHz=this.frequency,C$zut},update:function(){var C$zut;this._pressPoint&&this._isValid()&&(C$zut=cc.Camera.findCamera(this.node),this.target=C$zut?C$zut.getScreenToWorldPoint(this._pressPoint):this._pressPoint)}});cc.MouseJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],178:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zun=C$zut("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE;C$zut=cc.Class({name:"cc.PrismaticJoint",extends:cc.Joint,editor:!1,properties:{localAxisA:{default:cc.v2(1,0),tooltip:!1},referenceAngle:{default:0,tooltip:!1},enableLimit:{default:!1,tooltip:!1},enableMotor:{default:!1,tooltip:!1},lowerLimit:{default:0,tooltip:!1},upperLimit:{default:0,tooltip:!1},_maxMotorForce:0,_motorSpeed:0,maxMotorForce:{tooltip:!1,get:function(){return this._maxMotorForce},set:function(C$zut){this._maxMotorForce=C$zut,this._joint&&this._joint.SetMaxMotorForce(C$zut)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$zut){this._motorSpeed=C$zut,this._joint&&this._joint.SetMotorSpeed(C$zut)}}},_createJointDef:function(){var C$zut=new b2.PrismaticJointDef;return C$zut.localAnchorA=new b2.Vec2(this.anchor.x/C$zur,this.anchor.y/C$zur),C$zut.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$zur,this.connectedAnchor.y/C$zur),C$zut.localAxisA=new b2.Vec2(this.localAxisA.x,this.localAxisA.y),C$zut.referenceAngle=this.referenceAngle*C$zun,C$zut.enableLimit=this.enableLimit,C$zut.lowerTranslation=this.lowerLimit/C$zur,C$zut.upperTranslation=this.upperLimit/C$zur,C$zut.enableMotor=this.enableMotor,C$zut.maxMotorForce=this.maxMotorForce,C$zut.motorSpeed=this.motorSpeed,C$zut}});cc.PrismaticJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],179:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zun=C$zut("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE;var C$zua=C$zut("../CCPhysicsTypes").PHYSICS_ANGLE_TO_ANGLE;C$zut=cc.Class({name:"cc.RevoluteJoint",extends:cc.Joint,editor:!1,properties:{_maxMotorTorque:0,_motorSpeed:0,_enableLimit:!1,_enableMotor:!1,referenceAngle:{default:0,tooltip:!1},lowerAngle:{default:0,tooltip:!1},upperAngle:{default:0,tooltip:!1},maxMotorTorque:{tooltip:!1,get:function(){return this._maxMotorTorque},set:function(C$zut){this._maxMotorTorque=C$zut,this._joint&&this._joint.SetMaxMotorTorque(C$zut)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$zut){this._motorSpeed=C$zut,this._joint&&this._joint.SetMotorSpeed(C$zut*C$zun)}},enableLimit:{tooltip:!1,get:function(){return this._enableLimit},set:function(C$zut){this._enableLimit=C$zut,this._joint&&this._joint.EnableLimit(C$zut)}},enableMotor:{tooltip:!1,get:function(){return this._enableMotor},set:function(C$zut){this._enableMotor=C$zut,this._joint&&this._joint.EnableMotor(C$zut)}}},getJointAngle:function(){return this._joint?this._joint.GetJointAngle()*C$zua:0},setLimits:function(C$zut,C$zue){if(this._joint)return this._joint.SetLimits(C$zut*C$zun,C$zue*C$zun)},_createJointDef:function(){var C$zut=new b2.RevoluteJointDef;return C$zut.localAnchorA=new b2.Vec2(this.anchor.x/C$zur,this.anchor.y/C$zur),C$zut.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$zur,this.connectedAnchor.y/C$zur),C$zut.lowerAngle=this.upperAngle*C$zun,C$zut.upperAngle=this.lowerAngle*C$zun,C$zut.maxMotorTorque=this.maxMotorTorque,C$zut.motorSpeed=this.motorSpeed*C$zun,C$zut.enableLimit=this.enableLimit,C$zut.enableMotor=this.enableMotor,C$zut.referenceAngle=this.referenceAngle*C$zun,C$zut}});cc.RevoluteJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],180:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;C$zut=cc.Class({name:"cc.RopeJoint",extends:cc.Joint,editor:!1,properties:{_maxLength:1,maxLength:{tooltip:!1,get:function(){return this._maxLength},set:function(C$zut){this._maxLength=C$zut,this._joint&&this._joint.SetMaxLength(C$zut)}}},_createJointDef:function(){var C$zut=new b2.RopeJointDef;return C$zut.localAnchorA=new b2.Vec2(this.anchor.x/C$zur,this.anchor.y/C$zur),C$zut.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$zur,this.connectedAnchor.y/C$zur),C$zut.maxLength=this.maxLength/C$zur,C$zut}});cc.RopeJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],181:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zun=C$zut("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE;C$zut=cc.Class({name:"cc.WeldJoint",extends:cc.Joint,editor:!1,properties:{referenceAngle:{default:0,tooltip:!1},_frequency:0,_dampingRatio:0,frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$zut){this._frequency=C$zut,this._joint&&this._joint.SetFrequency(C$zut)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$zut){this._dampingRatio=C$zut,this._joint&&this._joint.SetDampingRatio(C$zut)}}},_createJointDef:function(){var C$zut=new b2.WeldJointDef;return C$zut.localAnchorA=new b2.Vec2(this.anchor.x/C$zur,this.anchor.y/C$zur),C$zut.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$zur,this.connectedAnchor.y/C$zur),C$zut.referenceAngle=this.referenceAngle*C$zun,C$zut.frequencyHz=this.frequency,C$zut.dampingRatio=this.dampingRatio,C$zut}});cc.WeldJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],182:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zun=C$zut("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE;C$zut=cc.Class({name:"cc.WheelJoint",extends:cc.Joint,editor:!1,properties:{_maxMotorTorque:0,_motorSpeed:0,_enableMotor:!1,_frequency:2,_dampingRatio:.7,localAxisA:{default:cc.v2(1,0),tooltip:!1},maxMotorTorque:{tooltip:!1,get:function(){return this._maxMotorTorque},set:function(C$zut){this._maxMotorTorque=C$zut,this._joint&&this._joint.SetMaxMotorTorque(C$zut)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$zut){this._motorSpeed=C$zut,this._joint&&this._joint.SetMotorSpeed(C$zut*C$zun)}},enableMotor:{tooltip:!1,get:function(){return this._enableMotor},set:function(C$zut){this._enableMotor=C$zut,this._joint&&this._joint.EnableMotor(C$zut)}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$zut){this._frequency=C$zut,this._joint&&this._joint.SetSpringFrequencyHz(C$zut)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$zut){this._dampingRatio=C$zut,this._joint&&this._joint.SetDampingRatio(C$zut)}}},_createJointDef:function(){var C$zut=new b2.WheelJointDef;return C$zut.localAnchorA=new b2.Vec2(this.anchor.x/C$zur,this.anchor.y/C$zur),C$zut.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$zur,this.connectedAnchor.y/C$zur),C$zut.localAxisA=new b2.Vec2(this.localAxisA.x,this.localAxisA.y),C$zut.maxMotorTorque=this.maxMotorTorque,C$zut.motorSpeed=this.motorSpeed*C$zun,C$zut.enableMotor=this.enableMotor,C$zut.dampingRatio=this.dampingRatio,C$zut.frequencyHz=this.frequency,C$zut}});cc.WheelJoint=C$zue.exports=C$zut},{"../CCPhysicsTypes":164}],183:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../CCPhysicsTypes").BodyType;function PhysicsAABBQueryCallback(){this._point=new b2.Vec2,this._isPoint=!1,this._fixtures=[]}PhysicsAABBQueryCallback.prototype.init=function(C$zut){C$zut?(this._isPoint=!0,this._point.x=C$zut.x,this._point.y=C$zut.y):this._isPoint=!1,this._fixtures.length=0},PhysicsAABBQueryCallback.prototype.ReportFixture=function(C$zut){if(C$zut.GetBody().GetType()===C$zur.Dynamic)if(this._isPoint){if(C$zut.TestPoint(this._point))return this._fixtures.push(C$zut),!1}else this._fixtures.push(C$zut);return!0},PhysicsAABBQueryCallback.prototype.getFixture=function(){return this._fixtures[0]},PhysicsAABBQueryCallback.prototype.getFixtures=function(){return this._fixtures},cc.PhysicsAABBQueryCallback=C$zue.exports=PhysicsAABBQueryCallback},{"../CCPhysicsTypes":164}],184:[function(C$zut,C$zue,C$zui){"use strict";function PhysicsContactListener(){this._contactFixtures=[]}PhysicsContactListener.prototype.setBeginContact=function(C$zut){this._BeginContact=C$zut},PhysicsContactListener.prototype.setEndContact=function(C$zut){this._EndContact=C$zut},PhysicsContactListener.prototype.setPreSolve=function(C$zut){this._PreSolve=C$zut},PhysicsContactListener.prototype.setPostSolve=function(C$zut){this._PostSolve=C$zut},PhysicsContactListener.prototype.BeginContact=function(C$zut){var C$zue,C$zui,C$zur;this._BeginContact&&(C$zue=C$zut.GetFixtureA(),C$zui=C$zut.GetFixtureB(),C$zur=this._contactFixtures,C$zut._shouldReport=!1,-1===C$zur.indexOf(C$zue)&&-1===C$zur.indexOf(C$zui)||(C$zut._shouldReport=!0,this._BeginContact(C$zut)))},PhysicsContactListener.prototype.EndContact=function(C$zut){this._EndContact&&C$zut._shouldReport&&(C$zut._shouldReport=!1,this._EndContact(C$zut))},PhysicsContactListener.prototype.PreSolve=function(C$zut,C$zue){this._PreSolve&&C$zut._shouldReport&&this._PreSolve(C$zut,C$zue)},PhysicsContactListener.prototype.PostSolve=function(C$zut,C$zue){this._PostSolve&&C$zut._shouldReport&&this._PostSolve(C$zut,C$zue)},PhysicsContactListener.prototype.registerContactFixture=function(C$zut){this._contactFixtures.push(C$zut)},PhysicsContactListener.prototype.unregisterContactFixture=function(C$zut){cc.js.array.remove(this._contactFixtures,C$zut)},cc.PhysicsContactListener=C$zue.exports=PhysicsContactListener},{}],185:[function(C$zut,C$zue,C$zui){"use strict";var C$zuo=C$zut("../CCPhysicsTypes").PTM_RATIO;var C$zus=cc.v2();var C$zur=cc.Color.GREEN;var C$zun=cc.Color.RED;function PhysicsDebugDraw(C$zut){b2.Draw.call(this),this._drawer=C$zut,this._xf=this._dxf=new b2.Transform}cc.js.extend(PhysicsDebugDraw,b2.Draw),cc.js.mixin(PhysicsDebugDraw.prototype,{_DrawPolygon:function(C$zut,C$zue){var C$zui=this._drawer;for(var C$zur=0;C$zur<C$zue;C$zur++){b2.Transform.MulXV(this._xf,C$zut[C$zur],C$zus);var C$zun=C$zus.x*C$zuo,C$zua=C$zus.y*C$zuo;0===C$zur?C$zui.moveTo(C$zun,C$zua):C$zui.lineTo(C$zun,C$zua)}C$zui.close()},DrawPolygon:function(C$zut,C$zue,C$zui){this._applyStrokeColor(C$zui),this._DrawPolygon(C$zut,C$zue),this._drawer.stroke()},DrawSolidPolygon:function(C$zut,C$zue,C$zui){this._applyFillColor(C$zui),this._DrawPolygon(C$zut,C$zue),this._drawer.fill(),this._drawer.stroke()},_DrawCircle:function(C$zut,C$zue){var C$zui=this._xf.p;this._drawer.circle((C$zut.x+C$zui.x)*C$zuo,(C$zut.y+C$zui.y)*C$zuo,C$zue*C$zuo)},DrawCircle:function(C$zut,C$zue,C$zui){this._applyStrokeColor(C$zui),this._DrawCircle(C$zut,C$zue),this._drawer.stroke()},DrawSolidCircle:function(C$zut,C$zue,C$zui,C$zur){this._applyFillColor(C$zur),this._DrawCircle(C$zut,C$zue),this._drawer.fill()},DrawSegment:function(C$zut,C$zue,C$zui){var C$zur=this._drawer;if(C$zut.x===C$zue.x&&C$zut.y===C$zue.y)return this._applyFillColor(C$zui),this._DrawCircle(C$zut,2/C$zuo),void C$zur.fill();this._applyStrokeColor(C$zui),b2.Transform.MulXV(this._xf,C$zut,C$zus),C$zur.moveTo(C$zus.x*C$zuo,C$zus.y*C$zuo),b2.Transform.MulXV(this._xf,C$zue,C$zus),C$zur.lineTo(C$zus.x*C$zuo,C$zus.y*C$zuo),C$zur.stroke()},DrawTransform:function(C$zut){var C$zue=this._drawer;C$zue.strokeColor=C$zun,C$zus.x=C$zus.y=0,b2.Transform.MulXV(C$zut,C$zus,C$zus),C$zue.moveTo(C$zus.x*C$zuo,C$zus.y*C$zuo),C$zus.x=1,C$zus.y=0,b2.Transform.MulXV(C$zut,C$zus,C$zus),C$zue.lineTo(C$zus.x*C$zuo,C$zus.y*C$zuo),C$zue.stroke(),C$zue.strokeColor=C$zur,C$zus.x=C$zus.y=0,b2.Transform.MulXV(C$zut,C$zus,C$zus),C$zue.moveTo(C$zus.x*C$zuo,C$zus.y*C$zuo),C$zus.x=0,C$zus.y=1,b2.Transform.MulXV(C$zut,C$zus,C$zus),C$zue.lineTo(C$zus.x*C$zuo,C$zus.y*C$zuo),C$zue.stroke()},DrawPoint:function(C$zut,C$zue,C$zui){},_applyStrokeColor:function(C$zut){var C$zue=this._drawer.strokeColor;C$zue.r=255*C$zut.r,C$zue.g=255*C$zut.g,C$zue.b=255*C$zut.b,C$zue.a=150,this._drawer.strokeColor=C$zue},_applyFillColor:function(C$zut){var C$zue=this._drawer.fillColor;C$zue.r=255*C$zut.r,C$zue.g=255*C$zut.g,C$zue.b=255*C$zut.b,C$zue.a=150,this._drawer.fillColor=C$zue},PushTransform:function(C$zut){this._xf=C$zut},PopTransform:function(){this._xf=this._dxf}}),C$zue.exports=PhysicsDebugDraw},{"../CCPhysicsTypes":164}],186:[function(C$zut,C$zue,C$zui){"use strict";function PhysicsRayCastCallback(){this._type=0,this._fixtures=[],this._points=[],this._normals=[],this._fractions=[]}PhysicsRayCastCallback.prototype.init=function(C$zut){this._type=C$zut,this._fixtures.length=0,this._points.length=0,this._normals.length=0,this._fractions.length=0},PhysicsRayCastCallback.prototype.ReportFixture=function(C$zut,C$zue,C$zui,C$zur){return 0===this._type?(this._fixtures[0]=C$zut,this._points[0]=C$zue,this._normals[0]=C$zui,this._fractions[0]=C$zur):(this._fixtures.push(C$zut),this._points.push(cc.v2(C$zue)),this._normals.push(cc.v2(C$zui)),this._fractions.push(C$zur),1===this._type?0:2<=this._type?1:C$zur)},PhysicsRayCastCallback.prototype.getFixtures=function(){return this._fixtures},PhysicsRayCastCallback.prototype.getPoints=function(){return this._points},PhysicsRayCastCallback.prototype.getNormals=function(){return this._normals},PhysicsRayCastCallback.prototype.getFractions=function(){return this._fractions},cc.PhysicsRayCastCallback=C$zue.exports=PhysicsRayCastCallback},{}],187:[function(C$zut,C$zue,C$zui){"use strict";C$zue.exports={getWorldRotation:function(C$zut){var C$zue=C$zut.angle;var C$zui=C$zut.parent;for(;C$zui.parent;)C$zue+=C$zui.angle,C$zui=C$zui.parent;return-C$zue},getWorldScale:function(C$zut){var C$zue=C$zut.scaleX;var C$zui=C$zut.scaleY;var C$zur=C$zut.parent;for(;C$zur.parent;)C$zue*=C$zur.scaleX,C$zui*=C$zur.scaleY,C$zur=C$zur.parent;return cc.v2(C$zue,C$zui)},convertToNodeRotation:function(C$zut,C$zue){C$zue-=-C$zut.angle;var C$zui=C$zut.parent;for(;C$zui.parent;)C$zue-=-C$zui.angle,C$zui=C$zui.parent;return C$zue}}},{}],188:[function(C$zut,C$zui,C$zun){"use strict";C$zut("../assets/CCAsset");var C$zua=C$zut("./utils").callInNextTick;var C$zuv=C$zut("../load-pipeline/CCLoader");var C$zuA=C$zut("../load-pipeline/asset-table");var C$zuS=C$zut("../load-pipeline/pack-downloader");var C$zus=C$zut("../load-pipeline/auto-release-utils");var C$zuy=C$zut("../utils/decode-uuid");var C$zuT=C$zut("../load-pipeline/md5-pipe");var C$zuw=C$zut("../load-pipeline/subpackage-pipe");var C$zug=C$zut("./js");var C$zub="";var C$zuC="";var C$zux=C$zug.createMap(!0);function isScene(C$zut){return C$zut&&(C$zut.constructor===cc.SceneAsset||C$zut instanceof cc.Scene)}function RawAssetEntry(C$zut,C$zue){this.url=C$zut,this.type=C$zue}var C$zue={loadAsset:function(C$zur,C$zun,C$zut){if("string"!=typeof C$zur)return C$zua(C$zun,new Error("[AssetLibrary] uuid must be string"),null);var C$zue={uuid:C$zur,type:"uuid"};C$zut&&C$zut.existingAsset&&(C$zue.existingAsset=C$zut.existingAsset),C$zuv.load(C$zue,function(C$zut,C$zue){var C$zui;C$zut||!C$zue?(C$zui="string"==typeof C$zut?C$zut:C$zut?C$zut.message||C$zut.errorMessage||JSON.stringify(C$zut):"Unknown error",C$zut=new Error("[AssetLibrary] loading JSON or dependencies failed:"+C$zui)):(C$zue.constructor===cc.SceneAsset&&(C$zui=cc.loader._getReferenceKey(C$zur),C$zue.scene.dependAssets=C$zus.getDependsRecursively(C$zui)),isScene(C$zue)&&(C$zui=cc.loader._getReferenceKey(C$zur),C$zuv.removeItem(C$zui))),C$zun&&C$zun(C$zut,C$zue)})},getLibUrlNoExt:function(C$zut,C$zue){return C$zut=C$zuy(C$zut),(C$zue?C$zuC+"assets/":C$zub)+C$zut.slice(0,2)+"/"+C$zut},_queryAssetInfoInEditor:function(C$zut,C$zue){},_getAssetInfoInRuntime:function(C$zut,C$zue){C$zue=C$zue||{url:null,raw:!1};var C$zui=C$zux[C$zut];return C$zui&&!C$zug.isChildClassOf(C$zui.type,cc.Asset)?(C$zue.url=C$zuC+C$zui.url,C$zue.raw=!0):(C$zue.url=this.getLibUrlNoExt(C$zut)+".json",C$zue.raw=!1),C$zue},_uuidInSettings:function(C$zut){return C$zut in C$zux},queryAssetInfo:function(C$zut,C$zue){C$zut=this._getAssetInfoInRuntime(C$zut);C$zue(null,C$zut.url,C$zut.raw)},parseUuidInEditor:function(C$zut){},loadJson:function(C$zut,C$zur){var C$zun=""+((new Date).getTime()+Math.random());C$zut={uuid:C$zun,type:"uuid",content:C$zut,skips:[C$zuv.assetLoader.id,C$zuv.downloader.id]};C$zuv.load(C$zut,function(C$zut,C$zue){var C$zui;C$zut?C$zut=new Error("[AssetLibrary] loading JSON or dependencies failed: "+C$zut.message):(C$zue.constructor===cc.SceneAsset&&(C$zui=cc.loader._getReferenceKey(C$zun),C$zue.scene.dependAssets=C$zus.getDependsRecursively(C$zui)),isScene(C$zue)&&(C$zui=cc.loader._getReferenceKey(C$zun),C$zuv.removeItem(C$zui))),C$zue._uuid="",C$zur&&C$zur(C$zut,C$zue)})},getAssetByUuid:function(C$zut){return C$zue._uuidToAsset[C$zut]||null},init:function(C$zut){var C$zue=C$zut.libraryPath;C$zue=C$zue.replace(/\\/g,"/"),C$zub=cc.path.stripSep(C$zue)+"/",C$zuC=C$zut.rawAssetsBase,C$zut.subpackages&&(C$zue=new C$zuw(C$zut.subpackages),cc.loader.insertPipeAfter(cc.loader.assetLoader,C$zue),cc.loader.subPackPipe=C$zue);C$zue=C$zut.md5AssetsMap;if(C$zue&&C$zue.import){var C$zui=0,C$zur=0;var C$zuh=C$zug.createMap(!0);var C$zun=C$zue.import;for(C$zui=0;C$zui<C$zun.length;C$zui+=2)C$zuh[C$zur=C$zuy(C$zun[C$zui])]=C$zun[C$zui+1];var C$zuu=C$zug.createMap(!0);for(C$zun=C$zue["raw-assets"],C$zui=0;C$zui<C$zun.length;C$zui+=2)C$zuu[C$zur=C$zuy(C$zun[C$zui])]=C$zun[C$zui+1];C$zue=new C$zuT(C$zuh,C$zuu,C$zub);cc.loader.insertPipeAfter(cc.loader.assetLoader,C$zue),cc.loader.md5Pipe=C$zue}var C$zua=C$zuv._assetTables;for(var C$zu_ in C$zua)C$zua[C$zu_].reset();var C$zuo=C$zut.rawAssets;if(C$zuo)for(var C$zus in C$zuo){var C$zud=C$zuo[C$zus];for(var C$zur in C$zud){var C$zuf=C$zud[C$zur];var C$zuc=C$zuf[0];var C$zup=C$zuf[1];var C$zum=cc.js._getClassById(C$zup);var C$zul;C$zum?(C$zux[C$zur]=new RawAssetEntry(C$zus+"/"+C$zuc,C$zum),(C$zul=cc.path.extname(C$zuc))&&(C$zuc=C$zuc.slice(0,-C$zul.length)),C$zul=1===C$zuf[2],C$zua[C$zus]||(C$zua[C$zus]=new C$zuA),C$zua[C$zus].add(C$zuc,C$zur,C$zum,!C$zul)):cc.error("Cannot get",C$zup)}}C$zut.packedAssets&&C$zuS.initPacks(C$zut.packedAssets),cc.url._init(C$zut.mountPaths&&C$zut.mountPaths.assets||C$zuC+"assets")}};C$zue._uuidToAsset={};var C$zur={effect:{},material:{}};var C$zuo={};function loadBuiltins(C$zut,C$zue,C$zun){var C$zui=C$zut+"s";var C$zua=C$zur[C$zut]={};cc.loader.loadResDir(C$zui,C$zue,"internal",function(){},function(C$zut,C$zue){if(C$zut)cc.error(C$zut);else for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];cc.loader.getDependsRecursively(C$zur).forEach(function(C$zut){return C$zuo[C$zut]=!0}),C$zua[""+C$zur.name]=C$zur}C$zun()})}C$zue._loadBuiltins=function(C$zut){if(cc.game.renderType===cc.game.RENDER_TYPE_CANVAS)return C$zut&&C$zut();loadBuiltins("effect",cc.EffectAsset,function(){loadBuiltins("material",cc.Material,C$zut)})},C$zue.getBuiltin=function(C$zut,C$zue){return C$zur[C$zut][C$zue]},C$zue.getBuiltins=function(C$zut){return C$zut?C$zur[C$zut]:C$zur},C$zue.resetBuiltins=function(){C$zur={effect:{},material:{}},C$zuo={}},C$zue.getBuiltinDeps=function(){return C$zuo},C$zui.exports=cc.AssetLibrary=C$zue},{"../assets/CCAsset":34,"../load-pipeline/CCLoader":136,"../load-pipeline/asset-table":138,"../load-pipeline/auto-release-utils":140,"../load-pipeline/md5-pipe":147,"../load-pipeline/pack-downloader":148,"../load-pipeline/subpackage-pipe":151,"../utils/decode-uuid":258,"./js":209,"./utils":213}],189:[function(C$zut,C$zui,C$zur){"use strict";var C$zuy=C$zut("./js");var C$zus=C$zut("./CCEnum");var C$zue=C$zut("./utils");C$zue.isPlainEmptyObj_DEV;C$zue.cloneable_DEV;var C$zug=C$zut("./attribute");var C$zub=C$zug.DELIMETER;var C$zuC=C$zut("./preprocess-class");C$zut("./requiring-frame");var C$zuh=["name","extends","mixins","ctor","__ctor__","properties","statics","editor","__ES6__"];function pushUnique(C$zut,C$zue){C$zut.indexOf(C$zue)<0&&C$zut.push(C$zue)}var C$zuu={datas:null,push:function(C$zut){var C$zue;this.datas?this.datas.push(C$zut):(this.datas=[C$zut],C$zue=this,setTimeout(function(){C$zue.init()},0))},init:function(){var C$zut=this.datas;if(C$zut){for(var C$zue=0;C$zue<C$zut.length;++C$zue){var C$zui=C$zut[C$zue];var C$zur=C$zui.cls;var C$zun=C$zui.props;"function"==typeof C$zun&&(C$zun=C$zun());var C$zua=C$zuy.getClassName(C$zur);C$zun?declareProperties(C$zur,C$zua,C$zun,C$zur.$super,C$zui.mixins):cc.errorID(3633,C$zua)}this.datas=null}}};function defineProp(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zur.default;C$zug.setClassAttr(C$zut,C$zui,"default",C$zun),pushUnique(C$zut.__props__,C$zui),parseAttributes(C$zut,C$zur,0,C$zui)}function getDefault(C$zut){return"function"==typeof C$zut?C$zut():C$zut}function mixinWithInherited(C$zut,C$zue,C$zui){for(var C$zur in C$zue)C$zut.hasOwnProperty(C$zur)||C$zui&&!C$zui(C$zur)||Object.defineProperty(C$zut,C$zur,C$zuy.getPropertyDescriptor(C$zue,C$zur))}function doDefine(C$zuh,C$zut,C$zue,C$zui){var C$zur=C$zui.__ctor__;var C$zuu=C$zui.ctor;var C$zun=C$zui.__ES6__;var C$zua;var C$zuo;C$zun?(C$zua=[C$zuu],C$zuo=C$zuu):(C$zua=C$zur?[C$zur]:function(C$zut,C$zue,C$zui){var C$zur=[];var C$zun=[C$zut].concat(C$zue);for(var C$zua=0;C$zua<C$zun.length;C$zua++){var C$zuo=C$zun[C$zua];if(C$zuo){var C$zus=function(C$zut){return CCClass._isCCClass(C$zut)?C$zut.__ctors__||[]:[C$zut]}(C$zuo);for(var C$zuc=0;C$zuc<C$zus.length;C$zuc++)pushUnique(C$zur,C$zus[C$zuc])}}C$zut=C$zui.ctor;return C$zut&&C$zur.push(C$zut),C$zur}(C$zut,C$zue,C$zui),C$zuo=C$zujt0(C$zua,C$zut,0,C$zui),C$zuy.value(C$zuo,"extend",function(C$zut){return C$zut.extends=this,CCClass(C$zut)},!0)),C$zuy.value(C$zuo,"__ctors__",0<C$zua.length?C$zua:null,!0);var C$zus=C$zuo.prototype;if(C$zut&&(C$zun||(C$zuy.extend(C$zuo,C$zut),C$zus=C$zuo.prototype),C$zuo.$super=C$zut),C$zue){for(var C$zuc=C$zue.length-1;0<=C$zuc;C$zuc--){var C$zul=C$zue[C$zuc];mixinWithInherited(C$zus,C$zul.prototype),mixinWithInherited(C$zuo,C$zul,function(C$zut){return C$zul.hasOwnProperty(C$zut)&&!0}),CCClass._isCCClass(C$zul)&&mixinWithInherited(C$zug.getClassAttrs(C$zuo),C$zug.getClassAttrs(C$zul))}C$zus.constructor=C$zuo}return C$zun||(C$zus.__initProps__=compileProps),C$zuy.setClassName(C$zuh,C$zuo),C$zuo}function escapeForJS(C$zut){return JSON.stringify(C$zut).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}C$zue=/^[A-Za-z_$][0-9A-Za-z_$]*$/;function compileProps(C$zut){var C$zue=C$zug.getClassAttrs(C$zut);var C$zui=C$zut.__props__;null===C$zui&&(C$zuu.init(),C$zui=C$zut.__props__);C$zue=function(C$zut,C$zue){var C$zun=[];var C$zua=[];var C$zuo=[];var C$zus=[];for(var C$zui=0;C$zui<C$zue.length;++C$zui){var C$zur=C$zue[C$zui];var C$zuc=C$zur+C$zub+"default";C$zuc in C$zut&&("object"==typeof(C$zuc=C$zut[C$zuc])&&C$zuc||"function"==typeof C$zuc?(C$zun.push(C$zur),C$zua.push(C$zuc)):(C$zuo.push(C$zur),C$zus.push(C$zuc)))}return function(){for(var C$zut=0;C$zut<C$zuo.length;++C$zut)this[C$zuo[C$zut]]=C$zus[C$zut];for(var C$zue=0;C$zue<C$zun.length;C$zue++){var C$zui=C$zun[C$zue];var C$zur=C$zua[C$zue];C$zur="object"==typeof C$zur?C$zur instanceof cc.ValueType?C$zur.clone():Array.isArray(C$zur)?[]:{}:C$zur(),this[C$zui]=C$zur}}}(C$zue,C$zui);(C$zut.prototype.__initProps__=C$zue).call(this)}function C$zujt0(C$zue,C$zut,C$zui,C$zur){var C$zun=C$zut&&function(C$zut,C$zue){var C$zui=!1;for(var C$zur in C$zue)if(!(0<=C$zuh.indexOf(C$zur))){var C$zun=C$zue[C$zur];if("function"==typeof C$zun){var C$zua=C$zuy.getPropertyDescriptor(C$zut.prototype,C$zur);if(C$zua){C$zua=C$zua.value;if("function"==typeof C$zua){C$zuo.test(C$zun)&&(C$zui=!0,C$zue[C$zur]=function(C$zui,C$zur){return function(){var C$zut=this._super;this._super=C$zui;var C$zue=C$zur.apply(this,arguments);return this._super=C$zut,C$zue}}(C$zua,C$zun));continue}}}}return C$zui}(C$zut,C$zur);var C$zua;return C$zut=C$zue.length,C$zua=0<C$zut?C$zun?2===C$zut?function(){this._super=null,this.__initProps__(C$zua),C$zue[0].apply(this,arguments),C$zue[1].apply(this,arguments)}:function(){this._super=null,this.__initProps__(C$zua);for(var C$zut=0;C$zut<C$zue.length;++C$zut)C$zue[C$zut].apply(this,arguments)}:3===C$zut?function(){this.__initProps__(C$zua),C$zue[0].apply(this,arguments),C$zue[1].apply(this,arguments),C$zue[2].apply(this,arguments)}:function(){this.__initProps__(C$zua);var C$zut=C$zua.__ctors__;for(var C$zue=0;C$zue<C$zut.length;++C$zue)C$zut[C$zue].apply(this,arguments)}:function(){C$zun&&(this._super=null),this.__initProps__(C$zua)}}var C$zuo=/xyz/.test(function(){xyz})?/\b\._super\b/:/.*/;/xyz/.test(function(){xyz});function declareProperties(C$zue,C$zuh,C$zut,C$zui,C$zuu,C$zu_){if(C$zue.__props__=[],C$zui&&C$zui.__props__&&(C$zue.__props__=C$zui.__props__.slice()),C$zuu)for(var C$zud=0;C$zud<C$zuu.length;++C$zud){var C$zuf=C$zuu[C$zud];C$zuf.__props__&&(C$zue.__props__=C$zue.__props__.concat(C$zuf.__props__.filter(function(C$zut){return C$zue.__props__.indexOf(C$zut)<0})))}if(C$zut)for(var C$zur in C$zuC.preprocessAttrs(C$zut,C$zuh,C$zue,C$zu_),C$zut){var C$zun=C$zut[C$zur];"default"in C$zun?defineProp(C$zue,0,C$zur,C$zun):(C$zua=C$zue,C$zup=C$zuh,C$zur=C$zur,C$zum=C$zu_,C$zul=C$zuc=C$zus=C$zuo=void 0,C$zuo=(C$zun=C$zun).get,C$zus=C$zun.set,C$zuc=C$zua.prototype,C$zul=!Object.getOwnPropertyDescriptor(C$zuc,C$zur),C$zuo&&(parseAttributes(C$zua,C$zun,0,C$zur),C$zug.setClassAttr(C$zua,C$zur,"serializable",!1),C$zum||C$zuy.get(C$zuc,C$zur,C$zuo,C$zul,C$zul)),C$zus&&(C$zum||C$zuy.set(C$zuc,C$zur,C$zus,C$zul,C$zul)))}var C$zua,C$zup,C$zum,C$zuo,C$zus,C$zuc,C$zul;var C$zuv=C$zug.getClassAttrs(C$zue);C$zue.__values__=C$zue.__props__.filter(function(C$zut){return!1!==C$zuv[C$zut+C$zub+"serializable"]})}function CCClass(C$zut){var C$zue=(C$zut=C$zut||{}).name;var C$zui=C$zut.extends;var C$zur=C$zut.mixins;var C$zun=function(C$zut,C$zue,C$zui,C$zur){var C$zun=cc.Component;var C$zua=cc._RF.peek();if(C$zua&&C$zuy.isChildClassOf(C$zue,C$zun)){if(C$zuy.isChildClassOf(C$zua.cls,C$zun))return cc.errorID(3615),null;C$zut=C$zut||C$zua.script}return C$zut=doDefine(C$zut,C$zue,C$zui,C$zur),C$zua&&(C$zuy.isChildClassOf(C$zue,C$zun)?((C$zui=C$zua.uuid)&&C$zuy._setClassId(C$zui,C$zut),C$zua.cls=C$zut):C$zuy.isChildClassOf(C$zua.cls,C$zun)||(C$zua.cls=C$zut)),C$zut}(C$zue,C$zui,C$zur,C$zut);C$zue=C$zue||cc.js.getClassName(C$zun),C$zun._sealed=!0,C$zui&&(C$zui._sealed=!1);var C$zua=C$zut.properties;"function"==typeof C$zua||C$zui&&null===C$zui.__props__||C$zur&&C$zur.some(function(C$zut){return null===C$zut.__props__})?(C$zuu.push({cls:C$zun,props:C$zua,mixins:C$zur}),C$zun.__props__=C$zun.__values__=null):declareProperties(C$zun,C$zue,C$zua,C$zui,C$zut.mixins,C$zut.__ES6__);var C$zuo=C$zut.statics;if(C$zuo)for(var C$zus in C$zuo)C$zun[C$zus]=C$zuo[C$zus];for(var C$zuc in C$zut){var C$zul;0<=C$zuh.indexOf(C$zuc)||(C$zul=C$zut[C$zuc],C$zuC.validateMethodWithProps(C$zul,C$zuc,C$zue,C$zun,C$zui)&&C$zuy.value(C$zun.prototype,C$zuc,C$zul,!0,!0))}C$zur=C$zut.editor;return C$zur&&C$zuy.isChildClassOf(C$zui,cc.Component)&&cc.Component._registerEditorProps(C$zun,C$zur),C$zun}CCClass._isCCClass=function(C$zut){return C$zut&&C$zut.hasOwnProperty("__ctors__")},CCClass._fastDefine=function(C$zut,C$zue,C$zui){C$zuy.setClassName(C$zut,C$zue);var C$zur=C$zue.__props__=C$zue.__values__=Object.keys(C$zui);var C$zun=C$zug.getClassAttrs(C$zue);for(var C$zua=0;C$zua<C$zur.length;C$zua++){var C$zuo=C$zur[C$zua];C$zun[C$zuo+C$zub+"visible"]=!1,C$zun[C$zuo+C$zub+"default"]=C$zui[C$zuo]}},CCClass.Attr=C$zug,CCClass.attr=C$zug.attr,CCClass.getInheritanceChain=function(C$zut){var C$zue=[];for(;C$zut=C$zuy.getSuper(C$zut);)C$zut!==Object&&C$zue.push(C$zut);return C$zue};var C$zuc={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"};function parseAttributes(C$zut,C$zur,C$zue,C$zui){var C$zun=null;var C$zua="";function initAttrs(){return C$zua=C$zui+C$zub,C$zun=C$zug.getClassAttrs(C$zut)}var C$zuo=C$zur.type;function parseSimpleAttr(C$zut,C$zue){var C$zui;C$zut in C$zur&&(typeof(C$zui=C$zur[C$zut])===C$zue&&((C$zun||initAttrs())[C$zua+C$zut]=C$zui))}C$zuo&&(C$zuc[C$zuo]?(C$zun||initAttrs())[C$zua+"type"]=C$zuo:"Object"===C$zuo||(C$zuo===C$zug.ScriptUuid?((C$zun||initAttrs())[C$zua+"type"]="Script",C$zun[C$zua+"ctor"]=cc.ScriptAsset):"object"==typeof C$zuo?C$zus.isEnum(C$zuo)&&((C$zun||initAttrs())[C$zua+"type"]="Enum",C$zun[C$zua+"enumList"]=C$zus.getList(C$zuo)):"function"==typeof C$zuo&&((C$zun||initAttrs())[C$zua+"type"]="Object",C$zun[C$zua+"ctor"]=C$zuo))),C$zur.editorOnly&&((C$zun||initAttrs())[C$zua+"editorOnly"]=!0),C$zur.url&&((C$zun||initAttrs())[C$zua+"saveUrlAsAsset"]=!0),!1===C$zur.serializable&&((C$zun||initAttrs())[C$zua+"serializable"]=!1),parseSimpleAttr("formerlySerializedAs","string");C$zuo=C$zur.range;C$zuo&&Array.isArray(C$zuo)&&2<=C$zuo.length&&((C$zun||initAttrs())[C$zua+"min"]=C$zuo[0],C$zun[C$zua+"max"]=C$zuo[1],2<C$zuo.length&&(C$zun[C$zua+"step"]=C$zuo[2])),parseSimpleAttr("min","number"),parseSimpleAttr("max","number"),parseSimpleAttr("step","number")}cc.Class=CCClass,C$zui.exports={isArray:function(C$zut){return C$zut=getDefault(C$zut),Array.isArray(C$zut)},fastDefine:CCClass._fastDefine,getNewValueTypeCode:!1,IDENTIFIER_RE:C$zue,escapeForJS:escapeForJS,getDefault:getDefault}},{"./CCEnum":191,"./attribute":201,"./js":209,"./preprocess-class":210,"./requiring-frame":211,"./utils":213}],190:[function(C$zut,C$zun,C$zua){"use strict";C$zut("./CCClass");var C$zuh=C$zut("./preprocess-class");var C$zul=C$zut("./js");var C$zur="__ccclassCache__";function fNOP(C$zut){return C$zut}function getSubDict(C$zut,C$zue){return C$zut[C$zue]||(C$zut[C$zue]={})}function checkCtorArgument(C$zui){return function(C$zue){return"function"==typeof C$zue?C$zui(C$zue):function(C$zut){return C$zui(C$zut,C$zue)}}}function _checkNormalArgument(C$zut,C$zui,C$zue){return function(C$zue){return function(C$zut){return C$zui(C$zut,C$zue)}}}C$zut=_checkNormalArgument.bind(null,!1);function _argumentChecker(){return _checkNormalArgument.bind(null,!1)}var C$zue=_argumentChecker();var C$zui=_argumentChecker();function getClassCache(C$zut){return getSubDict(C$zut,C$zur)}function genProperty(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=C$zun&&(C$zun.get||C$zun.set);C$zur&&(C$zuc=C$zuh.getFullFormOfProperty(C$zur,C$zuo));var C$zus=C$zue[C$zui];C$zus=C$zul.mixin(C$zus||{},C$zuc||C$zur||{});var C$zuc;C$zuo?(C$zun.get&&(C$zus.get=C$zun.get),C$zun.set&&(C$zus.set=C$zun.set)):(C$zuc=void 0,C$zun?C$zun.initializer&&(C$zuc=function(C$zue){var C$zut;try{C$zut=C$zue()}catch(C$zut){return C$zue}return"object"!=typeof C$zut||null===C$zut?C$zut:C$zue}(C$zun.initializer)):(C$zur=C$zua.default||(C$zua.default=function(C$zut){var C$zue;try{C$zue=new C$zut}catch(C$zut){return{}}return C$zue}(C$zut))).hasOwnProperty(C$zui)&&(C$zuc=C$zur[C$zui]),C$zus.default=C$zuc),C$zue[C$zui]=C$zus}var C$zuo=checkCtorArgument(function(C$zut,C$zue){var C$zui=C$zul.getSuper(C$zut);C$zue={name:C$zue,extends:C$zui=C$zui===Object?null:C$zui,ctor:C$zut,__ES6__:!0};C$zui=C$zut[C$zur];return C$zui&&((C$zui=C$zui.proto)&&C$zul.mixin(C$zue,C$zui),C$zut[C$zur]=void 0),cc.Class(C$zue)});function createEditorDecorator(C$zut,C$zui,C$zur){return C$zut(function(C$zut,C$zue){C$zut=getClassCache(C$zut);C$zut&&(C$zue=void 0!==C$zur?C$zur:C$zue,C$zut=getSubDict(C$zut,"proto"),getSubDict(C$zut,"editor")[C$zui]=C$zue)},C$zui)}function createDummyDecorator(C$zut){return C$zut(fNOP)}var C$zus=createDummyDecorator(checkCtorArgument);C$zut=createEditorDecorator(C$zut,"requireComponent");var C$zuc=createDummyDecorator(C$zue);C$zui=createEditorDecorator(C$zui,"executionOrder");var C$zuu=createDummyDecorator(checkCtorArgument);var C$zu_=createDummyDecorator(checkCtorArgument);var C$zud=createDummyDecorator(C$zue);var C$zuf=createDummyDecorator(C$zue);C$zue=createDummyDecorator(C$zue);cc._decorator=C$zun.exports={ccclass:C$zuo,property:function(C$zut,C$zue,C$zui){var C$zua=null;function normalized(C$zut,C$zue,C$zui){var C$zur=getClassCache(C$zut.constructor);var C$zun;C$zur&&(C$zun=getSubDict(C$zur,"proto"),C$zun=getSubDict(C$zun,"properties"),genProperty(C$zut.constructor,C$zun,C$zue,C$zua,C$zui,C$zur))}if(void 0===C$zue)return C$zua=C$zut,normalized;normalized(C$zut,C$zue,C$zui)},executeInEditMode:C$zus,requireComponent:C$zut,menu:C$zuc,executionOrder:C$zui,disallowMultiple:C$zuu,playOnFocus:C$zu_,inspector:C$zud,icon:C$zuf,help:C$zue,mixins:function(){var C$zue=[];for(var C$zut=0;C$zut<arguments.length;C$zut++)C$zue[C$zut]=arguments[C$zut];return function(C$zut){C$zut=getClassCache(C$zut);C$zut&&(getSubDict(C$zut,"proto").mixins=C$zue)}}}},{"./CCClass":189,"./js":209,"./preprocess-class":210,"./utils":213}],191:[function(C$zut,C$zue,C$zui){"use strict";var C$zuo=C$zut("./js");function Enum(C$zut){if("__enums__"in C$zut)return C$zut;C$zuo.value(C$zut,"__enums__",null,!0);var C$zue=-1;var C$zui=Object.keys(C$zut);for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur];var C$zua=C$zut[C$zun];if(-1===C$zua)C$zua=++C$zue,C$zut[C$zun]=C$zua;else if("number"==typeof C$zua)C$zue=C$zua;else if("string"==typeof C$zua&&Number.isInteger(parseFloat(C$zun)))continue;C$zua=""+C$zua;C$zun!==C$zua&&C$zuo.value(C$zut,C$zua,C$zun)}return C$zut}Enum.isEnum=function(C$zut){return C$zut&&C$zut.hasOwnProperty("__enums__")},Enum.getList=function(C$zut){if(C$zut.__enums__)return C$zut.__enums__;var C$zue=C$zut.__enums__=[];for(var C$zui in C$zut){var C$zur=C$zut[C$zui];Number.isInteger(C$zur)&&C$zue.push({name:C$zui,value:C$zur})}return C$zue.sort(function(C$zut,C$zue){return C$zut.value-C$zue.value}),C$zue},C$zue.exports=cc.Enum=Enum},{"./js":209}],192:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../event-manager");C$zut=C$zut("./CCInputManager");var C$zun;cc.Acceleration=function(C$zut,C$zue,C$zui,C$zur){this.x=C$zut||0,this.y=C$zue||0,this.z=C$zui||0,this.timestamp=C$zur||0},C$zut.setAccelerometerEnabled=function(C$zut){this._accelEnabled!==C$zut&&(this._accelEnabled=C$zut,(C$zut=cc.director.getScheduler()).enableForTarget(this),this._accelEnabled?(this._registerAccelerometerEvent(),this._accelCurTime=0,C$zut.scheduleUpdate(this)):(this._unregisterAccelerometerEvent(),this._accelCurTime=0,C$zut.unscheduleUpdate(this)))},C$zut.setAccelerometerInterval=function(C$zut){this._accelInterval!==C$zut&&(this._accelInterval=C$zut)},C$zut._registerKeyboardEvent=function(){cc.game.canvas.addEventListener("keydown",function(C$zut){C$zur.dispatchEvent(new cc.Event.EventKeyboard(C$zut.keyCode,!0)),C$zut.stopPropagation(),C$zut.preventDefault()},!1),cc.game.canvas.addEventListener("keyup",function(C$zut){C$zur.dispatchEvent(new cc.Event.EventKeyboard(C$zut.keyCode,!1)),C$zut.stopPropagation(),C$zut.preventDefault()},!1)},C$zut._registerAccelerometerEvent=function(){var C$zut=window;this._acceleration=new cc.Acceleration,this._accelDeviceEvent=C$zut.DeviceMotionEvent||C$zut.DeviceOrientationEvent,cc.sys.browserType===cc.sys.BROWSER_TYPE_MOBILE_QQ&&(this._accelDeviceEvent=window.DeviceOrientationEvent);var C$zue=this._accelDeviceEvent===C$zut.DeviceMotionEvent?"devicemotion":"deviceorientation";var C$zui=navigator.userAgent;(/Android/.test(C$zui)||/Adr/.test(C$zui)&&cc.sys.browserType===cc.BROWSER_TYPE_UC)&&(this._minus=-1),C$zun=this.didAccelerate.bind(this),C$zut.addEventListener(C$zue,C$zun,!1)},C$zut._unregisterAccelerometerEvent=function(){var C$zut=window;var C$zue=this._accelDeviceEvent===C$zut.DeviceMotionEvent?"devicemotion":"deviceorientation";C$zun&&C$zut.removeEventListener(C$zue,C$zun,!1)},C$zut.didAccelerate=function(C$zut){var C$zue=window;var C$zui,C$zur,C$zun,C$zua,C$zuo;this._accelEnabled&&(C$zui=this._acceleration,C$zua=this._accelDeviceEvent===window.DeviceMotionEvent?(C$zua=C$zut.accelerationIncludingGravity,C$zur=this._accelMinus*C$zua.x*.1,C$zun=this._accelMinus*C$zua.y*.1,.1*C$zua.z):(C$zur=C$zut.gamma/90*.981,C$zun=-C$zut.beta/90*.981,C$zut.alpha/90*.981),cc.view._isRotated&&(C$zuo=C$zur,C$zur=-C$zun,C$zun=C$zuo),C$zui.x=C$zur,C$zui.y=C$zun,C$zui.z=C$zua,C$zui.timestamp=C$zut.timeStamp||Date.now(),C$zuo=C$zui.x,90===C$zue.orientation?(C$zui.x=-C$zui.y,C$zui.y=C$zuo):-90===C$zue.orientation?(C$zui.x=C$zui.y,C$zui.y=-C$zuo):180===C$zue.orientation&&(C$zui.x=-C$zui.x,C$zui.y=-C$zui.y),cc.sys.os===cc.sys.OS_ANDROID&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_MOBILE_QQ&&(C$zui.x=-C$zui.x,C$zui.y=-C$zui.y))}},{"../event-manager":113,"./CCInputManager":193}],193:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./CCMacro");var C$zud=C$zut("./CCSys");var C$zuf=C$zut("../event-manager");var C$zun=C$zur.TOUCH_TIMEOUT;var C$zuh=cc.v2();C$zut={_mousePressed:!1,_isRegisterEvent:!1,_preTouchPoint:cc.v2(0,0),_prevMousePoint:cc.v2(0,0),_preTouchPool:[],_preTouchPoolPointer:0,_touches:[],_touchesIntegerDict:{},_indexBitsUsed:0,_maxTouches:8,_accelEnabled:!1,_accelInterval:.2,_accelMinus:1,_accelCurTime:0,_acceleration:null,_accelDeviceEvent:null,_canvasBoundingRect:{left:0,top:0,adjustedLeft:0,adjustedTop:0,width:0,height:0},_getUnUsedIndex:function(){var C$zut=this._indexBitsUsed;var C$zue=cc.sys.now();for(var C$zui=0;C$zui<this._maxTouches;C$zui++){if(!(1&C$zut))return this._indexBitsUsed|=1<<C$zui,C$zui;var C$zur=this._touches[C$zui];if(C$zue-C$zur._lastModified>C$zun)return this._removeUsedIndexBit(C$zui),delete this._touchesIntegerDict[C$zur.getID()],C$zui;C$zut>>=1}return-1},_removeUsedIndexBit:function(C$zut){C$zut<0||C$zut>=this._maxTouches||(this._indexBitsUsed&=~(1<<C$zut))},_glView:null,_updateCanvasBoundingRect:function(){var C$zut=cc.game.canvas;var C$zue=this._canvasBoundingRect;var C$zui=document.documentElement;var C$zur=window.pageXOffset-C$zui.clientLeft;C$zui=window.pageYOffset-C$zui.clientTop;var C$zun;C$zut.getBoundingClientRect?(C$zun=C$zut.getBoundingClientRect(),C$zue.left=C$zun.left+C$zur,C$zue.top=C$zun.top+C$zui,C$zue.width=C$zun.width,C$zue.height=C$zun.height):C$zut instanceof HTMLCanvasElement?(C$zue.left=C$zur,C$zue.top=C$zui,C$zue.width=C$zut.width,C$zue.height=C$zut.height):(C$zue.left=C$zur,C$zue.top=C$zui,C$zue.width=parseInt(C$zut.style.width),C$zue.height=parseInt(C$zut.style.height))},handleTouchesBegin:function(C$zut){var C$zue,C$zui,C$zur,C$zun=[],C$zua=this._touchesIntegerDict,C$zuo=C$zud.now();for(var C$zus=0,C$zuh=C$zut.length;C$zus<C$zuh;C$zus++){var C$zuc;null==C$zua[C$zur=(C$zue=C$zut[C$zus]).getID()]&&(-1!==(C$zuc=this._getUnUsedIndex())?((C$zui=this._touches[C$zuc]=new cc.Touch(C$zue._point.x,C$zue._point.y,C$zue.getID()))._lastModified=C$zuo,C$zui._setPrevPoint(C$zue._prevPoint),C$zua[C$zur]=C$zuc,C$zun.push(C$zui)):cc.logID(2300,C$zuc))}var C$zul;0<C$zun.length&&(this._glView._convertTouchesWithScale(C$zun),(C$zul=new cc.Event.EventTouch(C$zun))._eventCode=cc.Event.EventTouch.BEGAN,C$zuf.dispatchEvent(C$zul))},handleTouchesMove:function(C$zut){var C$zue,C$zui,C$zur=[],C$zun=this._touches,C$zua=C$zud.now();for(var C$zuo=0,C$zus=C$zut.length;C$zuo<C$zus;C$zuo++)C$zui=(C$zue=C$zut[C$zuo]).getID(),null!=(C$zui=this._touchesIntegerDict[C$zui])&&C$zun[C$zui]&&(C$zun[C$zui]._setPoint(C$zue._point),C$zun[C$zui]._setPrevPoint(C$zue._prevPoint),C$zun[C$zui]._lastModified=C$zua,C$zur.push(C$zun[C$zui]));var C$zuc;0<C$zur.length&&(this._glView._convertTouchesWithScale(C$zur),(C$zuc=new cc.Event.EventTouch(C$zur))._eventCode=cc.Event.EventTouch.MOVED,C$zuf.dispatchEvent(C$zuc))},handleTouchesEnd:function(C$zut){C$zut=this.getSetOfTouchesEndOrCancel(C$zut);0<C$zut.length&&(this._glView._convertTouchesWithScale(C$zut),(C$zut=new cc.Event.EventTouch(C$zut))._eventCode=cc.Event.EventTouch.ENDED,C$zuf.dispatchEvent(C$zut)),this._preTouchPool.length=0},handleTouchesCancel:function(C$zut){C$zut=this.getSetOfTouchesEndOrCancel(C$zut);0<C$zut.length&&(this._glView._convertTouchesWithScale(C$zut),(C$zut=new cc.Event.EventTouch(C$zut))._eventCode=cc.Event.EventTouch.CANCELED,C$zuf.dispatchEvent(C$zut)),this._preTouchPool.length=0},getSetOfTouchesEndOrCancel:function(C$zut){var C$zue,C$zui,C$zur,C$zun=[],C$zua=this._touches,C$zuo=this._touchesIntegerDict;for(var C$zus=0,C$zuc=C$zut.length;C$zus<C$zuc;C$zus++)null!=(C$zui=C$zuo[C$zur=(C$zue=C$zut[C$zus]).getID()])&&C$zua[C$zui]&&(C$zua[C$zui]._setPoint(C$zue._point),C$zua[C$zui]._setPrevPoint(C$zue._prevPoint),C$zun.push(C$zua[C$zui]),this._removeUsedIndexBit(C$zui),delete C$zuo[C$zur]);return C$zun},getPreTouch:function(C$zut){var C$zue=null;var C$zui=this._preTouchPool;var C$zur=C$zut.getID();for(var C$zun=C$zui.length-1;0<=C$zun;C$zun--)if(C$zui[C$zun].getID()===C$zur){C$zue=C$zui[C$zun];break}return C$zue=C$zue||C$zut},setPreTouch:function(C$zut){var C$zue=!1;var C$zui=this._preTouchPool;var C$zur=C$zut.getID();for(var C$zun=C$zui.length-1;0<=C$zun;C$zun--)if(C$zui[C$zun].getID()===C$zur){C$zui[C$zun]=C$zut,C$zue=!0;break}C$zue||(C$zui.length<=50?C$zui.push(C$zut):(C$zui[this._preTouchPoolPointer]=C$zut,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))},getTouchByXY:function(C$zut,C$zue,C$zui){var C$zur=this._preTouchPoint;C$zut=this._glView.convertToLocationInView(C$zut,C$zue,C$zui);C$zue=new cc.Touch(C$zut.x,C$zut.y,0);return C$zue._setPrevPoint(C$zur.x,C$zur.y),C$zur.x=C$zut.x,C$zur.y=C$zut.y,C$zue},getMouseEvent:function(C$zut,C$zue,C$zui){var C$zur=this._prevMousePoint;C$zui=new cc.Event.EventMouse(C$zui);return C$zui._setPrevCursor(C$zur.x,C$zur.y),C$zur.x=C$zut.x,C$zur.y=C$zut.y,this._glView._convertMouseToLocationInView(C$zur,C$zue),C$zui.setLocation(C$zur.x,C$zur.y),C$zui},getPointByEvent:function(C$zut,C$zue){return cc.sys.browserType!==cc.sys.BROWSER_TYPE_QQ&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_UC&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_SAFARI||this._updateCanvasBoundingRect(),null!=C$zut.pageX?{x:C$zut.pageX,y:C$zut.pageY}:(C$zue.left-=document.body.scrollLeft,C$zue.top-=document.body.scrollTop,{x:C$zut.clientX,y:C$zut.clientY})},getTouchesByEvent:function(C$zut,C$zue){var C$zui=[],C$zur=this._glView;var C$zun,C$zua;var C$zuo=this._preTouchPoint;var C$zus=C$zut.changedTouches.length;for(var C$zuc=0;C$zuc<C$zus;C$zuc++){var C$zul;(C$zua=C$zut.changedTouches[C$zuc])&&(C$zul=void 0,C$zul=C$zud.BROWSER_TYPE_FIREFOX===C$zud.browserType?C$zur.convertToLocationInView(C$zua.pageX,C$zua.pageY,C$zue,C$zuh):C$zur.convertToLocationInView(C$zua.clientX,C$zua.clientY,C$zue,C$zuh),null!=C$zua.identifier?(C$zun=new cc.Touch(C$zul.x,C$zul.y,C$zua.identifier),C$zua=this.getPreTouch(C$zun).getLocation(),C$zun._setPrevPoint(C$zua.x,C$zua.y),this.setPreTouch(C$zun)):(C$zun=new cc.Touch(C$zul.x,C$zul.y))._setPrevPoint(C$zuo.x,C$zuo.y),C$zuo.x=C$zul.x,C$zuo.y=C$zul.y,C$zui.push(C$zun))}return C$zui},registerSystemEvent:function(C$zua){if(!this._isRegisterEvent){this._glView=cc.view;var C$zuo=this;var C$zus=this._canvasBoundingRect;window.addEventListener("resize",this._updateCanvasBoundingRect.bind(this));var C$zut=C$zud.isMobile;var C$zue="mouse"in C$zud.capabilities;var C$zuh="touches"in C$zud.capabilities;if(C$zue){C$zut||(window.addEventListener("mousedown",function(){C$zuo._mousePressed=!0},!1),window.addEventListener("mouseup",function(C$zut){var C$zue;C$zuo._mousePressed&&(C$zuo._mousePressed=!1,C$zue=C$zuo.getPointByEvent(C$zut,C$zus),cc.rect(C$zus.left,C$zus.top,C$zus.width,C$zus.height).contains(C$zue)||(C$zuo.handleTouchesEnd([C$zuo.getTouchByXY(C$zue.x,C$zue.y,C$zus)]),(C$zue=C$zuo.getMouseEvent(C$zue,C$zus,cc.Event.EventMouse.UP)).setButton(C$zut.button),C$zuf.dispatchEvent(C$zue)))},!1));C$zue=cc.Event.EventMouse;var C$zui=[!C$zut&&["mousedown",C$zue.DOWN,function(C$zut,C$zue,C$zui,C$zur){C$zuo._mousePressed=!0,C$zuo.handleTouchesBegin([C$zuo.getTouchByXY(C$zui.x,C$zui.y,C$zur)]),C$zua.focus()}],!C$zut&&["mouseup",C$zue.UP,function(C$zut,C$zue,C$zui,C$zur){C$zuo._mousePressed=!1,C$zuo.handleTouchesEnd([C$zuo.getTouchByXY(C$zui.x,C$zui.y,C$zur)])}],!C$zut&&["mousemove",C$zue.MOVE,function(C$zut,C$zue,C$zui,C$zur){C$zuo.handleTouchesMove([C$zuo.getTouchByXY(C$zui.x,C$zui.y,C$zur)]),C$zuo._mousePressed||C$zue.setButton(null)}],["mousewheel",C$zue.SCROLL,function(C$zut,C$zue){C$zue.setScrollData(0,C$zut.wheelDelta)}],["DOMMouseScroll",C$zue.SCROLL,function(C$zut,C$zue){C$zue.setScrollData(0,-120*C$zut.detail)}]];for(var C$zur=0;C$zur<C$zui.length;++C$zur){var C$zuc=C$zui[C$zur];C$zuc&&function(){var C$zut=C$zuc[0];var C$zur=C$zuc[1];var C$zun=C$zuc[2];C$zua.addEventListener(C$zut,function(C$zut){var C$zue=C$zuo.getPointByEvent(C$zut,C$zus);var C$zui=C$zuo.getMouseEvent(C$zue,C$zus,C$zur);C$zui.setButton(C$zut.button),C$zun(C$zut,C$zui,C$zue,C$zus),C$zuf.dispatchEvent(C$zui),C$zut.stopPropagation(),C$zut.preventDefault()},!1)}()}}if(window.navigator.msPointerEnabled){var C$zun={MSPointerDown:C$zuo.handleTouchesBegin,MSPointerMove:C$zuo.handleTouchesMove,MSPointerUp:C$zuo.handleTouchesEnd,MSPointerCancel:C$zuo.handleTouchesCancel};for(var C$zuu in C$zun)!function(C$zut){var C$zui=C$zun[C$zut];C$zua.addEventListener(C$zut,function(C$zut){var C$zue=document.documentElement;C$zus.adjustedLeft=C$zus.left-C$zue.scrollLeft,C$zus.adjustedTop=C$zus.top-C$zue.scrollTop,C$zui.call(C$zuo,[C$zuo.getTouchByXY(C$zut.clientX,C$zut.clientY,C$zus)]),C$zut.stopPropagation()},!1)}(C$zuu)}if(C$zuh){var C$zul={touchstart:function(C$zut){C$zuo.handleTouchesBegin(C$zut),C$zua.focus()},touchmove:function(C$zut){C$zuo.handleTouchesMove(C$zut)},touchend:function(C$zut){C$zuo.handleTouchesEnd(C$zut)},touchcancel:function(C$zut){C$zuo.handleTouchesCancel(C$zut)}};for(var C$zu_ in C$zul)!function(C$zut){var C$zui=C$zul[C$zut];C$zua.addEventListener(C$zut,function(C$zut){var C$zue;C$zut.changedTouches&&(C$zue=document.body,C$zus.adjustedLeft=C$zus.left-(C$zue.scrollLeft||window.scrollX||0),C$zus.adjustedTop=C$zus.top-(C$zue.scrollTop||window.scrollY||0),C$zui(C$zuo.getTouchesByEvent(C$zut,C$zus)),C$zut.stopPropagation(),C$zut.preventDefault())},!1)}(C$zu_)}this._registerKeyboardEvent(),this._isRegisterEvent=!0}},_registerKeyboardEvent:function(){},_registerAccelerometerEvent:function(){},update:function(C$zut){this._accelCurTime>this._accelInterval&&(this._accelCurTime-=this._accelInterval,C$zuf.dispatchEvent(new cc.Event.EventAcceleration(this._acceleration))),this._accelCurTime+=C$zut}};C$zue.exports=cc.internal.inputManager=C$zut},{"../event-manager":113,"./CCMacro":194,"./CCSys":198}],194:[function(C$zut,C$zue,C$zui){"use strict";cc.macro={RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,MIN_ZINDEX:-Math.pow(2,15),MAX_ZINDEX:Math.pow(2,15)-1,ONE:1,ZERO:0,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,DST_ALPHA:772,DST_COLOR:774,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ORIENTATION_PORTRAIT:1,ORIENTATION_LANDSCAPE:2,ORIENTATION_AUTO:3,DENSITYDPI_DEVICE:"device-dpi",DENSITYDPI_HIGH:"high-dpi",DENSITYDPI_MEDIUM:"medium-dpi",DENSITYDPI_LOW:"low-dpi",FIX_ARTIFACTS_BY_STRECHING_TEXEL_TMX:!0,DIRECTOR_STATS_POSITION:cc.v2(0,0),ENABLE_STACKABLE_ACTIONS:!0,TOUCH_TIMEOUT:5e3,BATCH_VERTEX_COUNT:2e4,ENABLE_TILEDMAP_CULLING:!0,DOWNLOAD_MAX_CONCURRENT:64,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!1,ENABLE_CULLING:!1,CLEANUP_IMAGE_CACHE:!1,SHOW_MESH_WIREFRAME:!1,SHOW_MESH_NORMAL:!1,ENABLE_MULTI_TOUCH:!0},Object.defineProperty(cc.macro,"ROTATE_ACTION_CCW",{set:function(C$zut){cc.RotateTo&&cc.RotateBy&&(cc.RotateTo._reverse=cc.RotateBy._reverse=C$zut)}});cc.macro.SUPPORT_TEXTURE_FORMATS=[".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],cc.macro.KEY={none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},cc.macro.ImageFormat=cc.Enum({JPG:0,PNG:1,TIFF:2,WEBP:3,PVR:4,ETC:5,S3TC:6,ATITC:7,TGA:8,RAWDATA:9,UNKNOWN:10}),cc.macro.BlendFactor=cc.Enum({ONE:1,ZERO:0,SRC_ALPHA:770,SRC_COLOR:768,DST_ALPHA:772,DST_COLOR:774,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775}),cc.macro.TextAlignment=cc.Enum({LEFT:0,CENTER:1,RIGHT:2}),cc.macro.VerticalTextAlignment=cc.Enum({TOP:0,CENTER:1,BOTTOM:2}),C$zue.exports=cc.macro},{}],195:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./js");C$zut=C$zut("./CCClass");function CCObject(){this._name="",this._objFlags=0}C$zut.fastDefine("cc.Object",CCObject,{_name:"",_objFlags:0}),C$zur.value(CCObject,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20});var C$zun=[];C$zur.value(CCObject,"_deferredDestroy",function(){var C$zut=C$zun.length;for(var C$zue=0;C$zue<C$zut;++C$zue){var C$zui=C$zun[C$zue];1&C$zui._objFlags||C$zui._destroyImmediate()}C$zut===C$zun.length?C$zun.length=0:C$zun.splice(0,C$zut)});C$zut=CCObject.prototype;C$zur.getset(C$zut,"name",function(){return this._name},function(C$zut){this._name=C$zut},!0),C$zur.get(C$zut,"isValid",function(){return!(1&this._objFlags)},!0);C$zut.destroy=function(){return 1&this._objFlags?(cc.warnID(5e3),!1):!(4&this._objFlags)&&(this._objFlags|=4,C$zun.push(this),!0)},C$zut._destruct=function(){var C$zut=this.constructor;var C$zue=C$zut.__destruct__;C$zue||(C$zue=function(C$zut,C$zue){var C$zui=C$zut instanceof cc._BaseNode||C$zut instanceof cc.Component;var C$zur=C$zui?"_id":null;var C$zun,C$zua={};for(C$zun in C$zut)if(C$zut.hasOwnProperty(C$zun)){if(C$zun===C$zur)continue;switch(typeof C$zut[C$zun]){case"string":C$zua[C$zun]="";break;case"object":case"function":C$zua[C$zun]=null}}if(cc.Class._isCCClass(C$zue)){var C$zuo=cc.Class.Attr.getClassAttrs(C$zue);var C$zus=C$zue.__props__;for(var C$zuc=0;C$zuc<C$zus.length;C$zuc++){var C$zul=(C$zun=C$zus[C$zuc])+cc.Class.Attr.DELIMETER+"default";if(C$zul in C$zuo&&(!C$zui||"_id"!==C$zun))switch(typeof C$zuo[C$zul]){case"string":C$zua[C$zun]="";break;case"object":case"function":C$zua[C$zun]=null;break;case"undefined":C$zua[C$zun]=void 0}}}return function(C$zut){for(var C$zue in C$zua)C$zut[C$zue]=C$zua[C$zue]}}(this,C$zut),C$zur.value(C$zut,"__destruct__",C$zue,!0)),C$zue(this)},C$zut._onPreDestroy=null,C$zut._destroyImmediate=function(){1&this._objFlags?cc.errorID(5e3):(this._onPreDestroy&&this._onPreDestroy(),this._destruct(),this._objFlags|=1)},C$zut._deserialize=null,cc.isValid=function(C$zut,C$zue){return"object"==typeof C$zut?!(!C$zut||C$zut._objFlags&(C$zue?5:1)):void 0!==C$zut},cc.Object=C$zue.exports=CCObject},{"./CCClass":189,"./js":209}],196:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("../platform/js");cc.SAXParser=function(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):(this._isSupportDOMParser=!1,this._parser=null)},cc.SAXParser.prototype={constructor:cc.SAXParser,parse:function(C$zut){return this._parseXML(C$zut)},_parseXML:function(C$zut){var C$zue;return this._isSupportDOMParser?C$zue=this._parser.parseFromString(C$zut,"text/xml"):((C$zue=new ActiveXObject("Microsoft.XMLDOM")).async="false",C$zue.loadXML(C$zut)),C$zue}},cc.PlistParser=function(){cc.SAXParser.call(this)},C$zut.extend(cc.PlistParser,cc.SAXParser),C$zut.mixin(cc.PlistParser.prototype,{parse:function(C$zut){var C$zue=this._parseXML(C$zut).documentElement;if("plist"!==C$zue.tagName)return cc.warnID(5100),{};var C$zui=null;for(var C$zur=0,C$zun=C$zue.childNodes.length;C$zur<C$zun&&1!==(C$zui=C$zue.childNodes[C$zur]).nodeType;C$zur++);return this._parseNode(C$zui)},_parseNode:function(C$zut){var C$zue=null,C$zui=C$zut.tagName;if("dict"===C$zui)C$zue=this._parseDict(C$zut);else if("array"===C$zui)C$zue=this._parseArray(C$zut);else if("string"===C$zui)if(1===C$zut.childNodes.length)C$zue=C$zut.firstChild.nodeValue;else{C$zue="";for(var C$zur=0;C$zur<C$zut.childNodes.length;C$zur++)C$zue+=C$zut.childNodes[C$zur].nodeValue}else"false"===C$zui?C$zue=!1:"true"===C$zui?C$zue=!0:"real"===C$zui?C$zue=parseFloat(C$zut.firstChild.nodeValue):"integer"===C$zui&&(C$zue=parseInt(C$zut.firstChild.nodeValue,10));return C$zue},_parseArray:function(C$zut){var C$zue=[];for(var C$zui=0,C$zur=C$zut.childNodes.length;C$zui<C$zur;C$zui++){var C$zun=C$zut.childNodes[C$zui];1===C$zun.nodeType&&C$zue.push(this._parseNode(C$zun))}return C$zue},_parseDict:function(C$zut){var C$zue={};var C$zui=null;for(var C$zur=0,C$zun=C$zut.childNodes.length;C$zur<C$zun;C$zur++){var C$zua=C$zut.childNodes[C$zur];1===C$zua.nodeType&&("key"===C$zua.tagName?C$zui=C$zua.firstChild.nodeValue:C$zue[C$zui]=this._parseNode(C$zua))}return C$zue}}),cc.saxParser=new cc.SAXParser,cc.plistParser=new cc.PlistParser,C$zue.exports={saxParser:cc.saxParser,plistParser:cc.plistParser}},{"../platform/js":209}],197:[function(C$zut,C$zue,C$zui){"use strict";cc.screen={_supportsFullScreen:!1,_onfullscreenchange:null,_onfullscreenerror:null,_preOnFullScreenChange:null,_preOnFullScreenError:null,_preOnTouch:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement","fullscreenerror"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement","fullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement","msfullscreenerror"]],init:function(){this._fn={};var C$zut,C$zue,C$zui,C$zur,C$zun=this._fnMap;for(C$zut=0,C$zue=C$zun.length;C$zut<C$zue;C$zut++)if((C$zui=C$zun[C$zut])&&void 0!==document[C$zui[1]]){for(C$zut=0,C$zur=C$zui.length;C$zut<C$zur;C$zut++)this._fn[C$zun[0][C$zut]]=C$zui[C$zut];break}this._supportsFullScreen=void 0!==this._fn.requestFullscreen,this._touchEvent="ontouchend"in window?"touchend":"mousedown"},fullScreen:function(){return!!this._supportsFullScreen&&!!(document[this._fn.fullscreenElement]||document[this._fn.webkitFullscreenElement]||document[this._fn.mozFullScreenElement])},requestFullScreen:function(C$zut,C$zue,C$zui){if(C$zut&&"video"===C$zut.tagName.toLowerCase()){if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&0<C$zut.readyState)return void(C$zut.webkitEnterFullscreen&&C$zut.webkitEnterFullscreen());C$zut.setAttribute("x5-video-player-fullscreen","true")}var C$zur;this._supportsFullScreen&&(C$zut=C$zut||document.documentElement,C$zue&&(C$zur=this._fn.fullscreenchange,this._onfullscreenchange&&document.removeEventListener(C$zur,this._onfullscreenchange),this._onfullscreenchange=C$zue,document.addEventListener(C$zur,C$zue,!1)),C$zui&&(C$zur=this._fn.fullscreenerror,this._onfullscreenerror&&document.removeEventListener(C$zur,this._onfullscreenerror),this._onfullscreenerror=C$zui,document.addEventListener(C$zur,C$zui,{once:!0})),C$zut[this._fn.requestFullscreen]())},exitFullScreen:function(C$zut){if(C$zut&&"video"===C$zut.tagName.toLowerCase()){if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser)return void(C$zut.webkitExitFullscreen&&C$zut.webkitExitFullscreen());C$zut.setAttribute("x5-video-player-fullscreen","false")}return!this._supportsFullScreen||document[this._fn.exitFullscreen]()},autoFullScreen:function(C$zut,C$zue){C$zut=C$zut||document.body,this._ensureFullScreen(C$zut,C$zue),this.requestFullScreen(C$zut,C$zue)},disableAutoFullScreen:function(C$zut){C$zut=cc.game.canvas||C$zut;var C$zue=this._touchEvent;this._preOnTouch&&(C$zut.removeEventListener(C$zue,this._preOnTouch),this._preOnTouch=null)},_ensureFullScreen:function(C$zut,C$zue){var C$zui=this;var C$zur=cc.game.canvas||C$zut;var C$zun=this._fn.fullscreenerror;var C$zua;function onFullScreenError(){C$zui._preOnFullScreenError=null,C$zui._preOnTouch&&C$zur.removeEventListener(C$zua,C$zui._preOnTouch),C$zui._preOnTouch=function(){C$zui._preOnTouch=null,C$zui.requestFullScreen(C$zut,C$zue)},C$zur.addEventListener(C$zua,C$zui._preOnTouch,{once:!0})}void 0!==document[C$zun]&&(C$zua=this._touchEvent,this._preOnFullScreenError&&C$zut.removeEventListener(C$zun,this._preOnFullScreenError),this._preOnFullScreenError=onFullScreenError,C$zut.addEventListener(C$zun,onFullScreenError,{once:!0}))}},cc.screen.init()},{}],198:[function(C$zut,C$zue,C$zui){"use strict";window._CCSettings&&_CCSettings.platform;var C$zud="undefined"==typeof window?global:window;var C$zur=cc&&cc.sys?cc.sys:function(){cc.sys={};var C$zue=cc.sys;if(C$zue.LANGUAGE_ENGLISH="en",C$zue.LANGUAGE_CHINESE="zh",C$zue.LANGUAGE_FRENCH="fr",C$zue.LANGUAGE_ITALIAN="it",C$zue.LANGUAGE_GERMAN="de",C$zue.LANGUAGE_SPANISH="es",C$zue.LANGUAGE_DUTCH="du",C$zue.LANGUAGE_RUSSIAN="ru",C$zue.LANGUAGE_KOREAN="ko",C$zue.LANGUAGE_JAPANESE="ja",C$zue.LANGUAGE_HUNGARIAN="hu",C$zue.LANGUAGE_PORTUGUESE="pt",C$zue.LANGUAGE_ARABIC="ar",C$zue.LANGUAGE_NORWEGIAN="no",C$zue.LANGUAGE_POLISH="pl",C$zue.LANGUAGE_TURKISH="tr",C$zue.LANGUAGE_UKRAINIAN="uk",C$zue.LANGUAGE_ROMANIAN="ro",C$zue.LANGUAGE_BULGARIAN="bg",C$zue.LANGUAGE_UNKNOWN="unknown",C$zue.OS_IOS="iOS",C$zue.OS_ANDROID="Android",C$zue.OS_WINDOWS="Windows",C$zue.OS_MARMALADE="Marmalade",C$zue.OS_LINUX="Linux",C$zue.OS_BADA="Bada",C$zue.OS_BLACKBERRY="Blackberry",C$zue.OS_OSX="OS X",C$zue.OS_WP8="WP8",C$zue.OS_WINRT="WINRT",C$zue.OS_UNKNOWN="Unknown",C$zue.UNKNOWN=-1,C$zue.WIN32=0,C$zue.LINUX=1,C$zue.MACOS=2,C$zue.ANDROID=3,C$zue.IPHONE=4,C$zue.IPAD=5,C$zue.BLACKBERRY=6,C$zue.NACL=7,C$zue.EMSCRIPTEN=8,C$zue.TIZEN=9,C$zue.WINRT=10,C$zue.WP8=11,C$zue.MOBILE_BROWSER=100,C$zue.DESKTOP_BROWSER=101,C$zue.EDITOR_PAGE=102,C$zue.EDITOR_CORE=103,C$zue.WECHAT_GAME=104,C$zue.QQ_PLAY=105,C$zue.FB_PLAYABLE_ADS=106,C$zue.BAIDU_GAME=107,C$zue.VIVO_GAME=108,C$zue.OPPO_GAME=109,C$zue.HUAWEI_GAME=110,C$zue.XIAOMI_GAME=111,C$zue.JKW_GAME=112,C$zue.ALIPAY_GAME=113,C$zue.WECHAT_GAME_SUB=114,C$zue.BAIDU_GAME_SUB=115,C$zue.QTT_GAME=116,C$zue.BROWSER_TYPE_WECHAT="wechat",C$zue.BROWSER_TYPE_WECHAT_GAME="wechatgame",C$zue.BROWSER_TYPE_WECHAT_GAME_SUB="wechatgamesub",C$zue.BROWSER_TYPE_BAIDU_GAME="baidugame",C$zue.BROWSER_TYPE_BAIDU_GAME_SUB="baidugamesub",C$zue.BROWSER_TYPE_XIAOMI_GAME="xiaomigame",C$zue.BROWSER_TYPE_ALIPAY_GAME="alipaygame",C$zue.BROWSER_TYPE_QQ_PLAY="qqplay",C$zue.BROWSER_TYPE_ANDROID="androidbrowser",C$zue.BROWSER_TYPE_IE="ie",C$zue.BROWSER_TYPE_EDGE="edge",C$zue.BROWSER_TYPE_QQ="qqbrowser",C$zue.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",C$zue.BROWSER_TYPE_UC="ucbrowser",C$zue.BROWSER_TYPE_UCBS="ucbs",C$zue.BROWSER_TYPE_360="360browser",C$zue.BROWSER_TYPE_BAIDU_APP="baiduboxapp",C$zue.BROWSER_TYPE_BAIDU="baidubrowser",C$zue.BROWSER_TYPE_MAXTHON="maxthon",C$zue.BROWSER_TYPE_OPERA="opera",C$zue.BROWSER_TYPE_OUPENG="oupeng",C$zue.BROWSER_TYPE_MIUI="miuibrowser",C$zue.BROWSER_TYPE_FIREFOX="firefox",C$zue.BROWSER_TYPE_SAFARI="safari",C$zue.BROWSER_TYPE_CHROME="chrome",C$zue.BROWSER_TYPE_LIEBAO="liebao",C$zue.BROWSER_TYPE_QZONE="qzone",C$zue.BROWSER_TYPE_SOUGOU="sogou",C$zue.BROWSER_TYPE_UNKNOWN="unknown",C$zue.isNative=!1,C$zue.isBrowser="object"==typeof window&&"object"==typeof document&&!0,C$zue.glExtension=function(C$zut){return!!cc.renderer.device.ext(C$zut)},C$zue.getMaxJointMatrixSize=function(){var C$zut;return C$zue._maxJointMatrixSize||(C$zut=cc.game._renderContext,C$zut=Math.floor(C$zut.getParameter(C$zut.MAX_VERTEX_UNIFORM_VECTORS)/4)-10,C$zue._maxJointMatrixSize=C$zut<50?0:50),C$zue._maxJointMatrixSize},C$zud.__globalAdapter&&C$zud.__globalAdapter.adaptSys)C$zud.__globalAdapter.adaptSys(C$zue);else{var C$zut=window,C$zui=C$zut.navigator,C$zuh=document,C$zuu=C$zuh.documentElement;var C$zur=C$zui.userAgent.toLowerCase();C$zue.isMobile=/mobile|android|iphone|ipad/.test(C$zur),"undefined"!=typeof FbPlayableAd?C$zue.platform=C$zue.FB_PLAYABLE_ADS:C$zue.platform=C$zue.isMobile?C$zue.MOBILE_BROWSER:C$zue.DESKTOP_BROWSER;var C$zun=C$zui.language;C$zun=C$zun||C$zui.browserLanguage,C$zue.languageCode=C$zun.toLowerCase(),C$zun=C$zun?C$zun.split("-")[0]:C$zue.LANGUAGE_ENGLISH,C$zue.language=C$zun;var C$zun=!1,C$zua=!1,C$zuo="",C$zus=0;var C$zuc=/android (\d+(?:\.\d+)*)/i.exec(C$zur)||/android (\d+(?:\.\d+)*)/i.exec(C$zui.platform);C$zuc&&(C$zun=!0,C$zuo=C$zuc[1]||"",C$zus=parseInt(C$zuo)||0),(C$zuc=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(C$zur))?(C$zua=!0,C$zuo=C$zuc[2]||"",C$zus=parseInt(C$zuo)||0):(/(iPhone|iPad|iPod)/.exec(C$zui.platform)||"MacIntel"===C$zui.platform&&C$zui.maxTouchPoints&&1<C$zui.maxTouchPoints)&&(C$zua=!0,C$zuo="",C$zus=0);C$zuc=C$zue.OS_UNKNOWN;-1!==C$zui.appVersion.indexOf("Win")?C$zuc=C$zue.OS_WINDOWS:C$zua?C$zuc=C$zue.OS_IOS:-1!==C$zui.appVersion.indexOf("Mac")?C$zuc=C$zue.OS_OSX:-1!==C$zui.appVersion.indexOf("X11")&&-1===C$zui.appVersion.indexOf("Linux")?C$zuc=C$zue.OS_UNIX:C$zun?C$zuc=C$zue.OS_ANDROID:-1===C$zui.appVersion.indexOf("Linux")&&-1===C$zur.indexOf("ubuntu")||(C$zuc=C$zue.OS_LINUX),C$zue.os=C$zuc,C$zue.osVersion=C$zuo,C$zue.osMainVersion=C$zus,C$zue.browserType=C$zue.BROWSER_TYPE_UNKNOWN;C$zua=/mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|ucbs|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|miuibrowser/i.exec(C$zur)||/qq|ucbrowser|ubrowser|edge/i.exec(C$zur)||/chrome|safari|firefox|trident|opera|opr\/|oupeng/i.exec(C$zur);("safari"===(C$zua=C$zua?C$zua[0].toLowerCase():C$zue.BROWSER_TYPE_UNKNOWN)&&C$zun||"qq"===C$zua&&C$zur.match(/android.*applewebkit/i))&&(C$zua=C$zue.BROWSER_TYPE_ANDROID);C$zuc={micromessenger:C$zue.BROWSER_TYPE_WECHAT,trident:C$zue.BROWSER_TYPE_IE,edge:C$zue.BROWSER_TYPE_EDGE,"360 aphone":C$zue.BROWSER_TYPE_360,mxbrowser:C$zue.BROWSER_TYPE_MAXTHON,"opr/":C$zue.BROWSER_TYPE_OPERA,ubrowser:C$zue.BROWSER_TYPE_UC};C$zue.browserType=C$zuc[C$zua]||C$zua,C$zue.browserVersion="",C$zuo=(C$zuo=C$zur.match(/(mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|uc|ucbs|360 aphone|360|baiduboxapp|baidu|maxthon|mxbrowser|miui(?:.hybrid)?)(mobile)?(browser)?\/?([\d.]+)/i))||C$zur.match(/(qq|chrome|safari|firefox|trident|opera|opr\/|oupeng)(mobile)?(browser)?\/?([\d.]+)/i),C$zue.browserVersion=C$zuo?C$zuo[4]:"";C$zus=window.innerWidth||document.documentElement.clientWidth;C$zun=window.innerHeight||document.documentElement.clientHeight;C$zuc=window.devicePixelRatio||1;C$zue.windowPixelResolution={width:C$zuc*C$zus,height:C$zuc*C$zun},C$zue._checkWebGLRenderMode=function(){if(cc.game.renderType!==cc.game.RENDER_TYPE_WEBGL)throw new Error("This feature supports WebGL render mode only.")};C$zua=document.createElement("canvas");try{var C$zu_=C$zue.localStorage=C$zut.localStorage;C$zu_.setItem("storage",""),C$zu_.removeItem("storage"),C$zu_=null}catch(C$zut){C$zur=function(){cc.warnID(5200)};C$zue.localStorage={getItem:C$zur,setItem:C$zur,removeItem:C$zur,clear:C$zur}}C$zuo=C$zua.toDataURL("image/webp").startsWith("data:image/webp");C$zus=!!C$zua.getContext("2d");C$zuc=!1;C$zut.WebGLRenderingContext&&(C$zuc=!0);C$zun=C$zue.capabilities={canvas:C$zus,opengl:C$zuc,webp:C$zuo};var C$zul;void 0===C$zuu.ontouchstart&&void 0===C$zuh.ontouchstart&&!C$zui.msPointerEnabled||(C$zun.touches=!0),void 0!==C$zuu.onmouseup&&(C$zun.mouse=!0),void 0!==C$zuu.onkeyup&&(C$zun.keyboard=!0),(C$zut.DeviceMotionEvent||C$zut.DeviceOrientationEvent)&&(C$zun.accelerometer=!0),C$zue.browserVersion,C$zu_=!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),C$zul={ONLY_ONE:!1,WEB_AUDIO:C$zu_,DELAY_CREATE_CTX:!1},C$zue.os===C$zue.OS_IOS&&(C$zul.USE_LOADER_EVENT="loadedmetadata"),C$zue.browserType===C$zue.BROWSER_TYPE_FIREFOX&&(C$zul.DELAY_CREATE_CTX=!0,C$zul.USE_LOADER_EVENT="canplay"),C$zue.os===C$zue.OS_ANDROID&&C$zue.browserType===C$zue.BROWSER_TYPE_UC&&(C$zul.ONE_SOURCE=!0);try{C$zul.WEB_AUDIO&&(C$zul.context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),C$zul.DELAY_CREATE_CTX&&setTimeout(function(){C$zul.context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)},0))}catch(C$zut){C$zul.WEB_AUDIO=!1,cc.logID(5201)}C$zur=[];(C$zua=document.createElement("audio")).canPlayType&&(C$zua.canPlayType('audio/ogg; codecs="vorbis"')&&C$zur.push(".ogg"),C$zua.canPlayType("audio/mpeg")&&C$zur.push(".mp3"),C$zua.canPlayType('audio/wav; codecs="1"')&&C$zur.push(".wav"),C$zua.canPlayType("audio/mp4")&&C$zur.push(".mp4"),C$zua.canPlayType("audio/x-m4a")&&C$zur.push(".m4a")),C$zul.format=C$zur,C$zue.__audioSupport=C$zul}return C$zue.NetworkType={NONE:0,LAN:1,WWAN:2},C$zue.getNetworkType=function(){return C$zue.NetworkType.LAN},C$zue.getBatteryLevel=function(){return 1},C$zue.garbageCollect=function(){},C$zue.restartVM=function(){},C$zue.getSafeAreaRect=function(){var C$zut=cc.view.getVisibleSize();return cc.rect(0,0,C$zut.width,C$zut.height)},C$zue.isObjectValid=function(C$zut){return!!C$zut},C$zue.dump=function(){var C$zut="";C$zut=(C$zut=(C$zut=(C$zut=(C$zut=(C$zut=(C$zut=(C$zut=(C$zut+="isMobile : "+this.isMobile+"\r\n")+"language : "+this.language+"\r\n")+"browserType : "+this.browserType+"\r\n")+"browserVersion : "+this.browserVersion+"\r\n")+"capabilities : "+JSON.stringify(this.capabilities)+"\r\n")+"os : "+this.os+"\r\n")+"osVersion : "+this.osVersion+"\r\n")+"platform : "+this.platform+"\r\n")+"Using "+(cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n",cc.log(C$zut)},C$zue.openURL=function(C$zut){window.open(C$zut)},C$zue.now=function(){return Date.now?Date.now():+new Date},C$zue}();C$zue.exports=C$zur},{}],199:[function(C$zut,C$zue,C$zul){"use strict";var C$zui=C$zut("../event/event-target");var C$zur=C$zut("../platform/js");var C$zuh=C$zut("../renderer");C$zut("../platform/CCClass");var C$zun={init:function(){this.html=document.getElementsByTagName("html")[0]},availWidth:function(C$zut){return C$zut&&C$zut!==this.html?C$zut.clientWidth:window.innerWidth},availHeight:function(C$zut){return C$zut&&C$zut!==this.html?C$zut.clientHeight:window.innerHeight},meta:{width:"device-width"},adaptationType:cc.sys.browserType};switch(cc.sys.os===cc.sys.OS_IOS&&(C$zun.adaptationType=cc.sys.BROWSER_TYPE_SAFARI),C$zun.adaptationType){case cc.sys.BROWSER_TYPE_SAFARI:C$zun.meta["minimal-ui"]="true",C$zun.availWidth=cc.sys.isMobile?function(C$zut){return window.innerWidth}:function(C$zut){return C$zut.clientWidth},C$zun.availHeight=cc.sys.isMobile?function(C$zut){return window.innerHeight}:function(C$zut){return C$zut.clientHeight};break;case cc.sys.BROWSER_TYPE_SOUGOU:case cc.sys.BROWSER_TYPE_UC:C$zun.meta["minimal-ui"]="true",C$zun.availWidth=function(C$zut){return C$zut.clientWidth},C$zun.availHeight=function(C$zut){return C$zut.clientHeight}}var C$zuo=null;function C$zuhC0(){C$zui.call(this);var C$zut=cc.ContainerStrategy,C$zue=cc.ContentStrategy;C$zun.init(this),this._frameSize=cc.size(0,0),this._designResolutionSize=cc.size(0,0),this._originalDesignResolutionSize=cc.size(0,0),this._scaleX=1,this._scaleY=1,this._viewportRect=cc.rect(0,0,0,0),this._visibleRect=cc.rect(0,0,0,0),this._autoFullScreen=!1,this._devicePixelRatio=1,this._maxPixelRatio=2,this._retinaEnabled=!1,this._resizeCallback=null,this._resizing=!1,this._resizeWithBrowserSize=!1,this._orientationChanging=!0,this._isRotated=!1,this._orientation=cc.macro.ORIENTATION_AUTO,this._isAdjustViewport=!0,this._antiAliasEnabled=!1,this._resolutionPolicy=null,this._rpExactFit=new cc.ResolutionPolicy(C$zut.EQUAL_TO_FRAME,C$zue.EXACT_FIT),this._rpShowAll=new cc.ResolutionPolicy(C$zut.EQUAL_TO_FRAME,C$zue.SHOW_ALL),this._rpNoBorder=new cc.ResolutionPolicy(C$zut.EQUAL_TO_FRAME,C$zue.NO_BORDER),this._rpFixedHeight=new cc.ResolutionPolicy(C$zut.EQUAL_TO_FRAME,C$zue.FIXED_HEIGHT),this._rpFixedWidth=new cc.ResolutionPolicy(C$zut.EQUAL_TO_FRAME,C$zue.FIXED_WIDTH),cc.game.once(cc.game.EVENT_ENGINE_INITED,this.init,this)}cc.js.extend(C$zuhC0,C$zui),cc.js.mixin(C$zuhC0.prototype,{init:function(){this._initFrameSize();var C$zut=cc.game.canvas.width,C$zue=cc.game.canvas.height;this._designResolutionSize.width=C$zut,this._designResolutionSize.height=C$zue,this._originalDesignResolutionSize.width=C$zut,this._originalDesignResolutionSize.height=C$zue,this._viewportRect.width=C$zut,this._viewportRect.height=C$zue,this._visibleRect.width=C$zut,this._visibleRect.height=C$zue,cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,cc.visibleRect&&cc.visibleRect.init(this._visibleRect)},_resizeEvent:function(C$zut){var C$zue;C$zue=this.setDesignResolutionSize?this:cc.view;var C$zui=cc.sys;var C$zur,C$zun,C$zua,C$zuo;C$zui.browserType!==C$zui.BROWSER_TYPE_UC||C$zui.os!==C$zui.OS_IOS?(C$zui=C$zue._frameSize.width,C$zur=C$zue._frameSize.height,C$zun=C$zue._isRotated,cc.sys.isMobile?(C$zua=(C$zuo=cc.game.container.style).margin,C$zuo.margin="0",C$zuo.display="none",C$zue._initFrameSize(),C$zuo.margin=C$zua,C$zuo.display="block"):C$zue._initFrameSize(),!0!==C$zut&&C$zue._isRotated===C$zun&&C$zue._frameSize.width===C$zui&&C$zue._frameSize.height===C$zur||(C$zua=C$zue._originalDesignResolutionSize.width,C$zuo=C$zue._originalDesignResolutionSize.height,C$zue._resizing=!0,0<C$zua&&C$zue.setDesignResolutionSize(C$zua,C$zuo,C$zue._resolutionPolicy),C$zue._resizing=!1,C$zue.emit("canvas-resize"),C$zue._resizeCallback&&C$zue._resizeCallback.call())):setTimeout(function(){C$zue._resizeEvent(C$zut)},0)},_orientationChange:function(){cc.view._orientationChanging=!0,cc.view._resizeEvent(),cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI&&cc.sys.isMobile&&setTimeout(function(){window.innerHeight>window.innerWidth&&window.scrollTo(0,1)},500)},resizeWithBrowserSize:function(C$zut){C$zut?this._resizeWithBrowserSize||(this._resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent),window.addEventListener("orientationchange",this._orientationChange)):this._resizeWithBrowserSize&&(this._resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent),window.removeEventListener("orientationchange",this._orientationChange))},setResizeCallback:function(C$zut){"function"!=typeof C$zut&&null!=C$zut||(this._resizeCallback=C$zut)},setOrientation:function(C$zut){var C$zue;(C$zut&=cc.macro.ORIENTATION_AUTO)&&this._orientation!==C$zut&&(this._orientation=C$zut,C$zut=this._originalDesignResolutionSize.width,C$zue=this._originalDesignResolutionSize.height,this.setDesignResolutionSize(C$zut,C$zue,this._resolutionPolicy))},_initFrameSize:function(){var C$zut=this._frameSize;var C$zue=C$zun.availWidth(cc.game.frame);var C$zui=C$zun.availHeight(cc.game.frame);var C$zur=C$zui<=C$zue;!cc.sys.isMobile||C$zur&&this._orientation&cc.macro.ORIENTATION_LANDSCAPE||!C$zur&&this._orientation&cc.macro.ORIENTATION_PORTRAIT?(C$zut.width=C$zue,C$zut.height=C$zui,cc.game.container.style["-webkit-transform"]="rotate(0deg)",cc.game.container.style.transform="rotate(0deg)",this._isRotated=!1):(C$zut.width=C$zui,C$zut.height=C$zue,cc.game.container.style["-webkit-transform"]="rotate(90deg)",cc.game.container.style.transform="rotate(90deg)",cc.game.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.game.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0),this._orientationChanging&&setTimeout(function(){cc.view._orientationChanging=!1},1e3)},_setViewportMeta:function(C$zut,C$zue){var C$zui=document.getElementById("cocosMetaElement");C$zui&&C$zue&&document.head.removeChild(C$zui);var C$zur,C$zun,C$zua,C$zuo=document.getElementsByName("viewport"),C$zuo=C$zuo?C$zuo[0]:null;for(C$zun in C$zur=C$zuo?C$zuo.content:"",(C$zui=C$zui||document.createElement("meta")).id="cocosMetaElement",C$zui.name="viewport",C$zui.content="",C$zut)-1==C$zur.indexOf(C$zun)?C$zur+=","+C$zun+"="+C$zut[C$zun]:C$zue&&(C$zua=new RegExp(C$zun+"s*=s*[^,]+"),C$zur.replace(C$zua,C$zun+"="+C$zut[C$zun]));/^,/.test(C$zur)&&(C$zur=C$zur.substr(1)),C$zui.content=C$zur,C$zuo&&(C$zuo.content=C$zur),document.head.appendChild(C$zui)},_adjustViewportMeta:function(){this._isAdjustViewport&&(this._setViewportMeta(C$zun.meta,!1),this._isAdjustViewport=!1)},adjustViewportMeta:function(C$zut){this._isAdjustViewport=C$zut},enableRetina:function(C$zut){this._retinaEnabled=!!C$zut},isRetinaEnabled:function(){return this._retinaEnabled},enableAntiAlias:function(C$zut){if(cc.warnID(9200),this._antiAliasEnabled!==C$zut)if(this._antiAliasEnabled=C$zut,cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var C$zue=cc.loader._cache;for(var C$zui in C$zue){C$zui=C$zue[C$zui];C$zui=C$zui&&C$zui.content instanceof cc.Texture2D?C$zui.content:null;var C$zur;C$zui&&(C$zur=cc.Texture2D.Filter,C$zut?C$zui.setFilters(C$zur.LINEAR,C$zur.LINEAR):C$zui.setFilters(C$zur.NEAREST,C$zur.NEAREST))}}else{var C$zun;cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&((C$zun=cc.game.canvas.getContext("2d")).imageSmoothingEnabled=C$zut,C$zun.mozImageSmoothingEnabled=C$zut)}},isAntiAliasEnabled:function(){return this._antiAliasEnabled},enableAutoFullScreen:function(C$zut){C$zut&&C$zut!==this._autoFullScreen&&cc.sys.isMobile?(this._autoFullScreen=!0,cc.screen.autoFullScreen(cc.game.frame)):(this._autoFullScreen=!1,cc.screen.disableAutoFullScreen(cc.game.frame))},isAutoFullScreenEnabled:function(){return this._autoFullScreen},setCanvasSize:function(C$zut,C$zue){var C$zui=cc.game.canvas;var C$zur=cc.game.container;C$zui.width=C$zut*this._devicePixelRatio,C$zui.height=C$zue*this._devicePixelRatio,C$zui.style.width=C$zut+"px",C$zui.style.height=C$zue+"px",C$zur.style.width=C$zut+"px",C$zur.style.height=C$zue+"px",this._resizeEvent()},getCanvasSize:function(){return cc.size(cc.game.canvas.width,cc.game.canvas.height)},getFrameSize:function(){return cc.size(this._frameSize.width,this._frameSize.height)},setFrameSize:function(C$zut,C$zue){this._frameSize.width=C$zut,this._frameSize.height=C$zue,cc.game.frame.style.width=C$zut+"px",cc.game.frame.style.height=C$zue+"px",this._resizeEvent(!0)},getVisibleSize:function(){return cc.size(this._visibleRect.width,this._visibleRect.height)},getVisibleSizeInPixel:function(){return cc.size(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)},getVisibleOrigin:function(){return cc.v2(this._visibleRect.x,this._visibleRect.y)},getVisibleOriginInPixel:function(){return cc.v2(this._visibleRect.x*this._scaleX,this._visibleRect.y*this._scaleY)},getResolutionPolicy:function(){return this._resolutionPolicy},setResolutionPolicy:function(C$zut){var C$zue;C$zut instanceof cc.ResolutionPolicy?this._resolutionPolicy=C$zut:(C$zut===(C$zue=cc.ResolutionPolicy).EXACT_FIT&&(this._resolutionPolicy=this._rpExactFit),C$zut===C$zue.SHOW_ALL&&(this._resolutionPolicy=this._rpShowAll),C$zut===C$zue.NO_BORDER&&(this._resolutionPolicy=this._rpNoBorder),C$zut===C$zue.FIXED_HEIGHT&&(this._resolutionPolicy=this._rpFixedHeight),C$zut===C$zue.FIXED_WIDTH&&(this._resolutionPolicy=this._rpFixedWidth))},setDesignResolutionSize:function(C$zut,C$zue,C$zui){var C$zur;0<C$zut||0<C$zue?(this.setResolutionPolicy(C$zui),(C$zui=this._resolutionPolicy)&&C$zui.preApply(this),cc.sys.isMobile&&this._adjustViewportMeta(),this._orientationChanging=!0,this._resizing||this._initFrameSize(),C$zui?(this._originalDesignResolutionSize.width=this._designResolutionSize.width=C$zut,this._originalDesignResolutionSize.height=this._designResolutionSize.height=C$zue,(C$zut=C$zui.apply(this,this._designResolutionSize)).scale&&2===C$zut.scale.length&&(this._scaleX=C$zut.scale[0],this._scaleY=C$zut.scale[1]),C$zut.viewport&&(C$zue=this._viewportRect,C$zur=this._visibleRect,C$zut=C$zut.viewport,C$zue.x=C$zut.x,C$zue.y=C$zut.y,C$zue.width=C$zut.width,C$zue.height=C$zut.height,C$zur.x=0,C$zur.y=0,C$zur.width=C$zut.width/this._scaleX,C$zur.height=C$zut.height/this._scaleY),C$zui.postApply(this),cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,cc.visibleRect&&cc.visibleRect.init(this._visibleRect),C$zuh.updateCameraViewport(),cc.internal.inputManager._updateCanvasBoundingRect(),this.emit("design-resolution-changed")):cc.logID(2201)):cc.logID(2200)},getDesignResolutionSize:function(){return cc.size(this._designResolutionSize.width,this._designResolutionSize.height)},setRealPixelResolution:function(C$zut,C$zue,C$zui){this._setViewportMeta({width:C$zut},!0),document.documentElement.style.width=C$zut+"px",document.body.style.width=C$zut+"px",document.body.style.left="0px",document.body.style.top="0px",this.setDesignResolutionSize(C$zut,C$zue,C$zui)},setViewportInPoints:function(C$zut,C$zue,C$zui,C$zur){var C$zun=this._scaleX,C$zua=this._scaleY;cc.game._renderContext.viewport(C$zut*C$zun+this._viewportRect.x,C$zue*C$zua+this._viewportRect.y,C$zui*C$zun,C$zur*C$zua)},setScissorInPoints:function(C$zut,C$zue,C$zui,C$zur){var C$zun=this._scaleX,C$zua=this._scaleY;C$zut=Math.ceil(C$zut*C$zun+this._viewportRect.x);C$zue=Math.ceil(C$zue*C$zua+this._viewportRect.y);C$zui=Math.ceil(C$zui*C$zun);C$zun=Math.ceil(C$zur*C$zua);C$zur=cc.game._renderContext;C$zuo||(C$zua=C$zur.getParameter(C$zur.SCISSOR_BOX),C$zuo=cc.rect(C$zua[0],C$zua[1],C$zua[2],C$zua[3])),C$zuo.x===C$zut&&C$zuo.y===C$zue&&C$zuo.width===C$zui&&C$zuo.height===C$zun||(C$zuo.x=C$zut,C$zuo.y=C$zue,C$zuo.width=C$zui,C$zuo.height=C$zun,C$zur.scissor(C$zut,C$zue,C$zui,C$zun))},isScissorEnabled:function(){return cc.game._renderContext.isEnabled(gl.SCISSOR_TEST)},getScissorRect:function(){C$zuo||(C$zut=gl.getParameter(gl.SCISSOR_BOX),C$zuo=cc.rect(C$zut[0],C$zut[1],C$zut[2],C$zut[3]));var C$zut=1/this._scaleX;var C$zue=1/this._scaleY;return cc.rect((C$zuo.x-this._viewportRect.x)*C$zut,(C$zuo.y-this._viewportRect.y)*C$zue,C$zuo.width*C$zut,C$zuo.height*C$zue)},getViewportRect:function(){return this._viewportRect},getScaleX:function(){return this._scaleX},getScaleY:function(){return this._scaleY},getDevicePixelRatio:function(){return this._devicePixelRatio},convertToLocationInView:function(C$zut,C$zue,C$zui,C$zur){C$zur=C$zur||cc.v2();var C$zun=C$zui.adjustedLeft||C$zui.left;var C$zua=C$zui.adjustedTop||C$zui.top;C$zut=this._devicePixelRatio*(C$zut-C$zun);C$zun=this._devicePixelRatio*(C$zua+C$zui.height-C$zue);return this._isRotated?(C$zur.x=cc.game.canvas.width-C$zun,C$zur.y=C$zut):(C$zur.x=C$zut,C$zur.y=C$zun),C$zur},_convertMouseToLocationInView:function(C$zut,C$zue){var C$zui=this._viewportRect;C$zut.x=(this._devicePixelRatio*(C$zut.x-C$zue.left)-C$zui.x)/this._scaleX,C$zut.y=(this._devicePixelRatio*(C$zue.top+C$zue.height-C$zut.y)-C$zui.y)/this._scaleY},_convertPointWithScale:function(C$zut){var C$zue=this._viewportRect;C$zut.x=(C$zut.x-C$zue.x)/this._scaleX,C$zut.y=(C$zut.y-C$zue.y)/this._scaleY},_convertTouchesWithScale:function(C$zut){var C$zue,C$zui,C$zur=this._viewportRect,C$zun=this._scaleX,C$zua=this._scaleY;for(var C$zuo=0;C$zuo<C$zut.length;C$zuo++)C$zue=(C$zui=C$zut[C$zuo])._point,C$zui=C$zui._prevPoint,C$zue.x=(C$zue.x-C$zur.x)/C$zun,C$zue.y=(C$zue.y-C$zur.y)/C$zua,C$zui.x=(C$zui.x-C$zur.x)/C$zun,C$zui.y=(C$zui.y-C$zur.y)/C$zua}}),cc.ContainerStrategy=cc.Class({name:"ContainerStrategy",preApply:function(C$zut){},apply:function(C$zut,C$zue){},postApply:function(C$zut){},_setupContainer:function(C$zut,C$zue,C$zui){var C$zur=cc.game.canvas;this._setupStyle(C$zut,C$zue,C$zui);var C$zun=C$zut._devicePixelRatio=1;C$zut.isRetinaEnabled()&&(C$zun=C$zut._devicePixelRatio=Math.min(C$zut._maxPixelRatio,window.devicePixelRatio||1)),C$zur.width=C$zue*C$zun,C$zur.height=C$zui*C$zun},_setupStyle:function(C$zut,C$zue,C$zui){var C$zur=cc.game.canvas;var C$zun=cc.game.container;cc.sys.os===cc.sys.OS_ANDROID&&(document.body.style.width=(C$zut._isRotated?C$zui:C$zue)+"px",document.body.style.height=(C$zut._isRotated?C$zue:C$zui)+"px"),C$zun.style.width=C$zur.style.width=C$zue+"px",C$zun.style.height=C$zur.style.height=C$zui+"px"},_fixContainer:function(){document.body.insertBefore(cc.game.container,document.body.firstChild);var C$zut=document.body.style;C$zut.width=window.innerWidth+"px",C$zut.height=window.innerHeight+"px",C$zut.overflow="hidden";C$zut=cc.game.container.style;C$zut.position="fixed",C$zut.left=C$zut.top="0px",document.body.scrollTop=0}}),cc.ContentStrategy=cc.Class({name:"ContentStrategy",ctor:function(){this._result={scale:[1,1],viewport:null}},_buildResult:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){Math.abs(C$zut-C$zui)<2&&(C$zui=C$zut),Math.abs(C$zue-C$zur)<2&&(C$zur=C$zue);C$zut=cc.rect((C$zut-C$zui)/2,(C$zue-C$zur)/2,C$zui,C$zur);return cc.game.renderType,cc.game.RENDER_TYPE_CANVAS,this._result.scale=[C$zun,C$zua],this._result.viewport=C$zut,this._result},preApply:function(C$zut){},apply:function(C$zut,C$zue){return{scale:[1,1]}},postApply:function(C$zut){}});C$zut=cc.Class({name:"EqualToFrame",extends:cc.ContainerStrategy,apply:function(C$zut){var C$zue=C$zut._frameSize.height,C$zui=cc.game.container.style;this._setupContainer(C$zut,C$zut._frameSize.width,C$zut._frameSize.height),C$zut._isRotated?C$zui.margin="0 0 0 "+C$zue+"px":C$zui.margin="0px",C$zui.padding="0px"}});var C$zua=cc.Class({name:"ProportionalToFrame",extends:cc.ContainerStrategy,apply:function(C$zut,C$zue){var C$zui,C$zur=C$zut._frameSize.width,C$zun=C$zut._frameSize.height,C$zua=cc.game.container.style,C$zuo=C$zue.width,C$zue=C$zue.height,C$zus=C$zur/C$zuo,C$zuc=C$zun/C$zue;C$zue=C$zus<C$zuc?(C$zui=C$zur,C$zue*C$zus):(C$zui=C$zuo*C$zuc,C$zun);C$zus=Math.round((C$zur-C$zui)/2);C$zuo=Math.round((C$zun-C$zue)/2);this._setupContainer(C$zut,C$zui=C$zur-2*C$zus,C$zue=C$zun-2*C$zuo),C$zut._isRotated?C$zua.margin="0 0 0 "+C$zun+"px":C$zua.margin="0px",C$zua.paddingLeft=C$zus+"px",C$zua.paddingRight=C$zus+"px",C$zua.paddingTop=C$zuo+"px",C$zua.paddingBottom=C$zuo+"px"}});cc.Class({name:"EqualToWindow",extends:C$zut,preApply:function(C$zut){this._super(C$zut),cc.game.frame=document.documentElement},apply:function(C$zut){this._super(C$zut),this._fixContainer()}}),cc.Class({name:"ProportionalToWindow",extends:C$zua,preApply:function(C$zut){this._super(C$zut),cc.game.frame=document.documentElement},apply:function(C$zut,C$zue){this._super(C$zut,C$zue),this._fixContainer()}});var C$zus=cc.Class({name:"OriginalContainer",extends:cc.ContainerStrategy,apply:function(C$zut){this._setupContainer(C$zut,cc.game.canvas.width,cc.game.canvas.height)}});var C$zuc=("undefined"==typeof window?global:window).__globalAdapter;C$zuc&&(C$zuc.adaptContainerStrategy&&C$zuc.adaptContainerStrategy(cc.ContainerStrategy.prototype),C$zuc.adaptView&&C$zuc.adaptView(C$zuhC0.prototype)),cc.ContainerStrategy.EQUAL_TO_FRAME=new C$zut,cc.ContainerStrategy.PROPORTION_TO_FRAME=new C$zua,cc.ContainerStrategy.ORIGINAL_CONTAINER=new C$zus,C$zuc=cc.Class({name:"ExactFit",extends:cc.ContentStrategy,apply:function(C$zut,C$zue){var C$zui=cc.game.canvas.width,C$zur=cc.game.canvas.height,C$zun=C$zui/C$zue.width,C$zue=C$zur/C$zue.height;return this._buildResult(C$zui,C$zur,C$zui,C$zur,C$zun,C$zue)}}),C$zut=cc.Class({name:"ShowAll",extends:cc.ContentStrategy,apply:function(C$zut,C$zue){var C$zui,C$zur=cc.game.canvas.width,C$zun=cc.game.canvas.height,C$zua=C$zue.width,C$zue=C$zue.height,C$zuo=C$zur/C$zua,C$zus=C$zun/C$zue,C$zuc=0;return C$zue=C$zuo<C$zus?(C$zui=C$zur,C$zue*(C$zuc=C$zuo)):(C$zui=C$zua*(C$zuc=C$zus),C$zun),this._buildResult(C$zur,C$zun,C$zui,C$zue,C$zuc,C$zuc)}}),C$zua=cc.Class({name:"NoBorder",extends:cc.ContentStrategy,apply:function(C$zut,C$zue){var C$zui,C$zur,C$zun=cc.game.canvas.width,C$zua=cc.game.canvas.height,C$zuo=C$zue.width,C$zue=C$zue.height,C$zus=C$zun/C$zuo,C$zuc=C$zua/C$zue;return C$zuo=C$zus<C$zuc?(C$zur=C$zuo*(C$zui=C$zuc),C$zua):(C$zur=C$zun,C$zue*(C$zui=C$zus)),this._buildResult(C$zun,C$zua,C$zur,C$zuo,C$zui,C$zui)}}),C$zus=cc.Class({name:"FixedHeight",extends:cc.ContentStrategy,apply:function(C$zut,C$zue){var C$zui=cc.game.canvas.width,C$zur=cc.game.canvas.height,C$zue=C$zur/C$zue.height;return this._buildResult(C$zui,C$zur,C$zui,C$zur,C$zue,C$zue)}});var C$zuu=cc.Class({name:"FixedWidth",extends:cc.ContentStrategy,apply:function(C$zut,C$zue){var C$zui=cc.game.canvas.width,C$zur=cc.game.canvas.height,C$zue=C$zui/C$zue.width;return this._buildResult(C$zui,C$zur,C$zui,C$zur,C$zue,C$zue)}});cc.ContentStrategy.EXACT_FIT=new C$zuc,cc.ContentStrategy.SHOW_ALL=new C$zut,cc.ContentStrategy.NO_BORDER=new C$zua,cc.ContentStrategy.FIXED_HEIGHT=new C$zus,cc.ContentStrategy.FIXED_WIDTH=new C$zuu,cc.ResolutionPolicy=cc.Class({name:"cc.ResolutionPolicy",ctor:function(C$zut,C$zue){this._containerStrategy=null,this._contentStrategy=null,this.setContainerStrategy(C$zut),this.setContentStrategy(C$zue)},preApply:function(C$zut){this._containerStrategy.preApply(C$zut),this._contentStrategy.preApply(C$zut)},apply:function(C$zut,C$zue){return this._containerStrategy.apply(C$zut,C$zue),this._contentStrategy.apply(C$zut,C$zue)},postApply:function(C$zut){this._containerStrategy.postApply(C$zut),this._contentStrategy.postApply(C$zut)},setContainerStrategy:function(C$zut){C$zut instanceof cc.ContainerStrategy&&(this._containerStrategy=C$zut)},setContentStrategy:function(C$zut){C$zut instanceof cc.ContentStrategy&&(this._contentStrategy=C$zut)}}),C$zur.get(cc.ResolutionPolicy.prototype,"canvasSize",function(){return cc.v2(cc.game.canvas.width,cc.game.canvas.height)}),cc.ResolutionPolicy.EXACT_FIT=0,cc.ResolutionPolicy.NO_BORDER=1,cc.ResolutionPolicy.SHOW_ALL=2,cc.ResolutionPolicy.FIXED_HEIGHT=3,cc.ResolutionPolicy.FIXED_WIDTH=4,cc.ResolutionPolicy.UNKNOWN=5,cc.view=new C$zuhC0,cc.winSize=cc.size(),C$zue.exports=cc.view},{"../event/event-target":115,"../platform/CCClass":189,"../platform/js":209,"../renderer":220}],200:[function(C$zut,C$zue,C$zui){"use strict";cc.visibleRect={topLeft:cc.v2(0,0),topRight:cc.v2(0,0),top:cc.v2(0,0),bottomLeft:cc.v2(0,0),bottomRight:cc.v2(0,0),bottom:cc.v2(0,0),center:cc.v2(0,0),left:cc.v2(0,0),right:cc.v2(0,0),width:0,height:0,init:function(C$zut){var C$zue=this.width=C$zut.width;var C$zui=this.height=C$zut.height;var C$zur=C$zut.x,C$zut=C$zut.y,C$zun=C$zut+C$zui,C$zua=C$zur+C$zue;this.topLeft.x=C$zur,this.topLeft.y=C$zun,this.topRight.x=C$zua,this.topRight.y=C$zun,this.top.x=C$zur+C$zue/2,this.top.y=C$zun,this.bottomLeft.x=C$zur,this.bottomLeft.y=C$zut,this.bottomRight.x=C$zua,this.bottomRight.y=C$zut,this.bottom.x=C$zur+C$zue/2,this.bottom.y=C$zut,this.center.x=C$zur+C$zue/2,this.center.y=C$zut+C$zui/2,this.left.x=C$zur,this.left.y=C$zut+C$zui/2,this.right.x=C$zua,this.right.y=C$zut+C$zui/2}}},{}],201:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./js");C$zut("./utils").isPlainEmptyObj_DEV;function createAttrsSingle(C$zut,C$zue){C$zue=C$zue?Object.create(C$zue):{};return C$zur.value(C$zut,"__attrs__",C$zue),C$zue}function attr(C$zut,C$zue,C$zui){var C$zur=getClassAttrs(C$zut);var C$zun=C$zue+"$_$";var C$zua={};for(var C$zuo in C$zur)C$zuo.startsWith(C$zun)&&(C$zua[C$zuo.slice(C$zun.length)]=C$zur[C$zuo]);return C$zua}function getClassAttrs(C$zut){return C$zut.hasOwnProperty("__attrs__")&&C$zut.__attrs__||function(C$zut){if("function"!=typeof C$zut)return createAttrsSingle(C$zut,getClassAttrs(C$zut.constructor));var C$zue;var C$zui=cc.Class.getInheritanceChain(C$zut);for(var C$zur=C$zui.length-1;0<=C$zur;C$zur--){var C$zun=C$zui[C$zur];C$zun.hasOwnProperty("__attrs__")&&C$zun.__attrs__||createAttrsSingle(C$zun,(C$zue=C$zui[C$zur+1])&&C$zue.__attrs__)}return createAttrsSingle(C$zut,(C$zue=C$zui[0])&&C$zue.__attrs__),C$zut.__attrs__}(C$zut)}function PrimitiveType(C$zut,C$zue){this.name=C$zut,this.default=C$zue}PrimitiveType.prototype.toString=function(){return this.name},cc.Integer=new PrimitiveType("Integer",0),cc.Float=new PrimitiveType("Float",0),cc.Boolean=new PrimitiveType("Boolean",!1),cc.String=new PrimitiveType("String",""),C$zue.exports={PrimitiveType:PrimitiveType,attr:attr,getClassAttrs:getClassAttrs,setClassAttr:function(C$zut,C$zue,C$zui,C$zur){getClassAttrs(C$zut)[C$zue+"$_$"+C$zui]=C$zur},DELIMETER:"$_$",getTypeChecker_ET:!1,getObjTypeChecker_ET:!1,ScriptUuid:{}}},{"./CCClass":189,"./js":209,"./utils":213}],202:[function(C$zut,C$zue,C$zur){"use strict";var C$zui=C$zut("./js");var C$zus=C$zui.array.fastRemoveAt;function empty(){}function CallbackInfo(){this.callback=empty,this.target=void 0,this.once=!1}CallbackInfo.prototype.set=function(C$zut,C$zue,C$zui){this.callback=C$zut,this.target=C$zue,this.once=!!C$zui};var C$zuc=new C$zui.Pool(function(C$zut){return C$zut.callback=empty,C$zut.target=void 0,!(C$zut.once=!1)},32);function CallbackList(){this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}C$zuc.get=function(){return this._get()||new CallbackInfo};C$zut=CallbackList.prototype;C$zut.removeByCallback=function(C$zut){for(var C$zue=0;C$zue<this.callbackInfos.length;++C$zue){var C$zui=this.callbackInfos[C$zue];C$zui&&C$zui.callback===C$zut&&(C$zuc.put(C$zui),C$zus(this.callbackInfos,C$zue),--C$zue)}},C$zut.removeByTarget=function(C$zut){for(var C$zue=0;C$zue<this.callbackInfos.length;++C$zue){var C$zui=this.callbackInfos[C$zue];C$zui&&C$zui.target===C$zut&&(C$zuc.put(C$zui),C$zus(this.callbackInfos,C$zue),--C$zue)}},C$zut.cancel=function(C$zut){var C$zue=this.callbackInfos[C$zut];C$zue&&(C$zuc.put(C$zue),this.callbackInfos[C$zut]=null),this.containCanceled=!0},C$zut.cancelAll=function(){for(var C$zut=0;C$zut<this.callbackInfos.length;C$zut++){var C$zue=this.callbackInfos[C$zut];C$zue&&(C$zuc.put(C$zue),this.callbackInfos[C$zut]=null)}this.containCanceled=!0},C$zut.purgeCanceled=function(){for(var C$zut=this.callbackInfos.length-1;0<=C$zut;--C$zut)this.callbackInfos[C$zut]||C$zus(this.callbackInfos,C$zut);this.containCanceled=!1},C$zut.clear=function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1};var C$zul=new C$zui.Pool(function(C$zut){return C$zut.callbackInfos=[],C$zut.isInvoking=!1,!(C$zut.containCanceled=!1)},16);function CallbacksInvoker(){this._callbackTable=C$zui.createMap(!0)}C$zul.get=function(){return this._get()||new CallbackList},(C$zut=CallbacksInvoker.prototype).on=function(C$zut,C$zue,C$zui,C$zur){var C$zun=this._callbackTable[C$zut];C$zun=C$zun||(this._callbackTable[C$zut]=C$zul.get());C$zut=C$zuc.get();C$zut.set(C$zue,C$zui,C$zur),C$zun.callbackInfos.push(C$zut)},C$zut.hasEventListener=function(C$zut,C$zue,C$zui){C$zut=this._callbackTable[C$zut];if(!C$zut)return!1;var C$zur=C$zut.callbackInfos;if(!C$zue){if(C$zut.isInvoking){for(var C$zun=0;C$zun<C$zur.length;++C$zun)if(C$zur[C$zun])return!0;return!1}return 0<C$zur.length}for(var C$zua=0;C$zua<C$zur.length;++C$zua){var C$zuo=C$zur[C$zua];if(C$zuo&&C$zuo.callback===C$zue&&C$zuo.target===C$zui)return!0}return!1},C$zut.removeAll=function(C$zut){if("string"==typeof C$zut){var C$zue=this._callbackTable[C$zut];C$zue&&(C$zue.isInvoking?C$zue.cancelAll():(C$zue.clear(),C$zul.put(C$zue),delete this._callbackTable[C$zut]))}else if(C$zut)for(var C$zui in this._callbackTable){var C$zur=this._callbackTable[C$zui];if(C$zur.isInvoking){var C$zun=C$zur.callbackInfos;for(var C$zua=0;C$zua<C$zun.length;++C$zua){var C$zuo=C$zun[C$zua];C$zuo&&C$zuo.target===C$zut&&C$zur.cancel(C$zua)}}else C$zur.removeByTarget(C$zut)}},C$zut.off=function(C$zut,C$zue,C$zui){var C$zur=this._callbackTable[C$zut];if(C$zur){var C$zun=C$zur.callbackInfos;for(var C$zua=0;C$zua<C$zun.length;++C$zua){var C$zuo=C$zun[C$zua];if(C$zuo&&C$zuo.callback===C$zue&&C$zuo.target===C$zui){C$zur.isInvoking?C$zur.cancel(C$zua):(C$zus(C$zun,C$zua),C$zuc.put(C$zuo));break}}}},C$zut.emit=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zuh){var C$zua=this._callbackTable[C$zut];if(C$zua){var C$zuu=!C$zua.isInvoking;C$zua.isInvoking=!0;var C$zu_=C$zua.callbackInfos;for(var C$zuo=0,C$zud=C$zu_.length;C$zuo<C$zud;++C$zuo){var C$zus=C$zu_[C$zuo];var C$zuc,C$zul;C$zus&&(C$zuc=C$zus.target,C$zul=C$zus.callback,C$zus.once&&this.off(C$zut,C$zul,C$zuc),C$zuc?C$zul.call(C$zuc,C$zue,C$zui,C$zur,C$zun,C$zuh):C$zul(C$zue,C$zui,C$zur,C$zun,C$zuh))}C$zuu&&(C$zua.isInvoking=!1,C$zua.containCanceled&&C$zua.purgeCanceled())}},C$zue.exports=CallbacksInvoker},{"./js":209}],203:[function(C$zut,C$zue,C$zui){"use strict";C$zue.exports={flattenCodeArray:function(C$zut){var C$zue=[];return function deepFlatten(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];Array.isArray(C$zur)?deepFlatten(C$zut,C$zur):C$zut.push(C$zur)}}(C$zue,C$zut),C$zue.join("")}}},{}],204:[function(C$zut,C$zue,C$zui){"use strict";var C$zuS=C$zut("./js");var C$zuT=C$zut("./attribute");var C$zuw=C$zut("./CCClass");var C$zuE=C$zut("../utils/misc");function C$zurb0(){this.uuidList=[],this.uuidObjList=[],this.uuidPropList=[],this._stillUseUrl=C$zuS.createMap(!0)}C$zurb0.prototype.reset=function(){this.uuidList.length=0,this.uuidObjList.length=0,this.uuidPropList.length=0,C$zuS.clear(this._stillUseUrl)},C$zurb0.prototype.push=function(C$zut,C$zue,C$zui,C$zur){C$zur&&(this._stillUseUrl[this.uuidList.length]=!0),this.uuidList.push(C$zui),this.uuidObjList.push(C$zut),this.uuidPropList.push(C$zue)},(C$zurb0.pool=new C$zuS.Pool(function(C$zut){C$zut.reset()},10)).get=function(){return this._get()||new C$zurb0};(C$zut=_Deserializer.prototype).deserialize=function(C$zut){if(Array.isArray(C$zut)){var C$zue=C$zut;var C$zui=C$zue.length;this.deserializedList.length=C$zui;for(var C$zur=0;C$zur<C$zui;C$zur++)C$zue[C$zur]&&(this.deserializedList[C$zur]=this._deserializeObject(C$zue[C$zur],!1));this.deserializedData=0<C$zui?this.deserializedList[0]:[]}else this.deserializedList.length=1,this.deserializedData=C$zut?this._deserializeObject(C$zut,!1):null,this.deserializedList[0]=this.deserializedData;C$zut=this;var C$zun=C$zut.deserializedList;var C$zua=C$zut._idPropList;var C$zuo=C$zut._idList;var C$zuh=C$zut._idObjList;var C$zus,C$zuc,C$zul;for(C$zut._classFinder&&C$zut._classFinder.onDereferenced,C$zus=0;C$zus<C$zuo.length;C$zus++)C$zuc=C$zua[C$zus],C$zul=C$zuo[C$zus],C$zuh[C$zus][C$zuc]=C$zun[C$zul];return this.deserializedData},C$zut._deserializeObject=function(C$zut,C$zuh,C$zuu,C$zue,C$zu_){var C$zui;var C$zur=null;var C$zun=null;var C$zua=C$zut.__type__;if("TypedArray"===C$zua){var C$zud=C$zut.array;C$zur=new window[C$zut.ctor](C$zud.length);for(var C$zuo=0;C$zuo<C$zud.length;++C$zuo)C$zur[C$zuo]=C$zud[C$zuo];return C$zur}if(C$zua){if(!(C$zun=this._classFinder(C$zua,C$zut,C$zue,C$zu_)))return this._classFinder===C$zuS._getClassById&&cc.deserialize.reportMissingClass(C$zua),null;if((C$zur=new C$zun)._deserialize)return C$zur._deserialize(C$zut.content,this),C$zur;if(cc.Class._isCCClass(C$zun)){C$zue=this;C$zu_=C$zur;C$zua=C$zut;var C$zus=C$zun;var C$zuc;C$zus.hasOwnProperty("__deserialize__")?C$zuc=C$zus.__deserialize__:(C$zuc=C$zuf(C$zue,C$zus),C$zuS.value(C$zus,"__deserialize__",C$zuc,!0));C$zuc(C$zue,C$zu_,C$zua,C$zus,C$zuu)}else this._deserializeTypedObject(C$zur,C$zut,C$zun)}else if(Array.isArray(C$zut)){C$zur=new Array(C$zut.length);for(var C$zul=0;C$zul<C$zut.length;C$zul++)"object"==typeof(C$zui=C$zut[C$zul])&&C$zui?this._deserializeObjField(C$zur,C$zui,""+C$zul,null,C$zuh):C$zur[C$zul]=C$zui}else this._deserializePrimitiveObject(C$zur={},C$zut);return C$zur},C$zut._deserializeObjField=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zue.__id__;var C$zuo;void 0===C$zua?(C$zuo=C$zue.__uuid__)?this.result.push(C$zut,C$zui,C$zuo,C$zun):C$zut[C$zui]=this._deserializeObject(C$zue,C$zun):(C$zuo=this.deserializedList[C$zua])?C$zut[C$zui]=C$zuo:(this._idList.push(C$zua),this._idObjList.push(C$zut),this._idPropList.push(C$zui))},C$zut._deserializePrimitiveObject=function(C$zut,C$zue){for(var C$zui in C$zue){var C$zur;C$zue.hasOwnProperty(C$zui)&&("object"!=typeof(C$zur=C$zue[C$zui])?"__type__"!==C$zui&&(C$zut[C$zui]=C$zur):C$zur?this._deserializeObjField(C$zut,C$zur,C$zui):C$zut[C$zui]=null)}},C$zut._deserializeTypedObject=function(C$zut,C$zue,C$zui){if(C$zui===cc.Vec2)return C$zut.x=C$zue.x||0,void(C$zut.y=C$zue.y||0);if(C$zui===cc.Vec3)return C$zut.x=C$zue.x||0,C$zut.y=C$zue.y||0,void(C$zut.z=C$zue.z||0);var C$zur;if(C$zui===cc.Color)return C$zut.r=C$zue.r||0,C$zut.g=C$zue.g||0,C$zut.b=C$zue.b||0,C$zur=C$zue.a,void(C$zut.a=void 0===C$zur?255:C$zur);if(C$zui===cc.Size)return C$zut.width=C$zue.width||0,void(C$zut.height=C$zue.height||0);var C$zun=C$zuT.DELIMETER+"default";var C$zua=C$zuT.getClassAttrs(C$zui);var C$zuo=C$zui.__props__||Object.keys(C$zut);for(var C$zus=0;C$zus<C$zuo.length;C$zus++){var C$zuc=C$zuo[C$zus];var C$zul=C$zue[C$zuc];"object"!=typeof(C$zul=void 0!==C$zul&&C$zue.hasOwnProperty(C$zuc)?C$zul:C$zuw.getDefault(C$zua[C$zuc+C$zun]))?C$zut[C$zuc]=C$zul:C$zul?this._deserializeObjField(C$zut,C$zul,C$zuc):C$zut[C$zuc]=null}},C$zuf=function(C$zua,C$zut){var C$zuu=C$zuE.BUILTIN_CLASSID_RE.test(C$zuS._getClassId(C$zut));var C$zum=cc.js.isChildClassOf(C$zut,cc._BaseNode)||cc.js.isChildClassOf(C$zut,cc.Component);var C$zuv;var C$zu_=[];var C$zud=C$zu_;var C$zuf=[];var C$zup=C$zuf;var C$zuy=[];var C$zug=[];var C$zuo=C$zut.__values__;C$zuv="_$erialized"===C$zuo[C$zuo.length-1];var C$zue=C$zuT.getClassAttrs(C$zut);var C$zus=C$zuT.DELIMETER+"type";var C$zuc=C$zuT.DELIMETER+"default";var C$zul=C$zuT.DELIMETER+"saveUrlAsAsset";var C$zuh=C$zuT.DELIMETER+"formerlySerializedAs";for(var C$zub=0;C$zub<C$zuo.length;C$zub++){var C$zui=C$zuo[C$zub];var C$zur=C$zui;C$zue[C$zui+C$zuh]&&(C$zur=C$zue[C$zui+C$zuh]);var C$zuC=C$zue[C$zui+C$zul];var C$zux=C$zuw.getDefault(C$zue[C$zui+C$zuc]);var C$zuA=!1;var C$zun;C$zuu&&(C$zun=C$zue[C$zui+C$zus],C$zuA=void 0===C$zux&&C$zun?C$zun instanceof C$zuT.PrimitiveType:"string"==(C$zun=typeof C$zux)&&!C$zuC||"number"==C$zun||"boolean"==C$zun),C$zuu&&C$zuA?(C$zur!==C$zui&&C$zud===C$zu_&&(C$zud=C$zu_.slice()),C$zu_.push(C$zui),C$zud!==C$zu_&&C$zud.push(C$zur)):(C$zur!==C$zui&&C$zup===C$zuf&&(C$zup=C$zuf.slice()),C$zuf.push(C$zui),C$zup!==C$zuf&&C$zup.push(C$zur),C$zuy.push(C$zuC),C$zug.push(C$zux instanceof cc.ValueType&&C$zux.constructor))}return function(C$zut,C$zue,C$zui,C$zul,C$zuh){for(var C$zur=0;C$zur<C$zu_.length;++C$zur){var C$zun=C$zui[C$zud[C$zur]];void 0!==C$zun&&(C$zue[C$zu_[C$zur]]=C$zun)}for(var C$zua=0;C$zua<C$zuf.length;++C$zua){var C$zuo=C$zuf[C$zua];var C$zus=C$zui[C$zup[C$zua]];var C$zuc;void 0!==C$zus&&(C$zuu||"object"==typeof C$zus?(C$zuc=C$zug[C$zua])?C$zuu||C$zus?C$zut._deserializeTypedObject(C$zue[C$zuo],C$zus,C$zuc):C$zue[C$zuo]=null:C$zus?C$zut._deserializeObjField(C$zue,C$zus,C$zuo,null,C$zuy[C$zua]):C$zue[C$zuo]=null:C$zue[C$zuo]=C$zus)}C$zum&&C$zui._id&&(C$zue._id=C$zui._id),C$zuv&&(C$zue._$erialized=JSON.parse(JSON.stringify(C$zui)),C$zut._deserializePrimitiveObject(C$zue._$erialized,C$zui))}},(_Deserializer.pool=new C$zuS.Pool(function(C$zut){C$zut.result=null,C$zut.customEnv=null,C$zut.deserializedList.length=0,C$zut.deserializedData=null,C$zut._classFinder=null,C$zut._idList.length=0,C$zut._idObjList.length=0,C$zut._idPropList.length=0},1)).get=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=this._get();return C$zua?(C$zua.result=C$zut,C$zua.customEnv=C$zur,C$zua._classFinder=C$zui,C$zua):new _Deserializer(C$zut,0,C$zui,C$zur)};var C$zus=_Deserializer;function _Deserializer(C$zut,C$zue,C$zui,C$zur,C$zun){this.result=C$zut,this.customEnv=C$zur,this.deserializedList=[],this.deserializedData=null,this._classFinder=C$zui,this._idList=[],this._idObjList=[],this._idPropList=[]}var C$zuf;cc.deserialize=function(C$zut,C$zue,C$zui){var C$zur=(C$zui=C$zui||{}).classFinder||C$zuS._getClassById;var C$zun=C$zui.createAssetRefs||cc.sys.platform===cc.sys.EDITOR_CORE;var C$zua=C$zui.customEnv;C$zui=C$zui.ignoreEditorOnly;"string"==typeof C$zut&&(C$zut=JSON.parse(C$zut));var C$zuo=!C$zue;C$zue=C$zue||C$zurb0.pool.get();C$zur=C$zus.pool.get(C$zue,!1,C$zur,C$zua,C$zui);cc.game._isCloning=!0;C$zua=C$zur.deserialize(C$zut);return cc.game._isCloning=!1,C$zus.pool.put(C$zur),C$zun&&C$zue.assignAssetsBy(Editor.serialize.asAsset),C$zuo&&C$zurb0.pool.put(C$zue),C$zua},cc.deserialize.Details=C$zurb0,cc.deserialize.reportMissingClass=function(C$zut){cc.warnID(5302,C$zut)}},{"../utils/misc":264,"./CCClass":189,"./attribute":201,"./js":209}],205:[function(C$zut,C$zue,C$zui){"use strict";function IdGenerater(C$zut){this.id=0|998*Math.random(),this.prefix=C$zut?C$zut+".":""}IdGenerater.prototype.getNewId=function(){return this.prefix+ ++this.id},IdGenerater.global=new IdGenerater("global"),C$zue.exports=IdGenerater},{}],206:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./js"),C$zut("./CCClass"),C$zut("./CCClassDecorator"),C$zut("./CCEnum"),C$zut("./CCObject"),C$zut("./callbacks-invoker"),C$zut("./url"),C$zut("./deserialize"),C$zut("./instantiate"),C$zut("./instantiate-jit"),C$zut("./requiring-frame"),C$zut("./CCSys"),C$zut("./CCMacro"),C$zut("./CCAssetLibrary"),C$zut("./CCVisibleRect")},{"./CCAssetLibrary":188,"./CCClass":189,"./CCClassDecorator":190,"./CCEnum":191,"./CCMacro":194,"./CCObject":195,"./CCSys":198,"./CCVisibleRect":200,"./callbacks-invoker":202,"./deserialize":204,"./instantiate":208,"./instantiate-jit":207,"./js":209,"./requiring-frame":211,"./url":212}],207:[function(C$zut,C$zue,C$zui){"use strict";var C$zuo=C$zut("./CCObject");var C$zur=C$zuo.Flags.Destroyed;var C$zus=C$zuo.Flags.PersistentMask;var C$zuh=C$zut("./attribute");var C$zua=C$zut("./js");var C$zuu=C$zut("./CCClass");var C$zuc=C$zut("./compiler");var C$zu_=C$zuh.DELIMETER+"default";var C$zun=C$zuu.IDENTIFIER_RE;var C$zul=C$zuu.escapeForJS;var C$zud={"cc.Node":"cc.Node","cc.Sprite":"cc.Sprite","cc.Label":"cc.Label","cc.Button":"cc.Button","cc.Widget":"cc.Widget","cc.Animation":"cc.Animation","cc.ClickEvent":!1,"cc.PrefabInfo":!1};try{Float32Array.name||(Float32Array.name="Float32Array"),Float64Array.name||(Float64Array.name="Float64Array"),Int8Array.name||(Int8Array.name="Int8Array"),Int16Array.name||(Int16Array.name="Int16Array"),Int32Array.name||(Int32Array.name="Int32Array"),Uint8Array.name||(Uint8Array.name="Uint8Array"),Uint16Array.name||(Uint16Array.name="Uint16Array"),Uint32Array.name||(Uint32Array.name="Uint32Array")}catch(C$zut){}function Declaration(C$zut,C$zue){this.varName=C$zut,this.expression=C$zue}function mergeDeclaration(C$zut,C$zue){return C$zue instanceof Declaration?new Declaration(C$zue.varName,C$zut+C$zue.expression):C$zut+C$zue}function writeAssignment(C$zut,C$zue,C$zui){Array.isArray(C$zui)?(C$zui[0]=mergeDeclaration(C$zue,C$zui[0]),C$zut.push(C$zui)):C$zut.push(mergeDeclaration(C$zue,C$zui)+";")}function Assignments(C$zut){this._exps=[],this._targetExp=C$zut}function equalsToDefault(C$zut,C$zue){if("function"==typeof C$zut)try{C$zut=C$zut()}catch(C$zut){return!1}if(C$zut===C$zue)return!0;if(C$zut&&C$zue){if(C$zut instanceof cc.ValueType&&C$zut.equals(C$zue))return!0;if(Array.isArray(C$zut)&&Array.isArray(C$zue)||C$zut.constructor===Object&&C$zue.constructor===Object)try{return Array.isArray(C$zut)&&Array.isArray(C$zue)&&0===C$zut.length&&0===C$zue.length}catch(C$zut){}}return!1}function getPropAccessor(C$zut){return C$zun.test(C$zut)?"."+C$zut:"["+C$zul(C$zut)+"]"}function Parser(C$zut,C$zue){var C$zui;this.parent=C$zue,this.objsToClear_iN$t=[],this.codeArray=[],this.objs=[],this.funcs=[],this.funcModuleCache=C$zua.createMap(),C$zua.mixin(this.funcModuleCache,C$zud),this.globalVariables=[],this.globalVariableId=0,this.localVariableId=0,this.codeArray.push("var o,t;","if(R){","o=R;","}else{","o=R=new "+this.getFuncModule(C$zut.constructor,!0)+"();","}"),C$zua.value(C$zut,"_iN$t",{globalVar:"R"},!0),this.objsToClear_iN$t.push(C$zut),this.enumerateObject(this.codeArray,C$zut),0<this.globalVariables.length&&(C$zui="var "+this.globalVariables.join(",")+";");C$zue=C$zuc.flattenCodeArray(["return (function(R){",C$zui||[],this.codeArray,"return o;","})"]);this.result=Function("O","F",C$zue)(this.objs,this.funcs);for(var C$zur=0,C$zun=this.objsToClear_iN$t.length;C$zur<C$zun;++C$zur)this.objsToClear_iN$t[C$zur]._iN$t=null;this.objsToClear_iN$t.length=0}Declaration.prototype.toString=function(){return"var "+this.varName+"="+this.expression+";"},Assignments.prototype.append=function(C$zut,C$zue){this._exps.push([C$zut,C$zue])},Assignments.prototype.writeCode=function(C$zut){var C$zue;if(1<this._exps.length)C$zut.push("t="+this._targetExp+";"),C$zue="t";else{if(1!==this._exps.length)return;C$zue=this._targetExp}for(var C$zui=0;C$zui<this._exps.length;C$zui++){var C$zur=this._exps[C$zui];writeAssignment(C$zut,C$zue+getPropAccessor(C$zur[0])+"=",C$zur[1])}},(Assignments.pool=new C$zua.Pool(function(C$zut){C$zut._exps.length=0,C$zut._targetExp=null},1)).get=function(C$zut){var C$zue=this._get()||new Assignments;return C$zue._targetExp=C$zut,C$zue};C$zut=Parser.prototype;C$zut.getFuncModule=function(C$zut,C$zue){var C$zui=C$zua.getClassName(C$zut);if(C$zui){var C$zur=this.funcModuleCache[C$zui];if(C$zur)return C$zur;if(void 0===C$zur)if(-1!==C$zui.indexOf("."))try{if(C$zut===Function("return "+C$zui)())return this.funcModuleCache[C$zui]=C$zui}catch(C$zut){}}C$zur=this.funcs.indexOf(C$zut);C$zur<0&&(C$zur=this.funcs.length,this.funcs.push(C$zut));C$zut="F["+C$zur+"]";return this.funcModuleCache[C$zui]=C$zut=C$zue?"("+C$zut+")":C$zut},C$zut.getObjRef=function(C$zut){var C$zue=this.objs.indexOf(C$zut);return C$zue<0&&(C$zue=this.objs.length,this.objs.push(C$zut)),"O["+C$zue+"]"},C$zut.setValueType=function(C$zut,C$zue,C$zui,C$zur){var C$zun=Assignments.pool.get(C$zur);var C$zua=C$zue.constructor.__props__;C$zua=C$zua||Object.keys(C$zue);for(var C$zuo=0;C$zuo<C$zua.length;C$zuo++){var C$zus=C$zua[C$zuo];var C$zuc=C$zui[C$zus];C$zue[C$zus]!==C$zuc&&(C$zuc=this.enumerateField(C$zui,C$zus,C$zuc),C$zun.append(C$zus,C$zuc))}C$zun.writeCode(C$zut),Assignments.pool.put(C$zun)},C$zut.enumerateCCClass=function(C$zut,C$zue,C$zui){var C$zur=C$zui.__values__;var C$zun=C$zuh.getClassAttrs(C$zui);for(var C$zua=0;C$zua<C$zur.length;C$zua++){var C$zuo=C$zur[C$zua];var C$zus=C$zue[C$zuo];var C$zuc=C$zun[C$zuo+C$zu_];var C$zul;equalsToDefault(C$zuc,C$zus)||("object"==typeof C$zus&&C$zus instanceof cc.ValueType&&(C$zuc=C$zuu.getDefault(C$zuc))&&C$zuc.constructor===C$zus.constructor?(C$zul="o"+getPropAccessor(C$zuo),this.setValueType(C$zut,C$zuc,C$zus,C$zul)):this.setObjProp(C$zut,C$zue,C$zuo,C$zus))}},C$zut.instantiateArray=function(C$zut){if(0===C$zut.length)return"[]";var C$zue="a"+ ++this.localVariableId;var C$zui=[new Declaration(C$zue,"new Array("+C$zut.length+")")];C$zua.value(C$zut,"_iN$t",{globalVar:"",source:C$zui},!0),this.objsToClear_iN$t.push(C$zut);for(var C$zur=0;C$zur<C$zut.length;++C$zur)writeAssignment(C$zui,C$zue+"["+C$zur+"]=",this.enumerateField(C$zut,C$zur,C$zut[C$zur]));return C$zui},C$zut.instantiateTypedArray=function(C$zut){var C$zue=C$zut.constructor.name||function(C$zut){if(C$zut===Float32Array)return"Float32Array";if(C$zut===Float64Array)return"Float64Array";if(C$zut===Int8Array)return"Int8Array";if(C$zut===Int16Array)return"Int16Array";if(C$zut===Int32Array)return"Int32Array";if(C$zut===Uint8Array)return"Uint8Array";if(C$zut===Uint16Array)return"Uint16Array";if(C$zut===Uint32Array)return"Uint32Array";throw new Error("Unknown TypedArray could not be instantiated: "+C$zut)}(C$zut.constructor);if(0===C$zut.length)return"new "+C$zue;var C$zui="a"+ ++this.localVariableId;var C$zur=[new Declaration(C$zui,"new "+C$zue+"("+C$zut.length+")")];C$zut._iN$t={globalVar:"",source:C$zur},this.objsToClear_iN$t.push(C$zut);for(var C$zun=0;C$zun<C$zut.length;++C$zun)0!==C$zut[C$zun]&&writeAssignment(C$zur,C$zui+"["+C$zun+"]=",C$zut[C$zun]);return C$zur},C$zut.enumerateField=function(C$zut,C$zue,C$zui){var C$zur,C$zun,C$zua;return"object"==typeof C$zui&&C$zui?(C$zur=C$zui._iN$t)?((C$zun=C$zur.globalVar)||(C$zun=C$zur.globalVar="v"+ ++this.globalVariableId,this.globalVariables.push(C$zun),C$zua=C$zur.source[0],C$zur.source[0]=mergeDeclaration(C$zun+"=",C$zua)),C$zun):ArrayBuffer.isView(C$zui)?this.instantiateTypedArray(C$zui):Array.isArray(C$zui)?this.instantiateArray(C$zui):this.instantiateObj(C$zui):"function"==typeof C$zui?this.getFuncModule(C$zui):"string"==typeof C$zui?C$zul(C$zui):("_objFlags"===C$zue&&C$zut instanceof C$zuo&&(C$zui&=C$zus),C$zui)},C$zut.setObjProp=function(C$zut,C$zue,C$zui,C$zur){writeAssignment(C$zut,"o"+getPropAccessor(C$zui)+"=",this.enumerateField(C$zue,C$zui,C$zur))},C$zut.enumerateObject=function(C$zut,C$zue){var C$zui=C$zue.constructor;if(cc.Class._isCCClass(C$zui))this.enumerateCCClass(C$zut,C$zue,C$zui);else for(var C$zur in C$zue){var C$zun;!C$zue.hasOwnProperty(C$zur)||95===C$zur.charCodeAt(0)&&95===C$zur.charCodeAt(1)&&"__type__"!==C$zur||("object"==typeof(C$zun=C$zue[C$zur])&&C$zun&&C$zun===C$zue._iN$t||this.setObjProp(C$zut,C$zue,C$zur,C$zun))}},C$zut.instantiateObj=function(C$zut){if(C$zut instanceof cc.ValueType)return C$zuu.getNewValueTypeCode(C$zut);if(C$zut instanceof cc.Asset)return this.getObjRef(C$zut);if(C$zut._objFlags&C$zur)return null;var C$zue;var C$zui=C$zut.constructor;if(cc.Class._isCCClass(C$zui)){if(this.parent)if(this.parent instanceof cc.Component){if(C$zut instanceof cc._BaseNode||C$zut instanceof cc.Component)return this.getObjRef(C$zut)}else if(this.parent instanceof cc._BaseNode)if(C$zut instanceof cc._BaseNode){if(!C$zut.isChildOf(this.parent))return this.getObjRef(C$zut)}else if(C$zut instanceof cc.Component&&!C$zut.node.isChildOf(this.parent))return this.getObjRef(C$zut);C$zue=new Declaration("o","new "+this.getFuncModule(C$zui,!0)+"()")}else if(C$zui===Object)C$zue=new Declaration("o","{}");else{if(C$zui)return this.getObjRef(C$zut);C$zue=new Declaration("o","Object.create(null)")}C$zui=[C$zue];return C$zua.value(C$zut,"_iN$t",{globalVar:"",source:C$zui},!0),this.objsToClear_iN$t.push(C$zut),this.enumerateObject(C$zui,C$zut),["(function(){",C$zui,"return o;})();"]},C$zue.exports={compile:function(C$zut){return new Parser(C$zut,C$zut instanceof cc._BaseNode&&C$zut).result},equalsToDefault:equalsToDefault}},{"./CCClass":189,"./CCObject":195,"./attribute":201,"./compiler":203,"./js":209}],208:[function(C$zut,C$zue,C$zui){"use strict";var C$zuf=C$zut("./CCObject");var C$zup=C$zut("../value-types/value-type");var C$zul=C$zuf.Flags.Destroyed;var C$zuy=C$zuf.Flags.PersistentMask;var C$zua=C$zut("./utils").isDomNode;var C$zum=C$zut("./js");function instantiate(C$zut,C$zue){if(!C$zue){if("object"!=typeof C$zut||Array.isArray(C$zut))return null;if(!C$zut)return null;if(!cc.isValid(C$zut))return null}var C$zui;if(C$zut instanceof C$zuf){if(C$zut._instantiate)return cc.game._isCloning=!0,C$zui=C$zut._instantiate(),cc.game._isCloning=!1,C$zui;if(C$zut instanceof cc.Asset)return null}return cc.game._isCloning=!0,C$zui=doInstantiate(C$zut),cc.game._isCloning=!1,C$zui}var C$zuv=[];function doInstantiate(C$zut,C$zue){if(Array.isArray(C$zut))return null;if(C$zua&&C$zua(C$zut))return null;var C$zui;C$zui=C$zut._iN$t||(C$zut.constructor?new C$zut.constructor:Object.create(null)),enumerateObject(C$zut,C$zui,C$zue);for(var C$zur=0,C$zun=C$zuv.length;C$zur<C$zun;++C$zur)C$zuv[C$zur]._iN$t=null;return C$zuv.length=0,C$zui}function enumerateObject(C$zut,C$zue,C$zui){C$zum.value(C$zut,"_iN$t",C$zue,!0),C$zuv.push(C$zut);var C$zuh=C$zut.constructor;if(cc.Class._isCCClass(C$zuh)){var C$zuu=C$zut;var C$zur=C$zue;var C$zu_=C$zui;var C$zud=C$zuh.__values__;for(var C$zun=0;C$zun<C$zud.length;C$zun++){var C$zua=C$zud[C$zun];var C$zuo=C$zuu[C$zua];var C$zus;"object"==typeof C$zuo&&C$zuo?(C$zus=C$zur[C$zua])instanceof C$zup&&C$zus.constructor===C$zuo.constructor?C$zus.set(C$zuo):C$zur[C$zua]=C$zuo._iN$t||instantiateObj(C$zuo,C$zu_):C$zur[C$zua]=C$zuo}}else for(var C$zuc in C$zut){var C$zul;!C$zut.hasOwnProperty(C$zuc)||95===C$zuc.charCodeAt(0)&&95===C$zuc.charCodeAt(1)&&"__type__"!==C$zuc||("object"==typeof(C$zul=C$zut[C$zuc])&&C$zul?C$zul!==C$zue&&(C$zue[C$zuc]=C$zul._iN$t||instantiateObj(C$zul,C$zui)):C$zue[C$zuc]=C$zul)}C$zut instanceof C$zuf&&(C$zue._objFlags&=C$zuy)}function instantiateObj(C$zut,C$zue){if(C$zut instanceof C$zup)return C$zut.clone();if(C$zut instanceof cc.Asset)return C$zut;var C$zui;if(ArrayBuffer.isView(C$zut)){var C$zur=C$zut.length;C$zui=new C$zut.constructor(C$zur),C$zut._iN$t=C$zui,C$zuv.push(C$zut);for(var C$zun=0;C$zun<C$zur;++C$zun)C$zui[C$zun]=C$zut[C$zun];return C$zui}if(Array.isArray(C$zut)){var C$zua=C$zut.length;C$zui=new Array(C$zua),C$zum.value(C$zut,"_iN$t",C$zui,!0),C$zuv.push(C$zut);for(var C$zuo=0;C$zuo<C$zua;++C$zuo){var C$zus=C$zut[C$zuo];C$zui[C$zuo]="object"==typeof C$zus&&C$zus?C$zus._iN$t||instantiateObj(C$zus,C$zue):C$zus}return C$zui}if(C$zut._objFlags&C$zul)return null;var C$zuc=C$zut.constructor;if(cc.Class._isCCClass(C$zuc)){if(C$zue)if(C$zue instanceof cc.Component){if(C$zut instanceof cc._BaseNode||C$zut instanceof cc.Component)return C$zut}else if(C$zue instanceof cc._BaseNode)if(C$zut instanceof cc._BaseNode){if(!C$zut.isChildOf(C$zue))return C$zut}else if(C$zut instanceof cc.Component&&!C$zut.node.isChildOf(C$zue))return C$zut;C$zui=new C$zuc}else if(C$zuc===Object)C$zui={};else{if(C$zuc)return C$zut;C$zui=Object.create(null)}return enumerateObject(C$zut,C$zui,C$zue),C$zui}instantiate._clone=doInstantiate,cc.instantiate=instantiate,C$zue.exports=instantiate},{"../value-types/value-type":287,"./CCObject":195,"./js":209,"./utils":213}],209:[function(C$zut,C$zue,C$zui){"use strict";var C$zuh=new(C$zut("./id-generater"))("TmpCId.");function _getPropertyDescriptor(C$zut,C$zue){for(;C$zut;){var C$zui=Object.getOwnPropertyDescriptor(C$zut,C$zue);if(C$zui)return C$zui;C$zut=Object.getPrototypeOf(C$zut)}return null}function _copyprop(C$zut,C$zue,C$zui){C$zue=_getPropertyDescriptor(C$zue,C$zut);Object.defineProperty(C$zui,C$zut,C$zue)}var C$zuo={isNumber:function(C$zut){return"number"==typeof C$zut||C$zut instanceof Number},isString:function(C$zut){return"string"==typeof C$zut||C$zut instanceof String},addon:function(C$zut){C$zut=C$zut||{};for(var C$zue=1,C$zui=arguments.length;C$zue<C$zui;C$zue++){var C$zur=arguments[C$zue];if(C$zur)if("object"==typeof C$zur)for(var C$zun in C$zur)C$zun in C$zut||_copyprop(C$zun,C$zur,C$zut);else cc.errorID(5402,C$zur)}return C$zut},mixin:function(C$zut){C$zut=C$zut||{};for(var C$zue=1,C$zui=arguments.length;C$zue<C$zui;C$zue++){var C$zur=arguments[C$zue];if(C$zur)if("object"==typeof C$zur)for(var C$zun in C$zur)_copyprop(C$zun,C$zur,C$zut);else cc.errorID(5403,C$zur)}return C$zut},extend:function(C$zut,C$zue){for(var C$zui in C$zue)C$zue.hasOwnProperty(C$zui)&&(C$zut[C$zui]=C$zue[C$zui]);return C$zut.prototype=Object.create(C$zue.prototype,{constructor:{value:C$zut,writable:!0,configurable:!0}}),C$zut},getSuper:function(C$zut){C$zut=C$zut.prototype;C$zut=C$zut&&Object.getPrototypeOf(C$zut);return C$zut&&C$zut.constructor},isChildClassOf:function(C$zut,C$zue){if(C$zut&&C$zue){if("function"!=typeof C$zut)return!1;if("function"!=typeof C$zue)return!1;if(C$zut===C$zue)return!0;for(;;){if(!(C$zut=C$zuo.getSuper(C$zut)))return!1;if(C$zut===C$zue)return!0}}return!1},clear:function(C$zut){var C$zue=Object.keys(C$zut);for(var C$zui=0;C$zui<C$zue.length;C$zui++)delete C$zut[C$zue[C$zui]]},isEmptyObject:function(C$zut){for(var C$zue in C$zut)return!1;return!0},getPropertyDescriptor:_getPropertyDescriptor};var C$zua={value:void 0,enumerable:!1,writable:!1,configurable:!0};var C$zus={get:null,set:null,enumerable:!(C$zuo.value=function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zua.value=C$zui,C$zua.writable=C$zur,C$zua.enumerable=C$zun,Object.defineProperty(C$zut,C$zue,C$zua),C$zua.value=void 0})};var C$zuc={get:null,enumerable:!(C$zuo.getset=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){"function"!=typeof C$zur&&(C$zun=C$zur,C$zur=void 0),C$zus.get=C$zui,C$zus.set=C$zur,C$zus.enumerable=C$zun,C$zus.configurable=C$zua,Object.defineProperty(C$zut,C$zue,C$zus),C$zus.get=null,C$zus.set=null}),configurable:!1};var C$zul={set:null,enumerable:!(C$zuo.get=function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zuc.get=C$zui,C$zuc.enumerable=C$zur,C$zuc.configurable=C$zun,Object.defineProperty(C$zut,C$zue,C$zuc),C$zuc.get=null}),configurable:!1};function setup(C$zur,C$zut,C$zun){return C$zuo.getset(C$zuo,C$zut,function(){return Object.assign({},C$zun)},function(C$zut){C$zuo.clear(C$zun),Object.assign(C$zun,C$zut)}),function(C$zut,C$zue){var C$zui;C$zue.prototype.hasOwnProperty(C$zur)&&delete C$zun[C$zue.prototype[C$zur]],C$zuo.value(C$zue.prototype,C$zur,C$zut),C$zut&&((C$zui=C$zun[C$zut])&&C$zui!==C$zue?cc.error("A Class already exists with the same "+C$zur+' : "'+C$zut+'".'):C$zun[C$zut]=C$zue)}}var C$zur,C$zun,C$zuu;C$zuo.set=function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zul.set=C$zui,C$zul.enumerable=C$zur,C$zul.configurable=C$zun,Object.defineProperty(C$zut,C$zue,C$zul),C$zul.set=null},C$zuo.getClassName=function(C$zut){if("function"!=typeof C$zut)return C$zut&&C$zut.constructor?C$zuo.getClassName(C$zut.constructor):"";var C$zue=C$zut.prototype;if(C$zue&&C$zue.hasOwnProperty("__classname__")&&C$zue.__classname__)return C$zue.__classname__;C$zue="";return C$zut.name&&(C$zue=C$zut.name),!C$zut.toString||(C$zut="["===(C$zut=C$zut.toString()).charAt(0)?C$zut.match(/\[\w+\s*(\w+)\]/):C$zut.match(/function\s*(\w+)/))&&2===C$zut.length&&(C$zue=C$zut[1]),"Object"!==C$zue?C$zue:""},C$zur={},C$zun={},C$zuo._setClassId=setup("__cid__","_registeredClassIds",C$zur),C$zuu=setup("__classname__","_registeredClassNames",C$zun),C$zuo.setClassName=function(C$zut,C$zue){C$zuu(C$zut,C$zue),C$zue.prototype.hasOwnProperty("__cid__")||(C$zut=C$zut||C$zuh.getNewId())&&C$zuo._setClassId(C$zut,C$zue)},C$zuo.unregisterClass=function(){for(var C$zut=0;C$zut<arguments.length;C$zut++){var C$zue=arguments[C$zut].prototype;var C$zui=C$zue.__cid__;C$zui&&delete C$zur[C$zui];C$zui=C$zue.__classname__;C$zui&&delete C$zun[C$zui]}},C$zuo._getClassById=function(C$zut){return C$zur[C$zut]},C$zuo.getClassByName=function(C$zut){return C$zun[C$zut]},C$zuo._getClassId=function(C$zut,C$zue){if("function"==typeof C$zut&&C$zut.prototype.hasOwnProperty("__cid__"))return C$zut.prototype.__cid__;if(C$zut&&C$zut.constructor){var C$zui=C$zut.constructor.prototype;if(C$zui&&C$zui.hasOwnProperty("__cid__"))return C$zut.__cid__}return""},C$zuo.obsolete=function(C$zut,C$zue,C$zui,C$zur){var C$zun=/([^.]+)$/;C$zue=C$zun.exec(C$zue)[0];var C$zua=C$zun.exec(C$zui)[0];function get(){return this[C$zua]}C$zur?C$zuo.getset(C$zut,C$zue,get,function(C$zut){this[C$zua]=C$zut}):C$zuo.get(C$zut,C$zue,get)},C$zuo.obsoletes=function(C$zut,C$zue,C$zui,C$zur){for(var C$zun in C$zui){var C$zua=C$zui[C$zun];C$zuo.obsolete(C$zut,C$zue+"."+C$zun,C$zua,C$zur)}};var C$zu_=/(%d)|(%s)/;var C$zud=/%s/;function removeAt(C$zut,C$zue){C$zut.splice(C$zue,1)}function remove(C$zut,C$zue){C$zue=C$zut.indexOf(C$zue);return 0<=C$zue&&(removeAt(C$zut,C$zue),!0)}C$zuo.formatStr=function(){var C$zut=arguments.length;if(0===C$zut)return"";var C$zue=arguments[0];if(1===C$zut)return""+C$zue;if("string"==typeof C$zue&&C$zu_.test(C$zue))for(var C$zui=1;C$zui<C$zut;++C$zui){var C$zur=arguments[C$zui];var C$zun="number"==typeof C$zur?C$zu_:C$zud;C$zun.test(C$zue)?C$zue=C$zue.replace(C$zun,C$zur):C$zue+=" "+C$zur}else for(var C$zua=1;C$zua<C$zut;++C$zua)C$zue+=" "+arguments[C$zua];return C$zue},C$zuo.shiftArguments=function(){var C$zut=arguments.length-1;var C$zue=new Array(C$zut);for(var C$zui=0;C$zui<C$zut;++C$zui)C$zue[C$zui]=arguments[C$zui+1];return C$zue},C$zuo.createMap=function(C$zut){var C$zue=Object.create(null);return C$zut&&(C$zue["."]=!0,C$zue["/"]=!0,delete C$zue["."],delete C$zue["/"]),C$zue};var C$zuf=Array.prototype.indexOf;function Pool(C$zut,C$zue){void 0===C$zue&&(C$zue=C$zut,C$zut=null),this.get=null,this.count=0,this._pool=new Array(C$zue),this._cleanup=C$zut}C$zuo.array={remove:remove,fastRemove:function(C$zut,C$zue){0<=(C$zue=C$zut.indexOf(C$zue))&&(C$zut[C$zue]=C$zut[C$zut.length-1],--C$zut.length)},removeAt:removeAt,fastRemoveAt:function(C$zut,C$zue){var C$zui=C$zut.length;C$zue<0||C$zui<=C$zue||(C$zut[C$zue]=C$zut[C$zui-1],C$zut.length=C$zui-1)},contains:function(C$zut,C$zue){return 0<=C$zut.indexOf(C$zue)},verifyType:function(C$zut,C$zue){if(C$zut&&0<C$zut.length)for(var C$zui=0;C$zui<C$zut.length;C$zui++)if(!(C$zut[C$zui]instanceof C$zue))return cc.logID(1300),!1;return!0},removeArray:function(C$zut,C$zue){for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)remove(C$zut,C$zue[C$zui])},appendObjectsAt:function(C$zut,C$zue,C$zui){return C$zut.splice.apply(C$zut,[C$zui,0].concat(C$zue)),C$zut},copy:function(C$zut){var C$zue,C$zui=C$zut.length,C$zur=new Array(C$zui);for(C$zue=0;C$zue<C$zui;C$zue+=1)C$zur[C$zue]=C$zut[C$zue];return C$zur},indexOf:C$zuf,MutableForwardIterator:C$zut("../utils/mutable-forward-iterator")},Pool.prototype._get=function(){var C$zut;return 0<this.count?(--this.count,C$zut=this._pool[this.count],this._pool[this.count]=null,C$zut):null},Pool.prototype.put=function(C$zut){var C$zue=this._pool;this.count<C$zue.length&&(this._cleanup&&!1===this._cleanup(C$zut)||(C$zue[this.count]=C$zut,++this.count))},Pool.prototype.resize=function(C$zut){0<=C$zut&&(this._pool.length=C$zut,this.count>C$zut&&(this.count=C$zut))},C$zuo.Pool=Pool,cc.js=C$zuo,C$zue.exports=C$zuo},{"../utils/mutable-forward-iterator":265,"./id-generater":205}],210:[function(C$zut,C$zue,C$zus){"use strict";var C$zua=C$zut("./js");var C$zuo=C$zut("./attribute");var C$zuc={url:{canUsedInGet:!0},default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function _wrapOptions(C$zut,C$zue,C$zui,C$zur){C$zut=C$zut?{_short:!0}:{_short:!0,default:C$zue};return C$zui&&(C$zur?C$zut.url=C$zui:C$zut.type=C$zui),C$zut}C$zus.getFullFormOfProperty=function(C$zut,C$zue,C$zui,C$zur){return C$zut&&C$zut.constructor===Object?null:Array.isArray(C$zut)&&0<C$zut.length?(C$zut[0],_wrapOptions(C$zue,[],C$zut)):"function"==typeof C$zut?(C$zun=C$zut,cc.RawAsset.isRawAssetType(C$zun)||cc.RawAsset.wasRawAssetType(C$zun)?_wrapOptions(C$zue,"",C$zun,!0):_wrapOptions(C$zue,C$zua.isChildClassOf(C$zun,cc.ValueType)?new C$zun:null,C$zun)):C$zut instanceof C$zuo.PrimitiveType?_wrapOptions(C$zue,C$zut.default):_wrapOptions(C$zue,C$zut);var C$zun},C$zus.preprocessAttrs=function(C$zut,C$zue,C$zui,C$zur){for(var C$zun in C$zut){var C$zua=C$zut[C$zun];var C$zuo=C$zus.getFullFormOfProperty(C$zua,!1,C$zun,C$zue);(C$zua=C$zuo?C$zut[C$zun]=C$zuo:C$zua)&&((C$zuo=C$zua.notify)&&function(C$zut,C$zue,C$zui,C$zur){if(!C$zut.get&&!C$zut.set&&C$zut.hasOwnProperty("default")){var C$zun="_N$"+C$zue;C$zut.get=function(){return this[C$zun]},C$zut.set=function(C$zut){var C$zue=this[C$zun];this[C$zun]=C$zut,C$zui.call(this,C$zue)};var C$zua={};for(var C$zuo in C$zur[C$zun]=C$zua,C$zuc){var C$zus=C$zuc[C$zuo];C$zut.hasOwnProperty(C$zuo)&&(C$zua[C$zuo]=C$zut[C$zuo],C$zus.canUsedInGet||delete C$zut[C$zuo])}}}(C$zua,C$zun,C$zuo,C$zut),"type"in C$zua&&function(C$zut,C$zue,C$zui,C$zur){if(Array.isArray(C$zue)){if(!(0<C$zue.length))return cc.errorID(5508,C$zui,C$zur);if(cc.RawAsset.isRawAssetType(C$zue[0]))return C$zut.url=C$zue[0],delete C$zut.type;C$zut.type=C$zue=C$zue[0]}"function"==typeof C$zue&&(C$zue===String?C$zut.type=cc.String:C$zue===Boolean?C$zut.type=cc.Boolean:C$zue===Number&&(C$zut.type=cc.Float))}(C$zua,C$zua.type,C$zue,C$zun),"url"in C$zua&&(C$zun=(C$zuo=C$zua).url,Array.isArray(C$zun)&&0<C$zun.length&&(C$zun=C$zun[0]),C$zuo.type=C$zun),"type"in C$zua&&C$zua.type)}},C$zus.validateMethodWithProps=function(C$zut,C$zue,C$zui,C$zur,C$zun){return"function"==typeof C$zut||null===C$zut}},{"./CCClass":189,"./attribute":201,"./js":209}],211:[function(C$zut,C$zue,C$zui){"use strict";var C$zun=[];cc._RF={push:function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=C$zue,C$zue=""),C$zun.push({uuid:C$zue,script:C$zui,module:C$zut,exports:C$zut.exports,beh:null})},pop:function(){var C$zut=C$zun.pop();var C$zue=C$zut.module;var C$zui=C$zue.exports;if(C$zui===C$zut.exports){for(var C$zur in C$zui)return;C$zue.exports=C$zut.cls}},peek:function(){return C$zun[C$zun.length-1]}}},{}],212:[function(C$zut,C$zue,C$zui){"use strict";cc.url={_rawAssets:"",normalize:function(C$zut){return C$zut&&(46===C$zut.charCodeAt(0)&&47===C$zut.charCodeAt(1)?C$zut=C$zut.slice(2):47===C$zut.charCodeAt(0)&&(C$zut=C$zut.slice(1))),C$zut},raw:function(C$zut){if((C$zut=this.normalize(C$zut)).startsWith("resources/")){var C$zue=cc.loader._getResUuid(C$zut.slice(10),cc.Asset,null,!0);if(C$zue)return cc.AssetLibrary.getLibUrlNoExt(C$zue,!0)+cc.path.extname(C$zut)}else cc.errorID(7002,C$zut);return this._rawAssets+C$zut},_init:function(C$zut){this._rawAssets=cc.path.stripSep(C$zut)+"/"}},C$zue.exports=cc.url},{}],213:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./js");C$zue.exports={contains:function(C$zut,C$zue){if("function"==typeof C$zut.contains)return C$zut.contains(C$zue);if("function"==typeof C$zut.compareDocumentPosition)return!!(16&C$zut.compareDocumentPosition(C$zue));var C$zui=C$zue.parentNode;if(C$zui)do{if(C$zui===C$zut)return!0}while(null!==(C$zui=C$zui.parentNode));return!1},isDomNode:"object"==typeof window&&("function"==typeof Node?function(C$zut){return C$zut instanceof Node}:function(C$zut){return C$zut&&"object"==typeof C$zut&&"number"==typeof C$zut.nodeType&&"string"==typeof C$zut.nodeName}),callInNextTick:function(C$zut,C$zue,C$zui){C$zut&&setTimeout(function(){C$zut(C$zue,C$zui)},0)}}},{"./js":209}],214:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./platform/js"),C$zut("./value-types"),C$zut("./utils"),C$zut("./platform/CCInputManager"),C$zut("./platform/CCInputExtension"),C$zut("./event"),C$zut("./platform/CCSys"),C$zut("./platform/CCMacro"),C$zut("./load-pipeline"),C$zut("./CCDirector"),C$zut("./renderer"),C$zut("./platform/CCView"),C$zut("./platform/CCScreen"),C$zut("./CCScheduler"),C$zut("./event-manager")},{"./CCDirector":28,"./CCScheduler":33,"./event":117,"./event-manager":113,"./load-pipeline":144,"./platform/CCInputExtension":192,"./platform/CCInputManager":193,"./platform/CCMacro":194,"./platform/CCScreen":197,"./platform/CCSys":198,"./platform/CCView":199,"./platform/js":209,"./renderer":220,"./utils":262,"./value-types":279}],215:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=_interopRequireDefault(C$zut("./assembler"));var C$zun=_interopRequireDefault(C$zut("./utils/dynamic-atlas/manager"));var C$zua=_interopRequireDefault(C$zut("./webgl/render-data"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zur){return function(){var C$zut=_getPrototypeOf(C$zur);var C$zue;return C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments),C$zut=this,!(C$zui=C$zue)||"object"!=typeof C$zui&&"function"!=typeof C$zui?_assertThisInitialized(C$zut):C$zui;var C$zui}}function _assertThisInitialized(C$zut){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zut=function(C$zue){C$zui=C$zue,(C$zut=Assembler2D).prototype=Object.create(C$zui.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zui;_createSuper(Assembler2D);function Assembler2D(){var C$zut;return(C$zut=C$zue.call(this)||this)._renderData=new C$zua.default,C$zut._renderData.init(_assertThisInitialized(C$zut)),C$zut.initData(),C$zut.initLocal(),C$zut}var C$zut=Assembler2D.prototype;var C$zui,C$zur;return C$zut.initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount)},C$zut.initLocal=function(){this._local=[],this._local.length=4},C$zut.updateColor=function(C$zut,C$zue){var C$zui=this._renderData.uintVDatas[0];if(C$zui){C$zue=C$zue||C$zut.node.color._val;var C$zur=this.floatsPerVert;for(var C$zun=this.colorOffset,C$zua=C$zui.length;C$zun<C$zua;C$zun+=C$zur)C$zui[C$zun]=C$zue}},C$zut.getBuffer=function(){return cc.renderer._handle._meshBuffer},C$zut.updateWorldVerts=function(C$zut){var C$zue=this._local;var C$zui=this._renderData.vDatas[0];var C$zut=C$zut.node._worldMatrix.m,C$zur=C$zut[0],C$zun=C$zut[1],C$zuh=C$zut[4],C$zua=C$zut[5],C$zuo=C$zut[12],C$zut=C$zut[13];var C$zus=C$zue[0],C$zuc=C$zue[2],C$zul=C$zue[1],C$zue=C$zue[3];var C$zuu,C$zu_,C$zud;1===C$zur&&0===C$zun&&0===C$zuh&&1===C$zua?(C$zui[0]=C$zus+C$zuo,C$zui[1]=C$zul+C$zut,C$zui[5]=C$zuc+C$zuo,C$zui[6]=C$zul+C$zut,C$zui[10]=C$zus+C$zuo,C$zui[11]=C$zue+C$zut,C$zui[15]=C$zuc+C$zuo,C$zui[16]=C$zue+C$zut):(C$zuu=C$zur*C$zuc,C$zu_=C$zun*C$zus,C$zun=C$zun*C$zuc,C$zuc=C$zuh*C$zue,C$zud=C$zua*C$zul,C$zua=C$zua*C$zue,C$zui[0]=(C$zue=C$zur*C$zus)+(C$zur=C$zuh*C$zul)+C$zuo,C$zui[1]=C$zu_+C$zud+C$zut,C$zui[5]=C$zuu+C$zur+C$zuo,C$zui[6]=C$zun+C$zud+C$zut,C$zui[10]=C$zue+C$zuc+C$zuo,C$zui[11]=C$zu_+C$zua+C$zut,C$zui[15]=C$zuu+C$zuc+C$zuo,C$zui[16]=C$zun+C$zua+C$zut)},C$zut.fillBuffers=function(C$zut,C$zue){C$zue.worldMatDirty&&this.updateWorldVerts(C$zut);C$zut=this._renderData;var C$zui=C$zut.vDatas[0];var C$zur=C$zut.iDatas[0];C$zut=this.getBuffer(C$zue);C$zue=C$zut.request(this.verticesCount,this.indicesCount);var C$zun=C$zue.byteOffset>>2,C$zua=C$zut._vData;C$zui.length+C$zun>C$zua.length?C$zua.set(C$zui.subarray(0,C$zua.length-C$zun),C$zun):C$zua.set(C$zui,C$zun);var C$zuo=C$zut._iData,C$zus=C$zue.indiceOffset,C$zuc=C$zue.vertexOffset;for(var C$zul=0,C$zuh=C$zur.length;C$zul<C$zuh;C$zul++)C$zuo[C$zus++]=C$zuc+C$zur[C$zul]},C$zut.packToDynamicAtlas=function(C$zut,C$zue){C$zue._original||!C$zun.default||!C$zue._texture.packable||(C$zui=C$zun.default.insertSpriteFrame(C$zue))&&C$zue._setDynamicAtlasFrame(C$zui);var C$zui=C$zut._materials[0];C$zui&&C$zui.getProperty("texture")!==C$zue._texture&&(C$zut._vertsDirty=!0,C$zut._updateMaterial())},C$zui=Assembler2D,(C$zut=[{key:"verticesFloats",get:function(){return this.verticesCount*this.floatsPerVert}}])&&_defineProperties(C$zui.prototype,C$zut),C$zur&&_defineProperties(C$zui,C$zur),Assembler2D}(C$zur.default);C$zui.default=C$zut,cc.js.addon(C$zut.prototype,{floatsPerVert:5,verticesCount:4,indicesCount:6,uvOffset:2,colorOffset:4}),cc.Assembler2D=C$zut,C$zue.exports=C$zui.default},{"./assembler":217,"./utils/dynamic-atlas/manager":223,"./webgl/render-data":250}],216:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zut=(C$zut=C$zut("../utils/pool"))&&C$zut.__esModule?C$zut:{default:C$zut};function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zur=0;function getAssemblerId(C$zut){return Object.getOwnPropertyDescriptor(C$zut,"__assemblerId__")||(C$zut.__assemblerId__=++C$zur),C$zut.__assemblerId__}var C$zun=new(function(C$zun){var C$zut;C$zut=C$zun,(C$zue=AssemblerPool).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(AssemblerPool);function AssemblerPool(){var C$zut;for(var C$zue=arguments.length,C$zui=new Array(C$zue),C$zur=0;C$zur<C$zue;C$zur++)C$zui[C$zur]=arguments[C$zur];return(C$zut=C$zun.call.apply(C$zun,[this].concat(C$zui))||this)._pool={},C$zut}var C$zue=AssemblerPool.prototype;return C$zue.put=function(C$zut){var C$zue,C$zui;C$zut&&this.enabled&&(C$zue=getAssemblerId(C$zut.constructor),(C$zui=this._pool)[C$zue]||(C$zui[C$zue]=[]),this.count>this.maxSize||(this._clean(C$zut),C$zui[C$zue].push(C$zut),this.count++))},C$zue.get=function(C$zut){var C$zue;var C$zui,C$zur;return(C$zue=this.enabled?(C$zui=this._pool)[C$zur=getAssemblerId(C$zut)]&&C$zui[C$zur].pop():C$zue)?this.count--:C$zue=new C$zut,C$zue},C$zue.clear=function(){this._pool={},this.count=0},C$zue._clean=function(C$zut){C$zut._renderComp=null},AssemblerPool}(C$zut.default));C$zut.default.register("assembler",C$zun),C$zui.default=C$zun,C$zue.exports=C$zui.default},{"../utils/pool":266}],217:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=C$zut("./webgl/vertex-format");var C$zun=(C$zut=C$zut("./assembler-pool"))&&C$zut.__esModule?C$zut:{default:C$zut};(C$zut=Assembler.prototype).init=function(C$zut){this._renderComp=C$zut},C$zut.updateRenderData=function(C$zut){},C$zut.fillBuffers=function(C$zut,C$zue){},C$zut.getVfmt=function(){return C$zur.vfmtPosUvColor};C$zut=Assembler;function Assembler(){this._extendNative&&this._extendNative()}(C$zui.default=C$zut).register=function(C$zut,C$zue){C$zut.__assembler__=C$zue},C$zut.init=function(C$zut){var C$zue=C$zut.constructor;var C$zui=C$zue.__assembler__;for(;!C$zui;){if(!(C$zue=C$zue.$super))return void cc.warn("Can not find assembler for render component : ["+cc.js.getClassName(C$zut)+"]");C$zui=C$zue.__assembler__}var C$zur;C$zui.getConstructor&&(C$zui=C$zui.getConstructor(C$zut)),C$zut._assembler&&C$zut._assembler.constructor===C$zui||((C$zur=C$zun.default.get(C$zui)).init(C$zut),C$zut._assembler=C$zur)},cc.Assembler=C$zut,C$zue.exports=C$zui.default},{"./assembler-pool":216,"./webgl/vertex-format":252}],218:[function(C$zut,C$zue,C$zui){"use strict";function C$zukd0(C$zut){var C$zue;try{C$zue=C$zut.getContext("2d")}catch(C$zut){return void console.error(C$zut)}this._canvas=C$zut,this._ctx=C$zue,this._caps={},this._stats={drawcalls:0},this._vx=this._vy=this._vw=this._vh=0,this._sx=this._sy=this._sw=this._sh=0}C$zukd0.prototype._restoreTexture=function(C$zut){},C$zukd0.prototype.setViewport=function(C$zut,C$zue,C$zui,C$zur){this._vx===C$zut&&this._vy===C$zue&&this._vw===C$zui&&this._vh===C$zur||(this._vx=C$zut,this._vy=C$zue,this._vw=C$zui,this._vh=C$zur)},C$zukd0.prototype.setScissor=function(C$zut,C$zue,C$zui,C$zur){this._sx===C$zut&&this._sy===C$zue&&this._sw===C$zui&&this._sh===C$zur||(this._sx=C$zut,this._sy=C$zue,this._sw=C$zui,this._sh=C$zur)},C$zukd0.prototype.clear=function(C$zut){var C$zue=this._ctx;C$zue.clearRect(this._vx,this._vy,this._vw,this._vh),!C$zut||0===C$zut[0]&&0===C$zut[1]&&0===C$zut[2]||(C$zue.fillStyle="rgb("+C$zut[0]+","+C$zut[1]+","+C$zut[2]+")",C$zue.globalAlpha=C$zut[3],C$zue.fillRect(this._vx,this._vy,this._vw,this._vh))},C$zukd0.prototype.resetDrawCalls=function(){this._stats.drawcalls=0},C$zukd0.prototype.getDrawCalls=function(){return this._stats.drawcalls},C$zue.exports=C$zukd0},{}],219:[function(C$zut,C$zue,C$zui){"use strict";function C$zuSd0(C$zut,C$zue){this._device=C$zut,this._width=4,this._height=4,this._image=null,C$zue&&(void 0!==C$zue.width&&(this._width=C$zue.width),void 0!==C$zue.height&&(this._height=C$zue.height),this.updateImage(C$zue))}C$zuSd0.prototype.update=function(C$zut){this.updateImage(C$zut)},C$zuSd0.prototype.updateImage=function(C$zut){C$zut.images&&C$zut.images[0]&&((C$zut=C$zut.images[0])&&C$zut!==this._image&&(this._image=C$zut))},C$zuSd0.prototype.destroy=function(){this._image=null},C$zue.exports=C$zuSd0},{}],220:[function(C$zua,C$zut,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zuo=_interopRequireDefault(C$zua("../../renderer/gfx"));var C$zui=_interopRequireDefault(C$zua("../../renderer/core/input-assembler"));var C$zur=_interopRequireDefault(C$zua("../../renderer/core/pass"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}C$zui=cc.renderer={Texture2D:null,InputAssembler:C$zui.default,Pass:C$zur.default,renderEngine:null,canvas:null,device:null,scene:null,drawCalls:0,_handle:null,_cameraNode:null,_camera:null,_forward:null,_flow:null,initWebGL:function(C$zut,C$zue){C$zua("./webgl/assemblers");var C$zui=C$zua("./webgl/model-batcher");this.Texture2D=C$zuo.default.Texture2D,this.canvas=C$zut,this._flow=cc.RenderFlow;var C$zur=C$zua("../../renderer/scene/scene");var C$zun=C$zua("../../renderer/renderers/forward-renderer");this.device=new C$zuo.default.Device(C$zut,C$zue),this.scene=new C$zur;C$zut=this.device;C$zue={defaultTexture:new C$zuo.default.Texture2D(C$zut,{images:[],width:128,height:128,wrapS:C$zuo.default.WRAP_REPEAT,wrapT:C$zuo.default.WRAP_REPEAT,format:C$zuo.default.TEXTURE_FMT_RGB8,mipmap:!1}),programTemplates:[],programChunks:{}};this._forward=new C$zun(this.device,C$zue),this._handle=new C$zui(this.device,this.scene),this._flow.init(this._handle,this._forward)},initCanvas:function(C$zut){var C$zue=C$zua("./canvas");var C$zui=C$zua("./canvas/Texture2D");var C$zur=C$zua("./canvas/Device");this.Device=C$zur,this.Texture2D=C$zui,this.canvas=C$zut,this.device=new C$zur(C$zut),this._camera={a:1,b:0,c:0,d:1,tx:0,ty:0},this._handle=new C$zue.RenderComponentHandle(this.device,this._camera),this._forward=new C$zue.ForwardRenderer,this._flow=cc.RenderFlow,this._flow.init(this._handle,this._forward)},updateCameraViewport:function(){var C$zut;!cc.director||(C$zut=cc.director.getScene())&&C$zut.setScale(1,1,1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(C$zut=cc.view.getViewportRect(),this.device.setViewport(C$zut.x,C$zut.y,C$zut.width,C$zut.height),this._camera.a=cc.view.getScaleX(),this._camera.d=cc.view.getScaleY(),this._camera.tx=C$zut.x,this._camera.ty=C$zut.y+C$zut.height)},render:function(C$zut,C$zue){this.device.resetDrawCalls(),C$zut&&(this._flow.render(C$zut,C$zue),this.drawCalls=this.device.getDrawCalls())},clear:function(){this._handle.reset(),this._forward.clear()}};C$zue.default=C$zui,C$zut.exports=C$zue.default},{"../../renderer/core/input-assembler":302,"../../renderer/core/pass":303,"../../renderer/gfx":312,"../../renderer/renderers/forward-renderer":331,"../../renderer/scene/scene":334,"./canvas":void 0,"./canvas/Device":218,"./canvas/Texture2D":219,"./webgl/assemblers":232,"./webgl/model-batcher":248}],221:[function(C$zue,C$zui,C$zus){"use strict";var C$zut=0;C$zut++;C$zut++;C$zut++;C$zut++;C$zut++;C$zut++;C$zut++;C$zut++;C$zut++;var C$zur=1024;var C$zuu,C$zun;var C$zu_=0;function RenderFlow(){this._func=init,this._next=null}C$zut=RenderFlow.prototype;C$zut._doNothing=function(){},C$zut._localTransform=function(C$zut){C$zut._updateLocalMatrix(),C$zut._renderFlag&=-5,this._next._func(C$zut)},C$zut._worldTransform=function(C$zut){C$zuu.worldMatDirty++;var C$zue=C$zut._matrix;var C$zui=C$zut._trs;var C$zur=C$zue.m;C$zur[12]=C$zui[0],C$zur[13]=C$zui[1],C$zur[14]=C$zui[2],C$zut._mulMat(C$zut._worldMatrix,C$zut._parent._worldMatrix,C$zue),C$zut._renderFlag&=-9,this._next._func(C$zut),C$zuu.worldMatDirty--},C$zut._opacity=function(C$zut){C$zuu.parentOpacityDirty++,C$zut._renderFlag&=-33,this._next._func(C$zut),C$zuu.parentOpacityDirty--},C$zut._color=function(C$zut){var C$zue=C$zut._renderComponent;C$zue&&C$zue._updateColor(),C$zut._renderFlag&=-65,this._next._func(C$zut)},C$zut._updateRenderData=function(C$zut){var C$zue=C$zut._renderComponent;C$zue._assembler.updateRenderData(C$zue),C$zut._renderFlag&=-17,this._next._func(C$zut)},C$zut._render=function(C$zut){var C$zue=C$zut._renderComponent;C$zue._checkBacth(C$zuu,C$zut._cullingMask),C$zue._assembler.fillBuffers(C$zue,C$zuu),this._next._func(C$zut)},C$zut._children=function(C$zut){var C$zue=C$zu_;var C$zui=C$zuu;var C$zur=C$zui.parentOpacity;var C$zun=C$zui.parentOpacity*=C$zut._opacity/255;var C$zua=(C$zui.worldMatDirty?8:0)|(C$zui.parentOpacityDirty?96:0);var C$zuo=C$zut._children;for(var C$zus=0,C$zuh=C$zuo.length;C$zus<C$zuh;C$zus++){var C$zuc=C$zuo[C$zus];var C$zul;C$zuc._renderFlag|=C$zua,C$zuc._activeInHierarchy&&0!==C$zuc._opacity&&(C$zu_=C$zuc._cullingMask=0===C$zuc.groupIndex?C$zue:1<<C$zuc.groupIndex,C$zul=C$zuc._color._val,C$zuc._color._fastSetA(C$zuc._opacity*C$zun),C$zud[C$zuc._renderFlag]._func(C$zuc),C$zuc._color._val=C$zul)}C$zui.parentOpacity=C$zur,this._next._func(C$zut)},C$zut._postRender=function(C$zut){var C$zue=C$zut._renderComponent;C$zue._checkBacth(C$zuu,C$zut._cullingMask),C$zue._assembler.postFillBuffers(C$zue,C$zuu),this._next._func(C$zut)};var C$zua=new RenderFlow;C$zua._func=C$zua._doNothing,C$zua._next=C$zua;var C$zud={};function createFlow(C$zut,C$zue){var C$zui=new RenderFlow;switch(C$zui._next=C$zue||C$zua,C$zut){case 1:case 2:C$zui._func=C$zui._doNothing;break;case 4:C$zui._func=C$zui._localTransform;break;case 8:C$zui._func=C$zui._worldTransform;break;case 32:C$zui._func=C$zui._opacity;break;case 64:C$zui._func=C$zui._color;break;case 16:C$zui._func=C$zui._updateRenderData;break;case 128:C$zui._func=C$zui._render;break;case 256:C$zui._func=C$zui._children;break;case 512:C$zui._func=C$zui._postRender}return C$zui}function init(C$zut){var C$zue=C$zut._renderFlag;(C$zud[C$zue]=function(C$zut){var C$zue=null;var C$zui=C$zur;for(;0<C$zui;)C$zui&C$zut&&(C$zue=createFlow(C$zui,C$zue)),C$zui>>=1;return C$zue}(C$zue))._func(C$zut)}RenderFlow.flows=C$zud,RenderFlow.createFlow=createFlow;var C$zuo=[];RenderFlow.registerValidate=function(C$zut){C$zut._inValidateList||(C$zuo.push(C$zut),C$zut._inValidateList=!0)},RenderFlow.validateRenderers=function(){for(var C$zut=0,C$zue=C$zuo.length;C$zut<C$zue;C$zut++){var C$zui=C$zuo[C$zut];C$zui.isValid&&(C$zui.enabledInHierarchy?C$zui._validateRender():C$zui.disableRender(),C$zui._inValidateList=!1)}C$zuo.length=0},RenderFlow.visitRootNode=function(C$zut){RenderFlow.validateRenderers(),C$zu_=1<<C$zut.groupIndex,8&C$zut._renderFlag?(C$zuu.worldMatDirty++,C$zut._calculWorldMatrix(),C$zut._renderFlag&=-9,C$zud[C$zut._renderFlag]._func(C$zut),C$zuu.worldMatDirty--):C$zud[C$zut._renderFlag]._func(C$zut)},RenderFlow.render=function(C$zut,C$zue){C$zuu.reset(),C$zuu.walking=!0,RenderFlow.visitRootNode(C$zut),C$zuu.terminate(),C$zuu.walking=!1,C$zun.render(C$zuu._renderScene,C$zue)},RenderFlow.init=function(C$zut,C$zue){C$zuu=C$zut,C$zun=C$zue,C$zud[0]=C$zua;for(var C$zui=1;C$zui<C$zur;C$zui++)C$zud[C$zui]=new RenderFlow},RenderFlow.getBachther=function(){return C$zuu},RenderFlow.FLAG_DONOTHING=1,RenderFlow.FLAG_BREAK_FLOW=2,RenderFlow.FLAG_LOCAL_TRANSFORM=4,RenderFlow.FLAG_WORLD_TRANSFORM=8,RenderFlow.FLAG_TRANSFORM=12,RenderFlow.FLAG_OPACITY=32,RenderFlow.FLAG_COLOR=64,RenderFlow.FLAG_OPACITY_COLOR=96,RenderFlow.FLAG_UPDATE_RENDER_DATA=16,RenderFlow.FLAG_RENDER=128,RenderFlow.FLAG_CHILDREN=256,RenderFlow.FLAG_POST_RENDER=512,RenderFlow.FLAG_FINAL=C$zur,C$zui.exports=cc.RenderFlow=RenderFlow},{}],222:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../../../assets/CCRenderTexture");function Atlas(C$zut,C$zue){var C$zui=new C$zur;C$zui.initWithSize(C$zut,C$zue),C$zui.update(),this._texture=C$zui,this._x=2,this._y=2,this._nexty=2,this._width=C$zut,this._height=C$zue,this._innerTextureInfos={},this._innerSpriteFrames=[],this._count=0}Atlas.DEFAULT_HASH=(new C$zur)._getHash(),cc.js.mixin(Atlas.prototype,{insertSpriteFrame:function(C$zut){var C$zue=C$zut._rect,C$zui=C$zut._texture,C$zur=this._innerTextureInfos[C$zui._id];var C$zun=C$zue.x,C$zue=C$zue.y;if(C$zur)C$zun+=C$zur.x,C$zue+=C$zur.y;else{var C$zur=C$zui.width,C$zua=C$zui.height;if(this._x+C$zur+2>this._width&&(this._x=2,this._y=this._nexty),this._y+C$zua+2>this._nexty&&(this._nexty=this._y+C$zua+2),this._nexty>this._height)return null;cc.dynamicAtlasManager.textureBleeding&&((C$zur<=8||C$zua<=8)&&(this._texture.drawTextureAt(C$zui,this._x-1,this._y-1),this._texture.drawTextureAt(C$zui,this._x-1,this._y+1),this._texture.drawTextureAt(C$zui,this._x+1,this._y-1),this._texture.drawTextureAt(C$zui,this._x+1,this._y+1)),this._texture.drawTextureAt(C$zui,this._x-1,this._y),this._texture.drawTextureAt(C$zui,this._x+1,this._y),this._texture.drawTextureAt(C$zui,this._x,this._y-1),this._texture.drawTextureAt(C$zui,this._x,this._y+1)),this._texture.drawTextureAt(C$zui,this._x,this._y),this._innerTextureInfos[C$zui._id]={x:this._x,y:this._y,texture:C$zui},this._count++,C$zun+=this._x,C$zue+=this._y,this._x+=C$zur+2,this._dirty=!0}C$zua={x:C$zun,y:C$zue,texture:this._texture};return this._innerSpriteFrames.push(C$zut),C$zua},update:function(){this._dirty&&(this._texture.update(),this._dirty=!1)},deleteInnerTexture:function(C$zut){C$zut&&this._innerTextureInfos[C$zut._id]&&(delete this._innerTextureInfos[C$zut._id],this._count--)},isEmpty:function(){return this._count<=0},reset:function(){this._x=2,this._y=2,this._nexty=2;var C$zut=this._innerSpriteFrames;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];C$zur.isValid&&C$zur._resetDynamicAtlasFrame()}this._innerSpriteFrames.length=0,this._innerTextureInfos={}},destroy:function(){this.reset(),this._texture.destroy()}}),C$zue.exports=Atlas},{"../../../assets/CCRenderTexture":43}],223:[function(C$zut,C$zul,C$zuh){"use strict";var C$zue=C$zut("./atlas");var C$zur=[];var C$zun=-1;var C$zua=5;var C$zui=2048;var C$zuo=512;var C$zus=!0;function newAtlas(){var C$zut=C$zur[++C$zun];return C$zut||(C$zut=new C$zue(C$zui,C$zui),C$zur.push(C$zut)),C$zut}function beforeSceneLoad(){C$zuu.reset()}var C$zuc=!1;var C$zuu={Atlas:C$zue,get enabled(){return C$zuc},set enabled(C$zut){C$zuc!==C$zut&&(C$zut?(this.reset(),cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,beforeSceneLoad)):cc.director.off(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,beforeSceneLoad),C$zuc=C$zut)},get maxAtlasCount(){return C$zua},set maxAtlasCount(C$zut){C$zua=C$zut},get textureBleeding(){return C$zus},set textureBleeding(C$zut){C$zus=C$zut},get textureSize(){return C$zui},set textureSize(C$zut){C$zui=C$zut},get maxFrameSize(){return C$zuo},set maxFrameSize(C$zut){C$zuo=C$zut},insertSpriteFrame:function(C$zut){if(!C$zuc||C$zun===C$zua||!C$zut||C$zut._original)return null;if(!C$zut._texture.packable)return null;var C$zue=C$zur[C$zun];var C$zui=(C$zue=C$zue||newAtlas()).insertSpriteFrame(C$zut);return C$zui||C$zun===C$zua?C$zui:(C$zue=newAtlas()).insertSpriteFrame(C$zut)},reset:function(){for(var C$zut=0,C$zue=C$zur.length;C$zut<C$zue;C$zut++)C$zur[C$zut].destroy();C$zur.length=0,C$zun=-1},deleteAtlasSpriteFrame:function(C$zut){C$zut._original&&(C$zut=C$zut._original._texture,this.deleteAtlasTexture(C$zut))},deleteAtlasTexture:function(C$zut){if(C$zut)for(var C$zue=C$zur.length-1;0<=C$zue;C$zue--)C$zur[C$zue].deleteInnerTexture(C$zut),C$zur[C$zue].isEmpty()&&(C$zur[C$zue].destroy(),C$zur.splice(C$zue,1),C$zun--)},showDebug:!1,update:function(){if(this.enabled)for(var C$zut=0;C$zut<=C$zun;C$zut++)C$zur[C$zut].update()}};C$zul.exports=cc.dynamicAtlasManager=C$zuu},{"./atlas":222}],224:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("../../assembler-2d"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zuP=C$zut("../../../utils/text-utils");var C$zuo=C$zut("../../../platform/CCMacro");var C$zux=C$zut("../../../components/CCLabel").Overflow;var C$zuA=C$zut("../utils").shareLabelInfo;function C$zuSMM(){this.char="",this.valid=!0,this.x=0,this.y=0,this.line=0,this.hash=""}var C$zud=cc.rect();var C$zuf=null;var C$zuM=[];var C$zup=[];var C$zuS=[];var C$zuv=[];var C$zuR=null;var C$zuI=0;var C$zuB=0;var C$zuy=0;var C$zuD=0;var C$zuL=0;var C$zuT=1;var C$zum=null;var C$zuw=cc.size();var C$zuV="";var C$zus=0;var C$zuc=0;var C$zul=0;var C$zuh=0;var C$zuO=0;var C$zuF=0;var C$zuE=0;var C$zuN=!1;var C$zuk=0;var C$zuz=0;var C$zuG=0;C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=BmfontAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(BmfontAssembler);function BmfontAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=BmfontAssembler.prototype;return C$zui.updateRenderData=function(C$zut){C$zut._vertsDirty&&C$zuf!==C$zut&&(C$zuf=C$zut,this._reserveQuads(C$zut,C$zut.string.toString().length),this._updateFontFamily(C$zut),this._updateProperties(C$zut),this._updateLabelInfo(C$zut),this._updateContent(),this.updateWorldVerts(C$zut),C$zuf._actualFontSize=C$zus,C$zuf.node.setContentSize(C$zuw),C$zuf._vertsDirty=!1,C$zuf=null,this._resetProperties())},C$zui._updateFontScale=function(){C$zuT=C$zus/C$zuc},C$zui._updateFontFamily=function(C$zut){var C$zue=C$zut.font;C$zum=C$zue.spriteFrame,C$zuR=C$zue._fntConfig,C$zuA.fontAtlas=C$zue._fontDefDictionary,this.packToDynamicAtlas(C$zut,C$zum)},C$zui._updateLabelInfo=function(){C$zuA.hash="",C$zuA.margin=0},C$zui._updateProperties=function(C$zut){C$zuV=C$zut.string.toString(),C$zus=C$zut.fontSize,C$zuc=(C$zuR||C$zut).fontSize,C$zul=C$zut.horizontalAlign,C$zuh=C$zut.verticalAlign,C$zuO=C$zut.spacingX,C$zuE=C$zut.overflow,C$zuF=C$zut._lineHeight,C$zuw.width=C$zut.node.width,C$zuw.height=C$zut.node.height,C$zuE===C$zux.NONE?(C$zuN=!1,C$zuw.width+=2*C$zuA.margin,C$zuw.height+=2*C$zuA.margin):C$zuE===C$zux.RESIZE_HEIGHT?(C$zuN=!0,C$zuw.height+=2*C$zuA.margin):C$zuN=C$zut.enableWrapText,C$zuA.lineHeight=C$zuF,C$zuA.fontSize=C$zus,this._setupBMFontOverflowMetrics()},C$zui._resetProperties=function(){C$zum=C$zuR=null,C$zuA.hash="",C$zuA.margin=0},C$zui._updateContent=function(){this._updateFontScale(),this._computeHorizontalKerningForText(),this._alignText()},C$zui._computeHorizontalKerningForText=function(){var C$zut=C$zuV;var C$zue=C$zut.length;var C$zui=C$zuR.kerningDict;var C$zur=C$zuM;var C$zun=-1;for(var C$zua=0;C$zua<C$zue;++C$zua){var C$zuo=C$zut.charCodeAt(C$zua);var C$zus=C$zui[C$zun<<16|65535&C$zuo]||0;C$zur[C$zua]=C$zua<C$zue-1?C$zus:0,C$zun=C$zuo}},C$zui._multilineTextWrap=function(C$zuh){var C$zuu=C$zuV.length;var C$zut=0;var C$zue=0;var C$zu_=0;var C$zud=0;var C$zui=0;var C$zur=0;var C$zun=0;var C$zua;var C$zuo=cc.v2(0,0);for(var C$zus=0;C$zus<C$zuu;){var C$zuc=C$zuV.charAt(C$zus);if("\n"!==C$zuc){var C$zuf=C$zuh(C$zuV,C$zus,C$zuu);var C$zup=C$zur;var C$zum=C$zun;var C$zuv=C$zui;var C$zuy=C$zue;var C$zug=!1;for(var C$zub=0;C$zub<C$zuf;++C$zub){var C$zul=C$zus+C$zub;if("\r"!==(C$zuc=C$zuV.charAt(C$zul)))if(C$zua=C$zuA.fontAtlas.getLetterDefinitionForChar(C$zuc,C$zuA)){var C$zuC=C$zuy+C$zua.offsetX*C$zuT-C$zuA.margin;if(C$zuN&&0<C$zuG&&0<C$zue&&C$zuC+C$zua.w*C$zuT>C$zuG&&!C$zuP.isUnicodeSpace(C$zuc)){C$zuS.push(C$zui),C$zut++,C$zue=C$zui=0,C$zu_-=C$zuF*this._getFontScale()+0,C$zug=!0;break}C$zuo.x=C$zuC,C$zuo.y=C$zu_-C$zua.offsetY*C$zuT+C$zuA.margin,this._recordLetterInfo(C$zuo,C$zuc,C$zul,C$zut),C$zul+1<C$zuM.length&&C$zul<C$zuu-1&&(C$zuy+=C$zuM[C$zul+1]),C$zuy+=C$zua.xAdvance*C$zuT+C$zuO-2*C$zuA.margin,C$zuv=C$zuo.x+C$zua.w*C$zuT-C$zuA.margin,C$zup<C$zuo.y&&(C$zup=C$zuo.y),C$zum>C$zuo.y-C$zua.h*C$zuT&&(C$zum=C$zuo.y-C$zua.h*C$zuT)}else this._recordPlaceholderInfo(C$zul,C$zuc),console.log("Can't find letter definition in texture atlas "+C$zuR.atlasName+" for letter:"+C$zuc);else this._recordPlaceholderInfo(C$zul,C$zuc)}C$zug||(C$zue=C$zuy,C$zur<C$zup&&(C$zur=C$zup),C$zum<C$zun&&(C$zun=C$zum),C$zud<(C$zui=C$zuv)&&(C$zud=C$zui),C$zus+=C$zuf)}else C$zuS.push(C$zui),C$zut++,C$zue=C$zui=0,C$zu_-=C$zuF*this._getFontScale()+0,this._recordPlaceholderInfo(C$zus,C$zuc),C$zus++}return C$zuS.push(C$zui),C$zuB=(C$zuI=C$zut+1)*C$zuF*this._getFontScale(),1<C$zuI&&(C$zuB+=0*(C$zuI-1)),C$zuw.width=C$zuk,C$zuw.height=C$zuz,C$zuk<=0&&(C$zuw.width=parseFloat(C$zud.toFixed(2))+2*C$zuA.margin),C$zuz<=0&&(C$zuw.height=parseFloat(C$zuB.toFixed(2))+2*C$zuA.margin),C$zuD=C$zuw.height,C$zuL=0,C$zuE!==C$zux.CLAMP&&(0<C$zur&&(C$zuD=C$zuw.height+C$zur),C$zun<-C$zuB&&(C$zuL=C$zuB+C$zun)),!0},C$zui._getFirstCharLen=function(){return 1},C$zui._getFontScale=function(){return C$zuE===C$zux.SHRINK?C$zuT:1},C$zui._getFirstWordLen=function(C$zut,C$zue,C$zui){var C$zur=C$zut.charAt(C$zue);if(C$zuP.isUnicodeCJK(C$zur)||"\n"===C$zur||C$zuP.isUnicodeSpace(C$zur))return 1;var C$zun=1;var C$zua=C$zuA.fontAtlas.getLetterDefinitionForChar(C$zur,C$zuA);if(!C$zua)return C$zun;var C$zuo=C$zua.xAdvance*C$zuT+C$zuO;for(var C$zus=C$zue+1;C$zus<C$zui&&(C$zur=C$zut.charAt(C$zus),C$zua=C$zuA.fontAtlas.getLetterDefinitionForChar(C$zur,C$zuA));++C$zus){if(C$zuo+C$zua.offsetX*C$zuT+C$zua.w*C$zuT>C$zuG&&!C$zuP.isUnicodeSpace(C$zur)&&0<C$zuG)return C$zun;if(C$zuo+=C$zua.xAdvance*C$zuT+C$zuO,"\n"===C$zur||C$zuP.isUnicodeSpace(C$zur)||C$zuP.isUnicodeCJK(C$zur))break;C$zun++}return C$zun},C$zui._multilineTextWrapByWord=function(){return this._multilineTextWrap(this._getFirstWordLen)},C$zui._multilineTextWrapByChar=function(){return this._multilineTextWrap(this._getFirstCharLen)},C$zui._recordPlaceholderInfo=function(C$zut,C$zue){var C$zui;C$zut>=C$zup.length&&(C$zui=new C$zuSMM,C$zup.push(C$zui)),C$zup[C$zut].char=C$zue,C$zup[C$zut].hash=C$zue.charCodeAt(0)+C$zuA.hash,C$zup[C$zut].valid=!1},C$zui._recordLetterInfo=function(C$zut,C$zue,C$zui,C$zur){C$zui>=C$zup.length&&(C$zun=new C$zuSMM,C$zup.push(C$zun));var C$zun=C$zue.charCodeAt(0)+C$zuA.hash;C$zup[C$zui].line=C$zur,C$zup[C$zui].char=C$zue,C$zup[C$zui].hash=C$zun,C$zup[C$zui].valid=C$zuA.fontAtlas.getLetter(C$zun).valid,C$zup[C$zui].x=C$zut.x,C$zup[C$zui].y=C$zut.y},C$zui._alignText=function(){C$zuB=0,C$zuS.length=0,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),C$zuE===C$zux.SHRINK&&0<C$zus&&this._isVerticalClamp()&&this._shrinkLabelToContentSize(this._isVerticalClamp),this._updateQuads()||C$zuE===C$zux.SHRINK&&this._shrinkLabelToContentSize(this._isHorizontalClamp)},C$zui._scaleFontSizeDown=function(C$zut){var C$zue=!0;C$zut||(C$zue=!(C$zut=.1)),C$zus=C$zut,C$zue&&this._updateContent()},C$zui._shrinkLabelToContentSize=function(C$zut){var C$zue,C$zui=0,C$zur=0|C$zus;for(;C$zui<C$zur;){var C$zun=C$zue=C$zui+C$zur+1>>1;if(C$zun<=0)break;C$zuT=C$zun/C$zuc,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),C$zut()?C$zur=C$zue-1:C$zui=C$zue}var C$zua=C$zui;0<=C$zua&&this._scaleFontSizeDown(C$zua)},C$zui._isVerticalClamp=function(){return C$zuB>C$zuw.height},C$zui._isHorizontalClamp=function(){var C$zut=!1;for(var C$zue=0,C$zui=C$zuV.length;C$zue<C$zui;++C$zue){var C$zur=C$zup[C$zue];if(C$zur.valid){var C$zun=C$zuA.fontAtlas.getLetter(C$zur.hash);C$zun=C$zur.x+C$zun.w*C$zuT;C$zur=C$zur.line;if(0<C$zuk)if(C$zuN){if(C$zuS[C$zur]>C$zuw.width&&(C$zun>C$zuw.width||C$zun<0)){C$zut=!0;break}}else if(C$zun>C$zuw.width){C$zut=!0;break}}}return C$zut},C$zui._isHorizontalClamped=function(C$zut,C$zue){C$zue=C$zuS[C$zue];C$zut=C$zut>C$zuw.width||C$zut<0;return(!C$zuN||C$zue>C$zuw.width)&&C$zut},C$zui._updateQuads=function(){var C$zut=C$zum?C$zum._texture:C$zuA.fontAtlas.getTexture();var C$zue=C$zuf.node;this.verticesCount=this.indicesCount=0,this._renderData&&(this._renderData.dataLength=0);var C$zui=C$zuw,C$zuh=C$zue._anchorPoint.x*C$zui.width,C$zuu=C$zue._anchorPoint.y*C$zui.height;var C$zur=!0;for(var C$zun=0,C$zu_=C$zuV.length;C$zun<C$zu_;++C$zun){var C$zua=C$zup[C$zun];if(C$zua.valid){var C$zuo=C$zuA.fontAtlas.getLetter(C$zua.hash);C$zud.height=C$zuo.h,C$zud.width=C$zuo.w,C$zud.x=C$zuo.u,C$zud.y=C$zuo.v;var C$zus=C$zua.y+C$zuy;0<C$zuz&&(C$zuD<C$zus&&(C$zuc=C$zus-C$zuD,C$zud.y+=C$zuc,C$zud.height-=C$zuc,C$zus-=C$zuc),C$zus-C$zuo.h*C$zuT<C$zuL&&C$zuE===C$zux.CLAMP&&(C$zud.height=C$zus<C$zuL?0:(C$zus-C$zuL)/C$zuT));var C$zuc=C$zua.line;var C$zul=C$zua.x+C$zuo.w/2*C$zuT+C$zuv[C$zuc];if(0<C$zuk&&this._isHorizontalClamped(C$zul,C$zuc))if(C$zuE===C$zux.CLAMP)C$zud.width=0;else if(C$zuE===C$zux.SHRINK){if(C$zuw.width>C$zuo.w){C$zur=!1;break}C$zud.width=0}0<C$zud.height&&0<C$zud.width&&(C$zul=this._determineRect(C$zud),C$zuo=C$zua.x+C$zuv[C$zua.line],this.appendQuad(C$zuf,C$zut,C$zud,C$zul,C$zuo-C$zuh,C$zus-C$zuu,C$zuT))}}return this._quadsUpdated(C$zuf),C$zur},C$zui._determineRect=function(C$zut){var C$zue=C$zum.isRotated();var C$zui=C$zum._originalSize;var C$zur=C$zum._rect;var C$zun=C$zum._offset;var C$zua=C$zun.x+(C$zui.width-C$zur.width)/2;C$zun=C$zun.y-(C$zui.height-C$zur.height)/2;return C$zue?(C$zui=C$zut.x,C$zut.x=C$zur.x+C$zur.height-C$zut.y-C$zut.height-C$zun,C$zut.y=C$zui+C$zur.y-C$zua,C$zut.y<0&&(C$zut.height=C$zut.height+C$zun)):(C$zut.x+=C$zur.x-C$zua,C$zut.y+=C$zur.y+C$zun),C$zue},C$zui._computeAlignmentOffset=function(){switch(C$zuv.length=0,C$zul){case C$zuo.TextAlignment.LEFT:for(var C$zut=0;C$zut<C$zuI;++C$zut)C$zuv.push(0);break;case C$zuo.TextAlignment.CENTER:for(var C$zue=0,C$zui=C$zuS.length;C$zue<C$zui;C$zue++)C$zuv.push((C$zuw.width-C$zuS[C$zue])/2);break;case C$zuo.TextAlignment.RIGHT:for(var C$zur=0,C$zun=C$zuS.length;C$zur<C$zun;C$zur++)C$zuv.push(C$zuw.width-C$zuS[C$zur])}var C$zua;C$zuy=C$zuw.height,C$zuh!==C$zuo.VerticalTextAlignment.TOP&&(C$zua=C$zuw.height-C$zuB+C$zuF*this._getFontScale()-C$zuc*C$zuT,C$zuh===C$zuo.VerticalTextAlignment.BOTTOM?C$zuy-=C$zua:C$zuy-=C$zua/2)},C$zui._setupBMFontOverflowMetrics=function(){var C$zut=C$zuw.width,C$zue=C$zuw.height;C$zuE===C$zux.RESIZE_HEIGHT&&(C$zue=0),C$zuE===C$zux.NONE&&(C$zue=C$zut=0),C$zuz=C$zue,C$zuG=C$zuk=C$zut},C$zui.updateWorldVerts=function(){},C$zui.appendQuad=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){},C$zui._quadsUpdated=function(C$zut){},C$zui._reserveQuads=function(){},BmfontAssembler}(C$zur.default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../components/CCLabel":80,"../../../platform/CCMacro":194,"../../../utils/text-utils":271,"../../assembler-2d":215,"../utils":228}],225:[function(C$zut,C$zue,C$zui){"use strict";function LabelFrame(){this._rect=null,this.uv=[],this._texture=null,this._original=null}LabelFrame.prototype={constructor:LabelFrame,getRect:function(){return cc.rect(this._rect)},setRect:function(C$zut){this._rect=C$zut,this._texture&&this._calculateUV()},_setDynamicAtlasFrame:function(C$zut){C$zut&&(this._original={_texture:this._texture,_x:this._rect.x,_y:this._rect.y},this._texture=C$zut.texture,this._rect.x=C$zut.x,this._rect.y=C$zut.y,this._calculateUV())},_resetDynamicAtlasFrame:function(){this._original&&(this._rect.x=this._original._x,this._rect.y=this._original._y,this._texture=this._original._texture,this._original=null,this._calculateUV())},_refreshTexture:function(C$zut){this._texture=C$zut,this._rect=cc.rect(0,0,C$zut.width,C$zut.height),this._calculateUV()},_calculateUV:function(){var C$zut=this._rect,C$zue=this._texture,C$zui=this.uv,C$zur=C$zue.width,C$zue=C$zue.height;var C$zun=0===C$zur?0:C$zut.x/C$zur;C$zur=0===C$zur?0:(C$zut.x+C$zut.width)/C$zur;var C$zua=0===C$zue?0:(C$zut.y+C$zut.height)/C$zue;C$zut=0===C$zue?0:C$zut.y/C$zue;C$zui[0]=C$zun,C$zui[1]=C$zua,C$zui[2]=C$zur,C$zui[3]=C$zua,C$zui[4]=C$zun,C$zui[5]=C$zut,C$zui[6]=C$zur,C$zui[7]=C$zut}},C$zue.exports=LabelFrame},{}],226:[function(C$zut,C$zuc,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;C$zui=(C$zui=C$zut("../../webgl/assemblers/label/2d/bmfont"))&&C$zui.__esModule?C$zui:{default:C$zui};var C$zui;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zur=C$zut("../../../components/CCLabel");var C$zul=C$zut("../../../components/CCLabelOutline");var C$zus=C$zut("../../../utils/text-utils");var C$zun=C$zut("../../../components/CCComponent");var C$zuh=C$zut("../../../assets/CCRenderTexture");var C$zuu=cc.js.isChildClassOf(C$zul,C$zun);var C$zu_=C$zut("../utils").getFontFamily;var C$zua=C$zut("../utils").shareLabelInfo;var C$zud=cc.BitmapFont.FontLetterDefinition;var C$zuf=cc.BitmapFont.FontAtlas;var C$zup=cc.Color.WHITE;var C$zum=(1/255).toFixed(3);function LetterTexture(C$zut,C$zue){this._texture=null,this._labelInfo=C$zue,this._char=C$zut,this._hash=null,this._data=null,this._canvas=null,this._context=null,this._width=0,this._height=0,this._offsetY=0,this._hash=C$zut.charCodeAt(0)+C$zue.hash}function LetterAtlas(C$zut,C$zue){var C$zui=new C$zuh;C$zui.initWithSize(C$zut,C$zue),C$zui.update(),this._fontDefDictionary=new C$zuf(C$zui),this._x=0,this._y=0,this._nexty=0,this._width=C$zut,this._height=C$zue,cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,this.beforeSceneLoad,this)}LetterTexture.prototype={constructor:LetterTexture,updateRenderData:function(){this._updateProperties(),this._updateTexture()},_updateProperties:function(){this._texture=new cc.Texture2D,this._data=C$zur._canvasPool.get(),this._canvas=this._data.canvas,this._context=this._data.context,this._context.font=this._labelInfo.fontDesc;var C$zut=C$zus.safeMeasureText(this._context,this._char,this._labelInfo.fontDesc);var C$zue=2*this._labelInfo.margin+2;this._width=parseFloat(C$zut.toFixed(2))+C$zue,this._height=(1+C$zus.BASELINE_RATIO)*this._labelInfo.fontSize+C$zue,this._offsetY=-this._labelInfo.fontSize*C$zus.BASELINE_RATIO/2,this._canvas.width!==this._width&&(this._canvas.width=this._width),this._canvas.height!==this._height&&(this._canvas.height=this._height),this._texture.initWithElement(this._canvas)},_updateTexture:function(){var C$zut=this._context;var C$zue=this._labelInfo,C$zui=this._canvas.width,C$zur=this._canvas.height;var C$zun=C$zui/2;var C$zua=C$zur/2+this._labelInfo.fontSize*C$zus.MIDDLE_RATIO;var C$zuo=C$zue.color;C$zut.textAlign="center",C$zut.textBaseline="alphabetic",C$zut.clearRect(0,0,C$zui,C$zur),C$zut.fillStyle="rgba("+C$zuo.r+", "+C$zuo.g+", "+C$zuo.b+", "+C$zum+")",C$zut.fillRect(0,0,C$zui,C$zur),C$zut.font=C$zue.fontDesc,C$zut.lineJoin="round",C$zut.fillStyle="rgba("+C$zuo.r+", "+C$zuo.g+", "+C$zuo.b+", 1)",C$zue.isOutlined&&0<C$zue.margin&&(C$zui=C$zue.out||C$zup,C$zut.strokeStyle="rgba("+C$zui.r+", "+C$zui.g+", "+C$zui.b+", "+C$zui.a/255+")",C$zut.lineWidth=2*C$zue.margin,C$zut.strokeText(this._char,C$zun,C$zua)),C$zut.fillText(this._char,C$zun,C$zua),this._texture.handleLoadedTexture()},destroy:function(){this._texture.destroy(),this._texture=null,C$zur._canvasPool.put(this._data)}},cc.js.mixin(LetterAtlas.prototype,{insertLetterTexture:function(C$zut){var C$zue=C$zut._texture;var C$zui=C$zue.width,C$zur=C$zue.height;if(this._x+C$zui+0>this._width&&(this._x=0,this._y=this._nexty),this._y+C$zur>this._nexty&&(this._nexty=this._y+C$zur+0),this._nexty>this._height)return null;this._fontDefDictionary._texture.drawTextureAt(C$zue,this._x,this._y),this._dirty=!0;C$zur=new C$zud;return C$zur.u=this._x+1,C$zur.v=this._y+1,C$zur.texture=this._fontDefDictionary._texture,C$zur.valid=!0,C$zur.w=C$zut._width-2,C$zur.h=C$zut._height-2,C$zur.xAdvance=C$zur.w,C$zur.offsetY=C$zut._offsetY,this._x+=C$zui+0,this._fontDefDictionary.addLetterDefinitions(C$zut._hash,C$zur),C$zur},update:function(){this._dirty&&(this._fontDefDictionary._texture.update(),this._dirty=!1)},reset:function(){this._x=0,this._y=0,this._nexty=0;var C$zut=this._fontDefDictionary._letterDefinitions;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];C$zur.isValid&&C$zur.destroy()}this._fontDefDictionary.clear()},destroy:function(){this.reset(),this._fontDefDictionary._texture.destroy(),this._fontDefDictionary._texture=null},beforeSceneLoad:function(){this.clearAllCache()},clearAllCache:function(){this.destroy();var C$zut=new C$zuh;C$zut.initWithSize(this._width,this._height),C$zut.update(),this._fontDefDictionary._texture=C$zut},getLetter:function(C$zut){return this._fontDefDictionary._letterDefinitions[C$zut]},getTexture:function(){return this._fontDefDictionary.getTexture()},getLetterDefinitionForChar:function(C$zut,C$zue){var C$zui=C$zut.charCodeAt(0)+C$zue.hash;C$zui=this._fontDefDictionary._letterDefinitions[C$zui];return C$zui||((C$zut=new LetterTexture(C$zut,C$zue)).updateRenderData(),C$zui=this.insertLetterTexture(C$zut),C$zut.destroy()),C$zui}});var C$zuo=null;C$zun=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=LetterFontAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(LetterFontAssembler);function LetterFontAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=LetterFontAssembler.prototype;return C$zui._getAssemblerData=function(){return C$zuo||(C$zuo=new LetterAtlas(2048,2048),cc.Label._shareAtlas=C$zuo),C$zuo.getTexture()},C$zui._updateFontFamily=function(C$zut){C$zua.fontAtlas=C$zuo,C$zua.fontFamily=C$zu_(C$zut);var C$zue=C$zuu&&C$zut.getComponent(C$zul);C$zue&&C$zue.enabled?(C$zua.isOutlined=!0,C$zua.margin=C$zue.width,C$zua.out=C$zue.color.clone(),C$zua.out.a=C$zue.color.a*C$zut.node.color.a/255):(C$zua.isOutlined=!1,C$zua.margin=0)},C$zui._updateLabelInfo=function(C$zut){var C$zue,C$zui;C$zua.fontDesc=this._getFontDesc(),C$zua.color=C$zut.node.color,C$zua.hash=(C$zue=(C$zut=C$zua).color.toHEX("#rrggbb"),C$zui="",C$zut.isOutlined&&0<C$zut.margin&&(C$zui=C$zui+C$zut.margin+C$zut.out.toHEX("#rrggbb")),""+C$zut.fontSize+C$zut.fontFamily+C$zue+C$zui)},C$zui._getFontDesc=function(){var C$zut=C$zua.fontSize.toString()+"px ";return C$zut+=C$zua.fontFamily},C$zui._computeHorizontalKerningForText=function(){},C$zui._determineRect=function(C$zut){return!1},LetterFontAssembler}(C$zui.default);C$zue.default=C$zun,C$zuc.exports=C$zue.default},{"../../../assets/CCRenderTexture":43,"../../../components/CCComponent":78,"../../../components/CCLabel":80,"../../../components/CCLabelOutline":81,"../../../utils/text-utils":271,"../../webgl/assemblers/label/2d/bmfont":233,"../utils":228}],227:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("../../assembler-2d"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zup=C$zut("../../../utils/text-utils");var C$zud=C$zut("../../../platform/CCMacro");var C$zun=C$zut("../../../components/CCLabel");var C$zua=C$zut("../../../components/CCLabelOutline");var C$zuo=C$zut("../../../components/CCLabelShadow");var C$zuC=C$zun.Overflow;var C$zus=C$zut("../utils").deleteFromDynamicAtlas;var C$zuc=C$zut("../utils").getFontFamily;var C$zuf=(1/255).toFixed(3);var C$zum=null;var C$zul=null;var C$zux=null;var C$zuv="";var C$zuA="";var C$zuy=0;var C$zuS=0;var C$zuh=[];var C$zug=cc.Size.ZERO;var C$zuT=0;var C$zuw=0;var C$zuE=0;var C$zuP=null;var C$zuM="";var C$zuR=C$zuC.NONE;var C$zuI=!1;var C$zuu=null;var C$zuB=cc.Color.WHITE;var C$zu_=null;var C$zuD=cc.Color.BLACK;var C$zub=cc.rect();var C$zuL=cc.Size.ZERO;var C$zuV=cc.Size.ZERO;var C$zuO=!1;var C$zuF=!1;var C$zuN=!1;var C$zuk=0;var C$zuz=cc.Vec2.ZERO;var C$zuG;var C$zuU;C$zut=function(C$zue){var C$zut;C$zut=C$zue,(C$zui=TTFAssembler).prototype=Object.create(C$zut.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zut;_createSuper(TTFAssembler);function TTFAssembler(){return C$zue.apply(this,arguments)||this}var C$zui=TTFAssembler.prototype;return C$zui._getAssemblerData=function(){return(C$zuU=C$zun._canvasPool.get()).canvas.width=C$zuU.canvas.height=1,C$zuU},C$zui._resetAssemblerData=function(C$zut){C$zut&&C$zun._canvasPool.put(C$zut)},C$zui.updateRenderData=function(C$zut){C$zue.prototype.updateRenderData.call(this,C$zut),C$zut._vertsDirty&&(this._updateFontFamily(C$zut),this._updateProperties(C$zut),this._calculateLabelFont(),this._calculateSplitedStrings(),this._updateLabelDimensions(),this._calculateTextBaseline(),this._updateTexture(C$zut),this._calDynamicAtlas(C$zut),C$zut._actualFontSize=C$zuy,C$zut.node.setContentSize(C$zuV),this.updateVerts(C$zut),C$zut._vertsDirty=!1,C$zux=C$zul=C$zum=null)},C$zui.updateVerts=function(){},C$zui._updatePaddingRect=function(){var C$zut=0,C$zue=0,C$zui=0,C$zur=0;var C$zun=0;C$zuL.width=C$zuL.height=0,C$zuu&&(C$zut=C$zue=C$zui=C$zur=C$zun=C$zuu.width,C$zuL.width=C$zuL.height=2*C$zun),C$zu_&&(C$zun=C$zu_.blur+C$zun,C$zui=Math.max(C$zui,-C$zu_._offset.x+C$zun),C$zur=Math.max(C$zur,C$zu_._offset.x+C$zun),C$zut=Math.max(C$zut,C$zu_._offset.y+C$zun),C$zue=Math.max(C$zue,-C$zu_._offset.y+C$zun)),C$zuF&&(C$zur+=C$zun=C$zuS*Math.tan(.20943951),C$zuL.width+=C$zun),C$zub.x=C$zui,C$zub.y=C$zut,C$zub.width=C$zui+C$zur,C$zub.height=C$zut+C$zue},C$zui._updateFontFamily=function(C$zut){C$zuM=C$zuc(C$zut)},C$zui._updateProperties=function(C$zut){var C$zue=C$zut._assemblerData;C$zum=C$zue.context,C$zul=C$zue.canvas,C$zux=(C$zut._frame._original||C$zut._frame)._texture,C$zuA=C$zut.string.toString(),C$zuy=C$zut._fontSize,C$zuS=C$zuy,C$zuk=C$zut.underlineHeight||C$zuS/8,C$zuR=C$zut.overflow,C$zug.width=C$zut.node.width,C$zug.height=C$zut.node.height,C$zuV=C$zut.node.getContentSize(),C$zuT=C$zut._lineHeight,C$zuw=C$zut.horizontalAlign,C$zuE=C$zut.verticalAlign,C$zuP=C$zut.node.color,C$zuO=C$zut.enableBold,C$zuF=C$zut.enableItalic,C$zuN=C$zut.enableUnderline,C$zuI=C$zuR!==C$zuC.NONE&&(C$zuR===C$zuC.RESIZE_HEIGHT||C$zut.enableWrapText),(C$zuu=(C$zuu=C$zua&&C$zut.getComponent(C$zua))&&C$zuu.enabled&&0<C$zuu.width?C$zuu:null)&&C$zuB.set(C$zuu.color),(C$zu_=(C$zu_=C$zuo&&C$zut.getComponent(C$zuo))&&C$zu_.enabled?C$zu_:null)&&(C$zuD.set(C$zu_.color),C$zuD.a=C$zuD.a*C$zut.node.color.a/255),this._updatePaddingRect()},C$zui._calculateFillTextStartPosition=function(){var C$zut=0;C$zuw===C$zud.TextAlignment.RIGHT?C$zut=C$zug.width-C$zub.width:C$zuw===C$zud.TextAlignment.CENTER&&(C$zut=(C$zug.width-C$zub.width)/2);var C$zue=this._getLineHeight()*(C$zuh.length-1);var C$zui=C$zuy*(1-C$zup.BASELINE_RATIO/2);return C$zuE!==C$zud.VerticalTextAlignment.TOP&&(C$zue=C$zue+C$zub.height+C$zuy-C$zug.height,C$zuE===C$zud.VerticalTextAlignment.BOTTOM?C$zui-=C$zue+=C$zup.BASELINE_RATIO/2*C$zuy:C$zui-=C$zue/2),C$zui+=C$zup.BASELINE_OFFSET*C$zuy,cc.v2(C$zut+C$zub.x,C$zui+C$zub.y)},C$zui._setupOutline=function(){C$zum.strokeStyle="rgba("+C$zuB.r+", "+C$zuB.g+", "+C$zuB.b+", "+C$zuB.a/255+")",C$zum.lineWidth=2*C$zuu.width},C$zui._setupShadow=function(){C$zum.shadowColor="rgba("+C$zuD.r+", "+C$zuD.g+", "+C$zuD.b+", "+C$zuD.a/255+")",C$zum.shadowBlur=C$zu_.blur,C$zum.shadowOffsetX=C$zu_.offset.x,C$zum.shadowOffsetY=-C$zu_.offset.y},C$zui._drawUnderline=function(C$zut){C$zuu&&(this._setupOutline(),C$zum.strokeRect(C$zuz.x,C$zuz.y,C$zut,C$zuk)),C$zum.lineWidth=C$zuk,C$zum.fillStyle="rgba("+C$zuP.r+", "+C$zuP.g+", "+C$zuP.b+", "+C$zuP.a/255+")",C$zum.fillRect(C$zuz.x,C$zuz.y,C$zut,C$zuk)},C$zui._updateTexture=function(){C$zum.clearRect(0,0,C$zul.width,C$zul.height);var C$zut=C$zuu?C$zuB:C$zuP;C$zum.fillStyle="rgba("+C$zut.r+", "+C$zut.g+", "+C$zut.b+", "+C$zuf+")",C$zum.fillRect(0,0,C$zul.width,C$zul.height),C$zum.font=C$zuv;var C$zue=this._calculateFillTextStartPosition();var C$zui=this._getLineHeight();C$zum.lineJoin="round",C$zum.fillStyle="rgba("+C$zuP.r+", "+C$zuP.g+", "+C$zuP.b+", 1)";var C$zur=1<C$zuh.length;var C$zun=this._measureText(C$zum,C$zuv);var C$zua=0,C$zuo=0;C$zu_&&this._setupShadow(),C$zuu&&0<C$zuu.width&&this._setupOutline();for(var C$zus=0;C$zus<C$zuh.length;++C$zus)C$zua=C$zue.x,C$zuo=C$zue.y+C$zus*C$zui,C$zu_&&C$zur&&(C$zuu&&0<C$zuu.width&&C$zum.strokeText(C$zuh[C$zus],C$zua,C$zuo),C$zum.fillText(C$zuh[C$zus],C$zua,C$zuo)),C$zuN&&(C$zuG=C$zun(C$zuh[C$zus]),C$zuw===C$zud.TextAlignment.RIGHT?C$zuz.x=C$zue.x-C$zuG:C$zuw===C$zud.TextAlignment.CENTER?C$zuz.x=C$zue.x-C$zuG/2:C$zuz.x=C$zue.x,C$zuz.y=C$zuo+C$zuS/8,this._drawUnderline(C$zuG));C$zu_&&C$zur&&(C$zum.shadowColor="transparent");for(var C$zuc=0;C$zuc<C$zuh.length;++C$zuc)C$zua=C$zue.x,C$zuo=C$zue.y+C$zuc*C$zui,C$zuu&&0<C$zuu.width&&C$zum.strokeText(C$zuh[C$zuc],C$zua,C$zuo),C$zum.fillText(C$zuh[C$zuc],C$zua,C$zuo);C$zu_&&(C$zum.shadowColor="transparent"),C$zux.handleLoadedTexture()},C$zui._calDynamicAtlas=function(C$zut){var C$zue;C$zut.cacheMode===C$zun.CacheMode.BITMAP&&(C$zue=C$zut._frame,C$zus(C$zut,C$zue),C$zue._original||C$zue.setRect(cc.rect(0,0,C$zul.width,C$zul.height)),this.packToDynamicAtlas(C$zut,C$zue))},C$zui._updateLabelDimensions=function(){var C$zut=C$zuA.split("\n");if(C$zuR===C$zuC.RESIZE_HEIGHT){var C$zue=(C$zuh.length+C$zup.BASELINE_RATIO)*this._getLineHeight();C$zug.height=C$zue+C$zub.height,C$zuV.height=C$zue+C$zuL.height}else if(C$zuR===C$zuC.NONE){C$zuh=C$zut;var C$zui=0;C$zue=0;for(var C$zur=0;C$zur<C$zut.length;++C$zur){var C$zun=C$zup.safeMeasureText(C$zum,C$zut[C$zur],C$zuv);C$zui=C$zun<C$zui?C$zui:C$zun}C$zue=(C$zuh.length+C$zup.BASELINE_RATIO)*this._getLineHeight();var C$zua=parseFloat(C$zui.toFixed(2));C$zue=parseFloat(C$zue.toFixed(2));C$zug.width=C$zua+C$zub.width,C$zug.height=C$zue+C$zub.height,C$zuV.width=C$zua+C$zuL.width,C$zuV.height=C$zue+C$zuL.height}C$zug.width=Math.min(C$zug.width,2048),C$zug.height=Math.min(C$zug.height,2048),C$zul.width!==C$zug.width&&(C$zul.width=C$zug.width),C$zul.height!==C$zug.height&&(C$zul.height=C$zug.height)},C$zui._calculateTextBaseline=function(){var C$zut;C$zut=C$zuw===C$zud.TextAlignment.RIGHT?"right":C$zuw===C$zud.TextAlignment.CENTER?"center":"left",C$zum.textAlign=C$zut,C$zum.textBaseline="alphabetic"},C$zui._calculateSplitedStrings=function(){var C$zut=C$zuA.split("\n");if(C$zuI){C$zuh=[];var C$zue=C$zuV.width;for(var C$zui=0;C$zui<C$zut.length;++C$zui){var C$zur=C$zup.safeMeasureText(C$zum,C$zut[C$zui],C$zuv);C$zur=C$zup.fragmentText(C$zut[C$zui],C$zur,C$zue,this._measureText(C$zum,C$zuv));C$zuh=C$zuh.concat(C$zur)}}else C$zuh=C$zut},C$zui._getFontDesc=function(){var C$zut=C$zuy.toString()+"px ";return C$zut+=C$zuM,C$zuO&&(C$zut="bold "+C$zut),C$zut=C$zuF?"italic "+C$zut:C$zut},C$zui._getLineHeight=function(){return 0|(0===C$zuT?C$zuy:C$zuT*C$zuy/C$zuS)},C$zui._calculateParagraphLength=function(C$zut,C$zue){var C$zui=[];for(var C$zur=0;C$zur<C$zut.length;++C$zur){var C$zun=C$zup.safeMeasureText(C$zue,C$zut[C$zur],C$zuv);C$zui.push(C$zun)}return C$zui},C$zui._measureText=function(C$zue,C$zui){return function(C$zut){return C$zup.safeMeasureText(C$zue,C$zut,C$zui)}},C$zui._calculateLabelFont=function(){if(C$zuv=this._getFontDesc(),C$zum.font=C$zuv,C$zuR===C$zuC.SHRINK){var C$zut=C$zuA.split("\n");var C$zuh=this._calculateParagraphLength(C$zut,C$zum);var C$zue=0;var C$zui=0;var C$zur=0;if(C$zuI){var C$zun=C$zuV.width;var C$zua=C$zuV.height;if(C$zun<0||C$zua<0)return C$zuv=this._getFontDesc(),void(C$zum.font=C$zuv);C$zui=C$zua+1,C$zur=C$zun+1;var C$zuo;var C$zus,C$zuc=0,C$zul=0|C$zuy+1;for(;C$zuc<C$zul;){if((C$zus=C$zuc+C$zul+1>>1)<=0){cc.logID(4003);break}for(C$zuy=C$zus,C$zuv=this._getFontDesc(),C$zum.font=C$zuv,C$zue=C$zui=0;C$zue<C$zut.length;++C$zue){var C$zuu=0;var C$zu_=C$zup.safeMeasureText(C$zum,C$zut[C$zue],C$zuv);for(C$zuo=C$zup.fragmentText(C$zut[C$zue],C$zu_,C$zun,this._measureText(C$zum,C$zuv));C$zuu<C$zuo.length;)C$zur=C$zup.safeMeasureText(C$zum,C$zuo[C$zuu],C$zuv),C$zui+=this._getLineHeight(),++C$zuu}C$zua<C$zui?C$zul=C$zus-1:C$zuc=C$zus}0===C$zuc?cc.logID(4003):(C$zuy=C$zuc,C$zuv=this._getFontDesc(),C$zum.font=C$zuv)}else{for(C$zui=C$zut.length*this._getLineHeight(),C$zue=0;C$zue<C$zut.length;++C$zue)C$zur<C$zuh[C$zue]&&(C$zur=C$zuh[C$zue]);var C$zud=(C$zug.width-C$zub.width)/C$zur;var C$zuf=C$zug.height/C$zui;C$zuy=C$zuS*Math.min(1,C$zud,C$zuf)|0,C$zuv=this._getFontDesc(),C$zum.font=C$zuv}}},TTFAssembler}(C$zur.default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../components/CCLabel":80,"../../../components/CCLabelOutline":81,"../../../components/CCLabelShadow":82,"../../../platform/CCMacro":194,"../../../utils/text-utils":271,"../../assembler-2d":215,"../utils":228}],228:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./dynamic-atlas/manager");C$zut=cc.Color.WHITE;C$zue.exports={deleteFromDynamicAtlas:function(C$zut,C$zue){C$zue&&C$zue._original&&C$zur&&(C$zur.deleteAtlasSpriteFrame(C$zue),C$zue._resetDynamicAtlasFrame())},getFontFamily:function(C$zui){return C$zui.useSystemFont?C$zui.fontFamily||"Arial":C$zui.font?C$zui.font._nativeAsset||(cc.loader.load(C$zui.font.nativeUrl,function(C$zut,C$zue){C$zui.font._nativeAsset=C$zue,C$zui.setVertsDirty()}),"Arial"):"Arial"},shareLabelInfo:{fontAtlas:null,fontSize:0,lineHeight:0,hAlign:0,vAlign:0,hash:"",fontFamily:"",fontDesc:"Arial",color:C$zut,isOutlined:!1,out:C$zut,margin:0}}},{"./dynamic-atlas/manager":223}],229:[function(C$zut,C$zue,C$zui){"use strict";function earcut(C$zut,C$zue,C$zui){C$zui=C$zui||2;var C$zuh=C$zue&&C$zue.length,C$zuu=C$zuh?C$zue[0]*C$zui:C$zut.length,C$zur=linkedList(C$zut,0,C$zuu,C$zui,!0),C$zu_=[];if(!C$zur)return C$zu_;var C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zud;if(C$zuh&&(C$zur=function(C$zut,C$zue,C$zui,C$zur){var C$zun,C$zua,C$zuo,C$zus,C$zuc=[];for(C$zun=0,C$zua=C$zue.length;C$zun<C$zua;C$zun++)C$zus=C$zue[C$zun]*C$zur,C$zuo=C$zun<C$zua-1?C$zue[C$zun+1]*C$zur:C$zut.length,(C$zus=linkedList(C$zut,C$zus,C$zuo,C$zur,!1))===C$zus.next&&(C$zus.steiner=!0),C$zuc.push(function(C$zut){var C$zue=C$zut,C$zui=C$zut;for(;C$zue.x<C$zui.x&&(C$zui=C$zue),C$zue=C$zue.next,C$zue!==C$zut;);return C$zui}(C$zus));for(C$zuc.sort(compareX),C$zun=0;C$zun<C$zuc.length;C$zun++)!function(C$zut,C$zue){(C$zue=function(C$zut,C$zuh){var C$zue,C$zui=C$zuh,C$zur=C$zut.x,C$zun=C$zut.y,C$zua=-1/0;do{if(C$zun<=C$zui.y&&C$zun>=C$zui.next.y){var C$zuo=C$zui.x+(C$zun-C$zui.y)*(C$zui.next.x-C$zui.x)/(C$zui.next.y-C$zui.y);if(C$zuo<=C$zur&&C$zua<C$zuo){if((C$zua=C$zuo)===C$zur){if(C$zun===C$zui.y)return C$zui;if(C$zun===C$zui.next.y)return C$zui.next}C$zue=C$zui.x<C$zui.next.x?C$zui:C$zui.next}}}while(C$zui=C$zui.next,C$zui!==C$zuh);if(!C$zue)return null;if(C$zur===C$zua)return C$zue.prev;var C$zus,C$zuu=C$zue,C$zu_=C$zue.x,C$zuc=C$zue.y,C$zul=1/0;C$zui=C$zue.next;for(;C$zui!==C$zuu;)C$zur>=C$zui.x&&C$zui.x>=C$zu_&&pointInTriangle(C$zun<C$zuc?C$zur:C$zua,C$zun,C$zu_,C$zuc,C$zun<C$zuc?C$zua:C$zur,C$zun,C$zui.x,C$zui.y)&&((C$zus=Math.abs(C$zun-C$zui.y)/(C$zur-C$zui.x))<C$zul||C$zus===C$zul&&C$zui.x>C$zue.x)&&locallyInside(C$zui,C$zut)&&(C$zue=C$zui,C$zul=C$zus),C$zui=C$zui.next;return C$zue}(C$zut,C$zue))&&filterPoints(C$zue=splitPolygon(C$zue,C$zut),C$zue.next)}(C$zuc[C$zun],C$zui),C$zui=filterPoints(C$zui,C$zui.next);return C$zui}(C$zut,C$zue,C$zur,C$zui)),C$zut.length>80*C$zui){C$zun=C$zuo=C$zut[0],C$zua=C$zus=C$zut[1];for(var C$zuf=C$zui;C$zuf<C$zuu;C$zuf+=C$zui)(C$zuc=C$zut[C$zuf])<C$zun&&(C$zun=C$zuc),(C$zul=C$zut[C$zuf+1])<C$zua&&(C$zua=C$zul),C$zuo<C$zuc&&(C$zuo=C$zuc),C$zus<C$zul&&(C$zus=C$zul);C$zud=Math.max(C$zuo-C$zun,C$zus-C$zua)}return earcutLinked(C$zur,C$zu_,C$zui,C$zun,C$zua,C$zud),C$zu_}function linkedList(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua,C$zuo;if(C$zun===0<signedArea(C$zut,C$zue,C$zui,C$zur))for(C$zua=C$zue;C$zua<C$zui;C$zua+=C$zur)C$zuo=insertNode(C$zua,C$zut[C$zua],C$zut[C$zua+1],C$zuo);else for(C$zua=C$zui-C$zur;C$zue<=C$zua;C$zua-=C$zur)C$zuo=insertNode(C$zua,C$zut[C$zua],C$zut[C$zua+1],C$zuo);return C$zuo&&equals(C$zuo,C$zuo.next)&&(removeNode(C$zuo),C$zuo=C$zuo.next),C$zuo}function filterPoints(C$zut,C$zue){if(!C$zut)return C$zut;C$zue=C$zue||C$zut;var C$zui,C$zur=C$zut;do{if(C$zui=!1,C$zur.steiner||!equals(C$zur,C$zur.next)&&0!==area(C$zur.prev,C$zur,C$zur.next))C$zur=C$zur.next;else{if(removeNode(C$zur),(C$zur=C$zue=C$zur.prev)===C$zur.next)return null;C$zui=!0}}while(C$zui||C$zur!==C$zue);return C$zue}function earcutLinked(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){if(C$zut){if(!C$zuo&&C$zua){var C$zus=C$zut;var C$zuh=C$zur;var C$zuu=C$zun;var C$zu_=C$zua;var C$zuc=C$zus;for(;null===C$zuc.z&&(C$zuc.z=zOrder(C$zuc.x,C$zuc.y,C$zuh,C$zuu,C$zu_)),C$zuc.prevZ=C$zuc.prev,C$zuc.nextZ=C$zuc.next,C$zuc=C$zuc.next,C$zuc!==C$zus;);C$zuc.prevZ.nextZ=null,C$zuc.prevZ=null,function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul=1;do{for(C$zui=C$zut,C$zua=C$zut=null,C$zuo=0;C$zui;){for(C$zuo++,C$zur=C$zui,C$zue=C$zus=0;C$zue<C$zul&&(C$zus++,C$zur=C$zur.nextZ);C$zue++);for(C$zuc=C$zul;0<C$zus||0<C$zuc&&C$zur;)0!==C$zus&&(0===C$zuc||!C$zur||C$zui.z<=C$zur.z)?(C$zui=(C$zun=C$zui).nextZ,C$zus--):(C$zur=(C$zun=C$zur).nextZ,C$zuc--),C$zua?C$zua.nextZ=C$zun:C$zut=C$zun,C$zun.prevZ=C$zua,C$zua=C$zun;C$zui=C$zur}}while(C$zua.nextZ=null,C$zul*=2,1<C$zuo)}(C$zuc)}var C$zud,C$zul,C$zuf=C$zut;for(;C$zut.prev!==C$zut.next;)if(C$zud=C$zut.prev,C$zul=C$zut.next,C$zua?function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zut.prev,C$zua=C$zut,C$zuo=C$zut.next;if(0<=area(C$zun,C$zua,C$zuo))return!1;var C$zus=(C$zun.x<C$zua.x?C$zun.x<C$zuo.x?C$zun:C$zuo:C$zua.x<C$zuo.x?C$zua:C$zuo).x,C$zuc=(C$zun.y<C$zua.y?C$zun.y<C$zuo.y?C$zun:C$zuo:C$zua.y<C$zuo.y?C$zua:C$zuo).y,C$zuh=(C$zun.x>C$zua.x?C$zun.x>C$zuo.x?C$zun:C$zuo:C$zua.x>C$zuo.x?C$zua:C$zuo).x,C$zuu=(C$zun.y>C$zua.y?C$zun.y>C$zuo.y?C$zun:C$zuo:C$zua.y>C$zuo.y?C$zua:C$zuo).y;var C$zu_=zOrder(C$zus,C$zuc,C$zue,C$zui,C$zur),C$zud=zOrder(C$zuh,C$zuu,C$zue,C$zui,C$zur);var C$zul=C$zut.nextZ;for(;C$zul&&C$zul.z<=C$zud;){if(C$zul!==C$zut.prev&&C$zul!==C$zut.next&&pointInTriangle(C$zun.x,C$zun.y,C$zua.x,C$zua.y,C$zuo.x,C$zuo.y,C$zul.x,C$zul.y)&&0<=area(C$zul.prev,C$zul,C$zul.next))return!1;C$zul=C$zul.nextZ}C$zul=C$zut.prevZ;for(;C$zul&&C$zul.z>=C$zu_;){if(C$zul!==C$zut.prev&&C$zul!==C$zut.next&&pointInTriangle(C$zun.x,C$zun.y,C$zua.x,C$zua.y,C$zuo.x,C$zuo.y,C$zul.x,C$zul.y)&&0<=area(C$zul.prev,C$zul,C$zul.next))return!1;C$zul=C$zul.prevZ}return!0}(C$zut,C$zur,C$zun,C$zua):function(C$zut){var C$zue=C$zut.prev,C$zui=C$zut,C$zur=C$zut.next;if(0<=area(C$zue,C$zui,C$zur))return!1;var C$zun=C$zut.next.next;for(;C$zun!==C$zut.prev;){if(pointInTriangle(C$zue.x,C$zue.y,C$zui.x,C$zui.y,C$zur.x,C$zur.y,C$zun.x,C$zun.y)&&0<=area(C$zun.prev,C$zun,C$zun.next))return!1;C$zun=C$zun.next}return!0}(C$zut))C$zue.push(C$zud.i/C$zui),C$zue.push(C$zut.i/C$zui),C$zue.push(C$zul.i/C$zui),removeNode(C$zut),C$zut=C$zul.next,C$zuf=C$zul.next;else if((C$zut=C$zul)===C$zuf){C$zuo?1===C$zuo?earcutLinked(C$zut=function(C$zut,C$zue,C$zui){var C$zur=C$zut;do{var C$zun=C$zur.prev,C$zua=C$zur.next.next}while(!equals(C$zun,C$zua)&&intersects(C$zun,C$zur,C$zur.next,C$zua)&&locallyInside(C$zun,C$zua)&&locallyInside(C$zua,C$zun)&&(C$zue.push(C$zun.i/C$zui),C$zue.push(C$zur.i/C$zui),C$zue.push(C$zua.i/C$zui),removeNode(C$zur),removeNode(C$zur.next),C$zur=C$zut=C$zua),C$zur=C$zur.next,C$zur!==C$zut);return C$zur}(C$zut,C$zue,C$zui),C$zue,C$zui,C$zur,C$zun,C$zua,2):2===C$zuo&&function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=C$zut;do{var C$zus=C$zuo.next.next;for(;C$zus!==C$zuo.prev;){var C$zuc;if(C$zuo.i!==C$zus.i&&function(C$zut,C$zue){return C$zut.next.i!==C$zue.i&&C$zut.prev.i!==C$zue.i&&!function(C$zut,C$zue){var C$zui=C$zut;do{if(C$zui.i!==C$zut.i&&C$zui.next.i!==C$zut.i&&C$zui.i!==C$zue.i&&C$zui.next.i!==C$zue.i&&intersects(C$zui,C$zui.next,C$zut,C$zue))return!0}while(C$zui=C$zui.next,C$zui!==C$zut);return!1}(C$zut,C$zue)&&locallyInside(C$zut,C$zue)&&locallyInside(C$zue,C$zut)&&function(C$zut,C$zue){var C$zui=C$zut,C$zur=!1,C$zun=(C$zut.x+C$zue.x)/2,C$zua=(C$zut.y+C$zue.y)/2;for(;C$zui.y>C$zua!=C$zui.next.y>C$zua&&C$zun<(C$zui.next.x-C$zui.x)*(C$zua-C$zui.y)/(C$zui.next.y-C$zui.y)+C$zui.x&&(C$zur=!C$zur),C$zui=C$zui.next,C$zui!==C$zut;);return C$zur}(C$zut,C$zue)}(C$zuo,C$zus))return C$zuc=splitPolygon(C$zuo,C$zus),C$zuo=filterPoints(C$zuo,C$zuo.next),C$zuc=filterPoints(C$zuc,C$zuc.next),earcutLinked(C$zuo,C$zue,C$zui,C$zur,C$zun,C$zua),earcutLinked(C$zuc,C$zue,C$zui,C$zur,C$zun,C$zua);C$zus=C$zus.next}}while(C$zuo=C$zuo.next,C$zuo!==C$zut)}(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua):earcutLinked(filterPoints(C$zut),C$zue,C$zui,C$zur,C$zun,C$zua,1);break}}}function compareX(C$zut,C$zue){return C$zut.x-C$zue.x}function zOrder(C$zut,C$zue,C$zui,C$zur,C$zun){return(C$zut=1431655765&((C$zut=858993459&((C$zut=252645135&((C$zut=16711935&((C$zut=32767*(C$zut-C$zui)/C$zun)|C$zut<<8))|C$zut<<4))|C$zut<<2))|C$zut<<1))|(C$zue=1431655765&((C$zue=858993459&((C$zue=252645135&((C$zue=16711935&((C$zue=32767*(C$zue-C$zur)/C$zun)|C$zue<<8))|C$zue<<4))|C$zue<<2))|C$zue<<1))<<1}function pointInTriangle(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){return 0<=(C$zun-C$zuo)*(C$zue-C$zus)-(C$zut-C$zuo)*(C$zua-C$zus)&&0<=(C$zut-C$zuo)*(C$zur-C$zus)-(C$zui-C$zuo)*(C$zue-C$zus)&&0<=(C$zui-C$zuo)*(C$zua-C$zus)-(C$zun-C$zuo)*(C$zur-C$zus)}function area(C$zut,C$zue,C$zui){return(C$zue.y-C$zut.y)*(C$zui.x-C$zue.x)-(C$zue.x-C$zut.x)*(C$zui.y-C$zue.y)}function equals(C$zut,C$zue){return C$zut.x===C$zue.x&&C$zut.y===C$zue.y}function intersects(C$zut,C$zue,C$zui,C$zur){return equals(C$zut,C$zue)&&equals(C$zui,C$zur)||equals(C$zut,C$zur)&&equals(C$zui,C$zue)||0<area(C$zut,C$zue,C$zui)!=0<area(C$zut,C$zue,C$zur)&&0<area(C$zui,C$zur,C$zut)!=0<area(C$zui,C$zur,C$zue)}function locallyInside(C$zut,C$zue){return area(C$zut.prev,C$zut,C$zut.next)<0?0<=area(C$zut,C$zue,C$zut.next)&&0<=area(C$zut,C$zut.prev,C$zue):area(C$zut,C$zue,C$zut.prev)<0||area(C$zut,C$zut.next,C$zue)<0}function splitPolygon(C$zut,C$zue){var C$zui=new Node(C$zut.i,C$zut.x,C$zut.y),C$zur=new Node(C$zue.i,C$zue.x,C$zue.y),C$zun=C$zut.next,C$zua=C$zue.prev;return(C$zut.next=C$zue).prev=C$zut,(C$zui.next=C$zun).prev=C$zui,(C$zur.next=C$zui).prev=C$zur,(C$zua.next=C$zur).prev=C$zua,C$zur}function insertNode(C$zut,C$zue,C$zui,C$zur){C$zut=new Node(C$zut,C$zue,C$zui);return C$zur?(C$zut.next=C$zur.next,(C$zut.prev=C$zur).next.prev=C$zut,C$zur.next=C$zut):(C$zut.prev=C$zut).next=C$zut,C$zut}function removeNode(C$zut){C$zut.next.prev=C$zut.prev,C$zut.prev.next=C$zut.next,C$zut.prevZ&&(C$zut.prevZ.nextZ=C$zut.nextZ),C$zut.nextZ&&(C$zut.nextZ.prevZ=C$zut.prevZ)}function Node(C$zut,C$zue,C$zui){this.i=C$zut,this.x=C$zue,this.y=C$zui,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(C$zut,C$zue,C$zui,C$zur){var C$zun=0;for(var C$zua=C$zue,C$zuo=C$zui-C$zur;C$zua<C$zui;C$zua+=C$zur)C$zun+=(C$zut[C$zuo]-C$zut[C$zua])*(C$zut[C$zua+1]+C$zut[C$zuo+1]),C$zuo=C$zua;return C$zun}(cc.Graphics.earcut=C$zue.exports=earcut).deviation=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zue&&C$zue.length;var C$zuh=C$zun?C$zue[0]*C$zui:C$zut.length;var C$zua=Math.abs(signedArea(C$zut,0,C$zuh,C$zui));if(C$zun)for(var C$zuo=0,C$zus=C$zue.length;C$zuo<C$zus;C$zuo++){var C$zuu=C$zue[C$zuo]*C$zui;var C$zu_=C$zuo<C$zus-1?C$zue[C$zuo+1]*C$zui:C$zut.length;C$zua-=Math.abs(signedArea(C$zut,C$zuu,C$zu_,C$zui))}var C$zuc=0;for(C$zuo=0;C$zuo<C$zur.length;C$zuo+=3){var C$zul=C$zur[C$zuo]*C$zui;var C$zud=C$zur[C$zuo+1]*C$zui;var C$zuf=C$zur[C$zuo+2]*C$zui;C$zuc+=Math.abs((C$zut[C$zul]-C$zut[C$zuf])*(C$zut[1+C$zud]-C$zut[1+C$zul])-(C$zut[C$zul]-C$zut[C$zud])*(C$zut[1+C$zuf]-C$zut[1+C$zul]))}return 0===C$zua&&0===C$zuc?0:Math.abs((C$zuc-C$zua)/C$zua)},earcut.flatten=function(C$zut){var C$zue=C$zut[0][0].length,C$zui={vertices:[],holes:[],dimensions:C$zue},C$zur=0;for(var C$zun=0;C$zun<C$zut.length;C$zun++){for(var C$zua=0;C$zua<C$zut[C$zun].length;C$zua++)for(var C$zuo=0;C$zuo<C$zue;C$zuo++)C$zui.vertices.push(C$zut[C$zun][C$zua][C$zuo]);0<C$zun&&(C$zur+=C$zut[C$zun-1].length,C$zui.holes.push(C$zur))}return C$zui}},{}],230:[function(C$zut,C$zue,C$zui){"use strict";var C$zus=C$zut("../../../../graphics/helper");var C$zuc=C$zut("../../../../graphics/types").PointFlags;var C$zuo=cc.Graphics.Point=cc.Class({name:"cc.GraphicsPoint",extends:cc.Vec2,ctor:function(C$zut,C$zue){this.reset()},reset:function(){this.dx=0,this.dy=0,this.dmx=0,this.dmy=0,this.flags=0,this.len=0}});function Path(){this.reset()}function Impl(C$zut){this._tessTol=.25,this._distTol=.01,this._updatePathOffset=!1,this._paths=null,this._pathLength=0,this._pathOffset=0,this._points=null,this._pointsOffset=0,this._commandx=0,this._commandy=0,this._paths=[],this._points=[]}cc.js.mixin(Path.prototype,{reset:function(){this.closed=!1,this.nbevel=0,this.complex=!0,this.points?this.points.length=0:this.points=[]}}),cc.js.mixin(Impl.prototype,{moveTo:function(C$zut,C$zue){this._updatePathOffset&&(this._pathOffset=this._pathLength,this._updatePathOffset=!1),this._addPath(),this._addPoint(C$zut,C$zue,C$zuc.PT_CORNER),this._commandx=C$zut,this._commandy=C$zue},lineTo:function(C$zut,C$zue){this._addPoint(C$zut,C$zue,C$zuc.PT_CORNER),this._commandx=C$zut,this._commandy=C$zue},bezierCurveTo:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=this._curPath;C$zuo=C$zuo.points[C$zuo.points.length-1];C$zuo.x!==C$zut||C$zuo.y!==C$zue||C$zui!==C$zun||C$zur!==C$zua?(C$zus.tesselateBezier(this,C$zuo.x,C$zuo.y,C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,0,C$zuc.PT_CORNER),this._commandx=C$zun,this._commandy=C$zua):this.lineTo(C$zun,C$zua)},quadraticCurveTo:function(C$zut,C$zue,C$zui,C$zur){var C$zun=this._commandx;var C$zua=this._commandy;this.bezierCurveTo(C$zun+2/3*(C$zut-C$zun),C$zua+2/3*(C$zue-C$zua),C$zui+2/3*(C$zut-C$zui),C$zur+2/3*(C$zue-C$zur),C$zui,C$zur)},arc:function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){C$zus.arc(this,C$zut,C$zue,C$zui,C$zur,C$zun,C$zua)},ellipse:function(C$zut,C$zue,C$zui,C$zur){C$zus.ellipse(this,C$zut,C$zue,C$zui,C$zur),this._curPath.complex=!1},circle:function(C$zut,C$zue,C$zui){C$zus.ellipse(this,C$zut,C$zue,C$zui,C$zui),this._curPath.complex=!1},rect:function(C$zut,C$zue,C$zui,C$zur){this.moveTo(C$zut,C$zue),this.lineTo(C$zut,C$zue+C$zur),this.lineTo(C$zut+C$zui,C$zue+C$zur),this.lineTo(C$zut+C$zui,C$zue),this.close(),this._curPath.complex=!1},roundRect:function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zus.roundRect(this,C$zut,C$zue,C$zui,C$zur,C$zun),this._curPath.complex=!1},clear:function(C$zut){this._pathLength=0,this._pathOffset=0,this._pointsOffset=0,this._curPath=null,C$zut&&(this._paths.length=0,this._points.length=0)},close:function(){this._curPath.closed=!0},_addPath:function(){var C$zut=this._pathLength;C$zut=this._paths[C$zut];return C$zut?C$zut.reset():(C$zut=new Path,this._paths.push(C$zut)),this._pathLength++,this._curPath=C$zut},_addPoint:function(C$zut,C$zue,C$zui){var C$zur=this._curPath;var C$zun,C$zua;C$zur&&(C$zua=this._points,C$zur=C$zur.points,(C$zun=C$zua[this._pointsOffset++])?(C$zun.x=C$zut,C$zun.y=C$zue):(C$zun=new C$zuo(C$zut,C$zue),C$zua.push(C$zun)),C$zun.flags=C$zui,C$zur.push(C$zun))}}),cc.Graphics._Impl=Impl,C$zue.exports=Impl},{"../../../../graphics/helper":132,"../../../../graphics/types":134}],231:[function(C$zut,C$zur,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zun=_interopRequireDefault(C$zut("../../../assembler"));var C$zua=_interopRequireDefault(C$zut("../../../../../renderer/core/input-assembler"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zuo=C$zut("../../mesh-buffer");var C$zus=C$zut("../../vertex-format").vfmtPosColor;var C$zuc=C$zut("../../../index");var C$zui=C$zut("../../../../graphics/graphics");var C$zuL=C$zut("../../../../graphics/types").PointFlags;var C$zuV=C$zui.LineJoin;var C$zuO=C$zui.LineCap;var C$zuR=C$zut("./earcut");C$zut("./impl");var C$zuF=Math.PI;var C$zuy=Math.min;var C$zuN=Math.max;var C$zuk=Math.ceil;var C$zuz=Math.acos;var C$zuE=Math.cos;var C$zuP=Math.sin;var C$zuM=Math.atan2;function clamp(C$zut,C$zue,C$zui){return C$zut<C$zue?C$zue:C$zui<C$zut?C$zui:C$zut}C$zui=function(C$zue){var C$zut;C$zut=C$zue,(C$zui=GraphicsAssembler).prototype=Object.create(C$zut.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zut;_createSuper(GraphicsAssembler);function GraphicsAssembler(C$zut){return(C$zut=C$zue.call(this,C$zut)||this)._buffer=null,C$zut._buffers=[],C$zut._bufferOffset=0,C$zut}var C$zui=GraphicsAssembler.prototype;return C$zui.getVfmt=function(){return C$zus},C$zui.requestBuffer=function(){var C$zut={indiceStart:0,vertexStart:0};var C$zue=new C$zuo(C$zuc._handle,C$zus);C$zut.meshbuffer=C$zue;C$zue=new C$zua.default(C$zue._vb,C$zue._ib);return C$zut.ia=C$zue,this._buffers.push(C$zut),C$zut},C$zui.getBuffers=function(){return 0===this._buffers.length&&this.requestBuffer(),this._buffers},C$zui.clear=function(C$zut){this._bufferOffset=0;var C$zue=this._buffers;if(C$zut){for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];C$zun.meshbuffer.destroy(),C$zun.meshbuffer=null}C$zue.length=0}else for(var C$zua=0,C$zuo=C$zue.length;C$zua<C$zuo;C$zua++){var C$zus=C$zue[C$zua];C$zus.indiceStart=0,C$zus.vertexStart=0,C$zus.meshbuffer.reset()}},C$zui.fillBuffers=function(C$zut,C$zue){C$zue._flush(),C$zue.node=C$zut.node,C$zue.material=C$zut._materials[0];var C$zui=this.getBuffers();for(var C$zur=0,C$zun=C$zui.length;C$zur<C$zun;C$zur++){var C$zua=C$zui[C$zur];var C$zuo=C$zua.meshbuffer;C$zua.ia._count=C$zua.indiceStart,C$zue._flushIA(C$zua.ia),C$zuo.uploadData()}},C$zui.genBuffer=function(C$zut,C$zue){var C$zui=this.getBuffers();var C$zur=C$zui[this._bufferOffset];var C$zun=C$zur.meshbuffer;var C$zua=C$zur.vertexStart+C$zue;return(65535<C$zua||131070<3*C$zua)&&(++this._bufferOffset,C$zua=C$zue,this._bufferOffset<C$zui.length?C$zur=C$zui[this._bufferOffset]:(C$zur=this.requestBuffer(C$zut),C$zui[this._bufferOffset]=C$zur),C$zun=C$zur.meshbuffer),C$zua>C$zun.vertexOffset&&C$zun.requestStatic(C$zue,3*C$zue),this._buffer=C$zur},C$zui.stroke=function(C$zut){this._curColor=C$zut._strokeColor._val,this._flattenPaths(C$zut._impl),this._expandStroke(C$zut),C$zut._impl._updatePathOffset=!0},C$zui.fill=function(C$zut){this._curColor=C$zut._fillColor._val,this._expandFill(C$zut),C$zut._impl._updatePathOffset=!0},C$zui._expandStroke=function(C$zut){var C$zue=.5*C$zut.lineWidth,C$zui=C$zut.lineCap,C$zuh=C$zut.lineJoin,C$zuu=C$zut.miterLimit;var C$zur=C$zut._impl;C$zud=C$zue,C$zuf=C$zuF,C$zux=C$zur._tessTol,C$zud=2*C$zuz(C$zue/(C$zue+C$zux));var C$zu_=C$zuN(2,C$zuk(C$zuf/C$zud));var C$zud,C$zuf;this._calculateJoins(C$zur,C$zue,C$zuh,C$zuu);var C$zup=C$zur._paths;var C$zum=0;for(var C$zuv=C$zur._pathOffset,C$zuy=C$zur._pathLength;C$zuv<C$zuy;C$zuv++){var C$zug=C$zup[C$zuv];var C$zub=C$zug.points.length;C$zuh===C$zuV.ROUND?C$zum+=2*(C$zub+C$zug.nbevel*(C$zu_+2)+1):C$zum+=2*(C$zub+5*C$zug.nbevel+1),C$zug.closed||(C$zui===C$zuO.ROUND?C$zum+=2*(2*C$zu_+2):C$zum+=12)}var C$zuC=this.genBuffer(C$zut,C$zum),C$zux=C$zuC.meshbuffer,C$zuA=C$zux._vData,C$zuS=C$zux._iData;for(var C$zuT=C$zur._pathOffset,C$zuw=C$zur._pathLength;C$zuT<C$zuw;C$zuT++){var C$zun=C$zup[C$zuT];var C$zuE=C$zun.points;var C$zua=C$zuE.length;var C$zuP=C$zuC.vertexStart;var C$zuo=void 0,C$zus=void 0;var C$zuc=void 0,C$zuM=void 0;C$zuM=(C$zun=C$zun.closed)?(C$zuo=C$zuE[C$zua-1],C$zus=C$zuE[0],C$zuc=0,C$zua):(C$zuo=C$zuE[0],C$zus=C$zuE[1],C$zua-(C$zuc=1)),C$zus=C$zus||C$zuo,C$zun||((C$zua=C$zus.sub(C$zuo)).normalizeSelf(),C$zul=C$zua.x,C$zua=C$zua.y,C$zui===C$zuO.BUTT?this._buttCapStart(C$zuo,C$zul,C$zua,C$zue,0):C$zui===C$zuO.SQUARE?this._buttCapStart(C$zuo,C$zul,C$zua,C$zue,C$zue):C$zui===C$zuO.ROUND&&this._roundCapStart(C$zuo,C$zul,C$zua,C$zue,C$zu_));for(var C$zuR=C$zuc;C$zuR<C$zuM;++C$zuR)C$zuh===C$zuV.ROUND?this._roundJoin(C$zuo,C$zus,C$zue,C$zue,C$zu_):0!=(C$zus.flags&(C$zuL.PT_BEVEL|C$zuL.PT_INNERBEVEL))?this._bevelJoin(C$zuo,C$zus,C$zue,C$zue):(this._vset(C$zus.x+C$zus.dmx*C$zue,C$zus.y+C$zus.dmy*C$zue),this._vset(C$zus.x-C$zus.dmx*C$zue,C$zus.y-C$zus.dmy*C$zue)),C$zuo=C$zus,C$zus=C$zuE[C$zuR+1];var C$zul;C$zun?(this._vset(C$zuA[C$zul=3*C$zuP],C$zuA[1+C$zul]),this._vset(C$zuA[3+C$zul],C$zuA[4+C$zul])):((C$zua=C$zus.sub(C$zuo)).normalizeSelf(),C$zuc=C$zua.x,C$zun=C$zua.y,C$zui===C$zuO.BUTT?this._buttCapEnd(C$zus,C$zuc,C$zun,C$zue,0):C$zui===C$zuO.SQUARE?this._buttCapEnd(C$zus,C$zuc,C$zun,C$zue,C$zue):C$zui===C$zuO.ROUND&&this._roundCapEnd(C$zus,C$zuc,C$zun,C$zue,C$zu_));var C$zuI=C$zuC.indiceStart;for(var C$zuB=C$zuP+2,C$zuD=C$zuC.vertexStart;C$zuB<C$zuD;C$zuB++)C$zuS[C$zuI++]=C$zuB-2,C$zuS[C$zuI++]=C$zuB-1,C$zuS[C$zuI++]=C$zuB;C$zuC.indiceStart=C$zuI}},C$zui._expandFill=function(C$zut){var C$zue=C$zut._impl;var C$zuh=C$zue._paths;var C$zuu=0;for(var C$zui=C$zue._pathOffset,C$zu_=C$zue._pathLength;C$zui<C$zu_;C$zui++)C$zuu+=C$zuh[C$zui].points.length;var C$zur=this.genBuffer(C$zut,C$zuu),C$zut=C$zur.meshbuffer,C$zud=C$zut._vData,C$zun=C$zut._iData;for(var C$zuf=C$zue._pathOffset,C$zup=C$zue._pathLength;C$zuf<C$zup;C$zuf++){var C$zum=C$zuh[C$zuf];var C$zuv=C$zum.points;var C$zuy=C$zuv.length;if(0!==C$zuy){var C$zua=C$zur.vertexStart;for(var C$zuo=0;C$zuo<C$zuy;++C$zuo)this._vset(C$zuv[C$zuo].x,C$zuv[C$zuo].y);var C$zus=C$zur.indiceStart;if(C$zum.complex){var C$zug=[];for(var C$zub=C$zua,C$zuC=C$zur.vertexStart;C$zub<C$zuC;C$zub++){var C$zux=3*C$zub;C$zug.push(C$zud[C$zux]),C$zug.push(C$zud[1+C$zux])}var C$zuc=C$zuR(C$zug,null,2);if(!C$zuc||0===C$zuc.length)continue;for(var C$zuA=0,C$zuS=C$zuc.length;C$zuA<C$zuS;C$zuA++)C$zun[C$zus++]=C$zuc[C$zuA]+C$zua}else{var C$zuT=C$zua;for(var C$zul=C$zua+2,C$zuw=C$zur.vertexStart;C$zul<C$zuw;C$zul++)C$zun[C$zus++]=C$zuT,C$zun[C$zus++]=C$zul-1,C$zun[C$zus++]=C$zul}C$zur.indiceStart=C$zus}}},C$zui._calculateJoins=function(C$zut,C$zuh,C$zuu,C$zu_){var C$zud=0;0<C$zuh&&(C$zud=1/C$zuh);var C$zuf=C$zut._paths;for(var C$zue=C$zut._pathOffset,C$zup=C$zut._pathLength;C$zue<C$zup;C$zue++){var C$zui=C$zuf[C$zue];var C$zur=C$zui.points;var C$zum=C$zur.length;var C$zun=C$zur[C$zum-1];var C$zua=C$zur[0];for(var C$zuo=C$zui.nbevel=0;C$zuo<C$zum;C$zuo++){var C$zus=C$zun.dy;var C$zuc=-C$zun.dx;var C$zul=C$zua.dy;var C$zuv=-C$zua.dx;C$zua.dmx=.5*(C$zus+C$zul),C$zua.dmy=.5*(C$zuc+C$zuv),1e-6<(C$zus=C$zua.dmx*C$zua.dmx+C$zua.dmy*C$zua.dmy)&&(600<(C$zul=1/C$zus)&&(C$zul=600),C$zua.dmx*=C$zul,C$zua.dmy*=C$zul),0<C$zua.dx*C$zun.dy-C$zun.dx*C$zua.dy&&(C$zua.flags|=C$zuL.PT_LEFT),C$zus*(C$zuc=C$zuN(11,C$zuy(C$zun.len,C$zua.len)*C$zud))*C$zuc<1&&(C$zua.flags|=C$zuL.PT_INNERBEVEL),C$zua.flags&C$zuL.PT_CORNER&&(C$zus*C$zu_*C$zu_<1||C$zuu===C$zuV.BEVEL||C$zuu===C$zuV.ROUND)&&(C$zua.flags|=C$zuL.PT_BEVEL),0!=(C$zua.flags&(C$zuL.PT_BEVEL|C$zuL.PT_INNERBEVEL))&&C$zui.nbevel++,C$zun=C$zua,C$zua=C$zur[C$zuo+1]}}},C$zui._flattenPaths=function(C$zut){var C$zue=C$zut._paths;for(var C$zui=C$zut._pathOffset,C$zur=C$zut._pathLength;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];var C$zua=C$zun.points;var C$zuo=C$zua[C$zua.length-1];var C$zus=C$zua[0];2<C$zua.length&&C$zuo.equals(C$zus)&&(C$zun.closed=!0,C$zua.pop(),C$zuo=C$zua[C$zua.length-1]);for(var C$zuc=0,C$zuh=C$zua.length;C$zuc<C$zuh;C$zuc++){var C$zul=C$zus.sub(C$zuo);C$zuo.len=C$zul.mag(),(C$zul.x||C$zul.y)&&C$zul.normalizeSelf(),C$zuo.dx=C$zul.x,C$zuo.dy=C$zul.y,C$zuo=C$zus,C$zus=C$zua[C$zuc+1]}}},C$zui._chooseBevel=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zui.x;var C$zua=C$zui.y;var C$zuo,C$zus,C$zuc,C$zul;return 0!==C$zut?(C$zuo=C$zun+C$zue.dy*C$zur,C$zus=C$zua-C$zue.dx*C$zur,C$zuc=C$zun+C$zui.dy*C$zur,C$zul=C$zua-C$zui.dx*C$zur):(C$zuo=C$zuc=C$zun+C$zui.dmx*C$zur,C$zus=C$zul=C$zua+C$zui.dmy*C$zur),[C$zuo,C$zus,C$zuc,C$zul]},C$zui._buttCapStart=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zut.x-C$zue*C$zun;C$zut=C$zut.y-C$zui*C$zun;C$zun=C$zui;C$zui=-C$zue;this._vset(C$zua+C$zun*C$zur,C$zut+C$zui*C$zur),this._vset(C$zua-C$zun*C$zur,C$zut-C$zui*C$zur)},C$zui._buttCapEnd=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zut.x+C$zue*C$zun;C$zut=C$zut.y+C$zui*C$zun;C$zun=C$zui;C$zui=-C$zue;this._vset(C$zua+C$zun*C$zur,C$zut+C$zui*C$zur),this._vset(C$zua-C$zun*C$zur,C$zut-C$zui*C$zur)},C$zui._roundCapStart=function(C$zut,C$zue,C$zui,C$zur,C$zuh){var C$zun=C$zut.x;var C$zua=C$zut.y;var C$zuo=C$zui;var C$zus=-C$zue;for(var C$zuc=0;C$zuc<C$zuh;C$zuc++){var C$zul=C$zuc/(C$zuh-1)*C$zuF;var C$zuu=C$zuE(C$zul)*C$zur,C$zul=C$zuP(C$zul)*C$zur;this._vset(C$zun-C$zuo*C$zuu-C$zue*C$zul,C$zua-C$zus*C$zuu-C$zui*C$zul),this._vset(C$zun,C$zua)}this._vset(C$zun+C$zuo*C$zur,C$zua+C$zus*C$zur),this._vset(C$zun-C$zuo*C$zur,C$zua-C$zus*C$zur)},C$zui._roundCapEnd=function(C$zut,C$zue,C$zui,C$zur,C$zuh){var C$zun=C$zut.x;var C$zua=C$zut.y;var C$zuo=C$zui;var C$zus=-C$zue;this._vset(C$zun+C$zuo*C$zur,C$zua+C$zus*C$zur),this._vset(C$zun-C$zuo*C$zur,C$zua-C$zus*C$zur);for(var C$zuc=0;C$zuc<C$zuh;C$zuc++){var C$zul=C$zuc/(C$zuh-1)*C$zuF;var C$zuu=C$zuE(C$zul)*C$zur,C$zul=C$zuP(C$zul)*C$zur;this._vset(C$zun,C$zua),this._vset(C$zun-C$zuo*C$zuu+C$zue*C$zul,C$zua-C$zus*C$zuu+C$zui*C$zul)}},C$zui._roundJoin=function(C$zut,C$zue,C$zuh,C$zui,C$zur){var C$zun=C$zut.dy;var C$zua=-C$zut.dx;var C$zuu=C$zue.dy;var C$zu_=-C$zue.dx;var C$zuo=C$zue.x;var C$zus=C$zue.y;if(0!=(C$zue.flags&C$zuL.PT_LEFT)){var C$zuc=this._chooseBevel(C$zue.flags&C$zuL.PT_INNERBEVEL,C$zut,C$zue,C$zuh);var C$zul=C$zuc[0];var C$zud=C$zuc[1];var C$zuf=C$zuc[2];C$zuc=C$zuc[3];var C$zup=C$zuM(-C$zua,-C$zun);var C$zum=C$zuM(-C$zu_,-C$zuu);C$zup<C$zum&&(C$zum-=2*C$zuF),this._vset(C$zul,C$zud),this._vset(C$zuo-C$zun*C$zui,C$zue.y-C$zua*C$zui);var C$zuv=clamp(C$zuk((C$zup-C$zum)/C$zuF)*C$zur,2,C$zur);for(var C$zuy=0;C$zuy<C$zuv;C$zuy++){var C$zug=C$zup+C$zuy/(C$zuv-1)*(C$zum-C$zup);var C$zub=C$zuo+C$zuE(C$zug)*C$zui;C$zug=C$zus+C$zuP(C$zug)*C$zui;this._vset(C$zuo,C$zus),this._vset(C$zub,C$zug)}this._vset(C$zuf,C$zuc),this._vset(C$zuo-C$zuu*C$zui,C$zus-C$zu_*C$zui)}else{C$zul=this._chooseBevel(C$zue.flags&C$zuL.PT_INNERBEVEL,C$zut,C$zue,-C$zui);C$zud=C$zul[0];C$zuf=C$zul[1];C$zuc=C$zul[2];C$zut=C$zul[3];var C$zuC=C$zuM(C$zua,C$zun);var C$zux=C$zuM(C$zu_,C$zuu);C$zux<C$zuC&&(C$zux+=2*C$zuF),this._vset(C$zuo+C$zun*C$zui,C$zus+C$zua*C$zui),this._vset(C$zud,C$zuf);var C$zuA=clamp(C$zuk((C$zux-C$zuC)/C$zuF)*C$zur,2,C$zur);for(var C$zuS=0;C$zuS<C$zuA;C$zuS++){var C$zuT=C$zuC+C$zuS/(C$zuA-1)*(C$zux-C$zuC);var C$zuw=C$zuo+C$zuE(C$zuT)*C$zuh;C$zuT=C$zus+C$zuP(C$zuT)*C$zuh;this._vset(C$zuw,C$zuT),this._vset(C$zuo,C$zus)}this._vset(C$zuo+C$zuu*C$zui,C$zus+C$zu_*C$zui),this._vset(C$zuc,C$zut)}},C$zui._bevelJoin=function(C$zut,C$zue,C$zui,C$zur){var C$zun,C$zua;var C$zuo=C$zut.dy;var C$zus=-C$zut.dx;var C$zuh=C$zue.dy;var C$zuu=-C$zue.dx;var C$zuc,C$zul;C$zue.flags&C$zuL.PT_LEFT?(C$zul=(C$zuc=this._chooseBevel(C$zue.flags&C$zuL.PT_INNERBEVEL,C$zut,C$zue,C$zui))[0],C$zun=C$zuc[1],C$zua=C$zuc[2],C$zuc=C$zuc[3],this._vset(C$zul,C$zun),this._vset(C$zue.x-C$zuo*C$zur,C$zue.y-C$zus*C$zur),this._vset(C$zua,C$zuc),this._vset(C$zue.x-C$zuh*C$zur,C$zue.y-C$zuu*C$zur)):(C$zun=(C$zul=this._chooseBevel(C$zue.flags&C$zuL.PT_INNERBEVEL,C$zut,C$zue,-C$zur))[0],C$zua=C$zul[1],C$zuc=C$zul[2],C$zut=C$zul[3],this._vset(C$zue.x+C$zuo*C$zui,C$zue.y+C$zus*C$zui),this._vset(C$zun,C$zua),this._vset(C$zue.x+C$zuh*C$zui,C$zue.y+C$zuu*C$zui),this._vset(C$zuc,C$zut))},C$zui._vset=function(C$zut,C$zue){var C$zui=this._buffer;var C$zur=C$zui.meshbuffer;var C$zun=3*C$zui.vertexStart;var C$zua=C$zur._vData;var C$zuo=C$zur._uintVData;C$zua[C$zun]=C$zut,C$zua[1+C$zun]=C$zue,C$zuo[2+C$zun]=this._curColor,C$zui.vertexStart++,C$zur._dirty=!0},GraphicsAssembler}(C$zun.default);C$zue.default=C$zui,C$zun.default.register(cc.Graphics,C$zui),C$zur.exports=C$zue.default},{"../../../../../renderer/core/input-assembler":302,"../../../../graphics/graphics":131,"../../../../graphics/types":134,"../../../assembler":217,"../../../index":220,"../../mesh-buffer":247,"../../vertex-format":252,"./earcut":229,"./impl":230}],232:[function(C$zut,C$zue,C$zui){"use strict";cc.assemblers={},C$zut("./sprite"),C$zut("./mask-assembler"),C$zut("./graphics"),C$zut("./label"),C$zut("./motion-streak")},{"./graphics":231,"./label":236,"./mask-assembler":237,"./motion-streak":238,"./sprite":245}],233:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zut=(C$zut=C$zut("../../../../utils/label/bmfont"))&&C$zut.__esModule?C$zut:{default:C$zut};function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zuC=0;C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=WebglBmfontAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(WebglBmfontAssembler);function WebglBmfontAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=WebglBmfontAssembler.prototype;return C$zui.initData=function(){this._renderData.createFlexData(0,4,6,this.getVfmt())},C$zui._reserveQuads=function(C$zut,C$zue){var C$zui=4*C$zue;C$zue*=6;var C$zur=this._renderData._flexBuffer;C$zur.reserve(C$zui,C$zue),C$zur.used(C$zui,C$zue);var C$zun=this._renderData.iDatas[0];for(var C$zua=0,C$zuo=0,C$zus=C$zue;C$zua<C$zus;C$zua+=6,C$zuo+=4)C$zun[C$zua]=C$zuo,C$zun[C$zua+1]=C$zuo+1,C$zun[C$zua+2]=C$zuo+2,C$zun[C$zua+3]=C$zuo+1,C$zun[C$zua+4]=C$zuo+3,C$zun[C$zua+5]=C$zuo+2;C$zuC=0},C$zui._quadsUpdated=function(C$zut){C$zuC=0,this._renderData._flexBuffer.used(this.verticesCount,this.indicesCount)},C$zui._getColor=function(C$zut){return C$zut.node._color._val},C$zui.appendQuad=function(C$zuh,C$zut,C$zue,C$zuu,C$zu_,C$zud,C$zuf){var C$zui=this._renderData;var C$zur=C$zui.vDatas[0],C$zup=C$zui.uintVDatas[0];this.verticesCount+=4,this.indicesCount=this.verticesCount/2*3;var C$zui=C$zut.width,C$zut=C$zut.height,C$zum=C$zue.width,C$zuv=C$zue.height,C$zuy=this._getColor(C$zuh);var C$zun,C$zua,C$zuo,C$zus;var C$zuc=this.floatsPerVert;var C$zul=C$zuC+this.uvOffset;C$zuu?(C$zun=C$zue.x/C$zui,C$zuo=(C$zue.x+C$zuv)/C$zui,C$zua=(C$zue.y+C$zum)/C$zut,C$zus=C$zue.y/C$zut,C$zur[C$zul]=C$zun,C$zur[C$zul+1]=C$zus,C$zur[C$zul+=C$zuc]=C$zun,C$zur[C$zul+1]=C$zua,C$zur[C$zul+=C$zuc]=C$zuo,C$zur[C$zul+1]=C$zus,C$zur[C$zul+=C$zuc]=C$zuo,C$zur[C$zul+1]=C$zua):(C$zun=C$zue.x/C$zui,C$zuo=(C$zue.x+C$zum)/C$zui,C$zua=(C$zue.y+C$zuv)/C$zut,C$zus=C$zue.y/C$zut,C$zur[C$zul]=C$zun,C$zur[C$zul+1]=C$zua,C$zur[C$zul+=C$zuc]=C$zuo,C$zur[C$zul+1]=C$zua,C$zur[C$zul+=C$zuc]=C$zun,C$zur[C$zul+1]=C$zus,C$zur[C$zul+=C$zuc]=C$zuo,C$zur[C$zul+1]=C$zus),this.appendVerts(C$zuh,C$zuC,C$zun=C$zu_,C$zuo=C$zu_+C$zum*C$zuf,C$zua=C$zud-C$zuv*C$zuf,C$zus=C$zud);var C$zug=C$zuC+this.colorOffset;for(var C$zub=0;C$zub<4;C$zub++)C$zup[C$zug]=C$zuy,C$zug+=C$zuc;C$zuC+=4*this.floatsPerVert},C$zui.appendVerts=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=this._local;var C$zus=this.floatsPerVert;C$zuo[C$zue]=C$zui,C$zuo[C$zue+1]=C$zun,C$zuo[C$zue+=C$zus]=C$zur,C$zuo[C$zue+1]=C$zun,C$zuo[C$zue+=C$zus]=C$zui,C$zuo[C$zue+1]=C$zua,C$zuo[C$zue+=C$zus]=C$zur,C$zuo[C$zue+1]=C$zua},C$zui.updateWorldVerts=function(C$zut){var C$zut=C$zut.node._worldMatrix.m,C$zue=C$zut[0],C$zui=C$zut[1],C$zur=C$zut[4],C$zun=C$zut[5],C$zuh=C$zut[12],C$zuu=C$zut[13];var C$zua=this._local;var C$zuo=this._renderData.vDatas[0];var C$zu_=this.floatsPerVert;for(var C$zus=0;C$zus<C$zua.length;C$zus+=C$zu_){var C$zuc=C$zua[C$zus];var C$zul=C$zua[C$zus+1];C$zuo[C$zus]=C$zuc*C$zue+C$zul*C$zur+C$zuh,C$zuo[C$zus+1]=C$zuc*C$zui+C$zul*C$zun+C$zuu}},WebglBmfontAssembler}(C$zut.default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../../utils/label/bmfont":224}],234:[function(C$zut,C$zue,C$zui){"use strict";function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zui.__esModule=!0,C$zui.default=void 0;C$zut("../../../../../platform/js");C$zut("./bmfont");C$zut=C$zut("../../../../utils/label/letter-font");var C$zur=cc.color(255,255,255,255);C$zut=function(C$zui){var C$zut;C$zut=C$zui,(C$zue=WebglLetterFontAssembler).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(WebglLetterFontAssembler);function WebglLetterFontAssembler(){return C$zui.apply(this,arguments)||this}var C$zue=WebglLetterFontAssembler.prototype;return C$zue.createData=function(C$zut){return C$zut.requestRenderData()},C$zue._getColor=function(C$zut){return C$zur._fastSetA(C$zut.node._color.a),C$zur._val},C$zue.updateColor=function(C$zut){var C$zue=this._getColor(C$zut);C$zui.prototype.updateColor.call(this,C$zut,C$zue)},WebglLetterFontAssembler}(C$zut);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../../../platform/js":209,"../../../../utils/label/letter-font":226,"./bmfont":233}],235:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("../../../../utils/label/ttf"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zul=C$zut("../../../../../components/CCLabelShadow");var C$zun=cc.color(255,255,255,255);C$zut=function(C$zui){var C$zut;C$zut=C$zui,(C$zue=WebglTTFAssembler).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(WebglTTFAssembler);function WebglTTFAssembler(){return C$zui.apply(this,arguments)||this}var C$zue=WebglTTFAssembler.prototype;return C$zue.updateUVs=function(C$zut){var C$zue=this._renderData.vDatas[0];var C$zui=C$zut._frame.uv;var C$zur=this.uvOffset;var C$zun=this.floatsPerVert;for(var C$zua=0;C$zua<4;C$zua++){var C$zuo=2*C$zua;var C$zus=C$zun*C$zua+C$zur;C$zue[C$zus]=C$zui[C$zuo],C$zue[C$zus+1]=C$zui[1+C$zuo]}},C$zue.updateColor=function(C$zut){C$zun._fastSetA(C$zut.node._color.a);var C$zue=C$zun._val;C$zui.prototype.updateColor.call(this,C$zut,C$zue)},C$zue.updateVerts=function(C$zut){var C$zue=C$zut.node,C$zui=C$zut._ttfTexture.width,C$zur=C$zut._ttfTexture.height,C$zun=C$zue.anchorX*C$zue.width,C$zua=C$zue.anchorY*C$zue.height;var C$zuo=C$zul&&C$zut.getComponent(C$zul);var C$zus;C$zuo&&C$zuo._enabled&&(C$zuc=(C$zui-C$zue.width)/2,C$zus=(C$zur-C$zue.height)/2,-(C$zuo=C$zuo.offset).x>C$zuc?C$zun+=C$zui-C$zue.width:C$zuc>C$zuo.x&&(C$zun+=C$zuc-C$zuo.x),-C$zuo.y>C$zus?C$zua+=C$zur-C$zue.height:C$zus>C$zuo.y&&(C$zua+=C$zus-C$zuo.y));var C$zuc=this._local;C$zuc[0]=-C$zun,C$zuc[1]=-C$zua,C$zuc[2]=C$zui-C$zun,C$zuc[3]=C$zur-C$zua,this.updateUVs(C$zut),this.updateWorldVerts(C$zut)},WebglTTFAssembler}(C$zur.default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../../../components/CCLabelShadow":82,"../../../../utils/label/ttf":227}],236:[function(C$zut,C$zui,C$zuh){"use strict";var C$zue=_interopRequireDefault(C$zut("../../../assembler"));var C$zur=_interopRequireDefault(C$zut("../../../../components/CCLabel"));var C$zun=_interopRequireDefault(C$zut("./2d/ttf"));var C$zua=_interopRequireDefault(C$zut("./2d/bmfont"));var C$zuo=_interopRequireDefault(C$zut("./2d/letter"));var C$zus=_interopRequireDefault(C$zut("./3d/ttf"));var C$zuc=_interopRequireDefault(C$zut("./3d/bmfont"));var C$zul=_interopRequireDefault(C$zut("./3d/letter"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}C$zur.default._canvasPool={pool:[],get:function(){var C$zut=this.pool.pop();var C$zue,C$zui;return C$zut||(C$zui=(C$zue=document.createElement("canvas")).getContext("2d"),C$zut={canvas:C$zue,context:C$zui}),C$zut},put:function(C$zut){32<=this.pool.length||this.pool.push(C$zut)}},C$zue.default.register(cc.Label,{getConstructor:function(C$zut){var C$zue=C$zut.node.is3DNode;var C$zui=(C$zue?C$zus:C$zun).default;return C$zut.font instanceof cc.BitmapFont?C$zui=(C$zue?C$zuc:C$zua).default:C$zut.cacheMode===C$zur.default.CacheMode.CHAR&&(cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB?cc.warn("sorry, subdomain does not support CHAR mode currently!"):C$zui=(C$zue?C$zul:C$zuo).default),C$zui},TTF:C$zun.default,Bmfont:C$zua.default,Letter:C$zuo.default,TTF3D:C$zus.default,Bmfont3D:C$zuc.default,Letter3D:C$zul.default})},{"../../../../components/CCLabel":80,"../../../assembler":217,"./2d/bmfont":233,"./2d/letter":234,"./2d/ttf":235,"./3d/bmfont":void 0,"./3d/letter":void 0,"./3d/ttf":void 0}],237:[function(C$zut,C$zur,C$zue){"use strict";C$zue.__esModule=!0,C$zue.MaskAssembler=void 0;C$zui=(C$zui=C$zut("../../assembler"))&&C$zui.__esModule?C$zui:{default:C$zui};var C$zui;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zul=C$zut("../../../components/CCMask");var C$zud=C$zut("../../render-flow");var C$zuh=C$zut("./sprite/2d/simple");var C$zuf=C$zut("./graphics");var C$zuu=C$zut("../../../../renderer/gfx");var C$zup=C$zut("../vertex-format").vfmtPos;var C$zu_=[];function getWriteMask(){return 1<<C$zu_.length-1}function applyStencil(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){C$zut=C$zut.effect;var C$zuo=C$zuu.STENCIL_OP_KEEP,C$zus=C$zuu.STENCIL_OP_KEEP;C$zut.setStencil(C$zuu.STENCIL_ENABLE,C$zue,C$zur,C$zun,C$zui,C$zuo,C$zus,C$zua)}function enableMask(C$zut){var C$zue=C$zuu.DS_FUNC_EQUAL;var C$zui=C$zuu.STENCIL_OP_KEEP;var C$zur=function(){var C$zut=0;for(var C$zue=0;C$zue<C$zu_.length;++C$zue)C$zut+=1<<C$zue;return C$zut}();var C$zun=getWriteMask();var C$zua=C$zu_[C$zu_.length-1];applyStencil(C$zua._enableMaterial,C$zue,C$zui,C$zur,C$zur,C$zun),C$zut._flushMaterial(C$zua._enableMaterial)}C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=MaskAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(MaskAssembler);function MaskAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=MaskAssembler.prototype;return C$zui.updateRenderData=function(C$zut){C$zut._type===C$zul.Type.IMAGE_STENCIL?C$zut.spriteFrame?C$zuh.prototype.updateRenderData.call(this,C$zut):C$zut.setMaterial(0,null):(C$zut._graphics.setMaterial(0,C$zut._materials[0]),C$zuf.prototype.updateRenderData.call(C$zut._graphics._assembler,C$zut._graphics,C$zut._graphics))},C$zui.fillBuffers=function(C$zut,C$zue){var C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus;var C$zuc;C$zut._type===C$zul.Type.IMAGE_STENCIL&&!C$zut.spriteFrame||(C$zuc=C$zut,8<C$zu_.length+1&&cc.errorID(9e3,8),C$zu_.push(C$zuc),C$zuc=C$zut,C$zui=C$zue,C$zur=C$zuu.DS_FUNC_NEVER,C$zun=getWriteMask(),C$zua=C$zuc.inverted?C$zuu.STENCIL_OP_REPLACE:C$zuu.STENCIL_OP_ZERO,applyStencil(C$zuc._clearMaterial,C$zur,C$zua,C$zun,C$zun,C$zun),C$zur=C$zui.getBuffer("mesh",C$zup),C$zun=(C$zua=C$zur.request(4,6)).indiceOffset,C$zuo=C$zua.byteOffset>>2,C$zua=C$zua.vertexOffset,C$zus=C$zur._vData,C$zur=C$zur._iData,C$zus[C$zuo++]=-1,C$zus[C$zuo++]=-1,C$zus[C$zuo++]=-1,C$zus[C$zuo++]=1,C$zus[C$zuo++]=1,C$zus[C$zuo++]=1,C$zus[C$zuo++]=1,C$zus[+C$zuo]=-1,C$zur[C$zun++]=C$zua,C$zur[C$zun++]=C$zua+3,C$zur[C$zun++]=C$zua+1,C$zur[C$zun++]=C$zua+1,C$zur[C$zun++]=C$zua+3,C$zur[+C$zun]=C$zua+2,C$zui.node=C$zui._dummyNode,C$zui.material=C$zuc._clearMaterial,C$zui._flush(),C$zus=C$zut,C$zuo=C$zue,C$zur=C$zuu.DS_FUNC_NEVER,C$zun=getWriteMask(),C$zua=C$zus.inverted?C$zuu.STENCIL_OP_ZERO:C$zuu.STENCIL_OP_REPLACE,applyStencil(C$zus._materials[0],C$zur,C$zua,C$zun,C$zun,C$zun),C$zuo.material=C$zus._materials[0],C$zus._type===C$zul.Type.IMAGE_STENCIL?(C$zuo.node=C$zuo._dummyNode,C$zuh.prototype.fillBuffers.call(C$zus._assembler,C$zus,C$zuo),C$zuo._flush()):(C$zuo.node=C$zus.node,C$zuf.prototype.fillBuffers.call(C$zus._graphics._assembler,C$zus._graphics,C$zuo)),enableMask(C$zue)),C$zut.node._renderFlag|=C$zud.FLAG_UPDATE_RENDER_DATA},C$zui.postFillBuffers=function(C$zut,C$zue){var C$zui;C$zut._type===C$zul.Type.IMAGE_STENCIL&&!C$zut.spriteFrame||(C$zui=C$zut,C$zue=C$zue,0===C$zu_.length&&cc.errorID(9001),C$zu_.pop(),0===C$zu_.length?C$zue._flushMaterial(C$zui._exitMaterial):enableMask(C$zue)),C$zut.node._renderFlag|=C$zud.FLAG_UPDATE_RENDER_DATA},MaskAssembler}(C$zuh);C$zue.MaskAssembler=C$zut,C$zui.default.register(C$zul,C$zut)},{"../../../../renderer/gfx":312,"../../../components/CCMask":84,"../../assembler":217,"../../render-flow":221,"../vertex-format":252,"./graphics":231,"./sprite/2d/simple":242}],238:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("../../assembler-2d"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zun=C$zut("../../../components/CCMotionStreak");var C$zuf=C$zut("../../render-flow");function Point(C$zut,C$zue){this.point=C$zut||cc.v2(),this.dir=C$zue||cc.v2(),this.distance=0,this.time=0}Point.prototype.setPoint=function(C$zut,C$zue){this.point.x=C$zut,this.point.y=C$zue},Point.prototype.setDir=function(C$zut,C$zue){this.dir.x=C$zut,this.dir.y=C$zue};cc.v2();cc.v2();var C$zux=cc.v2();var C$zuA=cc.v2();C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=MotionStreakAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(MotionStreakAssembler);function MotionStreakAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=MotionStreakAssembler.prototype;return C$zui.initData=function(){this._renderData.createFlexData(0,16,42)},C$zui.update=function(C$zut,C$zuh){var C$zuu=C$zut._stroke/2;var C$zue=C$zut.node._worldMatrix.m;var C$zui=C$zue[12],C$zue=C$zue[13];var C$zur=C$zut._points;var C$zun;1<C$zur.length&&((C$zua=C$zur[0].point.x-C$zui)*C$zua+(C$zua=C$zur[0].point.y-C$zue)*C$zua<C$zut.minSeg&&(C$zun=C$zur[0])),C$zun||(C$zun=new Point,C$zur.splice(0,0,C$zun)),C$zun.setPoint(C$zui,C$zue),C$zun.time=C$zut._fadeTime+C$zuh;var C$zu_=0;if(!(C$zur.length<2)){var C$zua=C$zut._color,C$zud=C$zua.r,C$zuf=C$zua.g,C$zup=C$zua.b,C$zum=C$zua.a;C$zui=C$zur[1];C$zui.distance=C$zun.point.sub(C$zui.point,C$zuA).mag(),C$zuA.normalizeSelf(),C$zui.setDir(C$zuA.x,C$zuA.y),C$zun.setDir(C$zuA.x,C$zuA.y);C$zue=this._renderData._flexBuffer;C$zue.reserve(2*C$zur.length,6*(C$zur.length-1));var C$zuo=C$zue.vData;var C$zuv=C$zue.uintVData;var C$zuy=C$zut._fadeTime;var C$zug=!1;for(var C$zub=C$zur.length-1;0<=C$zub;C$zub--){var C$zus=C$zur[C$zub];var C$zuC=C$zus.point;var C$zuc=C$zus.dir;if(C$zus.time-=C$zuh,C$zus.time<0)C$zur.splice(C$zub,1);else{C$zus=C$zus.time/C$zuy;var C$zul=C$zur[C$zub-1];if(!C$zug){if(!C$zul){C$zur.splice(C$zub,1);continue}C$zuC.x=C$zul.point.x-C$zuc.x*C$zus,C$zuC.y=C$zul.point.y-C$zuc.y*C$zus}C$zug=!0,C$zul=C$zuc,(C$zuc=C$zux).x=-C$zul.y,C$zuc.y=C$zul.x;C$zuc=(C$zus*C$zum<<24>>>0)+(C$zup<<16)+(C$zuf<<8)+C$zud;C$zul=5*C$zu_;C$zuo[C$zul]=C$zuC.x+C$zux.x*C$zuu,C$zuo[1+C$zul]=C$zuC.y+C$zux.y*C$zuu,C$zuo[2+C$zul]=1,C$zuo[3+C$zul]=C$zus,C$zuv[4+C$zul]=C$zuc,C$zuo[C$zul+=5]=C$zuC.x-C$zux.x*C$zuu,C$zuo[1+C$zul]=C$zuC.y-C$zux.y*C$zuu,C$zuo[2+C$zul]=0,C$zuo[3+C$zul]=C$zus,C$zuv[4+C$zul]=C$zuc,C$zu_+=2}}C$zue.used(C$zu_,C$zu_<=2?0:3*(C$zu_-2))}},C$zui.fillBuffers=function(C$zuh,C$zut){var C$zue=this._renderData._flexBuffer,C$zui=C$zue.vData,C$zuu=C$zue.usedVertices,C$zur=C$zue.usedIndices,C$zue=C$zue.usedVerticesFloats;C$zut=C$zut._meshBuffer;C$zur=C$zut.request(C$zuu,C$zur);var C$zun=C$zur.byteOffset>>2,C$zua=C$zut._vData;C$zui.length+C$zun>C$zua.length?C$zua.set(C$zui.subarray(0,C$zue),C$zun):C$zua.set(C$zui,C$zun);var C$zuo=C$zut._iData,C$zus=C$zur.indiceOffset,C$zu_=C$zur.vertexOffset;for(var C$zuc=0,C$zud=C$zuu;C$zuc<C$zud;C$zuc+=2){var C$zul=C$zu_+C$zuc;C$zuo[C$zus++]=C$zul,C$zuo[C$zus++]=C$zul+2,C$zuo[C$zus++]=C$zul+1,C$zuo[C$zus++]=C$zul+1,C$zuo[C$zus++]=C$zul+2,C$zuo[C$zus++]=C$zul+3}C$zuh.node._renderFlag|=C$zuf.FLAG_UPDATE_RENDER_DATA},MotionStreakAssembler}(C$zur.default);(C$zui.default=C$zut).register(C$zun,C$zut),C$zue.exports=C$zui.default},{"../../../components/CCMotionStreak":85,"../../assembler-2d":215,"../../render-flow":221}],239:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("../../../../assembler-2d"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zub=C$zut("../../../../../components/CCSprite").FillType;C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=BarFilledAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(BarFilledAssembler);function BarFilledAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=BarFilledAssembler.prototype;return C$zui.updateRenderData=function(C$zut){var C$zue=C$zut._spriteFrame;var C$zui;this.packToDynamicAtlas(C$zut,C$zue),C$zut._vertsDirty&&(C$zue=C$zut._fillStart,(C$zui=C$zut._fillRange)<0&&(C$zue+=C$zui,C$zui=-C$zui),C$zui=(C$zui=1<(C$zui=C$zue+C$zui)?1:C$zui)<0?0:C$zui,C$zui=(C$zue=(C$zue=1<C$zue?1:C$zue)<0?0:C$zue)+(C$zui=(C$zui-=C$zue)<0?0:C$zui),this.updateUVs(C$zut,C$zue,C$zui=1<C$zui?1:C$zui),this.updateVerts(C$zut,C$zue,C$zui),C$zut._vertsDirty=!1)},C$zui.updateUVs=function(C$zuh,C$zut,C$zue){var C$zuu=C$zuh._spriteFrame;var C$zu_=C$zuu._texture.width;var C$zud=C$zuu._texture.height;var C$zui=C$zuu._rect;var C$zuf,C$zup;var C$zur,C$zun,C$zua,C$zuo,C$zum,C$zuv,C$zuy,C$zug;C$zuu._rotated?(C$zuf=C$zui.x/C$zu_,C$zup=(C$zui.y+C$zui.width)/C$zud,C$zur=C$zua=C$zuf,C$zum=C$zuy=(C$zui.x+C$zui.height)/C$zu_,C$zuo=C$zug=C$zup,C$zun=C$zuv=C$zui.y/C$zud):(C$zuf=C$zui.x/C$zu_,C$zup=(C$zui.y+C$zui.height)/C$zud,C$zur=C$zum=C$zuf,C$zua=C$zuy=(C$zui.x+C$zui.width)/C$zu_,C$zun=C$zuo=C$zup,C$zuv=C$zug=C$zui.y/C$zud);var C$zus=this._renderData.vDatas[0];var C$zuc=this.uvOffset;var C$zul=this.floatsPerVert;switch(C$zuh._fillType){case C$zub.HORIZONTAL:C$zus[C$zuc]=C$zur+(C$zua-C$zur)*C$zut,C$zus[C$zuc+1]=C$zun+(C$zuo-C$zun)*C$zut,C$zus[C$zuc+C$zul]=C$zur+(C$zua-C$zur)*C$zue,C$zus[C$zuc+C$zul+1]=C$zun+(C$zuo-C$zun)*C$zue,C$zus[C$zuc+2*C$zul]=C$zum+(C$zuy-C$zum)*C$zut,C$zus[C$zuc+2*C$zul+1]=C$zuv+(C$zug-C$zuv)*C$zut,C$zus[C$zuc+3*C$zul]=C$zum+(C$zuy-C$zum)*C$zue,C$zus[C$zuc+3*C$zul+1]=C$zuv+(C$zug-C$zuv)*C$zue;break;case C$zub.VERTICAL:C$zus[C$zuc]=C$zur+(C$zum-C$zur)*C$zut,C$zus[C$zuc+1]=C$zun+(C$zuv-C$zun)*C$zut,C$zus[C$zuc+C$zul]=C$zua+(C$zuy-C$zua)*C$zut,C$zus[C$zuc+C$zul+1]=C$zuo+(C$zug-C$zuo)*C$zut,C$zus[C$zuc+2*C$zul]=C$zur+(C$zum-C$zur)*C$zue,C$zus[C$zuc+2*C$zul+1]=C$zun+(C$zuv-C$zun)*C$zue,C$zus[C$zuc+3*C$zul]=C$zua+(C$zuy-C$zua)*C$zue,C$zus[C$zuc+3*C$zul+1]=C$zuo+(C$zug-C$zuo)*C$zue;break;default:cc.errorID(2626)}},C$zui.updateVerts=function(C$zut,C$zue,C$zui){var C$zur=C$zut.node,C$zun=C$zur.width,C$zuh=C$zur.height,C$zuu=C$zur.anchorX*C$zun,C$zur=C$zur.anchorY*C$zuh;var C$zua=-C$zuu,C$zuo=-C$zur,C$zus=C$zun-C$zuu,C$zuc=C$zuh-C$zur;var C$zul;switch(C$zut._fillType){case C$zub.HORIZONTAL:C$zul=C$zua+(C$zus-C$zua)*C$zui,C$zua=C$zua+(C$zus-C$zua)*C$zue,C$zus=C$zul;break;case C$zub.VERTICAL:C$zul=C$zuo+(C$zuc-C$zuo)*C$zui,C$zuo=C$zuo+(C$zuc-C$zuo)*C$zue,C$zuc=C$zul;break;default:cc.errorID(2626)}C$zun=this._local;C$zun[0]=C$zua,C$zun[1]=C$zuo,C$zun[2]=C$zus,C$zun[3]=C$zuc,this.updateWorldVerts(C$zut)},BarFilledAssembler}(C$zur.default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../../../components/CCSprite":94,"../../../../assembler-2d":215}],240:[function(C$zut,C$zue,C$zui){"use strict";function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zui.__esModule=!0,C$zui.default=void 0;C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=MeshSpriteAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(MeshSpriteAssembler);function MeshSpriteAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=MeshSpriteAssembler.prototype;return C$zui.initData=function(C$zut){this._renderData.createFlexData(0,4,6,this.getVfmt())},C$zui.updateRenderData=function(C$zut){this.packToDynamicAtlas(C$zut,C$zut._spriteFrame);var C$zue=C$zut.spriteFrame;var C$zui;!C$zue||(C$zue=C$zue.vertices)&&(this.verticesCount=C$zue.x.length,this.indicesCount=C$zue.triangles.length,(C$zui=this._renderData._flexBuffer).reserve(this.verticesCount,this.indicesCount)&&(this.updateColor(C$zut),C$zut._vertsDirty=!0),C$zui.used(this.verticesCount,this.indicesCount),this.updateIndices(C$zue.triangles),C$zut._vertsDirty&&(this.updateUVs(C$zut),this.updateVerts(C$zut),this.updateWorldVerts(C$zut),C$zut._vertsDirty=!1))},C$zui.updateIndices=function(C$zut){this._renderData.iDatas[0].set(C$zut)},C$zui.updateUVs=function(C$zut){var C$zut=C$zut.spriteFrame.vertices,C$zue=C$zut.nu,C$zui=C$zut.nv;var C$zur=this.uvOffset;var C$zun=this.floatsPerVert;var C$zua=this._renderData.vDatas[0];for(var C$zuo=0;C$zuo<C$zue.length;C$zuo++){var C$zus=C$zun*C$zuo+C$zur;C$zua[C$zus]=C$zue[C$zuo],C$zua[C$zus+1]=C$zui[C$zuo]}},C$zui.updateVerts=function(C$zut){var C$zue=C$zut.node,C$zui=Math.abs(C$zue.width),C$zur=Math.abs(C$zue.height),C$zuh=C$zue.anchorX*C$zui,C$zuu=C$zue.anchorY*C$zur;var C$zue=C$zut.spriteFrame,C$zun=C$zue.vertices,C$zua=C$zun.x,C$zu_=C$zun.y,C$zun=C$zue._originalSize.width,C$zuo=C$zue._originalSize.height,C$zud=C$zue._rect.width,C$zuf=C$zue._rect.height,C$zup=C$zue._offset.x+(C$zun-C$zud)/2,C$zum=C$zue._offset.y+(C$zuo-C$zuf)/2;var C$zuv=C$zui/(C$zut.trim?C$zud:C$zun),C$zuy=C$zur/(C$zut.trim?C$zuf:C$zuo);var C$zus=this._local;if(C$zut.trim)for(var C$zuc=0,C$zug=C$zua.length;C$zuc<C$zug;C$zuc++){var C$zub=2*C$zuc;C$zus[C$zub]=(C$zua[C$zuc]-C$zup)*C$zuv-C$zuh,C$zus[1+C$zub]=(C$zuo-C$zu_[C$zuc]-C$zum)*C$zuy-C$zuu}else for(var C$zul=0,C$zuC=C$zua.length;C$zul<C$zuC;C$zul++){var C$zux=2*C$zul;C$zus[C$zux]=C$zua[C$zul]*C$zuv-C$zuh,C$zus[1+C$zux]=(C$zuo-C$zu_[C$zul])*C$zuy-C$zuu}},C$zui.updateWorldVerts=function(C$zut){C$zut=C$zut.node._worldMatrix.m;var C$zue=C$zut[0],C$zui=C$zut[1],C$zur=C$zut[4],C$zuh=C$zut[5],C$zuu=C$zut[12],C$zu_=C$zut[13];var C$zun=this._local;var C$zua=this._renderData.vDatas[0];var C$zuo=this.floatsPerVert;for(var C$zus=0,C$zud=this.verticesCount;C$zus<C$zud;C$zus++){var C$zuc=C$zun[2*C$zus];var C$zul=C$zun[2*C$zus+1];C$zua[C$zuo*C$zus]=C$zuc*C$zue+C$zul*C$zur+C$zuu,C$zua[C$zuo*C$zus+1]=C$zuc*C$zui+C$zul*C$zuh+C$zu_}},MeshSpriteAssembler}(((C$zut=C$zut("../../../../assembler-2d"))&&C$zut.__esModule?C$zut:{default:C$zut}).default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../../assembler-2d":215}],241:[function(C$zut,C$zui,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;C$zut=(C$zut=C$zut("../../../../assembler-2d"))&&C$zut.__esModule?C$zut:{default:C$zut};function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zum=2*Math.PI;var C$zuv=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)];var C$zuy=[0,0,0,0];var C$zug=[0,0,0,0,0,0,0,0];var C$zub=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)];var C$zuA=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)];var C$zuC=cc.v2(0,0);var C$zux=[];function _calcInsectedPoints(C$zut,C$zue,C$zui,C$zuh,C$zur,C$zun,C$zua){var C$zuo=Math.sin(C$zun);var C$zus=Math.cos(C$zun);var C$zuc;var C$zul;0!==Math.cos(C$zun)&&(C$zul=C$zuo/C$zus,0<(C$zut-C$zur.x)*C$zus&&(C$zuc=C$zur.y+C$zul*(C$zut-C$zur.x),C$zua[0].x=C$zut,C$zua[0].y=C$zuc),0<(C$zue-C$zur.x)*C$zus&&(C$zut=C$zur.y+C$zul*(C$zue-C$zur.x),C$zua[2].x=C$zue,C$zua[2].y=C$zut)),0!==Math.sin(C$zun)&&(C$zuc=C$zus/C$zuo,0<(C$zuh-C$zur.y)*C$zuo&&(C$zul=C$zur.x+C$zuc*(C$zuh-C$zur.y),C$zua[3].x=C$zul,C$zua[3].y=C$zuh),0<(C$zui-C$zur.y)*C$zuo&&(C$zue=C$zur.x+C$zuc*(C$zui-C$zur.y),C$zua[1].x=C$zue,C$zua[1].y=C$zui))}function _getVertAngle(C$zut,C$zue){var C$zui;if(C$zui=C$zue.x-C$zut.x,C$zue=C$zue.y-C$zut.y,0!=C$zui||0!=C$zue){if(0==C$zui)return 0<C$zue?.5*Math.PI:1.5*Math.PI;C$zut=Math.atan(C$zue/C$zui);return C$zui<0&&(C$zut+=Math.PI),C$zut}}C$zut=function(C$zup){var C$zut;C$zut=C$zup,(C$zue=RadialFilledAssembler).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(RadialFilledAssembler);function RadialFilledAssembler(){return C$zup.apply(this,arguments)||this}var C$zue=RadialFilledAssembler.prototype;return C$zue.initData=function(C$zut){this._renderData.createFlexData(0,4,6,this.getVfmt()),this.updateIndices()},C$zue.updateRenderData=function(C$zut){C$zup.prototype.updateRenderData.call(this,C$zut);var C$zue=C$zut.spriteFrame;if(this.packToDynamicAtlas(C$zut,C$zue),C$zut._vertsDirty){var C$zui=C$zut._fillStart;var C$zur=C$zut._fillRange;for(C$zur<0&&(C$zui+=C$zur,C$zur=-C$zur);1<=C$zui;)--C$zui;for(;C$zui<0;)C$zui+=1;C$zui*=C$zum,C$zur*=C$zum,C$zun=(C$zus=(C$zuf=C$zut).node).width,C$zua=C$zus.height,C$zuo=C$zus.anchorX*C$zun,C$zus=C$zus.anchorY*C$zua,C$zuc=-C$zuo,C$zul=-C$zus,C$zun-=C$zuo,C$zuo=C$zua-C$zus,(C$zua=C$zuy)[0]=C$zuc,C$zua[1]=C$zul,C$zua[2]=C$zun,C$zua[3]=C$zuo,C$zus=C$zuf._fillCenter,C$zuf=C$zuC.x=Math.min(Math.max(0,C$zus.x),1)*(C$zun-C$zuc)+C$zuc,C$zus=C$zuC.y=Math.min(Math.max(0,C$zus.y),1)*(C$zuo-C$zul)+C$zul,C$zuv[0].x=C$zuv[3].x=C$zuc,C$zuv[1].x=C$zuv[2].x=C$zun,C$zuv[0].y=C$zuv[1].y=C$zul,C$zuv[2].y=C$zuv[3].y=C$zuo,C$zuf!==C$zua[C$zux.length=0]&&(C$zux[0]=[3,0]),C$zuf!==C$zua[2]&&(C$zux[2]=[1,2]),C$zus!==C$zua[1]&&(C$zux[1]=[0,1]),C$zus!==C$zua[3]&&(C$zux[3]=[2,3]),C$zuc=C$zue._texture.width,C$zun=C$zue._texture.height,C$zul=C$zue._rect,C$zuo=C$zug,C$zue._rotated?(C$zuh=C$zul.x/C$zuc,C$zuu=(C$zul.x+C$zul.height)/C$zuc,C$zu_=C$zul.y/C$zun,C$zud=(C$zul.y+C$zul.width)/C$zun,C$zuo[0]=C$zuo[2]=C$zuh,C$zuo[4]=C$zuo[6]=C$zuu,C$zuo[3]=C$zuo[7]=C$zud,C$zuo[1]=C$zuo[5]=C$zu_):(C$zuh=C$zul.x/C$zuc,C$zuu=(C$zul.x+C$zul.width)/C$zuc,C$zu_=C$zul.y/C$zun,C$zud=(C$zul.y+C$zul.height)/C$zun,C$zuo[0]=C$zuo[4]=C$zuh,C$zuo[2]=C$zuo[6]=C$zuu,C$zuo[1]=C$zuo[3]=C$zud,C$zuo[5]=C$zuo[7]=C$zu_),_calcInsectedPoints(C$zuy[0],C$zuy[2],C$zuy[1],C$zuy[3],C$zuC,C$zui,C$zub),_calcInsectedPoints(C$zuy[0],C$zuy[2],C$zuy[1],C$zuy[3],C$zuC,C$zui+C$zur,C$zuA),this.updateVerts(C$zut,C$zui,C$zur),C$zut._vertsDirty=!1}var C$zuh,C$zuu,C$zu_,C$zud;var C$zuf,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul},C$zue.updateVerts=function(C$zut,C$zue,C$zuh){var C$zui=C$zue+C$zuh;var C$zur=this._local;var C$zun=C$zur.length=0;var C$zua=3*this.floatsPerVert;for(var C$zuo=0;C$zuo<4;++C$zuo){var C$zus=C$zux[C$zuo];if(C$zus)if(C$zum<=C$zuh)C$zur.length=C$zun+C$zua,this._generateTriangle(C$zur,C$zun,C$zuC,C$zuv[C$zus[0]],C$zuv[C$zus[1]]),C$zun+=C$zua;else{var C$zuc=_getVertAngle(C$zuC,C$zuv[C$zus[0]]);var C$zul=_getVertAngle(C$zuC,C$zuv[C$zus[1]]);C$zul<C$zuc&&(C$zul+=C$zum),C$zuc-=C$zum,C$zul-=C$zum;for(var C$zuu=0;C$zuu<3;++C$zuu)C$zui<=C$zuc||(C$zue<=C$zuc?(C$zur.length=C$zun+C$zua,C$zui<=C$zul?this._generateTriangle(C$zur,C$zun,C$zuC,C$zuv[C$zus[0]],C$zuA[C$zuo]):this._generateTriangle(C$zur,C$zun,C$zuC,C$zuv[C$zus[0]],C$zuv[C$zus[1]]),C$zun+=C$zua):C$zul<=C$zue||(C$zul<=C$zui?(C$zur.length=C$zun+C$zua,this._generateTriangle(C$zur,C$zun,C$zuC,C$zub[C$zuo],C$zuv[C$zus[1]])):(C$zur.length=C$zun+C$zua,this._generateTriangle(C$zur,C$zun,C$zuC,C$zub[C$zuo],C$zuA[C$zuo])),C$zun+=C$zua)),C$zuc+=C$zum,C$zul+=C$zum}}this.allocWorldVerts(C$zut),this.updateWorldVerts(C$zut)},C$zue.allocWorldVerts=function(C$zut){var C$zue=C$zut.node._color._val;C$zut=this._renderData;var C$zui=this.floatsPerVert;var C$zur=this._local;var C$zun=C$zur.length/C$zui;this.verticesCount=this.indicesCount=C$zun;var C$zua=C$zut._flexBuffer;C$zua.reserve(C$zun,C$zun)&&this.updateIndices(),C$zua.used(this.verticesCount,this.indicesCount);var C$zuo=C$zut.vDatas[0],C$zus=C$zut.uintVDatas[0];var C$zuh=this.uvOffset;for(var C$zuc=0;C$zuc<C$zur.length;C$zuc+=C$zui){var C$zul=C$zuc+C$zuh;C$zuo[C$zul]=C$zur[C$zul],C$zuo[C$zul+1]=C$zur[C$zul+1],C$zus[C$zul+2]=C$zue}},C$zue.updateIndices=function(){var C$zut=this._renderData.iDatas[0];for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue]=C$zue},C$zue.updateWorldVerts=function(C$zut){var C$zut=C$zut.node._worldMatrix.m,C$zue=C$zut[0],C$zui=C$zut[1],C$zur=C$zut[4],C$zun=C$zut[5],C$zuh=C$zut[12],C$zuu=C$zut[13];var C$zua=this._local;var C$zuo=this._renderData.vDatas[0];var C$zu_=this.floatsPerVert;for(var C$zus=0;C$zus<C$zua.length;C$zus+=C$zu_){var C$zuc=C$zua[C$zus];var C$zul=C$zua[C$zus+1];C$zuo[C$zus]=C$zuc*C$zue+C$zul*C$zur+C$zuh,C$zuo[C$zus+1]=C$zuc*C$zui+C$zul*C$zun+C$zuu}},C$zue._generateTriangle=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zuy[0];var C$zuo=C$zuy[1];var C$zus=C$zuy[2];var C$zuh=C$zuy[3];var C$zuc=this.floatsPerVert;C$zut[C$zue]=C$zui.x,C$zut[C$zue+1]=C$zui.y,C$zut[C$zue+C$zuc]=C$zur.x,C$zut[C$zue+C$zuc+1]=C$zur.y,C$zut[C$zue+2*C$zuc]=C$zun.x,C$zut[C$zue+2*C$zuc+1]=C$zun.y;var C$zuu=this.uvOffset;var C$zul;C$zul=(C$zui.x-C$zua)/(C$zus-C$zua),C$zui=(C$zui.y-C$zuo)/(C$zuh-C$zuo),this._generateUV(C$zul,C$zui,C$zut,C$zue+C$zuu),C$zul=(C$zur.x-C$zua)/(C$zus-C$zua),C$zui=(C$zur.y-C$zuo)/(C$zuh-C$zuo),this._generateUV(C$zul,C$zui,C$zut,C$zue+C$zuc+C$zuu),C$zul=(C$zun.x-C$zua)/(C$zus-C$zua),C$zui=(C$zun.y-C$zuo)/(C$zuh-C$zuo),this._generateUV(C$zul,C$zui,C$zut,C$zue+2*C$zuc+C$zuu)},C$zue._generateUV=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zug[0]+(C$zug[2]-C$zug[0])*C$zut;var C$zua=C$zug[1]+(C$zug[3]-C$zug[1])*C$zut;var C$zuo=C$zug[5]+(C$zug[7]-C$zug[5])*C$zut;C$zui[C$zur]=C$zun+(C$zug[4]+(C$zug[6]-C$zug[4])*C$zut-C$zun)*C$zue,C$zui[C$zur+1]=C$zua+(C$zuo-C$zua)*C$zue},RadialFilledAssembler}(C$zut.default);C$zue.default=C$zut,C$zui.exports=C$zue.default},{"../../../../assembler-2d":215}],242:[function(C$zut,C$zue,C$zui){"use strict";function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zui.__esModule=!0,C$zui.default=void 0;C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=SimpleSpriteAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(SimpleSpriteAssembler);function SimpleSpriteAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=SimpleSpriteAssembler.prototype;return C$zui.updateRenderData=function(C$zut){this.packToDynamicAtlas(C$zut,C$zut._spriteFrame),C$zut._vertsDirty&&(this.updateUVs(C$zut),this.updateVerts(C$zut),C$zut._vertsDirty=!1)},C$zui.updateUVs=function(C$zut){var C$zue=C$zut._spriteFrame.uv;var C$zui=this.uvOffset;var C$zur=this.floatsPerVert;var C$zun=this._renderData.vDatas[0];for(var C$zua=0;C$zua<4;C$zua++){var C$zuo=2*C$zua;var C$zus=C$zur*C$zua+C$zui;C$zun[C$zus]=C$zue[C$zuo],C$zun[C$zus+1]=C$zue[1+C$zuo]}},C$zui.updateVerts=function(C$zut){var C$zuh,C$zuu,C$zu_,C$zue=C$zut.node,C$zui=C$zue.width,C$zur=C$zue.height,C$zun=C$zue.anchorX*C$zui,C$zue=C$zue.anchorY*C$zur;var C$zua,C$zud,C$zuo,C$zus,C$zuc;C$zui=C$zut.trim?(C$zuh=-C$zun,C$zuu=-C$zue,C$zu_=C$zui-C$zun,C$zur-C$zue):(C$zus=(C$zuo=C$zut.spriteFrame)._originalSize.width,C$zua=C$zuo._originalSize.height,C$zul=C$zuo._rect.width,C$zud=C$zuo._rect.height,C$zuc=(C$zuo=C$zuo._offset).x+(C$zus-C$zul)/2,C$zul=C$zuo.x-(C$zus-C$zul)/2,C$zuh=C$zuc*(C$zuc=C$zui/C$zus)-C$zun,C$zuu=(C$zuo.y+(C$zua-C$zud)/2)*(C$zus=C$zur/C$zua)-C$zue,C$zu_=C$zui+C$zul*C$zuc-C$zun,C$zur+(C$zuo.y-(C$zua-C$zud)/2)*C$zus-C$zue);var C$zul=this._local;C$zul[0]=C$zuh,C$zul[1]=C$zuu,C$zul[2]=C$zu_,C$zul[3]=C$zui,this.updateWorldVerts(C$zut)},SimpleSpriteAssembler}(((C$zut=C$zut("../../../../assembler-2d"))&&C$zut.__esModule?C$zut:{default:C$zut}).default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../../assembler-2d":215}],243:[function(C$zut,C$zue,C$zui){"use strict";function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zui.__esModule=!0,C$zui.default=void 0;C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=SlicedAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(SlicedAssembler);function SlicedAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=SlicedAssembler.prototype;return C$zui.initData=function(C$zut){if(!(0<this._renderData.meshCount)){this._renderData.createData(0,this.verticesFloats,this.indicesCount);var C$zue=this._renderData.iDatas[0];var C$zui=0;for(var C$zur=0;C$zur<3;++C$zur)for(var C$zun=0;C$zun<3;++C$zun){var C$zua=4*C$zur+C$zun;C$zue[C$zui++]=C$zua,C$zue[C$zui++]=C$zua+1,C$zue[C$zui++]=C$zua+4,C$zue[C$zui++]=C$zua+1,C$zue[C$zui++]=C$zua+5,C$zue[C$zui++]=C$zua+4}}},C$zui.initLocal=function(){this._local=[],this._local.length=8},C$zui.updateRenderData=function(C$zut){var C$zue=C$zut._spriteFrame;this.packToDynamicAtlas(C$zut,C$zue),C$zut._vertsDirty&&(this.updateUVs(C$zut),this.updateVerts(C$zut),C$zut._vertsDirty=!1)},C$zui.updateVerts=function(C$zut){var C$zue=C$zut.node,C$zui=C$zue.width,C$zur=C$zue.height,C$zuh=C$zue.anchorX*C$zui,C$zue=C$zue.anchorY*C$zur;var C$zun=C$zut.spriteFrame;var C$zuu=C$zun.insetLeft;var C$zua=C$zun.insetRight;var C$zuo=C$zun.insetTop;C$zun=C$zun.insetBottom;var C$zus=C$zui-C$zuu-C$zua;var C$zuc=C$zur-C$zuo-C$zun;C$zua=C$zui/(C$zuu+C$zua);C$zuo=C$zur/(C$zuo+C$zun);C$zua=isNaN(C$zua)||1<C$zua?1:C$zua,C$zuo=isNaN(C$zuo)||1<C$zuo?1:C$zuo,C$zus=C$zus<0?0:C$zus,C$zuc=C$zuc<0?0:C$zuc;var C$zul=this._local;C$zul[0]=-C$zuh,C$zul[1]=-C$zue,C$zul[2]=C$zuu*C$zua-C$zuh,C$zul[3]=C$zun*C$zuo-C$zue,C$zul[4]=C$zul[2]+C$zus,C$zul[5]=C$zul[3]+C$zuc,C$zul[6]=C$zui-C$zuh,C$zul[7]=C$zur-C$zue,this.updateWorldVerts(C$zut)},C$zui.updateUVs=function(C$zut){var C$zue=this._renderData.vDatas[0];var C$zui=C$zut.spriteFrame.uvSliced;var C$zur=this.uvOffset;var C$zun=this.floatsPerVert;for(var C$zua=0;C$zua<4;++C$zua)for(var C$zuo=0;C$zuo<4;++C$zuo){var C$zus=4*C$zua+C$zuo;var C$zuc=C$zui[C$zus];C$zus=C$zus*C$zun;C$zue[C$zus+C$zur]=C$zuc.u,C$zue[C$zus+C$zur+1]=C$zuc.v}},C$zui.updateWorldVerts=function(C$zut){var C$zut=C$zut.node._worldMatrix.m,C$zue=C$zut[0],C$zui=C$zut[1],C$zuh=C$zut[4],C$zuu=C$zut[5],C$zu_=C$zut[12],C$zud=C$zut[13];var C$zur=this._local;var C$zun=this._renderData.vDatas[0];var C$zuf=this.floatsPerVert;for(var C$zua=0;C$zua<4;++C$zua){var C$zuo=C$zur[2*C$zua+1];for(var C$zus=0;C$zus<4;++C$zus){var C$zuc=C$zur[2*C$zus];var C$zul=(4*C$zua+C$zus)*C$zuf;C$zun[C$zul]=C$zuc*C$zue+C$zuo*C$zuh+C$zu_,C$zun[1+C$zul]=C$zuc*C$zui+C$zuo*C$zuu+C$zud}}},SlicedAssembler}(((C$zut=C$zut("../../../../assembler-2d"))&&C$zut.__esModule?C$zut:{default:C$zut}).default);C$zui.default=C$zut,Object.assign(C$zut.prototype,{verticesCount:16,indicesCount:54}),C$zue.exports=C$zui.default},{"../../../../assembler-2d":215}],244:[function(C$zut,C$zue,C$zui){"use strict";function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zui.__esModule=!0,C$zui.default=void 0;C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=TiledAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(TiledAssembler);function TiledAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=TiledAssembler.prototype;return C$zui.initData=function(C$zut){this.verticesCount=0,this.contentWidth=0,this.contentHeight=0,this.rectWidth=0,this.rectHeight=0,this.hRepeat=0,this.vRepeat=0,this.row=0,this.col=0,this._renderData.createFlexData(0,4,6,this.getVfmt()),this._updateIndices()},C$zui.initLocal=function(){this._local={x:[],y:[]}},C$zui._updateIndices=function(){var C$zut=this._renderData.iDatas[0];for(var C$zue=0,C$zui=0,C$zur=C$zut.length;C$zue<C$zur;C$zue+=6,C$zui+=4)C$zut[C$zue]=C$zui,C$zut[C$zue+1]=C$zui+1,C$zut[C$zue+2]=C$zui+2,C$zut[C$zue+3]=C$zui+1,C$zut[C$zue+4]=C$zui+3,C$zut[C$zue+5]=C$zui+2},C$zui.updateRenderData=function(C$zut){var C$zue=C$zut._spriteFrame;this.packToDynamicAtlas(C$zut,C$zue);var C$zui=C$zut.node;var C$zur=this.contentWidth=Math.abs(C$zui.width);C$zui=this.contentHeight=Math.abs(C$zui.height);var C$zun=C$zue._rect;var C$zua=C$zue.insetLeft,C$zuo=C$zue.insetRight,C$zus=C$zun.width-C$zua-C$zuo,C$zuc=C$zue.insetTop,C$zue=C$zue.insetBottom,C$zun=C$zun.height-C$zuc-C$zue;this.sizableWidth=C$zur-C$zua-C$zuo,this.sizableHeight=C$zui-C$zuc-C$zue,this.sizableWidth=0<this.sizableWidth?this.sizableWidth:0,this.sizableHeight=0<this.sizableHeight?this.sizableHeight:0;C$zur=this.hRepeat=0==C$zus?this.sizableWidth:this.sizableWidth/C$zus;C$zua=this.vRepeat=0==C$zun?this.sizableHeight:this.sizableHeight/C$zun;C$zuo=(this.row=Math.ceil(C$zua+2))*(this.col=Math.ceil(C$zur+2));this.verticesCount=4*C$zuo,this.indicesCount=6*C$zuo;C$zui=this._renderData._flexBuffer;C$zui.reserve(this.verticesCount,this.indicesCount)&&(this._updateIndices(),this.updateColor(C$zut)),C$zui.used(this.verticesCount,this.indicesCount),C$zut._vertsDirty&&(this.updateUVs(C$zut),this.updateVerts(C$zut),C$zut._vertsDirty=!1)},C$zui.updateVerts=function(C$zuh){var C$zut=C$zuh._spriteFrame;var C$zuu=C$zut._rect;var C$zue=C$zuh.node,C$zui=C$zue.anchorX*C$zue.width,C$zur=C$zue.anchorY*C$zue.height;var C$zu_=this.row,C$zud=this.col,C$zuf=this.contentWidth,C$zup=this.contentHeight;var C$zum=this._local,C$zuv=C$zum.x,C$zuy=C$zum.y;C$zuv.length=C$zuy.length=0;var C$zun=C$zut.insetLeft,C$zug=C$zut.insetRight,C$zua=C$zuu.width-C$zun-C$zug,C$zub=C$zut.insetTop,C$zuo=C$zut.insetBottom,C$zus=C$zuu.height-C$zub-C$zuo;var C$zuC=1<C$zue.width/(C$zun+C$zug)?1:C$zue.width/(C$zun+C$zug);var C$zux=1<C$zue.height/(C$zub+C$zuo)?1:C$zue.height/(C$zub+C$zuo);var C$zuA,C$zuS;C$zuA=0<C$zua?Math.floor(1e3*this.sizableWidth)/1e3%C$zua==0?C$zua:this.sizableWidth%C$zua:this.sizableWidth,C$zuS=0<C$zus?Math.floor(1e3*this.sizableHeight)/1e3%C$zus==0?C$zus:this.sizableHeight%C$zus:this.sizableHeight;for(var C$zuc=0;C$zuc<=C$zud;C$zuc++)0===C$zuc?C$zuv[C$zuc]=-C$zui:0<C$zuc&&C$zuc<C$zud?C$zuv[C$zuc]=1===C$zuc?C$zun*C$zuC+Math.min(C$zua,this.sizableWidth)-C$zui:0<C$zua?C$zuc===C$zud-1?C$zun+C$zuA+C$zua*(C$zuc-2)-C$zui:C$zun+Math.min(C$zua,this.sizableWidth)+C$zua*(C$zuc-2)-C$zui:C$zun+this.sizableWidth-C$zui:C$zuc===C$zud&&(C$zuv[C$zuc]=Math.min(C$zun+this.sizableWidth+C$zug,C$zuf)-C$zui);for(var C$zul=0;C$zul<=C$zu_;C$zul++)0===C$zul?C$zuy[C$zul]=-C$zur:0<C$zul&&C$zul<C$zu_?C$zuy[C$zul]=1===C$zul?C$zuo*C$zux+Math.min(C$zus,this.sizableHeight)-C$zur:0<C$zus?C$zul===C$zu_-1?C$zuo+C$zuS+(C$zul-2)*C$zus-C$zur:C$zuo+Math.min(C$zus,this.sizableHeight)+(C$zul-2)*C$zus-C$zur:C$zuo+this.sizableHeight-C$zur:C$zul===C$zu_&&(C$zuy[C$zul]=Math.min(C$zuo+this.sizableHeight+C$zub,C$zup)-C$zur);this.updateWorldVerts(C$zuh)},C$zui.updateWorldVerts=function(C$zuh){var C$zut=this._renderData;var C$zuu=this._local;var C$zu_=C$zuu.x,C$zud=C$zuu.y;var C$zue=C$zut.vDatas[0];var C$zuu=this.row,C$zuf=this.col;C$zut=C$zuh.node._worldMatrix.m;var C$zui=C$zut[0],C$zur=C$zut[1],C$zun=C$zut[4],C$zup=C$zut[5],C$zum=C$zut[12],C$zuv=C$zut[13];var C$zua,C$zuo,C$zus,C$zuc;var C$zuy=this.floatsPerVert;var C$zul=0;for(var C$zug=0,C$zub=C$zuu;C$zug<C$zub;++C$zug){C$zus=C$zud[C$zug],C$zuc=C$zud[C$zug+1];for(var C$zuC=0,C$zux=C$zuf;C$zuC<C$zux;++C$zuC)C$zua=C$zu_[C$zuC],C$zuo=C$zu_[C$zuC+1],C$zue[C$zul]=C$zua*C$zui+C$zus*C$zun+C$zum,C$zue[C$zul+1]=C$zua*C$zur+C$zus*C$zup+C$zuv,C$zue[C$zul+=C$zuy]=C$zuo*C$zui+C$zus*C$zun+C$zum,C$zue[C$zul+1]=C$zuo*C$zur+C$zus*C$zup+C$zuv,C$zue[C$zul+=C$zuy]=C$zua*C$zui+C$zuc*C$zun+C$zum,C$zue[C$zul+1]=C$zua*C$zur+C$zuc*C$zup+C$zuv,C$zue[C$zul+=C$zuy]=C$zuo*C$zui+C$zuc*C$zun+C$zum,C$zue[C$zul+1]=C$zuo*C$zur+C$zuc*C$zup+C$zuv,C$zul+=C$zuy}},C$zui.updateUVs=function(C$zuh){var C$zut=this._renderData.vDatas[0];if(C$zut){var C$zue=C$zuh._spriteFrame;var C$zuu=C$zue._rect;var C$zu_=C$zue.insetLeft,C$zud=C$zue.insetRight,C$zuf=C$zuu.width-C$zu_-C$zud,C$zu_=C$zue.insetTop,C$zud=C$zue.insetBottom,C$zup=C$zuu.height-C$zu_-C$zud;var C$zui=this.row,C$zur=this.col,C$zum=this.hRepeat,C$zuv=this.vRepeat;var C$zuy,C$zug;var C$zun=C$zuh.spriteFrame.uv;var C$zua=C$zuh.spriteFrame.uvSliced;var C$zub=C$zuh.spriteFrame._rotated;var C$zuo=this.floatsPerVert,C$zus=this.uvOffset;for(var C$zuc=0,C$zuC=C$zui;C$zuc<C$zuC;++C$zuc){C$zug=this.sizableHeight>C$zup?this.sizableHeight>=C$zuc*C$zup?1:C$zuv%1:C$zuv;for(var C$zul=0,C$zux=C$zur;C$zul<C$zux;++C$zul)C$zuy=this.sizableWidth>C$zuf?this.sizableWidth>=C$zul*C$zuf?1:C$zum%1:C$zum,C$zub?(C$zut[C$zus]=C$zun[0],C$zut[C$zus+1]=C$zun[1],C$zut[C$zus+=C$zuo]=C$zun[0],C$zut[C$zus+1]=C$zun[1]+(C$zun[7]-C$zun[1])*C$zuy,C$zut[C$zus+=C$zuo]=C$zun[0]+(C$zun[6]-C$zun[0])*C$zug,C$zut[C$zus+1]=C$zun[1],C$zut[C$zus+=C$zuo]=C$zut[C$zus-C$zuo],C$zut[C$zus+1]=C$zut[C$zus+1-2*C$zuo]):(0===C$zul?C$zut[C$zus]=C$zun[0]:0<C$zul&&C$zul<C$zur-1?C$zut[C$zus]=C$zua[1].u:C$zul===C$zur-1&&(C$zut[C$zus]=C$zua[2].u),0===C$zuc?C$zut[C$zus+1]=C$zua[0].v:0<C$zuc&&C$zuc<C$zui-1?C$zut[C$zus+1]=C$zua[4].v:C$zuc===C$zui-1&&(C$zut[C$zus+1]=C$zua[8].v),C$zus+=C$zuo,0===C$zul||0<C$zul&&C$zul<C$zur-1?C$zut[C$zus]=C$zua[1].u+(C$zua[2].u-C$zua[1].u)*C$zuy:C$zul===C$zur-1&&(C$zut[C$zus]=C$zua[3].u),0===C$zuc?C$zut[C$zus+1]=C$zua[0].v:0<C$zuc&&C$zuc<C$zui-1?C$zut[C$zus+1]=C$zua[4].v:C$zuc===C$zui-1&&(C$zut[C$zus+1]=C$zua[8].v),C$zus+=C$zuo,0===C$zul?C$zut[C$zus]=C$zun[0]:0<C$zul&&C$zul<C$zur-1?C$zut[C$zus]=C$zua[1].u:C$zul===C$zur-1&&(C$zut[C$zus]=C$zua[2].u),0===C$zuc||0<C$zuc&&C$zuc<C$zui-1?C$zut[C$zus+1]=C$zua[4].v+(C$zua[8].v-C$zua[4].v)*C$zug:C$zuc===C$zui-1&&(C$zut[C$zus+1]=C$zua[12].v),C$zut[C$zus+=C$zuo]=C$zut[C$zus-2*C$zuo],C$zut[C$zus+1]=C$zut[C$zus+1-C$zuo]),C$zus+=C$zuo}}},TiledAssembler}(((C$zut=C$zut("../../../../assembler-2d"))&&C$zut.__esModule?C$zut:{default:C$zut}).default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"../../../../assembler-2d":215}],245:[function(C$zut,C$zue,C$zui){"use strict";var C$zuu=_interopRequireDefault(C$zut("../../../assembler"));var C$zur=C$zut("../../../../components/CCSprite");var C$zun=_interopRequireDefault(C$zut("./2d/simple"));var C$zua=_interopRequireDefault(C$zut("./2d/sliced"));var C$zuo=_interopRequireDefault(C$zut("./2d/tiled"));var C$zus=_interopRequireDefault(C$zut("./2d/radial-filled"));var C$zuc=_interopRequireDefault(C$zut("./2d/bar-filled"));var C$zul=_interopRequireDefault(C$zut("./2d/mesh"));var C$zuh=_interopRequireDefault(C$zut("./3d/simple"));var C$zu_=_interopRequireDefault(C$zut("./3d/sliced"));var C$zud=_interopRequireDefault(C$zut("./3d/tiled"));var C$zuf=_interopRequireDefault(C$zut("./3d/radial-filled"));var C$zup=_interopRequireDefault(C$zut("./3d/bar-filled"));var C$zum=_interopRequireDefault(C$zut("./3d/mesh"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}C$zut={getConstructor:function(C$zut){var C$zue=C$zut.node.is3DNode;var C$zui=(C$zue?C$zuh:C$zun).default;switch(C$zut.type){case C$zur.Type.SLICED:C$zui=(C$zue?C$zu_:C$zua).default;break;case C$zur.Type.TILED:C$zui=(C$zue?C$zud:C$zuo).default;break;case C$zur.Type.FILLED:C$zui=(C$zut._fillType===C$zur.FillType.RADIAL?C$zue?C$zuf:C$zus:C$zue?C$zup:C$zuc).default;break;case C$zur.Type.MESH:C$zui=(C$zue?C$zum:C$zul).default}return C$zui},Simple:C$zun.default,Sliced:C$zua.default,Tiled:C$zuo.default,RadialFilled:C$zus.default,BarFilled:C$zuc.default,Mesh:C$zul.default,Simple3D:C$zuh.default,Sliced3D:C$zu_.default,Tiled3D:C$zud.default,RadialFilled3D:C$zuf.default,BarFilled3D:C$zup.default,Mesh3D:C$zum.default};C$zuu.default.register(cc.Sprite,C$zut)},{"../../../../components/CCSprite":94,"../../../assembler":217,"./2d/bar-filled":239,"./2d/mesh":240,"./2d/radial-filled":241,"./2d/simple":242,"./2d/sliced":243,"./2d/tiled":244,"./3d/bar-filled":void 0,"./3d/mesh":void 0,"./3d/radial-filled":void 0,"./3d/simple":void 0,"./3d/sliced":void 0,"./3d/tiled":void 0}],246:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;(C$zur=FlexBuffer.prototype)._reallocVData=function(C$zut,C$zue){this.vData=new Float32Array(C$zut),this.uintVData=new Uint32Array(this.vData.buffer),C$zue&&this.vData.set(C$zue),this._handler.updateMesh(this._index,this.vData,this.iData)},C$zur._reallocIData=function(C$zut,C$zue){this.iData=new Uint16Array(C$zut),C$zue&&this.iData.set(C$zue),this._handler.updateMesh(this._index,this.vData,this.iData)},C$zur.reserve=function(C$zut,C$zue){var C$zui=C$zut*this._verticesBytes>>2;var C$zur=this.vData.length;C$zut=!1;if(C$zur<C$zui){for(;C$zur<C$zui;)C$zur*=2;this._reallocVData(C$zur,this.vData),C$zut=!0}var C$zun=this.iData.length;if(C$zun<C$zue){for(;C$zun<C$zue;)C$zun*=2;this._reallocIData(C$zue,this.iData),C$zut=!0}return C$zut},C$zur.used=function(C$zut,C$zue){this.usedVertices=C$zut,this.usedIndices=C$zue,this.usedVerticesFloats=C$zut*this._verticesBytes>>2,this._handler.updateMeshRange(C$zut,C$zue)},C$zur.reset=function(){var C$zut=this._initVerticesCount*this._verticesBytes>>2;this._reallocVData(C$zut),this._reallocIData(this._initIndicesCount),this.usedVertices=0,this.usedVerticesFloats=0,this.usedIndices=0};C$zur=FlexBuffer;function FlexBuffer(C$zut,C$zue,C$zui,C$zur,C$zun){this._handler=C$zut,this._index=C$zue,this._vfmt=C$zun,this._verticesBytes=C$zun._bytes,this._initVerticesCount=C$zui,this._initIndicesCount=C$zur,this.reset()}var C$zur;C$zui.default=C$zur,cc.FlexBuffer=C$zur,C$zue.exports=C$zui.default},{}],247:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=(C$zut=C$zut("../../../renderer/gfx"))&&C$zut.__esModule?C$zut:{default:C$zut};C$zut=cc.Class({name:"cc.MeshBuffer",ctor:function(C$zut,C$zue){this.init(C$zut,C$zue)},init:function(C$zut,C$zue){this.byteOffset=0,this.indiceOffset=0,this.vertexOffset=0,this.indiceStart=0,this._dirty=!1,this._vertexFormat=C$zue,this._vertexBytes=this._vertexFormat._bytes,this._arrOffset=0,this._vbArr=[],this._vb=new C$zur.default.VertexBuffer(C$zut._device,C$zue,C$zur.default.USAGE_DYNAMIC,new ArrayBuffer,0),this._vbArr[0]=this._vb,this._ibArr=[],this._ib=new C$zur.default.IndexBuffer(C$zut._device,C$zur.default.INDEX_FMT_UINT16,C$zur.default.USAGE_STATIC,new ArrayBuffer,0),this._ibArr[0]=this._ib,this._vData=null,this._uintVData=null,this._iData=null,this._batcher=C$zut,this._initVDataCount=256*C$zue._bytes,this._initIDataCount=1536,this._offsetInfo={byteOffset:0,vertexOffset:0,indiceOffset:0},this._reallocBuffer()},uploadData:function(){var C$zut,C$zue;0!==this.byteOffset&&this._dirty&&(C$zut=new Float32Array(this._vData.buffer,0,this.byteOffset>>2),C$zue=new Uint16Array(this._iData.buffer,0,this.indiceOffset),this._vb.update(0,C$zut),this._ib.update(0,C$zue),this._dirty=!1)},switchBuffer:function(){var C$zut=++this._arrOffset;this.byteOffset=0,this.vertexOffset=0,this.indiceOffset=0,this.indiceStart=0,C$zut<this._vbArr.length?(this._vb=this._vbArr[C$zut],this._ib=this._ibArr[C$zut]):(this._vb=new C$zur.default.VertexBuffer(this._batcher._device,this._vertexFormat,C$zur.default.USAGE_DYNAMIC,new ArrayBuffer,0),this._vbArr[C$zut]=this._vb,this._ib=new C$zur.default.IndexBuffer(this._batcher._device,C$zur.default.INDEX_FMT_UINT16,C$zur.default.USAGE_STATIC,new ArrayBuffer,0),this._ibArr[C$zut]=this._ib)},checkAndSwitchBuffer:function(C$zut){65535<this.vertexOffset+C$zut&&(this.uploadData(),this._batcher._flush(),this.switchBuffer())},requestStatic:function(C$zut,C$zue){this.checkAndSwitchBuffer(C$zut);var C$zui=this.byteOffset+C$zut*this._vertexBytes;var C$zur=this.indiceOffset+C$zue;var C$zun=this._vData.byteLength;var C$zua=this._iData.length;if(C$zun<C$zui||C$zua<C$zur){for(;C$zun<C$zui||C$zua<C$zur;)this._initVDataCount*=2,this._initIDataCount*=2,C$zun=4*this._initVDataCount,C$zua=this._initIDataCount;this._reallocBuffer()}this._updateOffset(C$zut,C$zue,C$zui)},_updateOffset:function(C$zut,C$zue,C$zui){var C$zur=this._offsetInfo;C$zur.vertexOffset=this.vertexOffset,this.vertexOffset+=C$zut,C$zur.indiceOffset=this.indiceOffset,this.indiceOffset+=C$zue,C$zur.byteOffset=this.byteOffset,this.byteOffset=C$zui,this._dirty=!0},request:function(C$zut,C$zue){return this._batcher._buffer!==this&&(this._batcher._flush(),this._batcher._buffer=this),this.requestStatic(C$zut,C$zue),this._offsetInfo},_reallocBuffer:function(){this._reallocVData(!0),this._reallocIData(!0)},_reallocVData:function(C$zut){var C$zue;this._vData&&(C$zue=new Uint8Array(this._vData.buffer)),this._vData=new Float32Array(this._initVDataCount),this._uintVData=new Uint32Array(this._vData.buffer);var C$zui=new Uint8Array(this._uintVData.buffer);if(C$zue&&C$zut)for(var C$zur=0,C$zun=C$zue.length;C$zur<C$zun;C$zur++)C$zui[C$zur]=C$zue[C$zur]},_reallocIData:function(C$zut){var C$zue=this._iData;if(this._iData=new Uint16Array(this._initIDataCount),C$zue&&C$zut){var C$zui=this._iData;for(var C$zur=0,C$zun=C$zue.length;C$zur<C$zun;C$zur++)C$zui[C$zur]=C$zue[C$zur]}},reset:function(){this._arrOffset=0,this._vb=this._vbArr[0],this._ib=this._ibArr[0],this.byteOffset=0,this.indiceOffset=0,this.vertexOffset=0,this.indiceStart=0,this._dirty=!1},destroy:function(){this.reset();for(var C$zut=0;C$zut<this._vbArr.length;C$zut++)this._vbArr[C$zut].destroy();this._vbArr=null;for(var C$zue=0;C$zue<this._ibArr.length;C$zue++)this._ibArr[C$zue].destroy();this._ibArr=null,this._ib=null,this._vb=null},forwardIndiceStartToOffset:function(){this.indiceStart=this.indiceOffset}});cc.MeshBuffer=C$zue.exports=C$zut},{"../../../renderer/gfx":312}],248:[function(C$zut,C$zuc,C$zul){"use strict";var C$zui=_interopRequireDefault(C$zut("../../../renderer/core/input-assembler"));var C$zur=_interopRequireDefault(C$zut("../../../renderer/memop/recycle-pool"));var C$zuh=_interopRequireDefault(C$zut("../../../renderer/scene/model"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}var C$zue=C$zut("./vertex-format"),C$zun=C$zue.vfmtPosUvColor,C$zua=C$zue.vfmt3D;var C$zuu=C$zut("./quad-buffer");var C$zu_=C$zut("./mesh-buffer");var C$zud=C$zut("./spine-buffer");C$zue=C$zut("../../assets/material/CCMaterial");new(C$zut("../../platform/id-generater"))("VertextFormat");var C$zuo={};var C$zus=new C$zue;var C$zuf=new C$zui.default;C$zuf._count=0;function C$zuQQM(C$zut,C$zue){this._renderScene=C$zue,this._device=C$zut,this.walking=!1,this.material=C$zus,this.cullingMask=1,this._iaPool=new C$zur.default(function(){return new C$zui.default},16),this._modelPool=new C$zur.default(function(){return new C$zuh.default},16),this._quadBuffer=this.getBuffer("quad",C$zun),this._meshBuffer=this.getBuffer("mesh",C$zun),this._quadBuffer3D=this.getBuffer("quad",C$zua),this._meshBuffer3D=this.getBuffer("mesh",C$zua),this._buffer=this._meshBuffer,this._batchedModels=[],this._dummyNode=new cc.Node,this._sortKey=0,this.node=this._dummyNode,this.parentOpacity=1,this.parentOpacityDirty=0,this.worldMatDirty=0}C$zuQQM.prototype={constructor:C$zuQQM,reset:function(){this._iaPool.reset();var C$zut=this._renderScene;var C$zue=this._batchedModels;for(var C$zui=0;C$zui<C$zue.length;++C$zui)C$zue[C$zui].setInputAssembler(null),C$zue[C$zui].setEffect(null),C$zut.removeModel(C$zue[C$zui]);for(var C$zur in this._modelPool.reset(),C$zue.length=0,this._sortKey=0,C$zuo)C$zuo[C$zur].reset();this._buffer=this._meshBuffer,this.node=this._dummyNode,this.material=C$zus,this.cullingMask=1,this.parentOpacity=1,this.parentOpacityDirty=0,this.worldMatDirty=0},_flushMaterial:function(C$zut){var C$zue;!C$zut||(C$zut=(this.material=C$zut).effect)&&(C$zue=this._modelPool.add(),this._batchedModels.push(C$zue),C$zue.sortKey=this._sortKey++,C$zue._cullingMask=this.cullingMask,C$zue.setNode(this.node),C$zue.setEffect(C$zut,null),C$zue.setInputAssembler(C$zuf),this._renderScene.addModel(C$zue))},_flush:function(){var C$zut=this.material,C$zue=this._buffer,C$zui=C$zue.indiceOffset-C$zue.indiceStart;var C$zur;!this.walking||!C$zut||C$zui<=0||(C$zut=C$zut.effect)&&((C$zur=this._iaPool.add())._vertexBuffer=C$zue._vb,C$zur._indexBuffer=C$zue._ib,C$zur._start=C$zue.indiceStart,C$zur._count=C$zui,C$zui=this._modelPool.add(),this._batchedModels.push(C$zui),C$zui.sortKey=this._sortKey++,C$zui._cullingMask=this.cullingMask,C$zui.setNode(this.node),C$zui.setEffect(C$zut),C$zui.setInputAssembler(C$zur),this._renderScene.addModel(C$zui),C$zue.forwardIndiceStartToOffset())},_flushIA:function(C$zut){var C$zue,C$zui;!C$zut||(C$zue=this.material.effect)&&(C$zui=this._modelPool.add(),this._batchedModels.push(C$zui),C$zui.sortKey=this._sortKey++,C$zui._cullingMask=this.cullingMask,C$zui.setNode(this.node),C$zui.setEffect(C$zue),C$zui.setInputAssembler(C$zut),this._renderScene.addModel(C$zui))},terminate:function(){for(var C$zut in cc.dynamicAtlasManager&&cc.dynamicAtlasManager.enabled&&cc.dynamicAtlasManager.update(),this._flush(),C$zuo)C$zuo[C$zut].uploadData();this.walking=!1},getBuffer:function(C$zut,C$zue){var C$zui=C$zut+C$zue.getHash();var C$zur=C$zuo[C$zui];if(!C$zur){if("mesh"===C$zut)C$zur=new C$zu_(this,C$zue);else if("quad"===C$zut)C$zur=new C$zuu(this,C$zue);else{if("spine"!==C$zut)return cc.error("Not support buffer type ["+C$zut+"]"),null;C$zur=new C$zud(this,C$zue)}C$zuo[C$zui]=C$zur}return C$zur}},C$zuc.exports=C$zuQQM},{"../../../renderer/core/input-assembler":302,"../../../renderer/memop/recycle-pool":327,"../../../renderer/scene/model":333,"../../assets/material/CCMaterial":53,"../../platform/id-generater":205,"./mesh-buffer":247,"./quad-buffer":249,"./spine-buffer":251,"./vertex-format":252}],249:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./mesh-buffer");C$zut=cc.Class({name:"cc.QuadBuffer",extends:C$zut,_fillQuadBuffer:function(){var C$zut=this._initIDataCount/6;var C$zue=this._iData;for(var C$zui=0,C$zur=0;C$zui<C$zut;C$zui++){var C$zun=4*C$zui;C$zue[C$zur++]=C$zun,C$zue[C$zur++]=1+C$zun,C$zue[C$zur++]=2+C$zun,C$zue[C$zur++]=1+C$zun,C$zue[C$zur++]=3+C$zun,C$zue[C$zur++]=2+C$zun}var C$zua=new Uint16Array(this._iData.buffer,0,6*C$zut);this._ib.update(0,C$zua)},uploadData:function(){var C$zut;0!==this.byteOffset&&this._dirty&&(C$zut=new Float32Array(this._vData.buffer,0,this.byteOffset>>2),this._vb.update(0,C$zut),this._dirty=!1)},switchBuffer:function(){this._super();var C$zut=new Uint16Array(this._iData.buffer,0,this._initIDataCount);this._ib.update(0,C$zut)},_reallocBuffer:function(){this._reallocVData(!0),this._reallocIData(),this._fillQuadBuffer()}});cc.QuadBuffer=C$zue.exports=C$zut},{"./mesh-buffer":247}],250:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=RenderData;var C$zun=(C$zur=C$zut("./flex-buffer"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;var C$zua=C$zut("./vertex-format");function RenderData(){this.vDatas=[],this.uintVDatas=[],this.iDatas=[],this.meshCount=0,this._infos=null,this._flexBuffer=null}cc.js.mixin(RenderData.prototype,{init:function(C$zut){},clear:function(){this.vDatas.length=0,this.iDatas.length=0,this.uintVDatas.length=0,this.meshCount=0,this._infos=null,this._flexBuffer&&this._flexBuffer.reset()},updateMesh:function(C$zut,C$zue,C$zui){this.vDatas[C$zut]=C$zue,this.uintVDatas[C$zut]=new Uint32Array(C$zue.buffer,0,C$zue.length),this.iDatas[C$zut]=C$zui,this.meshCount=this.vDatas.length},updateMeshRange:function(C$zut,C$zue){},createData:function(C$zut,C$zue,C$zui){C$zue=new Float32Array(C$zue);C$zui=new Uint16Array(C$zui);this.updateMesh(C$zut,C$zue,C$zui)},createQuadData:function(C$zut,C$zue,C$zui){this.createData(C$zut,C$zue,C$zui),this.initQuadIndices(this.iDatas[C$zut])},createFlexData:function(C$zut,C$zue,C$zui,C$zur){C$zur=C$zur||C$zua.vfmtPosUvColor,this._flexBuffer=new C$zun.default(this,C$zut,C$zue,C$zui,C$zur)},initQuadIndices:function(C$zut){var C$zue=C$zut.length/6;for(var C$zui=0,C$zur=0;C$zui<C$zue;C$zui++){var C$zun=4*C$zui;C$zut[C$zur++]=C$zun,C$zut[C$zur++]=1+C$zun,C$zut[C$zur++]=2+C$zun,C$zut[C$zur++]=1+C$zun,C$zut[C$zur++]=3+C$zun,C$zut[C$zur++]=2+C$zun}}}),cc.RenderData=RenderData,C$zue.exports=C$zui.default},{"./flex-buffer":246,"./vertex-format":252}],251:[function(C$zut,C$zue,C$zui){"use strict";C$zut=cc.Class({name:"cc.SpineBuffer",extends:C$zut("./mesh-buffer"),requestStatic:function(C$zut,C$zue){this.checkAndSwitchBuffer(C$zut);var C$zui=this.byteOffset+C$zut*this._vertexBytes;var C$zur=this.indiceOffset+C$zue;var C$zun=this._vData.byteLength;var C$zua=this._iData.length;if(C$zun<C$zui||C$zua<C$zur){for(;C$zun<C$zui||C$zua<C$zur;)this._initVDataCount*=2,this._initIDataCount*=2,C$zun=4*this._initVDataCount,C$zua=this._initIDataCount;this._reallocBuffer()}C$zut=this._offsetInfo;C$zut.vertexOffset=this.vertexOffset,C$zut.indiceOffset=this.indiceOffset,C$zut.byteOffset=this.byteOffset},adjust:function(C$zut,C$zue){this.vertexOffset+=C$zut,this.indiceOffset+=C$zue,this.byteOffset=this.byteOffset+C$zut*this._vertexBytes,this._dirty=!0}});cc.SpineBuffer=C$zue.exports=C$zut},{"./mesh-buffer":247}],252:[function(C$zut,C$zue,C$zui){"use strict";C$zut=(C$zut=C$zut("../../../renderer/gfx"))&&C$zut.__esModule?C$zut:{default:C$zut};var C$zur=new C$zut.default.VertexFormat([{name:C$zut.default.ATTR_POSITION,type:C$zut.default.ATTR_TYPE_FLOAT32,num:3},{name:C$zut.default.ATTR_UV0,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2},{name:C$zut.default.ATTR_COLOR,type:C$zut.default.ATTR_TYPE_UINT8,num:4,normalize:!0}]);C$zur.name="vfmt3D",C$zut.default.VertexFormat.XYZ_UV_Color=C$zur;var C$zun=new C$zut.default.VertexFormat([{name:C$zut.default.ATTR_POSITION,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2},{name:C$zut.default.ATTR_UV0,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2},{name:C$zut.default.ATTR_COLOR,type:C$zut.default.ATTR_TYPE_UINT8,num:4,normalize:!0}]);C$zun.name="vfmtPosUvColor",C$zut.default.VertexFormat.XY_UV_Color=C$zun;var C$zua=new C$zut.default.VertexFormat([{name:C$zut.default.ATTR_POSITION,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2},{name:C$zut.default.ATTR_UV0,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2},{name:C$zut.default.ATTR_COLOR,type:C$zut.default.ATTR_TYPE_UINT8,num:4,normalize:!0},{name:C$zut.default.ATTR_COLOR0,type:C$zut.default.ATTR_TYPE_UINT8,num:4,normalize:!0}]);C$zua.name="vfmtPosUvTwoColor",C$zut.default.VertexFormat.XY_UV_Two_Color=C$zua;var C$zuo=new C$zut.default.VertexFormat([{name:C$zut.default.ATTR_POSITION,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2},{name:C$zut.default.ATTR_UV0,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2}]);C$zuo.name="vfmtPosUv",C$zut.default.VertexFormat.XY_UV=C$zuo;var C$zus=new C$zut.default.VertexFormat([{name:C$zut.default.ATTR_POSITION,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2},{name:C$zut.default.ATTR_COLOR,type:C$zut.default.ATTR_TYPE_UINT8,num:4,normalize:!0}]);C$zus.name="vfmtPosColor",C$zut.default.VertexFormat.XY_Color=C$zus;var C$zuc=new C$zut.default.VertexFormat([{name:C$zut.default.ATTR_POSITION,type:C$zut.default.ATTR_TYPE_FLOAT32,num:2}]);C$zuc.name="vfmtPos",C$zut.default.VertexFormat.XY=C$zuc,C$zue.exports={vfmt3D:C$zur,vfmtPosUvColor:C$zun,vfmtPosUvTwoColor:C$zua,vfmtPosUv:C$zuo,vfmtPosColor:C$zus,vfmtPos:C$zuc}},{"../../../renderer/gfx":312}],253:[function(C$zut,C$zue,C$zui){"use strict";C$zut("../platform/CCSys");var C$zur=/(\.[^\.\/\?\\]*)(\?.*)?$/;var C$zun=/((.*)(\/|\\|\\\\))?(.*?\..*$)?/;var C$zua=/[^\.\/]+\/\.\.\//;cc.path={join:function(){var C$zut=arguments.length;var C$zue="";for(var C$zui=0;C$zui<C$zut;C$zui++)C$zue=(C$zue+(""===C$zue?"":"/")+arguments[C$zui]).replace(/(\/|\\\\)$/,"");return C$zue},extname:function(C$zut){C$zut=C$zur.exec(C$zut);return C$zut?C$zut[1]:""},mainFileName:function(C$zut){if(C$zut){var C$zue=C$zut.lastIndexOf(".");if(-1!==C$zue)return C$zut.substring(0,C$zue)}return C$zut},basename:function(C$zut,C$zue){var C$zui=C$zut.indexOf("?");0<C$zui&&(C$zut=C$zut.substring(0,C$zui));C$zui=/(\/|\\)([^\/\\]+)$/g.exec(C$zut.replace(/(\/|\\)$/,""));if(!C$zui)return null;C$zui=C$zui[2];return C$zue&&C$zut.substring(C$zut.length-C$zue.length).toLowerCase()===C$zue.toLowerCase()?C$zui.substring(0,C$zui.length-C$zue.length):C$zui},dirname:function(C$zut){C$zut=C$zun.exec(C$zut);return C$zut?C$zut[2]:""},changeExtname:function(C$zut,C$zue){C$zue=C$zue||"";var C$zui=C$zut.indexOf("?");var C$zur="";return 0<C$zui&&(C$zur=C$zut.substring(C$zui),C$zut=C$zut.substring(0,C$zui)),(C$zui=C$zut.lastIndexOf("."))<0?C$zut+C$zue+C$zur:C$zut.substring(0,C$zui)+C$zue+C$zur},changeBasename:function(C$zut,C$zue,C$zui){if(0===C$zue.indexOf("."))return this.changeExtname(C$zut,C$zue);var C$zur=C$zut.indexOf("?");var C$zun="";C$zui=C$zui?this.extname(C$zut):"";return 0<C$zur&&(C$zun=C$zut.substring(C$zur),C$zut=C$zut.substring(0,C$zur)),C$zur=C$zut.lastIndexOf("/"),C$zut.substring(0,C$zur=C$zur<=0?0:C$zur+1)+C$zue+C$zui+C$zun},_normalize:function(C$zut){var C$zue;C$zut=String(C$zut);for(;C$zut=(C$zue=C$zut).replace(C$zua,""),C$zue.length!==C$zut.length;);return C$zut},sep:cc.sys.os===cc.sys.OS_WINDOWS?"\\":"/",stripSep:function(C$zut){return C$zut.replace(/[\/\\]$/,"")}},C$zue.exports=cc.path},{"../platform/CCSys":198}],254:[function(C$zut,C$zue,C$zui){"use strict";function C$zuazM(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this.a=C$zut,this.b=C$zue,this.c=C$zui,this.d=C$zur,this.tx=C$zun,this.ty=C$zua}C$zuazM.create=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){return{a:C$zut,b:C$zue,c:C$zui,d:C$zur,tx:C$zun,ty:C$zua}},C$zuazM.identity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},C$zuazM.clone=function(C$zut){return{a:C$zut.a,b:C$zut.b,c:C$zut.c,d:C$zut.d,tx:C$zut.tx,ty:C$zut.ty}},C$zuazM.concat=function(C$zut,C$zue,C$zui){var C$zur=C$zue.a,C$zun=C$zue.b,C$zua=C$zue.c,C$zuo=C$zue.d,C$zus=C$zue.tx,C$zue=C$zue.ty;return C$zut.a=C$zur*C$zui.a+C$zun*C$zui.c,C$zut.b=C$zur*C$zui.b+C$zun*C$zui.d,C$zut.c=C$zua*C$zui.a+C$zuo*C$zui.c,C$zut.d=C$zua*C$zui.b+C$zuo*C$zui.d,C$zut.tx=C$zus*C$zui.a+C$zue*C$zui.c+C$zui.tx,C$zut.ty=C$zus*C$zui.b+C$zue*C$zui.d+C$zui.ty,C$zut},C$zuazM.invert=function(C$zut,C$zue){var C$zui=C$zue.a,C$zur=C$zue.b,C$zun=C$zue.c,C$zua=C$zue.d;var C$zuo=1/(C$zui*C$zua-C$zur*C$zun);var C$zus=C$zue.tx,C$zue=C$zue.ty;return C$zut.a=C$zuo*C$zua,C$zut.b=-C$zuo*C$zur,C$zut.c=-C$zuo*C$zun,C$zut.d=C$zuo*C$zui,C$zut.tx=C$zuo*(C$zun*C$zue-C$zua*C$zus),C$zut.ty=C$zuo*(C$zur*C$zus-C$zui*C$zue),C$zut},C$zuazM.fromMat4=function(C$zut,C$zue){C$zue=C$zue.m;return C$zut.a=C$zue[0],C$zut.b=C$zue[1],C$zut.c=C$zue[4],C$zut.d=C$zue[5],C$zut.tx=C$zue[12],C$zut.ty=C$zue[13],C$zut},C$zuazM.transformVec2=function(C$zut,C$zue,C$zui,C$zur){var C$zun;return C$zue=void 0===C$zur?(C$zur=C$zui,C$zun=C$zue.x,C$zue.y):(C$zun=C$zue,C$zui),C$zut.x=C$zur.a*C$zun+C$zur.c*C$zue+C$zur.tx,C$zut.y=C$zur.b*C$zun+C$zur.d*C$zue+C$zur.ty,C$zut},C$zuazM.transformSize=function(C$zut,C$zue,C$zui){return C$zut.width=C$zui.a*C$zue.width+C$zui.c*C$zue.height,C$zut.height=C$zui.b*C$zue.width+C$zui.d*C$zue.height,C$zut},C$zuazM.transformRect=function(C$zut,C$zue,C$zui){var C$zur=C$zue.x;var C$zun=C$zue.y;var C$zua=C$zur+C$zue.width;C$zue=C$zun+C$zue.height;var C$zuo=C$zui.a*C$zur+C$zui.c*C$zun+C$zui.tx;var C$zus=C$zui.b*C$zur+C$zui.d*C$zun+C$zui.ty;var C$zuc=C$zui.a*C$zua+C$zui.c*C$zun+C$zui.tx;C$zun=C$zui.b*C$zua+C$zui.d*C$zun+C$zui.ty;var C$zul=C$zui.a*C$zur+C$zui.c*C$zue+C$zui.tx;C$zur=C$zui.b*C$zur+C$zui.d*C$zue+C$zui.ty;var C$zuh=C$zui.a*C$zua+C$zui.c*C$zue+C$zui.tx;C$zua=C$zui.b*C$zua+C$zui.d*C$zue+C$zui.ty;C$zue=Math.min(C$zuo,C$zuc,C$zul,C$zuh);C$zui=Math.max(C$zuo,C$zuc,C$zul,C$zuh);C$zuo=Math.min(C$zus,C$zun,C$zur,C$zua);C$zuc=Math.max(C$zus,C$zun,C$zur,C$zua);return C$zut.x=C$zue,C$zut.y=C$zuo,C$zut.width=C$zui-C$zue,C$zut.height=C$zuc-C$zuo,C$zut},C$zuazM.transformObb=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=C$zun.x;var C$zus=C$zun.y;var C$zuc=C$zun.width;C$zun=C$zun.height;var C$zul=C$zua.a*C$zuo+C$zua.c*C$zus+C$zua.tx;C$zuo=C$zua.b*C$zuo+C$zua.d*C$zus+C$zua.ty;C$zus=C$zua.a*C$zuc;C$zuc=C$zua.b*C$zuc;var C$zuh=C$zua.c*C$zun;C$zua=C$zua.d*C$zun;C$zue.x=C$zul,C$zue.y=C$zuo,C$zui.x=C$zus+C$zul,C$zui.y=C$zuc+C$zuo,C$zut.x=C$zuh+C$zul,C$zut.y=C$zua+C$zuo,C$zur.x=C$zus+C$zuh+C$zul,C$zur.y=C$zuc+C$zua+C$zuo},cc.AffineTransform=C$zue.exports=C$zuazM},{}],255:[function(C$zut,C$zus,C$zul){"use strict";var C$zue=C$zut("../platform/CCObject").Flags;var C$zuh=C$zut("./misc");var C$zui=C$zut("../platform/js");var C$zuu=C$zut("../platform/id-generater");var C$zu_=C$zut("../event-manager");var C$zur=C$zut("../renderer/render-flow");var C$zuc=C$zue.Destroying;var C$zun=C$zue.DontDestroy;var C$zua=C$zue.Deactivating;var C$zuo=new C$zuu("Node");function getConstructor(C$zut){return C$zut?"string"==typeof C$zut?C$zui.getClassByName(C$zut):C$zut:(cc.errorID(3804),null)}function findComponent(C$zut,C$zue){if(C$zue._sealed)for(var C$zui=0;C$zui<C$zut._components.length;++C$zui){var C$zur=C$zut._components[C$zui];if(C$zur.constructor===C$zue)return C$zur}else for(var C$zun=0;C$zun<C$zut._components.length;++C$zun){var C$zua=C$zut._components[C$zun];if(C$zua instanceof C$zue)return C$zua}return null}function findComponents(C$zut,C$zue,C$zui){if(C$zue._sealed)for(var C$zur=0;C$zur<C$zut._components.length;++C$zur){var C$zun=C$zut._components[C$zur];C$zun.constructor===C$zue&&C$zui.push(C$zun)}else for(var C$zua=0;C$zua<C$zut._components.length;++C$zua){var C$zuo=C$zut._components[C$zua];C$zuo instanceof C$zue&&C$zui.push(C$zuo)}}C$zut=cc.Class({name:"cc._BaseNode",extends:cc.Object,properties:{_parent:null,_children:[],_active:!0,_components:[],_prefab:null,_persistNode:{get:function(){return 0<(this._objFlags&C$zun)},set:function(C$zut){C$zut?this._objFlags|=C$zun:this._objFlags&=~C$zun}},name:{get:function(){return this._name},set:function(C$zut){this._name=C$zut}},uuid:{get:function(){return this._id}},children:{get:function(){return this._children}},childrenCount:{get:function(){return this._children.length}},active:{get:function(){return this._active},set:function(C$zut){var C$zue;this._active!==(C$zut=!!C$zut)&&(this._active=C$zut,(C$zue=this._parent)&&C$zue._activeInHierarchy&&cc.director._nodeActivator.activateNode(this,C$zut))}},activeInHierarchy:{get:function(){return this._activeInHierarchy}}},ctor:function(C$zut){this._name=void 0!==C$zut?C$zut:"New Node",this._activeInHierarchy=!1,this._id=C$zuo.getNewId(),cc.director._scheduler&&cc.director._scheduler.enableForTarget(this),this.__eventTargets=[]},getParent:function(){return this._parent},setParent:function(C$zut){var C$zue,C$zui;this._parent!==C$zut&&((C$zue=this._parent)&&C$zue._objFlags&C$zua&&cc.errorID(3821),this._parent=C$zut||null,this._onSetParent(C$zut),C$zut&&(C$zut._objFlags&C$zua&&cc.errorID(3821),C$zu_._setDirtyForNode(this),C$zut._children.push(this),C$zut.emit&&C$zut.emit("child-added",this),C$zut._renderFlag|=C$zur.FLAG_CHILDREN),C$zue?C$zue._objFlags&C$zuc||(C$zui=C$zue._children.indexOf(this),C$zue._children.splice(C$zui,1),C$zue.emit&&C$zue.emit("child-removed",this),this._onHierarchyChanged(C$zue),0===C$zue._children.length&&(C$zue._renderFlag&=~C$zur.FLAG_CHILDREN)):C$zut&&this._onHierarchyChanged(null))},attr:function(C$zut){C$zui.mixin(this,C$zut)},getChildByUuid:function(C$zut){if(!C$zut)return cc.log("Invalid uuid"),null;var C$zue=this._children;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui]._id===C$zut)return C$zue[C$zui];return null},getChildByName:function(C$zut){if(!C$zut)return cc.log("Invalid name"),null;var C$zue=this._children;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui]._name===C$zut)return C$zue[C$zui];return null},addChild:function(C$zut){cc.assertID(C$zut,1606),cc.assertID(null===C$zut._parent,1605),C$zut.setParent(this)},insertChild:function(C$zut,C$zue){C$zut.parent=this,C$zut.setSiblingIndex(C$zue)},getSiblingIndex:function(){return this._parent?this._parent._children.indexOf(this):0},setSiblingIndex:function(C$zut){var C$zue,C$zui;this._parent&&(this._parent._objFlags&C$zua?cc.errorID(3821):(C$zue=this._parent._children,(C$zut=-1!==C$zut?C$zut:C$zue.length-1)!==(C$zui=C$zue.indexOf(this))&&(C$zue.splice(C$zui,1),C$zut<C$zue.length?C$zue.splice(C$zut,0,this):C$zue.push(this),this._onSiblingIndexChanged&&this._onSiblingIndexChanged(C$zut))))},walk:function(C$zut,C$zue){var C$zui=cc._BaseNode;var C$zur=1;var C$zun,C$zua,C$zuo,C$zus;var C$zuc=C$zui._stacks[C$zui._stackId];C$zuc||C$zui._stacks.push(C$zuc=[]),C$zui._stackId++,C$zuc.length=0,C$zuc[0]=this;var C$zul=null;for(C$zus=!1;C$zur;)if(C$zua=C$zuc[--C$zur])if(!C$zus&&C$zut?C$zut(C$zua):C$zus&&C$zue&&C$zue(C$zua),C$zuc[C$zur]=null,C$zus){if(C$zus=!1,C$zun)if(C$zun[++C$zuo])C$zuc[C$zur]=C$zun[C$zuo],C$zur++;else if(C$zul&&(C$zuc[C$zur]=C$zul,C$zur++,C$zus=!0,C$zul._parent?(C$zuo=(C$zun=C$zul._parent._children).indexOf(C$zul),C$zul=C$zul._parent):C$zun=C$zul=null,C$zuo<0))break}else 0<C$zua._children.length?(C$zun=(C$zul=C$zua)._children,C$zuc[C$zur]=C$zun[C$zuo=0],C$zur++):(C$zuc[C$zur]=C$zua,C$zur++,C$zus=!0);C$zuc.length=0,C$zui._stackId--},cleanup:function(){},removeFromParent:function(C$zut){this._parent&&this._parent.removeChild(this,C$zut=void 0===C$zut?!0:C$zut)},removeChild:function(C$zut,C$zue){-1<this._children.indexOf(C$zut)&&(!C$zue&&void 0!==C$zue||C$zut.cleanup(),C$zut.parent=null)},removeAllChildren:function(C$zut){var C$zue=this._children;void 0===C$zut&&(C$zut=!0);for(var C$zui=C$zue.length-1;0<=C$zui;C$zui--){var C$zur=C$zue[C$zui];C$zur&&(C$zut&&C$zur.cleanup(),C$zur.parent=null)}this._children.length=0},isChildOf:function(C$zut){var C$zue=this;do{if(C$zue===C$zut)return!0}while(C$zue=C$zue._parent);return!1},getComponent:function(C$zut){C$zut=getConstructor(C$zut);return C$zut?findComponent(this,C$zut):null},getComponents:function(C$zut){var C$zut=getConstructor(C$zut),C$zue=[];return C$zut&&findComponents(this,C$zut,C$zue),C$zue},getComponentInChildren:function(C$zut){C$zut=getConstructor(C$zut);return C$zut?function findChildComponent(C$zut,C$zue){for(var C$zui=0;C$zui<C$zut.length;++C$zui){var C$zur=C$zut[C$zui];var C$zun=findComponent(C$zur,C$zue);if(C$zun)return C$zun;if(0<C$zur._children.length&&(C$zun=findChildComponent(C$zur._children,C$zue)))return C$zun}return null}(this._children,C$zut):null},getComponentsInChildren:function(C$zut){var C$zut=getConstructor(C$zut),C$zue=[];return C$zut&&(findComponents(this,C$zut,C$zue),function findChildComponents(C$zut,C$zue,C$zui){for(var C$zur=0;C$zur<C$zut.length;++C$zur){var C$zun=C$zut[C$zur];findComponents(C$zun,C$zue,C$zui),0<C$zun._children.length&&findChildComponents(C$zun._children,C$zue,C$zui)}}(this._children,C$zut,C$zue)),C$zue},_checkMultipleComp:!1,addComponent:function(C$zut){var C$zue;if("string"==typeof C$zut){if(!(C$zue=C$zui.getClassByName(C$zut)))return cc.errorID(3807,C$zut),cc._RFpeek()&&cc.errorID(3808,C$zut),null}else{if(!C$zut)return cc.errorID(3804),null;C$zue=C$zut}if("function"!=typeof C$zue)return cc.errorID(3809),null;if(!C$zui.isChildClassOf(C$zue,cc.Component))return cc.errorID(3810),null;C$zut=C$zue._requireComponent;if(C$zut&&!this.getComponent(C$zut)&&!this.addComponent(C$zut))return null;C$zut=new C$zue;return(C$zut.node=this)._components.push(C$zut),this._activeInHierarchy&&cc.director._nodeActivator.activateComp(C$zut),C$zut},_addComponentAt:!1,removeComponent:function(C$zut){C$zut?(C$zut=C$zut instanceof cc.Component?C$zut:this.getComponent(C$zut))&&C$zut.destroy():cc.errorID(3813)},_getDependComponent:!1,_removeComponent:function(C$zut){var C$zue;C$zut?this._objFlags&C$zuc||(-1!==(C$zue=this._components.indexOf(C$zut))?this._components.splice(C$zue,1):C$zut.node!==this&&cc.errorID(3815)):cc.errorID(3814)},destroy:function(){cc.Object.prototype.destroy.call(this)&&(this.active=!1)},destroyAllChildren:function(){var C$zut=this._children;for(var C$zue=0;C$zue<C$zut.length;++C$zue)C$zut[C$zue].destroy()},_onSetParent:function(C$zut){},_onPostActivated:function(){},_onBatchRestored:function(){},_onBatchCreated:function(){},_onHierarchyChanged:function(C$zut){var C$zue=this._parent;!this._persistNode||C$zue instanceof cc.Scene||cc.game.removePersistRootNode(this);C$zue=this._active&&!(!C$zue||!C$zue._activeInHierarchy);this._activeInHierarchy!==C$zue&&cc.director._nodeActivator.activateNode(this,C$zue)},_instantiate:function(C$zut){C$zut=C$zut||cc.instantiate._clone(this,this);var C$zue=this._prefab;C$zue&&this===C$zue.root&&C$zue.sync;return C$zut._parent=null,C$zut._onBatchRestored(),C$zut},_registerIfAttached:!1,_onPreDestroy:function(){var C$zut,C$zue;this._objFlags|=C$zuc;var C$zui=this._parent;var C$zur=C$zui&&C$zui._objFlags&C$zuc;var C$zun=this._children;for(C$zut=0,C$zue=C$zun.length;C$zut<C$zue;++C$zut)C$zun[C$zut]._destroyImmediate();for(C$zut=0,C$zue=this._components.length;C$zut<C$zue;++C$zut)this._components[C$zut]._destroyImmediate();var C$zua=this.__eventTargets;for(C$zut=0,C$zue=C$zua.length;C$zut<C$zue;++C$zut){var C$zuo=C$zua[C$zut];C$zuo&&C$zuo.targetOff(this)}var C$zus;return C$zua.length=0,this._persistNode&&cc.game.removePersistRootNode(this),!C$zur&&C$zui&&(C$zus=C$zui._children.indexOf(this),C$zui._children.splice(C$zus,1),C$zui.emit&&C$zui.emit("child-removed",this)),C$zur},onRestore:!1});C$zut.idGenerater=C$zuo,C$zut._stacks=[[]],C$zut._stackId=0,C$zut.prototype._onPreDestroyBase=C$zut.prototype._onPreDestroy,C$zut.prototype._onHierarchyChangedBase=C$zut.prototype._onHierarchyChanged;C$zuh.propertyDefine(C$zut,["parent","name","children","childrenCount"],{}),cc._BaseNode=C$zus.exports=C$zut},{"../event-manager":113,"../platform/CCObject":195,"../platform/id-generater":205,"../platform/js":209,"../renderer/render-flow":221,"./misc":264}],256:[function(C$zut,C$zue,C$zui){"use strict";C$zue.exports={binarySearchEpsilon:function(C$zut,C$zue){for(var C$zui=0,C$zur=C$zut.length-1,C$zun=C$zur>>>1;C$zui<=C$zur;C$zun=C$zui+C$zur>>>1){var C$zua=C$zut[C$zun];if(C$zue+1e-6<C$zua)C$zur=C$zun-1;else{if(!(C$zua<C$zue-1e-6))return C$zun;C$zui=C$zun+1}}return~C$zui}}},{}],257:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../components/CCRenderComponent");var C$zun=C$zut("../platform/CCMacro").BlendFactor;var C$zua=C$zut("../../renderer/gfx");C$zut=cc.Class({properties:{_srcBlendFactor:C$zun.SRC_ALPHA,_dstBlendFactor:C$zun.ONE_MINUS_SRC_ALPHA,srcBlendFactor:{get:function(){return this._srcBlendFactor},set:function(C$zut){this._srcBlendFactor!==C$zut&&(this._srcBlendFactor=C$zut,this._updateBlendFunc())},animatable:!1,type:C$zun,tooltip:!1,visible:!0},dstBlendFactor:{get:function(){return this._dstBlendFactor},set:function(C$zut){this._dstBlendFactor!==C$zut&&(this._dstBlendFactor=C$zut,this._updateBlendFunc())},animatable:!1,type:C$zun,tooltip:!1,visible:!0}},setMaterial:function(C$zut,C$zue){C$zut=C$zur.prototype.setMaterial.call(this,C$zut,C$zue);return this._srcBlendFactor===C$zun.SRC_ALPHA&&this._dstBlendFactor===C$zun.ONE_MINUS_SRC_ALPHA||this._updateMaterialBlendFunc(C$zut),C$zut},_updateMaterial:function(){this._updateBlendFunc()},_updateBlendFunc:function(){if(this._srcBlendFactor!==C$zun.SRC_ALPHA||this._dstBlendFactor!==C$zun.ONE_MINUS_SRC_ALPHA){var C$zut=this.getMaterials();for(var C$zue=0;C$zue<C$zut.length;C$zue++){var C$zui=C$zut[C$zue];this._updateMaterialBlendFunc(C$zui)}}},_updateMaterialBlendFunc:function(C$zut){C$zut.setBlend(!0,C$zua.BLEND_FUNC_ADD,this._srcBlendFactor,this._dstBlendFactor,C$zua.BLEND_FUNC_ADD,this._srcBlendFactor,this._dstBlendFactor)}});C$zue.exports=cc.BlendFunc=C$zut},{"../../renderer/gfx":312,"../components/CCRenderComponent":89,"../platform/CCMacro":194}],258:[function(C$zut,C$zue,C$zui){"use strict";var C$zua=C$zut("./misc").BASE64_VALUES;var C$zuo="0123456789abcdef".split("");C$zut=["","","",""];var C$zus=C$zut.concat(C$zut,"-",C$zut,"-",C$zut,"-",C$zut,"-",C$zut,C$zut,C$zut);var C$zuc=C$zus.map(function(C$zut,C$zue){return"-"===C$zut?NaN:C$zue}).filter(isFinite);C$zue.exports=function(C$zut){if(22!==C$zut.length)return C$zut;C$zus[0]=C$zut[0],C$zus[1]=C$zut[1];for(var C$zue=2,C$zui=2;C$zue<22;C$zue+=2){var C$zur=C$zua[C$zut.charCodeAt(C$zue)];var C$zun=C$zua[C$zut.charCodeAt(C$zue+1)];C$zus[C$zuc[C$zui++]]=C$zuo[C$zur>>2],C$zus[C$zuc[C$zui++]]=C$zuo[(3&C$zur)<<2|C$zun>>4],C$zus[C$zuc[C$zui++]]=C$zuo[15&C$zun]}return C$zus.join("")}},{"./misc":264}],259:[function(C$zut,C$zue,C$zui){"use strict";cc.find=C$zue.exports=function(C$zut,C$zue){if(null==C$zut)return cc.errorID(3814),null;if(!C$zue){var C$zui=cc.director.getScene();if(!C$zui)return null;C$zue=C$zui}var C$zur=C$zue;C$zui="/"!==C$zut[0]?0:1;var C$zun=C$zut.split("/");for(var C$zua=C$zui;C$zua<C$zun.length;C$zua++){var C$zuo=C$zun[C$zua];var C$zus=C$zur._children;C$zur=null;for(var C$zuc=0,C$zuh=C$zus.length;C$zuc<C$zuh;++C$zuc){var C$zul=C$zus[C$zuc];if(C$zul.name===C$zuo){C$zur=C$zul;break}}if(!C$zur)return null}return C$zur}},{}],260:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=(C$zua=C$zut("../assets/material/material-variant"))&&C$zua.__esModule?C$zua:{default:C$zua};var C$zun=C$zut("../assets/material/CCMaterial");var C$zua=cc.Class({properties:{_normalMaterial:null,normalMaterial:{get:function(){return this._normalMaterial},set:function(C$zut){this._normalMaterial=C$zut,this._updateDisabledState&&this._updateDisabledState()},type:C$zun,tooltip:!1,animatable:!1},_grayMaterial:null,grayMaterial:{get:function(){return this._grayMaterial},set:function(C$zut){this._grayMaterial=C$zut,this._updateDisabledState&&this._updateDisabledState()},type:C$zun,tooltip:!1,animatable:!1}},_switchGrayMaterial:function(C$zut,C$zue){var C$zui;C$zui=C$zut?(C$zui=(C$zui=this._grayMaterial)||C$zun.getBuiltinMaterial("2d-gray-sprite"),this._grayMaterial=C$zur.default.create(C$zui,C$zue)):(C$zui=(C$zui=this._normalMaterial)||C$zun.getBuiltinMaterial("2d-sprite",C$zue),this._normalMaterial=C$zur.default.create(C$zui,C$zue)),C$zue.setMaterial(0,C$zui)}});C$zue.exports=C$zua},{"../assets/material/CCMaterial":53,"../assets/material/material-variant":60}],261:[function(C$zut,C$zue,C$zui){"use strict";var C$zuc=/^(click)(\s)*=|(param)(\s)*=/;var C$zuu=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*align(\s)*=|(\s)*offset(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;function C$zuGIM(){this._parsedObject={},this._specialSymbolArray=[],this._specialSymbolArray.push([/&lt;/g,"<"]),this._specialSymbolArray.push([/&gt;/g,">"]),this._specialSymbolArray.push([/&amp;/g,"&"]),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,"'"]),this._specialSymbolArray.push([/&nbsp;/g," "])}C$zuGIM.prototype={constructor:C$zuGIM,parse:function(C$zut){this._resultObjectArray=[],this._stack=[];var C$zue=0;var C$zui=C$zut.length;for(;C$zue<C$zui;){var C$zur=C$zut.indexOf(">",C$zue);var C$zun=-1;var C$zua,C$zuo;0<=C$zur&&(C$zun=C$zut.lastIndexOf("<",C$zur))<C$zue-1&&(C$zun=C$zut.indexOf("<",C$zur+1),C$zur=C$zut.indexOf(">",C$zun+1)),C$zue=C$zun<0?(this._stack.pop(),this._processResult(C$zut.substring(C$zue)),C$zui):(C$zua=C$zut.substring(C$zue,C$zun),""===(C$zuo=C$zut.substring(C$zun+1,C$zur))&&(C$zua=C$zut.substring(C$zue,C$zur+1)),this._processResult(C$zua),-1===C$zur?C$zur=C$zun:"/"===C$zut.charAt(C$zun+1)?this._stack.pop():this._addToStack(C$zuo),C$zur+1)}return this._resultObjectArray},_attributeToObject:function(C$zut){var C$zue={};var C$zui=(C$zut=C$zut.trim()).match(/^(color|size)(\s)*=/);var C$zur;var C$zun;var C$zua;if(C$zui){if(C$zur=C$zui[0],""===(C$zut=C$zut.substring(C$zur.length).trim()))return C$zue;switch(C$zun=C$zut.indexOf(" "),C$zur[0]){case"c":C$zue.color=-1<C$zun?C$zut.substring(0,C$zun).trim():C$zut;break;case"s":C$zue.size=parseInt(C$zut)}return-1<C$zun&&(C$zua=C$zut.substring(C$zun+1).trim(),C$zua=this._processEventHandler(C$zua),C$zue.event=C$zua),C$zue}if((C$zui=C$zut.match(/^(br(\s)*\/)/))&&0<C$zui[0].length&&(C$zur=C$zui[0].trim()).startsWith("br")&&"/"===C$zur[C$zur.length-1])return C$zue.isNewLine=!0,this._resultObjectArray.push({text:"",style:{newline:!0}}),C$zue;if((C$zui=C$zut.match(/^(img(\s)*src(\s)*=[^>]+\/)/))&&0<C$zui[0].length&&(C$zur=C$zui[0].trim()).startsWith("img")&&"/"===C$zur[C$zur.length-1]){var C$zuo;C$zui=C$zut.match(C$zuu);var C$zus=!1;for(;C$zui;){if(C$zur=(C$zut=C$zut.substring(C$zut.indexOf(C$zui[0]))).substr(0,C$zui[0].length),C$zul=-1<(C$zun=(C$zuo=C$zut.substring(C$zur.length).trim()).indexOf(" "))?C$zuo.substr(0,C$zun):C$zuo,C$zur=(C$zur=C$zur.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),C$zut=C$zuo.substring(C$zun).trim(),C$zul.endsWith("/")&&(C$zul=C$zul.slice(0,-1)),"src"===C$zur){switch(C$zul.charCodeAt(0)){case 34:case 39:C$zus=!0,C$zul=C$zul.slice(1,-1)}C$zue.isImage=!0,C$zue.src=C$zul}else if("height"===C$zur)C$zue.imageHeight=parseInt(C$zul);else if("width"===C$zur)C$zue.imageWidth=parseInt(C$zul);else if("align"===C$zur){switch(C$zul.charCodeAt(0)){case 34:case 39:C$zul=C$zul.slice(1,-1)}C$zue.imageAlign=C$zul.toLocaleLowerCase()}else"offset"===C$zur?C$zue.imageOffset=C$zul:"click"===C$zur&&(C$zue.event=this._processEventHandler(C$zur+"="+C$zul));C$zue.event&&"param"===C$zur&&(C$zue.event.param=C$zul.replace(/^\"|\"$/g,"")),C$zui=C$zut.match(C$zuu)}return C$zus&&C$zue.isImage&&this._resultObjectArray.push({text:"",style:C$zue}),{}}if(C$zui=C$zut.match(/^(outline(\s)*[^>]*)/)){var C$zuc={color:"#ffffff",width:1};if(C$zut=C$zui[0].substring("outline".length).trim()){var C$zuh=/(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;var C$zul;for(C$zui=C$zut.match(C$zuh);C$zui;)C$zur=(C$zut=C$zut.substring(C$zut.indexOf(C$zui[0]))).substr(0,C$zui[0].length),C$zul=-1<(C$zun=(C$zuo=C$zut.substring(C$zur.length).trim()).indexOf(" "))?C$zuo.substr(0,C$zun):C$zuo,C$zur=(C$zur=C$zur.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),C$zut=C$zuo.substring(C$zun).trim(),"click"===C$zur?C$zue.event=this._processEventHandler(C$zur+"="+C$zul):"color"===C$zur?C$zuc.color=C$zul:"width"===C$zur&&(C$zuc.width=parseInt(C$zul)),C$zue.event&&"param"===C$zur&&(C$zue.event.param=C$zul.replace(/^\"|\"$/g,"")),C$zui=C$zut.match(C$zuh)}C$zue.outline=C$zuc}if((C$zui=C$zut.match(/^(on|u|b|i)(\s)*/))&&0<C$zui[0].length){switch(C$zur=C$zui[0],C$zut=C$zut.substring(C$zur.length).trim(),C$zur[0]){case"u":C$zue.underline=!0;break;case"i":C$zue.italic=!0;break;case"b":C$zue.bold=!0}if(""===C$zut)return C$zue;C$zua=this._processEventHandler(C$zut),C$zue.event=C$zua}return C$zue},_processEventHandler:function(C$zut){var C$zue=0;var C$zui={};var C$zur=C$zut.match(C$zuc);var C$zun=!1;for(;C$zur;){var C$zua=C$zur[0];var C$zuo="";var C$zus;C$zun=!1,'"'===(C$zut=C$zut.substring(C$zua.length).trim()).charAt(0)?(-1<(C$zue=C$zut.indexOf('"',1))&&(C$zuo=C$zut.substring(1,C$zue).trim(),C$zun=!0),C$zue++):"'"===C$zut.charAt(0)?(-1<(C$zue=C$zut.indexOf("'",1))&&(C$zuo=C$zut.substring(1,C$zue).trim(),C$zun=!0),C$zue++):C$zue=(C$zuo=(C$zus=C$zut.match(/(\S)+/))?C$zus[0]:"").length,C$zun&&(C$zui[C$zua=C$zua.substring(0,C$zua.length-1).trim()]=C$zuo),C$zur=(C$zut=C$zut.substring(C$zue).trim()).match(C$zuc)}return C$zui},_addToStack:function(C$zut){var C$zue=this._attributeToObject(C$zut);if(0===this._stack.length)this._stack.push(C$zue);else if(!C$zue.isNewLine&&!C$zue.isImage){var C$zui=this._stack[this._stack.length-1];for(var C$zur in C$zui)C$zue[C$zur]||(C$zue[C$zur]=C$zui[C$zur]);this._stack.push(C$zue)}},_processResult:function(C$zut){""!==C$zut&&(C$zut=this._escapeSpecialSymbol(C$zut),0<this._stack.length?this._resultObjectArray.push({text:C$zut,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:C$zut}))},_escapeSpecialSymbol:function(C$zut){for(var C$zue=0;C$zue<this._specialSymbolArray.length;++C$zue){var C$zui=this._specialSymbolArray[C$zue][0];var C$zur=this._specialSymbolArray[C$zue][1];C$zut=C$zut.replace(C$zui,C$zur)}return C$zut}},C$zue.exports=C$zuGIM},{}],262:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCPath"),C$zut("./profiler/CCProfiler"),C$zut("./find"),C$zut("./mutable-forward-iterator")},{"./CCPath":253,"./find":259,"./mutable-forward-iterator":265,"./profiler/CCProfiler":268}],263:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.postLoadMesh=function(C$zui,C$zur){!C$zui.loaded&&C$zui.nativeUrl?cc.loader.load(C$zui.nativeUrl,function(C$zut,C$zue){C$zue&&(C$zui._nativeAsset=C$zue),C$zur&&C$zur(C$zut)}):C$zur&&C$zur()}},{}],264:[function(C$zut,C$zue,C$zui){"use strict";var C$zuc=C$zut("../platform/js");C$zut={};C$zut.propertyDefine=function(C$zut,C$zue,C$zui){function define(C$zut,C$zue,C$zui,C$zur){var C$zun=Object.getOwnPropertyDescriptor(C$zut,C$zue);C$zun?(C$zun.get&&(C$zut[C$zui]=C$zun.get),C$zun.set&&C$zur&&(C$zut[C$zur]=C$zun.set)):(C$zun=C$zut[C$zui],C$zuc.getset(C$zut,C$zue,C$zun,C$zut[C$zur]))}var C$zur,C$zun=C$zut.prototype;for(var C$zua=0;C$zua<C$zue.length;C$zua++){var C$zuo=(C$zur=C$zue[C$zua])[0].toUpperCase()+C$zur.slice(1);define(C$zun,C$zur,"get"+C$zuo,"set"+C$zuo)}for(C$zur in C$zui){var C$zus=C$zui[C$zur];define(C$zun,C$zur,C$zus[0],C$zus[1])}},C$zut.NextPOT=function(C$zut){return--C$zut,(C$zut=(C$zut=(C$zut=(C$zut=(C$zut|=C$zut>>1)|C$zut>>2)|C$zut>>4)|C$zut>>8)|C$zut>>16)+1},C$zut.BUILTIN_CLASSID_RE=/^(?:cc|dragonBones|sp|ccsg)\..+/;var C$zur=new Array(123);for(var C$zun=0;C$zun<123;++C$zun)C$zur[C$zun]=64;for(var C$zua=0;C$zua<64;++C$zua)C$zur["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(C$zua)]=C$zua;C$zut.BASE64_VALUES=C$zur,C$zut.pushToMap=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zut[C$zue];C$zun?Array.isArray(C$zun)?C$zur?(C$zun.push(C$zun[0]),C$zun[0]=C$zui):C$zun.push(C$zui):C$zut[C$zue]=C$zur?[C$zui,C$zun]:[C$zun,C$zui]:C$zut[C$zue]=C$zui},C$zut.clampf=function(C$zut,C$zue,C$zui){var C$zur;return C$zui<C$zue&&(C$zur=C$zue,C$zue=C$zui,C$zui=C$zur),C$zut<C$zue?C$zue:C$zut<C$zui?C$zut:C$zui},C$zut.clamp01=function(C$zut){return C$zut<0?0:C$zut<1?C$zut:1},C$zut.lerp=function(C$zut,C$zue,C$zui){return C$zut+(C$zue-C$zut)*C$zui},C$zut.degreesToRadians=function(C$zut){return C$zut*cc.macro.RAD},C$zut.radiansToDegrees=function(C$zut){return C$zut*cc.macro.DEG},cc.misc=C$zue.exports=C$zut},{"../platform/js":209}],265:[function(C$zut,C$zue,C$zui){"use strict";function MutableForwardIterator(C$zut){this.i=0,this.array=C$zut}var C$zur=MutableForwardIterator.prototype;C$zur.remove=function(C$zut){C$zut=this.array.indexOf(C$zut);0<=C$zut&&this.removeAt(C$zut)},C$zur.removeAt=function(C$zut){this.array.splice(C$zut,1),C$zut<=this.i&&--this.i},C$zur.fastRemove=function(C$zut){C$zut=this.array.indexOf(C$zut);0<=C$zut&&this.fastRemoveAt(C$zut)},C$zur.fastRemoveAt=function(C$zut){var C$zue=this.array;C$zue[C$zut]=C$zue[C$zue.length-1],--C$zue.length,C$zut<=this.i&&--this.i},C$zur.push=function(C$zut){this.array.push(C$zut)},C$zue.exports=MutableForwardIterator},{}],266:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;(C$zur=Pool.prototype).get=function(){},C$zur.put=function(){},C$zur.clear=function(){};C$zur=Pool;function Pool(){this.enabled=!1,this.count=0,this.maxSize=1024}var C$zur;C$zui.default=C$zur,cc.pool={},C$zur.register=function(C$zut,C$zue){cc.pool[C$zut]=C$zue},C$zue.exports=C$zui.default},{}],267:[function(C$zut,C$zue,C$zui){"use strict";cc._PrefabInfo=cc.Class({name:"cc.PrefabInfo",properties:{root:null,asset:null,fileId:"",sync:!1,_synced:{default:!1,serializable:!1}}}),C$zue.exports={syncWithPrefab:function(C$zut){var C$zue=C$zut._prefab;if(C$zue._synced=!0,!C$zue.asset)return cc.errorID(3701,C$zut.name),void(C$zut._prefab=null);var C$zui=C$zut._objFlags;var C$zur=C$zut._parent;var C$zun=C$zut._id;var C$zua=C$zut._name;var C$zuo=C$zut._active;var C$zus=C$zut._eulerAngles.x;var C$zuh=C$zut._eulerAngles.y;var C$zuu=C$zut._eulerAngles.z;var C$zu_=C$zut._localZOrder;var C$zud=C$zut._globalZOrder;var C$zuc=C$zut._trs;var C$zuf=C$zuc[0];var C$zup=C$zuc[1];var C$zum=C$zuc[2];cc.game._isCloning=!0;var C$zul=C$zue.asset.data;C$zul._prefab._synced=!0,C$zul._iN$t=C$zut,cc.instantiate._clone(C$zul,C$zul),cc.game._isCloning=!1,C$zut._objFlags=C$zui,C$zut._parent=C$zur,C$zut._id=C$zun,C$zut._prefab=C$zue,C$zut._name=C$zua,C$zut._active=C$zuo,C$zut._localZOrder=C$zu_,C$zut._globalZOrder=C$zud,(C$zuc=C$zut._trs)[0]=C$zuf,C$zuc[1]=C$zup,C$zuc[2]=C$zum,C$zut._eulerAngles.x=C$zus,C$zut._eulerAngles.y=C$zuh,C$zut._eulerAngles.z=C$zuu}}},{}],268:[function(C$zut,C$zue,C$zus){"use strict";var C$zuc=C$zut("../../platform/CCMacro");var C$zul=C$zut("./perf-counter");var C$zui=!1;var C$zur=15;var C$zun=null;var C$zua=null;var C$zuo=null;function beforeUpdate(){var C$zut,C$zue;C$zua&&C$zua.isValid||((C$zua=new cc.Node("PROFILER-NODE")).x=C$zua.y=10,C$zua.groupIndex=cc.Node.BuiltinGroupIndex.DEBUG,cc.Camera._setupDebugCamera(),C$zua.zIndex=C$zuc.MAX_ZINDEX,cc.game.addPersistRootNode(C$zua),(C$zui=new cc.Node("LEFT-PANEL")).anchorX=C$zui.anchorY=0,(C$zut=C$zui.addComponent(cc.Label)).fontSize=C$zur,C$zut.lineHeight=C$zur,C$zui.parent=C$zua,(C$zui=new cc.Node("RIGHT-PANEL")).anchorX=1,C$zui.anchorY=0,C$zui.x=200,(C$zue=C$zui.addComponent(cc.Label)).horizontalAlign=cc.Label.HorizontalAlign.RIGHT,C$zue.fontSize=C$zur,C$zue.lineHeight=C$zur,C$zui.parent=C$zua,cc.sys.browserType!==cc.sys.BROWSER_TYPE_BAIDU_GAME_SUB&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB&&(C$zut.cacheMode=cc.Label.CacheMode.CHAR,C$zue.cacheMode=cc.Label.CacheMode.CHAR),C$zuo={left:C$zut,right:C$zue});var C$zui=cc.director._lastUpdate;C$zun.frame._counter.start(C$zui),C$zun.logic._counter.start(C$zui)}function afterUpdate(){var C$zut=performance.now();cc.director.isPaused()?C$zun.frame._counter.start(C$zut):C$zun.logic._counter.end(C$zut),C$zun.render._counter.start(C$zut)}function afterDraw(){var C$zut=performance.now();C$zun.render._counter.end(C$zut),C$zun.draws._counter.value=cc.renderer.drawCalls,C$zun.frame._counter.end(C$zut),C$zun.fps._counter.frame(C$zut);var C$zue="";var C$zui="";for(var C$zur in C$zun){C$zur=C$zun[C$zur];C$zur._counter.sample(C$zut),C$zue+=C$zur.desc+"\n",C$zui+=C$zur._counter.human()+"\n"}C$zuo&&(C$zuo.left.string=C$zue,C$zuo.right.string=C$zui)}cc.profiler=C$zue.exports={isShowingStats:function(){return C$zui},hideStats:function(){C$zui&&(C$zua&&(C$zua.active=!1),cc.director.off(cc.Director.EVENT_BEFORE_UPDATE,beforeUpdate),cc.director.off(cc.Director.EVENT_AFTER_UPDATE,afterUpdate),cc.director.off(cc.Director.EVENT_AFTER_DRAW,afterDraw),C$zui=!1)},showStats:function(){if(!C$zui){if(!C$zun){C$zun={frame:{desc:"Frame time (ms)",min:0,max:50,average:500},fps:{desc:"Framerate (FPS)",below:30,average:500},draws:{desc:"Draw call"},logic:{desc:"Game Logic (ms)",min:0,max:50,average:500,color:"#080"},render:{desc:"Renderer (ms)",min:0,max:50,average:500,color:"#f90"},mode:{desc:cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WebGL":"Canvas",min:1}};var C$zut=performance.now();for(var C$zue in C$zun)C$zun[C$zue]._counter=new C$zul(C$zue,C$zun[C$zue],C$zut)}C$zua&&(C$zua.active=!0),cc.director.on(cc.Director.EVENT_BEFORE_UPDATE,beforeUpdate),cc.director.on(cc.Director.EVENT_AFTER_UPDATE,afterUpdate),cc.director.on(cc.Director.EVENT_AFTER_DRAW,afterDraw),C$zui=!0}}}},{"../../platform/CCMacro":194,"./perf-counter":270}],269:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.Counter",ctor:function(C$zut,C$zue,C$zui){this._id=C$zut,this._opts=C$zue||{},this._value=0,this._total=0,this._averageValue=0,this._accumValue=0,this._accumSamples=0,this._accumStart=C$zui},properties:{value:{get:function(){return this._value},set:function(C$zut){this._value=C$zut}}},_average:function(C$zut,C$zue){this._opts.average&&(this._accumValue+=C$zut,++this._accumSamples,(C$zut=C$zue)-this._accumStart>=this._opts.average&&(this._averageValue=this._accumValue/this._accumSamples,this._accumValue=0,this._accumStart=C$zut,this._accumSamples=0))},sample:function(C$zut){this._average(this._value,C$zut)},human:function(){var C$zut=this._opts.average?this._averageValue:this._value;return Math.round(100*C$zut)/100},alarm:function(){return this._opts.below&&this._value<this._opts.below||this._opts.over&&this._value>this._opts.over}});C$zue.exports=C$zur},{}],270:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./counter");C$zut=cc.Class({name:"cc.PerfCounter",extends:C$zut,ctor:function(C$zut,C$zue,C$zui){this._time=C$zui},start:function(C$zut){this._time=C$zut},end:function(C$zut){this._value=C$zut-this._time,this._average(this._value)},tick:function(){this.end(),this.start()},frame:function(C$zut){var C$zue=C$zut-this._time;this._total++,(this._opts.average||1e3)<C$zue&&(this._value=1e3*this._total/C$zue,this._total=0,this._time=C$zut,this._average(this._value))}});C$zue.exports=C$zut},{"./counter":269}],271:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=new((C$zut=C$zut("../platform/js"))&&C$zut.__esModule?C$zut:{default:C$zut}).default.Pool(2);function LRUCache(C$zut){this.count=0,this.limit=C$zut,this.datas={},this.head=null,this.tail=null}C$zur.get=function(){return this._get()||{key:null,value:null,prev:null,next:null}},LRUCache.prototype.moveToHead=function(C$zut){C$zut.next=this.head,(C$zut.prev=null)!==this.head&&(this.head.prev=C$zut),this.head=C$zut,null===this.tail&&(this.tail=C$zut),this.count++,this.datas[C$zut.key]=C$zut},LRUCache.prototype.put=function(C$zut,C$zue){var C$zui=C$zur.get();C$zui.key=C$zut,C$zui.value=C$zue,this.count>=this.limit&&(C$zut=this.tail,delete this.datas[C$zut.key],this.count--,this.tail=C$zut.prev,this.tail.next=null,C$zut.prev=null,C$zut.next=null,C$zur.put(C$zut)),this.moveToHead(C$zui)},LRUCache.prototype.remove=function(C$zut){null!==C$zut.prev?C$zut.prev.next=C$zut.next:this.head=C$zut.next,null!==C$zut.next?C$zut.next.prev=C$zut.prev:this.tail=C$zut.prev,delete this.datas[C$zut.key],this.count--},LRUCache.prototype.get=function(C$zut){C$zut=this.datas[C$zut];return C$zut?(this.remove(C$zut),this.moveToHead(C$zut),C$zut.value):null},LRUCache.prototype.clear=function(){this.count=0,this.datas={},this.head=null,this.tail=null},LRUCache.prototype.has=function(C$zut){return!!this.datas[C$zut]},LRUCache.prototype.delete=function(C$zut){C$zut=this.datas[C$zut];this.remove(C$zut)};var C$zun=new LRUCache(100);cc.textUtils=C$zue.exports={BASELINE_RATIO:.26,MIDDLE_RATIO:.37,BASELINE_OFFSET:0,label_wordRex:/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430-\u044f\u0410-\u042f\u0401\u0451]+|\S)/,label_symbolRex:/^[!,.:;'}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/,label_lastWordRex:/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+|\S)$/,label_lastEnglish:/[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+$/,label_firstEnglish:/^[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]/,highSurrogateRex:/[\uD800-\uDBFF]/,lowSurrogateRex:/[\uDC00-\uDFFF]/,label_wrapinspection:!0,__CHINESE_REG:/^[\u4E00-\u9FFF\u3400-\u4DFF]+$/,__JAPANESE_REG:/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g,__KOREAN_REG:/^[\u1100-\u11FF]|[\u3130-\u318F]|[\uA960-\uA97F]|[\uAC00-\uD7AF]|[\uD7B0-\uD7FF]+$/,isUnicodeCJK:function(C$zut){return this.__CHINESE_REG.test(C$zut)||this.__JAPANESE_REG.test(C$zut)||this.__KOREAN_REG.test(C$zut)},isUnicodeSpace:function(C$zut){return 9<=(C$zut=C$zut.charCodeAt(0))&&C$zut<=13||32===C$zut||133===C$zut||160===C$zut||5760===C$zut||8192<=C$zut&&C$zut<=8202||8232===C$zut||8233===C$zut||8239===C$zut||8287===C$zut||12288===C$zut},safeMeasureText:function(C$zut,C$zue,C$zui){C$zui=(C$zui||C$zut.font)+"\ud83c\udfae"+C$zue;var C$zur=C$zun.get(C$zui);if(null!==C$zur)return C$zur;C$zur=C$zut.measureText(C$zue);C$zut=C$zur&&C$zur.width||0;return C$zun.put(C$zui,C$zut),C$zut},_safeSubstring:function(C$zut,C$zue,C$zui){var C$zur=C$zue,C$zun=C$zui;var C$zua=C$zut[C$zue];return this.lowSurrogateRex.test(C$zua)&&C$zur--,void 0!==C$zui&&(C$zui-1!==C$zue?(C$zue=C$zut[C$zui-1],this.highSurrogateRex.test(C$zue)&&C$zun--):this.highSurrogateRex.test(C$zua)&&C$zun++),C$zut.substring(C$zur,C$zun)},fragmentText:function(C$zuh,C$zut,C$zue,C$zuu){var C$zui=[];if(0===C$zuh.length||C$zue<0)return C$zui.push(""),C$zui;var C$zur=C$zuh;for(;C$zue<C$zut&&1<C$zur.length;){var C$zun=C$zur.length*(C$zue/C$zut)|0;var C$zua=this._safeSubstring(C$zur,C$zun);var C$zuo=C$zut-C$zuu(C$zua);var C$zus=C$zua;var C$zu_=0;var C$zud=0;for(;C$zue<C$zuo&&C$zud++<10;)C$zuo=C$zut-C$zuu(C$zua=this._safeSubstring(C$zur,C$zun=C$zun*(C$zue/C$zuo)|0));for(C$zud=0;C$zuo<=C$zue&&C$zud++<10;){var C$zuf;C$zua&&(C$zu_=(C$zuf=this.label_wordRex.exec(C$zua))?C$zuf[0].length:1,C$zus=C$zua),C$zun+=C$zu_,C$zuo=C$zut-C$zuu(C$zua=this._safeSubstring(C$zur,C$zun))}0===(C$zun-=C$zu_)?C$zus=this._safeSubstring(C$zur,C$zun=1):1===C$zun&&this.highSurrogateRex.test(C$zur[0])&&(C$zus=this._safeSubstring(C$zur,C$zun=2));var C$zuc,C$zul=this._safeSubstring(C$zur,0,C$zun);this.label_wrapinspection&&this.label_symbolRex.test(C$zus||C$zua)&&(0===(C$zun-=(C$zuc=this.label_lastWordRex.exec(C$zul))?C$zuc[0].length:0)&&(C$zun=1),C$zus=this._safeSubstring(C$zur,C$zun),C$zul=this._safeSubstring(C$zur,0,C$zun)),this.label_firstEnglish.test(C$zus)&&(C$zuc=this.label_lastEnglish.exec(C$zul))&&C$zul!==C$zuc[0]&&(C$zun-=C$zuc[0].length,C$zus=this._safeSubstring(C$zur,C$zun),C$zul=this._safeSubstring(C$zur,0,C$zun)),(0===C$zui.length||0<(C$zul=C$zul.trimLeft()).length)&&C$zui.push(C$zul),C$zut=C$zuu(C$zur=C$zus||C$zua)}return(0===C$zui.length||0<(C$zur=C$zur.trimLeft()).length)&&C$zui.push(C$zur),C$zui}}},{"../platform/js":209}],272:[function(C$zut,C$zue,C$zui){"use strict";var C$zun=C$zut("../assets/CCTexture2D");cc.textureUtil=C$zue.exports={loadImage:function(C$zut,C$zui,C$zur){cc.assertID(C$zut,3103);var C$zue=cc.loader.getRes(C$zut);return C$zue?C$zue.loaded?C$zui&&C$zui.call(C$zur,null,C$zue):C$zue.once("load",function(){C$zui&&C$zui.call(C$zur,null,C$zue)},C$zur):((C$zue=new C$zun).url=C$zut,cc.loader.load({url:C$zut,texture:C$zue},function(C$zut,C$zue){if(C$zut)return C$zui&&C$zui.call(C$zur,C$zut||new Error("Unknown error"));C$zue.handleLoadedTexture(),C$zui&&C$zui.call(C$zur,null,C$zue)})),C$zue},cacheImage:function(C$zut,C$zue){var C$zui;if(C$zut&&C$zue)return(C$zui=new C$zun).initWithElement(C$zue),cc.loader.flowOut({id:C$zut,url:C$zut,error:null,content:C$zui,complete:!1}),C$zui},postLoadTexture:function(C$zui,C$zur){!C$zui.loaded&&C$zui.url?cc.loader.load({url:C$zui.url,skips:C$zui._isCompressed()?void 0:["Loader"]},function(C$zut,C$zue){if(C$zue){if(C$zue instanceof cc.Texture2D)return cc.error("internal error: loader handle pipe must be skipped");C$zui.loaded||(C$zui._nativeAsset=C$zue)}C$zur&&C$zur(C$zut)}):C$zur&&C$zur()}}},{"../assets/CCTexture2D":50}],273:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./node-unit");C$zut=C$zut("./node-mem-pool");C$zue.exports={NodeMemPool:new C$zut(C$zur)}},{"./node-mem-pool":275,"./node-unit":276}],274:[function(C$zut,C$zue,C$zui){"use strict";function C$zuRLM(C$zut){this._unitClass=C$zut,this._pool=[],this._findOrder=[]}var C$zur=C$zuRLM.prototype;C$zur._initNative=function(){this._nativeMemPool=new renderer.MemPool},C$zur._buildUnit=function(C$zut){return new this._unitClass(C$zut,this)},C$zur._destroyUnit=function(C$zut){this._pool[C$zut]=null;for(var C$zue=0,C$zui=this._findOrder.length;C$zue<C$zui;C$zue++){var C$zur=this._findOrder[C$zue];if(C$zur&&C$zur.unitID==C$zut){this._findOrder.splice(C$zue,1);break}}},C$zur._findUnitID=function(){var C$zut=0;var C$zue=this._pool;for(;C$zue[C$zut];)C$zut++;return C$zut},C$zur.pop=function(){var C$zut=null;var C$zue=0;var C$zui=this._findOrder;var C$zur=this._pool;for(var C$zun=C$zui.length;C$zue<C$zun;C$zue++){var C$zua=C$zui[C$zue];if(C$zua&&C$zua.hasSpace()){C$zut=C$zua;break}}var C$zuo;C$zut||(C$zuo=this._findUnitID(),C$zut=this._buildUnit(C$zuo),C$zur[C$zuo]=C$zut,C$zui.push(C$zut),C$zue=C$zui.length-1);C$zur=C$zui[0];return C$zur!==C$zut&&(C$zui[0]=C$zut,C$zui[C$zue]=C$zur),C$zut.pop()},C$zur.push=function(C$zut){var C$zue=this._pool[C$zut.unitID];return C$zue.push(C$zut.index),1<this._findOrder.length&&C$zue.isAllFree()&&this._destroyUnit(C$zut.unitID),C$zue},C$zue.exports=C$zuRLM},{}],275:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./mem-pool");function C$zueLM(C$zut){C$zur.call(this,C$zut)}function C$zuLLM(){}C$zuLLM.prototype=C$zur.prototype;C$zut=C$zueLM.prototype=new C$zuLLM;C$zut._initNative=function(){this._nativeMemPool=new renderer.NodeMemPool},C$zut._destroyUnit=function(C$zut){C$zur.prototype._destroyUnit.call(this,C$zut)},C$zue.exports=C$zueLM},{"./mem-pool":274}],276:[function(C$zut,C$zue,C$zui){"use strict";var C$zua=C$zut("../../value-types/utils");Uint32Array;var C$zuo=10*C$zua.FLOAT_BYTES;var C$zus=16*C$zua.FLOAT_BYTES;var C$zuc=16*C$zua.FLOAT_BYTES;Uint32Array;Uint32Array;Int32Array;Uint8Array;Uint8Array;Uint32Array;C$zua.FLOAT_BYTES;var C$zul=C$zut("./unit-base");function C$zukSM(C$zut,C$zue){C$zul.call(this,C$zut,C$zue);var C$zui=this._contentNum;this.trsList=new C$zua.FLOAT_ARRAY_TYPE(10*C$zui),this.localMatList=new C$zua.FLOAT_ARRAY_TYPE(16*C$zui),this.worldMatList=new C$zua.FLOAT_ARRAY_TYPE(16*C$zui);for(var C$zur=0;C$zur<C$zui;C$zur++){var C$zun=this._spacesData[C$zur];C$zun.trs=new C$zua.FLOAT_ARRAY_TYPE(this.trsList.buffer,C$zur*C$zuo,10),C$zun.localMat=new C$zua.FLOAT_ARRAY_TYPE(this.localMatList.buffer,C$zur*C$zus,16),C$zun.worldMat=new C$zua.FLOAT_ARRAY_TYPE(this.worldMatList.buffer,C$zur*C$zuc,16)}}function C$zuzSM(){}C$zuzSM.prototype=C$zul.prototype,C$zukSM.prototype=new C$zuzSM,C$zue.exports=C$zukSM},{"../../value-types/utils":286,"./unit-base":277}],277:[function(C$zut,C$zue,C$zui){"use strict";function C$zuVSM(C$zut,C$zue,C$zui){C$zui=C$zui||128,this.unitID=C$zut,this._memPool=C$zue,this._data=new Uint16Array(2),this._data[0]=0,this._data[1]=0,this._contentNum=C$zui,this._signData=new Uint16Array(2*this._contentNum),this._spacesData=[];for(var C$zur=0;C$zur<C$zui;C$zur++){var C$zun=2*C$zur;this._signData[0+C$zun]=C$zur+1,this._signData[1+C$zun]=0,this._spacesData[C$zur]={index:C$zur,unitID:C$zut}}this._signData[2*(C$zui-1)]=65535}var C$zur=C$zuVSM.prototype;C$zur.hasSpace=function(){return 65535!==this._data[0]},C$zur.isAllFree=function(){return 0==this._data[1]},C$zur.pop=function(){var C$zut=this._data[0];if(65535===C$zut)return null;var C$zue=2*C$zut;C$zut=this._spacesData[C$zut];return this._signData[1+C$zue]=1,this._data[0]=this._signData[0+C$zue],this._data[1]++,C$zut},C$zur.push=function(C$zut){var C$zue=2*C$zut;this._signData[1+C$zue]=0,this._signData[0+C$zue]=this._data[0],this._data[0]=C$zut,this._data[1]--},C$zur.dump=function(){var C$zut=0;var C$zue=this._data[0];var C$zui="";for(;65535!=C$zue;)C$zut++,C$zui+=C$zue+"->",C$zue=this._signData[2*C$zue+0];var C$zur=0;var C$zun="";var C$zua=this._contentNum;for(var C$zuo=0;C$zuo<C$zua;C$zuo++)1==this._signData[2*C$zuo+1]&&(C$zur++,C$zun+=C$zuo+"->");var C$zus=C$zut+C$zur;console.log("unitID:",this.unitID,"spaceNum:",C$zut,"calc using num:",C$zur,"store using num:",this._data[1],"calc total num:",C$zus,"actually total num:",this._contentNum),console.log("free info:",C$zui),console.log("using info:",C$zun),C$zur!=this._data[1]&&cc.error("using num error","calc using num:",C$zur,"store using num:",this._data[1]),C$zut+C$zur!=this._contentNum&&cc.error("total num error","calc total num:",C$zus,"actually total num:",this._contentNum)},C$zue.exports=C$zuVSM},{}],278:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=_interopRequireDefault(C$zut("./value-type"));var C$zuo=_interopRequireDefault(C$zut("../platform/CCClass"));var C$zun=_interopRequireDefault(C$zut("../utils/misc"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createClass(C$zut,C$zue,C$zui){return C$zue&&_defineProperties(C$zut.prototype,C$zue),C$zui&&_defineProperties(C$zut,C$zui),C$zut}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zua=function(C$zua){var C$zut;C$zut=C$zua,(C$zue=Color).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(Color);function Color(C$zut,C$zue,C$zui,C$zur){var C$zun;return void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=255),(C$zun=C$zua.call(this)||this)._val=0,"object"==typeof C$zut&&(C$zue=C$zut.g,C$zui=C$zut.b,C$zur=C$zut.a,C$zut=C$zut.r),C$zun._val=(C$zur<<24>>>0)+(C$zui<<16)+(C$zue<<8)+C$zut,C$zun}Color.copy=function(C$zut,C$zue){return C$zut.r=C$zue.r,C$zut.g=C$zue.g,C$zut.b=C$zue.b,C$zut.a=C$zue.a,C$zut},Color.clone=function(C$zut){return new Color(C$zut.r,C$zut.g,C$zut.b,C$zut.a)},Color.set=function(C$zut,C$zue,C$zui,C$zur,C$zun){return void 0===C$zui&&(C$zui=255),void 0===C$zur&&(C$zur=255),void 0===C$zun&&(C$zun=255),C$zut.r=C$zue=void 0===C$zue?255:C$zue,C$zut.g=C$zui,C$zut.b=C$zur,C$zut.a=C$zun,C$zut},Color.fromHex=function(C$zut,C$zue){var C$zui=(C$zue>>16&255)/255;var C$zur=(C$zue>>8&255)/255;var C$zun=(255&C$zue)/255;return C$zut.r=(C$zue>>24)/255,C$zut.g=C$zui,C$zut.b=C$zur,C$zut.a=C$zun,C$zut},Color.add=function(C$zut,C$zue,C$zui){return C$zut.r=C$zue.r+C$zui.r,C$zut.g=C$zue.g+C$zui.g,C$zut.b=C$zue.b+C$zui.b,C$zut.a=C$zue.a+C$zui.a,C$zut},Color.subtract=function(C$zut,C$zue,C$zui){return C$zut.r=C$zue.r-C$zui.r,C$zut.g=C$zue.g-C$zui.g,C$zut.b=C$zue.b-C$zui.b,C$zut.a=C$zue.a-C$zui.a,C$zut},Color.multiply=function(C$zut,C$zue,C$zui){return C$zut.r=C$zue.r*C$zui.r,C$zut.g=C$zue.g*C$zui.g,C$zut.b=C$zue.b*C$zui.b,C$zut.a=C$zue.a*C$zui.a,C$zut},Color.divide=function(C$zut,C$zue,C$zui){return C$zut.r=C$zue.r/C$zui.r,C$zut.g=C$zue.g/C$zui.g,C$zut.b=C$zue.b/C$zui.b,C$zut.a=C$zue.a/C$zui.a,C$zut},Color.scale=function(C$zut,C$zue,C$zui){return C$zut.r=C$zue.r*C$zui,C$zut.g=C$zue.g*C$zui,C$zut.b=C$zue.b*C$zui,C$zut.a=C$zue.a*C$zui,C$zut},Color.lerp=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zue.r,C$zua=C$zue.g,C$zuo=C$zue.b,C$zue=C$zue.a;return C$zut.r=C$zun+C$zur*(C$zui.r-C$zun),C$zut.g=C$zua+C$zur*(C$zui.g-C$zua),C$zut.b=C$zuo+C$zur*(C$zui.b-C$zuo),C$zut.a=C$zue+C$zur*(C$zui.a-C$zue),C$zut},Color.toArray=function(C$zut,C$zue,C$zui){var C$zur=C$zue instanceof Color||1<C$zue.a?1/255:1;return C$zut[(C$zui=void 0===C$zui?0:C$zui)+0]=C$zue.r*C$zur,C$zut[C$zui+1]=C$zue.g*C$zur,C$zut[C$zui+2]=C$zue.b*C$zur,C$zut[C$zui+3]=C$zue.a*C$zur,C$zut},Color.fromArray=function(C$zut,C$zue,C$zui){return C$zue.r=255*C$zut[(C$zui=void 0===C$zui?0:C$zui)+0],C$zue.g=255*C$zut[C$zui+1],C$zue.b=255*C$zut[C$zui+2],C$zue.a=255*C$zut[C$zui+3],C$zue},_createClass(Color,null,[{key:"WHITE",get:function(){return new Color(255,255,255,255)}},{key:"BLACK",get:function(){return new Color(0,0,0,255)}},{key:"TRANSPARENT",get:function(){return new Color(0,0,0,0)}},{key:"GRAY",get:function(){return new Color(127.5,127.5,127.5)}},{key:"RED",get:function(){return new Color(255,0,0)}},{key:"GREEN",get:function(){return new Color(0,255,0)}},{key:"BLUE",get:function(){return new Color(0,0,255)}},{key:"YELLOW",get:function(){return new Color(255,235,4)}},{key:"ORANGE",get:function(){return new Color(255,127,0)}},{key:"CYAN",get:function(){return new Color(0,255,255)}},{key:"MAGENTA",get:function(){return new Color(255,0,255)}}]);var C$zue=Color.prototype;return C$zue.clone=function(){var C$zut=new Color;return C$zut._val=this._val,C$zut},C$zue.equals=function(C$zut){return C$zut&&this._val===C$zut._val},C$zue.lerp=function(C$zut,C$zue,C$zui){C$zui=C$zui||new Color;var C$zur=this.r;var C$zun=this.g;var C$zua=this.b;var C$zuo=this.a;return C$zui.r=C$zur+(C$zut.r-C$zur)*C$zue,C$zui.g=C$zun+(C$zut.g-C$zun)*C$zue,C$zui.b=C$zua+(C$zut.b-C$zua)*C$zue,C$zui.a=C$zuo+(C$zut.a-C$zuo)*C$zue,C$zui},C$zue.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},C$zue.getR=function(){return 255&this._val},C$zue.setR=function(C$zut){return C$zut=~~C$zun.default.clampf(C$zut,0,255),this._val=(4294967040&this._val|C$zut)>>>0,this},C$zue.getG=function(){return(65280&this._val)>>8},C$zue.setG=function(C$zut){return C$zut=~~C$zun.default.clampf(C$zut,0,255),this._val=(4294902015&this._val|C$zut<<8)>>>0,this},C$zue.getB=function(){return(16711680&this._val)>>16},C$zue.setB=function(C$zut){return C$zut=~~C$zun.default.clampf(C$zut,0,255),this._val=(4278255615&this._val|C$zut<<16)>>>0,this},C$zue.getA=function(){return(4278190080&this._val)>>>24},C$zue.setA=function(C$zut){return C$zut=~~C$zun.default.clampf(C$zut,0,255),this._val=(16777215&this._val|C$zut<<24)>>>0,this},C$zue.toCSS=function(C$zut){return C$zut&&"rgba"!==C$zut?"rgb"===C$zut?"rgb("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+")":"#"+this.toHEX(C$zut):"rgba("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+","+(this.a/255).toFixed(2)+")"},C$zue.fromHEX=function(C$zut){C$zut=0===C$zut.indexOf("#")?C$zut.substring(1):C$zut;var C$zue=parseInt(C$zut.substr(0,2),16)||0;var C$zui=parseInt(C$zut.substr(2,2),16)||0;var C$zur=parseInt(C$zut.substr(4,2),16)||0;C$zut=parseInt(C$zut.substr(6,2),16)||255;return this._val=(C$zut<<24>>>0)+(C$zur<<16)+(C$zui<<8)+C$zue,this},C$zue.toHEX=function(C$zut){var C$zue=[(this.r<16?"0":"")+(0|this.r).toString(16),(this.g<16?"0":"")+(0|this.g).toString(16),(this.b<16?"0":"")+(0|this.b).toString(16)];var C$zui=-1;if("#rgb"===C$zut)for(C$zui=0;C$zui<C$zue.length;++C$zui)1<C$zue[C$zui].length&&(C$zue[C$zui]=C$zue[C$zui][0]);else if("#rrggbb"===C$zut)for(C$zui=0;C$zui<C$zue.length;++C$zui)1===C$zue[C$zui].length&&(C$zue[C$zui]="0"+C$zue[C$zui]);else"#rrggbbaa"===C$zut&&C$zue.push((this.a<16?"0":"")+(0|this.a).toString(16));return C$zue.join("")},C$zue.toRGBValue=function(){return 16777215&this._val},C$zue.fromHSV=function(C$zut,C$zue,C$zui){var C$zur,C$zun,C$zua;if(0===C$zue)C$zur=C$zun=C$zua=C$zui;else if(0===C$zui)C$zur=C$zun=C$zua=0;else{1===C$zut&&(C$zut=0),C$zut*=6;var C$zuo=Math.floor(C$zut);C$zut=C$zut-C$zuo;var C$zus=C$zui*(1-C$zue);var C$zuc=C$zui*(1-C$zue*C$zut);var C$zul=C$zui*(1-C$zue*(1-C$zut));switch(C$zuo){case 0:C$zur=C$zui,C$zun=C$zul,C$zua=C$zus;break;case 1:C$zur=C$zuc,C$zun=C$zui,C$zua=C$zus;break;case 2:C$zur=C$zus,C$zun=C$zui,C$zua=C$zul;break;case 3:C$zur=C$zus,C$zun=C$zuc,C$zua=C$zui;break;case 4:C$zur=C$zul,C$zun=C$zus,C$zua=C$zui;break;case 5:C$zur=C$zui,C$zun=C$zus,C$zua=C$zuc}}return this._val=(this.a<<24>>>0)+((C$zua*=255)<<16)+((C$zun*=255)<<8)+(C$zur*=255),this},C$zue.toHSV=function(){var C$zut=this.r/255;var C$zue=this.g/255;var C$zui=this.b/255;var C$zur={h:0,s:0,v:0};var C$zun=Math.max(C$zut,C$zue,C$zui);var C$zua=Math.min(C$zut,C$zue,C$zui);return C$zur.v=C$zun,C$zur.s=C$zun?(C$zun-C$zua)/C$zun:0,C$zur.s?(C$zua=C$zun-C$zua,C$zur.h=C$zut===C$zun?(C$zue-C$zui)/C$zua:C$zue===C$zun?2+(C$zui-C$zut)/C$zua:4+(C$zut-C$zue)/C$zua,C$zur.h/=6,C$zur.h<0&&(C$zur.h+=1)):C$zur.h=0,C$zur},C$zue.set=function(C$zut){return C$zut._val?this._val=C$zut._val:(this.r=C$zut.r,this.g=C$zut.g,this.b=C$zut.b,this.a=C$zut.a),this},C$zue._fastSetA=function(C$zut){this._val=(16777215&this._val|C$zut<<24)>>>0},C$zue.multiply=function(C$zut){var C$zue=(255&this._val)*C$zut.r>>8;var C$zui=(65280&this._val)*C$zut.g>>8;var C$zur=(16711680&this._val)*C$zut.b>>8;C$zut=((4278190080&this._val)>>>8)*C$zut.a;return this._val=4278190080&C$zut|16711680&C$zur|65280&C$zui|255&C$zue,this},_createClass(Color,[{key:"r",get:function(){return this.getR()},set:function(C$zut){this.setR(C$zut)}},{key:"g",get:function(){return this.getG()},set:function(C$zut){this.setG(C$zut)}},{key:"b",get:function(){return this.getB()},set:function(C$zut){this.setB(C$zut)}},{key:"a",get:function(){return this.getA()},set:function(C$zut){this.setA(C$zut)}}]),Color}(C$zur.default);(C$zui.default=C$zua).div=C$zua.divide,C$zua.sub=C$zua.subtract,C$zua.mul=C$zua.multiply,C$zua.WHITE_R=C$zua.WHITE,C$zua.BLACK_R=C$zua.BLACK,C$zua.TRANSPARENT_R=C$zua.TRANSPARENT,C$zua.GRAY_R=C$zua.GRAY,C$zua.RED_R=C$zua.RED,C$zua.GREEN_R=C$zua.GREEN,C$zua.BLUE_R=C$zua.BLUE,C$zua.YELLOW_R=C$zua.YELLOW,C$zua.ORANGE_R=C$zua.ORANGE,C$zua.CYAN_R=C$zua.CYAN,C$zua.MAGENTA_R=C$zua.MAGENTA,C$zuo.default.fastDefine("cc.Color",C$zua,{r:0,g:0,b:0,a:255}),cc.Color=C$zua,cc.color=function(C$zut,C$zue,C$zui,C$zur){return"string"!=typeof C$zut?"object"==typeof C$zut?new C$zua(C$zut.r,C$zut.g,C$zut.b,C$zut.a):new C$zua(C$zut,C$zue,C$zui,C$zur):(new C$zua).fromHEX(C$zut)},C$zue.exports=C$zui.default},{"../platform/CCClass":189,"../utils/misc":264,"./value-type":287}],279:[function(C$zut,C$zue,C$zui){"use strict";var C$zur={Vec2:C$zui.__esModule=!0,Vec3:!0,Vec4:!0,Mat4:!0,Mat3:!0,Rect:!0,Size:!0,Color:!0,Quat:!0,Trs:!0};C$zui.Trs=C$zui.Quat=C$zui.Color=C$zui.Size=C$zui.Rect=C$zui.Mat3=C$zui.Mat4=C$zui.Vec4=C$zui.Vec3=C$zui.Vec2=void 0;var C$zun=_interopRequireDefault(C$zut("./vec2"));C$zui.Vec2=C$zun.default;C$zun=_interopRequireDefault(C$zut("./vec3"));C$zui.Vec3=C$zun.default;C$zun=_interopRequireDefault(C$zut("./vec4"));C$zui.Vec4=C$zun.default;C$zun=_interopRequireDefault(C$zut("./mat4"));C$zui.Mat4=C$zun.default;C$zun=_interopRequireDefault(C$zut("./mat3"));C$zui.Mat3=C$zun.default;C$zun=_interopRequireDefault(C$zut("./rect"));C$zui.Rect=C$zun.default;C$zun=_interopRequireDefault(C$zut("./size"));C$zui.Size=C$zun.default;C$zun=_interopRequireDefault(C$zut("./color"));C$zui.Color=C$zun.default;C$zun=_interopRequireDefault(C$zut("./quat"));C$zui.Quat=C$zun.default;C$zun=_interopRequireDefault(C$zut("./trs"));C$zui.Trs=C$zun.default;var C$zua=C$zut("./utils");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}Object.keys(C$zua).forEach(function(C$zut){"default"!==C$zut&&"__esModule"!==C$zut&&(Object.prototype.hasOwnProperty.call(C$zur,C$zut)||(C$zui[C$zut]=C$zua[C$zut]))}),cc.math=C$zue.exports},{"./color":278,"./mat3":280,"./mat4":281,"./quat":282,"./rect":283,"./size":284,"./trs":285,"./utils":286,"./vec2":288,"./vec3":289,"./vec4":290}],280:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zuy=C$zut("../value-types/utils");var C$zuo=(C$zut=C$zut("./vec3"))&&C$zut.__esModule?C$zut:{default:C$zut};Mat3.create=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){return new Mat3(C$zut=void 0===C$zut?1:C$zut,C$zue=void 0===C$zue?0:C$zue,C$zui=void 0===C$zui?0:C$zui,C$zur=void 0===C$zur?0:C$zur,C$zun=void 0===C$zun?1:C$zun,C$zua=void 0===C$zua?0:C$zua,C$zuo=void 0===C$zuo?0:C$zuo,C$zus=void 0===C$zus?0:C$zus,C$zuc=void 0===C$zuc?1:C$zuc)},Mat3.clone=function(C$zut){C$zut=C$zut.m;return new Mat3(C$zut[0],C$zut[1],C$zut[2],C$zut[3],C$zut[4],C$zut[5],C$zut[6],C$zut[7],C$zut[8])},Mat3.copy=function(C$zut,C$zue){return C$zut.m.set(C$zue.m),C$zut},Mat3.set=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zuh){var C$zul=C$zut.m;return C$zul[0]=C$zue,C$zul[1]=C$zui,C$zul[2]=C$zur,C$zul[3]=C$zun,C$zul[4]=C$zua,C$zul[5]=C$zuo,C$zul[6]=C$zus,C$zul[7]=C$zuc,C$zul[8]=C$zuh,C$zut},Mat3.identity=function(C$zut){var C$zue=C$zut.m;return C$zue[0]=1,C$zue[1]=0,C$zue[2]=0,C$zue[3]=0,C$zue[4]=1,C$zue[5]=0,C$zue[6]=0,C$zue[7]=0,C$zue[8]=1,C$zut},Mat3.transpose=function(C$zut,C$zue){var C$zui=C$zue.m,C$zur=C$zut.m;var C$zun,C$zua;return C$zut===C$zue?(C$zue=C$zui[1],C$zun=C$zui[2],C$zua=C$zui[5],C$zur[1]=C$zui[3],C$zur[2]=C$zui[6],C$zur[3]=C$zue,C$zur[5]=C$zui[7],C$zur[6]=C$zun,C$zur[7]=C$zua):(C$zur[0]=C$zui[0],C$zur[1]=C$zui[3],C$zur[2]=C$zui[6],C$zur[3]=C$zui[1],C$zur[4]=C$zui[4],C$zur[5]=C$zui[7],C$zur[6]=C$zui[2],C$zur[7]=C$zui[5],C$zur[8]=C$zui[8]),C$zut},Mat3.invert=function(C$zuh,C$zut){var C$zut=C$zut.m,C$zue=C$zuh.m;var C$zui=C$zut[0],C$zur=C$zut[1],C$zun=C$zut[2],C$zua=C$zut[3],C$zuo=C$zut[4],C$zus=C$zut[5],C$zuc=C$zut[6],C$zuu=C$zut[7],C$zut=C$zut[8];var C$zu_=C$zut*C$zuo-C$zus*C$zuu;var C$zud=-C$zut*C$zua+C$zus*C$zuc;var C$zuf=C$zuu*C$zua-C$zuo*C$zuc;var C$zul=C$zui*C$zu_+C$zur*C$zud+C$zun*C$zuf;return C$zul&&(C$zue[0]=C$zu_*(C$zul=1/C$zul),C$zue[1]=(-C$zut*C$zur+C$zun*C$zuu)*C$zul,C$zue[2]=(C$zus*C$zur-C$zun*C$zuo)*C$zul,C$zue[3]=C$zud*C$zul,C$zue[4]=(C$zut*C$zui-C$zun*C$zuc)*C$zul,C$zue[5]=(-C$zus*C$zui+C$zun*C$zua)*C$zul,C$zue[6]=C$zuf*C$zul,C$zue[7]=(-C$zuu*C$zui+C$zur*C$zuc)*C$zul,C$zue[8]=(C$zuo*C$zui-C$zur*C$zua)*C$zul),C$zuh},Mat3.adjoint=function(C$zuh,C$zut){var C$zut=C$zut.m,C$zue=C$zuh.m;var C$zui=C$zut[0],C$zur=C$zut[1],C$zun=C$zut[2],C$zua=C$zut[3],C$zuo=C$zut[4],C$zus=C$zut[5],C$zuc=C$zut[6],C$zul=C$zut[7],C$zut=C$zut[8];return C$zue[0]=C$zuo*C$zut-C$zus*C$zul,C$zue[1]=C$zun*C$zul-C$zur*C$zut,C$zue[2]=C$zur*C$zus-C$zun*C$zuo,C$zue[3]=C$zus*C$zuc-C$zua*C$zut,C$zue[4]=C$zui*C$zut-C$zun*C$zuc,C$zue[5]=C$zun*C$zua-C$zui*C$zus,C$zue[6]=C$zua*C$zul-C$zuo*C$zuc,C$zue[7]=C$zur*C$zuc-C$zui*C$zul,C$zue[8]=C$zui*C$zuo-C$zur*C$zua,C$zuh},Mat3.determinant=function(C$zut){C$zut=C$zut.m;var C$zue=C$zut[0],C$zui=C$zut[1],C$zur=C$zut[2],C$zun=C$zut[3],C$zua=C$zut[4],C$zuo=C$zut[5],C$zus=C$zut[6],C$zuc=C$zut[7],C$zut=C$zut[8];return C$zue*(C$zut*C$zua-C$zuo*C$zuc)+C$zui*(-C$zut*C$zun+C$zuo*C$zus)+C$zur*(C$zuc*C$zun-C$zua*C$zus)},Mat3.multiply=function(C$zuh,C$zut,C$zue){var C$zut=C$zut.m,C$zue=C$zue.m,C$zui=C$zuh.m;var C$zur=C$zut[0],C$zun=C$zut[1],C$zua=C$zut[2],C$zuo=C$zut[3],C$zus=C$zut[4],C$zuc=C$zut[5],C$zul=C$zut[6],C$zuu=C$zut[7],C$zut=C$zut[8];var C$zu_=C$zue[0],C$zud=C$zue[1],C$zuf=C$zue[2];var C$zup=C$zue[3],C$zum=C$zue[4],C$zuv=C$zue[5];var C$zuy=C$zue[6],C$zug=C$zue[7],C$zue=C$zue[8];return C$zui[0]=C$zu_*C$zur+C$zud*C$zuo+C$zuf*C$zul,C$zui[1]=C$zu_*C$zun+C$zud*C$zus+C$zuf*C$zuu,C$zui[2]=C$zu_*C$zua+C$zud*C$zuc+C$zuf*C$zut,C$zui[3]=C$zup*C$zur+C$zum*C$zuo+C$zuv*C$zul,C$zui[4]=C$zup*C$zun+C$zum*C$zus+C$zuv*C$zuu,C$zui[5]=C$zup*C$zua+C$zum*C$zuc+C$zuv*C$zut,C$zui[6]=C$zuy*C$zur+C$zug*C$zuo+C$zue*C$zul,C$zui[7]=C$zuy*C$zun+C$zug*C$zus+C$zue*C$zuu,C$zui[8]=C$zuy*C$zua+C$zug*C$zuc+C$zue*C$zut,C$zuh},Mat3.multiplyMat4=function(C$zuh,C$zut,C$zue){var C$zut=C$zut.m,C$zue=C$zue.m,C$zui=C$zuh.m;var C$zur=C$zut[0],C$zun=C$zut[1],C$zua=C$zut[2],C$zuo=C$zut[3],C$zus=C$zut[4],C$zuc=C$zut[5],C$zul=C$zut[6],C$zuu=C$zut[7],C$zut=C$zut[8];var C$zu_=C$zue[0],C$zud=C$zue[1],C$zuf=C$zue[2];var C$zup=C$zue[4],C$zum=C$zue[5],C$zuv=C$zue[6];var C$zuy=C$zue[8],C$zug=C$zue[9],C$zue=C$zue[10];return C$zui[0]=C$zu_*C$zur+C$zud*C$zuo+C$zuf*C$zul,C$zui[1]=C$zu_*C$zun+C$zud*C$zus+C$zuf*C$zuu,C$zui[2]=C$zu_*C$zua+C$zud*C$zuc+C$zuf*C$zut,C$zui[3]=C$zup*C$zur+C$zum*C$zuo+C$zuv*C$zul,C$zui[4]=C$zup*C$zun+C$zum*C$zus+C$zuv*C$zuu,C$zui[5]=C$zup*C$zua+C$zum*C$zuc+C$zuv*C$zut,C$zui[6]=C$zuy*C$zur+C$zug*C$zuo+C$zue*C$zul,C$zui[7]=C$zuy*C$zun+C$zug*C$zus+C$zue*C$zuu,C$zui[8]=C$zuy*C$zua+C$zug*C$zuc+C$zue*C$zut,C$zuh},Mat3.translate=function(C$zut,C$zue,C$zui){var C$zue=C$zue.m,C$zur=C$zut.m;var C$zun=C$zue[0],C$zua=C$zue[1],C$zuo=C$zue[2],C$zus=C$zue[3],C$zuc=C$zue[4],C$zuh=C$zue[5],C$zuu=C$zue[6],C$zu_=C$zue[7],C$zue=C$zue[8];var C$zul=C$zui.x,C$zui=C$zui.y;return C$zur[0]=C$zun,C$zur[1]=C$zua,C$zur[2]=C$zuo,C$zur[3]=C$zus,C$zur[4]=C$zuc,C$zur[5]=C$zuh,C$zur[6]=C$zul*C$zun+C$zui*C$zus+C$zuu,C$zur[7]=C$zul*C$zua+C$zui*C$zuc+C$zu_,C$zur[8]=C$zul*C$zuo+C$zui*C$zuh+C$zue,C$zut},Mat3.rotate=function(C$zut,C$zue,C$zui){var C$zue=C$zue.m,C$zur=C$zut.m;var C$zun=C$zue[0],C$zua=C$zue[1],C$zuo=C$zue[2],C$zus=C$zue[3],C$zuc=C$zue[4],C$zuh=C$zue[5],C$zuu=C$zue[6],C$zu_=C$zue[7],C$zue=C$zue[8];var C$zul=Math.sin(C$zui);C$zui=Math.cos(C$zui);return C$zur[0]=C$zui*C$zun+C$zul*C$zus,C$zur[1]=C$zui*C$zua+C$zul*C$zuc,C$zur[2]=C$zui*C$zuo+C$zul*C$zuh,C$zur[3]=C$zui*C$zus-C$zul*C$zun,C$zur[4]=C$zui*C$zuc-C$zul*C$zua,C$zur[5]=C$zui*C$zuh-C$zul*C$zuo,C$zur[6]=C$zuu,C$zur[7]=C$zu_,C$zur[8]=C$zue,C$zut},Mat3.scale=function(C$zut,C$zue,C$zui){var C$zur=C$zui.x,C$zui=C$zui.y;var C$zue=C$zue.m,C$zun=C$zut.m;return C$zun[0]=C$zur*C$zue[0],C$zun[1]=C$zur*C$zue[1],C$zun[2]=C$zur*C$zue[2],C$zun[3]=C$zui*C$zue[3],C$zun[4]=C$zui*C$zue[4],C$zun[5]=C$zui*C$zue[5],C$zun[6]=C$zue[6],C$zun[7]=C$zue[7],C$zun[8]=C$zue[8],C$zut},Mat3.fromMat4=function(C$zut,C$zue){var C$zue=C$zue.m,C$zui=C$zut.m;return C$zui[0]=C$zue[0],C$zui[1]=C$zue[1],C$zui[2]=C$zue[2],C$zui[3]=C$zue[4],C$zui[4]=C$zue[5],C$zui[5]=C$zue[6],C$zui[6]=C$zue[8],C$zui[7]=C$zue[9],C$zui[8]=C$zue[10],C$zut},Mat3.fromTranslation=function(C$zut,C$zue){var C$zui=C$zut.m;return C$zui[0]=1,C$zui[1]=0,C$zui[2]=0,C$zui[3]=0,C$zui[4]=1,C$zui[5]=0,C$zui[6]=C$zue.x,C$zui[7]=C$zue.y,C$zui[8]=1,C$zut},Mat3.fromRotation=function(C$zut,C$zue){var C$zui=Math.sin(C$zue),C$zue=Math.cos(C$zue);var C$zur=C$zut.m;return C$zur[0]=C$zue,C$zur[1]=C$zui,C$zur[2]=0,C$zur[3]=-C$zui,C$zur[4]=C$zue,C$zur[5]=0,C$zur[6]=0,C$zur[7]=0,C$zur[8]=1,C$zut},Mat3.fromScaling=function(C$zut,C$zue){var C$zui=C$zut.m;return C$zui[0]=C$zue.x,C$zui[1]=0,C$zui[2]=0,C$zui[3]=0,C$zui[4]=C$zue.y,C$zui[5]=0,C$zui[6]=0,C$zui[7]=0,C$zui[8]=1,C$zut},Mat3.fromQuat=function(C$zut,C$zue){var C$zui=C$zut.m;var C$zur=C$zue.x,C$zun=C$zue.y,C$zua=C$zue.z,C$zue=C$zue.w;var C$zuo=C$zur+C$zur;var C$zus=C$zun+C$zun;var C$zuc=C$zua+C$zua;C$zur*=C$zuo;var C$zul=C$zun*C$zuo;C$zun*=C$zus;var C$zuh=C$zua*C$zuo;var C$zuu=C$zua*C$zus;C$zua*=C$zuc;C$zuo*=C$zue;C$zus*=C$zue;C$zue*=C$zuc;return C$zui[0]=1-C$zun-C$zua,C$zui[3]=C$zul-C$zue,C$zui[6]=C$zuh+C$zus,C$zui[1]=C$zul+C$zue,C$zui[4]=1-C$zur-C$zua,C$zui[7]=C$zuu-C$zuo,C$zui[2]=C$zuh-C$zus,C$zui[5]=C$zuu+C$zuo,C$zui[8]=1-C$zur-C$zun,C$zut},Mat3.fromViewUp=function(C$zut,C$zue,C$zui){var C$zur,C$zun,C$zua;C$zur=new C$zuo.default(0,1,0),C$zun=new C$zuo.default,C$zua=new C$zuo.default;return C$zuo.default.lengthSqr(C$zue)<C$zuy.EPSILON*C$zuy.EPSILON?(Mat3.identity(C$zut),C$zut):(C$zuo.default.normalize(C$zun,C$zuo.default.cross(C$zun,C$zui=C$zui||C$zur,C$zue)),C$zuo.default.lengthSqr(C$zun)<C$zuy.EPSILON*C$zuy.EPSILON?Mat3.identity(C$zut):(C$zuo.default.cross(C$zua,C$zue,C$zun),Mat3.set(C$zut,C$zun.x,C$zun.y,C$zun.z,C$zua.x,C$zua.y,C$zua.z,C$zue.x,C$zue.y,C$zue.z)),C$zut)},Mat3.normalFromMat4=function(C$zuh,C$zut){var C$zut=C$zut.m,C$zue=C$zuh.m;var C$zui=C$zut[0],C$zur=C$zut[1],C$zuu=C$zut[2],C$zun=C$zut[3],C$zu_=C$zut[4],C$zud=C$zut[5],C$zuf=C$zut[6],C$zua=C$zut[7],C$zuo=C$zut[8],C$zus=C$zut[9],C$zuc=C$zut[10],C$zul=C$zut[11],C$zup=C$zut[12],C$zum=C$zut[13],C$zuv=C$zut[14],C$zut=C$zut[15];var C$zuy=C$zui*C$zud-C$zur*C$zu_;var C$zug=C$zui*C$zuf-C$zuu*C$zu_;var C$zub=C$zui*C$zua-C$zun*C$zu_;var C$zuC=C$zur*C$zuf-C$zuu*C$zud;var C$zux=C$zur*C$zua-C$zun*C$zud;var C$zuA=C$zuu*C$zua-C$zun*C$zuf;var C$zuS=C$zuo*C$zum-C$zus*C$zup;var C$zuT=C$zuo*C$zuv-C$zuc*C$zup;C$zuo=C$zuo*C$zut-C$zul*C$zup;var C$zuw=C$zus*C$zuv-C$zuc*C$zum;C$zus=C$zus*C$zut-C$zul*C$zum;C$zuc=C$zuc*C$zut-C$zul*C$zuv;C$zul=C$zuy*C$zuc-C$zug*C$zus+C$zub*C$zuw+C$zuC*C$zuo-C$zux*C$zuT+C$zuA*C$zuS;return C$zul&&(C$zue[0]=(C$zud*C$zuc-C$zuf*C$zus+C$zua*C$zuw)*(C$zul=1/C$zul),C$zue[1]=(C$zuf*C$zuo-C$zu_*C$zuc-C$zua*C$zuT)*C$zul,C$zue[2]=(C$zu_*C$zus-C$zud*C$zuo+C$zua*C$zuS)*C$zul,C$zue[3]=(C$zuu*C$zus-C$zur*C$zuc-C$zun*C$zuw)*C$zul,C$zue[4]=(C$zui*C$zuc-C$zuu*C$zuo+C$zun*C$zuT)*C$zul,C$zue[5]=(C$zur*C$zuo-C$zui*C$zus-C$zun*C$zuS)*C$zul,C$zue[6]=(C$zum*C$zuA-C$zuv*C$zux+C$zut*C$zuC)*C$zul,C$zue[7]=(C$zuv*C$zub-C$zup*C$zuA-C$zut*C$zug)*C$zul,C$zue[8]=(C$zup*C$zux-C$zum*C$zub+C$zut*C$zuy)*C$zul),C$zuh},Mat3.frob=function(C$zut){C$zut=C$zut.m;return Math.sqrt(Math.pow(C$zut[0],2)+Math.pow(C$zut[1],2)+Math.pow(C$zut[2],2)+Math.pow(C$zut[3],2)+Math.pow(C$zut[4],2)+Math.pow(C$zut[5],2)+Math.pow(C$zut[6],2)+Math.pow(C$zut[7],2)+Math.pow(C$zut[8],2))},Mat3.add=function(C$zut,C$zue,C$zui){var C$zue=C$zue.m,C$zui=C$zui.m,C$zur=C$zut.m;return C$zur[0]=C$zue[0]+C$zui[0],C$zur[1]=C$zue[1]+C$zui[1],C$zur[2]=C$zue[2]+C$zui[2],C$zur[3]=C$zue[3]+C$zui[3],C$zur[4]=C$zue[4]+C$zui[4],C$zur[5]=C$zue[5]+C$zui[5],C$zur[6]=C$zue[6]+C$zui[6],C$zur[7]=C$zue[7]+C$zui[7],C$zur[8]=C$zue[8]+C$zui[8],C$zut},Mat3.subtract=function(C$zut,C$zue,C$zui){var C$zue=C$zue.m,C$zui=C$zui.m,C$zur=C$zut.m;return C$zur[0]=C$zue[0]-C$zui[0],C$zur[1]=C$zue[1]-C$zui[1],C$zur[2]=C$zue[2]-C$zui[2],C$zur[3]=C$zue[3]-C$zui[3],C$zur[4]=C$zue[4]-C$zui[4],C$zur[5]=C$zue[5]-C$zui[5],C$zur[6]=C$zue[6]-C$zui[6],C$zur[7]=C$zue[7]-C$zui[7],C$zur[8]=C$zue[8]-C$zui[8],C$zut},Mat3.multiplyScalar=function(C$zut,C$zue,C$zui){var C$zue=C$zue.m,C$zur=C$zut.m;return C$zur[0]=C$zue[0]*C$zui,C$zur[1]=C$zue[1]*C$zui,C$zur[2]=C$zue[2]*C$zui,C$zur[3]=C$zue[3]*C$zui,C$zur[4]=C$zue[4]*C$zui,C$zur[5]=C$zue[5]*C$zui,C$zur[6]=C$zue[6]*C$zui,C$zur[7]=C$zue[7]*C$zui,C$zur[8]=C$zue[8]*C$zui,C$zut},Mat3.multiplyScalarAndAdd=function(C$zut,C$zue,C$zui,C$zur){var C$zue=C$zue.m,C$zui=C$zui.m,C$zun=C$zut.m;return C$zun[0]=C$zue[0]+C$zui[0]*C$zur,C$zun[1]=C$zue[1]+C$zui[1]*C$zur,C$zun[2]=C$zue[2]+C$zui[2]*C$zur,C$zun[3]=C$zue[3]+C$zui[3]*C$zur,C$zun[4]=C$zue[4]+C$zui[4]*C$zur,C$zun[5]=C$zue[5]+C$zui[5]*C$zur,C$zun[6]=C$zue[6]+C$zui[6]*C$zur,C$zun[7]=C$zue[7]+C$zui[7]*C$zur,C$zun[8]=C$zue[8]+C$zui[8]*C$zur,C$zut},Mat3.exactEquals=function(C$zut,C$zue){C$zut=C$zut.m,C$zue=C$zue.m;return C$zut[0]===C$zue[0]&&C$zut[1]===C$zue[1]&&C$zut[2]===C$zue[2]&&C$zut[3]===C$zue[3]&&C$zut[4]===C$zue[4]&&C$zut[5]===C$zue[5]&&C$zut[6]===C$zue[6]&&C$zut[7]===C$zue[7]&&C$zut[8]===C$zue[8]},Mat3.equals=function(C$zut,C$zue){C$zut=C$zut.m,C$zue=C$zue.m;var C$zui=C$zut[0],C$zur=C$zut[1],C$zun=C$zut[2],C$zua=C$zut[3],C$zuo=C$zut[4],C$zus=C$zut[5],C$zuc=C$zut[6],C$zul=C$zut[7],C$zut=C$zut[8];var C$zuh=C$zue[0],C$zuu=C$zue[1],C$zu_=C$zue[2],C$zud=C$zue[3],C$zuf=C$zue[4],C$zup=C$zue[5],C$zum=C$zue[6],C$zuv=C$zue[7],C$zue=C$zue[8];return Math.abs(C$zui-C$zuh)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zui),Math.abs(C$zuh))&&Math.abs(C$zur-C$zuu)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zur),Math.abs(C$zuu))&&Math.abs(C$zun-C$zu_)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zun),Math.abs(C$zu_))&&Math.abs(C$zua-C$zud)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zua),Math.abs(C$zud))&&Math.abs(C$zuo-C$zuf)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zuo),Math.abs(C$zuf))&&Math.abs(C$zus-C$zup)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zus),Math.abs(C$zup))&&Math.abs(C$zuc-C$zum)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zuc),Math.abs(C$zum))&&Math.abs(C$zul-C$zuv)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zul),Math.abs(C$zuv))&&Math.abs(C$zut-C$zue)<=C$zuy.EPSILON*Math.max(1,Math.abs(C$zut),Math.abs(C$zue))},Mat3.toArray=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=0);var C$zur=C$zue.m;for(var C$zun=0;C$zun<9;C$zun++)C$zut[C$zui+C$zun]=C$zur[C$zun];return C$zut},Mat3.fromArray=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=0);var C$zur=C$zut.m;for(var C$zun=0;C$zun<9;C$zun++)C$zur[C$zun]=C$zue[C$zui+C$zun];return C$zut},Mat3.prototype.toString=function(){var C$zut=this.m;return"mat3("+C$zut[0]+", "+C$zut[1]+", "+C$zut[2]+", "+C$zut[3]+", "+C$zut[4]+", "+C$zut[5]+", "+C$zut[6]+", "+C$zut[7]+", "+C$zut[8]+")"};C$zut=Mat3;function Mat3(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){var C$zul;void 0===C$zut&&(C$zut=1),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),void 0===C$zun&&(C$zun=1),void 0===C$zua&&(C$zua=0),void 0===C$zuo&&(C$zuo=0),void 0===C$zus&&(C$zus=0),void 0===C$zuc&&(C$zuc=1),this.m=void 0,C$zut instanceof C$zuy.FLOAT_ARRAY_TYPE?this.m=C$zut:(this.m=new C$zuy.FLOAT_ARRAY_TYPE(9),(C$zul=this.m)[0]=C$zut,C$zul[1]=C$zue,C$zul[2]=C$zui,C$zul[3]=C$zur,C$zul[4]=C$zun,C$zul[5]=C$zua,C$zul[6]=C$zuo,C$zul[7]=C$zus,C$zul[8]=C$zuc)}(C$zui.default=C$zut).sub=C$zut.subtract,C$zut.mul=C$zut.multiply,C$zut.IDENTITY=Object.freeze(new C$zut),cc.Mat3=C$zut,C$zue.exports=C$zui.default},{"../value-types/utils":286,"./vec3":289}],281:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=_interopRequireDefault(C$zut("./value-type"));var C$zun=_interopRequireDefault(C$zut("../platform/CCClass"));var C$zua=_interopRequireDefault(C$zut("./vec3"));var C$zuo=_interopRequireDefault(C$zut("./quat"));var C$zuE=C$zut("./utils");var C$zuu=_interopRequireDefault(C$zut("./mat3"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zum=0;var C$zuv=0;var C$zug=0;var C$zub=0;var C$zuC=0;var C$zux=0;var C$zuA=0;var C$zuS=0;var C$zuT=0;var C$zuw=0;var C$zuP=0;var C$zuM=0;var C$zup=0;var C$zuR=0;var C$zuI=0;var C$zuB=0;var C$zuy=function(C$zuy){var C$zut;C$zut=C$zuy,(C$zue=Mat4).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(Mat4);var C$zue=Mat4.prototype;function Mat4(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup,C$zum,C$zuv){var C$zuc;var C$zul;return void 0===C$zut&&(C$zut=1),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),void 0===C$zun&&(C$zun=0),void 0===C$zua&&(C$zua=1),void 0===C$zuo&&(C$zuo=0),void 0===C$zus&&(C$zus=0),void 0===C$zuh&&(C$zuh=0),void 0===C$zuu&&(C$zuu=0),void 0===C$zu_&&(C$zu_=1),void 0===C$zud&&(C$zud=0),void 0===C$zuf&&(C$zuf=0),void 0===C$zup&&(C$zup=0),void 0===C$zum&&(C$zum=0),void 0===C$zuv&&(C$zuv=1),(C$zuc=C$zuy.call(this)||this).m=void 0,C$zut instanceof C$zuE.FLOAT_ARRAY_TYPE?C$zuc.m=C$zut:(C$zuc.m=new C$zuE.FLOAT_ARRAY_TYPE(16),(C$zul=C$zuc.m)[0]=C$zut,C$zul[1]=C$zue,C$zul[2]=C$zui,C$zul[3]=C$zur,C$zul[4]=C$zun,C$zul[5]=C$zua,C$zul[6]=C$zuo,C$zul[7]=C$zus,C$zul[8]=C$zuh,C$zul[9]=C$zuu,C$zul[10]=C$zu_,C$zul[11]=C$zud,C$zul[12]=C$zuf,C$zul[13]=C$zup,C$zul[14]=C$zum,C$zul[15]=C$zuv),C$zuc}return C$zue.mul=function(C$zut,C$zue){return Mat4.multiply(C$zue||new Mat4,this,C$zut)},C$zue.mulScalar=function(C$zut,C$zue){Mat4.multiplyScalar(C$zue||new Mat4,this,C$zut)},C$zue.sub=function(C$zut,C$zue){Mat4.subtract(C$zue||new Mat4,this,C$zut)},Mat4.clone=function(C$zut){C$zut=C$zut.m;return new Mat4(C$zut[0],C$zut[1],C$zut[2],C$zut[3],C$zut[4],C$zut[5],C$zut[6],C$zut[7],C$zut[8],C$zut[9],C$zut[10],C$zut[11],C$zut[12],C$zut[13],C$zut[14],C$zut[15])},Mat4.copy=function(C$zut,C$zue){var C$zui=C$zut.m,C$zue=C$zue.m;return C$zui[0]=C$zue[0],C$zui[1]=C$zue[1],C$zui[2]=C$zue[2],C$zui[3]=C$zue[3],C$zui[4]=C$zue[4],C$zui[5]=C$zue[5],C$zui[6]=C$zue[6],C$zui[7]=C$zue[7],C$zui[8]=C$zue[8],C$zui[9]=C$zue[9],C$zui[10]=C$zue[10],C$zui[11]=C$zue[11],C$zui[12]=C$zue[12],C$zui[13]=C$zue[13],C$zui[14]=C$zue[14],C$zui[15]=C$zue[15],C$zut},Mat4.set=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup,C$zum,C$zuv){var C$zul=C$zut.m;return C$zul[0]=C$zue,C$zul[1]=C$zui,C$zul[2]=C$zur,C$zul[3]=C$zun,C$zul[4]=C$zua,C$zul[5]=C$zuo,C$zul[6]=C$zus,C$zul[7]=C$zuc,C$zul[8]=C$zuh,C$zul[9]=C$zuu,C$zul[10]=C$zu_,C$zul[11]=C$zud,C$zul[12]=C$zuf,C$zul[13]=C$zup,C$zul[14]=C$zum,C$zul[15]=C$zuv,C$zut},Mat4.identity=function(C$zut){var C$zue=C$zut.m;return C$zue[0]=1,C$zue[1]=0,C$zue[2]=0,C$zue[3]=0,C$zue[4]=0,C$zue[5]=1,C$zue[6]=0,C$zue[7]=0,C$zue[8]=0,C$zue[9]=0,C$zue[10]=1,C$zue[11]=0,C$zue[12]=0,C$zue[13]=0,C$zue[14]=0,C$zue[15]=1,C$zut},Mat4.transpose=function(C$zut,C$zue){var C$zui=C$zut.m,C$zur=C$zue.m;var C$zun,C$zua,C$zuo,C$zus,C$zuc;return C$zut===C$zue?(C$zue=C$zur[1],C$zun=C$zur[2],C$zua=C$zur[3],C$zuo=C$zur[6],C$zus=C$zur[7],C$zuc=C$zur[11],C$zui[1]=C$zur[4],C$zui[2]=C$zur[8],C$zui[3]=C$zur[12],C$zui[4]=C$zue,C$zui[6]=C$zur[9],C$zui[7]=C$zur[13],C$zui[8]=C$zun,C$zui[9]=C$zuo,C$zui[11]=C$zur[14],C$zui[12]=C$zua,C$zui[13]=C$zus,C$zui[14]=C$zuc):(C$zui[0]=C$zur[0],C$zui[1]=C$zur[4],C$zui[2]=C$zur[8],C$zui[3]=C$zur[12],C$zui[4]=C$zur[1],C$zui[5]=C$zur[5],C$zui[6]=C$zur[9],C$zui[7]=C$zur[13],C$zui[8]=C$zur[2],C$zui[9]=C$zur[6],C$zui[10]=C$zur[10],C$zui[11]=C$zur[14],C$zui[12]=C$zur[3],C$zui[13]=C$zur[7],C$zui[14]=C$zur[11],C$zui[15]=C$zur[15]),C$zut},Mat4.invert=function(C$zuh,C$zut){C$zut=C$zut.m;C$zum=C$zut[0],C$zuv=C$zut[1],C$zug=C$zut[2],C$zub=C$zut[3],C$zuC=C$zut[4],C$zux=C$zut[5],C$zuA=C$zut[6],C$zuS=C$zut[7],C$zuT=C$zut[8],C$zuw=C$zut[9],C$zuP=C$zut[10],C$zuM=C$zut[11],C$zup=C$zut[12],C$zuR=C$zut[13],C$zuI=C$zut[14],C$zuB=C$zut[15];C$zut=C$zum*C$zux-C$zuv*C$zuC;var C$zue=C$zum*C$zuA-C$zug*C$zuC;var C$zui=C$zum*C$zuS-C$zub*C$zuC;var C$zur=C$zuv*C$zuA-C$zug*C$zux;var C$zun=C$zuv*C$zuS-C$zub*C$zux;var C$zua=C$zug*C$zuS-C$zub*C$zuA;var C$zuo=C$zuT*C$zuR-C$zuw*C$zup;var C$zus=C$zuT*C$zuI-C$zuP*C$zup;var C$zuu=C$zuT*C$zuB-C$zuM*C$zup;var C$zu_=C$zuw*C$zuI-C$zuP*C$zuR;var C$zud=C$zuw*C$zuB-C$zuM*C$zuR;var C$zuf=C$zuP*C$zuB-C$zuM*C$zuI;var C$zuc=C$zut*C$zuf-C$zue*C$zud+C$zui*C$zu_+C$zur*C$zuu-C$zun*C$zus+C$zua*C$zuo;if(0==C$zuc)return null;var C$zul=C$zuh.m;return C$zul[0]=(C$zux*C$zuf-C$zuA*C$zud+C$zuS*C$zu_)*(C$zuc=1/C$zuc),C$zul[1]=(C$zug*C$zud-C$zuv*C$zuf-C$zub*C$zu_)*C$zuc,C$zul[2]=(C$zuR*C$zua-C$zuI*C$zun+C$zuB*C$zur)*C$zuc,C$zul[3]=(C$zuP*C$zun-C$zuw*C$zua-C$zuM*C$zur)*C$zuc,C$zul[4]=(C$zuA*C$zuu-C$zuC*C$zuf-C$zuS*C$zus)*C$zuc,C$zul[5]=(C$zum*C$zuf-C$zug*C$zuu+C$zub*C$zus)*C$zuc,C$zul[6]=(C$zuI*C$zui-C$zup*C$zua-C$zuB*C$zue)*C$zuc,C$zul[7]=(C$zuT*C$zua-C$zuP*C$zui+C$zuM*C$zue)*C$zuc,C$zul[8]=(C$zuC*C$zud-C$zux*C$zuu+C$zuS*C$zuo)*C$zuc,C$zul[9]=(C$zuv*C$zuu-C$zum*C$zud-C$zub*C$zuo)*C$zuc,C$zul[10]=(C$zup*C$zun-C$zuR*C$zui+C$zuB*C$zut)*C$zuc,C$zul[11]=(C$zuw*C$zui-C$zuT*C$zun-C$zuM*C$zut)*C$zuc,C$zul[12]=(C$zux*C$zus-C$zuC*C$zu_-C$zuA*C$zuo)*C$zuc,C$zul[13]=(C$zum*C$zu_-C$zuv*C$zus+C$zug*C$zuo)*C$zuc,C$zul[14]=(C$zuR*C$zue-C$zup*C$zur-C$zuI*C$zut)*C$zuc,C$zul[15]=(C$zuT*C$zur-C$zuw*C$zue+C$zuP*C$zut)*C$zuc,C$zuh},Mat4.determinant=function(C$zut){C$zut=C$zut.m;return C$zum=C$zut[0],C$zuv=C$zut[1],C$zug=C$zut[2],C$zub=C$zut[3],C$zuC=C$zut[4],C$zux=C$zut[5],C$zuA=C$zut[6],C$zuS=C$zut[7],C$zuT=C$zut[8],C$zuw=C$zut[9],C$zuP=C$zut[10],C$zuM=C$zut[11],C$zup=C$zut[12],C$zuR=C$zut[13],C$zuI=C$zut[14],C$zuB=C$zut[15],(C$zum*C$zux-C$zuv*C$zuC)*(C$zuP*C$zuB-C$zuM*C$zuI)-(C$zum*C$zuA-C$zug*C$zuC)*(C$zuw*C$zuB-C$zuM*C$zuR)+(C$zum*C$zuS-C$zub*C$zuC)*(C$zuw*C$zuI-C$zuP*C$zuR)+(C$zuv*C$zuA-C$zug*C$zux)*(C$zuT*C$zuB-C$zuM*C$zup)-(C$zuv*C$zuS-C$zub*C$zux)*(C$zuT*C$zuI-C$zuP*C$zup)+(C$zug*C$zuS-C$zub*C$zuA)*(C$zuT*C$zuR-C$zuw*C$zup)},Mat4.multiply=function(C$zut,C$zue,C$zui){var C$zur=C$zut.m,C$zue=C$zue.m,C$zui=C$zui.m;C$zum=C$zue[0],C$zuv=C$zue[1],C$zug=C$zue[2],C$zub=C$zue[3],C$zuC=C$zue[4],C$zux=C$zue[5],C$zuA=C$zue[6],C$zuS=C$zue[7],C$zuT=C$zue[8],C$zuw=C$zue[9],C$zuP=C$zue[10],C$zuM=C$zue[11],C$zup=C$zue[12],C$zuR=C$zue[13],C$zuI=C$zue[14],C$zuB=C$zue[15];var C$zue=C$zui[0],C$zun=C$zui[1],C$zua=C$zui[2],C$zuo=C$zui[3];return C$zur[0]=C$zue*C$zum+C$zun*C$zuC+C$zua*C$zuT+C$zuo*C$zup,C$zur[1]=C$zue*C$zuv+C$zun*C$zux+C$zua*C$zuw+C$zuo*C$zuR,C$zur[2]=C$zue*C$zug+C$zun*C$zuA+C$zua*C$zuP+C$zuo*C$zuI,C$zur[3]=C$zue*C$zub+C$zun*C$zuS+C$zua*C$zuM+C$zuo*C$zuB,C$zue=C$zui[4],C$zun=C$zui[5],C$zua=C$zui[6],C$zuo=C$zui[7],C$zur[4]=C$zue*C$zum+C$zun*C$zuC+C$zua*C$zuT+C$zuo*C$zup,C$zur[5]=C$zue*C$zuv+C$zun*C$zux+C$zua*C$zuw+C$zuo*C$zuR,C$zur[6]=C$zue*C$zug+C$zun*C$zuA+C$zua*C$zuP+C$zuo*C$zuI,C$zur[7]=C$zue*C$zub+C$zun*C$zuS+C$zua*C$zuM+C$zuo*C$zuB,C$zue=C$zui[8],C$zun=C$zui[9],C$zua=C$zui[10],C$zuo=C$zui[11],C$zur[8]=C$zue*C$zum+C$zun*C$zuC+C$zua*C$zuT+C$zuo*C$zup,C$zur[9]=C$zue*C$zuv+C$zun*C$zux+C$zua*C$zuw+C$zuo*C$zuR,C$zur[10]=C$zue*C$zug+C$zun*C$zuA+C$zua*C$zuP+C$zuo*C$zuI,C$zur[11]=C$zue*C$zub+C$zun*C$zuS+C$zua*C$zuM+C$zuo*C$zuB,C$zue=C$zui[12],C$zun=C$zui[13],C$zua=C$zui[14],C$zuo=C$zui[15],C$zur[12]=C$zue*C$zum+C$zun*C$zuC+C$zua*C$zuT+C$zuo*C$zup,C$zur[13]=C$zue*C$zuv+C$zun*C$zux+C$zua*C$zuw+C$zuo*C$zuR,C$zur[14]=C$zue*C$zug+C$zun*C$zuA+C$zua*C$zuP+C$zuo*C$zuI,C$zur[15]=C$zue*C$zub+C$zun*C$zuS+C$zua*C$zuM+C$zuo*C$zuB,C$zut},Mat4.transform=function(C$zut,C$zue,C$zui){var C$zur=C$zui.x,C$zun=C$zui.y,C$zui=C$zui.z;var C$zua=C$zut.m,C$zuo=C$zue.m;return C$zue===C$zut?(C$zua[12]=C$zuo[0]*C$zur+C$zuo[4]*C$zun+C$zuo[8]*C$zui+C$zuo[12],C$zua[13]=C$zuo[1]*C$zur+C$zuo[5]*C$zun+C$zuo[9]*C$zui+C$zuo[13],C$zua[14]=C$zuo[2]*C$zur+C$zuo[6]*C$zun+C$zuo[10]*C$zui+C$zuo[14],C$zua[15]=C$zuo[3]*C$zur+C$zuo[7]*C$zun+C$zuo[11]*C$zui+C$zuo[15]):(C$zum=C$zuo[0],C$zuv=C$zuo[1],C$zug=C$zuo[2],C$zub=C$zuo[3],C$zuC=C$zuo[4],C$zux=C$zuo[5],C$zuA=C$zuo[6],C$zuS=C$zuo[7],C$zuT=C$zuo[8],C$zuw=C$zuo[9],C$zuP=C$zuo[10],C$zuM=C$zuo[11],C$zup=C$zuo[12],C$zuR=C$zuo[13],C$zuI=C$zuo[14],C$zuB=C$zuo[15],C$zua[0]=C$zum,C$zua[1]=C$zuv,C$zua[2]=C$zug,C$zua[3]=C$zub,C$zua[4]=C$zuC,C$zua[5]=C$zux,C$zua[6]=C$zuA,C$zua[7]=C$zuS,C$zua[8]=C$zuT,C$zua[9]=C$zuw,C$zua[10]=C$zuP,C$zua[11]=C$zuM,C$zua[12]=C$zum*C$zur+C$zuC*C$zun+C$zuT*C$zui+C$zuo[12],C$zua[13]=C$zuv*C$zur+C$zux*C$zun+C$zuw*C$zui+C$zuo[13],C$zua[14]=C$zug*C$zur+C$zuA*C$zun+C$zuP*C$zui+C$zuo[14],C$zua[15]=C$zub*C$zur+C$zuS*C$zun+C$zuM*C$zui+C$zuo[15]),C$zut},Mat4.translate=function(C$zut,C$zue,C$zui){var C$zur=C$zut.m,C$zun=C$zue.m;return C$zue===C$zut?(C$zur[12]+=C$zui.x,C$zur[13]+=C$zui.y,C$zur[14]+=C$zui.z):(C$zur[0]=C$zun[0],C$zur[1]=C$zun[1],C$zur[2]=C$zun[2],C$zur[3]=C$zun[3],C$zur[4]=C$zun[4],C$zur[5]=C$zun[5],C$zur[6]=C$zun[6],C$zur[7]=C$zun[7],C$zur[8]=C$zun[8],C$zur[9]=C$zun[9],C$zur[10]=C$zun[10],C$zur[11]=C$zun[11],C$zur[12]+=C$zui.x,C$zur[13]+=C$zui.y,C$zur[14]+=C$zui.z,C$zur[15]=C$zun[15]),C$zut},Mat4.scale=function(C$zut,C$zue,C$zui){var C$zur=C$zui.x,C$zun=C$zui.y,C$zui=C$zui.z;var C$zua=C$zut.m,C$zue=C$zue.m;return C$zua[0]=C$zue[0]*C$zur,C$zua[1]=C$zue[1]*C$zur,C$zua[2]=C$zue[2]*C$zur,C$zua[3]=C$zue[3]*C$zur,C$zua[4]=C$zue[4]*C$zun,C$zua[5]=C$zue[5]*C$zun,C$zua[6]=C$zue[6]*C$zun,C$zua[7]=C$zue[7]*C$zun,C$zua[8]=C$zue[8]*C$zui,C$zua[9]=C$zue[9]*C$zui,C$zua[10]=C$zue[10]*C$zui,C$zua[11]=C$zue[11]*C$zui,C$zua[12]=C$zue[12],C$zua[13]=C$zue[13],C$zua[14]=C$zue[14],C$zua[15]=C$zue[15],C$zut},Mat4.rotate=function(C$zuh,C$zuu,C$zut,C$zue){var C$zui=C$zue.x,C$zur=C$zue.y,C$zue=C$zue.z;var C$zun=Math.sqrt(C$zui*C$zui+C$zur*C$zur+C$zue*C$zue);if(Math.abs(C$zun)<C$zuE.EPSILON)return null;C$zui*=C$zun=1/C$zun,C$zur*=C$zun,C$zue*=C$zun;C$zun=Math.sin(C$zut);C$zut=Math.cos(C$zut);var C$zua=1-C$zut;var C$zuo=C$zuu.m;C$zum=C$zuo[0],C$zuv=C$zuo[1],C$zug=C$zuo[2],C$zub=C$zuo[3],C$zuC=C$zuo[4],C$zux=C$zuo[5],C$zuA=C$zuo[6],C$zuS=C$zuo[7],C$zuT=C$zuo[8],C$zuw=C$zuo[9],C$zuP=C$zuo[10],C$zuM=C$zuo[11];var C$zus=C$zui*C$zui*C$zua+C$zut,C$zuc=C$zur*C$zui*C$zua+C$zue*C$zun,C$zul=C$zue*C$zui*C$zua-C$zur*C$zun;var C$zu_=C$zui*C$zur*C$zua-C$zue*C$zun,C$zud=C$zur*C$zur*C$zua+C$zut,C$zuf=C$zue*C$zur*C$zua+C$zui*C$zun;var C$zup=C$zui*C$zue*C$zua+C$zur*C$zun,C$zur=C$zur*C$zue*C$zua-C$zui*C$zun,C$zui=C$zue*C$zue*C$zua+C$zut;C$zun=C$zuh.m;return C$zun[0]=C$zum*C$zus+C$zuC*C$zuc+C$zuT*C$zul,C$zun[1]=C$zuv*C$zus+C$zux*C$zuc+C$zuw*C$zul,C$zun[2]=C$zug*C$zus+C$zuA*C$zuc+C$zuP*C$zul,C$zun[3]=C$zub*C$zus+C$zuS*C$zuc+C$zuM*C$zul,C$zun[4]=C$zum*C$zu_+C$zuC*C$zud+C$zuT*C$zuf,C$zun[5]=C$zuv*C$zu_+C$zux*C$zud+C$zuw*C$zuf,C$zun[6]=C$zug*C$zu_+C$zuA*C$zud+C$zuP*C$zuf,C$zun[7]=C$zub*C$zu_+C$zuS*C$zud+C$zuM*C$zuf,C$zun[8]=C$zum*C$zup+C$zuC*C$zur+C$zuT*C$zui,C$zun[9]=C$zuv*C$zup+C$zux*C$zur+C$zuw*C$zui,C$zun[10]=C$zug*C$zup+C$zuA*C$zur+C$zuP*C$zui,C$zun[11]=C$zub*C$zup+C$zuS*C$zur+C$zuM*C$zui,C$zuu!==C$zuh&&(C$zun[12]=C$zuo[12],C$zun[13]=C$zuo[13],C$zun[14]=C$zuo[14],C$zun[15]=C$zuo[15]),C$zuh},Mat4.rotateX=function(C$zut,C$zue,C$zui){var C$zur=C$zut.m,C$zun=C$zue.m;var C$zua=Math.sin(C$zui),C$zui=Math.cos(C$zui),C$zuo=C$zun[4],C$zus=C$zun[5],C$zuc=C$zun[6],C$zul=C$zun[7],C$zuh=C$zun[8],C$zuu=C$zun[9],C$zu_=C$zun[10],C$zud=C$zun[11];return C$zue!==C$zut&&(C$zur[0]=C$zun[0],C$zur[1]=C$zun[1],C$zur[2]=C$zun[2],C$zur[3]=C$zun[3],C$zur[12]=C$zun[12],C$zur[13]=C$zun[13],C$zur[14]=C$zun[14],C$zur[15]=C$zun[15]),C$zur[4]=C$zuo*C$zui+C$zuh*C$zua,C$zur[5]=C$zus*C$zui+C$zuu*C$zua,C$zur[6]=C$zuc*C$zui+C$zu_*C$zua,C$zur[7]=C$zul*C$zui+C$zud*C$zua,C$zur[8]=C$zuh*C$zui-C$zuo*C$zua,C$zur[9]=C$zuu*C$zui-C$zus*C$zua,C$zur[10]=C$zu_*C$zui-C$zuc*C$zua,C$zur[11]=C$zud*C$zui-C$zul*C$zua,C$zut},Mat4.rotateY=function(C$zut,C$zue,C$zui){var C$zur=C$zut.m,C$zun=C$zue.m;var C$zua=Math.sin(C$zui),C$zui=Math.cos(C$zui),C$zuo=C$zun[0],C$zus=C$zun[1],C$zuc=C$zun[2],C$zul=C$zun[3],C$zuh=C$zun[8],C$zuu=C$zun[9],C$zu_=C$zun[10],C$zud=C$zun[11];return C$zue!==C$zut&&(C$zur[4]=C$zun[4],C$zur[5]=C$zun[5],C$zur[6]=C$zun[6],C$zur[7]=C$zun[7],C$zur[12]=C$zun[12],C$zur[13]=C$zun[13],C$zur[14]=C$zun[14],C$zur[15]=C$zun[15]),C$zur[0]=C$zuo*C$zui-C$zuh*C$zua,C$zur[1]=C$zus*C$zui-C$zuu*C$zua,C$zur[2]=C$zuc*C$zui-C$zu_*C$zua,C$zur[3]=C$zul*C$zui-C$zud*C$zua,C$zur[8]=C$zuo*C$zua+C$zuh*C$zui,C$zur[9]=C$zus*C$zua+C$zuu*C$zui,C$zur[10]=C$zuc*C$zua+C$zu_*C$zui,C$zur[11]=C$zul*C$zua+C$zud*C$zui,C$zut},Mat4.rotateZ=function(C$zut,C$zue,C$zui){var C$zur=C$zue.m;var C$zun=C$zut.m;var C$zua=Math.sin(C$zui),C$zui=Math.cos(C$zui),C$zuo=C$zue.m[0],C$zus=C$zue.m[1],C$zuc=C$zue.m[2],C$zul=C$zue.m[3],C$zuh=C$zue.m[4],C$zuu=C$zue.m[5],C$zu_=C$zue.m[6],C$zud=C$zue.m[7];return C$zue!==C$zut&&(C$zun[8]=C$zur[8],C$zun[9]=C$zur[9],C$zun[10]=C$zur[10],C$zun[11]=C$zur[11],C$zun[12]=C$zur[12],C$zun[13]=C$zur[13],C$zun[14]=C$zur[14],C$zun[15]=C$zur[15]),C$zun[0]=C$zuo*C$zui+C$zuh*C$zua,C$zun[1]=C$zus*C$zui+C$zuu*C$zua,C$zun[2]=C$zuc*C$zui+C$zu_*C$zua,C$zun[3]=C$zul*C$zui+C$zud*C$zua,C$zun[4]=C$zuh*C$zui-C$zuo*C$zua,C$zun[5]=C$zuu*C$zui-C$zus*C$zua,C$zun[6]=C$zu_*C$zui-C$zuc*C$zua,C$zun[7]=C$zud*C$zui-C$zul*C$zua,C$zut},Mat4.fromTranslation=function(C$zut,C$zue){var C$zui=C$zut.m;return C$zui[0]=1,C$zui[1]=0,C$zui[2]=0,C$zui[3]=0,C$zui[4]=0,C$zui[5]=1,C$zui[6]=0,C$zui[7]=0,C$zui[8]=0,C$zui[9]=0,C$zui[10]=1,C$zui[11]=0,C$zui[12]=C$zue.x,C$zui[13]=C$zue.y,C$zui[14]=C$zue.z,C$zui[15]=1,C$zut},Mat4.fromScaling=function(C$zut,C$zue){var C$zui=C$zut.m;return C$zui[0]=C$zue.x,C$zui[1]=0,C$zui[2]=0,C$zui[3]=0,C$zui[4]=0,C$zui[5]=C$zue.y,C$zui[6]=0,C$zui[7]=0,C$zui[8]=0,C$zui[9]=0,C$zui[10]=C$zue.z,C$zui[11]=0,C$zui[12]=0,C$zui[13]=0,C$zui[14]=0,C$zui[15]=1,C$zut},Mat4.fromRotation=function(C$zut,C$zue,C$zui){var C$zur=C$zui.x,C$zun=C$zui.y,C$zui=C$zui.z;var C$zua=Math.sqrt(C$zur*C$zur+C$zun*C$zun+C$zui*C$zui);if(Math.abs(C$zua)<C$zuE.EPSILON)return null;C$zur*=C$zua=1/C$zua,C$zun*=C$zua,C$zui*=C$zua;C$zua=Math.sin(C$zue);C$zue=Math.cos(C$zue);var C$zuo=1-C$zue;var C$zus=C$zut.m;return C$zus[0]=C$zur*C$zur*C$zuo+C$zue,C$zus[1]=C$zun*C$zur*C$zuo+C$zui*C$zua,C$zus[2]=C$zui*C$zur*C$zuo-C$zun*C$zua,C$zus[3]=0,C$zus[4]=C$zur*C$zun*C$zuo-C$zui*C$zua,C$zus[5]=C$zun*C$zun*C$zuo+C$zue,C$zus[6]=C$zui*C$zun*C$zuo+C$zur*C$zua,C$zus[7]=0,C$zus[8]=C$zur*C$zui*C$zuo+C$zun*C$zua,C$zus[9]=C$zun*C$zui*C$zuo-C$zur*C$zua,C$zus[10]=C$zui*C$zui*C$zuo+C$zue,C$zus[11]=0,C$zus[12]=0,C$zus[13]=0,C$zus[14]=0,C$zus[15]=1,C$zut},Mat4.fromXRotation=function(C$zut,C$zue){var C$zui=Math.sin(C$zue),C$zue=Math.cos(C$zue);var C$zur=C$zut.m;return C$zur[0]=1,C$zur[1]=0,C$zur[2]=0,C$zur[3]=0,C$zur[4]=0,C$zur[5]=C$zue,C$zur[6]=C$zui,C$zur[7]=0,C$zur[8]=0,C$zur[9]=-C$zui,C$zur[10]=C$zue,C$zur[11]=0,C$zur[12]=0,C$zur[13]=0,C$zur[14]=0,C$zur[15]=1,C$zut},Mat4.fromYRotation=function(C$zut,C$zue){var C$zui=Math.sin(C$zue),C$zue=Math.cos(C$zue);var C$zur=C$zut.m;return C$zur[0]=C$zue,C$zur[1]=0,C$zur[2]=-C$zui,C$zur[3]=0,C$zur[4]=0,C$zur[5]=1,C$zur[6]=0,C$zur[7]=0,C$zur[8]=C$zui,C$zur[9]=0,C$zur[10]=C$zue,C$zur[11]=0,C$zur[12]=0,C$zur[13]=0,C$zur[14]=0,C$zur[15]=1,C$zut},Mat4.fromZRotation=function(C$zut,C$zue){var C$zui=Math.sin(C$zue),C$zue=Math.cos(C$zue);var C$zur=C$zut.m;return C$zur[0]=C$zue,C$zur[1]=C$zui,C$zur[2]=0,C$zur[3]=0,C$zur[4]=-C$zui,C$zur[5]=C$zue,C$zur[6]=0,C$zur[7]=0,C$zur[8]=0,C$zur[9]=0,C$zur[10]=1,C$zur[11]=0,C$zur[12]=0,C$zur[13]=0,C$zur[14]=0,C$zur[15]=1,C$zut},Mat4.fromRT=function(C$zut,C$zue,C$zui){var C$zur=C$zue.x,C$zun=C$zue.y,C$zua=C$zue.z,C$zue=C$zue.w;var C$zuo=C$zur+C$zur;var C$zus=C$zun+C$zun;var C$zuc=C$zua+C$zua;var C$zul=C$zur*C$zuo;var C$zuh=C$zur*C$zus;C$zur*=C$zuc;var C$zuu=C$zun*C$zus;C$zun*=C$zuc;C$zua*=C$zuc;C$zuo*=C$zue;C$zus*=C$zue;C$zue*=C$zuc;C$zuc=C$zut.m;return C$zuc[0]=1-(C$zuu+C$zua),C$zuc[1]=C$zuh+C$zue,C$zuc[2]=C$zur-C$zus,C$zuc[3]=0,C$zuc[4]=C$zuh-C$zue,C$zuc[5]=1-(C$zul+C$zua),C$zuc[6]=C$zun+C$zuo,C$zuc[7]=0,C$zuc[8]=C$zur+C$zus,C$zuc[9]=C$zun-C$zuo,C$zuc[10]=1-(C$zul+C$zuu),C$zuc[11]=0,C$zuc[12]=C$zui.x,C$zuc[13]=C$zui.y,C$zuc[14]=C$zui.z,C$zuc[15]=1,C$zut},Mat4.getTranslation=function(C$zut,C$zue){C$zue=C$zue.m;return C$zut.x=C$zue[12],C$zut.y=C$zue[13],C$zut.z=C$zue[14],C$zut},Mat4.getScaling=function(C$zut,C$zue){C$zue=C$zue.m;var C$zui=C$zu_.m;var C$zur=C$zui[0]=C$zue[0];var C$zun=C$zui[1]=C$zue[1];var C$zua=C$zui[2]=C$zue[2];var C$zuo=C$zui[3]=C$zue[4];var C$zus=C$zui[4]=C$zue[5];var C$zuc=C$zui[5]=C$zue[6];var C$zul=C$zui[6]=C$zue[8];var C$zuh=C$zui[7]=C$zue[9];C$zui=C$zui[8]=C$zue[10];return C$zut.x=Math.sqrt(C$zur*C$zur+C$zun*C$zun+C$zua*C$zua),C$zut.y=Math.sqrt(C$zuo*C$zuo+C$zus*C$zus+C$zuc*C$zuc),C$zut.z=Math.sqrt(C$zul*C$zul+C$zuh*C$zuh+C$zui*C$zui),C$zuu.default.determinant(C$zu_)<0&&(C$zut.x*=-1),C$zut},Mat4.getRotation=function(C$zut,C$zue){C$zue=C$zue.m;var C$zui=C$zue[0]+C$zue[5]+C$zue[10];var C$zur=0;return 0<C$zui?(C$zur=2*Math.sqrt(C$zui+1),C$zut.w=.25*C$zur,C$zut.x=(C$zue[6]-C$zue[9])/C$zur,C$zut.y=(C$zue[8]-C$zue[2])/C$zur,C$zut.z=(C$zue[1]-C$zue[4])/C$zur):C$zue[0]>C$zue[5]&&C$zue[0]>C$zue[10]?(C$zur=2*Math.sqrt(1+C$zue[0]-C$zue[5]-C$zue[10]),C$zut.w=(C$zue[6]-C$zue[9])/C$zur,C$zut.x=.25*C$zur,C$zut.y=(C$zue[1]+C$zue[4])/C$zur,C$zut.z=(C$zue[8]+C$zue[2])/C$zur):C$zue[5]>C$zue[10]?(C$zur=2*Math.sqrt(1+C$zue[5]-C$zue[0]-C$zue[10]),C$zut.w=(C$zue[8]-C$zue[2])/C$zur,C$zut.x=(C$zue[1]+C$zue[4])/C$zur,C$zut.y=.25*C$zur,C$zut.z=(C$zue[6]+C$zue[9])/C$zur):(C$zur=2*Math.sqrt(1+C$zue[10]-C$zue[0]-C$zue[5]),C$zut.w=(C$zue[1]-C$zue[4])/C$zur,C$zut.x=(C$zue[8]+C$zue[2])/C$zur,C$zut.y=(C$zue[6]+C$zue[9])/C$zur,C$zut.z=.25*C$zur),C$zut},Mat4.toRTS=function(C$zut,C$zue,C$zui,C$zur){C$zut=C$zut.m;var C$zun=C$zu_.m;C$zur.x=C$zua.default.set(C$zus,C$zut[0],C$zut[1],C$zut[2]).mag(),C$zun[0]=C$zut[0]/C$zur.x,C$zun[1]=C$zut[1]/C$zur.x,C$zun[2]=C$zut[2]/C$zur.x,C$zur.y=C$zua.default.set(C$zus,C$zut[4],C$zut[5],C$zut[6]).mag(),C$zun[3]=C$zut[4]/C$zur.y,C$zun[4]=C$zut[5]/C$zur.y,C$zun[5]=C$zut[6]/C$zur.y,C$zur.z=C$zua.default.set(C$zus,C$zut[8],C$zut[9],C$zut[10]).mag(),C$zun[6]=C$zut[8]/C$zur.z,C$zun[7]=C$zut[9]/C$zur.z,C$zun[8]=C$zut[10]/C$zur.z,C$zuu.default.determinant(C$zu_)<0&&(C$zur.x*=-1,C$zun[0]*=-1,C$zun[1]*=-1,C$zun[2]*=-1),C$zuo.default.fromMat3(C$zue,C$zu_),C$zua.default.set(C$zui,C$zut[12],C$zut[13],C$zut[14])},Mat4.fromRTS=function(C$zuh,C$zut,C$zue,C$zui){var C$zur=C$zut.x,C$zun=C$zut.y,C$zua=C$zut.z,C$zut=C$zut.w;var C$zuo=C$zur+C$zur;var C$zus=C$zun+C$zun;var C$zuc=C$zua+C$zua;var C$zuu=C$zur*C$zuo;var C$zu_=C$zur*C$zus;C$zur*=C$zuc;var C$zud=C$zun*C$zus;C$zun*=C$zuc;C$zua*=C$zuc;C$zuo*=C$zut;C$zus*=C$zut;C$zut*=C$zuc;C$zuc=C$zui.x;var C$zuf=C$zui.y;C$zui=C$zui.z;var C$zul=C$zuh.m;return C$zul[0]=(1-(C$zud+C$zua))*C$zuc,C$zul[1]=(C$zu_+C$zut)*C$zuc,C$zul[2]=(C$zur-C$zus)*C$zuc,C$zul[3]=0,C$zul[4]=(C$zu_-C$zut)*C$zuf,C$zul[5]=(1-(C$zuu+C$zua))*C$zuf,C$zul[6]=(C$zun+C$zuo)*C$zuf,C$zul[7]=0,C$zul[8]=(C$zur+C$zus)*C$zui,C$zul[9]=(C$zun-C$zuo)*C$zui,C$zul[10]=(1-(C$zuu+C$zud))*C$zui,C$zul[11]=0,C$zul[12]=C$zue.x,C$zul[13]=C$zue.y,C$zul[14]=C$zue.z,C$zul[15]=1,C$zuh},Mat4.fromRTSOrigin=function(C$zuh,C$zut,C$zuu,C$zue,C$zui){var C$zur=C$zut.x,C$zun=C$zut.y,C$zua=C$zut.z,C$zut=C$zut.w;var C$zuo=C$zur+C$zur;var C$zus=C$zun+C$zun;var C$zuc=C$zua+C$zua;var C$zu_=C$zur*C$zuo;var C$zud=C$zur*C$zus;C$zur*=C$zuc;var C$zuf=C$zun*C$zus;C$zun*=C$zuc;C$zua*=C$zuc;C$zuo*=C$zut;C$zus*=C$zut;C$zut*=C$zuc;C$zuc=C$zue.x;var C$zup=C$zue.y;C$zue=C$zue.z;var C$zum=C$zui.x;var C$zuv=C$zui.y;C$zui=C$zui.z;var C$zul=C$zuh.m;return C$zul[0]=(1-(C$zuf+C$zua))*C$zuc,C$zul[1]=(C$zud+C$zut)*C$zuc,C$zul[2]=(C$zur-C$zus)*C$zuc,C$zul[3]=0,C$zul[4]=(C$zud-C$zut)*C$zup,C$zul[5]=(1-(C$zu_+C$zua))*C$zup,C$zul[6]=(C$zun+C$zuo)*C$zup,C$zul[7]=0,C$zul[8]=(C$zur+C$zus)*C$zue,C$zul[9]=(C$zun-C$zuo)*C$zue,C$zul[10]=(1-(C$zu_+C$zuf))*C$zue,C$zul[11]=0,C$zul[12]=C$zuu.x+C$zum-(C$zul[0]*C$zum+C$zul[4]*C$zuv+C$zul[8]*C$zui),C$zul[13]=C$zuu.y+C$zuv-(C$zul[1]*C$zum+C$zul[5]*C$zuv+C$zul[9]*C$zui),C$zul[14]=C$zuu.z+C$zui-(C$zul[2]*C$zum+C$zul[6]*C$zuv+C$zul[10]*C$zui),C$zul[15]=1,C$zuh},Mat4.fromQuat=function(C$zut,C$zue){var C$zui=C$zue.x,C$zur=C$zue.y,C$zun=C$zue.z,C$zue=C$zue.w;var C$zua=C$zui+C$zui;var C$zuo=C$zur+C$zur;var C$zus=C$zun+C$zun;C$zui*=C$zua;var C$zuc=C$zur*C$zua;C$zur*=C$zuo;var C$zul=C$zun*C$zua;var C$zuh=C$zun*C$zuo;C$zun*=C$zus;C$zua*=C$zue;C$zuo*=C$zue;C$zue*=C$zus;C$zus=C$zut.m;return C$zus[0]=1-C$zur-C$zun,C$zus[1]=C$zuc+C$zue,C$zus[2]=C$zul-C$zuo,C$zus[3]=0,C$zus[4]=C$zuc-C$zue,C$zus[5]=1-C$zui-C$zun,C$zus[6]=C$zuh+C$zua,C$zus[7]=0,C$zus[8]=C$zul+C$zuo,C$zus[9]=C$zuh-C$zua,C$zus[10]=1-C$zui-C$zur,C$zus[11]=0,C$zus[12]=0,C$zus[13]=0,C$zus[14]=0,C$zus[15]=1,C$zut},Mat4.frustum=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){var C$zus=1/(C$zui-C$zue);var C$zuc=1/(C$zun-C$zur);var C$zuh=1/(C$zua-C$zuo);var C$zul=C$zut.m;return C$zul[0]=2*C$zua*C$zus,C$zul[1]=0,C$zul[2]=0,C$zul[3]=0,C$zul[4]=0,C$zul[5]=2*C$zua*C$zuc,C$zul[6]=0,C$zul[7]=0,C$zul[8]=(C$zui+C$zue)*C$zus,C$zul[9]=(C$zun+C$zur)*C$zuc,C$zul[10]=(C$zuo+C$zua)*C$zuh,C$zul[11]=-1,C$zul[12]=0,C$zul[13]=0,C$zul[14]=C$zuo*C$zua*2*C$zuh,C$zul[15]=0,C$zut},Mat4.perspective=function(C$zut,C$zue,C$zui,C$zur,C$zun){C$zue=1/Math.tan(C$zue/2);var C$zua=1/(C$zur-C$zun);var C$zuo=C$zut.m;return C$zuo[0]=C$zue/C$zui,C$zuo[1]=0,C$zuo[2]=0,C$zuo[3]=0,C$zuo[4]=0,C$zuo[5]=C$zue,C$zuo[6]=0,C$zuo[7]=0,C$zuo[8]=0,C$zuo[9]=0,C$zuo[10]=(C$zun+C$zur)*C$zua,C$zuo[11]=-1,C$zuo[12]=0,C$zuo[13]=0,C$zuo[14]=2*C$zun*C$zur*C$zua,C$zuo[15]=0,C$zut},Mat4.ortho=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){var C$zus=1/(C$zue-C$zui);var C$zuc=1/(C$zur-C$zun);var C$zuh=1/(C$zua-C$zuo);var C$zul=C$zut.m;return C$zul[0]=-2*C$zus,C$zul[1]=0,C$zul[2]=0,C$zul[3]=0,C$zul[4]=0,C$zul[5]=-2*C$zuc,C$zul[6]=0,C$zul[7]=0,C$zul[8]=0,C$zul[9]=0,C$zul[10]=2*C$zuh,C$zul[11]=0,C$zul[12]=(C$zue+C$zui)*C$zus,C$zul[13]=(C$zun+C$zur)*C$zuc,C$zul[14]=(C$zuo+C$zua)*C$zuh,C$zul[15]=1,C$zut},Mat4.lookAt=function(C$zuh,C$zut,C$zue,C$zui){var C$zuu=C$zut.x;var C$zu_=C$zut.y;C$zut=C$zut.z;var C$zur=C$zui.x;var C$zun=C$zui.y;C$zui=C$zui.z;var C$zua=C$zuu-C$zue.x;var C$zuo=C$zu_-C$zue.y;C$zue=C$zut-C$zue.z;var C$zus=1/Math.sqrt(C$zua*C$zua+C$zuo*C$zuo+C$zue*C$zue);var C$zuc=C$zun*(C$zue*=C$zus)-C$zui*(C$zuo*=C$zus);C$zui=C$zui*(C$zua*=C$zus)-C$zur*C$zue;C$zur=C$zur*C$zuo-C$zun*C$zua;C$zun=C$zuo*(C$zur*=C$zus=1/Math.sqrt(C$zuc*C$zuc+C$zui*C$zui+C$zur*C$zur))-C$zue*(C$zui*=C$zus);C$zus=C$zue*(C$zuc*=C$zus)-C$zua*C$zur;var C$zud=C$zua*C$zui-C$zuo*C$zuc;var C$zul=C$zuh.m;return C$zul[0]=C$zuc,C$zul[1]=C$zun,C$zul[2]=C$zua,C$zul[3]=0,C$zul[4]=C$zui,C$zul[5]=C$zus,C$zul[6]=C$zuo,C$zul[7]=0,C$zul[8]=C$zur,C$zul[9]=C$zud,C$zul[10]=C$zue,C$zul[11]=0,C$zul[12]=-(C$zuc*C$zuu+C$zui*C$zu_+C$zur*C$zut),C$zul[13]=-(C$zun*C$zuu+C$zus*C$zu_+C$zud*C$zut),C$zul[14]=-(C$zua*C$zuu+C$zuo*C$zu_+C$zue*C$zut),C$zul[15]=1,C$zuh},Mat4.inverseTranspose=function(C$zuh,C$zut){C$zut=C$zut.m;C$zum=C$zut[0],C$zuv=C$zut[1],C$zug=C$zut[2],C$zub=C$zut[3],C$zuC=C$zut[4],C$zux=C$zut[5],C$zuA=C$zut[6],C$zuS=C$zut[7],C$zuT=C$zut[8],C$zuw=C$zut[9],C$zuP=C$zut[10],C$zuM=C$zut[11],C$zup=C$zut[12],C$zuR=C$zut[13],C$zuI=C$zut[14],C$zuB=C$zut[15];var C$zuu=C$zum*C$zux-C$zuv*C$zuC;var C$zu_=C$zum*C$zuA-C$zug*C$zuC;var C$zue=C$zum*C$zuS-C$zub*C$zuC;var C$zud=C$zuv*C$zuA-C$zug*C$zux;var C$zui=C$zuv*C$zuS-C$zub*C$zux;var C$zur=C$zug*C$zuS-C$zub*C$zuA;var C$zun=C$zuT*C$zuR-C$zuw*C$zup;var C$zua=C$zuT*C$zuI-C$zuP*C$zup;var C$zuo=C$zuT*C$zuB-C$zuM*C$zup;var C$zuf=C$zuw*C$zuI-C$zuP*C$zuR;var C$zus=C$zuw*C$zuB-C$zuM*C$zuR;var C$zuc=C$zuP*C$zuB-C$zuM*C$zuI;var C$zul=C$zuu*C$zuc-C$zu_*C$zus+C$zue*C$zuf+C$zud*C$zuo-C$zui*C$zua+C$zur*C$zun;return C$zul?((C$zut=C$zuh.m)[0]=(C$zux*C$zuc-C$zuA*C$zus+C$zuS*C$zuf)*(C$zul=1/C$zul),C$zut[1]=(C$zuA*C$zuo-C$zuC*C$zuc-C$zuS*C$zua)*C$zul,C$zut[2]=(C$zuC*C$zus-C$zux*C$zuo+C$zuS*C$zun)*C$zul,C$zut[3]=0,C$zut[4]=(C$zug*C$zus-C$zuv*C$zuc-C$zub*C$zuf)*C$zul,C$zut[5]=(C$zum*C$zuc-C$zug*C$zuo+C$zub*C$zua)*C$zul,C$zut[6]=(C$zuv*C$zuo-C$zum*C$zus-C$zub*C$zun)*C$zul,C$zut[7]=0,C$zut[8]=(C$zuR*C$zur-C$zuI*C$zui+C$zuB*C$zud)*C$zul,C$zut[9]=(C$zuI*C$zue-C$zup*C$zur-C$zuB*C$zu_)*C$zul,C$zut[10]=(C$zup*C$zui-C$zuR*C$zue+C$zuB*C$zuu)*C$zul,C$zut[11]=0,C$zut[12]=0,C$zut[13]=0,C$zut[14]=0,C$zut[15]=1,C$zuh):null},Mat4.add=function(C$zut,C$zue,C$zui){var C$zur=C$zut.m,C$zue=C$zue.m,C$zui=C$zui.m;return C$zur[0]=C$zue[0]+C$zui[0],C$zur[1]=C$zue[1]+C$zui[1],C$zur[2]=C$zue[2]+C$zui[2],C$zur[3]=C$zue[3]+C$zui[3],C$zur[4]=C$zue[4]+C$zui[4],C$zur[5]=C$zue[5]+C$zui[5],C$zur[6]=C$zue[6]+C$zui[6],C$zur[7]=C$zue[7]+C$zui[7],C$zur[8]=C$zue[8]+C$zui[8],C$zur[9]=C$zue[9]+C$zui[9],C$zur[10]=C$zue[10]+C$zui[10],C$zur[11]=C$zue[11]+C$zui[11],C$zur[12]=C$zue[12]+C$zui[12],C$zur[13]=C$zue[13]+C$zui[13],C$zur[14]=C$zue[14]+C$zui[14],C$zur[15]=C$zue[15]+C$zui[15],C$zut},Mat4.subtract=function(C$zut,C$zue,C$zui){var C$zur=C$zut.m,C$zue=C$zue.m,C$zui=C$zui.m;return C$zur[0]=C$zue[0]-C$zui[0],C$zur[1]=C$zue[1]-C$zui[1],C$zur[2]=C$zue[2]-C$zui[2],C$zur[3]=C$zue[3]-C$zui[3],C$zur[4]=C$zue[4]-C$zui[4],C$zur[5]=C$zue[5]-C$zui[5],C$zur[6]=C$zue[6]-C$zui[6],C$zur[7]=C$zue[7]-C$zui[7],C$zur[8]=C$zue[8]-C$zui[8],C$zur[9]=C$zue[9]-C$zui[9],C$zur[10]=C$zue[10]-C$zui[10],C$zur[11]=C$zue[11]-C$zui[11],C$zur[12]=C$zue[12]-C$zui[12],C$zur[13]=C$zue[13]-C$zui[13],C$zur[14]=C$zue[14]-C$zui[14],C$zur[15]=C$zue[15]-C$zui[15],C$zut},Mat4.multiplyScalar=function(C$zut,C$zue,C$zui){var C$zur=C$zut.m,C$zue=C$zue.m;return C$zur[0]=C$zue[0]*C$zui,C$zur[1]=C$zue[1]*C$zui,C$zur[2]=C$zue[2]*C$zui,C$zur[3]=C$zue[3]*C$zui,C$zur[4]=C$zue[4]*C$zui,C$zur[5]=C$zue[5]*C$zui,C$zur[6]=C$zue[6]*C$zui,C$zur[7]=C$zue[7]*C$zui,C$zur[8]=C$zue[8]*C$zui,C$zur[9]=C$zue[9]*C$zui,C$zur[10]=C$zue[10]*C$zui,C$zur[11]=C$zue[11]*C$zui,C$zur[12]=C$zue[12]*C$zui,C$zur[13]=C$zue[13]*C$zui,C$zur[14]=C$zue[14]*C$zui,C$zur[15]=C$zue[15]*C$zui,C$zut},Mat4.multiplyScalarAndAdd=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zut.m,C$zue=C$zue.m,C$zui=C$zui.m;return C$zun[0]=C$zue[0]+C$zui[0]*C$zur,C$zun[1]=C$zue[1]+C$zui[1]*C$zur,C$zun[2]=C$zue[2]+C$zui[2]*C$zur,C$zun[3]=C$zue[3]+C$zui[3]*C$zur,C$zun[4]=C$zue[4]+C$zui[4]*C$zur,C$zun[5]=C$zue[5]+C$zui[5]*C$zur,C$zun[6]=C$zue[6]+C$zui[6]*C$zur,C$zun[7]=C$zue[7]+C$zui[7]*C$zur,C$zun[8]=C$zue[8]+C$zui[8]*C$zur,C$zun[9]=C$zue[9]+C$zui[9]*C$zur,C$zun[10]=C$zue[10]+C$zui[10]*C$zur,C$zun[11]=C$zue[11]+C$zui[11]*C$zur,C$zun[12]=C$zue[12]+C$zui[12]*C$zur,C$zun[13]=C$zue[13]+C$zui[13]*C$zur,C$zun[14]=C$zue[14]+C$zui[14]*C$zur,C$zun[15]=C$zue[15]+C$zui[15]*C$zur,C$zut},Mat4.strictEquals=function(C$zut,C$zue){C$zut=C$zut.m,C$zue=C$zue.m;return C$zut[0]===C$zue[0]&&C$zut[1]===C$zue[1]&&C$zut[2]===C$zue[2]&&C$zut[3]===C$zue[3]&&C$zut[4]===C$zue[4]&&C$zut[5]===C$zue[5]&&C$zut[6]===C$zue[6]&&C$zut[7]===C$zue[7]&&C$zut[8]===C$zue[8]&&C$zut[9]===C$zue[9]&&C$zut[10]===C$zue[10]&&C$zut[11]===C$zue[11]&&C$zut[12]===C$zue[12]&&C$zut[13]===C$zue[13]&&C$zut[14]===C$zue[14]&&C$zut[15]===C$zue[15]},Mat4.equals=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=C$zuE.EPSILON);C$zut=C$zut.m,C$zue=C$zue.m;return Math.abs(C$zut[0]-C$zue[0])<=C$zui*Math.max(1,Math.abs(C$zut[0]),Math.abs(C$zue[0]))&&Math.abs(C$zut[1]-C$zue[1])<=C$zui*Math.max(1,Math.abs(C$zut[1]),Math.abs(C$zue[1]))&&Math.abs(C$zut[2]-C$zue[2])<=C$zui*Math.max(1,Math.abs(C$zut[2]),Math.abs(C$zue[2]))&&Math.abs(C$zut[3]-C$zue[3])<=C$zui*Math.max(1,Math.abs(C$zut[3]),Math.abs(C$zue[3]))&&Math.abs(C$zut[4]-C$zue[4])<=C$zui*Math.max(1,Math.abs(C$zut[4]),Math.abs(C$zue[4]))&&Math.abs(C$zut[5]-C$zue[5])<=C$zui*Math.max(1,Math.abs(C$zut[5]),Math.abs(C$zue[5]))&&Math.abs(C$zut[6]-C$zue[6])<=C$zui*Math.max(1,Math.abs(C$zut[6]),Math.abs(C$zue[6]))&&Math.abs(C$zut[7]-C$zue[7])<=C$zui*Math.max(1,Math.abs(C$zut[7]),Math.abs(C$zue[7]))&&Math.abs(C$zut[8]-C$zue[8])<=C$zui*Math.max(1,Math.abs(C$zut[8]),Math.abs(C$zue[8]))&&Math.abs(C$zut[9]-C$zue[9])<=C$zui*Math.max(1,Math.abs(C$zut[9]),Math.abs(C$zue[9]))&&Math.abs(C$zut[10]-C$zue[10])<=C$zui*Math.max(1,Math.abs(C$zut[10]),Math.abs(C$zue[10]))&&Math.abs(C$zut[11]-C$zue[11])<=C$zui*Math.max(1,Math.abs(C$zut[11]),Math.abs(C$zue[11]))&&Math.abs(C$zut[12]-C$zue[12])<=C$zui*Math.max(1,Math.abs(C$zut[12]),Math.abs(C$zue[12]))&&Math.abs(C$zut[13]-C$zue[13])<=C$zui*Math.max(1,Math.abs(C$zut[13]),Math.abs(C$zue[13]))&&Math.abs(C$zut[14]-C$zue[14])<=C$zui*Math.max(1,Math.abs(C$zut[14]),Math.abs(C$zue[14]))&&Math.abs(C$zut[15]-C$zue[15])<=C$zui*Math.max(1,Math.abs(C$zut[15]),Math.abs(C$zue[15]))},Mat4.adjoint=function(C$zuh,C$zut){var C$zut=C$zut.m,C$zue=C$zuh.m;var C$zuu=C$zut[0],C$zui=C$zut[1],C$zur=C$zut[2],C$zun=C$zut[3],C$zu_=C$zut[4],C$zud=C$zut[5],C$zua=C$zut[6],C$zuo=C$zut[7],C$zuf=C$zut[8],C$zup=C$zut[9],C$zus=C$zut[10],C$zuc=C$zut[11],C$zum=C$zut[12],C$zuv=C$zut[13],C$zul=C$zut[14],C$zut=C$zut[15];return C$zue[0]=C$zud*(C$zus*C$zut-C$zuc*C$zul)-C$zup*(C$zua*C$zut-C$zuo*C$zul)+C$zuv*(C$zua*C$zuc-C$zuo*C$zus),C$zue[1]=-(C$zui*(C$zus*C$zut-C$zuc*C$zul)-C$zup*(C$zur*C$zut-C$zun*C$zul)+C$zuv*(C$zur*C$zuc-C$zun*C$zus)),C$zue[2]=C$zui*(C$zua*C$zut-C$zuo*C$zul)-C$zud*(C$zur*C$zut-C$zun*C$zul)+C$zuv*(C$zur*C$zuo-C$zun*C$zua),C$zue[3]=-(C$zui*(C$zua*C$zuc-C$zuo*C$zus)-C$zud*(C$zur*C$zuc-C$zun*C$zus)+C$zup*(C$zur*C$zuo-C$zun*C$zua)),C$zue[4]=-(C$zu_*(C$zus*C$zut-C$zuc*C$zul)-C$zuf*(C$zua*C$zut-C$zuo*C$zul)+C$zum*(C$zua*C$zuc-C$zuo*C$zus)),C$zue[5]=C$zuu*(C$zus*C$zut-C$zuc*C$zul)-C$zuf*(C$zur*C$zut-C$zun*C$zul)+C$zum*(C$zur*C$zuc-C$zun*C$zus),C$zue[6]=-(C$zuu*(C$zua*C$zut-C$zuo*C$zul)-C$zu_*(C$zur*C$zut-C$zun*C$zul)+C$zum*(C$zur*C$zuo-C$zun*C$zua)),C$zue[7]=C$zuu*(C$zua*C$zuc-C$zuo*C$zus)-C$zu_*(C$zur*C$zuc-C$zun*C$zus)+C$zuf*(C$zur*C$zuo-C$zun*C$zua),C$zue[8]=C$zu_*(C$zup*C$zut-C$zuc*C$zuv)-C$zuf*(C$zud*C$zut-C$zuo*C$zuv)+C$zum*(C$zud*C$zuc-C$zuo*C$zup),C$zue[9]=-(C$zuu*(C$zup*C$zut-C$zuc*C$zuv)-C$zuf*(C$zui*C$zut-C$zun*C$zuv)+C$zum*(C$zui*C$zuc-C$zun*C$zup)),C$zue[10]=C$zuu*(C$zud*C$zut-C$zuo*C$zuv)-C$zu_*(C$zui*C$zut-C$zun*C$zuv)+C$zum*(C$zui*C$zuo-C$zun*C$zud),C$zue[11]=-(C$zuu*(C$zud*C$zuc-C$zuo*C$zup)-C$zu_*(C$zui*C$zuc-C$zun*C$zup)+C$zuf*(C$zui*C$zuo-C$zun*C$zud)),C$zue[12]=-(C$zu_*(C$zup*C$zul-C$zus*C$zuv)-C$zuf*(C$zud*C$zul-C$zua*C$zuv)+C$zum*(C$zud*C$zus-C$zua*C$zup)),C$zue[13]=C$zuu*(C$zup*C$zul-C$zus*C$zuv)-C$zuf*(C$zui*C$zul-C$zur*C$zuv)+C$zum*(C$zui*C$zus-C$zur*C$zup),C$zue[14]=-(C$zuu*(C$zud*C$zul-C$zua*C$zuv)-C$zu_*(C$zui*C$zul-C$zur*C$zuv)+C$zum*(C$zui*C$zua-C$zur*C$zud)),C$zue[15]=C$zuu*(C$zud*C$zus-C$zua*C$zup)-C$zu_*(C$zui*C$zus-C$zur*C$zup)+C$zuf*(C$zui*C$zua-C$zur*C$zud),C$zuh},Mat4.toArray=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=0);var C$zur=C$zue.m;for(var C$zun=0;C$zun<16;C$zun++)C$zut[C$zui+C$zun]=C$zur[C$zun];return C$zut},Mat4.fromArray=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=0);var C$zur=C$zut.m;for(var C$zun=0;C$zun<16;C$zun++)C$zur[C$zun]=C$zue[C$zui+C$zun];return C$zut},C$zue.clone=function(){var C$zut=this.m;return new Mat4(C$zut[0],C$zut[1],C$zut[2],C$zut[3],C$zut[4],C$zut[5],C$zut[6],C$zut[7],C$zut[8],C$zut[9],C$zut[10],C$zut[11],C$zut[12],C$zut[13],C$zut[14],C$zut[15])},C$zue.set=function(C$zut){var C$zue=this.m,C$zut=C$zut.m;return C$zue[0]=C$zut[0],C$zue[1]=C$zut[1],C$zue[2]=C$zut[2],C$zue[3]=C$zut[3],C$zue[4]=C$zut[4],C$zue[5]=C$zut[5],C$zue[6]=C$zut[6],C$zue[7]=C$zut[7],C$zue[8]=C$zut[8],C$zue[9]=C$zut[9],C$zue[10]=C$zut[10],C$zue[11]=C$zut[11],C$zue[12]=C$zut[12],C$zue[13]=C$zut[13],C$zue[14]=C$zut[14],C$zue[15]=C$zut[15],this},C$zue.equals=function(C$zut){return Mat4.strictEquals(this,C$zut)},C$zue.fuzzyEquals=function(C$zut){return Mat4.equals(this,C$zut)},C$zue.toString=function(){var C$zut=this.m;return C$zut?"[\n"+C$zut[0]+", "+C$zut[1]+", "+C$zut[2]+", "+C$zut[3]+",\n"+C$zut[4]+", "+C$zut[5]+", "+C$zut[6]+", "+C$zut[7]+",\n"+C$zut[8]+", "+C$zut[9]+", "+C$zut[10]+", "+C$zut[11]+",\n"+C$zut[12]+", "+C$zut[13]+", "+C$zut[14]+", "+C$zut[15]+"\n]":"[\n1, 0, 0, 0\n0, 1, 0, 0\n0, 0, 1, 0\n0, 0, 0, 1\n]"},C$zue.identity=function(){return Mat4.identity(this)},C$zue.transpose=function(C$zut){return C$zut=C$zut||new Mat4,Mat4.transpose(C$zut,this)},C$zue.invert=function(C$zut){return C$zut=C$zut||new Mat4,Mat4.invert(C$zut,this)},C$zue.adjoint=function(C$zut){return C$zut=C$zut||new Mat4,Mat4.adjoint(C$zut,this)},C$zue.determinant=function(){return Mat4.determinant(this)},C$zue.add=function(C$zut,C$zue){return C$zue=C$zue||new Mat4,Mat4.add(C$zue,this,C$zut)},C$zue.subtract=function(C$zut){return Mat4.subtract(this,this,C$zut)},C$zue.multiply=function(C$zut){return Mat4.multiply(this,this,C$zut)},C$zue.multiplyScalar=function(C$zut){return Mat4.multiplyScalar(this,this,C$zut)},C$zue.translate=function(C$zut,C$zue){return C$zue=C$zue||new Mat4,Mat4.translate(C$zue,this,C$zut)},C$zue.scale=function(C$zut,C$zue){return C$zue=C$zue||new Mat4,Mat4.scale(C$zue,this,C$zut)},C$zue.rotate=function(C$zut,C$zue,C$zui){return C$zui=C$zui||new Mat4,Mat4.rotate(C$zui,this,C$zut,C$zue)},C$zue.getTranslation=function(C$zut){return C$zut=C$zut||new C$zua.default,Mat4.getTranslation(C$zut,this)},C$zue.getScale=function(C$zut){return C$zut=C$zut||new C$zua.default,Mat4.getScaling(C$zut,this)},C$zue.getRotation=function(C$zut){return C$zut=C$zut||new C$zuo.default,Mat4.getRotation(C$zut,this)},C$zue.fromRTS=function(C$zut,C$zue,C$zui){return Mat4.fromRTS(this,C$zut,C$zue,C$zui)},C$zue.fromQuat=function(C$zut){return Mat4.fromQuat(this,C$zut)},Mat4}(C$zur.default);(C$zui.default=C$zuy).mul=C$zuy.multiply,C$zuy.sub=C$zuy.subtract,C$zuy.IDENTITY=Object.freeze(new C$zuy);var C$zus=new C$zua.default;var C$zu_=new C$zuu.default;C$zun.default.fastDefine("cc.Mat4",C$zuy,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1});for(var C$zuc=0;C$zuc<16;C$zuc++)!function(C$zue){Object.defineProperty(C$zuy.prototype,"m"+C$zue,{get:function(){return this.m[C$zue]},set:function(C$zut){this.m[C$zue]=C$zut}})}(C$zuc);cc.mat4=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup){C$zue=new C$zuy(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup);return void 0===C$zut&&C$zuy.identity(C$zue),C$zue},cc.Mat4=C$zuy,C$zue.exports=C$zui.default},{"../platform/CCClass":189,"./mat3":280,"./quat":282,"./utils":286,"./value-type":287,"./vec3":289}],282:[function(C$zut,C$zui,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zur=_interopRequireDefault(C$zut("./value-type"));var C$zuh=_interopRequireDefault(C$zut("../platform/CCClass"));var C$zun=_interopRequireDefault(C$zut("./vec3"));var C$zuu=_interopRequireDefault(C$zut("./mat3"));var C$zu_=C$zut("./utils");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zud;var C$zuf;var C$zup;var C$zum;var C$zua=function(C$zua){var C$zut;C$zut=C$zua,(C$zue=Quat).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(Quat);var C$zue=Quat.prototype;function Quat(C$zut,C$zue,C$zui,C$zur){var C$zun;return void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=1),(C$zun=C$zua.call(this)||this).x=void 0,C$zun.y=void 0,C$zun.z=void 0,C$zun.w=void 0,C$zut&&"object"==typeof C$zut?(C$zun.z=C$zut.z,C$zun.y=C$zut.y,C$zun.w=C$zut.w,C$zun.x=C$zut.x):(C$zun.x=C$zut,C$zun.y=C$zue,C$zun.z=C$zui,C$zun.w=C$zur),C$zun}return C$zue.mul=function(C$zut,C$zue){return Quat.multiply(C$zue||new Quat,this,C$zut)},Quat.clone=function(C$zut){return new Quat(C$zut.x,C$zut.y,C$zut.z,C$zut.w)},Quat.copy=function(C$zut,C$zue){return C$zut.x=C$zue.x,C$zut.y=C$zue.y,C$zut.z=C$zue.z,C$zut.w=C$zue.w,C$zut},Quat.set=function(C$zut,C$zue,C$zui,C$zur,C$zun){return C$zut.x=C$zue,C$zut.y=C$zui,C$zut.z=C$zur,C$zut.w=C$zun,C$zut},Quat.identity=function(C$zut){return C$zut.x=0,C$zut.y=0,C$zut.z=0,C$zut.w=1,C$zut},Quat.rotationTo=function(C$zut,C$zue,C$zui){var C$zur=C$zun.default.dot(C$zue,C$zui);return C$zur<-.999999?(C$zun.default.cross(C$zus,C$zun.default.RIGHT,C$zue),C$zus.mag()<1e-6&&C$zun.default.cross(C$zus,C$zun.default.UP,C$zue),C$zun.default.normalize(C$zus,C$zus),Quat.fromAxisAngle(C$zut,C$zus,Math.PI),C$zut):.999999<C$zur?(C$zut.x=0,C$zut.y=0,C$zut.z=0,C$zut.w=1,C$zut):(C$zun.default.cross(C$zus,C$zue,C$zui),C$zut.x=C$zus.x,C$zut.y=C$zus.y,C$zut.z=C$zus.z,C$zut.w=1+C$zur,Quat.normalize(C$zut,C$zut))},Quat.getAxisAngle=function(C$zut,C$zue){var C$zui=2*Math.acos(C$zue.w);var C$zur=Math.sin(C$zui/2);return 0!==C$zur?(C$zut.x=C$zue.x/C$zur,C$zut.y=C$zue.y/C$zur,C$zut.z=C$zue.z/C$zur):(C$zut.x=1,C$zut.y=0,C$zut.z=0),C$zui},Quat.multiply=function(C$zut,C$zue,C$zui){return C$zud=C$zue.x*C$zui.w+C$zue.w*C$zui.x+C$zue.y*C$zui.z-C$zue.z*C$zui.y,C$zuf=C$zue.y*C$zui.w+C$zue.w*C$zui.y+C$zue.z*C$zui.x-C$zue.x*C$zui.z,C$zup=C$zue.z*C$zui.w+C$zue.w*C$zui.z+C$zue.x*C$zui.y-C$zue.y*C$zui.x,C$zum=C$zue.w*C$zui.w-C$zue.x*C$zui.x-C$zue.y*C$zui.y-C$zue.z*C$zui.z,C$zut.x=C$zud,C$zut.y=C$zuf,C$zut.z=C$zup,C$zut.w=C$zum,C$zut},Quat.multiplyScalar=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x*C$zui,C$zut.y=C$zue.y*C$zui,C$zut.z=C$zue.z*C$zui,C$zut.w=C$zue.w*C$zui,C$zut},Quat.scaleAndAdd=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue.x+C$zui.x*C$zur,C$zut.y=C$zue.y+C$zui.y*C$zur,C$zut.z=C$zue.z+C$zui.z*C$zur,C$zut.w=C$zue.w+C$zui.w*C$zur,C$zut},Quat.rotateX=function(C$zut,C$zue,C$zui){C$zui*=.5;var C$zur=Math.sin(C$zui);C$zui=Math.cos(C$zui);return C$zut.x=C$zue.x*C$zui+C$zue.w*C$zur,C$zut.y=C$zue.y*C$zui+C$zue.z*C$zur,C$zut.z=C$zue.z*C$zui-C$zue.y*C$zur,C$zut.w=C$zue.w*C$zui-C$zue.x*C$zur,C$zut},Quat.rotateY=function(C$zut,C$zue,C$zui){C$zui*=.5;var C$zur=Math.sin(C$zui);C$zui=Math.cos(C$zui);return C$zut.x=C$zue.x*C$zui-C$zue.z*C$zur,C$zut.y=C$zue.y*C$zui+C$zue.w*C$zur,C$zut.z=C$zue.z*C$zui+C$zue.x*C$zur,C$zut.w=C$zue.w*C$zui-C$zue.y*C$zur,C$zut},Quat.rotateZ=function(C$zut,C$zue,C$zui){C$zui*=.5;var C$zur=Math.sin(C$zui);C$zui=Math.cos(C$zui);return C$zut.x=C$zue.x*C$zui+C$zue.y*C$zur,C$zut.y=C$zue.y*C$zui-C$zue.x*C$zur,C$zut.z=C$zue.z*C$zui+C$zue.w*C$zur,C$zut.w=C$zue.w*C$zui-C$zue.z*C$zur,C$zut},Quat.rotateAround=function(C$zut,C$zue,C$zui,C$zur){return Quat.invert(C$zuo,C$zue),C$zun.default.transformQuat(C$zus,C$zui,C$zuo),Quat.fromAxisAngle(C$zuo,C$zus,C$zur),Quat.multiply(C$zut,C$zue,C$zuo),C$zut},Quat.rotateAroundLocal=function(C$zut,C$zue,C$zui,C$zur){return Quat.fromAxisAngle(C$zuo,C$zui,C$zur),Quat.multiply(C$zut,C$zue,C$zuo),C$zut},Quat.calculateW=function(C$zut,C$zue){return C$zut.x=C$zue.x,C$zut.y=C$zue.y,C$zut.z=C$zue.z,C$zut.w=Math.sqrt(Math.abs(1-C$zue.x*C$zue.x-C$zue.y*C$zue.y-C$zue.z*C$zue.z)),C$zut},Quat.dot=function(C$zut,C$zue){return C$zut.x*C$zue.x+C$zut.y*C$zue.y+C$zut.z*C$zue.z+C$zut.w*C$zue.w},Quat.lerp=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue.x+C$zur*(C$zui.x-C$zue.x),C$zut.y=C$zue.y+C$zur*(C$zui.y-C$zue.y),C$zut.z=C$zue.z+C$zur*(C$zui.z-C$zue.z),C$zut.w=C$zue.w+C$zur*(C$zui.w-C$zue.w),C$zut},Quat.slerp=function(C$zut,C$zue,C$zui,C$zur){var C$zun=0;var C$zua=0;var C$zuo=C$zue.x*C$zui.x+C$zue.y*C$zui.y+C$zue.z*C$zui.z+C$zue.w*C$zui.w;var C$zus;return C$zuo<0&&(C$zuo=-C$zuo,C$zui.x=-C$zui.x,C$zui.y=-C$zui.y,C$zui.z=-C$zui.z,C$zui.w=-C$zui.w),C$zua=1e-6<1-C$zuo?(C$zuo=Math.acos(C$zuo),C$zus=Math.sin(C$zuo),C$zun=Math.sin((1-C$zur)*C$zuo)/C$zus,Math.sin(C$zur*C$zuo)/C$zus):(C$zun=1-C$zur,C$zur),C$zut.x=C$zun*C$zue.x+C$zua*C$zui.x,C$zut.y=C$zun*C$zue.y+C$zua*C$zui.y,C$zut.z=C$zun*C$zue.z+C$zua*C$zui.z,C$zut.w=C$zun*C$zue.w+C$zua*C$zui.w,C$zut},Quat.sqlerp=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){return Quat.slerp(C$zuo,C$zue,C$zun,C$zua),Quat.slerp(C$zuv,C$zui,C$zur,C$zua),Quat.slerp(C$zut,C$zuo,C$zuv,2*C$zua*(1-C$zua)),C$zut},Quat.invert=function(C$zut,C$zue){var C$zui=C$zue.x*C$zue.x+C$zue.y*C$zue.y+C$zue.z*C$zue.z+C$zue.w*C$zue.w;C$zui=C$zui?1/C$zui:0;return C$zut.x=-C$zue.x*C$zui,C$zut.y=-C$zue.y*C$zui,C$zut.z=-C$zue.z*C$zui,C$zut.w=C$zue.w*C$zui,C$zut},Quat.conjugate=function(C$zut,C$zue){return C$zut.x=-C$zue.x,C$zut.y=-C$zue.y,C$zut.z=-C$zue.z,C$zut.w=C$zue.w,C$zut},Quat.len=function(C$zut){return Math.sqrt(C$zut.x*C$zut.x+C$zut.y*C$zut.y+C$zut.z*C$zut.z+C$zut.w*C$zut.w)},Quat.lengthSqr=function(C$zut){return C$zut.x*C$zut.x+C$zut.y*C$zut.y+C$zut.z*C$zut.z+C$zut.w*C$zut.w},Quat.normalize=function(C$zut,C$zue){var C$zui=C$zue.x*C$zue.x+C$zue.y*C$zue.y+C$zue.z*C$zue.z+C$zue.w*C$zue.w;return 0<C$zui&&(C$zui=1/Math.sqrt(C$zui),C$zut.x=C$zue.x*C$zui,C$zut.y=C$zue.y*C$zui,C$zut.z=C$zue.z*C$zui,C$zut.w=C$zue.w*C$zui),C$zut},Quat.fromAxes=function(C$zut,C$zue,C$zui,C$zur){return C$zuu.default.set(C$zuc,C$zue.x,C$zue.y,C$zue.z,C$zui.x,C$zui.y,C$zui.z,C$zur.x,C$zur.y,C$zur.z),Quat.normalize(C$zut,Quat.fromMat3(C$zut,C$zuc))},Quat.fromViewUp=function(C$zut,C$zue,C$zui){return C$zuu.default.fromViewUp(C$zuc,C$zue,C$zui),Quat.normalize(C$zut,Quat.fromMat3(C$zut,C$zuc))},Quat.fromAxisAngle=function(C$zut,C$zue,C$zui){C$zui*=.5;var C$zur=Math.sin(C$zui);return C$zut.x=C$zur*C$zue.x,C$zut.y=C$zur*C$zue.y,C$zut.z=C$zur*C$zue.z,C$zut.w=Math.cos(C$zui),C$zut},Quat.fromAngleZ=function(C$zut,C$zue){return C$zue*=C$zul,C$zut.x=C$zut.y=0,C$zut.z=Math.sin(C$zue),C$zut.w=Math.cos(C$zue),C$zut},Quat.fromMat3=function(C$zut,C$zue){C$zue=C$zue.m;var C$zui=C$zue[0],C$zur=C$zue[1],C$zun=C$zue[2],C$zua=C$zue[3],C$zuo=C$zue[4],C$zus=C$zue[5],C$zuc=C$zue[6],C$zuh=C$zue[7],C$zue=C$zue[8];var C$zul=C$zui+C$zuo+C$zue;return 0<C$zul?(C$zul=.5/Math.sqrt(C$zul+1),C$zut.w=.25/C$zul,C$zut.x=(C$zus-C$zuh)*C$zul,C$zut.y=(C$zuc-C$zun)*C$zul,C$zut.z=(C$zur-C$zua)*C$zul):C$zuo<C$zui&&C$zue<C$zui?(C$zul=2*Math.sqrt(1+C$zui-C$zuo-C$zue),C$zut.w=(C$zus-C$zuh)/C$zul,C$zut.x=.25*C$zul,C$zut.y=(C$zua+C$zur)/C$zul,C$zut.z=(C$zuc+C$zun)/C$zul):C$zue<C$zuo?(C$zul=2*Math.sqrt(1+C$zuo-C$zui-C$zue),C$zut.w=(C$zuc-C$zun)/C$zul,C$zut.x=(C$zua+C$zur)/C$zul,C$zut.y=.25*C$zul,C$zut.z=(C$zuh+C$zus)/C$zul):(C$zul=2*Math.sqrt(1+C$zue-C$zui-C$zuo),C$zut.w=(C$zur-C$zua)/C$zul,C$zut.x=(C$zuc+C$zun)/C$zul,C$zut.y=(C$zuh+C$zus)/C$zul,C$zut.z=.25*C$zul),C$zut},Quat.fromEuler=function(C$zut,C$zue,C$zui,C$zur){C$zue*=C$zul,C$zui*=C$zul,C$zur*=C$zul;var C$zun=Math.sin(C$zue);C$zue=Math.cos(C$zue);var C$zua=Math.sin(C$zui);C$zui=Math.cos(C$zui);var C$zuo=Math.sin(C$zur);C$zur=Math.cos(C$zur);return C$zut.x=C$zun*C$zui*C$zur+C$zue*C$zua*C$zuo,C$zut.y=C$zue*C$zua*C$zur+C$zun*C$zui*C$zuo,C$zut.z=C$zue*C$zui*C$zuo-C$zun*C$zua*C$zur,C$zut.w=C$zue*C$zui*C$zur-C$zun*C$zua*C$zuo,C$zut},Quat.toAxisX=function(C$zut,C$zue){var C$zui=2*C$zue.y;var C$zur=2*C$zue.z;return C$zut.x=1-C$zui*C$zue.y-C$zur*C$zue.z,C$zut.y=C$zui*C$zue.x+C$zur*C$zue.w,C$zut.z=C$zur*C$zue.x+C$zui*C$zue.w,C$zut},Quat.toAxisY=function(C$zut,C$zue){var C$zui=2*C$zue.x;var C$zur=2*C$zue.y;var C$zun=2*C$zue.z;return C$zut.x=C$zur*C$zue.x-C$zun*C$zue.w,C$zut.y=1-C$zui*C$zue.x-C$zun*C$zue.z,C$zut.z=C$zun*C$zue.y+C$zui*C$zue.w,C$zut},Quat.toAxisZ=function(C$zut,C$zue){var C$zui=2*C$zue.x;var C$zur=2*C$zue.y;var C$zun=2*C$zue.z;return C$zut.x=C$zun*C$zue.x-C$zur*C$zue.w,C$zut.y=C$zun*C$zue.y-C$zui*C$zue.w,C$zut.z=1-C$zui*C$zue.x-C$zur*C$zue.y,C$zut},Quat.toEuler=function(C$zut,C$zue,C$zuh){var C$zui=C$zue.x,C$zur=C$zue.y,C$zun=C$zue.z,C$zue=C$zue.w;var C$zua=0;var C$zuo=0;var C$zus=0;var C$zuc=C$zui*C$zur+C$zun*C$zue;var C$zuu,C$zul;return.499999<C$zuc?(C$zuo=(C$zua=0,C$zu_.toDegree)(2*Math.atan2(C$zui,C$zue)),C$zus=90):C$zuc<-.499999?(C$zuo=-(C$zua=0,C$zu_.toDegree)(2*Math.atan2(C$zui,C$zue)),C$zus=-90):(C$zuu=C$zur*C$zur,C$zul=C$zun*C$zun,C$zua=(0,C$zu_.toDegree)(Math.atan2(2*C$zui*C$zue-2*C$zur*C$zun,1-2*(C$zui*C$zui)-2*C$zul)),C$zuo=(0,C$zu_.toDegree)(Math.atan2(2*C$zur*C$zue-2*C$zui*C$zun,1-2*C$zuu-2*C$zul)),C$zus=(0,C$zu_.toDegree)(Math.asin(2*C$zuc)),C$zuh&&(C$zua=-180*Math.sign(C$zua+1e-6)+C$zua,C$zuo=-180*Math.sign(C$zuo+1e-6)+C$zuo,C$zus=180*Math.sign(C$zus+1e-6)-C$zus)),C$zut.x=C$zua,C$zut.y=C$zuo,C$zut.z=C$zus,C$zut},Quat.strictEquals=function(C$zut,C$zue){return C$zut.x===C$zue.x&&C$zut.y===C$zue.y&&C$zut.z===C$zue.z&&C$zut.w===C$zue.w},Quat.equals=function(C$zut,C$zue,C$zui){return void 0===C$zui&&(C$zui=C$zu_.EPSILON),Math.abs(C$zut.x-C$zue.x)<=C$zui*Math.max(1,Math.abs(C$zut.x),Math.abs(C$zue.x))&&Math.abs(C$zut.y-C$zue.y)<=C$zui*Math.max(1,Math.abs(C$zut.y),Math.abs(C$zue.y))&&Math.abs(C$zut.z-C$zue.z)<=C$zui*Math.max(1,Math.abs(C$zut.z),Math.abs(C$zue.z))&&Math.abs(C$zut.w-C$zue.w)<=C$zui*Math.max(1,Math.abs(C$zut.w),Math.abs(C$zue.w))},Quat.toArray=function(C$zut,C$zue,C$zui){return C$zut[(C$zui=void 0===C$zui?0:C$zui)+0]=C$zue.x,C$zut[C$zui+1]=C$zue.y,C$zut[C$zui+2]=C$zue.z,C$zut[C$zui+3]=C$zue.w,C$zut},Quat.fromArray=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue[(C$zui=void 0===C$zui?0:C$zui)+0],C$zut.y=C$zue[C$zui+1],C$zut.z=C$zue[C$zui+2],C$zut.w=C$zue[C$zui+3],C$zut},C$zue.clone=function(){return new Quat(this.x,this.y,this.z,this.w)},C$zue.set=function(C$zut){return this.x=C$zut.x,this.y=C$zut.y,this.z=C$zut.z,this.w=C$zut.w,this},C$zue.equals=function(C$zut){return C$zut&&this.x===C$zut.x&&this.y===C$zut.y&&this.z===C$zut.z&&this.w===C$zut.w},C$zue.toEuler=function(C$zut){return Quat.toEuler(C$zut,this)},C$zue.fromEuler=function(C$zut){return Quat.fromEuler(this,C$zut.x,C$zut.y,C$zut.z)},C$zue.lerp=function(C$zut,C$zue,C$zui){return C$zui=C$zui||new Quat,Quat.slerp(C$zui,this,C$zut,C$zue),C$zui},C$zue.multiply=function(C$zut){return Quat.multiply(this,this,C$zut)},C$zue.rotateAround=function(C$zut,C$zue,C$zui,C$zur){return C$zur=C$zur||new Quat,Quat.rotateAround(C$zur,C$zut,C$zue,C$zui)},Quat}(C$zur.default);(C$zue.default=C$zua).mul=C$zua.multiply,C$zua.scale=C$zua.multiplyScalar,C$zua.mag=C$zua.len,C$zua.IDENTITY=Object.freeze(new C$zua);var C$zuo=new C$zua;var C$zuv=new C$zua;var C$zus=new C$zun.default;var C$zuc=new C$zuu.default;var C$zul=.5*Math.PI/180;C$zuh.default.fastDefine("cc.Quat",C$zua,{x:0,y:0,z:0,w:1}),cc.quat=function(C$zut,C$zue,C$zui,C$zur){return new C$zua(C$zut,C$zue,C$zui,C$zur)},cc.Quat=C$zua,C$zui.exports=C$zue.default},{"../platform/CCClass":189,"./mat3":280,"./utils":286,"./value-type":287,"./vec3":289}],283:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=_interopRequireDefault(C$zut("./value-type"));var C$zun=_interopRequireDefault(C$zut("../platform/CCClass"));var C$zuo=_interopRequireDefault(C$zut("./vec2"));var C$zus=_interopRequireDefault(C$zut("./size"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zua=function(C$zua){C$zue=C$zua,(C$zut=Rect).prototype=Object.create(C$zue.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zue;_createSuper(Rect);function Rect(C$zut,C$zue,C$zui,C$zur){var C$zun;return void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),(C$zun=C$zua.call(this)||this).x=void 0,C$zun.y=void 0,C$zun.width=void 0,C$zun.height=void 0,C$zut&&"object"==typeof C$zut&&(C$zue=C$zut.y,C$zui=C$zut.width,C$zur=C$zut.height,C$zut=C$zut.x),C$zun.x=C$zut||0,C$zun.y=C$zue||0,C$zun.width=C$zui||0,C$zun.height=C$zur||0,C$zun}Rect.fromMinMax=function(C$zut,C$zue){var C$zui=Math.min(C$zut.x,C$zue.x);var C$zur=Math.min(C$zut.y,C$zue.y);return new Rect(C$zui,C$zur,Math.max(C$zut.x,C$zue.x)-C$zui,Math.max(C$zut.y,C$zue.y)-C$zur)};var C$zut=Rect.prototype;var C$zue,C$zui;return C$zut.clone=function(){return new Rect(this.x,this.y,this.width,this.height)},C$zut.equals=function(C$zut){return C$zut&&this.x===C$zut.x&&this.y===C$zut.y&&this.width===C$zut.width&&this.height===C$zut.height},C$zut.lerp=function(C$zut,C$zue,C$zui){C$zui=C$zui||new Rect;var C$zur=this.x;var C$zun=this.y;var C$zua=this.width;var C$zuo=this.height;return C$zui.x=C$zur+(C$zut.x-C$zur)*C$zue,C$zui.y=C$zun+(C$zut.y-C$zun)*C$zue,C$zui.width=C$zua+(C$zut.width-C$zua)*C$zue,C$zui.height=C$zuo+(C$zut.height-C$zuo)*C$zue,C$zui},C$zut.set=function(C$zut){return this.x=C$zut.x,this.y=C$zut.y,this.width=C$zut.width,this.height=C$zut.height,this},C$zut.intersects=function(C$zut){var C$zue=this.x+this.width,C$zui=this.y+this.height,C$zur=C$zut.x+C$zut.width,C$zun=C$zut.y+C$zut.height;return!(C$zue<C$zut.x||C$zur<this.x||C$zui<C$zut.y||C$zun<this.y)},C$zut.intersection=function(C$zut,C$zue){var C$zui=this.x,C$zur=this.y,C$zun=this.x+this.width,C$zua=this.y+this.height;var C$zuo=C$zue.x,C$zus=C$zue.y,C$zuc=C$zue.x+C$zue.width,C$zue=C$zue.y+C$zue.height;return C$zut.x=Math.max(C$zui,C$zuo),C$zut.y=Math.max(C$zur,C$zus),C$zut.width=Math.min(C$zun,C$zuc)-C$zut.x,C$zut.height=Math.min(C$zua,C$zue)-C$zut.y,C$zut},C$zut.contains=function(C$zut){return this.x<=C$zut.x&&this.x+this.width>=C$zut.x&&this.y<=C$zut.y&&this.y+this.height>=C$zut.y},C$zut.containsRect=function(C$zut){return this.x<=C$zut.x&&this.x+this.width>=C$zut.x+C$zut.width&&this.y<=C$zut.y&&this.y+this.height>=C$zut.y+C$zut.height},C$zut.union=function(C$zut,C$zue){var C$zui=this.x,C$zur=this.y,C$zun=this.width,C$zua=this.height;var C$zuo=C$zue.x,C$zus=C$zue.y,C$zuc=C$zue.width,C$zue=C$zue.height;return C$zut.x=Math.min(C$zui,C$zuo),C$zut.y=Math.min(C$zur,C$zus),C$zut.width=Math.max(C$zui+C$zun,C$zuo+C$zuc)-C$zut.x,C$zut.height=Math.max(C$zur+C$zua,C$zus+C$zue)-C$zut.y,C$zut},C$zut.transformMat4=function(C$zut,C$zue){var C$zui=this.x;var C$zur=this.y;var C$zun=C$zui+this.width;var C$zua=C$zur+this.height;C$zue=C$zue.m;var C$zuo=C$zue[0]*C$zui+C$zue[4]*C$zur+C$zue[12];var C$zus=C$zue[1]*C$zui+C$zue[5]*C$zur+C$zue[13];var C$zuc=C$zue[0]*C$zun+C$zue[4]*C$zur+C$zue[12];C$zur=C$zue[1]*C$zun+C$zue[5]*C$zur+C$zue[13];var C$zul=C$zue[0]*C$zui+C$zue[4]*C$zua+C$zue[12];C$zui=C$zue[1]*C$zui+C$zue[5]*C$zua+C$zue[13];var C$zuh=C$zue[0]*C$zun+C$zue[4]*C$zua+C$zue[12];C$zun=C$zue[1]*C$zun+C$zue[5]*C$zua+C$zue[13];C$zua=Math.min(C$zuo,C$zuc,C$zul,C$zuh);C$zue=Math.max(C$zuo,C$zuc,C$zul,C$zuh);C$zuo=Math.min(C$zus,C$zur,C$zui,C$zun);C$zuc=Math.max(C$zus,C$zur,C$zui,C$zun);return C$zut.x=C$zua,C$zut.y=C$zuo,C$zut.width=C$zue-C$zua,C$zut.height=C$zuc-C$zuo,C$zut},C$zut.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},C$zue=Rect,(C$zut=[{key:"xMin",get:function(){return this.x},set:function(C$zut){this.width+=this.x-C$zut,this.x=C$zut}},{key:"yMin",get:function(){return this.y},set:function(C$zut){this.height+=this.y-C$zut,this.y=C$zut}},{key:"xMax",get:function(){return this.x+this.width},set:function(C$zut){this.width=C$zut-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(C$zut){this.height=C$zut-this.y}},{key:"center",get:function(){return new C$zuo.default(this.x+.5*this.width,this.y+.5*this.height)},set:function(C$zut){this.x=C$zut.x-.5*this.width,this.y=C$zut.y-.5*this.height}},{key:"origin",get:function(){return new C$zuo.default(this.x,this.y)},set:function(C$zut){this.x=C$zut.x,this.y=C$zut.y}},{key:"size",get:function(){return new C$zus.default(this.width,this.height)},set:function(C$zut){this.width=C$zut.width,this.height=C$zut.height}}])&&_defineProperties(C$zue.prototype,C$zut),C$zui&&_defineProperties(C$zue,C$zui),Rect}(C$zur.default);C$zui.default=C$zua,C$zun.default.fastDefine("cc.Rect",C$zua,{x:0,y:0,width:0,height:0}),cc.Rect=C$zua,cc.rect=function(C$zut,C$zue,C$zui,C$zur){return new C$zua(C$zut,C$zue,C$zui,C$zur)},C$zue.exports=C$zui.default},{"../platform/CCClass":189,"./size":284,"./value-type":287,"./vec2":288}],284:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=_interopRequireDefault(C$zut("./value-type"));C$zut=_interopRequireDefault(C$zut("../platform/CCClass"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zun=function(C$zur){C$zue=C$zur,(C$zut=Size).prototype=Object.create(C$zue.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zue;_createSuper(Size);var C$zut,C$zue;function Size(C$zut,C$zue){var C$zui;return void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),(C$zui=C$zur.call(this)||this).width=void 0,C$zui.height=void 0,C$zut&&"object"==typeof C$zut?(C$zui.height=C$zut.height,C$zui.width=C$zut.width):(C$zui.width=C$zut||0,C$zui.height=C$zue||0),C$zui}C$zut=Size,C$zue=[{key:"ZERO",get:function(){return new Size}}],(C$zui=null)&&_defineProperties(C$zut.prototype,C$zui),C$zue&&_defineProperties(C$zut,C$zue);var C$zui=Size.prototype;return C$zui.clone=function(){return new Size(this.width,this.height)},C$zui.equals=function(C$zut){return C$zut&&this.width===C$zut.width&&this.height===C$zut.height},C$zui.lerp=function(C$zut,C$zue,C$zui){C$zui=C$zui||new Size;var C$zur=this.width;var C$zun=this.height;return C$zui.width=C$zur+(C$zut.width-C$zur)*C$zue,C$zui.height=C$zun+(C$zut.height-C$zun)*C$zue,C$zui},C$zui.set=function(C$zut){return this.width=C$zut.width,this.height=C$zut.height,this},C$zui.toString=function(){return"("+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},Size}(C$zur.default);(C$zui.default=C$zun).ZERO_R=C$zun.ZERO,C$zut.default.fastDefine("cc.Size",C$zun,{width:0,height:0}),cc.size=function(C$zut,C$zue){return new C$zun(C$zut,C$zue)},cc.Size=C$zun,C$zue.exports=C$zui.default},{"../platform/CCClass":189,"./value-type":287}],285:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zun=(C$zut=C$zut("./quat"))&&C$zut.__esModule?C$zut:{default:C$zut};var C$zua=new C$zun.default;Trs.toRotation=function(C$zut,C$zue){return C$zut.x=C$zue[3],C$zut.y=C$zue[4],C$zut.z=C$zue[5],C$zut.w=C$zue[6],C$zut},Trs.fromRotation=function(C$zut,C$zue){return C$zut[3]=C$zue.x,C$zut[4]=C$zue.y,C$zut[5]=C$zue.z,C$zut[6]=C$zue.w,C$zut},Trs.toEuler=function(C$zut,C$zue){return Trs.toRotation(C$zua,C$zue),C$zun.default.toEuler(C$zut,C$zua),C$zut},Trs.fromEuler=function(C$zut,C$zue){return C$zun.default.fromEuler(C$zua,C$zue.x,C$zue.y,C$zue.z),Trs.fromRotation(C$zut,C$zua),C$zut},Trs.fromEulerNumber=function(C$zut,C$zue,C$zui,C$zur){return C$zun.default.fromEuler(C$zua,C$zue,C$zui,C$zur),Trs.fromRotation(C$zut,C$zua),C$zut},Trs.toScale=function(C$zut,C$zue){return C$zut.x=C$zue[7],C$zut.y=C$zue[8],C$zut.z=C$zue[9],C$zut},Trs.fromScale=function(C$zut,C$zue){return C$zut[7]=C$zue.x,C$zut[8]=C$zue.y,C$zut[9]=C$zue.z,C$zut},Trs.toPosition=function(C$zut,C$zue){return C$zut.x=C$zue[0],C$zut.y=C$zue[1],C$zut.z=C$zue[2],C$zut},Trs.fromPosition=function(C$zut,C$zue){return C$zut[0]=C$zue.x,C$zut[1]=C$zue.y,C$zut[2]=C$zue.z,C$zut},Trs.fromAngleZ=function(C$zut,C$zue){return C$zun.default.fromAngleZ(C$zua,C$zue),Trs.fromRotation(C$zut,C$zua),C$zut},Trs.toMat4=function(C$zuh,C$zut){var C$zue=C$zut[3],C$zui=C$zut[4],C$zur=C$zut[5],C$zun=C$zut[6];var C$zua=C$zue+C$zue;var C$zuo=C$zui+C$zui;var C$zus=C$zur+C$zur;var C$zuu=C$zue*C$zua;var C$zu_=C$zue*C$zuo;C$zue*=C$zus;var C$zud=C$zui*C$zuo;C$zui*=C$zus;C$zur*=C$zus;C$zua*=C$zun;C$zuo*=C$zun;C$zun*=C$zus;C$zus=C$zut[7];var C$zuc=C$zut[8];var C$zuf=C$zut[9];var C$zul=C$zuh.m;return C$zul[0]=(1-(C$zud+C$zur))*C$zus,C$zul[1]=(C$zu_+C$zun)*C$zus,C$zul[2]=(C$zue-C$zuo)*C$zus,C$zul[3]=0,C$zul[4]=(C$zu_-C$zun)*C$zuc,C$zul[5]=(1-(C$zuu+C$zur))*C$zuc,C$zul[6]=(C$zui+C$zua)*C$zuc,C$zul[7]=0,C$zul[8]=(C$zue+C$zuo)*C$zuf,C$zul[9]=(C$zui-C$zua)*C$zuf,C$zul[10]=(1-(C$zuu+C$zud))*C$zuf,C$zul[11]=0,C$zul[12]=C$zut[0],C$zul[13]=C$zut[1],C$zul[14]=C$zut[2],C$zul[15]=1,C$zuh};C$zut=Trs;function Trs(){}C$zui.default=C$zut,cc.Trs=C$zut,C$zue.exports=C$zui.default},{"./quat":282}],286:[function(C$zua,C$zuo,C$zut){"use strict";C$zut.__esModule=!0,C$zut.equals=function(C$zut,C$zue){return Math.abs(C$zut-C$zue)<=C$zur*Math.max(1,Math.abs(C$zut),Math.abs(C$zue))},C$zut.approx=function(C$zut,C$zue,C$zui){return C$zui=C$zui||C$zur,Math.abs(C$zut-C$zue)<=C$zui},C$zut.clamp=function(C$zut,C$zue,C$zui){return C$zut<C$zue?C$zue:C$zui<C$zut?C$zui:C$zut},C$zut.clamp01=function(C$zut){return C$zut<0?0:1<C$zut?1:C$zut},C$zut.lerp=function(C$zut,C$zue,C$zui){return C$zut+(C$zue-C$zut)*C$zui},C$zut.toRadian=function(C$zut){return C$zut*C$zue},C$zut.toDegree=function(C$zut){return C$zut*C$zui},C$zut.randomRange=randomRange,C$zut.randomRangeInt=function(C$zut,C$zue){return Math.floor(randomRange(C$zut,C$zue))},C$zut.pseudoRandom=pseudoRandom,C$zut.pseudoRandomRange=pseudoRandomRange,C$zut.pseudoRandomRangeInt=function(C$zut,C$zue,C$zui){return Math.floor(pseudoRandomRange(C$zut,C$zue,C$zui))},C$zut.nextPow2=function(C$zut){return--C$zut,C$zut=(C$zut=(C$zut=(C$zut=(C$zut|=C$zut>>1)|C$zut>>2)|C$zut>>4)|C$zut>>8)|C$zut>>16,++C$zut},C$zut.repeat=repeat,C$zut.pingPong=function(C$zut,C$zue){return C$zut=repeat(C$zut,2*C$zue),C$zut=C$zue-Math.abs(C$zut-C$zue)},C$zut.inverseLerp=function(C$zut,C$zue,C$zui){return(C$zui-C$zut)/(C$zue-C$zut)},C$zut.sign=function(C$zut){return(0<C$zut)-(C$zut<0)},C$zut.random=C$zut.FLOAT_BYTES=C$zut.FLOAT_ARRAY_TYPE=C$zut.INT_MIN=C$zut.INT_MAX=C$zut.INT_BITS=C$zut.EPSILON=void 0;var C$zue=Math.PI/180;var C$zui=180/Math.PI;var C$zur=1e-6;C$zut.EPSILON=C$zur;C$zut.INT_BITS=32;C$zut.INT_MAX=2147483647;C$zut.INT_MIN=-1<<31;var C$zun=Float64Array;C$zut.FLOAT_ARRAY_TYPE=C$zun;C$zut.FLOAT_BYTES=8;C$zun=Math.random;function randomRange(C$zut,C$zue){return Math.random()*(C$zue-C$zut)+C$zut}function pseudoRandom(C$zut){return(C$zut=(9301*C$zut+49297)%233280)/233280}function pseudoRandomRange(C$zut,C$zue,C$zui){return pseudoRandom(C$zut)*(C$zui-C$zue)+C$zue}function repeat(C$zut,C$zue){return C$zut-Math.floor(C$zut/C$zue)*C$zue}C$zut.random=C$zun},{}],287:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=(C$zut=C$zut("../platform/js"))&&C$zut.__esModule?C$zut:{default:C$zut};(C$zut=ValueType.prototype).clone=function(){return cc.errorID("0100",C$zur.default.getClassName(this)+".clone"),null},C$zut.equals=function(C$zut){return cc.errorID("0100",C$zur.default.getClassName(this)+".equals"),!1},C$zut.lerp=function(C$zut,C$zue){return cc.errorID("0100",C$zur.default.getClassName(this)+".lerp"),this.clone()},C$zut.set=function(C$zut){cc.errorID("0100",C$zur.default.getClassName(this)+".set")},C$zut.toString=function(){return""+{}};C$zut=ValueType;function ValueType(){}C$zui.default=C$zut,C$zur.default.setClassName("cc.ValueType",C$zut),cc.ValueType=C$zut,C$zue.exports=C$zui.default},{"../platform/js":209}],288:[function(C$zut,C$zur,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zun=_interopRequireDefault(C$zut("./value-type"));var C$zul=_interopRequireDefault(C$zut("../platform/CCClass"));var C$zua=_interopRequireDefault(C$zut("../utils/misc"));var C$zuo=C$zut("./utils");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zus=0;var C$zuc=0;var C$zui=function(C$zur){C$zue=C$zur,(C$zut=Vec2).prototype=Object.create(C$zue.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zue;_createSuper(Vec2);var C$zut=Vec2.prototype;var C$zue,C$zui,C$zun;function Vec2(C$zut,C$zue){var C$zui;return void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),(C$zui=C$zur.call(this)||this).mag=Vec2.prototype.len,C$zui.magSqr=Vec2.prototype.lengthSqr,C$zui.subSelf=Vec2.prototype.subtract,C$zui.mulSelf=Vec2.prototype.multiplyScalar,C$zui.divSelf=Vec2.prototype.divide,C$zui.scaleSelf=Vec2.prototype.multiply,C$zui.negSelf=Vec2.prototype.negate,C$zui.x=void 0,C$zui.y=void 0,C$zui.z=0,C$zut&&"object"==typeof C$zut?(C$zui.y=C$zut.y||0,C$zui.x=C$zut.x||0):(C$zui.x=C$zut||0,C$zui.y=C$zue||0),C$zui}return C$zut.sub=function(C$zut,C$zue){return Vec2.subtract(C$zue||new Vec2,this,C$zut)},C$zut.mul=function(C$zut,C$zue){return Vec2.multiplyScalar(C$zue||new Vec2,this,C$zut)},C$zut.div=function(C$zut,C$zue){return Vec2.multiplyScalar(C$zue||new Vec2,this,1/C$zut)},C$zut.scale=function(C$zut,C$zue){return Vec2.multiply(C$zue||new Vec2,this,C$zut)},C$zut.neg=function(C$zut){return Vec2.negate(C$zut||new Vec2,this)},Vec2.clone=function(C$zut){return new Vec2(C$zut.x,C$zut.y)},Vec2.copy=function(C$zut,C$zue){return C$zut.x=C$zue.x,C$zut.y=C$zue.y,C$zut},Vec2.set=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue,C$zut.y=C$zui,C$zut},Vec2.add=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x+C$zui.x,C$zut.y=C$zue.y+C$zui.y,C$zut},Vec2.subtract=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x-C$zui.x,C$zut.y=C$zue.y-C$zui.y,C$zut},Vec2.multiply=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x*C$zui.x,C$zut.y=C$zue.y*C$zui.y,C$zut},Vec2.divide=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x/C$zui.x,C$zut.y=C$zue.y/C$zui.y,C$zut},Vec2.ceil=function(C$zut,C$zue){return C$zut.x=Math.ceil(C$zue.x),C$zut.y=Math.ceil(C$zue.y),C$zut},Vec2.floor=function(C$zut,C$zue){return C$zut.x=Math.floor(C$zue.x),C$zut.y=Math.floor(C$zue.y),C$zut},Vec2.min=function(C$zut,C$zue,C$zui){return C$zut.x=Math.min(C$zue.x,C$zui.x),C$zut.y=Math.min(C$zue.y,C$zui.y),C$zut},Vec2.max=function(C$zut,C$zue,C$zui){return C$zut.x=Math.max(C$zue.x,C$zui.x),C$zut.y=Math.max(C$zue.y,C$zui.y),C$zut},Vec2.round=function(C$zut,C$zue){return C$zut.x=Math.round(C$zue.x),C$zut.y=Math.round(C$zue.y),C$zut},Vec2.multiplyScalar=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x*C$zui,C$zut.y=C$zue.y*C$zui,C$zut},Vec2.scaleAndAdd=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue.x+C$zui.x*C$zur,C$zut.y=C$zue.y+C$zui.y*C$zur,C$zut},Vec2.distance=function(C$zut,C$zue){return C$zus=C$zue.x-C$zut.x,C$zuc=C$zue.y-C$zut.y,Math.sqrt(C$zus*C$zus+C$zuc*C$zuc)},Vec2.squaredDistance=function(C$zut,C$zue){return C$zus=C$zue.x-C$zut.x,C$zuc=C$zue.y-C$zut.y,C$zus*C$zus+C$zuc*C$zuc},Vec2.len=function(C$zut){return C$zus=C$zut.x,C$zuc=C$zut.y,Math.sqrt(C$zus*C$zus+C$zuc*C$zuc)},Vec2.lengthSqr=function(C$zut){return C$zus=C$zut.x,C$zuc=C$zut.y,C$zus*C$zus+C$zuc*C$zuc},Vec2.negate=function(C$zut,C$zue){return C$zut.x=-C$zue.x,C$zut.y=-C$zue.y,C$zut},Vec2.inverse=function(C$zut,C$zue){return C$zut.x=1/C$zue.x,C$zut.y=1/C$zue.y,C$zut},Vec2.inverseSafe=function(C$zut,C$zue){return C$zus=C$zue.x,C$zuc=C$zue.y,Math.abs(C$zus)<C$zuo.EPSILON?C$zut.x=0:C$zut.x=1/C$zus,Math.abs(C$zuc)<C$zuo.EPSILON?C$zut.y=0:C$zut.y=1/C$zuc,C$zut},Vec2.normalize=function(C$zut,C$zue){C$zus=C$zue.x,C$zuc=C$zue.y;C$zue=C$zus*C$zus+C$zuc*C$zuc;return 0<C$zue&&(C$zue=1/Math.sqrt(C$zue),C$zut.x=C$zus*C$zue,C$zut.y=C$zuc*C$zue),C$zut},Vec2.dot=function(C$zut,C$zue){return C$zut.x*C$zue.x+C$zut.y*C$zue.y},Vec2.cross=function(C$zut,C$zue,C$zui){return C$zut.x=C$zut.y=0,C$zut.z=C$zue.x*C$zui.y-C$zue.y*C$zui.x,C$zut},Vec2.lerp=function(C$zut,C$zue,C$zui,C$zur){return C$zus=C$zue.x,C$zuc=C$zue.y,C$zut.x=C$zus+C$zur*(C$zui.x-C$zus),C$zut.y=C$zuc+C$zur*(C$zui.y-C$zuc),C$zut},Vec2.random=function(C$zut,C$zue){C$zue=C$zue||1;var C$zui=2*(0,C$zuo.random)()*Math.PI;return C$zut.x=Math.cos(C$zui)*C$zue,C$zut.y=Math.sin(C$zui)*C$zue,C$zut},Vec2.transformMat3=function(C$zut,C$zue,C$zui){C$zus=C$zue.x,C$zuc=C$zue.y;C$zue=C$zui.m;return C$zut.x=C$zue[0]*C$zus+C$zue[3]*C$zuc+C$zue[6],C$zut.y=C$zue[1]*C$zus+C$zue[4]*C$zuc+C$zue[7],C$zut},Vec2.transformMat4=function(C$zut,C$zue,C$zui){C$zus=C$zue.x,C$zuc=C$zue.y;C$zue=C$zui.m;return C$zut.x=C$zue[0]*C$zus+C$zue[4]*C$zuc+C$zue[12],C$zut.y=C$zue[1]*C$zus+C$zue[5]*C$zuc+C$zue[13],C$zut},Vec2.strictEquals=function(C$zut,C$zue){return C$zut.x===C$zue.x&&C$zut.y===C$zue.y},Vec2.equals=function(C$zut,C$zue,C$zui){return void 0===C$zui&&(C$zui=C$zuo.EPSILON),Math.abs(C$zut.x-C$zue.x)<=C$zui*Math.max(1,Math.abs(C$zut.x),Math.abs(C$zue.x))&&Math.abs(C$zut.y-C$zue.y)<=C$zui*Math.max(1,Math.abs(C$zut.y),Math.abs(C$zue.y))},Vec2.angle=function(C$zut,C$zue){Vec2.normalize(C$zuh,C$zut),Vec2.normalize(C$zuu,C$zue);C$zut=Vec2.dot(C$zuh,C$zuu);return 1<C$zut?0:C$zut<-1?Math.PI:Math.acos(C$zut)},Vec2.toArray=function(C$zut,C$zue,C$zui){return C$zut[(C$zui=void 0===C$zui?0:C$zui)+0]=C$zue.x,C$zut[C$zui+1]=C$zue.y,C$zut},Vec2.fromArray=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue[(C$zui=void 0===C$zui?0:C$zui)+0],C$zut.y=C$zue[C$zui+1],C$zut},C$zue=Vec2,C$zun=[{key:"ONE",get:function(){return new Vec2(1,1)}},{key:"ZERO",get:function(){return new Vec2(0,0)}},{key:"UP",get:function(){return new Vec2(0,1)}},{key:"RIGHT",get:function(){return new Vec2(1,0)}}],(C$zui=null)&&_defineProperties(C$zue.prototype,C$zui),C$zun&&_defineProperties(C$zue,C$zun),C$zut.clone=function(){return new Vec2(this.x,this.y)},C$zut.set=function(C$zut){return this.x=C$zut.x,this.y=C$zut.y,this},C$zut.equals=function(C$zut){return C$zut&&this.x===C$zut.x&&this.y===C$zut.y},C$zut.fuzzyEquals=function(C$zut,C$zue){return this.x-C$zue<=C$zut.x&&C$zut.x<=this.x+C$zue&&this.y-C$zue<=C$zut.y&&C$zut.y<=this.y+C$zue},C$zut.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},C$zut.lerp=function(C$zut,C$zue,C$zui){C$zui=C$zui||new Vec2;var C$zur=this.x;var C$zun=this.y;return C$zui.x=C$zur+(C$zut.x-C$zur)*C$zue,C$zui.y=C$zun+(C$zut.y-C$zun)*C$zue,C$zui},C$zut.clampf=function(C$zut,C$zue){return this.x=C$zua.default.clampf(this.x,C$zut.x,C$zue.x),this.y=C$zua.default.clampf(this.y,C$zut.y,C$zue.y),this},C$zut.add=function(C$zut,C$zue){return(C$zue=C$zue||new Vec2).x=this.x+C$zut.x,C$zue.y=this.y+C$zut.y,C$zue},C$zut.addSelf=function(C$zut){return this.x+=C$zut.x,this.y+=C$zut.y,this},C$zut.subtract=function(C$zut){return this.x-=C$zut.x,this.y-=C$zut.y,this},C$zut.multiplyScalar=function(C$zut){return this.x*=C$zut,this.y*=C$zut,this},C$zut.multiply=function(C$zut){return this.x*=C$zut.x,this.y*=C$zut.y,this},C$zut.divide=function(C$zut){return this.x/=C$zut,this.y/=C$zut,this},C$zut.negate=function(){return this.x=-this.x,this.y=-this.y,this},C$zut.dot=function(C$zut){return this.x*C$zut.x+this.y*C$zut.y},C$zut.cross=function(C$zut){return this.x*C$zut.y-this.y*C$zut.x},C$zut.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},C$zut.lengthSqr=function(){return this.x*this.x+this.y*this.y},C$zut.normalizeSelf=function(){var C$zut=this.x*this.x+this.y*this.y;if(1==C$zut)return this;if(0==C$zut)return this;C$zut=1/Math.sqrt(C$zut);return this.x*=C$zut,this.y*=C$zut,this},C$zut.normalize=function(C$zut){return(C$zut=C$zut||new Vec2).x=this.x,C$zut.y=this.y,C$zut.normalizeSelf(),C$zut},C$zut.angle=function(C$zut){var C$zue=this.magSqr();var C$zui=C$zut.magSqr();if(0===C$zue||0===C$zui)return console.warn("Can't get angle between zero vector"),0;C$zut=this.dot(C$zut)/Math.sqrt(C$zue*C$zui);return C$zut=C$zua.default.clampf(C$zut,-1,1),Math.acos(C$zut)},C$zut.signAngle=function(C$zut){var C$zue=this.angle(C$zut);return this.cross(C$zut)<0?-C$zue:C$zue},C$zut.rotate=function(C$zut,C$zue){return(C$zue=C$zue||new Vec2).x=this.x,C$zue.y=this.y,C$zue.rotateSelf(C$zut)},C$zut.rotateSelf=function(C$zut){var C$zue=Math.sin(C$zut);C$zut=Math.cos(C$zut);var C$zui=this.x;return this.x=C$zut*C$zui-C$zue*this.y,this.y=C$zue*C$zui+C$zut*this.y,this},C$zut.project=function(C$zut){return C$zut.multiplyScalar(this.dot(C$zut)/C$zut.dot(C$zut))},C$zut.transformMat4=function(C$zut,C$zue){return C$zue=C$zue||new Vec2,Vec2.transformMat4(C$zue,this,C$zut),C$zue},C$zut.maxAxis=function(){return Math.max(this.x,this.y)},Vec2}(C$zun.default);(C$zue.default=C$zui).sub=C$zui.subtract,C$zui.mul=C$zui.multiply,C$zui.scale=C$zui.multiplyScalar,C$zui.mag=C$zui.len,C$zui.squaredMagnitude=C$zui.lengthSqr,C$zui.div=C$zui.divide,C$zui.ONE_R=C$zui.ONE,C$zui.ZERO_R=C$zui.ZERO,C$zui.UP_R=C$zui.UP,C$zui.RIGHT_R=C$zui.RIGHT;var C$zuh=new C$zui;var C$zuu=new C$zui;C$zul.default.fastDefine("cc.Vec2",C$zui,{x:0,y:0}),cc.v2=function(C$zut,C$zue){return new C$zui(C$zut,C$zue)},cc.Vec2=C$zui,C$zur.exports=C$zue.default},{"../platform/CCClass":189,"../utils/misc":264,"./utils":286,"./value-type":287}],289:[function(C$zut,C$zui,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zun=_interopRequireDefault(C$zut("./value-type"));var C$zuu=_interopRequireDefault(C$zut("../platform/CCClass"));var C$zua=_interopRequireDefault(C$zut("../utils/misc"));var C$zuo=_interopRequireDefault(C$zut("./vec2"));var C$zus=C$zut("./utils");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zuc=0;var C$zul=0;var C$zuh=0;var C$zur=function(C$zun){C$zue=C$zun,(C$zut=Vec3).prototype=Object.create(C$zue.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zue;_createSuper(Vec3);var C$zut=Vec3.prototype;var C$zue,C$zui,C$zur;function Vec3(C$zut,C$zue,C$zui){var C$zur;return void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),(C$zur=C$zun.call(this)||this).mag=Vec3.prototype.len,C$zur.magSqr=Vec3.prototype.lengthSqr,C$zur.subSelf=Vec3.prototype.subtract,C$zur.mulSelf=Vec3.prototype.multiplyScalar,C$zur.divSelf=Vec3.prototype.divide,C$zur.scaleSelf=Vec3.prototype.multiply,C$zur.negSelf=Vec3.prototype.negate,C$zur.x=void 0,C$zur.y=void 0,C$zur.z=void 0,C$zur.angle=C$zuo.default.prototype.angle,C$zur.project=C$zuo.default.prototype.project,C$zut&&"object"==typeof C$zut?(C$zur.z=C$zut.z,C$zur.y=C$zut.y,C$zur.x=C$zut.x):(C$zur.x=C$zut,C$zur.y=C$zue,C$zur.z=C$zui),C$zur}return C$zut.sub=function(C$zut,C$zue){return Vec3.subtract(C$zue||new Vec3,this,C$zut)},C$zut.mul=function(C$zut,C$zue){return Vec3.multiplyScalar(C$zue||new Vec3,this,C$zut)},C$zut.div=function(C$zut,C$zue){return Vec3.multiplyScalar(C$zue||new Vec3,this,1/C$zut)},C$zut.scale=function(C$zut,C$zue){return Vec3.multiply(C$zue||new Vec3,this,C$zut)},C$zut.neg=function(C$zut){return Vec3.negate(C$zut||new Vec3,this)},Vec3.zero=function(C$zut){return C$zut.x=0,C$zut.y=0,C$zut.z=0,C$zut},Vec3.clone=function(C$zut){return new Vec3(C$zut.x,C$zut.y,C$zut.z)},Vec3.copy=function(C$zut,C$zue){return C$zut.x=C$zue.x,C$zut.y=C$zue.y,C$zut.z=C$zue.z,C$zut},Vec3.set=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue,C$zut.y=C$zui,C$zut.z=C$zur,C$zut},Vec3.add=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x+C$zui.x,C$zut.y=C$zue.y+C$zui.y,C$zut.z=C$zue.z+C$zui.z,C$zut},Vec3.subtract=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x-C$zui.x,C$zut.y=C$zue.y-C$zui.y,C$zut.z=C$zue.z-C$zui.z,C$zut},Vec3.multiply=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x*C$zui.x,C$zut.y=C$zue.y*C$zui.y,C$zut.z=C$zue.z*C$zui.z,C$zut},Vec3.divide=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x/C$zui.x,C$zut.y=C$zue.y/C$zui.y,C$zut.z=C$zue.z/C$zui.z,C$zut},Vec3.ceil=function(C$zut,C$zue){return C$zut.x=Math.ceil(C$zue.x),C$zut.y=Math.ceil(C$zue.y),C$zut.z=Math.ceil(C$zue.z),C$zut},Vec3.floor=function(C$zut,C$zue){return C$zut.x=Math.floor(C$zue.x),C$zut.y=Math.floor(C$zue.y),C$zut.z=Math.floor(C$zue.z),C$zut},Vec3.min=function(C$zut,C$zue,C$zui){return C$zut.x=Math.min(C$zue.x,C$zui.x),C$zut.y=Math.min(C$zue.y,C$zui.y),C$zut.z=Math.min(C$zue.z,C$zui.z),C$zut},Vec3.max=function(C$zut,C$zue,C$zui){return C$zut.x=Math.max(C$zue.x,C$zui.x),C$zut.y=Math.max(C$zue.y,C$zui.y),C$zut.z=Math.max(C$zue.z,C$zui.z),C$zut},Vec3.round=function(C$zut,C$zue){return C$zut.x=Math.round(C$zue.x),C$zut.y=Math.round(C$zue.y),C$zut.z=Math.round(C$zue.z),C$zut},Vec3.multiplyScalar=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x*C$zui,C$zut.y=C$zue.y*C$zui,C$zut.z=C$zue.z*C$zui,C$zut},Vec3.scaleAndAdd=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue.x+C$zui.x*C$zur,C$zut.y=C$zue.y+C$zui.y*C$zur,C$zut.z=C$zue.z+C$zui.z*C$zur,C$zut},Vec3.distance=function(C$zut,C$zue){return C$zuc=C$zue.x-C$zut.x,C$zul=C$zue.y-C$zut.y,C$zuh=C$zue.z-C$zut.z,Math.sqrt(C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh)},Vec3.squaredDistance=function(C$zut,C$zue){return C$zuc=C$zue.x-C$zut.x,C$zul=C$zue.y-C$zut.y,C$zuh=C$zue.z-C$zut.z,C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh},Vec3.len=function(C$zut){return C$zuc=C$zut.x,C$zul=C$zut.y,C$zuh=C$zut.z,Math.sqrt(C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh)},Vec3.lengthSqr=function(C$zut){return C$zuc=C$zut.x,C$zul=C$zut.y,C$zuh=C$zut.z,C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh},Vec3.negate=function(C$zut,C$zue){return C$zut.x=-C$zue.x,C$zut.y=-C$zue.y,C$zut.z=-C$zue.z,C$zut},Vec3.inverse=function(C$zut,C$zue){return C$zut.x=1/C$zue.x,C$zut.y=1/C$zue.y,C$zut.z=1/C$zue.z,C$zut},Vec3.inverseSafe=function(C$zut,C$zue){return C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z,Math.abs(C$zuc)<C$zus.EPSILON?C$zut.x=0:C$zut.x=1/C$zuc,Math.abs(C$zul)<C$zus.EPSILON?C$zut.y=0:C$zut.y=1/C$zul,Math.abs(C$zuh)<C$zus.EPSILON?C$zut.z=0:C$zut.z=1/C$zuh,C$zut},Vec3.normalize=function(C$zut,C$zue){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z;C$zue=C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh;return 0<C$zue&&(C$zue=1/Math.sqrt(C$zue),C$zut.x=C$zuc*C$zue,C$zut.y=C$zul*C$zue,C$zut.z=C$zuh*C$zue),C$zut},Vec3.dot=function(C$zut,C$zue){return C$zut.x*C$zue.x+C$zut.y*C$zue.y+C$zut.z*C$zue.z},Vec3.cross=function(C$zut,C$zue,C$zui){var C$zur=C$zue.x,C$zun=C$zue.y,C$zue=C$zue.z;var C$zua=C$zui.x,C$zuo=C$zui.y,C$zui=C$zui.z;return C$zut.x=C$zun*C$zui-C$zue*C$zuo,C$zut.y=C$zue*C$zua-C$zur*C$zui,C$zut.z=C$zur*C$zuo-C$zun*C$zua,C$zut},Vec3.lerp=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue.x+C$zur*(C$zui.x-C$zue.x),C$zut.y=C$zue.y+C$zur*(C$zui.y-C$zue.y),C$zut.z=C$zue.z+C$zur*(C$zui.z-C$zue.z),C$zut},Vec3.random=function(C$zut,C$zue){C$zue=C$zue||1;var C$zui=2*(0,C$zus.random)()*Math.PI;var C$zur=2*(0,C$zus.random)()-1;var C$zun=Math.sqrt(1-C$zur*C$zur);return C$zut.x=C$zun*Math.cos(C$zui)*C$zue,C$zut.y=C$zun*Math.sin(C$zui)*C$zue,C$zut.z=C$zur*C$zue,C$zut},Vec3.transformMat4=function(C$zut,C$zue,C$zui){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z;C$zue=C$zui.m;C$zui=C$zue[3]*C$zuc+C$zue[7]*C$zul+C$zue[11]*C$zuh+C$zue[15];return C$zut.x=(C$zue[0]*C$zuc+C$zue[4]*C$zul+C$zue[8]*C$zuh+C$zue[12])*(C$zui=C$zui?1/C$zui:1),C$zut.y=(C$zue[1]*C$zuc+C$zue[5]*C$zul+C$zue[9]*C$zuh+C$zue[13])*C$zui,C$zut.z=(C$zue[2]*C$zuc+C$zue[6]*C$zul+C$zue[10]*C$zuh+C$zue[14])*C$zui,C$zut},Vec3.transformMat4Normal=function(C$zut,C$zue,C$zui){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z;C$zue=C$zui.m;C$zui=C$zue[3]*C$zuc+C$zue[7]*C$zul+C$zue[11]*C$zuh;return C$zut.x=(C$zue[0]*C$zuc+C$zue[4]*C$zul+C$zue[8]*C$zuh)*(C$zui=C$zui?1/C$zui:1),C$zut.y=(C$zue[1]*C$zuc+C$zue[5]*C$zul+C$zue[9]*C$zuh)*C$zui,C$zut.z=(C$zue[2]*C$zuc+C$zue[6]*C$zul+C$zue[10]*C$zuh)*C$zui,C$zut},Vec3.transformMat3=function(C$zut,C$zue,C$zui){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z;C$zue=C$zui.m;return C$zut.x=C$zuc*C$zue[0]+C$zul*C$zue[3]+C$zuh*C$zue[6],C$zut.y=C$zuc*C$zue[1]+C$zul*C$zue[4]+C$zuh*C$zue[7],C$zut.z=C$zuc*C$zue[2]+C$zul*C$zue[5]+C$zuh*C$zue[8],C$zut},Vec3.transformAffine=function(C$zut,C$zue,C$zui){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z;C$zue=C$zui.m;return C$zut.x=C$zue[0]*C$zuc+C$zue[1]*C$zul+C$zue[2]*C$zuh+C$zue[3],C$zut.y=C$zue[4]*C$zuc+C$zue[5]*C$zul+C$zue[6]*C$zuh+C$zue[7],C$zut.x=C$zue[8]*C$zuc+C$zue[9]*C$zul+C$zue[10]*C$zuh+C$zue[11],C$zut},Vec3.transformQuat=function(C$zut,C$zue,C$zui){var C$zur=C$zui.w*C$zue.x+C$zui.y*C$zue.z-C$zui.z*C$zue.y;var C$zun=C$zui.w*C$zue.y+C$zui.z*C$zue.x-C$zui.x*C$zue.z;var C$zua=C$zui.w*C$zue.z+C$zui.x*C$zue.y-C$zui.y*C$zue.x;C$zue=-C$zui.x*C$zue.x-C$zui.y*C$zue.y-C$zui.z*C$zue.z;return C$zut.x=C$zur*C$zui.w+C$zue*-C$zui.x+C$zun*-C$zui.z-C$zua*-C$zui.y,C$zut.y=C$zun*C$zui.w+C$zue*-C$zui.y+C$zua*-C$zui.x-C$zur*-C$zui.z,C$zut.z=C$zua*C$zui.w+C$zue*-C$zui.z+C$zur*-C$zui.y-C$zun*-C$zui.x,C$zut},Vec3.transformRTS=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zue.x*C$zun.x;var C$zuo=C$zue.y*C$zun.y;C$zue=C$zue.z*C$zun.z;C$zun=C$zui.w*C$zua+C$zui.y*C$zue-C$zui.z*C$zuo;var C$zus=C$zui.w*C$zuo+C$zui.z*C$zua-C$zui.x*C$zue;var C$zuc=C$zui.w*C$zue+C$zui.x*C$zuo-C$zui.y*C$zua;C$zua=-C$zui.x*C$zua-C$zui.y*C$zuo-C$zui.z*C$zue;return C$zut.x=C$zun*C$zui.w+C$zua*-C$zui.x+C$zus*-C$zui.z-C$zuc*-C$zui.y+C$zur.x,C$zut.y=C$zus*C$zui.w+C$zua*-C$zui.y+C$zuc*-C$zui.x-C$zun*-C$zui.z+C$zur.y,C$zut.z=C$zuc*C$zui.w+C$zua*-C$zui.z+C$zun*-C$zui.y-C$zus*-C$zui.x+C$zur.z,C$zut},Vec3.transformInverseRTS=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zue.x-C$zur.x;var C$zuo=C$zue.y-C$zur.y;C$zue=C$zue.z-C$zur.z;C$zur=C$zui.w*C$zua-C$zui.y*C$zue+C$zui.z*C$zuo;var C$zus=C$zui.w*C$zuo-C$zui.z*C$zua+C$zui.x*C$zue;var C$zuc=C$zui.w*C$zue-C$zui.x*C$zuo+C$zui.y*C$zua;C$zua=C$zui.x*C$zua+C$zui.y*C$zuo+C$zui.z*C$zue;return C$zut.x=(C$zur*C$zui.w+C$zua*C$zui.x+C$zus*C$zui.z-C$zuc*C$zui.y)/C$zun.x,C$zut.y=(C$zus*C$zui.w+C$zua*C$zui.y+C$zuc*C$zui.x-C$zur*C$zui.z)/C$zun.y,C$zut.z=(C$zuc*C$zui.w+C$zua*C$zui.z+C$zur*C$zui.y-C$zus*C$zui.x)/C$zun.z,C$zut},Vec3.rotateX=function(C$zut,C$zue,C$zui,C$zur){C$zuc=C$zue.x-C$zui.x,C$zul=C$zue.y-C$zui.y,C$zuh=C$zue.z-C$zui.z;C$zue=Math.cos(C$zur);C$zur=Math.sin(C$zur);var C$zun=C$zuc;var C$zua=C$zul*C$zue-C$zuh*C$zur;C$zur=C$zul*C$zur+C$zuh*C$zue;return C$zut.x=C$zun+C$zui.x,C$zut.y=C$zua+C$zui.y,C$zut.z=C$zur+C$zui.z,C$zut},Vec3.rotateY=function(C$zut,C$zue,C$zui,C$zur){C$zuc=C$zue.x-C$zui.x,C$zul=C$zue.y-C$zui.y,C$zuh=C$zue.z-C$zui.z;C$zue=Math.cos(C$zur);C$zur=Math.sin(C$zur);var C$zun=C$zuh*C$zur+C$zuc*C$zue;var C$zua=C$zul;C$zue=C$zuh*C$zue-C$zuc*C$zur;return C$zut.x=C$zun+C$zui.x,C$zut.y=C$zua+C$zui.y,C$zut.z=C$zue+C$zui.z,C$zut},Vec3.rotateZ=function(C$zut,C$zue,C$zui,C$zur){C$zuc=C$zue.x-C$zui.x,C$zul=C$zue.y-C$zui.y,C$zuh=C$zue.z-C$zui.z;C$zue=Math.cos(C$zur);C$zur=Math.sin(C$zur);var C$zun=C$zuc*C$zue-C$zul*C$zur;C$zur=C$zuc*C$zur+C$zul*C$zue;C$zue=C$zuh;return C$zut.x=C$zun+C$zui.x,C$zut.y=C$zur+C$zui.y,C$zut.z=C$zue+C$zui.z,C$zut},Vec3.strictEquals=function(C$zut,C$zue){return C$zut.x===C$zue.x&&C$zut.y===C$zue.y&&C$zut.z===C$zue.z},Vec3.equals=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=C$zus.EPSILON);var C$zur=C$zut.x,C$zun=C$zut.y,C$zut=C$zut.z;var C$zua=C$zue.x,C$zuo=C$zue.y,C$zue=C$zue.z;return Math.abs(C$zur-C$zua)<=C$zui*Math.max(1,Math.abs(C$zur),Math.abs(C$zua))&&Math.abs(C$zun-C$zuo)<=C$zui*Math.max(1,Math.abs(C$zun),Math.abs(C$zuo))&&Math.abs(C$zut-C$zue)<=C$zui*Math.max(1,Math.abs(C$zut),Math.abs(C$zue))},Vec3.angle=function(C$zut,C$zue){Vec3.normalize(C$zu_,C$zut),Vec3.normalize(C$zud,C$zue);C$zut=Vec3.dot(C$zu_,C$zud);return 1<C$zut?0:C$zut<-1?Math.PI:Math.acos(C$zut)},Vec3.projectOnPlane=function(C$zut,C$zue,C$zui){return Vec3.subtract(C$zut,C$zue,Vec3.project(C$zut,C$zue,C$zui))},Vec3.project=function(C$zut,C$zue,C$zui){var C$zur=Vec3.lengthSqr(C$zui);return C$zur<1e-6?Vec3.set(C$zut,0,0,0):Vec3.multiplyScalar(C$zut,C$zui,Vec3.dot(C$zue,C$zui)/C$zur)},Vec3.toArray=function(C$zut,C$zue,C$zui){return C$zut[(C$zui=void 0===C$zui?0:C$zui)+0]=C$zue.x,C$zut[C$zui+1]=C$zue.y,C$zut[C$zui+2]=C$zue.z,C$zut},Vec3.fromArray=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue[(C$zui=void 0===C$zui?0:C$zui)+0],C$zut.y=C$zue[C$zui+1],C$zut.z=C$zue[C$zui+2],C$zut},C$zue=Vec3,C$zur=[{key:"ONE",get:function(){return new Vec3(1,1,1)}},{key:"ZERO",get:function(){return new Vec3}},{key:"UP",get:function(){return new Vec3(0,1,0)}},{key:"RIGHT",get:function(){return new Vec3(1,0,0)}},{key:"FORWARD",get:function(){return new Vec3(0,0,1)}}],(C$zui=null)&&_defineProperties(C$zue.prototype,C$zui),C$zur&&_defineProperties(C$zue,C$zur),C$zut.clone=function(){return new Vec3(this.x,this.y,this.z)},C$zut.set=function(C$zut){return this.x=C$zut.x,this.y=C$zut.y,this.z=C$zut.z,this},C$zut.equals=function(C$zut){return C$zut&&this.x===C$zut.x&&this.y===C$zut.y&&this.z===C$zut.z},C$zut.fuzzyEquals=function(C$zut,C$zue){return this.x-C$zue<=C$zut.x&&C$zut.x<=this.x+C$zue&&this.y-C$zue<=C$zut.y&&C$zut.y<=this.y+C$zue&&this.z-C$zue<=C$zut.z&&C$zut.z<=this.z+C$zue},C$zut.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},C$zut.lerp=function(C$zut,C$zue,C$zui){return C$zui=C$zui||new Vec3,Vec3.lerp(C$zui,this,C$zut,C$zue),C$zui},C$zut.clampf=function(C$zut,C$zue){return this.x=C$zua.default.clampf(this.x,C$zut.x,C$zue.x),this.y=C$zua.default.clampf(this.y,C$zut.y,C$zue.y),this.z=C$zua.default.clampf(this.z,C$zut.z,C$zue.z),this},C$zut.addSelf=function(C$zut){return this.x+=C$zut.x,this.y+=C$zut.y,this.z+=C$zut.z,this},C$zut.add=function(C$zut,C$zue){return(C$zue=C$zue||new Vec3).x=this.x+C$zut.x,C$zue.y=this.y+C$zut.y,C$zue.z=this.z+C$zut.z,C$zue},C$zut.subtract=function(C$zut){return this.x-=C$zut.x,this.y-=C$zut.y,this.z-=C$zut.z,this},C$zut.multiplyScalar=function(C$zut){return this.x*=C$zut,this.y*=C$zut,this.z*=C$zut,this},C$zut.multiply=function(C$zut){return this.x*=C$zut.x,this.y*=C$zut.y,this.z*=C$zut.z,this},C$zut.divide=function(C$zut){return this.x/=C$zut,this.y/=C$zut,this.z/=C$zut,this},C$zut.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},C$zut.dot=function(C$zut){return this.x*C$zut.x+this.y*C$zut.y+this.z*C$zut.z},C$zut.cross=function(C$zut,C$zue){return C$zue=C$zue||new Vec3,Vec3.cross(C$zue,this,C$zut),C$zue},C$zut.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},C$zut.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z},C$zut.normalizeSelf=function(){return Vec3.normalize(this,this),this},C$zut.normalize=function(C$zut){return C$zut=C$zut||new Vec3,Vec3.normalize(C$zut,this),C$zut},C$zut.transformMat4=function(C$zut,C$zue){return C$zue=C$zue||new Vec3,Vec3.transformMat4(C$zue,this,C$zut),C$zue},C$zut.maxAxis=function(){return Math.max(this.x,this.y,this.z)},C$zut.signAngle=function(C$zut){cc.warnID(1408,"vec3.signAngle","v2.1","cc.v2(selfVector).signAngle(vector)");var C$zue=new C$zuo.default(this.x,this.y);C$zut=new C$zuo.default(C$zut.x,C$zut.y);return C$zue.signAngle(C$zut)},C$zut.rotate=function(C$zut,C$zue){return cc.warnID(1408,"vec3.rotate","v2.1","cc.v2(selfVector).rotate(radians, out)"),C$zuo.default.prototype.rotate.call(this,C$zut,C$zue)},C$zut.rotateSelf=function(C$zut){return cc.warnID(1408,"vec3.rotateSelf","v2.1","cc.v2(selfVector).rotateSelf(radians)"),C$zuo.default.prototype.rotateSelf.call(this,C$zut)},Vec3}(C$zun.default);(C$zue.default=C$zur).sub=C$zur.subtract,C$zur.mul=C$zur.multiply,C$zur.scale=C$zur.multiplyScalar,C$zur.mag=C$zur.len,C$zur.squaredMagnitude=C$zur.lengthSqr,C$zur.div=C$zur.divide,C$zur.ONE_R=C$zur.ONE,C$zur.ZERO_R=C$zur.ZERO,C$zur.UP_R=C$zur.UP,C$zur.RIGHT_R=C$zur.RIGHT,C$zur.FRONT_R=C$zur.FORWARD;var C$zu_=new C$zur;var C$zud=new C$zur;C$zuu.default.fastDefine("cc.Vec3",C$zur,{x:0,y:0,z:0}),cc.v3=function(C$zut,C$zue,C$zui){return new C$zur(C$zut,C$zue,C$zui)},cc.Vec3=C$zur,C$zui.exports=C$zue.default},{"../platform/CCClass":189,"../utils/misc":264,"./utils":286,"./value-type":287,"./vec2":288}],290:[function(C$zut,C$zui,C$zue){"use strict";C$zue.__esModule=!0,C$zue.v4=v4,C$zue.default=void 0;var C$zur=_interopRequireDefault(C$zut("../platform/CCClass"));var C$zua=_interopRequireDefault(C$zut("./value-type"));var C$zuo=C$zut("./utils");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zuc=0;var C$zul=0;var C$zuh=0;var C$zuu=0;var C$zun=function(C$zua){C$zue=C$zua,(C$zut=Vec4).prototype=Object.create(C$zue.prototype),(C$zut.prototype.constructor=C$zut).__proto__=C$zue;_createSuper(Vec4);var C$zut=Vec4.prototype;var C$zue,C$zui,C$zur;function Vec4(C$zut,C$zue,C$zui,C$zur){var C$zun;return void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),(C$zun=C$zua.call(this)||this).mag=Vec4.prototype.len,C$zun.magSqr=Vec4.prototype.lengthSqr,C$zun.subSelf=Vec4.prototype.subtract,C$zun.mulSelf=Vec4.prototype.multiplyScalar,C$zun.divSelf=Vec4.prototype.divide,C$zun.scaleSelf=Vec4.prototype.multiply,C$zun.negSelf=Vec4.prototype.negate,C$zun.x=void 0,C$zun.y=void 0,C$zun.z=void 0,C$zun.w=void 0,C$zut&&"object"==typeof C$zut?(C$zun.w=C$zut.w,C$zun.z=C$zut.z,C$zun.y=C$zut.y,C$zun.x=C$zut.x):(C$zun.x=C$zut,C$zun.y=C$zue,C$zun.z=C$zui,C$zun.w=C$zur),C$zun}return C$zut.sub=function(C$zut,C$zue){return Vec4.subtract(C$zue||new Vec4,this,C$zut)},C$zut.mul=function(C$zut,C$zue){return Vec4.multiplyScalar(C$zue||new Vec4,this,C$zut)},C$zut.div=function(C$zut,C$zue){return Vec4.multiplyScalar(C$zue||new Vec4,this,1/C$zut)},C$zut.scale=function(C$zut,C$zue){return Vec4.multiply(C$zue||new Vec4,this,C$zut)},C$zut.neg=function(C$zut){return Vec4.negate(C$zut||new Vec4,this)},Vec4.clone=function(C$zut){return new Vec4(C$zut.x,C$zut.y,C$zut.z,C$zut.w)},Vec4.copy=function(C$zut,C$zue){return C$zut.x=C$zue.x,C$zut.y=C$zue.y,C$zut.z=C$zue.z,C$zut.w=C$zue.w,C$zut},Vec4.set=function(C$zut,C$zue,C$zui,C$zur,C$zun){return C$zut.x=C$zue,C$zut.y=C$zui,C$zut.z=C$zur,C$zut.w=C$zun,C$zut},Vec4.add=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x+C$zui.x,C$zut.y=C$zue.y+C$zui.y,C$zut.z=C$zue.z+C$zui.z,C$zut.w=C$zue.w+C$zui.w,C$zut},Vec4.subtract=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x-C$zui.x,C$zut.y=C$zue.y-C$zui.y,C$zut.z=C$zue.z-C$zui.z,C$zut.w=C$zue.w-C$zui.w,C$zut},Vec4.multiply=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x*C$zui.x,C$zut.y=C$zue.y*C$zui.y,C$zut.z=C$zue.z*C$zui.z,C$zut.w=C$zue.w*C$zui.w,C$zut},Vec4.divide=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x/C$zui.x,C$zut.y=C$zue.y/C$zui.y,C$zut.z=C$zue.z/C$zui.z,C$zut.w=C$zue.w/C$zui.w,C$zut},Vec4.ceil=function(C$zut,C$zue){return C$zut.x=Math.ceil(C$zue.x),C$zut.y=Math.ceil(C$zue.y),C$zut.z=Math.ceil(C$zue.z),C$zut.w=Math.ceil(C$zue.w),C$zut},Vec4.floor=function(C$zut,C$zue){return C$zut.x=Math.floor(C$zue.x),C$zut.y=Math.floor(C$zue.y),C$zut.z=Math.floor(C$zue.z),C$zut.w=Math.floor(C$zue.w),C$zut},Vec4.min=function(C$zut,C$zue,C$zui){return C$zut.x=Math.min(C$zue.x,C$zui.x),C$zut.y=Math.min(C$zue.y,C$zui.y),C$zut.z=Math.min(C$zue.z,C$zui.z),C$zut.w=Math.min(C$zue.w,C$zui.w),C$zut},Vec4.max=function(C$zut,C$zue,C$zui){return C$zut.x=Math.max(C$zue.x,C$zui.x),C$zut.y=Math.max(C$zue.y,C$zui.y),C$zut.z=Math.max(C$zue.z,C$zui.z),C$zut.w=Math.max(C$zue.w,C$zui.w),C$zut},Vec4.round=function(C$zut,C$zue){return C$zut.x=Math.round(C$zue.x),C$zut.y=Math.round(C$zue.y),C$zut.z=Math.round(C$zue.z),C$zut.w=Math.round(C$zue.w),C$zut},Vec4.multiplyScalar=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue.x*C$zui,C$zut.y=C$zue.y*C$zui,C$zut.z=C$zue.z*C$zui,C$zut.w=C$zue.w*C$zui,C$zut},Vec4.scaleAndAdd=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue.x+C$zui.x*C$zur,C$zut.y=C$zue.y+C$zui.y*C$zur,C$zut.z=C$zue.z+C$zui.z*C$zur,C$zut.w=C$zue.w+C$zui.w*C$zur,C$zut},Vec4.distance=function(C$zut,C$zue){var C$zui=C$zue.x-C$zut.x;var C$zur=C$zue.y-C$zut.y;var C$zun=C$zue.z-C$zut.z;C$zue=C$zue.w-C$zut.w;return Math.sqrt(C$zui*C$zui+C$zur*C$zur+C$zun*C$zun+C$zue*C$zue)},Vec4.squaredDistance=function(C$zut,C$zue){var C$zui=C$zue.x-C$zut.x;var C$zur=C$zue.y-C$zut.y;var C$zun=C$zue.z-C$zut.z;C$zue=C$zue.w-C$zut.w;return C$zui*C$zui+C$zur*C$zur+C$zun*C$zun+C$zue*C$zue},Vec4.len=function(C$zut){return C$zuc=C$zut.x,C$zul=C$zut.y,C$zuh=C$zut.z,C$zuu=C$zut.w,Math.sqrt(C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh+C$zuu*C$zuu)},Vec4.lengthSqr=function(C$zut){return C$zuc=C$zut.x,C$zul=C$zut.y,C$zuh=C$zut.z,C$zuu=C$zut.w,C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh+C$zuu*C$zuu},Vec4.negate=function(C$zut,C$zue){return C$zut.x=-C$zue.x,C$zut.y=-C$zue.y,C$zut.z=-C$zue.z,C$zut.w=-C$zue.w,C$zut},Vec4.inverse=function(C$zut,C$zue){return C$zut.x=1/C$zue.x,C$zut.y=1/C$zue.y,C$zut.z=1/C$zue.z,C$zut.w=1/C$zue.w,C$zut},Vec4.inverseSafe=function(C$zut,C$zue){return C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z,C$zuu=C$zue.w,Math.abs(C$zuc)<C$zuo.EPSILON?C$zut.x=0:C$zut.x=1/C$zuc,Math.abs(C$zul)<C$zuo.EPSILON?C$zut.y=0:C$zut.y=1/C$zul,Math.abs(C$zuh)<C$zuo.EPSILON?C$zut.z=0:C$zut.z=1/C$zuh,Math.abs(C$zuu)<C$zuo.EPSILON?C$zut.w=0:C$zut.w=1/C$zuu,C$zut},Vec4.normalize=function(C$zut,C$zue){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z,C$zuu=C$zue.w;C$zue=C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh+C$zuu*C$zuu;return 0<C$zue&&(C$zue=1/Math.sqrt(C$zue),C$zut.x=C$zuc*C$zue,C$zut.y=C$zul*C$zue,C$zut.z=C$zuh*C$zue,C$zut.w=C$zuu*C$zue),C$zut},Vec4.dot=function(C$zut,C$zue){return C$zut.x*C$zue.x+C$zut.y*C$zue.y+C$zut.z*C$zue.z+C$zut.w*C$zue.w},Vec4.lerp=function(C$zut,C$zue,C$zui,C$zur){return C$zut.x=C$zue.x+C$zur*(C$zui.x-C$zue.x),C$zut.y=C$zue.y+C$zur*(C$zui.y-C$zue.y),C$zut.z=C$zue.z+C$zur*(C$zui.z-C$zue.z),C$zut.w=C$zue.w+C$zur*(C$zui.w-C$zue.w),C$zut},Vec4.random=function(C$zut,C$zue){C$zue=C$zue||1;var C$zui=2*(0,C$zuo.random)()*Math.PI;var C$zur=2*(0,C$zuo.random)()-1;var C$zun=Math.sqrt(1-C$zur*C$zur);return C$zut.x=C$zun*Math.cos(C$zui)*C$zue,C$zut.y=C$zun*Math.sin(C$zui)*C$zue,C$zut.z=C$zur*C$zue,C$zut.w=0,C$zut},Vec4.transformMat4=function(C$zut,C$zue,C$zui){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z,C$zuu=C$zue.w;C$zue=C$zui.m;return C$zut.x=C$zue[0]*C$zuc+C$zue[4]*C$zul+C$zue[8]*C$zuh+C$zue[12]*C$zuu,C$zut.y=C$zue[1]*C$zuc+C$zue[5]*C$zul+C$zue[9]*C$zuh+C$zue[13]*C$zuu,C$zut.z=C$zue[2]*C$zuc+C$zue[6]*C$zul+C$zue[10]*C$zuh+C$zue[14]*C$zuu,C$zut.w=C$zue[3]*C$zuc+C$zue[7]*C$zul+C$zue[11]*C$zuh+C$zue[15]*C$zuu,C$zut},Vec4.transformAffine=function(C$zut,C$zue,C$zui){C$zuc=C$zue.x,C$zul=C$zue.y,C$zuh=C$zue.z,C$zuu=C$zue.w;C$zui=C$zui.m;return C$zut.x=C$zui[0]*C$zuc+C$zui[1]*C$zul+C$zui[2]*C$zuh+C$zui[3]*C$zuu,C$zut.y=C$zui[4]*C$zuc+C$zui[5]*C$zul+C$zui[6]*C$zuh+C$zui[7]*C$zuu,C$zut.x=C$zui[8]*C$zuc+C$zui[9]*C$zul+C$zui[10]*C$zuh+C$zui[11]*C$zuu,C$zut.w=C$zue.w,C$zut},Vec4.transformQuat=function(C$zut,C$zue,C$zui){var C$zur=C$zue.x,C$zun=C$zue.y,C$zua=C$zue.z;C$zuc=C$zui.x,C$zul=C$zui.y,C$zuh=C$zui.z;C$zui=(C$zuu=C$zui.w)*C$zur+C$zul*C$zua-C$zuh*C$zun;var C$zuo=C$zuu*C$zun+C$zuh*C$zur-C$zuc*C$zua;var C$zus=C$zuu*C$zua+C$zuc*C$zun-C$zul*C$zur;C$zur=-C$zuc*C$zur-C$zul*C$zun-C$zuh*C$zua;return C$zut.x=C$zui*C$zuu+C$zur*-C$zuc+C$zuo*-C$zuh-C$zus*-C$zul,C$zut.y=C$zuo*C$zuu+C$zur*-C$zul+C$zus*-C$zuc-C$zui*-C$zuh,C$zut.z=C$zus*C$zuu+C$zur*-C$zuh+C$zui*-C$zul-C$zuo*-C$zuc,C$zut.w=C$zue.w,C$zut},Vec4.strictEquals=function(C$zut,C$zue){return C$zut.x===C$zue.x&&C$zut.y===C$zue.y&&C$zut.z===C$zue.z&&C$zut.w===C$zue.w},Vec4.equals=function(C$zut,C$zue,C$zui){return void 0===C$zui&&(C$zui=C$zuo.EPSILON),Math.abs(C$zut.x-C$zue.x)<=C$zui*Math.max(1,Math.abs(C$zut.x),Math.abs(C$zue.x))&&Math.abs(C$zut.y-C$zue.y)<=C$zui*Math.max(1,Math.abs(C$zut.y),Math.abs(C$zue.y))&&Math.abs(C$zut.z-C$zue.z)<=C$zui*Math.max(1,Math.abs(C$zut.z),Math.abs(C$zue.z))&&Math.abs(C$zut.w-C$zue.w)<=C$zui*Math.max(1,Math.abs(C$zut.w),Math.abs(C$zue.w))},Vec4.toArray=function(C$zut,C$zue,C$zui){return C$zut[(C$zui=void 0===C$zui?0:C$zui)+0]=C$zue.x,C$zut[C$zui+1]=C$zue.y,C$zut[C$zui+2]=C$zue.z,C$zut[C$zui+3]=C$zue.w,C$zut},Vec4.fromArray=function(C$zut,C$zue,C$zui){return C$zut.x=C$zue[(C$zui=void 0===C$zui?0:C$zui)+0],C$zut.y=C$zue[C$zui+1],C$zut.z=C$zue[C$zui+2],C$zut.w=C$zue[C$zui+3],C$zut},C$zue=Vec4,C$zur=[{key:"ZERO",get:function(){return new Vec4(0,0,0,0)}},{key:"ONE",get:function(){return new Vec4(1,1,1,1)}},{key:"NEG_ONE",get:function(){return new Vec4(-1,-1,-1,-1)}}],(C$zui=null)&&_defineProperties(C$zue.prototype,C$zui),C$zur&&_defineProperties(C$zue,C$zur),C$zut.clone=function(){return new Vec4(this.x,this.y,this.z,this.w)},C$zut.set=function(C$zut,C$zue,C$zui,C$zur){return C$zut&&"object"==typeof C$zut?(this.x=C$zut.x,this.y=C$zut.y,this.z=C$zut.z,this.w=C$zut.w):(this.x=C$zut||0,this.y=C$zue||0,this.z=C$zui||0,this.w=C$zur||0),this},C$zut.equals=function(C$zut,C$zue){return void 0===C$zue&&(C$zue=C$zuo.EPSILON),Math.abs(this.x-C$zut.x)<=C$zue*Math.max(1,Math.abs(this.x),Math.abs(C$zut.x))&&Math.abs(this.y-C$zut.y)<=C$zue*Math.max(1,Math.abs(this.y),Math.abs(C$zut.y))&&Math.abs(this.z-C$zut.z)<=C$zue*Math.max(1,Math.abs(this.z),Math.abs(C$zut.z))&&Math.abs(this.w-C$zut.w)<=C$zue*Math.max(1,Math.abs(this.w),Math.abs(C$zut.w))},C$zut.equals4f=function(C$zut,C$zue,C$zui,C$zur,C$zun){return void 0===C$zun&&(C$zun=C$zuo.EPSILON),Math.abs(this.x-C$zut)<=C$zun*Math.max(1,Math.abs(this.x),Math.abs(C$zut))&&Math.abs(this.y-C$zue)<=C$zun*Math.max(1,Math.abs(this.y),Math.abs(C$zue))&&Math.abs(this.z-C$zui)<=C$zun*Math.max(1,Math.abs(this.z),Math.abs(C$zui))&&Math.abs(this.w-C$zur)<=C$zun*Math.max(1,Math.abs(this.w),Math.abs(C$zur))},C$zut.strictEquals=function(C$zut){return this.x===C$zut.x&&this.y===C$zut.y&&this.z===C$zut.z&&this.w===C$zut.w},C$zut.strictEquals4f=function(C$zut,C$zue,C$zui,C$zur){return this.x===C$zut&&this.y===C$zue&&this.z===C$zui&&this.w===C$zur},C$zut.lerp=function(C$zut,C$zue){return C$zuc=this.x,C$zul=this.y,C$zuh=this.z,C$zuu=this.w,this.x=C$zuc+C$zue*(C$zut.x-C$zuc),this.y=C$zul+C$zue*(C$zut.y-C$zul),this.z=C$zuh+C$zue*(C$zut.z-C$zuh),this.w=C$zuu+C$zue*(C$zut.w-C$zuu),this},C$zut.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+", "+this.w.toFixed(2)+")"},C$zut.clampf=function(C$zut,C$zue){return this.x=(0,C$zuo.clamp)(this.x,C$zut.x,C$zue.x),this.y=(0,C$zuo.clamp)(this.y,C$zut.y,C$zue.y),this.z=(0,C$zuo.clamp)(this.z,C$zut.z,C$zue.z),this.w=(0,C$zuo.clamp)(this.w,C$zut.w,C$zue.w),this},C$zut.addSelf=function(C$zut){return this.x+=C$zut.x,this.y+=C$zut.y,this.z+=C$zut.z,this.w+=C$zut.w,this},C$zut.add=function(C$zut,C$zue){return(C$zue=C$zue||new Vec4).x=this.x+C$zut.x,C$zue.y=this.y+C$zut.y,C$zue.z=this.z+C$zut.z,C$zue.w=this.w+C$zut.w,C$zue},C$zut.subtract=function(C$zut,C$zue){return(C$zue=C$zue||new Vec4).x=this.x-C$zut.x,C$zue.y=this.y-C$zut.y,C$zue.z=this.z-C$zut.z,C$zue.w=this.w-C$zut.w,C$zue},C$zut.multiplyScalar=function(C$zut){return this.x*=C$zut,this.y*=C$zut,this.z*=C$zut,this.w*=C$zut,this},C$zut.multiply=function(C$zut){return this.x*=C$zut.x,this.y*=C$zut.y,this.z*=C$zut.z,this.w*=C$zut.w,this},C$zut.divide=function(C$zut){return this.x/=C$zut,this.y/=C$zut,this.z/=C$zut,this.w/=C$zut,this},C$zut.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},C$zut.dot=function(C$zut){return this.x*C$zut.x+this.y*C$zut.y+this.z*C$zut.z+this.w*C$zut.w},C$zut.cross=function(C$zut,C$zue){C$zue=C$zue||new Vec4;var C$zui=this.x,C$zur=this.y,C$zun=this.z;var C$zua=C$zut.x,C$zuo=C$zut.y,C$zut=C$zut.z;return C$zue.x=C$zur*C$zut-C$zun*C$zuo,C$zue.y=C$zun*C$zua-C$zui*C$zut,C$zue.z=C$zui*C$zuo-C$zur*C$zua,C$zue},C$zut.len=function(){var C$zut=this.x,C$zue=this.y,C$zui=this.z,C$zur=this.w;return Math.sqrt(C$zut*C$zut+C$zue*C$zue+C$zui*C$zui+C$zur*C$zur)},C$zut.lengthSqr=function(){var C$zut=this.x,C$zue=this.y,C$zui=this.z,C$zur=this.w;return C$zut*C$zut+C$zue*C$zue+C$zui*C$zui+C$zur*C$zur},C$zut.normalizeSelf=function(){return this.normalize(this),this},C$zut.normalize=function(C$zut){C$zut=C$zut||new Vec4,C$zuc=this.x,C$zul=this.y,C$zuh=this.z,C$zuu=this.w;var C$zue=C$zuc*C$zuc+C$zul*C$zul+C$zuh*C$zuh+C$zuu*C$zuu;return 0<C$zue&&(C$zue=1/Math.sqrt(C$zue),C$zut.x=C$zuc*C$zue,C$zut.y=C$zul*C$zue,C$zut.z=C$zuh*C$zue,C$zut.w=C$zuu*C$zue),C$zut},C$zut.transformMat4=function(C$zut,C$zue){C$zue=C$zue||new Vec4,C$zuc=this.x,C$zul=this.y,C$zuh=this.z,C$zuu=this.w;C$zut=C$zut.m;return C$zue.x=C$zut[0]*C$zuc+C$zut[4]*C$zul+C$zut[8]*C$zuh+C$zut[12]*C$zuu,C$zue.y=C$zut[1]*C$zuc+C$zut[5]*C$zul+C$zut[9]*C$zuh+C$zut[13]*C$zuu,C$zue.z=C$zut[2]*C$zuc+C$zut[6]*C$zul+C$zut[10]*C$zuh+C$zut[14]*C$zuu,C$zue.w=C$zut[3]*C$zuc+C$zut[7]*C$zul+C$zut[11]*C$zuh+C$zut[15]*C$zuu,C$zue},C$zut.maxAxis=function(){return Math.max(this.x,this.y,this.z,this.w)},Vec4}(C$zua.default);function v4(C$zut,C$zue,C$zui,C$zur){return new C$zun(C$zut,C$zue,C$zui,C$zur)}(C$zue.default=C$zun).sub=C$zun.subtract,C$zun.mul=C$zun.multiply,C$zun.div=C$zun.divide,C$zun.scale=C$zun.multiplyScalar,C$zun.mag=C$zun.len,C$zun.squaredMagnitude=C$zun.lengthSqr,C$zun.ZERO_R=C$zun.ZERO,C$zun.ONE_R=C$zun.ONE,C$zun.NEG_ONE_R=C$zun.NEG_ONE,C$zur.default.fastDefine("cc.Vec4",C$zun,{x:0,y:0,z:0,w:0}),cc.v4=v4,cc.Vec4=C$zun},{"../platform/CCClass":189,"./utils":286,"./value-type":287}],291:[function(C$zut,C$zue,C$zun){"use strict";var C$zus=cc.js;function C$zulP1(C$zue,C$zut,C$zui){C$zue&&(C$zui=C$zui||C$zus.getClassName(C$zue),C$zut.forEach(function(C$zut){function error(){cc.errorID(1406,C$zui,C$zut)}C$zus.getset(C$zue.prototype,C$zut,error,error)}))}function C$zuEP1(C$zue,C$zut,C$zui){C$zue&&C$zut.forEach(function(C$zut){C$zus.getset(C$zue,C$zut,function(){cc.errorID(1406,C$zui,C$zut)})})}function C$zuOP1(C$zui,C$zut,C$zue){if(C$zui){var C$zur="Sorry, "+(C$zue||cc.js.getClassName(C$zui))+".%s is removed, please use %s instead.";for(var C$zun in C$zut){var C$zua;var C$zuo;!function(){function define(C$zue,C$zut){function accessor(C$zut){cc.error(C$zur,C$zue,C$zut)}Array.isArray(C$zut)||(C$zut=C$zut.split(",").map(function(C$zut){return C$zut.trim()}));try{C$zus.getset(C$zui,C$zue,accessor.bind(null,C$zut[0]),C$zut[1]&&accessor.bind(null,C$zut[1]))}catch(C$zut){}}C$zua=C$zut[C$zun],"*"===C$zun[0]?(define("g"+(C$zuo=C$zun.slice(1)),C$zua),define("s"+C$zuo,C$zua)):C$zun.split(",").map(function(C$zut){return C$zut.trim()}).forEach(function(C$zut){define(C$zut,C$zua)})}()}}}function C$zuUP1(C$zui,C$zur,C$zun){if(C$zui)for(var C$zua in C$zun=C$zun||C$zus.getClassName(C$zui),C$zur)!function(){var C$zut=C$zua;var C$zue=C$zui[C$zut];C$zue&&(C$zui[C$zut]=function(){return cc.warn("Sorry, %s.%s is deprecated. Please use %s instead",C$zun,C$zut,C$zur[C$zut]),C$zue.apply(this,arguments)})}()}C$zus.get(cc,"info",function(){return cc.errorID(1400,"cc.info","cc.log"),cc.log}),C$zus.get(cc,"spriteFrameCache",function(){cc.errorID(1404)}),C$zus.get(cc,"vmath",function(){return cc.warnID(1400,"cc.vmath","cc.math"),cc.math}),C$zus.get(cc.math,"vec2",function(){return cc.warnID(1400,"cc.vmath.vec2","cc.Vec2"),cc.Vec2}),C$zus.get(cc.math,"vec3",function(){return cc.warnID(1400,"cc.vmath.vec3","cc.Vec3"),cc.Vec3}),C$zus.get(cc.math,"vec4",function(){return cc.warnID(1400,"cc.vmath.vec4","cc.Vec4"),cc.Vec4}),C$zus.get(cc.math,"mat4",function(){return cc.warnID(1400,"cc.vmath.mat4","cc.Mat4"),cc.Mat4}),C$zus.get(cc.math,"mat3",function(){return cc.warnID(1400,"cc.vmath.mat3","cc.Mat3"),cc.Mat3}),C$zus.get(cc.math,"quat",function(){return cc.warnID(1400,"cc.vmath.quat","cc.Quat"),cc.Quat}),C$zus.get(cc.SpriteFrame.prototype,"_textureLoaded",function(){return cc.errorID(1400,"spriteFrame._textureLoaded","spriteFrame.textureLoaded()"),this.textureLoaded()}),C$zulP1(cc.SpriteFrame,["addLoadedEventListener"]),C$zuUP1(cc.Sprite.prototype,{setState:"cc.Sprite.setMaterial",getState:"cc.Sprite.getMaterial"},"cc.Sprite"),C$zus.get(cc.SpriteFrame.prototype,"clearTexture",function(){return cc.errorID(1406,"cc.SpriteFrame","clearTexture"),function(){}}),C$zus.get(cc,"textureCache",function(){cc.errorID(1406,"cc","textureCache")});var C$zui=cc.Texture2D;C$zus.get(C$zui.prototype,"releaseTexture",function(){return cc.errorID(1400,"texture.releaseTexture()","texture.destroy()"),this.destroy}),C$zus.get(C$zui.prototype,"getName",function(){return cc.errorID(1400,"texture.getName()","texture._glID"),function(){return this._glID||null}}),C$zus.get(C$zui.prototype,"isLoaded",function(){return cc.errorID(1400,"texture.isLoaded function","texture.loaded property"),function(){return this.loaded}}),C$zus.get(C$zui.prototype,"setAntiAliasTexParameters",function(){return cc.errorID(1400,"texture.setAntiAliasTexParameters()","texture.setFilters(cc.Texture2D.Filter.LINEAR, cc.Texture2D.Filter.LINEAR)"),function(){this.setFilters(C$zui.Filter.LINEAR,C$zui.Filter.LINEAR)}}),C$zus.get(C$zui.prototype,"setAliasTexParameters",function(){return cc.errorID(1400,"texture.setAntiAliasTexParameters()","texture.setFilters(cc.Texture2D.Filter.NEAREST, cc.Texture2D.Filter.NEAREST)"),function(){this.setFilters(C$zui.Filter.NEAREST,C$zui.Filter.NEAREST)}}),C$zuEP1(cc.macro,["ENABLE_GL_STATE_CACHE","FIX_ARTIFACTS_BY_STRECHING_TEXEL"],"cc.macro"),C$zuOP1(cc.macro,{PI:"Math.PI",PI2:"Math.PI * 2",FLT_MAX:"Number.MAX_VALUE",FLT_MIN:"Number.MIN_VALUE",UINT_MAX:"Number.MAX_SAFE_INTEGER"},"cc.macro"),C$zuEP1(cc.game,["CONFIG_KEY"],"cc.game"),C$zuEP1(cc.sys,["dumpRoot","cleanScript"],"cc.sys"),C$zuOP1(cc.Director,{EVENT_PROJECTION_CHANGED:"",EVENT_BEFORE_VISIT:"EVENT_AFTER_UPDATE",EVENT_AFTER_VISIT:"EVENT_BEFORE_DRAW"},"cc.Director"),C$zuUP1(cc.Director.prototype,{convertToGL:"cc.view.convertToLocationInView",convertToUI:"",getWinSize:"cc.winSize",getWinSizeInPixels:"cc.winSize",getVisibleSize:"cc.view.getVisibleSize",getVisibleOrigin:"cc.view.getVisibleOrigin",purgeCachedData:"cc.loader.releaseAll",setDepthTest:"cc.Camera.main.depth",setClearColor:"cc.Camera.main.backgroundColor",getRunningScene:"cc.director.getScene",getAnimationInterval:"cc.game.getFrameRate",setAnimationInterval:"cc.game.setFrameRate",isDisplayStats:"cc.debug.isDisplayStats",setDisplayStats:"cc.debug.setDisplayStats",stopAnimation:"cc.game.pause",startAnimation:"cc.game.resume"},"cc.Director"),C$zulP1(cc.Director,["pushScene","popScene","popToRootScene","popToSceneStackLevel","setProjection","getProjection"],"cc.Director"),C$zuOP1(cc.Scheduler,{scheduleCallbackForTarget:"schedule",scheduleUpdateForTarget:"scheduleUpdate",unscheduleCallbackForTarget:"unschedule",unscheduleUpdateForTarget:"unscheduleUpdate",unscheduleAllCallbacksForTarget:"unscheduleAllForTarget",unscheduleAllCallbacks:"unscheduleAll",unscheduleAllCallbacksWithMinPriority:"unscheduleAllWithMinPriority"},"cc.Scheduler"),C$zuOP1(cc.view,{adjustViewPort:"adjustViewportMeta",setViewPortInPoints:"setViewportInPoints",getViewPortRect:"getViewportRect"},"cc.view"),C$zuEP1(cc.view,["isViewReady","setTargetDensityDPI","getTargetDensityDPI","setFrameZoomFactor","canSetContentScaleFactor","setContentTranslateLeftTop","getContentTranslateLeftTop","setViewName","getViewName"],"cc.view"),C$zulP1(cc.Pipeline,["flowInDeps","getItems"],"cc.loader"),C$zulP1(cc.PhysicsManager,["attachDebugDrawToCamera","detachDebugDrawFromCamera"]),C$zulP1(cc.CollisionManager,["attachDebugDrawToCamera","detachDebugDrawFromCamera"]),C$zuOP1(cc._BaseNode.prototype,{tag:"name",getTag:"name",setTag:"name",getChildByTag:"getChildByName",removeChildByTag:"getChildByName(name).destroy()"}),C$zulP1(cc.Node,["_cascadeColorEnabled","cascadeColor","isCascadeColorEnabled","setCascadeColorEnabled","_cascadeOpacityEnabled","cascadeOpacity","isCascadeOpacityEnabled","setCascadeOpacityEnabled","opacityModifyRGB","isOpacityModifyRGB","setOpacityModifyRGB","ignoreAnchor","isIgnoreAnchorPointForPosition","ignoreAnchorPointForPosition","isRunning","_sgNode"]),C$zuUP1(cc.Node.prototype,{getNodeToParentTransform:"getLocalMatrix",getNodeToParentTransformAR:"getLocalMatrix",getNodeToWorldTransform:"getWorldMatrix",getNodeToWorldTransformAR:"getWorldMatrix",getParentToNodeTransform:"getLocalMatrix",getWorldToNodeTransform:"getWorldMatrix",convertTouchToNodeSpace:"convertToNodeSpaceAR",convertTouchToNodeSpaceAR:"convertToNodeSpaceAR",convertToWorldSpace:"convertToWorldSpaceAR",convertToNodeSpace:"convertToNodeSpaceAR"}),C$zuOP1(cc.Node.prototype,{getRotationX:"rotationX",setRotationX:"rotationX",getRotationY:"rotationY",setRotationY:"rotationY",getPositionX:"x",setPositionX:"x",getPositionY:"y",setPositionY:"y",getSkewX:"skewX",setSkewX:"skewX",getSkewY:"skewY",setSkewY:"skewY",getScaleX:"scaleX",setScaleX:"scaleX",getScaleY:"scaleY",setScaleY:"scaleY",getOpacity:"opacity",setOpacity:"opacity",getColor:"color",setColor:"color",getLocalZOrder:"zIndex",setLocalZOrder:"zIndex"}),C$zuOP1(cc.Sprite.prototype,{setInsetLeft:"cc.SpriteFrame insetLeft",setInsetRight:"cc.SpriteFrame insetRight",setInsetTop:"cc.SpriteFrame insetTop",setInsetBottom:"cc.SpriteFrame insetBottom"}),cc.Material.getInstantiatedBuiltinMaterial=cc.MaterialVariant.createWithBuiltin,cc.Material.getInstantiatedMaterial=cc.MaterialVariant.create,C$zuUP1(cc.Material,{getInstantiatedBuiltinMaterial:"cc.MaterialVariant.createWithBuiltin",getInstantiatedMaterial:"cc.MaterialVariant.create"}),cc.js.getset(cc.RenderComponent.prototype,"sharedMaterials",function(){return cc.warnID(1400,"sharedMaterials","getMaterials"),this.materials},function(C$zut){cc.warnID(1400,"sharedMaterials","setMaterial"),this.materials=C$zut}),C$zuUP1(cc.Camera.prototype,{getNodeToCameraTransform:"getWorldToScreenMatrix2D",getCameraToWorldPoint:"getScreenToWorldPoint",getWorldToCameraPoint:"getWorldToScreenPoint",getCameraToWorldMatrix:"getScreenToWorldMatrix2D",getWorldToCameraMatrix:"getWorldToScreenMatrix2D"}),C$zulP1(cc.Camera,["addTarget","removeTarget","getTargets"]);var C$zur='"%s" is not defined in the Scene, it is only defined in normal nodes.';Object.defineProperties(cc.Scene.prototype,{active:{get:function(){return cc.error(C$zur,"active"),!0},set:function(){cc.error(C$zur,"active")}},activeInHierarchy:{get:function(){return cc.error(C$zur,"activeInHierarchy"),!0}},getComponent:{get:function(){return cc.error(C$zur,"getComponent"),function(){return null}}},addComponent:{get:function(){return cc.error(C$zur,"addComponent"),function(){return null}}}}),C$zuEP1(cc.dynamicAtlasManager,["minFrameSize"],"cc.dynamicAtlasManager"),cc.Light&&C$zuEP1(cc.Light.prototype,["shadowDepthScale"],"cc.Light.prototype"),C$zuOP1(cc,{affineTransformMake:"cc.AffineTransform.create",affineTransformMakeIdentity:"cc.AffineTransform.identity",affineTransformClone:"cc.AffineTransform.clone",affineTransformConcat:"cc.AffineTransform.concat",affineTransformConcatIn:"cc.AffineTransform.concat",affineTransformInvert:"cc.AffineTransform.invert",affineTransformInvertIn:"cc.AffineTransform.invert",affineTransformInvertOut:"cc.AffineTransform.invert",affineTransformEqualToTransform:"cc.AffineTransform.equal",pointApplyAffineTransform:"cc.AffineTransform.transformVec2",sizeApplyAffineTransform:"cc.AffineTransform.transformSize",rectApplyAffineTransform:"cc.AffineTransform.transformRect",obbApplyAffineTransform:"cc.AffineTransform.transformObb",pointEqualToPoint:"cc.Vec2 equals",sizeEqualToSize:"cc.Size equals",rectEqualToRect:"rectA.equals(rectB)",rectContainsRect:"rectA.containsRect(rectB)",rectContainsPoint:"rect.contains(vec2)",rectOverlapsRect:"rectA.intersects(rectB)",rectIntersectsRect:"rectA.intersects(rectB)",rectIntersection:"rectA.intersection(intersection, rectB)",rectUnion:"rectA.union(union, rectB)",rectGetMaxX:"rect.xMax",rectGetMidX:"rect.center.x",rectGetMinX:"rect.xMin",rectGetMaxY:"rect.yMax",rectGetMidY:"rect.center.y",rectGetMinY:"rect.yMin",colorEqual:"colorA.equals(colorB)",hexToColor:"color.fromHEX(hexColor)",colorToHex:"color.toHEX()",TextAlignment:"cc.macro.TextAlignment",VerticalTextAlignment:"cc.macro.VerticalTextAlignment",pNeg:"p.neg()",pAdd:"p1.add(p2)",pSub:"p1.sub(p2)",pMult:"p.mul(factor)",pMidpoint:"p1.add(p2).mul(0.5)",pDot:"p1.dot(p2)",pCross:"p1.cross(p2)",pPerp:"p.rotate(-90 * Math.PI / 180)",pRPerp:"p.rotate(90 * Math.PI / 180)",pProject:"p1.project(p2)",pLengthSQ:"p.magSqr()",pDistanceSQ:"p1.sub(p2).magSqr()",pLength:"p.mag()",pDistance:"p1.sub(p2).mag()",pNormalize:"p.normalize()",pForAngle:"cc.v2(Math.cos(a), Math.sin(a))",pToAngle:"Math.atan2(v.y, v.x)",pZeroIn:"p.x = p.y = 0",pIn:"p1.set(p2)",pMultIn:"p.mulSelf(factor)",pSubIn:"p1.subSelf(p2)",pAddIn:"p1.addSelf(p2)",pNormalizeIn:"p.normalizeSelf()",pSameAs:"p1.equals(p2)",pAngle:"v1.angle(v2)",pAngleSigned:"v1.signAngle(v2)",pRotateByAngle:"p.rotate(radians)",pCompMult:"v1.dot(v2)",pFuzzyEqual:"v1.fuzzyEquals(v2, tolerance)",pLerp:"p.lerp(endPoint, ratio)",pClamp:"p.clampf(min_inclusive, max_inclusive)",rand:"Math.random() * 0xffffff",randomMinus1To1:"(Math.random() - 0.5) * 2",container:"cc.game.container",_canvas:"cc.game.canvas",_renderType:"cc.game.renderType",_getError:"cc.debug.getError",_initDebugSetting:"cc.debug._resetDebugSetting",DebugMode:"cc.debug.DebugMode"},"cc"),C$zuEP1(cc,["blendFuncDisable","pFromSize","pCompOp","pIntersectPoint","pSegmentIntersect","pLineIntersect","obbApplyMatrix","getImageFormatByData","initEngine"],"cc"),C$zuUP1(cc,{p:"cc.v2"},"cc"),C$zuOP1(cc.Rect,{contain:"rectA.contains(rectB)",transformMat4:"rect.transformMat4(out, mat4)"}),C$zuOP1(cc.Color,{rgb2hsv:"color.toHSV()",hsv2rgb:"color.fromHSV(h, s, v)"}),C$zus.get(cc,"lerp",function(){return cc.errorID(1400,"cc.lerp","cc.misc.lerp"),cc.misc.lerp}),C$zus.get(cc,"random0To1",function(){return cc.errorID(1400,"cc.random0To1","Math.random"),Math.random}),C$zus.get(cc,"degreesToRadians",function(){return cc.errorID(1400,"cc.degreesToRadians","cc.misc.degreesToRadians"),cc.misc.degreesToRadians}),C$zus.get(cc,"radiansToDegrees",function(){return cc.errorID(1400,"cc.radiansToDegrees","cc.misc.radiansToDegrees"),cc.misc.radiansToDegrees}),C$zus.get(cc,"clampf",function(){return cc.errorID(1400,"cc.clampf","cc.misc.clampf"),cc.misc.clampf}),C$zus.get(cc,"clamp01",function(){return cc.errorID(1400,"cc.clamp01","cc.misc.clamp01"),cc.misc.clamp01}),C$zus.get(cc,"ImageFormat",function(){return cc.errorID(1400,"cc.ImageFormat","cc.macro.ImageFormat"),cc.macro.ImageFormat}),C$zus.get(cc,"KEY",function(){return cc.errorID(1400,"cc.KEY","cc.macro.KEY"),cc.macro.KEY}),C$zus.get(cc,"Easing",function(){return cc.errorID(1400,"cc.Easing","cc.easing"),cc.easing}),C$zus.get(cc,"isChildClassOf",function(){return cc.errorID(1400,"cc.isChildClassOf","cc.js.isChildClassOf"),cc.js.isChildClassOf}),"undefined"!=typeof dragonBones&&C$zus.get(dragonBones.CCFactory,"getFactory",function(){return cc.errorID(1400,"dragonBones.CCFactory.getFactory","dragonBones.CCFactory.getInstance"),dragonBones.CCFactory.getInstance}),cc.renderer.renderEngine={get gfx(){return cc.warnID(1400,"cc.renderer.renderEngine.gfx","cc.gfx"),cc.gfx},get math(){return cc.warnID(1400,"cc.renderer.renderEngine.math","cc.math"),cc.vmath},get InputAssembler(){return cc.warnID(1400,"cc.renderer.renderEngine.InputAssembler","cc.renderer.InputAssembler"),cc.renderer.InputAssembler}}},{}],292:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./core/CCGame"),C$zut("./actions")},{"./actions":8,"./core/CCGame":29}],293:[function(C$zut,C$zue,C$zui){"use strict";var C$zux=C$zut("../compression/zlib.min");var C$zuA=C$zut("../core/CCDebug");function C$zuJt1(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zuh,C$zua,C$zuo,C$zus,C$zuc,C$zul;for(this.data=C$zut,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C$zur=null;;){switch(C$zue=this.readUInt32(),C$zuh=function(){var C$zut,C$zue;for(C$zue=[],C$zut=0;C$zut<4;++C$zut)C$zue.push(String.fromCharCode(this.data[this.pos++]));return C$zue}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(C$zue);break;case"fcTL":C$zur&&this.animation.frames.push(C$zur),this.pos+=4,C$zur={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},C$zuo=this.readUInt16(),C$zun=this.readUInt16()||100,C$zur.delay=1e3*C$zuo/C$zun,C$zur.disposeOp=this.data[this.pos++],C$zur.blendOp=this.data[this.pos++],C$zur.data=[];break;case"IDAT":case"fdAT":for("fdAT"===C$zuh&&(this.pos+=4,C$zue-=4),C$zut=(null!=C$zur?C$zur.data:void 0)||this.imgData,C$zus=0;0<=C$zue?C$zus<C$zue:C$zue<C$zus;0<=C$zue?++C$zus:--C$zus)C$zut.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(C$zue),0<(C$zua=255-this.transparency.indexed.length))for(C$zuc=0;0<=C$zua?C$zuc<C$zua:C$zua<C$zuc;0<=C$zua?++C$zuc:--C$zuc)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(C$zue)[0];break;case 2:this.transparency.rgb=this.read(C$zue)}break;case"tEXt":C$zun=(C$zuo=this.read(C$zue)).indexOf(0),C$zul=String.fromCharCode.apply(String,C$zuo.slice(0,C$zun)),this.text[C$zul]=String.fromCharCode.apply(String,C$zuo.slice(C$zun+1));break;case"IEND":return C$zur&&this.animation.frames.push(C$zur),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(C$zul=this.colorType)||6===C$zul,C$zui=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*C$zui,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(Uint8Array!=Array&&(this.imgData=new Uint8Array(this.imgData)));default:this.pos+=C$zue}if(this.pos+=4,this.pos>this.data.length)throw new Error(C$zuA.getError(6017))}}C$zuJt1.prototype={constructor:C$zuJt1,read:function(C$zut){var C$zue,C$zui;for(C$zui=[],C$zue=0;0<=C$zut?C$zue<C$zut:C$zut<C$zue;0<=C$zut?++C$zue:--C$zue)C$zui.push(this.data[this.pos++]);return C$zui},readUInt32:function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},readUInt16:function(){return this.data[this.pos++]<<8|this.data[this.pos++]},decodePixels:function(C$zut){var C$zue,C$zui,C$zuh,C$zur,C$zuu,C$zu_,C$zud,C$zuf,C$zup,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul,C$zum,C$zuv,C$zuy,C$zug,C$zub,C$zuC;if(0===(C$zut=null==C$zut?this.imgData:C$zut).length)return new Uint8Array(0);for(C$zut=new C$zux.Inflate(C$zut,{index:0,verify:!1}).decompress(),C$zuc=(C$zun=this.pixelBitlength/8)*this.width,C$zua=new Uint8Array(C$zuc*this.height),C$zu_=C$zut.length,C$zui=C$zuo=C$zus=0;C$zuo<C$zu_;){switch(C$zut[C$zuo++]){case 0:for(C$zur=C$zuv=0;C$zuv<C$zuc;C$zur=C$zuv+=1)C$zua[C$zui++]=C$zut[C$zuo++];break;case 1:for(C$zur=C$zuy=0;C$zuy<C$zuc;C$zur=C$zuy+=1)C$zue=C$zut[C$zuo++],C$zuu=C$zur<C$zun?0:C$zua[C$zui-C$zun],C$zua[C$zui++]=(C$zue+C$zuu)%256;break;case 2:for(C$zur=C$zug=0;C$zug<C$zuc;C$zur=C$zug+=1)C$zue=C$zut[C$zuo++],C$zuh=(C$zur-C$zur%C$zun)/C$zun,C$zul=C$zus&&C$zua[(C$zus-1)*C$zuc+C$zuh*C$zun+C$zur%C$zun],C$zua[C$zui++]=(C$zul+C$zue)%256;break;case 3:for(C$zur=C$zub=0;C$zub<C$zuc;C$zur=C$zub+=1)C$zue=C$zut[C$zuo++],C$zuh=(C$zur-C$zur%C$zun)/C$zun,C$zuu=C$zur<C$zun?0:C$zua[C$zui-C$zun],C$zul=C$zus&&C$zua[(C$zus-1)*C$zuc+C$zuh*C$zun+C$zur%C$zun],C$zua[C$zui++]=(C$zue+Math.floor((C$zuu+C$zul)/2))%256;break;case 4:for(C$zur=C$zuC=0;C$zuC<C$zuc;C$zur=C$zuC+=1)C$zue=C$zut[C$zuo++],C$zuh=(C$zur-C$zur%C$zun)/C$zun,C$zuu=C$zur<C$zun?0:C$zua[C$zui-C$zun],0===C$zus?C$zul=C$zum=0:(C$zul=C$zua[(C$zus-1)*C$zuc+C$zuh*C$zun+C$zur%C$zun],C$zum=C$zuh&&C$zua[(C$zus-1)*C$zuc+(C$zuh-1)*C$zun+C$zur%C$zun]),C$zup=C$zuu+C$zul-C$zum,C$zud=Math.abs(C$zup-C$zuu),C$zuf=Math.abs(C$zup-C$zul),C$zup=Math.abs(C$zup-C$zum),C$zua[C$zui++]=(C$zue+(C$zud<=C$zuf&&C$zud<=C$zup?C$zuu:C$zuf<=C$zup?C$zul:C$zum))%256;break;default:throw new Error(C$zuA.getError(6018,C$zut[C$zuo-1]))}C$zus++}return C$zua},copyToImageData:function(C$zuh,C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuu,C$zuc,C$zul,C$zu_;if(C$zui=this.colors,C$zuc=null,C$zue=this.hasAlphaChannel,this.palette.length&&(C$zuc=null!=(C$zu_=this._decodedPalette)?C$zu_:this._decodedPalette=this.decodePalette(),C$zui=4,C$zue=!0),C$zuu=(C$zur=C$zuh.data||C$zuh).length,C$zua=C$zuc||C$zut,C$zun=C$zuo=0,1===C$zui)for(;C$zun<C$zuu;)C$zus=C$zuc?4*C$zut[C$zun/4]:C$zuo,C$zul=C$zua[C$zus++],C$zur[C$zun++]=C$zul,C$zur[C$zun++]=C$zul,C$zur[C$zun++]=C$zul,C$zur[C$zun++]=C$zue?C$zua[C$zus++]:255,C$zuo=C$zus;else for(;C$zun<C$zuu;)C$zus=C$zuc?4*C$zut[C$zun/4]:C$zuo,C$zur[C$zun++]=C$zua[C$zus++],C$zur[C$zun++]=C$zua[C$zus++],C$zur[C$zun++]=C$zua[C$zus++],C$zur[C$zun++]=C$zue?C$zua[C$zus++]:255,C$zuo=C$zus},decodePalette:function(){var C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc;for(C$zui=this.palette,C$zua=this.transparency.indexed||[],C$zun=new Uint8Array((C$zua.length||0)+C$zui.length),C$zue=C$zuo=C$zut=C$zur=0,C$zus=C$zui.length;C$zuo<C$zus;C$zue=C$zuo+=3)C$zun[C$zur++]=C$zui[C$zue],C$zun[C$zur++]=C$zui[C$zue+1],C$zun[C$zur++]=C$zui[C$zue+2],C$zun[C$zur++]=null!=(C$zuc=C$zua[C$zut++])?C$zuc:255;return C$zun},render:function(C$zut){var C$zue;return C$zut.width=this.width,C$zut.height=this.height,C$zue=(C$zut=C$zut.getContext("2d")).createImageData(this.width,this.height),this.copyToImageData(C$zue,this.decodePixels()),C$zut.putImageData(C$zue,0,0)}},C$zue.exports=C$zuJt1},{"../compression/zlib.min":26,"../core/CCDebug":27}],294:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../core/assets/CCAsset");C$zut=C$zut("../core/assets/CCSpriteFrame");C$zur=cc.Class({name:"cc.ParticleAsset",extends:C$zur,properties:{spriteFrame:{default:null,type:C$zut}}});cc.ParticleAsset=C$zue.exports=C$zur},{"../core/assets/CCAsset":34,"../core/assets/CCSpriteFrame":47}],295:[function(C$zut,C$zue,C$zuh){"use strict";var C$zuo=C$zut("../core/platform/CCMacro");var C$zui=C$zut("./CCParticleAsset");var C$zuu=C$zut("../core/components/CCRenderComponent");var C$zu_=C$zut("../compression/ZipUtils");var C$zus=C$zut("./CCPNGReader");var C$zuc=C$zut("./CCTIFFReader");var C$zul=C$zut("../core/utils/texture-util");C$zut("../core/renderer/render-flow");var C$zud=C$zut("./particle-simulator");C$zut("../core/assets/material/CCMaterial");var C$zur=C$zut("../core/utils/blend-func");var C$zun=cc.Enum({GRAVITY:0,RADIUS:1});var C$zua=cc.Enum({FREE:0,RELATIVE:1,GROUPED:2});C$zut={preview:{default:!0,editorOnly:!0,notify:!1,animatable:!1,tooltip:!1},_custom:!1,custom:{get:function(){return this._custom},set:function(C$zut){this._custom!==C$zut&&(this._custom=C$zut,this._applyFile())},animatable:!1,tooltip:!1},_file:{default:null,type:C$zui},file:{get:function(){return this._file},set:function(C$zut,C$zue){this._file!==C$zut&&((this._file=C$zut)?this._applyFile():this.custom=!0)},animatable:!1,type:C$zui,tooltip:!1},_spriteFrame:{default:null,type:cc.SpriteFrame},spriteFrame:{get:function(){return this._spriteFrame},set:function(C$zut,C$zue){var C$zui=this._renderSpriteFrame;C$zui!==C$zut&&((this._renderSpriteFrame=C$zut)&&!C$zut._uuid||(this._spriteFrame=C$zut),(C$zui&&C$zui.getTexture())!==(C$zut&&C$zut.getTexture())&&this._applySpriteFrame(C$zui))},type:cc.SpriteFrame,tooltip:!1},_texture:{default:null,type:cc.Texture2D,editorOnly:!0},texture:{get:function(){return this._getTexture()},set:function(C$zut){C$zut&&cc.warnID(6017)},type:cc.Texture2D,tooltip:!1,readonly:!0,visible:!1,animatable:!1},particleCount:{visible:!1,get:function(){return this._simulator.particles.length},readonly:!0},_stopped:!0,stopped:{get:function(){return this._stopped},animatable:!1,visible:!1},playOnLoad:!0,autoRemoveOnFinish:{default:!1,animatable:!1,tooltip:!1},active:{get:function(){return this._simulator.active},visible:!1},totalParticles:150,duration:-1,emissionRate:10,life:1,lifeVar:0,_startColor:null,startColor:{type:cc.Color,get:function(){return this._startColor},set:function(C$zut){this._startColor.r=C$zut.r,this._startColor.g=C$zut.g,this._startColor.b=C$zut.b,this._startColor.a=C$zut.a}},_startColorVar:null,startColorVar:{type:cc.Color,get:function(){return this._startColorVar},set:function(C$zut){this._startColorVar.r=C$zut.r,this._startColorVar.g=C$zut.g,this._startColorVar.b=C$zut.b,this._startColorVar.a=C$zut.a}},_endColor:null,endColor:{type:cc.Color,get:function(){return this._endColor},set:function(C$zut){this._endColor.r=C$zut.r,this._endColor.g=C$zut.g,this._endColor.b=C$zut.b,this._endColor.a=C$zut.a}},_endColorVar:null,endColorVar:{type:cc.Color,get:function(){return this._endColorVar},set:function(C$zut){this._endColorVar.r=C$zut.r,this._endColorVar.g=C$zut.g,this._endColorVar.b=C$zut.b,this._endColorVar.a=C$zut.a}},angle:90,angleVar:20,startSize:50,startSizeVar:0,endSize:0,endSizeVar:0,startSpin:0,startSpinVar:0,endSpin:0,endSpinVar:0,sourcePos:cc.Vec2.ZERO,posVar:cc.Vec2.ZERO,_positionType:{default:C$zua.FREE,formerlySerializedAs:"positionType"},positionType:{type:C$zua,get:function(){return this._positionType},set:function(C$zut){this._positionType=C$zut,this._updateMaterial()}},emitterMode:{default:C$zun.GRAVITY,type:C$zun},gravity:cc.Vec2.ZERO,speed:180,speedVar:50,tangentialAccel:80,tangentialAccelVar:0,radialAccel:0,radialAccelVar:0,rotationIsDir:!1,startRadius:0,startRadiusVar:0,endRadius:0,endRadiusVar:0,rotatePerS:0,rotatePerSVar:0};C$zui=cc.Class({name:"cc.ParticleSystem",extends:C$zuu,mixins:[C$zur],editor:!1,ctor:function(){this.initProperties()},initProperties:function(){this._previewTimer=null,this._focused=!1,this._aspectRatio=1,this._simulator=new C$zud(this),this._startColor=cc.color(255,255,255,255),this._startColorVar=cc.color(0,0,0,0),this._endColor=cc.color(255,255,255,0),this._endColorVar=cc.color(0,0,0,0),this._renderSpriteFrame=null},properties:C$zut,statics:{DURATION_INFINITY:-1,START_SIZE_EQUAL_TO_END_SIZE:-1,START_RADIUS_EQUAL_TO_END_RADIUS:-1,EmitterMode:C$zun,PositionType:C$zua,_PNGReader:C$zus,_TIFFReader:C$zuc},onFocusInEditor:!1,onLostFocusInEditor:!1,_startPreview:!1,_stopPreview:!1,_convertTextureToSpriteFrame:!1,__preload:function(){this._super(),this._custom&&this.spriteFrame&&!this._renderSpriteFrame?this._applySpriteFrame(this.spriteFrame):this._file&&(this._custom&&this._getTexture()||this._applyFile()),this.playOnLoad&&this.resetSystem()},onDestroy:function(){this.autoRemoveOnFinish&&(this.autoRemoveOnFinish=!1),this._buffer&&(this._buffer.destroy(),this._buffer=null),this._simulator._uvFilled=0,this._super()},lateUpdate:function(C$zut){this._simulator.finished||this._simulator.step(C$zut)},addParticle:function(){},stopSystem:function(){this._stopped=!0,this._simulator.stop()},resetSystem:function(){this._stopped=!1,this._simulator.reset(),this.markForRender(!0)},isFull:function(){return this.particleCount>=this.totalParticles},setTextureWithRect:function(C$zut,C$zue){C$zut instanceof cc.Texture2D&&(this.spriteFrame=new cc.SpriteFrame(C$zut,C$zue))},_applyFile:function(){var C$zui=this._file;var C$zur;C$zui&&(C$zur=this,cc.loader.load(C$zui.nativeUrl,function(C$zut,C$zue){!C$zut&&C$zue?C$zur.isValid&&(C$zur._plistFile=C$zui.nativeUrl,C$zur._custom||C$zur._initWithDictionary(C$zue),C$zur._spriteFrame?!C$zur._renderSpriteFrame&&C$zur._spriteFrame&&C$zur._applySpriteFrame(C$zur.spriteFrame):C$zui.spriteFrame?C$zur.spriteFrame=C$zui.spriteFrame:C$zur._custom&&C$zur._initTextureWithDictionary(C$zue)):cc.errorID(6029)}))},_initTextureWithDictionary:function(C$zui){var C$zut=cc.path.changeBasename(this._plistFile,C$zui.textureFileName||"");if(C$zui.textureFileName)C$zul.loadImage(C$zut,function(C$zut,C$zue){C$zut?(C$zui.textureFileName=void 0,this._initTextureWithDictionary(C$zui)):this.spriteFrame=new cc.SpriteFrame(C$zue)},this);else if(C$zui.textureImageData){var C$zue=C$zui.textureImageData;if(!(C$zue&&0<C$zue.length))return!1;var C$zur=cc.loader.getRes(C$zut);if(!C$zur){C$zue=C$zu_.unzipBase64AsArray(C$zue,1);if(!C$zue)return cc.logID(6030),!1;C$zua=8<(C$zua=C$zue).length&&137===C$zua[0]&&80===C$zua[1]&&78===C$zua[2]&&71===C$zua[3]&&13===C$zua[4]&&10===C$zua[5]&&26===C$zua[6]&&10===C$zua[7]?C$zuo.ImageFormat.PNG:2<C$zua.length&&(73===C$zua[0]&&73===C$zua[1]||77===C$zua[0]&&77===C$zua[1]||255===C$zua[0]&&216===C$zua[1])?C$zuo.ImageFormat.TIFF:C$zuo.ImageFormat.UNKNOWN;if(C$zua!==C$zuo.ImageFormat.TIFF&&C$zua!==C$zuo.ImageFormat.PNG)return cc.logID(6031),!1;var C$zun=document.createElement("canvas");C$zua===C$zuo.ImageFormat.PNG?new C$zus(C$zue).render(C$zun):C$zuc.parseTIFF(C$zue,C$zun),C$zur=C$zul.cacheImage(C$zut,C$zun)}C$zur||cc.logID(6032),this.spriteFrame=new cc.SpriteFrame(C$zur)}var C$zua;return!0},_initWithDictionary:function(C$zut){this.totalParticles=parseInt(C$zut.maxParticles||0),this.life=parseFloat(C$zut.particleLifespan||0),this.lifeVar=parseFloat(C$zut.particleLifespanVariance||0);var C$zue=C$zut.emissionRate;this.emissionRate=C$zue||Math.min(this.totalParticles/this.life,Number.MAX_VALUE),this.duration=parseFloat(C$zut.duration||0),this.srcBlendFactor=parseInt(C$zut.blendFuncSource||C$zuo.SRC_ALPHA),this.dstBlendFactor=parseInt(C$zut.blendFuncDestination||C$zuo.ONE_MINUS_SRC_ALPHA);C$zue=this._startColor;C$zue.r=255*parseFloat(C$zut.startColorRed||0),C$zue.g=255*parseFloat(C$zut.startColorGreen||0),C$zue.b=255*parseFloat(C$zut.startColorBlue||0),C$zue.a=255*parseFloat(C$zut.startColorAlpha||0);C$zue=this._startColorVar;C$zue.r=255*parseFloat(C$zut.startColorVarianceRed||0),C$zue.g=255*parseFloat(C$zut.startColorVarianceGreen||0),C$zue.b=255*parseFloat(C$zut.startColorVarianceBlue||0),C$zue.a=255*parseFloat(C$zut.startColorVarianceAlpha||0);C$zue=this._endColor;C$zue.r=255*parseFloat(C$zut.finishColorRed||0),C$zue.g=255*parseFloat(C$zut.finishColorGreen||0),C$zue.b=255*parseFloat(C$zut.finishColorBlue||0),C$zue.a=255*parseFloat(C$zut.finishColorAlpha||0);C$zue=this._endColorVar;if(C$zue.r=255*parseFloat(C$zut.finishColorVarianceRed||0),C$zue.g=255*parseFloat(C$zut.finishColorVarianceGreen||0),C$zue.b=255*parseFloat(C$zut.finishColorVarianceBlue||0),C$zue.a=255*parseFloat(C$zut.finishColorVarianceAlpha||0),this.startSize=parseFloat(C$zut.startParticleSize||0),this.startSizeVar=parseFloat(C$zut.startParticleSizeVariance||0),this.endSize=parseFloat(C$zut.finishParticleSize||0),this.endSizeVar=parseFloat(C$zut.finishParticleSizeVariance||0),this.positionType=parseFloat(void 0!==C$zut.positionType?C$zut.positionType:C$zua.RELATIVE),this.sourcePos.x=0,this.sourcePos.y=0,this.posVar.x=parseFloat(C$zut.sourcePositionVariancex||0),this.posVar.y=parseFloat(C$zut.sourcePositionVariancey||0),this.angle=parseFloat(C$zut.angle||0),this.angleVar=parseFloat(C$zut.angleVariance||0),this.startSpin=parseFloat(C$zut.rotationStart||0),this.startSpinVar=parseFloat(C$zut.rotationStartVariance||0),this.endSpin=parseFloat(C$zut.rotationEnd||0),this.endSpinVar=parseFloat(C$zut.rotationEndVariance||0),this.emitterMode=parseInt(C$zut.emitterType||C$zun.GRAVITY),this.emitterMode===C$zun.GRAVITY){this.gravity.x=parseFloat(C$zut.gravityx||0),this.gravity.y=parseFloat(C$zut.gravityy||0),this.speed=parseFloat(C$zut.speed||0),this.speedVar=parseFloat(C$zut.speedVariance||0),this.radialAccel=parseFloat(C$zut.radialAcceleration||0),this.radialAccelVar=parseFloat(C$zut.radialAccelVariance||0),this.tangentialAccel=parseFloat(C$zut.tangentialAcceleration||0),this.tangentialAccelVar=parseFloat(C$zut.tangentialAccelVariance||0);C$zue=C$zut.rotationIsDir||"";null!==C$zue?(C$zue=C$zue.toString().toLowerCase(),this.rotationIsDir="true"===C$zue||"1"===C$zue):this.rotationIsDir=!1}else{if(this.emitterMode!==C$zun.RADIUS)return cc.warnID(6009),!1;this.startRadius=parseFloat(C$zut.maxRadius||0),this.startRadiusVar=parseFloat(C$zut.maxRadiusVariance||0),this.endRadius=parseFloat(C$zut.minRadius||0),this.endRadiusVar=parseFloat(C$zut.minRadiusVariance||0),this.rotatePerS=parseFloat(C$zut.rotatePerSecond||0),this.rotatePerSVar=parseFloat(C$zut.rotatePerSecondVariance||0)}return this._initTextureWithDictionary(C$zut),!0},_validateRender:function(){var C$zut=this._getTexture();C$zut&&C$zut.loaded?this._super():this.disableRender()},_onTextureLoaded:function(){this._simulator.updateUVs(!0),this._syncAspect(),this._updateMaterial(),this.markForRender(!0)},_syncAspect:function(){var C$zut=this._renderSpriteFrame._rect;this._aspectRatio=C$zut.width/C$zut.height},_applySpriteFrame:function(){this._renderSpriteFrame=this._renderSpriteFrame||this._spriteFrame,this._renderSpriteFrame&&(this._renderSpriteFrame.textureLoaded()?this._onTextureLoaded():this._renderSpriteFrame.onTextureLoaded(this._onTextureLoaded,this))},_getTexture:function(){return this._renderSpriteFrame&&this._renderSpriteFrame.getTexture()||this._texture},_updateMaterial:function(){var C$zut=this.getMaterial(0);C$zut&&(C$zut.define("CC_USE_MODEL",this._positionType!==C$zua.FREE),C$zut.setProperty("texture",this._getTexture()),C$zur.prototype._updateMaterial.call(this))},_finishedSimulation:function(){this.resetSystem(),this.stopSystem(),this.disableRender(),this.autoRemoveOnFinish&&this._stopped&&this.node.destroy()}});cc.ParticleSystem=C$zue.exports=C$zui},{"../compression/ZipUtils":23,"../core/assets/material/CCMaterial":53,"../core/components/CCRenderComponent":89,"../core/platform/CCMacro":194,"../core/renderer/render-flow":221,"../core/utils/blend-func":257,"../core/utils/texture-util":272,"./CCPNGReader":293,"./CCParticleAsset":294,"./CCTIFFReader":296,"./particle-simulator":298,"fire-url":void 0}],296:[function(C$zut,C$zue,C$zui){"use strict";var C$zutt=C$zut("../core/CCDebug");C$zue.exports={_littleEndian:!1,_tiffData:null,_fileDirectories:[],getUint8:function(C$zut){return this._tiffData[C$zut]},getUint16:function(C$zut){return this._littleEndian?this._tiffData[C$zut+1]<<8|this._tiffData[C$zut]:this._tiffData[C$zut]<<8|this._tiffData[C$zut+1]},getUint32:function(C$zut){var C$zue=this._tiffData;return this._littleEndian?C$zue[C$zut+3]<<24|C$zue[C$zut+2]<<16|C$zue[C$zut+1]<<8|C$zue[C$zut]:C$zue[C$zut]<<24|C$zue[C$zut+1]<<16|C$zue[C$zut+2]<<8|C$zue[C$zut+3]},checkLittleEndian:function(){var C$zut=this.getUint16(0);if(18761===C$zut)this.littleEndian=!0;else{if(19789!==C$zut)throw console.log(C$zut),TypeError(C$zutt.getError(6019));this.littleEndian=!1}return this.littleEndian},hasTowel:function(){if(42!==this.getUint16(2))throw RangeError(C$zutt.getError(6020));return!0},getFieldTypeName:function(C$zut){var C$zue=this.fieldTypeNames;return C$zut in C$zue?C$zue[C$zut]:null},getFieldTagName:function(C$zut){var C$zue=this.fieldTagNames;return C$zut in C$zue?C$zue[C$zut]:(cc.logID(6021,C$zut),"Tag"+C$zut)},getFieldTypeLength:function(C$zut){return-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(C$zut)?1:-1!==["SHORT","SSHORT"].indexOf(C$zut)?2:-1!==["LONG","SLONG","FLOAT"].indexOf(C$zut)?4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(C$zut)?8:null},getFieldValues:function(C$zut,C$zue,C$zui,C$zur){var C$zun=[];var C$zua=this.getFieldTypeLength(C$zue);if(C$zua*C$zui<=4)!1===this.littleEndian?C$zun.push(C$zur>>>8*(4-C$zua)):C$zun.push(C$zur);else for(var C$zuo=0;C$zuo<C$zui;C$zuo++){var C$zus=C$zua*C$zuo;8<=C$zua?-1!==["RATIONAL","SRATIONAL"].indexOf(C$zue)?(C$zun.push(this.getUint32(C$zur+C$zus)),C$zun.push(this.getUint32(C$zur+C$zus+4))):cc.logID(8e3):C$zun.push(this.getBytes(C$zua,C$zur+C$zus))}return"ASCII"===C$zue&&C$zun.forEach(function(C$zut,C$zue,C$zui){C$zui[C$zue]=String.fromCharCode(C$zut)}),C$zun},getBytes:function(C$zut,C$zue){if(!(C$zut<=0))return C$zut<=1?this.getUint8(C$zue):C$zut<=2?this.getUint16(C$zue):C$zut<=3?this.getUint32(C$zue)>>>8:C$zut<=4?this.getUint32(C$zue):void cc.logID(8002);cc.logID(8001)},getBits:function(C$zut,C$zue,C$zui){C$zui=C$zui||0;C$zue+=Math.floor(C$zui/8);var C$zur=C$zui+C$zut;C$zut=32-C$zut;var C$zun,C$zua;return C$zur<=0?cc.logID(6023):C$zur<=8?(C$zun=24+C$zui,C$zua=this.getUint8(C$zue)):C$zur<=16?(C$zun=16+C$zui,C$zua=this.getUint16(C$zue)):C$zur<=32?(C$zun=C$zui,C$zua=this.getUint32(C$zue)):cc.logID(6022),{bits:C$zua<<C$zun>>>C$zut,byteOffset:C$zue+Math.floor(C$zur/8),bitOffset:C$zur%8}},parseFileDirectory:function(C$zut){var C$zue=this.getUint16(C$zut);var C$zui=[];for(var C$zur=C$zut+2,C$zun=0;C$zun<C$zue;C$zur+=12,C$zun++){var C$zua=this.getUint16(C$zur);var C$zuo=this.getUint16(C$zur+2);var C$zus=this.getUint32(C$zur+4);var C$zuc=this.getUint32(C$zur+8);C$zua=this.getFieldTagName(C$zua);C$zuo=this.getFieldTypeName(C$zuo);C$zus=this.getFieldValues(C$zua,C$zuo,C$zus,C$zuc);C$zui[C$zua]={type:C$zuo,values:C$zus}}this._fileDirectories.push(C$zui);C$zut=this.getUint32(C$zur);0!==C$zut&&this.parseFileDirectory(C$zut)},clampColorSample:function(C$zut,C$zue){C$zue=Math.pow(2,8-C$zue);return Math.floor(C$zut*C$zue+(C$zue-1))},parseTIFF:function(C$zut,C$zue){if(C$zue=C$zue||document.createElement("canvas"),this._tiffData=C$zut,this.canvas=C$zue,this.checkLittleEndian(),this.hasTowel()){C$zut=this.getUint32(4);this._fileDirectories.length=0,this.parseFileDirectory(C$zut);C$zut=this._fileDirectories[0];var C$zuh=C$zut.ImageWidth.values[0];var C$zui=C$zut.ImageLength.values[0];this.canvas.width=C$zuh,this.canvas.height=C$zui;var C$zur=[];var C$zuu=C$zut.Compression?C$zut.Compression.values[0]:1;var C$zu_=C$zut.SamplesPerPixel.values[0];var C$zun=[];var C$zud=0;var C$zuf=!1;var C$zup;C$zut.BitsPerSample.values.forEach(function(C$zut,C$zue,C$zui){C$zun[C$zue]={bitsPerSample:C$zut,hasBytesPerSample:!1,bytesPerSample:void 0},C$zut%8==0&&(C$zun[C$zue].hasBytesPerSample=!0,C$zun[C$zue].bytesPerSample=C$zut/8),C$zud+=C$zut},this),C$zud%8==0&&(C$zuf=!0,C$zup=C$zud/8);var C$zum=C$zut.StripOffsets.values;var C$zuv=C$zum.length;if(C$zut.StripByteCounts)var C$zuy=C$zut.StripByteCounts.values;else{if(cc.logID(8003),1!==C$zuv)throw Error(C$zutt.getError(6024));C$zuy=[Math.ceil(C$zuh*C$zui*C$zud/8)]}for(var C$zua=0;C$zua<C$zuv;C$zua++){var C$zug=C$zum[C$zua];C$zur[C$zua]=[];var C$zub=C$zuy[C$zua];for(var C$zuo=0,C$zuC=0,C$zux=1,C$zuA=!0,C$zus=[],C$zuS=0,C$zuT=0,C$zuw=0;C$zuo<C$zub;C$zuo+=C$zux)switch(C$zuu){case 1:for(var C$zuc=0,C$zus=[];C$zuc<C$zu_;C$zuc++){if(!C$zun[C$zuc].hasBytesPerSample)throw C$zuE=this.getBits(C$zun[C$zuc].bitsPerSample,C$zug+C$zuo,C$zuC),C$zus.push(C$zuE.bits),C$zuo=C$zuE.byteOffset-C$zug,C$zuC=C$zuE.bitOffset,RangeError(C$zutt.getError(6025));var C$zuE=C$zun[C$zuc].bytesPerSample*C$zuc;C$zus.push(this.getBytes(C$zun[C$zuc].bytesPerSample,C$zug+C$zuo+C$zuE))}if(C$zur[C$zua].push(C$zus),!C$zuf)throw C$zux=0,RangeError(C$zutt.getError(6026));C$zux=C$zup;break;case 2:case 3:case 4:case 5:case 6:case 7:break;case 32773:if(C$zuA){C$zuA=!1;var C$zuP=1;var C$zuM=1;var C$zuR=this.getInt8(C$zug+C$zuo);0<=C$zuR&&C$zuR<=127?C$zuP=C$zuR+1:-127<=C$zuR&&C$zuR<=-1?C$zuM=1-C$zuR:C$zuA=!0}else{var C$zuI=this.getUint8(C$zug+C$zuo);for(C$zuc=0;C$zuc<C$zuM;C$zuc++){if(!C$zun[C$zuT].hasBytesPerSample)throw RangeError(C$zutt.getError(6025));C$zuw=C$zuw<<8*C$zuS|C$zuI,++C$zuS===C$zun[C$zuT].bytesPerSample&&(C$zus.push(C$zuw),C$zuw=C$zuS=0,C$zuT++),C$zuT===C$zu_&&(C$zur[C$zua].push(C$zus),C$zus=[],C$zuT=0)}0===--C$zuP&&(C$zuA=!0)}C$zux=1}}if(C$zue.getContext){var C$zuB=this.canvas.getContext("2d");C$zuB.fillStyle="rgba(255, 255, 255, 0)";C$zue=C$zut.RowsPerStrip?C$zut.RowsPerStrip.values[0]:C$zui;var C$zuD=C$zur.length;C$zui=C$zui%C$zue;var C$zuL=0==C$zui?C$zue:C$zui;var C$zuV=C$zue;var C$zuO=0;var C$zuF=C$zut.PhotometricInterpretation.values[0];var C$zuN=[];var C$zuk=0;var C$zuz,C$zuG;C$zut.ExtraSamples&&(C$zuk=(C$zuN=C$zut.ExtraSamples.values).length),C$zut.ColorMap&&(C$zuz=C$zut.ColorMap.values,C$zuG=Math.pow(2,C$zun[0].bitsPerSample));for(C$zua=0;C$zua<C$zuD;C$zua++){C$zua+1===C$zuD&&(C$zuV=C$zuL);var C$zuU=C$zur[C$zua].length;var C$zuW=C$zuO*C$zua;for(var C$zuH=0,C$zuj=0;C$zuj<C$zuU;C$zuH++)for(var C$zuX=0;C$zuX<C$zuh;C$zuX++,C$zuj++){var C$zul=C$zur[C$zua][C$zuj];var C$zuq=0;var C$zuJ=0;var C$zuY=0;var C$zu$=1;if(0<C$zuk)for(var C$zuZ=0;C$zuZ<C$zuk;C$zuZ++)if(1===C$zuN[C$zuZ]||2===C$zuN[C$zuZ]){C$zu$=C$zul[3+C$zuZ]/256;break}switch(C$zuF){case 0:var C$zuQ;C$zun[0].hasBytesPerSample&&(C$zuQ=Math.pow(16,2*C$zun[0].bytesPerSample)),C$zul.forEach(function(C$zut,C$zue,C$zui){C$zui[C$zue]=C$zuQ-C$zut});case 1:C$zuq=C$zuJ=C$zuY=this.clampColorSample(C$zul[0],C$zun[0].bitsPerSample);break;case 2:C$zuq=this.clampColorSample(C$zul[0],C$zun[0].bitsPerSample),C$zuJ=this.clampColorSample(C$zul[1],C$zun[1].bitsPerSample),C$zuY=this.clampColorSample(C$zul[2],C$zun[2].bitsPerSample);break;case 3:if(void 0===C$zuz)throw Error(C$zutt.getError(6027));var C$zuK=C$zul[0];C$zuq=this.clampColorSample(C$zuz[C$zuK],16),C$zuJ=this.clampColorSample(C$zuz[C$zuG+C$zuK],16),C$zuY=this.clampColorSample(C$zuz[2*C$zuG+C$zuK],16);break;default:throw RangeError(C$zutt.getError(6028,C$zuF))}C$zuB.fillStyle="rgba("+C$zuq+", "+C$zuJ+", "+C$zuY+", "+C$zu$+")",C$zuB.fillRect(C$zuX,C$zuW+C$zuH,1,1)}C$zuO=C$zuV}}return this.canvas}},fieldTagNames:{315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},fieldTypeNames:{1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"}}},{"../core/CCDebug":27}],297:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCParticleAsset"),C$zut("./CCParticleSystem"),C$zut("./particle-simulator"),C$zut("./particle-system-assembler")},{"./CCParticleAsset":294,"./CCParticleSystem":295,"./particle-simulator":298,"./particle-system-assembler":299}],298:[function(C$zut,C$zue,C$zui){"use strict";var C$zum=C$zut("../core/utils/affine-transform");var C$zur=C$zut("../core/platform/js");var C$zuv=C$zut("../core/utils/misc");var C$zuy=cc.v2(0,0);var C$zug=C$zum.create();var C$zub=cc.v2();var C$zuC=cc.v2();var C$zux=cc.v2();var C$zuA=cc.v2();function C$zuQA1(){this.pos=cc.v2(0,0),this.startPos=cc.v2(0,0),this.color=cc.color(0,0,0,255),this.deltaColor={r:0,g:0,b:0,a:255},this.size=0,this.deltaSize=0,this.rotation=0,this.deltaRotation=0,this.timeToLive=0,this.drawPos=cc.v2(0,0),this.aspectRatio=1,this.dir=cc.v2(0,0),this.radialAccel=0,this.tangentialAccel=0,this.angle=0,this.degreesPerSecond=0,this.radius=0,this.deltaRadius=0}var C$zuS=new C$zur.Pool(function(C$zut){C$zut.pos.set(C$zuy),C$zut.startPos.set(C$zuy),C$zut.color._val=4278190080,C$zut.deltaColor.r=C$zut.deltaColor.g=C$zut.deltaColor.b=0,C$zut.deltaColor.a=255,C$zut.size=0,C$zut.deltaSize=0,C$zut.rotation=0,C$zut.deltaRotation=0,C$zut.timeToLive=0,C$zut.drawPos.set(C$zuy),C$zut.aspectRatio=1,C$zut.dir.set(C$zuy),C$zut.radialAccel=0,C$zut.tangentialAccel=0,C$zut.angle=0,C$zut.degreesPerSecond=0,C$zut.radius=0,C$zut.deltaRadius=0},1024);C$zuS.get=function(){return this._get()||new C$zuQA1};function C$zuzA1(C$zut){this.sys=C$zut,this.particles=[],this.active=!1,this.readyToPlay=!0,this.finished=!1,this.elapsed=0,this.emitCounter=0,this._uvFilled=0}C$zuzA1.prototype.stop=function(){this.active=!1,this.readyToPlay=!1,this.elapsed=this.sys.duration,this.emitCounter=0},C$zuzA1.prototype.reset=function(){this.active=!0,this.readyToPlay=!0,this.elapsed=0,this.emitCounter=0,this.finished=!1;var C$zut=this.particles;for(var C$zue=0;C$zue<C$zut.length;++C$zue)C$zuS.put(C$zut[C$zue]);C$zut.length=0},C$zuzA1.prototype.emitParticle=function(C$zuh){var C$zut=this.sys;var C$zue=C$zuv.clampf;var C$zui=C$zuS.get();this.particles.push(C$zui),C$zui.timeToLive=C$zut.life+C$zut.lifeVar*(Math.random()-.5)*2;var C$zur=C$zui.timeToLive=Math.max(0,C$zui.timeToLive);C$zui.pos.x=C$zut.sourcePos.x+C$zut.posVar.x*(Math.random()-.5)*2,C$zui.pos.y=C$zut.sourcePos.y+C$zut.posVar.y*(Math.random()-.5)*2;var C$zun=C$zut._startColor,C$zua=C$zut._startColorVar;var C$zuo=C$zut._endColor,C$zus=C$zut._endColorVar;C$zui.color.r=C$zul=C$zue(C$zun.r+C$zua.r*(Math.random()-.5)*2,0,255),C$zui.color.g=C$zuc=C$zue(C$zun.g+C$zua.g*(Math.random()-.5)*2,0,255),C$zui.color.b=C$zuu=C$zue(C$zun.b+C$zua.b*(Math.random()-.5)*2,0,255),C$zui.color.a=C$zun=C$zue(C$zun.a+C$zua.a*(Math.random()-.5)*2,0,255),C$zui.deltaColor.r=(C$zue(C$zuo.r+C$zus.r*(Math.random()-.5)*2,0,255)-C$zul)/C$zur,C$zui.deltaColor.g=(C$zue(C$zuo.g+C$zus.g*(Math.random()-.5)*2,0,255)-C$zuc)/C$zur,C$zui.deltaColor.b=(C$zue(C$zuo.b+C$zus.b*(Math.random()-.5)*2,0,255)-C$zuu)/C$zur,C$zui.deltaColor.a=(C$zue(C$zuo.a+C$zus.a*(Math.random()-.5)*2,0,255)-C$zun)/C$zur;C$zua=C$zut.startSize+C$zut.startSizeVar*(Math.random()-.5)*2;C$zua=Math.max(0,C$zua),C$zui.size=C$zua,C$zut.endSize===cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE?C$zui.deltaSize=0:(C$zul=C$zut.endSize+C$zut.endSizeVar*(Math.random()-.5)*2,C$zul=Math.max(0,C$zul),C$zui.deltaSize=(C$zul-C$zua)/C$zur);var C$zuc=C$zut.startSpin+C$zut.startSpinVar*(Math.random()-.5)*2;var C$zuu=C$zut.endSpin+C$zut.endSpinVar*(Math.random()-.5)*2;C$zui.rotation=C$zuc,C$zui.deltaRotation=(C$zuu-C$zuc)/C$zur,C$zui.startPos.x=C$zuh.x,C$zui.startPos.y=C$zuh.y,C$zui.aspectRatio=C$zut._aspectRatio||1;C$zue=function(C$zut){var C$zue=0;var C$zui=C$zut;for(;C$zui;)C$zue+=C$zui.angle,C$zui=C$zui.parent;return C$zue}(C$zut.node);C$zuo=C$zut.positionType===cc.ParticleSystem.PositionType.FREE?C$zut.angle+C$zue:C$zut.angle;C$zus=C$zuv.degreesToRadians(C$zuo+C$zut.angleVar*(Math.random()-.5)*2);var C$zul;C$zut.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY?(C$zun=C$zut.speed+C$zut.speedVar*(Math.random()-.5)*2,C$zui.dir.x=Math.cos(C$zus),C$zui.dir.y=Math.sin(C$zus),C$zui.dir.mulSelf(C$zun),C$zui.radialAccel=C$zut.radialAccel+C$zut.radialAccelVar*(Math.random()-.5)*2,C$zui.tangentialAccel=C$zut.tangentialAccel+C$zut.tangentialAccelVar*(Math.random()-.5)*2,C$zut.rotationIsDir&&(C$zui.rotation=-C$zuv.radiansToDegrees(Math.atan2(C$zui.dir.y,C$zui.dir.x)))):(C$zul=C$zut.startRadius+C$zut.startRadiusVar*(Math.random()-.5)*2,C$zua=C$zut.endRadius+C$zut.endRadiusVar*(Math.random()-.5)*2,C$zui.radius=C$zul,C$zui.deltaRadius=C$zut.endRadius===cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS?0:(C$zua-C$zul)/C$zur,C$zui.angle=C$zus,C$zui.degreesPerSecond=C$zuv.degreesToRadians(C$zut.rotatePerS+C$zut.rotatePerSVar*(Math.random()-.5)*2))},C$zuzA1.prototype.updateUVs=function(C$zut){var C$zue=this.sys._assembler;if(C$zue){var C$zui=C$zue.getBuffer();if(C$zui&&this.sys._renderSpriteFrame){var C$zur=4*C$zue._vfmt._bytes/4;var C$zun=C$zui._vData;var C$zua=this.sys._renderSpriteFrame.uv;C$zue=C$zut?0:this._uvFilled;var C$zuo=this.particles.length;for(var C$zus=C$zue;C$zus<C$zuo;C$zus++){var C$zuc=C$zus*C$zur;C$zun[2+C$zuc]=C$zua[0],C$zun[3+C$zuc]=C$zua[1],C$zun[7+C$zuc]=C$zua[2],C$zun[8+C$zuc]=C$zua[3],C$zun[12+C$zuc]=C$zua[4],C$zun[13+C$zuc]=C$zua[5],C$zun[17+C$zuc]=C$zua[6],C$zun[18+C$zuc]=C$zua[7]}this._uvFilled=C$zuo}}},C$zuzA1.prototype.updateParticleBuffer=function(C$zut,C$zue,C$zuh,C$zui){var C$zur=C$zuh._vData;C$zuh=C$zuh._uintVData;var C$zun=C$zue.x,C$zue=C$zue.y;var C$zua=C$zut.size;var C$zuo=C$zua;var C$zus=C$zut.aspectRatio;1<C$zus?C$zuo=C$zua/C$zus:C$zua=C$zuo*C$zus;C$zus=C$zua/2;C$zua=C$zuo/2;var C$zuu,C$zu_,C$zud,C$zuc,C$zul;C$zut.rotation?(C$zuo=-C$zus,C$zuu=-C$zua,C$zu_=C$zus,C$zud=C$zua,C$zul=-C$zuv.degreesToRadians(C$zut.rotation),C$zuc=Math.cos(C$zul),C$zul=Math.sin(C$zul),C$zur[C$zui]=C$zuo*C$zuc-C$zuu*C$zul+C$zun,C$zur[C$zui+1]=C$zuo*C$zul+C$zuu*C$zuc+C$zue,C$zur[C$zui+5]=C$zu_*C$zuc-C$zuu*C$zul+C$zun,C$zur[C$zui+6]=C$zu_*C$zul+C$zuu*C$zuc+C$zue,C$zur[C$zui+10]=C$zuo*C$zuc-C$zud*C$zul+C$zun,C$zur[C$zui+11]=C$zuo*C$zul+C$zud*C$zuc+C$zue,C$zur[C$zui+15]=C$zu_*C$zuc-C$zud*C$zul+C$zun,C$zur[C$zui+16]=C$zu_*C$zul+C$zud*C$zuc+C$zue):(C$zur[C$zui]=C$zun-C$zus,C$zur[C$zui+1]=C$zue-C$zua,C$zur[C$zui+5]=C$zun+C$zus,C$zur[C$zui+6]=C$zue-C$zua,C$zur[C$zui+10]=C$zun-C$zus,C$zur[C$zui+11]=C$zue+C$zua,C$zur[C$zui+15]=C$zun+C$zus,C$zur[C$zui+16]=C$zue+C$zua),C$zuh[C$zui+4]=C$zut.color._val,C$zuh[C$zui+9]=C$zut.color._val,C$zuh[C$zui+14]=C$zut.color._val,C$zuh[C$zui+19]=C$zut.color._val},C$zuzA1.prototype.step=function(C$zut){C$zut=C$zut>cc.director._maxParticleDeltaTime?cc.director._maxParticleDeltaTime:C$zut;var C$zue=this.sys;var C$zuh=C$zue.node;var C$zui=this.particles;var C$zuu=4*this.sys._assembler._vfmt._bytes/4;var C$zu_;C$zuh._updateWorldMatrix(),C$zug=C$zum.identity(),C$zue.positionType===cc.ParticleSystem.PositionType.FREE?(C$zur=C$zuh._worldMatrix.m,C$zug.tx=C$zur[12],C$zug.ty=C$zur[13],C$zum.transformVec2(C$zub,C$zuy,C$zug)):C$zue.positionType===cc.ParticleSystem.PositionType.RELATIVE&&(C$zur=C$zuv.degreesToRadians(-C$zuh.angle),C$zu_=Math.cos(C$zur),C$zur=Math.sin(C$zur),C$zug=C$zum.create(C$zu_,-C$zur,C$zur,C$zu_,0,0),C$zub.x=C$zuh.x,C$zub.y=C$zuh.y),C$zum.invert(C$zug,C$zug);var C$zud=C$zug;if(this.active&&C$zue.emissionRate){var C$zuf=1/C$zue.emissionRate;for(C$zui.length<C$zue.totalParticles&&(this.emitCounter+=C$zut);C$zui.length<C$zue.totalParticles&&this.emitCounter>C$zuf;)this.emitParticle(C$zub),this.emitCounter-=C$zuf;this.elapsed+=C$zut,-1!==C$zue.duration&&C$zue.duration<this.elapsed&&C$zue.stopSystem()}var C$zup=C$zue._assembler.getBuffer();var C$zur=C$zui.length;C$zup.reset(),C$zup.request(4*C$zur,6*C$zur),C$zur>this._uvFilled&&this.updateUVs();var C$zun=0;for(;C$zun<C$zui.length;){C$zuC.x=C$zuC.y=C$zux.x=C$zux.y=C$zuA.x=C$zuA.y=0;var C$zua=C$zui[C$zun];var C$zuo,C$zus,C$zuc,C$zul;C$zua.timeToLive-=C$zut,0<C$zua.timeToLive?(C$zue.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY?(C$zul=C$zuA,C$zus=C$zuC,C$zuc=C$zux,(C$zua.pos.x||C$zua.pos.y)&&(C$zus.set(C$zua.pos),C$zus.normalizeSelf()),C$zuc.set(C$zus),C$zus.mulSelf(C$zua.radialAccel),C$zuo=C$zuc.x,C$zuc.x=-C$zuc.y,C$zuc.y=C$zuo,C$zuc.mulSelf(C$zua.tangentialAccel),C$zul.set(C$zus),C$zul.addSelf(C$zuc),C$zul.addSelf(C$zue.gravity),C$zul.mulSelf(C$zut),C$zua.dir.addSelf(C$zul),C$zul.set(C$zua.dir),C$zul.mulSelf(C$zut),C$zua.pos.addSelf(C$zul)):(C$zua.angle+=C$zua.degreesPerSecond*C$zut,C$zua.radius+=C$zua.deltaRadius*C$zut,C$zua.pos.x=-Math.cos(C$zua.angle)*C$zua.radius,C$zua.pos.y=-Math.sin(C$zua.angle)*C$zua.radius),C$zua.color.r+=C$zua.deltaColor.r*C$zut,C$zua.color.g+=C$zua.deltaColor.g*C$zut,C$zua.color.b+=C$zua.deltaColor.b*C$zut,C$zua.color.a+=C$zua.deltaColor.a*C$zut,C$zua.size+=C$zua.deltaSize*C$zut,C$zua.size<0&&(C$zua.size=0),C$zua.rotation+=C$zua.deltaRotation*C$zut,C$zuo=C$zuC,C$zus=C$zux,C$zue.positionType===cc.ParticleSystem.PositionType.FREE?(C$zus.set(C$zua.startPos),C$zus.negSelf(),C$zuo.set(C$zua.pos),C$zuo.subSelf(C$zus)):C$zue.positionType===cc.ParticleSystem.PositionType.RELATIVE?(C$zuc=C$zuA,C$zum.transformVec2(C$zus,C$zub,C$zud),C$zum.transformVec2(C$zuc,C$zua.startPos,C$zud),C$zus.subSelf(C$zuc),C$zuo.set(C$zua.pos),C$zuo.subSelf(C$zus)):C$zuo.set(C$zua.pos),this.updateParticleBuffer(C$zua,C$zuo,C$zup,C$zuu*C$zun),++C$zun):(C$zul=C$zui[C$zun],C$zun!==C$zui.length-1&&(C$zui[C$zun]=C$zui[C$zui.length-1]),C$zuS.put(C$zul),C$zui.length--)}0<C$zui.length?(C$zup.uploadData(),C$zue._assembler._ia._count=6*C$zui.length):this.active||this.readyToPlay||(this.finished=!0,C$zue._finishedSimulation())},C$zue.exports=C$zuzA1},{"../core/platform/js":209,"../core/utils/affine-transform":254,"../core/utils/misc":264}],299:[function(C$zut,C$zue,C$zus){"use strict";var C$zui=_interopRequireDefault(C$zut("../core/renderer/assembler"));var C$zur=_interopRequireDefault(C$zut("../renderer/core/input-assembler"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zun=C$zut("./CCParticleSystem");var C$zua=C$zut("../core/renderer/");var C$zuc=C$zut("../core/renderer/webgl/quad-buffer");var C$zuo=C$zut("../core/renderer/webgl/vertex-format").vfmtPosUvColor;C$zut=function(C$zue){var C$zut;C$zut=C$zue,(C$zui=ParticleAssembler).prototype=Object.create(C$zut.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zut;_createSuper(ParticleAssembler);function ParticleAssembler(C$zut){return(C$zut=C$zue.call(this,C$zut)||this)._buffer=null,C$zut._ia=null,C$zut._vfmt=C$zuo,C$zut}var C$zui=ParticleAssembler.prototype;return C$zui.getBuffer=function(){return this._buffer||(this._buffer=new C$zuc(C$zua._handle,C$zuo),this._ia=new C$zur.default,this._ia._vertexBuffer=this._buffer._vb,this._ia._indexBuffer=this._buffer._ib,this._ia._start=0,this._ia._count=0),this._buffer},C$zui.fillBuffers=function(C$zut,C$zue){this._ia&&(C$zue.node=C$zut.node,C$zue.material=C$zut._materials[0],C$zue._flushIA(this._ia))},ParticleAssembler}(C$zui.default);C$zui.default.register(C$zun,C$zut),C$zue.exports=C$zut},{"../core/renderer/":220,"../core/renderer/assembler":217,"../core/renderer/webgl/quad-buffer":249,"../core/renderer/webgl/vertex-format":252,"../renderer/core/input-assembler":302,"./CCParticleSystem":295}],300:[function(C$zuh,C$zuu,C$zu_){"use strict";var C$zud=512,C$zuf=513,C$zup=514,C$zum=515,C$zuv=516,C$zuy=517,C$zug=518,C$zub=519,C$zuC=32774,C$zux=32778,C$zuA=32779,C$zuS=0,C$zuT=1,C$zuw=768,C$zuE=769,C$zuP=774,C$zuM=775,C$zuR=770,C$zuI=771,C$zuB=772,C$zuD=773,C$zuL=32769,C$zuV=32770,C$zuO=32771,C$zuF=32772,C$zuN=776,C$zuk=7680,C$zuz=7681,C$zuG=7682,C$zuU=34055,C$zuW=7683,C$zuH=34056,C$zuj=5386,C$zuX=0,C$zuq=1028,C$zuJ=1029;var C$zue;var C$zui;(C$zuo={})[C$zuo.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",C$zuo[C$zuo.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",C$zuo[C$zuo.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",C$zuo[C$zuo.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",C$zuo[C$zuo.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",C$zuo[C$zuo.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",C$zuo[C$zuo.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",C$zuo[C$zuo.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",C$zuo[C$zuo.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",C$zuo[C$zuo.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",C$zuo[C$zuo.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",C$zuo[C$zuo.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",C$zuo[C$zuo.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",(C$zuo=C$zue=C$zue||{})[C$zuo.UNKNOWN=0]="UNKNOWN",C$zuo[C$zuo.BUFFER=1]="BUFFER",C$zuo[C$zuo.TEXTURE=2]="TEXTURE",C$zuo[C$zuo.TEXTURE_VIEW=3]="TEXTURE_VIEW",C$zuo[C$zuo.RENDER_PASS=4]="RENDER_PASS",C$zuo[C$zuo.FRAMEBUFFER=5]="FRAMEBUFFER",C$zuo[C$zuo.SAMPLER=6]="SAMPLER",C$zuo[C$zuo.SHADER=7]="SHADER",C$zuo[C$zuo.PIPELINE_LAYOUT=8]="PIPELINE_LAYOUT",C$zuo[C$zuo.PIPELINE_STATE=9]="PIPELINE_STATE",C$zuo[C$zuo.BINDING_LAYOUT=10]="BINDING_LAYOUT",C$zuo[C$zuo.INPUT_ASSEMBLER=11]="INPUT_ASSEMBLER",C$zuo[C$zuo.COMMAND_ALLOCATOR=12]="COMMAND_ALLOCATOR",C$zuo[C$zuo.COMMAND_BUFFER=13]="COMMAND_BUFFER",C$zuo[C$zuo.QUEUE=14]="QUEUE",C$zuo[C$zuo.WINDOW=15]="WINDOW",(C$zuo=C$zui=C$zui||{})[C$zuo.UNREADY=0]="UNREADY",C$zuo[C$zuo.FAILED=1]="FAILED",C$zuo[C$zuo.SUCCESS=2]="SUCCESS";Object.defineProperty(GFXObject.prototype,"gfxType",{get:function(){return this._gfxType},enumerable:!0,configurable:!0}),Object.defineProperty(GFXObject.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});function GFXObject(C$zut){this._gfxType=C$zue.UNKNOWN,this._status=C$zui.UNREADY,this._gfxType=C$zut}var C$zur;var C$zut;var C$zun;(C$zuo={}).ATTR_POSITION="a_position",C$zuo.ATTR_NORMAL="a_normal",C$zuo.ATTR_TANGENT="a_tangent",C$zuo.ATTR_BITANGENT="a_bitangent",C$zuo.ATTR_WEIGHTS="a_weights",C$zuo.ATTR_JOINTS="a_joints",C$zuo.ATTR_COLOR="a_color",C$zuo.ATTR_COLOR1="a_color1",C$zuo.ATTR_COLOR2="a_color2",C$zuo.ATTR_TEX_COORD="a_texCoord",C$zuo.ATTR_TEX_COORD1="a_texCoord1",C$zuo.ATTR_TEX_COORD2="a_texCoord2",C$zuo.ATTR_TEX_COORD3="a_texCoord3",C$zuo.ATTR_TEX_COORD4="a_texCoord4",C$zuo.ATTR_TEX_COORD5="a_texCoord5",C$zuo.ATTR_TEX_COORD6="a_texCoord6",C$zuo.ATTR_TEX_COORD7="a_texCoord7",C$zuo.ATTR_TEX_COORD8="a_texCoord8",(C$zuo=C$zur=C$zur||{})[C$zuo.UNKNOWN=0]="UNKNOWN",C$zuo[C$zuo.BOOL=1]="BOOL",C$zuo[C$zuo.BOOL2=2]="BOOL2",C$zuo[C$zuo.BOOL3=3]="BOOL3",C$zuo[C$zuo.BOOL4=4]="BOOL4",C$zuo[C$zuo.INT=5]="INT",C$zuo[C$zuo.INT2=6]="INT2",C$zuo[C$zuo.INT3=7]="INT3",C$zuo[C$zuo.INT4=8]="INT4",C$zuo[C$zuo.UINT=9]="UINT",C$zuo[C$zuo.UINT2=10]="UINT2",C$zuo[C$zuo.UINT3=11]="UINT3",C$zuo[C$zuo.UINT4=12]="UINT4",C$zuo[C$zuo.FLOAT=13]="FLOAT",C$zuo[C$zuo.FLOAT2=14]="FLOAT2",C$zuo[C$zuo.FLOAT3=15]="FLOAT3",C$zuo[C$zuo.FLOAT4=16]="FLOAT4",C$zuo[C$zuo.COLOR4=17]="COLOR4",C$zuo[C$zuo.MAT2=18]="MAT2",C$zuo[C$zuo.MAT2X3=19]="MAT2X3",C$zuo[C$zuo.MAT2X4=20]="MAT2X4",C$zuo[C$zuo.MAT3X2=21]="MAT3X2",C$zuo[C$zuo.MAT3=22]="MAT3",C$zuo[C$zuo.MAT3X4=23]="MAT3X4",C$zuo[C$zuo.MAT4X2=24]="MAT4X2",C$zuo[C$zuo.MAT4X3=25]="MAT4X3",C$zuo[C$zuo.MAT4=26]="MAT4",C$zuo[C$zuo.SAMPLER1D=27]="SAMPLER1D",C$zuo[C$zuo.SAMPLER1D_ARRAY=28]="SAMPLER1D_ARRAY",C$zuo[C$zuo.SAMPLER2D=29]="SAMPLER2D",C$zuo[C$zuo.SAMPLER2D_ARRAY=30]="SAMPLER2D_ARRAY",C$zuo[C$zuo.SAMPLER3D=31]="SAMPLER3D",C$zuo[C$zuo.SAMPLER_CUBE=32]="SAMPLER_CUBE",C$zuo[C$zuo.COUNT=33]="COUNT",(C$zuo=C$zuc=C$zuc||{})[C$zuo.UNKNOWN=0]="UNKNOWN",C$zuo[C$zuo.A8=1]="A8",C$zuo[C$zuo.L8=2]="L8",C$zuo[C$zuo.LA8=3]="LA8",C$zuo[C$zuo.R8=4]="R8",C$zuo[C$zuo.R8SN=5]="R8SN",C$zuo[C$zuo.R8UI=6]="R8UI",C$zuo[C$zuo.R8I=7]="R8I",C$zuo[C$zuo.R16F=8]="R16F",C$zuo[C$zuo.R16UI=9]="R16UI",C$zuo[C$zuo.R16I=10]="R16I",C$zuo[C$zuo.R32F=11]="R32F",C$zuo[C$zuo.R32UI=12]="R32UI",C$zuo[C$zuo.R32I=13]="R32I",C$zuo[C$zuo.RG8=14]="RG8",C$zuo[C$zuo.RG8SN=15]="RG8SN",C$zuo[C$zuo.RG8UI=16]="RG8UI",C$zuo[C$zuo.RG8I=17]="RG8I",C$zuo[C$zuo.RG16F=18]="RG16F",C$zuo[C$zuo.RG16UI=19]="RG16UI",C$zuo[C$zuo.RG16I=20]="RG16I",C$zuo[C$zuo.RG32F=21]="RG32F",C$zuo[C$zuo.RG32UI=22]="RG32UI",C$zuo[C$zuo.RG32I=23]="RG32I",C$zuo[C$zuo.RGB8=24]="RGB8",C$zuo[C$zuo.SRGB8=25]="SRGB8",C$zuo[C$zuo.RGB8SN=26]="RGB8SN",C$zuo[C$zuo.RGB8UI=27]="RGB8UI",C$zuo[C$zuo.RGB8I=28]="RGB8I",C$zuo[C$zuo.RGB16F=29]="RGB16F",C$zuo[C$zuo.RGB16UI=30]="RGB16UI",C$zuo[C$zuo.RGB16I=31]="RGB16I",C$zuo[C$zuo.RGB32F=32]="RGB32F",C$zuo[C$zuo.RGB32UI=33]="RGB32UI",C$zuo[C$zuo.RGB32I=34]="RGB32I",C$zuo[C$zuo.RGBA8=35]="RGBA8",C$zuo[C$zuo.SRGB8_A8=36]="SRGB8_A8",C$zuo[C$zuo.RGBA8SN=37]="RGBA8SN",C$zuo[C$zuo.RGBA8UI=38]="RGBA8UI",C$zuo[C$zuo.RGBA8I=39]="RGBA8I",C$zuo[C$zuo.RGBA16F=40]="RGBA16F",C$zuo[C$zuo.RGBA16UI=41]="RGBA16UI",C$zuo[C$zuo.RGBA16I=42]="RGBA16I",C$zuo[C$zuo.RGBA32F=43]="RGBA32F",C$zuo[C$zuo.RGBA32UI=44]="RGBA32UI",C$zuo[C$zuo.RGBA32I=45]="RGBA32I",C$zuo[C$zuo.R5G6B5=46]="R5G6B5",C$zuo[C$zuo.R11G11B10F=47]="R11G11B10F",C$zuo[C$zuo.RGB5A1=48]="RGB5A1",C$zuo[C$zuo.RGBA4=49]="RGBA4",C$zuo[C$zuo.RGB10A2=50]="RGB10A2",C$zuo[C$zuo.RGB10A2UI=51]="RGB10A2UI",C$zuo[C$zuo.RGB9E5=52]="RGB9E5",C$zuo[C$zuo.D16=53]="D16",C$zuo[C$zuo.D16S8=54]="D16S8",C$zuo[C$zuo.D24=55]="D24",C$zuo[C$zuo.D24S8=56]="D24S8",C$zuo[C$zuo.D32F=57]="D32F",C$zuo[C$zuo.D32F_S8=58]="D32F_S8",C$zuo[C$zuo.BC1=59]="BC1",C$zuo[C$zuo.BC1_ALPHA=60]="BC1_ALPHA",C$zuo[C$zuo.BC1_SRGB=61]="BC1_SRGB",C$zuo[C$zuo.BC1_SRGB_ALPHA=62]="BC1_SRGB_ALPHA",C$zuo[C$zuo.BC2=63]="BC2",C$zuo[C$zuo.BC2_SRGB=64]="BC2_SRGB",C$zuo[C$zuo.BC3=65]="BC3",C$zuo[C$zuo.BC3_SRGB=66]="BC3_SRGB",C$zuo[C$zuo.BC4=67]="BC4",C$zuo[C$zuo.BC4_SNORM=68]="BC4_SNORM",C$zuo[C$zuo.BC5=69]="BC5",C$zuo[C$zuo.BC5_SNORM=70]="BC5_SNORM",C$zuo[C$zuo.BC6H_UF16=71]="BC6H_UF16",C$zuo[C$zuo.BC6H_SF16=72]="BC6H_SF16",C$zuo[C$zuo.BC7=73]="BC7",C$zuo[C$zuo.BC7_SRGB=74]="BC7_SRGB",C$zuo[C$zuo.ETC_RGB8=75]="ETC_RGB8",C$zuo[C$zuo.ETC2_RGB8=76]="ETC2_RGB8",C$zuo[C$zuo.ETC2_SRGB8=77]="ETC2_SRGB8",C$zuo[C$zuo.ETC2_RGB8_A1=78]="ETC2_RGB8_A1",C$zuo[C$zuo.ETC2_SRGB8_A1=79]="ETC2_SRGB8_A1",C$zuo[C$zuo.ETC2_RGBA8=80]="ETC2_RGBA8",C$zuo[C$zuo.ETC2_SRGB8_A8=81]="ETC2_SRGB8_A8",C$zuo[C$zuo.EAC_R11=82]="EAC_R11",C$zuo[C$zuo.EAC_R11SN=83]="EAC_R11SN",C$zuo[C$zuo.EAC_RG11=84]="EAC_RG11",C$zuo[C$zuo.EAC_RG11SN=85]="EAC_RG11SN",C$zuo[C$zuo.PVRTC_RGB2=86]="PVRTC_RGB2",C$zuo[C$zuo.PVRTC_RGBA2=87]="PVRTC_RGBA2",C$zuo[C$zuo.PVRTC_RGB4=88]="PVRTC_RGB4",C$zuo[C$zuo.PVRTC_RGBA4=89]="PVRTC_RGBA4",C$zuo[C$zuo.PVRTC2_2BPP=90]="PVRTC2_2BPP",C$zuo[C$zuo.PVRTC2_4BPP=91]="PVRTC2_4BPP",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.TRANSFER_SRC=1]="TRANSFER_SRC",C$zuo[C$zuo.TRANSFER_DST=2]="TRANSFER_DST",C$zuo[C$zuo.INDEX=4]="INDEX",C$zuo[C$zuo.VERTEX=8]="VERTEX",C$zuo[C$zuo.UNIFORM=16]="UNIFORM",C$zuo[C$zuo.STORAGE=32]="STORAGE",C$zuo[C$zuo.INDIRECT=64]="INDIRECT",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.DEVICE=1]="DEVICE",C$zuo[C$zuo.HOST=2]="HOST",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.READ=1]="READ",C$zuo[C$zuo.WRITE=2]="WRITE",(C$zuo={})[C$zuo.POINT_LIST=0]="POINT_LIST",C$zuo[C$zuo.LINE_LIST=1]="LINE_LIST",C$zuo[C$zuo.LINE_STRIP=2]="LINE_STRIP",C$zuo[C$zuo.LINE_LOOP=3]="LINE_LOOP",C$zuo[C$zuo.LINE_LIST_ADJACENCY=4]="LINE_LIST_ADJACENCY",C$zuo[C$zuo.LINE_STRIP_ADJACENCY=5]="LINE_STRIP_ADJACENCY",C$zuo[C$zuo.ISO_LINE_LIST=6]="ISO_LINE_LIST",C$zuo[C$zuo.TRIANGLE_LIST=7]="TRIANGLE_LIST",C$zuo[C$zuo.TRIANGLE_STRIP=8]="TRIANGLE_STRIP",C$zuo[C$zuo.TRIANGLE_FAN=9]="TRIANGLE_FAN",C$zuo[C$zuo.TRIANGLE_LIST_ADJACENCY=10]="TRIANGLE_LIST_ADJACENCY",C$zuo[C$zuo.TRIANGLE_STRIP_ADJACENCY=11]="TRIANGLE_STRIP_ADJACENCY",C$zuo[C$zuo.TRIANGLE_PATCH_ADJACENCY=12]="TRIANGLE_PATCH_ADJACENCY",C$zuo[C$zuo.QUAD_PATCH_LIST=13]="QUAD_PATCH_LIST",(C$zuo={})[C$zuo.FILL=0]="FILL",C$zuo[C$zuo.POINT=1]="POINT",C$zuo[C$zuo.LINE=2]="LINE",(C$zuo={})[C$zuo.GOURAND=0]="GOURAND",C$zuo[C$zuo.FLAT=1]="FLAT",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.FRONT=1]="FRONT",C$zuo[C$zuo.BACK=2]="BACK",(C$zuo={})[C$zuo.NEVER=0]="NEVER",C$zuo[C$zuo.LESS=1]="LESS",C$zuo[C$zuo.EQUAL=2]="EQUAL",C$zuo[C$zuo.LESS_EQUAL=3]="LESS_EQUAL",C$zuo[C$zuo.GREATER=4]="GREATER",C$zuo[C$zuo.NOT_EQUAL=5]="NOT_EQUAL",C$zuo[C$zuo.GREATER_EQUAL=6]="GREATER_EQUAL",C$zuo[C$zuo.ALWAYS=7]="ALWAYS",(C$zuo={})[C$zuo.ZERO=0]="ZERO",C$zuo[C$zuo.KEEP=1]="KEEP",C$zuo[C$zuo.REPLACE=2]="REPLACE",C$zuo[C$zuo.INCR=3]="INCR",C$zuo[C$zuo.DECR=4]="DECR",C$zuo[C$zuo.INVERT=5]="INVERT",C$zuo[C$zuo.INCR_WRAP=6]="INCR_WRAP",C$zuo[C$zuo.DECR_WRAP=7]="DECR_WRAP",(C$zuo={})[C$zuo.ADD=0]="ADD",C$zuo[C$zuo.SUB=1]="SUB",C$zuo[C$zuo.REV_SUB=2]="REV_SUB",C$zuo[C$zuo.MIN=3]="MIN",C$zuo[C$zuo.MAX=4]="MAX",(C$zuo={})[C$zuo.ZERO=0]="ZERO",C$zuo[C$zuo.ONE=1]="ONE",C$zuo[C$zuo.SRC_ALPHA=2]="SRC_ALPHA",C$zuo[C$zuo.DST_ALPHA=3]="DST_ALPHA",C$zuo[C$zuo.ONE_MINUS_SRC_ALPHA=4]="ONE_MINUS_SRC_ALPHA",C$zuo[C$zuo.ONE_MINUS_DST_ALPHA=5]="ONE_MINUS_DST_ALPHA",C$zuo[C$zuo.SRC_COLOR=6]="SRC_COLOR",C$zuo[C$zuo.DST_COLOR=7]="DST_COLOR",C$zuo[C$zuo.ONE_MINUS_SRC_COLOR=8]="ONE_MINUS_SRC_COLOR",C$zuo[C$zuo.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",C$zuo[C$zuo.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",C$zuo[C$zuo.CONSTANT_COLOR=11]="CONSTANT_COLOR",C$zuo[C$zuo.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",C$zuo[C$zuo.CONSTANT_ALPHA=13]="CONSTANT_ALPHA",C$zuo[C$zuo.ONE_MINUS_CONSTANT_ALPHA=14]="ONE_MINUS_CONSTANT_ALPHA",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.R=1]="R",C$zuo[C$zuo.G=2]="G",C$zuo[C$zuo.B=4]="B",C$zuo[C$zuo.A=8]="A",C$zuo[C$zuo.ALL=15]="ALL",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.POINT=1]="POINT",C$zuo[C$zuo.LINEAR=2]="LINEAR",C$zuo[C$zuo.ANISOTROPIC=3]="ANISOTROPIC",(C$zuo={})[C$zuo.WRAP=0]="WRAP",C$zuo[C$zuo.MIRROR=1]="MIRROR",C$zuo[C$zuo.CLAMP=2]="CLAMP",C$zuo[C$zuo.BORDER=3]="BORDER",(C$zuo={})[C$zuo.TEX1D=0]="TEX1D",C$zuo[C$zuo.TEX2D=1]="TEX2D",C$zuo[C$zuo.TEX3D=2]="TEX3D",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.TRANSFER_SRC=1]="TRANSFER_SRC",C$zuo[C$zuo.TRANSFER_DST=2]="TRANSFER_DST",C$zuo[C$zuo.SAMPLED=4]="SAMPLED",C$zuo[C$zuo.STORAGE=8]="STORAGE",C$zuo[C$zuo.COLOR_ATTACHMENT=16]="COLOR_ATTACHMENT",C$zuo[C$zuo.DEPTH_STENCIL_ATTACHMENT=32]="DEPTH_STENCIL_ATTACHMENT",C$zuo[C$zuo.TRANSIENT_ATTACHMENT=64]="TRANSIENT_ATTACHMENT",C$zuo[C$zuo.INPUT_ATTACHMENT=128]="INPUT_ATTACHMENT",(C$zuo={})[C$zuo.X1=0]="X1",C$zuo[C$zuo.X2=1]="X2",C$zuo[C$zuo.X4=2]="X4",C$zuo[C$zuo.X8=3]="X8",C$zuo[C$zuo.X16=4]="X16",C$zuo[C$zuo.X32=5]="X32",C$zuo[C$zuo.X64=6]="X64",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.GEN_MIPMAP=1]="GEN_MIPMAP",C$zuo[C$zuo.CUBEMAP=2]="CUBEMAP",C$zuo[C$zuo.BAKUP_BUFFER=4]="BAKUP_BUFFER",(C$zuo={})[C$zuo.TV1D=0]="TV1D",C$zuo[C$zuo.TV2D=1]="TV2D",C$zuo[C$zuo.TV3D=2]="TV3D",C$zuo[C$zuo.CUBE=3]="CUBE",C$zuo[C$zuo.TV1D_ARRAY=4]="TV1D_ARRAY",C$zuo[C$zuo.TV2D_ARRAY=5]="TV2D_ARRAY",(C$zuo={})[C$zuo.VERTEX=0]="VERTEX",C$zuo[C$zuo.HULL=1]="HULL",C$zuo[C$zuo.DOMAIN=2]="DOMAIN",C$zuo[C$zuo.GEOMETRY=3]="GEOMETRY",C$zuo[C$zuo.FRAGMENT=4]="FRAGMENT",C$zuo[C$zuo.COMPUTE=5]="COMPUTE",C$zuo[C$zuo.COUNT=6]="COUNT",(C$zuo={})[C$zuo.UNKNOWN=0]="UNKNOWN",C$zuo[C$zuo.UNIFORM_BUFFER=1]="UNIFORM_BUFFER",C$zuo[C$zuo.SAMPLER=2]="SAMPLER",C$zuo[C$zuo.STORAGE_BUFFER=3]="STORAGE_BUFFER",(C$zuo={})[C$zuo.PRIMARY=0]="PRIMARY",C$zuo[C$zuo.SECONDARY=1]="SECONDARY",(C$zuo={})[C$zuo.LOAD=0]="LOAD",C$zuo[C$zuo.CLEAR=1]="CLEAR",C$zuo[C$zuo.DISCARD=2]="DISCARD",(C$zuo={})[C$zuo.STORE=0]="STORE",C$zuo[C$zuo.DISCARD=1]="DISCARD",(C$zuo={})[C$zuo.UNDEFINED=0]="UNDEFINED",C$zuo[C$zuo.GENERAL=1]="GENERAL",C$zuo[C$zuo.COLOR_ATTACHMENT_OPTIMAL=2]="COLOR_ATTACHMENT_OPTIMAL",C$zuo[C$zuo.DEPTH_STENCIL_ATTACHMENT_OPTIMAL=3]="DEPTH_STENCIL_ATTACHMENT_OPTIMAL",C$zuo[C$zuo.DEPTH_STENCIL_READONLY_OPTIMAL=4]="DEPTH_STENCIL_READONLY_OPTIMAL",C$zuo[C$zuo.SHADER_READONLY_OPTIMAL=5]="SHADER_READONLY_OPTIMAL",C$zuo[C$zuo.TRANSFER_SRC_OPTIMAL=6]="TRANSFER_SRC_OPTIMAL",C$zuo[C$zuo.TRANSFER_DST_OPTIMAL=7]="TRANSFER_DST_OPTIMAL",C$zuo[C$zuo.PREINITIALIZED=8]="PREINITIALIZED",C$zuo[C$zuo.PRESENT_SRC=9]="PRESENT_SRC",(C$zuo={})[C$zuo.GRAPHICS=0]="GRAPHICS",C$zuo[C$zuo.COMPUTE=1]="COMPUTE",C$zuo[C$zuo.RAY_TRACING=2]="RAY_TRACING",(C$zuo={})[C$zuo.VIEWPORT=0]="VIEWPORT",C$zuo[C$zuo.SCISSOR=1]="SCISSOR",C$zuo[C$zuo.LINE_WIDTH=2]="LINE_WIDTH",C$zuo[C$zuo.DEPTH_BIAS=3]="DEPTH_BIAS",C$zuo[C$zuo.BLEND_CONSTANTS=4]="BLEND_CONSTANTS",C$zuo[C$zuo.DEPTH_BOUNDS=5]="DEPTH_BOUNDS",C$zuo[C$zuo.STENCIL_WRITE_MASK=6]="STENCIL_WRITE_MASK",C$zuo[C$zuo.STENCIL_COMPARE_MASK=7]="STENCIL_COMPARE_MASK",(C$zuo={})[C$zuo.FRONT=0]="FRONT",C$zuo[C$zuo.BACK=1]="BACK",C$zuo[C$zuo.ALL=2]="ALL",(C$zuo={})[C$zuo.GRAPHICS=0]="GRAPHICS",C$zuo[C$zuo.COMPUTE=1]="COMPUTE",C$zuo[C$zuo.TRANSFER=2]="TRANSFER",(C$zuo={})[C$zuo.NONE=0]="NONE",C$zuo[C$zuo.COLOR=1]="COLOR",C$zuo[C$zuo.DEPTH=2]="DEPTH",C$zuo[C$zuo.STENCIL=4]="STENCIL",C$zuo[C$zuo.DEPTH_STENCIL=6]="DEPTH_STENCIL",C$zuo[C$zuo.ALL=7]="ALL",C$zut=C$zut||{},C$zut[C$zut.DEFAULT=100]="DEFAULT",(C$zuo=C$zun=C$zun||{})[C$zuo.MIN=0]="MIN",C$zuo[C$zuo.MAX=255]="MAX",C$zuo[C$zuo.DEFAULT=128]="DEFAULT";var C$zua;var C$zuY;(C$zuo=C$zua=C$zua||{})[C$zuo.UBO_GLOBAL=23]="UBO_GLOBAL",C$zuo[C$zuo.UBO_SHADOW=22]="UBO_SHADOW",C$zuo[C$zuo.UBO_LOCAL=21]="UBO_LOCAL",C$zuo[C$zuo.UBO_FORWARD_LIGHTS=20]="UBO_FORWARD_LIGHTS",C$zuo[C$zuo.UBO_SKINNING=19]="UBO_SKINNING",C$zuo[C$zuo.UBO_SKINNING_TEXTURE=18]="UBO_SKINNING_TEXTURE",C$zuo[C$zuo.UBO_UI=17]="UBO_UI",C$zuo[C$zuo.SAMPLER_JOINTS=25]="SAMPLER_JOINTS",C$zuo[C$zuo.SAMPLER_ENVIRONMENT=26]="SAMPLER_ENVIRONMENT",C$zuo[C$zuo.CUSTUM_UBO_BINDING_END_POINT=17]="CUSTUM_UBO_BINDING_END_POINT",C$zuo[C$zuo.CUSTOM_SAMPLER_BINDING_START_POINT=30]="CUSTOM_SAMPLER_BINDING_START_POINT",(C$zuo=C$zuY=C$zuY||{})[C$zuo.minFilter=0]="minFilter",C$zuo[C$zuo.magFilter=1]="magFilter",C$zuo[C$zuo.mipFilter=2]="mipFilter",C$zuo[C$zuo.addressU=3]="addressU",C$zuo[C$zuo.addressV=4]="addressV",C$zuo[C$zuo.addressW=5]="addressW",C$zuo[C$zuo.maxAnisotropy=6]="maxAnisotropy",C$zuo[C$zuo.cmpFunc=7]="cmpFunc",C$zuo[C$zuo.minLOD=8]="minLOD",C$zuo[C$zuo.maxLOD=9]="maxLOD",C$zuo[C$zuo.mipLODBias=10]="mipLODBias",C$zuo[C$zuo.borderColor=11]="borderColor",C$zuo[C$zuo.total=15]="total";var C$zuo={};C$zuo[C$zuo.bool=C$zur.BOOL]="bool",C$zuo[C$zuo.int=C$zur.INT]="int",C$zuo[C$zuo.ivec2=C$zur.INT2]="ivec2invTypeParams",C$zuo[C$zuo.ivec3=C$zur.INT3]="ivec3",C$zuo[C$zuo.ivec4=C$zur.INT4]="ivec4",C$zuo[C$zuo.float=C$zur.FLOAT]="float",C$zuo[C$zuo.vec2=C$zur.FLOAT2]="vec2",C$zuo[C$zuo.vec3=C$zur.FLOAT3]="vec3",C$zuo[C$zuo.vec4=C$zur.FLOAT4]="vec4",C$zuo[C$zuo.mat2=C$zur.MAT2]="mat2",C$zuo[C$zuo.mat3=C$zur.MAT3]="mat3",C$zuo[C$zuo.mat4=C$zur.MAT4]="mat4",C$zuo[C$zuo.sampler2D=C$zur.SAMPLER2D]="sampler2D",C$zuo[C$zuo.samplerCube=C$zur.SAMPLER_CUBE]="samplerCube";(C$zus={})[C$zur.BOOL]=4,C$zus[C$zur.INT]=4,C$zus[C$zur.INT2]=8,C$zus[C$zur.INT3]=12,C$zus[C$zur.INT4]=16,C$zus[C$zur.FLOAT]=4,C$zus[C$zur.FLOAT2]=8,C$zus[C$zur.FLOAT3]=12,C$zus[C$zur.FLOAT4]=16,C$zus[C$zur.MAT2]=16,C$zus[C$zur.MAT3]=36,C$zus[C$zur.MAT4]=64,C$zus[C$zur.SAMPLER2D]=4,C$zus[C$zur.SAMPLER_CUBE]=4;var C$zus;(C$zul={})[C$zur.BOOL]=C$zuc.R32I,C$zul[C$zur.INT]=C$zuc.R32I,C$zul[C$zur.INT2]=C$zuc.RG32I,C$zul[C$zur.INT3]=C$zuc.RGB32I,C$zul[C$zur.INT4]=C$zuc.RGBA32I,C$zul[C$zur.FLOAT]=C$zuc.R32F,C$zul[C$zur.FLOAT2]=C$zuc.RG32F,C$zul[C$zur.FLOAT3]=C$zuc.RGB32F,C$zul[C$zur.FLOAT4]=C$zuc.RGBA32F;var C$zuc=C$zul;var C$zul={BACK:C$zuJ,FRONT:C$zuq,NONE:C$zuX,ADD:C$zuC,SUB:C$zux,REV_SUB:C$zuA,ZERO:C$zuS,ONE:C$zuT,SRC_COLOR:C$zuw,ONE_MINUS_SRC_COLOR:C$zuE,DST_COLOR:C$zuP,ONE_MINUS_DST_COLOR:C$zuM,SRC_ALPHA:C$zuR,ONE_MINUS_SRC_ALPHA:C$zuI,DST_ALPHA:C$zuB,ONE_MINUS_DST_ALPHA:C$zuD,CONSTANT_COLOR:C$zuL,ONE_MINUS_CONSTANT_COLOR:C$zuV,CONSTANT_ALPHA:C$zuO,ONE_MINUS_CONSTANT_ALPHA:C$zuF,SRC_ALPHA_SATURATE:C$zuN,NEVER:C$zud,LESS:C$zuf,EQUAL:C$zup,LEQUAL:C$zum,GREATER:C$zuv,NOTEQUAL:C$zuy,GEQUAL:C$zug,ALWAYS:C$zub,KEEP:C$zuk,REPLACE:C$zuz,INCR:C$zuG,INCR_WRAP:C$zuU,DECR:C$zuW,DECR_WRAP:C$zuH,INVERT:C$zuj};Object.assign(C$zul,C$zut);C$zuu.exports={murmurhash2_32_gc:function(C$zut,C$zue){var C$zui,C$zur=C$zut.length,C$zun=C$zue^C$zur,C$zua=0;for(;4<=C$zur;)C$zui=1540483477*(65535&(C$zui=255&C$zut.charCodeAt(C$zua)|(255&C$zut.charCodeAt(++C$zua))<<8|(255&C$zut.charCodeAt(++C$zua))<<16|(255&C$zut.charCodeAt(++C$zua))<<24))+((1540483477*(C$zui>>>16)&65535)<<16),C$zun=1540483477*(65535&C$zun)+((1540483477*(C$zun>>>16)&65535)<<16)^1540483477*(65535&(C$zui^=C$zui>>>24))+((1540483477*(C$zui>>>16)&65535)<<16),C$zur-=4,++C$zua;switch(C$zur){case 3:C$zun^=(255&C$zut.charCodeAt(C$zua+2))<<16;case 2:C$zun^=(255&C$zut.charCodeAt(C$zua+1))<<8;case 1:C$zun=1540483477*(65535&(C$zun^=255&C$zut.charCodeAt(C$zua)))+((1540483477*(C$zun>>>16)&65535)<<16)}return C$zun=1540483477*(65535&(C$zun^=C$zun>>>13))+((1540483477*(C$zun>>>16)&65535)<<16),(C$zun^=C$zun>>>15)>>>0},SamplerInfoIndex:C$zuY,effectStructure:{$techniques:[{$passes:[{depthStencilState:{},rasterizerState:{},blendState:{targets:[{}]},properties:{any:{sampler:{},inspector:{}}}}]}]},typeMap:C$zuo,sizeMap:C$zus,formatMap:C$zuc,passParams:C$zul,RenderQueue:{OPAQUE:0,TRANSPARENT:1,OVERLAY:2},RenderPriority:C$zun,GFXGetTypeSize:function(C$zut){switch(C$zut){case C$zur.BOOL:case C$zur.INT:case C$zur.UINT:case C$zur.FLOAT:return 4;case C$zur.BOOL2:case C$zur.INT2:case C$zur.UINT2:case C$zur.FLOAT2:return 8;case C$zur.BOOL3:case C$zur.INT3:case C$zur.UINT3:case C$zur.FLOAT3:return 12;case C$zur.BOOL4:case C$zur.INT4:case C$zur.UINT4:case C$zur.FLOAT4:case C$zur.MAT2:return 16;case C$zur.MAT2X3:return 24;case C$zur.MAT2X4:return 32;case C$zur.MAT3X2:return 24;case C$zur.MAT3:return 36;case C$zur.MAT3X4:return 48;case C$zur.MAT4X2:case C$zur.MAT4X2:return 32;case C$zur.MAT4:return 64;case C$zur.SAMPLER1D:case C$zur.SAMPLER1D_ARRAY:case C$zur.SAMPLER2D:case C$zur.SAMPLER2D_ARRAY:case C$zur.SAMPLER3D:case C$zur.SAMPLER_CUBE:return 4;default:return 0}},UniformBinding:C$zua}},{}],301:[function(C$zut,C$zur,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zui=C$zut("../memop");var C$zuv=_interopRequireDefault(C$zut("../enums"));var C$zuy=C$zut("../../core/value-types");var C$zun=_interopRequireDefault(C$zut("./program-lib"));var C$zua=_interopRequireDefault(C$zut("./view"));var C$zux=_interopRequireDefault(C$zut("../gfx"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}var C$zum=new C$zuy.Mat4;var C$zug=new C$zui.RecyclePool(function(){return{stage:null,items:null}},8);var C$zuA=new C$zui.RecyclePool(function(){return new Float32Array(2)},8);var C$zuS=new C$zui.RecyclePool(function(){return new Float32Array(3)},8);var C$zuT=new C$zui.RecyclePool(function(){return new Float32Array(4)},8);var C$zuw=new C$zui.RecyclePool(function(){return new Float32Array(9)},8);var C$zub=new C$zui.RecyclePool(function(){return new Float32Array(16)},8);var C$zuE=new C$zui.RecyclePool(function(){return new Float32Array(64)},8);var C$zuP=new C$zui.RecyclePool(function(){return new Int32Array(2)},8);var C$zuM=new C$zui.RecyclePool(function(){return new Int32Array(3)},8);var C$zuR=new C$zui.RecyclePool(function(){return new Int32Array(4)},8);var C$zuC=new C$zui.RecyclePool(function(){return new Int32Array(64)},8);function Base(C$zut,C$zue){this._device=C$zut,this._programLib=new C$zun.default(C$zut),this._opts=C$zue,this._type2defaultValue=((C$zut={})[C$zuv.default.PARAM_INT]=0,C$zut[C$zuv.default.PARAM_INT2]=new C$zuy.Vec2(0,0),C$zut[C$zuv.default.PARAM_INT3]=new C$zuy.Vec3(0,0,0),C$zut[C$zuv.default.PARAM_INT4]=new C$zuy.Vec4(0,0,0,0),C$zut[C$zuv.default.PARAM_FLOAT]=0,C$zut[C$zuv.default.PARAM_FLOAT2]=new C$zuy.Vec2(0,0),C$zut[C$zuv.default.PARAM_FLOAT3]=new C$zuy.Vec3(0,0,0),C$zut[C$zuv.default.PARAM_FLOAT4]=new C$zuy.Vec4(0,0,0,0),C$zut[C$zuv.default.PARAM_COLOR4]=new C$zuy.Color(0,0,0,1),C$zut[C$zuv.default.PARAM_MAT3]=new C$zuy.Mat3,C$zut[C$zuv.default.PARAM_MAT4]=new C$zuy.Mat4,C$zut[C$zuv.default.PARAM_TEXTURE_2D]=C$zue.defaultTexture,C$zut[C$zuv.default.PARAM_TEXTURE_CUBE]=C$zue.defaultTextureCube,C$zut),this._stage2fn={},this._usedTextureUnits=0,this._viewPools=new C$zui.RecyclePool(function(){return new C$zua.default},8),this._drawItemsPools=new C$zui.RecyclePool(function(){return{model:null,node:null,ia:null,effect:null,defines:null,uniforms:null}},100),this._stageItemsPools=new C$zui.RecyclePool(function(){return new C$zui.RecyclePool(function(){return{model:null,node:null,ia:null,effect:null,defines:null,passes:[],sortKey:-1,uniforms:null}},100)},16)}(C$zut=Base.prototype)._resetTextuerUnit=function(){this._usedTextureUnits=0},C$zut._allocTextureUnit=function(){var C$zut=this._device;var C$zue=this._usedTextureUnits;return C$zue>=C$zut._caps.maxTextureUnits&&console.warn("Trying to use "+C$zue+" texture units while this GPU supports only "+C$zut._caps.maxTextureUnits),this._usedTextureUnits+=1,C$zue},C$zut._registerStage=function(C$zut,C$zue){this._stage2fn[C$zut]=C$zue},C$zut.clear=function(){this._programLib.clear(),this.reset()},C$zut.reset=function(){this._viewPools.reset(),this._stageItemsPools.reset()},C$zut._requestView=function(){return this._viewPools.add()},C$zut._render=function(C$zut,C$zuh){var C$zue=this._device;C$zue.setFrameBuffer(C$zut._framebuffer),C$zue.setViewport(C$zut._rect.x,C$zut._rect.y,C$zut._rect.w,C$zut._rect.h);var C$zui={};C$zut._clearFlags&C$zuv.default.CLEAR_COLOR&&(C$zui.color=C$zuy.Vec4.toArray([],C$zut._color)),C$zut._clearFlags&C$zuv.default.CLEAR_DEPTH&&(C$zui.depth=C$zut._depth),C$zut._clearFlags&C$zuv.default.CLEAR_STENCIL&&(C$zui.stencil=C$zut._stencil),C$zue.clear(C$zui),this._drawItemsPools.reset();for(var C$zur=0;C$zur<C$zuh._models.length;++C$zur){var C$zuu=C$zuh._models.data[C$zur];var C$zu_;0!=(C$zuu._cullingMask&C$zut._cullingMask)&&(C$zu_=this._drawItemsPools.add(),C$zuu.extractDrawItem(C$zu_))}C$zug.reset();for(var C$zun=0;C$zun<C$zut._stages.length;++C$zun){var C$zud=C$zut._stages[C$zun];var C$zua=this._stageItemsPools.add();C$zua.reset();for(var C$zuo=0;C$zuo<this._drawItemsPools.length;++C$zuo){var C$zus=this._drawItemsPools.data[C$zuo];var C$zuc=C$zus.effect.stagePasses[C$zud];var C$zul;C$zuc&&0!==C$zuc.length&&((C$zul=C$zua.add()).passes=C$zuc,C$zul.model=C$zus.model,C$zul.node=C$zus.node,C$zul.ia=C$zus.ia,C$zul.effect=C$zus.effect,C$zul.defines=C$zus.defines,C$zul.sortKey=-1,C$zul.uniforms=C$zus.uniforms)}var C$zuf=C$zug.add();C$zuf.stage=C$zud,C$zuf.items=C$zua}for(var C$zup=0;C$zup<C$zug.length;++C$zup){var C$zum=C$zug.data[C$zup];(0,this._stage2fn[C$zum.stage])(C$zut,C$zum.items)}},C$zut._setProperty=function(C$zut){var C$zue=this._device;var C$zui=C$zut.value;if(void 0!==(C$zui=void 0===(C$zui=void 0===C$zui?C$zut.val:C$zui)?this._type2defaultValue[C$zut.type]:C$zui))if(C$zut.type===C$zuv.default.PARAM_TEXTURE_2D||C$zut.type===C$zuv.default.PARAM_TEXTURE_CUBE)if(Array.isArray(C$zui))if(C$zui.length>C$zut.count)console.error("Failed to set property ["+C$zut.name+"] : The length of texture array ["+C$zui.length+"] is bigger than ["+C$zut.count+"].");else{var C$zur=C$zuC.add();for(var C$zun=0;C$zun<C$zui.length;++C$zun)C$zur[C$zun]=this._allocTextureUnit();C$zue.setTextureArray(C$zut.name,C$zui,C$zur)}else C$zue.setTexture(C$zut.name,C$zui,this._allocTextureUnit());else C$zut.directly?C$zue.setUniformDirectly(C$zut.name,C$zui):C$zue.setUniform(C$zut.name,C$zui);else console.warn("Failed to set technique property "+C$zut.name+", value not found.")},C$zut._draw=function(C$zut){var C$zue=this._device;var C$zuh=this._programLib;var C$zuu=C$zut.node,C$zui=C$zut.ia,C$zur=C$zut.passes,C$zu_=C$zut.effect;C$zuA.reset(),C$zuS.reset(),C$zuT.reset(),C$zuw.reset(),C$zub.reset(),C$zuE.reset(),C$zuP.reset(),C$zuM.reset(),C$zuR.reset(),C$zuC.reset(),C$zuu.getWorldMatrix(C$zum),C$zue.setUniform("cc_matWorld",C$zuy.Mat4.toArray(C$zub.add(),C$zum)),C$zuy.Mat4.invert(C$zum,C$zum),C$zuy.Mat4.transpose(C$zum,C$zum),C$zue.setUniform("cc_matWorldIT",C$zuy.Mat4.toArray(C$zub.add(),C$zum));var C$zun=this._defines;for(var C$zua=0;C$zua<C$zur.length;++C$zua){var C$zuo=C$zur[C$zua];var C$zud=C$zui.count;C$zui._vertexBuffer&&C$zue.setVertexBuffer(0,C$zui._vertexBuffer),C$zui._indexBuffer&&C$zue.setIndexBuffer(C$zui._indexBuffer),C$zue.setPrimitiveType(C$zui._primitiveType),Object.setPrototypeOf(C$zun,C$zuo._defines);var C$zus=C$zuh.getProgram(C$zuo._programName,C$zun,C$zu_.name);C$zue.setProgram(C$zus);var C$zuc=C$zus._uniforms;var C$zuf=C$zuo._properties;for(var C$zul=0;C$zul<C$zuc.length;C$zul++){var C$zup=C$zuf[C$zuc[C$zul].name];void 0!==C$zup&&this._setProperty(C$zup)}C$zue.setCullMode(C$zuo._cullMode),C$zuo._blend&&(C$zue.enableBlend(),C$zue.setBlendFuncSep(C$zuo._blendSrc,C$zuo._blendDst,C$zuo._blendSrcAlpha,C$zuo._blendDstAlpha),C$zue.setBlendEqSep(C$zuo._blendEq,C$zuo._blendAlphaEq),C$zue.setBlendColor32(C$zuo._blendColor)),C$zuo._depthTest&&(C$zue.enableDepthTest(),C$zue.setDepthFunc(C$zuo._depthFunc)),C$zuo._depthWrite&&C$zue.enableDepthWrite(),C$zue.setStencilTest(C$zuo._stencilTest),C$zuo._stencilTest===C$zux.default.STENCIL_ENABLE&&(C$zue.setStencilFuncFront(C$zuo._stencilFuncFront,C$zuo._stencilRefFront,C$zuo._stencilMaskFront),C$zue.setStencilOpFront(C$zuo._stencilFailOpFront,C$zuo._stencilZFailOpFront,C$zuo._stencilZPassOpFront,C$zuo._stencilWriteMaskFront),C$zue.setStencilFuncBack(C$zuo._stencilFuncBack,C$zuo._stencilRefBack,C$zuo._stencilMaskBack),C$zue.setStencilOpBack(C$zuo._stencilFailOpBack,C$zuo._stencilZFailOpBack,C$zuo._stencilZPassOpBack,C$zuo._stencilWriteMaskBack)),C$zue.draw(C$zui._start,C$zud),this._resetTextuerUnit()}},C$zue.default=Base,C$zur.exports=C$zue.default},{"../../core/value-types":279,"../enums":307,"../gfx":312,"../memop":324,"./program-lib":304,"./view":306}],302:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=(C$zut=C$zut("../gfx"))&&C$zut.__esModule?C$zut:{default:C$zut};function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}C$zut=InputAssembler,(C$zun=[{key:"count",get:function(){return-1!==this._count?this._count:this._indexBuffer?this._indexBuffer.count:this._vertexBuffer?this._vertexBuffer.count:0}}])&&_defineProperties(C$zut.prototype,C$zun),C$zua&&_defineProperties(C$zut,C$zua);C$zun=InputAssembler;function InputAssembler(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=C$zur.default.PT_TRIANGLES),this._vertexBuffer=C$zut,this._indexBuffer=C$zue,this._primitiveType=C$zui,this._start=0,this._count=-1}var C$zun,C$zua;C$zui.default=C$zun,C$zue.exports=C$zui.default},{"../gfx":312}],303:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zuc=_interopRequireDefault(C$zut("../gfx"));var C$zuo=_interopRequireDefault(C$zut("../enums"));var C$zus=_interopRequireDefault(C$zut("../../core/value-types/value-type"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function Pass(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){void 0===C$zun&&(C$zun={}),void 0===C$zua&&(C$zua={}),this._name=C$zut,this._detailName=C$zue,this._programName=C$zui,this._stage=C$zur,this._properties=C$zun,this._defines=C$zua,this._cullMode=C$zuc.default.CULL_BACK,this._blend=!1,this._blendEq=C$zuc.default.BLEND_FUNC_ADD,this._blendAlphaEq=C$zuc.default.BLEND_FUNC_ADD,this._blendSrc=C$zuc.default.BLEND_SRC_ALPHA,this._blendDst=C$zuc.default.BLEND_ONE_MINUS_SRC_ALPHA,this._blendSrcAlpha=C$zuc.default.BLEND_SRC_ALPHA,this._blendDstAlpha=C$zuc.default.BLEND_ONE_MINUS_SRC_ALPHA,this._blendColor=4294967295,this._depthTest=!1,this._depthWrite=!1,this._depthFunc=C$zuc.default.DS_FUNC_LESS,this._stencilTest=C$zuc.default.STENCIL_INHERIT,this._stencilFuncFront=C$zuc.default.DS_FUNC_ALWAYS,this._stencilRefFront=0,this._stencilMaskFront=255,this._stencilFailOpFront=C$zuc.default.STENCIL_OP_KEEP,this._stencilZFailOpFront=C$zuc.default.STENCIL_OP_KEEP,this._stencilZPassOpFront=C$zuc.default.STENCIL_OP_KEEP,this._stencilWriteMaskFront=255,this._stencilFuncBack=C$zuc.default.DS_FUNC_ALWAYS,this._stencilRefBack=0,this._stencilMaskBack=255,this._stencilFailOpBack=C$zuc.default.STENCIL_OP_KEEP,this._stencilZFailOpBack=C$zuc.default.STENCIL_OP_KEEP,this._stencilZPassOpBack=C$zuc.default.STENCIL_OP_KEEP,this._stencilWriteMaskBack=255}(C$zut=Pass.prototype).setCullMode=function(C$zut){void 0===C$zut&&(C$zut=C$zuc.default.CULL_BACK),this._cullMode=C$zut},C$zut.setBlend=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){void 0===C$zue&&(C$zue=C$zuc.default.BLEND_FUNC_ADD),void 0===C$zui&&(C$zui=C$zuc.default.BLEND_SRC_ALPHA),void 0===C$zur&&(C$zur=C$zuc.default.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$zun&&(C$zun=C$zuc.default.BLEND_FUNC_ADD),void 0===C$zua&&(C$zua=C$zuc.default.BLEND_SRC_ALPHA),void 0===C$zuo&&(C$zuo=C$zuc.default.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$zus&&(C$zus=4294967295),this._blend=C$zut=void 0===C$zut?!1:C$zut,this._blendEq=C$zue,this._blendSrc=C$zui,this._blendDst=C$zur,this._blendAlphaEq=C$zun,this._blendSrcAlpha=C$zua,this._blendDstAlpha=C$zuo,this._blendColor=C$zus},C$zut.setDepth=function(C$zut,C$zue,C$zui){void 0===C$zue&&(C$zue=!1),void 0===C$zui&&(C$zui=C$zuc.default.DS_FUNC_LESS),this._depthTest=C$zut=void 0===C$zut?!1:C$zut,this._depthWrite=C$zue,this._depthFunc=C$zui},C$zut.setStencilFront=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){void 0===C$zut&&(C$zut=C$zuc.default.STENCIL_INHERIT),void 0===C$zue&&(C$zue=C$zuc.default.DS_FUNC_ALWAYS),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=255),void 0===C$zun&&(C$zun=C$zuc.default.STENCIL_OP_KEEP),void 0===C$zua&&(C$zua=C$zuc.default.STENCIL_OP_KEEP),void 0===C$zuo&&(C$zuo=C$zuc.default.STENCIL_OP_KEEP),void 0===C$zus&&(C$zus=255),this._stencilTest=C$zut,this._stencilFuncFront=C$zue,this._stencilRefFront=C$zui,this._stencilMaskFront=C$zur,this._stencilFailOpFront=C$zun,this._stencilZFailOpFront=C$zua,this._stencilZPassOpFront=C$zuo,this._stencilWriteMaskFront=C$zus},C$zut.setStencilEnabled=function(C$zut){void 0===C$zut&&(C$zut=C$zuc.default.STENCIL_INHERIT),this._stencilTest=C$zut},C$zut.setStencilBack=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){void 0===C$zut&&(C$zut=C$zuc.default.STENCIL_INHERIT),void 0===C$zue&&(C$zue=C$zuc.default.DS_FUNC_ALWAYS),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=255),void 0===C$zun&&(C$zun=C$zuc.default.STENCIL_OP_KEEP),void 0===C$zua&&(C$zua=C$zuc.default.STENCIL_OP_KEEP),void 0===C$zuo&&(C$zuo=C$zuc.default.STENCIL_OP_KEEP),void 0===C$zus&&(C$zus=255),this._stencilTest=C$zut,this._stencilFuncBack=C$zue,this._stencilRefBack=C$zui,this._stencilMaskBack=C$zur,this._stencilFailOpBack=C$zun,this._stencilZFailOpBack=C$zua,this._stencilZPassOpBack=C$zuo,this._stencilWriteMaskBack=C$zus},C$zut.setStage=function(C$zut){this._stage=C$zut},C$zut.setProperties=function(C$zut){this._properties=C$zut},C$zut.getProperty=function(C$zut){if(this._properties[C$zut])return this._properties[C$zut].value},C$zut.setProperty=function(C$zut,C$zue,C$zui){var C$zur=this._properties[C$zut];if(!C$zur)return!1;if(C$zur.directly=C$zui,Array.isArray(C$zue)){var C$zun=C$zur.value;if(C$zun.length!==C$zue.length)return void cc.warnID(9105,this._name,C$zut);for(var C$zua=0;C$zua<C$zue.length;C$zua++)C$zun[C$zua]=C$zue[C$zua]}else C$zue&&!ArrayBuffer.isView(C$zue)?C$zur.type===C$zuo.default.PARAM_TEXTURE_2D?C$zur.value=C$zue.getImpl():C$zue instanceof C$zus.default?C$zue.constructor.toArray(C$zur.value,C$zue):("object"==typeof C$zue&&cc.warnID(9106,this._name,C$zut),C$zur.value=C$zue):C$zur.value=C$zue;return!0},C$zut.getDefine=function(C$zut){return this._defines[C$zut]},C$zut.define=function(C$zut,C$zue,C$zui){if(!C$zui&&void 0===this._defines[C$zut])return!1;return this._defines[C$zut]=C$zue,!0},C$zut.clone=function(){var C$zut=new Pass(this._programName);Object.assign(C$zut,this);var C$zue={};var C$zui=this._properties;for(var C$zur in C$zui){var C$zun=C$zui[C$zur];var C$zua=C$zue[C$zur]={};C$zur=C$zun.value;for(var C$zuo in Array.isArray(C$zur)?C$zua.value=C$zur.concat():ArrayBuffer.isView(C$zur)?C$zua.value=new C$zur.__proto__.constructor(C$zur):C$zua.value=C$zur,C$zun)"value"!==C$zuo&&(C$zua[C$zuo]=C$zun[C$zuo])}return C$zut._properties=C$zue,C$zut._defines=Object.assign({},this._defines),C$zut},C$zui.default=Pass,C$zue.exports=C$zui.default},{"../../core/value-types/value-type":287,"../enums":307,"../gfx":312}],304:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zuh=(C$zut=C$zut("../gfx"))&&C$zut.__esModule?C$zut:{default:C$zut};var C$zuv=0;function _replaceMacroNums(C$zut,C$zue,C$zui){var C$zur=C$zut;for(var C$zun=0;C$zun<C$zue.length;C$zun++){var C$zua=C$zue[C$zun].name;var C$zuo=C$zui[C$zua];Number.isInteger(C$zuo)&&(C$zua=new RegExp(C$zua,"g"),C$zur=C$zur.replace(C$zua,C$zuo))}return C$zur}function _unrollLoops(C$zut){return C$zut.replace(/#pragma for (\w+) in range\(\s*(\d+)\s*,\s*(\d+)\s*\)([\s\S]+?)#pragma endFor/g,function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua="";C$zui=parseInt(C$zui);var C$zuo=parseInt(C$zur);(C$zui.isNaN||C$zuo.isNaN)&&console.error("Unroll For Loops Error: begin and end of range must be an int num.");for(var C$zus=C$zui;C$zus<C$zuo;++C$zus)C$zua+=C$zun.replace(new RegExp("{"+C$zue+"}","g"),C$zus);return C$zua})}function _replaceHighp(C$zut){return C$zut.replace(/\bhighp\b/g,"mediump")}function ProgramLib(C$zut){this._device=C$zut,this._templates={},this._cache={},this._checkPrecision()}(C$zut=ProgramLib.prototype).clear=function(){this._templates={},this._cache={}},C$zut.define=function(C$zut){var C$zue=C$zut.name,C$zui=C$zut.defines;var C$zur=C$zut.glsl1||C$zut,C$zuh=C$zur.vert,C$zur=C$zur.frag;if(!this._templates[C$zue]){var C$zuu=++C$zuv;var C$zu_=0;for(var C$zun=0;C$zun<C$zui.length;++C$zun){var C$zua=C$zui[C$zun];var C$zud=1;var C$zuo;"number"===C$zua.type?(C$zuo=C$zua.range||[],C$zua.min=C$zuo[0]||0,C$zua.max=C$zuo[1]||4,C$zud=Math.ceil(Math.log2(C$zua.max-C$zua.min)),C$zua._map=function(C$zut){return C$zut-this.min<<this._offset}.bind(C$zua)):C$zua._map=function(C$zut){return C$zut?1<<this._offset:0}.bind(C$zua),C$zua._offset=C$zu_,C$zu_+=C$zud}var C$zus=C$zut.uniforms||[];if(C$zut.samplers)for(var C$zuf=0;C$zuf<C$zut.samplers.length;C$zuf++)C$zus.push(C$zut.samplers[C$zuf]);if(C$zut.blocks)for(var C$zuc=0;C$zuc<C$zut.blocks.length;C$zuc++){var C$zup=C$zut.blocks[C$zuc].defines;var C$zum=C$zut.blocks[C$zuc].members;for(var C$zul=0;C$zul<C$zum.length;C$zul++)C$zus.push({defines:C$zup,name:C$zum[C$zul].name,type:C$zum[C$zul].type})}this._templates[C$zue]={id:C$zuu,name:C$zue,vert:C$zuh,frag:C$zur,defines:C$zui,attributes:C$zut.attributes,uniforms:C$zus,extensions:C$zut.extensions}}},C$zut.getTemplate=function(C$zut){return this._templates[C$zut]},C$zut.hasProgram=function(C$zut){return void 0!==this._templates[C$zut]},C$zut.getKey=function(C$zut,C$zue){var C$zui=this._templates[C$zut];var C$zur=0;for(var C$zun=0;C$zun<C$zui.defines.length;++C$zun){var C$zua=C$zui.defines[C$zun];var C$zuo=C$zue[C$zua.name];void 0!==C$zuo&&(C$zur|=C$zua._map(C$zuo))}return C$zui.id+":"+C$zur},C$zut.getProgram=function(C$zut,C$zue,C$zur){var C$zui=this.getKey(C$zut,C$zue);var C$zun=this._cache[C$zui];if(C$zun)return C$zun;C$zut=this._templates[C$zut];var C$zua=function(C$zut,C$zue){var C$zui=[];for(var C$zur=0;C$zur<C$zut.length;C$zur++){var C$zun=C$zut[C$zur].name;var C$zua=C$zue[C$zun];"number"!=typeof C$zua&&(C$zua=C$zua?1:0),C$zui.push("#define "+C$zun+" "+C$zua)}return C$zui.join("\n")+"\n"}(C$zut.defines,C$zue);var C$zuo=_replaceMacroNums(C$zut.vert,C$zut.defines,C$zue);C$zuo=C$zua+_unrollLoops(C$zuo),this._highpSupported||(C$zuo=_replaceHighp(C$zuo));C$zue=_replaceMacroNums(C$zut.frag,C$zut.defines,C$zue);C$zue=C$zua+_unrollLoops(C$zue),this._highpSupported||(C$zue=_replaceHighp(C$zue));C$zua=(C$zun=new C$zuh.default.Program(this._device,{vert:C$zuo,frag:C$zue})).link();var C$zus,C$zuc,C$zul;return C$zua&&(C$zus=C$zuo.split("\n"),C$zuc=C$zue.split("\n"),C$zul=C$zut.defines.length,C$zua.forEach(function(C$zut){var C$zue=C$zut.line-1;var C$zui=C$zut.line-C$zul;C$zue=("vs"===C$zut.type?C$zus:C$zuc)[C$zue];C$zui=C$zut.info||"Failed to compile "+C$zut.type+" "+C$zut.fileID+" (ln "+C$zui+"): \n "+C$zut.message+": \n  "+C$zue;cc.error(C$zur+" : "+C$zui)})),this._cache[C$zui]=C$zun},C$zut._checkPrecision=function(){var C$zut=this._device._gl;var C$zue=!1;var C$zui;C$zut.getShaderPrecisionFormat&&(C$zui=C$zut.getShaderPrecisionFormat(C$zut.VERTEX_SHADER,C$zut.HIGH_FLOAT),C$zut=C$zut.getShaderPrecisionFormat(C$zut.FRAGMENT_SHADER,C$zut.HIGH_FLOAT),C$zue=C$zui&&0<C$zui.precision&&C$zut&&0<C$zut.precision),C$zue||cc.warnID(9102),this._highpSupported=C$zue},C$zui.default=ProgramLib,C$zue.exports=C$zui.default},{"../gfx":312}],305:[function(C$zut,C$zue,C$zui){"use strict";function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}C$zui.__esModule=!0,C$zui.default=void 0;Technique.prototype.clone=function(){var C$zut=[];for(var C$zue=0;C$zue<this._passes.length;C$zue++)C$zut.push(this._passes[C$zue].clone());return new Technique(this._name,C$zut)},C$zur=Technique,(C$zun=[{key:"name",get:function(){return this._name}},{key:"passes",get:function(){return this._passes}}])&&_defineProperties(C$zur.prototype,C$zun),C$zua&&_defineProperties(C$zur,C$zua);C$zun=Technique;function Technique(C$zut,C$zue){this._name=C$zut,this._passes=C$zue}var C$zur,C$zun,C$zua;C$zui.default=C$zun,C$zue.exports=C$zui.default},{}],306:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=C$zut("../../core/value-types");var C$zun=(C$zut=C$zut("../enums"))&&C$zut.__esModule?C$zut:{default:C$zut};var C$zua=new C$zur.Mat4;var C$zuo=0;function View(){this._id=C$zuo++,this._priority=0,this._rect={x:0,y:0,w:1,h:1},this._color=new C$zur.Vec4(.3,.3,.3,1),this._depth=1,this._stencil=0,this._clearFlags=C$zun.default.CLEAR_COLOR|C$zun.default.CLEAR_DEPTH,this._clearModel=null,this._matView=cc.mat4(),this._matViewInv=cc.mat4(),this._matProj=cc.mat4(),this._matViewProj=cc.mat4(),this._matInvViewProj=cc.mat4(),this._stages=[],this._cullingByID=!1,this._framebuffer=null,this._shadowLight=null,this._cullingMask=4294967295}(C$zut=View.prototype).getForward=function(C$zut){var C$zue=this._matView.m;return C$zur.Vec3.set(C$zut,-C$zue[2],-C$zue[6],-C$zue[10])},C$zut.getPosition=function(C$zut){return C$zur.Mat4.invert(C$zua,this._matView),C$zur.Mat4.getTranslation(C$zut,C$zua)},C$zui.default=View,C$zue.exports=C$zui.default},{"../../core/value-types":279,"../enums":307}],307:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zut=C$zut("./build/mappings");C$zut={PROJ_PERSPECTIVE:0,PROJ_ORTHO:1,LIGHT_DIRECTIONAL:0,LIGHT_POINT:1,LIGHT_SPOT:2,LIGHT_AMBIENT:3,SHADOW_NONE:0,SHADOW_HARD:1,SHADOW_SOFT:2,PARAM_INT:C$zut.typeMap.int,PARAM_INT2:C$zut.typeMap.ivec2,PARAM_INT3:C$zut.typeMap.ivec3,PARAM_INT4:C$zut.typeMap.ivec4,PARAM_FLOAT:C$zut.typeMap.float,PARAM_FLOAT2:C$zut.typeMap.vec2,PARAM_FLOAT3:C$zut.typeMap.vec3,PARAM_FLOAT4:C$zut.typeMap.vec4,PARAM_MAT2:C$zut.typeMap.mat2,PARAM_MAT3:C$zut.typeMap.mat3,PARAM_MAT4:C$zut.typeMap.mat4,PARAM_TEXTURE_2D:C$zut.typeMap.sampler2D,PARAM_TEXTURE_CUBE:C$zut.typeMap.samplerCube,CLEAR_COLOR:1,CLEAR_DEPTH:2,CLEAR_STENCIL:4,CLEAR_SKYBOX:8,BUFFER_VIEW_INT8:0,BUFFER_VIEW_UINT8:1,BUFFER_VIEW_INT16:2,BUFFER_VIEW_UINT16:3,BUFFER_VIEW_INT32:4,BUFFER_VIEW_UINT32:5,BUFFER_VIEW_FLOAT32:6};C$zui.default=C$zut,C$zue.exports=C$zui.default},{"./build/mappings":300}],308:[function(C$zut,C$zua,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zun=_interopRequireDefault(C$zut("./state"));var C$zuB=C$zut("./enums");var C$zuo=_interopRequireDefault(C$zut("./texture-2d"));var C$zus=_interopRequireDefault(C$zut("./texture-cube"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}(C$zut={})[5124]=function(C$zut,C$zue,C$zui){C$zut.uniform1i(C$zue,C$zui)},C$zut[5126]=function(C$zut,C$zue,C$zui){C$zut.uniform1f(C$zue,C$zui)},C$zut[35664]=function(C$zut,C$zue,C$zui){C$zut.uniform2fv(C$zue,C$zui)},C$zut[35665]=function(C$zut,C$zue,C$zui){C$zut.uniform3fv(C$zue,C$zui)},C$zut[35666]=function(C$zut,C$zue,C$zui){C$zut.uniform4fv(C$zue,C$zui)},C$zut[35667]=function(C$zut,C$zue,C$zui){C$zut.uniform2iv(C$zue,C$zui)},C$zut[35668]=function(C$zut,C$zue,C$zui){C$zut.uniform3iv(C$zue,C$zui)},C$zut[35669]=function(C$zut,C$zue,C$zui){C$zut.uniform4iv(C$zue,C$zui)},C$zut[35670]=function(C$zut,C$zue,C$zui){C$zut.uniform1i(C$zue,C$zui)},C$zut[35671]=function(C$zut,C$zue,C$zui){C$zut.uniform2iv(C$zue,C$zui)},C$zut[35672]=function(C$zut,C$zue,C$zui){C$zut.uniform3iv(C$zue,C$zui)},C$zut[35673]=function(C$zut,C$zue,C$zui){C$zut.uniform4iv(C$zue,C$zui)},C$zut[35674]=function(C$zut,C$zue,C$zui){C$zut.uniformMatrix2fv(C$zue,!1,C$zui)},C$zut[35675]=function(C$zut,C$zue,C$zui){C$zut.uniformMatrix3fv(C$zue,!1,C$zui)},C$zut[35676]=function(C$zut,C$zue,C$zui){C$zut.uniformMatrix4fv(C$zue,!1,C$zui)},C$zut[35678]=function(C$zut,C$zue,C$zui){C$zut.uniform1i(C$zue,C$zui)},C$zut[35680]=function(C$zut,C$zue,C$zui){C$zut.uniform1i(C$zue,C$zui)};var C$zuD=C$zut;(C$zut={})[5124]=function(C$zut,C$zue,C$zui){C$zut.uniform1iv(C$zue,C$zui)},C$zut[5126]=function(C$zut,C$zue,C$zui){C$zut.uniform1fv(C$zue,C$zui)},C$zut[35664]=function(C$zut,C$zue,C$zui){C$zut.uniform2fv(C$zue,C$zui)},C$zut[35665]=function(C$zut,C$zue,C$zui){C$zut.uniform3fv(C$zue,C$zui)},C$zut[35666]=function(C$zut,C$zue,C$zui){C$zut.uniform4fv(C$zue,C$zui)},C$zut[35667]=function(C$zut,C$zue,C$zui){C$zut.uniform2iv(C$zue,C$zui)},C$zut[35668]=function(C$zut,C$zue,C$zui){C$zut.uniform3iv(C$zue,C$zui)},C$zut[35669]=function(C$zut,C$zue,C$zui){C$zut.uniform4iv(C$zue,C$zui)},C$zut[35670]=function(C$zut,C$zue,C$zui){C$zut.uniform1iv(C$zue,C$zui)},C$zut[35671]=function(C$zut,C$zue,C$zui){C$zut.uniform2iv(C$zue,C$zui)},C$zut[35672]=function(C$zut,C$zue,C$zui){C$zut.uniform3iv(C$zue,C$zui)},C$zut[35673]=function(C$zut,C$zue,C$zui){C$zut.uniform4iv(C$zue,C$zui)},C$zut[35674]=function(C$zut,C$zue,C$zui){C$zut.uniformMatrix2fv(C$zue,!1,C$zui)},C$zut[35675]=function(C$zut,C$zue,C$zui){C$zut.uniformMatrix3fv(C$zue,!1,C$zui)},C$zut[35676]=function(C$zut,C$zue,C$zui){C$zut.uniformMatrix4fv(C$zue,!1,C$zui)},C$zut[35678]=function(C$zut,C$zue,C$zui){C$zut.uniform1iv(C$zue,C$zui)},C$zut[35680]=function(C$zut,C$zue,C$zui){C$zut.uniform1iv(C$zue,C$zui)};var C$zuL=C$zut;function _attach(C$zut,C$zue,C$zui,C$zur){void 0===C$zur&&(C$zur=0),C$zui instanceof C$zuo.default?C$zut.framebufferTexture2D(C$zut.FRAMEBUFFER,C$zue,C$zut.TEXTURE_2D,C$zui._glID,0):C$zui instanceof C$zus.default?C$zut.framebufferTexture2D(C$zut.FRAMEBUFFER,C$zue,C$zut.TEXTURE_CUBE_MAP_POSITIVE_X+C$zur,C$zui._glID,0):C$zut.framebufferRenderbuffer(C$zut.FRAMEBUFFER,C$zue,C$zut.RENDERBUFFER,C$zui._glID)}C$zut=Device,(C$zur=[{key:"caps",get:function(){return this._caps}}])&&_defineProperties(C$zut.prototype,C$zur),C$zui&&_defineProperties(C$zut,C$zui),(C$zur=Device.prototype)._initExtensions=function(C$zut){var C$zue=this._gl;for(var C$zui=0;C$zui<C$zut.length;++C$zui){var C$zur=C$zut[C$zui];var C$zun=["","WEBKIT_","MOZ_"];for(var C$zua=0;C$zua<C$zun.length;C$zua++)try{var C$zuo=C$zue.getExtension(C$zun[C$zua]+C$zur);if(C$zuo){this._extensions[C$zur]=C$zuo;break}}catch(C$zut){console.error(C$zut)}}},C$zur._initCaps=function(){var C$zut=this._gl;var C$zue=this.ext("WEBGL_draw_buffers");this._caps.maxVertexStreams=4,this._caps.maxVertexTextures=C$zut.getParameter(C$zut.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._caps.maxFragUniforms=C$zut.getParameter(C$zut.MAX_FRAGMENT_UNIFORM_VECTORS),this._caps.maxTextureUnits=C$zut.getParameter(C$zut.MAX_TEXTURE_IMAGE_UNITS),this._caps.maxVertexAttribs=C$zut.getParameter(C$zut.MAX_VERTEX_ATTRIBS),this._caps.maxTextureSize=C$zut.getParameter(C$zut.MAX_TEXTURE_SIZE),this._caps.maxDrawBuffers=C$zue?C$zut.getParameter(C$zue.MAX_DRAW_BUFFERS_WEBGL):1,this._caps.maxColorAttachments=C$zue?C$zut.getParameter(C$zue.MAX_COLOR_ATTACHMENTS_WEBGL):1},C$zur._initStates=function(){var C$zut=this._gl;C$zut.disable(C$zut.BLEND),C$zut.blendFunc(C$zut.ONE,C$zut.ZERO),C$zut.blendEquation(C$zut.FUNC_ADD),C$zut.blendColor(1,1,1,1),C$zut.colorMask(!0,!0,!0,!0),C$zut.enable(C$zut.CULL_FACE),C$zut.cullFace(C$zut.BACK),C$zut.disable(C$zut.DEPTH_TEST),C$zut.depthFunc(C$zut.LESS),C$zut.depthMask(!1),C$zut.disable(C$zut.POLYGON_OFFSET_FILL),C$zut.depthRange(0,1),C$zut.disable(C$zut.STENCIL_TEST),C$zut.stencilFunc(C$zut.ALWAYS,0,255),C$zut.stencilMask(255),C$zut.stencilOp(C$zut.KEEP,C$zut.KEEP,C$zut.KEEP),C$zut.clearDepth(1),C$zut.clearColor(0,0,0,0),C$zut.clearStencil(0),C$zut.disable(C$zut.SCISSOR_TEST)},C$zur._restoreTexture=function(C$zut){var C$zue=this._gl;C$zut=this._current.textureUnits[C$zut];C$zut&&-1!==C$zut._glID?C$zue.bindTexture(C$zut._target,C$zut._glID):C$zue.bindTexture(C$zue.TEXTURE_2D,null)},C$zur._restoreIndexBuffer=function(){var C$zut=this._gl;var C$zue=this._current.indexBuffer;C$zue&&-1!==C$zue._glID?C$zut.bindBuffer(C$zut.ELEMENT_ARRAY_BUFFER,C$zue._glID):C$zut.bindBuffer(C$zut.ELEMENT_ARRAY_BUFFER,null)},C$zur.ext=function(C$zut){return this._extensions[C$zut]},C$zur.allowFloatTexture=function(){return null!=this.ext("OES_texture_float")},C$zur.setFrameBuffer=function(C$zut){if(this._framebuffer!==C$zut){this._framebuffer=C$zut;var C$zue=this._gl;if(C$zut){C$zue.bindFramebuffer(C$zue.FRAMEBUFFER,C$zut._glID);var C$zui=C$zut._colors.length;for(var C$zur=0;C$zur<C$zui;++C$zur){var C$zun=C$zut._colors[C$zur];_attach(C$zue,C$zue.COLOR_ATTACHMENT0+C$zur,C$zun)}for(var C$zua=C$zui;C$zua<this._caps.maxColorAttachments;++C$zua)C$zue.framebufferTexture2D(C$zue.FRAMEBUFFER,C$zue.COLOR_ATTACHMENT0+C$zua,C$zue.TEXTURE_2D,null,0);C$zut._depth&&_attach(C$zue,C$zue.DEPTH_ATTACHMENT,C$zut._depth),C$zut._stencil&&_attach(C$zue,C$zue.STENCIL_ATTACHMENT,C$zut._stencil),C$zut._depthStencil&&_attach(C$zue,C$zue.DEPTH_STENCIL_ATTACHMENT,C$zut._depthStencil)}else C$zue.bindFramebuffer(C$zue.FRAMEBUFFER,null)}},C$zur.setViewport=function(C$zut,C$zue,C$zui,C$zur){this._vx===C$zut&&this._vy===C$zue&&this._vw===C$zui&&this._vh===C$zur||(this._gl.viewport(C$zut,C$zue,C$zui,C$zur),this._vx=C$zut,this._vy=C$zue,this._vw=C$zui,this._vh=C$zur)},C$zur.setScissor=function(C$zut,C$zue,C$zui,C$zur){this._sx===C$zut&&this._sy===C$zue&&this._sw===C$zui&&this._sh===C$zur||(this._gl.scissor(C$zut,C$zue,C$zui,C$zur),this._sx=C$zut,this._sy=C$zue,this._sw=C$zui,this._sh=C$zur)},C$zur.clear=function(C$zut){var C$zue,C$zui;void 0===C$zut.color&&void 0===C$zut.depth&&void 0===C$zut.stencil||(C$zue=this._gl,void(C$zui=0)!==C$zut.color&&(C$zui|=C$zue.COLOR_BUFFER_BIT,C$zue.clearColor(C$zut.color[0],C$zut.color[1],C$zut.color[2],C$zut.color[3])),void 0!==C$zut.depth&&(C$zui|=C$zue.DEPTH_BUFFER_BIT,C$zue.clearDepth(C$zut.depth),C$zue.enable(C$zue.DEPTH_TEST),C$zue.depthMask(!0),C$zue.depthFunc(C$zue.ALWAYS)),void 0!==C$zut.stencil&&(C$zui|=C$zue.STENCIL_BUFFER_BIT,C$zue.clearStencil(C$zut.stencil)),C$zue.clear(C$zui),void 0!==C$zut.depth&&(!1===this._current.depthTest?C$zue.disable(C$zue.DEPTH_TEST):(!1===this._current.depthWrite&&C$zue.depthMask(!1),this._current.depthFunc!==C$zuB.enums.DS_FUNC_ALWAYS&&C$zue.depthFunc(this._current.depthFunc))))},C$zur.enableBlend=function(){this._next.blend=!0},C$zur.enableDepthTest=function(){this._next.depthTest=!0},C$zur.enableDepthWrite=function(){this._next.depthWrite=!0},C$zur.setStencilTest=function(C$zut){this._next.stencilTest=C$zut},C$zur.setStencilFunc=function(C$zut,C$zue,C$zui){this._next.stencilSep=!1,this._next.stencilFuncFront=this._next.stencilFuncBack=C$zut,this._next.stencilRefFront=this._next.stencilRefBack=C$zue,this._next.stencilMaskFront=this._next.stencilMaskBack=C$zui},C$zur.setStencilFuncFront=function(C$zut,C$zue,C$zui){this._next.stencilSep=!0,this._next.stencilFuncFront=C$zut,this._next.stencilRefFront=C$zue,this._next.stencilMaskFront=C$zui},C$zur.setStencilFuncBack=function(C$zut,C$zue,C$zui){this._next.stencilSep=!0,this._next.stencilFuncBack=C$zut,this._next.stencilRefBack=C$zue,this._next.stencilMaskBack=C$zui},C$zur.setStencilOp=function(C$zut,C$zue,C$zui,C$zur){this._next.stencilFailOpFront=this._next.stencilFailOpBack=C$zut,this._next.stencilZFailOpFront=this._next.stencilZFailOpBack=C$zue,this._next.stencilZPassOpFront=this._next.stencilZPassOpBack=C$zui,this._next.stencilWriteMaskFront=this._next.stencilWriteMaskBack=C$zur},C$zur.setStencilOpFront=function(C$zut,C$zue,C$zui,C$zur){this._next.stencilSep=!0,this._next.stencilFailOpFront=C$zut,this._next.stencilZFailOpFront=C$zue,this._next.stencilZPassOpFront=C$zui,this._next.stencilWriteMaskFront=C$zur},C$zur.setStencilOpBack=function(C$zut,C$zue,C$zui,C$zur){this._next.stencilSep=!0,this._next.stencilFailOpBack=C$zut,this._next.stencilZFailOpBack=C$zue,this._next.stencilZPassOpBack=C$zui,this._next.stencilWriteMaskBack=C$zur},C$zur.setDepthFunc=function(C$zut){this._next.depthFunc=C$zut},C$zur.setBlendColor32=function(C$zut){this._next.blendColor=C$zut},C$zur.setBlendColor=function(C$zut,C$zue,C$zui,C$zur){this._next.blendColor=(255*C$zut<<24|255*C$zue<<16|255*C$zui<<8|255*C$zur)>>>0},C$zur.setBlendFunc=function(C$zut,C$zue){this._next.blendSep=!1,this._next.blendSrc=C$zut,this._next.blendDst=C$zue},C$zur.setBlendFuncSep=function(C$zut,C$zue,C$zui,C$zur){this._next.blendSep=!0,this._next.blendSrc=C$zut,this._next.blendDst=C$zue,this._next.blendSrcAlpha=C$zui,this._next.blendDstAlpha=C$zur},C$zur.setBlendEq=function(C$zut){this._next.blendSep=!1,this._next.blendEq=C$zut},C$zur.setBlendEqSep=function(C$zut,C$zue){this._next.blendSep=!0,this._next.blendEq=C$zut,this._next.blendAlphaEq=C$zue},C$zur.setCullMode=function(C$zut){this._next.cullMode=C$zut},C$zur.setVertexBuffer=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=0),this._next.vertexBuffers[C$zut]=C$zue,this._next.vertexBufferOffsets[C$zut]=C$zui,this._next.maxStream<C$zut&&(this._next.maxStream=C$zut)},C$zur.setIndexBuffer=function(C$zut){this._next.indexBuffer=C$zut},C$zur.setProgram=function(C$zut){this._next.program=C$zut},C$zur.setTexture=function(C$zut,C$zue,C$zui){C$zui>=this._caps.maxTextureUnits?console.warn("Can not set texture "+C$zut+" at stage "+C$zui+", max texture exceed: "+this._caps.maxTextureUnits):(this._next.textureUnits[C$zui]=C$zue,this.setUniform(C$zut,C$zui),this._next.maxTextureSlot<C$zui&&(this._next.maxTextureSlot=C$zui))},C$zur.setTextureArray=function(C$zut,C$zue,C$zui){var C$zur=C$zue.length;if(C$zur>=this._caps.maxTextureUnits)console.warn("Can not set "+C$zur+" textures for "+C$zut+", max texture exceed: "+this._caps.maxTextureUnits);else{for(var C$zun=0;C$zun<C$zur;++C$zun){var C$zua=C$zui[C$zun];this._next.textureUnits[C$zua]=C$zue[C$zun],this._next.maxTextureSlot<C$zua&&(this._next.maxTextureSlot=C$zua)}this.setUniform(C$zut,C$zui)}},C$zur.setUniform=function(C$zut,C$zue){var C$zui=this._uniforms[C$zut];var C$zur=!1;var C$zuh=!1,C$zun=!1,C$zua=!1;for(;C$zui&&(C$zun=Array.isArray(C$zue)||C$zue instanceof Float32Array,C$zua=C$zue instanceof Int32Array,C$zui.isArray===(C$zuh=C$zun||C$zua)&&(!C$zui.isArray||C$zui.value.length===C$zue.length)&&(C$zur=!0,0)););if(C$zur){var C$zuo=C$zui.value;var C$zus=!1;if(C$zui.isArray)for(var C$zuc=0,C$zuu=C$zuo.length;C$zuc<C$zuu;C$zuc++)C$zuo[C$zuc]!==C$zue[C$zuc]&&(C$zus=!0,C$zuo[C$zuc]=C$zue[C$zuc]);else C$zuo!==C$zue&&(C$zus=!0,C$zui.value=C$zue);C$zus&&(C$zui.dirty=!0)}else{var C$zul=C$zue;C$zun?C$zul=new Float32Array(C$zue):C$zua&&(C$zul=new Int32Array(C$zue)),C$zui={dirty:!0,value:C$zul,isArray:C$zuh}}this._uniforms[C$zut]=C$zui},C$zur.setUniformDirectly=function(C$zut,C$zue){var C$zui=this._uniforms[C$zut];C$zui||(this._uniforms[C$zut]=C$zui={}),C$zui.dirty=!0,C$zui.value=C$zue},C$zur.setPrimitiveType=function(C$zut){this._next.primitiveType=C$zut},C$zur.resetDrawCalls=function(){this._stats.drawcalls=0},C$zur.getDrawCalls=function(){return this._stats.drawcalls},C$zur.draw=function(C$zuh,C$zuu){var C$zut=this._gl;var C$zue=this._current;var C$zui=this._next;var C$zur;var C$zun,C$zua;!function(C$zut,C$zue,C$zui){if(C$zue.blend!==C$zui.blend)return C$zui.blend?(C$zut.enable(C$zut.BLEND),C$zui.blendSrc!==C$zuB.enums.BLEND_CONSTANT_COLOR&&C$zui.blendSrc!==C$zuB.enums.BLEND_ONE_MINUS_CONSTANT_COLOR&&C$zui.blendDst!==C$zuB.enums.BLEND_CONSTANT_COLOR&&C$zui.blendDst!==C$zuB.enums.BLEND_ONE_MINUS_CONSTANT_COLOR||C$zut.blendColor((C$zui.blendColor>>24)/255,(C$zui.blendColor>>16&255)/255,(C$zui.blendColor>>8&255)/255,(255&C$zui.blendColor)/255),C$zui.blendSep?(C$zut.blendFuncSeparate(C$zui.blendSrc,C$zui.blendDst,C$zui.blendSrcAlpha,C$zui.blendDstAlpha),C$zut.blendEquationSeparate(C$zui.blendEq,C$zui.blendAlphaEq)):(C$zut.blendFunc(C$zui.blendSrc,C$zui.blendDst),C$zut.blendEquation(C$zui.blendEq))):C$zut.disable(C$zut.BLEND);!1!==C$zui.blend&&(C$zue.blendColor!==C$zui.blendColor&&C$zut.blendColor((C$zui.blendColor>>24)/255,(C$zui.blendColor>>16&255)/255,(C$zui.blendColor>>8&255)/255,(255&C$zui.blendColor)/255),C$zue.blendSep===C$zui.blendSep?C$zui.blendSep?(C$zue.blendSrc===C$zui.blendSrc&&C$zue.blendDst===C$zui.blendDst&&C$zue.blendSrcAlpha===C$zui.blendSrcAlpha&&C$zue.blendDstAlpha===C$zui.blendDstAlpha||C$zut.blendFuncSeparate(C$zui.blendSrc,C$zui.blendDst,C$zui.blendSrcAlpha,C$zui.blendDstAlpha),C$zue.blendEq===C$zui.blendEq&&C$zue.blendAlphaEq===C$zui.blendAlphaEq||C$zut.blendEquationSeparate(C$zui.blendEq,C$zui.blendAlphaEq)):(C$zue.blendSrc===C$zui.blendSrc&&C$zue.blendDst===C$zui.blendDst||C$zut.blendFunc(C$zui.blendSrc,C$zui.blendDst),C$zue.blendEq!==C$zui.blendEq&&C$zut.blendEquation(C$zui.blendEq)):C$zui.blendSep?(C$zut.blendFuncSeparate(C$zui.blendSrc,C$zui.blendDst,C$zui.blendSrcAlpha,C$zui.blendDstAlpha),C$zut.blendEquationSeparate(C$zui.blendEq,C$zui.blendAlphaEq)):(C$zut.blendFunc(C$zui.blendSrc,C$zui.blendDst),C$zut.blendEquation(C$zui.blendEq)))}(C$zut,C$zue,C$zui),function(C$zut,C$zue,C$zui){if(C$zue.depthTest!==C$zui.depthTest)return C$zui.depthTest?(C$zut.enable(C$zut.DEPTH_TEST),C$zut.depthFunc(C$zui.depthFunc),C$zut.depthMask(C$zui.depthWrite)):C$zut.disable(C$zut.DEPTH_TEST);C$zue.depthWrite!==C$zui.depthWrite&&C$zut.depthMask(C$zui.depthWrite),!1!==C$zui.depthTest?C$zue.depthFunc!==C$zui.depthFunc&&C$zut.depthFunc(C$zui.depthFunc):C$zui.depthWrite&&(C$zui.depthTest=!0,C$zui.depthFunc=C$zuB.enums.DS_FUNC_ALWAYS,C$zut.enable(C$zut.DEPTH_TEST),C$zut.depthFunc(C$zui.depthFunc))}(C$zut,C$zue,C$zui),C$zua=C$zut,C$zun=C$zue,(C$zur=C$zui).stencilTest!==C$zuB.enums.STENCIL_INHERIT&&(C$zur.stencilTest!==C$zun.stencilTest?C$zur.stencilTest===C$zuB.enums.STENCIL_DISABLE?C$zua.disable(C$zua.STENCIL_TEST):(C$zua.enable(C$zua.STENCIL_TEST),C$zur.stencilSep?(C$zua.stencilFuncSeparate(C$zua.FRONT,C$zur.stencilFuncFront,C$zur.stencilRefFront,C$zur.stencilMaskFront),C$zua.stencilMaskSeparate(C$zua.FRONT,C$zur.stencilWriteMaskFront),C$zua.stencilOpSeparate(C$zua.FRONT,C$zur.stencilFailOpFront,C$zur.stencilZFailOpFront,C$zur.stencilZPassOpFront),C$zua.stencilFuncSeparate(C$zua.BACK,C$zur.stencilFuncBack,C$zur.stencilRefBack,C$zur.stencilMaskBack),C$zua.stencilMaskSeparate(C$zua.BACK,C$zur.stencilWriteMaskBack),C$zua.stencilOpSeparate(C$zua.BACK,C$zur.stencilFailOpBack,C$zur.stencilZFailOpBack,C$zur.stencilZPassOpBack)):(C$zua.stencilFunc(C$zur.stencilFuncFront,C$zur.stencilRefFront,C$zur.stencilMaskFront),C$zua.stencilMask(C$zur.stencilWriteMaskFront),C$zua.stencilOp(C$zur.stencilFailOpFront,C$zur.stencilZFailOpFront,C$zur.stencilZPassOpFront))):C$zur.stencilTest!==C$zuB.enums.STENCIL_DISABLE&&(C$zun.stencilSep===C$zur.stencilSep?C$zur.stencilSep?(C$zun.stencilFuncFront===C$zur.stencilFuncFront&&C$zun.stencilRefFront===C$zur.stencilRefFront&&C$zun.stencilMaskFront===C$zur.stencilMaskFront||C$zua.stencilFuncSeparate(C$zua.FRONT,C$zur.stencilFuncFront,C$zur.stencilRefFront,C$zur.stencilMaskFront),C$zun.stencilWriteMaskFront!==C$zur.stencilWriteMaskFront&&C$zua.stencilMaskSeparate(C$zua.FRONT,C$zur.stencilWriteMaskFront),C$zun.stencilFailOpFront===C$zur.stencilFailOpFront&&C$zun.stencilZFailOpFront===C$zur.stencilZFailOpFront&&C$zun.stencilZPassOpFront===C$zur.stencilZPassOpFront||C$zua.stencilOpSeparate(C$zua.FRONT,C$zur.stencilFailOpFront,C$zur.stencilZFailOpFront,C$zur.stencilZPassOpFront),C$zun.stencilFuncBack===C$zur.stencilFuncBack&&C$zun.stencilRefBack===C$zur.stencilRefBack&&C$zun.stencilMaskBack===C$zur.stencilMaskBack||C$zua.stencilFuncSeparate(C$zua.BACK,C$zur.stencilFuncBack,C$zur.stencilRefBack,C$zur.stencilMaskBack),C$zun.stencilWriteMaskBack!==C$zur.stencilWriteMaskBack&&C$zua.stencilMaskSeparate(C$zua.BACK,C$zur.stencilWriteMaskBack),C$zun.stencilFailOpBack===C$zur.stencilFailOpBack&&C$zun.stencilZFailOpBack===C$zur.stencilZFailOpBack&&C$zun.stencilZPassOpBack===C$zur.stencilZPassOpBack||C$zua.stencilOpSeparate(C$zua.BACK,C$zur.stencilFailOpBack,C$zur.stencilZFailOpBack,C$zur.stencilZPassOpBack)):(C$zun.stencilFuncFront===C$zur.stencilFuncFront&&C$zun.stencilRefFront===C$zur.stencilRefFront&&C$zun.stencilMaskFront===C$zur.stencilMaskFront||C$zua.stencilFunc(C$zur.stencilFuncFront,C$zur.stencilRefFront,C$zur.stencilMaskFront),C$zun.stencilWriteMaskFront!==C$zur.stencilWriteMaskFront&&C$zua.stencilMask(C$zur.stencilWriteMaskFront),C$zun.stencilFailOpFront===C$zur.stencilFailOpFront&&C$zun.stencilZFailOpFront===C$zur.stencilZFailOpFront&&C$zun.stencilZPassOpFront===C$zur.stencilZPassOpFront||C$zua.stencilOp(C$zur.stencilFailOpFront,C$zur.stencilZFailOpFront,C$zur.stencilZPassOpFront)):C$zur.stencilSep?(C$zua.stencilFuncSeparate(C$zua.FRONT,C$zur.stencilFuncFront,C$zur.stencilRefFront,C$zur.stencilMaskFront),C$zua.stencilMaskSeparate(C$zua.FRONT,C$zur.stencilWriteMaskFront),C$zua.stencilOpSeparate(C$zua.FRONT,C$zur.stencilFailOpFront,C$zur.stencilZFailOpFront,C$zur.stencilZPassOpFront),C$zua.stencilFuncSeparate(C$zua.BACK,C$zur.stencilFuncBack,C$zur.stencilRefBack,C$zur.stencilMaskBack),C$zua.stencilMaskSeparate(C$zua.BACK,C$zur.stencilWriteMaskBack),C$zua.stencilOpSeparate(C$zua.BACK,C$zur.stencilFailOpBack,C$zur.stencilZFailOpBack,C$zur.stencilZPassOpBack)):(C$zua.stencilFunc(C$zur.stencilFuncFront,C$zur.stencilRefFront,C$zur.stencilMaskFront),C$zua.stencilMask(C$zur.stencilWriteMaskFront),C$zua.stencilOp(C$zur.stencilFailOpFront,C$zur.stencilZFailOpFront,C$zur.stencilZPassOpFront)))),C$zun=C$zut,C$zua=C$zui,C$zue.cullMode!==C$zua.cullMode&&(C$zua.cullMode!==C$zuB.enums.CULL_NONE?(C$zun.enable(C$zun.CULL_FACE),C$zun.cullFace(C$zua.cullMode)):C$zun.disable(C$zun.CULL_FACE));var C$zuo=this;var C$zu_=C$zut;var C$zud=C$zue;var C$zus=C$zui;var C$zuf=!1;if(-1!==C$zus.maxStream){if(C$zud.maxStream!==C$zus.maxStream)C$zuf=!0;else if(C$zud.program!==C$zus.program)C$zuf=!0;else for(var C$zup=0;C$zup<C$zus.maxStream+1;++C$zup)if(C$zud.vertexBuffers[C$zup]!==C$zus.vertexBuffers[C$zup]||C$zud.vertexBufferOffsets[C$zup]!==C$zus.vertexBufferOffsets[C$zup]){C$zuf=!0;break}if(C$zuf){for(var C$zum=0;C$zum<C$zuo._caps.maxVertexAttribs;++C$zum)C$zuo._newAttributes[C$zum]=0;for(var C$zuv=0;C$zuv<C$zus.maxStream+1;++C$zuv){var C$zuy=C$zus.vertexBuffers[C$zuv];var C$zug=C$zus.vertexBufferOffsets[C$zuv];if(C$zuy&&-1!==C$zuy._glID){C$zu_.bindBuffer(C$zu_.ARRAY_BUFFER,C$zuy._glID);for(var C$zub=0;C$zub<C$zus.program._attributes.length;++C$zub){var C$zuc=C$zus.program._attributes[C$zub];var C$zul=C$zuy._format.element(C$zuc.name);C$zul?(0===C$zuo._enabledAttributes[C$zuc.location]&&(C$zu_.enableVertexAttribArray(C$zuc.location),C$zuo._enabledAttributes[C$zuc.location]=1),C$zuo._newAttributes[C$zuc.location]=1,C$zu_.vertexAttribPointer(C$zuc.location,C$zul.num,C$zul.type,C$zul.normalize,C$zul.stride,C$zul.offset+C$zug*C$zul.stride)):console.warn("Can not find vertex attribute: "+C$zuc.name)}}}for(var C$zuC=0;C$zuC<C$zuo._caps.maxVertexAttribs;++C$zuC)C$zuo._enabledAttributes[C$zuC]!==C$zuo._newAttributes[C$zuC]&&(C$zu_.disableVertexAttribArray(C$zuC),C$zuo._enabledAttributes[C$zuC]=0)}}C$zue.indexBuffer!==C$zui.indexBuffer&&C$zut.bindBuffer(C$zut.ELEMENT_ARRAY_BUFFER,C$zui.indexBuffer&&-1!==C$zui.indexBuffer._glID?C$zui.indexBuffer._glID:null);var C$zux=!1;C$zue.program!==C$zui.program&&(C$zui.program._linked?C$zut.useProgram(C$zui.program._glID):console.warn("Failed to use program: has not linked yet."),C$zux=!0);var C$zuA=C$zut;var C$zuS=C$zue;var C$zuT=C$zui;for(var C$zuw=0;C$zuw<C$zuT.maxTextureSlot+1;++C$zuw){var C$zuE;C$zuS.textureUnits[C$zuw]===C$zuT.textureUnits[C$zuw]||(C$zuE=C$zuT.textureUnits[C$zuw])&&-1!==C$zuE._glID&&(C$zuA.activeTexture(C$zuA.TEXTURE0+C$zuw),C$zuA.bindTexture(C$zuE._target,C$zuE._glID))}for(var C$zuP=0;C$zuP<C$zui.program._uniforms.length;++C$zuP){var C$zuM=C$zui.program._uniforms[C$zuP];var C$zuR=this._uniforms[C$zuM.name];var C$zuI;C$zuR&&(C$zux||C$zuR.dirty)&&(C$zuR.dirty=!1,(C$zuI=(void 0===C$zuM.size?C$zuD:C$zuL)[C$zuM.type])?C$zuI(C$zut,C$zuM.location,C$zuR.value):console.warn("Can not find commit function for uniform "+C$zuM.name))}C$zuu&&(C$zui.indexBuffer?C$zut.drawElements(this._next.primitiveType,C$zuu,C$zui.indexBuffer._format,C$zuh*C$zui.indexBuffer._bytesPerIndex):C$zut.drawArrays(this._next.primitiveType,C$zuh,C$zuu),this._stats.drawcalls++),C$zue.set(C$zui),C$zui.reset()};C$zut=Device;function Device(C$zut,C$zue){var C$zui;void 0===(C$zue=C$zue||{}).alpha&&(C$zue.alpha=!1),void 0===C$zue.stencil&&(C$zue.stencil=!0),void 0===C$zue.depth&&(C$zue.depth=!0),void 0===C$zue.antialias&&(C$zue.antialias=!1),void 0===C$zue.preserveDrawingBuffer&&(C$zue.preserveDrawingBuffer=!1);try{C$zui=C$zut.getContext("webgl",C$zue)||C$zut.getContext("experimental-webgl",C$zue)||C$zut.getContext("webkit-3d",C$zue)||C$zut.getContext("moz-webgl",C$zue)}catch(C$zut){return void console.error(C$zut)}C$zui||console.error("This device does not support webgl"),this._gl=C$zui,this._extensions={},this._caps={},this._stats={texture:0,vb:0,ib:0,drawcalls:0},this._initExtensions(["EXT_texture_filter_anisotropic","EXT_shader_texture_lod","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","WEBGL_draw_buffers"]),this._initCaps(),this._initStates(),C$zun.default.initDefault(this),this._current=new C$zun.default(this),this._next=new C$zun.default(this),this._uniforms={},this._vx=this._vy=this._vw=this._vh=0,this._sx=this._sy=this._sw=this._sh=0,this._framebuffer=null,this._enabledAttributes=new Array(this._caps.maxVertexAttribs),this._newAttributes=new Array(this._caps.maxVertexAttribs);for(var C$zur=0;C$zur<this._caps.maxVertexAttribs;++C$zur)this._enabledAttributes[C$zur]=0,this._newAttributes[C$zur]=0}var C$zui,C$zur;C$zue.default=C$zut,C$zua.exports=C$zue.default},{"./enums":309,"./state":316,"./texture-2d":317,"./texture-cube":318}],309:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.attrTypeBytes=function(C$zut){return C$zut===C$zua.ATTR_TYPE_INT8||C$zut===C$zua.ATTR_TYPE_UINT8?1:C$zut===C$zua.ATTR_TYPE_INT16||C$zut===C$zua.ATTR_TYPE_UINT16?2:C$zut===C$zua.ATTR_TYPE_INT32||C$zut===C$zua.ATTR_TYPE_UINT32||C$zut===C$zua.ATTR_TYPE_FLOAT32?4:(console.warn("Unknown ATTR_TYPE: "+C$zut),0)},C$zui.glFilter=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=-1);var C$zur=C$zun[C$zue][C$zui+1];return void 0!==C$zur?C$zur:(console.warn("Unknown FILTER: "+C$zue),-1===C$zui?C$zut.LINEAR:C$zut.LINEAR_MIPMAP_LINEAR)},C$zui.glTextureFmt=function(C$zut){var C$zue=C$zur[C$zut];return void 0!==C$zue?C$zue:(console.warn("Unknown TEXTURE_FMT: "+C$zut),C$zur[C$zua.TEXTURE_FMT_RGBA8])},C$zui.enums=void 0;var C$zun=[[9728,9984,9986],[9729,9985,9987]];var C$zur=[{format:6407,internalFormat:33776,pixelType:null},{format:6408,internalFormat:33777,pixelType:null},{format:6408,internalFormat:33778,pixelType:null},{format:6408,internalFormat:33779,pixelType:null},{format:6407,internalFormat:36196,pixelType:null},{format:6407,internalFormat:35841,pixelType:null},{format:6408,internalFormat:35843,pixelType:null},{format:6407,internalFormat:35840,pixelType:null},{format:6408,internalFormat:35842,pixelType:null},{format:6406,internalFormat:6406,pixelType:5121},{format:6409,internalFormat:6409,pixelType:5121},{format:6410,internalFormat:6410,pixelType:5121},{format:6407,internalFormat:6407,pixelType:33635},{format:6408,internalFormat:6408,pixelType:32820},{format:6408,internalFormat:6408,pixelType:32819},{format:6407,internalFormat:6407,pixelType:5121},{format:6408,internalFormat:6408,pixelType:5121},{format:6407,internalFormat:6407,pixelType:36193},{format:6408,internalFormat:6408,pixelType:36193},{format:6407,internalFormat:6407,pixelType:5126},{format:6408,internalFormat:6408,pixelType:5126},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:6402,internalFormat:6402,pixelType:5123},{format:6402,internalFormat:6402,pixelType:5125},{format:6402,internalFormat:6402,pixelType:5125},{format:6407,internalFormat:37492,pixelType:null},{format:6408,internalFormat:37496,pixelType:null}];var C$zua={USAGE_STATIC:35044,USAGE_DYNAMIC:35048,USAGE_STREAM:35040,INDEX_FMT_UINT8:5121,INDEX_FMT_UINT16:5123,INDEX_FMT_UINT32:5125,ATTR_POSITION:"a_position",ATTR_NORMAL:"a_normal",ATTR_TANGENT:"a_tangent",ATTR_BITANGENT:"a_bitangent",ATTR_WEIGHTS:"a_weights",ATTR_JOINTS:"a_joints",ATTR_COLOR:"a_color",ATTR_COLOR0:"a_color0",ATTR_COLOR1:"a_color1",ATTR_UV:"a_uv",ATTR_UV0:"a_uv0",ATTR_UV1:"a_uv1",ATTR_UV2:"a_uv2",ATTR_UV3:"a_uv3",ATTR_UV4:"a_uv4",ATTR_UV5:"a_uv5",ATTR_UV6:"a_uv6",ATTR_UV7:"a_uv7",ATTR_TEX_COORD:"a_texCoord",ATTR_TEX_COORD1:"a_texCoord1",ATTR_TEX_COORD2:"a_texCoord2",ATTR_TEX_COORD3:"a_texCoord3",ATTR_TEX_COORD4:"a_texCoord4",ATTR_TEX_COORD5:"a_texCoord5",ATTR_TEX_COORD6:"a_texCoord6",ATTR_TEX_COORD7:"a_texCoord7",ATTR_TEX_COORD8:"a_texCoord8",ATTR_TYPE_INT8:5120,ATTR_TYPE_UINT8:5121,ATTR_TYPE_INT16:5122,ATTR_TYPE_UINT16:5123,ATTR_TYPE_INT32:5124,ATTR_TYPE_UINT32:5125,ATTR_TYPE_FLOAT32:5126,FILTER_NEAREST:0,FILTER_LINEAR:1,WRAP_REPEAT:10497,WRAP_CLAMP:33071,WRAP_MIRROR:33648,TEXTURE_FMT_RGB_DXT1:0,TEXTURE_FMT_RGBA_DXT1:1,TEXTURE_FMT_RGBA_DXT3:2,TEXTURE_FMT_RGBA_DXT5:3,TEXTURE_FMT_RGB_ETC1:4,TEXTURE_FMT_RGB_PVRTC_2BPPV1:5,TEXTURE_FMT_RGBA_PVRTC_2BPPV1:6,TEXTURE_FMT_RGB_PVRTC_4BPPV1:7,TEXTURE_FMT_RGBA_PVRTC_4BPPV1:8,TEXTURE_FMT_A8:9,TEXTURE_FMT_L8:10,TEXTURE_FMT_L8_A8:11,TEXTURE_FMT_R5_G6_B5:12,TEXTURE_FMT_R5_G5_B5_A1:13,TEXTURE_FMT_R4_G4_B4_A4:14,TEXTURE_FMT_RGB8:15,TEXTURE_FMT_RGBA8:16,TEXTURE_FMT_RGB16F:17,TEXTURE_FMT_RGBA16F:18,TEXTURE_FMT_RGB32F:19,TEXTURE_FMT_RGBA32F:20,TEXTURE_FMT_R32F:21,TEXTURE_FMT_111110F:22,TEXTURE_FMT_SRGB:23,TEXTURE_FMT_SRGBA:24,TEXTURE_FMT_D16:25,TEXTURE_FMT_D32:26,TEXTURE_FMT_D24S8:27,TEXTURE_FMT_RGB_ETC2:28,TEXTURE_FMT_RGBA_ETC2:29,DS_FUNC_NEVER:512,DS_FUNC_LESS:513,DS_FUNC_EQUAL:514,DS_FUNC_LEQUAL:515,DS_FUNC_GREATER:516,DS_FUNC_NOTEQUAL:517,DS_FUNC_GEQUAL:518,DS_FUNC_ALWAYS:519,RB_FMT_RGBA4:32854,RB_FMT_RGB5_A1:32855,RB_FMT_RGB565:36194,RB_FMT_D16:33189,RB_FMT_S8:36168,RB_FMT_D24S8:34041,BLEND_FUNC_ADD:32774,BLEND_FUNC_SUBTRACT:32778,BLEND_FUNC_REVERSE_SUBTRACT:32779,BLEND_ZERO:0,BLEND_ONE:1,BLEND_SRC_COLOR:768,BLEND_ONE_MINUS_SRC_COLOR:769,BLEND_DST_COLOR:774,BLEND_ONE_MINUS_DST_COLOR:775,BLEND_SRC_ALPHA:770,BLEND_ONE_MINUS_SRC_ALPHA:771,BLEND_DST_ALPHA:772,BLEND_ONE_MINUS_DST_ALPHA:773,BLEND_CONSTANT_COLOR:32769,BLEND_ONE_MINUS_CONSTANT_COLOR:32770,BLEND_CONSTANT_ALPHA:32771,BLEND_ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_SRC_ALPHA_SATURATE:776,STENCIL_DISABLE:0,STENCIL_ENABLE:1,STENCIL_INHERIT:2,STENCIL_OP_KEEP:7680,STENCIL_OP_ZERO:0,STENCIL_OP_REPLACE:7681,STENCIL_OP_INCR:7682,STENCIL_OP_INCR_WRAP:34055,STENCIL_OP_DECR:7683,STENCIL_OP_DECR_WRAP:34056,STENCIL_OP_INVERT:5386,CULL_NONE:0,CULL_FRONT:1028,CULL_BACK:1029,CULL_FRONT_AND_BACK:1032,PT_POINTS:0,PT_LINES:1,PT_LINE_LOOP:2,PT_LINE_STRIP:3,PT_TRIANGLES:4,PT_TRIANGLE_STRIP:5,PT_TRIANGLE_FAN:6};C$zui.enums=C$zua},{}],310:[function(C$zut,C$zue,C$zui){"use strict";function FrameBuffer(C$zut,C$zue,C$zui,C$zur){this._device=C$zut,this._width=C$zue,this._height=C$zui,this._colors=C$zur.colors||[],this._depth=C$zur.depth||null,this._stencil=C$zur.stencil||null,this._depthStencil=C$zur.depthStencil||null,this._glID=C$zut._gl.createFramebuffer()}var C$zur;C$zui.__esModule=!0,C$zui.default=void 0,(C$zur=FrameBuffer.prototype).destroy=function(){null!==this._glID?(this._device._gl.deleteFramebuffer(this._glID),this._glID=null):console.error("The frame-buffer already destroyed")},C$zur.getHandle=function(){return this._glID},C$zui.default=FrameBuffer,C$zue.exports=C$zui.default},{}],311:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zut=C$zut("./enums");function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}(C$zur={})[C$zut.enums.INDEX_FMT_UINT8]=1,C$zur[C$zut.enums.INDEX_FMT_UINT16]=2,C$zur[C$zut.enums.INDEX_FMT_UINT32]=4;var C$zun=C$zur;(C$zut=IndexBuffer.prototype).destroy=function(){-1!==this._glID?(this._device._gl.deleteBuffer(this._glID),this._device._stats.ib-=this.bytes,this._glID=-1):console.error("The buffer already destroyed")},C$zut.update=function(C$zut,C$zue){if(-1!==this._glID){if(0!==C$zue.byteLength){if(C$zut+C$zue.byteLength>this._bytes){if(C$zut)return void console.error("Failed to update data, bytes exceed.");this._needExpandDataStore=!0,this._bytes=C$zut+C$zue.byteLength,this._numIndices=this._bytes/this._bytesPerIndex}var C$zui=this._device._gl;var C$zur=this._usage;C$zui.bindBuffer(C$zui.ELEMENT_ARRAY_BUFFER,this._glID),this._needExpandDataStore?(C$zui.bufferData(C$zui.ELEMENT_ARRAY_BUFFER,C$zue,C$zur),this._needExpandDataStore=!1):C$zui.bufferSubData(C$zui.ELEMENT_ARRAY_BUFFER,C$zut,C$zue),this._device._restoreIndexBuffer()}}else console.error("The buffer is destroyed")},C$zut.setUsage=function(C$zut){this._usage=C$zut},C$zut=IndexBuffer,(C$zur=[{key:"count",get:function(){return this._numIndices}}])&&_defineProperties(C$zut.prototype,C$zur),C$zua&&_defineProperties(C$zut,C$zua);C$zur=IndexBuffer;function IndexBuffer(C$zut,C$zue,C$zui,C$zur){this._device=C$zut,this._format=C$zue,this._usage=C$zui,this._bytesPerIndex=C$zun[C$zue],this._bytes=C$zur.byteLength,this._numIndices=this._bytes/this._bytesPerIndex,this._needExpandDataStore=!0,this._glID=C$zut._gl.createBuffer(),this.update(0,C$zur),C$zut._stats.ib+=this._bytes}var C$zur,C$zua;C$zur.BYTES_PER_INDEX=C$zun,C$zui.default=C$zur,C$zue.exports=C$zui.default},{"./enums":309}],312:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=C$zut("./enums");C$zut={VertexFormat:C$zut("./vertex-format"),IndexBuffer:C$zut("./index-buffer"),VertexBuffer:C$zut("./vertex-buffer"),Program:C$zut("./program"),Texture:C$zut("./texture"),Texture2D:C$zut("./texture-2d"),TextureCube:C$zut("./texture-cube"),RenderBuffer:C$zut("./render-buffer"),FrameBuffer:C$zut("./frame-buffer"),Device:C$zut("./device"),attrTypeBytes:C$zur.attrTypeBytes,glFilter:C$zur.glFilter,glTextureFmt:C$zur.glTextureFmt},Object.assign(C$zut,C$zur.enums),C$zui.default=C$zut,cc.gfx=C$zut,C$zue.exports=C$zui.default},{"./device":308,"./enums":309,"./frame-buffer":310,"./index-buffer":311,"./program":314,"./render-buffer":315,"./texture":319,"./texture-2d":317,"./texture-cube":318,"./vertex-buffer":320,"./vertex-format":321}],313:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.isPow2=function(C$zut){return!(C$zut&C$zut-1||!C$zut)}},{}],314:[function(C$zuo,C$zut,C$zue){"use strict";function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}C$zue.__esModule=!0,C$zue.default=void 0;var C$zui=0;function _parseError(C$zui,C$zur,C$zut){C$zut.split("\n").forEach(function(C$zut){var C$zue;C$zut.length<5||((C$zue=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(C$zut))?C$zui.push({type:C$zur,fileID:0|C$zue[1],line:0|C$zue[2],message:C$zue[3].trim()}):0<C$zut.length&&C$zui.push({type:C$zur,fileID:-1,line:0,message:C$zut}))})}(C$zur=Program.prototype).link=function(){if(!this._linked){var C$zut=this._device._gl;var C$zue=_createShader(C$zut,C$zut.VERTEX_SHADER,this._vertSource);var C$zui=_createShader(C$zut,C$zut.FRAGMENT_SHADER,this._fragSource);var C$zur=C$zut.createProgram();C$zut.attachShader(C$zur,C$zue),C$zut.attachShader(C$zur,C$zui),C$zut.linkProgram(C$zur);var C$zun=!1;var C$zua=this._errors;if(C$zut.getShaderParameter(C$zue,C$zut.COMPILE_STATUS)||(_parseError(C$zua,"vs",C$zut.getShaderInfoLog(C$zue)),C$zun=!0),C$zut.getShaderParameter(C$zui,C$zut.COMPILE_STATUS)||(_parseError(C$zua,"fs",C$zut.getShaderInfoLog(C$zui)),C$zun=!0),C$zut.deleteShader(C$zue),C$zut.deleteShader(C$zui),C$zun)return C$zua;if(!C$zut.getProgramParameter(C$zur,C$zut.LINK_STATUS))return C$zua.push({info:"Failed to link shader program: "+C$zut.getProgramInfoLog(C$zur)}),C$zua;this._glID=C$zur;var C$zuh=C$zut.getProgramParameter(C$zur,C$zut.ACTIVE_ATTRIBUTES);for(var C$zuo=0;C$zuo<C$zuh;++C$zuo){var C$zus=C$zut.getActiveAttrib(C$zur,C$zuo);var C$zuu=C$zut.getAttribLocation(C$zur,C$zus.name);this._attributes.push({name:C$zus.name,location:C$zuu,type:C$zus.type})}var C$zu_=C$zut.getProgramParameter(C$zur,C$zut.ACTIVE_UNIFORMS);for(var C$zuc=0;C$zuc<C$zu_;++C$zuc){var C$zud=C$zut.getActiveUniform(C$zur,C$zuc);var C$zul=C$zud.name;var C$zuf=C$zut.getUniformLocation(C$zur,C$zul);var C$zup="[0]"===C$zul.substr(C$zul.length-3);C$zul={name:C$zul=C$zup?C$zul.substr(0,C$zul.length-3):C$zul,location:C$zuf,type:C$zud.type,size:C$zup?C$zud.size:void 0};this._uniforms.push(C$zul)}this._linked=!0}},C$zur.destroy=function(){this._device._gl.deleteProgram(this._glID),this._linked=!1,this._glID=null,this._attributes=[],this._uniforms=[],this._samplers=[]},C$zur=Program,(C$zun=[{key:"id",get:function(){return this._id}}])&&_defineProperties(C$zur.prototype,C$zun),C$zua&&_defineProperties(C$zur,C$zua);C$zun=Program;function Program(C$zut,C$zue){this._device=C$zut,this._attributes=[],this._uniforms=[],this._samplers=[],this._errors=[],this._linked=!1,this._vertSource=C$zue.vert,this._fragSource=C$zue.frag,this._glID=null,this._id=C$zui++}var C$zur,C$zun,C$zua;function _createShader(C$zut,C$zue,C$zui){C$zue=C$zut.createShader(C$zue);return C$zut.shaderSource(C$zue,C$zui),C$zut.compileShader(C$zue),C$zue}C$zue.default=C$zun,C$zut.exports=C$zue.default},{}],315:[function(C$zut,C$zue,C$zui){"use strict";function RenderBuffer(C$zut,C$zue,C$zui,C$zur){this._device=C$zut,this._format=C$zue,this._glID=C$zut._gl.createRenderbuffer(),this.update(C$zui,C$zur)}var C$zur;C$zui.__esModule=!0,C$zui.default=void 0,(C$zur=RenderBuffer.prototype).update=function(C$zut,C$zue){this._width=C$zut,this._height=C$zue;var C$zui=this._device._gl;C$zui.bindRenderbuffer(C$zui.RENDERBUFFER,this._glID),C$zui.renderbufferStorage(C$zui.RENDERBUFFER,this._format,C$zut,C$zue),C$zui.bindRenderbuffer(C$zui.RENDERBUFFER,null)},C$zur.destroy=function(){var C$zut;null!==this._glID?((C$zut=this._device._gl).bindRenderbuffer(C$zut.RENDERBUFFER,null),C$zut.deleteRenderbuffer(this._glID),this._glID=null):console.error("The render-buffer already destroyed")},C$zui.default=RenderBuffer,C$zue.exports=C$zui.default},{}],316:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zut=C$zut("./enums");var C$zur={blend:!1,blendSep:!1,blendColor:4294967295,blendEq:C$zut.enums.BLEND_FUNC_ADD,blendAlphaEq:C$zut.enums.BLEND_FUNC_ADD,blendSrc:C$zut.enums.BLEND_ONE,blendDst:C$zut.enums.BLEND_ZERO,blendSrcAlpha:C$zut.enums.BLEND_ONE,blendDstAlpha:C$zut.enums.BLEND_ZERO,depthTest:!1,depthWrite:!1,depthFunc:C$zut.enums.DS_FUNC_LESS,stencilTest:!1,stencilSep:!1,stencilFuncFront:C$zut.enums.DS_FUNC_ALWAYS,stencilRefFront:0,stencilMaskFront:255,stencilFailOpFront:C$zut.enums.STENCIL_OP_KEEP,stencilZFailOpFront:C$zut.enums.STENCIL_OP_KEEP,stencilZPassOpFront:C$zut.enums.STENCIL_OP_KEEP,stencilWriteMaskFront:255,stencilFuncBack:C$zut.enums.DS_FUNC_ALWAYS,stencilRefBack:0,stencilMaskBack:255,stencilFailOpBack:C$zut.enums.STENCIL_OP_KEEP,stencilZFailOpBack:C$zut.enums.STENCIL_OP_KEEP,stencilZPassOpBack:C$zut.enums.STENCIL_OP_KEEP,stencilWriteMaskBack:255,cullMode:C$zut.enums.CULL_BACK,primitiveType:C$zut.enums.PT_TRIANGLES,maxStream:-1,vertexBuffers:[],vertexBufferOffsets:[],indexBuffer:null,maxTextureSlot:-1,textureUnits:[],program:null};function State(C$zut){this.vertexBuffers=new Array(C$zut._caps.maxVertexStreams),this.vertexBufferOffsets=new Array(C$zut._caps.maxVertexStreams),this.textureUnits=new Array(C$zut._caps.maxTextureUnits),this.set(C$zur)}State.initDefault=function(C$zut){C$zur.vertexBuffers=new Array(C$zut._caps.maxVertexStreams),C$zur.vertexBufferOffsets=new Array(C$zut._caps.maxVertexStreams),C$zur.textureUnits=new Array(C$zut._caps.maxTextureUnits)},(C$zut=State.prototype).reset=function(){this.set(C$zur)},C$zut.set=function(C$zut){this.blend=C$zut.blend,this.blendSep=C$zut.blendSep,this.blendColor=C$zut.blendColor,this.blendEq=C$zut.blendEq,this.blendAlphaEq=C$zut.blendAlphaEq,this.blendSrc=C$zut.blendSrc,this.blendDst=C$zut.blendDst,this.blendSrcAlpha=C$zut.blendSrcAlpha,this.blendDstAlpha=C$zut.blendDstAlpha,this.depthTest=C$zut.depthTest,this.depthWrite=C$zut.depthWrite,this.depthFunc=C$zut.depthFunc,this.stencilTest=C$zut.stencilTest,this.stencilSep=C$zut.stencilSep,this.stencilFuncFront=C$zut.stencilFuncFront,this.stencilRefFront=C$zut.stencilRefFront,this.stencilMaskFront=C$zut.stencilMaskFront,this.stencilFailOpFront=C$zut.stencilFailOpFront,this.stencilZFailOpFront=C$zut.stencilZFailOpFront,this.stencilZPassOpFront=C$zut.stencilZPassOpFront,this.stencilWriteMaskFront=C$zut.stencilWriteMaskFront,this.stencilFuncBack=C$zut.stencilFuncBack,this.stencilRefBack=C$zut.stencilRefBack,this.stencilMaskBack=C$zut.stencilMaskBack,this.stencilFailOpBack=C$zut.stencilFailOpBack,this.stencilZFailOpBack=C$zut.stencilZFailOpBack,this.stencilZPassOpBack=C$zut.stencilZPassOpBack,this.stencilWriteMaskBack=C$zut.stencilWriteMaskBack,this.cullMode=C$zut.cullMode,this.primitiveType=C$zut.primitiveType,this.maxStream=C$zut.maxStream;for(var C$zue=0;C$zue<C$zut.vertexBuffers.length;++C$zue)this.vertexBuffers[C$zue]=C$zut.vertexBuffers[C$zue];for(var C$zui=0;C$zui<C$zut.vertexBufferOffsets.length;++C$zui)this.vertexBufferOffsets[C$zui]=C$zut.vertexBufferOffsets[C$zui];this.indexBuffer=C$zut.indexBuffer,this.maxTextureSlot=C$zut.maxTextureSlot;for(var C$zur=0;C$zur<C$zut.textureUnits.length;++C$zur)this.textureUnits[C$zur]=C$zut.textureUnits[C$zur];this.program=C$zut.program},C$zui.default=State,C$zue.exports=C$zui.default},{"./enums":309}],317:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("./texture"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;var C$zuo=C$zut("./enums");var C$zua=C$zut("./misc");function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zut=function(C$zur){var C$zut;C$zut=C$zur,(C$zue=Texture2D).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(Texture2D);function Texture2D(C$zut,C$zue){var C$zui=(C$zut=C$zur.call(this,C$zut)||this)._device._gl;return C$zut._target=C$zui.TEXTURE_2D,C$zut._glID=C$zui.createTexture(),C$zue.images=C$zue.images||[null],C$zut.update(C$zue),C$zut}var C$zue=Texture2D.prototype;return C$zue.update=function(C$zut){var C$zue=this._device._gl;var C$zui=this._genMipmap;var C$zur,C$zun;C$zut&&(void 0!==C$zut.width&&(this._width=C$zut.width),void 0!==C$zut.height&&(this._height=C$zut.height),void 0!==C$zut.anisotropy&&(this._anisotropy=C$zut.anisotropy),void 0!==C$zut.minFilter&&(this._minFilter=C$zut.minFilter),void 0!==C$zut.magFilter&&(this._magFilter=C$zut.magFilter),void 0!==C$zut.mipFilter&&(this._mipFilter=C$zut.mipFilter),void 0!==C$zut.wrapS&&(this._wrapS=C$zut.wrapS),void 0!==C$zut.wrapT&&(this._wrapT=C$zut.wrapT),void 0!==C$zut.format&&(this._format=C$zut.format,this._compressed=this._format>=C$zuo.enums.TEXTURE_FMT_RGB_DXT1&&this._format<=C$zuo.enums.TEXTURE_FMT_RGBA_PVRTC_4BPPV1||this._format>=C$zuo.enums.TEXTURE_FMT_RGB_ETC2&&this._format<=C$zuo.enums.TEXTURE_FMT_RGBA_ETC2),void 0!==C$zut.genMipmaps&&(this._genMipmap=C$zut.genMipmaps,C$zui=C$zut.genMipmaps),(C$zur=this._device.caps.maxTextureSize||Number.MAX_VALUE)<(C$zun=Math.max(C$zut.width||0,C$zut.height||0))&&console.warn("The current texture size "+C$zun+" exceeds the maximum size ["+C$zur+"] supported on the device."),void 0!==C$zut.images&&1<C$zut.images.length&&(C$zui=!1,(C$zut.width>C$zut.height?C$zut.width:C$zut.height)>>C$zut.images.length-1!=1&&console.error("texture-2d mipmap is invalid, should have a 1x1 mipmap."))),(0,C$zua.isPow2)(this._width)&&(0,C$zua.isPow2)(this._height)||(C$zui=!1),C$zue.activeTexture(C$zue.TEXTURE0),C$zue.bindTexture(C$zue.TEXTURE_2D,this._glID),void 0!==C$zut.images&&0<C$zut.images.length&&(this._setMipmap(C$zut.images,C$zut.flipY,C$zut.premultiplyAlpha),1<C$zut.images.length&&(this._genMipmap=!0)),C$zui&&(C$zue.hint(C$zue.GENERATE_MIPMAP_HINT,C$zue.NICEST),C$zue.generateMipmap(C$zue.TEXTURE_2D),this._genMipmap=!0),this._setTexInfo(),this._device._restoreTexture(0)},C$zue.updateSubImage=function(C$zut){var C$zue=this._device._gl;var C$zui=(0,C$zuo.glTextureFmt)(this._format);C$zue.activeTexture(C$zue.TEXTURE0),C$zue.bindTexture(C$zue.TEXTURE_2D,this._glID),this._setSubImage(C$zui,C$zut),this._device._restoreTexture(0)},C$zue.updateImage=function(C$zut){var C$zue=this._device._gl;var C$zui=(0,C$zuo.glTextureFmt)(this._format);C$zue.activeTexture(C$zue.TEXTURE0),C$zue.bindTexture(C$zue.TEXTURE_2D,this._glID),this._setImage(C$zui,C$zut),this._device._restoreTexture(0)},C$zue._setSubImage=function(C$zut,C$zue){var C$zui=this._device._gl;var C$zur=C$zue.flipY;var C$zun=C$zue.premultiplyAlpha;var C$zua=C$zue.image;!C$zua||ArrayBuffer.isView(C$zua)||C$zua instanceof ArrayBuffer?(void 0===C$zur?C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,C$zur),void 0===C$zun?C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$zun),this._compressed?C$zui.compressedTexSubImage2D(C$zui.TEXTURE_2D,C$zue.level,C$zue.x,C$zue.y,C$zue.width,C$zue.height,C$zut.format,C$zua):C$zui.texSubImage2D(C$zui.TEXTURE_2D,C$zue.level,C$zue.x,C$zue.y,C$zue.width,C$zue.height,C$zut.format,C$zut.pixelType,C$zua)):(void 0===C$zur?C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,!0):C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,C$zur),void 0===C$zun?C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$zun),C$zui.texSubImage2D(C$zui.TEXTURE_2D,C$zue.level,C$zue.x,C$zue.y,C$zut.format,C$zut.pixelType,C$zua))},C$zue._setImage=function(C$zut,C$zue){var C$zui=this._device._gl;var C$zur=C$zue.flipY;var C$zun=C$zue.premultiplyAlpha;var C$zua=C$zue.image;!C$zua||ArrayBuffer.isView(C$zua)||C$zua instanceof ArrayBuffer?(void 0===C$zur?C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,C$zur),void 0===C$zun?C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$zun),this._compressed?C$zui.compressedTexImage2D(C$zui.TEXTURE_2D,C$zue.level,C$zut.internalFormat,C$zue.width,C$zue.height,0,C$zua):C$zui.texImage2D(C$zui.TEXTURE_2D,C$zue.level,C$zut.internalFormat,C$zue.width,C$zue.height,0,C$zut.format,C$zut.pixelType,C$zua)):(void 0===C$zur?C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,!0):C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,C$zur),void 0===C$zun?C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$zun),C$zui.texImage2D(C$zui.TEXTURE_2D,C$zue.level,C$zut.internalFormat,C$zut.format,C$zut.pixelType,C$zua))},C$zue._setMipmap=function(C$zut,C$zue,C$zui){var C$zur=(0,C$zuo.glTextureFmt)(this._format);var C$zun={width:this._width,height:this._height,flipY:C$zue,premultiplyAlpha:C$zui,level:0,image:null};for(var C$zua=0;C$zua<C$zut.length;++C$zua)C$zun.level=C$zua,C$zun.width=this._width>>C$zua,C$zun.height=this._height>>C$zua,C$zun.image=C$zut[C$zua],this._setImage(C$zur,C$zun)},C$zue._setTexInfo=function(){var C$zut=this._device._gl;var C$zue=(0,C$zua.isPow2)(this._width)&&(0,C$zua.isPow2)(this._height);C$zue||this._wrapS===C$zuo.enums.WRAP_CLAMP&&this._wrapT===C$zuo.enums.WRAP_CLAMP||(console.warn("WebGL1 doesn't support all wrap modes with NPOT textures"),this._wrapS=C$zuo.enums.WRAP_CLAMP,this._wrapT=C$zuo.enums.WRAP_CLAMP);var C$zui=this._genMipmap?this._mipFilter:-1;C$zue||-1===C$zui||(console.warn("NPOT textures do not support mipmap filter"),C$zui=-1),C$zut.texParameteri(C$zut.TEXTURE_2D,C$zut.TEXTURE_MIN_FILTER,(0,C$zuo.glFilter)(C$zut,this._minFilter,C$zui)),C$zut.texParameteri(C$zut.TEXTURE_2D,C$zut.TEXTURE_MAG_FILTER,(0,C$zuo.glFilter)(C$zut,this._magFilter,-1)),C$zut.texParameteri(C$zut.TEXTURE_2D,C$zut.TEXTURE_WRAP_S,this._wrapS),C$zut.texParameteri(C$zut.TEXTURE_2D,C$zut.TEXTURE_WRAP_T,this._wrapT);C$zue=this._device.ext("EXT_texture_filter_anisotropic");C$zue&&C$zut.texParameteri(C$zut.TEXTURE_2D,C$zue.TEXTURE_MAX_ANISOTROPY_EXT,this._anisotropy)},Texture2D}(C$zur.default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"./enums":309,"./misc":313,"./texture":319}],318:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("./texture"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;var C$zuc=C$zut("./enums");var C$zun=C$zut("./misc");function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}C$zut=function(C$zur){var C$zut;C$zut=C$zur,(C$zue=TextureCube).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(TextureCube);function TextureCube(C$zut,C$zue){var C$zui=(C$zut=C$zur.call(this,C$zut)||this)._device._gl;return C$zut._target=C$zui.TEXTURE_CUBE_MAP,C$zut._glID=C$zui.createTexture(),C$zut.update(C$zue),C$zut}var C$zue=TextureCube.prototype;return C$zue.update=function(C$zut){var C$zue=this._device._gl;var C$zui=this._genMipmaps;C$zut&&(void 0!==C$zut.width&&(this._width=C$zut.width),void 0!==C$zut.height&&(this._height=C$zut.height),void 0!==C$zut.anisotropy&&(this._anisotropy=C$zut.anisotropy),void 0!==C$zut.minFilter&&(this._minFilter=C$zut.minFilter),void 0!==C$zut.magFilter&&(this._magFilter=C$zut.magFilter),void 0!==C$zut.mipFilter&&(this._mipFilter=C$zut.mipFilter),void 0!==C$zut.wrapS&&(this._wrapS=C$zut.wrapS),void 0!==C$zut.wrapT&&(this._wrapT=C$zut.wrapT),void 0!==C$zut.format&&(this._format=C$zut.format,this._compressed=this._format>=C$zuc.enums.TEXTURE_FMT_RGB_DXT1&&this._format<=C$zuc.enums.TEXTURE_FMT_RGBA_PVRTC_4BPPV1||this._format>=C$zuc.enums.TEXTURE_FMT_RGB_ETC2&&this._format<=C$zuc.enums.TEXTURE_FMT_RGBA_ETC2),void 0!==C$zut.genMipmaps&&(this._genMipmaps=C$zut.genMipmaps,C$zui=C$zut.genMipmaps),void 0!==C$zut.images&&1<C$zut.images.length&&(C$zui=!1,C$zut.width!==C$zut.height&&console.warn("texture-cube width and height should be identical."),C$zut.width>>C$zut.images.length-1!=1&&console.error("texture-cube mipmap is invalid. please set mipmap as 1x1, 2x2, 4x4 ... nxn"))),(0,C$zun.isPow2)(this._width)&&(0,C$zun.isPow2)(this._height)||(C$zui=!1),C$zue.activeTexture(C$zue.TEXTURE0),C$zue.bindTexture(C$zue.TEXTURE_CUBE_MAP,this._glID),void 0!==C$zut.images&&0<C$zut.images.length&&(this._setMipmap(C$zut.images,C$zut.flipY,C$zut.premultiplyAlpha),1<C$zut.images.length&&(this._genMipmaps=!0)),C$zui&&(C$zue.hint(C$zue.GENERATE_MIPMAP_HINT,C$zue.NICEST),C$zue.generateMipmap(C$zue.TEXTURE_CUBE_MAP),this._genMipmaps=!0),this._setTexInfo(),this._device._restoreTexture(0)},C$zue.updateSubImage=function(C$zut){var C$zue=this._device._gl;var C$zui=(0,C$zuc.glTextureFmt)(this._format);C$zue.activeTexture(C$zue.TEXTURE0),C$zue.bindTexture(C$zue.TEXTURE_CUBE_MAP,this._glID),this._setSubImage(C$zui,C$zut),this._device._restoreTexture(0)},C$zue.updateImage=function(C$zut){var C$zue=this._device._gl;var C$zui=(0,C$zuc.glTextureFmt)(this._format);C$zue.activeTexture(C$zue.TEXTURE0),C$zue.bindTexture(C$zue.TEXTURE_CUBE_MAP,this._glID),this._setImage(C$zui,C$zut),this._device._restoreTexture(0)},C$zue._setSubImage=function(C$zut,C$zue){var C$zui=this._device._gl;var C$zur=C$zue.flipY;var C$zun=C$zue.premultiplyAlpha;var C$zua=C$zue.faceIndex;var C$zuo=C$zue.image;void 0===C$zur?C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,C$zur),void 0===C$zun?C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$zun),!C$zuo||ArrayBuffer.isView(C$zuo)||C$zuo instanceof ArrayBuffer?this._compressed?C$zui.compressedTexSubImage2D(C$zui.TEXTURE_CUBE_MAP_POSITIVE_X+C$zua,C$zue.level,C$zue.x,C$zue.y,C$zue.width,C$zue.height,C$zut.format,C$zuo):C$zui.texSubImage2D(C$zui.TEXTURE_CUBE_MAP_POSITIVE_X+C$zua,C$zue.level,C$zue.x,C$zue.y,C$zue.width,C$zue.height,C$zut.format,C$zut.pixelType,C$zuo):C$zui.texSubImage2D(C$zui.TEXTURE_CUBE_MAP_POSITIVE_X+C$zua,C$zue.level,C$zue.x,C$zue.y,C$zut.format,C$zut.pixelType,C$zuo)},C$zue._setImage=function(C$zut,C$zue){var C$zui=this._device._gl;var C$zur=C$zue.flipY;var C$zun=C$zue.premultiplyAlpha;var C$zua=C$zue.faceIndex;var C$zuo=C$zue.image;void 0===C$zur?C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_FLIP_Y_WEBGL,C$zur),void 0===C$zun?C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$zui.pixelStorei(C$zui.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$zun),!C$zuo||ArrayBuffer.isView(C$zuo)||C$zuo instanceof ArrayBuffer?this._compressed?C$zui.compressedTexImage2D(C$zui.TEXTURE_CUBE_MAP_POSITIVE_X+C$zua,C$zue.level,C$zut.internalFormat,C$zue.width,C$zue.height,0,C$zuo):C$zui.texImage2D(C$zui.TEXTURE_CUBE_MAP_POSITIVE_X+C$zua,C$zue.level,C$zut.internalFormat,C$zue.width,C$zue.height,0,C$zut.format,C$zut.pixelType,C$zuo):C$zui.texImage2D(C$zui.TEXTURE_CUBE_MAP_POSITIVE_X+C$zua,C$zue.level,C$zut.internalFormat,C$zut.format,C$zut.pixelType,C$zuo)},C$zue._setMipmap=function(C$zut,C$zue,C$zui){var C$zur=(0,C$zuc.glTextureFmt)(this._format);var C$zun={width:this._width,height:this._height,faceIndex:0,flipY:C$zue,premultiplyAlpha:C$zui,level:0,image:null};for(var C$zua=0;C$zua<C$zut.length;++C$zua){var C$zuo=C$zut[C$zua];C$zun.level=C$zua,C$zun.width=this._width>>C$zua,C$zun.height=this._height>>C$zua;for(var C$zus=0;C$zus<6;++C$zus)C$zun.faceIndex=C$zus,C$zun.image=C$zuo[C$zus],this._setImage(C$zur,C$zun)}},C$zue._setTexInfo=function(){var C$zut=this._device._gl;var C$zue=(0,C$zun.isPow2)(this._width)&&(0,C$zun.isPow2)(this._height);C$zue||this._wrapS===C$zuc.enums.WRAP_CLAMP&&this._wrapT===C$zuc.enums.WRAP_CLAMP||(console.warn("WebGL1 doesn't support all wrap modes with NPOT textures"),this._wrapS=C$zuc.enums.WRAP_CLAMP,this._wrapT=C$zuc.enums.WRAP_CLAMP);var C$zui=this._genMipmaps?this._mipFilter:-1;C$zue||-1===C$zui||(console.warn("NPOT textures do not support mipmap filter"),C$zui=-1),C$zut.texParameteri(C$zut.TEXTURE_CUBE_MAP,C$zut.TEXTURE_MIN_FILTER,(0,C$zuc.glFilter)(C$zut,this._minFilter,C$zui)),C$zut.texParameteri(C$zut.TEXTURE_CUBE_MAP,C$zut.TEXTURE_MAG_FILTER,(0,C$zuc.glFilter)(C$zut,this._magFilter,-1)),C$zut.texParameteri(C$zut.TEXTURE_CUBE_MAP,C$zut.TEXTURE_WRAP_S,this._wrapS),C$zut.texParameteri(C$zut.TEXTURE_CUBE_MAP,C$zut.TEXTURE_WRAP_T,this._wrapT);C$zue=this._device.ext("EXT_texture_filter_anisotropic");C$zue&&C$zut.texParameteri(C$zut.TEXTURE_CUBE_MAP,C$zue.TEXTURE_MAX_ANISOTROPY_EXT,this._anisotropy)},TextureCube}(C$zur.default);C$zui.default=C$zut,C$zue.exports=C$zui.default},{"./enums":309,"./misc":313,"./texture":319}],319:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=C$zut("./enums");var C$zun=0;function Texture(C$zut){this._device=C$zut,this._width=4,this._height=4,this._genMipmaps=!1,this._compressed=!1,this._anisotropy=1,this._minFilter=C$zur.enums.FILTER_LINEAR,this._magFilter=C$zur.enums.FILTER_LINEAR,this._mipFilter=C$zur.enums.FILTER_LINEAR,this._wrapS=C$zur.enums.WRAP_REPEAT,this._wrapT=C$zur.enums.WRAP_REPEAT,this._format=C$zur.enums.TEXTURE_FMT_RGBA8,this._target=-1,this._id=C$zun++}Texture.prototype.destroy=function(){null!==this._glID?(this._device._gl.deleteTexture(this._glID),this._device._stats.tex-=this.bytes,this._glID=null):console.error("The texture already destroyed")},C$zui.default=Texture,C$zue.exports=C$zui.default},{"./enums":309}],320:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zut("./enums");function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}(C$zut=VertexBuffer.prototype).destroy=function(){-1!==this._glID?(this._device._gl.deleteBuffer(this._glID),this._device._stats.vb-=this.bytes,this._glID=-1):console.error("The buffer already destroyed")},C$zut.update=function(C$zut,C$zue){if(-1!==this._glID){if(0!==C$zue.byteLength){if(C$zut+C$zue.byteLength>this._bytes){if(C$zut)return void console.error("Failed to update data, bytes exceed.");this._needExpandDataStore=!0,this._bytes=C$zut+C$zue.byteLength,this._numVertices=this._bytes/this._bytesPerVertex}var C$zui=this._device._gl;var C$zur=this._usage;C$zui.bindBuffer(C$zui.ARRAY_BUFFER,this._glID),this._needExpandDataStore?(C$zui.bufferData(C$zui.ARRAY_BUFFER,C$zue,C$zur),this._needExpandDataStore=!1):C$zui.bufferSubData(C$zui.ARRAY_BUFFER,C$zut,C$zue),C$zui.bindBuffer(C$zui.ARRAY_BUFFER,null)}}else console.error("The buffer is destroyed")},C$zut.getFormat=function(C$zut){return this._format.element(C$zut)},C$zut.setUsage=function(C$zut){this._usage=C$zut},C$zut=VertexBuffer,(C$zur=[{key:"count",get:function(){return this._numVertices}}])&&_defineProperties(C$zut.prototype,C$zur),C$zun&&_defineProperties(C$zut,C$zun);C$zur=VertexBuffer;function VertexBuffer(C$zut,C$zue,C$zui,C$zur){this._device=C$zut,this._format=C$zue,this._usage=C$zui,this._bytesPerVertex=this._format._bytes,this._bytes=C$zur.byteLength,this._numVertices=this._bytes/this._bytesPerVertex,this._needExpandDataStore=!0,this._glID=C$zut._gl.createBuffer(),this.update(0,C$zur),C$zut._stats.vb+=this._bytes}var C$zur,C$zun;C$zui.default=C$zur,C$zue.exports=C$zui.default},{"./enums":309}],321:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zus=C$zut("./enums");var C$zuc=(C$zut=C$zut("../murmurhash2_gc"))&&C$zut.__esModule?C$zut:{default:C$zut};function VertexFormat(C$zut){this._attr2el={},this._elements=[];var C$zue="";for(var C$zui=this._bytes=0,C$zur=C$zut.length;C$zui<C$zur;++C$zui){var C$zun=C$zut[C$zui];C$zun={name:C$zun.name,offset:this._bytes,stride:0,stream:-1,type:C$zun.type,num:C$zun.num,normalize:void 0!==C$zun.normalize&&C$zun.normalize,bytes:C$zun.num*(0,C$zus.attrTypeBytes)(C$zun.type)};this._attr2el[C$zun.name]=C$zun,this._elements.push(C$zun),this._bytes+=C$zun.bytes,C$zue+=C$zun.name+":"+C$zun.num+":"+C$zun.type+":"+C$zun.normalize}for(var C$zua=0,C$zuo=this._elements.length;C$zua<C$zuo;++C$zua)this._elements[C$zua].stride=this._bytes;this._hash=(0,C$zuc.default)(C$zue,666)}(C$zut=VertexFormat.prototype).element=function(C$zut){return this._attr2el[C$zut]},C$zut.getHash=function(){return this._hash},C$zui.default=VertexFormat,C$zue.exports=C$zui.default},{"../murmurhash2_gc":330,"./enums":309}],322:[function(C$zut,C$zue,C$zui){"use strict";function CircularPool(C$zut,C$zue){this._cursor=0,this._data=new Array(C$zue);for(var C$zui=0;C$zui<C$zue;++C$zui)this._data[C$zui]=C$zut()}C$zui.__esModule=!0,C$zui.default=void 0,CircularPool.prototype.request=function(){var C$zut=this._data[this._cursor];return this._cursor=(this._cursor+1)%this._data.length,C$zut},C$zui.default=CircularPool,C$zue.exports=C$zui.default},{}],323:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=(C$zut=C$zut("./timsort"))&&C$zut.__esModule?C$zut:{default:C$zut};function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}(C$zut=FixedArray.prototype)._resize=function(C$zut){if(C$zut>this._data.length)for(var C$zue=this._data.length;C$zue<C$zut;++C$zue)this._data[C$zue]=void 0},C$zut.reset=function(){for(var C$zut=0;C$zut<this._count;++C$zut)this._data[C$zut]=void 0;this._count=0},C$zut.push=function(C$zut){this._count>=this._data.length&&this._resize(2*this._data.length),this._data[this._count]=C$zut,++this._count},C$zut.pop=function(){--this._count,this._count<0&&(this._count=0);var C$zut=this._data[this._count];return this._data[this._count]=void 0,C$zut},C$zut.fastRemove=function(C$zut){var C$zue;C$zut>=this._count||C$zut<0||(C$zue=this._count-1,this._data[C$zut]=this._data[C$zue],this._data[C$zue]=void 0,--this._count)},C$zut.indexOf=function(C$zut){return this._data.indexOf(C$zut)},C$zut.sort=function(C$zut){return(0,C$zur.default)(this._data,0,this._count,C$zut)},C$zut=FixedArray,(C$zun=[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}])&&_defineProperties(C$zut.prototype,C$zun),C$zua&&_defineProperties(C$zut,C$zua);C$zun=FixedArray;function FixedArray(C$zut){this._count=0,this._data=new Array(C$zut)}var C$zun,C$zua;C$zui.default=C$zun,C$zue.exports=C$zui.default},{"./timsort":328}],324:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.TypedArrayPool=C$zui.RecyclePool=C$zui.Pool=C$zui.LinkedArray=C$zui.FixedArray=C$zui.CircularPool=void 0;var C$zur=_interopRequireDefault(C$zut("./circular-pool"));C$zui.CircularPool=C$zur.default;C$zur=_interopRequireDefault(C$zut("./fixed-array"));C$zui.FixedArray=C$zur.default;C$zur=_interopRequireDefault(C$zut("./linked-array"));C$zui.LinkedArray=C$zur.default;C$zur=_interopRequireDefault(C$zut("./pool"));C$zui.Pool=C$zur.default;C$zur=_interopRequireDefault(C$zut("./recycle-pool"));C$zui.RecyclePool=C$zur.default;C$zur=_interopRequireDefault(C$zut("./typed-array-pool"));function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}C$zui.TypedArrayPool=C$zur.default},{"./circular-pool":322,"./fixed-array":323,"./linked-array":325,"./pool":326,"./recycle-pool":327,"./typed-array-pool":329}],325:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=(C$zut=C$zut("./pool"))&&C$zut.__esModule?C$zut:{default:C$zut};function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}(C$zut=LinkedArray.prototype).add=function(){var C$zut=this._pool.alloc();return this._tail?(this._tail._next=C$zut)._prev=this._tail:this._head=C$zut,this._tail=C$zut,this._count+=1,C$zut},C$zut.remove=function(C$zut){C$zut._prev?C$zut._prev._next=C$zut._next:this._head=C$zut._next,C$zut._next?C$zut._next._prev=C$zut._prev:this._tail=C$zut._prev,C$zut._next=null,C$zut._prev=null,this._pool.free(C$zut),--this._count},C$zut.forEach=function(C$zut,C$zue){var C$zui=this._head;if(C$zui){C$zue&&(C$zut=C$zut.bind(C$zue));var C$zur=0;var C$zun;for(;C$zui;)C$zun=C$zui._next,C$zut(C$zui,C$zur,this),C$zui=C$zun,++C$zur}},C$zut=LinkedArray,(C$zun=[{key:"head",get:function(){return this._head}},{key:"tail",get:function(){return this._tail}},{key:"length",get:function(){return this._count}}])&&_defineProperties(C$zut.prototype,C$zun),C$zua&&_defineProperties(C$zut,C$zua);C$zun=LinkedArray;function LinkedArray(C$zut,C$zue){this._fn=C$zut,this._count=0,this._head=null,this._tail=null,this._pool=new C$zur.default(C$zut,C$zue)}var C$zun,C$zua;C$zui.default=C$zun,C$zue.exports=C$zui.default},{"./pool":326}],326:[function(C$zut,C$zue,C$zui){"use strict";function Pool(C$zut,C$zue){this._fn=C$zut,this._idx=C$zue-1,this._frees=new Array(C$zue);for(var C$zui=0;C$zui<C$zue;++C$zui)this._frees[C$zui]=C$zut()}var C$zur;C$zui.__esModule=!0,C$zui.default=void 0,(C$zur=Pool.prototype)._expand=function(C$zut){var C$zue=this._frees;this._frees=new Array(C$zut);var C$zui=C$zut-C$zue.length;for(var C$zur=0;C$zur<C$zui;++C$zur)this._frees[C$zur]=this._fn();for(var C$zun=C$zui,C$zua=0;C$zun<C$zut;++C$zun,++C$zua)this._frees[C$zun]=C$zue[C$zua];this._idx+=C$zui},C$zur.alloc=function(){this._idx<0&&this._expand(Math.round(1.2*this._frees.length)+1);var C$zut=this._frees[this._idx];return this._frees[this._idx]=null,--this._idx,C$zut},C$zur.free=function(C$zut){++this._idx,this._frees[this._idx]=C$zut},C$zur.clear=function(C$zut){for(var C$zue=0;C$zue<=this._idx;C$zue++)C$zut&&C$zut(this._frees[C$zue]);this._frees.length=0,this._idx=-1},C$zui.default=Pool,C$zue.exports=C$zui.default},{}],327:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=(C$zut=C$zut("./timsort"))&&C$zut.__esModule?C$zut:{default:C$zut};function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}(C$zut=RecyclePool.prototype).reset=function(){this._count=0},C$zut.resize=function(C$zut){if(C$zut>this._data.length)for(var C$zue=this._data.length;C$zue<C$zut;++C$zue)this._data[C$zue]=this._fn()},C$zut.add=function(){return this._count>=this._data.length&&this.resize(2*this._data.length),this._data[this._count++]},C$zut.remove=function(C$zut){var C$zue,C$zui;C$zut>=this._count||(C$zue=this._count-1,C$zui=this._data[C$zut],this._data[C$zut]=this._data[C$zue],this._data[C$zue]=C$zui,--this._count)},C$zut.sort=function(C$zut){return(0,C$zur.default)(this._data,0,this._count,C$zut)},C$zut=RecyclePool,(C$zun=[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}])&&_defineProperties(C$zut.prototype,C$zun),C$zua&&_defineProperties(C$zut,C$zua);C$zun=RecyclePool;function RecyclePool(C$zut,C$zue){this._fn=C$zut,this._count=0,this._data=new Array(C$zue);for(var C$zui=0;C$zui<C$zue;++C$zui)this._data[C$zui]=C$zut()}var C$zun,C$zua;C$zui.default=C$zun,cc.RecyclePool=C$zun,C$zue.exports=C$zui.default},{"./timsort":328}],328:[function(C$zui,C$zur,C$zut){"use strict";C$zut.__esModule=!0,C$zut.default=function(C$zut,C$zue,C$zui,C$zur){if(!Array.isArray(C$zut))throw new TypeError("Can only sort arrays");void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=C$zut.length),void 0===C$zur&&(C$zur=alphabeticalCompare);var C$zun=C$zui-C$zue;if(!(C$zun<2)){var C$zua=0;if(C$zun<C$zul)C$zua=makeAscendingRun(C$zut,C$zue,C$zui,C$zur),binaryInsertionSort(C$zut,C$zue,C$zui,C$zue+C$zua,C$zur);else{var C$zuo=new C$zuh(C$zut,C$zur);var C$zus=function(C$zut){var C$zue=0;for(;C$zul<=C$zut;)C$zue|=1&C$zut,C$zut>>=1;return C$zut+C$zue}(C$zun);do{var C$zuc}while((C$zua=makeAscendingRun(C$zut,C$zue,C$zui,C$zur))<C$zus&&(binaryInsertionSort(C$zut,C$zue,C$zue+(C$zuc=C$zus<(C$zuc=C$zun)?C$zus:C$zuc),C$zue+C$zua,C$zur),C$zua=C$zuc),C$zuo.pushRun(C$zue,C$zua),C$zuo.mergeRuns(),C$zue+=C$zua,0!==(C$zun-=C$zua));C$zuo.forceMergeRuns()}}};var C$zul=32;var C$zua=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function log10(C$zut){return C$zut<1e5?C$zut<100?C$zut<10?0:1:C$zut<1e4?C$zut<1e3?2:3:4:C$zut<1e7?C$zut<1e6?5:6:C$zut<1e9?C$zut<1e8?7:8:9}function alphabeticalCompare(C$zut,C$zue){if(C$zut===C$zue)return 0;if(~~C$zut===C$zut&&~~C$zue===C$zue){if(0===C$zut||0===C$zue)return C$zut<C$zue?-1:1;if(C$zut<0||C$zue<0){if(0<=C$zue)return-1;if(0<=C$zut)return 1;C$zut=-C$zut,C$zue=-C$zue}var C$zui=log10(C$zut);var C$zur=log10(C$zue);var C$zun=0;return C$zui<C$zur?(C$zut*=C$zua[C$zur-C$zui-1],C$zue/=10,C$zun=-1):C$zur<C$zui&&(C$zue*=C$zua[C$zui-C$zur-1],C$zut/=10,C$zun=1),C$zut===C$zue?C$zun:C$zut<C$zue?-1:1}C$zui=String(C$zut);C$zur=String(C$zue);return C$zui===C$zur?0:C$zui<C$zur?-1:1}function makeAscendingRun(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zue+1;if(C$zun===C$zui)return 1;if(C$zur(C$zut[C$zun++],C$zut[C$zue])<0){for(;C$zun<C$zui&&C$zur(C$zut[C$zun],C$zut[C$zun-1])<0;)C$zun++;var C$zua=C$zut;var C$zuo=C$zue;var C$zus=C$zun;for(C$zus--;C$zuo<C$zus;){var C$zuc=C$zua[C$zuo];C$zua[C$zuo++]=C$zua[C$zus],C$zua[C$zus--]=C$zuc}}else for(;C$zun<C$zui&&0<=C$zur(C$zut[C$zun],C$zut[C$zun-1]);)C$zun++;return C$zun-C$zue}function binaryInsertionSort(C$zut,C$zue,C$zui,C$zur,C$zun){for(C$zur===C$zue&&C$zur++;C$zur<C$zui;C$zur++){var C$zua=C$zut[C$zur];var C$zuo=C$zue;var C$zus=C$zur;for(;C$zuo<C$zus;){var C$zuc=C$zuo+C$zus>>>1;C$zun(C$zua,C$zut[C$zuc])<0?C$zus=C$zuc:C$zuo=1+C$zuc}var C$zul=C$zur-C$zuo;switch(C$zul){case 3:C$zut[C$zuo+3]=C$zut[C$zuo+2];case 2:C$zut[C$zuo+2]=C$zut[C$zuo+1];case 1:C$zut[C$zuo+1]=C$zut[C$zuo];break;default:for(;0<C$zul;)C$zut[C$zuo+C$zul]=C$zut[C$zuo+C$zul-1],C$zul--}C$zut[C$zuo]=C$zua}}function gallopLeft(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=0;var C$zus=0;var C$zuc=1;if(0<C$zua(C$zut,C$zue[C$zui+C$zun])){for(C$zus=C$zur-C$zun;C$zuc<C$zus&&0<C$zua(C$zut,C$zue[C$zui+C$zun+C$zuc]);)(C$zuc=1+((C$zuo=C$zuc)<<1))<=0&&(C$zuc=C$zus);C$zus<C$zuc&&(C$zuc=C$zus),C$zuo+=C$zun,C$zuc+=C$zun}else{for(C$zus=C$zun+1;C$zuc<C$zus&&C$zua(C$zut,C$zue[C$zui+C$zun-C$zuc])<=0;)(C$zuc=1+((C$zuo=C$zuc)<<1))<=0&&(C$zuc=C$zus);C$zur=C$zuo;C$zuo=C$zun-(C$zuc=C$zus<C$zuc?C$zus:C$zuc),C$zuc=C$zun-C$zur}for(C$zuo++;C$zuo<C$zuc;){var C$zul=C$zuo+(C$zuc-C$zuo>>>1);0<C$zua(C$zut,C$zue[C$zui+C$zul])?C$zuo=C$zul+1:C$zuc=C$zul}return C$zuc}function gallopRight(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=0;var C$zus=0;var C$zuc=1;if(C$zua(C$zut,C$zue[C$zui+C$zun])<0){for(C$zus=C$zun+1;C$zuc<C$zus&&C$zua(C$zut,C$zue[C$zui+C$zun-C$zuc])<0;)(C$zuc=1+((C$zuo=C$zuc)<<1))<=0&&(C$zuc=C$zus);var C$zuh=C$zuo;C$zuo=C$zun-(C$zuc=C$zus<C$zuc?C$zus:C$zuc),C$zuc=C$zun-C$zuh}else{for(C$zus=C$zur-C$zun;C$zuc<C$zus&&0<=C$zua(C$zut,C$zue[C$zui+C$zun+C$zuc]);)(C$zuc=1+((C$zuo=C$zuc)<<1))<=0&&(C$zuc=C$zus);C$zus<C$zuc&&(C$zuc=C$zus),C$zuo+=C$zun,C$zuc+=C$zun}for(C$zuo++;C$zuo<C$zuc;){var C$zul=C$zuo+(C$zuc-C$zuo>>>1);C$zua(C$zut,C$zue[C$zui+C$zul])<0?C$zuc=C$zul:C$zuo=C$zul+1}return C$zuc}(C$zue=TimSort.prototype).pushRun=function(C$zut,C$zue){this.runStart[this.stackSize]=C$zut,this.runLength[this.stackSize]=C$zue,this.stackSize+=1},C$zue.mergeRuns=function(){for(;1<this.stackSize;){var C$zut=this.stackSize-2;if(1<=C$zut&&this.runLength[C$zut-1]<=this.runLength[C$zut]+this.runLength[C$zut+1]||2<=C$zut&&this.runLength[C$zut-2]<=this.runLength[C$zut]+this.runLength[C$zut-1])this.runLength[C$zut-1]<this.runLength[C$zut+1]&&C$zut--;else if(this.runLength[C$zut]>this.runLength[C$zut+1])break;this.mergeAt(C$zut)}},C$zue.forceMergeRuns=function(){for(;1<this.stackSize;){var C$zut=this.stackSize-2;0<C$zut&&this.runLength[C$zut-1]<this.runLength[C$zut+1]&&C$zut--,this.mergeAt(C$zut)}},C$zue.mergeAt=function(C$zut){var C$zue=this.compare;var C$zui=this.array;var C$zur=this.runStart[C$zut];var C$zun=this.runLength[C$zut];var C$zua=this.runStart[C$zut+1];var C$zuo=this.runLength[C$zut+1];this.runLength[C$zut]=C$zun+C$zuo,C$zut===this.stackSize-3&&(this.runStart[C$zut+1]=this.runStart[C$zut+2],this.runLength[C$zut+1]=this.runLength[C$zut+2]),this.stackSize--;C$zut=gallopRight(C$zui[C$zua],C$zui,C$zur,C$zun,0,C$zue);C$zur+=C$zut,0!=(C$zun-=C$zut)&&0!==(C$zuo=gallopLeft(C$zui[C$zur+C$zun-1],C$zui,C$zua,C$zuo,C$zuo-1,C$zue))&&(C$zun<=C$zuo?this.mergeLow(C$zur,C$zun,C$zua,C$zuo):this.mergeHigh(C$zur,C$zun,C$zua,C$zuo))},C$zue.mergeLow=function(C$zuh,C$zut,C$zuu,C$zue){var C$zu_=this.compare;var C$zui=this.array;var C$zur=this.tmp;var C$zun=0;for(C$zun=0;C$zun<C$zut;C$zun++)C$zur[C$zun]=C$zui[C$zuh+C$zun];var C$zua=0;var C$zuo=C$zuu;var C$zus=C$zuh;if(C$zui[C$zus++]=C$zui[C$zuo++],0!=--C$zue)if(1!==C$zut){var C$zud=this.minGallop;for(;;){var C$zuc=0;var C$zul=0;var C$zuf=!1;do{if(C$zu_(C$zui[C$zuo],C$zur[C$zua])<0){if(C$zui[C$zus++]=C$zui[C$zuo++],C$zul++,(C$zuc=0)==--C$zue){C$zuf=!0;break}}else if(C$zui[C$zus++]=C$zur[C$zua++],C$zuc++,C$zul=0,1==--C$zut){C$zuf=!0;break}}while((C$zuc|C$zul)<C$zud);if(C$zuf)break;do{if(0!==(C$zuc=gallopRight(C$zui[C$zuo],C$zur,C$zua,C$zut,0,C$zu_))){for(C$zun=0;C$zun<C$zuc;C$zun++)C$zui[C$zus+C$zun]=C$zur[C$zua+C$zun];if(C$zus+=C$zuc,C$zua+=C$zuc,(C$zut-=C$zuc)<=1){C$zuf=!0;break}}if(C$zui[C$zus++]=C$zui[C$zuo++],0==--C$zue){C$zuf=!0;break}if(0!==(C$zul=gallopLeft(C$zur[C$zua],C$zui,C$zuo,C$zue,0,C$zu_))){for(C$zun=0;C$zun<C$zul;C$zun++)C$zui[C$zus+C$zun]=C$zui[C$zuo+C$zun];if(C$zus+=C$zul,C$zuo+=C$zul,0===(C$zue-=C$zul)){C$zuf=!0;break}}if(C$zui[C$zus++]=C$zur[C$zua++],1==--C$zut){C$zuf=!0;break}}while(C$zud--,7<=C$zuc||7<=C$zul);if(C$zuf)break;C$zud<0&&(C$zud=0),C$zud+=2}if((this.minGallop=C$zud)<1&&(this.minGallop=1),1===C$zut){for(C$zun=0;C$zun<C$zue;C$zun++)C$zui[C$zus+C$zun]=C$zui[C$zuo+C$zun];C$zui[C$zus+C$zue]=C$zur[C$zua]}else{if(0===C$zut)throw new Error("mergeLow preconditions were not respected");for(C$zun=0;C$zun<C$zut;C$zun++)C$zui[C$zus+C$zun]=C$zur[C$zua+C$zun]}}else{for(C$zun=0;C$zun<C$zue;C$zun++)C$zui[C$zus+C$zun]=C$zui[C$zuo+C$zun];C$zui[C$zus+C$zue]=C$zur[C$zua]}else for(C$zun=0;C$zun<C$zut;C$zun++)C$zui[C$zus+C$zun]=C$zur[C$zua+C$zun]},C$zue.mergeHigh=function(C$zuh,C$zut,C$zuu,C$zue){var C$zu_=this.compare;var C$zui=this.array;var C$zur=this.tmp;var C$zun=0;for(C$zun=0;C$zun<C$zue;C$zun++)C$zur[C$zun]=C$zui[C$zuu+C$zun];var C$zua=C$zuh+C$zut-1;var C$zud=C$zue-1;var C$zuo=C$zuu+C$zue-1;var C$zus=0;var C$zuf=0;if(C$zui[C$zuo--]=C$zui[C$zua--],0!=--C$zut)if(1!==C$zue){var C$zup=this.minGallop;for(;;){var C$zuc=0;var C$zul=0;var C$zum=!1;do{if(C$zu_(C$zur[C$zud],C$zui[C$zua])<0){if(C$zui[C$zuo--]=C$zui[C$zua--],C$zuc++,(C$zul=0)==--C$zut){C$zum=!0;break}}else if(C$zui[C$zuo--]=C$zur[C$zud--],C$zul++,C$zuc=0,1==--C$zue){C$zum=!0;break}}while((C$zuc|C$zul)<C$zup);if(C$zum)break;do{if(0!==(C$zuc=C$zut-gallopRight(C$zur[C$zud],C$zui,C$zuh,C$zut,C$zut-1,C$zu_))){for(C$zut-=C$zuc,C$zuf=(C$zuo-=C$zuc)+1,C$zus=(C$zua-=C$zuc)+1,C$zun=C$zuc-1;0<=C$zun;C$zun--)C$zui[C$zuf+C$zun]=C$zui[C$zus+C$zun];if(0===C$zut){C$zum=!0;break}}if(C$zui[C$zuo--]=C$zur[C$zud--],1==--C$zue){C$zum=!0;break}if(0!==(C$zul=C$zue-gallopLeft(C$zui[C$zua],C$zur,0,C$zue,C$zue-1,C$zu_))){for(C$zue-=C$zul,C$zuf=(C$zuo-=C$zul)+1,C$zus=(C$zud-=C$zul)+1,C$zun=0;C$zun<C$zul;C$zun++)C$zui[C$zuf+C$zun]=C$zur[C$zus+C$zun];if(C$zue<=1){C$zum=!0;break}}if(C$zui[C$zuo--]=C$zui[C$zua--],0==--C$zut){C$zum=!0;break}}while(C$zup--,7<=C$zuc||7<=C$zul);if(C$zum)break;C$zup<0&&(C$zup=0),C$zup+=2}if((this.minGallop=C$zup)<1&&(this.minGallop=1),1===C$zue){for(C$zuf=(C$zuo-=C$zut)+1,C$zus=(C$zua-=C$zut)+1,C$zun=C$zut-1;0<=C$zun;C$zun--)C$zui[C$zuf+C$zun]=C$zui[C$zus+C$zun];C$zui[C$zuo]=C$zur[C$zud]}else{if(0===C$zue)throw new Error("mergeHigh preconditions were not respected");for(C$zus=C$zuo-(C$zue-1),C$zun=0;C$zun<C$zue;C$zun++)C$zui[C$zus+C$zun]=C$zur[C$zun]}}else{for(C$zuf=(C$zuo-=C$zut)+1,C$zus=(C$zua-=C$zut)+1,C$zun=C$zut-1;0<=C$zun;C$zun--)C$zui[C$zuf+C$zun]=C$zui[C$zus+C$zun];C$zui[C$zuo]=C$zur[C$zud]}else for(C$zus=C$zuo-(C$zue-1),C$zun=0;C$zun<C$zue;C$zun++)C$zui[C$zus+C$zun]=C$zur[C$zun]};var C$zuh=TimSort;function TimSort(C$zut,C$zue){this.array=C$zut,this.compare=C$zue,this.minGallop=7,this.length=C$zut.length,this.tmpStorageLength=256,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength),this.stackSize=0}var C$zue;C$zur.exports=C$zut.default},{}],329:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=Array(8);for(var C$zun=0;C$zun<8;++C$zun)C$zur[C$zun]=[];function _log2(C$zut){var C$zue,C$zui;return C$zue=(65535<C$zut)<<4,(C$zue=(C$zue|=C$zui=(255<(C$zut>>>=C$zue))<<3)|(C$zui=(15<(C$zut>>>=C$zui))<<2)|(C$zui=(3<(C$zut>>>=C$zui))<<1))|(C$zut>>>=C$zui)>>1}function _alloc(C$zut){C$zut=function(C$zut){for(var C$zue=16;C$zue<=1<<28;C$zue*=16)if(C$zut<=C$zue)return C$zue;return 0}(C$zut);var C$zue=C$zur[_log2(C$zut)>>2];return 0<C$zue.length?C$zue.pop():new ArrayBuffer(C$zut)}C$zui.default={alloc_int8:function(C$zut){var C$zue=new Int8Array(_alloc(C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_uint8:function(C$zut){var C$zue=new Uint8Array(_alloc(C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_int16:function(C$zut){var C$zue=new Int16Array(_alloc(2*C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_uint16:function(C$zut){var C$zue=new Uint16Array(_alloc(2*C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_int32:function(C$zut){var C$zue=new Int32Array(_alloc(4*C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_uint32:function(C$zut){var C$zue=new Uint32Array(_alloc(4*C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_float32:function(C$zut){var C$zue=new Float32Array(_alloc(4*C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_float64:function(C$zut){var C$zue=new Float64Array(_alloc(8*C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},alloc_dataview:function(C$zut){var C$zue=new DataView(_alloc(C$zut),0,C$zut);return C$zue.length!==C$zut?C$zue.subarray(0,C$zut):C$zue},free:function(C$zut){C$zut=C$zut.buffer,C$zur[_log2(C$zut.byteLength)>>2].push(C$zut)},reset:function(){var C$zut=Array(8);for(var C$zue=0;C$zue<8;++C$zue)C$zut[C$zue]=[]}},C$zue.exports=C$zui.default},{}],330:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=function(C$zut,C$zue){var C$zui,C$zur=C$zut.length,C$zun=C$zue^C$zur,C$zua=0;for(;4<=C$zur;)C$zui=1540483477*(65535&(C$zui=255&C$zut.charCodeAt(C$zua)|(255&C$zut.charCodeAt(++C$zua))<<8|(255&C$zut.charCodeAt(++C$zua))<<16|(255&C$zut.charCodeAt(++C$zua))<<24))+((1540483477*(C$zui>>>16)&65535)<<16),C$zun=1540483477*(65535&C$zun)+((1540483477*(C$zun>>>16)&65535)<<16)^(C$zui=1540483477*(65535&(C$zui^=C$zui>>>24))+((1540483477*(C$zui>>>16)&65535)<<16)),C$zur-=4,++C$zua;switch(C$zur){case 3:C$zun^=(255&C$zut.charCodeAt(C$zua+2))<<16;case 2:C$zun^=(255&C$zut.charCodeAt(C$zua+1))<<8;case 1:C$zun=1540483477*(65535&(C$zun^=255&C$zut.charCodeAt(C$zua)))+((1540483477*(C$zun>>>16)&65535)<<16)}return C$zun=1540483477*(65535&(C$zun^=C$zun>>>13))+((1540483477*(C$zun>>>16)&65535)<<16),(C$zun^=C$zun>>>15)>>>0},C$zue.exports=C$zui.default},{}],331:[function(C$zut,C$zui,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zun=C$zut("../../core/value-types");var C$zur=_interopRequireDefault(C$zut("../core/base-renderer"));var C$zuc=_interopRequireDefault(C$zut("../enums"));C$zut=C$zut("../memop");function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}function _createSuper(C$zur){return function(){var C$zut=_getPrototypeOf(C$zur);var C$zue;return C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments),C$zut=this,!(C$zui=C$zue)||"object"!=typeof C$zui&&"function"!=typeof C$zui?_assertThisInitialized(C$zut):C$zui;var C$zui}}function _assertThisInitialized(C$zut){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zuh=new Float32Array(16);var C$zuu=new Float32Array(16);var C$zu_=new Float32Array(16);var C$zua=new Float32Array(16);var C$zud=new Float32Array(4);var C$zuf=new Float32Array(64);var C$zup=[];var C$zum=new Float32Array(4);var C$zuo=new C$zun.Vec4(0,0,0,0);var C$zuv=new C$zun.Vec3(0,0,0);var C$zus=new C$zun.Vec3(0,0,0);var C$zul=new C$zut.RecyclePool(function(){return new Float32Array(16)},8);C$zut=function(C$zui){var C$zut;C$zut=C$zui,(C$zue=ForwardRenderer).prototype=Object.create(C$zut.prototype),(C$zue.prototype.constructor=C$zue).__proto__=C$zut;_createSuper(ForwardRenderer);function ForwardRenderer(C$zut,C$zue){return(C$zut=C$zui.call(this,C$zut,C$zue)||this)._time=new Float32Array(4),C$zut._lights=[],C$zut._shadowLights=[],C$zut._numLights=0,C$zut._defines={},C$zut._registerStage("shadowcast",C$zut._shadowStage.bind(_assertThisInitialized(C$zut))),C$zut._registerStage("opaque",C$zut._opaqueStage.bind(_assertThisInitialized(C$zut))),C$zut._registerStage("transparent",C$zut._transparentStage.bind(_assertThisInitialized(C$zut))),C$zut}var C$zue=ForwardRenderer.prototype;return C$zue.reset=function(){C$zul.reset(),C$zui.prototype.reset.call(this)},C$zue.render=function(C$zut,C$zue){this.reset(),this._time[0]+=C$zue,this._device.setUniform("cc_time",this._time),this._updateLights(C$zut);var C$zui=this._device._gl.canvas;for(var C$zur=0;C$zur<C$zut._cameras.length;++C$zur){var C$zun=this._requestView();var C$zua=C$zui.width;var C$zuo=C$zui.height;C$zut._cameras.data[C$zur].extractView(C$zun,C$zua,C$zuo)}this._viewPools.sort(function(C$zut,C$zue){return C$zut._priority-C$zue._priority});for(var C$zus=0;C$zus<this._viewPools.length;++C$zus){var C$zuc=this._viewPools.data[C$zus];this._render(C$zuc,C$zut)}},C$zue.renderCamera=function(C$zut,C$zue){this.reset();var C$zui=this._device._gl.canvas;var C$zur=C$zui.width;C$zui=C$zui.height;var C$zun=this._requestView();C$zut.extractView(C$zun,C$zur,C$zui),this._render(C$zun,C$zue)},C$zue._updateLights=function(C$zut){this._lights.length=0,this._shadowLights.length=0;var C$zue=C$zut._lights;for(var C$zui=0;C$zui<C$zue.length;++C$zui){var C$zur=C$zue.data[C$zui];var C$zun;C$zur.update(this._device),C$zur.shadowType!==C$zuc.default.SHADOW_NONE?(this._shadowLights.length<2&&this._shadowLights.splice(0,0,C$zur),C$zun=this._requestView(),C$zur.extractView(C$zun,["shadowcast"]),this._lights.splice(0,0,C$zur)):this._lights.push(C$zur)}this._updateLightDefines(),this._numLights=C$zue._count},C$zue._updateLightDefines=function(){var C$zut=this._defines;for(var C$zue=0;C$zue<this._lights.length;++C$zue){var C$zui=this._lights[C$zue];C$zut["CC_LIGHT_"+C$zue+"_TYPE"]=C$zui._type,C$zut["CC_SHADOW_"+C$zue+"_TYPE"]=C$zui._shadowType}C$zut.CC_NUM_LIGHTS=Math.min(4,this._lights.length),C$zut.CC_NUM_SHADOW_LIGHTS=Math.min(4,this._shadowLights.length)},C$zue._submitLightsUniforms=function(){var C$zut=this._device;if(0<this._lights.length){var C$zue=C$zul.add();var C$zui=C$zul.add();var C$zur=C$zul.add();var C$zun=Math.min(4,this._lights.length);for(var C$zua=0;C$zua<C$zun;++C$zua){var C$zuo=this._lights[C$zua];var C$zus=4*C$zua;C$zur.set(C$zuo._colorUniform,C$zus),C$zui.set(C$zuo._directionUniform,C$zus),C$zue.set(C$zuo._positionUniform,C$zus),C$zue[3+C$zus]=C$zuo._range,C$zuo._type===C$zuc.default.LIGHT_SPOT?(C$zui[3+C$zus]=C$zuo._spotUniform[0],C$zur[3+C$zus]=C$zuo._spotUniform[1]):(C$zui[3+C$zus]=0,C$zur[3+C$zus]=0)}C$zut.setUniform("cc_lightDirection",C$zui),C$zut.setUniform("cc_lightColor",C$zur),C$zut.setUniform("cc_lightPositionAndRange",C$zue)}},C$zue._submitShadowStageUniforms=function(C$zut){var C$zue=C$zut._shadowLight;var C$zui=C$zum;C$zui[0]=C$zue.shadowMinDepth,C$zui[1]=C$zue.shadowMaxDepth,C$zui[2]=C$zue.shadowDepthScale,C$zui[3]=C$zue.shadowDarkness,this._device.setUniform("cc_shadow_map_lightViewProjMatrix",C$zun.Mat4.toArray(C$zua,C$zut._matViewProj)),this._device.setUniform("cc_shadow_map_info",C$zui),this._device.setUniform("cc_shadow_map_bias",C$zue.shadowBias),this._defines.CC_SHADOW_TYPE=C$zue._shadowType},C$zue._submitOtherStagesUniforms=function(){var C$zut=C$zul.add();for(var C$zue=0;C$zue<this._shadowLights.length;++C$zue){var C$zui=this._shadowLights[C$zue];var C$zur=C$zup[C$zue];C$zur=C$zur||(C$zup[C$zue]=new Float32Array(C$zuf.buffer,64*C$zue,16)),C$zun.Mat4.toArray(C$zur,C$zui.viewProjMatrix);C$zur=4*C$zue;C$zut[C$zur]=C$zui.shadowMinDepth,C$zut[1+C$zur]=C$zui.shadowMaxDepth,C$zut[2+C$zur]=C$zui._shadowResolution,C$zut[3+C$zur]=C$zui.shadowDarkness}this._device.setUniform("cc_shadow_lightViewProjMatrix",C$zuf),this._device.setUniform("cc_shadow_info",C$zut)},C$zue._sortItems=function(C$zut){C$zut.sort(function(C$zut,C$zue){return C$zut.passes.length!==C$zue.passes.length?C$zut.passes.length-C$zue.passes.length:C$zut.sortKey-C$zue.sortKey})},C$zue._shadowStage=function(C$zut,C$zue){this._submitShadowStageUniforms(C$zut);for(var C$zui=0;C$zui<C$zue.length;++C$zui){var C$zur=C$zue.data[C$zui];C$zur.effect.getDefine("CC_CASTING_SHADOW")&&this._draw(C$zur)}},C$zue._drawItems=function(C$zut,C$zue){var C$zui=this._shadowLights;if(0===C$zui.length&&0===this._numLights)for(var C$zur=0;C$zur<C$zue.length;++C$zur){var C$zun=C$zue.data[C$zur];this._draw(C$zun)}else for(var C$zua=0;C$zua<C$zue.length;++C$zua){var C$zuo=C$zue.data[C$zua];for(var C$zus=0;C$zus<C$zui.length;++C$zus)this._device.setTexture("cc_shadow_map_"+C$zus,C$zui[C$zus].shadowMap,this._allocTextureUnit());this._draw(C$zuo)}},C$zue._opaqueStage=function(C$zut,C$zue){C$zut.getPosition(C$zuo),this._device.setUniform("cc_matView",C$zun.Mat4.toArray(C$zuh,C$zut._matView)),this._device.setUniform("cc_matViewInv",C$zun.Mat4.toArray(C$zuu,C$zut._matViewInv)),this._device.setUniform("cc_matpProj",C$zun.Mat4.toArray(C$zu_,C$zut._matProj)),this._device.setUniform("cc_matViewProj",C$zun.Mat4.toArray(C$zua,C$zut._matViewProj)),this._device.setUniform("cc_cameraPos",C$zun.Vec4.toArray(C$zud,C$zuo)),this._submitLightsUniforms(),this._submitOtherStagesUniforms(),this._drawItems(C$zut,C$zue)},C$zue._transparentStage=function(C$zut,C$zue){C$zut.getPosition(C$zuo),C$zut.getForward(C$zuv),this._device.setUniform("cc_matView",C$zun.Mat4.toArray(C$zuh,C$zut._matView)),this._device.setUniform("cc_matViewInv",C$zun.Mat4.toArray(C$zuu,C$zut._matViewInv)),this._device.setUniform("cc_matpProj",C$zun.Mat4.toArray(C$zu_,C$zut._matProj)),this._device.setUniform("cc_matViewProj",C$zun.Mat4.toArray(C$zua,C$zut._matViewProj)),this._device.setUniform("cc_cameraPos",C$zun.Vec4.toArray(C$zud,C$zuo)),this._submitLightsUniforms(),this._submitOtherStagesUniforms();for(var C$zui=0;C$zui<C$zue.length;++C$zui){var C$zur=C$zue.data[C$zui];C$zur.node.getWorldPosition(C$zus),C$zun.Vec3.sub(C$zus,C$zus,C$zuo),C$zur.sortKey=-C$zun.Vec3.dot(C$zus,C$zuv)}this._sortItems(C$zue),this._drawItems(C$zut,C$zue)},ForwardRenderer}(C$zur.default);C$zue.default=C$zut,C$zui.exports=C$zue.default},{"../../core/value-types":279,"../core/base-renderer":301,"../enums":307,"../memop":324}],332:[function(C$zut,C$zui,C$zue){"use strict";C$zue.__esModule=!0,C$zue.default=void 0;var C$zus=C$zut("../../core/value-types");var C$zu_=C$zut("../../core/geom-utils");var C$zuc=(C$zut=C$zut("../enums"))&&C$zut.__esModule?C$zut:{default:C$zut};function _defineProperties(C$zut,C$zue){for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur=C$zue[C$zui];C$zur.enumerable=C$zur.enumerable||!1,C$zur.configurable=!0,"value"in C$zur&&(C$zur.writable=!0),Object.defineProperty(C$zut,C$zur.key,C$zur)}}var C$zun=new C$zus.Mat4;var C$zua=new C$zus.Mat4;var C$zud=new C$zus.Mat4;var C$zur=new C$zus.Mat4;var C$zuo=new C$zus.Mat4;var C$zul=new C$zus.Mat4;var C$zuh=new C$zus.Vec3;var C$zuu=new C$zus.Vec3;(C$zut=Camera.prototype).setCullingMask=function(C$zut){this._cullingMask=C$zut},C$zut.getNode=function(){return this._node},C$zut.setNode=function(C$zut){this._node=C$zut},C$zut.getType=function(){return this._projection},C$zut.setType=function(C$zut){this._projection=C$zut},C$zut.getPriority=function(){return this._priority},C$zut.setPriority=function(C$zut){this._priority=C$zut},C$zut.getOrthoHeight=function(){return this._orthoHeight},C$zut.setOrthoHeight=function(C$zut){this._orthoHeight=C$zut},C$zut.getFov=function(){return this._fov},C$zut.setFov=function(C$zut){this._fov=C$zut},C$zut.getNear=function(){return this._near},C$zut.setNear=function(C$zut){this._near=C$zut},C$zut.getFar=function(){return this._far},C$zut.setFar=function(C$zut){this._far=C$zut},C$zut.getColor=function(C$zut){return C$zus.Vec4.copy(C$zut,this._color)},C$zut.setColor=function(C$zut,C$zue,C$zui,C$zur){C$zus.Vec4.set(this._color,C$zut,C$zue,C$zui,C$zur)},C$zut.getDepth=function(){return this._depth},C$zut.setDepth=function(C$zut){this._depth=C$zut},C$zut.getStencil=function(){return this._stencil},C$zut.setStencil=function(C$zut){this._stencil=C$zut},C$zut.getClearFlags=function(){return this._clearFlags},C$zut.setClearFlags=function(C$zut){this._clearFlags=C$zut},C$zut.getRect=function(C$zut){return C$zut.x=this._rect.x,C$zut.y=this._rect.y,C$zut.w=this._rect.w,C$zut.h=this._rect.h,C$zut},C$zut.setRect=function(C$zut,C$zue,C$zui,C$zur){this._rect.x=C$zut,this._rect.y=C$zue,this._rect.w=C$zui,this._rect.h=C$zur},C$zut.getStages=function(){return this._stages},C$zut.setStages=function(C$zut){this._stages=C$zut},C$zut.getFramebuffer=function(){return this._framebuffer},C$zut.setFrameBuffer=function(C$zut){this._framebuffer=C$zut},C$zut._calcMatrices=function(C$zut,C$zue){this._node.getWorldRT(C$zud),C$zus.Mat4.invert(C$zua,C$zud);C$zut/=C$zue;this._projection===C$zuc.default.PROJ_PERSPECTIVE?C$zus.Mat4.perspective(C$zur,this._fov,C$zut,this._near,this._far):(C$zue=this._orthoHeight*C$zut,C$zut=this._orthoHeight,C$zus.Mat4.ortho(C$zur,-C$zue,C$zue,-C$zut,C$zut,this._near,this._far)),C$zus.Mat4.mul(C$zuo,C$zur,C$zua),C$zus.Mat4.invert(C$zul,C$zuo)},C$zut.extractView=function(C$zut,C$zue,C$zui){this._framebuffer&&(C$zue=this._framebuffer._width,C$zui=this._framebuffer._height),C$zut._priority=this._priority,C$zut._rect.x=this._rect.x*C$zue,C$zut._rect.y=this._rect.y*C$zui,C$zut._rect.w=this._rect.w*C$zue,C$zut._rect.h=this._rect.h*C$zui,this.getColor(C$zut._color),C$zut._depth=this._depth,C$zut._stencil=this._stencil,C$zut._clearFlags=this._clearFlags,C$zut._clearModel=this._clearModel,C$zut._stages=this._stages,C$zut._framebuffer=this._framebuffer,this._calcMatrices(C$zue,C$zui),C$zus.Mat4.copy(C$zut._matView,C$zua),C$zus.Mat4.copy(C$zut._matViewInv,C$zud),C$zus.Mat4.copy(C$zut._matProj,C$zur),C$zus.Mat4.copy(C$zut._matViewProj,C$zuo),C$zus.Mat4.copy(C$zut._matInvViewProj,C$zul),C$zut._cullingMask=this._cullingMask},C$zut.screenPointToRay=function(C$zut,C$zue,C$zui,C$zur,C$zun){if(!cc.geomUtils)return C$zun;C$zun=C$zun||new C$zu_.Ray,this._calcMatrices(C$zui,C$zur);var C$zua=this._rect.x*C$zui;var C$zuo=this._rect.y*C$zur;C$zui=this._rect.w*C$zui;C$zur=this._rect.h*C$zur;return C$zus.Vec3.set(C$zuu,(C$zut-C$zua)/C$zui*2-1,(C$zue-C$zuo)/C$zur*2-1,1),C$zus.Vec3.transformMat4(C$zuu,C$zuu,C$zul),this._projection===C$zuc.default.PROJ_PERSPECTIVE?this._node.getWorldPosition(C$zuh):(C$zus.Vec3.set(C$zuh,(C$zut-C$zua)/C$zui*2-1,(C$zue-C$zuo)/C$zur*2-1,-1),C$zus.Vec3.transformMat4(C$zuh,C$zuh,C$zul)),C$zu_.Ray.fromPoints(C$zun,C$zuh,C$zuu)},C$zut.screenToWorld=function(C$zut,C$zue,C$zui,C$zur){this._calcMatrices(C$zui,C$zur);var C$zun=this._rect.x*C$zui;var C$zua=this._rect.y*C$zur;C$zui=this._rect.w*C$zui;C$zur=this._rect.h*C$zur;return this._projection===C$zuc.default.PROJ_PERSPECTIVE?(C$zus.Vec3.set(C$zut,(C$zue.x-C$zun)/C$zui*2-1,(C$zue.y-C$zua)/C$zur*2-1,.9999),C$zus.Vec3.transformMat4(C$zut,C$zut,C$zul),this._node.getWorldPosition(C$zuh),C$zus.Vec3.lerp(C$zut,C$zuh,C$zut,(0,C$zus.lerp)(this._near/this._far,1,C$zue.z))):(C$zus.Vec3.set(C$zut,(C$zue.x-C$zun)/C$zui*2-1,(C$zue.y-C$zua)/C$zur*2-1,2*C$zue.z-1),C$zus.Vec3.transformMat4(C$zut,C$zut,C$zul)),C$zut},C$zut.worldToScreen=function(C$zut,C$zue,C$zui,C$zur){this._calcMatrices(C$zui,C$zur);var C$zun=this._rect.x*C$zui;var C$zua=this._rect.y*C$zur;C$zui=this._rect.w*C$zui;C$zur=this._rect.h*C$zur;return C$zus.Vec3.transformMat4(C$zut,C$zue,C$zuo),C$zut.x=C$zun+.5*(C$zut.x+1)*C$zui,C$zut.y=C$zua+.5*(C$zut.y+1)*C$zur,C$zut.z=.5*C$zut.z+.5,C$zut},C$zut.worldMatrixToScreen=function(C$zut,C$zue,C$zui,C$zur){this._calcMatrices(C$zui,C$zur),C$zus.Mat4.mul(C$zut,C$zuo,C$zue);C$zue=C$zui/2;C$zui=C$zur/2;return C$zus.Mat4.identity(C$zun),C$zus.Mat4.transform(C$zun,C$zun,C$zus.Vec3.set(C$zuh,C$zue,C$zui,0)),C$zus.Mat4.scale(C$zun,C$zun,C$zus.Vec3.set(C$zuh,C$zue,C$zui,1)),C$zus.Mat4.mul(C$zut,C$zun,C$zut),C$zut},C$zut=Camera,(C$zuf=[{key:"cullingMask",get:function(){return this._cullingMask},set:function(C$zut){this._cullingMask=C$zut}}])&&_defineProperties(C$zut.prototype,C$zuf),C$zup&&_defineProperties(C$zut,C$zup);C$zuf=Camera;function Camera(){this._poolID=-1,this._node=null,this._projection=C$zuc.default.PROJ_PERSPECTIVE,this._priority=0,this._color=new C$zus.Vec4(.2,.3,.47,1),this._depth=1,this._stencil=0,this._clearFlags=C$zuc.default.CLEAR_COLOR|C$zuc.default.CLEAR_DEPTH,this._clearModel=null,this._stages=[],this._framebuffer=null,this._near=.01,this._far=1e3,this._fov=Math.PI/4,this._rect={x:0,y:0,w:1,h:1},this._orthoHeight=10,this._cullingMask=4294967295}var C$zuf,C$zup;C$zue.default=C$zuf,C$zui.exports=C$zue.default},{"../../core/geom-utils":123,"../../core/value-types":279,"../enums":307}],333:[function(C$zut,C$zue,C$zui){"use strict";function Model(){this._type="default",this._poolID=-1,this._node=null,this._inputAssembler=null,this._effect=null,this._viewID=-1,this._cameraID=-1,this._userKey=-1,this._castShadow=!1,this._boundingShape=null}var C$zur;C$zui.__esModule=!0,C$zui.default=void 0,(C$zur=Model.prototype).setNode=function(C$zut){this._node=C$zut},C$zur.setInputAssembler=function(C$zut){this._inputAssembler=C$zut},C$zur.setEffect=function(C$zut){this._effect=C$zut},C$zur.setUserKey=function(C$zut){this._userKey=C$zut},C$zur.extractDrawItem=function(C$zut){C$zut.model=this,C$zut.node=this._node,C$zut.ia=this._inputAssembler,C$zut.effect=this._effect},C$zui.default=Model,C$zue.exports=C$zui.default},{}],334:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;var C$zur=C$zut("../memop");function Scene(C$zut){this._lights=new C$zur.FixedArray(16),this._models=new C$zur.FixedArray(16),this._cameras=new C$zur.FixedArray(16),this._debugCamera=null,this._app=C$zut,this._views=[]}(C$zut=Scene.prototype)._add=function(C$zut,C$zue){-1===C$zue._poolID&&(C$zut.push(C$zue),C$zue._poolID=C$zut.length-1)},C$zut._remove=function(C$zut,C$zue){-1!==C$zue._poolID&&(C$zut.data[C$zut.length-1]._poolID=C$zue._poolID,C$zut.fastRemove(C$zue._poolID),C$zue._poolID=-1)},C$zut.reset=function(){for(var C$zut=0;C$zut<this._models.length;++C$zut)this._models.data[C$zut]._viewID=-1},C$zut.setDebugCamera=function(C$zut){this._debugCamera=C$zut},C$zut.getCameraCount=function(){return this._cameras.length},C$zut.getCamera=function(C$zut){return this._cameras.data[C$zut]},C$zut.addCamera=function(C$zut){this._add(this._cameras,C$zut)},C$zut.removeCamera=function(C$zut){this._remove(this._cameras,C$zut)},C$zut.getModelCount=function(){return this._models.length},C$zut.getModel=function(C$zut){return this._models.data[C$zut]},C$zut.addModel=function(C$zut){this._add(this._models,C$zut)},C$zut.removeModel=function(C$zut){this._remove(this._models,C$zut)},C$zut.getLightCount=function(){return this._lights.length},C$zut.getLight=function(C$zut){return this._lights.data[C$zut]},C$zut.addLight=function(C$zut){this._add(this._lights,C$zut)},C$zut.removeLight=function(C$zut){this._remove(this._lights,C$zut)},C$zut.addView=function(C$zut){-1===this._views.indexOf(C$zut)&&this._views.push(C$zut)},C$zut.removeView=function(C$zut){C$zut=this._views.indexOf(C$zut);-1!==C$zut&&this._views.splice(C$zut,1)},C$zui.default=Scene,C$zue.exports=C$zui.default},{"../memop":324}],335:[function(C$zut,C$zuc,C$zue){"use strict";C$zue.__esModule=!0,C$zue.getInspectorProps=function(C$zut){var C$zue={type:C$zut.type};Object.assign(C$zue,C$zut.editor||C$zut.inspector),C$zue.defines=C$zut.defines,C$zue.value=C$zuh(C$zue.type)(C$zut.value);C$zut=C$zuu(C$zue.type);C$zue.typeName=C$zu_[C$zut]||C$zut,C$zue.valueCtor=C$zus[C$zue.type],"cc.Texture2D"==C$zue.typeName&&(C$zue.typeName="cc.Asset",C$zue.assetType="cc.Texture2D");return C$zue},C$zue.getClassName=C$zue.getInstanceCtor=C$zue.getInstanceType=C$zue.enums2default=C$zue.ctor2enums=void 0;var C$zui=_interopRequireDefault(C$zut("./enums"));var C$zur=C$zut("../core/value-types");var C$zun=_interopRequireDefault(C$zut("../core/assets/CCTexture2D"));var C$zua;function _interopRequireDefault(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}C$zut=C$zut("./gfx/texture-2d");var C$zuo=cc.Object;(C$zua={})[Boolean]=function(C$zut){return C$zut||!1},C$zua[Number]=function(C$zut){return C$zut?ArrayBuffer.isView(C$zut)?C$zut[0]:C$zut:0},C$zua[C$zur.Vec2]=function(C$zut){return C$zut?cc.v2(C$zut[0],C$zut[1]):cc.v2()},C$zua[C$zur.Vec3]=function(C$zut){return C$zut?cc.v3(C$zut[0],C$zut[1],C$zut[2]):cc.v3()},C$zua[C$zur.Vec4]=function(C$zut){return C$zut?cc.v4(C$zut[0],C$zut[1],C$zut[2],C$zut[3]):cc.v4()},C$zua[C$zur.Color]=function(C$zut){return C$zut?cc.color(255*C$zut[0],255*C$zut[1],255*C$zut[2],255*(C$zut[3]||1)):cc.color()},C$zua[C$zur.Mat4]=function(C$zut){return C$zut?cc.mat4(C$zut[0],C$zut[1],C$zut[2],C$zut[3],C$zut[4],C$zut[5],C$zut[6],C$zut[7],C$zut[8],C$zut[9],C$zut[10],C$zut[11],C$zut[12],C$zut[13],C$zut[14],C$zut[15]):cc.mat4()},C$zua[C$zun.default]=function(){return null},C$zua[C$zuo]=function(){return null};var C$zul=C$zua;(C$zua={})[C$zui.default.PARAM_INT]=Number,C$zua[C$zui.default.PARAM_INT2]=C$zur.Vec2,C$zua[C$zui.default.PARAM_INT3]=C$zur.Vec3,C$zua[C$zui.default.PARAM_INT4]=C$zur.Vec4,C$zua[C$zui.default.PARAM_FLOAT]=Number,C$zua[C$zui.default.PARAM_FLOAT2]=C$zur.Vec2,C$zua[C$zui.default.PARAM_FLOAT3]=C$zur.Vec3,C$zua[C$zui.default.PARAM_FLOAT4]=C$zur.Vec4,C$zua[C$zui.default.PARAM_MAT4]=C$zur.Mat4,C$zua[C$zui.default.PARAM_TEXTURE_2D]=C$zun.default,C$zua.color=C$zur.Color,C$zua.number=Number,C$zua.boolean=Boolean,C$zua.default=C$zuo;var C$zus=C$zua;(C$zuo={})[Number]=C$zui.default.PARAM_FLOAT,C$zuo[C$zur.Vec2]=C$zui.default.PARAM_FLOAT2,C$zuo[C$zur.Vec3]=C$zui.default.PARAM_FLOAT3,C$zuo[C$zur.Vec4]=C$zui.default.PARAM_FLOAT4,C$zuo[C$zur.Color]=C$zui.default.PARAM_COLOR3,C$zuo[C$zur.Color]=C$zui.default.PARAM_COLOR4,C$zuo[C$zur.Mat4]=C$zui.default.PARAM_MAT4,C$zuo[C$zun.default]=C$zui.default.PARAM_TEXTURE_2D,C$zuo[C$zut]=C$zui.default.PARAM_TEXTURE_2D,C$zue.ctor2enums=C$zuo,(C$zua={})[C$zui.default.PARAM_INT]=new Uint32Array([0]),C$zua[C$zui.default.PARAM_INT2]=new Uint32Array([0,0]),C$zua[C$zui.default.PARAM_INT3]=new Uint32Array([0,0,0]),C$zua[C$zui.default.PARAM_INT4]=new Uint32Array([0,0,0,0]),C$zua[C$zui.default.PARAM_FLOAT]=new Float32Array([0]),C$zua[C$zui.default.PARAM_FLOAT2]=new Float32Array([0,0]),C$zua[C$zui.default.PARAM_FLOAT3]=new Float32Array([0,0,0]),C$zua[C$zui.default.PARAM_FLOAT4]=new Float32Array([0,0,0,0]),C$zua[C$zui.default.PARAM_MAT4]=cc.mat4().m,C$zua[C$zui.default.PARAM_TEXTURE_2D]=null,C$zua.number=0,C$zua.boolean=!1,C$zue.enums2default=C$zua;function C$zuH02(C$zut){return C$zus[C$zut]||C$zus.default}C$zue.getInstanceType=C$zuH02;var C$zuh=function(C$zut){return C$zul[C$zuH02(C$zut)]};C$zue.getInstanceCtor=C$zuh;var C$zuu=function(C$zut){return cc.js.getClassName(C$zuH02(C$zut))};C$zue.getClassName=C$zuu;var C$zu_={Number:"number",Boolean:"boolean"}},{"../core/assets/CCTexture2D":50,"../core/value-types":279,"./enums":307,"./gfx/texture-2d":317}],336:[function(C$zut,C$zue,C$zui){"use strict";var C$zu_=C$zut("../compression/ZipUtils");var C$zud=C$zut("../compression/zlib.min");var C$zur=C$zut("../core/platform/js");function strToColor(C$zut){if(!C$zut)return cc.color(0,0,0,255);var C$zue;if(8===(C$zut=-1!==C$zut.indexOf("#")?C$zut.substring(1):C$zut).length)return C$zue=parseInt(C$zut.substr(0,2),16)||255,C$zui=parseInt(C$zut.substr(2,2),16)||0,C$zur=parseInt(C$zut.substr(4,2),16)||0,C$zun=parseInt(C$zut.substr(6,2),16)||0,cc.color(C$zui,C$zur,C$zun,C$zue);var C$zui=parseInt(C$zut.substr(0,2),16)||0;var C$zur=parseInt(C$zut.substr(2,2),16)||0;var C$zun=parseInt(C$zut.substr(4,2),16)||0;return cc.color(C$zui,C$zur,C$zun,255)}function getPropertyList(C$zut,C$zue){var C$zui=[];var C$zur=C$zut.getElementsByTagName("properties");for(var C$zun=0;C$zun<C$zur.length;++C$zun){var C$zua=C$zur[C$zun].getElementsByTagName("property");for(var C$zuo=0;C$zuo<C$zua.length;++C$zuo)C$zui.push(C$zua[C$zuo])}C$zue=C$zue||{};for(var C$zus=0;C$zus<C$zui.length;C$zus++){var C$zuc=C$zui[C$zus];var C$zuh=C$zuc.getAttribute("name");var C$zul=C$zuc.getAttribute("type")||"string";C$zuc=C$zuc.getAttribute("value");"int"===C$zul?C$zuc=parseInt(C$zuc):"float"===C$zul?C$zuc=parseFloat(C$zuc):"bool"===C$zul?C$zuc="true"===C$zuc:"color"===C$zul&&(C$zuc=strToColor(C$zuc)),C$zue[C$zuh]=C$zuc}return C$zue}C$zut("../core/platform/CCSAXParser"),cc.TMXLayerInfo=function(){this.properties={},this.name="",this._layerSize=null,this._tiles=[],this.visible=!0,this._opacity=0,this.ownTiles=!0,this._minGID=1e5,this._maxGID=0,this.offset=cc.v2(0,0)},cc.TMXLayerInfo.prototype={constructor:cc.TMXLayerInfo,getProperties:function(){return this.properties},setProperties:function(C$zut){this.properties=C$zut}},cc.TMXImageLayerInfo=function(){this.name="",this.visible=!0,this.width=0,this.height=0,this.offset=cc.v2(0,0),this._opacity=0,this._trans=new cc.Color(255,255,255,255),this.sourceImage=null},cc.TMXObjectGroupInfo=function(){this.properties={},this.name="",this._objects=[],this.visible=!0,this._opacity=0,this._color=new cc.Color(255,255,255,255),this.offset=cc.v2(0,0),this._draworder="topdown"},cc.TMXObjectGroupInfo.prototype={constructor:cc.TMXObjectGroupInfo,getProperties:function(){return this.properties},setProperties:function(C$zut){this.properties=C$zut}},cc.TMXTilesetInfo=function(){this.name="",this.firstGid=0,this.spacing=0,this.margin=0,this.sourceImage=null,this.imageSize=cc.size(0,0),this.tileOffset=cc.v2(0,0),this._tileSize=cc.size(0,0)},cc.TMXTilesetInfo.prototype={constructor:cc.TMXTilesetInfo,rectForGID:function(C$zut,C$zue){C$zue=C$zue||cc.rect(0,0,0,0);C$zue.width=this._tileSize.width,C$zue.height=this._tileSize.height,C$zut=(C$zut&=cc.TiledMap.TileFlag.FLIPPED_MASK)-parseInt(this.firstGid,10);var C$zui=parseInt((this.imageSize.width-2*this.margin+this.spacing)/(this._tileSize.width+this.spacing),10);return C$zue.x=parseInt(C$zut%C$zui*(this._tileSize.width+this.spacing)+this.margin,10),C$zue.y=parseInt(parseInt(C$zut/C$zui,10)*(this._tileSize.height+this.spacing)+this.margin,10),C$zue}},cc.TMXMapInfo=function(C$zut,C$zue,C$zui,C$zur,C$zun){this.properties=[],this.orientation=null,this.parentElement=null,this.parentGID=null,this.layerAttrs=0,this.storingCharacters=!1,this.currentString=null,this.renderOrder=cc.TiledMap.RenderOrder.RightDown,this._supportVersion=[1,2,0],this._parser=new cc.SAXParser,this._objectGroups=[],this._allChildren=[],this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0),this._layers=[],this._tilesets=[],this._imageLayers=[],this._tileProperties={},this._tileAnimations={},this._tsxMap=null,this._textures=null,this._staggerAxis=null,this._staggerIndex=null,this._hexSideLength=0,this._imageLayerTextures=null,this.initWithXML(C$zut,C$zue,C$zui,C$zur,C$zun)},cc.TMXMapInfo.prototype={constructor:cc.TMXMapInfo,getOrientation:function(){return this.orientation},setOrientation:function(C$zut){this.orientation=C$zut},getStaggerAxis:function(){return this._staggerAxis},setStaggerAxis:function(C$zut){this._staggerAxis=C$zut},getStaggerIndex:function(){return this._staggerIndex},setStaggerIndex:function(C$zut){this._staggerIndex=C$zut},getHexSideLength:function(){return this._hexSideLength},setHexSideLength:function(C$zut){this._hexSideLength=C$zut},getMapSize:function(){return cc.size(this._mapSize.width,this._mapSize.height)},setMapSize:function(C$zut){this._mapSize.width=C$zut.width,this._mapSize.height=C$zut.height},_getMapWidth:function(){return this._mapSize.width},_setMapWidth:function(C$zut){this._mapSize.width=C$zut},_getMapHeight:function(){return this._mapSize.height},_setMapHeight:function(C$zut){this._mapSize.height=C$zut},getTileSize:function(){return cc.size(this._tileSize.width,this._tileSize.height)},setTileSize:function(C$zut){this._tileSize.width=C$zut.width,this._tileSize.height=C$zut.height},_getTileWidth:function(){return this._tileSize.width},_setTileWidth:function(C$zut){this._tileSize.width=C$zut},_getTileHeight:function(){return this._tileSize.height},_setTileHeight:function(C$zut){this._tileSize.height=C$zut},getLayers:function(){return this._layers},setLayers:function(C$zut){this._allChildren.push(C$zut),this._layers.push(C$zut)},getImageLayers:function(){return this._imageLayers},setImageLayers:function(C$zut){this._allChildren.push(C$zut),this._imageLayers.push(C$zut)},getTilesets:function(){return this._tilesets},setTilesets:function(C$zut){this._tilesets.push(C$zut)},getObjectGroups:function(){return this._objectGroups},setObjectGroups:function(C$zut){this._allChildren.push(C$zut),this._objectGroups.push(C$zut)},getAllChildren:function(){return this._allChildren},getParentElement:function(){return this.parentElement},setParentElement:function(C$zut){this.parentElement=C$zut},getParentGID:function(){return this.parentGID},setParentGID:function(C$zut){this.parentGID=C$zut},getLayerAttribs:function(){return this.layerAttrs},setLayerAttribs:function(C$zut){this.layerAttrs=C$zut},getStoringCharacters:function(){return this.storingCharacters},setStoringCharacters:function(C$zut){this.storingCharacters=C$zut},getProperties:function(){return this.properties},setProperties:function(C$zut){this.properties=C$zut},initWithXML:function(C$zut,C$zue,C$zui,C$zur,C$zun){return this._tilesets.length=0,this._layers.length=0,this._imageLayers.length=0,this._tsxMap=C$zue,this._textures=C$zui,this._imageLayerTextures=C$zun,this._textureSizes=C$zur,this._objectGroups.length=0,this._allChildren.length=0,this.properties.length=0,this._tileProperties={},this._tileAnimations={},this.currentString="",this.storingCharacters=!1,this.layerAttrs=cc.TMXLayerInfo.ATTRIB_NONE,this.parentElement=cc.TiledMap.NONE,this.parseXMLString(C$zut)},parseXMLString:function(C$zut,C$zuh){var C$zue;C$zut=this._parser._parseXML(C$zut).documentElement;var C$zui=C$zut.getAttribute("orientation");var C$zuu=C$zut.getAttribute("staggeraxis");var C$zu_=C$zut.getAttribute("staggerindex");var C$zud=C$zut.getAttribute("hexsidelength");var C$zuf=C$zut.getAttribute("renderorder");var C$zup=C$zut.getAttribute("version")||"1.0.0";if("map"===C$zut.nodeName){var C$zum=C$zup.split(".");var C$zuv=this._supportVersion;for(var C$zuy=0;C$zuy<C$zuv.length;C$zuy++){var C$zug=parseInt(C$zum[C$zuy])||0;if(C$zuv[C$zuy]<C$zug){cc.logID(7216,C$zup);break}}"orthogonal"===C$zui?this.orientation=cc.TiledMap.Orientation.ORTHO:"isometric"===C$zui?this.orientation=cc.TiledMap.Orientation.ISO:"hexagonal"===C$zui?this.orientation=cc.TiledMap.Orientation.HEX:null!==C$zui&&cc.logID(7217,C$zui),this.renderOrder="right-up"===C$zuf?cc.TiledMap.RenderOrder.RightUp:"left-up"===C$zuf?cc.TiledMap.RenderOrder.LeftUp:"left-down"===C$zuf?cc.TiledMap.RenderOrder.LeftDown:cc.TiledMap.RenderOrder.RightDown,"x"===C$zuu?this.setStaggerAxis(cc.TiledMap.StaggerAxis.STAGGERAXIS_X):"y"===C$zuu&&this.setStaggerAxis(cc.TiledMap.StaggerAxis.STAGGERAXIS_Y),"odd"===C$zu_?this.setStaggerIndex(cc.TiledMap.StaggerIndex.STAGGERINDEX_ODD):"even"===C$zu_&&this.setStaggerIndex(cc.TiledMap.StaggerIndex.STAGGERINDEX_EVEN),C$zud&&this.setHexSideLength(parseFloat(C$zud));C$zui=cc.size(0,0);C$zui.width=parseFloat(C$zut.getAttribute("width")),C$zui.height=parseFloat(C$zut.getAttribute("height")),this.setMapSize(C$zui),(C$zui=cc.size(0,0)).width=parseFloat(C$zut.getAttribute("tilewidth")),C$zui.height=parseFloat(C$zut.getAttribute("tileheight")),this.setTileSize(C$zui),this.properties=getPropertyList(C$zut)}var C$zub=C$zut.getElementsByTagName("tileset");for("map"!==C$zut.nodeName&&(C$zub=[]).push(C$zut),C$zue=0;C$zue<C$zub.length;C$zue++){var C$zur=C$zub[C$zue];var C$zun=C$zur.getAttribute("source");if(C$zun){var C$zua=parseInt(C$zur.getAttribute("firstgid"));C$zun=this._tsxMap[C$zun];C$zun&&this.parseXMLString(C$zun,C$zua)}else{C$zun=C$zur.getElementsByTagName("image");var C$zuC=1<C$zun.length;var C$zux=C$zun[0];var C$zuA=C$zux.getAttribute("source");C$zuA.replace(/\\/g,"/");var C$zuS=C$zur.getElementsByTagName("tile");var C$zuT=C$zuS&&C$zuS.length||1;var C$zuo=null;var C$zuw=C$zur.getAttribute("name")||"";var C$zuE=parseInt(C$zur.getAttribute("spacing"))||0;var C$zuP=parseInt(C$zur.getAttribute("margin"))||0;var C$zuM=parseInt(C$zuh);C$zuM=C$zuM||(parseInt(C$zur.getAttribute("firstgid"))||0);var C$zuR=cc.size(0,0);C$zuR.width=parseFloat(C$zur.getAttribute("tilewidth")),C$zuR.height=parseFloat(C$zur.getAttribute("tileheight"));C$zua=C$zur.getElementsByTagName("tileoffset")[0];var C$zuI=cc.v2(0,0);C$zua&&(C$zuI.x=parseFloat(C$zua.getAttribute("x")),C$zuI.y=parseFloat(C$zua.getAttribute("y")));var C$zus=null;for(var C$zuB=0;C$zuB<C$zuT;C$zuB++)if(C$zus&&!C$zuC||((C$zus=new cc.TMXTilesetInfo).name=C$zuw,C$zus.firstGid=C$zuM,C$zus.spacing=C$zuE,C$zus.margin=C$zuP,C$zus._tileSize=C$zuR,C$zus.tileOffset=C$zuI,C$zus.sourceImage=this._textures[C$zuA],C$zus.imageSize=this._textureSizes[C$zuA]||C$zus.imageSize,C$zus.sourceImage||cc.errorID(7221,C$zuA),this.setTilesets(C$zus)),C$zuo=C$zuS&&C$zuS[C$zuB]){this.parentGID=parseInt(C$zuM)+parseInt(C$zuo.getAttribute("id")||0);var C$zuc=C$zuo.getElementsByTagName("image");C$zuc&&0<C$zuc.length&&((C$zuc=(C$zux=C$zuc[0]).getAttribute("source")).replace(/\\/g,"/"),C$zus.sourceImage=this._textures[C$zuc],C$zus.sourceImage||cc.errorID(7221,C$zuc),(C$zuc=cc.size(0,0)).width=parseFloat(C$zux.getAttribute("width")),C$zuc.height=parseFloat(C$zux.getAttribute("height")),C$zus._tileSize=C$zuc,C$zus.firstGid=this.parentGID),this._tileProperties[this.parentGID]=getPropertyList(C$zuo);C$zuc=C$zuo.getElementsByTagName("animation");if(C$zuc&&0<C$zuc.length){var C$zuD=C$zuc[0].getElementsByTagName("frame");C$zuc={frames:[],dt:0,frameIdx:0};var C$zuL=(this._tileAnimations[this.parentGID]=C$zuc).frames;for(var C$zuV=0;C$zuV<C$zuD.length;C$zuV++){var C$zuO=C$zuD[C$zuV];var C$zuF=parseInt(C$zuM)+parseInt(C$zuO.getAttribute("tileid"));C$zuO=parseFloat(C$zuO.getAttribute("duration"));C$zuL.push({tileid:C$zuF,duration:C$zuO/1e3,grid:null})}}}}}var C$zuN=C$zut.childNodes;for(C$zue=0;C$zue<C$zuN.length;C$zue++){var C$zul=C$zuN[C$zue];var C$zuk;this._shouldIgnoreNode(C$zul)||("imagelayer"!==C$zul.nodeName||(C$zuk=this._parseImageLayer(C$zul))&&this.setImageLayers(C$zuk),"layer"===C$zul.nodeName&&(C$zuk=this._parseLayer(C$zul),this.setLayers(C$zuk)),"objectgroup"===C$zul.nodeName&&(C$zul=this._parseObjectGroup(C$zul),this.setObjectGroups(C$zul)))}return C$zut},_shouldIgnoreNode:function(C$zut){return 3===C$zut.nodeType||8===C$zut.nodeType||4===C$zut.nodeType},_parseImageLayer:function(C$zut){var C$zue=C$zut.getElementsByTagName("image");if(!C$zue||0==C$zue.length)return null;var C$zui=new cc.TMXImageLayerInfo;C$zui.name=C$zut.getAttribute("name"),C$zui.offset.x=parseFloat(C$zut.getAttribute("offsetx"))||0,C$zui.offset.y=parseFloat(C$zut.getAttribute("offsety"))||0;var C$zur=C$zut.getAttribute("visible");C$zui.visible=!("0"===C$zur);C$zur=C$zut.getAttribute("opacity")||1;C$zui.opacity=parseInt(255*parseFloat(C$zur))||255;C$zut=C$zue[0];C$zur=C$zut.getAttribute("source");return C$zui.sourceImage=this._imageLayerTextures[C$zur],C$zui.width=parseInt(C$zut.getAttribute("width"))||0,C$zui.height=parseInt(C$zut.getAttribute("height"))||0,C$zui.trans=strToColor(C$zut.getAttribute("trans")),C$zui.sourceImage?C$zui:(cc.errorID(7221,C$zur),null)},_parseLayer:function(C$zut){var C$zue=C$zut.getElementsByTagName("data")[0];var C$zui=new cc.TMXLayerInfo;C$zui.name=C$zut.getAttribute("name");var C$zur=cc.size(0,0);C$zur.width=parseFloat(C$zut.getAttribute("width")),C$zur.height=parseFloat(C$zut.getAttribute("height")),C$zui._layerSize=C$zur;C$zur=C$zut.getAttribute("visible");C$zui.visible=!("0"===C$zur);C$zur=C$zut.getAttribute("opacity")||1;C$zui._opacity=C$zur?parseInt(255*parseFloat(C$zur)):255,C$zui.offset=cc.v2(parseFloat(C$zut.getAttribute("offsetx"))||0,parseFloat(C$zut.getAttribute("offsety"))||0);var C$zun="";for(var C$zua=0;C$zua<C$zue.childNodes.length;C$zua++)C$zun+=C$zue.childNodes[C$zua].nodeValue;C$zun=C$zun.trim();C$zur=C$zue.getAttribute("compression");var C$zuo=C$zue.getAttribute("encoding");if(C$zur&&"gzip"!==C$zur&&"zlib"!==C$zur)return cc.logID(7218),null;var C$zus;switch(C$zur){case"gzip":C$zus=C$zu_.unzipBase64AsArray(C$zun,4);break;case"zlib":C$zus=function(C$zut){if(C$zut.length%4!=0)return null;var C$zue=C$zut.length/4;var C$zui=window.Uint32Array?new Uint32Array(C$zue):[];for(var C$zur=0;C$zur<C$zue;C$zur++){var C$zun=4*C$zur;C$zui[C$zur]=C$zut[C$zun]+256*C$zut[1+C$zun]+65536*C$zut[2+C$zun]+C$zut[3+C$zun]*(1<<24)}return C$zui}(new C$zud.Inflate(C$zu_.Base64.decodeAsArray(C$zun,1)).decompress());break;case null:case"":if("base64"===C$zuo)C$zus=C$zu_.Base64.decodeAsArray(C$zun,4);else if("csv"===C$zuo){C$zus=[];var C$zuh=C$zun.split(",");for(var C$zuc=0;C$zuc<C$zuh.length;C$zuc++)C$zus.push(parseInt(C$zuh[C$zuc]))}else{var C$zuu=C$zue.getElementsByTagName("tile");C$zus=[];for(var C$zul=0;C$zul<C$zuu.length;C$zul++)C$zus.push(parseInt(C$zuu[C$zul].getAttribute("gid")))}break;default:this.layerAttrs===cc.TMXLayerInfo.ATTRIB_NONE&&cc.logID(7219)}return C$zus&&(C$zui._tiles=new Uint32Array(C$zus)),C$zui.properties=getPropertyList(C$zut),C$zui},_parseObjectGroup:function(C$zut){var C$zue=new cc.TMXObjectGroupInfo;C$zue.name=C$zut.getAttribute("name")||"",C$zue.offset=cc.v2(parseFloat(C$zut.getAttribute("offsetx")),parseFloat(C$zut.getAttribute("offsety")));var C$zui=C$zut.getAttribute("opacity")||1;C$zue._opacity=C$zui?parseInt(255*parseFloat(C$zui)):255;C$zui=C$zut.getAttribute("visible");C$zui&&0===parseInt(C$zui)&&(C$zue.visible=!1);C$zui=C$zut.getAttribute("color");C$zui&&C$zue._color.fromHEX(C$zui);C$zui=C$zut.getAttribute("draworder");C$zui&&(C$zue._draworder=C$zui),C$zue.setProperties(getPropertyList(C$zut));var C$zur=C$zut.getElementsByTagName("object");if(C$zur){for(var C$zun=0;C$zun<C$zur.length;C$zun++){var C$zua=C$zur[C$zun];var C$zuo={};C$zuo.id=C$zua.getAttribute("id")||C$zun,C$zuo.name=C$zua.getAttribute("name")||"",C$zuo.width=parseFloat(C$zua.getAttribute("width"))||0,C$zuo.height=parseFloat(C$zua.getAttribute("height"))||0,C$zuo.x=parseFloat(C$zua.getAttribute("x"))||0,C$zuo.y=parseFloat(C$zua.getAttribute("y"))||0,C$zuo.rotation=parseFloat(C$zua.getAttribute("rotation"))||0,getPropertyList(C$zua,C$zuo);var C$zus=C$zua.getAttribute("visible");C$zuo.visible=!(C$zus&&0===parseInt(C$zus));C$zus=C$zua.getElementsByTagName("text");C$zus&&0<C$zus.length&&(C$zus=C$zus[0],C$zuo.type=cc.TiledMap.TMXObjectType.TEXT,C$zuo.wrap="1"==C$zus.getAttribute("wrap"),C$zuo.color=strToColor(C$zus.getAttribute("color")),C$zuo.halign=function(C$zut){var C$zue=cc.Label.HorizontalAlign;switch(C$zut){case"center":return C$zue.CENTER;case"right":return C$zue.RIGHT;default:return C$zue.LEFT}}(C$zus.getAttribute("halign")),C$zuo.valign=function(C$zut){var C$zue=cc.Label.VerticalAlign;switch(C$zut){case"center":return C$zue.CENTER;case"bottom":return C$zue.BOTTOM;default:return C$zue.TOP}}(C$zus.getAttribute("valign")),C$zuo.pixelsize=parseInt(C$zus.getAttribute("pixelsize"))||16,C$zuo.text=C$zus.childNodes[0].nodeValue);C$zus=C$zua.getAttribute("gid");C$zus&&(C$zuo.gid=parseInt(C$zus),C$zuo.type=cc.TiledMap.TMXObjectType.IMAGE);C$zus=C$zua.getElementsByTagName("ellipse");C$zus&&0<C$zus.length&&(C$zuo.type=cc.TiledMap.TMXObjectType.ELLIPSE);C$zus=C$zua.getElementsByTagName("polygon");C$zus&&0<C$zus.length&&(C$zuo.type=cc.TiledMap.TMXObjectType.POLYGON,(C$zus=C$zus[0].getAttribute("points"))&&(C$zuo.points=this._parsePointsString(C$zus)));C$zus=C$zua.getElementsByTagName("polyline");C$zus&&0<C$zus.length&&(C$zuo.type=cc.TiledMap.TMXObjectType.POLYLINE,(C$zua=C$zus[0].getAttribute("points"))&&(C$zuo.polylinePoints=this._parsePointsString(C$zua))),C$zuo.type||(C$zuo.type=cc.TiledMap.TMXObjectType.RECT),C$zue._objects.push(C$zuo)}"index"!==C$zui&&C$zue._objects.sort(function(C$zut,C$zue){return C$zut.y-C$zue.y})}return C$zue},_parsePointsString:function(C$zut){if(!C$zut)return null;var C$zue=[];var C$zui=C$zut.split(" ");for(var C$zur=0;C$zur<C$zui.length;C$zur++){var C$zun=C$zui[C$zur].split(",");C$zue.push({x:parseFloat(C$zun[0]),y:parseFloat(C$zun[1])})}return C$zue},setTileAnimations:function(C$zut){this._tileAnimations=C$zut},getTileAnimations:function(){return this._tileAnimations},getTileProperties:function(){return this._tileProperties},setTileProperties:function(C$zut){this._tileProperties=C$zut},getCurrentString:function(){return this.currentString},setCurrentString:function(C$zut){this.currentString=C$zut}};C$zut=cc.TMXMapInfo.prototype;C$zur.getset(C$zut,"mapWidth",C$zut._getMapWidth,C$zut._setMapWidth),C$zur.getset(C$zut,"mapHeight",C$zut._getMapHeight,C$zut._setMapHeight),C$zur.getset(C$zut,"tileWidth",C$zut._getTileWidth,C$zut._setTileWidth),C$zur.getset(C$zut,"tileHeight",C$zut._getTileHeight,C$zut._setTileHeight),cc.TMXLayerInfo.ATTRIB_NONE=1,cc.TMXLayerInfo.ATTRIB_BASE64=2,cc.TMXLayerInfo.ATTRIB_GZIP=4,cc.TMXLayerInfo.ATTRIB_ZLIB=8},{"../compression/ZipUtils":23,"../compression/zlib.min":26,"../core/platform/CCSAXParser":196,"../core/platform/js":209}],337:[function(C$zut,C$zue,C$zuh){"use strict";var C$zui=C$zut("../core/value-types");var C$zuu=(C$zur=C$zut("../core/assets/material/material-variant"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur=C$zut("../core/components/CCRenderComponent");var C$zu_=C$zut("../core/assets/material/CCMaterial");var C$zun=C$zut("../core/renderer/render-flow");var C$zua=cc.mat4();var C$zuo=cc.v2();var C$zus=cc.v2();var C$zuc={row:0,col:0};var C$zul=cc.Class({name:"cc.TiledUserNodeData",extends:cc.Component,ctor:function(){this._index=-1,this._row=-1,this._col=-1,this._tiledLayer=null}});C$zut=cc.Class({name:"cc.TiledLayer",extends:C$zur,editor:{inspector:"packages://inspector/inspectors/comps/tiled-layer.js"},ctor:function(){this._userNodeGrid={},this._userNodeMap={},this._userNodeDirty=!1,this._tiledTiles=[],this._tilesetIndexArr=[],this._texIdToMatIndex={},this._viewPort={x:-1,y:-1,width:-1,height:-1},this._cullingRect={leftDown:{row:-1,col:-1},rightTop:{row:-1,col:-1}},this._cullingDirty=!0,this._rightTop={row:-1,col:-1},this._layerInfo=null,this._mapInfo=null,this._topOffset=0,this._downOffset=0,this._leftOffset=0,this._rightOffset=0,this._tiles=[],this._vertices=[],this._verticesDirty=!0,this._layerName="",this._layerOrientation=null,this._texGrids=null,this._textures=null,this._tilesets=null,this._leftDownToCenterX=0,this._leftDownToCenterY=0,this._hasTiledNodeGrid=!1,this._hasAniGrid=!1,this._animations=null,this._enableCulling=cc.macro.ENABLE_TILEDMAP_CULLING},_hasTiledNode:function(){return this._hasTiledNodeGrid},_hasAnimation:function(){return this._hasAniGrid},enableCulling:function(C$zut){this._enableCulling!=C$zut&&(this._enableCulling=C$zut,this._cullingDirty=!0)},addUserNode:function(C$zut){var C$zue=C$zut.getComponent(C$zul);return C$zue?(cc.warn("CCTiledLayer:addUserNode node has been added"),!1):(C$zue=C$zut.addComponent(C$zul),C$zut.parent=this.node,C$zut._renderFlag|=C$zun.FLAG_BREAK_FLOW,(this._userNodeMap[C$zut._id]=C$zue)._row=-1,C$zue._col=-1,(C$zue._tiledLayer=this)._nodeLocalPosToLayerPos(C$zut,C$zuo),this._positionToRowCol(C$zuo.x,C$zuo.y,C$zuc),this._addUserNodeToGrid(C$zue,C$zuc),this._updateCullingOffsetByUserNode(C$zut),C$zut.on(cc.Node.EventType.POSITION_CHANGED,this._userNodePosChange,C$zue),C$zut.on(cc.Node.EventType.SIZE_CHANGED,this._userNodeSizeChange,C$zue),!0)},removeUserNode:function(C$zut){var C$zue=C$zut.getComponent(C$zul);return C$zue?(C$zut.off(cc.Node.EventType.POSITION_CHANGED,this._userNodePosChange,C$zue),C$zut.off(cc.Node.EventType.SIZE_CHANGED,this._userNodeSizeChange,C$zue),this._removeUserNodeFromGrid(C$zue),delete this._userNodeMap[C$zut._id],C$zut._removeComponent(C$zue),C$zue.destroy(),C$zut.removeFromParent(!0),C$zut._renderFlag&=~C$zun.FLAG_BREAK_FLOW,!0):(cc.warn("CCTiledLayer:removeUserNode node is not exist"),!1)},destroyUserNode:function(C$zut){this.removeUserNode(C$zut),C$zut.destroy()},_nodeLocalPosToLayerPos:function(C$zut,C$zue){C$zue.x=C$zut.x+this._leftDownToCenterX,C$zue.y=C$zut.y+this._leftDownToCenterY},_getNodesByRowCol:function(C$zut,C$zue){C$zut=this._userNodeGrid[C$zut];return C$zut?C$zut[C$zue]:null},_getNodesCountByRow:function(C$zut){C$zut=this._userNodeGrid[C$zut];return C$zut?C$zut.count:0},_updateAllUserNode:function(){for(var C$zut in this._userNodeGrid={},this._userNodeMap){C$zut=this._userNodeMap[C$zut];this._nodeLocalPosToLayerPos(C$zut.node,C$zuo),this._positionToRowCol(C$zuo.x,C$zuo.y,C$zuc),this._addUserNodeToGrid(C$zut,C$zuc),this._updateCullingOffsetByUserNode(C$zut.node)}},_updateCullingOffsetByUserNode:function(C$zut){this._topOffset<C$zut.height&&(this._topOffset=C$zut.height),this._downOffset<C$zut.height&&(this._downOffset=C$zut.height),this._leftOffset<C$zut.width&&(this._leftOffset=C$zut.width),this._rightOffset<C$zut.width&&(this._rightOffset=C$zut.width)},_userNodeSizeChange:function(){var C$zut=this.node;this._tiledLayer._updateCullingOffsetByUserNode(C$zut)},_userNodePosChange:function(){var C$zut=this.node;var C$zue=this._tiledLayer;C$zue._nodeLocalPosToLayerPos(C$zut,C$zuo),C$zue._positionToRowCol(C$zuo.x,C$zuo.y,C$zuc),C$zue._limitInLayer(C$zuc),C$zuc.row===this._row&&C$zuc.col===this._col||(C$zue._removeUserNodeFromGrid(this),C$zue._addUserNodeToGrid(this,C$zuc))},_removeUserNodeFromGrid:function(C$zut){var C$zue=C$zut._row;var C$zui=C$zut._col;var C$zur=C$zut._index;C$zue=this._userNodeGrid[C$zue];C$zui=C$zue&&C$zue[C$zui];C$zui&&(C$zue.count--,C$zui.count--,C$zui.list[C$zur]=null,C$zui.count<=0&&(C$zui.list.length=0,C$zui.count=0)),C$zut._row=-1,C$zut._col=-1,C$zut._index=-1,this._userNodeDirty=!0},_limitInLayer:function(C$zut){var C$zue=C$zut.row;var C$zui=C$zut.col;C$zue<0&&(C$zut.row=0),C$zue>this._rightTop.row&&(C$zut.row=this._rightTop.row),C$zui<0&&(C$zut.col=0),C$zui>this._rightTop.col&&(C$zut.col=this._rightTop.col)},_addUserNodeToGrid:function(C$zut,C$zue){var C$zui=C$zue.row;C$zue=C$zue.col;var C$zur=this._userNodeGrid[C$zui]=this._userNodeGrid[C$zui]||{count:0};var C$zun=C$zur[C$zue]=C$zur[C$zue]||{count:0,list:[]};C$zut._row=C$zui,C$zut._col=C$zue,C$zut._index=C$zun.list.length,C$zur.count++,C$zun.count++,C$zun.list.push(C$zut),this._userNodeDirty=!0},_isUserNodeDirty:function(){return this._userNodeDirty},_setUserNodeDirty:function(C$zut){this._userNodeDirty=C$zut},onEnable:function(){this._super(),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this),this._activateMaterial()},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},_syncAnchorPoint:function(){var C$zut=this.node;this._leftDownToCenterX=C$zut.width*C$zut.anchorX*C$zut.scaleX,this._leftDownToCenterY=C$zut.height*C$zut.anchorY*C$zut.scaleY,this._cullingDirty=!0},onDestroy:function(){this._super(),this._buffer&&(this._buffer.destroy(),this._buffer=null),this._renderDataList=null},getLayerName:function(){return this._layerName},setLayerName:function(C$zut){this._layerName=C$zut},getProperty:function(C$zut){return this._properties[C$zut]},getPositionAt:function(C$zut,C$zue){var C$zui;var C$zur;switch(C$zue=void 0!==C$zue?(C$zui=Math.floor(C$zut),Math.floor(C$zue)):(C$zui=Math.floor(C$zut.x),Math.floor(C$zut.y)),this._layerOrientation){case cc.TiledMap.Orientation.ORTHO:C$zur=this._positionForOrthoAt(C$zui,C$zue);break;case cc.TiledMap.Orientation.ISO:C$zur=this._positionForIsoAt(C$zui,C$zue);break;case cc.TiledMap.Orientation.HEX:C$zur=this._positionForHexAt(C$zui,C$zue)}return C$zur},_isInvalidPosition:function(C$zut,C$zue){var C$zui;return C$zut&&"object"==typeof C$zut&&(C$zue=(C$zui=C$zut).y,C$zut=C$zui.x),C$zut>=this._layerSize.width||C$zue>=this._layerSize.height||C$zut<0||C$zue<0},_positionForIsoAt:function(C$zut,C$zue){var C$zui=0,C$zur=0;var C$zun=Math.floor(C$zut)+Math.floor(C$zue)*this._layerSize.width;C$zun=this._tiles[C$zun];return C$zun&&(C$zui=(C$zun=this._texGrids[C$zun].tileset.tileOffset).x,C$zur=C$zun.y),cc.v2(.5*this._mapTileSize.width*(this._layerSize.height+C$zut-C$zue-1)+C$zui,.5*this._mapTileSize.height*(this._layerSize.width-C$zut+this._layerSize.height-C$zue-2)-C$zur)},_positionForOrthoAt:function(C$zut,C$zue){var C$zui=0,C$zur=0;var C$zun=Math.floor(C$zut)+Math.floor(C$zue)*this._layerSize.width;C$zun=this._tiles[C$zun];return C$zun&&(C$zui=(C$zun=this._texGrids[C$zun].tileset.tileOffset).x,C$zur=C$zun.y),cc.v2(C$zut*this._mapTileSize.width+C$zui,(this._layerSize.height-C$zue-1)*this._mapTileSize.height-C$zur)},_positionForHexAt:function(C$zut,C$zue){var C$zui=this._mapTileSize.width;var C$zur=this._mapTileSize.height;var C$zuh=this._layerSize.height;var C$zun=Math.floor(C$zut)+Math.floor(C$zue)*this._layerSize.width;C$zun=this._tiles[C$zun];var C$zua=this._texGrids[C$zun].tileset.tileOffset;var C$zuu=this._staggerIndex===cc.TiledMap.StaggerIndex.STAGGERINDEX_ODD?1:-1;var C$zuo=0,C$zus=0;var C$zuc=0;var C$zul=0;switch(this._staggerAxis){case cc.TiledMap.StaggerAxis.STAGGERAXIS_Y:C$zuc=0,C$zuo=C$zut*C$zui+(C$zuc=C$zue%2==1?C$zui/2*C$zuu:C$zuc)+C$zua.x,C$zus=(C$zuh-C$zue-1)*(C$zur-(C$zur-this._hexSideLength)/2)-C$zua.y;break;case cc.TiledMap.StaggerAxis.STAGGERAXIS_X:C$zul=0,C$zuo=C$zut*(C$zui-(C$zui-this._hexSideLength)/2)+C$zua.x,C$zus=(C$zuh-C$zue-1)*C$zur+(C$zul=C$zut%2==1?C$zur/2*-C$zuu:C$zul)-C$zua.y}return cc.v2(C$zuo,C$zus)},setTileGIDAt:function(C$zut,C$zue,C$zui,C$zur){if(void 0===C$zue)throw new Error("cc.TiledLayer.setTileGIDAt(): pos should be non-null");var C$zun;if(void 0===C$zur&&C$zue instanceof cc.Vec2?(C$zun=C$zue,C$zur=C$zui):C$zun=cc.v2(C$zue,C$zui),C$zun.x=Math.floor(C$zun.x),C$zun.y=Math.floor(C$zun.y),this._isInvalidPosition(C$zun))throw new Error("cc.TiledLayer.setTileGIDAt(): invalid position");this._tiles&&this._tilesets&&0!=this._tilesets.length?0!==C$zut&&C$zut<this._tilesets[0].firstGid?cc.logID(7239,C$zut):(C$zur=C$zur||0,C$zue=this.getTileFlagsAt(C$zun),this.getTileGIDAt(C$zun)===C$zut&&C$zue===C$zur||this._updateTileForGID((C$zut|C$zur)>>>0,C$zun)):cc.logID(7238)},_updateTileForGID:function(C$zut,C$zue){0!==C$zut&&!this._texGrids[C$zut]||(C$zue=0|C$zue.x+C$zue.y*this._layerSize.width)<this._tiles.length&&(this._tiles[C$zue]=C$zut,this._cullingDirty=!0)},getTileGIDAt:function(C$zut,C$zue){if(void 0===C$zut)throw new Error("cc.TiledLayer.getTileGIDAt(): pos should be non-null");var C$zui=C$zut;if(void 0===C$zue&&(C$zui=C$zut.x,C$zue=C$zut.y),this._isInvalidPosition(C$zui,C$zue))throw new Error("cc.TiledLayer.getTileGIDAt(): invalid position");if(!this._tiles)return cc.logID(7237),null;C$zut=Math.floor(C$zui)+Math.floor(C$zue)*this._layerSize.width;return(this._tiles[C$zut]&cc.TiledMap.TileFlag.FLIPPED_MASK)>>>0},getTileFlagsAt:function(C$zut,C$zue){if(!C$zut)throw new Error("TiledLayer.getTileFlagsAt: pos should be non-null");if(void 0!==C$zue&&(C$zut=cc.v2(C$zut,C$zue)),this._isInvalidPosition(C$zut))throw new Error("TiledLayer.getTileFlagsAt: invalid position");if(!this._tiles)return cc.logID(7240),null;C$zue=Math.floor(C$zut.x)+Math.floor(C$zut.y)*this._layerSize.width;return(this._tiles[C$zue]&cc.TiledMap.TileFlag.FLIPPED_ALL)>>>0},_setCullingDirty:function(C$zut){this._cullingDirty=C$zut},_isCullingDirty:function(){return this._cullingDirty},_updateViewPort:function(C$zut,C$zue,C$zui,C$zur){var C$zun,C$zua,C$zuo;this._viewPort.width===C$zui&&this._viewPort.height===C$zur&&this._viewPort.x===C$zut&&this._viewPort.y===C$zue||(this._viewPort.x=C$zut,this._viewPort.y=C$zue,this._viewPort.width=C$zui,this._viewPort.height=C$zur,C$zut=1,this._layerOrientation===cc.TiledMap.Orientation.ISO&&(C$zut=2),C$zue=this._viewPort.x-this._offset.x+this._leftDownToCenterX,C$zuo=this._viewPort.y-this._offset.y+this._leftDownToCenterY,C$zun=C$zue-this._leftOffset,C$zua=C$zuo-this._downOffset,C$zue=C$zue+C$zui+this._rightOffset,C$zui=C$zuo+C$zur+this._topOffset,C$zuo=this._cullingRect.leftDown,C$zur=this._cullingRect.rightTop,this._positionToRowCol(C$zun=C$zun<0?0:C$zun,C$zua=C$zua<0?0:C$zua,C$zuc),C$zuc.row-=C$zut,C$zuc.col-=C$zut,C$zuc.row=0<C$zuc.row?C$zuc.row:0,C$zuc.col=0<C$zuc.col?C$zuc.col:0,C$zuc.row===C$zuo.row&&C$zuc.col===C$zuo.col||(C$zuo.row=C$zuc.row,C$zuo.col=C$zuc.col,this._cullingDirty=!0),C$zue<0||C$zui<0?(C$zuc.row=-1,C$zuc.col=-1):(this._positionToRowCol(C$zue,C$zui,C$zuc),C$zuc.row++,C$zuc.col++),C$zuc.row>this._rightTop.row&&(C$zuc.row=this._rightTop.row),C$zuc.col>this._rightTop.col&&(C$zuc.col=this._rightTop.col),C$zuc.row===C$zur.row&&C$zuc.col===C$zur.col||(C$zur.row=C$zuc.row,C$zur.col=C$zuc.col,this._cullingDirty=!0))},_positionToRowCol:function(C$zut,C$zue,C$zui){var C$zur=cc.TiledMap;var C$zun=C$zur.Orientation;var C$zuh=C$zur.StaggerAxis;var C$zua=this._mapTileSize.width,C$zuo=this._mapTileSize.height,C$zuu=.5*C$zua,C$zu_=.5*C$zuo;var C$zus,C$zuc=0,C$zul=0,C$zud=this._staggerAxis;this._layerSize.width;switch(this._layerOrientation){case C$zun.ORTHO:C$zul=Math.floor(C$zut/C$zua),C$zuc=Math.floor(C$zue/C$zuo);break;case C$zun.ISO:C$zul=Math.floor(C$zut/C$zuu),C$zuc=Math.floor(C$zue/C$zu_);break;case C$zun.HEX:C$zud===C$zuh.STAGGERAXIS_Y?(C$zus=(C$zuc=Math.floor(C$zue/(C$zuo-this._diffY1)))%2==1?C$zuu*this._odd_even:0,C$zul=Math.floor((C$zut-C$zus)/C$zua)):(C$zus=(C$zul=Math.floor(C$zut/(C$zua-this._diffX1)))%2==1?C$zu_*-this._odd_even:0,C$zuc=Math.floor((C$zue-C$zus)/C$zuo))}return C$zui.row=C$zuc,C$zui.col=C$zul,C$zui},_updateCulling:function(){var C$zut,C$zue;this._enableCulling&&(this.node._updateWorldMatrix(),C$zui.Mat4.invert(C$zua,this.node._worldMatrix),C$zut=cc.visibleRect,(C$zue=cc.Camera.findCamera(this.node))&&(C$zuo.x=0,C$zuo.y=0,C$zus.x=C$zuo.x+C$zut.width,C$zus.y=C$zuo.y+C$zut.height,C$zue.getScreenToWorldPoint(C$zuo,C$zuo),C$zue.getScreenToWorldPoint(C$zus,C$zus),C$zui.Vec2.transformMat4(C$zuo,C$zuo,C$zua),C$zui.Vec2.transformMat4(C$zus,C$zus,C$zua),this._updateViewPort(C$zuo.x,C$zuo.y,C$zus.x-C$zuo.x,C$zus.y-C$zuo.y)))},getLayerOrientation:function(){return this._layerOrientation},getProperties:function(){return this._properties},_updateVertices:function(){var C$zuh=cc.TiledMap;var C$zuu=C$zuh.TileFlag.FLIPPED_MASK;var C$zu_=C$zuh.StaggerAxis;var C$zud=C$zuh.Orientation;var C$zuf=this._vertices;C$zuf.length=0;var C$zup=this._layerOrientation,C$zum=this._tiles;if(C$zum){var C$zut=this._rightTop;C$zut.row=-1,C$zut.col=-1;var C$zuv=this._mapTileSize.width,C$zuy=this._mapTileSize.height,C$zug=.5*C$zuv,C$zub=.5*C$zuy,C$zue=this._layerSize.height,C$zuC=this._layerSize.width,C$zux=this._texGrids;var C$zui,C$zur,C$zun,C$zuA,C$zuS,C$zuT,C$zuw,C$zuE=0;C$zup===C$zud.HEX&&(C$zuA=this._staggerAxis,C$zuS=this._diffX1,C$zuT=this._diffY1,C$zuw=this._odd_even);var C$zua=0,C$zuo=0;this._topOffset=0,this._downOffset=0,this._leftOffset=0,this._rightOffset=0,this._hasAniGrid=!1;var C$zuP,C$zuM,C$zuR=0,C$zuI=0;for(var C$zus=0;C$zus<C$zue;++C$zus){for(var C$zuc=0;C$zuc<C$zuC;++C$zuc){var C$zuB=C$zuE+C$zuc;if(C$zui=C$zux[C$zul=(C$zum[C$zuB]&C$zuu)>>>0],this._animations[C$zul]&&(this._hasAniGrid=!0),C$zui){switch(C$zup){case C$zud.ORTHO:C$zur=(C$zua=C$zuc)*C$zuv,C$zun=(C$zuo=C$zue-C$zus-1)*C$zuy;break;case C$zud.ISO:C$zur=C$zug*(C$zua=C$zue+C$zuc-C$zus-1),C$zun=C$zub*(C$zuo=C$zue+C$zuC-C$zuc-C$zus-2);break;case C$zud.HEX:C$zur=C$zuc*(C$zuv-C$zuS)+(C$zuA===C$zu_.STAGGERAXIS_Y&&C$zus%2==1?C$zug*C$zuw:0),C$zun=(C$zue-C$zus-1)*(C$zuy-C$zuT)+(C$zuA===C$zu_.STAGGERAXIS_X&&C$zuc%2==1?C$zub*-C$zuw:0),C$zua=C$zuc,C$zuo=C$zue-C$zus-1}var C$zul=C$zuf[C$zuo]=C$zuf[C$zuo]||{minCol:0,maxCol:0};var C$zuD=C$zul[C$zua]=C$zul[C$zua]||{};C$zul.minCol>C$zua&&(C$zul.minCol=C$zua),C$zul.maxCol<C$zua&&(C$zul.maxCol=C$zua),C$zut.row<C$zuo&&(C$zut.row=C$zuo),C$zut.col<C$zua&&(C$zut.col=C$zua),C$zul=C$zui.tileset.tileOffset,C$zur+=this._offset.x+C$zul.x,C$zun+=this._offset.y-C$zul.y,C$zuR=(C$zuR=-C$zul.y+C$zui.tileset._tileSize.height-C$zuy)<0?0:C$zuR,C$zuP=C$zul.y<0?0:C$zul.y,C$zuM=-C$zul.x<0?0:-C$zul.x,C$zuI=(C$zuI=C$zul.x+C$zui.tileset._tileSize.width-C$zuv)<0?0:C$zuI,this._rightOffset<C$zuM&&(this._rightOffset=C$zuM),this._leftOffset<C$zuI&&(this._leftOffset=C$zuI),this._topOffset<C$zuP&&(this._topOffset=C$zuP),this._downOffset<C$zuR&&(this._downOffset=C$zuR),C$zuD.left=C$zur,C$zuD.bottom=C$zun,C$zuD.index=C$zuB}}C$zuE+=C$zuC}this._verticesDirty=!1}},getTiledTileAt:function(C$zut,C$zue,C$zui){if(this._isInvalidPosition(C$zut,C$zue))throw new Error("TiledLayer.getTiledTileAt: invalid position");if(!this._tiles)return cc.logID(7236),null;var C$zur=Math.floor(C$zut)+Math.floor(C$zue)*this._layerSize.width;C$zur=this._tiledTiles[C$zur];return!C$zur&&C$zui&&((C$zur=(C$zui=new cc.Node).addComponent(cc.TiledTile))._x=C$zut,C$zur._y=C$zue,C$zur._layer=this,C$zur._updateInfo(),C$zui.parent=this.node),C$zur},setTiledTileAt:function(C$zut,C$zue,C$zui){if(this._isInvalidPosition(C$zut,C$zue))throw new Error("TiledLayer.setTiledTileAt: invalid position");if(!this._tiles)return cc.logID(7236),null;C$zut=Math.floor(C$zut)+Math.floor(C$zue)*this._layerSize.width;return this._tiledTiles[C$zut]=C$zui,this._cullingDirty=!0,this._hasTiledNodeGrid=!!C$zui||this._tiledTiles.some(function(C$zut,C$zue){return!!C$zut}),C$zui},getTexture:function(C$zut){return C$zut=C$zut||0,this._textures&&0<=C$zut&&this._textures.length>C$zut?this._textures[C$zut]:null},getTextures:function(){return this._textures},setTexture:function(C$zut){this.setTextures([C$zut])},setTextures:function(C$zut){this._textures=C$zut,this._activateMaterial()},getLayerSize:function(){return this._layerSize},getMapTileSize:function(){return this._mapTileSize},getTileSet:function(C$zut){return C$zut=C$zut||0,this._tilesets&&0<=C$zut&&this._tilesets.length>C$zut?this._tilesets[C$zut]:null},getTileSets:function(){return this._tilesets},setTileSet:function(C$zut){this.setTileSets([C$zut])},setTileSets:function(C$zur){this._tilesets=C$zur;var C$zut=this._textures=[];var C$zun=this._texGrids=[];for(var C$zue=0;C$zue<C$zur.length;C$zue++){var C$zui=C$zur[C$zue];C$zui&&(C$zut[C$zue]=C$zui.sourceImage)}cc.TiledMap.loadAllTextures(C$zut,function(){for(var C$zut=0,C$zue=C$zur.length;C$zut<C$zue;++C$zut){var C$zui=C$zur[C$zut];C$zui&&cc.TiledMap.fillTextureGrids(C$zui,C$zun,C$zut)}this._prepareToRender()}.bind(this))},_traverseAllGrid:function(){var C$zut=this._tiles;var C$zue=this._texGrids;var C$zui=this._tilesetIndexArr;var C$zur={};var C$zun=cc.TiledMap.TileFlag.FLIPPED_MASK;for(var C$zua=C$zui.length=0;C$zua<C$zut.length;C$zua++){var C$zuo=C$zut[C$zua];var C$zus;0!==C$zuo&&((C$zus=C$zue[C$zuo=(C$zuo&C$zun)>>>0])?C$zur[C$zus=C$zus.texId]||(C$zur[C$zus]=!0,C$zui.push(C$zus)):cc.error("CCTiledLayer:_traverseAllGrid grid is null, gid is:",C$zuo))}},_init:function(C$zut,C$zue,C$zui,C$zur,C$zun){this._cullingDirty=!0,this._layerInfo=C$zut,this._mapInfo=C$zue;var C$zua=C$zut._layerSize;this._layerName=C$zut.name,this._tiles=C$zut._tiles,this._properties=C$zut.properties,this._layerSize=C$zua,this._minGID=C$zut._minGID,this._maxGID=C$zut._maxGID,this._opacity=C$zut._opacity,this._renderOrder=C$zue.renderOrder,this._staggerAxis=C$zue.getStaggerAxis(),this._staggerIndex=C$zue.getStaggerIndex(),this._hexSideLength=C$zue.getHexSideLength(),this._animations=C$zue.getTileAnimations(),this._tilesets=C$zui,this._textures=C$zur,this._texGrids=C$zun,this._layerOrientation=C$zue.orientation,this._mapTileSize=C$zue.getTileSize();C$zua=this._mapTileSize.width;C$zui=this._mapTileSize.height;C$zur=this._layerSize.width;C$zun=this._layerSize.height;var C$zuo,C$zus,C$zuc;this._layerOrientation===cc.TiledMap.Orientation.HEX?(C$zuo=(C$zue=cc.TiledMap).StaggerAxis,C$zue=C$zue.StaggerIndex,C$zuc=C$zus=0,this._odd_even=this._staggerIndex===C$zue.STAGGERINDEX_ODD?1:-1,this._staggerAxis===C$zuo.STAGGERAXIS_X?(this._diffX1=(C$zua-this._hexSideLength)/2,this._diffY1=0,C$zuc=C$zui*(C$zun+.5),C$zus=(C$zua+this._hexSideLength)*Math.floor(C$zur/2)+C$zua*(C$zur%2)):(this._diffX1=0,this._diffY1=(C$zui-this._hexSideLength)/2,C$zus=C$zua*(C$zur+.5),C$zuc=(C$zui+this._hexSideLength)*Math.floor(C$zun/2)+C$zui*(C$zun%2)),this.node.setContentSize(C$zus,C$zuc)):this._layerOrientation===cc.TiledMap.Orientation.ISO?this.node.setContentSize(.5*C$zua*(C$zue=C$zur+C$zun),.5*C$zui*C$zue):this.node.setContentSize(C$zur*C$zua,C$zun*C$zui),this._offset=cc.v2(C$zut.offset.x,-C$zut.offset.y),this._useAutomaticVertexZ=!1,this._vertexZvalue=0,this._syncAnchorPoint(),this._prepareToRender()},_prepareToRender:function(){this._updateVertices(),this._traverseAllGrid(),this._updateAllUserNode(),this._activateMaterial()},_activateMaterial:function(){var C$zut=this._tilesetIndexArr;if(0!==C$zut.length){var C$zue=this._texIdToMatIndex={};var C$zui=this._textures;var C$zur=C$zut.length;for(var C$zun=0;C$zun<C$zur;C$zun++){var C$zua=C$zut[C$zun];var C$zuo=C$zui[C$zua];var C$zus=this._materials[C$zun];C$zus=C$zus||C$zu_.getBuiltinMaterial("2d-sprite"),(C$zus=C$zuu.default.create(C$zus,this)).define("CC_USE_MODEL",!0),C$zus.setProperty("texture",C$zuo),this._materials[C$zun]=C$zus,C$zue[C$zua]=C$zun}this._materials.length=C$zur,this.markForRender(!0)}else this.disableRender()}});cc.TiledLayer=C$zue.exports=C$zut},{"../core/assets/material/CCMaterial":53,"../core/assets/material/material-variant":60,"../core/components/CCRenderComponent":89,"../core/renderer/render-flow":221,"../core/value-types":279}],338:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCTMXXMLParser"),C$zut("./CCTiledMapAsset"),C$zut("./CCTiledLayer"),C$zut("./CCTiledTile"),C$zut("./CCTiledObjectGroup");C$zut=cc.Enum({ORTHO:0,HEX:1,ISO:2});var C$zur=cc.Enum({NONE:0,MAP:1,LAYER:2,OBJECTGROUP:3,OBJECT:4,TILE:5});var C$zun=cc.Enum({HORIZONTAL:2147483648,VERTICAL:1073741824,DIAGONAL:536870912,FLIPPED_ALL:4026531840,FLIPPED_MASK:268435455});var C$zua=cc.Enum({STAGGERAXIS_X:0,STAGGERAXIS_Y:1});var C$zuo=cc.Enum({STAGGERINDEX_ODD:0,STAGGERINDEX_EVEN:1});var C$zus=cc.Enum({RightDown:0,RightUp:1,LeftDown:2,LeftUp:3});var C$zuc=cc.Enum({RECT:0,ELLIPSE:1,POLYGON:2,POLYLINE:3,IMAGE:4,TEXT:5});C$zut=cc.Class({name:"cc.TiledMap",extends:cc.Component,editor:!1,ctor:function(){this._texGrids=[],this._textures=[],this._tilesets=[],this._animations=[],this._imageLayers=[],this._layers=[],this._groups=[],this._images=[],this._properties=[],this._tileProperties=[],this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0)},statics:{Orientation:C$zut,Property:C$zur,TileFlag:C$zun,StaggerAxis:C$zua,StaggerIndex:C$zuo,TMXObjectType:C$zuc,RenderOrder:C$zus},properties:{_tmxFile:{default:null,type:cc.TiledMapAsset},tmxAsset:{get:function(){return this._tmxFile},set:function(C$zut,C$zue){this._tmxFile!==C$zut&&(this._tmxFile=C$zut,this._applyFile())},type:cc.TiledMapAsset}},getMapSize:function(){return this._mapSize},getTileSize:function(){return this._tileSize},getMapOrientation:function(){return this._mapOrientation},getObjectGroups:function(){return this._groups},getObjectGroup:function(C$zut){var C$zue=this._groups;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun&&C$zun.getGroupName()===C$zut)return C$zun}return null},enableCulling:function(C$zut){var C$zue=this._layers;for(var C$zui=0;C$zui<C$zue.length;++C$zui)C$zue[C$zui].enableCulling(C$zut)},getProperties:function(){return this._properties},getLayers:function(){return this._layers},getLayer:function(C$zut){var C$zue=this._layers;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun&&C$zun.getLayerName()===C$zut)return C$zun}return null},_changeLayer:function(C$zut,C$zue){var C$zui=this._layers;for(var C$zur=0,C$zun=C$zui.length;C$zur<C$zun;C$zur++){var C$zua=C$zui[C$zur];if(C$zua&&C$zua.getLayerName()===C$zut)return void(C$zui[C$zur]=C$zue)}},getProperty:function(C$zut){return this._properties[C$zut.toString()]},getPropertiesForGID:function(C$zut){return this._tileProperties[C$zut]},__preload:function(){this._tmxFile&&this._applyFile()},onEnable:function(){this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},onDisable:function(){this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},_applyFile:function(){var C$zut=this._tmxFile;if(C$zut){var C$zue=C$zut.textures;var C$zui=C$zut.textureNames;var C$zuh=C$zut.textureSizes;var C$zur={};var C$zun={};for(var C$zua=0;C$zua<C$zue.length;++C$zua){var C$zuo=C$zui[C$zua];C$zur[C$zuo]=C$zue[C$zua],C$zun[C$zuo]=C$zuh[C$zua]}var C$zuu={};C$zue=C$zut.imageLayerTextures,C$zui=C$zut.imageLayerTextureNames;for(var C$zus=0;C$zus<C$zue.length;++C$zus)C$zuu[C$zui[C$zus]]=C$zue[C$zus];var C$zuc=C$zut.tsxFileNames;var C$zu_=C$zut.tsxFiles;var C$zud={};for(var C$zul=0;C$zul<C$zuc.length;++C$zul)0<C$zuc[C$zul].length&&(C$zud[C$zuc[C$zul]]=C$zu_[C$zul].text);C$zut=new cc.TMXMapInfo(C$zut.tmxXmlStr,C$zud,C$zur,C$zun,C$zuu);var C$zuf=C$zut.getTilesets();C$zuf&&0!==C$zuf.length||cc.logID(7241),this._buildWithMapInfo(C$zut)}else this._releaseMapInfo()},_releaseMapInfo:function(){var C$zut=this._layers;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)C$zut[C$zue].node.removeFromParent(!0),C$zut[C$zue].node.destroy();C$zut.length=0;var C$zur=this._groups;for(var C$zun=0,C$zua=C$zur.length;C$zun<C$zua;C$zun++)C$zur[C$zun].node.removeFromParent(!0),C$zur[C$zun].node.destroy();C$zur.length=0;var C$zuo=this._images;for(var C$zus=0,C$zuc=C$zuo.length;C$zus<C$zuc;C$zus++)C$zuo[C$zus].removeFromParent(!0),C$zuo[C$zus].destroy();C$zuo.length=0},_syncAnchorPoint:function(){var C$zut=this.node.getAnchorPoint();var C$zue=this.node.width*C$zut.x;var C$zui=this.node.height*(1-C$zut.y);var C$zur,C$zun;for(C$zur=0,C$zun=this._layers.length;C$zur<C$zun;C$zur++)this._layers[C$zur].node.setAnchorPoint(C$zut);for(C$zur=0,C$zun=this._groups.length;C$zur<C$zun;C$zur++){var C$zua=this._groups[C$zur];var C$zuo=C$zua.node;C$zuo.anchorX=.5,C$zuo.anchorY=.5,C$zuo.x=C$zua._offset.x-C$zue+C$zuo.width*C$zuo.anchorX,C$zuo.y=C$zua._offset.y+C$zui-C$zuo.height*C$zuo.anchorY}for(C$zur=0,C$zun=this._images.length;C$zur<C$zun;C$zur++){var C$zus=this._images[C$zur];C$zus.anchorX=.5,C$zus.anchorY=.5,C$zus.x=C$zus._offset.x-C$zue+C$zus.width*C$zus.anchorX,C$zus.y=C$zus._offset.y+C$zui-C$zus.height*C$zus.anchorY}},_fillAniGrids:function(C$zut,C$zue){for(var C$zui in C$zue){C$zui=C$zue[C$zui];if(C$zui){var C$zur=C$zui.frames;for(var C$zun=0;C$zun<C$zur.length;C$zun++){var C$zua=C$zur[C$zun];C$zua.grid=C$zut[C$zua.tileid]}}}},_buildLayerAndGroup:function(){var C$zuh=this._tilesets;var C$zut=this._texGrids;var C$zuu=this._animations;for(var C$zue=C$zut.length=0,C$zu_=C$zuh.length;C$zue<C$zu_;++C$zue){var C$zud=C$zuh[C$zue];C$zud&&cc.TiledMap.fillTextureGrids(C$zud,C$zut,C$zue)}this._fillAniGrids(C$zut,C$zuu);var C$zui=this._layers;var C$zur=this._groups;var C$zun=this._images;var C$zua={};for(var C$zuf=0,C$zup=C$zui.length;C$zuf<C$zup;C$zuf++)C$zua[C$zui[C$zuf].node._name]=!0;for(var C$zum=0,C$zuv=C$zur.length;C$zum<C$zuv;C$zum++)C$zua[C$zur[C$zum].node._name]=!0;for(var C$zuy=0,C$zug=C$zun.length;C$zuy<C$zug;C$zuy++)C$zua[C$zun[C$zuy]._name]=!0;C$zui=this._layers=[],C$zur=this._groups=[],C$zun=this._images=[];var C$zub=this._mapInfo;var C$zuC=this.node;var C$zuo=C$zub.getAllChildren();var C$zux=this._textures;var C$zuA=0;var C$zuS=0;if(C$zuo&&0<C$zuo.length)for(var C$zuT=0,C$zuw=C$zuo.length;C$zuT<C$zuw;C$zuT++){var C$zus=C$zuo[C$zuT];var C$zuc=C$zus.name;var C$zul=this.node.getChildByName(C$zuc);var C$zuE;C$zua[C$zuc]=!1,C$zul||((C$zul=new cc.Node).name=C$zuc,C$zuC.addChild(C$zul)),C$zul.setSiblingIndex(C$zuT),C$zul.active=C$zus.visible,C$zus instanceof cc.TMXLayerInfo?((C$zuc=(C$zuc=C$zul.getComponent(cc.TiledLayer))||C$zul.addComponent(cc.TiledLayer))._init(C$zus,C$zub,C$zuh,C$zux,C$zut),C$zus.ownTiles=!1,C$zui.push(C$zuc)):C$zus instanceof cc.TMXObjectGroupInfo?((C$zuc=(C$zuc=C$zul.getComponent(cc.TiledObjectGroup))||C$zul.addComponent(cc.TiledObjectGroup))._init(C$zus,C$zub,C$zut),C$zur.push(C$zuc)):C$zus instanceof cc.TMXImageLayerInfo&&(C$zuc=C$zus.sourceImage,C$zul.opacity=C$zus.opacity,C$zul.layerInfo=C$zus,C$zul._offset=cc.v2(C$zus.offset.x,-C$zus.offset.y),(C$zuE=(C$zus=(C$zus=C$zul.getComponent(cc.Sprite))||C$zul.addComponent(cc.Sprite)).spriteFrame||new cc.SpriteFrame).setTexture(C$zuc),C$zus.spriteFrame=C$zuE,C$zul.width=C$zuc.width,C$zul.height=C$zuc.height,C$zun.push(C$zul)),C$zuA=Math.max(C$zuA,C$zul.width),C$zuS=Math.max(C$zuS,C$zul.height)}var C$zuP=C$zuC.children;for(var C$zuM=0,C$zuR=C$zuP.length;C$zuM<C$zuR;C$zuM++){var C$zuI=C$zuP[C$zuM];C$zua[C$zuI._name]&&C$zuI.destroy()}this.node.width=C$zuA,this.node.height=C$zuS,this._syncAnchorPoint()},_buildWithMapInfo:function(C$zut){this._mapInfo=C$zut,this._mapSize=C$zut.getMapSize(),this._tileSize=C$zut.getTileSize(),this._mapOrientation=C$zut.orientation,this._properties=C$zut.properties,this._tileProperties=C$zut.getTileProperties(),this._imageLayers=C$zut.getImageLayers(),this._animations=C$zut.getTileAnimations(),this._tilesets=C$zut.getTilesets();var C$zue=this._tilesets;var C$zui=[];for(var C$zur=this._textures.length=0,C$zun=C$zue.length;C$zur<C$zun;++C$zur){var C$zua=C$zue[C$zur];C$zua&&C$zua.sourceImage&&(this._textures[C$zur]=C$zua.sourceImage,C$zui.push(C$zua.sourceImage))}for(var C$zuo=0;C$zuo<this._imageLayers.length;C$zuo++){var C$zus=this._imageLayers[C$zuo];C$zus&&C$zus.sourceImage&&C$zui.push(C$zus.sourceImage)}cc.TiledMap.loadAllTextures(C$zui,function(){this._buildLayerAndGroup()}.bind(this))},update:function(C$zut){var C$zue=this._animations;var C$zui=this._texGrids;for(var C$zur in C$zue){var C$zun=C$zue[C$zur];var C$zua=C$zun.frames;var C$zuo=C$zua[C$zun.frameIdx];C$zun.dt+=C$zut,C$zuo.duration<C$zun.dt&&(C$zun.dt=0,C$zun.frameIdx++,C$zun.frameIdx>=C$zua.length&&(C$zun.frameIdx=0),C$zuo=C$zua[C$zun.frameIdx]),C$zui[C$zur]=C$zuo.grid}}});cc.TiledMap=C$zue.exports=C$zut,cc.TiledMap.loadAllTextures=function(C$zut,C$zue){var C$zui=C$zut.length;if(0!==C$zui){var C$zur=0;var C$zun=function(){C$zui<=++C$zur&&C$zue()};for(var C$zua=0;C$zua<C$zui;C$zua++){var C$zuo=C$zut[C$zua];C$zuo.loaded?C$zun():C$zuo.once("load",function(){C$zun()})}}else C$zue()},cc.TiledMap.fillTextureGrids=function(C$zut,C$zue,C$zuh){var C$zui=C$zut.sourceImage;C$zut.imageSize.width&&C$zut.imageSize.height||(C$zut.imageSize.width=C$zui.width,C$zut.imageSize.height=C$zui.height);var C$zuu=C$zut._tileSize.width,C$zu_=C$zut._tileSize.height,C$zur=C$zui.width,C$zun=C$zui.height,C$zui=C$zut.spacing,C$zua=C$zut.margin,C$zud=Math.floor((C$zur-2*C$zua+C$zui)/(C$zuu+C$zui)),C$zua=Math.floor((C$zun-2*C$zua+C$zui)/(C$zu_+C$zui))*C$zud,C$zuo=C$zut.firstGid,C$zus=null,C$zuc=!!C$zue[C$zuo],C$zul=cc.macro.FIX_ARTIFACTS_BY_STRECHING_TEXEL_TMX?.5:0;var C$zuf=C$zut.firstGid+(C$zua=C$zua<=0?1:C$zua);for(;C$zuo<C$zuf&&((C$zuc=C$zuc&&!C$zue[C$zuo]?!1:C$zuc)||!C$zue[C$zuo]);++C$zuo)C$zut.rectForGID(C$zuo,C$zus={texId:C$zuh,tileset:C$zut,x:0,y:0,width:C$zuu,height:C$zu_,t:0,l:0,r:0,b:0,gid:C$zuo}),C$zus.x+=C$zul,C$zus.y+=C$zul,C$zus.width-=2*C$zul,C$zus.height-=2*C$zul,C$zus.t=C$zus.y/C$zun,C$zus.l=C$zus.x/C$zur,C$zus.r=(C$zus.x+C$zus.width)/C$zur,C$zus.b=(C$zus.y+C$zus.height)/C$zun,C$zue[C$zuo]=C$zus},cc.js.obsolete(cc.TiledMap.prototype,"cc.TiledMap.tmxFile","tmxAsset",!0),cc.js.get(cc.TiledMap.prototype,"mapLoaded",function(){return cc.errorID(7203),[]},!1)},{"./CCTMXXMLParser":336,"./CCTiledLayer":337,"./CCTiledMapAsset":339,"./CCTiledObjectGroup":341,"./CCTiledTile":342}],339:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.TiledMapAsset",extends:cc.Asset,properties:{tmxXmlStr:"",textures:{default:[],type:[cc.Texture2D]},textureNames:[cc.String],textureSizes:{default:[],type:[cc.Size]},imageLayerTextures:{default:[],type:[cc.Texture2D]},imageLayerTextureNames:[cc.String],tsxFiles:[cc.TextAsset],tsxFileNames:[cc.String]},statics:{preventDeferredLoadDependents:!0},createNode:!1});cc.TiledMapAsset=C$zur,C$zue.exports=C$zur},{}],340:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=(C$zut=C$zut("../renderer/core/input-assembler"))&&C$zut.__esModule?C$zut:{default:C$zut};C$zut=cc.Class({name:"cc.TiledMapRenderDataList",ctor:function(){this._dataList=[],this._offset=0},_pushRenderData:function(){var C$zut={};C$zut.ia=new C$zur.default,C$zut.nodesRenderList=[],this._dataList.push(C$zut)},popRenderData:function(C$zut){this._offset>=this._dataList.length&&this._pushRenderData();var C$zue=this._dataList[this._offset];C$zue.nodesRenderList.length=0;var C$zui=C$zue.ia;return C$zui._vertexBuffer=C$zut._vb,C$zui._indexBuffer=C$zut._ib,C$zui._start=C$zut.indiceOffset,C$zui._count=0,this._offset++,C$zue},pushNodesList:function(C$zut,C$zue){C$zut.nodesRenderList.push(C$zue)},reset:function(){this._offset=0}});cc.TiledMapRenderDataList=C$zue.exports=C$zut},{"../renderer/core/input-assembler":302}],341:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.TiledObjectGroup",extends:cc.Component,getPositionOffset:function(){return this._positionOffset},getProperties:function(){this._properties},getGroupName:function(){return this._groupName},getProperty:function(C$zut){return this._properties[C$zut.toString()]},getObject:function(C$zut){for(var C$zue=0,C$zui=this._objects.length;C$zue<C$zui;C$zue++){var C$zur=this._objects[C$zue];if(C$zur&&C$zur.name===C$zut)return C$zur}return null},getObjects:function(){return this._objects},_init:function(C$zuh,C$zut,C$zuu){var C$zue=cc.TiledMap;var C$zu_=C$zue.TMXObjectType;var C$zud=C$zue.Orientation;var C$zuf=C$zue.StaggerAxis;C$zue=C$zue.TileFlag;var C$zup=C$zue.FLIPPED_MASK;var C$zum=C$zue.HORIZONTAL;var C$zuv=C$zue.VERTICAL;this._groupName=C$zuh.name,this._positionOffset=C$zuh.offset,this._mapInfo=C$zut,this._properties=C$zuh.getProperties(),this._offset=cc.v2(C$zuh.offset.x,-C$zuh.offset.y),this._opacity=C$zuh._opacity;var C$zui=C$zut._mapSize;var C$zur=C$zut._tileSize;var C$zue=0,C$zuy=0;C$zut.orientation===C$zud.HEX?C$zut.getStaggerAxis()===C$zuf.STAGGERAXIS_X?(C$zuy=C$zur.height*(C$zui.height+.5),C$zue=(C$zur.width+C$zut.getHexSideLength())*Math.floor(C$zui.width/2)+C$zur.width*(C$zui.width%2)):(C$zue=C$zur.width*(C$zui.width+.5),C$zuy=(C$zur.height+C$zut.getHexSideLength())*Math.floor(C$zui.height/2)+C$zur.height*(C$zui.height%2)):C$zuy=C$zut.orientation===C$zud.ISO?(C$zuf=C$zui.width+C$zui.height,C$zue=.5*C$zur.width*C$zuf,.5*C$zur.height*C$zuf):(C$zue=C$zui.width*C$zur.width,C$zui.height*C$zur.height),this.node.setContentSize(C$zue,C$zuy);var C$zug=C$zue*this.node.anchorX;var C$zub=C$zuy*(1-this.node.anchorY);var C$zuC=C$zuh._objects;var C$zux={};for(var C$zuA=0,C$zuS=C$zuC.length;C$zuA<C$zuS;C$zuA++){var C$zun=C$zuC[C$zuA];var C$zua=C$zun.type;C$zun.offset=cc.v2(C$zun.x,C$zun.y);var C$zuT=C$zun.points||C$zun.polylinePoints;if(C$zuT)for(var C$zuw=0;C$zuw<C$zuT.length;C$zuw++)C$zuT[C$zuw].y*=-1;var C$zuE,C$zuo;var C$zus,C$zuP,C$zuc,C$zuM,C$zuR,C$zuI,C$zul;C$zud.ISO!==C$zut.orientation?C$zun.y=C$zuy-C$zun.y:(C$zuE=C$zun.x/C$zur.height,C$zuo=C$zun.y/C$zur.height,C$zun.x=.5*C$zur.width*(C$zui.height+C$zuE-C$zuo),C$zun.y=.5*C$zur.height*(C$zui.width+C$zui.height-C$zuE-C$zuo)),C$zua===C$zu_.TEXT&&(C$zux[C$zuE="text"+C$zun.id]=!0,(C$zuo=(C$zuo=this.node.getChildByName(C$zuE))||new cc.Node).anchorX=0,C$zuo.anchorY=1,C$zuo.angle=-C$zun.rotation,C$zuo.x=C$zun.x-C$zug,C$zuo.y=C$zun.y-C$zub,C$zuo.name=C$zuE,C$zuo.parent=this.node,C$zuo.color=C$zun.color,C$zuo.opacity=this._opacity,C$zuo.setSiblingIndex(C$zuA),(C$zus=(C$zus=C$zuo.getComponent(cc.Label))||C$zuo.addComponent(cc.Label)).overflow=cc.Label.Overflow.SHRINK,C$zus.lineHeight=C$zun.height,C$zus.string=C$zun.text,C$zus.horizontalAlign=C$zun.halign,C$zus.verticalAlign=C$zun.valign,C$zus.fontSize=C$zun.pixelsize,C$zuo.width=C$zun.width,C$zuo.height=C$zun.height),C$zua!==C$zu_.IMAGE||(C$zua=C$zuu[((C$zus=C$zun.gid)&C$zup)>>>0])&&(C$zul=C$zua.tileset,C$zux[C$zuP="img"+C$zun.id]=!0,C$zuc=this.node.getChildByName(C$zuP),C$zuM=C$zun.width||C$zua.width,C$zuR=C$zun.height||C$zua.height,C$zuI=C$zul.tileOffset.x,C$zul=C$zul.tileOffset.y,C$zuc instanceof cc.PrivateNode&&(C$zuc.removeFromParent(),C$zuc.destroy(),C$zuc=null),C$zuc=C$zuc||new cc.Node,C$zud.ISO==C$zut.orientation?C$zuc.anchorX=.5+C$zuI/C$zuM:C$zuc.anchorX=C$zuI/C$zuM,C$zuc.anchorY=C$zul/C$zuR,C$zuc.angle=-C$zun.rotation,C$zuc.x=C$zun.x-C$zug,C$zuc.y=C$zun.y-C$zub,C$zuc.name=C$zuP,C$zuc.parent=this.node,C$zuc.opacity=this._opacity,C$zuc.setSiblingIndex(C$zuA),C$zul=(C$zul=(C$zuI=(C$zuI=C$zuc.getComponent(cc.Sprite))||C$zuc.addComponent(cc.Sprite)).spriteFrame)||new cc.SpriteFrame,(C$zus&C$zum)>>>0?C$zul.setFlipX(!0):C$zul.setFlipX(!1),(C$zus&C$zuv)>>>0?C$zul.setFlipY(!0):C$zul.setFlipY(!1),C$zul.setTexture(C$zua.tileset.sourceImage,cc.rect(C$zua)),C$zuI.spriteFrame=C$zul,C$zuI.setVertsDirty(),C$zuc.width=C$zuM,C$zuc.height=C$zuR)}this._objects=C$zuC;var C$zuB=this.node.children;var C$zuD=/^(?:img|text)\d+$/;for(var C$zuL=0,C$zuV=C$zuB.length;C$zuL<C$zuV;C$zuL++){var C$zuO=C$zuB[C$zuL];var C$zuF=C$zuO._name;C$zuD.test(C$zuF)&&!C$zux[C$zuF]&&C$zuO.destroy()}}});cc.TiledObjectGroup=C$zue.exports=C$zur},{}],342:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=cc.Class({name:"cc.TiledTile",extends:cc.Component,editor:!1,ctor:function(){this._layer=null},properties:{_x:0,_y:0,x:{get:function(){return this._x},set:function(C$zut){C$zut!==this._x&&(this._layer&&this._layer._isInvalidPosition(C$zut,this._y)?cc.warn("Invalid x, the valid value is between [%s] ~ [%s]",0,this._layer._layerSize.width):(this._resetTile(),this._x=C$zut,this._updateInfo()))},type:cc.Integer},y:{get:function(){return this._y},set:function(C$zut){C$zut!==this._y&&(this._layer&&this._layer._isInvalidPosition(this._x,C$zut)?cc.warn("Invalid y, the valid value is between [%s] ~ [%s]",0,this._layer._layerSize.height):(this._resetTile(),this._y=C$zut,this._updateInfo()))},type:cc.Integer},gid:{get:function(){return this._layer?this._layer.getTileGIDAt(this._x,this._y):0},set:function(C$zut){this._layer&&this._layer.setTileGIDAt(C$zut,this._x,this._y)},type:cc.Integer}},onEnable:function(){var C$zut=this.node.parent;this._layer=C$zut.getComponent(cc.TiledLayer),this._resetTile(),this._updateInfo()},onDisable:function(){this._resetTile()},_resetTile:function(){this._layer&&this._layer.getTiledTileAt(this._x,this._y)===this&&this._layer.setTiledTileAt(this._x,this._y,null)},_updateInfo:function(){var C$zut,C$zue;this._layer&&(C$zut=this._x,C$zue=this._y,this._layer.getTiledTileAt(C$zut,C$zue)?cc.warn("There is already a TiledTile at [%s, %s]",C$zut,C$zue):(this.node.setPosition(this._layer.getPositionAt(C$zut,C$zue)),this._layer.setTiledTileAt(C$zut,C$zue,this)))}});cc.TiledTile=C$zue.exports=C$zur},{}],343:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./CCTiledMap"),C$zut("./CCTiledMapRenderDataList"),C$zut("./tiledmap-buffer"),C$zut("./tmx-layer-assembler")},{"./CCTiledMap":338,"./CCTiledMapRenderDataList":340,"./tiledmap-buffer":344,"./tmx-layer-assembler":345}],344:[function(C$zut,C$zue,C$zui){"use strict";C$zut=cc.Class({name:"cc.TiledMapBuffer",extends:C$zut("../core/renderer/webgl/quad-buffer"),_updateOffset:function(){var C$zut=this._offsetInfo;C$zut.vertexOffset=this.vertexOffset,C$zut.indiceOffset=this.indiceOffset,C$zut.byteOffset=this.byteOffset},adjust:function(C$zut,C$zue){this.vertexOffset+=C$zut,this.indiceOffset+=C$zue,this.indiceStart=this.indiceOffset,this.byteOffset=this.byteOffset+C$zut*this._vertexBytes,this._dirty=!0}});cc.TiledMapBuffer=C$zue.exports=C$zut},{"../core/renderer/webgl/quad-buffer":249}],345:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("../core/renderer/assembler"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;var C$zud=C$zut("../core/value-types");function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zun=C$zut("./CCTiledLayer");var C$zua=C$zut("./CCTiledMap");var C$zuO=C$zua.TileFlag;var C$zuF=C$zuO.FLIPPED_MASK;var C$zuo=C$zut("../core/renderer/");var C$zus=C$zut("../core/renderer/webgl/vertex-format").vfmtPosUvColor;var C$zuN=parseInt(10922.5);var C$zuf=C$zua.RenderOrder;var C$zuc=C$zut("../core/renderer/render-flow");var C$zup=cc.mat4();var C$zum=cc.v3();var C$zuv={row:0,col:0};var C$zuw={x:0,y:0};var C$zuE={x:0,y:0};var C$zuP={x:0,y:0};var C$zuk={x:0,y:0};var C$zuM=null,C$zuz=null,C$zuG=0,C$zuR=0,C$zuU=0,C$zuW=0,C$zuy=null,C$zuI=null,C$zuB=null,C$zuD=null,C$zuH=null,C$zuL=null,C$zuV=null,C$zuj=null;function _visitUserNode(C$zut){C$zut._updateLocalMatrix(),C$zud.Mat4.mul(C$zut._worldMatrix,C$zuy,C$zut._matrix),C$zut._renderFlag&=~(C$zuc.FLAG_TRANSFORM|C$zuc.FLAG_BREAK_FLOW),C$zuc.visitRootNode(C$zut),C$zut._renderFlag|=C$zuc.FLAG_BREAK_FLOW}function _flush(){0!==C$zuz._count&&(C$zuI.material=C$zuM.material,C$zuI.node=C$zuL.node,C$zuI._flushIA(C$zuM.ia),C$zuN<=C$zuG?(C$zuD.uploadData(),C$zuD.switchBuffer(),C$zuV=C$zuD._vData,C$zuj=C$zuD._uintVData,C$zuM=C$zuB.popRenderData(C$zuD),C$zuz=C$zuM.ia,C$zuG=C$zuR=0):(C$zuM=C$zuB.popRenderData(C$zuD),C$zuz=C$zuM.ia),C$zuM.material=C$zuH)}function _renderNodes(C$zut,C$zue){var C$zui=C$zuL._getNodesByRowCol(C$zut,C$zue);if(C$zui&&0!=C$zui.count){var C$zur=C$zui.list;var C$zun=0,C$zua=0;for(_flush(),C$zuI.worldMatDirty++;C$zun<C$zui.count;){var C$zuo=C$zur[C$zua];C$zua++,C$zuo&&(_visitUserNode(C$zuo.node),C$zun!==C$zua&&((C$zur[C$zun]=C$zuo)._index=C$zun),C$zun++)}C$zur.length=C$zun,C$zuI.worldMatDirty--,C$zuB.pushNodesList(C$zuM,C$zur),C$zuI._flush(),C$zuI.node=C$zuL.node}}C$zua=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=TmxAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(TmxAssembler);function TmxAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=TmxAssembler.prototype;return C$zui.updateRenderData=function(C$zut){C$zut._renderDataList||(C$zut._buffer=new cc.TiledMapBuffer(C$zuo._handle,C$zus),C$zut._renderDataList=new cc.TiledMapRenderDataList)},C$zui.fillBuffers=function(C$zut,C$zue){if(0!==C$zut._vertices.length){C$zut._updateCulling();var C$zuh=C$zut.node;if(C$zuU=C$zut._leftDownToCenterX,C$zuW=C$zut._leftDownToCenterY,C$zuy=C$zuh._worldMatrix,C$zuI=C$zue,C$zuB=(C$zuL=C$zut)._renderDataList,C$zuD=C$zut._buffer,C$zut._isCullingDirty()||C$zut._isUserNodeDirty()||C$zut._hasAnimation()||C$zut._hasTiledNode()){var C$zui,C$zur;C$zuD.reset();var C$zun=((C$zur=C$zut._enableCulling?(C$zui=(C$zun=C$zut._cullingRect).leftDown,C$zun.rightTop):(C$zui=C$zuv,C$zut._rightTop)).row-C$zui.row+1)*(C$zur.col-C$zui.col+1);switch(C$zuN<C$zun&&(C$zun=C$zuN),C$zuD.request(4*C$zun,6*C$zun),C$zut._renderOrder){case C$zuf.RightDown:this.traverseGrids(C$zui,C$zur,-1,1);break;case C$zuf.LeftDown:this.traverseGrids(C$zui,C$zur,-1,-1);break;case C$zuf.RightUp:this.traverseGrids(C$zui,C$zur,1,1);break;case C$zuf.LeftUp:this.traverseGrids(C$zui,C$zur,1,-1)}C$zut._setCullingDirty(!1),C$zut._setUserNodeDirty(!1)}else{var C$zua;var C$zuo;var C$zus;for(var C$zuc=0;C$zuc<C$zuB._offset;C$zuc++){if(0<(C$zuo=(C$zua=C$zuB._dataList[C$zuc]).nodesRenderList).length){C$zue.worldMatDirty++;for(var C$zul=0;C$zul<C$zuo.length;C$zul++)if(C$zus=C$zuo[C$zul])for(var C$zuu=0;C$zuu<C$zus.length;C$zuu++){var C$zu_=C$zus[C$zuu];C$zu_&&_visitUserNode(C$zu_.node)}C$zue.worldMatDirty--,C$zue._flush()}0<C$zua.ia._count&&(C$zue.material=C$zua.material,C$zue.node=C$zuh,C$zue._flushIA(C$zua.ia))}}C$zuj=C$zuV=C$zuL=C$zuH=C$zuD=C$zuB=C$zuI=C$zuy=C$zuz=C$zuM=null}},C$zui.traverseGrids=function(C$zut,C$zue,C$zuh,C$zuu){if(C$zuB.reset(),!(C$zue.row<0||C$zue.col<0)){C$zuM=C$zuB.popRenderData(C$zuD),C$zuz=C$zuM.ia,C$zuV=C$zuD._vData,C$zuj=C$zuD._uintVData,C$zuR=C$zuG=0,C$zuH=null;var C$zu_=C$zuL.node._color._val;var C$zud=C$zuL._tiledTiles;var C$zuf=C$zuL._texGrids;var C$zup=C$zuL._tiles;var C$zum=C$zuL._texIdToMatIndex;var C$zuv=C$zuL._materials;var C$zuy=C$zuL._vertices;var C$zui,C$zur,C$zug,C$zun,C$zub,C$zua,C$zuC;var C$zuo,C$zux;var C$zus,C$zuA=-1;var C$zuS,C$zuT;for(C$zub=-1==C$zuh?(C$zun=C$zue.row,C$zut.row):(C$zun=C$zut.row,C$zue.row);0<=(C$zub-C$zun)*C$zuh;C$zun+=C$zuh)for(C$zui=C$zuy[C$zun],C$zuT=0==(C$zuS=C$zuL._getNodesCountByRow(C$zun))&&null!=C$zui,C$zug=1==C$zuu?(C$zur=C$zuT&&C$zut.col<C$zui.minCol?C$zui.minCol:C$zut.col,C$zuT&&C$zue.col>C$zui.maxCol?C$zui.maxCol:C$zue.col):(C$zur=C$zuT&&C$zue.col>C$zui.maxCol?C$zui.maxCol:C$zue.col,C$zuT&&C$zut.col<C$zui.minCol?C$zui.minCol:C$zut.col);0<=(C$zug-C$zur)*C$zuu;C$zur+=C$zuu)(C$zuc=C$zui&&C$zui[C$zur])?(C$zua=C$zuf[((C$zuC=C$zup[C$zuc.index])&C$zuF)>>>0])&&(C$zuA!==C$zua.texId&&(-1!==C$zuA&&_flush(),C$zus=C$zum[C$zuA=C$zua.texId],C$zuH=C$zuv[C$zus],C$zuM.material=C$zuH),C$zuH&&(C$zus=C$zuc.left-C$zuU,C$zuo=C$zuc.bottom-C$zuW,C$zux=C$zus+(C$zul=C$zua.tileset._tileSize).width,C$zul=C$zuo+C$zul.height,(C$zuc=C$zud[C$zuc.index])?this.fillByTiledNode(C$zuc.node,C$zuV,C$zuj,C$zus,C$zux,C$zul,C$zuo):(C$zuV[C$zuR]=C$zus,C$zuV[C$zuR+1]=C$zul,C$zuj[C$zuR+4]=C$zu_,C$zuV[C$zuR+5]=C$zus,C$zuV[C$zuR+6]=C$zuo,C$zuj[C$zuR+9]=C$zu_,C$zuV[C$zuR+10]=C$zux,C$zuV[C$zuR+11]=C$zul,C$zuj[C$zuR+14]=C$zu_,C$zuV[C$zuR+15]=C$zux,C$zuV[C$zuR+16]=C$zuo,C$zuj[C$zuR+19]=C$zu_),C$zuc=C$zua,C$zul=C$zuC,C$zuw.x=C$zuc.l,C$zuw.y=C$zuc.t,C$zuE.x=C$zuc.r,C$zuE.y=C$zuc.t,C$zuP.x=C$zuc.l,C$zuP.y=C$zuc.b,C$zuk.x=C$zuc.r,C$zuk.y=C$zuc.b,C$zuc=null,(C$zul&C$zuO.DIAGONAL)>>>0&&(C$zuc=C$zuE,C$zuE=C$zuP,C$zuP=C$zuc),(C$zul&C$zuO.HORIZONTAL)>>>0&&(C$zuc=C$zuw,C$zuw=C$zuE,C$zuE=C$zuc,C$zuc=C$zuP,C$zuP=C$zuk,C$zuk=C$zuc),(C$zul&C$zuO.VERTICAL)>>>0&&(C$zuc=C$zuw,C$zuw=C$zuP,C$zuP=C$zuc,C$zuc=C$zuE,C$zuE=C$zuk,C$zuk=C$zuc),C$zuV[C$zuR+2]=C$zuw.x,C$zuV[C$zuR+3]=C$zuw.y,C$zuV[C$zuR+7]=C$zuP.x,C$zuV[C$zuR+8]=C$zuP.y,C$zuV[C$zuR+12]=C$zuE.x,C$zuV[C$zuR+13]=C$zuE.y,C$zuV[C$zuR+17]=C$zuk.x,C$zuV[C$zuR+18]=C$zuk.y,C$zuR+=20,C$zuD.adjust(4,6),C$zuz._count+=6,C$zuG++,0<C$zuS&&_renderNodes(C$zun,C$zur),C$zuN<=C$zuG&&_flush())):0<C$zuS&&_renderNodes(C$zun,C$zur);var C$zuc,C$zul;C$zuD.uploadData(),0<C$zuz._count&&(C$zuI.material=C$zuM.material,C$zuI.node=C$zuL.node,C$zuI._flushIA(C$zuM.ia))}},C$zui.fillByTiledNode=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){C$zut._updateLocalMatrix(),C$zud.Mat4.copy(C$zup,C$zut._matrix),C$zud.Vec3.set(C$zum,-(C$zur+C$zuU),-(C$zuo+C$zuW),0),C$zud.Mat4.transform(C$zup,C$zup,C$zum);var C$zus=C$zup.m;var C$zuc=C$zus[0];var C$zul=C$zus[1];var C$zuh=C$zus[4];var C$zuu=C$zus[5];var C$zu_=C$zus[12];C$zus=C$zus[13];C$zut=C$zut._color._val;C$zue[C$zuR]=C$zur*C$zuc+C$zua*C$zuh+C$zu_,C$zue[C$zuR+1]=C$zur*C$zul+C$zua*C$zuu+C$zus,C$zui[C$zuR+4]=C$zut,C$zue[C$zuR+5]=C$zur*C$zuc+C$zuo*C$zuh+C$zu_,C$zue[C$zuR+6]=C$zur*C$zul+C$zuo*C$zuu+C$zus,C$zui[C$zuR+9]=C$zut,C$zue[C$zuR+10]=C$zun*C$zuc+C$zua*C$zuh+C$zu_,C$zue[C$zuR+11]=C$zun*C$zul+C$zua*C$zuu+C$zus,C$zui[C$zuR+14]=C$zut,C$zue[C$zuR+15]=C$zun*C$zuc+C$zuo*C$zuh+C$zu_,C$zue[C$zuR+16]=C$zun*C$zul+C$zuo*C$zuu+C$zus,C$zui[C$zuR+19]=C$zut},TmxAssembler}(C$zur.default);C$zui.default=C$zua,C$zur.default.register(C$zun,C$zua),C$zue.exports=C$zui.default},{"../core/renderer/":220,"../core/renderer/assembler":217,"../core/renderer/render-flow":221,"../core/renderer/webgl/vertex-format":252,"../core/value-types":279,"./CCTiledLayer":337,"./CCTiledMap":338}],346:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./video-player-impl");var C$zun=C$zur.EventType;var C$zua=cc.Enum({REMOTE:0,LOCAL:1});C$zut=cc.Class({name:"cc.VideoPlayer",extends:cc.Component,editor:!1,properties:{_resourceType:C$zua.REMOTE,resourceType:{tooltip:!1,type:C$zua,set:function(C$zut){this._resourceType=C$zut,this._updateVideoSource()},get:function(){return this._resourceType}},_remoteURL:"",remoteURL:{tooltip:!1,type:cc.String,set:function(C$zut){this._remoteURL=C$zut,this._updateVideoSource()},get:function(){return this._remoteURL}},_clip:{default:null,type:cc.Asset},clip:{tooltip:!1,get:function(){return this._clip},set:function(C$zut){this._clip=C$zut,this._updateVideoSource()},type:cc.Asset},currentTime:{tooltip:!1,type:cc.Float,set:function(C$zut){this._impl&&this._impl.seekTo(C$zut)},get:function(){return this._impl?this._currentStatus===C$zun.NONE||this._currentStatus===C$zun.STOPPED||this._currentStatus===C$zun.META_LOADED||this._currentStatus===C$zun.READY_TO_PLAY?0:this._currentStatus===C$zun.COMPLETED?this._impl.duration():this._impl.currentTime():-1}},_volume:1,volume:{get:function(){return this._volume},set:function(C$zut){this._volume=C$zut,this.isPlaying()&&!this._mute&&this._syncVolume()},range:[0,1],type:cc.Float,tooltip:!1},_mute:!1,mute:{get:function(){return this._mute},set:function(C$zut){this._mute=C$zut,this._syncVolume()},tooltip:!1},keepAspectRatio:{tooltip:!1,default:!0,type:cc.Boolean,notify:function(){this._impl&&this._impl.setKeepAspectRatioEnabled(this.keepAspectRatio)}},_isFullscreen:{default:!1,formerlySerializedAs:"_N$isFullscreen"},isFullscreen:{get:function(){return this._isFullscreen=this._impl&&this._impl.isFullScreenEnabled(),this._isFullscreen},set:function(C$zut){this._isFullscreen=C$zut,this._impl&&this._impl.setFullScreenEnabled(C$zut)},animatable:!1,tooltip:!1},_stayOnBottom:!1,stayOnBottom:{get:function(){return this._stayOnBottom},set:function(C$zut){this._stayOnBottom=C$zut,this._impl&&this._impl.setStayOnBottom(C$zut)},animatable:!1,tooltip:!1},videoPlayerEvent:{default:[],type:cc.Component.EventHandler}},statics:{EventType:C$zun,ResourceType:C$zua,Impl:C$zur},ctor:function(){this._impl=new C$zur,this._currentStatus=C$zun.NONE},_syncVolume:function(){var C$zut=this._impl;var C$zue;C$zut&&(C$zue=this._mute?0:this._volume,C$zut.setVolume(C$zue))},_updateVideoSource:function(){var C$zut="";this.resourceType===C$zua.REMOTE?C$zut=this.remoteURL:this._clip&&(C$zut=this._clip.nativeUrl||""),C$zut&&cc.loader.md5Pipe&&(C$zut=cc.loader.md5Pipe.transformURL(C$zut)),this._impl.setURL(C$zut,this._mute||0===this._volume),this._impl.setKeepAspectRatioEnabled(this.keepAspectRatio)},onLoad:function(){var C$zut=this._impl;C$zut&&(C$zut.createDomElementIfNeeded(this._mute||0===this._volume),C$zut.setStayOnBottom(this._stayOnBottom),this._updateVideoSource(),C$zut.seekTo(this.currentTime),C$zut.setFullScreenEnabled(this._isFullscreen),this.pause(),C$zut.setEventListener(C$zun.PLAYING,this.onPlaying.bind(this)),C$zut.setEventListener(C$zun.PAUSED,this.onPasued.bind(this)),C$zut.setEventListener(C$zun.STOPPED,this.onStopped.bind(this)),C$zut.setEventListener(C$zun.COMPLETED,this.onCompleted.bind(this)),C$zut.setEventListener(C$zun.META_LOADED,this.onMetaLoaded.bind(this)),C$zut.setEventListener(C$zun.CLICKED,this.onClicked.bind(this)),C$zut.setEventListener(C$zun.READY_TO_PLAY,this.onReadyToPlay.bind(this)))},onRestore:function(){this._impl||(this._impl=new C$zur)},onEnable:function(){this._impl&&this._impl.enable()},onDisable:function(){this._impl&&this._impl.disable()},onDestroy:function(){this._impl&&(this._impl.destroy(),this._impl=null)},update:function(C$zut){this._impl&&this._impl.updateMatrix(this.node)},onReadyToPlay:function(){this._currentStatus=C$zun.READY_TO_PLAY,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$zun.READY_TO_PLAY),this.node.emit("ready-to-play",this)},onMetaLoaded:function(){this._currentStatus=C$zun.META_LOADED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$zun.META_LOADED),this.node.emit("meta-loaded",this)},onClicked:function(){this._currentStatus=C$zun.CLICKED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$zun.CLICKED),this.node.emit("clicked",this)},onPlaying:function(){this._currentStatus=C$zun.PLAYING,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$zun.PLAYING),this.node.emit("playing",this)},onPasued:function(){this._currentStatus=C$zun.PAUSED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$zun.PAUSED),this.node.emit("paused",this)},onStopped:function(){this._currentStatus=C$zun.STOPPED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$zun.STOPPED),this.node.emit("stopped",this)},onCompleted:function(){this._currentStatus=C$zun.COMPLETED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$zun.COMPLETED),this.node.emit("completed",this)},play:function(){this._impl&&(this._syncVolume(),this._impl.play())},resume:function(){this._impl&&(this._syncVolume(),this._impl.resume())},pause:function(){this._impl&&this._impl.pause()},stop:function(){this._impl&&this._impl.stop()},getDuration:function(){return this._impl?this._impl.duration():-1},isPlaying:function(){return!!this._impl&&this._impl.isPlaying()}});cc.VideoPlayer=C$zue.exports=C$zut},{"./video-player-impl":347}],347:[function(C$zut,C$zue,C$zuo){"use strict";var C$zui=C$zut("../core/platform/utils");var C$zu_=C$zut("../core/platform/CCSys");var C$zur=C$zut("../core/platform/CCMacro");var C$zun=1,C$zua=4;var C$zud=cc.mat4();var C$zuf=cc.Class({name:"VideoPlayerImpl",ctor:function(){this._EventList={},this._video=null,this._url="",this._waitingFullscreen=!1,this._fullScreenEnabled=!1,this._stayOnBottom=!1,this._loadedmeta=!1,this._loaded=!1,this._visible=!1,this._playing=!1,this._ignorePause=!1,this._forceUpdate=!1,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this.__eventListeners={}},_bindEvent:function(){var C$zut=this._video,C$zue=this;var C$zui=this.__eventListeners;C$zui.loadedmetadata=function(){C$zue._loadedmeta=!0,C$zue._forceUpdate=!0,C$zue._waitingFullscreen&&(C$zue._waitingFullscreen=!1,C$zue._toggleFullscreen(!0)),C$zue._dispatchEvent(C$zuf.EventType.META_LOADED)},C$zui.ended=function(){C$zue._video===C$zut&&(C$zue._playing=!1,C$zue._dispatchEvent(C$zuf.EventType.COMPLETED))},C$zui.play=function(){C$zue._video===C$zut&&(C$zue._playing=!0,C$zue._updateVisibility(),C$zue._dispatchEvent(C$zuf.EventType.PLAYING))},C$zui.pause=function(){C$zue._video===C$zut&&(C$zue._playing=!1,C$zue._ignorePause||C$zue._dispatchEvent(C$zuf.EventType.PAUSED))},C$zui.click=function(){C$zue._dispatchEvent(C$zuf.EventType.CLICKED)},C$zut.addEventListener("loadedmetadata",C$zui.loadedmetadata),C$zut.addEventListener("ended",C$zui.ended),C$zut.addEventListener("play",C$zui.play),C$zut.addEventListener("pause",C$zui.pause),C$zut.addEventListener("click",C$zui.click),C$zui.onCanPlay=function(){var C$zut;C$zue._loaded||C$zue._playing||((C$zut=C$zue._video).readyState!==C$zua&&C$zut.readyState!==C$zun||(C$zut.currentTime=0,C$zue._loaded=!0,C$zue._forceUpdate=!0,C$zue._dispatchEvent(C$zuf.EventType.READY_TO_PLAY),C$zue._updateVisibility()))},C$zut.addEventListener("canplay",C$zui.onCanPlay),C$zut.addEventListener("canplaythrough",C$zui.onCanPlay),C$zut.addEventListener("suspend",C$zui.onCanPlay)},_updateVisibility:function(){var C$zut=this._video;C$zut&&(this._visible?C$zut.style.visibility="visible":(C$zut.style.visibility="hidden",C$zut.pause(),this._playing=!1))},_updateSize:function(C$zut,C$zue){var C$zui=this._video;C$zui&&(C$zui.style.width=C$zut+"px",C$zui.style.height=C$zue+"px")},_createDom:function(C$zut){var C$zue=document.createElement("video");C$zue.style.position="absolute",C$zue.style.bottom="0px",C$zue.style.left="0px",C$zue.style["z-index"]=this._stayOnBottom?C$zur.MIN_ZINDEX:0,C$zue.className="cocosVideo",C$zue.setAttribute("preload","auto"),C$zue.setAttribute("webkit-playsinline",""),C$zue.setAttribute("x5-playsinline",""),C$zue.setAttribute("playsinline",""),C$zut&&C$zue.setAttribute("muted",""),this._video=C$zue,cc.game.container.appendChild(C$zue)},createDomElementIfNeeded:function(C$zut){this._video||this._createDom(C$zut)},removeDom:function(){var C$zut=this._video;var C$zue;C$zut&&(C$zui.contains(cc.game.container,C$zut)&&cc.game.container.removeChild(C$zut),C$zue=this.__eventListeners,C$zut.removeEventListener("loadedmetadata",C$zue.loadedmetadata),C$zut.removeEventListener("ended",C$zue.ended),C$zut.removeEventListener("play",C$zue.play),C$zut.removeEventListener("pause",C$zue.pause),C$zut.removeEventListener("click",C$zue.click),C$zut.removeEventListener("canplay",C$zue.onCanPlay),C$zut.removeEventListener("canplaythrough",C$zue.onCanPlay),C$zut.removeEventListener("suspend",C$zue.onCanPlay),C$zue.loadedmetadata=null,C$zue.ended=null,C$zue.play=null,C$zue.pause=null,C$zue.click=null,C$zue.onCanPlay=null),this._video=null,this._url=""},setURL:function(C$zut,C$zue){var C$zui,C$zur;if(this._url!==C$zut){this.removeDom(),this._url=C$zut,this.createDomElementIfNeeded(C$zue),this._bindEvent();var C$zun=this._video;C$zun.style.visibility="hidden",this._loaded=!1,this._playing=!1,this._loadedmeta=!1,(C$zui=document.createElement("source")).src=C$zut,C$zun.appendChild(C$zui),C$zur=cc.path.extname(C$zut);var C$zua=C$zuf._polyfill;for(var C$zuo=0;C$zuo<C$zua.canPlayType.length;C$zuo++)C$zur!==C$zua.canPlayType[C$zuo]&&((C$zui=document.createElement("source")).src=C$zut.replace(C$zur,C$zua.canPlayType[C$zuo]),C$zun.appendChild(C$zui))}},getURL:function(){return this._url},play:function(){var C$zut=this._video;C$zut&&this._visible&&!this._playing&&(C$zuf._polyfill.autoplayAfterOperation?setTimeout(function(){C$zut.play()},20):C$zut.play())},pause:function(){var C$zut=this._video;this._playing&&C$zut&&C$zut.pause()},resume:function(){this.play()},stop:function(){var C$zut=this._video;C$zut&&this._visible&&(this._ignorePause=!0,C$zut.currentTime=0,C$zut.pause(),setTimeout(function(){this._dispatchEvent(C$zuf.EventType.STOPPED),this._ignorePause=!1}.bind(this),0))},setVolume:function(C$zut){var C$zue=this._video;C$zue&&(C$zue.volume=C$zut)},seekTo:function(C$zut){var C$zue=this._video;C$zue&&(this._loaded?C$zue.currentTime=C$zut:C$zue.addEventListener(C$zuf._polyfill.event,function cb(){C$zue.currentTime=C$zut,C$zue.removeEventListener(C$zuf._polyfill.event,cb)}),C$zuf._polyfill.autoplayAfterOperation&&this.isPlaying()&&setTimeout(function(){C$zue.play()},20))},isPlaying:function(){var C$zut=this._video;return C$zuf._polyfill.autoplayAfterOperation&&this._playing&&setTimeout(function(){C$zut.play()},20),this._playing},duration:function(){var C$zut=this._video;var C$zue=-1;return C$zut&&(C$zue=C$zut.duration)<=0&&cc.logID(7702),C$zue},currentTime:function(){var C$zut=this._video;return C$zut?C$zut.currentTime:-1},setKeepAspectRatioEnabled:function(){cc.logID(7700)},isKeepAspectRatioEnabled:function(){return!0},_toggleFullscreen:function(C$zut){var C$zui=this,C$zur=this._video;C$zur&&(C$zut?(C$zu_.browserType===C$zu_.BROWSER_TYPE_IE&&(C$zur.style.transform=""),cc.screen.requestFullScreen(C$zur,function(C$zut){var C$zue=C$zu_.browserType===C$zu_.BROWSER_TYPE_IE?document.msFullscreenElement:document.fullscreenElement;C$zui._fullScreenEnabled=C$zue===C$zur},function(C$zut){C$zui._fullScreenEnabled=!1})):cc.screen.fullScreen()&&cc.screen.exitFullScreen(C$zur))},setStayOnBottom:function(C$zut){this._stayOnBottom=C$zut,this._video&&(this._video.style["z-index"]=C$zut?C$zur.MIN_ZINDEX:0)},setFullScreenEnabled:function(C$zut){!this._loadedmeta&&C$zut?this._waitingFullscreen=!0:this._toggleFullscreen(C$zut)},isFullScreenEnabled:function(){return this._fullScreenEnabled},setEventListener:function(C$zut,C$zue){this._EventList[C$zut]=C$zue},removeEventListener:function(C$zut){this._EventList[C$zut]=null},_dispatchEvent:function(C$zut){C$zut=this._EventList[C$zut];C$zut&&C$zut.call(this,this,this._video.src)},onPlayEvent:function(){this._EventList[C$zuf.EventType.PLAYING].call(this,this,this._video.src)},enable:function(){var C$zut=C$zuf.elements;-1===C$zut.indexOf(this)&&C$zut.push(this),this.setVisible(!0)},disable:function(){var C$zut=C$zuf.elements;var C$zue=C$zut.indexOf(this);-1!==C$zue&&C$zut.splice(C$zue,1),this.setVisible(!1)},destroy:function(){this.disable(),this.removeDom()},setVisible:function(C$zut){this._visible!==C$zut&&(this._visible=!!C$zut,this._updateVisibility())},updateMatrix:function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuh,C$zuo,C$zuu,C$zus,C$zuc,C$zul;this._video&&this._visible&&!this._fullScreenEnabled&&(C$zut.getWorldMatrix(C$zud),(C$zue=cc.Camera._findRendererCamera(C$zut))&&C$zue.worldMatrixToScreen(C$zud,C$zud,cc.game.canvas.width,cc.game.canvas.height),C$zue=C$zud.m,!this._forceUpdate&&this._m00===C$zue[0]&&this._m01===C$zue[1]&&this._m04===C$zue[4]&&this._m05===C$zue[5]&&this._m12===C$zue[12]&&this._m13===C$zue[13]&&this._w===C$zut._contentSize.width&&this._h===C$zut._contentSize.height||(this._m00=C$zue[0],this._m01=C$zue[1],this._m04=C$zue[4],this._m05=C$zue[5],this._m12=C$zue[12],this._m13=C$zue[13],this._w=C$zut._contentSize.width,this._h=C$zut._contentSize.height,C$zur=C$zui=1/cc.view._devicePixelRatio,C$zus=cc.game.container,C$zun=C$zue[0]*C$zui,C$zua=C$zue[1],C$zuh=C$zue[4],C$zuo=C$zue[5]*C$zur,C$zuu=C$zus&&C$zus.style.paddingLeft?parseInt(C$zus.style.paddingLeft):0,C$zus=C$zus&&C$zus.style.paddingBottom?parseInt(C$zus.style.paddingBottom):0,C$zuf._polyfill.zoomInvalid?(this._updateSize(this._w*C$zun,this._h*C$zuo),C$zuo=C$zun=1,C$zuc=this._w*C$zui,C$zul=this._h*C$zur):(C$zuc=this._w*C$zui,C$zul=this._h*C$zur,this._updateSize(this._w,this._h)),C$zuc=C$zuc*C$zue[0]*C$zut._anchorPoint.x,C$zul=C$zul*C$zue[5]*C$zut._anchorPoint.y,C$zut="matrix("+C$zun+","+-C$zua+","+-C$zuh+","+C$zuo+","+(C$zue[12]*C$zui-C$zuc+C$zuu)+","+-(C$zue[13]*C$zur-C$zul+C$zus)+")",this._video.style.transform=C$zut,this._video.style["-webkit-transform"]=C$zut,this._video.style["transform-origin"]="0px 100% 0px",this._video.style["-webkit-transform-origin"]="0px 100% 0px",C$zu_.browserType!==C$zu_.BROWSER_TYPE_IE&&(this._forceUpdate=!1)))}});C$zuf.EventType={NONE:-1,PLAYING:0,PAUSED:1,STOPPED:2,COMPLETED:3,META_LOADED:4,CLICKED:5,READY_TO_PLAY:6},C$zuf.elements=[],C$zuf.pauseElements=[],cc.game.on(cc.game.EVENT_HIDE,function(){var C$zut=C$zuf.elements;for(var C$zue,C$zui=0;C$zui<C$zut.length;C$zui++)(C$zue=C$zut[C$zui]).isPlaying()&&(C$zue.pause(),C$zuf.pauseElements.push(C$zue))}),cc.game.on(cc.game.EVENT_SHOW,function(){var C$zut=C$zuf.pauseElements;var C$zue=C$zut.pop();for(;C$zue;)C$zue.play(),C$zue=C$zut.pop()}),C$zuf._polyfill={devicePixelRatio:!1,event:"canplay",canPlayType:[]};C$zut=document.createElement("video");C$zut.canPlayType&&(C$zut.canPlayType("video/ogg")&&(C$zuf._polyfill.canPlayType.push(".ogg"),C$zuf._polyfill.canPlayType.push(".ogv")),C$zut.canPlayType("video/mp4")&&C$zuf._polyfill.canPlayType.push(".mp4"),C$zut.canPlayType("video/webm")&&C$zuf._polyfill.canPlayType.push(".webm")),C$zu_.browserType===C$zu_.BROWSER_TYPE_FIREFOX&&(C$zuf._polyfill.autoplayAfterOperation=!0),C$zu_.OS_ANDROID!==C$zu_.os||C$zu_.browserType!==C$zu_.BROWSER_TYPE_SOUGOU&&C$zu_.browserType!==C$zu_.BROWSER_TYPE_360||(C$zuf._polyfill.zoomInvalid=!0);C$zut=document.createElement("style");C$zut.innerHTML=".cocosVideo:-moz-full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:-webkit-full-screen{transform:matrix(1,0,0,1,0,0) !important;}",document.head.appendChild(C$zut),C$zue.exports=C$zuf},{"../core/platform/CCMacro":194,"../core/platform/CCSys":198,"../core/platform/utils":213}],348:[function(C$zut,C$zue,C$zui){"use strict";C$zut=C$zut("./webview-impl");var C$zur=C$zut.EventType;function emptyCallback(){}var C$zun=cc.Class({name:"cc.WebView",extends:cc.Component,editor:!1,properties:{_useOriginalSize:!0,_url:"",url:{type:cc.String,tooltip:!1,get:function(){return this._url},set:function(C$zut){this._url=C$zut;var C$zue=this._impl;C$zue&&C$zue.loadURL(C$zut)}},webviewEvents:{default:[],type:cc.Component.EventHandler}},statics:{EventType:C$zur,Impl:C$zut},ctor:function(){this._impl=new C$zun.Impl},onRestore:function(){this._impl||(this._impl=new C$zun.Impl)},onEnable:function(){var C$zut=this._impl;C$zut.createDomElementIfNeeded(this.node.width,this.node.height),C$zut.setEventListener(C$zur.LOADED,this._onWebViewLoaded.bind(this)),C$zut.setEventListener(C$zur.LOADING,this._onWebViewLoading.bind(this)),C$zut.setEventListener(C$zur.ERROR,this._onWebViewLoadError.bind(this)),C$zut.loadURL(this._url),C$zut.setVisible(!0)},onDisable:function(){var C$zut=this._impl;C$zut.setVisible(!1),C$zut.setEventListener(C$zur.LOADED,emptyCallback),C$zut.setEventListener(C$zur.LOADING,emptyCallback),C$zut.setEventListener(C$zur.ERROR,emptyCallback)},onDestroy:function(){this._impl&&(this._impl.destroy(),this._impl=null)},update:function(C$zut){this._impl&&this._impl.updateMatrix(this.node)},_onWebViewLoaded:function(){cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$zur.LOADED),this.node.emit("loaded",this)},_onWebViewLoading:function(){return cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$zur.LOADING),this.node.emit("loading",this),!0},_onWebViewLoadError:function(){cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$zur.ERROR),this.node.emit("error",this)},setJavascriptInterfaceScheme:function(C$zut){this._impl&&this._impl.setJavascriptInterfaceScheme(C$zut)},setOnJSCallback:function(C$zut){this._impl&&this._impl.setOnJSCallback(C$zut)},evaluateJS:function(C$zut){this._impl&&this._impl.evaluateJS(C$zut)}});cc.WebView=C$zue.exports=C$zun},{"./webview-impl":349}],349:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("../core/platform/utils");C$zut=C$zut("../core/platform/CCSys");var C$zu_=cc.mat4();var C$zun=cc.Class({name:"WebViewImpl",ctor:function(){this._EventList={},this._visible=!1,this._parent=null,this._div=null,this._iframe=null,this._listener=null,this._forceUpdate=!1,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this.__eventListeners={}},_updateVisibility:function(){var C$zut;this._div&&(C$zut=this._div,this._visible?C$zut.style.visibility="visible":C$zut.style.visibility="hidden")},_updateSize:function(C$zut,C$zue){var C$zui=this._div;C$zui&&(C$zui.style.width=C$zut+"px",C$zui.style.height=C$zue+"px")},_initEvent:function(){var C$zut=this._iframe;var C$zue,C$zui;C$zut&&(C$zue=this.__eventListeners,C$zui=this,C$zue.load=function(){C$zui._forceUpdate=!0,C$zui._dispatchEvent(C$zun.EventType.LOADED)},C$zue.error=function(){C$zui._dispatchEvent(C$zun.EventType.ERROR)},C$zut.addEventListener("load",C$zue.load),C$zut.addEventListener("error",C$zue.error))},_initStyle:function(){var C$zut;this._div&&((C$zut=this._div).style.position="absolute",C$zut.style.bottom="0px",C$zut.style.left="0px")},_setOpacity:function(C$zut){var C$zue=this._iframe;C$zue&&C$zue.style&&(C$zue.style.opacity=C$zut/255)},_createDom:function(C$zut,C$zue){C$zun._polyfill.enableDiv?(this._div=document.createElement("div"),this._div.style["-webkit-overflow"]="auto",this._div.style["-webkit-overflow-scrolling"]="touch",this._iframe=document.createElement("iframe"),this._div.appendChild(this._iframe),this._iframe.style.width="100%",this._iframe.style.height="100%"):this._div=this._iframe=document.createElement("iframe"),C$zun._polyfill.enableBG&&(this._div.style.background="#FFF"),this._div.style.background="#FFF",this._div.style.height=C$zue+"px",this._div.style.width=C$zut+"px",this._div.style.overflow="scroll",this._iframe.style.border="none",cc.game.container.appendChild(this._div),this._updateVisibility()},_createNativeControl:function(C$zut,C$zue){this._createDom(C$zut,C$zue),this._initStyle(),this._initEvent()},createDomElementIfNeeded:function(C$zut,C$zue){this._div?this._updateSize(C$zut,C$zue):this._createNativeControl(C$zut,C$zue)},removeDom:function(){var C$zut=this._div;C$zut&&(C$zur.contains(cc.game.container,C$zut)&&cc.game.container.removeChild(C$zut),this._div=null);C$zut=this._iframe;var C$zue;C$zut&&(C$zue=this.__eventListeners,C$zut.removeEventListener("load",C$zue.load),C$zut.removeEventListener("error",C$zue.error),C$zue.load=null,C$zue.error=null,this._iframe=null)},setOnJSCallback:function(C$zut){},setJavascriptInterfaceScheme:function(C$zut){},loadData:function(C$zut,C$zue,C$zui,C$zur){},loadHTMLString:function(C$zut,C$zue){},loadURL:function(C$zut){var C$zue=this._iframe;var C$zui;C$zue&&(C$zue.src=C$zut,C$zui=this,C$zue.addEventListener("load",function cb(){C$zui._loaded=!0,C$zui._updateVisibility(),C$zue.removeEventListener("load",cb)}),this._dispatchEvent(C$zun.EventType.LOADING))},stopLoading:function(){cc.logID(7800)},reload:function(){var C$zut=this._iframe;!C$zut||(C$zut=C$zut.contentWindow)&&C$zut.location&&C$zut.location.reload()},canGoBack:function(){return cc.logID(7801),!0},canGoForward:function(){return cc.logID(7802),!0},goBack:function(){try{if(C$zun._polyfill.closeHistory)return cc.logID(7803);var C$zut=this._iframe;var C$zue;!C$zut||(C$zue=C$zut.contentWindow)&&C$zue.location&&C$zue.history.back.call(C$zue)}catch(C$zut){cc.log(C$zut)}},goForward:function(){try{if(C$zun._polyfill.closeHistory)return cc.logID(7804);var C$zut=this._iframe;var C$zue;!C$zut||(C$zue=C$zut.contentWindow)&&C$zue.location&&C$zue.history.forward.call(C$zue)}catch(C$zut){cc.log(C$zut)}},evaluateJS:function(C$zut){var C$zue=this._iframe;if(C$zue){C$zue=C$zue.contentWindow;try{C$zue.eval(C$zut),this._dispatchEvent(C$zun.EventType.JS_EVALUATED)}catch(C$zut){console.error(C$zut)}}},setScalesPageToFit:function(){cc.logID(7805)},setEventListener:function(C$zut,C$zue){this._EventList[C$zut]=C$zue},removeEventListener:function(C$zut){this._EventList[C$zut]=null},_dispatchEvent:function(C$zut){C$zut=this._EventList[C$zut];C$zut&&C$zut.call(this,this,this._iframe.src)},_createRenderCmd:function(){return new C$zun.RenderCmd(this)},destroy:function(){this.removeDom()},setVisible:function(C$zut){this._visible!==C$zut&&(this._visible=!!C$zut,this._updateVisibility())},updateMatrix:function(C$zut){var C$zue,C$zui,C$zur,C$zun,C$zua,C$zuh,C$zuu,C$zuo,C$zus,C$zuc,C$zul;this._div&&this._visible&&(C$zut.getWorldMatrix(C$zu_),(C$zue=cc.Camera._findRendererCamera(C$zut))&&C$zue.worldMatrixToScreen(C$zu_,C$zu_,cc.game.canvas.width,cc.game.canvas.height),C$zue=C$zu_.m,!this._forceUpdate&&this._m00===C$zue[0]&&this._m01===C$zue[1]&&this._m04===C$zue[4]&&this._m05===C$zue[5]&&this._m12===C$zue[12]&&this._m13===C$zue[13]&&this._w===C$zut._contentSize.width&&this._h===C$zut._contentSize.height||(this._m00=C$zue[0],this._m01=C$zue[1],this._m04=C$zue[4],this._m05=C$zue[5],this._m12=C$zue[12],this._m13=C$zue[13],this._w=C$zut._contentSize.width,this._h=C$zut._contentSize.height,C$zur=C$zui=1/cc.view._devicePixelRatio,C$zuo=cc.game.container,C$zul=C$zue[0]*C$zui,C$zun=C$zue[1],C$zua=C$zue[4],C$zuh=C$zue[5]*C$zur,C$zuu=C$zuo&&C$zuo.style.paddingLeft?parseInt(C$zuo.style.paddingLeft):0,C$zuo=C$zuo&&C$zuo.style.paddingBottom?parseInt(C$zuo.style.paddingBottom):0,this._updateSize(this._w,this._h),C$zus=this._w*C$zui,C$zuc=this._h*C$zur,C$zus=C$zus*C$zue[0]*C$zut._anchorPoint.x,C$zuc=C$zuc*C$zue[5]*C$zut._anchorPoint.y,C$zul="matrix("+C$zul+","+-C$zun+","+-C$zua+","+C$zuh+","+(C$zue[12]*C$zui-C$zus+C$zuu)+","+-(C$zue[13]*C$zur-C$zuc+C$zuo)+")",this._div.style.transform=C$zul,this._div.style["-webkit-transform"]=C$zul,this._div.style["transform-origin"]="0px 100% 0px",this._div.style["-webkit-transform-origin"]="0px 100% 0px",this._setOpacity(C$zut.opacity),this._forceUpdate=!1))}});C$zun.EventType={LOADING:0,LOADED:1,ERROR:2,JS_EVALUATED:3};var C$zua=C$zun._polyfill={devicePixelRatio:!1,enableDiv:!1};C$zut.os===C$zut.OS_IOS&&(C$zua.enableDiv=!0),C$zut.isMobile?C$zut.browserType===C$zut.BROWSER_TYPE_FIREFOX&&(C$zua.enableBG=!0):C$zut.browserType===C$zut.BROWSER_TYPE_IE&&(C$zua.closeHistory=!0),C$zue.exports=C$zun},{"../core/platform/CCSys":198,"../core/platform/utils":213}],350:[function(C$zut,C$zue,C$zui){"use strict";C$zut("./cocos2d/core"),C$zut("./cocos2d/animation"),C$zut("./cocos2d/particle"),C$zut("./cocos2d/tilemap"),C$zut("./cocos2d/videoplayer/CCVideoPlayer"),C$zut("./cocos2d/webview/CCWebView"),C$zut("./cocos2d/core/components/CCStudioComponent"),C$zut("./extensions/ccpool/CCNodePool"),C$zut("./cocos2d/actions"),C$zut("./extensions/spine"),C$zut("./extensions/dragonbones"),C$zut("./cocos2d/deprecated")},{"./cocos2d/actions":8,"./cocos2d/animation":17,"./cocos2d/core":135,"./cocos2d/core/components/CCStudioComponent":95,"./cocos2d/deprecated":291,"./cocos2d/particle":297,"./cocos2d/particle/CCParticleAsset":294,"./cocos2d/tilemap":343,"./cocos2d/tilemap/CCTiledMapAsset":339,"./cocos2d/videoplayer/CCVideoPlayer":346,"./cocos2d/webview/CCWebView":348,"./extensions/ccpool/CCNodePool":351,"./extensions/dragonbones":void 0,"./extensions/spine":354}],351:[function(C$zut,C$zue,C$zui){"use strict";cc.NodePool=function(C$zut){this.poolHandlerComp=C$zut,this._pool=[]},cc.NodePool.prototype={constructor:cc.NodePool,size:function(){return this._pool.length},clear:function(){var C$zut=this._pool.length;for(var C$zue=0;C$zue<C$zut;++C$zue)this._pool[C$zue].destroy();this._pool.length=0},put:function(C$zut){var C$zue;C$zut&&-1===this._pool.indexOf(C$zut)&&(C$zut.removeFromParent(!1),(C$zue=this.poolHandlerComp?C$zut.getComponent(this.poolHandlerComp):null)&&C$zue.unuse&&C$zue.unuse(),this._pool.push(C$zut))},get:function(){var C$zut=this._pool.length-1;if(C$zut<0)return null;var C$zue=this._pool[C$zut];this._pool.length=C$zut;C$zut=this.poolHandlerComp?C$zue.getComponent(this.poolHandlerComp):null;return C$zut&&C$zut.reuse&&C$zut.reuse.apply(C$zut,arguments),C$zue}},C$zue.exports=cc.NodePool},{}],352:[function(C$zut,C$zue,C$zur){"use strict";var C$zud=(C$zui=C$zut("../../cocos2d/core/value-types/mat4"))&&C$zui.__esModule?C$zui:{default:C$zui};var C$zuf=C$zut("../../cocos2d/core/renderer/render-flow").FLAG_TRANSFORM;function C$zulp2(){}var C$zuc="ATTACHED_NODE_TREE";var C$zul="ATTACHED_NODE:";function C$zuOp2(C$zut){Object.defineProperty(C$zut,"_worldMatDirty",{get:function(){return!0},set:function(C$zut){}}),C$zut._calculWorldMatrix=C$zulp2,C$zut._mulMat=C$zulp2}var C$zup=new C$zud.default;var C$zui=cc.Class({name:"sp.AttachUtil",ctor:function(){this._inited=!1,this._skeleton=null,this._skeletonNode=null,this._skeletonComp=null,this._attachedRootNode=null,this._attachedNodeArray=[],this._boneIndexToNode={}},init:function(C$zut){this._inited=!0,this._skeleton=C$zut._skeleton,this._skeletonNode=C$zut.node,this._skeletonComp=C$zut},reset:function(){this._inited=!1,this._skeleton=null,this._skeletonNode=null,this._skeletonComp=null},_prepareAttachNode:function(){var C$zut;if(this._skeleton)return C$zut=this._skeletonNode.getChildByName(C$zuc),C$zut&&C$zut.isValid||(C$zut=new cc.Node(C$zuc),C$zuOp2(C$zut),this._skeletonNode.addChild(C$zut)),this._skeletonComp.isAnimationCached()&&this._skeletonComp._frameCache&&this._skeletonComp._frameCache.enableCacheAttachedInfo(),this._attachedRootNode=C$zut},_buildBoneAttachedNode:function(C$zut,C$zue){var C$zui=C$zul+C$zut.data.name;C$zui=new cc.Node(C$zui);return this._buildBoneRelation(C$zui,C$zut,C$zue),C$zui},_buildBoneRelation:function(C$zut,C$zue,C$zui){C$zuOp2(C$zut),C$zut._bone=C$zue,C$zut._boneIndex=C$zui,this._attachedNodeArray.push(C$zut),this._boneIndexToNode[C$zui]=C$zut},getAttachedRootNode:function(){return this._attachedRootNode},getAttachedNodes:function(C$zut){var C$zue=this._attachedNodeArray;var C$zui=[];if(!this._inited)return C$zui;for(var C$zur=0,C$zun=C$zue.length;C$zur<C$zun;C$zur++){var C$zua=C$zue[C$zur];C$zua&&C$zua.isValid&&C$zua.name===C$zul+C$zut&&C$zui.push(C$zua)}return C$zui},_rebuildNodeArray:function(){var C$zut=this._boneIndexToNode={};var C$zue=this._attachedNodeArray;var C$zui=this._attachedNodeArray=[];for(var C$zur=0,C$zun=C$zue.length;C$zur<C$zun;C$zur++){var C$zua=C$zue[C$zur];C$zua&&C$zua.isValid&&!C$zua._toRemove&&(C$zui.push(C$zua),C$zut[C$zua._boneIndex]=C$zua)}},_sortNodeArray:function(){this._attachedNodeArray.sort(function(C$zut,C$zue){return C$zut._boneIndex<C$zue._boneIndex?-1:1})},_getNodeByBoneIndex:function(C$zut){C$zut=this._boneIndexToNode[C$zut];return C$zut&&C$zut.isValid?C$zut:null},destroyAttachedNodes:function(C$zut){if(this._inited){var C$zue=this._attachedNodeArray;var C$zui=function markTree(C$zut){var C$zue=C$zut.children;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];C$zun&&markTree(C$zun)}C$zut._toRemove=!0};for(var C$zur=0,C$zun=C$zue.length;C$zur<C$zun;C$zur++){var C$zua=C$zue[C$zur];C$zua&&C$zua.isValid&&C$zua.name.split(C$zul)[1]===C$zut&&(C$zui(C$zua),C$zua.removeFromParent(!0),C$zua.destroy(),C$zue[C$zur]=null)}this._rebuildNodeArray()}},generateAttachedNodes:function(C$zut){var C$zue=[];if(!this._inited)return C$zue;var C$zur=this._prepareAttachNode();if(!C$zur)return C$zue;var C$zui=[];var C$zun=this._skeleton.bones;for(var C$zua=0,C$zuo=C$zun.length;C$zua<C$zuo;C$zua++){var C$zus=C$zun[C$zua];C$zus.data.name==C$zut&&C$zui.push(C$zus)}var C$zuc=function(C$zut){if(C$zut){var C$zue=C$zut.data;var C$zui=this._getNodeByBoneIndex(C$zue.index);if(C$zui)return C$zui;C$zui=this._buildBoneAttachedNode(C$zut,C$zue.index);C$zue=C$zuc(C$zut.parent)||C$zur;return C$zui.parent=C$zue,C$zui}}.bind(this);for(var C$zul=0,C$zuh=C$zui.length;C$zul<C$zuh;C$zul++){var C$zuu=C$zuc(C$zui[C$zul]);C$zue.push(C$zuu)}return this._sortNodeArray(),C$zue},destroyAllAttachedNodes:function(){var C$zut;this._attachedRootNode=null,this._attachedNodeArray.length=0,this._boneIndexToNode={},!this._inited||(C$zut=this._skeletonNode.getChildByName(C$zuc))&&(C$zut.removeFromParent(!0),C$zut.destroy())},generateAllAttachedNodes:function(){if(this._inited){this._boneIndexToNode={},this._attachedNodeArray.length=0;var C$zut=this._prepareAttachNode();if(C$zut){var C$zue=this._skeleton.bones;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];var C$zua=C$zun.data;var C$zuo=null;var C$zus;(C$zuo=C$zun.parent?(C$zus=C$zun.parent.data.index,this._boneIndexToNode[C$zus]):C$zut)&&((C$zus=C$zuo.getChildByName(C$zul+C$zua.name))&&C$zus.isValid?this._buildBoneRelation(C$zus,C$zun,C$zua.index):(C$zus=this._buildBoneAttachedNode(C$zun,C$zua.index),C$zuo.addChild(C$zus)))}return C$zut}}},_hasAttachedNode:function(){return!!this._inited&&!!this._skeletonNode.getChildByName(C$zuc)},_associateAttachedNode:function(){if(this._inited){var C$zut=this._skeletonNode.getChildByName(C$zuc);if(C$zut&&C$zut.isValid){this._attachedRootNode=C$zut,this._boneIndexToNode={},this._attachedNodeArray.length=0,C$zuOp2(C$zut),this._skeletonComp.isAnimationCached()&&this._skeletonComp._frameCache&&this._skeletonComp._frameCache.enableCacheAttachedInfo();var C$zue=this._skeleton.bones;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];var C$zua=C$zun.data;var C$zuo=null;var C$zus;!(C$zuo=C$zun.parent?(C$zus=C$zun.parent.data.index,this._boneIndexToNode[C$zus]):C$zut)||(C$zus=C$zuo.getChildByName(C$zul+C$zua.name))&&C$zus.isValid&&this._buildBoneRelation(C$zus,C$zun,C$zua.index)}}}},_syncAttachedNode:function(){if(this._inited){var C$zut=this._attachedRootNode;var C$zue=this._attachedNodeArray;if(!C$zut||!C$zut.isValid)return this._attachedRootNode=null,void(C$zue.length=0);var C$zuh=this._skeletonNode._worldMatrix;C$zud.default.copy(C$zut._worldMatrix,C$zuh),C$zut._renderFlag&=~C$zuf;var C$zui;if(C$zui=this._skeletonComp.isAnimationCached()?this._skeletonComp._curFrame&&this._skeletonComp._curFrame.boneInfos:this._skeleton.bones){var C$zuu=this._skeletonNode._mulMat;var C$zur=!1;for(var C$zun=0,C$zu_=C$zue.length;C$zun<C$zu_;C$zun++){var C$zua=C$zue[C$zun];C$zua&&C$zua.isValid?(C$zuc=C$zui[C$zua._boneIndex])?(C$zuo=C$zua._worldMatrix,C$zus=C$zut._worldMatrix,C$zuc=C$zuc,C$zul=void 0,(C$zul=C$zup.m)[0]=C$zuc.a,C$zul[1]=C$zuc.c,C$zul[4]=C$zuc.b,C$zul[5]=C$zuc.d,C$zul[12]=C$zuc.worldX,C$zul[13]=C$zuc.worldY,C$zuu(C$zuo,C$zus,C$zup),C$zua._renderFlag&=~C$zuf):(C$zua.removeFromParent(!0),C$zua.destroy(),C$zur=!(C$zue[C$zun]=null)):C$zur=!(C$zue[C$zun]=null)}var C$zuo,C$zus,C$zuc,C$zul;C$zur&&this._rebuildNodeArray()}}}});C$zue.exports=sp.AttachUtil=C$zui},{"../../cocos2d/core/renderer/render-flow":221,"../../cocos2d/core/value-types/mat4":281}],353:[function(C$zut,C$zue,C$zuh){"use strict";var C$zur=C$zut("./track-entry-listeners");var C$zui=C$zut("../../cocos2d/core/components/CCRenderComponent");var C$zun=C$zut("./lib/spine");var C$zua=C$zut("../../cocos2d/core/graphics/graphics");var C$zuo=C$zut("../../cocos2d/core/renderer/render-flow").FLAG_POST_RENDER;var C$zus=C$zut("./skeleton-cache");var C$zuc=C$zut("./AttachUtil");C$zut=cc.Enum({default:-1});var C$zuu=cc.Enum({"<None>":0});var C$zul=cc.Enum({REALTIME:0,SHARED_CACHE:1,PRIVATE_CACHE:2});sp.Skeleton=cc.Class({name:"sp.Skeleton",extends:C$zui,editor:!1,statics:{AnimationCacheMode:C$zul},properties:{paused:{default:!1,visible:!1},skeletonData:{default:null,type:sp.SkeletonData,notify:function(){this.defaultSkin="",this.defaultAnimation="",this._updateSkeletonData()},tooltip:!1},defaultSkin:{default:"",visible:!1},defaultAnimation:{default:"",visible:!1},animation:{get:function(){if(this.isAnimationCached())return this._animationName;var C$zut=this.getCurrent(0);return C$zut&&C$zut.animation.name||""},set:function(C$zut){(this.defaultAnimation=C$zut)?this.setAnimation(0,C$zut,this.loop):this.isAnimationCached()||(this.clearTrack(0),this.setToSetupPose())},visible:!1},_defaultSkinIndex:{get:function(){if(this.skeletonData){var C$zut=this.skeletonData.getSkinsEnum();if(C$zut)if(""===this.defaultSkin){if(C$zut.hasOwnProperty(0))return this._defaultSkinIndex=0}else{C$zut=C$zut[this.defaultSkin];if(void 0!==C$zut)return C$zut}}return 0},set:function(C$zut){if(!(C$zue=this.skeletonData?this.skeletonData.getSkinsEnum():C$zue))return cc.errorID("",this.name);var C$zue=C$zue[C$zut];void 0!==C$zue?(this.defaultSkin=C$zue,this.setSkin(this.defaultSkin)):cc.errorID(7501,this.name)},type:C$zut,visible:!0,displayName:"Default Skin",tooltip:!1},_animationIndex:{get:function(){var C$zut=this.animation;if(this.skeletonData&&C$zut){var C$zue=this.skeletonData.getAnimsEnum();if(C$zue){C$zue=C$zue[C$zut];if(void 0!==C$zue)return C$zue}}return 0},set:function(C$zut){if(0!==C$zut){if(!(C$zue=this.skeletonData?this.skeletonData.getAnimsEnum():C$zue))return cc.errorID(7502,this.name);var C$zue=C$zue[C$zut];void 0!==C$zue?this.animation=C$zue:cc.errorID(7503,this.name)}else this.animation=""},type:C$zuu,visible:!0,displayName:"Animation",tooltip:!1},_preCacheMode:-1,_cacheMode:C$zul.REALTIME,_defaultCacheMode:{default:0,type:C$zul,notify:function(){this.setAnimationCacheMode(this._defaultCacheMode)},editorOnly:!0,visible:!0,animatable:!1,displayName:"Animation Cache Mode",tooltip:!1},loop:{default:!0,tooltip:!1},premultipliedAlpha:{default:!0,tooltip:!1},timeScale:{default:1,tooltip:!1},debugSlots:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},debugBones:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},debugMesh:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},useTint:{default:!1,tooltip:!1,notify:function(){this._updateUseTint()}},enableBatch:{default:!1,notify:function(){this._updateBatch()},tooltip:!1},_accTime:0,_playCount:0,_frameCache:null,_curFrame:null,_skeletonCache:null,_animationName:"",_animationQueue:[],_headAniInfo:null,_playTimes:0,_isAniComplete:!0},ctor:function(){this._effectDelegate=null,this._skeleton=null,this._rootBone=null,this._listener=null,this._materialCache={},this._debugRenderer=null,this._startSlotIndex=-1,this._endSlotIndex=-1,this._startEntry={animation:{name:""},trackIndex:0},this._endEntry={animation:{name:""},trackIndex:0},this.attachUtil=new C$zuc},_getDefaultMaterial:function(){return cc.Material.getBuiltinMaterial("2d-spine")},_updateMaterial:function(){var C$zut=this.useTint||this.isAnimationCached()&&!0;var C$zue=this.getMaterial(0);C$zue&&(C$zue.define("USE_TINT",C$zut),C$zue.define("CC_USE_MODEL",!this.enableBatch)),this._materialCache={}},disableRender:function(){this._super(),this.node._renderFlag&=~C$zuo},markForRender:function(C$zut){this._super(C$zut),C$zut?this.node._renderFlag|=C$zuo:this.node._renderFlag&=~C$zuo},_updateUseTint:function(){var C$zut=this.getMaterial(0);var C$zue;C$zut&&(C$zue=this.useTint||this.isAnimationCached()&&!0,C$zut.define("USE_TINT",C$zue)),this._materialCache={}},_updateBatch:function(){var C$zut=this.getMaterial(0);C$zut&&C$zut.define("CC_USE_MODEL",!this.enableBatch),this._materialCache={}},_validateRender:function(){var C$zut=this.skeletonData;C$zut&&C$zut.isTexturesLoaded()?this._super():this.disableRender()},setSkeletonData:function(C$zut){var C$zue;null!=C$zut.width&&null!=C$zut.height&&this.node.setContentSize(C$zut.width,C$zut.height),this._cacheMode===C$zul.SHARED_CACHE?this._skeletonCache=C$zus.sharedCache:this._cacheMode===C$zul.PRIVATE_CACHE&&(this._skeletonCache=new C$zus,this._skeletonCache.enablePrivateMode()),this.isAnimationCached()?((this.debugBones||this.debugSlots)&&cc.warn("Debug bones or slots is invalid in cached mode"),C$zue=this._skeletonCache.getSkeletonCache(this.skeletonData._uuid,C$zut),this._skeleton=C$zue.skeleton,this._clipper=C$zue.clipper):(this._skeleton=new C$zun.Skeleton(C$zut),this._clipper=new C$zun.SkeletonClipping),this._rootBone=this._skeleton.getRootBone(),this.markForRender(!0)},setSlotsRange:function(C$zut,C$zue){this.isAnimationCached()?cc.warn("Slots visible range can not be modified in cached mode."):(this._startSlotIndex=C$zut,this._endSlotIndex=C$zue)},setAnimationStateData:function(C$zut){this.isAnimationCached()?cc.warn("'setAnimationStateData' interface can not be invoked in cached mode."):(C$zut=new C$zun.AnimationState(C$zut),this._listener&&(this._state&&this._state.removeListener(this._listener),C$zut.addListener(this._listener)),this._state=C$zut)},__preload:function(){this._super();var C$zut=this.node.children;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];C$zur&&"DEBUG_DRAW_NODE"===C$zur._name&&C$zur.destroy()}this._updateSkeletonData(),this._updateDebugDraw(),this._updateUseTint(),this._updateBatch()},setAnimationCacheMode:function(C$zut){this._preCacheMode!==C$zut&&(this._cacheMode=C$zut,this._updateSkeletonData(),this._updateUseTint())},isAnimationCached:function(){return this._cacheMode!==C$zul.REALTIME},update:function(C$zut){if(!this.paused)if(C$zut*=this.timeScale*sp.timeScale,this.isAnimationCached()){var C$zue;if(this._isAniComplete)return 0!==this._animationQueue.length||this._headAniInfo?(this._headAniInfo||(this._headAniInfo=this._animationQueue.shift()),this._accTime+=C$zut,void(this._accTime>this._headAniInfo.delay&&(C$zue=this._headAniInfo,this._headAniInfo=null,this.setAnimation(0,C$zue.animationName,C$zue.loop)))):void((C$zue=this._frameCache)&&C$zue.isInvalid()&&(C$zue.updateToFrame(),C$zue=C$zue.frames,this._curFrame=C$zue[C$zue.length-1]));this._updateCache(C$zut)}else this._updateRealtime(C$zut)},_emitCacheCompleteEvent:function(){this._listener&&(this._endEntry.animation.name=this._animationName,this._listener.complete&&this._listener.complete(this._endEntry),this._listener.end&&this._listener.end(this._endEntry))},_updateCache:function(C$zut){var C$zue=this._frameCache;if(C$zue.isInited()){var C$zui=C$zue.frames;var C$zur=C$zus.FrameTime;0==this._accTime&&0==this._playCount&&(this._startEntry.animation.name=this._animationName,this._listener&&this._listener.start&&this._listener.start(this._startEntry)),this._accTime+=C$zut;C$zut=Math.floor(this._accTime/C$zur);if(C$zue.isCompleted||C$zue.updateToFrame(C$zut),C$zue.isCompleted&&C$zut>=C$zui.length){if(this._playCount++,0<this._playTimes&&this._playCount>=this._playTimes)return this._curFrame=C$zui[C$zui.length-1],this._accTime=0,this._playCount=0,this._isAniComplete=!0,void this._emitCacheCompleteEvent();C$zut=this._accTime=0,this._emitCacheCompleteEvent()}this._curFrame=C$zui[C$zut]}},_updateRealtime:function(C$zut){var C$zue=this._skeleton;var C$zui=this._state;C$zue&&(C$zue.update(C$zut),C$zui&&(C$zui.update(C$zut),C$zui.apply(C$zue)))},setVertexEffectDelegate:function(C$zut){this._effectDelegate=C$zut},updateWorldTransform:function(){this.isAnimationCached()&&this._skeleton&&this._skeleton.updateWorldTransform()},setToSetupPose:function(){this._skeleton&&this._skeleton.setToSetupPose()},setBonesToSetupPose:function(){this._skeleton&&this._skeleton.setBonesToSetupPose()},setSlotsToSetupPose:function(){this._skeleton&&this._skeleton.setSlotsToSetupPose()},updateAnimationCache:function(C$zut){var C$zue;this.isAnimationCached()&&(C$zue=this.skeletonData._uuid,this._skeletonCache&&this._skeletonCache.updateAnimationCache(C$zue,C$zut))},invalidAnimationCache:function(){this.isAnimationCached()&&this._skeletonCache&&this._skeletonCache.invalidAnimationCache(this.skeletonData._uuid)},findBone:function(C$zut){return this._skeleton?this._skeleton.findBone(C$zut):null},findSlot:function(C$zut){return this._skeleton?this._skeleton.findSlot(C$zut):null},setSkin:function(C$zut){this._skeleton&&(this._skeleton.setSkinByName(C$zut),this._skeleton.setSlotsToSetupPose()),this.invalidAnimationCache()},getAttachment:function(C$zut,C$zue){return this._skeleton?this._skeleton.getAttachmentByName(C$zut,C$zue):null},setAttachment:function(C$zut,C$zue){this._skeleton&&this._skeleton.setAttachment(C$zut,C$zue),this.invalidAnimationCache()},getTextureAtlas:function(C$zut){return C$zut.region},setMix:function(C$zut,C$zue,C$zui){this._state&&this._state.data.setMix(C$zut,C$zue,C$zui)},setAnimation:function(C$zut,C$zue,C$zui){if(this._playTimes=C$zui?0:1,this._animationName=C$zue,this.isAnimationCached()){if(0!==C$zut&&cc.warn("Track index can not greater than 0 in cached mode."),!this._skeletonCache)return null;var C$zur=this._skeletonCache.getAnimationCache(this.skeletonData._uuid,C$zue);(C$zur=C$zur||this._skeletonCache.initAnimationCache(this.skeletonData._uuid,C$zue))&&(this._isAniComplete=!1,this._accTime=0,this._playCount=0,this._frameCache=C$zur,this.attachUtil._hasAttachedNode()&&this._frameCache.enableCacheAttachedInfo(),this._frameCache.updateToFrame(0),this._curFrame=this._frameCache.frames[0])}else if(this._skeleton){C$zur=this._skeleton.data.findAnimation(C$zue);if(!C$zur)return cc.logID(7509,C$zue),null;C$zue=this._state.setAnimationWith(C$zut,C$zur,C$zui);return this._state.apply(this._skeleton),C$zue}return null},addAnimation:function(C$zut,C$zue,C$zui,C$zur){var C$zun;if(C$zur=C$zur||0,this.isAnimationCached())0!==C$zut&&cc.warn("Track index can not greater than 0 in cached mode."),this._animationQueue.push({animationName:C$zue,loop:C$zui,delay:C$zur});else if(this._skeleton)return(C$zun=this._skeleton.data.findAnimation(C$zue))?this._state.addAnimationWith(C$zut,C$zun,C$zui,C$zur):(cc.logID(7510,C$zue),null);return null},findAnimation:function(C$zut){return this._skeleton?this._skeleton.data.findAnimation(C$zut):null},getCurrent:function(C$zut){if(this.isAnimationCached())cc.warn("'getCurrent' interface can not be invoked in cached mode.");else if(this._state)return this._state.getCurrent(C$zut);return null},clearTracks:function(){this.isAnimationCached()?cc.warn("'clearTracks' interface can not be invoked in cached mode."):this._state&&this._state.clearTracks()},clearTrack:function(C$zut){this.isAnimationCached()?cc.warn("'clearTrack' interface can not be invoked in cached mode."):this._state&&this._state.clearTrack(C$zut)},setStartListener:function(C$zut){this._ensureListener(),this._listener.start=C$zut},setInterruptListener:function(C$zut){this._ensureListener(),this._listener.interrupt=C$zut},setEndListener:function(C$zut){this._ensureListener(),this._listener.end=C$zut},setDisposeListener:function(C$zut){this._ensureListener(),this._listener.dispose=C$zut},setCompleteListener:function(C$zut){this._ensureListener(),this._listener.complete=C$zut},setEventListener:function(C$zut){this._ensureListener(),this._listener.event=C$zut},setTrackStartListener:function(C$zut,C$zue){C$zur.getListeners(C$zut).start=C$zue},setTrackInterruptListener:function(C$zut,C$zue){C$zur.getListeners(C$zut).interrupt=C$zue},setTrackEndListener:function(C$zut,C$zue){C$zur.getListeners(C$zut).end=C$zue},setTrackDisposeListener:function(C$zut,C$zue){C$zur.getListeners(C$zut).dispose=C$zue},setTrackCompleteListener:function(C$zut,C$zui){C$zur.getListeners(C$zut).complete=function(C$zut){var C$zue=Math.floor(C$zut.trackTime/C$zut.animationEnd);C$zui(C$zut,C$zue)}},setTrackEventListener:function(C$zut,C$zue){C$zur.getListeners(C$zut).event=C$zue},getState:function(){return this._state},_updateAnimEnum:!1,_updateSkinEnum:!1,_ensureListener:function(){this._listener||(this._listener=new C$zur,this._state&&this._state.addListener(this._listener))},_updateSkeletonData:function(){if(this.skeletonData){var C$zut=this.skeletonData.getRuntimeData();if(C$zut){try{this.setSkeletonData(C$zut),this.isAnimationCached()||this.setAnimationStateData(new C$zun.AnimationStateData(this._skeleton.data)),this.defaultSkin&&this.setSkin(this.defaultSkin)}catch(C$zut){cc.warn(C$zut)}this.attachUtil.init(this),this.attachUtil._associateAttachedNode(),this._preCacheMode=this._cacheMode,this.animation=this.defaultAnimation}else this.disableRender()}else this.disableRender()},_refreshInspector:function(){this._updateAnimEnum(),this._updateSkinEnum(),Editor.Utils.refreshSelectedInspector("node",this.node.uuid)},_updateDebugDraw:function(){var C$zut;this.debugBones||this.debugSlots?(this._debugRenderer||((C$zut=new cc.PrivateNode).name="DEBUG_DRAW_NODE",(C$zut=C$zut.addComponent(C$zua)).lineWidth=1,C$zut.strokeColor=cc.color(255,0,0,255),this._debugRenderer=C$zut),this._debugRenderer.node.parent=this.node,this.isAnimationCached()&&cc.warn("Debug bones or slots is invalid in cached mode")):this._debugRenderer&&(this._debugRenderer.node.parent=null)}}),C$zue.exports=sp.Skeleton},{"../../cocos2d/core/components/CCRenderComponent":89,"../../cocos2d/core/graphics/graphics":131,"../../cocos2d/core/renderer/render-flow":221,"./AttachUtil":352,"./lib/spine":355,"./skeleton-cache":356,"./track-entry-listeners":360}],354:[function(C$zut,C$zue,C$zui){"use strict";var C$zur="undefined"==typeof window?global:window;C$zur.spine=C$zut("./lib/spine"),C$zur.sp={},sp._timeScale=1,Object.defineProperty(sp,"timeScale",{get:function(){return this._timeScale},set:function(C$zut){this._timeScale=C$zut},configurable:!0}),sp.ATTACHMENT_TYPE={REGION:0,BOUNDING_BOX:1,MESH:2,SKINNED_MESH:3},sp.AnimationEventType=cc.Enum({START:0,INTERRUPT:1,END:2,DISPOSE:3,COMPLETE:4,EVENT:5}),sp.spine=C$zur.spine,C$zut("./skeleton-texture"),C$zut("./skeleton-data"),C$zut("./vertex-effect-delegate"),C$zut("./Skeleton"),C$zut("./spine-assembler")},{"./Skeleton":353,"./lib/spine":355,"./skeleton-data":357,"./skeleton-texture":358,"./spine-assembler":359,"./vertex-effect-delegate":361}],355:[function(C$zun,C$zua,C$zuo){"use strict";C$zus=function(C$zut,C$zue){return(C$zus=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$zut,C$zue){C$zut.__proto__=C$zue}||function(C$zut,C$zue){for(var C$zui in C$zue)C$zue.hasOwnProperty(C$zui)&&(C$zut[C$zui]=C$zue[C$zui])})(C$zut,C$zue)};var C$zuy=function(C$zut,C$zue){function __(){this.constructor=C$zut}C$zus(C$zut,C$zue),C$zut.prototype=null===C$zue?Object.create(C$zue):(__.prototype=C$zue.prototype,new __)};var C$zus;var C$zuc,C$zul;function IkConstraintData(C$zut){C$zut=C$zuh.call(this,C$zut,0,!1)||this;return C$zut.bones=new Array,C$zut.bendDirection=1,C$zut.compress=!1,C$zut.stretch=!1,C$zut.uniform=!1,C$zut.mix=1,C$zut.softness=0,C$zut}var C$zuh;function PathConstraintData(C$zut){C$zut=C$zu_.call(this,C$zut,0,!1)||this;return C$zut.bones=new Array,C$zut}var C$zu_;!function(C$zuN){Animation.prototype.hasTimeline=function(C$zut){return 1==this.timelineIds[C$zut]},Animation.prototype.apply=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){if(null==C$zut)throw new Error("skeleton cannot be null.");C$zur&&0!=this.duration&&(C$zui%=this.duration,0<C$zue&&(C$zue%=this.duration));var C$zuc=this.timelines;for(var C$zul=0,C$zuh=C$zuc.length;C$zul<C$zuh;C$zul++)C$zuc[C$zul].apply(C$zut,C$zue,C$zui,C$zun,C$zua,C$zuo,C$zus)},Animation.binarySearch=function(C$zut,C$zue,C$zui){var C$zur=0;var C$zun=C$zut.length/(C$zui=void 0===C$zui?1:C$zui)-2;if(0==C$zun)return C$zui;var C$zua=C$zun>>>1;for(;;){if(C$zut[(C$zua+1)*C$zui]<=C$zue?C$zur=C$zua+1:C$zun=C$zua,C$zur==C$zun)return(C$zur+1)*C$zui;C$zua=C$zur+C$zun>>>1}},Animation.linearSearch=function(C$zut,C$zue,C$zui){for(var C$zur=0,C$zun=C$zut.length-C$zui;C$zur<=C$zun;C$zur+=C$zui)if(C$zut[C$zur]>C$zue)return C$zur;return-1};var C$zuz=Animation;function Animation(C$zut,C$zue,C$zui){if(null==C$zut)throw new Error("name cannot be null.");if(null==C$zue)throw new Error("timelines cannot be null.");this.name=C$zut,this.timelines=C$zue,this.timelineIds=[];for(var C$zur=0;C$zur<C$zue.length;C$zur++)this.timelineIds[C$zue[C$zur].getPropertyId()]=!0;this.duration=C$zui}var C$zuk;var C$zuf;var C$zue;C$zuN.Animation=C$zuz,(C$zut=C$zuk=C$zuN.MixBlend||(C$zuN.MixBlend={}))[C$zut.setup=0]="setup",C$zut[C$zut.first=1]="first",C$zut[C$zut.replace=2]="replace",C$zut[C$zut.add=3]="add",(C$zut=C$zuf=C$zuN.MixDirection||(C$zuN.MixDirection={}))[C$zut.mixIn=0]="mixIn",C$zut[C$zut.mixOut=1]="mixOut",(C$zut=C$zue=C$zuN.TimelineType||(C$zuN.TimelineType={}))[C$zut.rotate=0]="rotate",C$zut[C$zut.translate=1]="translate",C$zut[C$zut.scale=2]="scale",C$zut[C$zut.shear=3]="shear",C$zut[C$zut.attachment=4]="attachment",C$zut[C$zut.color=5]="color",C$zut[C$zut.deform=6]="deform",C$zut[C$zut.event=7]="event",C$zut[C$zut.drawOrder=8]="drawOrder",C$zut[C$zut.ikConstraint=9]="ikConstraint",C$zut[C$zut.transformConstraint=10]="transformConstraint",C$zut[C$zut.pathConstraintPosition=11]="pathConstraintPosition",C$zut[C$zut.pathConstraintSpacing=12]="pathConstraintSpacing",C$zut[C$zut.pathConstraintMix=13]="pathConstraintMix",C$zut[C$zut.twoColor=14]="twoColor";CurveTimeline.prototype.getFrameCount=function(){return this.curves.length/CurveTimeline.BEZIER_SIZE+1},CurveTimeline.prototype.setLinear=function(C$zut){this.curves[C$zut*CurveTimeline.BEZIER_SIZE]=CurveTimeline.LINEAR},CurveTimeline.prototype.setStepped=function(C$zut){this.curves[C$zut*CurveTimeline.BEZIER_SIZE]=CurveTimeline.STEPPED},CurveTimeline.prototype.getCurveType=function(C$zut){C$zut*=CurveTimeline.BEZIER_SIZE;if(C$zut==this.curves.length)return CurveTimeline.LINEAR;C$zut=this.curves[C$zut];return C$zut==CurveTimeline.LINEAR?CurveTimeline.LINEAR:C$zut==CurveTimeline.STEPPED?CurveTimeline.STEPPED:CurveTimeline.BEZIER},CurveTimeline.prototype.setCurve=function(C$zuh,C$zut,C$zue,C$zui,C$zur){var C$zuu=.03*(2*-C$zut+C$zui),C$zu_=.03*(2*-C$zue+C$zur);var C$zun=.006*(3*(C$zut-C$zui)+1),C$zua=.006*(3*(C$zue-C$zur)+1);var C$zud=2*C$zuu+C$zun,C$zuf=2*C$zu_+C$zua;var C$zuo=.3*C$zut+C$zuu+.16666667*C$zun,C$zus=.3*C$zue+C$zu_+.16666667*C$zua;var C$zuc=C$zuh*CurveTimeline.BEZIER_SIZE;var C$zul=this.curves;C$zul[C$zuc++]=CurveTimeline.BEZIER;var C$zup=C$zuo,C$zum=C$zus;for(var C$zuv=C$zuc+CurveTimeline.BEZIER_SIZE-1;C$zuc<C$zuv;C$zuc+=2)C$zul[C$zuc]=C$zup,C$zul[C$zuc+1]=C$zum,C$zuo+=C$zud,C$zus+=C$zuf,C$zud+=C$zun,C$zuf+=C$zua,C$zup+=C$zuo,C$zum+=C$zus},CurveTimeline.prototype.getCurvePercent=function(C$zut,C$zue){C$zue=C$zuN.MathUtils.clamp(C$zue,0,1);var C$zui=this.curves;var C$zur=C$zut*CurveTimeline.BEZIER_SIZE;C$zut=C$zui[C$zur];if(C$zut==CurveTimeline.LINEAR)return C$zue;if(C$zut==CurveTimeline.STEPPED)return 0;var C$zun=0;for(var C$zua=++C$zur,C$zuo=C$zur+CurveTimeline.BEZIER_SIZE-1;C$zur<C$zuo;C$zur+=2){var C$zus,C$zuc;if(C$zue<=(C$zun=C$zui[C$zur]))return C$zuc=C$zus=void 0,(C$zuc=C$zur==C$zua?C$zus=0:(C$zus=C$zui[C$zur-2],C$zui[C$zur-1]))+(C$zui[C$zur+1]-C$zuc)*(C$zue-C$zus)/(C$zun-C$zus)}C$zut=C$zui[C$zur-1];return C$zut+(1-C$zut)*(C$zue-C$zun)/(1-C$zun)},CurveTimeline.LINEAR=0,CurveTimeline.STEPPED=1,CurveTimeline.BEZIER=2,CurveTimeline.BEZIER_SIZE=19;var C$zut=CurveTimeline;function CurveTimeline(C$zut){if(C$zut<=0)throw new Error("frameCount must be > 0: "+C$zut);this.curves=C$zuN.Utils.newFloatArray((C$zut-1)*CurveTimeline.BEZIER_SIZE)}C$zuN.CurveTimeline=C$zut;C$zuy(RotateTimeline,C$zur=C$zut),RotateTimeline.prototype.getPropertyId=function(){return(C$zue.rotate<<24)+this.boneIndex},RotateTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui){this.frames[C$zut<<=1]=C$zue,this.frames[C$zut+RotateTimeline.ROTATION]=C$zui},RotateTimeline.prototype.apply=function(C$zut,C$zuh,C$zue,C$zuu,C$zui,C$zur,C$zu_){var C$zun=this.frames;var C$zua=C$zut.bones[this.boneIndex];if(C$zua.active)if(C$zue<C$zun[0])switch(C$zur){case C$zuk.setup:return void(C$zua.rotation=C$zua.data.rotation);case C$zuk.first:var C$zuo=C$zua.data.rotation-C$zua.rotation;C$zua.rotation+=(C$zuo-360*(16384-(16384.499999999996-C$zuo/360|0)))*C$zui}else if(C$zue>=C$zun[C$zun.length-RotateTimeline.ENTRIES]){var C$zus=C$zun[C$zun.length+RotateTimeline.PREV_ROTATION];switch(C$zur){case C$zuk.setup:C$zua.rotation=C$zua.data.rotation+C$zus*C$zui;break;case C$zuk.first:case C$zuk.replace:C$zus=(C$zus+=C$zua.data.rotation-C$zua.rotation)-360*(16384-(16384.499999999996-C$zus/360|0));case C$zuk.add:C$zua.rotation+=C$zus*C$zui}}else{C$zut=C$zuz.binarySearch(C$zun,C$zue,RotateTimeline.ENTRIES);var C$zuc=C$zun[C$zut+RotateTimeline.PREV_ROTATION];var C$zud=C$zun[C$zut];C$zue=this.getCurvePercent((C$zut>>1)-1,1-(C$zue-C$zud)/(C$zun[C$zut+RotateTimeline.PREV_TIME]-C$zud));var C$zul=C$zun[C$zut+RotateTimeline.ROTATION]-C$zuc;switch(C$zul=C$zuc+(C$zul-360*(16384-(16384.499999999996-C$zul/360|0)))*C$zue,C$zur){case C$zuk.setup:C$zua.rotation=C$zua.data.rotation+(C$zul-360*(16384-(16384.499999999996-C$zul/360|0)))*C$zui;break;case C$zuk.first:case C$zuk.replace:C$zul+=C$zua.data.rotation-C$zua.rotation;case C$zuk.add:C$zua.rotation+=(C$zul-360*(16384-(16384.499999999996-C$zul/360|0)))*C$zui}}},RotateTimeline.ENTRIES=2,RotateTimeline.PREV_TIME=-2,RotateTimeline.PREV_ROTATION=-1,RotateTimeline.ROTATION=1;var C$zui=RotateTimeline;function RotateTimeline(C$zut){var C$zue=C$zur.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut<<1),C$zue}var C$zur;C$zuN.RotateTimeline=C$zui;C$zuy(TranslateTimeline,C$zun=C$zut),TranslateTimeline.prototype.getPropertyId=function(){return(C$zue.translate<<24)+this.boneIndex},TranslateTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui,C$zur){this.frames[C$zut*=TranslateTimeline.ENTRIES]=C$zue,this.frames[C$zut+TranslateTimeline.X]=C$zui,this.frames[C$zut+TranslateTimeline.Y]=C$zur},TranslateTimeline.prototype.apply=function(C$zut,C$zul,C$zue,C$zuh,C$zui,C$zur,C$zuu){var C$zun=this.frames;var C$zua=C$zut.bones[this.boneIndex];if(C$zua.active)if(C$zue<C$zun[0])switch(C$zur){case C$zuk.setup:return C$zua.x=C$zua.data.x,void(C$zua.y=C$zua.data.y);case C$zuk.first:C$zua.x+=(C$zua.data.x-C$zua.x)*C$zui,C$zua.y+=(C$zua.data.y-C$zua.y)*C$zui}else{var C$zuo=0,C$zus=0;var C$zuc;switch(C$zue>=C$zun[C$zun.length-TranslateTimeline.ENTRIES]?(C$zuo=C$zun[C$zun.length+TranslateTimeline.PREV_X],C$zus=C$zun[C$zun.length+TranslateTimeline.PREV_Y]):(C$zuo=C$zun[(C$zut=C$zuz.binarySearch(C$zun,C$zue,TranslateTimeline.ENTRIES))+TranslateTimeline.PREV_X],C$zus=C$zun[C$zut+TranslateTimeline.PREV_Y],C$zuc=C$zun[C$zut],C$zue=this.getCurvePercent(C$zut/TranslateTimeline.ENTRIES-1,1-(C$zue-C$zuc)/(C$zun[C$zut+TranslateTimeline.PREV_TIME]-C$zuc)),C$zuo+=(C$zun[C$zut+TranslateTimeline.X]-C$zuo)*C$zue,C$zus+=(C$zun[C$zut+TranslateTimeline.Y]-C$zus)*C$zue),C$zur){case C$zuk.setup:C$zua.x=C$zua.data.x+C$zuo*C$zui,C$zua.y=C$zua.data.y+C$zus*C$zui;break;case C$zuk.first:case C$zuk.replace:C$zua.x+=(C$zua.data.x+C$zuo-C$zua.x)*C$zui,C$zua.y+=(C$zua.data.y+C$zus-C$zua.y)*C$zui;break;case C$zuk.add:C$zua.x+=C$zuo*C$zui,C$zua.y+=C$zus*C$zui}}},TranslateTimeline.ENTRIES=3,TranslateTimeline.PREV_TIME=-3,TranslateTimeline.PREV_X=-2,TranslateTimeline.PREV_Y=-1,TranslateTimeline.X=1,TranslateTimeline.Y=2;C$zui=TranslateTimeline;function TranslateTimeline(C$zut){var C$zue=C$zun.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut*TranslateTimeline.ENTRIES),C$zue}var C$zun;C$zuN.TranslateTimeline=C$zui;C$zuy(ScaleTimeline,C$zuo=C$zui),ScaleTimeline.prototype.getPropertyId=function(){return(C$zue.scale<<24)+this.boneIndex},ScaleTimeline.prototype.apply=function(C$zut,C$zuh,C$zue,C$zuu,C$zui,C$zur,C$zu_){var C$zun=this.frames;var C$zua=C$zut.bones[this.boneIndex];if(C$zua.active)if(C$zue<C$zun[0])switch(C$zur){case C$zuk.setup:return C$zua.scaleX=C$zua.data.scaleX,void(C$zua.scaleY=C$zua.data.scaleY);case C$zuk.first:C$zua.scaleX+=(C$zua.data.scaleX-C$zua.scaleX)*C$zui,C$zua.scaleY+=(C$zua.data.scaleY-C$zua.scaleY)*C$zui}else{var C$zuo=0,C$zus=0;var C$zud;if(C$zus=C$zue>=C$zun[C$zun.length-ScaleTimeline.ENTRIES]?(C$zuo=C$zun[C$zun.length+ScaleTimeline.PREV_X]*C$zua.data.scaleX,C$zun[C$zun.length+ScaleTimeline.PREV_Y]*C$zua.data.scaleY):(C$zuo=C$zun[(C$zut=C$zuz.binarySearch(C$zun,C$zue,ScaleTimeline.ENTRIES))+ScaleTimeline.PREV_X],C$zus=C$zun[C$zut+ScaleTimeline.PREV_Y],C$zud=C$zun[C$zut],C$zue=this.getCurvePercent(C$zut/ScaleTimeline.ENTRIES-1,1-(C$zue-C$zud)/(C$zun[C$zut+ScaleTimeline.PREV_TIME]-C$zud)),C$zuo=(C$zuo+(C$zun[C$zut+ScaleTimeline.X]-C$zuo)*C$zue)*C$zua.data.scaleX,(C$zus+(C$zun[C$zut+ScaleTimeline.Y]-C$zus)*C$zue)*C$zua.data.scaleY),1==C$zui)C$zur==C$zuk.add?(C$zua.scaleX+=C$zuo-C$zua.data.scaleX,C$zua.scaleY+=C$zus-C$zua.data.scaleY):(C$zua.scaleX=C$zuo,C$zua.scaleY=C$zus);else{var C$zuc=0,C$zul=0;if(C$zu_==C$zuf.mixOut)switch(C$zur){case C$zuk.setup:C$zuc=C$zua.data.scaleX,C$zul=C$zua.data.scaleY,C$zua.scaleX=C$zuc+(Math.abs(C$zuo)*C$zuN.MathUtils.signum(C$zuc)-C$zuc)*C$zui,C$zua.scaleY=C$zul+(Math.abs(C$zus)*C$zuN.MathUtils.signum(C$zul)-C$zul)*C$zui;break;case C$zuk.first:case C$zuk.replace:C$zuc=C$zua.scaleX,C$zul=C$zua.scaleY,C$zua.scaleX=C$zuc+(Math.abs(C$zuo)*C$zuN.MathUtils.signum(C$zuc)-C$zuc)*C$zui,C$zua.scaleY=C$zul+(Math.abs(C$zus)*C$zuN.MathUtils.signum(C$zul)-C$zul)*C$zui;break;case C$zuk.add:C$zuc=C$zua.scaleX,C$zul=C$zua.scaleY,C$zua.scaleX=C$zuc+(Math.abs(C$zuo)*C$zuN.MathUtils.signum(C$zuc)-C$zua.data.scaleX)*C$zui,C$zua.scaleY=C$zul+(Math.abs(C$zus)*C$zuN.MathUtils.signum(C$zul)-C$zua.data.scaleY)*C$zui}else switch(C$zur){case C$zuk.setup:C$zuc=Math.abs(C$zua.data.scaleX)*C$zuN.MathUtils.signum(C$zuo),C$zul=Math.abs(C$zua.data.scaleY)*C$zuN.MathUtils.signum(C$zus),C$zua.scaleX=C$zuc+(C$zuo-C$zuc)*C$zui,C$zua.scaleY=C$zul+(C$zus-C$zul)*C$zui;break;case C$zuk.first:case C$zuk.replace:C$zuc=Math.abs(C$zua.scaleX)*C$zuN.MathUtils.signum(C$zuo),C$zul=Math.abs(C$zua.scaleY)*C$zuN.MathUtils.signum(C$zus),C$zua.scaleX=C$zuc+(C$zuo-C$zuc)*C$zui,C$zua.scaleY=C$zul+(C$zus-C$zul)*C$zui;break;case C$zuk.add:C$zuc=C$zuN.MathUtils.signum(C$zuo),C$zul=C$zuN.MathUtils.signum(C$zus),C$zua.scaleX=Math.abs(C$zua.scaleX)*C$zuc+(C$zuo-Math.abs(C$zua.data.scaleX)*C$zuc)*C$zui,C$zua.scaleY=Math.abs(C$zua.scaleY)*C$zul+(C$zus-Math.abs(C$zua.data.scaleY)*C$zul)*C$zui}}}};var C$zua=ScaleTimeline;function ScaleTimeline(C$zut){return C$zuo.call(this,C$zut)||this}var C$zuo;C$zuN.ScaleTimeline=C$zua;C$zuy(ShearTimeline,C$zus=C$zui),ShearTimeline.prototype.getPropertyId=function(){return(C$zue.shear<<24)+this.boneIndex},ShearTimeline.prototype.apply=function(C$zut,C$zul,C$zue,C$zuh,C$zui,C$zur,C$zuu){var C$zun=this.frames;var C$zua=C$zut.bones[this.boneIndex];if(C$zua.active)if(C$zue<C$zun[0])switch(C$zur){case C$zuk.setup:return C$zua.shearX=C$zua.data.shearX,void(C$zua.shearY=C$zua.data.shearY);case C$zuk.first:C$zua.shearX+=(C$zua.data.shearX-C$zua.shearX)*C$zui,C$zua.shearY+=(C$zua.data.shearY-C$zua.shearY)*C$zui}else{var C$zuo=0,C$zus=0;var C$zuc;switch(C$zue>=C$zun[C$zun.length-ShearTimeline.ENTRIES]?(C$zuo=C$zun[C$zun.length+ShearTimeline.PREV_X],C$zus=C$zun[C$zun.length+ShearTimeline.PREV_Y]):(C$zuo=C$zun[(C$zut=C$zuz.binarySearch(C$zun,C$zue,ShearTimeline.ENTRIES))+ShearTimeline.PREV_X],C$zus=C$zun[C$zut+ShearTimeline.PREV_Y],C$zuc=C$zun[C$zut],C$zue=this.getCurvePercent(C$zut/ShearTimeline.ENTRIES-1,1-(C$zue-C$zuc)/(C$zun[C$zut+ShearTimeline.PREV_TIME]-C$zuc)),C$zuo+=(C$zun[C$zut+ShearTimeline.X]-C$zuo)*C$zue,C$zus+=(C$zun[C$zut+ShearTimeline.Y]-C$zus)*C$zue),C$zur){case C$zuk.setup:C$zua.shearX=C$zua.data.shearX+C$zuo*C$zui,C$zua.shearY=C$zua.data.shearY+C$zus*C$zui;break;case C$zuk.first:case C$zuk.replace:C$zua.shearX+=(C$zua.data.shearX+C$zuo-C$zua.shearX)*C$zui,C$zua.shearY+=(C$zua.data.shearY+C$zus-C$zua.shearY)*C$zui;break;case C$zuk.add:C$zua.shearX+=C$zuo*C$zui,C$zua.shearY+=C$zus*C$zui}}};C$zua=ShearTimeline;function ShearTimeline(C$zut){return C$zus.call(this,C$zut)||this}var C$zus;C$zuN.ShearTimeline=C$zua;C$zuy(ColorTimeline,C$zuc=C$zut),ColorTimeline.prototype.getPropertyId=function(){return(C$zue.color<<24)+this.slotIndex},ColorTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this.frames[C$zut*=ColorTimeline.ENTRIES]=C$zue,this.frames[C$zut+ColorTimeline.R]=C$zui,this.frames[C$zut+ColorTimeline.G]=C$zur,this.frames[C$zut+ColorTimeline.B]=C$zun,this.frames[C$zut+ColorTimeline.A]=C$zua},ColorTimeline.prototype.apply=function(C$zut,C$zuh,C$zue,C$zuu,C$zui,C$zu_,C$zud){var C$zur=C$zut.slots[this.slotIndex];if(C$zur.bone.active){C$zut=this.frames;if(C$zue<C$zut[0])switch(C$zu_){case C$zuk.setup:return void C$zur.color.setFromColor(C$zur.data.color);case C$zuk.first:var C$zun=C$zur.color,C$zuf=C$zur.data.color;C$zun.add((C$zuf.r-C$zun.r)*C$zui,(C$zuf.g-C$zun.g)*C$zui,(C$zuf.b-C$zun.b)*C$zui,(C$zuf.a-C$zun.a)*C$zui)}else{var C$zua=0,C$zuo=0,C$zus=0,C$zuc=0;var C$zul,C$zup;C$zue>=C$zut[C$zut.length-ColorTimeline.ENTRIES]?(C$zua=C$zut[(C$zul=C$zut.length)+ColorTimeline.PREV_R],C$zuo=C$zut[C$zul+ColorTimeline.PREV_G],C$zus=C$zut[C$zul+ColorTimeline.PREV_B],C$zuc=C$zut[C$zul+ColorTimeline.PREV_A]):(C$zua=C$zut[(C$zul=C$zuz.binarySearch(C$zut,C$zue,ColorTimeline.ENTRIES))+ColorTimeline.PREV_R],C$zuo=C$zut[C$zul+ColorTimeline.PREV_G],C$zus=C$zut[C$zul+ColorTimeline.PREV_B],C$zuc=C$zut[C$zul+ColorTimeline.PREV_A],C$zup=C$zut[C$zul],C$zue=this.getCurvePercent(C$zul/ColorTimeline.ENTRIES-1,1-(C$zue-C$zup)/(C$zut[C$zul+ColorTimeline.PREV_TIME]-C$zup)),C$zua+=(C$zut[C$zul+ColorTimeline.R]-C$zua)*C$zue,C$zuo+=(C$zut[C$zul+ColorTimeline.G]-C$zuo)*C$zue,C$zus+=(C$zut[C$zul+ColorTimeline.B]-C$zus)*C$zue,C$zuc+=(C$zut[C$zul+ColorTimeline.A]-C$zuc)*C$zue),1==C$zui?C$zur.color.set(C$zua,C$zuo,C$zus,C$zuc):(C$zun=C$zur.color,C$zu_==C$zuk.setup&&C$zun.setFromColor(C$zur.data.color),C$zun.add((C$zua-C$zun.r)*C$zui,(C$zuo-C$zun.g)*C$zui,(C$zus-C$zun.b)*C$zui,(C$zuc-C$zun.a)*C$zui))}}},ColorTimeline.ENTRIES=5,ColorTimeline.PREV_TIME=-5,ColorTimeline.PREV_R=-4,ColorTimeline.PREV_G=-3,ColorTimeline.PREV_B=-2,ColorTimeline.PREV_A=-1,ColorTimeline.R=1,ColorTimeline.G=2,ColorTimeline.B=3,ColorTimeline.A=4;C$zui=ColorTimeline;function ColorTimeline(C$zut){var C$zue=C$zuc.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut*ColorTimeline.ENTRIES),C$zue}var C$zuc;C$zuN.ColorTimeline=C$zui;C$zuy(TwoColorTimeline,C$zul=C$zut),TwoColorTimeline.prototype.getPropertyId=function(){return(C$zue.twoColor<<24)+this.slotIndex},TwoColorTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc){this.frames[C$zut*=TwoColorTimeline.ENTRIES]=C$zue,this.frames[C$zut+TwoColorTimeline.R]=C$zui,this.frames[C$zut+TwoColorTimeline.G]=C$zur,this.frames[C$zut+TwoColorTimeline.B]=C$zun,this.frames[C$zut+TwoColorTimeline.A]=C$zua,this.frames[C$zut+TwoColorTimeline.R2]=C$zuo,this.frames[C$zut+TwoColorTimeline.G2]=C$zus,this.frames[C$zut+TwoColorTimeline.B2]=C$zuc},TwoColorTimeline.prototype.apply=function(C$zut,C$zuh,C$zue,C$zuu,C$zui,C$zu_,C$zud){var C$zur=C$zut.slots[this.slotIndex];if(C$zur.bone.active){C$zut=this.frames;if(C$zue<C$zut[0])switch(C$zu_){case C$zuk.setup:return C$zur.color.setFromColor(C$zur.data.color),void C$zur.darkColor.setFromColor(C$zur.data.darkColor);case C$zuk.first:var C$zun=C$zur.color,C$zua=C$zur.darkColor,C$zuf=C$zur.data.color,C$zup=C$zur.data.darkColor;C$zun.add((C$zuf.r-C$zun.r)*C$zui,(C$zuf.g-C$zun.g)*C$zui,(C$zuf.b-C$zun.b)*C$zui,(C$zuf.a-C$zun.a)*C$zui),C$zua.add((C$zup.r-C$zua.r)*C$zui,(C$zup.g-C$zua.g)*C$zui,(C$zup.b-C$zua.b)*C$zui,0)}else{var C$zuo=0,C$zus=0,C$zuc=0,C$zum=0,C$zuv=0,C$zuy=0,C$zug=0;var C$zul,C$zub;C$zue>=C$zut[C$zut.length-TwoColorTimeline.ENTRIES]?(C$zuo=C$zut[(C$zul=C$zut.length)+TwoColorTimeline.PREV_R],C$zus=C$zut[C$zul+TwoColorTimeline.PREV_G],C$zuc=C$zut[C$zul+TwoColorTimeline.PREV_B],C$zum=C$zut[C$zul+TwoColorTimeline.PREV_A],C$zuv=C$zut[C$zul+TwoColorTimeline.PREV_R2],C$zuy=C$zut[C$zul+TwoColorTimeline.PREV_G2],C$zug=C$zut[C$zul+TwoColorTimeline.PREV_B2]):(C$zuo=C$zut[(C$zul=C$zuz.binarySearch(C$zut,C$zue,TwoColorTimeline.ENTRIES))+TwoColorTimeline.PREV_R],C$zus=C$zut[C$zul+TwoColorTimeline.PREV_G],C$zuc=C$zut[C$zul+TwoColorTimeline.PREV_B],C$zum=C$zut[C$zul+TwoColorTimeline.PREV_A],C$zuv=C$zut[C$zul+TwoColorTimeline.PREV_R2],C$zuy=C$zut[C$zul+TwoColorTimeline.PREV_G2],C$zug=C$zut[C$zul+TwoColorTimeline.PREV_B2],C$zub=C$zut[C$zul],C$zue=this.getCurvePercent(C$zul/TwoColorTimeline.ENTRIES-1,1-(C$zue-C$zub)/(C$zut[C$zul+TwoColorTimeline.PREV_TIME]-C$zub)),C$zuo+=(C$zut[C$zul+TwoColorTimeline.R]-C$zuo)*C$zue,C$zus+=(C$zut[C$zul+TwoColorTimeline.G]-C$zus)*C$zue,C$zuc+=(C$zut[C$zul+TwoColorTimeline.B]-C$zuc)*C$zue,C$zum+=(C$zut[C$zul+TwoColorTimeline.A]-C$zum)*C$zue,C$zuv+=(C$zut[C$zul+TwoColorTimeline.R2]-C$zuv)*C$zue,C$zuy+=(C$zut[C$zul+TwoColorTimeline.G2]-C$zuy)*C$zue,C$zug+=(C$zut[C$zul+TwoColorTimeline.B2]-C$zug)*C$zue),1==C$zui?(C$zur.color.set(C$zuo,C$zus,C$zuc,C$zum),C$zur.darkColor.set(C$zuv,C$zuy,C$zug,1)):(C$zun=C$zur.color,C$zua=C$zur.darkColor,C$zu_==C$zuk.setup&&(C$zun.setFromColor(C$zur.data.color),C$zua.setFromColor(C$zur.data.darkColor)),C$zun.add((C$zuo-C$zun.r)*C$zui,(C$zus-C$zun.g)*C$zui,(C$zuc-C$zun.b)*C$zui,(C$zum-C$zun.a)*C$zui),C$zua.add((C$zuv-C$zua.r)*C$zui,(C$zuy-C$zua.g)*C$zui,(C$zug-C$zua.b)*C$zui,0))}}},TwoColorTimeline.ENTRIES=8,TwoColorTimeline.PREV_TIME=-8,TwoColorTimeline.PREV_R=-7,TwoColorTimeline.PREV_G=-6,TwoColorTimeline.PREV_B=-5,TwoColorTimeline.PREV_A=-4,TwoColorTimeline.PREV_R2=-3,TwoColorTimeline.PREV_G2=-2,TwoColorTimeline.PREV_B2=-1,TwoColorTimeline.R=1,TwoColorTimeline.G=2,TwoColorTimeline.B=3,TwoColorTimeline.A=4,TwoColorTimeline.R2=5,TwoColorTimeline.G2=6,TwoColorTimeline.B2=7;C$zua=TwoColorTimeline;function TwoColorTimeline(C$zut){var C$zue=C$zul.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut*TwoColorTimeline.ENTRIES),C$zue}var C$zul;function AttachmentTimeline(C$zut){this.frames=C$zuN.Utils.newFloatArray(C$zut),this.attachmentNames=new Array(C$zut)}C$zuN.TwoColorTimeline=C$zua,AttachmentTimeline.prototype.getPropertyId=function(){return(C$zue.attachment<<24)+this.slotIndex},AttachmentTimeline.prototype.getFrameCount=function(){return this.frames.length},AttachmentTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui){this.frames[C$zut]=C$zue,this.attachmentNames[C$zut]=C$zui},AttachmentTimeline.prototype.apply=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){var C$zus=C$zut.slots[this.slotIndex];if(C$zus.bone.active){if(C$zuo==C$zuf.mixOut&&C$zua==C$zuk.setup)return C$zuo=C$zus.data.attachmentName,void C$zus.setAttachment(null==C$zuo?null:C$zut.getAttachment(this.slotIndex,C$zuo));C$zuo=this.frames;C$zui<C$zuo[0]?C$zua!=C$zuk.setup&&C$zua!=C$zuk.first||(C$zua=C$zus.data.attachmentName,C$zus.setAttachment(null==C$zua?null:C$zut.getAttachment(this.slotIndex,C$zua))):(C$zus=0,C$zus=C$zui>=C$zuo[C$zuo.length-1]?C$zuo.length-1:C$zuz.binarySearch(C$zuo,C$zui,1)-1,C$zua=this.attachmentNames[C$zus],C$zut.slots[this.slotIndex].setAttachment(null==C$zua?null:C$zut.getAttachment(this.slotIndex,C$zua)))}},C$zuN.AttachmentTimeline=AttachmentTimeline;var C$zuh=null;C$zuy(DeformTimeline,C$zuu=C$zut),DeformTimeline.prototype.getPropertyId=function(){return(C$zue.deform<<27)+ +this.attachment.id+this.slotIndex},DeformTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui){this.frames[C$zut]=C$zue,this.frameVertices[C$zut]=C$zui},DeformTimeline.prototype.apply=function(C$zut,C$zuh,C$zuu,C$zu_,C$zue,C$zud,C$zuf){C$zut=C$zut.slots[this.slotIndex];if(C$zut.bone.active){var C$zui=C$zut.getAttachment();if(C$zui instanceof C$zuN.VertexAttachment&&C$zui.deformAttachment==this.attachment){var C$zup=C$zut.deform;0==C$zup.length&&(C$zud=C$zuk.setup);C$zut=this.frameVertices;var C$zur=C$zut[0].length;var C$zum=this.frames;if(C$zuu<C$zum[0]){var C$zun=C$zui;switch(C$zud){case C$zuk.setup:return void(C$zup.length=0);case C$zuk.first:if(1==C$zue){C$zup.length=0;break}var C$zuv=C$zuN.Utils.setArraySize(C$zup,C$zur);if(null==C$zun.bones){var C$zua=C$zun.vertices;for(var C$zuo=0;C$zuo<C$zur;C$zuo++)C$zuv[C$zuo]+=(C$zua[C$zuo]-C$zuv[C$zuo])*C$zue}else{C$zue=1-C$zue;for(C$zuo=0;C$zuo<C$zur;C$zuo++)C$zuv[C$zuo]*=C$zue}}}else{var C$zus=C$zuN.Utils.setArraySize(C$zup,C$zur);if(C$zuu>=C$zum[C$zum.length-1]){var C$zuc=C$zut[C$zum.length-1];if(1==C$zue)if(C$zud==C$zuk.add)if(null==(C$zun=C$zui).bones){C$zua=C$zun.vertices;for(var C$zuy=0;C$zuy<C$zur;C$zuy++)C$zus[C$zuy]+=C$zuc[C$zuy]-C$zua[C$zuy]}else for(var C$zug=0;C$zug<C$zur;C$zug++)C$zus[C$zug]+=C$zuc[C$zug];else C$zuN.Utils.arrayCopy(C$zuc,0,C$zus,0,C$zur);else switch(C$zud){case C$zuk.setup:if(null==C$zui.bones){C$zua=C$zui.vertices;for(var C$zub=0;C$zub<C$zur;C$zub++){var C$zuC=C$zua[C$zub];C$zus[C$zub]=C$zuC+(C$zuc[C$zub]-C$zuC)*C$zue}}else for(var C$zux=0;C$zux<C$zur;C$zux++)C$zus[C$zux]=C$zuc[C$zux]*C$zue;break;case C$zuk.first:case C$zuk.replace:for(var C$zuA=0;C$zuA<C$zur;C$zuA++)C$zus[C$zuA]+=(C$zuc[C$zuA]-C$zus[C$zuA])*C$zue;case C$zuk.add:if(null==(C$zun=C$zui).bones){C$zua=C$zun.vertices;for(var C$zuS=0;C$zuS<C$zur;C$zuS++)C$zus[C$zuS]+=(C$zuc[C$zuS]-C$zua[C$zuS])*C$zue}else for(var C$zuT=0;C$zuT<C$zur;C$zuT++)C$zus[C$zuT]+=C$zuc[C$zuT]*C$zue}}else{var C$zuw=C$zuz.binarySearch(C$zum,C$zuu);var C$zuE=C$zut[C$zuw-1];var C$zuP=C$zut[C$zuw];C$zut=C$zum[C$zuw];var C$zuM=this.getCurvePercent(C$zuw-1,1-(C$zuu-C$zut)/(C$zum[C$zuw-1]-C$zut));if(1==C$zue)if(C$zud==C$zuk.add)if(null==(C$zun=C$zui).bones){C$zua=C$zun.vertices;for(var C$zuR=0;C$zuR<C$zur;C$zuR++){var C$zul=C$zuE[C$zuR];C$zus[C$zuR]+=C$zul+(C$zuP[C$zuR]-C$zul)*C$zuM-C$zua[C$zuR]}}else for(var C$zuI=0;C$zuI<C$zur;C$zuI++){C$zul=C$zuE[C$zuI];C$zus[C$zuI]+=C$zul+(C$zuP[C$zuI]-C$zul)*C$zuM}else for(var C$zuB=0;C$zuB<C$zur;C$zuB++){C$zul=C$zuE[C$zuB];C$zus[C$zuB]=C$zul+(C$zuP[C$zuB]-C$zul)*C$zuM}else switch(C$zud){case C$zuk.setup:if(null==C$zui.bones){C$zua=C$zui.vertices;for(var C$zuD=0;C$zuD<C$zur;C$zuD++){C$zul=C$zuE[C$zuD],C$zuC=C$zua[C$zuD];C$zus[C$zuD]=C$zuC+(C$zul+(C$zuP[C$zuD]-C$zul)*C$zuM-C$zuC)*C$zue}}else for(var C$zuL=0;C$zuL<C$zur;C$zuL++){C$zul=C$zuE[C$zuL];C$zus[C$zuL]=(C$zul+(C$zuP[C$zuL]-C$zul)*C$zuM)*C$zue}break;case C$zuk.first:case C$zuk.replace:for(var C$zuV=0;C$zuV<C$zur;C$zuV++){C$zul=C$zuE[C$zuV];C$zus[C$zuV]+=(C$zul+(C$zuP[C$zuV]-C$zul)*C$zuM-C$zus[C$zuV])*C$zue}break;case C$zuk.add:if(null==(C$zun=C$zui).bones){C$zua=C$zun.vertices;for(var C$zuO=0;C$zuO<C$zur;C$zuO++){C$zul=C$zuE[C$zuO];C$zus[C$zuO]+=(C$zul+(C$zuP[C$zuO]-C$zul)*C$zuM-C$zua[C$zuO])*C$zue}}else for(var C$zuF=0;C$zuF<C$zur;C$zuF++){C$zul=C$zuE[C$zuF];C$zus[C$zuF]+=(C$zul+(C$zuP[C$zuF]-C$zul)*C$zuM)*C$zue}}}}}}};C$zui=DeformTimeline;function DeformTimeline(C$zut){var C$zue=C$zuu.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut),C$zue.frameVertices=new Array(C$zut),null==C$zuh&&(C$zuh=C$zuN.Utils.newFloatArray(64)),C$zue}var C$zuu;function EventTimeline(C$zut){this.frames=C$zuN.Utils.newFloatArray(C$zut),this.events=new Array(C$zut)}function DrawOrderTimeline(C$zut){this.frames=C$zuN.Utils.newFloatArray(C$zut),this.drawOrders=new Array(C$zut)}C$zuN.DeformTimeline=C$zui,EventTimeline.prototype.getPropertyId=function(){return C$zue.event<<24},EventTimeline.prototype.getFrameCount=function(){return this.frames.length},EventTimeline.prototype.setFrame=function(C$zut,C$zue){this.frames[C$zut]=C$zue.time,this.events[C$zut]=C$zue},EventTimeline.prototype.apply=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){if(null!=C$zur){var C$zus=this.frames;var C$zuc=this.frames.length;if(C$zui<C$zue)this.apply(C$zut,C$zue,Number.MAX_VALUE,C$zur,C$zun,C$zua,C$zuo),C$zue=-1;else if(C$zue>=C$zus[C$zuc-1])return;if(!(C$zui<C$zus[0])){var C$zul=0;if(C$zue<C$zus[0])C$zul=0;else{var C$zuh=C$zus[C$zul=C$zuz.binarySearch(C$zus,C$zue)];for(;0<C$zul&&C$zus[C$zul-1]==C$zuh;)C$zul--}for(;C$zul<C$zuc&&C$zui>=C$zus[C$zul];C$zul++)C$zur.push(this.events[C$zul])}}},C$zuN.EventTimeline=EventTimeline,DrawOrderTimeline.prototype.getPropertyId=function(){return C$zue.drawOrder<<24},DrawOrderTimeline.prototype.getFrameCount=function(){return this.frames.length},DrawOrderTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui){this.frames[C$zut]=C$zue,this.drawOrders[C$zut]=C$zui},DrawOrderTimeline.prototype.apply=function(C$zut,C$zul,C$zue,C$zuh,C$zuu,C$zui,C$zur){var C$zun=C$zut.drawOrder;var C$zua=C$zut.slots;if(C$zur!=C$zuf.mixOut||C$zui!=C$zuk.setup){C$zur=this.frames;if(C$zue<C$zur[0])C$zui!=C$zuk.setup&&C$zui!=C$zuk.first||C$zuN.Utils.arrayCopy(C$zut.slots,0,C$zut.drawOrder,0,C$zut.slots.length);else{C$zui=C$zue>=C$zur[C$zur.length-1]?C$zur.length-1:C$zuz.binarySearch(C$zur,C$zue)-1;var C$zuo=this.drawOrders[C$zui];if(null==C$zuo)C$zuN.Utils.arrayCopy(C$zua,0,C$zun,0,C$zua.length);else for(var C$zus=0,C$zuc=C$zuo.length;C$zus<C$zuc;C$zus++)C$zun[C$zus]=C$zua[C$zuo[C$zus]]}}else C$zuN.Utils.arrayCopy(C$zut.slots,0,C$zut.drawOrder,0,C$zut.slots.length)},C$zuN.DrawOrderTimeline=DrawOrderTimeline;C$zuy(IkConstraintTimeline,C$zu_=C$zut),IkConstraintTimeline.prototype.getPropertyId=function(){return(C$zue.ikConstraint<<24)+this.ikConstraintIndex},IkConstraintTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){this.frames[C$zut*=IkConstraintTimeline.ENTRIES]=C$zue,this.frames[C$zut+IkConstraintTimeline.MIX]=C$zui,this.frames[C$zut+IkConstraintTimeline.SOFTNESS]=C$zur,this.frames[C$zut+IkConstraintTimeline.BEND_DIRECTION]=C$zun,this.frames[C$zut+IkConstraintTimeline.COMPRESS]=C$zua?1:0,this.frames[C$zut+IkConstraintTimeline.STRETCH]=C$zuo?1:0},IkConstraintTimeline.prototype.apply=function(C$zut,C$zuh,C$zue,C$zuu,C$zui,C$zur,C$zun){var C$zua=this.frames;var C$zuo=C$zut.ikConstraints[this.ikConstraintIndex];var C$zus,C$zuc,C$zul;if(C$zuo.active)if(C$zue<C$zua[0])switch(C$zur){case C$zuk.setup:return C$zuo.mix=C$zuo.data.mix,C$zuo.softness=C$zuo.data.softness,C$zuo.bendDirection=C$zuo.data.bendDirection,C$zuo.compress=C$zuo.data.compress,void(C$zuo.stretch=C$zuo.data.stretch);case C$zuk.first:C$zuo.mix+=(C$zuo.data.mix-C$zuo.mix)*C$zui,C$zuo.softness+=(C$zuo.data.softness-C$zuo.softness)*C$zui,C$zuo.bendDirection=C$zuo.data.bendDirection,C$zuo.compress=C$zuo.data.compress,C$zuo.stretch=C$zuo.data.stretch}else C$zue>=C$zua[C$zua.length-IkConstraintTimeline.ENTRIES]?C$zur==C$zuk.setup?(C$zuo.mix=C$zuo.data.mix+(C$zua[C$zua.length+IkConstraintTimeline.PREV_MIX]-C$zuo.data.mix)*C$zui,C$zuo.softness=C$zuo.data.softness+(C$zua[C$zua.length+IkConstraintTimeline.PREV_SOFTNESS]-C$zuo.data.softness)*C$zui,C$zun==C$zuf.mixOut?(C$zuo.bendDirection=C$zuo.data.bendDirection,C$zuo.compress=C$zuo.data.compress,C$zuo.stretch=C$zuo.data.stretch):(C$zuo.bendDirection=C$zua[C$zua.length+IkConstraintTimeline.PREV_BEND_DIRECTION],C$zuo.compress=0!=C$zua[C$zua.length+IkConstraintTimeline.PREV_COMPRESS],C$zuo.stretch=0!=C$zua[C$zua.length+IkConstraintTimeline.PREV_STRETCH])):(C$zuo.mix+=(C$zua[C$zua.length+IkConstraintTimeline.PREV_MIX]-C$zuo.mix)*C$zui,C$zuo.softness+=(C$zua[C$zua.length+IkConstraintTimeline.PREV_SOFTNESS]-C$zuo.softness)*C$zui,C$zun==C$zuf.mixIn&&(C$zuo.bendDirection=C$zua[C$zua.length+IkConstraintTimeline.PREV_BEND_DIRECTION],C$zuo.compress=0!=C$zua[C$zua.length+IkConstraintTimeline.PREV_COMPRESS],C$zuo.stretch=0!=C$zua[C$zua.length+IkConstraintTimeline.PREV_STRETCH])):(C$zus=C$zua[(C$zut=C$zuz.binarySearch(C$zua,C$zue,IkConstraintTimeline.ENTRIES))+IkConstraintTimeline.PREV_MIX],C$zuc=C$zua[C$zut+IkConstraintTimeline.PREV_SOFTNESS],C$zul=C$zua[C$zut],C$zue=this.getCurvePercent(C$zut/IkConstraintTimeline.ENTRIES-1,1-(C$zue-C$zul)/(C$zua[C$zut+IkConstraintTimeline.PREV_TIME]-C$zul)),C$zur==C$zuk.setup?(C$zuo.mix=C$zuo.data.mix+(C$zus+(C$zua[C$zut+IkConstraintTimeline.MIX]-C$zus)*C$zue-C$zuo.data.mix)*C$zui,C$zuo.softness=C$zuo.data.softness+(C$zuc+(C$zua[C$zut+IkConstraintTimeline.SOFTNESS]-C$zuc)*C$zue-C$zuo.data.softness)*C$zui,C$zun==C$zuf.mixOut?(C$zuo.bendDirection=C$zuo.data.bendDirection,C$zuo.compress=C$zuo.data.compress,C$zuo.stretch=C$zuo.data.stretch):(C$zuo.bendDirection=C$zua[C$zut+IkConstraintTimeline.PREV_BEND_DIRECTION],C$zuo.compress=0!=C$zua[C$zut+IkConstraintTimeline.PREV_COMPRESS],C$zuo.stretch=0!=C$zua[C$zut+IkConstraintTimeline.PREV_STRETCH])):(C$zuo.mix+=(C$zus+(C$zua[C$zut+IkConstraintTimeline.MIX]-C$zus)*C$zue-C$zuo.mix)*C$zui,C$zuo.softness+=(C$zuc+(C$zua[C$zut+IkConstraintTimeline.SOFTNESS]-C$zuc)*C$zue-C$zuo.softness)*C$zui,C$zun==C$zuf.mixIn&&(C$zuo.bendDirection=C$zua[C$zut+IkConstraintTimeline.PREV_BEND_DIRECTION],C$zuo.compress=0!=C$zua[C$zut+IkConstraintTimeline.PREV_COMPRESS],C$zuo.stretch=0!=C$zua[C$zut+IkConstraintTimeline.PREV_STRETCH])))},IkConstraintTimeline.ENTRIES=6,IkConstraintTimeline.PREV_TIME=-6,IkConstraintTimeline.PREV_MIX=-5,IkConstraintTimeline.PREV_SOFTNESS=-4,IkConstraintTimeline.PREV_BEND_DIRECTION=-3,IkConstraintTimeline.PREV_COMPRESS=-2,IkConstraintTimeline.PREV_STRETCH=-1,IkConstraintTimeline.MIX=1,IkConstraintTimeline.SOFTNESS=2,IkConstraintTimeline.BEND_DIRECTION=3,IkConstraintTimeline.COMPRESS=4,IkConstraintTimeline.STRETCH=5;C$zua=IkConstraintTimeline;function IkConstraintTimeline(C$zut){var C$zue=C$zu_.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut*IkConstraintTimeline.ENTRIES),C$zue}var C$zu_;C$zuN.IkConstraintTimeline=C$zua;C$zuy(TransformConstraintTimeline,C$zud=C$zut),TransformConstraintTimeline.prototype.getPropertyId=function(){return(C$zue.transformConstraint<<24)+this.transformConstraintIndex},TransformConstraintTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this.frames[C$zut*=TransformConstraintTimeline.ENTRIES]=C$zue,this.frames[C$zut+TransformConstraintTimeline.ROTATE]=C$zui,this.frames[C$zut+TransformConstraintTimeline.TRANSLATE]=C$zur,this.frames[C$zut+TransformConstraintTimeline.SCALE]=C$zun,this.frames[C$zut+TransformConstraintTimeline.SHEAR]=C$zua},TransformConstraintTimeline.prototype.apply=function(C$zut,C$zuh,C$zue,C$zuu,C$zui,C$zu_,C$zud){var C$zur=this.frames;var C$zun=C$zut.transformConstraints[this.transformConstraintIndex];if(C$zun.active)if(C$zue<C$zur[0]){var C$zua=C$zun.data;switch(C$zu_){case C$zuk.setup:return C$zun.rotateMix=C$zua.rotateMix,C$zun.translateMix=C$zua.translateMix,C$zun.scaleMix=C$zua.scaleMix,void(C$zun.shearMix=C$zua.shearMix);case C$zuk.first:C$zun.rotateMix+=(C$zua.rotateMix-C$zun.rotateMix)*C$zui,C$zun.translateMix+=(C$zua.translateMix-C$zun.translateMix)*C$zui,C$zun.scaleMix+=(C$zua.scaleMix-C$zun.scaleMix)*C$zui,C$zun.shearMix+=(C$zua.shearMix-C$zun.shearMix)*C$zui}}else{var C$zut=0,C$zuo=0,C$zus=0,C$zuc=0;var C$zul,C$zuf;C$zue>=C$zur[C$zur.length-TransformConstraintTimeline.ENTRIES]?(C$zut=C$zur[(C$zul=C$zur.length)+TransformConstraintTimeline.PREV_ROTATE],C$zuo=C$zur[C$zul+TransformConstraintTimeline.PREV_TRANSLATE],C$zus=C$zur[C$zul+TransformConstraintTimeline.PREV_SCALE],C$zuc=C$zur[C$zul+TransformConstraintTimeline.PREV_SHEAR]):(C$zut=C$zur[(C$zul=C$zuz.binarySearch(C$zur,C$zue,TransformConstraintTimeline.ENTRIES))+TransformConstraintTimeline.PREV_ROTATE],C$zuo=C$zur[C$zul+TransformConstraintTimeline.PREV_TRANSLATE],C$zus=C$zur[C$zul+TransformConstraintTimeline.PREV_SCALE],C$zuc=C$zur[C$zul+TransformConstraintTimeline.PREV_SHEAR],C$zuf=C$zur[C$zul],C$zue=this.getCurvePercent(C$zul/TransformConstraintTimeline.ENTRIES-1,1-(C$zue-C$zuf)/(C$zur[C$zul+TransformConstraintTimeline.PREV_TIME]-C$zuf)),C$zut+=(C$zur[C$zul+TransformConstraintTimeline.ROTATE]-C$zut)*C$zue,C$zuo+=(C$zur[C$zul+TransformConstraintTimeline.TRANSLATE]-C$zuo)*C$zue,C$zus+=(C$zur[C$zul+TransformConstraintTimeline.SCALE]-C$zus)*C$zue,C$zuc+=(C$zur[C$zul+TransformConstraintTimeline.SHEAR]-C$zuc)*C$zue),C$zu_==C$zuk.setup?(C$zua=C$zun.data,C$zun.rotateMix=C$zua.rotateMix+(C$zut-C$zua.rotateMix)*C$zui,C$zun.translateMix=C$zua.translateMix+(C$zuo-C$zua.translateMix)*C$zui,C$zun.scaleMix=C$zua.scaleMix+(C$zus-C$zua.scaleMix)*C$zui,C$zun.shearMix=C$zua.shearMix+(C$zuc-C$zua.shearMix)*C$zui):(C$zun.rotateMix+=(C$zut-C$zun.rotateMix)*C$zui,C$zun.translateMix+=(C$zuo-C$zun.translateMix)*C$zui,C$zun.scaleMix+=(C$zus-C$zun.scaleMix)*C$zui,C$zun.shearMix+=(C$zuc-C$zun.shearMix)*C$zui)}},TransformConstraintTimeline.ENTRIES=5,TransformConstraintTimeline.PREV_TIME=-5,TransformConstraintTimeline.PREV_ROTATE=-4,TransformConstraintTimeline.PREV_TRANSLATE=-3,TransformConstraintTimeline.PREV_SCALE=-2,TransformConstraintTimeline.PREV_SHEAR=-1,TransformConstraintTimeline.ROTATE=1,TransformConstraintTimeline.TRANSLATE=2,TransformConstraintTimeline.SCALE=3,TransformConstraintTimeline.SHEAR=4;C$zui=TransformConstraintTimeline;function TransformConstraintTimeline(C$zut){var C$zue=C$zud.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut*TransformConstraintTimeline.ENTRIES),C$zue}var C$zud;C$zuN.TransformConstraintTimeline=C$zui;C$zuy(PathConstraintPositionTimeline,C$zup=C$zut),PathConstraintPositionTimeline.prototype.getPropertyId=function(){return(C$zue.pathConstraintPosition<<24)+this.pathConstraintIndex},PathConstraintPositionTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui){this.frames[C$zut*=PathConstraintPositionTimeline.ENTRIES]=C$zue,this.frames[C$zut+PathConstraintPositionTimeline.VALUE]=C$zui},PathConstraintPositionTimeline.prototype.apply=function(C$zut,C$zue,C$zui,C$zul,C$zur,C$zun,C$zuh){var C$zua=this.frames;var C$zuo=C$zut.pathConstraints[this.pathConstraintIndex];if(C$zuo.active)if(C$zui<C$zua[0])switch(C$zun){case C$zuk.setup:return void(C$zuo.position=C$zuo.data.position);case C$zuk.first:C$zuo.position+=(C$zuo.data.position-C$zuo.position)*C$zur}else{C$zut=0;var C$zus,C$zuc;C$zui>=C$zua[C$zua.length-PathConstraintPositionTimeline.ENTRIES]?C$zut=C$zua[C$zua.length+PathConstraintPositionTimeline.PREV_VALUE]:(C$zut=C$zua[(C$zus=C$zuz.binarySearch(C$zua,C$zui,PathConstraintPositionTimeline.ENTRIES))+PathConstraintPositionTimeline.PREV_VALUE],C$zuc=C$zua[C$zus],C$zui=this.getCurvePercent(C$zus/PathConstraintPositionTimeline.ENTRIES-1,1-(C$zui-C$zuc)/(C$zua[C$zus+PathConstraintPositionTimeline.PREV_TIME]-C$zuc)),C$zut+=(C$zua[C$zus+PathConstraintPositionTimeline.VALUE]-C$zut)*C$zui),C$zun==C$zuk.setup?C$zuo.position=C$zuo.data.position+(C$zut-C$zuo.data.position)*C$zur:C$zuo.position+=(C$zut-C$zuo.position)*C$zur}},PathConstraintPositionTimeline.ENTRIES=2,PathConstraintPositionTimeline.PREV_TIME=-2,PathConstraintPositionTimeline.PREV_VALUE=-1,PathConstraintPositionTimeline.VALUE=1;C$zua=PathConstraintPositionTimeline;function PathConstraintPositionTimeline(C$zut){var C$zue=C$zup.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut*PathConstraintPositionTimeline.ENTRIES),C$zue}var C$zup;C$zuN.PathConstraintPositionTimeline=C$zua;C$zuy(PathConstraintSpacingTimeline,C$zum=C$zua),PathConstraintSpacingTimeline.prototype.getPropertyId=function(){return(C$zue.pathConstraintSpacing<<24)+this.pathConstraintIndex},PathConstraintSpacingTimeline.prototype.apply=function(C$zut,C$zue,C$zui,C$zul,C$zur,C$zun,C$zuh){var C$zua=this.frames;var C$zuo=C$zut.pathConstraints[this.pathConstraintIndex];if(C$zuo.active)if(C$zui<C$zua[0])switch(C$zun){case C$zuk.setup:return void(C$zuo.spacing=C$zuo.data.spacing);case C$zuk.first:C$zuo.spacing+=(C$zuo.data.spacing-C$zuo.spacing)*C$zur}else{C$zut=0;var C$zus,C$zuc;C$zui>=C$zua[C$zua.length-PathConstraintSpacingTimeline.ENTRIES]?C$zut=C$zua[C$zua.length+PathConstraintSpacingTimeline.PREV_VALUE]:(C$zut=C$zua[(C$zus=C$zuz.binarySearch(C$zua,C$zui,PathConstraintSpacingTimeline.ENTRIES))+PathConstraintSpacingTimeline.PREV_VALUE],C$zuc=C$zua[C$zus],C$zui=this.getCurvePercent(C$zus/PathConstraintSpacingTimeline.ENTRIES-1,1-(C$zui-C$zuc)/(C$zua[C$zus+PathConstraintSpacingTimeline.PREV_TIME]-C$zuc)),C$zut+=(C$zua[C$zus+PathConstraintSpacingTimeline.VALUE]-C$zut)*C$zui),C$zun==C$zuk.setup?C$zuo.spacing=C$zuo.data.spacing+(C$zut-C$zuo.data.spacing)*C$zur:C$zuo.spacing+=(C$zut-C$zuo.spacing)*C$zur}};C$zui=PathConstraintSpacingTimeline;function PathConstraintSpacingTimeline(C$zut){return C$zum.call(this,C$zut)||this}var C$zum;C$zuN.PathConstraintSpacingTimeline=C$zui;C$zuy(PathConstraintMixTimeline,C$zuv=C$zut),PathConstraintMixTimeline.prototype.getPropertyId=function(){return(C$zue.pathConstraintMix<<24)+this.pathConstraintIndex},PathConstraintMixTimeline.prototype.setFrame=function(C$zut,C$zue,C$zui,C$zur){this.frames[C$zut*=PathConstraintMixTimeline.ENTRIES]=C$zue,this.frames[C$zut+PathConstraintMixTimeline.ROTATE]=C$zui,this.frames[C$zut+PathConstraintMixTimeline.TRANSLATE]=C$zur},PathConstraintMixTimeline.prototype.apply=function(C$zut,C$zul,C$zue,C$zuh,C$zui,C$zur,C$zuu){var C$zun=this.frames;var C$zua=C$zut.pathConstraints[this.pathConstraintIndex];if(C$zua.active)if(C$zue<C$zun[0])switch(C$zur){case C$zuk.setup:return C$zua.rotateMix=C$zua.data.rotateMix,void(C$zua.translateMix=C$zua.data.translateMix);case C$zuk.first:C$zua.rotateMix+=(C$zua.data.rotateMix-C$zua.rotateMix)*C$zui,C$zua.translateMix+=(C$zua.data.translateMix-C$zua.translateMix)*C$zui}else{var C$zut=0,C$zuo=0;var C$zus,C$zuc;C$zue>=C$zun[C$zun.length-PathConstraintMixTimeline.ENTRIES]?(C$zut=C$zun[C$zun.length+PathConstraintMixTimeline.PREV_ROTATE],C$zuo=C$zun[C$zun.length+PathConstraintMixTimeline.PREV_TRANSLATE]):(C$zut=C$zun[(C$zus=C$zuz.binarySearch(C$zun,C$zue,PathConstraintMixTimeline.ENTRIES))+PathConstraintMixTimeline.PREV_ROTATE],C$zuo=C$zun[C$zus+PathConstraintMixTimeline.PREV_TRANSLATE],C$zuc=C$zun[C$zus],C$zue=this.getCurvePercent(C$zus/PathConstraintMixTimeline.ENTRIES-1,1-(C$zue-C$zuc)/(C$zun[C$zus+PathConstraintMixTimeline.PREV_TIME]-C$zuc)),C$zut+=(C$zun[C$zus+PathConstraintMixTimeline.ROTATE]-C$zut)*C$zue,C$zuo+=(C$zun[C$zus+PathConstraintMixTimeline.TRANSLATE]-C$zuo)*C$zue),C$zur==C$zuk.setup?(C$zua.rotateMix=C$zua.data.rotateMix+(C$zut-C$zua.data.rotateMix)*C$zui,C$zua.translateMix=C$zua.data.translateMix+(C$zuo-C$zua.data.translateMix)*C$zui):(C$zua.rotateMix+=(C$zut-C$zua.rotateMix)*C$zui,C$zua.translateMix+=(C$zuo-C$zua.translateMix)*C$zui)}},PathConstraintMixTimeline.ENTRIES=3,PathConstraintMixTimeline.PREV_TIME=-3,PathConstraintMixTimeline.PREV_ROTATE=-2,PathConstraintMixTimeline.PREV_TRANSLATE=-1,PathConstraintMixTimeline.ROTATE=1,PathConstraintMixTimeline.TRANSLATE=2;C$zua=PathConstraintMixTimeline;function PathConstraintMixTimeline(C$zut){var C$zue=C$zuv.call(this,C$zut)||this;return C$zue.frames=C$zuN.Utils.newFloatArray(C$zut*PathConstraintMixTimeline.ENTRIES),C$zue}var C$zuv;C$zuN.PathConstraintMixTimeline=C$zua}(C$zur=C$zur||{}),function(C$zuS){AnimationState.prototype.update=function(C$zut){C$zut*=this.timeScale;var C$zue=this.tracks;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(null!=C$zun){C$zun.animationLast=C$zun.nextAnimationLast,C$zun.trackLast=C$zun.nextTrackLast;var C$zua=C$zut*C$zun.timeScale;if(0<C$zun.delay){if(C$zun.delay-=C$zua,0<C$zun.delay)continue;C$zua=-C$zun.delay,C$zun.delay=0}var C$zuo=C$zun.next;if(null!=C$zuo){var C$zus=C$zun.trackLast-C$zuo.delay;if(0<=C$zus){for(C$zuo.delay=0,C$zuo.trackTime+=0==C$zun.timeScale?0:(C$zus/C$zun.timeScale+C$zut)*C$zuo.timeScale,C$zun.trackTime+=C$zua,this.setCurrent(C$zui,C$zuo,!0);null!=C$zuo.mixingFrom;)C$zuo.mixTime+=C$zut,C$zuo=C$zuo.mixingFrom;continue}}else if(C$zun.trackLast>=C$zun.trackEnd&&null==C$zun.mixingFrom){C$zue[C$zui]=null,this.queue.end(C$zun),this.disposeNext(C$zun);continue}if(null!=C$zun.mixingFrom&&this.updateMixingFrom(C$zun,C$zut)){var C$zuc=C$zun.mixingFrom;for((C$zun.mixingFrom=null)!=C$zuc&&(C$zuc.mixingTo=null);null!=C$zuc;)this.queue.end(C$zuc),C$zuc=C$zuc.mixingFrom}C$zun.trackTime+=C$zua}}this.queue.drain()},AnimationState.prototype.updateMixingFrom=function(C$zut,C$zue){var C$zui=C$zut.mixingFrom;if(null==C$zui)return!0;var C$zur=this.updateMixingFrom(C$zui,C$zue);return C$zui.animationLast=C$zui.nextAnimationLast,C$zui.trackLast=C$zui.nextTrackLast,0<C$zut.mixTime&&C$zut.mixTime>=C$zut.mixDuration?(0!=C$zui.totalAlpha&&0!=C$zut.mixDuration||(C$zut.mixingFrom=C$zui.mixingFrom,null!=C$zui.mixingFrom&&(C$zui.mixingFrom.mixingTo=C$zut),C$zut.interruptAlpha=C$zui.interruptAlpha,this.queue.end(C$zui)),C$zur):(C$zui.trackTime+=C$zue*C$zui.timeScale,C$zut.mixTime+=C$zue,!1)},AnimationState.prototype.apply=function(C$zut){if(null==C$zut)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();var C$zue=this.events;var C$zuh=this.tracks;var C$zuu=!1;for(var C$zui=0,C$zu_=C$zuh.length;C$zui<C$zu_;C$zui++){var C$zur=C$zuh[C$zui];if(!(null==C$zur||0<C$zur.delay)){C$zuu=!0;var C$zun=0==C$zui?C$zuS.MixBlend.first:C$zur.mixBlend;var C$zua=C$zur.alpha;null!=C$zur.mixingFrom?C$zua*=this.applyMixingFrom(C$zur,C$zut,C$zun):C$zur.trackTime>=C$zur.trackEnd&&null==C$zur.next&&(C$zua=0);var C$zud=C$zur.animationLast,C$zuo=C$zur.getAnimationTime();var C$zus=C$zur.animation.timelines.length;var C$zuf=C$zur.animation.timelines;if(0==C$zui&&1==C$zua||C$zun==C$zuS.MixBlend.add)for(var C$zuc=0;C$zuc<C$zus;C$zuc++)C$zuS.Utils.webkit602BugfixHelper(C$zua,C$zun),C$zuf[C$zuc].apply(C$zut,C$zud,C$zuo,C$zue,C$zua,C$zun,C$zuS.MixDirection.mixIn);else{var C$zup=C$zur.timelineMode;var C$zum=0==C$zur.timelinesRotation.length;C$zum&&C$zuS.Utils.setArraySize(C$zur.timelinesRotation,C$zus<<1,null);var C$zuv=C$zur.timelinesRotation;for(C$zuc=0;C$zuc<C$zus;C$zuc++){var C$zul=C$zuf[C$zuc];var C$zuy=(C$zup[C$zuc]&AnimationState.NOT_LAST-1)==AnimationState.SUBSEQUENT?C$zun:C$zuS.MixBlend.setup;C$zul instanceof C$zuS.RotateTimeline?this.applyRotateTimeline(C$zul,C$zut,C$zuo,C$zua,C$zuy,C$zuv,C$zuc<<1,C$zum):(C$zuS.Utils.webkit602BugfixHelper(C$zua,C$zun),C$zul.apply(C$zut,C$zud,C$zuo,C$zue,C$zua,C$zuy,C$zuS.MixDirection.mixIn))}}this.queueEvents(C$zur,C$zuo),C$zue.length=0,C$zur.nextAnimationLast=C$zuo,C$zur.nextTrackLast=C$zur.trackTime}}return this.queue.drain(),C$zuu},AnimationState.prototype.applyMixingFrom=function(C$zut,C$zue,C$zui){var C$zur=C$zut.mixingFrom;null!=C$zur.mixingFrom&&this.applyMixingFrom(C$zur,C$zue,C$zui);var C$zun=0;0==C$zut.mixDuration?(C$zun=1,C$zui==C$zuS.MixBlend.first&&(C$zui=C$zuS.MixBlend.setup)):(1<(C$zun=C$zut.mixTime/C$zut.mixDuration)&&(C$zun=1),C$zui!=C$zuS.MixBlend.first&&(C$zui=C$zur.mixBlend));var C$zuh=C$zun<C$zur.eventThreshold?this.events:null;var C$zuu=C$zun<C$zur.attachmentThreshold,C$zu_=C$zun<C$zur.drawOrderThreshold;var C$zud=C$zur.animationLast,C$zua=C$zur.getAnimationTime();var C$zuf=C$zur.animation.timelines.length;var C$zup=C$zur.animation.timelines;var C$zum=C$zur.alpha*C$zut.interruptAlpha,C$zuv=C$zum*(1-C$zun);if(C$zui==C$zuS.MixBlend.add)for(var C$zuo=0;C$zuo<C$zuf;C$zuo++)C$zup[C$zuo].apply(C$zue,C$zud,C$zua,C$zuh,C$zuv,C$zui,C$zuS.MixDirection.mixOut);else{var C$zuy=C$zur.timelineMode;var C$zug=C$zur.timelineHoldMix;var C$zub=0==C$zur.timelinesRotation.length;C$zub&&C$zuS.Utils.setArraySize(C$zur.timelinesRotation,C$zuf<<1,null);var C$zuC=C$zur.timelinesRotation;for(C$zuo=C$zur.totalAlpha=0;C$zuo<C$zuf;C$zuo++){var C$zus=C$zup[C$zuo];var C$zux=C$zuS.MixDirection.mixOut;var C$zuc=void 0;var C$zul=0;switch(C$zuy[C$zuo]&AnimationState.NOT_LAST-1){case AnimationState.SUBSEQUENT:if(C$zuc=C$zui,!C$zuu&&C$zus instanceof C$zuS.AttachmentTimeline){if((C$zuy[C$zuo]&AnimationState.NOT_LAST)==AnimationState.NOT_LAST)continue;C$zuc=C$zuS.MixBlend.setup}if(!C$zu_&&C$zus instanceof C$zuS.DrawOrderTimeline)continue;C$zul=C$zuv;break;case AnimationState.FIRST:C$zuc=C$zuS.MixBlend.setup,C$zul=C$zuv;break;case AnimationState.HOLD:C$zuc=C$zuS.MixBlend.setup,C$zul=C$zum;break;default:C$zuc=C$zuS.MixBlend.setup;var C$zuA=C$zug[C$zuo];C$zul=C$zum*Math.max(0,1-C$zuA.mixTime/C$zuA.mixDuration)}C$zur.totalAlpha+=C$zul,C$zus instanceof C$zuS.RotateTimeline?this.applyRotateTimeline(C$zus,C$zue,C$zua,C$zul,C$zuc,C$zuC,C$zuo<<1,C$zub):(C$zuS.Utils.webkit602BugfixHelper(C$zul,C$zui),C$zuc==C$zuS.MixBlend.setup&&(C$zus instanceof C$zuS.AttachmentTimeline?!C$zuu&&(C$zuy[C$zuo]&AnimationState.NOT_LAST)!=AnimationState.NOT_LAST||(C$zux=C$zuS.MixDirection.mixIn):C$zus instanceof C$zuS.DrawOrderTimeline&&C$zu_&&(C$zux=C$zuS.MixDirection.mixIn)),C$zus.apply(C$zue,C$zud,C$zua,C$zuh,C$zul,C$zuc,C$zux))}}return 0<C$zut.mixDuration&&this.queueEvents(C$zur,C$zua),this.events.length=0,C$zur.nextAnimationLast=C$zua,C$zur.nextTrackLast=C$zur.trackTime,C$zun},AnimationState.prototype.applyRotateTimeline=function(C$zuh,C$zuu,C$zut,C$zu_,C$zud,C$zue,C$zui,C$zuf){if(C$zuf&&(C$zue[C$zui]=0),1!=C$zu_){var C$zur=C$zuh;var C$zun=C$zur.frames;var C$zua=C$zuu.bones[C$zur.boneIndex];if(C$zua.active){var C$zup=0,C$zuo=0;if(C$zut<C$zun[0])switch(C$zud){case C$zuS.MixBlend.setup:C$zua.rotation=C$zua.data.rotation;default:return;case C$zuS.MixBlend.first:C$zup=C$zua.rotation,C$zuo=C$zua.data.rotation}else C$zup=(C$zud==C$zuS.MixBlend.setup?C$zua.data:C$zua).rotation,C$zut>=C$zun[C$zun.length-C$zuS.RotateTimeline.ENTRIES]?C$zuo=C$zua.data.rotation+C$zun[C$zun.length+C$zuS.RotateTimeline.PREV_ROTATION]:(C$zul=C$zun[(C$zuc=C$zuS.Animation.binarySearch(C$zun,C$zut,C$zuS.RotateTimeline.ENTRIES))+C$zuS.RotateTimeline.PREV_ROTATION],C$zus=C$zun[C$zuc],C$zur=C$zur.getCurvePercent((C$zuc>>1)-1,1-(C$zut-C$zus)/(C$zun[C$zuc+C$zuS.RotateTimeline.PREV_TIME]-C$zus)),C$zuo=C$zun[C$zuc+C$zuS.RotateTimeline.ROTATION]-C$zul,C$zuo=C$zul+(C$zuo-=360*(16384-(16384.499999999996-C$zuo/360|0)))*C$zur+C$zua.data.rotation,C$zuo-=360*(16384-(16384.499999999996-C$zuo/360|0)));var C$zus=0,C$zun=C$zuo-C$zup;var C$zuc,C$zul;0==(C$zun-=360*(16384-(16384.499999999996-C$zun/360|0)))?C$zus=C$zue[C$zui]:(C$zul=C$zuc=0,C$zul=C$zuf?(C$zuc=0,C$zun):(C$zuc=C$zue[C$zui],C$zue[C$zui+1]),C$zur=0<C$zun,C$zuf=0<=C$zuc,C$zuS.MathUtils.signum(C$zul)!=C$zuS.MathUtils.signum(C$zun)&&Math.abs(C$zul)<=90&&(180<Math.abs(C$zuc)&&(C$zuc+=360*C$zuS.MathUtils.signum(C$zuc)),C$zuf=C$zur),C$zus=C$zun+C$zuc-C$zuc%360,C$zuf!=C$zur&&(C$zus+=360*C$zuS.MathUtils.signum(C$zuc)),C$zue[C$zui]=C$zus),C$zue[C$zui+1]=C$zun,C$zua.rotation=(C$zup+=C$zus*C$zu_)-360*(16384-(16384.499999999996-C$zup/360|0))}}else C$zuh.apply(C$zuu,0,C$zut,null,1,C$zud,C$zuS.MixDirection.mixIn)},AnimationState.prototype.queueEvents=function(C$zut,C$zue){var C$zui=C$zut.animationStart,C$zur=C$zut.animationEnd;var C$zun=C$zur-C$zui;var C$zua=C$zut.trackLast%C$zun;var C$zuo=this.events;var C$zus=0,C$zuc=C$zuo.length;for(;C$zus<C$zuc;C$zus++){var C$zul=C$zuo[C$zus];if(C$zul.time<C$zua)break;C$zul.time>C$zur||this.queue.event(C$zut,C$zul)}for((C$zut.loop?0==C$zun||C$zua>C$zut.trackTime%C$zun:C$zur<=C$zue&&C$zut.animationLast<C$zur)&&this.queue.complete(C$zut);C$zus<C$zuc;C$zus++)C$zuo[C$zus].time<C$zui||this.queue.event(C$zut,C$zuo[C$zus])},AnimationState.prototype.clearTracks=function(){var C$zut=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var C$zue=0,C$zui=this.tracks.length;C$zue<C$zui;C$zue++)this.clearTrack(C$zue);this.tracks.length=0,this.queue.drainDisabled=C$zut,this.queue.drain()},AnimationState.prototype.clearTrack=function(C$zut){if(!(C$zut>=this.tracks.length)){C$zut=this.tracks[C$zut];if(null!=C$zut){this.queue.end(C$zut),this.disposeNext(C$zut);var C$zue=C$zut;for(;;){var C$zui=C$zue.mixingFrom;if(null==C$zui)break;this.queue.end(C$zui),C$zue.mixingFrom=null,C$zue.mixingTo=null,C$zue=C$zui}this.tracks[C$zut.trackIndex]=null,this.queue.drain()}}},AnimationState.prototype.setCurrent=function(C$zut,C$zue,C$zui){var C$zur=this.expandToIndex(C$zut);this.tracks[C$zut]=C$zue,null!=C$zur&&(C$zui&&this.queue.interrupt(C$zur),((C$zue.mixingFrom=C$zur).mixingTo=C$zue).mixTime=0,null!=C$zur.mixingFrom&&0<C$zur.mixDuration&&(C$zue.interruptAlpha*=Math.min(1,C$zur.mixTime/C$zur.mixDuration)),C$zur.timelinesRotation.length=0),this.queue.start(C$zue)},AnimationState.prototype.setAnimation=function(C$zut,C$zue,C$zui){var C$zur=this.data.skeletonData.findAnimation(C$zue);if(null==C$zur)throw new Error("Animation not found: "+C$zue);return this.setAnimationWith(C$zut,C$zur,C$zui)},AnimationState.prototype.setAnimationWith=function(C$zut,C$zue,C$zui){if(null==C$zue)throw new Error("animation cannot be null.");var C$zur=!0;var C$zun=this.expandToIndex(C$zut);null!=C$zun&&(-1==C$zun.nextTrackLast?(this.tracks[C$zut]=C$zun.mixingFrom,this.queue.interrupt(C$zun),this.queue.end(C$zun),this.disposeNext(C$zun),C$zun=C$zun.mixingFrom,C$zur=!1):this.disposeNext(C$zun));C$zue=this.trackEntry(C$zut,C$zue,C$zui,C$zun);return this.setCurrent(C$zut,C$zue,C$zur),this.queue.drain(),C$zue},AnimationState.prototype.addAnimation=function(C$zut,C$zue,C$zui,C$zur){var C$zun=this.data.skeletonData.findAnimation(C$zue);if(null==C$zun)throw new Error("Animation not found: "+C$zue);return this.addAnimationWith(C$zut,C$zun,C$zui,C$zur)},AnimationState.prototype.addAnimationWith=function(C$zut,C$zue,C$zui,C$zur){if(null==C$zue)throw new Error("animation cannot be null.");var C$zun=this.expandToIndex(C$zut);if(null!=C$zun)for(;null!=C$zun.next;)C$zun=C$zun.next;C$zui=this.trackEntry(C$zut,C$zue,C$zui,C$zun);return null==C$zun?(this.setCurrent(C$zut,C$zui,!0),this.queue.drain()):(C$zun.next=C$zui,C$zur<=0&&(0!=(C$zut=C$zun.animationEnd-C$zun.animationStart)?(C$zun.loop?C$zur+=C$zut*(1+(C$zun.trackTime/C$zut|0)):C$zur+=Math.max(C$zut,C$zun.trackTime),C$zur-=this.data.getMix(C$zun.animation,C$zue)):C$zur=C$zun.trackTime)),C$zui.delay=C$zur,C$zui},AnimationState.prototype.setEmptyAnimation=function(C$zut,C$zue){C$zut=this.setAnimationWith(C$zut,AnimationState.emptyAnimation,!1);return C$zut.mixDuration=C$zue,C$zut.trackEnd=C$zue,C$zut},AnimationState.prototype.addEmptyAnimation=function(C$zut,C$zue,C$zui){C$zui<=0&&(C$zui-=C$zue);C$zut=this.addAnimationWith(C$zut,AnimationState.emptyAnimation,!1,C$zui);return C$zut.mixDuration=C$zue,C$zut.trackEnd=C$zue,C$zut},AnimationState.prototype.setEmptyAnimations=function(C$zut){var C$zue=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var C$zui=0,C$zur=this.tracks.length;C$zui<C$zur;C$zui++){var C$zun=this.tracks[C$zui];null!=C$zun&&this.setEmptyAnimation(C$zun.trackIndex,C$zut)}this.queue.drainDisabled=C$zue,this.queue.drain()},AnimationState.prototype.expandToIndex=function(C$zut){return C$zut<this.tracks.length?this.tracks[C$zut]:(C$zuS.Utils.ensureArrayCapacity(this.tracks,C$zut+1,null),this.tracks.length=C$zut+1,null)},AnimationState.prototype.trackEntry=function(C$zut,C$zue,C$zui,C$zur){var C$zun=this.trackEntryPool.obtain();return C$zun.trackIndex=C$zut,C$zun.animation=C$zue,C$zun.loop=C$zui,C$zun.holdPrevious=!1,C$zun.eventThreshold=0,C$zun.attachmentThreshold=0,C$zun.drawOrderThreshold=0,C$zun.animationStart=0,C$zun.animationEnd=C$zue.duration,C$zun.animationLast=-1,C$zun.nextAnimationLast=-1,C$zun.delay=0,C$zun.trackTime=0,C$zun.trackLast=-1,C$zun.nextTrackLast=-1,C$zun.trackEnd=Number.MAX_VALUE,C$zun.timeScale=1,C$zun.alpha=1,C$zun.interruptAlpha=1,C$zun.mixTime=0,C$zun.mixDuration=null==C$zur?0:this.data.getMix(C$zur.animation,C$zue),C$zun},AnimationState.prototype.disposeNext=function(C$zut){var C$zue=C$zut.next;for(;null!=C$zue;)this.queue.dispose(C$zue),C$zue=C$zue.next;C$zut.next=null},AnimationState.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var C$zut=0,C$zue=this.tracks.length;C$zut<C$zue;C$zut++)if(null!=(C$zui=this.tracks[C$zut])){for(;null!=C$zui.mixingFrom;)C$zui=C$zui.mixingFrom;for(;null!=C$zui.mixingFrom&&C$zui.mixBlend==C$zuS.MixBlend.add||this.computeHold(C$zui),null!=(C$zui=C$zui.mixingTo););}this.propertyIDs.clear();for(C$zut=this.tracks.length-1;0<=C$zut;C$zut--){var C$zui=this.tracks[C$zut];for(;null!=C$zui;)this.computeNotLast(C$zui),C$zui=C$zui.mixingFrom}},AnimationState.prototype.computeHold=function(C$zut){var C$zue=C$zut.mixingTo;var C$zui=C$zut.animation.timelines;var C$zur=C$zut.animation.timelines.length;var C$zun=C$zuS.Utils.setArraySize(C$zut.timelineMode,C$zur);C$zut.timelineHoldMix.length=0;var C$zuh=C$zuS.Utils.setArraySize(C$zut.timelineHoldMix,C$zur);var C$zua=this.propertyIDs;if(null!=C$zue&&C$zue.holdPrevious)for(var C$zuo=0;C$zuo<C$zur;C$zuo++)C$zua.add(C$zui[C$zuo].getPropertyId()),C$zun[C$zuo]=AnimationState.HOLD;else C$zut:for(C$zuo=0;C$zuo<C$zur;C$zuo++){var C$zus=C$zui[C$zuo];var C$zuc=C$zus.getPropertyId();if(C$zua.add(C$zuc))if(null==C$zue||C$zus instanceof C$zuS.AttachmentTimeline||C$zus instanceof C$zuS.DrawOrderTimeline||C$zus instanceof C$zuS.EventTimeline||!C$zue.animation.hasTimeline(C$zuc))C$zun[C$zuo]=AnimationState.FIRST;else{for(var C$zul=C$zue.mixingTo;null!=C$zul;C$zul=C$zul.mixingTo)if(!C$zul.animation.hasTimeline(C$zuc)){if(0<C$zut.mixDuration){C$zun[C$zuo]=AnimationState.HOLD_MIX,C$zuh[C$zuo]=C$zul;continue C$zut}break}C$zun[C$zuo]=AnimationState.HOLD}else C$zun[C$zuo]=AnimationState.SUBSEQUENT}},AnimationState.prototype.computeNotLast=function(C$zut){var C$zue=C$zut.animation.timelines;var C$zui=C$zut.animation.timelines.length;var C$zur=C$zut.timelineMode;var C$zun=this.propertyIDs;for(var C$zua=0;C$zua<C$zui;C$zua++){var C$zuo;C$zue[C$zua]instanceof C$zuS.AttachmentTimeline&&(C$zuo=C$zue[C$zua],C$zun.add(C$zuo.slotIndex)||(C$zur[C$zua]|=AnimationState.NOT_LAST))}},AnimationState.prototype.getCurrent=function(C$zut){return C$zut>=this.tracks.length?null:this.tracks[C$zut]},AnimationState.prototype.addListener=function(C$zut){if(null==C$zut)throw new Error("listener cannot be null.");this.listeners.push(C$zut)},AnimationState.prototype.removeListener=function(C$zut){C$zut=this.listeners.indexOf(C$zut);0<=C$zut&&this.listeners.splice(C$zut,1)},AnimationState.prototype.clearListeners=function(){this.listeners.length=0},AnimationState.prototype.clearListenerNotifications=function(){this.queue.clear()},AnimationState.emptyAnimation=new C$zuS.Animation("<empty>",[],0),AnimationState.SUBSEQUENT=0,AnimationState.FIRST=1,AnimationState.HOLD=2,AnimationState.HOLD_MIX=3,AnimationState.NOT_LAST=4;var C$zut=AnimationState;function AnimationState(C$zut){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new C$zui(this),this.propertyIDs=new C$zuS.IntSet,this.animationsChanged=!1,this.trackEntryPool=new C$zuS.Pool(function(){return new C$zue}),this.data=C$zut}C$zuS.AnimationState=C$zut;TrackEntry.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},TrackEntry.prototype.getAnimationTime=function(){var C$zut;return this.loop?0==(C$zut=this.animationEnd-this.animationStart)?this.animationStart:this.trackTime%C$zut+this.animationStart:Math.min(this.trackTime+this.animationStart,this.animationEnd)},TrackEntry.prototype.setAnimationLast=function(C$zut){this.animationLast=C$zut,this.nextAnimationLast=C$zut},TrackEntry.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},TrackEntry.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0};var C$zue=TrackEntry;function TrackEntry(){this.mixBlend=C$zuS.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}C$zuS.TrackEntry=C$zue;EventQueue.prototype.start=function(C$zut){this.objects.push(C$zus.start),this.objects.push(C$zut),this.animState.animationsChanged=!0},EventQueue.prototype.interrupt=function(C$zut){this.objects.push(C$zus.interrupt),this.objects.push(C$zut)},EventQueue.prototype.end=function(C$zut){this.objects.push(C$zus.end),this.objects.push(C$zut),this.animState.animationsChanged=!0},EventQueue.prototype.dispose=function(C$zut){this.objects.push(C$zus.dispose),this.objects.push(C$zut)},EventQueue.prototype.complete=function(C$zut){this.objects.push(C$zus.complete),this.objects.push(C$zut)},EventQueue.prototype.event=function(C$zut,C$zue){this.objects.push(C$zus.event),this.objects.push(C$zut),this.objects.push(C$zue)},EventQueue.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;var C$zut=this.objects;var C$zue=this.animState.listeners;for(var C$zui=0;C$zui<C$zut.length;C$zui+=2){var C$zur=C$zut[C$zui];var C$zun=C$zut[C$zui+1];switch(C$zur){case C$zus.start:null!=C$zun.listener&&C$zun.listener.start&&C$zun.listener.start(C$zun);for(var C$zua=0;C$zua<C$zue.length;C$zua++)C$zue[C$zua].start&&C$zue[C$zua].start(C$zun);break;case C$zus.interrupt:null!=C$zun.listener&&C$zun.listener.interrupt&&C$zun.listener.interrupt(C$zun);for(C$zua=0;C$zua<C$zue.length;C$zua++)C$zue[C$zua].interrupt&&C$zue[C$zua].interrupt(C$zun);break;case C$zus.end:null!=C$zun.listener&&C$zun.listener.end&&C$zun.listener.end(C$zun);for(C$zua=0;C$zua<C$zue.length;C$zua++)C$zue[C$zua].end&&C$zue[C$zua].end(C$zun);case C$zus.dispose:null!=C$zun.listener&&C$zun.listener.dispose&&C$zun.listener.dispose(C$zun);for(C$zua=0;C$zua<C$zue.length;C$zua++)C$zue[C$zua].dispose&&C$zue[C$zua].dispose(C$zun);this.animState.trackEntryPool.free(C$zun);break;case C$zus.complete:null!=C$zun.listener&&C$zun.listener.complete&&C$zun.listener.complete(C$zun);for(C$zua=0;C$zua<C$zue.length;C$zua++)C$zue[C$zua].complete&&C$zue[C$zua].complete(C$zun);break;case C$zus.event:var C$zuo=C$zut[2+C$zui++];null!=C$zun.listener&&C$zun.listener.event&&C$zun.listener.event(C$zun,C$zuo);for(C$zua=0;C$zua<C$zue.length;C$zua++)C$zue[C$zua].event&&C$zue[C$zua].event(C$zun,C$zuo)}}this.clear(),this.drainDisabled=!1}},EventQueue.prototype.clear=function(){this.objects.length=0};var C$zui=EventQueue;function EventQueue(C$zut){this.objects=[],this.drainDisabled=!1,this.animState=C$zut}var C$zus;function AnimationStateAdapter(){}C$zuS.EventQueue=C$zui,(C$zut=C$zus=C$zuS.EventType||(C$zuS.EventType={}))[C$zut.start=0]="start",C$zut[C$zut.interrupt=1]="interrupt",C$zut[C$zut.end=2]="end",C$zut[C$zut.dispose=3]="dispose",C$zut[C$zut.complete=4]="complete",C$zut[C$zut.event=5]="event",AnimationStateAdapter.prototype.start=function(C$zut){},AnimationStateAdapter.prototype.interrupt=function(C$zut){},AnimationStateAdapter.prototype.end=function(C$zut){},AnimationStateAdapter.prototype.dispose=function(C$zut){},AnimationStateAdapter.prototype.complete=function(C$zut){},AnimationStateAdapter.prototype.event=function(C$zut,C$zue){},C$zuS.AnimationStateAdapter=AnimationStateAdapter}(C$zur=C$zur||{}),function(C$zut){function AnimationStateData(C$zut){if(this.animationToMixTime={},this.defaultMix=0,null==C$zut)throw new Error("skeletonData cannot be null.");this.skeletonData=C$zut}AnimationStateData.prototype.setMix=function(C$zut,C$zue,C$zui){var C$zur=this.skeletonData.findAnimation(C$zut);if(null==C$zur)throw new Error("Animation not found: "+C$zut);C$zut=this.skeletonData.findAnimation(C$zue);if(null==C$zut)throw new Error("Animation not found: "+C$zue);this.setMixWith(C$zur,C$zut,C$zui)},AnimationStateData.prototype.setMixWith=function(C$zut,C$zue,C$zui){if(null==C$zut)throw new Error("from cannot be null.");if(null==C$zue)throw new Error("to cannot be null.");C$zut=C$zut.name+"."+C$zue.name;this.animationToMixTime[C$zut]=C$zui},AnimationStateData.prototype.getMix=function(C$zut,C$zue){C$zut=C$zut.name+"."+C$zue.name;C$zue=this.animationToMixTime[C$zut];return void 0===C$zue?this.defaultMix:C$zue},C$zut.AnimationStateData=AnimationStateData}(C$zur=C$zur||{}),function(C$zu_){function AssetManager(C$zut,C$zue){void 0===C$zue&&(C$zue=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=C$zut,this.pathPrefix=C$zue}AssetManager.downloadText=function(C$zut,C$zue,C$zui){var C$zur=new XMLHttpRequest;C$zur.open("GET",C$zut,!0),C$zur.onload=function(){200==C$zur.status?C$zue(C$zur.responseText):C$zui(C$zur.status,C$zur.responseText)},C$zur.onerror=function(){C$zui(C$zur.status,C$zur.responseText)},C$zur.send()},AssetManager.downloadBinary=function(C$zut,C$zue,C$zui){var C$zur=new XMLHttpRequest;C$zur.open("GET",C$zut,!0),C$zur.responseType="arraybuffer",C$zur.onload=function(){200==C$zur.status?C$zue(new Uint8Array(C$zur.response)):C$zui(C$zur.status,C$zur.responseText)},C$zur.onerror=function(){C$zui(C$zur.status,C$zur.responseText)},C$zur.send()},AssetManager.prototype.loadBinary=function(C$zui,C$zue,C$zur){var C$zun=this;void 0===C$zue&&(C$zue=null),void 0===C$zur&&(C$zur=null),C$zui=this.pathPrefix+C$zui,this.toLoad++,AssetManager.downloadBinary(C$zui,function(C$zut){C$zun.assets[C$zui]=C$zut,C$zue&&C$zue(C$zui,C$zut),C$zun.toLoad--,C$zun.loaded++},function(C$zut,C$zue){C$zun.errors[C$zui]="Couldn't load binary "+C$zui+": status "+status+", "+C$zue,C$zur&&C$zur(C$zui,"Couldn't load binary "+C$zui+": status "+status+", "+C$zue),C$zun.toLoad--,C$zun.loaded++})},AssetManager.prototype.loadText=function(C$zui,C$zue,C$zur){var C$zun=this;void 0===C$zue&&(C$zue=null),void 0===C$zur&&(C$zur=null),C$zui=this.pathPrefix+C$zui,this.toLoad++,AssetManager.downloadText(C$zui,function(C$zut){C$zun.assets[C$zui]=C$zut,C$zue&&C$zue(C$zui,C$zut),C$zun.toLoad--,C$zun.loaded++},function(C$zut,C$zue){C$zun.errors[C$zui]="Couldn't load text "+C$zui+": status "+status+", "+C$zue,C$zur&&C$zur(C$zui,"Couldn't load text "+C$zui+": status "+status+", "+C$zue),C$zun.toLoad--,C$zun.loaded++})},AssetManager.prototype.loadTexture=function(C$zui,C$zur,C$zue){var C$zun=this;void 0===C$zur&&(C$zur=null),void 0===C$zue&&(C$zue=null),C$zui=this.pathPrefix+C$zui,this.toLoad++;var C$zua=new Image;C$zua.crossOrigin="anonymous",C$zua.onload=function(C$zut){var C$zue=C$zun.textureLoader(C$zua);C$zun.assets[C$zui]=C$zue,C$zun.toLoad--,C$zun.loaded++,C$zur&&C$zur(C$zui,C$zua)},C$zua.onerror=function(C$zut){C$zun.errors[C$zui]="Couldn't load image "+C$zui,C$zun.toLoad--,C$zun.loaded++,C$zue&&C$zue(C$zui,"Couldn't load image "+C$zui)},C$zua.src=C$zui},AssetManager.prototype.loadTextureData=function(C$zui,C$zut,C$zur,C$zue){var C$zun=this;void 0===C$zur&&(C$zur=null),void 0===C$zue&&(C$zue=null),C$zui=this.pathPrefix+C$zui,this.toLoad++;var C$zua=new Image;C$zua.onload=function(C$zut){var C$zue=C$zun.textureLoader(C$zua);C$zun.assets[C$zui]=C$zue,C$zun.toLoad--,C$zun.loaded++,C$zur&&C$zur(C$zui,C$zua)},C$zua.onerror=function(C$zut){C$zun.errors[C$zui]="Couldn't load image "+C$zui,C$zun.toLoad--,C$zun.loaded++,C$zue&&C$zue(C$zui,"Couldn't load image "+C$zui)},C$zua.src=C$zut},AssetManager.prototype.loadTextureAtlas=function(C$zus,C$zuc,C$zul){var C$zuh=this;void 0===C$zuc&&(C$zuc=null),void 0===C$zul&&(C$zul=null);var C$zuu=0<=C$zus.lastIndexOf("/")?C$zus.substring(0,C$zus.lastIndexOf("/")):"";C$zus=this.pathPrefix+C$zus,this.toLoad++,AssetManager.downloadText(C$zus,function(C$zun){var C$zua={count:0};var C$zuo=new Array;try{new C$zu_.TextureAtlas(C$zun,function(C$zut){C$zuo.push(C$zuu+"/"+C$zut);C$zut=document.createElement("img");return C$zut.width=16,C$zut.height=16,new C$zu_.FakeTexture(C$zut)})}catch(C$zut){var C$zue=C$zut;return C$zuh.errors[C$zus]="Couldn't load texture atlas "+C$zus+": "+C$zue.message,C$zul&&C$zul(C$zus,"Couldn't load texture atlas "+C$zus+": "+C$zue.message),C$zuh.toLoad--,void C$zuh.loaded++}for(var C$zut=0,C$zui=C$zuo;C$zut<C$zui.length;C$zut++)!function(C$zut){var C$zur=!1;C$zuh.loadTexture(C$zut,function(C$zue,C$zut){if(C$zua.count++,C$zua.count==C$zuo.length)if(C$zur)C$zuh.errors[C$zus]="Couldn't load texture atlas page "+C$zue+"} of atlas "+C$zus,C$zul&&C$zul(C$zus,"Couldn't load texture atlas page "+C$zue+" of atlas "+C$zus),C$zuh.toLoad--,C$zuh.loaded++;else try{var C$zui=new C$zu_.TextureAtlas(C$zun,function(C$zut){return C$zuh.get(C$zuu+"/"+C$zut)});C$zuh.assets[C$zus]=C$zui,C$zuc&&C$zuc(C$zus,C$zui),C$zuh.toLoad--,C$zuh.loaded++}catch(C$zut){C$zue=C$zut;C$zuh.errors[C$zus]="Couldn't load texture atlas "+C$zus+": "+C$zue.message,C$zul&&C$zul(C$zus,"Couldn't load texture atlas "+C$zus+": "+C$zue.message),C$zuh.toLoad--,C$zuh.loaded++}},function(C$zut,C$zue){C$zur=!0,C$zua.count++,C$zua.count==C$zuo.length&&(C$zuh.errors[C$zus]="Couldn't load texture atlas page "+C$zut+"} of atlas "+C$zus,C$zul&&C$zul(C$zus,"Couldn't load texture atlas page "+C$zut+" of atlas "+C$zus),C$zuh.toLoad--,C$zuh.loaded++)})}(C$zui[C$zut])},function(C$zut,C$zue){C$zuh.errors[C$zus]="Couldn't load texture atlas "+C$zus+": status "+status+", "+C$zue,C$zul&&C$zul(C$zus,"Couldn't load texture atlas "+C$zus+": status "+status+", "+C$zue),C$zuh.toLoad--,C$zuh.loaded++})},AssetManager.prototype.get=function(C$zut){return C$zut=this.pathPrefix+C$zut,this.assets[C$zut]},AssetManager.prototype.remove=function(C$zut){C$zut=this.pathPrefix+C$zut;var C$zue=this.assets[C$zut];C$zue.dispose&&C$zue.dispose(),this.assets[C$zut]=null},AssetManager.prototype.removeAll=function(){for(var C$zut in this.assets){C$zut=this.assets[C$zut];C$zut.dispose&&C$zut.dispose()}this.assets={}},AssetManager.prototype.isLoadingComplete=function(){return 0==this.toLoad},AssetManager.prototype.getToLoad=function(){return this.toLoad},AssetManager.prototype.getLoaded=function(){return this.loaded},AssetManager.prototype.dispose=function(){this.removeAll()},AssetManager.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},AssetManager.prototype.getErrors=function(){return this.errors},C$zu_.AssetManager=AssetManager}(C$zur=C$zur||{}),function(C$zur){function AtlasAttachmentLoader(C$zut){this.atlas=C$zut}AtlasAttachmentLoader.prototype.newRegionAttachment=function(C$zut,C$zue,C$zui){C$zui=this.atlas.findRegion(C$zui);if(null==C$zui)return null;C$zui.renderObject=C$zui;C$zue=new C$zur.RegionAttachment(C$zue);return C$zue.setRegion(C$zui),C$zue},AtlasAttachmentLoader.prototype.newMeshAttachment=function(C$zut,C$zue,C$zui){C$zui=this.atlas.findRegion(C$zui);if(null==C$zui)return null;C$zui.renderObject=C$zui;C$zue=new C$zur.MeshAttachment(C$zue);return C$zue.region=C$zui,C$zue},AtlasAttachmentLoader.prototype.newBoundingBoxAttachment=function(C$zut,C$zue){return new C$zur.BoundingBoxAttachment(C$zue)},AtlasAttachmentLoader.prototype.newPathAttachment=function(C$zut,C$zue){return new C$zur.PathAttachment(C$zue)},AtlasAttachmentLoader.prototype.newPointAttachment=function(C$zut,C$zue){return new C$zur.PointAttachment(C$zue)},AtlasAttachmentLoader.prototype.newClippingAttachment=function(C$zut,C$zue){return new C$zur.ClippingAttachment(C$zue)},C$zur.AtlasAttachmentLoader=AtlasAttachmentLoader}(C$zur=C$zur||{}),(C$zut=(C$zut=C$zur=C$zur||{}).BlendMode||(C$zut.BlendMode={}))[C$zut.Normal=0]="Normal",C$zut[C$zut.Additive=1]="Additive",C$zut[C$zut.Multiply=2]="Multiply",C$zut[C$zut.Screen=3]="Screen",function(C$zuT){function Bone(C$zut,C$zue,C$zui){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==C$zut)throw new Error("data cannot be null.");if(null==C$zue)throw new Error("skeleton cannot be null.");this.data=C$zut,this.skeleton=C$zue,this.parent=C$zui,this.setToSetupPose()}Bone.prototype.isActive=function(){return this.active},Bone.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransformWith=function(C$zuh,C$zuu,C$zut,C$zue,C$zui,C$zur,C$zu_){this.ax=C$zuh,this.ay=C$zuu,this.arotation=C$zut,this.ascaleX=C$zue,this.ascaleY=C$zui,this.ashearX=C$zur,this.ashearY=C$zu_,this.appliedValid=!0;var C$zud=this.parent;var C$zuf,C$zup,C$zum;if(null==C$zud)return C$zuy=C$zut+90+C$zu_,C$zup=(C$zuf=this.skeleton).scaleX,C$zum=C$zuf.scaleY,this.a=C$zuT.MathUtils.cosDeg(C$zut+C$zur)*C$zue*C$zup,this.b=C$zuT.MathUtils.cosDeg(C$zuy)*C$zui*C$zup,this.c=C$zuT.MathUtils.sinDeg(C$zut+C$zur)*C$zue*C$zum,this.d=C$zuT.MathUtils.sinDeg(C$zuy)*C$zui*C$zum,this.worldX=C$zuh*C$zup+C$zuf.x,void(this.worldY=C$zuu*C$zum+C$zuf.y);var C$zun=C$zud.a,C$zua=C$zud.b,C$zuo=C$zud.c,C$zuv=C$zud.d;switch(this.worldX=C$zun*C$zuh+C$zua*C$zuu+C$zud.worldX,this.worldY=C$zuo*C$zuh+C$zuv*C$zuu+C$zud.worldY,this.data.transformMode){case C$zuT.TransformMode.Normal:var C$zuy=C$zut+90+C$zu_;var C$zug=C$zuT.MathUtils.cosDeg(C$zut+C$zur)*C$zue;var C$zub=C$zuT.MathUtils.cosDeg(C$zuy)*C$zui;var C$zuC=C$zuT.MathUtils.sinDeg(C$zut+C$zur)*C$zue;var C$zux=C$zuT.MathUtils.sinDeg(C$zuy)*C$zui;return this.a=C$zun*C$zug+C$zua*C$zuC,this.b=C$zun*C$zub+C$zua*C$zux,this.c=C$zuo*C$zug+C$zuv*C$zuC,void(this.d=C$zuo*C$zub+C$zuv*C$zux);case C$zuT.TransformMode.OnlyTranslation:C$zuy=C$zut+90+C$zu_;this.a=C$zuT.MathUtils.cosDeg(C$zut+C$zur)*C$zue,this.b=C$zuT.MathUtils.cosDeg(C$zuy)*C$zui,this.c=C$zuT.MathUtils.sinDeg(C$zut+C$zur)*C$zue,this.d=C$zuT.MathUtils.sinDeg(C$zuy)*C$zui;break;case C$zuT.TransformMode.NoRotationOrReflection:var C$zus=0;var C$zuc=C$zut+C$zur-(C$zus=1e-4<(C$zul=C$zun*C$zun+C$zuo*C$zuo)?(C$zua=C$zuo*(C$zul=Math.abs(C$zun*C$zuv-C$zua*C$zuo)/C$zul),C$zuv=C$zun*C$zul,Math.atan2(C$zuo,C$zun)*C$zuT.MathUtils.radDeg):(C$zuo=C$zun=0,90-Math.atan2(C$zuv,C$zua)*C$zuT.MathUtils.radDeg));C$zus=C$zut+C$zu_-C$zus+90;C$zug=C$zuT.MathUtils.cosDeg(C$zuc)*C$zue;C$zub=C$zuT.MathUtils.cosDeg(C$zus)*C$zui;C$zuC=C$zuT.MathUtils.sinDeg(C$zuc)*C$zue;C$zux=C$zuT.MathUtils.sinDeg(C$zus)*C$zui;this.a=C$zun*C$zug-C$zua*C$zuC,this.b=C$zun*C$zub-C$zua*C$zux,this.c=C$zuo*C$zug+C$zuv*C$zuC,this.d=C$zuo*C$zub+C$zuv*C$zux;break;case C$zuT.TransformMode.NoScale:case C$zuT.TransformMode.NoScaleOrReflection:C$zuc=C$zuT.MathUtils.cosDeg(C$zut);C$zus=C$zuT.MathUtils.sinDeg(C$zut);var C$zuA=(C$zun*C$zuc+C$zua*C$zus)/this.skeleton.scaleX;C$zuc=(C$zuo*C$zuc+C$zuv*C$zus)/this.skeleton.scaleY;var C$zul;C$zuA*=C$zul=1e-5<(C$zul=Math.sqrt(C$zuA*C$zuA+C$zuc*C$zuc))?1/C$zul:C$zul,C$zuc*=C$zul,C$zul=Math.sqrt(C$zuA*C$zuA+C$zuc*C$zuc),this.data.transformMode==C$zuT.TransformMode.NoScale&&C$zun*C$zuv-C$zua*C$zuo<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(C$zul=-C$zul);C$zus=Math.PI/2+Math.atan2(C$zuc,C$zuA);var C$zuS=Math.cos(C$zus)*C$zul;C$zus=Math.sin(C$zus)*C$zul;C$zug=C$zuT.MathUtils.cosDeg(C$zur)*C$zue;C$zub=C$zuT.MathUtils.cosDeg(90+C$zu_)*C$zui;C$zuC=C$zuT.MathUtils.sinDeg(C$zur)*C$zue;C$zux=C$zuT.MathUtils.sinDeg(90+C$zu_)*C$zui;this.a=C$zuA*C$zug+C$zuS*C$zuC,this.b=C$zuA*C$zub+C$zuS*C$zux,this.c=C$zuc*C$zug+C$zus*C$zuC,this.d=C$zuc*C$zub+C$zus*C$zux}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},Bone.prototype.setToSetupPose=function(){var C$zut=this.data;this.x=C$zut.x,this.y=C$zut.y,this.rotation=C$zut.rotation,this.scaleX=C$zut.scaleX,this.scaleY=C$zut.scaleY,this.shearX=C$zut.shearX,this.shearY=C$zut.shearY},Bone.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*C$zuT.MathUtils.radDeg},Bone.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*C$zuT.MathUtils.radDeg},Bone.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},Bone.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},Bone.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var C$zut=this.parent;if(null==C$zut)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*C$zuT.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*C$zuT.MathUtils.radDeg);var C$zue=C$zut.a,C$zui=C$zut.b,C$zur=C$zut.c,C$zun=C$zut.d;var C$zua=1/(C$zue*C$zun-C$zui*C$zur);var C$zuo=this.worldX-C$zut.worldX,C$zut=this.worldY-C$zut.worldY;this.ax=C$zuo*C$zun*C$zua-C$zut*C$zui*C$zua,this.ay=C$zut*C$zue*C$zua-C$zuo*C$zur*C$zua;C$zut=C$zua*C$zun;C$zuo=C$zua*C$zue;C$zun=C$zua*C$zui;C$zue=C$zua*C$zur;C$zui=C$zut*this.a-C$zun*this.c;C$zua=C$zut*this.b-C$zun*this.d;C$zur=C$zuo*this.c-C$zue*this.a;C$zut=C$zuo*this.d-C$zue*this.b;this.ashearX=0,this.ascaleX=Math.sqrt(C$zui*C$zui+C$zur*C$zur),1e-4<this.ascaleX?(this.ascaleY=(C$zun=C$zui*C$zut-C$zua*C$zur)/this.ascaleX,this.ashearY=Math.atan2(C$zui*C$zua+C$zur*C$zut,C$zun)*C$zuT.MathUtils.radDeg,this.arotation=Math.atan2(C$zur,C$zui)*C$zuT.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(C$zua*C$zua+C$zut*C$zut),this.ashearY=0,this.arotation=90-Math.atan2(C$zut,C$zua)*C$zuT.MathUtils.radDeg)},Bone.prototype.worldToLocal=function(C$zut){var C$zue=this.a,C$zui=this.b,C$zur=this.c,C$zun=this.d;var C$zua=1/(C$zue*C$zun-C$zui*C$zur);var C$zuo=C$zut.x-this.worldX,C$zus=C$zut.y-this.worldY;return C$zut.x=C$zuo*C$zun*C$zua-C$zus*C$zui*C$zua,C$zut.y=C$zus*C$zue*C$zua-C$zuo*C$zur*C$zua,C$zut},Bone.prototype.localToWorld=function(C$zut){var C$zue=C$zut.x,C$zui=C$zut.y;return C$zut.x=C$zue*this.a+C$zui*this.b+this.worldX,C$zut.y=C$zue*this.c+C$zui*this.d+this.worldY,C$zut},Bone.prototype.worldToLocalRotation=function(C$zut){var C$zue=C$zuT.MathUtils.sinDeg(C$zut),C$zut=C$zuT.MathUtils.cosDeg(C$zut);return Math.atan2(this.a*C$zue-this.c*C$zut,this.d*C$zut-this.b*C$zue)*C$zuT.MathUtils.radDeg+this.rotation-this.shearX},Bone.prototype.localToWorldRotation=function(C$zut){C$zut-=this.rotation-this.shearX;var C$zue=C$zuT.MathUtils.sinDeg(C$zut),C$zut=C$zuT.MathUtils.cosDeg(C$zut);return Math.atan2(C$zut*this.c+C$zue*this.d,C$zut*this.a+C$zue*this.b)*C$zuT.MathUtils.radDeg},Bone.prototype.rotateWorld=function(C$zut){var C$zue=this.a,C$zui=this.b,C$zur=this.c,C$zun=this.d;var C$zua=C$zuT.MathUtils.cosDeg(C$zut),C$zut=C$zuT.MathUtils.sinDeg(C$zut);this.a=C$zua*C$zue-C$zut*C$zur,this.b=C$zua*C$zui-C$zut*C$zun,this.c=C$zut*C$zue+C$zua*C$zur,this.d=C$zut*C$zui+C$zua*C$zun,this.appliedValid=!1},C$zuT.Bone=Bone}(C$zur=C$zur||{}),(C$zuc=C$zur=C$zur||{}).BoneData=function(C$zut,C$zue,C$zui){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=C$zul.Normal,this.skinRequired=!1,this.color=new C$zuc.Color,C$zut<0)throw new Error("index must be >= 0.");if(null==C$zue)throw new Error("name cannot be null.");this.index=C$zut,this.name=C$zue,this.parent=C$zui},(C$zut=C$zul=C$zuc.TransformMode||(C$zuc.TransformMode={}))[C$zut.Normal=0]="Normal",C$zut[C$zut.OnlyTranslation=1]="OnlyTranslation",C$zut[C$zut.NoRotationOrReflection=2]="NoRotationOrReflection",C$zut[C$zut.NoScale=3]="NoScale",C$zut[C$zut.NoScaleOrReflection=4]="NoScaleOrReflection",(C$zur||(C$zur={})).ConstraintData=function(C$zut,C$zue,C$zui){this.name=C$zut,this.order=C$zue,this.skinRequired=C$zui},(C$zur||(C$zur={})).Event=function(C$zut,C$zue){if(null==C$zue)throw new Error("data cannot be null.");this.time=C$zut,this.data=C$zue},(C$zur||(C$zur={})).EventData=function(C$zut){this.name=C$zut},function(C$zuJ){function IkConstraint(C$zut,C$zue){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==C$zut)throw new Error("data cannot be null.");if(null==C$zue)throw new Error("skeleton cannot be null.");this.data=C$zut,this.mix=C$zut.mix,this.softness=C$zut.softness,this.bendDirection=C$zut.bendDirection,this.compress=C$zut.compress,this.stretch=C$zut.stretch,this.bones=new Array;for(var C$zui=0;C$zui<C$zut.bones.length;C$zui++)this.bones.push(C$zue.findBone(C$zut.bones[C$zui].name));this.target=C$zue.findBone(C$zut.target.name)}IkConstraint.prototype.isActive=function(){return this.active},IkConstraint.prototype.apply=function(){this.update()},IkConstraint.prototype.update=function(){var C$zut=this.target;var C$zue=this.bones;switch(C$zue.length){case 1:this.apply1(C$zue[0],C$zut.worldX,C$zut.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(C$zue[0],C$zue[1],C$zut.worldX,C$zut.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},IkConstraint.prototype.apply1=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zuh,C$zua){C$zut.appliedValid||C$zut.updateAppliedTransform();var C$zuo=C$zut.parent;var C$zus=1/(C$zuo.a*C$zuo.d-C$zuo.b*C$zuo.c);C$zue-=C$zuo.worldX,C$zui-=C$zuo.worldY;var C$zuc=(C$zue*C$zuo.d-C$zui*C$zuo.b)*C$zus-C$zut.ax,C$zui=(C$zui*C$zuo.a-C$zue*C$zuo.c)*C$zus-C$zut.ay;C$zue=Math.atan2(C$zui,C$zuc)*C$zuJ.MathUtils.radDeg-C$zut.ashearX-C$zut.arotation;C$zut.ascaleX<0&&(C$zue+=180),180<C$zue?C$zue-=360:C$zue<-180&&(C$zue+=360);C$zuo=C$zut.ascaleX,C$zus=C$zut.ascaleY;var C$zul;(C$zur||C$zun)&&(C$zul=C$zut.data.length*C$zuo,C$zuc=Math.sqrt(C$zuc*C$zuc+C$zui*C$zui),(C$zur&&C$zuc<C$zul||C$zun&&C$zul<C$zuc&&1e-4<C$zul)&&(C$zuo*=C$zui=(C$zuc/C$zul-1)*C$zua+1,C$zuh&&(C$zus*=C$zui))),C$zut.updateWorldTransformWith(C$zut.ax,C$zut.ay,C$zut.arotation+C$zue*C$zua,C$zuo,C$zus,C$zut.ashearX,C$zut.ashearY)},IkConstraint.prototype.apply2=function(C$zut,C$zue,C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup){if(0!=C$zup){C$zut.appliedValid||C$zut.updateAppliedTransform(),C$zue.appliedValid||C$zue.updateAppliedTransform();var C$zum=C$zut.ax,C$zuv=C$zut.ay,C$zuy=C$zut.ascaleX,C$zug=C$zuy,C$zub=C$zut.ascaleY,C$zuC=C$zue.ascaleX;var C$zux=0,C$zuA=0,C$zuS=0;C$zuS=C$zuy<0?(C$zuy=-C$zuy,C$zux=180,-1):(C$zux=0,1),C$zub<0&&(C$zub=-C$zub,C$zuS=-C$zuS),C$zuA=C$zuC<0?(C$zuC=-C$zuC,180):0;var C$zuT=C$zue.ax,C$zuw=0,C$zuE=0,C$zuP=0,C$zui=C$zut.a,C$zur=C$zut.b,C$zun=C$zut.c,C$zuM=C$zut.d;var C$zuR=Math.abs(C$zuy-C$zub)<=1e-4;C$zuP=C$zuR?(C$zuE=C$zui*C$zuT+C$zur*(C$zuw=C$zue.ay)+C$zut.worldX,C$zun*C$zuT+C$zuM*C$zuw+C$zut.worldY):(C$zuw=0,C$zuE=C$zui*C$zuT+C$zut.worldX,C$zun*C$zuT+C$zut.worldY);var C$zua=C$zut.parent;C$zui=C$zua.a,C$zur=C$zua.b,C$zun=C$zua.c;var C$zuI=1/(C$zui*(C$zuM=C$zua.d)-C$zur*C$zun),C$zuB=C$zuE-C$zua.worldX,C$zuo=C$zuP-C$zua.worldY;C$zuE=(C$zuB*C$zuM-C$zuo*C$zur)*C$zuI-C$zum,C$zuP=(C$zuo*C$zui-C$zuB*C$zun)*C$zuI-C$zuv;var C$zuD,C$zuL,C$zus=Math.sqrt(C$zuE*C$zuE+C$zuP*C$zuP),C$zuV=C$zue.data.length*C$zuC;if(C$zus<1e-4)return this.apply1(C$zut,C$zuh,C$zuu,!1,C$zud,!1,C$zup),void C$zue.updateWorldTransformWith(C$zuT,C$zuw,0,C$zue.ascaleX,C$zue.ascaleY,C$zue.ashearX,C$zue.ashearY);var C$zuO=((C$zuB=C$zuh-C$zua.worldX)*C$zuM-(C$zuo=C$zuu-C$zua.worldY)*C$zur)*C$zuI-C$zum,C$zuF=(C$zuo*C$zui-C$zuB*C$zun)*C$zuI-C$zuv;var C$zuN=C$zuO*C$zuO+C$zuF*C$zuF;0!=C$zuf&&(C$zuf*=C$zuy*(C$zuC+1)/2,0<(C$zuP=(C$zuE=Math.sqrt(C$zuN))-C$zus-C$zuV*C$zuy+C$zuf)&&(C$zuN=(C$zuO-=(C$zuh=(C$zuP-C$zuf*(1-(C$zuh=Math.min(1,C$zuP/(2*C$zuf))-1)*C$zuh))/C$zuE)*C$zuO)*C$zuO+(C$zuF-=C$zuh*C$zuF)*C$zuF));C$zut:if(C$zuR){var C$zuc=(C$zuN-C$zus*C$zus-(C$zuV*=C$zuy)*C$zuV)/(2*C$zus*C$zuV);C$zuc<-1?C$zuc=-1:1<C$zuc&&(C$zuc=1,C$zud&&(C$zug*=(Math.sqrt(C$zuN)/(C$zus+C$zuV)-1)*C$zup+1)),C$zuL=Math.acos(C$zuc)*C$zu_,C$zui=C$zus+C$zuV*C$zuc,C$zur=C$zuV*Math.sin(C$zuL),C$zuD=Math.atan2(C$zuF*C$zui-C$zuO*C$zur,C$zuO*C$zui+C$zuF*C$zur)}else{var C$zuk=(C$zui=C$zuy*C$zuV)*C$zui,C$zuz=(C$zur=C$zub*C$zuV)*C$zur,C$zuG=Math.atan2(C$zuF,C$zuO);var C$zuc=-2*C$zuz*C$zus,C$zuU=C$zuz-C$zuk;if(0<=(C$zuM=C$zuc*C$zuc-4*C$zuU*(C$zun=C$zuz*C$zus*C$zus+C$zuk*C$zuN-C$zuk*C$zuz))){var C$zul=Math.sqrt(C$zuM);C$zuc=(C$zul=-(C$zuc+(C$zul=C$zuc<0?-C$zul:C$zul))/2)/C$zuU,C$zuU=C$zun/C$zul;C$zul=Math.abs(C$zuc)<Math.abs(C$zuU)?C$zuc:C$zuU;if(C$zul*C$zul<=C$zuN){C$zuo=Math.sqrt(C$zuN-C$zul*C$zul)*C$zu_,C$zuD=C$zuG-Math.atan2(C$zuo,C$zul),C$zuL=Math.atan2(C$zuo/C$zub,(C$zul-C$zus)/C$zuy);break C$zut}}var C$zuc=C$zuJ.MathUtils.PI,C$zuU=C$zus-C$zui,C$zul=C$zuU*C$zuU,C$zuW=0;var C$zuH=0,C$zuj=C$zus+C$zui,C$zuX=C$zuj*C$zuj,C$zuq=0;-1<=(C$zun=-C$zui*C$zus/(C$zuk-C$zuz))&&C$zun<=1&&(C$zun=Math.acos(C$zun),(C$zuM=(C$zuB=C$zui*Math.cos(C$zun)+C$zus)*C$zuB+(C$zuo=C$zur*Math.sin(C$zun))*C$zuo)<C$zul&&(C$zuc=C$zun,C$zul=C$zuM,C$zuU=C$zuB,C$zuW=C$zuo),C$zuX<C$zuM&&(C$zuH=C$zun,C$zuX=C$zuM,C$zuj=C$zuB,C$zuq=C$zuo)),C$zuL=C$zuN<=(C$zul+C$zuX)/2?(C$zuD=C$zuG-Math.atan2(C$zuW*C$zu_,C$zuU),C$zuc*C$zu_):(C$zuD=C$zuG-Math.atan2(C$zuq*C$zu_,C$zuj),C$zuH*C$zu_)}C$zuu=Math.atan2(C$zuw,C$zuT)*C$zuS;C$zua=C$zut.arotation;180<(C$zuD=(C$zuD-C$zuu)*C$zuJ.MathUtils.radDeg+C$zux-C$zua)?C$zuD-=360:C$zuD<-180&&(C$zuD+=360),C$zut.updateWorldTransformWith(C$zum,C$zuv,C$zua+C$zuD*C$zup,C$zug,C$zut.ascaleY,0,0),C$zua=C$zue.arotation,180<(C$zuL=((C$zuL+C$zuu)*C$zuJ.MathUtils.radDeg-C$zue.ashearX)*C$zuS+C$zuA-C$zua)?C$zuL-=360:C$zuL<-180&&(C$zuL+=360),C$zue.updateWorldTransformWith(C$zuT,C$zuw,C$zua+C$zuL*C$zup,C$zue.ascaleX,C$zue.ascaleY,C$zue.ashearX,C$zue.ashearY)}else C$zue.updateWorldTransform()},C$zuJ.IkConstraint=IkConstraint}(C$zur=C$zur||{}),C$zut=C$zur=C$zur||{},C$zuh=C$zut.ConstraintData,C$zuy(IkConstraintData,C$zuh),C$zut.IkConstraintData=IkConstraintData,function(C$zuJ){function PathConstraint(C$zut,C$zue){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==C$zut)throw new Error("data cannot be null.");if(null==C$zue)throw new Error("skeleton cannot be null.");this.data=C$zut,this.bones=new Array;for(var C$zui=0,C$zur=C$zut.bones.length;C$zui<C$zur;C$zui++)this.bones.push(C$zue.findBone(C$zut.bones[C$zui].name));this.target=C$zue.findSlot(C$zut.target.name),this.position=C$zut.position,this.spacing=C$zut.spacing,this.rotateMix=C$zut.rotateMix,this.translateMix=C$zut.translateMix}PathConstraint.prototype.isActive=function(){return this.active},PathConstraint.prototype.apply=function(){this.update()},PathConstraint.prototype.update=function(){var C$zuh=this.target.getAttachment();if(C$zuh instanceof C$zuJ.PathAttachment){var C$zuu=this.rotateMix,C$zu_=this.translateMix;var C$zud=0<C$zuu;if(0<C$zu_||C$zud){var C$zuf=this.data;var C$zup=C$zuf.spacingMode==C$zuJ.SpacingMode.Percent;var C$zum=C$zuf.rotateMode;var C$zuv=C$zum==C$zuJ.RotateMode.Tangent,C$zuy=C$zum==C$zuJ.RotateMode.ChainScale;var C$zug=this.bones.length,C$zub=C$zuv?C$zug:C$zug+1;var C$zuC=this.bones;var C$zux=C$zuJ.Utils.setArraySize(this.spaces,C$zub),C$zuA=null;var C$zuS=this.spacing;if(C$zuy||!C$zup){C$zuy&&(C$zuA=C$zuJ.Utils.setArraySize(this.lengths,C$zug));var C$zuT=C$zuf.spacingMode==C$zuJ.SpacingMode.Length;for(var C$zut=0,C$zuw=C$zub-1;C$zut<C$zuw;){var C$zue=(C$zur=C$zuC[C$zut]).data.length;var C$zuE;C$zue<PathConstraint.epsilon?(C$zuy&&(C$zuA[C$zut]=0),C$zux[++C$zut]=0):C$zup?(C$zuy&&(C$zun=C$zue*C$zur.a,C$zua=C$zue*C$zur.c,C$zuE=Math.sqrt(C$zun*C$zun+C$zua*C$zua),C$zuA[C$zut]=C$zuE),C$zux[++C$zut]=C$zuS):(C$zun=C$zue*C$zur.a,C$zua=C$zue*C$zur.c,C$zuE=Math.sqrt(C$zun*C$zun+C$zua*C$zua),C$zuy&&(C$zuA[C$zut]=C$zuE),C$zux[++C$zut]=(C$zuT?C$zue+C$zuS:C$zuS)*C$zuE/C$zue)}}else for(C$zut=1;C$zut<C$zub;C$zut++)C$zux[C$zut]=C$zuS;var C$zuP=this.computeWorldPositions(C$zuh,C$zub,C$zuv,C$zuf.positionMode==C$zuJ.PositionMode.Percent,C$zup);var C$zuM=C$zuP[0],C$zuR=C$zuP[1],C$zuI=C$zuf.offsetRotation;var C$zuB=!1;0==C$zuI?C$zuB=C$zum==C$zuJ.RotateMode.Chain:(C$zuB=!1,C$zuI*=0<(C$zui=this.target.bone).a*C$zui.d-C$zui.b*C$zui.c?C$zuJ.MathUtils.degRad:-C$zuJ.MathUtils.degRad);for(var C$zut=0,C$zui=3;C$zut<C$zug;C$zut++,C$zui+=3){var C$zur;(C$zur=C$zuC[C$zut]).worldX+=(C$zuM-C$zur.worldX)*C$zu_,C$zur.worldY+=(C$zuR-C$zur.worldY)*C$zu_;var C$zun,C$zua,C$zuD=(C$zun=C$zuP[C$zui])-C$zuM,C$zuL=(C$zua=C$zuP[C$zui+1])-C$zuR;var C$zuo,C$zuV,C$zuO,C$zuF,C$zus,C$zuc,C$zul,C$zuN;!C$zuy||0!=(C$zuo=C$zuA[C$zut])&&(C$zuo=(Math.sqrt(C$zuD*C$zuD+C$zuL*C$zuL)/C$zuo-1)*C$zuu+1,C$zur.a*=C$zuo,C$zur.c*=C$zuo),C$zuM=C$zun,C$zuR=C$zua,C$zud&&(C$zuo=C$zur.a,C$zuV=C$zur.b,C$zuO=C$zur.c,C$zuF=C$zur.d,C$zul=C$zuc=C$zus=0,C$zus=C$zuv?C$zuP[C$zui-1]:0==C$zux[C$zut+1]?C$zuP[C$zui+2]:Math.atan2(C$zuL,C$zuD),C$zus-=Math.atan2(C$zuO,C$zuo),C$zuB?(C$zuc=Math.cos(C$zus),C$zul=Math.sin(C$zus),C$zuM+=((C$zuN=C$zur.data.length)*(C$zuc*C$zuo-C$zul*C$zuO)-C$zuD)*C$zuu,C$zuR+=(C$zuN*(C$zul*C$zuo+C$zuc*C$zuO)-C$zuL)*C$zuu):C$zus+=C$zuI,C$zus>C$zuJ.MathUtils.PI?C$zus-=C$zuJ.MathUtils.PI2:C$zus<-C$zuJ.MathUtils.PI&&(C$zus+=C$zuJ.MathUtils.PI2),C$zus*=C$zuu,C$zuc=Math.cos(C$zus),C$zul=Math.sin(C$zus),C$zur.a=C$zuc*C$zuo-C$zul*C$zuO,C$zur.b=C$zuc*C$zuV-C$zul*C$zuF,C$zur.c=C$zul*C$zuo+C$zuc*C$zuO,C$zur.d=C$zul*C$zuV+C$zuc*C$zuF),C$zur.appliedValid=!1}}}},PathConstraint.prototype.computeWorldPositions=function(C$zut,C$zuh,C$zuu,C$zu_,C$zud){var C$zuf=this.target;var C$zup=this.position;var C$zum=this.spaces,C$zuv=C$zuJ.Utils.setArraySize(this.positions,3*C$zuh+2),C$zue=null;var C$zuy=C$zut.closed;var C$zui=C$zut.worldVerticesLength,C$zug=C$zui/6,C$zub=PathConstraint.NONE;if(!C$zut.constantSpeed){var C$zuC=C$zut.lengths;var C$zux=C$zuC[C$zug-=C$zuy?1:2];if(C$zu_&&(C$zup*=C$zux),C$zud)for(var C$zur=1;C$zur<C$zuh;C$zur++)C$zum[C$zur]*=C$zux;C$zue=C$zuJ.Utils.setArraySize(this.world,8);for(var C$zur=0,C$zuA=0,C$zun=0;C$zur<C$zuh;C$zur++,C$zuA+=3){var C$zua=C$zup+=C$zuH=C$zum[C$zur];if(C$zuy)(C$zua%=C$zux)<0&&(C$zua+=C$zux),C$zun=0;else{if(C$zua<0){C$zub!=PathConstraint.BEFORE&&(C$zub=PathConstraint.BEFORE,C$zut.computeWorldVertices(C$zuf,2,4,C$zue,0,2)),this.addBeforePosition(C$zua,C$zue,0,C$zuv,C$zuA);continue}if(C$zux<C$zua){C$zub!=PathConstraint.AFTER&&(C$zub=PathConstraint.AFTER,C$zut.computeWorldVertices(C$zuf,C$zui-6,4,C$zue,0,2)),this.addAfterPosition(C$zua-C$zux,C$zue,0,C$zuv,C$zuA);continue}}for(;;C$zun++){var C$zuS=C$zuC[C$zun];if(!(C$zuS<C$zua)){0==C$zun?C$zua/=C$zuS:C$zua=(C$zua-(C$zuq=C$zuC[C$zun-1]))/(C$zuS-C$zuq);break}}C$zun!=C$zub&&(C$zub=C$zun,C$zuy&&C$zun==C$zug?(C$zut.computeWorldVertices(C$zuf,C$zui-4,4,C$zue,0,2),C$zut.computeWorldVertices(C$zuf,0,4,C$zue,4,2)):C$zut.computeWorldVertices(C$zuf,6*C$zun+2,8,C$zue,0,2)),this.addCurvePosition(C$zua,C$zue[0],C$zue[1],C$zue[2],C$zue[3],C$zue[4],C$zue[5],C$zue[6],C$zue[7],C$zuv,C$zuA,C$zuu||0<C$zur&&0==C$zuH)}return C$zuv}C$zuy?(C$zue=C$zuJ.Utils.setArraySize(this.world,C$zui+=2),C$zut.computeWorldVertices(C$zuf,2,C$zui-4,C$zue,0,2),C$zut.computeWorldVertices(C$zuf,0,2,C$zue,C$zui-4,2),C$zue[C$zui-2]=C$zue[0],C$zue[C$zui-1]=C$zue[1]):(C$zug--,C$zue=C$zuJ.Utils.setArraySize(this.world,C$zui-=4),C$zut.computeWorldVertices(C$zuf,2,C$zui,C$zue,0,2));var C$zuT=C$zuJ.Utils.setArraySize(this.curves,C$zug);var C$zuo=0;var C$zuw=C$zue[0],C$zuE=C$zue[1],C$zuP=0,C$zuM=0,C$zuR=0,C$zuI=0,C$zuB=0,C$zuD=0;var C$zuL=0,C$zuV=0,C$zuO=0,C$zuF=0,C$zuN=0,C$zuk=0,C$zus=0,C$zuc=0;for(var C$zur=0,C$zuz=2;C$zur<C$zug;C$zur++,C$zuz+=6)C$zuP=C$zue[C$zuz],C$zuM=C$zue[C$zuz+1],C$zuR=C$zue[C$zuz+2],C$zuI=C$zue[C$zuz+3],C$zuN=2*(C$zuL=.1875*(C$zuw-2*C$zuP+C$zuR))+(C$zuO=.09375*(3*(C$zuP-C$zuR)-C$zuw+(C$zuB=C$zue[C$zuz+4]))),C$zuk=2*(C$zuV=.1875*(C$zuE-2*C$zuM+C$zuI))+(C$zuF=.09375*(3*(C$zuM-C$zuI)-C$zuE+(C$zuD=C$zue[C$zuz+5]))),C$zus=.75*(C$zuP-C$zuw)+C$zuL+.16666667*C$zuO,C$zuc=.75*(C$zuM-C$zuE)+C$zuV+.16666667*C$zuF,C$zuo+=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zus+=C$zuN,C$zuc+=C$zuk,C$zuN+=C$zuO,C$zuk+=C$zuF,C$zuo+=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zus+=C$zuN,C$zuc+=C$zuk,C$zuo+=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zus+=C$zuN+C$zuO,C$zuc+=C$zuk+C$zuF,C$zuo+=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zuT[C$zur]=C$zuo,C$zuw=C$zuB,C$zuE=C$zuD;if(C$zup*=C$zu_?C$zuo:C$zuo/C$zut.lengths[C$zug-1],C$zud)for(C$zur=1;C$zur<C$zuh;C$zur++)C$zum[C$zur]*=C$zuo;var C$zuG=this.segments;var C$zuU=0;for(var C$zur=0,C$zuA=0,C$zun=0,C$zuW=0;C$zur<C$zuh;C$zur++,C$zuA+=3){var C$zuH;C$zua=C$zup+=C$zuH=C$zum[C$zur];if(C$zuy)(C$zua%=C$zuo)<0&&(C$zua+=C$zuo),C$zun=0;else{if(C$zua<0){this.addBeforePosition(C$zua,C$zue,0,C$zuv,C$zuA);continue}if(C$zuo<C$zua){this.addAfterPosition(C$zua-C$zuo,C$zue,C$zui-4,C$zuv,C$zuA);continue}}for(;;C$zun++){var C$zuj=C$zuT[C$zun];if(!(C$zuj<C$zua)){0==C$zun?C$zua/=C$zuj:C$zua=(C$zua-(C$zuq=C$zuT[C$zun-1]))/(C$zuj-C$zuq);break}}if(C$zun!=C$zub){var C$zul=6*(C$zub=C$zun);for(C$zuw=C$zue[C$zul],C$zuE=C$zue[C$zul+1],C$zuP=C$zue[C$zul+2],C$zuM=C$zue[C$zul+3],C$zuR=C$zue[C$zul+4],C$zuI=C$zue[C$zul+5],C$zuN=2*(C$zuL=.03*(C$zuw-2*C$zuP+C$zuR))+(C$zuO=.006*(3*(C$zuP-C$zuR)-C$zuw+(C$zuB=C$zue[C$zul+6]))),C$zuk=2*(C$zuV=.03*(C$zuE-2*C$zuM+C$zuI))+(C$zuF=.006*(3*(C$zuM-C$zuI)-C$zuE+(C$zuD=C$zue[C$zul+7]))),C$zus=.3*(C$zuP-C$zuw)+C$zuL+.16666667*C$zuO,C$zuc=.3*(C$zuM-C$zuE)+C$zuV+.16666667*C$zuF,C$zuU=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zuG[0]=C$zuU,C$zul=1;C$zul<8;C$zul++)C$zus+=C$zuN,C$zuc+=C$zuk,C$zuN+=C$zuO,C$zuk+=C$zuF,C$zuU+=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zuG[C$zul]=C$zuU;C$zus+=C$zuN,C$zuc+=C$zuk,C$zuU+=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zuG[8]=C$zuU,C$zus+=C$zuN+C$zuO,C$zuc+=C$zuk+C$zuF,C$zuU+=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zuG[9]=C$zuU,C$zuW=0}for(C$zua*=C$zuU;;C$zuW++){var C$zuX=C$zuG[C$zuW];if(!(C$zuX<C$zua)){var C$zuq;0==C$zuW?C$zua/=C$zuX:C$zua=C$zuW+(C$zua-(C$zuq=C$zuG[C$zuW-1]))/(C$zuX-C$zuq);break}}this.addCurvePosition(.1*C$zua,C$zuw,C$zuE,C$zuP,C$zuM,C$zuR,C$zuI,C$zuB,C$zuD,C$zuv,C$zuA,C$zuu||0<C$zur&&0==C$zuH)}return C$zuv},PathConstraint.prototype.addBeforePosition=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zue[C$zui],C$zuo=C$zue[C$zui+1],C$zus=C$zue[C$zui+2]-C$zua,C$zue=C$zue[C$zui+3]-C$zuo,C$zui=Math.atan2(C$zue,C$zus);C$zur[C$zun]=C$zua+C$zut*Math.cos(C$zui),C$zur[C$zun+1]=C$zuo+C$zut*Math.sin(C$zui),C$zur[C$zun+2]=C$zui},PathConstraint.prototype.addAfterPosition=function(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=C$zue[C$zui+2],C$zuo=C$zue[C$zui+3],C$zus=C$zua-C$zue[C$zui],C$zue=C$zuo-C$zue[C$zui+1],C$zui=Math.atan2(C$zue,C$zus);C$zur[C$zun]=C$zua+C$zut*Math.cos(C$zui),C$zur[C$zun+1]=C$zuo+C$zut*Math.sin(C$zui),C$zur[C$zun+2]=C$zui},PathConstraint.prototype.addCurvePosition=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zuh,C$zuu,C$zua,C$zu_,C$zuo,C$zus,C$zud){if(0==C$zut||isNaN(C$zut))return C$zuo[C$zus]=C$zue,C$zuo[C$zus+1]=C$zui,void(C$zuo[C$zus+2]=Math.atan2(C$zun-C$zui,C$zur-C$zue));var C$zuf=C$zut*C$zut,C$zup=C$zuf*C$zut,C$zuc=1-C$zut,C$zum=C$zuc*C$zuc,C$zul=C$zum*C$zuc;var C$zuv=C$zuc*C$zut,C$zuy=3*C$zuv,C$zuc=C$zuc*C$zuy,C$zuy=C$zuy*C$zut;C$zua=C$zue*C$zul+C$zur*C$zuc+C$zuh*C$zuy+C$zua*C$zup,C$zul=C$zui*C$zul+C$zun*C$zuc+C$zuu*C$zuy+C$zu_*C$zup;C$zuo[C$zus]=C$zua,C$zuo[C$zus+1]=C$zul,C$zud&&(C$zuo[C$zus+2]=C$zut<.001?Math.atan2(C$zun-C$zui,C$zur-C$zue):Math.atan2(C$zul-(C$zui*C$zum+C$zun*C$zuv*2+C$zuu*C$zuf),C$zua-(C$zue*C$zum+C$zur*C$zuv*2+C$zuh*C$zuf)))},PathConstraint.NONE=-1,PathConstraint.BEFORE=-2,PathConstraint.AFTER=-3,PathConstraint.epsilon=1e-5,C$zuJ.PathConstraint=PathConstraint}(C$zur=C$zur||{}),C$zut=C$zur=C$zur||{},C$zu_=C$zut.ConstraintData,C$zuy(PathConstraintData,C$zu_),C$zue=PathConstraintData,C$zut.PathConstraintData=C$zue,(C$zue=C$zut.PositionMode||(C$zut.PositionMode={}))[C$zue.Fixed=0]="Fixed",C$zue[C$zue.Percent=1]="Percent",(C$zue=C$zut.SpacingMode||(C$zut.SpacingMode={}))[C$zue.Length=0]="Length",C$zue[C$zue.Fixed=1]="Fixed",C$zue[C$zue.Percent=2]="Percent",(C$zue=C$zut.RotateMode||(C$zut.RotateMode={}))[C$zue.Tangent=0]="Tangent",C$zue[C$zue.Chain=1]="Chain",C$zue[C$zue.ChainScale=2]="ChainScale",function(C$zut){Assets.prototype.loaded=function(){var C$zut=0;for(var C$zue in this.assets)C$zut++;return C$zut};var C$zun=Assets;function Assets(C$zut){this.toLoad=new Array,this.assets={},this.clientId=C$zut}function SharedAssetManager(C$zut){void 0===C$zut&&(C$zut=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=C$zut}SharedAssetManager.prototype.queueAsset=function(C$zut,C$zue,C$zui){var C$zur=this.clientAssets[C$zut];return null==C$zur&&(C$zur=new C$zun(C$zut),this.clientAssets[C$zut]=C$zur),null!==C$zue&&(C$zur.textureLoader=C$zue),C$zur.toLoad.push(C$zui),this.queuedAssets[C$zui]!==C$zui&&(this.queuedAssets[C$zui]=C$zui,!0)},SharedAssetManager.prototype.loadText=function(C$zut,C$zue){var C$zui=this;var C$zur;C$zue=this.pathPrefix+C$zue,this.queueAsset(C$zut,null,C$zue)&&((C$zur=new XMLHttpRequest).onreadystatechange=function(){C$zur.readyState==XMLHttpRequest.DONE&&(200<=C$zur.status&&C$zur.status<300?C$zui.rawAssets[C$zue]=C$zur.responseText:C$zui.errors[C$zue]="Couldn't load text "+C$zue+": status "+C$zur.status+", "+C$zur.responseText)},C$zur.open("GET",C$zue,!0),C$zur.send())},SharedAssetManager.prototype.loadJson=function(C$zut,C$zue){var C$zui=this;var C$zur;C$zue=this.pathPrefix+C$zue,this.queueAsset(C$zut,null,C$zue)&&((C$zur=new XMLHttpRequest).onreadystatechange=function(){C$zur.readyState==XMLHttpRequest.DONE&&(200<=C$zur.status&&C$zur.status<300?C$zui.rawAssets[C$zue]=JSON.parse(C$zur.responseText):C$zui.errors[C$zue]="Couldn't load text "+C$zue+": status "+C$zur.status+", "+C$zur.responseText)},C$zur.open("GET",C$zue,!0),C$zur.send())},SharedAssetManager.prototype.loadTexture=function(C$zut,C$zue,C$zui){var C$zur=this;var C$zun;C$zui=this.pathPrefix+C$zui,this.queueAsset(C$zut,C$zue,C$zui)&&((C$zun=new Image).src=C$zui,C$zun.crossOrigin="anonymous",C$zun.onload=function(C$zut){C$zur.rawAssets[C$zui]=C$zun},C$zun.onerror=function(C$zut){C$zur.errors[C$zui]="Couldn't load image "+C$zui})},SharedAssetManager.prototype.get=function(C$zut,C$zue){C$zue=this.pathPrefix+C$zue;C$zut=this.clientAssets[C$zut];return null==C$zut||C$zut.assets[C$zue]},SharedAssetManager.prototype.updateClientAssets=function(C$zut){for(var C$zue=0;C$zue<C$zut.toLoad.length;C$zue++){var C$zui=C$zut.toLoad[C$zue];var C$zur=C$zut.assets[C$zui];null!=C$zur||null!=(C$zur=this.rawAssets[C$zui])&&(C$zur instanceof HTMLImageElement?C$zut.assets[C$zui]=C$zut.textureLoader(C$zur):C$zut.assets[C$zui]=C$zur)}},SharedAssetManager.prototype.isLoadingComplete=function(C$zut){C$zut=this.clientAssets[C$zut];return null==C$zut||(this.updateClientAssets(C$zut),C$zut.toLoad.length==C$zut.loaded())},SharedAssetManager.prototype.dispose=function(){},SharedAssetManager.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},SharedAssetManager.prototype.getErrors=function(){return this.errors},C$zut.SharedAssetManager=SharedAssetManager}(C$zur=C$zur||{}),function(C$zuy){function Skeleton(C$zut){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==C$zut)throw new Error("data cannot be null.");this.data=C$zut,this.bones=new Array;for(var C$zue=0;C$zue<C$zut.bones.length;C$zue++){var C$zui=C$zut.bones[C$zue];var C$zur=void 0;var C$zun;null==C$zui.parent?C$zur=new C$zuy.Bone(C$zui,this,null):(C$zun=this.bones[C$zui.parent.index],C$zur=new C$zuy.Bone(C$zui,this,C$zun),C$zun.children.push(C$zur)),this.bones.push(C$zur)}this.slots=new Array,this.drawOrder=new Array;for(C$zue=0;C$zue<C$zut.slots.length;C$zue++){var C$zua=C$zut.slots[C$zue];C$zur=this.bones[C$zua.boneData.index];C$zua=new C$zuy.Slot(C$zua,C$zur);this.slots.push(C$zua),this.drawOrder.push(C$zua)}this.ikConstraints=new Array;for(C$zue=0;C$zue<C$zut.ikConstraints.length;C$zue++){var C$zuo=C$zut.ikConstraints[C$zue];this.ikConstraints.push(new C$zuy.IkConstraint(C$zuo,this))}this.transformConstraints=new Array;for(C$zue=0;C$zue<C$zut.transformConstraints.length;C$zue++){var C$zus=C$zut.transformConstraints[C$zue];this.transformConstraints.push(new C$zuy.TransformConstraint(C$zus,this))}this.pathConstraints=new Array;for(C$zue=0;C$zue<C$zut.pathConstraints.length;C$zue++){var C$zuc=C$zut.pathConstraints[C$zue];this.pathConstraints.push(new C$zuy.PathConstraint(C$zuc,this))}this.color=new C$zuy.Color(1,1,1,1),this.updateCache()}Skeleton.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;var C$zut=this.bones;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)(C$zur=C$zut[C$zue]).sorted=C$zur.data.skinRequired,C$zur.active=!C$zur.sorted;if(null!=this.skin){var C$zuh=this.skin.bones;for(C$zue=0,C$zui=this.skin.bones.length;C$zue<C$zui;C$zue++){var C$zur=this.bones[C$zuh[C$zue].index];for(;C$zur.sorted=!1,C$zur.active=!0,null!=(C$zur=C$zur.parent););}}var C$zun=this.ikConstraints;var C$zua=this.transformConstraints;var C$zuo=this.pathConstraints;var C$zus=C$zun.length,C$zuu=C$zua.length,C$zu_=C$zuo.length;var C$zud=C$zus+C$zuu+C$zu_;C$zut:for(C$zue=0;C$zue<C$zud;C$zue++){for(var C$zuc=0;C$zuc<C$zus;C$zuc++)if((C$zul=C$zun[C$zuc]).data.order==C$zue){this.sortIkConstraint(C$zul);continue C$zut}for(C$zuc=0;C$zuc<C$zuu;C$zuc++)if((C$zul=C$zua[C$zuc]).data.order==C$zue){this.sortTransformConstraint(C$zul);continue C$zut}for(C$zuc=0;C$zuc<C$zu_;C$zuc++){var C$zul;if((C$zul=C$zuo[C$zuc]).data.order==C$zue){this.sortPathConstraint(C$zul);continue C$zut}}}for(C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)this.sortBone(C$zut[C$zue])},Skeleton.prototype.sortIkConstraint=function(C$zut){var C$zue,C$zui,C$zur;C$zut.active=C$zut.target.isActive()&&(!C$zut.data.skinRequired||null!=this.skin&&C$zuy.Utils.contains(this.skin.constraints,C$zut.data,!0)),C$zut.active&&(C$zue=C$zut.target,this.sortBone(C$zue),C$zui=(C$zue=C$zut.bones)[0],this.sortBone(C$zui),1<C$zue.length&&(C$zur=C$zue[C$zue.length-1],-1<this._updateCache.indexOf(C$zur)||this.updateCacheReset.push(C$zur)),this._updateCache.push(C$zut),this.sortReset(C$zui.children),C$zue[C$zue.length-1].sorted=!0)},Skeleton.prototype.sortPathConstraint=function(C$zut){if(C$zut.active=C$zut.target.bone.isActive()&&(!C$zut.data.skinRequired||null!=this.skin&&C$zuy.Utils.contains(this.skin.constraints,C$zut.data,!0)),C$zut.active){var C$zue=C$zut.target;var C$zui=C$zue.data.index;var C$zur=C$zue.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,C$zui,C$zur),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,C$zui,C$zur);for(var C$zun=0,C$zua=this.data.skins.length;C$zun<C$zua;C$zun++)this.sortPathConstraintAttachment(this.data.skins[C$zun],C$zui,C$zur);C$zue=C$zue.getAttachment();C$zue instanceof C$zuy.PathAttachment&&this.sortPathConstraintAttachmentWith(C$zue,C$zur);var C$zuo=C$zut.bones;var C$zus=C$zuo.length;for(C$zun=0;C$zun<C$zus;C$zun++)this.sortBone(C$zuo[C$zun]);this._updateCache.push(C$zut);for(C$zun=0;C$zun<C$zus;C$zun++)this.sortReset(C$zuo[C$zun].children);for(C$zun=0;C$zun<C$zus;C$zun++)C$zuo[C$zun].sorted=!0}},Skeleton.prototype.sortTransformConstraint=function(C$zut){if(C$zut.active=C$zut.target.isActive()&&(!C$zut.data.skinRequired||null!=this.skin&&C$zuy.Utils.contains(this.skin.constraints,C$zut.data,!0)),C$zut.active){this.sortBone(C$zut.target);var C$zue=C$zut.bones;var C$zui=C$zue.length;if(C$zut.data.local)for(var C$zur=0;C$zur<C$zui;C$zur++){var C$zun=C$zue[C$zur];this.sortBone(C$zun.parent),-1<this._updateCache.indexOf(C$zun)||this.updateCacheReset.push(C$zun)}else for(C$zur=0;C$zur<C$zui;C$zur++)this.sortBone(C$zue[C$zur]);this._updateCache.push(C$zut);for(var C$zua=0;C$zua<C$zui;C$zua++)this.sortReset(C$zue[C$zua].children);for(C$zua=0;C$zua<C$zui;C$zua++)C$zue[C$zua].sorted=!0}},Skeleton.prototype.sortPathConstraintAttachment=function(C$zut,C$zue,C$zui){var C$zur=C$zut.attachments[C$zue];if(C$zur)for(var C$zun in C$zur)this.sortPathConstraintAttachmentWith(C$zur[C$zun],C$zui)},Skeleton.prototype.sortPathConstraintAttachmentWith=function(C$zut,C$zue){if(C$zut instanceof C$zuy.PathAttachment){var C$zui=C$zut.bones;if(null==C$zui)this.sortBone(C$zue);else{var C$zur=this.bones;var C$zun=0;for(;C$zun<C$zui.length;){var C$zua=C$zui[C$zun++];for(var C$zuo=C$zun+C$zua;C$zun<C$zuo;C$zun++){var C$zus=C$zui[C$zun];this.sortBone(C$zur[C$zus])}}}}},Skeleton.prototype.sortBone=function(C$zut){var C$zue;C$zut.sorted||(null!=(C$zue=C$zut.parent)&&this.sortBone(C$zue),C$zut.sorted=!0,this._updateCache.push(C$zut))},Skeleton.prototype.sortReset=function(C$zut){for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];C$zur.active&&(C$zur.sorted&&this.sortReset(C$zur.children),C$zur.sorted=!1)}},Skeleton.prototype.updateWorldTransform=function(){var C$zut=this.updateCacheReset;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++){var C$zur=C$zut[C$zue];C$zur.ax=C$zur.x,C$zur.ay=C$zur.y,C$zur.arotation=C$zur.rotation,C$zur.ascaleX=C$zur.scaleX,C$zur.ascaleY=C$zur.scaleY,C$zur.ashearX=C$zur.shearX,C$zur.ashearY=C$zur.shearY,C$zur.appliedValid=!0}var C$zun=this._updateCache;for(C$zue=0,C$zui=C$zun.length;C$zue<C$zui;C$zue++)C$zun[C$zue].update()},Skeleton.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},Skeleton.prototype.setBonesToSetupPose=function(){var C$zut=this.bones;for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)C$zut[C$zue].setToSetupPose();var C$zur=this.ikConstraints;for(C$zue=0,C$zui=C$zur.length;C$zue<C$zui;C$zue++)(C$zus=C$zur[C$zue]).mix=C$zus.data.mix,C$zus.softness=C$zus.data.softness,C$zus.bendDirection=C$zus.data.bendDirection,C$zus.compress=C$zus.data.compress,C$zus.stretch=C$zus.data.stretch;var C$zun=this.transformConstraints;for(C$zue=0,C$zui=C$zun.length;C$zue<C$zui;C$zue++){var C$zua=(C$zus=C$zun[C$zue]).data;C$zus.rotateMix=C$zua.rotateMix,C$zus.translateMix=C$zua.translateMix,C$zus.scaleMix=C$zua.scaleMix,C$zus.shearMix=C$zua.shearMix}var C$zuo=this.pathConstraints;for(C$zue=0,C$zui=C$zuo.length;C$zue<C$zui;C$zue++){var C$zus;C$zua=(C$zus=C$zuo[C$zue]).data;C$zus.position=C$zua.position,C$zus.spacing=C$zua.spacing,C$zus.rotateMix=C$zua.rotateMix,C$zus.translateMix=C$zua.translateMix}},Skeleton.prototype.setSlotsToSetupPose=function(){var C$zut=this.slots;C$zuy.Utils.arrayCopy(C$zut,0,this.drawOrder,0,C$zut.length);for(var C$zue=0,C$zui=C$zut.length;C$zue<C$zui;C$zue++)C$zut[C$zue].setToSetupPose()},Skeleton.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},Skeleton.prototype.findBone=function(C$zut){if(null==C$zut)throw new Error("boneName cannot be null.");var C$zue=this.bones;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.data.name==C$zut)return C$zun}return null},Skeleton.prototype.findBoneIndex=function(C$zut){if(null==C$zut)throw new Error("boneName cannot be null.");var C$zue=this.bones;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui].data.name==C$zut)return C$zui;return-1},Skeleton.prototype.findSlot=function(C$zut){if(null==C$zut)throw new Error("slotName cannot be null.");var C$zue=this.slots;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.data.name==C$zut)return C$zun}return null},Skeleton.prototype.findSlotIndex=function(C$zut){if(null==C$zut)throw new Error("slotName cannot be null.");var C$zue=this.slots;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui].data.name==C$zut)return C$zui;return-1},Skeleton.prototype.setSkinByName=function(C$zut){var C$zue=this.data.findSkin(C$zut);if(null==C$zue)throw new Error("Skin not found: "+C$zut);this.setSkin(C$zue)},Skeleton.prototype.setSkin=function(C$zut){if(C$zut!=this.skin){if(null!=C$zut)if(null!=this.skin)C$zut.attachAll(this,this.skin);else{var C$zue=this.slots;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];var C$zua=C$zun.data.attachmentName;null==C$zua||null!=(C$zua=C$zut.getAttachment(C$zui,C$zua))&&C$zun.setAttachment(C$zua)}}this.skin=C$zut,this.updateCache()}},Skeleton.prototype.getAttachmentByName=function(C$zut,C$zue){return this.getAttachment(this.data.findSlotIndex(C$zut),C$zue)},Skeleton.prototype.getAttachment=function(C$zut,C$zue){if(null==C$zue)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var C$zui=this.skin.getAttachment(C$zut,C$zue);if(null!=C$zui)return C$zui}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(C$zut,C$zue):null},Skeleton.prototype.setAttachment=function(C$zut,C$zue){if(null==C$zut)throw new Error("slotName cannot be null.");var C$zui=this.slots;for(var C$zur=0,C$zun=C$zui.length;C$zur<C$zun;C$zur++){var C$zua=C$zui[C$zur];if(C$zua.data.name==C$zut){var C$zuo=null;if(null!=C$zue&&null==(C$zuo=this.getAttachment(C$zur,C$zue)))throw new Error("Attachment not found: "+C$zue+", for slot: "+C$zut);return void C$zua.setAttachment(C$zuo)}}throw new Error("Slot not found: "+C$zut)},Skeleton.prototype.findIkConstraint=function(C$zut){if(null==C$zut)throw new Error("constraintName cannot be null.");var C$zue=this.ikConstraints;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.data.name==C$zut)return C$zun}return null},Skeleton.prototype.findTransformConstraint=function(C$zut){if(null==C$zut)throw new Error("constraintName cannot be null.");var C$zue=this.transformConstraints;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.data.name==C$zut)return C$zun}return null},Skeleton.prototype.findPathConstraint=function(C$zut){if(null==C$zut)throw new Error("constraintName cannot be null.");var C$zue=this.pathConstraints;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.data.name==C$zut)return C$zun}return null},Skeleton.prototype.getBounds=function(C$zuh,C$zuu,C$zut){if(void 0===C$zut&&(C$zut=new Array(2)),null==C$zuh)throw new Error("offset cannot be null.");if(null==C$zuu)throw new Error("size cannot be null.");var C$zu_=this.drawOrder;var C$zue=Number.POSITIVE_INFINITY,C$zui=Number.POSITIVE_INFINITY,C$zur=Number.NEGATIVE_INFINITY,C$zun=Number.NEGATIVE_INFINITY;for(var C$zud=0,C$zuf=C$zu_.length;C$zud<C$zuf;C$zud++){var C$zua=C$zu_[C$zud];if(C$zua.bone.active){var C$zuo=0;var C$zus=null;var C$zuc=C$zua.getAttachment();if(C$zuc instanceof C$zuy.RegionAttachment?(C$zus=C$zuy.Utils.setArraySize(C$zut,C$zuo=8,0),C$zuc.computeWorldVertices(C$zua.bone,C$zus,0,2)):C$zuc instanceof C$zuy.MeshAttachment&&(C$zuo=(C$zuc=C$zuc).worldVerticesLength,C$zus=C$zuy.Utils.setArraySize(C$zut,C$zuo,0),C$zuc.computeWorldVertices(C$zua,0,C$zuo,C$zus,0,2)),null!=C$zus)for(var C$zul=0,C$zup=C$zus.length;C$zul<C$zup;C$zul+=2){var C$zum=C$zus[C$zul],C$zuv=C$zus[C$zul+1];C$zue=Math.min(C$zue,C$zum),C$zui=Math.min(C$zui,C$zuv),C$zur=Math.max(C$zur,C$zum),C$zun=Math.max(C$zun,C$zuv)}}}C$zuh.set(C$zue,C$zui),C$zuu.set(C$zur-C$zue,C$zun-C$zui)},Skeleton.prototype.update=function(C$zut){this.time+=C$zut},C$zuy.Skeleton=Skeleton}(C$zur=C$zur||{});var C$zuH=C$zur=C$zur||{};function SkeletonBinary(C$zut){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=C$zut}SkeletonBinary.prototype.readSkeletonData=function(C$zuh){var C$zut=this.scale;var C$zue=new C$zuH.SkeletonData;C$zue.name="";var C$zui=new C$zum(C$zuh);C$zue.hash=C$zui.readString(),C$zue.version=C$zui.readString(),C$zue.x=C$zui.readFloat(),C$zue.y=C$zui.readFloat(),C$zue.width=C$zui.readFloat(),C$zue.height=C$zui.readFloat();var C$zuu=C$zui.readBoolean();C$zuu&&(C$zue.fps=C$zui.readFloat(),C$zue.imagesPath=C$zui.readString(),C$zue.audioPath=C$zui.readString());var C$zur=0;C$zur=C$zui.readInt(!0);for(var C$zun=0;C$zun<C$zur;C$zun++)C$zui.strings.push(C$zui.readString());C$zur=C$zui.readInt(!0);for(C$zun=0;C$zun<C$zur;C$zun++){var C$zu_=C$zui.readString();var C$zud=0==C$zun?null:C$zue.bones[C$zui.readInt(!0)];(C$zua=new C$zuH.BoneData(C$zun,C$zu_,C$zud)).rotation=C$zui.readFloat(),C$zua.x=C$zui.readFloat()*C$zut,C$zua.y=C$zui.readFloat()*C$zut,C$zua.scaleX=C$zui.readFloat(),C$zua.scaleY=C$zui.readFloat(),C$zua.shearX=C$zui.readFloat(),C$zua.shearY=C$zui.readFloat(),C$zua.length=C$zui.readFloat()*C$zut,C$zua.transformMode=SkeletonBinary.TransformModeValues[C$zui.readInt(!0)],C$zua.skinRequired=C$zui.readBoolean(),C$zuu&&C$zuH.Color.rgba8888ToColor(C$zua.color,C$zui.readInt32()),C$zue.bones.push(C$zua)}C$zur=C$zui.readInt(!0);for(C$zun=0;C$zun<C$zur;C$zun++){var C$zuf=C$zui.readString();var C$zup=C$zue.bones[C$zui.readInt(!0)];var C$zua=new C$zuH.SlotData(C$zun,C$zuf,C$zup);C$zuH.Color.rgba8888ToColor(C$zua.color,C$zui.readInt32());C$zuf=C$zui.readInt32();-1!=C$zuf&&C$zuH.Color.rgb888ToColor(C$zua.darkColor=new C$zuH.Color,C$zuf),C$zua.attachmentName=C$zui.readStringRef(),C$zua.blendMode=SkeletonBinary.BlendModeValues[C$zui.readInt(!0)],C$zue.slots.push(C$zua)}C$zur=C$zui.readInt(!0);for(var C$zun=0,C$zuo=void 0;C$zun<C$zur;C$zun++){(C$zua=new C$zuH.IkConstraintData(C$zui.readString())).order=C$zui.readInt(!0),C$zua.skinRequired=C$zui.readBoolean(),C$zuo=C$zui.readInt(!0);for(var C$zus=0;C$zus<C$zuo;C$zus++)C$zua.bones.push(C$zue.bones[C$zui.readInt(!0)]);C$zua.target=C$zue.bones[C$zui.readInt(!0)],C$zua.mix=C$zui.readFloat(),C$zua.softness=C$zui.readFloat()*C$zut,C$zua.bendDirection=C$zui.readByte(),C$zua.compress=C$zui.readBoolean(),C$zua.stretch=C$zui.readBoolean(),C$zua.uniform=C$zui.readBoolean(),C$zue.ikConstraints.push(C$zua)}C$zur=C$zui.readInt(!0);for(C$zun=0,C$zuo=void 0;C$zun<C$zur;C$zun++){(C$zua=new C$zuH.TransformConstraintData(C$zui.readString())).order=C$zui.readInt(!0),C$zua.skinRequired=C$zui.readBoolean(),C$zuo=C$zui.readInt(!0);for(C$zus=0;C$zus<C$zuo;C$zus++)C$zua.bones.push(C$zue.bones[C$zui.readInt(!0)]);C$zua.target=C$zue.bones[C$zui.readInt(!0)],C$zua.local=C$zui.readBoolean(),C$zua.relative=C$zui.readBoolean(),C$zua.offsetRotation=C$zui.readFloat(),C$zua.offsetX=C$zui.readFloat()*C$zut,C$zua.offsetY=C$zui.readFloat()*C$zut,C$zua.offsetScaleX=C$zui.readFloat(),C$zua.offsetScaleY=C$zui.readFloat(),C$zua.offsetShearY=C$zui.readFloat(),C$zua.rotateMix=C$zui.readFloat(),C$zua.translateMix=C$zui.readFloat(),C$zua.scaleMix=C$zui.readFloat(),C$zua.shearMix=C$zui.readFloat(),C$zue.transformConstraints.push(C$zua)}C$zur=C$zui.readInt(!0);for(C$zun=0,C$zuo=void 0;C$zun<C$zur;C$zun++){(C$zua=new C$zuH.PathConstraintData(C$zui.readString())).order=C$zui.readInt(!0),C$zua.skinRequired=C$zui.readBoolean(),C$zuo=C$zui.readInt(!0);for(C$zus=0;C$zus<C$zuo;C$zus++)C$zua.bones.push(C$zue.bones[C$zui.readInt(!0)]);C$zua.target=C$zue.slots[C$zui.readInt(!0)],C$zua.positionMode=SkeletonBinary.PositionModeValues[C$zui.readInt(!0)],C$zua.spacingMode=SkeletonBinary.SpacingModeValues[C$zui.readInt(!0)],C$zua.rotateMode=SkeletonBinary.RotateModeValues[C$zui.readInt(!0)],C$zua.offsetRotation=C$zui.readFloat(),C$zua.position=C$zui.readFloat(),C$zua.positionMode==C$zuH.PositionMode.Fixed&&(C$zua.position*=C$zut),C$zua.spacing=C$zui.readFloat(),C$zua.spacingMode!=C$zuH.SpacingMode.Length&&C$zua.spacingMode!=C$zuH.SpacingMode.Fixed||(C$zua.spacing*=C$zut),C$zua.rotateMix=C$zui.readFloat(),C$zua.translateMix=C$zui.readFloat(),C$zue.pathConstraints.push(C$zua)}C$zuh=this.readSkin(C$zui,C$zue,!0,C$zuu);null!=C$zuh&&(C$zue.defaultSkin=C$zuh,C$zue.skins.push(C$zuh));C$zun=C$zue.skins.length;for(C$zuH.Utils.setArraySize(C$zue.skins,C$zur=C$zun+C$zui.readInt(!0));C$zun<C$zur;C$zun++)C$zue.skins[C$zun]=this.readSkin(C$zui,C$zue,!1,C$zuu);C$zur=this.linkedMeshes.length;for(C$zun=0;C$zun<C$zur;C$zun++){var C$zuc=this.linkedMeshes[C$zun];var C$zul=null==C$zuc.skin?C$zue.defaultSkin:C$zue.findSkin(C$zuc.skin);if(null==C$zul)throw new Error("Skin not found: "+C$zuc.skin);C$zul=C$zul.getAttachment(C$zuc.slotIndex,C$zuc.parent);if(null==C$zul)throw new Error("Parent mesh not found: "+C$zuc.parent);C$zuc.mesh.deformAttachment=C$zuc.inheritDeform?C$zul:C$zuc.mesh,C$zuc.mesh.setParentMesh(C$zul),C$zuc.mesh.updateUVs()}this.linkedMeshes.length=0,C$zur=C$zui.readInt(!0);for(C$zun=0;C$zun<C$zur;C$zun++)(C$zua=new C$zuH.EventData(C$zui.readStringRef())).intValue=C$zui.readInt(!1),C$zua.floatValue=C$zui.readFloat(),C$zua.stringValue=C$zui.readString(),C$zua.audioPath=C$zui.readString(),null!=C$zua.audioPath&&(C$zua.volume=C$zui.readFloat(),C$zua.balance=C$zui.readFloat()),C$zue.events.push(C$zua);C$zur=C$zui.readInt(!0);for(C$zun=0;C$zun<C$zur;C$zun++)C$zue.animations.push(this.readAnimation(C$zui,C$zui.readString(),C$zue));return C$zue},SkeletonBinary.prototype.readSkin=function(C$zut,C$zue,C$zuh,C$zuu){var C$zui=null;var C$zur=0;if(C$zuh){if(0==(C$zur=C$zut.readInt(!0)))return null;C$zui=new C$zuH.Skin("default")}else{(C$zui=new C$zuH.Skin(C$zut.readStringRef())).bones.length=C$zut.readInt(!0);for(var C$zun=0,C$zua=C$zui.bones.length;C$zun<C$zua;C$zun++)C$zui.bones[C$zun]=C$zue.bones[C$zut.readInt(!0)];for(C$zun=0,C$zua=C$zut.readInt(!0);C$zun<C$zua;C$zun++)C$zui.constraints.push(C$zue.ikConstraints[C$zut.readInt(!0)]);for(C$zun=0,C$zua=C$zut.readInt(!0);C$zun<C$zua;C$zun++)C$zui.constraints.push(C$zue.transformConstraints[C$zut.readInt(!0)]);for(C$zun=0,C$zua=C$zut.readInt(!0);C$zun<C$zua;C$zun++)C$zui.constraints.push(C$zue.pathConstraints[C$zut.readInt(!0)]);C$zur=C$zut.readInt(!0)}for(C$zun=0;C$zun<C$zur;C$zun++){var C$zuo=C$zut.readInt(!0);for(var C$zus=0,C$zu_=C$zut.readInt(!0);C$zus<C$zu_;C$zus++){var C$zuc=C$zut.readStringRef();var C$zul=this.readAttachment(C$zut,C$zue,C$zui,C$zuo,C$zuc,C$zuu);null!=C$zul&&C$zui.setAttachment(C$zuo,C$zuc,C$zul)}}return C$zui},SkeletonBinary.prototype.readAttachment=function(C$zut,C$zuh,C$zuu,C$zu_,C$zud,C$zue){var C$zuf=this.scale;var C$zui=C$zut.readStringRef();null==C$zui&&(C$zui=C$zud);C$zud=C$zut.readByte();switch(SkeletonBinary.AttachmentTypeValues[C$zud]){case C$zuH.AttachmentType.Region:var C$zur=C$zut.readStringRef();var C$zup=C$zut.readFloat();var C$zum=C$zut.readFloat();var C$zuv=C$zut.readFloat();var C$zuy=C$zut.readFloat();var C$zun=C$zut.readFloat();var C$zug=C$zut.readFloat();var C$zua=C$zut.readFloat();var C$zuo=C$zut.readInt32();null==C$zur&&(C$zur=C$zui);var C$zus=this.attachmentLoader.newRegionAttachment(C$zuu,C$zui,C$zur);return null==C$zus?null:(C$zus.path=C$zur,C$zus.x=C$zum*C$zuf,C$zus.y=C$zuv*C$zuf,C$zus.scaleX=C$zuy,C$zus.scaleY=C$zun,C$zus.rotation=C$zup,C$zus.width=C$zug*C$zuf,C$zus.height=C$zua*C$zuf,C$zuH.Color.rgba8888ToColor(C$zus.color,C$zuo),C$zus.updateOffset(),C$zus);case C$zuH.AttachmentType.BoundingBox:var C$zuc=C$zut.readInt(!0);var C$zub=this.readVertices(C$zut,C$zuc);C$zuo=C$zue?C$zut.readInt32():0;C$zuy=this.attachmentLoader.newBoundingBoxAttachment(C$zuu,C$zui);return null==C$zuy?null:(C$zuy.worldVerticesLength=C$zuc<<1,C$zuy.vertices=C$zub.vertices,C$zuy.bones=C$zub.bones,C$zue&&C$zuH.Color.rgba8888ToColor(C$zuy.color,C$zuo),C$zuy);case C$zuH.AttachmentType.Mesh:C$zur=C$zut.readStringRef();C$zuo=C$zut.readInt32();C$zuc=C$zut.readInt(!0);C$zun=this.readFloatArray(C$zut,C$zuc<<1,1);C$zus=this.readShortArray(C$zut);C$zub=this.readVertices(C$zut,C$zuc);C$zuy=C$zut.readInt(!0);var C$zuC=null;C$zug=0,C$zua=0;return C$zue&&(C$zuC=this.readShortArray(C$zut),C$zug=C$zut.readFloat(),C$zua=C$zut.readFloat()),null==C$zur&&(C$zur=C$zui),null==(C$zul=this.attachmentLoader.newMeshAttachment(C$zuu,C$zui,C$zur))?null:(C$zul.path=C$zur,C$zuH.Color.rgba8888ToColor(C$zul.color,C$zuo),C$zul.bones=C$zub.bones,C$zul.vertices=C$zub.vertices,C$zul.worldVerticesLength=C$zuc<<1,C$zul.triangles=C$zus,C$zul.regionUVs=C$zun,C$zul.updateUVs(),C$zul.hullLength=C$zuy<<1,C$zue&&(C$zul.edges=C$zuC,C$zul.width=C$zug*C$zuf,C$zul.height=C$zua*C$zuf),C$zul);case C$zuH.AttachmentType.LinkedMesh:C$zur=C$zut.readStringRef();C$zuo=C$zut.readInt32();C$zus=C$zut.readStringRef();C$zun=C$zut.readStringRef();C$zuy=C$zut.readBoolean();C$zug=0,C$zua=0;var C$zul;return C$zue&&(C$zug=C$zut.readFloat(),C$zua=C$zut.readFloat()),null==C$zur&&(C$zur=C$zui),null==(C$zul=this.attachmentLoader.newMeshAttachment(C$zuu,C$zui,C$zur))?null:(C$zul.path=C$zur,C$zuH.Color.rgba8888ToColor(C$zul.color,C$zuo),C$zue&&(C$zul.width=C$zug*C$zuf,C$zul.height=C$zua*C$zuf),this.linkedMeshes.push(new C$zuT(C$zul,C$zus,C$zu_,C$zun,C$zuy)),C$zul);case C$zuH.AttachmentType.Path:C$zuC=C$zut.readBoolean();C$zug=C$zut.readBoolean();C$zuc=C$zut.readInt(!0);C$zub=this.readVertices(C$zut,C$zuc);var C$zux=C$zuH.Utils.newArray(C$zuc/3,0);for(var C$zuA=0,C$zuS=C$zux.length;C$zuA<C$zuS;C$zuA++)C$zux[C$zuA]=C$zut.readFloat()*C$zuf;C$zuo=C$zue?C$zut.readInt32():0;return null==(C$zur=this.attachmentLoader.newPathAttachment(C$zuu,C$zui))?null:(C$zur.closed=C$zuC,C$zur.constantSpeed=C$zug,C$zur.worldVerticesLength=C$zuc<<1,C$zur.vertices=C$zub.vertices,C$zur.bones=C$zub.bones,C$zur.lengths=C$zux,C$zue&&C$zuH.Color.rgba8888ToColor(C$zur.color,C$zuo),C$zur);case C$zuH.AttachmentType.Point:C$zup=C$zut.readFloat();C$zum=C$zut.readFloat();C$zuv=C$zut.readFloat();C$zuo=C$zue?C$zut.readInt32():0;C$zua=this.attachmentLoader.newPointAttachment(C$zuu,C$zui);return null==C$zua?null:(C$zua.x=C$zum*C$zuf,C$zua.y=C$zuv*C$zuf,C$zua.rotation=C$zup,C$zue&&C$zuH.Color.rgba8888ToColor(C$zua.color,C$zuo),C$zua);case C$zuH.AttachmentType.Clipping:C$zus=C$zut.readInt(!0);C$zuc=C$zut.readInt(!0);C$zub=this.readVertices(C$zut,C$zuc);C$zuo=C$zue?C$zut.readInt32():0;C$zun=this.attachmentLoader.newClippingAttachment(C$zuu,C$zui);return null==C$zun?null:(C$zun.endSlot=C$zuh.slots[C$zus],C$zun.worldVerticesLength=C$zuc<<1,C$zun.vertices=C$zub.vertices,C$zun.bones=C$zub.bones,C$zue&&C$zuH.Color.rgba8888ToColor(C$zun.color,C$zuo),C$zun)}return null},SkeletonBinary.prototype.readVertices=function(C$zut,C$zue){var C$zui=C$zue<<1;var C$zur=new C$zud;var C$zun=this.scale;if(!C$zut.readBoolean())return C$zur.vertices=this.readFloatArray(C$zut,C$zui,C$zun),C$zur;var C$zua=new Array;var C$zuo=new Array;for(var C$zus=0;C$zus<C$zue;C$zus++){var C$zuc=C$zut.readInt(!0);C$zuo.push(C$zuc);for(var C$zul=0;C$zul<C$zuc;C$zul++)C$zuo.push(C$zut.readInt(!0)),C$zua.push(C$zut.readFloat()*C$zun),C$zua.push(C$zut.readFloat()*C$zun),C$zua.push(C$zut.readFloat())}return C$zur.vertices=C$zuH.Utils.toFloatArray(C$zua),C$zur.bones=C$zuo,C$zur},SkeletonBinary.prototype.readFloatArray=function(C$zut,C$zue,C$zui){var C$zur=new Array(C$zue);if(1==C$zui)for(var C$zun=0;C$zun<C$zue;C$zun++)C$zur[C$zun]=C$zut.readFloat();else for(C$zun=0;C$zun<C$zue;C$zun++)C$zur[C$zun]=C$zut.readFloat()*C$zui;return C$zur},SkeletonBinary.prototype.readShortArray=function(C$zut){var C$zue=C$zut.readInt(!0);var C$zui=new Array(C$zue);for(var C$zur=0;C$zur<C$zue;C$zur++)C$zui[C$zur]=C$zut.readShort();return C$zui},SkeletonBinary.prototype.readAnimation=function(C$zut,C$zuh,C$zuu){var C$zue=new Array;var C$zu_=this.scale;var C$zui=0;var C$zud=new C$zuH.Color;var C$zuf=new C$zuH.Color;for(var C$zur=0,C$zun=C$zut.readInt(!0);C$zur<C$zun;C$zur++){var C$zup=C$zut.readInt(!0);for(var C$zua=0,C$zum=C$zut.readInt(!0);C$zua<C$zum;C$zua++){var C$zuv=C$zut.readByte();var C$zuo=C$zut.readInt(!0);switch(C$zuv){case SkeletonBinary.SLOT_ATTACHMENT:(C$zuc=new C$zuH.AttachmentTimeline(C$zuo)).slotIndex=C$zup;for(var C$zus=0;C$zus<C$zuo;C$zus++)C$zuc.setFrame(C$zus,C$zut.readFloat(),C$zut.readStringRef());C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[C$zuo-1]);break;case SkeletonBinary.SLOT_COLOR:(C$zuc=new C$zuH.ColorTimeline(C$zuo)).slotIndex=C$zup;for(C$zus=0;C$zus<C$zuo;C$zus++){var C$zuy=C$zut.readFloat();C$zuH.Color.rgba8888ToColor(C$zud,C$zut.readInt32()),C$zuc.setFrame(C$zus,C$zuy,C$zud.r,C$zud.g,C$zud.b,C$zud.a),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc)}C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.ColorTimeline.ENTRIES]);break;case SkeletonBinary.SLOT_TWO_COLOR:(C$zuc=new C$zuH.TwoColorTimeline(C$zuo)).slotIndex=C$zup;for(C$zus=0;C$zus<C$zuo;C$zus++){C$zuy=C$zut.readFloat();C$zuH.Color.rgba8888ToColor(C$zud,C$zut.readInt32()),C$zuH.Color.rgb888ToColor(C$zuf,C$zut.readInt32()),C$zuc.setFrame(C$zus,C$zuy,C$zud.r,C$zud.g,C$zud.b,C$zud.a,C$zuf.r,C$zuf.g,C$zuf.b),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc)}C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.TwoColorTimeline.ENTRIES])}}}for(C$zur=0,C$zun=C$zut.readInt(!0);C$zur<C$zun;C$zur++){var C$zug=C$zut.readInt(!0);for(C$zua=0,C$zum=C$zut.readInt(!0);C$zua<C$zum;C$zua++){C$zuv=C$zut.readByte();C$zuo=C$zut.readInt(!0);switch(C$zuv){case SkeletonBinary.BONE_ROTATE:(C$zuc=new C$zuH.RotateTimeline(C$zuo)).boneIndex=C$zug;for(C$zus=0;C$zus<C$zuo;C$zus++)C$zuc.setFrame(C$zus,C$zut.readFloat(),C$zut.readFloat()),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc);C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.RotateTimeline.ENTRIES]);break;case SkeletonBinary.BONE_TRANSLATE:case SkeletonBinary.BONE_SCALE:case SkeletonBinary.BONE_SHEAR:var C$zuc=void 0;var C$zub=1;C$zuv==SkeletonBinary.BONE_SCALE?C$zuc=new C$zuH.ScaleTimeline(C$zuo):C$zuv==SkeletonBinary.BONE_SHEAR?C$zuc=new C$zuH.ShearTimeline(C$zuo):(C$zuc=new C$zuH.TranslateTimeline(C$zuo),C$zub=C$zu_),C$zuc.boneIndex=C$zug;for(C$zus=0;C$zus<C$zuo;C$zus++)C$zuc.setFrame(C$zus,C$zut.readFloat(),C$zut.readFloat()*C$zub,C$zut.readFloat()*C$zub),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc);C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.TranslateTimeline.ENTRIES])}}}for(C$zur=0,C$zun=C$zut.readInt(!0);C$zur<C$zun;C$zur++){var C$zuC=C$zut.readInt(!0);C$zuo=C$zut.readInt(!0);(C$zuc=new C$zuH.IkConstraintTimeline(C$zuo)).ikConstraintIndex=C$zuC;for(C$zus=0;C$zus<C$zuo;C$zus++)C$zuc.setFrame(C$zus,C$zut.readFloat(),C$zut.readFloat(),C$zut.readFloat()*C$zu_,C$zut.readByte(),C$zut.readBoolean(),C$zut.readBoolean()),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc);C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.IkConstraintTimeline.ENTRIES])}for(C$zur=0,C$zun=C$zut.readInt(!0);C$zur<C$zun;C$zur++){C$zuC=C$zut.readInt(!0);C$zuo=C$zut.readInt(!0);(C$zuc=new C$zuH.TransformConstraintTimeline(C$zuo)).transformConstraintIndex=C$zuC;for(C$zus=0;C$zus<C$zuo;C$zus++)C$zuc.setFrame(C$zus,C$zut.readFloat(),C$zut.readFloat(),C$zut.readFloat(),C$zut.readFloat(),C$zut.readFloat()),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc);C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.TransformConstraintTimeline.ENTRIES])}for(C$zur=0,C$zun=C$zut.readInt(!0);C$zur<C$zun;C$zur++){C$zuC=C$zut.readInt(!0);var C$zux=C$zuu.pathConstraints[C$zuC];for(C$zua=0,C$zum=C$zut.readInt(!0);C$zua<C$zum;C$zua++){C$zuv=C$zut.readByte();C$zuo=C$zut.readInt(!0);switch(C$zuv){case SkeletonBinary.PATH_POSITION:case SkeletonBinary.PATH_SPACING:C$zuc=void 0;C$zub=1;C$zuv==SkeletonBinary.PATH_SPACING?(C$zuc=new C$zuH.PathConstraintSpacingTimeline(C$zuo),C$zux.spacingMode!=C$zuH.SpacingMode.Length&&C$zux.spacingMode!=C$zuH.SpacingMode.Fixed||(C$zub=C$zu_)):(C$zuc=new C$zuH.PathConstraintPositionTimeline(C$zuo),C$zux.positionMode==C$zuH.PositionMode.Fixed&&(C$zub=C$zu_)),C$zuc.pathConstraintIndex=C$zuC;for(C$zus=0;C$zus<C$zuo;C$zus++)C$zuc.setFrame(C$zus,C$zut.readFloat(),C$zut.readFloat()*C$zub),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc);C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.PathConstraintPositionTimeline.ENTRIES]);break;case SkeletonBinary.PATH_MIX:(C$zuc=new C$zuH.PathConstraintMixTimeline(C$zuo)).pathConstraintIndex=C$zuC;for(C$zus=0;C$zus<C$zuo;C$zus++)C$zuc.setFrame(C$zus,C$zut.readFloat(),C$zut.readFloat(),C$zut.readFloat()),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc);C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[(C$zuo-1)*C$zuH.PathConstraintMixTimeline.ENTRIES])}}}for(C$zur=0,C$zun=C$zut.readInt(!0);C$zur<C$zun;C$zur++){var C$zuA=C$zuu.skins[C$zut.readInt(!0)];for(C$zua=0,C$zum=C$zut.readInt(!0);C$zua<C$zum;C$zua++){C$zup=C$zut.readInt(!0);for(var C$zuS=0,C$zuT=C$zut.readInt(!0);C$zuS<C$zuT;C$zuS++){var C$zuw=C$zuA.getAttachment(C$zup,C$zut.readStringRef());var C$zuE=null!=C$zuw.bones;var C$zuP=C$zuw.vertices;var C$zuM=C$zuE?C$zuP.length/3*2:C$zuP.length;C$zuo=C$zut.readInt(!0);(C$zuc=new C$zuH.DeformTimeline(C$zuo)).slotIndex=C$zup,C$zuc.attachment=C$zuw;for(C$zus=0;C$zus<C$zuo;C$zus++){C$zuy=C$zut.readFloat();var C$zuR=void 0;var C$zuI=C$zut.readInt(!0);if(0==C$zuI)C$zuR=C$zuE?C$zuH.Utils.newFloatArray(C$zuM):C$zuP;else{C$zuR=C$zuH.Utils.newFloatArray(C$zuM);var C$zuB=C$zut.readInt(!0);if(C$zuI+=C$zuB,1==C$zu_)for(var C$zul=C$zuB;C$zul<C$zuI;C$zul++)C$zuR[C$zul]=C$zut.readFloat();else for(C$zul=C$zuB;C$zul<C$zuI;C$zul++)C$zuR[C$zul]=C$zut.readFloat()*C$zu_;if(!C$zuE)for(var C$zul=0,C$zuD=C$zuR.length;C$zul<C$zuD;C$zul++)C$zuR[C$zul]+=C$zuP[C$zul]}C$zuc.setFrame(C$zus,C$zuy,C$zuR),C$zus<C$zuo-1&&this.readCurve(C$zut,C$zus,C$zuc)}C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[C$zuo-1])}}}var C$zuL=C$zut.readInt(!0);if(0<C$zuL){C$zuc=new C$zuH.DrawOrderTimeline(C$zuL);var C$zuV=C$zuu.slots.length;for(C$zur=0;C$zur<C$zuL;C$zur++){C$zuy=C$zut.readFloat();var C$zuO=C$zut.readInt(!0);var C$zuF=C$zuH.Utils.newArray(C$zuV,0);for(C$zua=C$zuV-1;0<=C$zua;C$zua--)C$zuF[C$zua]=-1;var C$zuN=C$zuH.Utils.newArray(C$zuV-C$zuO,0);var C$zuk=0,C$zuz=0;for(C$zua=0;C$zua<C$zuO;C$zua++){C$zup=C$zut.readInt(!0);for(;C$zuk!=C$zup;)C$zuN[C$zuz++]=C$zuk++;C$zuF[C$zuk+C$zut.readInt(!0)]=C$zuk++}for(;C$zuk<C$zuV;)C$zuN[C$zuz++]=C$zuk++;for(C$zua=C$zuV-1;0<=C$zua;C$zua--)-1==C$zuF[C$zua]&&(C$zuF[C$zua]=C$zuN[--C$zuz]);C$zuc.setFrame(C$zur,C$zuy,C$zuF)}C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[C$zuL-1])}var C$zuG=C$zut.readInt(!0);if(0<C$zuG){C$zuc=new C$zuH.EventTimeline(C$zuG);for(C$zur=0;C$zur<C$zuG;C$zur++){C$zuy=C$zut.readFloat();var C$zuU=C$zuu.events[C$zut.readInt(!0)];var C$zuW=new C$zuH.Event(C$zuy,C$zuU);C$zuW.intValue=C$zut.readInt(!1),C$zuW.floatValue=C$zut.readFloat(),C$zuW.stringValue=C$zut.readBoolean()?C$zut.readString():C$zuU.stringValue,null!=C$zuW.data.audioPath&&(C$zuW.volume=C$zut.readFloat(),C$zuW.balance=C$zut.readFloat()),C$zuc.setFrame(C$zur,C$zuW)}C$zue.push(C$zuc),C$zui=Math.max(C$zui,C$zuc.frames[C$zuG-1])}return new C$zuH.Animation(C$zuh,C$zue,C$zui)},SkeletonBinary.prototype.readCurve=function(C$zut,C$zue,C$zui){switch(C$zut.readByte()){case SkeletonBinary.CURVE_STEPPED:C$zui.setStepped(C$zue);break;case SkeletonBinary.CURVE_BEZIER:this.setCurve(C$zui,C$zue,C$zut.readFloat(),C$zut.readFloat(),C$zut.readFloat(),C$zut.readFloat())}},SkeletonBinary.prototype.setCurve=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){C$zut.setCurve(C$zue,C$zui,C$zur,C$zun,C$zua)},SkeletonBinary.AttachmentTypeValues=[0,1,2,3,4,5,6],SkeletonBinary.TransformModeValues=[C$zuH.TransformMode.Normal,C$zuH.TransformMode.OnlyTranslation,C$zuH.TransformMode.NoRotationOrReflection,C$zuH.TransformMode.NoScale,C$zuH.TransformMode.NoScaleOrReflection],SkeletonBinary.PositionModeValues=[C$zuH.PositionMode.Fixed,C$zuH.PositionMode.Percent],SkeletonBinary.SpacingModeValues=[C$zuH.SpacingMode.Length,C$zuH.SpacingMode.Fixed,C$zuH.SpacingMode.Percent],SkeletonBinary.RotateModeValues=[C$zuH.RotateMode.Tangent,C$zuH.RotateMode.Chain,C$zuH.RotateMode.ChainScale],SkeletonBinary.BlendModeValues=[C$zuH.BlendMode.Normal,C$zuH.BlendMode.Additive,C$zuH.BlendMode.Multiply,C$zuH.BlendMode.Screen],SkeletonBinary.BONE_ROTATE=0,SkeletonBinary.BONE_TRANSLATE=1,SkeletonBinary.BONE_SCALE=2,SkeletonBinary.BONE_SHEAR=3,SkeletonBinary.SLOT_ATTACHMENT=0,SkeletonBinary.SLOT_COLOR=1,SkeletonBinary.SLOT_TWO_COLOR=2,SkeletonBinary.PATH_POSITION=0,SkeletonBinary.PATH_SPACING=1,SkeletonBinary.PATH_MIX=2,SkeletonBinary.CURVE_LINEAR=0,SkeletonBinary.CURVE_STEPPED=1,SkeletonBinary.CURVE_BEZIER=2,C$zuH.SkeletonBinary=SkeletonBinary,BinaryInput.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},BinaryInput.prototype.readShort=function(){var C$zut=this.buffer.getInt16(this.index);return this.index+=2,C$zut},BinaryInput.prototype.readInt32=function(){var C$zut=this.buffer.getInt32(this.index);return this.index+=4,C$zut},BinaryInput.prototype.readInt=function(C$zut){var C$zue=this.readByte();var C$zui=127&C$zue;return 0!=(128&C$zue)&&(C$zui|=(127&(C$zue=this.readByte()))<<7,0!=(128&C$zue)&&(C$zui|=(127&(C$zue=this.readByte()))<<14,0!=(128&C$zue)&&(C$zui|=(127&(C$zue=this.readByte()))<<21,0!=(128&C$zue)&&(C$zui|=(127&this.readByte())<<28)))),C$zut?C$zui:C$zui>>>1^-(1&C$zui)},BinaryInput.prototype.readStringRef=function(){var C$zut=this.readInt(!0);return 0==C$zut?null:this.strings[C$zut-1]},BinaryInput.prototype.readString=function(){var C$zut=this.readInt(!0);switch(C$zut){case 0:return null;case 1:return""}C$zut--;var C$zue="";for(var C$zui=0;C$zui<C$zut;){var C$zur=this.readByte();switch(C$zur>>4){case 12:case 13:C$zue+=String.fromCharCode((31&C$zur)<<6|63&this.readByte()),C$zui+=2;break;case 14:C$zue+=String.fromCharCode((15&C$zur)<<12|(63&this.readByte())<<6|63&this.readByte()),C$zui+=3;break;default:C$zue+=String.fromCharCode(C$zur),C$zui++}}return C$zue},BinaryInput.prototype.readFloat=function(){var C$zut=this.buffer.getFloat32(this.index);return this.index+=4,C$zut},BinaryInput.prototype.readBoolean=function(){return 0!=this.readByte()};var C$zum=BinaryInput;function BinaryInput(C$zut,C$zue,C$zui,C$zur){void 0===C$zue&&(C$zue=new Array),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=new DataView(C$zut.buffer)),this.strings=C$zue,this.index=C$zui,this.buffer=C$zur}var C$zuT=function(C$zut,C$zue,C$zui,C$zur,C$zun){this.mesh=C$zut,this.skin=C$zue,this.slotIndex=C$zui,this.parent=C$zur,this.inheritDeform=C$zun};var C$zud=function(C$zut,C$zue){void 0===C$zue&&(C$zue=null),this.bones=C$zut=void 0===C$zut?null:C$zut,this.vertices=C$zue};var C$zuf;!function(C$zuu){function SkeletonBounds(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new C$zuu.Pool(function(){return C$zuu.Utils.newFloatArray(16)})}SkeletonBounds.prototype.update=function(C$zut,C$zue){if(null==C$zut)throw new Error("skeleton cannot be null.");var C$zui=this.boundingBoxes;var C$zur=this.polygons;var C$zun=this.polygonPool;var C$zua=C$zut.slots;var C$zuh=C$zua.length;C$zui.length=0,C$zun.freeAll(C$zur);for(var C$zuo=C$zur.length=0;C$zuo<C$zuh;C$zuo++){var C$zus=C$zua[C$zuo];var C$zuc,C$zul;C$zus.bone.active&&((C$zuc=C$zus.getAttachment())instanceof C$zuu.BoundingBoxAttachment&&(C$zui.push(C$zuc=C$zuc),(C$zul=C$zun.obtain()).length!=C$zuc.worldVerticesLength&&(C$zul=C$zuu.Utils.newFloatArray(C$zuc.worldVerticesLength)),C$zur.push(C$zul),C$zuc.computeWorldVertices(C$zus,0,C$zuc.worldVerticesLength,C$zul,0,2)))}C$zue?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},SkeletonBounds.prototype.aabbCompute=function(){var C$zut=Number.POSITIVE_INFINITY,C$zue=Number.POSITIVE_INFINITY,C$zui=Number.NEGATIVE_INFINITY,C$zur=Number.NEGATIVE_INFINITY;var C$zun=this.polygons;for(var C$zua=0,C$zuh=C$zun.length;C$zua<C$zuh;C$zua++){var C$zuo=C$zun[C$zua];var C$zus=C$zuo;for(var C$zuc=0,C$zuu=C$zuo.length;C$zuc<C$zuu;C$zuc+=2){var C$zul=C$zus[C$zuc];var C$zu_=C$zus[C$zuc+1];C$zut=Math.min(C$zut,C$zul),C$zue=Math.min(C$zue,C$zu_),C$zui=Math.max(C$zui,C$zul),C$zur=Math.max(C$zur,C$zu_)}}this.minX=C$zut,this.minY=C$zue,this.maxX=C$zui,this.maxY=C$zur},SkeletonBounds.prototype.aabbContainsPoint=function(C$zut,C$zue){return C$zut>=this.minX&&C$zut<=this.maxX&&C$zue>=this.minY&&C$zue<=this.maxY},SkeletonBounds.prototype.aabbIntersectsSegment=function(C$zut,C$zue,C$zui,C$zur){var C$zun=this.minX;var C$zua=this.minY;var C$zuo=this.maxX;var C$zus=this.maxY;if(C$zut<=C$zun&&C$zui<=C$zun||C$zue<=C$zua&&C$zur<=C$zua||C$zuo<=C$zut&&C$zuo<=C$zui||C$zus<=C$zue&&C$zus<=C$zur)return!1;C$zur=(C$zur-C$zue)/(C$zui-C$zut);C$zui=C$zur*(C$zun-C$zut)+C$zue;if(C$zua<C$zui&&C$zui<C$zus)return!0;if(C$zua<(C$zui=C$zur*(C$zuo-C$zut)+C$zue)&&C$zui<C$zus)return!0;C$zui=(C$zua-C$zue)/C$zur+C$zut;return C$zun<C$zui&&C$zui<C$zuo||C$zun<(C$zui=(C$zus-C$zue)/C$zur+C$zut)&&C$zui<C$zuo},SkeletonBounds.prototype.aabbIntersectsSkeleton=function(C$zut){return this.minX<C$zut.maxX&&this.maxX>C$zut.minX&&this.minY<C$zut.maxY&&this.maxY>C$zut.minY},SkeletonBounds.prototype.containsPoint=function(C$zut,C$zue){var C$zui=this.polygons;for(var C$zur=0,C$zun=C$zui.length;C$zur<C$zun;C$zur++)if(this.containsPointPolygon(C$zui[C$zur],C$zut,C$zue))return this.boundingBoxes[C$zur];return null},SkeletonBounds.prototype.containsPointPolygon=function(C$zut,C$zuh,C$zue){var C$zui=C$zut;var C$zur=C$zut.length;var C$zun=C$zur-2;var C$zua=!1;for(var C$zuo=0;C$zuo<C$zur;C$zuo+=2){var C$zus=C$zui[C$zuo+1];var C$zuc=C$zui[C$zun+1];var C$zul;!(C$zus<C$zue&&C$zue<=C$zuc||C$zuc<C$zue&&C$zue<=C$zus)||(C$zul=C$zui[C$zuo])+(C$zue-C$zus)/(C$zuc-C$zus)*(C$zui[C$zun]-C$zul)<C$zuh&&(C$zua=!C$zua),C$zun=C$zuo}return C$zua},SkeletonBounds.prototype.intersectsSegment=function(C$zut,C$zue,C$zui,C$zur){var C$zun=this.polygons;for(var C$zua=0,C$zuo=C$zun.length;C$zua<C$zuo;C$zua++)if(this.intersectsSegmentPolygon(C$zun[C$zua],C$zut,C$zue,C$zui,C$zur))return this.boundingBoxes[C$zua];return null},SkeletonBounds.prototype.intersectsSegmentPolygon=function(C$zuh,C$zut,C$zue,C$zui,C$zur){var C$zun=C$zuh;var C$zuu=C$zuh.length;var C$zu_=C$zut-C$zui,C$zud=C$zue-C$zur;var C$zuf=C$zut*C$zur-C$zue*C$zui;var C$zua=C$zun[C$zuu-2],C$zuo=C$zun[C$zuu-1];for(var C$zup=0;C$zup<C$zuu;C$zup+=2){var C$zus=C$zun[C$zup],C$zuc=C$zun[C$zup+1];var C$zum=C$zua*C$zuc-C$zuo*C$zus;var C$zul=C$zua-C$zus,C$zuv=C$zuo-C$zuc;var C$zuy=C$zu_*C$zuv-C$zud*C$zul;C$zul=(C$zuf*C$zul-C$zu_*C$zum)/C$zuy;if((C$zua<=C$zul&&C$zul<=C$zus||C$zus<=C$zul&&C$zul<=C$zua)&&(C$zut<=C$zul&&C$zul<=C$zui||C$zui<=C$zul&&C$zul<=C$zut)){C$zul=(C$zuf*C$zuv-C$zud*C$zum)/C$zuy;if((C$zuo<=C$zul&&C$zul<=C$zuc||C$zuc<=C$zul&&C$zul<=C$zuo)&&(C$zue<=C$zul&&C$zul<=C$zur||C$zur<=C$zul&&C$zul<=C$zue))return!0}C$zua=C$zus,C$zuo=C$zuc}return!1},SkeletonBounds.prototype.getPolygon=function(C$zut){if(null==C$zut)throw new Error("boundingBox cannot be null.");C$zut=this.boundingBoxes.indexOf(C$zut);return-1==C$zut?null:this.polygons[C$zut]},SkeletonBounds.prototype.getWidth=function(){return this.maxX-this.minX},SkeletonBounds.prototype.getHeight=function(){return this.maxY-this.minY},C$zuu.SkeletonBounds=SkeletonBounds}(C$zur=C$zur||{}),function(C$zuQ){function SkeletonClipping(){this.triangulator=new C$zuQ.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}SkeletonClipping.prototype.clipStart=function(C$zut,C$zue){if(null!=this.clipAttachment)return 0;var C$zui=(this.clipAttachment=C$zue).worldVerticesLength;var C$zur=C$zuQ.Utils.setArraySize(this.clippingPolygon,C$zui);C$zue.computeWorldVertices(C$zut,0,C$zui,C$zur,0,2);C$zue=this.clippingPolygon;SkeletonClipping.makeClockwise(C$zue);var C$zun=this.clippingPolygons=this.triangulator.decompose(C$zue,this.triangulator.triangulate(C$zue));for(var C$zua=0,C$zuo=C$zun.length;C$zua<C$zuo;C$zua++){var C$zus=C$zun[C$zua];SkeletonClipping.makeClockwise(C$zus),C$zus.push(C$zus[0]),C$zus.push(C$zus[1])}return C$zun.length},SkeletonClipping.prototype.clipEndWithSlot=function(C$zut){null!=this.clipAttachment&&this.clipAttachment.endSlot==C$zut.data&&this.clipEnd()},SkeletonClipping.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},SkeletonClipping.prototype.isClipping=function(){return null!=this.clipAttachment},SkeletonClipping.prototype.clipTriangles=function(C$zut,C$zuh,C$zuu,C$zu_,C$zud,C$zue,C$zui,C$zuf,C$zup,C$zum,C$zuv,C$zuy){var C$zug=this.clipOutput,C$zub=this.clippedVertices;var C$zuC=this.clippedTriangles;var C$zux=this.clippingPolygons;var C$zuA=this.clippingPolygons.length;var C$zuS=C$zuf?12:8;var C$zur=0;C$zum=C$zum||0,C$zuv=C$zuv||0,C$zuy=C$zuy||0,C$zub.length=0,C$zuC.length=0;C$zut:for(var C$zuT=C$zum,C$zuw=C$zum+C$zu_;C$zuT<C$zuw;C$zuT+=3){var C$zuE=C$zuu[C$zuT]*C$zup;var C$zuP=C$zuE+C$zuv;var C$zuM=C$zuE+C$zuy;var C$zuR=C$zut[C$zuP],C$zuI=C$zut[C$zuP+1];var C$zuB=C$zud[C$zuM],C$zuD=C$zud[C$zuM+1];var C$zuL=C$zut[C$zuP=(C$zuE=C$zuu[C$zuT+1]*C$zup)+C$zuv],C$zuV=C$zut[C$zuP+1];var C$zuO=C$zud[C$zuM=C$zuE+C$zuy],C$zuF=C$zud[C$zuM+1];var C$zuN=C$zut[C$zuP=(C$zuE=C$zuu[C$zuT+2]*C$zup)+C$zuv],C$zun=C$zut[C$zuP+1];var C$zuk=C$zud[C$zuM=C$zuE+C$zuy],C$zuz=C$zud[C$zuM+1];for(var C$zuG=0;C$zuG<C$zuA;C$zuG++){var C$zua=C$zub.length;if(!this.clip(C$zuR,C$zuI,C$zuL,C$zuV,C$zuN,C$zun,C$zux[C$zuG],C$zug)){(C$zuo=C$zuQ.Utils.setArraySize(C$zub,C$zua+3*C$zuS))[C$zua]=C$zuR,C$zuo[C$zua+1]=C$zuI,C$zuo[C$zua+2]=C$zue.r,C$zuo[C$zua+3]=C$zue.g,C$zuo[C$zua+4]=C$zue.b,C$zuo[C$zua+5]=C$zue.a,C$zuf?(C$zuo[C$zua+6]=C$zuB,C$zuo[C$zua+7]=C$zuD,C$zuo[C$zua+8]=C$zui.r,C$zuo[C$zua+9]=C$zui.g,C$zuo[C$zua+10]=C$zui.b,C$zuo[C$zua+11]=C$zui.a,C$zuo[C$zua+12]=C$zuL,C$zuo[C$zua+13]=C$zuV,C$zuo[C$zua+14]=C$zue.r,C$zuo[C$zua+15]=C$zue.g,C$zuo[C$zua+16]=C$zue.b,C$zuo[C$zua+17]=C$zue.a,C$zuo[C$zua+18]=C$zuO,C$zuo[C$zua+19]=C$zuF,C$zuo[C$zua+20]=C$zui.r,C$zuo[C$zua+21]=C$zui.g,C$zuo[C$zua+22]=C$zui.b,C$zuo[C$zua+23]=C$zui.a,C$zuo[C$zua+24]=C$zuN,C$zuo[C$zua+25]=C$zun,C$zuo[C$zua+26]=C$zue.r,C$zuo[C$zua+27]=C$zue.g,C$zuo[C$zua+28]=C$zue.b,C$zuo[C$zua+29]=C$zue.a,C$zuo[C$zua+30]=C$zuk,C$zuo[C$zua+31]=C$zuz,C$zuo[C$zua+32]=C$zui.r,C$zuo[C$zua+33]=C$zui.g,C$zuo[C$zua+34]=C$zui.b,C$zuo[C$zua+35]=C$zui.a):(C$zuo[C$zua+6]=C$zuB,C$zuo[C$zua+7]=C$zuD,C$zuo[C$zua+8]=C$zuL,C$zuo[C$zua+9]=C$zuV,C$zuo[C$zua+10]=C$zue.r,C$zuo[C$zua+11]=C$zue.g,C$zuo[C$zua+12]=C$zue.b,C$zuo[C$zua+13]=C$zue.a,C$zuo[C$zua+14]=C$zuO,C$zuo[C$zua+15]=C$zuF,C$zuo[C$zua+16]=C$zuN,C$zuo[C$zua+17]=C$zun,C$zuo[C$zua+18]=C$zue.r,C$zuo[C$zua+19]=C$zue.g,C$zuo[C$zua+20]=C$zue.b,C$zuo[C$zua+21]=C$zue.a,C$zuo[C$zua+22]=C$zuk,C$zuo[C$zua+23]=C$zuz),C$zua=C$zuC.length,(C$zuZ=C$zuQ.Utils.setArraySize(C$zuC,C$zua+3))[C$zua]=C$zur,C$zuZ[C$zua+1]=C$zur+1,C$zuZ[C$zua+2]=C$zur+2,C$zur+=3;continue C$zut}var C$zuU=C$zug.length;if(0!=C$zuU){var C$zuW=C$zuV-C$zun,C$zuH=C$zuN-C$zuL,C$zuj=C$zuR-C$zuN,C$zuX=C$zun-C$zuI;var C$zuq=1/(C$zuW*C$zuj+C$zuH*(C$zuI-C$zun));var C$zuJ=C$zuU>>1;var C$zuY=this.clipOutput;var C$zuo=C$zuQ.Utils.setArraySize(C$zub,C$zua+C$zuJ*C$zuS);for(var C$zus=0;C$zus<C$zuU;C$zus+=2){var C$zuc=C$zuY[C$zus],C$zul=C$zuY[C$zus+1];C$zuo[C$zua]=C$zuc,C$zuo[C$zua+1]=C$zul,C$zuo[C$zua+2]=C$zue.r,C$zuo[C$zua+3]=C$zue.g,C$zuo[C$zua+4]=C$zue.b,C$zuo[C$zua+5]=C$zue.a;C$zuc=C$zuc-C$zuN,C$zul=C$zul-C$zun;var C$zu$=(C$zuW*C$zuc+C$zuH*C$zul)*C$zuq;C$zuc=(C$zuX*C$zuc+C$zuj*C$zul)*C$zuq;C$zul=1-C$zu$-C$zuc;C$zuo[C$zua+6]=C$zuB*C$zu$+C$zuO*C$zuc+C$zuk*C$zul,C$zuo[C$zua+7]=C$zuD*C$zu$+C$zuF*C$zuc+C$zuz*C$zul,C$zuf&&(C$zuo[C$zua+8]=C$zui.r,C$zuo[C$zua+9]=C$zui.g,C$zuo[C$zua+10]=C$zui.b,C$zuo[C$zua+11]=C$zui.a),C$zua+=C$zuS}C$zua=C$zuC.length;var C$zuZ=C$zuQ.Utils.setArraySize(C$zuC,C$zua+3*(C$zuJ-2));C$zuJ--;for(C$zus=1;C$zus<C$zuJ;C$zus++)C$zuZ[C$zua]=C$zur,C$zuZ[C$zua+1]=C$zur+C$zus,C$zuZ[C$zua+2]=C$zur+C$zus+1,C$zua+=3;C$zur+=1+C$zuJ}}}},SkeletonClipping.prototype.clip=function(C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup,C$zum,C$zut){var C$zue=C$zut;var C$zuv=!1;var C$zui=null;2<=C$zum.length%4?(C$zui=C$zut,C$zut=this.scratch):C$zui=this.scratch,C$zui.length=0,C$zui.push(C$zuh),C$zui.push(C$zuu),C$zui.push(C$zu_),C$zui.push(C$zud),C$zui.push(C$zuf),C$zui.push(C$zup),C$zui.push(C$zuh),C$zui.push(C$zuu),C$zut.length=0;var C$zuy=C$zum;var C$zug=C$zum.length-4;for(var C$zur=0;;C$zur+=2){var C$zun=C$zuy[C$zur],C$zua=C$zuy[C$zur+1];var C$zuo=C$zuy[C$zur+2],C$zus=C$zuy[C$zur+3];var C$zub=C$zun-C$zuo,C$zuC=C$zua-C$zus;var C$zux=C$zui;var C$zuA=C$zui.length-2,C$zuS=C$zut.length;for(var C$zuc=0;C$zuc<C$zuA;C$zuc+=2){var C$zul=C$zux[C$zuc],C$zuT=C$zux[C$zuc+1];var C$zuw=C$zux[C$zuc+2],C$zuE=C$zux[C$zuc+3];var C$zuP=0<C$zub*(C$zuE-C$zus)-C$zuC*(C$zuw-C$zuo);if(0<C$zub*(C$zuT-C$zus)-C$zuC*(C$zul-C$zuo)){if(C$zuP){C$zut.push(C$zuw),C$zut.push(C$zuE);continue}var C$zuM=(C$zuR=C$zuE-C$zuT)*(C$zuo-C$zun)-(C$zuI=C$zuw-C$zul)*(C$zus-C$zua);1e-6<Math.abs(C$zuM)?(C$zut.push(C$zun+(C$zuo-C$zun)*(C$zuB=(C$zuI*(C$zua-C$zuT)-C$zuR*(C$zun-C$zul))/C$zuM)),C$zut.push(C$zua+(C$zus-C$zua)*C$zuB)):(C$zut.push(C$zun),C$zut.push(C$zua))}else{var C$zuR,C$zuI,C$zuB;C$zuP&&(C$zuM=(C$zuR=C$zuE-C$zuT)*(C$zuo-C$zun)-(C$zuI=C$zuw-C$zul)*(C$zus-C$zua),1e-6<Math.abs(C$zuM)?(C$zut.push(C$zun+(C$zuo-C$zun)*(C$zuB=(C$zuI*(C$zua-C$zuT)-C$zuR*(C$zun-C$zul))/C$zuM)),C$zut.push(C$zua+(C$zus-C$zua)*C$zuB)):(C$zut.push(C$zun),C$zut.push(C$zua)),C$zut.push(C$zuw),C$zut.push(C$zuE))}C$zuv=!0}if(C$zuS==C$zut.length)return!(C$zue.length=0);if(C$zut.push(C$zut[0]),C$zut.push(C$zut[1]),C$zur==C$zug)break;C$zuS=C$zut;(C$zut=C$zui).length=0,C$zui=C$zuS}if(C$zue!=C$zut)for(var C$zur=C$zue.length=0,C$zuD=C$zut.length-2;C$zur<C$zuD;C$zur++)C$zue[C$zur]=C$zut[C$zur];else C$zue.length=C$zue.length-2;return C$zuv},SkeletonClipping.makeClockwise=function(C$zut){var C$zue=C$zut;C$zut=C$zut.length;var C$zui,C$zur,C$zun,C$zua=C$zue[C$zut-2]*C$zue[1]-C$zue[0]*C$zue[C$zut-1];for(var C$zuo=0,C$zus=C$zut-3;C$zuo<C$zus;C$zuo+=2)C$zui=C$zue[C$zuo],C$zur=C$zue[C$zuo+1],C$zun=C$zue[C$zuo+2],C$zua+=C$zui*C$zue[C$zuo+3]-C$zun*C$zur;if(!(C$zua<0))for(var C$zuo=0,C$zuc=C$zut-2,C$zus=C$zut>>1;C$zuo<C$zus;C$zuo+=2){var C$zuh=C$zue[C$zuo],C$zuu=C$zue[C$zuo+1];var C$zul=C$zuc-C$zuo;C$zue[C$zuo]=C$zue[C$zul],C$zue[C$zuo+1]=C$zue[1+C$zul],C$zue[C$zul]=C$zuh,C$zue[1+C$zul]=C$zuu}},C$zuQ.SkeletonClipping=SkeletonClipping}(C$zur=C$zur||{}),function(C$zut){function SkeletonData(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}SkeletonData.prototype.findBone=function(C$zut){if(null==C$zut)throw new Error("boneName cannot be null.");var C$zue=this.bones;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findBoneIndex=function(C$zut){if(null==C$zut)throw new Error("boneName cannot be null.");var C$zue=this.bones;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui].name==C$zut)return C$zui;return-1},SkeletonData.prototype.findSlot=function(C$zut){if(null==C$zut)throw new Error("slotName cannot be null.");var C$zue=this.slots;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findSlotIndex=function(C$zut){if(null==C$zut)throw new Error("slotName cannot be null.");var C$zue=this.slots;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui].name==C$zut)return C$zui;return-1},SkeletonData.prototype.findSkin=function(C$zut){if(null==C$zut)throw new Error("skinName cannot be null.");var C$zue=this.skins;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findEvent=function(C$zut){if(null==C$zut)throw new Error("eventDataName cannot be null.");var C$zue=this.events;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findAnimation=function(C$zut){if(null==C$zut)throw new Error("animationName cannot be null.");var C$zue=this.animations;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findIkConstraint=function(C$zut){if(null==C$zut)throw new Error("constraintName cannot be null.");var C$zue=this.ikConstraints;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findTransformConstraint=function(C$zut){if(null==C$zut)throw new Error("constraintName cannot be null.");var C$zue=this.transformConstraints;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findPathConstraint=function(C$zut){if(null==C$zut)throw new Error("constraintName cannot be null.");var C$zue=this.pathConstraints;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++){var C$zun=C$zue[C$zui];if(C$zun.name==C$zut)return C$zun}return null},SkeletonData.prototype.findPathConstraintIndex=function(C$zut){if(null==C$zut)throw new Error("pathConstraintName cannot be null.");var C$zue=this.pathConstraints;for(var C$zui=0,C$zur=C$zue.length;C$zui<C$zur;C$zui++)if(C$zue[C$zui].name==C$zut)return C$zui;return-1},C$zut.SkeletonData=SkeletonData}(C$zur=C$zur||{}),function(C$zuet){function SkeletonJson(C$zut){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=C$zut}SkeletonJson.prototype.readSkeletonData=function(C$zut){var C$zuh=this.scale;var C$zue=new C$zuet.SkeletonData;var C$zui="string"==typeof C$zut?JSON.parse(C$zut):C$zut;C$zut=C$zui.skeleton;if(null!=C$zut&&(C$zue.hash=C$zut.hash,C$zue.version=C$zut.spine,C$zue.x=C$zut.x,C$zue.y=C$zut.y,C$zue.width=C$zut.width,C$zue.height=C$zut.height,C$zue.fps=C$zut.fps,C$zue.imagesPath=C$zut.images),C$zui.bones)for(var C$zur=0;C$zur<C$zui.bones.length;C$zur++){var C$zun=C$zui.bones[C$zur];var C$zuu=null;var C$zu_=this.getValue(C$zun,"parent",null);if(null!=C$zu_&&null==(C$zuu=C$zue.findBone(C$zu_)))throw new Error("Parent bone not found: "+C$zu_);(C$zuo=new C$zuet.BoneData(C$zue.bones.length,C$zun.name,C$zuu)).length=this.getValue(C$zun,"length",0)*C$zuh,C$zuo.x=this.getValue(C$zun,"x",0)*C$zuh,C$zuo.y=this.getValue(C$zun,"y",0)*C$zuh,C$zuo.rotation=this.getValue(C$zun,"rotation",0),C$zuo.scaleX=this.getValue(C$zun,"scaleX",1),C$zuo.scaleY=this.getValue(C$zun,"scaleY",1),C$zuo.shearX=this.getValue(C$zun,"shearX",0),C$zuo.shearY=this.getValue(C$zun,"shearY",0),C$zuo.transformMode=SkeletonJson.transformModeFromString(this.getValue(C$zun,"transform","normal")),C$zuo.skinRequired=this.getValue(C$zun,"skin",!1),C$zue.bones.push(C$zuo)}if(C$zui.slots)for(C$zur=0;C$zur<C$zui.slots.length;C$zur++){var C$zud=(C$zuS=C$zui.slots[C$zur]).name;var C$zua=C$zuS.bone;var C$zuf=C$zue.findBone(C$zua);if(null==C$zuf)throw new Error("Slot bone not found: "+C$zua);var C$zuo=new C$zuet.SlotData(C$zue.slots.length,C$zud,C$zuf);C$zuf=this.getValue(C$zuS,"color",null);null!=C$zuf&&C$zuo.color.setFromString(C$zuf);C$zuf=this.getValue(C$zuS,"dark",null);null!=C$zuf&&(C$zuo.darkColor=new C$zuet.Color(1,1,1,1),C$zuo.darkColor.setFromString(C$zuf)),C$zuo.attachmentName=this.getValue(C$zuS,"attachment",null),C$zuo.blendMode=SkeletonJson.blendModeFromString(this.getValue(C$zuS,"blend","normal")),C$zue.slots.push(C$zuo)}if(C$zui.ik)for(C$zur=0;C$zur<C$zui.ik.length;C$zur++){var C$zus=C$zui.ik[C$zur];(C$zuo=new C$zuet.IkConstraintData(C$zus.name)).order=this.getValue(C$zus,"order",0),C$zuo.skinRequired=this.getValue(C$zus,"skin",!1);for(var C$zup=0;C$zup<C$zus.bones.length;C$zup++){C$zua=C$zus.bones[C$zup];if(null==(C$zuC=C$zue.findBone(C$zua)))throw new Error("IK bone not found: "+C$zua);C$zuo.bones.push(C$zuC)}var C$zum=C$zus.target;if(C$zuo.target=C$zue.findBone(C$zum),null==C$zuo.target)throw new Error("IK target bone not found: "+C$zum);C$zuo.mix=this.getValue(C$zus,"mix",1),C$zuo.softness=this.getValue(C$zus,"softness",0)*C$zuh,C$zuo.bendDirection=this.getValue(C$zus,"bendPositive",!0)?1:-1,C$zuo.compress=this.getValue(C$zus,"compress",!1),C$zuo.stretch=this.getValue(C$zus,"stretch",!1),C$zuo.uniform=this.getValue(C$zus,"uniform",!1),C$zue.ikConstraints.push(C$zuo)}if(C$zui.transform)for(C$zur=0;C$zur<C$zui.transform.length;C$zur++){C$zus=C$zui.transform[C$zur];(C$zuo=new C$zuet.TransformConstraintData(C$zus.name)).order=this.getValue(C$zus,"order",0),C$zuo.skinRequired=this.getValue(C$zus,"skin",!1);for(C$zup=0;C$zup<C$zus.bones.length;C$zup++){C$zua=C$zus.bones[C$zup];if(null==(C$zuC=C$zue.findBone(C$zua)))throw new Error("Transform constraint bone not found: "+C$zua);C$zuo.bones.push(C$zuC)}C$zum=C$zus.target;if(C$zuo.target=C$zue.findBone(C$zum),null==C$zuo.target)throw new Error("Transform constraint target bone not found: "+C$zum);C$zuo.local=this.getValue(C$zus,"local",!1),C$zuo.relative=this.getValue(C$zus,"relative",!1),C$zuo.offsetRotation=this.getValue(C$zus,"rotation",0),C$zuo.offsetX=this.getValue(C$zus,"x",0)*C$zuh,C$zuo.offsetY=this.getValue(C$zus,"y",0)*C$zuh,C$zuo.offsetScaleX=this.getValue(C$zus,"scaleX",0),C$zuo.offsetScaleY=this.getValue(C$zus,"scaleY",0),C$zuo.offsetShearY=this.getValue(C$zus,"shearY",0),C$zuo.rotateMix=this.getValue(C$zus,"rotateMix",1),C$zuo.translateMix=this.getValue(C$zus,"translateMix",1),C$zuo.scaleMix=this.getValue(C$zus,"scaleMix",1),C$zuo.shearMix=this.getValue(C$zus,"shearMix",1),C$zue.transformConstraints.push(C$zuo)}if(C$zui.path)for(C$zur=0;C$zur<C$zui.path.length;C$zur++){C$zus=C$zui.path[C$zur];(C$zuo=new C$zuet.PathConstraintData(C$zus.name)).order=this.getValue(C$zus,"order",0),C$zuo.skinRequired=this.getValue(C$zus,"skin",!1);for(C$zup=0;C$zup<C$zus.bones.length;C$zup++){C$zua=C$zus.bones[C$zup];if(null==(C$zuC=C$zue.findBone(C$zua)))throw new Error("Transform constraint bone not found: "+C$zua);C$zuo.bones.push(C$zuC)}C$zum=C$zus.target;if(C$zuo.target=C$zue.findSlot(C$zum),null==C$zuo.target)throw new Error("Path target slot not found: "+C$zum);C$zuo.positionMode=SkeletonJson.positionModeFromString(this.getValue(C$zus,"positionMode","percent")),C$zuo.spacingMode=SkeletonJson.spacingModeFromString(this.getValue(C$zus,"spacingMode","length")),C$zuo.rotateMode=SkeletonJson.rotateModeFromString(this.getValue(C$zus,"rotateMode","tangent")),C$zuo.offsetRotation=this.getValue(C$zus,"rotation",0),C$zuo.position=this.getValue(C$zus,"position",0),C$zuo.positionMode==C$zuet.PositionMode.Fixed&&(C$zuo.position*=C$zuh),C$zuo.spacing=this.getValue(C$zus,"spacing",0),C$zuo.spacingMode!=C$zuet.SpacingMode.Length&&C$zuo.spacingMode!=C$zuet.SpacingMode.Fixed||(C$zuo.spacing*=C$zuh),C$zuo.rotateMix=this.getValue(C$zus,"rotateMix",1),C$zuo.translateMix=this.getValue(C$zus,"translateMix",1),C$zue.pathConstraints.push(C$zuo)}if(C$zui.skins){var C$zuv=C$zui.skins;if(!(C$zuv instanceof Array)){var C$zuy=[];for(var C$zug in C$zuv)C$zuy.push({name:C$zug,attachments:C$zuv[C$zug]});C$zuv=C$zuy}for(C$zur=0;C$zur<C$zuv.length;C$zur++){var C$zuc=C$zuv[C$zur];var C$zub=new C$zuet.Skin(C$zuc.name);if(C$zuc.bones)for(var C$zul=0;C$zul<C$zuc.bones.length;C$zul++){var C$zuC;if(null==(C$zuC=C$zue.findBone(C$zuc.bones[C$zul])))throw new Error("Skin bone not found: "+C$zuc.bones[C$zur]);C$zub.bones.push(C$zuC)}if(C$zuc.ik)for(C$zul=0;C$zul<C$zuc.ik.length;C$zul++){if(null==(C$zux=C$zue.findIkConstraint(C$zuc.ik[C$zul])))throw new Error("Skin IK constraint not found: "+C$zuc.ik[C$zur]);C$zub.constraints.push(C$zux)}if(C$zuc.transform)for(C$zul=0;C$zul<C$zuc.transform.length;C$zul++){if(null==(C$zux=C$zue.findTransformConstraint(C$zuc.transform[C$zul])))throw new Error("Skin transform constraint not found: "+C$zuc.transform[C$zur]);C$zub.constraints.push(C$zux)}if(C$zuc.path)for(C$zul=0;C$zul<C$zuc.path.length;C$zul++){var C$zux;if(null==(C$zux=C$zue.findPathConstraint(C$zuc.path[C$zul])))throw new Error("Skin path constraint not found: "+C$zuc.path[C$zur]);C$zub.constraints.push(C$zux)}for(var C$zud in C$zuc.attachments){var C$zuA=C$zue.findSlot(C$zud);if(null==C$zuA)throw new Error("Slot not found: "+C$zud);var C$zuS;for(var C$zuT in C$zuS=C$zuc.attachments[C$zud]){var C$zuw=this.readAttachment(C$zuS[C$zuT],C$zub,C$zuA.index,C$zuT,C$zue);null!=C$zuw&&C$zub.setAttachment(C$zuA.index,C$zuT,C$zuw)}}C$zue.skins.push(C$zub),"default"==C$zub.name&&(C$zue.defaultSkin=C$zub)}}for(var C$zur=0,C$zuE=this.linkedMeshes.length;C$zur<C$zuE;C$zur++){var C$zuP=this.linkedMeshes[C$zur];if(null==(C$zub=null==C$zuP.skin?C$zue.defaultSkin:C$zue.findSkin(C$zuP.skin)))throw new Error("Skin not found: "+C$zuP.skin);var C$zuM=C$zub.getAttachment(C$zuP.slotIndex,C$zuP.parent);if(null==C$zuM)throw new Error("Parent mesh not found: "+C$zuP.parent);C$zuP.mesh.deformAttachment=C$zuP.inheritDeform?C$zuM:C$zuP.mesh,C$zuP.mesh.setParentMesh(C$zuM),C$zuP.mesh.updateUVs()}if(this.linkedMeshes.length=0,C$zui.events)for(var C$zuR in C$zui.events){var C$zuI=C$zui.events[C$zuR];(C$zuo=new C$zuet.EventData(C$zuR)).intValue=this.getValue(C$zuI,"int",0),C$zuo.floatValue=this.getValue(C$zuI,"float",0),C$zuo.stringValue=this.getValue(C$zuI,"string",""),C$zuo.audioPath=this.getValue(C$zuI,"audio",null),null!=C$zuo.audioPath&&(C$zuo.volume=this.getValue(C$zuI,"volume",1),C$zuo.balance=this.getValue(C$zuI,"balance",0)),C$zue.events.push(C$zuo)}if(C$zui.animations)for(var C$zuB in C$zui.animations){var C$zuD=C$zui.animations[C$zuB];this.readAnimation(C$zuD,C$zuB,C$zue)}return C$zue},SkeletonJson.prototype.readAttachment=function(C$zut,C$zue,C$zuh,C$zui,C$zuu){var C$zur=this.scale;switch(C$zui=this.getValue(C$zut,"name",C$zui),this.getValue(C$zut,"type","region")){case"region":var C$zun=this.getValue(C$zut,"path",C$zui);var C$zua=this.attachmentLoader.newRegionAttachment(C$zue,C$zui,C$zun);return null==C$zua?null:(C$zua.path=C$zun,C$zua.x=this.getValue(C$zut,"x",0)*C$zur,C$zua.y=this.getValue(C$zut,"y",0)*C$zur,C$zua.scaleX=this.getValue(C$zut,"scaleX",1),C$zua.scaleY=this.getValue(C$zut,"scaleY",1),C$zua.rotation=this.getValue(C$zut,"rotation",0),C$zua.width=C$zut.width*C$zur,C$zua.height=C$zut.height*C$zur,null!=(C$zul=this.getValue(C$zut,"color",null))&&C$zua.color.setFromString(C$zul),C$zua.updateOffset(),C$zua);case"boundingbox":C$zua=this.attachmentLoader.newBoundingBoxAttachment(C$zue,C$zui);return null==C$zua?null:(this.readVertices(C$zut,C$zua,C$zut.vertexCount<<1),null!=(C$zul=this.getValue(C$zut,"color",null))&&C$zua.color.setFromString(C$zul),C$zua);case"mesh":case"linkedmesh":C$zun=this.getValue(C$zut,"path",C$zui);C$zua=this.attachmentLoader.newMeshAttachment(C$zue,C$zui,C$zun);if(null==C$zua)return null;C$zua.path=C$zun,null!=(C$zul=this.getValue(C$zut,"color",null))&&C$zua.color.setFromString(C$zul),C$zua.width=this.getValue(C$zut,"width",0)*C$zur,C$zua.height=this.getValue(C$zut,"height",0)*C$zur;var C$zuo=this.getValue(C$zut,"parent",null);if(null!=C$zuo)return this.linkedMeshes.push(new C$zud(C$zua,this.getValue(C$zut,"skin",null),C$zuh,C$zuo,this.getValue(C$zut,"deform",!0))),C$zua;C$zuo=C$zut.uvs;return this.readVertices(C$zut,C$zua,C$zuo.length),C$zua.triangles=C$zut.triangles,C$zua.regionUVs=C$zuo,C$zua.updateUVs(),C$zua.edges=this.getValue(C$zut,"edges",null),C$zua.hullLength=2*this.getValue(C$zut,"hull",0),C$zua;case"path":if(null==(C$zun=this.attachmentLoader.newPathAttachment(C$zue,C$zui)))return null;C$zun.closed=this.getValue(C$zut,"closed",!1),C$zun.constantSpeed=this.getValue(C$zut,"constantSpeed",!0);var C$zus=C$zut.vertexCount;this.readVertices(C$zut,C$zun,C$zus<<1);var C$zu_=C$zuet.Utils.newArray(C$zus/3,0);for(var C$zuc=0;C$zuc<C$zut.lengths.length;C$zuc++)C$zu_[C$zuc]=C$zut.lengths[C$zuc]*C$zur;return C$zun.lengths=C$zu_,null!=(C$zul=this.getValue(C$zut,"color",null))&&C$zun.color.setFromString(C$zul),C$zun;case"point":C$zuo=this.attachmentLoader.newPointAttachment(C$zue,C$zui);return null==C$zuo?null:(C$zuo.x=this.getValue(C$zut,"x",0)*C$zur,C$zuo.y=this.getValue(C$zut,"y",0)*C$zur,C$zuo.rotation=this.getValue(C$zut,"rotation",0),null!=(C$zul=this.getValue(C$zut,"color",null))&&C$zuo.color.setFromString(C$zul),C$zuo);case"clipping":C$zua=this.attachmentLoader.newClippingAttachment(C$zue,C$zui);if(null==C$zua)return null;C$zun=this.getValue(C$zut,"end",null);if(null!=C$zun){C$zuo=C$zuu.findSlot(C$zun);if(null==C$zuo)throw new Error("Clipping end slot not found: "+C$zun);C$zua.endSlot=C$zuo}C$zus=C$zut.vertexCount;var C$zul;return this.readVertices(C$zut,C$zua,C$zus<<1),null!=(C$zul=this.getValue(C$zut,"color",null))&&C$zua.color.setFromString(C$zul),C$zua}return null},SkeletonJson.prototype.readVertices=function(C$zuh,C$zut,C$zue){var C$zui=this.scale;C$zut.worldVerticesLength=C$zue;var C$zur=C$zuh.vertices;if(C$zue!=C$zur.length){var C$zun=new Array;var C$zua=new Array;for(C$zuc=0,C$zul=C$zur.length;C$zuc<C$zul;){var C$zuo=C$zur[C$zuc++];C$zua.push(C$zuo);for(var C$zuu=C$zuc+4*C$zuo;C$zuc<C$zuu;C$zuc+=4)C$zua.push(C$zur[C$zuc]),C$zun.push(C$zur[C$zuc+1]*C$zui),C$zun.push(C$zur[C$zuc+2]*C$zui),C$zun.push(C$zur[C$zuc+3])}C$zut.bones=C$zua,C$zut.vertices=C$zuet.Utils.toFloatArray(C$zun)}else{var C$zus=C$zuet.Utils.toFloatArray(C$zur);if(1!=C$zui)for(var C$zuc=0,C$zul=C$zur.length;C$zuc<C$zul;C$zuc++)C$zus[C$zuc]*=C$zui;C$zut.vertices=C$zus}},SkeletonJson.prototype.readAnimation=function(C$zut,C$zuh,C$zue){var C$zuu=this.scale;var C$zui=new Array;var C$zur=0;if(C$zut.slots)for(var C$zu_ in C$zut.slots){var C$zud=C$zut.slots[C$zu_];if(-1==(C$zuZ=C$zue.findSlotIndex(C$zu_)))throw new Error("Slot not found: "+C$zu_);for(var C$zun in C$zud){var C$zua=C$zud[C$zun];if("attachment"==C$zun){(C$zul=new C$zuet.AttachmentTimeline(C$zua.length)).slotIndex=C$zuZ;var C$zuo=0;for(var C$zus=0;C$zus<C$zua.length;C$zus++){var C$zuc=C$zua[C$zus];C$zul.setFrame(C$zuo++,this.getValue(C$zuc,"time",0),C$zuc.name)}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[C$zul.getFrameCount()-1])}else if("color"==C$zun){(C$zul=new C$zuet.ColorTimeline(C$zua.length)).slotIndex=C$zuZ;C$zuo=0;for(C$zus=0;C$zus<C$zua.length;C$zus++){C$zuc=C$zua[C$zus];var C$zuf=new C$zuet.Color;C$zuf.setFromString(C$zuc.color),C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),C$zuf.r,C$zuf.g,C$zuf.b,C$zuf.a),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.ColorTimeline.ENTRIES])}else{if("twoColor"!=C$zun)throw new Error("Invalid timeline type for a slot: "+C$zun+" ("+C$zu_+")");(C$zul=new C$zuet.TwoColorTimeline(C$zua.length)).slotIndex=C$zuZ;C$zuo=0;for(C$zus=0;C$zus<C$zua.length;C$zus++){C$zuc=C$zua[C$zus];var C$zup=new C$zuet.Color;var C$zum=new C$zuet.Color;C$zup.setFromString(C$zuc.light),C$zum.setFromString(C$zuc.dark),C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),C$zup.r,C$zup.g,C$zup.b,C$zup.a,C$zum.r,C$zum.g,C$zum.b),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.TwoColorTimeline.ENTRIES])}}}if(C$zut.bones)for(var C$zuv in C$zut.bones){var C$zuy=C$zut.bones[C$zuv];var C$zug=C$zue.findBoneIndex(C$zuv);if(-1==C$zug)throw new Error("Bone not found: "+C$zuv);for(var C$zun in C$zuy){C$zua=C$zuy[C$zun];if("rotate"===C$zun){(C$zul=new C$zuet.RotateTimeline(C$zua.length)).boneIndex=C$zug;C$zuo=0;for(C$zus=0;C$zus<C$zua.length;C$zus++){C$zuc=C$zua[C$zus];C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),this.getValue(C$zuc,"angle",0)),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.RotateTimeline.ENTRIES])}else{if("translate"!==C$zun&&"scale"!==C$zun&&"shear"!==C$zun)throw new Error("Invalid timeline type for a bone: "+C$zun+" ("+C$zuv+")");var C$zul=null;var C$zub=1,C$zuC=0;"scale"===C$zun?(C$zul=new C$zuet.ScaleTimeline(C$zua.length),C$zuC=1):"shear"===C$zun?C$zul=new C$zuet.ShearTimeline(C$zua.length):(C$zul=new C$zuet.TranslateTimeline(C$zua.length),C$zub=C$zuu),C$zul.boneIndex=C$zug;C$zuo=0;for(C$zus=0;C$zus<C$zua.length;C$zus++){C$zuc=C$zua[C$zus];var C$zux=this.getValue(C$zuc,"x",C$zuC),C$zuA=this.getValue(C$zuc,"y",C$zuC);C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),C$zux*C$zub,C$zuA*C$zub),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.TranslateTimeline.ENTRIES])}}}if(C$zut.ik)for(var C$zuS in C$zut.ik){var C$zuT=C$zut.ik[C$zuS];var C$zuw=C$zue.findIkConstraint(C$zuS);(C$zul=new C$zuet.IkConstraintTimeline(C$zuT.length)).ikConstraintIndex=C$zue.ikConstraints.indexOf(C$zuw);C$zuo=0;for(C$zus=0;C$zus<C$zuT.length;C$zus++){C$zuc=C$zuT[C$zus];C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),this.getValue(C$zuc,"mix",1),this.getValue(C$zuc,"softness",0)*C$zuu,this.getValue(C$zuc,"bendPositive",!0)?1:-1,this.getValue(C$zuc,"compress",!1),this.getValue(C$zuc,"stretch",!1)),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.IkConstraintTimeline.ENTRIES])}if(C$zut.transform)for(var C$zuS in C$zut.transform){C$zuT=C$zut.transform[C$zuS];C$zuw=C$zue.findTransformConstraint(C$zuS);(C$zul=new C$zuet.TransformConstraintTimeline(C$zuT.length)).transformConstraintIndex=C$zue.transformConstraints.indexOf(C$zuw);C$zuo=0;for(C$zus=0;C$zus<C$zuT.length;C$zus++){C$zuc=C$zuT[C$zus];C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),this.getValue(C$zuc,"rotateMix",1),this.getValue(C$zuc,"translateMix",1),this.getValue(C$zuc,"scaleMix",1),this.getValue(C$zuc,"shearMix",1)),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.TransformConstraintTimeline.ENTRIES])}var C$zuE=C$zut.path||C$zut.paths;if(C$zuE)for(var C$zuS in C$zuE){C$zuT=C$zuE[C$zuS];var C$zuP=C$zue.findPathConstraintIndex(C$zuS);if(-1==C$zuP)throw new Error("Path constraint not found: "+C$zuS);var C$zuM=C$zue.pathConstraints[C$zuP];for(var C$zun in C$zuT){C$zua=C$zuT[C$zun];if("position"===C$zun||"spacing"===C$zun){C$zul=null;C$zub=1;"spacing"===C$zun?(C$zul=new C$zuet.PathConstraintSpacingTimeline(C$zua.length),C$zuM.spacingMode!=C$zuet.SpacingMode.Length&&C$zuM.spacingMode!=C$zuet.SpacingMode.Fixed||(C$zub=C$zuu)):(C$zul=new C$zuet.PathConstraintPositionTimeline(C$zua.length),C$zuM.positionMode==C$zuet.PositionMode.Fixed&&(C$zub=C$zuu)),C$zul.pathConstraintIndex=C$zuP;C$zuo=0;for(C$zus=0;C$zus<C$zua.length;C$zus++){C$zuc=C$zua[C$zus];C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),this.getValue(C$zuc,C$zun,0)*C$zub),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===C$zun){(C$zul=new C$zuet.PathConstraintMixTimeline(C$zua.length)).pathConstraintIndex=C$zuP;C$zuo=0;for(C$zus=0;C$zus<C$zua.length;C$zus++){C$zuc=C$zua[C$zus];C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),this.getValue(C$zuc,"rotateMix",1),this.getValue(C$zuc,"translateMix",1)),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[(C$zul.getFrameCount()-1)*C$zuet.PathConstraintMixTimeline.ENTRIES])}}}if(C$zut.deform)for(var C$zuR in C$zut.deform){var C$zuI=C$zut.deform[C$zuR];var C$zuB=C$zue.findSkin(C$zuR);if(null==C$zuB)throw new Error("Skin not found: "+C$zuR);for(var C$zu_ in C$zuI){C$zud=C$zuI[C$zu_];if(-1==(C$zuZ=C$zue.findSlotIndex(C$zu_)))throw new Error("Slot not found: "+C$zud.name);for(var C$zun in C$zud){C$zua=C$zud[C$zun];var C$zuD=C$zuB.getAttachment(C$zuZ,C$zun);if(null!=C$zuD){var C$zuL=null!=C$zuD.bones;var C$zuV=C$zuD.vertices;var C$zuO=C$zuL?C$zuV.length/3*2:C$zuV.length;(C$zul=new C$zuet.DeformTimeline(C$zua.length)).slotIndex=C$zuZ,C$zul.attachment=C$zuD;C$zuo=0;for(var C$zuF=0;C$zuF<C$zua.length;C$zuF++){C$zuc=C$zua[C$zuF];var C$zuN=void 0;var C$zuk=this.getValue(C$zuc,"vertices",null);if(null==C$zuk)C$zuN=C$zuL?C$zuet.Utils.newFloatArray(C$zuO):C$zuV;else{C$zuN=C$zuet.Utils.newFloatArray(C$zuO);var C$zuz=this.getValue(C$zuc,"offset",0);if(C$zuet.Utils.arrayCopy(C$zuk,0,C$zuN,C$zuz,C$zuk.length),1!=C$zuu)for(var C$zuG=(C$zus=C$zuz)+C$zuk.length;C$zus<C$zuG;C$zus++)C$zuN[C$zus]*=C$zuu;if(!C$zuL)for(C$zus=0;C$zus<C$zuO;C$zus++)C$zuN[C$zus]+=C$zuV[C$zus]}C$zul.setFrame(C$zuo,this.getValue(C$zuc,"time",0),C$zuN),this.readCurve(C$zuc,C$zul,C$zuo),C$zuo++}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[C$zul.getFrameCount()-1])}}}}var C$zuU=C$zut.drawOrder;if(null!=(C$zuU=null==C$zuU?C$zut.draworder:C$zuU)){C$zul=new C$zuet.DrawOrderTimeline(C$zuU.length);var C$zuW=C$zue.slots.length;C$zuo=0;for(C$zuF=0;C$zuF<C$zuU.length;C$zuF++){var C$zuH=C$zuU[C$zuF];var C$zuj=null;var C$zuX=this.getValue(C$zuH,"offsets",null);if(null!=C$zuX){C$zuj=C$zuet.Utils.newArray(C$zuW,-1);var C$zuq=C$zuet.Utils.newArray(C$zuW-C$zuX.length,0);var C$zuJ=0,C$zuY=0;for(C$zus=0;C$zus<C$zuX.length;C$zus++){var C$zu$=C$zuX[C$zus];var C$zuZ;if(-1==(C$zuZ=C$zue.findSlotIndex(C$zu$.slot)))throw new Error("Slot not found: "+C$zu$.slot);for(;C$zuJ!=C$zuZ;)C$zuq[C$zuY++]=C$zuJ++;C$zuj[C$zuJ+C$zu$.offset]=C$zuJ++}for(;C$zuJ<C$zuW;)C$zuq[C$zuY++]=C$zuJ++;for(C$zus=C$zuW-1;0<=C$zus;C$zus--)-1==C$zuj[C$zus]&&(C$zuj[C$zus]=C$zuq[--C$zuY])}C$zul.setFrame(C$zuo++,this.getValue(C$zuH,"time",0),C$zuj)}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[C$zul.getFrameCount()-1])}if(C$zut.events){C$zul=new C$zuet.EventTimeline(C$zut.events.length);C$zuo=0;for(C$zus=0;C$zus<C$zut.events.length;C$zus++){var C$zuQ=C$zut.events[C$zus];var C$zuK=C$zue.findEvent(C$zuQ.name);if(null==C$zuK)throw new Error("Event not found: "+C$zuQ.name);var C$zutt=new C$zuet.Event(C$zuet.Utils.toSinglePrecision(this.getValue(C$zuQ,"time",0)),C$zuK);C$zutt.intValue=this.getValue(C$zuQ,"int",C$zuK.intValue),C$zutt.floatValue=this.getValue(C$zuQ,"float",C$zuK.floatValue),C$zutt.stringValue=this.getValue(C$zuQ,"string",C$zuK.stringValue),null!=C$zutt.data.audioPath&&(C$zutt.volume=this.getValue(C$zuQ,"volume",1),C$zutt.balance=this.getValue(C$zuQ,"balance",0)),C$zul.setFrame(C$zuo++,C$zutt)}C$zui.push(C$zul),C$zur=Math.max(C$zur,C$zul.frames[C$zul.getFrameCount()-1])}if(isNaN(C$zur))throw new Error("Error while parsing animation, duration is NaN");C$zue.animations.push(new C$zuet.Animation(C$zuh,C$zui,C$zur))},SkeletonJson.prototype.readCurve=function(C$zut,C$zue,C$zui){var C$zur=C$zut.curve;C$zur&&("stepped"==C$zur?C$zue.setStepped(C$zui):"[object Array]"===Object.prototype.toString.call(C$zur)?C$zue.setCurve(C$zui,C$zur[0],C$zur[1],C$zur[2],C$zur[3]):C$zue.setCurve(C$zui,C$zur,this.getValue(C$zut,"c2",0),this.getValue(C$zut,"c3",1),this.getValue(C$zut,"c4",1)))},SkeletonJson.prototype.getValue=function(C$zut,C$zue,C$zui){return void 0!==C$zut[C$zue]?C$zut[C$zue]:C$zui},SkeletonJson.blendModeFromString=function(C$zut){if("normal"==(C$zut=C$zut.toLowerCase()))return C$zuet.BlendMode.Normal;if("additive"==C$zut)return C$zuet.BlendMode.Additive;if("multiply"==C$zut)return C$zuet.BlendMode.Multiply;if("screen"==C$zut)return C$zuet.BlendMode.Screen;throw new Error("Unknown blend mode: "+C$zut)},SkeletonJson.positionModeFromString=function(C$zut){if("fixed"==(C$zut=C$zut.toLowerCase()))return C$zuet.PositionMode.Fixed;if("percent"==C$zut)return C$zuet.PositionMode.Percent;throw new Error("Unknown position mode: "+C$zut)},SkeletonJson.spacingModeFromString=function(C$zut){if("length"==(C$zut=C$zut.toLowerCase()))return C$zuet.SpacingMode.Length;if("fixed"==C$zut)return C$zuet.SpacingMode.Fixed;if("percent"==C$zut)return C$zuet.SpacingMode.Percent;throw new Error("Unknown position mode: "+C$zut)},SkeletonJson.rotateModeFromString=function(C$zut){if("tangent"==(C$zut=C$zut.toLowerCase()))return C$zuet.RotateMode.Tangent;if("chain"==C$zut)return C$zuet.RotateMode.Chain;if("chainscale"==C$zut)return C$zuet.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+C$zut)},SkeletonJson.transformModeFromString=function(C$zut){if("normal"==(C$zut=C$zut.toLowerCase()))return C$zuet.TransformMode.Normal;if("onlytranslation"==C$zut)return C$zuet.TransformMode.OnlyTranslation;if("norotationorreflection"==C$zut)return C$zuet.TransformMode.NoRotationOrReflection;if("noscale"==C$zut)return C$zuet.TransformMode.NoScale;if("noscaleorreflection"==C$zut)return C$zuet.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+C$zut)},C$zuet.SkeletonJson=SkeletonJson;var C$zud=function(C$zut,C$zue,C$zui,C$zur,C$zun){this.mesh=C$zut,this.skin=C$zue,this.slotIndex=C$zui,this.parent=C$zur,this.inheritDeform=C$zun}}(C$zur=C$zur||{}),function(C$zuc){var C$zua=function(C$zut,C$zue,C$zui){this.slotIndex=C$zut,this.name=C$zue,this.attachment=C$zui};function Skin(C$zut){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==C$zut)throw new Error("name cannot be null.");this.name=C$zut}C$zuc.SkinEntry=C$zua,Skin.prototype.setAttachment=function(C$zut,C$zue,C$zui){if(null==C$zui)throw new Error("attachment cannot be null.");var C$zur=this.attachments;C$zut>=C$zur.length&&(C$zur.length=C$zut+1),C$zur[C$zut]||(C$zur[C$zut]={}),C$zur[C$zut][C$zue]=C$zui},Skin.prototype.addSkin=function(C$zut){for(var C$zue=0;C$zue<C$zut.bones.length;C$zue++){var C$zui=C$zut.bones[C$zue];var C$zur=!1;for(var C$zun=0;C$zun<this.bones.length;C$zun++)if(this.bones[C$zun]==C$zui){C$zur=!0;break}C$zur||this.bones.push(C$zui)}for(C$zue=0;C$zue<C$zut.constraints.length;C$zue++){var C$zua=C$zut.constraints[C$zue];C$zur=!1;for(C$zun=0;C$zun<this.constraints.length;C$zun++)if(this.constraints[C$zun]==C$zua){C$zur=!0;break}C$zur||this.constraints.push(C$zua)}var C$zuo=C$zut.getAttachments();for(C$zue=0;C$zue<C$zuo.length;C$zue++){var C$zus=C$zuo[C$zue];this.setAttachment(C$zus.slotIndex,C$zus.name,C$zus.attachment)}},Skin.prototype.copySkin=function(C$zut){for(var C$zue=0;C$zue<C$zut.bones.length;C$zue++){var C$zui=C$zut.bones[C$zue];var C$zur=!1;for(var C$zun=0;C$zun<this.bones.length;C$zun++)if(this.bones[C$zun]==C$zui){C$zur=!0;break}C$zur||this.bones.push(C$zui)}for(C$zue=0;C$zue<C$zut.constraints.length;C$zue++){var C$zua=C$zut.constraints[C$zue];C$zur=!1;for(C$zun=0;C$zun<this.constraints.length;C$zun++)if(this.constraints[C$zun]==C$zua){C$zur=!0;break}C$zur||this.constraints.push(C$zua)}var C$zuo=C$zut.getAttachments();for(C$zue=0;C$zue<C$zuo.length;C$zue++){var C$zus=C$zuo[C$zue];null!=C$zus.attachment&&(C$zus.attachment instanceof C$zuc.MeshAttachment?C$zus.attachment=C$zus.attachment.newLinkedMesh():C$zus.attachment=C$zus.attachment.copy(),this.setAttachment(C$zus.slotIndex,C$zus.name,C$zus.attachment))}},Skin.prototype.getAttachment=function(C$zut,C$zue){C$zut=this.attachments[C$zut];return C$zut?C$zut[C$zue]:null},Skin.prototype.removeAttachment=function(C$zut,C$zue){C$zut=this.attachments[C$zut];C$zut&&(C$zut[C$zue]=null)},Skin.prototype.getAttachments=function(){var C$zut=new Array;for(var C$zue=0;C$zue<this.attachments.length;C$zue++){var C$zui=this.attachments[C$zue];if(C$zui)for(var C$zur in C$zui){var C$zun=C$zui[C$zur];C$zun&&C$zut.push(new C$zua(C$zue,C$zur,C$zun))}}return C$zut},Skin.prototype.getAttachmentsForSlot=function(C$zut,C$zue){var C$zui=this.attachments[C$zut];if(C$zui)for(var C$zur in C$zui){var C$zun=C$zui[C$zur];C$zun&&C$zue.push(new C$zua(C$zut,C$zur,C$zun))}},Skin.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},Skin.prototype.attachAll=function(C$zut,C$zue){var C$zui=0;for(var C$zur=0;C$zur<C$zut.slots.length;C$zur++){var C$zun=C$zut.slots[C$zur];var C$zua=C$zun.getAttachment();if(C$zua&&C$zui<C$zue.attachments.length){var C$zuo=C$zue.attachments[C$zui];for(var C$zus in C$zuo)if(C$zua==C$zuo[C$zus]){C$zus=this.getAttachment(C$zui,C$zus);null!=C$zus&&C$zun.setAttachment(C$zus);break}}C$zui++}},C$zuc.Skin=Skin}(C$zur=C$zur||{}),function(C$zui){function Slot(C$zut,C$zue){if(this.deform=new Array,null==C$zut)throw new Error("data cannot be null.");if(null==C$zue)throw new Error("bone cannot be null.");this.data=C$zut,this.bone=C$zue,this.color=new C$zui.Color,this.darkColor=null==C$zut.darkColor?null:new C$zui.Color,this.setToSetupPose()}Slot.prototype.getSkeleton=function(){return this.bone.skeleton},Slot.prototype.getAttachment=function(){return this.attachment},Slot.prototype.setAttachment=function(C$zut){this.attachment!=C$zut&&(this.attachment=C$zut,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},Slot.prototype.setAttachmentTime=function(C$zut){this.attachmentTime=this.bone.skeleton.time-C$zut},Slot.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},Slot.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},C$zui.Slot=Slot}(C$zur=C$zur||{}),(C$zuf=C$zur=C$zur||{}).SlotData=function(C$zut,C$zue,C$zui){if(this.color=new C$zuf.Color(1,1,1,1),C$zut<0)throw new Error("index must be >= 0.");if(null==C$zue)throw new Error("name cannot be null.");if(null==C$zui)throw new Error("boneData cannot be null.");this.index=C$zut,this.name=C$zue,this.boneData=C$zui};var C$zut=C$zur=C$zur||{};Texture.prototype.getImage=function(){return this._image},Texture.filterFromString=function(C$zut){switch(C$zut.toLowerCase()){case"nearest":return C$zup.Nearest;case"linear":return C$zup.Linear;case"mipmap":return C$zup.MipMap;case"mipmapnearestnearest":return C$zup.MipMapNearestNearest;case"mipmaplinearnearest":return C$zup.MipMapLinearNearest;case"mipmapnearestlinear":return C$zup.MipMapNearestLinear;case"mipmaplinearlinear":return C$zup.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+C$zut)}},Texture.wrapFromString=function(C$zut){switch(C$zut.toLowerCase()){case"mirroredtepeat":return C$zuv.MirroredRepeat;case"clamptoedge":return C$zuv.ClampToEdge;case"repeat":return C$zuv.Repeat;default:throw new Error("Unknown texture wrap "+C$zut)}};var C$zue=Texture;function Texture(C$zut){this._image=C$zut}var C$zup;var C$zuv;C$zut.Texture=C$zue,(C$zui=C$zup=C$zut.TextureFilter||(C$zut.TextureFilter={}))[C$zui.Nearest=9728]="Nearest",C$zui[C$zui.Linear=9729]="Linear",C$zui[C$zui.MipMap=9987]="MipMap",C$zui[C$zui.MipMapNearestNearest=9984]="MipMapNearestNearest",C$zui[C$zui.MipMapLinearNearest=9985]="MipMapLinearNearest",C$zui[C$zui.MipMapNearestLinear=9986]="MipMapNearestLinear",C$zui[C$zui.MipMapLinearLinear=9987]="MipMapLinearLinear",(C$zui=C$zuv=C$zut.TextureWrap||(C$zut.TextureWrap={}))[C$zui.MirroredRepeat=33648]="MirroredRepeat",C$zui[C$zui.ClampToEdge=33071]="ClampToEdge",C$zui[C$zui.Repeat=10497]="Repeat",C$zut.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},C$zuy(FakeTexture,C$zug=C$zue),FakeTexture.prototype.setFilters=function(C$zut,C$zue){},FakeTexture.prototype.setWraps=function(C$zut,C$zue){},FakeTexture.prototype.dispose=function(){};var C$zui=FakeTexture;function FakeTexture(){return null!==C$zug&&C$zug.apply(this,arguments)||this}var C$zug;function TransformConstraintData(C$zut){C$zut=C$zub.call(this,C$zut,0,!1)||this;return C$zut.bones=new Array,C$zut.rotateMix=0,C$zut.translateMix=0,C$zut.scaleMix=0,C$zut.shearMix=0,C$zut.offsetRotation=0,C$zut.offsetX=0,C$zut.offsetY=0,C$zut.offsetScaleX=0,C$zut.offsetScaleY=0,C$zut.offsetShearY=0,C$zut.relative=!1,C$zut.local=!1,C$zut}var C$zub;var C$zuC;C$zut.FakeTexture=C$zui,function(C$zuu){function TextureAtlas(C$zut,C$zue){this.pages=new Array,this.regions=new Array,this.load(C$zut,C$zue)}TextureAtlas.prototype.load=function(C$zuh,C$zut){if(null==C$zut)throw new Error("textureLoader cannot be null.");var C$zue=new C$zu_(C$zuh);var C$zui=new Array(4);var C$zur=null;for(;;){var C$zun=C$zue.readLine();if(null==C$zun)break;var C$zua,C$zuo,C$zus,C$zuc,C$zul;0==(C$zun=C$zun.trim()).length?C$zur=null:C$zur?((C$zua=new C$zuf).name=C$zun,C$zua.page=C$zur,"true"==(C$zul=C$zue.readValue()).toLocaleLowerCase()?C$zua.degrees=90:"false"==C$zul.toLocaleLowerCase()?C$zua.degrees=0:C$zua.degrees=parseFloat(C$zul),C$zua.rotate=90==C$zua.degrees,C$zue.readTuple(C$zui),C$zul=parseInt(C$zui[0]),C$zuo=parseInt(C$zui[1]),C$zue.readTuple(C$zui),C$zus=parseInt(C$zui[0]),C$zuc=parseInt(C$zui[1]),C$zua.u=C$zul/C$zur.width,C$zua.v=C$zuo/C$zur.height,C$zua.rotate?(C$zua.u2=(C$zul+C$zuc)/C$zur.width,C$zua.v2=(C$zuo+C$zus)/C$zur.height):(C$zua.u2=(C$zul+C$zus)/C$zur.width,C$zua.v2=(C$zuo+C$zuc)/C$zur.height),C$zua.x=C$zul,C$zua.y=C$zuo,C$zua.width=Math.abs(C$zus),C$zua.height=Math.abs(C$zuc),4==C$zue.readTuple(C$zui)&&4==C$zue.readTuple(C$zui)&&C$zue.readTuple(C$zui),C$zua.originalWidth=parseInt(C$zui[0]),C$zua.originalHeight=parseInt(C$zui[1]),C$zue.readTuple(C$zui),C$zua.offsetX=parseInt(C$zui[0]),C$zua.offsetY=parseInt(C$zui[1]),C$zua.index=parseInt(C$zue.readValue()),C$zua.texture=C$zur.texture,this.regions.push(C$zua)):((C$zur=new C$zud).name=C$zun,2==C$zue.readTuple(C$zui)&&(C$zur.width=parseInt(C$zui[0]),C$zur.height=parseInt(C$zui[1]),C$zue.readTuple(C$zui)),C$zue.readTuple(C$zui),C$zur.minFilter=C$zuu.Texture.filterFromString(C$zui[0]),C$zur.magFilter=C$zuu.Texture.filterFromString(C$zui[1]),C$zul=C$zue.readValue(),C$zur.uWrap=C$zuu.TextureWrap.ClampToEdge,C$zur.vWrap=C$zuu.TextureWrap.ClampToEdge,"x"==C$zul?C$zur.uWrap=C$zuu.TextureWrap.Repeat:"y"==C$zul?C$zur.vWrap=C$zuu.TextureWrap.Repeat:"xy"==C$zul&&(C$zur.uWrap=C$zur.vWrap=C$zuu.TextureWrap.Repeat),C$zur.texture=C$zut(C$zun),C$zur.texture.setFilters(C$zur.minFilter,C$zur.magFilter),C$zur.texture.setWraps(C$zur.uWrap,C$zur.vWrap),C$zur.width=C$zur.texture.getImage().width,C$zur.height=C$zur.texture.getImage().height,this.pages.push(C$zur))}},TextureAtlas.prototype.findRegion=function(C$zut){for(var C$zue=0;C$zue<this.regions.length;C$zue++)if(this.regions[C$zue].name==C$zut)return this.regions[C$zue];return null},TextureAtlas.prototype.dispose=function(){for(var C$zut=0;C$zut<this.pages.length;C$zut++)this.pages[C$zut].texture.dispose()},C$zuu.TextureAtlas=TextureAtlas;TextureAtlasReader.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},TextureAtlasReader.prototype.readValue=function(){var C$zut=this.readLine();var C$zue=C$zut.indexOf(":");if(-1==C$zue)throw new Error("Invalid line: "+C$zut);return C$zut.substring(C$zue+1).trim()},TextureAtlasReader.prototype.readTuple=function(C$zut){var C$zue=this.readLine();var C$zui=C$zue.indexOf(":");if(-1==C$zui)throw new Error("Invalid line: "+C$zue);var C$zur=0,C$zun=C$zui+1;for(;C$zur<3;C$zur++){var C$zua=C$zue.indexOf(",",C$zun);if(-1==C$zua)break;C$zut[C$zur]=C$zue.substr(C$zun,C$zua-C$zun).trim(),C$zun=C$zua+1}return C$zut[C$zur]=C$zue.substring(C$zun).trim(),C$zur+1};var C$zu_=TextureAtlasReader;function TextureAtlasReader(C$zut){this.index=0,this.lines=C$zut.split(/\r\n|\r|\n/)}var C$zud=function(){};C$zuu.TextureAtlasPage=C$zud;C$zut=C$zuu.TextureRegion,C$zuy(TextureAtlasRegion,C$zut);var C$zuf=TextureAtlasRegion;function TextureAtlasRegion(){return null!==C$zut&&C$zut.apply(this,arguments)||this}var C$zut;C$zuu.TextureAtlasRegion=C$zuf}(C$zur=C$zur||{}),function(C$zuT){function TransformConstraint(C$zut,C$zue){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new C$zuT.Vector2,this.active=!1,null==C$zut)throw new Error("data cannot be null.");if(null==C$zue)throw new Error("skeleton cannot be null.");this.data=C$zut,this.rotateMix=C$zut.rotateMix,this.translateMix=C$zut.translateMix,this.scaleMix=C$zut.scaleMix,this.shearMix=C$zut.shearMix,this.bones=new Array;for(var C$zui=0;C$zui<C$zut.bones.length;C$zui++)this.bones.push(C$zue.findBone(C$zut.bones[C$zui].name));this.target=C$zue.findBone(C$zut.target.name)}TransformConstraint.prototype.isActive=function(){return this.active},TransformConstraint.prototype.apply=function(){this.update()},TransformConstraint.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},TransformConstraint.prototype.applyAbsoluteWorld=function(){var C$zuh=this.rotateMix,C$zuu=this.translateMix,C$zu_=this.scaleMix,C$zud=this.shearMix;var C$zut=this.target;var C$zue=C$zut.a,C$zuf=C$zut.b,C$zup=C$zut.c,C$zum=C$zut.d;var C$zuv=0<C$zue*C$zum-C$zuf*C$zup?C$zuT.MathUtils.degRad:-C$zuT.MathUtils.degRad;var C$zuy=this.data.offsetRotation*C$zuv;var C$zug=this.data.offsetShearY*C$zuv;var C$zub=this.bones;for(var C$zuC=0,C$zux=C$zub.length;C$zuC<C$zux;C$zuC++){var C$zui=C$zub[C$zuC];var C$zuA=!1;var C$zuS;var C$zur;var C$zun;var C$zua,C$zuo,C$zus,C$zuc,C$zul;0!=C$zuh&&(C$zur=C$zui.a,C$zua=C$zui.b,C$zun=C$zui.c,C$zuo=C$zui.d,(C$zuc=Math.atan2(C$zup,C$zue)-Math.atan2(C$zun,C$zur)+C$zuy)>C$zuT.MathUtils.PI?C$zuc-=C$zuT.MathUtils.PI2:C$zuc<-C$zuT.MathUtils.PI&&(C$zuc+=C$zuT.MathUtils.PI2),C$zuc*=C$zuh,C$zuS=Math.cos(C$zuc),C$zus=Math.sin(C$zuc),C$zui.a=C$zuS*C$zur-C$zus*C$zun,C$zui.b=C$zuS*C$zua-C$zus*C$zuo,C$zui.c=C$zus*C$zur+C$zuS*C$zun,C$zui.d=C$zus*C$zua+C$zuS*C$zuo,C$zuA=!0),0!=C$zuu&&(C$zur=this.temp,C$zut.localToWorld(C$zur.set(this.data.offsetX,this.data.offsetY)),C$zui.worldX+=(C$zur.x-C$zui.worldX)*C$zuu,C$zui.worldY+=(C$zur.y-C$zui.worldY)*C$zuu,C$zuA=!0),0<C$zu_&&(C$zul=Math.sqrt(C$zui.a*C$zui.a+C$zui.c*C$zui.c),C$zun=Math.sqrt(C$zue*C$zue+C$zup*C$zup),1e-5<C$zul&&(C$zul=(C$zul+(C$zun-C$zul+this.data.offsetScaleX)*C$zu_)/C$zul),C$zui.a*=C$zul,C$zui.c*=C$zul,C$zul=Math.sqrt(C$zui.b*C$zui.b+C$zui.d*C$zui.d),C$zun=Math.sqrt(C$zuf*C$zuf+C$zum*C$zum),1e-5<C$zul&&(C$zul=(C$zul+(C$zun-C$zul+this.data.offsetScaleY)*C$zu_)/C$zul),C$zui.b*=C$zul,C$zui.d*=C$zul,C$zuA=!0),0<C$zud&&(C$zua=C$zui.b,C$zuo=C$zui.d,C$zus=Math.atan2(C$zuo,C$zua),(C$zuc=Math.atan2(C$zum,C$zuf)-Math.atan2(C$zup,C$zue)-(C$zus-Math.atan2(C$zui.c,C$zui.a)))>C$zuT.MathUtils.PI?C$zuc-=C$zuT.MathUtils.PI2:C$zuc<-C$zuT.MathUtils.PI&&(C$zuc+=C$zuT.MathUtils.PI2),C$zuc=C$zus+(C$zuc+C$zug)*C$zud,C$zul=Math.sqrt(C$zua*C$zua+C$zuo*C$zuo),C$zui.b=Math.cos(C$zuc)*C$zul,C$zui.d=Math.sin(C$zuc)*C$zul,C$zuA=!0),C$zuA&&(C$zui.appliedValid=!1)}},TransformConstraint.prototype.applyRelativeWorld=function(){var C$zuh=this.rotateMix,C$zuu=this.translateMix,C$zu_=this.scaleMix,C$zud=this.shearMix;var C$zut=this.target;var C$zue=C$zut.a,C$zuf=C$zut.b,C$zui=C$zut.c,C$zup=C$zut.d;var C$zum=0<C$zue*C$zup-C$zuf*C$zui?C$zuT.MathUtils.degRad:-C$zuT.MathUtils.degRad;var C$zuv=this.data.offsetRotation*C$zum,C$zuy=this.data.offsetShearY*C$zum;var C$zug=this.bones;for(var C$zub=0,C$zuC=C$zug.length;C$zub<C$zuC;C$zub++){var C$zur=C$zug[C$zub];var C$zun=!1;var C$zux,C$zuA,C$zuS;var C$zua;var C$zuo,C$zus,C$zuc,C$zul;0!=C$zuh&&(C$zua=C$zur.a,C$zus=C$zur.b,C$zux=C$zur.c,C$zuc=C$zur.d,(C$zuo=Math.atan2(C$zui,C$zue)+C$zuv)>C$zuT.MathUtils.PI?C$zuo-=C$zuT.MathUtils.PI2:C$zuo<-C$zuT.MathUtils.PI&&(C$zuo+=C$zuT.MathUtils.PI2),C$zuo*=C$zuh,C$zuA=Math.cos(C$zuo),C$zuS=Math.sin(C$zuo),C$zur.a=C$zuA*C$zua-C$zuS*C$zux,C$zur.b=C$zuA*C$zus-C$zuS*C$zuc,C$zur.c=C$zuS*C$zua+C$zuA*C$zux,C$zur.d=C$zuS*C$zus+C$zuA*C$zuc,C$zun=!0),0!=C$zuu&&(C$zua=this.temp,C$zut.localToWorld(C$zua.set(this.data.offsetX,this.data.offsetY)),C$zur.worldX+=C$zua.x*C$zuu,C$zur.worldY+=C$zua.y*C$zuu,C$zun=!0),0<C$zu_&&(C$zul=(Math.sqrt(C$zue*C$zue+C$zui*C$zui)-1+this.data.offsetScaleX)*C$zu_+1,C$zur.a*=C$zul,C$zur.c*=C$zul,C$zul=(Math.sqrt(C$zuf*C$zuf+C$zup*C$zup)-1+this.data.offsetScaleY)*C$zu_+1,C$zur.b*=C$zul,C$zur.d*=C$zul,C$zun=!0),0<C$zud&&((C$zuo=Math.atan2(C$zup,C$zuf)-Math.atan2(C$zui,C$zue))>C$zuT.MathUtils.PI?C$zuo-=C$zuT.MathUtils.PI2:C$zuo<-C$zuT.MathUtils.PI&&(C$zuo+=C$zuT.MathUtils.PI2),C$zus=C$zur.b,C$zuc=C$zur.d,C$zuo=Math.atan2(C$zuc,C$zus)+(C$zuo-C$zuT.MathUtils.PI/2+C$zuy)*C$zud,C$zul=Math.sqrt(C$zus*C$zus+C$zuc*C$zuc),C$zur.b=Math.cos(C$zuo)*C$zul,C$zur.d=Math.sin(C$zuo)*C$zul,C$zun=!0),C$zun&&(C$zur.appliedValid=!1)}},TransformConstraint.prototype.applyAbsoluteLocal=function(){var C$zuh=this.rotateMix,C$zut=this.translateMix,C$zue=this.scaleMix,C$zuu=this.shearMix;var C$zui=this.target;C$zui.appliedValid||C$zui.updateAppliedTransform();var C$zu_=this.bones;for(var C$zur=0,C$zud=C$zu_.length;C$zur<C$zud;C$zur++){var C$zun=C$zu_[C$zur];C$zun.appliedValid||C$zun.updateAppliedTransform();var C$zua=C$zun.arotation;0!=C$zuh&&(C$zul=C$zui.arotation-C$zua+this.data.offsetRotation,C$zua+=(C$zul-=360*(16384-(16384.499999999996-C$zul/360|0)))*C$zuh);var C$zuo=C$zun.ax,C$zuf=C$zun.ay;0!=C$zut&&(C$zuo+=(C$zui.ax-C$zuo+this.data.offsetX)*C$zut,C$zuf+=(C$zui.ay-C$zuf+this.data.offsetY)*C$zut);var C$zus=C$zun.ascaleX,C$zuc=C$zun.ascaleY;0!=C$zue&&(1e-5<C$zus&&(C$zus=(C$zus+(C$zui.ascaleX-C$zus+this.data.offsetScaleX)*C$zue)/C$zus),1e-5<C$zuc&&(C$zuc=(C$zuc+(C$zui.ascaleY-C$zuc+this.data.offsetScaleY)*C$zue)/C$zuc));var C$zup=C$zun.ashearY;var C$zul;0!=C$zuu&&(C$zul=C$zui.ashearY-C$zup+this.data.offsetShearY,C$zul-=360*(16384-(16384.499999999996-C$zul/360|0)),C$zun.shearY+=C$zul*C$zuu),C$zun.updateWorldTransformWith(C$zuo,C$zuf,C$zua,C$zus,C$zuc,C$zun.ashearX,C$zup)}},TransformConstraint.prototype.applyRelativeLocal=function(){var C$zut=this.rotateMix,C$zue=this.translateMix,C$zui=this.scaleMix,C$zur=this.shearMix;var C$zun=this.target;C$zun.appliedValid||C$zun.updateAppliedTransform();var C$zua=this.bones;for(var C$zuo=0,C$zuh=C$zua.length;C$zuo<C$zuh;C$zuo++){var C$zus=C$zua[C$zuo];C$zus.appliedValid||C$zus.updateAppliedTransform();var C$zuu=C$zus.arotation;0!=C$zut&&(C$zuu+=(C$zun.arotation+this.data.offsetRotation)*C$zut);var C$zu_=C$zus.ax,C$zud=C$zus.ay;0!=C$zue&&(C$zu_+=(C$zun.ax+this.data.offsetX)*C$zue,C$zud+=(C$zun.ay+this.data.offsetY)*C$zue);var C$zuc=C$zus.ascaleX,C$zul=C$zus.ascaleY;0!=C$zui&&(1e-5<C$zuc&&(C$zuc*=(C$zun.ascaleX-1+this.data.offsetScaleX)*C$zui+1),1e-5<C$zul&&(C$zul*=(C$zun.ascaleY-1+this.data.offsetScaleY)*C$zui+1));var C$zuf=C$zus.ashearY;0!=C$zur&&(C$zuf+=(C$zun.ashearY+this.data.offsetShearY)*C$zur),C$zus.updateWorldTransformWith(C$zu_,C$zud,C$zuu,C$zuc,C$zul,C$zus.ashearX,C$zuf)}},C$zuT.TransformConstraint=TransformConstraint}(C$zur=C$zur||{}),C$zue=C$zur=C$zur||{},C$zub=C$zue.ConstraintData,C$zuy(TransformConstraintData,C$zub),C$zue.TransformConstraintData=TransformConstraintData,function(C$zut){function Triangulator(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new C$zut.Pool(function(){return new Array}),this.polygonIndicesPool=new C$zut.Pool(function(){return new Array})}Triangulator.prototype.triangulate=function(C$zuh){var C$zut=C$zuh;var C$zue=C$zuh.length>>1;var C$zui=this.indicesArray;for(var C$zur=C$zui.length=0;C$zur<C$zue;C$zur++)C$zui[C$zur]=C$zur;var C$zun=this.isConcaveArray;for(var C$zur=C$zun.length=0,C$zuu=C$zue;C$zur<C$zuu;++C$zur)C$zun[C$zur]=Triangulator.isConcave(C$zur,C$zue,C$zut,C$zui);var C$zua=this.triangles;for(C$zua.length=0;3<C$zue;){var C$zuo=C$zue-1,C$zur=0,C$zus=1;for(;;){C$zut:if(!C$zun[C$zur]){var C$zu_=C$zui[C$zuo]<<1,C$zud=C$zui[C$zur]<<1,C$zuf=C$zui[C$zus]<<1;var C$zup=C$zut[C$zu_],C$zum=C$zut[1+C$zu_];var C$zuv=C$zut[C$zud],C$zuy=C$zut[1+C$zud];var C$zug=C$zut[C$zuf],C$zub=C$zut[1+C$zuf];for(var C$zuc=(C$zus+1)%C$zue;C$zuc!=C$zuo;C$zuc=(C$zuc+1)%C$zue)if(C$zun[C$zuc]){var C$zul=C$zui[C$zuc]<<1;var C$zuC=C$zut[C$zul],C$zul=C$zut[1+C$zul];if(Triangulator.positiveArea(C$zug,C$zub,C$zup,C$zum,C$zuC,C$zul)&&Triangulator.positiveArea(C$zup,C$zum,C$zuv,C$zuy,C$zuC,C$zul)&&Triangulator.positiveArea(C$zuv,C$zuy,C$zug,C$zub,C$zuC,C$zul))break C$zut}break}if(0==C$zus){for(;C$zun[C$zur]&&0<--C$zur;);break}C$zuo=C$zur,C$zus=((C$zur=C$zus)+1)%C$zue}C$zua.push(C$zui[(C$zue+C$zur-1)%C$zue]),C$zua.push(C$zui[C$zur]),C$zua.push(C$zui[(C$zur+1)%C$zue]),C$zui.splice(C$zur,1),C$zun.splice(C$zur,1);var C$zux=(--C$zue+C$zur-1)%C$zue;var C$zuA=C$zur==C$zue?0:C$zur;C$zun[C$zux]=Triangulator.isConcave(C$zux,C$zue,C$zut,C$zui),C$zun[C$zuA]=Triangulator.isConcave(C$zuA,C$zue,C$zut,C$zui)}return 3==C$zue&&(C$zua.push(C$zui[2]),C$zua.push(C$zui[0]),C$zua.push(C$zui[1])),C$zua},Triangulator.prototype.decompose=function(C$zuh,C$zuu){var C$zut=C$zuh;var C$zue=this.convexPolygons;this.polygonPool.freeAll(C$zue),C$zue.length=0;var C$zui=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(C$zui),C$zui.length=0;var C$zur=this.polygonIndicesPool.obtain();C$zur.length=0;var C$zun=this.polygonPool.obtain();var C$zu_=-1,C$zud=C$zun.length=0;for(var C$zua=0,C$zuf=C$zuu.length;C$zua<C$zuf;C$zua+=3){var C$zup=C$zuu[C$zua]<<1,C$zum=C$zuu[C$zua+1]<<1,C$zuv=C$zuu[C$zua+2]<<1;var C$zuy=C$zut[C$zup],C$zug=C$zut[1+C$zup];var C$zub=C$zut[C$zum],C$zuC=C$zut[1+C$zum];var C$zuo=C$zut[C$zuv],C$zus=C$zut[1+C$zuv];var C$zux=!1;C$zu_==C$zup&&(C$zuc=C$zun.length-4,C$zuk=Triangulator.winding(C$zun[C$zuc],C$zun[C$zuc+1],C$zun[C$zuc+2],C$zun[C$zuc+3],C$zuo,C$zus),C$zuz=Triangulator.winding(C$zuo,C$zus,C$zun[0],C$zun[1],C$zun[2],C$zun[3]),C$zuk==C$zud&&C$zuz==C$zud&&(C$zun.push(C$zuo),C$zun.push(C$zus),C$zur.push(C$zuv),C$zux=!0)),C$zux||(0<C$zun.length?(C$zue.push(C$zun),C$zui.push(C$zur)):(this.polygonPool.free(C$zun),this.polygonIndicesPool.free(C$zur)),(C$zun=this.polygonPool.obtain()).length=0,C$zun.push(C$zuy),C$zun.push(C$zug),C$zun.push(C$zub),C$zun.push(C$zuC),C$zun.push(C$zuo),C$zun.push(C$zus),(C$zur=this.polygonIndicesPool.obtain()).length=0,C$zur.push(C$zup),C$zur.push(C$zum),C$zur.push(C$zuv),C$zud=Triangulator.winding(C$zuy,C$zug,C$zub,C$zuC,C$zuo,C$zus),C$zu_=C$zup)}0<C$zun.length&&(C$zue.push(C$zun),C$zui.push(C$zur));for(C$zua=0,C$zuf=C$zue.length;C$zua<C$zuf;C$zua++)if(0!=(C$zur=C$zui[C$zua]).length){var C$zuA=C$zur[0];var C$zuS=C$zur[C$zur.length-1];var C$zuc;var C$zuT=(C$zun=C$zue[C$zua])[C$zuc=C$zun.length-4],C$zuw=C$zun[C$zuc+1];var C$zuE=C$zun[C$zuc+2],C$zuP=C$zun[C$zuc+3];var C$zuM=C$zun[0],C$zuR=C$zun[1];var C$zuI=C$zun[2],C$zuB=C$zun[3];var C$zuD=Triangulator.winding(C$zuT,C$zuw,C$zuE,C$zuP,C$zuM,C$zuR);for(var C$zul=0;C$zul<C$zuf;C$zul++){var C$zuL,C$zuV,C$zuO,C$zuF,C$zuN,C$zuk,C$zuz;C$zul!=C$zua&&(3==(C$zuL=C$zui[C$zul]).length&&(C$zuV=C$zuL[0],C$zuO=C$zuL[1],C$zuF=C$zuL[2],C$zuo=(C$zuN=C$zue[C$zul])[C$zuN.length-2],C$zus=C$zuN[C$zuN.length-1],C$zuV==C$zuA&&C$zuO==C$zuS&&(C$zuk=Triangulator.winding(C$zuT,C$zuw,C$zuE,C$zuP,C$zuo,C$zus),C$zuz=Triangulator.winding(C$zuo,C$zus,C$zuM,C$zuR,C$zuI,C$zuB),C$zuk==C$zuD&&C$zuz==C$zuD&&(C$zuN.length=0,C$zuL.length=0,C$zun.push(C$zuo),C$zun.push(C$zus),C$zur.push(C$zuF),C$zuT=C$zuE,C$zuw=C$zuP,C$zuE=C$zuo,C$zuP=C$zus,C$zul=0))))}}for(C$zua=C$zue.length-1;0<=C$zua;C$zua--)0==(C$zun=C$zue[C$zua]).length&&(C$zue.splice(C$zua,1),this.polygonPool.free(C$zun),C$zur=C$zui[C$zua],C$zui.splice(C$zua,1),this.polygonIndicesPool.free(C$zur));return C$zue},Triangulator.isConcave=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zur[(C$zue+C$zut-1)%C$zue]<<1;var C$zua=C$zur[C$zut]<<1;C$zur=C$zur[(C$zut+1)%C$zue]<<1;return!this.positiveArea(C$zui[C$zun],C$zui[1+C$zun],C$zui[C$zua],C$zui[1+C$zua],C$zui[C$zur],C$zui[1+C$zur])},Triangulator.positiveArea=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){return 0<=C$zut*(C$zua-C$zur)+C$zui*(C$zue-C$zua)+C$zun*(C$zur-C$zue)},Triangulator.winding=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){C$zui-=C$zut,C$zur-=C$zue;return 0<=C$zun*C$zur-C$zua*C$zui+C$zui*C$zue-C$zut*C$zur?1:-1},C$zut.Triangulator=Triangulator}(C$zur=C$zur||{}),function(C$zut){function IntSet(){this.array=new Array}function Color(C$zut,C$zue,C$zui,C$zur){void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),void 0===C$zur&&(C$zur=0),this.r=C$zut=void 0===C$zut?0:C$zut,this.g=C$zue,this.b=C$zui,this.a=C$zur}function MathUtils(){}IntSet.prototype.add=function(C$zut){var C$zue=this.contains(C$zut);return this.array[0|C$zut]=0|C$zut,!C$zue},IntSet.prototype.contains=function(C$zut){return null!=this.array[0|C$zut]},IntSet.prototype.remove=function(C$zut){this.array[0|C$zut]=void 0},IntSet.prototype.clear=function(){this.array.length=0},C$zut.IntSet=IntSet,Color.prototype.set=function(C$zut,C$zue,C$zui,C$zur){return this.r=C$zut,this.g=C$zue,this.b=C$zui,this.a=C$zur,this.clamp(),this},Color.prototype.setFromColor=function(C$zut){return this.r=C$zut.r,this.g=C$zut.g,this.b=C$zut.b,this.a=C$zut.a,this},Color.prototype.setFromString=function(C$zut){return C$zut="#"==C$zut.charAt(0)?C$zut.substr(1):C$zut,this.r=parseInt(C$zut.substr(0,2),16)/255,this.g=parseInt(C$zut.substr(2,2),16)/255,this.b=parseInt(C$zut.substr(4,2),16)/255,this.a=(8!=C$zut.length?255:parseInt(C$zut.substr(6,2),16))/255,this},Color.prototype.add=function(C$zut,C$zue,C$zui,C$zur){return this.r+=C$zut,this.g+=C$zue,this.b+=C$zui,this.a+=C$zur,this.clamp(),this},Color.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},Color.rgba8888ToColor=function(C$zut,C$zue){C$zut.r=((4278190080&C$zue)>>>24)/255,C$zut.g=((16711680&C$zue)>>>16)/255,C$zut.b=((65280&C$zue)>>>8)/255,C$zut.a=(255&C$zue)/255},Color.rgb888ToColor=function(C$zut,C$zue){C$zut.r=((16711680&C$zue)>>>16)/255,C$zut.g=((65280&C$zue)>>>8)/255,C$zut.b=(255&C$zue)/255},Color.WHITE=new Color(1,1,1,1),Color.RED=new Color(1,0,0,1),Color.GREEN=new Color(0,1,0,1),Color.BLUE=new Color(0,0,1,1),Color.MAGENTA=new Color(1,0,1,1),C$zut.Color=Color,MathUtils.clamp=function(C$zut,C$zue,C$zui){return C$zut<C$zue?C$zue:C$zui<C$zut?C$zui:C$zut},MathUtils.cosDeg=function(C$zut){return Math.cos(C$zut*MathUtils.degRad)},MathUtils.sinDeg=function(C$zut){return Math.sin(C$zut*MathUtils.degRad)},MathUtils.signum=function(C$zut){return 0<C$zut?1:C$zut<0?-1:0},MathUtils.toInt=function(C$zut){return 0<C$zut?Math.floor(C$zut):Math.ceil(C$zut)},MathUtils.cbrt=function(C$zut){var C$zue=Math.pow(Math.abs(C$zut),1/3);return C$zut<0?-C$zue:C$zue},MathUtils.randomTriangular=function(C$zut,C$zue){return MathUtils.randomTriangularWith(C$zut,C$zue,.5*(C$zut+C$zue))},MathUtils.randomTriangularWith=function(C$zut,C$zue,C$zui){var C$zur=Math.random();var C$zun=C$zue-C$zut;return C$zur<=(C$zui-C$zut)/C$zun?C$zut+Math.sqrt(C$zur*C$zun*(C$zui-C$zut)):C$zue-Math.sqrt((1-C$zur)*C$zun*(C$zue-C$zui))},MathUtils.PI2=2*(MathUtils.PI=3.1415927),MathUtils.radDeg=MathUtils.radiansToDegrees=180/MathUtils.PI,MathUtils.degRad=MathUtils.degreesToRadians=MathUtils.PI/180,C$zut.MathUtils=MathUtils;Interpolation.prototype.apply=function(C$zut,C$zue,C$zui){return C$zut+(C$zue-C$zut)*this.applyInternal(C$zui)};var C$zue=Interpolation;function Interpolation(){}C$zut.Interpolation=C$zue;C$zuy(Pow,C$zui=C$zue),Pow.prototype.applyInternal=function(C$zut){return C$zut<=.5?Math.pow(2*C$zut,this.power)/2:Math.pow(2*(C$zut-1),this.power)/(this.power%2==0?-2:2)+1};C$zue=Pow;function Pow(C$zut){var C$zue=C$zui.call(this)||this;return C$zue.power=2,C$zue.power=C$zut,C$zue}var C$zui;C$zut.Pow=C$zue;C$zuy(PowOut,C$zur=C$zue),PowOut.prototype.applyInternal=function(C$zut){return Math.pow(C$zut-1,this.power)*(this.power%2==0?-1:1)+1};C$zue=PowOut;function PowOut(C$zut){return C$zur.call(this,C$zut)||this}var C$zur;function Utils(){}function DebugUtils(){}function Pool(C$zut){this.items=new Array,this.instantiator=C$zut}function Vector2(C$zut,C$zue){void 0===C$zue&&(C$zue=0),this.x=C$zut=void 0===C$zut?0:C$zut,this.y=C$zue}function TimeKeeper(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function WindowedMean(C$zut){void 0===C$zut&&(C$zut=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(C$zut)}C$zut.PowOut=C$zue,Utils.arrayCopy=function(C$zut,C$zue,C$zui,C$zur,C$zun){for(var C$zua=C$zue,C$zuo=C$zur;C$zua<C$zue+C$zun;C$zua++,C$zuo++)C$zui[C$zuo]=C$zut[C$zua]},Utils.setArraySize=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=0);var C$zur=C$zut.length;if(C$zur==C$zue)return C$zut;if(C$zur<(C$zut.length=C$zue))for(var C$zun=C$zur;C$zun<C$zue;C$zun++)C$zut[C$zun]=C$zui;return C$zut},Utils.ensureArrayCapacity=function(C$zut,C$zue,C$zui){return void 0===C$zui&&(C$zui=0),C$zut.length>=C$zue?C$zut:Utils.setArraySize(C$zut,C$zue,C$zui)},Utils.newArray=function(C$zut,C$zue){var C$zui=new Array(C$zut);for(var C$zur=0;C$zur<C$zut;C$zur++)C$zui[C$zur]=C$zue;return C$zui},Utils.newFloatArray=function(C$zut){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Float32Array(C$zut);var C$zue=new Array(C$zut);for(var C$zui=0;C$zui<C$zue.length;C$zui++)C$zue[C$zui]=0;return C$zue},Utils.newShortArray=function(C$zut){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Int16Array(C$zut);var C$zue=new Array(C$zut);for(var C$zui=0;C$zui<C$zue.length;C$zui++)C$zue[C$zui]=0;return C$zue},Utils.toFloatArray=function(C$zut){return Utils.SUPPORTS_TYPED_ARRAYS?new Float32Array(C$zut):C$zut},Utils.toSinglePrecision=function(C$zut){return Utils.SUPPORTS_TYPED_ARRAYS?Math.fround(C$zut):C$zut},Utils.webkit602BugfixHelper=function(C$zut,C$zue){},Utils.contains=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=!0);for(var C$zur=0;C$zur<C$zut.length;C$zur++)if(C$zut[C$zur]==C$zue)return!0;return!1},Utils.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,C$zut.Utils=Utils,DebugUtils.logBones=function(C$zut){for(var C$zue=0;C$zue<C$zut.bones.length;C$zue++){var C$zui=C$zut.bones[C$zue];console.log(C$zui.data.name+", "+C$zui.a+", "+C$zui.b+", "+C$zui.c+", "+C$zui.d+", "+C$zui.worldX+", "+C$zui.worldY)}},C$zut.DebugUtils=DebugUtils,Pool.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},Pool.prototype.free=function(C$zut){C$zut.reset&&C$zut.reset(),this.items.push(C$zut)},Pool.prototype.freeAll=function(C$zut){for(var C$zue=0;C$zue<C$zut.length;C$zue++)C$zut[C$zue].reset&&C$zut[C$zue].reset(),this.items[C$zue]=C$zut[C$zue]},Pool.prototype.clear=function(){this.items.length=0},C$zut.Pool=Pool,Vector2.prototype.set=function(C$zut,C$zue){return this.x=C$zut,this.y=C$zue,this},Vector2.prototype.length=function(){var C$zut=this.x;var C$zue=this.y;return Math.sqrt(C$zut*C$zut+C$zue*C$zue)},Vector2.prototype.normalize=function(){var C$zut=this.length();return 0!=C$zut&&(this.x/=C$zut,this.y/=C$zut),this},C$zut.Vector2=Vector2,TimeKeeper.prototype.update=function(){var C$zut=Date.now()/1e3;this.delta=C$zut-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=C$zut,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},C$zut.TimeKeeper=TimeKeeper,WindowedMean.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},WindowedMean.prototype.addValue=function(C$zut){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=C$zut,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},WindowedMean.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){var C$zut=0;for(var C$zue=0;C$zue<this.values.length;C$zue++)C$zut+=this.values[C$zue];this.mean=C$zut/this.values.length,this.dirty=!1}return this.mean}return 0},C$zut.WindowedMean=WindowedMean}(C$zur=C$zur||{}),Math.fround||(Math.fround=(C$zuC=new Float32Array(1),function(C$zut){return C$zuC[0]=C$zut,C$zuC[0]}));var C$zux=C$zur=C$zur||{};function C$zum1T(C$zut){if(null==C$zut)throw new Error("name cannot be null.");this.name=C$zut}function VertexAttachment(C$zut){C$zut=C$zuA.call(this,C$zut)||this;return C$zut.id=(65535&VertexAttachment.nextID++)<<11,C$zut.worldVerticesLength=0,C$zut.deformAttachment=C$zut}var C$zuA;function BoundingBoxAttachment(C$zut){C$zut=C$zuw.call(this,C$zut)||this;return C$zut.color=new C$zuS.Color(1,1,1,1),C$zut}var C$zuS,C$zuw;function ClippingAttachment(C$zut){C$zut=C$zuP.call(this,C$zut)||this;return C$zut.color=new C$zuE.Color(.2275,.2275,.8078,1),C$zut}var C$zuE,C$zuP;function MeshAttachment(C$zut){C$zut=C$zuM.call(this,C$zut)||this;return C$zut.color=new C$zuu.Color(1,1,1,1),C$zut.tempColor=new C$zuu.Color(0,0,0,0),C$zut}var C$zuu,C$zuM;function PathAttachment(C$zut){C$zut=C$zuI.call(this,C$zut)||this;return C$zut.closed=!1,C$zut.constantSpeed=!1,C$zut.color=new C$zuR.Color(1,1,1,1),C$zut}var C$zuR,C$zuI;function PointAttachment(C$zut){C$zut=C$zuD.call(this,C$zut)||this;return C$zut.color=new C$zuB.Color(.38,.94,0,1),C$zut}var C$zuB,C$zuD;function RegionAttachment(C$zut){C$zut=C$zuV.call(this,C$zut)||this;return C$zut.x=0,C$zut.y=0,C$zut.scaleX=1,C$zut.scaleY=1,C$zut.rotation=0,C$zut.width=0,C$zut.height=0,C$zut.color=new C$zuL.Color(1,1,1,1),C$zut.offset=C$zuL.Utils.newFloatArray(8),C$zut.uvs=C$zuL.Utils.newFloatArray(8),C$zut.tempColor=new C$zuL.Color(1,1,1,1),C$zut}var C$zuL,C$zuV;var C$zur;function SwirlEffect(C$zut,C$zue){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=C$zut,this.interpolation=C$zue}var C$zuO;C$zux.Attachment=C$zum1T,C$zuy(VertexAttachment,C$zuA=C$zum1T),VertexAttachment.prototype.computeWorldVertices=function(C$zuh,C$zuu,C$zu_,C$zut,C$zud,C$zuf){C$zu_=C$zud+(C$zu_>>1)*C$zuf;var C$zup=C$zuh.bone.skeleton;var C$zum=C$zuh.deform;var C$zue=this.vertices;var C$zui=this.bones;if(null!=C$zui){var C$zur=0,C$zuv=0;for(var C$zuy=0;C$zuy<C$zuu;C$zuy+=2)C$zur+=(C$zun=C$zui[C$zur])+1,C$zuv+=C$zun;var C$zug=C$zup.bones;if(0==C$zum.length)for(C$zus=C$zud,C$zuc=3*C$zuv;C$zus<C$zu_;C$zus+=C$zuf){var C$zub=0,C$zuC=0;var C$zun=C$zui[C$zur++];for(C$zun+=C$zur;C$zur<C$zun;C$zur++,C$zuc+=3){C$zul=C$zug[C$zui[C$zur]];var C$zua=C$zue[C$zuc],C$zuo=C$zue[C$zuc+1],C$zux=C$zue[C$zuc+2];C$zub+=(C$zua*C$zul.a+C$zuo*C$zul.b+C$zul.worldX)*C$zux,C$zuC+=(C$zua*C$zul.c+C$zuo*C$zul.d+C$zul.worldY)*C$zux}C$zut[C$zus]=C$zub,C$zut[C$zus+1]=C$zuC}else{var C$zuA=C$zum;for(var C$zus=C$zud,C$zuc=3*C$zuv,C$zuS=C$zuv<<1;C$zus<C$zu_;C$zus+=C$zuf){C$zub=0,C$zuC=0;C$zun=C$zui[C$zur++];for(C$zun+=C$zur;C$zur<C$zun;C$zur++,C$zuc+=3,C$zuS+=2){C$zul=C$zug[C$zui[C$zur]];C$zua=C$zue[C$zuc]+C$zuA[C$zuS],C$zuo=C$zue[C$zuc+1]+C$zuA[C$zuS+1],C$zux=C$zue[C$zuc+2];C$zub+=(C$zua*C$zul.a+C$zuo*C$zul.b+C$zul.worldX)*C$zux,C$zuC+=(C$zua*C$zul.c+C$zuo*C$zul.d+C$zul.worldY)*C$zux}C$zut[C$zus]=C$zub,C$zut[C$zus+1]=C$zuC}}}else{var C$zul;0<C$zum.length&&(C$zue=C$zum);var C$zuT=(C$zul=C$zuh.bone).worldX;var C$zuw=C$zul.worldY;var C$zuE=C$zul.a,C$zuc=C$zul.b,C$zuP=C$zul.c,C$zuM=C$zul.d;for(var C$zuR=C$zuu,C$zus=C$zud;C$zus<C$zu_;C$zuR+=2,C$zus+=C$zuf){var C$zua=C$zue[C$zuR],C$zuo=C$zue[C$zuR+1];C$zut[C$zus]=C$zua*C$zuE+C$zuo*C$zuc+C$zuT,C$zut[C$zus+1]=C$zua*C$zuP+C$zuo*C$zuM+C$zuw}}},VertexAttachment.prototype.copyTo=function(C$zut){null!=this.bones?(C$zut.bones=new Array(this.bones.length),C$zux.Utils.arrayCopy(this.bones,0,C$zut.bones,0,this.bones.length)):C$zut.bones=null,null!=this.vertices?(C$zut.vertices=C$zux.Utils.newFloatArray(this.vertices.length),C$zux.Utils.arrayCopy(this.vertices,0,C$zut.vertices,0,this.vertices.length)):C$zut.vertices=null,C$zut.worldVerticesLength=this.worldVerticesLength,C$zut.deformAttachment=this.deformAttachment},VertexAttachment.nextID=0,C$zux.VertexAttachment=VertexAttachment,(C$zut=(C$zut=C$zur=C$zur||{}).AttachmentType||(C$zut.AttachmentType={}))[C$zut.Region=0]="Region",C$zut[C$zut.BoundingBox=1]="BoundingBox",C$zut[C$zut.Mesh=2]="Mesh",C$zut[C$zut.LinkedMesh=3]="LinkedMesh",C$zut[C$zut.Path=4]="Path",C$zut[C$zut.Point=5]="Point",C$zut[C$zut.Clipping=6]="Clipping",C$zuS=C$zur=C$zur||{},C$zuw=C$zuS.VertexAttachment,C$zuy(BoundingBoxAttachment,C$zuw),BoundingBoxAttachment.prototype.copy=function(){var C$zut=new BoundingBoxAttachment(name);return this.copyTo(C$zut),C$zut.color.setFromColor(this.color),C$zut},C$zuS.BoundingBoxAttachment=BoundingBoxAttachment,C$zuE=C$zur=C$zur||{},C$zuP=C$zuE.VertexAttachment,C$zuy(ClippingAttachment,C$zuP),ClippingAttachment.prototype.copy=function(){var C$zut=new ClippingAttachment(name);return this.copyTo(C$zut),C$zut.endSlot=this.endSlot,C$zut.color.setFromColor(this.color),C$zut},C$zuE.ClippingAttachment=ClippingAttachment,C$zuu=C$zur=C$zur||{},C$zuM=C$zuu.VertexAttachment,C$zuy(MeshAttachment,C$zuM),MeshAttachment.prototype.updateUVs=function(){var C$zut=this.regionUVs;null!=this.uvs&&this.uvs.length==C$zut.length||(this.uvs=C$zuu.Utils.newFloatArray(C$zut.length));var C$zue=this.uvs;var C$zuh=this.uvs.length;var C$zui=this.region.u,C$zur=this.region.v,C$zun=0,C$zua=0;if(this.region instanceof C$zuu.TextureAtlasRegion){var C$zuo=this.region;var C$zus=C$zuo.texture.getImage().width,C$zuc=C$zuo.texture.getImage().height;switch(C$zuo.degrees){case 90:C$zui-=(C$zuo.originalHeight-C$zuo.offsetY-C$zuo.height)/C$zus,C$zur-=(C$zuo.originalWidth-C$zuo.offsetX-C$zuo.width)/C$zuc,C$zun=C$zuo.originalHeight/C$zus,C$zua=C$zuo.originalWidth/C$zuc;for(var C$zul=0;C$zul<C$zuh;C$zul+=2)C$zue[C$zul]=C$zui+C$zut[C$zul+1]*C$zun,C$zue[C$zul+1]=C$zur+(1-C$zut[C$zul])*C$zua;return;case 180:C$zui-=(C$zuo.originalWidth-C$zuo.offsetX-C$zuo.width)/C$zus,C$zur-=C$zuo.offsetY/C$zuc,C$zun=C$zuo.originalWidth/C$zus,C$zua=C$zuo.originalHeight/C$zuc;for(C$zul=0;C$zul<C$zuh;C$zul+=2)C$zue[C$zul]=C$zui+(1-C$zut[C$zul])*C$zun,C$zue[C$zul+1]=C$zur+(1-C$zut[C$zul+1])*C$zua;return;case 270:C$zui-=C$zuo.offsetY/C$zus,C$zur-=C$zuo.offsetX/C$zuc,C$zun=C$zuo.originalHeight/C$zus,C$zua=C$zuo.originalWidth/C$zuc;for(C$zul=0;C$zul<C$zuh;C$zul+=2)C$zue[C$zul]=C$zui+(1-C$zut[C$zul+1])*C$zun,C$zue[C$zul+1]=C$zur+C$zut[C$zul]*C$zua;return}C$zui-=C$zuo.offsetX/C$zus,C$zur-=(C$zuo.originalHeight-C$zuo.offsetY-C$zuo.height)/C$zuc,C$zun=C$zuo.originalWidth/C$zus,C$zua=C$zuo.originalHeight/C$zuc}else null==this.region?(C$zui=C$zur=0,C$zun=C$zua=1):(C$zun=this.region.u2-C$zui,C$zua=this.region.v2-C$zur);for(C$zul=0;C$zul<C$zuh;C$zul+=2)C$zue[C$zul]=C$zui+C$zut[C$zul]*C$zun,C$zue[C$zul+1]=C$zur+C$zut[C$zul+1]*C$zua},MeshAttachment.prototype.getParentMesh=function(){return this.parentMesh},MeshAttachment.prototype.setParentMesh=function(C$zut){null!=(this.parentMesh=C$zut)&&(this.bones=C$zut.bones,this.vertices=C$zut.vertices,this.worldVerticesLength=C$zut.worldVerticesLength,this.regionUVs=C$zut.regionUVs,this.triangles=C$zut.triangles,this.hullLength=C$zut.hullLength,this.worldVerticesLength=C$zut.worldVerticesLength)},MeshAttachment.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var C$zut=new MeshAttachment(this.name);return C$zut.region=this.region,C$zut.path=this.path,C$zut.color.setFromColor(this.color),this.copyTo(C$zut),C$zut.regionUVs=new Array(this.regionUVs.length),C$zuu.Utils.arrayCopy(this.regionUVs,0,C$zut.regionUVs,0,this.regionUVs.length),C$zut.uvs=new Array(this.uvs.length),C$zuu.Utils.arrayCopy(this.uvs,0,C$zut.uvs,0,this.uvs.length),C$zut.triangles=new Array(this.triangles.length),C$zuu.Utils.arrayCopy(this.triangles,0,C$zut.triangles,0,this.triangles.length),C$zut.hullLength=this.hullLength,null!=this.edges&&(C$zut.edges=new Array(this.edges.length),C$zuu.Utils.arrayCopy(this.edges,0,C$zut.edges,0,this.edges.length)),C$zut.width=this.width,C$zut.height=this.height,C$zut},MeshAttachment.prototype.newLinkedMesh=function(){var C$zut=new MeshAttachment(this.name);return C$zut.region=this.region,C$zut.path=this.path,C$zut.color.setFromColor(this.color),C$zut.deformAttachment=this.deformAttachment,C$zut.setParentMesh(null!=this.parentMesh?this.parentMesh:this),C$zut.updateUVs(),C$zut},C$zuu.MeshAttachment=MeshAttachment,C$zuR=C$zur=C$zur||{},C$zuI=C$zuR.VertexAttachment,C$zuy(PathAttachment,C$zuI),PathAttachment.prototype.copy=function(){var C$zut=new PathAttachment(name);return this.copyTo(C$zut),C$zut.lengths=new Array(this.lengths.length),C$zuR.Utils.arrayCopy(this.lengths,0,C$zut.lengths,0,this.lengths.length),C$zut.closed=closed,C$zut.constantSpeed=this.constantSpeed,C$zut.color.setFromColor(this.color),C$zut},C$zuR.PathAttachment=PathAttachment,C$zuB=C$zur=C$zur||{},C$zuD=C$zuB.VertexAttachment,C$zuy(PointAttachment,C$zuD),PointAttachment.prototype.computeWorldPosition=function(C$zut,C$zue){return C$zue.x=this.x*C$zut.a+this.y*C$zut.b+C$zut.worldX,C$zue.y=this.x*C$zut.c+this.y*C$zut.d+C$zut.worldY,C$zue},PointAttachment.prototype.computeWorldRotation=function(C$zut){var C$zue=C$zuB.MathUtils.cosDeg(this.rotation),C$zui=C$zuB.MathUtils.sinDeg(this.rotation);var C$zur=C$zue*C$zut.a+C$zui*C$zut.b;C$zue=C$zue*C$zut.c+C$zui*C$zut.d;return Math.atan2(C$zue,C$zur)*C$zuB.MathUtils.radDeg},PointAttachment.prototype.copy=function(){var C$zut=new PointAttachment(name);return C$zut.x=this.x,C$zut.y=this.y,C$zut.rotation=this.rotation,C$zut.color.setFromColor(this.color),C$zut},C$zuB.PointAttachment=PointAttachment,C$zuL=C$zur=C$zur||{},C$zuV=C$zuL.Attachment,C$zuy(RegionAttachment,C$zuV),RegionAttachment.prototype.updateOffset=function(){var C$zut=this.width/this.region.originalWidth*this.scaleX;var C$zue=this.height/this.region.originalHeight*this.scaleY;var C$zui=-this.width/2*this.scaleX+this.region.offsetX*C$zut;var C$zur=-this.height/2*this.scaleY+this.region.offsetY*C$zue;C$zut=C$zui+this.region.width*C$zut;C$zue=C$zur+this.region.height*C$zue;var C$zun=this.rotation*Math.PI/180;var C$zua=Math.cos(C$zun);C$zun=Math.sin(C$zun);var C$zuo=C$zui*C$zua+this.x;C$zui*=C$zun;var C$zus=C$zur*C$zua+this.y;C$zur*=C$zun;var C$zuc=C$zut*C$zua+this.x;C$zut*=C$zun;C$zua=C$zue*C$zua+this.y;C$zue*=C$zun;C$zun=this.offset;C$zun[RegionAttachment.OX1]=C$zuo-C$zur,C$zun[RegionAttachment.OY1]=C$zus+C$zui,C$zun[RegionAttachment.OX2]=C$zuo-C$zue,C$zun[RegionAttachment.OY2]=C$zua+C$zui,C$zun[RegionAttachment.OX3]=C$zuc-C$zue,C$zun[RegionAttachment.OY3]=C$zua+C$zut,C$zun[RegionAttachment.OX4]=C$zuc-C$zur,C$zun[RegionAttachment.OY4]=C$zus+C$zut},RegionAttachment.prototype.setRegion=function(C$zut){this.region=C$zut;var C$zue=this.uvs;C$zut.rotate?(C$zue[2]=C$zut.u,C$zue[3]=C$zut.v2,C$zue[4]=C$zut.u,C$zue[5]=C$zut.v,C$zue[6]=C$zut.u2,C$zue[7]=C$zut.v,C$zue[0]=C$zut.u2,C$zue[1]=C$zut.v2):(C$zue[0]=C$zut.u,C$zue[1]=C$zut.v2,C$zue[2]=C$zut.u,C$zue[3]=C$zut.v,C$zue[4]=C$zut.u2,C$zue[5]=C$zut.v,C$zue[6]=C$zut.u2,C$zue[7]=C$zut.v2)},RegionAttachment.prototype.computeWorldVertices=function(C$zut,C$zue,C$zui,C$zuh){var C$zur=this.offset;var C$zun=C$zut.worldX,C$zua=C$zut.worldY;var C$zuo=C$zut.a,C$zus=C$zut.b,C$zuu=C$zut.c,C$zut=C$zut.d;var C$zuc,C$zul;C$zuc=C$zur[RegionAttachment.OX1],C$zul=C$zur[RegionAttachment.OY1],C$zue[C$zui]=C$zuc*C$zuo+C$zul*C$zus+C$zun,C$zue[C$zui+1]=C$zuc*C$zuu+C$zul*C$zut+C$zua,C$zuc=C$zur[RegionAttachment.OX2],C$zul=C$zur[RegionAttachment.OY2],C$zue[C$zui+=C$zuh]=C$zuc*C$zuo+C$zul*C$zus+C$zun,C$zue[C$zui+1]=C$zuc*C$zuu+C$zul*C$zut+C$zua,C$zuc=C$zur[RegionAttachment.OX3],C$zul=C$zur[RegionAttachment.OY3],C$zue[C$zui+=C$zuh]=C$zuc*C$zuo+C$zul*C$zus+C$zun,C$zue[C$zui+1]=C$zuc*C$zuu+C$zul*C$zut+C$zua,C$zuc=C$zur[RegionAttachment.OX4],C$zul=C$zur[RegionAttachment.OY4],C$zue[C$zui+=C$zuh]=C$zuc*C$zuo+C$zul*C$zus+C$zun,C$zue[C$zui+1]=C$zuc*C$zuu+C$zul*C$zut+C$zua},RegionAttachment.prototype.copy=function(){var C$zut=new RegionAttachment(name);return C$zut.region=this.region,C$zut.rendererObject=this.rendererObject,C$zut.path=this.path,C$zut.x=this.x,C$zut.y=this.y,C$zut.scaleX=this.scaleX,C$zut.scaleY=this.scaleY,C$zut.rotation=this.rotation,C$zut.width=this.width,C$zut.height=this.height,C$zuL.Utils.arrayCopy(this.uvs,0,C$zut.uvs,0,8),C$zuL.Utils.arrayCopy(this.offset,0,C$zut.offset,0,8),C$zut.color.setFromColor(this.color),C$zut},RegionAttachment.OX1=0,RegionAttachment.OY1=1,RegionAttachment.OX2=2,RegionAttachment.OY2=3,RegionAttachment.OX3=4,RegionAttachment.OY3=5,RegionAttachment.OX4=6,RegionAttachment.OY4=7,RegionAttachment.X1=0,RegionAttachment.Y1=1,RegionAttachment.C1R=2,RegionAttachment.C1G=3,RegionAttachment.C1B=4,RegionAttachment.C1A=5,RegionAttachment.U1=6,RegionAttachment.V1=7,RegionAttachment.X2=8,RegionAttachment.Y2=9,RegionAttachment.C2R=10,RegionAttachment.C2G=11,RegionAttachment.C2B=12,RegionAttachment.C2A=13,RegionAttachment.U2=14,RegionAttachment.V2=15,RegionAttachment.X3=16,RegionAttachment.Y3=17,RegionAttachment.C3R=18,RegionAttachment.C3G=19,RegionAttachment.C3B=20,RegionAttachment.C3A=21,RegionAttachment.U3=22,RegionAttachment.V3=23,RegionAttachment.X4=24,RegionAttachment.Y4=25,RegionAttachment.C4R=26,RegionAttachment.C4G=27,RegionAttachment.C4B=28,RegionAttachment.C4A=29,RegionAttachment.U4=30,RegionAttachment.V4=31,C$zuL.RegionAttachment=RegionAttachment,function(C$zun){function JitterEffect(C$zut,C$zue){this.jitterX=0,this.jitterY=0,this.jitterX=C$zut,this.jitterY=C$zue}JitterEffect.prototype.begin=function(C$zut){},JitterEffect.prototype.transform=function(C$zut,C$zue,C$zui,C$zur){C$zut.x+=C$zun.MathUtils.randomTriangular(-this.jitterX,this.jitterY),C$zut.y+=C$zun.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},JitterEffect.prototype.end=function(){},C$zun.JitterEffect=JitterEffect}(C$zur=C$zur||{}),C$zuO=C$zur=C$zur||{},SwirlEffect.prototype.begin=function(C$zut){this.worldX=C$zut.x+this.centerX,this.worldY=C$zut.y+this.centerY},SwirlEffect.prototype.transform=function(C$zut,C$zue,C$zui,C$zur){var C$zun=this.angle*C$zuO.MathUtils.degreesToRadians;var C$zua=C$zut.x-this.worldX;var C$zuo=C$zut.y-this.worldY;var C$zus=Math.sqrt(C$zua*C$zua+C$zuo*C$zuo);C$zus<this.radius&&(C$zun=this.interpolation.apply(0,C$zun,(this.radius-C$zus)/this.radius),C$zus=Math.cos(C$zun),C$zun=Math.sin(C$zun),C$zut.x=C$zus*C$zua-C$zun*C$zuo+this.worldX,C$zut.y=C$zun*C$zua+C$zus*C$zuo+this.worldY)},SwirlEffect.prototype.end=function(){},SwirlEffect.interpolation=new C$zuO.PowOut(2),C$zuO.SwirlEffect=SwirlEffect,C$zua.exports=C$zur},{}],356:[function(C$zut,C$zue,C$zui){"use strict";var C$zuo=C$zut("./track-entry-listeners");var C$zuM=C$zut("./lib/spine");var C$zuR=[];var C$zuF=[];var C$zuN=0;var C$zuI=0;var C$zuB=0;var C$zuk=null;var C$zuz=null;var C$zuD=0;var C$zuG=0;var C$zuL=0;var C$zuv=0;var C$zuy=null;var C$zug=null;var C$zuV=0,C$zuO=0;var C$zub,C$zuC,C$zux,C$zuA;var C$zuS,C$zuT;var C$zup=new C$zuM.Color(1,1,1,1);var C$zum=new C$zuM.Color(1,1,1,1);var C$zuU=[0,1,2,2,3,0];var C$zua=cc.Class({ctor:function(){this._privateMode=!1,this._inited=!1,this._invalid=!0,this._enableCacheAttachedInfo=!1,this.frames=[],this.totalTime=0,this._frameIdx=-1,this.isCompleted=!1,this._skeletonInfo=null,this._animationName=null,this._tempSegments=null,this._tempColors=null,this._tempBoneInfos=null},init:function(C$zut,C$zue){this._inited=!0,this._animationName=C$zue,this._skeletonInfo=C$zut},clear:function(){this._inited=!1;for(var C$zut=0,C$zue=this.frames.length;C$zut<C$zue;C$zut++)this.frames[C$zut].segments.length=0;this.invalidAllFrame()},bind:function(C$zut){var C$zue=function(C$zut){C$zut&&C$zut.animation.name===this._animationName&&(this.isCompleted=!0)}.bind(this);C$zut.complete=C$zue},unbind:function(C$zut){C$zut.complete=null},begin:function(){var C$zut,C$zue,C$zui,C$zur;this._invalid&&((C$zur=(C$zut=this._skeletonInfo).curAnimationCache)&&C$zur!==this&&(this._privateMode?C$zur.invalidAllFrame():C$zur.updateToFrame()),C$zur=C$zut.skeleton,C$zue=C$zut.listener,C$zui=C$zut.state,C$zur=C$zur.data.findAnimation(this._animationName),C$zui.setAnimationWith(0,C$zur,!1),this.bind(C$zue),(C$zut.curAnimationCache=this)._frameIdx=-1,this.isCompleted=!1,this.totalTime=0,this._invalid=!1)},end:function(){this._needToUpdate()||(this._skeletonInfo.curAnimationCache=null,this.frames.length=this._frameIdx+1,this.isCompleted=!0,this.unbind(this._skeletonInfo.listener))},_needToUpdate:function(C$zut){return!this.isCompleted&&this.totalTime<30&&(null==C$zut||this._frameIdx<C$zut)},updateToFrame:function(C$zut){if(this._inited&&(this.begin(),this._needToUpdate(C$zut))){var C$zue=this._skeletonInfo;var C$zui=C$zue.skeleton;var C$zur=C$zue.clipper;var C$zun=C$zue.state;for(;C$zui.update(1/60),C$zun.update(1/60),C$zun.apply(C$zui),C$zui.updateWorldTransform(),this._frameIdx++,this._updateFrame(C$zui,C$zur,this._frameIdx),this.totalTime+=1/60,this._needToUpdate(C$zut););this.end()}},isInited:function(){return this._inited},isInvalid:function(){return this._invalid},invalidAllFrame:function(){this.isCompleted=!1,this._invalid=!0},updateAllFrame:function(){this.invalidAllFrame(),this.updateToFrame()},enableCacheAttachedInfo:function(){this._enableCacheAttachedInfo||(this._enableCacheAttachedInfo=!0,this.invalidAllFrame())},_updateFrame:function(C$zut,C$zue,C$zui){C$zuv=C$zuL=C$zuG=C$zuD=C$zuI=C$zuN=C$zuB=0,C$zug=C$zuy=C$zuz=C$zuk=null,this.frames[C$zui]=this.frames[C$zui]||{segments:[],colors:[],boneInfos:[],vertices:null,uintVert:null,indices:null};C$zui=this.frames[C$zui];var C$zur=this._tempSegments=C$zui.segments;var C$zuh=this._tempColors=C$zui.colors;var C$zuu=this._tempBoneInfos=C$zui.boneInfos;this._traverseSkeleton(C$zut,C$zue),0<C$zuv&&(C$zuh[C$zuv-1].vfOffset=C$zuB),C$zuh.length=C$zuv,C$zuu.length=C$zuN;C$zut=C$zuL-1;if(0<=C$zut&&(0<C$zuG?((C$zue=C$zur[C$zut]).indexCount=C$zuG,C$zue.vfCount=6*C$zuD,C$zue.vertexCount=C$zuD,C$zur.length=C$zuL):C$zur.length=C$zuL-1),0!=C$zur.length){var C$zun=C$zui.vertices;var C$zua=C$zui.uintVert;(!C$zun||C$zun.length<C$zuB)&&(C$zun=C$zui.vertices=new Float32Array(C$zuB),C$zua=C$zui.uintVert=new Uint32Array(C$zun.buffer));for(var C$zuo=0,C$zus=0;C$zuo<C$zuB;)C$zun[C$zuo++]=C$zuR[C$zus++],C$zun[C$zuo++]=C$zuR[C$zus++],C$zun[C$zuo++]=C$zuR[C$zus++],C$zun[C$zuo++]=C$zuR[C$zus++],C$zua[C$zuo++]=C$zuR[C$zus++],C$zua[C$zuo++]=C$zuR[C$zus++];var C$zuc=C$zui.indices;(!C$zuc||C$zuc.length<C$zuI)&&(C$zuc=C$zui.indices=new Uint16Array(C$zuI));for(var C$zul=0;C$zul<C$zuI;C$zul++)C$zuc[C$zul]=C$zuF[C$zul];C$zui.vertices=C$zun,C$zui.uintVert=C$zua,C$zui.indices=C$zuc}},fillVertices:function(C$zut,C$zue,C$zui,C$zur,C$zun){if(C$zuA=C$zui.a*C$zue.a*C$zut.a*255,C$zub=C$zue.r*C$zut.r*255,C$zuC=C$zue.g*C$zut.g*255,C$zux=C$zue.b*C$zut.b*255,C$zup.r=C$zub*C$zui.r,C$zup.g=C$zuC*C$zui.g,C$zup.b=C$zux*C$zui.b,C$zup.a=C$zuA,null==C$zun.darkColor?C$zum.set(0,0,0,1):(C$zum.r=C$zun.darkColor.r*C$zub,C$zum.g=C$zun.darkColor.g*C$zuC,C$zum.b=C$zun.darkColor.b*C$zux),C$zum.a=0,C$zuS=(C$zup.a<<24>>>0)+(C$zup.b<<16)+(C$zup.g<<8)+C$zup.r,C$zuT=(C$zum.a<<24>>>0)+(C$zum.b<<16)+(C$zum.g<<8)+C$zum.r,C$zuy===C$zuS&&C$zug===C$zuT||(C$zue=this._tempColors,C$zuy=C$zuS,C$zug=C$zuT,0<C$zuv&&(C$zue[C$zuv-1].vfOffset=C$zuB),C$zue[C$zuv++]={fr:C$zup.r,fg:C$zup.g,fb:C$zup.b,fa:C$zup.a,dr:C$zum.r,dg:C$zum.g,db:C$zum.b,da:C$zum.a,vfOffset:0}),C$zur.isClipping()){C$zur.clipTriangles(C$zuR,C$zuV,C$zuF,C$zuO,C$zuR,C$zup,C$zum,!0,6,C$zuI,C$zuB,C$zuB+2);var C$zua=C$zur.clippedVertices;var C$zuo=C$zur.clippedTriangles;C$zuO=C$zuo.length,C$zuV=C$zua.length/12*6;for(var C$zuh=0,C$zuu=C$zuI,C$zu_=C$zuo.length;C$zuh<C$zu_;)C$zuF[C$zuu++]=C$zuo[C$zuh++];for(var C$zus=0,C$zud=C$zua.length,C$zuc=C$zuB;C$zus<C$zud;C$zus+=12,C$zuc+=6)C$zuR[C$zuc]=C$zua[C$zus],C$zuR[C$zuc+1]=C$zua[C$zus+1],C$zuR[C$zuc+2]=C$zua[C$zus+6],C$zuR[C$zuc+3]=C$zua[C$zus+7],C$zuR[C$zuc+4]=C$zuS,C$zuR[C$zuc+5]=C$zuT}else for(var C$zul=C$zuB,C$zuf=C$zuB+C$zuV;C$zul<C$zuf;C$zul+=6)C$zuR[C$zul+4]=C$zuS,C$zuR[C$zul+5]=C$zuT},_traverseSkeleton:function(C$zut,C$zue){var C$zuh=this._tempSegments;var C$zuu=this._tempBoneInfos;var C$zu_=C$zut.color;var C$zui,C$zud,C$zur;var C$zuf,C$zup;var C$zun;var C$zua;var C$zuo;var C$zus;var C$zum=C$zut.bones;if(this._enableCacheAttachedInfo)for(var C$zuv=0,C$zuy=C$zum.length;C$zuv<C$zuy;C$zuv++,C$zuN++){var C$zuc=C$zum[C$zuv];var C$zul=C$zuu[C$zuN];(C$zul=C$zul||(C$zuu[C$zuN]={})).a=C$zuc.a,C$zul.b=C$zuc.b,C$zul.c=C$zuc.c,C$zul.d=C$zuc.d,C$zul.worldX=C$zuc.worldX,C$zul.worldY=C$zuc.worldY}for(var C$zug=0,C$zub=C$zut.drawOrder.length;C$zug<C$zub;C$zug++)if(C$zus=C$zut.drawOrder[C$zug],C$zuO=C$zuV=0,C$zui=C$zus.getAttachment())if(C$zuf=C$zui instanceof C$zuM.RegionAttachment,C$zup=C$zui instanceof C$zuM.MeshAttachment,C$zui instanceof C$zuM.ClippingAttachment)C$zue.clipStart(C$zus,C$zui);else if(C$zuf||C$zup)if(C$zun=C$zui.region.texture._texture)if(C$zuo=C$zus.data.blendMode,C$zuk===C$zun.url&&C$zuz===C$zuo||(C$zuk=C$zun.url,C$zuz=C$zuo,0<=(C$zua=C$zuL-1)&&(0<C$zuG?((C$zua=C$zuh[C$zua]).indexCount=C$zuG,C$zua.vertexCount=C$zuD,C$zua.vfCount=6*C$zuD):C$zuL--),C$zuh[C$zuL]={tex:C$zun,blendMode:C$zuo,indexCount:0,vertexCount:0,vfCount:0},C$zuL++,C$zuD=C$zuG=0),C$zuf?(C$zur=C$zuU,C$zuV=24,C$zuO=6,C$zui.computeWorldVertices(C$zus.bone,C$zuR,C$zuB,6)):C$zup&&(C$zur=C$zui.triangles,C$zuV=6*(C$zui.worldVerticesLength>>1),C$zuO=C$zur.length,C$zui.computeWorldVertices(C$zus,0,C$zui.worldVerticesLength,C$zuR,C$zuB,6)),0!=C$zuV&&0!=C$zuO){for(var C$zuC=0,C$zux=C$zuI,C$zuA=C$zur.length;C$zuC<C$zuA;)C$zuF[C$zux++]=C$zur[C$zuC++];C$zud=C$zui.uvs;for(var C$zuS=C$zuB,C$zuT=C$zuB+C$zuV,C$zuw=0;C$zuS<C$zuT;C$zuS+=6,C$zuw+=2)C$zuR[C$zuS+2]=C$zud[C$zuw],C$zuR[C$zuS+3]=C$zud[C$zuw+1];if(C$zua=C$zui.color,C$zun=C$zus.color,this.fillVertices(C$zu_,C$zua,C$zun,C$zue,C$zus),0<C$zuO){for(var C$zuE=C$zuI,C$zuP=C$zuI+C$zuO;C$zuE<C$zuP;C$zuE++)C$zuF[C$zuE]+=C$zuD;C$zuI+=C$zuO,C$zuB+=C$zuV,C$zuG+=C$zuO,C$zuD+=C$zuV/6}C$zue.clipEndWithSlot(C$zus)}else C$zue.clipEndWithSlot(C$zus);else C$zue.clipEndWithSlot(C$zus);else C$zue.clipEndWithSlot(C$zus);else C$zue.clipEndWithSlot(C$zus);C$zue.clipEnd()}});C$zut=cc.Class({ctor:function(){this._privateMode=!1,this._animationPool={},this._skeletonCache={}},enablePrivateMode:function(){this._privateMode=!0},clear:function(){this._animationPool={},this._skeletonCache={}},removeSkeleton:function(C$zut){var C$zue=this._skeletonCache[C$zut];if(C$zue){var C$zui=C$zue.animationsCache;for(var C$zur in C$zui){var C$zun=C$zui[C$zur];C$zun&&(this._animationPool[C$zut+"#"+C$zur]=C$zun).clear()}delete this._skeletonCache[C$zut]}},getSkeletonCache:function(C$zut,C$zue){var C$zui=this._skeletonCache[C$zut];var C$zur,C$zun,C$zua;return C$zui||(C$zue=new C$zuM.Skeleton(C$zue),C$zur=new C$zuM.SkeletonClipping,C$zun=new C$zuM.AnimationStateData(C$zue.data),C$zun=new C$zuM.AnimationState(C$zun),C$zua=new C$zuo,C$zun.addListener(C$zua),this._skeletonCache[C$zut]=C$zui={skeleton:C$zue,clipper:C$zur,state:C$zun,listener:C$zua,animationsCache:{},curAnimationCache:null}),C$zui},getAnimationCache:function(C$zut,C$zue){C$zut=this._skeletonCache[C$zut];return C$zut?C$zut.animationsCache[C$zue]:null},invalidAnimationCache:function(C$zut){C$zut=this._skeletonCache[C$zut];if(C$zut&&C$zut.skeleton){var C$zue=C$zut.animationsCache;for(var C$zui in C$zue)C$zue[C$zui].invalidAllFrame()}},initAnimationCache:function(C$zut,C$zue){if(!C$zue)return null;var C$zui=this._skeletonCache[C$zut];var C$zur=C$zui&&C$zui.skeleton;if(!C$zur)return null;if(!C$zur.data.findAnimation(C$zue))return null;C$zur=C$zui.animationsCache;var C$zun=C$zur[C$zue];return C$zun||((C$zun=this._animationPool[C$zut=C$zut+"#"+C$zue])?delete this._animationPool[C$zut]:(C$zun=new C$zua)._privateMode=this._privateMode,C$zun.init(C$zui,C$zue),C$zur[C$zue]=C$zun),C$zun},updateAnimationCache:function(C$zut,C$zue){if(C$zue){C$zue=this.initAnimationCache(C$zut,C$zue);if(!C$zue)return null;C$zue.updateAllFrame()}else{C$zue=this._skeletonCache[C$zut];if(C$zue&&C$zue.skeleton){var C$zui=C$zue.animationsCache;for(var C$zur in C$zui)C$zui[C$zur].updateAllFrame()}}}});C$zut.FrameTime=1/60,C$zut.sharedCache=new C$zut,C$zue.exports=C$zut},{"./lib/spine":355,"./track-entry-listeners":360}],357:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./skeleton-cache").sharedCache;C$zut=cc.Class({name:"sp.SkeletonData",extends:cc.Asset,ctor:function(){this.reset()},properties:{_skeletonJson:null,skeletonJsonStr:{get:function(){return this._skeletonJson?JSON.stringify(this._skeletonJson):""}},skeletonJson:{get:function(){return this._skeletonJson},set:function(C$zut){this.reset(),this._skeletonJson="string"==typeof C$zut?JSON.parse(C$zut):C$zut,!this._uuid&&C$zut.skeleton&&(this._uuid=C$zut.skeleton.hash)}},_atlasText:"",atlasText:{get:function(){return this._atlasText},set:function(C$zut){this._atlasText=C$zut,this.reset()}},textures:{default:[],type:[cc.Texture2D]},textureNames:{default:[],type:[cc.String]},scale:1,_nativeAsset:{get:function(){return this._buffer},set:function(C$zut){this._buffer=C$zut.buffer||C$zut,this.reset()},override:!0}},statics:{preventDeferredLoadDependents:!0},createNode:!1,reset:function(){this._skeletonCache=null,this._atlasCache=null},ensureTexturesLoaded:function(C$zut,C$zue){var C$zui=this.textures;var C$zur=C$zui.length;if(0!=C$zur){var C$zun=0;var C$zua=function(){C$zur<=++C$zun&&(C$zut&&C$zut.call(C$zue,!0),C$zut=null)};for(var C$zuo=0;C$zuo<C$zur;C$zuo++){var C$zus=C$zui[C$zuo];C$zus.loaded?C$zua():C$zus.once("load",C$zua)}}else C$zut.call(C$zue,!1)},isTexturesLoaded:function(){var C$zut=this.textures;var C$zue=C$zut.length;for(var C$zui=0;C$zui<C$zue;C$zui++)if(!C$zut[C$zui].loaded)return!1;return!0},getRuntimeData:function(C$zut){if(this._skeletonCache)return this._skeletonCache;if(!(this.textures&&0<this.textures.length)&&this.textureNames&&0<this.textureNames.length)return C$zut||cc.errorID(7507,this.name),null;C$zut=this._getAtlas(C$zut);if(!C$zut)return null;var C$zue=new sp.spine.AtlasAttachmentLoader(C$zut);var C$zui=null;var C$zur=null;return C$zui=this.skeletonJson?(C$zur=new sp.spine.SkeletonJson(C$zue),this.skeletonJson):(C$zur=new sp.spine.SkeletonBinary(C$zue),new Uint8Array(this._nativeAsset)),C$zur.scale=this.scale,this._skeletonCache=C$zur.readSkeletonData(C$zui),C$zut.dispose(),this._skeletonCache},getSkinsEnum:!1,getAnimsEnum:!1,_getTexture:function(C$zut){var C$zue=this.textureNames;for(var C$zui=0;C$zui<C$zue.length;C$zui++){var C$zur,C$zun;if(C$zue[C$zui]===C$zut)return C$zur=this.textures[C$zui],(C$zun=new sp.SkeletonTexture({width:C$zur.width,height:C$zur.height})).setRealTexture(C$zur),C$zun}return cc.errorID(7506,C$zut),null},_getAtlas:function(C$zut){return this._atlasCache||(this.atlasText?this._atlasCache=new sp.spine.TextureAtlas(this.atlasText,this._getTexture.bind(this)):(C$zut||cc.errorID(7508,this.name),null))},destroy:function(){C$zur.removeSkeleton(this._uuid),this._super()}});sp.SkeletonData=C$zue.exports=C$zut},{"./skeleton-cache":356}],358:[function(C$zut,C$zue,C$zui){"use strict";sp.SkeletonTexture=cc.Class({name:"sp.SkeletonTexture",extends:sp.spine.Texture,_texture:null,_material:null,setRealTexture:function(C$zut){this._texture=C$zut},getRealTexture:function(){return this._texture},setFilters:function(C$zut,C$zue){this._texture&&this._texture.setFilters(C$zut,C$zue)},setWraps:function(C$zut,C$zue){this._texture&&this._texture.setWrapMode(C$zut,C$zue)},dispose:function(){}})},{}],359:[function(C$zut,C$zue,C$zui){"use strict";C$zui.__esModule=!0,C$zui.default=void 0;C$zur=(C$zur=C$zut("../../cocos2d/core/renderer/assembler"))&&C$zur.__esModule?C$zur:{default:C$zur};var C$zur;function _createSuper(C$zui){return function(){var C$zut=_getPrototypeOf(C$zui);C$zue=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$zut){return!1}}()?(C$zue=_getPrototypeOf(this).constructor,Reflect.construct(C$zut,arguments,C$zue)):C$zut.apply(this,arguments);C$zut=this;var C$zue;if(!C$zue||"object"!=typeof C$zue&&"function"!=typeof C$zue){if(void 0===C$zut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$zut}return C$zue}}function _getPrototypeOf(C$zut){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(C$zut){return C$zut.__proto__||Object.getPrototypeOf(C$zut)})(C$zut)}var C$zun=C$zut("./Skeleton");var C$zuH=C$zut("./lib/spine");var C$zua=C$zut("../../cocos2d/core/renderer/render-flow");C$zut=C$zut("../../cocos2d/core/renderer/webgl/vertex-format");var C$zuo=C$zut.vfmtPosUvColor;var C$zus=C$zut.vfmtPosUvTwoColor;var C$zuc=cc.gfx;var C$zuM=0;var C$zuj=[0,1,2,2,3,0];var C$zuX=cc.color(0,0,255,255);var C$zuq=cc.color(255,0,0,255);var C$zuJ=cc.color(0,255,0,255);var C$zuY=cc.color(255,255,0,255);var C$zug=null;var C$zub=null;var C$zuC=null,C$zux=null;var C$zuA;var C$zuS;var C$zu$;var C$zuZ;var C$zuO;var C$zuQ;var C$zuK;var C$zutt;var C$zuT,C$zuw,C$zuE,C$zuP;var C$zuR,C$zuI;var C$zul;var C$zuF;var C$zuet;C$zug=new C$zuH.Color(1,1,1,1),C$zub=new C$zuH.Color(1,1,1,1),C$zuC=new C$zuH.Vector2,C$zux=new C$zuH.Vector2;var C$zuB,C$zuD,C$zuN=0,C$zuk=0,C$zuit=0,C$zuz=0,C$zuG=0;var C$zuL,C$zuV,C$zurt;var C$zunt;var C$zuat;var C$zuot,C$zust,C$zuct,C$zult,C$zuht,C$zuut,C$zu_t,C$zudt;var C$zuh,C$zuu,C$zu_,C$zud,C$zuf,C$zup,C$zum;var C$zuU,C$zuW,C$zuft,C$zupt,C$zumt,C$zuvt;function _getSlotMaterial(C$zut,C$zue){var C$zui,C$zur;switch(C$zue){case C$zuH.BlendMode.Additive:C$zui=C$zuA?cc.macro.ONE:cc.macro.SRC_ALPHA,C$zur=cc.macro.ONE;break;case C$zuH.BlendMode.Multiply:C$zui=cc.macro.DST_COLOR,C$zur=cc.macro.ONE_MINUS_SRC_ALPHA;break;case C$zuH.BlendMode.Screen:C$zui=cc.macro.ONE,C$zur=cc.macro.ONE_MINUS_SRC_COLOR;break;default:C$zuH.BlendMode.Normal;C$zui=C$zuA?cc.macro.ONE:cc.macro.SRC_ALPHA,C$zur=cc.macro.ONE_MINUS_SRC_ALPHA}C$zue=!C$zuU.enableBatch;var C$zun=C$zuU._materials[0];if(!C$zun)return null;var C$zua=C$zut.getId()+C$zui+C$zur+C$zuO+C$zue;var C$zuo=C$zuU._materialCache;var C$zus=C$zuo[C$zua];return C$zus||(C$zuo.baseMaterial?C$zus=cc.MaterialVariant.create(C$zun):C$zuo.baseMaterial=C$zus=C$zun,C$zus.define("CC_USE_MODEL",C$zue),C$zus.define("USE_TINT",C$zuO),C$zus.setProperty("texture",C$zut),C$zus.setBlend(!0,C$zuc.BLEND_FUNC_ADD,C$zui,C$zur,C$zuc.BLEND_FUNC_ADD,C$zui,C$zur),C$zuo[C$zua]=C$zus),C$zus}function _handleColor(C$zut){C$zuf=C$zut.fa*C$zuP,C$zuh=C$zuT*(C$zuS=C$zuA?C$zuf/255:1),C$zuu=C$zuw*C$zuS,C$zu_=C$zuE*C$zuS,C$zud=C$zut.fr*C$zuh,C$zum=C$zut.fg*C$zuu,C$zup=C$zut.fb*C$zu_,C$zuR=(C$zuf<<24>>>0)+(C$zup<<16)+(C$zum<<8)+C$zud,C$zuf=C$zut.dr*C$zuh,C$zup=C$zut.dg*C$zuu,C$zum=C$zut.db*C$zu_,C$zuI=((C$zuA?255:0)<<24>>>0)+(C$zum<<16)+(C$zup<<8)+C$zuf}function _spineColorToInt32(C$zut){return(C$zut.a<<24>>>0)+(C$zut.b<<16)+(C$zut.g<<8)+C$zut.r}C$zut=function(C$zut){var C$zue;C$zue=C$zut,(C$zui=SpineAssembler).prototype=Object.create(C$zue.prototype),(C$zui.prototype.constructor=C$zui).__proto__=C$zue;_createSuper(SpineAssembler);function SpineAssembler(){return C$zut.apply(this,arguments)||this}var C$zui=SpineAssembler.prototype;return C$zui.updateRenderData=function(C$zut){C$zut.isAnimationCached()||(C$zut=C$zut._skeleton)&&C$zut.updateWorldTransform()},C$zui.fillVertices=function(C$zut,C$zuh,C$zue,C$zuu,C$zu_){var C$zui=C$zuW._vData,C$zud=C$zuW._iData,C$zur=C$zuW._uintVData;if(C$zug.a=C$zue.a*C$zuh.a*C$zut.a*C$zuP*255,C$zuS=C$zuA?C$zug.a:255,C$zuL=C$zuT*C$zuh.r*C$zut.r*C$zuS,C$zuV=C$zuw*C$zuh.g*C$zut.g*C$zuS,C$zurt=C$zuE*C$zuh.b*C$zut.b*C$zuS,C$zug.r=C$zuL*C$zue.r,C$zug.g=C$zuV*C$zue.g,C$zug.b=C$zurt*C$zue.b,null==C$zu_.darkColor?C$zub.set(0,0,0,1):(C$zub.r=C$zu_.darkColor.r*C$zuL,C$zub.g=C$zu_.darkColor.g*C$zuV,C$zub.b=C$zu_.darkColor.b*C$zurt),C$zub.a=C$zuA?255:0,C$zuu.isClipping()){C$zuh=C$zui.subarray(C$zuk+2);C$zuu.clipTriangles(C$zui.subarray(C$zuk),C$zuN,C$zud.subarray(C$zuG),C$zuz,C$zuh,C$zug,C$zub,C$zuO,C$zuF);var C$zun=new Float32Array(C$zuu.clippedVertices);C$zut=C$zuu.clippedTriangles;if(C$zuz=C$zut.length,C$zuN=C$zun.length/C$zuet*C$zuF,C$zue=C$zuW.request(C$zuN/C$zuF,C$zuz),C$zuG=C$zue.indiceOffset,C$zuit=C$zue.vertexOffset,C$zuk=C$zue.byteOffset>>2,C$zui=C$zuW._vData,C$zud=C$zuW._iData,C$zur=C$zuW._uintVData,C$zud.set(C$zut,C$zuG),C$zuvt)for(var C$zua=0,C$zuf=C$zun.length,C$zuo=C$zuk;C$zua<C$zuf;C$zua+=C$zuet,C$zuo+=C$zuF)C$zuC.x=C$zun[C$zua],C$zuC.y=C$zun[C$zua+1],C$zug.set(C$zun[C$zua+2],C$zun[C$zua+3],C$zun[C$zua+4],C$zun[C$zua+5]),C$zux.x=C$zun[C$zua+6],C$zux.y=C$zun[C$zua+7],C$zuO?C$zub.set(C$zun[C$zua+8],C$zun[C$zua+9],C$zun[C$zua+10],C$zun[C$zua+11]):C$zub.set(0,0,0,0),C$zuvt.transform(C$zuC,C$zux,C$zug,C$zub),C$zui[C$zuo]=C$zuC.x,C$zui[C$zuo+1]=C$zuC.y,C$zui[C$zuo+2]=C$zux.x,C$zui[C$zuo+3]=C$zux.y,C$zur[C$zuo+4]=_spineColorToInt32(C$zug),C$zuO&&(C$zur[C$zuo+5]=_spineColorToInt32(C$zub));else for(var C$zus=0,C$zup=C$zun.length,C$zuc=C$zuk;C$zus<C$zup;C$zus+=C$zuet,C$zuc+=C$zuF)C$zui[C$zuc]=C$zun[C$zus],C$zui[C$zuc+1]=C$zun[C$zus+1],C$zui[C$zuc+2]=C$zun[C$zus+6],C$zui[C$zuc+3]=C$zun[C$zus+7],C$zuR=(C$zun[C$zus+5]<<24>>>0)+(C$zun[C$zus+4]<<16)+(C$zun[C$zus+3]<<8)+C$zun[C$zus+2],C$zur[C$zuc+4]=C$zuR,C$zuO&&(C$zuI=(C$zun[C$zus+11]<<24>>>0)+(C$zun[C$zus+10]<<16)+(C$zun[C$zus+9]<<8)+C$zun[C$zus+8],C$zur[C$zuc+5]=C$zuI)}else if(C$zuvt)for(var C$zul=C$zuk,C$zum=C$zuk+C$zuN;C$zul<C$zum;C$zul+=C$zuF)C$zuC.x=C$zui[C$zul],C$zuC.y=C$zui[C$zul+1],C$zux.x=C$zui[C$zul+2],C$zux.y=C$zui[C$zul+3],C$zuvt.transform(C$zuC,C$zux,C$zug,C$zub),C$zui[C$zul]=C$zuC.x,C$zui[C$zul+1]=C$zuC.y,C$zui[C$zul+2]=C$zux.x,C$zui[C$zul+3]=C$zux.y,C$zur[C$zul+4]=_spineColorToInt32(C$zug),C$zuO&&(C$zur[C$zul+5]=_spineColorToInt32(C$zub));else{C$zuR=_spineColorToInt32(C$zug),C$zuI=_spineColorToInt32(C$zub);for(var C$zuv=C$zuk,C$zuy=C$zuk+C$zuN;C$zuv<C$zuy;C$zuv+=C$zuF)C$zur[C$zuv+4]=C$zuR,C$zuO&&(C$zur[C$zuv+5]=C$zuI)}},C$zui.realTimeTraverse=function(C$zuh){var C$zut;var C$zuu;var C$zue=C$zuU._skeleton;var C$zu_=C$zue.color;var C$zui=C$zuU._debugRenderer;var C$zur=C$zuU._clipper;var C$zud=null;var C$zuf,C$zun;var C$zup,C$zum;var C$zua;var C$zuo;var C$zus;C$zu$=C$zuU._startSlotIndex,C$zuZ=C$zuU._endSlotIndex,C$zunt=-1==C$zu$?!0:!1,C$zuQ=C$zuU.debugSlots,C$zuK=C$zuU.debugBones,C$zutt=C$zuU.debugMesh,C$zui&&(C$zuK||C$zuQ||C$zutt)&&(C$zui.clear(),C$zui.lineWidth=2),C$zuet=C$zuO?12:8;for(var C$zuv=C$zuG=C$zuz=C$zuit=C$zuk=C$zuN=0,C$zuy=C$zue.drawOrder.length;C$zuv<C$zuy;C$zuv++)if(C$zuo=C$zue.drawOrder[C$zuv],C$zunt=0<=C$zu$&&C$zu$==C$zuo.data.index?!0:C$zunt)if(0<=C$zuZ&&C$zuZ==C$zuo.data.index&&(C$zunt=!1),C$zuz=C$zuN=0,C$zus=C$zuo.getAttachment())if(C$zup=C$zus instanceof C$zuH.RegionAttachment,C$zum=C$zus instanceof C$zuH.MeshAttachment,C$zus instanceof C$zuH.ClippingAttachment)C$zur.clipStart(C$zuo,C$zus);else if(C$zup||C$zum)if(C$zud=_getSlotMaterial(C$zus.region.texture._texture,C$zuo.data.blendMode)){if(!C$zuat&&C$zud.getHash()===C$zuft.material.getHash()||(C$zuat=!1,C$zuft._flush(),C$zuft.node=C$zupt,C$zuft.material=C$zud),C$zup){if(C$zun=C$zuj,C$zuN=4*C$zuF,C$zuz=6,C$zua=C$zuW.request(4,6),C$zuG=C$zua.indiceOffset,C$zuit=C$zua.vertexOffset,C$zuk=C$zua.byteOffset>>2,C$zut=C$zuW._vData,C$zuu=C$zuW._iData,C$zus.computeWorldVertices(C$zuo.bone,C$zut,C$zuk,C$zuF),C$zui&&C$zuQ){C$zui.strokeColor=C$zuX,C$zui.moveTo(C$zut[C$zuk],C$zut[C$zuk+1]);for(var C$zug=C$zuk+C$zuF,C$zub=C$zuk+C$zuN;C$zug<C$zub;C$zug+=C$zuF)C$zui.lineTo(C$zut[C$zug],C$zut[C$zug+1]);C$zui.close(),C$zui.stroke()}}else if(C$zum&&(C$zun=C$zus.triangles,C$zuN=(C$zus.worldVerticesLength>>1)*C$zuF,C$zuz=C$zun.length,C$zua=C$zuW.request(C$zuN/C$zuF,C$zuz),C$zuG=C$zua.indiceOffset,C$zuit=C$zua.vertexOffset,C$zuk=C$zua.byteOffset>>2,C$zut=C$zuW._vData,C$zuu=C$zuW._iData,C$zus.computeWorldVertices(C$zuo,0,C$zus.worldVerticesLength,C$zut,C$zuk,C$zuF),C$zui&&C$zutt)){C$zui.strokeColor=C$zuY;for(var C$zuC=0,C$zux=C$zun.length;C$zuC<C$zux;C$zuC+=3){var C$zuA=C$zun[C$zuC]*C$zuF+C$zuk;var C$zuS=C$zun[C$zuC+1]*C$zuF+C$zuk;var C$zuT=C$zun[C$zuC+2]*C$zuF+C$zuk;C$zui.moveTo(C$zut[C$zuA],C$zut[C$zuA+1]),C$zui.lineTo(C$zut[C$zuS],C$zut[C$zuS+1]),C$zui.lineTo(C$zut[C$zuT],C$zut[C$zuT+1]),C$zui.close(),C$zui.stroke()}}if(0!=C$zuN&&0!=C$zuz){C$zuu.set(C$zun,C$zuG),C$zuf=C$zus.uvs;for(var C$zuw=C$zuk,C$zuE=C$zuk+C$zuN,C$zuP=0;C$zuw<C$zuE;C$zuw+=C$zuF,C$zuP+=2)C$zut[C$zuw+2]=C$zuf[C$zuP],C$zut[C$zuw+3]=C$zuf[C$zuP+1];if(C$zup=C$zus.color,C$zum=C$zuo.color,this.fillVertices(C$zu_,C$zup,C$zum,C$zur,C$zuo),0<C$zuz){for(var C$zuM=C$zuG,C$zuR=C$zuG+C$zuz;C$zuM<C$zuR;C$zuM++)C$zuu[C$zuM]+=C$zuit;if(C$zuh){C$zus=C$zuh.m,C$zuct=C$zus[0],C$zult=C$zus[4],C$zuht=C$zus[12],C$zuut=C$zus[1],C$zu_t=C$zus[5],C$zudt=C$zus[13];for(var C$zuc=C$zuk,C$zuI=C$zuk+C$zuN;C$zuc<C$zuI;C$zuc+=C$zuF)C$zuot=C$zut[C$zuc],C$zust=C$zut[C$zuc+1],C$zut[C$zuc]=C$zuot*C$zuct+C$zust*C$zult+C$zuht,C$zut[C$zuc+1]=C$zuot*C$zuut+C$zust*C$zu_t+C$zudt}C$zuW.adjust(C$zuN/C$zuF,C$zuz)}C$zur.clipEndWithSlot(C$zuo)}else C$zur.clipEndWithSlot(C$zuo)}else C$zur.clipEndWithSlot(C$zuo);else C$zur.clipEndWithSlot(C$zuo);else C$zur.clipEndWithSlot(C$zuo);else C$zur.clipEndWithSlot(C$zuo);if(C$zur.clipEnd(),C$zui&&C$zuK){var C$zul;C$zui.strokeColor=C$zuq,C$zui.fillColor=C$zuX;for(var C$zuB=0,C$zuD=C$zue.bones.length;C$zuB<C$zuD;C$zuB++){var C$zuL=(C$zul=C$zue.bones[C$zuB]).data.length*C$zul.a+C$zul.worldX;var C$zuV=C$zul.data.length*C$zul.c+C$zul.worldY;C$zui.moveTo(C$zul.worldX,C$zul.worldY),C$zui.lineTo(C$zuL,C$zuV),C$zui.stroke(),C$zui.circle(C$zul.worldX,C$zul.worldY,1.5*Math.PI),C$zui.fill(),0===C$zuB&&(C$zui.fillColor=C$zuJ)}}},C$zui.cacheTraverse=function(C$zut){var C$zue=C$zuU._curFrame;if(C$zue){var C$zuh=C$zue.segments;if(0!=C$zuh.length){var C$zui,C$zuu,C$zu_;var C$zud=C$zue.vertices;var C$zuf=C$zue.indices;var C$zur,C$zun=0,C$zup=0;C$zut&&(C$zut=C$zut.m,C$zuct=C$zut[0],C$zuut=C$zut[1],C$zult=C$zut[4],C$zu_t=C$zut[5],C$zuht=C$zut[12],C$zudt=C$zut[13]);var C$zum=16&C$zuM;var C$zuv=C$zum&&(1===C$zuct&&0===C$zuut&&0===C$zult&&1===C$zu_t);var C$zuy=0;var C$zug=C$zue.colors;var C$zua=C$zug[C$zuy++];var C$zub=C$zua.vfOffset;_handleColor(C$zua);for(var C$zuC=0,C$zux=C$zuh.length;C$zuC<C$zux;C$zuC++){var C$zuo=C$zuh[C$zuC];if(C$zur=_getSlotMaterial(C$zuo.tex,C$zuo.blendMode)){!C$zuat&&C$zur.getHash()===C$zuft.material.getHash()||(C$zuat=!1,C$zuft._flush(),C$zuft.node=C$zupt,C$zuft.material=C$zur),C$zuB=C$zuo.vertexCount,C$zuz=C$zuo.indexCount,C$zur=C$zuW.request(C$zuB,C$zuz),C$zuG=C$zur.indiceOffset,C$zuit=C$zur.vertexOffset,C$zuD=C$zur.byteOffset>>2,C$zui=C$zuW._vData,C$zuu=C$zuW._iData,C$zu_=C$zuW._uintVData;for(var C$zuA=C$zuG,C$zuS=C$zuG+C$zuz;C$zuA<C$zuS;C$zuA++)C$zuu[C$zuA]=C$zuit+C$zuf[C$zup++];if(C$zur=C$zuo.vfCount,C$zui.set(C$zud.subarray(C$zun,C$zun+C$zur),C$zuD),C$zun+=C$zur,C$zuv)for(var C$zus=C$zuD,C$zuT=C$zuD+C$zur;C$zus<C$zuT;C$zus+=6)C$zui[C$zus]+=C$zuht,C$zui[C$zus+1]+=C$zudt;else if(C$zum)for(var C$zuc=C$zuD,C$zuw=C$zuD+C$zur;C$zuc<C$zuw;C$zuc+=6)C$zuot=C$zui[C$zuc],C$zust=C$zui[C$zuc+1],C$zui[C$zuc]=C$zuot*C$zuct+C$zust*C$zult+C$zuht,C$zui[C$zuc+1]=C$zuot*C$zuut+C$zust*C$zu_t+C$zudt;if(C$zuW.adjust(C$zuB,C$zuz),C$zumt){var C$zuE=C$zun-C$zur;for(var C$zul=4+C$zuD,C$zuP=4+C$zuD+C$zur;C$zul<C$zuP;C$zul+=6,C$zuE+=6)C$zub<=C$zuE&&(_handleColor(C$zua=C$zug[C$zuy++]),C$zub=C$zua.vfOffset),C$zu_[C$zul]=C$zuR,C$zu_[C$zul+1]=C$zuI}}}}}},C$zui.fillBuffers=function(C$zut,C$zue){var C$zui=C$zut.node;C$zui._renderFlag|=C$zua.FLAG_UPDATE_RENDER_DATA,C$zut._skeleton&&(C$zui=C$zui._color,C$zuT=C$zui.r/255,C$zuw=C$zui.g/255,C$zuE=C$zui.b/255,C$zuP=C$zui.a/255,C$zuO=C$zut.useTint||C$zut.isAnimationCached(),C$zul=C$zuO?C$zus:C$zuo,C$zuF=C$zuO?6:5,C$zupt=C$zut.node,C$zuW=C$zue.getBuffer("spine",C$zul),C$zuft=C$zue,C$zuat=!0,C$zuA=(C$zuU=C$zut).premultipliedAlpha,C$zuM=0,C$zumt=!(C$zuS=1),C$zuvt=C$zut._effectDelegate&&C$zut._effectDelegate._vertexEffect,4294967295===C$zui._val&&!C$zuA||(C$zumt=!0),C$zuO&&(C$zuM|=1),C$zui=void 0,C$zuU.enableBatch&&(C$zui=C$zupt._worldMatrix,C$zuat=!1,C$zuM|=16),C$zut.isAnimationCached()?this.cacheTraverse(C$zui):(C$zuvt&&C$zuvt.begin(C$zut._skeleton),this.realTimeTraverse(C$zui),C$zuvt&&C$zuvt.end()),C$zue.worldMatDirty++,C$zut.attachUtil._syncAttachedNode(),C$zuU=C$zuft=C$zuW=C$zupt=void 0,C$zuvt=null)},C$zui.postFillBuffers=function(C$zut,C$zue){C$zue.worldMatDirty--},SpineAssembler}(C$zur.default);C$zui.default=C$zut,C$zur.default.register(C$zun,C$zut),C$zue.exports=C$zui.default},{"../../cocos2d/core/renderer/assembler":217,"../../cocos2d/core/renderer/render-flow":221,"../../cocos2d/core/renderer/webgl/vertex-format":252,"./Skeleton":353,"./lib/spine":355}],360:[function(C$zut,C$zue,C$zui){"use strict";function C$zuluT(){this.start=null,this.end=null,this.complete=null,this.event=null,this.interrupt=null,this.dispose=null}C$zuluT.getListeners=function(C$zut){return C$zut.listener||(C$zut.listener=new C$zuluT),C$zut.listener},C$zue.exports=C$zuluT},{}],361:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=C$zut("./lib/spine");sp.VertexEffectDelegate=cc.Class({name:"sp.VertexEffectDelegate",ctor:function(){this._vertexEffect=null,this._interpolation=null,this._effectType="none"},clear:function(){this._vertexEffect=null,this._interpolation=null,this._effectType="none"},initJitter:function(C$zut,C$zue){return this._effectType="jitter",this._vertexEffect=new C$zur.JitterEffect(C$zut,C$zue),this._vertexEffect},initSwirlWithPow:function(C$zut,C$zue){return this._interpolation=new C$zur.Pow(C$zue),this._vertexEffect=new C$zur.SwirlEffect(C$zut,this._interpolation),this._vertexEffect},initSwirlWithPowOut:function(C$zut,C$zue){return this._interpolation=new C$zur.PowOut(C$zue),this._vertexEffect=new C$zur.SwirlEffect(C$zut,this._interpolation),this._vertexEffect},getJitterVertexEffect:function(){return this._vertexEffect},getSwirlVertexEffect:function(){return this._vertexEffect},getVertexEffect:function(){return this._vertexEffect},getEffectType:function(){return this._effectType}}),C$zue.exports=sp.VertexEffectDelegate},{"./lib/spine":355}],362:[function(C$zut,C$zue,C$zui){"use strict";var C$zur;C$zur=function(C$zuH){function b2Maybe(C$zut,C$zue){return void 0!==C$zut?C$zut:C$zue}var C$zuB=1e37;var C$zuE=1e-5;var C$zuy=C$zuE*C$zuE;var C$zum=3.14159265359;var C$zuP=2/180*C$zum;var C$zup=8/180*C$zum;var C$zuS=.5*C$zum;var C$zuT=C$zuS*C$zuS;var C$zut=2/180*C$zum;b2Version.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision};var C$zue=b2Version;function b2Version(C$zut,C$zue,C$zui){void 0===C$zut&&(C$zut=0),void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),this.major=0,this.minor=0,this.revision=0,this.major=C$zut,this.minor=C$zue,this.revision=C$zui}var C$zui=new C$zue(2,3,2);function b2MakeArray(C$zut,C$zue){var C$zui=[];for(var C$zur=0;C$zur<C$zut;++C$zur)C$zui.push(C$zue(C$zur));return C$zui}function b2MakeNumberArray(C$zut,C$zue){void 0===C$zue&&(C$zue=0);var C$zui=[];for(var C$zur=0;C$zur<C$zut;++C$zur)C$zui.push(C$zue);return C$zui}var C$zuM=Math.abs;var C$zuD=Math.min;var C$zuL=Math.max;function b2Clamp(C$zut,C$zue,C$zui){return C$zut<C$zue?C$zue:C$zui<C$zut?C$zui:C$zut}var C$zur=isFinite;function b2Sq(C$zut){return C$zut*C$zut}function b2InvSqrt(C$zut){return 1/Math.sqrt(C$zut)}var C$zuX=Math.sqrt;var C$zuo=Math.pow;var C$zun=Math.cos;var C$zua=Math.sin;var C$zus=Math.acos;var C$zuc=Math.asin;var C$zuv=Math.atan2;b2Vec2.prototype.Clone=function(){return new b2Vec2(this.x,this.y)},b2Vec2.prototype.SetZero=function(){return this.x=0,this.y=0,this},b2Vec2.prototype.Set=function(C$zut,C$zue){return this.x=C$zut,this.y=C$zue,this},b2Vec2.prototype.Copy=function(C$zut){return this.x=C$zut.x,this.y=C$zut.y,this},b2Vec2.prototype.SelfAdd=function(C$zut){return this.x+=C$zut.x,this.y+=C$zut.y,this},b2Vec2.prototype.SelfAddXY=function(C$zut,C$zue){return this.x+=C$zut,this.y+=C$zue,this},b2Vec2.prototype.SelfSub=function(C$zut){return this.x-=C$zut.x,this.y-=C$zut.y,this},b2Vec2.prototype.SelfSubXY=function(C$zut,C$zue){return this.x-=C$zut,this.y-=C$zue,this},b2Vec2.prototype.SelfMul=function(C$zut){return this.x*=C$zut,this.y*=C$zut,this},b2Vec2.prototype.SelfMulAdd=function(C$zut,C$zue){return this.x+=C$zut*C$zue.x,this.y+=C$zut*C$zue.y,this},b2Vec2.prototype.SelfMulSub=function(C$zut,C$zue){return this.x-=C$zut*C$zue.x,this.y-=C$zut*C$zue.y,this},b2Vec2.prototype.Dot=function(C$zut){return this.x*C$zut.x+this.y*C$zut.y},b2Vec2.prototype.Cross=function(C$zut){return this.x*C$zut.y-this.y*C$zut.x},b2Vec2.prototype.Length=function(){var C$zut=this.x,C$zue=this.y;return Math.sqrt(C$zut*C$zut+C$zue*C$zue)},b2Vec2.prototype.LengthSquared=function(){var C$zut=this.x,C$zue=this.y;return C$zut*C$zut+C$zue*C$zue},b2Vec2.prototype.Normalize=function(){var C$zut=this.Length();var C$zue;return C$zuE<=C$zut&&(this.x*=C$zue=1/C$zut,this.y*=C$zue),C$zut},b2Vec2.prototype.SelfNormalize=function(){var C$zut=this.Length();return C$zuE<=C$zut&&(this.x*=C$zut=1/C$zut,this.y*=C$zut),this},b2Vec2.prototype.SelfRotate=function(C$zut){var C$zue=Math.cos(C$zut);C$zut=Math.sin(C$zut);var C$zui=this.x;return this.x=C$zue*C$zui-C$zut*this.y,this.y=C$zut*C$zui+C$zue*this.y,this},b2Vec2.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)},b2Vec2.prototype.SelfCrossVS=function(C$zut){var C$zue=this.x;return this.x=C$zut*this.y,this.y=-C$zut*C$zue,this},b2Vec2.prototype.SelfCrossSV=function(C$zut){var C$zue=this.x;return this.x=-C$zut*this.y,this.y=C$zut*C$zue,this},b2Vec2.prototype.SelfMinV=function(C$zut){return this.x=C$zuD(this.x,C$zut.x),this.y=C$zuD(this.y,C$zut.y),this},b2Vec2.prototype.SelfMaxV=function(C$zut){return this.x=C$zuL(this.x,C$zut.x),this.y=C$zuL(this.y,C$zut.y),this},b2Vec2.prototype.SelfAbs=function(){return this.x=C$zuM(this.x),this.y=C$zuM(this.y),this},b2Vec2.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this},b2Vec2.prototype.SelfSkew=function(){var C$zut=this.x;return this.x=-this.y,this.y=C$zut,this},b2Vec2.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2Vec2})},b2Vec2.AbsV=function(C$zut,C$zue){return C$zue.x=C$zuM(C$zut.x),C$zue.y=C$zuM(C$zut.y),C$zue},b2Vec2.MinV=function(C$zut,C$zue,C$zui){return C$zui.x=C$zuD(C$zut.x,C$zue.x),C$zui.y=C$zuD(C$zut.y,C$zue.y),C$zui},b2Vec2.MaxV=function(C$zut,C$zue,C$zui){return C$zui.x=C$zuL(C$zut.x,C$zue.x),C$zui.y=C$zuL(C$zut.y,C$zue.y),C$zui},b2Vec2.ClampV=function(C$zut,C$zue,C$zui,C$zur){return C$zur.x=b2Clamp(C$zut.x,C$zue.x,C$zui.x),C$zur.y=b2Clamp(C$zut.y,C$zue.y,C$zui.y),C$zur},b2Vec2.RotateV=function(C$zut,C$zue,C$zui){var C$zur=C$zut.x,C$zut=C$zut.y;var C$zun=Math.cos(C$zue);C$zue=Math.sin(C$zue);return C$zui.x=C$zun*C$zur-C$zue*C$zut,C$zui.y=C$zue*C$zur+C$zun*C$zut,C$zui},b2Vec2.DotVV=function(C$zut,C$zue){return C$zut.x*C$zue.x+C$zut.y*C$zue.y},b2Vec2.CrossVV=function(C$zut,C$zue){return C$zut.x*C$zue.y-C$zut.y*C$zue.x},b2Vec2.CrossVS=function(C$zut,C$zue,C$zui){var C$zur=C$zut.x;return C$zui.x=C$zue*C$zut.y,C$zui.y=-C$zue*C$zur,C$zui},b2Vec2.CrossVOne=function(C$zut,C$zue){var C$zui=C$zut.x;return C$zue.x=C$zut.y,C$zue.y=-C$zui,C$zue},b2Vec2.CrossSV=function(C$zut,C$zue,C$zui){var C$zur=C$zue.x;return C$zui.x=-C$zut*C$zue.y,C$zui.y=C$zut*C$zur,C$zui},b2Vec2.CrossOneV=function(C$zut,C$zue){var C$zui=C$zut.x;return C$zue.x=-C$zut.y,C$zue.y=C$zui,C$zue},b2Vec2.AddVV=function(C$zut,C$zue,C$zui){return C$zui.x=C$zut.x+C$zue.x,C$zui.y=C$zut.y+C$zue.y,C$zui},b2Vec2.SubVV=function(C$zut,C$zue,C$zui){return C$zui.x=C$zut.x-C$zue.x,C$zui.y=C$zut.y-C$zue.y,C$zui},b2Vec2.MulSV=function(C$zut,C$zue,C$zui){return C$zui.x=C$zue.x*C$zut,C$zui.y=C$zue.y*C$zut,C$zui},b2Vec2.MulVS=function(C$zut,C$zue,C$zui){return C$zui.x=C$zut.x*C$zue,C$zui.y=C$zut.y*C$zue,C$zui},b2Vec2.AddVMulSV=function(C$zut,C$zue,C$zui,C$zur){return C$zur.x=C$zut.x+C$zue*C$zui.x,C$zur.y=C$zut.y+C$zue*C$zui.y,C$zur},b2Vec2.SubVMulSV=function(C$zut,C$zue,C$zui,C$zur){return C$zur.x=C$zut.x-C$zue*C$zui.x,C$zur.y=C$zut.y-C$zue*C$zui.y,C$zur},b2Vec2.AddVCrossSV=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zui.x;return C$zur.x=C$zut.x-C$zue*C$zui.y,C$zur.y=C$zut.y+C$zue*C$zun,C$zur},b2Vec2.MidVV=function(C$zut,C$zue,C$zui){return C$zui.x=.5*(C$zut.x+C$zue.x),C$zui.y=.5*(C$zut.y+C$zue.y),C$zui},b2Vec2.ExtVV=function(C$zut,C$zue,C$zui){return C$zui.x=.5*(C$zue.x-C$zut.x),C$zui.y=.5*(C$zue.y-C$zut.y),C$zui},b2Vec2.IsEqualToV=function(C$zut,C$zue){return C$zut.x===C$zue.x&&C$zut.y===C$zue.y},b2Vec2.DistanceVV=function(C$zut,C$zue){var C$zui=C$zut.x-C$zue.x;C$zut=C$zut.y-C$zue.y;return Math.sqrt(C$zui*C$zui+C$zut*C$zut)},b2Vec2.DistanceSquaredVV=function(C$zut,C$zue){var C$zui=C$zut.x-C$zue.x;C$zut=C$zut.y-C$zue.y;return C$zui*C$zui+C$zut*C$zut},b2Vec2.NegV=function(C$zut,C$zue){return C$zue.x=-C$zut.x,C$zue.y=-C$zut.y,C$zue},b2Vec2.ZERO=new b2Vec2(0,0),b2Vec2.UNITX=new b2Vec2(1,0),b2Vec2.UNITY=new b2Vec2(0,1),b2Vec2.s_t0=new b2Vec2,b2Vec2.s_t1=new b2Vec2,b2Vec2.s_t2=new b2Vec2,b2Vec2.s_t3=new b2Vec2;var C$zuj=b2Vec2;function b2Vec2(C$zut,C$zue){void 0===C$zue&&(C$zue=0),this.x=C$zut=void 0===C$zut?0:C$zut,this.y=C$zue}var C$zul=new C$zuj(0,0);b2Vec3.prototype.Clone=function(){return new b2Vec3(this.x,this.y,this.z)},b2Vec3.prototype.SetZero=function(){return this.x=0,this.y=0,this.z=0,this},b2Vec3.prototype.SetXYZ=function(C$zut,C$zue,C$zui){return this.x=C$zut,this.y=C$zue,this.z=C$zui,this},b2Vec3.prototype.Copy=function(C$zut){return this.x=C$zut.x,this.y=C$zut.y,this.z=C$zut.z,this},b2Vec3.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},b2Vec3.prototype.SelfAdd=function(C$zut){return this.x+=C$zut.x,this.y+=C$zut.y,this.z+=C$zut.z,this},b2Vec3.prototype.SelfAddXYZ=function(C$zut,C$zue,C$zui){return this.x+=C$zut,this.y+=C$zue,this.z+=C$zui,this},b2Vec3.prototype.SelfSub=function(C$zut){return this.x-=C$zut.x,this.y-=C$zut.y,this.z-=C$zut.z,this},b2Vec3.prototype.SelfSubXYZ=function(C$zut,C$zue,C$zui){return this.x-=C$zut,this.y-=C$zue,this.z-=C$zui,this},b2Vec3.prototype.SelfMul=function(C$zut){return this.x*=C$zut,this.y*=C$zut,this.z*=C$zut,this},b2Vec3.DotV3V3=function(C$zut,C$zue){return C$zut.x*C$zue.x+C$zut.y*C$zue.y+C$zut.z*C$zue.z},b2Vec3.CrossV3V3=function(C$zut,C$zue,C$zui){var C$zur=C$zut.x,C$zun=C$zut.y,C$zut=C$zut.z;var C$zua=C$zue.x,C$zuo=C$zue.y,C$zue=C$zue.z;return C$zui.x=C$zun*C$zue-C$zut*C$zuo,C$zui.y=C$zut*C$zua-C$zur*C$zue,C$zui.z=C$zur*C$zuo-C$zun*C$zua,C$zui},b2Vec3.ZERO=new b2Vec3(0,0,0),b2Vec3.s_t0=new b2Vec3;var C$zuh=b2Vec3;function b2Vec3(C$zut,C$zue,C$zui){void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=0),this.x=C$zut=void 0===C$zut?0:C$zut,this.y=C$zue,this.z=C$zui}b2Mat22.prototype.Clone=function(){return(new b2Mat22).Copy(this)},b2Mat22.FromVV=function(C$zut,C$zue){return(new b2Mat22).SetVV(C$zut,C$zue)},b2Mat22.FromSSSS=function(C$zut,C$zue,C$zui,C$zur){return(new b2Mat22).SetSSSS(C$zut,C$zue,C$zui,C$zur)},b2Mat22.FromAngle=function(C$zut){return(new b2Mat22).SetAngle(C$zut)},b2Mat22.prototype.SetSSSS=function(C$zut,C$zue,C$zui,C$zur){return this.ex.Set(C$zut,C$zui),this.ey.Set(C$zue,C$zur),this},b2Mat22.prototype.SetVV=function(C$zut,C$zue){return this.ex.Copy(C$zut),this.ey.Copy(C$zue),this},b2Mat22.prototype.SetAngle=function(C$zut){var C$zue=Math.cos(C$zut);C$zut=Math.sin(C$zut);return this.ex.Set(C$zue,C$zut),this.ey.Set(-C$zut,C$zue),this},b2Mat22.prototype.Copy=function(C$zut){return this.ex.Copy(C$zut.ex),this.ey.Copy(C$zut.ey),this},b2Mat22.prototype.SetIdentity=function(){return this.ex.Set(1,0),this.ey.Set(0,1),this},b2Mat22.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this},b2Mat22.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)},b2Mat22.prototype.GetInverse=function(C$zut){var C$zue=this.ex.x;var C$zui=this.ey.x;var C$zur=this.ex.y;var C$zun=this.ey.y;var C$zua=C$zue*C$zun-C$zui*C$zur;return C$zut.ex.x=(C$zua=0!==C$zua?1/C$zua:C$zua)*C$zun,C$zut.ey.x=-C$zua*C$zui,C$zut.ex.y=-C$zua*C$zur,C$zut.ey.y=C$zua*C$zue,C$zut},b2Mat22.prototype.Solve=function(C$zut,C$zue,C$zui){var C$zur=this.ex.x,C$zun=this.ey.x;var C$zua=this.ex.y,C$zuo=this.ey.y;var C$zus=C$zur*C$zuo-C$zun*C$zua;return C$zui.x=(C$zus=0!==C$zus?1/C$zus:C$zus)*(C$zuo*C$zut-C$zun*C$zue),C$zui.y=C$zus*(C$zur*C$zue-C$zua*C$zut),C$zui},b2Mat22.prototype.SelfAbs=function(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this},b2Mat22.prototype.SelfInv=function(){return this.GetInverse(this),this},b2Mat22.prototype.SelfAddM=function(C$zut){return this.ex.SelfAdd(C$zut.ex),this.ey.SelfAdd(C$zut.ey),this},b2Mat22.prototype.SelfSubM=function(C$zut){return this.ex.SelfSub(C$zut.ex),this.ey.SelfSub(C$zut.ey),this},b2Mat22.AbsM=function(C$zut,C$zue){var C$zui=C$zut.ex,C$zut=C$zut.ey;return C$zue.ex.x=C$zuM(C$zui.x),C$zue.ex.y=C$zuM(C$zui.y),C$zue.ey.x=C$zuM(C$zut.x),C$zue.ey.y=C$zuM(C$zut.y),C$zue},b2Mat22.MulMV=function(C$zut,C$zue,C$zui){var C$zur=C$zut.ex,C$zut=C$zut.ey;var C$zun=C$zue.x,C$zue=C$zue.y;return C$zui.x=C$zur.x*C$zun+C$zut.x*C$zue,C$zui.y=C$zur.y*C$zun+C$zut.y*C$zue,C$zui},b2Mat22.MulTMV=function(C$zut,C$zue,C$zui){var C$zur=C$zut.ex,C$zut=C$zut.ey;var C$zun=C$zue.x,C$zue=C$zue.y;return C$zui.x=C$zur.x*C$zun+C$zur.y*C$zue,C$zui.y=C$zut.x*C$zun+C$zut.y*C$zue,C$zui},b2Mat22.AddMM=function(C$zut,C$zue,C$zui){var C$zur=C$zut.ex,C$zut=C$zut.ey;var C$zun=C$zue.ex,C$zue=C$zue.ey;return C$zui.ex.x=C$zur.x+C$zun.x,C$zui.ex.y=C$zur.y+C$zun.y,C$zui.ey.x=C$zut.x+C$zue.x,C$zui.ey.y=C$zut.y+C$zue.y,C$zui},b2Mat22.MulMM=function(C$zut,C$zue,C$zui){var C$zur=C$zut.ex.x,C$zun=C$zut.ex.y;var C$zua=C$zut.ey.x,C$zut=C$zut.ey.y;var C$zuo=C$zue.ex.x,C$zus=C$zue.ex.y;var C$zuc=C$zue.ey.x,C$zue=C$zue.ey.y;return C$zui.ex.x=C$zur*C$zuo+C$zua*C$zus,C$zui.ex.y=C$zun*C$zuo+C$zut*C$zus,C$zui.ey.x=C$zur*C$zuc+C$zua*C$zue,C$zui.ey.y=C$zun*C$zuc+C$zut*C$zue,C$zui},b2Mat22.MulTMM=function(C$zut,C$zue,C$zui){var C$zur=C$zut.ex.x,C$zun=C$zut.ex.y;var C$zua=C$zut.ey.x,C$zut=C$zut.ey.y;var C$zuo=C$zue.ex.x,C$zus=C$zue.ex.y;var C$zuc=C$zue.ey.x,C$zue=C$zue.ey.y;return C$zui.ex.x=C$zur*C$zuo+C$zun*C$zus,C$zui.ex.y=C$zua*C$zuo+C$zut*C$zus,C$zui.ey.x=C$zur*C$zuc+C$zun*C$zue,C$zui.ey.y=C$zua*C$zuc+C$zut*C$zue,C$zui},b2Mat22.IDENTITY=new b2Mat22;var C$zug=b2Mat22;function b2Mat22(){this.ex=new C$zuj(1,0),this.ey=new C$zuj(0,1)}b2Mat33.prototype.Clone=function(){return(new b2Mat33).Copy(this)},b2Mat33.prototype.SetVVV=function(C$zut,C$zue,C$zui){return this.ex.Copy(C$zut),this.ey.Copy(C$zue),this.ez.Copy(C$zui),this},b2Mat33.prototype.Copy=function(C$zut){return this.ex.Copy(C$zut.ex),this.ey.Copy(C$zut.ey),this.ez.Copy(C$zut.ez),this},b2Mat33.prototype.SetIdentity=function(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this},b2Mat33.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this},b2Mat33.prototype.SelfAddM=function(C$zut){return this.ex.SelfAdd(C$zut.ex),this.ey.SelfAdd(C$zut.ey),this.ez.SelfAdd(C$zut.ez),this},b2Mat33.prototype.Solve33=function(C$zut,C$zue,C$zui,C$zuh){var C$zuu=this.ex.x,C$zu_=this.ex.y,C$zud=this.ex.z;var C$zur=this.ey.x,C$zun=this.ey.y,C$zua=this.ey.z;var C$zuo=this.ez.x,C$zus=this.ez.y,C$zuc=this.ez.z;var C$zul=C$zuu*(C$zun*C$zuc-C$zua*C$zus)+C$zu_*(C$zua*C$zuo-C$zur*C$zuc)+C$zud*(C$zur*C$zus-C$zun*C$zuo);return C$zuh.x=(C$zul=0!==C$zul?1/C$zul:C$zul)*(C$zut*(C$zun*C$zuc-C$zua*C$zus)+C$zue*(C$zua*C$zuo-C$zur*C$zuc)+C$zui*(C$zur*C$zus-C$zun*C$zuo)),C$zuh.y=C$zul*(C$zuu*(C$zue*C$zuc-C$zui*C$zus)+C$zu_*(C$zui*C$zuo-C$zut*C$zuc)+C$zud*(C$zut*C$zus-C$zue*C$zuo)),C$zuh.z=C$zul*(C$zuu*(C$zun*C$zui-C$zua*C$zue)+C$zu_*(C$zua*C$zut-C$zur*C$zui)+C$zud*(C$zur*C$zue-C$zun*C$zut)),C$zuh},b2Mat33.prototype.Solve22=function(C$zut,C$zue,C$zui){var C$zur=this.ex.x,C$zun=this.ey.x;var C$zua=this.ex.y,C$zuo=this.ey.y;var C$zus=C$zur*C$zuo-C$zun*C$zua;return C$zui.x=(C$zus=0!==C$zus?1/C$zus:C$zus)*(C$zuo*C$zut-C$zun*C$zue),C$zui.y=C$zus*(C$zur*C$zue-C$zua*C$zut),C$zui},b2Mat33.prototype.GetInverse22=function(C$zut){var C$zue=this.ex.x,C$zui=this.ey.x,C$zur=this.ex.y,C$zun=this.ey.y;var C$zua=C$zue*C$zun-C$zui*C$zur;C$zut.ex.x=(C$zua=0!==C$zua?1/C$zua:C$zua)*C$zun,C$zut.ey.x=-C$zua*C$zui,C$zut.ex.z=0,C$zut.ex.y=-C$zua*C$zur,C$zut.ey.y=C$zua*C$zue,C$zut.ey.z=0,C$zut.ez.x=0,C$zut.ez.y=0,C$zut.ez.z=0},b2Mat33.prototype.GetSymInverse33=function(C$zut){var C$zue=C$zuh.DotV3V3(this.ex,C$zuh.CrossV3V3(this.ey,this.ez,C$zuh.s_t0));var C$zui=this.ex.x,C$zur=this.ey.x,C$zun=this.ez.x;var C$zua=this.ey.y,C$zuo=this.ez.y;var C$zus=this.ez.z;C$zut.ex.x=(C$zue=0!==C$zue?1/C$zue:C$zue)*(C$zua*C$zus-C$zuo*C$zuo),C$zut.ex.y=C$zue*(C$zun*C$zuo-C$zur*C$zus),C$zut.ex.z=C$zue*(C$zur*C$zuo-C$zun*C$zua),C$zut.ey.x=C$zut.ex.y,C$zut.ey.y=C$zue*(C$zui*C$zus-C$zun*C$zun),C$zut.ey.z=C$zue*(C$zun*C$zur-C$zui*C$zuo),C$zut.ez.x=C$zut.ex.z,C$zut.ez.y=C$zut.ey.z,C$zut.ez.z=C$zue*(C$zui*C$zua-C$zur*C$zur)},b2Mat33.MulM33V3=function(C$zut,C$zue,C$zui){var C$zur=C$zue.x,C$zun=C$zue.y,C$zue=C$zue.z;return C$zui.x=C$zut.ex.x*C$zur+C$zut.ey.x*C$zun+C$zut.ez.x*C$zue,C$zui.y=C$zut.ex.y*C$zur+C$zut.ey.y*C$zun+C$zut.ez.y*C$zue,C$zui.z=C$zut.ex.z*C$zur+C$zut.ey.z*C$zun+C$zut.ez.z*C$zue,C$zui},b2Mat33.MulM33XYZ=function(C$zut,C$zue,C$zui,C$zur,C$zun){return C$zun.x=C$zut.ex.x*C$zue+C$zut.ey.x*C$zui+C$zut.ez.x*C$zur,C$zun.y=C$zut.ex.y*C$zue+C$zut.ey.y*C$zui+C$zut.ez.y*C$zur,C$zun.z=C$zut.ex.z*C$zue+C$zut.ey.z*C$zui+C$zut.ez.z*C$zur,C$zun},b2Mat33.MulM33V2=function(C$zut,C$zue,C$zui){var C$zur=C$zue.x,C$zue=C$zue.y;return C$zui.x=C$zut.ex.x*C$zur+C$zut.ey.x*C$zue,C$zui.y=C$zut.ex.y*C$zur+C$zut.ey.y*C$zue,C$zui},b2Mat33.MulM33XY=function(C$zut,C$zue,C$zui,C$zur){return C$zur.x=C$zut.ex.x*C$zue+C$zut.ey.x*C$zui,C$zur.y=C$zut.ex.y*C$zue+C$zut.ey.y*C$zui,C$zur},b2Mat33.IDENTITY=new b2Mat33;var C$zuu=b2Mat33;function b2Mat33(){this.ex=new C$zuh(1,0,0),this.ey=new C$zuh(0,1,0),this.ez=new C$zuh(0,0,1)}b2Rot.prototype.Clone=function(){return(new b2Rot).Copy(this)},b2Rot.prototype.Copy=function(C$zut){return this.s=C$zut.s,this.c=C$zut.c,this},b2Rot.prototype.SetAngle=function(C$zut){return this.s=Math.sin(C$zut),this.c=Math.cos(C$zut),this},b2Rot.prototype.SetIdentity=function(){return this.s=0,this.c=1,this},b2Rot.prototype.GetAngle=function(){return Math.atan2(this.s,this.c)},b2Rot.prototype.GetXAxis=function(C$zut){return C$zut.x=this.c,C$zut.y=this.s,C$zut},b2Rot.prototype.GetYAxis=function(C$zut){return C$zut.x=-this.s,C$zut.y=this.c,C$zut},b2Rot.MulRR=function(C$zut,C$zue,C$zui){var C$zur=C$zut.c,C$zut=C$zut.s;var C$zun=C$zue.c,C$zue=C$zue.s;return C$zui.s=C$zut*C$zun+C$zur*C$zue,C$zui.c=C$zur*C$zun-C$zut*C$zue,C$zui},b2Rot.MulTRR=function(C$zut,C$zue,C$zui){var C$zur=C$zut.c,C$zut=C$zut.s;var C$zun=C$zue.c,C$zue=C$zue.s;return C$zui.s=C$zur*C$zue-C$zut*C$zun,C$zui.c=C$zur*C$zun+C$zut*C$zue,C$zui},b2Rot.MulRV=function(C$zut,C$zue,C$zui){var C$zur=C$zut.c,C$zut=C$zut.s;var C$zun=C$zue.x,C$zue=C$zue.y;return C$zui.x=C$zur*C$zun-C$zut*C$zue,C$zui.y=C$zut*C$zun+C$zur*C$zue,C$zui},b2Rot.MulTRV=function(C$zut,C$zue,C$zui){var C$zur=C$zut.c,C$zut=C$zut.s;var C$zun=C$zue.x,C$zue=C$zue.y;return C$zui.x=C$zur*C$zun+C$zut*C$zue,C$zui.y=-C$zut*C$zun+C$zur*C$zue,C$zui},b2Rot.IDENTITY=new b2Rot;var C$zuR=b2Rot;function b2Rot(C$zut){void 0===C$zut&&(C$zut=0),this.s=0,this.c=1,C$zut&&(this.s=Math.sin(C$zut),this.c=Math.cos(C$zut))}b2Transform.prototype.Clone=function(){return(new b2Transform).Copy(this)},b2Transform.prototype.Copy=function(C$zut){return this.p.Copy(C$zut.p),this.q.Copy(C$zut.q),this},b2Transform.prototype.SetIdentity=function(){return this.p.SetZero(),this.q.SetIdentity(),this},b2Transform.prototype.SetPositionRotation=function(C$zut,C$zue){return this.p.Copy(C$zut),this.q.Copy(C$zue),this},b2Transform.prototype.SetPositionAngle=function(C$zut,C$zue){return this.p.Copy(C$zut),this.q.SetAngle(C$zue),this},b2Transform.prototype.SetPosition=function(C$zut){return this.p.Copy(C$zut),this},b2Transform.prototype.SetPositionXY=function(C$zut,C$zue){return this.p.Set(C$zut,C$zue),this},b2Transform.prototype.SetRotation=function(C$zut){return this.q.Copy(C$zut),this},b2Transform.prototype.SetRotationAngle=function(C$zut){return this.q.SetAngle(C$zut),this},b2Transform.prototype.GetPosition=function(){return this.p},b2Transform.prototype.GetRotation=function(){return this.q},b2Transform.prototype.GetRotationAngle=function(){return this.q.GetAngle()},b2Transform.prototype.GetAngle=function(){return this.q.GetAngle()},b2Transform.MulXV=function(C$zut,C$zue,C$zui){var C$zur=C$zut.q.c,C$zun=C$zut.q.s;var C$zua=C$zue.x,C$zue=C$zue.y;return C$zui.x=C$zur*C$zua-C$zun*C$zue+C$zut.p.x,C$zui.y=C$zun*C$zua+C$zur*C$zue+C$zut.p.y,C$zui},b2Transform.MulTXV=function(C$zut,C$zue,C$zui){var C$zur=C$zut.q.c,C$zun=C$zut.q.s;var C$zua=C$zue.x-C$zut.p.x;C$zue=C$zue.y-C$zut.p.y;return C$zui.x=C$zur*C$zua+C$zun*C$zue,C$zui.y=-C$zun*C$zua+C$zur*C$zue,C$zui},b2Transform.MulXX=function(C$zut,C$zue,C$zui){return C$zuR.MulRR(C$zut.q,C$zue.q,C$zui.q),C$zuj.AddVV(C$zuR.MulRV(C$zut.q,C$zue.p,C$zui.p),C$zut.p,C$zui.p),C$zui},b2Transform.MulTXX=function(C$zut,C$zue,C$zui){return C$zuR.MulTRR(C$zut.q,C$zue.q,C$zui.q),C$zuR.MulTRV(C$zut.q,C$zuj.SubVV(C$zue.p,C$zut.p,C$zui.p),C$zui.p),C$zui},b2Transform.IDENTITY=new b2Transform;var C$zuI=b2Transform;function b2Transform(){this.p=new C$zuj,this.q=new C$zuR}b2Sweep.prototype.Clone=function(){return(new b2Sweep).Copy(this)},b2Sweep.prototype.Copy=function(C$zut){return this.localCenter.Copy(C$zut.localCenter),this.c0.Copy(C$zut.c0),this.c.Copy(C$zut.c),this.a0=C$zut.a0,this.a=C$zut.a,this.alpha0=C$zut.alpha0,this},b2Sweep.prototype.GetTransform=function(C$zut,C$zue){var C$zui=1-C$zue;C$zut.p.x=C$zui*this.c0.x+C$zue*this.c.x,C$zut.p.y=C$zui*this.c0.y+C$zue*this.c.y;C$zui=C$zui*this.a0+C$zue*this.a;return C$zut.q.SetAngle(C$zui),C$zut.p.SelfSub(C$zuR.MulRV(C$zut.q,this.localCenter,C$zuj.s_t0)),C$zut},b2Sweep.prototype.Advance=function(C$zut){var C$zue=(C$zut-this.alpha0)/(1-this.alpha0);var C$zui=1-C$zue;this.c0.x=C$zui*this.c0.x+C$zue*this.c.x,this.c0.y=C$zui*this.c0.y+C$zue*this.c.y,this.a0=C$zui*this.a0+C$zue*this.a,this.alpha0=C$zut},b2Sweep.prototype.Normalize=function(){var C$zut=6.28318530718*Math.floor(this.a0/6.28318530718);this.a0-=C$zut,this.a-=C$zut};var C$zu_=b2Sweep;function b2Sweep(){this.localCenter=new C$zuj,this.c0=new C$zuj,this.c=new C$zuj,this.a0=0,this.a=0,this.alpha0=0}b2Color.prototype.Clone=function(){return(new b2Color).Copy(this)},b2Color.prototype.Copy=function(C$zut){return this.r=C$zut.r,this.g=C$zut.g,this.b=C$zut.b,this.a=C$zut.a,this},b2Color.prototype.IsEqual=function(C$zut){return this.r===C$zut.r&&this.g===C$zut.g&&this.b===C$zut.b&&this.a===C$zut.a},b2Color.prototype.IsZero=function(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a},b2Color.prototype.Set=function(C$zut,C$zue,C$zui,C$zur){void 0===C$zur&&(C$zur=this.a),this.SetRGBA(C$zut,C$zue,C$zui,C$zur)},b2Color.prototype.SetByteRGB=function(C$zut,C$zue,C$zui){return this.r=C$zut/255,this.g=C$zue/255,this.b=C$zui/255,this},b2Color.prototype.SetByteRGBA=function(C$zut,C$zue,C$zui,C$zur){return this.r=C$zut/255,this.g=C$zue/255,this.b=C$zui/255,this.a=C$zur/255,this},b2Color.prototype.SetRGB=function(C$zut,C$zue,C$zui){return this.r=C$zut,this.g=C$zue,this.b=C$zui,this},b2Color.prototype.SetRGBA=function(C$zut,C$zue,C$zui,C$zur){return this.r=C$zut,this.g=C$zue,this.b=C$zui,this.a=C$zur,this},b2Color.prototype.SelfAdd=function(C$zut){return this.r+=C$zut.r,this.g+=C$zut.g,this.b+=C$zut.b,this.a+=C$zut.a,this},b2Color.prototype.Add=function(C$zut,C$zue){return C$zue.r=this.r+C$zut.r,C$zue.g=this.g+C$zut.g,C$zue.b=this.b+C$zut.b,C$zue.a=this.a+C$zut.a,C$zue},b2Color.prototype.SelfSub=function(C$zut){return this.r-=C$zut.r,this.g-=C$zut.g,this.b-=C$zut.b,this.a-=C$zut.a,this},b2Color.prototype.Sub=function(C$zut,C$zue){return C$zue.r=this.r-C$zut.r,C$zue.g=this.g-C$zut.g,C$zue.b=this.b-C$zut.b,C$zue.a=this.a-C$zut.a,C$zue},b2Color.prototype.SelfMul=function(C$zut){return this.r*=C$zut,this.g*=C$zut,this.b*=C$zut,this.a*=C$zut,this},b2Color.prototype.Mul=function(C$zut,C$zue){return C$zue.r=this.r*C$zut,C$zue.g=this.g*C$zut,C$zue.b=this.b*C$zut,C$zue.a=this.a*C$zut,C$zue},b2Color.prototype.Mix=function(C$zut,C$zue){b2Color.MixColors(this,C$zut,C$zue)},b2Color.MixColors=function(C$zut,C$zue,C$zui){var C$zur=C$zui*(C$zue.r-C$zut.r);var C$zun=C$zui*(C$zue.g-C$zut.g);var C$zua=C$zui*(C$zue.b-C$zut.b);C$zui*=C$zue.a-C$zut.a;C$zut.r+=C$zur,C$zut.g+=C$zun,C$zut.b+=C$zua,C$zut.a+=C$zui,C$zue.r-=C$zur,C$zue.g-=C$zun,C$zue.b-=C$zua,C$zue.a-=C$zui},b2Color.prototype.MakeStyleString=function(C$zut){return void 0===C$zut&&(C$zut=this.a),b2Color.MakeStyleString(this.r,this.g,this.b,C$zut)},b2Color.MakeStyleString=function(C$zut,C$zue,C$zui,C$zur){return C$zut*=255,C$zue*=255,C$zui*=255,(C$zur=void 0===C$zur?1:C$zur)<1?"rgba("+C$zut+","+C$zue+","+C$zui+","+C$zur+")":"rgb("+C$zut+","+C$zue+","+C$zui+")"},b2Color.ZERO=new b2Color(0,0,0,0),b2Color.RED=new b2Color(1,0,0),b2Color.GREEN=new b2Color(0,1,0),b2Color.BLUE=new b2Color(0,0,1);var C$zud=b2Color;function b2Color(C$zut,C$zue,C$zui,C$zur){void 0===C$zue&&(C$zue=.5),void 0===C$zui&&(C$zui=.5),void 0===C$zur&&(C$zur=1),this.r=C$zut=void 0===C$zut?.5:C$zut,this.g=C$zue,this.b=C$zui,this.a=C$zur}(C$zuf=C$zuH.b2DrawFlags||(C$zuH.b2DrawFlags={}))[C$zuf.e_none=0]="e_none",C$zuf[C$zuf.e_shapeBit=1]="e_shapeBit",C$zuf[C$zuf.e_jointBit=2]="e_jointBit",C$zuf[C$zuf.e_aabbBit=4]="e_aabbBit",C$zuf[C$zuf.e_pairBit=8]="e_pairBit",C$zuf[C$zuf.e_centerOfMassBit=16]="e_centerOfMassBit",C$zuf[C$zuf.e_particleBit=32]="e_particleBit",C$zuf[C$zuf.e_controllerBit=64]="e_controllerBit",C$zuf[C$zuf.e_all=63]="e_all";b2Draw.prototype.SetFlags=function(C$zut){this.m_drawFlags=C$zut},b2Draw.prototype.GetFlags=function(){return this.m_drawFlags},b2Draw.prototype.AppendFlags=function(C$zut){this.m_drawFlags|=C$zut},b2Draw.prototype.ClearFlags=function(C$zut){this.m_drawFlags&=~C$zut};var C$zuf=b2Draw;function b2Draw(){this.m_drawFlags=0}b2Timer.prototype.Reset=function(){return this.m_start=Date.now(),this},b2Timer.prototype.GetMilliseconds=function(){return Date.now()-this.m_start};var C$zub=b2Timer;function b2Timer(){this.m_start=Date.now()}b2Counter.prototype.GetCount=function(){return this.m_count},b2Counter.prototype.GetMinCount=function(){return this.m_min_count},b2Counter.prototype.GetMaxCount=function(){return this.m_max_count},b2Counter.prototype.ResetCount=function(){var C$zut=this.m_count;return this.m_count=0,C$zut},b2Counter.prototype.ResetMinCount=function(){this.m_min_count=0},b2Counter.prototype.ResetMaxCount=function(){this.m_max_count=0},b2Counter.prototype.Increment=function(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)},b2Counter.prototype.Decrement=function(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)};var C$zuC=b2Counter;function b2Counter(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}b2GrowableStack.prototype.Reset=function(){return this.m_count=0,this},b2GrowableStack.prototype.Push=function(C$zut){this.m_stack[this.m_count]=C$zut,this.m_count++},b2GrowableStack.prototype.Pop=function(){this.m_count--;var C$zut=this.m_stack[this.m_count];if((this.m_stack[this.m_count]=null)===C$zut)throw new Error;return C$zut},b2GrowableStack.prototype.GetCount=function(){return this.m_count};var C$zux=b2GrowableStack;function b2GrowableStack(C$zut){this.m_stack=[],this.m_count=0,this.m_stack=b2MakeArray(C$zut,function(C$zut){return null}),this.m_count=0}function C$zuI7T(){}function C$zuy7T(){}b2DistanceProxy.prototype.Copy=function(C$zut){return C$zut.m_vertices===C$zut.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(C$zut.m_buffer[0]),this.m_buffer[1].Copy(C$zut.m_buffer[1])):this.m_vertices=C$zut.m_vertices,this.m_count=C$zut.m_count,this.m_radius=C$zut.m_radius,this},b2DistanceProxy.prototype.Reset=function(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this},b2DistanceProxy.prototype.SetShape=function(C$zut,C$zue){C$zut.SetupDistanceProxy(this,C$zue)},b2DistanceProxy.prototype.SetVerticesRadius=function(C$zut,C$zue,C$zui){this.m_vertices=C$zut,this.m_count=C$zue,this.m_radius=C$zui},b2DistanceProxy.prototype.GetSupport=function(C$zut){var C$zue=0;var C$zui=C$zuj.DotVV(this.m_vertices[0],C$zut);for(var C$zur=1;C$zur<this.m_count;++C$zur){var C$zun=C$zuj.DotVV(this.m_vertices[C$zur],C$zut);C$zui<C$zun&&(C$zue=C$zur,C$zui=C$zun)}return C$zue},b2DistanceProxy.prototype.GetSupportVertex=function(C$zut){var C$zue=0;var C$zui=C$zuj.DotVV(this.m_vertices[0],C$zut);for(var C$zur=1;C$zur<this.m_count;++C$zur){var C$zun=C$zuj.DotVV(this.m_vertices[C$zur],C$zut);C$zui<C$zun&&(C$zue=C$zur,C$zui=C$zun)}return this.m_vertices[C$zue]},b2DistanceProxy.prototype.GetVertexCount=function(){return this.m_count},b2DistanceProxy.prototype.GetVertex=function(C$zut){return this.m_vertices[C$zut]};var C$zuA=b2DistanceProxy;function b2DistanceProxy(){this.m_buffer=C$zuj.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}b2SimplexCache.prototype.Reset=function(){return this.metric=0,this.count=0,this};var C$zuw=b2SimplexCache;function b2SimplexCache(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}b2DistanceInput.prototype.Reset=function(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this};var C$zuV=b2DistanceInput;function b2DistanceInput(){this.proxyA=new C$zuA,this.proxyB=new C$zuA,this.transformA=new C$zuI,this.transformB=new C$zuI,this.useRadii=!1}b2DistanceOutput.prototype.Reset=function(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this};var C$zuO=b2DistanceOutput;function b2DistanceOutput(){this.pointA=new C$zuj,this.pointB=new C$zuj,this.distance=0,this.iterations=0}function C$zuS7T(){this.proxyA=new C$zuA,this.proxyB=new C$zuA,this.transformA=new C$zuI,this.transformB=new C$zuI,this.translationB=new C$zuj}function C$zuK7T(){this.point=new C$zuj,this.normal=new C$zuj,this.lambda=0,this.iterations=0}C$zuH.b2_gjkCalls=0,C$zuH.b2_gjkIters=0,C$zuH.b2_gjkMaxIters=0;b2SimplexVertex.prototype.Copy=function(C$zut){return this.wA.Copy(C$zut.wA),this.wB.Copy(C$zut.wB),this.w.Copy(C$zut.w),this.a=C$zut.a,this.indexA=C$zut.indexA,this.indexB=C$zut.indexB,this};var C$zuF=b2SimplexVertex;function b2SimplexVertex(){this.wA=new C$zuj,this.wB=new C$zuj,this.w=new C$zuj,this.a=0,this.indexA=0,this.indexB=0}b2Simplex.prototype.ReadCache=function(C$zut,C$zue,C$zui,C$zur,C$zuh){this.m_count=C$zut.count;var C$zuu=this.m_vertices;for(var C$zun=0;C$zun<this.m_count;++C$zun){(C$zul=C$zuu[C$zun]).indexA=C$zut.indexA[C$zun],C$zul.indexB=C$zut.indexB[C$zun];var C$zua=C$zue.GetVertex(C$zul.indexA);var C$zuo=C$zur.GetVertex(C$zul.indexB);C$zuI.MulXV(C$zui,C$zua,C$zul.wA),C$zuI.MulXV(C$zuh,C$zuo,C$zul.wB),C$zuj.SubVV(C$zul.wB,C$zul.wA,C$zul.w),C$zul.a=0}var C$zus,C$zuc;var C$zul;1<this.m_count&&(C$zus=C$zut.metric,((C$zuc=this.GetMetric())<.5*C$zus||2*C$zus<C$zuc||C$zuc<C$zuE)&&(this.m_count=0)),0===this.m_count&&((C$zul=C$zuu[0]).indexA=0,C$zul.indexB=0,C$zua=C$zue.GetVertex(0),C$zuo=C$zur.GetVertex(0),C$zuI.MulXV(C$zui,C$zua,C$zul.wA),C$zuI.MulXV(C$zuh,C$zuo,C$zul.wB),C$zuj.SubVV(C$zul.wB,C$zul.wA,C$zul.w),C$zul.a=1,this.m_count=1)},b2Simplex.prototype.WriteCache=function(C$zut){C$zut.metric=this.GetMetric(),C$zut.count=this.m_count;var C$zue=this.m_vertices;for(var C$zui=0;C$zui<this.m_count;++C$zui)C$zut.indexA[C$zui]=C$zue[C$zui].indexA,C$zut.indexB[C$zui]=C$zue[C$zui].indexB},b2Simplex.prototype.GetSearchDirection=function(C$zut){switch(this.m_count){case 1:return C$zuj.NegV(this.m_v1.w,C$zut);case 2:var C$zue=C$zuj.SubVV(this.m_v2.w,this.m_v1.w,C$zut);return 0<C$zuj.CrossVV(C$zue,C$zuj.NegV(this.m_v1.w,C$zuj.s_t0))?C$zuj.CrossOneV(C$zue,C$zut):C$zuj.CrossVOne(C$zue,C$zut);default:return C$zut.SetZero()}},b2Simplex.prototype.GetClosestPoint=function(C$zut){switch(this.m_count){case 0:return C$zut.SetZero();case 1:return C$zut.Copy(this.m_v1.w);case 2:return C$zut.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return C$zut.SetZero()}},b2Simplex.prototype.GetWitnessPoints=function(C$zut,C$zue){switch(this.m_count){case 0:break;case 1:C$zut.Copy(this.m_v1.wA),C$zue.Copy(this.m_v1.wB);break;case 2:C$zut.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,C$zut.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,C$zue.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,C$zue.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:C$zue.x=C$zut.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,C$zue.y=C$zut.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}},b2Simplex.prototype.GetMetric=function(){switch(this.m_count){case 0:case 1:return 0;case 2:return C$zuj.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return C$zuj.CrossVV(C$zuj.SubVV(this.m_v2.w,this.m_v1.w,C$zuj.s_t0),C$zuj.SubVV(this.m_v3.w,this.m_v1.w,C$zuj.s_t1));default:return 0}},b2Simplex.prototype.Solve2=function(){var C$zut=this.m_v1.w;var C$zue=this.m_v2.w;var C$zui=C$zuj.SubVV(C$zue,C$zut,b2Simplex.s_e12);C$zut=-C$zuj.DotVV(C$zut,C$zui);if(C$zut<=0)return this.m_v1.a=1,void(this.m_count=1);C$zue=C$zuj.DotVV(C$zue,C$zui);if(C$zue<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);C$zui=1/(C$zue+C$zut);this.m_v1.a=C$zue*C$zui,this.m_v2.a=C$zut*C$zui,this.m_count=2},b2Simplex.prototype.Solve3=function(){var C$zut=this.m_v1.w;var C$zue=this.m_v2.w;var C$zui=this.m_v3.w;var C$zur=C$zuj.SubVV(C$zue,C$zut,b2Simplex.s_e12);var C$zun=C$zuj.DotVV(C$zut,C$zur);var C$zua=C$zuj.DotVV(C$zue,C$zur);C$zun=-C$zun;var C$zuo=C$zuj.SubVV(C$zui,C$zut,b2Simplex.s_e13);var C$zus=C$zuj.DotVV(C$zut,C$zuo);var C$zuh=C$zuj.DotVV(C$zui,C$zuo);C$zus=-C$zus;var C$zuc=C$zuj.SubVV(C$zui,C$zue,b2Simplex.s_e23);var C$zul=C$zuj.DotVV(C$zue,C$zuc);C$zuc=C$zuj.DotVV(C$zui,C$zuc);C$zul=-C$zul;C$zur=C$zuj.CrossVV(C$zur,C$zuo);C$zuo=C$zur*C$zuj.CrossVV(C$zue,C$zui);C$zui=C$zur*C$zuj.CrossVV(C$zui,C$zut);C$zur*=C$zuj.CrossVV(C$zut,C$zue);if(C$zun<=0&&C$zus<=0)return this.m_v1.a=1,void(this.m_count=1);if(0<C$zua&&0<C$zun&&C$zur<=0)return this.m_v1.a=C$zua*(C$zut=1/(C$zua+C$zun)),this.m_v2.a=C$zun*C$zut,void(this.m_count=2);if(0<C$zuh&&0<C$zus&&C$zui<=0)return this.m_v1.a=C$zuh*(C$zue=1/(C$zuh+C$zus)),this.m_v3.a=C$zus*C$zue,this.m_count=2,void this.m_v2.Copy(this.m_v3);if(C$zua<=0&&C$zul<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(C$zuh<=0&&C$zuc<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(0<C$zuc&&0<C$zul&&C$zuo<=0)return this.m_v2.a=C$zuc*(C$zun=1/(C$zuc+C$zul)),this.m_v3.a=C$zul*C$zun,this.m_count=2,void this.m_v1.Copy(this.m_v3);C$zut=1/(C$zuo+C$zui+C$zur);this.m_v1.a=C$zuo*C$zut,this.m_v2.a=C$zui*C$zut,this.m_v3.a=C$zur*C$zut,this.m_count=3},b2Simplex.s_e12=new C$zuj,b2Simplex.s_e13=new C$zuj,b2Simplex.s_e23=new C$zuj;var C$zuN=b2Simplex;function b2Simplex(){this.m_v1=new C$zuF,this.m_v2=new C$zuF,this.m_v3=new C$zuF,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}var C$zuk=new C$zuN;var C$zuz=[0,0,0];var C$zuG=[0,0,0];var C$zuU=new C$zuj;var C$zuW=new C$zuj;var C$zuq=new C$zuj;var C$zuJ=new C$zuj;var C$zuY=new C$zuj;function b2Distance(C$zut,C$zue,C$zui){++C$zuH.b2_gjkCalls;var C$zur=C$zui.proxyA;var C$zun=C$zui.proxyB;var C$zua=C$zui.transformA;var C$zuh=C$zui.transformB;var C$zuo=C$zuk;C$zuo.ReadCache(C$zue,C$zur,C$zua,C$zun,C$zuh);var C$zuu=C$zuo.m_vertices;var C$zu_=C$zuz;var C$zud=C$zuG;var C$zuf;var C$zus=0;for(;C$zus<20;){C$zuf=C$zuo.m_count;for(var C$zuc=0;C$zuc<C$zuf;++C$zuc)C$zu_[C$zuc]=C$zuu[C$zuc].indexA,C$zud[C$zuc]=C$zuu[C$zuc].indexB;switch(C$zuo.m_count){case 1:break;case 2:C$zuo.Solve2();break;case 3:C$zuo.Solve3()}if(3===C$zuo.m_count)break;var C$zup=C$zuo.GetSearchDirection(C$zuW);if(C$zup.LengthSquared()<C$zuy)break;var C$zul=C$zuu[C$zuo.m_count];C$zul.indexA=C$zur.GetSupport(C$zuR.MulTRV(C$zua.q,C$zuj.NegV(C$zup,C$zuj.s_t0),C$zuJ)),C$zuI.MulXV(C$zua,C$zur.GetVertex(C$zul.indexA),C$zul.wA),C$zul.indexB=C$zun.GetSupport(C$zuR.MulTRV(C$zuh.q,C$zup,C$zuY)),C$zuI.MulXV(C$zuh,C$zun.GetVertex(C$zul.indexB),C$zul.wB),C$zuj.SubVV(C$zul.wB,C$zul.wA,C$zul.w),++C$zus,++C$zuH.b2_gjkIters;var C$zum=!1;for(C$zuc=0;C$zuc<C$zuf;++C$zuc)if(C$zul.indexA===C$zu_[C$zuc]&&C$zul.indexB===C$zud[C$zuc]){C$zum=!0;break}if(C$zum)break;++C$zuo.m_count}var C$zuv;C$zuH.b2_gjkMaxIters=C$zuL(C$zuH.b2_gjkMaxIters,C$zus),C$zuo.GetWitnessPoints(C$zut.pointA,C$zut.pointB),C$zut.distance=C$zuj.DistanceVV(C$zut.pointA,C$zut.pointB),C$zut.iterations=C$zus,C$zuo.WriteCache(C$zue),C$zui.useRadii&&(C$zue=C$zur.m_radius,C$zui=C$zun.m_radius,C$zut.distance>C$zue+C$zui&&C$zut.distance>C$zuE?(C$zut.distance-=C$zue+C$zui,(C$zuv=C$zuj.SubVV(C$zut.pointB,C$zut.pointA,C$zuq)).Normalize(),C$zut.pointA.SelfMulAdd(C$zue,C$zuv),C$zut.pointB.SelfMulSub(C$zui,C$zuv)):(C$zue=C$zuj.MidVV(C$zut.pointA,C$zut.pointB,C$zuU),C$zut.pointA.Copy(C$zue),C$zut.pointB.Copy(C$zue),C$zut.distance=0))}var C$zu$=new C$zuj;var C$zuZ=new C$zuN;var C$zuQ=new C$zuj;var C$zuK=new C$zuj;var C$zutt=new C$zuj;var C$zuet=new C$zuj;var C$zuit=new C$zuj;var C$zurt=new C$zuj;(C$zuct=C$zuH.b2ContactFeatureType||(C$zuH.b2ContactFeatureType={}))[C$zuct.e_vertex=0]="e_vertex",C$zuct[C$zuct.e_face=1]="e_face";Object.defineProperty(b2ContactFeature.prototype,"key",{get:function(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key},set:function(C$zut){this._key=C$zut,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255},enumerable:!0,configurable:!0}),Object.defineProperty(b2ContactFeature.prototype,"indexA",{get:function(){return this._indexA},set:function(C$zut){this._indexA=C$zut,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b2ContactFeature.prototype,"indexB",{get:function(){return this._indexB},set:function(C$zut){this._indexB=C$zut,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b2ContactFeature.prototype,"typeA",{get:function(){return this._typeA},set:function(C$zut){this._typeA=C$zut,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b2ContactFeature.prototype,"typeB",{get:function(){return this._typeB},set:function(C$zut){this._typeB=C$zut,this._key_invalid=!0},enumerable:!0,configurable:!0});var C$zunt=b2ContactFeature;function b2ContactFeature(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}b2ContactID.prototype.Copy=function(C$zut){return this.key=C$zut.key,this},b2ContactID.prototype.Clone=function(){return(new b2ContactID).Copy(this)},Object.defineProperty(b2ContactID.prototype,"key",{get:function(){return this.cf.key},set:function(C$zut){this.cf.key=C$zut},enumerable:!0,configurable:!0});var C$zuat=b2ContactID;function b2ContactID(){this.cf=new C$zunt}b2ManifoldPoint.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2ManifoldPoint})},b2ManifoldPoint.prototype.Reset=function(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0},b2ManifoldPoint.prototype.Copy=function(C$zut){return this.localPoint.Copy(C$zut.localPoint),this.normalImpulse=C$zut.normalImpulse,this.tangentImpulse=C$zut.tangentImpulse,this.id.Copy(C$zut.id),this};var C$zuot=b2ManifoldPoint;function b2ManifoldPoint(){this.localPoint=new C$zuj,this.normalImpulse=0,this.tangentImpulse=0,this.id=new C$zuat}(C$zuct=C$zuH.b2ManifoldType||(C$zuH.b2ManifoldType={}))[C$zuct.e_unknown=-1]="e_unknown",C$zuct[C$zuct.e_circles=0]="e_circles",C$zuct[C$zuct.e_faceA=1]="e_faceA",C$zuct[C$zuct.e_faceB=2]="e_faceB";b2Manifold.prototype.Reset=function(){for(var C$zut=0;C$zut<2;++C$zut)this.points[C$zut].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=C$zuH.b2ManifoldType.e_unknown,this.pointCount=0},b2Manifold.prototype.Copy=function(C$zut){this.pointCount=C$zut.pointCount;for(var C$zue=0;C$zue<2;++C$zue)this.points[C$zue].Copy(C$zut.points[C$zue]);return this.localNormal.Copy(C$zut.localNormal),this.localPoint.Copy(C$zut.localPoint),this.type=C$zut.type,this},b2Manifold.prototype.Clone=function(){return(new b2Manifold).Copy(this)};var C$zust=b2Manifold;function b2Manifold(){this.points=C$zuot.MakeArray(2),this.localNormal=new C$zuj,this.localPoint=new C$zuj,this.type=C$zuH.b2ManifoldType.e_unknown,this.pointCount=0}b2WorldManifold.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur,C$zun){if(0!==C$zut.pointCount)switch(C$zut.type){case C$zuH.b2ManifoldType.e_circles:this.normal.Set(1,0);var C$zua=C$zuI.MulXV(C$zue,C$zut.localPoint,b2WorldManifold.Initialize_s_pointA);var C$zuh=C$zuI.MulXV(C$zur,C$zut.points[0].localPoint,b2WorldManifold.Initialize_s_pointB);C$zuj.DistanceSquaredVV(C$zua,C$zuh)>C$zuy&&C$zuj.SubVV(C$zuh,C$zua,this.normal).SelfNormalize();var C$zuo=C$zuj.AddVMulSV(C$zua,C$zui,this.normal,b2WorldManifold.Initialize_s_cA);var C$zus=C$zuj.SubVMulSV(C$zuh,C$zun,this.normal,b2WorldManifold.Initialize_s_cB);C$zuj.MidVV(C$zuo,C$zus,this.points[0]),this.separations[0]=C$zuj.DotVV(C$zuj.SubVV(C$zus,C$zuo,C$zuj.s_t0),this.normal);break;case C$zuH.b2ManifoldType.e_faceA:C$zuR.MulRV(C$zue.q,C$zut.localNormal,this.normal);var C$zuu=C$zuI.MulXV(C$zue,C$zut.localPoint,b2WorldManifold.Initialize_s_planePoint);for(var C$zuc=0;C$zuc<C$zut.pointCount;++C$zuc){var C$zul=C$zuI.MulXV(C$zur,C$zut.points[C$zuc].localPoint,b2WorldManifold.Initialize_s_clipPoint);var C$zu_=C$zui-C$zuj.DotVV(C$zuj.SubVV(C$zul,C$zuu,C$zuj.s_t0),this.normal);C$zuo=C$zuj.AddVMulSV(C$zul,C$zu_,this.normal,b2WorldManifold.Initialize_s_cA);C$zus=C$zuj.SubVMulSV(C$zul,C$zun,this.normal,b2WorldManifold.Initialize_s_cB);C$zuj.MidVV(C$zuo,C$zus,this.points[C$zuc]),this.separations[C$zuc]=C$zuj.DotVV(C$zuj.SubVV(C$zus,C$zuo,C$zuj.s_t0),this.normal)}break;case C$zuH.b2ManifoldType.e_faceB:C$zuR.MulRV(C$zur.q,C$zut.localNormal,this.normal);C$zuu=C$zuI.MulXV(C$zur,C$zut.localPoint,b2WorldManifold.Initialize_s_planePoint);for(C$zuc=0;C$zuc<C$zut.pointCount;++C$zuc){C$zul=C$zuI.MulXV(C$zue,C$zut.points[C$zuc].localPoint,b2WorldManifold.Initialize_s_clipPoint);C$zu_=C$zun-C$zuj.DotVV(C$zuj.SubVV(C$zul,C$zuu,C$zuj.s_t0),this.normal);C$zus=C$zuj.AddVMulSV(C$zul,C$zu_,this.normal,b2WorldManifold.Initialize_s_cB);C$zuo=C$zuj.SubVMulSV(C$zul,C$zui,this.normal,b2WorldManifold.Initialize_s_cA);C$zuj.MidVV(C$zuo,C$zus,this.points[C$zuc]),this.separations[C$zuc]=C$zuj.DotVV(C$zuj.SubVV(C$zuo,C$zus,C$zuj.s_t0),this.normal)}this.normal.SelfNeg()}},b2WorldManifold.Initialize_s_pointA=new C$zuj,b2WorldManifold.Initialize_s_pointB=new C$zuj,b2WorldManifold.Initialize_s_cA=new C$zuj,b2WorldManifold.Initialize_s_cB=new C$zuj,b2WorldManifold.Initialize_s_planePoint=new C$zuj,b2WorldManifold.Initialize_s_clipPoint=new C$zuj;var C$zuct=b2WorldManifold;function b2WorldManifold(){this.normal=new C$zuj,this.points=C$zuj.MakeArray(2),this.separations=b2MakeNumberArray(2)}(C$zult=C$zuH.b2PointState||(C$zuH.b2PointState={}))[C$zult.b2_nullState=0]="b2_nullState",C$zult[C$zult.b2_addState=1]="b2_addState",C$zult[C$zult.b2_persistState=2]="b2_persistState",C$zult[C$zult.b2_removeState=3]="b2_removeState";b2ClipVertex.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2ClipVertex})},b2ClipVertex.prototype.Copy=function(C$zut){return this.v.Copy(C$zut.v),this.id.Copy(C$zut.id),this};var C$zult=b2ClipVertex;function b2ClipVertex(){this.v=new C$zuj,this.id=new C$zuat}b2RayCastInput.prototype.Copy=function(C$zut){return this.p1.Copy(C$zut.p1),this.p2.Copy(C$zut.p2),this.maxFraction=C$zut.maxFraction,this};var C$zuht=b2RayCastInput;function b2RayCastInput(){this.p1=new C$zuj,this.p2=new C$zuj,this.maxFraction=1}b2RayCastOutput.prototype.Copy=function(C$zut){return this.normal.Copy(C$zut.normal),this.fraction=C$zut.fraction,this};var C$zuut=b2RayCastOutput;function b2RayCastOutput(){this.normal=new C$zuj,this.fraction=0}b2AABB.prototype.Copy=function(C$zut){return this.lowerBound.Copy(C$zut.lowerBound),this.upperBound.Copy(C$zut.upperBound),this},b2AABB.prototype.IsValid=function(){var C$zut=this.upperBound.x-this.lowerBound.x;var C$zue=this.upperBound.y-this.lowerBound.y;return 0<=C$zut&&0<=C$zue&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},b2AABB.prototype.GetCenter=function(){return C$zuj.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)},b2AABB.prototype.GetExtents=function(){return C$zuj.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)},b2AABB.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))},b2AABB.prototype.Combine1=function(C$zut){return this.lowerBound.x=C$zuD(this.lowerBound.x,C$zut.lowerBound.x),this.lowerBound.y=C$zuD(this.lowerBound.y,C$zut.lowerBound.y),this.upperBound.x=C$zuL(this.upperBound.x,C$zut.upperBound.x),this.upperBound.y=C$zuL(this.upperBound.y,C$zut.upperBound.y),this},b2AABB.prototype.Combine2=function(C$zut,C$zue){return this.lowerBound.x=C$zuD(C$zut.lowerBound.x,C$zue.lowerBound.x),this.lowerBound.y=C$zuD(C$zut.lowerBound.y,C$zue.lowerBound.y),this.upperBound.x=C$zuL(C$zut.upperBound.x,C$zue.upperBound.x),this.upperBound.y=C$zuL(C$zut.upperBound.y,C$zue.upperBound.y),this},b2AABB.Combine=function(C$zut,C$zue,C$zui){return C$zui.Combine2(C$zut,C$zue),C$zui},b2AABB.prototype.Contains=function(C$zut){return this.lowerBound.x<=C$zut.lowerBound.x&&this.lowerBound.y<=C$zut.lowerBound.y&&C$zut.upperBound.x<=this.upperBound.x&&C$zut.upperBound.y<=this.upperBound.y},b2AABB.prototype.RayCast=function(C$zuh,C$zut){var C$zue=-C$zuB;var C$zui=C$zuB;var C$zur=C$zut.p1.x;var C$zun=C$zut.p1.y;var C$zuu=C$zut.p2.x-C$zut.p1.x;var C$zu_=C$zut.p2.y-C$zut.p1.y;var C$zud=C$zuM(C$zuu);var C$zuf=C$zuM(C$zu_);var C$zua=C$zuh.normal;if(C$zud<C$zuE){if(C$zur<this.lowerBound.x||this.upperBound.x<C$zur)return!1}else{var C$zuo=1/C$zuu;var C$zus=(this.lowerBound.x-C$zur)*C$zuo;var C$zuc=-1;if((C$zul=(this.upperBound.x-C$zur)*C$zuo)<C$zus&&(C$zup=C$zus,C$zus=C$zul,C$zul=C$zup,C$zuc=1),C$zue<C$zus&&(C$zua.x=C$zuc,C$zua.y=0,C$zue=C$zus),(C$zui=C$zuD(C$zui,C$zul))<C$zue)return!1}if(C$zuf<C$zuE){if(C$zun<this.lowerBound.y||this.upperBound.y<C$zun)return!1}else{C$zuo=1/C$zu_;C$zus=(this.lowerBound.y-C$zun)*C$zuo;var C$zul;C$zuc=-1;var C$zup;if((C$zul=(this.upperBound.y-C$zun)*C$zuo)<C$zus&&(C$zup=C$zus,C$zus=C$zul,C$zul=C$zup,C$zuc=1),C$zue<C$zus&&(C$zua.x=0,C$zua.y=C$zuc,C$zue=C$zus),(C$zui=C$zuD(C$zui,C$zul))<C$zue)return!1}return!(C$zue<0||C$zut.maxFraction<C$zue)&&(C$zuh.fraction=C$zue,!0)},b2AABB.prototype.TestContain=function(C$zut){return!(C$zut.x<this.lowerBound.x||this.upperBound.x<C$zut.x)&&!(C$zut.y<this.lowerBound.y||this.upperBound.y<C$zut.y)},b2AABB.prototype.TestOverlap=function(C$zut){var C$zue=C$zut.lowerBound.x-this.upperBound.x;var C$zui=C$zut.lowerBound.y-this.upperBound.y;var C$zur=this.lowerBound.x-C$zut.upperBound.x;C$zut=this.lowerBound.y-C$zut.upperBound.y;return!(0<C$zue||0<C$zui)&&!(0<C$zur||0<C$zut)};var C$zu_t=b2AABB;function b2AABB(){this.lowerBound=new C$zuj,this.upperBound=new C$zuj,this.m_cache_center=new C$zuj,this.m_cache_extent=new C$zuj}function b2TestOverlapAABB(C$zut,C$zue){var C$zui=C$zue.lowerBound.x-C$zut.upperBound.x;var C$zur=C$zue.lowerBound.y-C$zut.upperBound.y;var C$zun=C$zut.lowerBound.x-C$zue.upperBound.x;C$zut=C$zut.lowerBound.y-C$zue.upperBound.y;return!(0<C$zui||0<C$zur)&&!(0<C$zun||0<C$zut)}function b2ClipSegmentToLine(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zua=0;var C$zuo=C$zue[0];C$zue=C$zue[1];var C$zus=C$zuj.DotVV(C$zui,C$zuo.v)-C$zur;C$zui=C$zuj.DotVV(C$zui,C$zue.v)-C$zur;return C$zus<=0&&C$zut[C$zua++].Copy(C$zuo),C$zui<=0&&C$zut[C$zua++].Copy(C$zue),C$zus*C$zui<0&&((C$zur=C$zut[C$zua].v).x=C$zuo.v.x+(C$zus=C$zus/(C$zus-C$zui))*(C$zue.v.x-C$zuo.v.x),C$zur.y=C$zuo.v.y+C$zus*(C$zue.v.y-C$zuo.v.y),(C$zui=C$zut[C$zua].id).cf.indexA=C$zun,C$zui.cf.indexB=C$zuo.id.cf.indexB,C$zui.cf.typeA=C$zuH.b2ContactFeatureType.e_vertex,C$zui.cf.typeB=C$zuH.b2ContactFeatureType.e_face,++C$zua),C$zua}var C$zudt=new C$zuV;var C$zuft=new C$zuw;var C$zupt=new C$zuO;function b2TestOverlapShape(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){var C$zuo=C$zudt.Reset();C$zuo.proxyA.SetShape(C$zut,C$zue),C$zuo.proxyB.SetShape(C$zui,C$zur),C$zuo.transformA.Copy(C$zun),C$zuo.transformB.Copy(C$zua),C$zuo.useRadii=!0;C$zut=C$zuft.Reset();C$zut.count=0;C$zue=C$zupt.Reset();return b2Distance(C$zue,C$zut,C$zuo),C$zue.distance<10*C$zuE}function verify(C$zut){if(null===C$zut)throw new Error;return C$zut}b2TreeNode.prototype.IsLeaf=function(){return null===this.child1};var C$zumt=b2TreeNode;function b2TreeNode(C$zut){void 0===C$zut&&(C$zut=0),this.m_id=0,this.aabb=new C$zu_t,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=C$zut}b2DynamicTree.prototype.Query=function(C$zut,C$zue){if(null!==this.m_root){var C$zui=this.m_stack.Reset();for(C$zui.Push(this.m_root);0<C$zui.GetCount();){var C$zur=C$zui.Pop();if(C$zur.aabb.TestOverlap(C$zut))if(C$zur.IsLeaf()){if(!C$zue(C$zur))return}else C$zui.Push(verify(C$zur.child1)),C$zui.Push(verify(C$zur.child2))}}},b2DynamicTree.prototype.QueryPoint=function(C$zut,C$zue){if(null!==this.m_root){var C$zui=this.m_stack.Reset();for(C$zui.Push(this.m_root);0<C$zui.GetCount();){var C$zur=C$zui.Pop();if(C$zur.aabb.TestContain(C$zut))if(C$zur.IsLeaf()){if(!C$zue(C$zur))return}else C$zui.Push(verify(C$zur.child1)),C$zui.Push(verify(C$zur.child2))}}},b2DynamicTree.prototype.RayCast=function(C$zut,C$zuh){if(null!==this.m_root){var C$zue=C$zut.p1;var C$zui=C$zut.p2;var C$zuu=C$zuj.SubVV(C$zui,C$zue,b2DynamicTree.s_r);C$zuu.Normalize();var C$zu_=C$zuj.CrossOneV(C$zuu,b2DynamicTree.s_v);var C$zud=C$zuj.AbsV(C$zu_,b2DynamicTree.s_abs_v);var C$zur=C$zut.maxFraction;var C$zun=b2DynamicTree.s_segmentAABB;var C$zua=C$zue.x+C$zur*(C$zui.x-C$zue.x);var C$zuo=C$zue.y+C$zur*(C$zui.y-C$zue.y);C$zun.lowerBound.x=C$zuD(C$zue.x,C$zua),C$zun.lowerBound.y=C$zuD(C$zue.y,C$zuo),C$zun.upperBound.x=C$zuL(C$zue.x,C$zua),C$zun.upperBound.y=C$zuL(C$zue.y,C$zuo);var C$zus=this.m_stack.Reset();for(C$zus.Push(this.m_root);0<C$zus.GetCount();){var C$zuc=C$zus.Pop();if(b2TestOverlapAABB(C$zuc.aabb,C$zun)){var C$zul=C$zuc.aabb.GetCenter();var C$zuf=C$zuc.aabb.GetExtents();if(!(0<C$zuM(C$zuj.DotVV(C$zu_,C$zuj.SubVV(C$zue,C$zul,C$zuj.s_t0)))-C$zuj.DotVV(C$zud,C$zuf)))if(C$zuc.IsLeaf()){C$zul=b2DynamicTree.s_subInput;C$zul.p1.Copy(C$zut.p1),C$zul.p2.Copy(C$zut.p2),C$zul.maxFraction=C$zur;C$zuf=C$zuh(C$zul,C$zuc);if(0===C$zuf)return;0<C$zuf&&(C$zua=C$zue.x+(C$zur=C$zuf)*(C$zui.x-C$zue.x),C$zuo=C$zue.y+C$zur*(C$zui.y-C$zue.y),C$zun.lowerBound.x=C$zuD(C$zue.x,C$zua),C$zun.lowerBound.y=C$zuD(C$zue.y,C$zuo),C$zun.upperBound.x=C$zuL(C$zue.x,C$zua),C$zun.upperBound.y=C$zuL(C$zue.y,C$zuo))}else C$zus.Push(verify(C$zuc.child1)),C$zus.Push(verify(C$zuc.child2))}}}},b2DynamicTree.prototype.AllocateNode=function(){var C$zut;return this.m_freeList?(C$zut=this.m_freeList,this.m_freeList=C$zut.parent,C$zut.parent=null,C$zut.child1=null,C$zut.child2=null,C$zut.height=0,delete C$zut.userData,C$zut):new C$zumt(b2DynamicTree.s_node_id++)},b2DynamicTree.prototype.FreeNode=function(C$zut){C$zut.parent=this.m_freeList,C$zut.child1=null,C$zut.child2=null,C$zut.height=-1,delete C$zut.userData,this.m_freeList=C$zut},b2DynamicTree.prototype.CreateProxy=function(C$zut,C$zue){var C$zui=this.AllocateNode();return C$zui.aabb.lowerBound.x=C$zut.lowerBound.x-.1,C$zui.aabb.lowerBound.y=C$zut.lowerBound.y-.1,C$zui.aabb.upperBound.x=C$zut.upperBound.x+.1,C$zui.aabb.upperBound.y=C$zut.upperBound.y+.1,C$zui.userData=C$zue,C$zui.height=0,this.InsertLeaf(C$zui),C$zui},b2DynamicTree.prototype.DestroyProxy=function(C$zut){this.RemoveLeaf(C$zut),this.FreeNode(C$zut)},b2DynamicTree.prototype.MoveProxy=function(C$zut,C$zue,C$zui){if(C$zut.aabb.Contains(C$zue))return!1;this.RemoveLeaf(C$zut);var C$zur=.1+2*(0<C$zui.x?C$zui.x:-C$zui.x);C$zui=.1+2*(0<C$zui.y?C$zui.y:-C$zui.y);return C$zut.aabb.lowerBound.x=C$zue.lowerBound.x-C$zur,C$zut.aabb.lowerBound.y=C$zue.lowerBound.y-C$zui,C$zut.aabb.upperBound.x=C$zue.upperBound.x+C$zur,C$zut.aabb.upperBound.y=C$zue.upperBound.y+C$zui,this.InsertLeaf(C$zut),!0},b2DynamicTree.prototype.InsertLeaf=function(C$zut){if(++this.m_insertionCount,null===this.m_root)return this.m_root=C$zut,void(this.m_root.parent=null);var C$zue=C$zut.aabb;var C$zui=this.m_root;for(;!C$zui.IsLeaf();){var C$zur=verify(C$zui.child1);var C$zun=verify(C$zui.child2);var C$zuh=C$zui.aabb.GetPerimeter();var C$zua=b2DynamicTree.s_combinedAABB;C$zua.Combine2(C$zui.aabb,C$zue);C$zua=C$zua.GetPerimeter();var C$zuu=2*C$zua;C$zua=2*(C$zua-C$zuh);C$zuh=void 0;var C$zuo=b2DynamicTree.s_aabb;var C$zu_=void 0;C$zuh=C$zur.IsLeaf()?(C$zuo.Combine2(C$zue,C$zur.aabb),C$zuo.GetPerimeter()+C$zua):(C$zuo.Combine2(C$zue,C$zur.aabb),C$zu_=C$zur.aabb.GetPerimeter(),C$zuo.GetPerimeter()-C$zu_+C$zua);var C$zud=void 0;if(C$zud=C$zun.IsLeaf()?(C$zuo.Combine2(C$zue,C$zun.aabb),C$zuo.GetPerimeter()+C$zua):(C$zuo.Combine2(C$zue,C$zun.aabb),C$zu_=C$zun.aabb.GetPerimeter(),C$zuo.GetPerimeter()-C$zu_+C$zua),C$zuu<C$zuh&&C$zuu<C$zud)break;C$zui=C$zuh<C$zud?C$zur:C$zun}var C$zus=C$zui;var C$zuf=C$zus.parent;var C$zuc=this.AllocateNode();C$zuc.parent=C$zuf,delete C$zuc.userData,C$zuc.aabb.Combine2(C$zue,C$zus.aabb),C$zuc.height=C$zus.height+1,C$zuf?(C$zuf.child1===C$zus?C$zuf.child1=C$zuc:C$zuf.child2=C$zuc,C$zuc.child1=C$zus,C$zuc.child2=C$zut,C$zus.parent=C$zuc,C$zut.parent=C$zuc):(C$zuc.child1=C$zus,C$zuc.child2=C$zut,C$zus.parent=C$zuc,C$zut.parent=C$zuc,this.m_root=C$zuc);var C$zul=C$zut.parent;for(;null!==C$zul;){C$zur=verify((C$zul=this.Balance(C$zul)).child1);C$zun=verify(C$zul.child2);C$zul.height=1+C$zuL(C$zur.height,C$zun.height),C$zul.aabb.Combine2(C$zur.aabb,C$zun.aabb),C$zul=C$zul.parent}},b2DynamicTree.prototype.RemoveLeaf=function(C$zut){if(C$zut!==this.m_root){var C$zue=verify(C$zut.parent);var C$zui=C$zue&&C$zue.parent;if(C$zut=C$zue.child1===C$zut?verify(C$zue.child2):verify(C$zue.child1),C$zui){C$zui.child1===C$zue?C$zui.child1=C$zut:C$zui.child2=C$zut,C$zut.parent=C$zui,this.FreeNode(C$zue);var C$zur=C$zui;for(;C$zur;){var C$zun=verify((C$zur=this.Balance(C$zur)).child1);var C$zua=verify(C$zur.child2);C$zur.aabb.Combine2(C$zun.aabb,C$zua.aabb),C$zur.height=1+C$zuL(C$zun.height,C$zua.height),C$zur=C$zur.parent}}else(this.m_root=C$zut).parent=null,this.FreeNode(C$zue)}else this.m_root=null},b2DynamicTree.prototype.Balance=function(C$zut){if(C$zut.IsLeaf()||C$zut.height<2)return C$zut;var C$zue=verify(C$zut.child1);var C$zui=verify(C$zut.child2);var C$zur=C$zui.height-C$zue.height;return 1<C$zur?(C$zun=verify(C$zui.child1),C$zua=verify(C$zui.child2),C$zui.child1=C$zut,C$zui.parent=C$zut.parent,null!==(C$zut.parent=C$zui).parent?C$zui.parent.child1===C$zut?C$zui.parent.child1=C$zui:C$zui.parent.child2=C$zui:this.m_root=C$zui,C$zun.height>C$zua.height?(C$zui.child2=C$zun,((C$zut.child2=C$zua).parent=C$zut).aabb.Combine2(C$zue.aabb,C$zua.aabb),C$zui.aabb.Combine2(C$zut.aabb,C$zun.aabb),C$zut.height=1+C$zuL(C$zue.height,C$zua.height),C$zui.height=1+C$zuL(C$zut.height,C$zun.height)):(C$zui.child2=C$zua,((C$zut.child2=C$zun).parent=C$zut).aabb.Combine2(C$zue.aabb,C$zun.aabb),C$zui.aabb.Combine2(C$zut.aabb,C$zua.aabb),C$zut.height=1+C$zuL(C$zue.height,C$zun.height),C$zui.height=1+C$zuL(C$zut.height,C$zua.height)),C$zui):C$zur<-1?(C$zun=verify(C$zue.child1),C$zua=verify(C$zue.child2),C$zue.child1=C$zut,C$zue.parent=C$zut.parent,null!==(C$zut.parent=C$zue).parent?C$zue.parent.child1===C$zut?C$zue.parent.child1=C$zue:C$zue.parent.child2=C$zue:this.m_root=C$zue,C$zun.height>C$zua.height?(C$zue.child2=C$zun,((C$zut.child1=C$zua).parent=C$zut).aabb.Combine2(C$zui.aabb,C$zua.aabb),C$zue.aabb.Combine2(C$zut.aabb,C$zun.aabb),C$zut.height=1+C$zuL(C$zui.height,C$zua.height),C$zue.height=1+C$zuL(C$zut.height,C$zun.height)):(C$zue.child2=C$zua,((C$zut.child1=C$zun).parent=C$zut).aabb.Combine2(C$zui.aabb,C$zun.aabb),C$zue.aabb.Combine2(C$zut.aabb,C$zua.aabb),C$zut.height=1+C$zuL(C$zui.height,C$zun.height),C$zue.height=1+C$zuL(C$zut.height,C$zua.height)),C$zue):C$zut;var C$zun,C$zua},b2DynamicTree.prototype.GetHeight=function(){return null===this.m_root?0:this.m_root.height},b2DynamicTree.GetAreaNode=function(C$zut){if(null===C$zut)return 0;if(C$zut.IsLeaf())return 0;var C$zue=C$zut.aabb.GetPerimeter();return(C$zue+=b2DynamicTree.GetAreaNode(C$zut.child1))+b2DynamicTree.GetAreaNode(C$zut.child2)},b2DynamicTree.prototype.GetAreaRatio=function(){if(null===this.m_root)return 0;var C$zut=this.m_root.aabb.GetPerimeter();return b2DynamicTree.GetAreaNode(this.m_root)/C$zut},b2DynamicTree.prototype.ComputeHeightNode=function(C$zut){if(!C$zut||C$zut.IsLeaf())return 0;var C$zue=this.ComputeHeightNode(C$zut.child1);C$zut=this.ComputeHeightNode(C$zut.child2);return 1+C$zuL(C$zue,C$zut)},b2DynamicTree.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)},b2DynamicTree.prototype.ValidateStructure=function(C$zut){var C$zue;null!==C$zut&&(this.m_root,(C$zut=C$zut).IsLeaf()||(C$zue=verify(C$zut.child1),C$zut=verify(C$zut.child2),this.ValidateStructure(C$zue),this.ValidateStructure(C$zut)))},b2DynamicTree.prototype.ValidateMetrics=function(C$zut){var C$zue;null!==C$zut&&((C$zut=C$zut).IsLeaf()||(C$zue=verify(C$zut.child1),C$zut=verify(C$zut.child2),b2DynamicTree.s_aabb.Combine2(C$zue.aabb,C$zut.aabb),this.ValidateMetrics(C$zue),this.ValidateMetrics(C$zut)))},b2DynamicTree.prototype.Validate=function(){},b2DynamicTree.GetMaxBalanceNode=function(C$zut,C$zue){if(null===C$zut)return C$zue;if(C$zut.height<=1)return C$zue;var C$zui=verify(C$zut.child1);C$zut=verify(C$zut.child2);C$zut=C$zuM(C$zut.height-C$zui.height);return C$zuL(C$zue,C$zut)},b2DynamicTree.prototype.GetMaxBalance=function(){return b2DynamicTree.GetMaxBalanceNode(this.m_root,0)},b2DynamicTree.prototype.RebuildBottomUp=function(){this.Validate()},b2DynamicTree.ShiftOriginNode=function(C$zut,C$zue){var C$zui,C$zur;null!==C$zut&&(C$zut.height<=1||(C$zui=C$zut.child1,C$zur=C$zut.child2,b2DynamicTree.ShiftOriginNode(C$zui,C$zue),b2DynamicTree.ShiftOriginNode(C$zur,C$zue),C$zut.aabb.lowerBound.SelfSub(C$zue),C$zut.aabb.upperBound.SelfSub(C$zue)))},b2DynamicTree.prototype.ShiftOrigin=function(C$zut){b2DynamicTree.ShiftOriginNode(this.m_root,C$zut)},b2DynamicTree.s_r=new C$zuj,b2DynamicTree.s_v=new C$zuj,b2DynamicTree.s_abs_v=new C$zuj,b2DynamicTree.s_segmentAABB=new C$zu_t,b2DynamicTree.s_subInput=new C$zuht,b2DynamicTree.s_combinedAABB=new C$zu_t,b2DynamicTree.s_aabb=new C$zu_t,b2DynamicTree.s_node_id=0;var C$zuvt=b2DynamicTree;function b2DynamicTree(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0,this.m_stack=new C$zux(256)}var C$zuyt=function(C$zut,C$zue){this.proxyA=C$zut,this.proxyB=C$zue};b2BroadPhase.prototype.CreateProxy=function(C$zut,C$zue){C$zut=this.m_tree.CreateProxy(C$zut,C$zue);return++this.m_proxyCount,this.BufferMove(C$zut),C$zut},b2BroadPhase.prototype.DestroyProxy=function(C$zut){this.UnBufferMove(C$zut),--this.m_proxyCount,this.m_tree.DestroyProxy(C$zut)},b2BroadPhase.prototype.MoveProxy=function(C$zut,C$zue,C$zui){this.m_tree.MoveProxy(C$zut,C$zue,C$zui)&&this.BufferMove(C$zut)},b2BroadPhase.prototype.TouchProxy=function(C$zut){this.BufferMove(C$zut)},b2BroadPhase.prototype.GetProxyCount=function(){return this.m_proxyCount},b2BroadPhase.prototype.UpdatePairs=function(C$zut){var C$zun=this;this.m_pairCount=0;var C$zue=this;for(var C$zui=0;C$zui<this.m_moveCount;++C$zui)!function(C$zut){var C$zur=C$zue.m_moveBuffer[C$zut];if(null===C$zur)return;C$zut=C$zur.aabb;C$zue.m_tree.Query(C$zut,function(C$zut){return C$zut.m_id===C$zur.m_id||(C$zut=C$zut.m_id<C$zur.m_id?(C$zue=C$zut,C$zur):(C$zue=C$zur,C$zut),C$zun.m_pairCount===C$zun.m_pairBuffer.length?C$zun.m_pairBuffer[C$zun.m_pairCount]=new C$zuyt(C$zue,C$zut):((C$zui=C$zun.m_pairBuffer[C$zun.m_pairCount]).proxyA=C$zue,C$zui.proxyB=C$zut),++C$zun.m_pairCount),!0;var C$zue;var C$zui})}(C$zui);this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(b2PairLessThan);var C$zur=0;for(;C$zur<this.m_pairCount;){var C$zua=this.m_pairBuffer[C$zur];var C$zuo=C$zua.proxyA.userData;var C$zus=C$zua.proxyB.userData;for(C$zuo&&C$zus&&C$zut(C$zuo,C$zus),++C$zur;C$zur<this.m_pairCount;){var C$zuc=this.m_pairBuffer[C$zur];if(C$zuc.proxyA.m_id!==C$zua.proxyA.m_id||C$zuc.proxyB.m_id!==C$zua.proxyB.m_id)break;++C$zur}}},b2BroadPhase.prototype.Query=function(C$zut,C$zue){this.m_tree.Query(C$zut,C$zue)},b2BroadPhase.prototype.QueryPoint=function(C$zut,C$zue){this.m_tree.QueryPoint(C$zut,C$zue)},b2BroadPhase.prototype.RayCast=function(C$zut,C$zue){this.m_tree.RayCast(C$zut,C$zue)},b2BroadPhase.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()},b2BroadPhase.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()},b2BroadPhase.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()},b2BroadPhase.prototype.ShiftOrigin=function(C$zut){this.m_tree.ShiftOrigin(C$zut)},b2BroadPhase.prototype.BufferMove=function(C$zut){this.m_moveBuffer[this.m_moveCount]=C$zut,++this.m_moveCount},b2BroadPhase.prototype.UnBufferMove=function(C$zut){C$zut=this.m_moveBuffer.indexOf(C$zut);this.m_moveBuffer[C$zut]=null};var C$zugt=b2BroadPhase;function b2BroadPhase(){this.m_tree=new C$zuvt,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}function b2PairLessThan(C$zut,C$zue){return C$zut.proxyA.m_id===C$zue.proxyA.m_id?C$zut.proxyB.m_id-C$zue.proxyB.m_id:C$zut.proxyA.m_id-C$zue.proxyA.m_id}C$zuH.b2_toiTime=0,C$zuH.b2_toiMaxTime=0,C$zuH.b2_toiCalls=0,C$zuH.b2_toiIters=0,C$zuH.b2_toiMaxIters=0,C$zuH.b2_toiRootIters=0,C$zuH.b2_toiMaxRootIters=0;var C$zubt=new C$zuI;var C$zuCt=new C$zuI;var C$zuxt=new C$zuj;var C$zuAt=new C$zuj;var C$zuSt=new C$zuj;var C$zuTt=new C$zuj;var C$zuwt=new C$zuj;var C$zuEt=function(){this.proxyA=new C$zuA,this.proxyB=new C$zuA,this.sweepA=new C$zu_,this.sweepB=new C$zu_,this.tMax=0};(C$zuPt=C$zuH.b2TOIOutputState||(C$zuH.b2TOIOutputState={}))[C$zuPt.e_unknown=0]="e_unknown",C$zuPt[C$zuPt.e_failed=1]="e_failed",C$zuPt[C$zuPt.e_overlapped=2]="e_overlapped",C$zuPt[C$zuPt.e_touching=3]="e_touching",C$zuPt[C$zuPt.e_separated=4]="e_separated";var C$zuPt=function(){this.state=C$zuH.b2TOIOutputState.e_unknown,this.t=0};(C$zuMt=C$zuH.b2SeparationFunctionType||(C$zuH.b2SeparationFunctionType={}))[C$zuMt.e_unknown=-1]="e_unknown",C$zuMt[C$zuMt.e_points=0]="e_points",C$zuMt[C$zuMt.e_faceA=1]="e_faceA",C$zuMt[C$zuMt.e_faceB=2]="e_faceB";b2SeparationFunction.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua){this.m_proxyA=C$zue,this.m_proxyB=C$zur;C$zue=C$zut.count;this.m_sweepA.Copy(C$zui),this.m_sweepB.Copy(C$zun);C$zur=C$zubt;C$zui=C$zuCt;if(this.m_sweepA.GetTransform(C$zur,C$zua),this.m_sweepB.GetTransform(C$zui,C$zua),1===C$zue)return this.m_type=C$zuH.b2SeparationFunctionType.e_points,C$zuo=this.m_proxyA.GetVertex(C$zut.indexA[0]),C$zuu=this.m_proxyB.GetVertex(C$zut.indexB[0]),C$zus=C$zuI.MulXV(C$zur,C$zuo,C$zuxt),C$zuc=C$zuI.MulXV(C$zui,C$zuu,C$zuAt),C$zuj.SubVV(C$zuc,C$zus,this.m_axis),C$zul=this.m_axis.Normalize(),this.m_localPoint.SetZero(),C$zul;var C$zuo;if(C$zut.indexA[0]===C$zut.indexA[1])return this.m_type=C$zuH.b2SeparationFunctionType.e_faceB,C$zun=this.m_proxyB.GetVertex(C$zut.indexB[0]),C$zua=this.m_proxyB.GetVertex(C$zut.indexB[1]),C$zuj.CrossVOne(C$zuj.SubVV(C$zua,C$zun,C$zuj.s_t0),this.m_axis).SelfNormalize(),C$zuh=C$zuR.MulRV(C$zui.q,this.m_axis,C$zuSt),C$zuj.MidVV(C$zun,C$zua,this.m_localPoint),C$zuc=C$zuI.MulXV(C$zui,this.m_localPoint,C$zuAt),C$zuo=this.m_proxyA.GetVertex(C$zut.indexA[0]),C$zus=C$zuI.MulXV(C$zur,C$zuo,C$zuxt),(C$zul=C$zuj.DotVV(C$zuj.SubVV(C$zus,C$zuc,C$zuj.s_t0),C$zuh))<0&&(this.m_axis.SelfNeg(),C$zul=-C$zul),C$zul;this.m_type=C$zuH.b2SeparationFunctionType.e_faceA;C$zue=this.m_proxyA.GetVertex(C$zut.indexA[0]);C$zun=this.m_proxyA.GetVertex(C$zut.indexA[1]);C$zuj.CrossVOne(C$zuj.SubVV(C$zun,C$zue,C$zuj.s_t0),this.m_axis).SelfNormalize();var C$zuh=C$zuR.MulRV(C$zur.q,this.m_axis,C$zuSt);C$zuj.MidVV(C$zue,C$zun,this.m_localPoint);var C$zus=C$zuI.MulXV(C$zur,this.m_localPoint,C$zuxt);var C$zuu=this.m_proxyB.GetVertex(C$zut.indexB[0]);var C$zuc=C$zuI.MulXV(C$zui,C$zuu,C$zuAt);var C$zul;return(C$zul=C$zuj.DotVV(C$zuj.SubVV(C$zuc,C$zus,C$zuj.s_t0),C$zuh))<0&&(this.m_axis.SelfNeg(),C$zul=-C$zul),C$zul},b2SeparationFunction.prototype.FindMinSeparation=function(C$zut,C$zue,C$zuh){var C$zui=C$zubt;var C$zur=C$zuCt;switch(this.m_sweepA.GetTransform(C$zui,C$zuh),this.m_sweepB.GetTransform(C$zur,C$zuh),this.m_type){case C$zuH.b2SeparationFunctionType.e_points:var C$zun=C$zuR.MulTRV(C$zui.q,this.m_axis,C$zuTt);var C$zua=C$zuR.MulTRV(C$zur.q,C$zuj.NegV(this.m_axis,C$zuj.s_t0),C$zuwt);C$zut[0]=this.m_proxyA.GetSupport(C$zun),C$zue[0]=this.m_proxyB.GetSupport(C$zua);var C$zuo=this.m_proxyA.GetVertex(C$zut[0]);var C$zuu=this.m_proxyB.GetVertex(C$zue[0]);var C$zus=C$zuI.MulXV(C$zui,C$zuo,C$zuxt);var C$zuc=C$zuI.MulXV(C$zur,C$zuu,C$zuAt);return C$zuj.DotVV(C$zuj.SubVV(C$zuc,C$zus,C$zuj.s_t0),this.m_axis);case C$zuH.b2SeparationFunctionType.e_faceA:var C$zul=C$zuR.MulRV(C$zui.q,this.m_axis,C$zuSt);C$zus=C$zuI.MulXV(C$zui,this.m_localPoint,C$zuxt);C$zua=C$zuR.MulTRV(C$zur.q,C$zuj.NegV(C$zul,C$zuj.s_t0),C$zuwt);C$zut[0]=-1,C$zue[0]=this.m_proxyB.GetSupport(C$zua);C$zuu=this.m_proxyB.GetVertex(C$zue[0]);C$zuc=C$zuI.MulXV(C$zur,C$zuu,C$zuAt);return C$zuj.DotVV(C$zuj.SubVV(C$zuc,C$zus,C$zuj.s_t0),C$zul);case C$zuH.b2SeparationFunctionType.e_faceB:C$zul=C$zuR.MulRV(C$zur.q,this.m_axis,C$zuSt);C$zuc=C$zuI.MulXV(C$zur,this.m_localPoint,C$zuAt);C$zun=C$zuR.MulTRV(C$zui.q,C$zuj.NegV(C$zul,C$zuj.s_t0),C$zuTt);C$zue[0]=-1,C$zut[0]=this.m_proxyA.GetSupport(C$zun);C$zuo=this.m_proxyA.GetVertex(C$zut[0]);C$zus=C$zuI.MulXV(C$zui,C$zuo,C$zuxt);return C$zuj.DotVV(C$zuj.SubVV(C$zus,C$zuc,C$zuj.s_t0),C$zul);default:return C$zut[0]=-1,C$zue[0]=-1,0}},b2SeparationFunction.prototype.Evaluate=function(C$zut,C$zue,C$zui){var C$zur=C$zubt;var C$zun=C$zuCt;switch(this.m_sweepA.GetTransform(C$zur,C$zui),this.m_sweepB.GetTransform(C$zun,C$zui),this.m_type){case C$zuH.b2SeparationFunctionType.e_points:var C$zua=this.m_proxyA.GetVertex(C$zut);var C$zuo=this.m_proxyB.GetVertex(C$zue);var C$zus=C$zuI.MulXV(C$zur,C$zua,C$zuxt);var C$zuc=C$zuI.MulXV(C$zun,C$zuo,C$zuAt);return C$zuj.DotVV(C$zuj.SubVV(C$zuc,C$zus,C$zuj.s_t0),this.m_axis);case C$zuH.b2SeparationFunctionType.e_faceA:var C$zul=C$zuR.MulRV(C$zur.q,this.m_axis,C$zuSt);C$zus=C$zuI.MulXV(C$zur,this.m_localPoint,C$zuxt);C$zuo=this.m_proxyB.GetVertex(C$zue);C$zuc=C$zuI.MulXV(C$zun,C$zuo,C$zuAt);return C$zuj.DotVV(C$zuj.SubVV(C$zuc,C$zus,C$zuj.s_t0),C$zul);case C$zuH.b2SeparationFunctionType.e_faceB:C$zul=C$zuR.MulRV(C$zun.q,this.m_axis,C$zuSt);C$zuc=C$zuI.MulXV(C$zun,this.m_localPoint,C$zuAt);C$zua=this.m_proxyA.GetVertex(C$zut);C$zus=C$zuI.MulXV(C$zur,C$zua,C$zuxt);return C$zuj.DotVV(C$zuj.SubVV(C$zus,C$zuc,C$zuj.s_t0),C$zul);default:return 0}};var C$zuMt=b2SeparationFunction;function b2SeparationFunction(){this.m_sweepA=new C$zu_,this.m_sweepB=new C$zu_,this.m_type=C$zuH.b2SeparationFunctionType.e_unknown,this.m_localPoint=new C$zuj,this.m_axis=new C$zuj}var C$zuRt=new C$zub;var C$zuIt=new C$zuw;var C$zuBt=new C$zuV;var C$zuDt=new C$zuO;var C$zuLt=new C$zuMt;var C$zuVt=[0];var C$zuOt=[0];var C$zuFt=new C$zu_;var C$zuNt=new C$zu_;function b2TimeOfImpact(C$zut,C$zue){var C$zuh=C$zuRt.Reset();++C$zuH.b2_toiCalls,C$zut.state=C$zuH.b2TOIOutputState.e_unknown,C$zut.t=C$zue.tMax;var C$zuu=C$zue.proxyA;var C$zu_=C$zue.proxyB;var C$zud=C$zuFt.Copy(C$zue.sweepA);var C$zuf=C$zuNt.Copy(C$zue.sweepB);C$zud.Normalize(),C$zuf.Normalize();var C$zup=C$zue.tMax;var C$zui=C$zuu.m_radius+C$zu_.m_radius;var C$zur=C$zuL(.008,C$zui-.024);var C$zun=0;var C$zum=0;var C$zuv=C$zuIt;C$zuv.count=0;var C$zua=C$zuBt;for(C$zua.proxyA.Copy(C$zue.proxyA),C$zua.proxyB.Copy(C$zue.proxyB),C$zua.useRadii=!1;;){var C$zuo=C$zubt;var C$zuy=C$zuCt;C$zud.GetTransform(C$zuo,C$zun),C$zuf.GetTransform(C$zuy,C$zun),C$zua.transformA.Copy(C$zuo),C$zua.transformB.Copy(C$zuy);C$zuo=C$zuDt;if(b2Distance(C$zuo,C$zuv,C$zua),C$zuo.distance<=0){C$zut.state=C$zuH.b2TOIOutputState.e_overlapped,C$zut.t=0;break}if(C$zuo.distance<C$zur+.002){C$zut.state=C$zuH.b2TOIOutputState.e_touching,C$zut.t=C$zun;break}var C$zus=C$zuLt;C$zus.Initialize(C$zuv,C$zuu,C$zud,C$zu_,C$zuf,C$zun);var C$zug=!1;var C$zub=C$zup;var C$zuC=0;for(;;){var C$zux=C$zuVt;var C$zuA=C$zuOt;var C$zuS=C$zus.FindMinSeparation(C$zux,C$zuA,C$zub);if(C$zur+.002<C$zuS){C$zut.state=C$zuH.b2TOIOutputState.e_separated,C$zut.t=C$zup,C$zug=!0;break}if(C$zur-.002<C$zuS){C$zun=C$zub;break}var C$zuc=C$zus.Evaluate(C$zux[0],C$zuA[0],C$zun);if(C$zuc<C$zur-.002){C$zut.state=C$zuH.b2TOIOutputState.e_failed,C$zut.t=C$zun,C$zug=!0;break}if(C$zuc<=C$zur+.002){C$zut.state=C$zuH.b2TOIOutputState.e_touching,C$zut.t=C$zun,C$zug=!0;break}var C$zuT=0;var C$zuw=C$zun;var C$zuE=C$zub;for(;;){var C$zul;C$zul=1&C$zuT?C$zuw+(C$zur-C$zuc)*(C$zuE-C$zuw)/(C$zuS-C$zuc):.5*(C$zuw+C$zuE),++C$zuT,++C$zuH.b2_toiRootIters;var C$zuP=C$zus.Evaluate(C$zux[0],C$zuA[0],C$zul);if(C$zuM(C$zuP-C$zur)<.002){C$zub=C$zul;break}if(C$zur<C$zuP?(C$zuw=C$zul,C$zuc=C$zuP):(C$zuE=C$zul,C$zuS=C$zuP),50===C$zuT)break}if(C$zuH.b2_toiMaxRootIters=C$zuL(C$zuH.b2_toiMaxRootIters,C$zuT),8===++C$zuC)break}if(++C$zum,++C$zuH.b2_toiIters,C$zug)break;if(20===C$zum){C$zut.state=C$zuH.b2TOIOutputState.e_failed,C$zut.t=C$zun;break}}C$zuH.b2_toiMaxIters=C$zuL(C$zuH.b2_toiMaxIters,C$zum);C$zui=C$zuh.GetMilliseconds();C$zuH.b2_toiMaxTime=C$zuL(C$zuH.b2_toiMaxTime,C$zui),C$zuH.b2_toiTime+=C$zui}var C$zukt=new C$zuj;var C$zuzt=new C$zuj;function b2CollideCircles(C$zut,C$zue,C$zui,C$zur,C$zun){C$zut.pointCount=0;C$zui=C$zuI.MulXV(C$zui,C$zue.m_p,C$zukt);C$zun=C$zuI.MulXV(C$zun,C$zur.m_p,C$zuzt);C$zui=C$zuj.DistanceSquaredVV(C$zui,C$zun);C$zun=C$zue.m_radius+C$zur.m_radius;C$zun*C$zun<C$zui||(C$zut.type=C$zuH.b2ManifoldType.e_circles,C$zut.localPoint.Copy(C$zue.m_p),C$zut.localNormal.SetZero(),C$zut.pointCount=1,C$zut.points[0].localPoint.Copy(C$zur.m_p),C$zut.points[0].id.key=0)}var C$zuGt=new C$zuj;var C$zuUt=new C$zuj;var C$zuWt=new C$zuj;function b2CollidePolygonAndCircle(C$zut,C$zue,C$zui,C$zur,C$zun){C$zut.pointCount=0;C$zun=C$zuI.MulXV(C$zun,C$zur.m_p,C$zuGt);var C$zua=C$zuI.MulTXV(C$zui,C$zun,C$zuUt);var C$zuh=0;var C$zuu=-C$zuB;var C$zuo=C$zue.m_radius+C$zur.m_radius;var C$zu_=C$zue.m_count;var C$zud=C$zue.m_vertices;var C$zus=C$zue.m_normals;for(var C$zuc=0;C$zuc<C$zu_;++C$zuc){var C$zuf=C$zuj.DotVV(C$zus[C$zuc],C$zuj.SubVV(C$zua,C$zud[C$zuc],C$zuj.s_t0));if(C$zuo<C$zuf)return;C$zuu<C$zuf&&(C$zuu=C$zuf,C$zuh=C$zuc)}C$zui=C$zuh;C$zun=C$zud[C$zui];C$zue=C$zud[(C$zui+1)%C$zu_];if(C$zuu<C$zuE)return C$zut.pointCount=1,C$zut.type=C$zuH.b2ManifoldType.e_faceA,C$zut.localNormal.Copy(C$zus[C$zuh]),C$zuj.MidVV(C$zun,C$zue,C$zut.localPoint),C$zut.points[0].localPoint.Copy(C$zur.m_p),void(C$zut.points[0].id.key=0);var C$zul=C$zuj.DotVV(C$zuj.SubVV(C$zua,C$zun,C$zuj.s_t0),C$zuj.SubVV(C$zue,C$zun,C$zuj.s_t1));var C$zup=C$zuj.DotVV(C$zuj.SubVV(C$zua,C$zue,C$zuj.s_t0),C$zuj.SubVV(C$zun,C$zue,C$zuj.s_t1));C$zul<=0?C$zuj.DistanceSquaredVV(C$zua,C$zun)>C$zuo*C$zuo||(C$zut.pointCount=1,C$zut.type=C$zuH.b2ManifoldType.e_faceA,C$zuj.SubVV(C$zua,C$zun,C$zut.localNormal).SelfNormalize(),C$zut.localPoint.Copy(C$zun),C$zut.points[0].localPoint.Copy(C$zur.m_p),C$zut.points[0].id.key=0):C$zup<=0?C$zuj.DistanceSquaredVV(C$zua,C$zue)>C$zuo*C$zuo||(C$zut.pointCount=1,C$zut.type=C$zuH.b2ManifoldType.e_faceA,C$zuj.SubVV(C$zua,C$zue,C$zut.localNormal).SelfNormalize(),C$zut.localPoint.Copy(C$zue),C$zut.points[0].localPoint.Copy(C$zur.m_p),C$zut.points[0].id.key=0):(C$zul=C$zuj.MidVV(C$zun,C$zue,C$zuWt),C$zuo<C$zuj.DotVV(C$zuj.SubVV(C$zua,C$zul,C$zuj.s_t1),C$zus[C$zui])||(C$zut.pointCount=1,C$zut.type=C$zuH.b2ManifoldType.e_faceA,C$zut.localNormal.Copy(C$zus[C$zui]).SelfNormalize(),C$zut.localPoint.Copy(C$zul),C$zut.points[0].localPoint.Copy(C$zur.m_p),C$zut.points[0].id.key=0))}var C$zuHt=new C$zuj;var C$zujt=new C$zuj;var C$zuXt=new C$zuj;var C$zuqt=new C$zuj;function b2EdgeSeparation(C$zut,C$zue,C$zui,C$zur,C$zun){var C$zuh=C$zut.m_vertices;C$zut=C$zut.m_normals;var C$zuu=C$zur.m_count;var C$zua=C$zur.m_vertices;C$zur=C$zuR.MulRV(C$zue.q,C$zut[C$zui],C$zuHt);var C$zu_=C$zuR.MulTRV(C$zun.q,C$zur,C$zujt);var C$zuo=0;var C$zus=C$zuB;for(var C$zuc=0;C$zuc<C$zuu;++C$zuc){var C$zul=C$zuj.DotVV(C$zua[C$zuc],C$zu_);C$zul<C$zus&&(C$zus=C$zul,C$zuo=C$zuc)}C$zut=C$zuI.MulXV(C$zue,C$zuh[C$zui],C$zuXt);C$zue=C$zuI.MulXV(C$zun,C$zua[C$zuo],C$zuqt);return C$zuj.DotVV(C$zuj.SubVV(C$zue,C$zut,C$zuj.s_t0),C$zur)}var C$zuJt=new C$zuj;var C$zuYt=new C$zuj;function b2FindMaxSeparation(C$zuh,C$zut,C$zue,C$zui,C$zur){var C$zun=C$zut.m_count;var C$zuu=C$zut.m_normals;var C$zua=C$zuj.SubVV(C$zuI.MulXV(C$zur,C$zui.m_centroid,C$zuj.s_t0),C$zuI.MulXV(C$zue,C$zut.m_centroid,C$zuj.s_t1),C$zuJt);var C$zu_=C$zuR.MulTRV(C$zue.q,C$zua,C$zuYt);var C$zuo=0;var C$zud=-C$zuB;for(var C$zuf=0;C$zuf<C$zun;++C$zuf){var C$zup=C$zuj.DotVV(C$zuu[C$zuf],C$zu_);C$zud<C$zup&&(C$zud=C$zup,C$zuo=C$zuf)}var C$zus=b2EdgeSeparation(C$zut,C$zue,C$zuo,C$zui,C$zur);C$zua=(C$zuo+C$zun-1)%C$zun;var C$zum=b2EdgeSeparation(C$zut,C$zue,C$zua,C$zui,C$zur);var C$zuv=(C$zuo+1)%C$zun;var C$zuy=b2EdgeSeparation(C$zut,C$zue,C$zuv,C$zui,C$zur);var C$zuc=0;var C$zul=0;var C$zug=0;if(C$zus<C$zum&&C$zuy<C$zum)C$zug=-1,C$zuc=C$zua,C$zul=C$zum;else{if(!(C$zus<C$zuy))return C$zuh[0]=C$zuo,C$zus;C$zug=1,C$zuc=C$zuv,C$zul=C$zuy}for(;;){if(!(C$zul<(C$zus=b2EdgeSeparation(C$zut,C$zue,C$zuo=-1===C$zug?(C$zuc+C$zun-1)%C$zun:(C$zuc+1)%C$zun,C$zui,C$zur))))break;C$zuc=C$zuo,C$zul=C$zus}return C$zuh[0]=C$zuc,C$zul}var C$zu$t=new C$zuj;var C$zuZt=C$zult.MakeArray(2);var C$zuQt=C$zult.MakeArray(2);var C$zuKt=C$zult.MakeArray(2);var C$zute=[0];var C$zuee=[0];var C$zuie=new C$zuj;var C$zure=new C$zuj;var C$zune=new C$zuj;var C$zuae=new C$zuj;var C$zuoe=new C$zuj;var C$zuse=new C$zuj;var C$zuce=new C$zuj;var C$zule=new C$zuj;function b2CollidePolygons(C$zuh,C$zut,C$zue,C$zui,C$zur){C$zuh.pointCount=0;var C$zuu=C$zut.m_radius+C$zui.m_radius;var C$zun=C$zute;C$zun[0]=0;var C$zu_=b2FindMaxSeparation(C$zun,C$zut,C$zue,C$zui,C$zur);if(!(C$zuu<C$zu_)){var C$zua=C$zuee;C$zua[0]=0;var C$zuo=b2FindMaxSeparation(C$zua,C$zui,C$zur,C$zut,C$zue);if(!(C$zuu<C$zuo)){var C$zud;var C$zus=0;var C$zuf=0;C$zuf=.98*C$zu_+.001<C$zuo?(C$zuA=C$zui,C$zux=C$zut,C$zuc=C$zur,C$zud=C$zue,C$zus=C$zua[0],C$zuh.type=C$zuH.b2ManifoldType.e_faceB,1):(C$zuA=C$zut,C$zux=C$zui,C$zuc=C$zue,C$zud=C$zur,C$zus=C$zun[0],C$zuh.type=C$zuH.b2ManifoldType.e_faceA,0);C$zu_=C$zuZt;C$zuo=C$zu_;C$zua=C$zuA;C$zut=C$zuc;C$zui=C$zus;C$zue=C$zux;C$zur=C$zud;C$zua=C$zua.m_normals;var C$zup=C$zue.m_count;C$zun=C$zue.m_vertices;var C$zum=C$zue.m_normals;var C$zuv=C$zuR.MulTRV(C$zur.q,C$zuR.MulRV(C$zut.q,C$zua[C$zui],C$zuj.s_t0),C$zu$t);var C$zuy=0;var C$zug=C$zuB;for(var C$zub=0;C$zub<C$zup;++C$zub){var C$zuC=C$zuj.DotVV(C$zuv,C$zum[C$zub]);C$zuC<C$zug&&(C$zug=C$zuC,C$zuy=C$zub)}C$zut=((C$zue=C$zuy)+1)%C$zup,C$zua=C$zuo[0],C$zuI.MulXV(C$zur,C$zun[C$zue],C$zua.v),(C$zua=C$zua.id.cf).indexA=C$zui,C$zua.indexB=C$zue,C$zua.typeA=C$zuH.b2ContactFeatureType.e_face,C$zua.typeB=C$zuH.b2ContactFeatureType.e_vertex,C$zue=C$zuo[1],C$zuI.MulXV(C$zur,C$zun[C$zut],C$zue.v),(C$zua=C$zue.id.cf).indexA=C$zui,C$zua.indexB=C$zut,C$zua.typeA=C$zuH.b2ContactFeatureType.e_face,C$zua.typeB=C$zuH.b2ContactFeatureType.e_vertex;var C$zux=C$zuA.m_count;C$zuo=C$zuA.m_vertices;C$zur=C$zus;C$zun=(C$zus+1)%C$zux;C$zue=C$zuo[C$zur];C$zui=C$zuo[C$zun];C$zut=C$zuj.SubVV(C$zui,C$zue,C$zuie);C$zut.Normalize();C$zua=C$zuj.CrossVOne(C$zut,C$zure);var C$zuA=C$zuj.MidVV(C$zue,C$zui,C$zune);C$zus=C$zuR.MulRV(C$zuc.q,C$zut,C$zuoe);var C$zuS=C$zuj.CrossVOne(C$zus,C$zuae);C$zux=C$zuI.MulXV(C$zuc,C$zue,C$zuce);C$zuo=C$zuI.MulXV(C$zuc,C$zui,C$zule);var C$zuT=C$zuj.DotVV(C$zuS,C$zux);C$zut=-C$zuj.DotVV(C$zus,C$zux)+C$zuu;C$zue=C$zuj.DotVV(C$zus,C$zuo)+C$zuu;var C$zuc=C$zuQt;var C$zuw=C$zuKt;C$zui=C$zuj.NegV(C$zus,C$zuse);if(!(b2ClipSegmentToLine(C$zuc,C$zu_,C$zui,C$zut,C$zur)<2||b2ClipSegmentToLine(C$zuw,C$zuc,C$zus,C$zue,C$zun)<2)){C$zuh.localNormal.Copy(C$zua),C$zuh.localPoint.Copy(C$zuA);var C$zuE=0;for(var C$zuP=0;C$zuP<2;++C$zuP){var C$zul=C$zuw[C$zuP];var C$zuM;C$zuj.DotVV(C$zuS,C$zul.v)-C$zuT<=C$zuu&&(C$zuM=C$zuh.points[C$zuE],C$zuI.MulTXV(C$zud,C$zul.v,C$zuM.localPoint),C$zuM.id.Copy(C$zul.id),C$zuf&&(C$zul=C$zuM.id.cf,C$zuM.id.cf.indexA=C$zul.indexB,C$zuM.id.cf.indexB=C$zul.indexA,C$zuM.id.cf.typeA=C$zul.typeB,C$zuM.id.cf.typeB=C$zul.typeA),++C$zuE)}C$zuh.pointCount=C$zuE}}}}var C$zuhe=new C$zuj;var C$zuue=new C$zuj;var C$zu_e=new C$zuj;var C$zude=new C$zuj;var C$zufe=new C$zuj;var C$zupe=new C$zuj;var C$zume=new C$zuj;var C$zuve=new C$zuat;function b2CollideEdgeAndCircle(C$zut,C$zue,C$zui,C$zuh,C$zur){C$zut.pointCount=0;C$zui=C$zuI.MulTXV(C$zui,C$zuI.MulXV(C$zur,C$zuh.m_p,C$zuj.s_t0),C$zuhe);C$zur=C$zue.m_vertex1;var C$zun=C$zue.m_vertex2;var C$zua=C$zuj.SubVV(C$zun,C$zur,C$zuue);var C$zuu=C$zuj.DotVV(C$zua,C$zuj.SubVV(C$zun,C$zui,C$zuj.s_t0));var C$zu_=C$zuj.DotVV(C$zua,C$zuj.SubVV(C$zui,C$zur,C$zuj.s_t0));var C$zud=C$zue.m_radius+C$zuh.m_radius;var C$zuo=C$zuve;if(C$zuo.cf.indexB=0,C$zuo.cf.typeB=C$zuH.b2ContactFeatureType.e_vertex,C$zu_<=0){var C$zus=C$zur;var C$zuc=C$zuj.SubVV(C$zui,C$zus,C$zu_e);if(C$zud*C$zud<C$zuj.DotVV(C$zuc,C$zuc))return;if(C$zue.m_hasVertex0){C$zuc=C$zue.m_vertex0;var C$zul=C$zur;C$zuc=C$zuj.SubVV(C$zul,C$zuc,C$zude);if(0<C$zuj.DotVV(C$zuc,C$zuj.SubVV(C$zul,C$zui,C$zuj.s_t0)))return}return C$zuo.cf.indexA=0,C$zuo.cf.typeA=C$zuH.b2ContactFeatureType.e_vertex,C$zut.pointCount=1,C$zut.type=C$zuH.b2ManifoldType.e_circles,C$zut.localNormal.SetZero(),C$zut.localPoint.Copy(C$zus),C$zut.points[0].id.Copy(C$zuo),void C$zut.points[0].localPoint.Copy(C$zuh.m_p)}if(C$zuu<=0){C$zuc=C$zun;C$zul=C$zuj.SubVV(C$zui,C$zuc,C$zu_e);if(C$zud*C$zud<C$zuj.DotVV(C$zul,C$zul))return;if(C$zue.m_hasVertex3){C$zus=C$zue.m_vertex3;C$zul=C$zun;C$zue=C$zuj.SubVV(C$zus,C$zul,C$zufe);if(0<C$zuj.DotVV(C$zue,C$zuj.SubVV(C$zui,C$zul,C$zuj.s_t0)))return}return C$zuo.cf.indexA=1,C$zuo.cf.typeA=C$zuH.b2ContactFeatureType.e_vertex,C$zut.pointCount=1,C$zut.type=C$zuH.b2ManifoldType.e_circles,C$zut.localNormal.SetZero(),C$zut.localPoint.Copy(C$zuc),C$zut.points[0].id.Copy(C$zuo),void C$zut.points[0].localPoint.Copy(C$zuh.m_p)}C$zus=C$zuj.DotVV(C$zua,C$zua);C$zue=C$zupe;C$zue.x=1/C$zus*(C$zuu*C$zur.x+C$zu_*C$zun.x),C$zue.y=1/C$zus*(C$zuu*C$zur.y+C$zu_*C$zun.y);C$zul=C$zuj.SubVV(C$zui,C$zue,C$zu_e);C$zud*C$zud<C$zuj.DotVV(C$zul,C$zul)||(C$zuc=C$zume.Set(-C$zua.y,C$zua.x),C$zuj.DotVV(C$zuc,C$zuj.SubVV(C$zui,C$zur,C$zuj.s_t0))<0&&C$zuc.Set(-C$zuc.x,-C$zuc.y),C$zuc.Normalize(),C$zuo.cf.indexA=0,C$zuo.cf.typeA=C$zuH.b2ContactFeatureType.e_face,C$zut.pointCount=1,C$zut.type=C$zuH.b2ManifoldType.e_faceA,C$zut.localNormal.Copy(C$zuc),C$zut.localPoint.Copy(C$zur),C$zut.points[0].id.Copy(C$zuo),C$zut.points[0].localPoint.Copy(C$zuh.m_p))}var C$zuye=function(){this.type=0,this.index=0,this.separation=0};var C$zuge=function(){this.vertices=C$zuj.MakeArray(8),this.normals=C$zuj.MakeArray(8),this.count=0};var C$zube=function(){this.i1=0,this.i2=0,this.v1=new C$zuj,this.v2=new C$zuj,this.normal=new C$zuj,this.sideNormal1=new C$zuj,this.sideOffset1=0,this.sideNormal2=new C$zuj,this.sideOffset2=0};function b2EPCollider(){this.m_polygonB=new C$zuge,this.m_xf=new C$zuI,this.m_centroidB=new C$zuj,this.m_v0=new C$zuj,this.m_v1=new C$zuj,this.m_v2=new C$zuj,this.m_v3=new C$zuj,this.m_normal0=new C$zuj,this.m_normal1=new C$zuj,this.m_normal2=new C$zuj,this.m_normal=new C$zuj,this.m_type1=0,this.m_type2=0,this.m_lowerLimit=new C$zuj,this.m_upperLimit=new C$zuj,this.m_radius=0,this.m_front=!1}b2EPCollider.prototype.Collide=function(C$zut,C$zuh,C$zue,C$zuu,C$zu_){C$zuI.MulTXX(C$zue,C$zu_,this.m_xf),C$zuI.MulXV(this.m_xf,C$zuu.m_centroid,this.m_centroidB),this.m_v0.Copy(C$zuh.m_vertex0),this.m_v1.Copy(C$zuh.m_vertex1),this.m_v2.Copy(C$zuh.m_vertex2),this.m_v3.Copy(C$zuh.m_vertex3);C$zue=C$zuh.m_hasVertex0;C$zu_=C$zuh.m_hasVertex3;var C$zui=C$zuj.SubVV(this.m_v2,this.m_v1,b2EPCollider.s_edge1);C$zui.Normalize(),this.m_normal1.Set(C$zui.y,-C$zui.x);var C$zur=C$zuj.DotVV(this.m_normal1,C$zuj.SubVV(this.m_centroidB,this.m_v1,C$zuj.s_t0));var C$zun=0;var C$zud=0;var C$zuf=!1;var C$zup=!1;C$zue&&((C$zuo=C$zuj.SubVV(this.m_v1,this.m_v0,b2EPCollider.s_edge0)).Normalize(),this.m_normal0.Set(C$zuo.y,-C$zuo.x),C$zuf=0<=C$zuj.CrossVV(C$zuo,C$zui),C$zun=C$zuj.DotVV(this.m_normal0,C$zuj.SubVV(this.m_centroidB,this.m_v0,C$zuj.s_t0))),C$zu_&&((C$zuo=C$zuj.SubVV(this.m_v3,this.m_v2,b2EPCollider.s_edge2)).Normalize(),this.m_normal2.Set(C$zuo.y,-C$zuo.x),C$zup=0<C$zuj.CrossVV(C$zui,C$zuo),C$zud=C$zuj.DotVV(this.m_normal2,C$zuj.SubVV(this.m_centroidB,this.m_v2,C$zuj.s_t0))),C$zue&&C$zu_?C$zuf&&C$zup?(this.m_front=0<=C$zun||0<=C$zur||0<=C$zud,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):C$zuf?(this.m_front=0<=C$zun||0<=C$zur&&0<=C$zud,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):C$zup?(this.m_front=0<=C$zud||0<=C$zun&&0<=C$zur,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=0<=C$zun&&0<=C$zur&&0<=C$zud,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):C$zue?C$zuf?(this.m_front=0<=C$zun||0<=C$zur,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_front=0<=C$zun&&0<=C$zur,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):C$zu_?C$zup?(this.m_front=0<=C$zur||0<=C$zud,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=0<=C$zur&&0<=C$zud,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=C$zur,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=C$zuu.m_count;for(var C$zua=0;C$zua<C$zuu.m_count;++C$zua)C$zuI.MulXV(this.m_xf,C$zuu.m_vertices[C$zua],this.m_polygonB.vertices[C$zua]),C$zuR.MulRV(this.m_xf.q,C$zuu.m_normals[C$zua],this.m_polygonB.normals[C$zua]);this.m_radius=C$zuu.m_radius+C$zuh.m_radius,C$zut.pointCount=0;C$zui=this.ComputeEdgeSeparation(b2EPCollider.s_edgeAxis);if(0!==C$zui.type&&!(C$zui.separation>this.m_radius)){var C$zuo=this.ComputePolygonSeparation(b2EPCollider.s_polygonAxis);if(!(0!==C$zuo.type&&C$zuo.separation>this.m_radius)){var C$zum;C$zum=0!==C$zuo.type&&C$zuo.separation>.98*C$zui.separation+.001?C$zuo:C$zui;C$zue=b2EPCollider.s_ie;var C$zus=b2EPCollider.s_rf;if(1===C$zum.type){C$zut.type=C$zuH.b2ManifoldType.e_faceA;var C$zuv=0;var C$zuy=C$zuj.DotVV(this.m_normal,this.m_polygonB.normals[0]);for(C$zua=1;C$zua<this.m_polygonB.count;++C$zua){var C$zug=C$zuj.DotVV(this.m_normal,this.m_polygonB.normals[C$zua]);C$zug<C$zuy&&(C$zuy=C$zug,C$zuv=C$zua)}C$zuf=C$zuv;C$zun=(C$zuf+1)%this.m_polygonB.count;(C$zuc=C$zue[0]).v.Copy(this.m_polygonB.vertices[C$zuf]),C$zuc.id.cf.indexA=0,C$zuc.id.cf.indexB=C$zuf,C$zuc.id.cf.typeA=C$zuH.b2ContactFeatureType.e_face,C$zuc.id.cf.typeB=C$zuH.b2ContactFeatureType.e_vertex,(C$zul=C$zue[1]).v.Copy(this.m_polygonB.vertices[C$zun]),C$zul.id.cf.indexA=0,C$zul.id.cf.indexB=C$zun,C$zul.id.cf.typeA=C$zuH.b2ContactFeatureType.e_face,C$zul.id.cf.typeB=C$zuH.b2ContactFeatureType.e_vertex,this.m_front?(C$zus.i1=0,C$zus.i2=1,C$zus.v1.Copy(this.m_v1),C$zus.v2.Copy(this.m_v2),C$zus.normal.Copy(this.m_normal1)):(C$zus.i1=1,C$zus.i2=0,C$zus.v1.Copy(this.m_v2),C$zus.v2.Copy(this.m_v1),C$zus.normal.Copy(this.m_normal1).SelfNeg())}else{var C$zuc;var C$zul;C$zut.type=C$zuH.b2ManifoldType.e_faceB,(C$zuc=C$zue[0]).v.Copy(this.m_v1),C$zuc.id.cf.indexA=0,C$zuc.id.cf.indexB=C$zum.index,C$zuc.id.cf.typeA=C$zuH.b2ContactFeatureType.e_vertex,C$zuc.id.cf.typeB=C$zuH.b2ContactFeatureType.e_face,(C$zul=C$zue[1]).v.Copy(this.m_v2),C$zul.id.cf.indexA=0,C$zul.id.cf.indexB=C$zum.index,C$zul.id.cf.typeA=C$zuH.b2ContactFeatureType.e_vertex,C$zul.id.cf.typeB=C$zuH.b2ContactFeatureType.e_face,C$zus.i1=C$zum.index,C$zus.i2=(C$zus.i1+1)%this.m_polygonB.count,C$zus.v1.Copy(this.m_polygonB.vertices[C$zus.i1]),C$zus.v2.Copy(this.m_polygonB.vertices[C$zus.i2]),C$zus.normal.Copy(this.m_polygonB.normals[C$zus.i1])}C$zus.sideNormal1.Set(C$zus.normal.y,-C$zus.normal.x),C$zus.sideNormal2.Copy(C$zus.sideNormal1).SelfNeg(),C$zus.sideOffset1=C$zuj.DotVV(C$zus.sideNormal1,C$zus.v1),C$zus.sideOffset2=C$zuj.DotVV(C$zus.sideNormal2,C$zus.v2);C$zu_=b2EPCollider.s_clipPoints1;var C$zub=b2EPCollider.s_clipPoints2;if(!(b2ClipSegmentToLine(C$zu_,C$zue,C$zus.sideNormal1,C$zus.sideOffset1,C$zus.i1)<2||b2ClipSegmentToLine(C$zub,C$zu_,C$zus.sideNormal2,C$zus.sideOffset2,C$zus.i2)<2)){1===C$zum.type?(C$zut.localNormal.Copy(C$zus.normal),C$zut.localPoint.Copy(C$zus.v1)):(C$zut.localNormal.Copy(C$zuu.m_normals[C$zus.i1]),C$zut.localPoint.Copy(C$zuu.m_vertices[C$zus.i1]));var C$zuC=0;for(C$zua=0;C$zua<2;++C$zua){var C$zux;C$zuj.DotVV(C$zus.normal,C$zuj.SubVV(C$zub[C$zua].v,C$zus.v1,C$zuj.s_t0))<=this.m_radius&&(C$zux=C$zut.points[C$zuC],1===C$zum.type?(C$zuI.MulTXV(this.m_xf,C$zub[C$zua].v,C$zux.localPoint),C$zux.id=C$zub[C$zua].id):(C$zux.localPoint.Copy(C$zub[C$zua].v),C$zux.id.cf.typeA=C$zub[C$zua].id.cf.typeB,C$zux.id.cf.typeB=C$zub[C$zua].id.cf.typeA,C$zux.id.cf.indexA=C$zub[C$zua].id.cf.indexB,C$zux.id.cf.indexB=C$zub[C$zua].id.cf.indexA),++C$zuC)}C$zut.pointCount=C$zuC}}}},b2EPCollider.prototype.ComputeEdgeSeparation=function(C$zut){var C$zue=C$zut;C$zue.type=1,C$zue.index=this.m_front?0:1,C$zue.separation=C$zuB;for(var C$zui=0;C$zui<this.m_polygonB.count;++C$zui){var C$zur=C$zuj.DotVV(this.m_normal,C$zuj.SubVV(this.m_polygonB.vertices[C$zui],this.m_v1,C$zuj.s_t0));C$zur<C$zue.separation&&(C$zue.separation=C$zur)}return C$zue},b2EPCollider.prototype.ComputePolygonSeparation=function(C$zut){var C$zue=C$zut;C$zue.type=0,C$zue.index=-1,C$zue.separation=-C$zuB;var C$zui=b2EPCollider.s_perp.Set(-this.m_normal.y,this.m_normal.x);for(var C$zur=0;C$zur<this.m_polygonB.count;++C$zur){var C$zun=C$zuj.NegV(this.m_polygonB.normals[C$zur],b2EPCollider.s_n);var C$zua=C$zuj.DotVV(C$zun,C$zuj.SubVV(this.m_polygonB.vertices[C$zur],this.m_v1,C$zuj.s_t0));var C$zuo=C$zuj.DotVV(C$zun,C$zuj.SubVV(this.m_polygonB.vertices[C$zur],this.m_v2,C$zuj.s_t0));C$zua=C$zuD(C$zua,C$zuo);if(C$zua>this.m_radius)return C$zue.type=2,C$zue.index=C$zur,C$zue.separation=C$zua,C$zue;if(0<=C$zuj.DotVV(C$zun,C$zui)){if(C$zuj.DotVV(C$zuj.SubVV(C$zun,this.m_upperLimit,C$zuj.s_t0),this.m_normal)<-C$zuP)continue}else if(C$zuj.DotVV(C$zuj.SubVV(C$zun,this.m_lowerLimit,C$zuj.s_t0),this.m_normal)<-C$zuP)continue;C$zua>C$zue.separation&&(C$zue.type=2,C$zue.index=C$zur,C$zue.separation=C$zua)}return C$zue},b2EPCollider.s_edge1=new C$zuj,b2EPCollider.s_edge0=new C$zuj,b2EPCollider.s_edge2=new C$zuj,b2EPCollider.s_ie=C$zult.MakeArray(2),b2EPCollider.s_rf=new C$zube,b2EPCollider.s_clipPoints1=C$zult.MakeArray(2),b2EPCollider.s_clipPoints2=C$zult.MakeArray(2),b2EPCollider.s_edgeAxis=new C$zuye,b2EPCollider.s_polygonAxis=new C$zuye,b2EPCollider.s_n=new C$zuj,b2EPCollider.s_perp=new C$zuj;var C$zuCe=new b2EPCollider;function b2CollideEdgeAndPolygon(C$zut,C$zue,C$zui,C$zur,C$zun){C$zuCe.Collide(C$zut,C$zue,C$zui,C$zur,C$zun)}var C$zuxe=function(){this.mass=0,this.center=new C$zuj(0,0),this.I=0};(C$zube=C$zuH.b2ShapeType||(C$zuH.b2ShapeType={}))[C$zube.e_unknown=-1]="e_unknown",C$zube[C$zube.e_circleShape=0]="e_circleShape",C$zube[C$zube.e_edgeShape=1]="e_edgeShape",C$zube[C$zube.e_polygonShape=2]="e_polygonShape",C$zube[C$zube.e_chainShape=3]="e_chainShape",C$zube[C$zube.e_shapeTypeCount=4]="e_shapeTypeCount";b2Shape.prototype.Copy=function(C$zut){return this.m_radius=C$zut.m_radius,this},b2Shape.prototype.GetType=function(){return this.m_type};var C$zuAe=b2Shape;function b2Shape(C$zut,C$zue){this.m_type=C$zuH.b2ShapeType.e_unknown,this.m_radius=0,this.m_type=C$zut,this.m_radius=C$zue}var C$zuSe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$zut,C$zue){C$zut.__proto__=C$zue}||function(C$zut,C$zue){for(var C$zui in C$zue)C$zue.hasOwnProperty(C$zui)&&(C$zut[C$zui]=C$zue[C$zui])};function __extends(C$zut,C$zue){function __(){this.constructor=C$zut}C$zuSe(C$zut,C$zue),C$zut.prototype=null===C$zue?Object.create(C$zue):(__.prototype=C$zue.prototype,new __)}__extends(b2CircleShape,C$zuTe=C$zuAe),b2CircleShape.prototype.Set=function(C$zut,C$zue){return void 0===C$zue&&(C$zue=this.m_radius),this.m_p.Copy(C$zut),this.m_radius=C$zue,this},b2CircleShape.prototype.Clone=function(){return(new b2CircleShape).Copy(this)},b2CircleShape.prototype.Copy=function(C$zut){return C$zuTe.prototype.Copy.call(this,C$zut),this.m_p.Copy(C$zut.m_p),this},b2CircleShape.prototype.GetChildCount=function(){return 1},b2CircleShape.prototype.TestPoint=function(C$zut,C$zue){C$zut=C$zuI.MulXV(C$zut,this.m_p,b2CircleShape.TestPoint_s_center);C$zue=C$zuj.SubVV(C$zue,C$zut,b2CircleShape.TestPoint_s_d);return C$zuj.DotVV(C$zue,C$zue)<=b2Sq(this.m_radius)},b2CircleShape.prototype.ComputeDistance=function(C$zut,C$zue,C$zui,C$zur){C$zut=C$zuI.MulXV(C$zut,this.m_p,b2CircleShape.ComputeDistance_s_center);return C$zuj.SubVV(C$zue,C$zut,C$zui),C$zui.Normalize()-this.m_radius},b2CircleShape.prototype.RayCast=function(C$zut,C$zue,C$zui,C$zur){C$zui=C$zuI.MulXV(C$zui,this.m_p,b2CircleShape.RayCast_s_position);C$zui=C$zuj.SubVV(C$zue.p1,C$zui,b2CircleShape.RayCast_s_s);var C$zun=C$zuj.DotVV(C$zui,C$zui)-b2Sq(this.m_radius);var C$zua=C$zuj.SubVV(C$zue.p2,C$zue.p1,b2CircleShape.RayCast_s_r);var C$zuo=C$zuj.DotVV(C$zui,C$zua);var C$zus=C$zuj.DotVV(C$zua,C$zua);C$zun=C$zuo*C$zuo-C$zus*C$zun;if(C$zun<0||C$zus<C$zuE)return!1;C$zuo=-(C$zuo+C$zuX(C$zun));return 0<=C$zuo&&C$zuo<=C$zue.maxFraction*C$zus&&(C$zut.fraction=C$zuo/=C$zus,C$zuj.AddVMulSV(C$zui,C$zuo,C$zua,C$zut.normal).SelfNormalize(),!0)},b2CircleShape.prototype.ComputeAABB=function(C$zut,C$zue,C$zui){C$zue=C$zuI.MulXV(C$zue,this.m_p,b2CircleShape.ComputeAABB_s_p);C$zut.lowerBound.Set(C$zue.x-this.m_radius,C$zue.y-this.m_radius),C$zut.upperBound.Set(C$zue.x+this.m_radius,C$zue.y+this.m_radius)},b2CircleShape.prototype.ComputeMass=function(C$zut,C$zue){var C$zui=b2Sq(this.m_radius);C$zut.mass=C$zue*C$zum*C$zui,C$zut.center.Copy(this.m_p),C$zut.I=C$zut.mass*(.5*C$zui+C$zuj.DotVV(this.m_p,this.m_p))},b2CircleShape.prototype.SetupDistanceProxy=function(C$zut,C$zue){C$zut.m_vertices=C$zut.m_buffer,C$zut.m_vertices[0].Copy(this.m_p),C$zut.m_count=1,C$zut.m_radius=this.m_radius},b2CircleShape.prototype.ComputeSubmergedArea=function(C$zut,C$zue,C$zui,C$zur){C$zui=C$zuI.MulXV(C$zui,this.m_p,new C$zuj);C$zue=-(C$zuj.DotVV(C$zut,C$zui)-C$zue);if(C$zue<-this.m_radius+C$zuE)return 0;if(C$zue>this.m_radius)return C$zur.Copy(C$zui),C$zum*this.m_radius*this.m_radius;var C$zun=this.m_radius*this.m_radius;var C$zua=C$zue*C$zue;C$zue=C$zun*(C$zuc(C$zue/this.m_radius)+C$zum/2)+C$zue*C$zuX(C$zun-C$zua);C$zun=-2/3*C$zuo(C$zun-C$zua,1.5)/C$zue;return C$zur.x=C$zui.x+C$zut.x*C$zun,C$zur.y=C$zui.y+C$zut.y*C$zun,C$zue},b2CircleShape.prototype.Dump=function(C$zut){C$zut("    const shape: b2CircleShape = new b2CircleShape();\n"),C$zut("    shape.m_radius = %.15f;\n",this.m_radius),C$zut("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)},b2CircleShape.TestPoint_s_center=new C$zuj,b2CircleShape.TestPoint_s_d=new C$zuj,b2CircleShape.ComputeDistance_s_center=new C$zuj,b2CircleShape.RayCast_s_position=new C$zuj,b2CircleShape.RayCast_s_s=new C$zuj,b2CircleShape.RayCast_s_r=new C$zuj,b2CircleShape.ComputeAABB_s_p=new C$zuj;C$zuye=b2CircleShape;function b2CircleShape(C$zut){C$zut=C$zuTe.call(this,C$zuH.b2ShapeType.e_circleShape,C$zut=void 0===C$zut?0:C$zut)||this;return C$zut.m_p=new C$zuj,C$zut}var C$zuTe;__extends(b2PolygonShape,C$zuwe=C$zuAe),b2PolygonShape.prototype.Clone=function(){return(new b2PolygonShape).Copy(this)},b2PolygonShape.prototype.Copy=function(C$zut){C$zuwe.prototype.Copy.call(this,C$zut),this.m_centroid.Copy(C$zut.m_centroid),this.m_count=C$zut.m_count,this.m_vertices=C$zuj.MakeArray(this.m_count),this.m_normals=C$zuj.MakeArray(this.m_count);for(var C$zue=0;C$zue<this.m_count;++C$zue)this.m_vertices[C$zue].Copy(C$zut.m_vertices[C$zue]),this.m_normals[C$zue].Copy(C$zut.m_normals[C$zue]);return this},b2PolygonShape.prototype.GetChildCount=function(){return 1},b2PolygonShape.prototype.Set=function(C$zuh,C$zut,C$zuu){if(void 0===C$zuu&&(C$zuu=0),(C$zut=void 0===C$zut?C$zuh.length:C$zut)<3)return this.SetAsBox(1,1);var C$zue=C$zuD(C$zut,8);var C$zui=b2PolygonShape.Set_s_ps;var C$zu_=0;for(var C$zur=0;C$zur<C$zue;++C$zur){var C$zun=C$zuh[C$zuu+C$zur];var C$zud=!0;for(var C$zua=0;C$zua<C$zu_;++C$zua)if(C$zuj.DistanceSquaredVV(C$zun,C$zui[C$zua])<16e-6){C$zud=!1;break}C$zud&&C$zui[C$zu_++].Copy(C$zun)}if((C$zue=C$zu_)<3)return this.SetAsBox(1,1);var C$zuo=0;var C$zuf=C$zui[0].x;for(C$zur=1;C$zur<C$zue;++C$zur){var C$zup=C$zui[C$zur].x;(C$zuf<C$zup||C$zup===C$zuf&&C$zui[C$zur].y<C$zui[C$zuo].y)&&(C$zuo=C$zur,C$zuf=C$zup)}var C$zus=b2PolygonShape.Set_s_hull;var C$zuc=0;var C$zum=C$zuo;for(;;){C$zus[C$zuc]=C$zum;var C$zul=0;for(C$zua=1;C$zua<C$zue;++C$zua){var C$zuv,C$zuy;C$zul!==C$zum?(C$zuv=C$zuj.SubVV(C$zui[C$zul],C$zui[C$zus[C$zuc]],b2PolygonShape.Set_s_r),C$zun=C$zuj.SubVV(C$zui[C$zua],C$zui[C$zus[C$zuc]],b2PolygonShape.Set_s_v),(C$zuy=C$zuj.CrossVV(C$zuv,C$zun))<0&&(C$zul=C$zua),0===C$zuy&&C$zun.LengthSquared()>C$zuv.LengthSquared()&&(C$zul=C$zua)):C$zul=C$zua}if(++C$zuc,(C$zum=C$zul)===C$zuo)break}this.m_count=C$zuc,this.m_vertices=C$zuj.MakeArray(this.m_count),this.m_normals=C$zuj.MakeArray(this.m_count);for(C$zur=0;C$zur<C$zuc;++C$zur)this.m_vertices[C$zur].Copy(C$zui[C$zus[C$zur]]);for(C$zur=0;C$zur<C$zuc;++C$zur){var C$zug=this.m_vertices[C$zur];var C$zub=this.m_vertices[(C$zur+1)%C$zuc];C$zub=C$zuj.SubVV(C$zub,C$zug,C$zuj.s_t0);C$zuj.CrossVOne(C$zub,this.m_normals[C$zur]).SelfNormalize()}return b2PolygonShape.ComputeCentroid(this.m_vertices,C$zuc,this.m_centroid),this},b2PolygonShape.prototype.SetAsArray=function(C$zut,C$zue){return void 0===C$zue&&(C$zue=C$zut.length),this.Set(C$zut,C$zue)},b2PolygonShape.prototype.SetAsBox=function(C$zut,C$zue,C$zui,C$zur){if(void 0===C$zur&&(C$zur=0),this.m_count=4,this.m_vertices=C$zuj.MakeArray(this.m_count),this.m_normals=C$zuj.MakeArray(this.m_count),this.m_vertices[0].Set(-C$zut,-C$zue),this.m_vertices[1].Set(C$zut,-C$zue),this.m_vertices[2].Set(C$zut,C$zue),this.m_vertices[3].Set(-C$zut,C$zue),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),C$zui){this.m_centroid.Copy(C$zui);var C$zun=new C$zuI;C$zun.SetPosition(C$zui),C$zun.SetRotationAngle(C$zur);for(var C$zua=0;C$zua<this.m_count;++C$zua)C$zuI.MulXV(C$zun,this.m_vertices[C$zua],this.m_vertices[C$zua]),C$zuR.MulRV(C$zun.q,this.m_normals[C$zua],this.m_normals[C$zua])}return this},b2PolygonShape.prototype.TestPoint=function(C$zut,C$zue){var C$zui=C$zuI.MulTXV(C$zut,C$zue,b2PolygonShape.TestPoint_s_pLocal);for(var C$zur=0;C$zur<this.m_count;++C$zur)if(0<C$zuj.DotVV(this.m_normals[C$zur],C$zuj.SubVV(C$zui,this.m_vertices[C$zur],C$zuj.s_t0)))return!1;return!0},b2PolygonShape.prototype.ComputeDistance=function(C$zut,C$zuh,C$zue,C$zuu){var C$zui=C$zuI.MulTXV(C$zut,C$zuh,b2PolygonShape.ComputeDistance_s_pLocal);var C$zur=-C$zuB;var C$zun=b2PolygonShape.ComputeDistance_s_normalForMaxDistance.Copy(C$zui);for(var C$zua=0;C$zua<this.m_count;++C$zua){var C$zuo=C$zuj.DotVV(this.m_normals[C$zua],C$zuj.SubVV(C$zui,this.m_vertices[C$zua],C$zuj.s_t0));C$zur<C$zuo&&(C$zur=C$zuo,C$zun.Copy(this.m_normals[C$zua]))}if(0<C$zur){var C$zus=b2PolygonShape.ComputeDistance_s_minDistance.Copy(C$zun);var C$zuc=C$zur*C$zur;for(C$zua=0;C$zua<this.m_count;++C$zua){var C$zul=C$zuj.SubVV(C$zui,this.m_vertices[C$zua],b2PolygonShape.ComputeDistance_s_distance);var C$zu_=C$zul.LengthSquared();C$zu_<C$zuc&&(C$zus.Copy(C$zul),C$zuc=C$zu_)}return C$zuR.MulRV(C$zut.q,C$zus,C$zue),C$zue.Normalize(),Math.sqrt(C$zuc)}return C$zuR.MulRV(C$zut.q,C$zun,C$zue),C$zur},b2PolygonShape.prototype.RayCast=function(C$zut,C$zue,C$zui,C$zuh){var C$zur=C$zuI.MulTXV(C$zui,C$zue.p1,b2PolygonShape.RayCast_s_p1);var C$zuu=C$zuI.MulTXV(C$zui,C$zue.p2,b2PolygonShape.RayCast_s_p2);var C$zu_=C$zuj.SubVV(C$zuu,C$zur,b2PolygonShape.RayCast_s_d);var C$zun=0,C$zua=C$zue.maxFraction;var C$zuo=-1;for(var C$zus=0;C$zus<this.m_count;++C$zus){var C$zuc=C$zuj.DotVV(this.m_normals[C$zus],C$zuj.SubVV(this.m_vertices[C$zus],C$zur,C$zuj.s_t0));var C$zul=C$zuj.DotVV(this.m_normals[C$zus],C$zu_);if(0===C$zul){if(C$zuc<0)return!1}else C$zul<0&&C$zuc<C$zun*C$zul?(C$zun=C$zuc/C$zul,C$zuo=C$zus):0<C$zul&&C$zuc<C$zua*C$zul&&(C$zua=C$zuc/C$zul);if(C$zua<C$zun)return!1}return 0<=C$zuo&&(C$zut.fraction=C$zun,C$zuR.MulRV(C$zui.q,this.m_normals[C$zuo],C$zut.normal),!0)},b2PolygonShape.prototype.ComputeAABB=function(C$zut,C$zue,C$zui){var C$zur=C$zuI.MulXV(C$zue,this.m_vertices[0],C$zut.lowerBound);var C$zun=C$zut.upperBound.Copy(C$zur);for(var C$zua=0;C$zua<this.m_count;++C$zua){var C$zuo=C$zuI.MulXV(C$zue,this.m_vertices[C$zua],b2PolygonShape.ComputeAABB_s_v);C$zuj.MinV(C$zuo,C$zur,C$zur),C$zuj.MaxV(C$zuo,C$zun,C$zun)}C$zut=this.m_radius;C$zur.SelfSubXY(C$zut,C$zut),C$zun.SelfAddXY(C$zut,C$zut)},b2PolygonShape.prototype.ComputeMass=function(C$zut,C$zue){var C$zui=b2PolygonShape.ComputeMass_s_center.SetZero();var C$zur=0;var C$zuh=0;var C$zun=b2PolygonShape.ComputeMass_s_s.SetZero();for(var C$zua=0;C$zua<this.m_count;++C$zua)C$zun.SelfAdd(this.m_vertices[C$zua]);C$zun.SelfMul(1/this.m_count);for(C$zua=0;C$zua<this.m_count;++C$zua){var C$zuo=C$zuj.SubVV(this.m_vertices[C$zua],C$zun,b2PolygonShape.ComputeMass_s_e1);var C$zus=C$zuj.SubVV(this.m_vertices[(C$zua+1)%this.m_count],C$zun,b2PolygonShape.ComputeMass_s_e2);var C$zuu=C$zuj.CrossVV(C$zuo,C$zus);var C$zuc=.5*C$zuu;C$zur+=C$zuc,C$zui.SelfAdd(C$zuj.MulSV(1/3*C$zuc,C$zuj.AddVV(C$zuo,C$zus,C$zuj.s_t0),C$zuj.s_t1));C$zuc=C$zuo.x;C$zuo=C$zuo.y;var C$zul=C$zus.x;C$zus=C$zus.y;C$zuh+=1/3*.25*C$zuu*(C$zuc*C$zuc+C$zul*C$zuc+C$zul*C$zul+(C$zuo*C$zuo+C$zus*C$zuo+C$zus*C$zus))}C$zut.mass=C$zue*C$zur,C$zui.SelfMul(1/C$zur),C$zuj.AddVV(C$zui,C$zun,C$zut.center),C$zut.I=C$zue*C$zuh,C$zut.I+=C$zut.mass*(C$zuj.DotVV(C$zut.center,C$zut.center)-C$zuj.DotVV(C$zui,C$zui))},b2PolygonShape.prototype.Validate=function(){for(var C$zut=0;C$zut<this.m_count;++C$zut){var C$zue=C$zut;var C$zui=(C$zut+1)%this.m_count;var C$zur=this.m_vertices[C$zue];var C$zun=C$zuj.SubVV(this.m_vertices[C$zui],C$zur,b2PolygonShape.Validate_s_e);for(var C$zua=0;C$zua<this.m_count;++C$zua)if(C$zua!==C$zue&&C$zua!==C$zui){var C$zuo=C$zuj.SubVV(this.m_vertices[C$zua],C$zur,b2PolygonShape.Validate_s_v);if(C$zuj.CrossVV(C$zun,C$zuo)<0)return!1}}return!0},b2PolygonShape.prototype.SetupDistanceProxy=function(C$zut,C$zue){C$zut.m_vertices=this.m_vertices,C$zut.m_count=this.m_count,C$zut.m_radius=this.m_radius},b2PolygonShape.prototype.ComputeSubmergedArea=function(C$zut,C$zue,C$zuh,C$zuu){var C$zu_=C$zuR.MulTRV(C$zuh.q,C$zut,b2PolygonShape.ComputeSubmergedArea_s_normalL);var C$zud=C$zue-C$zuj.DotVV(C$zut,C$zuh.p);var C$zui=b2PolygonShape.ComputeSubmergedArea_s_depths;var C$zuf=0;var C$zur=-1;var C$zun=-1;var C$zup=!1;for(var C$zua=0;C$zua<this.m_count;++C$zua){C$zui[C$zua]=C$zuj.DotVV(C$zu_,this.m_vertices[C$zua])-C$zud;var C$zum=C$zui[C$zua]<-C$zuE;0<C$zua&&(C$zum?C$zup||(C$zur=C$zua-1,C$zuf++):C$zup&&(C$zun=C$zua-1,C$zuf++)),C$zup=C$zum}switch(C$zuf){case 0:var C$zuv;return C$zup?(this.ComputeMass(C$zuv=b2PolygonShape.ComputeSubmergedArea_s_md,1),C$zuI.MulXV(C$zuh,C$zuv.center,C$zuu),C$zuv.mass):0;case 1:-1===C$zur?C$zur=this.m_count-1:C$zun=this.m_count-1}C$zue=(C$zur+1)%this.m_count;var C$zuo=(C$zun+1)%this.m_count;C$zut=(0-C$zui[C$zur])/(C$zui[C$zue]-C$zui[C$zur]);var C$zuy=(0-C$zui[C$zun])/(C$zui[C$zuo]-C$zui[C$zun]);var C$zus=b2PolygonShape.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[C$zur].x*(1-C$zut)+this.m_vertices[C$zue].x*C$zut,this.m_vertices[C$zur].y*(1-C$zut)+this.m_vertices[C$zue].y*C$zut);var C$zug=b2PolygonShape.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[C$zun].x*(1-C$zuy)+this.m_vertices[C$zuo].x*C$zuy,this.m_vertices[C$zun].y*(1-C$zuy)+this.m_vertices[C$zuo].y*C$zuy);var C$zub=0;var C$zuC=b2PolygonShape.ComputeSubmergedArea_s_center.SetZero();var C$zuc=this.m_vertices[C$zue];var C$zul;var C$zux=C$zue;for(;C$zux!==C$zuo;){C$zul=(C$zux=(C$zux+1)%this.m_count)===C$zuo?C$zug:this.m_vertices[C$zux];var C$zuA=.5*((C$zuc.x-C$zus.x)*(C$zul.y-C$zus.y)-(C$zuc.y-C$zus.y)*(C$zul.x-C$zus.x));C$zub+=C$zuA,C$zuC.x+=C$zuA*(C$zus.x+C$zuc.x+C$zul.x)/3,C$zuC.y+=C$zuA*(C$zus.y+C$zuc.y+C$zul.y)/3,C$zuc=C$zul}return C$zuC.SelfMul(1/C$zub),C$zuI.MulXV(C$zuh,C$zuC,C$zuu),C$zub},b2PolygonShape.prototype.Dump=function(C$zut){C$zut("    const shape: b2PolygonShape = new b2PolygonShape();\n"),C$zut("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",8);for(var C$zue=0;C$zue<this.m_count;++C$zue)C$zut("    vs[%d].Set(%.15f, %.15f);\n",C$zue,this.m_vertices[C$zue].x,this.m_vertices[C$zue].y);C$zut("    shape.Set(vs, %d);\n",this.m_count)},b2PolygonShape.ComputeCentroid=function(C$zut,C$zue,C$zui){var C$zur=C$zui;C$zur.SetZero();var C$zun=0;var C$zuh=b2PolygonShape.ComputeCentroid_s_pRef.SetZero();for(var C$zua=0;C$zua<C$zue;++C$zua){var C$zuo=C$zuh;var C$zus=C$zut[C$zua];var C$zuc=C$zut[(C$zua+1)%C$zue];var C$zul=C$zuj.SubVV(C$zus,C$zuo,b2PolygonShape.ComputeCentroid_s_e1);var C$zuu=C$zuj.SubVV(C$zuc,C$zuo,b2PolygonShape.ComputeCentroid_s_e2);C$zul=.5*C$zuj.CrossVV(C$zul,C$zuu);C$zun+=C$zul,C$zur.x+=1/3*C$zul*(C$zuo.x+C$zus.x+C$zuc.x),C$zur.y+=1/3*C$zul*(C$zuo.y+C$zus.y+C$zuc.y)}return C$zur.SelfMul(1/C$zun),C$zur},b2PolygonShape.Set_s_ps=C$zuj.MakeArray(8),b2PolygonShape.Set_s_hull=b2MakeNumberArray(8),b2PolygonShape.Set_s_r=new C$zuj,b2PolygonShape.Set_s_v=new C$zuj,b2PolygonShape.TestPoint_s_pLocal=new C$zuj,b2PolygonShape.ComputeDistance_s_pLocal=new C$zuj,b2PolygonShape.ComputeDistance_s_normalForMaxDistance=new C$zuj,b2PolygonShape.ComputeDistance_s_minDistance=new C$zuj,b2PolygonShape.ComputeDistance_s_distance=new C$zuj,b2PolygonShape.RayCast_s_p1=new C$zuj,b2PolygonShape.RayCast_s_p2=new C$zuj,b2PolygonShape.RayCast_s_d=new C$zuj,b2PolygonShape.ComputeAABB_s_v=new C$zuj,b2PolygonShape.ComputeMass_s_center=new C$zuj,b2PolygonShape.ComputeMass_s_s=new C$zuj,b2PolygonShape.ComputeMass_s_e1=new C$zuj,b2PolygonShape.ComputeMass_s_e2=new C$zuj,b2PolygonShape.Validate_s_e=new C$zuj,b2PolygonShape.Validate_s_v=new C$zuj,b2PolygonShape.ComputeSubmergedArea_s_normalL=new C$zuj,b2PolygonShape.ComputeSubmergedArea_s_depths=b2MakeNumberArray(8),b2PolygonShape.ComputeSubmergedArea_s_md=new C$zuxe,b2PolygonShape.ComputeSubmergedArea_s_intoVec=new C$zuj,b2PolygonShape.ComputeSubmergedArea_s_outoVec=new C$zuj,b2PolygonShape.ComputeSubmergedArea_s_center=new C$zuj,b2PolygonShape.ComputeCentroid_s_pRef=new C$zuj,b2PolygonShape.ComputeCentroid_s_e1=new C$zuj,b2PolygonShape.ComputeCentroid_s_e2=new C$zuj;C$zube=b2PolygonShape;function b2PolygonShape(){var C$zut=C$zuwe.call(this,C$zuH.b2ShapeType.e_polygonShape,.016)||this;return C$zut.m_centroid=new C$zuj(0,0),C$zut.m_vertices=[],C$zut.m_normals=[],C$zut.m_count=0,C$zut}var C$zuwe;__extends(b2EdgeShape,C$zuPe=C$zuAe),b2EdgeShape.prototype.Set=function(C$zut,C$zue){return this.m_vertex1.Copy(C$zut),this.m_vertex2.Copy(C$zue),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},b2EdgeShape.prototype.Clone=function(){return(new b2EdgeShape).Copy(this)},b2EdgeShape.prototype.Copy=function(C$zut){return C$zuPe.prototype.Copy.call(this,C$zut),this.m_vertex1.Copy(C$zut.m_vertex1),this.m_vertex2.Copy(C$zut.m_vertex2),this.m_vertex0.Copy(C$zut.m_vertex0),this.m_vertex3.Copy(C$zut.m_vertex3),this.m_hasVertex0=C$zut.m_hasVertex0,this.m_hasVertex3=C$zut.m_hasVertex3,this},b2EdgeShape.prototype.GetChildCount=function(){return 1},b2EdgeShape.prototype.TestPoint=function(C$zut,C$zue){return!1},b2EdgeShape.prototype.ComputeDistance=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zuI.MulXV(C$zut,this.m_vertex1,b2EdgeShape.ComputeDistance_s_v1);C$zut=C$zuI.MulXV(C$zut,this.m_vertex2,b2EdgeShape.ComputeDistance_s_v2);var C$zua=C$zuj.SubVV(C$zue,C$zun,b2EdgeShape.ComputeDistance_s_d);C$zun=C$zuj.SubVV(C$zut,C$zun,b2EdgeShape.ComputeDistance_s_s);var C$zuo=C$zuj.DotVV(C$zua,C$zun);var C$zus;return 0<C$zuo&&((C$zus=C$zuj.DotVV(C$zun,C$zun))<C$zuo?C$zuj.SubVV(C$zue,C$zut,C$zua):C$zua.SelfMulSub(C$zuo/C$zus,C$zun)),C$zui.Copy(C$zua),C$zui.Normalize()},b2EdgeShape.prototype.RayCast=function(C$zut,C$zue,C$zui,C$zul){var C$zur=C$zuI.MulTXV(C$zui,C$zue.p1,b2EdgeShape.RayCast_s_p1);var C$zun=C$zuI.MulTXV(C$zui,C$zue.p2,b2EdgeShape.RayCast_s_p2);C$zun=C$zuj.SubVV(C$zun,C$zur,b2EdgeShape.RayCast_s_d);var C$zua=this.m_vertex1;var C$zuo=this.m_vertex2;var C$zus=C$zuj.SubVV(C$zuo,C$zua,b2EdgeShape.RayCast_s_e);C$zus=C$zut.normal.Set(C$zus.y,-C$zus.x).SelfNormalize();var C$zuc=C$zuj.DotVV(C$zus,C$zuj.SubVV(C$zua,C$zur,C$zuj.s_t0));C$zus=C$zuj.DotVV(C$zus,C$zun);if(0===C$zus)return!1;C$zus=C$zuc/C$zus;if(C$zus<0||C$zue.maxFraction<C$zus)return!1;C$zue=C$zuj.AddVMulSV(C$zur,C$zus,C$zun,b2EdgeShape.RayCast_s_q);C$zur=C$zuj.SubVV(C$zuo,C$zua,b2EdgeShape.RayCast_s_r);C$zun=C$zuj.DotVV(C$zur,C$zur);if(0===C$zun)return!1;C$zuo=C$zuj.DotVV(C$zuj.SubVV(C$zue,C$zua,C$zuj.s_t0),C$zur)/C$zun;return!(C$zuo<0||1<C$zuo)&&(C$zut.fraction=C$zus,C$zuR.MulRV(C$zui.q,C$zut.normal,C$zut.normal),0<C$zuc&&C$zut.normal.SelfNeg(),!0)},b2EdgeShape.prototype.ComputeAABB=function(C$zut,C$zue,C$zui){var C$zur=C$zuI.MulXV(C$zue,this.m_vertex1,b2EdgeShape.ComputeAABB_s_v1);C$zue=C$zuI.MulXV(C$zue,this.m_vertex2,b2EdgeShape.ComputeAABB_s_v2);C$zuj.MinV(C$zur,C$zue,C$zut.lowerBound),C$zuj.MaxV(C$zur,C$zue,C$zut.upperBound);C$zur=this.m_radius;C$zut.lowerBound.SelfSubXY(C$zur,C$zur),C$zut.upperBound.SelfAddXY(C$zur,C$zur)},b2EdgeShape.prototype.ComputeMass=function(C$zut,C$zue){C$zut.mass=0,C$zuj.MidVV(this.m_vertex1,this.m_vertex2,C$zut.center),C$zut.I=0},b2EdgeShape.prototype.SetupDistanceProxy=function(C$zut,C$zue){C$zut.m_vertices=C$zut.m_buffer,C$zut.m_vertices[0].Copy(this.m_vertex1),C$zut.m_vertices[1].Copy(this.m_vertex2),C$zut.m_count=2,C$zut.m_radius=this.m_radius},b2EdgeShape.prototype.ComputeSubmergedArea=function(C$zut,C$zue,C$zui,C$zur){return C$zur.SetZero(),0},b2EdgeShape.prototype.Dump=function(C$zut){C$zut("    const shape: b2EdgeShape = new b2EdgeShape();\n"),C$zut("    shape.m_radius = %.15f;\n",this.m_radius),C$zut("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),C$zut("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),C$zut("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),C$zut("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),C$zut("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),C$zut("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)},b2EdgeShape.ComputeDistance_s_v1=new C$zuj,b2EdgeShape.ComputeDistance_s_v2=new C$zuj,b2EdgeShape.ComputeDistance_s_d=new C$zuj,b2EdgeShape.ComputeDistance_s_s=new C$zuj,b2EdgeShape.RayCast_s_p1=new C$zuj,b2EdgeShape.RayCast_s_p2=new C$zuj,b2EdgeShape.RayCast_s_d=new C$zuj,b2EdgeShape.RayCast_s_e=new C$zuj,b2EdgeShape.RayCast_s_q=new C$zuj,b2EdgeShape.RayCast_s_r=new C$zuj,b2EdgeShape.ComputeAABB_s_v1=new C$zuj,b2EdgeShape.ComputeAABB_s_v2=new C$zuj;var C$zuEe=b2EdgeShape;function b2EdgeShape(){var C$zut=C$zuPe.call(this,C$zuH.b2ShapeType.e_edgeShape,.016)||this;return C$zut.m_vertex1=new C$zuj,C$zut.m_vertex2=new C$zuj,C$zut.m_vertex0=new C$zuj,C$zut.m_vertex3=new C$zuj,C$zut.m_hasVertex0=!1,C$zut.m_hasVertex3=!1,C$zut}var C$zuPe;__extends(b2ChainShape,C$zuRe=C$zuAe),b2ChainShape.prototype.CreateLoop=function(C$zut,C$zue,C$zui){if(void 0===C$zui&&(C$zui=0),(C$zue=void 0===C$zue?C$zut.length:C$zue)<3)return this;this.m_count=C$zue+1,this.m_vertices=C$zuj.MakeArray(this.m_count);for(var C$zur=0;C$zur<C$zue;++C$zur)this.m_vertices[C$zur].Copy(C$zut[C$zui+C$zur]);return this.m_vertices[C$zue].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},b2ChainShape.prototype.CreateChain=function(C$zut,C$zue,C$zui){void 0===C$zue&&(C$zue=C$zut.length),void 0===C$zui&&(C$zui=0),this.m_count=C$zue,this.m_vertices=C$zuj.MakeArray(C$zue);for(var C$zur=0;C$zur<C$zue;++C$zur)this.m_vertices[C$zur].Copy(C$zut[C$zui+C$zur]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this},b2ChainShape.prototype.SetPrevVertex=function(C$zut){return this.m_prevVertex.Copy(C$zut),this.m_hasPrevVertex=!0,this},b2ChainShape.prototype.SetNextVertex=function(C$zut){return this.m_nextVertex.Copy(C$zut),this.m_hasNextVertex=!0,this},b2ChainShape.prototype.Clone=function(){return(new b2ChainShape).Copy(this)},b2ChainShape.prototype.Copy=function(C$zut){return C$zuRe.prototype.Copy.call(this,C$zut),this.CreateChain(C$zut.m_vertices,C$zut.m_count),this.m_prevVertex.Copy(C$zut.m_prevVertex),this.m_nextVertex.Copy(C$zut.m_nextVertex),this.m_hasPrevVertex=C$zut.m_hasPrevVertex,this.m_hasNextVertex=C$zut.m_hasNextVertex,this},b2ChainShape.prototype.GetChildCount=function(){return this.m_count-1},b2ChainShape.prototype.GetChildEdge=function(C$zut,C$zue){C$zut.m_type=C$zuH.b2ShapeType.e_edgeShape,C$zut.m_radius=this.m_radius,C$zut.m_vertex1.Copy(this.m_vertices[C$zue]),C$zut.m_vertex2.Copy(this.m_vertices[C$zue+1]),0<C$zue?(C$zut.m_vertex0.Copy(this.m_vertices[C$zue-1]),C$zut.m_hasVertex0=!0):(C$zut.m_vertex0.Copy(this.m_prevVertex),C$zut.m_hasVertex0=this.m_hasPrevVertex),C$zue<this.m_count-2?(C$zut.m_vertex3.Copy(this.m_vertices[C$zue+2]),C$zut.m_hasVertex3=!0):(C$zut.m_vertex3.Copy(this.m_nextVertex),C$zut.m_hasVertex3=this.m_hasNextVertex)},b2ChainShape.prototype.TestPoint=function(C$zut,C$zue){return!1},b2ChainShape.prototype.ComputeDistance=function(C$zut,C$zue,C$zui,C$zur){var C$zun=b2ChainShape.ComputeDistance_s_edgeShape;return this.GetChildEdge(C$zun,C$zur),C$zun.ComputeDistance(C$zut,C$zue,C$zui,0)},b2ChainShape.prototype.RayCast=function(C$zut,C$zue,C$zui,C$zur){var C$zun=b2ChainShape.RayCast_s_edgeShape;return C$zun.m_vertex1.Copy(this.m_vertices[C$zur]),C$zun.m_vertex2.Copy(this.m_vertices[(C$zur+1)%this.m_count]),C$zun.RayCast(C$zut,C$zue,C$zui,0)},b2ChainShape.prototype.ComputeAABB=function(C$zut,C$zue,C$zui){var C$zur=this.m_vertices[C$zui];C$zui=this.m_vertices[(C$zui+1)%this.m_count];C$zur=C$zuI.MulXV(C$zue,C$zur,b2ChainShape.ComputeAABB_s_v1);C$zue=C$zuI.MulXV(C$zue,C$zui,b2ChainShape.ComputeAABB_s_v2);C$zuj.MinV(C$zur,C$zue,C$zut.lowerBound),C$zuj.MaxV(C$zur,C$zue,C$zut.upperBound)},b2ChainShape.prototype.ComputeMass=function(C$zut,C$zue){C$zut.mass=0,C$zut.center.SetZero(),C$zut.I=0},b2ChainShape.prototype.SetupDistanceProxy=function(C$zut,C$zue){C$zut.m_vertices=C$zut.m_buffer,C$zut.m_vertices[0].Copy(this.m_vertices[C$zue]),C$zue+1<this.m_count?C$zut.m_vertices[1].Copy(this.m_vertices[C$zue+1]):C$zut.m_vertices[1].Copy(this.m_vertices[0]),C$zut.m_count=2,C$zut.m_radius=this.m_radius},b2ChainShape.prototype.ComputeSubmergedArea=function(C$zut,C$zue,C$zui,C$zur){return C$zur.SetZero(),0},b2ChainShape.prototype.Dump=function(C$zut){C$zut("    const shape: b2ChainShape = new b2ChainShape();\n"),C$zut("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",8);for(var C$zue=0;C$zue<this.m_count;++C$zue)C$zut("    vs[%d].Set(%.15f, %.15f);\n",C$zue,this.m_vertices[C$zue].x,this.m_vertices[C$zue].y);C$zut("    shape.CreateChain(vs, %d);\n",this.m_count),C$zut("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),C$zut("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),C$zut("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),C$zut("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")},b2ChainShape.ComputeDistance_s_edgeShape=new C$zuEe,b2ChainShape.RayCast_s_edgeShape=new C$zuEe,b2ChainShape.ComputeAABB_s_v1=new C$zuj,b2ChainShape.ComputeAABB_s_v2=new C$zuj;var C$zuMe=b2ChainShape;function b2ChainShape(){var C$zut=C$zuRe.call(this,C$zuH.b2ShapeType.e_chainShape,.016)||this;return C$zut.m_vertices=[],C$zut.m_count=0,C$zut.m_prevVertex=new C$zuj,C$zut.m_nextVertex=new C$zuj,C$zut.m_hasPrevVertex=!1,C$zut.m_hasNextVertex=!1,C$zut}var C$zuRe;b2Filter.prototype.Clone=function(){return(new b2Filter).Copy(this)},b2Filter.prototype.Copy=function(C$zut){return this.categoryBits=C$zut.categoryBits,this.maskBits=C$zut.maskBits,this.groupIndex=C$zut.groupIndex||0,this},b2Filter.DEFAULT=new b2Filter;var C$zuIe=b2Filter;function b2Filter(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}var C$zuBe=function(){this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new C$zuIe};var C$zuDe=function(C$zut){this.aabb=new C$zu_t,this.childIndex=0,this.fixture=C$zut};b2Fixture.prototype.GetType=function(){return this.m_shape.GetType()},b2Fixture.prototype.GetShape=function(){return this.m_shape},b2Fixture.prototype.SetSensor=function(C$zut){C$zut!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=C$zut)},b2Fixture.prototype.IsSensor=function(){return this.m_isSensor},b2Fixture.prototype.SetFilterData=function(C$zut){this.m_filter.Copy(C$zut),this.Refilter()},b2Fixture.prototype.GetFilterData=function(){return this.m_filter},b2Fixture.prototype.Refilter=function(){var C$zut=this.m_body.GetContactList();for(;C$zut;){var C$zue=C$zut.contact;var C$zui=C$zue.GetFixtureA();var C$zur=C$zue.GetFixtureB();C$zui!==this&&C$zur!==this||C$zue.FlagForFiltering(),C$zut=C$zut.next}var C$zun=this.m_body.GetWorld();if(null!==C$zun){var C$zua=C$zun.m_contactManager.m_broadPhase;for(var C$zuo=0;C$zuo<this.m_proxyCount;++C$zuo)C$zua.TouchProxy(this.m_proxies[C$zuo].treeNode)}},b2Fixture.prototype.GetBody=function(){return this.m_body},b2Fixture.prototype.GetNext=function(){return this.m_next},b2Fixture.prototype.GetUserData=function(){return this.m_userData},b2Fixture.prototype.SetUserData=function(C$zut){this.m_userData=C$zut},b2Fixture.prototype.TestPoint=function(C$zut){return this.m_shape.TestPoint(this.m_body.GetTransform(),C$zut)},b2Fixture.prototype.ComputeDistance=function(C$zut,C$zue,C$zui){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),C$zut,C$zue,C$zui)},b2Fixture.prototype.RayCast=function(C$zut,C$zue,C$zui){return this.m_shape.RayCast(C$zut,C$zue,this.m_body.GetTransform(),C$zui)},b2Fixture.prototype.GetMassData=function(C$zut){return void 0===C$zut&&(C$zut=new C$zuxe),this.m_shape.ComputeMass(C$zut,this.m_density),C$zut},b2Fixture.prototype.SetDensity=function(C$zut){this.m_density=C$zut},b2Fixture.prototype.GetDensity=function(){return this.m_density},b2Fixture.prototype.GetFriction=function(){return this.m_friction},b2Fixture.prototype.SetFriction=function(C$zut){this.m_friction=C$zut},b2Fixture.prototype.GetRestitution=function(){return this.m_restitution},b2Fixture.prototype.SetRestitution=function(C$zut){this.m_restitution=C$zut},b2Fixture.prototype.GetAABB=function(C$zut){return this.m_proxies[C$zut].aabb},b2Fixture.prototype.Dump=function(C$zut,C$zue){C$zut("    const fd: b2FixtureDef = new b2FixtureDef();\n"),C$zut("    fd.friction = %.15f;\n",this.m_friction),C$zut("    fd.restitution = %.15f;\n",this.m_restitution),C$zut("    fd.density = %.15f;\n",this.m_density),C$zut("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),C$zut("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),C$zut("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),C$zut("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(C$zut),C$zut("\n"),C$zut("    fd.shape = shape;\n"),C$zut("\n"),C$zut("    bodies[%d].CreateFixture(fd);\n",C$zue)},b2Fixture.prototype.Create=function(C$zut){var C$zue=this;this.m_userData=C$zut.userData,this.m_friction=b2Maybe(C$zut.friction,.2),this.m_restitution=b2Maybe(C$zut.restitution,0),this.m_next=null,this.m_filter.Copy(b2Maybe(C$zut.filter,C$zuIe.DEFAULT)),this.m_isSensor=b2Maybe(C$zut.isSensor,!1),this.m_proxies=b2MakeArray(this.m_shape.GetChildCount(),function(C$zut){return new C$zuDe(C$zue)}),this.m_proxyCount=0,this.m_density=b2Maybe(C$zut.density,0)},b2Fixture.prototype.Destroy=function(){},b2Fixture.prototype.CreateProxies=function(C$zut){var C$zue=this.m_body.m_world.m_contactManager.m_broadPhase;this.m_proxyCount=this.m_shape.GetChildCount();for(var C$zui=0;C$zui<this.m_proxyCount;++C$zui){var C$zur=this.m_proxies[C$zui]=new C$zuDe(this);this.m_shape.ComputeAABB(C$zur.aabb,C$zut,C$zui),C$zur.treeNode=C$zue.CreateProxy(C$zur.aabb,C$zur),C$zur.childIndex=C$zui}},b2Fixture.prototype.DestroyProxies=function(){var C$zut=this.m_body.m_world.m_contactManager.m_broadPhase;for(var C$zue=0;C$zue<this.m_proxyCount;++C$zue){var C$zui=this.m_proxies[C$zue];delete C$zui.treeNode.userData,C$zut.DestroyProxy(C$zui.treeNode),delete C$zui.treeNode}this.m_proxyCount=0},b2Fixture.prototype.TouchProxies=function(){var C$zut=this.m_body.m_world.m_contactManager.m_broadPhase;var C$zue=this.m_proxyCount;for(var C$zui=0;C$zui<C$zue;++C$zui)C$zut.TouchProxy(this.m_proxies[C$zui].treeNode)},b2Fixture.prototype.Synchronize=function(C$zut,C$zue){if(0!==this.m_proxyCount){var C$zui=this.m_body.m_world.m_contactManager.m_broadPhase;for(var C$zur=0;C$zur<this.m_proxyCount;++C$zur){var C$zun=this.m_proxies[C$zur];var C$zua=b2Fixture.Synchronize_s_aabb1;var C$zuo=b2Fixture.Synchronize_s_aabb2;this.m_shape.ComputeAABB(C$zua,C$zut,C$zur),this.m_shape.ComputeAABB(C$zuo,C$zue,C$zur),C$zun.aabb.Combine2(C$zua,C$zuo);C$zua=C$zuj.SubVV(C$zue.p,C$zut.p,b2Fixture.Synchronize_s_displacement);C$zui.MoveProxy(C$zun.treeNode,C$zun.aabb,C$zua)}}},b2Fixture.Synchronize_s_aabb1=new C$zu_t,b2Fixture.Synchronize_s_aabb2=new C$zu_t,b2Fixture.Synchronize_s_displacement=new C$zuj;var C$zuLe=b2Fixture;function b2Fixture(C$zut,C$zue){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=[],this.m_proxyCount=0,this.m_filter=new C$zuIe,this.m_isSensor=!1,this.m_userData=null,this.m_body=C$zue,this.m_shape=C$zut.shape.Clone()}(C$zuOe=C$zuH.b2BodyType||(C$zuH.b2BodyType={}))[C$zuOe.b2_unknown=-1]="b2_unknown",C$zuOe[C$zuOe.b2_staticBody=0]="b2_staticBody",C$zuOe[C$zuOe.b2_kinematicBody=1]="b2_kinematicBody",C$zuOe[C$zuOe.b2_dynamicBody=2]="b2_dynamicBody";function C$zueET(){this.type=C$zuH.b2BodyType.b2_staticBody,this.position=new C$zuj(0,0),this.angle=0,this.linearVelocity=new C$zuj(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}b2Body.prototype.CreateFixture=function(C$zut,C$zue){return void 0===C$zue&&(C$zue=0),C$zut instanceof C$zuAe?this.CreateFixtureShapeDensity(C$zut,C$zue):this.CreateFixtureDef(C$zut)},b2Body.prototype.CreateFixtureDef=function(C$zut){if(this.m_world.IsLocked())throw new Error;var C$zue=new C$zuLe(C$zut,this);return C$zue.Create(C$zut),this.m_activeFlag&&C$zue.CreateProxies(this.m_xf),C$zue.m_next=this.m_fixtureList,this.m_fixtureList=C$zue,++this.m_fixtureCount,0<C$zue.m_density&&this.ResetMassData(),this.m_world.m_newFixture=!0,C$zue},b2Body.prototype.CreateFixtureShapeDensity=function(C$zut,C$zue){void 0===C$zue&&(C$zue=0);var C$zui=b2Body.CreateFixtureShapeDensity_s_def;return C$zui.shape=C$zut,C$zui.density=C$zue,this.CreateFixtureDef(C$zui)},b2Body.prototype.DestroyFixture=function(C$zut){if(this.m_world.IsLocked())throw new Error;var C$zue=this.m_fixtureList;var C$zui=null;for(;null!==C$zue;){if(C$zue===C$zut){C$zui?C$zui.m_next=C$zut.m_next:this.m_fixtureList=C$zut.m_next;break}C$zue=(C$zui=C$zue).m_next}var C$zur=this.m_contactList;for(;C$zur;){var C$zun=C$zur.contact;C$zur=C$zur.next;var C$zua=C$zun.GetFixtureA();var C$zuo=C$zun.GetFixtureB();C$zut!==C$zua&&C$zut!==C$zuo||this.m_world.m_contactManager.Destroy(C$zun)}this.m_activeFlag&&C$zut.DestroyProxies(),C$zut.m_next=null,C$zut.Destroy(),--this.m_fixtureCount,this.ResetMassData()},b2Body.prototype.SetTransformVec=function(C$zut,C$zue){this.SetTransformXY(C$zut.x,C$zut.y,C$zue)},b2Body.prototype.SetTransformXY=function(C$zut,C$zue,C$zui){if(this.m_world.IsLocked())throw new Error;this.m_xf.q.SetAngle(C$zui),this.m_xf.p.Set(C$zut,C$zue),this.m_xf0.Copy(this.m_xf),C$zuI.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=C$zui,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=C$zui;for(var C$zur=this.m_fixtureList;C$zur;C$zur=C$zur.m_next)C$zur.Synchronize(this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},b2Body.prototype.SetTransform=function(C$zut){this.SetTransformVec(C$zut.p,C$zut.GetAngle())},b2Body.prototype.GetTransform=function(){return this.m_xf},b2Body.prototype.GetPosition=function(){return this.m_xf.p},b2Body.prototype.SetPosition=function(C$zut){this.SetTransformVec(C$zut,this.GetAngle())},b2Body.prototype.SetPositionXY=function(C$zut,C$zue){this.SetTransformXY(C$zut,C$zue,this.GetAngle())},b2Body.prototype.GetAngle=function(){return this.m_sweep.a},b2Body.prototype.SetAngle=function(C$zut){this.SetTransformVec(this.GetPosition(),C$zut)},b2Body.prototype.GetWorldCenter=function(){return this.m_sweep.c},b2Body.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},b2Body.prototype.SetLinearVelocity=function(C$zut){this.m_type!==C$zuH.b2BodyType.b2_staticBody&&(0<C$zuj.DotVV(C$zut,C$zut)&&this.SetAwake(!0),this.m_linearVelocity.Copy(C$zut))},b2Body.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},b2Body.prototype.SetAngularVelocity=function(C$zut){this.m_type!==C$zuH.b2BodyType.b2_staticBody&&(0<C$zut*C$zut&&this.SetAwake(!0),this.m_angularVelocity=C$zut)},b2Body.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},b2Body.prototype.GetDefinition=function(C$zut){return C$zut.type=this.GetType(),C$zut.allowSleep=this.m_autoSleepFlag,C$zut.angle=this.GetAngle(),C$zut.angularDamping=this.m_angularDamping,C$zut.gravityScale=this.m_gravityScale,C$zut.angularVelocity=this.m_angularVelocity,C$zut.fixedRotation=this.m_fixedRotationFlag,C$zut.bullet=this.m_bulletFlag,C$zut.awake=this.m_awakeFlag,C$zut.linearDamping=this.m_linearDamping,C$zut.linearVelocity.Copy(this.GetLinearVelocity()),C$zut.position.Copy(this.GetPosition()),C$zut.userData=this.GetUserData(),C$zut},b2Body.prototype.ApplyForce=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=!0),this.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(C$zui&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=C$zut.x,this.m_force.y+=C$zut.y,this.m_torque+=(C$zue.x-this.m_sweep.c.x)*C$zut.y-(C$zue.y-this.m_sweep.c.y)*C$zut.x))},b2Body.prototype.ApplyForceToCenter=function(C$zut,C$zue){void 0===C$zue&&(C$zue=!0),this.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(C$zue&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=C$zut.x,this.m_force.y+=C$zut.y))},b2Body.prototype.ApplyTorque=function(C$zut,C$zue){void 0===C$zue&&(C$zue=!0),this.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(C$zue&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=C$zut))},b2Body.prototype.ApplyLinearImpulse=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=!0),this.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(C$zui&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*C$zut.x,this.m_linearVelocity.y+=this.m_invMass*C$zut.y,this.m_angularVelocity+=this.m_invI*((C$zue.x-this.m_sweep.c.x)*C$zut.y-(C$zue.y-this.m_sweep.c.y)*C$zut.x)))},b2Body.prototype.ApplyLinearImpulseToCenter=function(C$zut,C$zue){void 0===C$zue&&(C$zue=!0),this.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(C$zue&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*C$zut.x,this.m_linearVelocity.y+=this.m_invMass*C$zut.y))},b2Body.prototype.ApplyAngularImpulse=function(C$zut,C$zue){void 0===C$zue&&(C$zue=!0),this.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(C$zue&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*C$zut))},b2Body.prototype.GetMass=function(){return this.m_mass},b2Body.prototype.GetInertia=function(){return this.m_I+this.m_mass*C$zuj.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)},b2Body.prototype.GetMassData=function(C$zut){return C$zut.mass=this.m_mass,C$zut.I=this.m_I+this.m_mass*C$zuj.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),C$zut.center.Copy(this.m_sweep.localCenter),C$zut},b2Body.prototype.SetMassData=function(C$zut){if(this.m_world.IsLocked())throw new Error;var C$zue;this.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=C$zut.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,0<C$zut.I&&!this.m_fixedRotationFlag&&(this.m_I=C$zut.I-this.m_mass*C$zuj.DotVV(C$zut.center,C$zut.center),this.m_invI=1/this.m_I),C$zue=b2Body.SetMassData_s_oldCenter.Copy(this.m_sweep.c),this.m_sweep.localCenter.Copy(C$zut.center),C$zuI.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),C$zuj.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$zuj.SubVV(this.m_sweep.c,C$zue,C$zuj.s_t0),this.m_linearVelocity))},b2Body.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===C$zuH.b2BodyType.b2_staticBody||this.m_type===C$zuH.b2BodyType.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);var C$zut=b2Body.ResetMassData_s_localCenter.SetZero();for(var C$zue=this.m_fixtureList;C$zue;C$zue=C$zue.m_next){var C$zui;0!==C$zue.m_density&&(C$zui=C$zue.GetMassData(b2Body.ResetMassData_s_massData),this.m_mass+=C$zui.mass,C$zut.x+=C$zui.center.x*C$zui.mass,C$zut.y+=C$zui.center.y*C$zui.mass,this.m_I+=C$zui.I)}0<this.m_mass?(this.m_invMass=1/this.m_mass,C$zut.x*=this.m_invMass,C$zut.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),0<this.m_I&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*C$zuj.DotVV(C$zut,C$zut),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var C$zur=b2Body.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(C$zut),C$zuI.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),C$zuj.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$zuj.SubVV(this.m_sweep.c,C$zur,C$zuj.s_t0),this.m_linearVelocity)},b2Body.prototype.GetWorldPoint=function(C$zut,C$zue){return C$zuI.MulXV(this.m_xf,C$zut,C$zue)},b2Body.prototype.GetWorldVector=function(C$zut,C$zue){return C$zuR.MulRV(this.m_xf.q,C$zut,C$zue)},b2Body.prototype.GetLocalPoint=function(C$zut,C$zue){return C$zuI.MulTXV(this.m_xf,C$zut,C$zue)},b2Body.prototype.GetLocalVector=function(C$zut,C$zue){return C$zuR.MulTRV(this.m_xf.q,C$zut,C$zue)},b2Body.prototype.GetLinearVelocityFromWorldPoint=function(C$zut,C$zue){return C$zuj.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$zuj.SubVV(C$zut,this.m_sweep.c,C$zuj.s_t0),C$zue)},b2Body.prototype.GetLinearVelocityFromLocalPoint=function(C$zut,C$zue){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(C$zut,C$zue),C$zue)},b2Body.prototype.GetLinearDamping=function(){return this.m_linearDamping},b2Body.prototype.SetLinearDamping=function(C$zut){this.m_linearDamping=C$zut},b2Body.prototype.GetAngularDamping=function(){return this.m_angularDamping},b2Body.prototype.SetAngularDamping=function(C$zut){this.m_angularDamping=C$zut},b2Body.prototype.GetGravityScale=function(){return this.m_gravityScale},b2Body.prototype.SetGravityScale=function(C$zut){this.m_gravityScale=C$zut},b2Body.prototype.SetType=function(C$zut){if(this.m_world.IsLocked())throw new Error;if(this.m_type!==C$zut){this.m_type=C$zut,this.ResetMassData(),this.m_type===C$zuH.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;var C$zue=this.m_contactList;for(;C$zue;){var C$zui=C$zue;C$zue=C$zue.next,this.m_world.m_contactManager.Destroy(C$zui.contact)}this.m_contactList=null;for(var C$zur=this.m_fixtureList;C$zur;C$zur=C$zur.m_next)C$zur.TouchProxies()}},b2Body.prototype.GetType=function(){return this.m_type},b2Body.prototype.SetBullet=function(C$zut){this.m_bulletFlag=C$zut},b2Body.prototype.IsBullet=function(){return this.m_bulletFlag},b2Body.prototype.SetSleepingAllowed=function(C$zut){(this.m_autoSleepFlag=C$zut)||this.SetAwake(!0)},b2Body.prototype.IsSleepingAllowed=function(){return this.m_autoSleepFlag},b2Body.prototype.SetAwake=function(C$zut){C$zut?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},b2Body.prototype.IsAwake=function(){return this.m_awakeFlag},b2Body.prototype.SetActive=function(C$zut){if(this.m_world.IsLocked())throw new Error;if(C$zut!==this.IsActive())if(this.m_activeFlag=C$zut)for(var C$zue=this.m_fixtureList;C$zue;C$zue=C$zue.m_next)C$zue.CreateProxies(this.m_xf);else{for(C$zue=this.m_fixtureList;C$zue;C$zue=C$zue.m_next)C$zue.DestroyProxies();var C$zui=this.m_contactList;for(;C$zui;){var C$zur=C$zui;C$zui=C$zui.next,this.m_world.m_contactManager.Destroy(C$zur.contact)}this.m_contactList=null}},b2Body.prototype.IsActive=function(){return this.m_activeFlag},b2Body.prototype.SetFixedRotation=function(C$zut){this.m_fixedRotationFlag!==C$zut&&(this.m_fixedRotationFlag=C$zut,this.m_angularVelocity=0,this.ResetMassData())},b2Body.prototype.IsFixedRotation=function(){return this.m_fixedRotationFlag},b2Body.prototype.GetFixtureList=function(){return this.m_fixtureList},b2Body.prototype.GetJointList=function(){return this.m_jointList},b2Body.prototype.GetContactList=function(){return this.m_contactList},b2Body.prototype.GetNext=function(){return this.m_next},b2Body.prototype.GetUserData=function(){return this.m_userData},b2Body.prototype.SetUserData=function(C$zut){this.m_userData=C$zut},b2Body.prototype.GetWorld=function(){return this.m_world},b2Body.prototype.Dump=function(C$zut){var C$zue=this.m_islandIndex;C$zut("{\n"),C$zut("  const bd: b2BodyDef = new b2BodyDef();\n");var C$zui="";switch(this.m_type){case C$zuH.b2BodyType.b2_staticBody:C$zui="b2BodyType.b2_staticBody";break;case C$zuH.b2BodyType.b2_kinematicBody:C$zui="b2BodyType.b2_kinematicBody";break;case C$zuH.b2BodyType.b2_dynamicBody:C$zui="b2BodyType.b2_dynamicBody"}C$zut("  bd.type = %s;\n",C$zui),C$zut("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),C$zut("  bd.angle = %.15f;\n",this.m_sweep.a),C$zut("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),C$zut("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),C$zut("  bd.linearDamping = %.15f;\n",this.m_linearDamping),C$zut("  bd.angularDamping = %.15f;\n",this.m_angularDamping),C$zut("  bd.allowSleep = %s;\n",this.m_autoSleepFlag?"true":"false"),C$zut("  bd.awake = %s;\n",this.m_awakeFlag?"true":"false"),C$zut("  bd.fixedRotation = %s;\n",this.m_fixedRotationFlag?"true":"false"),C$zut("  bd.bullet = %s;\n",this.m_bulletFlag?"true":"false"),C$zut("  bd.active = %s;\n",this.m_activeFlag?"true":"false"),C$zut("  bd.gravityScale = %.15f;\n",this.m_gravityScale),C$zut("\n"),C$zut("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),C$zut("\n");for(var C$zur=this.m_fixtureList;C$zur;C$zur=C$zur.m_next)C$zut("  {\n"),C$zur.Dump(C$zut,C$zue),C$zut("  }\n");C$zut("}\n")},b2Body.prototype.SynchronizeFixtures=function(){var C$zut=b2Body.SynchronizeFixtures_s_xf1;C$zut.q.SetAngle(this.m_sweep.a0),C$zuR.MulRV(C$zut.q,this.m_sweep.localCenter,C$zut.p),C$zuj.SubVV(this.m_sweep.c0,C$zut.p,C$zut.p);for(var C$zue=this.m_fixtureList;C$zue;C$zue=C$zue.m_next)C$zue.Synchronize(C$zut,this.m_xf)},b2Body.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngle(this.m_sweep.a),C$zuR.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),C$zuj.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},b2Body.prototype.ShouldCollide=function(C$zut){return(this.m_type!==C$zuH.b2BodyType.b2_staticBody||C$zut.m_type!==C$zuH.b2BodyType.b2_staticBody)&&this.ShouldCollideConnected(C$zut)},b2Body.prototype.ShouldCollideConnected=function(C$zut){for(var C$zue=this.m_jointList;C$zue;C$zue=C$zue.next)if(C$zue.other===C$zut&&!C$zue.joint.m_collideConnected)return!1;return!0},b2Body.prototype.Advance=function(C$zut){this.m_sweep.Advance(C$zut),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),C$zuR.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),C$zuj.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},b2Body.prototype.GetControllerList=function(){return this.m_controllerList},b2Body.prototype.GetControllerCount=function(){return this.m_controllerCount},b2Body.CreateFixtureShapeDensity_s_def=new C$zuBe,b2Body.SetMassData_s_oldCenter=new C$zuj,b2Body.ResetMassData_s_localCenter=new C$zuj,b2Body.ResetMassData_s_oldCenter=new C$zuj,b2Body.ResetMassData_s_massData=new C$zuxe,b2Body.SynchronizeFixtures_s_xf1=new C$zuI;var C$zuVe=b2Body;function b2Body(C$zut,C$zue){this.m_type=C$zuH.b2BodyType.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new C$zuI,this.m_xf0=new C$zuI,this.m_sweep=new C$zu_,this.m_linearVelocity=new C$zuj,this.m_angularVelocity=0,this.m_force=new C$zuj,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,this.m_bulletFlag=b2Maybe(C$zut.bullet,!1),this.m_fixedRotationFlag=b2Maybe(C$zut.fixedRotation,!1),this.m_autoSleepFlag=b2Maybe(C$zut.allowSleep,!0),this.m_awakeFlag=b2Maybe(C$zut.awake,!0),this.m_activeFlag=b2Maybe(C$zut.active,!0),this.m_world=C$zue,this.m_xf.p.Copy(b2Maybe(C$zut.position,C$zuj.ZERO)),this.m_xf.q.SetAngle(b2Maybe(C$zut.angle,0)),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(b2Maybe(C$zut.linearVelocity,C$zuj.ZERO)),this.m_angularVelocity=b2Maybe(C$zut.angularVelocity,0),this.m_linearDamping=b2Maybe(C$zut.linearDamping,0),this.m_angularDamping=b2Maybe(C$zut.angularDamping,0),this.m_gravityScale=b2Maybe(C$zut.gravityScale,1),this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=b2Maybe(C$zut.type,C$zuH.b2BodyType.b2_staticBody),C$zut.type===C$zuH.b2BodyType.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=C$zut.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}(C$zuOe=C$zuH.b2JointType||(C$zuH.b2JointType={}))[C$zuOe.e_unknownJoint=0]="e_unknownJoint",C$zuOe[C$zuOe.e_revoluteJoint=1]="e_revoluteJoint",C$zuOe[C$zuOe.e_prismaticJoint=2]="e_prismaticJoint",C$zuOe[C$zuOe.e_distanceJoint=3]="e_distanceJoint",C$zuOe[C$zuOe.e_pulleyJoint=4]="e_pulleyJoint",C$zuOe[C$zuOe.e_mouseJoint=5]="e_mouseJoint",C$zuOe[C$zuOe.e_gearJoint=6]="e_gearJoint",C$zuOe[C$zuOe.e_wheelJoint=7]="e_wheelJoint",C$zuOe[C$zuOe.e_weldJoint=8]="e_weldJoint",C$zuOe[C$zuOe.e_frictionJoint=9]="e_frictionJoint",C$zuOe[C$zuOe.e_ropeJoint=10]="e_ropeJoint",C$zuOe[C$zuOe.e_motorJoint=11]="e_motorJoint",C$zuOe[C$zuOe.e_areaJoint=12]="e_areaJoint",(C$zuOe=C$zuH.b2LimitState||(C$zuH.b2LimitState={}))[C$zuOe.e_inactiveLimit=0]="e_inactiveLimit",C$zuOe[C$zuOe.e_atLowerLimit=1]="e_atLowerLimit",C$zuOe[C$zuOe.e_atUpperLimit=2]="e_atUpperLimit",C$zuOe[C$zuOe.e_equalLimits=3]="e_equalLimits";b2Jacobian.prototype.SetZero=function(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this},b2Jacobian.prototype.Set=function(C$zut,C$zue,C$zui){return this.linear.Copy(C$zut),this.angularA=C$zue,this.angularB=C$zui,this};var C$zuOe=b2Jacobian;function b2Jacobian(){this.linear=new C$zuj,this.angularA=0,this.angularB=0}var C$zuFe=function(C$zut,C$zue){this.prev=null,this.next=null,this.joint=C$zut,this.other=C$zue};function C$zuSET(C$zut){this.type=C$zuH.b2JointType.e_unknownJoint,this.userData=null,this.collideConnected=!1,this.type=C$zut}b2Joint.prototype.GetType=function(){return this.m_type},b2Joint.prototype.GetBodyA=function(){return this.m_bodyA},b2Joint.prototype.GetBodyB=function(){return this.m_bodyB},b2Joint.prototype.GetNext=function(){return this.m_next},b2Joint.prototype.GetUserData=function(){return this.m_userData},b2Joint.prototype.SetUserData=function(C$zut){this.m_userData=C$zut},b2Joint.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},b2Joint.prototype.GetCollideConnected=function(){return this.m_collideConnected},b2Joint.prototype.Dump=function(C$zut){C$zut("// Dump is not supported for this joint type.\n")},b2Joint.prototype.ShiftOrigin=function(C$zut){};var C$zuNe=b2Joint;function b2Joint(C$zut){this.m_type=C$zuH.b2JointType.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=C$zut.type,this.m_edgeA=new C$zuFe(this,C$zut.bodyB),this.m_edgeB=new C$zuFe(this,C$zut.bodyA),this.m_bodyA=C$zut.bodyA,this.m_bodyB=C$zut.bodyB,this.m_collideConnected=b2Maybe(C$zut.collideConnected,!1),this.m_userData=C$zut.userData}__extends(b2DistanceJointDef,C$zuze=C$zuSET),b2DistanceJointDef.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur){this.bodyA=C$zut,this.bodyB=C$zue,this.bodyA.GetLocalPoint(C$zui,this.localAnchorA),this.bodyB.GetLocalPoint(C$zur,this.localAnchorB),this.length=C$zuj.DistanceVV(C$zui,C$zur),this.frequencyHz=0,this.dampingRatio=0};var C$zuke=b2DistanceJointDef;function b2DistanceJointDef(){var C$zut=C$zuze.call(this,C$zuH.b2JointType.e_distanceJoint)||this;return C$zut.localAnchorA=new C$zuj,C$zut.localAnchorB=new C$zuj,C$zut.length=1,C$zut.frequencyHz=0,C$zut.dampingRatio=0,C$zut}var C$zuze;__extends(b2DistanceJoint,C$zuUe=C$zuNe),b2DistanceJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2DistanceJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2DistanceJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue.x=C$zut*this.m_impulse*this.m_u.x,C$zue.y=C$zut*this.m_impulse*this.m_u.y,C$zue},b2DistanceJoint.prototype.GetReactionTorque=function(C$zut){return 0},b2DistanceJoint.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},b2DistanceJoint.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},b2DistanceJoint.prototype.SetLength=function(C$zut){this.m_length=C$zut},b2DistanceJoint.prototype.Length=function(){return this.m_length},b2DistanceJoint.prototype.SetFrequency=function(C$zut){this.m_frequencyHz=C$zut},b2DistanceJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},b2DistanceJoint.prototype.SetDampingRatio=function(C$zut){this.m_dampingRatio=C$zut},b2DistanceJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},b2DistanceJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.length = %.15f;\n",this.m_length),C$zut("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$zut("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2DistanceJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexA].c;var C$zui=C$zut.positions[this.m_indexA].a;var C$zur=C$zut.velocities[this.m_indexA].v;var C$zun=C$zut.velocities[this.m_indexA].w;var C$zua=C$zut.positions[this.m_indexB].c;var C$zuo=C$zut.positions[this.m_indexB].a;var C$zus=C$zut.velocities[this.m_indexB].v;var C$zuc=C$zut.velocities[this.m_indexB].w;C$zui=this.m_qA.SetAngle(C$zui),C$zuo=this.m_qB.SetAngle(C$zuo);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$zuR.MulRV(C$zui,this.m_lalcA,this.m_rA),C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$zuR.MulRV(C$zuo,this.m_lalcB,this.m_rB),this.m_u.x=C$zua.x+this.m_rB.x-C$zue.x-this.m_rA.x,this.m_u.y=C$zua.y+this.m_rB.y-C$zue.y-this.m_rA.y;C$zui=this.m_u.Length();.008<C$zui?this.m_u.SelfMul(1/C$zui):this.m_u.SetZero();C$zuo=C$zuj.CrossVV(this.m_rA,this.m_u);C$zua=C$zuj.CrossVV(this.m_rB,this.m_u);C$zue=this.m_invMassA+this.m_invIA*C$zuo*C$zuo+this.m_invMassB+this.m_invIB*C$zua*C$zua;var C$zul;this.m_mass=0!==C$zue?1/C$zue:0,0<this.m_frequencyHz?(C$zuo=C$zui-this.m_length,C$zua=2*C$zum*this.m_frequencyHz,C$zui=2*this.m_mass*this.m_dampingRatio*C$zua,C$zua=this.m_mass*C$zua*C$zua,C$zul=C$zut.step.dt,this.m_gamma=C$zul*(C$zui+C$zul*C$zua),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=C$zuo*C$zul*C$zua*this.m_gamma,C$zue+=this.m_gamma,this.m_mass=0!==C$zue?1/C$zue:0):(this.m_gamma=0,this.m_bias=0),C$zut.step.warmStarting?(this.m_impulse*=C$zut.step.dtRatio,C$zui=C$zuj.MulSV(this.m_impulse,this.m_u,b2DistanceJoint.InitVelocityConstraints_s_P),C$zur.SelfMulSub(this.m_invMassA,C$zui),C$zun-=this.m_invIA*C$zuj.CrossVV(this.m_rA,C$zui),C$zus.SelfMulAdd(this.m_invMassB,C$zui),C$zuc+=this.m_invIB*C$zuj.CrossVV(this.m_rB,C$zui)):this.m_impulse=0,C$zut.velocities[this.m_indexA].w=C$zun,C$zut.velocities[this.m_indexB].w=C$zuc},b2DistanceJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zua=C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,b2DistanceJoint.SolveVelocityConstraints_s_vpA);var C$zuo=C$zuj.AddVCrossSV(C$zur,C$zun,this.m_rB,b2DistanceJoint.SolveVelocityConstraints_s_vpB);C$zuo=C$zuj.DotVV(this.m_u,C$zuj.SubVV(C$zuo,C$zua,C$zuj.s_t0));C$zua=-this.m_mass*(C$zuo+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=C$zua;C$zuo=C$zuj.MulSV(C$zua,this.m_u,b2DistanceJoint.SolveVelocityConstraints_s_P);C$zue.SelfMulSub(this.m_invMassA,C$zuo),C$zui-=this.m_invIA*C$zuj.CrossVV(this.m_rA,C$zuo),C$zur.SelfMulAdd(this.m_invMassB,C$zuo),C$zun+=this.m_invIB*C$zuj.CrossVV(this.m_rB,C$zuo),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2DistanceJoint.prototype.SolvePositionConstraints=function(C$zut){if(0<this.m_frequencyHz)return!0;var C$zue=C$zut.positions[this.m_indexA].c;var C$zui=C$zut.positions[this.m_indexA].a;var C$zur=C$zut.positions[this.m_indexB].c;var C$zun=C$zut.positions[this.m_indexB].a;var C$zua=this.m_qA.SetAngle(C$zui),C$zuo=this.m_qB.SetAngle(C$zun);C$zua=C$zuR.MulRV(C$zua,this.m_lalcA,this.m_rA);C$zuo=C$zuR.MulRV(C$zuo,this.m_lalcB,this.m_rB);var C$zus=this.m_u;var C$zuc;C$zus.x=C$zur.x+C$zuo.x-C$zue.x-C$zua.x,C$zus.y=C$zur.y+C$zuo.y-C$zue.y-C$zua.y,C$zuc=b2Clamp(this.m_u.Normalize()-this.m_length,-.2,.2);var C$zul=-this.m_mass*C$zuc;C$zul=C$zuj.MulSV(C$zul,C$zus,b2DistanceJoint.SolvePositionConstraints_s_P);return C$zue.SelfMulSub(this.m_invMassA,C$zul),C$zui-=this.m_invIA*C$zuj.CrossVV(C$zua,C$zul),C$zur.SelfMulAdd(this.m_invMassB,C$zul),C$zun+=this.m_invIB*C$zuj.CrossVV(C$zuo,C$zul),C$zut.positions[this.m_indexA].a=C$zui,C$zut.positions[this.m_indexB].a=C$zun,C$zuM(C$zuc)<.008},b2DistanceJoint.InitVelocityConstraints_s_P=new C$zuj,b2DistanceJoint.SolveVelocityConstraints_s_vpA=new C$zuj,b2DistanceJoint.SolveVelocityConstraints_s_vpB=new C$zuj,b2DistanceJoint.SolveVelocityConstraints_s_P=new C$zuj,b2DistanceJoint.SolvePositionConstraints_s_P=new C$zuj;var C$zuGe=b2DistanceJoint;function b2DistanceJoint(C$zut){var C$zue=C$zuUe.call(this,C$zut)||this;return C$zue.m_frequencyHz=0,C$zue.m_dampingRatio=0,C$zue.m_bias=0,C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_gamma=0,C$zue.m_impulse=0,C$zue.m_length=0,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_u=new C$zuj,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_mass=0,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_frequencyHz=b2Maybe(C$zut.frequencyHz,0),C$zue.m_dampingRatio=b2Maybe(C$zut.dampingRatio,0),C$zue.m_localAnchorA.Copy(C$zut.localAnchorA),C$zue.m_localAnchorB.Copy(C$zut.localAnchorB),C$zue.m_length=C$zut.length,C$zue}var C$zuUe;__extends(b2AreaJointDef,C$zuHe=C$zuSET),b2AreaJointDef.prototype.AddBody=function(C$zut){this.bodies.push(C$zut),1===this.bodies.length?this.bodyA=C$zut:2===this.bodies.length&&(this.bodyB=C$zut)};var C$zuWe=b2AreaJointDef;function b2AreaJointDef(){var C$zut=C$zuHe.call(this,C$zuH.b2JointType.e_areaJoint)||this;return C$zut.bodies=[],C$zut.frequencyHz=0,C$zut.dampingRatio=0,C$zut}var C$zuHe;__extends(b2AreaJoint,C$zuXe=C$zuNe),b2AreaJoint.prototype.GetAnchorA=function(C$zut){return C$zut},b2AreaJoint.prototype.GetAnchorB=function(C$zut){return C$zut},b2AreaJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue},b2AreaJoint.prototype.GetReactionTorque=function(C$zut){return 0},b2AreaJoint.prototype.SetFrequency=function(C$zut){this.m_frequencyHz=C$zut;for(var C$zue=0;C$zue<this.m_joints.length;++C$zue)this.m_joints[C$zue].SetFrequency(C$zut)},b2AreaJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},b2AreaJoint.prototype.SetDampingRatio=function(C$zut){this.m_dampingRatio=C$zut;for(var C$zue=0;C$zue<this.m_joints.length;++C$zue)this.m_joints[C$zue].SetDampingRatio(C$zut)},b2AreaJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},b2AreaJoint.prototype.Dump=function(C$zut){C$zut("Area joint dumping is not supported.\n")},b2AreaJoint.prototype.InitVelocityConstraints=function(C$zut){for(var C$zue=0;C$zue<this.m_bodies.length;++C$zue){var C$zui=this.m_bodies[(C$zue+this.m_bodies.length-1)%this.m_bodies.length];var C$zur=this.m_bodies[(C$zue+1)%this.m_bodies.length];C$zui=C$zut.positions[C$zui.m_islandIndex].c;C$zur=C$zut.positions[C$zur.m_islandIndex].c;var C$zun=this.m_deltas[C$zue];C$zuj.SubVV(C$zur,C$zui,C$zun)}if(C$zut.step.warmStarting){this.m_impulse*=C$zut.step.dtRatio;for(C$zue=0;C$zue<this.m_bodies.length;++C$zue){var C$zua=this.m_bodies[C$zue];var C$zuo=C$zut.velocities[C$zua.m_islandIndex].v;C$zun=this.m_deltas[C$zue];C$zuo.x+=C$zua.m_invMass*C$zun.y*.5*this.m_impulse,C$zuo.y+=C$zua.m_invMass*-C$zun.x*.5*this.m_impulse}}else this.m_impulse=0},b2AreaJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=0;var C$zui=0;for(var C$zur=0;C$zur<this.m_bodies.length;++C$zur){var C$zun=this.m_bodies[C$zur];var C$zua=C$zut.velocities[C$zun.m_islandIndex].v;C$zue+=(C$zus=this.m_deltas[C$zur]).LengthSquared()/C$zun.GetMass(),C$zui+=C$zuj.CrossVV(C$zua,C$zus)}var C$zuo=-2*C$zui/C$zue;this.m_impulse+=C$zuo;for(C$zur=0;C$zur<this.m_bodies.length;++C$zur){C$zun=this.m_bodies[C$zur];C$zua=C$zut.velocities[C$zun.m_islandIndex].v;var C$zus=this.m_deltas[C$zur];C$zua.x+=C$zun.m_invMass*C$zus.y*.5*C$zuo,C$zua.y+=C$zun.m_invMass*-C$zus.x*.5*C$zuo}},b2AreaJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zue=0;var C$zui=0;for(var C$zur=0;C$zur<this.m_bodies.length;++C$zur){var C$zun=this.m_bodies[C$zur];var C$zua=this.m_bodies[(C$zur+1)%this.m_bodies.length];var C$zuo=C$zut.positions[C$zun.m_islandIndex].c;C$zua=C$zut.positions[C$zua.m_islandIndex].c;var C$zus=(C$zul=C$zuj.SubVV(C$zua,C$zuo,this.m_delta)).Length();C$zus<C$zuE&&(C$zus=1),this.m_normals[C$zur].x=C$zul.y/C$zus,this.m_normals[C$zur].y=-C$zul.x/C$zus,C$zue+=C$zus,C$zui+=C$zuj.CrossVV(C$zuo,C$zua)}var C$zuh=.5*(this.m_targetArea-(C$zui*=.5))/C$zue;var C$zuu=!0;for(C$zur=0;C$zur<this.m_bodies.length;++C$zur){C$zun=this.m_bodies[C$zur];C$zuo=C$zut.positions[C$zun.m_islandIndex].c;var C$zuc=(C$zur+1)%this.m_bodies.length;var C$zul;(C$zul=C$zuj.AddVV(this.m_normals[C$zur],this.m_normals[C$zuc],this.m_delta)).SelfMul(C$zuh);C$zuc=C$zul.LengthSquared();C$zuc>b2Sq(.2)&&C$zul.SelfMul(.2/C$zuX(C$zuc)),64e-6<C$zuc&&(C$zuu=!1),C$zuo.x+=C$zul.x,C$zuo.y+=C$zul.y}return C$zuu};var C$zuje=b2AreaJoint;function b2AreaJoint(C$zut){var C$zue=C$zuXe.call(this,C$zut)||this;C$zue.m_frequencyHz=0,C$zue.m_dampingRatio=0,C$zue.m_impulse=0,C$zue.m_targetArea=0,C$zue.m_bodies=C$zut.bodies,C$zue.m_frequencyHz=b2Maybe(C$zut.frequencyHz,0),C$zue.m_dampingRatio=b2Maybe(C$zut.dampingRatio,0),C$zue.m_targetLengths=b2MakeNumberArray(C$zut.bodies.length),C$zue.m_normals=C$zuj.MakeArray(C$zut.bodies.length),C$zue.m_joints=[],C$zue.m_deltas=C$zuj.MakeArray(C$zut.bodies.length),C$zue.m_delta=new C$zuj;var C$zui=new C$zuke;C$zui.frequencyHz=C$zue.m_frequencyHz,C$zui.dampingRatio=C$zue.m_dampingRatio;for(var C$zur=C$zue.m_targetArea=0;C$zur<C$zue.m_bodies.length;++C$zur){var C$zun=C$zue.m_bodies[C$zur];var C$zua=C$zue.m_bodies[(C$zur+1)%C$zue.m_bodies.length];var C$zuo=C$zun.GetWorldCenter();var C$zus=C$zua.GetWorldCenter();C$zue.m_targetLengths[C$zur]=C$zuj.DistanceVV(C$zuo,C$zus),C$zue.m_targetArea+=C$zuj.CrossVV(C$zuo,C$zus),C$zui.Initialize(C$zun,C$zua,C$zuo,C$zus),C$zue.m_joints[C$zur]=C$zun.GetWorld().CreateJoint(C$zui)}return C$zue.m_targetArea*=.5,C$zue}var C$zuXe;__extends(b2FrictionJointDef,C$zuJe=C$zuSET),b2FrictionJointDef.prototype.Initialize=function(C$zut,C$zue,C$zui){this.bodyA=C$zut,this.bodyB=C$zue,this.bodyA.GetLocalPoint(C$zui,this.localAnchorA),this.bodyB.GetLocalPoint(C$zui,this.localAnchorB)};var C$zuqe=b2FrictionJointDef;function b2FrictionJointDef(){var C$zut=C$zuJe.call(this,C$zuH.b2JointType.e_frictionJoint)||this;return C$zut.localAnchorA=new C$zuj,C$zut.localAnchorB=new C$zuj,C$zut.maxForce=0,C$zut.maxTorque=0,C$zut}var C$zuJe;__extends(b2FrictionJoint,C$zu$e=C$zuNe),b2FrictionJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuh=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.positions[this.m_indexB].a;var C$zuu=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;C$zue=this.m_qA.SetAngle(C$zue),C$zur=this.m_qB.SetAngle(C$zur);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);C$zue=C$zuR.MulRV(C$zue,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);C$zur=C$zuR.MulRV(C$zur,this.m_lalcB,this.m_rB);var C$zua=this.m_invMassA,C$zuo=this.m_invMassB;var C$zus=this.m_invIA,C$zuc=this.m_invIB;var C$zul=this.m_K;C$zul.ex.x=C$zua+C$zuo+C$zus*C$zue.y*C$zue.y+C$zuc*C$zur.y*C$zur.y,C$zul.ex.y=-C$zus*C$zue.x*C$zue.y-C$zuc*C$zur.x*C$zur.y,C$zul.ey.x=C$zul.ex.y,C$zul.ey.y=C$zua+C$zuo+C$zus*C$zue.x*C$zue.x+C$zuc*C$zur.x*C$zur.x,C$zul.GetInverse(this.m_linearMass),this.m_angularMass=C$zus+C$zuc,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),C$zut.step.warmStarting?(this.m_linearImpulse.SelfMul(C$zut.step.dtRatio),this.m_angularImpulse*=C$zut.step.dtRatio,C$zue=this.m_linearImpulse,C$zuh.SelfMulSub(C$zua,C$zue),C$zui-=C$zus*(C$zuj.CrossVV(this.m_rA,C$zue)+this.m_angularImpulse),C$zuu.SelfMulAdd(C$zuo,C$zue),C$zun+=C$zuc*(C$zuj.CrossVV(this.m_rB,C$zue)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2FrictionJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zuh=this.m_invMassA,C$zuu=this.m_invMassB;var C$zua=this.m_invIA,C$zuo=this.m_invIB;var C$zu_=C$zut.step.dt;var C$zus=-this.m_angularMass*(C$zun-C$zui);var C$zuc=this.m_angularImpulse;var C$zul=C$zu_*this.m_maxTorque;this.m_angularImpulse=b2Clamp(this.m_angularImpulse+C$zus,-C$zul,C$zul),C$zui-=C$zua*(C$zus=this.m_angularImpulse-C$zuc);C$zuc=C$zuj.SubVV(C$zuj.AddVCrossSV(C$zur,C$zun+=C$zuo*C$zus,this.m_rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,C$zuj.s_t1),b2FrictionJoint.SolveVelocityConstraints_s_Cdot_v2);C$zus=C$zug.MulMV(this.m_linearMass,C$zuc,b2FrictionJoint.SolveVelocityConstraints_s_impulseV).SelfNeg();C$zuc=b2FrictionJoint.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(C$zus);C$zul=C$zu_*this.m_maxForce;this.m_linearImpulse.LengthSquared()>C$zul*C$zul&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(C$zul)),C$zuj.SubVV(this.m_linearImpulse,C$zuc,C$zus),C$zue.SelfMulSub(C$zuh,C$zus),C$zui-=C$zua*C$zuj.CrossVV(this.m_rA,C$zus),C$zur.SelfMulAdd(C$zuu,C$zus),C$zun+=C$zuo*C$zuj.CrossVV(this.m_rB,C$zus),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2FrictionJoint.prototype.SolvePositionConstraints=function(C$zut){return!0},b2FrictionJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2FrictionJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2FrictionJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue.x=C$zut*this.m_linearImpulse.x,C$zue.y=C$zut*this.m_linearImpulse.y,C$zue},b2FrictionJoint.prototype.GetReactionTorque=function(C$zut){return C$zut*this.m_angularImpulse},b2FrictionJoint.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},b2FrictionJoint.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},b2FrictionJoint.prototype.SetMaxForce=function(C$zut){this.m_maxForce=C$zut},b2FrictionJoint.prototype.GetMaxForce=function(){return this.m_maxForce},b2FrictionJoint.prototype.SetMaxTorque=function(C$zut){this.m_maxTorque=C$zut},b2FrictionJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque},b2FrictionJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.maxForce = %.15f;\n",this.m_maxForce),C$zut("  jd.maxTorque = %.15f;\n",this.m_maxTorque),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2FrictionJoint.SolveVelocityConstraints_s_Cdot_v2=new C$zuj,b2FrictionJoint.SolveVelocityConstraints_s_impulseV=new C$zuj,b2FrictionJoint.SolveVelocityConstraints_s_oldImpulseV=new C$zuj;var C$zuYe=b2FrictionJoint;function b2FrictionJoint(C$zut){var C$zue=C$zu$e.call(this,C$zut)||this;return C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_linearImpulse=new C$zuj,C$zue.m_angularImpulse=0,C$zue.m_maxForce=0,C$zue.m_maxTorque=0,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_linearMass=new C$zug,C$zue.m_angularMass=0,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_K=new C$zug,C$zue.m_localAnchorA.Copy(C$zut.localAnchorA),C$zue.m_localAnchorB.Copy(C$zut.localAnchorB),C$zue.m_linearImpulse.SetZero(),C$zue.m_maxForce=b2Maybe(C$zut.maxForce,0),C$zue.m_maxTorque=b2Maybe(C$zut.maxTorque,0),C$zue.m_linearMass.SetZero(),C$zue}var C$zu$e;__extends(b2GearJointDef,C$zuQe=C$zuSET);var C$zuZe=b2GearJointDef;function b2GearJointDef(){var C$zut=C$zuQe.call(this,C$zuH.b2JointType.e_gearJoint)||this;return C$zut.ratio=1,C$zut}var C$zuQe;__extends(b2GearJoint,C$zuti=C$zuNe),b2GearJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuh=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.positions[this.m_indexB].a;var C$zuu=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zua=C$zut.positions[this.m_indexC].a;var C$zu_=C$zut.velocities[this.m_indexC].v;var C$zuo=C$zut.velocities[this.m_indexC].w;var C$zus=C$zut.positions[this.m_indexD].a;var C$zud=C$zut.velocities[this.m_indexD].v;var C$zuc=C$zut.velocities[this.m_indexD].w;C$zue=this.m_qA.SetAngle(C$zue),C$zur=this.m_qB.SetAngle(C$zur),C$zua=this.m_qC.SetAngle(C$zua),C$zus=this.m_qD.SetAngle(C$zus);var C$zul;this.m_mass=0,this.m_typeA===C$zuH.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC):(C$zul=C$zuR.MulRV(C$zua,this.m_localAxisC,b2GearJoint.InitVelocityConstraints_s_u),C$zuj.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC),C$zua=C$zuR.MulRV(C$zua,this.m_lalcC,b2GearJoint.InitVelocityConstraints_s_rC),C$zuj.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA),C$zue=C$zuR.MulRV(C$zue,this.m_lalcA,b2GearJoint.InitVelocityConstraints_s_rA),this.m_JvAC.Copy(C$zul),this.m_JwC=C$zuj.CrossVV(C$zua,C$zul),this.m_JwA=C$zuj.CrossVV(C$zue,C$zul),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA),this.m_typeB===C$zuH.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD)):(C$zul=C$zuR.MulRV(C$zus,this.m_localAxisD,b2GearJoint.InitVelocityConstraints_s_u),C$zuj.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD),C$zua=C$zuR.MulRV(C$zus,this.m_lalcD,b2GearJoint.InitVelocityConstraints_s_rD),C$zuj.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB),C$zue=C$zuR.MulRV(C$zur,this.m_lalcB,b2GearJoint.InitVelocityConstraints_s_rB),C$zuj.MulSV(this.m_ratio,C$zul,this.m_JvBD),this.m_JwD=this.m_ratio*C$zuj.CrossVV(C$zua,C$zul),this.m_JwB=this.m_ratio*C$zuj.CrossVV(C$zue,C$zul),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB),this.m_mass=0<this.m_mass?1/this.m_mass:0,C$zut.step.warmStarting?(C$zuh.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),C$zui+=this.m_iA*this.m_impulse*this.m_JwA,C$zuu.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),C$zun+=this.m_iB*this.m_impulse*this.m_JwB,C$zu_.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),C$zuo-=this.m_iC*this.m_impulse*this.m_JwC,C$zud.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),C$zuc-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun,C$zut.velocities[this.m_indexC].w=C$zuo,C$zut.velocities[this.m_indexD].w=C$zuc},b2GearJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zua=C$zut.velocities[this.m_indexC].v;var C$zuo=C$zut.velocities[this.m_indexC].w;var C$zus=C$zut.velocities[this.m_indexD].v;var C$zuc=C$zut.velocities[this.m_indexD].w;var C$zul=C$zuj.DotVV(this.m_JvAC,C$zuj.SubVV(C$zue,C$zua,C$zuj.s_t0))+C$zuj.DotVV(this.m_JvBD,C$zuj.SubVV(C$zur,C$zus,C$zuj.s_t0));C$zul+=this.m_JwA*C$zui-this.m_JwC*C$zuo+(this.m_JwB*C$zun-this.m_JwD*C$zuc);C$zul=-this.m_mass*C$zul;this.m_impulse+=C$zul,C$zue.SelfMulAdd(this.m_mA*C$zul,this.m_JvAC),C$zui+=this.m_iA*C$zul*this.m_JwA,C$zur.SelfMulAdd(this.m_mB*C$zul,this.m_JvBD),C$zun+=this.m_iB*C$zul*this.m_JwB,C$zua.SelfMulSub(this.m_mC*C$zul,this.m_JvAC),C$zuo-=this.m_iC*C$zul*this.m_JwC,C$zus.SelfMulSub(this.m_mD*C$zul,this.m_JvBD),C$zuc-=this.m_iD*C$zul*this.m_JwD,C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun,C$zut.velocities[this.m_indexC].w=C$zuo,C$zut.velocities[this.m_indexD].w=C$zuc},b2GearJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zuh=C$zut.positions[this.m_indexA].c;var C$zuu=C$zut.positions[this.m_indexA].a;var C$zu_=C$zut.positions[this.m_indexB].c;var C$zud=C$zut.positions[this.m_indexB].a;var C$zuf=C$zut.positions[this.m_indexC].c;var C$zup=C$zut.positions[this.m_indexC].a;var C$zum=C$zut.positions[this.m_indexD].c;var C$zuv=C$zut.positions[this.m_indexD].a;var C$zue=this.m_qA.SetAngle(C$zuu),C$zuy=this.m_qB.SetAngle(C$zud),C$zui=this.m_qC.SetAngle(C$zup),C$zur=this.m_qD.SetAngle(C$zuv);var C$zug=this.m_JvAC,C$zub=this.m_JvBD;var C$zun,C$zua,C$zuo,C$zuC;var C$zus=0;var C$zuc;C$zue=this.m_typeA===C$zuH.b2JointType.e_revoluteJoint?(C$zug.SetZero(),C$zuo=C$zun=1,C$zus+=this.m_iA+this.m_iC,C$zuu-C$zup-this.m_referenceAngleA):(C$zuc=C$zuR.MulRV(C$zui,this.m_localAxisC,b2GearJoint.SolvePositionConstraints_s_u),C$zul=C$zuR.MulRV(C$zui,this.m_lalcC,b2GearJoint.SolvePositionConstraints_s_rC),C$zue=C$zuR.MulRV(C$zue,this.m_lalcA,b2GearJoint.SolvePositionConstraints_s_rA),C$zug.Copy(C$zuc),C$zuo=C$zuj.CrossVV(C$zul,C$zuc),C$zun=C$zuj.CrossVV(C$zue,C$zuc),C$zus+=this.m_mC+this.m_mA+this.m_iC*C$zuo*C$zuo+this.m_iA*C$zun*C$zun,C$zul=this.m_lalcC,C$zui=C$zuR.MulTRV(C$zui,C$zuj.AddVV(C$zue,C$zuj.SubVV(C$zuh,C$zuf,C$zuj.s_t0),C$zuj.s_t0),C$zuj.s_t0),C$zuj.DotVV(C$zuj.SubVV(C$zui,C$zul,C$zuj.s_t0),this.m_localAxisC)),C$zuc=this.m_typeB===C$zuH.b2JointType.e_revoluteJoint?(C$zub.SetZero(),C$zua=this.m_ratio,C$zuC=this.m_ratio,C$zus+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),C$zud-C$zuv-this.m_referenceAngleB):(C$zuc=C$zuR.MulRV(C$zur,this.m_localAxisD,b2GearJoint.SolvePositionConstraints_s_u),C$zui=C$zuR.MulRV(C$zur,this.m_lalcD,b2GearJoint.SolvePositionConstraints_s_rD),C$zul=C$zuR.MulRV(C$zuy,this.m_lalcB,b2GearJoint.SolvePositionConstraints_s_rB),C$zuj.MulSV(this.m_ratio,C$zuc,C$zub),C$zuC=this.m_ratio*C$zuj.CrossVV(C$zui,C$zuc),C$zua=this.m_ratio*C$zuj.CrossVV(C$zul,C$zuc),C$zus+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*C$zuC*C$zuC+this.m_iB*C$zua*C$zua,C$zuy=this.m_lalcD,C$zui=C$zuR.MulTRV(C$zur,C$zuj.AddVV(C$zul,C$zuj.SubVV(C$zu_,C$zum,C$zuj.s_t0),C$zuj.s_t0),C$zuj.s_t0),C$zuj.DotVV(C$zuj.SubVV(C$zui,C$zuy,C$zuj.s_t0),this.m_localAxisD));C$zur=C$zue+this.m_ratio*C$zuc-this.m_constant;var C$zul=0;return C$zuh.SelfMulAdd(this.m_mA*(C$zul=0<C$zus?-C$zur/C$zus:C$zul),C$zug),C$zuu+=this.m_iA*C$zul*C$zun,C$zu_.SelfMulAdd(this.m_mB*C$zul,C$zub),C$zud+=this.m_iB*C$zul*C$zua,C$zuf.SelfMulSub(this.m_mC*C$zul,C$zug),C$zup-=this.m_iC*C$zul*C$zuo,C$zum.SelfMulSub(this.m_mD*C$zul,C$zub),C$zuv-=this.m_iD*C$zul*C$zuC,C$zut.positions[this.m_indexA].a=C$zuu,C$zut.positions[this.m_indexB].a=C$zud,C$zut.positions[this.m_indexC].a=C$zup,C$zut.positions[this.m_indexD].a=C$zuv,!0},b2GearJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2GearJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2GearJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zuj.MulSV(C$zut*this.m_impulse,this.m_JvAC,C$zue)},b2GearJoint.prototype.GetReactionTorque=function(C$zut){return C$zut*this.m_impulse*this.m_JwA},b2GearJoint.prototype.GetJoint1=function(){return this.m_joint1},b2GearJoint.prototype.GetJoint2=function(){return this.m_joint2},b2GearJoint.prototype.GetRatio=function(){return this.m_ratio},b2GearJoint.prototype.SetRatio=function(C$zut){this.m_ratio=C$zut},b2GearJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;var C$zur=this.m_joint1.m_index;var C$zun=this.m_joint2.m_index;C$zut("  const jd: b2GearJointDef = new b2GearJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.joint1 = joints[%d];\n",C$zur),C$zut("  jd.joint2 = joints[%d];\n",C$zun),C$zut("  jd.ratio = %.15f;\n",this.m_ratio),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2GearJoint.InitVelocityConstraints_s_u=new C$zuj,b2GearJoint.InitVelocityConstraints_s_rA=new C$zuj,b2GearJoint.InitVelocityConstraints_s_rB=new C$zuj,b2GearJoint.InitVelocityConstraints_s_rC=new C$zuj,b2GearJoint.InitVelocityConstraints_s_rD=new C$zuj,b2GearJoint.SolvePositionConstraints_s_u=new C$zuj,b2GearJoint.SolvePositionConstraints_s_rA=new C$zuj,b2GearJoint.SolvePositionConstraints_s_rB=new C$zuj,b2GearJoint.SolvePositionConstraints_s_rC=new C$zuj,b2GearJoint.SolvePositionConstraints_s_rD=new C$zuj;var C$zuKe=b2GearJoint;function b2GearJoint(C$zut){var C$zue=C$zuti.call(this,C$zut)||this;C$zue.m_typeA=C$zuH.b2JointType.e_unknownJoint,C$zue.m_typeB=C$zuH.b2JointType.e_unknownJoint,C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_localAnchorC=new C$zuj,C$zue.m_localAnchorD=new C$zuj,C$zue.m_localAxisC=new C$zuj,C$zue.m_localAxisD=new C$zuj,C$zue.m_referenceAngleA=0,C$zue.m_referenceAngleB=0,C$zue.m_constant=0,C$zue.m_ratio=0,C$zue.m_impulse=0,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_indexC=0,C$zue.m_indexD=0,C$zue.m_lcA=new C$zuj,C$zue.m_lcB=new C$zuj,C$zue.m_lcC=new C$zuj,C$zue.m_lcD=new C$zuj,C$zue.m_mA=0,C$zue.m_mB=0,C$zue.m_mC=0,C$zue.m_mD=0,C$zue.m_iA=0,C$zue.m_iB=0,C$zue.m_iC=0,C$zue.m_iD=0,C$zue.m_JvAC=new C$zuj,C$zue.m_JvBD=new C$zuj,C$zue.m_JwA=0,C$zue.m_JwB=0,C$zue.m_JwC=0,C$zue.m_JwD=0,C$zue.m_mass=0,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_qC=new C$zuR,C$zue.m_qD=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_lalcC=new C$zuj,C$zue.m_lalcD=new C$zuj,C$zue.m_joint1=C$zut.joint1,C$zue.m_joint2=C$zut.joint2,C$zue.m_typeA=C$zue.m_joint1.GetType(),C$zue.m_typeB=C$zue.m_joint2.GetType(),C$zue.m_bodyC=C$zue.m_joint1.GetBodyA(),C$zue.m_bodyA=C$zue.m_joint1.GetBodyB();var C$zui=C$zue.m_bodyA.m_xf;var C$zur=C$zue.m_bodyA.m_sweep.a;var C$zun=C$zue.m_bodyC.m_xf;var C$zua=C$zue.m_bodyC.m_sweep.a;C$zui=C$zue.m_typeA===C$zuH.b2JointType.e_revoluteJoint?(C$zuc=C$zut.joint1,C$zue.m_localAnchorC.Copy(C$zuc.m_localAnchorA),C$zue.m_localAnchorA.Copy(C$zuc.m_localAnchorB),C$zue.m_referenceAngleA=C$zuc.m_referenceAngle,C$zue.m_localAxisC.SetZero(),C$zur-C$zua-C$zue.m_referenceAngleA):(C$zus=C$zut.joint1,C$zue.m_localAnchorC.Copy(C$zus.m_localAnchorA),C$zue.m_localAnchorA.Copy(C$zus.m_localAnchorB),C$zue.m_referenceAngleA=C$zus.m_referenceAngle,C$zue.m_localAxisC.Copy(C$zus.m_localXAxisA),C$zur=C$zue.m_localAnchorC,C$zua=C$zuR.MulTRV(C$zun.q,C$zuj.AddVV(C$zuR.MulRV(C$zui.q,C$zue.m_localAnchorA,C$zuj.s_t0),C$zuj.SubVV(C$zui.p,C$zun.p,C$zuj.s_t1),C$zuj.s_t0),C$zuj.s_t0),C$zuj.DotVV(C$zuj.SubVV(C$zua,C$zur,C$zuj.s_t0),C$zue.m_localAxisC)),C$zue.m_bodyD=C$zue.m_joint2.GetBodyA(),C$zue.m_bodyB=C$zue.m_joint2.GetBodyB();C$zun=C$zue.m_bodyB.m_xf;C$zua=C$zue.m_bodyB.m_sweep.a;C$zur=C$zue.m_bodyD.m_xf;var C$zuo=C$zue.m_bodyD.m_sweep.a;var C$zus,C$zuc;return C$zuo=C$zue.m_typeB===C$zuH.b2JointType.e_revoluteJoint?(C$zuc=C$zut.joint2,C$zue.m_localAnchorD.Copy(C$zuc.m_localAnchorA),C$zue.m_localAnchorB.Copy(C$zuc.m_localAnchorB),C$zue.m_referenceAngleB=C$zuc.m_referenceAngle,C$zue.m_localAxisD.SetZero(),C$zua-C$zuo-C$zue.m_referenceAngleB):(C$zus=C$zut.joint2,C$zue.m_localAnchorD.Copy(C$zus.m_localAnchorA),C$zue.m_localAnchorB.Copy(C$zus.m_localAnchorB),C$zue.m_referenceAngleB=C$zus.m_referenceAngle,C$zue.m_localAxisD.Copy(C$zus.m_localXAxisA),C$zuc=C$zue.m_localAnchorD,C$zua=C$zuR.MulTRV(C$zur.q,C$zuj.AddVV(C$zuR.MulRV(C$zun.q,C$zue.m_localAnchorB,C$zuj.s_t0),C$zuj.SubVV(C$zun.p,C$zur.p,C$zuj.s_t1),C$zuj.s_t0),C$zuj.s_t0),C$zuj.DotVV(C$zuj.SubVV(C$zua,C$zuc,C$zuj.s_t0),C$zue.m_localAxisD)),C$zue.m_ratio=b2Maybe(C$zut.ratio,1),C$zue.m_constant=C$zui+C$zue.m_ratio*C$zuo,C$zue.m_impulse=0,C$zue}var C$zuti;__extends(b2MotorJointDef,C$zuii=C$zuSET),b2MotorJointDef.prototype.Initialize=function(C$zut,C$zue){this.bodyA=C$zut,this.bodyB=C$zue,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);C$zut=this.bodyA.GetAngle();C$zue=this.bodyB.GetAngle();this.angularOffset=C$zue-C$zut};var C$zuei=b2MotorJointDef;function b2MotorJointDef(){var C$zut=C$zuii.call(this,C$zuH.b2JointType.e_motorJoint)||this;return C$zut.linearOffset=new C$zuj(0,0),C$zut.angularOffset=0,C$zut.maxForce=1,C$zut.maxTorque=1,C$zut.correctionFactor=.3,C$zut}var C$zuii;__extends(b2MotorJoint,C$zuni=C$zuNe),b2MotorJoint.prototype.GetAnchorA=function(C$zut){var C$zue=this.m_bodyA.GetPosition();return C$zut.x=C$zue.x,C$zut.y=C$zue.y,C$zut},b2MotorJoint.prototype.GetAnchorB=function(C$zut){var C$zue=this.m_bodyB.GetPosition();return C$zut.x=C$zue.x,C$zut.y=C$zue.y,C$zut},b2MotorJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zuj.MulSV(C$zut,this.m_linearImpulse,C$zue)},b2MotorJoint.prototype.GetReactionTorque=function(C$zut){return C$zut*this.m_angularImpulse},b2MotorJoint.prototype.SetLinearOffset=function(C$zut){C$zuj.IsEqualToV(C$zut,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(C$zut))},b2MotorJoint.prototype.GetLinearOffset=function(){return this.m_linearOffset},b2MotorJoint.prototype.SetAngularOffset=function(C$zut){C$zut!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=C$zut)},b2MotorJoint.prototype.GetAngularOffset=function(){return this.m_angularOffset},b2MotorJoint.prototype.SetMaxForce=function(C$zut){this.m_maxForce=C$zut},b2MotorJoint.prototype.GetMaxForce=function(){return this.m_maxForce},b2MotorJoint.prototype.SetMaxTorque=function(C$zut){this.m_maxTorque=C$zut},b2MotorJoint.prototype.GetMaxTorque=function(){return this.m_maxTorque},b2MotorJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zuh=C$zut.positions[this.m_indexA].c;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuu=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zu_=C$zut.positions[this.m_indexB].c;var C$zud=C$zut.positions[this.m_indexB].a;var C$zuf=C$zut.velocities[this.m_indexB].v;var C$zup=C$zut.velocities[this.m_indexB].w;var C$zur=this.m_qA.SetAngle(C$zue),C$zun=this.m_qB.SetAngle(C$zud);C$zur=C$zuR.MulRV(C$zur,C$zuj.SubVV(this.m_linearOffset,this.m_localCenterA,C$zuj.s_t0),this.m_rA);C$zun=C$zuR.MulRV(C$zun,C$zuj.NegV(this.m_localCenterB,C$zuj.s_t0),this.m_rB);var C$zua=this.m_invMassA,C$zuo=this.m_invMassB;var C$zus=this.m_invIA,C$zuc=this.m_invIB;var C$zul=this.m_K;C$zul.ex.x=C$zua+C$zuo+C$zus*C$zur.y*C$zur.y+C$zuc*C$zun.y*C$zun.y,C$zul.ex.y=-C$zus*C$zur.x*C$zur.y-C$zuc*C$zun.x*C$zun.y,C$zul.ey.x=C$zul.ex.y,C$zul.ey.y=C$zua+C$zuo+C$zus*C$zur.x*C$zur.x+C$zuc*C$zun.x*C$zun.x,C$zul.GetInverse(this.m_linearMass),this.m_angularMass=C$zus+C$zuc,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),C$zuj.SubVV(C$zuj.AddVV(C$zu_,C$zun,C$zuj.s_t0),C$zuj.AddVV(C$zuh,C$zur,C$zuj.s_t1),this.m_linearError),this.m_angularError=C$zud-C$zue-this.m_angularOffset,C$zut.step.warmStarting?(this.m_linearImpulse.SelfMul(C$zut.step.dtRatio),this.m_angularImpulse*=C$zut.step.dtRatio,C$zul=this.m_linearImpulse,C$zuu.SelfMulSub(C$zua,C$zul),C$zui-=C$zus*(C$zuj.CrossVV(C$zur,C$zul)+this.m_angularImpulse),C$zuf.SelfMulAdd(C$zuo,C$zul),C$zup+=C$zuc*(C$zuj.CrossVV(C$zun,C$zul)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zup},b2MotorJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zuh=this.m_invMassA,C$zuu=this.m_invMassB;var C$zua=this.m_invIA,C$zu_=this.m_invIB;var C$zud=C$zut.step.dt;var C$zuo=C$zut.step.inv_dt;var C$zus=C$zun-C$zui+C$zuo*this.m_correctionFactor*this.m_angularError;C$zus=-this.m_angularMass*C$zus;var C$zuc=this.m_angularImpulse;var C$zul=C$zud*this.m_maxTorque;this.m_angularImpulse=b2Clamp(this.m_angularImpulse+C$zus,-C$zul,C$zul),C$zui-=C$zua*(C$zus=this.m_angularImpulse-C$zuc);C$zuc=this.m_rA;var C$zuf=this.m_rB;C$zus=C$zuj.AddVV(C$zuj.SubVV(C$zuj.AddVV(C$zur,C$zuj.CrossSV(C$zun+=C$zu_*C$zus,C$zuf,C$zuj.s_t0),C$zuj.s_t0),C$zuj.AddVV(C$zue,C$zuj.CrossSV(C$zui,C$zuc,C$zuj.s_t1),C$zuj.s_t1),C$zuj.s_t2),C$zuj.MulSV(C$zuo*this.m_correctionFactor,this.m_linearError,C$zuj.s_t3),b2MotorJoint.SolveVelocityConstraints_s_Cdot_v2);C$zuo=C$zug.MulMV(this.m_linearMass,C$zus,b2MotorJoint.SolveVelocityConstraints_s_impulse_v2).SelfNeg();C$zus=b2MotorJoint.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(C$zuo);C$zul=C$zud*this.m_maxForce;this.m_linearImpulse.LengthSquared()>C$zul*C$zul&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(C$zul)),C$zuj.SubVV(this.m_linearImpulse,C$zus,C$zuo),C$zue.SelfMulSub(C$zuh,C$zuo),C$zui-=C$zua*C$zuj.CrossVV(C$zuc,C$zuo),C$zur.SelfMulAdd(C$zuu,C$zuo),C$zun+=C$zu_*C$zuj.CrossVV(C$zuf,C$zuo),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2MotorJoint.prototype.SolvePositionConstraints=function(C$zut){return!0},b2MotorJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),C$zut("  jd.angularOffset = %.15f;\n",this.m_angularOffset),C$zut("  jd.maxForce = %.15f;\n",this.m_maxForce),C$zut("  jd.maxTorque = %.15f;\n",this.m_maxTorque),C$zut("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2MotorJoint.SolveVelocityConstraints_s_Cdot_v2=new C$zuj,b2MotorJoint.SolveVelocityConstraints_s_impulse_v2=new C$zuj,b2MotorJoint.SolveVelocityConstraints_s_oldImpulse_v2=new C$zuj;var C$zuri=b2MotorJoint;function b2MotorJoint(C$zut){var C$zue=C$zuni.call(this,C$zut)||this;return C$zue.m_linearOffset=new C$zuj,C$zue.m_angularOffset=0,C$zue.m_linearImpulse=new C$zuj,C$zue.m_angularImpulse=0,C$zue.m_maxForce=0,C$zue.m_maxTorque=0,C$zue.m_correctionFactor=.3,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_linearError=new C$zuj,C$zue.m_angularError=0,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_linearMass=new C$zug,C$zue.m_angularMass=0,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_K=new C$zug,C$zue.m_linearOffset.Copy(b2Maybe(C$zut.linearOffset,C$zuj.ZERO)),C$zue.m_linearImpulse.SetZero(),C$zue.m_maxForce=b2Maybe(C$zut.maxForce,0),C$zue.m_maxTorque=b2Maybe(C$zut.maxTorque,0),C$zue.m_correctionFactor=b2Maybe(C$zut.correctionFactor,.3),C$zue}var C$zuni;__extends(b2MouseJointDef,C$zuoi=C$zuSET);var C$zuai=b2MouseJointDef;function b2MouseJointDef(){var C$zut=C$zuoi.call(this,C$zuH.b2JointType.e_mouseJoint)||this;return C$zut.target=new C$zuj,C$zut.maxForce=0,C$zut.frequencyHz=5,C$zut.dampingRatio=.7,C$zut}var C$zuoi;__extends(b2MouseJoint,C$zuci=C$zuNe),b2MouseJoint.prototype.SetTarget=function(C$zut){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(C$zut)},b2MouseJoint.prototype.GetTarget=function(){return this.m_targetA},b2MouseJoint.prototype.SetMaxForce=function(C$zut){this.m_maxForce=C$zut},b2MouseJoint.prototype.GetMaxForce=function(){return this.m_maxForce},b2MouseJoint.prototype.SetFrequency=function(C$zut){this.m_frequencyHz=C$zut},b2MouseJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},b2MouseJoint.prototype.SetDampingRatio=function(C$zut){this.m_dampingRatio=C$zut},b2MouseJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},b2MouseJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexB].c;var C$zui=C$zut.positions[this.m_indexB].a;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;C$zui=this.m_qB.SetAngle(C$zui);var C$zua=this.m_bodyB.GetMass();var C$zuo=2*C$zum*this.m_frequencyHz;var C$zus=2*C$zua*this.m_dampingRatio*C$zuo;C$zua*=C$zuo*C$zuo;C$zuo=C$zut.step.dt;this.m_gamma=C$zuo*(C$zus+C$zuo*C$zua),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=C$zuo*C$zua*this.m_gamma,C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$zuR.MulRV(C$zui,this.m_lalcB,this.m_rB);C$zus=this.m_K;C$zus.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,C$zus.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,C$zus.ey.x=C$zus.ex.y,C$zus.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,C$zus.GetInverse(this.m_mass),this.m_C.x=C$zue.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=C$zue.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),C$zun*=.98,C$zut.step.warmStarting?(this.m_impulse.SelfMul(C$zut.step.dtRatio),C$zur.x+=this.m_invMassB*this.m_impulse.x,C$zur.y+=this.m_invMassB*this.m_impulse.y,C$zun+=this.m_invIB*C$zuj.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),C$zut.velocities[this.m_indexB].w=C$zun},b2MouseJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexB].v;var C$zui=C$zut.velocities[this.m_indexB].w;var C$zur=C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rB,b2MouseJoint.SolveVelocityConstraints_s_Cdot);C$zur=C$zug.MulMV(this.m_mass,C$zuj.AddVV(C$zur,C$zuj.AddVV(this.m_C,C$zuj.MulSV(this.m_gamma,this.m_impulse,C$zuj.s_t0),C$zuj.s_t0),C$zuj.s_t0).SelfNeg(),b2MouseJoint.SolveVelocityConstraints_s_impulse);var C$zun=b2MouseJoint.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(C$zur);var C$zua=C$zut.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>C$zua*C$zua&&this.m_impulse.SelfMul(C$zua/this.m_impulse.Length()),C$zuj.SubVV(this.m_impulse,C$zun,C$zur),C$zue.SelfMulAdd(this.m_invMassB,C$zur),C$zui+=this.m_invIB*C$zuj.CrossVV(this.m_rB,C$zur),C$zut.velocities[this.m_indexB].w=C$zui},b2MouseJoint.prototype.SolvePositionConstraints=function(C$zut){return!0},b2MouseJoint.prototype.GetAnchorA=function(C$zut){return C$zut.x=this.m_targetA.x,C$zut.y=this.m_targetA.y,C$zut},b2MouseJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2MouseJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zuj.MulSV(C$zut,this.m_impulse,C$zue)},b2MouseJoint.prototype.GetReactionTorque=function(C$zut){return 0},b2MouseJoint.prototype.Dump=function(C$zut){C$zut("Mouse joint dumping is not supported.\n")},b2MouseJoint.prototype.ShiftOrigin=function(C$zut){this.m_targetA.SelfSub(C$zut)},b2MouseJoint.SolveVelocityConstraints_s_Cdot=new C$zuj,b2MouseJoint.SolveVelocityConstraints_s_impulse=new C$zuj,b2MouseJoint.SolveVelocityConstraints_s_oldImpulse=new C$zuj;var C$zusi=b2MouseJoint;function b2MouseJoint(C$zut){var C$zue=C$zuci.call(this,C$zut)||this;return C$zue.m_localAnchorB=new C$zuj,C$zue.m_targetA=new C$zuj,C$zue.m_frequencyHz=0,C$zue.m_dampingRatio=0,C$zue.m_beta=0,C$zue.m_impulse=new C$zuj,C$zue.m_maxForce=0,C$zue.m_gamma=0,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_rB=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassB=0,C$zue.m_invIB=0,C$zue.m_mass=new C$zug,C$zue.m_C=new C$zuj,C$zue.m_qB=new C$zuR,C$zue.m_lalcB=new C$zuj,C$zue.m_K=new C$zug,C$zue.m_targetA.Copy(b2Maybe(C$zut.target,C$zuj.ZERO)),C$zuI.MulTXV(C$zue.m_bodyB.GetTransform(),C$zue.m_targetA,C$zue.m_localAnchorB),C$zue.m_maxForce=b2Maybe(C$zut.maxForce,0),C$zue.m_impulse.SetZero(),C$zue.m_frequencyHz=b2Maybe(C$zut.frequencyHz,0),C$zue.m_dampingRatio=b2Maybe(C$zut.dampingRatio,0),C$zue.m_beta=0,C$zue.m_gamma=0,C$zue}var C$zuci;__extends(b2PrismaticJointDef,C$zuhi=C$zuSET),b2PrismaticJointDef.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur){this.bodyA=C$zut,this.bodyB=C$zue,this.bodyA.GetLocalPoint(C$zui,this.localAnchorA),this.bodyB.GetLocalPoint(C$zui,this.localAnchorB),this.bodyA.GetLocalVector(C$zur,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$zuli=b2PrismaticJointDef;function b2PrismaticJointDef(){var C$zut=C$zuhi.call(this,C$zuH.b2JointType.e_prismaticJoint)||this;return C$zut.localAnchorA=new C$zuj,C$zut.localAnchorB=new C$zuj,C$zut.localAxisA=new C$zuj(1,0),C$zut.referenceAngle=0,C$zut.enableLimit=!1,C$zut.lowerTranslation=0,C$zut.upperTranslation=0,C$zut.enableMotor=!1,C$zut.maxMotorForce=0,C$zut.motorSpeed=0,C$zut}var C$zuhi;__extends(b2PrismaticJoint,C$zu_i=C$zuNe),b2PrismaticJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexA].c;var C$zui=C$zut.positions[this.m_indexA].a;var C$zuh=C$zut.velocities[this.m_indexA].v;var C$zur=C$zut.velocities[this.m_indexA].w;var C$zun=C$zut.positions[this.m_indexB].c;var C$zua=C$zut.positions[this.m_indexB].a;var C$zuu=C$zut.velocities[this.m_indexB].v;var C$zu_=C$zut.velocities[this.m_indexB].w;C$zui=this.m_qA.SetAngle(C$zui),C$zua=this.m_qB.SetAngle(C$zua);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var C$zuo=C$zuR.MulRV(C$zui,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);C$zua=C$zuR.MulRV(C$zua,this.m_lalcB,this.m_rB);C$zun=C$zuj.AddVV(C$zuj.SubVV(C$zun,C$zue,C$zuj.s_t0),C$zuj.SubVV(C$zua,C$zuo,C$zuj.s_t1),b2PrismaticJoint.InitVelocityConstraints_s_d);var C$zue=this.m_invMassA,C$zus=this.m_invMassB;var C$zuc=this.m_invIA,C$zul=this.m_invIB;C$zuR.MulRV(C$zui,this.m_localXAxisA,this.m_axis),this.m_a1=C$zuj.CrossVV(C$zuj.AddVV(C$zun,C$zuo,C$zuj.s_t0),this.m_axis),this.m_a2=C$zuj.CrossVV(C$zua,this.m_axis),this.m_motorMass=C$zue+C$zus+C$zuc*this.m_a1*this.m_a1+C$zul*this.m_a2*this.m_a2,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),C$zuR.MulRV(C$zui,this.m_localYAxisA,this.m_perp),this.m_s1=C$zuj.CrossVV(C$zuj.AddVV(C$zun,C$zuo,C$zuj.s_t0),this.m_perp),this.m_s2=C$zuj.CrossVV(C$zua,this.m_perp),this.m_K.ex.x=C$zue+C$zus+C$zuc*this.m_s1*this.m_s1+C$zul*this.m_s2*this.m_s2,this.m_K.ex.y=C$zuc*this.m_s1+C$zul*this.m_s2,this.m_K.ex.z=C$zuc*this.m_s1*this.m_a1+C$zul*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=C$zuc+C$zul,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=C$zuc*this.m_a1+C$zul*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=C$zue+C$zus+C$zuc*this.m_a1*this.m_a1+C$zul*this.m_a2*this.m_a2,this.m_enableLimit?(C$zui=C$zuj.DotVV(this.m_axis,C$zun),C$zuM(this.m_upperTranslation-this.m_lowerTranslation)<.016?this.m_limitState=C$zuH.b2LimitState.e_equalLimits:C$zui<=this.m_lowerTranslation?this.m_limitState!==C$zuH.b2LimitState.e_atLowerLimit&&(this.m_limitState=C$zuH.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):C$zui>=this.m_upperTranslation?this.m_limitState!==C$zuH.b2LimitState.e_atUpperLimit&&(this.m_limitState=C$zuH.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=C$zuH.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=C$zuH.b2LimitState.e_inactiveLimit,this.m_impulse.z=0),this.m_enableMotor||(this.m_motorImpulse=0),C$zut.step.warmStarting?(this.m_impulse.SelfMul(C$zut.step.dtRatio),this.m_motorImpulse*=C$zut.step.dtRatio,C$zuo=C$zuj.AddVV(C$zuj.MulSV(this.m_impulse.x,this.m_perp,C$zuj.s_t0),C$zuj.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,C$zuj.s_t1),b2PrismaticJoint.InitVelocityConstraints_s_P),C$zua=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,C$zun=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,C$zuh.SelfMulSub(C$zue,C$zuo),C$zur-=C$zuc*C$zua,C$zuu.SelfMulAdd(C$zus,C$zuo),C$zu_+=C$zul*C$zun):(this.m_impulse.SetZero(),this.m_motorImpulse=0),C$zut.velocities[this.m_indexA].w=C$zur,C$zut.velocities[this.m_indexB].w=C$zu_},b2PrismaticJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zuh=C$zut.velocities[this.m_indexA].v;var C$zue=C$zut.velocities[this.m_indexA].w;var C$zuu=C$zut.velocities[this.m_indexB].v;var C$zui=C$zut.velocities[this.m_indexB].w;var C$zu_=this.m_invMassA,C$zud=this.m_invMassB;var C$zuf=this.m_invIA,C$zup=this.m_invIB;this.m_enableMotor&&this.m_limitState!==C$zuH.b2LimitState.e_equalLimits&&(C$zul=C$zuj.DotVV(this.m_axis,C$zuj.SubVV(C$zuu,C$zuh,C$zuj.s_t0))+this.m_a2*C$zui-this.m_a1*C$zue,C$zul=this.m_motorMass*(this.m_motorSpeed-C$zul),C$zuc=this.m_motorImpulse,C$zus=C$zut.step.dt*this.m_maxMotorForce,this.m_motorImpulse=b2Clamp(this.m_motorImpulse+C$zul,-C$zus,C$zus),C$zul=this.m_motorImpulse-C$zuc,C$zus=C$zuj.MulSV(C$zul,this.m_axis,b2PrismaticJoint.SolveVelocityConstraints_s_P),C$zuc=C$zul*this.m_a1,C$zul=C$zul*this.m_a2,C$zuh.SelfMulSub(C$zu_,C$zus),C$zue-=C$zuf*C$zuc,C$zuu.SelfMulAdd(C$zud,C$zus),C$zui+=C$zup*C$zul);var C$zum=C$zuj.DotVV(this.m_perp,C$zuj.SubVV(C$zuu,C$zuh,C$zuj.s_t0))+this.m_s2*C$zui-this.m_s1*C$zue;var C$zuv=C$zui-C$zue;var C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul;C$zul=this.m_enableLimit&&this.m_limitState!==C$zuH.b2LimitState.e_inactiveLimit?(C$zun=C$zuj.DotVV(this.m_axis,C$zuj.SubVV(C$zuu,C$zuh,C$zuj.s_t0))+this.m_a2*C$zui-this.m_a1*C$zue,C$zur=b2PrismaticJoint.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),C$zun=this.m_K.Solve33(-C$zum,-C$zuv,-C$zun,b2PrismaticJoint.SolveVelocityConstraints_s_df3),this.m_impulse.SelfAdd(C$zun),this.m_limitState===C$zuH.b2LimitState.e_atLowerLimit?this.m_impulse.z=C$zuL(this.m_impulse.z,0):this.m_limitState===C$zuH.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=C$zuD(this.m_impulse.z,0)),C$zua=-C$zum-(this.m_impulse.z-C$zur.z)*this.m_K.ez.x,C$zuo=-C$zuv-(this.m_impulse.z-C$zur.z)*this.m_K.ez.y,(C$zua=this.m_K.Solve22(C$zua,C$zuo,b2PrismaticJoint.SolveVelocityConstraints_s_f2r)).x+=C$zur.x,C$zua.y+=C$zur.y,this.m_impulse.x=C$zua.x,this.m_impulse.y=C$zua.y,C$zun.x=this.m_impulse.x-C$zur.x,C$zun.y=this.m_impulse.y-C$zur.y,C$zun.z=this.m_impulse.z-C$zur.z,C$zus=C$zuj.AddVV(C$zuj.MulSV(C$zun.x,this.m_perp,C$zuj.s_t0),C$zuj.MulSV(C$zun.z,this.m_axis,C$zuj.s_t1),b2PrismaticJoint.SolveVelocityConstraints_s_P),C$zuc=C$zun.x*this.m_s1+C$zun.y+C$zun.z*this.m_a1,C$zun.x*this.m_s2+C$zun.y+C$zun.z*this.m_a2):(C$zuo=this.m_K.Solve22(-C$zum,-C$zuv,b2PrismaticJoint.SolveVelocityConstraints_s_df2),this.m_impulse.x+=C$zuo.x,this.m_impulse.y+=C$zuo.y,C$zus=C$zuj.MulSV(C$zuo.x,this.m_perp,b2PrismaticJoint.SolveVelocityConstraints_s_P),C$zuc=C$zuo.x*this.m_s1+C$zuo.y,C$zuo.x*this.m_s2+C$zuo.y),C$zuh.SelfMulSub(C$zu_,C$zus),C$zue-=C$zuf*C$zuc,C$zuu.SelfMulAdd(C$zud,C$zus),C$zui+=C$zup*C$zul,C$zut.velocities[this.m_indexA].w=C$zue,C$zut.velocities[this.m_indexB].w=C$zui},b2PrismaticJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zuh=C$zut.positions[this.m_indexA].c;var C$zuu=C$zut.positions[this.m_indexA].a;var C$zu_=C$zut.positions[this.m_indexB].c;var C$zud=C$zut.positions[this.m_indexB].a;var C$zue=this.m_qA.SetAngle(C$zuu),C$zui=this.m_qB.SetAngle(C$zud);var C$zuf=this.m_invMassA,C$zup=this.m_invMassB;var C$zur=this.m_invIA,C$zun=this.m_invIB;var C$zua=C$zuR.MulRV(C$zue,this.m_lalcA,this.m_rA);C$zui=C$zuR.MulRV(C$zui,this.m_lalcB,this.m_rB);var C$zuo=C$zuj.SubVV(C$zuj.AddVV(C$zu_,C$zui,C$zuj.s_t0),C$zuj.AddVV(C$zuh,C$zua,C$zuj.s_t1),b2PrismaticJoint.SolvePositionConstraints_s_d);var C$zum=C$zuR.MulRV(C$zue,this.m_localXAxisA,this.m_axis);var C$zuv=C$zuj.CrossVV(C$zuj.AddVV(C$zuo,C$zua,C$zuj.s_t0),C$zum);var C$zuy=C$zuj.CrossVV(C$zui,C$zum);C$zue=C$zuR.MulRV(C$zue,this.m_localYAxisA,this.m_perp);C$zua=C$zuj.CrossVV(C$zuj.AddVV(C$zuo,C$zua,C$zuj.s_t0),C$zue);C$zui=C$zuj.CrossVV(C$zui,C$zue);var C$zus=b2PrismaticJoint.SolvePositionConstraints_s_impulse;var C$zug=C$zuj.DotVV(C$zue,C$zuo);var C$zub=C$zud-C$zuu-this.m_referenceAngle;var C$zuc=C$zuM(C$zug);var C$zuC=C$zuM(C$zub);var C$zul=!1;var C$zux=0;var C$zuA,C$zuS,C$zuT;this.m_enableLimit&&(C$zuo=C$zuj.DotVV(C$zum,C$zuo),C$zuM(this.m_upperTranslation-this.m_lowerTranslation)<.016?(C$zux=b2Clamp(C$zuo,-.2,.2),C$zuc=C$zuL(C$zuc,C$zuM(C$zuo)),C$zul=!0):C$zuo<=this.m_lowerTranslation?(C$zux=b2Clamp(C$zuo-this.m_lowerTranslation+.008,-.2,0),C$zuc=C$zuL(C$zuc,this.m_lowerTranslation-C$zuo),C$zul=!0):C$zuo>=this.m_upperTranslation&&(C$zux=b2Clamp(C$zuo-this.m_upperTranslation-.008,0,.2),C$zuc=C$zuL(C$zuc,C$zuo-this.m_upperTranslation),C$zul=!0)),C$zul?(0===(C$zuS=C$zur+C$zun)&&(C$zuS=1),C$zuo=C$zur*C$zuv+C$zun*C$zuy,C$zul=C$zuf+C$zup+C$zur*C$zuv*C$zuv+C$zun*C$zuy*C$zuy,(C$zuw=this.m_K3).ex.SetXYZ(C$zuf+C$zup+C$zur*C$zua*C$zua+C$zun*C$zui*C$zui,C$zuA=C$zur*C$zua+C$zun*C$zui,C$zuT=C$zur*C$zua*C$zuv+C$zun*C$zui*C$zuy),C$zuw.ey.SetXYZ(C$zuA,C$zuS,C$zuo),C$zuw.ez.SetXYZ(C$zuT,C$zuo,C$zul),C$zus=C$zuw.Solve33(-C$zug,-C$zub,-C$zux,C$zus)):(0===(C$zuS=C$zur+C$zun)&&(C$zuS=1),(C$zuT=this.m_K2).ex.Set(C$zuf+C$zup+C$zur*C$zua*C$zua+C$zun*C$zui*C$zui,C$zuA=C$zur*C$zua+C$zun*C$zui),C$zuT.ey.Set(C$zuA,C$zuS),C$zuo=C$zuT.Solve(-C$zug,-C$zub,b2PrismaticJoint.SolvePositionConstraints_s_impulse1),C$zus.x=C$zuo.x,C$zus.y=C$zuo.y,C$zus.z=0);C$zul=C$zuj.AddVV(C$zuj.MulSV(C$zus.x,C$zue,C$zuj.s_t0),C$zuj.MulSV(C$zus.z,C$zum,C$zuj.s_t1),b2PrismaticJoint.SolvePositionConstraints_s_P);var C$zuw=C$zus.x*C$zua+C$zus.y+C$zus.z*C$zuv;C$zux=C$zus.x*C$zui+C$zus.y+C$zus.z*C$zuy;return C$zuh.SelfMulSub(C$zuf,C$zul),C$zuu-=C$zur*C$zuw,C$zu_.SelfMulAdd(C$zup,C$zul),C$zud+=C$zun*C$zux,C$zut.positions[this.m_indexA].a=C$zuu,C$zut.positions[this.m_indexB].a=C$zud,C$zuc<=.008&&C$zuC<=C$zuP},b2PrismaticJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2PrismaticJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2PrismaticJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue.x=C$zut*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),C$zue.y=C$zut*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y),C$zue},b2PrismaticJoint.prototype.GetReactionTorque=function(C$zut){return C$zut*this.m_impulse.y},b2PrismaticJoint.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},b2PrismaticJoint.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},b2PrismaticJoint.prototype.GetLocalAxisA=function(){return this.m_localXAxisA},b2PrismaticJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},b2PrismaticJoint.prototype.GetJointTranslation=function(){var C$zut=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b2PrismaticJoint.GetJointTranslation_s_pA);var C$zue=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b2PrismaticJoint.GetJointTranslation_s_pB);C$zue=C$zuj.SubVV(C$zue,C$zut,b2PrismaticJoint.GetJointTranslation_s_d);C$zut=this.m_bodyA.GetWorldVector(this.m_localXAxisA,b2PrismaticJoint.GetJointTranslation_s_axis);return C$zuj.DotVV(C$zue,C$zut)},b2PrismaticJoint.prototype.GetJointSpeed=function(){var C$zut=this.m_bodyA;var C$zue=this.m_bodyB;C$zuj.SubVV(this.m_localAnchorA,C$zut.m_sweep.localCenter,this.m_lalcA);var C$zui=C$zuR.MulRV(C$zut.m_xf.q,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,C$zue.m_sweep.localCenter,this.m_lalcB);var C$zur=C$zuR.MulRV(C$zue.m_xf.q,this.m_lalcB,this.m_rB);var C$zun=C$zuj.AddVV(C$zut.m_sweep.c,C$zui,C$zuj.s_t0);var C$zua=C$zuj.AddVV(C$zue.m_sweep.c,C$zur,C$zuj.s_t1);C$zua=C$zuj.SubVV(C$zua,C$zun,C$zuj.s_t2);C$zun=C$zut.GetWorldVector(this.m_localXAxisA,this.m_axis);var C$zuo=C$zut.m_linearVelocity;var C$zus=C$zue.m_linearVelocity;C$zut=C$zut.m_angularVelocity;C$zue=C$zue.m_angularVelocity;return C$zuj.DotVV(C$zua,C$zuj.CrossSV(C$zut,C$zun,C$zuj.s_t0))+C$zuj.DotVV(C$zun,C$zuj.SubVV(C$zuj.AddVCrossSV(C$zus,C$zue,C$zur,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zuo,C$zut,C$zui,C$zuj.s_t1),C$zuj.s_t0))},b2PrismaticJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit},b2PrismaticJoint.prototype.EnableLimit=function(C$zut){C$zut!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=C$zut,this.m_impulse.z=0)},b2PrismaticJoint.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},b2PrismaticJoint.prototype.GetUpperLimit=function(){return this.m_upperTranslation},b2PrismaticJoint.prototype.SetLimits=function(C$zut,C$zue){C$zut===this.m_lowerTranslation&&C$zue===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=C$zut,this.m_upperTranslation=C$zue,this.m_impulse.z=0)},b2PrismaticJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},b2PrismaticJoint.prototype.EnableMotor=function(C$zut){C$zut!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$zut)},b2PrismaticJoint.prototype.SetMotorSpeed=function(C$zut){C$zut!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$zut)},b2PrismaticJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b2PrismaticJoint.prototype.SetMaxMotorForce=function(C$zut){C$zut!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=C$zut)},b2PrismaticJoint.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},b2PrismaticJoint.prototype.GetMotorForce=function(C$zut){return C$zut*this.m_motorImpulse},b2PrismaticJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),C$zut("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$zut("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),C$zut("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),C$zut("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),C$zut("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$zut("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$zut("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2PrismaticJoint.InitVelocityConstraints_s_d=new C$zuj,b2PrismaticJoint.InitVelocityConstraints_s_P=new C$zuj,b2PrismaticJoint.SolveVelocityConstraints_s_P=new C$zuj,b2PrismaticJoint.SolveVelocityConstraints_s_f2r=new C$zuj,b2PrismaticJoint.SolveVelocityConstraints_s_f1=new C$zuh,b2PrismaticJoint.SolveVelocityConstraints_s_df3=new C$zuh,b2PrismaticJoint.SolveVelocityConstraints_s_df2=new C$zuj,b2PrismaticJoint.SolvePositionConstraints_s_d=new C$zuj,b2PrismaticJoint.SolvePositionConstraints_s_impulse=new C$zuh,b2PrismaticJoint.SolvePositionConstraints_s_impulse1=new C$zuj,b2PrismaticJoint.SolvePositionConstraints_s_P=new C$zuj,b2PrismaticJoint.GetJointTranslation_s_pA=new C$zuj,b2PrismaticJoint.GetJointTranslation_s_pB=new C$zuj,b2PrismaticJoint.GetJointTranslation_s_d=new C$zuj,b2PrismaticJoint.GetJointTranslation_s_axis=new C$zuj;var C$zuui=b2PrismaticJoint;function b2PrismaticJoint(C$zut){var C$zue=C$zu_i.call(this,C$zut)||this;return C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_localXAxisA=new C$zuj,C$zue.m_localYAxisA=new C$zuj,C$zue.m_referenceAngle=0,C$zue.m_impulse=new C$zuh(0,0,0),C$zue.m_motorImpulse=0,C$zue.m_lowerTranslation=0,C$zue.m_upperTranslation=0,C$zue.m_maxMotorForce=0,C$zue.m_motorSpeed=0,C$zue.m_enableLimit=!1,C$zue.m_enableMotor=!1,C$zue.m_limitState=C$zuH.b2LimitState.e_inactiveLimit,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_axis=new C$zuj(0,0),C$zue.m_perp=new C$zuj(0,0),C$zue.m_s1=0,C$zue.m_s2=0,C$zue.m_a1=0,C$zue.m_a2=0,C$zue.m_K=new C$zuu,C$zue.m_K3=new C$zuu,C$zue.m_K2=new C$zug,C$zue.m_motorMass=0,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localAnchorA.Copy(b2Maybe(C$zut.localAnchorA,C$zuj.ZERO)),C$zue.m_localAnchorB.Copy(b2Maybe(C$zut.localAnchorB,C$zuj.ZERO)),C$zue.m_localXAxisA.Copy(b2Maybe(C$zut.localAxisA,new C$zuj(1,0))).SelfNormalize(),C$zuj.CrossOneV(C$zue.m_localXAxisA,C$zue.m_localYAxisA),C$zue.m_referenceAngle=b2Maybe(C$zut.referenceAngle,0),C$zue.m_lowerTranslation=b2Maybe(C$zut.lowerTranslation,0),C$zue.m_upperTranslation=b2Maybe(C$zut.upperTranslation,0),C$zue.m_maxMotorForce=b2Maybe(C$zut.maxMotorForce,0),C$zue.m_motorSpeed=b2Maybe(C$zut.motorSpeed,0),C$zue.m_enableLimit=b2Maybe(C$zut.enableLimit,!1),C$zue.m_enableMotor=b2Maybe(C$zut.enableMotor,!1),C$zue}var C$zu_i;__extends(b2PulleyJointDef,C$zufi=C$zuSET),b2PulleyJointDef.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){this.bodyA=C$zut,this.bodyB=C$zue,this.groundAnchorA.Copy(C$zui),this.groundAnchorB.Copy(C$zur),this.bodyA.GetLocalPoint(C$zun,this.localAnchorA),this.bodyB.GetLocalPoint(C$zua,this.localAnchorB),this.lengthA=C$zuj.DistanceVV(C$zun,C$zui),this.lengthB=C$zuj.DistanceVV(C$zua,C$zur),this.ratio=C$zuo};var C$zudi=b2PulleyJointDef;function b2PulleyJointDef(){var C$zut=C$zufi.call(this,C$zuH.b2JointType.e_pulleyJoint)||this;return C$zut.groundAnchorA=new C$zuj(-1,1),C$zut.groundAnchorB=new C$zuj(1,1),C$zut.localAnchorA=new C$zuj(-1,0),C$zut.localAnchorB=new C$zuj(1,0),C$zut.lengthA=0,C$zut.lengthB=0,C$zut.ratio=1,C$zut.collideConnected=!0,C$zut}var C$zufi;__extends(b2PulleyJoint,C$zumi=C$zuNe),b2PulleyJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexA].c;var C$zui=C$zut.positions[this.m_indexA].a;var C$zur=C$zut.velocities[this.m_indexA].v;var C$zun=C$zut.velocities[this.m_indexA].w;var C$zua=C$zut.positions[this.m_indexB].c;var C$zuo=C$zut.positions[this.m_indexB].a;var C$zus=C$zut.velocities[this.m_indexB].v;var C$zuc=C$zut.velocities[this.m_indexB].w;C$zui=this.m_qA.SetAngle(C$zui),C$zuo=this.m_qB.SetAngle(C$zuo);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$zuR.MulRV(C$zui,this.m_lalcA,this.m_rA),C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$zuR.MulRV(C$zuo,this.m_lalcB,this.m_rB),this.m_uA.Copy(C$zue).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(C$zua).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);C$zui=this.m_uA.Length();C$zuo=this.m_uB.Length();.08<C$zui?this.m_uA.SelfMul(1/C$zui):this.m_uA.SetZero(),.08<C$zuo?this.m_uB.SelfMul(1/C$zuo):this.m_uB.SetZero();C$zue=C$zuj.CrossVV(this.m_rA,this.m_uA);C$zua=C$zuj.CrossVV(this.m_rB,this.m_uB);C$zui=this.m_invMassA+this.m_invIA*C$zue*C$zue;C$zuo=this.m_invMassB+this.m_invIB*C$zua*C$zua;this.m_mass=C$zui+this.m_ratio*this.m_ratio*C$zuo,0<this.m_mass&&(this.m_mass=1/this.m_mass),C$zut.step.warmStarting?(this.m_impulse*=C$zut.step.dtRatio,C$zue=C$zuj.MulSV(-this.m_impulse,this.m_uA,b2PulleyJoint.InitVelocityConstraints_s_PA),C$zua=C$zuj.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,b2PulleyJoint.InitVelocityConstraints_s_PB),C$zur.SelfMulAdd(this.m_invMassA,C$zue),C$zun+=this.m_invIA*C$zuj.CrossVV(this.m_rA,C$zue),C$zus.SelfMulAdd(this.m_invMassB,C$zua),C$zuc+=this.m_invIB*C$zuj.CrossVV(this.m_rB,C$zua)):this.m_impulse=0,C$zut.velocities[this.m_indexA].w=C$zun,C$zut.velocities[this.m_indexB].w=C$zuc},b2PulleyJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zua=C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,b2PulleyJoint.SolveVelocityConstraints_s_vpA);var C$zuo=C$zuj.AddVCrossSV(C$zur,C$zun,this.m_rB,b2PulleyJoint.SolveVelocityConstraints_s_vpB);C$zua=-C$zuj.DotVV(this.m_uA,C$zua)-this.m_ratio*C$zuj.DotVV(this.m_uB,C$zuo);C$zuo=-this.m_mass*C$zua;this.m_impulse+=C$zuo;C$zua=C$zuj.MulSV(-C$zuo,this.m_uA,b2PulleyJoint.SolveVelocityConstraints_s_PA);C$zuo=C$zuj.MulSV(-this.m_ratio*C$zuo,this.m_uB,b2PulleyJoint.SolveVelocityConstraints_s_PB);C$zue.SelfMulAdd(this.m_invMassA,C$zua),C$zui+=this.m_invIA*C$zuj.CrossVV(this.m_rA,C$zua),C$zur.SelfMulAdd(this.m_invMassB,C$zuo),C$zun+=this.m_invIB*C$zuj.CrossVV(this.m_rB,C$zuo),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2PulleyJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zuh=C$zut.positions[this.m_indexA].c;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuu=C$zut.positions[this.m_indexB].c;var C$zu_=C$zut.positions[this.m_indexB].a;var C$zui=this.m_qA.SetAngle(C$zue),C$zur=this.m_qB.SetAngle(C$zu_);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);C$zui=C$zuR.MulRV(C$zui,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);C$zur=C$zuR.MulRV(C$zur,this.m_lalcB,this.m_rB);var C$zun=this.m_uA.Copy(C$zuh).SelfAdd(C$zui).SelfSub(this.m_groundAnchorA);var C$zua=this.m_uB.Copy(C$zuu).SelfAdd(C$zur).SelfSub(this.m_groundAnchorB);var C$zuo=C$zun.Length();var C$zus=C$zua.Length();.08<C$zuo?C$zun.SelfMul(1/C$zuo):C$zun.SetZero(),.08<C$zus?C$zua.SelfMul(1/C$zus):C$zua.SetZero();var C$zuc=C$zuj.CrossVV(C$zui,C$zun);var C$zul=C$zuj.CrossVV(C$zur,C$zua);C$zuc=this.m_invMassA+this.m_invIA*C$zuc*C$zuc;C$zul=this.m_invMassB+this.m_invIB*C$zul*C$zul;C$zuc+=this.m_ratio*this.m_ratio*C$zul;0<C$zuc&&(C$zuc=1/C$zuc);C$zul=this.m_constant-C$zuo-this.m_ratio*C$zus;C$zuo=C$zuM(C$zul);C$zus=-C$zuc*C$zul;C$zuc=C$zuj.MulSV(-C$zus,C$zun,b2PulleyJoint.SolvePositionConstraints_s_PA);C$zul=C$zuj.MulSV(-this.m_ratio*C$zus,C$zua,b2PulleyJoint.SolvePositionConstraints_s_PB);return C$zuh.SelfMulAdd(this.m_invMassA,C$zuc),C$zue+=this.m_invIA*C$zuj.CrossVV(C$zui,C$zuc),C$zuu.SelfMulAdd(this.m_invMassB,C$zul),C$zu_+=this.m_invIB*C$zuj.CrossVV(C$zur,C$zul),C$zut.positions[this.m_indexA].a=C$zue,C$zut.positions[this.m_indexB].a=C$zu_,C$zuo<.008},b2PulleyJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2PulleyJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2PulleyJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue.x=C$zut*this.m_impulse*this.m_uB.x,C$zue.y=C$zut*this.m_impulse*this.m_uB.y,C$zue},b2PulleyJoint.prototype.GetReactionTorque=function(C$zut){return 0},b2PulleyJoint.prototype.GetGroundAnchorA=function(){return this.m_groundAnchorA},b2PulleyJoint.prototype.GetGroundAnchorB=function(){return this.m_groundAnchorB},b2PulleyJoint.prototype.GetLengthA=function(){return this.m_lengthA},b2PulleyJoint.prototype.GetLengthB=function(){return this.m_lengthB},b2PulleyJoint.prototype.GetRatio=function(){return this.m_ratio},b2PulleyJoint.prototype.GetCurrentLengthA=function(){var C$zut=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,b2PulleyJoint.GetCurrentLengthA_s_p);var C$zue=this.m_groundAnchorA;return C$zuj.DistanceVV(C$zut,C$zue)},b2PulleyJoint.prototype.GetCurrentLengthB=function(){var C$zut=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,b2PulleyJoint.GetCurrentLengthB_s_p);var C$zue=this.m_groundAnchorB;return C$zuj.DistanceVV(C$zut,C$zue)},b2PulleyJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),C$zut("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.lengthA = %.15f;\n",this.m_lengthA),C$zut("  jd.lengthB = %.15f;\n",this.m_lengthB),C$zut("  jd.ratio = %.15f;\n",this.m_ratio),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2PulleyJoint.prototype.ShiftOrigin=function(C$zut){this.m_groundAnchorA.SelfSub(C$zut),this.m_groundAnchorB.SelfSub(C$zut)},b2PulleyJoint.InitVelocityConstraints_s_PA=new C$zuj,b2PulleyJoint.InitVelocityConstraints_s_PB=new C$zuj,b2PulleyJoint.SolveVelocityConstraints_s_vpA=new C$zuj,b2PulleyJoint.SolveVelocityConstraints_s_vpB=new C$zuj,b2PulleyJoint.SolveVelocityConstraints_s_PA=new C$zuj,b2PulleyJoint.SolveVelocityConstraints_s_PB=new C$zuj,b2PulleyJoint.SolvePositionConstraints_s_PA=new C$zuj,b2PulleyJoint.SolvePositionConstraints_s_PB=new C$zuj,b2PulleyJoint.GetCurrentLengthA_s_p=new C$zuj,b2PulleyJoint.GetCurrentLengthB_s_p=new C$zuj;var C$zupi=b2PulleyJoint;function b2PulleyJoint(C$zut){var C$zue=C$zumi.call(this,C$zut)||this;return C$zue.m_groundAnchorA=new C$zuj,C$zue.m_groundAnchorB=new C$zuj,C$zue.m_lengthA=0,C$zue.m_lengthB=0,C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_constant=0,C$zue.m_ratio=0,C$zue.m_impulse=0,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_uA=new C$zuj,C$zue.m_uB=new C$zuj,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_mass=0,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_groundAnchorA.Copy(b2Maybe(C$zut.groundAnchorA,new C$zuj(-1,1))),C$zue.m_groundAnchorB.Copy(b2Maybe(C$zut.groundAnchorB,new C$zuj(1,0))),C$zue.m_localAnchorA.Copy(b2Maybe(C$zut.localAnchorA,new C$zuj(-1,0))),C$zue.m_localAnchorB.Copy(b2Maybe(C$zut.localAnchorB,new C$zuj(1,0))),C$zue.m_lengthA=b2Maybe(C$zut.lengthA,0),C$zue.m_lengthB=b2Maybe(C$zut.lengthB,0),C$zue.m_ratio=b2Maybe(C$zut.ratio,1),C$zue.m_constant=b2Maybe(C$zut.lengthA,0)+C$zue.m_ratio*b2Maybe(C$zut.lengthB,0),C$zue.m_impulse=0,C$zue}var C$zumi;__extends(b2RevoluteJointDef,C$zuyi=C$zuSET),b2RevoluteJointDef.prototype.Initialize=function(C$zut,C$zue,C$zui){this.bodyA=C$zut,this.bodyB=C$zue,this.bodyA.GetLocalPoint(C$zui,this.localAnchorA),this.bodyB.GetLocalPoint(C$zui,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$zuvi=b2RevoluteJointDef;function b2RevoluteJointDef(){var C$zut=C$zuyi.call(this,C$zuH.b2JointType.e_revoluteJoint)||this;return C$zut.localAnchorA=new C$zuj(0,0),C$zut.localAnchorB=new C$zuj(0,0),C$zut.referenceAngle=0,C$zut.enableLimit=!1,C$zut.lowerAngle=0,C$zut.upperAngle=0,C$zut.enableMotor=!1,C$zut.motorSpeed=0,C$zut.maxMotorTorque=0,C$zut}var C$zuyi;__extends(b2RevoluteJoint,C$zubi=C$zuNe),b2RevoluteJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuh=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.positions[this.m_indexB].a;var C$zuu=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zua=this.m_qA.SetAngle(C$zue),C$zuo=this.m_qB.SetAngle(C$zur);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$zuR.MulRV(C$zua,this.m_lalcA,this.m_rA),C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$zuR.MulRV(C$zuo,this.m_lalcB,this.m_rB);C$zua=this.m_invMassA,C$zuo=this.m_invMassB;var C$zus=this.m_invIA,C$zuc=this.m_invIB;var C$zul=C$zus+C$zuc===0;this.m_mass.ex.x=C$zua+C$zuo+this.m_rA.y*this.m_rA.y*C$zus+this.m_rB.y*this.m_rB.y*C$zuc,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*C$zus-this.m_rB.y*this.m_rB.x*C$zuc,this.m_mass.ez.x=-this.m_rA.y*C$zus-this.m_rB.y*C$zuc,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=C$zua+C$zuo+this.m_rA.x*this.m_rA.x*C$zus+this.m_rB.x*this.m_rB.x*C$zuc,this.m_mass.ez.y=this.m_rA.x*C$zus+this.m_rB.x*C$zuc,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=C$zus+C$zuc,this.m_motorMass=C$zus+C$zuc,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!C$zul||(this.m_motorImpulse=0),this.m_enableLimit&&!C$zul?(C$zul=C$zur-C$zue-this.m_referenceAngle,C$zuM(this.m_upperAngle-this.m_lowerAngle)<2*C$zuP?this.m_limitState=C$zuH.b2LimitState.e_equalLimits:C$zul<=this.m_lowerAngle?(this.m_limitState!==C$zuH.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=C$zuH.b2LimitState.e_atLowerLimit):C$zul>=this.m_upperAngle?(this.m_limitState!==C$zuH.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=C$zuH.b2LimitState.e_atUpperLimit):(this.m_limitState=C$zuH.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=C$zuH.b2LimitState.e_inactiveLimit,C$zut.step.warmStarting?(this.m_impulse.SelfMul(C$zut.step.dtRatio),this.m_motorImpulse*=C$zut.step.dtRatio,C$zur=b2RevoluteJoint.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y),C$zuh.SelfMulSub(C$zua,C$zur),C$zui-=C$zus*(C$zuj.CrossVV(this.m_rA,C$zur)+this.m_motorImpulse+this.m_impulse.z),C$zuu.SelfMulAdd(C$zuo,C$zur),C$zun+=C$zuc*(C$zuj.CrossVV(this.m_rB,C$zur)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2RevoluteJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zuh=this.m_invMassA,C$zuu=this.m_invMassB;var C$zu_=this.m_invIA,C$zud=this.m_invIB;var C$zua=C$zu_+C$zud===0;var C$zuo,C$zuf,C$zup,C$zus,C$zuc,C$zul;this.m_enableMotor&&this.m_limitState!==C$zuH.b2LimitState.e_equalLimits&&!C$zua&&(C$zuc=C$zun-C$zui-this.m_motorSpeed,C$zuc=-this.m_motorMass*C$zuc,C$zuo=this.m_motorImpulse,C$zul=C$zut.step.dt*this.m_maxMotorTorque,this.m_motorImpulse=b2Clamp(this.m_motorImpulse+C$zuc,-C$zul,C$zul),C$zui-=C$zu_*(C$zuc=this.m_motorImpulse-C$zuo),C$zun+=C$zud*C$zuc),this.m_enableLimit&&this.m_limitState!==C$zuH.b2LimitState.e_inactiveLimit&&!C$zua?(C$zul=C$zuj.SubVV(C$zuj.AddVCrossSV(C$zur,C$zun,this.m_rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,C$zuj.s_t1),b2RevoluteJoint.SolveVelocityConstraints_s_Cdot1),C$zuo=this.m_mass.Solve33(C$zul.x,C$zul.y,C$zun-C$zui,b2RevoluteJoint.SolveVelocityConstraints_s_impulse_v3).SelfNeg(),this.m_limitState===C$zuH.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(C$zuo):this.m_limitState===C$zuH.b2LimitState.e_atLowerLimit?this.m_impulse.z+C$zuo.z<0?(C$zuf=-C$zul.x+this.m_impulse.z*this.m_mass.ez.x,C$zup=-C$zul.y+this.m_impulse.z*this.m_mass.ez.y,C$zus=this.m_mass.Solve22(C$zuf,C$zup,b2RevoluteJoint.SolveVelocityConstraints_s_reduced_v2),C$zuo.x=C$zus.x,C$zuo.y=C$zus.y,C$zuo.z=-this.m_impulse.z,this.m_impulse.x+=C$zus.x,this.m_impulse.y+=C$zus.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(C$zuo):this.m_limitState===C$zuH.b2LimitState.e_atUpperLimit&&(0<this.m_impulse.z+C$zuo.z?(C$zuf=-C$zul.x+this.m_impulse.z*this.m_mass.ez.x,C$zup=-C$zul.y+this.m_impulse.z*this.m_mass.ez.y,C$zus=this.m_mass.Solve22(C$zuf,C$zup,b2RevoluteJoint.SolveVelocityConstraints_s_reduced_v2),C$zuo.x=C$zus.x,C$zuo.y=C$zus.y,C$zuo.z=-this.m_impulse.z,this.m_impulse.x+=C$zus.x,this.m_impulse.y+=C$zus.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(C$zuo)),C$zuc=b2RevoluteJoint.SolveVelocityConstraints_s_P.Set(C$zuo.x,C$zuo.y),C$zue.SelfMulSub(C$zuh,C$zuc),C$zui-=C$zu_*(C$zuj.CrossVV(this.m_rA,C$zuc)+C$zuo.z),C$zur.SelfMulAdd(C$zuu,C$zuc),C$zun+=C$zud*(C$zuj.CrossVV(this.m_rB,C$zuc)+C$zuo.z)):(C$zua=C$zuj.SubVV(C$zuj.AddVCrossSV(C$zur,C$zun,this.m_rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,C$zuj.s_t1),b2RevoluteJoint.SolveVelocityConstraints_s_Cdot_v2),C$zul=this.m_mass.Solve22(-C$zua.x,-C$zua.y,b2RevoluteJoint.SolveVelocityConstraints_s_impulse_v2),this.m_impulse.x+=C$zul.x,this.m_impulse.y+=C$zul.y,C$zue.SelfMulSub(C$zuh,C$zul),C$zui-=C$zu_*C$zuj.CrossVV(this.m_rA,C$zul),C$zur.SelfMulAdd(C$zuu,C$zul),C$zun+=C$zud*C$zuj.CrossVV(this.m_rB,C$zul)),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2RevoluteJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zuh=C$zut.positions[this.m_indexA].c;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuu=C$zut.positions[this.m_indexB].c;var C$zui=C$zut.positions[this.m_indexB].a;var C$zur=this.m_qA.SetAngle(C$zue),C$zun=this.m_qB.SetAngle(C$zui);var C$zua=0;var C$zuo=this.m_invIA+this.m_invIB===0;this.m_enableLimit&&this.m_limitState!==C$zuH.b2LimitState.e_inactiveLimit&&!C$zuo&&(C$zuo=C$zui-C$zue-this.m_referenceAngle,C$zuc=0,this.m_limitState===C$zuH.b2LimitState.e_equalLimits?(C$zus=b2Clamp(C$zuo-this.m_lowerAngle,-C$zup,C$zup),C$zuc=-this.m_motorMass*C$zus,C$zua=C$zuM(C$zus)):this.m_limitState===C$zuH.b2LimitState.e_atLowerLimit?(C$zua=-(C$zus=C$zuo-this.m_lowerAngle),C$zus=b2Clamp(C$zus+C$zuP,-C$zup,0),C$zuc=-this.m_motorMass*C$zus):this.m_limitState===C$zuH.b2LimitState.e_atUpperLimit&&(C$zus=b2Clamp((C$zua=C$zus=C$zuo-this.m_upperAngle)-C$zuP,0,C$zup),C$zuc=-this.m_motorMass*C$zus),C$zue-=this.m_invIA*C$zuc,C$zui+=this.m_invIB*C$zuc),C$zur.SetAngle(C$zue),C$zun.SetAngle(C$zui),C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);C$zuo=C$zuR.MulRV(C$zur,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);var C$zus=C$zuR.MulRV(C$zun,this.m_lalcB,this.m_rB);var C$zuc=C$zuj.SubVV(C$zuj.AddVV(C$zuu,C$zus,C$zuj.s_t0),C$zuj.AddVV(C$zuh,C$zuo,C$zuj.s_t1),b2RevoluteJoint.SolvePositionConstraints_s_C_v2);C$zur=C$zuc.Length();var C$zun=this.m_invMassA,C$zu_=this.m_invMassB;var C$zud=this.m_invIA,C$zuf=this.m_invIB;var C$zul=this.m_K;C$zul.ex.x=C$zun+C$zu_+C$zud*C$zuo.y*C$zuo.y+C$zuf*C$zus.y*C$zus.y,C$zul.ex.y=-C$zud*C$zuo.x*C$zuo.y-C$zuf*C$zus.x*C$zus.y,C$zul.ey.x=C$zul.ex.y,C$zul.ey.y=C$zun+C$zu_+C$zud*C$zuo.x*C$zuo.x+C$zuf*C$zus.x*C$zus.x;C$zul=C$zul.Solve(C$zuc.x,C$zuc.y,b2RevoluteJoint.SolvePositionConstraints_s_impulse).SelfNeg();return C$zuh.SelfMulSub(C$zun,C$zul),C$zue-=C$zud*C$zuj.CrossVV(C$zuo,C$zul),C$zuu.SelfMulAdd(C$zu_,C$zul),C$zui+=C$zuf*C$zuj.CrossVV(C$zus,C$zul),C$zut.positions[this.m_indexA].a=C$zue,C$zut.positions[this.m_indexB].a=C$zui,C$zur<=.008&&C$zua<=C$zuP},b2RevoluteJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2RevoluteJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2RevoluteJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue.x=C$zut*this.m_impulse.x,C$zue.y=C$zut*this.m_impulse.y,C$zue},b2RevoluteJoint.prototype.GetReactionTorque=function(C$zut){return C$zut*this.m_impulse.z},b2RevoluteJoint.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},b2RevoluteJoint.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},b2RevoluteJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},b2RevoluteJoint.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},b2RevoluteJoint.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},b2RevoluteJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},b2RevoluteJoint.prototype.EnableMotor=function(C$zut){C$zut!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$zut)},b2RevoluteJoint.prototype.GetMotorTorque=function(C$zut){return C$zut*this.m_motorImpulse},b2RevoluteJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b2RevoluteJoint.prototype.SetMaxMotorTorque=function(C$zut){C$zut!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=C$zut)},b2RevoluteJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},b2RevoluteJoint.prototype.IsLimitEnabled=function(){return this.m_enableLimit},b2RevoluteJoint.prototype.EnableLimit=function(C$zut){C$zut!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=C$zut,this.m_impulse.z=0)},b2RevoluteJoint.prototype.GetLowerLimit=function(){return this.m_lowerAngle},b2RevoluteJoint.prototype.GetUpperLimit=function(){return this.m_upperAngle},b2RevoluteJoint.prototype.SetLimits=function(C$zut,C$zue){C$zut===this.m_lowerAngle&&C$zue===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=C$zut,this.m_upperAngle=C$zue)},b2RevoluteJoint.prototype.SetMotorSpeed=function(C$zut){C$zut!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$zut)},b2RevoluteJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$zut("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),C$zut("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),C$zut("  jd.upperAngle = %.15f;\n",this.m_upperAngle),C$zut("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$zut("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$zut("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2RevoluteJoint.InitVelocityConstraints_s_P=new C$zuj,b2RevoluteJoint.SolveVelocityConstraints_s_P=new C$zuj,b2RevoluteJoint.SolveVelocityConstraints_s_Cdot_v2=new C$zuj,b2RevoluteJoint.SolveVelocityConstraints_s_Cdot1=new C$zuj,b2RevoluteJoint.SolveVelocityConstraints_s_impulse_v3=new C$zuh,b2RevoluteJoint.SolveVelocityConstraints_s_reduced_v2=new C$zuj,b2RevoluteJoint.SolveVelocityConstraints_s_impulse_v2=new C$zuj,b2RevoluteJoint.SolvePositionConstraints_s_C_v2=new C$zuj,b2RevoluteJoint.SolvePositionConstraints_s_impulse=new C$zuj;var C$zugi=b2RevoluteJoint;function b2RevoluteJoint(C$zut){var C$zue=C$zubi.call(this,C$zut)||this;return C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_impulse=new C$zuh,C$zue.m_motorImpulse=0,C$zue.m_enableMotor=!1,C$zue.m_maxMotorTorque=0,C$zue.m_motorSpeed=0,C$zue.m_enableLimit=!1,C$zue.m_referenceAngle=0,C$zue.m_lowerAngle=0,C$zue.m_upperAngle=0,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_mass=new C$zuu,C$zue.m_motorMass=0,C$zue.m_limitState=C$zuH.b2LimitState.e_inactiveLimit,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_K=new C$zug,C$zue.m_localAnchorA.Copy(b2Maybe(C$zut.localAnchorA,C$zuj.ZERO)),C$zue.m_localAnchorB.Copy(b2Maybe(C$zut.localAnchorB,C$zuj.ZERO)),C$zue.m_referenceAngle=b2Maybe(C$zut.referenceAngle,0),C$zue.m_impulse.SetZero(),C$zue.m_motorImpulse=0,C$zue.m_lowerAngle=b2Maybe(C$zut.lowerAngle,0),C$zue.m_upperAngle=b2Maybe(C$zut.upperAngle,0),C$zue.m_maxMotorTorque=b2Maybe(C$zut.maxMotorTorque,0),C$zue.m_motorSpeed=b2Maybe(C$zut.motorSpeed,0),C$zue.m_enableLimit=b2Maybe(C$zut.enableLimit,!1),C$zue.m_enableMotor=b2Maybe(C$zut.enableMotor,!1),C$zue.m_limitState=C$zuH.b2LimitState.e_inactiveLimit,C$zue}var C$zubi;__extends(b2RopeJointDef,C$zuxi=C$zuSET);var C$zuCi=b2RopeJointDef;function b2RopeJointDef(){var C$zut=C$zuxi.call(this,C$zuH.b2JointType.e_ropeJoint)||this;return C$zut.localAnchorA=new C$zuj(-1,0),C$zut.localAnchorB=new C$zuj(1,0),C$zut.maxLength=0,C$zut}var C$zuxi;__extends(b2RopeJoint,C$zuSi=C$zuNe),b2RopeJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexA].c;var C$zui=C$zut.positions[this.m_indexA].a;var C$zur=C$zut.velocities[this.m_indexA].v;var C$zun=C$zut.velocities[this.m_indexA].w;var C$zua=C$zut.positions[this.m_indexB].c;var C$zuo=C$zut.positions[this.m_indexB].a;var C$zus=C$zut.velocities[this.m_indexB].v;var C$zuc=C$zut.velocities[this.m_indexB].w;C$zui=this.m_qA.SetAngle(C$zui),C$zuo=this.m_qB.SetAngle(C$zuo);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$zuR.MulRV(C$zui,this.m_lalcA,this.m_rA),C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$zuR.MulRV(C$zuo,this.m_lalcB,this.m_rB),this.m_u.Copy(C$zua).SelfAdd(this.m_rB).SelfSub(C$zue).SelfSub(this.m_rA),this.m_length=this.m_u.Length();C$zui=this.m_length-this.m_maxLength;if(this.m_state=0<C$zui?C$zuH.b2LimitState.e_atUpperLimit:C$zuH.b2LimitState.e_inactiveLimit,!(.008<this.m_length))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);C$zuo=C$zuj.CrossVV(this.m_rA,this.m_u);C$zua=C$zuj.CrossVV(this.m_rB,this.m_u);C$zue=this.m_invMassA+this.m_invIA*C$zuo*C$zuo+this.m_invMassB+this.m_invIB*C$zua*C$zua;this.m_mass=0!==C$zue?1/C$zue:0,C$zut.step.warmStarting?(this.m_impulse*=C$zut.step.dtRatio,C$zui=C$zuj.MulSV(this.m_impulse,this.m_u,b2RopeJoint.InitVelocityConstraints_s_P),C$zur.SelfMulSub(this.m_invMassA,C$zui),C$zun-=this.m_invIA*C$zuj.CrossVV(this.m_rA,C$zui),C$zus.SelfMulAdd(this.m_invMassB,C$zui),C$zuc+=this.m_invIB*C$zuj.CrossVV(this.m_rB,C$zui)):this.m_impulse=0,C$zut.velocities[this.m_indexA].w=C$zun,C$zut.velocities[this.m_indexB].w=C$zuc},b2RopeJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zua=C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,b2RopeJoint.SolveVelocityConstraints_s_vpA);var C$zuo=C$zuj.AddVCrossSV(C$zur,C$zun,this.m_rB,b2RopeJoint.SolveVelocityConstraints_s_vpB);var C$zus=this.m_length-this.m_maxLength;C$zuo=C$zuj.DotVV(this.m_u,C$zuj.SubVV(C$zuo,C$zua,C$zuj.s_t0));C$zus<0&&(C$zuo+=C$zut.step.inv_dt*C$zus);C$zua=-this.m_mass*C$zuo;C$zus=this.m_impulse;this.m_impulse=C$zuD(0,this.m_impulse+C$zua),C$zua=this.m_impulse-C$zus;C$zuo=C$zuj.MulSV(C$zua,this.m_u,b2RopeJoint.SolveVelocityConstraints_s_P);C$zue.SelfMulSub(this.m_invMassA,C$zuo),C$zui-=this.m_invIA*C$zuj.CrossVV(this.m_rA,C$zuo),C$zur.SelfMulAdd(this.m_invMassB,C$zuo),C$zun+=this.m_invIB*C$zuj.CrossVV(this.m_rB,C$zuo),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2RopeJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zue=C$zut.positions[this.m_indexA].c;var C$zui=C$zut.positions[this.m_indexA].a;var C$zur=C$zut.positions[this.m_indexB].c;var C$zun=C$zut.positions[this.m_indexB].a;var C$zua=this.m_qA.SetAngle(C$zui),C$zuo=this.m_qB.SetAngle(C$zun);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);C$zua=C$zuR.MulRV(C$zua,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);C$zuo=C$zuR.MulRV(C$zuo,this.m_lalcB,this.m_rB);var C$zus=this.m_u.Copy(C$zur).SelfAdd(C$zuo).SelfSub(C$zue).SelfSub(C$zua);var C$zuc=C$zus.Normalize();C$zul=b2Clamp(C$zuc-this.m_maxLength,0,.2);var C$zul=-this.m_mass*C$zul;C$zul=C$zuj.MulSV(C$zul,C$zus,b2RopeJoint.SolvePositionConstraints_s_P);return C$zue.SelfMulSub(this.m_invMassA,C$zul),C$zui-=this.m_invIA*C$zuj.CrossVV(C$zua,C$zul),C$zur.SelfMulAdd(this.m_invMassB,C$zul),C$zun+=this.m_invIB*C$zuj.CrossVV(C$zuo,C$zul),C$zut.positions[this.m_indexA].a=C$zui,C$zut.positions[this.m_indexB].a=C$zun,C$zuc-this.m_maxLength<.008},b2RopeJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2RopeJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2RopeJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zuj.MulSV(C$zut*this.m_impulse,this.m_u,C$zue)},b2RopeJoint.prototype.GetReactionTorque=function(C$zut){return 0},b2RopeJoint.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},b2RopeJoint.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},b2RopeJoint.prototype.SetMaxLength=function(C$zut){this.m_maxLength=C$zut},b2RopeJoint.prototype.GetMaxLength=function(){return this.m_maxLength},b2RopeJoint.prototype.GetLimitState=function(){return this.m_state},b2RopeJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.maxLength = %.15f;\n",this.m_maxLength),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2RopeJoint.InitVelocityConstraints_s_P=new C$zuj,b2RopeJoint.SolveVelocityConstraints_s_vpA=new C$zuj,b2RopeJoint.SolveVelocityConstraints_s_vpB=new C$zuj,b2RopeJoint.SolveVelocityConstraints_s_P=new C$zuj,b2RopeJoint.SolvePositionConstraints_s_P=new C$zuj;var C$zuAi=b2RopeJoint;function b2RopeJoint(C$zut){var C$zue=C$zuSi.call(this,C$zut)||this;return C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_maxLength=0,C$zue.m_length=0,C$zue.m_impulse=0,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_u=new C$zuj,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_mass=0,C$zue.m_state=C$zuH.b2LimitState.e_inactiveLimit,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_localAnchorA.Copy(b2Maybe(C$zut.localAnchorA,new C$zuj(-1,0))),C$zue.m_localAnchorB.Copy(b2Maybe(C$zut.localAnchorB,new C$zuj(1,0))),C$zue.m_maxLength=b2Maybe(C$zut.maxLength,0),C$zue}var C$zuSi;__extends(b2WeldJointDef,C$zuwi=C$zuSET),b2WeldJointDef.prototype.Initialize=function(C$zut,C$zue,C$zui){this.bodyA=C$zut,this.bodyB=C$zue,this.bodyA.GetLocalPoint(C$zui,this.localAnchorA),this.bodyB.GetLocalPoint(C$zui,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$zuTi=b2WeldJointDef;function b2WeldJointDef(){var C$zut=C$zuwi.call(this,C$zuH.b2JointType.e_weldJoint)||this;return C$zut.localAnchorA=new C$zuj,C$zut.localAnchorB=new C$zuj,C$zut.referenceAngle=0,C$zut.frequencyHz=0,C$zut.dampingRatio=0,C$zut}var C$zuwi;__extends(b2WeldJoint,C$zuPi=C$zuNe),b2WeldJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuh=C$zut.velocities[this.m_indexA].v;var C$zuu=C$zut.velocities[this.m_indexA].w;var C$zui=C$zut.positions[this.m_indexB].a;var C$zu_=C$zut.velocities[this.m_indexB].v;var C$zud=C$zut.velocities[this.m_indexB].w;var C$zur=this.m_qA.SetAngle(C$zue),C$zun=this.m_qB.SetAngle(C$zui);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$zuR.MulRV(C$zur,this.m_lalcA,this.m_rA),C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$zuR.MulRV(C$zun,this.m_lalcB,this.m_rB);C$zur=this.m_invMassA,C$zun=this.m_invMassB;var C$zua=this.m_invIA,C$zuo=this.m_invIB;var C$zus=this.m_K;var C$zuc,C$zuf,C$zup;var C$zul;C$zus.ex.x=C$zur+C$zun+this.m_rA.y*this.m_rA.y*C$zua+this.m_rB.y*this.m_rB.y*C$zuo,C$zus.ey.x=-this.m_rA.y*this.m_rA.x*C$zua-this.m_rB.y*this.m_rB.x*C$zuo,C$zus.ez.x=-this.m_rA.y*C$zua-this.m_rB.y*C$zuo,C$zus.ex.y=C$zus.ey.x,C$zus.ey.y=C$zur+C$zun+this.m_rA.x*this.m_rA.x*C$zua+this.m_rB.x*this.m_rB.x*C$zuo,C$zus.ez.y=this.m_rA.x*C$zua+this.m_rB.x*C$zuo,C$zus.ex.z=C$zus.ez.x,C$zus.ey.z=C$zus.ez.y,C$zus.ez.z=C$zua+C$zuo,0<this.m_frequencyHz?(C$zus.GetInverse22(this.m_mass),C$zui=C$zui-C$zue-this.m_referenceAngle,C$zue=2*C$zum*this.m_frequencyHz,C$zuf=2*(C$zul=0<(C$zuc=C$zua+C$zuo)?1/C$zuc:0)*this.m_dampingRatio*C$zue,C$zup=C$zut.step.dt,this.m_gamma=C$zup*(C$zuf+C$zup*(C$zuf=C$zul*C$zue*C$zue)),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=C$zui*C$zup*C$zuf*this.m_gamma,C$zuc+=this.m_gamma,this.m_mass.ez.z=0!==C$zuc?1/C$zuc:0):(C$zus.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0),C$zut.step.warmStarting?(this.m_impulse.SelfMul(C$zut.step.dtRatio),C$zul=b2WeldJoint.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y),C$zuh.SelfMulSub(C$zur,C$zul),C$zuu-=C$zua*(C$zuj.CrossVV(this.m_rA,C$zul)+this.m_impulse.z),C$zu_.SelfMulAdd(C$zun,C$zul),C$zud+=C$zuo*(C$zuj.CrossVV(this.m_rB,C$zul)+this.m_impulse.z)):this.m_impulse.SetZero(),C$zut.velocities[this.m_indexA].w=C$zuu,C$zut.velocities[this.m_indexB].w=C$zud},b2WeldJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zue=C$zut.velocities[this.m_indexA].v;var C$zui=C$zut.velocities[this.m_indexA].w;var C$zur=C$zut.velocities[this.m_indexB].v;var C$zun=C$zut.velocities[this.m_indexB].w;var C$zua=this.m_invMassA,C$zuh=this.m_invMassB;var C$zuo=this.m_invIA,C$zus=this.m_invIB;var C$zuc,C$zul;0<this.m_frequencyHz?(C$zuc=-this.m_mass.ez.z*(C$zun-C$zui+this.m_bias+this.m_gamma*this.m_impulse.z),this.m_impulse.z+=C$zuc,C$zui-=C$zuo*C$zuc,C$zuc=C$zuj.SubVV(C$zuj.AddVCrossSV(C$zur,C$zun+=C$zus*C$zuc,this.m_rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,C$zuj.s_t1),b2WeldJoint.SolveVelocityConstraints_s_Cdot1),C$zul=C$zuu.MulM33XY(this.m_mass,C$zuc.x,C$zuc.y,b2WeldJoint.SolveVelocityConstraints_s_impulse1).SelfNeg(),this.m_impulse.x+=C$zul.x,this.m_impulse.y+=C$zul.y,C$zue.SelfMulSub(C$zua,C$zul=C$zul),C$zui-=C$zuo*C$zuj.CrossVV(this.m_rA,C$zul),C$zur.SelfMulAdd(C$zuh,C$zul),C$zun+=C$zus*C$zuj.CrossVV(this.m_rB,C$zul)):(C$zuc=C$zuj.SubVV(C$zuj.AddVCrossSV(C$zur,C$zun,this.m_rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zue,C$zui,this.m_rA,C$zuj.s_t1),b2WeldJoint.SolveVelocityConstraints_s_Cdot1),C$zuc=C$zuu.MulM33XYZ(this.m_mass,C$zuc.x,C$zuc.y,C$zun-C$zui,b2WeldJoint.SolveVelocityConstraints_s_impulse).SelfNeg(),this.m_impulse.SelfAdd(C$zuc),C$zul=b2WeldJoint.SolveVelocityConstraints_s_P.Set(C$zuc.x,C$zuc.y),C$zue.SelfMulSub(C$zua,C$zul),C$zui-=C$zuo*(C$zuj.CrossVV(this.m_rA,C$zul)+C$zuc.z),C$zur.SelfMulAdd(C$zuh,C$zul),C$zun+=C$zus*(C$zuj.CrossVV(this.m_rB,C$zul)+C$zuc.z)),C$zut.velocities[this.m_indexA].w=C$zui,C$zut.velocities[this.m_indexB].w=C$zun},b2WeldJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zuh=C$zut.positions[this.m_indexA].c;var C$zue=C$zut.positions[this.m_indexA].a;var C$zuu=C$zut.positions[this.m_indexB].c;var C$zui=C$zut.positions[this.m_indexB].a;var C$zur=this.m_qA.SetAngle(C$zue),C$zun=this.m_qB.SetAngle(C$zui);var C$zu_=this.m_invMassA,C$zud=this.m_invMassB;var C$zua=this.m_invIA,C$zuo=this.m_invIB;C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);C$zur=C$zuR.MulRV(C$zur,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);C$zun=C$zuR.MulRV(C$zun,this.m_lalcB,this.m_rB);var C$zuf,C$zup;var C$zus=this.m_K;var C$zuc,C$zul;return C$zus.ex.x=C$zu_+C$zud+C$zur.y*C$zur.y*C$zua+C$zun.y*C$zun.y*C$zuo,C$zus.ey.x=-C$zur.y*C$zur.x*C$zua-C$zun.y*C$zun.x*C$zuo,C$zus.ez.x=-C$zur.y*C$zua-C$zun.y*C$zuo,C$zus.ex.y=C$zus.ey.x,C$zus.ey.y=C$zu_+C$zud+C$zur.x*C$zur.x*C$zua+C$zun.x*C$zun.x*C$zuo,C$zus.ez.y=C$zur.x*C$zua+C$zun.x*C$zuo,C$zus.ex.z=C$zus.ez.x,C$zus.ey.z=C$zus.ez.y,C$zus.ez.z=C$zua+C$zuo,0<this.m_frequencyHz?(C$zuf=(C$zuc=C$zuj.SubVV(C$zuj.AddVV(C$zuu,C$zun,C$zuj.s_t0),C$zuj.AddVV(C$zuh,C$zur,C$zuj.s_t1),b2WeldJoint.SolvePositionConstraints_s_C1)).Length(),C$zup=0,C$zul=C$zus.Solve22(C$zuc.x,C$zuc.y,b2WeldJoint.SolvePositionConstraints_s_P).SelfNeg(),C$zuh.SelfMulSub(C$zu_,C$zul),C$zue-=C$zua*C$zuj.CrossVV(C$zur,C$zul),C$zuu.SelfMulAdd(C$zud,C$zul),C$zui+=C$zuo*C$zuj.CrossVV(C$zun,C$zul)):(C$zuc=C$zuj.SubVV(C$zuj.AddVV(C$zuu,C$zun,C$zuj.s_t0),C$zuj.AddVV(C$zuh,C$zur,C$zuj.s_t1),b2WeldJoint.SolvePositionConstraints_s_C1),C$zun=C$zui-C$zue-this.m_referenceAngle,C$zuf=C$zuc.Length(),C$zup=C$zuM(C$zun),C$zur=C$zus.Solve33(C$zuc.x,C$zuc.y,C$zun,b2WeldJoint.SolvePositionConstraints_s_impulse).SelfNeg(),C$zul=b2WeldJoint.SolvePositionConstraints_s_P.Set(C$zur.x,C$zur.y),C$zuh.SelfMulSub(C$zu_,C$zul),C$zue-=C$zua*(C$zuj.CrossVV(this.m_rA,C$zul)+C$zur.z),C$zuu.SelfMulAdd(C$zud,C$zul),C$zui+=C$zuo*(C$zuj.CrossVV(this.m_rB,C$zul)+C$zur.z)),C$zut.positions[this.m_indexA].a=C$zue,C$zut.positions[this.m_indexB].a=C$zui,C$zuf<=.008&&C$zup<=C$zuP},b2WeldJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2WeldJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2WeldJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue.x=C$zut*this.m_impulse.x,C$zue.y=C$zut*this.m_impulse.y,C$zue},b2WeldJoint.prototype.GetReactionTorque=function(C$zut){return C$zut*this.m_impulse.z},b2WeldJoint.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},b2WeldJoint.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},b2WeldJoint.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},b2WeldJoint.prototype.SetFrequency=function(C$zut){this.m_frequencyHz=C$zut},b2WeldJoint.prototype.GetFrequency=function(){return this.m_frequencyHz},b2WeldJoint.prototype.SetDampingRatio=function(C$zut){this.m_dampingRatio=C$zut},b2WeldJoint.prototype.GetDampingRatio=function(){return this.m_dampingRatio},b2WeldJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$zut("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$zut("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2WeldJoint.InitVelocityConstraints_s_P=new C$zuj,b2WeldJoint.SolveVelocityConstraints_s_Cdot1=new C$zuj,b2WeldJoint.SolveVelocityConstraints_s_impulse1=new C$zuj,b2WeldJoint.SolveVelocityConstraints_s_impulse=new C$zuh,b2WeldJoint.SolveVelocityConstraints_s_P=new C$zuj,b2WeldJoint.SolvePositionConstraints_s_C1=new C$zuj,b2WeldJoint.SolvePositionConstraints_s_P=new C$zuj,b2WeldJoint.SolvePositionConstraints_s_impulse=new C$zuh;var C$zuEi=b2WeldJoint;function b2WeldJoint(C$zut){var C$zue=C$zuPi.call(this,C$zut)||this;return C$zue.m_frequencyHz=0,C$zue.m_dampingRatio=0,C$zue.m_bias=0,C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_referenceAngle=0,C$zue.m_gamma=0,C$zue.m_impulse=new C$zuh(0,0,0),C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_mass=new C$zuu,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_K=new C$zuu,C$zue.m_frequencyHz=b2Maybe(C$zut.frequencyHz,0),C$zue.m_dampingRatio=b2Maybe(C$zut.dampingRatio,0),C$zue.m_localAnchorA.Copy(b2Maybe(C$zut.localAnchorA,C$zuj.ZERO)),C$zue.m_localAnchorB.Copy(b2Maybe(C$zut.localAnchorB,C$zuj.ZERO)),C$zue.m_referenceAngle=b2Maybe(C$zut.referenceAngle,0),C$zue.m_impulse.SetZero(),C$zue}var C$zuPi;__extends(b2WheelJointDef,C$zuRi=C$zuSET),b2WheelJointDef.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur){this.bodyA=C$zut,this.bodyB=C$zue,this.bodyA.GetLocalPoint(C$zui,this.localAnchorA),this.bodyB.GetLocalPoint(C$zui,this.localAnchorB),this.bodyA.GetLocalVector(C$zur,this.localAxisA)};var C$zuMi=b2WheelJointDef;function b2WheelJointDef(){var C$zut=C$zuRi.call(this,C$zuH.b2JointType.e_wheelJoint)||this;return C$zut.localAnchorA=new C$zuj(0,0),C$zut.localAnchorB=new C$zuj(0,0),C$zut.localAxisA=new C$zuj(1,0),C$zut.enableMotor=!1,C$zut.maxMotorTorque=0,C$zut.motorSpeed=0,C$zut.frequencyHz=2,C$zut.dampingRatio=.7,C$zut}var C$zuRi;__extends(b2WheelJoint,C$zuBi=C$zuNe),b2WheelJoint.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},b2WheelJoint.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},b2WheelJoint.prototype.SetSpringFrequencyHz=function(C$zut){this.m_frequencyHz=C$zut},b2WheelJoint.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz},b2WheelJoint.prototype.SetSpringDampingRatio=function(C$zut){this.m_dampingRatio=C$zut},b2WheelJoint.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio},b2WheelJoint.prototype.InitVelocityConstraints=function(C$zut){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$zue=this.m_invMassA,C$zui=this.m_invMassB;var C$zur=this.m_invIA,C$zun=this.m_invIB;var C$zua=C$zut.positions[this.m_indexA].c;var C$zuo=C$zut.positions[this.m_indexA].a;var C$zuh=C$zut.velocities[this.m_indexA].v;var C$zuu=C$zut.velocities[this.m_indexA].w;var C$zus=C$zut.positions[this.m_indexB].c;var C$zuc=C$zut.positions[this.m_indexB].a;var C$zu_=C$zut.velocities[this.m_indexB].v;var C$zud=C$zut.velocities[this.m_indexB].w;C$zuo=this.m_qA.SetAngle(C$zuo),C$zuc=this.m_qB.SetAngle(C$zuc);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var C$zul=C$zuR.MulRV(C$zuo,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);C$zuc=C$zuR.MulRV(C$zuc,this.m_lalcB,this.m_rB);C$zus=C$zuj.SubVV(C$zuj.AddVV(C$zus,C$zuc,C$zuj.s_t0),C$zuj.AddVV(C$zua,C$zul,C$zuj.s_t1),b2WheelJoint.InitVelocityConstraints_s_d);C$zuR.MulRV(C$zuo,this.m_localYAxisA,this.m_ay),this.m_sAy=C$zuj.CrossVV(C$zuj.AddVV(C$zus,C$zul,C$zuj.s_t0),this.m_ay),this.m_sBy=C$zuj.CrossVV(C$zuc,this.m_ay),this.m_mass=C$zue+C$zui+C$zur*this.m_sAy*this.m_sAy+C$zun*this.m_sBy*this.m_sBy,0<this.m_mass&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,(this.m_gamma=0)<this.m_frequencyHz?(C$zuR.MulRV(C$zuo,this.m_localXAxisA,this.m_ax),this.m_sAx=C$zuj.CrossVV(C$zuj.AddVV(C$zus,C$zul,C$zuj.s_t0),this.m_ax),this.m_sBx=C$zuj.CrossVV(C$zuc,this.m_ax),0<(C$zua=C$zue+C$zui+C$zur*this.m_sAx*this.m_sAx+C$zun*this.m_sBx*this.m_sBx)&&(this.m_springMass=1/C$zua,C$zuo=C$zuj.DotVV(C$zus,this.m_ax),C$zul=2*C$zum*this.m_frequencyHz,C$zuc=2*this.m_springMass*this.m_dampingRatio*C$zul,C$zue=this.m_springMass*C$zul*C$zul,C$zui=C$zut.step.dt,this.m_gamma=C$zui*(C$zuc+C$zui*C$zue),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=C$zuo*C$zui*C$zue*this.m_gamma,this.m_springMass=C$zua+this.m_gamma,0<this.m_springMass&&(this.m_springMass=1/this.m_springMass))):this.m_springImpulse=0,this.m_enableMotor?(this.m_motorMass=C$zur+C$zun,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),C$zut.step.warmStarting?(this.m_impulse*=C$zut.step.dtRatio,this.m_springImpulse*=C$zut.step.dtRatio,this.m_motorImpulse*=C$zut.step.dtRatio,C$zus=C$zuj.AddVV(C$zuj.MulSV(this.m_impulse,this.m_ay,C$zuj.s_t0),C$zuj.MulSV(this.m_springImpulse,this.m_ax,C$zuj.s_t1),b2WheelJoint.InitVelocityConstraints_s_P),C$zul=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,C$zuc=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,C$zuh.SelfMulSub(this.m_invMassA,C$zus),C$zuu-=this.m_invIA*C$zul,C$zu_.SelfMulAdd(this.m_invMassB,C$zus),C$zud+=this.m_invIB*C$zuc):(this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0),C$zut.velocities[this.m_indexA].w=C$zuu,C$zut.velocities[this.m_indexB].w=C$zud},b2WheelJoint.prototype.SolveVelocityConstraints=function(C$zut){var C$zuh=this.m_invMassA,C$zuu=this.m_invMassB;var C$zue=this.m_invIA,C$zui=this.m_invIB;var C$zur=C$zut.velocities[this.m_indexA].v;var C$zun=C$zut.velocities[this.m_indexA].w;var C$zua=C$zut.velocities[this.m_indexB].v;var C$zuo=C$zut.velocities[this.m_indexB].w;var C$zus=C$zuj.DotVV(this.m_ax,C$zuj.SubVV(C$zua,C$zur,C$zuj.s_t0))+this.m_sBx*C$zuo-this.m_sAx*C$zun;var C$zuc=-this.m_springMass*(C$zus+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=C$zuc;var C$zul=C$zuj.MulSV(C$zuc,this.m_ax,b2WheelJoint.SolveVelocityConstraints_s_P);var C$zu_=C$zuc*this.m_sAx;var C$zud=C$zuc*this.m_sBx;C$zur.SelfMulSub(C$zuh,C$zul),C$zun-=C$zue*C$zu_,C$zua.SelfMulAdd(C$zuu,C$zul);C$zus=(C$zuo+=C$zui*C$zud)-C$zun-this.m_motorSpeed;C$zuc=-this.m_motorMass*C$zus;var C$zuf=this.m_motorImpulse;var C$zup=C$zut.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=b2Clamp(this.m_motorImpulse+C$zuc,-C$zup,C$zup),C$zun-=C$zue*(C$zuc=this.m_motorImpulse-C$zuf),C$zuo+=C$zui*C$zuc;C$zus=C$zuj.DotVV(this.m_ay,C$zuj.SubVV(C$zua,C$zur,C$zuj.s_t0))+this.m_sBy*C$zuo-this.m_sAy*C$zun;C$zuc=-this.m_mass*C$zus;this.m_impulse+=C$zuc;C$zul=C$zuj.MulSV(C$zuc,this.m_ay,b2WheelJoint.SolveVelocityConstraints_s_P);C$zu_=C$zuc*this.m_sAy;C$zud=C$zuc*this.m_sBy;C$zur.SelfMulSub(C$zuh,C$zul),C$zun-=C$zue*C$zu_,C$zua.SelfMulAdd(C$zuu,C$zul),C$zuo+=C$zui*C$zud,C$zut.velocities[this.m_indexA].w=C$zun,C$zut.velocities[this.m_indexB].w=C$zuo},b2WheelJoint.prototype.SolvePositionConstraints=function(C$zut){var C$zue=C$zut.positions[this.m_indexA].c;var C$zui=C$zut.positions[this.m_indexA].a;var C$zur=C$zut.positions[this.m_indexB].c;var C$zun=C$zut.positions[this.m_indexB].a;var C$zua=this.m_qA.SetAngle(C$zui),C$zuo=this.m_qB.SetAngle(C$zun);C$zuj.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);var C$zus=C$zuR.MulRV(C$zua,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);C$zuo=C$zuR.MulRV(C$zuo,this.m_lalcB,this.m_rB);var C$zuc=C$zuj.AddVV(C$zuj.SubVV(C$zur,C$zue,C$zuj.s_t0),C$zuj.SubVV(C$zuo,C$zus,C$zuj.s_t1),b2WheelJoint.SolvePositionConstraints_s_d);C$zua=C$zuR.MulRV(C$zua,this.m_localYAxisA,this.m_ay);C$zus=C$zuj.CrossVV(C$zuj.AddVV(C$zuc,C$zus,C$zuj.s_t0),C$zua);C$zuo=C$zuj.CrossVV(C$zuo,C$zua);C$zuc=C$zuj.DotVV(C$zuc,this.m_ay);var C$zul=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;C$zua=C$zuj.MulSV(C$zul=0!==C$zul?-C$zuc/C$zul:0,C$zua,b2WheelJoint.SolvePositionConstraints_s_P);C$zus*=C$zul;C$zul*=C$zuo;return C$zue.SelfMulSub(this.m_invMassA,C$zua),C$zui-=this.m_invIA*C$zus,C$zur.SelfMulAdd(this.m_invMassB,C$zua),C$zun+=this.m_invIB*C$zul,C$zut.positions[this.m_indexA].a=C$zui,C$zut.positions[this.m_indexB].a=C$zun,C$zuM(C$zuc)<=.008},b2WheelJoint.prototype.GetDefinition=function(C$zut){return C$zut},b2WheelJoint.prototype.GetAnchorA=function(C$zut){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$zut)},b2WheelJoint.prototype.GetAnchorB=function(C$zut){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$zut)},b2WheelJoint.prototype.GetReactionForce=function(C$zut,C$zue){return C$zue.x=C$zut*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),C$zue.y=C$zut*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),C$zue},b2WheelJoint.prototype.GetReactionTorque=function(C$zut){return C$zut*this.m_motorImpulse},b2WheelJoint.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},b2WheelJoint.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},b2WheelJoint.prototype.GetLocalAxisA=function(){return this.m_localXAxisA},b2WheelJoint.prototype.GetJointTranslation=function(){return this.GetPrismaticJointTranslation()},b2WheelJoint.prototype.GetJointLinearSpeed=function(){return this.GetPrismaticJointSpeed()},b2WheelJoint.prototype.GetJointAngle=function(){return this.GetRevoluteJointAngle()},b2WheelJoint.prototype.GetJointAngularSpeed=function(){return this.GetRevoluteJointSpeed()},b2WheelJoint.prototype.GetPrismaticJointTranslation=function(){var C$zut=this.m_bodyA;var C$zue=this.m_bodyB;var C$zui=C$zut.GetWorldPoint(this.m_localAnchorA,new C$zuj);C$zue=C$zue.GetWorldPoint(this.m_localAnchorB,new C$zuj);C$zue=C$zuj.SubVV(C$zue,C$zui,new C$zuj);C$zui=C$zut.GetWorldVector(this.m_localXAxisA,new C$zuj);return C$zuj.DotVV(C$zue,C$zui)},b2WheelJoint.prototype.GetPrismaticJointSpeed=function(){var C$zut=this.m_bodyA;var C$zue=this.m_bodyB;C$zuj.SubVV(this.m_localAnchorA,C$zut.m_sweep.localCenter,this.m_lalcA);var C$zui=C$zuR.MulRV(C$zut.m_xf.q,this.m_lalcA,this.m_rA);C$zuj.SubVV(this.m_localAnchorB,C$zue.m_sweep.localCenter,this.m_lalcB);var C$zur=C$zuR.MulRV(C$zue.m_xf.q,this.m_lalcB,this.m_rB);var C$zun=C$zuj.AddVV(C$zut.m_sweep.c,C$zui,C$zuj.s_t0);var C$zua=C$zuj.AddVV(C$zue.m_sweep.c,C$zur,C$zuj.s_t1);C$zua=C$zuj.SubVV(C$zua,C$zun,C$zuj.s_t2);C$zun=C$zut.GetWorldVector(this.m_localXAxisA,new C$zuj);var C$zuo=C$zut.m_linearVelocity;var C$zus=C$zue.m_linearVelocity;C$zut=C$zut.m_angularVelocity;C$zue=C$zue.m_angularVelocity;return C$zuj.DotVV(C$zua,C$zuj.CrossSV(C$zut,C$zun,C$zuj.s_t0))+C$zuj.DotVV(C$zun,C$zuj.SubVV(C$zuj.AddVCrossSV(C$zus,C$zue,C$zur,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zuo,C$zut,C$zui,C$zuj.s_t1),C$zuj.s_t0))},b2WheelJoint.prototype.GetRevoluteJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a},b2WheelJoint.prototype.GetRevoluteJointSpeed=function(){var C$zut=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-C$zut},b2WheelJoint.prototype.IsMotorEnabled=function(){return this.m_enableMotor},b2WheelJoint.prototype.EnableMotor=function(C$zut){C$zut!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$zut)},b2WheelJoint.prototype.SetMotorSpeed=function(C$zut){C$zut!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$zut)},b2WheelJoint.prototype.SetMaxMotorTorque=function(C$zut){C$zut!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=C$zut)},b2WheelJoint.prototype.GetMotorTorque=function(C$zut){return C$zut*this.m_motorImpulse},b2WheelJoint.prototype.Dump=function(C$zut){var C$zue=this.m_bodyA.m_islandIndex;var C$zui=this.m_bodyB.m_islandIndex;C$zut("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"),C$zut("  jd.bodyA = bodies[%d];\n",C$zue),C$zut("  jd.bodyB = bodies[%d];\n",C$zui),C$zut("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$zut("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$zut("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$zut("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),C$zut("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$zut("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$zut("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),C$zut("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$zut("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$zut("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},b2WheelJoint.InitVelocityConstraints_s_d=new C$zuj,b2WheelJoint.InitVelocityConstraints_s_P=new C$zuj,b2WheelJoint.SolveVelocityConstraints_s_P=new C$zuj,b2WheelJoint.SolvePositionConstraints_s_d=new C$zuj,b2WheelJoint.SolvePositionConstraints_s_P=new C$zuj;var C$zuIi=b2WheelJoint;function b2WheelJoint(C$zut){var C$zue=C$zuBi.call(this,C$zut)||this;return C$zue.m_frequencyHz=0,C$zue.m_dampingRatio=0,C$zue.m_localAnchorA=new C$zuj,C$zue.m_localAnchorB=new C$zuj,C$zue.m_localXAxisA=new C$zuj,C$zue.m_localYAxisA=new C$zuj,C$zue.m_impulse=0,C$zue.m_motorImpulse=0,C$zue.m_springImpulse=0,C$zue.m_maxMotorTorque=0,C$zue.m_motorSpeed=0,C$zue.m_enableMotor=!1,C$zue.m_indexA=0,C$zue.m_indexB=0,C$zue.m_localCenterA=new C$zuj,C$zue.m_localCenterB=new C$zuj,C$zue.m_invMassA=0,C$zue.m_invMassB=0,C$zue.m_invIA=0,C$zue.m_invIB=0,C$zue.m_ax=new C$zuj,C$zue.m_ay=new C$zuj,C$zue.m_sAx=0,C$zue.m_sBx=0,C$zue.m_sAy=0,C$zue.m_sBy=0,C$zue.m_mass=0,C$zue.m_motorMass=0,C$zue.m_springMass=0,C$zue.m_bias=0,C$zue.m_gamma=0,C$zue.m_qA=new C$zuR,C$zue.m_qB=new C$zuR,C$zue.m_lalcA=new C$zuj,C$zue.m_lalcB=new C$zuj,C$zue.m_rA=new C$zuj,C$zue.m_rB=new C$zuj,C$zue.m_frequencyHz=b2Maybe(C$zut.frequencyHz,2),C$zue.m_dampingRatio=b2Maybe(C$zut.dampingRatio,.7),C$zue.m_localAnchorA.Copy(b2Maybe(C$zut.localAnchorA,C$zuj.ZERO)),C$zue.m_localAnchorB.Copy(b2Maybe(C$zut.localAnchorB,C$zuj.ZERO)),C$zue.m_localXAxisA.Copy(b2Maybe(C$zut.localAxisA,C$zuj.UNITX)),C$zuj.CrossOneV(C$zue.m_localXAxisA,C$zue.m_localYAxisA),C$zue.m_maxMotorTorque=b2Maybe(C$zut.maxMotorTorque,0),C$zue.m_motorSpeed=b2Maybe(C$zut.motorSpeed,0),C$zue.m_enableMotor=b2Maybe(C$zut.enableMotor,!1),C$zue.m_ax.SetZero(),C$zue.m_ay.SetZero(),C$zue}var C$zuBi;function b2MixFriction(C$zut,C$zue){return C$zuX(C$zut*C$zue)}function b2MixRestitution(C$zut,C$zue){return C$zue<C$zut?C$zut:C$zue}var C$zuDi=function(C$zut){this.prev=null,this.next=null,this.contact=C$zut};b2Contact.prototype.GetManifold=function(){return this.m_manifold},b2Contact.prototype.GetWorldManifold=function(C$zut){var C$zue=this.m_fixtureA.GetBody();var C$zui=this.m_fixtureB.GetBody();var C$zur=this.m_fixtureA.GetShape();var C$zun=this.m_fixtureB.GetShape();C$zut.Initialize(this.m_manifold,C$zue.GetTransform(),C$zur.m_radius,C$zui.GetTransform(),C$zun.m_radius)},b2Contact.prototype.IsTouching=function(){return this.m_touchingFlag},b2Contact.prototype.SetEnabled=function(C$zut){this.m_enabledFlag=C$zut},b2Contact.prototype.IsEnabled=function(){return this.m_enabledFlag},b2Contact.prototype.GetNext=function(){return this.m_next},b2Contact.prototype.GetFixtureA=function(){return this.m_fixtureA},b2Contact.prototype.GetChildIndexA=function(){return this.m_indexA},b2Contact.prototype.GetFixtureB=function(){return this.m_fixtureB},b2Contact.prototype.GetChildIndexB=function(){return this.m_indexB},b2Contact.prototype.FlagForFiltering=function(){this.m_filterFlag=!0},b2Contact.prototype.SetFriction=function(C$zut){this.m_friction=C$zut},b2Contact.prototype.GetFriction=function(){return this.m_friction},b2Contact.prototype.ResetFriction=function(){this.m_friction=b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},b2Contact.prototype.SetRestitution=function(C$zut){this.m_restitution=C$zut},b2Contact.prototype.GetRestitution=function(){return this.m_restitution},b2Contact.prototype.ResetRestitution=function(){this.m_restitution=b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},b2Contact.prototype.SetTangentSpeed=function(C$zut){this.m_tangentSpeed=C$zut},b2Contact.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed},b2Contact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=C$zut,this.m_fixtureB=C$zui,this.m_indexA=C$zue,this.m_indexB=C$zur,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,delete this.m_nodeA.contact,this.m_nodeA.prev=null,this.m_nodeA.next=null,delete this.m_nodeA.other,delete this.m_nodeB.contact,this.m_nodeB.prev=null,this.m_nodeB.next=null,delete this.m_nodeB.other,this.m_toiCount=0,this.m_friction=b2MixFriction(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=b2MixRestitution(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},b2Contact.prototype.Update=function(C$zut){var C$zue=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=C$zue;C$zue=!(this.m_enabledFlag=!0);var C$zui=this.m_touchingFlag;var C$zur=this.m_fixtureA.IsSensor();var C$zun=this.m_fixtureB.IsSensor();C$zur=C$zur||C$zun;C$zun=this.m_fixtureA.GetBody();var C$zua=this.m_fixtureB.GetBody();var C$zuh=C$zun.GetTransform();var C$zuu=C$zua.GetTransform();if(C$zur){var C$zu_=this.m_fixtureA.GetShape();var C$zud=this.m_fixtureB.GetShape();C$zue=b2TestOverlapShape(C$zu_,this.m_indexA,C$zud,this.m_indexB,C$zuh,C$zuu),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,C$zuh,C$zuu),C$zue=0<this.m_manifold.pointCount;for(var C$zuo=0;C$zuo<this.m_manifold.pointCount;++C$zuo){var C$zus=this.m_manifold.points[C$zuo];C$zus.normalImpulse=0,C$zus.tangentImpulse=0;var C$zuf=C$zus.id;for(var C$zuc=0;C$zuc<this.m_oldManifold.pointCount;++C$zuc){var C$zul=this.m_oldManifold.points[C$zuc];if(C$zul.id.key===C$zuf.key){C$zus.normalImpulse=C$zul.normalImpulse,C$zus.tangentImpulse=C$zul.tangentImpulse;break}}}C$zue!==C$zui&&(C$zun.SetAwake(!0),C$zua.SetAwake(!0))}this.m_touchingFlag=C$zue,!C$zui&&C$zue&&C$zut&&C$zut.BeginContact(this),C$zui&&!C$zue&&C$zut&&C$zut.EndContact(this),!C$zur&&C$zue&&C$zut&&C$zut.PreSolve(this,this.m_oldManifold)},b2Contact.prototype.ComputeTOI=function(C$zut,C$zue){var C$zui=b2Contact.ComputeTOI_s_input;C$zui.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),C$zui.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),C$zui.sweepA.Copy(C$zut),C$zui.sweepB.Copy(C$zue),C$zui.tMax=.008;C$zut=b2Contact.ComputeTOI_s_output;return b2TimeOfImpact(C$zut,C$zui),C$zut.t},b2Contact.ComputeTOI_s_input=new C$zuEt,b2Contact.ComputeTOI_s_output=new C$zuPt;var C$zuLi=b2Contact;function b2Contact(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_indexA=0,this.m_indexB=0,this.m_manifold=new C$zust,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new C$zust,this.m_nodeA=new C$zuDi(this),this.m_nodeB=new C$zuDi(this)}__extends(b2CircleContact,C$zuOi=C$zuLi),b2CircleContact.Create=function(C$zut){return new b2CircleContact},b2CircleContact.Destroy=function(C$zut,C$zue){},b2CircleContact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){C$zuOi.prototype.Reset.call(this,C$zut,C$zue,C$zui,C$zur)},b2CircleContact.prototype.Evaluate=function(C$zut,C$zue,C$zui){b2CollideCircles(C$zut,this.m_fixtureA.GetShape(),C$zue,this.m_fixtureB.GetShape(),C$zui)};var C$zuVi=b2CircleContact;function b2CircleContact(){return C$zuOi.call(this)||this}var C$zuOi;__extends(b2PolygonContact,C$zuNi=C$zuLi),b2PolygonContact.Create=function(C$zut){return new b2PolygonContact},b2PolygonContact.Destroy=function(C$zut,C$zue){},b2PolygonContact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){C$zuNi.prototype.Reset.call(this,C$zut,C$zue,C$zui,C$zur)},b2PolygonContact.prototype.Evaluate=function(C$zut,C$zue,C$zui){b2CollidePolygons(C$zut,this.m_fixtureA.GetShape(),C$zue,this.m_fixtureB.GetShape(),C$zui)};var C$zuFi=b2PolygonContact;function b2PolygonContact(){return C$zuNi.call(this)||this}var C$zuNi;__extends(b2PolygonAndCircleContact,C$zuzi=C$zuLi),b2PolygonAndCircleContact.Create=function(C$zut){return new b2PolygonAndCircleContact},b2PolygonAndCircleContact.Destroy=function(C$zut,C$zue){},b2PolygonAndCircleContact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){C$zuzi.prototype.Reset.call(this,C$zut,C$zue,C$zui,C$zur)},b2PolygonAndCircleContact.prototype.Evaluate=function(C$zut,C$zue,C$zui){b2CollidePolygonAndCircle(C$zut,this.m_fixtureA.GetShape(),C$zue,this.m_fixtureB.GetShape(),C$zui)};var C$zuki=b2PolygonAndCircleContact;function b2PolygonAndCircleContact(){return C$zuzi.call(this)||this}var C$zuzi;__extends(b2EdgeAndCircleContact,C$zuUi=C$zuLi),b2EdgeAndCircleContact.Create=function(C$zut){return new b2EdgeAndCircleContact},b2EdgeAndCircleContact.Destroy=function(C$zut,C$zue){},b2EdgeAndCircleContact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){C$zuUi.prototype.Reset.call(this,C$zut,C$zue,C$zui,C$zur)},b2EdgeAndCircleContact.prototype.Evaluate=function(C$zut,C$zue,C$zui){b2CollideEdgeAndCircle(C$zut,this.m_fixtureA.GetShape(),C$zue,this.m_fixtureB.GetShape(),C$zui)};var C$zuGi=b2EdgeAndCircleContact;function b2EdgeAndCircleContact(){return C$zuUi.call(this)||this}var C$zuUi;__extends(b2EdgeAndPolygonContact,C$zuHi=C$zuLi),b2EdgeAndPolygonContact.Create=function(C$zut){return new b2EdgeAndPolygonContact},b2EdgeAndPolygonContact.Destroy=function(C$zut,C$zue){},b2EdgeAndPolygonContact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){C$zuHi.prototype.Reset.call(this,C$zut,C$zue,C$zui,C$zur)},b2EdgeAndPolygonContact.prototype.Evaluate=function(C$zut,C$zue,C$zui){b2CollideEdgeAndPolygon(C$zut,this.m_fixtureA.GetShape(),C$zue,this.m_fixtureB.GetShape(),C$zui)};var C$zuWi=b2EdgeAndPolygonContact;function b2EdgeAndPolygonContact(){return C$zuHi.call(this)||this}var C$zuHi;__extends(b2ChainAndCircleContact,C$zuXi=C$zuLi),b2ChainAndCircleContact.Create=function(C$zut){return new b2ChainAndCircleContact},b2ChainAndCircleContact.Destroy=function(C$zut,C$zue){},b2ChainAndCircleContact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){C$zuXi.prototype.Reset.call(this,C$zut,C$zue,C$zui,C$zur)},b2ChainAndCircleContact.prototype.Evaluate=function(C$zut,C$zue,C$zui){var C$zur=this.m_fixtureA.GetShape();var C$zun=this.m_fixtureB.GetShape();var C$zua=b2ChainAndCircleContact.Evaluate_s_edge;C$zur.GetChildEdge(C$zua,this.m_indexA),b2CollideEdgeAndCircle(C$zut,C$zua,C$zue,C$zun,C$zui)},b2ChainAndCircleContact.Evaluate_s_edge=new C$zuEe;var C$zuji=b2ChainAndCircleContact;function b2ChainAndCircleContact(){return C$zuXi.call(this)||this}var C$zuXi;__extends(b2ChainAndPolygonContact,C$zuJi=C$zuLi),b2ChainAndPolygonContact.Create=function(C$zut){return new b2ChainAndPolygonContact},b2ChainAndPolygonContact.Destroy=function(C$zut,C$zue){},b2ChainAndPolygonContact.prototype.Reset=function(C$zut,C$zue,C$zui,C$zur){C$zuJi.prototype.Reset.call(this,C$zut,C$zue,C$zui,C$zur)},b2ChainAndPolygonContact.prototype.Evaluate=function(C$zut,C$zue,C$zui){var C$zur=this.m_fixtureA.GetShape();var C$zun=this.m_fixtureB.GetShape();var C$zua=b2ChainAndPolygonContact.Evaluate_s_edge;C$zur.GetChildEdge(C$zua,this.m_indexA),b2CollideEdgeAndPolygon(C$zut,C$zua,C$zue,C$zun,C$zui)},b2ChainAndPolygonContact.Evaluate_s_edge=new C$zuEe;var C$zuqi=b2ChainAndPolygonContact;function b2ChainAndPolygonContact(){return C$zuJi.call(this)||this}var C$zuJi;var C$zuYi=function(){this.createFcn=null,this.destroyFcn=null,this.primary=!1};b2ContactFactory.prototype.AddType=function(C$zue,C$zut,C$zui,C$zur){var C$zun=this;var C$zua=b2MakeArray(256,function(C$zut){return C$zue(C$zun.m_allocator)});function poolCreateFcn(C$zut){return C$zua.pop()||C$zue(C$zut)}function poolDestroyFcn(C$zut,C$zue){C$zua.push(C$zut)}this.m_registers[C$zui][C$zur].createFcn=poolCreateFcn,this.m_registers[C$zui][C$zur].destroyFcn=poolDestroyFcn,this.m_registers[C$zui][C$zur].primary=!0,C$zui!==C$zur&&(this.m_registers[C$zur][C$zui].createFcn=poolCreateFcn,this.m_registers[C$zur][C$zui].destroyFcn=poolDestroyFcn,this.m_registers[C$zur][C$zui].primary=!1)},b2ContactFactory.prototype.InitializeRegisters=function(){this.m_registers=[];for(var C$zut=0;C$zut<C$zuH.b2ShapeType.e_shapeTypeCount;C$zut++){this.m_registers[C$zut]=[];for(var C$zue=0;C$zue<C$zuH.b2ShapeType.e_shapeTypeCount;C$zue++)this.m_registers[C$zut][C$zue]=new C$zuYi}this.AddType(C$zuVi.Create,C$zuVi.Destroy,C$zuH.b2ShapeType.e_circleShape,C$zuH.b2ShapeType.e_circleShape),this.AddType(C$zuki.Create,C$zuki.Destroy,C$zuH.b2ShapeType.e_polygonShape,C$zuH.b2ShapeType.e_circleShape),this.AddType(C$zuFi.Create,C$zuFi.Destroy,C$zuH.b2ShapeType.e_polygonShape,C$zuH.b2ShapeType.e_polygonShape),this.AddType(C$zuGi.Create,C$zuGi.Destroy,C$zuH.b2ShapeType.e_edgeShape,C$zuH.b2ShapeType.e_circleShape),this.AddType(C$zuWi.Create,C$zuWi.Destroy,C$zuH.b2ShapeType.e_edgeShape,C$zuH.b2ShapeType.e_polygonShape),this.AddType(C$zuji.Create,C$zuji.Destroy,C$zuH.b2ShapeType.e_chainShape,C$zuH.b2ShapeType.e_circleShape),this.AddType(C$zuqi.Create,C$zuqi.Destroy,C$zuH.b2ShapeType.e_chainShape,C$zuH.b2ShapeType.e_polygonShape)},b2ContactFactory.prototype.Create=function(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zut.GetType();var C$zua=C$zui.GetType();C$zun=this.m_registers[C$zun][C$zua];return C$zun.createFcn?(C$zua=C$zun.createFcn(this.m_allocator),C$zun.primary?C$zua.Reset(C$zut,C$zue,C$zui,C$zur):C$zua.Reset(C$zui,C$zur,C$zut,C$zue),C$zua):null},b2ContactFactory.prototype.Destroy=function(C$zut){var C$zue=C$zut.m_fixtureA;var C$zui=C$zut.m_fixtureB;0<C$zut.m_manifold.pointCount&&!C$zue.IsSensor()&&!C$zui.IsSensor()&&(C$zue.GetBody().SetAwake(!0),C$zui.GetBody().SetAwake(!0));C$zue=C$zue.GetType();C$zui=C$zui.GetType();C$zue=this.m_registers[C$zue][C$zui];C$zue.destroyFcn&&C$zue.destroyFcn(C$zut,this.m_allocator)};var C$zu$i=b2ContactFactory;function b2ContactFactory(C$zut){this.m_allocator=null,this.m_allocator=C$zut,this.InitializeRegisters()}b2DestructionListener.prototype.SayGoodbyeJoint=function(C$zut){},b2DestructionListener.prototype.SayGoodbyeFixture=function(C$zut){},b2DestructionListener.prototype.SayGoodbyeParticleGroup=function(C$zut){},b2DestructionListener.prototype.SayGoodbyeParticle=function(C$zut,C$zue){};var C$zuZi=b2DestructionListener;function b2DestructionListener(){}b2ContactFilter.prototype.ShouldCollide=function(C$zut,C$zue){var C$zui=C$zut.GetBody();var C$zur=C$zue.GetBody();if(C$zur.GetType()===C$zuH.b2BodyType.b2_staticBody&&C$zui.GetType()===C$zuH.b2BodyType.b2_staticBody)return!1;if(!C$zur.ShouldCollideConnected(C$zui))return!1;C$zur=C$zut.GetFilterData();C$zui=C$zue.GetFilterData();return C$zur.groupIndex===C$zui.groupIndex&&0!==C$zur.groupIndex?0<C$zur.groupIndex:0!=(C$zur.maskBits&C$zui.categoryBits)&&0!=(C$zur.categoryBits&C$zui.maskBits)},b2ContactFilter.prototype.ShouldCollideFixtureParticle=function(C$zut,C$zue,C$zui){return!0},b2ContactFilter.prototype.ShouldCollideParticleParticle=function(C$zut,C$zue,C$zui){return!0},b2ContactFilter.b2_defaultFilter=new b2ContactFilter;var C$zuQi=b2ContactFilter;function b2ContactFilter(){}var C$zuKi=function(){this.normalImpulses=b2MakeNumberArray(2),this.tangentImpulses=b2MakeNumberArray(2),this.count=0};b2ContactListener.prototype.BeginContact=function(C$zut){},b2ContactListener.prototype.EndContact=function(C$zut){},b2ContactListener.prototype.BeginContactFixtureParticle=function(C$zut,C$zue){},b2ContactListener.prototype.EndContactFixtureParticle=function(C$zut,C$zue){},b2ContactListener.prototype.BeginContactParticleParticle=function(C$zut,C$zue){},b2ContactListener.prototype.EndContactParticleParticle=function(C$zut,C$zue){},b2ContactListener.prototype.PreSolve=function(C$zut,C$zue){},b2ContactListener.prototype.PostSolve=function(C$zut,C$zue){},b2ContactListener.b2_defaultListener=new b2ContactListener;var C$zutr=b2ContactListener;function b2ContactListener(){}b2QueryCallback.prototype.ReportFixture=function(C$zut){return!0},b2QueryCallback.prototype.ReportParticle=function(C$zut,C$zue){return!1},b2QueryCallback.prototype.ShouldQueryParticleSystem=function(C$zut){return!0};var C$zuer=b2QueryCallback;function b2QueryCallback(){}b2RayCastCallback.prototype.ReportFixture=function(C$zut,C$zue,C$zui,C$zur){return C$zur},b2RayCastCallback.prototype.ReportParticle=function(C$zut,C$zue,C$zui,C$zur,C$zun){return 0},b2RayCastCallback.prototype.ShouldQueryParticleSystem=function(C$zut){return!0};var C$zuir=b2RayCastCallback;function b2RayCastCallback(){}b2ContactManager.prototype.AddPair=function(C$zut,C$zue){var C$zui=C$zut.fixture;var C$zur=C$zue.fixture;var C$zun=C$zut.childIndex;var C$zua=C$zue.childIndex;var C$zuo=C$zui.GetBody();C$zut=C$zur.GetBody();if(C$zuo!==C$zut){var C$zus=C$zut.GetContactList();for(;C$zus;){if(C$zus.other===C$zuo){var C$zuc=C$zus.contact.GetFixtureA();var C$zul=C$zus.contact.GetFixtureB();var C$zuh=C$zus.contact.GetChildIndexA();var C$zuu=C$zus.contact.GetChildIndexB();if(C$zuc===C$zui&&C$zul===C$zur&&C$zuh===C$zun&&C$zuu===C$zua)return;if(C$zuc===C$zur&&C$zul===C$zui&&C$zuh===C$zua&&C$zuu===C$zun)return}C$zus=C$zus.next}this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(C$zui,C$zur)||null!==(C$zue=this.m_contactFactory.Create(C$zui,C$zun,C$zur,C$zua))&&(C$zui=C$zue.GetFixtureA(),C$zur=C$zue.GetFixtureB(),C$zun=C$zue.GetChildIndexA(),C$zua=C$zue.GetChildIndexB(),C$zuo=C$zui.m_body,C$zut=C$zur.m_body,C$zue.m_prev=null,C$zue.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=C$zue),((this.m_contactList=C$zue).m_nodeA.contact=C$zue).m_nodeA.other=C$zut,C$zue.m_nodeA.prev=null,C$zue.m_nodeA.next=C$zuo.m_contactList,null!==C$zuo.m_contactList&&(C$zuo.m_contactList.prev=C$zue.m_nodeA),C$zuo.m_contactList=C$zue.m_nodeA,(C$zue.m_nodeB.contact=C$zue).m_nodeB.other=C$zuo,C$zue.m_nodeB.prev=null,C$zue.m_nodeB.next=C$zut.m_contactList,null!==C$zut.m_contactList&&(C$zut.m_contactList.prev=C$zue.m_nodeB),C$zut.m_contactList=C$zue.m_nodeB,C$zui.IsSensor()||C$zur.IsSensor()||(C$zuo.SetAwake(!0),C$zut.SetAwake(!0)),++this.m_contactCount)}},b2ContactManager.prototype.FindNewContacts=function(){var C$zui=this;this.m_broadPhase.UpdatePairs(function(C$zut,C$zue){C$zui.AddPair(C$zut,C$zue)})},b2ContactManager.prototype.Destroy=function(C$zut){var C$zue=C$zut.GetFixtureA();var C$zui=C$zut.GetFixtureB();C$zue=C$zue.GetBody();C$zui=C$zui.GetBody();this.m_contactListener&&C$zut.IsTouching()&&this.m_contactListener.EndContact(C$zut),C$zut.m_prev&&(C$zut.m_prev.m_next=C$zut.m_next),C$zut.m_next&&(C$zut.m_next.m_prev=C$zut.m_prev),C$zut===this.m_contactList&&(this.m_contactList=C$zut.m_next),C$zut.m_nodeA.prev&&(C$zut.m_nodeA.prev.next=C$zut.m_nodeA.next),C$zut.m_nodeA.next&&(C$zut.m_nodeA.next.prev=C$zut.m_nodeA.prev),C$zut.m_nodeA===C$zue.m_contactList&&(C$zue.m_contactList=C$zut.m_nodeA.next),C$zut.m_nodeB.prev&&(C$zut.m_nodeB.prev.next=C$zut.m_nodeB.next),C$zut.m_nodeB.next&&(C$zut.m_nodeB.next.prev=C$zut.m_nodeB.prev),C$zut.m_nodeB===C$zui.m_contactList&&(C$zui.m_contactList=C$zut.m_nodeB.next),this.m_contactFactory.Destroy(C$zut),--this.m_contactCount},b2ContactManager.prototype.Collide=function(){var C$zut=this.m_contactList;for(;C$zut;){var C$zue=C$zut.GetFixtureA();var C$zui=C$zut.GetFixtureB();var C$zur=C$zut.GetChildIndexA();var C$zun=C$zut.GetChildIndexB();var C$zua=C$zue.GetBody();var C$zuo=C$zui.GetBody();if(C$zut.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(C$zue,C$zui)){C$zut=(C$zus=C$zut).m_next,this.Destroy(C$zus);continue}C$zut.m_filterFlag=!1}C$zua=C$zua.IsAwake()&&C$zua.m_type!==C$zuH.b2BodyType.b2_staticBody;C$zuo=C$zuo.IsAwake()&&C$zuo.m_type!==C$zuH.b2BodyType.b2_staticBody;var C$zus;C$zua||C$zuo?(C$zua=C$zue.m_proxies[C$zur].treeNode,C$zuo=C$zui.m_proxies[C$zun].treeNode,b2TestOverlapAABB(C$zua.aabb,C$zuo.aabb)?(C$zut.Update(this.m_contactListener),C$zut=C$zut.m_next):(C$zut=(C$zus=C$zut).m_next,this.Destroy(C$zus))):C$zut=C$zut.m_next}};var C$zurr=b2ContactManager;function b2ContactManager(){this.m_broadPhase=new C$zugt,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=C$zuQi.b2_defaultFilter,this.m_contactListener=C$zutr.b2_defaultListener,this.m_allocator=null,this.m_contactFactory=new C$zu$i(this.m_allocator)}b2Profile.prototype.Reset=function(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this};var C$zunr=b2Profile;function b2Profile(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}b2TimeStep.prototype.Copy=function(C$zut){return this.dt=C$zut.dt,this.inv_dt=C$zut.inv_dt,this.dtRatio=C$zut.dtRatio,this.positionIterations=C$zut.positionIterations,this.velocityIterations=C$zut.velocityIterations,this.particleIterations=C$zut.particleIterations,this.warmStarting=C$zut.warmStarting,this};var C$zuar=b2TimeStep;function b2TimeStep(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}b2Position.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2Position})};var C$zuor=b2Position;function b2Position(){this.c=new C$zuj,this.a=0}b2Velocity.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2Velocity})};var C$zusr=b2Velocity;function b2Velocity(){this.v=new C$zuj,this.w=0}var C$zucr=function(){this.step=new C$zuar};b2VelocityConstraintPoint.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2VelocityConstraintPoint})};var C$zulr=b2VelocityConstraintPoint;function b2VelocityConstraintPoint(){this.rA=new C$zuj,this.rB=new C$zuj,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}b2ContactVelocityConstraint.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2ContactVelocityConstraint})};var C$zuhr=b2ContactVelocityConstraint;function b2ContactVelocityConstraint(){this.points=C$zulr.MakeArray(2),this.normal=new C$zuj,this.tangent=new C$zuj,this.normalMass=new C$zug,this.K=new C$zug,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}b2ContactPositionConstraint.MakeArray=function(C$zut){return b2MakeArray(C$zut,function(C$zut){return new b2ContactPositionConstraint})};var C$zuur=b2ContactPositionConstraint;function b2ContactPositionConstraint(){this.localPoints=C$zuj.MakeArray(2),this.localNormal=new C$zuj,this.localPoint=new C$zuj,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new C$zuj,this.localCenterB=new C$zuj,this.invIA=0,this.invIB=0,this.type=C$zuH.b2ManifoldType.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}var C$zu_r=function(){this.step=new C$zuar,this.count=0,this.allocator=null};b2PositionSolverManifold.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur){var C$zun=b2PositionSolverManifold.Initialize_s_pointA;var C$zua=b2PositionSolverManifold.Initialize_s_pointB;var C$zuo=b2PositionSolverManifold.Initialize_s_planePoint;var C$zus=b2PositionSolverManifold.Initialize_s_clipPoint;switch(C$zut.type){case C$zuH.b2ManifoldType.e_circles:C$zuI.MulXV(C$zue,C$zut.localPoint,C$zun),C$zuI.MulXV(C$zui,C$zut.localPoints[0],C$zua),C$zuj.SubVV(C$zua,C$zun,this.normal).SelfNormalize(),C$zuj.MidVV(C$zun,C$zua,this.point),this.separation=C$zuj.DotVV(C$zuj.SubVV(C$zua,C$zun,C$zuj.s_t0),this.normal)-C$zut.radiusA-C$zut.radiusB;break;case C$zuH.b2ManifoldType.e_faceA:C$zuR.MulRV(C$zue.q,C$zut.localNormal,this.normal),C$zuI.MulXV(C$zue,C$zut.localPoint,C$zuo),C$zuI.MulXV(C$zui,C$zut.localPoints[C$zur],C$zus),this.separation=C$zuj.DotVV(C$zuj.SubVV(C$zus,C$zuo,C$zuj.s_t0),this.normal)-C$zut.radiusA-C$zut.radiusB,this.point.Copy(C$zus);break;case C$zuH.b2ManifoldType.e_faceB:C$zuR.MulRV(C$zui.q,C$zut.localNormal,this.normal),C$zuI.MulXV(C$zui,C$zut.localPoint,C$zuo),C$zuI.MulXV(C$zue,C$zut.localPoints[C$zur],C$zus),this.separation=C$zuj.DotVV(C$zuj.SubVV(C$zus,C$zuo,C$zuj.s_t0),this.normal)-C$zut.radiusA-C$zut.radiusB,this.point.Copy(C$zus),this.normal.SelfNeg()}},b2PositionSolverManifold.Initialize_s_pointA=new C$zuj,b2PositionSolverManifold.Initialize_s_pointB=new C$zuj,b2PositionSolverManifold.Initialize_s_planePoint=new C$zuj,b2PositionSolverManifold.Initialize_s_clipPoint=new C$zuj;var C$zudr=b2PositionSolverManifold;function b2PositionSolverManifold(){this.normal=new C$zuj,this.point=new C$zuj,this.separation=0}b2ContactSolver.prototype.Initialize=function(C$zut){if(this.m_step.Copy(C$zut.step),this.m_allocator=C$zut.allocator,this.m_count=C$zut.count,this.m_positionConstraints.length<this.m_count){var C$zuh=C$zuL(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<C$zuh;)this.m_positionConstraints[this.m_positionConstraints.length]=new C$zuur}if(this.m_velocityConstraints.length<this.m_count){C$zuh=C$zuL(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<C$zuh;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new C$zuhr}this.m_positions=C$zut.positions,this.m_velocities=C$zut.velocities,this.m_contacts=C$zut.contacts;for(var C$zue=0;C$zue<this.m_count;++C$zue){var C$zui=this.m_contacts[C$zue];var C$zur=C$zui.m_fixtureA;var C$zun=C$zui.m_fixtureB;var C$zuu=C$zur.GetShape();var C$zu_=C$zun.GetShape();C$zuu=C$zuu.m_radius;C$zu_=C$zu_.m_radius;C$zur=C$zur.GetBody();C$zun=C$zun.GetBody();var C$zua=C$zui.GetManifold();var C$zud=C$zua.pointCount;var C$zuo=this.m_velocityConstraints[C$zue];C$zuo.friction=C$zui.m_friction,C$zuo.restitution=C$zui.m_restitution,C$zuo.tangentSpeed=C$zui.m_tangentSpeed,C$zuo.indexA=C$zur.m_islandIndex,C$zuo.indexB=C$zun.m_islandIndex,C$zuo.invMassA=C$zur.m_invMass,C$zuo.invMassB=C$zun.m_invMass,C$zuo.invIA=C$zur.m_invI,C$zuo.invIB=C$zun.m_invI,C$zuo.contactIndex=C$zue,C$zuo.pointCount=C$zud,C$zuo.K.SetZero(),C$zuo.normalMass.SetZero();var C$zus=this.m_positionConstraints[C$zue];C$zus.indexA=C$zur.m_islandIndex,C$zus.indexB=C$zun.m_islandIndex,C$zus.invMassA=C$zur.m_invMass,C$zus.invMassB=C$zun.m_invMass,C$zus.localCenterA.Copy(C$zur.m_sweep.localCenter),C$zus.localCenterB.Copy(C$zun.m_sweep.localCenter),C$zus.invIA=C$zur.m_invI,C$zus.invIB=C$zun.m_invI,C$zus.localNormal.Copy(C$zua.localNormal),C$zus.localPoint.Copy(C$zua.localPoint),C$zus.pointCount=C$zud,C$zus.radiusA=C$zuu,C$zus.radiusB=C$zu_,C$zus.type=C$zua.type;for(var C$zuc=0;C$zuc<C$zud;++C$zuc){var C$zuf=C$zua.points[C$zuc];var C$zul=C$zuo.points[C$zuc];this.m_step.warmStarting?(C$zul.normalImpulse=this.m_step.dtRatio*C$zuf.normalImpulse,C$zul.tangentImpulse=this.m_step.dtRatio*C$zuf.tangentImpulse):(C$zul.normalImpulse=0,C$zul.tangentImpulse=0),C$zul.rA.SetZero(),C$zul.rB.SetZero(),C$zul.normalMass=0,C$zul.tangentMass=0,C$zul.velocityBias=0,C$zus.localPoints[C$zuc].Copy(C$zuf.localPoint)}}return this},b2ContactSolver.prototype.InitializeVelocityConstraints=function(){var C$zut=b2ContactSolver.InitializeVelocityConstraints_s_xfA;var C$zue=b2ContactSolver.InitializeVelocityConstraints_s_xfB;var C$zui=b2ContactSolver.InitializeVelocityConstraints_s_worldManifold;for(var C$zuh=0;C$zuh<this.m_count;++C$zuh){var C$zur=this.m_velocityConstraints[C$zuh];var C$zun=this.m_positionConstraints[C$zuh];var C$zuu=C$zun.radiusA;var C$zu_=C$zun.radiusB;var C$zud=this.m_contacts[C$zur.contactIndex].GetManifold();var C$zua=C$zur.indexA;var C$zuf=C$zur.indexB;var C$zup=C$zur.invMassA;var C$zum=C$zur.invMassB;var C$zuv=C$zur.invIA;var C$zuy=C$zur.invIB;var C$zug=C$zun.localCenterA;C$zun=C$zun.localCenterB;var C$zub=this.m_positions[C$zua].c;var C$zuC=this.m_positions[C$zua].a;var C$zux=this.m_velocities[C$zua].v;var C$zuA=this.m_velocities[C$zua].w;var C$zuS=this.m_positions[C$zuf].c;C$zua=this.m_positions[C$zuf].a;var C$zuT=this.m_velocities[C$zuf].v;var C$zuw=this.m_velocities[C$zuf].w;C$zut.q.SetAngle(C$zuC),C$zue.q.SetAngle(C$zua),C$zuj.SubVV(C$zub,C$zuR.MulRV(C$zut.q,C$zug,C$zuj.s_t0),C$zut.p),C$zuj.SubVV(C$zuS,C$zuR.MulRV(C$zue.q,C$zun,C$zuj.s_t0),C$zue.p),C$zui.Initialize(C$zud,C$zut,C$zuu,C$zue,C$zu_),C$zur.normal.Copy(C$zui.normal),C$zuj.CrossVOne(C$zur.normal,C$zur.tangent);var C$zuE=C$zur.pointCount;for(var C$zuo=0;C$zuo<C$zuE;++C$zuo){var C$zus=C$zur.points[C$zuo];C$zuj.SubVV(C$zui.points[C$zuo],C$zub,C$zus.rA),C$zuj.SubVV(C$zui.points[C$zuo],C$zuS,C$zus.rB);var C$zuc=C$zuj.CrossVV(C$zus.rA,C$zur.normal);var C$zul=C$zuj.CrossVV(C$zus.rB,C$zur.normal);C$zuc=C$zup+C$zum+C$zuv*C$zuc*C$zuc+C$zuy*C$zul*C$zul;C$zus.normalMass=0<C$zuc?1/C$zuc:0;C$zul=C$zur.tangent;C$zuc=C$zuj.CrossVV(C$zus.rA,C$zul);C$zul=C$zuj.CrossVV(C$zus.rB,C$zul);C$zuc=C$zup+C$zum+C$zuv*C$zuc*C$zuc+C$zuy*C$zul*C$zul;C$zus.tangentMass=0<C$zuc?1/C$zuc:0,C$zus.velocityBias=0;C$zul=C$zuj.DotVV(C$zur.normal,C$zuj.SubVV(C$zuj.AddVCrossSV(C$zuT,C$zuw,C$zus.rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zux,C$zuA,C$zus.rA,C$zuj.s_t1),C$zuj.s_t0));C$zul<-1&&(C$zus.velocityBias+=-C$zur.restitution*C$zul)}C$zur.pointCount}},b2ContactSolver.prototype.WarmStart=function(){var C$zut=b2ContactSolver.WarmStart_s_P;for(var C$zue=0;C$zue<this.m_count;++C$zue){var C$zui=this.m_velocityConstraints[C$zue];var C$zur=C$zui.indexA;var C$zun=C$zui.indexB;var C$zua=C$zui.invMassA;var C$zuh=C$zui.invIA;var C$zuu=C$zui.invMassB;var C$zu_=C$zui.invIB;var C$zud=C$zui.pointCount;var C$zuf=this.m_velocities[C$zur].v;var C$zuo=this.m_velocities[C$zur].w;var C$zup=this.m_velocities[C$zun].v;var C$zus=this.m_velocities[C$zun].w;var C$zum=C$zui.normal;var C$zuv=C$zui.tangent;for(var C$zuc=0;C$zuc<C$zud;++C$zuc){var C$zul=C$zui.points[C$zuc];C$zuj.AddVV(C$zuj.MulSV(C$zul.normalImpulse,C$zum,C$zuj.s_t0),C$zuj.MulSV(C$zul.tangentImpulse,C$zuv,C$zuj.s_t1),C$zut),C$zuo-=C$zuh*C$zuj.CrossVV(C$zul.rA,C$zut),C$zuf.SelfMulSub(C$zua,C$zut),C$zus+=C$zu_*C$zuj.CrossVV(C$zul.rB,C$zut),C$zup.SelfMulAdd(C$zuu,C$zut)}this.m_velocities[C$zur].w=C$zuo,this.m_velocities[C$zun].w=C$zus}},b2ContactSolver.prototype.SolveVelocityConstraints=function(){var C$zut=b2ContactSolver.SolveVelocityConstraints_s_dv;var C$zue=b2ContactSolver.SolveVelocityConstraints_s_P;for(var C$zuh=0;C$zuh<this.m_count;++C$zuh){var C$zui=this.m_velocityConstraints[C$zuh];var C$zuu=C$zui.indexA;var C$zu_=C$zui.indexB;var C$zud=C$zui.invMassA;var C$zuf=C$zui.invIA;var C$zup=C$zui.invMassB;var C$zum=C$zui.invIB;var C$zuv=C$zui.pointCount;var C$zur=this.m_velocities[C$zuu].v;var C$zun=this.m_velocities[C$zuu].w;var C$zua=this.m_velocities[C$zu_].v;var C$zuo=this.m_velocities[C$zu_].w;var C$zuy=C$zui.normal;var C$zug=C$zui.tangent;var C$zub=C$zui.friction;for(var C$zus=0;C$zus<C$zuv;++C$zus){var C$zuc=C$zui.points[C$zus];C$zuj.SubVV(C$zuj.AddVCrossSV(C$zua,C$zuo,C$zuc.rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zur,C$zun,C$zuc.rA,C$zuj.s_t1),C$zut);var C$zuC=C$zuj.DotVV(C$zut,C$zug)-C$zui.tangentSpeed;var C$zul=C$zuc.tangentMass*-C$zuC;C$zuC=C$zub*C$zuc.normalImpulse;C$zul=(C$zuA=b2Clamp(C$zuc.tangentImpulse+C$zul,-C$zuC,C$zuC))-C$zuc.tangentImpulse,C$zuc.tangentImpulse=C$zuA,C$zuj.MulSV(C$zul,C$zug,C$zue),C$zur.SelfMulSub(C$zud,C$zue),C$zun-=C$zuf*C$zuj.CrossVV(C$zuc.rA,C$zue),C$zua.SelfMulAdd(C$zup,C$zue),C$zuo+=C$zum*C$zuj.CrossVV(C$zuc.rB,C$zue)}C$zui.pointCount;for(C$zus=0;C$zus<C$zuv;++C$zus){C$zuc=C$zui.points[C$zus];C$zuj.SubVV(C$zuj.AddVCrossSV(C$zua,C$zuo,C$zuc.rB,C$zuj.s_t0),C$zuj.AddVCrossSV(C$zur,C$zun,C$zuc.rA,C$zuj.s_t1),C$zut);var C$zux=C$zuj.DotVV(C$zut,C$zuy);C$zul=-C$zuc.normalMass*(C$zux-C$zuc.velocityBias);var C$zuA;C$zul=(C$zuA=C$zuL(C$zuc.normalImpulse+C$zul,0))-C$zuc.normalImpulse,C$zuc.normalImpulse=C$zuA,C$zuj.MulSV(C$zul,C$zuy,C$zue),C$zur.SelfMulSub(C$zud,C$zue),C$zun-=C$zuf*C$zuj.CrossVV(C$zuc.rA,C$zue),C$zua.SelfMulAdd(C$zup,C$zue),C$zuo+=C$zum*C$zuj.CrossVV(C$zuc.rB,C$zue)}this.m_velocities[C$zuu].w=C$zun,this.m_velocities[C$zu_].w=C$zuo}},b2ContactSolver.prototype.StoreImpulses=function(){for(var C$zut=0;C$zut<this.m_count;++C$zut){var C$zue=this.m_velocityConstraints[C$zut];var C$zui=this.m_contacts[C$zue.contactIndex].GetManifold();for(var C$zur=0;C$zur<C$zue.pointCount;++C$zur)C$zui.points[C$zur].normalImpulse=C$zue.points[C$zur].normalImpulse,C$zui.points[C$zur].tangentImpulse=C$zue.points[C$zur].tangentImpulse}},b2ContactSolver.prototype.SolvePositionConstraints=function(){var C$zut=b2ContactSolver.SolvePositionConstraints_s_xfA;var C$zue=b2ContactSolver.SolvePositionConstraints_s_xfB;var C$zui=b2ContactSolver.SolvePositionConstraints_s_psm;var C$zur=b2ContactSolver.SolvePositionConstraints_s_rA;var C$zun=b2ContactSolver.SolvePositionConstraints_s_rB;var C$zua=b2ContactSolver.SolvePositionConstraints_s_P;var C$zuo=0;for(var C$zuh=0;C$zuh<this.m_count;++C$zuh){var C$zus=this.m_positionConstraints[C$zuh];var C$zuu=C$zus.indexA;var C$zu_=C$zus.indexB;var C$zud=C$zus.localCenterA;var C$zuf=C$zus.invMassA;var C$zup=C$zus.invIA;var C$zum=C$zus.localCenterB;var C$zuv=C$zus.invMassB;var C$zuy=C$zus.invIB;var C$zug=C$zus.pointCount;var C$zub=this.m_positions[C$zuu].c;var C$zuC=this.m_positions[C$zuu].a;var C$zux=this.m_positions[C$zu_].c;var C$zuA=this.m_positions[C$zu_].a;for(var C$zuS=0;C$zuS<C$zug;++C$zuS){C$zut.q.SetAngle(C$zuC),C$zue.q.SetAngle(C$zuA),C$zuj.SubVV(C$zub,C$zuR.MulRV(C$zut.q,C$zud,C$zuj.s_t0),C$zut.p),C$zuj.SubVV(C$zux,C$zuR.MulRV(C$zue.q,C$zum,C$zuj.s_t0),C$zue.p),C$zui.Initialize(C$zus,C$zut,C$zue,C$zuS);var C$zuT=C$zui.normal;var C$zuc=C$zui.point;var C$zul=C$zui.separation;C$zuj.SubVV(C$zuc,C$zub,C$zur),C$zuj.SubVV(C$zuc,C$zux,C$zun),C$zuo=C$zuD(C$zuo,C$zul);C$zuc=b2Clamp(.2*(C$zul+.008),-.2,0);C$zul=C$zuj.CrossVV(C$zur,C$zuT);var C$zuw=C$zuj.CrossVV(C$zun,C$zuT);C$zul=C$zuf+C$zuv+C$zup*C$zul*C$zul+C$zuy*C$zuw*C$zuw;C$zuj.MulSV(0<C$zul?-C$zuc/C$zul:0,C$zuT,C$zua),C$zub.SelfMulSub(C$zuf,C$zua),C$zuC-=C$zup*C$zuj.CrossVV(C$zur,C$zua),C$zux.SelfMulAdd(C$zuv,C$zua),C$zuA+=C$zuy*C$zuj.CrossVV(C$zun,C$zua)}this.m_positions[C$zuu].a=C$zuC,this.m_positions[C$zu_].a=C$zuA}return-.024<C$zuo},b2ContactSolver.prototype.SolveTOIPositionConstraints=function(C$zuh,C$zuu){var C$zut=b2ContactSolver.SolveTOIPositionConstraints_s_xfA;var C$zue=b2ContactSolver.SolveTOIPositionConstraints_s_xfB;var C$zui=b2ContactSolver.SolveTOIPositionConstraints_s_psm;var C$zur=b2ContactSolver.SolveTOIPositionConstraints_s_rA;var C$zu_=b2ContactSolver.SolveTOIPositionConstraints_s_rB;var C$zun=b2ContactSolver.SolveTOIPositionConstraints_s_P;var C$zud=0;for(var C$zuf=0;C$zuf<this.m_count;++C$zuf){var C$zua=this.m_positionConstraints[C$zuf];var C$zuo=C$zua.indexA;var C$zus=C$zua.indexB;var C$zup=C$zua.localCenterA;var C$zum=C$zua.localCenterB;var C$zuv=C$zua.pointCount;var C$zuy=0;var C$zug=0;C$zuo!==C$zuh&&C$zuo!==C$zuu||(C$zuy=C$zua.invMassA,C$zug=C$zua.invIA);var C$zub=0;var C$zuC=0;C$zus!==C$zuh&&C$zus!==C$zuu||(C$zub=C$zua.invMassB,C$zuC=C$zua.invIB);var C$zux=this.m_positions[C$zuo].c;var C$zuA=this.m_positions[C$zuo].a;var C$zuS=this.m_positions[C$zus].c;var C$zuT=this.m_positions[C$zus].a;for(var C$zuw=0;C$zuw<C$zuv;++C$zuw){C$zut.q.SetAngle(C$zuA),C$zue.q.SetAngle(C$zuT),C$zuj.SubVV(C$zux,C$zuR.MulRV(C$zut.q,C$zup,C$zuj.s_t0),C$zut.p),C$zuj.SubVV(C$zuS,C$zuR.MulRV(C$zue.q,C$zum,C$zuj.s_t0),C$zue.p),C$zui.Initialize(C$zua,C$zut,C$zue,C$zuw);var C$zuE=C$zui.normal;var C$zuc=C$zui.point;var C$zul=C$zui.separation;C$zuj.SubVV(C$zuc,C$zux,C$zur),C$zuj.SubVV(C$zuc,C$zuS,C$zu_),C$zud=C$zuD(C$zud,C$zul);C$zuc=b2Clamp(.75*(C$zul+.008),-.2,0);C$zul=C$zuj.CrossVV(C$zur,C$zuE);var C$zuP=C$zuj.CrossVV(C$zu_,C$zuE);C$zul=C$zuy+C$zub+C$zug*C$zul*C$zul+C$zuC*C$zuP*C$zuP;C$zuj.MulSV(0<C$zul?-C$zuc/C$zul:0,C$zuE,C$zun),C$zux.SelfMulSub(C$zuy,C$zun),C$zuA-=C$zug*C$zuj.CrossVV(C$zur,C$zun),C$zuS.SelfMulAdd(C$zub,C$zun),C$zuT+=C$zuC*C$zuj.CrossVV(C$zu_,C$zun)}this.m_positions[C$zuo].a=C$zuA,this.m_positions[C$zus].a=C$zuT}return-.012<=C$zud},b2ContactSolver.InitializeVelocityConstraints_s_xfA=new C$zuI,b2ContactSolver.InitializeVelocityConstraints_s_xfB=new C$zuI,b2ContactSolver.InitializeVelocityConstraints_s_worldManifold=new C$zuct,b2ContactSolver.WarmStart_s_P=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_dv=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_dv1=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_dv2=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_P=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_a=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_b=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_x=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_d=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_P1=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_P2=new C$zuj,b2ContactSolver.SolveVelocityConstraints_s_P1P2=new C$zuj,b2ContactSolver.SolvePositionConstraints_s_xfA=new C$zuI,b2ContactSolver.SolvePositionConstraints_s_xfB=new C$zuI,b2ContactSolver.SolvePositionConstraints_s_psm=new C$zudr,b2ContactSolver.SolvePositionConstraints_s_rA=new C$zuj,b2ContactSolver.SolvePositionConstraints_s_rB=new C$zuj,b2ContactSolver.SolvePositionConstraints_s_P=new C$zuj,b2ContactSolver.SolveTOIPositionConstraints_s_xfA=new C$zuI,b2ContactSolver.SolveTOIPositionConstraints_s_xfB=new C$zuI,b2ContactSolver.SolveTOIPositionConstraints_s_psm=new C$zudr,b2ContactSolver.SolveTOIPositionConstraints_s_rA=new C$zuj,b2ContactSolver.SolveTOIPositionConstraints_s_rB=new C$zuj,b2ContactSolver.SolveTOIPositionConstraints_s_P=new C$zuj;var C$zufr=b2ContactSolver;function b2ContactSolver(){this.m_step=new C$zuar,this.m_allocator=null,this.m_positionConstraints=C$zuur.MakeArray(1024),this.m_velocityConstraints=C$zuhr.MakeArray(1024),this.m_count=0}b2Island.prototype.Initialize=function(C$zut,C$zue,C$zui,C$zur,C$zun){if(this.m_bodyCapacity=C$zut,this.m_contactCapacity=C$zue,this.m_jointCapacity=C$zui,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=C$zur,this.m_listener=C$zun,this.m_positions.length<C$zut){var C$zua=C$zuL(2*this.m_positions.length,C$zut);for(;this.m_positions.length<C$zua;)this.m_positions[this.m_positions.length]=new C$zuor}if(this.m_velocities.length<C$zut){C$zua=C$zuL(2*this.m_velocities.length,C$zut);for(;this.m_velocities.length<C$zua;)this.m_velocities[this.m_velocities.length]=new C$zusr}},b2Island.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},b2Island.prototype.AddBody=function(C$zut){C$zut.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=C$zut},b2Island.prototype.AddContact=function(C$zut){this.m_contacts[this.m_contactCount++]=C$zut},b2Island.prototype.AddJoint=function(C$zut){this.m_joints[this.m_jointCount++]=C$zut},b2Island.prototype.Solve=function(C$zuh,C$zut,C$zuu,C$zu_){var C$zue=b2Island.s_timer.Reset();var C$zui=C$zut.dt;for(var C$zur=0;C$zur<this.m_bodyCount;++C$zur){var C$zun=this.m_bodies[C$zur];this.m_positions[C$zur].c.Copy(C$zun.m_sweep.c);var C$zud=C$zun.m_sweep.a;var C$zua=this.m_velocities[C$zur].v.Copy(C$zun.m_linearVelocity);var C$zuo=C$zun.m_angularVelocity;C$zun.m_sweep.c0.Copy(C$zun.m_sweep.c),C$zun.m_sweep.a0=C$zun.m_sweep.a,C$zun.m_type===C$zuH.b2BodyType.b2_dynamicBody&&(C$zua.x+=C$zui*(C$zun.m_gravityScale*C$zuu.x+C$zun.m_invMass*C$zun.m_force.x),C$zua.y+=C$zui*(C$zun.m_gravityScale*C$zuu.y+C$zun.m_invMass*C$zun.m_force.y),C$zuo+=C$zui*C$zun.m_invI*C$zun.m_torque,C$zua.SelfMul(1/(1+C$zui*C$zun.m_linearDamping)),C$zuo*=1/(1+C$zui*C$zun.m_angularDamping)),this.m_positions[C$zur].a=C$zud,this.m_velocities[C$zur].w=C$zuo}C$zue.Reset();var C$zuf=b2Island.s_solverData;C$zuf.step.Copy(C$zut),C$zuf.positions=this.m_positions,C$zuf.velocities=this.m_velocities;var C$zus=b2Island.s_contactSolverDef;C$zus.step.Copy(C$zut),C$zus.contacts=this.m_contacts,C$zus.count=this.m_contactCount,C$zus.positions=this.m_positions,C$zus.velocities=this.m_velocities,C$zus.allocator=this.m_allocator;var C$zup=b2Island.s_contactSolver.Initialize(C$zus);C$zup.InitializeVelocityConstraints(),C$zut.warmStarting&&C$zup.WarmStart();for(C$zur=0;C$zur<this.m_jointCount;++C$zur)this.m_joints[C$zur].InitVelocityConstraints(C$zuf);C$zuh.solveInit=C$zue.GetMilliseconds(),C$zue.Reset();for(C$zur=0;C$zur<C$zut.velocityIterations;++C$zur){for(var C$zuc=0;C$zuc<this.m_jointCount;++C$zuc)this.m_joints[C$zuc].SolveVelocityConstraints(C$zuf);C$zup.SolveVelocityConstraints()}C$zup.StoreImpulses(),C$zuh.solveVelocity=C$zue.GetMilliseconds();for(C$zur=0;C$zur<this.m_bodyCount;++C$zur){var C$zum=this.m_positions[C$zur].c;C$zud=this.m_positions[C$zur].a;C$zua=this.m_velocities[C$zur].v;C$zuo=this.m_velocities[C$zur].w;var C$zul=C$zuj.MulSV(C$zui,C$zua,b2Island.s_translation);4<C$zuj.DotVV(C$zul,C$zul)&&(C$zuv=2/C$zul.Length(),C$zua.SelfMul(C$zuv));C$zul=C$zui*C$zuo;var C$zuv;C$zuT<C$zul*C$zul&&(C$zuo*=C$zuv=C$zuS/C$zuM(C$zul)),C$zum.x+=C$zui*C$zua.x,C$zum.y+=C$zui*C$zua.y,C$zud+=C$zui*C$zuo,this.m_positions[C$zur].a=C$zud,this.m_velocities[C$zur].w=C$zuo}C$zue.Reset();var C$zuy=!1;for(C$zur=0;C$zur<C$zut.positionIterations;++C$zur){var C$zug=C$zup.SolvePositionConstraints();var C$zub=!0;for(C$zuc=0;C$zuc<this.m_jointCount;++C$zuc){var C$zuC=this.m_joints[C$zuc].SolvePositionConstraints(C$zuf);C$zub=C$zub&&C$zuC}if(C$zug&&C$zub){C$zuy=!0;break}}for(C$zur=0;C$zur<this.m_bodyCount;++C$zur){var C$zux=this.m_bodies[C$zur];C$zux.m_sweep.c.Copy(this.m_positions[C$zur].c),C$zux.m_sweep.a=this.m_positions[C$zur].a,C$zux.m_linearVelocity.Copy(this.m_velocities[C$zur].v),C$zux.m_angularVelocity=this.m_velocities[C$zur].w,C$zux.SynchronizeTransform()}if(C$zuh.solvePosition=C$zue.GetMilliseconds(),this.Report(C$zup.m_velocityConstraints),C$zu_){var C$zuA=C$zuB;for(C$zur=0;C$zur<this.m_bodyCount;++C$zur)(C$zun=this.m_bodies[C$zur]).GetType()!==C$zuH.b2BodyType.b2_staticBody&&(C$zuA=!C$zun.m_autoSleepFlag||.0012184696791469947<C$zun.m_angularVelocity*C$zun.m_angularVelocity||1e-4<C$zuj.DotVV(C$zun.m_linearVelocity,C$zun.m_linearVelocity)?C$zun.m_sleepTime=0:(C$zun.m_sleepTime+=C$zui,C$zuD(C$zuA,C$zun.m_sleepTime)));if(.5<=C$zuA&&C$zuy)for(C$zur=0;C$zur<this.m_bodyCount;++C$zur)(C$zun=this.m_bodies[C$zur]).SetAwake(!1)}},b2Island.prototype.SolveTOI=function(C$zut,C$zue,C$zui){for(var C$zur=0;C$zur<this.m_bodyCount;++C$zur){var C$zun=this.m_bodies[C$zur];this.m_positions[C$zur].c.Copy(C$zun.m_sweep.c),this.m_positions[C$zur].a=C$zun.m_sweep.a,this.m_velocities[C$zur].v.Copy(C$zun.m_linearVelocity),this.m_velocities[C$zur].w=C$zun.m_angularVelocity}var C$zua=b2Island.s_contactSolverDef;C$zua.contacts=this.m_contacts,C$zua.count=this.m_contactCount,C$zua.allocator=this.m_allocator,C$zua.step.Copy(C$zut),C$zua.positions=this.m_positions,C$zua.velocities=this.m_velocities;var C$zuo=b2Island.s_contactSolver.Initialize(C$zua);for(C$zur=0;C$zur<C$zut.positionIterations;++C$zur)if(C$zuo.SolveTOIPositionConstraints(C$zue,C$zui))break;this.m_bodies[C$zue].m_sweep.c0.Copy(this.m_positions[C$zue].c),this.m_bodies[C$zue].m_sweep.a0=this.m_positions[C$zue].a,this.m_bodies[C$zui].m_sweep.c0.Copy(this.m_positions[C$zui].c),this.m_bodies[C$zui].m_sweep.a0=this.m_positions[C$zui].a,C$zuo.InitializeVelocityConstraints();for(C$zur=0;C$zur<C$zut.velocityIterations;++C$zur)C$zuo.SolveVelocityConstraints();var C$zus=C$zut.dt;for(C$zur=0;C$zur<this.m_bodyCount;++C$zur){var C$zuh=this.m_positions[C$zur].c;var C$zuu=this.m_positions[C$zur].a;var C$zu_=this.m_velocities[C$zur].v;var C$zuc=this.m_velocities[C$zur].w;var C$zul=C$zuj.MulSV(C$zus,C$zu_,b2Island.s_translation);4<C$zuj.DotVV(C$zul,C$zul)&&(C$zud=2/C$zul.Length(),C$zu_.SelfMul(C$zud));C$zul=C$zus*C$zuc;var C$zud;C$zuT<C$zul*C$zul&&(C$zuc*=C$zud=C$zuS/C$zuM(C$zul)),C$zuh.SelfMulAdd(C$zus,C$zu_),C$zuu+=C$zus*C$zuc,this.m_positions[C$zur].a=C$zuu,this.m_velocities[C$zur].w=C$zuc;C$zul=this.m_bodies[C$zur];C$zul.m_sweep.c.Copy(C$zuh),C$zul.m_sweep.a=C$zuu,C$zul.m_linearVelocity.Copy(C$zu_),C$zul.m_angularVelocity=C$zuc,C$zul.SynchronizeTransform()}this.Report(C$zuo.m_velocityConstraints)},b2Island.prototype.Report=function(C$zut){if(null!==this.m_listener)for(var C$zue=0;C$zue<this.m_contactCount;++C$zue){var C$zui=this.m_contacts[C$zue];if(C$zui){var C$zur=C$zut[C$zue];var C$zun=b2Island.s_impulse;C$zun.count=C$zur.pointCount;for(var C$zua=0;C$zua<C$zur.pointCount;++C$zua)C$zun.normalImpulses[C$zua]=C$zur.points[C$zua].normalImpulse,C$zun.tangentImpulses[C$zua]=C$zur.points[C$zua].tangentImpulse;this.m_listener.PostSolve(C$zui,C$zun)}}},b2Island.s_timer=new C$zub,b2Island.s_solverData=new C$zucr,b2Island.s_contactSolverDef=new C$zu_r,b2Island.s_contactSolver=new C$zufr,b2Island.s_translation=new C$zuj,b2Island.s_impulse=new C$zuKi;var C$zupr=b2Island;function b2Island(){this.m_allocator=null,this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=C$zuor.MakeArray(1024),this.m_velocities=C$zusr.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}(C$zuRr=C$zuH.b2ParticleFlag||(C$zuH.b2ParticleFlag={}))[C$zuRr.b2_waterParticle=0]="b2_waterParticle",C$zuRr[C$zuRr.b2_zombieParticle=2]="b2_zombieParticle",C$zuRr[C$zuRr.b2_wallParticle=4]="b2_wallParticle",C$zuRr[C$zuRr.b2_springParticle=8]="b2_springParticle",C$zuRr[C$zuRr.b2_elasticParticle=16]="b2_elasticParticle",C$zuRr[C$zuRr.b2_viscousParticle=32]="b2_viscousParticle",C$zuRr[C$zuRr.b2_powderParticle=64]="b2_powderParticle",C$zuRr[C$zuRr.b2_tensileParticle=128]="b2_tensileParticle",C$zuRr[C$zuRr.b2_colorMixingParticle=256]="b2_colorMixingParticle",C$zuRr[C$zuRr.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",C$zuRr[C$zuRr.b2_barrierParticle=1024]="b2_barrierParticle",C$zuRr[C$zuRr.b2_staticPressureParticle=2048]="b2_staticPressureParticle",C$zuRr[C$zuRr.b2_reactiveParticle=4096]="b2_reactiveParticle",C$zuRr[C$zuRr.b2_repulsiveParticle=8192]="b2_repulsiveParticle",C$zuRr[C$zuRr.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",C$zuRr[C$zuRr.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",C$zuRr[C$zuRr.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",C$zuRr[C$zuRr.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle";var C$zumr=function(){this.flags=0,this.position=new C$zuj,this.velocity=new C$zuj,this.color=new C$zud(0,0,0,0),this.lifetime=0,this.userData=null,this.group=null};function b2CalculateParticleIterations(C$zut,C$zue,C$zui){return b2Clamp(Math.ceil(Math.sqrt(C$zut/(.01*C$zue))*C$zui),1,8)}b2ParticleHandle.prototype.GetIndex=function(){return this.m_index},b2ParticleHandle.prototype.SetIndex=function(C$zut){this.m_index=C$zut};var C$zuvr=b2ParticleHandle;function b2ParticleHandle(){this.m_index=-1}(C$zuRr=C$zuH.b2ParticleGroupFlag||(C$zuH.b2ParticleGroupFlag={}))[C$zuRr.b2_solidParticleGroup=1]="b2_solidParticleGroup",C$zuRr[C$zuRr.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",C$zuRr[C$zuRr.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",C$zuRr[C$zuRr.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",C$zuRr[C$zuRr.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",C$zuRr[C$zuRr.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask";var C$zuyr=function(){this.flags=0,this.groupFlags=0,this.position=new C$zuj,this.angle=0,this.linearVelocity=new C$zuj,this.angularVelocity=0,this.color=new C$zud,this.strength=1,this.shapeCount=0,this.stride=0,this.particleCount=0,this.lifetime=0,this.userData=null,this.group=null};b2ParticleGroup.prototype.GetNext=function(){return this.m_next},b2ParticleGroup.prototype.GetParticleSystem=function(){return this.m_system},b2ParticleGroup.prototype.GetParticleCount=function(){return this.m_lastIndex-this.m_firstIndex},b2ParticleGroup.prototype.GetBufferIndex=function(){return this.m_firstIndex},b2ParticleGroup.prototype.ContainsParticle=function(C$zut){return this.m_firstIndex<=C$zut&&C$zut<this.m_lastIndex},b2ParticleGroup.prototype.GetAllParticleFlags=function(){if(!this.m_system.m_flagsBuffer.data)throw new Error;var C$zut=0;for(var C$zue=this.m_firstIndex;C$zue<this.m_lastIndex;C$zue++)C$zut|=this.m_system.m_flagsBuffer.data[C$zue];return C$zut},b2ParticleGroup.prototype.GetGroupFlags=function(){return this.m_groupFlags},b2ParticleGroup.prototype.SetGroupFlags=function(C$zut){C$zut|=this.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,C$zut)},b2ParticleGroup.prototype.GetMass=function(){return this.UpdateStatistics(),this.m_mass},b2ParticleGroup.prototype.GetInertia=function(){return this.UpdateStatistics(),this.m_inertia},b2ParticleGroup.prototype.GetCenter=function(){return this.UpdateStatistics(),this.m_center},b2ParticleGroup.prototype.GetLinearVelocity=function(){return this.UpdateStatistics(),this.m_linearVelocity},b2ParticleGroup.prototype.GetAngularVelocity=function(){return this.UpdateStatistics(),this.m_angularVelocity},b2ParticleGroup.prototype.GetTransform=function(){return this.m_transform},b2ParticleGroup.prototype.GetPosition=function(){return this.m_transform.p},b2ParticleGroup.prototype.GetAngle=function(){return this.m_transform.q.GetAngle()},b2ParticleGroup.prototype.GetLinearVelocityFromWorldPoint=function(C$zut,C$zue){var C$zui=b2ParticleGroup.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),C$zuj.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$zuj.SubVV(C$zut,this.m_center,C$zui),C$zue)},b2ParticleGroup.prototype.GetUserData=function(){return this.m_userData},b2ParticleGroup.prototype.SetUserData=function(C$zut){this.m_userData=C$zut},b2ParticleGroup.prototype.ApplyForce=function(C$zut){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,C$zut)},b2ParticleGroup.prototype.ApplyLinearImpulse=function(C$zut){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,C$zut)},b2ParticleGroup.prototype.DestroyParticles=function(C$zut){if(this.m_system.m_world.IsLocked())throw new Error;for(var C$zue=this.m_firstIndex;C$zue<this.m_lastIndex;C$zue++)this.m_system.DestroyParticle(C$zue,C$zut)},b2ParticleGroup.prototype.UpdateStatistics=function(){if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;var C$zut=new C$zuj;var C$zue=new C$zuj;if(this.m_timestamp!==this.m_system.m_timestamp){var C$zui=this.m_system.GetParticleMass();this.m_mass=C$zui*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(var C$zur=this.m_firstIndex;C$zur<this.m_lastIndex;C$zur++)this.m_center.SelfMulAdd(C$zui,this.m_system.m_positionBuffer.data[C$zur]),this.m_linearVelocity.SelfMulAdd(C$zui,this.m_system.m_velocityBuffer.data[C$zur]);var C$zun;0<this.m_mass&&(C$zun=1/this.m_mass,this.m_center.SelfMul(C$zun),this.m_linearVelocity.SelfMul(C$zun)),this.m_inertia=0,this.m_angularVelocity=0;for(C$zur=this.m_firstIndex;C$zur<this.m_lastIndex;C$zur++)C$zuj.SubVV(this.m_system.m_positionBuffer.data[C$zur],this.m_center,C$zut),C$zuj.SubVV(this.m_system.m_velocityBuffer.data[C$zur],this.m_linearVelocity,C$zue),this.m_inertia+=C$zui*C$zuj.DotVV(C$zut,C$zut),this.m_angularVelocity+=C$zui*C$zuj.CrossVV(C$zut,C$zue);0<this.m_inertia&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}},b2ParticleGroup.GetLinearVelocityFromWorldPoint_s_t0=new C$zuj;var C$zugr=b2ParticleGroup;function b2ParticleGroup(C$zut){this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new C$zuj,this.m_linearVelocity=new C$zuj,this.m_angularVelocity=0,this.m_transform=new C$zuI,this.m_userData=null,this.m_system=C$zut}b2StackQueue.prototype.Push=function(C$zut){if(this.m_back>=this.m_capacity){for(var C$zue=this.m_front;C$zue<this.m_back;C$zue++)this.m_buffer[C$zue-this.m_front]=this.m_buffer[C$zue];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(0<this.m_capacity?(this.m_buffer.concat(b2MakeArray(this.m_capacity,function(C$zut){return null})),this.m_capacity*=2):(this.m_buffer.concat(b2MakeArray(1,function(C$zut){return null})),this.m_capacity=1))}this.m_buffer[this.m_back]=C$zut,this.m_back++},b2StackQueue.prototype.Pop=function(){this.m_buffer[this.m_front]=null,this.m_front++},b2StackQueue.prototype.Empty=function(){return this.m_front===this.m_back},b2StackQueue.prototype.Front=function(){var C$zut=this.m_buffer[this.m_front];if(!C$zut)throw new Error;return C$zut};var C$zubr=b2StackQueue;function b2StackQueue(C$zut){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=b2MakeArray(C$zut,function(C$zut){return null}),this.m_capacity=C$zut}b2VoronoiDiagram.prototype.AddGenerator=function(C$zut,C$zue,C$zui){var C$zur=this.m_generatorBuffer[this.m_generatorCount++];C$zur.center.Copy(C$zut),C$zur.tag=C$zue,C$zur.necessary=C$zui},b2VoronoiDiagram.prototype.Generate=function(C$zuh,C$zuu){var C$zu_=1/C$zuh;var C$zut=new C$zuj(+C$zuB,+C$zuB);var C$zud=new C$zuj(-C$zuB,-C$zuB);var C$zuf=0;for(var C$zue=0;C$zue<this.m_generatorCount;C$zue++)(C$zuo=this.m_generatorBuffer[C$zue]).necessary&&(C$zuj.MinV(C$zut,C$zuo.center,C$zut),C$zuj.MaxV(C$zud,C$zuo.center,C$zud),++C$zuf);if(0===C$zuf)return this.m_countX=0,void(this.m_countY=0);C$zut.x-=C$zuu,C$zut.y-=C$zuu,C$zud.x+=C$zuu,C$zud.y+=C$zuu,this.m_countX=1+Math.floor(C$zu_*(C$zud.x-C$zut.x)),this.m_countY=1+Math.floor(C$zu_*(C$zud.y-C$zut.y)),this.m_diagram=[];var C$zui=new C$zubr(4*this.m_countX*this.m_countY);for(C$zue=0;C$zue<this.m_generatorCount;C$zue++){(C$zuo=this.m_generatorBuffer[C$zue]).center.SelfSub(C$zut).SelfMul(C$zu_);var C$zur=Math.floor(C$zuo.center.x);var C$zun=Math.floor(C$zuo.center.y);0<=C$zur&&0<=C$zun&&C$zur<this.m_countX&&C$zun<this.m_countY&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun,C$zur+C$zun*this.m_countX,C$zuo))}for(;!C$zui.Empty();){C$zur=(C$zus=C$zui.Front()).m_x;C$zun=C$zus.m_y;var C$zua=C$zus.m_i;var C$zuo=C$zus.m_generator;C$zui.Pop(),this.m_diagram[C$zua]||(this.m_diagram[C$zua]=C$zuo,0<C$zur&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur-1,C$zun,C$zua-1,C$zuo)),0<C$zun&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun-1,C$zua-this.m_countX,C$zuo)),C$zur<this.m_countX-1&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur+1,C$zun,C$zua+1,C$zuo)),C$zun<this.m_countY-1&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun+1,C$zua+this.m_countX,C$zuo)))}for(C$zun=0;C$zun<this.m_countY;C$zun++)for(C$zur=0;C$zur<this.m_countX-1;C$zur++){C$zua=C$zur+C$zun*this.m_countX;(C$zuc=this.m_diagram[C$zua])!==(C$zul=this.m_diagram[C$zua+1])&&(C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun,C$zua,C$zul)),C$zui.Push(new b2VoronoiDiagram.Task(C$zur+1,C$zun,C$zua+1,C$zuc)))}for(C$zun=0;C$zun<this.m_countY-1;C$zun++)for(C$zur=0;C$zur<this.m_countX;C$zur++){C$zua=C$zur+C$zun*this.m_countX;(C$zuc=this.m_diagram[C$zua])!==(C$zul=this.m_diagram[C$zua+this.m_countX])&&(C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun,C$zua,C$zul)),C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun+1,C$zua+this.m_countX,C$zuc)))}for(;!C$zui.Empty();){var C$zus;C$zur=(C$zus=C$zui.Front()).m_x;C$zun=C$zus.m_y;C$zua=C$zus.m_i;C$zue=C$zus.m_generator;var C$zuc;var C$zul;var C$zup,C$zum,C$zuv;C$zui.Pop(),(C$zuc=this.m_diagram[C$zua])!==(C$zul=C$zue)&&(C$zup=C$zuc.center.x-C$zur,C$zum=C$zuc.center.y-C$zun,(C$zuv=C$zul.center.x-C$zur)*C$zuv+(C$zuv=C$zul.center.y-C$zun)*C$zuv<C$zup*C$zup+C$zum*C$zum&&(this.m_diagram[C$zua]=C$zul,0<C$zur&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur-1,C$zun,C$zua-1,C$zul)),0<C$zun&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun-1,C$zua-this.m_countX,C$zul)),C$zur<this.m_countX-1&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur+1,C$zun,C$zua+1,C$zul)),C$zun<this.m_countY-1&&C$zui.Push(new b2VoronoiDiagram.Task(C$zur,C$zun+1,C$zua+this.m_countX,C$zul))))}},b2VoronoiDiagram.prototype.GetNodes=function(C$zut){for(var C$zue=0;C$zue<this.m_countY-1;C$zue++)for(var C$zui=0;C$zui<this.m_countX-1;C$zui++){var C$zur=C$zui+C$zue*this.m_countX;var C$zun=this.m_diagram[C$zur];var C$zua=this.m_diagram[C$zur+1];var C$zuo=this.m_diagram[C$zur+this.m_countX];C$zur=this.m_diagram[C$zur+1+this.m_countX];C$zua!==C$zuo&&(C$zun!==C$zua&&C$zun!==C$zuo&&(C$zun.necessary||C$zua.necessary||C$zuo.necessary)&&C$zut(C$zun.tag,C$zua.tag,C$zuo.tag),C$zur!==C$zua&&C$zur!==C$zuo&&(C$zun.necessary||C$zua.necessary||C$zuo.necessary)&&C$zut(C$zua.tag,C$zur.tag,C$zuo.tag))}};var C$zuCr=b2VoronoiDiagram;function b2VoronoiDiagram(C$zut){this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=[],this.m_generatorBuffer=b2MakeArray(C$zut,function(C$zut){return new b2VoronoiDiagram.Generator}),this.m_generatorCapacity=C$zut}function std_iter_swap(C$zut,C$zue,C$zui){var C$zur=C$zut[C$zue];C$zut[C$zue]=C$zut[C$zui],C$zut[C$zui]=C$zur}function default_compare(C$zut,C$zue){return C$zut<C$zue}function std_sort(C$zut,C$zue,C$zui,C$zur){void 0===C$zue&&(C$zue=0),void 0===C$zui&&(C$zui=C$zut.length-C$zue),void 0===C$zur&&(C$zur=default_compare);var C$zun=C$zue;var C$zua=[];var C$zuo=0;for(;;){for(;C$zun+1<C$zui;C$zui++){var C$zus=C$zut[C$zun+Math.floor(Math.random()*(C$zui-C$zun))];C$zua[C$zuo++]=C$zui;for(var C$zuc=C$zun-1;;){for(;C$zur(C$zut[++C$zuc],C$zus););for(;C$zur(C$zus,C$zut[--C$zui]););if(C$zui<=C$zuc)break;std_iter_swap(C$zut,C$zuc,C$zui)}}if(0===C$zuo)break;C$zun=C$zui,C$zui=C$zua[--C$zuo]}return C$zut}function std_stable_sort(C$zut,C$zue,C$zui,C$zur){return std_sort(C$zut,C$zue=void 0===C$zue?0:C$zue,C$zui=void 0===C$zui?C$zut.length-C$zue:C$zui,C$zur=void 0===C$zur?default_compare:C$zur)}function std_remove_if(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=C$zut.length);var C$zur=0;for(var C$zun=0;C$zun<C$zui;++C$zun)C$zue(C$zut[C$zun])||(C$zun!==C$zur?std_iter_swap(C$zut,C$zur++,C$zun):++C$zur);return C$zur}function std_lower_bound(C$zut,C$zue,C$zui,C$zur,C$zun){void 0===C$zun&&(C$zun=default_compare);var C$zua=C$zui-C$zue;for(;0<C$zua;){var C$zuo=Math.floor(C$zua/2);var C$zus=C$zue+C$zuo;C$zun(C$zut[C$zus],C$zur)?(C$zue=++C$zus,C$zua-=C$zuo+1):C$zua=C$zuo}return C$zue}function std_upper_bound(C$zut,C$zue,C$zui,C$zur,C$zun){void 0===C$zun&&(C$zun=default_compare);var C$zua=C$zui-C$zue;for(;0<C$zua;){var C$zuo=Math.floor(C$zua/2);var C$zus=C$zue+C$zuo;C$zun(C$zur,C$zut[C$zus])?C$zua=C$zuo:(C$zue=++C$zus,C$zua-=C$zuo+1)}return C$zue}function std_rotate(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zui;for(;C$zue!==C$zun;)std_iter_swap(C$zut,C$zue++,C$zun++),C$zun===C$zur?C$zun=C$zui:C$zue===C$zui&&(C$zui=C$zun)}(C$zuRr=C$zuCr=b2VoronoiDiagram||{}).Generator=function(){this.center=new C$zuj,this.tag=0,this.necessary=!1},C$zuRr.Task=function(C$zut,C$zue,C$zui,C$zur){this.m_x=C$zut,this.m_y=C$zue,this.m_i=C$zui,this.m_generator=C$zur};b2GrowableBuffer.prototype.Append=function(){return this.count>=this.capacity&&this.Grow(),this.count++},b2GrowableBuffer.prototype.Reserve=function(C$zut){if(!(this.capacity>=C$zut)){for(var C$zue=this.capacity;C$zue<C$zut;++C$zue)this.data[C$zue]=this.allocator();this.capacity=C$zut}},b2GrowableBuffer.prototype.Grow=function(){var C$zut=this.capacity?2*this.capacity:256;this.Reserve(C$zut)},b2GrowableBuffer.prototype.Free=function(){0!==this.data.length&&(this.data=[],this.capacity=0,this.count=0)},b2GrowableBuffer.prototype.Shorten=function(C$zut){},b2GrowableBuffer.prototype.Data=function(){return this.data},b2GrowableBuffer.prototype.GetCount=function(){return this.count},b2GrowableBuffer.prototype.SetCount=function(C$zut){this.count=C$zut},b2GrowableBuffer.prototype.GetCapacity=function(){return this.capacity},b2GrowableBuffer.prototype.RemoveIf=function(C$zut){this.count=std_remove_if(this.data,C$zut,this.count)},b2GrowableBuffer.prototype.Unique=function(C$zut){this.count=function(C$zut,C$zue,C$zui,C$zur){if(C$zue===C$zui)return C$zui;var C$zun=C$zue;for(;++C$zue!==C$zui;)C$zur(C$zut[C$zun],C$zut[C$zue])||std_iter_swap(C$zut,++C$zun,C$zue);return++C$zun}(this.data,0,this.count,C$zut)};var C$zuxr=b2GrowableBuffer;function b2GrowableBuffer(C$zut){this.data=[],this.count=0,this.capacity=0,this.allocator=C$zut}__extends(b2FixtureParticleQueryCallback,C$zuSr=C$zuer),b2FixtureParticleQueryCallback.prototype.ShouldQueryParticleSystem=function(C$zut){return!1},b2FixtureParticleQueryCallback.prototype.ReportFixture=function(C$zut){if(C$zut.IsSensor())return!0;var C$zue=C$zut.GetShape().GetChildCount();for(var C$zui=0;C$zui<C$zue;C$zui++){var C$zur=C$zut.GetAABB(C$zui);var C$zun=this.m_system.GetInsideBoundsEnumerator(C$zur);var C$zua;for(;0<=(C$zua=C$zun.GetNext());)this.ReportFixtureAndParticle(C$zut,C$zui,C$zua)}return!0},b2FixtureParticleQueryCallback.prototype.ReportParticle=function(C$zut,C$zue){return!1},b2FixtureParticleQueryCallback.prototype.ReportFixtureAndParticle=function(C$zut,C$zue,C$zui){};var C$zuAr=b2FixtureParticleQueryCallback;function b2FixtureParticleQueryCallback(C$zut){var C$zue=C$zuSr.call(this)||this;return C$zue.m_system=C$zut,C$zue}var C$zuSr;b2ParticleContact.prototype.SetIndices=function(C$zut,C$zue){this.indexA=C$zut,this.indexB=C$zue},b2ParticleContact.prototype.SetWeight=function(C$zut){this.weight=C$zut},b2ParticleContact.prototype.SetNormal=function(C$zut){this.normal.Copy(C$zut)},b2ParticleContact.prototype.SetFlags=function(C$zut){this.flags=C$zut},b2ParticleContact.prototype.GetIndexA=function(){return this.indexA},b2ParticleContact.prototype.GetIndexB=function(){return this.indexB},b2ParticleContact.prototype.GetWeight=function(){return this.weight},b2ParticleContact.prototype.GetNormal=function(){return this.normal},b2ParticleContact.prototype.GetFlags=function(){return this.flags},b2ParticleContact.prototype.IsEqual=function(C$zut){return this.indexA===C$zut.indexA&&this.indexB===C$zut.indexB&&this.flags===C$zut.flags&&this.weight===C$zut.weight&&this.normal.x===C$zut.normal.x&&this.normal.y===C$zut.normal.y},b2ParticleContact.prototype.IsNotEqual=function(C$zut){return!this.IsEqual(C$zut)},b2ParticleContact.prototype.ApproximatelyEqual=function(C$zut){return this.indexA===C$zut.indexA&&this.indexB===C$zut.indexB&&this.flags===C$zut.flags&&C$zuM(this.weight-C$zut.weight)<.01&&C$zuj.DistanceSquaredVV(this.normal,C$zut.normal)<1e-4};var C$zuTr=b2ParticleContact;function b2ParticleContact(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new C$zuj,this.flags=0}var C$zuwr=function(){this.index=0,this.weight=0,this.normal=new C$zuj,this.mass=0};var C$zuEr=function(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0};var C$zuPr=function(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new C$zuj(0,0),this.pb=new C$zuj(0,0),this.pc=new C$zuj(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0};b2ParticleSystemDef.prototype.Copy=function(C$zut){return this.strictContactCheck=C$zut.strictContactCheck,this.density=C$zut.density,this.gravityScale=C$zut.gravityScale,this.radius=C$zut.radius,this.maxCount=C$zut.maxCount,this.pressureStrength=C$zut.pressureStrength,this.dampingStrength=C$zut.dampingStrength,this.elasticStrength=C$zut.elasticStrength,this.springStrength=C$zut.springStrength,this.viscousStrength=C$zut.viscousStrength,this.surfaceTensionPressureStrength=C$zut.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=C$zut.surfaceTensionNormalStrength,this.repulsiveStrength=C$zut.repulsiveStrength,this.powderStrength=C$zut.powderStrength,this.ejectionStrength=C$zut.ejectionStrength,this.staticPressureStrength=C$zut.staticPressureStrength,this.staticPressureRelaxation=C$zut.staticPressureRelaxation,this.staticPressureIterations=C$zut.staticPressureIterations,this.colorMixingStrength=C$zut.colorMixingStrength,this.destroyByAge=C$zut.destroyByAge,this.lifetimeGranularity=C$zut.lifetimeGranularity,this},b2ParticleSystemDef.prototype.Clone=function(){return(new b2ParticleSystemDef).Copy(this)};var C$zuMr=b2ParticleSystemDef;function b2ParticleSystemDef(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}function b2ParticleSystem(C$zut,C$zue){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_flagsBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_positionBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_velocityBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_groupBuffer=[],this.m_userDataBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_bodyContactCountBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_consecutiveContactStepsBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_stuckParticleBuffer=new C$zuxr(function(){return 0}),this.m_proxyBuffer=new C$zuxr(function(){return new b2ParticleSystem.Proxy}),this.m_contactBuffer=new C$zuxr(function(){return new C$zuTr}),this.m_bodyContactBuffer=new C$zuxr(function(){return new C$zuwr}),this.m_pairBuffer=new C$zuxr(function(){return new C$zuEr}),this.m_triadBuffer=new C$zuxr(function(){return new C$zuPr}),this.m_expirationTimeBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_indexByExpirationTimeBuffer=new b2ParticleSystem.UserOverridableBuffer,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new C$zuMr,this.m_prev=null,this.m_next=null,this.SetStrictContactCheck(C$zut.strictContactCheck),this.SetDensity(C$zut.density),this.SetGravityScale(C$zut.gravityScale),this.SetRadius(C$zut.radius),this.SetMaxParticleCount(C$zut.maxCount),this.m_def=C$zut.Clone(),this.m_world=C$zue,this.SetDestructionByAge(this.m_def.destroyByAge)}C$zuH.b2ParticleSystem=(b2ParticleSystem.computeTag=function(C$zut,C$zue){return(C$zue+b2ParticleSystem.yOffset>>>0<<b2ParticleSystem.yShift)+(b2ParticleSystem.xScale*C$zut+b2ParticleSystem.xOffset>>>0)>>>0},b2ParticleSystem.computeRelativeTag=function(C$zut,C$zue,C$zui){return C$zut+(C$zui<<b2ParticleSystem.yShift)+(C$zue<<b2ParticleSystem.xShift)>>>0},b2ParticleSystem.prototype.Drop=function(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)},b2ParticleSystem.prototype.CreateParticle=function(C$zut){if(this.m_world.IsLocked())throw new Error;if(this.m_count>=this.m_internalAllocatedCapacity&&(C$zue=this.m_count?2*this.m_count:256,this.ReallocateInternalAllocatedBuffers(C$zue)),this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return-1;this.DestroyOldestParticle(0,!1),this.SolveZombie()}var C$zue=this.m_count++;if(!this.m_flagsBuffer.data)throw new Error;if(this.m_flagsBuffer.data[C$zue]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$zue]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$zue]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$zue]=0),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;this.m_positionBuffer.data[C$zue]=(this.m_positionBuffer.data[C$zue]||new C$zuj).Copy(b2Maybe(C$zut.position,C$zuj.ZERO)),this.m_velocityBuffer.data[C$zue]=(this.m_velocityBuffer.data[C$zue]||new C$zuj).Copy(b2Maybe(C$zut.velocity,C$zuj.ZERO)),this.m_weightBuffer[C$zue]=0,this.m_forceBuffer[C$zue]=(this.m_forceBuffer[C$zue]||new C$zuj).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$zue]=0),this.m_depthBuffer&&(this.m_depthBuffer[C$zue]=0);var C$zui=(new C$zud).Copy(b2Maybe(C$zut.color,C$zud.ZERO));!this.m_colorBuffer.data&&C$zui.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[C$zue]=(this.m_colorBuffer.data[C$zue]||new C$zud).Copy(C$zui)),(this.m_userDataBuffer.data||C$zut.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[C$zue]=C$zut.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[C$zue]=null);C$zui=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()];var C$zur=b2Maybe(C$zut.lifetime,0);var C$zun=0<C$zur;if(this.m_expirationTimeBuffer.data||C$zun){if(this.SetParticleLifetime(C$zue,C$zun?C$zur:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_indexByExpirationTimeBuffer.data[C$zue]=C$zue}C$zui.index=C$zue;C$zun=b2Maybe(C$zut.group,null);return(this.m_groupBuffer[C$zue]=C$zun)&&(C$zun.m_firstIndex<C$zun.m_lastIndex?this.RotateBuffer(C$zun.m_firstIndex,C$zun.m_lastIndex,C$zue):C$zun.m_firstIndex=C$zue,C$zun.m_lastIndex=1+C$zue),this.SetParticleFlags(C$zue,b2Maybe(C$zut.flags,0)),C$zue},b2ParticleSystem.prototype.GetParticleHandleFromIndex=function(C$zut){this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);var C$zue=this.m_handleIndexBuffer.data[C$zut];return C$zue||((C$zue=new C$zuvr).SetIndex(C$zut),this.m_handleIndexBuffer.data[C$zut]=C$zue)},b2ParticleSystem.prototype.DestroyParticle=function(C$zut,C$zue){if(void 0===C$zue&&(C$zue=!1),!this.m_flagsBuffer.data)throw new Error;var C$zui=C$zuH.b2ParticleFlag.b2_zombieParticle;C$zue&&(C$zui|=C$zuH.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(C$zut,this.m_flagsBuffer.data[C$zut]|C$zui)},b2ParticleSystem.prototype.DestroyOldestParticle=function(C$zut,C$zue){void 0===C$zue&&(C$zue=!1);var C$zui=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;if(!this.m_expirationTimeBuffer.data)throw new Error;C$zui=this.m_indexByExpirationTimeBuffer.data[C$zui-(C$zut+1)];C$zut=this.m_indexByExpirationTimeBuffer.data[C$zut];this.DestroyParticle(0<this.m_expirationTimeBuffer.data[C$zui]?C$zui:C$zut,C$zue)},b2ParticleSystem.prototype.DestroyParticlesInShape=function(C$zut,C$zue,C$zui){void 0===C$zui&&(C$zui=!1);var C$zur=b2ParticleSystem.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked())throw new Error;C$zui=new b2ParticleSystem.DestroyParticlesInShapeCallback(this,C$zut,C$zue,C$zui);return C$zut.ComputeAABB(C$zur,C$zue,0),this.m_world.QueryAABB(C$zui,C$zur),C$zui.Destroyed()},b2ParticleSystem.prototype.CreateParticleGroup=function(C$zut){var C$zue=b2ParticleSystem.CreateParticleGroup_s_transform;if(this.m_world.IsLocked())throw new Error;var C$zui=C$zue;C$zui.SetPositionAngle(b2Maybe(C$zut.position,C$zuj.ZERO),b2Maybe(C$zut.angle,0));C$zue=this.m_count;if(C$zut.shape&&this.CreateParticlesWithShapeForGroup(C$zut.shape,C$zut,C$zui),C$zut.shapes&&this.CreateParticlesWithShapesForGroup(C$zut.shapes,b2Maybe(C$zut.shapeCount,C$zut.shapes.length),C$zut,C$zui),C$zut.positionData){var C$zur=b2Maybe(C$zut.particleCount,C$zut.positionData.length);for(var C$zun=0;C$zun<C$zur;C$zun++){var C$zua=C$zut.positionData[C$zun];this.CreateParticleForGroup(C$zut,C$zui,C$zua)}}var C$zuo=this.m_count;var C$zus=new C$zugr(this);C$zus.m_firstIndex=C$zue,C$zus.m_lastIndex=C$zuo,C$zus.m_strength=b2Maybe(C$zut.strength,1),C$zus.m_userData=C$zut.userData,C$zus.m_transform.Copy(C$zui),C$zus.m_prev=null,C$zus.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=C$zus),this.m_groupList=C$zus,++this.m_groupCount;for(C$zun=C$zue;C$zun<C$zuo;C$zun++)this.m_groupBuffer[C$zun]=C$zus;this.SetGroupFlags(C$zus,b2Maybe(C$zut.groupFlags,0));var C$zuc=new b2ParticleSystem.ConnectionFilter;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(C$zue,C$zuo,C$zuc),C$zut.group&&(this.JoinParticleGroups(C$zut.group,C$zus),C$zus=C$zut.group),C$zus},b2ParticleSystem.prototype.JoinParticleGroups=function(C$zut,C$zue){if(this.m_world.IsLocked())throw new Error;this.RotateBuffer(C$zue.m_firstIndex,C$zue.m_lastIndex,this.m_count),this.RotateBuffer(C$zut.m_firstIndex,C$zut.m_lastIndex,C$zue.m_firstIndex);var C$zui=new b2ParticleSystem.JoinParticleGroupsFilter(C$zue.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(C$zut.m_firstIndex,C$zue.m_lastIndex,C$zui);for(var C$zur=C$zue.m_firstIndex;C$zur<C$zue.m_lastIndex;C$zur++)this.m_groupBuffer[C$zur]=C$zut;C$zui=C$zut.m_groupFlags|C$zue.m_groupFlags;this.SetGroupFlags(C$zut,C$zui),C$zut.m_lastIndex=C$zue.m_lastIndex,C$zue.m_firstIndex=C$zue.m_lastIndex,this.DestroyParticleGroup(C$zue)},b2ParticleSystem.prototype.SplitParticleGroup=function(C$zut){this.UpdateContacts(!0);var C$zue=b2MakeArray(C$zut.GetParticleCount(),function(C$zut){return new b2ParticleSystem.ParticleListNode});b2ParticleSystem.InitializeParticleLists(C$zut,C$zue),this.MergeParticleListsInContact(C$zut,C$zue);var C$zui=b2ParticleSystem.FindLongestParticleList(C$zut,C$zue);this.MergeZombieParticleListNodes(C$zut,C$zue,C$zui),this.CreateParticleGroupsFromParticleList(C$zut,C$zue,C$zui),this.UpdatePairsAndTriadsWithParticleList(C$zut,C$zue)},b2ParticleSystem.prototype.GetParticleGroupList=function(){return this.m_groupList},b2ParticleSystem.prototype.GetParticleGroupCount=function(){return this.m_groupCount},b2ParticleSystem.prototype.GetParticleCount=function(){return this.m_count},b2ParticleSystem.prototype.GetMaxParticleCount=function(){return this.m_def.maxCount},b2ParticleSystem.prototype.SetMaxParticleCount=function(C$zut){this.m_def.maxCount=C$zut},b2ParticleSystem.prototype.GetAllParticleFlags=function(){return this.m_allParticleFlags},b2ParticleSystem.prototype.GetAllGroupFlags=function(){return this.m_allGroupFlags},b2ParticleSystem.prototype.SetPaused=function(C$zut){this.m_paused=C$zut},b2ParticleSystem.prototype.GetPaused=function(){return this.m_paused},b2ParticleSystem.prototype.SetDensity=function(C$zut){this.m_def.density=C$zut,this.m_inverseDensity=1/this.m_def.density},b2ParticleSystem.prototype.GetDensity=function(){return this.m_def.density},b2ParticleSystem.prototype.SetGravityScale=function(C$zut){this.m_def.gravityScale=C$zut},b2ParticleSystem.prototype.GetGravityScale=function(){return this.m_def.gravityScale},b2ParticleSystem.prototype.SetDamping=function(C$zut){this.m_def.dampingStrength=C$zut},b2ParticleSystem.prototype.GetDamping=function(){return this.m_def.dampingStrength},b2ParticleSystem.prototype.SetStaticPressureIterations=function(C$zut){this.m_def.staticPressureIterations=C$zut},b2ParticleSystem.prototype.GetStaticPressureIterations=function(){return this.m_def.staticPressureIterations},b2ParticleSystem.prototype.SetRadius=function(C$zut){this.m_particleDiameter=2*C$zut,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter},b2ParticleSystem.prototype.GetRadius=function(){return this.m_particleDiameter/2},b2ParticleSystem.prototype.GetPositionBuffer=function(){if(!this.m_positionBuffer.data)throw new Error;return this.m_positionBuffer.data},b2ParticleSystem.prototype.GetVelocityBuffer=function(){if(!this.m_velocityBuffer.data)throw new Error;return this.m_velocityBuffer.data},b2ParticleSystem.prototype.GetColorBuffer=function(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data},b2ParticleSystem.prototype.GetGroupBuffer=function(){return this.m_groupBuffer},b2ParticleSystem.prototype.GetWeightBuffer=function(){return this.m_weightBuffer},b2ParticleSystem.prototype.GetUserDataBuffer=function(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data},b2ParticleSystem.prototype.GetFlagsBuffer=function(){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data},b2ParticleSystem.prototype.SetParticleFlags=function(C$zut,C$zue){if(!this.m_flagsBuffer.data)throw new Error;this.m_flagsBuffer.data[C$zut]&~C$zue&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&C$zue&&(C$zue&C$zuH.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),C$zue&C$zuH.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=C$zue),this.m_flagsBuffer.data[C$zut]=C$zue},b2ParticleSystem.prototype.GetParticleFlags=function(C$zut){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data[C$zut]},b2ParticleSystem.prototype.SetFlagsBuffer=function(C$zut,C$zue){this.SetUserOverridableBuffer(this.m_flagsBuffer,C$zut,C$zue)},b2ParticleSystem.prototype.SetPositionBuffer=function(C$zut,C$zue){this.SetUserOverridableBuffer(this.m_positionBuffer,C$zut,C$zue)},b2ParticleSystem.prototype.SetVelocityBuffer=function(C$zut,C$zue){this.SetUserOverridableBuffer(this.m_velocityBuffer,C$zut,C$zue)},b2ParticleSystem.prototype.SetColorBuffer=function(C$zut,C$zue){this.SetUserOverridableBuffer(this.m_colorBuffer,C$zut,C$zue)},b2ParticleSystem.prototype.SetUserDataBuffer=function(C$zut,C$zue){this.SetUserOverridableBuffer(this.m_userDataBuffer,C$zut,C$zue)},b2ParticleSystem.prototype.GetContacts=function(){return this.m_contactBuffer.data},b2ParticleSystem.prototype.GetContactCount=function(){return this.m_contactBuffer.count},b2ParticleSystem.prototype.GetBodyContacts=function(){return this.m_bodyContactBuffer.data},b2ParticleSystem.prototype.GetBodyContactCount=function(){return this.m_bodyContactBuffer.count},b2ParticleSystem.prototype.GetPairs=function(){return this.m_pairBuffer.data},b2ParticleSystem.prototype.GetPairCount=function(){return this.m_pairBuffer.count},b2ParticleSystem.prototype.GetTriads=function(){return this.m_triadBuffer.data},b2ParticleSystem.prototype.GetTriadCount=function(){return this.m_triadBuffer.count},b2ParticleSystem.prototype.SetStuckThreshold=function(C$zut){0<(this.m_stuckThreshold=C$zut)&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))},b2ParticleSystem.prototype.GetStuckCandidates=function(){return this.m_stuckParticleBuffer.Data()},b2ParticleSystem.prototype.GetStuckCandidateCount=function(){return this.m_stuckParticleBuffer.GetCount()},b2ParticleSystem.prototype.ComputeCollisionEnergy=function(){if(!this.m_velocityBuffer.data)throw new Error;var C$zut=b2ParticleSystem.ComputeCollisionEnergy_s_v;var C$zue=this.m_velocityBuffer.data;var C$zui=0;for(var C$zur=0;C$zur<this.m_contactBuffer.count;C$zur++){var C$zun=this.m_contactBuffer.data[C$zur];var C$zua=C$zun.indexA;var C$zuo=C$zun.indexB;C$zun=C$zun.normal;C$zuo=C$zuj.SubVV(C$zue[C$zuo],C$zue[C$zua],C$zut);C$zua=C$zuj.DotVV(C$zuo,C$zun);C$zua<0&&(C$zui+=C$zua*C$zua)}return.5*this.GetParticleMass()*C$zui},b2ParticleSystem.prototype.SetStrictContactCheck=function(C$zut){this.m_def.strictContactCheck=C$zut},b2ParticleSystem.prototype.GetStrictContactCheck=function(){return this.m_def.strictContactCheck},b2ParticleSystem.prototype.SetParticleLifetime=function(C$zut,C$zue){var C$zui=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),C$zui){var C$zur=this.GetParticleCount();for(var C$zun=0;C$zun<C$zur;++C$zun)this.m_indexByExpirationTimeBuffer.data[C$zun]=C$zun}C$zui=C$zue/this.m_def.lifetimeGranularity;C$zue=0<C$zui?this.GetQuantizedTimeElapsed()+C$zui:C$zui;C$zue!==this.m_expirationTimeBuffer.data[C$zut]&&(this.m_expirationTimeBuffer.data[C$zut]=C$zue,this.m_expirationTimeBufferRequiresSorting=!0)},b2ParticleSystem.prototype.GetParticleLifetime=function(C$zut){return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[C$zut])},b2ParticleSystem.prototype.SetDestructionByAge=function(C$zut){C$zut&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=C$zut},b2ParticleSystem.prototype.GetDestructionByAge=function(){return this.m_def.destroyByAge},b2ParticleSystem.prototype.GetExpirationTimeBuffer=function(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data},b2ParticleSystem.prototype.ExpirationTimeToLifetime=function(C$zut){return(0<C$zut?C$zut-this.GetQuantizedTimeElapsed():C$zut)*this.m_def.lifetimeGranularity},b2ParticleSystem.prototype.GetIndexByExpirationTimeBuffer=function(){if(this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),!this.m_indexByExpirationTimeBuffer.data)throw new Error;return this.m_indexByExpirationTimeBuffer.data},b2ParticleSystem.prototype.ParticleApplyLinearImpulse=function(C$zut,C$zue){this.ApplyLinearImpulse(C$zut,C$zut+1,C$zue)},b2ParticleSystem.prototype.ApplyLinearImpulse=function(C$zut,C$zue,C$zui){if(!this.m_velocityBuffer.data)throw new Error;var C$zur=this.m_velocityBuffer.data;var C$zun=(C$zue-C$zut)*this.GetParticleMass();var C$zua=(new C$zuj).Copy(C$zui).SelfMul(1/C$zun);for(var C$zuo=C$zut;C$zuo<C$zue;C$zuo++)C$zur[C$zuo].SelfAdd(C$zua)},b2ParticleSystem.IsSignificantForce=function(C$zut){return 0!==C$zut.x||0!==C$zut.y},b2ParticleSystem.prototype.ParticleApplyForce=function(C$zut,C$zue){if(!this.m_flagsBuffer.data)throw new Error;b2ParticleSystem.IsSignificantForce(C$zue)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[C$zut])&&(this.PrepareForceBuffer(),this.m_forceBuffer[C$zut].SelfAdd(C$zue))},b2ParticleSystem.prototype.ApplyForce=function(C$zut,C$zue,C$zui){var C$zur=(new C$zuj).Copy(C$zui).SelfMul(1/(C$zue-C$zut));if(b2ParticleSystem.IsSignificantForce(C$zur)){this.PrepareForceBuffer();for(var C$zun=C$zut;C$zun<C$zue;C$zun++)this.m_forceBuffer[C$zun].SelfAdd(C$zur)}},b2ParticleSystem.prototype.GetNext=function(){return this.m_next},b2ParticleSystem.prototype.QueryAABB=function(C$zut,C$zue){if(0!==this.m_proxyBuffer.count){var C$zui=this.m_proxyBuffer.count;var C$zur=std_lower_bound(this.m_proxyBuffer.data,0,C$zui,b2ParticleSystem.computeTag(this.m_inverseDiameter*C$zue.lowerBound.x,this.m_inverseDiameter*C$zue.lowerBound.y),b2ParticleSystem.Proxy.CompareProxyTag);var C$zun=std_upper_bound(this.m_proxyBuffer.data,C$zur,C$zui,b2ParticleSystem.computeTag(this.m_inverseDiameter*C$zue.upperBound.x,this.m_inverseDiameter*C$zue.upperBound.y),b2ParticleSystem.Proxy.CompareTagProxy);if(!this.m_positionBuffer.data)throw new Error;var C$zua=this.m_positionBuffer.data;for(var C$zuo=C$zur;C$zuo<C$zun;++C$zuo){var C$zus=this.m_proxyBuffer.data[C$zuo].index;var C$zuc=C$zua[C$zus];if(C$zue.lowerBound.x<C$zuc.x&&C$zuc.x<C$zue.upperBound.x&&C$zue.lowerBound.y<C$zuc.y&&C$zuc.y<C$zue.upperBound.y&&!C$zut.ReportParticle(this,C$zus))break}}},b2ParticleSystem.prototype.QueryShapeAABB=function(C$zut,C$zue,C$zui,C$zur){var C$zun=b2ParticleSystem.QueryShapeAABB_s_aabb;C$zue.ComputeAABB(C$zun,C$zui,C$zur=void 0===C$zur?0:C$zur),this.QueryAABB(C$zut,C$zun)},b2ParticleSystem.prototype.QueryPointAABB=function(C$zut,C$zue,C$zui){var C$zur=b2ParticleSystem.QueryPointAABB_s_aabb;C$zur.lowerBound.Set(C$zue.x-(C$zui=void 0===C$zui?.008:C$zui),C$zue.y-C$zui),C$zur.upperBound.Set(C$zue.x+C$zui,C$zue.y+C$zui),this.QueryAABB(C$zut,C$zur)},b2ParticleSystem.prototype.RayCast=function(C$zuh,C$zut,C$zue){var C$zui=b2ParticleSystem.RayCast_s_aabb;var C$zuu=b2ParticleSystem.RayCast_s_p;var C$zu_=b2ParticleSystem.RayCast_s_v;var C$zud=b2ParticleSystem.RayCast_s_n;var C$zuf=b2ParticleSystem.RayCast_s_point;if(0!==this.m_proxyBuffer.count){if(!this.m_positionBuffer.data)throw new Error;var C$zup=this.m_positionBuffer.data;C$zuj.MinV(C$zut,C$zue,C$zui.lowerBound),C$zuj.MaxV(C$zut,C$zue,C$zui.upperBound);var C$zur=1;var C$zun=C$zuj.SubVV(C$zue,C$zut,C$zu_);var C$zua=C$zuj.DotVV(C$zun,C$zun);var C$zum=this.GetInsideBoundsEnumerator(C$zui);var C$zuv;for(;0<=(C$zuv=C$zum.GetNext());){var C$zuo=C$zuj.SubVV(C$zut,C$zup[C$zuv],C$zuu);var C$zus=C$zuj.DotVV(C$zuo,C$zun);var C$zuc=C$zus*C$zus-C$zua*(C$zuj.DotVV(C$zuo,C$zuo)-this.m_squaredDiameter);if(0<=C$zuc){C$zuc=C$zuX(C$zuc);var C$zul=(-C$zus-C$zuc)/C$zua;if(!(C$zur<C$zul)&&!(C$zul<0&&((C$zul=(-C$zus+C$zuc)/C$zua)<0||C$zur<C$zul))){C$zus=C$zuj.AddVMulSV(C$zuo,C$zul,C$zun,C$zud);C$zus.Normalize();C$zuc=C$zuh.ReportParticle(this,C$zuv,C$zuj.AddVMulSV(C$zut,C$zul,C$zun,C$zuf),C$zus,C$zul);if((C$zur=C$zuD(C$zur,C$zuc))<=0)break}}}}},b2ParticleSystem.prototype.ComputeAABB=function(C$zut){var C$zue=this.GetParticleCount();if(C$zut.lowerBound.x=+C$zuB,C$zut.lowerBound.y=+C$zuB,C$zut.upperBound.x=-C$zuB,C$zut.upperBound.y=-C$zuB,!this.m_positionBuffer.data)throw new Error;var C$zui=this.m_positionBuffer.data;for(var C$zur=0;C$zur<C$zue;C$zur++){var C$zun=C$zui[C$zur];C$zuj.MinV(C$zut.lowerBound,C$zun,C$zut.lowerBound),C$zuj.MaxV(C$zut.upperBound,C$zun,C$zut.upperBound)}C$zut.lowerBound.x-=this.m_particleDiameter,C$zut.lowerBound.y-=this.m_particleDiameter,C$zut.upperBound.x+=this.m_particleDiameter,C$zut.upperBound.y+=this.m_particleDiameter},b2ParticleSystem.prototype.FreeBuffer=function(C$zut,C$zue){null!==C$zut&&(C$zut.length=0)},b2ParticleSystem.prototype.FreeUserOverridableBuffer=function(C$zut){0===C$zut.userSuppliedCapacity&&this.FreeBuffer(C$zut.data,this.m_internalAllocatedCapacity)},b2ParticleSystem.prototype.ReallocateBuffer3=function(C$zut,C$zue,C$zui){if(C$zui<=C$zue)throw new Error;C$zue=C$zut?C$zut.slice():[];return C$zue.length=C$zui,C$zue},b2ParticleSystem.prototype.ReallocateBuffer5=function(C$zut,C$zue,C$zui,C$zur,C$zun){if(C$zur<=C$zui)throw new Error;if(C$zue&&!(C$zur<=C$zue))throw new Error;return C$zut=C$zun&&!C$zut||C$zue?C$zut:this.ReallocateBuffer3(C$zut,C$zui,C$zur)},b2ParticleSystem.prototype.ReallocateBuffer4=function(C$zut,C$zue,C$zui,C$zur){return this.ReallocateBuffer5(C$zut.data,C$zut.userSuppliedCapacity,C$zue,C$zui,C$zur)},b2ParticleSystem.prototype.RequestBuffer=function(C$zut){return C$zut||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(256),(C$zut=[]).length=this.m_internalAllocatedCapacity),C$zut},b2ParticleSystem.prototype.ReallocateHandleBuffers=function(C$zut){this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,C$zut,!0)},b2ParticleSystem.prototype.ReallocateInternalAllocatedBuffers=function(C$zut){function LimitCapacity(C$zut,C$zue){return C$zue&&C$zue<C$zut?C$zue:C$zut}var C$zue;C$zut=LimitCapacity(C$zut,this.m_def.maxCount),C$zut=LimitCapacity(C$zut,this.m_flagsBuffer.userSuppliedCapacity),C$zut=LimitCapacity(C$zut,this.m_positionBuffer.userSuppliedCapacity),C$zut=LimitCapacity(C$zut,this.m_velocityBuffer.userSuppliedCapacity),C$zut=LimitCapacity(C$zut,this.m_colorBuffer.userSuppliedCapacity),C$zut=LimitCapacity(C$zut,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<C$zut&&(this.ReallocateHandleBuffers(C$zut),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,C$zut,!1),C$zue=0<this.m_stuckThreshold,this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,C$zut,C$zue),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,C$zut,C$zue),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,C$zut,C$zue),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,C$zut,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,C$zut,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,C$zut,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,C$zut,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,C$zut,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,C$zut,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,C$zut,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,C$zut,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,C$zut,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,C$zut,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,C$zut,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,C$zut,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,C$zut,!1),this.m_internalAllocatedCapacity=C$zut)},b2ParticleSystem.prototype.CreateParticleForGroup=function(C$zut,C$zue,C$zui){var C$zur=new C$zumr;C$zur.flags=b2Maybe(C$zut.flags,0),C$zuI.MulXV(C$zue,C$zui,C$zur.position),C$zuj.AddVV(b2Maybe(C$zut.linearVelocity,C$zuj.ZERO),C$zuj.CrossSV(b2Maybe(C$zut.angularVelocity,0),C$zuj.SubVV(C$zur.position,b2Maybe(C$zut.position,C$zuj.ZERO),C$zuj.s_t0),C$zuj.s_t0),C$zur.velocity),C$zur.color.Copy(b2Maybe(C$zut.color,C$zud.ZERO)),C$zur.lifetime=b2Maybe(C$zut.lifetime,0),C$zur.userData=C$zut.userData,this.CreateParticle(C$zur)},b2ParticleSystem.prototype.CreateParticlesStrokeShapeForGroup=function(C$zut,C$zue,C$zui){var C$zur=b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_edge;var C$zuh=b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_d;var C$zuu=b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_p;var C$zun=b2Maybe(C$zue.stride,0);0===C$zun&&(C$zun=this.GetParticleStride());var C$zua=0;var C$zu_=C$zut.GetChildCount();for(var C$zuo=0;C$zuo<C$zu_;C$zuo++){var C$zus=null;C$zut.GetType()===C$zuH.b2ShapeType.e_edgeShape?C$zus=C$zut:C$zut.GetChildEdge(C$zus=C$zur,C$zuo);var C$zuc=C$zuj.SubVV(C$zus.m_vertex2,C$zus.m_vertex1,C$zuh);var C$zul=C$zuc.Length();for(;C$zua<C$zul;){var C$zud=C$zuj.AddVMulSV(C$zus.m_vertex1,C$zua/C$zul,C$zuc,C$zuu);this.CreateParticleForGroup(C$zue,C$zui,C$zud),C$zua+=C$zun}C$zua-=C$zul}},b2ParticleSystem.prototype.CreateParticlesFillShapeForGroup=function(C$zut,C$zue,C$zui){var C$zur=b2ParticleSystem.CreateParticlesFillShapeForGroup_s_aabb;var C$zuh=b2ParticleSystem.CreateParticlesFillShapeForGroup_s_p;var C$zun=b2Maybe(C$zue.stride,0);0===C$zun&&(C$zun=this.GetParticleStride());var C$zua=C$zuI.IDENTITY;var C$zuo=C$zur;C$zut.ComputeAABB(C$zuo,C$zua,0);for(var C$zus=Math.floor(C$zuo.lowerBound.y/C$zun)*C$zun;C$zus<C$zuo.upperBound.y;C$zus+=C$zun)for(var C$zuc=Math.floor(C$zuo.lowerBound.x/C$zun)*C$zun;C$zuc<C$zuo.upperBound.x;C$zuc+=C$zun){var C$zul=C$zuh.Set(C$zuc,C$zus);C$zut.TestPoint(C$zua,C$zul)&&this.CreateParticleForGroup(C$zue,C$zui,C$zul)}},b2ParticleSystem.prototype.CreateParticlesWithShapeForGroup=function(C$zut,C$zue,C$zui){switch(C$zut.GetType()){case C$zuH.b2ShapeType.e_edgeShape:case C$zuH.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(C$zut,C$zue,C$zui);break;case C$zuH.b2ShapeType.e_polygonShape:case C$zuH.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(C$zut,C$zue,C$zui)}},b2ParticleSystem.prototype.CreateParticlesWithShapesForGroup=function(C$zut,C$zue,C$zui,C$zur){C$zut=new b2ParticleSystem.CompositeShape(C$zut,C$zue);this.CreateParticlesFillShapeForGroup(C$zut,C$zui,C$zur)},b2ParticleSystem.prototype.CloneParticle=function(C$zut,C$zue){var C$zui=new C$zumr;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;C$zui.flags=this.m_flagsBuffer.data[C$zut],C$zui.position.Copy(this.m_positionBuffer.data[C$zut]),C$zui.velocity.Copy(this.m_velocityBuffer.data[C$zut]),this.m_colorBuffer.data&&C$zui.color.Copy(this.m_colorBuffer.data[C$zut]),this.m_userDataBuffer.data&&(C$zui.userData=this.m_userDataBuffer.data[C$zut]),C$zui.group=C$zue;C$zue=this.CreateParticle(C$zui);return this.m_handleIndexBuffer.data&&((C$zui=this.m_handleIndexBuffer.data[C$zut])&&C$zui.SetIndex(C$zue),this.m_handleIndexBuffer.data[C$zue]=C$zui,this.m_handleIndexBuffer.data[C$zut]=null),this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$zue]=this.m_lastBodyContactStepBuffer.data[C$zut]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$zue]=this.m_bodyContactCountBuffer.data[C$zut]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$zue]=this.m_consecutiveContactStepsBuffer.data[C$zut]),this.m_hasForce&&this.m_forceBuffer[C$zue].Copy(this.m_forceBuffer[C$zut]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$zue]=this.m_staticPressureBuffer[C$zut]),this.m_depthBuffer&&(this.m_depthBuffer[C$zue]=this.m_depthBuffer[C$zut]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[C$zue]=this.m_expirationTimeBuffer.data[C$zut]),C$zue},b2ParticleSystem.prototype.DestroyParticlesInGroup=function(C$zut,C$zue){void 0===C$zue&&(C$zue=!1);for(var C$zui=C$zut.m_firstIndex;C$zui<C$zut.m_lastIndex;C$zui++)this.DestroyParticle(C$zui,C$zue)},b2ParticleSystem.prototype.DestroyParticleGroup=function(C$zut){this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(C$zut),this.SetGroupFlags(C$zut,0);for(var C$zue=C$zut.m_firstIndex;C$zue<C$zut.m_lastIndex;C$zue++)this.m_groupBuffer[C$zue]=null;C$zut.m_prev&&(C$zut.m_prev.m_next=C$zut.m_next),C$zut.m_next&&(C$zut.m_next.m_prev=C$zut.m_prev),C$zut===this.m_groupList&&(this.m_groupList=C$zut.m_next),--this.m_groupCount},b2ParticleSystem.ParticleCanBeConnected=function(C$zut,C$zue){return 0!=(C$zut&(C$zuH.b2ParticleFlag.b2_wallParticle|C$zuH.b2ParticleFlag.b2_springParticle|C$zuH.b2ParticleFlag.b2_elasticParticle))||null!==C$zue&&0!=(C$zue.GetGroupFlags()&C$zuH.b2ParticleGroupFlag.b2_rigidParticleGroup)},b2ParticleSystem.prototype.UpdatePairsAndTriads=function(C$zut,C$zue,C$zum){var C$zug=b2ParticleSystem.UpdatePairsAndTriads_s_dab;var C$zub=b2ParticleSystem.UpdatePairsAndTriads_s_dbc;var C$zuC=b2ParticleSystem.UpdatePairsAndTriads_s_dca;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zuv=this.m_positionBuffer.data;var C$zui=0;for(var C$zur=C$zut;C$zur<C$zue;C$zur++)C$zui|=this.m_flagsBuffer.data[C$zur];if(C$zui&b2ParticleSystem.k_pairFlags)for(var C$zus=0;C$zus<this.m_contactBuffer.count;C$zus++){var C$zuc=this.m_contactBuffer.data[C$zus];var C$zun=C$zuc.indexA;var C$zua=C$zuc.indexB;var C$zuo=this.m_flagsBuffer.data[C$zun];var C$zul=this.m_flagsBuffer.data[C$zua];var C$zuh=this.m_groupBuffer[C$zun];var C$zuu=this.m_groupBuffer[C$zua];C$zut<=C$zun&&C$zun<C$zue&&C$zut<=C$zua&&C$zua<C$zue&&!((C$zuo|C$zul)&C$zuH.b2ParticleFlag.b2_zombieParticle)&&(C$zuo|C$zul)&b2ParticleSystem.k_pairFlags&&(C$zum.IsNecessary(C$zun)||C$zum.IsNecessary(C$zua))&&b2ParticleSystem.ParticleCanBeConnected(C$zuo,C$zuh)&&b2ParticleSystem.ParticleCanBeConnected(C$zul,C$zuu)&&C$zum.ShouldCreatePair(C$zun,C$zua)&&((C$zuo=this.m_pairBuffer.data[this.m_pairBuffer.Append()]).indexA=C$zun,C$zuo.indexB=C$zua,C$zuo.flags=C$zuc.flags,C$zuo.strength=C$zuD(C$zuh?C$zuh.m_strength:1,C$zuu?C$zuu.m_strength:1),C$zuo.distance=C$zuj.DistanceVV(C$zuv[C$zun],C$zuv[C$zua])),std_stable_sort(this.m_pairBuffer.data,0,this.m_pairBuffer.count,b2ParticleSystem.ComparePairIndices),this.m_pairBuffer.Unique(b2ParticleSystem.MatchPairIndices)}if(C$zui&b2ParticleSystem.k_triadFlags){var C$zu_=new C$zuCr(C$zue-C$zut);for(C$zur=C$zut;C$zur<C$zue;C$zur++){var C$zud=this.m_flagsBuffer.data[C$zur];var C$zuf=this.m_groupBuffer[C$zur];C$zud&C$zuH.b2ParticleFlag.b2_zombieParticle||!b2ParticleSystem.ParticleCanBeConnected(C$zud,C$zuf)||C$zu_.AddGenerator(C$zuv[C$zur],C$zur,C$zum.IsNecessary(C$zur))}var C$zup=this.GetParticleStride();C$zu_.Generate(C$zup/2,2*C$zup);var C$zuy=this;C$zu_.GetNodes(function(C$zut,C$zue,C$zui){if(!C$zuy.m_flagsBuffer.data)throw new Error;var C$zuh=C$zuy.m_flagsBuffer.data[C$zut];var C$zuu=C$zuy.m_flagsBuffer.data[C$zue];var C$zu_=C$zuy.m_flagsBuffer.data[C$zui];var C$zur,C$zun,C$zua,C$zuo,C$zus,C$zud,C$zuc,C$zuf,C$zup,C$zul;(C$zuh|C$zuu|C$zu_)&b2ParticleSystem.k_triadFlags&&C$zum.ShouldCreateTriad(C$zut,C$zue,C$zui)&&(C$zur=C$zuv[C$zut],C$zun=C$zuv[C$zue],C$zua=C$zuv[C$zui],C$zuo=C$zuj.SubVV(C$zur,C$zun,C$zug),C$zus=C$zuj.SubVV(C$zun,C$zua,C$zub),C$zud=C$zuj.SubVV(C$zua,C$zur,C$zuC),C$zuc=4*C$zuy.m_squaredDiameter,C$zuj.DotVV(C$zuo,C$zuo)>C$zuc||C$zuj.DotVV(C$zus,C$zus)>C$zuc||C$zuj.DotVV(C$zud,C$zud)>C$zuc||(C$zuc=C$zuy.m_groupBuffer[C$zut],C$zuf=C$zuy.m_groupBuffer[C$zue],C$zup=C$zuy.m_groupBuffer[C$zui],(C$zul=C$zuy.m_triadBuffer.data[C$zuy.m_triadBuffer.Append()]).indexA=C$zut,C$zul.indexB=C$zue,C$zul.indexC=C$zui,C$zul.flags=C$zuh|C$zuu|C$zu_,C$zul.strength=C$zuD(C$zuD(C$zuc?C$zuc.m_strength:1,C$zuf?C$zuf.m_strength:1),C$zup?C$zup.m_strength:1),C$zut=(C$zur.x+C$zun.x+C$zua.x)/3,C$zue=(C$zur.y+C$zun.y+C$zua.y)/3,C$zul.pa.x=C$zur.x-C$zut,C$zul.pa.y=C$zur.y-C$zue,C$zul.pb.x=C$zun.x-C$zut,C$zul.pb.y=C$zun.y-C$zue,C$zul.pc.x=C$zua.x-C$zut,C$zul.pc.y=C$zua.y-C$zue,C$zul.ka=-C$zuj.DotVV(C$zud,C$zuo),C$zul.kb=-C$zuj.DotVV(C$zuo,C$zus),C$zul.kc=-C$zuj.DotVV(C$zus,C$zud),C$zul.s=C$zuj.CrossVV(C$zur,C$zun)+C$zuj.CrossVV(C$zun,C$zua)+C$zuj.CrossVV(C$zua,C$zur)))}),std_stable_sort(this.m_triadBuffer.data,0,this.m_triadBuffer.count,b2ParticleSystem.CompareTriadIndices),this.m_triadBuffer.Unique(b2ParticleSystem.MatchTriadIndices)}},b2ParticleSystem.prototype.UpdatePairsAndTriadsWithReactiveParticles=function(){var C$zut=new b2ParticleSystem.ReactiveFilter(this.m_flagsBuffer);if(this.UpdatePairsAndTriads(0,this.m_count,C$zut),!this.m_flagsBuffer.data)throw new Error;for(var C$zue=0;C$zue<this.m_count;C$zue++)this.m_flagsBuffer.data[C$zue]&=~C$zuH.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~C$zuH.b2ParticleFlag.b2_reactiveParticle},b2ParticleSystem.ComparePairIndices=function(C$zut,C$zue){var C$zui=C$zut.indexA-C$zue.indexA;return 0!=C$zui?C$zui<0:C$zut.indexB<C$zue.indexB},b2ParticleSystem.MatchPairIndices=function(C$zut,C$zue){return C$zut.indexA===C$zue.indexA&&C$zut.indexB===C$zue.indexB},b2ParticleSystem.CompareTriadIndices=function(C$zut,C$zue){var C$zui=C$zut.indexA-C$zue.indexA;if(0!=C$zui)return C$zui<0;C$zui=C$zut.indexB-C$zue.indexB;return 0!=C$zui?C$zui<0:C$zut.indexC<C$zue.indexC},b2ParticleSystem.MatchTriadIndices=function(C$zut,C$zue){return C$zut.indexA===C$zue.indexA&&C$zut.indexB===C$zue.indexB&&C$zut.indexC===C$zue.indexC},b2ParticleSystem.InitializeParticleLists=function(C$zut,C$zue){var C$zui=C$zut.GetBufferIndex();var C$zur=C$zut.GetParticleCount();for(var C$zun=0;C$zun<C$zur;C$zun++){var C$zua=C$zue[C$zun];(C$zua.list=C$zua).next=null,C$zua.count=1,C$zua.index=C$zun+C$zui}},b2ParticleSystem.prototype.MergeParticleListsInContact=function(C$zut,C$zue){var C$zui=C$zut.GetBufferIndex();for(var C$zur=0;C$zur<this.m_contactBuffer.count;C$zur++){var C$zun=this.m_contactBuffer.data[C$zur];var C$zua=C$zun.indexA;C$zun=C$zun.indexB;var C$zuo;C$zut.ContainsParticle(C$zua)&&C$zut.ContainsParticle(C$zun)&&((C$zua=C$zue[C$zua-C$zui].list)!==(C$zun=C$zue[C$zun-C$zui].list)&&(C$zua.count<C$zun.count&&(C$zuo=C$zua,C$zua=C$zun,C$zun=C$zuo),b2ParticleSystem.MergeParticleLists(C$zua,C$zun)))}},b2ParticleSystem.MergeParticleLists=function(C$zut,C$zue){for(var C$zui=C$zue;;){C$zui.list=C$zut;var C$zur=C$zui.next;if(!C$zur){C$zui.next=C$zut.next;break}C$zui=C$zur}C$zut.next=C$zue,C$zut.count+=C$zue.count,C$zue.count=0},b2ParticleSystem.FindLongestParticleList=function(C$zut,C$zue){var C$zui=C$zut.GetParticleCount();var C$zur=C$zue[0];for(var C$zun=0;C$zun<C$zui;C$zun++){var C$zua=C$zue[C$zun];C$zur.count<C$zua.count&&(C$zur=C$zua)}return C$zur},b2ParticleSystem.prototype.MergeZombieParticleListNodes=function(C$zut,C$zue,C$zui){if(!this.m_flagsBuffer.data)throw new Error;var C$zur=C$zut.GetParticleCount();for(var C$zun=0;C$zun<C$zur;C$zun++){var C$zua=C$zue[C$zun];C$zua!==C$zui&&this.m_flagsBuffer.data[C$zua.index]&C$zuH.b2ParticleFlag.b2_zombieParticle&&b2ParticleSystem.MergeParticleListAndNode(C$zui,C$zua)}},b2ParticleSystem.MergeParticleListAndNode=function(C$zut,C$zue){C$zue.list=C$zut,C$zue.next=C$zut.next,C$zut.next=C$zue,C$zut.count++,C$zue.count=0},b2ParticleSystem.prototype.CreateParticleGroupsFromParticleList=function(C$zut,C$zue,C$zui){if(!this.m_flagsBuffer.data)throw new Error;var C$zur=C$zut.GetParticleCount();var C$zun=new C$zuyr;C$zun.groupFlags=C$zut.GetGroupFlags(),C$zun.userData=C$zut.GetUserData();for(var C$zua=0;C$zua<C$zur;C$zua++){var C$zuo=C$zue[C$zua];if(C$zuo.count&&C$zuo!==C$zui){var C$zus=this.CreateParticleGroup(C$zun);for(var C$zuc=C$zuo;C$zuc;C$zuc=C$zuc.next){var C$zul=C$zuc.index;var C$zuh=this.CloneParticle(C$zul,C$zus);this.m_flagsBuffer.data[C$zul]|=C$zuH.b2ParticleFlag.b2_zombieParticle,C$zuc.index=C$zuh}}}},b2ParticleSystem.prototype.UpdatePairsAndTriadsWithParticleList=function(C$zut,C$zue){var C$zui=C$zut.GetBufferIndex();for(var C$zur=0;C$zur<this.m_pairBuffer.count;C$zur++){var C$zun=this.m_pairBuffer.data[C$zur];var C$zua=C$zun.indexA;var C$zuo=C$zun.indexB;C$zut.ContainsParticle(C$zua)&&(C$zun.indexA=C$zue[C$zua-C$zui].index),C$zut.ContainsParticle(C$zuo)&&(C$zun.indexB=C$zue[C$zuo-C$zui].index)}for(C$zur=0;C$zur<this.m_triadBuffer.count;C$zur++){var C$zus=this.m_triadBuffer.data[C$zur];C$zua=C$zus.indexA;C$zuo=C$zus.indexB;var C$zuc=C$zus.indexC;C$zut.ContainsParticle(C$zua)&&(C$zus.indexA=C$zue[C$zua-C$zui].index),C$zut.ContainsParticle(C$zuo)&&(C$zus.indexB=C$zue[C$zuo-C$zui].index),C$zut.ContainsParticle(C$zuc)&&(C$zus.indexC=C$zue[C$zuc-C$zui].index)}},b2ParticleSystem.prototype.ComputeDepth=function(){var C$zuh=[];var C$zuu=0;for(var C$zut=0;C$zut<this.m_contactBuffer.count;C$zut++){var C$zue=(C$zus=this.m_contactBuffer.data[C$zut]).indexA;var C$zui=C$zus.indexB;var C$zu_=this.m_groupBuffer[C$zue];var C$zud=this.m_groupBuffer[C$zui];C$zu_&&C$zu_===C$zud&&C$zu_.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(C$zuh[C$zuu++]=C$zus)}var C$zuf=[];var C$zup=0;for(var C$zur=this.m_groupList;C$zur;C$zur=C$zur.GetNext())if(C$zur.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth){C$zuf[C$zup++]=C$zur,this.SetGroupFlags(C$zur,C$zur.m_groupFlags&~C$zuH.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);for(var C$zun=C$zur.m_firstIndex;C$zun<C$zur.m_lastIndex;C$zun++)this.m_accumulationBuffer[C$zun]=0}for(C$zut=0;C$zut<C$zuu;C$zut++){C$zue=(C$zus=C$zuh[C$zut]).indexA;C$zui=C$zus.indexB;var C$zua=C$zus.weight;this.m_accumulationBuffer[C$zue]+=C$zua,this.m_accumulationBuffer[C$zui]+=C$zua}for(C$zun=0;C$zun<C$zup;C$zun++)for(var C$zuo=(C$zur=C$zuf[C$zun]).m_firstIndex;C$zuo<C$zur.m_lastIndex;C$zuo++){C$zua=this.m_accumulationBuffer[C$zuo];this.m_depthBuffer[C$zuo]=C$zua<.8?0:C$zuB}var C$zum=C$zuX(this.m_count)>>0;for(var C$zuv=0;C$zuv<C$zum;C$zuv++){var C$zuy=!1;for(C$zut=0;C$zut<C$zuu;C$zut++){var C$zus;C$zue=(C$zus=C$zuh[C$zut]).indexA;C$zui=C$zus.indexB;var C$zuc=1-C$zus.weight;var C$zug=this.m_depthBuffer[C$zue];var C$zub=this.m_depthBuffer[C$zui];var C$zuC=C$zub+C$zuc;C$zuc=C$zug+C$zuc;C$zuC<C$zug&&(this.m_depthBuffer[C$zue]=C$zuC,C$zuy=!0),C$zuc<C$zub&&(this.m_depthBuffer[C$zui]=C$zuc,C$zuy=!0)}if(!C$zuy)break}for(C$zun=0;C$zun<C$zup;C$zun++)for(var C$zul=(C$zur=C$zuf[C$zun]).m_firstIndex;C$zul<C$zur.m_lastIndex;C$zul++)this.m_depthBuffer[C$zul]<C$zuB?this.m_depthBuffer[C$zul]*=this.m_particleDiameter:this.m_depthBuffer[C$zul]=0},b2ParticleSystem.prototype.GetInsideBoundsEnumerator=function(C$zut){var C$zue=b2ParticleSystem.computeTag(this.m_inverseDiameter*C$zut.lowerBound.x-1,this.m_inverseDiameter*C$zut.lowerBound.y-1);C$zut=b2ParticleSystem.computeTag(this.m_inverseDiameter*C$zut.upperBound.x+1,this.m_inverseDiameter*C$zut.upperBound.y+1);var C$zui=this.m_proxyBuffer.count;var C$zur=std_lower_bound(this.m_proxyBuffer.data,0,C$zui,C$zue,b2ParticleSystem.Proxy.CompareProxyTag);C$zui=std_upper_bound(this.m_proxyBuffer.data,0,C$zui,C$zut,b2ParticleSystem.Proxy.CompareTagProxy);return new b2ParticleSystem.InsideBoundsEnumerator(this,C$zue,C$zut,C$zur,C$zui)},b2ParticleSystem.prototype.UpdateAllParticleFlags=function(){if(!this.m_flagsBuffer.data)throw new Error;for(var C$zut=this.m_allParticleFlags=0;C$zut<this.m_count;C$zut++)this.m_allParticleFlags|=this.m_flagsBuffer.data[C$zut];this.m_needsUpdateAllParticleFlags=!1},b2ParticleSystem.prototype.UpdateAllGroupFlags=function(){this.m_allGroupFlags=0;for(var C$zut=this.m_groupList;C$zut;C$zut=C$zut.GetNext())this.m_allGroupFlags|=C$zut.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1},b2ParticleSystem.prototype.AddContact=function(C$zut,C$zue,C$zui){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;var C$zur=b2ParticleSystem.AddContact_s_d;var C$zun=this.m_positionBuffer.data;C$zun=C$zuj.SubVV(C$zun[C$zue],C$zun[C$zut],C$zur);C$zur=C$zuj.DotVV(C$zun,C$zun);var C$zua,C$zuo;C$zur<this.m_squaredDiameter&&(C$zua=b2InvSqrt(C$zur),isFinite(C$zua)||(C$zua=198177537e11),(C$zuo=this.m_contactBuffer.data[this.m_contactBuffer.Append()]).indexA=C$zut,C$zuo.indexB=C$zue,C$zuo.flags=this.m_flagsBuffer.data[C$zut]|this.m_flagsBuffer.data[C$zue],C$zuo.weight=1-C$zur*C$zua*this.m_inverseDiameter,C$zuj.MulSV(C$zua,C$zun,C$zuo.normal))},b2ParticleSystem.prototype.FindContacts_Reference=function(C$zut){var C$zue=this.m_proxyBuffer.count;for(var C$zui=this.m_contactBuffer.count=0,C$zur=0;C$zui<C$zue;C$zui++){var C$zun=b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[C$zui].tag,1,0);for(var C$zua=C$zui+1;C$zua<C$zue&&!(C$zun<this.m_proxyBuffer.data[C$zua].tag);C$zua++)this.AddContact(this.m_proxyBuffer.data[C$zui].index,this.m_proxyBuffer.data[C$zua].index,this.m_contactBuffer);var C$zuo=b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[C$zui].tag,-1,1);for(;C$zur<C$zue&&!(C$zuo<=this.m_proxyBuffer.data[C$zur].tag);C$zur++);var C$zus=b2ParticleSystem.computeRelativeTag(this.m_proxyBuffer.data[C$zui].tag,1,1);for(C$zua=C$zur;C$zua<C$zue&&!(C$zus<this.m_proxyBuffer.data[C$zua].tag);C$zua++)this.AddContact(this.m_proxyBuffer.data[C$zui].index,this.m_proxyBuffer.data[C$zua].index,this.m_contactBuffer)}},b2ParticleSystem.prototype.FindContacts=function(C$zut){this.FindContacts_Reference(C$zut)},b2ParticleSystem.prototype.UpdateProxies_Reference=function(C$zut){if(!this.m_positionBuffer.data)throw new Error;var C$zue=this.m_positionBuffer.data;var C$zui=this.m_inverseDiameter;for(var C$zur=0;C$zur<this.m_proxyBuffer.count;++C$zur){var C$zun=this.m_proxyBuffer.data[C$zur];var C$zua=C$zue[C$zun.index];C$zun.tag=b2ParticleSystem.computeTag(C$zui*C$zua.x,C$zui*C$zua.y)}},b2ParticleSystem.prototype.UpdateProxies=function(C$zut){this.UpdateProxies_Reference(C$zut)},b2ParticleSystem.prototype.SortProxies=function(C$zut){std_sort(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,b2ParticleSystem.Proxy.CompareProxyProxy)},b2ParticleSystem.prototype.FilterContacts=function(C$zut){var C$zue=this.GetParticleContactFilter();var C$zui;null!==C$zue&&(C$zui=this).m_contactBuffer.RemoveIf(function(C$zut){return 0!=(C$zut.flags&C$zuH.b2ParticleFlag.b2_particleContactFilterParticle)&&!C$zue.ShouldCollideParticleParticle(C$zui,C$zut.indexA,C$zut.indexB)})},b2ParticleSystem.prototype.NotifyContactListenerPreContact=function(C$zut){if(null!==this.GetParticleContactListener())throw C$zut.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error},b2ParticleSystem.prototype.NotifyContactListenerPostContact=function(C$zut){var C$zue=this.GetParticleContactListener();if(null!==C$zue){for(var C$zui=0;C$zui<this.m_contactBuffer.count;++C$zui){var C$zur=this.m_contactBuffer.data[C$zui];C$zue.BeginContactParticleParticle(this,C$zur)}throw new Error}},b2ParticleSystem.b2ParticleContactIsZombie=function(C$zut){return(C$zut.flags&C$zuH.b2ParticleFlag.b2_zombieParticle)===C$zuH.b2ParticleFlag.b2_zombieParticle},b2ParticleSystem.prototype.UpdateContacts=function(C$zut){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);var C$zue=new b2ParticleSystem.b2ParticlePairSet;this.NotifyContactListenerPreContact(C$zue),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(C$zue),C$zut&&this.m_contactBuffer.RemoveIf(b2ParticleSystem.b2ParticleContactIsZombie)},b2ParticleSystem.prototype.NotifyBodyContactListenerPreContact=function(C$zut){if(null!==this.GetFixtureContactListener())throw C$zut.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error},b2ParticleSystem.prototype.NotifyBodyContactListenerPostContact=function(C$zut){var C$zue=this.GetFixtureContactListener();if(null!==C$zue){for(var C$zui=0;C$zui<this.m_bodyContactBuffer.count;C$zui++){var C$zur=this.m_bodyContactBuffer.data[C$zui];C$zue.BeginContactFixtureParticle(this,C$zur)}throw new Error}},b2ParticleSystem.prototype.UpdateBodyContacts=function(){var C$zut=b2ParticleSystem.UpdateBodyContacts_s_aabb;var C$zue=new b2ParticleSystem.FixtureParticleSet;if(this.NotifyBodyContactListenerPreContact(C$zue),0<this.m_stuckThreshold){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;var C$zui=this.GetParticleCount();for(var C$zur=0;C$zur<C$zui;C$zur++)this.m_bodyContactCountBuffer.data[C$zur]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[C$zur]+1&&(this.m_consecutiveContactStepsBuffer.data[C$zur]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);this.ComputeAABB(C$zut);var C$zun=new b2ParticleSystem.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter());this.m_world.QueryAABB(C$zun,C$zut),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(C$zue)},b2ParticleSystem.prototype.Solve=function(C$zut){var C$zue=b2ParticleSystem.Solve_s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(C$zut),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<C$zut.particleIterations;this.m_iterationIndex++){++this.m_timestamp;var C$zui=C$zue.Copy(C$zut);if(C$zui.dt/=C$zut.particleIterations,C$zui.inv_dt*=C$zut.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&C$zuH.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(C$zui),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(C$zui),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(C$zui),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(C$zui),this.m_allGroupFlags&C$zuH.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(C$zui),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(C$zui),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(C$zui),this.SolvePressure(C$zui),this.SolveDamping(C$zui),this.m_allParticleFlags&b2ParticleSystem.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(C$zui),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_springParticle&&this.SolveSpring(C$zui),this.LimitVelocity(C$zui),this.m_allGroupFlags&C$zuH.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(C$zui),this.SolveCollision(C$zui),this.m_allGroupFlags&C$zuH.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(C$zui),this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_wallParticle&&this.SolveWall(),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$zur=0;C$zur<this.m_count;C$zur++)this.m_positionBuffer.data[C$zur].SelfMulAdd(C$zui.dt,this.m_velocityBuffer.data[C$zur])}},b2ParticleSystem.prototype.SolveCollision=function(C$zut){var C$zue=b2ParticleSystem.SolveCollision_s_aabb;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zui=this.m_positionBuffer.data;var C$zur=this.m_velocityBuffer.data;var C$zun=C$zue;C$zun.lowerBound.x=+C$zuB,C$zun.lowerBound.y=+C$zuB,C$zun.upperBound.x=-C$zuB,C$zun.upperBound.y=-C$zuB;for(var C$zua=0;C$zua<this.m_count;C$zua++){var C$zuo=C$zur[C$zua];var C$zus=C$zui[C$zua];var C$zuc=C$zus.x+C$zut.dt*C$zuo.x;C$zuo=C$zus.y+C$zut.dt*C$zuo.y;C$zun.lowerBound.x=C$zuD(C$zun.lowerBound.x,C$zuD(C$zus.x,C$zuc)),C$zun.lowerBound.y=C$zuD(C$zun.lowerBound.y,C$zuD(C$zus.y,C$zuo)),C$zun.upperBound.x=C$zuL(C$zun.upperBound.x,C$zuL(C$zus.x,C$zuc)),C$zun.upperBound.y=C$zuL(C$zun.upperBound.y,C$zuL(C$zus.y,C$zuo))}C$zue=new b2ParticleSystem.SolveCollisionCallback(this,C$zut);this.m_world.QueryAABB(C$zue,C$zun)},b2ParticleSystem.prototype.LimitVelocity=function(C$zut){if(!this.m_velocityBuffer.data)throw new Error;var C$zue=this.m_velocityBuffer.data;var C$zui=this.GetCriticalVelocitySquared(C$zut);for(var C$zur=0;C$zur<this.m_count;C$zur++){var C$zun=C$zue[C$zur];var C$zua=C$zuj.DotVV(C$zun,C$zun);C$zui<C$zua&&C$zun.SelfMul(C$zuX(C$zui/C$zua))}},b2ParticleSystem.prototype.SolveGravity=function(C$zut){if(!this.m_velocityBuffer.data)throw new Error;var C$zue=b2ParticleSystem.SolveGravity_s_gravity;var C$zui=this.m_velocityBuffer.data;var C$zur=C$zuj.MulSV(C$zut.dt*this.m_def.gravityScale,this.m_world.GetGravity(),C$zue);for(var C$zun=0;C$zun<this.m_count;C$zun++)C$zui[C$zun].SelfAdd(C$zur)},b2ParticleSystem.prototype.SolveBarrier=function(C$zuh){var C$zuu=b2ParticleSystem.SolveBarrier_s_aabb;var C$zu_=b2ParticleSystem.SolveBarrier_s_va;var C$zud=b2ParticleSystem.SolveBarrier_s_vb;var C$zuf=b2ParticleSystem.SolveBarrier_s_pba;var C$zup=b2ParticleSystem.SolveBarrier_s_vba;var C$zum=b2ParticleSystem.SolveBarrier_s_vc;var C$zuv=b2ParticleSystem.SolveBarrier_s_pca;var C$zuy=b2ParticleSystem.SolveBarrier_s_vca;var C$zug=b2ParticleSystem.SolveBarrier_s_qba;var C$zub=b2ParticleSystem.SolveBarrier_s_qca;var C$zuC=b2ParticleSystem.SolveBarrier_s_dv;var C$zux=b2ParticleSystem.SolveBarrier_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zuA=this.m_positionBuffer.data;var C$zuS=this.m_velocityBuffer.data;for(var C$zuT=0;C$zuT<this.m_count;C$zuT++)0!=(this.m_flagsBuffer.data[C$zuT]&b2ParticleSystem.k_barrierWallFlags)&&C$zuS[C$zuT].SetZero();var C$zuw=2.5*C$zuh.dt;var C$zuE=this.GetParticleMass();for(var C$zuP=0;C$zuP<this.m_pairBuffer.count;C$zuP++){var C$zut=this.m_pairBuffer.data[C$zuP];if(C$zut.flags&C$zuH.b2ParticleFlag.b2_barrierParticle){var C$zuM=C$zut.indexA;C$zut=C$zut.indexB;var C$zuR=C$zuA[C$zuM];var C$zuI=C$zuA[C$zut];var C$zuB=C$zuu;C$zuj.MinV(C$zuR,C$zuI,C$zuB.lowerBound),C$zuj.MaxV(C$zuR,C$zuI,C$zuB.upperBound);var C$zuD=this.m_groupBuffer[C$zuM];var C$zuL=this.m_groupBuffer[C$zut];var C$zuV=this.GetLinearVelocity(C$zuD,C$zuM,C$zuR,C$zu_);C$zuM=this.GetLinearVelocity(C$zuL,C$zut,C$zuI,C$zud);var C$zuO=C$zuj.SubVV(C$zuI,C$zuR,C$zuf);var C$zue=C$zuj.SubVV(C$zuM,C$zuV,C$zup);var C$zuF=this.GetInsideBoundsEnumerator(C$zuB);var C$zuN;for(;0<=(C$zuN=C$zuF.GetNext());){var C$zuk=C$zuA[C$zuN];var C$zui=this.m_groupBuffer[C$zuN];if(C$zuD!==C$zui&&C$zuL!==C$zui){var C$zuz=this.GetLinearVelocity(C$zui,C$zuN,C$zuk,C$zum);var C$zuG=C$zuj.SubVV(C$zuk,C$zuR,C$zuv);var C$zuU=C$zuj.SubVV(C$zuz,C$zuV,C$zuy);var C$zur=C$zuj.CrossVV(C$zue,C$zuU);var C$zun=C$zuj.CrossVV(C$zuO,C$zuU)-C$zuj.CrossVV(C$zuG,C$zue);var C$zua=C$zuj.CrossVV(C$zuO,C$zuG);var C$zuo=void 0,C$zus=void 0;var C$zuc=C$zug,C$zuW=C$zub;if(0===C$zur){if(0==C$zun)continue;if(!(0<=(C$zus=-C$zua/C$zun)&&C$zus<C$zuw))continue;if(C$zuj.AddVMulSV(C$zuO,C$zus,C$zue,C$zuc),C$zuj.AddVMulSV(C$zuG,C$zus,C$zuU,C$zuW),!(0<=(C$zuo=C$zuj.DotVV(C$zuc,C$zuW)/C$zuj.DotVV(C$zuc,C$zuc))&&C$zuo<=1))continue}else{C$zua=C$zun*C$zun-4*C$zua*C$zur;if(C$zua<0)continue;C$zua=C$zuX(C$zua);var C$zul=(-C$zun-C$zua)/(2*C$zur);C$zun=(-C$zun+C$zua)/(2*C$zur);if(C$zun<C$zul&&(C$zua=C$zul,C$zul=C$zun,C$zun=C$zua),C$zus=C$zul,C$zuj.AddVMulSV(C$zuO,C$zus,C$zue,C$zuc),C$zuj.AddVMulSV(C$zuG,C$zus,C$zuU,C$zuW),C$zuo=C$zuj.DotVV(C$zuc,C$zuW)/C$zuj.DotVV(C$zuc,C$zuc),!(0<=C$zus&&C$zus<C$zuw&&0<=C$zuo&&C$zuo<=1)){if(!(0<=(C$zus=C$zun)&&C$zus<C$zuw))continue;if(C$zuj.AddVMulSV(C$zuO,C$zus,C$zue,C$zuc),C$zuj.AddVMulSV(C$zuG,C$zus,C$zuU,C$zuW),!(0<=(C$zuo=C$zuj.DotVV(C$zuc,C$zuW)/C$zuj.DotVV(C$zuc,C$zuc))&&C$zuo<=1))continue}}C$zur=C$zuC;C$zur.x=C$zuV.x+C$zuo*C$zue.x-C$zuz.x,C$zur.y=C$zuV.y+C$zuo*C$zue.y-C$zuz.y;C$zua=C$zuj.MulSV(C$zuE,C$zur,C$zux);C$zui&&this.IsRigidGroup(C$zui)?(C$zul=C$zui.GetMass(),C$zun=C$zui.GetInertia(),0<C$zul&&C$zui.m_linearVelocity.SelfMulAdd(1/C$zul,C$zua),0<C$zun&&(C$zui.m_angularVelocity+=C$zuj.CrossVV(C$zuj.SubVV(C$zuk,C$zui.GetCenter(),C$zuj.s_t0),C$zua)/C$zun)):C$zuS[C$zuN].SelfAdd(C$zur),this.ParticleApplyForce(C$zuN,C$zua.SelfMul(-C$zuh.inv_dt))}}}}},b2ParticleSystem.prototype.SolveStaticPressure=function(C$zut){if(!this.m_flagsBuffer.data)throw new Error;this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);C$zut=this.GetCriticalPressure(C$zut);var C$zue=this.m_def.staticPressureStrength*C$zut;var C$zuh=.25*C$zut;var C$zuu=this.m_def.staticPressureRelaxation;for(var C$zui=0;C$zui<this.m_def.staticPressureIterations;C$zui++){for(var C$zur=0;C$zur<this.m_count;C$zur++)this.m_accumulationBuffer[C$zur]=0;for(var C$zun=0;C$zun<this.m_contactBuffer.count;C$zun++){var C$zua=this.m_contactBuffer.data[C$zun];var C$zuo,C$zus;C$zua.flags&C$zuH.b2ParticleFlag.b2_staticPressureParticle&&(C$zuo=C$zua.indexA,C$zus=C$zua.indexB,C$zuc=C$zua.weight,this.m_accumulationBuffer[C$zuo]+=C$zuc*this.m_staticPressureBuffer[C$zus],this.m_accumulationBuffer[C$zus]+=C$zuc*this.m_staticPressureBuffer[C$zuo])}for(C$zur=0;C$zur<this.m_count;C$zur++){var C$zuc=this.m_weightBuffer[C$zur];var C$zul;this.m_flagsBuffer.data[C$zur]&C$zuH.b2ParticleFlag.b2_staticPressureParticle?(C$zul=this.m_accumulationBuffer[C$zur],this.m_staticPressureBuffer[C$zur]=b2Clamp((C$zul+C$zue*(C$zuc-1))/(C$zuc+C$zuu),0,C$zuh)):this.m_staticPressureBuffer[C$zur]=0}}},b2ParticleSystem.prototype.ComputeWeight=function(){for(var C$zut=0;C$zut<this.m_count;C$zut++)this.m_weightBuffer[C$zut]=0;for(C$zut=0;C$zut<this.m_bodyContactBuffer.count;C$zut++){var C$zue=(C$zur=this.m_bodyContactBuffer.data[C$zut]).index;var C$zui=C$zur.weight;this.m_weightBuffer[C$zue]+=C$zui}for(C$zut=0;C$zut<this.m_contactBuffer.count;C$zut++){var C$zur;C$zue=(C$zur=this.m_contactBuffer.data[C$zut]).indexA;var C$zun=C$zur.indexB;C$zui=C$zur.weight;this.m_weightBuffer[C$zue]+=C$zui,this.m_weightBuffer[C$zun]+=C$zui}},b2ParticleSystem.prototype.SolvePressure=function(C$zuh){var C$zuu=b2ParticleSystem.SolvePressure_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zu_=this.m_positionBuffer.data;var C$zut=this.m_velocityBuffer.data;var C$zud=this.GetCriticalPressure(C$zuh);var C$zuf=this.m_def.pressureStrength*C$zud;var C$zup=.25*C$zud;for(var C$zue=0;C$zue<this.m_count;C$zue++){var C$zui=this.m_weightBuffer[C$zue];var C$zur=C$zuf*C$zuL(0,C$zui-1);this.m_accumulationBuffer[C$zue]=C$zuD(C$zur,C$zup)}if(this.m_allParticleFlags&b2ParticleSystem.k_noPressureFlags)for(C$zue=0;C$zue<this.m_count;C$zue++)this.m_flagsBuffer.data[C$zue]&b2ParticleSystem.k_noPressureFlags&&(this.m_accumulationBuffer[C$zue]=0);if(this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_staticPressureParticle)for(C$zue=0;C$zue<this.m_count;C$zue++)this.m_flagsBuffer.data[C$zue]&C$zuH.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[C$zue]+=this.m_staticPressureBuffer[C$zue]);var C$zum=C$zuh.dt/(this.m_def.density*this.m_particleDiameter);var C$zuv=this.GetParticleInvMass();for(var C$zun=0;C$zun<this.m_bodyContactBuffer.count;C$zun++){var C$zua=(C$zul=this.m_bodyContactBuffer.data[C$zun]).index;var C$zuo=C$zul.body;C$zui=C$zul.weight;var C$zuy=C$zul.mass;var C$zus=C$zul.normal;var C$zug=C$zu_[C$zua];C$zur=this.m_accumulationBuffer[C$zua]+C$zuf*C$zui;var C$zuc=C$zuj.MulSV(C$zum*C$zui*C$zuy*C$zur,C$zus,C$zuu);C$zut[C$zua].SelfMulSub(C$zuv,C$zuc),C$zuo.ApplyLinearImpulse(C$zuc,C$zug,!0)}for(C$zun=0;C$zun<this.m_contactBuffer.count;C$zun++){var C$zul;C$zua=(C$zul=this.m_contactBuffer.data[C$zun]).indexA;C$zuo=C$zul.indexB;C$zui=C$zul.weight;C$zus=C$zul.normal;C$zur=this.m_accumulationBuffer[C$zua]+this.m_accumulationBuffer[C$zuo];C$zuc=C$zuj.MulSV(C$zum*C$zui*C$zur,C$zus,C$zuu);C$zut[C$zua].SelfSub(C$zuc),C$zut[C$zuo].SelfAdd(C$zuc)}},b2ParticleSystem.prototype.SolveDamping=function(C$zuh){var C$zuu=b2ParticleSystem.SolveDamping_s_v;var C$zu_=b2ParticleSystem.SolveDamping_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zud=this.m_positionBuffer.data;var C$zut=this.m_velocityBuffer.data;var C$zuf=this.m_def.dampingStrength;var C$zup=1/this.GetCriticalVelocity(C$zuh);var C$zum=this.GetParticleInvMass();for(var C$zue=0;C$zue<this.m_bodyContactBuffer.count;C$zue++){var C$zui=(C$zuo=this.m_bodyContactBuffer.data[C$zue]).index;var C$zur=C$zuo.body;var C$zun=C$zuo.weight;var C$zuv=C$zuo.mass;var C$zua=C$zuo.normal;var C$zuy=C$zud[C$zui];var C$zug=C$zuj.SubVV(C$zur.GetLinearVelocityFromWorldPoint(C$zuy,C$zuj.s_t0),C$zut[C$zui],C$zuu);(C$zus=C$zuj.DotVV(C$zug,C$zua))<0&&(C$zuc=C$zuL(C$zuf*C$zun,C$zuD(-C$zup*C$zus,.5)),C$zul=C$zuj.MulSV(C$zuc*C$zuv*C$zus,C$zua,C$zu_),C$zut[C$zui].SelfMulAdd(C$zum,C$zul),C$zur.ApplyLinearImpulse(C$zul.SelfNeg(),C$zuy,!0))}for(C$zue=0;C$zue<this.m_contactBuffer.count;C$zue++){var C$zuo;C$zui=(C$zuo=this.m_contactBuffer.data[C$zue]).indexA;C$zur=C$zuo.indexB;C$zun=C$zuo.weight;C$zua=C$zuo.normal;C$zug=C$zuj.SubVV(C$zut[C$zur],C$zut[C$zui],C$zuu);var C$zus;var C$zuc,C$zul;(C$zus=C$zuj.DotVV(C$zug,C$zua))<0&&(C$zuc=C$zuL(C$zuf*C$zun,C$zuD(-C$zup*C$zus,.5)),C$zul=C$zuj.MulSV(C$zuc*C$zus,C$zua,C$zu_),C$zut[C$zui].SelfAdd(C$zul),C$zut[C$zur].SelfSub(C$zul))}},b2ParticleSystem.prototype.SolveRigidDamping=function(){var C$zuh=b2ParticleSystem.SolveRigidDamping_s_t0;var C$zuu=b2ParticleSystem.SolveRigidDamping_s_t1;var C$zu_=b2ParticleSystem.SolveRigidDamping_s_p;var C$zud=b2ParticleSystem.SolveRigidDamping_s_v;var C$zut=[0],C$zue=[0],C$zui=[0];var C$zuf=[0],C$zup=[0],C$zum=[0];if(!this.m_positionBuffer.data)throw new Error;var C$zuv=this.m_positionBuffer.data;var C$zuy=this.m_def.dampingStrength;for(var C$zur=0;C$zur<this.m_bodyContactBuffer.count;C$zur++){var C$zun=(C$zua=this.m_bodyContactBuffer.data[C$zur]).index;(C$zuc=this.m_groupBuffer[C$zun])&&this.IsRigidGroup(C$zuc)&&(C$zuo=C$zua.body,C$zus=C$zua.normal,C$zug=C$zua.weight,C$zul=C$zuv[C$zun],C$zuA=C$zuj.SubVV(C$zuo.GetLinearVelocityFromWorldPoint(C$zul,C$zuh),C$zuc.GetLinearVelocityFromWorldPoint(C$zul,C$zuu),C$zud),(C$zuS=C$zuj.DotVV(C$zuA,C$zus))<0&&(this.InitDampingParameterWithRigidGroupOrParticle(C$zut,C$zue,C$zui,!0,C$zuc,C$zun,C$zul,C$zus),this.InitDampingParameter(C$zuf,C$zup,C$zum,C$zuo.GetMass(),C$zuo.GetInertia()-C$zuo.GetMass()*C$zuo.GetLocalCenter().LengthSquared(),C$zuo.GetWorldCenter(),C$zul,C$zus),C$zuT=C$zuy*C$zuD(C$zug,1)*this.ComputeDampingImpulse(C$zut[0],C$zue[0],C$zui[0],C$zuf[0],C$zup[0],C$zum[0],C$zuS),this.ApplyDamping(C$zut[0],C$zue[0],C$zui[0],!0,C$zuc,C$zun,C$zuT,C$zus),C$zuo.ApplyLinearImpulse(C$zuj.MulSV(-C$zuT,C$zus,C$zuj.s_t0),C$zul,!0)))}for(C$zur=0;C$zur<this.m_contactBuffer.count;C$zur++){var C$zua;C$zun=(C$zua=this.m_contactBuffer.data[C$zur]).indexA;var C$zuo=C$zua.indexB;var C$zus=C$zua.normal;var C$zug=C$zua.weight;var C$zuc=this.m_groupBuffer[C$zun];var C$zub=this.m_groupBuffer[C$zuo];var C$zuC=this.IsRigidGroup(C$zuc);var C$zux=this.IsRigidGroup(C$zub);var C$zul,C$zuA,C$zuS,C$zuT;C$zuc!==C$zub&&(C$zuC||C$zux)&&(C$zul=C$zuj.MidVV(C$zuv[C$zun],C$zuv[C$zuo],C$zu_),C$zuA=C$zuj.SubVV(this.GetLinearVelocity(C$zub,C$zuo,C$zul,C$zuh),this.GetLinearVelocity(C$zuc,C$zun,C$zul,C$zuu),C$zud),(C$zuS=C$zuj.DotVV(C$zuA,C$zus))<0&&(this.InitDampingParameterWithRigidGroupOrParticle(C$zut,C$zue,C$zui,C$zuC,C$zuc,C$zun,C$zul,C$zus),this.InitDampingParameterWithRigidGroupOrParticle(C$zuf,C$zup,C$zum,C$zux,C$zub,C$zuo,C$zul,C$zus),C$zuT=C$zuy*C$zug*this.ComputeDampingImpulse(C$zut[0],C$zue[0],C$zui[0],C$zuf[0],C$zup[0],C$zum[0],C$zuS),this.ApplyDamping(C$zut[0],C$zue[0],C$zui[0],C$zuC,C$zuc,C$zun,C$zuT,C$zus),this.ApplyDamping(C$zuf[0],C$zup[0],C$zum[0],C$zux,C$zub,C$zuo,-C$zuT,C$zus)))}},b2ParticleSystem.prototype.SolveExtraDamping=function(){var C$zut=b2ParticleSystem.SolveExtraDamping_s_v;var C$zue=b2ParticleSystem.SolveExtraDamping_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zui=this.m_velocityBuffer.data;var C$zuh=this.m_positionBuffer.data;var C$zuu=this.GetParticleInvMass();for(var C$zur=0;C$zur<this.m_bodyContactBuffer.count;C$zur++){var C$zun=this.m_bodyContactBuffer.data[C$zur];var C$zua=C$zun.index;var C$zuo,C$zus,C$zuc,C$zul;this.m_flagsBuffer.data[C$zua]&b2ParticleSystem.k_extraDampingFlags&&(C$zuo=C$zun.body,C$zul=C$zun.mass,C$zun=C$zun.normal,C$zus=C$zuh[C$zua],C$zuc=C$zuj.SubVV(C$zuo.GetLinearVelocityFromWorldPoint(C$zus,C$zuj.s_t0),C$zui[C$zua],C$zut),(C$zuc=C$zuj.DotVV(C$zuc,C$zun))<0&&(C$zul=C$zuj.MulSV(.5*C$zul*C$zuc,C$zun,C$zue),C$zui[C$zua].SelfMulAdd(C$zuu,C$zul),C$zuo.ApplyLinearImpulse(C$zul.SelfNeg(),C$zus,!0)))}},b2ParticleSystem.prototype.SolveWall=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zut=this.m_velocityBuffer.data;for(var C$zue=0;C$zue<this.m_count;C$zue++)this.m_flagsBuffer.data[C$zue]&C$zuH.b2ParticleFlag.b2_wallParticle&&C$zut[C$zue].SetZero()},b2ParticleSystem.prototype.SolveRigid=function(C$zut){var C$zue=b2ParticleSystem.SolveRigid_s_position;var C$zui=b2ParticleSystem.SolveRigid_s_rotation;var C$zur=b2ParticleSystem.SolveRigid_s_transform;var C$zun=b2ParticleSystem.SolveRigid_s_velocityTransform;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zuh=this.m_positionBuffer.data;var C$zuu=this.m_velocityBuffer.data;for(var C$zua=this.m_groupList;C$zua;C$zua=C$zua.GetNext())if(C$zua.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_rigidParticleGroup){C$zua.UpdateStatistics();var C$zuo=C$zui;C$zuo.SetAngle(C$zut.dt*C$zua.m_angularVelocity);var C$zu_=C$zuj.AddVV(C$zua.m_center,C$zuj.SubVV(C$zuj.MulSV(C$zut.dt,C$zua.m_linearVelocity,C$zuj.s_t0),C$zuR.MulRV(C$zuo,C$zua.m_center,C$zuj.s_t1),C$zuj.s_t0),C$zue);var C$zus=C$zur;C$zus.SetPositionRotation(C$zu_,C$zuo),C$zuI.MulXX(C$zus,C$zua.m_transform,C$zua.m_transform);var C$zuc=C$zun;C$zuc.p.x=C$zut.inv_dt*C$zus.p.x,C$zuc.p.y=C$zut.inv_dt*C$zus.p.y,C$zuc.q.s=C$zut.inv_dt*C$zus.q.s,C$zuc.q.c=C$zut.inv_dt*(C$zus.q.c-1);for(var C$zul=C$zua.m_firstIndex;C$zul<C$zua.m_lastIndex;C$zul++)C$zuI.MulXV(C$zuc,C$zuh[C$zul],C$zuu[C$zul])}},b2ParticleSystem.prototype.SolveElastic=function(C$zuh){var C$zuu=b2ParticleSystem.SolveElastic_s_pa;var C$zu_=b2ParticleSystem.SolveElastic_s_pb;var C$zud=b2ParticleSystem.SolveElastic_s_pc;var C$zuf=b2ParticleSystem.SolveElastic_s_r;var C$zut=b2ParticleSystem.SolveElastic_s_t0;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zup=this.m_positionBuffer.data;var C$zum=this.m_velocityBuffer.data;var C$zuv=C$zuh.inv_dt*this.m_def.elasticStrength;for(var C$zuy=0;C$zuy<this.m_triadBuffer.count;C$zuy++){var C$zue=this.m_triadBuffer.data[C$zuy];var C$zug,C$zub,C$zuC,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul;C$zue.flags&C$zuH.b2ParticleFlag.b2_elasticParticle&&(C$zua=C$zue.indexA,C$zuo=C$zue.indexB,C$zus=C$zue.indexC,C$zug=C$zue.pa,C$zub=C$zue.pb,C$zuC=C$zue.pc,C$zui=C$zuu.Copy(C$zup[C$zua]),C$zur=C$zu_.Copy(C$zup[C$zuo]),C$zun=C$zud.Copy(C$zup[C$zus]),C$zua=C$zum[C$zua],C$zuo=C$zum[C$zuo],C$zus=C$zum[C$zus],C$zui.SelfMulAdd(C$zuh.dt,C$zua),C$zur.SelfMulAdd(C$zuh.dt,C$zuo),C$zun.SelfMulAdd(C$zuh.dt,C$zus),C$zuc=(C$zui.x+C$zur.x+C$zun.x)/3,C$zul=(C$zui.y+C$zur.y+C$zun.y)/3,C$zui.x-=C$zuc,C$zui.y-=C$zul,C$zur.x-=C$zuc,C$zur.y-=C$zul,C$zun.x-=C$zuc,C$zun.y-=C$zul,(C$zuc=C$zuf).s=C$zuj.CrossVV(C$zug,C$zui)+C$zuj.CrossVV(C$zub,C$zur)+C$zuj.CrossVV(C$zuC,C$zun),C$zuc.c=C$zuj.DotVV(C$zug,C$zui)+C$zuj.DotVV(C$zub,C$zur)+C$zuj.DotVV(C$zuC,C$zun),C$zul=b2InvSqrt(C$zuc.s*C$zuc.s+C$zuc.c*C$zuc.c),isFinite(C$zul)||(C$zul=198177537e11),C$zuc.s*=C$zul,C$zuc.c*=C$zul,C$zul=C$zuv*C$zue.strength,C$zuR.MulRV(C$zuc,C$zug,C$zut),C$zuj.SubVV(C$zut,C$zui,C$zut),C$zuj.MulSV(C$zul,C$zut,C$zut),C$zua.SelfAdd(C$zut),C$zuR.MulRV(C$zuc,C$zub,C$zut),C$zuj.SubVV(C$zut,C$zur,C$zut),C$zuj.MulSV(C$zul,C$zut,C$zut),C$zuo.SelfAdd(C$zut),C$zuR.MulRV(C$zuc,C$zuC,C$zut),C$zuj.SubVV(C$zut,C$zun,C$zut),C$zuj.MulSV(C$zul,C$zut,C$zut),C$zus.SelfAdd(C$zut))}},b2ParticleSystem.prototype.SolveSpring=function(C$zut){var C$zuh=b2ParticleSystem.SolveSpring_s_pa;var C$zuu=b2ParticleSystem.SolveSpring_s_pb;var C$zu_=b2ParticleSystem.SolveSpring_s_d;var C$zud=b2ParticleSystem.SolveSpring_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zue=this.m_positionBuffer.data;var C$zui=this.m_velocityBuffer.data;var C$zuf=C$zut.inv_dt*this.m_def.springStrength;for(var C$zur=0;C$zur<this.m_pairBuffer.count;C$zur++){var C$zun=this.m_pairBuffer.data[C$zur];var C$zua,C$zuo,C$zus,C$zuc,C$zul;C$zun.flags&C$zuH.b2ParticleFlag.b2_springParticle&&(C$zua=C$zun.indexA,C$zuo=C$zun.indexB,C$zuc=C$zuh.Copy(C$zue[C$zua]),C$zus=C$zuu.Copy(C$zue[C$zuo]),C$zua=C$zui[C$zua],C$zuo=C$zui[C$zuo],C$zuc.SelfMulAdd(C$zut.dt,C$zua),C$zus.SelfMulAdd(C$zut.dt,C$zuo),C$zus=C$zuj.SubVV(C$zus,C$zuc,C$zu_),C$zuc=C$zun.distance,C$zul=C$zus.Length(),C$zun=C$zuf*C$zun.strength,C$zun=C$zuj.MulSV(C$zun*(C$zuc-C$zul)/C$zul,C$zus,C$zud),C$zua.SelfSub(C$zun),C$zuo.SelfAdd(C$zun))}},b2ParticleSystem.prototype.SolveTensile=function(C$zut){var C$zuh=b2ParticleSystem.SolveTensile_s_weightedNormal;var C$zuu=b2ParticleSystem.SolveTensile_s_s;var C$zu_=b2ParticleSystem.SolveTensile_s_f;if(!this.m_velocityBuffer.data)throw new Error;var C$zud=this.m_velocityBuffer.data;for(var C$zue=0;C$zue<this.m_count;C$zue++)this.m_accumulation2Buffer[C$zue]=new C$zuj,this.m_accumulation2Buffer[C$zue].SetZero();for(var C$zui=0;C$zui<this.m_contactBuffer.count;C$zui++){var C$zuf;(C$zur=this.m_contactBuffer.data[C$zui]).flags&C$zuH.b2ParticleFlag.b2_tensileParticle&&(C$zun=C$zur.indexA,C$zua=C$zur.indexB,C$zuo=C$zur.weight,C$zus=C$zur.normal,C$zuf=C$zuj.MulSV((1-C$zuo)*C$zuo,C$zus,C$zuh),this.m_accumulation2Buffer[C$zun].SelfSub(C$zuf),this.m_accumulation2Buffer[C$zua].SelfAdd(C$zuf))}C$zut=this.GetCriticalVelocity(C$zut);var C$zup=this.m_def.surfaceTensionPressureStrength*C$zut;var C$zum=this.m_def.surfaceTensionNormalStrength*C$zut;var C$zuv=.5*C$zut;for(C$zui=0;C$zui<this.m_contactBuffer.count;C$zui++){var C$zur;var C$zun,C$zua,C$zuo,C$zus,C$zuc,C$zul;(C$zur=this.m_contactBuffer.data[C$zui]).flags&C$zuH.b2ParticleFlag.b2_tensileParticle&&(C$zun=C$zur.indexA,C$zua=C$zur.indexB,C$zuo=C$zur.weight,C$zus=C$zur.normal,C$zuc=this.m_weightBuffer[C$zun]+this.m_weightBuffer[C$zua],C$zul=C$zuj.SubVV(this.m_accumulation2Buffer[C$zua],this.m_accumulation2Buffer[C$zun],C$zuu),C$zuc=C$zuD(C$zup*(C$zuc-2)+C$zum*C$zuj.DotVV(C$zul,C$zus),C$zuv)*C$zuo,C$zul=C$zuj.MulSV(C$zuc,C$zus,C$zu_),C$zud[C$zun].SelfSub(C$zul),C$zud[C$zua].SelfAdd(C$zul))}},b2ParticleSystem.prototype.SolveViscous=function(){var C$zut=b2ParticleSystem.SolveViscous_s_v;var C$zuh=b2ParticleSystem.SolveViscous_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zuu=this.m_positionBuffer.data;var C$zue=this.m_velocityBuffer.data;var C$zu_=this.m_def.viscousStrength;var C$zud=this.GetParticleInvMass();for(var C$zui=0;C$zui<this.m_bodyContactBuffer.count;C$zui++){var C$zur=(C$zua=this.m_bodyContactBuffer.data[C$zui]).index;var C$zuf,C$zun;this.m_flagsBuffer.data[C$zur]&C$zuH.b2ParticleFlag.b2_viscousParticle&&(C$zuo=C$zua.body,C$zus=C$zua.weight,C$zuf=C$zua.mass,C$zun=C$zuu[C$zur],C$zuc=C$zuj.SubVV(C$zuo.GetLinearVelocityFromWorldPoint(C$zun,C$zuj.s_t0),C$zue[C$zur],C$zut),C$zul=C$zuj.MulSV(C$zu_*C$zuf*C$zus,C$zuc,C$zuh),C$zue[C$zur].SelfMulAdd(C$zud,C$zul),C$zuo.ApplyLinearImpulse(C$zul.SelfNeg(),C$zun,!0))}for(C$zui=0;C$zui<this.m_contactBuffer.count;C$zui++){var C$zua;var C$zuo,C$zus,C$zuc,C$zul;(C$zua=this.m_contactBuffer.data[C$zui]).flags&C$zuH.b2ParticleFlag.b2_viscousParticle&&(C$zur=C$zua.indexA,C$zuo=C$zua.indexB,C$zus=C$zua.weight,C$zuc=C$zuj.SubVV(C$zue[C$zuo],C$zue[C$zur],C$zut),C$zul=C$zuj.MulSV(C$zu_*C$zus,C$zuc,C$zuh),C$zue[C$zur].SelfAdd(C$zul),C$zue[C$zuo].SelfSub(C$zul))}},b2ParticleSystem.prototype.SolveRepulsive=function(C$zut){var C$zue=b2ParticleSystem.SolveRepulsive_s_f;if(!this.m_velocityBuffer.data)throw new Error;var C$zui=this.m_velocityBuffer.data;var C$zur=this.m_def.repulsiveStrength*this.GetCriticalVelocity(C$zut);for(var C$zun=0;C$zun<this.m_contactBuffer.count;C$zun++){var C$zua=this.m_contactBuffer.data[C$zun];var C$zuo,C$zus,C$zuc;C$zua.flags&C$zuH.b2ParticleFlag.b2_repulsiveParticle&&(C$zuo=C$zua.indexA,C$zus=C$zua.indexB,this.m_groupBuffer[C$zuo]!==this.m_groupBuffer[C$zus]&&(C$zuc=C$zua.weight,C$zua=C$zua.normal,C$zuc=C$zuj.MulSV(C$zur*C$zuc,C$zua,C$zue),C$zui[C$zuo].SelfSub(C$zuc),C$zui[C$zus].SelfAdd(C$zuc)))}},b2ParticleSystem.prototype.SolvePowder=function(C$zuh){var C$zut=b2ParticleSystem.SolvePowder_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zuu=this.m_positionBuffer.data;var C$zue=this.m_velocityBuffer.data;var C$zui=this.m_def.powderStrength*this.GetCriticalVelocity(C$zuh);var C$zu_=this.GetParticleInvMass();for(var C$zur=0;C$zur<this.m_bodyContactBuffer.count;C$zur++){var C$zun=(C$zua=this.m_bodyContactBuffer.data[C$zur]).index;var C$zud,C$zuf;this.m_flagsBuffer.data[C$zun]&C$zuH.b2ParticleFlag.b2_powderParticle&&.25<(C$zuo=C$zua.weight)&&(C$zus=C$zua.body,C$zud=C$zua.mass,C$zuf=C$zuu[C$zun],C$zuc=C$zua.normal,C$zul=C$zuj.MulSV(C$zui*C$zud*(C$zuo-.25),C$zuc,C$zut),C$zue[C$zun].SelfMulSub(C$zu_,C$zul),C$zus.ApplyLinearImpulse(C$zul,C$zuf,!0))}for(C$zur=0;C$zur<this.m_contactBuffer.count;C$zur++){var C$zua;var C$zuo,C$zus,C$zuc,C$zul;(C$zua=this.m_contactBuffer.data[C$zur]).flags&C$zuH.b2ParticleFlag.b2_powderParticle&&.25<(C$zuo=C$zua.weight)&&(C$zun=C$zua.indexA,C$zus=C$zua.indexB,C$zuc=C$zua.normal,C$zul=C$zuj.MulSV(C$zui*(C$zuo-.25),C$zuc,C$zut),C$zue[C$zun].SelfSub(C$zul),C$zue[C$zus].SelfAdd(C$zul))}},b2ParticleSystem.prototype.SolveSolid=function(C$zut){var C$zue=b2ParticleSystem.SolveSolid_s_f;if(!this.m_velocityBuffer.data)throw new Error;var C$zui=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer);var C$zur=C$zut.inv_dt*this.m_def.ejectionStrength;for(var C$zun=0;C$zun<this.m_contactBuffer.count;C$zun++){var C$zua=this.m_contactBuffer.data[C$zun];var C$zuo=C$zua.indexA;var C$zus=C$zua.indexB;var C$zuc,C$zul;this.m_groupBuffer[C$zuo]!==this.m_groupBuffer[C$zus]&&(C$zuc=C$zua.weight,C$zua=C$zua.normal,C$zul=this.m_depthBuffer[C$zuo]+this.m_depthBuffer[C$zus],C$zul=C$zuj.MulSV(C$zur*C$zul*C$zuc,C$zua,C$zue),C$zui[C$zuo].SelfSub(C$zul),C$zui[C$zus].SelfAdd(C$zul))}},b2ParticleSystem.prototype.SolveForce=function(C$zut){if(!this.m_velocityBuffer.data)throw new Error;var C$zue=this.m_velocityBuffer.data;var C$zui=C$zut.dt*this.GetParticleInvMass();for(var C$zur=0;C$zur<this.m_count;C$zur++)C$zue[C$zur].SelfMulAdd(C$zui,this.m_forceBuffer[C$zur]);this.m_hasForce=!1},b2ParticleSystem.prototype.SolveColorMixing=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_colorBuffer.data)throw new Error;var C$zut=.5*this.m_def.colorMixingStrength;if(C$zut)for(var C$zue=0;C$zue<this.m_contactBuffer.count;C$zue++){var C$zui=this.m_contactBuffer.data[C$zue];var C$zur=C$zui.indexA;C$zui=C$zui.indexB;this.m_flagsBuffer.data[C$zur]&this.m_flagsBuffer.data[C$zui]&C$zuH.b2ParticleFlag.b2_colorMixingParticle&&(C$zur=this.m_colorBuffer.data[C$zur],C$zui=this.m_colorBuffer.data[C$zui],C$zud.MixColors(C$zur,C$zui,C$zut))}},b2ParticleSystem.prototype.SolveZombie=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$zut=0;var C$zue=[];for(var C$zui=0;C$zui<this.m_count;C$zui++)C$zue[C$zui]=-1;var C$zuh=0;for(C$zui=0;C$zui<this.m_count;C$zui++){var C$zuu=this.m_flagsBuffer.data[C$zui];var C$zu_,C$zur;C$zuu&C$zuH.b2ParticleFlag.b2_zombieParticle?(C$zu_=this.m_world.m_destructionListener,C$zuu&C$zuH.b2ParticleFlag.b2_destructionListenerParticle&&C$zu_&&C$zu_.SayGoodbyeParticle(this,C$zui),this.m_handleIndexBuffer.data&&(C$zur=this.m_handleIndexBuffer.data[C$zui])&&(C$zur.SetIndex(-1),this.m_handleIndexBuffer.data[C$zui]=null),C$zue[C$zui]=-1):(C$zui!==(C$zue[C$zui]=C$zut)&&(this.m_handleIndexBuffer.data&&((C$zur=this.m_handleIndexBuffer.data[C$zui])&&C$zur.SetIndex(C$zut),this.m_handleIndexBuffer.data[C$zut]=C$zur),this.m_flagsBuffer.data[C$zut]=this.m_flagsBuffer.data[C$zui],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$zut]=this.m_lastBodyContactStepBuffer.data[C$zui]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$zut]=this.m_bodyContactCountBuffer.data[C$zui]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$zut]=this.m_consecutiveContactStepsBuffer.data[C$zui]),this.m_positionBuffer.data[C$zut].Copy(this.m_positionBuffer.data[C$zui]),this.m_velocityBuffer.data[C$zut].Copy(this.m_velocityBuffer.data[C$zui]),this.m_groupBuffer[C$zut]=this.m_groupBuffer[C$zui],this.m_hasForce&&this.m_forceBuffer[C$zut].Copy(this.m_forceBuffer[C$zui]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$zut]=this.m_staticPressureBuffer[C$zui]),this.m_depthBuffer&&(this.m_depthBuffer[C$zut]=this.m_depthBuffer[C$zui]),this.m_colorBuffer.data&&this.m_colorBuffer.data[C$zut].Copy(this.m_colorBuffer.data[C$zui]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[C$zut]=this.m_userDataBuffer.data[C$zui]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[C$zut]=this.m_expirationTimeBuffer.data[C$zui])),C$zut++,C$zuh|=C$zuu)}var C$zud=function(C$zut){return C$zut.index<0},C$zuf=function(C$zut){return C$zut.indexA<0||C$zut.indexB<0},C$zup=function(C$zut){return C$zut.index<0},C$zum=function(C$zut){return C$zut.indexA<0||C$zut.indexB<0},C$zuv=function(C$zut){return C$zut.indexA<0||C$zut.indexB<0||C$zut.indexC<0};for(var C$zun=0;C$zun<this.m_proxyBuffer.count;C$zun++){var C$zuy=this.m_proxyBuffer.data[C$zun];C$zuy.index=C$zue[C$zuy.index]}this.m_proxyBuffer.RemoveIf(C$zud);for(C$zun=0;C$zun<this.m_contactBuffer.count;C$zun++)(C$zua=this.m_contactBuffer.data[C$zun]).indexA=C$zue[C$zua.indexA],C$zua.indexB=C$zue[C$zua.indexB];this.m_contactBuffer.RemoveIf(C$zuf);for(C$zun=0;C$zun<this.m_bodyContactBuffer.count;C$zun++){var C$zua;(C$zua=this.m_bodyContactBuffer.data[C$zun]).index=C$zue[C$zua.index]}this.m_bodyContactBuffer.RemoveIf(C$zup);for(C$zun=0;C$zun<this.m_pairBuffer.count;C$zun++){var C$zuo=this.m_pairBuffer.data[C$zun];C$zuo.indexA=C$zue[C$zuo.indexA],C$zuo.indexB=C$zue[C$zuo.indexB]}this.m_pairBuffer.RemoveIf(C$zum);for(C$zun=0;C$zun<this.m_triadBuffer.count;C$zun++){var C$zus=this.m_triadBuffer.data[C$zun];C$zus.indexA=C$zue[C$zus.indexA],C$zus.indexB=C$zue[C$zus.indexB],C$zus.indexC=C$zue[C$zus.indexC]}if(this.m_triadBuffer.RemoveIf(C$zuv),this.m_indexByExpirationTimeBuffer.data){var C$zug=0;for(var C$zub=0;C$zub<this.m_count;C$zub++){var C$zuC=C$zue[this.m_indexByExpirationTimeBuffer.data[C$zub]];-1!==C$zuC&&(this.m_indexByExpirationTimeBuffer.data[C$zug++]=C$zuC)}}for(var C$zuc=this.m_groupList;C$zuc;C$zuc=C$zuc.GetNext()){var C$zul=C$zut;var C$zux=0;var C$zuA=!1;for(C$zui=C$zuc.m_firstIndex;C$zui<C$zuc.m_lastIndex;C$zui++){var C$zuS=C$zue[C$zui];0<=C$zuS?(C$zul=C$zuD(C$zul,C$zuS),C$zux=C$zuL(C$zux,C$zuS+1)):C$zuA=!0}C$zul<C$zux?(C$zuc.m_firstIndex=C$zul,C$zuc.m_lastIndex=C$zux,C$zuA&&C$zuc.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(C$zuc,C$zuc.m_groupFlags|C$zuH.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(C$zuc.m_firstIndex=0,C$zuc.m_lastIndex=0,C$zuc.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(C$zuc,C$zuc.m_groupFlags|C$zuH.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=C$zut,this.m_allParticleFlags=C$zuh,this.m_needsUpdateAllParticleFlags=!1;for(C$zuc=this.m_groupList;C$zuc;){var C$zuT=C$zuc.GetNext();C$zuc.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(C$zuc),C$zuc=C$zuT}},b2ParticleSystem.prototype.SolveLifetimes=function(C$zut){if(!this.m_expirationTimeBuffer.data)throw new Error;if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_timeElapsed=this.LifetimeToExpirationTime(C$zut.dt);var C$zue=this.GetQuantizedTimeElapsed();var C$zur=this.m_expirationTimeBuffer.data;var C$zui=this.m_indexByExpirationTimeBuffer.data;C$zut=this.GetParticleCount();this.m_expirationTimeBufferRequiresSorting&&(std_sort(C$zui,0,C$zut,function(C$zut,C$zue){C$zut=C$zur[C$zut];C$zue=C$zur[C$zue];var C$zui=C$zut<=0;return C$zui==C$zue<=0?C$zue<C$zut:C$zui}),this.m_expirationTimeBufferRequiresSorting=!1);for(var C$zun=C$zut-1;0<=C$zun;--C$zun){var C$zua=C$zui[C$zun];var C$zuo=C$zur[C$zua];if(C$zue<C$zuo||C$zuo<=0)break;this.DestroyParticle(C$zua)}},b2ParticleSystem.prototype.RotateBuffer=function(C$zue,C$zui,C$zur){if(C$zue!==C$zui&&C$zui!==C$zur){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;if(std_rotate(this.m_flagsBuffer.data,C$zue,C$zui,C$zur),this.m_lastBodyContactStepBuffer.data&&std_rotate(this.m_lastBodyContactStepBuffer.data,C$zue,C$zui,C$zur),this.m_bodyContactCountBuffer.data&&std_rotate(this.m_bodyContactCountBuffer.data,C$zue,C$zui,C$zur),this.m_consecutiveContactStepsBuffer.data&&std_rotate(this.m_consecutiveContactStepsBuffer.data,C$zue,C$zui,C$zur),std_rotate(this.m_positionBuffer.data,C$zue,C$zui,C$zur),std_rotate(this.m_velocityBuffer.data,C$zue,C$zui,C$zur),std_rotate(this.m_groupBuffer,C$zue,C$zui,C$zur),this.m_hasForce&&std_rotate(this.m_forceBuffer,C$zue,C$zui,C$zur),this.m_staticPressureBuffer&&std_rotate(this.m_staticPressureBuffer,C$zue,C$zui,C$zur),this.m_depthBuffer&&std_rotate(this.m_depthBuffer,C$zue,C$zui,C$zur),this.m_colorBuffer.data&&std_rotate(this.m_colorBuffer.data,C$zue,C$zui,C$zur),this.m_userDataBuffer.data&&std_rotate(this.m_userDataBuffer.data,C$zue,C$zui,C$zur),this.m_handleIndexBuffer.data){std_rotate(this.m_handleIndexBuffer.data,C$zue,C$zui,C$zur);for(var C$zut=C$zue;C$zut<C$zur;++C$zut){var C$zul=this.m_handleIndexBuffer.data[C$zut];C$zul&&C$zul.SetIndex(newIndices(C$zul.GetIndex()))}}if(this.m_expirationTimeBuffer.data){std_rotate(this.m_expirationTimeBuffer.data,C$zue,C$zui,C$zur);var C$zuh=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;var C$zuu=this.m_indexByExpirationTimeBuffer.data;for(C$zut=0;C$zut<C$zuh;++C$zut)C$zuu[C$zut]=newIndices(C$zuu[C$zut])}for(var C$zun=0;C$zun<this.m_proxyBuffer.count;C$zun++){var C$zu_=this.m_proxyBuffer.data[C$zun];C$zu_.index=newIndices(C$zu_.index)}for(C$zun=0;C$zun<this.m_contactBuffer.count;C$zun++)(C$zua=this.m_contactBuffer.data[C$zun]).indexA=newIndices(C$zua.indexA),C$zua.indexB=newIndices(C$zua.indexB);for(C$zun=0;C$zun<this.m_bodyContactBuffer.count;C$zun++){var C$zua;(C$zua=this.m_bodyContactBuffer.data[C$zun]).index=newIndices(C$zua.index)}for(C$zun=0;C$zun<this.m_pairBuffer.count;C$zun++){var C$zuo=this.m_pairBuffer.data[C$zun];C$zuo.indexA=newIndices(C$zuo.indexA),C$zuo.indexB=newIndices(C$zuo.indexB)}for(C$zun=0;C$zun<this.m_triadBuffer.count;C$zun++){var C$zus=this.m_triadBuffer.data[C$zun];C$zus.indexA=newIndices(C$zus.indexA),C$zus.indexB=newIndices(C$zus.indexB),C$zus.indexC=newIndices(C$zus.indexC)}for(var C$zuc=this.m_groupList;C$zuc;C$zuc=C$zuc.GetNext())C$zuc.m_firstIndex=newIndices(C$zuc.m_firstIndex),C$zuc.m_lastIndex=newIndices(C$zuc.m_lastIndex-1)+1}function newIndices(C$zut){return C$zut<C$zue?C$zut:C$zut<C$zui?C$zut+C$zur-C$zui:C$zut<C$zur?C$zut+C$zue-C$zui:C$zut}},b2ParticleSystem.prototype.GetCriticalVelocity=function(C$zut){return this.m_particleDiameter*C$zut.inv_dt},b2ParticleSystem.prototype.GetCriticalVelocitySquared=function(C$zut){C$zut=this.GetCriticalVelocity(C$zut);return C$zut*C$zut},b2ParticleSystem.prototype.GetCriticalPressure=function(C$zut){return this.m_def.density*this.GetCriticalVelocitySquared(C$zut)},b2ParticleSystem.prototype.GetParticleStride=function(){return.75*this.m_particleDiameter},b2ParticleSystem.prototype.GetParticleMass=function(){var C$zut=this.GetParticleStride();return this.m_def.density*C$zut*C$zut},b2ParticleSystem.prototype.GetParticleInvMass=function(){var C$zut=this.m_inverseDiameter*(1/.75);return this.m_inverseDensity*C$zut*C$zut},b2ParticleSystem.prototype.GetFixtureContactFilter=function(){return this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},b2ParticleSystem.prototype.GetParticleContactFilter=function(){return this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},b2ParticleSystem.prototype.GetFixtureContactListener=function(){return this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},b2ParticleSystem.prototype.GetParticleContactListener=function(){return this.m_allParticleFlags&C$zuH.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},b2ParticleSystem.prototype.SetUserOverridableBuffer=function(C$zut,C$zue,C$zui){C$zut.data=C$zue,C$zut.userSuppliedCapacity=C$zui},b2ParticleSystem.prototype.SetGroupFlags=function(C$zut,C$zue){var C$zui=C$zut.m_groupFlags;(C$zui^C$zue)&C$zuH.b2ParticleGroupFlag.b2_solidParticleGroup&&(C$zue|=C$zuH.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),C$zui&~C$zue&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&C$zue&&(C$zue&C$zuH.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=C$zue),C$zut.m_groupFlags=C$zue},b2ParticleSystem.BodyContactCompare=function(C$zut,C$zue){return C$zut.index===C$zue.index?C$zut.weight>C$zue.weight:C$zut.index<C$zue.index},b2ParticleSystem.prototype.RemoveSpuriousBodyContacts=function(){std_sort(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,b2ParticleSystem.BodyContactCompare);var C$zua=b2ParticleSystem.RemoveSpuriousBodyContacts_s_n;var C$zuo=b2ParticleSystem.RemoveSpuriousBodyContacts_s_pos;var C$zus=b2ParticleSystem.RemoveSpuriousBodyContacts_s_normal;var C$zuc=this;var C$zul=-1;var C$zuh=0;this.m_bodyContactBuffer.count=std_remove_if(this.m_bodyContactBuffer.data,function(C$zut){if(C$zut.index!==C$zul&&(C$zuh=0,C$zul=C$zut.index),3<C$zuh++)return!0;var C$zue=C$zua.Copy(C$zut.normal);if(C$zue.SelfMul(C$zuc.m_particleDiameter*(1-C$zut.weight)),!C$zuc.m_positionBuffer.data)throw new Error;var C$zui=C$zuj.AddVV(C$zuc.m_positionBuffer.data[C$zut.index],C$zue,C$zuo);if(C$zut.fixture.TestPoint(C$zui))return!1;var C$zur=C$zut.fixture.GetShape().GetChildCount();for(var C$zun=0;C$zun<C$zur;C$zun++)if(C$zut.fixture.ComputeDistance(C$zui,C$zus,C$zun)<.008)return!1;return!0},this.m_bodyContactBuffer.count)},b2ParticleSystem.prototype.DetectStuckParticle=function(C$zut){if(!(this.m_stuckThreshold<=0)){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;++this.m_bodyContactCountBuffer.data[C$zut],2===this.m_bodyContactCountBuffer.data[C$zut]&&(++this.m_consecutiveContactStepsBuffer.data[C$zut],this.m_consecutiveContactStepsBuffer.data[C$zut]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=C$zut)),this.m_lastBodyContactStepBuffer.data[C$zut]=this.m_timestamp}},b2ParticleSystem.prototype.ValidateParticleIndex=function(C$zut){return 0<=C$zut&&C$zut<this.GetParticleCount()&&-1!==C$zut},b2ParticleSystem.prototype.GetQuantizedTimeElapsed=function(){return Math.floor(this.m_timeElapsed/4294967296)},b2ParticleSystem.prototype.LifetimeToExpirationTime=function(C$zut){return this.m_timeElapsed+Math.floor(C$zut/this.m_def.lifetimeGranularity*4294967296)},b2ParticleSystem.prototype.ForceCanBeApplied=function(C$zut){return!(C$zut&C$zuH.b2ParticleFlag.b2_wallParticle)},b2ParticleSystem.prototype.PrepareForceBuffer=function(){if(!this.m_hasForce){for(var C$zut=0;C$zut<this.m_count;C$zut++)this.m_forceBuffer[C$zut].SetZero();this.m_hasForce=!0}},b2ParticleSystem.prototype.IsRigidGroup=function(C$zut){return null!==C$zut&&0!=(C$zut.m_groupFlags&C$zuH.b2ParticleGroupFlag.b2_rigidParticleGroup)},b2ParticleSystem.prototype.GetLinearVelocity=function(C$zut,C$zue,C$zui,C$zur){if(C$zut&&this.IsRigidGroup(C$zut))return C$zut.GetLinearVelocityFromWorldPoint(C$zui,C$zur);if(!this.m_velocityBuffer.data)throw new Error;return C$zur.Copy(this.m_velocityBuffer.data[C$zue])},b2ParticleSystem.prototype.InitDampingParameter=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){C$zut[0]=0<C$zur?1/C$zur:0,C$zue[0]=0<C$zun?1/C$zun:0,C$zui[0]=C$zuj.CrossVV(C$zuj.SubVV(C$zuo,C$zua,C$zuj.s_t0),C$zus)},b2ParticleSystem.prototype.InitDampingParameterWithRigidGroupOrParticle=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){if(C$zun&&C$zur)this.InitDampingParameter(C$zut,C$zue,C$zui,C$zun.GetMass(),C$zun.GetInertia(),C$zun.GetCenter(),C$zuo,C$zus);else{if(!this.m_flagsBuffer.data)throw new Error;C$zur=this.m_flagsBuffer.data[C$zua];this.InitDampingParameter(C$zut,C$zue,C$zui,C$zur&C$zuH.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,C$zuo,C$zuo,C$zus)}},b2ParticleSystem.prototype.ComputeDampingImpulse=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo){C$zut=C$zut+C$zue*C$zui*C$zui+C$zur+C$zun*C$zua*C$zua;return 0<C$zut?C$zuo/C$zut:0},b2ParticleSystem.prototype.ApplyDamping=function(C$zut,C$zue,C$zui,C$zur,C$zun,C$zua,C$zuo,C$zus){if(C$zun&&C$zur)C$zun.m_linearVelocity.SelfMulAdd(C$zuo*C$zut,C$zus),C$zun.m_angularVelocity+=C$zuo*C$zui*C$zue;else{if(!this.m_velocityBuffer.data)throw new Error;this.m_velocityBuffer.data[C$zua].SelfMulAdd(C$zuo*C$zut,C$zus)}},b2ParticleSystem.xTruncBits=12,b2ParticleSystem.yTruncBits=12,b2ParticleSystem.tagBits=32,b2ParticleSystem.yOffset=1<<b2ParticleSystem.yTruncBits-1,b2ParticleSystem.yShift=b2ParticleSystem.tagBits-b2ParticleSystem.yTruncBits,b2ParticleSystem.xShift=b2ParticleSystem.tagBits-b2ParticleSystem.yTruncBits-b2ParticleSystem.xTruncBits,b2ParticleSystem.xScale=1<<b2ParticleSystem.xShift,b2ParticleSystem.xOffset=b2ParticleSystem.xScale*(1<<b2ParticleSystem.xTruncBits-1),b2ParticleSystem.yMask=(1<<b2ParticleSystem.yTruncBits)-1<<b2ParticleSystem.yShift,b2ParticleSystem.xMask=~b2ParticleSystem.yMask,b2ParticleSystem.DestroyParticlesInShape_s_aabb=new C$zu_t,b2ParticleSystem.CreateParticleGroup_s_transform=new C$zuI,b2ParticleSystem.ComputeCollisionEnergy_s_v=new C$zuj,b2ParticleSystem.QueryShapeAABB_s_aabb=new C$zu_t,b2ParticleSystem.QueryPointAABB_s_aabb=new C$zu_t,b2ParticleSystem.RayCast_s_aabb=new C$zu_t,b2ParticleSystem.RayCast_s_p=new C$zuj,b2ParticleSystem.RayCast_s_v=new C$zuj,b2ParticleSystem.RayCast_s_n=new C$zuj,b2ParticleSystem.RayCast_s_point=new C$zuj,b2ParticleSystem.k_pairFlags=C$zuH.b2ParticleFlag.b2_springParticle,b2ParticleSystem.k_triadFlags=C$zuH.b2ParticleFlag.b2_elasticParticle,b2ParticleSystem.k_noPressureFlags=C$zuH.b2ParticleFlag.b2_powderParticle|C$zuH.b2ParticleFlag.b2_tensileParticle,b2ParticleSystem.k_extraDampingFlags=C$zuH.b2ParticleFlag.b2_staticPressureParticle,b2ParticleSystem.k_barrierWallFlags=C$zuH.b2ParticleFlag.b2_barrierParticle|C$zuH.b2ParticleFlag.b2_wallParticle,b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_edge=new C$zuEe,b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_d=new C$zuj,b2ParticleSystem.CreateParticlesStrokeShapeForGroup_s_p=new C$zuj,b2ParticleSystem.CreateParticlesFillShapeForGroup_s_aabb=new C$zu_t,b2ParticleSystem.CreateParticlesFillShapeForGroup_s_p=new C$zuj,b2ParticleSystem.UpdatePairsAndTriads_s_dab=new C$zuj,b2ParticleSystem.UpdatePairsAndTriads_s_dbc=new C$zuj,b2ParticleSystem.UpdatePairsAndTriads_s_dca=new C$zuj,b2ParticleSystem.AddContact_s_d=new C$zuj,b2ParticleSystem.UpdateBodyContacts_s_aabb=new C$zu_t,b2ParticleSystem.Solve_s_subStep=new C$zuar,b2ParticleSystem.SolveCollision_s_aabb=new C$zu_t,b2ParticleSystem.SolveGravity_s_gravity=new C$zuj,b2ParticleSystem.SolveBarrier_s_aabb=new C$zu_t,b2ParticleSystem.SolveBarrier_s_va=new C$zuj,b2ParticleSystem.SolveBarrier_s_vb=new C$zuj,b2ParticleSystem.SolveBarrier_s_pba=new C$zuj,b2ParticleSystem.SolveBarrier_s_vba=new C$zuj,b2ParticleSystem.SolveBarrier_s_vc=new C$zuj,b2ParticleSystem.SolveBarrier_s_pca=new C$zuj,b2ParticleSystem.SolveBarrier_s_vca=new C$zuj,b2ParticleSystem.SolveBarrier_s_qba=new C$zuj,b2ParticleSystem.SolveBarrier_s_qca=new C$zuj,b2ParticleSystem.SolveBarrier_s_dv=new C$zuj,b2ParticleSystem.SolveBarrier_s_f=new C$zuj,b2ParticleSystem.SolvePressure_s_f=new C$zuj,b2ParticleSystem.SolveDamping_s_v=new C$zuj,b2ParticleSystem.SolveDamping_s_f=new C$zuj,b2ParticleSystem.SolveRigidDamping_s_t0=new C$zuj,b2ParticleSystem.SolveRigidDamping_s_t1=new C$zuj,b2ParticleSystem.SolveRigidDamping_s_p=new C$zuj,b2ParticleSystem.SolveRigidDamping_s_v=new C$zuj,b2ParticleSystem.SolveExtraDamping_s_v=new C$zuj,b2ParticleSystem.SolveExtraDamping_s_f=new C$zuj,b2ParticleSystem.SolveRigid_s_position=new C$zuj,b2ParticleSystem.SolveRigid_s_rotation=new C$zuR,b2ParticleSystem.SolveRigid_s_transform=new C$zuI,b2ParticleSystem.SolveRigid_s_velocityTransform=new C$zuI,b2ParticleSystem.SolveElastic_s_pa=new C$zuj,b2ParticleSystem.SolveElastic_s_pb=new C$zuj,b2ParticleSystem.SolveElastic_s_pc=new C$zuj,b2ParticleSystem.SolveElastic_s_r=new C$zuR,b2ParticleSystem.SolveElastic_s_t0=new C$zuj,b2ParticleSystem.SolveSpring_s_pa=new C$zuj,b2ParticleSystem.SolveSpring_s_pb=new C$zuj,b2ParticleSystem.SolveSpring_s_d=new C$zuj,b2ParticleSystem.SolveSpring_s_f=new C$zuj,b2ParticleSystem.SolveTensile_s_weightedNormal=new C$zuj,b2ParticleSystem.SolveTensile_s_s=new C$zuj,b2ParticleSystem.SolveTensile_s_f=new C$zuj,b2ParticleSystem.SolveViscous_s_v=new C$zuj,b2ParticleSystem.SolveViscous_s_f=new C$zuj,b2ParticleSystem.SolveRepulsive_s_f=new C$zuj,b2ParticleSystem.SolvePowder_s_f=new C$zuj,b2ParticleSystem.SolveSolid_s_f=new C$zuj,b2ParticleSystem.RemoveSpuriousBodyContacts_s_n=new C$zuj,b2ParticleSystem.RemoveSpuriousBodyContacts_s_pos=new C$zuj,b2ParticleSystem.RemoveSpuriousBodyContacts_s_normal=new C$zuj,b2ParticleSystem),function(C$zu_){function Proxy(){this.index=-1,this.tag=0}function InsideBoundsEnumerator(C$zut,C$zue,C$zui,C$zur,C$zun){this.m_system=C$zut,this.m_xLower=(C$zue&C$zu_.xMask)>>>0,this.m_xUpper=(C$zui&C$zu_.xMask)>>>0,this.m_yLower=(C$zue&C$zu_.yMask)>>>0,this.m_yUpper=(C$zui&C$zu_.yMask)>>>0,this.m_first=C$zur,this.m_last=C$zun}function FixedSetAllocator(){}C$zu_.UserOverridableBuffer=function(){this.data=null,this.userSuppliedCapacity=0},Proxy.CompareProxyProxy=function(C$zut,C$zue){return C$zut.tag<C$zue.tag},Proxy.CompareTagProxy=function(C$zut,C$zue){return C$zut<C$zue.tag},Proxy.CompareProxyTag=function(C$zut,C$zue){return C$zut.tag<C$zue},C$zu_.Proxy=Proxy,InsideBoundsEnumerator.prototype.GetNext=function(){for(;this.m_first<this.m_last;){var C$zut=(this.m_system.m_proxyBuffer.data[this.m_first].tag&C$zu_.xMask)>>>0;if(C$zut>=this.m_xLower&&C$zut<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return-1},C$zu_.InsideBoundsEnumerator=InsideBoundsEnumerator,C$zu_.ParticleListNode=function(){this.next=null,this.count=0,this.index=0},FixedSetAllocator.prototype.Allocate=function(C$zut,C$zue){return C$zue},FixedSetAllocator.prototype.Clear=function(){},FixedSetAllocator.prototype.GetCount=function(){return 0},FixedSetAllocator.prototype.Invalidate=function(C$zut){},FixedSetAllocator.prototype.GetValidBuffer=function(){return[]},FixedSetAllocator.prototype.GetBuffer=function(){return[]},FixedSetAllocator.prototype.SetCount=function(C$zut){},C$zu_.FixedSetAllocator=FixedSetAllocator,C$zu_.FixtureParticle=function(C$zut,C$zue){this.second=-1,this.first=C$zut,this.second=C$zue};__extends(FixtureParticleSet,C$zue=C$zu_.FixedSetAllocator),FixtureParticleSet.prototype.Initialize=function(C$zut,C$zue){},FixtureParticleSet.prototype.Find=function(C$zut){return-1};var C$zut=FixtureParticleSet;function FixtureParticleSet(){return null!==C$zue&&C$zue.apply(this,arguments)||this}var C$zue;C$zu_.FixtureParticleSet=C$zut,C$zu_.ParticlePair=function(C$zut,C$zue){this.first=-1,this.second=-1,this.first=C$zut,this.second=C$zue};__extends(b2ParticlePairSet,C$zui=C$zu_.FixedSetAllocator),b2ParticlePairSet.prototype.Initialize=function(C$zut,C$zue){},b2ParticlePairSet.prototype.Find=function(C$zut){return-1};C$zut=b2ParticlePairSet;function b2ParticlePairSet(){return null!==C$zui&&C$zui.apply(this,arguments)||this}var C$zui;function ConnectionFilter(){}C$zu_.b2ParticlePairSet=C$zut,ConnectionFilter.prototype.IsNecessary=function(C$zut){return!0},ConnectionFilter.prototype.ShouldCreatePair=function(C$zut,C$zue){return!0},ConnectionFilter.prototype.ShouldCreateTriad=function(C$zut,C$zue,C$zui){return!0},C$zu_.ConnectionFilter=ConnectionFilter;__extends(DestroyParticlesInShapeCallback,C$zua=C$zuer),DestroyParticlesInShapeCallback.prototype.ReportFixture=function(C$zut){return!1},DestroyParticlesInShapeCallback.prototype.ReportParticle=function(C$zut,C$zue){if(C$zut!==this.m_system)return!1;if(!this.m_system.m_positionBuffer.data)throw new Error;return this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[C$zue])&&(this.m_system.DestroyParticle(C$zue,this.m_callDestructionListener),this.m_destroyed++),!0},DestroyParticlesInShapeCallback.prototype.Destroyed=function(){return this.m_destroyed};C$zut=DestroyParticlesInShapeCallback;function DestroyParticlesInShapeCallback(C$zut,C$zue,C$zui,C$zur){var C$zun=C$zua.call(this)||this;return C$zun.m_callDestructionListener=!1,C$zun.m_destroyed=0,C$zun.m_system=C$zut,C$zun.m_shape=C$zue,C$zun.m_xf=C$zui,C$zun.m_callDestructionListener=C$zur,C$zun.m_destroyed=0,C$zun}var C$zua;C$zu_.DestroyParticlesInShapeCallback=C$zut;__extends(JoinParticleGroupsFilter,C$zur=C$zu_.ConnectionFilter),JoinParticleGroupsFilter.prototype.ShouldCreatePair=function(C$zut,C$zue){return C$zut<this.m_threshold&&this.m_threshold<=C$zue||C$zue<this.m_threshold&&this.m_threshold<=C$zut},JoinParticleGroupsFilter.prototype.ShouldCreateTriad=function(C$zut,C$zue,C$zui){return(C$zut<this.m_threshold||C$zue<this.m_threshold||C$zui<this.m_threshold)&&(this.m_threshold<=C$zut||this.m_threshold<=C$zue||this.m_threshold<=C$zui)};C$zut=JoinParticleGroupsFilter;function JoinParticleGroupsFilter(C$zut){var C$zue=C$zur.call(this)||this;return C$zue.m_threshold=0,C$zue.m_threshold=C$zut,C$zue}var C$zur;C$zu_.JoinParticleGroupsFilter=C$zut;__extends(CompositeShape,C$zun=C$zuAe),CompositeShape.prototype.Clone=function(){throw new Error},CompositeShape.prototype.GetChildCount=function(){return 1},CompositeShape.prototype.TestPoint=function(C$zut,C$zue){for(var C$zui=0;C$zui<this.m_shapeCount;C$zui++)if(this.m_shapes[C$zui].TestPoint(C$zut,C$zue))return!0;return!1},CompositeShape.prototype.ComputeDistance=function(C$zut,C$zue,C$zui,C$zur){return 0},CompositeShape.prototype.RayCast=function(C$zut,C$zue,C$zui,C$zur){return!1},CompositeShape.prototype.ComputeAABB=function(C$zut,C$zue,C$zui){var C$zur=new C$zu_t;C$zut.lowerBound.x=+C$zuB,C$zut.lowerBound.y=+C$zuB,C$zut.upperBound.x=-C$zuB,C$zut.upperBound.y=-C$zuB;for(var C$zun=0;C$zun<this.m_shapeCount;C$zun++){var C$zua=this.m_shapes[C$zun].GetChildCount();for(var C$zuo=0;C$zuo<C$zua;C$zuo++){var C$zus=C$zur;this.m_shapes[C$zun].ComputeAABB(C$zus,C$zue,C$zuo),C$zut.Combine1(C$zus)}}},CompositeShape.prototype.ComputeMass=function(C$zut,C$zue){},CompositeShape.prototype.SetupDistanceProxy=function(C$zut,C$zue){},CompositeShape.prototype.ComputeSubmergedArea=function(C$zut,C$zue,C$zui,C$zur){return 0},CompositeShape.prototype.Dump=function(C$zut){};C$zut=CompositeShape;function CompositeShape(C$zut,C$zue){void 0===C$zue&&(C$zue=C$zut.length);var C$zui=C$zun.call(this,C$zuH.b2ShapeType.e_unknown,0)||this;return C$zui.m_shapeCount=0,C$zui.m_shapes=C$zut,C$zui.m_shapeCount=C$zue,C$zui}var C$zun;C$zu_.CompositeShape=C$zut;__extends(ReactiveFilter,C$zuo=C$zu_.ConnectionFilter),ReactiveFilter.prototype.IsNecessary=function(C$zut){if(!this.m_flagsBuffer.data)throw new Error;return 0!=(this.m_flagsBuffer.data[C$zut]&C$zuH.b2ParticleFlag.b2_reactiveParticle)};C$zut=ReactiveFilter;function ReactiveFilter(C$zut){var C$zue=C$zuo.call(this)||this;return C$zue.m_flagsBuffer=C$zut,C$zue}var C$zuo;C$zu_.ReactiveFilter=C$zut;__extends(UpdateBodyContactsCallback,C$zus=C$zuAr),UpdateBodyContactsCallback.prototype.ShouldCollideFixtureParticle=function(C$zut,C$zue,C$zui){if(this.m_contactFilter&&this.m_system.GetFlagsBuffer()[C$zui]&C$zuH.b2ParticleFlag.b2_fixtureContactFilterParticle)return this.m_contactFilter.ShouldCollideFixtureParticle(C$zut,this.m_system,C$zui);return!0},UpdateBodyContactsCallback.prototype.ReportFixtureAndParticle=function(C$zut,C$zue,C$zui){var C$zur=C$zu_.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n;var C$zun=C$zu_.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp;if(!this.m_system.m_flagsBuffer.data)throw new Error;if(!this.m_system.m_positionBuffer.data)throw new Error;var C$zua=this.m_system.m_positionBuffer.data[C$zui];C$zue=C$zut.ComputeDistance(C$zua,C$zur,C$zue);var C$zuo,C$zuh,C$zus,C$zuc,C$zul;C$zue<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(C$zut,this.m_system,C$zui)&&(C$zuc=(C$zuo=C$zut.GetBody()).GetWorldCenter(),C$zuh=0<(C$zus=C$zuo.GetMass())?1/C$zus:0,C$zus=0<(C$zus=C$zuo.GetInertia()-C$zus*C$zuo.GetLocalCenter().LengthSquared())?1/C$zus:0,C$zul=this.m_system.m_flagsBuffer.data[C$zui]&C$zuH.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),C$zua=C$zuj.SubVV(C$zua,C$zuc,C$zun),C$zun=C$zul+C$zuh+C$zus*(C$zuc=C$zuj.CrossVV(C$zua,C$zur))*C$zuc,(C$zul=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()]).index=C$zui,C$zul.body=C$zuo,C$zul.fixture=C$zut,C$zul.weight=1-C$zue*this.m_system.m_inverseDiameter,C$zul.normal.Copy(C$zur.SelfNeg()),C$zul.mass=0<C$zun?1/C$zun:0,this.m_system.DetectStuckParticle(C$zui))},UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n=new C$zuj,UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp=new C$zuj;C$zut=UpdateBodyContactsCallback;function UpdateBodyContactsCallback(C$zut,C$zue){C$zut=C$zus.call(this,C$zut)||this;return C$zut.m_contactFilter=C$zue,C$zut}var C$zus;C$zu_.UpdateBodyContactsCallback=C$zut;__extends(SolveCollisionCallback,C$zuc=C$zuAr),SolveCollisionCallback.prototype.ReportFixtureAndParticle=function(C$zut,C$zue,C$zui){var C$zur=C$zu_.SolveCollisionCallback.ReportFixtureAndParticle_s_p1;var C$zun=C$zu_.SolveCollisionCallback.ReportFixtureAndParticle_s_output;var C$zua=C$zu_.SolveCollisionCallback.ReportFixtureAndParticle_s_input;var C$zuo=C$zu_.SolveCollisionCallback.ReportFixtureAndParticle_s_p;var C$zuh=C$zu_.SolveCollisionCallback.ReportFixtureAndParticle_s_v;var C$zuu=C$zu_.SolveCollisionCallback.ReportFixtureAndParticle_s_f;var C$zus=C$zut.GetBody();if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;var C$zuc=this.m_system.m_positionBuffer.data[C$zui];var C$zul=this.m_system.m_velocityBuffer.data[C$zui];0===this.m_system.m_iterationIndex?(C$zur=C$zuI.MulTXV(C$zus.m_xf0,C$zuc,C$zur),C$zut.GetShape().GetType()===C$zuH.b2ShapeType.e_circleShape&&(C$zur.SelfSub(C$zus.GetLocalCenter()),C$zuR.MulRV(C$zus.m_xf0.q,C$zur,C$zur),C$zuR.MulTRV(C$zus.m_xf.q,C$zur,C$zur),C$zur.SelfAdd(C$zus.GetLocalCenter())),C$zuI.MulXV(C$zus.m_xf,C$zur,C$zua.p1)):C$zua.p1.Copy(C$zuc),C$zuj.AddVMulSV(C$zuc,this.m_step.dt,C$zul,C$zua.p2),C$zua.maxFraction=1,C$zut.RayCast(C$zun,C$zua,C$zue)&&(C$zus=C$zun.normal,(C$zur=C$zuo).x=(1-C$zun.fraction)*C$zua.p1.x+C$zun.fraction*C$zua.p2.x+.008*C$zus.x,C$zur.y=(1-C$zun.fraction)*C$zua.p1.y+C$zun.fraction*C$zua.p2.y+.008*C$zus.y,(C$zut=C$zuh).x=this.m_step.inv_dt*(C$zur.x-C$zuc.x),C$zut.y=this.m_step.inv_dt*(C$zur.y-C$zuc.y),this.m_system.m_velocityBuffer.data[C$zui].Copy(C$zut),(C$zue=C$zuu).x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(C$zul.x-C$zut.x),C$zue.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(C$zul.y-C$zut.y),this.m_system.ParticleApplyForce(C$zui,C$zue))},SolveCollisionCallback.prototype.ReportParticle=function(C$zut,C$zue){return!1},SolveCollisionCallback.ReportFixtureAndParticle_s_p1=new C$zuj,SolveCollisionCallback.ReportFixtureAndParticle_s_output=new C$zuut,SolveCollisionCallback.ReportFixtureAndParticle_s_input=new C$zuht,SolveCollisionCallback.ReportFixtureAndParticle_s_p=new C$zuj,SolveCollisionCallback.ReportFixtureAndParticle_s_v=new C$zuj,SolveCollisionCallback.ReportFixtureAndParticle_s_f=new C$zuj;C$zut=SolveCollisionCallback;function SolveCollisionCallback(C$zut,C$zue){C$zut=C$zuc.call(this,C$zut)||this;return C$zut.m_step=C$zue,C$zut}var C$zuc;C$zu_.SolveCollisionCallback=C$zut}(C$zuH.b2ParticleSystem||(C$zuH.b2ParticleSystem={}));b2World.prototype.SetDestructionListener=function(C$zut){this.m_destructionListener=C$zut},b2World.prototype.SetContactFilter=function(C$zut){this.m_contactManager.m_contactFilter=C$zut},b2World.prototype.SetContactListener=function(C$zut){this.m_contactManager.m_contactListener=C$zut},b2World.prototype.SetDebugDraw=function(C$zut){this.m_debugDraw=C$zut},b2World.prototype.CreateBody=function(C$zut){if(void 0===C$zut&&(C$zut={}),this.IsLocked())throw new Error;C$zut=new C$zuVe(C$zut,this);return C$zut.m_prev=null,C$zut.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=C$zut),this.m_bodyList=C$zut,++this.m_bodyCount,C$zut},b2World.prototype.DestroyBody=function(C$zut){if(this.IsLocked())throw new Error;var C$zue=C$zut.m_jointList;for(;C$zue;){var C$zui=C$zue;C$zue=C$zue.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(C$zui.joint),this.DestroyJoint(C$zui.joint),C$zut.m_jointList=C$zue}C$zut.m_jointList=null;var C$zur=C$zut.m_controllerList;for(;C$zur;){var C$zun=C$zur;C$zur=C$zur.nextController,C$zun.controller.RemoveBody(C$zut)}var C$zua=C$zut.m_contactList;for(;C$zua;){var C$zuo=C$zua;C$zua=C$zua.next,this.m_contactManager.Destroy(C$zuo.contact)}C$zut.m_contactList=null;var C$zus=C$zut.m_fixtureList;for(;C$zus;){var C$zuc=C$zus;C$zus=C$zus.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(C$zuc),C$zuc.DestroyProxies(),C$zuc.Destroy(),C$zut.m_fixtureList=C$zus,--C$zut.m_fixtureCount}C$zut.m_fixtureList=null,C$zut.m_fixtureCount=0,C$zut.m_prev&&(C$zut.m_prev.m_next=C$zut.m_next),C$zut.m_next&&(C$zut.m_next.m_prev=C$zut.m_prev),C$zut===this.m_bodyList&&(this.m_bodyList=C$zut.m_next),--this.m_bodyCount},b2World._Joint_Create=function(C$zut,C$zue){switch(C$zut.type){case C$zuH.b2JointType.e_distanceJoint:return new C$zuGe(C$zut);case C$zuH.b2JointType.e_mouseJoint:return new C$zusi(C$zut);case C$zuH.b2JointType.e_prismaticJoint:return new C$zuui(C$zut);case C$zuH.b2JointType.e_revoluteJoint:return new C$zugi(C$zut);case C$zuH.b2JointType.e_pulleyJoint:return new C$zupi(C$zut);case C$zuH.b2JointType.e_gearJoint:return new C$zuKe(C$zut);case C$zuH.b2JointType.e_wheelJoint:return new C$zuIi(C$zut);case C$zuH.b2JointType.e_weldJoint:return new C$zuEi(C$zut);case C$zuH.b2JointType.e_frictionJoint:return new C$zuYe(C$zut);case C$zuH.b2JointType.e_ropeJoint:return new C$zuAi(C$zut);case C$zuH.b2JointType.e_motorJoint:return new C$zuri(C$zut);case C$zuH.b2JointType.e_areaJoint:return new C$zuje(C$zut)}throw new Error},b2World._Joint_Destroy=function(C$zut,C$zue){},b2World.prototype.CreateJoint=function(C$zut){if(this.IsLocked())throw new Error;var C$zue=b2World._Joint_Create(C$zut,null);C$zue.m_prev=null,C$zue.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=C$zue),this.m_jointList=C$zue,++this.m_jointCount,C$zue.m_edgeA.prev=null,C$zue.m_edgeA.next=C$zue.m_bodyA.m_jointList,C$zue.m_bodyA.m_jointList&&(C$zue.m_bodyA.m_jointList.prev=C$zue.m_edgeA),C$zue.m_bodyA.m_jointList=C$zue.m_edgeA,C$zue.m_edgeB.prev=null,C$zue.m_edgeB.next=C$zue.m_bodyB.m_jointList,C$zue.m_bodyB.m_jointList&&(C$zue.m_bodyB.m_jointList.prev=C$zue.m_edgeB),C$zue.m_bodyB.m_jointList=C$zue.m_edgeB;var C$zui=C$zut.bodyA;var C$zur=C$zut.bodyB;if(!C$zut.collideConnected){var C$zun=C$zur.GetContactList();for(;C$zun;)C$zun.other===C$zui&&C$zun.contact.FlagForFiltering(),C$zun=C$zun.next}return C$zue},b2World.prototype.DestroyJoint=function(C$zut){if(this.IsLocked())throw new Error;var C$zue=C$zut.m_collideConnected;C$zut.m_prev&&(C$zut.m_prev.m_next=C$zut.m_next),C$zut.m_next&&(C$zut.m_next.m_prev=C$zut.m_prev),C$zut===this.m_jointList&&(this.m_jointList=C$zut.m_next);var C$zui=C$zut.m_bodyA;var C$zur=C$zut.m_bodyB;if(C$zui.SetAwake(!0),C$zur.SetAwake(!0),C$zut.m_edgeA.prev&&(C$zut.m_edgeA.prev.next=C$zut.m_edgeA.next),C$zut.m_edgeA.next&&(C$zut.m_edgeA.next.prev=C$zut.m_edgeA.prev),C$zut.m_edgeA===C$zui.m_jointList&&(C$zui.m_jointList=C$zut.m_edgeA.next),C$zut.m_edgeA.prev=null,C$zut.m_edgeA.next=null,C$zut.m_edgeB.prev&&(C$zut.m_edgeB.prev.next=C$zut.m_edgeB.next),C$zut.m_edgeB.next&&(C$zut.m_edgeB.next.prev=C$zut.m_edgeB.prev),C$zut.m_edgeB===C$zur.m_jointList&&(C$zur.m_jointList=C$zut.m_edgeB.next),C$zut.m_edgeB.prev=null,C$zut.m_edgeB.next=null,b2World._Joint_Destroy(C$zut,null),--this.m_jointCount,!C$zue){var C$zun=C$zur.GetContactList();for(;C$zun;)C$zun.other===C$zui&&C$zun.contact.FlagForFiltering(),C$zun=C$zun.next}},b2World.prototype.CreateParticleSystem=function(C$zut){if(this.IsLocked())throw new Error;C$zut=new C$zuH.b2ParticleSystem(C$zut,this);return C$zut.m_prev=null,C$zut.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=C$zut),this.m_particleSystemList=C$zut},b2World.prototype.DestroyParticleSystem=function(C$zut){if(this.IsLocked())throw new Error;C$zut.m_prev&&(C$zut.m_prev.m_next=C$zut.m_next),C$zut.m_next&&(C$zut.m_next.m_prev=C$zut.m_prev),C$zut===this.m_particleSystemList&&(this.m_particleSystemList=C$zut.m_next)},b2World.prototype.CalculateReasonableParticleIterations=function(C$zut){return null===this.m_particleSystemList?1:b2CalculateParticleIterations(this.m_gravity.Length(),function(C$zut){var C$zue=C$zuB;for(var C$zui=C$zut.GetParticleSystemList();null!==C$zui;C$zui=C$zui.m_next)C$zue=C$zuD(C$zue,C$zui.GetRadius());return C$zue}(this),C$zut)},b2World.prototype.Step=function(C$zut,C$zue,C$zui,C$zur){void 0===C$zur&&(C$zur=this.CalculateReasonableParticleIterations(C$zut));var C$zun=b2World.Step_s_stepTimer.Reset();this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0;var C$zua=b2World.Step_s_step;C$zua.dt=C$zut,C$zua.velocityIterations=C$zue,C$zua.positionIterations=C$zui,C$zua.particleIterations=C$zur,C$zua.inv_dt=0<C$zut?1/C$zut:0,C$zua.dtRatio=this.m_inv_dt0*C$zut,C$zua.warmStarting=this.m_warmStarting;C$zue=b2World.Step_s_timer.Reset();if(this.m_contactManager.Collide(),this.m_profile.collide=C$zue.GetMilliseconds(),this.m_stepComplete&&0<C$zua.dt){C$zui=b2World.Step_s_timer.Reset();for(var C$zuo=this.m_particleSystemList;C$zuo;C$zuo=C$zuo.m_next)C$zuo.Solve(C$zua);this.Solve(C$zua),this.m_profile.solve=C$zui.GetMilliseconds()}this.m_continuousPhysics&&0<C$zua.dt&&(C$zur=b2World.Step_s_timer.Reset(),this.SolveTOI(C$zua),this.m_profile.solveTOI=C$zur.GetMilliseconds()),0<C$zua.dt&&(this.m_inv_dt0=C$zua.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=C$zun.GetMilliseconds()},b2World.prototype.ClearForces=function(){for(var C$zut=this.m_bodyList;C$zut;C$zut=C$zut.m_next)C$zut.m_force.SetZero(),C$zut.m_torque=0},b2World.prototype.DrawParticleSystem=function(C$zut){var C$zue,C$zui,C$zur;null===this.m_debugDraw||(C$zue=C$zut.GetParticleCount())&&(C$zui=C$zut.GetRadius(),C$zur=C$zut.GetPositionBuffer(),C$zut.m_colorBuffer.data?(C$zut=C$zut.GetColorBuffer(),this.m_debugDraw.DrawParticles(C$zur,C$zui,C$zut,C$zue)):this.m_debugDraw.DrawParticles(C$zur,C$zui,null,C$zue))},b2World.prototype.DrawDebugData=function(){if(null!==this.m_debugDraw){var C$zut=this.m_debugDraw.GetFlags();var C$zue=b2World.DrawDebugData_s_color.SetRGB(0,0,0);if(C$zut&C$zuH.b2DrawFlags.e_shapeBit)for(var C$zui=this.m_bodyList;C$zui;C$zui=C$zui.m_next){var C$zur=C$zui.m_xf;this.m_debugDraw.PushTransform(C$zur);for(var C$zun=C$zui.GetFixtureList();C$zun;C$zun=C$zun.m_next)C$zui.IsActive()?C$zui.GetType()===C$zuH.b2BodyType.b2_staticBody?C$zue.SetRGB(.5,.9,.5):C$zui.GetType()===C$zuH.b2BodyType.b2_kinematicBody?C$zue.SetRGB(.5,.5,.9):C$zui.IsAwake()?C$zue.SetRGB(.9,.7,.7):C$zue.SetRGB(.6,.6,.6):C$zue.SetRGB(.5,.5,.3),this.DrawShape(C$zun,C$zue);this.m_debugDraw.PopTransform(C$zur)}if(C$zut&C$zuH.b2DrawFlags.e_particleBit)for(var C$zua=this.m_particleSystemList;C$zua;C$zua=C$zua.m_next)this.DrawParticleSystem(C$zua);if(C$zut&C$zuH.b2DrawFlags.e_jointBit)for(var C$zuo=this.m_jointList;C$zuo;C$zuo=C$zuo.m_next)this.DrawJoint(C$zuo);if(C$zut&C$zuH.b2DrawFlags.e_aabbBit){C$zue.SetRGB(.9,.3,.9);var C$zus=b2World.DrawDebugData_s_vs;for(C$zui=this.m_bodyList;C$zui;C$zui=C$zui.m_next)if(C$zui.IsActive())for(C$zun=C$zui.GetFixtureList();C$zun;C$zun=C$zun.m_next)for(var C$zuh=0;C$zuh<C$zun.m_proxyCount;++C$zuh){var C$zuc=C$zun.m_proxies[C$zuh].treeNode.aabb;C$zus[0].Set(C$zuc.lowerBound.x,C$zuc.lowerBound.y),C$zus[1].Set(C$zuc.upperBound.x,C$zuc.lowerBound.y),C$zus[2].Set(C$zuc.upperBound.x,C$zuc.upperBound.y),C$zus[3].Set(C$zuc.lowerBound.x,C$zuc.upperBound.y),this.m_debugDraw.DrawPolygon(C$zus,4,C$zue)}}if(C$zut&C$zuH.b2DrawFlags.e_centerOfMassBit)for(C$zui=this.m_bodyList;C$zui;C$zui=C$zui.m_next)(C$zur=b2World.DrawDebugData_s_xf).q.Copy(C$zui.m_xf.q),C$zur.p.Copy(C$zui.GetWorldCenter()),this.m_debugDraw.DrawTransform(C$zur);if(C$zut&C$zuH.b2DrawFlags.e_controllerBit)for(var C$zul=this.m_controllerList;C$zul;C$zul=C$zul.m_next)C$zul.Draw(this.m_debugDraw)}},b2World.prototype.QueryAABB=function(C$zue,C$zut,C$zui){if(this.m_contactManager.m_broadPhase.Query(C$zut,function(C$zut){C$zut=C$zut.userData.fixture;return C$zue?C$zue.ReportFixture(C$zut):!C$zui||C$zui(C$zut)}),C$zue instanceof C$zuer)for(var C$zur=this.m_particleSystemList;C$zur;C$zur=C$zur.m_next)C$zue.ShouldQueryParticleSystem(C$zur)&&C$zur.QueryAABB(C$zue,C$zut)},b2World.prototype.QueryAllAABB=function(C$zut,C$zue){return void 0===C$zue&&(C$zue=[]),this.QueryAABB(null,C$zut,function(C$zut){return C$zue.push(C$zut),!0}),C$zue},b2World.prototype.QueryPointAABB=function(C$zue,C$zut,C$zui){if(this.m_contactManager.m_broadPhase.QueryPoint(C$zut,function(C$zut){C$zut=C$zut.userData.fixture;return C$zue?C$zue.ReportFixture(C$zut):!C$zui||C$zui(C$zut)}),C$zue instanceof C$zuer)for(var C$zur=this.m_particleSystemList;C$zur;C$zur=C$zur.m_next)C$zue.ShouldQueryParticleSystem(C$zur)&&C$zur.QueryPointAABB(C$zue,C$zut)},b2World.prototype.QueryAllPointAABB=function(C$zut,C$zue){return void 0===C$zue&&(C$zue=[]),this.QueryPointAABB(null,C$zut,function(C$zut){return C$zue.push(C$zut),!0}),C$zue},b2World.prototype.QueryFixtureShape=function(C$zui,C$zur,C$zun,C$zua,C$zuo){var C$zut=b2World.QueryFixtureShape_s_aabb;if(C$zur.ComputeAABB(C$zut,C$zua,C$zun),this.m_contactManager.m_broadPhase.Query(C$zut,function(C$zut){C$zut=C$zut.userData;var C$zue=C$zut.fixture;if(b2TestOverlapShape(C$zur,C$zun,C$zue.GetShape(),C$zut.childIndex,C$zua,C$zue.GetBody().GetTransform())){if(C$zui)return C$zui.ReportFixture(C$zue);if(C$zuo)return C$zuo(C$zue)}return!0}),C$zui instanceof C$zuer)for(var C$zue=this.m_particleSystemList;C$zue;C$zue=C$zue.m_next)C$zui.ShouldQueryParticleSystem(C$zue)&&C$zue.QueryAABB(C$zui,C$zut)},b2World.prototype.QueryAllFixtureShape=function(C$zut,C$zue,C$zui,C$zur){return void 0===C$zur&&(C$zur=[]),this.QueryFixtureShape(null,C$zut,C$zue,C$zui,function(C$zut){return C$zur.push(C$zut),!0}),C$zur},b2World.prototype.QueryFixturePoint=function(C$zue,C$zui,C$zur){if(this.m_contactManager.m_broadPhase.QueryPoint(C$zui,function(C$zut){C$zut=C$zut.userData.fixture;if(C$zut.TestPoint(C$zui)){if(C$zue)return C$zue.ReportFixture(C$zut);if(C$zur)return C$zur(C$zut)}return!0}),C$zue)for(var C$zut=this.m_particleSystemList;C$zut;C$zut=C$zut.m_next)C$zue.ShouldQueryParticleSystem(C$zut)&&C$zut.QueryPointAABB(C$zue,C$zui)},b2World.prototype.QueryAllFixturePoint=function(C$zut,C$zue){return void 0===C$zue&&(C$zue=[]),this.QueryFixturePoint(null,C$zut,function(C$zut){return C$zue.push(C$zut),!0}),C$zue},b2World.prototype.RayCast=function(C$zua,C$zuo,C$zus,C$zuc){var C$zut=b2World.RayCast_s_input;if(C$zut.maxFraction=1,C$zut.p1.Copy(C$zuo),C$zut.p2.Copy(C$zus),this.m_contactManager.m_broadPhase.RayCast(C$zut,function(C$zut,C$zue){C$zue=C$zue.userData;var C$zui=C$zue.fixture;C$zue=C$zue.childIndex;var C$zur=b2World.RayCast_s_output;if(C$zui.RayCast(C$zur,C$zut,C$zue)){C$zue=C$zur.fraction;var C$zun=b2World.RayCast_s_point;if(C$zun.Set((1-C$zue)*C$zuo.x+C$zue*C$zus.x,(1-C$zue)*C$zuo.y+C$zue*C$zus.y),C$zua)return C$zua.ReportFixture(C$zui,C$zun,C$zur.normal,C$zue);if(C$zuc)return C$zuc(C$zui,C$zun,C$zur.normal,C$zue)}return C$zut.maxFraction}),C$zua)for(var C$zue=this.m_particleSystemList;C$zue;C$zue=C$zue.m_next)C$zua.ShouldQueryParticleSystem(C$zue)&&C$zue.RayCast(C$zua,C$zuo,C$zus)},b2World.prototype.RayCastOne=function(C$zut,C$zue){var C$zun=null;var C$zua=1;return this.RayCast(null,C$zut,C$zue,function(C$zut,C$zue,C$zui,C$zur){return C$zur<C$zua&&(C$zua=C$zur,C$zun=C$zut),C$zua}),C$zun},b2World.prototype.RayCastAll=function(C$zut,C$zue,C$zun){return void 0===C$zun&&(C$zun=[]),this.RayCast(null,C$zut,C$zue,function(C$zut,C$zue,C$zui,C$zur){return C$zun.push(C$zut),1}),C$zun},b2World.prototype.GetBodyList=function(){return this.m_bodyList},b2World.prototype.GetJointList=function(){return this.m_jointList},b2World.prototype.GetParticleSystemList=function(){return this.m_particleSystemList},b2World.prototype.GetContactList=function(){return this.m_contactManager.m_contactList},b2World.prototype.SetAllowSleeping=function(C$zut){if(C$zut!==this.m_allowSleep&&(this.m_allowSleep=C$zut,!this.m_allowSleep))for(var C$zue=this.m_bodyList;C$zue;C$zue=C$zue.m_next)C$zue.SetAwake(!0)},b2World.prototype.GetAllowSleeping=function(){return this.m_allowSleep},b2World.prototype.SetWarmStarting=function(C$zut){this.m_warmStarting=C$zut},b2World.prototype.GetWarmStarting=function(){return this.m_warmStarting},b2World.prototype.SetContinuousPhysics=function(C$zut){this.m_continuousPhysics=C$zut},b2World.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics},b2World.prototype.SetSubStepping=function(C$zut){this.m_subStepping=C$zut},b2World.prototype.GetSubStepping=function(){return this.m_subStepping},b2World.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},b2World.prototype.GetBodyCount=function(){return this.m_bodyCount},b2World.prototype.GetJointCount=function(){return this.m_jointCount},b2World.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount},b2World.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()},b2World.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()},b2World.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()},b2World.prototype.SetGravity=function(C$zut,C$zue){if(void 0===C$zue&&(C$zue=!0),!C$zuj.IsEqualToV(this.m_gravity,C$zut)&&(this.m_gravity.Copy(C$zut),C$zue))for(var C$zui=this.m_bodyList;C$zui;C$zui=C$zui.m_next)C$zui.SetAwake(!0)},b2World.prototype.GetGravity=function(){return this.m_gravity},b2World.prototype.IsLocked=function(){return this.m_locked},b2World.prototype.SetAutoClearForces=function(C$zut){this.m_clearForces=C$zut},b2World.prototype.GetAutoClearForces=function(){return this.m_clearForces},b2World.prototype.ShiftOrigin=function(C$zut){if(this.IsLocked())throw new Error;for(var C$zue=this.m_bodyList;C$zue;C$zue=C$zue.m_next)C$zue.m_xf.p.SelfSub(C$zut),C$zue.m_sweep.c0.SelfSub(C$zut),C$zue.m_sweep.c.SelfSub(C$zut);for(var C$zui=this.m_jointList;C$zui;C$zui=C$zui.m_next)C$zui.ShiftOrigin(C$zut);this.m_contactManager.m_broadPhase.ShiftOrigin(C$zut)},b2World.prototype.GetContactManager=function(){return this.m_contactManager},b2World.prototype.GetProfile=function(){return this.m_profile},b2World.prototype.Dump=function(C$zut){if(!this.m_locked){C$zut("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),C$zut("this.m_world.SetGravity(g);\n"),C$zut("const bodies: b2Body[] = [];\n"),C$zut("const joints: b2Joint[] = [];\n");var C$zue=0;for(var C$zui=this.m_bodyList;C$zui;C$zui=C$zui.m_next)C$zui.m_islandIndex=C$zue,C$zui.Dump(C$zut),++C$zue;C$zue=0;for(var C$zur=this.m_jointList;C$zur;C$zur=C$zur.m_next)C$zur.m_index=C$zue,++C$zue;for(C$zur=this.m_jointList;C$zur;C$zur=C$zur.m_next)C$zur.m_type!==C$zuH.b2JointType.e_gearJoint&&(C$zut("{\n"),C$zur.Dump(C$zut),C$zut("}\n"));for(C$zur=this.m_jointList;C$zur;C$zur=C$zur.m_next)C$zur.m_type===C$zuH.b2JointType.e_gearJoint&&(C$zut("{\n"),C$zur.Dump(C$zut),C$zut("}\n"))}},b2World.prototype.DrawJoint=function(C$zut){if(null!==this.m_debugDraw){var C$zue=C$zut.GetBodyA();var C$zui=C$zut.GetBodyB();C$zue=C$zue.m_xf;C$zui=C$zui.m_xf;var C$zur=C$zue.p;var C$zun=C$zui.p;var C$zua=C$zut.GetAnchorA(b2World.DrawJoint_s_p1);var C$zuo=C$zut.GetAnchorB(b2World.DrawJoint_s_p2);var C$zus=b2World.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(C$zut.m_type){case C$zuH.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(C$zua,C$zuo,C$zus);break;case C$zuH.b2JointType.e_pulleyJoint:var C$zuc=C$zut;var C$zul=C$zuc.GetGroundAnchorA();C$zuc=C$zuc.GetGroundAnchorB();this.m_debugDraw.DrawSegment(C$zul,C$zua,C$zus),this.m_debugDraw.DrawSegment(C$zuc,C$zuo,C$zus),this.m_debugDraw.DrawSegment(C$zul,C$zuc,C$zus);break;case C$zuH.b2JointType.e_mouseJoint:C$zul=b2World.DrawJoint_s_c;C$zul.Set(0,1,0),this.m_debugDraw.DrawPoint(C$zua,4,C$zul),this.m_debugDraw.DrawPoint(C$zuo,4,C$zul),C$zul.Set(.8,.8,.8),this.m_debugDraw.DrawSegment(C$zua,C$zuo,C$zul);break;default:this.m_debugDraw.DrawSegment(C$zur,C$zua,C$zus),this.m_debugDraw.DrawSegment(C$zua,C$zuo,C$zus),this.m_debugDraw.DrawSegment(C$zun,C$zuo,C$zus)}}},b2World.prototype.DrawShape=function(C$zut,C$zue){if(null!==this.m_debugDraw){var C$zui=C$zut.GetShape();switch(C$zui.m_type){case C$zuH.b2ShapeType.e_circleShape:var C$zur=C$zui.m_p;var C$zun=C$zui.m_radius;var C$zua=C$zuj.UNITX;this.m_debugDraw.DrawSolidCircle(C$zur,C$zun,C$zua,C$zue);break;case C$zuH.b2ShapeType.e_edgeShape:var C$zuo=C$zui.m_vertex1;var C$zus=C$zui.m_vertex2;this.m_debugDraw.DrawSegment(C$zuo,C$zus,C$zue);break;case C$zuH.b2ShapeType.e_chainShape:C$zur=C$zui;var C$zuh=C$zur.m_count;var C$zuc=C$zur.m_vertices;C$zun=b2World.DrawShape_s_ghostColor.SetRGBA(.75*C$zue.r,.75*C$zue.g,.75*C$zue.b,C$zue.a);C$zuo=C$zuc[0];this.m_debugDraw.DrawPoint(C$zuo,4,C$zue),C$zur.m_hasPrevVertex&&(C$zua=C$zur.m_prevVertex,this.m_debugDraw.DrawSegment(C$zua,C$zuo,C$zun),this.m_debugDraw.DrawCircle(C$zua,.1,C$zun));for(var C$zul=1;C$zul<C$zuh;++C$zul){C$zus=C$zuc[C$zul];this.m_debugDraw.DrawSegment(C$zuo,C$zus,C$zue),this.m_debugDraw.DrawPoint(C$zus,4,C$zue),C$zuo=C$zus}C$zur.m_hasNextVertex&&(C$zua=C$zur.m_nextVertex,this.m_debugDraw.DrawSegment(C$zua,C$zuo,C$zun),this.m_debugDraw.DrawCircle(C$zua,.1,C$zun));break;case C$zuH.b2ShapeType.e_polygonShape:C$zur=C$zui.m_count;C$zuc=C$zui.m_vertices;this.m_debugDraw.DrawSolidPolygon(C$zuc,C$zur,C$zue)}}},b2World.prototype.Solve=function(C$zuh){for(var C$zut=this.m_bodyList;C$zut;C$zut=C$zut.m_next)C$zut.m_xf0.Copy(C$zut.m_xf);for(var C$zuu=this.m_controllerList;C$zuu;C$zuu=C$zuu.m_next)C$zuu.Step(C$zuh);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;var C$zue=this.m_island;C$zue.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(C$zut=this.m_bodyList;C$zut;C$zut=C$zut.m_next)C$zut.m_islandFlag=!1;for(var C$zu_=this.m_contactManager.m_contactList;C$zu_;C$zu_=C$zu_.m_next)C$zu_.m_islandFlag=!1;for(var C$zud=this.m_jointList;C$zud;C$zud=C$zud.m_next)C$zud.m_islandFlag=!1;var C$zui=this.s_stack;for(var C$zur=this.m_bodyList;C$zur;C$zur=C$zur.m_next)if(!C$zur.m_islandFlag&&C$zur.IsAwake()&&C$zur.IsActive()&&C$zur.GetType()!==C$zuH.b2BodyType.b2_staticBody){C$zue.Clear();var C$zun=0;for((C$zui[C$zun++]=C$zur).m_islandFlag=!0;0<C$zun;){if(!(C$zut=C$zui[--C$zun]))throw new Error;if(C$zue.AddBody(C$zut),C$zut.m_awakeFlag=!0,C$zut.GetType()!==C$zuH.b2BodyType.b2_staticBody){for(var C$zua=C$zut.m_contactList;C$zua;C$zua=C$zua.next){var C$zuo=C$zua.contact;if(!C$zuo.m_islandFlag&&(C$zuo.IsEnabled()&&C$zuo.IsTouching())){var C$zuf=C$zuo.m_fixtureA.m_isSensor;var C$zup=C$zuo.m_fixtureB.m_isSensor;if(!C$zuf&&!C$zup){if(C$zue.AddContact(C$zuo),C$zuo.m_islandFlag=!0,!(C$zuc=C$zua.other))throw new Error;C$zuc.m_islandFlag||((C$zui[C$zun++]=C$zuc).m_islandFlag=!0)}}}for(var C$zus=C$zut.m_jointList;C$zus;C$zus=C$zus.next){var C$zuc;C$zus.joint.m_islandFlag||(C$zuc=C$zus.other).IsActive()&&(C$zue.AddJoint(C$zus.joint),C$zus.joint.m_islandFlag=!0,C$zuc.m_islandFlag||((C$zui[C$zun++]=C$zuc).m_islandFlag=!0))}}}var C$zum=new C$zunr;C$zue.Solve(C$zum,C$zuh,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=C$zum.solveInit,this.m_profile.solveVelocity+=C$zum.solveVelocity,this.m_profile.solvePosition+=C$zum.solvePosition;for(var C$zul=0;C$zul<C$zue.m_bodyCount;++C$zul)(C$zut=C$zue.m_bodies[C$zul]).GetType()===C$zuH.b2BodyType.b2_staticBody&&(C$zut.m_islandFlag=!1)}for(C$zul=0;C$zul<C$zui.length&&C$zui[C$zul];++C$zul)C$zui[C$zul]=null;var C$zuv=new C$zub;for(C$zut=this.m_bodyList;C$zut;C$zut=C$zut.m_next)C$zut.m_islandFlag&&C$zut.GetType()!==C$zuH.b2BodyType.b2_staticBody&&C$zut.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=C$zuv.GetMilliseconds()},b2World.prototype.SolveTOI=function(C$zuh){var C$zut=this.m_island;if(C$zut.Initialize(64,32,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(var C$zuu=this.m_bodyList;C$zuu;C$zuu=C$zuu.m_next)C$zuu.m_islandFlag=!1,C$zuu.m_sweep.alpha0=0;for(var C$zue=this.m_contactManager.m_contactList;C$zue;C$zue=C$zue.m_next)C$zue.m_toiFlag=!1,C$zue.m_islandFlag=!1,C$zue.m_toiCount=0,C$zue.m_toi=1}for(;;){var C$zui=null;var C$zu_=1;for(C$zue=this.m_contactManager.m_contactList;C$zue;C$zue=C$zue.m_next)if(C$zue.IsEnabled()&&!(8<C$zue.m_toiCount)){var C$zud=1;if(C$zue.m_toiFlag)C$zud=C$zue.m_toi;else{var C$zuf=C$zue.GetFixtureA();var C$zup=C$zue.GetFixtureB();if(C$zuf.IsSensor()||C$zup.IsSensor())continue;var C$zur=C$zuf.GetBody();var C$zum=C$zup.GetBody();var C$zun=C$zur.m_type;var C$zuv=C$zum.m_type;var C$zuy=C$zur.IsAwake()&&C$zun!==C$zuH.b2BodyType.b2_staticBody;var C$zua=C$zum.IsAwake()&&C$zuv!==C$zuH.b2BodyType.b2_staticBody;if(!C$zuy&&!C$zua)continue;C$zuy=C$zur.IsBullet()||C$zun!==C$zuH.b2BodyType.b2_dynamicBody;C$zua=C$zum.IsBullet()||C$zuv!==C$zuH.b2BodyType.b2_dynamicBody;if(!C$zuy&&!C$zua)continue;C$zun=C$zur.m_sweep.alpha0;C$zur.m_sweep.alpha0<C$zum.m_sweep.alpha0?(C$zun=C$zum.m_sweep.alpha0,C$zur.m_sweep.Advance(C$zun)):C$zum.m_sweep.alpha0<C$zur.m_sweep.alpha0&&(C$zun=C$zur.m_sweep.alpha0,C$zum.m_sweep.Advance(C$zun));C$zuv=C$zue.GetChildIndexA();C$zuy=C$zue.GetChildIndexB();C$zua=b2World.SolveTOI_s_toi_input;C$zua.proxyA.SetShape(C$zuf.GetShape(),C$zuv),C$zua.proxyB.SetShape(C$zup.GetShape(),C$zuy),C$zua.sweepA.Copy(C$zur.m_sweep),C$zua.sweepB.Copy(C$zum.m_sweep),C$zua.tMax=1;C$zuf=b2World.SolveTOI_s_toi_output;b2TimeOfImpact(C$zuf,C$zua);C$zuv=C$zuf.t;C$zud=C$zuf.state===C$zuH.b2TOIOutputState.e_touching?C$zuD(C$zun+(1-C$zun)*C$zuv,1):1,C$zue.m_toi=C$zud,C$zue.m_toiFlag=!0}C$zud<C$zu_&&(C$zui=C$zue,C$zu_=C$zud)}if(null===C$zui||1-10*C$zuE<C$zu_){this.m_stepComplete=!0;break}var C$zug=C$zui.GetFixtureA();var C$zub=C$zui.GetFixtureB();var C$zuo=C$zug.GetBody();var C$zus=C$zub.GetBody();C$zug=b2World.SolveTOI_s_backup1.Copy(C$zuo.m_sweep);C$zub=b2World.SolveTOI_s_backup2.Copy(C$zus.m_sweep);if(C$zuo.Advance(C$zu_),C$zus.Advance(C$zu_),C$zui.Update(this.m_contactManager.m_contactListener),C$zui.m_toiFlag=!1,++C$zui.m_toiCount,C$zui.IsEnabled()&&C$zui.IsTouching()){C$zuo.SetAwake(!0),C$zus.SetAwake(!0),C$zut.Clear(),C$zut.AddBody(C$zuo),C$zut.AddBody(C$zus),C$zut.AddContact(C$zui),C$zuo.m_islandFlag=!0,C$zus.m_islandFlag=!0,C$zui.m_islandFlag=!0;for(var C$zuC=0;C$zuC<2;++C$zuC)if((C$zuw=0===C$zuC?C$zuo:C$zus).m_type===C$zuH.b2BodyType.b2_dynamicBody)for(var C$zuc=C$zuw.m_contactList;C$zuc&&C$zut.m_bodyCount!==C$zut.m_bodyCapacity&&C$zut.m_contactCount!==C$zut.m_contactCapacity;C$zuc=C$zuc.next){var C$zux=C$zuc.contact;var C$zul,C$zuA,C$zuS;C$zux.m_islandFlag||((C$zul=C$zuc.other).m_type!==C$zuH.b2BodyType.b2_dynamicBody||C$zuw.IsBullet()||C$zul.IsBullet())&&(C$zuS=C$zux.m_fixtureA.m_isSensor,C$zuA=C$zux.m_fixtureB.m_isSensor,C$zuS||C$zuA||(C$zuS=b2World.SolveTOI_s_backup.Copy(C$zul.m_sweep),C$zul.m_islandFlag||C$zul.Advance(C$zu_),C$zux.Update(this.m_contactManager.m_contactListener),C$zux.IsEnabled()&&C$zux.IsTouching()?(C$zux.m_islandFlag=!0,C$zut.AddContact(C$zux),C$zul.m_islandFlag||(C$zul.m_islandFlag=!0,C$zul.m_type!==C$zuH.b2BodyType.b2_staticBody&&C$zul.SetAwake(!0),C$zut.AddBody(C$zul))):(C$zul.m_sweep.Copy(C$zuS),C$zul.SynchronizeTransform())))}var C$zuT=b2World.SolveTOI_s_subStep;C$zuT.dt=(1-C$zu_)*C$zuh.dt,C$zuT.inv_dt=1/C$zuT.dt,C$zuT.dtRatio=1,C$zuT.positionIterations=20,C$zuT.velocityIterations=C$zuh.velocityIterations,C$zuT.particleIterations=C$zuh.particleIterations,C$zuT.warmStarting=!1,C$zut.SolveTOI(C$zuT,C$zuo.m_islandIndex,C$zus.m_islandIndex);for(C$zuC=0;C$zuC<C$zut.m_bodyCount;++C$zuC){var C$zuw;if((C$zuw=C$zut.m_bodies[C$zuC]).m_islandFlag=!1,C$zuw.m_type===C$zuH.b2BodyType.b2_dynamicBody){C$zuw.SynchronizeFixtures();for(C$zuc=C$zuw.m_contactList;C$zuc;C$zuc=C$zuc.next)C$zuc.contact.m_toiFlag=!1,C$zuc.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}else C$zui.SetEnabled(!1),C$zuo.m_sweep.Copy(C$zug),C$zus.m_sweep.Copy(C$zub),C$zuo.SynchronizeTransform(),C$zus.SynchronizeTransform()}},b2World.prototype.AddController=function(C$zut){return C$zut.m_next=this.m_controllerList,C$zut.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=C$zut),this.m_controllerList=C$zut,++this.m_controllerCount,C$zut},b2World.prototype.RemoveController=function(C$zut){return C$zut.m_prev&&(C$zut.m_prev.m_next=C$zut.m_next),C$zut.m_next&&(C$zut.m_next.m_prev=C$zut.m_prev),this.m_controllerList===C$zut&&(this.m_controllerList=C$zut.m_next),--this.m_controllerCount,C$zut.m_prev=null,C$zut.m_next=null,C$zut},b2World.Step_s_step=new C$zuar,b2World.Step_s_stepTimer=new C$zub,b2World.Step_s_timer=new C$zub,b2World.DrawDebugData_s_color=new C$zud(0,0,0),b2World.DrawDebugData_s_vs=C$zuj.MakeArray(4),b2World.DrawDebugData_s_xf=new C$zuI,b2World.QueryFixtureShape_s_aabb=new C$zu_t,b2World.RayCast_s_input=new C$zuht,b2World.RayCast_s_output=new C$zuut,b2World.RayCast_s_point=new C$zuj,b2World.DrawJoint_s_p1=new C$zuj,b2World.DrawJoint_s_p2=new C$zuj,b2World.DrawJoint_s_color=new C$zud(.5,.8,.8),b2World.DrawJoint_s_c=new C$zud,b2World.DrawShape_s_ghostColor=new C$zud,b2World.SolveTOI_s_subStep=new C$zuar,b2World.SolveTOI_s_backup=new C$zu_,b2World.SolveTOI_s_backup1=new C$zu_,b2World.SolveTOI_s_backup2=new C$zu_,b2World.SolveTOI_s_toi_input=new C$zuEt,b2World.SolveTOI_s_toi_output=new C$zuPt;var C$zuRr=b2World;function b2World(C$zut){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new C$zurr,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new C$zuj,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new C$zunr,this.m_island=new C$zupr,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(C$zut)}var C$zuIr=function(C$zut,C$zue){this.prevBody=null,this.nextBody=null,this.prevController=null,this.nextController=null,this.controller=C$zut,this.body=C$zue};b2Controller.prototype.GetNext=function(){return this.m_next},b2Controller.prototype.GetPrev=function(){return this.m_prev},b2Controller.prototype.GetBodyList=function(){return this.m_bodyList},b2Controller.prototype.AddBody=function(C$zut){var C$zue=new C$zuIr(this,C$zut);C$zue.nextBody=this.m_bodyList,C$zue.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=C$zue),this.m_bodyList=C$zue,++this.m_bodyCount,C$zue.nextController=C$zut.m_controllerList,C$zue.prevController=null,C$zut.m_controllerList&&(C$zut.m_controllerList.prevController=C$zue),C$zut.m_controllerList=C$zue,++C$zut.m_controllerCount},b2Controller.prototype.RemoveBody=function(C$zut){if(this.m_bodyCount<=0)throw new Error;var C$zue=this.m_bodyList;for(;C$zue&&C$zue.body!==C$zut;)C$zue=C$zue.nextBody;if(null===C$zue)throw new Error;C$zue.prevBody&&(C$zue.prevBody.nextBody=C$zue.nextBody),C$zue.nextBody&&(C$zue.nextBody.prevBody=C$zue.prevBody),this.m_bodyList===C$zue&&(this.m_bodyList=C$zue.nextBody),--this.m_bodyCount,C$zue.nextController&&(C$zue.nextController.prevController=C$zue.prevController),C$zue.prevController&&(C$zue.prevController.nextController=C$zue.nextController),C$zut.m_controllerList===C$zue&&(C$zut.m_controllerList=C$zue.nextController),--C$zut.m_controllerCount},b2Controller.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0};var C$zuBr=b2Controller;function b2Controller(){this.m_bodyList=null,this.m_bodyCount=0,this.m_prev=null,this.m_next=null}__extends(b2BuoyancyController,C$zuLr=C$zuBr),b2BuoyancyController.prototype.Step=function(C$zuh){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());for(var C$zut=this.m_bodyList;C$zut;C$zut=C$zut.nextBody){var C$zue=C$zut.body;if(C$zue.IsAwake()){var C$zui=new C$zuj;var C$zur=new C$zuj;var C$zun=0;var C$zua=0;for(var C$zuo=C$zue.GetFixtureList();C$zuo;C$zuo=C$zuo.m_next){var C$zus=new C$zuj;var C$zuc=C$zuo.GetShape().ComputeSubmergedArea(this.normal,this.offset,C$zue.GetTransform(),C$zus);C$zun+=C$zuc,C$zui.x+=C$zuc*C$zus.x,C$zui.y+=C$zuc*C$zus.y;var C$zuu;C$zua+=C$zuc*(C$zuu=this.useDensity?C$zuo.GetDensity():1),C$zur.x+=C$zuc*C$zus.x*C$zuu,C$zur.y+=C$zuc*C$zus.y*C$zuu}var C$zul;C$zui.x/=C$zun,C$zui.y/=C$zun,C$zur.x/=C$zua,C$zur.y/=C$zua,C$zun<C$zuE||((C$zul=this.gravity.Clone().SelfNeg()).SelfMul(this.density*C$zun),C$zue.ApplyForce(C$zul,C$zur),(C$zul=C$zue.GetLinearVelocityFromWorldPoint(C$zui,new C$zuj)).SelfSub(this.velocity),C$zul.SelfMul(-this.linearDrag*C$zun),C$zue.ApplyForce(C$zul,C$zui),C$zue.ApplyTorque(-C$zue.GetInertia()/C$zue.GetMass()*C$zun*C$zue.GetAngularVelocity()*this.angularDrag))}}}},b2BuoyancyController.prototype.Draw=function(C$zut){var C$zue=new C$zuj;var C$zui=new C$zuj;C$zue.x=this.normal.x*this.offset+100*this.normal.y,C$zue.y=this.normal.y*this.offset-100*this.normal.x,C$zui.x=this.normal.x*this.offset-100*this.normal.y,C$zui.y=this.normal.y*this.offset+100*this.normal.x;var C$zur=new C$zud(0,0,.8);C$zut.DrawSegment(C$zue,C$zui,C$zur)};var C$zuDr=b2BuoyancyController;function b2BuoyancyController(){var C$zut=null!==C$zuLr&&C$zuLr.apply(this,arguments)||this;return C$zut.normal=new C$zuj(0,1),C$zut.offset=0,C$zut.density=0,C$zut.velocity=new C$zuj(0,0),C$zut.linearDrag=0,C$zut.angularDrag=0,C$zut.useDensity=!1,C$zut.useWorldGravity=!0,C$zut.gravity=new C$zuj(0,0),C$zut}var C$zuLr;__extends(b2ConstantAccelController,C$zuOr=C$zuBr),b2ConstantAccelController.prototype.Step=function(C$zut){var C$zue=C$zuj.MulSV(C$zut.dt,this.A,b2ConstantAccelController.Step_s_dtA);for(var C$zui=this.m_bodyList;C$zui;C$zui=C$zui.nextBody){var C$zur=C$zui.body;C$zur.IsAwake()&&C$zur.SetLinearVelocity(C$zuj.AddVV(C$zur.GetLinearVelocity(),C$zue,C$zuj.s_t0))}},b2ConstantAccelController.prototype.Draw=function(C$zut){},b2ConstantAccelController.Step_s_dtA=new C$zuj;var C$zuVr=b2ConstantAccelController;function b2ConstantAccelController(){var C$zut=null!==C$zuOr&&C$zuOr.apply(this,arguments)||this;return C$zut.A=new C$zuj(0,0),C$zut}var C$zuOr;__extends(b2ConstantForceController,C$zuNr=C$zuBr),b2ConstantForceController.prototype.Step=function(C$zut){for(var C$zue=this.m_bodyList;C$zue;C$zue=C$zue.nextBody){var C$zui=C$zue.body;C$zui.IsAwake()&&C$zui.ApplyForce(this.F,C$zui.GetWorldCenter())}},b2ConstantForceController.prototype.Draw=function(C$zut){};var C$zuFr=b2ConstantForceController;function b2ConstantForceController(){var C$zut=null!==C$zuNr&&C$zuNr.apply(this,arguments)||this;return C$zut.F=new C$zuj(0,0),C$zut}var C$zuNr;__extends(b2GravityController,C$zuzr=C$zuBr),b2GravityController.prototype.Step=function(C$zuh){if(this.invSqr)for(var C$zut=this.m_bodyList;C$zut;C$zut=C$zut.nextBody){var C$zue=(C$zun=C$zut.body).GetWorldCenter();var C$zuu=C$zun.GetMass();for(var C$zui=this.m_bodyList;C$zui&&C$zui!==C$zut;C$zui=C$zui.nextBody){var C$zur=(C$zua=C$zui.body).GetWorldCenter();var C$zu_=C$zua.GetMass();(C$zuc=(C$zuo=C$zur.x-C$zue.x)*C$zuo+(C$zus=C$zur.y-C$zue.y)*C$zus)<C$zuE||((C$zul=b2GravityController.Step_s_f.Set(C$zuo,C$zus)).SelfMul(this.G/C$zuc/C$zuX(C$zuc)*C$zuu*C$zu_),C$zun.IsAwake()&&C$zun.ApplyForce(C$zul,C$zue),C$zua.IsAwake()&&C$zua.ApplyForce(C$zul.SelfMul(-1),C$zur))}}else for(C$zut=this.m_bodyList;C$zut;C$zut=C$zut.nextBody){var C$zun;C$zue=(C$zun=C$zut.body).GetWorldCenter();C$zuu=C$zun.GetMass();for(C$zui=this.m_bodyList;C$zui&&C$zui!==C$zut;C$zui=C$zui.nextBody){var C$zua;C$zur=(C$zua=C$zui.body).GetWorldCenter();C$zu_=C$zua.GetMass();var C$zuo;var C$zus;var C$zuc;var C$zul;(C$zuc=(C$zuo=C$zur.x-C$zue.x)*C$zuo+(C$zus=C$zur.y-C$zue.y)*C$zus)<C$zuE||((C$zul=b2GravityController.Step_s_f.Set(C$zuo,C$zus)).SelfMul(this.G/C$zuc*C$zuu*C$zu_),C$zun.IsAwake()&&C$zun.ApplyForce(C$zul,C$zue),C$zua.IsAwake()&&C$zua.ApplyForce(C$zul.SelfMul(-1),C$zur))}}},b2GravityController.prototype.Draw=function(C$zut){},b2GravityController.Step_s_f=new C$zuj;var C$zukr=b2GravityController;function b2GravityController(){var C$zut=null!==C$zuzr&&C$zuzr.apply(this,arguments)||this;return C$zut.G=1,C$zut.invSqr=!0,C$zut}var C$zuzr;__extends(b2TensorDampingController,C$zuUr=C$zuBr),b2TensorDampingController.prototype.Step=function(C$zut){var C$zue=C$zut.dt;if(!(C$zue<=C$zuE)){C$zue>this.maxTimestep&&0<this.maxTimestep&&(C$zue=this.maxTimestep);for(var C$zui=this.m_bodyList;C$zui;C$zui=C$zui.nextBody){var C$zur=C$zui.body;var C$zun;C$zur.IsAwake()&&(C$zun=C$zur.GetWorldVector(C$zug.MulMV(this.T,C$zur.GetLocalVector(C$zur.GetLinearVelocity(),C$zuj.s_t0),C$zuj.s_t1),b2TensorDampingController.Step_s_damping),C$zur.SetLinearVelocity(C$zuj.AddVV(C$zur.GetLinearVelocity(),C$zuj.MulSV(C$zue,C$zun,C$zuj.s_t0),C$zuj.s_t1)))}}},b2TensorDampingController.prototype.Draw=function(C$zut){},b2TensorDampingController.prototype.SetAxisAligned=function(C$zut,C$zue){this.T.ex.x=-C$zut,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-C$zue,this.maxTimestep=0<C$zut||0<C$zue?1/C$zuL(C$zut,C$zue):0},b2TensorDampingController.Step_s_damping=new C$zuj;var C$zuGr=b2TensorDampingController;function b2TensorDampingController(){var C$zut=null!==C$zuUr&&C$zuUr.apply(this,arguments)||this;return C$zut.T=new C$zug,C$zut.maxTimestep=0,C$zut}var C$zuUr;function C$zuROT(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new C$zuj(0,0),this.damping=.1,this.k2=.9,this.k3=.1}b2Rope.prototype.GetVertexCount=function(){return this.m_count},b2Rope.prototype.GetVertices=function(){return this.m_ps},b2Rope.prototype.Initialize=function(C$zut){this.m_count=C$zut.count,this.m_ps=C$zuj.MakeArray(this.m_count),this.m_p0s=C$zuj.MakeArray(this.m_count),this.m_vs=C$zuj.MakeArray(this.m_count),this.m_ims=b2MakeNumberArray(this.m_count);for(var C$zue=0;C$zue<this.m_count;++C$zue){this.m_ps[C$zue].Copy(C$zut.vertices[C$zue]),this.m_p0s[C$zue].Copy(C$zut.vertices[C$zue]),this.m_vs[C$zue].SetZero();var C$zui=C$zut.masses[C$zue];this.m_ims[C$zue]=0<C$zui?1/C$zui:0}var C$zur=this.m_count-1;var C$zun=this.m_count-2;this.m_Ls=b2MakeNumberArray(C$zur),this.m_as=b2MakeNumberArray(C$zun);for(C$zue=0;C$zue<C$zur;++C$zue){var C$zua=this.m_ps[C$zue];var C$zuo=this.m_ps[C$zue+1];this.m_Ls[C$zue]=C$zuj.DistanceVV(C$zua,C$zuo)}for(C$zue=0;C$zue<C$zun;++C$zue){C$zua=this.m_ps[C$zue];C$zuo=this.m_ps[C$zue+1];var C$zus=this.m_ps[C$zue+2];var C$zuc=C$zuj.SubVV(C$zuo,C$zua,C$zuj.s_t0);C$zus=C$zuj.SubVV(C$zus,C$zuo,C$zuj.s_t1);var C$zul=C$zuj.CrossVV(C$zuc,C$zus);C$zuc=C$zuj.DotVV(C$zuc,C$zus);this.m_as[C$zue]=C$zuv(C$zul,C$zuc)}this.m_gravity.Copy(C$zut.gravity),this.m_damping=C$zut.damping,this.m_k2=C$zut.k2,this.m_k3=C$zut.k3},b2Rope.prototype.Step=function(C$zut,C$zue){if(0!==C$zut){var C$zui=Math.exp(-C$zut*this.m_damping);for(var C$zur=0;C$zur<this.m_count;++C$zur)this.m_p0s[C$zur].Copy(this.m_ps[C$zur]),0<this.m_ims[C$zur]&&this.m_vs[C$zur].SelfMulAdd(C$zut,this.m_gravity),this.m_vs[C$zur].SelfMul(C$zui),this.m_ps[C$zur].SelfMulAdd(C$zut,this.m_vs[C$zur]);for(C$zur=0;C$zur<C$zue;++C$zur)this.SolveC2(),this.SolveC3(),this.SolveC2();var C$zun=1/C$zut;for(C$zur=0;C$zur<this.m_count;++C$zur)C$zuj.MulSV(C$zun,C$zuj.SubVV(this.m_ps[C$zur],this.m_p0s[C$zur],C$zuj.s_t0),this.m_vs[C$zur])}},b2Rope.prototype.SolveC2=function(){var C$zut=this.m_count-1;for(var C$zue=0;C$zue<C$zut;++C$zue){var C$zui=this.m_ps[C$zue];var C$zur=this.m_ps[C$zue+1];var C$zun=C$zuj.SubVV(C$zur,C$zui,b2Rope.s_d);var C$zua=C$zun.Normalize();var C$zuo=this.m_ims[C$zue];var C$zus=this.m_ims[C$zue+1];var C$zuc;C$zuo+C$zus!==0&&(C$zuc=C$zus/(C$zuo+C$zus),C$zui.SelfMulSub(this.m_k2*(C$zuo/(C$zuo+C$zus))*(this.m_Ls[C$zue]-C$zua),C$zun),C$zur.SelfMulAdd(this.m_k2*C$zuc*(this.m_Ls[C$zue]-C$zua),C$zun))}},b2Rope.prototype.SetAngle=function(C$zut){var C$zue=this.m_count-2;for(var C$zui=0;C$zui<C$zue;++C$zui)this.m_as[C$zui]=C$zut},b2Rope.prototype.SolveC3=function(){var C$zuh=this.m_count-2;for(var C$zut=0;C$zut<C$zuh;++C$zut){var C$zuu=this.m_ps[C$zut];var C$zue=this.m_ps[C$zut+1];var C$zu_=this.m_ps[C$zut+2];var C$zud=this.m_ims[C$zut];var C$zuf=this.m_ims[C$zut+1];var C$zup=this.m_ims[C$zut+2];var C$zui=C$zuj.SubVV(C$zue,C$zuu,b2Rope.s_d1);var C$zur=C$zuj.SubVV(C$zu_,C$zue,b2Rope.s_d2);var C$zun=C$zui.LengthSquared();var C$zua=C$zur.LengthSquared();if(C$zun*C$zua!=0){var C$zuo=C$zuj.CrossVV(C$zui,C$zur);var C$zus=C$zuj.DotVV(C$zui,C$zur);var C$zuc=C$zuv(C$zuo,C$zus);C$zuo=C$zuj.MulSV(-1/C$zun,C$zui.SelfSkew(),b2Rope.s_Jd1);C$zus=C$zuj.MulSV(1/C$zua,C$zur.SelfSkew(),b2Rope.s_Jd2);C$zun=C$zuj.NegV(C$zuo,b2Rope.s_J1);C$zui=C$zuj.SubVV(C$zuo,C$zus,b2Rope.s_J2);C$zua=C$zus;C$zur=C$zud*C$zuj.DotVV(C$zun,C$zun)+C$zuf*C$zuj.DotVV(C$zui,C$zui)+C$zup*C$zuj.DotVV(C$zua,C$zua);if(0!=C$zur){C$zur=1/C$zur;var C$zul=C$zuc-this.m_as[C$zut];for(;C$zum<C$zul;)C$zul=(C$zuc-=2*C$zum)-this.m_as[C$zut];for(;C$zul<-C$zum;)C$zul=(C$zuc+=2*C$zum)-this.m_as[C$zut];C$zuo=-this.m_k3*C$zur*C$zul;C$zuu.SelfMulAdd(C$zud*C$zuo,C$zun),C$zue.SelfMulAdd(C$zuf*C$zuo,C$zui),C$zu_.SelfMulAdd(C$zup*C$zuo,C$zua)}}}},b2Rope.prototype.Draw=function(C$zut){var C$zue=new C$zud(.4,.5,.7);for(var C$zui=0;C$zui<this.m_count-1;++C$zui)C$zut.DrawSegment(this.m_ps[C$zui],this.m_ps[C$zui+1],C$zue)},b2Rope.s_d=new C$zuj,b2Rope.s_d1=new C$zuj,b2Rope.s_d2=new C$zuj,b2Rope.s_Jd1=new C$zuj,b2Rope.s_Jd2=new C$zuj,b2Rope.s_J1=new C$zuj,b2Rope.s_J2=new C$zuj;var C$zuWr=b2Rope;function b2Rope(){this.m_count=0,this.m_ps=[],this.m_p0s=[],this.m_vs=[],this.m_ims=[],this.m_Ls=[],this.m_as=[],this.m_gravity=new C$zuj,this.m_damping=0,this.m_k2=1,this.m_k3=.1}C$zuH.b2Assert=function(C$zut){var C$zue=[];for(var C$zui=1;C$zui<arguments.length;C$zui++)C$zue[C$zui-1]=arguments[C$zui];if(!C$zut)throw new(Error.bind.apply(Error,[void 0].concat(C$zue)))},C$zuH.b2Maybe=b2Maybe,C$zuH.b2_maxFloat=C$zuB,C$zuH.b2_epsilon=C$zuE,C$zuH.b2_epsilon_sq=C$zuy,C$zuH.b2_pi=C$zum,C$zuH.b2_maxManifoldPoints=2,C$zuH.b2_maxPolygonVertices=8,C$zuH.b2_aabbExtension=.1,C$zuH.b2_aabbMultiplier=2,C$zuH.b2_linearSlop=.008,C$zuH.b2_angularSlop=C$zuP,C$zuH.b2_polygonRadius=.016,C$zuH.b2_maxSubSteps=8,C$zuH.b2_maxTOIContacts=32,C$zuH.b2_velocityThreshold=1,C$zuH.b2_maxLinearCorrection=.2,C$zuH.b2_maxAngularCorrection=C$zup,C$zuH.b2_maxTranslation=2,C$zuH.b2_maxTranslationSquared=4,C$zuH.b2_maxRotation=C$zuS,C$zuH.b2_maxRotationSquared=C$zuT,C$zuH.b2_baumgarte=.2,C$zuH.b2_toiBaumgarte=.75,C$zuH.b2_invalidParticleIndex=-1,C$zuH.b2_maxParticleIndex=2147483647,C$zuH.b2_particleStride=.75,C$zuH.b2_minParticleWeight=1,C$zuH.b2_maxParticlePressure=.25,C$zuH.b2_maxParticleForce=.5,C$zuH.b2_maxTriadDistance=2,C$zuH.b2_maxTriadDistanceSquared=4,C$zuH.b2_minParticleSystemBufferCapacity=256,C$zuH.b2_barrierCollisionTime=2.5,C$zuH.b2_timeToSleep=.5,C$zuH.b2_linearSleepTolerance=.01,C$zuH.b2_angularSleepTolerance=C$zut,C$zuH.b2Alloc=function(C$zut){return null},C$zuH.b2Free=function(C$zut){},C$zuH.b2Log=function(C$zut){var C$zue=[];for(var C$zui=1;C$zui<arguments.length;C$zui++)C$zue[C$zui-1]=arguments[C$zui]},C$zuH.b2Version=C$zue,C$zuH.b2_version=C$zui,C$zuH.b2_branch="master",C$zuH.b2_commit="fbf51801d80fc389d43dc46524520e89043b6faf",C$zuH.b2ParseInt=function(C$zut){return parseInt(C$zut,10)},C$zuH.b2ParseUInt=function(C$zut){return Math.abs(parseInt(C$zut,10))},C$zuH.b2MakeArray=b2MakeArray,C$zuH.b2MakeNullArray=function(C$zut){var C$zue=[];for(var C$zui=0;C$zui<C$zut;++C$zui)C$zue.push(null);return C$zue},C$zuH.b2MakeNumberArray=b2MakeNumberArray,C$zuH.b2_pi_over_180=.017453292519944444,C$zuH.b2_180_over_pi=57.29577951307855,C$zuH.b2_two_pi=6.28318530718,C$zuH.b2Abs=C$zuM,C$zuH.b2Min=C$zuD,C$zuH.b2Max=C$zuL,C$zuH.b2Clamp=b2Clamp,C$zuH.b2Swap=function(C$zut,C$zue){var C$zui=C$zut[0];C$zut[0]=C$zue[0],C$zue[0]=C$zui},C$zuH.b2IsValid=C$zur,C$zuH.b2Sq=b2Sq,C$zuH.b2InvSqrt=b2InvSqrt,C$zuH.b2Sqrt=C$zuX,C$zuH.b2Pow=C$zuo,C$zuH.b2DegToRad=function(C$zut){return.017453292519944444*C$zut},C$zuH.b2RadToDeg=function(C$zut){return 57.29577951307855*C$zut},C$zuH.b2Cos=C$zun,C$zuH.b2Sin=C$zua,C$zuH.b2Acos=C$zus,C$zuH.b2Asin=C$zuc,C$zuH.b2Atan2=C$zuv,C$zuH.b2NextPowerOfTwo=function(C$zut){return(C$zut=(C$zut=(C$zut=(C$zut=(C$zut|=C$zut>>1&2147483647)|C$zut>>2&1073741823)|C$zut>>4&268435455)|C$zut>>8&16777215)|C$zut>>16&65535)+1},C$zuH.b2IsPowerOfTwo=function(C$zut){return 0<C$zut&&0==(C$zut&C$zut-1)},C$zuH.b2Random=function(){return 2*Math.random()-1},C$zuH.b2RandomRange=function(C$zut,C$zue){return(C$zue-C$zut)*Math.random()+C$zut},C$zuH.b2Vec2=C$zuj,C$zuH.b2Vec2_zero=C$zul,C$zuH.b2Vec3=C$zuh,C$zuH.b2Mat22=C$zug,C$zuH.b2Mat33=C$zuu,C$zuH.b2Rot=C$zuR,C$zuH.b2Transform=C$zuI,C$zuH.b2Sweep=C$zu_,C$zuH.b2Color=C$zud,C$zuH.b2Draw=C$zuf,C$zuH.b2Timer=C$zub,C$zuH.b2Counter=C$zuC,C$zuH.b2GrowableStack=C$zux,C$zuH.b2BlockAllocator=C$zuI7T,C$zuH.b2StackAllocator=C$zuy7T,C$zuH.b2ContactFeature=C$zunt,C$zuH.b2ContactID=C$zuat,C$zuH.b2ManifoldPoint=C$zuot,C$zuH.b2Manifold=C$zust,C$zuH.b2WorldManifold=C$zuct,C$zuH.b2GetPointStates=function(C$zut,C$zue,C$zui,C$zur){var C$zun;for(C$zun=0;C$zun<C$zui.pointCount;++C$zun){var C$zua=C$zui.points[C$zun].id.key;C$zut[C$zun]=C$zuH.b2PointState.b2_removeState;for(var C$zuo=0,C$zus=C$zur.pointCount;C$zuo<C$zus;++C$zuo)if(C$zur.points[C$zuo].id.key===C$zua){C$zut[C$zun]=C$zuH.b2PointState.b2_persistState;break}}for(;C$zun<2;++C$zun)C$zut[C$zun]=C$zuH.b2PointState.b2_nullState;for(C$zun=0;C$zun<C$zur.pointCount;++C$zun){C$zua=C$zur.points[C$zun].id.key;C$zue[C$zun]=C$zuH.b2PointState.b2_addState;for(C$zuo=0,C$zus=C$zui.pointCount;C$zuo<C$zus;++C$zuo)if(C$zui.points[C$zuo].id.key===C$zua){C$zue[C$zun]=C$zuH.b2PointState.b2_persistState;break}}for(;C$zun<2;++C$zun)C$zue[C$zun]=C$zuH.b2PointState.b2_nullState},C$zuH.b2ClipVertex=C$zult,C$zuH.b2RayCastInput=C$zuht,C$zuH.b2RayCastOutput=C$zuut,C$zuH.b2AABB=C$zu_t,C$zuH.b2TestOverlapAABB=b2TestOverlapAABB,C$zuH.b2ClipSegmentToLine=b2ClipSegmentToLine,C$zuH.b2TestOverlapShape=b2TestOverlapShape,C$zuH.b2DistanceProxy=C$zuA,C$zuH.b2SimplexCache=C$zuw,C$zuH.b2DistanceInput=C$zuV,C$zuH.b2DistanceOutput=C$zuO,C$zuH.b2ShapeCastInput=C$zuS7T,C$zuH.b2ShapeCastOutput=C$zuK7T,C$zuH.b2_gjk_reset=function(){C$zuH.b2_gjkCalls=0,C$zuH.b2_gjkIters=0,C$zuH.b2_gjkMaxIters=0},C$zuH.b2SimplexVertex=C$zuF,C$zuH.b2Simplex=C$zuN,C$zuH.b2Distance=b2Distance,C$zuH.b2ShapeCast=function(C$zut,C$zue){C$zut.iterations=0,C$zut.lambda=1,C$zut.normal.SetZero(),C$zut.point.SetZero();var C$zui=C$zue.proxyA;var C$zur=C$zue.proxyB;var C$zuh=C$zuL(C$zui.m_radius,.016)+C$zuL(C$zur.m_radius,.016);var C$zun=C$zue.transformA;var C$zua=C$zue.transformB;var C$zuo=C$zue.translationB;var C$zuu=C$zu$.Set(0,0);var C$zu_=0;var C$zus=C$zuZ;C$zus.m_count=0;var C$zud=C$zus.m_vertices;var C$zuf=C$zui.GetSupport(C$zuR.MulTRV(C$zun.q,C$zuj.NegV(C$zuo,C$zuj.s_t1),C$zuj.s_t0));var C$zup=C$zuI.MulXV(C$zun,C$zui.GetVertex(C$zuf),C$zuQ);var C$zum=C$zur.GetSupport(C$zuR.MulTRV(C$zua.q,C$zuo,C$zuj.s_t0));var C$zuv=C$zuI.MulXV(C$zua,C$zur.GetVertex(C$zum),C$zuK);var C$zuc=C$zuj.SubVV(C$zup,C$zuv,C$zutt);var C$zuy=C$zuL(.016,C$zuh-.016);var C$zug=0;for(;C$zug<20&&.004<C$zuM(C$zuc.Length()-C$zuy);){C$zut.iterations+=1,C$zuf=C$zui.GetSupport(C$zuR.MulTRV(C$zun.q,C$zuj.NegV(C$zuc,C$zuj.s_t1),C$zuj.s_t0)),C$zup=C$zuI.MulXV(C$zun,C$zui.GetVertex(C$zuf),C$zuQ),C$zum=C$zur.GetSupport(C$zuR.MulTRV(C$zua.q,C$zuc,C$zuj.s_t0)),C$zuv=C$zuI.MulXV(C$zua,C$zur.GetVertex(C$zum),C$zuK);var C$zul=C$zuj.SubVV(C$zup,C$zuv,C$zuet);C$zuc.Normalize();C$zul=C$zuj.DotVV(C$zuc,C$zul);var C$zub=C$zuj.DotVV(C$zuc,C$zuo);if(C$zu_*C$zub<C$zul-C$zuy){if(C$zub<=0)return!1;if(1<(C$zu_=(C$zul-C$zuy)/C$zub))return!1;C$zuu.Copy(C$zuc).SelfNeg(),C$zus.m_count=0}C$zul=C$zud[C$zus.m_count];switch(C$zul.indexA=C$zum,C$zul.wA.Copy(C$zuv).SelfMulAdd(C$zu_,C$zuo),C$zul.indexB=C$zuf,C$zul.wB.Copy(C$zup),C$zul.w.Copy(C$zul.wB).SelfSub(C$zul.wA),C$zul.a=1,C$zus.m_count+=1,C$zus.m_count){case 1:break;case 2:C$zus.Solve2();break;case 3:C$zus.Solve3()}if(3===C$zus.m_count)return!1;C$zus.GetClosestPoint(C$zuc),++C$zug}return C$zus.GetWitnessPoints(C$zuit,C$zurt),0<C$zuc.LengthSquared()&&(C$zuu.Copy(C$zuc).SelfNeg(),C$zuu.Normalize()),C$zut.normal.Copy(C$zuu),C$zut.lambda=C$zu_,C$zut.iterations=C$zug,!0},C$zuH.b2Pair=C$zuyt,C$zuH.b2BroadPhase=C$zugt,C$zuH.b2PairLessThan=b2PairLessThan,C$zuH.b2TreeNode=C$zumt,C$zuH.b2DynamicTree=C$zuvt,C$zuH.b2_toi_reset=function(){C$zuH.b2_toiTime=0,C$zuH.b2_toiMaxTime=0,C$zuH.b2_toiCalls=0,C$zuH.b2_toiIters=0,C$zuH.b2_toiMaxIters=0,C$zuH.b2_toiRootIters=0,C$zuH.b2_toiMaxRootIters=0},C$zuH.b2TOIInput=C$zuEt,C$zuH.b2TOIOutput=C$zuPt,C$zuH.b2SeparationFunction=C$zuMt,C$zuH.b2TimeOfImpact=b2TimeOfImpact,C$zuH.b2CollideCircles=b2CollideCircles,C$zuH.b2CollidePolygonAndCircle=b2CollidePolygonAndCircle,C$zuH.b2CollidePolygons=b2CollidePolygons,C$zuH.b2CollideEdgeAndCircle=b2CollideEdgeAndCircle,C$zuH.b2CollideEdgeAndPolygon=b2CollideEdgeAndPolygon,C$zuH.b2MassData=C$zuxe,C$zuH.b2Shape=C$zuAe,C$zuH.b2CircleShape=C$zuye,C$zuH.b2PolygonShape=C$zube,C$zuH.b2EdgeShape=C$zuEe,C$zuH.b2ChainShape=C$zuMe,C$zuH.b2Filter=C$zuIe,C$zuH.b2FixtureDef=C$zuBe,C$zuH.b2FixtureProxy=C$zuDe,C$zuH.b2Fixture=C$zuLe,C$zuH.b2BodyDef=C$zueET,C$zuH.b2Body=C$zuVe,C$zuH.b2World=C$zuRr,C$zuH.b2DestructionListener=C$zuZi,C$zuH.b2ContactFilter=C$zuQi,C$zuH.b2ContactImpulse=C$zuKi,C$zuH.b2ContactListener=C$zutr,C$zuH.b2QueryCallback=C$zuer,C$zuH.b2RayCastCallback=C$zuir,C$zuH.b2Island=C$zupr,C$zuH.b2Profile=C$zunr,C$zuH.b2TimeStep=C$zuar,C$zuH.b2Position=C$zuor,C$zuH.b2Velocity=C$zusr,C$zuH.b2SolverData=C$zucr,C$zuH.b2ContactManager=C$zurr,C$zuH.b2MixFriction=b2MixFriction,C$zuH.b2MixRestitution=b2MixRestitution,C$zuH.b2ContactEdge=C$zuDi,C$zuH.b2Contact=C$zuLi,C$zuH.b2ContactRegister=C$zuYi,C$zuH.b2ContactFactory=C$zu$i,C$zuH.g_blockSolve=!1,C$zuH.b2VelocityConstraintPoint=C$zulr,C$zuH.b2ContactVelocityConstraint=C$zuhr,C$zuH.b2ContactPositionConstraint=C$zuur,C$zuH.b2ContactSolverDef=C$zu_r,C$zuH.b2PositionSolverManifold=C$zudr,C$zuH.b2ContactSolver=C$zufr,C$zuH.b2CircleContact=C$zuVi,C$zuH.b2PolygonContact=C$zuFi,C$zuH.b2PolygonAndCircleContact=C$zuki,C$zuH.b2EdgeAndCircleContact=C$zuGi,C$zuH.b2EdgeAndPolygonContact=C$zuWi,C$zuH.b2ChainAndCircleContact=C$zuji,C$zuH.b2ChainAndPolygonContact=C$zuqi,C$zuH.b2Jacobian=C$zuOe,C$zuH.b2JointEdge=C$zuFe,C$zuH.b2JointDef=C$zuSET,C$zuH.b2Joint=C$zuNe,C$zuH.b2AreaJointDef=C$zuWe,C$zuH.b2AreaJoint=C$zuje,C$zuH.b2DistanceJointDef=C$zuke,C$zuH.b2DistanceJoint=C$zuGe,C$zuH.b2FrictionJointDef=C$zuqe,C$zuH.b2FrictionJoint=C$zuYe,C$zuH.b2GearJointDef=C$zuZe,C$zuH.b2GearJoint=C$zuKe,C$zuH.b2MotorJointDef=C$zuei,C$zuH.b2MotorJoint=C$zuri,C$zuH.b2MouseJointDef=C$zuai,C$zuH.b2MouseJoint=C$zusi,C$zuH.b2PrismaticJointDef=C$zuli,C$zuH.b2PrismaticJoint=C$zuui,C$zuH.b2_minPulleyLength=2,C$zuH.b2PulleyJointDef=C$zudi,C$zuH.b2PulleyJoint=C$zupi,C$zuH.b2RevoluteJointDef=C$zuvi,C$zuH.b2RevoluteJoint=C$zugi,C$zuH.b2RopeJointDef=C$zuCi,C$zuH.b2RopeJoint=C$zuAi,C$zuH.b2WeldJointDef=C$zuTi,C$zuH.b2WeldJoint=C$zuEi,C$zuH.b2WheelJointDef=C$zuMi,C$zuH.b2WheelJoint=C$zuIi,C$zuH.b2ControllerEdge=C$zuIr,C$zuH.b2Controller=C$zuBr,C$zuH.b2BuoyancyController=C$zuDr,C$zuH.b2ConstantAccelController=C$zuVr,C$zuH.b2ConstantForceController=C$zuFr,C$zuH.b2GravityController=C$zukr,C$zuH.b2TensorDampingController=C$zuGr,C$zuH.b2ParticleDef=C$zumr,C$zuH.b2CalculateParticleIterations=b2CalculateParticleIterations,C$zuH.b2ParticleHandle=C$zuvr,C$zuH.b2ParticleGroupDef=C$zuyr,C$zuH.b2ParticleGroup=C$zugr,C$zuH.b2GrowableBuffer=C$zuxr,C$zuH.b2FixtureParticleQueryCallback=C$zuAr,C$zuH.b2ParticleContact=C$zuTr,C$zuH.b2ParticleBodyContact=C$zuwr,C$zuH.b2ParticlePair=C$zuEr,C$zuH.b2ParticleTriad=C$zuPr,C$zuH.b2ParticleSystemDef=C$zuMr,C$zuH.b2RopeDef=C$zuROT,C$zuH.b2Rope=C$zuWr,Object.defineProperty(C$zuH,"__esModule",{value:!0})},"object"==typeof C$zui&&void 0!==C$zue?C$zur(C$zui):"function"==typeof define&&define.amd?define(["exports"],C$zur):C$zur((void 0).box2d={})},{}],363:[function(C$zut,C$zue,C$zui){"use strict";var C$zur="undefined"==typeof window?global:window;C$zur.cc=C$zur.cc||{},cc.internal=cc.internal||{},C$zut("./predefine"),C$zut("./polyfill/string"),C$zut("./polyfill/misc"),C$zut("./polyfill/array"),C$zut("./polyfill/object"),C$zut("./polyfill/array-buffer"),C$zut("./polyfill/number"),C$zut("./polyfill/typescript"),C$zut("./cocos2d/core/predefine"),C$zut("./cocos2d"),C$zut("./extends"),C$zue.exports=C$zur.cc},{"./cocos2d":292,"./cocos2d/core/predefine":214,"./extends":350,"./package":void 0,"./polyfill/array":365,"./polyfill/array-buffer":364,"./polyfill/misc":366,"./polyfill/number":367,"./polyfill/object":368,"./polyfill/string":369,"./polyfill/typescript":370,"./predefine":371}],364:[function(C$zut,C$zue,C$zui){"use strict";var C$zur;ArrayBuffer.isView||(C$zur=Object.getPrototypeOf(Int8Array),ArrayBuffer.isView="function"==typeof C$zur?function(C$zut){return C$zut instanceof C$zur}:function(C$zut){if("object"!=typeof C$zut)return!1;C$zut=C$zut.constructor;return C$zut===Float32Array||C$zut===Uint8Array||C$zut===Uint32Array||C$zut===Int8Array})},{}],365:[function(C$zut,C$zue,C$zui){"use strict";Array.isArray||(Array.isArray=function(C$zut){return"[object Array]"===Object.prototype.toString.call(C$zut)}),Array.prototype.find||(Array.prototype.find=function(C$zut){var C$zue=this.length;for(var C$zui=0;C$zui<C$zue;C$zui++){var C$zur=this[C$zui];if(C$zut.call(this,C$zur,C$zui,this))return C$zur}}),Array.prototype.includes||(Array.prototype.includes=function(C$zut){return-1!==this.indexOf(C$zut)})},{}],366:[function(C$zut,C$zue,C$zui){"use strict";var C$zur,C$zun;Math.sign||(Math.sign=function(C$zut){return 0===(C$zut=+C$zut)||isNaN(C$zut)?C$zut:0<C$zut?1:-1}),Math.log2||(Math.log2=function(C$zut){return Math.log(C$zut)*Math.LOG2E}),Number.isInteger||(Number.isInteger=function(C$zut){return"number"==typeof C$zut&&isFinite(C$zut)&&Math.floor(C$zut)===C$zut}),console.time||(C$zur=window.performance||Date,C$zun=Object.create(null),console.time=function(C$zut){C$zun[C$zut]=C$zur.now()},console.timeEnd=function(C$zut){var C$zue=C$zun[C$zut];C$zue=C$zur.now()-C$zue;console.log(C$zut+": "+C$zue+"ms")})},{}],367:[function(C$zut,C$zue,C$zui){"use strict";Number.parseFloat=Number.parseFloat||parseFloat,Number.parseInt=Number.parseInt||parseInt},{}],368:[function(C$zut,C$zue,C$zui){"use strict";Object.assign||(Object.assign=function(C$zut,C$zue){return cc.js.mixin(C$zut,C$zue)}),Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(C$zut){var C$zue={};var C$zui=Object.getOwnPropertyNames(C$zut);Object.getOwnPropertySymbols&&(C$zui=C$zui.concat(Object.getOwnPropertySymbols(C$zut)));for(var C$zur=0;C$zur<C$zui.length;++C$zur){var C$zun=C$zui[C$zur];C$zue[C$zun]=Object.getOwnPropertyDescriptor(C$zut,C$zun)}return C$zue})},{}],369:[function(C$zut,C$zue,C$zui){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(C$zut,C$zue){return this.lastIndexOf(C$zut,C$zue=C$zue||0)===C$zue}),String.prototype.endsWith||(String.prototype.endsWith=function(C$zut,C$zue){(void 0===C$zue||C$zue>this.length)&&(C$zue=this.length),C$zue-=C$zut.length;C$zut=this.indexOf(C$zut,C$zue);return-1!==C$zut&&C$zut===C$zue}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")})},{}],370:[function(C$zut,C$zue,C$zui){"use strict";var C$zur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$zut,C$zue){C$zut.__proto__=C$zue}||function(C$zut,C$zue){for(var C$zui in C$zue)C$zue.hasOwnProperty(C$zui)&&(C$zut[C$zui]=C$zue[C$zui])};window.__extends=function(C$zut,C$zue){function __(){this.constructor=C$zut}C$zur(C$zut,C$zue),C$zut.prototype=null===C$zue?Object.create(C$zue):(__.prototype=C$zue.prototype,new __)},window.__assign=Object.assign||function(C$zut){for(var C$zue,C$zui=1,C$zur=arguments.length;C$zui<C$zur;C$zui++)for(var C$zun in C$zue=arguments[C$zui])Object.prototype.hasOwnProperty.call(C$zue,C$zun)&&(C$zut[C$zun]=C$zue[C$zun]);return C$zut},window.__rest=function(C$zut,C$zue){var C$zui={};for(var C$zur in C$zut)Object.prototype.hasOwnProperty.call(C$zut,C$zur)&&C$zue.indexOf(C$zur)<0&&(C$zui[C$zur]=C$zut[C$zur]);if(null!=C$zut&&"function"==typeof Object.getOwnPropertySymbols)for(var C$zun=0,C$zur=Object.getOwnPropertySymbols(C$zut);C$zun<C$zur.length;C$zun++)C$zue.indexOf(C$zur[C$zun])<0&&(C$zui[C$zur[C$zun]]=C$zut[C$zur[C$zun]]);return C$zui},window.__decorate=function(C$zut,C$zue,C$zui,C$zur){var C$zun,C$zua=arguments.length,C$zuo=C$zua<3?C$zue:null===C$zur?C$zur=Object.getOwnPropertyDescriptor(C$zue,C$zui):C$zur;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C$zuo=Reflect.decorate(C$zut,C$zue,C$zui,C$zur);else for(var C$zus=C$zut.length-1;0<=C$zus;C$zus--)(C$zun=C$zut[C$zus])&&(C$zuo=(C$zua<3?C$zun(C$zuo):3<C$zua?C$zun(C$zue,C$zui,C$zuo):C$zun(C$zue,C$zui))||C$zuo);return 3<C$zua&&C$zuo&&Object.defineProperty(C$zue,C$zui,C$zuo),C$zuo},window.__param=function(C$zui,C$zur){return function(C$zut,C$zue){C$zur(C$zut,C$zue,C$zui)}},window.__metadata=function(C$zut,C$zue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(C$zut,C$zue)},window.__awaiter=function(C$zui,C$zur,C$zun,C$zua){return new(C$zun=C$zun||Promise)(function(C$zut,C$zue){function fulfilled(C$zut){try{step(C$zua.next(C$zut))}catch(C$zut){C$zue(C$zut)}}function rejected(C$zut){try{step(C$zua.throw(C$zut))}catch(C$zut){C$zue(C$zut)}}function step(C$zue){C$zue.done?C$zut(C$zue.value):new C$zun(function(C$zut){C$zut(C$zue.value)}).then(fulfilled,rejected)}step((C$zua=C$zua.apply(C$zui,C$zur||[])).next())})},window.__generator=function(C$zur,C$zun){var C$zua,C$zuo,C$zus,C$zut,C$zuc={label:0,sent:function(){if(1&C$zus[0])throw C$zus[1];return C$zus[1]},trys:[],ops:[]};return C$zut={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(C$zut[Symbol.iterator]=function(){return this}),C$zut;function verb(C$zui){return function(C$zut){var C$zue=[C$zui,C$zut];if(C$zua)throw new TypeError("Generator is already executing.");for(;C$zuc;)try{if(C$zua=1,C$zuo&&(C$zus=2&C$zue[0]?C$zuo.return:C$zue[0]?C$zuo.throw||((C$zus=C$zuo.return)&&C$zus.call(C$zuo),0):C$zuo.next)&&!(C$zus=C$zus.call(C$zuo,C$zue[1])).done)return C$zus;switch(C$zuo=0,(C$zue=C$zus?[2&C$zue[0],C$zus.value]:C$zue)[0]){case 0:case 1:C$zus=C$zue;break;case 4:return C$zuc.label++,{value:C$zue[1],done:!1};case 5:C$zuc.label++,C$zuo=C$zue[1],C$zue=[0];continue;case 7:C$zue=C$zuc.ops.pop(),C$zuc.trys.pop();continue;default:if(!(C$zus=0<(C$zus=C$zuc.trys).length&&C$zus[C$zus.length-1])&&(6===C$zue[0]||2===C$zue[0])){C$zuc=0;continue}if(3===C$zue[0]&&(!C$zus||C$zue[1]>C$zus[0]&&C$zue[1]<C$zus[3])){C$zuc.label=C$zue[1];break}if(6===C$zue[0]&&C$zuc.label<C$zus[1]){C$zuc.label=C$zus[1],C$zus=C$zue;break}if(C$zus&&C$zuc.label<C$zus[2]){C$zuc.label=C$zus[2],C$zuc.ops.push(C$zue);break}C$zus[2]&&C$zuc.ops.pop(),C$zuc.trys.pop();continue}C$zue=C$zun.call(C$zur,C$zuc)}catch(C$zut){C$zue=[6,C$zut],C$zuo=0}finally{C$zua=C$zus=0}if(5&C$zue[0])throw C$zue[1];return{value:C$zue[0]?C$zue[1]:void 0,done:!0}}}},window.__exportStar=function(C$zut,C$zue){for(var C$zui in C$zut)C$zue.hasOwnProperty(C$zui)||(C$zue[C$zui]=C$zut[C$zui])},window.__values=function(C$zut){var C$zue="function"==typeof Symbol&&C$zut[Symbol.iterator],C$zui=0;return C$zue?C$zue.call(C$zut):{next:function(){return{value:(C$zut=C$zut&&C$zui>=C$zut.length?void 0:C$zut)&&C$zut[C$zui++],done:!C$zut}}}},window.__read=function(C$zut,C$zue){var C$zui="function"==typeof Symbol&&C$zut[Symbol.iterator];if(!C$zui)return C$zut;var C$zur,C$zun,C$zua=C$zui.call(C$zut),C$zuo=[];try{for(;(void 0===C$zue||0<C$zue--)&&!(C$zur=C$zua.next()).done;)C$zuo.push(C$zur.value)}catch(C$zut){C$zun={error:C$zut}}finally{try{C$zur&&!C$zur.done&&(C$zui=C$zua.return)&&C$zui.call(C$zua)}finally{if(C$zun)throw C$zun.error}}return C$zuo},window.__spread=function(){for(var C$zut=[],C$zue=0;C$zue<arguments.length;C$zue++)C$zut=C$zut.concat(__read(arguments[C$zue]));return C$zut},window.__await=function(C$zut){return this instanceof __await?(this.v=C$zut,this):new __await(C$zut)},window.__asyncGenerator=function(C$zut,C$zue,C$zui){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C$zun,C$zua=C$zui.apply(C$zut,C$zue||[]),C$zuo=[];return C$zun={},verb("next"),verb("throw"),verb("return"),C$zun[Symbol.asyncIterator]=function(){return this},C$zun;function verb(C$zur){C$zua[C$zur]&&(C$zun[C$zur]=function(C$zui){return new Promise(function(C$zut,C$zue){1<C$zuo.push([C$zur,C$zui,C$zut,C$zue])||resume(C$zur,C$zui)})})}function resume(C$zut,C$zue){try{(C$zui=C$zua[C$zut](C$zue)).value instanceof __await?Promise.resolve(C$zui.value.v).then(fulfill,reject):settle(C$zuo[0][2],C$zui)}catch(C$zut){settle(C$zuo[0][3],C$zut)}var C$zui}function fulfill(C$zut){resume("next",C$zut)}function reject(C$zut){resume("throw",C$zut)}function settle(C$zut,C$zue){C$zut(C$zue),C$zuo.shift(),C$zuo.length&&resume(C$zuo[0][0],C$zuo[0][1])}},window.__asyncDelegator=function(C$zur){var C$zut,C$zun;return C$zut={},verb("next"),verb("throw",function(C$zut){throw C$zut}),verb("return"),C$zut[Symbol.iterator]=function(){return this},C$zut;function verb(C$zue,C$zui){C$zut[C$zue]=C$zur[C$zue]?function(C$zut){return(C$zun=!C$zun)?{value:__await(C$zur[C$zue](C$zut)),done:"return"===C$zue}:C$zui?C$zui(C$zut):C$zut}:C$zui}},window.__asyncValues=function(C$zuo){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C$zut,C$zue=C$zuo[Symbol.asyncIterator];return C$zue?C$zue.call(C$zuo):(C$zuo="function"==typeof __values?__values(C$zuo):C$zuo[Symbol.iterator](),C$zut={},verb("next"),verb("throw"),verb("return"),C$zut[Symbol.asyncIterator]=function(){return this},C$zut);function verb(C$zua){C$zut[C$zua]=C$zuo[C$zua]&&function(C$zun){return new Promise(function(C$zut,C$zue){var C$zui,C$zur;C$zun=C$zuo[C$zua](C$zun),C$zui=C$zut,C$zut=C$zue,C$zur=C$zun.done,C$zue=C$zun.value,Promise.resolve(C$zue).then(function(C$zut){C$zui({value:C$zut,done:C$zur})},C$zut)})}}},window.__makeTemplateObject=function(C$zut,C$zue){return Object.defineProperty?Object.defineProperty(C$zut,"raw",{value:C$zue}):C$zut.raw=C$zue,C$zut},window.__importStar=function(C$zut){if(C$zut&&C$zut.__esModule)return C$zut;var C$zue={};if(null!=C$zut)for(var C$zui in C$zut)Object.hasOwnProperty.call(C$zut,C$zui)&&(C$zue[C$zui]=C$zut[C$zui]);return C$zue.default=C$zut,C$zue},window.__importDefault=function(C$zut){return C$zut&&C$zut.__esModule?C$zut:{default:C$zut}}},{}],371:[function(C$zut,C$zue,C$zui){"use strict";var C$zur="undefined"==typeof window?global:window;function defineDeprecatedMacroGetter(C$zue,C$zui){void 0===C$zur[C$zue]&&Object.defineProperty(C$zur,C$zue,{get:function(){var C$zut;return"CC_WECHATGAMESUB"===C$zue?C$zut="cc.sys.platform === cc.sys.WECHAT_GAME_SUB":"CC_WECHATGAME"===C$zue?C$zut="cc.sys.platform === cc.sys.WECHAT_GAME":"CC_QQPLAY"===C$zue&&(C$zut="cc.sys.platform === cc.sys.QQ_PLAY"),cc.warnID(1400,C$zue,C$zut),C$zui}})}function defined(C$zut){return"object"==typeof C$zur[C$zut]}C$zua=!(C$zun="CC_BUILD"),void 0===C$zur[C$zun]&&(C$zur[C$zun]=C$zua),C$zur.CC_BUILD=!0,C$zur.CC_DEV=!1,C$zur.CC_DEBUG=!0,C$zur.CC_JSB=!1,C$zur.CC_NATIVERENDERER=!1,C$zur.CC_SUPPORT_JIT=!1,C$zur.CC_PHYSICS_BUILTIN=!1,C$zur.CC_PHYSICS_CANNON=!1,C$zur.CC_EDITOR=!1,C$zur.CC_PREVIEW=!1,C$zur.CC_TEST=!1,C$zur.CC_RUNTIME=!1,C$zur.CC_JSB=!1;var C$zun=!(!defined("wx")||!wx.getSharedCanvas);var C$zua=!(!defined("wx")||!wx.getSystemInfoSync&&!wx.getSharedCanvas);var C$zuo=defined("bk");defineDeprecatedMacroGetter("CC_WECHATGAMESUB",C$zun),defineDeprecatedMacroGetter("CC_WECHATGAME",C$zua),defineDeprecatedMacroGetter("CC_QQPLAY",C$zuo);C$zur.CocosEngine=cc.ENGINE_VERSION="2.3.3"},{}]},{},[363]);