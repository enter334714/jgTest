!function(e){var n={};function t(i){if(n[i])return n[i].exports;var l=n[i]={i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var l in e)t.d(i,l,function(n){return e[n]}.bind(null,l));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n){!function(){var e,n,t,i,l="",o=void 0;function d(n){n&&e.trackEvent(1022,931,"value1="+l+"&value2="+n)}function c(t){n?(d("stop_all_control"),function(){let n=document.body.children[0];document.body.removeChild(n),document.body.innerHTML='\n      <div class="dialog-plugin">\n        <h2>确定不让迅雷接管下载吗？</h2>\n        <p>不接管下载，将失去迅雷高速下载服务</p>\n        <a href="javascript:;" title="关闭" class="icon-close"></a>\n        <div class="dialog-plugin__footer">\n          <button id="off-take-over-sure" class="button">确定</button>\n          <button id="off-take-over-cancel" class="button button--other">取消</button>\n        </div>\n      </div>\n      ';let t=document.getElementById("off-take-over-sure");t&&t.addEventListener("click",function(){e.setPluginEnabled(!1),window.close()});let i=document.getElementById("off-take-over-cancel");i&&i.addEventListener("click",function(){window.close()})}()):(d("start_all_control"),e.setPluginEnabled(!n),window.close())}function r(){d("advanced_setting"),window.open(chrome.extension.getURL("options.html")),window.close()}function s(){d("open_xunlei"),e.startThunder(),window.close()}function a(i){n&&(chrome.tabs.getSelected(null,function(n){var i=n.url,l=i.indexOf("://");if(l>=0){var o,c=i.indexOf("/",l+3);o=c>=0?i.substring(0,c):i,t?(d("open_control_current_site"),e.removeBlackListWebsite(o,n.url,n.id)):(d("cancel_control_current_site"),e.addBlackListWebsite(o,n.id))}}),window.close())}function u(t){d("more_choice_download"),n&&chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(n){if(n)for(var t=0;t<n.length;t++){var i=n[t];e.enterMultiDownload(i.id,i.url)}}),window.close()}function v(e){d("download_picture_entrance_click");do{if(!n)break;if(!e){h("该页面不支持下载");break}chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(e){if(e&&e.length>0)for(var n=0;n<e.length;n++){let t="xl-images.html?tabId="+e[n].id;window.open(chrome.extension.getURL(t)),window.close();break}else window.close()})}while(0)}function m(n){let t=function(){let e="";do{let n=navigator.userAgent;if(n.match(/compatible/i)||n.match(/Windows/i)){e="https://down.sandai.net/thunder11/XunLeiWebSetup_ext.exe";break}if(n.match(/Macintosh/i)||n.match(/MacIntel/i)){e="https://down.sandai.net/mac/thunder.dmg";break}}while(0);return e}();t&&chrome.tabs.create({url:t},function(){}),e.trackEvent(1022,927)}function b(){let e=document.body.children[0];document.body.removeChild(e),document.body.innerHTML='\n      <div class="xly-dialog-abnormal">\n        <h2>迅雷下载支持异常</h2>\n        <p class="xly-dialog-abnormal__text">您还没安装迅雷，无法支持文件下载，请先安装最新版迅雷。</p>\n        <button id="install-thunder" class="td-button">立即安装</button>\n        <p class="xly-dialog-abnormal__tips">安装后，重启浏览器生效</p>\n      </div>\n      ',document.getElementById("install-thunder").addEventListener("click",m)}function p(){l="not_open_site",e.trackEvent(1022,930,"value1="+l);let n=document.body.children[0];document.body.removeChild(n),document.body.innerHTML='\n      <div class="browser-plugin">\n        <div class="browser-plugin__header">\n          <h1>迅雷</h1>\n        </div>\n        <div class="browser-plugin__main is-active">\n          <i class="icon-internet"></i>\n          <p>迅雷下载支持<br>提供更快的链接和视频的下载\n            </p>\n        </div>\n        <div class="browser-plugin__list">\n          <ul>\n            <li id=\'start-thunder-li\'>打开迅雷</li>\n            <li id=\'multi-sel-pic\'>批量图片下载</li>\n            <li id=\'enter-multi-sel\'>多选下载 <span class="shortcut-key">Shift+D</span></li>\n            <li id=\'pop-setting-li\'>高级设置</li>\n            <li id=\'take-over-switch-li\'>暂停全部接管</li>\n          </ul>\n        </div>\n      </div>\n    ',document.getElementById("take-over-switch-li").addEventListener("click",c),document.getElementById("pop-setting-li").addEventListener("click",r),document.getElementById("start-thunder-li").addEventListener("click",s),document.getElementById("enter-multi-sel").addEventListener("click",u),document.getElementById("multi-sel-pic").addEventListener("click",()=>{v(!1)})}function f(n,t){l=t?"open_not_control_site":"open_control_site",e.trackEvent(1022,930,"value1="+l);let i=document.body.children[0];document.body.removeChild(i),document.body.innerHTML=`\n      <div class="browser-plugin">\n        <div class="browser-plugin__header">\n          <h1>迅雷</h1>\n        </div>\n        <div class="${t?"browser-plugin__main":"browser-plugin__main is-active"}">\n          <i class="icon-internet"></i> \n          <p>${n}<br>\n            ${t?"该网站已取消下载接管<br>开启后可使用迅雷高速下载":"已接管该网站的下载链接"}\n            </p>\n          <button id='take-over-website-switch' class="button">${t?"开启接管本站点":"取消接管本站点"}</button>\n        </div>\n        <div class="browser-plugin__list">\n          <ul>\n            <li id='start-thunder-li'>打开迅雷</li>\n            <li id='multi-sel-pic'>批量图片下载</li>\n            <li id='enter-multi-sel'>多选下载 <span class="shortcut-key">Shift+D</span></li>\n            <li id='pop-setting-li'>高级设置</li>\n            <li id='take-over-switch-li'>暂停全部接管</li>\n          </ul>\n        </div>\n      </div>\n    `,document.getElementById("pop-setting-li").addEventListener("click",r),document.getElementById("start-thunder-li").addEventListener("click",s),document.getElementById("enter-multi-sel").addEventListener("click",u),document.getElementById("multi-sel-pic").addEventListener("click",()=>{v(!0)}),document.getElementById("take-over-switch-li").addEventListener("click",c),document.getElementById("take-over-website-switch").addEventListener("click",a)}function h(e){o&&(clearTimeout(o),o=void 0);let n=document.body.children[0];document.body.removeChild(n),document.body.innerHTML=`\n      <div class="xl-tips">\n        <i class="icon-note"></i>${e}\n      </div>\n    `,o=setTimeout(()=>{o=void 0,window.close()},3e3)}function g(e){let n=e;do{let t=e.indexOf("://");if(-1===t)break;if(-1===(t=e.indexOf("/",t+3)))break;n=e.substring(0,t)}while(0);return n}window.showGuidePage=b,document.addEventListener("DOMContentLoaded",function(){e=chrome.extension.getBackgroundPage();do{if(o&&(clearTimeout(o),o=void 0),e.isException()){b();break}if(!(n=e.isPluginEnabled())){l="stop_all_control",e.trackEvent(1022,930,"value1="+l),document.body.innerHTML='\n      <div class="browser-plugin">\n        <div class="browser-plugin__header">\n          <h1>迅雷</h1>\n        </div>\n        <div class="browser-plugin__main">\n          <i class="icon-internet"></i>\n          <p>已取消迅雷下载支持<br>\n          将无法为你提供高速下载\n            </p>\n          <button id=\'take-over-switch-btn\' class="button">开启接管</button>\n        </div>\n        <div class="browser-plugin__list">\n          <ul>\n            <li id=\'start-thunder-li\'>打开迅雷</li>\n            <li class=\'is-disabled\'>批量图片下载</li>\n            <li class=\'is-disabled\'>批量下载 <span class="shortcut-key">Shift+D</span></li>\n            <li id=\'pop-setting-li\'>高级设置</li>\n            <li id=\'take-over-switch-li\'>开启全部接管<span class="text">(建议开启)</span> </li>\n          </ul>\n        </div>\n      </div>\n      ',document.getElementById("take-over-switch-btn").addEventListener("click",c),document.getElementById("take-over-switch-li").addEventListener("click",c),document.getElementById("pop-setting-li").addEventListener("click",r),document.getElementById("start-thunder-li").addEventListener("click",s);break}chrome.tabs.getSelected(null,function(n){do{if(!n)break;let l=n.url;if(!l){p();break}if(-1===l.indexOf("http://")&&-1===l.indexOf("https://")&&-1===l.indexOf("ftp://")){p();break}let o=g(l);if(t=!e.isMonitorDomain(l),i=e.checkIsPageInUserBlackList(l),t||i){f(o,!0);break}f(o,!1)}while(0)})}while(0)})}()}]);
//# sourceMappingURL=popup.js.map