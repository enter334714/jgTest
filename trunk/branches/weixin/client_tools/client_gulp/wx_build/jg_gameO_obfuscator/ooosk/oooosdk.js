var c=wx.$o;import Sygame from"../utils/sysdk-wxapp";window[c[37170]]=Sygame;var config={game_id:c[37171],game_pkg:c[37172],partner_label:c[37173],partner_id:c[37174],game_ver:c[37175],is_auth:!1};window.config=config;var _oQAEU8=_oQE8UA();var HOST=c[37176];var _oQAE8U=null;var _oQEU8A=null;var partner_data={};var open_box_uv="";var click_box_uv="";function _oQE8UA(){var r={};return{order_data:{},init:function(e,o){e=e&&e.game_ver?e.game_ver:0;console.log(c[37177]);var t=this;var a;a=wx.getStorageSync(c[37178])?0:(a=t.uuid(16,32),wx.setStorageSync(c[37178],a),1),wx.getStorageSync(c[37179])||(n=t.uuid(16,32),wx.setStorageSync(c[37179],n));var n=wx.getLaunchOptionsSync();var r=n.scene||"";a&&n.query&&n.query.ad_code&&wx.setStorageSync(c[37180],n.query.ad_code),t.log(c[1176],{install:a,scene:r}),Sygame.init(n);t=n.query&&n.query.invite?n.query.invite:"";n=n.query&&n.query.invite_type?n.query.invite_type:"";t&&(_oQEU8A={invite:t,invite_type:n,is_new:a,scene:r}),e&&this.checkGameVersion(e,function(e){o&&o(e)})},login:function(e,o){var t=this;console.log(c[37181]),r[c[7619]]=typeof o==c[1978]?o:null,Sygame.syLogin().then(e=>{console.log(c[37182],e),1001===e.code?t.do_login(e):r[c[7619]]&&r[c[7619]](1,{errMsg:e.message})})},do_login:function(e){var t=this;partner_data={openid:e.openid,uid:e.uid,session_key:e.session_key};var o=t.getPublicData();if(o[c[37183]]=1,o[c[37184]]=JSON.stringify(partner_data),_oQEU8A&&typeof _oQEU8A==c[2197])for(var a in _oQEU8A)o[a]=_oQEU8A[a];wx.request({url:c[33234]+HOST+c[37185],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:o,success:function(e){if(console.log(c[37186],e),200===e.statusCode){e=e.data;if(e.state){partner_data.openid=e.data.ext;try{wx.setStorageSync(c[37187],e.data.sdk_token),wx.setStorageSync(c[37188],e.data.user_id),wx.setStorageSync(c[37189],e.data.username),e.data.ext&&wx.setStorageSync(c[37190],e.data.ext)}catch(e){}var o={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};r[c[7619]]&&r[c[7619]](0,o)}else r[c[7619]]&&r[c[7619]](1,{errMsg:e.msg});t.getShareInfo(c[37191],function(e){console.log(c[37192]),wx.onShareAppMessage(function(){return t.logStartShare(c[37191]),{title:e.title,imageUrl:e.img,query:e.query}})})}else r[c[7619]]&&r[c[7619]](1,{errMsg:c[37193]})}})},share:function(e){r[c[7723]]=typeof callback==c[1978]?callback:null;var o=e.type||c[7723];console.log(c[37194]+o);console.log(c[37195]),this.logStartShare(o);o={shareQuery:e.shareQuery||""};Sygame.goShareData(o)},logStartShare:function(e){var o=wx.getStorageSync(c[37187]);wx.request({url:c[33234]+HOST+c[37196],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:o,server_id:_oQAE8U?_oQAE8U.server_id:"",role_id:_oQAE8U?_oQAE8U.role_id:"",type:e},success:function(e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(e,t){console.log(c[37197]);wx.getStorageSync(c[37187]);wx.request({url:c[33234]+HOST+c[37198],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var o;console.log(c[37199]),console.log(e),200==e.statusCode&&(o=e.data).state?t&&t(o.data):t&&t({develop:0})}})},getShareInfo:function(e,o){console.log(c[37200]);var t=wx.getStorageSync(c[37187]);wx.request({url:c[33234]+HOST+c[37201],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,type:e,server_id:_oQAE8U?_oQAE8U.server_id:"",role_id:_oQAE8U?_oQAE8U.role_id:"",no_log:1},success:function(e){console.log(c[37202]),console.log(e),200==e.statusCode?(e=e.data).state?o&&o(e.data):r[c[7723]]&&r[c[7723]](1,{errMsg:c[37203]+e.msg}):r[c[7723]]&&r[c[7723]](1,{errMsg:c[37204]})}})},updateShare:function(e,o,t,a,n,r){console.log(c[37205]);var i=wx.getStorageSync(c[37187]);wx.request({url:c[33234]+HOST+c[37206],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:o,is_new:t,role_id:a,sever_id:n,scene:r},success:function(e){console.log(c[37207]),console.log(e)}})},msgCheck:function(e,o){console.log(c[37208]);let t={data:{}};Sygame.syMsgSecCheck({content:e,scene:1}).then(e=>{1001==e.status?(t.statusCode=200,t.data.state=1,console.log(c[37209]+JSON.stringify(e))):(t.statusCode=200,t.data.state=0,console.log(c[37210]+JSON.stringify(e))),o&&o(t)})},pay:function(e,o){this.startPay(e,o)},startPay:function(e,o){console.log(c[37211],e);var t=this;r[c[7699]]=typeof o==c[1978]?o:null;o=wx.getStorageSync(c[37187]);var a=wx.getStorageSync(c[37190]);var n;o||a?(n=wx.getSystemInfoSync(),e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:o,session_key:a,platform:n.platform},t.order_data=e,(o=t.getPublicData())[c[37213]]=JSON.stringify(e),o[c[37183]]=1,wx.request({url:c[33234]+HOST+c[37214],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:o,success:function(e){console.log(c[37215]),console.log(e),200===e.statusCode?(e=e.data).state&&e.data.pay_data?""==e.data.ext?(console.log(c[37216]+JSON.stringify(e.data.pay_data)),Sygame.syPay(e.data.pay_data).then(e=>{console.log(c[37217],e)})):t.extDo({ext1:e.data.ext,ext2:e.data.pay_data}):r[c[7699]]&&r[c[7699]](1,{errMsg:e.errMsg}):r[c[7619]]&&r[c[7619]](1,{errMsg:c[37193]})}})):r[c[7699]]&&r[c[7699]](1,{errMsg:c[37212]})},extDo:function(e){wx.navigateToMiniProgram({appId:e.ext1,path:c[37218]+e.ext2.cp_order_id+c[37219]+e.ext2.amount/100,extraData:{},envVersion:c[3068],success(e){}})},gamePay:function(e){var t=this;wx.request({url:c[33234]+HOST+c[37220]+config.partner_id+"/"+config.game_pkg,method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,pay_data:JSON.stringify(e),openid:partner_data.openid,session_key:partner_data.session_key},success:function(o){var e;console.log(c[37221],o),o.data.buyQuantity<=o.data.balance?(console.log(c[37222]),wx.showModal({title:c[37223],content:c[37224]+o.data.balance+c[37225]+o.data.buyQuantity+c[37226],showCancel:!1,confirmText:c[37227],success:function(){t.gameGoPay(o.data.callbackParams)}})):(console.log(c[37228]),e={mode:c[37229],env:o.data.env,offerId:o.data.offerId,currencyType:o.data.currencyType,buyQuantity:o.data.buyQuantity,zoneId:o.data.zoneId,platform:c[124],success:function(e){e.errMsg==c[37230]&&t.gameGoPay(o.data.callbackParams)},fail:function(e){console.log(c[37231],e),-1!==e.errMsg.indexOf(c[37232])?r[c[7699]]&&r[c[7699]](2,{errMsg:c[37233]}):r[c[7699]]&&r[c[7699]](1,{errMsg:c[37234]+e.errMsg})},complete:function(e){}},console.log(c[37235],e),wx.requestMidasPayment(e))}})},gameGoPay:function(e){console.log(c[37236]);wx.request({url:c[33234]+HOST+c[37237]+config.partner_id+"/"+config.game_pkg,method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{orderid:e.orderid,price:e.price,item_id:e.item_id,other:e.other,openid:e.openid,sign:e.sign},success:function(e){console.log(c[37238],e),0===e.data.state&&r[c[7699]]&&r[c[7699]](1,{errMsg:e.data.msg})},fail:function(){}})},logCreateRole:function(e){var o=wx.getStorageSync(c[37188]);var t=wx.getStorageSync(c[37189]);var a={};var n;a[c[37239]]=o,a[c[37240]]=t,a[c[18335]]=e.roleid,a[c[37241]]=e.rolelevel,a[c[37242]]=e.rolename,a[c[25]]=e.serverid,e.roleid&&e.serverid&&(_oQAE8U={role_id:e.roleid,server_id:e.serverid}),this.log(c[173],a),this.upRoleInfo(c[37243],e),_oQEU8A&&typeof _oQEU8A==c[2197]&&(n={pf_uid:o,partner_uid:partner_data.openid,role_id:e.roleid,role_name:e.rolename,server_id:e.serverid,server_name:e.servername,invite_code:_oQEU8A.invite,_oQEU8A:JSON.stringify(_oQEU8A),partner_user_info:JSON.stringify(partner_data)},wx.request({url:c[33234]+HOST+c[37244]+config.partner_id+"/"+config.game_pkg,method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:n,success:function(e){console.log(c[37245]+JSON.stringify(n)),console.log(c[37246]+JSON.stringify(e))}}))},logEnterGame:function(e){var o=wx.getStorageSync(c[37188]);var t=wx.getStorageSync(c[37189]);var a={};a[c[37239]]=o,a[c[37240]]=t,a[c[18335]]=e.roleid,a[c[37241]]=e.rolelevel,a[c[37242]]=e.rolename,a[c[25]]=e.serverid,e.roleid&&e.serverid&&(_oQAE8U={role_id:e.roleid,server_id:e.serverid}),this.log(c[1159],a),this.upRoleInfo(c[37247],e),_oQEU8A&&this.updateShare(_oQEU8A.invite,_oQEU8A.invite_type,_oQEU8A.is_new,e.roleid,e.serverid,_oQEU8A.scene)},logRoleUpLevel:function(e){var o=wx.getStorageSync(c[37188]);var t=wx.getStorageSync(c[37189]);var a={};a[c[37239]]=o,a[c[37240]]=t,a[c[18335]]=e.roleid,a[c[37241]]=e.rolelevel,a[c[37242]]=e.rolename,a[c[25]]=e.serverid,e.roleid&&e.serverid&&(_oQAE8U={role_id:e.roleid,server_id:e.serverid}),this.log(c[37248],a),this.upRoleInfo(c[37249],e)},upRoleInfo:function(e,o){e={report_type:e,role_id:o.roleid,role_name:o.rolename,role_level:o.rolelevel,server_id:o.serverid,server_name:o.servername,role_power:o.rolepower||0,role_vip:0};Sygame.syReportRoleInfo(e).then(e=>{console.log(c[37250],e)})},getBoxList:function(e,t){console.log(c[37251]);e={page:e.page||0,count:e.count||15};Sygame.syGetBoxList(e).then(e=>{let o={data:{},state:0};1001==e.status&&(o[c[482]]=1,o[c[483]]=e.data),t&&t(o)})},openBox:function(o){console.log(c[37252]),""===(open_box_uv=wx.getStorageSync(c[37253]))&&(wx.setStorageSync(c[37253],0),open_box_uv=1),wx.request({url:c[37254],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{appid:Sygame.appid,wecha_id:partner_data.openid,uv:open_box_uv},success:function(e){o&&o(e.data)}})},clickBoxGame:function(t){console.log(c[37255]),""===(click_box_uv=wx.getStorageSync(c[37256]))&&(wx.setStorageSync(c[37256],0),click_box_uv=1),wx.request({url:c[37257],method:c[7588],dataType:c[1543],header:{"content-type":c[2529]},data:{appid:Sygame.appid,wecha_id:partner_data.openid,uv:click_box_uv,game_id:t.game_id,tunnel_id:t.tunnel_id,jump_appid:t.jump_appid,jump_path:t.jump_path},success:function(e){var o={appId:t.jump_appid,path:t.jump_path,success:function(e){console.log(c[37258],e)},fail:function(e){console.log(c[37259],e)}};wx.navigateToMiniProgram(o)}})},subscribeMessage:function(e,o){console.log(c[37260]+e),r[c[7735]]=typeof o==c[1978]?o:null,wx.requestSubscribeMessage({tmplIds:e,success(e){console.log(c[37261]),console.log(e),r[c[7735]]&&r[c[7735]](e)},fail(e){console.log(c[37262]),console.log(e),r[c[7735]]&&r[c[7735]](e)}})},uuid:function(e,o){var t=c[37263].split("");var a,n=[];var r;if(e=e||t.length,o)for(a=0;a<o;a++)n[a]=t[0|Math.random()*e];else for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",a=0;a<36;a++)n[a]||(r=0|16*Math.random(),n[a]=t[19==a?3&r|8:r]);return n.join("")},getPublicData:function(){var e=wx.getSystemInfoSync();var o=wx.getStorageSync(c[37178]);var t=wx.getStorageSync(c[37179]);var a=wx.getStorageSync(c[37180]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,partner_label:config.partner_label,ad_code:a,uuid:o,idfv:t,dname:e.model,mac:c[37264],net_type:0==e.wifiSignal?"4G":c[37265],os_ver:e.system,sdk_ver:e.version,game_ver:config.game_ver,device:e.platform==c[124]?1:2}},log:function(e,o){var t=this.getPublicData();for(var a in o)t[a]=o[a];console.log(c[37266]+e),console.log(t),wx.request({url:c[33234]+HOST+c[37267]+e+c[37268]+encodeURIComponent(JSON.stringify(t))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()},weiduanHelper:function(){Sygame.syBindMobile()}}}function run(e,o,t){e in _oQAEU8&&_oQAEU8[e](o,t)}exports.init=function(e,o){run(c[527],e,o)},exports.login=function(e){run(c[7619],"",e)},exports.pay=function(e,o){run(c[7699],e,o)},exports.openService=function(){run(c[7724])},exports.logCreateRole=function(e,o,t,a,n){run(c[7714],{serverid:e,servername:o,roleid:t,rolename:a,rolelevel:n})},exports.logEnterGame=function(e,o,t,a,n,r,i){e={serverid:e,servername:o,roleid:t,rolename:a,rolelevel:n,rolecreatetime:r,rolepower:(i=i||{}).rolepower};run(c[7717],e)},exports.logRoleUpLevel=function(e,o,t,a,n,r,i){e={serverid:e,servername:o,roleid:t,rolename:a,rolelevel:n,rolecreatetime:r,rolepower:(i=i||{}).rolepower};run(c[7720],e)},exports.share=function(e){run(c[7723],{type:e})},exports.msgCheck=function(e,o){run(c[7566],e,o)},exports.getBoxList=function(e,o){run(c[37269],e,o)},exports.openBox=function(e){run(c[12770],e)},exports.clickBoxGame=function(e){run(c[37270],e)},exports.downloadClient=function(){run(c[37271])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getPublicData=function(){run(c[37272])},exports.weiduanHelper=function(){run(c[7726])},exports.subscribeMessage=function(e,o){run(c[7735],e,o)};