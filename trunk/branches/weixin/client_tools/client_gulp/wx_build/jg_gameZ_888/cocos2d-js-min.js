!function(C$s,C$o,C$t){function C$a(C$t,C$e){if(!(C$r=C$o[C$t])){var C$i=C$s[C$t];if(!C$i)return;var C$n={},C$r=C$o[C$t]={exports:C$n};C$i[0](function(C$t){return C$a(C$i[1][C$t]||C$t)},C$r,C$n)}return C$r.exports}for(var C$e=0;C$e<C$t.length;C$e++)C$a(C$t[C$e])}({1:[function(C$t,C$e,C$i){C$e.exports={1001:"cocos2d: removeAction: Target not found",1002:"cc.ActionManager.removeActionByTag(): an invalid tag",1003:"cc.ActionManager.removeActionByTag(): target must be non-null",1004:"cc.ActionManager.getActionByTag(): an invalid tag",1005:"cocos2d : getActionByTag(tag = %s): Action not found",1006:"[Action step]. override me",1007:"[Action update]. override me",1008:"cocos2d: FiniteTimeAction#reverse: Implement me",1009:"cc.EaseElastic.reverse(): it should be overridden in subclass.",1010:"cc.IntervalAction: reverse not implemented.",1011:"cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.",1012:"cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass.",1013:"The speed parameter error",1014:"The repeat parameter error",1015:"parameters should not be ending with null in Javascript",1016:"cc.RotateTo.reverse(): it should be overridden in subclass.",1019:"Failed to construct, Sequence construction needs two or more actions.",1020:"Failed to construct, Spawn construction needs two or more actions.",1021:"cc.Speed.initWithAction(): action must be non nil",1022:"cc.Follow.initWithAction(): followedNode must be non nil",1023:"cc.ActionEase.initWithAction(): action must be non nil",1024:"Invalid configuration. It must at least have one control point",1025:"cc.Sequence.initWithTwoActions(): arguments must all be non nil",1026:"cc.RepeatForever.initWithAction(): action must be non null",1027:"cc.Spawn.initWithTwoActions(): arguments must all be non null",1028:"cc.ReverseTime.initWithAction(): action must be non null",1029:"cc.ReverseTime.initWithAction(): the action was already passed in.",1030:"cc.Animate.initWithAnimation(): animation must be non-NULL",1031:"Illegal parameter get passed in cc.tween: %s.",1100:"Expected 'data' dict, but not found. Config file: %s",1101:"Please load the resource first : %s",1200:"cocos2d: Director: Error in gettimeofday",1201:"cocos2d: Director: unrecognized projection",1203:"cocos2d: Director: Error in gettimeofday",1204:"running scene should not null",1205:"the scene should not null",1206:"loadScene: The scene index to load (%s) is out of range.",1207:"loadScene: Unknown name type to load: '%s'",1208:"loadScene: Failed to load scene '%s' because '%s' is already being loaded.",1209:"loadScene: Can not load the scene '%s' because it was not in the build settings before playing.",1210:"Failed to preload '%s', %s",1211:"loadScene: The scene index to load (%s) is out of range.",1212:"loadScene: Unknown name type to load: '%s'",1213:"loadScene: Failed to load scene '%s' because '%s' is already loading",1214:"loadScene: Can not load the scene '%s' because it was not in the build settings before playing.",1215:"Failed to preload '%s', %s",1216:"Director.runSceneImmediate: scene is not valid",1300:"element type is wrong!",1400:"'%s' is deprecated, please use '%s' instead.",1404:"cc.spriteFrameCache is removed, please use cc.loader to load and cache sprite frames of atlas format.",1405:"The '%s' has been removed, please use '%s' instead.",1406:"'%s.%s' is removed",1408:"'%s' is not support in the '%s', please use '%s' instead.",1502:"cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",1503:"cc.Scheduler.pauseTarget():target should be non-null",1504:"cc.Scheduler.resumeTarget():target should be non-null",1505:"cc.Scheduler.isTargetPaused():target should be non-null",1506:"warning: you CANNOT change update priority in scheduled function",1507:'CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: %s to %s"',1508:"Argument callback must not be empty",1509:"Argument target must be non-nullptr",1510:"cc.Scheduler: Illegal target which doesn't have uuid or instanceId.",1511:"cc.Scheduler: pause state of the scheduled task doesn't match the element pause state in Scheduler, the given paused state will be ignored.",1513:"cc.Scheduler: scheduler stopped using `__instanceId` as id since v2.0, you should do scheduler.enableForTarget(target) before all scheduler API usage on target",1605:"child already added. It can't be added again",1606:"child must be non-null",1610:"cocos2d: removeChildByTag(tag = %s): child not found!",1612:"cc.Node.stopActionBy(): argument tag an invalid tag",1613:"cc.Node.getActionByTag(): argument tag is an invalid tag",1617:"child must be non-null",1618:"cc.Node.runAction(): action must be non-null",1619:"callback function must be non-null",1620:"interval must be positive",1623:"Set '%s' to normal node (not persist root node).",1624:"Replacing with the same sgNode",1625:"The replacement sgNode should not contain any child.",1626:"Should not set alpha via 'color', set 'opacity' please.",1627:"Not support for asynchronous creating node in SG",1632:"Node name can not include '/'.",1633:"Internal error, should not remove unknown node from parent.",1634:"addChild: The child to add must be instance of cc.Node, not %s.",1635:"reorderChild: this child is not in children list.",1636:"Node's zIndex value can't be greater than cc.macro.MAX_ZINDEX, setting to the maximum value",1637:"Node's zIndex value can't be smaller than cc.macro.MIN_ZINDEX, setting to the minimum value",1638:"Private node's zIndex can't be set, it will keep cc.macro.MIN_ZINDEX as its value",1639:"cc.Action is deprecated now, please use cc.TweenAction instead",1800:"cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",1801:"cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",1802:"cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",1803:"cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",1900:"Invalid parameter.",2e3:"Don't call this method if the event is for touch.",2200:"Resolution not valid",2201:"should set resolutionPolicy",2300:"The touches is more than MAX_TOUCHES, nUnusedIndex = %s",2400:"WebGL error %s",2602:"cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",2603:"cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",2606:"cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",2607:"cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",2608:"%s is null, please check.",2609:"cc.Sprite.initWithFile(): filename should be non-null",2610:"cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",2614:"cc.Sprite.addChild(): child should be non-null",2616:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",2617:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",2618:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",2619:"cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",2623:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",2625:"too many tiles, only 16384 tiles will be show",2626:"Unrecognized fill type in bar fill",2627:"Can not generate quad",2628:"%s does not exist",2712:"Invalid spriteFrameName",3005:"cocos2d: '%s' id=%s %s x %s",3006:"cocos2d: '%s' id= HTMLCanvasElement %s x %s",3007:"cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",3103:"cc.Texture.addImage(): path should be non-null",3112:"cc.Texture.addImage(): path should be non-null",3113:"NSInternalInconsistencyException",3116:"WebGLRenderingContext.CLAMP_TO_EDGE should be used in NPOT textures",3117:"Mimpap texture only works in POT textures",3119:"Lazy init texture with image element failed due to image loading failure: %s",3120:"Loading texture from '%s' with unsupported type: '%s'. Add '%s' into 'cc.macro.SUPPORT_TEXTURE_FORMATS' please.",3300:"Rect width exceeds maximum margin: %s",3400:"Rect height exceeds maximum margin: %s",3500:"0 priority is forbidden for fixed priority since it's used for scene graph based priority.",3501:"Invalid listener type!",3502:"Can't set fixed priority with scene graph based listener.",3503:"Invalid parameters.",3504:"listener must be a cc.EventListener object when adding a fixed priority listener",3505:"The listener has been registered, please don't register it again.",3506:"Unsupported listener target.",3507:"Invalid scene graph priority!",3508:"If program goes here, there should be event in dispatch.",3509:"_inDispatch should be 1 here.",3510:"%s's scene graph node not contains in the parent's children",3511:"event is undefined",3600:"cc.Class will automatically call super constructor of %s, you should not call it manually.",3601:"The editor property 'playOnFocus' should be used with 'executeInEditMode' in class '%s'",3602:"Unknown editor property '%s' in class '%s'.",3603:"Use 'cc.Float' or 'cc.Integer' instead of 'cc.Number' please.",3604:"Can only indicate one type attribute for %s.",3605:"The default value of %s is not instance of %s.",3606:"No needs to indicate the '%s' attribute for %s, which its default value is type of %s.",3607:"The default value of %s must be an empty string.",3608:"The type of %s must be cc.String, not String.",3609:"The type of %s must be cc.Boolean, not Boolean.",3610:"The type of %s must be cc.Float or cc.Integer, not Number.",3611:"Can not indicate the '%s' attribute for %s, which its default value is type of %s.",3612:"%s Just set the default value to 'new %s()' and it will be handled properly.",3613:"'No need to use 'serializable: false' or 'editorOnly: true' for the getter of '%s.%s', every getter is actually non-serialized.",3614:"Should not define constructor for cc.Component %s.",3615:"Each script can have at most one Component.",3616:"Should not specify class name %s for Component which defines in project.",3617:"Can not instantiate CCClass '%s' with arguments.",3618:"ctor of '%s' can not be another CCClass",3619:"ctor of '%s' must be function type",3620:"this._super declared in '%s.%s' but no super method defined",3621:"Unknown type of %s.%s, maybe you want is '%s'.",3622:"Unknown type of %s.%s, property should be defined in 'properties' or 'ctor'",3623:"Can not use 'editor' attribute, '%s' not inherits from Components.",3624:"'%s' overrided '%s' but '%s' is defined as 'false' so the super method will not be called. You can set '%s' to null to disable this warning.",3625:"[isChildClassOf] superclass should be function type, not",3626:"Can't remove '%s' because '%s' depends on it.",3627:"Should not add renderer component (%s) to a Canvas node.",3628:"Should not add %s to a node which size is already used by its other component.",3633:"Properties function of '%s' should return an object!",3634:"Disallow to use '.' in property name",3635:"Default array must be empty, set default value of %s.%s to [], and initialize in 'onLoad' or 'ctor' please. (just like 'this.%s = [...];')",3636:"Do not set default value to non-empty object, unless the object defines its own 'clone' function. Set default value of %s.%s to null or {}, and initialize in 'onLoad' or 'ctor' please. (just like 'this.%s = {foo: bar};')",3637:"Can not declare %s.%s, it is already defined in the prototype of %s",3638:"'%s': the getter of '%s' is already defined!",3639:"Can not apply the specified attribute to the getter of '%s.%s', attribute index: %s",3640:"'%s': the setter of '%s' is already defined!",3641:"Can not construct %s because it contains object property.",3642:"Cannot define %s.%s because static member name can not be '%s'.",3643:"Can not define a member called 'constructor' in the class '%s', please use 'ctor' instead.",3644:"Please define 'type' parameter of %s.%s as the actual constructor.",3645:"Please define 'type' parameter of %s.%s as the constructor of %s.",3646:"Unknown 'type' parameter of %s.%sï¼š%s",3647:"The length of range array must be equal or greater than 2",3648:"Can not declare %s.%s method, it is already defined in the properties of %s.",3649:"CCClass %s have conflict between its ctor and __ctor__.",3651:'Can not call `_super` or `prototype.ctor` in ES6 Classes "%s", use `super` instead please.',3652:"Failed to `new %s()` under the hood, %s\nIt is used for getting default values declared in TypeScript in the first place.\nPlease ensure the constructor can be called during the script's initialization.",3653:'Please do not specifiy "default" attribute in decorator of "%s" property in "%s" class.  \nDefault value must be initialized at their declaration:\n \n// Before:\n@property({\n  type: cc.Integer\n  default: 0  // <--\n})\nmyProp;\n// After:\n@property({\n  type: cc.Integer\n})\nmyProp = 0;   // <--',3654:'Please specifiy a default value for "%s.%s" at its declaration:\n \n// Before:\n@property(...)\nmyProp;\n// After:\n@property(...)\nmyProp = 0;',3655:'Can not specifiy "get" or "set"  attribute in decorator for "%s" property in "%s" class.  \nPlease use:\n \n@property(...)\nget %s () {\n    ...\n}\n@property\nset %s (value) {\n    ...\n}',3656:"The default value of %s.%s must be an empty string.",3700:"internal error: _prefab is undefined",3701:"Failed to load prefab asset for node '%s'",3800:"The target can not be made persist because it's not a cc.Node or it doesn't have _id property.",3801:"The node can not be made persist because it's not under root node.",3802:"The node can not be made persist because it's not in current scene.",3803:"The target can not be made persist because it's not a cc.Node or it doesn't have _id property.",3804:"getComponent: Type must be non-nil",3805:"Can't add component '%s' because %s already contains the same component.",3806:"Can't add component '%s' to %s because it conflicts with the existing '%s' derived component.",3807:"addComponent: Failed to get class '%s'",3808:"addComponent: Should not add component ('%s') when the scripts are still loading.",3809:"addComponent: The component to add must be a constructor",3810:"addComponent: The component to add must be child class of cc.Component",3811:"_addComponentAt: The component to add must be a constructor",3812:"_addComponentAt: Index out of range",3813:"removeComponent: Component must be non-nil",3814:"Argument must be non-nil",3815:"Component not owned by this entity",3816:"Node '%s' is already activating",3817:"Sorry, the component of '%s' which with an index of %s is corrupted! It has been removed.",3818:"Failed to read or parse project.json",3819:"Warning: target element is not a DIV or CANVAS",3820:"The renderer doesn't support the renderMode %s",3821:"Cannot change hierarchy while activating or deactivating the parent.",3900:"Invalid clip to add",3901:"Invalid clip to remove",3902:"clip is defaultClip, set force to true to force remove clip and animation state",3903:"animation state is playing, set force to true to force stop and remove clip and animation state",3904:"motion path of target [%s] in prop [%s] frame [%s] is not valid",3905:"sprite frames must be an Array.",3906:"Can't find easing type [%s]",3907:"animator not added or already removed",3912:"already-playing",4e3:"Sorry, the cc.Font has been modified from Raw Asset to Asset. Please load the font asset before using.",4003:"Label font size can't be shirnked less than 0!",4004:"force notify all fonts loaded!",4011:"Property spriteFrame of Font '%s' is invalid. Using system font instead.",4012:"The texture of Font '%s' must be already loaded on JSB. Using system font instead.",4013:"Sorry, lineHeight of system font not supported on JSB.",4200:"MaskType: IMAGE_STENCIL only support WebGL mode.",4201:"The alphaThreshold invalid in Canvas Mode.",4202:"The inverted invalid in Canvas Mode.",4300:"can not found the %s page.",4400:"Invalid RichText img tag! The sprite frame name can't be found in the ImageAtlas!",4600:"Script attached to '%s' is missing or invalid.",4700:"The dom control is not created!",4800:"unknown asset type",4901:"loadRes: should not specify the extname in %s %s",4902:"No need to release non-cached asset.",4903:"Can not get class '%s'",4914:"Resources url '%s' does not exist.",4915:"Pack indices and data do not match in size",4916:"Failed to download package for %s",4920:"Sorry, you shouldn't use id as item identity any more, please use url or uuid instead, the current id is being set as url: (%s)",4921:"Invalid pipe or invalid index provided!",4922:"The pipe to be inserted is already in the pipeline!",4923:"Uuid Loader: Parse asset [ %s ] failed : %s",4924:"JSON Loader: Input item doesn't contain string content",4925:"Uuid Loader: Deserialize asset [ %s ] failed : %s",4926:"Audio Downloader: no web audio context.",4927:"Audio Downloader: audio not supported on this browser!",4928:"Load %s failed!",4929:"Load Webp ( %s ) failed",4930:"Load image ( %s ) failed",4931:"Download Uuid: can not find type of raw asset[ %s ]: %s",4932:'Since v1.10, for any atlas ("%s") in the "resources" directory, it is not possible to find the contained SpriteFrames via `loadRes`, `getRes` or `releaseRes`. Load the SpriteAtlas first and then use `spriteAtlas.getSpriteFrame(name)` instead please.',4933:"Download Font [ %s ] failed, using Arial or system default font instead",5e3:"object already destroyed",5001:"object not yet destroyed",5100:"Not a plist file!",5200:"Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option",5201:"browser don't support web audio",5202:"This feature supports WebGL render mode only.",5300:"Type of target to deserialize not matched with data: target is %s, data is %s",5301:"Can not find script '%s'",5302:"Can not find class '%s'",5402:"cc.js.addon called on non-object:",5403:"cc.js.mixin: arguments must be type object:",5404:"The base class to extend from must be non-nil",5405:"The class to extend must be non-nil",5406:"Class should be extended before assigning any prototype members.",5500:"'notify' can not be used in 'get/set' !",5501:"'notify' must be used with 'default' !",5502:"Invalid url of %s.%s",5503:"The 'url' attribute of '%s.%s' is undefined when loading script.",5504:"The 'url' type of '%s.%s' must be child class of cc.RawAsset.",5505:"The 'url' type of '%s.%s' must not be child class of cc.Asset, otherwise you should use 'type: %s' instead.",5506:"Can not specify 'type' attribute for '%s.%s', because its 'url' is already defined.",5507:"The 'default' attribute of '%s.%s' must be an array",5508:"Invalid type of %s.%s",5509:"The 'type' attribute of '%s.%s' must be child class of cc.Asset, otherwise you should use 'url: %s' instead",5510:"The 'type' attribute of '%s.%s' can not be 'Number', use cc.Float or cc.Integer instead please.",5511:"The 'type' attribute of '%s.%s' is undefined when loading script",5512:"Can not serialize '%s.%s' because the specified type is anonymous, please provide a class name or set the 'serializable' attribute of '%s.%s' to 'false'.",5513:"The 'default' value of '%s.%s' should not be used with a 'get' function.",5514:"The 'default' value of '%s.%s' should not be used with a 'set' function.",5515:"The 'default' value of '%s.%s' can not be an constructor. Set default to null please.",5516:"Property '%s.%s' must define at least one of 'default', 'get' or 'set'.",5517:"'%s.%s' hides inherited property '%s.%s'. To make the current property override that implementation, add the `override: true` attribute please.",5601:"Can not get current scene.",5602:"Scene is destroyed",5603:"reference node is destroyed",5700:"no %s or %s on %s",5800:"%s.lerp not yet implemented.",5801:"%s.clone not yet implemented.",5802:"%s.equals not yet implemented.",5900:"MotionStreak only support WebGL mode.",5901:"cc.MotionStreak.getOpacity has not been supported.",5902:"cc.MotionStreak.setOpacity has not been supported.",6e3:"Custom should not be false if file is not specified.",6001:"The new %s must not be NaN",6017:"Incomplete or corrupt PNG file",6018:"Invalid filter algorithm: %s",6019:"Invalid byte order value.",6020:"You forgot your towel!",6021:"Unknown Field Tag: %s",6022:"Too many bits requested",6023:"No bits requested",6024:"Cannot recover from missing StripByteCounts",6025:"Cannot handle sub-byte bits per sample",6026:"Cannot handle sub-byte bits per pixel",6027:"Palette image missing color map",6028:"Unknown Photometric Interpretation: %s",6029:"Unkown error",6030:"cc.ParticleSystem: error decoding or ungzipping textureImageData",6031:"cc.ParticleSystem: unknown image format with Data",6032:"cc.ParticleSystem.initWithDictionary() : error loading the texture",6400:"asset.url is not usable in core process",6402:"AssetLibrary has already been initialized!",6500:"Widget target must be one of the parent nodes of it",6600:"collider not added or already removed",6601:"Can't find testFunc for (%s, $s).",6700:"Can't init canvas '%s' because it conflicts with the existing '%s', the scene should only have one active canvas at the same time.",6800:"Callback of event must be non-nil",6801:"The message must be provided",6900:"The thing you want to instantiate must be an object",6901:"The thing you want to instantiate is nil",6902:"The thing you want to instantiate is destroyed",6903:"The instantiate method for given asset do not implemented",6904:"Can not instantiate array",6905:"Can not instantiate DOM element",7e3:"Failed to init asset's raw path.",7001:"Should not load '%s' from script dynamically, unless it is placed in the 'resources' folder.",7002:"Sorry can not load '%s' because it is not placed in the 'resources' folder.",7003:"Failed to init builtin asset's raw path.",7100:"%s already defined in Enum.",7101:"Sorry, 'cc.Enum' not available on this platform, please report this error here: https://github.com/cocos-creator/engine/issues/new",7200:"Method 'initWithTMXFile' is no effect now, please set property 'tmxAsset' instead.",7201:"Method 'initWithXML' is no effect now, please set property 'tmxAsset' instead.",7202:"Add component TiledLayer into node failed.",7203:"Property 'mapLoaded' is unused now. Please write the logic to the callback 'start'.",7210:"TMX Hexa zOrder not supported",7211:"TMX invalid value",7215:"cocos2d: Warning: TMX Layer %s has no tiles",7216:"cocos2d: TMXFormat: Unsupported TMX version: %s",7217:"cocos2d: TMXFomat: Unsupported orientation: %s",7218:"cc.TMXMapInfo.parseXMLFile(): unsupported compression method",7219:"cc.TMXMapInfo.parseXMLFile(): Only base64 and/or gzip/zlib maps are supported",7221:"cc.TMXMapInfo.parseXMLFile(): Texture '%s' not found.",7222:"Parse %s failed.",7236:"cc.TMXLayer.getTileAt(): TMXLayer: the tiles map has been released",7237:"cc.TMXLayer.getTileGIDAt(): TMXLayer: the tiles map has been released",7238:"cc.TMXLayer.setTileGID(): TMXLayer: the tiles map has been released",7239:"cc.TMXLayer.setTileGID(): invalid gid: %s",7240:"cc.TMXLayer.getTileFlagsAt(): TMXLayer: the tiles map has been released",7241:"cc.TiledMap.initWithXML(): Map not found. Please check the filename.",7401:"Failed to set _defaultArmatureIndex for '%s' because the index is out of range.",7402:"Failed to set _animationIndex for '%s' because the index is out of range.",7501:"Failed to set _defaultSkinIndex for '%s' because the index is out of range.",7502:"Failed to set _animationIndex for '%s' because its skeletonData is invalid.",7503:"Failed to set _animationIndex for '%s' because the index is out of range.",7504:"Can not render dynamic created SkeletonData",7505:"Invalid type of atlasFile, atlas should be registered as raw asset.",7506:"Failed to load spine atlas '$s'",7507:"Please re-import '%s' because its textures is not initialized! (This workflow will be improved in the future.)",7508:"The atlas asset of '%s' is not exists!",7509:"Spine: Animation not found: %s",7510:"Spine: Animation not found: %s",7600:"The context of RenderTexture is invalid.",7601:"cc.RenderTexture._initWithWidthAndHeightForWebGL() : only RGB and RGBA formats are valid for a render texture;",7602:"Could not attach texture to the framebuffer",7603:"clearDepth isn't supported on Cocos2d-Html5",7604:"saveToFile isn't supported on Cocos2d-Html5",7605:"newCCImage isn't supported on Cocos2d-Html5",7700:"On the web is always keep the aspect ratio",7701:"Can't know status",7702:"Video player's duration is not ready to get now!",7800:"Web does not support loading",7801:"Web does not support query history",7802:"Web does not support query history",7803:"The current browser does not support the GoBack",7804:"The current browser does not support the GoForward",7805:"Web does not support zoom",7900:"cc.math.Matrix3.assign(): current matrix equals matIn",7901:"cc.math.mat4Assign(): pOut equals pIn",7902:"cc.mat.Matrix4.assignFrom(): mat4 equals current matrix",7903:"cc.math.Matrix4 equal: pMat1 and pMat2 are same object.",7904:"cc.math.Matrix4.extractPlane: Invalid plane index",7905:"cc.math.mat4Assign(): pOut equals pIn",7906:"cc.mat.Matrix4.assignFrom(): mat4 equals current matrix",7907:"cc.math.Matrix4 equals: pMat1 and pMat2 are same object.",7908:"Invalid matrix mode specified",7909:"current quaternion is an invalid value",8e3:"Can't handle this field type or size",8001:"No bytes requested",8002:"Too many bytes requested",8003:"Missing StripByteCounts!",8103:"cc.GLProgram.link(): Cannot link invalid program",8104:"cocos2d: ERROR: Failed to link program: %s",8105:"cocos2d: cc.shaderCache._loadDefaultShader, error shader type",8106:"Please load the resource firset : %s",8107:"cc.GLProgram.getUniformLocationForName(): uniform name should be non-null",8108:"cc.GLProgram.getUniformLocationForName(): Invalid operation. Cannot get uniform location when program is not initialized",8109:"modelView matrix is undefined.",8200:"Please set node's active instead of rigidbody's enabled.",8300:"Should only one camera exists, please check your project.",8301:"Camera does not support Canvas Mode.",8400:"Wrong type arguments, 'filePath' must be a String.",8401:"Since 1.10, `%s` accept %s instance directly, not a URL string. Please directly reference the %s object in your script, or load %s by loader first. Don't use %s's URL anymore.",9e3:"Stencil manager does not support level bigger than %d in this device.",9001:"Stencil manager is already empty, cannot pop any mask.",9100:"LabelAtlas '%s' cannot be loaded, raw texture does not exist.",9101:"LabelAtlas '%s' cannot be loaded, fnt data does not exist.",9102:"Program not support highp precision, will change to mediump.",9103:"%s : Failed to set property [%s], property not found.",9104:"%s : Failed to define [%s], define not found.",9105:"%s : Failed to set property [%s], property length not correct.",9106:"%s : Set property [%s] warning : should transform object to ArrayBuffer.",9107:"%s : illegal property: [%s], myabe defined an unused property;",9200:"cc.view.enableAntiAlias is deprecated now, please use cc.Texture2D.setFilters instead","0100":"%s not yet implemented."}},{}],2:[function(C$t,C$e,C$i){"use strict";C$t("../core/platform/CCClass");var C$n=C$t("../core/utils/misc");cc.Action=cc.Class({name:"cc.Action",ctor:function(){this.originalTarget=null,this.target=null,this.tag=cc.Action.TAG_INVALID},clone:function(){var C$t=new cc.Action;return C$t.originalTarget=null,C$t.target=null,C$t.tag=this.tag,C$t},isDone:function(){return!0},startWithTarget:function(C$t){this.originalTarget=C$t,this.target=C$t},stop:function(){this.target=null},step:function(C$t){cc.logID(1006)},update:function(C$t){cc.logID(1007)},getTarget:function(){return this.target},setTarget:function(C$t){this.target=C$t},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(C$t){this.originalTarget=C$t},getTag:function(){return this.tag},setTag:function(C$t){this.tag=C$t},retain:function(){},release:function(){}}),cc.Action.TAG_INVALID=-1,cc.FiniteTimeAction=cc.Class({name:"cc.FiniteTimeAction",extends:cc.Action,ctor:function(){this._duration=0},getDuration:function(){return this._duration*(this._timesForRepeat||1)},setDuration:function(C$t){this._duration=C$t},reverse:function(){return cc.logID(1008),null},clone:function(){return new cc.FiniteTimeAction}}),cc.Speed=cc.Class({name:"cc.Speed",extends:cc.Action,ctor:function(C$t,C$e){this._speed=0,this._innerAction=null,C$t&&this.initWithAction(C$t,C$e)},getSpeed:function(){return this._speed},setSpeed:function(C$t){this._speed=C$t},initWithAction:function(C$t,C$e){return C$t?(this._innerAction=C$t,this._speed=C$e,!0):(cc.errorID(1021),!1)},clone:function(){var C$t=new cc.Speed;return C$t.initWithAction(this._innerAction.clone(),this._speed),C$t},startWithTarget:function(C$t){cc.Action.prototype.startWithTarget.call(this,C$t),this._innerAction.startWithTarget(C$t)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},step:function(C$t){this._innerAction.step(C$t*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return new cc.Speed(this._innerAction.reverse(),this._speed)},setInnerAction:function(C$t){this._innerAction!==C$t&&(this._innerAction=C$t)},getInnerAction:function(){return this._innerAction}}),cc.speed=function(C$t,C$e){return new cc.Speed(C$t,C$e)},cc.Follow=cc.Class({name:"cc.Follow",extends:cc.Action,ctor:function(C$t,C$e){this._followedNode=null,this._boundarySet=!1,this._boundaryFullyCovered=!1,this._halfScreenSize=null,this._fullScreenSize=null,this.leftBoundary=0,this.rightBoundary=0,this.topBoundary=0,this.bottomBoundary=0,this._worldRect=cc.rect(0,0,0,0),C$t&&(C$e?this.initWithTarget(C$t,C$e):this.initWithTarget(C$t))},clone:function(){var C$t=new cc.Follow,C$e=this._worldRect,C$e=new cc.Rect(C$e.x,C$e.y,C$e.width,C$e.height);return C$t.initWithTarget(this._followedNode,C$e),C$t},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(C$t){this._boundarySet=C$t},initWithTarget:function(C$t,C$e){if(!C$t)return cc.errorID(1022),!1;C$e=C$e||cc.rect(0,0,0,0),this._followedNode=C$t,this._worldRect=C$e,this._boundarySet=!(0===C$e.width&&0===C$e.height),this._boundaryFullyCovered=!1;C$t=cc.winSize;return this._fullScreenSize=cc.v2(C$t.width,C$t.height),this._halfScreenSize=this._fullScreenSize.mul(.5),this._boundarySet&&(this.leftBoundary=-(C$e.x+C$e.width-this._fullScreenSize.x),this.rightBoundary=-C$e.x,this.topBoundary=-C$e.y,this.bottomBoundary=-(C$e.y+C$e.height-this._fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=(this.topBoundary+this.bottomBoundary)/2),this.topBoundary===this.bottomBoundary&&this.leftBoundary===this.rightBoundary&&(this._boundaryFullyCovered=!0)),!0},step:function(C$t){var C$e=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO),C$i=this._followedNode.convertToWorldSpaceAR(cc.Vec2.ZERO),C$e=C$e.sub(C$i),C$i=this.target.parent.convertToNodeSpaceAR(C$e.add(this._halfScreenSize));this._boundarySet?this._boundaryFullyCovered||this.target.setPosition(C$n.clampf(C$i.x,this.leftBoundary,this.rightBoundary),C$n.clampf(C$i.y,this.bottomBoundary,this.topBoundary)):this.target.setPosition(C$i.x,C$i.y)},isDone:function(){return!this._followedNode.activeInHierarchy},stop:function(){this.target=null,cc.Action.prototype.stop.call(this)}}),cc.follow=function(C$t,C$e){return new cc.Follow(C$t,C$e)}},{"../core/platform/CCClass":189,"../core/utils/misc":264}],3:[function(C$t,C$e,C$i){"use strict";function C$h(C$t,C$e){return C$t[Math.min(C$t.length-1,Math.max(C$e,0))]}function C$s(C$t){for(var C$e=[],C$i=C$t.length-1;0<=C$i;C$i--)C$e.push(cc.v2(C$t[C$i].x,C$t[C$i].y));return C$e}function C$n(C$t){for(var C$e=[],C$i=0;C$i<C$t.length;C$i++)C$e.push(cc.v2(C$t[C$i].x,C$t[C$i].y));return C$e}cc.CardinalSplineTo=cc.Class({name:"cc.CardinalSplineTo",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i){this._points=[],this._deltaT=0,this._tension=0,this._previousPosition=null,this._accumulatedDiff=null,void 0!==C$i&&cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$t,C$e,C$i)},initWithDuration:function(C$t,C$e,C$i){return C$e&&0!==C$e.length?!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this.setPoints(C$e),this._tension=C$i,!0):(cc.errorID(1024),!1)},clone:function(){var C$t=new cc.CardinalSplineTo;return C$t.initWithDuration(this._duration,C$n(this._points),this._tension),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._deltaT=1/(this._points.length-1),this._previousPosition=cc.v2(this.target.x,this.target.y),this._accumulatedDiff=cc.v2(0,0)},update:function(C$t){C$t=this._computeEaseTime(C$t);var C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c=this._points,C$l=(C$t=1===C$t?(C$i=C$c.length-1,1):(C$t-(C$e=this._deltaT)*(C$i=0|C$t/C$e))/C$e,C$e=C$h(C$c,C$i-1),C$o=C$h(C$c,+C$i),C$s=C$h(C$c,C$i+1),C$c=C$h(C$c,C$i+2),C$i=this._tension,C$l=(C$i=(1-C$i)/2)*(2*(C$r=(C$t=C$t)*C$t)-(C$n=C$r*C$t)-C$t),C$a=C$i*(C$r-C$n)+(2*C$n-3*C$r+1),C$t=C$i*(C$n-2*C$r+C$t)+(-2*C$n+3*C$r),C$i*=C$n-C$r,C$n=C$e.x*C$l+C$o.x*C$a+C$s.x*C$t+C$c.x*C$i,C$r=C$e.y*C$l+C$o.y*C$a+C$s.y*C$t+C$c.y*C$i,cc.v2(C$n,C$r));cc.macro.ENABLE_STACKABLE_ACTIONS&&(C$o=this.target.x-this._previousPosition.x,C$a=this.target.y-this._previousPosition.y,0==C$o&&0===C$a||(C$o=(C$s=this._accumulatedDiff).x+C$o,C$a=C$s.y+C$a,C$s.x=C$o,C$s.y=C$a,C$l.x+=C$o,C$l.y+=C$a)),this.updatePosition(C$l)},reverse:function(){var C$t=C$s(this._points);return cc.cardinalSplineTo(this._duration,C$t,this._tension)},updatePosition:function(C$t){this.target.setPosition(C$t),this._previousPosition=C$t},getPoints:function(){return this._points},setPoints:function(C$t){this._points=C$t}}),cc.cardinalSplineTo=function(C$t,C$e,C$i){return new cc.CardinalSplineTo(C$t,C$e,C$i)},cc.CardinalSplineBy=cc.Class({name:"cc.CardinalSplineBy",extends:cc.CardinalSplineTo,ctor:function(C$t,C$e,C$i){this._startPosition=cc.v2(0,0),void 0!==C$i&&this.initWithDuration(C$t,C$e,C$i)},startWithTarget:function(C$t){cc.CardinalSplineTo.prototype.startWithTarget.call(this,C$t),this._startPosition.x=C$t.x,this._startPosition.y=C$t.y},reverse:function(){for(var C$t,C$e=this._points.slice(),C$i=C$e[0],C$n=1;C$n<C$e.length;++C$n)C$t=C$e[C$n],C$e[C$n]=C$t.sub(C$i),C$i=C$t;var C$r=C$s(C$e),C$i=C$r[C$r.length-1];C$r.pop(),C$i.x=-C$i.x,C$i.y=-C$i.y,C$r.unshift(C$i);for(C$n=1;C$n<C$r.length;++C$n)(C$t=C$r[C$n]).x=-C$t.x,C$t.y=-C$t.y,C$t.x+=C$i.x,C$t.y+=C$i.y,C$i=C$r[C$n]=C$t;return cc.cardinalSplineBy(this._duration,C$r,this._tension)},updatePosition:function(C$t){var C$e=this._startPosition,C$i=C$t.x+C$e.x,C$t=C$t.y+C$e.y;this._previousPosition.x=C$i,this._previousPosition.y=C$t,this.target.setPosition(C$i,C$t)},clone:function(){var C$t=new cc.CardinalSplineBy;return C$t.initWithDuration(this._duration,C$n(this._points),this._tension),C$t}}),cc.cardinalSplineBy=function(C$t,C$e,C$i){return new cc.CardinalSplineBy(C$t,C$e,C$i)},cc.CatmullRomTo=cc.Class({name:"cc.CatmullRomTo",extends:cc.CardinalSplineTo,ctor:function(C$t,C$e){C$e&&this.initWithDuration(C$t,C$e)},initWithDuration:function(C$t,C$e){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$t,C$e,.5)},clone:function(){var C$t=new cc.CatmullRomTo;return C$t.initWithDuration(this._duration,C$n(this._points)),C$t}}),cc.catmullRomTo=function(C$t,C$e){return new cc.CatmullRomTo(C$t,C$e)},cc.CatmullRomBy=cc.Class({name:"cc.CatmullRomBy",extends:cc.CardinalSplineBy,ctor:function(C$t,C$e){C$e&&this.initWithDuration(C$t,C$e)},initWithDuration:function(C$t,C$e){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$t,C$e,.5)},clone:function(){var C$t=new cc.CatmullRomBy;return C$t.initWithDuration(this._duration,C$n(this._points)),C$t}}),cc.catmullRomBy=function(C$t,C$e){return new cc.CatmullRomBy(C$t,C$e)}},{}],4:[function(C$h,C$u,C$_){"use strict";cc.easeIn=function(C$t){return{_rate:C$t,easing:function(C$t){return Math.pow(C$t,this._rate)},reverse:function(){return cc.easeIn(1/this._rate)}}},cc.easeOut=function(C$t){return{_rate:C$t,easing:function(C$t){return Math.pow(C$t,1/this._rate)},reverse:function(){return cc.easeOut(1/this._rate)}}},cc.easeInOut=function(C$t){return{_rate:C$t,easing:function(C$t){return(C$t*=2)<1?.5*Math.pow(C$t,this._rate):1-.5*Math.pow(2-C$t,this._rate)},reverse:function(){return cc.easeInOut(this._rate)}}};var C$t={easing:function(C$t){return 0===C$t?0:Math.pow(2,10*(C$t-1))},reverse:function(){return C$e}},C$e=(cc.easeExponentialIn=function(){return C$t},{easing:function(C$t){return 1===C$t?1:1-Math.pow(2,-10*C$t)},reverse:function(){return C$t}}),C$i=(cc.easeExponentialOut=function(){return C$e},{easing:function(C$t){return 1!==C$t&&0!==C$t?(C$t*=2)<1?.5*Math.pow(2,10*(C$t-1)):.5*(2-Math.pow(2,-10*(C$t-1))):C$t},reverse:function(){return C$i}}),C$n=(cc.easeExponentialInOut=function(){return C$i},{easing:function(C$t){return 0===C$t||1===C$t?C$t:-1*Math.cos(C$t*Math.PI/2)+1},reverse:function(){return C$r}}),C$r=(cc.easeSineIn=function(){return C$n},{easing:function(C$t){return 0===C$t||1===C$t?C$t:Math.sin(C$t*Math.PI/2)},reverse:function(){return C$n}}),C$s=(cc.easeSineOut=function(){return C$r},{easing:function(C$t){return 0===C$t||1===C$t?C$t:-.5*(Math.cos(Math.PI*C$t)-1)},reverse:function(){return C$s}}),C$o=(cc.easeSineInOut=function(){return C$s},{easing:function(C$t){return 0===C$t||1===C$t?C$t:(--C$t,-Math.pow(2,10*C$t)*Math.sin((C$t-.075)*Math.PI*2/.3))},reverse:function(){return C$a}}),C$a=(cc.easeElasticIn=function(C$t){return C$t&&.3!==C$t?{_period:C$t,easing:function(C$t){return 0===C$t||1===C$t?C$t:(--C$t,-Math.pow(2,10*C$t)*Math.sin((C$t-this._period/4)*Math.PI*2/this._period))},reverse:function(){return cc.easeElasticOut(this._period)}}:C$o},{easing:function(C$t){return 0===C$t||1===C$t?C$t:Math.pow(2,-10*C$t)*Math.sin((C$t-.075)*Math.PI*2/.3)+1},reverse:function(){return C$o}});function C$c(C$t){return C$t<1/2.75?7.5625*C$t*C$t:C$t<2/2.75?7.5625*(C$t-=1.5/2.75)*C$t+.75:C$t<2.5/2.75?7.5625*(C$t-=2.25/2.75)*C$t+.9375:7.5625*(C$t-=2.625/2.75)*C$t+.984375}cc.easeElasticOut=function(C$t){return C$t&&.3!==C$t?{_period:C$t,easing:function(C$t){return 0===C$t||1===C$t?C$t:Math.pow(2,-10*C$t)*Math.sin((C$t-this._period/4)*Math.PI*2/this._period)+1},reverse:function(){return cc.easeElasticIn(this._period)}}:C$a},cc.easeElasticInOut=function(C$t){return{_period:C$t=C$t||.3,easing:function(C$t){var C$e,C$i=this._period;return 0===C$t||1===C$t?C$t:(C$t*=2,C$e=(C$i=C$i||(this._period=.3*1.5))/4,--C$t<0?-.5*Math.pow(2,10*C$t)*Math.sin((C$t-C$e)*Math.PI*2/C$i):Math.pow(2,-10*C$t)*Math.sin((C$t-C$e)*Math.PI*2/C$i)*.5+1)},reverse:function(){return cc.easeElasticInOut(this._period)}}};var C$l={easing:function(C$t){return 1-C$c(1-C$t)},reverse:function(){return C$d}},C$d=(cc.easeBounceIn=function(){return C$l},{easing:C$c,reverse:function(){return C$l}}),C$f=(cc.easeBounceOut=function(){return C$d},{easing:function(C$t){C$t=C$t<.5?.5*(1-C$c(1-(C$t*=2))):.5*C$c(2*C$t-1)+.5;return C$t},reverse:function(){return C$f}}),C$p=(cc.easeBounceInOut=function(){return C$f},{easing:function(C$t){return 0===C$t||1===C$t?C$t:C$t*C$t*(2.70158*C$t-1.70158)},reverse:function(){return C$m}}),C$m=(cc.easeBackIn=function(){return C$p},{easing:function(C$t){return--C$t*C$t*(2.70158*C$t+1.70158)+1},reverse:function(){return C$p}}),C$y=(cc.easeBackOut=function(){return C$m},{easing:function(C$t){var C$e=2.5949095;return(C$t*=2)<1?C$t*C$t*((1+C$e)*C$t-C$e)/2:(C$t-=2)*C$t*((1+C$e)*C$t+C$e)/2+1},reverse:function(){return C$y}}),C$g=(cc.easeBackInOut=function(){return C$y},cc.easeBezierAction=function(C$e,C$i,C$n,C$r){return{easing:function(C$t){return Math.pow(1-C$t,3)*C$e+3*C$t*Math.pow(1-C$t,2)*C$i+3*Math.pow(C$t,2)*(1-C$t)*C$n+Math.pow(C$t,3)*C$r},reverse:function(){return cc.easeBezierAction(C$r,C$n,C$i,C$e)}}},{easing:function(C$t){return Math.pow(C$t,2)},reverse:function(){return C$g}}),C$v=(cc.easeQuadraticActionIn=function(){return C$g},{easing:function(C$t){return-C$t*(C$t-2)},reverse:function(){return C$v}}),C$x=(cc.easeQuadraticActionOut=function(){return C$v},{easing:function(C$t){return(C$t*=2)<1?C$t*C$t*.5:-.5*(--C$t*(C$t-2)-1)},reverse:function(){return C$x}}),C$b=(cc.easeQuadraticActionInOut=function(){return C$x},{easing:function(C$t){return C$t*C$t*C$t*C$t},reverse:function(){return C$b}}),C$A=(cc.easeQuarticActionIn=function(){return C$b},{easing:function(C$t){return-(--C$t*C$t*C$t*C$t-1)},reverse:function(){return C$A}}),C$C=(cc.easeQuarticActionOut=function(){return C$A},{easing:function(C$t){return(C$t*=2)<1?.5*C$t*C$t*C$t*C$t:-.5*((C$t-=2)*C$t*C$t*C$t-2)},reverse:function(){return C$C}}),C$S=(cc.easeQuarticActionInOut=function(){return C$C},{easing:function(C$t){return C$t*C$t*C$t*C$t*C$t},reverse:function(){return C$S}}),C$T=(cc.easeQuinticActionIn=function(){return C$S},{easing:function(C$t){return--C$t*C$t*C$t*C$t*C$t+1},reverse:function(){return C$T}}),C$w=(cc.easeQuinticActionOut=function(){return C$T},{easing:function(C$t){return(C$t*=2)<1?.5*C$t*C$t*C$t*C$t*C$t:.5*((C$t-=2)*C$t*C$t*C$t*C$t+2)},reverse:function(){return C$w}}),C$E=(cc.easeQuinticActionInOut=function(){return C$w},{easing:function(C$t){return-1*(Math.sqrt(1-C$t*C$t)-1)},reverse:function(){return C$E}}),C$M=(cc.easeCircleActionIn=function(){return C$E},{easing:function(C$t){return--C$t,Math.sqrt(1-C$t*C$t)},reverse:function(){return C$M}}),C$I=(cc.easeCircleActionOut=function(){return C$M},{easing:function(C$t){return(C$t*=2)<1?-.5*(Math.sqrt(1-C$t*C$t)-1):(C$t-=2,.5*(Math.sqrt(1-C$t*C$t)+1))},reverse:function(){return C$I}}),C$B=(cc.easeCircleActionInOut=function(){return C$I},{easing:function(C$t){return C$t*C$t*C$t},reverse:function(){return C$B}}),C$R=(cc.easeCubicActionIn=function(){return C$B},{easing:function(C$t){return--C$t*C$t*C$t+1},reverse:function(){return C$R}}),C$P=(cc.easeCubicActionOut=function(){return C$R},{easing:function(C$t){return(C$t*=2)<1?.5*C$t*C$t*C$t:.5*((C$t-=2)*C$t*C$t+2)},reverse:function(){return C$P}});cc.easeCubicActionInOut=function(){return C$P}},{}],5:[function(C$t,C$e,C$i){"use strict";cc.ActionInstant=cc.Class({name:"cc.ActionInstant",extends:cc.FiniteTimeAction,isDone:function(){return!0},step:function(C$t){this.update(1)},update:function(C$t){},reverse:function(){return this.clone()},clone:function(){return new cc.ActionInstant}}),cc.Show=cc.Class({name:"cc.Show",extends:cc.ActionInstant,update:function(C$t){for(var C$e=this.target.getComponentsInChildren(cc.RenderComponent),C$i=0;C$i<C$e.length;++C$i)C$e[C$i].enabled=!0},reverse:function(){return new cc.Hide},clone:function(){return new cc.Show}}),cc.show=function(){return new cc.Show},cc.Hide=cc.Class({name:"cc.Hide",extends:cc.ActionInstant,update:function(C$t){for(var C$e=this.target.getComponentsInChildren(cc.RenderComponent),C$i=0;C$i<C$e.length;++C$i)C$e[C$i].enabled=!1},reverse:function(){return new cc.Show},clone:function(){return new cc.Hide}}),cc.hide=function(){return new cc.Hide},cc.ToggleVisibility=cc.Class({name:"cc.ToggleVisibility",extends:cc.ActionInstant,update:function(C$t){for(var C$e=this.target.getComponentsInChildren(cc.RenderComponent),C$i=0;C$i<C$e.length;++C$i){var C$n=C$e[C$i];C$n.enabled=!C$n.enabled}},reverse:function(){return new cc.ToggleVisibility},clone:function(){return new cc.ToggleVisibility}}),cc.toggleVisibility=function(){return new cc.ToggleVisibility},cc.RemoveSelf=cc.Class({name:"cc.RemoveSelf",extends:cc.ActionInstant,ctor:function(C$t){this._isNeedCleanUp=!0,void 0!==C$t&&this.init(C$t)},update:function(C$t){this.target.removeFromParent(this._isNeedCleanUp)},init:function(C$t){return this._isNeedCleanUp=C$t,!0},reverse:function(){return new cc.RemoveSelf(this._isNeedCleanUp)},clone:function(){return new cc.RemoveSelf(this._isNeedCleanUp)}}),cc.removeSelf=function(C$t){return new cc.RemoveSelf(C$t)},cc.DestroySelf=cc.Class({name:"cc.DestroySelf",extends:cc.ActionInstant,update:function(){this.target.destroy()},reverse:function(){return new cc.DestroySelf},clone:function(){return new cc.DestroySelf}}),cc.destroySelf=function(){return new cc.DestroySelf},cc.FlipX=cc.Class({name:"cc.FlipX",extends:cc.ActionInstant,ctor:function(C$t){this._flippedX=!1,void 0!==C$t&&this.initWithFlipX(C$t)},initWithFlipX:function(C$t){return this._flippedX=C$t,!0},update:function(C$t){this.target.scaleX=Math.abs(this.target.scaleX)*(this._flippedX?-1:1)},reverse:function(){return new cc.FlipX(!this._flippedX)},clone:function(){var C$t=new cc.FlipX;return C$t.initWithFlipX(this._flippedX),C$t}}),cc.flipX=function(C$t){return new cc.FlipX(C$t)},cc.FlipY=cc.Class({name:"cc.FlipY",extends:cc.ActionInstant,ctor:function(C$t){this._flippedY=!1,void 0!==C$t&&this.initWithFlipY(C$t)},initWithFlipY:function(C$t){return this._flippedY=C$t,!0},update:function(C$t){this.target.scaleY=Math.abs(this.target.scaleY)*(this._flippedY?-1:1)},reverse:function(){return new cc.FlipY(!this._flippedY)},clone:function(){var C$t=new cc.FlipY;return C$t.initWithFlipY(this._flippedY),C$t}}),cc.flipY=function(C$t){return new cc.FlipY(C$t)},cc.Place=cc.Class({name:"cc.Place",extends:cc.ActionInstant,ctor:function(C$t,C$e){this._x=0,void(this._y=0)!==C$t&&(void 0!==C$t.x&&(C$e=C$t.y,C$t=C$t.x),this.initWithPosition(C$t,C$e))},initWithPosition:function(C$t,C$e){return this._x=C$t,this._y=C$e,!0},update:function(C$t){this.target.setPosition(this._x,this._y)},clone:function(){var C$t=new cc.Place;return C$t.initWithPosition(this._x,this._y),C$t}}),cc.place=function(C$t,C$e){return new cc.Place(C$t,C$e)},cc.CallFunc=cc.Class({name:"cc.CallFunc",extends:cc.ActionInstant,ctor:function(C$t,C$e,C$i){this._selectorTarget=null,this._function=null,this._data=null,this.initWithFunction(C$t,C$e,C$i)},initWithFunction:function(C$t,C$e,C$i){return C$t&&(this._function=C$t),C$e&&(this._selectorTarget=C$e),void 0!==C$i&&(this._data=C$i),!0},execute:function(){this._function&&this._function.call(this._selectorTarget,this.target,this._data)},update:function(C$t){this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(C$t){C$t!==this._selectorTarget&&(this._selectorTarget&&(this._selectorTarget=null),this._selectorTarget=C$t)},clone:function(){var C$t=new cc.CallFunc;return C$t.initWithFunction(this._function,this._selectorTarget,this._data),C$t}}),cc.callFunc=function(C$t,C$e,C$i){return new cc.CallFunc(C$t,C$e,C$i)}},{}],6:[function(C$t,C$e,C$i){"use strict";function C$a(C$t,C$e,C$i,C$n,C$r){return Math.pow(1-C$r,3)*C$t+3*C$r*Math.pow(1-C$r,2)*C$e+3*Math.pow(C$r,2)*(1-C$r)*C$i+Math.pow(C$r,3)*C$n}cc.ActionInterval=cc.Class({name:"cc.ActionInterval",extends:cc.FiniteTimeAction,ctor:function(C$t){this.MAX_VALUE=2,this._elapsed=0,this._firstTick=!1,this._easeList=null,this._speed=1,this._timesForRepeat=1,this._repeatForever=!1,this._repeatMethod=!1,this._speedMethod=!1,void 0!==C$t&&cc.ActionInterval.prototype.initWithDuration.call(this,C$t)},getElapsed:function(){return this._elapsed},initWithDuration:function(C$t){return this._duration=0===C$t?cc.macro.FLT_EPSILON:C$t,this._elapsed=0,this._firstTick=!0},isDone:function(){return this._elapsed>=this._duration},_cloneDecoration:function(C$t){C$t._repeatForever=this._repeatForever,C$t._speed=this._speed,C$t._timesForRepeat=this._timesForRepeat,C$t._easeList=this._easeList,C$t._speedMethod=this._speedMethod,C$t._repeatMethod=this._repeatMethod},_reverseEaseList:function(C$t){if(this._easeList){C$t._easeList=[];for(var C$e=0;C$e<this._easeList.length;C$e++)C$t._easeList.push(this._easeList[C$e].reverse())}},clone:function(){var C$t=new cc.ActionInterval(this._duration);return this._cloneDecoration(C$t),C$t},easing:function(C$t){this._easeList?this._easeList.length=0:this._easeList=[];for(var C$e=0;C$e<arguments.length;C$e++)this._easeList.push(arguments[C$e]);return this},_computeEaseTime:function(C$t){var C$e=this._easeList;if(!C$e||0===C$e.length)return C$t;for(var C$i=0,C$n=C$e.length;C$i<C$n;C$i++)C$t=C$e[C$i].easing(C$t);return C$t},step:function(C$t){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=C$t;C$t=(C$t=this._elapsed/(1.192092896e-7<this._duration?this._duration:1.192092896e-7))<1?C$t:1;this.update(0<C$t?C$t:0),this._repeatMethod&&1<this._timesForRepeat&&this.isDone()&&(this._repeatForever||this._timesForRepeat--,this.startWithTarget(this.target),this.step(this._elapsed-this._duration))},startWithTarget:function(C$t){cc.Action.prototype.startWithTarget.call(this,C$t),this._elapsed=0,this._firstTick=!0},reverse:function(){return cc.logID(1010),null},setAmplitudeRate:function(C$t){cc.logID(1011)},getAmplitudeRate:function(){return cc.logID(1012),0},speed:function(C$t){return C$t<=0?cc.logID(1013):(this._speedMethod=!0,this._speed*=C$t),this},getSpeed:function(){return this._speed},setSpeed:function(C$t){return this._speed=C$t,this},repeat:function(C$t){return C$t=Math.round(C$t),isNaN(C$t)||C$t<1?cc.logID(1014):(this._repeatMethod=!0,this._timesForRepeat*=C$t),this},repeatForever:function(){return this._repeatMethod=!0,this._timesForRepeat=this.MAX_VALUE,this._repeatForever=!0,this}}),cc.actionInterval=function(C$t){return new cc.ActionInterval(C$t)},cc.Sequence=cc.Class({name:"cc.Sequence",extends:cc.ActionInterval,ctor:function(C$t){this._actions=[],this._split=null,this._last=0,this._reversed=!1;var C$e=C$t instanceof Array?C$t:arguments;if(1!==C$e.length){var C$i=C$e.length-1;if(0<=C$i&&null==C$e[C$i]&&cc.logID(1015),0<=C$i){for(var C$n,C$r=C$e[0],C$s=1;C$s<C$i;C$s++)C$e[C$s]&&(C$n=C$r,C$r=cc.Sequence._actionOneTwo(C$n,C$e[C$s]));this.initWithTwoActions(C$r,C$e[C$i])}}else cc.errorID(1019)},initWithTwoActions:function(C$t,C$e){if(!C$t||!C$e)return cc.errorID(1025),!1;var C$i=C$t._duration,C$n=C$e._duration,C$i=(C$i*=C$t._repeatMethod?C$t._timesForRepeat:1)+(C$n*=C$e._repeatMethod?C$e._timesForRepeat:1);return this.initWithDuration(C$i),this._actions[0]=C$t,this._actions[1]=C$e,!0},clone:function(){var C$t=new cc.Sequence;return this._cloneDecoration(C$t),C$t.initWithTwoActions(this._actions[0].clone(),this._actions[1].clone()),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._split=this._actions[0]._duration/this._duration,this._split*=this._actions[0]._repeatMethod?this._actions[0]._timesForRepeat:1,this._last=-1},stop:function(){-1!==this._last&&this._actions[this._last].stop(),cc.Action.prototype.stop.call(this)},update:function(C$t){var C$e,C$i=0,C$n=this._split,C$r=this._actions,C$s=this._last;(C$t=this._computeEaseTime(C$t))<C$n?(C$e=0!==C$n?C$t/C$n:1,0===C$i&&1===C$s&&this._reversed&&(C$r[1].update(0),C$r[1].stop())):(C$e=(C$i=1)===C$n?1:(C$t-C$n)/(1-C$n),-1===C$s&&(C$r[0].startWithTarget(this.target),C$r[0].update(1),C$r[0].stop()),0===C$s&&(C$r[0].update(1),C$r[0].stop())),C$t=C$r[C$i],C$s===C$i&&C$t.isDone()||(C$s!==C$i&&C$t.startWithTarget(this.target),C$e*=C$t._timesForRepeat,C$t.update(1<C$e?C$e%1:C$e),this._last=C$i)},reverse:function(){var C$t=cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse());return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t._reversed=!0,C$t}}),cc.sequence=function(C$t){var C$e=C$t instanceof Array?C$t:arguments;if(1===C$e.length)return cc.errorID(1019),null;var C$i=C$e.length-1,C$n=(0<=C$i&&null==C$e[C$i]&&cc.logID(1015),null);if(0<=C$i)for(var C$n=C$e[0],C$r=1;C$r<=C$i;C$r++)C$e[C$r]&&(C$n=cc.Sequence._actionOneTwo(C$n,C$e[C$r]));return C$n},cc.Sequence._actionOneTwo=function(C$t,C$e){var C$i=new cc.Sequence;return C$i.initWithTwoActions(C$t,C$e),C$i},cc.Repeat=cc.Class({name:"cc.Repeat",extends:cc.ActionInterval,ctor:function(C$t,C$e){this._times=0,this._total=0,this._nextDt=0,this._actionInstant=!1,this._innerAction=null,void 0!==C$e&&this.initWithAction(C$t,C$e)},initWithAction:function(C$t,C$e){var C$i=C$t._duration*C$e;return!!this.initWithDuration(C$i)&&(this._times=C$e,(this._innerAction=C$t)instanceof cc.ActionInstant&&(this._actionInstant=!0,--this._times),!(this._total=0))},clone:function(){var C$t=new cc.Repeat;return this._cloneDecoration(C$t),C$t.initWithAction(this._innerAction.clone(),this._times),C$t},startWithTarget:function(C$t){this._total=0,this._nextDt=this._innerAction._duration/this._duration,cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._innerAction.startWithTarget(C$t)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},update:function(C$t){C$t=this._computeEaseTime(C$t);var C$e=this._innerAction,C$i=this._duration,C$n=this._times,C$r=this._nextDt;if(C$r<=C$t){for(;C$r<C$t&&this._total<C$n;)C$e.update(1),this._total++,C$e.stop(),C$e.startWithTarget(this.target),C$r+=C$e._duration/C$i,this._nextDt=1<C$r?1:C$r;1<=C$t&&this._total<C$n&&(C$e.update(1),this._total++),this._actionInstant||(this._total===C$n?C$e.stop():C$e.update(C$t-(C$r-C$e._duration/C$i)))}else C$e.update(C$t*C$n%1)},isDone:function(){return this._total===this._times},reverse:function(){var C$t=new cc.Repeat(this._innerAction.reverse(),this._times);return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t},setInnerAction:function(C$t){this._innerAction!==C$t&&(this._innerAction=C$t)},getInnerAction:function(){return this._innerAction}}),cc.repeat=function(C$t,C$e){return new cc.Repeat(C$t,C$e)},cc.RepeatForever=cc.Class({name:"cc.RepeatForever",extends:cc.ActionInterval,ctor:function(C$t){this._innerAction=null,C$t&&this.initWithAction(C$t)},initWithAction:function(C$t){return C$t?(this._innerAction=C$t,!0):(cc.errorID(1026),!1)},clone:function(){var C$t=new cc.RepeatForever;return this._cloneDecoration(C$t),C$t.initWithAction(this._innerAction.clone()),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._innerAction.startWithTarget(C$t)},step:function(C$t){var C$e=this._innerAction;C$e.step(C$t),C$e.isDone()&&(C$e.startWithTarget(this.target),C$e.step(C$e.getElapsed()-C$e._duration))},isDone:function(){return!1},reverse:function(){var C$t=new cc.RepeatForever(this._innerAction.reverse());return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t},setInnerAction:function(C$t){this._innerAction!==C$t&&(this._innerAction=C$t)},getInnerAction:function(){return this._innerAction}}),cc.repeatForever=function(C$t){return new cc.RepeatForever(C$t)},cc.Spawn=cc.Class({name:"cc.Spawn",extends:cc.ActionInterval,ctor:function(C$t){this._one=null,this._two=null;var C$e=C$t instanceof Array?C$t:arguments;if(1!==C$e.length){var C$i=C$e.length-1;if(0<=C$i&&null==C$e[C$i]&&cc.logID(1015),0<=C$i){for(var C$n,C$r=C$e[0],C$s=1;C$s<C$i;C$s++)C$e[C$s]&&(C$n=C$r,C$r=cc.Spawn._actionOneTwo(C$n,C$e[C$s]));this.initWithTwoActions(C$r,C$e[C$i])}}else cc.errorID(1020)},initWithTwoActions:function(C$t,C$e){if(!C$t||!C$e)return cc.errorID(1027),!1;var C$i=!1,C$n=C$t._duration,C$r=C$e._duration;return this.initWithDuration(Math.max(C$n,C$r))&&(this._one=C$t,this._two=C$e,C$r<C$n?this._two=cc.Sequence._actionOneTwo(C$e,cc.delayTime(C$n-C$r)):C$n<C$r&&(this._one=cc.Sequence._actionOneTwo(C$t,cc.delayTime(C$r-C$n))),C$i=!0),C$i},clone:function(){var C$t=new cc.Spawn;return this._cloneDecoration(C$t),C$t.initWithTwoActions(this._one.clone(),this._two.clone()),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._one.startWithTarget(C$t),this._two.startWithTarget(C$t)},stop:function(){this._one.stop(),this._two.stop(),cc.Action.prototype.stop.call(this)},update:function(C$t){C$t=this._computeEaseTime(C$t),this._one&&this._one.update(C$t),this._two&&this._two.update(C$t)},reverse:function(){var C$t=cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse());return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t}}),cc.spawn=function(C$t){var C$e=C$t instanceof Array?C$t:arguments;if(1===C$e.length)return cc.errorID(1020),null;0<C$e.length&&null==C$e[C$e.length-1]&&cc.logID(1015);for(var C$i=C$e[0],C$n=1;C$n<C$e.length;C$n++)null!=C$e[C$n]&&(C$i=cc.Spawn._actionOneTwo(C$i,C$e[C$n]));return C$i},cc.Spawn._actionOneTwo=function(C$t,C$e){var C$i=new cc.Spawn;return C$i.initWithTwoActions(C$t,C$e),C$i},cc.RotateTo=cc.Class({name:"cc.RotateTo",extends:cc.ActionInterval,statics:{_reverse:!1},ctor:function(C$t,C$e){this._startAngle=0,this._dstAngle=0,void(this._angle=0)!==C$e&&this.initWithDuration(C$t,C$e)},initWithDuration:function(C$t,C$e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._dstAngle=C$e,!0)},clone:function(){var C$t=new cc.RotateTo;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._dstAngle),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t);var C$t=C$t.angle%360,C$e=cc.RotateTo._reverse?this._dstAngle-C$t:this._dstAngle+C$t;180<C$e&&(C$e-=360),C$e<-180&&(C$e+=360),this._startAngle=C$t,this._angle=cc.RotateTo._reverse?C$e:-C$e},reverse:function(){cc.logID(1016)},update:function(C$t){C$t=this._computeEaseTime(C$t),this.target&&(this.target.angle=this._startAngle+this._angle*C$t)}}),cc.rotateTo=function(C$t,C$e){return new cc.RotateTo(C$t,C$e)},cc.RotateBy=cc.Class({name:"cc.RotateBy",extends:cc.ActionInterval,statics:{_reverse:!1},ctor:function(C$t,C$e){C$e*=cc.RotateBy._reverse?1:-1,this._deltaAngle=0,void(this._startAngle=0)!==C$e&&this.initWithDuration(C$t,C$e)},initWithDuration:function(C$t,C$e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._deltaAngle=C$e,!0)},clone:function(){var C$t=new cc.RotateBy;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._deltaAngle),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._startAngle=C$t.angle},update:function(C$t){C$t=this._computeEaseTime(C$t),this.target&&(this.target.angle=this._startAngle+this._deltaAngle*C$t)},reverse:function(){var C$t=new cc.RotateBy;return C$t.initWithDuration(this._duration,-this._deltaAngle),this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t}}),cc.rotateBy=function(C$t,C$e){return new cc.RotateBy(C$t,C$e)},cc.MoveBy=cc.Class({name:"cc.MoveBy",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i){this._positionDelta=cc.v2(0,0),this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),void 0!==C$e&&cc.MoveBy.prototype.initWithDuration.call(this,C$t,C$e,C$i)},initWithDuration:function(C$t,C$e,C$i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(void 0!==C$e.x&&(C$i=C$e.y,C$e=C$e.x),this._positionDelta.x=C$e,this._positionDelta.y=C$i,!0)},clone:function(){var C$t=new cc.MoveBy;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._positionDelta),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t);var C$e=C$t.x,C$t=C$t.y;this._previousPosition.x=C$e,this._previousPosition.y=C$t,this._startPosition.x=C$e,this._startPosition.y=C$t},update:function(C$t){var C$e,C$i,C$n,C$r,C$s;C$t=this._computeEaseTime(C$t),this.target&&(C$e=this._positionDelta.x*C$t,C$t=this._positionDelta.y*C$t,C$i=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$n=this.target.x,C$r=this.target.y,C$s=this._previousPosition,C$i.x=C$i.x+C$n-C$s.x,C$i.y=C$i.y+C$r-C$s.y,C$e+=C$i.x,C$t+=C$i.y,C$s.x=C$e,C$s.y=C$t,this.target.setPosition(C$e,C$t)):this.target.setPosition(C$i.x+C$e,C$i.y+C$t))},reverse:function(){var C$t=new cc.MoveBy(this._duration,cc.v2(-this._positionDelta.x,-this._positionDelta.y));return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t}}),cc.moveBy=function(C$t,C$e,C$i){return new cc.MoveBy(C$t,C$e,C$i)},cc.MoveTo=cc.Class({name:"cc.MoveTo",extends:cc.MoveBy,ctor:function(C$t,C$e,C$i){this._endPosition=cc.v2(0,0),void 0!==C$e&&this.initWithDuration(C$t,C$e,C$i)},initWithDuration:function(C$t,C$e,C$i){return!!cc.MoveBy.prototype.initWithDuration.call(this,C$t,C$e,C$i)&&(void 0!==C$e.x&&(C$i=C$e.y,C$e=C$e.x),this._endPosition.x=C$e,this._endPosition.y=C$i,!0)},clone:function(){var C$t=new cc.MoveTo;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._endPosition),C$t},startWithTarget:function(C$t){cc.MoveBy.prototype.startWithTarget.call(this,C$t),this._positionDelta.x=this._endPosition.x-C$t.x,this._positionDelta.y=this._endPosition.y-C$t.y}}),cc.moveTo=function(C$t,C$e,C$i){return new cc.MoveTo(C$t,C$e,C$i)},cc.SkewTo=cc.Class({name:"cc.SkewTo",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i){this._skewX=0,this._skewY=0,this._startSkewX=0,this._startSkewY=0,this._endSkewX=0,this._endSkewY=0,this._deltaX=0,void(this._deltaY=0)!==C$i&&cc.SkewTo.prototype.initWithDuration.call(this,C$t,C$e,C$i)},initWithDuration:function(C$t,C$e,C$i){var C$n=!1;return cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._endSkewX=C$e,this._endSkewY=C$i,C$n=!0),C$n},clone:function(){var C$t=new cc.SkewTo;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._endSkewX,this._endSkewY),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._startSkewX=C$t.skewX%180,this._deltaX=this._endSkewX-this._startSkewX,180<this._deltaX&&(this._deltaX-=360),this._deltaX<-180&&(this._deltaX+=360),this._startSkewY=C$t.skewY%360,this._deltaY=this._endSkewY-this._startSkewY,180<this._deltaY&&(this._deltaY-=360),this._deltaY<-180&&(this._deltaY+=360)},update:function(C$t){C$t=this._computeEaseTime(C$t),this.target.skewX=this._startSkewX+this._deltaX*C$t,this.target.skewY=this._startSkewY+this._deltaY*C$t}}),cc.skewTo=function(C$t,C$e,C$i){return new cc.SkewTo(C$t,C$e,C$i)},cc.SkewBy=cc.Class({name:"cc.SkewBy",extends:cc.SkewTo,ctor:function(C$t,C$e,C$i){void 0!==C$i&&this.initWithDuration(C$t,C$e,C$i)},initWithDuration:function(C$t,C$e,C$i){var C$n=!1;return cc.SkewTo.prototype.initWithDuration.call(this,C$t,C$e,C$i)&&(this._skewX=C$e,this._skewY=C$i,C$n=!0),C$n},clone:function(){var C$t=new cc.SkewBy;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._skewX,this._skewY),C$t},startWithTarget:function(C$t){cc.SkewTo.prototype.startWithTarget.call(this,C$t),this._deltaX=this._skewX,this._deltaY=this._skewY,this._endSkewX=this._startSkewX+this._deltaX,this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){var C$t=new cc.SkewBy(this._duration,-this._skewX,-this._skewY);return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t}}),cc.skewBy=function(C$t,C$e,C$i){return new cc.SkewBy(C$t,C$e,C$i)},cc.JumpBy=cc.Class({name:"cc.JumpBy",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i,C$n,C$r){this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),this._delta=cc.v2(0,0),this._height=0,void(this._jumps=0)!==C$n&&cc.JumpBy.prototype.initWithDuration.call(this,C$t,C$e,C$i,C$n,C$r)},initWithDuration:function(C$t,C$e,C$i,C$n,C$r){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(void 0===C$r&&(C$r=C$n,C$n=C$i,C$i=C$e.y,C$e=C$e.x),this._delta.x=C$e,this._delta.y=C$i,this._height=C$n,this._jumps=C$r,!0)},clone:function(){var C$t=new cc.JumpBy;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._delta,this._height,this._jumps),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t);var C$e=C$t.x,C$t=C$t.y;this._previousPosition.x=C$e,this._previousPosition.y=C$t,this._startPosition.x=C$e,this._startPosition.y=C$t},update:function(C$t){var C$e,C$i,C$n,C$r,C$s;C$t=this._computeEaseTime(C$t),this.target&&(C$e=C$t*this._jumps%1,C$e=4*this._height*C$e*(1-C$e),C$e+=this._delta.y*C$t,C$t=this._delta.x*C$t,C$i=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$n=this.target.x,C$r=this.target.y,C$s=this._previousPosition,C$i.x=C$i.x+C$n-C$s.x,C$i.y=C$i.y+C$r-C$s.y,C$t+=C$i.x,C$e+=C$i.y,C$s.x=C$t,C$s.y=C$e,this.target.setPosition(C$t,C$e)):this.target.setPosition(C$i.x+C$t,C$i.y+C$e))},reverse:function(){var C$t=new cc.JumpBy(this._duration,cc.v2(-this._delta.x,-this._delta.y),this._height,this._jumps);return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t}}),cc.jumpBy=function(C$t,C$e,C$i,C$n,C$r){return new cc.JumpBy(C$t,C$e,C$i,C$n,C$r)},cc.JumpTo=cc.Class({name:"cc.JumpTo",extends:cc.JumpBy,ctor:function(C$t,C$e,C$i,C$n,C$r){this._endPosition=cc.v2(0,0),void 0!==C$n&&this.initWithDuration(C$t,C$e,C$i,C$n,C$r)},initWithDuration:function(C$t,C$e,C$i,C$n,C$r){return!!cc.JumpBy.prototype.initWithDuration.call(this,C$t,C$e,C$i,C$n,C$r)&&(void 0===C$r&&(C$i=C$e.y,C$e=C$e.x),this._endPosition.x=C$e,this._endPosition.y=C$i,!0)},startWithTarget:function(C$t){cc.JumpBy.prototype.startWithTarget.call(this,C$t),this._delta.x=this._endPosition.x-this._startPosition.x,this._delta.y=this._endPosition.y-this._startPosition.y},clone:function(){var C$t=new cc.JumpTo;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._endPosition,this._height,this._jumps),C$t}}),cc.jumpTo=function(C$t,C$e,C$i,C$n,C$r){return new cc.JumpTo(C$t,C$e,C$i,C$n,C$r)},cc.BezierBy=cc.Class({name:"cc.BezierBy",extends:cc.ActionInterval,ctor:function(C$t,C$e){this._config=[],this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),C$e&&cc.BezierBy.prototype.initWithDuration.call(this,C$t,C$e)},initWithDuration:function(C$t,C$e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._config=C$e,!0)},clone:function(){for(var C$t=new cc.BezierBy,C$e=(this._cloneDecoration(C$t),[]),C$i=0;C$i<this._config.length;C$i++){var C$n=this._config[C$i];C$e.push(cc.v2(C$n.x,C$n.y))}return C$t.initWithDuration(this._duration,C$e),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t);var C$e=C$t.x,C$t=C$t.y;this._previousPosition.x=C$e,this._previousPosition.y=C$t,this._startPosition.x=C$e,this._startPosition.y=C$t},update:function(C$t){var C$e,C$i,C$n,C$r,C$s,C$o;C$t=this._computeEaseTime(C$t),this.target&&(C$e=(C$o=this._config)[0].x,C$i=C$o[1].x,C$n=C$o[2].x,C$r=C$o[0].y,C$s=C$o[1].y,C$o=C$o[2].y,C$e=C$a(0,C$e,C$i,C$n,C$t),C$i=C$a(0,C$r,C$s,C$o,C$t),C$n=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$r=this.target.x,C$s=this.target.y,C$o=this._previousPosition,C$n.x=C$n.x+C$r-C$o.x,C$n.y=C$n.y+C$s-C$o.y,C$e+=C$n.x,C$i+=C$n.y,C$o.x=C$e,C$o.y=C$i,this.target.setPosition(C$e,C$i)):this.target.setPosition(C$n.x+C$e,C$n.y+C$i))},reverse:function(){var C$t=this._config,C$e=C$t[0].x,C$i=C$t[0].y,C$n=C$t[1].x,C$r=C$t[1].y,C$s=C$t[2].x,C$t=C$t[2].y,C$n=[cc.v2(C$n-C$s,C$r-C$t),cc.v2(C$e-C$s,C$i-C$t),cc.v2(-C$s,-C$t)],C$r=new cc.BezierBy(this._duration,C$n);return this._cloneDecoration(C$r),this._reverseEaseList(C$r),C$r}}),cc.bezierBy=function(C$t,C$e){return new cc.BezierBy(C$t,C$e)},cc.BezierTo=cc.Class({name:"cc.BezierTo",extends:cc.BezierBy,ctor:function(C$t,C$e){this._toConfig=[],C$e&&this.initWithDuration(C$t,C$e)},initWithDuration:function(C$t,C$e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._toConfig=C$e,!0)},clone:function(){var C$t=new cc.BezierTo;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._toConfig),C$t},startWithTarget:function(C$t){cc.BezierBy.prototype.startWithTarget.call(this,C$t);var C$t=this._startPosition,C$e=this._toConfig,C$i=this._config;C$i[0]=C$e[0].sub(C$t),C$i[1]=C$e[1].sub(C$t),C$i[2]=C$e[2].sub(C$t)}}),cc.bezierTo=function(C$t,C$e){return new cc.BezierTo(C$t,C$e)},cc.ScaleTo=cc.Class({name:"cc.ScaleTo",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i){this._scaleX=1,this._scaleY=1,this._startScaleX=1,this._startScaleY=1,this._endScaleX=0,this._endScaleY=0,this._deltaX=0,void(this._deltaY=0)!==C$e&&cc.ScaleTo.prototype.initWithDuration.call(this,C$t,C$e,C$i)},initWithDuration:function(C$t,C$e,C$i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._endScaleX=C$e,this._endScaleY=null!=C$i?C$i:C$e,!0)},clone:function(){var C$t=new cc.ScaleTo;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._endScaleX,this._endScaleY),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._startScaleX=C$t.scaleX,this._startScaleY=C$t.scaleY,this._deltaX=this._endScaleX-this._startScaleX,this._deltaY=this._endScaleY-this._startScaleY},update:function(C$t){C$t=this._computeEaseTime(C$t),this.target&&(this.target.scaleX=this._startScaleX+this._deltaX*C$t,this.target.scaleY=this._startScaleY+this._deltaY*C$t)}}),cc.scaleTo=function(C$t,C$e,C$i){return new cc.ScaleTo(C$t,C$e,C$i)},cc.ScaleBy=cc.Class({name:"cc.ScaleBy",extends:cc.ScaleTo,startWithTarget:function(C$t){cc.ScaleTo.prototype.startWithTarget.call(this,C$t),this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX,this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){var C$t=new cc.ScaleBy(this._duration,1/this._endScaleX,1/this._endScaleY);return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t},clone:function(){var C$t=new cc.ScaleBy;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._endScaleX,this._endScaleY),C$t}}),cc.scaleBy=function(C$t,C$e,C$i){return new cc.ScaleBy(C$t,C$e,C$i)},cc.Blink=cc.Class({name:"cc.Blink",extends:cc.ActionInterval,ctor:function(C$t,C$e){this._times=0,this._originalState=!1,void 0!==C$e&&this.initWithDuration(C$t,C$e)},initWithDuration:function(C$t,C$e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._times=C$e,!0)},clone:function(){var C$t=new cc.Blink;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._times),C$t},update:function(C$t){var C$e;C$t=this._computeEaseTime(C$t),this.target&&!this.isDone()&&(C$e=1/this._times,this.target.opacity=C$e/2<C$t%C$e?255:0)},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._originalState=C$t.opacity},stop:function(){this.target.opacity=this._originalState,cc.ActionInterval.prototype.stop.call(this)},reverse:function(){var C$t=new cc.Blink(this._duration,this._times);return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t}}),cc.blink=function(C$t,C$e){return new cc.Blink(C$t,C$e)},cc.FadeTo=cc.Class({name:"cc.FadeTo",extends:cc.ActionInterval,ctor:function(C$t,C$e){this._toOpacity=0,void(this._fromOpacity=0)!==C$e&&cc.FadeTo.prototype.initWithDuration.call(this,C$t,C$e)},initWithDuration:function(C$t,C$e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._toOpacity=C$e,!0)},clone:function(){var C$t=new cc.FadeTo;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._toOpacity),C$t},update:function(C$t){C$t=this._computeEaseTime(C$t);var C$e=void 0!==this._fromOpacity?this._fromOpacity:255;this.target.opacity=C$e+(this._toOpacity-C$e)*C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._fromOpacity=C$t.opacity}}),cc.fadeTo=function(C$t,C$e){return new cc.FadeTo(C$t,C$e)},cc.FadeIn=cc.Class({name:"cc.FadeIn",extends:cc.FadeTo,ctor:function(C$t){null==C$t&&(C$t=0),this._reverseAction=null,this.initWithDuration(C$t,255)},reverse:function(){var C$t=new cc.FadeOut;return C$t.initWithDuration(this._duration,0),this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t},clone:function(){var C$t=new cc.FadeIn;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._toOpacity),C$t},startWithTarget:function(C$t){this._reverseAction&&(this._toOpacity=this._reverseAction._fromOpacity),cc.FadeTo.prototype.startWithTarget.call(this,C$t)}}),cc.fadeIn=function(C$t){return new cc.FadeIn(C$t)},cc.FadeOut=cc.Class({name:"cc.FadeOut",extends:cc.FadeTo,ctor:function(C$t){null==C$t&&(C$t=0),this._reverseAction=null,this.initWithDuration(C$t,0)},reverse:function(){var C$t=new cc.FadeIn;return C$t._reverseAction=this,C$t.initWithDuration(this._duration,255),this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t},clone:function(){var C$t=new cc.FadeOut;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._toOpacity),C$t}}),cc.fadeOut=function(C$t){return new cc.FadeOut(C$t)},cc.TintTo=cc.Class({name:"cc.TintTo",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i,C$n){this._to=cc.color(0,0,0),this._from=cc.color(0,0,0),C$e instanceof cc.Color&&(C$n=C$e.b,C$i=C$e.g,C$e=C$e.r),void 0!==C$n&&this.initWithDuration(C$t,C$e,C$i,C$n)},initWithDuration:function(C$t,C$e,C$i,C$n){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._to=cc.color(C$e,C$i,C$n),!0)},clone:function(){var C$t=new cc.TintTo,C$e=(this._cloneDecoration(C$t),this._to);return C$t.initWithDuration(this._duration,C$e.r,C$e.g,C$e.b),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._from=this.target.color},update:function(C$t){C$t=this._computeEaseTime(C$t);var C$e=this._from,C$i=this._to;C$e&&(this.target.color=cc.color(C$e.r+(C$i.r-C$e.r)*C$t,C$e.g+(C$i.g-C$e.g)*C$t,C$e.b+(C$i.b-C$e.b)*C$t))}}),cc.tintTo=function(C$t,C$e,C$i,C$n){return new cc.TintTo(C$t,C$e,C$i,C$n)},cc.TintBy=cc.Class({name:"cc.TintBy",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i,C$n){this._deltaR=0,this._deltaG=0,this._deltaB=0,this._fromR=0,this._fromG=0,void(this._fromB=0)!==C$n&&this.initWithDuration(C$t,C$e,C$i,C$n)},initWithDuration:function(C$t,C$e,C$i,C$n){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t)&&(this._deltaR=C$e,this._deltaG=C$i,this._deltaB=C$n,!0)},clone:function(){var C$t=new cc.TintBy;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration,this._deltaR,this._deltaG,this._deltaB),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t);C$t=C$t.color;this._fromR=C$t.r,this._fromG=C$t.g,this._fromB=C$t.b},update:function(C$t){C$t=this._computeEaseTime(C$t),this.target.color=cc.color(this._fromR+this._deltaR*C$t,this._fromG+this._deltaG*C$t,this._fromB+this._deltaB*C$t)},reverse:function(){var C$t=new cc.TintBy(this._duration,-this._deltaR,-this._deltaG,-this._deltaB);return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t}}),cc.tintBy=function(C$t,C$e,C$i,C$n){return new cc.TintBy(C$t,C$e,C$i,C$n)},cc.DelayTime=cc.Class({name:"cc.DelayTime",extends:cc.ActionInterval,update:function(C$t){},reverse:function(){var C$t=new cc.DelayTime(this._duration);return this._cloneDecoration(C$t),this._reverseEaseList(C$t),C$t},clone:function(){var C$t=new cc.DelayTime;return this._cloneDecoration(C$t),C$t.initWithDuration(this._duration),C$t}}),cc.delayTime=function(C$t){return new cc.DelayTime(C$t)},cc.ReverseTime=cc.Class({name:"cc.ReverseTime",extends:cc.ActionInterval,ctor:function(C$t){this._other=null,C$t&&this.initWithAction(C$t)},initWithAction:function(C$t){return C$t?C$t===this._other?(cc.errorID(1029),!1):!!cc.ActionInterval.prototype.initWithDuration.call(this,C$t._duration)&&(this._other=C$t,!0):(cc.errorID(1028),!1)},clone:function(){var C$t=new cc.ReverseTime;return this._cloneDecoration(C$t),C$t.initWithAction(this._other.clone()),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._other.startWithTarget(C$t)},update:function(C$t){C$t=this._computeEaseTime(C$t),this._other&&this._other.update(1-C$t)},reverse:function(){return this._other.clone()},stop:function(){this._other.stop(),cc.Action.prototype.stop.call(this)}}),cc.reverseTime=function(C$t){return new cc.ReverseTime(C$t)},cc.TargetedAction=cc.Class({name:"cc.TargetedAction",extends:cc.ActionInterval,ctor:function(C$t,C$e){this._action=null,this._forcedTarget=null,C$e&&this.initWithTarget(C$t,C$e)},initWithTarget:function(C$t,C$e){return!!this.initWithDuration(C$e._duration)&&(this._forcedTarget=C$t,this._action=C$e,!0)},clone:function(){var C$t=new cc.TargetedAction;return this._cloneDecoration(C$t),C$t.initWithTarget(this._forcedTarget,this._action.clone()),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t),this._action.startWithTarget(this._forcedTarget)},stop:function(){this._action.stop()},update:function(C$t){C$t=this._computeEaseTime(C$t),this._action.update(C$t)},getForcedTarget:function(){return this._forcedTarget},setForcedTarget:function(C$t){this._forcedTarget!==C$t&&(this._forcedTarget=C$t)}}),cc.targetedAction=function(C$t,C$e){return new cc.TargetedAction(C$t,C$e)}},{}],7:[function(C$t,C$e,C$i){"use strict";C$t("../core/platform/CCClass");function C$n(){this.actions=[],this.target=null,this.actionIndex=0,this.currentAction=null,this.paused=!1,this.lock=!1}var C$r=C$t("../core/platform/js");cc.ActionManager=function(){this._hashTargets=C$r.createMap(!0),this._arrayTargets=[],this._currentTarget=null,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},cc.ActionManager.prototype={constructor:cc.ActionManager,_elementPool:[],_searchElementByTarget:function(C$t,C$e){for(var C$i=0;C$i<C$t.length;C$i++)if(C$e===C$t[C$i].target)return C$t[C$i];return null},_getElement:function(C$t,C$e){var C$i=this._elementPool.pop();return(C$i=C$i||new C$n).target=C$t,C$i.paused=!!C$e,C$i},_putElement:function(C$t){C$t.actions.length=0,C$t.actionIndex=0,C$t.currentAction=null,C$t.paused=!1,C$t.target=null,C$t.lock=!1,this._elementPool.push(C$t)},addAction:function(C$t,C$e,C$i){var C$n;C$t&&C$e?((C$n=this._hashTargets[C$e._id])?C$n.actions||(C$n.actions=[]):(C$n=this._getElement(C$e,C$i),this._hashTargets[C$e._id]=C$n,this._arrayTargets.push(C$n)),C$n.actions.push(C$t),C$t.startWithTarget(C$e)):cc.errorID(1e3)},removeAllActions:function(){for(var C$t=this._arrayTargets,C$e=0;C$e<C$t.length;C$e++){var C$i=C$t[C$e];C$i&&this._putElement(C$i)}this._arrayTargets.length=0,this._hashTargets=C$r.createMap(!0)},removeAllActionsFromTarget:function(C$t,C$e){null==C$t||(C$t=this._hashTargets[C$t._id])&&(C$t.actions.length=0,this._deleteHashElement(C$t))},removeAction:function(C$t){if(null!=C$t){var C$e=C$t.getOriginalTarget(),C$i=this._hashTargets[C$e._id];if(C$i){for(var C$n=0;C$n<C$i.actions.length;C$n++)if(C$i.actions[C$n]===C$t){C$i.actions.splice(C$n,1),C$i.actionIndex>=C$n&&C$i.actionIndex--;break}}else cc.logID(1001)}},_removeActionByTag:function(C$t,C$e,C$i){for(var C$n=0,C$r=C$e.actions.length;C$n<C$r;++C$n){var C$s=C$e.actions[C$n];if(C$s&&C$s.getTag()===C$t&&(!C$i||C$s.getOriginalTarget()===C$i)){this._removeActionAtIndex(C$n,C$e);break}}},removeActionByTag:function(C$t,C$e){C$t===cc.Action.TAG_INVALID&&cc.logID(1002);var C$i=this._hashTargets;if(C$e){var C$n=C$i[C$e._id];C$n&&this._removeActionByTag(C$t,C$n,C$e)}else for(var C$r in C$i){C$r=C$i[C$r];this._removeActionByTag(C$t,C$r)}},getActionByTag:function(C$t,C$e){C$t===cc.Action.TAG_INVALID&&cc.logID(1004);var C$i=this._hashTargets[C$e._id];if(C$i){if(null!=C$i.actions)for(var C$n=0;C$n<C$i.actions.length;++C$n){var C$r=C$i.actions[C$n];if(C$r&&C$r.getTag()===C$t)return C$r}cc.logID(1005,C$t)}return null},getNumberOfRunningActionsInTarget:function(C$t){C$t=this._hashTargets[C$t._id];return C$t&&C$t.actions?C$t.actions.length:0},pauseTarget:function(C$t){C$t=this._hashTargets[C$t._id];C$t&&(C$t.paused=!0)},resumeTarget:function(C$t){C$t=this._hashTargets[C$t._id];C$t&&(C$t.paused=!1)},pauseAllRunningActions:function(){for(var C$t=[],C$e=this._arrayTargets,C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n&&!C$n.paused&&(C$n.paused=!0,C$t.push(C$n.target))}return C$t},resumeTargets:function(C$t){if(C$t)for(var C$e=0;C$e<C$t.length;C$e++)C$t[C$e]&&this.resumeTarget(C$t[C$e])},pauseTargets:function(C$t){if(C$t)for(var C$e=0;C$e<C$t.length;C$e++)C$t[C$e]&&this.pauseTarget(C$t[C$e])},purgeSharedManager:function(){cc.director.getScheduler().unscheduleUpdate(this)},_removeActionAtIndex:function(C$t,C$e){C$e.actions[C$t];C$e.actions.splice(C$t,1),C$e.actionIndex>=C$t&&C$e.actionIndex--,0===C$e.actions.length&&this._deleteHashElement(C$e)},_deleteHashElement:function(C$t){var C$e=!1;if(C$t&&!C$t.lock&&this._hashTargets[C$t.target._id]){delete this._hashTargets[C$t.target._id];for(var C$i=this._arrayTargets,C$n=0,C$r=C$i.length;C$n<C$r;C$n++)if(C$i[C$n]===C$t){C$i.splice(C$n,1);break}this._putElement(C$t),C$e=!0}return C$e},update:function(C$t){for(var C$e,C$i,C$n=this._arrayTargets,C$r=0;C$r<C$n.length;C$r++){if(this._currentTarget=C$n[C$r],!(C$e=this._currentTarget).paused&&C$e.actions){for(C$e.lock=!0,C$e.actionIndex=0;C$e.actionIndex<C$e.actions.length;C$e.actionIndex++)C$e.currentAction=C$e.actions[C$e.actionIndex],C$e.currentAction&&(C$e.currentAction.step(C$t*(C$e.currentAction._speedMethod?C$e.currentAction._speed:1)),C$e.currentAction&&C$e.currentAction.isDone()&&(C$e.currentAction.stop(),C$i=C$e.currentAction,C$e.currentAction=null,this.removeAction(C$i)),C$e.currentAction=null);C$e.lock=!1}0===C$e.actions.length&&this._deleteHashElement(C$e)&&C$r--}}}},{"../core/platform/CCClass":189,"../core/platform/js":209}],8:[function(C$t,C$e,C$i){"use strict";C$t("./CCActionManager"),C$t("./CCAction"),C$t("./CCActionInterval"),C$t("./CCActionInstant"),C$t("./CCActionEase"),C$t("./CCActionCatmullRom"),C$t("./tween")},{"./CCAction":2,"./CCActionCatmullRom":3,"./CCActionEase":4,"./CCActionInstant":5,"./CCActionInterval":6,"./CCActionManager":7,"./tween":9}],9:[function(C$h,C$u,C$_){"use strict";var C$l=C$h("../animation/bezier"),C$d=0,C$n=cc.Class({name:"cc.TweenAction",extends:cc.ActionInterval,ctor:function(C$t,C$e,C$i){this._opts=C$i=C$i||Object.create(null),this._props=Object.create(null),C$i.progress=C$i.progress||this.progress,C$i.easing&&"string"==typeof C$i.easing&&(C$n=C$i.easing,C$i.easing=cc.easing[C$n],C$i.easing||cc.warnID(1031,C$n));var C$n,C$r,C$s=this._opts.relative;for(C$r in C$e){var C$o,C$a=C$e[C$r],C$c=void 0,C$l=void 0;void 0!==C$a.value&&(C$a.easing||C$a.progress)&&("string"==typeof C$a.easing?(C$c=cc.easing[C$a.easing])||cc.warnID(1031,C$a.easing):C$c=C$a.easing,C$l=C$a.progress,C$a=C$a.value),"number"==typeof C$a||C$a.lerp&&(!C$s||C$a.add||C$a.mul)&&C$a.clone?((C$o=Object.create(null)).value=C$a,C$o.easing=C$c,C$o.progress=C$l,this._props[C$r]=C$o):cc.warn("Can not animate "+C$r+" property, because it do not have [lerp, (add|mul), clone] function.")}this._originProps=C$e,this.initWithDuration(C$t)},clone:function(){var C$t=new C$n(this._duration,this._originProps,this._opts);return this._cloneDecoration(C$t),C$t},startWithTarget:function(C$t){cc.ActionInterval.prototype.startWithTarget.call(this,C$t);var C$e,C$i=!!this._opts.relative,C$n=this._props;for(C$e in C$n){var C$r=C$t[C$e],C$s=C$n[C$e];"number"==typeof C$r?(C$s.start=C$r,C$s.current=C$r,C$s.end=C$i?C$r+C$s.value:C$s.value):(C$s.start=C$r.clone(),C$s.current=C$r.clone(),C$s.end=C$i?(C$r.add||C$r.mul).call(C$r,C$s.value):C$s.value)}},update:function(C$t){var C$e=this._opts,C$i=C$t,C$n=(C$e.easing&&(C$i=C$e.easing(C$t)),this.target);if(C$n){var C$r,C$s=this._props,C$o=this._opts.progress;for(C$r in C$s){var C$a=C$s[C$r],C$c=C$a.easing?C$a.easing(C$t):C$i,C$a=C$a.current=(C$a.progress||C$o)(C$a.start,C$a.end,C$a.current,C$c);C$n[C$r]=C$a}}},progress:function(C$t,C$e,C$i,C$n){return"number"==typeof C$t?C$i=C$t+(C$e-C$t)*C$n:C$t.lerp(C$e,C$n,C$i),C$i}}),C$e=cc.Class({name:"cc.SetAction",extends:cc.ActionInstant,ctor:function(C$t){this._props={},void 0!==C$t&&this.init(C$t)},init:function(C$t){for(var C$e in C$t)this._props[C$e]=C$t[C$e];return!0},update:function(){var C$t,C$e=this._props,C$i=this.target;for(C$t in C$e)C$i[C$t]=C$e[C$t]},clone:function(){var C$t=new C$e;return C$t.init(this._props),C$t}});function C$r(C$t){this._actions=[],this._finalAction=null,this._target=C$t,this._tag=cc.Action.TAG_INVALID}C$r.stopAll=function(){cc.director.getActionManager().removeAllActions()},C$r.stopAllByTag=function(C$t){cc.director.getActionManager().removeActionByTag(C$t)},C$r.stopAllByTarget=function(C$t){cc.director.getActionManager().removeAllActionsFromTarget(C$t)},C$r.prototype.then=function(C$t){return C$t instanceof cc.Action?this._actions.push(C$t.clone()):this._actions.push(C$t._union()),this},C$r.prototype.target=function(C$t){return this._target=C$t,this},C$r.prototype.start=function(){var C$t=this._target;return C$t?C$t instanceof cc.Object&&!C$t.isValid?void 0:(this._finalAction&&cc.director.getActionManager().removeAction(this._finalAction),this._finalAction=this._union(),void 0===C$t._id&&(C$t._id=++C$d),this._finalAction.setTag(this._tag),cc.director.getActionManager().addAction(this._finalAction,C$t,!1),this):(cc.warn("Please set target to tween first"),this)},C$r.prototype.stop=function(){return this._finalAction&&cc.director.getActionManager().removeAction(this._finalAction),this},C$r.prototype.tag=function(C$t){return this._tag=C$t,this},C$r.prototype.clone=function(C$t){var C$e=this._union();return cc.tween(C$t).then(C$e.clone())},C$r.prototype.union=function(){var C$t=this._union();return this._actions.length=0,this._actions.push(C$t),this},C$r.prototype._union=function(){var C$t=this._actions;return C$t=1===C$t.length?C$t[0]:cc.sequence(C$t)},Object.assign(C$r.prototype,{bezierTo:function(C$t,C$e,C$i,C$n,C$r){var C$s=C$e.x,C$o=C$e.y,C$a=C$i.x,C$c=C$i.y;return(C$r=C$r||Object.create(null)).progress=function(C$t,C$e,C$i,C$n){return C$i.x=(0,C$l.bezier)(C$t.x,C$s,C$a,C$e.x,C$n),C$i.y=(0,C$l.bezier)(C$t.y,C$o,C$c,C$e.y,C$n),C$i},this.to(C$t,{position:C$n},C$r)},bezierBy:function(C$t,C$e,C$i,C$n,C$r){var C$s=C$e.x,C$o=C$e.y,C$a=C$i.x,C$c=C$i.y;return(C$r=C$r||Object.create(null)).progress=function(C$t,C$e,C$i,C$n){var C$r=C$t.x,C$t=C$t.y;return C$i.x=(0,C$l.bezier)(C$r,C$s+C$r,C$a+C$r,C$e.x,C$n),C$i.y=(0,C$l.bezier)(C$t,C$o+C$t,C$c+C$t,C$e.y,C$n),C$i},this.by(C$t,{position:C$n},C$r)},flipX:function(){var C$t=this;return this.call(function(){C$t._target.scaleX*=-1},this)},flipY:function(){var C$t=this;return this.call(function(){C$t._target.scaleY*=-1},this)},blink:function(C$t,C$e,C$i){var C$r=1/C$e;return(C$i=C$i||Object.create(null)).progress=function(C$t,C$e,C$i,C$n){return 1<=C$n?C$t:C$r/2<C$n%C$r?255:0},this.to(C$t,{opacity:1},C$i)}});var C$s=[];function C$t(C$n){return function(){C$s.length=0;for(var C$t=arguments.length,C$e=0;C$e<C$t;C$e++){var C$i=C$s[C$e]=arguments[C$e];C$i instanceof C$r&&(C$s[C$e]=C$i._union())}return C$n.apply(this,C$s)}}for(var C$i={to:function(C$t,C$e,C$i){return(C$i=C$i||Object.create(null)).relative=!1,new C$n(C$t,C$e,C$i)},by:function(C$t,C$e,C$i){return(C$i=C$i||Object.create(null)).relative=!0,new C$n(C$t,C$e,C$i)},set:function(C$t){return new C$e(C$t)},delay:cc.delayTime,call:cc.callFunc,hide:cc.hide,show:cc.show,removeSelf:cc.removeSelf,sequence:C$t(cc.sequence),parallel:C$t(cc.spawn)},C$f={repeat:cc.repeat,repeatForever:function(C$t){return cc.repeat(C$t,1e9)},reverseTime:cc.reverseTime},C$o=Object.keys(C$i),C$a=0;C$a<C$o.length;C$a++)!function(C$t){var C$e=C$o[C$t];C$r.prototype[C$e]=function(){var C$t=C$i[C$e].apply(this,arguments);return this._actions.push(C$t),this}}(C$a);for(var C$o=Object.keys(C$f),C$c=0;C$c<C$o.length;C$c++)!function(C$t){var C$s=C$o[C$t];C$r.prototype[C$s]=function(){for(var C$t=this._actions,C$e=arguments[arguments.length-1],C$i=arguments.length-1,C$n=(C$e instanceof cc.Tween?C$e=C$e._union():C$e instanceof cc.Action||(C$e=C$t[C$t.length-1],--C$t.length,C$i+=1),[C$e]),C$r=0;C$r<C$i;C$r++)C$n.push(arguments[C$r]);return C$e=C$f[C$s].apply(this,C$n),C$t.push(C$e),this}}(C$c);cc.tween=function(C$t){return new C$r(C$t)},cc.Tween=C$r},{"../animation/bezier":15}],10:[function(C$t,C$e,C$a){"use strict";var C$i=cc.js,C$n=C$t("./playable"),C$r=C$t("./animation-curves"),C$_=C$r.EventAnimCurve,C$d=C$r.EventInfo,C$f=C$t("./types").WrapModeMask,C$p=C$t("../core/utils/binary-search").binarySearchEpsilon;function C$s(C$t,C$e){C$n.call(this),this.target=C$t,this.animation=C$e,this._anims=new C$i.array.MutableForwardIterator([])}C$i.extend(C$s,C$n);C$r=C$s.prototype;function C$o(C$t,C$e){var C$i=C$e.clip,C$h=(C$e.duration=C$i.duration,C$e.speed=C$i.speed,C$e.wrapMode=C$i.wrapMode,C$e.frameRate=C$i.sample,(C$e.wrapMode&C$f.Loop)===C$f.Loop?C$e.repeatCount=1/0:C$e.repeatCount=1,C$e.curves=C$i.createCurves(C$e,C$t)),C$n=C$i.events;if(C$n)for(var C$r,C$s=0,C$u=C$n.length;C$s<C$u;C$s++){C$r||((C$r=new C$_).target=C$t,C$h.push(C$r));var C$o=C$n[C$s],C$a=C$o.frame/C$e.duration,C$c=void 0,C$l=C$p(C$r.ratios,C$a);0<=C$l?C$c=C$r.events[C$l]:(C$c=new C$d,C$r.ratios.push(C$a),C$r.events.push(C$c)),C$c.add(C$o.func,C$o.params)}}C$r.playState=function(C$t,C$e){C$t.clip&&(C$t.curveLoaded||C$o(this.target,C$t),C$t.animator=this,C$t.play(),"number"==typeof C$e&&C$t.setTime(C$e),this.play())},C$r.stopStatesExcept=function(C$t){var C$e=this._anims,C$i=C$e.array;for(C$e.i=0;C$e.i<C$i.length;++C$e.i){var C$n=C$i[C$e.i];C$n!==C$t&&this.stopState(C$n)}},C$r.addAnimation=function(C$t){-1===this._anims.array.indexOf(C$t)&&this._anims.push(C$t),C$t._setEventTarget(this.animation)},C$r.removeAnimation=function(C$t){var C$e=this._anims.array.indexOf(C$t);0<=C$e?(this._anims.fastRemoveAt(C$e),0===this._anims.array.length&&this.stop()):cc.errorID(3907),C$t.animator=null},C$r.sample=function(){var C$t=this._anims,C$e=C$t.array;for(C$t.i=0;C$t.i<C$e.length;++C$t.i)C$e[C$t.i].sample()},C$r.stopState=function(C$t){C$t&&C$t.stop()},C$r.pauseState=function(C$t){C$t&&C$t.pause()},C$r.resumeState=function(C$t){C$t&&C$t.resume(),this.isPaused&&this.resume()},C$r.setStateTime=function(C$t,C$e){if(void 0!==C$e)C$t&&(C$t.setTime(C$e),C$t.sample());else{C$e=C$t;for(var C$i=this._anims.array,C$n=0;C$n<C$i.length;++C$n){var C$r=C$i[C$n];C$r.setTime(C$e),C$r.sample()}}},C$r.onStop=function(){var C$t=this._anims,C$e=C$t.array;for(C$t.i=0;C$t.i<C$e.length;++C$t.i)C$e[C$t.i].stop()},C$r.onPause=function(){for(var C$t=this._anims.array,C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e];C$i.pause(),C$i.animator=null}},C$r.onResume=function(){for(var C$t=this._anims.array,C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e];C$i.animator=this,C$i.resume()}},C$r._reloadClip=function(C$t){C$o(this.target,C$t)},C$e.exports=C$s},{"../core/utils/binary-search":256,"./animation-curves":12,"./playable":19,"./types":20}],11:[function(C$t,C$e,C$r){"use strict";var C$i=C$t("./types").WrapMode,C$n=C$t("./animation-curves"),C$m=C$n.DynamicAnimCurve,C$y=C$n.quickFindIndex,C$g=C$t("./motion-path-helper").sampleMotionPaths,C$v=C$t("../core/utils/binary-search").binarySearchEpsilon,C$a=cc.Class({name:"cc.AnimationClip",extends:cc.Asset,properties:{_duration:{default:0,type:cc.Float},duration:{get:function(){return this._duration}},sample:{default:60},speed:{default:1},wrapMode:{default:C$i.Normal},curveData:{default:{},visible:!1},events:{default:[],visible:!1}},statics:{createWithSpriteFrames:function(C$t,C$e){if(!Array.isArray(C$t))return cc.errorID(3905),null;for(var C$i=new C$a,C$n=(C$i.sample=C$e||C$i.sample,C$i._duration=C$t.length/C$i.sample,[]),C$r=1/C$i.sample,C$s=0,C$o=C$t.length;C$s<C$o;C$s++)C$n[C$s]={frame:C$s*C$r,value:C$t[C$s]};return C$i.curveData={comps:{"cc.Sprite":{spriteFrame:C$n}}},C$i}},onLoad:function(){this._duration=Number.parseFloat(this.duration),this.speed=Number.parseFloat(this.speed),this.wrapMode=Number.parseInt(this.wrapMode),this.frameRate=Number.parseFloat(this.sample)},createPropCurve:function(C$t,C$e,C$i){var C$h=[],C$u=C$t instanceof cc.Node&&"position"===C$e,C$n=new C$m;C$n.target=C$t,C$n.prop=C$e;for(var C$r=0,C$_=C$i.length;C$r<C$_;C$r++){var C$s=C$i[C$r],C$o=C$s.frame/this.duration,C$o=(C$n.ratios.push(C$o),C$u&&C$h.push(C$s.motionPath),C$s.value),C$o=(C$n.values.push(C$o),C$s.curve);if(C$o){if("string"==typeof C$o){C$n.types.push(C$o);continue}if(Array.isArray(C$o)){C$o[0]===C$o[1]&&C$o[2]===C$o[3]?C$n.types.push(C$m.Linear):C$n.types.push(C$m.Bezier(C$o));continue}}C$n.types.push(C$m.Linear)}C$u&&C$g(C$h,C$n,this.duration,this.sample,C$t);for(var C$a,C$d,C$c=C$n.ratios,C$f=!0,C$l=1,C$p=C$c.length;C$l<C$p;C$l++)if(C$a=C$c[C$l]-C$c[C$l-1],1===C$l)C$d=C$a;else if(1e-6<Math.abs(C$a-C$d)){C$f=!1;break}C$n._findFrameIndex=C$f?C$y:C$v;C$e=C$n.values[0];return null==C$e||C$n._lerp||("number"==typeof C$e?C$n._lerp=C$m.prototype._lerpNumber:C$e instanceof cc.Quat?C$n._lerp=C$m.prototype._lerpQuat:C$e instanceof cc.Vec2||C$e instanceof cc.Vec3?C$n._lerp=C$m.prototype._lerpVector:C$e.lerp&&(C$n._lerp=C$m.prototype._lerpObject)),C$n},createTargetCurves:function(C$t,C$e,C$i){var C$n=C$e.props,C$r=C$e.comps;if(C$n)for(var C$s in C$n){var C$h=C$n[C$s],C$s=this.createPropCurve(C$t,C$s,C$h);C$i.push(C$s)}if(C$r)for(var C$o in C$r){var C$a=C$t.getComponent(C$o);if(C$a){var C$c,C$l=C$r[C$o];for(C$c in C$l){var C$u=C$l[C$c],C$u=this.createPropCurve(C$a,C$c,C$u);C$i.push(C$u)}}}},createCurves:function(C$t,C$e){var C$i,C$n=this.curveData,C$r=C$n.paths,C$s=[];for(C$i in this.createTargetCurves(C$e,C$n,C$s),C$r){var C$o,C$a=cc.find(C$i,C$e);C$a&&(C$o=C$r[C$i],this.createTargetCurves(C$a,C$o,C$s))}return C$s}});cc.AnimationClip=C$e.exports=C$a},{"../core/utils/binary-search":256,"./animation-curves":12,"./motion-path-helper":18,"./types":20}],12:[function(C$t,C$e,C$o){"use strict";var C$a=C$t("./bezier").bezierByTime,C$_=C$t("../core/utils/binary-search").binarySearchEpsilon,C$d=C$t("./types").WrapModeMask,C$f=C$t("./types").WrappedInfo;function C$l(C$t,C$e){var C$i;return"string"==typeof C$e?(C$i=cc.easing[C$e])?C$t=C$i(C$t):cc.errorID(3906,C$e):Array.isArray(C$e)&&(C$t=C$a(C$e,C$t)),C$t}C$t=cc.Class({name:"cc.AnimCurve",sample:function(C$t,C$e,C$i){},onTimeChangedManually:void 0});function C$i(){this.events=[]}var C$n,C$r,C$s=cc.Class({name:"cc.DynamicAnimCurve",extends:C$t,ctor:function(){this._cachedIndex=0},properties:{target:null,prop:"",values:[],ratios:[],types:[]},_findFrameIndex:C$_,_lerp:void 0,_lerpNumber:function(C$t,C$e,C$i){return C$t+(C$e-C$t)*C$i},_lerpObject:function(C$t,C$e,C$i){return C$t.lerp(C$e,C$i)},_lerpQuat:(C$r=cc.quat(),function(C$t,C$e,C$i){return C$t.lerp(C$e,C$i,C$r)}),_lerpVector:(C$n=cc.v3(),function(C$t,C$e,C$i){return C$t.lerp(C$e,C$i,C$n)}),sample:function(C$t,C$e,C$i){var C$n,C$r,C$s,C$o=this.values,C$a=this.ratios,C$c=C$a.length;0!==C$c&&(C$r=!0,(C$n=this._cachedIndex)<0&&0<(C$n=~C$n)&&C$n<C$a.length&&(C$s=C$a[C$n-1],C$n=C$a[C$n],C$s<C$e&&C$e<C$n&&(C$r=!1)),C$r&&(this._cachedIndex=this._findFrameIndex(C$a,C$e)),C$r=(C$s=this._cachedIndex)<0?(C$s=~C$s)<=0?C$o[0]:C$c<=C$s?C$o[C$c-1]:(C$n=C$o[C$s-1],this._lerp?(C$c=(C$e-(C$r=C$a[C$s-1]))/(C$a[C$s]-C$r),(C$e=this.types[C$s-1])&&(C$c=C$l(C$c,C$e)),C$a=C$o[C$s],this._lerp(C$n,C$a,C$c)):C$n):C$o[C$s],this.target[this.prop]=C$r)}}),C$c=(C$s.Linear=null,C$s.Bezier=function(C$t){return C$t},C$i.prototype.add=function(C$t,C$e){this.events.push({func:C$t||"",params:C$e||[]})},cc.Class({name:"cc.EventAnimCurve",extends:C$t,properties:{target:null,ratios:[],events:[],_wrappedInfo:{default:function(){return new C$f}},_lastWrappedInfo:null,_ignoreIndex:NaN},_wrapIterations:function(C$t){return C$t-(0|C$t)==0&&--C$t,0|C$t},sample:function(C$h,C$u,C$t){var C$e=this.ratios.length,C$i=C$t.getWrappedInfo(C$t.time,this._wrappedInfo),C$n=C$i.direction,C$r=C$_(this.ratios,C$i.ratio);if(C$r<0&&(C$r=~C$r-1,C$n<0&&(C$r+=1)),this._ignoreIndex!==C$r&&(this._ignoreIndex=NaN),C$i.frameIndex=C$r,!this._lastWrappedInfo)return this._fireEvent(C$r),void(this._lastWrappedInfo=new C$f(C$i));var C$s=C$t.wrapMode,C$o=this._wrapIterations(C$i.iterations),C$t=this._lastWrappedInfo,C$a=this._wrapIterations(C$t.iterations),C$c=C$t.frameIndex,C$t=C$t.direction,C$l=-1!==C$a&&C$o!==C$a;if(C$c===C$r&&C$l&&1===C$e)this._fireEvent(0);else if(C$c!==C$r||C$l){C$n=C$t;do{if(C$c!==C$r){if(-1===C$n&&0===C$c&&0<C$r?((C$s&C$d.PingPong)===C$d.PingPong?C$n*=-1:C$c=C$e,C$a++):1===C$n&&C$c===C$e-1&&C$r<C$e-1&&((C$s&C$d.PingPong)===C$d.PingPong?C$n*=-1:C$c=-1,C$a++),C$c===C$r)break;if(C$o<C$a)break}}while(C$c+=C$n,cc.director.getAnimationManager().pushDelayEvent(this,"_fireEvent",[C$c]),C$c!==C$r&&-1<C$c&&C$c<C$e)}this._lastWrappedInfo.set(C$i)},_fireEvent:function(C$t){if(!(C$t<0||C$t>=this.events.length||this._ignoreIndex===C$t)){var C$e=this.events[C$t].events;if(this.target.isValid)for(var C$i=this.target._components,C$n=0;C$n<C$e.length;C$n++)for(var C$r=C$e[C$n],C$s=C$r.func,C$o=0;C$o<C$i.length;C$o++){var C$a=C$i[C$o],C$c=C$a[C$s];C$c&&C$c.apply(C$a,C$r.params)}}},onTimeChangedManually:function(C$t,C$e){this._lastWrappedInfo=null,this._ignoreIndex=NaN;C$e=C$e.getWrappedInfo(C$t,this._wrappedInfo),C$t=C$e.direction,C$e=C$_(this.ratios,C$e.ratio);C$e<0&&(C$e=~C$e-1,C$t<0&&(C$e+=1),this._ignoreIndex=C$e)}}));C$e.exports={AnimCurve:C$t,DynamicAnimCurve:C$s,EventAnimCurve:C$c,EventInfo:C$i,computeRatioByType:C$l,quickFindIndex:function(C$t,C$e){var C$i=C$t.length-1;if(0==C$i)return 0;var C$n=C$t[0];if(C$e<C$n)return 0;var C$r=C$t[C$i];return C$r<C$e?~C$t.length:(C$t=(C$e=(C$e-C$n)/(C$r-C$n))/(1/C$i))-(C$r=0|C$t)<1e-6?C$r:1+C$r-C$t<1e-6?1+C$r:~(1+C$r)}}},{"../core/utils/binary-search":256,"./bezier":15,"./types":20}],13:[function(C$t,C$e,C$i){"use strict";var C$n=cc.js,C$r=cc.Class({ctor:function(){this._anims=new C$n.array.MutableForwardIterator([]),this._delayEvents=[],cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},update:function(C$t){var C$e=this._anims,C$i=C$e.array;for(C$e.i=0;C$e.i<C$i.length;++C$e.i){var C$n=C$i[C$e.i];C$n._isPlaying&&!C$n._isPaused&&C$n.update(C$t)}for(var C$r=this._delayEvents,C$s=0;C$s<C$r.length;C$s++){var C$o=C$r[C$s];C$o.target[C$o.func].apply(C$o.target,C$o.args)}C$r.length=0},destruct:function(){},addAnimation:function(C$t){-1===this._anims.array.indexOf(C$t)&&this._anims.push(C$t)},removeAnimation:function(C$t){C$t=this._anims.array.indexOf(C$t);0<=C$t?this._anims.fastRemoveAt(C$t):cc.errorID(3907)},pushDelayEvent:function(C$t,C$e,C$i){this._delayEvents.push({target:C$t,func:C$e,args:C$i})}});cc.AnimationManager=C$e.exports=C$r},{}],14:[function(C$t,C$e,C$h){"use strict";var C$i=cc.js,C$n=C$t("./playable"),C$t=C$t("./types"),C$c=C$t.WrappedInfo,C$r=C$t.WrapMode,C$l=C$t.WrapModeMask;function C$s(C$t,C$e){C$n.call(this),this._currentFramePlayed=!1,this._delay=0,this._delayTime=0,this._wrappedInfo=new C$c,this._lastWrappedInfo=null,this._process=C$o,this._clip=C$t,this._name=C$e||C$t&&C$t.name,this.animator=null,this.curves=[],this.delay=0,this.repeatCount=1,this.duration=1,this.speed=1,this.wrapMode=C$r.Normal,this.time=0,this._target=null,this._lastframeEventOn=!1,this.emit=function(){for(var C$t=new Array(arguments.length),C$e=0,C$i=C$t.length;C$e<C$i;C$e++)C$t[C$e]=arguments[C$e];cc.director.getAnimationManager().pushDelayEvent(this,"_emit",C$t)}}C$i.extend(C$s,C$n);C$t=C$s.prototype;function C$o(){var C$t,C$e=this.sample();this._lastframeEventOn&&(C$t=this._lastWrappedInfo||(this._lastWrappedInfo=new C$c(C$e)),1<this.repeatCount&&(0|C$e.iterations)>(0|C$t.iterations)&&this.emit("lastframe",this),C$t.set(C$e)),C$e.stopped&&(this.stop(),this.emit("finished",this))}function C$a(){for(var C$t=this.time,C$e=this.duration,C$i=(C$e<C$t?0===(C$t%=C$e)&&(C$t=C$e):C$t<0&&0!==(C$t%=C$e)&&(C$t+=C$e),C$t/C$e),C$n=this.curves,C$r=0,C$s=C$n.length;C$r<C$s;C$r++)C$n[C$r].sample(C$t,C$i,this);this._lastframeEventOn&&(void 0===this._lastIterations&&(this._lastIterations=C$i),(0<this.time&&this._lastIterations>C$i||this.time<0&&this._lastIterations<C$i)&&this.emit("lastframe",this),this._lastIterations=C$i)}C$t._emit=function(C$t,C$e){this._target&&this._target.isValid&&this._target.emit(C$t,C$t,C$e)},C$t.on=function(C$t,C$e,C$i){return this._target&&this._target.isValid?("lastframe"===C$t&&(this._lastframeEventOn=!0),this._target.on(C$t,C$e,C$i)):null},C$t.once=function(C$t,C$e,C$i){var C$n;return this._target&&this._target.isValid?("lastframe"===C$t&&(this._lastframeEventOn=!0),(C$n=this)._target.once(C$t,function(C$t){C$e.call(C$i,C$t),C$n._lastframeEventOn=!1})):null},C$t.off=function(C$t,C$e,C$i){this._target&&this._target.isValid&&("lastframe"===C$t&&(this._target.hasEventListener(C$t)||(this._lastframeEventOn=!1)),this._target.off(C$t,C$e,C$i))},C$t._setEventTarget=function(C$t){this._target=C$t},C$t.onPlay=function(){this.setTime(0),this._delayTime=this._delay,cc.director.getAnimationManager().addAnimation(this),this.animator&&this.animator.addAnimation(this),this.emit("play",this)},C$t.onStop=function(){this.isPaused||cc.director.getAnimationManager().removeAnimation(this),this.animator&&this.animator.removeAnimation(this),this.emit("stop",this)},C$t.onResume=function(){cc.director.getAnimationManager().addAnimation(this),this.emit("resume",this)},C$t.onPause=function(){cc.director.getAnimationManager().removeAnimation(this),this.emit("pause",this)},C$t.setTime=function(C$t){this._currentFramePlayed=!1,this.time=C$t||0;for(var C$e=this.curves,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];C$r.onTimeChangedManually&&C$r.onTimeChangedManually(C$t,this)}},C$t.update=function(C$t){0<this._delayTime&&(this._delayTime-=C$t,0<this._delayTime)||(this._currentFramePlayed?this.time+=C$t*this.speed:this._currentFramePlayed=!0,this._process())},C$t._needRevers=function(C$t){var C$e=this.wrapMode,C$i=!1;return(C$e&C$l.PingPong)===C$l.PingPong&&(C$t-(0|C$t)==0&&0<C$t&&--C$t,1&C$t&&(C$i=!C$i)),C$i=(C$e&C$l.Reverse)===C$l.Reverse?!C$i:C$i},C$t.getWrappedInfo=function(C$t,C$e){C$e=C$e||new C$c;var C$i=!1,C$n=this.duration,C$r=this.repeatCount,C$s=0<C$t?C$t/C$n:-C$t/C$n,C$r=(C$r<=C$s&&(C$i=!0,C$t=(C$r=0===(C$r=(C$s=C$r)-(0|C$r))?1:C$r)*C$n*(0<C$t?1:-1)),C$n<C$t?C$t=0==(C$r=C$t%C$n)?C$n:C$r:C$t<0&&0!==(C$t%=C$n)&&(C$t+=C$n),!1),C$o=this._wrapMode&C$l.ShouldWrap,C$a=(C$r=C$o?this._needRevers(C$s):C$r)?-1:1;return this.speed<0&&(C$a*=-1),C$e.ratio=(C$t=C$o&&C$r?C$n-C$t:C$t)/C$n,C$e.time=C$t,C$e.direction=C$a,C$e.stopped=C$i,C$e.iterations=C$s,C$e},C$t.sample=function(){for(var C$t=this.getWrappedInfo(this.time,this._wrappedInfo),C$e=this.curves,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)C$e[C$i].sample(C$t.time,C$t.ratio,this);return C$t},C$i.get(C$t,"clip",function(){return this._clip}),C$i.get(C$t,"name",function(){return this._name}),C$i.obsolete(C$t,"AnimationState.length","duration"),C$i.getset(C$t,"curveLoaded",function(){return 0<this.curves.length},function(){this.curves.length=0}),C$i.getset(C$t,"wrapMode",function(){return this._wrapMode},function(C$t){this._wrapMode=C$t,this.time=0,C$t&C$l.Loop?this.repeatCount=1/0:this.repeatCount=1}),C$i.getset(C$t,"repeatCount",function(){return this._repeatCount},function(C$t){this._repeatCount=C$t;var C$e=this._wrapMode&C$l.ShouldWrap,C$i=(this.wrapMode&C$l.Reverse)===C$l.Reverse;this._process=1/0!==C$t||C$e||C$i?C$o:C$a}),C$i.getset(C$t,"delay",function(){return this._delay},function(C$t){this._delayTime=this._delay=C$t}),cc.AnimationState=C$e.exports=C$s},{"./playable":19,"./types":20}],15:[function(C$t,C$e,C$i){"use strict";var C$h=Math.cos,C$u=Math.acos,C$_=Math.max,C$d=2*Math.PI,C$f=Math.sqrt;function C$p(C$t){return C$t<0?-Math.pow(-C$t,1/3):Math.pow(C$t,1/3)}C$e.exports={bezier:function(C$t,C$e,C$i,C$n,C$r){var C$s=1-C$r;return C$s*(C$s*(C$t+(3*C$e-C$t)*C$r)+3*C$i*C$r*C$r)+C$n*C$r*C$r*C$r},bezierByTime:function(C$t,C$e){var C$e=function(C$t,C$e){var C$i,C$n,C$r=+C$e,C$s=C$e-C$t[0],C$o=3*C$r,C$a=3*C$s,C$t=3*(C$e-C$t[2]),C$t=1/3*(C$s=(C$o-6*C$s+C$t)*(C$e=1/(C$a-C$r-C$t+(C$e-1)))),C$o=1/3*(3*(C$a=(C$a-C$o)*C$e)-C$s*C$s);if((C$r=(C$a=(C$s=(2*C$s*C$s*C$s-9*C$s*C$a+27*(C$r*C$e))/27)/2)*C$a+(C$l=1/3*C$o)*C$l*C$l)<0)return C$l=C$f((C$e=1/3*-C$o)*C$e*C$e),C$e=C$u((C$o=-C$s/(2*C$l))<-1?-1:1<C$o?1:C$o),C$i=(C$s=2*C$p(C$l))*C$h(C$e*(1/3))-C$t,C$n=C$s*C$h((C$e+C$d)*(1/3))-C$t,C$o=C$s*C$h((C$e+2*C$d)*(1/3))-C$t,0<=C$i&&C$i<=1?0<=C$n&&C$n<=1?0<=C$o&&C$o<=1?C$_(C$i,C$n,C$o):C$_(C$i,C$n):0<=C$o&&C$o<=1?C$_(C$i,C$o):C$i:0<=C$n&&C$n<=1?0<=C$o&&C$o<=1?C$_(C$n,C$o):C$n:C$o;if(0==C$r)return C$n=-(C$c=C$a<0?C$p(-C$a):-C$p(C$a))-C$t,0<=(C$i=2*C$c-C$t)&&C$i<=1?0<=C$n&&C$n<=1?C$_(C$i,C$n):C$i:C$n;var C$c,C$l=C$f(C$r);return C$i=(C$c=C$p(-C$a+C$l))-C$p(C$a+C$l)-C$t}(C$t,C$e),C$i=C$t[1];return((1-C$e)*(C$i+(C$t[3]-C$i)*C$e)*3+C$e*C$e)*C$e}}},{}],16:[function(C$t,C$e,C$i){"use strict";var C$n={constant:function(){return 0},linear:function(C$t){return C$t},quadIn:function(C$t){return C$t*C$t},quadOut:function(C$t){return C$t*(2-C$t)},quadInOut:function(C$t){return(C$t*=2)<1?.5*C$t*C$t:-.5*(--C$t*(C$t-2)-1)},cubicIn:function(C$t){return C$t*C$t*C$t},cubicOut:function(C$t){return--C$t*C$t*C$t+1},cubicInOut:function(C$t){return(C$t*=2)<1?.5*C$t*C$t*C$t:.5*((C$t-=2)*C$t*C$t+2)},quartIn:function(C$t){return C$t*C$t*C$t*C$t},quartOut:function(C$t){return 1- --C$t*C$t*C$t*C$t},quartInOut:function(C$t){return(C$t*=2)<1?.5*C$t*C$t*C$t*C$t:-.5*((C$t-=2)*C$t*C$t*C$t-2)},quintIn:function(C$t){return C$t*C$t*C$t*C$t*C$t},quintOut:function(C$t){return--C$t*C$t*C$t*C$t*C$t+1},quintInOut:function(C$t){return(C$t*=2)<1?.5*C$t*C$t*C$t*C$t*C$t:.5*((C$t-=2)*C$t*C$t*C$t*C$t+2)},sineIn:function(C$t){return 1-Math.cos(C$t*Math.PI/2)},sineOut:function(C$t){return Math.sin(C$t*Math.PI/2)},sineInOut:function(C$t){return.5*(1-Math.cos(Math.PI*C$t))},expoIn:function(C$t){return 0===C$t?0:Math.pow(1024,C$t-1)},expoOut:function(C$t){return 1===C$t?1:1-Math.pow(2,-10*C$t)},expoInOut:function(C$t){return 0===C$t?0:1===C$t?1:(C$t*=2)<1?.5*Math.pow(1024,C$t-1):.5*(2-Math.pow(2,-10*(C$t-1)))},circIn:function(C$t){return 1-Math.sqrt(1-C$t*C$t)},circOut:function(C$t){return Math.sqrt(1- --C$t*C$t)},circInOut:function(C$t){return(C$t*=2)<1?-.5*(Math.sqrt(1-C$t*C$t)-1):.5*(Math.sqrt(1-(C$t-=2)*C$t)+1)},elasticIn:function(C$t){var C$e,C$i=.1;return 0===C$t?0:1===C$t?1:(C$e=!C$i||C$i<1?(C$i=1,.1):.4*Math.asin(1/C$i)/(2*Math.PI),-C$i*Math.pow(2,10*--C$t)*Math.sin((C$t-C$e)*(2*Math.PI)/.4))},elasticOut:function(C$t){var C$e,C$i=.1;return 0===C$t?0:1===C$t?1:(C$e=!C$i||C$i<1?(C$i=1,.1):.4*Math.asin(1/C$i)/(2*Math.PI),C$i*Math.pow(2,-10*C$t)*Math.sin((C$t-C$e)*(2*Math.PI)/.4)+1)},elasticInOut:function(C$t){var C$e,C$i=.1;return 0===C$t?0:1===C$t?1:(C$e=!C$i||C$i<1?(C$i=1,.1):.4*Math.asin(1/C$i)/(2*Math.PI),(C$t*=2)<1?C$i*Math.pow(2,10*--C$t)*Math.sin((C$t-C$e)*(2*Math.PI)/.4)*-.5:C$i*Math.pow(2,-10*--C$t)*Math.sin((C$t-C$e)*(2*Math.PI)/.4)*.5+1)},backIn:function(C$t){return C$t*C$t*(2.70158*C$t-1.70158)},backOut:function(C$t){return--C$t*C$t*(2.70158*C$t+1.70158)+1},backInOut:function(C$t){var C$e=2.5949095;return(C$t*=2)<1?C$t*C$t*((1+C$e)*C$t-C$e)*.5:.5*((C$t-=2)*C$t*((1+C$e)*C$t+C$e)+2)},bounceIn:function(C$t){return 1-C$n.bounceOut(1-C$t)},bounceOut:function(C$t){return C$t<1/2.75?7.5625*C$t*C$t:C$t<2/2.75?7.5625*(C$t-=1.5/2.75)*C$t+.75:C$t<2.5/2.75?7.5625*(C$t-=2.25/2.75)*C$t+.9375:7.5625*(C$t-=2.625/2.75)*C$t+.984375},bounceInOut:function(C$t){return C$t<.5?.5*C$n.bounceIn(2*C$t):.5*C$n.bounceOut(2*C$t-1)+.5},smooth:function(C$t){return C$t<=0?0:1<=C$t?1:C$t*C$t*(3-2*C$t)},fade:function(C$t){return C$t<=0?0:1<=C$t?1:C$t*C$t*C$t*(C$t*(6*C$t-15)+10)}};function C$r(C$e,C$i){return function(C$t){return C$t<.5?C$i(2*C$t)/2:C$e(2*C$t-1)/2+.5}}C$n.quadOutIn=C$r(C$n.quadIn,C$n.quadOut),C$n.cubicOutIn=C$r(C$n.cubicIn,C$n.cubicOut),C$n.quartOutIn=C$r(C$n.quartIn,C$n.quartOut),C$n.quintOutIn=C$r(C$n.quintIn,C$n.quintOut),C$n.sineOutIn=C$r(C$n.sineIn,C$n.sineOut),C$n.expoOutIn=C$r(C$n.expoIn,C$n.expoOut),C$n.circOutIn=C$r(C$n.circIn,C$n.circOut),C$n.backOutIn=C$r(C$n.backIn,C$n.backOut),C$n.bounceIn=function(C$t){return 1-C$n.bounceOut(1-C$t)},C$n.bounceInOut=function(C$t){return C$t<.5?.5*C$n.bounceIn(2*C$t):.5*C$n.bounceOut(2*C$t-1)+.5},C$n.bounceOutIn=C$r(C$n.bounceIn,C$n.bounceOut),cc.easing=C$e.exports=C$n},{}],17:[function(C$t,C$e,C$i){"use strict";C$t("./bezier"),C$t("./easing"),C$t("./types"),C$t("./motion-path-helper"),C$t("./animation-curves"),C$t("./animation-clip"),C$t("./animation-manager"),C$t("./animation-state"),C$t("./animation-animator")},{"./animation-animator":10,"./animation-clip":11,"./animation-curves":12,"./animation-manager":13,"./animation-state":14,"./bezier":15,"./easing":16,"./motion-path-helper":18,"./types":20}],18:[function(C$t,C$e,C$n){"use strict";var C$G=C$t("./animation-curves").DynamicAnimCurve,C$z=C$t("./animation-curves").computeRatioByType,C$i=C$t("./bezier").bezier,C$U=C$t("../core/utils/binary-search").binarySearchEpsilon,C$W=cc.v2;function C$H(C$t){this.points=C$t||[],this.beziers=[],this.ratios=[],this.progresses=[],this.length=0,this.computeBeziers()}function C$s(){this.start=C$W(),this.end=C$W(),this.startCtrlPoint=C$W(),this.endCtrlPoint=C$W()}C$H.prototype.computeBeziers=function(){this.beziers.length=0,this.ratios.length=0,this.progresses.length=0,this.length=0;for(var C$t=1;C$t<this.points.length;C$t++){var C$e,C$i=this.points[C$t-1],C$n=this.points[C$t];(C$e=new C$s).start=C$i.pos,C$e.startCtrlPoint=C$i.out,C$e.end=C$n.pos,C$e.endCtrlPoint=C$n.in,this.beziers.push(C$e),this.length+=C$e.getLength()}for(var C$r=0,C$t=0;C$t<this.beziers.length;C$t++)C$e=this.beziers[C$t],this.ratios[C$t]=C$e.getLength()/this.length,this.progresses[C$t]=C$r+=this.ratios[C$t];return this.beziers},C$s.prototype.getPointAt=function(C$t){C$t=this.getUtoTmapping(C$t);return this.getPoint(C$t)},C$s.prototype.getPoint=function(C$t){var C$e=C$i(this.start.x,this.startCtrlPoint.x,this.endCtrlPoint.x,this.end.x,C$t),C$t=C$i(this.start.y,this.startCtrlPoint.y,this.endCtrlPoint.y,this.end.y,C$t);return new C$W(C$e,C$t)},C$s.prototype.getLength=function(){var C$t=this.getLengths();return C$t[C$t.length-1]},C$s.prototype.getLengths=function(C$t){if(C$t=C$t||(this.__arcLengthDivisions||200),this.cacheArcLengths&&this.cacheArcLengths.length===C$t+1)return this.cacheArcLengths;var C$e,C$i,C$n=[],C$r=this.getPoint(0),C$s=C$W(),C$o=0;for(C$n.push(0),C$i=1;C$i<=C$t;C$i++)C$e=this.getPoint(C$i/C$t),C$s.x=C$r.x-C$e.x,C$s.y=C$r.y-C$e.y,C$o+=C$s.mag(),C$n.push(C$o),C$r=C$e;return this.cacheArcLengths=C$n},C$s.prototype.getUtoTmapping=function(C$t,C$e){for(var C$i,C$n=this.getLengths(),C$r=0,C$s=C$n.length,C$o=C$e||C$t*C$n[C$s-1],C$a=0,C$c=C$s-1;C$a<=C$c;)if((C$i=C$n[C$r=Math.floor(C$a+(C$c-C$a)/2)]-C$o)<0)C$a=C$r+1;else{if(!(0<C$i)){C$c=C$r;break}C$c=C$r-1}if(C$n[C$r=C$c]===C$o)return C$r/(C$s-1);C$e=C$n[C$r];return(C$r+(C$o-C$e)/(C$n[C$r+1]-C$e))/(C$s-1)},C$e.exports={sampleMotionPaths:function(C$h,C$t,C$u,C$_,C$d){function C$f(C$t){return C$t instanceof cc.Vec2?{in:C$t,pos:C$t,out:C$t}:Array.isArray(C$t)&&6===C$t.length?{in:C$W(C$t[2],C$t[3]),pos:C$W(C$t[0],C$t[1]),out:C$W(C$t[4],C$t[5])}:{in:cc.Vec2.ZERO,pos:cc.Vec2.ZERO,out:cc.Vec2.ZERO}}var C$e=C$t.values=C$t.values.map(function(C$t){return C$t=Array.isArray(C$t)?2===C$t.length?cc.v2(C$t[0],C$t[1]):cc.v3(C$t[0],C$t[1],C$t[2]):C$t});if(0!==C$h.length&&0!==C$e.length){for(var C$p=!1,C$m=0;C$m<C$h.length;C$m++){var C$y=C$h[C$m];if(C$y&&!function(C$t){if(Array.isArray(C$t)){for(var C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e];if(!Array.isArray(C$n)||6!==C$n.length)return}return 1}}(C$y)&&(cc.errorID(3904,C$d?C$d.name:"","position",C$m),C$y=null),C$y&&0<C$y.length){C$p=!0;break}}if(C$p&&1!==C$e.length){for(var C$g=C$t.types,C$i=C$t.ratios,C$v=C$t.values=[],C$x=C$t.types=[],C$b=C$t.ratios=[],C$A=0,C$C=C$G.Linear,C$n=0,C$S=C$h.length;C$n<C$S-1;C$n++){var C$T=C$h[C$n],C$w=C$i[C$n],C$E=C$i[C$n+1]-C$w,C$M=C$e[C$n],C$I=C$e[C$n+1],C$B=C$g[C$n],C$R=[],C$r=C$A/C$E,C$P=1/(C$E*C$u*C$_);if(C$T&&0<C$T.length){var C$D=[];C$D.push(C$f(C$M));for(var C$s=0,C$L=C$T.length;C$s<C$L;C$s++){var C$V=C$f(C$T[C$s]);C$D.push(C$V)}C$D.push(C$f(C$I));for(var C$o,C$O,C$F,C$a,C$c,C$l=new C$H(C$D),C$N=(C$l.computeBeziers(),C$l.progresses);1e-6<1-C$r;)C$c=(C$a=C$z(C$a=C$r,C$B))<0?(C$F=(0-C$a)*(C$o=C$l.beziers[0]).getLength(),C$O=C$o.start.sub(C$o.endCtrlPoint).normalize(),C$o.start.add(C$O.mul(C$F))):1<C$a?(C$F=(C$a-1)*(C$o=C$l.beziers[C$l.beziers.length-1]).getLength(),C$O=C$o.end.sub(C$o.startCtrlPoint).normalize(),C$o.end.add(C$O.mul(C$F))):(C$a=(C$a-=0<(C$c=(C$c=C$U(C$N,C$a))<0?~C$c:C$c)?C$N[C$c-1]:0)/C$l.ratios[C$c],C$l.beziers[C$c].getPointAt(C$a)),C$R.push(C$c),C$r+=C$P}else for(;1e-6<1-C$r;)C$a=C$z(C$a=C$r,C$B),C$R.push(C$M.lerp(C$I,C$a)),C$r+=C$P;for(C$C="constant"===C$B?C$B:C$G.Linear,C$s=0,C$L=C$R.length;C$s<C$L;C$s++)C$k(C$R[C$s],C$C,C$w+C$A+C$P*C$s*C$E);C$A=1e-6<Math.abs(C$r-1)?(C$r-1)*C$E:0}C$i[C$i.length-1]!==C$b[C$b.length-1]&&C$k(C$e[C$e.length-1],C$C,C$i[C$i.length-1])}}function C$k(C$t,C$e,C$i){C$v.push(C$t),C$x.push(C$e),C$b.push(C$i)}},Curve:C$H,Bezier:C$s}},{"../core/utils/binary-search":256,"./animation-curves":12,"./bezier":15}],19:[function(C$t,C$e,C$i){"use strict";var C$n=cc.js,C$r=C$t("../core/CCDebug");function C$s(){this._isPlaying=!1,this._isPaused=!1,this._stepOnce=!1}function C$o(){}C$t=C$s.prototype;C$n.get(C$t,"isPlaying",function(){return this._isPlaying},!0),C$n.get(C$t,"isPaused",function(){return this._isPaused},!0);C$t.onPlay=C$o,C$t.onPause=C$o,C$t.onResume=C$o,C$t.onStop=C$o,C$t.onError=C$o,C$t.play=function(){this._isPlaying?this._isPaused?(this._isPaused=!1,this.onResume()):this.onError(C$r.getError(3912)):(this._isPlaying=!0,this.onPlay())},C$t.stop=function(){this._isPlaying&&(this._isPlaying=!1,this.onStop(),this._isPaused=!1)},C$t.pause=function(){this._isPlaying&&!this._isPaused&&(this._isPaused=!0,this.onPause())},C$t.resume=function(){this._isPlaying&&this._isPaused&&(this._isPaused=!1,this.onResume())},C$t.step=function(){this.pause(),this._stepOnce=!0,this._isPlaying||this.play()},C$e.exports=C$s},{"../core/CCDebug":27}],20:[function(C$t,C$e,C$i){"use strict";var C$n={Loop:2,ShouldWrap:4,PingPong:22,Reverse:36},C$r=cc.Enum({Default:0,Normal:1,Reverse:C$n.Reverse,Loop:C$n.Loop,LoopReverse:C$n.Loop|C$n.Reverse,PingPong:C$n.PingPong,PingPongReverse:C$n.PingPong|C$n.Reverse});function C$s(C$t){C$t?this.set(C$t):(this.ratio=0,this.time=0,this.direction=1,this.stopped=!0,this.iterations=0,this.frameIndex=void 0)}cc.WrapMode=C$r,C$s.prototype.set=function(C$t){this.ratio=C$t.ratio,this.time=C$t.time,this.direction=C$t.direction,this.stopped=C$t.stopped,this.iterations=C$t.iterations,this.frameIndex=C$t.frameIndex},C$e.exports={WrapModeMask:C$n,WrapMode:C$r,WrappedInfo:C$s}},{}],21:[function(C$t,C$e,C$h){"use strict";function C$n(C$t){C$r.call(this),this._shouldRecycleOnEnded=!1,this._src=C$t,this._element=null,this.id=0,this._volume=1,this._loop=!1,this._nextTime=0,this._state=C$n.State.INITIALZING,this._onended=function(){this._state=C$n.State.STOPPED,this.emit("ended")}.bind(this)}var C$i,C$r=C$t("../core/event/event-target"),C$s=C$t("../core/platform/CCSys"),C$o=C$t("../core/assets/CCAudioClip").LoadMode,C$a=!1,C$c=[],C$l=(cc.js.extend(C$n,C$r),C$n.State={ERROR:-1,INITIALZING:0,PLAYING:1,PAUSED:2,STOPPED:3},(C$t=C$n.prototype)._bindEnded=function(C$t){C$t=C$t||this._onended;var C$e=this._element;this._src&&C$e instanceof HTMLAudioElement?C$e.addEventListener("ended",C$t):C$e.onended=C$t},C$t._unbindEnded=function(){var C$t=this._element;C$t instanceof HTMLAudioElement?C$t.removeEventListener("ended",this._onended):C$t&&(C$t.onended=null)},C$t._onLoaded=function(){this._createElement(),this.setVolume(this._volume),this.setLoop(this._loop),0!==this._nextTime&&this.setCurrentTime(this._nextTime),this.getState(!1)===C$n.State.PLAYING?this.play():this._state=C$n.State.INITIALZING},C$t._createElement=function(){var C$t=this._src._nativeAsset;C$t instanceof HTMLAudioElement?(this._element||(this._element=document.createElement("audio")),this._element.src=C$t.src):this._element=new C$l(C$t,this)},C$t.play=function(){this._state=C$n.State.PLAYING,this._element&&(this._bindEnded(),this._element.play(),this._touchToPlay())},C$t._touchToPlay=function(){var C$t;this._src&&this._src.loadMode===C$o.DOM_AUDIO&&this._element.paused&&C$c.push({instance:this,offset:0,audio:this._element}),C$a||(C$a=!0,C$t="ontouchend"in window?"touchend":"mousedown",cc.game.canvas.addEventListener(C$t,function(){for(var C$t;C$t=C$c.pop();)C$t.audio.play(C$t.offset)}))},C$t.destroy=function(){this._element=null},C$t.pause=function(){this._element&&this.getState()===C$n.State.PLAYING&&(this._unbindEnded(),this._element.pause(),this._state=C$n.State.PAUSED)},C$t.resume=function(){this._element&&this.getState()===C$n.State.PAUSED&&(this._bindEnded(),this._element.play(),this._state=C$n.State.PLAYING)},C$t.stop=function(){if(this._element){this._element.pause();try{this._element.currentTime=0}catch(C$t){}for(var C$t=0;C$t<C$c.length;C$t++)if(C$c[C$t].instance===this){C$c.splice(C$t,1);break}this._unbindEnded(),this.emit("stop"),this._state=C$n.State.STOPPED}},C$t.setLoop=function(C$t){this._loop=C$t,this._element&&(this._element.loop=C$t)},C$t.getLoop=function(){return this._loop},C$t.setVolume=function(C$t){this._volume=C$t,this._element&&(this._element.volume=C$t)},C$t.getVolume=function(){return this._volume},C$t.setCurrentTime=function(C$e){if(this._element){this._nextTime=0,this._unbindEnded(),this._bindEnded(function(){this._bindEnded()}.bind(this));try{this._element.currentTime=C$e}catch(C$t){var C$i=this._element;C$i.addEventListener&&C$i.addEventListener("loadedmetadata",function C$t(){C$i.removeEventListener("loadedmetadata",C$t),C$i.currentTime=C$e})}}else this._nextTime=C$e},C$t.getCurrentTime=function(){return this._element?this._element.currentTime:0},C$t.getDuration=function(){return this._element?this._element.duration:0},C$t.getState=function(C$t){return(C$t=void 0===C$t?!0:C$t)&&this._forceUpdatingState(),this._state},C$t._forceUpdatingState=function(){var C$t=this._element;C$t&&(C$n.State.PLAYING===this._state&&C$t.paused?this._state=C$n.State.STOPPED:C$n.State.STOPPED!==this._state||C$t.paused||(this._state=C$n.State.PLAYING))},Object.defineProperty(C$t,"src",{get:function(){return this._src},set:function(C$i){var C$t;return this._unbindEnded(),C$i?(this._src=C$i).loaded?this._onLoaded():(C$t=this,C$i.once("load",function(){C$i===C$t._src&&C$t._onLoaded()}),cc.loader.load({url:C$i.nativeUrl,skips:["Loader"]},function(C$t,C$e){C$t?cc.error(C$t):C$i.loaded||(C$i._nativeAsset=C$e)})):(this._src=null,this._element instanceof C$l?this._element=null:this._element&&(this._element.src=""),this._state=C$n.State.INITIALZING),C$i},enumerable:!0,configurable:!0}),Object.defineProperty(C$t,"paused",{get:function(){return!this._element||this._element.paused},enumerable:!0,configurable:!0}),C$i=cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE||cc.sys.browserType===cc.sys.BROWSER_TYPE_BAIDU||cc.sys.browserType===cc.sys.BROWSER_TYPE_UC?.01:0,function(C$t,C$e){this._audio=C$e,this._context=C$s.__audioSupport.context,this._buffer=C$t,this._gainObj=this._context.createGain(),this.volume=1,this._gainObj.connect(this._context.destination),this._loop=!1,this._startTime=-1,this._currentSource=null,this.playedLength=0,this._currentTimer=null,this._endCallback=function(){this.onended&&this.onended(this)}.bind(this)});(C$t=C$l.prototype).play=function(C$t){this._currentSource&&!this.paused&&(this._currentSource.onended=null,this._currentSource.stop(0),this.playedLength=0);var C$e,C$i=this._context.createBufferSource(),C$n=(C$i.buffer=this._buffer,C$i.connect(this._gainObj),C$i.loop=this._loop,this._startTime=this._context.currentTime,(C$t=C$t||this.playedLength)&&(this._startTime-=C$t),this._buffer.duration),C$r=C$t;this._loop?C$i.start?C$i.start(0,C$r):C$i.notoGrainOn?C$i.noteGrainOn(0,C$r):C$i.noteOn(0,C$r):(C$n=C$n-C$t,C$i.start?C$i.start(0,C$r,C$n):C$i.noteGrainOn?C$i.noteGrainOn(0,C$r,C$n):C$i.noteOn(0,C$r,C$n)),(this._currentSource=C$i).onended=this._endCallback,C$i.context.state&&"suspended"!==C$i.context.state||0!==this._context.currentTime||(C$e=this,clearTimeout(this._currentTimer),this._currentTimer=setTimeout(function(){0===C$e._context.currentTime&&C$c.push({instance:C$e._audio,offset:C$t,audio:C$e})},10)),cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI&&cc.sys.isMobile&&"interrupted"===C$i.context.state&&C$i.context.resume()},C$t.pause=function(){var C$t;clearTimeout(this._currentTimer),this.paused||(this.playedLength=this._context.currentTime-this._startTime,this.playedLength%=this._buffer.duration,C$t=this._currentSource,this._currentSource=null,this._startTime=-1,C$t&&C$t.stop(0))},Object.defineProperty(C$t,"paused",{get:function(){return(!this._currentSource||!this._currentSource.loop)&&(-1===this._startTime||this._context.currentTime-this._startTime>this._buffer.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(C$t,"loop",{get:function(){return this._loop},set:function(C$t){return this._currentSource&&(this._currentSource.loop=C$t),this._loop=C$t},enumerable:!0,configurable:!0}),Object.defineProperty(C$t,"volume",{get:function(){return this._volume},set:function(C$e){if(this._volume=C$e,this._gainObj.gain.setTargetAtTime)try{this._gainObj.gain.setTargetAtTime(C$e,this._context.currentTime,C$i)}catch(C$t){this._gainObj.gain.setTargetAtTime(C$e,this._context.currentTime,.01)}else this._gainObj.gain.value=C$e;C$s.os===C$s.OS_IOS&&!this.paused&&this._currentSource&&(this._currentSource.onended=null,this.pause(),this.play())},enumerable:!0,configurable:!0}),Object.defineProperty(C$t,"currentTime",{get:function(){return this.paused||(this.playedLength=this._context.currentTime-this._startTime,this.playedLength%=this._buffer.duration),this.playedLength},set:function(C$t){return this.paused?this.playedLength=C$t:(this.pause(),this.playedLength=C$t,this.play()),C$t},enumerable:!0,configurable:!0}),Object.defineProperty(C$t,"duration",{get:function(){return this._buffer.duration},enumerable:!0,configurable:!0}),C$e.exports=cc.Audio=C$n},{"../core/assets/CCAudioClip":35,"../core/event/event-target":115,"../core/platform/CCSys":198}],22:[function(C$t,C$e,C$n){"use strict";function C$s(C$t){function C$e(){var C$t;C$r(this.id)&&(delete C$c[this.id],C$t=C$n.indexOf(this.id),cc.js.array.fastRemoveAt(C$n,C$t)),(C$t=this)._shouldRecycleOnEnded&&(C$t._finishCallback=null,C$t.off("ended"),C$t.off("stop"),C$t.src=null,C$h.includes(C$t)||(C$h.length<32?C$h.push(C$t):C$t.destroy()),C$t._shouldRecycleOnEnded=!1)}var C$i=C$d++,C$n=(C$n=C$l[C$t])||(C$l[C$t]=[]);return C$u._maxAudioInstance<=C$n.length&&(C$t=C$n.shift(),C$r(C$t).stop()),(C$t=C$h.pop()||new C$a).on("ended",function(){this._finishCallback&&this._finishCallback(),C$e.call(this)},C$t),C$t.on("stop",C$e,C$t),C$t.id=C$i,C$c[C$i]=C$t,C$n.push(C$i),C$t}function C$r(C$t){return C$c[C$t]}function C$o(C$t){return void 0===C$t?C$t=1:"string"==typeof C$t&&(C$t=Number.parseFloat(C$t)),C$t}var C$a=C$t("./CCAudio"),C$_=C$t("../core/assets/CCAudioClip"),C$i=cc.js,C$d=0,C$c=C$i.createMap(!0),C$l={},C$h=[],C$u={AudioState:C$a.State,_maxWebAudioSize:2097152,_maxAudioInstance:24,_id2audio:C$c,play:function(C$t,C$e,C$i){var C$n,C$r=C$t;if("string"==typeof C$t)cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$n=C$s(C$r=C$t),C$_._loadByUrl(C$r,function(C$t,C$e){C$e&&(C$n.src=C$e)});else{if(!C$t)return;C$r=C$t.nativeUrl,(C$n=C$s(C$r)).src=C$t}return C$n._shouldRecycleOnEnded=!0,C$n.setLoop(C$e||!1),C$i=C$o(C$i),C$n.setVolume(C$i),C$n.play(),C$n.id},setLoop:function(C$t,C$e){C$t=C$r(C$t);C$t&&C$t.setLoop&&C$t.setLoop(C$e)},isLoop:function(C$t){C$t=C$r(C$t);return!(!C$t||!C$t.getLoop)&&C$t.getLoop()},setVolume:function(C$t,C$e){C$t=C$r(C$t);C$t&&C$t.setVolume(C$e)},getVolume:function(C$t){C$t=C$r(C$t);return C$t?C$t.getVolume():1},setCurrentTime:function(C$t,C$e){C$t=C$r(C$t);return!!C$t&&(C$t.setCurrentTime(C$e),!0)},getCurrentTime:function(C$t){C$t=C$r(C$t);return C$t?C$t.getCurrentTime():0},getDuration:function(C$t){C$t=C$r(C$t);return C$t?C$t.getDuration():0},getState:function(C$t){C$t=C$r(C$t);return C$t?C$t.getState():this.AudioState.ERROR},setFinishCallback:function(C$t,C$e){C$t=C$r(C$t);C$t&&(C$t._finishCallback=C$e)},pause:function(C$t){C$t=C$r(C$t);return!!C$t&&(C$t.pause(),!0)},_pauseIDCache:[],pauseAll:function(){for(var C$t in C$c){var C$e=C$c[C$t];C$e.getState()===C$a.State.PLAYING&&(this._pauseIDCache.push(C$t),C$e.pause())}},resume:function(C$t){C$t=C$r(C$t);C$t&&C$t.resume()},resumeAll:function(){for(var C$t=0;C$t<this._pauseIDCache.length;++C$t){var C$e=this._pauseIDCache[C$t],C$e=C$r(C$e);C$e&&C$e.resume()}this._pauseIDCache.length=0},stop:function(C$t){C$t=C$r(C$t);return!!C$t&&(C$t.stop(),!0)},stopAll:function(){for(var C$t in C$c){C$t=C$c[C$t];C$t&&C$t.stop()}},setMaxAudioInstance:function(C$t){this._maxAudioInstance=C$t},getMaxAudioInstance:function(){return this._maxAudioInstance},uncache:function(C$t){var C$e=C$t;if("string"==typeof C$t)cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$e=C$t;else{if(!C$t)return;C$e=C$t.nativeUrl}var C$i=C$l[C$e];if(C$i)for(;0<C$i.length;){var C$n=C$i.pop(),C$r=C$c[C$n];C$r&&(C$r.stop(),delete C$c[C$n])}},uncacheAll:function(){var C$t,C$e;for(C$e in this.stopAll(),C$c)(C$t=C$c[C$e])&&C$t.destroy();for(;C$t=C$h.pop();)C$t.destroy();C$c=C$i.createMap(!0),C$l={}},getProfile:function(C$t){},preload:function(C$t,C$e){cc.warn("`cc.audioEngine.preload` is deprecated, use `cc.loader.loadRes(url, cc.AudioClip)` instead please."),cc.loader.load(C$t,C$e&&function(C$t){C$t||C$e()})},setMaxWebAudioSize:function(C$t){this._maxWebAudioSize=1024*C$t},_breakCache:null,_break:function(){for(var C$t in this._breakCache=[],C$c){var C$e=C$c[C$t];C$e.getState()===C$a.State.PLAYING&&(this._breakCache.push(C$t),C$e.pause())}},_restore:function(){if(this._breakCache){for(;0<this._breakCache.length;){var C$t=this._breakCache.pop(),C$t=C$r(C$t);C$t&&C$t.resume&&C$t.resume()}this._breakCache=null}},_music:{id:-1,loop:!1,volume:1},_effect:{volume:1,pauseCache:[]},playMusic:function(C$t,C$e){var C$i=this._music;return this.stop(C$i.id),C$i.id=this.play(C$t,C$e,C$i.volume),C$i.loop=C$e,C$i.id},stopMusic:function(){this.stop(this._music.id)},pauseMusic:function(){return this.pause(this._music.id),this._music.id},resumeMusic:function(){return this.resume(this._music.id),this._music.id},getMusicVolume:function(){return this._music.volume},setMusicVolume:function(C$t){C$t=C$o(C$t);var C$e=this._music;return C$e.volume=C$t,this.setVolume(C$e.id,C$e.volume),C$e.volume},isMusicPlaying:function(){return this.getState(this._music.id)===this.AudioState.PLAYING},playEffect:function(C$t,C$e){return this.play(C$t,C$e||!1,this._effect.volume)},setEffectsVolume:function(C$t){C$t=C$o(C$t);var C$e,C$i=this._music.id;for(C$e in this._effect.volume=C$t,C$c){var C$n=C$c[C$e];C$n&&C$n.id!==C$i&&C$u.setVolume(C$e,C$t)}},getEffectsVolume:function(){return this._effect.volume},pauseEffect:function(C$t){return this.pause(C$t)},pauseAllEffects:function(){var C$t,C$e=this._music.id,C$i=this._effect;for(C$t in C$i.pauseCache.length=0,C$c){var C$n=C$c[C$t];C$n&&C$n.id!==C$e&&C$n.getState()===this.AudioState.PLAYING&&(C$i.pauseCache.push(C$t),C$n.pause())}},resumeEffect:function(C$t){this.resume(C$t)},resumeAllEffects:function(){for(var C$t=this._effect.pauseCache,C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e],C$i=C$c[C$i];C$i&&C$i.resume()}},stopEffect:function(C$t){return this.stop(C$t)},stopAllEffects:function(){var C$t,C$e=this._music.id;for(C$t in C$c){var C$i=C$c[C$t];C$i&&C$i.id!==C$e&&C$i.getState()===C$u.AudioState.PLAYING&&C$i.stop()}}};C$e.exports=cc.audioEngine=C$u},{"../core/assets/CCAudioClip":35,"./CCAudio":21}],23:[function(C$t,C$e,C$i){"use strict";var C$n={name:"Jacob__Codec"};C$n.Base64=C$t("./base64"),C$n.GZip=C$t("./gzip"),C$n.unzip=function(){return C$n.GZip.gunzip.apply(C$n.GZip,arguments)},C$n.unzipBase64=function(){var C$e=C$n.Base64.decode.apply(C$n.Base64,arguments);try{return C$n.GZip.gunzip.call(C$n.GZip,C$e)}catch(C$t){return C$e.slice(7)}},C$n.unzipBase64AsArray=function(C$t,C$e){C$e=C$e||1;for(var C$i,C$n=this.unzipBase64(C$t),C$r=[],C$s=0,C$o=C$n.length/C$e;C$s<C$o;C$s++)for(C$r[C$s]=0,C$i=C$e-1;0<=C$i;--C$i)C$r[C$s]+=C$n.charCodeAt(C$s*C$e+C$i)<<8*C$i;return C$r},C$n.unzipAsArray=function(C$t,C$e){C$e=C$e||1;for(var C$i,C$n=this.unzip(C$t),C$r=[],C$s=0,C$o=C$n.length/C$e;C$s<C$o;C$s++)for(C$r[C$s]=0,C$i=C$e-1;0<=C$i;--C$i)C$r[C$s]+=C$n.charCodeAt(C$s*C$e+C$i)<<8*C$i;return C$r},cc.codec=C$e.exports=C$n},{"./base64":24,"./gzip":25}],24:[function(C$t,C$e,C$i){"use strict";var C$l=C$t("../core/utils/misc").BASE64_VALUES,C$t={name:"Jacob__Codec__Base64",decode:function(C$t){var C$e,C$i,C$n,C$r,C$s,C$o,C$a=[],C$c=0;for(C$t=C$t.replace(/[^A-Za-z0-9\+\/\=]/g,"");C$c<C$t.length;)C$n=C$l[C$t.charCodeAt(C$c++)],C$e=(15&(C$r=C$l[C$t.charCodeAt(C$c++)]))<<4|(C$s=C$l[C$t.charCodeAt(C$c++)])>>2,C$i=(3&C$s)<<6|(C$o=C$l[C$t.charCodeAt(C$c++)]),C$a.push(String.fromCharCode(C$n<<2|C$r>>4)),64!==C$s&&C$a.push(String.fromCharCode(C$e)),64!==C$o&&C$a.push(String.fromCharCode(C$i));return C$a=C$a.join("")},decodeAsArray:function(C$t,C$e){for(var C$i,C$n=this.decode(C$t),C$r=[],C$s=0,C$o=C$n.length/C$e;C$s<C$o;C$s++)for(C$r[C$s]=0,C$i=C$e-1;0<=C$i;--C$i)C$r[C$s]+=C$n.charCodeAt(C$s*C$e+C$i)<<8*C$i;return C$r}};C$e.exports=C$t},{"../core/utils/misc":264}],25:[function(C$t,C$e,C$i){"use strict";function C$p(C$t){this.data=C$t,this.debug=!1,this.gpflags=void 0,this.files=0,this.unzipped=[],this.buf32k=new Array(32768),this.bIdx=0,this.modeZIP=!1,this.bytepos=0,this.bb=1,this.bits=0,this.nameBuf=[],this.fileout=void 0,this.literalTree=new Array(C$p.LITERALS),this.distanceTree=new Array(32),this.treepos=0,this.Places=null,this.len=0,this.fpos=new Array(17),this.fpos[0]=0,this.flens=void 0,this.fmax=void 0}C$p.gunzip=function(C$t){return C$t.constructor===Array||(C$t.constructor,String),new C$p(C$t).gunzip()[0][0]},C$p.HufNode=function(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1},C$p.LITERALS=288,C$p.NAMEMAX=256,C$p.bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],C$p.cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C$p.cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],C$p.cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C$p.cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C$p.border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C$p.prototype.gunzip=function(){return this.outputArr=[],this.nextFile(),this.unzipped},C$p.prototype.readByte=function(){return this.bits+=8,this.bytepos<this.data.length?this.data.charCodeAt(this.bytepos++):-1},C$p.prototype.byteAlign=function(){this.bb=1},C$p.prototype.readBit=function(){var C$t;return this.bits++,C$t=1&this.bb,this.bb>>=1,0===this.bb&&(this.bb=this.readByte(),C$t=1&this.bb,this.bb=this.bb>>1|128),C$t},C$p.prototype.readBits=function(C$t){for(var C$e=0,C$i=C$t;C$i--;)C$e=C$e<<1|this.readBit();return C$e=C$t?C$p.bitReverse[C$e]>>8-C$t:C$e},C$p.prototype.flushBuffer=function(){this.bIdx=0},C$p.prototype.addBuffer=function(C$t){this.buf32k[this.bIdx++]=C$t,this.outputArr.push(String.fromCharCode(C$t)),32768===this.bIdx&&(this.bIdx=0)},C$p.prototype.IsPat=function(){for(;;){if(this.fpos[this.len]>=this.fmax)return-1;if(this.flens[this.fpos[this.len]]===this.len)return this.fpos[this.len]++;this.fpos[this.len]++}},C$p.prototype.Rec=function(){var C$t,C$e=this.Places[this.treepos];if(17===this.len)return-1;if(this.treepos++,this.len++,0<=(C$t=this.IsPat()))C$e.b0=C$t;else if(C$e.b0=32768,this.Rec())return-1;if(0<=(C$t=this.IsPat()))C$e.b1=C$t,C$e.jump=null;else if(C$e.b1=32768,C$e.jump=this.Places[this.treepos],C$e.jumppos=this.treepos,this.Rec())return-1;return this.len--,0},C$p.prototype.CreateTree=function(C$t,C$e,C$i,C$n){var C$r;for(this.Places=C$t,this.treepos=0,this.flens=C$i,this.fmax=C$e,C$r=0;C$r<17;C$r++)this.fpos[C$r]=0;return this.len=0,this.Rec()?-1:0},C$p.prototype.DecodeValue=function(C$t){for(var C$e,C$i,C$n=0,C$r=C$t[C$n];;)if(this.readBit()){if(!(32768&C$r.b1))return C$r.b1;for(C$r=C$r.jump,C$e=C$t.length,C$i=0;C$i<C$e;C$i++)if(C$t[C$i]===C$r){C$n=C$i;break}}else{if(!(32768&C$r.b0))return C$r.b0;C$r=C$t[++C$n]}return-1},C$p.prototype.DeflateLoop=function(){do{var C$t,C$h=this.readBit(),C$e=this.readBits(2);if(0===C$e)for(this.byteAlign(),C$t=this.readByte(),C$t|=this.readByte()<<8,C$o=this.readByte(),65535&(C$t^~(C$o|=this.readByte()<<8))&&document.write("BlockLen checksum mismatch\n");C$t--;)C$i=this.readByte(),this.addBuffer(C$i);else if(1===C$e)for(;;)if(23<(C$n=C$p.bitReverse[this.readBits(7)]>>1)?199<(C$n=C$n<<1|this.readBit())?C$n=(C$n-=128)<<1|this.readBit():143<(C$n-=48)&&(C$n+=136):C$n+=256,C$n<256)this.addBuffer(C$n);else{if(256===C$n)break;for(C$n-=257,C$c=this.readBits(C$p.cplext[C$n])+C$p.cplens[C$n],C$n=C$p.bitReverse[this.readBits(5)]>>3,8<C$p.cpdext[C$n]?(C$l=this.readBits(8),C$l|=this.readBits(C$p.cpdext[C$n]-8)<<8):C$l=this.readBits(C$p.cpdext[C$n]),C$l+=C$p.cpdist[C$n],C$n=0;C$n<C$c;C$n++){var C$i=this.buf32k[this.bIdx-C$l&32767];this.addBuffer(C$i)}}else if(2===C$e){var C$n,C$r=new Array(320),C$s=257+this.readBits(5),C$o=1+this.readBits(5),C$u=4+this.readBits(4);for(C$n=0;C$n<19;C$n++)C$r[C$n]=0;for(C$n=0;C$n<C$u;C$n++)C$r[C$p.border[C$n]]=this.readBits(3);for(C$c=this.distanceTree.length,C$a=0;C$a<C$c;C$a++)this.distanceTree[C$a]=new C$p.HufNode;if(this.CreateTree(this.distanceTree,19,C$r,0))return this.flushBuffer(),1;for(var C$_,C$d=C$s+C$o,C$a=0;C$a<C$d;)if((C$n=this.DecodeValue(this.distanceTree))<16)C$r[C$a++]=C$n;else if(16===C$n){if(C$d<C$a+(C$n=3+this.readBits(2)))return this.flushBuffer(),1;for(C$_=C$a?C$r[C$a-1]:0;C$n--;)C$r[C$a++]=C$_}else{if(C$d<C$a+(C$n=17===C$n?3+this.readBits(3):11+this.readBits(7)))return this.flushBuffer(),1;for(;C$n--;)C$r[C$a++]=0}for(C$c=this.literalTree.length,C$a=0;C$a<C$c;C$a++)this.literalTree[C$a]=new C$p.HufNode;if(this.CreateTree(this.literalTree,C$s,C$r,0))return this.flushBuffer(),1;for(C$c=this.literalTree.length,C$a=0;C$a<C$c;C$a++)this.distanceTree[C$a]=new C$p.HufNode;var C$c,C$l,C$f=new Array;for(C$a=C$s;C$a<C$r.length;C$a++)C$f[C$a-C$s]=C$r[C$a];if(this.CreateTree(this.distanceTree,C$o,C$f,0))return this.flushBuffer(),1;for(;;)if(256<=(C$n=this.DecodeValue(this.literalTree))){if(0===(C$n-=256))break;for(C$n--,C$c=this.readBits(C$p.cplext[C$n])+C$p.cplens[C$n],C$n=this.DecodeValue(this.distanceTree),8<C$p.cpdext[C$n]?(C$l=this.readBits(8),C$l|=this.readBits(C$p.cpdext[C$n]-8)<<8):C$l=this.readBits(C$p.cpdext[C$n]),C$l+=C$p.cpdist[C$n];C$c--;){C$i=this.buf32k[this.bIdx-C$l&32767];this.addBuffer(C$i)}}else this.addBuffer(C$n)}}while(!C$h);return this.flushBuffer(),this.byteAlign(),0},C$p.prototype.unzipFile=function(C$t){var C$e;for(this.gunzip(),C$e=0;C$e<this.unzipped.length;C$e++)if(this.unzipped[C$e][1]===C$t)return this.unzipped[C$e][0]},C$p.prototype.nextFile=function(){this.outputArr=[],this.modeZIP=!1;var C$t=[];if(C$t[0]=this.readByte(),C$t[1]=this.readByte(),120===C$t[0]&&218===C$t[1]&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),"geonext.gxt"],this.files++),31===C$t[0]&&139===C$t[1]&&(this.skipdir(),this.unzipped[this.files]=[this.outputArr.join(""),"file"],this.files++),80===C$t[0]&&75===C$t[1]&&(this.modeZIP=!0,C$t[2]=this.readByte(),C$t[3]=this.readByte(),3===C$t[2]&&4===C$t[3])){C$t[0]=this.readByte(),C$t[1]=this.readByte(),this.gpflags=this.readByte(),this.gpflags|=this.readByte()<<8;var C$t=this.readByte(),C$e=(C$t|=this.readByte()<<8,this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte()),C$e=((C$e|=this.readByte()<<8)|this.readByte()<<16|this.readByte()<<24,this.readByte()),C$i=((C$e|=this.readByte()<<8)|this.readByte()<<16|this.readByte()<<24,this.readByte()),C$n=(C$i|=this.readByte()<<8,this.readByte());for(C$n|=this.readByte()<<8,C$s=0,this.nameBuf=[];C$i--;){var C$r=this.readByte();"/"===C$r|":"===C$r?C$s=0:C$s<C$p.NAMEMAX-1&&(this.nameBuf[C$s++]=String.fromCharCode(C$r))}this.fileout||(this.fileout=this.nameBuf);for(var C$s=0;C$s<C$n;)C$r=this.readByte(),C$s++;8==C$t&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),this.nameBuf.join("")],this.files++),this.skipdir()}},C$p.prototype.skipdir=function(){var C$t,C$e,C$i,C$n=[];if(8&this.gpflags&&(C$n[0]=this.readByte(),C$n[1]=this.readByte(),C$n[2]=this.readByte(),C$n[3]=this.readByte(),C$t=this.readByte(),C$t|=this.readByte()<<8,this.readByte(),this.readByte(),C$t=this.readByte(),C$t=(C$t=(C$t|=this.readByte()<<8)|this.readByte()<<16)|this.readByte()<<24),this.modeZIP&&this.nextFile(),C$n[0]=this.readByte(),8!==C$n[0])return 0;if(this.gpflags=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),4&this.gpflags)for(C$n[0]=this.readByte(),C$n[2]=this.readByte(),this.len=C$n[0]+256*C$n[1],C$e=0;C$e<this.len;C$e++)this.readByte();if(8&this.gpflags)for(C$e=0,this.nameBuf=[];C$i=this.readByte();)(C$e="7"!==C$i&&":"!==C$i?C$e:0)<C$p.NAMEMAX-1&&(this.nameBuf[C$e++]=C$i);if(16&this.gpflags)for(;C$i=this.readByte(););2&this.gpflags&&(this.readByte(),this.readByte()),this.DeflateLoop(),C$t=this.readByte(),C$t=(C$t=(C$t|=this.readByte()<<8)|this.readByte()<<16)|this.readByte()<<24,this.modeZIP&&this.nextFile()},C$e.exports=C$p},{}],26:[function(C$t,C$e,C$i){"use strict";!function(){function C$Q(C$t){throw C$t}var C$$=void 0,C$tt=!0,C$o=this;function C$t(C$t,C$e){var C$i,C$n=C$t.split("."),C$r=C$o;C$n[0]in C$r||!C$r.execScript||C$r.execScript("var "+C$n[0]);for(;C$n.length&&(C$i=C$n.shift());)C$n.length||C$e===C$$?C$r=C$r[C$i]||(C$r[C$i]={}):C$r[C$i]=C$e}var C$et="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;function C$a(C$t){if("string"==typeof C$t){for(var C$e=C$t.split(""),C$i=0,C$n=C$e.length;C$i<C$n;C$i++)C$e[C$i]=(255&C$e[C$i].charCodeAt(0))>>>0;C$t=C$e}for(var C$r,C$s=1,C$o=0,C$a=C$t.length,C$c=0;0<C$a;){for(C$a-=C$r=1024<C$a?1024:C$a;C$o+=C$s+=C$t[C$c++],--C$r;);C$s%=65521,C$o%=65521}return(C$o<<16|C$s)>>>0}function C$it(C$t,C$e){this.index="number"==typeof C$e?C$e:0,this.i=0,this.buffer=C$t instanceof(C$et?Uint8Array:Array)?C$t:new(C$et?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&C$Q(Error("invalid index")),this.buffer.length<=this.index&&this.f()}C$it.prototype.f=function(){var C$t,C$e=this.buffer,C$i=C$e.length,C$n=new(C$et?Uint8Array:Array)(C$i<<1);if(C$et)C$n.set(C$e);else for(C$t=0;C$t<C$i;++C$t)C$n[C$t]=C$e[C$t];return this.buffer=C$n},C$it.prototype.d=function(C$t,C$e,C$i){var C$n,C$r=this.buffer,C$s=this.index,C$o=this.i,C$a=C$r[C$s];if(C$i&&1<C$e&&(C$t=8<C$e?(C$_[255&C$t]<<24|C$_[C$t>>>8&255]<<16|C$_[C$t>>>16&255]<<8|C$_[C$t>>>24&255])>>32-C$e:C$_[C$t]>>8-C$e),C$e+C$o<8)C$a=C$a<<C$e|C$t,C$o+=C$e;else for(C$n=0;C$n<C$e;++C$n)C$a=C$a<<1|C$t>>C$e-C$n-1&1,8==++C$o&&(C$o=0,C$r[C$s++]=C$_[C$a],C$a=0,C$s===C$r.length&&(C$r=this.f()));C$r[C$s]=C$a,this.buffer=C$r,this.i=C$o,this.index=C$s},C$it.prototype.finish=function(){var C$t=this.buffer,C$e=this.index;return 0<this.i&&(C$t[C$e]<<=8-this.i,C$t[C$e]=C$_[C$t[C$e]],C$e++),C$et?C$t.subarray(0,C$e):(C$t.length=C$e,C$t)};for(var C$n=new(C$et?Uint8Array:Array)(256),C$c=0;C$c<256;++C$c){for(var C$l=C$u=C$c,C$h=7,C$u=C$u>>>1;C$u;C$u>>>=1)C$l=C$l<<1|1&C$u,--C$h;C$n[C$c]=(C$l<<C$h&255)>>>0}var C$_=C$n;function C$S(C$t){this.buffer=new(C$et?Uint16Array:Array)(2*C$t),this.length=0}function C$v(C$t){for(var C$e,C$i,C$n,C$r,C$s,C$o,C$h,C$a,C$u=C$t.length,C$c=0,C$_=Number.POSITIVE_INFINITY,C$l=0;C$l<C$u;++C$l)C$t[C$l]>C$c&&(C$c=C$t[C$l]),C$t[C$l]<C$_&&(C$_=C$t[C$l]);for(C$e=1<<C$c,C$i=new(C$et?Uint32Array:Array)(C$e),C$n=1,C$r=0,C$s=2;C$n<=C$c;){for(C$l=0;C$l<C$u;++C$l)if(C$t[C$l]===C$n){for(C$h=C$r,C$a=C$o=0;C$a<C$n;++C$a)C$o=C$o<<1|1&C$h,C$h>>=1;for(C$a=C$o;C$a<C$e;C$a+=C$s)C$i[C$a]=C$n<<16|C$l;++C$r}++C$n,C$r<<=1,C$s<<=1}return[C$i,C$c,C$_]}function C$d(C$t,C$e){this.h=C$nt,this.w=0,this.input=C$t,this.b=0,C$e&&(C$e.lazy&&(this.w=C$e.lazy),"number"==typeof C$e.compressionType&&(this.h=C$e.compressionType),C$e.outputBuffer&&(this.a=C$et&&C$e.outputBuffer instanceof Array?new Uint8Array(C$e.outputBuffer):C$e.outputBuffer),"number"==typeof C$e.outputIndex&&(this.b=C$e.outputIndex)),this.a||(this.a=new(C$et?Uint8Array:Array)(32768))}C$et&&new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),C$S.prototype.getParent=function(C$t){return 2*((C$t-2)/4|0)},C$S.prototype.push=function(C$t,C$e){var C$i,C$n,C$r=this.buffer,C$s=this.length;for(C$r[this.length++]=C$e,C$r[this.length++]=C$t;0<C$s&&(C$i=this.getParent(C$s),C$r[C$s]>C$r[C$i]);)C$n=C$r[C$s],C$r[C$s]=C$r[C$i],C$r[C$i]=C$n,C$n=C$r[C$s+1],C$r[C$s+1]=C$r[C$i+1],C$r[C$i+1]=C$n,C$s=C$i;return this.length},C$S.prototype.pop=function(){var C$t,C$e,C$i,C$n=this.buffer,C$r=C$n[0],C$s=C$n[1];for(this.length-=2,C$n[0]=C$n[this.length],C$n[1]=C$n[this.length+1],C$i=0;!((C$e=2*C$i+2)>=this.length)&&(C$e+2<this.length&&C$n[C$e+2]>C$n[C$e]&&(C$e+=2),C$n[C$e]>C$n[C$i]);)C$t=C$n[C$i],C$n[C$i]=C$n[C$e],C$n[C$e]=C$t,C$t=C$n[C$i+1],C$n[C$i+1]=C$n[C$e+1],C$n[C$e+1]=C$t,C$i=C$e;return{index:C$s,value:C$r,length:this.length}};for(var C$nt=2,C$f={NONE:0,r:1,j:C$nt,N:3},C$rt=[],C$e=0;C$e<288;C$e++)switch(C$tt){case C$e<=143:C$rt.push([C$e+48,8]);break;case C$e<=255:C$rt.push([C$e-144+400,9]);break;case C$e<=279:C$rt.push([C$e-256,7]);break;case C$e<=287:C$rt.push([C$e-280+192,8]);break;default:C$Q("invalid literal: "+C$e)}function C$E(C$t,C$e){this.length=C$t,this.G=C$e}C$d.prototype.n=function(){var C$h,C$u,C$_,C$d=this.input;switch(this.h){case 0:for(C$u=0,C$_=C$d.length;C$u<C$_;){var C$f,C$p,C$m=C$y=C$et?C$d.subarray(C$u,C$u+65535):C$d.slice(C$u,C$u+65535),C$y=(C$u+=C$y.length)===C$_,C$g=C$$,C$t=this.a,C$e=this.b;if(C$et){for(C$t=new Uint8Array(this.a.buffer);C$t.length<=C$e+C$m.length+5;)C$t=new Uint8Array(C$t.length<<1);C$t.set(this.a)}if(C$t[C$e++]=0|(C$y?1:0),C$f=65536+~(C$y=C$m.length)&65535,C$t[C$e++]=255&C$y,C$t[C$e++]=C$y>>>8&255,C$t[C$e++]=255&C$f,C$t[C$e++]=C$f>>>8&255,C$et)C$t.set(C$m,C$e),C$e+=C$m.length,C$t=C$t.subarray(0,C$e);else{for(C$g=0,C$p=C$m.length;C$g<C$p;++C$g)C$t[C$e++]=C$m[C$g];C$t.length=C$e}this.b=C$e,this.a=C$t}break;case 1:for(var C$v,C$x=new C$it(new Uint8Array(this.a.buffer),this.b),C$b=(C$x.d(1,1,C$tt),C$x.d(1,2,C$tt),C$st(this,C$d)),C$A=0,C$C=C$b.length;C$A<C$C;C$A++)if(C$v=C$b[C$A],C$it.prototype.d.apply(C$x,C$rt[C$v]),256<C$v)C$x.d(C$b[++C$A],C$b[++C$A],C$tt),C$x.d(C$b[++C$A],5),C$x.d(C$b[++C$A],C$b[++C$A],C$tt);else if(256===C$v)break;this.a=C$x.finish(),this.b=this.a.length;break;case C$nt:var C$S,C$T,C$w,C$E,C$M,C$I,C$B,C$R,C$P,C$D,C$i,C$L,C$n=new C$it(new Uint8Array(this.a),this.b),C$V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C$O=Array(19),C$F=C$nt;for(C$n.d(1,1,C$tt),C$n.d(C$F,2,C$tt),C$S=C$st(this,C$d),C$F=C$at(C$M=C$ot(this.L,15)),C$j=C$at(C$I=C$ot(this.K,7)),C$T=286;257<C$T&&0===C$M[C$T-1];C$T--);for(C$w=30;1<C$w&&0===C$I[C$w-1];C$w--);for(var C$N,C$r,C$k,C$s,C$o,C$G=C$T,C$z=C$w,C$a=new(C$et?Uint32Array:Array)(C$G+C$z),C$c=new(C$et?Uint32Array:Array)(316),C$U=new(C$et?Uint8Array:Array)(19),C$l=C$N=0;C$l<C$G;C$l++)C$a[C$N++]=C$M[C$l];for(C$l=0;C$l<C$z;C$l++)C$a[C$N++]=C$I[C$l];if(!C$et)for(C$l=0,C$k=C$U.length;C$l<C$k;++C$l)C$U[C$l]=0;for(C$l=C$s=0,C$k=C$a.length;C$l<C$k;C$l+=C$N){for(C$N=1;C$l+C$N<C$k&&C$a[C$l+C$N]===C$a[C$l];++C$N);if(C$r=C$N,0===C$a[C$l])if(C$r<3)for(;0<C$r--;)C$U[C$c[C$s++]=0]++;else for(;0<C$r;)(C$o=C$r-3<(C$o=C$r<138?C$r:138)&&C$o<C$r?C$r-3:C$o)<=10?(C$c[C$s++]=17,C$c[C$s++]=C$o-3,C$U[17]++):(C$c[C$s++]=18,C$c[C$s++]=C$o-11,C$U[18]++),C$r-=C$o;else if(C$c[C$s++]=C$a[C$l],C$U[C$a[C$l]]++,--C$r<3)for(;0<C$r--;)C$c[C$s++]=C$a[C$l],C$U[C$a[C$l]]++;else for(;0<C$r;)C$r-3<(C$o=C$r<6?C$r:6)&&C$o<C$r&&(C$o=C$r-3),C$c[C$s++]=16,C$c[C$s++]=C$o-3,C$U[16]++,C$r-=C$o}for(C$h=C$et?C$c.subarray(0,C$s):C$c.slice(0,C$s),C$B=C$ot(C$U,7),C$i=0;C$i<19;C$i++)C$O[C$i]=C$B[C$V[C$i]];for(C$E=19;4<C$E&&0===C$O[C$E-1];C$E--);for(C$R=C$at(C$B),C$n.d(C$T-257,5,C$tt),C$n.d(C$w-1,5,C$tt),C$n.d(C$E-4,4,C$tt),C$i=0;C$i<C$E;C$i++)C$n.d(C$O[C$i],3,C$tt);for(C$i=0,C$L=C$h.length;C$i<C$L;C$i++)if(C$P=C$h[C$i],C$n.d(C$R[C$P],C$B[C$P],C$tt),16<=C$P){switch(C$i++,C$P){case 16:C$D=2;break;case 17:C$D=3;break;case 18:C$D=7;break;default:C$Q("invalid code: "+C$P)}C$n.d(C$h[C$i],C$D,C$tt)}for(var C$W,C$H,C$F=[C$F,C$M],C$j=[C$j,C$I],C$X=C$F[0],C$Y=C$F[1],C$q=C$j[0],C$J=C$j[1],C$Z=0,C$K=C$S.length;C$Z<C$K;++C$Z)if(C$W=C$S[C$Z],C$n.d(C$X[C$W],C$Y[C$W],C$tt),256<C$W)C$n.d(C$S[++C$Z],C$S[++C$Z],C$tt),C$H=C$S[++C$Z],C$n.d(C$q[C$H],C$J[C$H],C$tt),C$n.d(C$S[++C$Z],C$S[++C$Z],C$tt);else if(256===C$W)break;this.a=C$n.finish(),this.b=this.a.length;break;default:C$Q("invalid compression type")}return this.a};for(var C$p,C$m=[],C$y=3;C$y<=258;C$y++)C$p=function(){var C$t=C$y;switch(C$tt){case 3===C$t:return[257,C$t-3,0];case 4===C$t:return[258,C$t-4,0];case 5===C$t:return[259,C$t-5,0];case 6===C$t:return[260,C$t-6,0];case 7===C$t:return[261,C$t-7,0];case 8===C$t:return[262,C$t-8,0];case 9===C$t:return[263,C$t-9,0];case 10===C$t:return[264,C$t-10,0];case C$t<=12:return[265,C$t-11,1];case C$t<=14:return[266,C$t-13,1];case C$t<=16:return[267,C$t-15,1];case C$t<=18:return[268,C$t-17,1];case C$t<=22:return[269,C$t-19,2];case C$t<=26:return[270,C$t-23,2];case C$t<=30:return[271,C$t-27,2];case C$t<=34:return[272,C$t-31,2];case C$t<=42:return[273,C$t-35,3];case C$t<=50:return[274,C$t-43,3];case C$t<=58:return[275,C$t-51,3];case C$t<=66:return[276,C$t-59,3];case C$t<=82:return[277,C$t-67,4];case C$t<=98:return[278,C$t-83,4];case C$t<=114:return[279,C$t-99,4];case C$t<=130:return[280,C$t-115,4];case C$t<=162:return[281,C$t-131,5];case C$t<=194:return[282,C$t-163,5];case C$t<=226:return[283,C$t-195,5];case C$t<=257:return[284,C$t-227,5];case 258===C$t:return[285,C$t-258,0];default:C$Q("invalid length: "+C$t)}}(),C$m[C$y]=C$p[2]<<24|C$p[1]<<16|C$p[0];var C$M=C$et?new Uint32Array(C$m):C$m;function C$st(C$a,C$t){function C$c(C$t,C$e){var C$i,C$n,C$r,C$s=C$t.G,C$o=[],C$a=0,C$c=C$M[C$t.length];switch(C$o[C$a++]=65535&C$c,C$o[C$a++]=C$c>>16&255,C$o[C$a++]=C$c>>24,C$tt){case 1===C$s:C$i=[0,C$s-1,0];break;case 2===C$s:C$i=[1,C$s-2,0];break;case 3===C$s:C$i=[2,C$s-3,0];break;case 4===C$s:C$i=[3,C$s-4,0];break;case C$s<=6:C$i=[4,C$s-5,1];break;case C$s<=8:C$i=[5,C$s-7,1];break;case C$s<=12:C$i=[6,C$s-9,2];break;case C$s<=16:C$i=[7,C$s-13,2];break;case C$s<=24:C$i=[8,C$s-17,3];break;case C$s<=32:C$i=[9,C$s-25,3];break;case C$s<=48:C$i=[10,C$s-33,4];break;case C$s<=64:C$i=[11,C$s-49,4];break;case C$s<=96:C$i=[12,C$s-65,5];break;case C$s<=128:C$i=[13,C$s-97,5];break;case C$s<=192:C$i=[14,C$s-129,6];break;case C$s<=256:C$i=[15,C$s-193,6];break;case C$s<=384:C$i=[16,C$s-257,7];break;case C$s<=512:C$i=[17,C$s-385,7];break;case C$s<=768:C$i=[18,C$s-513,8];break;case C$s<=1024:C$i=[19,C$s-769,8];break;case C$s<=1536:C$i=[20,C$s-1025,9];break;case C$s<=2048:C$i=[21,C$s-1537,9];break;case C$s<=3072:C$i=[22,C$s-2049,10];break;case C$s<=4096:C$i=[23,C$s-3073,10];break;case C$s<=6144:C$i=[24,C$s-4097,11];break;case C$s<=8192:C$i=[25,C$s-6145,11];break;case C$s<=12288:C$i=[26,C$s-8193,12];break;case C$s<=16384:C$i=[27,C$s-12289,12];break;case C$s<=24576:C$i=[28,C$s-16385,13];break;case C$s<=32768:C$i=[29,C$s-24577,13];break;default:C$Q("invalid distance")}for(C$c=C$i,C$o[C$a++]=C$c[0],C$o[+C$a]=C$c[1],C$o[5]=C$c[2],C$n=0,C$r=C$o.length;C$n<C$r;++C$n)C$h[C$m++]=C$o[C$n];C$u[C$o[0]]++,C$g[C$o[3]]++,C$y=C$t.length+C$e-1,C$l=null}var C$e,C$_,C$i,C$d,C$n,C$r,C$f,C$l,C$s,C$p={},C$h=C$et?new Uint16Array(2*C$t.length):[],C$m=0,C$y=0,C$u=new(C$et?Uint32Array:Array)(286),C$g=new(C$et?Uint32Array:Array)(30),C$v=C$a.w;if(!C$et){for(C$i=0;C$i<=285;)C$u[C$i++]=0;for(C$i=0;C$i<=29;)C$g[C$i++]=0}for(C$u[256]=1,C$e=0,C$_=C$t.length;C$e<C$_;++C$e){for(C$i=C$n=0,C$d=3;C$i<C$d&&C$e+C$i!==C$_;++C$i)C$n=C$n<<8|C$t[C$e+C$i];if(C$p[C$n]===C$$&&(C$p[C$n]=[]),C$r=C$p[C$n],!(0<C$y--)){for(;0<C$r.length&&32768<C$e-C$r[0];)C$r.shift();if(C$_<=C$e+3){for(C$l&&C$c(C$l,-1),C$i=0,C$d=C$_-C$e;C$i<C$d;++C$i)C$s=C$t[C$e+C$i],C$h[C$m++]=C$s,++C$u[C$s];break}if(0<C$r.length){var C$x,C$b=C$$,C$A=0,C$o=C$$,C$C=C$$,C$S=C$$,C$T=C$t.length,C$C=0,C$w=C$r.length;C$t:for(;C$C<C$w;C$C++){if(C$x=C$r[C$w-C$C-1],(C$o=3)<C$A){for(C$S=C$A;3<C$S;C$S--)if(C$t[C$x+C$S-1]!==C$t[C$e+C$S-1])continue C$t;C$o=C$A}for(;C$o<258&&C$e+C$o<C$T&&C$t[C$x+C$o]===C$t[C$e+C$o];)++C$o;if(C$A<C$o&&(C$b=C$x,C$A=C$o),258===C$o)break}C$f=new C$E(C$A,C$e-C$b),C$l?C$l.length<C$f.length?(C$s=C$t[C$e-1],C$h[C$m++]=C$s,++C$u[C$s],C$c(C$f,0)):C$c(C$l,-1):C$f.length<C$v?C$l=C$f:C$c(C$f,0)}else C$l?C$c(C$l,-1):(C$s=C$t[C$e],C$h[C$m++]=C$s,++C$u[C$s])}C$r.push(C$e)}return C$h[C$m++]=256,C$u[256]++,C$a.L=C$u,C$a.K=C$g,C$et?C$h.subarray(0,C$m):C$h}function C$ot(C$h,C$t){var C$e,C$u,C$_,C$i,C$d,C$f=C$h.length,C$p=new C$S(572),C$m=new(C$et?Uint8Array:Array)(C$f);if(!C$et)for(C$i=0;C$i<C$f;C$i++)C$m[C$i]=0;for(C$i=0;C$i<C$f;++C$i)0<C$h[C$i]&&C$p.push(C$i,C$h[C$i]);if(C$e=Array(C$p.length/2),C$u=new(C$et?Uint32Array:Array)(C$p.length/2),1===C$e.length)return C$m[C$p.pop().index]=1,C$m;for(C$i=0,C$d=C$p.length/2;C$i<C$d;++C$i)C$e[C$i]=C$p.pop(),C$u[C$i]=C$e[C$i].value;var C$n,C$r,C$s,C$y,C$g,C$o=C$u.length,C$a=new(C$et?Uint16Array:Array)(C$t),C$c=new(C$et?Uint8Array:Array)(C$t),C$v=new(C$et?Uint8Array:Array)(C$o),C$l=Array(C$t),C$x=Array(C$t),C$b=Array(C$t),C$A=(1<<C$t)-C$o,C$C=1<<C$t-1;for(C$a[C$t-1]=C$o,C$r=0;C$r<C$t;++C$r)C$A<C$C?C$c[C$r]=0:(C$c[C$r]=1,C$A-=C$C),C$A<<=1,C$a[C$t-2-C$r]=(C$a[C$t-1-C$r]/2|0)+C$o;for(C$a[0]=C$c[0],C$l[0]=Array(C$a[0]),C$x[0]=Array(C$a[0]),C$r=1;C$r<C$t;++C$r)C$a[C$r]>2*C$a[C$r-1]+C$c[C$r]&&(C$a[C$r]=2*C$a[C$r-1]+C$c[C$r]),C$l[C$r]=Array(C$a[C$r]),C$x[C$r]=Array(C$a[C$r]);for(C$n=0;C$n<C$o;++C$n)C$v[C$n]=C$t;for(C$s=0;C$s<C$a[C$t-1];++C$s)C$l[C$t-1][C$s]=C$u[C$s],C$x[C$t-1][C$s]=C$s;for(C$n=0;C$n<C$t;++C$n)C$b[C$n]=0;for(1===C$c[C$t-1]&&(--C$v[0],++C$b[C$t-1]),C$r=C$t-2;0<=C$r;--C$r){for(C$n=0,C$g=C$b[C$r+1],C$s=0;C$s<C$a[C$r];C$s++)(C$y=C$l[C$r+1][C$g]+C$l[C$r+1][C$g+1])>C$u[C$n]?(C$l[C$r][C$s]=C$y,C$x[C$r][C$s]=C$o,C$g+=2):(C$l[C$r][C$s]=C$u[C$n],C$x[C$r][C$s]=C$n,++C$n);C$b[C$r]=0,1===C$c[C$r]&&function C$t(C$e){var C$i=C$x[C$e][C$b[C$e]];C$i===C$o?(C$t(C$e+1),C$t(C$e+1)):--C$v[C$i],++C$b[C$e]}(C$r)}for(C$_=C$v,C$i=0,C$d=C$e.length;C$i<C$d;++C$i)C$m[C$e[C$i].index]=C$_[C$i];return C$m}function C$at(C$t){for(var C$e,C$i,C$n=new(C$et?Uint16Array:Array)(C$t.length),C$r=[],C$s=[],C$o=0,C$a=0,C$c=C$t.length;C$a<C$c;C$a++)C$r[C$t[C$a]]=1+(0|C$r[C$t[C$a]]);for(C$a=1,C$c=16;C$a<=C$c;C$a++)C$s[C$a]=C$o,1<<C$a<(C$o+=0|C$r[C$a])&&C$Q("overcommitted"),C$o<<=1;for(C$o<65536&&C$Q("undercommitted"),C$a=0,C$c=C$t.length;C$a<C$c;C$a++)for(C$o=C$s[C$t[C$a]],C$s[C$t[C$a]]+=1,C$e=C$n[C$a]=0,C$i=C$t[C$a];C$e<C$i;C$e++)C$n[C$a]=C$n[C$a]<<1|1&C$o,C$o>>>=1;return C$n}function C$x(C$t,C$e){this.input=C$t,this.a=new(C$et?Uint8Array:Array)(32768),this.h=C$s.j;var C$i,C$n={};for(C$i in(C$e?"number"!=typeof C$e.compressionType:C$e={})||(this.h=C$e.compressionType),C$e)C$n[C$i]=C$e[C$i];C$n.outputBuffer=this.a,this.z=new C$d(this.input,C$n)}var C$s=C$f;function C$r(C$t,C$e){switch(this.k=[],this.l=32768,this.e=this.g=this.c=this.q=0,this.input=C$et?new Uint8Array(C$t):C$t,this.s=!1,this.m=C$A,this.B=!1,C$e?(C$e.index&&(this.c=C$e.index),C$e.bufferSize&&(this.l=C$e.bufferSize),C$e.bufferType&&(this.m=C$e.bufferType),C$e.resize&&(this.B=C$e.resize)):C$e={},this.m){case C$b:this.b=32768,this.a=new(C$et?Uint8Array:Array)(32768+this.l+258);break;case C$A:this.b=0,this.a=new(C$et?Uint8Array:Array)(this.l),this.f=this.J,this.t=this.H,this.o=this.I;break;default:C$Q(Error("invalid inflate mode"))}}C$x.prototype.n=function(){var C$t,C$e,C$i=0,C$n=this.a,C$r=C$Y;if(C$r===C$Y?C$e=Math.LOG2E*Math.log(32768)-8:C$Q(Error("invalid compression method")),C$n[C$i++]=C$e=C$e<<4|C$r,C$r===C$Y)switch(this.h){case C$s.NONE:C$t=0;break;case C$s.r:C$t=1;break;case C$s.j:C$t=2;break;default:C$Q(Error("unsupported compression type"))}else C$Q(Error("invalid compression method"));return C$n[C$i++]=(C$r=C$t<<6|0)|31-(256*C$e+C$r)%31,C$e=C$a(this.input),this.z.b=C$i,C$i=(C$n=this.z.n()).length,C$et&&((C$n=new Uint8Array(C$n.buffer)).length<=C$i+4&&(this.a=new Uint8Array(C$n.length+4),this.a.set(C$n),C$n=this.a),C$n=C$n.subarray(0,C$i+4)),C$n[C$i++]=C$e>>24&255,C$n[C$i++]=C$e>>16&255,C$n[C$i++]=C$e>>8&255,C$n[C$i++]=255&C$e,C$n},C$t("Zlib.Deflate",C$x),C$t("Zlib.Deflate.compress",function(C$t,C$e){return new C$x(C$t,C$e).n()}),C$t("Zlib.Deflate.CompressionType",C$s),C$t("Zlib.Deflate.CompressionType.NONE",C$s.NONE),C$t("Zlib.Deflate.CompressionType.FIXED",C$s.r),C$t("Zlib.Deflate.CompressionType.DYNAMIC",C$s.j);for(var C$b=0,C$A=1,C$f={D:C$b,C:C$A},C$i=(C$r.prototype.p=function(){for(;!this.s;){var C$h=C$g(this,3);switch(1&C$h&&(this.s=C$tt),C$h>>>=1){case 0:var C$t=this.input,C$e=this.c,C$i=this.a,C$n=this.b,C$r=C$$,C$u=C$i.length,C$s=C$$;switch(this.e=this.g=0,(C$c=C$t[C$e++])===C$$&&C$Q(Error("invalid uncompressed block header: LEN (first byte)")),C$r=C$c,(C$c=C$t[C$e++])===C$$&&C$Q(Error("invalid uncompressed block header: LEN (second byte)")),C$r|=C$c<<8,(C$c=C$t[C$e++])===C$$&&C$Q(Error("invalid uncompressed block header: NLEN (first byte)")),C$l=C$c,(C$c=C$t[C$e++])===C$$&&C$Q(Error("invalid uncompressed block header: NLEN (second byte)")),C$r===~(C$l|=C$c<<8)&&C$Q(Error("invalid uncompressed block header: length verify")),C$e+C$r>C$t.length&&C$Q(Error("input buffer is broken")),this.m){case C$b:for(;C$n+C$r>C$i.length;){if(C$r-=C$s=C$u-C$n,C$et)C$i.set(C$t.subarray(C$e,C$e+C$s),C$n),C$n+=C$s,C$e+=C$s;else for(;C$s--;)C$i[C$n++]=C$t[C$e++];this.b=C$n,C$i=this.f(),C$n=this.b}break;case C$A:for(;C$n+C$r>C$i.length;)C$i=this.f({v:2});break;default:C$Q(Error("invalid inflate mode"))}if(C$et)C$i.set(C$t.subarray(C$e,C$e+C$r),C$n),C$n+=C$r,C$e+=C$r;else for(;C$r--;)C$i[C$n++]=C$t[C$e++];this.c=C$e,this.b=C$n,this.a=C$i;break;case 1:this.o(C$L,C$N);break;case 2:C$o=C$f=C$d=C$_=C$y=C$m=C$l=C$c=C$a=void 0;var C$_,C$d,C$f,C$o,C$a=this,C$p=function(C$t,C$e,C$i){for(var C$n,C$r,C$s,C$o=0;C$o<C$t;)switch(C$n=C$k(this,C$e),C$n){case 16:for(C$s=3+C$g(this,2);C$s--;)C$i[C$o++]=C$r;break;case 17:for(C$s=3+C$g(this,3);C$s--;)C$i[C$o++]=0;C$r=0;break;case 18:for(C$s=11+C$g(this,7);C$s--;)C$i[C$o++]=0;C$r=0;break;default:C$r=C$i[C$o++]=C$n}return C$i},C$c=C$g(C$a,5)+257,C$l=C$g(C$a,5)+1,C$m=C$g(C$a,4)+4,C$y=new(C$et?Uint8Array:Array)(C$C.length);for(C$o=0;C$o<C$m;++C$o)C$y[C$C[C$o]]=C$g(C$a,3);C$_=C$v(C$y),C$d=new(C$et?Uint8Array:Array)(C$c),C$f=new(C$et?Uint8Array:Array)(C$l),C$a.o(C$v(C$p.call(C$a,C$c,C$_,C$d)),C$v(C$p.call(C$a,C$l,C$_,C$f)));break;default:C$Q(Error("unknown BTYPE: "+C$h))}}return this.t()},[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C$C=C$et?new Uint16Array(C$i):C$i,C$i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],C$T=C$et?new Uint16Array(C$i):C$i,C$i=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],C$w=C$et?new Uint8Array(C$i):C$i,C$i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C$I=C$et?new Uint16Array(C$i):C$i,C$i=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C$B=C$et?new Uint8Array(C$i):C$i,C$R=new(C$et?Uint8Array:Array)(288),C$P=0,C$D=C$R.length;C$P<C$D;++C$P)C$R[C$P]=C$P<=143?8:C$P<=255?9:C$P<=279?7:8;for(var C$L=C$v(C$R),C$V=new(C$et?Uint8Array:Array)(30),C$O=0,C$F=C$V.length;C$O<C$F;++C$O)C$V[C$O]=5;var C$N=C$v(C$V);function C$g(C$t,C$e){for(var C$i,C$n=C$t.g,C$r=C$t.e,C$s=C$t.input,C$o=C$t.c;C$r<C$e;)(C$i=C$s[C$o++])===C$$&&C$Q(Error("input buffer is broken")),C$n|=C$i<<C$r,C$r+=8;return C$i=C$n&(1<<C$e)-1,C$t.g=C$n>>>C$e,C$t.e=C$r-C$e,C$t.c=C$o,C$i}function C$k(C$t,C$e){for(var C$i,C$n=C$t.g,C$r=C$t.e,C$s=C$t.input,C$o=C$t.c,C$a=C$e[0],C$c=C$e[1];C$r<C$c;)(C$i=C$s[C$o++])===C$$&&C$Q(Error("input buffer is broken")),C$n|=C$i<<C$r,C$r+=8;return C$e=C$a[C$n&(1<<C$c)-1],C$t.g=C$n>>(C$a=C$e>>>16),C$t.e=C$r-C$a,C$t.c=C$o,65535&C$e}function C$G(C$t,C$e){var C$i,C$n;this.input=C$t,this.c=0,C$e?(C$e.index&&(this.c=C$e.index),C$e.verify&&(this.M=C$e.verify)):C$e={},C$i=C$t[this.c++],C$n=C$t[this.c++],(15&C$i)===C$Y?this.method=C$Y:C$Q(Error("unsupported compression method")),0!=((C$i<<8)+C$n)%31&&C$Q(Error("invalid fcheck flag:"+((C$i<<8)+C$n)%31)),32&C$n&&C$Q(Error("fdict flag is not supported")),this.A=new C$r(C$t,{index:this.c,bufferSize:C$e.bufferSize,bufferType:C$e.bufferType,resize:C$e.resize})}C$r.prototype.o=function(C$t,C$e){var C$i=this.a,C$n=this.b;this.u=C$t;for(var C$r,C$s,C$o,C$a,C$c=C$i.length-258;256!==(C$r=C$k(this,C$t));)if(C$r<256)C$c<=C$n&&(this.b=C$n,C$i=this.f(),C$n=this.b),C$i[C$n++]=C$r;else for(C$a=C$T[C$s=C$r-257],0<C$w[C$s]&&(C$a+=C$g(this,C$w[C$s])),C$r=C$k(this,C$e),C$o=C$I[C$r],0<C$B[C$r]&&(C$o+=C$g(this,C$B[C$r])),C$c<=C$n&&(this.b=C$n,C$i=this.f(),C$n=this.b);C$a--;)C$i[C$n]=C$i[C$n++-C$o];for(;8<=this.e;)this.e-=8,this.c--;this.b=C$n},C$r.prototype.I=function(C$t,C$e){var C$i=this.a,C$n=this.b;this.u=C$t;for(var C$r,C$s,C$o,C$a,C$c=C$i.length;256!==(C$r=C$k(this,C$t));)if(C$r<256)C$c<=C$n&&(C$c=(C$i=this.f()).length),C$i[C$n++]=C$r;else for(C$a=C$T[C$s=C$r-257],0<C$w[C$s]&&(C$a+=C$g(this,C$w[C$s])),C$r=C$k(this,C$e),C$o=C$I[C$r],0<C$B[C$r]&&(C$o+=C$g(this,C$B[C$r])),C$c<C$n+C$a&&(C$c=(C$i=this.f()).length);C$a--;)C$i[C$n]=C$i[C$n++-C$o];for(;8<=this.e;)this.e-=8,this.c--;this.b=C$n},C$r.prototype.f=function(){var C$t,C$e,C$i=new(C$et?Uint8Array:Array)(this.b-32768),C$n=this.b-32768,C$r=this.a;if(C$et)C$i.set(C$r.subarray(32768,C$i.length));else for(C$t=0,C$e=C$i.length;C$t<C$e;++C$t)C$i[C$t]=C$r[C$t+32768];if(this.k.push(C$i),this.q+=C$i.length,C$et)C$r.set(C$r.subarray(C$n,32768+C$n));else for(C$t=0;C$t<32768;++C$t)C$r[C$t]=C$r[C$n+C$t];return this.b=32768,C$r},C$r.prototype.J=function(C$t){var C$e,C$i=this.input.length/this.c+1|0,C$n=this.input,C$r=this.a;return C$t&&("number"==typeof C$t.v&&(C$i=C$t.v),"number"==typeof C$t.F&&(C$i+=C$t.F)),C$n=C$i<2?(C$t=(C$n.length-this.c)/this.u[2]/2*258|0)<C$r.length?C$r.length+C$t:C$r.length<<1:C$r.length*C$i,C$et?(C$e=new Uint8Array(C$n)).set(C$r):C$e=C$r,this.a=C$e},C$r.prototype.t=function(){var C$t,C$e,C$i,C$n,C$r,C$s=0,C$o=this.a,C$a=this.k,C$c=new(C$et?Uint8Array:Array)(this.q+(this.b-32768));if(0===C$a.length)return C$et?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(C$e=0,C$i=C$a.length;C$e<C$i;++C$e)for(C$n=0,C$r=(C$t=C$a[C$e]).length;C$n<C$r;++C$n)C$c[C$s++]=C$t[C$n];for(C$e=32768,C$i=this.b;C$e<C$i;++C$e)C$c[C$s++]=C$o[C$e];return this.k=[],this.buffer=C$c},C$r.prototype.H=function(){var C$t,C$e=this.b;return C$et?this.B?(C$t=new Uint8Array(C$e)).set(this.a.subarray(0,C$e)):C$t=this.a.subarray(0,C$e):(this.a.length>C$e&&(this.a.length=C$e),C$t=this.a),this.buffer=C$t},C$G.prototype.p=function(){var C$t=this.input,C$e=this.A.p();return this.c=this.A.c,this.M&&((C$t[this.c++]<<24|C$t[this.c++]<<16|C$t[this.c++]<<8|C$t[this.c++])>>>0!==C$a(C$e)&&C$Q(Error("invalid adler-32 checksum"))),C$e},C$t("Zlib.Inflate",C$G),C$t("Zlib.Inflate.BufferType",C$f),C$f.ADAPTIVE=C$f.C,C$f.BLOCK=C$f.D,C$t("Zlib.Inflate.prototype.decompress",C$G.prototype.p);C$et&&new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C$et&&new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),C$et&&new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),C$et&&new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);C$et&&new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);for(var C$z=new(C$et?Uint8Array:Array)(288),C$U=0,C$W=C$z.length;C$U<C$W;++C$U)C$z[C$U]=C$U<=143?8:C$U<=255?9:C$U<=279?7:8;C$v(C$z);for(var C$H=new(C$et?Uint8Array:Array)(30),C$j=0,C$X=C$H.length;C$j<C$X;++C$j)C$H[C$j]=5;C$v(C$H);var C$Y=8}.call(window);var C$n=window.Zlib;C$n.Deflate=C$n.Deflate,C$n.Deflate.compress=C$n.Deflate.compress,C$n.Inflate=C$n.Inflate,C$n.Inflate.BufferType=C$n.Inflate.BufferType,C$n.Inflate.prototype.decompress=C$n.Inflate.prototype.decompress,C$e.exports=C$n},{}],27:[function(C$t,C$e,C$h){"use strict";var C$n,C$i=C$t("./platform/utils"),C$r=C$t("../../DebugInfos")||{};cc.log=cc.warn=cc.error=cc.assert=console.log.bind?console.log.bind(console):console.log;function C$s(){return function(){var C$t=C$r[arguments[0]]||"unknown id";if(1===arguments.length)return C$t;if(2===arguments.length)return cc.js.formatStr(C$t,arguments[1]);var C$e=cc.js.shiftArguments.apply(null,arguments);return cc.js.formatStr.apply(null,[C$t].concat(C$e))}}cc._throw=function(C$t){C$i.callInNextTick(function(){throw C$t})};var C$o=C$s(),C$a=(cc.logID=function(){cc.log(C$o.apply(null,arguments))},C$s()),C$c=(cc.warnID=function(){cc.warn(C$a.apply(null,arguments))},C$s()),C$u=(cc.errorID=function(){cc.error(C$c.apply(null,arguments))},C$s()),C$l=(cc.assertID=function(C$t){C$t||cc.assert(!1,C$u.apply(null,cc.js.shiftArguments.apply(null,arguments)))},cc.Enum({NONE:0,INFO:1,WARN:2,ERROR:3,INFO_FOR_WEB_PAGE:4,WARN_FOR_WEB_PAGE:5,ERROR_FOR_WEB_PAGE:6}));C$e.exports=cc.debug={DebugMode:C$l,_resetDebugSetting:function(C$t){var C$i;cc.log=cc.warn=cc.error=cc.assert=function(){},C$t!==C$l.NONE&&(C$t>C$l.ERROR?(C$i=function(C$t){var C$e,C$i;cc.game.canvas&&(C$n||((C$e=document.createElement("Div")).setAttribute("id","logInfoDiv"),C$e.setAttribute("width","200"),C$e.setAttribute("height",cc.game.canvas.height),(C$i=C$e.style).zIndex="99999",C$i.position="absolute",C$i.top=C$i.left="0",(C$n=document.createElement("textarea")).setAttribute("rows","20"),C$n.setAttribute("cols","30"),C$n.setAttribute("disabled","true"),(C$i=C$n.style).backgroundColor="transparent",C$i.borderBottom="1px solid #cccccc",C$i.borderTopWidth=C$i.borderLeftWidth=C$i.borderRightWidth="0px",C$i.borderTopStyle=C$i.borderLeftStyle=C$i.borderRightStyle="none",C$i.padding="0px",C$i.margin=0,C$e.appendChild(C$n),cc.game.canvas.parentNode.appendChild(C$e)),C$n.value=C$n.value+C$t+"\r\n",C$n.scrollTop=C$n.scrollHeight)},cc.error=function(){C$i("ERROR :  "+cc.js.formatStr.apply(null,arguments))},cc.assert=function(C$t,C$e){!C$t&&C$e&&(C$e=cc.js.formatStr.apply(null,cc.js.shiftArguments.apply(null,arguments)),C$i("ASSERT: "+C$e))},C$t!==C$l.ERROR_FOR_WEB_PAGE&&(cc.warn=function(){C$i("WARN :  "+cc.js.formatStr.apply(null,arguments))}),C$t===C$l.INFO_FOR_WEB_PAGE&&(cc.log=function(){C$i(cc.js.formatStr.apply(null,arguments))})):console&&console.log.apply&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),console.error.bind?cc.error=console.error.bind(console):cc.error=function(){return console.error.apply(console,arguments)},cc.assert=function(C$t,C$e){if(!C$t)throw C$e=C$e&&cc.js.formatStr.apply(null,cc.js.shiftArguments.apply(null,arguments)),new Error(C$e)}),C$t!==C$l.ERROR&&(console.warn.bind?cc.warn=console.warn.bind(console):cc.warn=function(){return console.warn.apply(console,arguments)}),C$t===C$l.INFO&&(console.log.bind?cc.log=console.log.bind(console):cc.log=function(){return console.log.apply(console,arguments)}))},getError:C$s(),isDisplayStats:function(){return!!cc.profiler&&cc.profiler.isShowingStats()},setDisplayStats:function(C$t){cc.profiler&&cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&(C$t?cc.profiler.showStats():cc.profiler.hideStats(),cc.game.config.showFPS=!!C$t)}}},{"../../DebugInfos":1,"./platform/utils":213}],28:[function(C$t,C$e,C$a){"use strict";var C$i=C$t("./event/event-target"),C$h=C$t("./load-pipeline/auto-release-utils"),C$n=C$t("./component-scheduler"),C$r=C$t("./node-activator"),C$u=C$t("./platform/CCObject"),C$_=C$t("./CCGame"),C$c=C$t("./renderer"),C$s=C$t("./event-manager"),C$o=C$t("./CCScheduler");cc.Director=function(){C$i.call(this),this._paused=!1,this._purgeDirectorInNextLoop=!1,this._winSizeInPoints=null,this._loadingScene="",this._scene=null,this._totalFrames=0,this._lastUpdate=0,this._deltaTime=0,this._startTime=0,this._maxParticleDeltaTime=0,this._scheduler=null,this._compScheduler=null,this._nodeActivator=null,this._actionManager=null;var C$t=this;C$_.on(C$_.EVENT_SHOW,function(){C$t._lastUpdate=performance.now()}),C$_.once(C$_.EVENT_ENGINE_INITED,this.init,this)},cc.Director.prototype={constructor:cc.Director,init:function(){return this._totalFrames=0,this._lastUpdate=performance.now(),this._startTime=this._lastUpdate,this._paused=!1,this._purgeDirectorInNextLoop=!1,this._winSizeInPoints=cc.size(0,0),this._scheduler=new C$o,cc.ActionManager?(this._actionManager=new cc.ActionManager,this._scheduler.scheduleUpdate(this._actionManager,C$o.PRIORITY_SYSTEM,!1)):this._actionManager=null,this.sharedInit(),!0},sharedInit:function(){this._compScheduler=new C$n,this._nodeActivator=new C$r,C$s&&C$s.setEnabled(!0),cc.AnimationManager?(this._animationManager=new cc.AnimationManager,this._scheduler.scheduleUpdate(this._animationManager,C$o.PRIORITY_SYSTEM,!1)):this._animationManager=null,cc.CollisionManager?(this._collisionManager=new cc.CollisionManager,this._scheduler.scheduleUpdate(this._collisionManager,C$o.PRIORITY_SYSTEM,!1)):this._collisionManager=null,cc.PhysicsManager?(this._physicsManager=new cc.PhysicsManager,this._scheduler.scheduleUpdate(this._physicsManager,C$o.PRIORITY_SYSTEM,!1)):this._physicsManager=null,cc.Physics3DManager?(this._physics3DManager=new cc.Physics3DManager,this._scheduler.scheduleUpdate(this._physics3DManager,C$o.PRIORITY_SYSTEM,!1)):this._physics3DManager=null,cc._widgetManager&&cc._widgetManager.init(this),cc.loader.init(this)},calculateDeltaTime:function(C$t){C$t=C$t||performance.now(),this._deltaTime=C$t>this._lastUpdate?(C$t-this._lastUpdate)/1e3:0,1<this._deltaTime&&(this._deltaTime=1/60),this._lastUpdate=C$t},convertToGL:function(C$t){var C$e=C$_.container,C$i=cc.view,C$n=C$e.getBoundingClientRect(),C$r=C$n.left+window.pageXOffset-C$e.clientLeft,C$e=C$n.top+window.pageYOffset-C$e.clientTop,C$r=C$i._devicePixelRatio*(C$t.x-C$r),C$e=C$i._devicePixelRatio*(C$e+C$n.height-C$t.y);return C$i._isRotated?cc.v2(C$i._viewportRect.width-C$e,C$r):cc.v2(C$r,C$e)},convertToUI:function(C$t){var C$e=C$_.container,C$i=cc.view,C$n=C$e.getBoundingClientRect(),C$r=C$n.left+window.pageXOffset-C$e.clientLeft,C$e=C$n.top+window.pageYOffset-C$e.clientTop,C$s=cc.v2(0,0);return C$i._isRotated?(C$s.x=C$r+C$t.y/C$i._devicePixelRatio,C$s.y=C$e+C$n.height-(C$i._viewportRect.width-C$t.x)/C$i._devicePixelRatio):(C$s.x=C$r+C$t.x*C$i._devicePixelRatio,C$s.y=C$e+C$n.height-C$t.y*C$i._devicePixelRatio),C$s},end:function(){this._purgeDirectorInNextLoop=!0},getWinSize:function(){return cc.size(cc.winSize)},getWinSizeInPixels:function(){return cc.size(cc.winSize)},pause:function(){this._paused||(this._paused=!0)},purgeCachedData:function(){cc.loader.releaseAll()},purgeDirector:function(){this._scheduler.unscheduleAll(),this._compScheduler.unscheduleAll(),this._nodeActivator.reset(),C$s&&C$s.setEnabled(!1),cc.isValid(this._scene)&&this._scene.destroy(),this._scene=null,cc.renderer.clear(),cc.AssetLibrary.resetBuiltins(),cc.game.pause(),cc.loader.releaseAll()},reset:function(){this.purgeDirector(),C$s&&C$s.setEnabled(!0),this._actionManager&&this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._animationManager&&this._scheduler.scheduleUpdate(this._animationManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._collisionManager&&this._scheduler.scheduleUpdate(this._collisionManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._physicsManager&&this._scheduler.scheduleUpdate(this._physicsManager,cc.Scheduler.PRIORITY_SYSTEM,!1),cc.game.resume()},runSceneImmediate:function(C$t,C$e,C$i){cc.assertID(C$t instanceof cc.Scene,1216),console.time("InitScene"),C$t._load(),console.timeEnd("InitScene"),console.time("AttachPersist");for(var C$n=Object.keys(C$_._persistRootNodes).map(function(C$t){return C$_._persistRootNodes[C$t]}),C$r=0;C$r<C$n.length;C$r++){var C$s,C$o=C$n[C$r],C$a=C$t.getChildByUuid(C$o.uuid);C$a?(C$s=C$a.getSiblingIndex(),C$a._destroyImmediate(),C$t.insertChild(C$o,C$s)):C$o.parent=C$t}console.timeEnd("AttachPersist");var C$c=this._scene,C$l=(console.time("AutoRelease"),C$c&&C$c.autoReleaseAssets&&C$c.dependAssets);C$h.autoRelease(C$l,C$t.dependAssets,C$n),console.timeEnd("AutoRelease"),console.time("Destroy"),cc.isValid(C$c)&&C$c.destroy(),this._scene=null,C$u._deferredDestroy(),console.timeEnd("Destroy"),C$e&&C$e(),this.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,C$t),this._scene=C$t,console.time("Activate"),C$t._activate(),console.timeEnd("Activate"),cc.game.resume(),C$i&&C$i(null,C$t),this.emit(cc.Director.EVENT_AFTER_SCENE_LAUNCH,C$t)},runScene:function(C$t,C$e,C$i){cc.assertID(C$t,1205),cc.assertID(C$t instanceof cc.Scene,1216),C$t._load(),this.once(cc.Director.EVENT_AFTER_UPDATE,function(){this.runSceneImmediate(C$t,C$e,C$i)},this)},_getSceneUuid:function(C$t){var C$e=C$_._sceneInfos;if("string"==typeof C$t){C$t.endsWith(".fire")||(C$t+=".fire"),"/"===C$t[0]||C$t.startsWith("db://")||(C$t="/"+C$t);for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];if(C$n.url.endsWith(C$t))return C$n}}else if("number"==typeof C$t){if(0<=C$t&&C$t<C$e.length)return C$e[C$t];cc.errorID(1206,C$t)}else cc.errorID(1207,C$t);return null},loadScene:function(C$t,C$e,C$i){if(this._loadingScene)return cc.warnID(1208,C$t,this._loadingScene),!1;var C$n=this._getSceneUuid(C$t);return C$n?(C$n=C$n.uuid,this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,C$t),this._loadingScene=C$t,this._loadSceneByUuid(C$n,C$e,C$i),!0):(cc.errorID(1209,C$t),!1)},preloadScene:function(C$i,C$t,C$n){void 0===C$n&&(C$n=C$t,C$t=null);var C$e=this._getSceneUuid(C$i);C$e?(this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,C$i),cc.loader.load({uuid:C$e.uuid,type:"uuid"},C$t,function(C$t,C$e){C$t&&cc.errorID(1210,C$i,C$t.message),C$n&&C$n(C$t,C$e)})):(C$e='Can not preload the scene "'+C$i+'" because it is not in the build settings.',C$n(new Error(C$e)),cc.error("preloadScene: "+C$e))},_loadSceneByUuid:function(C$r,C$s,C$o,C$t){console.time("LoadScene "+C$r),cc.AssetLibrary.loadAsset(C$r,function(C$t,C$e){console.timeEnd("LoadScene "+C$r);var C$i,C$n=cc.director;if(C$n._loadingScene="",C$t)C$t="Failed to load scene: "+C$t,cc.error(C$t);else{if(C$e instanceof cc.SceneAsset)return(C$i=C$e.scene)._id=C$e._uuid,C$i._name=C$e._name,void C$n.runSceneImmediate(C$i,C$o,C$s);C$t="The asset "+C$r+" is not a scene",cc.error(C$t)}C$s&&C$s(C$t)})},resume:function(){this._paused&&(this._lastUpdate=performance.now(),this._lastUpdate||cc.logID(1200),this._paused=!1,this._deltaTime=0)},setDepthTest:function(C$t){cc.Camera.main&&(cc.Camera.main.depth=!!C$t)},setClearColor:function(C$t){cc.Camera.main&&(cc.Camera.main.backgroundColor=C$t)},getRunningScene:function(){return this._scene},getScene:function(){return this._scene},getAnimationInterval:function(){return 1e3/C$_.getFrameRate()},setAnimationInterval:function(C$t){C$_.setFrameRate(Math.round(1e3/C$t))},getDeltaTime:function(){return this._deltaTime},getTotalTime:function(){return performance.now()-this._startTime},getTotalFrames:function(){return this._totalFrames},isPaused:function(){return this._paused},getScheduler:function(){return this._scheduler},setScheduler:function(C$t){this._scheduler!==C$t&&(this._scheduler=C$t)},getActionManager:function(){return this._actionManager},setActionManager:function(C$t){this._actionManager!==C$t&&(this._actionManager&&this._scheduler.unscheduleUpdate(this._actionManager),this._actionManager=C$t,this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1))},getAnimationManager:function(){return this._animationManager},getCollisionManager:function(){return this._collisionManager},getPhysicsManager:function(){return this._physicsManager},getPhysics3DManager:function(){return this._physics3DManager},startAnimation:function(){cc.game.resume()},stopAnimation:function(){cc.game.pause()},_resetDeltaTime:function(){this._lastUpdate=performance.now(),this._deltaTime=0},mainLoop:function(C$t){this._purgeDirectorInNextLoop?(this._purgeDirectorInNextLoop=!1,this.purgeDirector()):(this.calculateDeltaTime(C$t),this._paused||(this.emit(cc.Director.EVENT_BEFORE_UPDATE),this._compScheduler.startPhase(),this._compScheduler.updatePhase(this._deltaTime),this._scheduler.update(this._deltaTime),this._compScheduler.lateUpdatePhase(this._deltaTime),this._compScheduler.clearup(),this.emit(cc.Director.EVENT_AFTER_UPDATE),C$u._deferredDestroy()),this.emit(cc.Director.EVENT_BEFORE_DRAW),C$c.render(this._scene,this._deltaTime),this.emit(cc.Director.EVENT_AFTER_DRAW),C$s.frameUpdateListeners(),this._totalFrames++)},__fastOn:function(C$t,C$e,C$i){this.on(C$t,C$e,C$i)},__fastOff:function(C$t,C$e,C$i){this.off(C$t,C$e,C$i)}},cc.js.addon(cc.Director.prototype,C$i.prototype),cc.Director.EVENT_PROJECTION_CHANGED="director_projection_changed",cc.Director.EVENT_BEFORE_SCENE_LOADING="director_before_scene_loading",cc.Director.EVENT_BEFORE_SCENE_LAUNCH="director_before_scene_launch",cc.Director.EVENT_AFTER_SCENE_LAUNCH="director_after_scene_launch",cc.Director.EVENT_BEFORE_UPDATE="director_before_update",cc.Director.EVENT_AFTER_UPDATE="director_after_update",cc.Director.EVENT_BEFORE_VISIT="director_before_draw",cc.Director.EVENT_AFTER_VISIT="director_before_draw",cc.Director.EVENT_BEFORE_DRAW="director_before_draw",cc.Director.EVENT_AFTER_DRAW="director_after_draw",cc.Director.PROJECTION_2D=0,cc.Director.PROJECTION_3D=1,cc.Director.PROJECTION_CUSTOM=3,cc.Director.PROJECTION_DEFAULT=cc.Director.PROJECTION_2D,cc.Director.EVENT_BEFORE_PHYSICS="director_before_physics",cc.Director.EVENT_AFTER_PHYSICS="director_after_physics",cc.director=new cc.Director,C$e.exports=cc.director},{"./CCGame":29,"./CCScheduler":33,"./component-scheduler":72,"./event-manager":113,"./event/event-target":115,"./load-pipeline/auto-release-utils":140,"./node-activator":161,"./platform/CCObject":195,"./renderer":220}],29:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./event/event-target"),C$o=(C$t("../audio/CCAudioEngine"),C$t("./CCDebug")),C$s=C$t("./renderer/index.js"),C$a=C$t("../core/renderer/utils/dynamic-atlas/manager"),C$c={EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",EVENT_RESTART:"game_on_restart",EVENT_GAME_INITED:"game_inited",EVENT_ENGINE_INITED:"engine_inited",EVENT_RENDERER_INITED:"engine_inited",RENDER_TYPE_CANVAS:0,RENDER_TYPE_WEBGL:1,RENDER_TYPE_OPENGL:2,_persistRootNodes:{},_paused:!0,_configLoaded:!1,_isCloning:!1,_prepared:!1,_rendererInitialized:!1,_renderContext:null,_intervalId:null,_lastTime:null,_frameTime:null,_sceneInfos:[],frame:null,container:null,canvas:null,renderType:-1,config:null,onStart:null,setFrameRate:function(C$t){this.config.frameRate=C$t,this._intervalId&&window.cancelAnimFrame(this._intervalId),this._intervalId=0,this._paused=!0,this._setAnimFrame(),this._runMainLoop()},getFrameRate:function(){return this.config.frameRate},step:function(){cc.director.mainLoop()},pause:function(){this._paused||(this._paused=!0,cc.audioEngine&&cc.audioEngine._break(),this._intervalId&&window.cancelAnimFrame(this._intervalId),this._intervalId=0)},resume:function(){this._paused&&(this._paused=!1,cc.audioEngine&&cc.audioEngine._restore(),cc.director._resetDeltaTime(),this._runMainLoop())},isPaused:function(){return this._paused},restart:function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){for(var C$t in C$c._persistRootNodes)C$c.removePersistRootNode(C$c._persistRootNodes[C$t]);cc.director.getScene().destroy(),cc.Object._deferredDestroy(),cc.audioEngine&&cc.audioEngine.uncacheAll(),cc.director.reset(),C$c.pause(),cc.AssetLibrary._loadBuiltins(function(){C$c.onStart(),C$c.emit(C$c.EVENT_RESTART)})})},end:function(){close()},_initEngine:function(){this._rendererInitialized||(this._initRenderer(),this._initEvents(),this.emit(this.EVENT_ENGINE_INITED))},_loadPreviewScript:function(C$t){C$t()},_prepareFinished:function(C$t){var C$e=this;this._initEngine(),this._setAnimFrame(),cc.AssetLibrary._loadBuiltins(function(){console.log("Cocos Creator v"+cc.ENGINE_VERSION),C$e._prepared=!0,C$e._runMainLoop(),C$e.emit(C$e.EVENT_GAME_INITED),C$t&&C$t()})},eventTargetOn:C$n.prototype.on,eventTargetOnce:C$n.prototype.once,on:function(C$t,C$e,C$i,C$n){this._prepared&&C$t===this.EVENT_ENGINE_INITED||!this._paused&&C$t===this.EVENT_GAME_INITED?C$e.call(C$i):this.eventTargetOn(C$t,C$e,C$i,C$n)},once:function(C$t,C$e,C$i){this._prepared&&C$t===this.EVENT_ENGINE_INITED||!this._paused&&C$t===this.EVENT_GAME_INITED?C$e.call(C$i):this.eventTargetOnce(C$t,C$e,C$i)},prepare:function(C$e){var C$t,C$i=this;this._prepared?C$e&&C$e():(C$t=this.config.jsList)&&0<C$t.length?cc.loader.load(C$t,function(C$t){if(C$t)throw new Error(JSON.stringify(C$t));C$i._loadPreviewScript(function(){C$i._prepareFinished(C$e)})}):this._loadPreviewScript(function(){C$i._prepareFinished(C$e)})},run:function(C$t,C$e){this._initConfig(C$t),this.onStart=C$e,this.prepare(C$c.onStart&&C$c.onStart.bind(C$c))},addPersistRootNode:function(C$t){if(cc.Node.isNode(C$t)&&C$t.uuid){var C$e=C$t.uuid;if(!this._persistRootNodes[C$e]){var C$i=cc.director._scene;if(cc.isValid(C$i))if(C$t.parent){if(!(C$t.parent instanceof cc.Scene))return void cc.warnID(3801);if(C$t.parent!==C$i)return void cc.warnID(3802)}else C$t.parent=C$i;(this._persistRootNodes[C$e]=C$t)._persistNode=!0}}else cc.warnID(3800)},removePersistRootNode:function(C$t){var C$e=C$t.uuid||"";C$t===this._persistRootNodes[C$e]&&(delete this._persistRootNodes[C$e],C$t._persistNode=!1)},isPersistRootNode:function(C$t){return C$t._persistNode},_setAnimFrame:function(){this._lastTime=performance.now();var C$t=C$c.config.frameRate;this._frameTime=1e3/C$t,cc.director._maxParticleDeltaTime=this._frameTime/1e3*2,60!==C$t&&30!==C$t?(window.requestAnimFrame=this._stTime,window.cancelAnimFrame=this._ctTime):(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||this._stTime,window.cancelAnimFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||this._ctTime)},_stTime:function(C$t){var C$e=performance.now(),C$i=Math.max(0,C$c._frameTime-(C$e-C$c._lastTime)),C$n=window.setTimeout(function(){C$t()},C$i);return C$c._lastTime=C$e+C$i,C$n},_ctTime:function(C$t){window.clearTimeout(C$t)},_runMainLoop:function(){var C$e,C$i,C$t,C$n,C$r,C$s;this._prepared&&(C$t=(C$e=this).config,C$n=cc.director,C$r=!0,C$s=C$t.frameRate,C$o.setDisplayStats(C$t.showFPS),C$i=function(C$t){C$e._paused||(C$e._intervalId=window.requestAnimFrame(C$i),30===C$s&&(C$r=!C$r)||C$n.mainLoop(C$t))},C$e._intervalId=window.requestAnimFrame(C$i),C$e._paused=!1)},_initConfig:function(C$t){"number"!=typeof C$t.debugMode&&(C$t.debugMode=0),C$t.exposeClassName=!!C$t.exposeClassName,"number"!=typeof C$t.frameRate&&(C$t.frameRate=60);var C$e=C$t.renderMode;("number"!=typeof C$e||2<C$e||C$e<0)&&(C$t.renderMode=0),"boolean"!=typeof C$t.registerSystemEvent&&(C$t.registerSystemEvent=!0),C$t.showFPS=1!==C$e&&!!C$t.showFPS,this._sceneInfos=C$t.scenes||[],this.collisionMatrix=C$t.collisionMatrix||[],this.groupList=C$t.groupList||[],C$o._resetDebugSetting(C$t.debugMode),this.config=C$t,this._configLoaded=!0},_determineRenderType:function(){var C$t=this.config,C$t=parseInt(C$t.renderMode)||0,C$e=(this.renderType=this.RENDER_TYPE_CANVAS,!1);if(0===C$t?cc.sys.capabilities.opengl?(this.renderType=this.RENDER_TYPE_WEBGL,C$e=!0):cc.sys.capabilities.canvas&&(this.renderType=this.RENDER_TYPE_CANVAS,C$e=!0):1===C$t&&cc.sys.capabilities.canvas?(this.renderType=this.RENDER_TYPE_CANVAS,C$e=!0):2===C$t&&cc.sys.capabilities.opengl&&(this.renderType=this.RENDER_TYPE_WEBGL,C$e=!0),!C$e)throw new Error(C$o.getError(3820,C$t))},_initRenderer:function(){var C$t,C$e,C$i,C$n,C$r;this._rendererInitialized||("CANVAS"===(C$r=(C$r=this.config.id)instanceof HTMLElement?C$r:document.querySelector(C$r)||document.querySelector("#"+C$r)).tagName?(C$t=C$r.width,C$e=C$r.height,this.canvas=C$i=C$r,this.container=C$n=document.createElement("DIV"),C$i.parentNode&&C$i.parentNode.insertBefore(C$n,C$i)):("DIV"!==C$r.tagName&&cc.warnID(3819),C$t=C$r.clientWidth,C$e=C$r.clientHeight,this.canvas=C$i=document.createElement("CANVAS"),this.container=C$n=document.createElement("DIV"),C$r.appendChild(C$n)),C$n.setAttribute("id","Cocos2dGameContainer"),C$n.appendChild(C$i),this.frame=C$n.parentNode===document.body?document.documentElement:C$n.parentNode,C$r="gameCanvas",-1<(" "+(C$n=C$i).className+" ").indexOf(" "+C$r+" ")||(C$n.className&&(C$n.className+=" "),C$n.className+=C$r),C$i.setAttribute("width",C$t||480),C$i.setAttribute("height",C$e||320),C$i.setAttribute("tabindex",99),this._determineRenderType(),this.renderType===this.RENDER_TYPE_WEBGL&&(C$r={stencil:!0,antialias:cc.macro.ENABLE_WEBGL_ANTIALIAS,alpha:cc.macro.ENABLE_TRANSPARENT_CANVAS},C$s.initWebGL(C$i,C$r),this._renderContext=C$s.device._gl,!cc.macro.CLEANUP_IMAGE_CACHE&&C$a&&(C$a.enabled=!0)),this._renderContext||(this.renderType=this.RENDER_TYPE_CANVAS,C$s.initCanvas(C$i),this._renderContext=C$s.device._ctx),this.canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return!1},this._rendererInitialized=!0)},_initEvents:function(){var C$e,C$t=window,C$s=(this.config.registerSystemEvent&&cc.internal.inputManager.registerSystemEvent(this.canvas),void 0!==document.hidden?C$e="hidden":void 0!==document.mozHidden?C$e="mozHidden":void 0!==document.msHidden?C$e="msHidden":void 0!==document.webkitHidden&&(C$e="webkitHidden"),!1);function C$i(){C$s||(C$s=!0,C$c.emit(C$c.EVENT_HIDE))}function C$n(C$t,C$e,C$i,C$n,C$r){C$s&&(C$s=!1,C$c.emit(C$c.EVENT_SHOW,C$t,C$e,C$i,C$n,C$r))}if(C$e)for(var C$r=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],C$o=0;C$o<C$r.length;C$o++)document.addEventListener(C$r[C$o],function(C$t){(document[C$e]||C$t.hidden?C$i:C$n)()});else C$t.addEventListener("blur",C$i),C$t.addEventListener("focus",C$n);-1<navigator.userAgent.indexOf("MicroMessenger")&&(C$t.onfocus=C$n),"onpageshow"in window&&"onpagehide"in window&&(C$t.addEventListener("pagehide",C$i),C$t.addEventListener("pageshow",C$n),document.addEventListener("pagehide",C$i),document.addEventListener("pageshow",C$n)),this.on(C$c.EVENT_HIDE,function(){C$c.pause()}),this.on(C$c.EVENT_SHOW,function(){C$c.resume()})}};C$n.call(C$c),cc.js.addon(C$c,C$n.prototype),cc.game=C$e.exports=C$c},{"../audio/CCAudioEngine":22,"../core/renderer/utils/dynamic-atlas/manager":223,"./CCDebug":27,"./event/event-target":115,"./renderer/index.js":220}],30:[function(C$t,C$e,C$n){"use strict";function C$l(){}function C$u(C$t,C$e){0!==C$t&&(C$tt&&cc.warn("`cc.Node.skewX/Y` is deprecated since v2.2.1, please use 3D node instead.",""),C$tt=!1)}function C$_(C$t,C$e){var C$i=C$t.getLocation(),C$n=this.owner;return!!C$n._hitTest(C$i,this)&&(C$e.type=C$c.TOUCH_START,C$e.touch=C$t,C$e.bubbles=!0,C$n.dispatchEvent(C$e),!0)}function C$d(C$t,C$e){var C$i=this.owner;C$e.type=C$c.TOUCH_MOVE,C$e.touch=C$t,C$e.bubbles=!0,C$i.dispatchEvent(C$e)}function C$f(C$t,C$e){var C$i=C$t.getLocation(),C$n=this.owner;C$n._hitTest(C$i,this)?C$e.type=C$c.TOUCH_END:C$e.type=C$c.TOUCH_CANCEL,C$e.touch=C$t,C$e.bubbles=!0,C$n.dispatchEvent(C$e)}function C$y(C$t,C$e){C$t.getLocation();var C$i=this.owner;C$e.type=C$c.TOUCH_CANCEL,C$e.touch=C$t,C$e.bubbles=!0,C$i.dispatchEvent(C$e)}function C$g(C$t){var C$e=C$t.getLocation(),C$i=this.owner;C$i._hitTest(C$e,this)&&(C$t.type=C$c.MOUSE_DOWN,C$t.bubbles=!0,C$i.dispatchEvent(C$t))}function C$v(C$t){var C$e=C$t.getLocation(),C$i=this.owner;if(C$i._hitTest(C$e,this))this._previousIn||(C$et&&C$et._mouseListener&&(C$t.type=C$c.MOUSE_LEAVE,C$et.dispatchEvent(C$t),C$et._mouseListener._previousIn=!1),C$et=this.owner,C$t.type=C$c.MOUSE_ENTER,C$i.dispatchEvent(C$t),this._previousIn=!0),C$t.type=C$c.MOUSE_MOVE,C$t.bubbles=!0,C$i.dispatchEvent(C$t);else{if(!this._previousIn)return;C$t.type=C$c.MOUSE_LEAVE,C$i.dispatchEvent(C$t),this._previousIn=!1,C$et=null}C$t.stopPropagation()}function C$x(C$t){var C$e=C$t.getLocation(),C$i=this.owner;C$i._hitTest(C$e,this)&&(C$t.type=C$c.MOUSE_UP,C$t.bubbles=!0,C$i.dispatchEvent(C$t),C$t.stopPropagation())}function C$b(C$t){var C$e=C$t.getLocation(),C$i=this.owner;C$i._hitTest(C$e,this)&&(C$t.type=C$c.MOUSE_WHEEL,C$t.bubbles=!0,C$i.dispatchEvent(C$t),C$t.stopPropagation())}var C$p=C$t("./value-types"),C$A=C$t("./utils/base-node"),C$C=C$t("./utils/prefab-helper"),C$S=C$t("./utils/trans-pool").NodeMemPool,C$i=C$t("./utils/affine-transform"),C$a=C$t("./event-manager"),C$T=C$t("./platform/CCMacro"),C$w=C$t("./platform/js"),C$E=(C$t("./event/event"),C$t("./event/event-target")),C$r=C$t("./renderer/render-flow"),C$M=cc.Object.Flags.Destroying,C$I=Math.PI/180,C$s=!!cc.ActionManager,C$B=new C$p.Vec3,C$R=new C$p.Quat,C$P=new C$p.Vec3,C$D=new C$p.Vec3,C$L=new C$p.Quat,C$V=new C$p.Quat,C$O=new C$p.Vec3,C$F=new C$p.Vec3,C$N=new C$p.Vec3,C$k=new C$p.Vec3,C$G=new C$p.Vec3,C$z=new C$p.Quat,C$U=new C$p.Quat,C$W=new C$p.Vec3,C$H=new C$p.Quat,C$j=new C$p.Vec3,C$X=new C$p.Quat,C$Y=new C$p.Vec3,C$q=new C$p.Vec3,C$J=new C$p.Quat,C$Z=new C$p.Quat,C$m=(new C$p.Quat,cc.mat4()),C$K=new C$p.Vec3,C$o=new Array(16),C$t=(C$o.length=0,cc.Enum({DEBUG:31})),C$h=cc.Enum({POSITION:1,SCALE:2,ROTATION:4,SKEW:8,TRS:7,RS:6,TRSS:15,PHYSICS_POSITION:16,PHYSICS_SCALE:32,PHYSICS_ROTATION:64,PHYSICS_TRS:112,PHYSICS_RS:96,ALL_POSITION:17,ALL_SCALE:34,ALL_ROTATION:68,ALL_TRS:119,ALL:65535}),C$c=cc.Enum({TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_WHEEL:"mousewheel",POSITION_CHANGED:"position-changed",ROTATION_CHANGED:"rotation-changed",SCALE_CHANGED:"scale-changed",SIZE_CHANGED:"size-changed",ANCHOR_CHANGED:"anchor-changed",COLOR_CHANGED:"color-changed",CHILD_ADDED:"child-added",CHILD_REMOVED:"child-removed",CHILD_REORDER:"child-reorder",GROUP_CHANGED:"group-changed",SIBLING_ORDER_CHANGED:"sibling-order-changed"}),C$Q=[C$c.TOUCH_START,C$c.TOUCH_MOVE,C$c.TOUCH_END,C$c.TOUCH_CANCEL],C$$=[C$c.MOUSE_DOWN,C$c.MOUSE_ENTER,C$c.MOUSE_MOVE,C$c.MOUSE_LEAVE,C$c.MOUSE_UP,C$c.MOUSE_WHEEL],C$tt=!0,C$et=null;function C$it(C$t,C$e){if(C$e){for(var C$i,C$n=0,C$r=null,C$s=C$t;C$s&&cc.Node.isNode(C$s);C$s=C$s._parent,++C$n)C$s.getComponent(C$e)&&(C$i={index:C$n,node:C$s},C$r?C$r.push(C$i):C$r=[C$i]);return C$r}return null}function C$nt(C$t,C$e){if(C$t._objFlags&C$M)return 1;var C$i=0;if(C$t._bubblingListeners)for(;C$i<C$e.length;++C$i)if(C$t._bubblingListeners.hasEventListener(C$e[C$i]))return 1;if(C$t._capturingListeners)for(;C$i<C$e.length;++C$i)if(C$t._capturingListeners.hasEventListener(C$e[C$i]))return 1}function C$rt(C$t){var C$e=C$t.groupIndex;return C$e=0===C$e&&C$t.parent?C$rt(C$t.parent):C$e}function C$st(C$t){var C$e=C$rt(C$t);C$t._cullingMask=1<<C$e;for(var C$i=0;C$i<C$t._children.length;C$i++)C$st(C$t._children[C$i])}function C$ot(){var C$t,C$e,C$i,C$n,C$r,C$s,C$o;this._localMatDirty&C$h.TRSS&&(C$t=(C$e=this._matrix).m,C$p.Trs.toMat4(C$e,this._trs),(this._skewX||this._skewY)&&(C$e=C$t[0],C$i=C$t[1],C$n=C$t[4],C$r=C$t[5],C$s=Math.tan(this._skewX*C$I),C$o=Math.tan(this._skewY*C$I),1/0===C$s&&(C$s=99999999),C$t[0]=C$e+C$n*(C$o=1/0===C$o?99999999:C$o),C$t[1]=C$i+C$r*C$o,C$t[4]=C$n+C$e*C$s,C$t[5]=C$r+C$i*C$s),this._localMatDirty&=~C$h.TRSS,this._worldMatDirty=!0)}function C$at(){var C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l=this._localMatDirty;C$l&C$h.TRSS&&(C$t=this._matrix.m,C$e=this._trs,C$l&(C$h.RS|C$h.SKEW)&&(C$l=-this._eulerAngles.z,C$c=this._skewX||this._skewY,C$i=C$e[7],C$n=C$e[8],C$l||C$c?(C$o=C$s=0,C$a=C$r=1,C$l&&(C$l=C$l*C$I,C$o=Math.sin(C$l),C$r=C$a=Math.cos(C$l),C$s=-C$o),C$t[0]=C$r*=C$i,C$t[1]=C$s*=C$i,C$t[4]=C$o*=C$n,C$t[5]=C$a*=C$n,C$c&&(C$l=C$t[0],C$r=C$t[1],C$s=C$t[4],C$o=C$t[5],C$a=Math.tan(this._skewX*C$I),C$c=Math.tan(this._skewY*C$I),1/0===C$a&&(C$a=99999999),C$t[0]=C$l+C$s*(C$c=1/0===C$c?99999999:C$c),C$t[1]=C$r+C$o*C$c,C$t[4]=C$s+C$l*C$a,C$t[5]=C$o+C$r*C$a)):(C$t[0]=C$i,C$t[1]=0,C$t[4]=0,C$t[5]=C$n)),C$t[12]=C$e[0],C$t[13]=C$e[1],this._localMatDirty&=~C$h.TRSS,this._worldMatDirty=!0)}function C$ct(){var C$t;this._localMatDirty&C$h.TRSS&&this._updateLocalMatrix(),this._parent?(C$t=this._parent._worldMatrix,C$p.Mat4.mul(this._worldMatrix,C$t,this._matrix)):C$p.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1}function C$lt(){this._localMatDirty&C$h.TRSS&&this._updateLocalMatrix();var C$t=this._parent;C$t?this._mulMat(this._worldMatrix,C$t._worldMatrix,this._matrix):C$p.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1}function C$ht(C$t,C$e,C$i){var C$e=C$e.m,C$i=C$i.m,C$t=C$t.m,C$n=C$e[0],C$r=C$e[1],C$s=C$e[4],C$o=C$e[5],C$h=C$e[12],C$e=C$e[13],C$a=C$i[0],C$c=C$i[1],C$l=C$i[4],C$u=C$i[5],C$_=C$i[12],C$i=C$i[13];0!==C$r||0!==C$s?(C$t[0]=C$a*C$n+C$c*C$s,C$t[1]=C$a*C$r+C$c*C$o,C$t[4]=C$l*C$n+C$u*C$s,C$t[5]=C$l*C$r+C$u*C$o,C$t[12]=C$n*C$_+C$s*C$i+C$h,C$t[13]=C$r*C$_+C$o*C$i+C$e):(C$t[0]=C$a*C$n,C$t[1]=C$c*C$o,C$t[4]=C$l*C$n,C$t[5]=C$u*C$o,C$t[12]=C$n*C$_+C$h,C$t[13]=C$o*C$i+C$e)}var C$ut=C$p.Mat4.mul,C$A={name:"cc.Node",extends:C$A,properties:{_opacity:255,_color:cc.Color.WHITE,_contentSize:cc.Size,_anchorPoint:cc.v2(.5,.5),_position:void 0,_scale:void 0,_trs:null,_eulerAngles:cc.Vec3,_skewX:0,_skewY:0,_zIndex:{default:void 0,type:cc.Integer},_localZOrder:{default:0,serializable:!1},_is3DNode:!1,_groupIndex:{default:0,formerlySerializedAs:"groupIndex"},groupIndex:{get:function(){return this._groupIndex},set:function(C$t){this._groupIndex=C$t,C$st(this),this.emit(C$c.GROUP_CHANGED,this)}},group:{get:function(){return cc.game.groupList[this.groupIndex]||""},set:function(C$t){this.groupIndex=cc.game.groupList.indexOf(C$t)}},x:{get:function(){return this._trs[0]},set:function(C$t){var C$e=this._trs;C$t!==C$e[0]&&(C$e[0]=C$t,this.setLocalDirty(C$h.ALL_POSITION),1&this._eventMask&&this.emit(C$c.POSITION_CHANGED))}},y:{get:function(){return this._trs[1]},set:function(C$t){var C$e=this._trs;C$t!==C$e[1]&&(C$e[1]=C$t,this.setLocalDirty(C$h.ALL_POSITION),1&this._eventMask&&this.emit(C$c.POSITION_CHANGED))}},z:{get:function(){return this._trs[2]},set:function(C$t){var C$e=this._trs;C$t!==C$e[2]&&(C$e[2]=C$t,this.setLocalDirty(C$h.ALL_POSITION),this._renderFlag|=C$r.FLAG_WORLD_TRANSFORM,1&this._eventMask&&this.emit(C$c.POSITION_CHANGED))}},rotation:{get:function(){return cc.warn("`cc.Node.rotation` is deprecated since v2.1.0, please use `-angle` instead. (`this.node.rotation` -> `-this.node.angle`)"),-this.angle},set:function(C$t){cc.warn("`cc.Node.rotation` is deprecated since v2.1.0, please set `-angle` instead. (`this.node.rotation = x` -> `this.node.angle = -x`)"),this.angle=-C$t}},angle:{get:function(){return this._eulerAngles.z},set:function(C$t){C$p.Vec3.set(this._eulerAngles,0,0,C$t),C$p.Trs.fromAngleZ(this._trs,C$t),this.setLocalDirty(C$h.ALL_ROTATION),4&this._eventMask&&this.emit(C$c.ROTATION_CHANGED)}},rotationX:{get:function(){return cc.warn("`cc.Node.rotationX` is deprecated since v2.1.0, please use `eulerAngles.x` instead. (`this.node.rotationX` -> `this.node.eulerAngles.x`)"),this._eulerAngles.x},set:function(C$t){cc.warn("`cc.Node.rotationX` is deprecated since v2.1.0, please set `eulerAngles` instead. (`this.node.rotationX = x` -> `this.node.is3DNode = true; this.node.eulerAngles = cc.v3(x, 0, 0)`"),this._eulerAngles.x!==C$t&&(this._eulerAngles.x=C$t,this._eulerAngles.x===this._eulerAngles.y?C$p.Trs.fromAngleZ(this._trs,-C$t):C$p.Trs.fromEulerNumber(this._trs,C$t,this._eulerAngles.y,0),this.setLocalDirty(C$h.ALL_ROTATION),4&this._eventMask&&this.emit(C$c.ROTATION_CHANGED))}},rotationY:{get:function(){return cc.warn("`cc.Node.rotationY` is deprecated since v2.1.0, please use `eulerAngles.y` instead. (`this.node.rotationY` -> `this.node.eulerAngles.y`)"),this._eulerAngles.y},set:function(C$t){cc.warn("`cc.Node.rotationY` is deprecated since v2.1.0, please set `eulerAngles` instead. (`this.node.rotationY = y` -> `this.node.is3DNode = true; this.node.eulerAngles = cc.v3(0, y, 0)`"),this._eulerAngles.y!==C$t&&(this._eulerAngles.y=C$t,this._eulerAngles.x===this._eulerAngles.y?C$p.Trs.fromAngleZ(this._trs,-C$t):C$p.Trs.fromEulerNumber(this._trs,this._eulerAngles.x,C$t,0),this.setLocalDirty(C$h.ALL_ROTATION),4&this._eventMask&&this.emit(C$c.ROTATION_CHANGED))}},eulerAngles:{get:function(){return C$p.Trs.toEuler(this._eulerAngles,this._trs)},set:function(C$t){C$p.Trs.fromEuler(this._trs,C$t),this.setLocalDirty(C$h.ALL_ROTATION),this._renderFlag|=C$r.FLAG_TRANSFORM,4&this._eventMask&&this.emit(C$c.ROTATION_CHANGED)}},quat:{get:function(){var C$t=this._trs;return new C$p.Quat(C$t[3],C$t[4],C$t[5],C$t[6])},set:function(C$t){this.setRotation(C$t)}},scale:{get:function(){return this._trs[7]},set:function(C$t){this.setScale(C$t)}},scaleX:{get:function(){return this._trs[7]},set:function(C$t){this._trs[7]!==C$t&&(this._trs[7]=C$t,this.setLocalDirty(C$h.ALL_SCALE),2&this._eventMask&&this.emit(C$c.SCALE_CHANGED))}},scaleY:{get:function(){return this._trs[8]},set:function(C$t){this._trs[8]!==C$t&&(this._trs[8]=C$t,this.setLocalDirty(C$h.ALL_SCALE),2&this._eventMask&&this.emit(C$c.SCALE_CHANGED))}},scaleZ:{get:function(){return this._trs[9]},set:function(C$t){this._trs[9]!==C$t&&(this._trs[9]=C$t,this.setLocalDirty(C$h.ALL_SCALE),this._renderFlag|=C$r.FLAG_TRANSFORM,2&this._eventMask&&this.emit(C$c.SCALE_CHANGED))}},skewX:{get:function(){return this._skewX},set:function(C$t){C$u(C$t),this._skewX=C$t,this.setLocalDirty(C$h.SKEW)}},skewY:{get:function(){return this._skewY},set:function(C$t){C$u(C$t),this._skewY=C$t,this.setLocalDirty(C$h.SKEW)}},opacity:{get:function(){return this._opacity},set:function(C$t){C$t=cc.misc.clampf(C$t,0,255),this._opacity!==C$t&&(this._opacity=C$t,this._renderFlag|=C$r.FLAG_OPACITY_COLOR)},range:[0,255]},color:{get:function(){return this._color.clone()},set:function(C$t){this._color.equals(C$t)||(this._color.set(C$t),this._renderFlag|=C$r.FLAG_COLOR,32&this._eventMask&&this.emit(C$c.COLOR_CHANGED,C$t))}},anchorX:{get:function(){return this._anchorPoint.x},set:function(C$t){var C$e=this._anchorPoint;C$e.x!==C$t&&(C$e.x=C$t,16&this._eventMask&&this.emit(C$c.ANCHOR_CHANGED))}},anchorY:{get:function(){return this._anchorPoint.y},set:function(C$t){var C$e=this._anchorPoint;C$e.y!==C$t&&(C$e.y=C$t,16&this._eventMask&&this.emit(C$c.ANCHOR_CHANGED))}},width:{get:function(){return this._contentSize.width},set:function(C$t){C$t!==this._contentSize.width&&(this._contentSize.width=C$t,8&this._eventMask&&this.emit(C$c.SIZE_CHANGED))}},height:{get:function(){return this._contentSize.height},set:function(C$t){C$t!==this._contentSize.height&&(this._contentSize.height=C$t,8&this._eventMask&&this.emit(C$c.SIZE_CHANGED))}},zIndex:{get:function(){return this._localZOrder>>16},set:function(C$t){C$t>C$T.MAX_ZINDEX?(cc.warnID(1636),C$t=C$T.MAX_ZINDEX):C$t<C$T.MIN_ZINDEX&&(cc.warnID(1637),C$t=C$T.MIN_ZINDEX),this.zIndex!==C$t&&(this._localZOrder=65535&this._localZOrder|C$t<<16,this.emit(C$c.SIBLING_ORDER_CHANGED),this._onSiblingIndexChanged())}},is3DNode:{get:function(){return this._is3DNode},set:function(C$t){this._is3DNode=C$t,this._update3DFunction()}},up:{get:function(){return C$p.Vec3.transformQuat(C$j,C$p.Vec3.UP,this.getWorldRotation(C$X)).clone()}},right:{get:function(){return C$p.Vec3.transformQuat(C$j,C$p.Vec3.RIGHT,this.getWorldRotation(C$X)).clone()}},forward:{get:function(){return C$p.Vec3.transformQuat(C$j,C$p.Vec3.FORWARD,this.getWorldRotation(C$X)).clone()}}},ctor:function(){this._reorderChildDirty=!1,this._widget=null,this._renderComponent=null,this._capturingListeners=null,this._bubblingListeners=null,this._touchListener=null,this._mouseListener=null,this._initDataFromPool(),this._eventMask=0,this._cullingMask=1,this._childArrivalOrder=1,this._renderFlag=C$r.FLAG_TRANSFORM|C$r.FLAG_OPACITY_COLOR},statics:{EventType:C$c,_LocalDirtyFlag:C$h,isNode:function(C$t){return C$t instanceof C$_t&&(C$t.constructor===C$_t||!(C$t instanceof cc.Scene))},BuiltinGroupIndex:C$t},_onSiblingIndexChanged:function(){this._parent&&this._parent._delaySort()},_onPreDestroy:function(){this._onPreDestroyBase();C$s&&cc.director.getActionManager().removeAllActionsFromTarget(this),C$et===this&&(C$et=null),(this._touchListener||this._mouseListener)&&(C$a.removeListeners(this),this._touchListener&&(this._touchListener.owner=null,this._touchListener.mask=null,this._touchListener=null),this._mouseListener&&(this._mouseListener.owner=null,this._mouseListener.mask=null,this._mouseListener=null)),this._backDataIntoPool(),this._reorderChildDirty&&cc.director.__fastOff(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this)},_onPostActivated:function(C$t){var C$e=C$s?cc.director.getActionManager():null;C$t?(this._renderFlag|=C$r.FLAG_WORLD_TRANSFORM,C$e&&C$e.resumeTarget(this),C$a.resumeTarget(this),this._checkListenerMask()):(C$e&&C$e.pauseTarget(this),C$a.pauseTarget(this))},_onHierarchyChanged:function(C$t){this._updateOrderOfArrival(),C$st(this),this._parent&&this._parent._delaySort(),this._renderFlag|=C$r.FLAG_WORLD_TRANSFORM,this._onHierarchyChangedBase(C$t),cc._widgetManager&&(cc._widgetManager._nodesOrderDirty=!0),C$t&&this._activeInHierarchy&&this._checkListenerMask()},_update3DFunction:function(){this._is3DNode?(this._updateLocalMatrix=C$ot,this._calculWorldMatrix=C$ct,this._mulMat=C$ut):(this._updateLocalMatrix=C$at,this._calculWorldMatrix=C$lt,this._mulMat=C$ht),this._renderComponent&&this._renderComponent._on3DNodeChanged&&this._renderComponent._on3DNodeChanged(),this._renderFlag|=C$r.FLAG_TRANSFORM,this._localMatDirty=C$h.ALL},_initDataFromPool:function(){this._spaceInfo||(this._spaceInfo=C$S.pop());var C$t=this._spaceInfo,C$t=(this._matrix=cc.mat4(C$t.localMat),C$p.Mat4.identity(this._matrix),this._worldMatrix=cc.mat4(C$t.worldMat),C$p.Mat4.identity(this._worldMatrix),this._localMatDirty=C$h.ALL,this._worldMatDirty=!0,this._trs=this._spaceInfo.trs);C$t[0]=0,C$t[1]=0,C$t[2]=0,C$t[3]=0,C$t[4]=0,C$t[5]=0,C$t[6]=1,C$t[7]=1,C$t[8]=1,C$t[9]=1},_backDataIntoPool:function(){C$S.push(this._spaceInfo),this._matrix=null,this._worldMatrix=null,this._trs=null,this._spaceInfo=null},_toEuler:function(){var C$t;this.is3DNode?C$p.Trs.toEuler(this._eulerAngles,this._trs):(C$t=Math.asin(this._trs[5])/C$I*2,C$p.Vec3.set(this._eulerAngles,0,0,C$t))},_fromEuler:function(){this.is3DNode?C$p.Trs.fromEuler(this._trs,this._eulerAngles):C$p.Trs.fromAngleZ(this._trs,this._eulerAngles.z)},_upgrade_1x_to_2x:function(){this._is3DNode&&this._update3DFunction();var C$t,C$e=this._trs;C$e?(C$t=C$e,C$e=this._trs=this._spaceInfo.trs,11===C$t.length?C$e.set(C$t.subarray(1)):C$e.set(C$t)):C$e=this._trs=this._spaceInfo.trs,void 0!==this._zIndex&&(this._localZOrder=this._zIndex<<16,this._zIndex=void 0),this._fromEuler(),0!==this._localZOrder&&(this._zIndex=(4294901760&this._localZOrder)>>16),this._color.a<255&&255===this._opacity&&(this._opacity=this._color.a,this._color.a=255)},_onBatchCreated:function(){for(var C$t=this._prefab,C$e=(C$t&&C$t.sync&&C$t.root===this&&C$C.syncWithPrefab(this),this._upgrade_1x_to_2x(),this._updateOrderOfArrival(),this._cullingMask=1<<C$rt(this),this._activeInHierarchy||(C$s&&cc.director.getActionManager().pauseTarget(this),C$a.pauseTarget(this)),this._children),C$i=0,C$n=C$e.length;C$i<C$n;C$i++)C$e[C$i]._onBatchCreated();0<C$e.length&&(this._renderFlag|=C$r.FLAG_CHILDREN)},_onBatchRestored:function(){this._upgrade_1x_to_2x(),this._cullingMask=1<<C$rt(this),this._activeInHierarchy||((C$t=cc.director.getActionManager())&&C$t.pauseTarget(this),C$a.pauseTarget(this));for(var C$t,C$e=this._children,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)C$e[C$i]._onBatchRestored();0<C$e.length&&(this._renderFlag|=C$r.FLAG_CHILDREN)},_checkListenerMask:function(){var C$t;this._touchListener?(C$t=this._touchListener.mask=C$it(this,cc.Mask),this._mouseListener&&(this._mouseListener.mask=C$t)):this._mouseListener&&(this._mouseListener.mask=C$it(this,cc.Mask))},_checknSetupSysEvent:function(C$t){var C$e=!1,C$i=!1;return-1!==C$Q.indexOf(C$t)?(this._touchListener||(this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,owner:this,mask:C$it(this,cc.Mask),onTouchBegan:C$_,onTouchMoved:C$d,onTouchEnded:C$f,onTouchCancelled:C$y}),C$a.addListener(this._touchListener,this),C$e=!0),C$i=!0):-1!==C$$.indexOf(C$t)&&(this._mouseListener||(this._mouseListener=cc.EventListener.create({event:cc.EventListener.MOUSE,_previousIn:!1,owner:this,mask:C$it(this,cc.Mask),onMouseDown:C$g,onMouseMove:C$v,onMouseUp:C$x,onMouseScroll:C$b}),C$a.addListener(this._mouseListener,this),C$e=!0),C$i=!0),C$e&&!this._activeInHierarchy&&cc.director.getScheduler().schedule(function(){this._activeInHierarchy||C$a.pauseTarget(this)},this,0,0,0,!1),C$i},on:function(C$t,C$e,C$i,C$n){if(this._checknSetupSysEvent(C$t))return this._onDispatch(C$t,C$e,C$i,C$n);switch(C$t){case C$c.POSITION_CHANGED:this._eventMask|=1;break;case C$c.SCALE_CHANGED:this._eventMask|=2;break;case C$c.ROTATION_CHANGED:this._eventMask|=4;break;case C$c.SIZE_CHANGED:this._eventMask|=8;break;case C$c.ANCHOR_CHANGED:this._eventMask|=16;break;case C$c.COLOR_CHANGED:this._eventMask|=32}return this._bubblingListeners||(this._bubblingListeners=new C$E),this._bubblingListeners.on(C$t,C$e,C$i)},once:function(C$t,C$e,C$i,C$n){(this._checknSetupSysEvent(C$t)&&C$n?this._capturingListeners=this._capturingListeners||new C$E:this._bubblingListeners=this._bubblingListeners||new C$E).once(C$t,C$e,C$i)},_onDispatch:function(C$t,C$e,C$i,C$n){var C$r;{if("boolean"==typeof C$i?(C$n=C$i,C$i=void 0):C$n=!!C$n,C$e)return C$r=null,(C$r=C$n?this._capturingListeners=this._capturingListeners||new C$E:this._bubblingListeners=this._bubblingListeners||new C$E).hasEventListener(C$t,C$e,C$i)||(C$r.on(C$t,C$e,C$i),C$i&&C$i.__eventTargets&&C$i.__eventTargets.push(this)),C$e;cc.errorID(6800)}},off:function(C$t,C$e,C$i,C$n){var C$r=-1!==C$Q.indexOf(C$t),C$s=!C$r&&-1!==C$$.indexOf(C$t);if(C$r||C$s)this._offDispatch(C$t,C$e,C$i,C$n),C$r?this._touchListener&&!C$nt(this,C$Q)&&(C$a.removeListener(this._touchListener),this._touchListener=null):C$s&&this._mouseListener&&!C$nt(this,C$$)&&(C$a.removeListener(this._mouseListener),this._mouseListener=null);else if(this._bubblingListeners)if(this._bubblingListeners.off(C$t,C$e,C$i),!this._bubblingListeners.hasEventListener(C$t))switch(C$t){case C$c.POSITION_CHANGED:this._eventMask&=-2;break;case C$c.SCALE_CHANGED:this._eventMask&=-3;break;case C$c.ROTATION_CHANGED:this._eventMask&=-5;break;case C$c.SIZE_CHANGED:this._eventMask&=-9;break;case C$c.ANCHOR_CHANGED:this._eventMask&=-17;break;case C$c.COLOR_CHANGED:this._eventMask&=-33}},_offDispatch:function(C$t,C$e,C$i,C$n){"boolean"==typeof C$i?(C$n=C$i,C$i=void 0):C$n=!!C$n,C$e?(C$n=C$n?this._capturingListeners:this._bubblingListeners)&&(C$n.off(C$t,C$e,C$i),C$i&&C$i.__eventTargets&&C$w.array.fastRemove(C$i.__eventTargets,this)):(this._capturingListeners&&this._capturingListeners.removeAll(C$t),this._bubblingListeners&&this._bubblingListeners.removeAll(C$t))},targetOff:function(C$t){var C$e=this._bubblingListeners;C$e&&(C$e.targetOff(C$t),1&this._eventMask&&!C$e.hasEventListener(C$c.POSITION_CHANGED)&&(this._eventMask&=-2),2&this._eventMask&&!C$e.hasEventListener(C$c.SCALE_CHANGED)&&(this._eventMask&=-3),4&this._eventMask&&!C$e.hasEventListener(C$c.ROTATION_CHANGED)&&(this._eventMask&=-5),8&this._eventMask&&!C$e.hasEventListener(C$c.SIZE_CHANGED)&&(this._eventMask&=-9),16&this._eventMask&&!C$e.hasEventListener(C$c.ANCHOR_CHANGED)&&(this._eventMask&=-17),32&this._eventMask&&!C$e.hasEventListener(C$c.COLOR_CHANGED)&&(this._eventMask&=-33)),this._capturingListeners&&this._capturingListeners.targetOff(C$t),C$t&&C$t.__eventTargets&&C$w.array.fastRemove(C$t.__eventTargets,this),this._touchListener&&!C$nt(this,C$Q)&&(C$a.removeListener(this._touchListener),this._touchListener=null),this._mouseListener&&!C$nt(this,C$$)&&(C$a.removeListener(this._mouseListener),this._mouseListener=null)},hasEventListener:function(C$t){var C$e=!1;return C$e=!(C$e=this._bubblingListeners?this._bubblingListeners.hasEventListener(C$t):C$e)&&this._capturingListeners?this._capturingListeners.hasEventListener(C$t):C$e},emit:function(C$t,C$e,C$i,C$n,C$r,C$s){this._bubblingListeners&&this._bubblingListeners.emit(C$t,C$e,C$i,C$n,C$r,C$s)},dispatchEvent:function(C$t){!function(C$t,C$e){var C$i,C$n;for(C$e.target=C$t,C$o.length=0,C$t._getCapturingTargets(C$e.type,C$o),C$e.eventPhase=1,C$n=C$o.length-1;0<=C$n;--C$n)if((C$i=C$o[C$n])._capturingListeners&&((C$e.currentTarget=C$i)._capturingListeners.emit(C$e.type,C$e,C$o),C$e._propagationStopped))return C$o.length=0;if(C$o.length=0,C$e.eventPhase=2,(C$e.currentTarget=C$t)._capturingListeners&&C$t._capturingListeners.emit(C$e.type,C$e),!C$e._propagationImmediateStopped&&C$t._bubblingListeners&&C$t._bubblingListeners.emit(C$e.type,C$e),!C$e._propagationStopped&&C$e.bubbles)for(C$t._getBubblingTargets(C$e.type,C$o),C$e.eventPhase=3,C$n=0;C$n<C$o.length;++C$n)if((C$i=C$o[C$n])._bubblingListeners&&((C$e.currentTarget=C$i)._bubblingListeners.emit(C$e.type,C$e),C$e._propagationStopped))return C$o.length=0;C$o.length=0}(this,C$t),C$o.length=0},pauseSystemEvents:function(C$t){C$a.pauseTarget(this,C$t)},resumeSystemEvents:function(C$t){C$a.resumeTarget(this,C$t)},_hitTest:function(C$h,C$t){var C$u=this._contentSize.width,C$_=this._contentSize.height,C$e=C$Y,C$i=C$q,C$d=cc.Camera.findCamera(this);if(C$d?C$d.getScreenToWorldPoint(C$h,C$e):C$e.set(C$h),this._updateWorldMatrix(),!C$p.Mat4.invert(C$m,this._worldMatrix))return!1;C$p.Vec2.transformMat4(C$i,C$e,C$m),C$i.x+=this._anchorPoint.x*C$u,C$i.y+=this._anchorPoint.y*C$_;var C$n=!1;if(0<=C$i.x&&0<=C$i.y&&C$i.x<=C$u&&C$i.y<=C$_&&(C$n=!0,C$t&&C$t.mask))for(var C$r=C$t.mask,C$s=this,C$f=C$r?C$r.length:0,C$o=0,C$a=0;C$s&&C$a<C$f;++C$o,C$s=C$s.parent){var C$c=C$r[C$a];if(C$o===C$c.index){if(C$s!==C$c.node){C$r.length=C$a;break}var C$l=C$s.getComponent(cc.Mask);if(C$l&&C$l._enabled&&!C$l._hitTest(C$e)){C$n=!1;break}C$a++}else if(C$o>C$c.index){C$r.length=C$a;break}}return C$n},_getCapturingTargets:function(C$t,C$e){for(var C$i=this.parent;C$i;)C$i._capturingListeners&&C$i._capturingListeners.hasEventListener(C$t)&&C$e.push(C$i),C$i=C$i.parent},_getBubblingTargets:function(C$t,C$e){for(var C$i=this.parent;C$i;)C$i._bubblingListeners&&C$i._bubblingListeners.hasEventListener(C$t)&&C$e.push(C$i),C$i=C$i.parent},runAction:C$s?function(C$t){var C$e;if(this.active)return cc.assertID(C$t,1618),C$e=cc.director.getActionManager(),C$e._suppressDeprecation||(C$e._suppressDeprecation=!0,cc.warnID(1639)),C$e.addAction(C$t,this,!1),C$t}:C$l,pauseAllActions:C$s?function(){cc.director.getActionManager().pauseTarget(this)}:C$l,resumeAllActions:C$s?function(){cc.director.getActionManager().resumeTarget(this)}:C$l,stopAllActions:C$s?function(){cc.director.getActionManager().removeAllActionsFromTarget(this)}:C$l,stopAction:C$s?function(C$t){cc.director.getActionManager().removeAction(C$t)}:C$l,stopActionByTag:C$s?function(C$t){C$t!==cc.Action.TAG_INVALID?cc.director.getActionManager().removeActionByTag(C$t,this):cc.logID(1612)}:C$l,getActionByTag:C$s?function(C$t){return C$t===cc.Action.TAG_INVALID?(cc.logID(1613),null):cc.director.getActionManager().getActionByTag(C$t,this)}:function(){return null},getNumberOfRunningActions:C$s?function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this)}:function(){return 0},getPosition:function(C$t){return C$t=C$t||new C$p.Vec3,C$p.Trs.toPosition(C$t,this._trs)},setPosition:function(C$t,C$e,C$i){C$i=void 0===C$e?(C$n=C$t.x,C$e=C$t.y,C$t.z||0):(C$n=C$t,C$i||0);var C$n,C$t=this._trs;C$t[0]===C$n&&C$t[1]===C$e&&C$t[2]===C$i||(C$t[0]=C$n,C$t[1]=C$e,C$t[2]=C$i,this.setLocalDirty(C$h.ALL_POSITION),this._renderFlag|=C$r.FLAG_WORLD_TRANSFORM,1&this._eventMask&&this.emit(C$c.POSITION_CHANGED))},getScale:function(C$t){return void 0!==C$t?C$p.Trs.toScale(C$t,this._trs):(cc.errorID(1400,"cc.Node.getScale","cc.Node.scale or cc.Node.getScale(cc.Vec3)"),this._trs[7])},setScale:function(C$t,C$e,C$i){C$t&&"number"!=typeof C$t?(C$e=C$t.y,C$i=void 0===C$t.z?1:C$t.z,C$t=C$t.x):void 0!==C$t&&void 0===C$e?C$i=C$e=C$t:void 0===C$i&&(C$i=1);var C$n=this._trs;C$n[7]===C$t&&C$n[8]===C$e&&C$n[9]===C$i||(C$n[7]=C$t,C$n[8]=C$e,C$n[9]=C$i,this.setLocalDirty(C$h.ALL_SCALE),this._renderFlag|=C$r.FLAG_TRANSFORM,2&this._eventMask&&this.emit(C$c.SCALE_CHANGED))},getRotation:function(C$t){return C$t instanceof C$p.Quat?C$p.Trs.toRotation(C$t,this._trs):(cc.warn("`cc.Node.getRotation()` is deprecated since v2.1.0, please use `-cc.Node.angle` instead. (`this.node.getRotation()` -> `-this.node.angle`)"),-this.angle)},setRotation:function(C$t,C$e,C$i,C$n){var C$r;"number"==typeof C$t&&void 0===C$e?(cc.warn("`cc.Node.setRotation(degree)` is deprecated since v2.1.0, please set `-cc.Node.angle` instead. (`this.node.setRotation(x)` -> `this.node.angle = -x`)"),this.angle=-C$t):(C$r=C$t,void 0===C$e&&(C$r=C$t.x,C$e=C$t.y,C$i=C$t.z,C$n=C$t.w),(C$t=this._trs)[3]===C$r&&C$t[4]===C$e&&C$t[5]===C$i&&C$t[6]===C$n||(C$t[3]=C$r,C$t[4]=C$e,C$t[5]=C$i,C$t[6]=C$n,this.setLocalDirty(C$h.ALL_ROTATION),4&this._eventMask&&this.emit(C$c.ROTATION_CHANGED)))},getContentSize:function(){return cc.size(this._contentSize.width,this._contentSize.height)},setContentSize:function(C$t,C$e){var C$i=this._contentSize;if(void 0===C$e){if(C$t.width===C$i.width&&C$t.height===C$i.height)return;C$i.width=C$t.width,C$i.height=C$t.height}else{if(C$t===C$i.width&&C$e===C$i.height)return;C$i.width=C$t,C$i.height=C$e}8&this._eventMask&&this.emit(C$c.SIZE_CHANGED)},getAnchorPoint:function(){return cc.v2(this._anchorPoint)},setAnchorPoint:function(C$t,C$e){var C$i=this._anchorPoint;if(void 0===C$e){if(C$t.x===C$i.x&&C$t.y===C$i.y)return;C$i.x=C$t.x,C$i.y=C$t.y}else{if(C$t===C$i.x&&C$e===C$i.y)return;C$i.x=C$t,C$i.y=C$e}this.setLocalDirty(C$h.ALL_POSITION),16&this._eventMask&&this.emit(C$c.ANCHOR_CHANGED)},_invTransformPoint:function(C$t,C$e){this._parent?this._parent._invTransformPoint(C$t,C$e):C$p.Vec3.copy(C$t,C$e);C$e=this._trs;return C$p.Trs.toPosition(C$P,C$e),C$p.Vec3.sub(C$t,C$t,C$P),C$p.Trs.toRotation(C$L,C$e),C$p.Quat.conjugate(C$V,C$L),C$p.Vec3.transformQuat(C$t,C$t,C$V),C$p.Trs.toScale(C$P,C$e),C$p.Vec3.inverseSafe(C$D,C$P),C$p.Vec3.mul(C$t,C$t,C$D),C$t},getWorldPosition:function(C$t){C$p.Trs.toPosition(C$t,this._trs);for(var C$e,C$i=this._parent;C$i;)C$e=C$i._trs,C$p.Trs.toScale(C$B,C$e),C$p.Vec3.mul(C$t,C$t,C$B),C$p.Trs.toRotation(C$R,C$e),C$p.Vec3.transformQuat(C$t,C$t,C$R),C$p.Trs.toPosition(C$B,C$e),C$p.Vec3.add(C$t,C$t,C$B),C$i=C$i._parent;return C$t},setWorldPosition:function(C$t){var C$e=this._trs;this._parent?this._parent._invTransformPoint(C$O,C$t):C$p.Vec3.copy(C$O,C$t),C$p.Trs.fromPosition(C$e,C$O),this.setLocalDirty(C$h.ALL_POSITION),1&this._eventMask&&this.emit(C$c.POSITION_CHANGED)},getWorldRotation:function(C$t){C$p.Trs.toRotation(C$J,this._trs),C$p.Quat.copy(C$t,C$J);for(var C$e=this._parent;C$e;)C$p.Trs.toRotation(C$J,C$e._trs),C$p.Quat.mul(C$t,C$J,C$t),C$e=C$e._parent;return C$t},setWorldRotation:function(C$t){this._parent?(this._parent.getWorldRotation(C$Z),C$p.Quat.conjugate(C$Z,C$Z),C$p.Quat.mul(C$Z,C$Z,C$t)):C$p.Quat.copy(C$Z,C$t),C$p.Trs.fromRotation(this._trs,C$Z),this.setLocalDirty(C$h.ALL_ROTATION)},getWorldScale:function(C$t){C$p.Trs.toScale(C$F,this._trs),C$p.Vec3.copy(C$t,C$F);for(var C$e=this._parent;C$e;)C$p.Trs.toScale(C$F,C$e._trs),C$p.Vec3.mul(C$t,C$t,C$F),C$e=C$e._parent;return C$t},setWorldScale:function(C$t){this._parent?(this._parent.getWorldScale(C$N),C$p.Vec3.div(C$N,C$t,C$N)):C$p.Vec3.copy(C$N,C$t),C$p.Trs.fromScale(this._trs,C$N),this.setLocalDirty(C$h.ALL_SCALE)},getWorldRT:function(C$t){for(var C$e=C$k,C$i=C$z,C$n=this._trs,C$r=(C$p.Trs.toPosition(C$e,C$n),C$p.Trs.toRotation(C$i,C$n),this._parent);C$r;)C$n=C$r._trs,C$p.Trs.toScale(C$G,C$n),C$p.Vec3.mul(C$e,C$e,C$G),C$p.Trs.toRotation(C$U,C$n),C$p.Vec3.transformQuat(C$e,C$e,C$U),C$p.Trs.toPosition(C$G,C$n),C$p.Vec3.add(C$e,C$e,C$G),C$p.Quat.mul(C$i,C$U,C$i),C$r=C$r._parent;return C$p.Mat4.fromRT(C$t,C$i,C$e),C$t},lookAt:function(C$t,C$e){this.getWorldPosition(C$W),C$p.Vec3.sub(C$W,C$W,C$t),C$p.Vec3.normalize(C$W,C$W),C$p.Quat.fromViewUp(C$H,C$W,C$e),this.setWorldRotation(C$H)},_updateLocalMatrix:C$at,_calculWorldMatrix:function(){this._localMatDirty&C$h.TRSS&&this._updateLocalMatrix();var C$t=this._parent;C$t?this._mulMat(this._worldMatrix,C$t._worldMatrix,this._matrix):C$p.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1},_mulMat:C$ht,_updateWorldMatrix:function(){if(this._parent&&this._parent._updateWorldMatrix(),this._worldMatDirty){this._calculWorldMatrix();for(var C$t=this._children,C$e=0,C$i=C$t.length;C$e<C$i;C$e++)C$t[C$e]._worldMatDirty=!0}},setLocalDirty:function(C$t){this._localMatDirty|=C$t,this._worldMatDirty=!0,C$t===C$h.ALL_POSITION||C$t===C$h.POSITION?this._renderFlag|=C$r.FLAG_WORLD_TRANSFORM:this._renderFlag|=C$r.FLAG_TRANSFORM},setWorldDirty:function(){this._worldMatDirty=!0},getLocalMatrix:function(C$t){return this._updateLocalMatrix(),C$p.Mat4.copy(C$t,this._matrix)},getWorldMatrix:function(C$t){return this._updateWorldMatrix(),C$p.Mat4.copy(C$t,this._worldMatrix)},convertToNodeSpaceAR:function(C$t,C$e){return this._updateWorldMatrix(),C$p.Mat4.invert(C$m,this._worldMatrix),C$t instanceof cc.Vec2?(C$e=C$e||new cc.Vec2,C$p.Vec2.transformMat4(C$e,C$t,C$m)):(C$e=C$e||new cc.Vec3,C$p.Vec3.transformMat4(C$e,C$t,C$m))},convertToWorldSpaceAR:function(C$t,C$e){return this._updateWorldMatrix(),C$t instanceof cc.Vec2?(C$e=C$e||new cc.Vec2,C$p.Vec2.transformMat4(C$e,C$t,this._worldMatrix)):(C$e=C$e||new cc.Vec3,C$p.Vec3.transformMat4(C$e,C$t,this._worldMatrix))},convertToNodeSpace:function(C$t){this._updateWorldMatrix(),C$p.Mat4.invert(C$m,this._worldMatrix);var C$e=new cc.Vec2;return C$p.Vec2.transformMat4(C$e,C$t,C$m),C$e.x+=this._anchorPoint.x*this._contentSize.width,C$e.y+=this._anchorPoint.y*this._contentSize.height,C$e},convertToWorldSpace:function(C$t){this._updateWorldMatrix();C$t=new cc.Vec2(C$t.x-this._anchorPoint.x*this._contentSize.width,C$t.y-this._anchorPoint.y*this._contentSize.height);return C$p.Vec2.transformMat4(C$t,C$t,this._worldMatrix)},getNodeToParentTransform:function(C$t){C$t=C$t||C$i.identity(),this._updateLocalMatrix();var C$e=this._contentSize;return C$K.x=-this._anchorPoint.x*C$e.width,C$K.y=-this._anchorPoint.y*C$e.height,C$p.Mat4.copy(C$m,this._matrix),C$p.Mat4.transform(C$m,C$m,C$K),C$i.fromMat4(C$t,C$m)},getNodeToParentTransformAR:function(C$t){return C$t=C$t||C$i.identity(),this._updateLocalMatrix(),C$i.fromMat4(C$t,this._matrix)},getNodeToWorldTransform:function(C$t){C$t=C$t||C$i.identity(),this._updateWorldMatrix();var C$e=this._contentSize;return C$K.x=-this._anchorPoint.x*C$e.width,C$K.y=-this._anchorPoint.y*C$e.height,C$p.Mat4.copy(C$m,this._worldMatrix),C$p.Mat4.transform(C$m,C$m,C$K),C$i.fromMat4(C$t,C$m)},getNodeToWorldTransformAR:function(C$t){return C$t=C$t||C$i.identity(),this._updateWorldMatrix(),C$i.fromMat4(C$t,this._worldMatrix)},getParentToNodeTransform:function(C$t){return C$t=C$t||C$i.identity(),this._updateLocalMatrix(),C$p.Mat4.invert(C$m,this._matrix),C$i.fromMat4(C$t,C$m)},getWorldToNodeTransform:function(C$t){return C$t=C$t||C$i.identity(),this._updateWorldMatrix(),C$p.Mat4.invert(C$m,this._worldMatrix),C$i.fromMat4(C$t,C$m)},convertTouchToNodeSpace:function(C$t){return this.convertToNodeSpace(C$t.getLocation())},convertTouchToNodeSpaceAR:function(C$t){return this.convertToNodeSpaceAR(C$t.getLocation())},getBoundingBox:function(){this._updateLocalMatrix();var C$t=this._contentSize.width,C$e=this._contentSize.height,C$t=cc.rect(-this._anchorPoint.x*C$t,-this._anchorPoint.y*C$e,C$t,C$e);return C$t.transformMat4(C$t,this._matrix)},getBoundingBoxToWorld:function(){return this._parent?(this._parent._updateWorldMatrix(),this._getBoundingBoxTo()):this.getBoundingBox()},_getBoundingBoxTo:function(){var C$t=this._contentSize.width,C$e=this._contentSize.height,C$i=cc.rect(-this._anchorPoint.x*C$t,-this._anchorPoint.y*C$e,C$t,C$e);if(this._calculWorldMatrix(),C$i.transformMat4(C$i,this._worldMatrix),!this._children)return C$i;for(var C$n=this._children,C$r=0;C$r<C$n.length;C$r++){var C$s=C$n[C$r];C$s&&C$s.active&&((C$s=C$s._getBoundingBoxTo())&&C$i.union(C$i,C$s))}return C$i},_updateOrderOfArrival:function(){var C$t=this._parent?++this._parent._childArrivalOrder:0;this._localZOrder=4294901760&this._localZOrder|C$t,this.emit(C$c.SIBLING_ORDER_CHANGED)},addChild:function(C$t,C$e,C$i){cc.assertID(C$t,1606),cc.assertID(null===C$t._parent,1605),C$t.parent=this,void 0!==C$e&&(C$t.zIndex=C$e),void 0!==C$i&&(C$t.name=C$i)},cleanup:function(){C$s&&cc.director.getActionManager().removeAllActionsFromTarget(this),C$a.removeListeners(this);for(var C$t,C$e=this._children.length,C$i=0;C$i<C$e;++C$i)(C$t=this._children[C$i])&&C$t.cleanup()},sortAllChildren:function(){if(this._reorderChildDirty){this._reorderChildDirty=!1;var C$t=this._children;this._childArrivalOrder=1;for(var C$e=0,C$i=C$t.length;C$e<C$i;C$e++)(C$r=C$t[C$e])._updateOrderOfArrival();if(C$a._setDirtyForNode(this),1<C$t.length){for(var C$n,C$r,C$s=1,C$o=C$t.length;C$s<C$o;C$s++){for(C$r=C$t[C$s],C$n=C$s-1;0<=C$n&&C$r._localZOrder<C$t[C$n]._localZOrder;)C$t[C$n+1]=C$t[C$n],C$n--;C$t[C$n+1]=C$r}this.emit(C$c.CHILD_REORDER,this)}cc.director.__fastOff(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this)}},_delaySort:function(){this._reorderChildDirty||(this._reorderChildDirty=!0,cc.director.__fastOn(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this))},_restoreProperties:!1,onRestore:!1},C$_t=cc.Class(C$A),C$t=C$_t.prototype;C$w.getset(C$t,"position",C$t.getPosition,C$t.setPosition,!1,!0),cc.Node=C$e.exports=C$_t},{"./event-manager":113,"./event/event":116,"./event/event-target":115,"./platform/CCMacro":194,"./platform/js":209,"./renderer/render-flow":221,"./utils/affine-transform":254,"./utils/base-node":255,"./utils/prefab-helper":267,"./utils/trans-pool":273,"./value-types":279}],31:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./CCNode"),C$r=C$t("./renderer/render-flow"),C$s=(cc.Object.Flags.HideInHierarchy,C$n._LocalDirtyFlag),C$t=cc.Class({name:"cc.PrivateNode",extends:C$n,properties:{x:{get:function(){return this._originPos.x},set:function(C$t){var C$e=this._originPos;C$t!==C$e.x&&(C$e.x=C$t,this._posDirty(!0))},override:!0},y:{get:function(){return this._originPos.y},set:function(C$t){var C$e=this._originPos;C$t!==C$e.y&&(C$e.y=C$t,this._posDirty(!0))},override:!0},zIndex:{get:function(){return cc.macro.MIN_ZINDEX},set:function(){cc.warnID(1638)},override:!0},showInEditor:{default:!1,editorOnly:!0,override:!0}},ctor:function(C$t){this._localZOrder=cc.macro.MIN_ZINDEX<<16,this._originPos=cc.v2()},_posDirty:function(C$t){this.setLocalDirty(C$s.POSITION),this._renderFlag|=C$r.FLAG_TRANSFORM,!0===C$t&&1&this._eventMask&&this.emit(C$n.EventType.POSITION_CHANGED)},_updateLocalMatrix:function(){var C$t;this._localMatDirty&&((C$t=this.parent)&&(this._trs[0]=this._originPos.x-(C$t._anchorPoint.x-.5)*C$t._contentSize.width,this._trs[1]=this._originPos.y-(C$t._anchorPoint.y-.5)*C$t._contentSize.height),this._super())},getPosition:function(){return new cc.Vec2(this._originPos)},setPosition:function(C$t,C$e){void 0===C$e&&(C$e=(C$t=C$t.x).y);var C$i=this._originPos;C$i.x===C$t&&C$i.y===C$e||(C$i.x=C$t,C$i.y=C$e,this._posDirty(!0))},setParent:function(C$t){var C$e=this._parent;this._super(C$t),C$e!==C$t&&(C$e&&C$e.off(C$n.EventType.ANCHOR_CHANGED,this._posDirty,this),C$t&&C$t.on(C$n.EventType.ANCHOR_CHANGED,this._posDirty,this))},_updateOrderOfArrival:function(){}});cc.js.getset(C$t.prototype,"parent",C$t.prototype.getParent,C$t.prototype.setParent),cc.js.getset(C$t.prototype,"position",C$t.prototype.getPosition,C$t.prototype.setPosition),cc.PrivateNode=C$e.exports=C$t},{"./CCNode":30,"./renderer/render-flow":221}],32:[function(C$t,C$e,C$i){"use strict";cc.Scene=cc.Class({name:"cc.Scene",extends:C$t("./CCNode"),properties:{_is3DNode:{default:!0,override:!0},autoReleaseAssets:{default:void 0,type:cc.Boolean}},ctor:function(){this._anchorPoint.x=0,this._anchorPoint.y=0,this._activeInHierarchy=!1,this._inited=!cc.game._isCloning,this.dependAssets=null},destroy:function(){if(cc.Object.prototype.destroy.call(this))for(var C$t=this._children,C$e=0;C$e<C$t.length;++C$e)C$t[C$e].active=!1;this._active=!1,this._activeInHierarchy=!1},_onHierarchyChanged:function(){},_instantiate:null,_load:function(){this._inited||(this._onBatchCreated(),this._inited=!0)},_activate:function(C$t){C$t=!1!==C$t,cc.director._nodeActivator.activateNode(this,C$t)}}),C$e.exports=cc.Scene},{"./CCNode":30}],33:[function(C$t,C$n,C$r){"use strict";function C$o(C$t,C$e,C$i,C$n){this.target=C$t,this.priority=C$e,this.paused=C$i,this.markedForDeletion=C$n}function C$a(C$t,C$e,C$i,C$n){this.list=C$t,this.entry=C$e,this.target=C$i,this.callback=C$n}function C$h(C$t,C$e,C$i,C$n,C$r,C$s){this.timers=C$t,this.target=C$e,this.timerIndex=C$i,this.currentTimer=C$n,this.currentTimerSalvaged=C$r,this.paused=C$s}var C$e=C$t("./platform/js"),C$t=C$t("./platform/id-generater"),C$_=new C$t("Scheduler"),C$s=[],C$c=(C$o.get=function(C$t,C$e,C$i,C$n){var C$r=C$s.pop();return C$r?(C$r.target=C$t,C$r.priority=C$e,C$r.paused=C$i,C$r.markedForDeletion=C$n):C$r=new C$o(C$t,C$e,C$i,C$n),C$r},C$o.put=function(C$t){C$s.length<20&&(C$t.target=null,C$s.push(C$t))},[]),C$l=(C$a.get=function(C$t,C$e,C$i,C$n){var C$r=C$c.pop();return C$r?(C$r.list=C$t,C$r.entry=C$e,C$r.target=C$i,C$r.callback=C$n):C$r=new C$a(C$t,C$e,C$i,C$n),C$r},C$a.put=function(C$t){C$c.length<20&&(C$t.list=C$t.entry=C$t.target=C$t.callback=null,C$c.push(C$t))},[]);function C$u(){this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null,this._callback=null}C$h.get=function(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=C$l.pop();return C$o?(C$o.timers=C$t,C$o.target=C$e,C$o.timerIndex=C$i,C$o.currentTimer=C$n,C$o.currentTimerSalvaged=C$r,C$o.paused=C$s):C$o=new C$h(C$t,C$e,C$i,C$n,C$r,C$s),C$o},C$h.put=function(C$t){C$l.length<20&&(C$t.timers=C$t.target=C$t.currentTimer=null,C$l.push(C$t))};var C$t=C$u.prototype,C$i=(C$t.initWithCallback=function(C$t,C$e,C$i,C$n,C$r,C$s){return this._lock=!1,this._scheduler=C$t,this._target=C$i,this._callback=C$e,this._elapsed=-1,this._interval=C$n,this._delay=C$s,this._useDelay=0<this._delay,this._repeat=C$r,this._runForever=this._repeat===cc.macro.REPEAT_FOREVER,!0},C$t.getInterval=function(){return this._interval},C$t.setInterval=function(C$t){this._interval=C$t},C$t.update=function(C$t){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=C$t,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},C$t.getCallback=function(){return this._callback},C$t.trigger=function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)},C$t.cancel=function(){this._scheduler.unschedule(this._callback,this._target)},[]);C$u.get=function(){return C$i.pop()||new C$u},C$u.put=function(C$t){C$i.length<20&&!C$t._lock&&(C$t._scheduler=C$t._target=C$t._callback=null,C$i.push(C$t))},cc.Scheduler=function(){this._timeScale=1,this._updatesNegList=[],this._updates0List=[],this._updatesPosList=[],this._hashForUpdates=C$e.createMap(!0),this._hashForTimers=C$e.createMap(!0),this._currentTarget=null,this._currentTargetSalvaged=!1,this._updateHashLocked=!1,this._arrayForTimers=[]},cc.Scheduler.prototype={constructor:cc.Scheduler,_removeHashElement:function(C$t){delete this._hashForTimers[C$t.target._id];for(var C$e=this._arrayForTimers,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i]===C$t){C$e.splice(C$i,1);break}C$h.put(C$t)},_removeUpdateFromHash:function(C$t){var C$t=C$t.target._id,C$e=this._hashForUpdates[C$t];if(C$e){for(var C$i=C$e.list,C$n=C$e.entry,C$r=0,C$s=C$i.length;C$r<C$s;C$r++)if(C$i[C$r]===C$n){C$i.splice(C$r,1);break}delete this._hashForUpdates[C$t],C$o.put(C$n),C$a.put(C$e)}},_priorityIn:function(C$t,C$e,C$i){for(var C$n=0;C$n<C$t.length;C$n++)if(C$i<C$t[C$n].priority)return void C$t.splice(C$n,0,C$e);C$t.push(C$e)},_appendIn:function(C$t,C$e){C$t.push(C$e)},enableForTarget:function(C$t){C$t._id||(C$t.__instanceId?cc.warnID(1513):C$t._id=C$_.getNewId())},setTimeScale:function(C$t){this._timeScale=C$t},getTimeScale:function(){return this._timeScale},update:function(C$t){var C$e,C$i,C$n;for(this._updateHashLocked=!0,1!==this._timeScale&&(C$t*=this._timeScale),C$o=0,C$i=(C$e=this._updatesNegList).length;C$o<C$i;C$o++)(C$n=C$e[C$o]).paused||C$n.markedForDeletion||C$n.target.update(C$t);for(C$o=0,C$i=(C$e=this._updates0List).length;C$o<C$i;C$o++)(C$n=C$e[C$o]).paused||C$n.markedForDeletion||C$n.target.update(C$t);for(C$o=0,C$i=(C$e=this._updatesPosList).length;C$o<C$i;C$o++)(C$n=C$e[C$o]).paused||C$n.markedForDeletion||C$n.target.update(C$t);for(var C$r,C$s=this._arrayForTimers,C$o=0;C$o<C$s.length;C$o++){if(C$r=C$s[C$o],this._currentTarget=C$r,this._currentTargetSalvaged=!1,!C$r.paused)for(C$r.timerIndex=0;C$r.timerIndex<C$r.timers.length;++C$r.timerIndex)C$r.currentTimer=C$r.timers[C$r.timerIndex],C$r.currentTimerSalvaged=!1,C$r.currentTimer.update(C$t),C$r.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&(this._removeHashElement(this._currentTarget),--C$o)}for(C$o=0,C$e=this._updatesNegList;C$o<C$e.length;)(C$n=C$e[C$o]).markedForDeletion?this._removeUpdateFromHash(C$n):C$o++;for(C$o=0,C$e=this._updates0List;C$o<C$e.length;)(C$n=C$e[C$o]).markedForDeletion?this._removeUpdateFromHash(C$n):C$o++;for(C$o=0,C$e=this._updatesPosList;C$o<C$e.length;)(C$n=C$e[C$o]).markedForDeletion?this._removeUpdateFromHash(C$n):C$o++;this._updateHashLocked=!1,this._currentTarget=null},schedule:function(C$t,C$e,C$i,C$n,C$l,C$r){"function"!=typeof C$t&&(C$a=C$t,C$t=C$e,C$e=C$a),4!==arguments.length&&5!==arguments.length||(C$r=!!C$n,C$n=cc.macro.REPEAT_FOREVER,C$l=0),cc.assertID(C$e,1502);var C$s,C$o,C$a=C$e._id,C$c=(C$a||(C$e.__instanceId?(cc.warnID(1513),C$a=C$e._id=C$e.__instanceId):cc.errorID(1510)),this._hashForTimers[C$a]);if(C$c?C$c.paused!==C$r&&cc.warnID(1511):(C$c=C$h.get(null,C$e,0,null,null,C$r),this._arrayForTimers.push(C$c),this._hashForTimers[C$a]=C$c),null==C$c.timers)C$c.timers=[];else for(C$o=0;C$o<C$c.timers.length;++C$o)if((C$s=C$c.timers[C$o])&&C$t===C$s._callback)return cc.logID(1507,C$s.getInterval(),C$i),void(C$s._interval=C$i);(C$s=C$u.get()).initWithCallback(this,C$t,C$e,C$i,C$n,C$l),C$c.timers.push(C$s),this._currentTarget===C$c&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)},scheduleUpdate:function(C$t,C$e,C$i){var C$n=C$t._id,C$r=(C$n||(C$t.__instanceId?(cc.warnID(1513),C$n=C$t._id=C$t.__instanceId):cc.errorID(1510)),this._hashForUpdates[C$n]);if(C$r&&C$r.entry){if(C$r.entry.priority===C$e)return C$r.entry.markedForDeletion=!1,void(C$r.entry.paused=C$i);if(this._updateHashLocked)return cc.logID(1506),C$r.entry.markedForDeletion=!1,void(C$r.entry.paused=C$i);this.unscheduleUpdate(C$t)}var C$s,C$r=C$o.get(C$t,C$e,C$i,!1);0===C$e?(C$s=this._updates0List,this._appendIn(C$s,C$r)):(C$s=C$e<0?this._updatesNegList:this._updatesPosList,this._priorityIn(C$s,C$r,C$e)),this._hashForUpdates[C$n]=C$a.get(C$s,C$r,C$t,null)},unschedule:function(C$t,C$e){if(C$e&&C$t){var C$i=C$e._id,C$n=(C$i||(C$e.__instanceId?(cc.warnID(1513),C$i=C$e._id=C$e.__instanceId):cc.errorID(1510)),this._hashForTimers[C$i]);if(C$n)for(var C$r=C$n.timers,C$s=0,C$o=C$r.length;C$s<C$o;C$s++){var C$a=C$r[C$s];if(C$t===C$a._callback)return C$a!==C$n.currentTimer||C$n.currentTimerSalvaged||(C$n.currentTimerSalvaged=!0),C$r.splice(C$s,1),C$u.put(C$a),C$n.timerIndex>=C$s&&C$n.timerIndex--,void(0===C$r.length&&(this._currentTarget===C$n?this._currentTargetSalvaged=!0:this._removeHashElement(C$n)))}}},unscheduleUpdate:function(C$t){var C$e;C$t&&((C$e=C$t._id)||(C$t.__instanceId?(cc.warnID(1513),C$e=C$t._id=C$t.__instanceId):cc.errorID(1510)),(C$t=this._hashForUpdates[C$e])&&(this._updateHashLocked?C$t.entry.markedForDeletion=!0:this._removeUpdateFromHash(C$t.entry)))},unscheduleAllForTarget:function(C$t){if(C$t){var C$e=C$t._id,C$e=(C$e||(C$t.__instanceId?(cc.warnID(1513),C$e=C$t._id=C$t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$e]);if(C$e){var C$i=C$e.timers;-1<C$i.indexOf(C$e.currentTimer)&&!C$e.currentTimerSalvaged&&(C$e.currentTimerSalvaged=!0);for(var C$n=0,C$r=C$i.length;C$n<C$r;C$n++)C$u.put(C$i[C$n]);C$i.length=0,this._currentTarget===C$e?this._currentTargetSalvaged=!0:this._removeHashElement(C$e)}this.unscheduleUpdate(C$t)}},unscheduleAll:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllWithMinPriority:function(C$t){for(var C$e,C$i,C$n=this._arrayForTimers,C$r=C$n.length-1;0<=C$r;C$r--)C$e=C$n[C$r],this.unscheduleAllForTarget(C$e.target);var C$s=0;if(C$t<0)for(C$r=0;C$r<this._updatesNegList.length;)C$s=this._updatesNegList.length,(C$i=this._updatesNegList[C$r])&&C$i.priority>=C$t&&this.unscheduleUpdate(C$i.target),C$s==this._updatesNegList.length&&C$r++;if(C$t<=0)for(C$r=0;C$r<this._updates0List.length;)C$s=this._updates0List.length,(C$i=this._updates0List[C$r])&&this.unscheduleUpdate(C$i.target),C$s==this._updates0List.length&&C$r++;for(C$r=0;C$r<this._updatesPosList.length;)C$s=this._updatesPosList.length,(C$i=this._updatesPosList[C$r])&&C$i.priority>=C$t&&this.unscheduleUpdate(C$i.target),C$s==this._updatesPosList.length&&C$r++},isScheduled:function(C$t,C$e){cc.assertID(C$t,1508),cc.assertID(C$e,1509);var C$i=C$e._id,C$e=(C$i||(C$e.__instanceId?(cc.warnID(1513),C$i=C$e._id=C$e.__instanceId):cc.errorID(1510)),this._hashForTimers[C$i]);if(!C$e)return!1;if(null==C$e.timers)return!1;for(var C$n=C$e.timers,C$r=0;C$r<C$n.length;++C$r)if(C$t===C$n[C$r]._callback)return!0;return!1},pauseAllTargets:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},pauseAllTargetsWithMinPriority:function(C$t){for(var C$e,C$i,C$n=[],C$r=this._arrayForTimers,C$s=0,C$o=C$r.length;C$s<C$o;C$s++)(C$e=C$r[C$s])&&(C$e.paused=!0,C$n.push(C$e.target));if(C$t<0)for(C$s=0;C$s<this._updatesNegList.length;C$s++)(C$i=this._updatesNegList[C$s])&&C$i.priority>=C$t&&(C$i.paused=!0,C$n.push(C$i.target));if(C$t<=0)for(C$s=0;C$s<this._updates0List.length;C$s++)(C$i=this._updates0List[C$s])&&(C$i.paused=!0,C$n.push(C$i.target));for(C$s=0;C$s<this._updatesPosList.length;C$s++)(C$i=this._updatesPosList[C$s])&&C$i.priority>=C$t&&(C$i.paused=!0,C$n.push(C$i.target));return C$n},resumeTargets:function(C$t){if(C$t)for(var C$e=0;C$e<C$t.length;C$e++)this.resumeTarget(C$t[C$e])},pauseTarget:function(C$t){cc.assertID(C$t,1503);var C$e=C$t._id,C$t=(C$e||(C$t.__instanceId?(cc.warnID(1513),C$e=C$t._id=C$t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$e]),C$t=(C$t&&(C$t.paused=!0),this._hashForUpdates[C$e]);C$t&&(C$t.entry.paused=!0)},resumeTarget:function(C$t){cc.assertID(C$t,1504);var C$e=C$t._id,C$t=(C$e||(C$t.__instanceId?(cc.warnID(1513),C$e=C$t._id=C$t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$e]),C$t=(C$t&&(C$t.paused=!1),this._hashForUpdates[C$e]);C$t&&(C$t.entry.paused=!1)},isTargetPaused:function(C$t){cc.assertID(C$t,1505);var C$e=C$t._id,C$t=(C$e||(C$t.__instanceId?(cc.warnID(1513),C$e=C$t._id=C$t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$e]);if(C$t)return C$t.paused;C$t=this._hashForUpdates[C$e];return!!C$t&&C$t.entry.paused}},cc.Scheduler.PRIORITY_SYSTEM=1<<31,cc.Scheduler.PRIORITY_NON_SYSTEM=cc.Scheduler.PRIORITY_SYSTEM+1,C$n.exports=cc.Scheduler},{"./platform/id-generater":205,"./platform/js":209}],34:[function(C$t,C$e,C$i){"use strict";C$t=C$t("./CCRawAsset");cc.Asset=cc.Class({name:"cc.Asset",extends:C$t,ctor:function(){this.loaded=!0,this.url=""},properties:{nativeUrl:{get:function(){if(this._native){var C$t,C$e=this._native;if(47===C$e.charCodeAt(0))return C$e.slice(1);if(cc.AssetLibrary)return C$t=cc.AssetLibrary.getLibUrlNoExt(this._uuid,!0),46===C$e.charCodeAt(0)?C$t+C$e:C$t+"/"+C$e;cc.errorID(6400)}return""},visible:!1},_native:"",_nativeAsset:{get:function(){return this._$nativeAsset},set:function(C$t){this._$nativeAsset=C$t}}},statics:{deserialize:!1,preventDeferredLoadDependents:!1,preventPreloadNativeObject:!1},toString:function(){return this.nativeUrl},serialize:!1,createNode:null,_setRawAsset:function(C$t,C$e){this._native=!1!==C$e?C$t||void 0:"/"+C$t}}),C$e.exports=cc.Asset},{"./CCRawAsset":42}],35:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./CCAsset"),C$t=C$t("../event/event-target"),C$r=cc.Enum({WEB_AUDIO:0,DOM_AUDIO:1}),C$s=cc.Class({name:"cc.AudioClip",extends:C$n,mixins:[C$t],ctor:function(){this.loaded=!1,this._audio=null},properties:{loadMode:{default:C$r.WEB_AUDIO,type:C$r},_nativeAsset:{get:function(){return this._audio},set:function(C$t){C$t instanceof cc.AudioClip?this._audio=C$t._nativeAsset:this._audio=C$t,this._audio&&(this.loaded=!0,this.emit("load"))},override:!0}},statics:{LoadMode:C$r,_loadByUrl:function(C$i,C$n){var C$r=cc.loader.getItem(C$i)||cc.loader.getItem(C$i+"?useDom=1");C$r&&C$r.complete?C$r._owner instanceof C$s?C$n(null,C$r._owner):C$n(null,C$r.content):cc.loader.load(C$i,function(C$t,C$e){if(C$t)return C$n(C$t);C$r=cc.loader.getItem(C$i)||cc.loader.getItem(C$i+"?useDom=1"),C$n(null,C$r.content)})}},destroy:function(){cc.audioEngine.uncache(this),this._super()}});cc.AudioClip=C$s,C$e.exports=C$s},{"../event/event-target":115,"./CCAsset":34}],36:[function(C$t,C$e,C$i){"use strict";function C$s(){this.u=0,this.v=0,this.w=0,this.h=0,this.offsetX=0,this.offsetY=0,this.textureID=0,this.valid=!1,this.xAdvance=0}function C$o(C$t){this._letterDefinitions={},this._texture=C$t}C$o.prototype={constructor:C$o,addLetterDefinitions:function(C$t,C$e){this._letterDefinitions[C$t]=C$e},cloneLetterDefinition:function(){var C$t,C$e={};for(C$t in this._letterDefinitions){var C$i=new C$s;cc.js.mixin(C$i,this._letterDefinitions[C$t]),C$e[C$t]=C$i}return C$e},getTexture:function(){return this._texture},getLetter:function(C$t){return this._letterDefinitions[C$t]},getLetterDefinitionForChar:function(C$t){C$t=C$t.charCodeAt(0);return this._letterDefinitions.hasOwnProperty(C$t)?this._letterDefinitions[C$t]:null},clear:function(){this._letterDefinitions={}}};var C$n=cc.Class({name:"cc.BitmapFont",extends:cc.Font,properties:{fntDataStr:{default:""},spriteFrame:{default:null,type:cc.SpriteFrame},fontSize:{default:-1},_fntConfig:null,_fontDefDictionary:null},onLoad:function(){var C$t=this.spriteFrame,C$t=(!this._fontDefDictionary&&C$t&&(this._fontDefDictionary=new C$o(C$t._texture)),this._fntConfig);if(C$t){var C$e,C$i=C$t.fontDefDictionary;for(C$e in C$i){var C$n=new C$s,C$r=C$i[C$e].rect;C$n.offsetX=C$i[C$e].xOffset,C$n.offsetY=C$i[C$e].yOffset,C$n.w=C$r.width,C$n.h=C$r.height,C$n.u=C$r.x,C$n.v=C$r.y,C$n.textureID=0,C$n.valid=!0,C$n.xAdvance=C$i[C$e].xAdvance,this._fontDefDictionary.addLetterDefinitions(C$e,C$n)}}}});cc.BitmapFont=C$n,cc.BitmapFont.FontLetterDefinition=C$s,cc.BitmapFont.FontAtlas=C$o,C$e.exports=C$n},{}],37:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.BufferAsset",extends:cc.Asset,ctor:function(){this._buffer=null},properties:{_nativeAsset:{get:function(){return this._buffer},set:function(C$t){this._buffer=C$t.buffer||C$t},override:!0},buffer:function(){return this._buffer}}});cc.BufferAsset=C$e.exports=C$n},{}],38:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.Font",extends:cc.Asset});cc.Font=C$e.exports=C$n},{}],39:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.JsonAsset",extends:cc.Asset,properties:{json:null}});C$e.exports=cc.JsonAsset=C$n},{}],40:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.LabelAtlas",extends:cc.BitmapFont,onLoad:function(){this.spriteFrame?this._fntConfig?this._super():cc.warnID(9101,this.name):cc.warnID(9100,this.name)}});cc.LabelAtlas=C$n,C$e.exports=C$n},{}],41:[function(C$e,C$t,C$i){"use strict";var C$n=cc.Enum({AUTO:0,SINGLE_INSTANCE:1,MULTI_INSTANCE:2}),C$n=cc.Class({name:"cc.Prefab",extends:cc.Asset,ctor:function(){this._createFunction=null,this._instantiatedTimes=0},properties:{data:null,optimizationPolicy:C$n.AUTO,asyncLoadAssets:!1,readonly:{default:!1,editorOnly:!0}},statics:{OptimizationPolicy:C$n,OptimizationPolicyThreshold:3},createNode:!1,compileCreateFunction:function(){var C$t=C$e("../platform/instantiate-jit");this._createFunction=C$t.compile(this.data)},_doInstantiate:function(C$t){return this.data._prefab?this.data._prefab._synced=!0:cc.warnID(3700),this._createFunction||this.compileCreateFunction(),this._createFunction(C$t)},_instantiate:function(){var C$t;return this.data._prefab._synced=!0,C$t=this.data._instantiate(),++this._instantiatedTimes,C$t},destroy:function(){this.data&&this.data.destroy(),this._super()}});cc.Prefab=C$t.exports=C$n,cc.js.obsolete(cc,"cc._Prefab","Prefab")},{"../platform/instantiate-jit":207}],42:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../platform/CCObject"),C$r=C$t("../platform/js");cc.RawAsset=cc.Class({name:"cc.RawAsset",extends:C$n,ctor:function(){Object.defineProperty(this,"_uuid",{value:"",writable:!0})}}),C$r.value(cc.RawAsset,"isRawAssetType",function(C$t){return C$r.isChildClassOf(C$t,cc.RawAsset)&&!C$r.isChildClassOf(C$t,cc.Asset)}),C$r.value(cc.RawAsset,"wasRawAssetType",function(C$t){return C$t===cc.Texture2D||C$t===cc.AudioClip||C$t===cc.ParticleAsset||C$t===cc.Asset}),C$e.exports=cc.RawAsset},{"../platform/CCObject":195,"../platform/js":209}],43:[function(C$t,C$e,C$i){"use strict";var C$s=(C$n=C$t("../../renderer/gfx"))&&C$n.__esModule?C$n:{default:C$n};var C$o=C$t("../renderer"),C$n=C$t("./CCTexture2D"),C$t=cc.Enum({RB_FMT_D24S8:C$s.default.RB_FMT_D24S8,RB_FMT_S8:C$s.default.RB_FMT_S8,RB_FMT_D16:C$s.default.RB_FMT_D16}),C$n=cc.Class({name:"cc.RenderTexture",extends:C$n,statics:{DepthStencilFormat:C$t},ctor:function(){this._framebuffer=null},initWithSize:function(C$t,C$e,C$i){this.width=Math.floor(C$t||cc.visibleRect.width),this.height=Math.floor(C$e||cc.visibleRect.height),this._resetUnderlyingMipmaps();var C$n,C$r={colors:[this._texture]};this._depthStencilBuffer&&this._depthStencilBuffer.destroy(),C$i&&(C$n=new C$s.default.RenderBuffer(C$o.device,C$i,C$t,C$e),C$i===C$s.default.RB_FMT_D24S8?C$r.depthStencil=C$n:C$i===C$s.default.RB_FMT_S8?C$r.stencil=C$n:C$i===C$s.default.RB_FMT_D16&&(C$r.depth=C$n)),this._depthStencilBuffer=C$n,this._framebuffer&&this._framebuffer.destroy(),this._framebuffer=new C$s.default.FrameBuffer(C$o.device,C$t,C$e,C$r),this._packable=!1,this.loaded=!0,this.emit("load")},updateSize:function(C$t,C$e){this.width=Math.floor(C$t||cc.visibleRect.width),this.height=Math.floor(C$e||cc.visibleRect.height),this._resetUnderlyingMipmaps();var C$i=this._depthStencilBuffer;C$i&&C$i.update(this.width,this.height),this._framebuffer._width=C$t,this._framebuffer._height=C$e},drawTextureAt:function(C$t,C$e,C$i){C$t._image&&0!==C$t._image.width&&this._texture.updateSubImage({x:C$e,y:C$i,image:C$t._image,width:C$t.width,height:C$t.height,level:0,flipY:!1,premultiplyAlpha:C$t._premultiplyAlpha})},readPixels:function(C$t,C$e,C$i,C$n,C$r){if(!this._framebuffer||!this._texture)return C$t;C$e=C$e||0,C$i=C$i||0;var C$n=C$n||this.width,C$r=C$r||this.height,C$s=(C$t=C$t||new Uint8Array(C$n*C$r*4),cc.game._renderContext),C$o=C$s.getParameter(C$s.FRAMEBUFFER_BINDING);return C$s.bindFramebuffer(C$s.FRAMEBUFFER,this._framebuffer.getHandle()),C$s.readPixels(C$e,C$i,C$n,C$r,C$s.RGBA,C$s.UNSIGNED_BYTE,C$t),C$s.bindFramebuffer(C$s.FRAMEBUFFER,C$o),C$t},destroy:function(){this._super(),this._framebuffer&&(this._framebuffer.destroy(),this._framebuffer=null)}});cc.RenderTexture=C$e.exports=C$n},{"../../renderer/gfx":312,"../renderer":220,"./CCTexture2D":50}],44:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.SceneAsset",extends:cc.Asset,properties:{scene:null,asyncLoadAssets:void 0}});cc.SceneAsset=C$n,C$e.exports=C$n},{}],45:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.Script",extends:cc.Asset}),C$r=(cc._Script=C$n,cc.Class({name:"cc.JavaScript",extends:C$n})),C$r=(cc._JavaScript=C$r,cc.Class({name:"cc.CoffeeScript",extends:C$n})),C$r=(cc._CoffeeScript=C$r,cc.Class({name:"cc.TypeScript",extends:C$n}));cc._TypeScript=C$r},{}],46:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.SpriteAtlas",extends:cc.Asset,properties:{_spriteFrames:{default:{}}},getTexture:function(){var C$t=Object.keys(this._spriteFrames);return 0<C$t.length&&(C$t=this._spriteFrames[C$t[0]])?C$t.getTexture():null},getSpriteFrame:function(C$t){var C$e=this._spriteFrames[C$t];return C$e?(C$e.name||(C$e.name=C$t),C$e):null},getSpriteFrames:function(){var C$t,C$e=[];for(C$t in this._spriteFrames)C$e.push(this.getSpriteFrame(C$t));return C$e}});cc.SpriteAtlas=C$n,C$e.exports=C$n},{}],47:[function(C$t,C$e,C$i){"use strict";var C$s=C$t("../event/event-target"),C$n=C$t("../utils/texture-util"),C$y=[{u:0,v:0},{u:0,v:0},{u:0,v:0},{u:0,v:0}],C$r=cc.Class({name:"cc.SpriteFrame",extends:C$t("../assets/CCAsset"),mixins:[C$s],properties:{_textureSetter:{set:function(C$t){C$t&&(this._texture!==C$t&&this._refreshTexture(C$t),this._textureFilename=C$t.url)}},insetTop:{get:function(){return this._capInsets[1]},set:function(C$t){this._capInsets[1]=C$t,this._texture&&this._calculateSlicedUV()}},insetBottom:{get:function(){return this._capInsets[3]},set:function(C$t){this._capInsets[3]=C$t,this._texture&&this._calculateSlicedUV()}},insetLeft:{get:function(){return this._capInsets[0]},set:function(C$t){this._capInsets[0]=C$t,this._texture&&this._calculateSlicedUV()}},insetRight:{get:function(){return this._capInsets[2]},set:function(C$t){this._capInsets[2]=C$t,this._texture&&this._calculateSlicedUV()}}},ctor:function(){C$s.call(this);var C$t=arguments[0],C$e=arguments[1],C$i=arguments[2],C$n=arguments[3],C$r=arguments[4];this._rect=null,this.uv=[],this._texture=null,this._original=null,this._offset=null,this._originalSize=null,this._rotated=!1,this._flipX=!1,this._flipY=!1,this.vertices=null,this._capInsets=[0,0,0,0],this.uvSliced=[],this._textureFilename="",void 0!==C$t&&this.setTexture(C$t,C$e,C$i,C$n,C$r)},textureLoaded:function(){return this._texture&&this._texture.loaded},onTextureLoaded:function(C$t,C$e){return this.textureLoaded()?(C$t.call(C$e),!0):(this.once("load",C$t,C$e),this.ensureLoadTexture(),!1)},isRotated:function(){return this._rotated},setRotated:function(C$t){this._rotated=C$t,this._texture&&this._calculateUV()},isFlipX:function(){return this._flipX},isFlipY:function(){return this._flipY},setFlipX:function(C$t){this._flipX=C$t,this._texture&&this._calculateUV()},setFlipY:function(C$t){this._flipY=C$t,this._texture&&this._calculateUV()},getRect:function(){return cc.rect(this._rect)},setRect:function(C$t){this._rect=C$t,this._texture&&this._calculateUV()},getOriginalSize:function(){return cc.size(this._originalSize)},setOriginalSize:function(C$t){this._originalSize?(this._originalSize.width=C$t.width,this._originalSize.height=C$t.height):this._originalSize=cc.size(C$t)},getTexture:function(){return this._texture},_textureLoadedCallback:function(){var C$t,C$e=this._texture;C$e&&(C$t=C$e.width,C$e=C$e.height,this._rect?this._checkRect(this._texture):this._rect=cc.rect(0,0,C$t,C$e),this._originalSize||this.setOriginalSize(cc.size(C$t,C$e)),this._offset||this.setOffset(cc.v2(0,0)),this._calculateUV(),this.emit("load"))},_refreshTexture:function(C$t){(this._texture=C$t).loaded?this._textureLoadedCallback():C$t.once("load",this._textureLoadedCallback,this)},getOffset:function(){return cc.v2(this._offset)},setOffset:function(C$t){this._offset=cc.v2(C$t)},clone:function(){return new C$r(this._texture||this._textureFilename,this._rect,this._rotated,this._offset,this._originalSize)},setTexture:function(C$t,C$e,C$i,C$n,C$r){this._rect=C$e||null,C$n?this.setOffset(C$n):this._offset=null,C$r?this.setOriginalSize(C$r):this._originalSize=null,this._rotated=C$i||!1;C$e=C$t;return"string"==typeof C$e&&C$e&&(this._textureFilename=C$e,this._loadTexture()),C$e instanceof cc.Texture2D&&this._texture!==C$e&&this._refreshTexture(C$e),!0},_loadTexture:function(){var C$t;this._textureFilename&&(C$t=C$n.loadImage(this._textureFilename),this._refreshTexture(C$t))},ensureLoadTexture:function(){this._texture?this._texture.loaded||(this._refreshTexture(this._texture),C$n.postLoadTexture(this._texture)):this._textureFilename&&this._loadTexture()},_checkRect:function(C$t){var C$e=this._rect,C$i=C$e.x,C$n=C$e.y;this._rotated?(C$i+=C$e.height,C$n+=C$e.width):(C$i+=C$e.width,C$n+=C$e.height),C$i>C$t.width&&cc.errorID(3300,C$t.url+"/"+this.name,C$i,C$t.width),C$n>C$t.height&&cc.errorID(3400,C$t.url+"/"+this.name,C$n,C$t.height)},_flipXY:function(C$t){var C$e;this._flipX&&(C$e=C$t[0],C$t[0]=C$t[1],C$t[1]=C$e,C$e=C$t[2],C$t[2]=C$t[3],C$t[3]=C$e),this._flipY&&(C$e=C$t[0],C$t[0]=C$t[2],C$t[2]=C$e,C$e=C$t[1],C$t[1]=C$t[3],C$t[3]=C$e)},_calculateSlicedUV:function(){var C$t=this._rect,C$e=this._texture.width,C$i=this._texture.height,C$n=this._capInsets[0],C$r=this._capInsets[2],C$r=C$t.width-C$n-C$r,C$s=this._capInsets[1],C$o=this._capInsets[3],C$h=C$t.height-C$s-C$o,C$a=this.uvSliced;if(C$a.length=0,this._rotated){C$y[0].u=C$t.x/C$e,C$y[1].u=(C$t.x+C$o)/C$e,C$y[2].u=(C$t.x+C$o+C$h)/C$e,C$y[3].u=(C$t.x+C$t.height)/C$e,C$y[3].v=C$t.y/C$i,C$y[2].v=(C$t.y+C$n)/C$i,C$y[1].v=(C$t.y+C$n+C$r)/C$i,C$y[0].v=(C$t.y+C$t.width)/C$i,this._flipXY(C$y);for(var C$c=0;C$c<4;++C$c)for(var C$u=C$y[C$c],C$l=0;C$l<4;++C$l){var C$_=C$y[3-C$l];C$a.push({u:C$u.u,v:C$_.v})}}else{C$y[0].u=C$t.x/C$e,C$y[1].u=(C$t.x+C$n)/C$e,C$y[2].u=(C$t.x+C$n+C$r)/C$e,C$y[3].u=(C$t.x+C$t.width)/C$e,C$y[3].v=C$t.y/C$i,C$y[2].v=(C$t.y+C$s)/C$i,C$y[1].v=(C$t.y+C$s+C$h)/C$i,C$y[0].v=(C$t.y+C$t.height)/C$i,this._flipXY(C$y);for(var C$d=0;C$d<4;++C$d)for(var C$f=C$y[C$d],C$p=0;C$p<4;++C$p){var C$m=C$y[C$p];C$a.push({u:C$m.u,v:C$f.v})}}},_setDynamicAtlasFrame:function(C$t){C$t&&(this._original={_texture:this._texture,_x:this._rect.x,_y:this._rect.y},this._texture=C$t.texture,this._rect.x=C$t.x,this._rect.y=C$t.y,this._calculateUV())},_resetDynamicAtlasFrame:function(){this._original&&(this._rect.x=this._original._x,this._rect.y=this._original._y,this._texture=this._original._texture,this._original=null,this._calculateUV())},_calculateUV:function(){var C$t,C$e,C$i,C$n=this._rect,C$r=this._texture,C$s=this.uv,C$o=C$r.width,C$a=C$r.height,C$c=(this._rotated?(C$r=0===C$o?0:C$n.x/C$o,C$i=0===C$o?0:(C$n.x+C$n.height)/C$o,C$e=0===C$a?0:(C$n.y+C$n.width)/C$a,C$t=0===C$a?0:C$n.y/C$a,C$s[0]=C$r,C$s[1]=C$t,C$s[2]=C$r,C$s[3]=C$e,C$s[4]=C$i,C$s[5]=C$t,C$s[6]=C$i,C$s[7]=C$e):(C$r=0===C$o?0:C$n.x/C$o,C$t=0===C$o?0:(C$n.x+C$n.width)/C$o,C$i=0===C$a?0:(C$n.y+C$n.height)/C$a,C$e=0===C$a?0:C$n.y/C$a,C$s[0]=C$r,C$s[1]=C$i,C$s[2]=C$t,C$s[3]=C$i,C$s[4]=C$r,C$s[5]=C$e,C$s[6]=C$t,C$s[7]=C$e),this._flipX&&(C$n=C$s[0],C$s[0]=C$s[2],C$s[2]=C$n,C$n=C$s[1],C$s[1]=C$s[3],C$s[3]=C$n,C$n=C$s[4],C$s[4]=C$s[6],C$s[6]=C$n,C$n=C$s[5],C$s[5]=C$s[7],C$s[7]=C$n),this._flipY&&(C$i=C$s[0],C$s[0]=C$s[4],C$s[4]=C$i,C$i=C$s[1],C$s[1]=C$s[5],C$s[5]=C$i,C$i=C$s[2],C$s[2]=C$s[6],C$s[6]=C$i,C$i=C$s[3],C$s[3]=C$s[7],C$s[7]=C$i),this.vertices);if(C$c){C$c.nu.length=0;for(var C$l=C$c.nv.length=0;C$l<C$c.u.length;C$l++)C$c.nu[C$l]=C$c.u[C$l]/C$o,C$c.nv[C$l]=C$c.v[C$l]/C$a}this._calculateSlicedUV()},_serialize:!1,_deserialize:function(C$t,C$e){var C$i=C$t.rect,C$i=(C$i&&(this._rect=new cc.Rect(C$i[0],C$i[1],C$i[2],C$i[3])),C$t.offset&&this.setOffset(new cc.Vec2(C$t.offset[0],C$t.offset[1])),C$t.originalSize&&this.setOriginalSize(new cc.Size(C$t.originalSize[0],C$t.originalSize[1])),this._rotated=1===C$t.rotated,this._name=C$t.name,C$t.capInsets),C$i=(C$i&&(this._capInsets[0]=C$i[0],this._capInsets[1]=C$i[1],this._capInsets[2]=C$i[2],this._capInsets[3]=C$i[3]),this.vertices=C$t.vertices,this.vertices&&(this.vertices.nu=[],this.vertices.nv=[]),C$t.texture);C$i&&C$e.result.push(this,"_textureSetter",C$i)}}),C$t=C$r.prototype;C$t.copyWithZone=C$t.clone,C$t.copy=C$t.clone,C$t.initWithTexture=C$t.setTexture,cc.SpriteFrame=C$r,C$e.exports=C$r},{"../assets/CCAsset":34,"../event/event-target":115,"../utils/texture-util":272}],48:[function(C$t,C$e,C$i){"use strict";C$t=C$t("./CCFont"),C$t=cc.Class({name:"cc.TTFFont",extends:C$t,properties:{_fontFamily:null,_nativeAsset:{type:cc.String,get:function(){return this._fontFamily},set:function(C$t){this._fontFamily=C$t||"Arial"},override:!0}}});cc.TTFFont=C$e.exports=C$t},{"./CCFont":38}],49:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.TextAsset",extends:cc.Asset,properties:{text:""},toString:function(){return this.text}});C$e.exports=cc.TextAsset=C$n},{}],50:[function(C$t,C$r,C$h){"use strict";var C$e=(C$e=C$t("../../renderer/gfx"))&&C$e.__esModule?C$e:{default:C$e};var C$u=C$t("../event/event-target"),C$s=C$t("../renderer"),C$_=(C$t("../platform/CCClass"),new(C$t("../platform/id-generater"))("Tex")),C$d=1024,C$f=cc.Enum({RGB565:C$e.default.TEXTURE_FMT_R5_G6_B5,RGB5A1:C$e.default.TEXTURE_FMT_R5_G5_B5_A1,RGBA4444:C$e.default.TEXTURE_FMT_R4_G4_B4_A4,RGB888:C$e.default.TEXTURE_FMT_RGB8,RGBA8888:C$e.default.TEXTURE_FMT_RGBA8,RGBA32F:C$e.default.TEXTURE_FMT_RGBA32F,A8:C$e.default.TEXTURE_FMT_A8,I8:C$e.default.TEXTURE_FMT_L8,AI8:C$e.default.TEXTURE_FMT_L8_A8,RGB_PVRTC_2BPPV1:C$e.default.TEXTURE_FMT_RGB_PVRTC_2BPPV1,RGBA_PVRTC_2BPPV1:C$e.default.TEXTURE_FMT_RGBA_PVRTC_2BPPV1,RGB_A_PVRTC_2BPPV1:C$d++,RGB_PVRTC_4BPPV1:C$e.default.TEXTURE_FMT_RGB_PVRTC_4BPPV1,RGBA_PVRTC_4BPPV1:C$e.default.TEXTURE_FMT_RGBA_PVRTC_4BPPV1,RGB_A_PVRTC_4BPPV1:+C$d,RGB_ETC1:C$e.default.TEXTURE_FMT_RGB_ETC1,RGBA_ETC1:1026,RGB_ETC2:C$e.default.TEXTURE_FMT_RGB_ETC2,RGBA_ETC2:C$e.default.TEXTURE_FMT_RGBA_ETC2}),C$c=cc.Enum({REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648}),C$l=cc.Enum({LINEAR:9729,NEAREST:9728}),C$o={9728:0,9729:1},C$i=[],C$n={width:void 0,height:void 0,minFilter:void 0,magFilter:void 0,wrapS:void 0,wrapT:void 0,format:void 0,genMipmaps:void 0,images:void 0,image:void 0,flipY:void 0,premultiplyAlpha:void 0};function C$a(){for(var C$t in C$n)C$n[C$t]=void 0;return C$i.length=0,C$n.images=C$i,C$n}var C$p=cc.Class({name:"cc.Texture2D",extends:C$t("../assets/CCAsset"),mixins:[C$u],properties:{_nativeAsset:{get:function(){return this._image},set:function(C$t){C$t._compressed&&C$t._data?this.initWithData(C$t._data,this._format,C$t.width,C$t.height):this.initWithElement(C$t)},override:!0},_format:C$f.RGBA8888,_premultiplyAlpha:!1,_flipY:!1,_minFilter:C$l.LINEAR,_magFilter:C$l.LINEAR,_mipFilter:C$l.LINEAR,_wrapS:C$c.CLAMP_TO_EDGE,_wrapT:C$c.CLAMP_TO_EDGE,_genMipmaps:!1,genMipmaps:{get:function(){return this._genMipmaps},set:function(C$t){var C$e;this._genMipmaps!==C$t&&((C$e=C$a()).genMipmaps=C$t,this.update(C$e))}},_packable:!0,packable:{get:function(){return this._packable},set:function(C$t){this._packable=C$t}}},statics:{PixelFormat:C$f,WrapMode:C$c,Filter:C$l,_FilterIndex:C$o,extnames:[".png",".jpg",".jpeg",".bmp",".webp",".pvr",".pkm"]},ctor:function(){this._id=C$_.getNewId(),this.loaded=!1,this.width=0,this.height=0,this._hashDirty=!0,this._hash=0,this._texture=null},getImpl:function(){return this._texture},getId:function(){return this._id},toString:function(){return this.url||""},update:function(C$t){var C$e;C$t&&(C$e=!1,void 0!==C$t.width&&(this.width=C$t.width),void 0!==C$t.height&&(this.height=C$t.height),void 0!==C$t.minFilter&&(this._minFilter=C$t.minFilter,C$t.minFilter=C$o[C$t.minFilter]),void 0!==C$t.magFilter&&(this._magFilter=C$t.magFilter,C$t.magFilter=C$o[C$t.magFilter]),void 0!==C$t.mipFilter&&(this._mipFilter=C$t.mipFilter,C$t.mipFilter=C$o[C$t.mipFilter]),void 0!==C$t.wrapS&&(this._wrapS=C$t.wrapS),void 0!==C$t.wrapT&&(this._wrapT=C$t.wrapT),void 0!==C$t.format&&(this._format=C$t.format),void 0!==C$t.flipY&&(this._flipY=C$t.flipY,C$e=!0),void 0!==C$t.premultiplyAlpha&&(this._premultiplyAlpha=C$t.premultiplyAlpha,C$e=!0),void 0!==C$t.genMipmaps&&(this._genMipmaps=C$t.genMipmaps),C$e&&this._image&&(C$t.image=this._image),C$t.images&&0<C$t.images.length?this._image=C$t.images[0]:void 0!==C$t.image&&(this._image=C$t.image,C$t.images||(C$i.length=0,C$t.images=C$i),C$t.images.push(C$t.image)),this._texture&&this._texture.update(C$t),this._hashDirty=!0)},initWithElement:function(C$t){var C$e;C$t&&((this._image=C$t).complete||C$t instanceof HTMLCanvasElement?this.handleLoadedTexture():(C$e=this,C$t.addEventListener("load",function(){C$e.handleLoadedTexture()}),C$t.addEventListener("error",function(C$t){cc.warnID(3119,C$t.message)})))},initWithData:function(C$t,C$e,C$i,C$n){var C$r=C$a();return C$r.image=C$t,C$r.images=[C$r.image],C$r.genMipmaps=this._genMipmaps,C$r.premultiplyAlpha=this._premultiplyAlpha,C$r.flipY=this._flipY,C$r.minFilter=C$o[this._minFilter],C$r.magFilter=C$o[this._magFilter],C$r.wrapS=this._wrapS,C$r.wrapT=this._wrapT,C$r.format=this._getGFXPixelFormat(C$e),C$r.width=C$i,C$r.height=C$n,this._texture?this._texture.update(C$r):this._texture=new C$s.Texture2D(C$s.device,C$r),this.width=C$i,this.height=C$n,this._checkPackable(),this.loaded=!0,this.emit("load"),!0},getHtmlElementObj:function(){return this._image},destroy:function(){this._packable&&cc.dynamicAtlasManager&&cc.dynamicAtlasManager.deleteAtlasTexture(this),this._image=null,this._texture&&this._texture.destroy(),this._super()},getPixelFormat:function(){return this._format},hasPremultipliedAlpha:function(){return this._premultiplyAlpha||!1},handleLoadedTexture:function(){var C$t;this._image&&this._image.width&&this._image.height&&(this.width=this._image.width,this.height=this._image.height,(C$t=C$a()).image=this._image,C$t.images=[C$t.image],C$t.width=this.width,C$t.height=this.height,C$t.genMipmaps=this._genMipmaps,C$t.format=this._getGFXPixelFormat(this._format),C$t.premultiplyAlpha=this._premultiplyAlpha,C$t.flipY=this._flipY,C$t.minFilter=C$o[this._minFilter],C$t.magFilter=C$o[this._magFilter],C$t.wrapS=this._wrapS,C$t.wrapT=this._wrapT,this._texture?this._texture.update(C$t):this._texture=new C$s.Texture2D(C$s.device,C$t),this._checkPackable(),this.loaded=!0,this.emit("load"),cc.macro.CLEANUP_IMAGE_CACHE&&this._image instanceof HTMLImageElement&&this._clearImage())},description:function(){return"<cc.Texture2D | Name = "+this.url+" | Dimensions = "+this.width+" x "+this.height+">"},releaseTexture:function(){this._image=null,this._texture&&this._texture.destroy()},setWrapMode:function(C$t,C$e){var C$i;this._wrapS===C$t&&this._wrapT===C$e||((C$i=C$a()).wrapS=C$t,C$i.wrapT=C$e,this.update(C$i))},setFilters:function(C$t,C$e){var C$i;this._minFilter===C$t&&this._magFilter===C$e||((C$i=C$a()).minFilter=C$t,C$i.magFilter=C$e,this.update(C$i))},setFlipY:function(C$t){var C$e;this._flipY!==C$t&&((C$e=C$a()).flipY=C$t,this.update(C$e))},setPremultiplyAlpha:function(C$t){var C$e;this._premultiplyAlpha!==C$t&&((C$e=C$a()).premultiplyAlpha=C$t,this.update(C$e))},_checkPackable:function(){var C$t,C$e,C$i=cc.dynamicAtlasManager;C$i&&(this._isCompressed()?this._packable=!1:(C$t=this.width,C$e=this.height,!this._image||C$t>C$i.maxFrameSize||C$e>C$i.maxFrameSize||this._getHash()!==C$i.Atlas.DEFAULT_HASH?this._packable=!1:this._image&&this._image instanceof HTMLCanvasElement&&(this._packable=!0)))},_getOpts:function(){var C$t=C$a();return C$t.width=this.width,C$t.height=this.height,C$t.genMipmaps=this._genMipmaps,C$t.format=this._format,C$t.premultiplyAlpha=this._premultiplyAlpha,C$t.anisotropy=this._anisotropy,C$t.flipY=this._flipY,C$t.minFilter=C$o[this._minFilter],C$t.magFilter=C$o[this._magFilter],C$t.mipFilter=C$o[this._mipFilter],C$t.wrapS=this._wrapS,C$t.wrapT=this._wrapT,C$t},_getGFXPixelFormat:function(C$t){return C$t===C$f.RGBA_ETC1?C$t=C$f.RGB_ETC1:C$t===C$f.RGB_A_PVRTC_4BPPV1?C$t=C$f.RGB_PVRTC_4BPPV1:C$t===C$f.RGB_A_PVRTC_2BPPV1&&(C$t=C$f.RGB_PVRTC_2BPPV1),C$t},_resetUnderlyingMipmaps:function(C$t){var C$e=this._getOpts();C$e.images=C$t||[null],this._texture?this._texture.update(C$e):this._texture=new C$s.Texture2D(C$s.device,C$e)},_serialize:!1,_deserialize:function(C$t,C$h){var C$e=cc.renderer.device,C$t=C$t.split(","),C$i=C$t[0];if(C$i){for(var C$n=C$i.split("_"),C$r="",C$s="",C$u=999,C$_=this._format,C$d=cc.macro.SUPPORT_TEXTURE_FORMATS,C$o=0;C$o<C$n.length;C$o++){var C$a=C$n[C$o].split("@"),C$c=C$a[0],C$c=C$p.extnames[C$c.charCodeAt(0)-48]||C$c,C$l=C$d.indexOf(C$c);-1!==C$l&&C$l<C$u?(C$a=C$a[1]?parseInt(C$a[1]):this._format,(".pvr"!==C$c||C$e.ext("WEBGL_compressed_texture_pvrtc"))&&(C$a!==C$f.RGB_ETC1&&C$a!==C$f.RGBA_ETC1||C$e.ext("WEBGL_compressed_texture_etc1"))&&(C$a!==C$f.RGB_ETC2&&C$a!==C$f.RGBA_ETC2||C$e.ext("WEBGL_compressed_texture_etc"))&&(".webp"===C$c&&!cc.sys.capabilities.webp||(C$u=C$l,C$s=C$c,C$_=C$a))):C$r=C$r||C$c}C$s?(this._setRawAsset(C$s),this._format=C$_):(this._setRawAsset(C$r),cc.warnID(3120,C$h.customEnv.url,C$r,C$r))}8===C$t.length&&(this._minFilter=parseInt(C$t[1]),this._magFilter=parseInt(C$t[2]),this._wrapS=parseInt(C$t[3]),this._wrapT=parseInt(C$t[4]),this._premultiplyAlpha=49===C$t[5].charCodeAt(0),this._genMipmaps=49===C$t[6].charCodeAt(0),this._packable=49===C$t[7].charCodeAt(0))},_getHash:function(){if(!this._hashDirty)return this._hash;var C$t=this._genMipmaps?1:0,C$e=this._premultiplyAlpha?1:0,C$i=this._flipY?1:0,C$n=this._minFilter===C$l.LINEAR?1:2,C$r=this._magFilter===C$l.LINEAR?1:2,C$s=this._wrapS===C$c.REPEAT?1:this._wrapS===C$c.CLAMP_TO_EDGE?2:3,C$o=this._wrapT===C$c.REPEAT?1:this._wrapT===C$c.CLAMP_TO_EDGE?2:3,C$a=this._format;this._image;return this._hash=Number(""+C$n+C$r+C$a+C$s+C$o+C$t+C$e+C$i),this._hashDirty=!1,this._hash},_isCompressed:function(){return this._format<C$f.A8||this._format>C$f.RGBA32F},_clearImage:function(){cc.loader.removeItem(this._image.id||this._image.src),this._image.src=""}});cc.Texture2D=C$r.exports=C$p},{"../../renderer/gfx":312,"../assets/CCAsset":34,"../event/event-target":115,"../platform/CCClass":189,"../platform/id-generater":205,"../renderer":220}],51:[function(C$t,C$e,C$i){"use strict";C$t("./CCRawAsset"),C$t("./CCAsset"),C$t("./CCFont"),C$t("./CCPrefab"),C$t("./CCAudioClip"),C$t("./CCScripts"),C$t("./CCSceneAsset"),C$t("./CCSpriteFrame"),C$t("./CCTexture2D"),C$t("./CCRenderTexture"),C$t("./CCTTFFont"),C$t("./CCSpriteAtlas"),C$t("./CCBitmapFont"),C$t("./CCLabelAtlas"),C$t("./CCTextAsset"),C$t("./CCJsonAsset"),C$t("./CCBufferAsset"),C$t("./material")},{"./CCAsset":34,"./CCAudioClip":35,"./CCBitmapFont":36,"./CCBufferAsset":37,"./CCFont":38,"./CCJsonAsset":39,"./CCLabelAtlas":40,"./CCPrefab":41,"./CCRawAsset":42,"./CCRenderTexture":43,"./CCSceneAsset":44,"./CCScripts":45,"./CCSpriteAtlas":46,"./CCSpriteFrame":47,"./CCTTFFont":48,"./CCTextAsset":49,"./CCTexture2D":50,"./material":58}],52:[function(C$t,C$e,C$i){"use strict";var C$n=(C$n=C$t("../CCAsset"))&&C$n.__esModule?C$n:{default:C$n},C$r=C$t("./effect-parser");C$t=cc.Class({name:"cc.EffectAsset",extends:C$n.default,ctor:function(){this._effect=null},properties:{properties:Object,techniques:[],shaders:[]},onLoad:function(){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){for(var C$t=cc.renderer._forward._programLib,C$e=0;C$e<this.shaders.length;C$e++)C$t.define(this.shaders[C$e]);this._initEffect()}},_initEffect:function(){this._effect||(this._effect=(0,C$r.parseEffect)(this),Object.freeze(this._effect))},getInstantiatedEffect:function(){return this._initEffect(),this._effect.clone()},getEffect:function(){return this._initEffect(),this._effect}});C$e.exports=cc.EffectAsset=C$t},{"../CCAsset":34,"./effect-parser":55}],53:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$t("../CCAsset"),C$a=C$t("../CCTexture2D"),C$c=C$a.PixelFormat,C$r=C$t("./CCEffectAsset"),C$l=C$t("../../utils/texture-util"),C$h=cc.gfx,C$t=cc.Enum({SPRITE:"2d-sprite",GRAY_SPRITE:"2d-gray-sprite",UNLIT:"unlit"}),C$s=cc.Class({name:"cc.Material",extends:C$n,ctor:function(){this._manualHash=!1,this._dirty=!0,this._effect=null},properties:{_defines:{default:void 0,type:Object},_props:{default:void 0,type:Object},_effectAsset:{type:C$r,default:null},_techniqueIndex:0,_techniqueData:Object,effectName:void 0,effectAsset:{get:function(){return this._effectAsset},set:function(C$t){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&((this._effectAsset=C$t)?this._effect=this._effectAsset.getInstantiatedEffect():cc.error("Can not set an empty effect asset."))}},effect:{get:function(){return this._effect}},techniqueIndex:{get:function(){return this._techniqueIndex},set:function(C$t){this._techniqueIndex=C$t,this._effect.switchTechnique(C$t)}}},statics:{getBuiltinMaterial:function(C$t){return cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Material:cc.AssetLibrary.getBuiltin("material","builtin-"+C$t)},BUILTIN_NAME:C$t,createWithBuiltin:function(C$t,C$e){void 0===C$e&&(C$e=0);C$t=cc.AssetLibrary.getBuiltin("effect","builtin-"+C$t);return C$s.create(C$t,C$e)},create:function(C$t,C$e){if(void 0===C$e&&(C$e=0),!C$t)return null;var C$i=new C$s;return C$i.effectAsset=C$t,C$i.techniqueIndex=C$e,C$i}},setProperty:function(C$t,C$e,C$i,C$n){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){if("string"==typeof C$i&&(C$i=parseInt(C$i)),C$e instanceof C$a){var C$r=C$e.getPixelFormat(),C$r=C$r===C$c.RGBA_ETC1||C$r===C$c.RGB_A_PVRTC_4BPPV1||C$r===C$c.RGB_A_PVRTC_2BPPV1,C$s="CC_USE_ALPHA_ATLAS_"+C$t,C$o=this.getDefine(C$s,C$i);if((C$r||C$o)&&this.define(C$s,C$r),!C$e.loaded)return C$e.once("load",function(){this._effect.setProperty(C$t,C$e,C$i)},this),void C$l.postLoadTexture(C$e)}this._effect.setProperty(C$t,C$e,C$i,C$n)}},getProperty:function(C$t,C$e){return"string"==typeof C$e&&(C$e=parseInt(C$e)),this._effect.getProperty(C$t,C$e)},define:function(C$t,C$e,C$i,C$n){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&("string"==typeof C$i&&(C$i=parseInt(C$i)),this._effect.define(C$t,C$e,C$i,C$n))},getDefine:function(C$t,C$e){return"string"==typeof C$e&&(C$e=parseInt(C$e)),this._effect.getDefine(C$t,C$e)},setCullMode:function(C$t,C$e){void 0===C$t&&(C$t=C$h.CULL_BACK),this._effect.setCullMode(C$t,C$e)},setDepth:function(C$t,C$e,C$i,C$n){void 0===C$i&&(C$i=C$h.DS_FUNC_LESS),this._effect.setDepth(C$t=void 0===C$t?!1:C$t,C$e=void 0===C$e?!1:C$e,C$i,C$n)},setBlend:function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){void 0===C$e&&(C$e=C$h.BLEND_FUNC_ADD),void 0===C$i&&(C$i=C$h.BLEND_SRC_ALPHA),void 0===C$n&&(C$n=C$h.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$r&&(C$r=C$h.BLEND_FUNC_ADD),void 0===C$s&&(C$s=C$h.BLEND_SRC_ALPHA),void 0===C$o&&(C$o=C$h.BLEND_ONE_MINUS_SRC_ALPHA),this._effect.setBlend(C$t=void 0===C$t?!1:C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a=void 0===C$a?4294967295:C$a,C$c)},setStencilEnabled:function(C$t,C$e){void 0===C$t&&(C$t=C$h.STENCIL_INHERIT),this._effect.setStencilEnabled(C$t,C$e)},setStencil:function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){void 0===C$t&&(C$t=C$h.STENCIL_INHERIT),void 0===C$e&&(C$e=C$h.DS_FUNC_ALWAYS),void 0===C$r&&(C$r=C$h.STENCIL_OP_KEEP),void 0===C$s&&(C$s=C$h.STENCIL_OP_KEEP),void 0===C$o&&(C$o=C$h.STENCIL_OP_KEEP),this._effect.setStencil(C$t,C$e,C$i=void 0===C$i?0:C$i,C$n=void 0===C$n?255:C$n,C$r,C$s,C$o,C$a=void 0===C$a?255:C$a,C$c)},updateHash:function(C$t){this._manualHash=C$t,this._effect&&this._effect.updateHash(C$t)},getHash:function(){return this._manualHash||this._effect&&this._effect.getHash()},onLoad:function(){if(this.effectAsset=this._effectAsset,this._effect){this._techniqueIndex&&this._effect.switchTechnique(this._techniqueIndex),this._techniqueData=this._techniqueData||{};var C$t=this._techniqueData;for(C$e in C$t){var C$e,C$i=C$t[C$e=parseInt(C$e)];if(C$i){for(var C$n in C$i.defines)this.define(C$n,C$i.defines[C$n],C$e);for(var C$r in C$i.props)this.setProperty(C$r,C$i.props[C$r],C$e)}}}}});C$i.default=C$s,cc.Material=C$s,C$e.exports=C$i.default},{"../../utils/texture-util":272,"../CCAsset":34,"../CCTexture2D":50,"./CCEffectAsset":52}],54:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$s=(C$t=C$t("../../../renderer/core/pass"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}var C$r,C$o=cc.gfx,C$a=((C$t=C$c.prototype)._createPassProp=function(C$t,C$e){var C$i,C$n=C$e._properties[C$t];if(C$n)return C$i=Object.create(null),C$i.name=C$t,C$i.type=C$n.type,C$n.value instanceof Float32Array?C$i.value=new Float32Array(C$n.value):C$i.value=C$n.value,C$e._properties[C$t]=C$i},C$t._setPassProperty=function(C$t,C$e,C$i,C$n){var C$r=C$i._properties.hasOwnProperty(C$t);if(C$r){if(C$r.value===C$e)return}else C$r=this._createPassProp(C$t,C$i);return this._dirty=!0,C$s.default.prototype.setProperty.call(C$i,C$t,C$e,C$n)},C$t.setProperty=function(C$t,C$e,C$i,C$n){var C$r=!1,C$s=this.passes,C$o=0,C$a=C$s.length;void 0!==C$i&&(C$a=(C$o=C$i)+1);for(var C$c=C$o;C$c<C$a;C$c++)this._setPassProperty(C$t,C$e,C$s[C$c],C$n)&&(C$r=!0);C$r||cc.warnID(9103,this.name,C$t)},C$t.getProperty=function(C$t,C$e){var C$i=this.passes;if(!(C$e>=C$i.length)){var C$n=0,C$r=C$i.length;void 0!==C$e&&(C$r=(C$n=C$e)+1);for(var C$s=C$n;C$s<C$r;C$s++){var C$o=C$i[C$s].getProperty(C$t);if(void 0!==C$o)return C$o}}},C$t.define=function(C$t,C$e,C$i,C$n){var C$r=!1,C$s=this.passes,C$o=0,C$a=C$s.length;void 0!==C$i&&(C$a=(C$o=C$i)+1);for(var C$c=C$o;C$c<C$a;C$c++)C$s[C$c].define(C$t,C$e,C$n)&&(C$r=!0);C$r||cc.warnID(9104,this.name,C$t)},C$t.getDefine=function(C$t,C$e){var C$i=this.passes;if(!(C$e>=C$i.length)){var C$n=0,C$r=C$i.length;void 0!==C$e&&(C$r=(C$n=C$e)+1);for(var C$s=C$n;C$s<C$r;C$s++){var C$o=C$i[C$s].getDefine(C$t);if(void 0!==C$o)return C$o}}},C$t.setCullMode=function(C$t,C$e){void 0===C$t&&(C$t=C$o.CULL_BACK);var C$i=this.passes,C$n=0,C$r=C$i.length;void 0!==C$e&&(C$r=(C$n=C$e)+1);for(var C$s=C$n;C$s<C$r;C$s++)C$i[C$s].setCullMode(C$t);this._dirty=!0},C$t.setDepth=function(C$t,C$e,C$i,C$n){var C$r=this.passes,C$s=0,C$o=C$r.length;void 0!==C$n&&(C$o=(C$s=C$n)+1);for(var C$a=C$s;C$a<C$o;C$a++)C$r[C$a].setDepth(C$t,C$e,C$i);this._dirty=!0},C$t.setBlend=function(C$t,C$e,C$i,C$n,C$r,C$h,C$u,C$_,C$s){var C$o=this.passes,C$a=0,C$c=C$o.length;void 0!==C$s&&(C$c=(C$a=C$s)+1);for(var C$l=C$a;C$l<C$c;C$l++)C$o[C$l].setBlend(C$t,C$e,C$i,C$n,C$r,C$h,C$u,C$_);this._dirty=!0},C$t.setStencilEnabled=function(C$t,C$e){void 0===C$t&&(C$t=C$o.STENCIL_INHERIT);var C$i=this.passes,C$n=0,C$r=C$i.length;void 0!==C$e&&(C$r=(C$n=C$e)+1);for(var C$s=C$n;C$s<C$r;C$s++)C$i[C$s].setStencilEnabled(C$t);this._dirty=!0},C$t.setStencil=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){var C$h=this.passes,C$u=0,C$_=C$h.length;void 0!==C$c&&(C$_=(C$u=C$c)+1);for(var C$l=C$u;C$l<C$_;C$l++){var C$d=C$h[C$l];C$d.setStencilFront(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a),C$d.setStencilBack(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a)}this._dirty=!0},C$t=C$c,(C$a=[{key:"name",get:function(){return this._name}},{key:"technique",get:function(){return this._technique}},{key:"passes",get:function(){return[]}}])&&C$n(C$t.prototype,C$a),C$r&&C$n(C$t,C$r),C$c);function C$c(){this._dirty=!0,this._name="",this._technique=null}C$i.default=C$a,cc.EffectBase=C$a,C$e.exports=C$i.default},{"../../../renderer/core/pass":303}],55:[function(C$t,C$r,C$e){"use strict";C$e.__esModule=!0,C$e.parseEffect=function(C$t){var C$e=function(C$t){for(var C$e=C$t.techniques.length,C$i=new Array(C$e),C$n=0;C$n<C$e;++C$n){for(var C$r=C$t.techniques[C$n],C$h=C$r.name||C$n,C$u=C$r.passes.length,C$_=new Array(C$u),C$s=0;C$s<C$u;++C$s){var C$o=C$r.passes[C$s],C$a=C$o.name||C$s,C$c=C$t.name+"-"+C$h+"-"+C$a,C$l=C$o.stage||"opaque",C$d=function(C$t,C$e){var C$i,C$n=C$e.properties||{},C$r=C$v(C$e.program);for(C$i in C$n)(function(C$e){if(!C$r.uniforms.find(function(C$t){return C$t.name===C$e}))cc.warnID(9107,C$t.name,C$e)})(C$i);var C$s={};return C$r.uniforms.forEach(function(C$t){var C$e=C$t.name,C$i=C$s[C$e]=Object.assign({},C$t),C$e=C$n[C$e],C$e=(C$m.enums2default[C$t.type],C$e?C$e.type===C$y.default.PARAM_TEXTURE_2D?null:C$e.type===C$y.default.PARAM_INT||C$e.type===C$y.default.PARAM_FLOAT?Array.isArray(C$e.value)?C$e.value[0]:C$e.value:new Float32Array(C$e.value):C$m.enums2default[C$t.type]);C$i.value=C$e}),C$s}(C$t,C$o),C$f=function(C$t){var C$e={};return C$v(C$t.program).defines.forEach(function(C$t){C$e[C$t.name]=C$m.enums2default[C$t.type]}),C$e}(C$o),C$a=C$_[C$s]=new C$p.default(C$a,C$c,C$o.program,C$l,C$d,C$f),C$c=(C$o.rasterizerState&&C$a.setCullMode(C$o.rasterizerState.cullMode),C$o.blendState&&C$o.blendState.targets[0]),C$l=(C$c&&C$a.setBlend(C$c.blend,C$c.blendEq,C$c.blendSrc,C$c.blendDst,C$c.blendAlphaEq,C$c.blendSrcAlpha,C$c.blendDstAlpha,C$c.blendColor),C$o.depthStencilState);C$l&&(C$a.setDepth(C$l.depthTest,C$l.depthWrite,C$l.depthFunc),C$a.setStencilFront(C$l.stencilTest,C$l.stencilFuncFront,C$l.stencilRefFront,C$l.stencilMaskFront,C$l.stencilFailOpFront,C$l.stencilZFailOpFront,C$l.stencilZPassOpFront,C$l.stencilWriteMaskFront),C$a.setStencilBack(C$l.stencilTest,C$l.stencilFuncBack,C$l.stencilRefBack,C$l.stencilMaskBack,C$l.stencilFailOpBack,C$l.stencilZFailOpBack,C$l.stencilZPassOpBack,C$l.stencilWriteMaskBack))}C$i[C$n]=new C$g.default(C$h,C$_)}return C$i}(C$t);return new C$i.default(C$t.name,C$e,0,C$t)};var C$p=C$n(C$t("../../../renderer/core/pass")),C$m=C$t("../../../renderer/types"),C$y=C$n(C$t("../../../renderer/enums")),C$i=C$n(C$t("./effect")),C$g=C$n(C$t("../../../renderer/core/technique"));function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$v(C$t){return cc.renderer._forward._programLib.getTemplate(C$t)}},{"../../../renderer/core/pass":303,"../../../renderer/core/technique":305,"../../../renderer/enums":307,"../../../renderer/types":335,"./effect":57}],56:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$r=C$n(C$t("../../../renderer/murmurhash2_gc")),C$s=C$n(C$t("./utils")),C$t=C$n(C$t("./effect-base"));function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$a(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$c(C$i){return function(){var C$t,C$e=C$o(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$o(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$o(C$t){return(C$o=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}cc.gfx;C$t=function(C$i){var C$t,C$e;C$n=C$i,(C$t=C$o).prototype=Object.create(C$n.prototype),(C$t.prototype.constructor=C$t).__proto__=C$n,C$c(C$o);function C$o(C$t){var C$e=C$i.call(this)||this;return C$e._effect=void 0,C$e._passes=[],C$e._stagePasses={},C$e._hash=0,C$e.init(C$t),C$e}C$t=C$o,(C$n=[{key:"effect",get:function(){return this._effect}},{key:"name",get:function(){return this._effect&&this._effect.name+" (variant)"}},{key:"passes",get:function(){return this._passes}},{key:"stagePasses",get:function(){return this._stagePasses}}])&&C$a(C$t.prototype,C$n),C$e&&C$a(C$t,C$e);var C$n=C$o.prototype;return C$n._onEffectChanged=function(){},C$n.init=function(C$t){if(C$t instanceof C$o&&(C$t=C$t.effect),this._effect=C$t,this._dirty=!0,C$t)for(var C$e=C$t.passes,C$i=this._passes,C$n=(C$i.length=0,this._stagePasses={}),C$r=0;C$r<C$e.length;C$r++){var C$s=C$i[C$r]=Object.setPrototypeOf({},C$e[C$r]);C$s._properties=Object.setPrototypeOf({},C$e[C$r]._properties),C$s._defines=Object.setPrototypeOf({},C$e[C$r]._defines),C$n[C$s._stage]||(C$n[C$s._stage]=[]),C$n[C$s._stage].push(C$s)}},C$n.updateHash=function(C$t){},C$n.getHash=function(){if(!this._dirty)return this._hash;this._dirty=!1;var C$t="",C$e=(C$t+=C$s.default.serializePasses(this._passes),this._effect);return C$e&&(C$t+=C$s.default.serializePasses(C$e.passes)),this._hash=(0,C$r.default)(C$t,666),this.updateHash(this._hash),this._hash},C$o}(C$t.default);C$i.default=C$t,cc.EffectVariant=C$t,C$e.exports=C$i.default},{"../../../renderer/murmurhash2_gc":330,"./effect-base":54,"./utils":61}],57:[function(C$t,C$e,C$i){"use strict";function C$r(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$o(C$i){return function(){var C$t,C$e=C$n(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$n(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$n(C$t){return(C$n=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$i.__esModule=!0,C$i.default=void 0;C$t=function(C$s){var C$t,C$e;C$i=C$s,(C$t=C$n).prototype=Object.create(C$i.prototype),(C$t.prototype.constructor=C$t).__proto__=C$i,C$o(C$n);function C$n(C$t,C$e,C$i,C$n){var C$r=C$s.call(this)||this;return C$r._techniques=[],C$r._asset=null,C$r.init(C$t,C$e,C$i,C$n,!0),C$r}C$t=C$n,(C$i=[{key:"technique",get:function(){return this._technique}},{key:"passes",get:function(){return this._technique.passes}}])&&C$r(C$t.prototype,C$i),C$e&&C$r(C$t,C$e);var C$i=C$n.prototype;return C$i.init=function(C$t,C$e,C$i,C$n,C$r){this._name=C$t,this._techniques=C$e,this._technique=C$e[C$i],this._asset=C$n},C$i.switchTechnique=function(C$t){C$t>=this._techniques.length?cc.warn("Can not switch to technique with index ["+C$t+"]"):this._technique=this._techniques[C$t]},C$i.clear=function(){this._techniques=[]},C$i.clone=function(){for(var C$t=[],C$e=0;C$e<this._techniques.length;C$e++)C$t.push(this._techniques[C$e].clone());var C$i=this._techniques.indexOf(this._technique);return new C$n(this._name,C$t,C$i,this._asset)},C$n}(((C$t=C$t("./effect-base"))&&C$t.__esModule?C$t:{default:C$t}).default);C$i.default=C$t,cc.Effect=C$t,C$e.exports=C$i.default},{"./effect-base":54}],58:[function(C$t,C$e,C$i){"use strict";C$t("./CCEffectAsset"),C$t("./CCMaterial"),C$t("./material-variant")},{"./CCEffectAsset":52,"./CCMaterial":53,"./material-variant":60}],59:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$r,C$n,C$s=C$o(C$t("./utils")),C$t=C$o(C$t("../../utils/pool"));function C$o(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$h(C$i){return function(){var C$t,C$e=C$a(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$a(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$a(C$t){return(C$a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}function C$c(){for(var C$t,C$e=arguments.length,C$i=new Array(C$e),C$n=0;C$n<C$e;C$n++)C$i[C$n]=arguments[C$n];return(C$t=C$r.call.apply(C$r,[this].concat(C$i))||this).enabled=!1,C$t._pool={},C$t}C$r=C$t.default,C$l=C$r,(C$n=C$c).prototype=Object.create(C$l.prototype),(C$n.prototype.constructor=C$n).__proto__=C$l,C$h(C$c),(C$n=C$c.prototype).get=function(C$t,C$e){var C$i,C$n,C$r=this._pool;if(C$t instanceof cc.MaterialVariant){if(!C$t._owner)return C$t._owner=C$e,C$t;if(C$t._owner===C$e)return C$t;C$t=C$t.material}return!this.enabled||C$r[C$i=C$t.effectAsset._uuid]&&(C$n=C$s.default.serializeDefines(C$t._effect._defines)+C$s.default.serializeTechniques(C$t._effect._techniques),C$n=C$r[C$i][C$n]&&C$r[C$i][C$n].pop()),C$n?this.count--:((C$n=new cc.MaterialVariant(C$t))._name=C$t._name+" (Instance)",C$n._uuid=C$t._uuid),C$n._owner=C$e,C$n},C$n.put=function(C$t){var C$e,C$i,C$n;this.enabled&&C$t._owner&&((C$e=this._pool)[C$i=C$t.effectAsset._uuid]||(C$e[C$i]={}),C$n=C$s.default.serializeDefines(C$t._effect._defines)+C$s.default.serializeTechniques(C$t._effect._techniques),C$e[C$i][C$n]||(C$e[C$i][C$n]=[]),this.count>this.maxSize||(this._clean(C$t),C$e[C$i][C$n].push(C$t),this.count++))},C$n.clear=function(){this._pool={},this.count=0},C$n._clean=function(C$t){C$t._owner=null};var C$l=new C$c;C$t.default.register("material",C$l),C$i.default=C$l,C$e.exports=C$i.default},{"../../utils/pool":266,"./utils":61}],60:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$s=C$n(C$t("./CCMaterial")),C$o=C$n(C$t("./effect-variant")),C$a=C$n(C$t("./material-pool"));function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$c(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$l(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$t=(0,cc._decorator.ccclass)("cc.MaterialVariant")(C$t=function(C$i){var C$t,C$e,C$n;C$e=C$i,(C$t=C$r).prototype=Object.create(C$e.prototype),(C$t.prototype.constructor=C$t).__proto__=C$e,C$l(C$r);function C$r(C$t){var C$e=C$i.call(this)||this;return C$e._owner=null,C$e._material=null,C$e.init(C$t),C$e}return C$r.createWithBuiltin=function(C$t,C$e){return C$r.create(C$s.default.getBuiltinMaterial(C$t),C$e)},C$r.create=function(C$t,C$e){return C$t?C$a.default.get(C$t,C$e):null},C$t=C$r,(C$e=[{key:"uuid",get:function(){return this._material.uuid}},{key:"owner",get:function(){return this._owner}},{key:"material",get:function(){return this._material}}])&&C$c(C$t.prototype,C$e),C$n&&C$c(C$t,C$n),C$r.prototype.init=function(C$t){this._effect=new C$o.default(C$t.effect),this._effectAsset=C$t._effectAsset,this._material=C$t},C$r}(C$s.default))||C$t;C$i.default=C$t,cc.MaterialVariant=C$t,C$e.exports=C$i.default},{"./CCMaterial":53,"./effect-variant":56,"./material-pool":59}],61:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$s=(C$t=C$t("../../../renderer/enums"))&&C$t.__esModule?C$t:{default:C$t};function C$o(C$t){var C$e,C$i="";for(C$e in C$t)C$i+=C$e+C$t[C$e];return C$i}function C$a(C$t){var C$e,C$i="";for(C$e in C$t){var C$n=C$t[C$e],C$r=C$n.value;C$r&&(C$n.type===C$s.default.PARAM_TEXTURE_2D||C$n.type===C$s.default.PARAM_TEXTURE_CUBE?C$i+=C$r._id+";":C$i+=C$r.toString()+";")}return C$i}C$i.default={serializeDefines:C$o,serializePasses:function(C$t){for(var C$e,C$i,C$n,C$r="",C$s=0;C$s<C$t.length;C$s++)C$r+=(C$e=C$t[C$s],C$n=C$i=void 0,C$n=C$e._programName+C$e._cullMode,C$e._blend&&(C$n+=C$e._blendEq+C$e._blendAlphaEq+C$e._blendSrc+C$e._blendDst+C$e._blendSrcAlpha+C$e._blendDstAlpha+C$e._blendColor),C$e._depthTest&&(C$n+=C$e._depthWrite+C$e._depthFunc),C$e._stencilTest&&(C$n+=C$e._stencilFuncFront+C$e._stencilRefFront+C$e._stencilMaskFront+C$e._stencilFailOpFront+C$e._stencilZFailOpFront+C$e._stencilZPassOpFront+C$e._stencilWriteMaskFront+C$e._stencilFuncBack+C$e._stencilRefBack+C$e._stencilMaskBack+C$e._stencilFailOpBack+C$e._stencilZFailOpBack+C$e._stencilZPassOpBack+C$e._stencilWriteMaskBack),C$i||(C$n+=C$a(C$e._properties)),C$n+=C$o(C$e._defines));return C$r},serializeUniforms:C$a},C$e.exports=C$i.default},{"../../../renderer/enums":307}],62:[function(C$t,C$e,C$i){"use strict";C$t("../CCNode").EventType;var C$x=56,C$b=7,C$o=cc.Enum({ONCE:0,ON_WINDOW_RESIZE:1,ALWAYS:2});var C$A=cc.Vec2.ZERO,C$C=cc.Vec2.ONE;function C$a(C$t,C$e){var C$h,C$u,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$_,C$d=C$e._target,C$f=(C$d?function(C$t,C$h,C$e,C$i){for(var C$n=C$t._parent.scaleX,C$r=C$t._parent.scaleY,C$s=0,C$o=0,C$a=C$t._parent;;){if(C$s+=C$a.x,C$o+=C$a.y,!(C$a=C$a._parent))return C$e.x=C$e.y=0,C$i.x=C$i.y=1;if(C$a===C$h)break;var C$c=C$a.scaleX,C$l=C$a.scaleY;C$s*=C$c,C$o*=C$l,C$n*=C$c,C$r*=C$l}C$i.x=0!==C$n?1/C$n:1,C$i.y=0!==C$r?1/C$r:1,C$e.x=-C$s,C$e.y=-C$o}(C$t,C$h=C$d,C$u=C$A,C$i=C$C):C$h=C$t._parent,(C$f=C$h)instanceof cc.Scene?cc.visibleRect:C$f._contentSize),C$p=C$h._anchorPoint,C$m=C$h instanceof cc.Scene,C$y=C$t.x,C$g=C$t.y,C$v=C$t._anchorPoint;C$e._alignFlags&C$x&&(C$r=C$f.width,C$a=C$m?(C$o=cc.visibleRect.left.x,cc.visibleRect.right.x):(C$o=-C$p.x*C$r)+C$r,C$o+=C$e._isAbsLeft?C$e._left:C$e._left*C$r,C$a-=C$e._isAbsRight?C$e._right:C$e._right*C$r,C$d&&(C$o=(C$o+=C$u.x)*C$i.x,C$a=(C$a+=C$u.x)*C$i.x),C$c=C$v.x,(C$s=C$t.scaleX)<0&&(C$c=1-C$c,C$s=-C$s),C$y=C$e.isStretchWidth?(C$l=C$a-C$o,0!==C$s&&(C$t.width=C$l/C$s),C$o+C$c*C$l):(C$l=C$t.width*C$s,C$e.isAlignHorizontalCenter?(C$s=C$e._isAbsHorizontalCenter?C$e._horizontalCenter:C$e._horizontalCenter*C$r,C$r=(.5-C$p.x)*C$f.width,C$d&&(C$s*=C$i.x,C$r=(C$r+=C$u.x)*C$i.x),C$r+(C$c-.5)*C$l+C$s):C$e.isAlignLeft?C$o+C$c*C$l:C$a+(C$c-1)*C$l)),C$e._alignFlags&C$b&&(C$r=C$f.height,C$s=C$m?(C$n=cc.visibleRect.bottom.y,cc.visibleRect.top.y):(C$n=-C$p.y*C$r)+C$r,C$n+=C$e._isAbsBottom?C$e._bottom:C$e._bottom*C$r,C$s-=C$e._isAbsTop?C$e._top:C$e._top*C$r,C$d&&(C$n=(C$n+=C$u.y)*C$i.y,C$s=(C$s+=C$u.y)*C$i.y),C$o=C$v.y,(C$a=C$t.scaleY)<0&&(C$o=1-C$o,C$a=-C$a),C$g=C$e.isStretchHeight?(C$_=C$s-C$n,0!==C$a&&(C$t.height=C$_/C$a),C$n+C$o*C$_):(C$_=C$t.height*C$a,C$e.isAlignVerticalCenter?(C$c=C$e._isAbsVerticalCenter?C$e._verticalCenter:C$e._verticalCenter*C$r,C$l=(.5-C$p.y)*C$f.height,C$d&&(C$c*=C$i.y,C$l=(C$l+=C$u.y)*C$i.y),C$l+(C$o-.5)*C$_+C$c):C$e.isAlignBottom?C$n+C$o*C$_:C$s+(C$o-1)*C$_)),C$t.setPosition(C$y,C$g)}function C$r(){var C$t=cc.director.getScene();if(C$t){if(C$n.isAligning=!0,C$n._nodesOrderDirty)C$c.length=0,function C$t(C$e){for(var C$i=C$e._widget,C$n=(C$i&&(C$a(C$e,C$i),C$i.alignMode!==C$o.ALWAYS?C$i.enabled=!1:C$c.push(C$i)),C$e._children),C$r=0;C$r<C$n.length;C$r++){var C$s=C$n[C$r];C$s._active&&C$t(C$s)}}(C$t),C$n._nodesOrderDirty=!1;else{var C$e,C$i=C$n._activeWidgetsIterator;for(C$i.i=0;C$i.i<C$c.length;++C$i.i)C$a((C$e=C$c[C$i.i]).node,C$e)}C$n.isAligning=!1}}var C$c=[];var C$n=cc._widgetManager=C$e.exports={_AlignFlags:{TOP:1,MID:2,BOT:4,LEFT:8,CENTER:16,RIGHT:32},isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new cc.js.array.MutableForwardIterator(C$c),init:function(C$t){C$t.on(cc.Director.EVENT_AFTER_UPDATE,C$r);C$t=this.onResized.bind(this);window.addEventListener("resize",C$t),window.addEventListener("orientationchange",C$t)},add:function(C$t){C$t.node._widget=C$t,this._nodesOrderDirty=!0},remove:function(C$t){C$t.node._widget=null,this._activeWidgetsIterator.remove(C$t)},onResized:function(){var C$t=cc.director.getScene();C$t&&this.refreshWidgetOnResized(C$t)},refreshWidgetOnResized:function(C$t){for(var C$e=cc.Node.isNode(C$t)&&C$t.getComponent(cc.Widget),C$i=(C$e&&C$e.alignMode===C$o.ON_WINDOW_RESIZE&&(C$e.enabled=!0),C$t._children),C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n];this.refreshWidgetOnResized(C$r)}},updateAlignment:function C$t(C$e){var C$i=C$e._parent,C$n=(cc.Node.isNode(C$i)&&C$t(C$i),C$e._widget||C$e.getComponent(cc.Widget));C$n&&C$i&&C$a(C$e,C$n)},AlignMode:C$o}},{"../CCNode":30}],63:[function(C$t,C$h,C$u){"use strict";var C$s=C$t("../value-types"),C$_=C$t("../geom-utils"),C$d=C$t("../utils/affine-transform"),C$n=C$t("../renderer/index"),C$f=C$t("../renderer/render-flow"),C$i=C$t("../CCGame"),C$p=null,C$p=C$t("../../renderer/scene/camera"),C$o=cc.mat4(),C$r=cc.mat4(),C$e=cc.v3(),C$m=cc.v3(),C$a=cc.v3(),C$c=[],C$l=null;function C$y(){var C$t,C$e;C$l&&(C$t=C$l.getNode(),C$e=cc.game.canvas,C$t.z=C$e.height/1.1566,C$t.x=C$e.width/2,C$t.y=C$e.height/2)}var C$t=cc.Enum({COLOR:1,DEPTH:2,STENCIL:4}),C$g=cc.Enum({OPAQUE:1,TRANSPARENT:2}),C$t=cc.Class({name:"cc.Camera",extends:cc.Component,ctor:function(){var C$t;C$i.renderType!==C$i.RENDER_TYPE_CANVAS?((C$t=new C$p).setStages(["opaque"]),C$t.dirty=!0,this._inited=!1,this._camera=C$t):this._inited=!0},editor:!1,properties:{_cullingMask:4294967295,_clearFlags:C$t.DEPTH|C$t.STENCIL,_backgroundColor:cc.color(0,0,0,255),_depth:0,_zoomRatio:1,_targetTexture:null,_fov:60,_orthoSize:10,_nearClip:1,_farClip:4096,_ortho:!0,_rect:cc.rect(0,0,1,1),_renderStages:1,_alignWithScreen:!0,zoomRatio:{get:function(){return this._zoomRatio},set:function(C$t){this._zoomRatio=C$t},tooltip:!1},fov:{get:function(){return this._fov},set:function(C$t){this._fov=C$t},tooltip:!1},orthoSize:{get:function(){return this._orthoSize},set:function(C$t){this._orthoSize=C$t},tooltip:!1},nearClip:{get:function(){return this._nearClip},set:function(C$t){this._nearClip=C$t,this._updateClippingpPlanes()},tooltip:!1},farClip:{get:function(){return this._farClip},set:function(C$t){this._farClip=C$t,this._updateClippingpPlanes()},tooltip:!1},ortho:{get:function(){return this._ortho},set:function(C$t){this._ortho=C$t,this._updateProjection()},tooltip:!1},rect:{get:function(){return this._rect},set:function(C$t){this._rect=C$t,this._updateRect()},tooltip:!1},cullingMask:{get:function(){return this._cullingMask},set:function(C$t){this._cullingMask=C$t,this._updateCameraMask()},tooltip:!1},clearFlags:{get:function(){return this._clearFlags},set:function(C$t){this._clearFlags=C$t,this._camera&&this._camera.setClearFlags(C$t)},tooltip:!1},backgroundColor:{get:function(){return this._backgroundColor},set:function(C$t){this._backgroundColor.equals(C$t)||(this._backgroundColor.set(C$t),this._updateBackgroundColor())},tooltip:!1},depth:{get:function(){return this._depth},set:function(C$t){this._depth=C$t,this._camera&&this._camera.setPriority(C$t)},tooltip:!1},targetTexture:{get:function(){return this._targetTexture},set:function(C$t){this._targetTexture=C$t,this._updateTargetTexture()},tooltip:!1},renderStages:{get:function(){return this._renderStages},set:function(C$t){this._renderStages=C$t,this._updateStages()},tooltip:!1},alignWithScreen:{get:function(){return this._alignWithScreen},set:function(C$t){this._alignWithScreen=C$t}},_is3D:{get:function(){return this.node&&this.node._is3DNode}}},statics:{main:null,cameras:C$c,ClearFlags:C$t,findCamera:function(C$t){for(var C$e=0,C$i=C$c.length;C$e<C$i;C$e++){var C$n=C$c[C$e];if(C$n.containsNode(C$t))return C$n}return null},_findRendererCamera:function(C$t){for(var C$e=C$n.scene._cameras,C$i=0;C$i<C$e._count;C$i++)if(C$e._data[C$i]._cullingMask&C$t._cullingMask)return C$e._data[C$i];return null},_setupDebugCamera:function(){var C$t,C$e;C$l||C$i.renderType!==C$i.RENDER_TYPE_CANVAS&&(C$t=new C$p,(C$l=C$t).setStages(["opaque"]),C$t.setFov(60*Math.PI/180),C$t.setNear(.1),C$t.setFar(4096),C$t.dirty=!0,C$t.cullingMask=1<<cc.Node.BuiltinGroupIndex.DEBUG,C$t.setPriority(cc.macro.MAX_ZINDEX),C$t.setClearFlags(0),C$t.setColor(0,0,0,0),C$e=new cc.Node,C$t.setNode(C$e),C$y(),cc.view.on("design-resolution-changed",C$y),C$n.scene.addCamera(C$t))}},_updateCameraMask:function(){var C$t;this._camera&&(C$t=this._cullingMask&~(1<<cc.Node.BuiltinGroupIndex.DEBUG),this._camera.cullingMask=C$t)},_updateBackgroundColor:function(){var C$t;this._camera&&(C$t=this._backgroundColor,this._camera.setColor(C$t.r/255,C$t.g/255,C$t.b/255,C$t.a/255))},_updateTargetTexture:function(){var C$t;this._camera&&(C$t=this._targetTexture,this._camera.setFrameBuffer(C$t?C$t._framebuffer:null))},_updateClippingpPlanes:function(){this._camera&&(this._camera.setNear(this._nearClip),this._camera.setFar(this._farClip))},_updateProjection:function(){var C$t;this._camera&&(C$t=this._ortho?1:0,this._camera.setType(C$t))},_updateRect:function(){var C$t;this._camera&&(C$t=this._rect,this._camera.setRect(C$t.x,C$t.y,C$t.width,C$t.height))},_updateStages:function(){var C$t=this._renderStages,C$e=[];C$t&C$g.OPAQUE&&C$e.push("opaque"),C$t&C$g.TRANSPARENT&&C$e.push("transparent"),this._camera.setStages(C$e)},_init:function(){var C$t;this._inited||(this._inited=!0,(C$t=this._camera)&&(C$t.setNode(this.node),C$t.setClearFlags(this._clearFlags),C$t.setPriority(this._depth),this._updateBackgroundColor(),this._updateCameraMask(),this._updateTargetTexture(),this._updateClippingpPlanes(),this._updateProjection(),this._updateStages(),this._updateRect(),this.beforeDraw()))},onLoad:function(){this._init()},onEnable:function(){C$i.renderType!==C$i.RENDER_TYPE_CANVAS&&(cc.director.on(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),C$n.scene.addCamera(this._camera)),C$c.push(this)},onDisable:function(){C$i.renderType!==C$i.RENDER_TYPE_CANVAS&&(cc.director.off(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),C$n.scene.removeCamera(this._camera)),cc.js.array.remove(C$c,this)},getScreenToWorldMatrix2D:function(C$t){return this.getWorldToScreenMatrix2D(C$t),C$s.Mat4.invert(C$t,C$t),C$t},getWorldToScreenMatrix2D:function(C$t){this.node.getWorldRT(C$o);var C$e=this.zoomRatio,C$i=C$o.m,C$e=(C$i[0]*=C$e,C$i[1]*=C$e,C$i[4]*=C$e,C$i[5]*=C$e,C$i[12]),C$n=C$i[13],C$r=cc.visibleRect.center;return C$i[12]=C$r.x-(C$i[0]*C$e+C$i[4]*C$n),C$i[13]=C$r.y-(C$i[1]*C$e+C$i[5]*C$n),C$t!==C$o&&C$s.Mat4.copy(C$t,C$o),C$t},getScreenToWorldPoint:function(C$t,C$e){return this.node.is3DNode?(C$e=C$e||new cc.Vec3,this._camera.screenToWorld(C$e,C$t,cc.visibleRect.width,cc.visibleRect.height)):(C$e=C$e||new cc.Vec2,this.getScreenToWorldMatrix2D(C$o),C$s.Vec2.transformMat4(C$e,C$t,C$o)),C$e},getWorldToScreenPoint:function(C$t,C$e){return this.node.is3DNode?(C$e=C$e||new cc.Vec3,this._camera.worldToScreen(C$e,C$t,cc.visibleRect.width,cc.visibleRect.height)):(C$e=C$e||new cc.Vec2,this.getWorldToScreenMatrix2D(C$o),C$s.Vec2.transformMat4(C$e,C$t,C$o)),C$e},getRay:function(C$t){return cc.geomUtils?(C$s.Vec3.set(C$a,C$t.x,C$t.y,1),this._camera.screenToWorld(C$m,C$a,cc.visibleRect.width,cc.visibleRect.height),this.ortho?(C$s.Vec3.set(C$a,C$t.x,C$t.y,-1),this._camera.screenToWorld(C$e,C$a,cc.visibleRect.width,cc.visibleRect.height)):this.node.getWorldPosition(C$e),C$_.Ray.fromPoints(new C$_.Ray,C$e,C$m)):C$t},containsNode:function(C$t){return C$t._cullingMask&this.cullingMask},render:function(C$t){if(!(C$t=C$t||cc.director.getScene()))return null;this.node.getWorldMatrix(C$o),this.beforeDraw(),C$f.render(C$t),C$n._forward.renderCamera(this._camera,C$n.scene)},_onAlignWithScreen:function(){var C$t=cc.game.canvas.height/cc.view._scaleY,C$e=(this._targetTexture&&(C$t=cc.visibleRect.height),this._fov*cc.macro.RAD);this.node.z=C$t/(2*Math.tan(C$e/2)),C$e=2*Math.atan(Math.tan(C$e/2)/this.zoomRatio),this._camera.setFov(C$e),this._camera.setOrthoHeight(C$t/2/this.zoomRatio),this.node.setRotation(0,0,0,1)},beforeDraw:function(){var C$t;this._camera&&(this._alignWithScreen?this._onAlignWithScreen():(C$t=this._fov*cc.macro.RAD,C$t=2*Math.atan(Math.tan(C$t/2)/this.zoomRatio),this._camera.setFov(C$t),this._camera.setOrthoHeight(this._orthoSize/this.zoomRatio)),this._camera.dirty=!0)}});cc.js.mixin(C$t.prototype,{getNodeToCameraTransform:function(C$t){var C$e=C$d.identity();return C$t.getWorldMatrix(C$r),this.containsNode(C$t)&&(this.getWorldToCameraMatrix(C$o),C$s.Mat4.mul(C$r,C$r,C$o)),C$d.fromMat4(C$e,C$r),C$e},getCameraToWorldPoint:function(C$t,C$e){return this.getScreenToWorldPoint(C$t,C$e)},getWorldToCameraPoint:function(C$t,C$e){return this.getWorldToScreenPoint(C$t,C$e)},getCameraToWorldMatrix:function(C$t){return this.getScreenToWorldMatrix2D(C$t)},getWorldToCameraMatrix:function(C$t){return this.getWorldToScreenMatrix2D(C$t)}}),C$h.exports=cc.Camera=C$t},{"../../renderer/scene/camera":332,"../CCGame":29,"../geom-utils":123,"../renderer/index":220,"../renderer/render-flow":221,"../utils/affine-transform":254,"../value-types":279}],64:[function(C$t,C$e,C$i){"use strict";cc.Collider.Box=cc.Class({properties:{_offset:cc.v2(0,0),_size:cc.size(100,100),offset:{tooltip:!1,get:function(){return this._offset},set:function(C$t){this._offset=C$t},type:cc.Vec2},size:{tooltip:!1,get:function(){return this._size},set:function(C$t){this._size.width=C$t.width<0?0:C$t.width,this._size.height=C$t.height<0?0:C$t.height},type:cc.Size}},resetInEditor:!1});var C$n=cc.Class({name:"cc.BoxCollider",extends:cc.Collider,mixins:[cc.Collider.Box],editor:!1});cc.BoxCollider=C$e.exports=C$n},{}],65:[function(C$t,C$e,C$i){"use strict";cc.Collider.Circle=cc.Class({properties:{_offset:cc.v2(0,0),_radius:50,offset:{get:function(){return this._offset},set:function(C$t){this._offset=C$t},type:cc.Vec2},radius:{tooltip:!1,get:function(){return this._radius},set:function(C$t){this._radius=C$t<0?0:C$t}}},resetInEditor:!1});var C$n=cc.Class({name:"cc.CircleCollider",extends:cc.Collider,mixins:[cc.Collider.Circle],editor:!1});cc.CircleCollider=C$e.exports=C$n},{}],66:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.Collider",extends:cc.Component,properties:{editing:{default:!1,serializable:!1,tooltip:!1},tag:{tooltip:!1,default:0,range:[0,1e7],type:cc.Integer}},onDisable:function(){cc.director.getCollisionManager().removeCollider(this)},onEnable:function(){cc.director.getCollisionManager().addCollider(this)}});cc.Collider=C$e.exports=C$n},{}],67:[function(C$t,C$e,C$i){"use strict";var C$D=(C$n=C$t("../value-types/vec2"))&&C$n.__esModule?C$n:{default:C$n};var C$s=C$t("./CCContact"),C$h=C$s.CollisionType,C$o=C$t("../CCNode").EventType,C$L=new C$D.default;var C$n=cc.Class({mixins:[cc.EventTarget],properties:{enabled:!1,enabledDrawBoundingBox:!1},ctor:function(){this._contacts=[],this._colliders=[],this._debugDrawer=null,this._enabledDebugDraw=!1,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},update:function(C$t){if(this.enabled){for(var C$e=this._colliders,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)this.updateCollider(C$e[C$i]);var C$r=this._contacts,C$s=[];for(C$i=0,C$n=C$r.length;C$i<C$n;C$i++){var C$o=C$r[C$i].updateState();C$o!==C$h.None&&C$s.push([C$o,C$r[C$i]])}for(C$i=0,C$n=C$s.length;C$i<C$n;C$i++){var C$a=C$s[C$i];this._doCollide(C$a[0],C$a[1])}this.drawColliders()}},_doCollide:function(C$t,C$e){var C$i;switch(C$t){case C$h.CollisionEnter:C$i="onCollisionEnter";break;case C$h.CollisionStay:C$i="onCollisionStay";break;case C$h.CollisionExit:C$i="onCollisionExit"}for(var C$n,C$r=C$e.collider1,C$s=C$e.collider2,C$o=C$r.node._components,C$a=C$s.node._components,C$c=0,C$l=C$o.length;C$c<C$l;C$c++)(C$n=C$o[C$c])[C$i]&&C$n[C$i](C$s,C$r);for(C$c=0,C$l=C$a.length;C$c<C$l;C$c++)(C$n=C$a[C$c])[C$i]&&C$n[C$i](C$r,C$s)},shouldCollide:function(C$t,C$e){var C$t=C$t.node,C$e=C$e.node,C$i=cc.game.collisionMatrix;return C$t!==C$e&&C$i[C$t.groupIndex][C$e.groupIndex]},initCollider:function(C$t){var C$e;C$t.world||((C$e=C$t.world={}).aabb=cc.rect(),C$e.preAabb=cc.rect(),C$e.matrix=cc.mat4(),C$e.radius=0,C$t instanceof cc.BoxCollider?(C$e.position=null,C$e.points=[cc.v2(),cc.v2(),cc.v2(),cc.v2()]):C$t instanceof cc.PolygonCollider?(C$e.position=null,C$e.points=C$t.points.map(function(C$t){return cc.v2(C$t.x,C$t.y)})):C$t instanceof cc.CircleCollider&&(C$e.position=cc.v2(),C$e.points=null))},updateCollider:function(C$t){var C$e,C$h,C$i,C$u,C$_,C$d,C$f=C$t.offset,C$n=C$t.world,C$r=C$n.aabb,C$p=C$n.matrix,C$s=(C$t.node.getWorldMatrix(C$p),C$n.preAabb);if(C$s.x=C$r.x,C$s.y=C$r.y,C$s.width=C$r.width,C$s.height=C$r.height,C$t instanceof cc.BoxCollider){var C$s=C$t.size,C$s=(C$r.x=C$f.x-C$s.width/2,C$r.y=C$f.y-C$s.height/2,C$r.width=C$s.width,C$r.height=C$s.height,C$n.points),C$m=C$s[0],C$y=C$s[1],C$g=C$s[2],C$s=C$s[3],C$v=(C$e=C$p,C$C=C$m,C$a=C$y,C$A=C$g,C$h=C$s,C$i=(C$o=C$r).x,C$c=C$o.y,C$v=C$o.width,C$o=C$o.height,C$u=(C$e=C$e.m)[0],C$_=C$e[1],C$x=C$e[4],C$b=C$e[5],C$d=C$u*C$i+C$x*C$c+C$e[12],C$i=C$_*C$i+C$b*C$c+C$e[13],C$c=C$u*C$v,C$e=C$_*C$v,C$u=C$x*C$o,C$_=C$b*C$o,C$a.x=C$d,C$a.y=C$i,C$A.x=C$c+C$d,C$A.y=C$e+C$i,C$C.x=C$u+C$d,C$C.y=C$_+C$i,C$h.x=C$c+C$u+C$d,C$h.y=C$e+C$_+C$i,Math.min(C$m.x,C$y.x,C$g.x,C$s.x)),C$x=Math.min(C$m.y,C$y.y,C$g.y,C$s.y),C$b=Math.max(C$m.x,C$y.x,C$g.x,C$s.x),C$o=Math.max(C$m.y,C$y.y,C$g.y,C$s.y);C$r.x=C$v,C$r.y=C$x,C$r.width=C$b-C$v,C$r.height=C$o-C$x}else if(C$t instanceof cc.CircleCollider){C$D.default.transformMat4(C$L,C$t.offset,C$p),C$n.position.x=C$L.x,C$n.position.y=C$L.y;var C$a=C$p.m,C$A=C$a[12],C$C=C$a[13],C$c=(C$a[12]=C$a[13]=0,C$L.x=C$t.radius,C$L.y=0,C$D.default.transformMat4(C$L,C$L,C$p),Math.sqrt(C$L.x*C$L.x+C$L.y*C$L.y));C$n.radius=C$c,C$r.x=C$n.position.x-C$c,C$r.y=C$n.position.y-C$c,C$r.width=2*C$c,C$r.height=2*C$c,C$a[12]=C$A,C$a[13]=C$C}else if(C$t instanceof cc.PolygonCollider){for(var C$S=C$t.points,C$T=C$n.points,C$w=(C$T.length=C$S.length,1e6),C$E=1e6,C$M=-1e6,C$I=-1e6,C$l=0,C$B=C$S.length;C$l<C$B;C$l++){C$T[C$l]||(C$T[C$l]=cc.v2()),C$L.x=C$S[C$l].x+C$f.x,C$L.y=C$S[C$l].y+C$f.y,C$D.default.transformMat4(C$L,C$L,C$p);var C$R=C$L.x,C$P=C$L.y;C$M<(C$T[C$l].x=C$R)&&(C$M=C$R),C$R<C$w&&(C$w=C$R),C$I<(C$T[C$l].y=C$P)&&(C$I=C$P),C$P<C$E&&(C$E=C$P)}C$r.x=C$w,C$r.y=C$E,C$r.width=C$M-C$w,C$r.height=C$I-C$E}},addCollider:function(C$t){var C$e=this._colliders;if(-1===C$e.indexOf(C$t)){for(var C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];this.shouldCollide(C$t,C$r)&&(C$r=new C$s(C$t,C$r),this._contacts.push(C$r))}C$e.push(C$t),this.initCollider(C$t)}C$t.node.on(C$o.GROUP_CHANGED,this.onNodeGroupChanged,this)},removeCollider:function(C$t){var C$e=this._colliders,C$i=C$e.indexOf(C$t);if(0<=C$i){C$e.splice(C$i,1);for(var C$n=this._contacts,C$r=C$n.length-1;0<=C$r;C$r--){var C$s=C$n[C$r];C$s.collider1!==C$t&&C$s.collider2!==C$t||(C$s.touching&&this._doCollide(C$h.CollisionExit,C$s),C$n.splice(C$r,1))}C$t.node.off(C$o.GROUP_CHANGED,this.onNodeGroupChanged,this)}else cc.errorID(6600)},onNodeGroupChanged:function(C$t){for(var C$e=C$t.getComponents(cc.Collider),C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];cc.PhysicsCollider&&C$r instanceof cc.PhysicsCollider||(this.removeCollider(C$r),this.addCollider(C$r))}},drawColliders:function(){if(this._enabledDebugDraw){this._checkDebugDrawValid();for(var C$t=this._debugDrawer,C$e=(C$t.clear(),this._colliders),C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$t.strokeColor=cc.Color.WHITE,C$r instanceof cc.BoxCollider||C$r instanceof cc.PolygonCollider){var C$s=C$r.world.points;if(0<C$s.length){C$t.moveTo(C$s[0].x,C$s[0].y);for(var C$o=1;C$o<C$s.length;C$o++)C$t.lineTo(C$s[C$o].x,C$s[C$o].y);C$t.close(),C$t.stroke()}}else C$r instanceof cc.CircleCollider&&(C$t.circle(C$r.world.position.x,C$r.world.position.y,C$r.world.radius),C$t.stroke());this.enabledDrawBoundingBox&&(C$r=C$r.world.aabb,C$t.strokeColor=cc.Color.BLUE,C$t.moveTo(C$r.xMin,C$r.yMin),C$t.lineTo(C$r.xMin,C$r.yMax),C$t.lineTo(C$r.xMax,C$r.yMax),C$t.lineTo(C$r.xMax,C$r.yMin),C$t.close(),C$t.stroke())}}},_checkDebugDrawValid:function(){var C$t;this._debugDrawer&&this._debugDrawer.isValid||((C$t=new cc.Node("COLLISION_MANAGER_DEBUG_DRAW")).zIndex=cc.macro.MAX_ZINDEX,cc.game.addPersistRootNode(C$t),this._debugDrawer=C$t.addComponent(cc.Graphics))}});cc.js.getset(C$n.prototype,"enabledDebugDraw",function(){return this._enabledDebugDraw},function(C$t){C$t&&!this._enabledDebugDraw?(this._checkDebugDrawValid(),this._debugDrawer.node.active=!0):!C$t&&this._enabledDebugDraw&&(this._debugDrawer.clear(!0),this._debugDrawer.node.active=!1),this._enabledDebugDraw=C$t}),cc.CollisionManager=C$e.exports=C$n},{"../CCNode":30,"../value-types/vec2":288,"./CCContact":68}],68:[function(C$t,C$e,C$i){"use strict";var C$o=C$t("./CCIntersection"),C$n=cc.Enum({None:0,CollisionEnter:1,CollisionStay:2,CollisionExit:3});function C$r(C$t,C$e){this.collider1=C$t,this.collider2=C$e,this.touching=!1;var C$i=C$t instanceof cc.BoxCollider||C$t instanceof cc.PolygonCollider,C$n=C$e instanceof cc.BoxCollider||C$e instanceof cc.PolygonCollider,C$r=C$t instanceof cc.CircleCollider,C$s=C$e instanceof cc.CircleCollider;C$i&&C$n?this.testFunc=C$o.polygonPolygon:C$r&&C$s?this.testFunc=C$o.circleCircle:C$i&&C$s?this.testFunc=C$o.polygonCircle:C$r&&C$n?(this.testFunc=C$o.polygonCircle,this.collider1=C$e,this.collider2=C$t):cc.errorID(6601,cc.js.getClassName(C$t),cc.js.getClassName(C$e))}C$r.prototype.test=function(){var C$t=this.collider1.world,C$e=this.collider2.world;return!!C$t.aabb.intersects(C$e.aabb)&&(this.testFunc===C$o.polygonPolygon?this.testFunc(C$t.points,C$e.points):this.testFunc===C$o.circleCircle?this.testFunc(C$t,C$e):this.testFunc===C$o.polygonCircle&&this.testFunc(C$t.points,C$e))},C$r.prototype.updateState=function(){var C$t=this.test(),C$e=C$n.None;return C$t&&!this.touching?(this.touching=!0,C$e=C$n.CollisionEnter):C$t&&this.touching?C$e=C$n.CollisionStay:!C$t&&this.touching&&(this.touching=!1,C$e=C$n.CollisionExit),C$e},C$r.CollisionType=C$n,C$e.exports=C$r},{"./CCIntersection":69}],69:[function(C$t,C$e,C$i){"use strict";var C$n={};function C$o(C$t,C$e,C$i,C$n){var C$r=(C$n.x-C$i.x)*(C$t.y-C$i.y)-(C$n.y-C$i.y)*(C$t.x-C$i.x),C$s=(C$e.x-C$t.x)*(C$t.y-C$i.y)-(C$e.y-C$t.y)*(C$t.x-C$i.x),C$n=(C$n.y-C$i.y)*(C$e.x-C$t.x)-(C$n.x-C$i.x)*(C$e.y-C$t.y);if(0!=C$n){C$i=C$r/C$n,C$e=C$s/C$n;if(0<=C$i&&C$i<=1&&0<=C$e&&C$e<=1)return!0}return!1}function C$c(C$t,C$e,C$i){for(var C$n=C$i.length,C$r=0;C$r<C$n;++C$r)if(C$o(C$t,C$e,C$i[C$r],C$i[(C$r+1)%C$n]))return!0;return!1}function C$l(C$t,C$e){for(var C$i=!1,C$h=C$t.x,C$n=C$t.y,C$r=C$e.length,C$s=0,C$o=C$r-1;C$s<C$r;C$o=C$s++){var C$a=C$e[C$s].x,C$c=C$e[C$s].y,C$u=C$e[C$o].x,C$l=C$e[C$o].y;C$n<C$c!=C$n<C$l&&C$h<(C$u-C$a)*(C$n-C$c)/(C$l-C$c)+C$a&&(C$i=!C$i)}return C$i}function C$s(C$t,C$e,C$i,C$n){var C$r=(C$o=C$i.x-C$e.x)*C$o+(C$a=C$i.y-C$e.y)*C$a,C$s=((C$t.x-C$e.x)*C$o+(C$t.y-C$e.y)*C$a)/C$r,C$n=C$n?!C$r||C$s<0?C$e:1<C$s?C$i:cc.v2(C$e.x+C$s*C$o,C$e.y+C$s*C$a):cc.v2(C$e.x+C$s*C$o,C$e.y+C$s*C$a),C$o=C$t.x-C$n.x,C$a=C$t.y-C$n.y;return Math.sqrt(C$o*C$o+C$a*C$a)}C$n.lineLine=C$o,C$n.lineRect=function(C$t,C$e,C$i){var C$n=new cc.Vec2(C$i.x,C$i.y),C$r=new cc.Vec2(C$i.x,C$i.yMax),C$s=new cc.Vec2(C$i.xMax,C$i.yMax),C$i=new cc.Vec2(C$i.xMax,C$i.y);return!!C$o(C$t,C$e,C$n,C$r)||(!!C$o(C$t,C$e,C$r,C$s)||(!!C$o(C$t,C$e,C$s,C$i)||!!C$o(C$t,C$e,C$i,C$n)))},C$n.linePolygon=C$c,C$n.rectRect=function(C$t,C$e){var C$i=C$t.x,C$n=C$t.y,C$r=C$t.x+C$t.width,C$t=C$t.y+C$t.height,C$s=C$e.x,C$o=C$e.y,C$a=C$e.x+C$e.width,C$e=C$e.y+C$e.height;return C$i<=C$a&&C$s<=C$r&&C$n<=C$e&&C$o<=C$t},C$n.rectPolygon=function(C$t,C$e){var C$i,C$n,C$r=new cc.Vec2(C$t.x,C$t.y),C$s=new cc.Vec2(C$t.x,C$t.yMax),C$o=new cc.Vec2(C$t.xMax,C$t.yMax),C$a=new cc.Vec2(C$t.xMax,C$t.y);if(C$c(C$r,C$s,C$e))return!0;if(C$c(C$s,C$o,C$e))return!0;if(C$c(C$o,C$a,C$e))return!0;if(C$c(C$a,C$r,C$e))return!0;for(C$i=0,C$n=C$e.length;C$i<C$n;++C$i)if(C$l(C$e[C$i],C$t))return!0;return!!C$l(C$r,C$e)||(!!C$l(C$s,C$e)||(!!C$l(C$o,C$e)||!!C$l(C$a,C$e)))},C$n.polygonPolygon=function(C$t,C$e){for(var C$i=0,C$n=C$t.length;C$i<C$n;++C$i)if(C$c(C$t[C$i],C$t[(C$i+1)%C$n],C$e))return!0;for(C$i=0,C$n=C$e.length;C$i<C$n;++C$i)if(C$l(C$e[C$i],C$t))return!0;for(C$i=0,C$n=C$t.length;C$i<C$n;++C$i)if(C$l(C$t[C$i],C$e))return!0;return!1},C$n.circleCircle=function(C$t,C$e){return C$t.position.sub(C$e.position).mag()<C$t.radius+C$e.radius},C$n.polygonCircle=function(C$t,C$e){var C$i=C$e.position;if(C$l(C$i,C$t))return!0;for(var C$n=0,C$r=C$t.length;C$n<C$r;C$n++)if(C$s(C$i,0===C$n?C$t[C$t.length-1]:C$t[C$n-1],C$t[C$n],!0)<C$e.radius)return!0;return!1},C$n.pointInPolygon=C$l,C$n.pointLineDistance=C$s,cc.Intersection=C$e.exports=C$n},{}],70:[function(C$t,C$e,C$i){"use strict";cc.Collider.Polygon=cc.Class({properties:{threshold:{default:1,serializable:!1,visible:!1},_offset:cc.v2(0,0),offset:{get:function(){return this._offset},set:function(C$t){this._offset=C$t},type:cc.Vec2},points:{tooltip:!1,default:function(){return[cc.v2(-50,-50),cc.v2(50,-50),cc.v2(50,50),cc.v2(-50,50)]},type:[cc.Vec2]}},resetPointsByContour:!1});var C$n=cc.Class({name:"cc.PolygonCollider",extends:cc.Collider,mixins:[cc.Collider.Polygon],editor:!1});cc.PolygonCollider=C$e.exports=C$n},{}],71:[function(C$t,C$e,C$i){"use strict";C$t("./CCCollisionManager"),C$t("./CCCollider"),C$t("./CCBoxCollider"),C$t("./CCCircleCollider"),C$t("./CCPolygonCollider")},{"./CCBoxCollider":64,"./CCCircleCollider":65,"./CCCollider":66,"./CCCollisionManager":67,"./CCPolygonCollider":70}],72:[function(C$t,C$h,C$u){"use strict";C$t("./platform/CCClass");var C$e=C$t("./platform/CCObject").Flags,C$i=C$t("./platform/js").array,C$n=C$e.IsStartCalled,C$r=C$e.IsOnEnableCalled;C$e.IsEditorOnEnableCalled;function C$s(C$t,C$e){for(var C$i=C$e.constructor._executionOrder,C$n=C$e._id,C$r=0,C$s=C$t.length-1,C$o=C$s>>>1;C$r<=C$s;C$o=C$r+C$s>>>1){var C$a=C$t[C$o],C$c=C$a.constructor._executionOrder;if(C$i<C$c)C$s=C$o-1;else if(C$c<C$i)C$r=C$o+1;else{C$c=C$a._id;if(C$n<C$c)C$s=C$o-1;else{if(!(C$c<C$n))return C$o;C$r=C$o+1}}}return~C$r}function C$o(C$t,C$e){for(var C$i=C$t.array,C$n=C$t.i+1;C$n<C$i.length;){var C$r=C$i[C$n];C$r._enabled&&C$r.node._activeInHierarchy?++C$n:(C$t.removeAt(C$n),C$e&&(C$r._objFlags&=~C$e))}}C$t=cc.Class({__ctor__:function(C$t){var C$e=C$i.MutableForwardIterator;this._zero=new C$e([]),this._neg=new C$e([]),this._pos=new C$e([]),this._invoke=C$t},statics:{stableRemoveInactive:C$o},add:null,remove:null,invoke:null});function C$a(C$t,C$e){return C$t.constructor._executionOrder-C$e.constructor._executionOrder}var C$c=cc.Class({extends:C$t,add:function(C$t){var C$e=C$t.constructor._executionOrder;(0===C$e?this._zero:C$e<0?this._neg:this._pos).array.push(C$t)},remove:function(C$t){var C$e=C$t.constructor._executionOrder;(0===C$e?this._zero:C$e<0?this._neg:this._pos).fastRemove(C$t)},cancelInactive:function(C$t){C$o(this._zero,C$t),C$o(this._neg,C$t),C$o(this._pos,C$t)},invoke:function(){var C$t=this._neg,C$t=(0<C$t.array.length&&(C$t.array.sort(C$a),this._invoke(C$t),C$t.array.length=0),this._invoke(this._zero),this._zero.array.length=0,this._pos);0<C$t.array.length&&(C$t.array.sort(C$a),this._invoke(C$t),C$t.array.length=0)}}),C$_=cc.Class({extends:C$t,add:function(C$t){var C$e,C$i=C$t.constructor._executionOrder;0===C$i?this._zero.array.push(C$t):(C$e=C$s(C$i=(C$i<0?this._neg:this._pos).array,C$t))<0&&C$i.splice(~C$e,0,C$t)},remove:function(C$t){var C$e=C$t.constructor._executionOrder;0===C$e?this._zero.fastRemove(C$t):0<=(C$t=C$s((C$e=C$e<0?this._neg:this._pos).array,C$t))&&C$e.removeAt(C$t)},invoke:function(C$t){0<this._neg.array.length&&this._invoke(this._neg,C$t),this._invoke(this._zero,C$t),0<this._pos.array.length&&this._invoke(this._pos,C$t)}});function C$l(C$r,C$t,C$s,C$o){return function(C$e,C$i){try{C$o(C$e,C$i)}catch(C$t){cc._throw(C$t);var C$n=C$e.array;for(C$s&&(C$n[C$e.i]._objFlags|=C$s),++C$e.i;C$e.i<C$n.length;++C$e.i)try{C$r(C$n[C$e.i],C$i)}catch(C$t){cc._throw(C$t),C$s&&(C$n[C$e.i]._objFlags|=C$s)}}}}var C$d=C$l(function(C$t){C$t.start(),C$t._objFlags|=C$n},0,C$n,function(C$t){var C$e=C$t.array;for(C$t.i=0;C$t.i<C$e.length;++C$t.i){var C$i=C$e[C$t.i];C$i.start(),C$i._objFlags|=C$n}}),C$f=C$l(function(C$t,C$e){C$t.update(C$e)},0,void 0,function(C$t,C$e){var C$i=C$t.array;for(C$t.i=0;C$t.i<C$i.length;++C$t.i)C$i[C$t.i].update(C$e)}),C$p=C$l(function(C$t,C$e){C$t.lateUpdate(C$e)},0,void 0,function(C$t,C$e){var C$i=C$t.array;for(C$t.i=0;C$t.i<C$i.length;++C$t.i)C$i[C$t.i].lateUpdate(C$e)});function C$m(){this.startInvoker=new C$c(C$d),this.updateInvoker=new C$_(C$f),this.lateUpdateInvoker=new C$_(C$p),this.scheduleInNextFrame=[],this._updating=!1}C$e=cc.Class({ctor:C$m,unscheduleAll:C$m,statics:{LifeCycleInvoker:C$t,OneOffInvoker:C$c,createInvokeImpl:C$l,invokeOnEnable:function(C$t){var C$e=cc.director._compScheduler,C$i=C$t.array;for(C$t.i=0;C$t.i<C$i.length;++C$t.i){var C$n=C$i[C$t.i];C$n._enabled&&(C$n.onEnable(),C$n.node._activeInHierarchy&&C$e._onEnabled(C$n))}}},_onEnabled:function(C$t){cc.director.getScheduler().resumeTarget(C$t),C$t._objFlags|=C$r,this._updating?this.scheduleInNextFrame.push(C$t):this._scheduleImmediate(C$t)},_onDisabled:function(C$t){cc.director.getScheduler().pauseTarget(C$t),C$t._objFlags&=~C$r;var C$e=this.scheduleInNextFrame.indexOf(C$t);0<=C$e?C$i.fastRemoveAt(this.scheduleInNextFrame,C$e):(!C$t.start||C$t._objFlags&C$n||this.startInvoker.remove(C$t),C$t.update&&this.updateInvoker.remove(C$t),C$t.lateUpdate&&this.lateUpdateInvoker.remove(C$t))},enableComp:function(C$t,C$e){if(!(C$t._objFlags&C$r)){if(C$t.onEnable){if(C$e)return void C$e.add(C$t);if(C$t.onEnable(),!C$t.node._activeInHierarchy)return}this._onEnabled(C$t)}},disableComp:function(C$t){C$t._objFlags&C$r&&(C$t.onDisable&&C$t.onDisable(),this._onDisabled(C$t))},_scheduleImmediate:function(C$t){!C$t.start||C$t._objFlags&C$n||this.startInvoker.add(C$t),C$t.update&&this.updateInvoker.add(C$t),C$t.lateUpdate&&this.lateUpdateInvoker.add(C$t)},_deferredSchedule:function(){for(var C$t=this.scheduleInNextFrame,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e];this._scheduleImmediate(C$n)}C$t.length=0},_earlyStartForNewComps:function(){0<this.scheduleInNextFrame.length&&(this._deferredSchedule(),this.startInvoker.invoke())},startPhase:function(){this._updating=!0,0<this.scheduleInNextFrame.length&&this._deferredSchedule(),this.startInvoker.invoke(),this._earlyStartForNewComps()},updatePhase:function(C$t){this.updateInvoker.invoke(C$t)},lateUpdatePhase:function(C$t){this.lateUpdateInvoker.invoke(C$t),this._updating=!1},clearup:function(){this._earlyStartForNewComps()}});C$h.exports=C$e},{"./platform/CCClass":189,"./platform/CCObject":195,"./platform/js":209,"./utils/misc":264}],73:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../../animation/animation-animator"),C$r=C$t("../../animation/animation-clip"),C$s=C$t("../event/event-target"),C$o=C$t("../platform/js"),C$a=cc.Enum({PLAY:"play",STOP:"stop",PAUSE:"pause",RESUME:"resume",LASTFRAME:"lastframe",FINISHED:"finished"}),C$t=cc.Class({name:"cc.Animation",extends:C$t("./CCComponent"),mixins:[C$s],editor:!1,statics:{EventType:C$a},ctor:function(){cc.EventTarget.call(this),this._animator=null,this._nameToState=C$o.createMap(!0),this._didInit=!1,this._currentClip=null},properties:{_defaultClip:{default:null,type:C$r},defaultClip:{type:C$r,get:function(){return this._defaultClip},set:function(C$t){},tooltip:!1},currentClip:{get:function(){return this._currentClip},set:function(C$t){this._currentClip=C$t},type:C$r,visible:!1},_writableClips:{get:function(){return this._clips},set:function(C$t){this._didInit=!1,this._clips=C$t,this._init()},type:[C$r]},_clips:{default:[],type:[C$r],tooltip:!1,visible:!0},playOnLoad:{default:!1,tooltip:!1}},start:function(){var C$t;this.playOnLoad&&this._defaultClip&&(this._animator&&this._animator.isPlaying||(C$t=this.getAnimationState(this._defaultClip.name),this._animator.playState(C$t)))},onEnable:function(){this._animator&&this._animator.resume()},onDisable:function(){this._animator&&this._animator.pause()},onDestroy:function(){this.stop()},getClips:function(){return this._clips},play:function(C$t,C$e){C$t=this.playAdditive(C$t,C$e);return this._animator.stopStatesExcept(C$t),C$t},playAdditive:function(C$t,C$e){this._init();var C$i,C$t=this.getAnimationState(C$t||this._defaultClip&&this._defaultClip.name);return C$t&&(this.enabled=!0,(C$i=this._animator).isPlaying&&C$t.isPlaying?C$t.isPaused?C$i.resumeState(C$t):(C$i.stopState(C$t),C$i.playState(C$t,C$e)):C$i.playState(C$t,C$e),this.enabledInHierarchy||C$i.pause(),this.currentClip=C$t.clip),C$t},stop:function(C$t){this._didInit&&(C$t?(C$t=this._nameToState[C$t])&&this._animator.stopState(C$t):this._animator.stop())},pause:function(C$t){this._didInit&&(C$t?(C$t=this._nameToState[C$t])&&this._animator.pauseState(C$t):this.enabled=!1)},resume:function(C$t){this._didInit&&(C$t?(C$t=this._nameToState[C$t])&&this._animator.resumeState(C$t):this.enabled=!0)},setCurrentTime:function(C$t,C$e){this._init(),C$e?(C$e=this._nameToState[C$e])&&this._animator.setStateTime(C$e,C$t):this._animator.setStateTime(C$t)},getAnimationState:function(C$t){this._init();C$t=this._nameToState[C$t];return C$t&&!C$t.curveLoaded&&this._animator._reloadClip(C$t),C$t||null},addClip:function(C$t,C$e){if(C$t){this._init(),cc.js.array.contains(this._clips,C$t)||this._clips.push(C$t),C$e=C$e||C$t.name;var C$i=this._nameToState[C$e];if(C$i){if(C$i.clip===C$t)return C$i;C$i=this._clips.indexOf(C$i.clip);-1!==C$i&&this._clips.splice(C$i,1)}C$i=new cc.AnimationState(C$t,C$e);return this._nameToState[C$e]=C$i}cc.warnID(3900)},removeClip:function(C$e,C$t){if(C$e){var C$i,C$n;for(C$n in this._init(),this._nameToState)if((C$i=this._nameToState[C$n]).clip===C$e)break;if(C$e===this._defaultClip){if(!C$t)return void cc.warnID(3902);this._defaultClip=null}if(C$i&&C$i.isPlaying){if(!C$t)return void cc.warnID(3903);this.stop(C$i.name)}this._clips=this._clips.filter(function(C$t){return!(C$t===C$e)}),C$i&&delete this._nameToState[C$i.name]}else cc.warnID(3901)},sample:function(C$t){this._init(),C$t?(C$t=this._nameToState[C$t])&&C$t.sample():this._animator.sample()},on:function(C$t,C$e,C$i,C$n){this._init();C$e=this._EventTargetOn(C$t,C$e,C$i,C$n);if("lastframe"===C$t){var C$r,C$s=this._nameToState;for(C$r in C$s)C$s[C$r]._lastframeEventOn=!0}return C$e},off:function(C$t,C$e,C$i,C$n){if(this._init(),"lastframe"===C$t){var C$r,C$s=this._nameToState;for(C$r in C$s)C$s[C$r]._lastframeEventOn=!1}this._EventTargetOff(C$t,C$e,C$i,C$n)},_init:function(){this._didInit||(this._didInit=!0,this._animator=new C$n(this.node,this),this._createStates())},_createStates:function(){this._nameToState=C$o.createMap(!0);for(var C$t=null,C$e=!1,C$i=0;C$i<this._clips.length;++C$i){var C$n=this._clips[C$i];C$n&&(C$t=new cc.AnimationState(C$n),this._nameToState[C$t.name]=C$t,this._defaultClip===C$n&&(C$e=C$t))}this._defaultClip&&!C$e&&(C$t=new cc.AnimationState(this._defaultClip),this._nameToState[C$t.name]=C$t)}});C$t.prototype._EventTargetOn=C$s.prototype.on,C$t.prototype._EventTargetOff=C$s.prototype.off,cc.Animation=C$e.exports=C$t},{"../../animation/animation-animator":10,"../../animation/animation-clip":11,"../event/event-target":115,"../platform/js":209,"./CCComponent":78}],74:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../utils/misc"),C$r=C$t("./CCComponent"),C$s=C$t("../assets/CCAudioClip"),C$t=cc.Class({name:"cc.AudioSource",extends:C$r,editor:!1,ctor:function(){this.audio=new cc.Audio},properties:{_clip:{default:null,type:C$s},_volume:1,_mute:!1,_loop:!1,_pausedFlag:{default:!1,serializable:!1},isPlaying:{get:function(){return this.audio.getState()===cc.Audio.State.PLAYING},visible:!1},clip:{get:function(){return this._clip},set:function(C$t){var C$i;if("string"==typeof C$t)return cc.warnID(8401,"cc.AudioSource","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$i=this,void C$s._loadByUrl(C$t,function(C$t,C$e){C$e&&(C$i.clip=C$e)});C$t!==this._clip&&(this._clip=C$t,this.audio.stop(),this.preload&&(this.audio.src=this._clip))},type:C$s,tooltip:!1,animatable:!1},volume:{get:function(){return this._volume},set:function(C$t){return C$t=C$n.clamp01(C$t),this._volume=C$t,this._mute||this.audio.setVolume(C$t),C$t},tooltip:!1},mute:{get:function(){return this._mute},set:function(C$t){return this._mute=C$t,this.audio.setVolume(C$t?0:this._volume),C$t},animatable:!1,tooltip:!1},loop:{get:function(){return this._loop},set:function(C$t){return this._loop=C$t,this.audio.setLoop(C$t),C$t},animatable:!1,tooltip:!1},playOnLoad:{default:!1,tooltip:!1,animatable:!1},preload:{default:!1,animatable:!1}},_ensureDataLoaded:function(){this.audio.src!==this._clip&&(this.audio.src=this._clip)},_pausedCallback:function(){this.audio.getState()===cc.Audio.State.PLAYING&&(this.audio.pause(),this._pausedFlag=!0)},_restoreCallback:function(){this._pausedFlag&&this.audio.resume(),this._pausedFlag=!1},onLoad:function(){this.audio.setVolume(this._mute?0:this._volume),this.audio.setLoop(this._loop)},onEnable:function(){this.preload&&(this.audio.src=this._clip),this.playOnLoad&&this.play(),cc.game.on(cc.game.EVENT_HIDE,this._pausedCallback,this),cc.game.on(cc.game.EVENT_SHOW,this._restoreCallback,this)},onDisable:function(){this.stop(),cc.game.off(cc.game.EVENT_HIDE,this._pausedCallback,this),cc.game.off(cc.game.EVENT_SHOW,this._restoreCallback,this)},onDestroy:function(){this.stop(),this.audio.destroy(),cc.audioEngine.uncache(this._clip)},play:function(){var C$t;this._clip&&(C$t=this.audio,this._clip.loaded&&C$t.stop(),this._ensureDataLoaded(),C$t.setCurrentTime(0),C$t.play())},stop:function(){this.audio.stop()},pause:function(){this.audio.pause()},resume:function(){this._ensureDataLoaded(),this.audio.resume()},rewind:function(){this.audio.setCurrentTime(0)},getCurrentTime:function(){return this.audio.getCurrentTime()},setCurrentTime:function(C$t){return this.audio.setCurrentTime(C$t),C$t},getDuration:function(){return this.audio.getDuration()}});cc.AudioSource=C$e.exports=C$t},{"../assets/CCAudioClip":35,"../utils/misc":264,"./CCComponent":78}],75:[function(C$t,C$e,C$i){"use strict";var C$n=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","mouseenter","mouseleave","mousewheel"];function C$r(C$t){C$t.stopPropagation()}C$t=cc.Class({name:"cc.BlockInputEvents",extends:C$t("./CCComponent"),editor:{menu:"i18n:MAIN_MENU.component.ui/Block Input Events",inspector:"packages://inspector/inspectors/comps/block-input-events.js",help:"i18n:COMPONENT.help_url.block_input_events"},onEnable:function(){for(var C$t=0;C$t<C$n.length;C$t++)this.node.on(C$n[C$t],C$r,this)},onDisable:function(){for(var C$t=0;C$t<C$n.length;C$t++)this.node.off(C$n[C$t],C$r,this)}});cc.BlockInputEvents=C$e.exports=C$t},{"./CCComponent":78}],76:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./CCComponent"),C$t=C$t("../utils/gray-sprite-state"),C$r=cc.Enum({NONE:0,COLOR:1,SPRITE:2,SCALE:3}),C$s=cc.Enum({NORMAL:0,HOVER:1,PRESSED:2,DISABLED:3}),C$n=cc.Class({name:"cc.Button",extends:C$n,mixins:[C$t],ctor:function(){this._pressed=!1,this._hovered=!1,this._fromColor=null,this._toColor=null,this._time=0,this._transitionFinished=!0,this._fromScale=cc.Vec2.ZERO,this._toScale=cc.Vec2.ZERO,this._originalScale=null,this._graySpriteMaterial=null,this._spriteMaterial=null,this._sprite=null},editor:!1,properties:{interactable:{default:!0,tooltip:!1,notify:function(){this._updateState(),this.interactable||this._resetState()},animatable:!1},_resizeToTarget:{animatable:!1,set:function(C$t){C$t&&this._resizeNodeToTargetNode()}},enableAutoGrayEffect:{default:!1,tooltip:!1,notify:function(){this._updateDisabledState()}},transition:{default:C$r.NONE,tooltip:!1,type:C$r,animatable:!1,notify:function(C$t){this._updateTransition(C$t)},formerlySerializedAs:"transition"},normalColor:{default:cc.Color.WHITE,displayName:"Normal",tooltip:!1,notify:function(){this.transition===C$r.Color&&this._getButtonState()===C$s.NORMAL&&(this._getTarget().opacity=this.normalColor.a),this._updateState()}},pressedColor:{default:cc.color(211,211,211),displayName:"Pressed",tooltip:!1,notify:function(){this.transition===C$r.Color&&this._getButtonState()===C$s.PRESSED&&(this._getTarget().opacity=this.pressedColor.a),this._updateState()},formerlySerializedAs:"pressedColor"},hoverColor:{default:cc.Color.WHITE,displayName:"Hover",tooltip:!1,notify:function(){this.transition===C$r.Color&&this._getButtonState()===C$s.HOVER&&(this._getTarget().opacity=this.hoverColor.a),this._updateState()},formerlySerializedAs:"hoverColor"},disabledColor:{default:cc.color(124,124,124),displayName:"Disabled",tooltip:!1,notify:function(){this.transition===C$r.Color&&this._getButtonState()===C$s.DISABLED&&(this._getTarget().opacity=this.disabledColor.a),this._updateState()}},duration:{default:.1,range:[0,10],tooltip:!1},zoomScale:{default:1.2,tooltip:!1},normalSprite:{default:null,type:cc.SpriteFrame,displayName:"Normal",tooltip:!1,notify:function(){this._updateState()}},pressedSprite:{default:null,type:cc.SpriteFrame,displayName:"Pressed",tooltip:!1,formerlySerializedAs:"pressedSprite",notify:function(){this._updateState()}},hoverSprite:{default:null,type:cc.SpriteFrame,displayName:"Hover",tooltip:!1,formerlySerializedAs:"hoverSprite",notify:function(){this._updateState()}},disabledSprite:{default:null,type:cc.SpriteFrame,displayName:"Disabled",tooltip:!1,notify:function(){this._updateState()}},target:{default:null,type:cc.Node,tooltip:!1,notify:function(C$t){this._applyTarget(),C$t&&this.target!==C$t&&this._unregisterTargetEvent(C$t)}},clickEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{Transition:C$r},__preload:function(){this._applyTarget(),this._resetState()},_resetState:function(){this._pressed=!1,this._hovered=!1;var C$t=this._getTarget(),C$e=this.transition,C$i=this._originalScale;C$e===C$r.COLOR&&this.interactable?this._setTargetColor(this.normalColor):C$e===C$r.SCALE&&C$i&&C$t.setScale(C$i.x,C$i.y),this._transitionFinished=!0},onEnable:function(){this.normalSprite&&this.normalSprite.ensureLoadTexture(),this.hoverSprite&&this.hoverSprite.ensureLoadTexture(),this.pressedSprite&&this.pressedSprite.ensureLoadTexture(),this.disabledSprite&&this.disabledSprite.ensureLoadTexture(),this._registerNodeEvent()},onDisable:function(){this._resetState(),this._unregisterNodeEvent()},_getTarget:function(){return this.target||this.node},_onTargetSpriteFrameChanged:function(C$t){this.transition===C$r.SPRITE&&this._setCurrentStateSprite(C$t.spriteFrame)},_onTargetColorChanged:function(C$t){this.transition===C$r.COLOR&&this._setCurrentStateColor(C$t)},_onTargetScaleChanged:function(){var C$t=this._getTarget();this._originalScale&&(this.transition!==C$r.SCALE||this._transitionFinished)&&(this._originalScale.x=C$t.scaleX,this._originalScale.y=C$t.scaleY)},_setTargetColor:function(C$t){var C$e=this._getTarget();C$e.color=C$t,C$e.opacity=C$t.a},_getStateColor:function(C$t){switch(C$t){case C$s.NORMAL:return this.normalColor;case C$s.HOVER:return this.hoverColor;case C$s.PRESSED:return this.pressedColor;case C$s.DISABLED:return this.disabledColor}},_getStateSprite:function(C$t){switch(C$t){case C$s.NORMAL:return this.normalSprite;case C$s.HOVER:return this.hoverSprite;case C$s.PRESSED:return this.pressedSprite;case C$s.DISABLED:return this.disabledSprite}},_setCurrentStateColor:function(C$t){switch(this._getButtonState()){case C$s.NORMAL:this.normalColor=C$t;break;case C$s.HOVER:this.hoverColor=C$t;break;case C$s.PRESSED:this.pressedColor=C$t;break;case C$s.DISABLED:this.disabledColor=C$t}},_setCurrentStateSprite:function(C$t){switch(this._getButtonState()){case C$s.NORMAL:this.normalSprite=C$t;break;case C$s.HOVER:this.hoverSprite=C$t;break;case C$s.PRESSED:this.pressedSprite=C$t;break;case C$s.DISABLED:this.disabledSprite=C$t}},update:function(C$t){var C$e,C$i=this._getTarget();this._transitionFinished||this.transition!==C$r.COLOR&&this.transition!==C$r.SCALE||(this.time+=C$t,(C$t=1)<=(C$t=0<this.duration?this.time/this.duration:C$t)&&(C$t=1),this.transition===C$r.COLOR?(C$e=this._fromColor.lerp(this._toColor,C$t),this._setTargetColor(C$e)):this.transition===C$r.SCALE&&this._originalScale&&(C$i.scale=this._fromScale.lerp(this._toScale,C$t)),1===C$t&&(this._transitionFinished=!0))},_registerNodeEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},_unregisterNodeEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},_registerTargetEvent:function(C$t){C$t.on(cc.Node.EventType.SCALE_CHANGED,this._onTargetScaleChanged,this)},_unregisterTargetEvent:function(C$t){C$t.off(cc.Node.EventType.SCALE_CHANGED,this._onTargetScaleChanged,this)},_getTargetSprite:function(C$t){var C$e=null;return C$e=C$t?C$t.getComponent(cc.Sprite):C$e},_applyTarget:function(){var C$t=this._getTarget();this._sprite=this._getTargetSprite(C$t),this._originalScale||(this._originalScale=cc.Vec2.ZERO),this._originalScale.x=C$t.scaleX,this._originalScale.y=C$t.scaleY,this._registerTargetEvent(C$t)},_onTouchBegan:function(C$t){this.interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),C$t.stopPropagation())},_onTouchMove:function(C$t){var C$e,C$i,C$n;this.interactable&&this.enabledInHierarchy&&this._pressed&&(C$e=C$t.touch,C$e=this.node._hitTest(C$e.getLocation()),C$n=this._getTarget(),C$i=this._originalScale,this.transition===C$r.SCALE&&C$i?C$e?(this._fromScale.x=C$i.x,this._fromScale.y=C$i.y,this._toScale.x=C$i.x*this.zoomScale,this._toScale.y=C$i.y*this.zoomScale,this._transitionFinished=!1):(this.time=0,this._transitionFinished=!0,C$n.setScale(C$i.x,C$i.y)):(C$n=C$e?C$s.PRESSED:C$s.NORMAL,this._applyTransition(C$n)),C$t.stopPropagation())},_onTouchEnded:function(C$t){this.interactable&&this.enabledInHierarchy&&(this._pressed&&(cc.Component.EventHandler.emitEvents(this.clickEvents,C$t),this.node.emit("click",this)),this._pressed=!1,this._updateState(),C$t.stopPropagation())},_onTouchCancel:function(){this.interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},_onMouseMoveIn:function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this.transition===C$r.SPRITE&&!this.hoverSprite||this._hovered||(this._hovered=!0,this._updateState()))},_onMouseMoveOut:function(){this._hovered&&(this._hovered=!1,this._updateState())},_updateState:function(){var C$t=this._getButtonState();this._applyTransition(C$t),this._updateDisabledState()},_getButtonState:function(){return this.interactable?this._pressed?C$s.PRESSED:this._hovered?C$s.HOVER:C$s.NORMAL:C$s.DISABLED},_updateColorTransitionImmediately:function(C$t){C$t=this._getStateColor(C$t);this._setTargetColor(C$t),this._fromColor=C$t.clone(),this._toColor=C$t},_updateColorTransition:function(C$t){var C$e;C$t===C$s.DISABLED?this._updateColorTransitionImmediately(C$t):(C$e=this._getTarget(),C$t=this._getStateColor(C$t),this._fromColor=C$e.color.clone(),this._toColor=C$t,this.time=0,this._transitionFinished=!1)},_updateSpriteTransition:function(C$t){C$t=this._getStateSprite(C$t);this._sprite&&C$t&&(this._sprite.spriteFrame=C$t)},_updateScaleTransition:function(C$t){C$t===C$s.PRESSED?this._zoomUp():this._zoomBack()},_zoomUp:function(){this._originalScale&&(this._fromScale.x=this._originalScale.x,this._fromScale.y=this._originalScale.y,this._toScale.x=this._originalScale.x*this.zoomScale,this._toScale.y=this._originalScale.y*this.zoomScale,this.time=0,this._transitionFinished=!1)},_zoomBack:function(){var C$t;this._originalScale&&(C$t=this._getTarget(),this._fromScale.x=C$t.scaleX,this._fromScale.y=C$t.scaleY,this._toScale.x=this._originalScale.x,this._toScale.y=this._originalScale.y,this.time=0,this._transitionFinished=!1)},_updateTransition:function(C$t){C$t===C$r.COLOR?this._updateColorTransitionImmediately(C$s.NORMAL):C$t===C$r.SPRITE&&this._updateSpriteTransition(C$s.NORMAL),this._updateState()},_applyTransition:function(C$t){var C$e=this.transition;C$e===C$r.COLOR?this._updateColorTransition(C$t):C$e===C$r.SPRITE?this._updateSpriteTransition(C$t):C$e===C$r.SCALE&&this._updateScaleTransition(C$t)},_resizeNodeToTargetNode:!1,_updateDisabledState:function(){var C$t;this._sprite&&(C$t=!1,this.enableAutoGrayEffect&&(this.transition===C$r.SPRITE&&this.disabledSprite||this.interactable||(C$t=!0)),this._switchGrayMaterial(C$t,this._sprite))}});cc.Button=C$e.exports=C$n},{"../utils/gray-sprite-state":260,"./CCComponent":78}],77:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../camera/CCCamera"),C$t=C$t("./CCComponent");var C$r=cc.Class({name:"cc.Canvas",extends:C$t,editor:!1,resetInEditor:!1,statics:{instance:null},properties:{_designResolution:cc.size(960,640),designResolution:{get:function(){return cc.size(this._designResolution)},set:function(C$t){this._designResolution.width=C$t.width,this._designResolution.height=C$t.height,this.applySettings()},tooltip:!1},_fitWidth:!1,_fitHeight:!0,fitHeight:{get:function(){return this._fitHeight},set:function(C$t){this._fitHeight!==C$t&&(this._fitHeight=C$t,this.applySettings())},tooltip:!1},fitWidth:{get:function(){return this._fitWidth},set:function(C$t){this._fitWidth!==C$t&&(this._fitWidth=C$t,this.applySettings())},tooltip:!1}},_fitDesignResolution:!1,__preload:function(){if(C$r.instance)return cc.warnID(6700,this.node.name,C$r.instance.node.name);(C$r.instance=this).applySettings();var C$t=this.getComponent(cc.Widget),C$t=(C$t&&C$t.updateAlignment(),cc.find("Main Camera",this.node)),C$e=(C$t||((C$t=new cc.Node("Main Camera")).parent=this.node,C$t.setSiblingIndex(0)),C$t.getComponent(C$n));C$e||(C$e=C$t.addComponent(C$n),C$t=C$n.ClearFlags,C$e.clearFlags=C$t.COLOR|C$t.DEPTH|C$t.STENCIL,C$e.depth=-1),C$n.main=C$e},onDestroy:function(){C$r.instance===this&&(C$r.instance=null)},applySettings:function(){var C$t=cc.ResolutionPolicy,C$t=this.fitHeight&&this.fitWidth?C$t.SHOW_ALL:this.fitHeight||this.fitWidth?this.fitWidth?C$t.FIXED_WIDTH:C$t.FIXED_HEIGHT:C$t.NO_BORDER,C$e=this._designResolution;cc.view.setDesignResolutionSize(C$e.width,C$e.height,C$t)}});cc.Canvas=C$e.exports=C$r},{"../camera/CCCamera":63,"./CCComponent":78}],78:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../platform/CCObject"),C$r=C$t("../platform/js"),C$s=new(C$t("../platform/id-generater"))("Comp"),C$o=(C$n.Flags.IsOnEnableCalled,C$n.Flags.IsOnLoadCalled),C$a=!!cc.ActionManager,C$t=cc.Class({name:"cc.Component",extends:C$n,ctor:function(){this._id=C$s.getNewId(),this.__eventTargets=[]},properties:{node:{default:null,visible:!1},name:{get:function(){if(this._name)return this._name;var C$t=cc.js.getClassName(this),C$e=C$t.lastIndexOf(".");return 0<=C$e&&(C$t=C$t.slice(C$e+1)),this.node.name+"<"+C$t+">"},set:function(C$t){this._name=C$t},visible:!1},uuid:{get:function(){return this._id},visible:!1},__scriptAsset:!1,_enabled:!0,enabled:{get:function(){return this._enabled},set:function(C$t){var C$e;this._enabled!==C$t&&(this._enabled=C$t,this.node._activeInHierarchy&&(C$e=cc.director._compScheduler,C$t?C$e.enableComp(this):C$e.disableComp(this)))},visible:!1,animatable:!0},enabledInHierarchy:{get:function(){return this._enabled&&this.node._activeInHierarchy},visible:!1},_isOnLoadCalled:{get:function(){return this._objFlags&C$o}}},update:null,lateUpdate:null,__preload:null,onLoad:null,start:null,onEnable:null,onDisable:null,onDestroy:null,onFocusInEditor:null,onLostFocusInEditor:null,resetInEditor:null,addComponent:function(C$t){return this.node.addComponent(C$t)},getComponent:function(C$t){return this.node.getComponent(C$t)},getComponents:function(C$t){return this.node.getComponents(C$t)},getComponentInChildren:function(C$t){return this.node.getComponentInChildren(C$t)},getComponentsInChildren:function(C$t){return this.node.getComponentsInChildren(C$t)},_getLocalBounds:null,onRestore:null,destroy:function(){this._super()&&this._enabled&&this.node._activeInHierarchy&&cc.director._compScheduler.disableComp(this)},_onPreDestroy:function(){C$a&&cc.director.getActionManager().removeAllActionsFromTarget(this),this.unscheduleAllCallbacks();for(var C$t=this.__eventTargets,C$e=C$t.length-1;0<=C$e;--C$e){var C$i=C$t[C$e];C$i&&C$i.targetOff(this)}C$t.length=0,cc.director._nodeActivator.destroyComp(this),this.node._removeComponent(this)},_instantiate:function(C$t){return(C$t=C$t||cc.instantiate._clone(this,this)).node=null,C$t},schedule:function(C$t,C$e,C$i,C$n){cc.assertID(C$t,1619),C$e=C$e||0,cc.assertID(0<=C$e,1620),C$i=isNaN(C$i)?cc.macro.REPEAT_FOREVER:C$i,C$n=C$n||0;var C$r=cc.director.getScheduler(),C$s=C$r.isTargetPaused(this);C$r.schedule(C$t,this,C$e,C$i,C$n,C$s)},scheduleOnce:function(C$t,C$e){this.schedule(C$t,0,0,C$e)},unschedule:function(C$t){C$t&&cc.director.getScheduler().unschedule(C$t,this)},unscheduleAllCallbacks:function(){cc.director.getScheduler().unscheduleAllForTarget(this)}});C$t._requireComponent=null,C$t._executionOrder=0,C$r.value(C$t,"_registerEditorProps",function(C$t,C$e){var C$i=C$e.requireComponent,C$i=(C$i&&(C$t._requireComponent=C$i),C$e.executionOrder);C$i&&"number"==typeof C$i&&(C$t._executionOrder=C$i)}),C$t.prototype.__scriptUuid="",cc.Component=C$e.exports=C$t},{"../platform/CCObject":195,"../platform/id-generater":205,"../platform/js":209}],79:[function(C$t,C$e,C$i){"use strict";cc.Component.EventHandler=cc.Class({name:"cc.ClickEvent",properties:{target:{default:null,type:cc.Node},component:"",_componentId:"",_componentName:{get:function(){return this._genCompIdIfNeeded(),this._compId2Name(this._componentId)},set:function(C$t){this._componentId=this._compName2Id(C$t)}},handler:{default:""},customEventData:{default:""}},statics:{emitEvents:function(C$t){if(0<arguments.length)for(var C$e,C$i=0,C$n=(C$e=new Array(arguments.length-1)).length;C$i<C$n;C$i++)C$e[C$i]=arguments[C$i+1];for(var C$r=0,C$s=C$t.length;C$r<C$s;C$r++){var C$o=C$t[C$r];C$o instanceof cc.Component.EventHandler&&C$o.emit(C$e)}}},emit:function(C$t){var C$e,C$i=this.target;cc.isValid(C$i)&&(this._genCompIdIfNeeded(),C$e=cc.js._getClassById(this._componentId),C$i=C$i.getComponent(C$e),!cc.isValid(C$i)||"function"==typeof(C$e=C$i[this.handler])&&(null!=this.customEventData&&""!==this.customEventData&&(C$t=C$t.slice()).push(this.customEventData),C$e.apply(C$i,C$t)))},_compName2Id:function(C$t){C$t=cc.js.getClassByName(C$t);return cc.js._getClassId(C$t)},_compId2Name:function(C$t){C$t=cc.js._getClassById(C$t);return cc.js.getClassName(C$t)},_genCompIdIfNeeded:function(){this._componentId||(this._componentName=this.component,this.component="")}})},{}],80:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../platform/CCMacro"),C$r=C$t("./CCRenderComponent"),C$s=(C$t("../assets/material/CCMaterial"),C$t("../renderer/utils/label/label-frame")),C$t=C$n.TextAlignment,C$n=C$n.VerticalTextAlignment,C$o=cc.Enum({NONE:0,CLAMP:1,SHRINK:2,RESIZE_HEIGHT:3}),C$a=cc.Enum({NONE:0,BITMAP:1,CHAR:2}),C$c=cc.Class({name:"cc.Label",extends:C$r,ctor:function(){this._actualFontSize=0,this._assemblerData=null,this._frame=null,this._ttfTexture=null,this._letterTexture=null,cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?this._updateMaterial=this._updateMaterialCanvas:this._updateMaterial=this._updateMaterialWebgl},editor:!1,properties:{_useOriginalSize:!0,_string:{default:"",formerlySerializedAs:"_N$string"},string:{get:function(){return this._string},set:function(C$t){var C$e=this._string;this._string=""+C$t,this.string!==C$e&&this.setVertsDirty(),this._checkStringEmpty()},multiline:!0,tooltip:!1},horizontalAlign:{default:C$t.LEFT,type:C$t,tooltip:!1,notify:function(C$t){this.horizontalAlign!==C$t&&this.setVertsDirty()},animatable:!1},verticalAlign:{default:C$n.TOP,type:C$n,tooltip:!1,notify:function(C$t){this.verticalAlign!==C$t&&this.setVertsDirty()},animatable:!1},actualFontSize:{displayName:"Actual Font Size",animatable:!1,readonly:!0,get:function(){return this._actualFontSize},tooltip:!1},_fontSize:40,fontSize:{get:function(){return this._fontSize},set:function(C$t){this._fontSize!==C$t&&(this._fontSize=C$t,this.setVertsDirty())},range:[0,512],tooltip:!1},fontFamily:{default:"Arial",tooltip:!1,notify:function(C$t){this.fontFamily!==C$t&&this.setVertsDirty()},animatable:!1},_lineHeight:40,lineHeight:{get:function(){return this._lineHeight},set:function(C$t){this._lineHeight!==C$t&&(this._lineHeight=C$t,this.setVertsDirty())},tooltip:!1},overflow:{default:C$o.NONE,type:C$o,tooltip:!1,notify:function(C$t){this.overflow!==C$t&&this.setVertsDirty()},animatable:!1},_enableWrapText:!0,enableWrapText:{get:function(){return this._enableWrapText},set:function(C$t){this._enableWrapText!==C$t&&(this._enableWrapText=C$t,this.setVertsDirty())},animatable:!1,tooltip:!1},_N$file:null,font:{get:function(){return this._N$file},set:function(C$t){this.font!==C$t&&(C$t||(this._isSystemFontUsed=!0),(this._N$file=C$t)&&this._isSystemFontUsed&&(this._isSystemFontUsed=!1),"string"==typeof C$t&&cc.warnID(4e3),this.enabledInHierarchy&&this._forceUpdateRenderData())},type:cc.Font,tooltip:!1,animatable:!1},_isSystemFontUsed:!0,useSystemFont:{get:function(){return this._isSystemFontUsed},set:function(C$t){if(this._isSystemFontUsed!==C$t){if(this._isSystemFontUsed=!!C$t,C$t){if(this.font=null,!this.enabledInHierarchy)return;this._forceUpdateRenderData()}this.markForValidate()}},animatable:!1,tooltip:!1},_bmFontOriginalSize:{displayName:"BMFont Original Size",get:function(){return this._N$file instanceof cc.BitmapFont?this._N$file.fontSize:-1},visible:!0,animatable:!1},_spacingX:0,spacingX:{get:function(){return this._spacingX},set:function(C$t){this._spacingX=C$t,this.setVertsDirty()},tooltip:!1},_batchAsBitmap:!1,cacheMode:{default:C$a.NONE,type:C$a,tooltip:!1,notify:function(C$t){this.cacheMode!==C$t&&(C$t!==C$a.BITMAP||this.font instanceof cc.BitmapFont||this._frame&&this._frame._resetDynamicAtlasFrame(),C$t===C$a.CHAR&&(this._ttfTexture=null),this.enabledInHierarchy&&this._forceUpdateRenderData())},animatable:!1},_styleFlags:0,enableBold:{get:function(){return!!(1&this._styleFlags)},set:function(C$t){C$t?this._styleFlags|=1:this._styleFlags&=-2,this.setVertsDirty()},animatable:!1,tooltip:!1},enableItalic:{get:function(){return!!(2&this._styleFlags)},set:function(C$t){C$t?this._styleFlags|=2:this._styleFlags&=-3,this.setVertsDirty()},animatable:!1,tooltip:!1},enableUnderline:{get:function(){return!!(4&this._styleFlags)},set:function(C$t){C$t?this._styleFlags|=4:this._styleFlags&=-5,this.setVertsDirty()},animatable:!1,tooltip:!1},_underlineHeight:0,underlineHeight:{get:function(){return this._underlineHeight},set:function(C$t){this._underlineHeight!==C$t&&(this._underlineHeight=C$t,this.setVertsDirty())},tooltip:!1}},statics:{HorizontalAlign:C$t,VerticalAlign:C$n,Overflow:C$o,CacheMode:C$a,_shareAtlas:null,clearCharCache:function(){C$c._shareAtlas&&C$c._shareAtlas.clearAllCache()}},onLoad:function(){this._batchAsBitmap&&this.cacheMode===C$a.NONE&&(this.cacheMode=C$a.BITMAP,this._batchAsBitmap=!1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(this.cacheMode=C$a.NONE)},onEnable:function(){this._super(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._nodeSizeChanged,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this),this._forceUpdateRenderData()},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._nodeSizeChanged,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},onDestroy:function(){this._assembler&&this._assembler._resetAssemblerData&&this._assembler._resetAssemblerData(this._assemblerData),this._assemblerData=null,this._letterTexture=null,this._ttfTexture&&(this._ttfTexture.destroy(),this._ttfTexture=null),this._super()},_nodeSizeChanged:function(){this.overflow!==C$o.NONE&&this.setVertsDirty()},_updateColor:function(){this.font instanceof cc.BitmapFont||this.setVertsDirty(),C$r.prototype._updateColor.call(this)},_validateRender:function(){if(this.string){if(this._materials[0]){var C$t=this.font;if(!(C$t instanceof cc.BitmapFont))return;var C$e=C$t.spriteFrame;if(C$e&&C$e.textureLoaded()&&C$t._fntConfig)return}this.disableRender()}else this.disableRender()},_resetAssembler:function(){this._frame=null,C$r.prototype._resetAssembler.call(this)},_checkStringEmpty:function(){this.markForRender(!!this.string)},_on3DNodeChanged:function(){this._resetAssembler(),this._applyFontTexture()},_onBMFontTextureLoaded:function(){this._frame._texture=this.font.spriteFrame._texture,this.markForRender(!0),this._updateMaterial(),this._assembler&&this._assembler.updateRenderData(this)},_applyFontTexture:function(){var C$t=this.font;C$t instanceof cc.BitmapFont?(C$t=C$t.spriteFrame,(this._frame=C$t)&&C$t.onTextureLoaded(this._onBMFontTextureLoaded,this)):(this._frame||(this._frame=new C$s),this.cacheMode===C$a.CHAR?(this._letterTexture=this._assembler._getAssemblerData(),this._frame._refreshTexture(this._letterTexture)):this._ttfTexture||(this._ttfTexture=new cc.Texture2D,this._assemblerData=this._assembler._getAssemblerData(),this._ttfTexture.initWithElement(this._assemblerData.canvas)),this.cacheMode!==C$a.CHAR&&(this._frame._resetDynamicAtlasFrame(),this._frame._refreshTexture(this._ttfTexture)),this._updateMaterial(),this._assembler&&this._assembler.updateRenderData(this)),this.markForValidate()},_updateMaterialCanvas:function(){this._frame&&(this._frame._texture.url=this.uuid+"_texture")},_updateMaterialWebgl:function(){var C$t;!this._frame||(C$t=this.getMaterial(0))&&C$t.setProperty("texture",this._frame._texture)},_forceUpdateRenderData:function(){this.setVertsDirty(),this._resetAssembler(),this._applyFontTexture()},_enableBold:function(C$t){cc.warn("`label._enableBold` is deprecated, use `label.enableBold = true` instead please"),this.enableBold=!!C$t},_enableItalics:function(C$t){cc.warn("`label._enableItalics` is deprecated, use `label.enableItalics = true` instead please"),this.enableItalic=!!C$t},_enableUnderline:function(C$t){cc.warn("`label._enableUnderline` is deprecated, use `label.enableUnderline = true` instead please"),this.enableUnderline=!!C$t}});cc.Label=C$e.exports=C$c},{"../assets/material/CCMaterial":53,"../platform/CCMacro":194,"../renderer/utils/label/label-frame":225,"./CCRenderComponent":89}],81:[function(C$t,C$e,C$i){"use strict";C$t=cc.Class({name:"cc.LabelOutline",extends:C$t("./CCComponent"),editor:!1,properties:{_color:cc.Color.WHITE,_width:1,color:{tooltip:!1,get:function(){return this._color},set:function(C$t){this._color=C$t,this._updateRenderData()}},width:{tooltip:!1,get:function(){return this._width},set:function(C$t){this._width!==C$t&&(this._width=C$t,this._updateRenderData())},range:[0,512]}},onEnable:function(){this._updateRenderData()},onDisable:function(){this._updateRenderData()},_updateRenderData:function(){var C$t=this.node.getComponent(cc.Label);C$t&&C$t.setVertsDirty()}});cc.LabelOutline=C$e.exports=C$t},{"./CCComponent":78}],82:[function(C$t,C$e,C$i){"use strict";C$t=cc.Class({name:"cc.LabelShadow",extends:C$t("./CCComponent"),editor:!1,properties:{_color:cc.Color.WHITE,_offset:cc.v2(2,2),_blur:2,color:{tooltip:!1,get:function(){return this._color},set:function(C$t){this._color=C$t,this._updateRenderData()}},offset:{tooltip:!1,get:function(){return this._offset},set:function(C$t){this._offset=C$t,this._updateRenderData()}},blur:{tooltip:!1,get:function(){return this._blur},set:function(C$t){this._blur=C$t,this._updateRenderData()},range:[0,1024]}},onEnable:function(){this._updateRenderData()},onDisable:function(){this._updateRenderData()},_updateRenderData:function(){var C$t=this.node.getComponent(cc.Label);C$t&&C$t.markForRender(!0)}});cc.LabelShadow=C$e.exports=C$t},{"./CCComponent":78}],83:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCNode").EventType,C$E=cc.Enum({NONE:0,HORIZONTAL:1,VERTICAL:2,GRID:3}),C$M=cc.Enum({NONE:0,CONTAINER:1,CHILDREN:2}),C$r=cc.Enum({HORIZONTAL:0,VERTICAL:1}),C$I=cc.Enum({BOTTOM_TO_TOP:0,TOP_TO_BOTTOM:1}),C$B=cc.Enum({LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1}),C$t=cc.Class({name:"cc.Layout",extends:C$t("./CCComponent"),editor:!1,properties:{_layoutSize:cc.size(300,200),_layoutDirty:{default:!0,serializable:!1},_resize:C$M.NONE,_N$layoutType:C$E.NONE,type:{type:C$E,get:function(){return this._N$layoutType},set:function(C$t){this._N$layoutType=C$t,this._doLayoutDirty()},tooltip:!1,animatable:!1},resizeMode:{type:C$M,tooltip:!1,animatable:!1,get:function(){return this._resize},set:function(C$t){this.type===C$E.NONE&&C$t===C$M.CHILDREN||(this._resize=C$t,this._doLayoutDirty())}},cellSize:{default:cc.size(40,40),tooltip:!1,type:cc.Size,notify:function(){this._doLayoutDirty()}},startAxis:{default:C$r.HORIZONTAL,tooltip:!1,type:C$r,notify:function(){this._doLayoutDirty()},animatable:!1},paddingLeft:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingRight:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingTop:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingBottom:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},spacingX:{default:0,notify:function(){this._doLayoutDirty()},tooltip:!1},spacingY:{default:0,notify:function(){this._doLayoutDirty()},tooltip:!1},verticalDirection:{default:C$I.TOP_TO_BOTTOM,type:C$I,notify:function(){this._doLayoutDirty()},tooltip:!1,animatable:!1},horizontalDirection:{default:C$B.LEFT_TO_RIGHT,type:C$B,notify:function(){this._doLayoutDirty()},tooltip:!1,animatable:!1},affectedByScale:{default:!1,notify:function(){this._doLayoutDirty()},animatable:!1,tooltip:!1}},statics:{Type:C$E,VerticalDirection:C$I,HorizontalDirection:C$B,ResizeMode:C$M,AxisDirection:C$r},onEnable:function(){this._addEventListeners(),this.node.getContentSize().equals(cc.size(0,0))&&this.node.setContentSize(this._layoutSize),this._doLayoutDirty()},onDisable:function(){this._removeEventListeners()},_doLayoutDirty:function(){this._layoutDirty=!0},_doScaleDirty:function(){this._layoutDirty=this._layoutDirty||this.affectedByScale},_addEventListeners:function(){cc.director.on(cc.Director.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(C$n.SIZE_CHANGED,this._resized,this),this.node.on(C$n.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(C$n.CHILD_ADDED,this._childAdded,this),this.node.on(C$n.CHILD_REMOVED,this._childRemoved,this),this.node.on(C$n.CHILD_REORDER,this._doLayoutDirty,this),this._addChildrenEventListeners()},_removeEventListeners:function(){cc.director.off(cc.Director.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(C$n.SIZE_CHANGED,this._resized,this),this.node.off(C$n.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(C$n.CHILD_ADDED,this._childAdded,this),this.node.off(C$n.CHILD_REMOVED,this._childRemoved,this),this.node.off(C$n.CHILD_REORDER,this._doLayoutDirty,this),this._removeChildrenEventListeners()},_addChildrenEventListeners:function(){for(var C$t=this.node.children,C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e];C$i.on(C$n.SCALE_CHANGED,this._doScaleDirty,this),C$i.on(C$n.SIZE_CHANGED,this._doLayoutDirty,this),C$i.on(C$n.POSITION_CHANGED,this._doLayoutDirty,this),C$i.on(C$n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$i.on("active-in-hierarchy-changed",this._doLayoutDirty,this)}},_removeChildrenEventListeners:function(){for(var C$t=this.node.children,C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e];C$i.off(C$n.SCALE_CHANGED,this._doScaleDirty,this),C$i.off(C$n.SIZE_CHANGED,this._doLayoutDirty,this),C$i.off(C$n.POSITION_CHANGED,this._doLayoutDirty,this),C$i.off(C$n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$i.off("active-in-hierarchy-changed",this._doLayoutDirty,this)}},_childAdded:function(C$t){C$t.on(C$n.SCALE_CHANGED,this._doScaleDirty,this),C$t.on(C$n.SIZE_CHANGED,this._doLayoutDirty,this),C$t.on(C$n.POSITION_CHANGED,this._doLayoutDirty,this),C$t.on(C$n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$t.on("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()},_childRemoved:function(C$t){C$t.off(C$n.SCALE_CHANGED,this._doScaleDirty,this),C$t.off(C$n.SIZE_CHANGED,this._doLayoutDirty,this),C$t.off(C$n.POSITION_CHANGED,this._doLayoutDirty,this),C$t.off(C$n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$t.off("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()},_resized:function(){this._layoutSize=this.node.getContentSize(),this._doLayoutDirty()},_doLayoutHorizontally:function(C$h,C$u,C$_,C$d){for(var C$f=this.node.getAnchorPoint(),C$p=this.node.children,C$t=1,C$m=this.paddingLeft,C$y=-C$f.x*C$h,C$g=(this.horizontalDirection===C$B.RIGHT_TO_LEFT&&(C$t=-1,C$y=(1-C$f.x)*C$h,C$m=this.paddingRight),C$y+C$t*C$m-C$t*this.spacingX),C$v=0,C$e=0,C$i=0,C$x=0,C$n=0,C$b=0,C$A=0,C$r=0;C$r<C$p.length;++C$r)(C$a=C$p[C$r]).activeInHierarchy&&C$A++;var C$C=this.cellSize.width;this.type!==C$E.GRID&&this.resizeMode===C$M.CHILDREN&&(C$C=(C$h-(this.paddingLeft+this.paddingRight)-(C$A-1)*this.spacingX)/C$A);for(C$r=0;C$r<C$p.length;++C$r){var C$S,C$T,C$s,C$w,C$o,C$a=C$p[C$r],C$c=this._getUsedScaleValue(C$a.scaleX),C$l=this._getUsedScaleValue(C$a.scaleY);C$a.activeInHierarchy&&(this._resize===C$M.CHILDREN&&(C$a.width=C$C/C$c,this.type===C$E.GRID&&(C$a.height=this.cellSize.height/C$l)),C$o=C$a.anchorX,C$c=C$a.width*C$c,(C$e=C$e<C$i?C$i:C$e)<=(C$l=C$a.height*C$l)&&(C$i=C$e,C$e=C$l,C$b=C$a.getAnchorPoint().y),C$g=C$g+C$t*(C$o=this.horizontalDirection===C$B.RIGHT_TO_LEFT?1-C$a.anchorX:C$o)*C$c+C$t*this.spacingX,C$S=C$t*(1-C$o)*C$c,C$u&&(C$s=C$g+C$S+C$t*(0<C$t?this.paddingRight:this.paddingLeft),C$T=this.horizontalDirection===C$B.LEFT_TO_RIGHT&&C$s>(1-C$f.x)*C$h,C$s=this.horizontalDirection===C$B.RIGHT_TO_LEFT&&C$s<-C$f.x*C$h,(C$T||C$s)&&(C$e<=C$l?(C$v+=C$i=0===C$i?C$e:C$i,C$i=C$e):(C$v+=C$e,C$i=C$l,C$e=0),C$g=C$y+C$t*(C$m+C$o*C$c),C$x++)),C$T=C$_(C$a,C$v,C$x),C$h>=C$c+this.paddingLeft+this.paddingRight&&C$d&&C$a.setPosition(cc.v2(C$g,C$T)),C$s=1,C$o=0===C$e?C$l:C$e,this.verticalDirection===C$I.TOP_TO_BOTTOM?(C$n=C$n||this.node._contentSize.height,(C$w=C$T+(C$s=-1)*(C$o*C$b+this.paddingBottom))<C$n&&(C$n=C$w)):(C$n=C$n||-this.node._contentSize.height)<(C$w=C$T+C$s*(C$o*C$b+this.paddingTop))&&(C$n=C$w),C$g+=C$S)}return C$n},_getVerticalBaseHeight:function(C$t){var C$e=0,C$i=0;if(this.resizeMode===C$M.CONTAINER){for(var C$n=0;C$n<C$t.length;++C$n){var C$r=C$t[C$n];C$r.activeInHierarchy&&(C$i++,C$e+=C$r.height*this._getUsedScaleValue(C$r.scaleY))}C$e+=(C$i-1)*this.spacingY+this.paddingBottom+this.paddingTop}else C$e=this.node.getContentSize().height;return C$e},_doLayoutVertically:function(C$h,C$u,C$_,C$d){for(var C$f=this.node.getAnchorPoint(),C$p=this.node.children,C$t=1,C$m=this.paddingBottom,C$y=-C$f.y*C$h,C$g=(this.verticalDirection===C$I.TOP_TO_BOTTOM&&(C$t=-1,C$y=(1-C$f.y)*C$h,C$m=this.paddingTop),C$y+C$t*C$m-C$t*this.spacingY),C$v=0,C$e=0,C$i=0,C$x=0,C$n=0,C$b=0,C$A=0,C$r=0;C$r<C$p.length;++C$r)(C$a=C$p[C$r]).activeInHierarchy&&C$A++;var C$C=this.cellSize.height;this.type!==C$E.GRID&&this.resizeMode===C$M.CHILDREN&&(C$C=(C$h-(this.paddingTop+this.paddingBottom)-(C$A-1)*this.spacingY)/C$A);for(C$r=0;C$r<C$p.length;++C$r){var C$S,C$T,C$s,C$w,C$o,C$a=C$p[C$r],C$c=this._getUsedScaleValue(C$a.scaleX),C$l=this._getUsedScaleValue(C$a.scaleY);C$a.activeInHierarchy&&(this.resizeMode===C$M.CHILDREN&&(C$a.height=C$C/C$l,this.type===C$E.GRID&&(C$a.width=this.cellSize.width/C$c)),C$o=C$a.anchorY,C$c=C$a.width*C$c,C$l=C$a.height*C$l,(C$e=C$e<C$i?C$i:C$e)<=C$c&&(C$i=C$e,C$e=C$c,C$b=C$a.getAnchorPoint().x),C$g=C$g+C$t*(C$o=this.verticalDirection===C$I.TOP_TO_BOTTOM?1-C$a.anchorY:C$o)*C$l+C$t*this.spacingY,C$S=C$t*(1-C$o)*C$l,C$u&&(C$s=C$g+C$S+C$t*(0<C$t?this.paddingTop:this.paddingBottom),C$T=this.verticalDirection===C$I.BOTTOM_TO_TOP&&C$s>(1-C$f.y)*C$h,C$s=this.verticalDirection===C$I.TOP_TO_BOTTOM&&C$s<-C$f.y*C$h,(C$T||C$s)&&(C$e<=C$c?(C$v+=C$i=0===C$i?C$e:C$i,C$i=C$e):(C$v+=C$e,C$i=C$c,C$e=0),C$g=C$y+C$t*(C$m+C$o*C$l),C$x++)),C$T=C$_(C$a,C$v,C$x),C$h>=C$l+(this.paddingTop+this.paddingBottom)&&C$d&&C$a.setPosition(cc.v2(C$T,C$g)),C$s=1,C$o=0===C$e?C$c:C$e,this.horizontalDirection===C$B.RIGHT_TO_LEFT?(C$n=C$n||this.node._contentSize.width,(C$w=C$T+(C$s=-1)*(C$o*C$b+this.paddingLeft))<C$n&&(C$n=C$w)):(C$n=C$n||-this.node._contentSize.width)<(C$w=C$T+C$s*(C$o*C$b+this.paddingRight))&&(C$n=C$w),C$g+=C$S)}return C$n},_doLayoutBasic:function(){for(var C$t,C$e,C$i,C$n=this.node.children,C$r=null,C$s=0;C$s<C$n.length;++C$s){var C$o=C$n[C$s];C$o.activeInHierarchy&&(C$r?C$r.union(C$r,C$o.getBoundingBoxToWorld()):C$r=C$o.getBoundingBoxToWorld())}C$r&&(C$t=this.node.convertToNodeSpaceAR(cc.v2(C$r.x,C$r.y)),C$t=cc.v2(C$t.x-this.paddingLeft,C$t.y-this.paddingBottom),C$i=this.node.convertToNodeSpaceAR(cc.v2(C$r.xMax,C$r.yMax)),C$i=(C$i=cc.v2(C$i.x+this.paddingRight,C$i.y+this.paddingTop)).sub(C$t),0!==(C$i=cc.size(parseFloat(C$i.x.toFixed(2)),parseFloat(C$i.y.toFixed(2)))).width&&(C$e=-C$t.x/C$i.width,this.node.anchorX=parseFloat(C$e.toFixed(2))),0!==C$i.height&&(C$e=-C$t.y/C$i.height,this.node.anchorY=parseFloat(C$e.toFixed(2))),this.node.setContentSize(C$i))},_doLayoutGridAxisHorizontal:function(C$t,C$e){var C$i,C$n=C$e.width,C$r=1,C$s=-C$t.y*C$e.height,C$o=this.paddingBottom,C$e=(this.verticalDirection===C$I.TOP_TO_BOTTOM&&(C$r=-1,C$s=(1-C$t.y)*C$e.height,C$o=this.paddingTop),function(C$t,C$e,C$i){return C$s+C$r*(C$e+C$t.anchorY*C$t.height*this._getUsedScaleValue(C$t.scaleY)+C$o+C$i*this.spacingY)}.bind(this)),C$a=0;this.resizeMode===C$M.CONTAINER&&(C$i=this._doLayoutHorizontally(C$n,!0,C$e,!1),(C$a=C$s-C$i)<0&&(C$a*=-1),C$s=-C$t.y*C$a,this.verticalDirection===C$I.TOP_TO_BOTTOM&&(C$r=-1,C$s=(1-C$t.y)*C$a)),this._doLayoutHorizontally(C$n,!0,C$e,!0),this.resizeMode===C$M.CONTAINER&&this.node.setContentSize(C$n,C$a)},_doLayoutGridAxisVertical:function(C$t,C$e){var C$i,C$n=C$e.height,C$r=1,C$s=-C$t.x*C$e.width,C$o=this.paddingLeft,C$e=(this.horizontalDirection===C$B.RIGHT_TO_LEFT&&(C$r=-1,C$s=(1-C$t.x)*C$e.width,C$o=this.paddingRight),function(C$t,C$e,C$i){return C$s+C$r*(C$e+C$t.anchorX*C$t.width*this._getUsedScaleValue(C$t.scaleX)+C$o+C$i*this.spacingX)}.bind(this)),C$a=0;this.resizeMode===C$M.CONTAINER&&(C$i=this._doLayoutVertically(C$n,!0,C$e,!1),(C$a=C$s-C$i)<0&&(C$a*=-1),C$s=-C$t.x*C$a,this.horizontalDirection===C$B.RIGHT_TO_LEFT&&(C$r=-1,C$s=(1-C$t.x)*C$a)),this._doLayoutVertically(C$n,!0,C$e,!0),this.resizeMode===C$M.CONTAINER&&this.node.setContentSize(C$a,C$n)},_doLayoutGrid:function(){var C$t=this.node.getAnchorPoint(),C$e=this.node.getContentSize();this.startAxis===C$r.HORIZONTAL?this._doLayoutGridAxisHorizontal(C$t,C$e):this.startAxis===C$r.VERTICAL&&this._doLayoutGridAxisVertical(C$t,C$e)},_getHorizontalBaseWidth:function(C$t){var C$e=0,C$i=0;if(this.resizeMode===C$M.CONTAINER){for(var C$n=0;C$n<C$t.length;++C$n){var C$r=C$t[C$n];C$r.activeInHierarchy&&(C$i++,C$e+=C$r.width*this._getUsedScaleValue(C$r.scaleX))}C$e+=(C$i-1)*this.spacingX+this.paddingLeft+this.paddingRight}else C$e=this.node.getContentSize().width;return C$e},_doLayout:function(){var C$t;this.type===C$E.HORIZONTAL?(C$t=this._getHorizontalBaseWidth(this.node.children),this._doLayoutHorizontally(C$t,!1,function(C$t){return C$t.y},!0),this.node.width=C$t):this.type===C$E.VERTICAL?(C$t=this._getVerticalBaseHeight(this.node.children),this._doLayoutVertically(C$t,!1,function(C$t){return C$t.x},!0),this.node.height=C$t):this.type===C$E.NONE?this.resizeMode===C$M.CONTAINER&&this._doLayoutBasic():this.type===C$E.GRID&&this._doLayoutGrid()},_getUsedScaleValue:function(C$t){return this.affectedByScale?Math.abs(C$t):1},updateLayout:function(){this._layoutDirty&&0<this.node.children.length&&(this._doLayout(),this._layoutDirty=!1)}});cc.Layout=C$e.exports=C$t},{"../CCNode":30,"./CCComponent":78}],84:[function(C$t,C$e,C$h){"use strict";var C$u=C$n(C$t("../../renderer/gfx")),C$s=C$n(C$t("../value-types/mat4")),C$o=C$n(C$t("../value-types/vec2")),C$i=C$n(C$t("../assets/material/material-variant"));function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}var C$_=C$t("../utils/misc"),C$d=C$t("./CCRenderComponent"),C$r=C$t("../renderer/render-flow"),C$f=C$t("../graphics/graphics"),C$p=new C$o.default,C$a=new C$s.default,C$c=[];var C$l=cc.Enum({RECT:0,ELLIPSE:1,IMAGE_STENCIL:2}),C$t=cc.Class({name:"cc.Mask",extends:C$d,editor:!1,ctor:function(){this._graphics=null,this._enableMaterial=null,this._exitMaterial=null,this._clearMaterial=null},properties:{_spriteFrame:{default:null,type:cc.SpriteFrame},_type:C$l.RECT,type:{get:function(){return this._type},set:function(C$t){this._type!==C$t&&this._resetAssembler(),this._type=C$t,this._type!==C$l.IMAGE_STENCIL&&(this.spriteFrame=null,this.alphaThreshold=0,this._updateGraphics()),this._activateMaterial()},type:C$l,tooltip:!1},spriteFrame:{type:cc.SpriteFrame,tooltip:!1,get:function(){return this._spriteFrame},set:function(C$t){this._spriteFrame!==C$t&&(this._spriteFrame=C$t,this.setVertsDirty(),this._updateMaterial())}},alphaThreshold:{default:.1,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS?this._updateMaterial():cc.warnID(4201)}},inverted:{default:!1,type:cc.Boolean,tooltip:!1,notify:function(){cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&cc.warnID(4202)}},_segments:64,segements:{get:function(){return this._segments},set:function(C$t){this._segments=C$_.clampf(C$t,3,1e4),this._updateGraphics()},type:cc.Integer,tooltip:!1},_resizeToTarget:{animatable:!1,set:function(C$t){C$t&&this._resizeNodeToTargetNode()}}},statics:{Type:C$l},onRestore:function(){this._activateMaterial()},onEnable:function(){this._super(),this._type!==C$l.IMAGE_STENCIL&&this._updateGraphics(),this.node.on(cc.Node.EventType.POSITION_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.ROTATION_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.SCALE_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._updateGraphics,this)},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.POSITION_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.ROTATION_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.SCALE_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._updateGraphics,this),this.node._renderFlag&=~C$r.FLAG_POST_RENDER},onDestroy:function(){this._super(),this._removeGraphics()},_resizeNodeToTargetNode:!1,_validateRender:function(){var C$t;this._type===C$l.IMAGE_STENCIL&&((C$t=this._spriteFrame)&&C$t.textureLoaded()||this.disableRender())},_activateMaterial:function(){this._createGraphics();var C$t=this._materials[0];(C$t=C$t?C$i.default.create(C$t,this):C$i.default.createWithBuiltin("2d-sprite",this)).define("USE_ALPHA_TEST",!0),this._type===C$l.IMAGE_STENCIL?(C$t.define("CC_USE_MODEL",!1),C$t.define("USE_TEXTURE",!0)):(C$t.define("CC_USE_MODEL",!0),C$t.define("USE_TEXTURE",!1)),this._enableMaterial||(this._enableMaterial=C$i.default.createWithBuiltin("2d-sprite",this)),this._exitMaterial||(this._exitMaterial=C$i.default.createWithBuiltin("2d-sprite",this),this._exitMaterial.setStencilEnabled(C$u.default.STENCIL_DISABLE)),this._clearMaterial||(this._clearMaterial=C$i.default.createWithBuiltin("clear-stencil",this)),this.setMaterial(0,C$t),this._graphics._materials[0]=C$t,this._updateMaterial()},_updateMaterial:function(){var C$t,C$e=this._materials[0];C$e&&(this._type===C$l.IMAGE_STENCIL&&this.spriteFrame&&(C$t=this.spriteFrame.getTexture(),C$e.setProperty("texture",C$t)),C$e.setProperty("alphaThreshold",this.alphaThreshold))},_createGraphics:function(){this._graphics||(this._graphics=new C$f,cc.Assembler.init(this._graphics),this._graphics.node=this.node,this._graphics.lineWidth=0,this._graphics.strokeColor=cc.color(0,0,0,0))},_updateGraphics:function(){var C$t=this.node,C$e=this._graphics,C$i=(C$e.clear(!1),C$t._contentSize.width),C$n=C$t._contentSize.height,C$r=-C$i*C$t._anchorPoint.x,C$t=-C$n*C$t._anchorPoint.y;if(this._type===C$l.RECT)C$e.rect(C$r,C$t,C$i,C$n);else if(this._type===C$l.ELLIPSE){for(var C$s=function(C$t,C$e,C$i){C$c.length=0;for(var C$n=2*Math.PI/C$i,C$r=0;C$r<C$i;++C$r)C$c.push(cc.v2(C$e.x*Math.cos(C$n*C$r)+C$t.x,C$e.y*Math.sin(C$n*C$r)+C$t.y));return C$c}(cc.v2(C$r+C$i/2,C$t+C$n/2),{x:C$i/2,y:C$n/2},this._segments),C$o=0;C$o<C$s.length;++C$o){var C$a=C$s[C$o];0===C$o?C$e.moveTo(C$a.x,C$a.y):C$e.lineTo(C$a.x,C$a.y)}C$e.close()}cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?C$e.stroke():C$e.fill()},_removeGraphics:function(){this._graphics&&(this._graphics.destroy(),this._graphics._destroyImmediate(),this._graphics=null)},_hitTest:function(C$t){var C$e=this.node,C$i=C$e.getContentSize(),C$n=C$i.width,C$i=C$i.height,C$r=C$p;if(C$e._updateWorldMatrix(),!C$s.default.invert(C$a,C$e._worldMatrix))return!1;C$o.default.transformMat4(C$r,C$t,C$a),C$r.x+=C$e._anchorPoint.x*C$n,C$r.y+=C$e._anchorPoint.y*C$i;C$t=!1;return this.type===C$l.RECT||this.type===C$l.IMAGE_STENCIL?C$t=0<=C$r.x&&0<=C$r.y&&C$r.x<=C$n&&C$r.y<=C$i:this.type===C$l.ELLIPSE&&(C$t=(C$e=C$r.x-.5*C$n)*C$e/((C$e=C$n/2)*C$e)+(C$n=C$r.y-.5*C$i)*C$n/((C$e=C$i/2)*C$e)<1),C$t=this.inverted?!C$t:C$t},markForRender:function(C$t){var C$e=C$r.FLAG_RENDER|C$r.FLAG_UPDATE_RENDER_DATA|C$r.FLAG_POST_RENDER;C$t?(this.node._renderFlag|=C$e,this.markForValidate()):this.node._renderFlag&=~C$e},disableRender:function(){this.node._renderFlag&=~(C$r.FLAG_RENDER|C$r.FLAG_UPDATE_RENDER_DATA|C$r.FLAG_POST_RENDER)}});cc.Mask=C$e.exports=C$t},{"../../renderer/gfx":312,"../assets/material/material-variant":60,"../graphics/graphics":131,"../renderer/render-flow":221,"../utils/misc":264,"../value-types/mat4":281,"../value-types/vec2":288,"./CCRenderComponent":89}],85:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../components/CCRenderComponent"),C$r=C$t("../../core/utils/blend-func"),C$t=cc.Class({name:"cc.MotionStreak",extends:C$n,mixins:[C$r],editor:!1,ctor:function(){this._points=[]},properties:{preview:{default:!1,editorOnly:!0,notify:!1,animatable:!1},_fadeTime:1,fadeTime:{get:function(){return this._fadeTime},set:function(C$t){this._fadeTime=C$t,this.reset()},animatable:!1,tooltip:!1},_minSeg:1,minSeg:{get:function(){return this._minSeg},set:function(C$t){this._minSeg=C$t},animatable:!1,tooltip:!1},_stroke:64,stroke:{get:function(){return this._stroke},set:function(C$t){this._stroke=C$t},animatable:!1,tooltip:!1},_texture:{default:null,type:cc.Texture2D},texture:{get:function(){return this._texture},set:function(C$t){this._texture!==C$t&&(this._texture=C$t,this._updateMaterial())},type:cc.Texture2D,animatable:!1,tooltip:!1},_color:cc.Color.WHITE,color:{get:function(){return this._color},set:function(C$t){this._color=C$t},type:cc.Color,tooltip:!1},_fastMode:!1,fastMode:{get:function(){return this._fastMode},set:function(C$t){this._fastMode=C$t},animatable:!1,tooltip:!1}},onEnable:function(){this._super(),this.reset()},_updateMaterial:function(){var C$t=this.getMaterial(0);C$t&&C$t.setProperty("texture",this._texture),C$r.prototype._updateMaterial.call(this)},onFocusInEditor:!1,onLostFocusInEditor:!1,reset:function(){this._points.length=0,this._assembler&&this._assembler._renderData.clear()},lateUpdate:function(C$t){this._assembler&&this._assembler.update(this,C$t)}});cc.MotionStreak=C$e.exports=C$t},{"../../core/utils/blend-func":257,"../components/CCRenderComponent":89}],86:[function(C$t,C$e,C$i){"use strict";var C$s=cc.Enum({Unified:0,Free:1}),C$o=cc.Enum({Horizontal:0,Vertical:1}),C$n=cc.Enum({PAGE_TURNING:0}),C$r=cc.Class({name:"cc.PageView",extends:cc.ScrollView,editor:!1,ctor:function(){this._curPageIdx=0,this._lastPageIdx=0,this._pages=[],this._initContentPos=cc.v2(),this._scrollCenterOffsetX=[],this._scrollCenterOffsetY=[]},properties:{sizeMode:{default:C$s.Unified,type:C$s,tooltip:!1,notify:function(){this._syncSizeMode()}},direction:{default:C$o.Horizontal,type:C$o,tooltip:!1,notify:function(){this._syncScrollDirection()}},scrollThreshold:{default:.5,type:cc.Float,slide:!0,range:[0,1,.01],tooltip:!1},autoPageTurningThreshold:{default:100,type:cc.Float,tooltip:!1},pageTurningEventTiming:{default:.1,type:cc.Float,range:[0,1,.01],tooltip:!1},indicator:{default:null,type:cc.PageViewIndicator,tooltip:!1,notify:function(){this.indicator&&this.indicator.setPageView(this)}},pageTurningSpeed:{default:.3,type:cc.Float,tooltip:!1},pageEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{SizeMode:C$s,Direction:C$o,EventType:C$n},__preload:function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this._updateAllPagesSize,this)},onEnable:function(){this._super(),this.node.on("scroll-ended-with-threshold",this._dispatchPageTurningEvent,this)},onDisable:function(){this._super(),this.node.off("scroll-ended-with-threshold",this._dispatchPageTurningEvent,this)},onLoad:function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)},onDestroy:function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._updateAllPagesSize,this)},getCurrentPageIndex:function(){return this._curPageIdx},setCurrentPageIndex:function(C$t){this.scrollToPage(C$t,!0)},getPages:function(){return this._pages},addPage:function(C$t){C$t&&-1===this._pages.indexOf(C$t)&&this.content&&(this.content.addChild(C$t),this._pages.push(C$t),this._updatePageView())},insertPage:function(C$t,C$e){C$e<0||!C$t||-1!==this._pages.indexOf(C$t)||!this.content||(this._pages.length<=C$e?this.addPage(C$t):(this._pages.splice(C$e,0,C$t),this.content.addChild(C$t),this._updatePageView()))},removePage:function(C$t){var C$e;C$t&&this.content&&(-1!==(C$e=this._pages.indexOf(C$t))?this.removePageAtIndex(C$e):cc.warnID(4300,C$t.name))},removePageAtIndex:function(C$t){var C$e,C$i=this._pages;C$t<0||C$t>=C$i.length||(C$e=C$i[C$t])&&(this.content.removeChild(C$e),C$i.splice(C$t,1),this._updatePageView())},removeAllPages:function(){if(this.content){for(var C$t=this._pages,C$e=0,C$i=C$t.length;C$e<C$i;C$e++)this.content.removeChild(C$t[C$e]);this._pages.length=0,this._updatePageView()}},scrollToPage:function(C$t,C$e){C$t<0||C$t>=this._pages.length||(C$e=void 0!==C$e?C$e:.3,this._curPageIdx=C$t,this.scrollToOffset(this._moveOffsetValue(C$t),C$e,!0),this.indicator&&this.indicator._changedState())},getScrollEndedEventTiming:function(){return this.pageTurningEventTiming},_syncScrollDirection:function(){this.horizontal=this.direction===C$o.Horizontal,this.vertical=this.direction===C$o.Vertical},_syncSizeMode:function(){var C$t,C$e;!this.content||(C$t=this.content.getComponent(cc.Layout))&&(this.sizeMode===C$s.Free&&0<this._pages.length&&(C$e=this._pages[this._pages.length-1],this.direction===C$o.Horizontal?(C$t.paddingLeft=(this._view.width-this._pages[0].width)/2,C$t.paddingRight=(this._view.width-C$e.width)/2):this.direction===C$o.Vertical&&(C$t.paddingTop=(this._view.height-this._pages[0].height)/2,C$t.paddingBottom=(this._view.height-C$e.height)/2)),C$t.updateLayout())},_updatePageView:function(){for(var C$t=this.content.getComponent(cc.Layout),C$e=(C$t&&C$t.enabled&&C$t.updateLayout(),this._pages.length),C$i=(this._curPageIdx>=C$e&&(this._curPageIdx=0===C$e?0:C$e-1,this._lastPageIdx=this._curPageIdx),this._initContentPos),C$n=0;C$n<C$e;++C$n){var C$r=this._pages[C$n];C$r.setSiblingIndex(C$n),this.direction===C$o.Horizontal?this._scrollCenterOffsetX[C$n]=Math.abs(C$i.x+C$r.x):this._scrollCenterOffsetY[C$n]=Math.abs(C$i.y+C$r.y)}this.indicator&&this.indicator._refresh()},_updateAllPagesSize:function(){if(this.sizeMode===C$s.Unified)for(var C$t=this._pages,C$e=this._view.getContentSize(),C$i=0,C$n=C$t.length;C$i<C$n;C$i++)C$t[C$i].setContentSize(C$e)},_initPages:function(){if(this.content){this._initContentPos=this.content.position;for(var C$t=this.content.children,C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e];0<=this._pages.indexOf(C$i)||this._pages.push(C$i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}},_dispatchPageTurningEvent:function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,cc.Component.EventHandler.emitEvents(this.pageEvents,this,C$n.PAGE_TURNING),this.node.emit("page-turning",this))},_isScrollable:function(C$t,C$e,C$i){return this.sizeMode!==C$s.Free?this.direction===C$o.Horizontal?Math.abs(C$t.x)>=this._view.width*this.scrollThreshold:this.direction===C$o.Vertical?Math.abs(C$t.y)>=this._view.height*this.scrollThreshold:void 0:this.direction===C$o.Horizontal?(C$n=this._scrollCenterOffsetX[C$e],C$r=this._scrollCenterOffsetX[C$i],Math.abs(C$t.x)>=Math.abs(C$n-C$r)*this.scrollThreshold):this.direction===C$o.Vertical?(C$n=this._scrollCenterOffsetY[C$e],C$r=this._scrollCenterOffsetY[C$i],Math.abs(C$t.y)>=Math.abs(C$n-C$r)*this.scrollThreshold):void 0;var C$n,C$r},_isQuicklyScrollable:function(C$t){if(this.direction===C$o.Horizontal){if(Math.abs(C$t.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===C$o.Vertical&&Math.abs(C$t.y)>this.autoPageTurningThreshold)return!0;return!1},_moveOffsetValue:function(C$t){var C$e=cc.v2(0,0);return this.sizeMode===C$s.Free?this.direction===C$o.Horizontal?C$e.x=this._scrollCenterOffsetX[C$t]:this.direction===C$o.Vertical&&(C$e.y=this._scrollCenterOffsetY[C$t]):this.direction===C$o.Horizontal?C$e.x=C$t*this._view.width:this.direction===C$o.Vertical&&(C$e.y=C$t*this._view.height),C$e},_getDragDirection:function(C$t){return this.direction===C$o.Horizontal?0===C$t.x?0:0<C$t.x?1:-1:this.direction===C$o.Vertical?0===C$t.y?0:C$t.y<0?1:-1:void 0},_handleReleaseLogic:function(C$t){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent("scroll-ended"))},_autoScrollToPage:function(){if(this._startBounceBackIfNeeded()){var C$t=this._getHowMuchOutOfBoundary();(0<(C$t=this._clampDelta(C$t)).x||C$t.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(C$t.x<0||0<C$t.y)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{var C$t=this._touchBeganPosition.sub(this._touchEndPosition),C$e=this._curPageIdx,C$i=C$e+this._getDragDirection(C$t),C$n=this.pageTurningSpeed*Math.abs(C$e-C$i);if(C$i<this._pages.length){if(this._isScrollable(C$t,C$e,C$i))return void this.scrollToPage(C$i,C$n);C$t=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(C$t))return void this.scrollToPage(C$i,C$n)}this.scrollToPage(C$e,C$n)}},_onTouchBegan:function(C$t,C$e){this._touchBeganPosition=C$t.touch.getLocation(),this._super(C$t,C$e)},_onTouchMoved:function(C$t,C$e){this._super(C$t,C$e)},_onTouchEnded:function(C$t,C$e){this._touchEndPosition=C$t.touch.getLocation(),this._super(C$t,C$e)},_onTouchCancelled:function(C$t,C$e){this._touchEndPosition=C$t.touch.getLocation(),this._super(C$t,C$e)},_onMouseWheel:function(){}});cc.PageView=C$e.exports=C$r},{}],87:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Enum({HORIZONTAL:0,VERTICAL:1}),C$t=cc.Class({name:"cc.PageViewIndicator",extends:C$t("./CCComponent"),editor:!1,properties:{_layout:null,_pageView:null,_indicators:[],spriteFrame:{default:null,type:cc.SpriteFrame,tooltip:!1},direction:{default:C$n.HORIZONTAL,type:C$n,tooltip:!1},cellSize:{default:cc.size(20,20),tooltip:!1},spacing:{default:0,tooltip:!1}},statics:{Direction:C$n},onLoad:function(){this._updateLayout()},setPageView:function(C$t){this._pageView=C$t,this._refresh()},_updateLayout:function(){this._layout=this.getComponent(cc.Layout),this._layout||(this._layout=this.addComponent(cc.Layout)),this.direction===C$n.HORIZONTAL?(this._layout.type=cc.Layout.Type.HORIZONTAL,this._layout.spacingX=this.spacing):this.direction===C$n.VERTICAL&&(this._layout.type=cc.Layout.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=cc.Layout.ResizeMode.CONTAINER},_createIndicator:function(){var C$t=new cc.Node,C$e=C$t.addComponent(cc.Sprite);return C$e.spriteFrame=this.spriteFrame,C$e.sizeMode=cc.Sprite.SizeMode.CUSTOM,C$t.parent=this.node,C$t.width=this.cellSize.width,C$t.height=this.cellSize.height,C$t},_changedState:function(){var C$t=this._indicators;if(0!==C$t.length){var C$e=this._pageView._curPageIdx;if(!(C$e>=C$t.length)){for(var C$i=0;C$i<C$t.length;++C$i)C$t[C$i].opacity=127.5;C$t[C$e].opacity=255}}},_refresh:function(){if(this._pageView){var C$t=this._indicators,C$e=this._pageView.getPages();if(C$e.length!==C$t.length){var C$i=0;if(C$e.length>C$t.length)for(C$i=0;C$i<C$e.length;++C$i)C$t[C$i]||(C$t[C$i]=this._createIndicator());else for(C$i=C$t.length-C$e.length;0<C$i;--C$i){var C$n=C$t[C$i-1];this.node.removeChild(C$n),C$t.splice(C$i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}}});cc.PageViewIndicator=C$e.exports=C$t},{"./CCComponent":78}],88:[function(C$t,C$e,C$i){"use strict";var C$h=C$t("../utils/misc"),C$t=C$t("./CCComponent"),C$u=cc.Enum({HORIZONTAL:0,VERTICAL:1,FILLED:2}),C$t=cc.Class({name:"cc.ProgressBar",extends:C$t,editor:!1,_initBarSprite:function(){var C$t,C$e,C$i,C$n;!this.barSprite||(C$t=this.barSprite.node)&&(C$e=this.node.getContentSize(),C$i=this.node.getAnchorPoint(),C$n=C$t.getContentSize(),C$t.parent===this.node&&this.node.setContentSize(C$n),this.barSprite.fillType===cc.Sprite.FillType.RADIAL&&(this.mode=C$u.FILLED),C$n=C$t.getContentSize(),this.mode===C$u.HORIZONTAL?this.totalLength=C$n.width:this.mode===C$u.VERTICAL?this.totalLength=C$n.height:this.totalLength=this.barSprite.fillRange,C$t.parent===this.node&&(C$n=-C$e.width*C$i.x,C$t.setPosition(cc.v2(C$n,0))))},_updateBarStatus:function(){if(this.barSprite){var C$t=this.barSprite.node;if(C$t){var C$e,C$i,C$n,C$r=C$t.getAnchorPoint(),C$s=C$t.getContentSize(),C$o=C$t.getPosition(),C$a=cc.v2(0,.5),C$c=C$h.clamp01(this.progress),C$l=this.totalLength*C$c;switch(this.mode){case C$u.HORIZONTAL:this.reverse&&(C$a=cc.v2(1,.5)),C$e=cc.size(C$l,C$s.height),C$i=this.totalLength,C$n=C$s.height;break;case C$u.VERTICAL:C$a=this.reverse?cc.v2(.5,1):cc.v2(.5,0),C$e=cc.size(C$s.width,C$l),C$i=C$s.width,C$n=this.totalLength}this.mode===C$u.FILLED?this.barSprite.type!==cc.Sprite.Type.FILLED?cc.warn("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this.reverse&&(C$l*=-1),this.barSprite.fillRange=C$l):this.barSprite.type!==cc.Sprite.Type.FILLED?(C$c=C$a.x-C$r.x,C$r=C$a.y-C$r.y,C$c=cc.v2(C$i*C$c,C$n*C$r),C$t.setPosition(C$o.x+C$c.x,C$o.y+C$c.y),C$t.setAnchorPoint(C$a),C$t.setContentSize(C$e)):cc.warn("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}}},properties:{barSprite:{default:null,type:cc.Sprite,tooltip:!1,notify:function(){this._initBarSprite()},animatable:!1},mode:{default:C$u.HORIZONTAL,type:C$u,tooltip:!1,notify:function(){var C$t;!this.barSprite||(C$t=this.barSprite.node)&&(C$t=C$t.getContentSize(),this.mode===C$u.HORIZONTAL?this.totalLength=C$t.width:this.mode===C$u.VERTICAL?this.totalLength=C$t.height:this.mode===C$u.FILLED&&(this.totalLength=this.barSprite.fillRange))},animatable:!1},_N$totalLength:1,totalLength:{range:[0,Number.MAX_VALUE],tooltip:!1,get:function(){return this._N$totalLength},set:function(C$t){this.mode===C$u.FILLED&&(C$t=C$h.clamp01(C$t)),this._N$totalLength=C$t,this._updateBarStatus()}},progress:{default:1,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){this._updateBarStatus()}},reverse:{default:!1,tooltip:!1,notify:function(){this.barSprite&&(this.barSprite.fillStart=1-this.barSprite.fillStart),this._updateBarStatus()},animatable:!1}},statics:{Mode:C$u}});cc.ProgressBar=C$e.exports=C$t},{"../utils/misc":264,"./CCComponent":78}],89:[function(C$t,C$e,C$i){"use strict";var C$n=C$s(C$t("../renderer/assembler")),C$r=C$s(C$t("../assets/material/material-variant"));function C$s(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}var C$o=C$t("./CCComponent"),C$a=C$t("../renderer/render-flow"),C$c=C$t("../assets/material/CCMaterial"),C$t=cc.Class({name:"RenderComponent",extends:C$o,editor:!1,properties:{_materials:{default:[],type:C$c},materials:{get:function(){return this._materials},set:function(C$t){this._materials=C$t,this._activateMaterial()},type:[C$c],displayName:"Materials",animatable:!1}},ctor:function(){this._vertsDirty=!0,this._assembler=null},_resetAssembler:function(){C$n.default.init(this),this._updateColor(),this.setVertsDirty()},__preload:function(){this._resetAssembler(),this._activateMaterial()},onEnable:function(){this.node._renderComponent&&(this.node._renderComponent.enabled=!1),(this.node._renderComponent=this).node._renderFlag|=C$a.FLAG_OPACITY_COLOR,this.setVertsDirty()},onDisable:function(){this.node._renderComponent=null,this.disableRender()},onDestroy:function(){for(var C$t=this._materials,C$e=0;C$e<C$t.length;C$e++)cc.pool.material.put(C$t[C$e]);C$t.length=0,cc.pool.assembler.put(this._assembler)},setVertsDirty:function(){this._vertsDirty=!0,this.markForRender(!0)},_on3DNodeChanged:function(){this._resetAssembler()},_validateRender:function(){},markForValidate:function(){cc.RenderFlow.registerValidate(this)},markForRender:function(C$t){var C$e=C$a.FLAG_RENDER|C$a.FLAG_UPDATE_RENDER_DATA;C$t?(this.node._renderFlag|=C$e,this.markForValidate()):this.node._renderFlag&=~C$e},disableRender:function(){this.node._renderFlag&=~(C$a.FLAG_RENDER|C$a.FLAG_UPDATE_RENDER_DATA)},getMaterial:function(C$t){if(C$t<0||C$t>=this._materials.length)return null;var C$e=this._materials[C$t];if(!C$e)return null;var C$i=C$r.default.create(C$e,this);return C$i!==C$e&&this.setMaterial(C$t,C$i),C$i},getMaterials:function(){for(var C$t=this._materials,C$e=0;C$e<C$t.length;C$e++)C$t[C$e]=C$r.default.create(C$t[C$e],this);return C$t},setMaterial:function(C$t,C$e){return C$e!==this._materials[C$t]&&(C$e=C$r.default.create(C$e,this),this._materials[C$t]=C$e),this._updateMaterial(),this.markForRender(!0),C$e},_getDefaultMaterial:function(){return C$c.getBuiltinMaterial("2d-sprite")},_activateMaterial:function(){var C$t,C$e=this._materials;C$e[0]||(C$t=this._getDefaultMaterial(),C$e[0]=C$t);for(var C$i=0;C$i<C$e.length;C$i++)C$e[C$i]=C$r.default.create(C$e[C$i],this);this._updateMaterial()},_updateMaterial:function(){},_updateColor:function(){this._assembler.updateColor&&this._assembler.updateColor(this)},_checkBacth:function(C$t,C$e){var C$i=this._materials[0];(C$i&&C$i.getHash()!==C$t.material.getHash()||C$t.cullingMask!==C$e)&&(C$t._flush(),C$t.node=C$i.getDefine("CC_USE_MODEL")?this.node:C$t._dummyNode,C$t.material=C$i,C$t.cullingMask=C$e)}});cc.RenderComponent=C$e.exports=C$t},{"../assets/material/CCMaterial":53,"../assets/material/material-variant":60,"../renderer/assembler":217,"../renderer/render-flow":221,"./CCComponent":78}],90:[function(C$t,C$e,C$a){"use strict";var C$i=C$t("../platform/js"),C$n=C$t("../platform/CCMacro"),C$u=C$t("../utils/text-utils"),C$h=new(C$t("../utils/html-text-parser")),C$_=C$n.TextAlignment,C$r=C$n.VerticalTextAlignment,C$s="RICHTEXT_CHILD",C$l="RICHTEXT_Image_CHILD",C$t=cc.Label.CacheMode;var C$o=new C$i.Pool(function(C$t){if(!cc.isValid(C$t))return!1;C$t=C$t.getComponent(cc.LabelOutline);return C$t&&(C$t.width=0),!0},20),C$n=(C$o.get=function(C$t,C$e){var C$i=this._get(),C$n=((C$i=C$i||new cc.PrivateNode(C$s)).setPosition(0,0),C$i.setAnchorPoint(.5,.5),C$i.skewX=0,C$i.getComponent(cc.Label));return(C$n=C$n||C$i.addComponent(cc.Label)).string="",C$n.horizontalAlign=C$_.LEFT,C$n.verticalAlign=C$r.CENTER,C$i},cc.Class({name:"cc.RichText",extends:cc.Component,ctor:function(){this._textArray=null,this._labelSegments=[],this._labelSegmentsCache=[],this._linesWidth=[],this._updateRichTextStatus=this._updateRichText},editor:!1,properties:{string:{default:"<color=#00ff00>Rich</c><color=#0fffff>Text</color>",multiline:!0,tooltip:!1,notify:function(){this._updateRichTextStatus()}},horizontalAlign:{default:C$_.LEFT,type:C$_,tooltip:!1,animatable:!1,notify:function(C$t){this.horizontalAlign!==C$t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},fontSize:{default:40,tooltip:!1,notify:function(C$t){this.fontSize!==C$t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},_fontFamily:"Arial",fontFamily:{tooltip:!1,get:function(){return this._fontFamily},set:function(C$t){this._fontFamily!==C$t&&(this._fontFamily=C$t,this._layoutDirty=!0,this._updateRichTextStatus())},animatable:!1},font:{default:null,type:cc.TTFFont,tooltip:!1,notify:function(C$t){this.font!==C$t&&(this._layoutDirty=!0,this.font?(this.useSystemFont=!1,this._onTTFLoaded()):this.useSystemFont=!0,this._updateRichTextStatus())}},_isSystemFontUsed:!0,useSystemFont:{get:function(){return this._isSystemFontUsed},set:function(C$t){this._isSystemFontUsed!==C$t&&(this._isSystemFontUsed=C$t,this._layoutDirty=!0,this._updateRichTextStatus())},animatable:!1,tooltip:!1},cacheMode:{default:C$t.NONE,type:C$t,tooltip:!1,notify:function(C$t){this.cacheMode!==C$t&&this._updateRichTextStatus()},animatable:!1},maxWidth:{default:0,tooltip:!1,notify:function(C$t){this.maxWidth!==C$t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},lineHeight:{default:40,tooltip:!1,notify:function(C$t){this.lineHeight!==C$t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},imageAtlas:{default:null,type:cc.SpriteAtlas,tooltip:!1,notify:function(C$t){this.imageAtlas!==C$t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},handleTouchEvent:{default:!0,tooltip:!1,notify:function(C$t){this.handleTouchEvent!==C$t&&this.enabledInHierarchy&&(this.handleTouchEvent?this._addEventListeners():this._removeEventListeners())}}},statics:{HorizontalAlign:C$_,VerticalAlign:C$r},onEnable:function(){this.handleTouchEvent&&this._addEventListeners(),this._updateRichText(),this._activateChildren(!0)},onDisable:function(){this.handleTouchEvent&&this._removeEventListeners(),this._activateChildren(!1)},start:function(){this._onTTFLoaded()},_onColorChanged:function(C$e){this.node.children.forEach(function(C$t){C$t.color=C$e})},_addEventListeners:function(){this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.COLOR_CHANGED,this._onColorChanged,this)},_removeEventListeners:function(){this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.COLOR_CHANGED,this._onColorChanged,this)},_updateLabelSegmentTextAttributes:function(){this._labelSegments.forEach(function(C$t){this._applyTextAttribute(C$t,null,!0)}.bind(this))},_createFontLabel:function(C$t){return C$o.get(C$t,this)},_onTTFLoaded:function(){var C$i;!(this.font instanceof cc.TTFFont)||this.font._nativeAsset?(this._layoutDirty=!0,this._updateRichText()):(C$i=this,cc.loader.load(this.font.nativeUrl,function(C$t,C$e){C$i._layoutDirty=!0,C$i._updateRichText()}))},_measureText:function(C$i,C$t){function C$e(C$t){var C$e;return 0===C$n._labelSegmentsCache.length?(C$e=C$n._createFontLabel(C$t),C$n._labelSegmentsCache.push(C$e)):C$e=C$n._labelSegmentsCache[0],C$e._styleIndex=C$i,C$n._applyTextAttribute(C$e,C$t,!0),C$e.getContentSize().width}var C$n=this;return C$t?C$e(C$t):C$e},_onTouchEnded:function(C$n){for(var C$r=this,C$s=this.node.getComponents(cc.Component),C$t=0;C$t<this._labelSegments.length;++C$t)!function(C$t){var C$t=C$r._labelSegments[C$t],C$e=C$t._clickHandler,C$i=C$t._clickParam;C$e&&C$r._containsTouchLocation(C$t,C$n.touch.getLocation())&&(C$s.forEach(function(C$t){C$t.enabledInHierarchy&&C$t[C$e]&&C$t[C$e](C$n,C$i)}),C$n.stopPropagation())}(C$t)},_containsTouchLocation:function(C$t,C$e){return C$t.getBoundingBoxToWorld().contains(C$e)},_resetState:function(){for(var C$t=this.node.children,C$e=C$t.length-1;0<=C$e;C$e--){var C$i=C$t[C$e];C$i.name!==C$s&&C$i.name!==C$l||(C$i.parent===this.node?C$i.parent=null:C$t.splice(C$e,1),C$i.name===C$s&&C$o.put(C$i))}this._labelSegments.length=0,this._labelSegmentsCache.length=0,this._linesWidth.length=0,this._lineOffsetX=0,this._lineCount=1,this._labelWidth=0,this._labelHeight=0,this._layoutDirty=!0},onRestore:!1,_activateChildren:function(C$t){for(var C$e=this.node.children.length-1;0<=C$e;C$e--){var C$i=this.node.children[C$e];C$i.name!==C$s&&C$i.name!==C$l||(C$i.active=C$t)}},_addLabelSegment:function(C$t,C$e){var C$i=0===this._labelSegmentsCache.length?this._createFontLabel(C$t):this._labelSegmentsCache.pop();return C$i._styleIndex=C$e,C$i._lineCount=this._lineCount,C$i.active=this.node.active,C$i.setAnchorPoint(0,0),this._applyTextAttribute(C$i,C$t),this.node.addChild(C$i),this._labelSegments.push(C$i),C$i},_updateRichTextWithMaxWidth:function(C$t,C$h,C$e){var C$i=C$h;if(0<this._lineOffsetX&&C$i+this._lineOffsetX>this.maxWidth)for(var C$n=0;this._lineOffsetX<=this.maxWidth;){var C$r,C$s=this._getFirstWordLen(C$t,C$n,C$t.length),C$o=C$t.substr(C$n,C$s),C$o=this._measureText(C$e,C$o);if(!(this._lineOffsetX+C$o<=this.maxWidth)){0<C$n&&(C$r=C$t.substr(0,C$n),this._addLabelSegment(C$r,C$e),C$t=C$t.substr(C$n,C$t.length),C$i=this._measureText(C$e,C$t)),this._updateLineInfo();break}this._lineOffsetX+=C$o,C$n+=C$s}if(C$i>this.maxWidth)for(var C$a=C$u.fragmentText(C$t,C$i,this.maxWidth,this._measureText(C$e)),C$c=0;C$c<C$a.length;++C$c){var C$l=C$a[C$c],C$l=this._addLabelSegment(C$l,C$e).getContentSize();this._lineOffsetX+=C$l.width,1<C$a.length&&C$c<C$a.length-1&&this._updateLineInfo()}else this._lineOffsetX+=C$i,this._addLabelSegment(C$t,C$e)},_isLastComponentCR:function(C$t){return C$t.length-1===C$t.lastIndexOf("\n")},_updateLineInfo:function(){this._linesWidth.push(this._lineOffsetX),this._lineOffsetX=0,this._lineCount++},_needsUpdateTextLayout:function(C$t){if(this._layoutDirty||!this._textArray||!C$t)return!0;if(this._textArray.length!==C$t.length)return!0;for(var C$e=0;C$e<this._textArray.length;++C$e){var C$i=this._textArray[C$e],C$n=C$t[C$e];if(C$i.text!==C$n.text)return!0;C$i=C$i.style,C$n=C$n.style;if(C$i){if(C$n){if(!C$i.outline!=!C$n.outline)return!0;if(C$i.size!==C$n.size||!C$i.italic!=!C$n.italic||C$i.isImage!==C$n.isImage)return!0;if(C$i.src!==C$n.src||C$i.imageAlign!==C$n.imageAlign||C$i.imageHeight!==C$n.imageHeight||C$i.imageWidth!==C$n.imageWidth||C$i.imageOffset!==C$n.imageOffset)return!0}else if(C$i.size||C$i.italic||C$i.isImage||C$i.outline)return!0}else if(C$n&&(C$n.size||C$n.italic||C$n.isImage||C$n.outline))return!0}return!1},_addRichTextImageElement:function(C$t){var C$e=C$t.style.src,C$e=this.imageAtlas.getSpriteFrame(C$e);if(C$e){var C$i=new cc.PrivateNode(C$l),C$n=C$i.addComponent(cc.Sprite);switch(C$t.style.imageAlign){case"top":C$i.setAnchorPoint(0,1);break;case"center":C$i.setAnchorPoint(0,.5);break;default:C$i.setAnchorPoint(0,0)}C$t.style.imageOffset&&(C$i._imageOffset=C$t.style.imageOffset),C$n.type=cc.Sprite.Type.SLICED,C$n.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.node.addChild(C$i),this._labelSegments.push(C$i);var C$r=C$e.getRect(),C$s=1,C$o=C$r.width,C$r=C$r.height,C$a=C$t.style.imageWidth,C$c=C$t.style.imageHeight;C$o*=C$s=0<C$c?C$c/C$r:this.lineHeight/C$r,C$r*=C$s,0<C$a&&(C$o=C$a),0<this.maxWidth?(this._lineOffsetX+C$o>this.maxWidth&&this._updateLineInfo(),this._lineOffsetX+=C$o):(this._lineOffsetX+=C$o,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),C$n.spriteFrame=C$e,C$i.setContentSize(C$o,C$r),C$i._lineCount=this._lineCount,C$t.style.event?(C$t.style.event.click&&(C$i._clickHandler=C$t.style.event.click),C$t.style.event.param?C$i._clickParam=C$t.style.event.param:C$i._clickParam=""):C$i._clickHandler=null}else cc.warnID(4400)},_updateRichText:function(){if(this.enabledInHierarchy){var C$t=C$h.parse(this.string);if(!this._needsUpdateTextLayout(C$t))return this._textArray=C$t,void this._updateLabelSegmentTextAttributes();this._textArray=C$t,this._resetState();for(var C$e=!1,C$i=0;C$i<this._textArray.length;++C$i){var C$n=this._textArray[C$i],C$r=C$n.text;if(""===C$r){if(C$n.style&&C$n.style.newline){this._updateLineInfo();continue}if(C$n.style&&C$n.style.isImage&&this.imageAtlas){this._addRichTextImageElement(C$n);continue}}for(var C$s=C$r.split("\n"),C$o=0;C$o<C$s.length;++C$o){var C$a,C$c=C$s[C$o];""!==C$c?(C$e=!1,0<this.maxWidth?(C$a=this._measureText(C$i,C$c),this._updateRichTextWithMaxWidth(C$c,C$a,C$i)):(C$a=this._addLabelSegment(C$c,C$i).getContentSize(),this._lineOffsetX+=C$a.width,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),1<C$s.length&&C$o<C$s.length-1&&this._updateLineInfo()):this._isLastComponentCR(C$r)&&C$o===C$s.length-1||(this._updateLineInfo(),C$e=!0)}}C$e||this._linesWidth.push(this._lineOffsetX),0<this.maxWidth&&(this._labelWidth=this.maxWidth),this._labelHeight=(this._lineCount+C$u.BASELINE_RATIO)*this.lineHeight,this.node.setContentSize(this._labelWidth,this._labelHeight),this._updateRichTextPosition(),this._layoutDirty=!1}},_getFirstWordLen:function(C$t,C$e,C$i){var C$n=C$t.charAt(C$e);if(C$u.isUnicodeCJK(C$n)||C$u.isUnicodeSpace(C$n))return 1;for(var C$r=1,C$s=C$e+1;C$s<C$i&&(C$n=C$t.charAt(C$s),!C$u.isUnicodeSpace(C$n)&&!C$u.isUnicodeCJK(C$n));++C$s)C$r++;return C$r},_updateRichTextPosition:function(){for(var C$t=0,C$e=1,C$h=this._lineCount,C$i=0;C$i<this._labelSegments.length;++C$i){var C$n=this._labelSegments[C$i],C$r=C$n._lineCount,C$s=(C$e<C$r&&(C$t=0,C$e=C$r),0);switch(this.horizontalAlign){case C$_.LEFT:C$s=-this._labelWidth/2;break;case C$_.CENTER:C$s=-this._linesWidth[C$r-1]/2;break;case C$_.RIGHT:C$s=this._labelWidth/2-this._linesWidth[C$r-1]}C$n.x=C$t+C$s;var C$o=C$n.getContentSize();if(C$n.y=this.lineHeight*(C$h-C$r)-this._labelHeight/2,C$r===C$e&&(C$t+=C$o.width),C$n.getComponent(cc.Sprite)){var C$a,C$c=this.lineHeight,C$l=this.lineHeight*(1+C$u.BASELINE_RATIO);switch(C$n.anchorY){case 1:C$n.y+=C$c+(C$l-C$c)/2;break;case.5:C$n.y+=C$l/2;break;default:C$n.y+=(C$l-C$c)/2}C$n._imageOffset&&(1===(C$o=C$n._imageOffset.split(",")).length&&C$o[0]?(C$a=parseFloat(C$o[0]),Number.isInteger(C$a)&&(C$n.y+=C$a)):2===C$o.length&&(C$a=parseFloat(C$o[0]),C$o=parseFloat(C$o[1]),Number.isInteger(C$a)&&(C$n.x+=C$a),Number.isInteger(C$o)&&(C$n.y+=C$o)))}C$o=C$n.getComponent(cc.LabelOutline);C$o&&C$o.width&&(C$n.y=C$n.y-C$o.width)}},_convertLiteralColorValue:function(C$t){var C$e=C$t.toUpperCase();return cc.Color[C$e]||cc.color().fromHEX(C$t)},_applyTextAttribute:function(C$t,C$e,C$i){var C$n,C$r,C$s=C$t.getComponent(cc.Label);C$s&&(C$r=C$t._styleIndex,C$n=null,(C$n=this._textArray[C$r]?this._textArray[C$r].style:C$n)&&C$n.color?C$t.color=this._convertLiteralColorValue(C$n.color):C$t.color=this.node.color,C$s.cacheMode=this.cacheMode,this.font instanceof cc.Font&&!this._isSystemFontUsed?C$s.font=this.font:C$s.fontFamily=this.fontFamily,C$s.useSystemFont=this._isSystemFontUsed,C$s.lineHeight=this.lineHeight,C$s.enableBold=C$n&&C$n.bold,C$s.enableItalics=C$n&&C$n.italic,C$n&&C$n.italic&&(C$t.skewX=12),C$s.enableUnderline=C$n&&C$n.underline,C$n&&C$n.outline&&((C$r=(C$r=C$t.getComponent(cc.LabelOutline))||C$t.addComponent(cc.LabelOutline)).color=this._convertLiteralColorValue(C$n.outline.color),C$r.width=C$n.outline.width),C$n&&C$n.size?C$s.fontSize=C$n.size:C$s.fontSize=this.fontSize,null!==C$e&&(C$s.string=C$e="string"!=typeof C$e?""+C$e:C$e),C$i&&C$s._forceUpdateRenderData(),C$n&&C$n.event?(C$n.event.click&&(C$t._clickHandler=C$n.event.click),C$n.event.param?C$t._clickParam=C$n.event.param:C$t._clickParam=""):C$t._clickHandler=null)},onDestroy:function(){for(var C$t=0;C$t<this._labelSegments.length;++C$t)this._labelSegments[C$t].removeFromParent(),C$o.put(this._labelSegments[C$t])}}));cc.RichText=C$e.exports=C$n},{"../platform/CCMacro":194,"../platform/js":209,"../utils/html-text-parser":261,"../utils/text-utils":271}],91:[function(C$t,C$e,C$i){"use strict";var C$o=C$t("../utils/misc"),C$h=(C$t("./CCComponent"),cc.Enum({HORIZONTAL:0,VERTICAL:1})),C$t=cc.Class({name:"cc.Scrollbar",extends:C$t("./CCComponent"),editor:!1,properties:{_scrollView:null,_touching:!1,_autoHideRemainingTime:{default:0,serializable:!1},_opacity:255,handle:{default:null,type:cc.Sprite,tooltip:!1,notify:function(){this._onScroll(cc.v2(0,0))},animatable:!1},direction:{default:C$h.HORIZONTAL,type:C$h,tooltip:!1,notify:function(){this._onScroll(cc.v2(0,0))},animatable:!1},enableAutoHide:{default:!0,animatable:!1,tooltip:!1},autoHideTime:{default:1,animatable:!1,tooltip:!1}},statics:{Direction:C$h},setTargetScrollView:function(C$t){this._scrollView=C$t},_convertToScrollViewSpace:function(C$t){var C$e=this._scrollView.node,C$t=C$t.convertToWorldSpaceAR(cc.v2(-C$t.anchorX*C$t.width,-C$t.anchorY*C$t.height)),C$t=C$e.convertToNodeSpaceAR(C$t);return C$t.x+=C$e.anchorX*C$e.width,C$t.y+=C$e.anchorY*C$e.height,C$t},_setOpacity:function(C$t){this.handle&&(this.node.opacity=C$t,this.handle.node.opacity=C$t)},_onScroll:function(C$t){var C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l;!this._scrollView||(C$e=this._scrollView.content)&&(C$c=C$e.getContentSize(),C$l=this._scrollView.node.getContentSize(),C$i=this.node.getContentSize(),this._conditionalDisableScrollBar(C$c,C$l)||(this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)),C$a=C$o=C$s=C$r=C$n=0,this.direction===C$h.HORIZONTAL?(C$n=C$c.width,C$r=C$l.width,C$a=C$i.width,C$s=C$t.x,C$o=-this._convertToScrollViewSpace(C$e).x):this.direction===C$h.VERTICAL&&(C$n=C$c.height,C$r=C$l.height,C$a=C$i.height,C$s=C$t.y,C$o=-this._convertToScrollViewSpace(C$e).y),C$c=this._calculateLength(C$n,C$r,C$a,C$s),C$l=this._calculatePosition(C$n,C$r,C$a,C$o,C$s,C$c),this._updateLength(C$c),this._updateHanlderPosition(C$l)))},_updateHanlderPosition:function(C$t){var C$e;this.handle&&(C$e=this._fixupHandlerPosition(),this.handle.node.setPosition(C$t.x+C$e.x,C$t.y+C$e.y))},_fixupHandlerPosition:function(){var C$t=this.node.getContentSize(),C$e=this.node.getAnchorPoint(),C$i=this.handle.node.getContentSize(),C$n=this.handle.node.parent,C$e=this.node.convertToWorldSpaceAR(cc.v2(-C$t.width*C$e.x,-C$t.height*C$e.y)),C$n=C$n.convertToNodeSpaceAR(C$e);return this.direction===C$h.HORIZONTAL?C$n=cc.v2(C$n.x,C$n.y+(C$t.height-C$i.height)/2):this.direction===C$h.VERTICAL&&(C$n=cc.v2(C$n.x+(C$t.width-C$i.width)/2,C$n.y)),this.handle.node.setPosition(C$n),C$n},_onTouchBegan:function(){this.enableAutoHide&&(this._touching=!0)},_conditionalDisableScrollBar:function(C$t,C$e){return C$t.width<=C$e.width&&this.direction===C$h.HORIZONTAL||C$t.height<=C$e.height&&this.direction===C$h.VERTICAL},_onTouchEnded:function(){if(this.enableAutoHide&&(this._touching=!1,!(this.autoHideTime<=0))){if(this._scrollView){var C$t=this._scrollView.content;if(C$t){var C$t=C$t.getContentSize(),C$e=this._scrollView.node.getContentSize();if(this._conditionalDisableScrollBar(C$t,C$e))return}}this._autoHideRemainingTime=this.autoHideTime}},_calculateLength:function(C$t,C$e,C$i,C$n){return C$n&&(C$t+=20*(0<C$n?C$n:-C$n)),C$i*(C$e/C$t)},_calculatePosition:function(C$t,C$e,C$i,C$n,C$r,C$s){C$t-=C$e,C$r&&(C$t+=Math.abs(C$r)),C$e=0,C$r=(C$i-C$s)*(C$e=C$t?C$o.clamp01(C$e=C$n/C$t):C$e);return this.direction===C$h.VERTICAL?cc.v2(0,C$r):cc.v2(C$r,0)},_updateLength:function(C$t){var C$e,C$i;this.handle&&(C$i=(C$e=this.handle.node).getContentSize(),C$e.setAnchorPoint(cc.v2(0,0)),this.direction===C$h.HORIZONTAL?C$e.setContentSize(C$t,C$i.height):C$e.setContentSize(C$i.width,C$t))},_processAutoHide:function(C$t){!this.enableAutoHide||this._autoHideRemainingTime<=0||this._touching||(this._autoHideRemainingTime-=C$t,this._autoHideRemainingTime<=this.autoHideTime&&(this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime),C$t=this._opacity*(this._autoHideRemainingTime/this.autoHideTime),this._setOpacity(C$t)))},start:function(){this.enableAutoHide&&this._setOpacity(0)},hide:function(){this._autoHideRemainingTime=0,this._setOpacity(0)},show:function(){this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},update:function(C$t){this._processAutoHide(C$t)}});cc.Scrollbar=C$e.exports=C$t},{"../utils/misc":264,"./CCComponent":78}],92:[function(C$t,C$e,C$i){"use strict";function C$n(){return(new Date).getMilliseconds()}var C$r=C$t("../CCNode").EventType,C$s=cc.v2(),C$o=cc.v2(),C$a=cc.Enum({SCROLL_TO_TOP:0,SCROLL_TO_BOTTOM:1,SCROLL_TO_LEFT:2,SCROLL_TO_RIGHT:3,SCROLLING:4,BOUNCE_TOP:5,BOUNCE_BOTTOM:6,BOUNCE_LEFT:7,BOUNCE_RIGHT:8,SCROLL_ENDED:9,TOUCH_UP:10,AUTOSCROLL_ENDED_WITH_THRESHOLD:11,SCROLL_BEGAN:12}),C$c={"scroll-to-top":C$a.SCROLL_TO_TOP,"scroll-to-bottom":C$a.SCROLL_TO_BOTTOM,"scroll-to-left":C$a.SCROLL_TO_LEFT,"scroll-to-right":C$a.SCROLL_TO_RIGHT,scrolling:C$a.SCROLLING,"bounce-bottom":C$a.BOUNCE_BOTTOM,"bounce-left":C$a.BOUNCE_LEFT,"bounce-right":C$a.BOUNCE_RIGHT,"bounce-top":C$a.BOUNCE_TOP,"scroll-ended":C$a.SCROLL_ENDED,"touch-up":C$a.TOUCH_UP,"scroll-ended-with-threshold":C$a.AUTOSCROLL_ENDED_WITH_THRESHOLD,"scroll-began":C$a.SCROLL_BEGAN},C$t=cc.Class({name:"cc.ScrollView",extends:C$t("./CCViewGroup"),editor:!1,ctor:function(){this._topBoundary=0,this._bottomBoundary=0,this._leftBoundary=0,this._rightBoundary=0,this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[],this._touchMovePreviousTimestamp=0,this._touchMoved=!1,this._autoScrolling=!1,this._autoScrollAttenuate=!1,this._autoScrollStartPosition=cc.v2(0,0),this._autoScrollTargetDelta=cc.v2(0,0),this._autoScrollTotalTime=0,this._autoScrollAccumulatedTime=0,this._autoScrollCurrentlyOutOfBoundary=!1,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.v2(0,0),this._outOfBoundaryAmount=cc.v2(0,0),this._outOfBoundaryAmountDirty=!0,this._stopMouseWheel=!1,this._mouseWheelEventElapsedTime=0,this._isScrollEndedWithThresholdEventFired=!1,this._scrollEventEmitMask=0,this._isBouncing=!1,this._scrolling=!1},properties:{content:{default:void 0,type:cc.Node,tooltip:!1,formerlySerializedAs:"content",notify:function(C$t){this._calculateBoundary()}},horizontal:{default:!0,animatable:!1,tooltip:!1},vertical:{default:!0,animatable:!1,tooltip:!1},inertia:{default:!0,tooltip:!1},brake:{default:.5,type:cc.Float,range:[0,1,.1],tooltip:!1},elastic:{default:!0,animatable:!1,tooltip:!1},bounceDuration:{default:1,range:[0,10],tooltip:!1},horizontalScrollBar:{default:void 0,type:cc.Scrollbar,tooltip:!1,notify:function(){this.horizontalScrollBar&&(this.horizontalScrollBar.setTargetScrollView(this),this._updateScrollBar(0))},animatable:!1},verticalScrollBar:{default:void 0,type:cc.Scrollbar,tooltip:!1,notify:function(){this.verticalScrollBar&&(this.verticalScrollBar.setTargetScrollView(this),this._updateScrollBar(0))},animatable:!1},scrollEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1},cancelInnerEvents:{default:!0,animatable:!1,tooltip:!1},_view:{get:function(){if(this.content)return this.content.parent}}},statics:{EventType:C$a},scrollToBottom:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!1,applyToVertical:!0});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i,!0)},scrollToTop:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(0,1),applyToHorizontal:!1,applyToVertical:!0});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i)},scrollToLeft:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!0,applyToVertical:!1});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i)},scrollToRight:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(1,0),applyToHorizontal:!0,applyToVertical:!1});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i)},scrollToTopLeft:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(0,1),applyToHorizontal:!0,applyToVertical:!0});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i)},scrollToTopRight:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(1,1),applyToHorizontal:!0,applyToVertical:!0});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i)},scrollToBottomLeft:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!0,applyToVertical:!0});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i)},scrollToBottomRight:function(C$t,C$e){var C$i=this._calculateMovePercentDelta({anchor:cc.v2(1,0),applyToHorizontal:!0,applyToVertical:!0});C$t?this._startAutoScroll(C$i,C$t,!1!==C$e):this._moveContent(C$i)},scrollToOffset:function(C$t,C$e,C$i){var C$n=this.getMaxScrollOffset(),C$r=cc.v2(0,0);0===C$n.x?C$r.x=0:C$r.x=C$t.x/C$n.x,0===C$n.y?C$r.y=1:C$r.y=(C$n.y-C$t.y)/C$n.y,this.scrollTo(C$r,C$e,C$i)},getScrollOffset:function(){var C$t=this._getContentTopBoundary()-this._topBoundary,C$e=this._getContentLeftBoundary()-this._leftBoundary;return cc.v2(C$e,C$t)},getMaxScrollOffset:function(){var C$t=this._view.getContentSize(),C$e=this.content.getContentSize(),C$i=0<=(C$i=C$e.width-C$t.width)?C$i:0,C$e=0<=(C$e=C$e.height-C$t.height)?C$e:0;return cc.v2(C$i,C$e)},scrollToPercentHorizontal:function(C$t,C$e,C$i){C$t=this._calculateMovePercentDelta({anchor:cc.v2(C$t,0),applyToHorizontal:!0,applyToVertical:!1});C$e?this._startAutoScroll(C$t,C$e,!1!==C$i):this._moveContent(C$t)},scrollTo:function(C$t,C$e,C$i){C$t=this._calculateMovePercentDelta({anchor:cc.v2(C$t),applyToHorizontal:!0,applyToVertical:!0});C$e?this._startAutoScroll(C$t,C$e,!1!==C$i):this._moveContent(C$t)},scrollToPercentVertical:function(C$t,C$e,C$i){C$t=this._calculateMovePercentDelta({anchor:cc.v2(0,C$t),applyToHorizontal:!1,applyToVertical:!0});C$e?this._startAutoScroll(C$t,C$e,!1!==C$i):this._moveContent(C$t)},stopAutoScroll:function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime},setContentPosition:function(C$t){C$t.fuzzyEquals(this.getContentPosition(),1e-4)||(this.content.setPosition(C$t),this._outOfBoundaryAmountDirty=!0)},getContentPosition:function(){return this.content.getPosition()},isScrolling:function(){return this._scrolling},isAutoScrolling:function(){return this._autoScrolling},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},_onMouseWheel:function(C$t,C$e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$t,C$e)||(C$e=cc.v2(0,0),this.vertical?C$e=cc.v2(0,-.1*C$t.getScrollY()):this.horizontal&&(C$e=cc.v2(-.1*C$t.getScrollY(),0)),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(C$e),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(C$t)))},_checkMouseWheel:function(C$t){if(!this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent("scroll-ended"),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=C$t,.1<this._mouseWheelEventElapsedTime&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent("scroll-ended"),this._stopMouseWheel=!1)},_calculateMovePercentDelta:function(C$t){var C$e=C$t.anchor,C$i=C$t.applyToHorizontal,C$t=C$t.applyToVertical,C$n=(this._calculateBoundary(),C$e=C$e.clampf(cc.v2(0,0),cc.v2(1,1)),this._view.getContentSize()),C$r=this.content.getContentSize(),C$s=-(this._getContentBottomBoundary()-this._bottomBoundary),C$o=-(this._getContentLeftBoundary()-this._leftBoundary),C$a=cc.v2(0,0),C$c=0;return C$i&&(C$c=C$r.width-C$n.width,C$a.x=C$o-C$c*C$e.x),C$t&&(C$c=C$r.height-C$n.height,C$a.y=C$s-C$c*C$e.y),C$a},_moveContentToTopLeft:function(C$t){var C$e=this.content.getContentSize(),C$i=-(this._getContentBottomBoundary()-this._bottomBoundary),C$n=cc.v2(0,0),C$r=0,C$s=-(this._getContentLeftBoundary()-this._leftBoundary);C$e.height<C$t.height&&(C$r=C$e.height-C$t.height,C$n.y=C$i-C$r),C$e.width<C$t.width&&(C$r=C$e.width-C$t.width,C$n.x=C$s),this._updateScrollBarState(),this._moveContent(C$n),this._adjustContentOutOfBoundary()},_calculateBoundary:function(){var C$t,C$e,C$i;this.content&&((C$t=this.content.getComponent(cc.Layout))&&C$t.enabledInHierarchy&&C$t.updateLayout(),C$e=(C$t=this._view.getContentSize()).width*this._view.anchorX,C$i=C$t.height*this._view.anchorY,this._leftBoundary=-C$e,this._bottomBoundary=-C$i,this._rightBoundary=this._leftBoundary+C$t.width,this._topBoundary=this._bottomBoundary+C$t.height,this._moveContentToTopLeft(C$t))},_hasNestedViewGroup:function(C$t,C$e){if(C$t.eventPhase===cc.Event.CAPTURING_PHASE){if(C$e)for(var C$i=0;C$i<C$e.length;++C$i){var C$n=C$e[C$i];if(this.node===C$n)return!!C$t.target.getComponent(cc.ViewGroup);if(C$n.getComponent(cc.ViewGroup))return!0}return!1}},_stopPropagationIfTargetIsMe:function(C$t){C$t.eventPhase===cc.Event.AT_TARGET&&C$t.target===this.node&&C$t.stopPropagation()},_onTouchBegan:function(C$t,C$e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$t,C$e)||(C$e=C$t.touch,this.content&&this._handlePressLogic(C$e),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(C$t)))},_onTouchMoved:function(C$t,C$e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$t,C$e)||(C$e=C$t.touch,this.content&&this._handleMoveLogic(C$e),this.cancelInnerEvents&&(7<C$e.getLocation().sub(C$e.getStartLocation()).mag()&&!this._touchMoved&&C$t.target!==this.node&&((C$e=new cc.Event.EventTouch(C$t.getTouches(),C$t.bubbles)).type=cc.Node.EventType.TOUCH_CANCEL,C$e.touch=C$t.touch,C$e.simulate=!0,C$t.target.dispatchEvent(C$e),this._touchMoved=!0),this._stopPropagationIfTargetIsMe(C$t))))},_onTouchEnded:function(C$t,C$e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$t,C$e)||(this._dispatchEvent("touch-up"),C$e=C$t.touch,this.content&&this._handleReleaseLogic(C$e),this._touchMoved?C$t.stopPropagation():this._stopPropagationIfTargetIsMe(C$t)))},_onTouchCancelled:function(C$t,C$e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$t,C$e)||(C$t.simulate||(C$e=C$t.touch,this.content&&this._handleReleaseLogic(C$e)),this._stopPropagationIfTargetIsMe(C$t)))},_processDeltaMove:function(C$t){this._scrollChildren(C$t),this._gatherTouchMove(C$t)},_getLocalAxisAlignDelta:function(C$t){return this.node.convertToNodeSpaceAR(C$t.getLocation(),C$s),this.node.convertToNodeSpaceAR(C$t.getPreviousLocation(),C$o),C$s.sub(C$o)},_handleMoveLogic:function(C$t){C$t=this._getLocalAxisAlignDelta(C$t);this._processDeltaMove(C$t)},_scrollChildren:function(C$t){var C$t=C$t=this._clampDelta(C$t),C$e=(this.elastic&&(C$e=this._getHowMuchOutOfBoundary(),C$t.x*=0===C$e.x?1:.5,C$t.y*=0===C$e.y?1:.5),this.elastic||(C$e=this._getHowMuchOutOfBoundary(C$t),C$t=C$t.add(C$e)),-1);0<C$t.y?this.content.y-this.content.anchorY*this.content.height+C$t.y>=this._bottomBoundary&&(C$e="scroll-to-bottom"):C$t.y<0&&this.content.y-this.content.anchorY*this.content.height+this.content.height+C$t.y<=this._topBoundary&&(C$e="scroll-to-top"),C$t.x<0?this.content.x-this.content.anchorX*this.content.width+this.content.width+C$t.x<=this._rightBoundary&&(C$e="scroll-to-right"):0<C$t.x&&this.content.x-this.content.anchorX*this.content.width+C$t.x>=this._leftBoundary&&(C$e="scroll-to-left"),this._moveContent(C$t,!1),0===C$t.x&&0===C$t.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent("scroll-began")),this._dispatchEvent("scrolling")),-1!==C$e&&this._dispatchEvent(C$e)},_handlePressLogic:function(){this._autoScrolling&&this._dispatchEvent("scroll-ended"),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=C$n(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()},_clampDelta:function(C$t){var C$e=this.content.getContentSize(),C$i=this._view.getContentSize();return C$e.width<C$i.width&&(C$t.x=0),C$e.height<C$i.height&&(C$t.y=0),C$t},_gatherTouchMove:function(C$t){for(C$t=this._clampDelta(C$t);5<=this._touchMoveDisplacements.length;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(C$t);C$t=C$n();this._touchMoveTimeDeltas.push((C$t-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=C$t},_startBounceBackIfNeeded:function(){if(!this.elastic)return!1;var C$t=this._getHowMuchOutOfBoundary();if((C$t=this._clampDelta(C$t)).fuzzyEquals(cc.v2(0,0),1e-4))return!1;var C$e=Math.max(this.bounceDuration,0);return this._startAutoScroll(C$t,C$e,!0),this._isBouncing||(0<C$t.y&&this._dispatchEvent("bounce-top"),C$t.y<0&&this._dispatchEvent("bounce-bottom"),0<C$t.x&&this._dispatchEvent("bounce-right"),C$t.x<0&&this._dispatchEvent("bounce-left"),this._isBouncing=!0),!0},_processInertiaScroll:function(){var C$t;this._startBounceBackIfNeeded()||!this.inertia||!(C$t=this._calculateTouchMoveVelocity()).fuzzyEquals(cc.v2(0,0),1e-4)&&this.brake<1&&this._startInertiaScroll(C$t),this._onScrollBarTouchEnded()},_handleReleaseLogic:function(C$t){C$t=this._getLocalAxisAlignDelta(C$t);this._gatherTouchMove(C$t),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent("scroll-ended"))},_isOutOfBoundary:function(){return!this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)},_isNecessaryAutoScrollBrake:function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},getScrollEndedEventTiming:function(){return 1e-4},_processAutoScrolling:function(C$t){var C$e=this._isNecessaryAutoScrollBrake(),C$i=C$e?.05:1,C$t=(this._autoScrollAccumulatedTime+=C$t*(1/C$i),Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime)),C$n=(this._autoScrollAttenuate&&(C$n=C$t,C$t=--C$n*C$n*C$n*C$n*C$n+1),this._autoScrollStartPosition.add(this._autoScrollTargetDelta.mul(C$t))),C$r=Math.abs(C$t-1)<=1e-4,C$t=(Math.abs(C$t-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent("scroll-ended-with-threshold"),this._isScrollEndedWithThresholdEventFired=!0),this.elastic?(C$t=C$n.sub(this._autoScrollBrakingStartPosition),C$e&&(C$t=C$t.mul(C$i)),C$n=this._autoScrollBrakingStartPosition.add(C$t)):(C$e=C$n.sub(this.getContentPosition()),(C$i=this._getHowMuchOutOfBoundary(C$e)).fuzzyEquals(cc.v2(0,0),1e-4)||(C$n=C$n.add(C$i),C$r=!0)),C$r&&(this._autoScrolling=!1),C$n.sub(this.getContentPosition()));this._moveContent(this._clampDelta(C$t),C$r),this._dispatchEvent("scrolling"),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent("scroll-ended"))},_startInertiaScroll:function(C$t){var C$e=C$t.mul(.7);this._startAttenuatingAutoScroll(C$e,C$t)},_calculateAttenuatedFactor:function(C$t){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*C$t+C$t*C$t*8e-9))},_startAttenuatingAutoScroll:function(C$t,C$e){var C$e=this._calculateAutoScrollTimeByInitalSpeed(C$e.mag()),C$i=C$t.normalize(),C$n=this.content.getContentSize(),C$r=this._view.getContentSize(),C$s=C$n.width-C$r.width,C$n=C$n.height-C$r.height,C$r=this._calculateAttenuatedFactor(C$s),C$o=this._calculateAttenuatedFactor(C$n),C$i=cc.v2(C$i.x*C$s*(1-this.brake)*C$r,C$i.y*C$n*C$o*(1-this.brake)),C$s=C$t.mag(),C$r=C$i.mag()/C$s;C$i=C$i.add(C$t),0<this.brake&&7<C$r&&(C$r=Math.sqrt(C$r),C$i=C$t.mul(C$r).add(C$t)),0<this.brake&&3<C$r&&(C$e*=C$r=3),0===this.brake&&1<C$r&&(C$e*=C$r),this._startAutoScroll(C$i,C$e,!0)},_calculateAutoScrollTimeByInitalSpeed:function(C$t){return Math.sqrt(Math.sqrt(C$t/5))},_startAutoScroll:function(C$t,C$e,C$i){C$t=this._flattenVectorByDirection(C$t);this._autoScrolling=!0,this._autoScrollTargetDelta=C$t,this._autoScrollAttenuate=C$i,this._autoScrollStartPosition=this.getContentPosition(),this._autoScrollTotalTime=C$e,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition=cc.v2(0,0),this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)||(this._autoScrollCurrentlyOutOfBoundary=!0)},_calculateTouchMoveVelocity:function(){var C$t;if((C$t=this._touchMoveTimeDeltas.reduce(function(C$t,C$e){return C$t+C$e},0))<=0||.5<=C$t)return cc.v2(0,0);var C$e=cc.v2(0,0),C$e=this._touchMoveDisplacements.reduce(function(C$t,C$e){return C$t.add(C$e)},C$e);return cc.v2(C$e.x*(1-this.brake)/C$t,C$e.y*(1-this.brake)/C$t)},_flattenVectorByDirection:function(C$t){return C$t.x=this.horizontal?C$t.x:0,C$t.y=this.vertical?C$t.y:0,C$t},_moveContent:function(C$t,C$e){C$t=this._flattenVectorByDirection(C$t),C$t=this.getContentPosition().add(C$t),this.setContentPosition(C$t),C$t=this._getHowMuchOutOfBoundary();this._updateScrollBar(C$t),this.elastic&&C$e&&this._startBounceBackIfNeeded()},_getContentLeftBoundary:function(){return this.getContentPosition().x-this.content.getAnchorPoint().x*this.content.getContentSize().width},_getContentRightBoundary:function(){var C$t=this.content.getContentSize();return this._getContentLeftBoundary()+C$t.width},_getContentTopBoundary:function(){var C$t=this.content.getContentSize();return this._getContentBottomBoundary()+C$t.height},_getContentBottomBoundary:function(){return this.getContentPosition().y-this.content.getAnchorPoint().y*this.content.getContentSize().height},_getHowMuchOutOfBoundary:function(C$t){if((C$t=C$t||cc.v2(0,0)).fuzzyEquals(cc.v2(0,0),1e-4)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var C$e=cc.v2(0,0);return this._getContentLeftBoundary()+C$t.x>this._leftBoundary?C$e.x=this._leftBoundary-(this._getContentLeftBoundary()+C$t.x):this._getContentRightBoundary()+C$t.x<this._rightBoundary&&(C$e.x=this._rightBoundary-(this._getContentRightBoundary()+C$t.x)),this._getContentTopBoundary()+C$t.y<this._topBoundary?C$e.y=this._topBoundary-(this._getContentTopBoundary()+C$t.y):this._getContentBottomBoundary()+C$t.y>this._bottomBoundary&&(C$e.y=this._bottomBoundary-(this._getContentBottomBoundary()+C$t.y)),C$t.fuzzyEquals(cc.v2(0,0),1e-4)&&(this._outOfBoundaryAmount=C$e,this._outOfBoundaryAmountDirty=!1),C$e=this._clampDelta(C$e)},_updateScrollBarState:function(){var C$t,C$e;this.content&&(C$t=this.content.getContentSize(),C$e=this._view.getContentSize(),this.verticalScrollBar&&(C$t.height<C$e.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(C$t.width<C$e.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show()))},_updateScrollBar:function(C$t){this.horizontalScrollBar&&this.horizontalScrollBar._onScroll(C$t),this.verticalScrollBar&&this.verticalScrollBar._onScroll(C$t)},_onScrollBarTouchBegan:function(){this.horizontalScrollBar&&this.horizontalScrollBar._onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar._onTouchBegan()},_onScrollBarTouchEnded:function(){this.horizontalScrollBar&&this.horizontalScrollBar._onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar._onTouchEnded()},_dispatchEvent:function(C$t){if("scroll-ended"===C$t)this._scrollEventEmitMask=0;else if("scroll-to-top"===C$t||"scroll-to-bottom"===C$t||"scroll-to-left"===C$t||"scroll-to-right"===C$t){var C$e=1<<C$c[C$t];if(this._scrollEventEmitMask&C$e)return;this._scrollEventEmitMask|=C$e}cc.Component.EventHandler.emitEvents(this.scrollEvents,this,C$c[C$t]),this.node.emit(C$t,this)},_adjustContentOutOfBoundary:function(){var C$t;this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary()&&(C$t=this._getHowMuchOutOfBoundary(cc.v2(0,0)),C$t=this.getContentPosition().add(C$t),this.content&&(this.content.setPosition(C$t),this._updateScrollBar(0)))},start:function(){this._calculateBoundary(),this.content&&cc.director.once(cc.Director.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)},_hideScrollbar:function(){this.horizontalScrollBar&&this.horizontalScrollBar.hide(),this.verticalScrollBar&&this.verticalScrollBar.hide()},onDisable:function(){this._unregisterEvent(),this.content&&(this.content.off(C$r.SIZE_CHANGED,this._calculateBoundary,this),this.content.off(C$r.SCALE_CHANGED,this._calculateBoundary,this),this._view&&(this._view.off(C$r.POSITION_CHANGED,this._calculateBoundary,this),this._view.off(C$r.SCALE_CHANGED,this._calculateBoundary,this),this._view.off(C$r.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollbar(),this.stopAutoScroll()},onEnable:function(){this._registerEvent(),this.content&&(this.content.on(C$r.SIZE_CHANGED,this._calculateBoundary,this),this.content.on(C$r.SCALE_CHANGED,this._calculateBoundary,this),this._view&&(this._view.on(C$r.POSITION_CHANGED,this._calculateBoundary,this),this._view.on(C$r.SCALE_CHANGED,this._calculateBoundary,this),this._view.on(C$r.SIZE_CHANGED,this._calculateBoundary,this))),this._updateScrollBarState()},update:function(C$t){this._autoScrolling&&this._processAutoScrolling(C$t)}});cc.ScrollView=C$e.exports=C$t},{"../CCNode":30,"./CCViewGroup":99}],93:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../utils/misc"),C$t=C$t("./CCComponent"),C$r=cc.Enum({Horizontal:0,Vertical:1}),C$t=cc.Class({name:"cc.Slider",extends:C$t,editor:!1,ctor:function(){this._offset=cc.v2(),this._touchHandle=!1,this._dragging=!1},properties:{handle:{default:null,type:cc.Button,tooltip:!1,notify:function(){}},direction:{default:C$r.Horizontal,type:C$r,tooltip:!1},progress:{default:.5,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){this._updateHandlePosition()}},slideEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{Direction:C$r},__preload:function(){this._updateHandlePosition()},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.on(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this))},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.off(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this))},_onHandleDragStart:function(C$t){this._dragging=!0,this._touchHandle=!0,this._offset=this.handle.node.convertToNodeSpaceAR(C$t.touch.getLocation()),C$t.stopPropagation()},_onTouchBegan:function(C$t){this.handle&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(C$t.touch),C$t.stopPropagation())},_onTouchMoved:function(C$t){this._dragging&&(this._handleSliderLogic(C$t.touch),C$t.stopPropagation())},_onTouchEnded:function(C$t){this._dragging=!1,this._touchHandle=!1,this._offset=cc.v2(),C$t.stopPropagation()},_onTouchCancelled:function(C$t){this._dragging=!1,C$t.stopPropagation()},_handleSliderLogic:function(C$t){this._updateProgress(C$t),this._emitSlideEvent()},_emitSlideEvent:function(){cc.Component.EventHandler.emitEvents(this.slideEvents,this),this.node.emit("slide",this)},_updateProgress:function(C$t){var C$e;this.handle&&(C$t=(C$e=this.node).convertToNodeSpaceAR(C$t.getLocation()),this.direction===C$r.Horizontal?this.progress=C$n.clamp01((C$t.x-this._offset.x+C$e.anchorX*C$e.width)/C$e.width):this.progress=C$n.clamp01((C$t.y-this._offset.y+C$e.anchorY*C$e.height)/C$e.height))},_updateHandlePosition:function(){var C$t;this.handle&&(C$t=this.direction===C$r.Horizontal?cc.v2(-this.node.width*this.node.anchorX+this.progress*this.node.width,0):cc.v2(0,-this.node.height*this.node.anchorY+this.progress*this.node.height),C$t=this.node.convertToWorldSpaceAR(C$t),this.handle.node.position=this.handle.node.parent.convertToNodeSpaceAR(C$t))}});cc.Slider=C$e.exports=C$t},{"../utils/misc":264,"./CCComponent":78}],94:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../utils/misc"),C$r=(C$t("../CCNode").EventType,C$t("./CCRenderComponent")),C$s=C$t("../utils/blend-func"),C$o=cc.Enum({SIMPLE:0,SLICED:1,TILED:2,FILLED:3,MESH:4}),C$t=cc.Enum({HORIZONTAL:0,VERTICAL:1,RADIAL:2}),C$a=cc.Enum({CUSTOM:0,TRIMMED:1,RAW:2}),C$c=cc.Enum({NORMAL:0,GRAY:1}),C$r=cc.Class({name:"cc.Sprite",extends:C$r,mixins:[C$s],editor:!1,properties:{_spriteFrame:{default:null,type:cc.SpriteFrame},_type:C$o.SIMPLE,_sizeMode:C$a.TRIMMED,_fillType:0,_fillCenter:cc.v2(0,0),_fillStart:0,_fillRange:0,_isTrimmedMode:!0,_atlas:{default:null,type:cc.SpriteAtlas,tooltip:!1,editorOnly:!0,visible:!0,animatable:!1},spriteFrame:{get:function(){return this._spriteFrame},set:function(C$t,C$e){var C$i=this._spriteFrame;C$i!==C$t&&(this._spriteFrame=C$t,this._applySpriteFrame(C$i))},type:cc.SpriteFrame},type:{get:function(){return this._type},set:function(C$t){this._type!==C$t&&(this._type=C$t,this.setVertsDirty(),this._resetAssembler())},type:C$o,animatable:!1,tooltip:!1},fillType:{get:function(){return this._fillType},set:function(C$t){C$t!==this._fillType&&(this._fillType=C$t,this.setVertsDirty(),this._resetAssembler())},type:C$t,tooltip:!1},fillCenter:{get:function(){return this._fillCenter},set:function(C$t){this._fillCenter.x=C$t.x,this._fillCenter.y=C$t.y,this._type===C$o.FILLED&&this.setVertsDirty()},tooltip:!1},fillStart:{get:function(){return this._fillStart},set:function(C$t){this._fillStart=C$n.clampf(C$t,-1,1),this._type===C$o.FILLED&&this.setVertsDirty()},tooltip:!1},fillRange:{get:function(){return this._fillRange},set:function(C$t){this._fillRange=C$n.clampf(C$t,-1,1),this._type===C$o.FILLED&&this.setVertsDirty()},tooltip:!1},trim:{get:function(){return this._isTrimmedMode},set:function(C$t){this._isTrimmedMode!==C$t&&(this._isTrimmedMode=C$t,this._type!==C$o.SIMPLE&&this._type!==C$o.MESH||this.setVertsDirty())},animatable:!1,tooltip:!1},sizeMode:{get:function(){return this._sizeMode},set:function(C$t){(this._sizeMode=C$t)!==C$a.CUSTOM&&this._applySpriteSize()},animatable:!1,type:C$a,tooltip:!1}},statics:{FillType:C$t,Type:C$o,SizeMode:C$a,State:C$c},setVisible:function(C$t){this.enabled=C$t},setState:function(){},getState:function(){},onEnable:function(){this._super(),this._applySpriteFrame(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},_updateMaterial:function(){var C$t=this._spriteFrame&&this._spriteFrame.getTexture(),C$e=this.getMaterial(0);C$e&&C$e.setProperty("texture",C$t),C$s.prototype._updateMaterial.call(this)},_applyAtlas:!1,_validateRender:function(){var C$t=this._spriteFrame;this._materials[0]&&C$t&&C$t.textureLoaded()||this.disableRender()},_applySpriteSize:function(){var C$t;this._spriteFrame&&this.isValid&&(C$a.RAW===this._sizeMode?(C$t=this._spriteFrame._originalSize,this.node.setContentSize(C$t)):C$a.TRIMMED===this._sizeMode&&(C$t=this._spriteFrame._rect,this.node.setContentSize(C$t.width,C$t.height)),this.setVertsDirty())},_applySpriteFrame:function(C$t){var C$e=C$t&&C$t.getTexture(),C$t=(C$e&&!C$e.loaded&&C$t.off("load",this._applySpriteSize,this),this._spriteFrame);C$t?(this._updateMaterial(),C$e===(C$e=C$t.getTexture())&&C$e&&C$e.loaded?this._applySpriteSize():(this.disableRender(),C$t.onTextureLoaded(this._applySpriteSize,this))):this.disableRender()}});cc.Sprite=C$e.exports=C$r},{"../CCNode":30,"../utils/blend-func":257,"../utils/misc":264,"./CCRenderComponent":89}],95:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Enum({NONE:0,CHECKBOX:1,TEXT_ATLAS:2,SLIDER_BAR:3,LIST_VIEW:4,PAGE_VIEW:5}),C$r=cc.Enum({VERTICAL:0,HORIZONTAL:1}),C$s=cc.Enum({TOP:0,CENTER:1,BOTTOM:2}),C$o=cc.Enum({LEFT:0,CENTER:1,RIGHT:2}),C$n=cc.Class({name:"cc.StudioComponent",extends:cc.Component,editor:!1,properties:!1,statics:{ComponentType:C$n,ListDirection:C$r,VerticalAlign:C$s,HorizontalAlign:C$o}}),C$a=C$t("../utils/prefab-helper"),C$r=(C$n.PlaceHolder=cc.Class({name:"cc.StudioComponent.PlaceHolder",extends:cc.Component,properties:{_baseUrl:"",nestedPrefab:cc.Prefab},onLoad:function(){this.nestedPrefab&&this._replaceWithNestedPrefab()},_replaceWithNestedPrefab:function(){var C$t=this.node,C$e=C$t._prefab;C$e.root=C$t,C$e.asset=this.nestedPrefab,C$a.syncWithPrefab(C$t)}}),cc.StudioComponent=C$e.exports=C$n,cc.Class({name:"cc.StudioWidget",extends:cc.Widget,editor:!1,_validateTargetInDEV:function(){}}));cc.StudioWidget=C$e.exports=C$r},{"../utils/prefab-helper":267}],96:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../utils/gray-sprite-state"),C$n=cc.Class({name:"cc.Toggle",extends:C$t("./CCButton"),mixins:[C$n],editor:!1,properties:{_N$isChecked:!0,isChecked:{get:function(){return this._N$isChecked},set:function(C$t){var C$e;C$t!==this._N$isChecked&&((C$e=this.toggleGroup||this._toggleContainer)&&C$e.enabled&&this._N$isChecked&&!C$e.allowSwitchOff||(this._N$isChecked=C$t,this._updateCheckMark(),C$e&&C$e.enabled&&C$e.updateToggles(this),cc.Toggle._triggerEventInScript_isChecked&&this._emitToggleEvents()))},tooltip:!1},toggleGroup:{default:null,tooltip:!1,type:C$t("./CCToggleGroup")},checkMark:{default:null,type:cc.Sprite,tooltip:!1},checkEvents:{default:[],type:cc.Component.EventHandler},_resizeToTarget:{animatable:!1,set:function(C$t){C$t&&this._resizeNodeToTargetNode()}}},statics:{_triggerEventInScript_check:!1,_triggerEventInScript_isChecked:!1},onEnable:function(){this._super(),this._registerToggleEvent(),this.toggleGroup&&this.toggleGroup.enabledInHierarchy&&this.toggleGroup.addToggle(this)},onDisable:function(){this._super(),this._unregisterToggleEvent(),this.toggleGroup&&this.toggleGroup.enabledInHierarchy&&this.toggleGroup.removeToggle(this)},_hideCheckMark:function(){this._N$isChecked=!1,this._updateCheckMark()},toggle:function(C$t){this.isChecked=!this.isChecked,cc.Toggle._triggerEventInScript_isChecked||!cc.Toggle._triggerEventInScript_check&&!C$t||this._emitToggleEvents()},check:function(){this.isChecked=!0,!cc.Toggle._triggerEventInScript_isChecked&&cc.Toggle._triggerEventInScript_check&&this._emitToggleEvents()},uncheck:function(){this.isChecked=!1,!cc.Toggle._triggerEventInScript_isChecked&&cc.Toggle._triggerEventInScript_check&&this._emitToggleEvents()},_updateCheckMark:function(){this.checkMark&&(this.checkMark.node.active=!!this.isChecked)},_updateDisabledState:function(){var C$t;this._super(),this.enableAutoGrayEffect&&this.checkMark&&(C$t=!this.interactable,this._switchGrayMaterial(C$t,this.checkMark))},_registerToggleEvent:function(){this.node.on("click",this.toggle,this)},_unregisterToggleEvent:function(){this.node.off("click",this.toggle,this)},_emitToggleEvents:function(){this.node.emit("toggle",this),this.checkEvents&&cc.Component.EventHandler.emitEvents(this.checkEvents,this)}});cc.Toggle=C$e.exports=C$n,C$t("../platform/js").get(C$n.prototype,"_toggleContainer",function(){var C$t=this.node.parent;return cc.Node.isNode(C$t)?C$t.getComponent(cc.ToggleContainer):null})},{"../platform/js":209,"../utils/gray-sprite-state":260,"./CCButton":76,"./CCToggleGroup":98}],97:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.ToggleContainer",extends:cc.Component,editor:!1,properties:{allowSwitchOff:{tooltip:!1,default:!1},checkEvents:{default:[],type:cc.Component.EventHandler}},updateToggles:function(C$e){this.enabledInHierarchy&&C$e.isChecked&&(this.toggleItems.forEach(function(C$t){C$t!==C$e&&C$t.isChecked&&C$t.enabled&&C$t._hideCheckMark()}),this.checkEvents&&cc.Component.EventHandler.emitEvents(this.checkEvents,C$e))},_allowOnlyOneToggleChecked:function(){var C$e=!1;return this.toggleItems.forEach(function(C$t){C$e?C$t._hideCheckMark():C$t.isChecked&&(C$e=!0)}),C$e},_makeAtLeastOneToggleChecked:function(){var C$t;this._allowOnlyOneToggleChecked()||this.allowSwitchOff||0<(C$t=this.toggleItems).length&&C$t[0].check()},onEnable:function(){this.node.on("child-added",this._allowOnlyOneToggleChecked,this),this.node.on("child-removed",this._makeAtLeastOneToggleChecked,this)},onDisable:function(){this.node.off("child-added",this._allowOnlyOneToggleChecked,this),this.node.off("child-removed",this._makeAtLeastOneToggleChecked,this)},start:function(){this._makeAtLeastOneToggleChecked()}});C$t("../platform/js").get(C$n.prototype,"toggleItems",function(){return this.node.getComponentsInChildren(cc.Toggle)}),cc.ToggleContainer=C$e.exports=C$n},{"../platform/js":209}],98:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.ToggleGroup",extends:cc.Component,ctor:function(){this._toggleItems=[]},editor:!1,properties:{allowSwitchOff:{tooltip:!1,default:!1},toggleItems:{get:function(){return this._toggleItems}}},updateToggles:function(C$e){this.enabledInHierarchy&&this._toggleItems.forEach(function(C$t){C$e.isChecked&&C$t!==C$e&&C$t.isChecked&&C$t.enabled&&C$t._hideCheckMark()})},addToggle:function(C$t){-1===this._toggleItems.indexOf(C$t)&&this._toggleItems.push(C$t),this._allowOnlyOneToggleChecked()},removeToggle:function(C$t){C$t=this._toggleItems.indexOf(C$t);-1<C$t&&this._toggleItems.splice(C$t,1),this._makeAtLeastOneToggleChecked()},_allowOnlyOneToggleChecked:function(){var C$e=!1;return this._toggleItems.forEach(function(C$t){C$e&&C$t.enabled&&C$t._hideCheckMark(),C$t.isChecked&&C$t.enabled&&(C$e=!0)}),C$e},_makeAtLeastOneToggleChecked:function(){this._allowOnlyOneToggleChecked()||this.allowSwitchOff||0<this._toggleItems.length&&(this._toggleItems[0].isChecked=!0)},start:function(){this._makeAtLeastOneToggleChecked()}}),C$t=C$t("../platform/js"),C$r=!1;C$t.get(cc,"ToggleGroup",function(){return C$r||(cc.errorID(1405,"cc.ToggleGroup","cc.ToggleContainer"),C$r=!0),C$n}),C$e.exports=C$n},{"../platform/js":209}],99:[function(C$t,C$e,C$i){"use strict";C$t=cc.Class({name:"cc.ViewGroup",extends:C$t("./CCComponent")});cc.ViewGroup=C$e.exports=C$t},{"./CCComponent":78}],100:[function(C$h,C$u,C$_){"use strict";var C$t=C$h("../base-ui/CCWidgetManager"),C$e=C$t.AlignMode,C$i=C$t._AlignFlags,C$n=C$i.TOP,C$r=C$i.MID,C$s=C$i.BOT,C$o=C$i.LEFT,C$a=C$i.CENTER,C$c=C$i.RIGHT,C$d=C$n|C$s,C$l=C$o|C$c,C$i=cc.Class({name:"cc.Widget",extends:C$h("./CCComponent"),editor:!1,properties:{target:{get:function(){return this._target},set:function(C$t){this._target=C$t},type:cc.Node,tooltip:!1},isAlignTop:{get:function(){return 0<(this._alignFlags&C$n)},set:function(C$t){this._setAlign(C$n,C$t)},animatable:!1,tooltip:!1},isAlignVerticalCenter:{get:function(){return 0<(this._alignFlags&C$r)},set:function(C$t){C$t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=C$r):this._alignFlags&=~C$r},animatable:!1,tooltip:!1},isAlignBottom:{get:function(){return 0<(this._alignFlags&C$s)},set:function(C$t){this._setAlign(C$s,C$t)},animatable:!1,tooltip:!1},isAlignLeft:{get:function(){return 0<(this._alignFlags&C$o)},set:function(C$t){this._setAlign(C$o,C$t)},animatable:!1,tooltip:!1},isAlignHorizontalCenter:{get:function(){return 0<(this._alignFlags&C$a)},set:function(C$t){C$t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=C$a):this._alignFlags&=~C$a},animatable:!1,tooltip:!1},isAlignRight:{get:function(){return 0<(this._alignFlags&C$c)},set:function(C$t){this._setAlign(C$c,C$t)},animatable:!1,tooltip:!1},isStretchWidth:{get:function(){return(this._alignFlags&C$l)==C$l},visible:!1},isStretchHeight:{get:function(){return(this._alignFlags&C$d)==C$d},visible:!1},top:{get:function(){return this._top},set:function(C$t){this._top=C$t},tooltip:!1},bottom:{get:function(){return this._bottom},set:function(C$t){this._bottom=C$t},tooltip:!1},left:{get:function(){return this._left},set:function(C$t){this._left=C$t},tooltip:!1},right:{get:function(){return this._right},set:function(C$t){this._right=C$t},tooltip:!1},horizontalCenter:{get:function(){return this._horizontalCenter},set:function(C$t){this._horizontalCenter=C$t},tooltip:!1},verticalCenter:{get:function(){return this._verticalCenter},set:function(C$t){this._verticalCenter=C$t},tooltip:!1},isAbsoluteHorizontalCenter:{get:function(){return this._isAbsHorizontalCenter},set:function(C$t){this._isAbsHorizontalCenter=C$t},animatable:!1},isAbsoluteVerticalCenter:{get:function(){return this._isAbsVerticalCenter},set:function(C$t){this._isAbsVerticalCenter=C$t},animatable:!1},isAbsoluteTop:{get:function(){return this._isAbsTop},set:function(C$t){this._isAbsTop=C$t},animatable:!1},isAbsoluteBottom:{get:function(){return this._isAbsBottom},set:function(C$t){this._isAbsBottom=C$t},animatable:!1},isAbsoluteLeft:{get:function(){return this._isAbsLeft},set:function(C$t){this._isAbsLeft=C$t},animatable:!1},isAbsoluteRight:{get:function(){return this._isAbsRight},set:function(C$t){this._isAbsRight=C$t},animatable:!1},alignMode:{default:C$e.ON_WINDOW_RESIZE,type:C$e,tooltip:!1},_wasAlignOnce:{default:void 0,formerlySerializedAs:"isAlignOnce"},_target:null,_alignFlags:0,_left:0,_right:0,_top:0,_bottom:0,_verticalCenter:0,_horizontalCenter:0,_isAbsLeft:!0,_isAbsRight:!0,_isAbsTop:!0,_isAbsBottom:!0,_isAbsHorizontalCenter:!0,_isAbsVerticalCenter:!0,_originalWidth:0,_originalHeight:0},statics:{AlignMode:C$e},onLoad:function(){void 0!==this._wasAlignOnce&&(this.alignMode=this._wasAlignOnce?C$e.ONCE:C$e.ALWAYS,this._wasAlignOnce=void 0)},onEnable:function(){C$t.add(this)},onDisable:function(){C$t.remove(this)},_validateTargetInDEV:!1,_setAlign:function(C$t,C$e){var C$i;C$e!==0<(this._alignFlags&C$t)&&(C$i=0<(C$t&C$l),C$e?(this._alignFlags|=C$t,C$i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=this.node.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=this.node.height))):(C$i?this.isStretchWidth&&(this.node.width=this._originalWidth):this.isStretchHeight&&(this.node.height=this._originalHeight),this._alignFlags&=~C$t))},updateAlignment:function(){C$t.updateAlignment(this.node)}});Object.defineProperty(C$i.prototype,"isAlignOnce",{get:function(){return cc.warn("`widget.isAlignOnce` is deprecated, use `widget.alignMode === cc.Widget.AlignMode.ONCE` instead please."),this.alignMode===C$e.ONCE},set:function(C$t){cc.warn("`widget.isAlignOnce` is deprecated, use `widget.alignMode = cc.Widget.AlignMode.*` instead please."),this.alignMode=C$t?C$e.ONCE:C$e.ALWAYS}}),cc.Widget=C$u.exports=C$i},{"../base-ui/CCWidgetManager":62,"./CCComponent":78}],101:[function(C$t,C$e,C$i){"use strict";C$t=C$t("./CCComponent"),C$t=cc.Class({name:"cc.WXSubContextView",extends:C$t,editor:!1,properties:{_fps:60,fps:{get:function(){return this._fps},set:function(C$t){this._fps!==C$t&&(this._fps=C$t,this._updateInterval=1/C$t,this._updateSubContextFrameRate())},tooltip:!1}},ctor:function(){this._sprite=null,this._tex=new cc.Texture2D,this._context=null,this._updatedTime=performance.now(),this._updateInterval=0},onLoad:function(){wx.getOpenDataContext?(this._updateInterval=1e3/this._fps,this._context=wx.getOpenDataContext(),this.reset(),this._tex.setPremultiplyAlpha(!0),this._tex.initWithElement(sharedCanvas),this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite),this._sprite.srcBlendFactor=cc.macro.BlendFactor.ONE),this._sprite.spriteFrame=new cc.SpriteFrame(this._tex)):this.enabled=!1},reset:function(){var C$t;this._context&&(this.updateSubContextViewport(),(C$t=this._context.canvas)&&(C$t.width=this.node.width,C$t.height=this.node.height))},onEnable:function(){this._runSubContextMainLoop(),this._registerNodeEvent(),this._updateSubContextFrameRate(),this.updateSubContextViewport()},onDisable:function(){this._unregisterNodeEvent(),this._stopSubContextMainLoop()},update:function(C$t){if(void 0===C$t)return this._context&&this._context.postMessage({fromEngine:!0,event:"step"}),void this._updateSubContextTexture();performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())},_updateSubContextTexture:function(){this._tex&&this._context&&(this._tex.initWithElement(this._context.canvas),this._sprite._activateMaterial())},updateSubContextViewport:function(){var C$t,C$e,C$i;this._context&&(C$t=this.node.getBoundingBoxToWorld(),C$e=cc.view._scaleX,C$i=cc.view._scaleY,this._context.postMessage({fromEngine:!0,event:"viewport",x:C$t.x*C$e+cc.view._viewportRect.x,y:C$t.y*C$i+cc.view._viewportRect.y,width:C$t.width*C$e,height:C$t.height*C$i}))},_registerNodeEvent:function(){this.node.on("position-changed",this.updateSubContextViewport,this),this.node.on("scale-changed",this.updateSubContextViewport,this),this.node.on("size-changed",this.updateSubContextViewport,this)},_unregisterNodeEvent:function(){this.node.off("position-changed",this.updateSubContextViewport,this),this.node.off("scale-changed",this.updateSubContextViewport,this),this.node.off("size-changed",this.updateSubContextViewport,this)},_runSubContextMainLoop:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!0})},_stopSubContextMainLoop:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!1})},_updateSubContextFrameRate:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"frameRate",value:this._fps})}});cc.WXSubContextView=C$e.exports=C$t},{"./CCComponent":78}],102:[function(C$t,C$e,C$l){"use strict";var C$i=C$t("../../platform/CCMacro"),C$n=C$t("../editbox/EditBoxImplBase"),C$r=C$t("../CCLabel"),C$s=C$t("./types"),C$o=C$s.InputMode,C$a=C$s.InputFlag,C$s=C$s.KeyboardReturnType;var C$c=cc.Class({name:"cc.EditBox",extends:cc.Component,editor:!1,properties:{_useOriginalSize:!0,_string:"",string:{tooltip:!1,get:function(){return this._string},set:function(C$t){C$t=""+C$t,0<=this.maxLength&&C$t.length>=this.maxLength&&(C$t=C$t.slice(0,this.maxLength)),this._string=C$t,this._updateString(C$t)}},textLabel:{tooltip:!1,default:null,type:C$r,notify:function(C$t){this.textLabel&&this.textLabel!==C$t&&(this._updateTextLabel(),this._updateLabels())}},placeholderLabel:{tooltip:!1,default:null,type:C$r,notify:function(C$t){this.placeholderLabel&&this.placeholderLabel!==C$t&&(this._updatePlaceholderLabel(),this._updateLabels())}},background:{tooltip:!1,default:null,type:cc.Sprite,notify:function(C$t){this.background&&this.background!==C$t&&this._updateBackgroundSprite()}},_N$backgroundImage:{default:void 0,type:cc.SpriteFrame},backgroundImage:{get:function(){return this.background?this.background.spriteFrame:null},set:function(C$t){this.background&&(this.background.spriteFrame=C$t)}},returnType:{default:C$s.DEFAULT,tooltip:!1,displayName:"KeyboardReturnType",type:C$s},_N$returnType:{default:void 0,type:cc.Float},inputFlag:{tooltip:!1,default:C$a.DEFAULT,type:C$a,notify:function(){this._updateString(this._string)}},inputMode:{tooltip:!1,default:C$o.ANY,type:C$o,notify:function(C$t){this.inputMode!==C$t&&(this._updateTextLabel(),this._updatePlaceholderLabel())}},fontSize:{get:function(){return this.textLabel?this.textLabel.fontSize:0},set:function(C$t){this.textLabel&&(this.textLabel.fontSize=C$t)}},_N$fontSize:{default:void 0,type:cc.Float},lineHeight:{get:function(){return this.textLabel?this.textLabel.lineHeight:0},set:function(C$t){this.textLabel&&(this.textLabel.lineHeight=C$t)}},_N$lineHeight:{default:void 0,type:cc.Float},fontColor:{get:function(){return this.textLabel?this.textLabel.node.color:cc.Color.BLACK},set:function(C$t){this.textLabel&&(this.textLabel.node.color=C$t,this.textLabel.node.opacity=C$t.a)}},_N$fontColor:void 0,placeholder:{tooltip:!1,get:function(){return this.placeholderLabel?this.placeholderLabel.string:""},set:function(C$t){this.placeholderLabel&&(this.placeholderLabel.string=C$t)}},_N$placeholder:{default:void 0,type:cc.String},placeholderFontSize:{get:function(){return this.placeholderLabel?this.placeholderLabel.fontSize:0},set:function(C$t){this.placeholderLabel&&(this.placeholderLabel.fontSize=C$t)}},_N$placeholderFontSize:{default:void 0,type:cc.Float},placeholderFontColor:{get:function(){return this.placeholderLabel?this.placeholderLabel.node.color:cc.Color.BLACK},set:function(C$t){this.placeholderLabel&&(this.placeholderLabel.node.color=C$t,this.placeholderLabel.node.opacity=C$t.a)}},_N$placeholderFontColor:void 0,maxLength:{tooltip:!1,default:20},_N$maxLength:{default:void 0,type:cc.Float},stayOnTop:{default:!1,notify:function(){cc.warn("editBox.stayOnTop is removed since v2.1.")}},_tabIndex:0,tabIndex:{tooltip:!1,get:function(){return this._tabIndex},set:function(C$t){this._tabIndex!==C$t&&(this._tabIndex=C$t,this._impl&&this._impl.setTabIndex(C$t))}},editingDidBegan:{default:[],type:cc.Component.EventHandler},textChanged:{default:[],type:cc.Component.EventHandler},editingDidEnded:{default:[],type:cc.Component.EventHandler},editingReturn:{default:[],type:cc.Component.EventHandler}},statics:{_ImplClass:C$n,KeyboardReturnType:C$s,InputFlag:C$a,InputMode:C$o},_init:function(){this._upgradeComp(),this._isLabelVisible=!0,this.node.on(cc.Node.EventType.SIZE_CHANGED,this._syncSize,this),(this._impl=new C$c._ImplClass).init(this),this._updateString(this._string),this._syncSize()},_updateBackgroundSprite:function(){var C$t,C$e=this.background;C$e||(C$e=(C$e=(C$t=(C$t=this.node.getChildByName("BACKGROUND_SPRITE"))||new cc.Node("BACKGROUND_SPRITE")).getComponent(cc.Sprite))||C$t.addComponent(cc.Sprite),C$t.parent=this.node,this.background=C$e),C$e.type=cc.Sprite.Type.SLICED,void 0!==this._N$backgroundImage&&(C$e.spriteFrame=this._N$backgroundImage,this._N$backgroundImage=void 0)},_updateTextLabel:function(){var C$t,C$e=this.textLabel;C$e||(C$e=(C$e=(C$t=(C$t=this.node.getChildByName("TEXT_LABEL"))||new cc.Node("TEXT_LABEL")).getComponent(C$r))||C$t.addComponent(C$r),C$t.parent=this.node,this.textLabel=C$e),C$e.node.setAnchorPoint(0,1),C$e.overflow=C$r.Overflow.CLAMP,this.inputMode===C$o.ANY?(C$e.verticalAlign=C$i.VerticalTextAlignment.TOP,C$e.enableWrapText=!0):(C$e.verticalAlign=C$i.VerticalTextAlignment.CENTER,C$e.enableWrapText=!1),C$e.string=this._updateLabelStringStyle(this._string),void 0!==this._N$fontColor&&(C$e.node.color=this._N$fontColor,C$e.node.opacity=this._N$fontColor.a,this._N$fontColor=void 0),void 0!==this._N$fontSize&&(C$e.fontSize=this._N$fontSize,this._N$fontSize=void 0),void 0!==this._N$lineHeight&&(C$e.lineHeight=this._N$lineHeight,this._N$lineHeight=void 0)},_updatePlaceholderLabel:function(){var C$t,C$e=this.placeholderLabel;C$e||(C$e=(C$e=(C$t=(C$t=this.node.getChildByName("PLACEHOLDER_LABEL"))||new cc.Node("PLACEHOLDER_LABEL")).getComponent(C$r))||C$t.addComponent(C$r),C$t.parent=this.node,this.placeholderLabel=C$e),C$e.node.setAnchorPoint(0,1),C$e.overflow=C$r.Overflow.CLAMP,this.inputMode===C$o.ANY?(C$e.verticalAlign=C$i.VerticalTextAlignment.TOP,C$e.enableWrapText=!0):(C$e.verticalAlign=C$i.VerticalTextAlignment.CENTER,C$e.enableWrapText=!1),C$e.string=this.placeholder,void 0!==this._N$placeholderFontColor&&(C$e.node.color=this._N$placeholderFontColor,C$e.node.opacity=this._N$placeholderFontColor.a,this._N$placeholderFontColor=void 0),void 0!==this._N$placeholderFontSize&&(C$e.fontSize=this._N$placeholderFontSize,this._N$placeholderFontSize=void 0)},_upgradeComp:function(){void 0!==this._N$returnType&&(this.returnType=this._N$returnType,this._N$returnType=void 0),void 0!==this._N$maxLength&&(this.maxLength=this._N$maxLength,this._N$maxLength=void 0),void 0!==this._N$backgroundImage&&this._updateBackgroundSprite(),void 0===this._N$fontColor&&void 0===this._N$fontSize&&void 0===this._N$lineHeight||this._updateTextLabel(),void 0===this._N$placeholderFontColor&&void 0===this._N$placeholderFontSize||this._updatePlaceholderLabel(),void 0!==this._N$placeholder&&(this.placeholder=this._N$placeholder,this._N$placeholder=void 0)},_syncSize:function(){var C$t;this._impl&&(C$t=this.node.getContentSize(),this._impl.setSize(C$t.width,C$t.height))},_showLabels:function(){this._isLabelVisible=!0,this._updateLabels()},_hideLabels:function(){this._isLabelVisible=!1,this.textLabel&&(this.textLabel.node.active=!1),this.placeholderLabel&&(this.placeholderLabel.node.active=!1)},_updateLabels:function(){var C$t;this._isLabelVisible&&(C$t=this._string,this.textLabel&&(this.textLabel.node.active=""!==C$t),this.placeholderLabel&&(this.placeholderLabel.node.active=""===C$t))},_updateString:function(C$t){var C$e=this.textLabel;C$e&&(C$t=(C$t=C$t)&&this._updateLabelStringStyle(C$t),C$e.string=C$t,this._updateLabels())},_updateLabelStringStyle:function(C$t,C$e){var C$i=this.inputFlag;if(C$e||C$i!==C$a.PASSWORD)C$i===C$a.INITIAL_CAPS_ALL_CHARACTERS?C$t=C$t.toUpperCase():C$i===C$a.INITIAL_CAPS_WORD?C$t=C$t.replace(/(?:^|\s)\S/g,function(C$t){return C$t.toUpperCase()}):C$i===C$a.INITIAL_CAPS_SENTENCE&&(C$t=(C$e=C$t).charAt(0).toUpperCase()+C$e.slice(1));else{for(var C$n="",C$r=C$t.length,C$s=0;C$s<C$r;++C$s)C$n+="â—";C$t=C$n}return C$t},editBoxEditingDidBegan:function(){cc.Component.EventHandler.emitEvents(this.editingDidBegan,this),this.node.emit("editing-did-began",this)},editBoxEditingDidEnded:function(){cc.Component.EventHandler.emitEvents(this.editingDidEnded,this),this.node.emit("editing-did-ended",this)},editBoxTextChanged:function(C$t){C$t=this._updateLabelStringStyle(C$t,!0),this.string=C$t,cc.Component.EventHandler.emitEvents(this.textChanged,C$t,this),this.node.emit("text-changed",this)},editBoxEditingReturn:function(){cc.Component.EventHandler.emitEvents(this.editingReturn,this),this.node.emit("editing-return",this)},onEnable:function(){this._registerEvent(),this._impl&&this._impl.enable()},onDisable:function(){this._unregisterEvent(),this._impl&&this._impl.disable()},onDestroy:function(){this._impl&&this._impl.clear()},__preload:function(){this._init()},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)},_onTouchBegan:function(C$t){C$t.stopPropagation()},_onTouchCancel:function(C$t){C$t.stopPropagation()},_onTouchEnded:function(C$t){this._impl&&this._impl.beginEditing(),C$t.stopPropagation()},setFocus:function(){cc.errorID(1400,"setFocus()","focus()"),this._impl&&this._impl.setFocus(!0)},focus:function(){this._impl&&this._impl.setFocus(!0)},blur:function(){this._impl&&this._impl.setFocus(!1)},isFocused:function(){return!!this._impl&&this._impl.isFocused()},update:function(){this._impl&&this._impl.update()}});cc.EditBox=C$e.exports=C$c,cc.sys.isBrowser&&C$t("./WebEditBoxImpl")},{"../../platform/CCMacro":194,"../CCLabel":80,"../editbox/EditBoxImplBase":103,"./WebEditBoxImpl":104,"./types":106}],103:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({ctor:function(){this._delegate=null,this._editing=!1},init:function(C$t){},enable:function(){},disable:function(){this._editing&&this.endEditing()},clear:function(){},update:function(){},setTabIndex:function(C$t){},setSize:function(C$t,C$e){},setFocus:function(C$t){C$t?this.beginEditing():this.endEditing()},isFocused:function(){return this._editing},beginEditing:function(){},endEditing:function(){}});C$e.exports=C$n},{}],104:[function(C$t,C$n,C$l){"use strict";var C$_=(C$e=C$t("../../value-types/mat4"))&&C$e.__esModule?C$e:{default:C$e};var C$h=C$t("../../platform/utils"),C$u=C$t("../../platform/CCMacro"),C$e=C$t("./types"),C$a=C$t("../CCLabel"),C$r=C$t("./tabIndexUtil"),C$t=cc.EditBox,C$f=cc.js,C$s=C$e.InputMode,C$o=C$e.InputFlag,C$p=C$e.KeyboardReturnType,C$m={zoomInvalid:!1},C$y=(cc.sys.OS_ANDROID!==cc.sys.os||cc.sys.browserType!==cc.sys.BROWSER_TYPE_SOUGOU&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_360||(C$m.zoomInvalid=!0),0),C$d=cc.v3(),C$c=null,C$i=!1,C$g=!1,C$v=C$t._ImplClass;function C$x(){C$v.call(this),this._domId="EditBoxId_"+ ++C$y,this._placeholderStyleSheet=null,this._elem=null,this._isTextArea=!1,this._worldMat=new C$_.default,this._cameraMat=new C$_.default,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this._cacheViewportRect=cc.rect(0,0,0,0),this._inputMode=null,this._inputFlag=null,this._returnType=null,this._eventListeners={},this._textLabelFont=null,this._textLabelFontSize=null,this._textLabelFontColor=null,this._textLabelAlign=null,this._placeholderLabelFont=null,this._placeholderLabelFontSize=null,this._placeholderLabelFontColor=null,this._placeholderLabelAlign=null,this._placeholderLineHeight=null}C$f.extend(C$x,C$v),C$t._ImplClass=C$x,Object.assign(C$x.prototype,{init:function(C$t){C$t&&((this._delegate=C$t).inputMode===C$s.ANY?this._createTextArea():this._createInput(),C$r.add(this),this.setTabIndex(C$t.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),C$i=cc.view.isAutoFullScreenEnabled(),C$g=cc.view._resizeWithBrowserSize)},clear:function(){this._removeEventListeners(),this._removeDomFromGameContainer(),C$r.remove(this),C$c===this&&(C$c=null)},update:function(){},setTabIndex:function(C$t){this._elem.tabIndex=C$t,C$r.resort()},setSize:function(C$t,C$e){var C$i=this._elem;C$i.style.width=C$t+"px",C$i.style.height=C$e+"px"},beginEditing:function(){C$c&&C$c!==this&&C$c.setFocus(!1),this._editing=!0,(C$c=this)._delegate.editBoxEditingDidBegan(),this._showDom(),this._elem.focus()},endEditing:function(){this._elem&&this._elem.blur()},_createInput:function(){this._isTextArea=!1,this._elem=document.createElement("input")},_createTextArea:function(){this._isTextArea=!0,this._elem=document.createElement("textarea")},_addDomToGameContainer:function(){cc.game.container.appendChild(this._elem),document.head.appendChild(this._placeholderStyleSheet)},_removeDomFromGameContainer:function(){C$h.contains(cc.game.container,this._elem)&&cc.game.container.removeChild(this._elem),C$h.contains(document.head,this._placeholderStyleSheet)&&document.head.removeChild(this._placeholderStyleSheet),delete this._elem,delete this._placeholderStyleSheet},_showDom:function(){this._updateMatrix(),this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._elem.style.display="",this._delegate._hideLabels(),cc.sys.isMobile&&this._showDomOnMobile()},_hideDom:function(){this._elem.style.display="none",this._delegate._showLabels(),cc.sys.isMobile&&this._hideDomOnMobile()},_showDomOnMobile:function(){cc.sys.os===cc.sys.OS_ANDROID&&(C$i&&(cc.view.enableAutoFullScreen(!1),cc.screen.exitFullScreen()),C$g&&cc.view.resizeWithBrowserSize(!1),this._adjustWindowScroll())},_hideDomOnMobile:function(){cc.sys.os===cc.sys.OS_ANDROID&&(C$g&&cc.view.resizeWithBrowserSize(!0),setTimeout(function(){C$c||C$i&&cc.view.enableAutoFullScreen(!0)},800)),this._scrollBackWindow()},_adjustWindowScroll:function(){var C$t=this;setTimeout(function(){window.scrollY<100&&C$t._elem.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})},800)},_scrollBackWindow:function(){setTimeout(function(){var C$t=cc.sys;C$t.browserType!==C$t.BROWSER_TYPE_WECHAT||C$t.os!==C$t.OS_IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)},800)},_updateMatrix:function(){var C$t,C$e,C$i,C$h,C$u,C$n,C$r,C$s,C$o=this._delegate.node,C$a=(C$o.getWorldMatrix(this._worldMat),this._worldMat),C$c=C$a.m,C$l=cc.view;this._m00===C$c[0]&&this._m01===C$c[1]&&this._m04===C$c[4]&&this._m05===C$c[5]&&this._m12===C$c[12]&&this._m13===C$c[13]&&this._w===C$o._contentSize.width&&this._h===C$o._contentSize.height&&this._cacheViewportRect.equals(C$l._viewportRect)||(this._m00=C$c[0],this._m01=C$c[1],this._m04=C$c[4],this._m05=C$c[5],this._m12=C$c[12],this._m13=C$c[13],this._w=C$o._contentSize.width,this._h=C$o._contentSize.height,this._cacheViewportRect.set(C$l._viewportRect),C$c=C$l._scaleX,C$t=C$l._scaleY,C$r=C$l._viewportRect,C$l=C$l._devicePixelRatio,C$d.x=-C$o._anchorPoint.x*this._w,C$d.y=-C$o._anchorPoint.y*this._h,C$_.default.transform(C$a,C$a,C$d),cc.Camera.findCamera(C$o).getWorldToScreenMatrix2D(this._cameraMat),C$e=this._cameraMat,C$_.default.mul(C$e,C$e,C$a),C$c/=C$l,C$t/=C$l,C$a=cc.game.container,C$i=(C$e=C$e.m)[0]*C$c,C$h=C$e[1],C$u=C$e[4],C$n=C$e[5]*C$t,C$s=C$a&&C$a.style.paddingLeft&&parseInt(C$a.style.paddingLeft),C$s+=C$r.x/C$l,C$a=C$a&&C$a.style.paddingBottom&&parseInt(C$a.style.paddingBottom),C$a+=C$r.y/C$l,C$r=C$e[12]*C$c+C$s,C$l=C$e[13]*C$t+C$a,C$m.zoomInvalid&&(this.setSize(C$o.width*C$i,C$o.height*C$n),C$n=C$i=1),(C$c=this._elem).style.transform=C$s="matrix("+C$i+","+-C$h+","+-C$u+","+C$n+","+C$r+","+-C$l+")",C$c.style["-webkit-transform"]=C$s,C$c.style["transform-origin"]="0px 100% 0px",C$c.style["-webkit-transform-origin"]="0px 100% 0px")},_updateInputType:function(){var C$t,C$e=this._delegate,C$i=C$e.inputMode,C$n=C$e.inputFlag,C$e=C$e.returnType,C$r=this._elem;if(this._inputMode!==C$i||this._inputFlag!==C$n||this._returnType!==C$e){if(this._inputMode=C$i,this._inputFlag=C$n,this._returnType=C$e,this._isTextArea)return C$t="none",C$n===C$o.INITIAL_CAPS_ALL_CHARACTERS?C$t="uppercase":C$n===C$o.INITIAL_CAPS_WORD&&(C$t="capitalize"),void(C$r.style.textTransform=C$t);C$n!==C$o.PASSWORD?(C$t=C$r.type,C$i===C$s.EMAIL_ADDR?C$t="email":C$i===C$s.NUMERIC||C$i===C$s.DECIMAL?C$t="number":C$i===C$s.PHONE_NUMBER?(C$t="number",C$r.pattern="[0-9]*"):C$i===C$s.URL?C$t="url":(C$t="text",C$e===C$p.SEARCH&&(C$t="search")),C$r.type=C$t,C$i="none",C$n===C$o.INITIAL_CAPS_ALL_CHARACTERS?C$i="uppercase":C$n===C$o.INITIAL_CAPS_WORD&&(C$i="capitalize"),C$r.style.textTransform=C$i):C$r.type="password"}},_updateMaxLength:function(){var C$t=this._delegate.maxLength;this._elem.maxLength=C$t=C$t<0?65535:C$t},_initStyleSheet:function(){var C$t=this._elem;C$t.style.display="none",C$t.style.border=0,C$t.style.background="transparent",C$t.style.width="100%",C$t.style.height="100%",C$t.style.active=0,C$t.style.outline="medium",C$t.style.padding="0",C$t.style.textTransform="uppercase",C$t.style.position="absolute",C$t.style.bottom="0px",C$t.style.left="2px",C$t.className="cocosEditBox",C$t.id=this._domId,this._isTextArea?(C$t.style.resize="none",C$t.style.overflow_y="scroll"):(C$t.type="text",C$t.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")},_updateStyleSheet:function(){var C$t=this._delegate,C$e=this._elem;C$e.value=C$t.string,C$e.placeholder=C$t.placeholder,this._updateTextLabel(C$t.textLabel),this._updatePlaceholderLabel(C$t.placeholderLabel)},_updateTextLabel:function(C$t){if(C$t){var C$e=!(C$e=C$t.font)||C$e instanceof cc.BitmapFont?C$t.fontFamily:C$e._fontFamily,C$i=C$t.fontSize*C$t.node.scaleY;if(this._textLabelFont!==C$e||this._textLabelFontSize!==C$i||this._textLabelFontColor!==C$t.fontColor||this._textLabelAlign!==C$t.horizontalAlign){this._textLabelFont=C$e,this._textLabelFontSize=C$i,this._textLabelFontColor=C$t.fontColor,this._textLabelAlign=C$t.horizontalAlign;var C$n=this._elem;switch(C$n.style.fontSize=C$i+"px",C$n.style.color=C$t.node.color.toCSS(),C$n.style.fontFamily=C$e,C$t.horizontalAlign){case C$a.HorizontalAlign.LEFT:C$n.style.textAlign="left";break;case C$a.HorizontalAlign.CENTER:C$n.style.textAlign="center";break;case C$a.HorizontalAlign.RIGHT:C$n.style.textAlign="right"}}}},_updatePlaceholderLabel:function(C$t){if(C$t){var C$e=!(C$e=C$t.font)||C$e instanceof cc.BitmapFont?C$t.fontFamily:C$t.font._fontFamily,C$i=C$t.fontSize*C$t.node.scaleY;if(this._placeholderLabelFont!==C$e||this._placeholderLabelFontSize!==C$i||this._placeholderLabelFontColor!==C$t.fontColor||this._placeholderLabelAlign!==C$t.horizontalAlign||this._placeholderLineHeight!==C$t.fontSize){this._placeholderLabelFont=C$e,this._placeholderLabelFontSize=C$i,this._placeholderLabelFontColor=C$t.fontColor,this._placeholderLabelAlign=C$t.horizontalAlign,this._placeholderLineHeight=C$t.fontSize;var C$n,C$r=this._placeholderStyleSheet,C$s=C$t.node.color.toCSS(),C$o=C$t.fontSize;switch(C$t.horizontalAlign){case C$a.HorizontalAlign.LEFT:C$n="left";break;case C$a.HorizontalAlign.CENTER:C$n="center";break;case C$a.HorizontalAlign.RIGHT:C$n="right"}C$r.innerHTML="#"+this._domId+"::-webkit-input-placeholder,#"+this._domId+"::-moz-placeholder,#"+this._domId+":-ms-input-placeholder{text-transform: initial; font-family: "+C$e+"; font-size: "+C$i+"px; color: "+C$s+"; line-height: "+C$o+"px; text-align: "+C$n+";}",cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE&&(C$r.innerHTML+="#"+this._domId+"::-ms-clear{display: none;}")}}},_registerEventListeners:function(){var C$e=this,C$i=this._elem,C$t=!1,C$n=this._eventListeners;C$n.compositionStart=function(){C$t=!0},C$n.compositionEnd=function(){C$t=!1,C$e._delegate.editBoxTextChanged(C$i.value)},C$n.onInput=function(){C$t||C$e._delegate.editBoxTextChanged(C$i.value)},C$n.onClick=function(C$t){C$e._editing&&cc.sys.isMobile&&C$e._adjustWindowScroll()},C$n.onKeydown=function(C$t){C$t.keyCode===C$u.KEY.enter?(C$t.stopPropagation(),C$e._delegate.editBoxEditingReturn(),C$e._isTextArea||C$i.blur()):C$t.keyCode===C$u.KEY.tab&&(C$t.stopPropagation(),C$t.preventDefault(),C$r.next(C$e))},C$n.onBlur=function(){C$e._editing=!1,C$c=null,C$e._hideDom(),C$e._delegate.editBoxEditingDidEnded()},C$n.onResize=function(){C$e._updateMatrix()},C$i.addEventListener("compositionstart",C$n.compositionStart),C$i.addEventListener("compositionend",C$n.compositionEnd),C$i.addEventListener("input",C$n.onInput),C$i.addEventListener("keydown",C$n.onKeydown),C$i.addEventListener("blur",C$n.onBlur),C$i.addEventListener("touchstart",C$n.onClick),window.addEventListener("resize",C$n.onResize),window.addEventListener("orientationchange",C$n.onResize)},_removeEventListeners:function(){var C$t=this._elem,C$e=this._eventListeners;C$t.removeEventListener("compositionstart",C$e.compositionStart),C$t.removeEventListener("compositionend",C$e.compositionEnd),C$t.removeEventListener("input",C$e.onInput),C$t.removeEventListener("keydown",C$e.onKeydown),C$t.removeEventListener("blur",C$e.onBlur),C$t.removeEventListener("touchstart",C$e.onClick),window.removeEventListener("resize",C$e.onResize),window.removeEventListener("orientationchange",C$e.onResize),C$e.compositionStart=null,C$e.compositionEnd=null,C$e.onInput=null,C$e.onKeydown=null,C$e.onBlur=null,C$e.onClick=null,C$e.onResize=null}})},{"../../platform/CCMacro":194,"../../platform/utils":213,"../../value-types/mat4":281,"../CCLabel":80,"./tabIndexUtil":105,"./types":106}],105:[function(C$t,C$e,C$i){"use strict";C$e.exports={_tabIndexList:[],add:function(C$t){var C$e=this._tabIndexList;-1===C$e.indexOf(C$t)&&C$e.push(C$t)},remove:function(C$t){var C$e=this._tabIndexList,C$t=C$e.indexOf(C$t);-1!==C$t&&C$e.splice(C$t,1)},resort:function(){this._tabIndexList.sort(function(C$t,C$e){return C$t._delegate._tabIndex-C$e._delegate._tabIndex})},next:function(C$t){var C$e=this._tabIndexList,C$i=C$e.indexOf(C$t);C$t.setFocus(!1),-1===C$i||(C$t=C$e[C$i+1])&&0<=C$t._delegate._tabIndex&&C$t.setFocus(!0)}}},{}],106:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Enum({DEFAULT:0,DONE:1,SEND:2,SEARCH:3,GO:4,NEXT:5}),C$r=cc.Enum({ANY:0,EMAIL_ADDR:1,NUMERIC:2,PHONE_NUMBER:3,URL:4,DECIMAL:5,SINGLE_LINE:6}),C$s=cc.Enum({PASSWORD:0,SENSITIVE:1,INITIAL_CAPS_WORD:2,INITIAL_CAPS_SENTENCE:3,INITIAL_CAPS_ALL_CHARACTERS:4,DEFAULT:5});C$e.exports={KeyboardReturnType:C$n,InputMode:C$r,InputFlag:C$s}},{}],107:[function(C$t,C$e,C$i){"use strict";C$t("./CCComponent"),C$t("./CCComponentEventHandler"),C$t("./missing-script");var C$n=C$t("./WXSubContextView"),C$r=C$t("./SwanSubContextView"),C$n=C$n||cc.Class({name:"cc.WXSubContextView",extends:cc.Component}),C$r=C$r||cc.Class({name:"cc.SwanSubContextView",extends:cc.Component}),C$t=[C$t("./CCSprite"),C$t("./CCWidget"),C$t("./CCCanvas"),C$t("./CCAudioSource"),C$t("./CCAnimation"),C$t("./CCButton"),C$t("./CCLabel"),C$t("./CCProgressBar"),C$t("./CCMask"),C$t("./CCScrollBar"),C$t("./CCScrollView"),C$t("./CCPageViewIndicator"),C$t("./CCPageView"),C$t("./CCSlider"),C$t("./CCLayout"),C$t("./editbox/CCEditBox"),C$t("./CCLabelOutline"),C$t("./CCLabelShadow"),C$t("./CCRichText"),C$t("./CCToggleContainer"),C$t("./CCToggleGroup"),C$t("./CCToggle"),C$t("./CCBlockInputEvents"),C$t("./CCMotionStreak"),C$n,C$r];C$e.exports=C$t},{"./CCAnimation":73,"./CCAudioSource":74,"./CCBlockInputEvents":75,"./CCButton":76,"./CCCanvas":77,"./CCComponent":78,"./CCComponentEventHandler":79,"./CCLabel":80,"./CCLabelOutline":81,"./CCLabelShadow":82,"./CCLayout":83,"./CCMask":84,"./CCMotionStreak":85,"./CCPageView":86,"./CCPageViewIndicator":87,"./CCProgressBar":88,"./CCRichText":90,"./CCScrollBar":91,"./CCScrollView":92,"./CCSlider":93,"./CCSprite":94,"./CCToggle":96,"./CCToggleContainer":97,"./CCToggleGroup":98,"./CCWidget":100,"./SwanSubContextView":void 0,"./WXSubContextView":101,"./editbox/CCEditBox":102,"./missing-script":108}],108:[function(C$t,C$e,C$i){"use strict";var C$n=cc.js,C$r=C$t("../utils/misc").BUILTIN_CLASSID_RE,C$s=cc.Class({name:"cc.MissingClass",properties:{_$erialized:{default:null,visible:!1,editorOnly:!0}}}),C$o=cc.Class({name:"cc.MissingScript",extends:cc.Component,editor:{inspector:"packages://inspector/inspectors/comps/missing-script.js"},properties:{compiled:{default:!1,serializable:!1},_$erialized:{default:null,visible:!1,editorOnly:!0}},ctor:!1,statics:{safeFindClass:function(C$t,C$e){var C$i=C$n._getClassById(C$t);return C$i||(C$t?(cc.deserialize.reportMissingClass(C$t),C$o.getMissingWrapper(C$t,C$e)):null)},getMissingWrapper:function(C$t,C$e){return C$e.node&&(/^[0-9a-zA-Z+/]{23}$/.test(C$t)||C$r.test(C$t))?C$o:C$s}},onLoad:function(){cc.warnID(4600,this.node.name)}});cc._MissingScript=C$e.exports=C$o},{"../utils/misc":264}],109:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e){cc.Event.call(this,cc.Event.MOUSE,C$e),this._eventType=C$t,this._button=0,this._x=0,this._y=0,this._prevX=0,this._prevY=0,this._scrollX=0,this._scrollY=0}function C$r(C$t,C$e){cc.Event.call(this,cc.Event.TOUCH,C$e),this._eventCode=0,this._touches=C$t||[],this.touch=null,this.currentTouch=null}function C$s(C$t,C$e){cc.Event.call(this,cc.Event.ACCELERATION,C$e),this.acc=C$t}function C$o(C$t,C$e,C$i){cc.Event.call(this,cc.Event.KEYBOARD,C$i),this.keyCode=C$t,this.isPressed=C$e}var C$a=cc.js,C$t=(C$t("../event/event"),C$a.extend(C$n,cc.Event),C$n.prototype);C$t.setScrollData=function(C$t,C$e){this._scrollX=C$t,this._scrollY=C$e},C$t.getScrollX=function(){return this._scrollX},C$t.getScrollY=function(){return this._scrollY},C$t.setLocation=function(C$t,C$e){this._x=C$t,this._y=C$e},C$t.getLocation=function(){return cc.v2(this._x,this._y)},C$t.getLocationInView=function(){return cc.v2(this._x,cc.view._designResolutionSize.height-this._y)},C$t._setPrevCursor=function(C$t,C$e){this._prevX=C$t,this._prevY=C$e},C$t.getPreviousLocation=function(){return cc.v2(this._prevX,this._prevY)},C$t.getDelta=function(){return cc.v2(this._x-this._prevX,this._y-this._prevY)},C$t.getDeltaX=function(){return this._x-this._prevX},C$t.getDeltaY=function(){return this._y-this._prevY},C$t.setButton=function(C$t){this._button=C$t},C$t.getButton=function(){return this._button},C$t.getLocationX=function(){return this._x},C$t.getLocationY=function(){return this._y},C$n.NONE=0,C$n.DOWN=1,C$n.UP=2,C$n.MOVE=3,C$n.SCROLL=4,C$n.BUTTON_LEFT=0,C$n.BUTTON_RIGHT=2,C$n.BUTTON_MIDDLE=1,C$n.BUTTON_4=3,C$n.BUTTON_5=4,C$n.BUTTON_6=5,C$n.BUTTON_7=6,C$n.BUTTON_8=7,C$a.extend(C$r,cc.Event),(C$t=C$r.prototype).getEventCode=function(){return this._eventCode},C$t.getTouches=function(){return this._touches},C$t._setEventCode=function(C$t){this._eventCode=C$t},C$t._setTouches=function(C$t){this._touches=C$t},C$t.setLocation=function(C$t,C$e){this.touch&&this.touch.setTouchInfo(this.touch.getID(),C$t,C$e)},C$t.getLocation=function(){return this.touch?this.touch.getLocation():cc.v2()},C$t.getLocationInView=function(){return this.touch?this.touch.getLocationInView():cc.v2()},C$t.getPreviousLocation=function(){return this.touch?this.touch.getPreviousLocation():cc.v2()},C$t.getStartLocation=function(){return this.touch?this.touch.getStartLocation():cc.v2()},C$t.getID=function(){return this.touch?this.touch.getID():null},C$t.getDelta=function(){return this.touch?this.touch.getDelta():cc.v2()},C$t.getDeltaX=function(){return this.touch?this.touch.getDelta().x:0},C$t.getDeltaY=function(){return this.touch?this.touch.getDelta().y:0},C$t.getLocationX=function(){return this.touch?this.touch.getLocationX():0},C$t.getLocationY=function(){return this.touch?this.touch.getLocationY():0},C$r.MAX_TOUCHES=5,C$r.BEGAN=0,C$r.MOVED=1,C$r.ENDED=2,C$r.CANCELED=3,C$a.extend(C$s,cc.Event);C$a.extend(C$o,cc.Event),cc.Event.EventMouse=C$n,cc.Event.EventTouch=C$r,cc.Event.EventAcceleration=C$s,cc.Event.EventKeyboard=C$o,C$e.exports=cc.Event},{"../event/event":116}],110:[function(C$t,C$e,C$n){"use strict";function C$r(C$t,C$e){this._onCustomEvent=C$e,cc.EventListener.call(this,cc.EventListener.CUSTOM,C$t,this._callback)}function C$s(){cc.EventListener.call(this,cc.EventListener.MOUSE,C$i.MOUSE,this._callback)}function C$o(){cc.EventListener.call(this,cc.EventListener.TOUCH_ONE_BY_ONE,C$i.TOUCH_ONE_BY_ONE,null),this._claimedTouches=[]}function C$a(){cc.EventListener.call(this,cc.EventListener.TOUCH_ALL_AT_ONCE,C$i.TOUCH_ALL_AT_ONCE,null)}function C$c(C$t){this._onAccelerationEvent=C$t,cc.EventListener.call(this,cc.EventListener.ACCELERATION,C$i.ACCELERATION,this._callback)}function C$l(){cc.EventListener.call(this,cc.EventListener.KEYBOARD,C$i.KEYBOARD,this._callback)}var C$t=C$t("../platform/js"),C$i=(cc.EventListener=function(C$t,C$e,C$i){this._onEvent=C$i,this._type=C$t||0,this._listenerID=C$e||"",this._registered=!1,this._fixedPriority=0,this._node=null,this._target=null,this._paused=!0,this._isEnabled=!0},cc.EventListener.prototype={constructor:cc.EventListener,_setPaused:function(C$t){this._paused=C$t},_isPaused:function(){return this._paused},_setRegistered:function(C$t){this._registered=C$t},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_getListenerID:function(){return this._listenerID},_setFixedPriority:function(C$t){this._fixedPriority=C$t},_getFixedPriority:function(){return this._fixedPriority},_setSceneGraphPriority:function(C$t){this._target=C$t,this._node=C$t},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return null!==this._onEvent},clone:function(){return null},setEnabled:function(C$t){this._isEnabled=C$t},isEnabled:function(){return this._isEnabled},retain:function(){},release:function(){}},cc.EventListener.UNKNOWN=0,cc.EventListener.TOUCH_ONE_BY_ONE=1,cc.EventListener.TOUCH_ALL_AT_ONCE=2,cc.EventListener.KEYBOARD=3,cc.EventListener.MOUSE=4,cc.EventListener.ACCELERATION=6,cc.EventListener.CUSTOM=8,cc.EventListener.ListenerID={MOUSE:"__cc_mouse",TOUCH_ONE_BY_ONE:"__cc_touch_one_by_one",TOUCH_ALL_AT_ONCE:"__cc_touch_all_at_once",KEYBOARD:"__cc_keyboard",ACCELERATION:"__cc_acceleration"});C$t.extend(C$r,cc.EventListener),C$t.mixin(C$r.prototype,{_onCustomEvent:null,_callback:function(C$t){null!==this._onCustomEvent&&this._onCustomEvent(C$t)},checkAvailable:function(){return cc.EventListener.prototype.checkAvailable.call(this)&&null!==this._onCustomEvent},clone:function(){return new C$r(this._listenerID,this._onCustomEvent)}}),C$t.extend(C$s,cc.EventListener),C$t.mixin(C$s.prototype,{onMouseDown:null,onMouseUp:null,onMouseMove:null,onMouseScroll:null,_callback:function(C$t){var C$e=cc.Event.EventMouse;switch(C$t._eventType){case C$e.DOWN:this.onMouseDown&&this.onMouseDown(C$t);break;case C$e.UP:this.onMouseUp&&this.onMouseUp(C$t);break;case C$e.MOVE:this.onMouseMove&&this.onMouseMove(C$t);break;case C$e.SCROLL:this.onMouseScroll&&this.onMouseScroll(C$t)}},clone:function(){var C$t=new C$s;return C$t.onMouseDown=this.onMouseDown,C$t.onMouseUp=this.onMouseUp,C$t.onMouseMove=this.onMouseMove,C$t.onMouseScroll=this.onMouseScroll,C$t},checkAvailable:function(){return!0}}),C$t.extend(C$o,cc.EventListener),C$t.mixin(C$o.prototype,{constructor:C$o,_claimedTouches:null,swallowTouches:!1,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,onTouchCancelled:null,setSwallowTouches:function(C$t){this.swallowTouches=C$t},isSwallowTouches:function(){return this.swallowTouches},clone:function(){var C$t=new C$o;return C$t.onTouchBegan=this.onTouchBegan,C$t.onTouchMoved=this.onTouchMoved,C$t.onTouchEnded=this.onTouchEnded,C$t.onTouchCancelled=this.onTouchCancelled,C$t.swallowTouches=this.swallowTouches,C$t},checkAvailable:function(){return!!this.onTouchBegan||(cc.logID(1801),!1)}}),C$t.extend(C$a,cc.EventListener),C$t.mixin(C$a.prototype,{constructor:C$a,onTouchesBegan:null,onTouchesMoved:null,onTouchesEnded:null,onTouchesCancelled:null,clone:function(){var C$t=new C$a;return C$t.onTouchesBegan=this.onTouchesBegan,C$t.onTouchesMoved=this.onTouchesMoved,C$t.onTouchesEnded=this.onTouchesEnded,C$t.onTouchesCancelled=this.onTouchesCancelled,C$t},checkAvailable:function(){return null!==this.onTouchesBegan||null!==this.onTouchesMoved||null!==this.onTouchesEnded||null!==this.onTouchesCancelled||(cc.logID(1802),!1)}}),C$t.extend(C$c,cc.EventListener),C$t.mixin(C$c.prototype,{constructor:C$c,_onAccelerationEvent:null,_callback:function(C$t){this._onAccelerationEvent(C$t.acc,C$t)},checkAvailable:function(){return cc.assertID(this._onAccelerationEvent,1803),!0},clone:function(){return new C$c(this._onAccelerationEvent)}});C$t.extend(C$l,cc.EventListener),C$t.mixin(C$l.prototype,{constructor:C$l,onKeyPressed:null,onKeyReleased:null,_callback:function(C$t){C$t.isPressed?this.onKeyPressed&&this.onKeyPressed(C$t.keyCode,C$t):this.onKeyReleased&&this.onKeyReleased(C$t.keyCode,C$t)},clone:function(){var C$t=new C$l;return C$t.onKeyPressed=this.onKeyPressed,C$t.onKeyReleased=this.onKeyReleased,C$t},checkAvailable:function(){return null!==this.onKeyPressed||null!==this.onKeyReleased||(cc.logID(1800),!1)}}),cc.EventListener.create=function(C$t){cc.assertID(C$t&&C$t.event,1900);var C$e,C$i=C$t.event,C$n=(delete C$t.event,null);for(C$e in C$i===cc.EventListener.TOUCH_ONE_BY_ONE?C$n=new C$o:C$i===cc.EventListener.TOUCH_ALL_AT_ONCE?C$n=new C$a:C$i===cc.EventListener.MOUSE?C$n=new C$s:C$i===cc.EventListener.CUSTOM?(C$n=new C$r(C$t.eventName,C$t.callback),delete C$t.eventName,delete C$t.callback):C$i===cc.EventListener.KEYBOARD?C$n=new C$l:C$i===cc.EventListener.ACCELERATION&&(C$n=new C$c(C$t.callback),delete C$t.callback),C$t)C$n[C$e]=C$t[C$e];return C$n},C$e.exports=cc.EventListener},{"../platform/js":209}],111:[function(C$t,C$e,C$i){"use strict";function C$n(){this._fixedListeners=[],this._sceneGraphListeners=[],this.gt0Index=0}var C$r=C$t("../platform/js"),C$l=(C$t("./CCEventListener"),cc.EventListener.ListenerID),C$h={DIRTY_NONE:0,DIRTY_FIXED_PRIORITY:1,DIRTY_SCENE_GRAPH_PRIORITY:2,DIRTY_ALL:3,_listenersMap:{},_priorityDirtyFlagMap:{},_nodeListenersMap:{},_toAddedListeners:[],_toRemovedListeners:[],_dirtyListeners:{},_inDispatch:0,_isEnabled:!(C$n.prototype={constructor:C$n,size:function(){return this._fixedListeners.length+this._sceneGraphListeners.length},empty:function(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length},push:function(C$t){(0===C$t._getFixedPriority()?this._sceneGraphListeners:this._fixedListeners).push(C$t)},clearSceneGraphListeners:function(){this._sceneGraphListeners.length=0},clearFixedListeners:function(){this._fixedListeners.length=0},clear:function(){this._sceneGraphListeners.length=0,this._fixedListeners.length=0},getFixedPriorityListeners:function(){return this._fixedListeners},getSceneGraphPriorityListeners:function(){return this._sceneGraphListeners}}),_currentTouch:null,_currentTouchListener:null,_internalCustomListenerIDs:[],_setDirtyForNode:function(C$t){var C$e=this._nodeListenersMap[C$t._id];if(void 0!==C$e)for(var C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i]._getListenerID();null==this._dirtyListeners[C$r]&&(this._dirtyListeners[C$r]=!0)}if(0<C$t.childrenCount)for(var C$s=C$t._children,C$o=0,C$a=C$s.length;C$o<C$a;C$o++)this._setDirtyForNode(C$s[C$o])},pauseTarget:function(C$t,C$e){if(C$t instanceof cc._BaseNode){var C$i=this._nodeListenersMap[C$t._id];if(C$i)for(C$r=0,C$s=C$i.length;C$r<C$s;C$r++)C$i[C$r]._setPaused(!0);if(!0===C$e)for(var C$n=C$t._children,C$r=0,C$s=C$n?C$n.length:0;C$r<C$s;C$r++)this.pauseTarget(C$n[C$r],!0)}else cc.warnID(3506)},resumeTarget:function(C$t,C$e){if(C$t instanceof cc._BaseNode){var C$i=this._nodeListenersMap[C$t._id];if(C$i)for(C$r=0,C$s=C$i.length;C$r<C$s;C$r++)C$i[C$r]._setPaused(!1);if(this._setDirtyForNode(C$t),!0===C$e)for(var C$n=C$t._children,C$r=0,C$s=C$n?C$n.length:0;C$r<C$s;C$r++)this.resumeTarget(C$n[C$r],!0)}else cc.warnID(3506)},_addListener:function(C$t){0===this._inDispatch?this._forceAddEventListener(C$t):this._toAddedListeners.push(C$t)},_forceAddEventListener:function(C$t){var C$e=C$t._getListenerID(),C$i=this._listenersMap[C$e];C$i||(C$i=new C$n,this._listenersMap[C$e]=C$i),C$i.push(C$t),0===C$t._getFixedPriority()?(this._setDirty(C$e,this.DIRTY_SCENE_GRAPH_PRIORITY),null===(C$i=C$t._getSceneGraphPriority())&&cc.logID(3507),this._associateNodeAndEventListener(C$i,C$t),C$i.activeInHierarchy&&this.resumeTarget(C$i)):this._setDirty(C$e,this.DIRTY_FIXED_PRIORITY)},_getListeners:function(C$t){return this._listenersMap[C$t]},_updateDirtyFlagForSceneGraph:function(){for(var C$t in this._dirtyListeners)this._setDirty(C$t,this.DIRTY_SCENE_GRAPH_PRIORITY);this._dirtyListeners={}},_removeAllListenersInVector:function(C$t){if(C$t)for(var C$e,C$i=C$t.length-1;0<=C$i;C$i--)(C$e=C$t[C$i])._setRegistered(!1),null!=C$e._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$e._getSceneGraphPriority(),C$e),C$e._setSceneGraphPriority(null)),0===this._inDispatch&&cc.js.array.removeAt(C$t,C$i)},_removeListenersForListenerID:function(C$t){for(var C$e,C$i,C$n,C$r=this._listenersMap[C$t],C$s=(C$r&&(C$e=C$r.getFixedPriorityListeners(),C$i=C$r.getSceneGraphPriorityListeners(),this._removeAllListenersInVector(C$i),this._removeAllListenersInVector(C$e),delete this._priorityDirtyFlagMap[C$t],this._inDispatch||(C$r.clear(),delete this._listenersMap[C$t])),this._toAddedListeners),C$o=C$s.length-1;0<=C$o;C$o--)(C$n=C$s[C$o])&&C$n._getListenerID()===C$t&&cc.js.array.removeAt(C$s,C$o)},_sortEventListeners:function(C$t){var C$e=this.DIRTY_NONE,C$i=this._priorityDirtyFlagMap;(C$e=C$i[C$t]?C$i[C$t]:C$e)!==this.DIRTY_NONE&&(C$i[C$t]=this.DIRTY_NONE,C$e&this.DIRTY_FIXED_PRIORITY&&this._sortListenersOfFixedPriority(C$t),C$e&this.DIRTY_SCENE_GRAPH_PRIORITY&&cc.director.getScene()&&this._sortListenersOfSceneGraphPriority(C$t))},_sortListenersOfSceneGraphPriority:function(C$t){var C$e,C$t=this._getListeners(C$t);!C$t||(C$e=C$t.getSceneGraphPriorityListeners())&&0!==C$e.length&&C$t.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes)},_sortEventListenersOfSceneGraphPriorityDes:function(C$t,C$e){var C$i=C$t._getSceneGraphPriority(),C$n=C$e._getSceneGraphPriority();if(!(C$e&&C$n&&C$n._activeInHierarchy&&null!==C$n._parent))return-1;if(!C$t||!C$i||!C$i._activeInHierarchy||null===C$i._parent)return 1;for(var C$r=C$i,C$s=C$n,C$o=!1;C$r._parent._id!==C$s._parent._id;)C$r=null===C$r._parent._parent?(C$o=!0,C$n):C$r._parent,C$s=null===C$s._parent._parent?(C$o=!0,C$i):C$s._parent;if(C$r._id===C$s._id){if(C$r._id===C$n._id)return-1;if(C$r._id===C$i._id)return 1}return C$o?C$r._localZOrder-C$s._localZOrder:C$s._localZOrder-C$r._localZOrder},_sortListenersOfFixedPriority:function(C$t){C$t=this._listenersMap[C$t];if(C$t){var C$e=C$t.getFixedPriorityListeners();if(C$e&&0!==C$e.length){C$e.sort(this._sortListenersOfFixedPriorityAsc);for(var C$i=0,C$n=C$e.length;C$i<C$n&&!(0<=C$e[C$i]._getFixedPriority());)++C$i;C$t.gt0Index=C$i}}},_sortListenersOfFixedPriorityAsc:function(C$t,C$e){return C$t._getFixedPriority()-C$e._getFixedPriority()},_onUpdateListeners:function(C$t){var C$e,C$i,C$n,C$r=C$t.getFixedPriorityListeners(),C$s=C$t.getSceneGraphPriorityListeners(),C$o=this._toRemovedListeners;if(C$s)for(C$e=C$s.length-1;0<=C$e;C$e--)(C$i=C$s[C$e])._isRegistered()||(cc.js.array.removeAt(C$s,C$e),-1!==(C$n=C$o.indexOf(C$i))&&C$o.splice(C$n,1));if(C$r)for(C$e=C$r.length-1;0<=C$e;C$e--)(C$i=C$r[C$e])._isRegistered()||(cc.js.array.removeAt(C$r,C$e),-1!==(C$n=C$o.indexOf(C$i))&&C$o.splice(C$n,1));C$s&&0===C$s.length&&C$t.clearSceneGraphListeners(),C$r&&0===C$r.length&&C$t.clearFixedListeners()},frameUpdateListeners:function(){var C$t,C$e=this._listenersMap,C$i=this._priorityDirtyFlagMap;for(C$t in C$e)C$e[C$t].empty()&&(delete C$i[C$t],delete C$e[C$t]);var C$n=this._toAddedListeners;if(0!==C$n.length){for(var C$r=0,C$s=C$n.length;C$r<C$s;C$r++)this._forceAddEventListener(C$n[C$r]);C$n.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()},_updateTouchListeners:function(C$t){var C$e=this._inDispatch;if(cc.assertID(0<C$e,3508),!(1<C$e)){var C$i=this._listenersMap[C$l.TOUCH_ONE_BY_ONE],C$n=(C$i&&this._onUpdateListeners(C$i),(C$i=this._listenersMap[C$l.TOUCH_ALL_AT_ONCE])&&this._onUpdateListeners(C$i),cc.assertID(1===C$e,3509),this._toAddedListeners);if(0!==C$n.length){for(var C$r=0,C$s=C$n.length;C$r<C$s;C$r++)this._forceAddEventListener(C$n[C$r]);this._toAddedListeners.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}},_cleanToRemovedListeners:function(){for(var C$t=this._toRemovedListeners,C$e=0;C$e<C$t.length;C$e++){var C$i,C$n,C$r=C$t[C$e],C$s=this._listenersMap[C$r._getListenerID()];C$s&&(C$n=C$s.getFixedPriorityListeners(),(C$s=C$s.getSceneGraphPriorityListeners())&&-1!==(C$i=C$s.indexOf(C$r))&&C$s.splice(C$i,1),C$n&&-1!==(C$i=C$n.indexOf(C$r))&&C$n.splice(C$i,1))}C$t.length=0},_onTouchEventCallback:function(C$t,C$e){if(!C$t._isRegistered())return!1;var C$i,C$n=C$e.event,C$r=C$n.currentTouch,C$s=(C$n.currentTarget=C$t._node,!1),C$o=C$n.getEventCode(),C$a=cc.Event.EventTouch;if(C$o===C$a.BEGAN){if(!cc.macro.ENABLE_MULTI_TOUCH&&C$h._currentTouch){var C$c=C$h._currentTouchListener._node;if(C$c&&C$c.activeInHierarchy)return!1}C$t.onTouchBegan&&(C$s=C$t.onTouchBegan(C$r,C$n))&&C$t._registered&&(C$t._claimedTouches.push(C$r),C$h._currentTouchListener=C$t,C$h._currentTouch=C$r)}else if(0<C$t._claimedTouches.length&&-1!==(C$i=C$t._claimedTouches.indexOf(C$r))){if(C$s=!0,!cc.macro.ENABLE_MULTI_TOUCH&&C$h._currentTouch&&C$h._currentTouch!==C$r)return!1;C$o===C$a.MOVED&&C$t.onTouchMoved?C$t.onTouchMoved(C$r,C$n):C$o===C$a.ENDED?(C$t.onTouchEnded&&C$t.onTouchEnded(C$r,C$n),C$t._registered&&C$t._claimedTouches.splice(C$i,1),C$h._clearCurTouch()):C$o===C$a.CANCELED&&(C$t.onTouchCancelled&&C$t.onTouchCancelled(C$r,C$n),C$t._registered&&C$t._claimedTouches.splice(C$i,1),C$h._clearCurTouch())}return C$n.isStopped()?(C$h._updateTouchListeners(C$n),!0):!(!C$s||!C$t.swallowTouches)&&(C$e.needsMutableSet&&C$e.touches.splice(C$r,1),!0)},_dispatchTouchEvent:function(C$t){this._sortEventListeners(C$l.TOUCH_ONE_BY_ONE),this._sortEventListeners(C$l.TOUCH_ALL_AT_ONCE);var C$e=this._getListeners(C$l.TOUCH_ONE_BY_ONE),C$i=this._getListeners(C$l.TOUCH_ALL_AT_ONCE);if(null!==C$e||null!==C$i){var C$n=C$t.getTouches(),C$r=cc.js.array.copy(C$n),C$s={event:C$t,needsMutableSet:C$e&&C$i,touches:C$r,selTouch:null};if(C$e)for(var C$o=0;C$o<C$n.length;C$o++)C$t.currentTouch=C$n[C$o],C$t._propagationStopped=C$t._propagationImmediateStopped=!1,this._dispatchEventToListeners(C$e,this._onTouchEventCallback,C$s);C$i&&0<C$r.length&&(this._dispatchEventToListeners(C$i,this._onTouchesEventCallback,{event:C$t,touches:C$r}),C$t.isStopped())||this._updateTouchListeners(C$t)}},_onTouchesEventCallback:function(C$t,C$e){if(!C$t._registered)return!1;var C$i=cc.Event.EventTouch,C$n=C$e.event,C$e=C$e.touches,C$r=C$n.getEventCode();return C$n.currentTarget=C$t._node,C$r===C$i.BEGAN&&C$t.onTouchesBegan?C$t.onTouchesBegan(C$e,C$n):C$r===C$i.MOVED&&C$t.onTouchesMoved?C$t.onTouchesMoved(C$e,C$n):C$r===C$i.ENDED&&C$t.onTouchesEnded?C$t.onTouchesEnded(C$e,C$n):C$r===C$i.CANCELED&&C$t.onTouchesCancelled&&C$t.onTouchesCancelled(C$e,C$n),!!C$n.isStopped()&&(C$h._updateTouchListeners(C$n),!0)},_associateNodeAndEventListener:function(C$t,C$e){var C$i=this._nodeListenersMap[C$t._id];C$i||(this._nodeListenersMap[C$t._id]=C$i=[]),C$i.push(C$e)},_dissociateNodeAndEventListener:function(C$t,C$e){var C$i=this._nodeListenersMap[C$t._id];C$i&&(cc.js.array.remove(C$i,C$e),0===C$i.length&&delete this._nodeListenersMap[C$t._id])},_dispatchEventToListeners:function(C$t,C$e,C$i){var C$n,C$r,C$s=!1,C$o=C$t.getFixedPriorityListeners(),C$a=C$t.getSceneGraphPriorityListeners(),C$c=0;if(C$o&&0!==C$o.length)for(;C$c<C$t.gt0Index;++C$c)if((C$r=C$o[C$c]).isEnabled()&&!C$r._isPaused()&&C$r._isRegistered()&&C$e(C$r,C$i)){C$s=!0;break}if(C$a&&!C$s)for(C$n=0;C$n<C$a.length;C$n++)if((C$r=C$a[C$n]).isEnabled()&&!C$r._isPaused()&&C$r._isRegistered()&&C$e(C$r,C$i)){C$s=!0;break}if(C$o&&!C$s)for(;C$c<C$o.length;++C$c)if((C$r=C$o[C$c]).isEnabled()&&!C$r._isPaused()&&C$r._isRegistered()&&C$e(C$r,C$i)){C$s=!0;break}},_setDirty:function(C$t,C$e){var C$i=this._priorityDirtyFlagMap;null==C$i[C$t]?C$i[C$t]=C$e:C$i[C$t]=C$e|C$i[C$t]},_sortNumberAsc:function(C$t,C$e){return C$t-C$e},hasEventListener:function(C$t){return!!this._getListeners(C$t)},addListener:function(C$t,C$e){if(cc.assertID(C$t&&C$e,3503),cc.js.isNumber(C$e)||C$e instanceof cc._BaseNode){if(C$t instanceof cc.EventListener){if(C$t._isRegistered())return void cc.logID(3505)}else cc.assertID(!cc.js.isNumber(C$e),3504),C$t=cc.EventListener.create(C$t);if(C$t.checkAvailable()){if(cc.js.isNumber(C$e)){if(0===C$e)return void cc.logID(3500);C$t._setSceneGraphPriority(null),C$t._setFixedPriority(C$e),C$t._setRegistered(!0),C$t._setPaused(!1),this._addListener(C$t)}else C$t._setSceneGraphPriority(C$e),C$t._setFixedPriority(0),C$t._setRegistered(!0),this._addListener(C$t);return C$t}}else cc.warnID(3506)},addCustomListener:function(C$t,C$e){C$t=new cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:C$t,callback:C$e});return this.addListener(C$t,1),C$t},removeListener:function(C$t){if(null!=C$t){var C$e,C$i=this._listenersMap;for(C$e in C$i){var C$n,C$r=C$i[C$e],C$s=C$r.getFixedPriorityListeners(),C$o=C$r.getSceneGraphPriorityListeners();if((C$n=this._removeListenerInVector(C$o,C$t))?this._setDirty(C$t._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY):(C$n=this._removeListenerInVector(C$s,C$t))&&this._setDirty(C$t._getListenerID(),this.DIRTY_FIXED_PRIORITY),C$r.empty()&&(delete this._priorityDirtyFlagMap[C$t._getListenerID()],delete C$i[C$e]),C$n)break}if(!C$n)for(var C$a=this._toAddedListeners,C$c=C$a.length-1;0<=C$c;C$c--){var C$l=C$a[C$c];if(C$l===C$t){cc.js.array.removeAt(C$a,C$c),C$l._setRegistered(!1);break}}this._currentTouchListener===C$t&&this._clearCurTouch()}},_clearCurTouch:function(){this._currentTouchListener=null,this._currentTouch=null},_removeListenerInCallback:function(C$t,C$e){if(null==C$t)return!1;for(var C$i=C$t.length-1;0<=C$i;C$i--){var C$n=C$t[C$i];if(C$n._onCustomEvent===C$e||C$n._onEvent===C$e)return C$n._setRegistered(!1),null!=C$n._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$n._getSceneGraphPriority(),C$n),C$n._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(C$t,C$i):this._toRemovedListeners.push(C$n),!0}return!1},_removeListenerInVector:function(C$t,C$e){if(null==C$t)return!1;for(var C$i=C$t.length-1;0<=C$i;C$i--){var C$n=C$t[C$i];if(C$n===C$e)return C$n._setRegistered(!1),null!=C$n._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$n._getSceneGraphPriority(),C$n),C$n._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(C$t,C$i):this._toRemovedListeners.push(C$n),!0}return!1},removeListeners:function(C$t,C$e){if(cc.js.isNumber(C$t)||C$t instanceof cc._BaseNode)if(void 0!==C$t._id){var C$i,C$n=this._nodeListenersMap[C$t._id];if(C$n){var C$r=cc.js.array.copy(C$n);for(C$i=0;C$i<C$r.length;C$i++)this.removeListener(C$r[C$i]);delete this._nodeListenersMap[C$t._id]}var C$s=this._toAddedListeners;for(C$i=0;C$i<C$s.length;){var C$o=C$s[C$i];C$o._getSceneGraphPriority()===C$t?(C$o._setSceneGraphPriority(null),C$o._setRegistered(!1),C$s.splice(C$i,1)):++C$i}if(!0===C$e){var C$a,C$c=C$t.children;for(C$i=0,C$a=C$c.length;C$i<C$a;C$i++)this.removeListeners(C$c[C$i],!0)}}else C$t===cc.EventListener.TOUCH_ONE_BY_ONE?this._removeListenersForListenerID(C$l.TOUCH_ONE_BY_ONE):C$t===cc.EventListener.TOUCH_ALL_AT_ONCE?this._removeListenersForListenerID(C$l.TOUCH_ALL_AT_ONCE):C$t===cc.EventListener.MOUSE?this._removeListenersForListenerID(C$l.MOUSE):C$t===cc.EventListener.ACCELERATION?this._removeListenersForListenerID(C$l.ACCELERATION):C$t===cc.EventListener.KEYBOARD?this._removeListenersForListenerID(C$l.KEYBOARD):cc.logID(3501);else cc.warnID(3506)},removeCustomListeners:function(C$t){this._removeListenersForListenerID(C$t)},removeAllListeners:function(){var C$t,C$e=this._listenersMap,C$i=this._internalCustomListenerIDs;for(C$t in C$e)-1===C$i.indexOf(C$t)&&this._removeListenersForListenerID(C$t)},setPriority:function(C$t,C$e){if(null!=C$t){var C$i,C$n=this._listenersMap;for(C$i in C$n){var C$r=C$n[C$i].getFixedPriorityListeners();if(C$r)if(-1!==C$r.indexOf(C$t))return null!=C$t._getSceneGraphPriority()&&cc.logID(3502),void(C$t._getFixedPriority()!==C$e&&(C$t._setFixedPriority(C$e),this._setDirty(C$t._getListenerID(),this.DIRTY_FIXED_PRIORITY)))}}},setEnabled:function(C$t){this._isEnabled=C$t},isEnabled:function(){return this._isEnabled},dispatchEvent:function(C$t){if(this._isEnabled)if(this._updateDirtyFlagForSceneGraph(),this._inDispatch++,C$t&&C$t.getType){if(C$t.getType().startsWith(cc.Event.TOUCH))return this._dispatchTouchEvent(C$t),void this._inDispatch--;C$e=C$t,C$i=cc.Event;var C$e=(C$e=C$e.type)===C$i.ACCELERATION?C$l.ACCELERATION:C$e===C$i.KEYBOARD?C$l.KEYBOARD:C$e.startsWith(C$i.MOUSE)?C$l.MOUSE:(C$e.startsWith(C$i.TOUCH)&&cc.logID(2e3),""),C$i=(this._sortEventListeners(C$e),this._listenersMap[C$e]);null!=C$i&&(this._dispatchEventToListeners(C$i,this._onListenerCallback,C$t),this._onUpdateListeners(C$i)),this._inDispatch--}else cc.errorID(3511)},_onListenerCallback:function(C$t,C$e){return C$e.currentTarget=C$t._target,C$t._onEvent(C$e),C$e.isStopped()},dispatchCustomEvent:function(C$t,C$e){C$t=new cc.Event.EventCustom(C$t);C$t.setUserData(C$e),this.dispatchEvent(C$t)}};C$r.get(cc,"eventManager",function(){return cc.errorID(1405,"cc.eventManager","cc.EventTarget or cc.systemEvent"),C$h}),C$e.exports=cc.internal.eventManager=C$h},{"../platform/js":209,"./CCEventListener":110}],112:[function(C$t,C$e,C$i){"use strict";cc.Touch=function(C$t,C$e,C$i){this._lastModified=0,this.setTouchInfo(C$i,C$t,C$e)},cc.Touch.prototype={constructor:cc.Touch,getLocation:function(){return cc.v2(this._point.x,this._point.y)},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return cc.v2(this._prevPoint.x,this._prevPoint.y)},getStartLocation:function(){return cc.v2(this._startPoint.x,this._startPoint.y)},getDelta:function(){return this._point.sub(this._prevPoint)},getLocationInView:function(){return cc.v2(this._point.x,cc.view._designResolutionSize.height-this._point.y)},getPreviousLocationInView:function(){return cc.v2(this._prevPoint.x,cc.view._designResolutionSize.height-this._prevPoint.y)},getStartLocationInView:function(){return cc.v2(this._startPoint.x,cc.view._designResolutionSize.height-this._startPoint.y)},getID:function(){return this._id},setTouchInfo:function(C$t,C$e,C$i){this._prevPoint=this._point,this._point=cc.v2(C$e||0,C$i||0),this._id=C$t,this._startPointCaptured||(this._startPoint=cc.v2(this._point),cc.view._convertPointWithScale(this._startPoint),this._startPointCaptured=!0)},_setPoint:function(C$t,C$e){void 0===C$e?(this._point.x=C$t.x,this._point.y=C$t.y):(this._point.x=C$t,this._point.y=C$e)},_setPrevPoint:function(C$t,C$e){this._prevPoint=void 0===C$e?cc.v2(C$t.x,C$t.y):cc.v2(C$t||0,C$e||0)}}},{}],113:[function(C$t,C$e,C$i){"use strict";C$t("./CCEvent"),C$t("./CCTouch"),C$t("./CCEventListener");C$t=C$t("./CCEventManager");C$e.exports=C$t},{"./CCEvent":109,"./CCEventListener":110,"./CCEventManager":111,"./CCTouch":112}],114:[function(C$t,C$e,C$i){"use strict";var C$n=cc.js,C$r=C$t("../platform/callbacks-invoker");function C$s(){C$r.call(this)}C$n.extend(C$s,C$r),C$s.prototype.emit=function(C$t,C$e){var C$i=C$t.type,C$i=this._callbackTable[C$i];if(C$i){for(var C$n=!C$i.isInvoking,C$r=(C$i.isInvoking=!0,C$i.callbackInfos),C$s=0,C$o=C$r.length;C$s<C$o;++C$s){var C$a=C$r[C$s];if(C$a&&C$a.callback&&(C$a.callback.call(C$a.target,C$t,C$e),C$t._propagationImmediateStopped))break}C$n&&(C$i.isInvoking=!1,C$i.containCanceled&&C$i.purgeCanceled())}},C$e.exports=C$s},{"../platform/callbacks-invoker":202}],115:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../platform/js"),C$r=C$t("../platform/callbacks-invoker"),C$o=C$n.array.fastRemove;function C$s(){C$r.call(this)}C$n.extend(C$s,C$r);C$t=C$s.prototype;C$t.__on=C$t.on,C$t.on=function(C$t,C$e,C$i,C$n){if(C$e)return this.hasEventListener(C$t,C$e,C$i)||(this.__on(C$t,C$e,C$i,C$n),C$i&&C$i.__eventTargets&&C$i.__eventTargets.push(this)),C$e;cc.errorID(6800)},C$t.__off=C$t.off,C$t.off=function(C$t,C$e,C$i){if(C$e)this.__off(C$t,C$e,C$i),C$i&&C$i.__eventTargets&&C$o(C$i.__eventTargets,this);else{C$e=this._callbackTable[C$t];if(C$e){for(var C$n=C$e.callbackInfos,C$r=0;C$r<C$n.length;++C$r){var C$s=C$n[C$r]&&C$n[C$r].target;C$s&&C$s.__eventTargets&&C$o(C$s.__eventTargets,this)}this.removeAll(C$t)}}},C$t.targetOff=function(C$t){this.removeAll(C$t),C$t&&C$t.__eventTargets&&C$o(C$t.__eventTargets,this)},C$t.once=function(C$t,C$e,C$i){this.on(C$t,C$e,C$i,!0)},C$t.dispatchEvent=function(C$t){this.emit(C$t.type,C$t)},cc.EventTarget=C$e.exports=C$s},{"../platform/callbacks-invoker":202,"../platform/js":209}],116:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e){cc.Event.call(this,C$t,C$e),this.detail=null}var C$t=C$t("../platform/js"),C$r=(cc.Event=function(C$t,C$e){this.type=C$t,this.bubbles=!!C$e,this.target=null,this.currentTarget=null,this.eventPhase=0,this._propagationStopped=!1,this._propagationImmediateStopped=!1},cc.Event.prototype={constructor:cc.Event,unuse:function(){this.type=cc.Event.NO_TYPE,this.target=null,this.currentTarget=null,this.eventPhase=cc.Event.NONE,this._propagationStopped=!1,this._propagationImmediateStopped=!1},reuse:function(C$t,C$e){this.type=C$t,this.bubbles=C$e||!1},stopPropagation:function(){this._propagationStopped=!0},stopPropagationImmediate:function(){this._propagationImmediateStopped=!0},isStopped:function(){return this._propagationStopped||this._propagationImmediateStopped},getCurrentTarget:function(){return this.currentTarget},getType:function(){return this.type}},cc.Event.NO_TYPE="no_type",cc.Event.TOUCH="touch",cc.Event.MOUSE="mouse",cc.Event.KEYBOARD="keyboard",cc.Event.ACCELERATION="acceleration",cc.Event.NONE=0,cc.Event.CAPTURING_PHASE=1,cc.Event.AT_TARGET=2,cc.Event.BUBBLING_PHASE=3,C$t.extend(C$n,cc.Event),(C$n.prototype.reset=C$n).prototype.setUserData=function(C$t){this.detail=C$t},C$n.prototype.getUserData=function(){return this.detail},C$n.prototype.getEventName=cc.Event.prototype.getType,new C$t.Pool(10));C$n.put=function(C$t){C$r.put(C$t)},C$n.get=function(C$t,C$e){var C$i=C$r._get();return C$i?C$i.reset(C$t,C$e):C$i=new C$n(C$t,C$e),C$i},cc.Event.EventCustom=C$n,C$e.exports=cc.Event},{"../platform/js":209}],117:[function(C$t,C$e,C$i){"use strict";C$t("./event"),C$t("./event-listeners"),C$t("./event-target"),C$t("./system-event")},{"./event":116,"./event-listeners":114,"./event-target":115,"./system-event":118}],118:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../event/event-target"),C$r=C$t("../event-manager"),C$s=C$t("../platform/CCInputManager"),C$o=cc.Enum({KEY_DOWN:"keydown",KEY_UP:"keyup",DEVICEMOTION:"devicemotion"}),C$a=null,C$c=null,C$t=cc.Class({name:"SystemEvent",extends:C$n,statics:{EventType:C$o},setAccelerometerEnabled:function(C$t){C$t&&window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then(function(C$t){console.log("Device Motion Event request permission: "+C$t),C$s.setAccelerometerEnabled("granted"===C$t)}):C$s.setAccelerometerEnabled(C$t)},setAccelerometerInterval:function(C$t){C$s.setAccelerometerInterval(C$t)},on:function(C$t,C$e,C$i,C$n){this._super(C$t,C$e,C$i,C$n),C$t!==C$o.KEY_DOWN&&C$t!==C$o.KEY_UP||(C$a=C$a||cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyPressed:function(C$t,C$e){C$e.type=C$o.KEY_DOWN,cc.systemEvent.dispatchEvent(C$e)},onKeyReleased:function(C$t,C$e){C$e.type=C$o.KEY_UP,cc.systemEvent.dispatchEvent(C$e)}}),C$r.hasEventListener(cc.EventListener.ListenerID.KEYBOARD)||C$r.addListener(C$a,1)),C$t===C$o.DEVICEMOTION&&(C$c=C$c||cc.EventListener.create({event:cc.EventListener.ACCELERATION,callback:function(C$t,C$e){C$e.type=C$o.DEVICEMOTION,cc.systemEvent.dispatchEvent(C$e)}}),C$r.hasEventListener(cc.EventListener.ListenerID.ACCELERATION)||C$r.addListener(C$c,1))},off:function(C$t,C$e,C$i){this._super(C$t,C$e,C$i),!C$a||C$t!==C$o.KEY_DOWN&&C$t!==C$o.KEY_UP||(C$e=this.hasEventListener(C$o.KEY_DOWN),C$i=this.hasEventListener(C$o.KEY_UP),C$e||C$i||C$r.removeListener(C$a)),C$c&&C$t===C$o.DEVICEMOTION&&C$r.removeListener(C$c)}});cc.SystemEvent=C$e.exports=C$t,cc.systemEvent=new cc.SystemEvent},{"../event-manager":113,"../event/event-target":115,"../platform/CCInputManager":193}],119:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$a=C$r(C$t("../value-types/vec3")),C$n=C$r(C$t("../value-types/mat3")),C$o=C$r(C$t("./enums"));function C$r(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}var C$s=new C$a.default,C$h=new C$a.default,C$c=new C$n.default;function C$l(C$t,C$e,C$i,C$n,C$r,C$s){this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=C$o.default.SHAPE_AABB,this.center=new C$a.default(C$t,C$e,C$i),this.halfExtents=new C$a.default(C$n,C$r,C$s)}C$l.create=function(C$t,C$e,C$i,C$n,C$r,C$s){return new C$l(C$t,C$e,C$i,C$n,C$r,C$s)},C$l.clone=function(C$t){return new C$l(C$t.center.x,C$t.center.y,C$t.center.z,C$t.halfExtents.x,C$t.halfExtents.y,C$t.halfExtents.z)},C$l.copy=function(C$t,C$e){return C$a.default.copy(C$t.center,C$e.center),C$a.default.copy(C$t.halfExtents,C$e.halfExtents),C$t},C$l.fromPoints=function(C$t,C$e,C$i){return C$a.default.scale(C$t.center,C$a.default.add(C$s,C$e,C$i),.5),C$a.default.scale(C$t.halfExtents,C$a.default.sub(C$h,C$i,C$e),.5),C$t},C$l.set=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){return C$a.default.set(C$t.center,C$e,C$i,C$n),C$a.default.set(C$t.halfExtents,C$r,C$s,C$o),C$t},(C$t=C$l.prototype).getBoundary=function(C$t,C$e){C$a.default.sub(C$t,this.center,this.halfExtents),C$a.default.add(C$e,this.center,this.halfExtents)},C$t.transform=function(C$t,C$e,C$i,C$n,C$r){var C$s,C$o;C$a.default.transformMat4((C$r=C$r||this).center,this.center,C$t),C$r=C$r.halfExtents,C$s=this.halfExtents,C$t=C$t,C$o=C$c.m,C$t=C$t.m,C$o[0]=Math.abs(C$t[0]),C$o[1]=Math.abs(C$t[1]),C$o[2]=Math.abs(C$t[2]),C$o[3]=Math.abs(C$t[4]),C$o[4]=Math.abs(C$t[5]),C$o[5]=Math.abs(C$t[6]),C$o[6]=Math.abs(C$t[8]),C$o[7]=Math.abs(C$t[9]),C$o[8]=Math.abs(C$t[10]),C$a.default.transformMat3(C$r,C$s,C$c)},C$i.default=C$l,C$e.exports=C$i.default},{"../value-types/mat3":280,"../value-types/vec3":289,"./enums":121}],120:[function(C$e,C$i,C$t){"use strict";C$t.__esModule=!0,C$t.point_plane=C$s,C$t.pt_point_plane=function(C$t,C$e,C$i){var C$n=C$s(C$e,C$i);return C$o.Vec3.subtract(C$t,C$e,C$o.Vec3.multiplyScalar(C$t,C$i.n,C$n))},C$t.pt_point_aabb=function(C$t,C$e,C$i){return C$o.Vec3.copy(C$t,C$e),C$o.Vec3.subtract(C$n,C$i.center,C$i.halfExtents),C$o.Vec3.add(C$r,C$i.center,C$i.halfExtents),C$t.x=(C$t.x<C$n.x?C$n:C$t).x,C$t.y=(C$t.y<C$n.x?C$n:C$t).y,C$t.z=(C$t.z<C$n.x?C$n:C$t).z,C$t.x=(C$t.x>C$r.x?C$r:C$t).x,C$t.y=(C$t.y>C$r.x?C$r:C$t).y,C$t.z=(C$t.z>C$r.x?C$r:C$t).z,C$t},C$t.pt_point_obb=function(C$t,C$e,C$i){var C$n=C$i.orientation.m;C$o.Vec3.set(C$a,C$n[0],C$n[1],C$n[2]),C$o.Vec3.set(C$c,C$n[3],C$n[4],C$n[5]),C$o.Vec3.set(C$l,C$n[6],C$n[7],C$n[8]),C$u[0]=C$a,C$u[1]=C$c,C$u[2]=C$l,C$_[0]=C$i.halfExtents.x,C$_[1]=C$i.halfExtents.y,C$_[2]=C$i.halfExtents.z,C$o.Vec3.subtract(C$h,C$e,C$i.center),C$o.Vec3.set(C$t,C$i.center.x,C$i.center.y,C$i.center.z);for(var C$r=0;C$r<3;C$r++){var C$s=C$o.Vec3.dot(C$h,C$u[C$r]);(C$s=C$s>C$_[C$r]?C$_[C$r]:C$s)<-C$_[C$r]&&(C$s=-C$_[C$r]),C$t.x+=C$s*C$u[C$r].x,C$t.y+=C$s*C$u[C$r].y,C$t.z+=C$s*C$u[C$r].z}return C$t};var C$o=C$e("../value-types"),C$a=new C$o.Vec3,C$c=new C$o.Vec3,C$l=new C$o.Vec3,C$h=new C$o.Vec3,C$n=new C$o.Vec3,C$r=new C$o.Vec3,C$u=new Array(3),C$_=new Array(3);function C$s(C$t,C$e){return C$o.Vec3.dot(C$e.n,C$t)-C$e.d}},{"../value-types":279}],121:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$i.default={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256},C$e.exports=C$i.default},{}],122:[function(C$t,C$s,C$e){"use strict";C$e.__esModule=!0,C$e.frustum=void 0;var C$o=C$t("../value-types"),C$a=C$i(C$t("./enums")),C$c=C$i(C$t("./plane"));function C$i(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$u(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}var C$_,C$n,C$l,C$h=new Array(8),C$t=(C$h[0]=new C$o.Vec3(1,1,1),C$h[1]=new C$o.Vec3(-1,1,1),C$h[2]=new C$o.Vec3(-1,-1,1),C$h[3]=new C$o.Vec3(1,-1,1),C$h[4]=new C$o.Vec3(1,1,-1),C$h[5]=new C$o.Vec3(-1,1,-1),C$h[6]=new C$o.Vec3(-1,-1,-1),C$h[7]=new C$o.Vec3(1,-1,-1),C$r.create=function(){return new C$r},C$r.clone=function(C$t){return C$r.copy(new C$r,C$t)},C$r.copy=function(C$t,C$e){C$t._type=C$e._type;for(var C$i=0;C$i<6;++C$i)C$c.default.copy(C$t.planes[C$i],C$e.planes[C$i]);for(var C$n=0;C$n<8;++C$n)C$o.Vec3.copy(C$t.vertices[C$n],C$e.vertices[C$n]);return C$t},C$t=C$r,(C$n=[{key:"accurate",set:function(C$t){this._type=C$t?C$a.default.SHAPE_FRUSTUM_ACCURATE:C$a.default.SHAPE_FRUSTUM}}])&&C$u(C$t.prototype,C$n),C$_&&C$u(C$t,C$_),(C$n=C$r.prototype).update=function(C$t,C$e){C$t=C$t.m;if(C$o.Vec3.set(this.planes[0].n,C$t[3]+C$t[0],C$t[7]+C$t[4],C$t[11]+C$t[8]),this.planes[0].d=-(C$t[15]+C$t[12]),C$o.Vec3.set(this.planes[1].n,C$t[3]-C$t[0],C$t[7]-C$t[4],C$t[11]-C$t[8]),this.planes[1].d=-(C$t[15]-C$t[12]),C$o.Vec3.set(this.planes[2].n,C$t[3]+C$t[1],C$t[7]+C$t[5],C$t[11]+C$t[9]),this.planes[2].d=-(C$t[15]+C$t[13]),C$o.Vec3.set(this.planes[3].n,C$t[3]-C$t[1],C$t[7]-C$t[5],C$t[11]-C$t[9]),this.planes[3].d=-(C$t[15]-C$t[13]),C$o.Vec3.set(this.planes[4].n,C$t[3]+C$t[2],C$t[7]+C$t[6],C$t[11]+C$t[10]),this.planes[4].d=-(C$t[15]+C$t[14]),C$o.Vec3.set(this.planes[5].n,C$t[3]-C$t[2],C$t[7]-C$t[6],C$t[11]-C$t[10]),this.planes[5].d=-(C$t[15]-C$t[14]),this._type===C$a.default.SHAPE_FRUSTUM_ACCURATE){for(var C$i=0;C$i<6;C$i++){var C$n=this.planes[C$i],C$r=1/C$n.n.length();C$o.Vec3.multiplyScalar(C$n.n,C$n.n,C$r),C$n.d*=C$r}for(var C$s=0;C$s<8;C$s++)C$o.Vec3.transformMat4(this.vertices[C$s],C$h[C$s],C$e)}},C$n.transform=function(C$t){if(this._type===C$a.default.SHAPE_FRUSTUM_ACCURATE){for(var C$e=0;C$e<8;C$e++)C$o.Vec3.transformMat4(this.vertices[C$e],this.vertices[C$e],C$t);C$c.default.fromPoints(this.planes[0],this.vertices[1],this.vertices[5],this.vertices[6]),C$c.default.fromPoints(this.planes[1],this.vertices[3],this.vertices[7],this.vertices[4]),C$c.default.fromPoints(this.planes[2],this.vertices[6],this.vertices[7],this.vertices[3]),C$c.default.fromPoints(this.planes[3],this.vertices[0],this.vertices[4],this.vertices[5]),C$c.default.fromPoints(this.planes[4],this.vertices[2],this.vertices[3],this.vertices[0]),C$c.default.fromPoints(this.planes[0],this.vertices[7],this.vertices[6],this.vertices[5])}},C$r);function C$r(){this.planes=void 0,this.vertices=void 0,this._type=void 0,this._type=C$a.default.SHAPE_FRUSTUM,this.planes=new Array(6);for(var C$t=0;C$t<6;++C$t)this.planes[C$t]=C$c.default.create(0,0,0,0);this.vertices=new Array(8);for(var C$e=0;C$e<8;++C$e)this.vertices[C$e]=new C$o.Vec3}(C$e.frustum=C$t).createOrtho=(C$l=new C$o.Vec3,function(C$t,C$e,C$i,C$n,C$r,C$s){C$e/=2,C$i/=2;C$o.Vec3.set(C$l,C$e,C$i,C$n),C$o.Vec3.transformMat4(C$t.vertices[0],C$l,C$s),C$o.Vec3.set(C$l,-C$e,C$i,C$n),C$o.Vec3.transformMat4(C$t.vertices[1],C$l,C$s),C$o.Vec3.set(C$l,-C$e,-C$i,C$n),C$o.Vec3.transformMat4(C$t.vertices[2],C$l,C$s),C$o.Vec3.set(C$l,C$e,-C$i,C$n),C$o.Vec3.transformMat4(C$t.vertices[3],C$l,C$s),C$o.Vec3.set(C$l,C$e,C$i,C$r),C$o.Vec3.transformMat4(C$t.vertices[4],C$l,C$s),C$o.Vec3.set(C$l,-C$e,C$i,C$r),C$o.Vec3.transformMat4(C$t.vertices[5],C$l,C$s),C$o.Vec3.set(C$l,-C$e,-C$i,C$r),C$o.Vec3.transformMat4(C$t.vertices[6],C$l,C$s),C$o.Vec3.set(C$l,C$e,-C$i,C$r),C$o.Vec3.transformMat4(C$t.vertices[7],C$l,C$s),C$c.default.fromPoints(C$t.planes[0],C$t.vertices[1],C$t.vertices[6],C$t.vertices[5]),C$c.default.fromPoints(C$t.planes[1],C$t.vertices[3],C$t.vertices[4],C$t.vertices[7]),C$c.default.fromPoints(C$t.planes[2],C$t.vertices[6],C$t.vertices[3],C$t.vertices[7]),C$c.default.fromPoints(C$t.planes[3],C$t.vertices[0],C$t.vertices[5],C$t.vertices[4]),C$c.default.fromPoints(C$t.planes[4],C$t.vertices[2],C$t.vertices[0],C$t.vertices[3]),C$c.default.fromPoints(C$t.planes[0],C$t.vertices[7],C$t.vertices[5],C$t.vertices[6])})},{"../value-types":279,"./enums":121,"./plane":127}],123:[function(C$t,C$e,C$i){"use strict";var C$n={enums:C$i.__esModule=!0,Triangle:!0,Aabb:!0,Ray:!0,intersect:!0,Sphere:!0,Obb:!0,Frustum:!0,Line:!0,Plane:!0},C$r=(C$i.Plane=C$i.Line=C$i.Frustum=C$i.Obb=C$i.Sphere=C$i.intersect=C$i.Ray=C$i.Aabb=C$i.Triangle=C$i.enums=void 0,C$o(C$t("./enums"))),C$r=(C$i.enums=C$r.default,C$o(C$t("./triangle"))),C$r=(C$i.Triangle=C$r.default,C$o(C$t("./aabb"))),C$r=(C$i.Aabb=C$r.default,C$o(C$t("./ray"))),C$r=(C$i.Ray=C$r.default,C$o(C$t("./intersect"))),C$r=(C$i.intersect=C$r.default,C$o(C$t("./sphere"))),C$r=(C$i.Sphere=C$r.default,C$o(C$t("./obb"))),C$r=(C$i.Obb=C$r.default,C$o(C$t("./frustum"))),C$r=(C$i.Frustum=C$r.default,C$o(C$t("./line"))),C$r=(C$i.Line=C$r.default,C$o(C$t("./plane"))),C$s=(C$i.Plane=C$r.default,C$t("./distance"));function C$o(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}Object.keys(C$s).forEach(function(C$t){"default"!==C$t&&"__esModule"!==C$t&&(Object.prototype.hasOwnProperty.call(C$n,C$t)||(C$i[C$t]=C$s[C$t]))}),cc.geomUtils=C$e.exports},{"./aabb":119,"./distance":120,"./enums":121,"./frustum":122,"./intersect":124,"./line":125,"./obb":126,"./plane":127,"./ray":128,"./sphere":129,"./triangle":130}],124:[function(C$t,C$l,C$h){"use strict";C$h.__esModule=!0,C$h.default=void 0;var C$u,C$_,C$d=C$n(C$t("../../renderer/gfx")),C$e=C$n(C$t("../../renderer/memop/recycle-pool")),C$p=C$t("../value-types"),C$f=C$n(C$t("./aabb")),C$m=function(C$t){if(C$t&&C$t.__esModule)return C$t;if(null===C$t||"object"!=typeof C$t&&"function"!=typeof C$t)return{default:C$t};var C$e=C$g();if(C$e&&C$e.has(C$t))return C$e.get(C$t);var C$i,C$n={},C$r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C$i in C$t){var C$s;Object.prototype.hasOwnProperty.call(C$t,C$i)&&((C$s=C$r?Object.getOwnPropertyDescriptor(C$t,C$i):null)&&(C$s.get||C$s.set)?Object.defineProperty(C$n,C$i,C$s):C$n[C$i]=C$t[C$i])}return C$n.default=C$t,C$e&&C$e.set(C$t,C$n),C$n}(C$t("./distance")),C$i=C$n(C$t("./enums")),C$y=C$n(C$t("./ray")),C$t=C$n(C$t("./triangle"));function C$g(){if("function"!=typeof WeakMap)return null;var C$t=new WeakMap;return C$g=function(){return C$t},C$t}function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$v(C$t,C$e,C$i,C$n){C$p.Vec3.set(C$t,C$e[C$i*C$n],C$e[C$i*C$n+1],C$e[C$i*C$n+2])}C$u=C$t.default.create(),C$_=1/0;function C$x(C$t,C$e){C$_=1/0;for(var C$i=C$e._subMeshes,C$n=0;C$n<C$i.length;C$n++)if(C$i[C$n]._primitiveType===C$d.default.PT_TRIANGLES)for(var C$r=C$e._subDatas[C$n]||C$e._subDatas[0],C$s=C$e._getAttrMeshData(C$n,C$d.default.ATTR_POSITION),C$o=C$r.getIData(Uint16Array),C$a=C$r.vfm.element(C$d.default.ATTR_POSITION).num,C$c=0;C$c<C$o.length;C$c+=3){C$v(C$u.a,C$s,C$o[C$c],C$a),C$v(C$u.b,C$s,C$o[C$c+1],C$a),C$v(C$u.c,C$s,C$o[C$c+2],C$a);var C$l=C$xt(C$t,C$u);0<C$l&&C$l<C$_&&(C$_=C$l)}return C$_}var C$b,C$A,C$C,C$S,C$T,C$o,C$w,C$E,C$M;function C$I(C$t,C$e){return C$t.distance-C$e.distance}function C$B(C$t,C$e,C$i){var C$i=C$i.m,C$n=C$e.x,C$r=C$e.y,C$e=C$e.z,C$s=(C$s=C$i[3]*C$n+C$i[7]*C$r+C$i[11]*C$e)?1/C$s:1;return C$t.x=(C$i[0]*C$n+C$i[4]*C$r+C$i[8]*C$e)*C$s,C$t.y=(C$i[1]*C$n+C$i[5]*C$r+C$i[9]*C$e)*C$s,C$t.z=(C$i[2]*C$n+C$i[6]*C$r+C$i[10]*C$e)*C$s,C$t}function C$R(C$t){return 0<C$t&&C$t<1/0}C$b=new C$e.default(function(){return{distance:0,node:null}},1),C$A=[],C$C=C$f.default.create(),C$S=new C$p.Vec3,C$T=new C$p.Vec3,C$o=new C$y.default,C$w=cc.mat4(),C$E=cc.mat4(),C$M=new C$p.Vec3;function C$P(C$t,C$n,C$r,C$s){return C$b.reset(),C$A.length=0,function C$t(C$e,C$i){for(var C$n=C$e.children,C$r=C$n.length-1;0<=C$r;C$r--)C$t(C$n[C$r],C$i);C$i(C$e)}(C$t=C$t||cc.director.getScene(),function(C$t){var C$e,C$i;C$s&&!C$s(C$t)||(C$p.Mat4.invert(C$E,C$t.getWorldMatrix(C$w)),C$p.Vec3.transformMat4(C$o.o,C$n.o,C$E),C$p.Vec3.normalize(C$o.d,C$B(C$o.d,C$n.d,C$E)),C$e=1/0,(C$i=C$t._renderComponent)instanceof cc.MeshRenderer?C$e=C$bt(C$o,C$i._boundingBox):C$t.width&&C$t.height&&(C$p.Vec3.set(C$S,-C$t.width*C$t.anchorX,-C$t.height*C$t.anchorY,C$t.z),C$p.Vec3.set(C$T,C$t.width*(1-C$t.anchorX),C$t.height*(1-C$t.anchorY),C$t.z),C$f.default.fromPoints(C$C,C$S,C$T),C$e=C$bt(C$o,C$C)),C$R(C$e)&&C$R(C$e=C$r?C$r(C$o,C$t,C$e):C$e)&&(C$p.Vec3.scale(C$M,C$o.d,C$e),C$B(C$M,C$M,C$w),(C$i=C$b.add()).node=C$t,C$i.distance=C$p.Vec3.mag(C$M),C$A.push(C$i)))}),C$A.sort(C$I),C$A}function C$D(C$t,C$e){var C$i=C$p.Vec3.dot(C$t.d,C$e.n);return Math.abs(C$i)<Number.EPSILON?0:(C$p.Vec3.multiplyScalar(C$G,C$e.n,C$e.d),(C$t=C$p.Vec3.dot(C$p.Vec3.subtract(C$G,C$G,C$t.o),C$e.n)/C$i)<0?0:C$t)}function C$L(C$t,C$e){return C$p.Vec3.subtract(C$z,C$t.e,C$t.s),(C$t=(C$e.d-C$p.Vec3.dot(C$t.s,C$e.n))/C$p.Vec3.dot(C$z,C$e.n))<0||1<C$t?0:C$t}C$G=new C$p.Vec3(0,0,0),C$z=new C$p.Vec3(0,0,0);function C$V(C$t,C$e,C$i){C$p.Vec3.subtract(C$Y,C$e.b,C$e.a),C$p.Vec3.subtract(C$q,C$e.c,C$e.a),C$p.Vec3.subtract(C$J,C$t.s,C$t.e),C$p.Vec3.cross(C$K,C$Y,C$q);var C$n=C$p.Vec3.dot(C$J,C$K);if(C$n<=0)return 0;if(C$p.Vec3.subtract(C$Z,C$t.s,C$e.a),(C$t=C$p.Vec3.dot(C$Z,C$K))<0||C$n<C$t)return 0;if(C$p.Vec3.cross(C$Q,C$J,C$Z),(C$t=C$p.Vec3.dot(C$q,C$Q))<0||C$n<C$t)return 0;var C$r=-C$p.Vec3.dot(C$Y,C$Q);return C$r<0||C$n<C$t+C$r?0:(C$i&&(C$n=1-(C$t*=C$n=1/C$n)-(C$r*=C$n),C$p.Vec3.set(C$i,C$e.a.x*C$n+C$e.b.x*C$t+C$e.c.x*C$r,C$e.a.y*C$n+C$e.b.y*C$t+C$e.c.y*C$r,C$e.a.z*C$n+C$e.b.z*C$t+C$e.c.z*C$r)),1)}function C$O(C$t,C$e,C$i,C$n,C$r,C$s,C$o){if(C$p.Vec3.subtract(C$$,C$e,C$t),C$p.Vec3.subtract(C$tt,C$i,C$t),C$p.Vec3.subtract(C$et,C$n,C$t),C$p.Vec3.subtract(C$it,C$r,C$t),C$p.Vec3.cross(C$rt,C$it,C$$),0<=(C$e=C$p.Vec3.dot(C$tt,C$rt))){var C$a=-C$p.Vec3.dot(C$et,C$rt);if(C$a<0)return 0;var C$c=C$p.Vec3.dot(C$p.Vec3.cross(C$st,C$$,C$et),C$tt);if(C$c<0)return 0;C$o&&C$p.Vec3.set(C$o,C$i.x*(C$a*=C$l=1/(C$a+C$e+C$c))+C$n.x*(C$e*=C$l)+C$r.x*(C$c*=C$l),C$i.y*C$a+C$n.y*C$e+C$r.y*C$c,C$i.z*C$a+C$n.z*C$e+C$r.z*C$c)}else{C$p.Vec3.subtract(C$nt,C$s,C$t);var C$l=C$p.Vec3.dot(C$nt,C$rt);if(C$l<0)return 0;C$a=C$p.Vec3.dot(C$p.Vec3.cross(C$st,C$$,C$tt),C$nt);if(C$a<0)return 0;C$o&&(C$n=1/(C$l+(C$e=-C$e)+C$a),C$p.Vec3.set(C$o,C$i.x*(C$l*=C$n)+C$s.x*(C$e*=C$n)+C$r.x*(C$a*=C$n),C$i.y*C$l+C$s.y*C$e+C$r.y*C$a,C$i.z*C$l+C$s.z*C$e+C$r.z*C$a))}return 1}function C$F(C$t,C$e){var C$i=C$e.radius,C$e=C$e.center,C$n=C$t.o,C$t=C$t.d,C$i=C$i*C$i,C$e=(C$p.Vec3.subtract(C$ot,C$e,C$n),C$ot.lengthSqr()),C$n=C$p.Vec3.dot(C$ot,C$t);return(C$t=C$i-(C$e-C$n*C$n))<0?0:(C$t=Math.sqrt(C$t),(C$e=C$e<C$i?C$n+C$t:C$n-C$t)<0?0:C$e)}function C$N(C$t,C$e){C$r[0]=C$e.halfExtents.x,C$r[1]=C$e.halfExtents.y,C$r[2]=C$e.halfExtents.z,C$lt=C$e.center,C$ht=C$t.o,C$ut=C$t.d,C$t=C$e.orientation.m,C$p.Vec3.set(C$_t,C$t[0],C$t[1],C$t[2]),C$p.Vec3.set(C$dt,C$t[3],C$t[4],C$t[5]),C$p.Vec3.set(C$ft,C$t[6],C$t[7],C$t[8]),C$p.Vec3.subtract(C$pt,C$lt,C$ht),C$s[0]=C$p.Vec3.dot(C$_t,C$ut),C$s[1]=C$p.Vec3.dot(C$dt,C$ut),C$s[2]=C$p.Vec3.dot(C$ft,C$ut),C$a[0]=C$p.Vec3.dot(C$_t,C$pt),C$a[1]=C$p.Vec3.dot(C$dt,C$pt),C$a[2]=C$p.Vec3.dot(C$ft,C$pt);for(var C$i=0;C$i<3;++C$i){if(0===C$s[C$i]){if(0<-C$a[C$i]-C$r[C$i]||-C$a[C$i]+C$r[C$i]<0)return 0;C$s[C$i]=1e-7}C$c[2*C$i+0]=(C$a[C$i]+C$r[C$i])/C$s[C$i],C$c[2*C$i+1]=(C$a[C$i]-C$r[C$i])/C$s[C$i]}return C$e=Math.max(Math.max(Math.min(C$c[0],C$c[1]),Math.min(C$c[2],C$c[3])),Math.min(C$c[4],C$c[5])),(C$t=Math.min(Math.min(Math.max(C$c[0],C$c[1]),Math.max(C$c[2],C$c[3])),Math.max(C$c[4],C$c[5])))<0||C$t<C$e||C$e<0?0:C$e}function C$k(C$t,C$e){return C$p.Vec3.subtract(C$mt,C$t.center,C$t.halfExtents),C$p.Vec3.add(C$yt,C$t.center,C$t.halfExtents),C$p.Vec3.subtract(C$gt,C$e.center,C$e.halfExtents),C$p.Vec3.add(C$vt,C$e.center,C$e.halfExtents),C$mt.x<=C$vt.x&&C$yt.x>=C$gt.x&&C$mt.y<=C$vt.y&&C$yt.y>=C$gt.y&&C$mt.z<=C$vt.z&&C$yt.z>=C$gt.z}C$U=new C$p.Vec3(0,0,0),C$W=new C$p.Vec3(0,0,0),C$H=new C$p.Vec3(0,0,0),C$j=new C$p.Vec3(0,0,0),C$X=new C$p.Vec3(0,0,0);var C$G,C$z,C$U,C$W,C$H,C$j,C$X,C$Y,C$q,C$J,C$Z,C$K,C$Q,C$$,C$tt,C$et,C$it,C$nt,C$rt,C$st,C$ot,C$at,C$ct,C$lt,C$ht,C$ut,C$_t,C$dt,C$ft,C$pt,C$r,C$s,C$a,C$c,C$mt,C$yt,C$gt,C$vt,C$xt=function(C$t,C$e,C$i){C$p.Vec3.subtract(C$U,C$e.b,C$e.a),C$p.Vec3.subtract(C$W,C$e.c,C$e.a),C$p.Vec3.cross(C$H,C$t.d,C$W);var C$n=C$p.Vec3.dot(C$U,C$H);if(C$n<Number.EPSILON&&(!C$i||C$n>-Number.EPSILON))return 0;C$i=1/C$n,C$p.Vec3.subtract(C$j,C$t.o,C$e.a),C$n=C$p.Vec3.dot(C$j,C$H)*C$i;if(C$n<0||1<C$n)return 0;C$p.Vec3.cross(C$X,C$j,C$U);C$e=C$p.Vec3.dot(C$t.d,C$X)*C$i;if(C$e<0||1<C$n+C$e)return 0;C$t=C$p.Vec3.dot(C$W,C$X)*C$i;return C$t<0?0:C$t},C$t=C$xt,C$bt=(C$Y=new C$p.Vec3(0,0,0),C$q=new C$p.Vec3(0,0,0),C$J=new C$p.Vec3(0,0,0),C$Z=new C$p.Vec3(0,0,0),C$K=new C$p.Vec3(0,0,0),C$Q=new C$p.Vec3(0,0,0),C$$=new C$p.Vec3(0,0,0),C$tt=new C$p.Vec3(0,0,0),C$et=new C$p.Vec3(0,0,0),C$it=new C$p.Vec3(0,0,0),C$nt=new C$p.Vec3(0,0,0),C$rt=new C$p.Vec3(0,0,0),C$st=new C$p.Vec3(0,0,0),C$ot=new C$p.Vec3(0,0,0),C$at=new C$p.Vec3,C$ct=new C$p.Vec3,function(C$t,C$e){var C$i=C$t.o,C$t=C$t.d,C$n=1/C$t.x,C$r=1/C$t.y,C$t=1/C$t.z,C$e=(C$p.Vec3.subtract(C$at,C$e.center,C$e.halfExtents),C$p.Vec3.add(C$ct,C$e.center,C$e.halfExtents),(C$at.x-C$i.x)*C$n),C$n=(C$ct.x-C$i.x)*C$n,C$s=(C$at.y-C$i.y)*C$r,C$r=(C$ct.y-C$i.y)*C$r,C$o=(C$at.z-C$i.z)*C$t,C$i=(C$ct.z-C$i.z)*C$t,C$t=Math.max(Math.max(Math.min(C$e,C$n),Math.min(C$s,C$r)),Math.min(C$o,C$i)),C$e=Math.min(Math.min(Math.max(C$e,C$n),Math.max(C$s,C$r)),Math.max(C$o,C$i));return C$e<0||C$e<C$t?0:C$t}),C$e=C$bt;new C$p.Vec3,new C$p.Vec3,new C$p.Vec3,C$_t=new C$p.Vec3,C$dt=new C$p.Vec3,C$ft=new C$p.Vec3,C$pt=new C$p.Vec3,C$r=new Array(3),C$s=new Array(3),C$a=new Array(3),C$c=new Array(6),C$mt=new C$p.Vec3,C$yt=new C$p.Vec3,C$gt=new C$p.Vec3,C$vt=new C$p.Vec3;function C$At(C$t,C$e,C$i,C$n,C$r,C$s){C$p.Vec3.set(C$s[0],C$t.x+C$i.x*C$e.x+C$n.x*C$e.y+C$r.x*C$e.z,C$t.y+C$i.y*C$e.x+C$n.y*C$e.y+C$r.y*C$e.z,C$t.z+C$i.z*C$e.x+C$n.z*C$e.y+C$r.z*C$e.z),C$p.Vec3.set(C$s[1],C$t.x-C$i.x*C$e.x+C$n.x*C$e.y+C$r.x*C$e.z,C$t.y-C$i.y*C$e.x+C$n.y*C$e.y+C$r.y*C$e.z,C$t.z-C$i.z*C$e.x+C$n.z*C$e.y+C$r.z*C$e.z),C$p.Vec3.set(C$s[2],C$t.x+C$i.x*C$e.x-C$n.x*C$e.y+C$r.x*C$e.z,C$t.y+C$i.y*C$e.x-C$n.y*C$e.y+C$r.y*C$e.z,C$t.z+C$i.z*C$e.x-C$n.z*C$e.y+C$r.z*C$e.z),C$p.Vec3.set(C$s[3],C$t.x+C$i.x*C$e.x+C$n.x*C$e.y-C$r.x*C$e.z,C$t.y+C$i.y*C$e.x+C$n.y*C$e.y-C$r.y*C$e.z,C$t.z+C$i.z*C$e.x+C$n.z*C$e.y-C$r.z*C$e.z),C$p.Vec3.set(C$s[4],C$t.x-C$i.x*C$e.x-C$n.x*C$e.y-C$r.x*C$e.z,C$t.y-C$i.y*C$e.x-C$n.y*C$e.y-C$r.y*C$e.z,C$t.z-C$i.z*C$e.x-C$n.z*C$e.y-C$r.z*C$e.z),C$p.Vec3.set(C$s[5],C$t.x+C$i.x*C$e.x-C$n.x*C$e.y-C$r.x*C$e.z,C$t.y+C$i.y*C$e.x-C$n.y*C$e.y-C$r.y*C$e.z,C$t.z+C$i.z*C$e.x-C$n.z*C$e.y-C$r.z*C$e.z),C$p.Vec3.set(C$s[6],C$t.x-C$i.x*C$e.x+C$n.x*C$e.y-C$r.x*C$e.z,C$t.y-C$i.y*C$e.x+C$n.y*C$e.y-C$r.y*C$e.z,C$t.z-C$i.z*C$e.x+C$n.z*C$e.y-C$r.z*C$e.z),C$p.Vec3.set(C$s[7],C$t.x-C$i.x*C$e.x-C$n.x*C$e.y+C$r.x*C$e.z,C$t.y-C$i.y*C$e.x-C$n.y*C$e.y+C$r.y*C$e.z,C$t.z-C$i.z*C$e.x-C$n.z*C$e.y+C$r.z*C$e.z)}function C$Ct(C$t,C$e){for(var C$i=C$s=C$p.Vec3.dot(C$e,C$t[0]),C$n=1;C$n<8;++C$n)var C$r=C$p.Vec3.dot(C$e,C$t[C$n]),C$s=C$r<C$s?C$r:C$s,C$i=C$i<C$r?C$r:C$i;return[C$s,C$i]}function C$St(C$t,C$e){var C$i=C$t.halfExtents.x*Math.abs(C$e.n.x)+C$t.halfExtents.y*Math.abs(C$e.n.y)+C$t.halfExtents.z*Math.abs(C$e.n.z);return(C$t=C$p.Vec3.dot(C$e.n,C$t.center))+C$i<C$e.d?-1:C$t-C$i>C$e.d?0:1}function C$Tt(C$t,C$e){for(var C$i=0;C$i<C$e.planes.length;C$i++)if(-1===C$St(C$t,C$e.planes[C$i]))return 0;return 1}function C$wt(C$t,C$e){return C$p.Vec3.subtract(C$Et,C$e,C$t.center),C$p.Vec3.transformMat3(C$Et,C$Et,C$p.Mat3.transpose(C$Mt,C$t.orientation)),C$e=C$Et,C$t=C$t.halfExtents,Math.abs(C$e.x)<C$t.x&&Math.abs(C$e.y)<C$t.y&&Math.abs(C$e.z)<C$t.z}var C$Et,C$Mt,C$y=function(){for(var C$c=new Array(15),C$t=0;C$t<15;C$t++)C$c[C$t]=new C$p.Vec3(0,0,0);for(var C$l=new Array(8),C$h=new Array(8),C$e=0;C$e<8;C$e++)C$l[C$e]=new C$p.Vec3(0,0,0),C$h[C$e]=new C$p.Vec3(0,0,0);var C$u=new C$p.Vec3,C$_=new C$p.Vec3;return function(C$t,C$e){var C$i=C$e.orientation.m;C$p.Vec3.set(C$c[0],1,0,0),C$p.Vec3.set(C$c[1],0,1,0),C$p.Vec3.set(C$c[2],0,0,1),C$p.Vec3.set(C$c[3],C$i[0],C$i[1],C$i[2]),C$p.Vec3.set(C$c[4],C$i[3],C$i[4],C$i[5]),C$p.Vec3.set(C$c[5],C$i[6],C$i[7],C$i[8]);for(var C$n,C$r=0;C$r<3;++C$r)C$p.Vec3.cross(C$c[6+3*C$r],C$c[C$r],C$c[0]),C$p.Vec3.cross(C$c[6+3*C$r+1],C$c[C$r],C$c[1]),C$p.Vec3.cross(C$c[6+3*C$r+1],C$c[C$r],C$c[2]);C$p.Vec3.subtract(C$u,C$t.center,C$t.halfExtents),C$p.Vec3.add(C$_,C$t.center,C$t.halfExtents),C$i=C$u,C$t=C$_,C$n=C$l,C$p.Vec3.set(C$n[0],C$i.x,C$t.y,C$t.z),C$p.Vec3.set(C$n[1],C$i.x,C$t.y,C$i.z),C$p.Vec3.set(C$n[2],C$i.x,C$i.y,C$t.z),C$p.Vec3.set(C$n[3],C$i.x,C$i.y,C$i.z),C$p.Vec3.set(C$n[4],C$t.x,C$t.y,C$t.z),C$p.Vec3.set(C$n[5],C$t.x,C$t.y,C$i.z),C$p.Vec3.set(C$n[6],C$t.x,C$i.y,C$t.z),C$p.Vec3.set(C$n[7],C$t.x,C$i.y,C$i.z),C$At(C$e.center,C$e.halfExtents,C$c[3],C$c[4],C$c[5],C$h);for(var C$s=0;C$s<15;++C$s){var C$o=C$Ct(C$l,C$c[C$s]),C$a=C$Ct(C$h,C$c[C$s]);if(C$a[0]>C$o[1]||C$o[0]>C$a[1])return 0}return 1}}(),C$It=function(){for(var C$l=new Array(8),C$h=0,C$u=0,C$t=0;C$t<C$l.length;C$t++)C$l[C$t]=new C$p.Vec3(0,0,0);return function(C$t,C$e){for(var C$i,C$n=!1,C$r=0;C$r<C$e.planes.length;C$r++){if(-1===(C$i=C$St(C$t,C$e.planes[C$r])))return 0;1===C$i&&(C$n=!0)}if(!C$n)return 1;for(var C$s=0;C$s<C$e.vertices.length;C$s++)C$p.Vec3.subtract(C$l[C$s],C$e.vertices[C$s],C$t.center);for(var C$o=C$u=C$h=0;C$o<C$e.vertices.length;C$o++)C$l[C$o].x>C$t.halfExtents.x?C$h++:C$l[C$o].x<-C$t.halfExtents.x&&C$u++;if(C$h===C$e.vertices.length||C$u===C$e.vertices.length)return 0;for(var C$a=C$u=C$h=0;C$a<C$e.vertices.length;C$a++)C$l[C$a].y>C$t.halfExtents.y?C$h++:C$l[C$a].y<-C$t.halfExtents.y&&C$u++;if(C$h===C$e.vertices.length||C$u===C$e.vertices.length)return 0;for(var C$c=C$u=C$h=0;C$c<C$e.vertices.length;C$c++)C$l[C$c].z>C$t.halfExtents.z?C$h++:C$l[C$c].z<-C$t.halfExtents.z&&C$u++;return C$h===C$e.vertices.length||C$u===C$e.vertices.length?0:1}}(),C$Bt=(C$Et=new C$p.Vec3(0,0,0),C$Mt=new C$p.Mat3,function(C$t,C$e){var C$i=C$t.orientation.m,C$i=C$t.halfExtents.x*C$Rt(C$e.n,C$i[0],C$i[1],C$i[2])+C$t.halfExtents.y*C$Rt(C$e.n,C$i[3],C$i[4],C$i[5])+C$t.halfExtents.z*C$Rt(C$e.n,C$i[6],C$i[7],C$i[8]),C$t=C$p.Vec3.dot(C$e.n,C$t.center);return C$t+C$i<C$e.d?-1:C$t-C$i>C$e.d?0:1});function C$Rt(C$t,C$e,C$i,C$n){return Math.abs(C$t.x*C$e+C$t.y*C$i+C$t.z*C$n)}function C$Pt(C$t,C$e){for(var C$i=0;C$i<C$e.planes.length;C$i++)if(-1===C$Bt(C$t,C$e.planes[C$i]))return 0;return 1}function C$Dt(C$t,C$e){var C$i=C$p.Vec3.dot(C$e.n,C$t.center),C$t=C$t.radius*C$e.n.length();return C$i+C$t<C$e.d?-1:C$i-C$t>C$e.d?0:1}function C$Lt(C$t,C$e){for(var C$i=0;C$i<C$e.planes.length;C$i++)if(-1===C$Dt(C$t,C$e.planes[C$i]))return 0;return 1}function C$Vt(C$t,C$e){for(var C$i=0;C$i<6;C$i++){var C$n=C$e.planes[C$i],C$r=C$t.radius,C$s=C$t.center,C$o=C$n.n,C$n=C$n.d,C$a=C$p.Vec3.dot(C$o,C$s);if(C$a+C$r<C$n)return 0;if(!(C$n<C$a-C$r)){C$p.Vec3.add(C$kt,C$s,C$p.Vec3.multiplyScalar(C$kt,C$o,C$r));for(var C$c=0;C$c<6;C$c++)if(C$c!==C$i&&C$c!==C$i+C$Gt[C$i]){var C$l=C$e.planes[C$c];if(C$p.Vec3.dot(C$l.n,C$kt)<C$l.d)return 0}}}return 1}function C$Ot(C$t,C$e){var C$i=C$t.radius+C$e.radius;return C$p.Vec3.squaredDistance(C$t.center,C$e.center)<C$i*C$i}function C$Ft(C$t,C$e){return C$m.pt_point_aabb(C$zt,C$t.center,C$e),C$p.Vec3.squaredDistance(C$t.center,C$zt)<C$t.radius*C$t.radius}function C$Nt(C$t,C$e){return C$m.pt_point_obb(C$Ut,C$t.center,C$e),C$p.Vec3.squaredDistance(C$t.center,C$Ut)<C$t.radius*C$t.radius}var C$kt,C$Gt,C$zt,C$Ut,C$Wt=function(){for(var C$h=new Array(8),C$u=0,C$_=0,C$d=0,C$t=0;C$t<C$h.length;C$t++)C$h[C$t]=new C$p.Vec3(0,0,0);function C$f(C$t,C$e,C$i,C$n){return C$t.x*C$e+C$t.y*C$i+C$t.z*C$n}return function(C$t,C$e){for(var C$i,C$n=!1,C$r=0;C$r<C$e.planes.length;C$r++){if(-1===(C$i=C$Bt(C$t,C$e.planes[C$r])))return 0;1===C$i&&(C$n=!0)}if(!C$n)return 1;for(var C$s=0;C$s<C$e.vertices.length;C$s++)C$p.Vec3.subtract(C$h[C$s],C$e.vertices[C$s],C$t.center);C$d=C$_=0;for(var C$o=C$t.orientation.m,C$a=0;C$a<C$e.vertices.length;C$a++)(C$u=C$f(C$h[C$a],C$o[0],C$o[1],C$o[2]))>C$t.halfExtents.x?C$_++:C$u<-C$t.halfExtents.x&&C$d++;if(C$_===C$e.vertices.length||C$d===C$e.vertices.length)return 0;for(var C$c=C$d=C$_=0;C$c<C$e.vertices.length;C$c++)(C$u=C$f(C$h[C$c],C$o[3],C$o[4],C$o[5]))>C$t.halfExtents.y?C$_++:C$u<-C$t.halfExtents.y&&C$d++;if(C$_===C$e.vertices.length||C$d===C$e.vertices.length)return 0;for(var C$l=C$d=C$_=0;C$l<C$e.vertices.length;C$l++)(C$u=C$f(C$h[C$l],C$o[6],C$o[7],C$o[8]))>C$t.halfExtents.z?C$_++:C$u<-C$t.halfExtents.z&&C$d++;return C$_===C$e.vertices.length||C$d===C$e.vertices.length?0:1}}(),C$Ht=function(){for(var C$c=new Array(15),C$t=0;C$t<15;C$t++)C$c[C$t]=new C$p.Vec3(0,0,0);for(var C$l=new Array(8),C$h=new Array(8),C$e=0;C$e<8;C$e++)C$l[C$e]=new C$p.Vec3(0,0,0),C$h[C$e]=new C$p.Vec3(0,0,0);return function(C$t,C$e){var C$i=C$t.orientation.m,C$n=C$e.orientation.m;C$p.Vec3.set(C$c[0],C$i[0],C$i[1],C$i[2]),C$p.Vec3.set(C$c[1],C$i[3],C$i[4],C$i[5]),C$p.Vec3.set(C$c[2],C$i[6],C$i[7],C$i[8]),C$p.Vec3.set(C$c[3],C$n[0],C$n[1],C$n[2]),C$p.Vec3.set(C$c[4],C$n[3],C$n[4],C$n[5]),C$p.Vec3.set(C$c[5],C$n[6],C$n[7],C$n[8]);for(var C$r=0;C$r<3;++C$r)C$p.Vec3.cross(C$c[6+3*C$r],C$c[C$r],C$c[0]),C$p.Vec3.cross(C$c[6+3*C$r+1],C$c[C$r],C$c[1]),C$p.Vec3.cross(C$c[6+3*C$r+1],C$c[C$r],C$c[2]);C$At(C$t.center,C$t.halfExtents,C$c[0],C$c[1],C$c[2],C$l),C$At(C$e.center,C$e.halfExtents,C$c[3],C$c[4],C$c[5],C$h);for(var C$s=0;C$s<15;++C$s){var C$o=C$Ct(C$l,C$c[C$s]),C$a=C$Ct(C$h,C$c[C$s]);if(C$a[0]>C$o[1]||C$o[0]>C$a[1])return 0}return 1}}(),C$e=(C$kt=new C$p.Vec3(0,0,0),C$Gt=[1,-1,1,-1,1,-1],C$zt=new C$p.Vec3,C$Ut=new C$p.Vec3,{rayAabb:C$e,rayMesh:C$x,raycast:C$P,rayTriangle:C$t,ray_sphere:C$F,ray_aabb:C$bt,ray_obb:C$N,ray_plane:C$D,ray_triangle:C$xt,line_plane:C$L,line_triangle:C$V,line_quad:C$O,sphere_sphere:C$Ot,sphere_aabb:C$Ft,sphere_obb:C$Nt,sphere_plane:C$Dt,sphere_frustum:C$Lt,sphere_frustum_accurate:C$Vt,aabb_aabb:C$k,aabb_obb:C$y,aabb_plane:C$St,aabb_frustum:C$Tt,aabb_frustum_accurate:C$It,obb_obb:C$Ht,obb_plane:C$Bt,obb_frustum:C$Pt,obb_frustum_accurate:C$Wt,obb_point:C$wt,resolve:function(C$t,C$e,C$i){void 0===C$i&&(C$i=null);var C$n=C$t._type,C$r=C$e._type,C$s=this[C$n|C$r];return C$n<C$r?C$s(C$t,C$e,C$i):C$s(C$e,C$t,C$i)}});C$e[C$i.default.SHAPE_RAY|C$i.default.SHAPE_SPHERE]=C$F,C$e[C$i.default.SHAPE_RAY|C$i.default.SHAPE_AABB]=C$bt,C$e[C$i.default.SHAPE_RAY|C$i.default.SHAPE_OBB]=C$N,C$e[C$i.default.SHAPE_RAY|C$i.default.SHAPE_PLANE]=C$D,C$e[C$i.default.SHAPE_RAY|C$i.default.SHAPE_TRIANGLE]=C$xt,C$e[C$i.default.SHAPE_LINE|C$i.default.SHAPE_PLANE]=C$L,C$e[C$i.default.SHAPE_LINE|C$i.default.SHAPE_TRIANGLE]=C$V,C$e[C$i.default.SHAPE_SPHERE]=C$Ot,C$e[C$i.default.SHAPE_SPHERE|C$i.default.SHAPE_AABB]=C$Ft,C$e[C$i.default.SHAPE_SPHERE|C$i.default.SHAPE_OBB]=C$Nt,C$e[C$i.default.SHAPE_SPHERE|C$i.default.SHAPE_PLANE]=C$Dt,C$e[C$i.default.SHAPE_SPHERE|C$i.default.SHAPE_FRUSTUM]=C$Lt,C$e[C$i.default.SHAPE_SPHERE|C$i.default.SHAPE_FRUSTUM_ACCURATE]=C$Vt,C$e[C$i.default.SHAPE_AABB]=C$k,C$e[C$i.default.SHAPE_AABB|C$i.default.SHAPE_OBB]=C$y,C$e[C$i.default.SHAPE_AABB|C$i.default.SHAPE_PLANE]=C$St,C$e[C$i.default.SHAPE_AABB|C$i.default.SHAPE_FRUSTUM]=C$Tt,C$e[C$i.default.SHAPE_AABB|C$i.default.SHAPE_FRUSTUM_ACCURATE]=C$It,C$e[C$i.default.SHAPE_OBB]=C$Ht,C$e[C$i.default.SHAPE_OBB|C$i.default.SHAPE_PLANE]=C$Bt,C$e[C$i.default.SHAPE_OBB|C$i.default.SHAPE_FRUSTUM]=C$Pt,C$e[C$i.default.SHAPE_OBB|C$i.default.SHAPE_FRUSTUM_ACCURATE]=C$Wt,C$h.default=C$e,C$l.exports=C$h.default},{"../../renderer/gfx":312,"../../renderer/memop/recycle-pool":327,"../value-types":279,"./aabb":119,"./distance":120,"./enums":121,"./ray":128,"./triangle":130}],125:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$o=C$t("../value-types"),C$a=(C$t=C$t("./enums"))&&C$t.__esModule?C$t:{default:C$t};function C$c(C$t,C$e,C$i,C$n,C$r,C$s){void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),void 0===C$r&&(C$r=0),void 0===C$s&&(C$s=-1),this.s=void 0,this.e=void 0,this._type=void 0,this._type=C$a.default.SHAPE_LINE,this.s=new C$o.Vec3(C$t,C$e,C$i),this.e=new C$o.Vec3(C$n,C$r,C$s)}C$c.create=function(C$t,C$e,C$i,C$n,C$r,C$s){return new C$c(C$t,C$e,C$i,C$n,C$r,C$s)},C$c.clone=function(C$t){return new C$c(C$t.s.x,C$t.s.y,C$t.s.z,C$t.e.x,C$t.e.y,C$t.e.z)},C$c.copy=function(C$t,C$e){return C$o.Vec3.copy(C$t.s,C$e.s),C$o.Vec3.copy(C$t.e,C$e.e),C$t},C$c.fromPoints=function(C$t,C$e,C$i){return C$o.Vec3.copy(C$t.s,C$e),C$o.Vec3.copy(C$t.e,C$i),C$t},C$c.set=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){return C$t.s.x=C$e,C$t.s.y=C$i,C$t.s.z=C$n,C$t.e.x=C$r,C$t.e.y=C$s,C$t.e.z=C$o,C$t},C$c.len=function(C$t){return C$o.Vec3.distance(C$t.s,C$t.e)},C$c.prototype.length=function(){return C$o.Vec3.distance(this.s,this.e)},C$i.default=C$c,C$e.exports=C$i.default},{"../value-types":279,"./enums":121}],126:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$m=C$t("../value-types"),C$y=(C$t=C$t("./enums"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}var C$r,C$s,C$o=new C$m.Vec3,C$c=new C$m.Vec3,C$a=new C$m.Mat3,C$t=(C$p.create=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f){return new C$p(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f)},C$p.clone=function(C$t){var C$e=C$t.orientation.m;return new C$p(C$t.center.x,C$t.center.y,C$t.center.z,C$t.halfExtents.x,C$t.halfExtents.y,C$t.halfExtents.z,C$e[0],C$e[1],C$e[2],C$e[3],C$e[4],C$e[5],C$e[6],C$e[7],C$e[8])},C$p.copy=function(C$t,C$e){return C$m.Vec3.copy(C$t.center,C$e.center),C$m.Vec3.copy(C$t.halfExtents,C$e.halfExtents),C$m.Mat3.copy(C$t.orientation,C$e.orientation),C$t},C$p.fromPoints=function(C$t,C$e,C$i){return C$m.Vec3.multiplyScalar(C$t.center,C$m.Vec3.add(C$o,C$e,C$i),.5),C$m.Vec3.multiplyScalar(C$t.halfExtents,C$m.Vec3.subtract(C$c,C$i,C$e),.5),C$m.Mat3.identity(C$t.orientation),C$t},C$p.set=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f,C$p){return C$m.Vec3.set(C$t.center,C$e,C$i,C$n),C$m.Vec3.set(C$t.halfExtents,C$r,C$s,C$o),C$m.Mat3.set(C$t.orientation,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f,C$p),C$t},C$t=C$p,(C$s=[{key:"type",get:function(){return this._type}}])&&C$n(C$t.prototype,C$s),C$r&&C$n(C$t,C$r),(C$s=C$p.prototype).getBoundary=function(C$t,C$e){var C$i,C$n,C$r,C$s;C$i=C$o,C$n=this.halfExtents,C$r=this.orientation,C$s=C$a.m,C$r=C$r.m,C$s[0]=Math.abs(C$r[0]),C$s[1]=Math.abs(C$r[1]),C$s[2]=Math.abs(C$r[2]),C$s[3]=Math.abs(C$r[3]),C$s[4]=Math.abs(C$r[4]),C$s[5]=Math.abs(C$r[5]),C$s[6]=Math.abs(C$r[6]),C$s[7]=Math.abs(C$r[7]),C$s[8]=Math.abs(C$r[8]),C$m.Vec3.transformMat3(C$i,C$n,C$a),C$m.Vec3.subtract(C$t,this.center,C$o),C$m.Vec3.add(C$e,this.center,C$o)},C$s.transform=function(C$t,C$e,C$i,C$n,C$r){C$m.Vec3.transformMat4(C$r.center,this.center,C$t),C$m.Mat3.fromQuat(C$r.orientation,C$i),C$m.Vec3.multiply(C$r.halfExtents,this.halfExtents,C$n)},C$s.translateAndRotate=function(C$t,C$e,C$i){C$m.Vec3.transformMat4(C$i.center,this.center,C$t),C$m.Mat3.fromQuat(C$i.orientation,C$e)},C$s.setScale=function(C$t,C$e){C$m.Vec3.multiply(C$e.halfExtents,this.halfExtents,C$t)},C$p);function C$p(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f){void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=1),void 0===C$r&&(C$r=1),void 0===C$s&&(C$s=1),void 0===C$o&&(C$o=1),void 0===C$a&&(C$a=0),void 0===C$c&&(C$c=0),void 0===C$l&&(C$l=0),void 0===C$h&&(C$h=1),void 0===C$u&&(C$u=0),void 0===C$_&&(C$_=0),void 0===C$d&&(C$d=0),void 0===C$f&&(C$f=1),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=C$y.default.SHAPE_OBB,this.center=new C$m.Vec3(C$t,C$e,C$i),this.halfExtents=new C$m.Vec3(C$n,C$r,C$s),this.orientation=new C$m.Mat3(C$o,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f)}C$i.default=C$t,C$e.exports=C$i.default},{"../value-types":279,"./enums":121}],127:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$r=C$t("../value-types"),C$s=(C$t=C$t("./enums"))&&C$t.__esModule?C$t:{default:C$t};var C$o=new C$r.Vec3(0,0,0),C$a=new C$r.Vec3(0,0,0),C$n=cc.mat4(),C$c=cc.v4();function C$l(C$t,C$e,C$i,C$n){void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=1),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),this.n=void 0,this.d=void 0,this._type=void 0,this._type=C$s.default.SHAPE_PLANE,this.n=new C$r.Vec3(C$t,C$e,C$i),this.d=C$n}C$l.create=function(C$t,C$e,C$i,C$n){return new C$l(C$t,C$e,C$i,C$n)},C$l.clone=function(C$t){return new C$l(C$t.n.x,C$t.n.y,C$t.n.z,C$t.d)},C$l.copy=function(C$t,C$e){return C$r.Vec3.copy(C$t.n,C$e.n),C$t.d=C$e.d,C$t},C$l.fromPoints=function(C$t,C$e,C$i,C$n){return C$r.Vec3.subtract(C$o,C$i,C$e),C$r.Vec3.subtract(C$a,C$n,C$e),C$r.Vec3.normalize(C$t.n,C$r.Vec3.cross(C$t.n,C$o,C$a)),C$t.d=C$r.Vec3.dot(C$t.n,C$e),C$t},C$l.set=function(C$t,C$e,C$i,C$n,C$r){return C$t.n.x=C$e,C$t.n.y=C$i,C$t.n.z=C$n,C$t.d=C$r,C$t},C$l.fromNormalAndPoint=function(C$t,C$e,C$i){return C$r.Vec3.copy(C$t.n,C$e),C$t.d=C$r.Vec3.dot(C$e,C$i),C$t},C$l.normalize=function(C$t,C$e){var C$i=C$e.n.len();return C$r.Vec3.normalize(C$t.n,C$e.n),0<C$i&&(C$t.d=C$e.d/C$i),C$t},C$l.prototype.transform=function(C$t){C$r.Mat4.invert(C$n,C$t),C$r.Mat4.transpose(C$n,C$n),C$r.Vec4.set(C$c,this.n.x,this.n.y,this.n.z,this.d),C$r.Vec4.transformMat4(C$c,C$c,C$n),C$r.Vec3.set(this.n,C$c.x,C$c.y,C$c.z),this.d=C$c.w},C$i.default=C$l,C$e.exports=C$i.default},{"../value-types":279,"./enums":121}],128:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$o=C$t("../value-types"),C$a=(C$t=C$t("./enums"))&&C$t.__esModule?C$t:{default:C$t};function C$c(C$t,C$e,C$i,C$n,C$r,C$s){void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),void 0===C$r&&(C$r=0),void 0===C$s&&(C$s=-1),this.o=void 0,this.d=void 0,this._type=void 0,this._type=C$a.default.SHAPE_RAY,this.o=new C$o.Vec3(C$t,C$e,C$i),this.d=new C$o.Vec3(C$n,C$r,C$s)}C$c.create=function(C$t,C$e,C$i,C$n,C$r,C$s){return new C$c(C$t=void 0===C$t?0:C$t,C$e=void 0===C$e?0:C$e,C$i=void 0===C$i?0:C$i,C$n=void 0===C$n?0:C$n,C$r=void 0===C$r?0:C$r,C$s=void 0===C$s?1:C$s)},C$c.clone=function(C$t){return new C$c(C$t.o.x,C$t.o.y,C$t.o.z,C$t.d.x,C$t.d.y,C$t.d.z)},C$c.copy=function(C$t,C$e){return C$o.Vec3.copy(C$t.o,C$e.o),C$o.Vec3.copy(C$t.d,C$e.d),C$t},C$c.fromPoints=function(C$t,C$e,C$i){return C$o.Vec3.copy(C$t.o,C$e),C$o.Vec3.normalize(C$t.d,C$o.Vec3.subtract(C$t.d,C$i,C$e)),C$t},C$c.set=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){return C$t.o.x=C$e,C$t.o.y=C$i,C$t.o.z=C$n,C$t.d.x=C$r,C$t.d.y=C$s,C$t.d.z=C$o,C$t},C$c.prototype.computeHit=function(C$t,C$e){C$o.Vec3.normalize(C$t,this.d),C$o.Vec3.scaleAndAdd(C$t,this.o,C$t,C$e)},C$i.default=C$c,C$e.exports=C$i.default},{"../value-types":279,"./enums":121}],129:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$s=C$t("../value-types"),C$r=(C$t=C$t("./enums"))&&C$t.__esModule?C$t:{default:C$t};var C$n=new C$s.Vec3;function C$o(C$t,C$e,C$i,C$n){void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=1),this.center=void 0,this.radius=void 0,this._type=void 0,this._type=C$r.default.SHAPE_SPHERE,this.center=new C$s.Vec3(C$t,C$e,C$i),this.radius=C$n}C$o.create=function(C$t,C$e,C$i,C$n){return new C$o(C$t,C$e,C$i,C$n)},C$o.clone=function(C$t){return new C$o(C$t.center.x,C$t.center.y,C$t.center.z,C$t.radius)},C$o.copy=function(C$t,C$e){return C$s.Vec3.copy(C$t.center,C$e.center),C$t.radius=C$e.radius,C$t},C$o.fromPoints=function(C$t,C$e,C$i){return C$s.Vec3.multiplyScalar(C$t.center,C$s.Vec3.add(C$n,C$e,C$i),.5),C$t.radius=.5*C$s.Vec3.subtract(C$n,C$i,C$e).len(),C$t},C$o.set=function(C$t,C$e,C$i,C$n,C$r){return C$t.center.x=C$e,C$t.center.y=C$i,C$t.center.z=C$n,C$t.radius=C$r,C$t},(C$t=C$o.prototype).clone=function(){return C$o.clone(this)},C$t.copy=function(C$t){return C$o.copy(this,C$t)},C$t.getBoundary=function(C$t,C$e){C$s.Vec3.set(C$t,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),C$s.Vec3.set(C$e,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)},C$t.transform=function(C$t,C$e,C$i,C$n,C$r){C$s.Vec3.transformMat4(C$r.center,this.center,C$t),C$r.radius=this.radius*C$n.maxAxis()},C$t.translateAndRotate=function(C$t,C$e,C$i){C$s.Vec3.transformMat4(C$i.center,this.center,C$t)},C$t.setScale=function(C$t,C$e){C$e.radius=this.radius*C$t.maxAxis()},C$i.default=C$o,C$e.exports=C$i.default},{"../value-types":279,"./enums":121}],130:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$l=C$n(C$t("../value-types/vec3")),C$h=C$n(C$t("./enums"));function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$u(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this.a=new C$l.default(C$t,C$e,C$i),this.b=new C$l.default(C$n,C$r,C$s),this.c=new C$l.default(C$o,C$a,C$c),this._type=C$h.default.SHAPE_TRIANGLE}C$u.create=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){return new C$u(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c)},C$u.clone=function(C$t){return new C$u(C$t.a.x,C$t.a.y,C$t.a.z,C$t.b.x,C$t.b.y,C$t.b.z,C$t.c.x,C$t.c.y,C$t.c.z)},C$u.copy=function(C$t,C$e){return C$l.default.copy(C$t.a,C$e.a),C$l.default.copy(C$t.b,C$e.b),C$l.default.copy(C$t.c,C$e.c),C$t},C$u.fromPoints=function(C$t,C$e,C$i,C$n){return C$l.default.copy(C$t.a,C$e),C$l.default.copy(C$t.b,C$i),C$l.default.copy(C$t.c,C$n),C$t},C$u.set=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l){return C$t.a.x=C$e,C$t.a.y=C$i,C$t.a.z=C$n,C$t.b.x=C$r,C$t.b.y=C$s,C$t.b.z=C$o,C$t.c.x=C$a,C$t.c.y=C$c,C$t.c.z=C$l,C$t},C$i.default=C$u,C$e.exports=C$i.default},{"../value-types/vec3":289,"./enums":121}],131:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../components/CCRenderComponent"),C$r=C$t("../assets/material/CCMaterial"),C$s=C$t("./types"),C$o=C$s.LineCap,C$a=C$s.LineJoin,C$c=cc.Class({name:"cc.Graphics",extends:C$n,editor:!1,ctor:function(){this._impl=new C$c._Impl(this)},properties:{_lineWidth:1,_strokeColor:cc.Color.BLACK,_lineJoin:C$a.MITER,_lineCap:C$o.BUTT,_fillColor:cc.Color.WHITE,_miterLimit:10,lineWidth:{get:function(){return this._lineWidth},set:function(C$t){this._lineWidth=C$t,this._impl.lineWidth=C$t}},lineJoin:{get:function(){return this._lineJoin},set:function(C$t){this._lineJoin=C$t,this._impl.lineJoin=C$t},type:C$a},lineCap:{get:function(){return this._lineCap},set:function(C$t){this._lineCap=C$t,this._impl.lineCap=C$t},type:C$o},strokeColor:{get:function(){return this._strokeColor},set:function(C$t){this._impl.strokeColor=this._strokeColor=cc.color(C$t)}},fillColor:{get:function(){return this._fillColor},set:function(C$t){this._impl.fillColor=this._fillColor=cc.color(C$t)}},miterLimit:{get:function(){return this._miterLimit},set:function(C$t){this._miterLimit=C$t,this._impl.miterLimit=C$t}}},statics:{LineJoin:C$a,LineCap:C$o},onRestore:function(){this._impl||(this._impl=new C$c._Impl(this))},onDestroy:function(){this.clear(!0),this._super(),this._impl=null},_getDefaultMaterial:function(){return C$r.getBuiltinMaterial("2d-base")},_updateMaterial:function(){var C$t=this._materials[0];C$t&&C$t.define("CC_USE_MODEL",!0)},moveTo:function(C$t,C$e){C$t instanceof cc.Vec2?cc.warn("[moveTo] : Can not pass Vec2 as [x, y] value, please check it."):this._impl.moveTo(C$t,C$e)},lineTo:function(C$t,C$e){C$t instanceof cc.Vec2?cc.warn("[moveTo] : Can not pass Vec2 as [x, y] value, please check it."):this._impl.lineTo(C$t,C$e)},bezierCurveTo:function(C$t,C$e,C$i,C$n,C$r,C$s){this._impl.bezierCurveTo(C$t,C$e,C$i,C$n,C$r,C$s)},quadraticCurveTo:function(C$t,C$e,C$i,C$n){this._impl.quadraticCurveTo(C$t,C$e,C$i,C$n)},arc:function(C$t,C$e,C$i,C$n,C$r,C$s){this._impl.arc(C$t,C$e,C$i,C$n,C$r,C$s)},ellipse:function(C$t,C$e,C$i,C$n){this._impl.ellipse(C$t,C$e,C$i,C$n)},circle:function(C$t,C$e,C$i){this._impl.circle(C$t,C$e,C$i)},rect:function(C$t,C$e,C$i,C$n){this._impl.rect(C$t,C$e,C$i,C$n)},roundRect:function(C$t,C$e,C$i,C$n,C$r){this._impl.roundRect(C$t,C$e,C$i,C$n,C$r)},fillRect:function(C$t,C$e,C$i,C$n){this.rect(C$t,C$e,C$i,C$n),this.fill()},clear:function(C$t){this._impl.clear(C$t),this._assembler&&this._assembler.clear(C$t)},close:function(){this._impl.close()},stroke:function(){this._assembler||this._resetAssembler(),this._assembler.stroke(this)},fill:function(){this._assembler||this._resetAssembler(),this._assembler.fill(this)}});cc.Graphics=C$e.exports=C$c,cc.Graphics.Types=C$s,cc.Graphics.Helper=C$t("./helper")},{"../assets/material/CCMaterial":53,"../components/CCRenderComponent":89,"./helper":132,"./types":134}],132:[function(C$t,C$e,C$i){"use strict";var C$b=C$t("./types").PointFlags,C$v=Math.PI,C$x=Math.min,C$T=Math.max,C$A=Math.cos,C$C=Math.sin,C$S=Math.abs,C$a=Math.sign,C$c=.5522847493;C$e.exports={arc:function(C$h,C$u,C$_,C$t,C$d,C$e,C$f){var C$i,C$n,C$r,C$s,C$o,C$a,C$c=0,C$l=0,C$p=0,C$m=0,C$y=0,C$g=0,C$c=C$e-C$d;if(C$f=C$f||!1)if(C$S(C$c)>=2*C$v)C$c=2*C$v;else for(;C$c<0;)C$c+=2*C$v;else if(C$S(C$c)>=2*C$v)C$c=2*-C$v;else for(;0<C$c;)C$c-=2*C$v;for(C$a=0|C$T(1,C$x(C$S(C$c)/(.5*C$v)+.5,5)),C$l=C$S(4/3*(1-C$A(C$e=C$c/C$a/2))/C$C(C$e)),C$f||(C$l=-C$l),C$o=0;C$o<=C$a;C$o++)C$i=C$u+(C$s=C$A(C$r=C$d+C$c*(C$o/C$a)))*C$t,C$n=C$_+(C$r=C$C(C$r))*C$t,C$r=-C$r*C$t*C$l,C$s=C$s*C$t*C$l,0===C$o?C$h.moveTo(C$i,C$n):C$h.bezierCurveTo(C$p+C$y,C$m+C$g,C$i-C$r,C$n-C$s,C$i,C$n),C$p=C$i,C$m=C$n,C$y=C$r,C$g=C$s},ellipse:function(C$t,C$e,C$i,C$n,C$r){C$t.moveTo(C$e-C$n,C$i),C$t.bezierCurveTo(C$e-C$n,C$i+C$r*C$c,C$e-C$n*C$c,C$i+C$r,C$e,C$i+C$r),C$t.bezierCurveTo(C$e+C$n*C$c,C$i+C$r,C$e+C$n,C$i+C$r*C$c,C$e+C$n,C$i),C$t.bezierCurveTo(C$e+C$n,C$i-C$r*C$c,C$e+C$n*C$c,C$i-C$r,C$e,C$i-C$r),C$t.bezierCurveTo(C$e-C$n*C$c,C$i-C$r,C$e-C$n,C$i-C$r*C$c,C$e-C$n,C$i),C$t.close()},roundRect:function(C$t,C$e,C$i,C$n,C$r,C$s){var C$o;C$s<.1?C$t.rect(C$e,C$i,C$n,C$r):(C$o=C$x(C$s,.5*C$S(C$n))*C$a(C$n),C$s=C$x(C$s,.5*C$S(C$r))*C$a(C$r),C$t.moveTo(C$e,C$i+C$s),C$t.lineTo(C$e,C$i+C$r-C$s),C$t.bezierCurveTo(C$e,C$i+C$r-C$s*(1-C$c),C$e+C$o*(1-C$c),C$i+C$r,C$e+C$o,C$i+C$r),C$t.lineTo(C$e+C$n-C$o,C$i+C$r),C$t.bezierCurveTo(C$e+C$n-C$o*(1-C$c),C$i+C$r,C$e+C$n,C$i+C$r-C$s*(1-C$c),C$e+C$n,C$i+C$r-C$s),C$t.lineTo(C$e+C$n,C$i+C$s),C$t.bezierCurveTo(C$e+C$n,C$i+C$s*(1-C$c),C$e+C$n-C$o*(1-C$c),C$i,C$e+C$n-C$o,C$i),C$t.lineTo(C$e+C$o,C$i),C$t.bezierCurveTo(C$e+C$o*(1-C$c),C$i,C$e,C$i+C$s*(1-C$c),C$e,C$i+C$s),C$t.close())},tesselateBezier:function C$h(C$t,C$e,C$u,C$i,C$n,C$r,C$s,C$o,C$a,C$_,C$c){var C$d,C$f,C$p,C$m,C$y,C$g,C$v,C$x,C$l;10<C$_||(C$y=.5*(C$r+C$o),C$g=.5*(C$s+C$a),C$v=.5*((C$d=.5*(C$e+C$i))+(C$p=.5*(C$i+C$r))),C$x=.5*((C$f=.5*(C$u+C$n))+(C$m=.5*(C$n+C$s))),((C$l=C$S((C$i-C$o)*(C$i=C$a-C$u)-(C$n-C$a)*(C$n=C$o-C$e)))+(C$r=C$S((C$r-C$o)*C$i-(C$s-C$a)*C$n)))*(C$l+C$r)<C$t._tessTol*(C$n*C$n+C$i*C$i)?C$t._addPoint(C$o,C$a,0===C$c?C$c|C$b.PT_BEVEL:C$c):(C$h(C$t,C$e,C$u,C$d,C$f,C$v,C$x,C$l=.5*(C$v+(C$s=.5*(C$p+C$y))),C$n=.5*(C$x+(C$r=.5*(C$m+C$g))),C$_+1,0),C$h(C$t,C$l,C$n,C$s,C$r,C$y,C$g,C$o,C$a,C$_+1,C$c)))}}},{"./types":134}],133:[function(C$t,C$e,C$i){"use strict";C$t("./graphics")},{"./graphics":131}],134:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Enum({BUTT:0,ROUND:1,SQUARE:2}),C$r=cc.Enum({BEVEL:0,ROUND:1,MITER:2}),C$s=cc.Enum({PT_CORNER:1,PT_LEFT:2,PT_BEVEL:4,PT_INNERBEVEL:8});C$e.exports={LineCap:C$n,LineJoin:C$r,PointFlags:C$s}},{}],135:[function(C$t,C$e,C$i){"use strict";C$t("./platform"),C$t("./assets"),C$t("./CCNode"),C$t("./CCPrivateNode"),C$t("./CCScene"),C$t("./components"),C$t("./graphics"),C$t("./collider"),C$t("./collider/CCIntersection"),C$t("./physics"),C$t("./camera/CCCamera"),C$t("./geom-utils"),C$t("./mesh"),C$t("./3d"),C$t("./base-ui/CCWidgetManager")},{"./3d":void 0,"./CCNode":30,"./CCPrivateNode":31,"./CCScene":32,"./assets":51,"./base-ui/CCWidgetManager":62,"./camera/CCCamera":63,"./collider":71,"./collider/CCIntersection":69,"./components":107,"./geom-utils":123,"./graphics":133,"./mesh":158,"./physics":173,"./platform":206}],136:[function(C$t,C$i,C$a){"use strict";var C$r=C$t("../platform/js"),C$n=C$t("./pipeline"),C$c=C$t("./loading-items"),C$_=C$t("./asset-loader"),C$d=C$t("./downloader"),C$f=C$t("./loader"),C$p=C$t("./asset-table"),C$u=C$t("../platform/utils").callInNextTick,C$m=C$t("./auto-release-utils"),C$y=C$t("./released-asset-checker"),C$o=Object.create(null);C$o.assets=new C$p,C$o.internal=new C$p;var C$s={url:null,raw:!1};function C$g(C$t){var C$e,C$i;if("object"==typeof C$t){if((C$i=C$t).url)return C$i;C$e=C$t.uuid}else C$i={},C$e=C$t;return C$t=C$i.type?"uuid"===C$i.type:cc.AssetLibrary._uuidInSettings(C$e),cc.AssetLibrary._getAssetInfoInRuntime(C$e,C$s),C$i.url=C$t?C$s.url:C$e,C$s.url&&"uuid"===C$i.type&&C$s.raw?(C$i.type=null,C$i.isRawAsset=!0):C$t||(C$i.isRawAsset=!0),C$i}var C$l=[],C$h=[];function C$e(){var C$t=new C$_,C$e=new C$d,C$i=new C$f;C$n.call(this,[C$t,C$e,C$i]),this.assetLoader=C$t,this.md5Pipe=null,this.downloader=C$e,this.loader=C$i,this.onProgress=null,this._autoReleaseSetting=C$r.createMap(!0),this._releasedAssetChecker_DEBUG=new C$y}C$r.extend(C$e,C$n);C$t=C$e.prototype;C$t.init=function(C$t){var C$e=this;C$t.on(cc.Director.EVENT_AFTER_UPDATE,function(){C$e._releasedAssetChecker_DEBUG.checkCouldRelease(C$e._cache)})},C$t.getXMLHttpRequest=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},C$t.addDownloadHandlers=function(C$t){this.downloader.addHandlers(C$t)},C$t.addLoadHandlers=function(C$t){this.loader.addHandlers(C$t)},C$t.load=function(C$t,C$e,C$n){void 0===C$n&&(C$n=C$e,C$e=this.onProgress||null);var C$r,C$s=this,C$o=!1;C$t instanceof Array||(C$t=C$t?(C$o=!0,[C$t]):[]);for(var C$i=C$l.length=0;C$i<C$t.length;++C$i){var C$a=C$t[C$i];C$a&&C$a.id&&(cc.warnID(4920,C$a.id),C$a.uuid||C$a.url||(C$a.url=C$a.id)),((C$r=C$g(C$a)).url||C$r.uuid)&&(C$a=this._cache[C$r.url],C$l.push(C$a||C$r))}C$e=C$c.create(this,C$e,function(C$e,C$i){C$u(function(){var C$t;C$n&&(C$o?(C$t=C$r.url,C$n.call(C$s,C$e,C$i.getContent(C$t))):C$n.call(C$s,C$e,C$i),C$n=null),C$i.destroy()})});C$c.initQueueDeps(C$e),C$e.append(C$l),C$l.length=0},C$t.flowInDeps=function(C$i,C$t,C$n){for(var C$e=C$h.length=0;C$e<C$t.length;++C$e){var C$r,C$s=C$g(C$t[C$e]);(C$s.url||C$s.uuid)&&((C$r=this._cache[C$s.url])?C$h.push(C$r):C$h.push(C$s))}var C$o=C$c.create(this,C$i?function(C$t,C$e,C$i){this._ownerQueue&&this._ownerQueue.onProgress&&this._ownerQueue._childOnProgress(C$i)}:null,function(C$t,C$e){C$n(C$t,C$e),C$i&&C$i.deps&&(C$i.deps.length=0),C$e.destroy()}),C$a=(C$i&&(C$a=C$c.getQueue(C$i),C$o._ownerQueue=C$a._ownerQueue||C$a),C$o.append(C$h,C$i));return C$h.length=0,C$a},C$t._assetTables=C$o,C$t._getResUuid=function(C$t,C$e,C$i,C$n){C$i=C$o[C$i=C$i||"assets"];if(!C$t||!C$i)return null;var C$r,C$s=C$t.indexOf("?"),C$s=(-1!==C$s&&(C$t=C$t.substr(0,C$s)),C$i.getUuid(C$t,C$e));return C$s||(C$r=cc.path.extname(C$t))&&(C$t=C$t.slice(0,-C$r.length),(C$s=C$i.getUuid(C$t,C$e))&&!C$n&&cc.warnID(4901,C$t,C$r)),C$s},C$t._getReferenceKey=function(C$t){var C$e;return"object"==typeof C$t?C$e=C$t._uuid||null:"string"==typeof C$t&&(C$e=this._getResUuid(C$t,null,null,!0)||C$t),C$e?(cc.AssetLibrary._getAssetInfoInRuntime(C$e,C$s),this._cache[C$s.url]?C$s.url:C$e):(cc.warnID(4800,C$t),C$e)},C$t._urlNotFound=function(C$e,C$i,C$n){C$u(function(){C$e=cc.url.normalize(C$e);var C$t=(C$i?C$r.getClassName(C$i):"Asset")+' in "resources/'+C$e+'" does not exist.';C$n&&C$n(new Error(C$t),[])})},C$t._parseLoadResArgs=function(C$t,C$e,C$i){var C$n;return void 0===C$i&&(C$n=C$t instanceof Array||C$r.isChildClassOf(C$t,cc.RawAsset),C$e?(C$i=C$e,C$n&&(C$e=this.onProgress||null)):void 0!==C$e||C$n||(C$i=C$t,C$e=this.onProgress||null,C$t=null),void 0===C$e||C$n||(C$e=C$t,C$t=null)),{type:C$t,onProgress:C$e,onComplete:C$i}},C$t.loadRes=function(C$t,C$e,C$i,C$n,C$r){5!==arguments.length&&(C$r=C$n,C$n=C$i,C$i="assets");var C$s=this._parseLoadResArgs(C$e,C$n,C$r),C$o=(C$e=C$s.type,C$n=C$s.onProgress,C$r=C$s.onComplete,this),C$a=C$o._getResUuid(C$t,C$e,C$i);C$a?this.load({type:"uuid",uuid:C$a},C$n,function(C$t,C$e){C$e&&C$o.setAutoReleaseRecursively(C$a,!1),C$r&&C$r(C$t,C$e)}):C$o._urlNotFound(C$t,C$e,C$r)},C$t._loadResUuids=function(C$t,C$e,C$a,C$c){var C$l,C$h;0<C$t.length?(C$l=this,C$h=C$t.map(function(C$t){return{type:"uuid",uuid:C$t}}),this.load(C$h,C$e,function(C$t,C$e){if(C$a){for(var C$i=[],C$n=C$c&&[],C$r=0;C$r<C$h.length;++C$r){var C$s=C$h[C$r].uuid,C$o=this._getReferenceKey(C$s),C$o=C$e.getContent(C$o);C$o&&(C$l.setAutoReleaseRecursively(C$s,!1),C$i.push(C$o),C$n&&C$n.push(C$c[C$r]))}C$c?C$a(C$t,C$i,C$n):C$a(C$t,C$i)}})):C$a&&C$u(function(){C$c?C$a(null,[],[]):C$a(null,[])})},C$t.loadResArray=function(C$t,C$e,C$i,C$n,C$r){5!==arguments.length&&(C$r=C$n,C$n=C$i,C$i="assets");for(var C$s=this._parseLoadResArgs(C$e,C$n,C$r),C$o=(C$e=C$s.type,C$n=C$s.onProgress,C$r=C$s.onComplete,[]),C$h=C$e instanceof Array,C$a=0;C$a<C$t.length;C$a++){var C$c=C$t[C$a],C$l=C$h?C$e[C$a]:C$e,C$u=this._getResUuid(C$c,C$l,C$i);if(!C$u)return void this._urlNotFound(C$c,C$l,C$r);C$o.push(C$u)}this._loadResUuids(C$o,C$n,C$r)},C$t.loadResDir=function(C$t,C$e,C$i,C$n,C$r){var C$s;5!==arguments.length&&(C$r=C$n,C$n=C$i,C$i="assets"),C$o[C$i]&&(C$e=(C$s=this._parseLoadResArgs(C$e,C$n,C$r)).type,C$n=C$s.onProgress,C$r=C$s.onComplete,C$i=C$o[C$i].getUuidArray(C$t,C$e,C$s=[]),this._loadResUuids(C$i,C$n,C$r,C$s))},C$t.getRes=function(C$t,C$e){if(!(C$i=this._cache[C$t])){C$t=this._getResUuid(C$t,C$e,null,!0);if(!C$t)return null;var C$e=this._getReferenceKey(C$t),C$i=this._cache[C$e]}return(C$i=C$i&&C$i.alias?C$i.alias:C$i)&&C$i.complete?C$i.content:null},C$t.getResCount=function(){return Object.keys(this._cache).length},C$t.getDependsRecursively=function(C$t){var C$e;return C$t?(C$t=this._getReferenceKey(C$t),(C$e=C$m.getDependsRecursively(C$t)).push(C$t),C$e):[]},C$t.release=function(C$t){var C$e,C$i,C$n;if(Array.isArray(C$t))for(var C$r=0;C$r<C$t.length;C$r++){var C$s=C$t[C$r];this.release(C$s)}else C$t&&((C$e=this._getReferenceKey(C$t))&&C$e in cc.AssetLibrary.getBuiltinDeps()||((C$i=this.getItem(C$e))&&(C$n=this.removeItem(C$e),C$t=C$i.content,C$n&&this._releasedAssetChecker_DEBUG.setReleased(C$i,C$e)),C$t instanceof cc.Asset&&((C$n=C$t.nativeUrl)&&this.release(C$n),C$t.destroy())))},C$t.releaseAsset=function(C$t){C$t=C$t._uuid;C$t&&this.release(C$t)},C$t.releaseRes=function(C$t,C$e,C$i){C$e=this._getResUuid(C$t,C$e,C$i);C$e?this.release(C$e):cc.errorID(4914,C$t)},C$t.releaseResDir=function(C$t,C$e,C$i){if(C$o[C$i=C$i||"assets"])for(var C$n=C$o[C$i].getUuidArray(C$t,C$e),C$r=0;C$r<C$n.length;C$r++){var C$s=C$n[C$r];this.release(C$s)}},C$t.releaseAll=function(){for(var C$t in this._cache)this.release(C$t)},C$t.removeItem=function(C$t){var C$e=C$n.prototype.removeItem.call(this,C$t);return delete this._autoReleaseSetting[C$t],C$e},C$t.setAutoRelease=function(C$t,C$e){C$t=this._getReferenceKey(C$t);C$t&&(this._autoReleaseSetting[C$t]=!!C$e)},C$t.setAutoReleaseRecursively=function(C$t,C$e){C$e=!!C$e;C$t=this._getReferenceKey(C$t);if(C$t){this._autoReleaseSetting[C$t]=C$e;for(var C$i=C$m.getDependsRecursively(C$t),C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n];this._autoReleaseSetting[C$r]=C$e}}},C$t.isAutoRelease=function(C$t){C$t=this._getReferenceKey(C$t);return!!C$t&&!!this._autoReleaseSetting[C$t]},cc.loader=new C$e,C$i.exports=cc.loader},{"../platform/js":209,"../platform/utils":213,"./asset-loader":137,"./asset-table":138,"./auto-release-utils":140,"./downloader":142,"./loader":145,"./loading-items":146,"./pipeline":149,"./released-asset-checker":150}],137:[function(C$t,C$e,C$i){"use strict";C$t("../utils/CCPath");function C$n(C$t){this.id="AssetLoader",this.async=!0,this.pipeline=null}var C$o=C$t("../CCDebug"),C$r=C$t("./pipeline"),C$a=C$t("./loading-items"),C$c=(C$n.ID="AssetLoader",[]);C$n.prototype.handle=function(C$n,C$r){var C$s=C$n.uuid;if(!C$s)return C$n.content||null;cc.AssetLibrary.queryAssetInfo(C$s,function(C$t,C$e,C$i){C$t?C$r(C$t):(C$n.url=C$n.rawUrl=C$e,(C$n.isRawAsset=C$i)?(C$t=cc.path.extname(C$e).toLowerCase())?(C$t=C$t.substr(1),C$i=C$a.getQueue(C$n),C$c[0]={queueId:C$n.queueId,id:C$e,url:C$e,type:C$t,error:null,alias:C$n,complete:!0},C$i.append(C$c),C$n.type=C$t,C$r(null,C$n.content)):C$r(new Error(C$o.getError(4931,C$s,C$e))):(C$n.type="uuid",C$r(null,C$n.content)))})},C$r.AssetLoader=C$e.exports=C$n},{"../CCDebug":27,"../utils/CCPath":253,"./loading-items":146,"./pipeline":149}],138:[function(C$t,C$e,C$i){"use strict";var C$r=C$t("../utils/misc").pushToMap,C$d=C$t("../platform/js");function C$s(C$t,C$e){this.uuid=C$t,this.type=C$e}function C$n(){this._pathToUuid=C$d.createMap(!0)}C$t=C$n.prototype;C$t.getUuid=function(C$t,C$e){C$t=cc.url.normalize(C$t);var C$i=this._pathToUuid[C$t];if(C$i)if(Array.isArray(C$i)){if(!C$e)return C$i[0].uuid;for(var C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n];if(C$d.isChildClassOf(C$r.type,C$e))return C$r.uuid}if(C$d.isChildClassOf(C$e,cc.SpriteFrame))for(var C$s=0;C$s<C$i.length;C$s++){var C$o=C$i[C$s];if(C$d.isChildClassOf(C$o.type,cc.SpriteAtlas)){cc.errorID(4932,C$t);break}}}else{if(!C$e||C$d.isChildClassOf(C$i.type,C$e))return C$i.uuid;C$d.isChildClassOf(C$e,cc.SpriteFrame)&&C$d.isChildClassOf(C$i.type,cc.SpriteAtlas)&&cc.errorID(4932,C$t)}return""},C$t.getUuidArray=function(C$t,C$e,C$i){"/"===(C$t=cc.url.normalize(C$t))[C$t.length-1]&&(C$t=C$t.slice(0,-1));var C$n,C$r,C$s,C$o,C$h=this._pathToUuid,C$a=[],C$u=C$d.isChildClassOf;for(C$r in C$h)if(C$r.startsWith(C$t)&&(C$s=C$r,C$o=C$t,!(C$s.length>C$o.length)||(46===(C$s=C$s.charCodeAt(C$o.length))||47===C$s))||!C$t){var C$c=C$h[C$r];if(Array.isArray(C$c))for(var C$l=0;C$l<C$c.length;C$l++){var C$_=C$c[C$l];!C$e||C$u(C$_.type,C$e)?(C$a.push(C$_.uuid),C$i&&C$i.push(C$r)):C$_.type===cc.SpriteAtlas&&(C$n=C$r)}else!C$e||C$u(C$c.type,C$e)?(C$a.push(C$c.uuid),C$i&&C$i.push(C$r)):C$c.type===cc.SpriteAtlas&&(C$n=C$r)}return 0===C$a.length&&C$n&&C$d.isChildClassOf(C$e,cc.SpriteFrame)&&cc.errorID(4932,C$n),C$a},C$t.add=function(C$t,C$e,C$i,C$n){C$t=C$t.substring(0,C$t.length-cc.path.extname(C$t).length);C$e=new C$s(C$e,C$i);C$r(this._pathToUuid,C$t,C$e,C$n)},C$t._getInfo_DEBUG=function(C$t,C$e){for(var C$i=this._pathToUuid,C$n=Object.keys(C$i),C$r=0;C$r<C$n.length;++C$r){var C$s=C$n[C$r],C$o=C$i[C$s];if(Array.isArray(C$o))for(var C$a=0;C$a<C$o.length;C$a++){var C$c=C$o[C$a];if(C$c.uuid===C$t)return C$e.path=C$s,C$e.type=C$c.type,!0}else if(C$o.uuid===C$t)return C$e.path=C$s,C$e.type=C$o.type,!0}return!1},C$t.reset=function(){this._pathToUuid=C$d.createMap(!0)},C$e.exports=C$n},{"../platform/js":209,"../utils/misc":264}],139:[function(C$t,C$e,C$l){"use strict";var C$i=C$t("../platform/CCSys"),C$n=C$t("../CCDebug"),C$a=C$i.__audioSupport,C$r=C$a.format,C$s=C$a.context;function C$o(C$e,C$i){function C$n(){clearTimeout(C$r),C$t.removeEventListener("canplaythrough",C$s,!1),C$t.removeEventListener("error",C$o,!1),C$a.USE_LOADER_EVENT&&C$t.removeEventListener(C$a.USE_LOADER_EVENT,C$s,!1)}var C$t=document.createElement("audio"),C$r=(C$t.src=C$e.url,setTimeout(function(){(0===C$t.readyState?C$o:C$s)()},8e3)),C$s=function(){C$n(),C$i(null,C$t)},C$o=function(){C$n();var C$t="load audio failure - "+C$e.url;cc.log(C$t),C$i(C$t)};C$t.addEventListener("canplaythrough",C$s,!1),C$t.addEventListener("error",C$o,!1),C$a.USE_LOADER_EVENT&&C$t.addEventListener(C$a.USE_LOADER_EVENT,C$s,!1)}function C$c(C$t,C$e){C$s||C$e(new Error(C$n.getError(4926)));var C$i=cc.loader.getXMLHttpRequest();C$i.open("GET",C$t.url,!0),C$i.responseType="arraybuffer",C$i.onload=function(){C$s.decodeAudioData(C$i.response,function(C$t){C$e(null,C$t)},function(){C$e("decode error - "+C$t.id,null)})},C$i.onerror=function(){C$e("request error - "+C$t.id,null)},C$i.send()}C$e.exports=function(C$t,C$e){if(0===C$r.length)return new Error(C$n.getError(4927));(C$a.WEB_AUDIO?C$t._owner instanceof cc.AudioClip?C$t._owner.loadMode===cc.AudioClip.LoadMode.WEB_AUDIO?C$c:C$o:C$t.urlParam&&C$t.urlParam.useDom?C$o:C$c:C$o)(C$t,C$e)}},{"../CCDebug":27,"../platform/CCSys":198}],140:[function(C$t,C$e,C$i){"use strict";var C$_=C$t("../platform/js");function C$s(C$t,C$e){C$t=cc.loader.getItem(C$t);if(C$t){var C$i=C$t.dependKeys;if(C$i)for(var C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n];C$e[C$r]||(C$e[C$r]=!0,C$s(C$r,C$e))}}}function C$f(C$t,C$e){C$t._uuid&&(C$e[C$t=cc.loader._getReferenceKey(C$t)]||(C$e[C$t]=!0,C$s(C$t,C$e)))}function C$p(C$t,C$h){for(var C$e=0;C$e<C$t._components.length;C$e++){C$i=void 0;C$n=void 0;C$r=void 0;C$s=void 0;C$o=void 0;C$a=void 0;C$c=void 0;C$u=void 0;C$l=void 0;C$_=void 0;var C$i=C$t._components[C$e];var C$n=C$h;for(var C$r=Object.getOwnPropertyNames(C$i),C$s=0;C$s<C$r.length;C$s++){var C$o=C$i[C$r[C$s]];if("object"==typeof C$o&&C$o)if(Array.isArray(C$o))for(var C$a=0;C$a<C$o.length;C$a++){var C$c=C$o[C$a];C$c instanceof cc.RawAsset&&C$f(C$c,C$n)}else if(C$o.constructor&&C$o.constructor!==Object)C$o instanceof cc.RawAsset&&C$f(C$o,C$n);else for(var C$u=Object.getOwnPropertyNames(C$o),C$l=0;C$l<C$u.length;C$l++){var C$_=C$o[C$u[C$l]];C$_ instanceof cc.RawAsset&&C$f(C$_,C$n)}}}for(var C$d=0;C$d<C$t._children.length;C$d++)C$p(C$t._children[C$d],C$h)}C$e.exports={autoRelease:function(C$t,C$e,C$h){var C$i=cc.loader._autoReleaseSetting,C$n=C$_.createMap();if(C$e)for(var C$r=0;C$r<C$e.length;C$r++)C$n[C$e[C$r]]=!0;for(var C$s=0;C$s<C$h.length;C$s++)C$p(C$h[C$s],C$n);if(C$t)for(var C$o=0;C$o<C$t.length;C$o++){var C$a=C$t[C$o];!1===C$i[C$a]||C$n[C$a]||cc.loader.release(C$a)}for(var C$u=Object.keys(C$i),C$c=0;C$c<C$u.length;C$c++){var C$l=C$u[C$c];!0!==C$i[C$l]||C$n[C$l]||cc.loader.release(C$l)}},getDependsRecursively:function(C$t){var C$e={};return C$s(C$t,C$e),Object.keys(C$e)}}},{"../platform/js":209}],141:[function(C$t,C$e,C$i){"use strict";C$e.exports=function(C$t,C$e){var C$t=C$t.url,C$i=cc.loader.getXMLHttpRequest(),C$n="Load binary data failed: "+C$t;C$i.open("GET",C$t,!0),C$i.responseType="arraybuffer",C$i.onload=function(){var C$t=C$i.response;C$t?(C$t=new Uint8Array(C$t),C$e(null,C$t)):C$e({status:C$i.status,errorMessage:C$n+"(no response)"})},C$i.onerror=function(){C$e({status:C$i.status,errorMessage:C$n+"(error)"})},C$i.ontimeout=function(){C$e({status:C$i.status,errorMessage:C$n+"(time out)"})},C$i.send(null)}},{}],142:[function(C$t,C$h,C$u){"use strict";var C$e=C$t("../platform/js"),C$a=C$t("../CCDebug"),C$_=(C$t("../utils/CCPath"),C$t("./pipeline")),C$n=C$t("./pack-downloader"),C$i=C$t("./binary-downloader"),C$r=C$t("./text-downloader"),C$d=C$t("./utils").urlAppendTimestamp;function C$s(){return null}function C$f(C$t,C$e,C$i){var C$n=C$t.url,C$t=document,C$r=document.createElement("script");function C$s(){C$r.parentNode.removeChild(C$r),C$r.removeEventListener("load",C$s,!1),C$r.removeEventListener("error",C$o,!1),C$e(null,C$n)}function C$o(){C$r.parentNode.removeChild(C$r),C$r.removeEventListener("load",C$s,!1),C$r.removeEventListener("error",C$o,!1),C$e(new Error(C$a.getError(4928,C$n)))}"file:"!==window.location.protocol&&(C$r.crossOrigin="anonymous"),C$r.async=C$i,C$r.src=C$d(C$n),C$r.addEventListener("load",C$s,!1),C$r.addEventListener("error",C$o,!1),C$t.body.appendChild(C$r)}function C$c(C$e,C$i,C$t,C$n){void 0===C$t&&(C$t=!0);var C$r=C$d(C$e.url);if(C$n=C$n||new Image,C$t&&"file:"!==window.location.protocol?C$n.crossOrigin="anonymous":C$n.crossOrigin=null,C$n.complete&&0<C$n.naturalWidth&&C$n.src===C$r)return C$n;function C$s(){C$n.removeEventListener("load",C$o),C$n.removeEventListener("error",C$s),"https:"!==window.location.protocol&&C$n.crossOrigin&&"anonymous"===C$n.crossOrigin.toLowerCase()?C$c(C$e,C$i,!1,C$n):C$i(new Error(C$a.getError(4930,C$r)))}var C$o=function C$t(){C$n.removeEventListener("load",C$t),C$n.removeEventListener("error",C$s),C$n.id=C$e.id,C$i(null,C$n)};C$n.addEventListener("load",C$o),C$n.addEventListener("error",C$s),C$n.src=C$r}function C$o(C$t,C$e){C$e(null,C$t.url)}function C$l(C$t){this.id="Downloader",this.async=!0,this.pipeline=null,this._curConcurrent=0,this._loadQueue=[],this._subpackages={},this.extMap=C$e.mixin(C$t,C$p)}var C$p={js:C$f,png:C$c,jpg:C$c,bmp:C$c,jpeg:C$c,gif:C$c,ico:C$c,tiff:C$c,webp:C$c,image:C$c,pvr:C$i,pkm:C$i,mp3:C$t=C$t("./audio-downloader"),ogg:C$t,wav:C$t,m4a:C$t,txt:C$r,xml:C$r,vsh:C$r,fsh:C$r,atlas:C$r,tmx:C$r,tsx:C$r,json:C$r,ExportJson:C$r,plist:C$r,fnt:C$r,font:C$s,eot:C$s,ttf:C$s,woff:C$s,svg:C$s,ttc:C$s,uuid:function(C$t,C$e){var C$i=C$n.load(C$t,C$e);return void 0===C$i?this.extMap.json(C$t,C$e):C$i||void 0},binary:C$i,bin:C$i,dbbin:C$i,skel:C$i,mp4:C$o,avi:C$o,mov:C$o,mpg:C$o,mpeg:C$o,rm:C$o,rmvb:C$o,default:C$r};C$l.ID="Downloader",C$l.PackDownloader=C$n,C$l.prototype.addHandlers=function(C$t){C$e.mixin(this.extMap,C$t)},C$l.prototype._handleLoadQueue=function(){for(;this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT;){var C$t=this._loadQueue.shift();if(!C$t)break;var C$e=this.handle(C$t.item,C$t.callback);void 0!==C$e&&(C$e instanceof Error?C$t.callback(C$e):C$t.callback(null,C$e))}},C$l.prototype.handle=function(C$t,C$i){var C$n=this,C$e=this.extMap[C$t.type]||this.extMap.default,C$r=void 0;if(this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT){if(this._curConcurrent++,void 0!==(C$r=C$e.call(this,C$t,function(C$t,C$e){C$n._curConcurrent=Math.max(0,C$n._curConcurrent-1),C$n._handleLoadQueue(),C$i&&C$i(C$t,C$e)})))return this._curConcurrent=Math.max(0,this._curConcurrent-1),this._handleLoadQueue(),C$r}else if(C$t.ignoreMaxConcurrency){if(void 0!==(C$r=C$e.call(this,C$t,C$i)))return C$r}else this._loadQueue.push({item:C$t,callback:C$i})},C$l.prototype.loadSubpackage=function(C$t,C$e,C$i){!C$i&&C$e&&(C$i=C$e,C$e=null);var C$n=this._subpackages[C$t];C$n?C$n.loaded?C$i&&C$i():C$f({url:C$n.path+"index.js"},function(C$t){C$t||(C$n.loaded=!0),C$i&&C$i(C$t)}):C$i&&C$i(new Error("Can't find subpackage "+C$t))},C$_.Downloader=C$h.exports=C$l},{"../CCDebug":27,"../platform/js":209,"../utils/CCPath":253,"./audio-downloader":139,"./binary-downloader":141,"./pack-downloader":148,"./pipeline":149,"./text-downloader":152,"./utils":154}],143:[function(C$t,C$e,C$n){"use strict";var C$i,C$h=C$t("../utils/text-utils"),C$u=null,C$_="BES bswy:->@123ä¸ãá„",C$d={},C$f=-1,C$p=[],C$y=(C$i=void 0,function(){var C$t,C$e;return C$i=void 0===C$i?!!window.FontFace&&(C$t=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),C$e=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor),C$t?42<parseInt(C$t[1],10):!C$e):C$i});function C$g(){for(var C$t=!0,C$e=Date.now(),C$i=C$p.length-1;0<=C$i;C$i--){var C$n,C$r,C$s=C$p[C$i],C$o=C$s.fontFamilyName;3e3<C$e-C$s.startTime?(cc.warnID(4933,C$o),C$s.callback(null,C$o),C$p.splice(C$i,1)):(C$n=C$s.refWidth,C$u.font=C$r="40px "+C$o,C$n!==C$h.safeMeasureText(C$u,C$_,C$r)?(C$p.splice(C$i,1),C$s.callback(null,C$o)):C$t=!1)}C$t&&(clearInterval(C$f),C$f=-1)}var C$m={loadFont:function(C$t,C$e){var C$t=C$t.url,C$i=C$m._getFontFamily(C$t);if(C$d[C$i])return C$i;C$u||((C$a=document.createElement("canvas")).width=100,C$a.height=100,C$u=C$a.getContext("2d"));var C$n,C$r,C$s,C$o,C$a="40px "+C$i,C$a=(C$u.font=C$a,C$h.safeMeasureText(C$u,C$_,C$a)),C$c=document.createElement("style"),C$l=(C$c.type="text/css",""),C$t=(isNaN(+C$i)?C$l+="@font-face { font-family:"+C$i+"; src:":C$l+="@font-face { font-family:'"+C$i+"'; src:",C$c.textContent=(C$l+="url('"+C$t+"');")+"}",document.body.appendChild(C$c),document.createElement("div")),C$l=C$t.style;C$l.fontFamily=C$i,C$t.innerHTML=".",C$l.position="absolute",C$l.left="-100px",C$l.top="-100px",document.body.appendChild(C$t),C$y()?(C$n=Date.now(),C$r=C$i,C$s=C$e,C$l=new Promise(function(C$i,C$t){(function C$e(){3e3<=Date.now()-C$n?C$t():document.fonts.load("40px "+C$r).then(function(C$t){1<=C$t.length?C$i():setTimeout(C$e,100)},function(){C$t()})})()}),C$o=null,C$t=new Promise(function(C$t,C$e){C$o=setTimeout(C$e,3e3)}),Promise.race([C$t,C$l]).then(function(){C$o&&(clearTimeout(C$o),C$o=null),C$s(null,C$r)},function(){cc.warnID(4933,C$r),C$s(null,C$r)})):(C$t={fontFamilyName:C$i,refWidth:C$a,callback:C$e,startTime:Date.now()},C$p.push(C$t),-1===C$f&&(C$f=setInterval(C$g,100))),C$d[C$i]=C$c},_getFontFamily:function(C$t){var C$e=C$t.lastIndexOf(".ttf");if(-1===C$e)return C$t;var C$i=C$t.lastIndexOf("/"),C$t=-1===C$i?C$t.substring(0,C$e)+"_LABEL":C$t.substring(C$i+1,C$e)+"_LABEL";return C$t=-1!==C$t.indexOf(" ")?'"'+C$t+'"':C$t}};C$e.exports=C$m},{"../utils/text-utils":271}],144:[function(C$t,C$e,C$i){"use strict";C$t("./downloader"),C$t("./loader"),C$t("./loading-items"),C$t("./pipeline"),C$t("./CCLoader")},{"./CCLoader":136,"./downloader":142,"./loader":145,"./loading-items":146,"./pipeline":149}],145:[function(C$t,C$e,C$h){"use strict";var C$i=C$t("../platform/js"),C$u=C$t("../platform/CCSAXParser").plistParser,C$_=C$t("./pipeline"),C$d=C$t("../assets/CCTexture2D"),C$n=C$t("./uuid-loader"),C$t=C$t("./font-loader");function C$r(C$e){if("string"!=typeof C$e.content)return new Error("JSON Loader: Input item doesn't contain string content");try{return JSON.parse(C$e.content)}catch(C$t){return new Error("JSON Loader: Parse json ["+C$e.id+"] failed : "+C$t)}}function C$s(C$t){if(C$t._owner instanceof cc.Asset)return null;var C$e=C$t.content;if(cc.sys.platform!==cc.sys.FB_PLAYABLE_ADS&&!(C$e instanceof Image))return new Error("Image Loader: Input item doesn't contain Image content");var C$i=C$t.texture||new C$d;return C$i._uuid=C$t.uuid,C$i.url=C$t.url,C$i._setRawAsset(C$t.rawUrl,!1),C$i._nativeAsset=C$e,C$i}function C$o(C$t,C$e){if(C$t._owner instanceof cc.Asset)return null;var C$i=new cc.AudioClip;return C$i._setRawAsset(C$t.rawUrl,!1),C$i._nativeAsset=C$t.content,C$i.url=C$t.url,C$i}function C$a(C$t){return C$t.load?C$t.load(C$t.content):null}function C$c(C$t,C$e){return C$t[C$e]<<8|C$t[C$e+1]}function C$l(C$t){this.id="Loader",this.async=!0,this.pipeline=null,this.extMap=C$i.mixin(C$t,C$f)}var C$f={png:C$s,jpg:C$s,bmp:C$s,jpeg:C$s,gif:C$s,ico:C$s,tiff:C$s,webp:C$s,image:C$s,pvr:function(C$t){C$t=C$t.content instanceof ArrayBuffer?C$t.content:C$t.content.buffer;if(55727696!=(C$n=new Int32Array(C$t,0,13))[0])return new Error("Invalid magic number in PVR header");var C$e=C$n[7],C$i=C$n[6],C$n=C$n[12]+52;return{_data:new Uint8Array(C$t,C$n),_compressed:!0,width:C$e,height:C$i}},pkm:function(C$t){var C$t=C$t.content instanceof ArrayBuffer?C$t.content:C$t.content.buffer,C$e=new Uint8Array(C$t);if(0!==(C$i=C$c(C$e,6))&&1!==C$i&&3!==C$i)return new Error("Invalid magic number in ETC header");var C$i=C$c(C$e,12),C$n=C$c(C$e,14);return C$c(C$e,8),C$c(C$e,10),{_data:new Uint8Array(C$t,16),_compressed:!0,width:C$i,height:C$n}},mp3:C$o,ogg:C$o,wav:C$o,m4a:C$o,json:C$r,ExportJson:C$r,plist:function(C$t){return"string"!=typeof C$t.content?new Error("Plist Loader: Input item doesn't contain string content"):C$u.parse(C$t.content)||new Error("Plist Loader: Parse ["+C$t.id+"] failed")},uuid:C$n,prefab:C$n,fire:C$n,scene:C$n,binary:C$a,dbbin:C$a,bin:C$a,skel:C$a,font:C$t.loadFont,eot:C$t.loadFont,ttf:C$t.loadFont,woff:C$t.loadFont,svg:C$t.loadFont,ttc:C$t.loadFont,default:function(){return null}};C$l.ID="Loader",C$l.prototype.addHandlers=function(C$t){this.extMap=C$i.mixin(this.extMap,C$t)},C$l.prototype.handle=function(C$t,C$e){return(this.extMap[C$t.type]||this.extMap.default).call(this,C$t,C$e)},C$_.Loader=C$e.exports=C$l},{"../assets/CCTexture2D":50,"../platform/CCSAXParser":196,"../platform/js":209,"./font-loader":143,"./pipeline":149,"./uuid-loader":155}],146:[function(C$t,C$e,C$i){"use strict";var C$r=C$t("../platform/callbacks-invoker"),C$o=(C$t("../utils/CCPath"),C$t("../platform/js")),C$_=0|998*Math.random(),C$c=C$o.createMap(!0),C$s=[],C$a={WORKING:1,COMPLETE:2,ERROR:3},C$l=C$o.createMap(!0);function C$d(C$t,C$e){var C$i="object"==typeof C$t?C$t.url:C$t,C$n={queueId:C$e,id:C$i,url:C$i,rawUrl:void 0,urlParam:function(C$t){if(C$t){var C$e,C$t=C$t.split("?");if(C$t&&C$t[0]&&C$t[1])return C$e={},C$t[1].split("&").forEach(function(C$t){C$t=C$t.split("=");C$e[C$t[0]]=C$t[1]}),C$e}}(C$i),type:"",error:null,content:null,complete:!1,states:{},deps:null};if("object"==typeof C$t&&(C$o.mixin(C$n,C$t),C$t.skips))for(var C$r=0;C$r<C$t.skips.length;C$r++){var C$s=C$t.skips[C$r];C$n.states[C$s]=C$a.COMPLETE}return C$n.rawUrl=C$n.url,C$i&&!C$n.type&&(C$n.type=cc.path.extname(C$i).toLowerCase().substr(1)),C$n}var C$h=[];function C$u(C$t,C$e,C$i,C$n){C$r.call(this),this._id=++C$_,(C$c[this._id]=this)._pipeline=C$t,this._errorUrls=C$o.createMap(!0),this._appending=!1,this._ownerQueue=null,this.onProgress=C$i,this.onComplete=C$n,this.map=C$o.createMap(!0),this.completed={},this.totalCount=0,this.completedCount=0,this._pipeline?this.active=!0:this.active=!1,C$e&&(0<C$e.length?this.append(C$e):this.allComplete())}C$u.ItemState=new cc.Enum(C$a),C$u.create=function(C$t,C$e,C$i,C$n){void 0===C$i?"function"==typeof C$e&&(C$n=C$e,C$e=C$i=null):void 0===C$n&&("function"==typeof C$e?(C$n=C$i,C$i=C$e,C$e=null):(C$n=C$i,C$i=null));var C$r=C$s.pop();return C$r?(C$r._pipeline=C$t,C$r.onProgress=C$i,C$r.onComplete=C$n,(C$c[C$r._id]=C$r)._pipeline&&(C$r.active=!0),C$e&&C$r.append(C$e)):C$r=new C$u(C$t,C$e,C$i,C$n),C$r},C$u.getQueue=function(C$t){return C$t.queueId?C$c[C$t.queueId]:null},C$u.itemComplete=function(C$t){var C$e=C$c[C$t.queueId];C$e&&C$e.itemComplete(C$t.id)},C$u.initQueueDeps=function(C$t){var C$e=C$l[C$t._id];C$e?(C$e.completed.length=0,C$e.deps.length=0):C$l[C$t._id]={completed:[],deps:[]}},C$u.registerQueueDep=function(C$t,C$e){var C$i=C$t.queueId||C$t;if(!C$i)return!1;C$i=C$l[C$i];if(C$i)-1===C$i.deps.indexOf(C$e)&&C$i.deps.push(C$e);else if(C$t.id)for(var C$n in C$l){C$n=C$l[C$n];-1!==C$n.deps.indexOf(C$t.id)&&-1===C$n.deps.indexOf(C$e)&&C$n.deps.push(C$e)}},C$u.finishDep=function(C$t){for(var C$e in C$l){C$e=C$l[C$e];-1!==C$e.deps.indexOf(C$t)&&-1===C$e.completed.indexOf(C$t)&&C$e.completed.push(C$t)}};C$t=C$u.prototype;C$o.mixin(C$t,C$r.prototype),C$t.append=function(C$t,C$e){if(!this.active)return[];C$e&&!C$e.deps&&(C$e.deps=[]),this._appending=!0;for(var C$i,C$n,C$r,C$s,C$o=[],C$a=0;C$a<C$t.length;++C$a)!(C$r=C$t[C$a]).queueId||this.map[C$r.id]?"string"==typeof((C$s=C$r).url||C$s)&&(C$n=(C$s=C$d(C$r,this._id)).id,this.map[C$n]||(this.map[C$n]=C$s,this.totalCount++,C$e&&C$e.deps.push(C$s),C$u.registerQueueDep(C$e||this._id,C$n),C$o.push(C$s))):(this.map[C$r.id]=C$r,C$e&&C$e.deps.push(C$r),C$r.complete||function C$t(C$e,C$i,C$n){if(C$e&&C$i){var C$r=!1;if(C$h.push(C$i.id),C$i.deps)for(var C$s,C$o=C$i.deps,C$a=0;C$a<C$o.length;C$a++){if((C$s=C$o[C$a]).id===C$e.id){C$r=!0;break}if(!(0<=C$h.indexOf(C$s.id))&&C$s.deps&&C$t(C$e,C$s,!0)){C$r=!0;break}}return C$n||(C$h.length=0),C$r}}(C$e,C$r)?(this.totalCount++,this.itemComplete(C$r.id)):(C$i=this,(C$n=C$c[C$r.queueId])&&(this.totalCount++,C$u.registerQueueDep(C$e||this._id,C$r.id),C$n.addListener(C$r.id,function(C$t){C$i.itemComplete(C$t.id)}))));return this._appending=!1,this.completedCount===this.totalCount?this.allComplete():this._pipeline.flowIn(C$o),C$o},C$t._childOnProgress=function(C$t){var C$e;this.onProgress&&(C$e=C$l[this._id],this.onProgress(C$e?C$e.completed.length:this.completedCount,C$e?C$e.deps.length:this.totalCount,C$t))},C$t.allComplete=function(){var C$t=C$o.isEmptyObject(this._errorUrls)?null:this._errorUrls;this.onComplete&&this.onComplete(C$t,this)},C$t.isCompleted=function(){return this.completedCount>=this.totalCount},C$t.isItemCompleted=function(C$t){return!!this.completed[C$t]},C$t.exists=function(C$t){return!!this.map[C$t]},C$t.getContent=function(C$t){var C$t=this.map[C$t],C$e=null;return C$t&&(C$t.content?C$e=C$t.content:C$t.alias&&(C$e=C$t.alias.content)),C$e},C$t.getError=function(C$t){var C$t=this.map[C$t],C$e=null;return C$t&&(C$t.error?C$e=C$t.error:C$t.alias&&(C$e=C$t.alias.error)),C$e},C$t.addListener=C$r.prototype.on,C$t.hasListener=C$r.prototype.hasEventListener,C$t.removeListener=C$r.prototype.off,C$t.removeAllListeners=C$r.prototype.removeAll,C$t.removeItem=function(C$t){var C$e=this.map[C$t];C$e&&this.completed[C$e.alias||C$t]&&(delete this.completed[C$t],delete this.map[C$t],C$e.alias&&(delete this.completed[C$e.alias.id],delete this.map[C$e.alias.id]),this.completedCount--,this.totalCount--)},C$t.itemComplete=function(C$t){var C$e,C$i=this.map[C$t];C$i&&(C$e=C$t in this._errorUrls,C$i.error instanceof Error||C$o.isString(C$i.error)?this._errorUrls[C$t]=C$i.error:C$i.error?C$o.mixin(this._errorUrls,C$i.error):!C$i.error&&C$e&&delete this._errorUrls[C$t],this.completed[C$t]=C$i,this.completedCount++,C$u.finishDep(C$i.id),this.onProgress&&(C$e=C$l[this._id],this.onProgress(C$e?C$e.completed.length:this.completedCount,C$e?C$e.deps.length:this.totalCount,C$i)),this.emit(C$t,C$i),this.removeAll(C$t),!this._appending&&this.completedCount>=this.totalCount&&this.allComplete())},C$t.destroy=function(){this.active=!1,this._appending=!1,this._pipeline=null,this._ownerQueue=null,C$o.clear(this._errorUrls),this.onProgress=null,this.onComplete=null,this.map=C$o.createMap(!0),this.completed={},this.totalCount=0,this.completedCount=0,C$r.call(this),C$l[this._id]&&(C$l[this._id].completed.length=0,C$l[this._id].deps.length=0),delete C$c[this._id],delete C$l[this._id],-1===C$s.indexOf(this)&&C$s.length<10&&C$s.push(this)},cc.LoadingItems=C$e.exports=C$u},{"../platform/callbacks-invoker":202,"../platform/js":209,"../utils/CCPath":253}],147:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e,C$i){this.id="MD5Pipe",this.async=!1,this.pipeline=null,this.md5AssetsMap=C$t,this.md5NativeAssetsMap=C$e,this.libraryBase=C$i}var C$t=C$t("./pipeline"),C$r=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-]{8,})/;C$n.ID="MD5Pipe",C$n.prototype.handle=function(C$t){return C$t.url=this.transformURL(C$t.url),null},C$n.prototype.transformURL=function(C$t){var C$i=!C$t.startsWith(this.libraryBase)?this.md5NativeAssetsMap:this.md5AssetsMap;return C$t=C$t.replace(C$r,function(C$t,C$e){C$e=C$i[C$e];return C$e?C$t+"."+C$e:C$t})},C$t.MD5Pipe=C$e.exports=C$n},{"./pipeline":149}],148:[function(C$t,C$e,C$i){"use strict";var C$s=C$t("./unpackers"),C$d=C$t("../utils/misc").pushToMap,C$o=0,C$r=2,C$a=3;function C$f(){this.unpacker=null,this.state=C$o,this.duration=0}var C$c={},C$l={},C$h={},C$u=[],C$_=null;function C$p(C$t,C$e){return new Error("Can not retrieve "+C$t+" from packer "+C$e)}C$e.exports={msToRelease:12e4,initPacks:function(C$t){for(var C$e in C$c={},C$l=C$t)for(var C$i=C$t[C$e],C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n],C$s=1===C$i.length;C$d(C$c,C$r,C$e,C$s)}},_loadNewPack:function(C$i,C$n,C$r){var C$s=this,C$o=cc.AssetLibrary.getLibUrlNoExt(C$n)+".json";cc.loader.load({url:C$o,ignoreMaxConcurrency:!0},function(C$t,C$e){if(C$t)return cc.errorID(4916,C$i),C$r(C$t);C$h[C$n].url=C$o;C$t=C$s._doLoadNewPack(C$i,C$n,C$e);C$t?C$r(null,C$t):C$r(C$p(C$i,C$n))})},_doPreload:function(C$t,C$e){var C$i=C$h[C$t];C$i||((C$i=C$h[C$t]=new C$f).state=C$r),C$i.state!==C$a&&(C$i.unpacker=new C$s.JsonUnpacker,C$i.unpacker.load(C$l[C$t],C$e),C$i.state=C$a)},_doLoadNewPack:function(C$t,C$e,C$i){var C$n,C$r=C$h[C$e];return C$r.state!==C$a&&("string"==typeof C$i&&(C$i=JSON.parse(C$i)),Array.isArray(C$i)?C$r.unpacker=new C$s.JsonUnpacker:C$i.type===C$s.TextureUnpacker.ID&&(C$r.unpacker=new C$s.TextureUnpacker),C$r.unpacker.load(C$l[C$e],C$i),C$r.state=C$a,C$r.duration=0,C$u.push(C$e),C$n=this,C$_=C$_||setInterval(function(){for(var C$t=C$n.msToRelease/5e3,C$e=C$u.length-1;0<=C$e;C$e--){var C$i=C$u[C$e];++C$h[C$i].duration>C$t&&C$n.release(C$i)}0===C$u.length&&(clearInterval(C$_),C$_=null)},5e3)),C$r.unpacker.retrieve(C$t)},_selectLoadedPack:function(C$t){for(var C$e=C$o,C$i="",C$n=0;C$n<C$t.length;C$n++){var C$r=C$t[C$n],C$s=C$h[C$r];if(C$s){C$s=C$s.state;if(C$s===C$a)return C$r;C$e<C$s&&(C$e=C$s,C$i=C$r)}}return C$e!==C$o?C$i:C$t[0]},load:function(C$t,C$e){var C$i,C$t=C$t.uuid,C$n=C$c[C$t];if(C$n)return Array.isArray(C$n)&&(C$n=this._selectLoadedPack(C$n)),C$i=C$h[C$n],C$i&&C$i.state===C$a?(C$i.duration=0,C$i.unpacker.retrieve(C$t)||C$p(C$t,C$n)):(C$i||(console.log("Create unpacker %s for %s",C$n,C$t),(C$i=C$h[C$n]=new C$f).state=C$r),this._loadNewPack(C$t,C$n,C$e),null)},release:function(C$t){var C$e=C$h[C$t];C$e&&(cc.loader.release(C$e.url),delete C$h[C$t],cc.js.array.fastRemove(C$u,C$t))}}},{"../utils/misc":264,"./unpackers":153}],149:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../platform/js"),C$r=C$t("./loading-items"),C$a=C$r.ItemState;function C$s(C$t){this._pipes=C$t,this._cache=C$n.createMap(!0);for(var C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e];C$i.handle&&C$i.id&&(C$i.pipeline=this,C$i.next=C$e<C$t.length-1?C$t[C$e+1]:null)}}C$s.ItemState=C$a;C$t=C$s.prototype;C$t.insertPipe=function(C$t,C$e){var C$i,C$n;!C$t.handle||!C$t.id||C$e>this._pipes.length?cc.warnID(4921):0<this._pipes.indexOf(C$t)?cc.warnID(4922):(C$i=null,C$e<(C$t.pipeline=this)._pipes.length&&(C$i=this._pipes[C$e]),C$n=null,(C$n=0<C$e?this._pipes[C$e-1]:C$n)&&(C$n.next=C$t),C$t.next=C$i,this._pipes.splice(C$e,0,C$t))},C$t.insertPipeAfter=function(C$t,C$e){C$t=this._pipes.indexOf(C$t);C$t<0||this.insertPipe(C$e,C$t+1)},C$t.appendPipe=function(C$t){C$t.handle&&C$t.id&&(C$t.pipeline=this,C$t.next=null,0<this._pipes.length&&(this._pipes[this._pipes.length-1].next=C$t),this._pipes.push(C$t))},C$t.flowIn=function(C$t){var C$e,C$i,C$n=this._pipes[0];if(C$n){for(C$e=0;C$e<C$t.length;C$e++)C$i=C$t[C$e],this._cache[C$i.id]=C$i;for(C$e=0;C$e<C$t.length;C$e++)(function C$i(C$t,C$n){var C$r=C$t.id,C$e=C$n.states[C$r],C$s=C$t.next,C$o=C$t.pipeline;C$n.error||C$e===C$a.WORKING||C$e===C$a.ERROR||(C$e===C$a.COMPLETE?C$s?C$i(C$s,C$n):C$o.flowOut(C$n):(C$n.states[C$r]=C$a.WORKING,(C$e=C$t.handle(C$n,function(C$t,C$e){C$t?(C$n.error=C$t,C$n.states[C$r]=C$a.ERROR,C$o.flowOut(C$n)):(C$e&&(C$n.content=C$e),C$n.states[C$r]=C$a.COMPLETE,C$s?C$i(C$s,C$n):C$o.flowOut(C$n))}))instanceof Error?(C$n.error=C$e,C$n.states[C$r]=C$a.ERROR,C$o.flowOut(C$n)):void 0!==C$e&&(null!==C$e&&(C$n.content=C$e),C$n.states[C$r]=C$a.COMPLETE,C$s?C$i(C$s,C$n):C$o.flowOut(C$n))))})(C$n,C$i=C$t[C$e])}else for(C$e=0;C$e<C$t.length;C$e++)this.flowOut(C$t[C$e])},C$t.flowInDeps=function(C$t,C$e,C$i){return C$r.create(this,function(C$t,C$e){C$i(C$t,C$e),C$e.destroy()}).append(C$e,C$t)},C$t.flowOut=function(C$t){C$t.error?delete this._cache[C$t.id]:this._cache[C$t.id]||(this._cache[C$t.id]=C$t),C$t.complete=!0,C$r.itemComplete(C$t)},C$t.copyItemStates=function(C$t,C$e){if(C$e instanceof Array)for(var C$i=0;C$i<C$e.length;++C$i)C$e[C$i].states=C$t.states;else C$e.states=C$t.states},C$t.getItem=function(C$t){C$t=this._cache[C$t];return C$t&&(C$t.alias||C$t)},C$t.removeItem=function(C$t){var C$e=this._cache[C$t];return C$e&&C$e.complete&&delete this._cache[C$t],C$e},C$t.clear=function(){for(var C$t in this._cache){var C$e=this._cache[C$t];delete this._cache[C$t],C$e.complete||(C$e.error=new Error("Canceled manually"),this.flowOut(C$e))}},cc.Pipeline=C$e.exports=C$s},{"../platform/js":209,"./loading-items":146}],150:[function(C$t,C$e,C$i){"use strict";function C$n(){this._releasedKeys=C$c.createMap(!0),this._dirty=!1}function C$a(C$t,C$e,C$i){C$i[C$t]||cc.log('"'+C$t+'" was released but maybe still referenced by '+((C$i=C$e).uuid?(C$r=C$r||{path:"",type:null},cc.loader._assetTables.assets._getInfo_DEBUG(C$i.uuid,C$r)?(C$r.path="resources/"+C$r.path,'"'+C$r.path+'" (type: '+C$c.getClassName(C$r.type)+", uuid: "+C$i.uuid+")"):'"'+C$i.rawUrl+'" ('+C$i.uuid+")"):'"'+C$i.rawUrl+'"'))}var C$c=C$t("../platform/js"),C$r=(C$n.prototype.setReleased=function(C$t,C$e){this._releasedKeys[C$e]=!0,this._dirty=!0},null);C$n.prototype.checkCouldRelease=function(C$t){if(this._dirty){this._dirty=!1;var C$e,C$i=this._releasedKeys;for(C$e in C$t){var C$n=C$t[C$e],C$r=(C$n=C$n.alias?C$n.alias:C$n).dependKeys;if(C$r)for(var C$s=0;C$s<C$r.length;++C$s){var C$o=C$r[C$s];C$i[C$o]&&(C$a(C$o,C$n,C$t),delete C$i[C$o])}}C$c.clear(C$i)}},C$e.exports=C$n},{"../platform/js":209}],151:[function(C$t,C$e,C$i){"use strict";var C$t=C$t("./pipeline"),C$n=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-]{8,})/;function C$r(C$t){for(var C$e in this.id="SubPackPipe",this.async=!1,this.pipeline=null,C$t){var C$i=C$t[C$e];C$i.uuids&&C$i.uuids.forEach(function(C$t){C$s[C$t]=C$i.path})}}var C$s=Object.create(null);C$r.ID="SubPackPipe",C$r.prototype.handle=function(C$t){return C$t.url=this.transformURL(C$t.url),null},C$r.prototype.transformURL=function(C$t){var C$e=(C$e=(C$e=C$t).match(C$n))?C$e[1]:"";if(C$e){C$e=C$s[C$e];if(C$e)return C$t.replace("res/raw-assets/",C$e+"raw-assets/")}return C$t},C$t.SubPackPipe=C$e.exports=C$r},{"./pipeline":149}],152:[function(C$t,C$e,C$i){"use strict";var C$r=C$t("./utils").urlAppendTimestamp;C$e.exports=function(C$t,C$e){var C$t=C$t.url,C$t=C$r(C$t),C$i=cc.loader.getXMLHttpRequest(),C$n="Load text file failed: "+C$t;C$i.open("GET",C$t,!0),C$i.overrideMimeType&&C$i.overrideMimeType("text/plain; charset=utf-8"),C$i.onload=function(){4===C$i.readyState?200===C$i.status||0===C$i.status?C$e(null,C$i.responseText):C$e({status:C$i.status,errorMessage:C$n+"(wrong status)"}):C$e({status:C$i.status,errorMessage:C$n+"(wrong readyState)"})},C$i.onerror=function(){C$e({status:C$i.status,errorMessage:C$n+"(error)"})},C$i.ontimeout=function(){C$e({status:C$i.status,errorMessage:C$n+"(time out)"})},C$i.send(null)}},{"./utils":154}],153:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../assets/CCTexture2D"),C$t=C$t("../platform/js");function C$r(){this.jsons={}}function C$s(){this.contents={}}C$r.prototype.load=function(C$t,C$e){C$e.length!==C$t.length&&cc.errorID(4915);for(var C$i=0;C$i<C$t.length;C$i++){var C$n=C$t[C$i],C$r=C$e[C$i];this.jsons[C$n]=C$r}},C$r.prototype.retrieve=function(C$t){return this.jsons[C$t]||null},C$s.ID=C$t._getClassId(C$n),C$s.prototype.load=function(C$t,C$e){var C$i=C$e.data.split("|");C$i.length!==C$t.length&&cc.errorID(4915);for(var C$n=0;C$n<C$t.length;C$n++)this.contents[C$t[C$n]]=C$i[C$n]},C$s.prototype.retrieve=function(C$t){C$t=this.contents[C$t];return C$t?{__type__:C$s.ID,content:C$t}:null},C$e.exports={JsonUnpacker:C$r,TextureUnpacker:C$s}},{"../assets/CCTexture2D":50,"../platform/js":209}],154:[function(C$t,C$e,C$i){"use strict";var C$n=/\?/;C$e.exports={urlAppendTimestamp:function(C$t){return cc.game.config.noCache&&"string"==typeof C$t&&(C$n.test(C$t)?C$t+="&_t="+ +new Date:C$t+="?_t="+ +new Date),C$t}}},{}],155:[function(C$t,C$e,C$i){"use strict";var C$a=C$t("../platform/js"),C$c=C$t("../CCDebug"),C$p=(C$t("../platform/deserialize"),C$t("./loading-items"));function C$l(C$t){return C$t&&(C$t[0]&&"cc.Scene"===C$t[0].__type__||C$t[1]&&"cc.Scene"===C$t[1].__type__||C$t[0]&&"cc.Prefab"===C$t[0].__type__)}function C$n(C$e,C$t){if("string"==typeof C$e.content)try{C$o=JSON.parse(C$e.content)}catch(C$t){return new Error(C$c.getError(4923,C$e.id,C$t.stack))}else{if("object"!=typeof C$e.content)return new Error(C$c.getError(4924));C$o=C$e.content}var C$i,C$n=C$l(C$o),C$r=C$n?cc._MissingScript.safeFindClass:function(C$t){var C$e=C$a._getClassById(C$t);return C$e||(cc.warnID(4903,C$t),Object)},C$s=cc.deserialize.Details.pool.get();try{C$i=cc.deserialize(C$o,C$s,{classFinder:C$r,target:C$e.existingAsset,customEnv:C$e})}catch(C$t){cc.deserialize.Details.pool.put(C$s);var C$o=C$t.stack;return new Error(C$c.getError(4925,C$e.id,C$o))}C$i._uuid=C$e.uuid,C$i.url=C$i.nativeUrl,C$r=C$i,C$o=C$n,(C$n=(C$n=C$e).deferredLoadRaw)?C$r instanceof cc.Asset&&C$r.constructor.preventDeferredLoadDependents&&(C$n=!1):C$o&&(C$r instanceof cc.SceneAsset||C$r instanceof cc.Prefab)&&(C$n=C$r.asyncLoadAssets);var C$u,C$_,C$f,C$d,C$r=function(C$h,C$t,C$e,C$u){var C$i,C$n,C$r=C$e.uuidList,C$s=C$e.uuidObjList,C$o=C$e.uuidPropList,C$a=C$e._stillUseUrl,C$_=C$h.dependKeys=[];if(C$u)for(C$i=[],C$n=0;C$n<C$r.length;C$n++){var C$c=C$r[C$n],C$d=C$s[C$n],C$f=C$o[C$n],C$l=cc.AssetLibrary._getAssetInfoInRuntime(C$c);C$l.raw?(C$l=C$l.url,C$d[C$f]=C$l,C$_.push(C$l)):C$i.push({type:"uuid",uuid:C$c,deferredLoadRaw:!0,_owner:C$d,_ownerProp:C$f,_stillUseUrl:C$a[C$n]})}else{for(C$i=new Array(C$r.length),C$n=0;C$n<C$r.length;C$n++)C$c=C$r[C$n],C$i[C$n]={type:"uuid",uuid:C$c,_owner:C$s[C$n],_ownerProp:C$o[C$n],_stillUseUrl:C$a[C$n]};C$t._native&&!C$t.constructor.preventPreloadNativeObject&&C$i.push({url:C$t.nativeUrl,_owner:C$t,_ownerProp:"_nativeAsset"})}return C$i}(C$e,C$i,C$s,C$n);if(cc.deserialize.Details.pool.put(C$s),0===C$r.length)return C$i.onLoad&&C$i.onLoad(),C$t(null,C$i);C$n=this.pipeline,C$u=C$i,C$_=C$r,C$f=C$t,(C$s=C$e).content=C$u,C$d=C$s.dependKeys,C$n.flowInDeps(C$s,C$_,function(C$t,C$h){var C$e,C$i=C$h.map;for(C$e in C$i)(C$s=C$i[C$e]).uuid&&C$s.content&&(C$s.content._uuid=C$s.uuid);function C$n(C$t){var C$e=C$t.content;this._stillUseUrl&&(C$e=C$e&&cc.RawAsset.wasRawAssetType(C$e.constructor)?C$e.nativeUrl:C$t.rawUrl),"_nativeAsset"===this._ownerProp&&(this._owner.url=C$t.url),this._owner[this._ownerProp]=C$e,C$t.uuid!==C$u._uuid&&C$d.indexOf(C$t.id)<0&&C$d.push(C$t.id)}for(var C$r=0;C$r<C$_.length;C$r++){var C$s,C$o,C$a=C$_[C$r],C$c=C$a.uuid,C$l=C$a.url;C$a._owner,C$a._ownerProp;(C$s=C$i[C$l])&&(C$l=C$a,C$s.complete||C$s.content?C$s.error?cc._throw(C$s.error.message||C$s.error.errorMessage||C$s.error):C$n.call(C$l,C$s):(C$o=(C$a=C$p.getQueue(C$s))._callbackTable[C$c])?C$o.unshift(C$n,C$l):C$a.addListener(C$c,C$n,C$l))}if(!C$t&&C$u.onLoad)try{C$u.onLoad()}catch(C$t){cc._throw(C$t)}C$f(C$t,C$u)})}(C$e.exports=C$n).isSceneObj=C$l},{"../CCDebug":27,"../platform/deserialize":204,"../platform/js":209,"./loading-items":146}],156:[function(C$t,C$e,C$r){"use strict";var C$l=C$i(C$t("../../renderer/core/input-assembler")),C$g=C$i(C$t("../../renderer/gfx")),C$h=C$t("./mesh-data");function C$i(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}var C$u=C$t("../renderer"),C$t=C$t("../event/event-target");function C$x(C$t,C$e,C$i){C$t[C$e]=C$i._val}function C$b(C$t,C$e,C$i){C$t[C$e]=C$i.x,C$t[C$e+1]=C$i.y}function C$A(C$t,C$e,C$i){C$t[C$e]=C$i.x,C$t[C$e+1]=C$i.y,C$t[C$e+2]=C$i.z}var C$y={5120:"getInt8",5121:"getUint8",5122:"getInt16",5123:"getUint16",5124:"getInt32",5125:"getUint32",5126:"getFloat32"},C$C={5120:"setInt8",5121:"setUint8",5122:"setInt16",5123:"setUint16",5124:"setInt32",5125:"setUint32",5126:"setFloat32"},C$v=(C$n=new ArrayBuffer(2),new DataView(C$n).setInt16(0,256,!0),256===new Int16Array(C$n)[0]),C$n=cc.Class({name:"cc.Mesh",extends:cc.Asset,mixins:[C$t],properties:{_nativeAsset:{override:!0,get:function(){return this._buffer},set:function(C$t){this._buffer=ArrayBuffer.isView(C$t)?C$t.buffer:C$t,this.initWithBuffer()}},_vertexBundles:{default:null,type:C$h.VertexBundle},_primitives:{default:null,Primitive:C$h.Primitive},_minPos:cc.v3(),_maxPos:cc.v3(),subMeshes:{get:function(){return this._subMeshes},set:function(C$t){this._subMeshes=C$t}},subDatas:{get:function(){return this._subDatas}}},ctor:function(){this._subMeshes=[],this.loaded=!1,this._subDatas=[]},initWithBuffer:function(){this._subMeshes.length=0;for(var C$t=this._primitives,C$e=0;C$e<C$t.length;C$e++){var C$i=C$t[C$e],C$n=C$i.data,C$n=new Uint8Array(this._buffer,C$n.offset,C$n.length),C$r=this._vertexBundles[C$i.vertexBundleIndices[0]],C$s=C$r.data,C$r=new C$g.default.VertexFormat(C$r.formats),C$o=new Uint8Array(this._buffer,C$s.offset,C$s.length),C$a=this._canVertexFormatBatch(C$r),C$c=new C$h.MeshData,C$s=(C$c.vData=C$o,C$c.iData=C$n,C$c.vfm=C$r,C$c.offset=C$s.offset,C$c.canBatch=C$a,this._subDatas.push(C$c),new C$g.default.VertexBuffer(C$u.device,C$r,C$g.default.USAGE_STATIC,C$o)),C$a=new C$g.default.IndexBuffer(C$u.device,C$i.indexUnit,C$g.default.USAGE_STATIC,C$n);this._subMeshes.push(new C$l.default(C$s,C$a))}this.loaded=!0,this.emit("load")},_canVertexFormatBatch:function(C$t){var C$e=C$t._attr2el[C$g.default.ATTR_POSITION];return!C$e||C$e.type===C$g.default.ATTR_TYPE_FLOAT32&&C$t._bytes%4==0},init:function(C$t,C$e,C$i,C$n){void 0===C$i&&(C$i=!1),void 0===C$n&&(C$n=0);var C$e=new Uint8Array(C$t._bytes*C$e),C$r=new C$h.MeshData,C$t=(C$r.vData=C$e,C$r.vfm=C$t,C$r.vDirty=!0,C$r.canBatch=this._canVertexFormatBatch(C$t),new C$g.default.VertexBuffer(C$u.device,C$t,C$i?C$g.default.USAGE_DYNAMIC:C$g.default.USAGE_STATIC,C$e)),C$i=(C$r.vb=C$t,this._subMeshes[C$n]=new C$l.default(C$r.vb),this._subDatas[C$n]);C$i&&(C$i.vb&&C$i.vb.destroy(),C$i.ib&&C$i.ib.destroy()),this._subDatas[C$n]=C$r,this.loaded=!0,this.emit("load"),this.emit("init-format")},setVertices:function(C$t,C$e,C$i){var C$i=this._subDatas[C$i=C$i||0],C$n=C$i.vfm.element(C$t);if(!C$n)return cc.warn("Cannot find "+C$t+" attribute in vertex defines.");var C$r,C$h="number"==typeof C$e[0],C$s=C$n.num,C$o=C$h?C$e.length/C$s|0:C$e.length,C$o=(C$i.vData.byteLength<C$o*C$n.stride&&C$i.setVData(new Uint8Array(C$o*C$i.vfm._bytes)),4),C$u=(C$t===C$g.default.ATTR_COLOR?C$h?(C$r=C$i.getVData(),C$o=1):C$r=C$i.getVData(Uint32Array):C$r=C$i.getVData(Float32Array),C$n.stride/C$o),C$_=C$n.offset/C$o;if(C$h)for(var C$a=0,C$d=C$e.length/C$s;C$a<C$d;C$a++)for(var C$f=C$a*C$s,C$p=C$a*C$u+C$_,C$c=0;C$c<C$s;C$c++)C$r[C$p+C$c]=C$e[C$f+C$c];else for(var C$m=C$t===C$g.default.ATTR_COLOR?C$x:2===C$s?C$b:C$A,C$l=0,C$y=C$e.length;C$l<C$y;C$l++)C$m(C$r,C$l*C$u+C$_,C$e[C$l]);C$i.vDirty=!0},setIndices:function(C$t,C$e,C$i){C$e=C$e||0;var C$n=C$t,C$t=(C$t instanceof Uint16Array?C$n=new Uint8Array(C$t.buffer,C$t.byteOffset,C$t.byteLength):Array.isArray(C$t)&&(C$n=new Uint16Array(C$t),C$n=new Uint8Array(C$n.buffer,C$n.byteOffset,C$n.byteLength)),C$i?C$g.default.USAGE_DYNAMIC:C$g.default.USAGE_STATIC),C$i=this._subDatas[C$e];C$i.ib?(C$i.iData=C$n,C$i.iDirty=!0):(C$i.iData=C$n,C$t=new C$g.default.IndexBuffer(C$u.device,C$g.default.INDEX_FMT_UINT16,C$t,C$n,C$n.byteLength/C$g.default.IndexBuffer.BYTES_PER_INDEX[C$g.default.INDEX_FMT_UINT16]),C$i.ib=C$t,this._subMeshes[C$e]._indexBuffer=C$i.ib)},setPrimitiveType:function(C$t,C$e){this._subMeshes[C$e=C$e||0]?this._subMeshes[C$e]._primitiveType=C$t:cc.warn("Do not have sub mesh at index "+C$e)},clear:function(){this._subMeshes.length=0;for(var C$t=this._subDatas,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e].vb,C$n=(C$n&&C$n.destroy(),C$t[C$e].ib);C$n&&C$n.destroy()}C$t.length=0},setBoundingBox:function(C$t,C$e){this._minPos=C$t,this._maxPos=C$e},destroy:function(){this.clear()},_uploadData:function(){for(var C$t=this._subDatas,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n,C$r,C$s=C$t[C$e];C$s.vDirty&&(C$n=C$s.vb,C$r=C$s.vData,C$n.update(0,C$r),C$s.vDirty=!1),C$s.iDirty&&(C$n=C$s.ib,C$r=C$s.iData,C$n.update(0,C$r),C$s.iDirty=!1)}},_getAttrMeshData:function(C$t,C$e){C$t=this._subDatas[C$t];if(!C$t)return[];var C$i=C$t.vfm,C$n=C$i.element(C$e);if(!C$n)return[];C$t.attrDatas||(C$t.attrDatas={});var C$r=C$t.attrDatas;if(C$s=C$r[C$e])return C$s;for(var C$s=C$r[C$e]=[],C$r=C$t.vData,C$o=new DataView(C$r.buffer,C$r.byteOffset,C$r.byteLength),C$h=C$n.stride,C$u=C$n.offset,C$a=C$n.num,C$_=C$n.bytes/C$a,C$d=C$y[C$n.type],C$f=C$r.byteLength/C$i._bytes,C$c=0;C$c<C$f;C$c++)for(var C$p=C$c*C$h+C$u,C$l=0;C$l<C$a;C$l++){var C$m=C$o[C$d](C$p+C$l*C$_,C$v);C$s.push(C$m)}return C$s},copyAttribute:function(C$t,C$e,C$h,C$u,C$_){var C$i=!1,C$n=this._subDatas[C$t];if(!C$n)return C$i;var C$r=C$n.vfm,C$s=C$r.element(C$e);if(!C$s)return C$i;var C$o=C$C[C$s.type];if(!C$o)return C$i;var C$a=this._getAttrMeshData(C$t,C$e),C$d=C$n.vData.byteLength/C$r._bytes,C$f=C$s.bytes/C$s.num;if(0<C$a.length){for(var C$p=new DataView(C$h,C$_),C$m=C$u,C$y=C$s.num,C$c=0;C$c<C$d;++C$c)for(var C$g=C$c*C$y,C$l=0;C$l<C$y;++C$l)C$p[C$o](C$m*C$c+C$f*C$l,C$a[C$g+C$l],C$v);C$i=!0}return C$i},copyIndices:function(C$t,C$e){C$t=this._subDatas[C$t];if(!C$t)return!1;for(var C$t=C$t.iData,C$i=C$t.length/2,C$n=new DataView(C$t.buffer,C$t.byteOffset,C$t.byteLength),C$r=C$y[C$g.default.INDEX_FMT_UINT8],C$s=0;C$s<C$i;++C$s)C$e[C$s]=C$n[C$r](2*C$s);return!0}});cc.Mesh=C$e.exports=C$n},{"../../renderer/core/input-assembler":302,"../../renderer/gfx":312,"../event/event-target":115,"../renderer":220,"./mesh-data":159}],157:[function(C$t,C$r,C$s){"use strict";var C$S=C$i(C$t("../../renderer/gfx")),C$T=C$i(C$t("../../renderer/core/input-assembler")),C$e=C$i(C$t("../geom-utils/aabb")),C$o=C$t("../utils/mesh-util"),C$w=C$i(C$t("../value-types/vec3")),C$B=C$i(C$t("../value-types/mat4")),C$E=C$i(C$t("../assets/material/material-variant"));function C$i(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}var C$a=C$t("../components/CCRenderComponent"),C$c=C$t("./CCMesh"),C$l=C$t("../renderer/render-flow"),C$M=C$t("../renderer"),C$h=C$t("../assets/material/CCMaterial"),C$n=cc.Enum({OFF:0,ON:1}),C$t=cc.Class({name:"cc.MeshRenderer",extends:C$a,editor:!1,properties:{_mesh:{default:null,type:C$c},_receiveShadows:!1,_shadowCastingMode:C$n.OFF,_enableAutoBatch:!1,mesh:{get:function(){return this._mesh},set:function(C$t){this._mesh!==C$t&&(this._setMesh(C$t),C$t?(this.markForRender(!0),this.node._renderFlag|=C$l.FLAG_TRANSFORM):this.disableRender())},type:C$c,animatable:!1},textures:{default:[],type:cc.Texture2D,visible:!1},receiveShadows:{get:function(){return this._receiveShadows},set:function(C$t){this._receiveShadows=C$t,this._updateReceiveShadow()},animatable:!1},shadowCastingMode:{get:function(){return this._shadowCastingMode},set:function(C$t){this._shadowCastingMode=C$t,this._updateCastShadow()},type:C$n,animatable:!1},enableAutoBatch:{get:function(){return this._enableAutoBatch},set:function(C$t){this._enableAutoBatch=C$t}}},statics:{ShadowCastingMode:C$n},ctor:function(){this._boundingBox=cc.geomUtils&&new C$e.default,this._debugDatas={wireFrame:[],normal:[]}},onEnable:function(){var C$t=this;this._super(),this._mesh&&!this._mesh.loaded?(this.disableRender(),this._mesh.once("load",function(){C$t.isValid&&(C$t._setMesh(C$t._mesh),C$t.markForRender(!0))}),(0,C$o.postLoadMesh)(this._mesh)):this._setMesh(this._mesh),this._updateRenderNode(),this._updateMaterial()},onDestroy:function(){this._setMesh(null),cc.pool.assembler.put(this._assembler)},_updateRenderNode:function(){this._assembler.setRenderNode(this.node)},_setMesh:function(C$t){cc.geomUtils&&C$t&&C$e.default.fromPoints(this._boundingBox,C$t._minPos,C$t._maxPos),this._mesh&&this._mesh.off("init-format",this._updateMeshAttribute,this),C$t&&C$t.on("init-format",this._updateMeshAttribute,this),this._mesh=C$t,this._updateMeshAttribute()},_getDefaultMaterial:function(){return C$h.getBuiltinMaterial("unlit")},_validateRender:function(){var C$t=this._mesh;C$t&&0<C$t._subDatas.length||this.disableRender()},_updateMaterial:function(){var C$t=this.textures;if(C$t&&0<C$t.length)for(var C$e=this._getDefaultMaterial(),C$i=0;C$i<C$t.length;C$i++){var C$n=this._materials[C$i];C$n&&C$n._uuid!==C$e._uuid||(C$n||(C$n=C$E.default.create(C$e,this),this.setMaterial(C$i,C$n)),C$n.setProperty("diffuseTexture",C$t[C$i]))}this._updateReceiveShadow(),this._updateCastShadow(),this._updateMeshAttribute()},_updateReceiveShadow:function(){for(var C$t=this.getMaterials(),C$e=0;C$e<C$t.length;C$e++)C$t[C$e].define("CC_USE_SHADOW_MAP",this._receiveShadows,void 0,!0)},_updateCastShadow:function(){for(var C$t=this.getMaterials(),C$e=0;C$e<C$t.length;C$e++)C$t[C$e].define("CC_CASTING_SHADOW",this._shadowCastingMode===C$n.ON,void 0,!0)},_updateMeshAttribute:function(){var C$t=this._mesh&&this._mesh.subDatas;if(C$t){for(var C$e,C$i=this.getMaterials(),C$n=0;C$n<C$i.length&&C$t[C$n];C$n++){var C$r=C$t[C$n].vfm,C$s=C$i[C$n];C$s.define("CC_USE_ATTRIBUTE_COLOR",!!C$r.element(C$S.default.ATTR_COLOR),void 0,!0),C$s.define("CC_USE_ATTRIBUTE_UV0",!!C$r.element(C$S.default.ATTR_UV0),void 0,!0),C$s.define("CC_USE_ATTRIBUTE_NORMAL",!!C$r.element(C$S.default.ATTR_NORMAL),void 0,!0),C$s.define("CC_USE_ATTRIBUTE_TANGENT",!!C$r.element(C$S.default.ATTR_TANGENT),void 0,!0)}for(C$e in this._debugDatas)this._debugDatas[C$e].length=0}},_checkBacth:function(){}}),C$u=cc.Color.BLACK,C$R=cc.Color.RED,C$I=[cc.v3(),cc.v3()],C$P=cc.mat4(),C$_={normal:function(C$t,C$h,C$e,C$i){var C$e=C$e.vfm,C$u=C$e.element(C$S.default.ATTR_NORMAL),C$n=C$e.element(C$S.default.ATTR_POSITION),C$r=C$e.element(C$S.default.ATTR_JOINTS),C$s=C$e.element(C$S.default.ATTR_WEIGHTS);if(C$u&&C$n){for(var C$_,C$d=[],C$o=[],C$e=(C$w.default.set(C$I[0],5,0,0),C$B.default.invert(C$P,C$t.node._worldMatrix),C$w.default.transformMat4Normal(C$I[0],C$I[0],C$P),C$_=C$I[0].mag(),C$t.mesh),C$a=C$e._getAttrMeshData(C$i,C$S.default.ATTR_POSITION),C$f=C$e._getAttrMeshData(C$i,C$S.default.ATTR_NORMAL),C$p=C$e._getAttrMeshData(C$i,C$S.default.ATTR_JOINTS),C$m=C$e._getAttrMeshData(C$i,C$S.default.ATTR_WEIGHTS),C$y=C$a.length/C$n.num,C$c=0;C$c<C$y;C$c++){var C$g=C$c*C$u.num,C$v=C$c*C$n.num;C$w.default.set(C$I[0],C$f[C$g],C$f[1+C$g],C$f[2+C$g]),C$w.default.set(C$I[1],C$a[C$v],C$a[1+C$v],C$a[2+C$v]),C$w.default.scaleAndAdd(C$I[0],C$I[1],C$I[0],C$_);for(var C$l=0;C$l<2;C$l++){if(C$o.push(C$I[C$l].x,C$I[C$l].y,C$I[C$l].z),C$r)for(var C$x=C$c*C$r.num,C$b=0;C$b<C$r.num;C$b++)C$o.push(C$p[C$x+C$b]);if(C$s)for(var C$A=C$c*C$s.num,C$C=0;C$C<C$s.num;C$C++)C$o.push(C$m[C$A+C$C])}C$d.push(2*C$c,2*C$c+1)}C$t=[{name:C$S.default.ATTR_POSITION,type:C$S.default.ATTR_TYPE_FLOAT32,num:3}],C$e=(C$r&&C$t.push({name:C$S.default.ATTR_JOINTS,type:C$S.default.ATTR_TYPE_FLOAT32,num:C$r.num}),C$s&&C$t.push({name:C$S.default.ATTR_WEIGHTS,type:C$S.default.ATTR_TYPE_FLOAT32,num:C$s.num}),new C$S.default.VertexFormat(C$t)),C$i=new C$S.default.VertexBuffer(C$M.device,C$e,C$S.default.USAGE_STATIC,new Float32Array(C$o)),C$t=new Uint16Array(C$d),C$e=new C$S.default.IndexBuffer(C$M.device,C$S.default.INDEX_FMT_UINT16,C$S.default.USAGE_STATIC,C$t,C$t.length),C$t=C$E.default.createWithBuiltin("unlit");return C$t.setProperty("diffuseColor",C$R),{material:C$t,ia:new C$T.default(C$i,C$e,C$S.default.PT_LINES)}}},wireFrame:function(C$l,C$t,C$e){for(var C$i=C$e.getIData(Uint16Array),C$e=C$E.default.createWithBuiltin("unlit"),C$n=(C$e.setProperty("diffuseColor",C$u),[]),C$r=0;C$r<C$i.length;C$r+=3){var C$s=C$i[C$r+0],C$o=C$i[C$r+1],C$a=C$i[C$r+2];C$n.push(C$s,C$o,C$o,C$a,C$a,C$s)}var C$c=new Uint16Array(C$n),C$c=new C$S.default.IndexBuffer(C$M.device,C$S.default.INDEX_FMT_UINT16,C$S.default.USAGE_STATIC,C$c,C$c.length);return{material:C$e,ia:new C$T.default(C$t._vertexBuffer,C$c,C$S.default.PT_LINES)}}};C$t.prototype._updateDebugDatas=function(){var C$t,C$e=this._debugDatas,C$i=this._mesh.subMeshes,C$n=this._mesh._subDatas;for(C$t in C$e){var C$r=C$e[C$t];if(C$r.length!==C$i.length&&cc.macro["SHOW_MESH_"+C$t.toUpperCase()]){C$r.length=C$i.length;for(var C$s=0;C$s<C$i.length;C$s++)C$r[C$s]=C$_[C$t](this,C$i[C$s],C$n[C$s],C$s)}}},cc.MeshRenderer=C$r.exports=C$t},{"../../renderer/core/input-assembler":302,"../../renderer/gfx":312,"../assets/material/CCMaterial":53,"../assets/material/material-variant":60,"../components/CCRenderComponent":89,"../geom-utils/aabb":119,"../renderer":220,"../renderer/render-flow":221,"../utils/mesh-util":263,"../value-types/mat4":281,"../value-types/vec3":289,"./CCMesh":156}],158:[function(C$t,C$e,C$i){"use strict";C$t("./CCMesh"),C$t("./CCMeshRenderer"),C$t("./mesh-renderer")},{"./CCMesh":156,"./CCMeshRenderer":157,"./mesh-renderer":160}],159:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.MeshData=C$s,C$i.Primitive=C$i.VertexBundle=C$i.VertexFormat=C$i.BufferRange=void 0;C$t=(C$t=C$t("../../renderer/gfx"))&&C$t.__esModule?C$t:{default:C$t};var C$n=cc.Class({name:"cc.BufferRange",properties:{offset:0,length:0}}),C$r=(C$i.BufferRange=C$n,cc.Class({name:"cc.mesh.VertexFormat",properties:{name:"",type:-1,num:-1,normalize:!1}})),C$r=(C$i.VertexFormat=C$r,cc.Class({name:"cc.mesh.VertexBundle",properties:{data:{default:null,type:C$n},formats:{default:[],type:C$r},verticesCount:0}})),C$r=(C$i.VertexBundle=C$r,cc.Class({name:"cc.mesh.Primitive",properties:{vertexBundleIndices:{default:[],type:cc.Float},data:{default:null,type:C$n},indexUnit:C$t.default.INDEX_FMT_UINT16,topology:C$t.default.PT_TRIANGLES}}));function C$s(){this.vData=null,this.float32VData=null,this.uint32VData=null,this.iData=null,this.uint16IData=null,this.vfm=null,this.offset=0,this.vb=null,this.ib=null,this.vDirty=!1,this.iDirty=!1,this.enable=!0}C$i.Primitive=C$r,C$s.prototype.setVData=function(C$t){this.vData=C$t,this.float32VData=null,this.uint32VData=null},C$s.prototype.getVData=function(C$t){return C$t===Float32Array?(this.float32VData||(this.float32VData=new Float32Array(this.vData.buffer,this.vData.byteOffset,this.vData.byteLength/4)),this.float32VData):C$t===Uint32Array?(this.uint32VData||(this.uint32VData=new Uint32Array(this.vData.buffer,this.vData.byteOffset,this.vData.byteLength/4)),this.uint32VData):this.vData},C$s.prototype.getIData=function(C$t){return C$t===Uint16Array?(this.uint16IData||(this.uint16IData=new Uint16Array(this.iData.buffer,this.iData.byteOffset,this.iData.byteLength/2)),this.uint16IData):this.iData}},{"../../renderer/gfx":312}],160:[function(C$t,C$a,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$c=C$i(C$t("../renderer/assembler")),C$p=C$i(C$t("../../renderer/gfx")),C$m=C$i(C$t("../value-types/vec3"));function C$i(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$l(C$i){return function(){var C$t,C$e=C$h(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$h(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$h(C$t){return(C$h=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$n,C$r,C$t=C$t("./CCMeshRenderer"),C$y=new C$m.default,C$s=(C$n=C$c.default,C$s=C$n,(C$r=C$o).prototype=Object.create(C$s.prototype),(C$r.prototype.constructor=C$r).__proto__=C$s,C$l(C$o),(C$r=C$o.prototype).init=function(C$t){C$n.prototype.init.call(this,C$t),this._worldDatas={},this._renderNode=null},C$r.setRenderNode=function(C$t){this._renderNode=C$t},C$r.fillBuffers=function(C$t,C$e){if(C$t.mesh){C$t.mesh._uploadData();for(var C$i=C$e.cullingMask===C$t.node._cullingMask,C$n=C$t.enableAutoBatch,C$r=C$t._materials,C$s=C$t.mesh._subMeshes,C$h=C$t.mesh.subDatas,C$o=0;C$o<C$s.length;C$o++){var C$a=C$s[C$o],C$c=C$h[C$o],C$l=C$r[C$o]||C$r[0];C$n&&C$c.canBatch&&C$a._primitiveType===C$p.default.PT_TRIANGLES?(C$i&&C$l.getHash()===C$e.material.getHash()||C$e._flush(),C$e.material=C$l,C$e.cullingMask=C$t.node._cullingMask,C$e.node=C$e._dummyNode,this._fillBuffer(C$t,C$c,C$e,C$o)):(C$e._flush(),C$e.material=C$l,C$e.cullingMask=C$t.node._cullingMask,C$e.node=this._renderNode,C$e._flushIA(C$a))}!cc.macro.SHOW_MESH_WIREFRAME&&!cc.macro.SHOW_MESH_NORMAL||C$t.node._cullingMask&1<<cc.Node.BuiltinGroupIndex.DEBUG||(C$e._flush(),C$e.node=this._renderNode,C$t._updateDebugDatas(),cc.macro.SHOW_MESH_WIREFRAME&&this._drawDebugDatas(C$t,C$e,"wireFrame"),cc.macro.SHOW_MESH_NORMAL&&this._drawDebugDatas(C$t,C$e,"normal"))}},C$r._fillBuffer=function(C$h,C$t,C$e,C$i){var C$n=C$t.getVData(Float32Array),C$r=C$t.vfm,C$s=C$n.byteLength/C$r._bytes|0,C$o=C$t.getIData(Uint16Array),C$a=C$o.length,C$t=C$e.getBuffer("mesh",C$r),C$c=C$t.request(C$s,C$a),C$u=C$c.indiceOffset,C$_=C$c.byteOffset>>2,C$d=C$c.vertexOffset,C$c=C$t._vData,C$f=C$t._iData;!C$e.worldMatDirty&&this._worldDatas[C$i]||this._updateWorldVertices(C$i,C$s,C$n,C$r,C$h.node._worldMatrix),C$c.set(this._worldDatas[C$i],C$_);for(var C$l=0;C$l<C$a;C$l++)C$f[C$u+C$l]=C$d+C$o[C$l]},C$r._updateWorldVertices=function(C$t,C$e,C$i,C$n,C$h){for(var C$r=this._worldDatas[C$t],C$u=(C$r||(C$r=this._worldDatas[C$t]=new Float32Array(C$i.length)).set(C$i),C$n._bytes/4),C$s=C$n._elements,C$o=0,C$_=C$s.length;C$o<C$_;C$o++){var C$a=C$s[C$o],C$d=C$a.offset/4;if(C$a.name===C$p.default.ATTR_POSITION||C$a.name===C$p.default.ATTR_NORMAL)for(var C$f=C$a.name===C$p.default.ATTR_NORMAL?C$m.default.transformMat4Normal:C$m.default.transformMat4,C$c=0;C$c<C$e;C$c++){var C$l=C$c*C$u+C$d;C$y.x=C$i[C$l],C$y.y=C$i[1+C$l],C$y.z=C$i[2+C$l],C$f(C$y,C$y,C$h),C$r[C$l]=C$y.x,C$r[1+C$l]=C$y.y,C$r[2+C$l]=C$y.z}}},C$r._drawDebugDatas=function(C$t,C$e,C$i){var C$n=C$t._debugDatas[C$i];if(C$n)for(var C$r=0;C$r<C$n.length;C$r++){var C$s,C$o=C$n[C$r];C$o&&(C$s=C$o.material,C$e.material=C$s,C$e._flushIA(C$o.ia))}},C$o);function C$o(){return C$n.apply(this,arguments)||this}C$e.default=C$s,C$c.default.register(C$t,C$s),C$a.exports=C$e.default},{"../../renderer/gfx":312,"../renderer/assembler":217,"../value-types/vec3":289,"./CCMeshRenderer":157}],161:[function(C$t,C$c,C$l){"use strict";var C$i=C$t("./component-scheduler"),C$e=C$t("./platform/CCObject").Flags,C$_=C$t("./platform/js"),C$s=C$e.IsPreloadStarted,C$o=C$e.IsOnLoadStarted,C$r=C$e.IsOnLoadCalled,C$d=C$e.Deactivating,C$h=cc.Class({extends:C$i.LifeCycleInvoker,add:function(C$t){this._zero.array.push(C$t)},remove:function(C$t){this._zero.fastRemove(C$t)},cancelInactive:function(C$t){C$i.LifeCycleInvoker.stableRemoveInactive(this._zero,C$t)},invoke:function(){this._invoke(this._zero),this._zero.array.length=0}}),C$u=C$i.createInvokeImpl(function(C$t){C$t.__preload()},!1,void 0,function(C$t){var C$e=C$t.array;for(C$t.i=0;C$t.i<C$e.length;++C$t.i)C$e[C$t.i].__preload()}),C$f=C$i.createInvokeImpl(function(C$t){C$t.onLoad(),C$t._objFlags|=C$r},!1,C$r,function(C$t){var C$e=C$t.array;for(C$t.i=0;C$t.i<C$e.length;++C$t.i){var C$i=C$e[C$t.i];C$i.onLoad(),C$i._objFlags|=C$r}}),C$a=new C$_.Pool(4);function C$n(){this._activatingStack=[]}C$a.get=function(){var C$t=this._get()||{preload:new C$h(C$u),onLoad:new C$i.OneOffInvoker(C$f),onEnable:new C$i.OneOffInvoker(C$i.invokeOnEnable)},C$e=(C$t.preload._zero.i=-1,C$t.onLoad);return C$e._zero.i=-1,C$e._neg.i=-1,C$e._pos.i=-1,(C$e=C$t.onEnable)._zero.i=-1,C$e._neg.i=-1,C$e._pos.i=-1,C$t};C$t=cc.Class({ctor:C$n,reset:C$n,_activateNodeRecursively:function(C$t,C$e,C$i,C$n){if(C$t._objFlags&C$d)cc.errorID(3816,C$t.name);else{C$t._activeInHierarchy=!0;for(var C$r,C$s,C$h=C$t._components.length,C$o=0;C$o<C$h;++C$o){var C$a=C$t._components[C$o];C$a instanceof cc.Component?this.activateComp(C$a,C$e,C$i,C$n):(C$r=C$t,C$s=C$o,(C$a=C$a)?C$r._removeComponent(C$a):C$_.array.removeAt(C$r._components,C$s),--C$o,--C$h)}C$t._childArrivalOrder=C$t._children.length;for(var C$c=0,C$u=C$t._children.length;C$c<C$u;++C$c){var C$l=C$t._children[C$c];C$l._localZOrder=4294901760&C$l._localZOrder|C$c+1,C$l._active&&this._activateNodeRecursively(C$l,C$e,C$i,C$n)}C$t._onPostActivated(!0)}},_deactivateNodeRecursively:function(C$t){C$t._objFlags|=C$d,C$t._activeInHierarchy=!1;for(var C$e=C$t._components.length,C$i=0;C$i<C$e;++C$i){var C$n=C$t._components[C$i];if(C$n._enabled&&(cc.director._compScheduler.disableComp(C$n),C$t._activeInHierarchy))return void(C$t._objFlags&=~C$d)}for(var C$r=0,C$s=C$t._children.length;C$r<C$s;++C$r){var C$o=C$t._children[C$r];if(C$o._activeInHierarchy&&(this._deactivateNodeRecursively(C$o),C$t._activeInHierarchy))return void(C$t._objFlags&=~C$d)}C$t._onPostActivated(!1),C$t._objFlags&=~C$d},activateNode:function(C$t,C$e){if(C$e){C$e=C$a.get();this._activatingStack.push(C$e),this._activateNodeRecursively(C$t,C$e.preload,C$e.onLoad,C$e.onEnable),C$e.preload.invoke(),C$e.onLoad.invoke(),C$e.onEnable.invoke(),this._activatingStack.pop(),C$a.put(C$e)}else{this._deactivateNodeRecursively(C$t);for(var C$i=this._activatingStack,C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n];C$r.preload.cancelInactive(C$s),C$r.onLoad.cancelInactive(C$o),C$r.onEnable.cancelInactive()}}C$t.emit("active-in-hierarchy-changed",C$t)},activateComp:function(C$t,C$e,C$i,C$n){cc.isValid(C$t,!0)&&(C$t._objFlags&C$s||(C$t._objFlags|=C$s,C$t.__preload&&(C$e?C$e.add(C$t):C$t.__preload())),C$t._objFlags&C$o||(C$t._objFlags|=C$o,C$t.onLoad?C$i?C$i.add(C$t):(C$t.onLoad(),C$t._objFlags|=C$r):C$t._objFlags|=C$r),!C$t._enabled||C$t.node._activeInHierarchy&&cc.director._compScheduler.enableComp(C$t,C$n))},destroyComp:function(C$t){cc.director._compScheduler.disableComp(C$t),C$t.onDestroy&&C$t._objFlags&C$r&&C$t.onDestroy()},resetComp:!1});C$c.exports=C$t},{"./component-scheduler":72,"./platform/CCObject":195,"./platform/js":209,"./utils/misc":264}],162:[function(C$t,C$r,C$o){"use strict";var C$l=C$t("./CCPhysicsTypes").PTM_RATIO,C$h=C$t("./CCPhysicsTypes").ContactType,C$i=[],C$d=[cc.v2(),cc.v2()],C$c=new b2.WorldManifold,C$u={points:[],separations:[],normal:cc.v2()};function C$e(){this.localPoint=cc.v2(),this.normalImpulse=0,this.tangentImpulse=0}var C$f=[new C$e,new C$e],C$_=(new b2.Manifold,{type:0,localPoint:cc.v2(),localNormal:cc.v2(),points:[]}),C$s={normalImpulses:[],tangentImpulses:[]};function C$n(){}C$n.prototype.init=function(C$t){this.colliderA=C$t.GetFixtureA().collider,this.colliderB=C$t.GetFixtureB().collider,this.disabled=!1,this.disabledOnce=!1,this._impulse=null,this._inverted=!1,(this._b2contact=C$t)._contact=this},C$n.prototype.reset=function(){this.setTangentSpeed(0),this.resetFriction(),this.resetRestitution(),this.colliderA=null,this.colliderB=null,this.disabled=!1,this._impulse=null,this._b2contact._contact=null,this._b2contact=null},C$n.prototype.getWorldManifold=function(){var C$t=C$u.points,C$e=C$u.separations,C$i=C$u.normal,C$n=(this._b2contact.GetWorldManifold(C$c),C$c.points),C$r=C$c.separations,C$s=this._b2contact.GetManifold().pointCount;C$t.length=C$e.length=C$s;for(var C$o=0;C$o<C$s;C$o++){var C$a=C$d[C$o];C$a.x=C$n[C$o].x*C$l,C$a.y=C$n[C$o].y*C$l,C$t[C$o]=C$a,C$e[C$o]=C$r[C$o]*C$l}return C$i.x=C$c.normal.x,C$i.y=C$c.normal.y,this._inverted&&(C$i.x*=-1,C$i.y*=-1),C$u},C$n.prototype.getManifold=function(){for(var C$t=C$_.points,C$e=C$_.localNormal,C$i=C$_.localPoint,C$n=this._b2contact.GetManifold(),C$r=C$n.points,C$s=C$t.length=C$n.pointCount,C$o=0;C$o<C$s;C$o++){var C$a=C$f[C$o],C$c=C$r[C$o];C$a.localPoint.x=C$c.localPoint.x*C$l,C$a.localPoint.Y=C$c.localPoint.Y*C$l,C$a.normalImpulse=C$c.normalImpulse*C$l,C$a.tangentImpulse=C$c.tangentImpulse,C$t[C$o]=C$a}return C$i.x=C$n.localPoint.x*C$l,C$i.y=C$n.localPoint.y*C$l,C$e.x=C$n.localNormal.x,C$e.y=C$n.localNormal.y,C$_.type=C$n.type,this._inverted&&(C$e.x*=-1,C$e.y*=-1),C$_},C$n.prototype.getImpulse=function(){var C$t=this._impulse;if(!C$t)return null;for(var C$e=C$s.normalImpulses,C$i=C$s.tangentImpulses,C$n=C$t.count,C$r=0;C$r<C$n;C$r++)C$e[C$r]=C$t.normalImpulses[C$r]*C$l,C$i[C$r]=C$t.tangentImpulses[C$r];return C$i.length=C$e.length=C$n,C$s},C$n.prototype.emit=function(C$t){var C$e;switch(C$t){case C$h.BEGIN_CONTACT:C$e="onBeginContact";break;case C$h.END_CONTACT:C$e="onEndContact";break;case C$h.PRE_SOLVE:C$e="onPreSolve";break;case C$h.POST_SOLVE:C$e="onPostSolve"}var C$i,C$n,C$r,C$s,C$o=this.colliderA,C$a=this.colliderB,C$t=C$o.body,C$c=C$a.body;if(C$t.enabledContactListener)for(C$i=C$t.node._components,this._inverted=!1,C$n=0,C$r=C$i.length;C$n<C$r;C$n++)(C$s=C$i[C$n])[C$e]&&C$s[C$e](this,C$o,C$a);if(C$c.enabledContactListener)for(C$i=C$c.node._components,this._inverted=!0,C$n=0,C$r=C$i.length;C$n<C$r;C$n++)(C$s=C$i[C$n])[C$e]&&C$s[C$e](this,C$a,C$o);(this.disabled||this.disabledOnce)&&(this.setEnabled(!1),this.disabledOnce=!1)},C$n.get=function(C$t){var C$e=0===C$i.length?new cc.PhysicsContact:C$i.pop();return C$e.init(C$t),C$e},C$n.put=function(C$t){C$t=C$t._contact;C$t&&(C$i.push(C$t),C$t.reset())};C$t=C$n.prototype;C$t.setEnabled=function(C$t){this._b2contact.SetEnabled(C$t)},C$t.isTouching=function(){return this._b2contact.IsTouching()},C$t.setTangentSpeed=function(C$t){this._b2contact.SetTangentSpeed(C$t/C$l)},C$t.getTangentSpeed=function(){return this._b2contact.GetTangentSpeed()*C$l},C$t.setFriction=function(C$t){this._b2contact.SetFriction(C$t)},C$t.getFriction=function(){return this._b2contact.GetFriction()},C$t.resetFriction=function(){return this._b2contact.ResetFriction()},C$t.setRestitution=function(C$t){this._b2contact.SetRestitution(C$t)},C$t.getRestitution=function(){return this._b2contact.GetRestitution()},C$t.resetRestitution=function(){return this._b2contact.ResetRestitution()},C$n.ContactType=C$h,cc.PhysicsContact=C$r.exports=C$n},{"./CCPhysicsTypes":164}],163:[function(C$t,C$r,C$s){"use strict";var C$e=C$t("./CCPhysicsTypes"),C$i=C$e.ContactType,C$c=C$e.BodyType,C$d=C$e.RayCastType,C$o=C$e.DrawBits,C$f=C$e.PTM_RATIO,C$h=(C$e.ANGLE_TO_PHYSICS_ANGLE,C$e.PHYSICS_ANGLE_TO_ANGLE),C$u=C$t("./utils").convertToNodeRotation,C$_=C$t("./platform/CCPhysicsDebugDraw"),C$n=new b2.AABB,C$p=new b2.Vec2,C$m=new b2.Vec2,C$a=cc.v2(),C$l=cc.Class({mixins:[cc.EventTarget],statics:{DrawBits:C$o,PTM_RATIO:C$f,VELOCITY_ITERATIONS:10,POSITION_ITERATIONS:10,FIXED_TIME_STEP:1/60,MAX_ACCUMULATOR:.2},ctor:function(){this._debugDrawFlags=0,this._debugDrawer=null,this._world=null,this._bodies=[],this._joints=[],this._contactMap={},this._contactID=0,this._delayEvents=[],this._accumulator=0,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this),this.enabledAccumulator=!1},pushDelayEvent:function(C$t,C$e,C$i){this._steping?this._delayEvents.push({target:C$t,func:C$e,args:C$i}):C$t[C$e].apply(C$t,C$i)},update:function(C$t){var C$e=this._world;if(C$e&&this.enabled){this.emit("before-step"),this._steping=!0;var C$i=C$l.VELOCITY_ITERATIONS,C$n=C$l.POSITION_ITERATIONS;if(this.enabledAccumulator){this._accumulator+=C$t;var C$r=C$l.FIXED_TIME_STEP,C$t=C$l.MAX_ACCUMULATOR;for(this._accumulator>C$t&&(this._accumulator=C$t);this._accumulator>C$r;)C$e.Step(C$r,C$i,C$n),this._accumulator-=C$r}else{C$t=1/cc.game.config.frameRate;C$e.Step(C$t,C$i,C$n)}this.debugDrawFlags&&(this._checkDebugDrawValid(),this._debugDrawer.clear(),C$e.DrawDebugData()),this._steping=!1;for(var C$s=this._delayEvents,C$o=0,C$a=C$s.length;C$o<C$a;C$o++){var C$c=C$s[C$o];C$c.target[C$c.func].apply(C$c.target,C$c.args)}C$s.length=0,this._syncNode()}},testPoint:function(C$t){var C$e=C$p.x=C$t.x/C$f,C$t=C$p.y=C$t.y/C$f,C$i=.2/C$f,C$e=(C$n.lowerBound.x=C$e-C$i,C$n.lowerBound.y=C$t-C$i,C$n.upperBound.x=C$e+C$i,C$n.upperBound.y=C$t+C$i,this._aabbQueryCallback),C$t=(C$e.init(C$p),this._world.QueryAABB(C$e,C$n),C$e.getFixture());return C$t?C$t.collider:null},testAABB:function(C$t){C$n.lowerBound.x=C$t.xMin/C$f,C$n.lowerBound.y=C$t.yMin/C$f,C$n.upperBound.x=C$t.xMax/C$f,C$n.upperBound.y=C$t.yMax/C$f;C$t=this._aabbQueryCallback;return C$t.init(),this._world.QueryAABB(C$t,C$n),C$t.getFixtures().map(function(C$t){return C$t.collider})},rayCast:function(C$t,C$e,C$i){if(C$t.equals(C$e))return[];C$i=C$i||C$d.Closest,C$p.x=C$t.x/C$f,C$p.y=C$t.y/C$f,C$m.x=C$e.x/C$f,C$m.y=C$e.y/C$f;var C$t=this._raycastQueryCallback,C$n=(C$t.init(C$i),this._world.RayCast(C$t,C$p,C$m),C$t.getFixtures());if(0<C$n.length){for(var C$r=C$t.getPoints(),C$s=C$t.getNormals(),C$o=C$t.getFractions(),C$h=[],C$a=0,C$u=C$n.length;C$a<C$u;C$a++){var C$_=C$n[C$a],C$c=C$_.collider;if(C$i===C$d.AllClosest){var C$l=C$h.find(function(C$t){return C$t.collider===C$c});if(C$l){C$o[C$a]<C$l.fraction&&(C$l.fixtureIndex=C$c._getFixtureIndex(C$_),C$l.point.x=C$r[C$a].x*C$f,C$l.point.y=C$r[C$a].y*C$f,C$l.normal.x=C$s[C$a].x,C$l.normal.y=C$s[C$a].y,C$l.fraction=C$o[C$a]);continue}}C$h.push({collider:C$c,fixtureIndex:C$c._getFixtureIndex(C$_),point:cc.v2(C$r[C$a].x*C$f,C$r[C$a].y*C$f),normal:cc.v2(C$s[C$a]),fraction:C$o[C$a]})}return C$h}return[]},syncPosition:function(){for(var C$t=this._bodies,C$e=0;C$e<C$t.length;C$e++)C$t[C$e].syncPosition()},syncRotation:function(){for(var C$t=this._bodies,C$e=0;C$e<C$t.length;C$e++)C$t[C$e].syncRotation()},_registerContactFixture:function(C$t){this._contactListener.registerContactFixture(C$t)},_unregisterContactFixture:function(C$t){this._contactListener.unregisterContactFixture(C$t)},_addBody:function(C$t,C$e){var C$i=this._world,C$n=C$t.node;C$i&&C$n&&(C$t._b2Body=C$i.CreateBody(C$e),C$t._b2Body.body=C$t,this._bodies.push(C$t))},_removeBody:function(C$t){var C$e=this._world;C$e&&(C$t._b2Body.body=null,C$e.DestroyBody(C$t._b2Body),C$t._b2Body=null,cc.js.array.remove(this._bodies,C$t))},_addJoint:function(C$t,C$e){C$e=this._world.CreateJoint(C$e);C$e&&((C$e._joint=C$t)._joint=C$e,this._joints.push(C$t))},_removeJoint:function(C$t){C$t._isValid()&&this._world.DestroyJoint(C$t._joint),C$t._joint&&(C$t._joint._joint=null),cc.js.array.remove(this._joints,C$t)},_initCallback:function(){var C$t;this._world?this._contactListener||((C$t=new cc.PhysicsContactListener).setBeginContact(this._onBeginContact),C$t.setEndContact(this._onEndContact),C$t.setPreSolve(this._onPreSolve),C$t.setPostSolve(this._onPostSolve),this._world.SetContactListener(C$t),this._contactListener=C$t,this._aabbQueryCallback=new cc.PhysicsAABBQueryCallback,this._raycastQueryCallback=new cc.PhysicsRayCastCallback):cc.warn("Please init PhysicsManager first")},_init:function(){this.enabled=!0,this.debugDrawFlags=C$o.e_shapeBit},_getWorld:function(){return this._world},_syncNode:function(){for(var C$t=this._bodies,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e],C$r=C$n.node,C$s=C$n._b2Body,C$o=C$s.GetPosition(),C$o=(C$a.x=C$o.x*C$f,C$a.y=C$o.y*C$f,C$s.GetAngle()*C$h),C$s=(null!==C$r.parent.parent&&(C$a=C$r.parent.convertToNodeSpaceAR(C$a),C$o=C$u(C$r.parent,C$o)),C$r._eventMask);C$r._eventMask=0,C$r.position=C$a,C$r.angle=-C$o,C$r._eventMask=C$s,C$n.type===C$c.Animated&&C$n.resetVelocity()}},_onBeginContact:function(C$t){cc.PhysicsContact.get(C$t).emit(C$i.BEGIN_CONTACT)},_onEndContact:function(C$t){var C$e=C$t._contact;C$e&&(C$e.emit(C$i.END_CONTACT),cc.PhysicsContact.put(C$t))},_onPreSolve:function(C$t){C$t=C$t._contact;C$t&&C$t.emit(C$i.PRE_SOLVE)},_onPostSolve:function(C$t,C$e){C$t=C$t._contact;C$t&&(C$t._impulse=C$e,C$t.emit(C$i.POST_SOLVE),C$t._impulse=null)},_checkDebugDrawValid:function(){var C$t;this._debugDrawer&&this._debugDrawer.isValid||((C$t=new cc.Node("PHYSICS_MANAGER_DEBUG_DRAW")).zIndex=cc.macro.MAX_ZINDEX,cc.game.addPersistRootNode(C$t),this._debugDrawer=C$t.addComponent(cc.Graphics),(C$t=new C$_(this._debugDrawer)).SetFlags(this.debugDrawFlags),this._world.SetDebugDraw(C$t))}});cc.js.getset(C$l.prototype,"enabled",function(){return this._enabled},function(C$t){var C$e;C$t&&!this._world&&((C$e=new b2.World(new b2.Vec2(0,-10))).SetAllowSleeping(!0),this._world=C$e,this._initCallback()),this._enabled=C$t}),cc.js.getset(C$l.prototype,"debugDrawFlags",function(){return this._debugDrawFlags},function(C$t){C$t&&!this._debugDrawFlags?this._debugDrawer&&this._debugDrawer.node&&(this._debugDrawer.node.active=!0):!C$t&&this._debugDrawFlags&&this._debugDrawer&&this._debugDrawer.node&&(this._debugDrawer.node.active=!1),C$t&&(this._checkDebugDrawValid(),this._world.m_debugDraw.SetFlags(C$t)),(this._debugDrawFlags=C$t)&&(this._checkDebugDrawValid(),this._world.m_debugDraw.SetFlags(C$t))}),cc.js.getset(C$l.prototype,"gravity",function(){var C$t;return this._world?(C$t=this._world.GetGravity(),cc.v2(C$t.x*C$f,C$t.y*C$f)):cc.v2()},function(C$t){this._world&&this._world.SetGravity(new b2.Vec2(C$t.x/C$f,C$t.y/C$f))}),cc.PhysicsManager=C$r.exports=C$l},{"./CCPhysicsTypes":164,"./platform/CCPhysicsDebugDraw":185,"./utils":187}],164:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Enum({Static:0,Kinematic:1,Dynamic:2,Animated:3}),C$r=(cc.RigidBodyType=C$n,cc.Enum({Closest:0,Any:1,AllClosest:2,All:3}));cc.RayCastType=C$r,C$e.exports={BodyType:C$n,ContactType:{BEGIN_CONTACT:"begin-contact",END_CONTACT:"end-contact",PRE_SOLVE:"pre-solve",POST_SOLVE:"post-solve"},RayCastType:C$r,DrawBits:b2.DrawFlags,PTM_RATIO:32,ANGLE_TO_PHYSICS_ANGLE:-Math.PI/180,PHYSICS_ANGLE_TO_ANGLE:-180/Math.PI}},{}],165:[function(C$t,C$e,C$i){"use strict";function C$v(C$t,C$e){var C$i=C$e.length;return C$e[C$t<0?C$i- -C$t%C$i:C$t%C$i]}function C$x(C$t,C$e,C$i){for(var C$n=[];C$e<C$t;)C$e+=C$i.length;for(;C$t<=C$e;++C$t)C$n.push(C$v(C$t,C$i));return C$n}function C$b(C$t,C$e){return C$A(C$t,C$e)}function C$A(C$t,C$e,C$i){var C$n,C$r;return void 0===C$i&&(C$t=C$v((C$n=C$t)-1,C$r=C$e),C$e=C$v(C$n,C$r),C$i=C$v(C$n+1,C$r)),C$s(C$t,C$e,C$i)<0}function C$C(C$t,C$e,C$i){return 0<C$s(C$t,C$e,C$i)}function C$S(C$t,C$e,C$i){return 0<=C$s(C$t,C$e,C$i)}function C$T(C$t,C$e,C$i){return C$s(C$t,C$e,C$i)<=0}function C$w(C$t,C$e){var C$i=C$e.x-C$t.x,C$e=C$e.y-C$t.y;return C$i*C$i+C$e*C$e}function C$E(C$t){C$n(C$t)||C$t.reverse()}function C$n(C$t){return C$t.length<3||0<function(C$t){var C$e,C$i=0;for(C$e=0;C$e<C$t.length;C$e++){var C$n=(C$e+1)%C$t.length;C$i=(C$i+=C$t[C$e].x*C$t[C$n].y)-C$t[C$e].y*C$t[C$n].x}return C$i/=2}(C$t)}function C$M(C$t,C$e,C$i,C$n){var C$r,C$s=cc.v2(),C$o=C$e.y-C$t.y,C$e=C$t.x-C$e.x,C$t=C$o*C$t.x+C$e*C$t.y,C$a=C$n.y-C$i.y,C$n=C$i.x-C$n.x,C$i=C$a*C$i.x+C$n*C$i.y,C$c=C$o*C$n-C$a*C$e;return C$r=0,Math.abs(C$c-C$r)<=1e-6||(C$s.x=(C$n*C$t-C$e*C$i)/C$c,C$s.y=(C$o*C$i-C$a*C$t)/C$c),C$s}function C$s(C$t,C$e,C$i){return C$t.x*(C$e.y-C$i.y)+C$e.x*(C$i.y-C$t.y)+C$i.x*(C$t.y-C$e.y)}C$e.exports={ConvexPartition:function C$h(C$t){C$E(C$t);for(var C$e,C$i,C$n,C$u,C$r=[],C$_=cc.v2(),C$d=cc.v2(),C$s=0,C$o=0,C$a=0;C$a<C$t.length;++C$a)if(C$b(C$a,C$t)){for(var C$f=C$i=1e8,C$c=0;C$c<C$t.length;++C$c)C$C(C$v(C$a-1,C$t),C$v(C$a,C$t),C$v(C$c,C$t))&&C$T(C$v(C$a-1,C$t),C$v(C$a,C$t),C$v(C$c-1,C$t))&&(C$n=C$M(C$v(C$a-1,C$t),C$v(C$a,C$t),C$v(C$c,C$t),C$v(C$c-1,C$t)),C$A(C$v(C$a+1,C$t),C$v(C$a,C$t),C$n)&&(C$e=C$w(C$v(C$a,C$t),C$n))<C$f&&(C$f=C$e,C$_=C$n,C$s=C$c)),C$C(C$v(C$a+1,C$t),C$v(C$a,C$t),C$v(C$c+1,C$t))&&C$T(C$v(C$a+1,C$t),C$v(C$a,C$t),C$v(C$c,C$t))&&(C$n=C$M(C$v(C$a+1,C$t),C$v(C$a,C$t),C$v(C$c,C$t),C$v(C$c+1,C$t)),C$C(C$v(C$a-1,C$t),C$v(C$a,C$t),C$n)&&(C$e=C$w(C$v(C$a,C$t),C$n))<C$i&&(C$i=C$e,C$o=C$c,C$d=C$n));if(C$s==(C$o+1)%C$t.length){var C$p,C$m=C$_.add(C$d).div(2);(C$p=C$x(C$a,C$o,C$t)).push(C$m),(C$u=C$x(C$s,C$a,C$t)).push(C$m)}else{for(var C$y=0,C$g=C$s;C$o<C$s;)C$o+=C$t.length;for(var C$l,C$c=C$s;C$c<=C$o;++C$c)!function(C$t,C$e,C$i){if(C$b(C$t,C$i)){if(C$S(C$v(C$t,C$i),C$v(C$t-1,C$i),C$v(C$e,C$i))&&C$T(C$v(C$t,C$i),C$v(C$t+1,C$i),C$v(C$e,C$i)))return}else if(C$T(C$v(C$t,C$i),C$v(C$t+1,C$i),C$v(C$e,C$i))||C$S(C$v(C$t,C$i),C$v(C$t-1,C$i),C$v(C$e,C$i)))return;if(C$b(C$e,C$i)){if(C$S(C$v(C$e,C$i),C$v(C$e-1,C$i),C$v(C$t,C$i))&&C$T(C$v(C$e,C$i),C$v(C$e+1,C$i),C$v(C$t,C$i)))return}else if(C$T(C$v(C$e,C$i),C$v(C$e+1,C$i),C$v(C$t,C$i))||C$S(C$v(C$e,C$i),C$v(C$e-1,C$i),C$v(C$t,C$i)))return;for(var C$n=0;C$n<C$i.length;++C$n)if((C$n+1)%C$i.length!=C$t&&C$n!=C$t&&(C$n+1)%C$i.length!=C$e&&C$n!=C$e){var C$r=cc.v2();if(function(C$t,C$e,C$i,C$n,C$h){if(C$t!=C$i&&C$t!=C$n&&C$e!=C$i&&C$e!=C$n){var C$r,C$s,C$o=C$t.x,C$t=C$t.y,C$a=C$e.x,C$e=C$e.y,C$c=C$i.x,C$i=C$i.y,C$l=C$n.x,C$n=C$n.y;if(!(Math.max(C$o,C$a)<Math.min(C$c,C$l)||Math.max(C$c,C$l)<Math.min(C$o,C$a)))if(!(Math.max(C$t,C$e)<Math.min(C$i,C$n)||Math.max(C$i,C$n)<Math.min(C$t,C$e)))return C$r=(C$l-C$c)*(C$t-C$i)-(C$n-C$i)*(C$o-C$c),C$s=(C$a-C$o)*(C$t-C$i)-(C$e-C$t)*(C$o-C$c),C$n=(C$n-C$i)*(C$a-C$o)-(C$l-C$c)*(C$e-C$t),Math.abs(C$n)<1e-6?void 0:(C$s/=C$n,0<(C$r/=C$n)&&C$r<1&&0<C$s&&C$s<1&&(C$h.x=C$o+C$r*(C$a-C$o),C$h.y=C$t+C$r*(C$e-C$t),1))}}(C$v(C$t,C$i),C$v(C$e,C$i),C$v(C$n,C$i),C$v(C$n+1,C$i),C$r))return}return 1}(C$a,C$c,C$t)||(C$l=1/(C$w(C$v(C$a,C$t),C$v(C$c,C$t))+1),C$b(C$c,C$t)?C$T(C$v(C$c-1,C$t),C$v(C$c,C$t),C$v(C$a,C$t))&&C$S(C$v(C$c+1,C$t),C$v(C$c,C$t),C$v(C$a,C$t))?C$l+=3:C$l+=2:C$l+=1,C$y<C$l&&(C$g=C$c,C$y=C$l));C$p=C$x(C$a,C$g,C$t),C$u=C$x(C$g,C$a,C$t)}return C$r=(C$r=C$r.concat(C$h(C$p))).concat(C$h(C$u))}C$r.push(C$t);for(C$a=C$r.length-1;0<=C$a;C$a--)0==C$r[C$a].length&&C$r.splice(C$a,0);return C$r},ForceCounterClockWise:C$E,IsCounterClockWise:C$n}},{}],166:[function(C$t,C$h,C$u){"use strict";var C$e=C$t("../CCNode").EventType,C$r=C$t("./CCPhysicsTypes").PTM_RATIO,C$s=C$t("./CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$i=C$t("./CCPhysicsTypes").PHYSICS_ANGLE_TO_ANGLE,C$o=C$t("./utils").getWorldRotation,C$a=C$t("./CCPhysicsTypes").BodyType,C$n=new b2.Vec2,C$c=new b2.Vec2,C$l=cc.Vec2.ZERO,C$t=cc.Class({name:"cc.RigidBody",extends:cc.Component,editor:!1,properties:{_type:C$a.Dynamic,_allowSleep:!0,_gravityScale:1,_linearDamping:0,_angularDamping:0,_linearVelocity:cc.v2(0,0),_angularVelocity:0,_fixedRotation:!1,enabled:{get:function(){return this._enabled},set:function(){cc.warnID(8200)},visible:!1,override:!0},enabledContactListener:{default:!1,tooltip:!1},bullet:{default:!1,tooltip:!1},type:{type:C$a,tooltip:!1,get:function(){return this._type},set:function(C$t){this._type=C$t,this._b2Body&&(C$t===C$a.Animated?this._b2Body.SetType(C$a.Kinematic):this._b2Body.SetType(C$t))}},allowSleep:{tooltip:!1,get:function(){return this._b2Body?this._b2Body.IsSleepingAllowed():this._allowSleep},set:function(C$t){this._allowSleep=C$t,this._b2Body&&this._b2Body.SetSleepingAllowed(C$t)}},gravityScale:{tooltip:!1,get:function(){return this._gravityScale},set:function(C$t){this._gravityScale=C$t,this._b2Body&&this._b2Body.SetGravityScale(C$t)}},linearDamping:{tooltip:!1,get:function(){return this._linearDamping},set:function(C$t){this._linearDamping=C$t,this._b2Body&&this._b2Body.SetLinearDamping(this._linearDamping)}},angularDamping:{tooltip:!1,get:function(){return this._angularDamping},set:function(C$t){this._angularDamping=C$t,this._b2Body&&this._b2Body.SetAngularDamping(C$t)}},linearVelocity:{tooltip:!1,type:cc.Vec2,get:function(){var C$t,C$e=this._linearVelocity;return this._b2Body&&(C$t=this._b2Body.GetLinearVelocity(),C$e.x=C$t.x*C$r,C$e.y=C$t.y*C$r),C$e},set:function(C$t){this._linearVelocity=C$t;var C$e,C$i=this._b2Body;C$i&&((C$e=C$i.m_linearVelocity).Set(C$t.x/C$r,C$t.y/C$r),C$i.SetLinearVelocity(C$e))}},angularVelocity:{tooltip:!1,get:function(){return this._b2Body?this._b2Body.GetAngularVelocity()*C$i:this._angularVelocity},set:function(C$t){this._angularVelocity=C$t,this._b2Body&&this._b2Body.SetAngularVelocity(C$t*C$s)}},fixedRotation:{tooltip:!1,get:function(){return this._fixedRotation},set:function(C$t){this._fixedRotation=C$t,this._b2Body&&this._b2Body.SetFixedRotation(C$t)}},awake:{visible:!1,tooltip:!1,get:function(){return!!this._b2Body&&this._b2Body.IsAwake()},set:function(C$t){this._b2Body&&this._b2Body.SetAwake(C$t)}},awakeOnLoad:{default:!0,tooltip:!1,animatable:!1},active:{visible:!1,get:function(){return!!this._b2Body&&this._b2Body.IsActive()},set:function(C$t){this._b2Body&&this._b2Body.SetActive(C$t)}}},getLocalPoint:function(C$t,C$e){return C$e=C$e||cc.v2(),this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),C$t=this._b2Body.GetLocalPoint(C$n,C$e),C$e.x=C$t.x*C$r,C$e.y=C$t.y*C$r),C$e},getWorldPoint:function(C$t,C$e){return C$e=C$e||cc.v2(),this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),C$t=this._b2Body.GetWorldPoint(C$n,C$e),C$e.x=C$t.x*C$r,C$e.y=C$t.y*C$r),C$e},getWorldVector:function(C$t,C$e){return C$e=C$e||cc.v2(),this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),C$t=this._b2Body.GetWorldVector(C$n,C$e),C$e.x=C$t.x*C$r,C$e.y=C$t.y*C$r),C$e},getLocalVector:function(C$t,C$e){return C$e=C$e||cc.v2(),this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),C$t=this._b2Body.GetLocalVector(C$n,C$e),C$e.x=C$t.x*C$r,C$e.y=C$t.y*C$r),C$e},getWorldPosition:function(C$t){var C$e;return C$t=C$t||cc.v2(),this._b2Body&&(C$e=this._b2Body.GetPosition(),C$t.x=C$e.x*C$r,C$t.y=C$e.y*C$r),C$t},getWorldRotation:function(){return this._b2Body?this._b2Body.GetAngle()*C$i:0},getLocalCenter:function(C$t){var C$e;return C$t=C$t||cc.v2(),this._b2Body&&(C$e=this._b2Body.GetLocalCenter(),C$t.x=C$e.x*C$r,C$t.y=C$e.y*C$r),C$t},getWorldCenter:function(C$t){var C$e;return C$t=C$t||cc.v2(),this._b2Body&&(C$e=this._b2Body.GetWorldCenter(),C$t.x=C$e.x*C$r,C$t.y=C$e.y*C$r),C$t},getLinearVelocityFromWorldPoint:function(C$t,C$e){return C$e=C$e||cc.v2(),this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),C$t=this._b2Body.GetLinearVelocityFromWorldPoint(C$n,C$e),C$e.x=C$t.x*C$r,C$e.y=C$t.y*C$r),C$e},getMass:function(){return this._b2Body?this._b2Body.GetMass():0},getInertia:function(){return this._b2Body?this._b2Body.GetInertia()*C$r*C$r:0},getJointList:function(){if(!this._b2Body)return[];var C$t=[],C$e=this._b2Body.GetJointList();if(!C$e)return[];C$t.push(C$e.joint._joint);for(var C$i=C$e.prev;C$i;)C$t.push(C$i.joint._joint),C$i=C$i.prev;for(var C$n=C$e.next;C$n;)C$t.push(C$n.joint._joint),C$n=C$n.next;return C$t},applyForce:function(C$t,C$e,C$i){this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),C$c.Set(C$e.x/C$r,C$e.y/C$r),this._b2Body.ApplyForce(C$n,C$c,C$i))},applyForceToCenter:function(C$t,C$e){this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),this._b2Body.ApplyForceToCenter(C$n,C$e))},applyTorque:function(C$t,C$e){this._b2Body&&this._b2Body.ApplyTorque(C$t/C$r,C$e)},applyLinearImpulse:function(C$t,C$e,C$i){this._b2Body&&(C$n.Set(C$t.x/C$r,C$t.y/C$r),C$c.Set(C$e.x/C$r,C$e.y/C$r),this._b2Body.ApplyLinearImpulse(C$n,C$c,C$i))},applyAngularImpulse:function(C$t,C$e){this._b2Body&&this._b2Body.ApplyAngularImpulse(C$t/C$r/C$r,C$e)},syncPosition:function(C$t){var C$e,C$i,C$n=this._b2Body;C$n&&(C$e=this.node.convertToWorldSpaceAR(C$l),(C$i=this.type===C$a.Animated?C$n.GetLinearVelocity():C$n.GetPosition()).x=C$e.x/C$r,C$i.y=C$e.y/C$r,this.type===C$a.Animated&&C$t?(C$e=C$n.GetPosition(),C$t=cc.game.config.frameRate,C$i.x=(C$i.x-C$e.x)*C$t,C$i.y=(C$i.y-C$e.y)*C$t,C$n.SetAwake(!0),C$n.SetLinearVelocity(C$i)):C$n.SetTransformVec(C$i,C$n.GetAngle()))},syncRotation:function(C$t){var C$e,C$i,C$n=this._b2Body;C$n&&(C$e=C$s*C$o(this.node),this.type===C$a.Animated&&C$t?(C$t=C$n.GetAngle(),C$i=cc.game.config.frameRate,C$n.SetAwake(!0),C$n.SetAngularVelocity((C$e-C$t)*C$i)):C$n.SetTransformVec(C$n.GetPosition(),C$e))},resetVelocity:function(){var C$t,C$e=this._b2Body;C$e&&((C$t=C$e.m_linearVelocity).Set(0,0),C$e.SetLinearVelocity(C$t),C$e.SetAngularVelocity(0))},onEnable:function(){this._init()},onDisable:function(){this._destroy()},_registerNodeEvents:function(){var C$t=this.node;C$t.on(C$e.POSITION_CHANGED,this._onNodePositionChanged,this),C$t.on(C$e.ROTATION_CHANGED,this._onNodeRotationChanged,this),C$t.on(C$e.SCALE_CHANGED,this._onNodeScaleChanged,this)},_unregisterNodeEvents:function(){var C$t=this.node;C$t.off(C$e.POSITION_CHANGED,this._onNodePositionChanged,this),C$t.off(C$e.ROTATION_CHANGED,this._onNodeRotationChanged,this),C$t.off(C$e.SCALE_CHANGED,this._onNodeScaleChanged,this)},_onNodePositionChanged:function(){this.syncPosition(!0)},_onNodeRotationChanged:function(C$t){this.syncRotation(!0)},_onNodeScaleChanged:function(C$t){if(this._b2Body)for(var C$e=this.getComponents(cc.PhysicsCollider),C$i=0;C$i<C$e.length;C$i++)C$e[C$i].apply()},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){var C$t,C$e,C$i;this._inited||(this._registerNodeEvents(),C$t=new b2.BodyDef,this.type===C$a.Animated?C$t.type=C$a.Kinematic:C$t.type=this.type,C$t.allowSleep=this.allowSleep,C$t.gravityScale=this.gravityScale,C$t.linearDamping=this.linearDamping,C$t.angularDamping=this.angularDamping,C$e=this.linearVelocity,C$t.linearVelocity=new b2.Vec2(C$e.x/C$r,C$e.y/C$r),C$t.angularVelocity=this.angularVelocity*C$s,C$t.fixedRotation=this.fixedRotation,C$t.bullet=this.bullet,C$i=(C$e=this.node).convertToWorldSpaceAR(C$l),C$t.position=new b2.Vec2(C$i.x/C$r,C$i.y/C$r),C$t.angle=-Math.PI/180*C$o(C$e),C$t.awake=this.awakeOnLoad,cc.director.getPhysicsManager()._addBody(this,C$t),this._inited=!0)},__destroy:function(){this._inited&&(cc.director.getPhysicsManager()._removeBody(this),this._unregisterNodeEvents(),this._inited=!1)},_getBody:function(){return this._b2Body}});cc.RigidBody=C$h.exports=C$t},{"../CCNode":30,"./CCPhysicsTypes":164,"./utils":187}],167:[function(C$t,C$e,C$i){"use strict";var C$n,C$r,C$s=C$t("../../../external/box2d/box2d");for(C$n in window.b2={},C$s)-1===C$n.indexOf("b2_")&&(C$r=C$n.replace("b2",""),b2[C$r]=C$s[C$n]);b2.maxPolygonVertices=8},{"../../../external/box2d/box2d":362}],168:[function(C$t,C$e,C$i){"use strict";var C$s=C$t("../CCPhysicsTypes").PTM_RATIO,C$t=cc.Class({name:"cc.PhysicsBoxCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Box],editor:{menu:!1,requireComponent:cc.RigidBody},_createShape:function(C$t){var C$e=Math.abs(C$t.x),C$t=Math.abs(C$t.y),C$i=this.size.width/2/C$s*C$e,C$n=this.size.height/2/C$s*C$t,C$e=this.offset.x/C$s*C$e,C$t=this.offset.y/C$s*C$t,C$r=new b2.PolygonShape;return C$r.SetAsBox(C$i,C$n,new b2.Vec2(C$e,C$t),0),C$r}});cc.PhysicsBoxCollider=C$e.exports=C$t},{"../CCPhysicsTypes":164}],169:[function(C$t,C$e,C$i){"use strict";var C$o=C$t("../CCPhysicsTypes").PTM_RATIO,C$t=cc.Class({name:"cc.PhysicsChainCollider",extends:cc.PhysicsCollider,editor:{menu:!1,inspector:!1,requireComponent:cc.RigidBody},properties:{loop:!1,points:{default:function(){return[cc.v2(-50,0),cc.v2(50,0)]},type:[cc.Vec2]},threshold:{default:1,serializable:!1,visible:!1}},_createShape:function(C$t){for(var C$e=new b2.ChainShape,C$i=this.points,C$n=[],C$r=0;C$r<C$i.length;C$r++){var C$s=C$i[C$r];C$n.push(new b2.Vec2(C$s.x/C$o*C$t.x,C$s.y/C$o*C$t.y))}return this.loop?C$e.CreateLoop(C$n,C$n.length):C$e.CreateChain(C$n,C$n.length),C$e},resetInEditor:!1,resetPointsByContour:!1});cc.PhysicsChainCollider=C$e.exports=C$t},{"../CCPhysicsTypes":164}],170:[function(C$t,C$e,C$i){"use strict";var C$r=C$t("../CCPhysicsTypes").PTM_RATIO,C$t=cc.Class({name:"cc.PhysicsCircleCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Circle],editor:{menu:!1,requireComponent:cc.RigidBody},_createShape:function(C$t){var C$e=Math.abs(C$t.x),C$t=Math.abs(C$t.y),C$i=this.offset.x/C$r*C$e,C$t=this.offset.y/C$r*C$t,C$n=new b2.CircleShape;return C$n.m_radius=this.radius/C$r*C$e,C$n.m_p=new b2.Vec2(C$i,C$t),C$n}});cc.PhysicsCircleCollider=C$e.exports=C$t},{"../CCPhysicsTypes":164}],171:[function(C$t,C$e,C$i){"use strict";var C$u=C$t("../CCPhysicsTypes").PTM_RATIO,C$d=C$t("../utils").getWorldScale,C$t=cc.Class({name:"cc.PhysicsCollider",extends:cc.Collider,ctor:function(){this._fixtures=[],this._shapes=[],this._inited=!1,this._rect=cc.rect()},properties:{_density:1,_sensor:!1,_friction:.2,_restitution:0,density:{tooltip:!1,get:function(){return this._density},set:function(C$t){this._density=C$t}},sensor:{tooltip:!1,get:function(){return this._sensor},set:function(C$t){this._sensor=C$t}},friction:{tooltip:!1,get:function(){return this._friction},set:function(C$t){this._friction=C$t}},restitution:{tooltip:!1,get:function(){return this._restitution},set:function(C$t){this._restitution=C$t}},body:{default:null,type:cc.RigidBody,visible:!1}},onDisable:function(){this._destroy()},onEnable:function(){this._init()},start:function(){this._init()},_getFixtureIndex:function(C$t){return this._fixtures.indexOf(C$t)},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){if(!this._inited){var C$t=this.body||this.getComponent(cc.RigidBody);if(C$t){var C$e=C$t._getBody();if(C$e){for(var C$i=C$t.node,C$n=C$d(C$i),C$r=0===(this._scale=C$n).x&&0===C$n.y?[]:this._createShape(C$n),C$n=(C$r instanceof Array||(C$r=[C$r]),1<<C$i.groupIndex),C$s=0,C$o=cc.game.collisionMatrix[C$i.groupIndex],C$a=0;C$a<C$o.length;C$a++)C$o[C$a]&&(C$s|=1<<C$a);for(var C$h={categoryBits:C$n,maskBits:C$s,groupIndex:0},C$u=cc.director.getPhysicsManager(),C$c=0;C$c<C$r.length;C$c++){var C$_=C$r[C$c],C$l=new b2.FixtureDef,C$l=(C$l.density=this.density,C$l.isSensor=this.sensor,C$l.friction=this.friction,C$l.restitution=this.restitution,C$l.shape=C$_,C$l.filter=C$h,C$e.CreateFixture(C$l));C$l.collider=this,C$t.enabledContactListener&&C$u._registerContactFixture(C$l),this._shapes.push(C$_),this._fixtures.push(C$l)}this.body=C$t,this._inited=!0}}}},__destroy:function(){if(this._inited){for(var C$t=this._fixtures,C$e=this.body._getBody(),C$i=cc.director.getPhysicsManager(),C$n=C$t.length-1;0<=C$n;C$n--){var C$r=C$t[C$n];C$r.collider=null,C$i._unregisterContactFixture(C$r),C$e&&C$e.DestroyFixture(C$r)}this.body=null,this._fixtures.length=0,this._shapes.length=0,this._inited=!1}},_createShape:function(){},apply:function(){this._destroy(),this._init()},getAABB:function(){for(var C$t=1e7,C$e=1e7,C$i=-1e7,C$n=-1e7,C$r=this._fixtures,C$s=0;C$s<C$r.length;C$s++)for(var C$o=C$r[C$s],C$h=C$o.GetShape().GetChildCount(),C$a=0;C$a<C$h;C$a++){var C$c=C$o.GetAABB(C$a);C$c.lowerBound.x<C$t&&(C$t=C$c.lowerBound.x),C$c.lowerBound.y<C$e&&(C$e=C$c.lowerBound.y),C$c.upperBound.x>C$i&&(C$i=C$c.upperBound.x),C$c.upperBound.y>C$n&&(C$n=C$c.upperBound.y)}C$e*=C$u,C$i*=C$u,C$n*=C$u;var C$l=this._rect;return C$l.x=C$t*=C$u,C$l.y=C$e,C$l.width=C$i-C$t,C$l.height=C$n-C$e,C$l}});cc.PhysicsCollider=C$e.exports=C$t},{"../CCPhysicsTypes":164,"../utils":187}],172:[function(C$t,C$e,C$i){"use strict";var C$f=C$t("../CCPhysicsTypes").PTM_RATIO,C$p=C$t("../CCPolygonSeparator"),C$t=cc.Class({name:"cc.PhysicsPolygonCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Polygon],editor:{menu:!1,inspector:!1,requireComponent:cc.RigidBody},_createShape:function(C$t){for(var C$e=[],C$i=this.points,C$h=(0<C$i.length&&C$i[0].equals(C$i[C$i.length-1])&&--C$i.length,C$p.ConvexPartition(C$i)),C$u=this.offset,C$n=0;C$n<C$h.length;C$n++){for(var C$_=C$h[C$n],C$r=null,C$s=[],C$o=null,C$a=0,C$d=C$_.length;C$a<C$d;C$a++){var C$r=C$r||new b2.PolygonShape,C$c=C$_[C$a],C$l=(C$c.x+C$u.x)/C$f*C$t.x,C$c=(C$c.y+C$u.y)/C$f*C$t.y,C$l=new b2.Vec2(C$l,C$c);C$s.push(C$l),C$o=C$o||C$l,C$s.length===b2.maxPolygonVertices&&(C$r.Set(C$s,C$s.length),C$e.push(C$r),C$r=null,C$a<C$d-1&&(C$s=[C$o,C$s[C$s.length-1]]))}C$r&&(C$r.Set(C$s,C$s.length),C$e.push(C$r))}return C$e}});cc.PhysicsPolygonCollider=C$e.exports=C$t},{"../CCPhysicsTypes":164,"../CCPolygonSeparator":165}],173:[function(C$t,C$e,C$i){"use strict";C$t("./box2d-adapter"),C$t("./CCPhysicsManager"),C$t("./CCRigidBody"),C$t("./CCPhysicsContact"),C$t("./collider/CCPhysicsCollider"),C$t("./collider/CCPhysicsChainCollider"),C$t("./collider/CCPhysicsCircleCollider"),C$t("./collider/CCPhysicsBoxCollider"),C$t("./collider/CCPhysicsPolygonCollider"),C$t("./joint/CCJoint"),C$t("./joint/CCDistanceJoint"),C$t("./joint/CCRevoluteJoint"),C$t("./joint/CCMouseJoint"),C$t("./joint/CCMotorJoint"),C$t("./joint/CCPrismaticJoint"),C$t("./joint/CCWeldJoint"),C$t("./joint/CCWheelJoint"),C$t("./joint/CCRopeJoint"),C$t("./platform/CCPhysicsContactListner"),C$t("./platform/CCPhysicsAABBQueryCallback"),C$t("./platform/CCPhysicsRayCastCallback")},{"./CCPhysicsContact":162,"./CCPhysicsManager":163,"./CCRigidBody":166,"./box2d-adapter":167,"./collider/CCPhysicsBoxCollider":168,"./collider/CCPhysicsChainCollider":169,"./collider/CCPhysicsCircleCollider":170,"./collider/CCPhysicsCollider":171,"./collider/CCPhysicsPolygonCollider":172,"./joint/CCDistanceJoint":174,"./joint/CCJoint":175,"./joint/CCMotorJoint":176,"./joint/CCMouseJoint":177,"./joint/CCPrismaticJoint":178,"./joint/CCRevoluteJoint":179,"./joint/CCRopeJoint":180,"./joint/CCWeldJoint":181,"./joint/CCWheelJoint":182,"./platform/CCPhysicsAABBQueryCallback":183,"./platform/CCPhysicsContactListner":184,"./platform/CCPhysicsRayCastCallback":186}],174:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$t=cc.Class({name:"cc.DistanceJoint",extends:cc.Joint,editor:!1,properties:{_distance:1,_frequency:0,_dampingRatio:0,distance:{tooltip:!1,get:function(){return this._distance},set:function(C$t){this._distance=C$t,this._joint&&this._joint.SetLength(C$t)}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$t){this._frequency=C$t,this._joint&&this._joint.SetFrequency(C$t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$t){this._dampingRatio=C$t,this._joint&&this._joint.SetDampingRatio(C$t)}}},_createJointDef:function(){var C$t=new b2.DistanceJointDef;return C$t.localAnchorA=new b2.Vec2(this.anchor.x/C$n,this.anchor.y/C$n),C$t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$n,this.connectedAnchor.y/C$n),C$t.length=this.distance/C$n,C$t.dampingRatio=this.dampingRatio,C$t.frequencyHz=this.frequency,C$t}});cc.DistanceJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],175:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$t=cc.Class({name:"cc.Joint",extends:cc.Component,editor:{requireComponent:cc.RigidBody},properties:{anchor:{default:cc.v2(0,0),tooltip:!1},connectedAnchor:{default:cc.v2(0,0),tooltip:!1},connectedBody:{default:null,type:cc.RigidBody,tooltip:!1},collideConnected:{default:!1,tooltip:!1}},onDisable:function(){this._destroy()},onEnable:function(){this._init()},start:function(){this._init()},apply:function(){this._destroy(),this._init()},getWorldAnchor:function(){var C$t;return this._joint?(C$t=this._joint.GetAnchorA(),cc.v2(C$t.x*C$n,C$t.y*C$n)):cc.Vec2.ZERO},getWorldConnectedAnchor:function(){var C$t;return this._joint?(C$t=this._joint.GetAnchorB(),cc.v2(C$t.x*C$n,C$t.y*C$n)):cc.Vec2.ZERO},getReactionForce:function(C$t){var C$e=cc.v2();return this._joint?this._joint.GetReactionForce(C$t,C$e):C$e},getReactionTorque:function(C$t){return this._joint?this._joint.GetReactionTorque(C$t):0},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){var C$t;this._inited||(this.body=this.getComponent(cc.RigidBody),!this._isValid()||(C$t=this._createJointDef())&&(C$t.bodyA=this.body._getBody(),C$t.bodyB=this.connectedBody._getBody(),C$t.collideConnected=this.collideConnected,cc.director.getPhysicsManager()._addJoint(this,C$t),this._inited=!0))},__destroy:function(){this._inited&&(cc.director.getPhysicsManager()._removeJoint(this),this._joint=null,this._inited=!1)},_createJointDef:function(){return null},_isValid:function(){return this.body&&this.body._getBody()&&this.connectedBody&&this.connectedBody._getBody()}});cc.Joint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],176:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$r=C$t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$t=cc.Class({name:"cc.MotorJoint",extends:cc.Joint,editor:!1,properties:{_linearOffset:cc.v2(0,0),_angularOffset:0,_maxForce:1,_maxTorque:1,_correctionFactor:.3,anchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},connectedAnchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},linearOffset:{tooltip:!1,get:function(){return this._linearOffset},set:function(C$t){this._linearOffset=C$t,this._joint&&this._joint.SetLinearOffset(new b2.Vec2(C$t.x/C$n,C$t.y/C$n))}},angularOffset:{tooltip:!1,get:function(){return this._angularOffset},set:function(C$t){this._angularOffset=C$t,this._joint&&this._joint.SetAngularOffset(C$t)}},maxForce:{tooltip:!1,get:function(){return this._maxForce},set:function(C$t){this._maxForce=C$t,this._joint&&this._joint.SetMaxForce(C$t)}},maxTorque:{tooltip:!1,get:function(){return this._maxTorque},set:function(C$t){this._maxTorque=C$t,this._joint&&this._joint.SetMaxTorque(C$t)}},correctionFactor:{tooltip:!1,get:function(){return this._correctionFactor},set:function(C$t){this._correctionFactor=C$t,this._joint&&this._joint.SetCorrectionFactor(C$t)}}},_createJointDef:function(){var C$t=new b2.MotorJointDef;return C$t.linearOffset=new b2.Vec2(this.linearOffset.x/C$n,this.linearOffset.y/C$n),C$t.angularOffset=this.angularOffset*C$r,C$t.maxForce=this.maxForce,C$t.maxTorque=this.maxTorque,C$t.correctionFactor=this.correctionFactor,C$t}});cc.MotorJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],177:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$r=new b2.Vec2,C$t=cc.Class({name:"cc.MouseJoint",extends:cc.Joint,editor:!1,properties:{_target:1,_frequency:5,_dampingRatio:.7,_maxForce:0,connectedBody:{default:null,type:cc.RigidBody,visible:!1,override:!0},collideConnected:{default:!0,visible:!1,override:!0},anchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},connectedAnchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},mouseRegion:{tooltip:!1,default:null,type:cc.Node},target:{tooltip:!1,visible:!1,get:function(){return this._target},set:function(C$t){this._target=C$t,this._joint&&(C$r.x=C$t.x/C$n,C$r.y=C$t.y/C$n,this._joint.SetTarget(C$r))}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$t){this._frequency=C$t,this._joint&&this._joint.SetFrequency(C$t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$t){this._dampingRatio=C$t,this._joint&&this._joint.SetDampingRatio(C$t)}},maxForce:{tooltip:!1,visible:!1,get:function(){return this._maxForce},set:function(C$t){this._maxForce=C$t,this._joint&&this._joint.SetMaxForce(C$t)}}},onLoad:function(){var C$t=this.mouseRegion||this.node;C$t.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),C$t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),C$t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),C$t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onEnable:function(){},start:function(){},onTouchBegan:function(C$t){var C$e=cc.director.getPhysicsManager(),C$t=this._pressPoint=C$t.touch.getLocation(),C$e=(cc.Camera&&cc.Camera.main&&(C$t=cc.Camera.main.getScreenToWorldPoint(C$t)),C$e.testPoint(C$t));C$e&&((this.connectedBody=C$e.body).awake=!0,this.maxForce=1e3*this.connectedBody.getMass(),this.target=C$t,this._init())},onTouchMove:function(C$t){this._pressPoint=C$t.touch.getLocation()},onTouchEnd:function(C$t){this._destroy(),this._pressPoint=null},_createJointDef:function(){var C$t=new b2.MouseJointDef;return C$r.x=this.target.x/C$n,C$r.y=this.target.y/C$n,C$t.target=C$r,C$t.maxForce=this.maxForce,C$t.dampingRatio=this.dampingRatio,C$t.frequencyHz=this.frequency,C$t},update:function(){var C$t;this._pressPoint&&this._isValid()&&(C$t=cc.Camera.findCamera(this.node),this.target=C$t?C$t.getScreenToWorldPoint(this._pressPoint):this._pressPoint)}});cc.MouseJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],178:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$r=C$t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$t=cc.Class({name:"cc.PrismaticJoint",extends:cc.Joint,editor:!1,properties:{localAxisA:{default:cc.v2(1,0),tooltip:!1},referenceAngle:{default:0,tooltip:!1},enableLimit:{default:!1,tooltip:!1},enableMotor:{default:!1,tooltip:!1},lowerLimit:{default:0,tooltip:!1},upperLimit:{default:0,tooltip:!1},_maxMotorForce:0,_motorSpeed:0,maxMotorForce:{tooltip:!1,get:function(){return this._maxMotorForce},set:function(C$t){this._maxMotorForce=C$t,this._joint&&this._joint.SetMaxMotorForce(C$t)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$t){this._motorSpeed=C$t,this._joint&&this._joint.SetMotorSpeed(C$t)}}},_createJointDef:function(){var C$t=new b2.PrismaticJointDef;return C$t.localAnchorA=new b2.Vec2(this.anchor.x/C$n,this.anchor.y/C$n),C$t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$n,this.connectedAnchor.y/C$n),C$t.localAxisA=new b2.Vec2(this.localAxisA.x,this.localAxisA.y),C$t.referenceAngle=this.referenceAngle*C$r,C$t.enableLimit=this.enableLimit,C$t.lowerTranslation=this.lowerLimit/C$n,C$t.upperTranslation=this.upperLimit/C$n,C$t.enableMotor=this.enableMotor,C$t.maxMotorForce=this.maxMotorForce,C$t.motorSpeed=this.motorSpeed,C$t}});cc.PrismaticJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],179:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$r=C$t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$s=C$t("../CCPhysicsTypes").PHYSICS_ANGLE_TO_ANGLE,C$t=cc.Class({name:"cc.RevoluteJoint",extends:cc.Joint,editor:!1,properties:{_maxMotorTorque:0,_motorSpeed:0,_enableLimit:!1,_enableMotor:!1,referenceAngle:{default:0,tooltip:!1},lowerAngle:{default:0,tooltip:!1},upperAngle:{default:0,tooltip:!1},maxMotorTorque:{tooltip:!1,get:function(){return this._maxMotorTorque},set:function(C$t){this._maxMotorTorque=C$t,this._joint&&this._joint.SetMaxMotorTorque(C$t)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$t){this._motorSpeed=C$t,this._joint&&this._joint.SetMotorSpeed(C$t*C$r)}},enableLimit:{tooltip:!1,get:function(){return this._enableLimit},set:function(C$t){this._enableLimit=C$t,this._joint&&this._joint.EnableLimit(C$t)}},enableMotor:{tooltip:!1,get:function(){return this._enableMotor},set:function(C$t){this._enableMotor=C$t,this._joint&&this._joint.EnableMotor(C$t)}}},getJointAngle:function(){return this._joint?this._joint.GetJointAngle()*C$s:0},setLimits:function(C$t,C$e){if(this._joint)return this._joint.SetLimits(C$t*C$r,C$e*C$r)},_createJointDef:function(){var C$t=new b2.RevoluteJointDef;return C$t.localAnchorA=new b2.Vec2(this.anchor.x/C$n,this.anchor.y/C$n),C$t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$n,this.connectedAnchor.y/C$n),C$t.lowerAngle=this.upperAngle*C$r,C$t.upperAngle=this.lowerAngle*C$r,C$t.maxMotorTorque=this.maxMotorTorque,C$t.motorSpeed=this.motorSpeed*C$r,C$t.enableLimit=this.enableLimit,C$t.enableMotor=this.enableMotor,C$t.referenceAngle=this.referenceAngle*C$r,C$t}});cc.RevoluteJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],180:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$t=cc.Class({name:"cc.RopeJoint",extends:cc.Joint,editor:!1,properties:{_maxLength:1,maxLength:{tooltip:!1,get:function(){return this._maxLength},set:function(C$t){this._maxLength=C$t,this._joint&&this._joint.SetMaxLength(C$t)}}},_createJointDef:function(){var C$t=new b2.RopeJointDef;return C$t.localAnchorA=new b2.Vec2(this.anchor.x/C$n,this.anchor.y/C$n),C$t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$n,this.connectedAnchor.y/C$n),C$t.maxLength=this.maxLength/C$n,C$t}});cc.RopeJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],181:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$r=C$t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$t=cc.Class({name:"cc.WeldJoint",extends:cc.Joint,editor:!1,properties:{referenceAngle:{default:0,tooltip:!1},_frequency:0,_dampingRatio:0,frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$t){this._frequency=C$t,this._joint&&this._joint.SetFrequency(C$t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$t){this._dampingRatio=C$t,this._joint&&this._joint.SetDampingRatio(C$t)}}},_createJointDef:function(){var C$t=new b2.WeldJointDef;return C$t.localAnchorA=new b2.Vec2(this.anchor.x/C$n,this.anchor.y/C$n),C$t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$n,this.connectedAnchor.y/C$n),C$t.referenceAngle=this.referenceAngle*C$r,C$t.frequencyHz=this.frequency,C$t.dampingRatio=this.dampingRatio,C$t}});cc.WeldJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],182:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").PTM_RATIO,C$r=C$t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$t=cc.Class({name:"cc.WheelJoint",extends:cc.Joint,editor:!1,properties:{_maxMotorTorque:0,_motorSpeed:0,_enableMotor:!1,_frequency:2,_dampingRatio:.7,localAxisA:{default:cc.v2(1,0),tooltip:!1},maxMotorTorque:{tooltip:!1,get:function(){return this._maxMotorTorque},set:function(C$t){this._maxMotorTorque=C$t,this._joint&&this._joint.SetMaxMotorTorque(C$t)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$t){this._motorSpeed=C$t,this._joint&&this._joint.SetMotorSpeed(C$t*C$r)}},enableMotor:{tooltip:!1,get:function(){return this._enableMotor},set:function(C$t){this._enableMotor=C$t,this._joint&&this._joint.EnableMotor(C$t)}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$t){this._frequency=C$t,this._joint&&this._joint.SetSpringFrequencyHz(C$t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$t){this._dampingRatio=C$t,this._joint&&this._joint.SetDampingRatio(C$t)}}},_createJointDef:function(){var C$t=new b2.WheelJointDef;return C$t.localAnchorA=new b2.Vec2(this.anchor.x/C$n,this.anchor.y/C$n),C$t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$n,this.connectedAnchor.y/C$n),C$t.localAxisA=new b2.Vec2(this.localAxisA.x,this.localAxisA.y),C$t.maxMotorTorque=this.maxMotorTorque,C$t.motorSpeed=this.motorSpeed*C$r,C$t.enableMotor=this.enableMotor,C$t.dampingRatio=this.dampingRatio,C$t.frequencyHz=this.frequency,C$t}});cc.WheelJoint=C$e.exports=C$t},{"../CCPhysicsTypes":164}],183:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../CCPhysicsTypes").BodyType;function C$r(){this._point=new b2.Vec2,this._isPoint=!1,this._fixtures=[]}C$r.prototype.init=function(C$t){C$t?(this._isPoint=!0,this._point.x=C$t.x,this._point.y=C$t.y):this._isPoint=!1,this._fixtures.length=0},C$r.prototype.ReportFixture=function(C$t){if(C$t.GetBody().GetType()===C$n.Dynamic)if(this._isPoint){if(C$t.TestPoint(this._point))return this._fixtures.push(C$t),!1}else this._fixtures.push(C$t);return!0},C$r.prototype.getFixture=function(){return this._fixtures[0]},C$r.prototype.getFixtures=function(){return this._fixtures},cc.PhysicsAABBQueryCallback=C$e.exports=C$r},{"../CCPhysicsTypes":164}],184:[function(C$t,C$e,C$i){"use strict";function C$n(){this._contactFixtures=[]}C$n.prototype.setBeginContact=function(C$t){this._BeginContact=C$t},C$n.prototype.setEndContact=function(C$t){this._EndContact=C$t},C$n.prototype.setPreSolve=function(C$t){this._PreSolve=C$t},C$n.prototype.setPostSolve=function(C$t){this._PostSolve=C$t},C$n.prototype.BeginContact=function(C$t){var C$e,C$i,C$n;this._BeginContact&&(C$e=C$t.GetFixtureA(),C$i=C$t.GetFixtureB(),C$n=this._contactFixtures,C$t._shouldReport=!1,-1===C$n.indexOf(C$e)&&-1===C$n.indexOf(C$i)||(C$t._shouldReport=!0,this._BeginContact(C$t)))},C$n.prototype.EndContact=function(C$t){this._EndContact&&C$t._shouldReport&&(C$t._shouldReport=!1,this._EndContact(C$t))},C$n.prototype.PreSolve=function(C$t,C$e){this._PreSolve&&C$t._shouldReport&&this._PreSolve(C$t,C$e)},C$n.prototype.PostSolve=function(C$t,C$e){this._PostSolve&&C$t._shouldReport&&this._PostSolve(C$t,C$e)},C$n.prototype.registerContactFixture=function(C$t){this._contactFixtures.push(C$t)},C$n.prototype.unregisterContactFixture=function(C$t){cc.js.array.remove(this._contactFixtures,C$t)},cc.PhysicsContactListener=C$e.exports=C$n},{}],185:[function(C$t,C$e,C$i){"use strict";var C$o=C$t("../CCPhysicsTypes").PTM_RATIO,C$a=cc.v2(),C$n=cc.Color.GREEN,C$r=cc.Color.RED;function C$s(C$t){b2.Draw.call(this),this._drawer=C$t,this._xf=this._dxf=new b2.Transform}cc.js.extend(C$s,b2.Draw),cc.js.mixin(C$s.prototype,{_DrawPolygon:function(C$t,C$e){for(var C$i=this._drawer,C$n=0;C$n<C$e;C$n++){b2.Transform.MulXV(this._xf,C$t[C$n],C$a);var C$r=C$a.x*C$o,C$s=C$a.y*C$o;0===C$n?C$i.moveTo(C$r,C$s):C$i.lineTo(C$r,C$s)}C$i.close()},DrawPolygon:function(C$t,C$e,C$i){this._applyStrokeColor(C$i),this._DrawPolygon(C$t,C$e),this._drawer.stroke()},DrawSolidPolygon:function(C$t,C$e,C$i){this._applyFillColor(C$i),this._DrawPolygon(C$t,C$e),this._drawer.fill(),this._drawer.stroke()},_DrawCircle:function(C$t,C$e){var C$i=this._xf.p;this._drawer.circle((C$t.x+C$i.x)*C$o,(C$t.y+C$i.y)*C$o,C$e*C$o)},DrawCircle:function(C$t,C$e,C$i){this._applyStrokeColor(C$i),this._DrawCircle(C$t,C$e),this._drawer.stroke()},DrawSolidCircle:function(C$t,C$e,C$i,C$n){this._applyFillColor(C$n),this._DrawCircle(C$t,C$e),this._drawer.fill()},DrawSegment:function(C$t,C$e,C$i){var C$n=this._drawer;if(C$t.x===C$e.x&&C$t.y===C$e.y)return this._applyFillColor(C$i),this._DrawCircle(C$t,2/C$o),void C$n.fill();this._applyStrokeColor(C$i),b2.Transform.MulXV(this._xf,C$t,C$a),C$n.moveTo(C$a.x*C$o,C$a.y*C$o),b2.Transform.MulXV(this._xf,C$e,C$a),C$n.lineTo(C$a.x*C$o,C$a.y*C$o),C$n.stroke()},DrawTransform:function(C$t){var C$e=this._drawer;C$e.strokeColor=C$r,C$a.x=C$a.y=0,b2.Transform.MulXV(C$t,C$a,C$a),C$e.moveTo(C$a.x*C$o,C$a.y*C$o),C$a.x=1,C$a.y=0,b2.Transform.MulXV(C$t,C$a,C$a),C$e.lineTo(C$a.x*C$o,C$a.y*C$o),C$e.stroke(),C$e.strokeColor=C$n,C$a.x=C$a.y=0,b2.Transform.MulXV(C$t,C$a,C$a),C$e.moveTo(C$a.x*C$o,C$a.y*C$o),C$a.x=0,C$a.y=1,b2.Transform.MulXV(C$t,C$a,C$a),C$e.lineTo(C$a.x*C$o,C$a.y*C$o),C$e.stroke()},DrawPoint:function(C$t,C$e,C$i){},_applyStrokeColor:function(C$t){var C$e=this._drawer.strokeColor;C$e.r=255*C$t.r,C$e.g=255*C$t.g,C$e.b=255*C$t.b,C$e.a=150,this._drawer.strokeColor=C$e},_applyFillColor:function(C$t){var C$e=this._drawer.fillColor;C$e.r=255*C$t.r,C$e.g=255*C$t.g,C$e.b=255*C$t.b,C$e.a=150,this._drawer.fillColor=C$e},PushTransform:function(C$t){this._xf=C$t},PopTransform:function(){this._xf=this._dxf}}),C$e.exports=C$s},{"../CCPhysicsTypes":164}],186:[function(C$t,C$e,C$i){"use strict";function C$n(){this._type=0,this._fixtures=[],this._points=[],this._normals=[],this._fractions=[]}C$n.prototype.init=function(C$t){this._type=C$t,this._fixtures.length=0,this._points.length=0,this._normals.length=0,this._fractions.length=0},C$n.prototype.ReportFixture=function(C$t,C$e,C$i,C$n){return 0===this._type?(this._fixtures[0]=C$t,this._points[0]=C$e,this._normals[0]=C$i,this._fractions[0]=C$n):(this._fixtures.push(C$t),this._points.push(cc.v2(C$e)),this._normals.push(cc.v2(C$i)),this._fractions.push(C$n),1===this._type?0:2<=this._type?1:C$n)},C$n.prototype.getFixtures=function(){return this._fixtures},C$n.prototype.getPoints=function(){return this._points},C$n.prototype.getNormals=function(){return this._normals},C$n.prototype.getFractions=function(){return this._fractions},cc.PhysicsRayCastCallback=C$e.exports=C$n},{}],187:[function(C$t,C$e,C$i){"use strict";C$e.exports={getWorldRotation:function(C$t){for(var C$e=C$t.angle,C$i=C$t.parent;C$i.parent;)C$e+=C$i.angle,C$i=C$i.parent;return-C$e},getWorldScale:function(C$t){for(var C$e=C$t.scaleX,C$i=C$t.scaleY,C$n=C$t.parent;C$n.parent;)C$e*=C$n.scaleX,C$i*=C$n.scaleY,C$n=C$n.parent;return cc.v2(C$e,C$i)},convertToNodeRotation:function(C$t,C$e){C$e-=-C$t.angle;for(var C$i=C$t.parent;C$i.parent;)C$e-=-C$i.angle,C$i=C$i.parent;return C$e}}},{}],188:[function(C$t,C$i,C$r){"use strict";C$t("../assets/CCAsset");var C$s=C$t("./utils").callInNextTick,C$y=C$t("../load-pipeline/CCLoader"),C$C=C$t("../load-pipeline/asset-table"),C$S=C$t("../load-pipeline/pack-downloader"),C$a=C$t("../load-pipeline/auto-release-utils"),C$g=C$t("../utils/decode-uuid"),C$T=C$t("../load-pipeline/md5-pipe"),C$w=C$t("../load-pipeline/subpackage-pipe"),C$v=C$t("./js"),C$x="",C$b="",C$A=C$v.createMap(!0);function C$c(C$t){return C$t&&(C$t.constructor===cc.SceneAsset||C$t instanceof cc.Scene)}function C$E(C$t,C$e){this.url=C$t,this.type=C$e}var C$e={loadAsset:function(C$n,C$r,C$t){if("string"!=typeof C$n)return C$s(C$r,new Error("[AssetLibrary] uuid must be string"),null);var C$e={uuid:C$n,type:"uuid"};C$t&&C$t.existingAsset&&(C$e.existingAsset=C$t.existingAsset),C$y.load(C$e,function(C$t,C$e){var C$i;C$t||!C$e?(C$i="string"==typeof C$t?C$t:C$t?C$t.message||C$t.errorMessage||JSON.stringify(C$t):"Unknown error",C$t=new Error("[AssetLibrary] loading JSON or dependencies failed:"+C$i)):(C$e.constructor===cc.SceneAsset&&(C$i=cc.loader._getReferenceKey(C$n),C$e.scene.dependAssets=C$a.getDependsRecursively(C$i)),C$c(C$e)&&(C$i=cc.loader._getReferenceKey(C$n),C$y.removeItem(C$i))),C$r&&C$r(C$t,C$e)})},getLibUrlNoExt:function(C$t,C$e){return C$t=C$g(C$t),(C$e?C$b+"assets/":C$x)+C$t.slice(0,2)+"/"+C$t},_queryAssetInfoInEditor:function(C$t,C$e){},_getAssetInfoInRuntime:function(C$t,C$e){C$e=C$e||{url:null,raw:!1};var C$i=C$A[C$t];return C$i&&!C$v.isChildClassOf(C$i.type,cc.Asset)?(C$e.url=C$b+C$i.url,C$e.raw=!0):(C$e.url=this.getLibUrlNoExt(C$t)+".json",C$e.raw=!1),C$e},_uuidInSettings:function(C$t){return C$t in C$A},queryAssetInfo:function(C$t,C$e){C$t=this._getAssetInfoInRuntime(C$t);C$e(null,C$t.url,C$t.raw)},parseUuidInEditor:function(C$t){},loadJson:function(C$t,C$n){var C$r=""+((new Date).getTime()+Math.random()),C$t={uuid:C$r,type:"uuid",content:C$t,skips:[C$y.assetLoader.id,C$y.downloader.id]};C$y.load(C$t,function(C$t,C$e){var C$i;C$t?C$t=new Error("[AssetLibrary] loading JSON or dependencies failed: "+C$t.message):(C$e.constructor===cc.SceneAsset&&(C$i=cc.loader._getReferenceKey(C$r),C$e.scene.dependAssets=C$a.getDependsRecursively(C$i)),C$c(C$e)&&(C$i=cc.loader._getReferenceKey(C$r),C$y.removeItem(C$i))),C$e._uuid="",C$n&&C$n(C$t,C$e)})},getAssetByUuid:function(C$t){return C$e._uuidToAsset[C$t]||null},init:function(C$t){var C$e=(C$e=C$t.libraryPath).replace(/\\/g,"/"),C$e=(C$x=cc.path.stripSep(C$e)+"/",C$b=C$t.rawAssetsBase,C$t.subpackages&&(C$e=new C$w(C$t.subpackages),cc.loader.insertPipeAfter(cc.loader.assetLoader,C$e),cc.loader.subPackPipe=C$e),C$t.md5AssetsMap);if(C$e&&C$e.import){for(var C$i=0,C$n=0,C$h=C$v.createMap(!0),C$r=C$e.import,C$i=0;C$i<C$r.length;C$i+=2)C$h[C$n=C$g(C$r[C$i])]=C$r[C$i+1];var C$u=C$v.createMap(!0),C$r=C$e["raw-assets"];for(C$i=0;C$i<C$r.length;C$i+=2)C$u[C$n=C$g(C$r[C$i])]=C$r[C$i+1];C$e=new C$T(C$h,C$u,C$x);cc.loader.insertPipeAfter(cc.loader.assetLoader,C$e),cc.loader.md5Pipe=C$e}var C$_,C$s=C$y._assetTables;for(C$_ in C$s)C$s[C$_].reset();var C$o=C$t.rawAssets;if(C$o)for(var C$a in C$o){var C$d=C$o[C$a];for(C$n in C$d){var C$c,C$f=C$d[C$n],C$l=C$f[0],C$p=C$f[1],C$m=cc.js._getClassById(C$p);C$m?(C$A[C$n]=new C$E(C$a+"/"+C$l,C$m),C$c=((C$c=cc.path.extname(C$l))&&(C$l=C$l.slice(0,-C$c.length)),1===C$f[2]),C$s[C$a]||(C$s[C$a]=new C$C),C$s[C$a].add(C$l,C$n,C$m,!C$c)):cc.error("Cannot get",C$p)}}C$t.packedAssets&&C$S.initPacks(C$t.packedAssets),cc.url._init(C$t.mountPaths&&C$t.mountPaths.assets||C$b+"assets")},_uuidToAsset:{}},C$n={effect:{},material:{}},C$o={};function C$l(C$t,C$e,C$r){var C$i=C$t+"s",C$s=C$n[C$t]={};cc.loader.loadResDir(C$i,C$e,"internal",function(){},function(C$t,C$e){if(C$t)cc.error(C$t);else for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];cc.loader.getDependsRecursively(C$n).forEach(function(C$t){return C$o[C$t]=!0}),C$s[""+C$n.name]=C$n}C$r()})}C$e._loadBuiltins=function(C$t){if(cc.game.renderType===cc.game.RENDER_TYPE_CANVAS)return C$t&&C$t();C$l("effect",cc.EffectAsset,function(){C$l("material",cc.Material,C$t)})},C$e.getBuiltin=function(C$t,C$e){return C$n[C$t][C$e]},C$e.getBuiltins=function(C$t){return C$t?C$n[C$t]:C$n},C$e.resetBuiltins=function(){C$n={effect:{},material:{}},C$o={}},C$e.getBuiltinDeps=function(){return C$o},C$i.exports=cc.AssetLibrary=C$e},{"../assets/CCAsset":34,"../load-pipeline/CCLoader":136,"../load-pipeline/asset-table":138,"../load-pipeline/auto-release-utils":140,"../load-pipeline/md5-pipe":147,"../load-pipeline/pack-downloader":148,"../load-pipeline/subpackage-pipe":151,"../utils/decode-uuid":258,"./js":209,"./utils":213}],189:[function(C$t,C$i,C$n){"use strict";var C$g=C$t("./js"),C$l=C$t("./CCEnum"),C$e=C$t("./utils"),C$v=(C$e.isPlainEmptyObj_DEV,C$e.cloneable_DEV,C$t("./attribute")),C$x=C$v.DELIMETER,C$b=C$t("./preprocess-class"),C$h=(C$t("./requiring-frame"),["name","extends","mixins","ctor","__ctor__","properties","statics","editor","__ES6__"]);function C$f(C$t,C$e){C$t.indexOf(C$e)<0&&C$t.push(C$e)}var C$u={datas:null,push:function(C$t){var C$e;this.datas?this.datas.push(C$t):(this.datas=[C$t],C$e=this,setTimeout(function(){C$e.init()},0))},init:function(){var C$t=this.datas;if(C$t){for(var C$e=0;C$e<C$t.length;++C$e){var C$i=C$t[C$e],C$n=C$i.cls,C$r=C$i.props,C$s=("function"==typeof C$r&&(C$r=C$r()),C$g.getClassName(C$n));C$r?C$C(C$n,C$s,C$r,C$n.$super,C$i.mixins):cc.errorID(3633,C$s)}this.datas=null}}};function C$A(C$t,C$e,C$i,C$n){var C$r=C$n.default;C$v.setClassAttr(C$t,C$i,"default",C$r),C$f(C$t.__props__,C$i),C$T(C$t,C$n,0,C$i)}function C$r(C$t){return"function"==typeof C$t?C$t():C$t}function C$_(C$t,C$e,C$i){for(var C$n in C$e)C$t.hasOwnProperty(C$n)||C$i&&!C$i(C$n)||Object.defineProperty(C$t,C$n,C$g.getPropertyDescriptor(C$e,C$n))}function C$p(C$h,C$t,C$e,C$i){var C$n,C$r,C$s=C$i.__ctor__,C$u=C$i.ctor,C$o=C$i.__ES6__,C$a=(C$o?(C$n=[C$u],C$r=C$u):(C$n=C$s?[C$s]:function(C$t,C$e,C$i){for(var C$n=[],C$r=[C$t].concat(C$e),C$s=0;C$s<C$r.length;C$s++){var C$o=C$r[C$s];if(C$o)for(var C$a=function(C$t){return C$d._isCCClass(C$t)?C$t.__ctors__||[]:[C$t]}(C$o),C$c=0;C$c<C$a.length;C$c++)C$f(C$n,C$a[C$c])}C$t=C$i.ctor;return C$t&&C$n.push(C$t),C$n}(C$t,C$e,C$i),C$r=C$y(C$n,C$t,0,C$i),C$g.value(C$r,"extend",function(C$t){return C$t.extends=this,C$d(C$t)},!0)),C$g.value(C$r,"__ctors__",0<C$n.length?C$n:null,!0),C$r.prototype);if(C$t&&(C$o||(C$g.extend(C$r,C$t),C$a=C$r.prototype),C$r.$super=C$t),C$e){for(var C$c=C$e.length-1;0<=C$c;C$c--){var C$l=C$e[C$c];C$_(C$a,C$l.prototype),C$_(C$r,C$l,function(C$t){return C$l.hasOwnProperty(C$t)&&!0}),C$d._isCCClass(C$l)&&C$_(C$v.getClassAttrs(C$r),C$v.getClassAttrs(C$l))}C$a.constructor=C$r}return C$o||(C$a.__initProps__=C$m),C$g.setClassName(C$h,C$r),C$r}function C$s(C$t){return JSON.stringify(C$t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}C$e=/^[A-Za-z_$][0-9A-Za-z_$]*$/;function C$m(C$t){var C$e=C$v.getClassAttrs(C$t),C$i=C$t.__props__,C$e=(null===C$i&&(C$u.init(),C$i=C$t.__props__),function(C$t,C$e){for(var C$r=[],C$s=[],C$o=[],C$a=[],C$i=0;C$i<C$e.length;++C$i){var C$n=C$e[C$i],C$c=C$n+C$x+"default";C$c in C$t&&("object"==typeof(C$c=C$t[C$c])&&C$c||"function"==typeof C$c?(C$r.push(C$n),C$s.push(C$c)):(C$o.push(C$n),C$a.push(C$c)))}return function(){for(var C$t=0;C$t<C$o.length;++C$t)this[C$o[C$t]]=C$a[C$t];for(var C$e=0;C$e<C$r.length;C$e++){var C$i=C$r[C$e],C$n=C$s[C$e],C$n="object"==typeof C$n?C$n instanceof cc.ValueType?C$n.clone():Array.isArray(C$n)?[]:{}:C$n();this[C$i]=C$n}}}(C$e,C$i));(C$t.prototype.__initProps__=C$e).call(this)}function C$y(C$e,C$t,C$i,C$n){var C$r=C$t&&function(C$t,C$e){var C$i,C$n=!1;for(C$i in C$e)if(!(0<=C$h.indexOf(C$i))){var C$r=C$e[C$i];if("function"==typeof C$r){var C$s=C$g.getPropertyDescriptor(C$t.prototype,C$i);if(C$s){C$s=C$s.value;if("function"==typeof C$s){C$o.test(C$r)&&(C$n=!0,C$e[C$i]=function(C$i,C$n){return function(){var C$t=this._super,C$e=(this._super=C$i,C$n.apply(this,arguments));return this._super=C$t,C$e}}(C$s,C$r));continue}}}}return C$n}(C$t,C$n),C$s=0<(C$t=C$e.length)?C$r?2===C$t?function(){this._super=null,this.__initProps__(C$s),C$e[0].apply(this,arguments),C$e[1].apply(this,arguments)}:function(){this._super=null,this.__initProps__(C$s);for(var C$t=0;C$t<C$e.length;++C$t)C$e[C$t].apply(this,arguments)}:3===C$t?function(){this.__initProps__(C$s),C$e[0].apply(this,arguments),C$e[1].apply(this,arguments),C$e[2].apply(this,arguments)}:function(){this.__initProps__(C$s);for(var C$t=C$s.__ctors__,C$e=0;C$e<C$t.length;++C$e)C$t[C$e].apply(this,arguments)}:function(){C$r&&(this._super=null),this.__initProps__(C$s)};return C$s}var C$o=/xyz/.test(function(){xyz})?/\b\._super\b/:/.*/;/xyz/.test(function(){xyz});function C$C(C$e,C$h,C$t,C$i,C$u,C$_){if(C$e.__props__=[],C$i&&C$i.__props__&&(C$e.__props__=C$i.__props__.slice()),C$u)for(var C$d=0;C$d<C$u.length;++C$d){var C$f=C$u[C$d];C$f.__props__&&(C$e.__props__=C$e.__props__.concat(C$f.__props__.filter(function(C$t){return C$e.__props__.indexOf(C$t)<0})))}if(C$t)for(var C$n in C$b.preprocessAttrs(C$t,C$h,C$e,C$_),C$t){var C$r=C$t[C$n];"default"in C$r?C$A(C$e,0,C$n,C$r):(C$s=C$e,C$p=C$h,C$n=C$n,C$m=C$_,C$l=C$c=C$a=C$o=void 0,C$o=(C$r=C$r).get,C$a=C$r.set,C$c=C$s.prototype,C$l=!Object.getOwnPropertyDescriptor(C$c,C$n),C$o&&(C$T(C$s,C$r,0,C$n),C$v.setClassAttr(C$s,C$n,"serializable",!1),C$m||C$g.get(C$c,C$n,C$o,C$l,C$l)),C$a&&(C$m||C$g.set(C$c,C$n,C$a,C$l,C$l)))}var C$s,C$p,C$m,C$o,C$a,C$c,C$l,C$y=C$v.getClassAttrs(C$e);C$e.__values__=C$e.__props__.filter(function(C$t){return!1!==C$y[C$t+C$x+"serializable"]})}function C$d(C$t){var C$e,C$i,C$n,C$r=(C$t=C$t||{}).name,C$s=C$t.extends,C$o=C$t.mixins,C$a=function(C$t,C$e,C$i,C$n){var C$r=cc.Component,C$s=cc._RF.peek();if(C$s&&C$g.isChildClassOf(C$e,C$r)){if(C$g.isChildClassOf(C$s.cls,C$r))return cc.errorID(3615),null;C$t=C$t||C$s.script}return C$t=C$p(C$t,C$e,C$i,C$n),C$s&&(C$g.isChildClassOf(C$e,C$r)?((C$i=C$s.uuid)&&C$g._setClassId(C$i,C$t),C$s.cls=C$t):C$g.isChildClassOf(C$s.cls,C$r)||(C$s.cls=C$t)),C$t}(C$r,C$s,C$o,C$t),C$r=C$r||cc.js.getClassName(C$a),C$c=(C$a._sealed=!0,C$s&&(C$s._sealed=!1),C$t.properties),C$l=("function"==typeof C$c||C$s&&null===C$s.__props__||C$o&&C$o.some(function(C$t){return null===C$t.__props__})?(C$u.push({cls:C$a,props:C$c,mixins:C$o}),C$a.__props__=C$a.__values__=null):C$C(C$a,C$r,C$c,C$s,C$t.mixins,C$t.__ES6__),C$t.statics);if(C$l)for(C$e in C$l)C$a[C$e]=C$l[C$e];for(C$i in C$t)0<=C$h.indexOf(C$i)||(C$n=C$t[C$i],C$b.validateMethodWithProps(C$n,C$i,C$r,C$a,C$s)&&C$g.value(C$a.prototype,C$i,C$n,!0,!0));C$o=C$t.editor;return C$o&&C$g.isChildClassOf(C$s,cc.Component)&&cc.Component._registerEditorProps(C$a,C$o),C$a}C$d._isCCClass=function(C$t){return C$t&&C$t.hasOwnProperty("__ctors__")},C$d._fastDefine=function(C$t,C$e,C$i){C$g.setClassName(C$t,C$e);for(var C$n=C$e.__props__=C$e.__values__=Object.keys(C$i),C$r=C$v.getClassAttrs(C$e),C$s=0;C$s<C$n.length;C$s++){var C$o=C$n[C$s];C$r[C$o+C$x+"visible"]=!1,C$r[C$o+C$x+"default"]=C$i[C$o]}},C$d.Attr=C$v,C$d.attr=C$v.attr,C$d.getInheritanceChain=function(C$t){for(var C$e=[];C$t=C$g.getSuper(C$t);)C$t!==Object&&C$e.push(C$t);return C$e};var C$S={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"};function C$T(C$t,C$n,C$e,C$i){var C$r=null,C$s="";function C$o(){return C$s=C$i+C$x,C$r=C$v.getClassAttrs(C$t)}var C$a=C$n.type;function C$c(C$t,C$e){var C$i;C$t in C$n&&(typeof(C$i=C$n[C$t])===C$e&&((C$r||C$o())[C$s+C$t]=C$i))}C$a&&(C$S[C$a]?(C$r||C$o())[C$s+"type"]=C$a:"Object"===C$a||(C$a===C$v.ScriptUuid?((C$r||C$o())[C$s+"type"]="Script",C$r[C$s+"ctor"]=cc.ScriptAsset):"object"==typeof C$a?C$l.isEnum(C$a)&&((C$r||C$o())[C$s+"type"]="Enum",C$r[C$s+"enumList"]=C$l.getList(C$a)):"function"==typeof C$a&&((C$r||C$o())[C$s+"type"]="Object",C$r[C$s+"ctor"]=C$a))),C$n.editorOnly&&((C$r||C$o())[C$s+"editorOnly"]=!0),C$n.url&&((C$r||C$o())[C$s+"saveUrlAsAsset"]=!0),!1===C$n.serializable&&((C$r||C$o())[C$s+"serializable"]=!1),C$c("formerlySerializedAs","string");C$a=C$n.range;C$a&&Array.isArray(C$a)&&2<=C$a.length&&((C$r||C$o())[C$s+"min"]=C$a[0],C$r[C$s+"max"]=C$a[1],2<C$a.length&&(C$r[C$s+"step"]=C$a[2])),C$c("min","number"),C$c("max","number"),C$c("step","number")}cc.Class=C$d,C$i.exports={isArray:function(C$t){return C$t=C$r(C$t),Array.isArray(C$t)},fastDefine:C$d._fastDefine,getNewValueTypeCode:!1,IDENTIFIER_RE:C$e,escapeForJS:C$s,getDefault:C$r}},{"./CCEnum":191,"./attribute":201,"./js":209,"./preprocess-class":210,"./requiring-frame":211,"./utils":213}],190:[function(C$t,C$h,C$u){"use strict";C$t("./CCClass");var C$_=C$t("./preprocess-class"),C$l=C$t("./js"),C$n="__ccclassCache__";function C$d(C$t){return C$t}function C$o(C$t,C$e){return C$t[C$e]||(C$t[C$e]={})}function C$e(C$i){return function(C$e){return"function"==typeof C$e?C$i(C$e):function(C$t){return C$i(C$t,C$e)}}}function C$i(C$t,C$i,C$e){return function(C$e){return function(C$t){return C$i(C$t,C$e)}}}C$t=C$i.bind(null,!1);function C$r(){return C$i.bind(null,!1)}var C$s=C$r(),C$f=C$r();function C$a(C$t){return C$o(C$t,C$n)}function C$p(C$t,C$e,C$i,C$n,C$r,C$s){var C$o,C$a=C$r&&(C$r.get||C$r.set),C$c=(C$n&&(C$o=C$_.getFullFormOfProperty(C$n,C$a)),C$e[C$i]),C$c=C$l.mixin(C$c||{},C$o||C$n||{});C$a?(C$r.get&&(C$c.get=C$r.get),C$r.set&&(C$c.set=C$r.set)):(C$o=void 0,C$r?C$r.initializer&&(C$o=function(C$e){var C$t;try{C$t=C$e()}catch(C$t){return C$e}return"object"!=typeof C$t||null===C$t?C$t:C$e}(C$r.initializer)):(C$n=C$s.default||(C$s.default=function(C$t){var C$e;try{C$e=new C$t}catch(C$t){return{}}return C$e}(C$t))).hasOwnProperty(C$i)&&(C$o=C$n[C$i]),C$c.default=C$o),C$e[C$i]=C$c}var C$m=C$e(function(C$t,C$e){var C$i=C$l.getSuper(C$t),C$e={name:C$e,extends:C$i=C$i===Object?null:C$i,ctor:C$t,__ES6__:!0},C$i=C$t[C$n];return C$i&&((C$i=C$i.proto)&&C$l.mixin(C$e,C$i),C$t[C$n]=void 0),cc.Class(C$e)});function C$y(C$t,C$i,C$n){return C$t(function(C$t,C$e){var C$t=C$a(C$t);C$t&&(C$e=void 0!==C$n?C$n:C$e,C$t=C$o(C$t,"proto"),C$o(C$t,"editor")[C$i]=C$e)},C$i)}function C$c(C$t){return C$t(C$d)}var C$g=C$c(C$e),C$t=C$y(C$t,"requireComponent"),C$v=C$c(C$s),C$f=C$y(C$f,"executionOrder"),C$x=C$c(C$e),C$b=C$c(C$e),C$A=C$c(C$s),C$C=C$c(C$s),C$s=C$c(C$s);cc._decorator=C$h.exports={ccclass:C$m,property:function(C$t,C$e,C$i){var C$s=null;function C$n(C$t,C$e,C$i){var C$n,C$r=C$a(C$t.constructor);C$r&&(C$n=C$o(C$r,"proto"),C$n=C$o(C$n,"properties"),C$p(C$t.constructor,C$n,C$e,C$s,C$i,C$r))}if(void 0===C$e)return C$s=C$t,C$n;C$n(C$t,C$e,C$i)},executeInEditMode:C$g,requireComponent:C$t,menu:C$v,executionOrder:C$f,disallowMultiple:C$x,playOnFocus:C$b,inspector:C$A,icon:C$C,help:C$s,mixins:function(){for(var C$e=[],C$t=0;C$t<arguments.length;C$t++)C$e[C$t]=arguments[C$t];return function(C$t){C$t=C$a(C$t);C$t&&(C$o(C$t,"proto").mixins=C$e)}}}},{"./CCClass":189,"./js":209,"./preprocess-class":210,"./utils":213}],191:[function(C$t,C$e,C$i){"use strict";var C$o=C$t("./js");function C$n(C$t){if("__enums__"in C$t)return C$t;C$o.value(C$t,"__enums__",null,!0);for(var C$e=-1,C$i=Object.keys(C$t),C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n],C$s=C$t[C$r];if(-1===C$s)C$s=++C$e,C$t[C$r]=C$s;else if("number"==typeof C$s)C$e=C$s;else if("string"==typeof C$s&&Number.isInteger(parseFloat(C$r)))continue;C$s=""+C$s;C$r!==C$s&&C$o.value(C$t,C$s,C$r)}return C$t}C$n.isEnum=function(C$t){return C$t&&C$t.hasOwnProperty("__enums__")},C$n.getList=function(C$t){if(C$t.__enums__)return C$t.__enums__;var C$e,C$i=C$t.__enums__=[];for(C$e in C$t){var C$n=C$t[C$e];Number.isInteger(C$n)&&C$i.push({name:C$e,value:C$n})}return C$i.sort(function(C$t,C$e){return C$t.value-C$e.value}),C$i},C$e.exports=cc.Enum=C$n},{"./js":209}],192:[function(C$t,C$e,C$i){"use strict";var C$n,C$r=C$t("../event-manager"),C$t=C$t("./CCInputManager");cc.Acceleration=function(C$t,C$e,C$i,C$n){this.x=C$t||0,this.y=C$e||0,this.z=C$i||0,this.timestamp=C$n||0},C$t.setAccelerometerEnabled=function(C$t){this._accelEnabled!==C$t&&(this._accelEnabled=C$t,(C$t=cc.director.getScheduler()).enableForTarget(this),this._accelEnabled?(this._registerAccelerometerEvent(),this._accelCurTime=0,C$t.scheduleUpdate(this)):(this._unregisterAccelerometerEvent(),this._accelCurTime=0,C$t.unscheduleUpdate(this)))},C$t.setAccelerometerInterval=function(C$t){this._accelInterval!==C$t&&(this._accelInterval=C$t)},C$t._registerKeyboardEvent=function(){cc.game.canvas.addEventListener("keydown",function(C$t){C$r.dispatchEvent(new cc.Event.EventKeyboard(C$t.keyCode,!0)),C$t.stopPropagation(),C$t.preventDefault()},!1),cc.game.canvas.addEventListener("keyup",function(C$t){C$r.dispatchEvent(new cc.Event.EventKeyboard(C$t.keyCode,!1)),C$t.stopPropagation(),C$t.preventDefault()},!1)},C$t._registerAccelerometerEvent=function(){var C$t=window,C$e=(this._acceleration=new cc.Acceleration,this._accelDeviceEvent=C$t.DeviceMotionEvent||C$t.DeviceOrientationEvent,cc.sys.browserType===cc.sys.BROWSER_TYPE_MOBILE_QQ&&(this._accelDeviceEvent=window.DeviceOrientationEvent),this._accelDeviceEvent===C$t.DeviceMotionEvent?"devicemotion":"deviceorientation"),C$i=navigator.userAgent;(/Android/.test(C$i)||/Adr/.test(C$i)&&cc.sys.browserType===cc.BROWSER_TYPE_UC)&&(this._minus=-1),C$n=this.didAccelerate.bind(this),C$t.addEventListener(C$e,C$n,!1)},C$t._unregisterAccelerometerEvent=function(){var C$t=window,C$e=this._accelDeviceEvent===C$t.DeviceMotionEvent?"devicemotion":"deviceorientation";C$n&&C$t.removeEventListener(C$e,C$n,!1)},C$t.didAccelerate=function(C$t){var C$e,C$i,C$n,C$r,C$s,C$o=window;this._accelEnabled&&(C$e=this._acceleration,C$r=this._accelDeviceEvent===window.DeviceMotionEvent?(C$r=C$t.accelerationIncludingGravity,C$i=this._accelMinus*C$r.x*.1,C$n=this._accelMinus*C$r.y*.1,.1*C$r.z):(C$i=C$t.gamma/90*.981,C$n=-C$t.beta/90*.981,C$t.alpha/90*.981),cc.view._isRotated&&(C$s=C$i,C$i=-C$n,C$n=C$s),C$e.x=C$i,C$e.y=C$n,C$e.z=C$r,C$e.timestamp=C$t.timeStamp||Date.now(),C$s=C$e.x,90===C$o.orientation?(C$e.x=-C$e.y,C$e.y=C$s):-90===C$o.orientation?(C$e.x=C$e.y,C$e.y=-C$s):180===C$o.orientation&&(C$e.x=-C$e.x,C$e.y=-C$e.y),cc.sys.os===cc.sys.OS_ANDROID&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_MOBILE_QQ&&(C$e.x=-C$e.x,C$e.y=-C$e.y))}},{"../event-manager":113,"./CCInputManager":193}],193:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./CCMacro"),C$d=C$t("./CCSys"),C$f=C$t("../event-manager"),C$r=C$n.TOUCH_TIMEOUT,C$h=cc.v2(),C$t={_mousePressed:!1,_isRegisterEvent:!1,_preTouchPoint:cc.v2(0,0),_prevMousePoint:cc.v2(0,0),_preTouchPool:[],_preTouchPoolPointer:0,_touches:[],_touchesIntegerDict:{},_indexBitsUsed:0,_maxTouches:8,_accelEnabled:!1,_accelInterval:.2,_accelMinus:1,_accelCurTime:0,_acceleration:null,_accelDeviceEvent:null,_canvasBoundingRect:{left:0,top:0,adjustedLeft:0,adjustedTop:0,width:0,height:0},_getUnUsedIndex:function(){for(var C$t=this._indexBitsUsed,C$e=cc.sys.now(),C$i=0;C$i<this._maxTouches;C$i++){if(!(1&C$t))return this._indexBitsUsed|=1<<C$i,C$i;var C$n=this._touches[C$i];if(C$e-C$n._lastModified>C$r)return this._removeUsedIndexBit(C$i),delete this._touchesIntegerDict[C$n.getID()],C$i;C$t>>=1}return-1},_removeUsedIndexBit:function(C$t){C$t<0||C$t>=this._maxTouches||(this._indexBitsUsed&=~(1<<C$t))},_glView:null,_updateCanvasBoundingRect:function(){var C$t,C$e=cc.game.canvas,C$i=this._canvasBoundingRect,C$n=document.documentElement,C$r=window.pageXOffset-C$n.clientLeft,C$n=window.pageYOffset-C$n.clientTop;C$e.getBoundingClientRect?(C$t=C$e.getBoundingClientRect(),C$i.left=C$t.left+C$r,C$i.top=C$t.top+C$n,C$i.width=C$t.width,C$i.height=C$t.height):C$e instanceof HTMLCanvasElement?(C$i.left=C$r,C$i.top=C$n,C$i.width=C$e.width,C$i.height=C$e.height):(C$i.left=C$r,C$i.top=C$n,C$i.width=parseInt(C$e.style.width),C$i.height=parseInt(C$e.style.height))},handleTouchesBegin:function(C$t){for(var C$e,C$i,C$n,C$r,C$s,C$o=[],C$a=this._touchesIntegerDict,C$c=C$d.now(),C$l=0,C$h=C$t.length;C$l<C$h;C$l++)null==C$a[C$r=(C$n=C$t[C$l]).getID()]&&(-1!==(C$i=this._getUnUsedIndex())?((C$e=this._touches[C$i]=new cc.Touch(C$n._point.x,C$n._point.y,C$n.getID()))._lastModified=C$c,C$e._setPrevPoint(C$n._prevPoint),C$a[C$r]=C$i,C$o.push(C$e)):cc.logID(2300,C$i));0<C$o.length&&(this._glView._convertTouchesWithScale(C$o),(C$s=new cc.Event.EventTouch(C$o))._eventCode=cc.Event.EventTouch.BEGAN,C$f.dispatchEvent(C$s))},handleTouchesMove:function(C$t){for(var C$e,C$i,C$n,C$r=[],C$s=this._touches,C$o=C$d.now(),C$a=0,C$c=C$t.length;C$a<C$c;C$a++)C$i=(C$e=C$t[C$a]).getID(),null!=(C$i=this._touchesIntegerDict[C$i])&&C$s[C$i]&&(C$s[C$i]._setPoint(C$e._point),C$s[C$i]._setPrevPoint(C$e._prevPoint),C$s[C$i]._lastModified=C$o,C$r.push(C$s[C$i]));0<C$r.length&&(this._glView._convertTouchesWithScale(C$r),(C$n=new cc.Event.EventTouch(C$r))._eventCode=cc.Event.EventTouch.MOVED,C$f.dispatchEvent(C$n))},handleTouchesEnd:function(C$t){var C$t=this.getSetOfTouchesEndOrCancel(C$t);0<C$t.length&&(this._glView._convertTouchesWithScale(C$t),(C$t=new cc.Event.EventTouch(C$t))._eventCode=cc.Event.EventTouch.ENDED,C$f.dispatchEvent(C$t)),this._preTouchPool.length=0},handleTouchesCancel:function(C$t){var C$t=this.getSetOfTouchesEndOrCancel(C$t);0<C$t.length&&(this._glView._convertTouchesWithScale(C$t),(C$t=new cc.Event.EventTouch(C$t))._eventCode=cc.Event.EventTouch.CANCELED,C$f.dispatchEvent(C$t)),this._preTouchPool.length=0},getSetOfTouchesEndOrCancel:function(C$t){for(var C$e,C$i,C$n,C$r=[],C$s=this._touches,C$o=this._touchesIntegerDict,C$a=0,C$c=C$t.length;C$a<C$c;C$a++)null!=(C$i=C$o[C$n=(C$e=C$t[C$a]).getID()])&&C$s[C$i]&&(C$s[C$i]._setPoint(C$e._point),C$s[C$i]._setPrevPoint(C$e._prevPoint),C$r.push(C$s[C$i]),this._removeUsedIndexBit(C$i),delete C$o[C$n]);return C$r},getPreTouch:function(C$t){for(var C$e=null,C$i=this._preTouchPool,C$n=C$t.getID(),C$r=C$i.length-1;0<=C$r;C$r--)if(C$i[C$r].getID()===C$n){C$e=C$i[C$r];break}return C$e=C$e||C$t},setPreTouch:function(C$t){for(var C$e=!1,C$i=this._preTouchPool,C$n=C$t.getID(),C$r=C$i.length-1;0<=C$r;C$r--)if(C$i[C$r].getID()===C$n){C$i[C$r]=C$t,C$e=!0;break}C$e||(C$i.length<=50?C$i.push(C$t):(C$i[this._preTouchPoolPointer]=C$t,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))},getTouchByXY:function(C$t,C$e,C$i){var C$n=this._preTouchPoint,C$t=this._glView.convertToLocationInView(C$t,C$e,C$i),C$e=new cc.Touch(C$t.x,C$t.y,0);return C$e._setPrevPoint(C$n.x,C$n.y),C$n.x=C$t.x,C$n.y=C$t.y,C$e},getMouseEvent:function(C$t,C$e,C$i){var C$n=this._prevMousePoint,C$i=new cc.Event.EventMouse(C$i);return C$i._setPrevCursor(C$n.x,C$n.y),C$n.x=C$t.x,C$n.y=C$t.y,this._glView._convertMouseToLocationInView(C$n,C$e),C$i.setLocation(C$n.x,C$n.y),C$i},getPointByEvent:function(C$t,C$e){return cc.sys.browserType!==cc.sys.BROWSER_TYPE_QQ&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_UC&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_SAFARI||this._updateCanvasBoundingRect(),null!=C$t.pageX?{x:C$t.pageX,y:C$t.pageY}:(C$e.left-=document.body.scrollLeft,C$e.top-=document.body.scrollTop,{x:C$t.clientX,y:C$t.clientY})},getTouchesByEvent:function(C$t,C$e){for(var C$i,C$n,C$r,C$s=[],C$o=this._glView,C$a=this._preTouchPoint,C$c=C$t.changedTouches.length,C$l=0;C$l<C$c;C$l++)(C$r=C$t.changedTouches[C$l])&&(C$n=void 0,C$n=C$d.BROWSER_TYPE_FIREFOX===C$d.browserType?C$o.convertToLocationInView(C$r.pageX,C$r.pageY,C$e,C$h):C$o.convertToLocationInView(C$r.clientX,C$r.clientY,C$e,C$h),null!=C$r.identifier?(C$i=new cc.Touch(C$n.x,C$n.y,C$r.identifier),C$r=this.getPreTouch(C$i).getLocation(),C$i._setPrevPoint(C$r.x,C$r.y),this.setPreTouch(C$i)):(C$i=new cc.Touch(C$n.x,C$n.y))._setPrevPoint(C$a.x,C$a.y),C$a.x=C$n.x,C$a.y=C$n.y,C$s.push(C$i));return C$s},registerSystemEvent:function(C$s){if(!this._isRegisterEvent){this._glView=cc.view;var C$o=this,C$a=this._canvasBoundingRect,C$t=(window.addEventListener("resize",this._updateCanvasBoundingRect.bind(this)),C$d.isMobile),C$e="mouse"in C$d.capabilities,C$h="touches"in C$d.capabilities;if(C$e){C$t||(window.addEventListener("mousedown",function(){C$o._mousePressed=!0},!1),window.addEventListener("mouseup",function(C$t){var C$e;C$o._mousePressed&&(C$o._mousePressed=!1,C$e=C$o.getPointByEvent(C$t,C$a),cc.rect(C$a.left,C$a.top,C$a.width,C$a.height).contains(C$e)||(C$o.handleTouchesEnd([C$o.getTouchByXY(C$e.x,C$e.y,C$a)]),(C$e=C$o.getMouseEvent(C$e,C$a,cc.Event.EventMouse.UP)).setButton(C$t.button),C$f.dispatchEvent(C$e)))},!1));for(var C$e=cc.Event.EventMouse,C$i=[!C$t&&["mousedown",C$e.DOWN,function(C$t,C$e,C$i,C$n){C$o._mousePressed=!0,C$o.handleTouchesBegin([C$o.getTouchByXY(C$i.x,C$i.y,C$n)]),C$s.focus()}],!C$t&&["mouseup",C$e.UP,function(C$t,C$e,C$i,C$n){C$o._mousePressed=!1,C$o.handleTouchesEnd([C$o.getTouchByXY(C$i.x,C$i.y,C$n)])}],!C$t&&["mousemove",C$e.MOVE,function(C$t,C$e,C$i,C$n){C$o.handleTouchesMove([C$o.getTouchByXY(C$i.x,C$i.y,C$n)]),C$o._mousePressed||C$e.setButton(null)}],["mousewheel",C$e.SCROLL,function(C$t,C$e){C$e.setScrollData(0,C$t.wheelDelta)}],["DOMMouseScroll",C$e.SCROLL,function(C$t,C$e){C$e.setScrollData(0,-120*C$t.detail)}]],C$n=0;C$n<C$i.length;++C$n){var C$c=C$i[C$n];C$c&&function(){var C$t=C$c[0],C$n=C$c[1],C$r=C$c[2];C$s.addEventListener(C$t,function(C$t){var C$e=C$o.getPointByEvent(C$t,C$a),C$i=C$o.getMouseEvent(C$e,C$a,C$n);C$i.setButton(C$t.button),C$r(C$t,C$i,C$e,C$a),C$f.dispatchEvent(C$i),C$t.stopPropagation(),C$t.preventDefault()},!1)}()}}if(window.navigator.msPointerEnabled){var C$r,C$l={MSPointerDown:C$o.handleTouchesBegin,MSPointerMove:C$o.handleTouchesMove,MSPointerUp:C$o.handleTouchesEnd,MSPointerCancel:C$o.handleTouchesCancel};for(C$r in C$l)!function(C$t){var C$i=C$l[C$t];C$s.addEventListener(C$t,function(C$t){var C$e=document.documentElement;C$a.adjustedLeft=C$a.left-C$e.scrollLeft,C$a.adjustedTop=C$a.top-C$e.scrollTop,C$i.call(C$o,[C$o.getTouchByXY(C$t.clientX,C$t.clientY,C$a)]),C$t.stopPropagation()},!1)}(C$r)}if(C$h){var C$u,C$_={touchstart:function(C$t){C$o.handleTouchesBegin(C$t),C$s.focus()},touchmove:function(C$t){C$o.handleTouchesMove(C$t)},touchend:function(C$t){C$o.handleTouchesEnd(C$t)},touchcancel:function(C$t){C$o.handleTouchesCancel(C$t)}};for(C$u in C$_)!function(C$t){var C$i=C$_[C$t];C$s.addEventListener(C$t,function(C$t){var C$e;C$t.changedTouches&&(C$e=document.body,C$a.adjustedLeft=C$a.left-(C$e.scrollLeft||window.scrollX||0),C$a.adjustedTop=C$a.top-(C$e.scrollTop||window.scrollY||0),C$i(C$o.getTouchesByEvent(C$t,C$a)),C$t.stopPropagation(),C$t.preventDefault())},!1)}(C$u)}this._registerKeyboardEvent(),this._isRegisterEvent=!0}},_registerKeyboardEvent:function(){},_registerAccelerometerEvent:function(){},update:function(C$t){this._accelCurTime>this._accelInterval&&(this._accelCurTime-=this._accelInterval,C$f.dispatchEvent(new cc.Event.EventAcceleration(this._acceleration))),this._accelCurTime+=C$t}};C$e.exports=cc.internal.inputManager=C$t},{"../event-manager":113,"./CCMacro":194,"./CCSys":198}],194:[function(C$t,C$e,C$i){"use strict";cc.macro={RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,MIN_ZINDEX:-Math.pow(2,15),MAX_ZINDEX:Math.pow(2,15)-1,ONE:1,ZERO:0,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,DST_ALPHA:772,DST_COLOR:774,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ORIENTATION_PORTRAIT:1,ORIENTATION_LANDSCAPE:2,ORIENTATION_AUTO:3,DENSITYDPI_DEVICE:"device-dpi",DENSITYDPI_HIGH:"high-dpi",DENSITYDPI_MEDIUM:"medium-dpi",DENSITYDPI_LOW:"low-dpi",FIX_ARTIFACTS_BY_STRECHING_TEXEL_TMX:!0,DIRECTOR_STATS_POSITION:cc.v2(0,0),ENABLE_STACKABLE_ACTIONS:!0,TOUCH_TIMEOUT:5e3,BATCH_VERTEX_COUNT:2e4,ENABLE_TILEDMAP_CULLING:!0,DOWNLOAD_MAX_CONCURRENT:64,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!1,ENABLE_CULLING:!1,CLEANUP_IMAGE_CACHE:!1,SHOW_MESH_WIREFRAME:!1,SHOW_MESH_NORMAL:!1,ENABLE_MULTI_TOUCH:!0},Object.defineProperty(cc.macro,"ROTATE_ACTION_CCW",{set:function(C$t){cc.RotateTo&&cc.RotateBy&&(cc.RotateTo._reverse=cc.RotateBy._reverse=C$t)}});cc.macro.SUPPORT_TEXTURE_FORMATS=[".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],cc.macro.KEY={none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},cc.macro.ImageFormat=cc.Enum({JPG:0,PNG:1,TIFF:2,WEBP:3,PVR:4,ETC:5,S3TC:6,ATITC:7,TGA:8,RAWDATA:9,UNKNOWN:10}),cc.macro.BlendFactor=cc.Enum({ONE:1,ZERO:0,SRC_ALPHA:770,SRC_COLOR:768,DST_ALPHA:772,DST_COLOR:774,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775}),cc.macro.TextAlignment=cc.Enum({LEFT:0,CENTER:1,RIGHT:2}),cc.macro.VerticalTextAlignment=cc.Enum({TOP:0,CENTER:1,BOTTOM:2}),C$e.exports=cc.macro},{}],195:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./js"),C$t=C$t("./CCClass");function C$r(){this._name="",this._objFlags=0}C$t.fastDefine("cc.Object",C$r,{_name:"",_objFlags:0}),C$n.value(C$r,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20});var C$s=[];C$n.value(C$r,"_deferredDestroy",function(){for(var C$t=C$s.length,C$e=0;C$e<C$t;++C$e){var C$i=C$s[C$e];1&C$i._objFlags||C$i._destroyImmediate()}C$t===C$s.length?C$s.length=0:C$s.splice(0,C$t)});C$t=C$r.prototype;C$n.getset(C$t,"name",function(){return this._name},function(C$t){this._name=C$t},!0),C$n.get(C$t,"isValid",function(){return!(1&this._objFlags)},!0);C$t.destroy=function(){return 1&this._objFlags?(cc.warnID(5e3),!1):!(4&this._objFlags)&&(this._objFlags|=4,C$s.push(this),!0)},C$t._destruct=function(){var C$t=this.constructor,C$e=C$t.__destruct__;C$e||(C$e=function(C$t,C$e){var C$i=C$t instanceof cc._BaseNode||C$t instanceof cc.Component,C$n=C$i?"_id":null,C$r={};for(C$c in C$t)if(C$t.hasOwnProperty(C$c)){if(C$c===C$n)continue;switch(typeof C$t[C$c]){case"string":C$r[C$c]="";break;case"object":case"function":C$r[C$c]=null}}if(cc.Class._isCCClass(C$e))for(var C$s=cc.Class.Attr.getClassAttrs(C$e),C$o=C$e.__props__,C$a=0;C$a<C$o.length;C$a++){var C$c,C$l=(C$c=C$o[C$a])+cc.Class.Attr.DELIMETER+"default";if(C$l in C$s&&(!C$i||"_id"!==C$c))switch(typeof C$s[C$l]){case"string":C$r[C$c]="";break;case"object":case"function":C$r[C$c]=null;break;case"undefined":C$r[C$c]=void 0}}return function(C$t){for(var C$e in C$r)C$t[C$e]=C$r[C$e]}}(this,C$t),C$n.value(C$t,"__destruct__",C$e,!0)),C$e(this)},C$t._onPreDestroy=null,C$t._destroyImmediate=function(){1&this._objFlags?cc.errorID(5e3):(this._onPreDestroy&&this._onPreDestroy(),this._destruct(),this._objFlags|=1)},C$t._deserialize=null,cc.isValid=function(C$t,C$e){return"object"==typeof C$t?!(!C$t||C$t._objFlags&(C$e?5:1)):void 0!==C$t},cc.Object=C$e.exports=C$r},{"./CCClass":189,"./js":209}],196:[function(C$t,C$e,C$i){"use strict";C$t=C$t("../platform/js");cc.SAXParser=function(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):(this._isSupportDOMParser=!1,this._parser=null)},cc.SAXParser.prototype={constructor:cc.SAXParser,parse:function(C$t){return this._parseXML(C$t)},_parseXML:function(C$t){var C$e;return this._isSupportDOMParser?C$e=this._parser.parseFromString(C$t,"text/xml"):((C$e=new ActiveXObject("Microsoft.XMLDOM")).async="false",C$e.loadXML(C$t)),C$e}},cc.PlistParser=function(){cc.SAXParser.call(this)},C$t.extend(cc.PlistParser,cc.SAXParser),C$t.mixin(cc.PlistParser.prototype,{parse:function(C$t){var C$e=this._parseXML(C$t).documentElement;if("plist"!==C$e.tagName)return cc.warnID(5100),{};for(var C$i=null,C$n=0,C$r=C$e.childNodes.length;C$n<C$r&&1!==(C$i=C$e.childNodes[C$n]).nodeType;C$n++);return this._parseNode(C$i)},_parseNode:function(C$t){var C$e=null,C$i=C$t.tagName;if("dict"===C$i)C$e=this._parseDict(C$t);else if("array"===C$i)C$e=this._parseArray(C$t);else if("string"===C$i)if(1===C$t.childNodes.length)C$e=C$t.firstChild.nodeValue;else for(var C$e="",C$n=0;C$n<C$t.childNodes.length;C$n++)C$e+=C$t.childNodes[C$n].nodeValue;else"false"===C$i?C$e=!1:"true"===C$i?C$e=!0:"real"===C$i?C$e=parseFloat(C$t.firstChild.nodeValue):"integer"===C$i&&(C$e=parseInt(C$t.firstChild.nodeValue,10));return C$e},_parseArray:function(C$t){for(var C$e=[],C$i=0,C$n=C$t.childNodes.length;C$i<C$n;C$i++){var C$r=C$t.childNodes[C$i];1===C$r.nodeType&&C$e.push(this._parseNode(C$r))}return C$e},_parseDict:function(C$t){for(var C$e={},C$i=null,C$n=0,C$r=C$t.childNodes.length;C$n<C$r;C$n++){var C$s=C$t.childNodes[C$n];1===C$s.nodeType&&("key"===C$s.tagName?C$i=C$s.firstChild.nodeValue:C$e[C$i]=this._parseNode(C$s))}return C$e}}),cc.saxParser=new cc.SAXParser,cc.plistParser=new cc.PlistParser,C$e.exports={saxParser:cc.saxParser,plistParser:cc.plistParser}},{"../platform/js":209}],197:[function(C$t,C$e,C$i){"use strict";cc.screen={_supportsFullScreen:!1,_onfullscreenchange:null,_onfullscreenerror:null,_preOnFullScreenChange:null,_preOnFullScreenError:null,_preOnTouch:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement","fullscreenerror"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement","fullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement","msfullscreenerror"]],init:function(){this._fn={};for(var C$t,C$e,C$i=this._fnMap,C$n=0,C$r=C$i.length;C$n<C$r;C$n++)if((C$t=C$i[C$n])&&void 0!==document[C$t[1]]){for(C$n=0,C$e=C$t.length;C$n<C$e;C$n++)this._fn[C$i[0][C$n]]=C$t[C$n];break}this._supportsFullScreen=void 0!==this._fn.requestFullscreen,this._touchEvent="ontouchend"in window?"touchend":"mousedown"},fullScreen:function(){return!!this._supportsFullScreen&&!!(document[this._fn.fullscreenElement]||document[this._fn.webkitFullscreenElement]||document[this._fn.mozFullScreenElement])},requestFullScreen:function(C$t,C$e,C$i){if(C$t&&"video"===C$t.tagName.toLowerCase()){if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&0<C$t.readyState)return void(C$t.webkitEnterFullscreen&&C$t.webkitEnterFullscreen());C$t.setAttribute("x5-video-player-fullscreen","true")}var C$n;this._supportsFullScreen&&(C$t=C$t||document.documentElement,C$e&&(C$n=this._fn.fullscreenchange,this._onfullscreenchange&&document.removeEventListener(C$n,this._onfullscreenchange),this._onfullscreenchange=C$e,document.addEventListener(C$n,C$e,!1)),C$i&&(C$n=this._fn.fullscreenerror,this._onfullscreenerror&&document.removeEventListener(C$n,this._onfullscreenerror),this._onfullscreenerror=C$i,document.addEventListener(C$n,C$i,{once:!0})),C$t[this._fn.requestFullscreen]())},exitFullScreen:function(C$t){if(C$t&&"video"===C$t.tagName.toLowerCase()){if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser)return void(C$t.webkitExitFullscreen&&C$t.webkitExitFullscreen());C$t.setAttribute("x5-video-player-fullscreen","false")}return!this._supportsFullScreen||document[this._fn.exitFullscreen]()},autoFullScreen:function(C$t,C$e){C$t=C$t||document.body,this._ensureFullScreen(C$t,C$e),this.requestFullScreen(C$t,C$e)},disableAutoFullScreen:function(C$t){var C$t=cc.game.canvas||C$t,C$e=this._touchEvent;this._preOnTouch&&(C$t.removeEventListener(C$e,this._preOnTouch),this._preOnTouch=null)},_ensureFullScreen:function(C$t,C$e){var C$i,C$n=this,C$r=cc.game.canvas||C$t,C$s=this._fn.fullscreenerror;function C$o(){C$n._preOnFullScreenError=null,C$n._preOnTouch&&C$r.removeEventListener(C$i,C$n._preOnTouch),C$n._preOnTouch=function(){C$n._preOnTouch=null,C$n.requestFullScreen(C$t,C$e)},C$r.addEventListener(C$i,C$n._preOnTouch,{once:!0})}void 0!==document[C$s]&&(C$i=this._touchEvent,this._preOnFullScreenError&&C$t.removeEventListener(C$s,this._preOnFullScreenError),this._preOnFullScreenError=C$o,C$t.addEventListener(C$s,C$o,{once:!0}))}},cc.screen.init()},{}],198:[function(C$t,C$e,C$i){"use strict";window._CCSettings&&_CCSettings.platform;var C$d="undefined"==typeof window?global:window;var C$n=cc&&cc.sys?cc.sys:function(){cc.sys={};var C$e=cc.sys;if(C$e.LANGUAGE_ENGLISH="en",C$e.LANGUAGE_CHINESE="zh",C$e.LANGUAGE_FRENCH="fr",C$e.LANGUAGE_ITALIAN="it",C$e.LANGUAGE_GERMAN="de",C$e.LANGUAGE_SPANISH="es",C$e.LANGUAGE_DUTCH="du",C$e.LANGUAGE_RUSSIAN="ru",C$e.LANGUAGE_KOREAN="ko",C$e.LANGUAGE_JAPANESE="ja",C$e.LANGUAGE_HUNGARIAN="hu",C$e.LANGUAGE_PORTUGUESE="pt",C$e.LANGUAGE_ARABIC="ar",C$e.LANGUAGE_NORWEGIAN="no",C$e.LANGUAGE_POLISH="pl",C$e.LANGUAGE_TURKISH="tr",C$e.LANGUAGE_UKRAINIAN="uk",C$e.LANGUAGE_ROMANIAN="ro",C$e.LANGUAGE_BULGARIAN="bg",C$e.LANGUAGE_UNKNOWN="unknown",C$e.OS_IOS="iOS",C$e.OS_ANDROID="Android",C$e.OS_WINDOWS="Windows",C$e.OS_MARMALADE="Marmalade",C$e.OS_LINUX="Linux",C$e.OS_BADA="Bada",C$e.OS_BLACKBERRY="Blackberry",C$e.OS_OSX="OS X",C$e.OS_WP8="WP8",C$e.OS_WINRT="WINRT",C$e.OS_UNKNOWN="Unknown",C$e.UNKNOWN=-1,C$e.WIN32=0,C$e.LINUX=1,C$e.MACOS=2,C$e.ANDROID=3,C$e.IPHONE=4,C$e.IPAD=5,C$e.BLACKBERRY=6,C$e.NACL=7,C$e.EMSCRIPTEN=8,C$e.TIZEN=9,C$e.WINRT=10,C$e.WP8=11,C$e.MOBILE_BROWSER=100,C$e.DESKTOP_BROWSER=101,C$e.EDITOR_PAGE=102,C$e.EDITOR_CORE=103,C$e.WECHAT_GAME=104,C$e.QQ_PLAY=105,C$e.FB_PLAYABLE_ADS=106,C$e.BAIDU_GAME=107,C$e.VIVO_GAME=108,C$e.OPPO_GAME=109,C$e.HUAWEI_GAME=110,C$e.XIAOMI_GAME=111,C$e.JKW_GAME=112,C$e.ALIPAY_GAME=113,C$e.WECHAT_GAME_SUB=114,C$e.BAIDU_GAME_SUB=115,C$e.QTT_GAME=116,C$e.BROWSER_TYPE_WECHAT="wechat",C$e.BROWSER_TYPE_WECHAT_GAME="wechatgame",C$e.BROWSER_TYPE_WECHAT_GAME_SUB="wechatgamesub",C$e.BROWSER_TYPE_BAIDU_GAME="baidugame",C$e.BROWSER_TYPE_BAIDU_GAME_SUB="baidugamesub",C$e.BROWSER_TYPE_XIAOMI_GAME="xiaomigame",C$e.BROWSER_TYPE_ALIPAY_GAME="alipaygame",C$e.BROWSER_TYPE_QQ_PLAY="qqplay",C$e.BROWSER_TYPE_ANDROID="androidbrowser",C$e.BROWSER_TYPE_IE="ie",C$e.BROWSER_TYPE_EDGE="edge",C$e.BROWSER_TYPE_QQ="qqbrowser",C$e.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",C$e.BROWSER_TYPE_UC="ucbrowser",C$e.BROWSER_TYPE_UCBS="ucbs",C$e.BROWSER_TYPE_360="360browser",C$e.BROWSER_TYPE_BAIDU_APP="baiduboxapp",C$e.BROWSER_TYPE_BAIDU="baidubrowser",C$e.BROWSER_TYPE_MAXTHON="maxthon",C$e.BROWSER_TYPE_OPERA="opera",C$e.BROWSER_TYPE_OUPENG="oupeng",C$e.BROWSER_TYPE_MIUI="miuibrowser",C$e.BROWSER_TYPE_FIREFOX="firefox",C$e.BROWSER_TYPE_SAFARI="safari",C$e.BROWSER_TYPE_CHROME="chrome",C$e.BROWSER_TYPE_LIEBAO="liebao",C$e.BROWSER_TYPE_QZONE="qzone",C$e.BROWSER_TYPE_SOUGOU="sogou",C$e.BROWSER_TYPE_UNKNOWN="unknown",C$e.isNative=!1,C$e.isBrowser="object"==typeof window&&"object"==typeof document&&!0,C$e.glExtension=function(C$t){return!!cc.renderer.device.ext(C$t)},C$e.getMaxJointMatrixSize=function(){var C$t;return C$e._maxJointMatrixSize||(C$t=cc.game._renderContext,C$t=Math.floor(C$t.getParameter(C$t.MAX_VERTEX_UNIFORM_VECTORS)/4)-10,C$e._maxJointMatrixSize=C$t<50?0:50),C$e._maxJointMatrixSize},C$d.__globalAdapter&&C$d.__globalAdapter.adaptSys)C$d.__globalAdapter.adaptSys(C$e);else{var C$t=window,C$i=C$t.navigator,C$h=document,C$u=C$h.documentElement,C$n=C$i.userAgent.toLowerCase();C$e.isMobile=/mobile|android|iphone|ipad/.test(C$n),"undefined"!=typeof FbPlayableAd?C$e.platform=C$e.FB_PLAYABLE_ADS:C$e.platform=C$e.isMobile?C$e.MOBILE_BROWSER:C$e.DESKTOP_BROWSER;var C$r=(C$r=C$i.language)||C$i.browserLanguage,C$r=(C$e.languageCode=C$r.toLowerCase(),C$r=C$r?C$r.split("-")[0]:C$e.LANGUAGE_ENGLISH,C$e.language=C$r,!1),C$s=!1,C$o="",C$a=0,C$c=/android (\d+(?:\.\d+)*)/i.exec(C$n)||/android (\d+(?:\.\d+)*)/i.exec(C$i.platform),C$c=(C$c&&(C$r=!0,C$o=C$c[1]||"",C$a=parseInt(C$o)||0),(C$c=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(C$n))?(C$s=!0,C$o=C$c[2]||"",C$a=parseInt(C$o)||0):(/(iPhone|iPad|iPod)/.exec(C$i.platform)||"MacIntel"===C$i.platform&&C$i.maxTouchPoints&&1<C$i.maxTouchPoints)&&(C$s=!0,C$o="",C$a=0),C$e.OS_UNKNOWN),C$a=(-1!==C$i.appVersion.indexOf("Win")?C$c=C$e.OS_WINDOWS:C$s?C$c=C$e.OS_IOS:-1!==C$i.appVersion.indexOf("Mac")?C$c=C$e.OS_OSX:-1!==C$i.appVersion.indexOf("X11")&&-1===C$i.appVersion.indexOf("Linux")?C$c=C$e.OS_UNIX:C$r?C$c=C$e.OS_ANDROID:-1===C$i.appVersion.indexOf("Linux")&&-1===C$n.indexOf("ubuntu")||(C$c=C$e.OS_LINUX),C$e.os=C$c,C$e.osVersion=C$o,C$e.osMainVersion=C$a,C$e.browserType=C$e.BROWSER_TYPE_UNKNOWN,("safari"===(C$s=(C$s=/mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|ucbs|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|miuibrowser/i.exec(C$n)||/qq|ucbrowser|ubrowser|edge/i.exec(C$n)||/chrome|safari|firefox|trident|opera|opr\/|oupeng/i.exec(C$n))?C$s[0].toLowerCase():C$e.BROWSER_TYPE_UNKNOWN)&&C$r||"qq"===C$s&&C$n.match(/android.*applewebkit/i))&&(C$s=C$e.BROWSER_TYPE_ANDROID),C$c={micromessenger:C$e.BROWSER_TYPE_WECHAT,trident:C$e.BROWSER_TYPE_IE,edge:C$e.BROWSER_TYPE_EDGE,"360 aphone":C$e.BROWSER_TYPE_360,mxbrowser:C$e.BROWSER_TYPE_MAXTHON,"opr/":C$e.BROWSER_TYPE_OPERA,ubrowser:C$e.BROWSER_TYPE_UC},C$e.browserType=C$c[C$s]||C$s,C$e.browserVersion="",C$o=(C$o=C$n.match(/(mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|uc|ucbs|360 aphone|360|baiduboxapp|baidu|maxthon|mxbrowser|miui(?:.hybrid)?)(mobile)?(browser)?\/?([\d.]+)/i))||C$n.match(/(qq|chrome|safari|firefox|trident|opera|opr\/|oupeng)(mobile)?(browser)?\/?([\d.]+)/i),C$e.browserVersion=C$o?C$o[4]:"",window.innerWidth||document.documentElement.clientWidth),C$r=window.innerHeight||document.documentElement.clientHeight,C$c=window.devicePixelRatio||1,C$s=(C$e.windowPixelResolution={width:C$c*C$a,height:C$c*C$r},C$e._checkWebGLRenderMode=function(){if(cc.game.renderType!==cc.game.RENDER_TYPE_WEBGL)throw new Error("This feature supports WebGL render mode only.")},document.createElement("canvas"));try{var C$_=C$e.localStorage=C$t.localStorage;C$_.setItem("storage",""),C$_.removeItem("storage"),C$_=null}catch(C$t){C$n=function(){cc.warnID(5200)};C$e.localStorage={getItem:C$n,setItem:C$n,removeItem:C$n,clear:C$n}}var C$l,C$o=C$s.toDataURL("image/webp").startsWith("data:image/webp"),C$a=!!C$s.getContext("2d"),C$c=!1,C$r=(C$t.WebGLRenderingContext&&(C$c=!0),C$e.capabilities={canvas:C$a,opengl:C$c,webp:C$o});void 0===C$u.ontouchstart&&void 0===C$h.ontouchstart&&!C$i.msPointerEnabled||(C$r.touches=!0),void 0!==C$u.onmouseup&&(C$r.mouse=!0),void 0!==C$u.onkeyup&&(C$r.keyboard=!0),(C$t.DeviceMotionEvent||C$t.DeviceOrientationEvent)&&(C$r.accelerometer=!0),C$e.browserVersion,C$_=!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),C$l={ONLY_ONE:!1,WEB_AUDIO:C$_,DELAY_CREATE_CTX:!1},C$e.os===C$e.OS_IOS&&(C$l.USE_LOADER_EVENT="loadedmetadata"),C$e.browserType===C$e.BROWSER_TYPE_FIREFOX&&(C$l.DELAY_CREATE_CTX=!0,C$l.USE_LOADER_EVENT="canplay"),C$e.os===C$e.OS_ANDROID&&C$e.browserType===C$e.BROWSER_TYPE_UC&&(C$l.ONE_SOURCE=!0);try{C$l.WEB_AUDIO&&(C$l.context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),C$l.DELAY_CREATE_CTX&&setTimeout(function(){C$l.context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)},0))}catch(C$t){C$l.WEB_AUDIO=!1,cc.logID(5201)}C$n=[];(C$s=document.createElement("audio")).canPlayType&&(C$s.canPlayType('audio/ogg; codecs="vorbis"')&&C$n.push(".ogg"),C$s.canPlayType("audio/mpeg")&&C$n.push(".mp3"),C$s.canPlayType('audio/wav; codecs="1"')&&C$n.push(".wav"),C$s.canPlayType("audio/mp4")&&C$n.push(".mp4"),C$s.canPlayType("audio/x-m4a")&&C$n.push(".m4a")),C$l.format=C$n,C$e.__audioSupport=C$l}return C$e.NetworkType={NONE:0,LAN:1,WWAN:2},C$e.getNetworkType=function(){return C$e.NetworkType.LAN},C$e.getBatteryLevel=function(){return 1},C$e.garbageCollect=function(){},C$e.restartVM=function(){},C$e.getSafeAreaRect=function(){var C$t=cc.view.getVisibleSize();return cc.rect(0,0,C$t.width,C$t.height)},C$e.isObjectValid=function(C$t){return!!C$t},C$e.dump=function(){var C$t="",C$t=(C$t=(C$t=(C$t=(C$t=(C$t=(C$t=(C$t=(C$t+="isMobile : "+this.isMobile+"\r\n")+("language : "+this.language+"\r\n"))+("browserType : "+this.browserType+"\r\n"))+("browserVersion : "+this.browserVersion+"\r\n"))+("capabilities : "+JSON.stringify(this.capabilities)+"\r\n"))+("os : "+this.os+"\r\n"))+("osVersion : "+this.osVersion+"\r\n"))+("platform : "+this.platform+"\r\n"))+("Using "+(cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n");cc.log(C$t)},C$e.openURL=function(C$t){window.open(C$t)},C$e.now=function(){return Date.now?Date.now():+new Date},C$e}();C$e.exports=C$n},{}],199:[function(C$t,C$e,C$h){"use strict";var C$i=C$t("../event/event-target"),C$u=C$t("../platform/js"),C$_=C$t("../renderer"),C$r=(C$t("../platform/CCClass"),{init:function(){this.html=document.getElementsByTagName("html")[0]},availWidth:function(C$t){return C$t&&C$t!==this.html?C$t.clientWidth:window.innerWidth},availHeight:function(C$t){return C$t&&C$t!==this.html?C$t.clientHeight:window.innerHeight},meta:{width:"device-width"},adaptationType:cc.sys.browserType});switch(cc.sys.os===cc.sys.OS_IOS&&(C$r.adaptationType=cc.sys.BROWSER_TYPE_SAFARI),C$r.adaptationType){case cc.sys.BROWSER_TYPE_SAFARI:C$r.meta["minimal-ui"]="true",C$r.availWidth=cc.sys.isMobile?function(C$t){return window.innerWidth}:function(C$t){return C$t.clientWidth},C$r.availHeight=cc.sys.isMobile?function(C$t){return window.innerHeight}:function(C$t){return C$t.clientHeight};break;case cc.sys.BROWSER_TYPE_SOUGOU:case cc.sys.BROWSER_TYPE_UC:C$r.meta["minimal-ui"]="true",C$r.availWidth=function(C$t){return C$t.clientWidth},C$r.availHeight=function(C$t){return C$t.clientHeight}}function C$n(){C$i.call(this);var C$t=cc.ContainerStrategy,C$e=cc.ContentStrategy;C$r.init(this),this._frameSize=cc.size(0,0),this._designResolutionSize=cc.size(0,0),this._originalDesignResolutionSize=cc.size(0,0),this._scaleX=1,this._scaleY=1,this._viewportRect=cc.rect(0,0,0,0),this._visibleRect=cc.rect(0,0,0,0),this._autoFullScreen=!1,this._devicePixelRatio=1,this._maxPixelRatio=2,this._retinaEnabled=!1,this._resizeCallback=null,this._resizing=!1,this._resizeWithBrowserSize=!1,this._orientationChanging=!0,this._isRotated=!1,this._orientation=cc.macro.ORIENTATION_AUTO,this._isAdjustViewport=!0,this._antiAliasEnabled=!1,this._resolutionPolicy=null,this._rpExactFit=new cc.ResolutionPolicy(C$t.EQUAL_TO_FRAME,C$e.EXACT_FIT),this._rpShowAll=new cc.ResolutionPolicy(C$t.EQUAL_TO_FRAME,C$e.SHOW_ALL),this._rpNoBorder=new cc.ResolutionPolicy(C$t.EQUAL_TO_FRAME,C$e.NO_BORDER),this._rpFixedHeight=new cc.ResolutionPolicy(C$t.EQUAL_TO_FRAME,C$e.FIXED_HEIGHT),this._rpFixedWidth=new cc.ResolutionPolicy(C$t.EQUAL_TO_FRAME,C$e.FIXED_WIDTH),cc.game.once(cc.game.EVENT_ENGINE_INITED,this.init,this)}var C$s,C$o,C$a,C$c,C$l=null;cc.js.extend(C$n,C$i),cc.js.mixin(C$n.prototype,{init:function(){this._initFrameSize();var C$t=cc.game.canvas.width,C$e=cc.game.canvas.height;this._designResolutionSize.width=C$t,this._designResolutionSize.height=C$e,this._originalDesignResolutionSize.width=C$t,this._originalDesignResolutionSize.height=C$e,this._viewportRect.width=C$t,this._viewportRect.height=C$e,this._visibleRect.width=C$t,this._visibleRect.height=C$e,cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,cc.visibleRect&&cc.visibleRect.init(this._visibleRect)},_resizeEvent:function(C$t){var C$e,C$i,C$n,C$r,C$s=this.setDesignResolutionSize?this:cc.view,C$o=cc.sys;C$o.browserType!==C$o.BROWSER_TYPE_UC||C$o.os!==C$o.OS_IOS?(C$o=C$s._frameSize.width,C$e=C$s._frameSize.height,C$i=C$s._isRotated,cc.sys.isMobile?(C$n=(C$r=cc.game.container.style).margin,C$r.margin="0",C$r.display="none",C$s._initFrameSize(),C$r.margin=C$n,C$r.display="block"):C$s._initFrameSize(),!0!==C$t&&C$s._isRotated===C$i&&C$s._frameSize.width===C$o&&C$s._frameSize.height===C$e||(C$n=C$s._originalDesignResolutionSize.width,C$r=C$s._originalDesignResolutionSize.height,C$s._resizing=!0,0<C$n&&C$s.setDesignResolutionSize(C$n,C$r,C$s._resolutionPolicy),C$s._resizing=!1,C$s.emit("canvas-resize"),C$s._resizeCallback&&C$s._resizeCallback.call())):setTimeout(function(){C$s._resizeEvent(C$t)},0)},_orientationChange:function(){cc.view._orientationChanging=!0,cc.view._resizeEvent(),cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI&&cc.sys.isMobile&&setTimeout(function(){window.innerHeight>window.innerWidth&&window.scrollTo(0,1)},500)},resizeWithBrowserSize:function(C$t){C$t?this._resizeWithBrowserSize||(this._resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent),window.addEventListener("orientationchange",this._orientationChange)):this._resizeWithBrowserSize&&(this._resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent),window.removeEventListener("orientationchange",this._orientationChange))},setResizeCallback:function(C$t){"function"!=typeof C$t&&null!=C$t||(this._resizeCallback=C$t)},setOrientation:function(C$t){var C$e;(C$t&=cc.macro.ORIENTATION_AUTO)&&this._orientation!==C$t&&(this._orientation=C$t,C$t=this._originalDesignResolutionSize.width,C$e=this._originalDesignResolutionSize.height,this.setDesignResolutionSize(C$t,C$e,this._resolutionPolicy))},_initFrameSize:function(){var C$t=this._frameSize,C$e=C$r.availWidth(cc.game.frame),C$i=C$r.availHeight(cc.game.frame),C$n=C$i<=C$e;!cc.sys.isMobile||C$n&&this._orientation&cc.macro.ORIENTATION_LANDSCAPE||!C$n&&this._orientation&cc.macro.ORIENTATION_PORTRAIT?(C$t.width=C$e,C$t.height=C$i,cc.game.container.style["-webkit-transform"]="rotate(0deg)",cc.game.container.style.transform="rotate(0deg)",this._isRotated=!1):(C$t.width=C$i,C$t.height=C$e,cc.game.container.style["-webkit-transform"]="rotate(90deg)",cc.game.container.style.transform="rotate(90deg)",cc.game.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.game.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0),this._orientationChanging&&setTimeout(function(){cc.view._orientationChanging=!1},1e3)},_setViewportMeta:function(C$t,C$e){var C$i,C$n,C$r=document.getElementById("cocosMetaElement"),C$s=(C$r&&C$e&&document.head.removeChild(C$r),document.getElementsByName("viewport")),C$s=C$s?C$s[0]:null,C$o=C$s?C$s.content:"";for(C$i in(C$r=C$r||document.createElement("meta")).id="cocosMetaElement",C$r.name="viewport",C$r.content="",C$t)-1==C$o.indexOf(C$i)?C$o+=","+C$i+"="+C$t[C$i]:C$e&&(C$n=new RegExp(C$i+"s*=s*[^,]+"),C$o.replace(C$n,C$i+"="+C$t[C$i]));/^,/.test(C$o)&&(C$o=C$o.substr(1)),C$r.content=C$o,C$s&&(C$s.content=C$o),document.head.appendChild(C$r)},_adjustViewportMeta:function(){this._isAdjustViewport&&(this._setViewportMeta(C$r.meta,!1),this._isAdjustViewport=!1)},adjustViewportMeta:function(C$t){this._isAdjustViewport=C$t},enableRetina:function(C$t){this._retinaEnabled=!!C$t},isRetinaEnabled:function(){return this._retinaEnabled},enableAntiAlias:function(C$t){if(cc.warnID(9200),this._antiAliasEnabled!==C$t)if(this._antiAliasEnabled=C$t,cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var C$e,C$i=cc.loader._cache;for(C$e in C$i){var C$n,C$r=C$i[C$e],C$r=C$r&&C$r.content instanceof cc.Texture2D?C$r.content:null;C$r&&(C$n=cc.Texture2D.Filter,C$t?C$r.setFilters(C$n.LINEAR,C$n.LINEAR):C$r.setFilters(C$n.NEAREST,C$n.NEAREST))}}else{var C$s;cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&((C$s=cc.game.canvas.getContext("2d")).imageSmoothingEnabled=C$t,C$s.mozImageSmoothingEnabled=C$t)}},isAntiAliasEnabled:function(){return this._antiAliasEnabled},enableAutoFullScreen:function(C$t){C$t&&C$t!==this._autoFullScreen&&cc.sys.isMobile?(this._autoFullScreen=!0,cc.screen.autoFullScreen(cc.game.frame)):(this._autoFullScreen=!1,cc.screen.disableAutoFullScreen(cc.game.frame))},isAutoFullScreenEnabled:function(){return this._autoFullScreen},setCanvasSize:function(C$t,C$e){var C$i=cc.game.canvas,C$n=cc.game.container;C$i.width=C$t*this._devicePixelRatio,C$i.height=C$e*this._devicePixelRatio,C$i.style.width=C$t+"px",C$i.style.height=C$e+"px",C$n.style.width=C$t+"px",C$n.style.height=C$e+"px",this._resizeEvent()},getCanvasSize:function(){return cc.size(cc.game.canvas.width,cc.game.canvas.height)},getFrameSize:function(){return cc.size(this._frameSize.width,this._frameSize.height)},setFrameSize:function(C$t,C$e){this._frameSize.width=C$t,this._frameSize.height=C$e,cc.game.frame.style.width=C$t+"px",cc.game.frame.style.height=C$e+"px",this._resizeEvent(!0)},getVisibleSize:function(){return cc.size(this._visibleRect.width,this._visibleRect.height)},getVisibleSizeInPixel:function(){return cc.size(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)},getVisibleOrigin:function(){return cc.v2(this._visibleRect.x,this._visibleRect.y)},getVisibleOriginInPixel:function(){return cc.v2(this._visibleRect.x*this._scaleX,this._visibleRect.y*this._scaleY)},getResolutionPolicy:function(){return this._resolutionPolicy},setResolutionPolicy:function(C$t){var C$e;C$t instanceof cc.ResolutionPolicy?this._resolutionPolicy=C$t:(C$t===(C$e=cc.ResolutionPolicy).EXACT_FIT&&(this._resolutionPolicy=this._rpExactFit),C$t===C$e.SHOW_ALL&&(this._resolutionPolicy=this._rpShowAll),C$t===C$e.NO_BORDER&&(this._resolutionPolicy=this._rpNoBorder),C$t===C$e.FIXED_HEIGHT&&(this._resolutionPolicy=this._rpFixedHeight),C$t===C$e.FIXED_WIDTH&&(this._resolutionPolicy=this._rpFixedWidth))},setDesignResolutionSize:function(C$t,C$e,C$i){var C$n;0<C$t||0<C$e?(this.setResolutionPolicy(C$i),(C$i=this._resolutionPolicy)&&C$i.preApply(this),cc.sys.isMobile&&this._adjustViewportMeta(),this._orientationChanging=!0,this._resizing||this._initFrameSize(),C$i?(this._originalDesignResolutionSize.width=this._designResolutionSize.width=C$t,this._originalDesignResolutionSize.height=this._designResolutionSize.height=C$e,(C$t=C$i.apply(this,this._designResolutionSize)).scale&&2===C$t.scale.length&&(this._scaleX=C$t.scale[0],this._scaleY=C$t.scale[1]),C$t.viewport&&(C$e=this._viewportRect,C$n=this._visibleRect,C$t=C$t.viewport,C$e.x=C$t.x,C$e.y=C$t.y,C$e.width=C$t.width,C$e.height=C$t.height,C$n.x=0,C$n.y=0,C$n.width=C$t.width/this._scaleX,C$n.height=C$t.height/this._scaleY),C$i.postApply(this),cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,cc.visibleRect&&cc.visibleRect.init(this._visibleRect),C$_.updateCameraViewport(),cc.internal.inputManager._updateCanvasBoundingRect(),this.emit("design-resolution-changed")):cc.logID(2201)):cc.logID(2200)},getDesignResolutionSize:function(){return cc.size(this._designResolutionSize.width,this._designResolutionSize.height)},setRealPixelResolution:function(C$t,C$e,C$i){this._setViewportMeta({width:C$t},!0),document.documentElement.style.width=C$t+"px",document.body.style.width=C$t+"px",document.body.style.left="0px",document.body.style.top="0px",this.setDesignResolutionSize(C$t,C$e,C$i)},setViewportInPoints:function(C$t,C$e,C$i,C$n){var C$r=this._scaleX,C$s=this._scaleY;cc.game._renderContext.viewport(C$t*C$r+this._viewportRect.x,C$e*C$s+this._viewportRect.y,C$i*C$r,C$n*C$s)},setScissorInPoints:function(C$t,C$e,C$i,C$n){var C$r=this._scaleX,C$s=this._scaleY,C$t=Math.ceil(C$t*C$r+this._viewportRect.x),C$e=Math.ceil(C$e*C$s+this._viewportRect.y),C$i=Math.ceil(C$i*C$r),C$r=Math.ceil(C$n*C$s),C$n=cc.game._renderContext;C$l||(C$s=C$n.getParameter(C$n.SCISSOR_BOX),C$l=cc.rect(C$s[0],C$s[1],C$s[2],C$s[3])),C$l.x===C$t&&C$l.y===C$e&&C$l.width===C$i&&C$l.height===C$r||(C$l.x=C$t,C$l.y=C$e,C$l.width=C$i,C$l.height=C$r,C$n.scissor(C$t,C$e,C$i,C$r))},isScissorEnabled:function(){return cc.game._renderContext.isEnabled(gl.SCISSOR_TEST)},getScissorRect:function(){C$l||(C$t=gl.getParameter(gl.SCISSOR_BOX),C$l=cc.rect(C$t[0],C$t[1],C$t[2],C$t[3]));var C$t=1/this._scaleX,C$e=1/this._scaleY;return cc.rect((C$l.x-this._viewportRect.x)*C$t,(C$l.y-this._viewportRect.y)*C$e,C$l.width*C$t,C$l.height*C$e)},getViewportRect:function(){return this._viewportRect},getScaleX:function(){return this._scaleX},getScaleY:function(){return this._scaleY},getDevicePixelRatio:function(){return this._devicePixelRatio},convertToLocationInView:function(C$t,C$e,C$i,C$n){var C$n=C$n||cc.v2(),C$r=C$i.adjustedLeft||C$i.left,C$s=C$i.adjustedTop||C$i.top,C$t=this._devicePixelRatio*(C$t-C$r),C$r=this._devicePixelRatio*(C$s+C$i.height-C$e);return this._isRotated?(C$n.x=cc.game.canvas.width-C$r,C$n.y=C$t):(C$n.x=C$t,C$n.y=C$r),C$n},_convertMouseToLocationInView:function(C$t,C$e){var C$i=this._viewportRect;C$t.x=(this._devicePixelRatio*(C$t.x-C$e.left)-C$i.x)/this._scaleX,C$t.y=(this._devicePixelRatio*(C$e.top+C$e.height-C$t.y)-C$i.y)/this._scaleY},_convertPointWithScale:function(C$t){var C$e=this._viewportRect;C$t.x=(C$t.x-C$e.x)/this._scaleX,C$t.y=(C$t.y-C$e.y)/this._scaleY},_convertTouchesWithScale:function(C$t){for(var C$e,C$i,C$n=this._viewportRect,C$r=this._scaleX,C$s=this._scaleY,C$o=0;C$o<C$t.length;C$o++)C$e=(C$i=C$t[C$o])._point,C$i=C$i._prevPoint,C$e.x=(C$e.x-C$n.x)/C$r,C$e.y=(C$e.y-C$n.y)/C$s,C$i.x=(C$i.x-C$n.x)/C$r,C$i.y=(C$i.y-C$n.y)/C$s}}),cc.ContainerStrategy=cc.Class({name:"ContainerStrategy",preApply:function(C$t){},apply:function(C$t,C$e){},postApply:function(C$t){},_setupContainer:function(C$t,C$e,C$i){var C$n=cc.game.canvas,C$r=(this._setupStyle(C$t,C$e,C$i),C$t._devicePixelRatio=1);C$t.isRetinaEnabled()&&(C$r=C$t._devicePixelRatio=Math.min(C$t._maxPixelRatio,window.devicePixelRatio||1)),C$n.width=C$e*C$r,C$n.height=C$i*C$r},_setupStyle:function(C$t,C$e,C$i){var C$n=cc.game.canvas,C$r=cc.game.container;cc.sys.os===cc.sys.OS_ANDROID&&(document.body.style.width=(C$t._isRotated?C$i:C$e)+"px",document.body.style.height=(C$t._isRotated?C$e:C$i)+"px"),C$r.style.width=C$n.style.width=C$e+"px",C$r.style.height=C$n.style.height=C$i+"px"},_fixContainer:function(){document.body.insertBefore(cc.game.container,document.body.firstChild);var C$t=document.body.style,C$t=(C$t.width=window.innerWidth+"px",C$t.height=window.innerHeight+"px",C$t.overflow="hidden",cc.game.container.style);C$t.position="fixed",C$t.left=C$t.top="0px",document.body.scrollTop=0}}),cc.ContentStrategy=cc.Class({name:"ContentStrategy",ctor:function(){this._result={scale:[1,1],viewport:null}},_buildResult:function(C$t,C$e,C$i,C$n,C$r,C$s){Math.abs(C$t-C$i)<2&&(C$i=C$t),Math.abs(C$e-C$n)<2&&(C$n=C$e);C$t=cc.rect((C$t-C$i)/2,(C$e-C$n)/2,C$i,C$n);return cc.game.renderType,cc.game.RENDER_TYPE_CANVAS,this._result.scale=[C$r,C$s],this._result.viewport=C$t,this._result},preApply:function(C$t){},apply:function(C$t,C$e){return{scale:[1,1]}},postApply:function(C$t){}}),C$t=cc.Class({name:"EqualToFrame",extends:cc.ContainerStrategy,apply:function(C$t){var C$e=C$t._frameSize.height,C$i=cc.game.container.style;this._setupContainer(C$t,C$t._frameSize.width,C$t._frameSize.height),C$t._isRotated?C$i.margin="0 0 0 "+C$e+"px":C$i.margin="0px",C$i.padding="0px"}}),C$s=cc.Class({name:"ProportionalToFrame",extends:cc.ContainerStrategy,apply:function(C$t,C$e){var C$i=C$t._frameSize.width,C$n=C$t._frameSize.height,C$r=cc.game.container.style,C$s=C$e.width,C$e=C$e.height,C$o=C$i/C$s,C$a=C$n/C$e,C$e=C$o<C$a?(C$c=C$i,C$e*C$o):(C$c=C$s*C$a,C$n),C$o=Math.round((C$i-C$c)/2),C$s=Math.round((C$n-C$e)/2),C$c=C$i-2*C$o;this._setupContainer(C$t,C$c,C$e=C$n-2*C$s),C$t._isRotated?C$r.margin="0 0 0 "+C$n+"px":C$r.margin="0px",C$r.paddingLeft=C$o+"px",C$r.paddingRight=C$o+"px",C$r.paddingTop=C$s+"px",C$r.paddingBottom=C$s+"px"}}),cc.Class({name:"EqualToWindow",extends:C$t,preApply:function(C$t){this._super(C$t),cc.game.frame=document.documentElement},apply:function(C$t){this._super(C$t),this._fixContainer()}}),cc.Class({name:"ProportionalToWindow",extends:C$s,preApply:function(C$t){this._super(C$t),cc.game.frame=document.documentElement},apply:function(C$t,C$e){this._super(C$t,C$e),this._fixContainer()}}),C$o=cc.Class({name:"OriginalContainer",extends:cc.ContainerStrategy,apply:function(C$t){this._setupContainer(C$t,cc.game.canvas.width,cc.game.canvas.height)}}),(C$a=("undefined"==typeof window?global:window).__globalAdapter)&&(C$a.adaptContainerStrategy&&C$a.adaptContainerStrategy(cc.ContainerStrategy.prototype),C$a.adaptView&&C$a.adaptView(C$n.prototype)),cc.ContainerStrategy.EQUAL_TO_FRAME=new C$t,cc.ContainerStrategy.PROPORTION_TO_FRAME=new C$s,cc.ContainerStrategy.ORIGINAL_CONTAINER=new C$o,C$a=cc.Class({name:"ExactFit",extends:cc.ContentStrategy,apply:function(C$t,C$e){var C$i=cc.game.canvas.width,C$n=cc.game.canvas.height,C$r=C$i/C$e.width,C$e=C$n/C$e.height;return this._buildResult(C$i,C$n,C$i,C$n,C$r,C$e)}}),C$t=cc.Class({name:"ShowAll",extends:cc.ContentStrategy,apply:function(C$t,C$e){var C$i,C$n=cc.game.canvas.width,C$r=cc.game.canvas.height,C$s=C$e.width,C$e=C$e.height,C$o=C$n/C$s,C$a=C$r/C$e,C$c=0,C$e=C$o<C$a?(C$i=C$n,C$e*(C$c=C$o)):(C$i=C$s*(C$c=C$a),C$r);return this._buildResult(C$n,C$r,C$i,C$e,C$c,C$c)}}),C$s=cc.Class({name:"NoBorder",extends:cc.ContentStrategy,apply:function(C$t,C$e){var C$i,C$n,C$r=cc.game.canvas.width,C$s=cc.game.canvas.height,C$o=C$e.width,C$e=C$e.height,C$a=C$r/C$o,C$c=C$s/C$e,C$o=C$a<C$c?(C$n=C$o*(C$i=C$c),C$s):(C$n=C$r,C$e*(C$i=C$a));return this._buildResult(C$r,C$s,C$n,C$o,C$i,C$i)}}),C$o=cc.Class({name:"FixedHeight",extends:cc.ContentStrategy,apply:function(C$t,C$e){var C$i=cc.game.canvas.width,C$n=cc.game.canvas.height,C$e=C$n/C$e.height;return this._buildResult(C$i,C$n,C$i,C$n,C$e,C$e)}}),C$c=cc.Class({name:"FixedWidth",extends:cc.ContentStrategy,apply:function(C$t,C$e){var C$i=cc.game.canvas.width,C$n=cc.game.canvas.height,C$e=C$i/C$e.width;return this._buildResult(C$i,C$n,C$i,C$n,C$e,C$e)}}),cc.ContentStrategy.EXACT_FIT=new C$a,cc.ContentStrategy.SHOW_ALL=new C$t,cc.ContentStrategy.NO_BORDER=new C$s,cc.ContentStrategy.FIXED_HEIGHT=new C$o,cc.ContentStrategy.FIXED_WIDTH=new C$c,cc.ResolutionPolicy=cc.Class({name:"cc.ResolutionPolicy",ctor:function(C$t,C$e){this._containerStrategy=null,this._contentStrategy=null,this.setContainerStrategy(C$t),this.setContentStrategy(C$e)},preApply:function(C$t){this._containerStrategy.preApply(C$t),this._contentStrategy.preApply(C$t)},apply:function(C$t,C$e){return this._containerStrategy.apply(C$t,C$e),this._contentStrategy.apply(C$t,C$e)},postApply:function(C$t){this._containerStrategy.postApply(C$t),this._contentStrategy.postApply(C$t)},setContainerStrategy:function(C$t){C$t instanceof cc.ContainerStrategy&&(this._containerStrategy=C$t)},setContentStrategy:function(C$t){C$t instanceof cc.ContentStrategy&&(this._contentStrategy=C$t)}}),C$u.get(cc.ResolutionPolicy.prototype,"canvasSize",function(){return cc.v2(cc.game.canvas.width,cc.game.canvas.height)}),cc.ResolutionPolicy.EXACT_FIT=0,cc.ResolutionPolicy.NO_BORDER=1,cc.ResolutionPolicy.SHOW_ALL=2,cc.ResolutionPolicy.FIXED_HEIGHT=3,cc.ResolutionPolicy.FIXED_WIDTH=4,cc.ResolutionPolicy.UNKNOWN=5,cc.view=new C$n,cc.winSize=cc.size(),C$e.exports=cc.view},{"../event/event-target":115,"../platform/CCClass":189,"../platform/js":209,"../renderer":220}],200:[function(C$t,C$e,C$i){"use strict";cc.visibleRect={topLeft:cc.v2(0,0),topRight:cc.v2(0,0),top:cc.v2(0,0),bottomLeft:cc.v2(0,0),bottomRight:cc.v2(0,0),bottom:cc.v2(0,0),center:cc.v2(0,0),left:cc.v2(0,0),right:cc.v2(0,0),width:0,height:0,init:function(C$t){var C$e=this.width=C$t.width,C$i=this.height=C$t.height,C$n=C$t.x,C$t=C$t.y,C$r=C$t+C$i,C$s=C$n+C$e;this.topLeft.x=C$n,this.topLeft.y=C$r,this.topRight.x=C$s,this.topRight.y=C$r,this.top.x=C$n+C$e/2,this.top.y=C$r,this.bottomLeft.x=C$n,this.bottomLeft.y=C$t,this.bottomRight.x=C$s,this.bottomRight.y=C$t,this.bottom.x=C$n+C$e/2,this.bottom.y=C$t,this.center.x=C$n+C$e/2,this.center.y=C$t+C$i/2,this.left.x=C$n,this.left.y=C$t+C$i/2,this.right.x=C$s,this.right.y=C$t+C$i/2}}},{}],201:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./js");C$t("./utils").isPlainEmptyObj_DEV;function C$s(C$t,C$e){C$e=C$e?Object.create(C$e):{};return C$n.value(C$t,"__attrs__",C$e),C$e}function C$r(C$t,C$e,C$i){var C$n,C$r=C$a(C$t),C$s=C$e+"$_$",C$o={};for(C$n in C$r)C$n.startsWith(C$s)&&(C$o[C$n.slice(C$s.length)]=C$r[C$n]);return C$o}function C$a(C$t){return C$t.hasOwnProperty("__attrs__")&&C$t.__attrs__||function(C$t){var C$e;if("function"!=typeof C$t)return C$s(C$t,C$a(C$t.constructor));for(var C$i=cc.Class.getInheritanceChain(C$t),C$n=C$i.length-1;0<=C$n;C$n--){var C$r=C$i[C$n];C$r.hasOwnProperty("__attrs__")&&C$r.__attrs__||C$s(C$r,(C$e=C$i[C$n+1])&&C$e.__attrs__)}return C$s(C$t,(C$e=C$i[0])&&C$e.__attrs__),C$t.__attrs__}(C$t)}function C$o(C$t,C$e){this.name=C$t,this.default=C$e}C$o.prototype.toString=function(){return this.name},cc.Integer=new C$o("Integer",0),cc.Float=new C$o("Float",0),cc.Boolean=new C$o("Boolean",!1),cc.String=new C$o("String",""),C$e.exports={PrimitiveType:C$o,attr:C$r,getClassAttrs:C$a,setClassAttr:function(C$t,C$e,C$i,C$n){C$a(C$t)[C$e+"$_$"+C$i]=C$n},DELIMETER:"$_$",getTypeChecker_ET:!1,getObjTypeChecker_ET:!1,ScriptUuid:{}}},{"./CCClass":189,"./js":209,"./utils":213}],202:[function(C$t,C$e,C$h){"use strict";var C$i=C$t("./js"),C$a=C$i.array.fastRemoveAt;function C$n(){}function C$r(){this.callback=C$n,this.target=void 0,this.once=!1}C$r.prototype.set=function(C$t,C$e,C$i){this.callback=C$t,this.target=C$e,this.once=!!C$i};var C$c=new C$i.Pool(function(C$t){return C$t.callback=C$n,C$t.target=void 0,!(C$t.once=!1)},32);function C$s(){this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}C$c.get=function(){return this._get()||new C$r};var C$t=C$s.prototype,C$l=(C$t.removeByCallback=function(C$t){for(var C$e=0;C$e<this.callbackInfos.length;++C$e){var C$i=this.callbackInfos[C$e];C$i&&C$i.callback===C$t&&(C$c.put(C$i),C$a(this.callbackInfos,C$e),--C$e)}},C$t.removeByTarget=function(C$t){for(var C$e=0;C$e<this.callbackInfos.length;++C$e){var C$i=this.callbackInfos[C$e];C$i&&C$i.target===C$t&&(C$c.put(C$i),C$a(this.callbackInfos,C$e),--C$e)}},C$t.cancel=function(C$t){var C$e=this.callbackInfos[C$t];C$e&&(C$c.put(C$e),this.callbackInfos[C$t]=null),this.containCanceled=!0},C$t.cancelAll=function(){for(var C$t=0;C$t<this.callbackInfos.length;C$t++){var C$e=this.callbackInfos[C$t];C$e&&(C$c.put(C$e),this.callbackInfos[C$t]=null)}this.containCanceled=!0},C$t.purgeCanceled=function(){for(var C$t=this.callbackInfos.length-1;0<=C$t;--C$t)this.callbackInfos[C$t]||C$a(this.callbackInfos,C$t);this.containCanceled=!1},C$t.clear=function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1},new C$i.Pool(function(C$t){return C$t.callbackInfos=[],C$t.isInvoking=!1,!(C$t.containCanceled=!1)},16));function C$o(){this._callbackTable=C$i.createMap(!0)}C$l.get=function(){return this._get()||new C$s},(C$t=C$o.prototype).on=function(C$t,C$e,C$i,C$n){var C$r=(C$r=this._callbackTable[C$t])||(this._callbackTable[C$t]=C$l.get()),C$t=C$c.get();C$t.set(C$e,C$i,C$n),C$r.callbackInfos.push(C$t)},C$t.hasEventListener=function(C$t,C$e,C$i){C$t=this._callbackTable[C$t];if(!C$t)return!1;var C$n=C$t.callbackInfos;if(!C$e){if(C$t.isInvoking){for(var C$r=0;C$r<C$n.length;++C$r)if(C$n[C$r])return!0;return!1}return 0<C$n.length}for(var C$s=0;C$s<C$n.length;++C$s){var C$o=C$n[C$s];if(C$o&&C$o.callback===C$e&&C$o.target===C$i)return!0}return!1},C$t.removeAll=function(C$t){if("string"==typeof C$t){var C$e=this._callbackTable[C$t];C$e&&(C$e.isInvoking?C$e.cancelAll():(C$e.clear(),C$l.put(C$e),delete this._callbackTable[C$t]))}else if(C$t)for(var C$i in this._callbackTable){var C$n=this._callbackTable[C$i];if(C$n.isInvoking)for(var C$r=C$n.callbackInfos,C$s=0;C$s<C$r.length;++C$s){var C$o=C$r[C$s];C$o&&C$o.target===C$t&&C$n.cancel(C$s)}else C$n.removeByTarget(C$t)}},C$t.off=function(C$t,C$e,C$i){var C$n=this._callbackTable[C$t];if(C$n)for(var C$r=C$n.callbackInfos,C$s=0;C$s<C$r.length;++C$s){var C$o=C$r[C$s];if(C$o&&C$o.callback===C$e&&C$o.target===C$i){C$n.isInvoking?C$n.cancel(C$s):(C$a(C$r,C$s),C$c.put(C$o));break}}},C$t.emit=function(C$t,C$e,C$i,C$n,C$r,C$h){var C$s=this._callbackTable[C$t];if(C$s){for(var C$u=!C$s.isInvoking,C$_=(C$s.isInvoking=!0,C$s.callbackInfos),C$o=0,C$d=C$_.length;C$o<C$d;++C$o){var C$a,C$c,C$l=C$_[C$o];C$l&&(C$a=C$l.target,C$c=C$l.callback,C$l.once&&this.off(C$t,C$c,C$a),C$a?C$c.call(C$a,C$e,C$i,C$n,C$r,C$h):C$c(C$e,C$i,C$n,C$r,C$h))}C$u&&(C$s.isInvoking=!1,C$s.containCanceled&&C$s.purgeCanceled())}},C$e.exports=C$o},{"./js":209}],203:[function(C$t,C$e,C$i){"use strict";C$e.exports={flattenCodeArray:function(C$t){var C$e=[];return function C$t(C$e,C$i){for(var C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n];Array.isArray(C$r)?C$t(C$e,C$r):C$e.push(C$r)}}(C$e,C$t),C$e.join("")}}},{}],204:[function(C$t,C$e,C$i){"use strict";function C$a(){this.uuidList=[],this.uuidObjList=[],this.uuidPropList=[],this._stillUseUrl=C$S.createMap(!0)}var C$f,C$S=C$t("./js"),C$T=C$t("./attribute"),C$w=C$t("./CCClass"),C$E=C$t("../utils/misc"),C$c=(C$a.prototype.reset=function(){this.uuidList.length=0,this.uuidObjList.length=0,this.uuidPropList.length=0,C$S.clear(this._stillUseUrl)},C$a.prototype.push=function(C$t,C$e,C$i,C$n){C$n&&(this._stillUseUrl[this.uuidList.length]=!0),this.uuidList.push(C$i),this.uuidObjList.push(C$t),this.uuidPropList.push(C$e)},(C$a.pool=new C$S.Pool(function(C$t){C$t.reset()},10)).get=function(){return this._get()||new C$a},(C$t=C$o.prototype).deserialize=function(C$t){if(Array.isArray(C$t)){var C$e=C$t,C$i=C$e.length;this.deserializedList.length=C$i;for(var C$n=0;C$n<C$i;C$n++)C$e[C$n]&&(this.deserializedList[C$n]=this._deserializeObject(C$e[C$n],!1));this.deserializedData=0<C$i?this.deserializedList[0]:[]}else this.deserializedList.length=1,this.deserializedData=C$t?this._deserializeObject(C$t,!1):null,this.deserializedList[0]=this.deserializedData;for(var C$r,C$s,C$t=this,C$o=C$t.deserializedList,C$a=C$t._idPropList,C$c=C$t._idList,C$h=C$t._idObjList,C$l=(C$t._classFinder&&C$t._classFinder.onDereferenced,0);C$l<C$c.length;C$l++)C$r=C$a[C$l],C$s=C$c[C$l],C$h[C$l][C$r]=C$o[C$s];return this.deserializedData},C$t._deserializeObject=function(C$t,C$h,C$u,C$e,C$_){var C$i,C$n=null,C$r=null,C$s=C$t.__type__;if("TypedArray"===C$s){for(var C$d=C$t.array,C$n=new window[C$t.ctor](C$d.length),C$o=0;C$o<C$d.length;++C$o)C$n[C$o]=C$d[C$o];return C$n}if(C$s){var C$a,C$r=this._classFinder(C$s,C$t,C$e,C$_);if(!C$r)return this._classFinder===C$S._getClassById&&cc.deserialize.reportMissingClass(C$s),null;if((C$n=new C$r)._deserialize)return C$n._deserialize(C$t.content,this),C$n;if(cc.Class._isCCClass(C$r)){C$e=this;C$_=C$n;C$s=C$t;var C$c=C$r;C$c.hasOwnProperty("__deserialize__")?C$a=C$c.__deserialize__:(C$a=C$f(C$e,C$c),C$S.value(C$c,"__deserialize__",C$a,!0));C$a(C$e,C$_,C$s,C$c,C$u)}else this._deserializeTypedObject(C$n,C$t,C$r)}else if(Array.isArray(C$t)){C$n=new Array(C$t.length);for(var C$l=0;C$l<C$t.length;C$l++)"object"==typeof(C$i=C$t[C$l])&&C$i?this._deserializeObjField(C$n,C$i,""+C$l,null,C$h):C$n[C$l]=C$i}else this._deserializePrimitiveObject(C$n={},C$t);return C$n},C$t._deserializeObjField=function(C$t,C$e,C$i,C$n,C$r){var C$s,C$o=C$e.__id__;void 0===C$o?(C$s=C$e.__uuid__)?this.result.push(C$t,C$i,C$s,C$r):C$t[C$i]=this._deserializeObject(C$e,C$r):(C$s=this.deserializedList[C$o])?C$t[C$i]=C$s:(this._idList.push(C$o),this._idObjList.push(C$t),this._idPropList.push(C$i))},C$t._deserializePrimitiveObject=function(C$t,C$e){var C$i,C$n;for(C$i in C$e)C$e.hasOwnProperty(C$i)&&("object"!=typeof(C$n=C$e[C$i])?"__type__"!==C$i&&(C$t[C$i]=C$n):C$n?this._deserializeObjField(C$t,C$n,C$i):C$t[C$i]=null)},C$t._deserializeTypedObject=function(C$t,C$e,C$i){if(C$i===cc.Vec2)return C$t.x=C$e.x||0,void(C$t.y=C$e.y||0);if(C$i===cc.Vec3)return C$t.x=C$e.x||0,C$t.y=C$e.y||0,void(C$t.z=C$e.z||0);var C$n;if(C$i===cc.Color)return C$t.r=C$e.r||0,C$t.g=C$e.g||0,C$t.b=C$e.b||0,C$n=C$e.a,void(C$t.a=void 0===C$n?255:C$n);if(C$i===cc.Size)return C$t.width=C$e.width||0,void(C$t.height=C$e.height||0);for(var C$r=C$T.DELIMETER+"default",C$s=C$T.getClassAttrs(C$i),C$o=C$i.__props__||Object.keys(C$t),C$a=0;C$a<C$o.length;C$a++){var C$c=C$o[C$a],C$l=C$e[C$c];"object"!=typeof(C$l=void 0!==C$l&&C$e.hasOwnProperty(C$c)?C$l:C$w.getDefault(C$s[C$c+C$r]))?C$t[C$c]=C$l:C$l?this._deserializeObjField(C$t,C$l,C$c):C$t[C$c]=null}},C$f=function(C$s,C$t){for(var C$m,C$u=C$E.BUILTIN_CLASSID_RE.test(C$S._getClassId(C$t)),C$y=cc.js.isChildClassOf(C$t,cc._BaseNode)||cc.js.isChildClassOf(C$t,cc.Component),C$_=[],C$d=C$_,C$f=[],C$p=C$f,C$g=[],C$v=[],C$o=C$t.__values__,C$e=(C$m="_$erialized"===C$o[C$o.length-1],C$T.getClassAttrs(C$t)),C$a=C$T.DELIMETER+"type",C$c=C$T.DELIMETER+"default",C$l=C$T.DELIMETER+"saveUrlAsAsset",C$h=C$T.DELIMETER+"formerlySerializedAs",C$x=0;C$x<C$o.length;C$x++){var C$i,C$n=C$o[C$x],C$r=C$n,C$b=(C$e[C$n+C$h]&&(C$r=C$e[C$n+C$h]),C$e[C$n+C$l]),C$A=C$w.getDefault(C$e[C$n+C$c]),C$C=!1;C$u&&(C$i=C$e[C$n+C$a],C$C=void 0===C$A&&C$i?C$i instanceof C$T.PrimitiveType:"string"==(C$i=typeof C$A)&&!C$b||"number"==C$i||"boolean"==C$i),C$u&&C$C?(C$r!==C$n&&C$d===C$_&&(C$d=C$_.slice()),C$_.push(C$n),C$d!==C$_&&C$d.push(C$r)):(C$r!==C$n&&C$p===C$f&&(C$p=C$f.slice()),C$f.push(C$n),C$p!==C$f&&C$p.push(C$r),C$g.push(C$b),C$v.push(C$A instanceof cc.ValueType&&C$A.constructor))}return function(C$t,C$e,C$i,C$l,C$h){for(var C$n=0;C$n<C$_.length;++C$n){var C$r=C$i[C$d[C$n]];void 0!==C$r&&(C$e[C$_[C$n]]=C$r)}for(var C$s=0;C$s<C$f.length;++C$s){var C$o,C$a=C$f[C$s],C$c=C$i[C$p[C$s]];void 0!==C$c&&(C$u||"object"==typeof C$c?(C$o=C$v[C$s])?C$u||C$c?C$t._deserializeTypedObject(C$e[C$a],C$c,C$o):C$e[C$a]=null:C$c?C$t._deserializeObjField(C$e,C$c,C$a,null,C$g[C$s]):C$e[C$a]=null:C$e[C$a]=C$c)}C$y&&C$i._id&&(C$e._id=C$i._id),C$m&&(C$e._$erialized=JSON.parse(JSON.stringify(C$i)),C$t._deserializePrimitiveObject(C$e._$erialized,C$i))}},(C$o.pool=new C$S.Pool(function(C$t){C$t.result=null,C$t.customEnv=null,C$t.deserializedList.length=0,C$t.deserializedData=null,C$t._classFinder=null,C$t._idList.length=0,C$t._idObjList.length=0,C$t._idPropList.length=0},1)).get=function(C$t,C$e,C$i,C$n,C$r){var C$s=this._get();return C$s?(C$s.result=C$t,C$s.customEnv=C$n,C$s._classFinder=C$i,C$s):new C$o(C$t,0,C$i,C$n)},C$o);function C$o(C$t,C$e,C$i,C$n,C$r){this.result=C$t,this.customEnv=C$n,this.deserializedList=[],this.deserializedData=null,this._classFinder=C$i,this._idList=[],this._idObjList=[],this._idPropList=[]}cc.deserialize=function(C$t,C$e,C$i){var C$n=(C$i=C$i||{}).classFinder||C$S._getClassById,C$r=C$i.createAssetRefs||cc.sys.platform===cc.sys.EDITOR_CORE,C$s=C$i.customEnv,C$i=C$i.ignoreEditorOnly,C$o=("string"==typeof C$t&&(C$t=JSON.parse(C$t)),!C$e),C$n=(C$e=C$e||C$a.pool.get(),C$c.pool.get(C$e,!1,C$n,C$s,C$i)),C$s=(cc.game._isCloning=!0,C$n.deserialize(C$t));return cc.game._isCloning=!1,C$c.pool.put(C$n),C$r&&C$e.assignAssetsBy(Editor.serialize.asAsset),C$o&&C$a.pool.put(C$e),C$s},cc.deserialize.Details=C$a,cc.deserialize.reportMissingClass=function(C$t){cc.warnID(5302,C$t)}},{"../utils/misc":264,"./CCClass":189,"./attribute":201,"./js":209}],205:[function(C$t,C$e,C$i){"use strict";function C$n(C$t){this.id=0|998*Math.random(),this.prefix=C$t?C$t+".":""}C$n.prototype.getNewId=function(){return this.prefix+ ++this.id},C$n.global=new C$n("global"),C$e.exports=C$n},{}],206:[function(C$t,C$e,C$i){"use strict";C$t("./js"),C$t("./CCClass"),C$t("./CCClassDecorator"),C$t("./CCEnum"),C$t("./CCObject"),C$t("./callbacks-invoker"),C$t("./url"),C$t("./deserialize"),C$t("./instantiate"),C$t("./instantiate-jit"),C$t("./requiring-frame"),C$t("./CCSys"),C$t("./CCMacro"),C$t("./CCAssetLibrary"),C$t("./CCVisibleRect")},{"./CCAssetLibrary":188,"./CCClass":189,"./CCClassDecorator":190,"./CCEnum":191,"./CCMacro":194,"./CCObject":195,"./CCSys":198,"./CCVisibleRect":200,"./callbacks-invoker":202,"./deserialize":204,"./instantiate":208,"./instantiate-jit":207,"./js":209,"./requiring-frame":211,"./url":212}],207:[function(C$t,C$e,C$i){"use strict";var C$o=C$t("./CCObject"),C$n=C$o.Flags.Destroyed,C$f=C$o.Flags.PersistentMask,C$h=C$t("./attribute"),C$s=C$t("./js"),C$u=C$t("./CCClass"),C$p=C$t("./compiler"),C$m=C$h.DELIMETER+"default",C$r=C$u.IDENTIFIER_RE,C$y=C$u.escapeForJS,C$g={"cc.Node":"cc.Node","cc.Sprite":"cc.Sprite","cc.Label":"cc.Label","cc.Button":"cc.Button","cc.Widget":"cc.Widget","cc.Animation":"cc.Animation","cc.ClickEvent":!1,"cc.PrefabInfo":!1};try{Float32Array.name||(Float32Array.name="Float32Array"),Float64Array.name||(Float64Array.name="Float64Array"),Int8Array.name||(Int8Array.name="Int8Array"),Int16Array.name||(Int16Array.name="Int16Array"),Int32Array.name||(Int32Array.name="Int32Array"),Uint8Array.name||(Uint8Array.name="Uint8Array"),Uint16Array.name||(Uint16Array.name="Uint16Array"),Uint32Array.name||(Uint32Array.name="Uint32Array")}catch(C$t){}function C$a(C$t,C$e){this.varName=C$t,this.expression=C$e}function C$c(C$t,C$e){return C$e instanceof C$a?new C$a(C$e.varName,C$t+C$e.expression):C$t+C$e}function C$l(C$t,C$e,C$i){Array.isArray(C$i)?(C$i[0]=C$c(C$e,C$i[0]),C$t.push(C$i)):C$t.push(C$c(C$e,C$i)+";")}function C$_(C$t){this._exps=[],this._targetExp=C$t}function C$v(C$t,C$e){if("function"==typeof C$t)try{C$t=C$t()}catch(C$t){return!1}if(C$t===C$e)return!0;if(C$t&&C$e){if(C$t instanceof cc.ValueType&&C$t.equals(C$e))return!0;if(Array.isArray(C$t)&&Array.isArray(C$e)||C$t.constructor===Object&&C$e.constructor===Object)try{return Array.isArray(C$t)&&Array.isArray(C$e)&&0===C$t.length&&0===C$e.length}catch(C$t){}}return!1}function C$d(C$t){return C$r.test(C$t)?"."+C$t:"["+C$y(C$t)+"]"}function C$x(C$t,C$e){this.parent=C$e,this.objsToClear_iN$t=[],this.codeArray=[],this.objs=[],this.funcs=[],this.funcModuleCache=C$s.createMap(),C$s.mixin(this.funcModuleCache,C$g),this.globalVariables=[],this.globalVariableId=0,this.localVariableId=0,this.codeArray.push("var o,t;","if(R){","o=R;","}else{","o=R=new "+this.getFuncModule(C$t.constructor,!0)+"();","}"),C$s.value(C$t,"_iN$t",{globalVar:"R"},!0),this.objsToClear_iN$t.push(C$t),this.enumerateObject(this.codeArray,C$t),0<this.globalVariables.length&&(C$i="var "+this.globalVariables.join(",")+";");var C$i,C$e=C$p.flattenCodeArray(["return (function(R){",C$i||[],this.codeArray,"return o;","})"]);this.result=Function("O","F",C$e)(this.objs,this.funcs);for(var C$n=0,C$r=this.objsToClear_iN$t.length;C$n<C$r;++C$n)this.objsToClear_iN$t[C$n]._iN$t=null;this.objsToClear_iN$t.length=0}C$a.prototype.toString=function(){return"var "+this.varName+"="+this.expression+";"},C$_.prototype.append=function(C$t,C$e){this._exps.push([C$t,C$e])},C$_.prototype.writeCode=function(C$t){var C$e;if(1<this._exps.length)C$t.push("t="+this._targetExp+";"),C$e="t";else{if(1!==this._exps.length)return;C$e=this._targetExp}for(var C$i=0;C$i<this._exps.length;C$i++){var C$n=this._exps[C$i];C$l(C$t,C$e+C$d(C$n[0])+"=",C$n[1])}},(C$_.pool=new C$s.Pool(function(C$t){C$t._exps.length=0,C$t._targetExp=null},1)).get=function(C$t){var C$e=this._get()||new C$_;return C$e._targetExp=C$t,C$e};C$t=C$x.prototype;C$t.getFuncModule=function(C$t,C$e){var C$i=C$s.getClassName(C$t);if(C$i){var C$n=this.funcModuleCache[C$i];if(C$n)return C$n;if(void 0===C$n)if(-1!==C$i.indexOf("."))try{if(C$t===Function("return "+C$i)())return this.funcModuleCache[C$i]=C$i}catch(C$t){}}C$n=this.funcs.indexOf(C$t),C$n<0&&(C$n=this.funcs.length,this.funcs.push(C$t)),C$t="F["+C$n+"]";return this.funcModuleCache[C$i]=C$t=C$e?"("+C$t+")":C$t},C$t.getObjRef=function(C$t){var C$e=this.objs.indexOf(C$t);return C$e<0&&(C$e=this.objs.length,this.objs.push(C$t)),"O["+C$e+"]"},C$t.setValueType=function(C$t,C$e,C$i,C$n){for(var C$r=C$_.pool.get(C$n),C$s=(C$s=C$e.constructor.__props__)||Object.keys(C$e),C$o=0;C$o<C$s.length;C$o++){var C$a=C$s[C$o],C$c=C$i[C$a];C$e[C$a]!==C$c&&(C$c=this.enumerateField(C$i,C$a,C$c),C$r.append(C$a,C$c))}C$r.writeCode(C$t),C$_.pool.put(C$r)},C$t.enumerateCCClass=function(C$t,C$e,C$i){for(var C$n=C$i.__values__,C$r=C$h.getClassAttrs(C$i),C$s=0;C$s<C$n.length;C$s++){var C$o,C$a=C$n[C$s],C$c=C$e[C$a],C$l=C$r[C$a+C$m];C$v(C$l,C$c)||("object"==typeof C$c&&C$c instanceof cc.ValueType&&(C$l=C$u.getDefault(C$l))&&C$l.constructor===C$c.constructor?(C$o="o"+C$d(C$a),this.setValueType(C$t,C$l,C$c,C$o)):this.setObjProp(C$t,C$e,C$a,C$c))}},C$t.instantiateArray=function(C$t){if(0===C$t.length)return"[]";var C$e="a"+ ++this.localVariableId,C$i=[new C$a(C$e,"new Array("+C$t.length+")")];C$s.value(C$t,"_iN$t",{globalVar:"",source:C$i},!0),this.objsToClear_iN$t.push(C$t);for(var C$n=0;C$n<C$t.length;++C$n)C$l(C$i,C$e+"["+C$n+"]=",this.enumerateField(C$t,C$n,C$t[C$n]));return C$i},C$t.instantiateTypedArray=function(C$t){var C$e=C$t.constructor.name||function(C$t){if(C$t===Float32Array)return"Float32Array";if(C$t===Float64Array)return"Float64Array";if(C$t===Int8Array)return"Int8Array";if(C$t===Int16Array)return"Int16Array";if(C$t===Int32Array)return"Int32Array";if(C$t===Uint8Array)return"Uint8Array";if(C$t===Uint16Array)return"Uint16Array";if(C$t===Uint32Array)return"Uint32Array";throw new Error("Unknown TypedArray could not be instantiated: "+C$t)}(C$t.constructor);if(0===C$t.length)return"new "+C$e;var C$i="a"+ ++this.localVariableId,C$n=[new C$a(C$i,"new "+C$e+"("+C$t.length+")")];C$t._iN$t={globalVar:"",source:C$n},this.objsToClear_iN$t.push(C$t);for(var C$r=0;C$r<C$t.length;++C$r)0!==C$t[C$r]&&C$l(C$n,C$i+"["+C$r+"]=",C$t[C$r]);return C$n},C$t.enumerateField=function(C$t,C$e,C$i){var C$n,C$r,C$s;return"object"==typeof C$i&&C$i?(C$n=C$i._iN$t)?((C$r=C$n.globalVar)||(C$r=C$n.globalVar="v"+ ++this.globalVariableId,this.globalVariables.push(C$r),C$s=C$n.source[0],C$n.source[0]=C$c(C$r+"=",C$s)),C$r):ArrayBuffer.isView(C$i)?this.instantiateTypedArray(C$i):Array.isArray(C$i)?this.instantiateArray(C$i):this.instantiateObj(C$i):"function"==typeof C$i?this.getFuncModule(C$i):"string"==typeof C$i?C$y(C$i):("_objFlags"===C$e&&C$t instanceof C$o&&(C$i&=C$f),C$i)},C$t.setObjProp=function(C$t,C$e,C$i,C$n){C$l(C$t,"o"+C$d(C$i)+"=",this.enumerateField(C$e,C$i,C$n))},C$t.enumerateObject=function(C$t,C$e){var C$i,C$n=C$e.constructor;if(cc.Class._isCCClass(C$n))this.enumerateCCClass(C$t,C$e,C$n);else for(var C$r in C$e)!C$e.hasOwnProperty(C$r)||95===C$r.charCodeAt(0)&&95===C$r.charCodeAt(1)&&"__type__"!==C$r||("object"==typeof(C$i=C$e[C$r])&&C$i&&C$i===C$e._iN$t||this.setObjProp(C$t,C$e,C$r,C$i))},C$t.instantiateObj=function(C$t){if(C$t instanceof cc.ValueType)return C$u.getNewValueTypeCode(C$t);if(C$t instanceof cc.Asset)return this.getObjRef(C$t);if(C$t._objFlags&C$n)return null;var C$e,C$i=C$t.constructor;if(cc.Class._isCCClass(C$i)){if(this.parent)if(this.parent instanceof cc.Component){if(C$t instanceof cc._BaseNode||C$t instanceof cc.Component)return this.getObjRef(C$t)}else if(this.parent instanceof cc._BaseNode)if(C$t instanceof cc._BaseNode){if(!C$t.isChildOf(this.parent))return this.getObjRef(C$t)}else if(C$t instanceof cc.Component&&!C$t.node.isChildOf(this.parent))return this.getObjRef(C$t);C$e=new C$a("o","new "+this.getFuncModule(C$i,!0)+"()")}else if(C$i===Object)C$e=new C$a("o","{}");else{if(C$i)return this.getObjRef(C$t);C$e=new C$a("o","Object.create(null)")}C$i=[C$e];return C$s.value(C$t,"_iN$t",{globalVar:"",source:C$i},!0),this.objsToClear_iN$t.push(C$t),this.enumerateObject(C$i,C$t),["(function(){",C$i,"return o;})();"]},C$e.exports={compile:function(C$t){return new C$x(C$t,C$t instanceof cc._BaseNode&&C$t).result},equalsToDefault:C$v}},{"./CCClass":189,"./CCObject":195,"./attribute":201,"./compiler":203,"./js":209}],208:[function(C$t,C$i,C$r){"use strict";var C$f=C$t("./CCObject"),C$p=C$t("../value-types/value-type"),C$h=C$f.Flags.Destroyed,C$v=C$f.Flags.PersistentMask,C$s=C$t("./utils").isDomNode,C$m=C$t("./js");function C$e(C$t,C$e){if(!C$e){if("object"!=typeof C$t||Array.isArray(C$t))return null;if(!C$t)return null;if(!cc.isValid(C$t))return null}var C$i;if(C$t instanceof C$f){if(C$t._instantiate)return cc.game._isCloning=!0,C$i=C$t._instantiate(),cc.game._isCloning=!1,C$i;if(C$t instanceof cc.Asset)return null}return cc.game._isCloning=!0,C$i=C$n(C$t),cc.game._isCloning=!1,C$i}var C$y=[];function C$n(C$t,C$e){if(Array.isArray(C$t))return null;if(C$s&&C$s(C$t))return null;var C$i;C$i=C$t._iN$t||(C$t.constructor?new C$t.constructor:Object.create(null)),C$l(C$t,C$i,C$e);for(var C$n=0,C$r=C$y.length;C$n<C$r;++C$n)C$y[C$n]._iN$t=null;return C$y.length=0,C$i}function C$l(C$t,C$e,C$i){C$m.value(C$t,"_iN$t",C$e,!0),C$y.push(C$t);var C$n,C$h=C$t.constructor;if(cc.Class._isCCClass(C$h)){var C$u=C$t;var C$r=C$e;var C$_=C$i;for(var C$d=C$h.__values__,C$s=0;C$s<C$d.length;C$s++){var C$o,C$a=C$d[C$s],C$c=C$u[C$a];"object"==typeof C$c&&C$c?(C$o=C$r[C$a])instanceof C$p&&C$o.constructor===C$c.constructor?C$o.set(C$c):C$r[C$a]=C$c._iN$t||C$g(C$c,C$_):C$r[C$a]=C$c}}else for(var C$l in C$t)!C$t.hasOwnProperty(C$l)||95===C$l.charCodeAt(0)&&95===C$l.charCodeAt(1)&&"__type__"!==C$l||("object"==typeof(C$n=C$t[C$l])&&C$n?C$n!==C$e&&(C$e[C$l]=C$n._iN$t||C$g(C$n,C$i)):C$e[C$l]=C$n);C$t instanceof C$f&&(C$e._objFlags&=C$v)}function C$g(C$t,C$e){if(C$t instanceof C$p)return C$t.clone();if(C$t instanceof cc.Asset)return C$t;if(ArrayBuffer.isView(C$t)){var C$i=C$t.length,C$n=new C$t.constructor(C$i);C$t._iN$t=C$n,C$y.push(C$t);for(var C$r=0;C$r<C$i;++C$r)C$n[C$r]=C$t[C$r];return C$n}if(Array.isArray(C$t)){var C$s=C$t.length;C$n=new Array(C$s),C$m.value(C$t,"_iN$t",C$n,!0),C$y.push(C$t);for(var C$o=0;C$o<C$s;++C$o){var C$a=C$t[C$o];C$n[C$o]="object"==typeof C$a&&C$a?C$a._iN$t||C$g(C$a,C$e):C$a}return C$n}if(C$t._objFlags&C$h)return null;var C$c=C$t.constructor;if(cc.Class._isCCClass(C$c)){if(C$e)if(C$e instanceof cc.Component){if(C$t instanceof cc._BaseNode||C$t instanceof cc.Component)return C$t}else if(C$e instanceof cc._BaseNode)if(C$t instanceof cc._BaseNode){if(!C$t.isChildOf(C$e))return C$t}else if(C$t instanceof cc.Component&&!C$t.node.isChildOf(C$e))return C$t;C$n=new C$c}else if(C$c===Object)C$n={};else{if(C$c)return C$t;C$n=Object.create(null)}return C$l(C$t,C$n,C$e),C$n}C$e._clone=C$n,cc.instantiate=C$e,C$i.exports=C$e},{"../value-types/value-type":287,"./CCObject":195,"./js":209,"./utils":213}],209:[function(C$t,C$i,C$u){"use strict";var C$_=new(C$t("./id-generater"))("TmpCId.");function C$n(C$t,C$e){for(;C$t;){var C$i=Object.getOwnPropertyDescriptor(C$t,C$e);if(C$i)return C$i;C$t=Object.getPrototypeOf(C$t)}return null}function C$d(C$t,C$e,C$i){C$e=C$n(C$e,C$t);Object.defineProperty(C$i,C$t,C$e)}var C$r,C$s,C$f,C$a={isNumber:function(C$t){return"number"==typeof C$t||C$t instanceof Number},isString:function(C$t){return"string"==typeof C$t||C$t instanceof String},addon:function(C$t){C$t=C$t||{};for(var C$e=1,C$i=arguments.length;C$e<C$i;C$e++){var C$n=arguments[C$e];if(C$n)if("object"==typeof C$n)for(var C$r in C$n)C$r in C$t||C$d(C$r,C$n,C$t);else cc.errorID(5402,C$n)}return C$t},mixin:function(C$t){C$t=C$t||{};for(var C$e=1,C$i=arguments.length;C$e<C$i;C$e++){var C$n=arguments[C$e];if(C$n)if("object"==typeof C$n)for(var C$r in C$n)C$d(C$r,C$n,C$t);else cc.errorID(5403,C$n)}return C$t},extend:function(C$t,C$e){for(var C$i in C$e)C$e.hasOwnProperty(C$i)&&(C$t[C$i]=C$e[C$i]);return C$t.prototype=Object.create(C$e.prototype,{constructor:{value:C$t,writable:!0,configurable:!0}}),C$t},getSuper:function(C$t){C$t=C$t.prototype,C$t=C$t&&Object.getPrototypeOf(C$t);return C$t&&C$t.constructor},isChildClassOf:function(C$t,C$e){if(C$t&&C$e){if("function"!=typeof C$t)return!1;if("function"!=typeof C$e)return!1;if(C$t===C$e)return!0;for(;;){if(!(C$t=C$a.getSuper(C$t)))return!1;if(C$t===C$e)return!0}}return!1},clear:function(C$t){for(var C$e=Object.keys(C$t),C$i=0;C$i<C$e.length;C$i++)delete C$t[C$e[C$i]]},isEmptyObject:function(C$t){for(var C$e in C$t)return!1;return!0},getPropertyDescriptor:C$n},C$o={value:void 0,enumerable:!1,writable:!1,configurable:!0},C$c={get:null,set:null,enumerable:!(C$a.value=function(C$t,C$e,C$i,C$n,C$r){C$o.value=C$i,C$o.writable=C$n,C$o.enumerable=C$r,Object.defineProperty(C$t,C$e,C$o),C$o.value=void 0})},C$l={get:null,enumerable:!(C$a.getset=function(C$t,C$e,C$i,C$n,C$r,C$s){"function"!=typeof C$n&&(C$r=C$n,C$n=void 0),C$c.get=C$i,C$c.set=C$n,C$c.enumerable=C$r,C$c.configurable=C$s,Object.defineProperty(C$t,C$e,C$c),C$c.get=null,C$c.set=null}),configurable:!1},C$h={set:null,enumerable:!(C$a.get=function(C$t,C$e,C$i,C$n,C$r){C$l.get=C$i,C$l.enumerable=C$n,C$l.configurable=C$r,Object.defineProperty(C$t,C$e,C$l),C$l.get=null}),configurable:!1};function C$p(C$n,C$t,C$r){return C$a.getset(C$a,C$t,function(){return Object.assign({},C$r)},function(C$t){C$a.clear(C$r),Object.assign(C$r,C$t)}),function(C$t,C$e){var C$i;C$e.prototype.hasOwnProperty(C$n)&&delete C$r[C$e.prototype[C$n]],C$a.value(C$e.prototype,C$n,C$t),C$t&&((C$i=C$r[C$t])&&C$i!==C$e?cc.error("A Class already exists with the same "+C$n+' : "'+C$t+'".'):C$r[C$t]=C$e)}}C$a.set=function(C$t,C$e,C$i,C$n,C$r){C$h.set=C$i,C$h.enumerable=C$n,C$h.configurable=C$r,Object.defineProperty(C$t,C$e,C$h),C$h.set=null},C$a.getClassName=function(C$t){if("function"!=typeof C$t)return C$t&&C$t.constructor?C$a.getClassName(C$t.constructor):"";var C$e=C$t.prototype;if(C$e&&C$e.hasOwnProperty("__classname__")&&C$e.__classname__)return C$e.__classname__;C$e="";return C$t.name&&(C$e=C$t.name),!C$t.toString||(C$t="["===(C$t=C$t.toString()).charAt(0)?C$t.match(/\[\w+\s*(\w+)\]/):C$t.match(/function\s*(\w+)/))&&2===C$t.length&&(C$e=C$t[1]),"Object"!==C$e?C$e:""},C$r={},C$s={},C$a._setClassId=C$p("__cid__","_registeredClassIds",C$r),C$f=C$p("__classname__","_registeredClassNames",C$s),C$a.setClassName=function(C$t,C$e){C$f(C$t,C$e),C$e.prototype.hasOwnProperty("__cid__")||(C$t=C$t||C$_.getNewId())&&C$a._setClassId(C$t,C$e)},C$a.unregisterClass=function(){for(var C$t=0;C$t<arguments.length;C$t++){var C$e=arguments[C$t].prototype,C$i=C$e.__cid__,C$i=(C$i&&delete C$r[C$i],C$e.__classname__);C$i&&delete C$s[C$i]}},C$a._getClassById=function(C$t){return C$r[C$t]},C$a.getClassByName=function(C$t){return C$s[C$t]},C$a._getClassId=function(C$t,C$e){if("function"==typeof C$t&&C$t.prototype.hasOwnProperty("__cid__"))return C$t.prototype.__cid__;if(C$t&&C$t.constructor){var C$i=C$t.constructor.prototype;if(C$i&&C$i.hasOwnProperty("__cid__"))return C$t.__cid__}return""},C$a.obsolete=function(C$t,C$e,C$i,C$n){var C$r=/([^.]+)$/,C$e=C$r.exec(C$e)[0],C$s=C$r.exec(C$i)[0];function C$o(){return this[C$s]}C$n?C$a.getset(C$t,C$e,C$o,function(C$t){this[C$s]=C$t}):C$a.get(C$t,C$e,C$o)},C$a.obsoletes=function(C$t,C$e,C$i,C$n){for(var C$r in C$i){var C$s=C$i[C$r];C$a.obsolete(C$t,C$e+"."+C$r,C$s,C$n)}};var C$m=/(%d)|(%s)/,C$y=/%s/;function C$g(C$t,C$e){C$t.splice(C$e,1)}function C$v(C$t,C$e){C$e=C$t.indexOf(C$e);return 0<=C$e&&(C$g(C$t,C$e),!0)}C$a.formatStr=function(){var C$t=arguments.length;if(0===C$t)return"";var C$e=arguments[0];if(1===C$t)return""+C$e;if("string"==typeof C$e&&C$m.test(C$e))for(var C$i=1;C$i<C$t;++C$i){var C$n=arguments[C$i],C$r="number"==typeof C$n?C$m:C$y;C$r.test(C$e)?C$e=C$e.replace(C$r,C$n):C$e+=" "+C$n}else for(var C$s=1;C$s<C$t;++C$s)C$e+=" "+arguments[C$s];return C$e},C$a.shiftArguments=function(){for(var C$t=arguments.length-1,C$e=new Array(C$t),C$i=0;C$i<C$t;++C$i)C$e[C$i]=arguments[C$i+1];return C$e},C$a.createMap=function(C$t){var C$e=Object.create(null);return C$t&&(C$e["."]=!0,C$e["/"]=!0,delete C$e["."],delete C$e["/"]),C$e};var C$x=Array.prototype.indexOf;function C$e(C$t,C$e){void 0===C$e&&(C$e=C$t,C$t=null),this.get=null,this.count=0,this._pool=new Array(C$e),this._cleanup=C$t}C$a.array={remove:C$v,fastRemove:function(C$t,C$e){0<=(C$e=C$t.indexOf(C$e))&&(C$t[C$e]=C$t[C$t.length-1],--C$t.length)},removeAt:C$g,fastRemoveAt:function(C$t,C$e){var C$i=C$t.length;C$e<0||C$i<=C$e||(C$t[C$e]=C$t[C$i-1],C$t.length=C$i-1)},contains:function(C$t,C$e){return 0<=C$t.indexOf(C$e)},verifyType:function(C$t,C$e){if(C$t&&0<C$t.length)for(var C$i=0;C$i<C$t.length;C$i++)if(!(C$t[C$i]instanceof C$e))return cc.logID(1300),!1;return!0},removeArray:function(C$t,C$e){for(var C$i=0,C$n=C$e.length;C$i<C$n;C$i++)C$v(C$t,C$e[C$i])},appendObjectsAt:function(C$t,C$e,C$i){return C$t.splice.apply(C$t,[C$i,0].concat(C$e)),C$t},copy:function(C$t){for(var C$e=C$t.length,C$i=new Array(C$e),C$n=0;C$n<C$e;C$n+=1)C$i[C$n]=C$t[C$n];return C$i},indexOf:C$x,MutableForwardIterator:C$t("../utils/mutable-forward-iterator")},C$e.prototype._get=function(){var C$t;return 0<this.count?(--this.count,C$t=this._pool[this.count],this._pool[this.count]=null,C$t):null},C$e.prototype.put=function(C$t){var C$e=this._pool;this.count<C$e.length&&(this._cleanup&&!1===this._cleanup(C$t)||(C$e[this.count]=C$t,++this.count))},C$e.prototype.resize=function(C$t){0<=C$t&&(this._pool.length=C$t,this.count>C$t&&(this.count=C$t))},C$a.Pool=C$e,cc.js=C$a,C$i.exports=C$a},{"../utils/mutable-forward-iterator":265,"./id-generater":205}],210:[function(C$t,C$e,C$a){"use strict";var C$s=C$t("./js"),C$o=C$t("./attribute"),C$c={url:{canUsedInGet:!0},default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function C$l(C$t,C$e,C$i,C$n){C$t=C$t?{_short:!0}:{_short:!0,default:C$e};return C$i&&(C$n?C$t.url=C$i:C$t.type=C$i),C$t}C$a.getFullFormOfProperty=function(C$t,C$e,C$i,C$n){var C$r;return C$t&&C$t.constructor===Object?null:Array.isArray(C$t)&&0<C$t.length?(C$t[0],C$l(C$e,[],C$t)):"function"==typeof C$t?(C$r=C$t,cc.RawAsset.isRawAssetType(C$r)||cc.RawAsset.wasRawAssetType(C$r)?C$l(C$e,"",C$r,!0):C$l(C$e,C$s.isChildClassOf(C$r,cc.ValueType)?new C$r:null,C$r)):C$t instanceof C$o.PrimitiveType?C$l(C$e,C$t.default):C$l(C$e,C$t)},C$a.preprocessAttrs=function(C$t,C$e,C$i,C$n){for(var C$r in C$t){var C$s=C$t[C$r],C$o=C$a.getFullFormOfProperty(C$s,!1,C$r,C$e);(C$s=C$o?C$t[C$r]=C$o:C$s)&&((C$o=C$s.notify)&&function(C$t,C$e,C$i,C$n){if(!C$t.get&&!C$t.set&&C$t.hasOwnProperty("default")){var C$r,C$s="_N$"+C$e,C$o=(C$t.get=function(){return this[C$s]},C$t.set=function(C$t){var C$e=this[C$s];this[C$s]=C$t,C$i.call(this,C$e)},{});for(C$r in C$n[C$s]=C$o,C$c){var C$a=C$c[C$r];C$t.hasOwnProperty(C$r)&&(C$o[C$r]=C$t[C$r],C$a.canUsedInGet||delete C$t[C$r])}}}(C$s,C$r,C$o,C$t),"type"in C$s&&function(C$t,C$e,C$i,C$n){if(Array.isArray(C$e)){if(!(0<C$e.length))return cc.errorID(5508,C$i,C$n);if(cc.RawAsset.isRawAssetType(C$e[0]))return C$t.url=C$e[0],delete C$t.type;C$t.type=C$e=C$e[0]}"function"==typeof C$e&&(C$e===String?C$t.type=cc.String:C$e===Boolean?C$t.type=cc.Boolean:C$e===Number&&(C$t.type=cc.Float))}(C$s,C$s.type,C$e,C$r),"url"in C$s&&(C$r=(C$o=C$s).url,Array.isArray(C$r)&&0<C$r.length&&(C$r=C$r[0]),C$o.type=C$r),"type"in C$s&&C$s.type)}},C$a.validateMethodWithProps=function(C$t,C$e,C$i,C$n,C$r){return"function"==typeof C$t||null===C$t}},{"./CCClass":189,"./attribute":201,"./js":209}],211:[function(C$t,C$e,C$i){"use strict";var C$r=[];cc._RF={push:function(C$t,C$e,C$i){void 0===C$i&&(C$i=C$e,C$e=""),C$r.push({uuid:C$e,script:C$i,module:C$t,exports:C$t.exports,beh:null})},pop:function(){var C$t=C$r.pop(),C$e=C$t.module,C$i=C$e.exports;if(C$i===C$t.exports){for(var C$n in C$i)return;C$e.exports=C$t.cls}},peek:function(){return C$r[C$r.length-1]}}},{}],212:[function(C$t,C$e,C$i){"use strict";cc.url={_rawAssets:"",normalize:function(C$t){return C$t&&(46===C$t.charCodeAt(0)&&47===C$t.charCodeAt(1)?C$t=C$t.slice(2):47===C$t.charCodeAt(0)&&(C$t=C$t.slice(1))),C$t},raw:function(C$t){if((C$t=this.normalize(C$t)).startsWith("resources/")){var C$e=cc.loader._getResUuid(C$t.slice(10),cc.Asset,null,!0);if(C$e)return cc.AssetLibrary.getLibUrlNoExt(C$e,!0)+cc.path.extname(C$t)}else cc.errorID(7002,C$t);return this._rawAssets+C$t},_init:function(C$t){this._rawAssets=cc.path.stripSep(C$t)+"/"}},C$e.exports=cc.url},{}],213:[function(C$t,C$e,C$i){"use strict";C$t("./js");C$e.exports={contains:function(C$t,C$e){if("function"==typeof C$t.contains)return C$t.contains(C$e);if("function"==typeof C$t.compareDocumentPosition)return!!(16&C$t.compareDocumentPosition(C$e));var C$i=C$e.parentNode;if(C$i)do{if(C$i===C$t)return!0}while(null!==(C$i=C$i.parentNode));return!1},isDomNode:"object"==typeof window&&("function"==typeof Node?function(C$t){return C$t instanceof Node}:function(C$t){return C$t&&"object"==typeof C$t&&"number"==typeof C$t.nodeType&&"string"==typeof C$t.nodeName}),callInNextTick:function(C$t,C$e,C$i){C$t&&setTimeout(function(){C$t(C$e,C$i)},0)}}},{"./js":209}],214:[function(C$t,C$e,C$i){"use strict";C$t("./platform/js"),C$t("./value-types"),C$t("./utils"),C$t("./platform/CCInputManager"),C$t("./platform/CCInputExtension"),C$t("./event"),C$t("./platform/CCSys"),C$t("./platform/CCMacro"),C$t("./load-pipeline"),C$t("./CCDirector"),C$t("./renderer"),C$t("./platform/CCView"),C$t("./platform/CCScreen"),C$t("./CCScheduler"),C$t("./event-manager")},{"./CCDirector":28,"./CCScheduler":33,"./event":117,"./event-manager":113,"./load-pipeline":144,"./platform/CCInputExtension":192,"./platform/CCInputManager":193,"./platform/CCMacro":194,"./platform/CCScreen":197,"./platform/CCSys":198,"./platform/CCView":199,"./platform/js":209,"./renderer":220,"./utils":262,"./value-types":279}],215:[function(C$t,C$h,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$i=C$r(C$t("./assembler")),C$n=C$r(C$t("./utils/dynamic-atlas/manager")),C$u=C$r(C$t("./webgl/render-data"));function C$r(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$s(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$_(C$n){return function(){var C$t,C$e,C$i=C$a(C$n);return C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$a(this).constructor,Reflect.construct(C$i,arguments,C$t)):C$i.apply(this,arguments),C$i=this,!(C$e=C$t)||"object"!=typeof C$e&&"function"!=typeof C$e?C$o(C$i):C$e}}function C$o(C$t){if(void 0===C$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$t}function C$a(C$t){return(C$a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$c=C$i.default,C$t=C$c,(C$i=C$l).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$_(C$l),(C$i=C$l.prototype).initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount)},C$i.initLocal=function(){this._local=[],this._local.length=4},C$i.updateColor=function(C$t,C$e){var C$i=this._renderData.uintVDatas[0];if(C$i){C$e=C$e||C$t.node.color._val;for(var C$n=this.floatsPerVert,C$r=this.colorOffset,C$s=C$i.length;C$r<C$s;C$r+=C$n)C$i[C$r]=C$e}},C$i.getBuffer=function(){return cc.renderer._handle._meshBuffer},C$i.updateWorldVerts=function(C$t){var C$h,C$u,C$_,C$e=this._local,C$i=this._renderData.vDatas[0],C$t=C$t.node._worldMatrix.m,C$n=C$t[0],C$r=C$t[1],C$d=C$t[4],C$s=C$t[5],C$o=C$t[12],C$t=C$t[13],C$a=C$e[0],C$c=C$e[2],C$l=C$e[1],C$e=C$e[3];1===C$n&&0===C$r&&0===C$d&&1===C$s?(C$i[0]=C$a+C$o,C$i[1]=C$l+C$t,C$i[5]=C$c+C$o,C$i[6]=C$l+C$t,C$i[10]=C$a+C$o,C$i[11]=C$e+C$t,C$i[15]=C$c+C$o,C$i[16]=C$e+C$t):(C$h=C$n*C$c,C$u=C$r*C$a,C$r=C$r*C$c,C$c=C$d*C$e,C$_=C$s*C$l,C$s=C$s*C$e,C$i[0]=(C$e=C$n*C$a)+(C$n=C$d*C$l)+C$o,C$i[1]=C$u+C$_+C$t,C$i[5]=C$h+C$n+C$o,C$i[6]=C$r+C$_+C$t,C$i[10]=C$e+C$c+C$o,C$i[11]=C$u+C$s+C$t,C$i[15]=C$h+C$c+C$o,C$i[16]=C$r+C$s+C$t)},C$i.fillBuffers=function(C$t,C$e){C$e.worldMatDirty&&this.updateWorldVerts(C$t);for(var C$t=this._renderData,C$i=C$t.vDatas[0],C$n=C$t.iDatas[0],C$t=this.getBuffer(C$e),C$e=C$t.request(this.verticesCount,this.indicesCount),C$r=C$e.byteOffset>>2,C$s=C$t._vData,C$o=(C$i.length+C$r>C$s.length?C$s.set(C$i.subarray(0,C$s.length-C$r),C$r):C$s.set(C$i,C$r),C$t._iData),C$a=C$e.indiceOffset,C$c=C$e.vertexOffset,C$l=0,C$h=C$n.length;C$l<C$h;C$l++)C$o[C$a++]=C$c+C$n[C$l]},C$i.packToDynamicAtlas=function(C$t,C$e){C$e._original||!C$n.default||!C$e._texture.packable||(C$i=C$n.default.insertSpriteFrame(C$e))&&C$e._setDynamicAtlasFrame(C$i);var C$i=C$t._materials[0];C$i&&C$i.getProperty("texture")!==C$e._texture&&(C$t._vertsDirty=!0,C$t._updateMaterial())},C$t=C$l,(C$i=[{key:"verticesFloats",get:function(){return this.verticesCount*this.floatsPerVert}}])&&C$s(C$t.prototype,C$i),C$d&&C$s(C$t,C$d);var C$c,C$d,C$i=C$l;function C$l(){var C$t=C$c.call(this)||this;return C$t._renderData=new C$u.default,C$t._renderData.init(C$o(C$t)),C$t.initData(),C$t.initLocal(),C$t}C$e.default=C$i,cc.js.addon(C$i.prototype,{floatsPerVert:5,verticesCount:4,indicesCount:6,uvOffset:2,colorOffset:4}),cc.Assembler2D=C$i,C$h.exports=C$e.default},{"./assembler":217,"./utils/dynamic-atlas/manager":223,"./webgl/render-data":250}],216:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=(C$t=C$t("../utils/pool"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$s,C$o,C$h=0;function C$a(C$t){return Object.getOwnPropertyDescriptor(C$t,"__assemblerId__")||(C$t.__assemblerId__=++C$h),C$t.__assemblerId__}function C$c(){for(var C$t,C$e=arguments.length,C$i=new Array(C$e),C$n=0;C$n<C$e;C$n++)C$i[C$n]=arguments[C$n];return(C$t=C$s.call.apply(C$s,[this].concat(C$i))||this)._pool={},C$t}C$s=C$t.default,C$l=C$s,(C$o=C$c).prototype=Object.create(C$l.prototype),(C$o.prototype.constructor=C$o).__proto__=C$l,C$n(C$c),(C$o=C$c.prototype).put=function(C$t){var C$e,C$i;C$t&&this.enabled&&(C$e=C$a(C$t.constructor),(C$i=this._pool)[C$e]||(C$i[C$e]=[]),this.count>this.maxSize||(this._clean(C$t),C$i[C$e].push(C$t),this.count++))},C$o.get=function(C$t){var C$e,C$i,C$n;return(C$n=this.enabled?(C$e=this._pool)[C$i=C$a(C$t)]&&C$e[C$i].pop():C$n)?this.count--:C$n=new C$t,C$n},C$o.clear=function(){this._pool={},this.count=0},C$o._clean=function(C$t){C$t._renderComp=null};var C$l=new C$c;C$t.default.register("assembler",C$l),C$i.default=C$l,C$e.exports=C$i.default},{"../utils/pool":266}],217:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$t("./webgl/vertex-format"),C$r=(C$t=C$t("./assembler-pool"))&&C$t.__esModule?C$t:{default:C$t};(C$t=C$s.prototype).init=function(C$t){this._renderComp=C$t},C$t.updateRenderData=function(C$t){},C$t.fillBuffers=function(C$t,C$e){},C$t.getVfmt=function(){return C$n.vfmtPosUvColor};C$t=C$s;function C$s(){this._extendNative&&this._extendNative()}(C$i.default=C$t).register=function(C$t,C$e){C$t.__assembler__=C$e},C$t.init=function(C$t){for(var C$e,C$i=C$t.constructor,C$n=C$i.__assembler__;!C$n;){if(!(C$i=C$i.$super))return void cc.warn("Can not find assembler for render component : ["+cc.js.getClassName(C$t)+"]");C$n=C$i.__assembler__}C$n.getConstructor&&(C$n=C$n.getConstructor(C$t)),C$t._assembler&&C$t._assembler.constructor===C$n||((C$e=C$r.default.get(C$n)).init(C$t),C$t._assembler=C$e)},cc.Assembler=C$t,C$e.exports=C$i.default},{"./assembler-pool":216,"./webgl/vertex-format":252}],218:[function(C$t,C$e,C$i){"use strict";function C$n(C$t){var C$e;try{C$e=C$t.getContext("2d")}catch(C$t){return void console.error(C$t)}this._canvas=C$t,this._ctx=C$e,this._caps={},this._stats={drawcalls:0},this._vx=this._vy=this._vw=this._vh=0,this._sx=this._sy=this._sw=this._sh=0}C$n.prototype._restoreTexture=function(C$t){},C$n.prototype.setViewport=function(C$t,C$e,C$i,C$n){this._vx===C$t&&this._vy===C$e&&this._vw===C$i&&this._vh===C$n||(this._vx=C$t,this._vy=C$e,this._vw=C$i,this._vh=C$n)},C$n.prototype.setScissor=function(C$t,C$e,C$i,C$n){this._sx===C$t&&this._sy===C$e&&this._sw===C$i&&this._sh===C$n||(this._sx=C$t,this._sy=C$e,this._sw=C$i,this._sh=C$n)},C$n.prototype.clear=function(C$t){var C$e=this._ctx;C$e.clearRect(this._vx,this._vy,this._vw,this._vh),!C$t||0===C$t[0]&&0===C$t[1]&&0===C$t[2]||(C$e.fillStyle="rgb("+C$t[0]+","+C$t[1]+","+C$t[2]+")",C$e.globalAlpha=C$t[3],C$e.fillRect(this._vx,this._vy,this._vw,this._vh))},C$n.prototype.resetDrawCalls=function(){this._stats.drawcalls=0},C$n.prototype.getDrawCalls=function(){return this._stats.drawcalls},C$e.exports=C$n},{}],219:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e){this._device=C$t,this._width=4,this._height=4,this._image=null,C$e&&(void 0!==C$e.width&&(this._width=C$e.width),void 0!==C$e.height&&(this._height=C$e.height),this.updateImage(C$e))}C$n.prototype.update=function(C$t){this.updateImage(C$t)},C$n.prototype.updateImage=function(C$t){C$t.images&&C$t.images[0]&&((C$t=C$t.images[0])&&C$t!==this._image&&(this._image=C$t))},C$n.prototype.destroy=function(){this._image=null},C$e.exports=C$n},{}],220:[function(C$s,C$t,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$o=C$r(C$s("../../renderer/gfx")),C$i=C$r(C$s("../../renderer/core/input-assembler")),C$n=C$r(C$s("../../renderer/core/pass"));function C$r(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}C$i=cc.renderer={Texture2D:null,InputAssembler:C$i.default,Pass:C$n.default,renderEngine:null,canvas:null,device:null,scene:null,drawCalls:0,_handle:null,_cameraNode:null,_camera:null,_forward:null,_flow:null,initWebGL:function(C$t,C$e){C$s("./webgl/assemblers");var C$i=C$s("./webgl/model-batcher"),C$n=(this.Texture2D=C$o.default.Texture2D,this.canvas=C$t,this._flow=cc.RenderFlow,C$s("../../renderer/scene/scene")),C$r=C$s("../../renderer/renderers/forward-renderer"),C$e=(this.device=new C$o.default.Device(C$t,C$e),this.scene=new C$n,C$t=this.device,{defaultTexture:new C$o.default.Texture2D(C$t,{images:[],width:128,height:128,wrapS:C$o.default.WRAP_REPEAT,wrapT:C$o.default.WRAP_REPEAT,format:C$o.default.TEXTURE_FMT_RGB8,mipmap:!1}),programTemplates:[],programChunks:{}});this._forward=new C$r(this.device,C$e),this._handle=new C$i(this.device,this.scene),this._flow.init(this._handle,this._forward)},initCanvas:function(C$t){var C$e=C$s("./canvas"),C$i=C$s("./canvas/Texture2D"),C$n=C$s("./canvas/Device");this.Device=C$n,this.Texture2D=C$i,this.canvas=C$t,this.device=new C$n(C$t),this._camera={a:1,b:0,c:0,d:1,tx:0,ty:0},this._handle=new C$e.RenderComponentHandle(this.device,this._camera),this._forward=new C$e.ForwardRenderer,this._flow=cc.RenderFlow,this._flow.init(this._handle,this._forward)},updateCameraViewport:function(){var C$t;!cc.director||(C$t=cc.director.getScene())&&C$t.setScale(1,1,1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(C$t=cc.view.getViewportRect(),this.device.setViewport(C$t.x,C$t.y,C$t.width,C$t.height),this._camera.a=cc.view.getScaleX(),this._camera.d=cc.view.getScaleY(),this._camera.tx=C$t.x,this._camera.ty=C$t.y+C$t.height)},render:function(C$t,C$e){this.device.resetDrawCalls(),C$t&&(this._flow.render(C$t,C$e),this.drawCalls=this.device.getDrawCalls())},clear:function(){this._handle.reset(),this._forward.clear()}};C$e.default=C$i,C$t.exports=C$e.default},{"../../renderer/core/input-assembler":302,"../../renderer/core/pass":303,"../../renderer/gfx":312,"../../renderer/renderers/forward-renderer":331,"../../renderer/scene/scene":334,"./canvas":void 0,"./canvas/Device":218,"./canvas/Texture2D":219,"./webgl/assemblers":232,"./webgl/model-batcher":248}],221:[function(C$e,C$i,C$l){"use strict";var C$u,C$n,C$t=0,C$r=(C$t++,C$t++,C$t++,C$t++,C$t++,C$t++,C$t++,C$t++,C$t++,1024),C$_=0;function C$s(){this._func=C$h,this._next=null}var C$t=C$s.prototype,C$o=(C$t._doNothing=function(){},C$t._localTransform=function(C$t){C$t._updateLocalMatrix(),C$t._renderFlag&=-5,this._next._func(C$t)},C$t._worldTransform=function(C$t){C$u.worldMatDirty++;var C$e=C$t._matrix,C$i=C$t._trs,C$n=C$e.m;C$n[12]=C$i[0],C$n[13]=C$i[1],C$n[14]=C$i[2],C$t._mulMat(C$t._worldMatrix,C$t._parent._worldMatrix,C$e),C$t._renderFlag&=-9,this._next._func(C$t),C$u.worldMatDirty--},C$t._opacity=function(C$t){C$u.parentOpacityDirty++,C$t._renderFlag&=-33,this._next._func(C$t),C$u.parentOpacityDirty--},C$t._color=function(C$t){var C$e=C$t._renderComponent;C$e&&C$e._updateColor(),C$t._renderFlag&=-65,this._next._func(C$t)},C$t._updateRenderData=function(C$t){var C$e=C$t._renderComponent;C$e._assembler.updateRenderData(C$e),C$t._renderFlag&=-17,this._next._func(C$t)},C$t._render=function(C$t){var C$e=C$t._renderComponent;C$e._checkBacth(C$u,C$t._cullingMask),C$e._assembler.fillBuffers(C$e,C$u),this._next._func(C$t)},C$t._children=function(C$t){for(var C$e=C$_,C$i=C$u,C$n=C$i.parentOpacity,C$r=C$i.parentOpacity*=C$t._opacity/255,C$s=(C$i.worldMatDirty?8:0)|(C$i.parentOpacityDirty?96:0),C$o=C$t._children,C$a=0,C$h=C$o.length;C$a<C$h;C$a++){var C$c,C$l=C$o[C$a];C$l._renderFlag|=C$s,C$l._activeInHierarchy&&0!==C$l._opacity&&(C$_=C$l._cullingMask=0===C$l.groupIndex?C$e:1<<C$l.groupIndex,C$c=C$l._color._val,C$l._color._fastSetA(C$l._opacity*C$r),C$d[C$l._renderFlag]._func(C$l),C$l._color._val=C$c)}C$i.parentOpacity=C$n,this._next._func(C$t)},C$t._postRender=function(C$t){var C$e=C$t._renderComponent;C$e._checkBacth(C$u,C$t._cullingMask),C$e._assembler.postFillBuffers(C$e,C$u),this._next._func(C$t)},new C$s),C$d=(C$o._func=C$o._doNothing,C$o._next=C$o,{});function C$a(C$t,C$e){var C$i=new C$s;switch(C$i._next=C$e||C$o,C$t){case 1:case 2:C$i._func=C$i._doNothing;break;case 4:C$i._func=C$i._localTransform;break;case 8:C$i._func=C$i._worldTransform;break;case 32:C$i._func=C$i._opacity;break;case 64:C$i._func=C$i._color;break;case 16:C$i._func=C$i._updateRenderData;break;case 128:C$i._func=C$i._render;break;case 256:C$i._func=C$i._children;break;case 512:C$i._func=C$i._postRender}return C$i}function C$h(C$t){var C$e=C$t._renderFlag;(C$d[C$e]=function(C$t){for(var C$e=null,C$i=C$r;0<C$i;)C$i&C$t&&(C$e=C$a(C$i,C$e)),C$i>>=1;return C$e}(C$e))._func(C$t)}C$s.flows=C$d,C$s.createFlow=C$a;var C$c=[];C$s.registerValidate=function(C$t){C$t._inValidateList||(C$c.push(C$t),C$t._inValidateList=!0)},C$s.validateRenderers=function(){for(var C$t=0,C$e=C$c.length;C$t<C$e;C$t++){var C$i=C$c[C$t];C$i.isValid&&(C$i.enabledInHierarchy?C$i._validateRender():C$i.disableRender(),C$i._inValidateList=!1)}C$c.length=0},C$s.visitRootNode=function(C$t){C$s.validateRenderers(),C$_=1<<C$t.groupIndex,8&C$t._renderFlag?(C$u.worldMatDirty++,C$t._calculWorldMatrix(),C$t._renderFlag&=-9,C$d[C$t._renderFlag]._func(C$t),C$u.worldMatDirty--):C$d[C$t._renderFlag]._func(C$t)},C$s.render=function(C$t,C$e){C$u.reset(),C$u.walking=!0,C$s.visitRootNode(C$t),C$u.terminate(),C$u.walking=!1,C$n.render(C$u._renderScene,C$e)},C$s.init=function(C$t,C$e){C$u=C$t,C$n=C$e,C$d[0]=C$o;for(var C$i=1;C$i<C$r;C$i++)C$d[C$i]=new C$s},C$s.getBachther=function(){return C$u},C$s.FLAG_DONOTHING=1,C$s.FLAG_BREAK_FLOW=2,C$s.FLAG_LOCAL_TRANSFORM=4,C$s.FLAG_WORLD_TRANSFORM=8,C$s.FLAG_TRANSFORM=12,C$s.FLAG_OPACITY=32,C$s.FLAG_COLOR=64,C$s.FLAG_OPACITY_COLOR=96,C$s.FLAG_UPDATE_RENDER_DATA=16,C$s.FLAG_RENDER=128,C$s.FLAG_CHILDREN=256,C$s.FLAG_POST_RENDER=512,C$s.FLAG_FINAL=C$r,C$i.exports=cc.RenderFlow=C$s},{}],222:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../../../assets/CCRenderTexture");function C$r(C$t,C$e){var C$i=new C$n;C$i.initWithSize(C$t,C$e),C$i.update(),this._texture=C$i,this._x=2,this._y=2,this._nexty=2,this._width=C$t,this._height=C$e,this._innerTextureInfos={},this._innerSpriteFrames=[],this._count=0}C$r.DEFAULT_HASH=(new C$n)._getHash(),cc.js.mixin(C$r.prototype,{insertSpriteFrame:function(C$t){var C$e=C$t._rect,C$i=C$t._texture,C$n=this._innerTextureInfos[C$i._id],C$r=C$e.x,C$e=C$e.y;if(C$n)C$r+=C$n.x,C$e+=C$n.y;else{var C$n=C$i.width,C$s=C$i.height;if(this._x+C$n+2>this._width&&(this._x=2,this._y=this._nexty),this._y+C$s+2>this._nexty&&(this._nexty=this._y+C$s+2),this._nexty>this._height)return null;cc.dynamicAtlasManager.textureBleeding&&((C$n<=8||C$s<=8)&&(this._texture.drawTextureAt(C$i,this._x-1,this._y-1),this._texture.drawTextureAt(C$i,this._x-1,this._y+1),this._texture.drawTextureAt(C$i,this._x+1,this._y-1),this._texture.drawTextureAt(C$i,this._x+1,this._y+1)),this._texture.drawTextureAt(C$i,this._x-1,this._y),this._texture.drawTextureAt(C$i,this._x+1,this._y),this._texture.drawTextureAt(C$i,this._x,this._y-1),this._texture.drawTextureAt(C$i,this._x,this._y+1)),this._texture.drawTextureAt(C$i,this._x,this._y),this._innerTextureInfos[C$i._id]={x:this._x,y:this._y,texture:C$i},this._count++,C$r+=this._x,C$e+=this._y,this._x+=C$n+2,this._dirty=!0}C$s={x:C$r,y:C$e,texture:this._texture};return this._innerSpriteFrames.push(C$t),C$s},update:function(){this._dirty&&(this._texture.update(),this._dirty=!1)},deleteInnerTexture:function(C$t){C$t&&this._innerTextureInfos[C$t._id]&&(delete this._innerTextureInfos[C$t._id],this._count--)},isEmpty:function(){return this._count<=0},reset:function(){this._x=2,this._y=2,this._nexty=2;for(var C$t=this._innerSpriteFrames,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e];C$n.isValid&&C$n._resetDynamicAtlasFrame()}this._innerSpriteFrames.length=0,this._innerTextureInfos={}},destroy:function(){this.reset(),this._texture.destroy()}}),C$e.exports=C$r},{"../../../assets/CCRenderTexture":43}],223:[function(C$t,C$u,C$_){"use strict";var C$e=C$t("./atlas"),C$n=[],C$r=-1,C$s=5,C$i=2048,C$o=512,C$a=!0;function C$c(){var C$t=C$n[++C$r];return C$t||(C$t=new C$e(C$i,C$i),C$n.push(C$t)),C$t}function C$l(){C$d.reset()}var C$h=!1,C$d={Atlas:C$e,get enabled(){return C$h},set enabled(C$t){C$h!==C$t&&(C$t?(this.reset(),cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,C$l)):cc.director.off(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,C$l),C$h=C$t)},get maxAtlasCount(){return C$s},set maxAtlasCount(C$t){C$s=C$t},get textureBleeding(){return C$a},set textureBleeding(C$t){C$a=C$t},get textureSize(){return C$i},set textureSize(C$t){C$i=C$t},get maxFrameSize(){return C$o},set maxFrameSize(C$t){C$o=C$t},insertSpriteFrame:function(C$t){if(!C$h||C$r===C$s||!C$t||C$t._original)return null;if(!C$t._texture.packable)return null;var C$e=C$n[C$r],C$i=(C$e=C$e||C$c()).insertSpriteFrame(C$t);return C$i||C$r===C$s?C$i:(C$e=C$c()).insertSpriteFrame(C$t)},reset:function(){for(var C$t=0,C$e=C$n.length;C$t<C$e;C$t++)C$n[C$t].destroy();C$n.length=0,C$r=-1},deleteAtlasSpriteFrame:function(C$t){C$t._original&&(C$t=C$t._original._texture,this.deleteAtlasTexture(C$t))},deleteAtlasTexture:function(C$t){if(C$t)for(var C$e=C$n.length-1;0<=C$e;C$e--)C$n[C$e].deleteInnerTexture(C$t),C$n[C$e].isEmpty()&&(C$n[C$e].destroy(),C$n.splice(C$e,1),C$r--)},showDebug:!1,update:function(){if(this.enabled)for(var C$t=0;C$t<=C$r;C$t++)C$n[C$t].update()}};C$u.exports=cc.dynamicAtlasManager=C$d},{"./atlas":222}],224:[function(C$t,C$i,C$n){"use strict";C$n.__esModule=!0,C$n.default=void 0;var C$e=(C$e=C$t("../../assembler-2d"))&&C$e.__esModule?C$e:{default:C$e};function C$r(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}function C$o(){this.char="",this.valid=!0,this.x=0,this.y=0,this.line=0,this.hash=""}var C$a,C$M=C$t("../../../utils/text-utils"),C$c=C$t("../../../platform/CCMacro"),C$A=C$t("../../../components/CCLabel").Overflow,C$C=C$t("../utils").shareLabelInfo,C$d=cc.rect(),C$p=null,C$I=[],C$f=[],C$S=[],C$m=[],C$B=null,C$R=0,C$P=0,C$y=0,C$D=0,C$L=0,C$T=1,C$g=null,C$w=cc.size(),C$V="",C$l=0,C$h=0,C$u=0,C$_=0,C$O=0,C$F=0,C$E=0,C$N=!1,C$k=0,C$G=0,C$z=0,C$t=(C$a=C$e.default,C$t=C$a,(C$e=C$v).prototype=Object.create(C$t.prototype),(C$e.prototype.constructor=C$e).__proto__=C$t,C$r(C$v),(C$e=C$v.prototype).updateRenderData=function(C$t){C$t._vertsDirty&&C$p!==C$t&&(C$p=C$t,this._reserveQuads(C$t,C$t.string.toString().length),this._updateFontFamily(C$t),this._updateProperties(C$t),this._updateLabelInfo(C$t),this._updateContent(),this.updateWorldVerts(C$t),C$p._actualFontSize=C$l,C$p.node.setContentSize(C$w),C$p._vertsDirty=!1,C$p=null,this._resetProperties())},C$e._updateFontScale=function(){C$T=C$l/C$h},C$e._updateFontFamily=function(C$t){var C$e=C$t.font;C$g=C$e.spriteFrame,C$B=C$e._fntConfig,C$C.fontAtlas=C$e._fontDefDictionary,this.packToDynamicAtlas(C$t,C$g)},C$e._updateLabelInfo=function(){C$C.hash="",C$C.margin=0},C$e._updateProperties=function(C$t){C$V=C$t.string.toString(),C$l=C$t.fontSize,C$h=(C$B||C$t).fontSize,C$u=C$t.horizontalAlign,C$_=C$t.verticalAlign,C$O=C$t.spacingX,C$E=C$t.overflow,C$F=C$t._lineHeight,C$w.width=C$t.node.width,C$w.height=C$t.node.height,C$E===C$A.NONE?(C$N=!1,C$w.width+=2*C$C.margin,C$w.height+=2*C$C.margin):C$E===C$A.RESIZE_HEIGHT?(C$N=!0,C$w.height+=2*C$C.margin):C$N=C$t.enableWrapText,C$C.lineHeight=C$F,C$C.fontSize=C$l,this._setupBMFontOverflowMetrics()},C$e._resetProperties=function(){C$g=C$B=null,C$C.hash="",C$C.margin=0},C$e._updateContent=function(){this._updateFontScale(),this._computeHorizontalKerningForText(),this._alignText()},C$e._computeHorizontalKerningForText=function(){for(var C$t=C$V,C$e=C$t.length,C$i=C$B.kerningDict,C$n=C$I,C$r=-1,C$s=0;C$s<C$e;++C$s){var C$o=C$t.charCodeAt(C$s),C$a=C$i[C$r<<16|65535&C$o]||0;C$n[C$s]=C$s<C$e-1?C$a:0,C$r=C$o}},C$e._multilineTextWrap=function(C$h){for(var C$t,C$u=C$V.length,C$e=0,C$i=0,C$_=0,C$d=0,C$n=0,C$r=0,C$s=0,C$o=cc.v2(0,0),C$a=0;C$a<C$u;)if("\n"!==(C$c=C$V.charAt(C$a))){for(var C$f=C$h(C$V,C$a,C$u),C$p=C$r,C$m=C$s,C$y=C$n,C$g=C$i,C$v=!1,C$x=0;C$x<C$f;++C$x){var C$c,C$l=C$a+C$x;if("\r"!==(C$c=C$V.charAt(C$l)))if(C$t=C$C.fontAtlas.getLetterDefinitionForChar(C$c,C$C)){var C$b=C$g+C$t.offsetX*C$T-C$C.margin;if(C$N&&0<C$z&&0<C$i&&C$b+C$t.w*C$T>C$z&&!C$M.isUnicodeSpace(C$c)){C$S.push(C$n),C$e++,C$i=C$n=0,C$_-=C$F*this._getFontScale()+0,C$v=!0;break}C$o.x=C$b,C$o.y=C$_-C$t.offsetY*C$T+C$C.margin,this._recordLetterInfo(C$o,C$c,C$l,C$e),C$l+1<C$I.length&&C$l<C$u-1&&(C$g+=C$I[C$l+1]),C$g+=C$t.xAdvance*C$T+C$O-2*C$C.margin,C$y=C$o.x+C$t.w*C$T-C$C.margin,C$p<C$o.y&&(C$p=C$o.y),C$m>C$o.y-C$t.h*C$T&&(C$m=C$o.y-C$t.h*C$T)}else this._recordPlaceholderInfo(C$l,C$c),console.log("Can't find letter definition in texture atlas "+C$B.atlasName+" for letter:"+C$c);else this._recordPlaceholderInfo(C$l,C$c)}C$v||(C$i=C$g,C$r<C$p&&(C$r=C$p),C$m<C$s&&(C$s=C$m),C$d<(C$n=C$y)&&(C$d=C$n),C$a+=C$f)}else C$S.push(C$n),C$e++,C$i=C$n=0,C$_-=C$F*this._getFontScale()+0,this._recordPlaceholderInfo(C$a,C$c),C$a++;return C$S.push(C$n),C$P=(C$R=C$e+1)*C$F*this._getFontScale(),1<C$R&&(C$P+=0*(C$R-1)),C$w.width=C$k,C$w.height=C$G,C$k<=0&&(C$w.width=parseFloat(C$d.toFixed(2))+2*C$C.margin),C$G<=0&&(C$w.height=parseFloat(C$P.toFixed(2))+2*C$C.margin),C$D=C$w.height,C$L=0,C$E!==C$A.CLAMP&&(0<C$r&&(C$D=C$w.height+C$r),C$s<-C$P&&(C$L=C$P+C$s)),!0},C$e._getFirstCharLen=function(){return 1},C$e._getFontScale=function(){return C$E===C$A.SHRINK?C$T:1},C$e._getFirstWordLen=function(C$t,C$e,C$i){var C$n=C$t.charAt(C$e);if(C$M.isUnicodeCJK(C$n)||"\n"===C$n||C$M.isUnicodeSpace(C$n))return 1;var C$r=1,C$s=C$C.fontAtlas.getLetterDefinitionForChar(C$n,C$C);if(!C$s)return C$r;for(var C$o=C$s.xAdvance*C$T+C$O,C$a=C$e+1;C$a<C$i&&(C$n=C$t.charAt(C$a),C$s=C$C.fontAtlas.getLetterDefinitionForChar(C$n,C$C));++C$a){if(C$o+C$s.offsetX*C$T+C$s.w*C$T>C$z&&!C$M.isUnicodeSpace(C$n)&&0<C$z)return C$r;if(C$o+=C$s.xAdvance*C$T+C$O,"\n"===C$n||C$M.isUnicodeSpace(C$n)||C$M.isUnicodeCJK(C$n))break;C$r++}return C$r},C$e._multilineTextWrapByWord=function(){return this._multilineTextWrap(this._getFirstWordLen)},C$e._multilineTextWrapByChar=function(){return this._multilineTextWrap(this._getFirstCharLen)},C$e._recordPlaceholderInfo=function(C$t,C$e){var C$i;C$t>=C$f.length&&(C$i=new C$o,C$f.push(C$i)),C$f[C$t].char=C$e,C$f[C$t].hash=C$e.charCodeAt(0)+C$C.hash,C$f[C$t].valid=!1},C$e._recordLetterInfo=function(C$t,C$e,C$i,C$n){C$i>=C$f.length&&(C$r=new C$o,C$f.push(C$r));var C$r=C$e.charCodeAt(0)+C$C.hash;C$f[C$i].line=C$n,C$f[C$i].char=C$e,C$f[C$i].hash=C$r,C$f[C$i].valid=C$C.fontAtlas.getLetter(C$r).valid,C$f[C$i].x=C$t.x,C$f[C$i].y=C$t.y},C$e._alignText=function(){C$P=0,C$S.length=0,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),C$E===C$A.SHRINK&&0<C$l&&this._isVerticalClamp()&&this._shrinkLabelToContentSize(this._isVerticalClamp),this._updateQuads()||C$E===C$A.SHRINK&&this._shrinkLabelToContentSize(this._isHorizontalClamp)},C$e._scaleFontSizeDown=function(C$t){var C$e=!0;C$t||(C$e=!(C$t=.1)),C$l=C$t,C$e&&this._updateContent()},C$e._shrinkLabelToContentSize=function(C$t){for(var C$e=0,C$i=0|C$l;C$e<C$i;){var C$n,C$r=C$n=C$e+C$i+1>>1;if(C$r<=0)break;C$T=C$r/C$h,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),C$t()?C$i=C$n-1:C$e=C$n}var C$s=C$e;0<=C$s&&this._scaleFontSizeDown(C$s)},C$e._isVerticalClamp=function(){return C$P>C$w.height},C$e._isHorizontalClamp=function(){for(var C$t=!1,C$e=0,C$i=C$V.length;C$e<C$i;++C$e){var C$n=C$f[C$e];if(C$n.valid){var C$r=C$C.fontAtlas.getLetter(C$n.hash),C$r=C$n.x+C$r.w*C$T,C$n=C$n.line;if(0<C$k)if(C$N){if(C$S[C$n]>C$w.width&&(C$r>C$w.width||C$r<0)){C$t=!0;break}}else if(C$r>C$w.width){C$t=!0;break}}}return C$t},C$e._isHorizontalClamped=function(C$t,C$e){C$e=C$S[C$e],C$t=C$t>C$w.width||C$t<0;return(!C$N||C$e>C$w.width)&&C$t},C$e._updateQuads=function(){for(var C$t=C$g?C$g._texture:C$C.fontAtlas.getTexture(),C$e=C$p.node,C$i=(this.verticesCount=this.indicesCount=0,this._renderData&&(this._renderData.dataLength=0),C$w),C$h=C$e._anchorPoint.x*C$i.width,C$u=C$e._anchorPoint.y*C$i.height,C$n=!0,C$r=0,C$_=C$V.length;C$r<C$_;++C$r){var C$s=C$f[C$r];if(C$s.valid){var C$o=C$C.fontAtlas.getLetter(C$s.hash),C$a=(C$d.height=C$o.h,C$d.width=C$o.w,C$d.x=C$o.u,C$d.y=C$o.v,C$s.y+C$y),C$c=(0<C$G&&(C$D<C$a&&(C$c=C$a-C$D,C$d.y+=C$c,C$d.height-=C$c,C$a-=C$c),C$a-C$o.h*C$T<C$L&&C$E===C$A.CLAMP&&(C$d.height=C$a<C$L?0:(C$a-C$L)/C$T)),C$s.line),C$l=C$s.x+C$o.w/2*C$T+C$m[C$c];if(0<C$k&&this._isHorizontalClamped(C$l,C$c))if(C$E===C$A.CLAMP)C$d.width=0;else if(C$E===C$A.SHRINK){if(C$w.width>C$o.w){C$n=!1;break}C$d.width=0}0<C$d.height&&0<C$d.width&&(C$l=this._determineRect(C$d),C$o=C$s.x+C$m[C$s.line],this.appendQuad(C$p,C$t,C$d,C$l,C$o-C$h,C$a-C$u,C$T))}}return this._quadsUpdated(C$p),C$n},C$e._determineRect=function(C$t){var C$e=C$g.isRotated(),C$i=C$g._originalSize,C$n=C$g._rect,C$r=C$g._offset,C$s=C$r.x+(C$i.width-C$n.width)/2,C$r=C$r.y-(C$i.height-C$n.height)/2;return C$e?(C$i=C$t.x,C$t.x=C$n.x+C$n.height-C$t.y-C$t.height-C$r,C$t.y=C$i+C$n.y-C$s,C$t.y<0&&(C$t.height=C$t.height+C$r)):(C$t.x+=C$n.x-C$s,C$t.y+=C$n.y+C$r),C$e},C$e._computeAlignmentOffset=function(){switch(C$m.length=0,C$u){case C$c.TextAlignment.LEFT:for(var C$t=0;C$t<C$R;++C$t)C$m.push(0);break;case C$c.TextAlignment.CENTER:for(var C$e=0,C$i=C$S.length;C$e<C$i;C$e++)C$m.push((C$w.width-C$S[C$e])/2);break;case C$c.TextAlignment.RIGHT:for(var C$n=0,C$r=C$S.length;C$n<C$r;C$n++)C$m.push(C$w.width-C$S[C$n])}var C$s;C$y=C$w.height,C$_!==C$c.VerticalTextAlignment.TOP&&(C$s=C$w.height-C$P+C$F*this._getFontScale()-C$h*C$T,C$_===C$c.VerticalTextAlignment.BOTTOM?C$y-=C$s:C$y-=C$s/2)},C$e._setupBMFontOverflowMetrics=function(){var C$t=C$w.width,C$e=C$w.height;C$E===C$A.RESIZE_HEIGHT&&(C$e=0),C$E===C$A.NONE&&(C$e=C$t=0),C$G=C$e,C$z=C$k=C$t},C$e.updateWorldVerts=function(){},C$e.appendQuad=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){},C$e._quadsUpdated=function(C$t){},C$e._reserveQuads=function(){},C$v);function C$v(){return C$a.apply(this,arguments)||this}C$n.default=C$t,C$i.exports=C$n.default},{"../../../components/CCLabel":80,"../../../platform/CCMacro":194,"../../../utils/text-utils":271,"../../assembler-2d":215,"../utils":228}],225:[function(C$t,C$e,C$i){"use strict";function C$n(){this._rect=null,this.uv=[],this._texture=null,this._original=null}C$n.prototype={constructor:C$n,getRect:function(){return cc.rect(this._rect)},setRect:function(C$t){this._rect=C$t,this._texture&&this._calculateUV()},_setDynamicAtlasFrame:function(C$t){C$t&&(this._original={_texture:this._texture,_x:this._rect.x,_y:this._rect.y},this._texture=C$t.texture,this._rect.x=C$t.x,this._rect.y=C$t.y,this._calculateUV())},_resetDynamicAtlasFrame:function(){this._original&&(this._rect.x=this._original._x,this._rect.y=this._original._y,this._texture=this._original._texture,this._original=null,this._calculateUV())},_refreshTexture:function(C$t){this._texture=C$t,this._rect=cc.rect(0,0,C$t.width,C$t.height),this._calculateUV()},_calculateUV:function(){var C$t=this._rect,C$e=this._texture,C$i=this.uv,C$n=C$e.width,C$e=C$e.height,C$r=0===C$n?0:C$t.x/C$n,C$n=0===C$n?0:(C$t.x+C$t.width)/C$n,C$s=0===C$e?0:(C$t.y+C$t.height)/C$e,C$t=0===C$e?0:C$t.y/C$e;C$i[0]=C$r,C$i[1]=C$s,C$i[2]=C$n,C$i[3]=C$s,C$i[4]=C$r,C$i[5]=C$t,C$i[6]=C$n,C$i[7]=C$t}},C$e.exports=C$n},{}],226:[function(C$t,C$h,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$i=(C$i=C$t("../../webgl/assemblers/label/2d/bmfont"))&&C$i.__esModule?C$i:{default:C$i};function C$u(C$i){return function(){var C$t,C$e=C$n(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$n(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$n(C$t){return(C$n=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$_=C$t("../../../components/CCLabel"),C$d=C$t("../../../components/CCLabelOutline"),C$a=C$t("../../../utils/text-utils"),C$r=C$t("../../../components/CCComponent"),C$f=C$t("../../../assets/CCRenderTexture"),C$p=cc.js.isChildClassOf(C$d,C$r),C$m=C$t("../utils").getFontFamily,C$s=C$t("../utils").shareLabelInfo,C$y=cc.BitmapFont.FontLetterDefinition,C$g=cc.BitmapFont.FontAtlas,C$v=cc.Color.WHITE,C$x=(1/255).toFixed(3);function C$o(C$t,C$e){this._texture=null,this._labelInfo=C$e,this._char=C$t,this._hash=null,this._data=null,this._canvas=null,this._context=null,this._width=0,this._height=0,this._offsetY=0,this._hash=C$t.charCodeAt(0)+C$e.hash}function C$b(C$t,C$e){var C$i=new C$f;C$i.initWithSize(C$t,C$e),C$i.update(),this._fontDefDictionary=new C$g(C$i),this._x=0,this._y=0,this._nexty=0,this._width=C$t,this._height=C$e,cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,this.beforeSceneLoad,this)}C$o.prototype={constructor:C$o,updateRenderData:function(){this._updateProperties(),this._updateTexture()},_updateProperties:function(){this._texture=new cc.Texture2D,this._data=C$_._canvasPool.get(),this._canvas=this._data.canvas,this._context=this._data.context,this._context.font=this._labelInfo.fontDesc;var C$t=C$a.safeMeasureText(this._context,this._char,this._labelInfo.fontDesc),C$e=2*this._labelInfo.margin+2;this._width=parseFloat(C$t.toFixed(2))+C$e,this._height=(1+C$a.BASELINE_RATIO)*this._labelInfo.fontSize+C$e,this._offsetY=-this._labelInfo.fontSize*C$a.BASELINE_RATIO/2,this._canvas.width!==this._width&&(this._canvas.width=this._width),this._canvas.height!==this._height&&(this._canvas.height=this._height),this._texture.initWithElement(this._canvas)},_updateTexture:function(){var C$t=this._context,C$e=this._labelInfo,C$i=this._canvas.width,C$n=this._canvas.height,C$r=C$i/2,C$s=C$n/2+this._labelInfo.fontSize*C$a.MIDDLE_RATIO,C$o=C$e.color;C$t.textAlign="center",C$t.textBaseline="alphabetic",C$t.clearRect(0,0,C$i,C$n),C$t.fillStyle="rgba("+C$o.r+", "+C$o.g+", "+C$o.b+", "+C$x+")",C$t.fillRect(0,0,C$i,C$n),C$t.font=C$e.fontDesc,C$t.lineJoin="round",C$t.fillStyle="rgba("+C$o.r+", "+C$o.g+", "+C$o.b+", 1)",C$e.isOutlined&&0<C$e.margin&&(C$i=C$e.out||C$v,C$t.strokeStyle="rgba("+C$i.r+", "+C$i.g+", "+C$i.b+", "+C$i.a/255+")",C$t.lineWidth=2*C$e.margin,C$t.strokeText(this._char,C$r,C$s)),C$t.fillText(this._char,C$r,C$s),this._texture.handleLoadedTexture()},destroy:function(){this._texture.destroy(),this._texture=null,C$_._canvasPool.put(this._data)}},cc.js.mixin(C$b.prototype,{insertLetterTexture:function(C$t){var C$e=C$t._texture,C$i=C$e.width,C$n=C$e.height;if(this._x+C$i+0>this._width&&(this._x=0,this._y=this._nexty),this._y+C$n>this._nexty&&(this._nexty=this._y+C$n+0),this._nexty>this._height)return null;this._fontDefDictionary._texture.drawTextureAt(C$e,this._x,this._y),this._dirty=!0;C$n=new C$y;return C$n.u=this._x+1,C$n.v=this._y+1,C$n.texture=this._fontDefDictionary._texture,C$n.valid=!0,C$n.w=C$t._width-2,C$n.h=C$t._height-2,C$n.xAdvance=C$n.w,C$n.offsetY=C$t._offsetY,this._x+=C$i+0,this._fontDefDictionary.addLetterDefinitions(C$t._hash,C$n),C$n},update:function(){this._dirty&&(this._fontDefDictionary._texture.update(),this._dirty=!1)},reset:function(){this._x=0,this._y=0,this._nexty=0;for(var C$t=this._fontDefDictionary._letterDefinitions,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e];C$n.isValid&&C$n.destroy()}this._fontDefDictionary.clear()},destroy:function(){this.reset(),this._fontDefDictionary._texture.destroy(),this._fontDefDictionary._texture=null},beforeSceneLoad:function(){this.clearAllCache()},clearAllCache:function(){this.destroy();var C$t=new C$f;C$t.initWithSize(this._width,this._height),C$t.update(),this._fontDefDictionary._texture=C$t},getLetter:function(C$t){return this._fontDefDictionary._letterDefinitions[C$t]},getTexture:function(){return this._fontDefDictionary.getTexture()},getLetterDefinitionForChar:function(C$t,C$e){var C$i=C$t.charCodeAt(0)+C$e.hash,C$i=this._fontDefDictionary._letterDefinitions[C$i];return C$i||((C$t=new C$o(C$t,C$e)).updateRenderData(),C$i=this.insertLetterTexture(C$t),C$t.destroy()),C$i}});var C$A,C$c=null,C$i=(C$A=C$i.default,C$r=C$A,(C$t=C$l).prototype=Object.create(C$r.prototype),(C$t.prototype.constructor=C$t).__proto__=C$r,C$u(C$l),(C$t=C$l.prototype)._getAssemblerData=function(){return C$c||(C$c=new C$b(2048,2048),cc.Label._shareAtlas=C$c),C$c.getTexture()},C$t._updateFontFamily=function(C$t){C$s.fontAtlas=C$c,C$s.fontFamily=C$m(C$t);var C$e=C$p&&C$t.getComponent(C$d);C$e&&C$e.enabled?(C$s.isOutlined=!0,C$s.margin=C$e.width,C$s.out=C$e.color.clone(),C$s.out.a=C$e.color.a*C$t.node.color.a/255):(C$s.isOutlined=!1,C$s.margin=0)},C$t._updateLabelInfo=function(C$t){var C$e,C$i;C$s.fontDesc=this._getFontDesc(),C$s.color=C$t.node.color,C$s.hash=(C$e=(C$t=C$s).color.toHEX("#rrggbb"),C$i="",C$t.isOutlined&&0<C$t.margin&&(C$i=C$i+C$t.margin+C$t.out.toHEX("#rrggbb")),""+C$t.fontSize+C$t.fontFamily+C$e+C$i)},C$t._getFontDesc=function(){var C$t=C$s.fontSize.toString()+"px ";return C$t+=C$s.fontFamily},C$t._computeHorizontalKerningForText=function(){},C$t._determineRect=function(C$t){return!1},C$l);function C$l(){return C$A.apply(this,arguments)||this}C$e.default=C$i,C$h.exports=C$e.default},{"../../../assets/CCRenderTexture":43,"../../../components/CCComponent":78,"../../../components/CCLabel":80,"../../../components/CCLabelOutline":81,"../../../utils/text-utils":271,"../../webgl/assemblers/label/2d/bmfont":233,"../utils":228}],227:[function(C$e,C$i,C$n){"use strict";C$n.__esModule=!0,C$n.default=void 0;var C$t=(C$t=C$e("../../assembler-2d"))&&C$t.__esModule?C$t:{default:C$t};function C$r(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$_,C$o,C$a,C$p=C$e("../../../utils/text-utils"),C$d=C$e("../../../platform/CCMacro"),C$c=C$e("../../../components/CCLabel"),C$f=C$e("../../../components/CCLabelOutline"),C$b=C$e("../../../components/CCLabelShadow"),C$A=C$c.Overflow,C$C=C$e("../utils").deleteFromDynamicAtlas,C$S=C$e("../utils").getFontFamily,C$T=(1/255).toFixed(3),C$m=null,C$w=null,C$E=null,C$y="",C$M="",C$g=0,C$I=0,C$l=[],C$v=cc.Size.ZERO,C$B=0,C$R=0,C$P=0,C$D=null,C$L="",C$V=C$A.NONE,C$O=!1,C$h=null,C$F=cc.Color.WHITE,C$u=null,C$N=cc.Color.BLACK,C$x=cc.rect(),C$k=cc.Size.ZERO,C$G=cc.Size.ZERO,C$z=!1,C$U=!1,C$W=!1,C$H=0,C$j=cc.Vec2.ZERO,C$e=(C$a=C$t.default,C$e=C$a,(C$t=C$X).prototype=Object.create(C$e.prototype),(C$t.prototype.constructor=C$t).__proto__=C$e,C$r(C$X),(C$t=C$X.prototype)._getAssemblerData=function(){return(C$o=C$c._canvasPool.get()).canvas.width=C$o.canvas.height=1,C$o},C$t._resetAssemblerData=function(C$t){C$t&&C$c._canvasPool.put(C$t)},C$t.updateRenderData=function(C$t){C$a.prototype.updateRenderData.call(this,C$t),C$t._vertsDirty&&(this._updateFontFamily(C$t),this._updateProperties(C$t),this._calculateLabelFont(),this._calculateSplitedStrings(),this._updateLabelDimensions(),this._calculateTextBaseline(),this._updateTexture(C$t),this._calDynamicAtlas(C$t),C$t._actualFontSize=C$g,C$t.node.setContentSize(C$G),this.updateVerts(C$t),C$t._vertsDirty=!1,C$E=C$w=C$m=null)},C$t.updateVerts=function(){},C$t._updatePaddingRect=function(){var C$t=0,C$e=0,C$i=0,C$n=0,C$r=0;C$k.width=C$k.height=0,C$h&&(C$t=C$e=C$i=C$n=C$r=C$h.width,C$k.width=C$k.height=2*C$r),C$u&&(C$r=C$u.blur+C$r,C$i=Math.max(C$i,-C$u._offset.x+C$r),C$n=Math.max(C$n,C$u._offset.x+C$r),C$t=Math.max(C$t,C$u._offset.y+C$r),C$e=Math.max(C$e,-C$u._offset.y+C$r)),C$U&&(C$n+=C$r=C$I*Math.tan(.20943951),C$k.width+=C$r),C$x.x=C$i,C$x.y=C$t,C$x.width=C$i+C$n,C$x.height=C$t+C$e},C$t._updateFontFamily=function(C$t){C$L=C$S(C$t)},C$t._updateProperties=function(C$t){var C$e=C$t._assemblerData;C$m=C$e.context,C$w=C$e.canvas,C$E=(C$t._frame._original||C$t._frame)._texture,C$M=C$t.string.toString(),C$g=C$t._fontSize,C$I=C$g,C$H=C$t.underlineHeight||C$I/8,C$V=C$t.overflow,C$v.width=C$t.node.width,C$v.height=C$t.node.height,C$G=C$t.node.getContentSize(),C$B=C$t._lineHeight,C$R=C$t.horizontalAlign,C$P=C$t.verticalAlign,C$D=C$t.node.color,C$z=C$t.enableBold,C$U=C$t.enableItalic,C$W=C$t.enableUnderline,C$O=C$V!==C$A.NONE&&(C$V===C$A.RESIZE_HEIGHT||C$t.enableWrapText),(C$h=(C$h=C$f&&C$t.getComponent(C$f))&&C$h.enabled&&0<C$h.width?C$h:null)&&C$F.set(C$h.color),(C$u=(C$u=C$b&&C$t.getComponent(C$b))&&C$u.enabled?C$u:null)&&(C$N.set(C$u.color),C$N.a=C$N.a*C$t.node.color.a/255),this._updatePaddingRect()},C$t._calculateFillTextStartPosition=function(){var C$t=0;C$R===C$d.TextAlignment.RIGHT?C$t=C$v.width-C$x.width:C$R===C$d.TextAlignment.CENTER&&(C$t=(C$v.width-C$x.width)/2);var C$e=this._getLineHeight()*(C$l.length-1),C$i=C$g*(1-C$p.BASELINE_RATIO/2);return C$P!==C$d.VerticalTextAlignment.TOP&&(C$e=C$e+C$x.height+C$g-C$v.height,C$P===C$d.VerticalTextAlignment.BOTTOM?C$i-=C$e+=C$p.BASELINE_RATIO/2*C$g:C$i-=C$e/2),C$i+=C$p.BASELINE_OFFSET*C$g,cc.v2(C$t+C$x.x,C$i+C$x.y)},C$t._setupOutline=function(){C$m.strokeStyle="rgba("+C$F.r+", "+C$F.g+", "+C$F.b+", "+C$F.a/255+")",C$m.lineWidth=2*C$h.width},C$t._setupShadow=function(){C$m.shadowColor="rgba("+C$N.r+", "+C$N.g+", "+C$N.b+", "+C$N.a/255+")",C$m.shadowBlur=C$u.blur,C$m.shadowOffsetX=C$u.offset.x,C$m.shadowOffsetY=-C$u.offset.y},C$t._drawUnderline=function(C$t){C$h&&(this._setupOutline(),C$m.strokeRect(C$j.x,C$j.y,C$t,C$H)),C$m.lineWidth=C$H,C$m.fillStyle="rgba("+C$D.r+", "+C$D.g+", "+C$D.b+", "+C$D.a/255+")",C$m.fillRect(C$j.x,C$j.y,C$t,C$H)},C$t._updateTexture=function(){C$m.clearRect(0,0,C$w.width,C$w.height);var C$t=C$h?C$F:C$D,C$e=(C$m.fillStyle="rgba("+C$t.r+", "+C$t.g+", "+C$t.b+", "+C$T+")",C$m.fillRect(0,0,C$w.width,C$w.height),C$m.font=C$y,this._calculateFillTextStartPosition()),C$i=this._getLineHeight(),C$n=(C$m.lineJoin="round",C$m.fillStyle="rgba("+C$D.r+", "+C$D.g+", "+C$D.b+", 1)",1<C$l.length),C$r=this._measureText(C$m,C$y),C$s=0,C$o=0;C$u&&this._setupShadow(),C$h&&0<C$h.width&&this._setupOutline();for(var C$a=0;C$a<C$l.length;++C$a)C$s=C$e.x,C$o=C$e.y+C$a*C$i,C$u&&C$n&&(C$h&&0<C$h.width&&C$m.strokeText(C$l[C$a],C$s,C$o),C$m.fillText(C$l[C$a],C$s,C$o)),C$W&&(C$_=C$r(C$l[C$a]),C$R===C$d.TextAlignment.RIGHT?C$j.x=C$e.x-C$_:C$R===C$d.TextAlignment.CENTER?C$j.x=C$e.x-C$_/2:C$j.x=C$e.x,C$j.y=C$o+C$I/8,this._drawUnderline(C$_));C$u&&C$n&&(C$m.shadowColor="transparent");for(var C$c=0;C$c<C$l.length;++C$c)C$s=C$e.x,C$o=C$e.y+C$c*C$i,C$h&&0<C$h.width&&C$m.strokeText(C$l[C$c],C$s,C$o),C$m.fillText(C$l[C$c],C$s,C$o);C$u&&(C$m.shadowColor="transparent"),C$E.handleLoadedTexture()},C$t._calDynamicAtlas=function(C$t){var C$e;C$t.cacheMode===C$c.CacheMode.BITMAP&&(C$e=C$t._frame,C$C(C$t,C$e),C$e._original||C$e.setRect(cc.rect(0,0,C$w.width,C$w.height)),this.packToDynamicAtlas(C$t,C$e))},C$t._updateLabelDimensions=function(){var C$t=C$M.split("\n");if(C$V===C$A.RESIZE_HEIGHT){var C$e=(C$l.length+C$p.BASELINE_RATIO)*this._getLineHeight();C$v.height=C$e+C$x.height,C$G.height=C$e+C$k.height}else if(C$V===C$A.NONE){C$l=C$t;for(var C$i=0,C$e=0,C$n=0;C$n<C$t.length;++C$n)var C$r=C$p.safeMeasureText(C$m,C$t[C$n],C$y),C$i=C$r<C$i?C$i:C$r;var C$e=(C$l.length+C$p.BASELINE_RATIO)*this._getLineHeight(),C$s=parseFloat(C$i.toFixed(2)),C$e=parseFloat(C$e.toFixed(2));C$v.width=C$s+C$x.width,C$v.height=C$e+C$x.height,C$G.width=C$s+C$k.width,C$G.height=C$e+C$k.height}C$v.width=Math.min(C$v.width,2048),C$v.height=Math.min(C$v.height,2048),C$w.width!==C$v.width&&(C$w.width=C$v.width),C$w.height!==C$v.height&&(C$w.height=C$v.height)},C$t._calculateTextBaseline=function(){var C$t=C$R===C$d.TextAlignment.RIGHT?"right":C$R===C$d.TextAlignment.CENTER?"center":"left";C$m.textAlign=C$t,C$m.textBaseline="alphabetic"},C$t._calculateSplitedStrings=function(){var C$t=C$M.split("\n");if(C$O){C$l=[];for(var C$e=C$G.width,C$i=0;C$i<C$t.length;++C$i){var C$n=C$p.safeMeasureText(C$m,C$t[C$i],C$y),C$n=C$p.fragmentText(C$t[C$i],C$n,C$e,this._measureText(C$m,C$y));C$l=C$l.concat(C$n)}}else C$l=C$t},C$t._getFontDesc=function(){var C$t=C$g.toString()+"px ";return C$t+=C$L,C$z&&(C$t="bold "+C$t),C$t=C$U?"italic "+C$t:C$t},C$t._getLineHeight=function(){return 0|(0===C$B?C$g:C$B*C$g/C$I)},C$t._calculateParagraphLength=function(C$t,C$e){for(var C$i=[],C$n=0;C$n<C$t.length;++C$n){var C$r=C$p.safeMeasureText(C$e,C$t[C$n],C$y);C$i.push(C$r)}return C$i},C$t._measureText=function(C$e,C$i){return function(C$t){return C$p.safeMeasureText(C$e,C$t,C$i)}},C$t._calculateLabelFont=function(){if(C$y=this._getFontDesc(),C$m.font=C$y,C$V===C$A.SHRINK){var C$t=C$M.split("\n"),C$h=this._calculateParagraphLength(C$t,C$m),C$e=0,C$i=0,C$n=0;if(C$O){var C$r=C$G.width,C$s=C$G.height;if(C$r<0||C$s<0)return C$y=this._getFontDesc(),void(C$m.font=C$y);for(var C$o,C$i=C$s+1,C$n=C$r+1,C$a=0,C$c=0|C$g+1;C$a<C$c;){if((C$o=C$a+C$c+1>>1)<=0){cc.logID(4003);break}for(C$g=C$o,C$y=this._getFontDesc(),C$m.font=C$y,C$e=C$i=0;C$e<C$t.length;++C$e)for(var C$l=0,C$u=C$p.safeMeasureText(C$m,C$t[C$e],C$y),C$_=C$p.fragmentText(C$t[C$e],C$u,C$r,this._measureText(C$m,C$y));C$l<C$_.length;)C$n=C$p.safeMeasureText(C$m,C$_[C$l],C$y),C$i+=this._getLineHeight(),++C$l;C$s<C$i?C$c=C$o-1:C$a=C$o}0===C$a?cc.logID(4003):(C$g=C$a,C$y=this._getFontDesc(),C$m.font=C$y)}else{for(C$i=C$t.length*this._getLineHeight(),C$e=0;C$e<C$t.length;++C$e)C$n<C$h[C$e]&&(C$n=C$h[C$e]);var C$d=(C$v.width-C$x.width)/C$n,C$f=C$v.height/C$i;C$g=C$I*Math.min(1,C$d,C$f)|0,C$y=this._getFontDesc(),C$m.font=C$y}}},C$X);function C$X(){return C$a.apply(this,arguments)||this}C$n.default=C$e,C$i.exports=C$n.default},{"../../../components/CCLabel":80,"../../../components/CCLabelOutline":81,"../../../components/CCLabelShadow":82,"../../../platform/CCMacro":194,"../../../utils/text-utils":271,"../../assembler-2d":215,"../utils":228}],228:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./dynamic-atlas/manager"),C$t=cc.Color.WHITE;C$e.exports={deleteFromDynamicAtlas:function(C$t,C$e){C$e&&C$e._original&&C$n&&(C$n.deleteAtlasSpriteFrame(C$e),C$e._resetDynamicAtlasFrame())},getFontFamily:function(C$i){return C$i.useSystemFont?C$i.fontFamily||"Arial":C$i.font?C$i.font._nativeAsset||(cc.loader.load(C$i.font.nativeUrl,function(C$t,C$e){C$i.font._nativeAsset=C$e,C$i.setVertsDirty()}),"Arial"):"Arial"},shareLabelInfo:{fontAtlas:null,fontSize:0,lineHeight:0,hAlign:0,vAlign:0,hash:"",fontFamily:"",fontDesc:"Arial",color:C$t,isOutlined:!1,out:C$t,margin:0}}},{"./dynamic-atlas/manager":223}],229:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e,C$i){C$i=C$i||2;var C$n,C$r,C$s,C$o,C$h,C$u=C$e&&C$e.length,C$_=C$u?C$e[0]*C$i:C$t.length,C$a=C$S(C$t,0,C$_,C$i,!0),C$d=[];if(!C$a)return C$d;if(C$u&&(C$a=function(C$t,C$e,C$i,C$n){var C$r,C$s,C$o,C$a,C$c=[];for(C$r=0,C$s=C$e.length;C$r<C$s;C$r++)C$a=C$e[C$r]*C$n,C$o=C$r<C$s-1?C$e[C$r+1]*C$n:C$t.length,(C$a=C$S(C$t,C$a,C$o,C$n,!1))===C$a.next&&(C$a.steiner=!0),C$c.push(function(C$t){var C$e=C$t,C$i=C$t;for(;C$e.x<C$i.x&&(C$i=C$e),C$e=C$e.next,C$e!==C$t;);return C$i}(C$a));for(C$c.sort(C$T),C$r=0;C$r<C$c.length;C$r++)!function(C$t,C$e){(C$e=function(C$t,C$h){var C$e,C$i=C$h,C$n=C$t.x,C$r=C$t.y,C$s=-1/0;do{if(C$r<=C$i.y&&C$r>=C$i.next.y){var C$o=C$i.x+(C$r-C$i.y)*(C$i.next.x-C$i.x)/(C$i.next.y-C$i.y);if(C$o<=C$n&&C$s<C$o){if((C$s=C$o)===C$n){if(C$r===C$i.y)return C$i;if(C$r===C$i.next.y)return C$i.next}C$e=C$i.x<C$i.next.x?C$i:C$i.next}}}while(C$i=C$i.next,C$i!==C$h);if(!C$e)return null;if(C$n===C$s)return C$e.prev;var C$a,C$u=C$e,C$_=C$e.x,C$c=C$e.y,C$l=1/0;C$i=C$e.next;for(;C$i!==C$u;)C$n>=C$i.x&&C$i.x>=C$_&&C$g(C$r<C$c?C$n:C$s,C$r,C$_,C$c,C$r<C$c?C$s:C$n,C$r,C$i.x,C$i.y)&&((C$a=Math.abs(C$r-C$i.y)/(C$n-C$i.x))<C$l||C$a===C$l&&C$i.x>C$e.x)&&C$b(C$i,C$t)&&(C$e=C$i,C$l=C$a),C$i=C$i.next;return C$e}(C$t,C$e))&&C$p(C$e=C$E(C$e,C$t),C$e.next)}(C$c[C$r],C$i),C$i=C$p(C$i,C$i.next);return C$i}(C$t,C$e,C$a,C$i)),C$t.length>80*C$i){for(var C$c=C$n=C$t[0],C$l=C$r=C$t[1],C$f=C$i;C$f<C$_;C$f+=C$i)(C$s=C$t[C$f])<C$c&&(C$c=C$s),(C$o=C$t[C$f+1])<C$l&&(C$l=C$o),C$n<C$s&&(C$n=C$s),C$r<C$o&&(C$r=C$o);C$h=Math.max(C$n-C$c,C$r-C$l)}return C$m(C$a,C$d,C$i,C$c,C$l,C$h),C$d}function C$S(C$t,C$e,C$i,C$n,C$r){var C$s,C$o;if(C$r===0<C$C(C$t,C$e,C$i,C$n))for(C$s=C$e;C$s<C$i;C$s+=C$n)C$o=C$a(C$s,C$t[C$s],C$t[C$s+1],C$o);else for(C$s=C$i-C$n;C$e<=C$s;C$s-=C$n)C$o=C$a(C$s,C$t[C$s],C$t[C$s+1],C$o);return C$o&&C$x(C$o,C$o.next)&&(C$A(C$o),C$o=C$o.next),C$o}function C$p(C$t,C$e){if(!C$t)return C$t;C$e=C$e||C$t;var C$i,C$n=C$t;do{if(C$i=!1,C$n.steiner||!C$x(C$n,C$n.next)&&0!==C$v(C$n.prev,C$n,C$n.next))C$n=C$n.next;else{if(C$A(C$n),(C$n=C$e=C$n.prev)===C$n.next)return null;C$i=!0}}while(C$i||C$n!==C$e);return C$e}function C$m(C$t,C$e,C$i,C$n,C$r,C$s,C$o){if(C$t){if(!C$o&&C$s){var C$a=C$t;var C$h=C$n;var C$u=C$r;var C$_=C$s;var C$c=C$a;for(;null===C$c.z&&(C$c.z=C$y(C$c.x,C$c.y,C$h,C$u,C$_)),C$c.prevZ=C$c.prev,C$c.nextZ=C$c.next,C$c=C$c.next,C$c!==C$a;);C$c.prevZ.nextZ=null,C$c.prevZ=null,function(C$t){var C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l=1;do{for(C$i=C$t,C$s=C$t=null,C$o=0;C$i;){for(C$o++,C$n=C$i,C$e=C$a=0;C$e<C$l&&(C$a++,C$n=C$n.nextZ);C$e++);for(C$c=C$l;0<C$a||0<C$c&&C$n;)0!==C$a&&(0===C$c||!C$n||C$i.z<=C$n.z)?(C$i=(C$r=C$i).nextZ,C$a--):(C$n=(C$r=C$n).nextZ,C$c--),C$s?C$s.nextZ=C$r:C$t=C$r,C$r.prevZ=C$s,C$s=C$r;C$i=C$n}}while(C$s.nextZ=null,C$l*=2,1<C$o)}(C$c)}for(var C$d,C$l,C$f=C$t;C$t.prev!==C$t.next;)if(C$d=C$t.prev,C$l=C$t.next,C$s?function(C$t,C$e,C$i,C$n){var C$r=C$t.prev,C$s=C$t,C$o=C$t.next;if(0<=C$v(C$r,C$s,C$o))return!1;var C$a=(C$r.x<C$s.x?C$r.x<C$o.x?C$r:C$o:C$s.x<C$o.x?C$s:C$o).x,C$c=(C$r.y<C$s.y?C$r.y<C$o.y?C$r:C$o:C$s.y<C$o.y?C$s:C$o).y,C$h=(C$r.x>C$s.x?C$r.x>C$o.x?C$r:C$o:C$s.x>C$o.x?C$s:C$o).x,C$u=(C$r.y>C$s.y?C$r.y>C$o.y?C$r:C$o:C$s.y>C$o.y?C$s:C$o).y,C$_=C$y(C$a,C$c,C$e,C$i,C$n),C$d=C$y(C$h,C$u,C$e,C$i,C$n),C$l=C$t.nextZ;for(;C$l&&C$l.z<=C$d;){if(C$l!==C$t.prev&&C$l!==C$t.next&&C$g(C$r.x,C$r.y,C$s.x,C$s.y,C$o.x,C$o.y,C$l.x,C$l.y)&&0<=C$v(C$l.prev,C$l,C$l.next))return!1;C$l=C$l.nextZ}C$l=C$t.prevZ;for(;C$l&&C$l.z>=C$_;){if(C$l!==C$t.prev&&C$l!==C$t.next&&C$g(C$r.x,C$r.y,C$s.x,C$s.y,C$o.x,C$o.y,C$l.x,C$l.y)&&0<=C$v(C$l.prev,C$l,C$l.next))return!1;C$l=C$l.prevZ}return!0}(C$t,C$n,C$r,C$s):function(C$t){var C$e=C$t.prev,C$i=C$t,C$n=C$t.next;if(0<=C$v(C$e,C$i,C$n))return!1;var C$r=C$t.next.next;for(;C$r!==C$t.prev;){if(C$g(C$e.x,C$e.y,C$i.x,C$i.y,C$n.x,C$n.y,C$r.x,C$r.y)&&0<=C$v(C$r.prev,C$r,C$r.next))return!1;C$r=C$r.next}return!0}(C$t))C$e.push(C$d.i/C$i),C$e.push(C$t.i/C$i),C$e.push(C$l.i/C$i),C$A(C$t),C$t=C$l.next,C$f=C$l.next;else if((C$t=C$l)===C$f){C$o?1===C$o?C$m(C$t=function(C$t,C$e,C$i){var C$n=C$t;do{var C$r=C$n.prev,C$s=C$n.next.next}while(!C$x(C$r,C$s)&&C$w(C$r,C$n,C$n.next,C$s)&&C$b(C$r,C$s)&&C$b(C$s,C$r)&&(C$e.push(C$r.i/C$i),C$e.push(C$n.i/C$i),C$e.push(C$s.i/C$i),C$A(C$n),C$A(C$n.next),C$n=C$t=C$s),C$n=C$n.next,C$n!==C$t);return C$n}(C$t,C$e,C$i),C$e,C$i,C$n,C$r,C$s,2):2===C$o&&function(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=C$t;do{for(var C$a,C$c=C$o.next.next;C$c!==C$o.prev;){if(C$o.i!==C$c.i&&function(C$t,C$e){return C$t.next.i!==C$e.i&&C$t.prev.i!==C$e.i&&!function(C$t,C$e){var C$i=C$t;do{if(C$i.i!==C$t.i&&C$i.next.i!==C$t.i&&C$i.i!==C$e.i&&C$i.next.i!==C$e.i&&C$w(C$i,C$i.next,C$t,C$e))return!0}while(C$i=C$i.next,C$i!==C$t);return!1}(C$t,C$e)&&C$b(C$t,C$e)&&C$b(C$e,C$t)&&function(C$t,C$e){var C$i=C$t,C$n=!1,C$r=(C$t.x+C$e.x)/2,C$s=(C$t.y+C$e.y)/2;for(;C$i.y>C$s!=C$i.next.y>C$s&&C$r<(C$i.next.x-C$i.x)*(C$s-C$i.y)/(C$i.next.y-C$i.y)+C$i.x&&(C$n=!C$n),C$i=C$i.next,C$i!==C$t;);return C$n}(C$t,C$e)}(C$o,C$c))return C$a=C$E(C$o,C$c),C$o=C$p(C$o,C$o.next),C$a=C$p(C$a,C$a.next),C$m(C$o,C$e,C$i,C$n,C$r,C$s),C$m(C$a,C$e,C$i,C$n,C$r,C$s);C$c=C$c.next}}while(C$o=C$o.next,C$o!==C$t)}(C$t,C$e,C$i,C$n,C$r,C$s):C$m(C$p(C$t),C$e,C$i,C$n,C$r,C$s,1);break}}}function C$T(C$t,C$e){return C$t.x-C$e.x}function C$y(C$t,C$e,C$i,C$n,C$r){return(C$t=1431655765&((C$t=858993459&((C$t=252645135&((C$t=16711935&((C$t=32767*(C$t-C$i)/C$r)|C$t<<8))|C$t<<4))|C$t<<2))|C$t<<1))|(C$e=1431655765&((C$e=858993459&((C$e=252645135&((C$e=16711935&((C$e=32767*(C$e-C$n)/C$r)|C$e<<8))|C$e<<4))|C$e<<2))|C$e<<1))<<1}function C$g(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){return 0<=(C$r-C$o)*(C$e-C$a)-(C$t-C$o)*(C$s-C$a)&&0<=(C$t-C$o)*(C$n-C$a)-(C$i-C$o)*(C$e-C$a)&&0<=(C$i-C$o)*(C$s-C$a)-(C$r-C$o)*(C$n-C$a)}function C$v(C$t,C$e,C$i){return(C$e.y-C$t.y)*(C$i.x-C$e.x)-(C$e.x-C$t.x)*(C$i.y-C$e.y)}function C$x(C$t,C$e){return C$t.x===C$e.x&&C$t.y===C$e.y}function C$w(C$t,C$e,C$i,C$n){return C$x(C$t,C$e)&&C$x(C$i,C$n)||C$x(C$t,C$n)&&C$x(C$i,C$e)||0<C$v(C$t,C$e,C$i)!=0<C$v(C$t,C$e,C$n)&&0<C$v(C$i,C$n,C$t)!=0<C$v(C$i,C$n,C$e)}function C$b(C$t,C$e){return C$v(C$t.prev,C$t,C$t.next)<0?0<=C$v(C$t,C$e,C$t.next)&&0<=C$v(C$t,C$t.prev,C$e):C$v(C$t,C$e,C$t.prev)<0||C$v(C$t,C$t.next,C$e)<0}function C$E(C$t,C$e){var C$i=new C$o(C$t.i,C$t.x,C$t.y),C$n=new C$o(C$e.i,C$e.x,C$e.y),C$r=C$t.next,C$s=C$e.prev;return(C$t.next=C$e).prev=C$t,(C$i.next=C$r).prev=C$i,(C$n.next=C$i).prev=C$n,(C$s.next=C$n).prev=C$s,C$n}function C$a(C$t,C$e,C$i,C$n){C$t=new C$o(C$t,C$e,C$i);return C$n?(C$t.next=C$n.next,(C$t.prev=C$n).next.prev=C$t,C$n.next=C$t):(C$t.prev=C$t).next=C$t,C$t}function C$A(C$t){C$t.next.prev=C$t.prev,C$t.prev.next=C$t.next,C$t.prevZ&&(C$t.prevZ.nextZ=C$t.nextZ),C$t.nextZ&&(C$t.nextZ.prevZ=C$t.prevZ)}function C$o(C$t,C$e,C$i){this.i=C$t,this.x=C$e,this.y=C$i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C$C(C$t,C$e,C$i,C$n){for(var C$r=0,C$s=C$e,C$o=C$i-C$n;C$s<C$i;C$s+=C$n)C$r+=(C$t[C$o]-C$t[C$s])*(C$t[C$s+1]+C$t[C$o+1]),C$o=C$s;return C$r}(cc.Graphics.earcut=C$e.exports=C$n).deviation=function(C$t,C$e,C$i,C$n){var C$r=C$e&&C$e.length,C$h=C$r?C$e[0]*C$i:C$t.length,C$s=Math.abs(C$C(C$t,0,C$h,C$i));if(C$r)for(var C$o=0,C$a=C$e.length;C$o<C$a;C$o++){var C$u=C$e[C$o]*C$i,C$_=C$o<C$a-1?C$e[C$o+1]*C$i:C$t.length;C$s-=Math.abs(C$C(C$t,C$u,C$_,C$i))}for(var C$c=0,C$o=0;C$o<C$n.length;C$o+=3){var C$l=C$n[C$o]*C$i,C$d=C$n[C$o+1]*C$i,C$f=C$n[C$o+2]*C$i;C$c+=Math.abs((C$t[C$l]-C$t[C$f])*(C$t[1+C$d]-C$t[1+C$l])-(C$t[C$l]-C$t[C$d])*(C$t[1+C$f]-C$t[1+C$l]))}return 0===C$s&&0===C$c?0:Math.abs((C$c-C$s)/C$s)},C$n.flatten=function(C$t){for(var C$e=C$t[0][0].length,C$i={vertices:[],holes:[],dimensions:C$e},C$n=0,C$r=0;C$r<C$t.length;C$r++){for(var C$s=0;C$s<C$t[C$r].length;C$s++)for(var C$o=0;C$o<C$e;C$o++)C$i.vertices.push(C$t[C$r][C$s][C$o]);0<C$r&&(C$n+=C$t[C$r-1].length,C$i.holes.push(C$n))}return C$i}},{}],230:[function(C$t,C$e,C$i){"use strict";var C$a=C$t("../../../../graphics/helper"),C$c=C$t("../../../../graphics/types").PointFlags,C$o=cc.Graphics.Point=cc.Class({name:"cc.GraphicsPoint",extends:cc.Vec2,ctor:function(C$t,C$e){this.reset()},reset:function(){this.dx=0,this.dy=0,this.dmx=0,this.dmy=0,this.flags=0,this.len=0}});function C$n(){this.reset()}function C$r(C$t){this._tessTol=.25,this._distTol=.01,this._updatePathOffset=!1,this._paths=null,this._pathLength=0,this._pathOffset=0,this._points=null,this._pointsOffset=0,this._commandx=0,this._commandy=0,this._paths=[],this._points=[]}cc.js.mixin(C$n.prototype,{reset:function(){this.closed=!1,this.nbevel=0,this.complex=!0,this.points?this.points.length=0:this.points=[]}}),cc.js.mixin(C$r.prototype,{moveTo:function(C$t,C$e){this._updatePathOffset&&(this._pathOffset=this._pathLength,this._updatePathOffset=!1),this._addPath(),this._addPoint(C$t,C$e,C$c.PT_CORNER),this._commandx=C$t,this._commandy=C$e},lineTo:function(C$t,C$e){this._addPoint(C$t,C$e,C$c.PT_CORNER),this._commandx=C$t,this._commandy=C$e},bezierCurveTo:function(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=this._curPath,C$o=C$o.points[C$o.points.length-1];C$o.x!==C$t||C$o.y!==C$e||C$i!==C$r||C$n!==C$s?(C$a.tesselateBezier(this,C$o.x,C$o.y,C$t,C$e,C$i,C$n,C$r,C$s,0,C$c.PT_CORNER),this._commandx=C$r,this._commandy=C$s):this.lineTo(C$r,C$s)},quadraticCurveTo:function(C$t,C$e,C$i,C$n){var C$r=this._commandx,C$s=this._commandy;this.bezierCurveTo(C$r+2/3*(C$t-C$r),C$s+2/3*(C$e-C$s),C$i+2/3*(C$t-C$i),C$n+2/3*(C$e-C$n),C$i,C$n)},arc:function(C$t,C$e,C$i,C$n,C$r,C$s){C$a.arc(this,C$t,C$e,C$i,C$n,C$r,C$s)},ellipse:function(C$t,C$e,C$i,C$n){C$a.ellipse(this,C$t,C$e,C$i,C$n),this._curPath.complex=!1},circle:function(C$t,C$e,C$i){C$a.ellipse(this,C$t,C$e,C$i,C$i),this._curPath.complex=!1},rect:function(C$t,C$e,C$i,C$n){this.moveTo(C$t,C$e),this.lineTo(C$t,C$e+C$n),this.lineTo(C$t+C$i,C$e+C$n),this.lineTo(C$t+C$i,C$e),this.close(),this._curPath.complex=!1},roundRect:function(C$t,C$e,C$i,C$n,C$r){C$a.roundRect(this,C$t,C$e,C$i,C$n,C$r),this._curPath.complex=!1},clear:function(C$t){this._pathLength=0,this._pathOffset=0,this._pointsOffset=0,this._curPath=null,C$t&&(this._paths.length=0,this._points.length=0)},close:function(){this._curPath.closed=!0},_addPath:function(){var C$t=this._pathLength,C$t=this._paths[C$t];return C$t?C$t.reset():(C$t=new C$n,this._paths.push(C$t)),this._pathLength++,this._curPath=C$t},_addPoint:function(C$t,C$e,C$i){var C$n,C$r,C$s=this._curPath;C$s&&(C$n=this._points,C$s=C$s.points,(C$r=C$n[this._pointsOffset++])?(C$r.x=C$t,C$r.y=C$e):(C$r=new C$o(C$t,C$e),C$n.push(C$r)),C$r.flags=C$i,C$s.push(C$r))}}),cc.Graphics._Impl=C$r,C$e.exports=C$r},{"../../../../graphics/helper":132,"../../../../graphics/types":134}],231:[function(C$t,C$n,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$r=C$o(C$t("../../../assembler")),C$s=C$o(C$t("../../../../../renderer/core/input-assembler"));function C$o(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$a(C$i){return function(){var C$t,C$e=C$c(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$c(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$c(C$t){return(C$c=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$l=C$t("../../mesh-buffer"),C$h=C$t("../../vertex-format").vfmtPosColor,C$u=C$t("../../../index"),C$i=C$t("../../../../graphics/graphics"),C$L=C$t("../../../../graphics/types").PointFlags,C$V=C$i.LineJoin,C$O=C$i.LineCap,C$B=C$t("./earcut"),C$F=(C$t("./impl"),Math.PI),C$g=Math.min,C$N=Math.max,C$k=Math.ceil,C$G=Math.acos,C$E=Math.cos,C$M=Math.sin,C$I=Math.atan2;function C$R(C$t,C$e,C$i){return C$t<C$e?C$e:C$i<C$t?C$i:C$t}C$_=C$r.default,C$i=C$_,(C$t=C$d).prototype=Object.create(C$i.prototype),(C$t.prototype.constructor=C$t).__proto__=C$i,C$a(C$d),(C$t=C$d.prototype).getVfmt=function(){return C$h},C$t.requestBuffer=function(){var C$t={indiceStart:0,vertexStart:0},C$e=new C$l(C$u._handle,C$h),C$e=(C$t.meshbuffer=C$e,new C$s.default(C$e._vb,C$e._ib));return C$t.ia=C$e,this._buffers.push(C$t),C$t},C$t.getBuffers=function(){return 0===this._buffers.length&&this.requestBuffer(),this._buffers},C$t.clear=function(C$t){this._bufferOffset=0;var C$e=this._buffers;if(C$t){for(var C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];C$r.meshbuffer.destroy(),C$r.meshbuffer=null}C$e.length=0}else for(var C$s=0,C$o=C$e.length;C$s<C$o;C$s++){var C$a=C$e[C$s];C$a.indiceStart=0,C$a.vertexStart=0,C$a.meshbuffer.reset()}},C$t.fillBuffers=function(C$t,C$e){C$e._flush(),C$e.node=C$t.node,C$e.material=C$t._materials[0];for(var C$i=this.getBuffers(),C$n=0,C$r=C$i.length;C$n<C$r;C$n++){var C$s=C$i[C$n],C$o=C$s.meshbuffer;C$s.ia._count=C$s.indiceStart,C$e._flushIA(C$s.ia),C$o.uploadData()}},C$t.genBuffer=function(C$t,C$e){var C$i=this.getBuffers(),C$n=C$i[this._bufferOffset],C$r=C$n.meshbuffer,C$s=C$n.vertexStart+C$e;return(65535<C$s||131070<3*C$s)&&(++this._bufferOffset,C$s=C$e,this._bufferOffset<C$i.length?C$n=C$i[this._bufferOffset]:(C$n=this.requestBuffer(C$t),C$i[this._bufferOffset]=C$n),C$r=C$n.meshbuffer),C$s>C$r.vertexOffset&&C$r.requestStatic(C$e,3*C$e),this._buffer=C$n},C$t.stroke=function(C$t){this._curColor=C$t._strokeColor._val,this._flattenPaths(C$t._impl),this._expandStroke(C$t),C$t._impl._updatePathOffset=!0},C$t.fill=function(C$t){this._curColor=C$t._fillColor._val,this._expandFill(C$t),C$t._impl._updatePathOffset=!0},C$t._expandStroke=function(C$t){for(var C$h,C$u,C$e=.5*C$t.lineWidth,C$i=C$t.lineCap,C$_=C$t.lineJoin,C$d=C$t.miterLimit,C$n=C$t._impl,C$f=(C$h=C$e,C$u=C$F,C$A=C$n._tessTol,C$h=2*C$G(C$e/(C$e+C$A)),C$N(2,C$k(C$u/C$h))),C$p=(this._calculateJoins(C$n,C$e,C$_,C$d),C$n._paths),C$m=0,C$y=C$n._pathOffset,C$g=C$n._pathLength;C$y<C$g;C$y++){var C$v=C$p[C$y],C$x=C$v.points.length;C$_===C$V.ROUND?C$m+=2*(C$x+C$v.nbevel*(C$f+2)+1):C$m+=2*(C$x+5*C$v.nbevel+1),C$v.closed||(C$i===C$O.ROUND?C$m+=2*(2*C$f+2):C$m+=12)}for(var C$b=this.genBuffer(C$t,C$m),C$A=C$b.meshbuffer,C$C=C$A._vData,C$S=C$A._iData,C$T=C$n._pathOffset,C$w=C$n._pathLength;C$T<C$w;C$T++){var C$r=C$p[C$T],C$E=C$r.points,C$s=C$E.length,C$M=C$b.vertexStart,C$o=void 0,C$a=void 0,C$c=void 0,C$I=void 0,C$I=(C$r=C$r.closed)?(C$o=C$E[C$s-1],C$a=C$E[0],C$c=0,C$s):(C$o=C$E[0],C$a=C$E[1],C$s-(C$c=1)),C$a=C$a||C$o;C$r||((C$s=C$a.sub(C$o)).normalizeSelf(),C$l=C$s.x,C$s=C$s.y,C$i===C$O.BUTT?this._buttCapStart(C$o,C$l,C$s,C$e,0):C$i===C$O.SQUARE?this._buttCapStart(C$o,C$l,C$s,C$e,C$e):C$i===C$O.ROUND&&this._roundCapStart(C$o,C$l,C$s,C$e,C$f));for(var C$l,C$B=C$c;C$B<C$I;++C$B)C$_===C$V.ROUND?this._roundJoin(C$o,C$a,C$e,C$e,C$f):0!=(C$a.flags&(C$L.PT_BEVEL|C$L.PT_INNERBEVEL))?this._bevelJoin(C$o,C$a,C$e,C$e):(this._vset(C$a.x+C$a.dmx*C$e,C$a.y+C$a.dmy*C$e),this._vset(C$a.x-C$a.dmx*C$e,C$a.y-C$a.dmy*C$e)),C$o=C$a,C$a=C$E[C$B+1];C$r?(this._vset(C$C[C$l=3*C$M],C$C[1+C$l]),this._vset(C$C[3+C$l],C$C[4+C$l])):((C$s=C$a.sub(C$o)).normalizeSelf(),C$c=C$s.x,C$r=C$s.y,C$i===C$O.BUTT?this._buttCapEnd(C$a,C$c,C$r,C$e,0):C$i===C$O.SQUARE?this._buttCapEnd(C$a,C$c,C$r,C$e,C$e):C$i===C$O.ROUND&&this._roundCapEnd(C$a,C$c,C$r,C$e,C$f));for(var C$R=C$b.indiceStart,C$P=C$M+2,C$D=C$b.vertexStart;C$P<C$D;C$P++)C$S[C$R++]=C$P-2,C$S[C$R++]=C$P-1,C$S[C$R++]=C$P;C$b.indiceStart=C$R}},C$t._expandFill=function(C$t){for(var C$e=C$t._impl,C$h=C$e._paths,C$u=0,C$i=C$e._pathOffset,C$_=C$e._pathLength;C$i<C$_;C$i++)C$u+=C$h[C$i].points.length;for(var C$n=this.genBuffer(C$t,C$u),C$t=C$n.meshbuffer,C$d=C$t._vData,C$r=C$t._iData,C$f=C$e._pathOffset,C$p=C$e._pathLength;C$f<C$p;C$f++){var C$m=C$h[C$f],C$y=C$m.points,C$g=C$y.length;if(0!==C$g){for(var C$s=C$n.vertexStart,C$o=0;C$o<C$g;++C$o)this._vset(C$y[C$o].x,C$y[C$o].y);var C$a=C$n.indiceStart;if(C$m.complex){for(var C$v=[],C$x=C$s,C$b=C$n.vertexStart;C$x<C$b;C$x++){var C$A=3*C$x;C$v.push(C$d[C$A]),C$v.push(C$d[1+C$A])}var C$c=C$B(C$v,null,2);if(!C$c||0===C$c.length)continue;for(var C$C=0,C$S=C$c.length;C$C<C$S;C$C++)C$r[C$a++]=C$c[C$C]+C$s}else for(var C$T=C$s,C$l=C$s+2,C$w=C$n.vertexStart;C$l<C$w;C$l++)C$r[C$a++]=C$T,C$r[C$a++]=C$l-1,C$r[C$a++]=C$l;C$n.indiceStart=C$a}}},C$t._calculateJoins=function(C$t,C$h,C$u,C$_){for(var C$d=0,C$f=(0<C$h&&(C$d=1/C$h),C$t._paths),C$e=C$t._pathOffset,C$p=C$t._pathLength;C$e<C$p;C$e++)for(var C$i=C$f[C$e],C$n=C$i.points,C$m=C$n.length,C$r=C$n[C$m-1],C$s=C$n[0],C$o=C$i.nbevel=0;C$o<C$m;C$o++){var C$a=C$r.dy,C$c=-C$r.dx,C$l=C$s.dy,C$y=-C$s.dx;C$s.dmx=.5*(C$a+C$l),C$s.dmy=.5*(C$c+C$y),1e-6<(C$a=C$s.dmx*C$s.dmx+C$s.dmy*C$s.dmy)&&(600<(C$l=1/C$a)&&(C$l=600),C$s.dmx*=C$l,C$s.dmy*=C$l),0<C$s.dx*C$r.dy-C$r.dx*C$s.dy&&(C$s.flags|=C$L.PT_LEFT),C$a*(C$c=C$N(11,C$g(C$r.len,C$s.len)*C$d))*C$c<1&&(C$s.flags|=C$L.PT_INNERBEVEL),C$s.flags&C$L.PT_CORNER&&(C$a*C$_*C$_<1||C$u===C$V.BEVEL||C$u===C$V.ROUND)&&(C$s.flags|=C$L.PT_BEVEL),0!=(C$s.flags&(C$L.PT_BEVEL|C$L.PT_INNERBEVEL))&&C$i.nbevel++,C$r=C$s,C$s=C$n[C$o+1]}},C$t._flattenPaths=function(C$t){for(var C$e=C$t._paths,C$i=C$t._pathOffset,C$n=C$t._pathLength;C$i<C$n;C$i++){var C$r=C$e[C$i],C$s=C$r.points,C$o=C$s[C$s.length-1],C$a=C$s[0];2<C$s.length&&C$o.equals(C$a)&&(C$r.closed=!0,C$s.pop(),C$o=C$s[C$s.length-1]);for(var C$c=0,C$h=C$s.length;C$c<C$h;C$c++){var C$l=C$a.sub(C$o);C$o.len=C$l.mag(),(C$l.x||C$l.y)&&C$l.normalizeSelf(),C$o.dx=C$l.x,C$o.dy=C$l.y,C$o=C$a,C$a=C$s[C$c+1]}}},C$t._chooseBevel=function(C$t,C$e,C$i,C$n){var C$r,C$s,C$o,C$a,C$c=C$i.x,C$l=C$i.y;return 0!==C$t?(C$r=C$c+C$e.dy*C$n,C$s=C$l-C$e.dx*C$n,C$o=C$c+C$i.dy*C$n,C$a=C$l-C$i.dx*C$n):(C$r=C$o=C$c+C$i.dmx*C$n,C$s=C$a=C$l+C$i.dmy*C$n),[C$r,C$s,C$o,C$a]},C$t._buttCapStart=function(C$t,C$e,C$i,C$n,C$r){var C$s=C$t.x-C$e*C$r,C$t=C$t.y-C$i*C$r,C$r=C$i,C$i=-C$e;this._vset(C$s+C$r*C$n,C$t+C$i*C$n),this._vset(C$s-C$r*C$n,C$t-C$i*C$n)},C$t._buttCapEnd=function(C$t,C$e,C$i,C$n,C$r){var C$s=C$t.x+C$e*C$r,C$t=C$t.y+C$i*C$r,C$r=C$i,C$i=-C$e;this._vset(C$s+C$r*C$n,C$t+C$i*C$n),this._vset(C$s-C$r*C$n,C$t-C$i*C$n)},C$t._roundCapStart=function(C$t,C$e,C$i,C$n,C$h){for(var C$r=C$t.x,C$s=C$t.y,C$o=C$i,C$a=-C$e,C$c=0;C$c<C$h;C$c++){var C$l=C$c/(C$h-1)*C$F,C$u=C$E(C$l)*C$n,C$l=C$M(C$l)*C$n;this._vset(C$r-C$o*C$u-C$e*C$l,C$s-C$a*C$u-C$i*C$l),this._vset(C$r,C$s)}this._vset(C$r+C$o*C$n,C$s+C$a*C$n),this._vset(C$r-C$o*C$n,C$s-C$a*C$n)},C$t._roundCapEnd=function(C$t,C$e,C$i,C$n,C$h){var C$r=C$t.x,C$s=C$t.y,C$o=C$i,C$a=-C$e;this._vset(C$r+C$o*C$n,C$s+C$a*C$n),this._vset(C$r-C$o*C$n,C$s-C$a*C$n);for(var C$c=0;C$c<C$h;C$c++){var C$l=C$c/(C$h-1)*C$F,C$u=C$E(C$l)*C$n,C$l=C$M(C$l)*C$n;this._vset(C$r,C$s),this._vset(C$r-C$o*C$u+C$e*C$l,C$s-C$a*C$u+C$i*C$l)}},C$t._roundJoin=function(C$t,C$e,C$h,C$i,C$n){var C$r=C$t.dy,C$s=-C$t.dx,C$u=C$e.dy,C$_=-C$e.dx,C$o=C$e.x,C$a=C$e.y;if(0!=(C$e.flags&C$L.PT_LEFT)){for(var C$c=this._chooseBevel(C$e.flags&C$L.PT_INNERBEVEL,C$t,C$e,C$h),C$l=C$c[0],C$d=C$c[1],C$f=C$c[2],C$c=C$c[3],C$p=C$I(-C$s,-C$r),C$m=C$I(-C$_,-C$u),C$y=(C$p<C$m&&(C$m-=2*C$F),this._vset(C$l,C$d),this._vset(C$o-C$r*C$i,C$e.y-C$s*C$i),C$R(C$k((C$p-C$m)/C$F)*C$n,2,C$n)),C$g=0;C$g<C$y;C$g++){var C$v=C$p+C$g/(C$y-1)*(C$m-C$p),C$x=C$o+C$E(C$v)*C$i,C$v=C$a+C$M(C$v)*C$i;this._vset(C$o,C$a),this._vset(C$x,C$v)}this._vset(C$f,C$c),this._vset(C$o-C$u*C$i,C$a-C$_*C$i)}else{for(var C$l=this._chooseBevel(C$e.flags&C$L.PT_INNERBEVEL,C$t,C$e,-C$i),C$d=C$l[0],C$f=C$l[1],C$c=C$l[2],C$t=C$l[3],C$b=C$I(C$s,C$r),C$A=C$I(C$_,C$u),C$C=(C$A<C$b&&(C$A+=2*C$F),this._vset(C$o+C$r*C$i,C$a+C$s*C$i),this._vset(C$d,C$f),C$R(C$k((C$A-C$b)/C$F)*C$n,2,C$n)),C$S=0;C$S<C$C;C$S++){var C$T=C$b+C$S/(C$C-1)*(C$A-C$b),C$w=C$o+C$E(C$T)*C$h,C$T=C$a+C$M(C$T)*C$h;this._vset(C$w,C$T),this._vset(C$o,C$a)}this._vset(C$o+C$u*C$i,C$a+C$_*C$i),this._vset(C$c,C$t)}},C$t._bevelJoin=function(C$t,C$e,C$i,C$n){var C$r,C$s,C$o,C$a,C$c=C$t.dy,C$l=-C$t.dx,C$h=C$e.dy,C$u=-C$e.dx;C$e.flags&C$L.PT_LEFT?(C$r=(C$a=this._chooseBevel(C$e.flags&C$L.PT_INNERBEVEL,C$t,C$e,C$i))[0],C$s=C$a[1],C$o=C$a[2],C$a=C$a[3],this._vset(C$r,C$s),this._vset(C$e.x-C$c*C$n,C$e.y-C$l*C$n),this._vset(C$o,C$a),this._vset(C$e.x-C$h*C$n,C$e.y-C$u*C$n)):(C$s=(C$r=this._chooseBevel(C$e.flags&C$L.PT_INNERBEVEL,C$t,C$e,-C$n))[0],C$o=C$r[1],C$a=C$r[2],C$t=C$r[3],this._vset(C$e.x+C$c*C$i,C$e.y+C$l*C$i),this._vset(C$s,C$o),this._vset(C$e.x+C$h*C$i,C$e.y+C$u*C$i),this._vset(C$a,C$t))},C$t._vset=function(C$t,C$e){var C$i=this._buffer,C$n=C$i.meshbuffer,C$r=3*C$i.vertexStart,C$s=C$n._vData,C$o=C$n._uintVData;C$s[C$r]=C$t,C$s[1+C$r]=C$e,C$o[2+C$r]=this._curColor,C$i.vertexStart++,C$n._dirty=!0};var C$_,C$i=C$d;function C$d(C$t){C$t=C$_.call(this,C$t)||this;return C$t._buffer=null,C$t._buffers=[],C$t._bufferOffset=0,C$t}C$e.default=C$i,C$r.default.register(cc.Graphics,C$i),C$n.exports=C$e.default},{"../../../../../renderer/core/input-assembler":302,"../../../../graphics/graphics":131,"../../../../graphics/types":134,"../../../assembler":217,"../../../index":220,"../../mesh-buffer":247,"../../vertex-format":252,"./earcut":229,"./impl":230}],232:[function(C$t,C$e,C$i){"use strict";cc.assemblers={},C$t("./sprite"),C$t("./mask-assembler"),C$t("./graphics"),C$t("./label"),C$t("./motion-streak")},{"./graphics":231,"./label":236,"./mask-assembler":237,"./motion-streak":238,"./sprite":245}],233:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=(C$t=C$t("../../../../utils/label/bmfont"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$s,C$o,C$b=0,C$t=(C$s=C$t.default,C$t=C$s,(C$o=C$a).prototype=Object.create(C$t.prototype),(C$o.prototype.constructor=C$o).__proto__=C$t,C$n(C$a),(C$o=C$a.prototype).initData=function(){this._renderData.createFlexData(0,4,6,this.getVfmt())},C$o._reserveQuads=function(C$t,C$e){for(var C$i=4*C$e,C$e=6*C$e,C$n=this._renderData._flexBuffer,C$r=(C$n.reserve(C$i,C$e),C$n.used(C$i,C$e),this._renderData.iDatas[0]),C$s=0,C$o=0,C$a=C$e;C$s<C$a;C$s+=6,C$o+=4)C$r[C$s]=C$o,C$r[C$s+1]=C$o+1,C$r[C$s+2]=C$o+2,C$r[C$s+3]=C$o+1,C$r[C$s+4]=C$o+3,C$r[C$s+5]=C$o+2;C$b=0},C$o._quadsUpdated=function(C$t){C$b=0,this._renderData._flexBuffer.used(this.verticesCount,this.indicesCount)},C$o._getColor=function(C$t){return C$t.node._color._val},C$o.appendQuad=function(C$h,C$t,C$e,C$u,C$_,C$d,C$f){for(var C$i,C$n,C$r,C$s,C$o=this._renderData,C$a=C$o.vDatas[0],C$p=C$o.uintVDatas[0],C$o=(this.verticesCount+=4,this.indicesCount=this.verticesCount/2*3,C$t.width),C$t=C$t.height,C$m=C$e.width,C$y=C$e.height,C$g=this._getColor(C$h),C$c=this.floatsPerVert,C$l=C$b+this.uvOffset,C$v=(C$u?(C$i=C$e.x/C$o,C$r=(C$e.x+C$y)/C$o,C$n=(C$e.y+C$m)/C$t,C$s=C$e.y/C$t,C$a[C$l]=C$i,C$a[C$l+1]=C$s,C$a[C$l+=C$c]=C$i,C$a[C$l+1]=C$n,C$a[C$l+=C$c]=C$r,C$a[C$l+1]=C$s,C$a[C$l+=C$c]=C$r,C$a[C$l+1]=C$n):(C$i=C$e.x/C$o,C$r=(C$e.x+C$m)/C$o,C$n=(C$e.y+C$y)/C$t,C$s=C$e.y/C$t,C$a[C$l]=C$i,C$a[C$l+1]=C$n,C$a[C$l+=C$c]=C$r,C$a[C$l+1]=C$n,C$a[C$l+=C$c]=C$i,C$a[C$l+1]=C$s,C$a[C$l+=C$c]=C$r,C$a[C$l+1]=C$s),this.appendVerts(C$h,C$b,C$i=C$_,C$r=C$_+C$m*C$f,C$n=C$d-C$y*C$f,C$s=C$d),C$b+this.colorOffset),C$x=0;C$x<4;C$x++)C$p[C$v]=C$g,C$v+=C$c;C$b+=4*this.floatsPerVert},C$o.appendVerts=function(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=this._local,C$a=this.floatsPerVert;C$o[C$e]=C$i,C$o[C$e+1]=C$r,C$o[C$e+=C$a]=C$n,C$o[C$e+1]=C$r,C$o[C$e+=C$a]=C$i,C$o[C$e+1]=C$s,C$o[C$e+=C$a]=C$n,C$o[C$e+1]=C$s},C$o.updateWorldVerts=function(C$t){for(var C$t=C$t.node._worldMatrix.m,C$e=C$t[0],C$i=C$t[1],C$n=C$t[4],C$r=C$t[5],C$h=C$t[12],C$u=C$t[13],C$s=this._local,C$o=this._renderData.vDatas[0],C$_=this.floatsPerVert,C$a=0;C$a<C$s.length;C$a+=C$_){var C$c=C$s[C$a],C$l=C$s[C$a+1];C$o[C$a]=C$c*C$e+C$l*C$n+C$h,C$o[C$a+1]=C$c*C$i+C$l*C$r+C$u}},C$a);function C$a(){return C$s.apply(this,arguments)||this}C$i.default=C$t,C$e.exports=C$i.default},{"../../../../utils/label/bmfont":224}],234:[function(C$t,C$e,C$i){"use strict";function C$n(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$i.__esModule=!0,C$i.default=void 0;C$t("../../../../../platform/js"),C$t("./bmfont");var C$s,C$o,C$t=C$t("../../../../utils/label/letter-font"),C$a=cc.color(255,255,255,255),C$t=(C$t=C$s=C$t,(C$o=C$c).prototype=Object.create(C$t.prototype),(C$o.prototype.constructor=C$o).__proto__=C$t,C$n(C$c),(C$o=C$c.prototype).createData=function(C$t){return C$t.requestRenderData()},C$o._getColor=function(C$t){return C$a._fastSetA(C$t.node._color.a),C$a._val},C$o.updateColor=function(C$t){var C$e=this._getColor(C$t);C$s.prototype.updateColor.call(this,C$t,C$e)},C$c);function C$c(){return C$s.apply(this,arguments)||this}C$i.default=C$t,C$e.exports=C$i.default},{"../../../../../platform/js":209,"../../../../utils/label/letter-font":226,"./bmfont":233}],235:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$n=C$t("../../../../utils/label/ttf"))&&C$n.__esModule?C$n:{default:C$n};function C$r(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$o,C$l=C$t("../../../../../components/CCLabelShadow"),C$a=cc.color(255,255,255,255),C$t=(C$o=C$n.default,C$t=C$o,(C$n=C$c).prototype=Object.create(C$t.prototype),(C$n.prototype.constructor=C$n).__proto__=C$t,C$r(C$c),(C$n=C$c.prototype).updateUVs=function(C$t){for(var C$e=this._renderData.vDatas[0],C$i=C$t._frame.uv,C$n=this.uvOffset,C$r=this.floatsPerVert,C$s=0;C$s<4;C$s++){var C$o=2*C$s,C$a=C$r*C$s+C$n;C$e[C$a]=C$i[C$o],C$e[C$a+1]=C$i[1+C$o]}},C$n.updateColor=function(C$t){C$a._fastSetA(C$t.node._color.a);var C$e=C$a._val;C$o.prototype.updateColor.call(this,C$t,C$e)},C$n.updateVerts=function(C$t){var C$e,C$i=C$t.node,C$n=C$t._ttfTexture.width,C$r=C$t._ttfTexture.height,C$s=C$i.anchorX*C$i.width,C$o=C$i.anchorY*C$i.height,C$a=C$l&&C$t.getComponent(C$l),C$c=(C$a&&C$a._enabled&&(C$c=(C$n-C$i.width)/2,C$e=(C$r-C$i.height)/2,-(C$a=C$a.offset).x>C$c?C$s+=C$n-C$i.width:C$c>C$a.x&&(C$s+=C$c-C$a.x),-C$a.y>C$e?C$o+=C$r-C$i.height:C$e>C$a.y&&(C$o+=C$e-C$a.y)),this._local);C$c[0]=-C$s,C$c[1]=-C$o,C$c[2]=C$n-C$s,C$c[3]=C$r-C$o,this.updateUVs(C$t),this.updateWorldVerts(C$t)},C$c);function C$c(){return C$o.apply(this,arguments)||this}C$i.default=C$t,C$e.exports=C$i.default},{"../../../../../components/CCLabelShadow":82,"../../../../utils/label/ttf":227}],236:[function(C$t,C$h,C$u){"use strict";var C$e=C$i(C$t("../../../assembler")),C$n=C$i(C$t("../../../../components/CCLabel")),C$r=C$i(C$t("./2d/ttf")),C$s=C$i(C$t("./2d/bmfont")),C$o=C$i(C$t("./2d/letter")),C$a=C$i(C$t("./3d/ttf")),C$c=C$i(C$t("./3d/bmfont")),C$l=C$i(C$t("./3d/letter"));function C$i(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}C$n.default._canvasPool={pool:[],get:function(){var C$t,C$e,C$i=this.pool.pop();return C$i||(C$e=(C$t=document.createElement("canvas")).getContext("2d"),C$i={canvas:C$t,context:C$e}),C$i},put:function(C$t){32<=this.pool.length||this.pool.push(C$t)}},C$e.default.register(cc.Label,{getConstructor:function(C$t){var C$e=C$t.node.is3DNode,C$i=(C$e?C$a:C$r).default;return C$t.font instanceof cc.BitmapFont?C$i=(C$e?C$c:C$s).default:C$t.cacheMode===C$n.default.CacheMode.CHAR&&(cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB?cc.warn("sorry, subdomain does not support CHAR mode currently!"):C$i=(C$e?C$l:C$o).default),C$i},TTF:C$r.default,Bmfont:C$s.default,Letter:C$o.default,TTF3D:C$a.default,Bmfont3D:C$c.default,Letter3D:C$l.default})},{"../../../../components/CCLabel":80,"../../../assembler":217,"./2d/bmfont":233,"./2d/letter":234,"./2d/ttf":235,"./3d/bmfont":void 0,"./3d/letter":void 0,"./3d/ttf":void 0}],237:[function(C$t,C$o,C$e){"use strict";C$e.__esModule=!0,C$e.MaskAssembler=void 0;var C$i=(C$i=C$t("../../assembler"))&&C$i.__esModule?C$i:{default:C$i};function C$a(C$i){return function(){var C$t,C$e=C$n(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$n(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$n(C$t){return(C$n=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$l=C$t("../../../components/CCMask"),C$d=C$t("../../render-flow"),C$h=C$t("./sprite/2d/simple"),C$f=C$t("./graphics"),C$u=C$t("../../../../renderer/gfx"),C$p=C$t("../vertex-format").vfmtPos,C$_=[];function C$m(){return 1<<C$_.length-1}function C$y(C$t,C$e,C$i,C$n,C$r,C$s){var C$t=C$t.effect,C$o=C$u.STENCIL_OP_KEEP,C$a=C$u.STENCIL_OP_KEEP;C$t.setStencil(C$u.STENCIL_ENABLE,C$e,C$n,C$r,C$i,C$o,C$a,C$s)}function C$g(C$t){var C$e=C$u.DS_FUNC_EQUAL,C$i=C$u.STENCIL_OP_KEEP,C$n=function(){for(var C$t=0,C$e=0;C$e<C$_.length;++C$e)C$t+=1<<C$e;return C$t}(),C$r=C$m(),C$s=C$_[C$_.length-1];C$y(C$s._enableMaterial,C$e,C$i,C$n,C$n,C$r),C$t._flushMaterial(C$s._enableMaterial)}C$t=C$c=C$h,(C$r=C$s).prototype=Object.create(C$t.prototype),(C$r.prototype.constructor=C$r).__proto__=C$t,C$a(C$s),(C$r=C$s.prototype).updateRenderData=function(C$t){C$t._type===C$l.Type.IMAGE_STENCIL?C$t.spriteFrame?C$h.prototype.updateRenderData.call(this,C$t):C$t.setMaterial(0,null):(C$t._graphics.setMaterial(0,C$t._materials[0]),C$f.prototype.updateRenderData.call(C$t._graphics._assembler,C$t._graphics,C$t._graphics))},C$r.fillBuffers=function(C$t,C$e){var C$i,C$n,C$r,C$s,C$o,C$a,C$c;C$t._type===C$l.Type.IMAGE_STENCIL&&!C$t.spriteFrame||(C$c=C$t,8<C$_.length+1&&cc.errorID(9e3,8),C$_.push(C$c),C$c=C$t,C$i=C$e,C$n=C$u.DS_FUNC_NEVER,C$r=C$m(),C$s=C$c.inverted?C$u.STENCIL_OP_REPLACE:C$u.STENCIL_OP_ZERO,C$y(C$c._clearMaterial,C$n,C$s,C$r,C$r,C$r),C$n=C$i.getBuffer("mesh",C$p),C$r=(C$s=C$n.request(4,6)).indiceOffset,C$o=C$s.byteOffset>>2,C$s=C$s.vertexOffset,C$a=C$n._vData,C$n=C$n._iData,C$a[C$o++]=-1,C$a[C$o++]=-1,C$a[C$o++]=-1,C$a[C$o++]=1,C$a[C$o++]=1,C$a[C$o++]=1,C$a[C$o++]=1,C$a[+C$o]=-1,C$n[C$r++]=C$s,C$n[C$r++]=C$s+3,C$n[C$r++]=C$s+1,C$n[C$r++]=C$s+1,C$n[C$r++]=C$s+3,C$n[+C$r]=C$s+2,C$i.node=C$i._dummyNode,C$i.material=C$c._clearMaterial,C$i._flush(),C$a=C$t,C$o=C$e,C$n=C$u.DS_FUNC_NEVER,C$r=C$m(),C$s=C$a.inverted?C$u.STENCIL_OP_ZERO:C$u.STENCIL_OP_REPLACE,C$y(C$a._materials[0],C$n,C$s,C$r,C$r,C$r),C$o.material=C$a._materials[0],C$a._type===C$l.Type.IMAGE_STENCIL?(C$o.node=C$o._dummyNode,C$h.prototype.fillBuffers.call(C$a._assembler,C$a,C$o),C$o._flush()):(C$o.node=C$a.node,C$f.prototype.fillBuffers.call(C$a._graphics._assembler,C$a._graphics,C$o)),C$g(C$e)),C$t.node._renderFlag|=C$d.FLAG_UPDATE_RENDER_DATA},C$r.postFillBuffers=function(C$t,C$e){var C$i;C$t._type===C$l.Type.IMAGE_STENCIL&&!C$t.spriteFrame||(C$i=C$t,C$e=C$e,0===C$_.length&&cc.errorID(9001),C$_.pop(),0===C$_.length?C$e._flushMaterial(C$i._exitMaterial):C$g(C$e)),C$t.node._renderFlag|=C$d.FLAG_UPDATE_RENDER_DATA};var C$c,C$r,C$t=C$s;function C$s(){return C$c.apply(this,arguments)||this}C$e.MaskAssembler=C$t,C$i.default.register(C$l,C$t)},{"../../../../renderer/gfx":312,"../../../components/CCMask":84,"../../assembler":217,"../../render-flow":221,"../vertex-format":252,"./graphics":231,"./sprite/2d/simple":242}],238:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$n=C$t("../../assembler-2d"))&&C$n.__esModule?C$n:{default:C$n};function C$a(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$c=C$t("../../../components/CCMotionStreak"),C$f=C$t("../../render-flow");function C$A(C$t,C$e){this.point=C$t||cc.v2(),this.dir=C$e||cc.v2(),this.distance=0,this.time=0}C$A.prototype.setPoint=function(C$t,C$e){this.point.x=C$t,this.point.y=C$e},C$A.prototype.setDir=function(C$t,C$e){this.dir.x=C$t,this.dir.y=C$e};cc.v2(),cc.v2();var C$C=cc.v2(),C$S=cc.v2();C$s=C$n.default,C$t=C$s,(C$n=C$o).prototype=Object.create(C$t.prototype),(C$n.prototype.constructor=C$n).__proto__=C$t,C$a(C$o),(C$n=C$o.prototype).initData=function(){this._renderData.createFlexData(0,16,42)},C$n.update=function(C$t,C$h){var C$e,C$u=C$t._stroke/2,C$i=C$t.node._worldMatrix.m,C$_=C$i[12],C$i=C$i[13],C$n=C$t._points,C$d=(1<C$n.length&&((C$r=C$n[0].point.x-C$_)*C$r+(C$r=C$n[0].point.y-C$i)*C$r<C$t.minSeg&&(C$e=C$n[0])),C$e||(C$e=new C$A,C$n.splice(0,0,C$e)),C$e.setPoint(C$_,C$i),C$e.time=C$t._fadeTime+C$h,0);if(!(C$n.length<2)){for(var C$r=C$t._color,C$f=C$r.r,C$p=C$r.g,C$m=C$r.b,C$y=C$r.a,C$_=C$n[1],C$i=(C$_.distance=C$e.point.sub(C$_.point,C$S).mag(),C$S.normalizeSelf(),C$_.setDir(C$S.x,C$S.y),C$e.setDir(C$S.x,C$S.y),this._renderData._flexBuffer),C$s=(C$i.reserve(2*C$n.length,6*(C$n.length-1)),C$i.vData),C$g=C$i.uintVData,C$v=C$t._fadeTime,C$x=!1,C$o=C$n.length-1;0<=C$o;C$o--){var C$a=C$n[C$o],C$b=C$a.point,C$c=C$a.dir;if(C$a.time-=C$h,C$a.time<0)C$n.splice(C$o,1);else{var C$a=C$a.time/C$v,C$l=C$n[C$o-1];if(!C$x){if(!C$l){C$n.splice(C$o,1);continue}C$b.x=C$l.point.x-C$c.x*C$a,C$b.y=C$l.point.y-C$c.y*C$a}C$x=!0,C$l=C$c,(C$c=C$C).x=-C$l.y,C$c.y=C$l.x;C$c=(C$a*C$y<<24>>>0)+(C$m<<16)+(C$p<<8)+C$f,C$l=5*C$d;C$s[C$l]=C$b.x+C$C.x*C$u,C$s[1+C$l]=C$b.y+C$C.y*C$u,C$s[2+C$l]=1,C$s[3+C$l]=C$a,C$g[4+C$l]=C$c,C$s[C$l+=5]=C$b.x-C$C.x*C$u,C$s[1+C$l]=C$b.y-C$C.y*C$u,C$s[2+C$l]=0,C$s[3+C$l]=C$a,C$g[4+C$l]=C$c,C$d+=2}}C$i.used(C$d,C$d<=2?0:3*(C$d-2))}},C$n.fillBuffers=function(C$h,C$t){for(var C$e=this._renderData._flexBuffer,C$i=C$e.vData,C$u=C$e.usedVertices,C$n=C$e.usedIndices,C$e=C$e.usedVerticesFloats,C$t=C$t._meshBuffer,C$n=C$t.request(C$u,C$n),C$r=C$n.byteOffset>>2,C$s=C$t._vData,C$o=(C$i.length+C$r>C$s.length?C$s.set(C$i.subarray(0,C$e),C$r):C$s.set(C$i,C$r),C$t._iData),C$a=C$n.indiceOffset,C$_=C$n.vertexOffset,C$c=0,C$d=C$u;C$c<C$d;C$c+=2){var C$l=C$_+C$c;C$o[C$a++]=C$l,C$o[C$a++]=C$l+2,C$o[C$a++]=C$l+1,C$o[C$a++]=C$l+1,C$o[C$a++]=C$l+2,C$o[C$a++]=C$l+3}C$h.node._renderFlag|=C$f.FLAG_UPDATE_RENDER_DATA};var C$s,C$t=C$o;function C$o(){return C$s.apply(this,arguments)||this}(C$i.default=C$t).register(C$c,C$t),C$e.exports=C$i.default},{"../../../components/CCMotionStreak":85,"../../assembler-2d":215,"../../render-flow":221}],239:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$n=C$t("../../../../assembler-2d"))&&C$n.__esModule?C$n:{default:C$n};function C$r(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$o,C$x=C$t("../../../../../components/CCSprite").FillType,C$t=(C$o=C$n.default,C$t=C$o,(C$n=C$a).prototype=Object.create(C$t.prototype),(C$n.prototype.constructor=C$n).__proto__=C$t,C$r(C$a),(C$n=C$a.prototype).updateRenderData=function(C$t){var C$e,C$i=C$t._spriteFrame;this.packToDynamicAtlas(C$t,C$i),C$t._vertsDirty&&(C$i=C$t._fillStart,(C$e=C$t._fillRange)<0&&(C$i+=C$e,C$e=-C$e),C$e=(C$e=1<(C$e=C$i+C$e)?1:C$e)<0?0:C$e,C$e=1<(C$e=(C$i=(C$i=1<C$i?1:C$i)<0?0:C$i)+(C$e=(C$e-=C$i)<0?0:C$e))?1:C$e,this.updateUVs(C$t,C$i,C$e),this.updateVerts(C$t,C$i,C$e),C$t._vertsDirty=!1)},C$n.updateUVs=function(C$h,C$t,C$e){var C$u,C$_,C$i,C$n,C$r,C$s,C$d,C$f,C$p,C$m,C$y=C$h._spriteFrame,C$g=C$y._texture.width,C$v=C$y._texture.height,C$o=C$y._rect,C$a=(C$y._rotated?(C$u=C$o.x/C$g,C$_=(C$o.y+C$o.width)/C$v,C$i=C$r=C$u,C$d=C$p=(C$o.x+C$o.height)/C$g,C$s=C$m=C$_,C$n=C$f=C$o.y/C$v):(C$u=C$o.x/C$g,C$_=(C$o.y+C$o.height)/C$v,C$i=C$d=C$u,C$r=C$p=(C$o.x+C$o.width)/C$g,C$n=C$s=C$_,C$f=C$m=C$o.y/C$v),this._renderData.vDatas[0]),C$c=this.uvOffset,C$l=this.floatsPerVert;switch(C$h._fillType){case C$x.HORIZONTAL:C$a[C$c]=C$i+(C$r-C$i)*C$t,C$a[C$c+1]=C$n+(C$s-C$n)*C$t,C$a[C$c+C$l]=C$i+(C$r-C$i)*C$e,C$a[C$c+C$l+1]=C$n+(C$s-C$n)*C$e,C$a[C$c+2*C$l]=C$d+(C$p-C$d)*C$t,C$a[C$c+2*C$l+1]=C$f+(C$m-C$f)*C$t,C$a[C$c+3*C$l]=C$d+(C$p-C$d)*C$e,C$a[C$c+3*C$l+1]=C$f+(C$m-C$f)*C$e;break;case C$x.VERTICAL:C$a[C$c]=C$i+(C$d-C$i)*C$t,C$a[C$c+1]=C$n+(C$f-C$n)*C$t,C$a[C$c+C$l]=C$r+(C$p-C$r)*C$t,C$a[C$c+C$l+1]=C$s+(C$m-C$s)*C$t,C$a[C$c+2*C$l]=C$i+(C$d-C$i)*C$e,C$a[C$c+2*C$l+1]=C$n+(C$f-C$n)*C$e,C$a[C$c+3*C$l]=C$r+(C$p-C$r)*C$e,C$a[C$c+3*C$l+1]=C$s+(C$m-C$s)*C$e;break;default:cc.errorID(2626)}},C$n.updateVerts=function(C$t,C$e,C$i){var C$n,C$r=C$t.node,C$s=C$r.width,C$h=C$r.height,C$u=C$r.anchorX*C$s,C$r=C$r.anchorY*C$h,C$o=-C$u,C$a=-C$r,C$c=C$s-C$u,C$l=C$h-C$r;switch(C$t._fillType){case C$x.HORIZONTAL:C$n=C$o+(C$c-C$o)*C$i,C$o=C$o+(C$c-C$o)*C$e,C$c=C$n;break;case C$x.VERTICAL:C$n=C$a+(C$l-C$a)*C$i,C$a=C$a+(C$l-C$a)*C$e,C$l=C$n;break;default:cc.errorID(2626)}C$s=this._local;C$s[0]=C$o,C$s[1]=C$a,C$s[2]=C$c,C$s[3]=C$l,this.updateWorldVerts(C$t)},C$a);function C$a(){return C$o.apply(this,arguments)||this}C$i.default=C$t,C$e.exports=C$i.default},{"../../../../../components/CCSprite":94,"../../../../assembler-2d":215}],240:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=(C$t=C$t("../../../../assembler-2d"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$s=C$t.default,C$t=C$s,(C$o=C$a).prototype=Object.create(C$t.prototype),(C$o.prototype.constructor=C$o).__proto__=C$t,C$n(C$a),(C$o=C$a.prototype).initData=function(C$t){this._renderData.createFlexData(0,4,6,this.getVfmt())},C$o.updateRenderData=function(C$t){this.packToDynamicAtlas(C$t,C$t._spriteFrame);var C$e,C$i=C$t.spriteFrame;!C$i||(C$i=C$i.vertices)&&(this.verticesCount=C$i.x.length,this.indicesCount=C$i.triangles.length,(C$e=this._renderData._flexBuffer).reserve(this.verticesCount,this.indicesCount)&&(this.updateColor(C$t),C$t._vertsDirty=!0),C$e.used(this.verticesCount,this.indicesCount),this.updateIndices(C$i.triangles),C$t._vertsDirty&&(this.updateUVs(C$t),this.updateVerts(C$t),this.updateWorldVerts(C$t),C$t._vertsDirty=!1))},C$o.updateIndices=function(C$t){this._renderData.iDatas[0].set(C$t)},C$o.updateUVs=function(C$t){for(var C$t=C$t.spriteFrame.vertices,C$e=C$t.nu,C$i=C$t.nv,C$n=this.uvOffset,C$r=this.floatsPerVert,C$s=this._renderData.vDatas[0],C$o=0;C$o<C$e.length;C$o++){var C$a=C$r*C$o+C$n;C$s[C$a]=C$e[C$o],C$s[C$a+1]=C$i[C$o]}},C$o.updateVerts=function(C$t){var C$e=C$t.node,C$i=Math.abs(C$e.width),C$n=Math.abs(C$e.height),C$h=C$e.anchorX*C$i,C$u=C$e.anchorY*C$n,C$e=C$t.spriteFrame,C$r=C$e.vertices,C$s=C$r.x,C$_=C$r.y,C$r=C$e._originalSize.width,C$o=C$e._originalSize.height,C$d=C$e._rect.width,C$f=C$e._rect.height,C$p=C$e._offset.x+(C$r-C$d)/2,C$m=C$e._offset.y+(C$o-C$f)/2,C$y=C$i/(C$t.trim?C$d:C$r),C$g=C$n/(C$t.trim?C$f:C$o),C$a=this._local;if(C$t.trim)for(var C$c=0,C$v=C$s.length;C$c<C$v;C$c++){var C$x=2*C$c;C$a[C$x]=(C$s[C$c]-C$p)*C$y-C$h,C$a[1+C$x]=(C$o-C$_[C$c]-C$m)*C$g-C$u}else for(var C$l=0,C$b=C$s.length;C$l<C$b;C$l++){var C$A=2*C$l;C$a[C$A]=C$s[C$l]*C$y-C$h,C$a[1+C$A]=(C$o-C$_[C$l])*C$g-C$u}},C$o.updateWorldVerts=function(C$t){for(var C$t=C$t.node._worldMatrix.m,C$e=C$t[0],C$i=C$t[1],C$n=C$t[4],C$h=C$t[5],C$u=C$t[12],C$_=C$t[13],C$r=this._local,C$s=this._renderData.vDatas[0],C$o=this.floatsPerVert,C$a=0,C$d=this.verticesCount;C$a<C$d;C$a++){var C$c=C$r[2*C$a],C$l=C$r[2*C$a+1];C$s[C$o*C$a]=C$c*C$e+C$l*C$n+C$u,C$s[C$o*C$a+1]=C$c*C$i+C$l*C$h+C$_}};var C$s,C$o,C$t=C$a;function C$a(){return C$s.apply(this,arguments)||this}C$i.default=C$t,C$e.exports=C$i.default},{"../../../../assembler-2d":215}],241:[function(C$t,C$n,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;C$t=(C$t=C$t("../../../../assembler-2d"))&&C$t.__esModule?C$t:{default:C$t};function C$r(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$p=2*Math.PI,C$m=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],C$y=[0,0,0,0],C$g=[0,0,0,0,0,0,0,0],C$A=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],C$C=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],C$v=cc.v2(0,0),C$x=[];function C$S(C$t,C$e,C$i,C$h,C$n,C$r,C$s){var C$o,C$a,C$c=Math.sin(C$r),C$l=Math.cos(C$r);0!==Math.cos(C$r)&&(C$o=C$c/C$l,0<(C$t-C$n.x)*C$l&&(C$a=C$n.y+C$o*(C$t-C$n.x),C$s[0].x=C$t,C$s[0].y=C$a),0<(C$e-C$n.x)*C$l&&(C$t=C$n.y+C$o*(C$e-C$n.x),C$s[2].x=C$e,C$s[2].y=C$t)),0!==Math.sin(C$r)&&(C$a=C$l/C$c,0<(C$h-C$n.y)*C$c&&(C$o=C$n.x+C$a*(C$h-C$n.y),C$s[3].x=C$o,C$s[3].y=C$h),0<(C$i-C$n.y)*C$c&&(C$e=C$n.x+C$a*(C$i-C$n.y),C$s[1].x=C$e,C$s[1].y=C$i))}function C$_(C$t,C$e){var C$i=C$e.x-C$t.x,C$e=C$e.y-C$t.y;if(0!=C$i||0!=C$e){if(0==C$i)return 0<C$e?.5*Math.PI:1.5*Math.PI;C$t=Math.atan(C$e/C$i);return C$i<0&&(C$t+=Math.PI),C$t}}C$b=C$t.default,C$t=C$b,(C$i=C$o).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$r(C$o),(C$i=C$o.prototype).initData=function(C$t){this._renderData.createFlexData(0,4,6,this.getVfmt()),this.updateIndices()},C$i.updateRenderData=function(C$t){C$b.prototype.updateRenderData.call(this,C$t);var C$h,C$u,C$_,C$d,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$f=C$t.spriteFrame;if(this.packToDynamicAtlas(C$t,C$f),C$t._vertsDirty){var C$c=C$t._fillStart,C$l=C$t._fillRange;for(C$l<0&&(C$c+=C$l,C$l=-C$l);1<=C$c;)--C$c;for(;C$c<0;)C$c+=1;C$c*=C$p,C$l*=C$p,C$i=(C$s=(C$e=C$t).node).width,C$n=C$s.height,C$r=C$s.anchorX*C$i,C$s=C$s.anchorY*C$n,C$o=-C$r,C$a=-C$s,C$i-=C$r,C$r=C$n-C$s,(C$n=C$y)[0]=C$o,C$n[1]=C$a,C$n[2]=C$i,C$n[3]=C$r,C$s=C$e._fillCenter,C$e=C$v.x=Math.min(Math.max(0,C$s.x),1)*(C$i-C$o)+C$o,C$s=C$v.y=Math.min(Math.max(0,C$s.y),1)*(C$r-C$a)+C$a,C$m[0].x=C$m[3].x=C$o,C$m[1].x=C$m[2].x=C$i,C$m[0].y=C$m[1].y=C$a,C$m[2].y=C$m[3].y=C$r,C$e!==C$n[C$x.length=0]&&(C$x[0]=[3,0]),C$e!==C$n[2]&&(C$x[2]=[1,2]),C$s!==C$n[1]&&(C$x[1]=[0,1]),C$s!==C$n[3]&&(C$x[3]=[2,3]),C$o=C$f._texture.width,C$i=C$f._texture.height,C$a=C$f._rect,C$r=C$g,C$f._rotated?(C$h=C$a.x/C$o,C$u=(C$a.x+C$a.height)/C$o,C$_=C$a.y/C$i,C$d=(C$a.y+C$a.width)/C$i,C$r[0]=C$r[2]=C$h,C$r[4]=C$r[6]=C$u,C$r[3]=C$r[7]=C$d,C$r[1]=C$r[5]=C$_):(C$h=C$a.x/C$o,C$u=(C$a.x+C$a.width)/C$o,C$_=C$a.y/C$i,C$d=(C$a.y+C$a.height)/C$i,C$r[0]=C$r[4]=C$h,C$r[2]=C$r[6]=C$u,C$r[1]=C$r[3]=C$d,C$r[5]=C$r[7]=C$_),C$S(C$y[0],C$y[2],C$y[1],C$y[3],C$v,C$c,C$A),C$S(C$y[0],C$y[2],C$y[1],C$y[3],C$v,C$c+C$l,C$C),this.updateVerts(C$t,C$c,C$l),C$t._vertsDirty=!1}},C$i.updateVerts=function(C$t,C$e,C$h){for(var C$i=C$e+C$h,C$n=this._local,C$r=C$n.length=0,C$s=3*this.floatsPerVert,C$o=0;C$o<4;++C$o){var C$a=C$x[C$o];if(C$a)if(C$p<=C$h)C$n.length=C$r+C$s,this._generateTriangle(C$n,C$r,C$v,C$m[C$a[0]],C$m[C$a[1]]),C$r+=C$s;else{var C$c=C$_(C$v,C$m[C$a[0]]),C$l=C$_(C$v,C$m[C$a[1]]);C$l<C$c&&(C$l+=C$p),C$c-=C$p,C$l-=C$p;for(var C$u=0;C$u<3;++C$u)C$i<=C$c||(C$e<=C$c?(C$n.length=C$r+C$s,C$i<=C$l?this._generateTriangle(C$n,C$r,C$v,C$m[C$a[0]],C$C[C$o]):this._generateTriangle(C$n,C$r,C$v,C$m[C$a[0]],C$m[C$a[1]]),C$r+=C$s):C$l<=C$e||(C$l<=C$i?(C$n.length=C$r+C$s,this._generateTriangle(C$n,C$r,C$v,C$A[C$o],C$m[C$a[1]])):(C$n.length=C$r+C$s,this._generateTriangle(C$n,C$r,C$v,C$A[C$o],C$C[C$o])),C$r+=C$s)),C$c+=C$p,C$l+=C$p}}this.allocWorldVerts(C$t),this.updateWorldVerts(C$t)},C$i.allocWorldVerts=function(C$t){for(var C$e=C$t.node._color._val,C$t=this._renderData,C$i=this.floatsPerVert,C$n=this._local,C$r=C$n.length/C$i,C$s=(this.verticesCount=this.indicesCount=C$r,C$t._flexBuffer),C$o=(C$s.reserve(C$r,C$r)&&this.updateIndices(),C$s.used(this.verticesCount,this.indicesCount),C$t.vDatas[0]),C$a=C$t.uintVDatas[0],C$h=this.uvOffset,C$c=0;C$c<C$n.length;C$c+=C$i){var C$l=C$c+C$h;C$o[C$l]=C$n[C$l],C$o[C$l+1]=C$n[C$l+1],C$a[C$l+2]=C$e}},C$i.updateIndices=function(){for(var C$t=this._renderData.iDatas[0],C$e=0;C$e<C$t.length;C$e++)C$t[C$e]=C$e},C$i.updateWorldVerts=function(C$t){for(var C$t=C$t.node._worldMatrix.m,C$e=C$t[0],C$i=C$t[1],C$n=C$t[4],C$r=C$t[5],C$h=C$t[12],C$u=C$t[13],C$s=this._local,C$o=this._renderData.vDatas[0],C$_=this.floatsPerVert,C$a=0;C$a<C$s.length;C$a+=C$_){var C$c=C$s[C$a],C$l=C$s[C$a+1];C$o[C$a]=C$c*C$e+C$l*C$n+C$h,C$o[C$a+1]=C$c*C$i+C$l*C$r+C$u}},C$i._generateTriangle=function(C$t,C$e,C$i,C$n,C$r){var C$s=C$y[0],C$o=C$y[1],C$a=C$y[2],C$h=C$y[3],C$c=this.floatsPerVert,C$u=(C$t[C$e]=C$i.x,C$t[C$e+1]=C$i.y,C$t[C$e+C$c]=C$n.x,C$t[C$e+C$c+1]=C$n.y,C$t[C$e+2*C$c]=C$r.x,C$t[C$e+2*C$c+1]=C$r.y,this.uvOffset),C$l=(C$i.x-C$s)/(C$a-C$s),C$i=(C$i.y-C$o)/(C$h-C$o);this._generateUV(C$l,C$i,C$t,C$e+C$u),C$l=(C$n.x-C$s)/(C$a-C$s),C$i=(C$n.y-C$o)/(C$h-C$o),this._generateUV(C$l,C$i,C$t,C$e+C$c+C$u),C$l=(C$r.x-C$s)/(C$a-C$s),C$i=(C$r.y-C$o)/(C$h-C$o),this._generateUV(C$l,C$i,C$t,C$e+2*C$c+C$u)},C$i._generateUV=function(C$t,C$e,C$i,C$n){var C$r=C$g[0]+(C$g[2]-C$g[0])*C$t,C$s=C$g[1]+(C$g[3]-C$g[1])*C$t,C$o=C$g[5]+(C$g[7]-C$g[5])*C$t;C$i[C$n]=C$r+(C$g[4]+(C$g[6]-C$g[4])*C$t-C$r)*C$e,C$i[C$n+1]=C$s+(C$o-C$s)*C$e};var C$b,C$i,C$t=C$o;function C$o(){return C$b.apply(this,arguments)||this}C$e.default=C$t,C$n.exports=C$e.default},{"../../../../assembler-2d":215}],242:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=(C$t=C$t("../../../../assembler-2d"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$s=C$t.default,C$t=C$s,(C$o=C$a).prototype=Object.create(C$t.prototype),(C$o.prototype.constructor=C$o).__proto__=C$t,C$n(C$a),(C$o=C$a.prototype).updateRenderData=function(C$t){this.packToDynamicAtlas(C$t,C$t._spriteFrame),C$t._vertsDirty&&(this.updateUVs(C$t),this.updateVerts(C$t),C$t._vertsDirty=!1)},C$o.updateUVs=function(C$t){for(var C$e=C$t._spriteFrame.uv,C$i=this.uvOffset,C$n=this.floatsPerVert,C$r=this._renderData.vDatas[0],C$s=0;C$s<4;C$s++){var C$o=2*C$s,C$a=C$n*C$s+C$i;C$r[C$a]=C$e[C$o],C$r[C$a+1]=C$e[1+C$o]}},C$o.updateVerts=function(C$t){var C$e,C$h,C$i,C$n,C$r,C$u,C$_,C$d,C$s=C$t.node,C$o=C$s.width,C$a=C$s.height,C$c=C$s.anchorX*C$o,C$s=C$s.anchorY*C$a,C$l=(C$o=C$t.trim?(C$u=-C$c,C$_=-C$s,C$d=C$o-C$c,C$a-C$s):(C$n=(C$i=C$t.spriteFrame)._originalSize.width,C$e=C$i._originalSize.height,C$l=C$i._rect.width,C$h=C$i._rect.height,C$r=(C$i=C$i._offset).x+(C$n-C$l)/2,C$l=C$i.x-(C$n-C$l)/2,C$u=C$r*(C$r=C$o/C$n)-C$c,C$_=(C$i.y+(C$e-C$h)/2)*(C$n=C$a/C$e)-C$s,C$d=C$o+C$l*C$r-C$c,C$a+(C$i.y-(C$e-C$h)/2)*C$n-C$s),this._local);C$l[0]=C$u,C$l[1]=C$_,C$l[2]=C$d,C$l[3]=C$o,this.updateWorldVerts(C$t)};var C$s,C$o,C$t=C$a;function C$a(){return C$s.apply(this,arguments)||this}C$i.default=C$t,C$e.exports=C$i.default},{"../../../../assembler-2d":215}],243:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=(C$t=C$t("../../../../assembler-2d"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$s=C$t.default,C$t=C$s,(C$o=C$a).prototype=Object.create(C$t.prototype),(C$o.prototype.constructor=C$o).__proto__=C$t,C$n(C$a),(C$o=C$a.prototype).initData=function(C$t){if(!(0<this._renderData.meshCount)){this._renderData.createData(0,this.verticesFloats,this.indicesCount);for(var C$e=this._renderData.iDatas[0],C$i=0,C$n=0;C$n<3;++C$n)for(var C$r=0;C$r<3;++C$r){var C$s=4*C$n+C$r;C$e[C$i++]=C$s,C$e[C$i++]=C$s+1,C$e[C$i++]=C$s+4,C$e[C$i++]=C$s+1,C$e[C$i++]=C$s+5,C$e[C$i++]=C$s+4}}},C$o.initLocal=function(){this._local=[],this._local.length=8},C$o.updateRenderData=function(C$t){var C$e=C$t._spriteFrame;this.packToDynamicAtlas(C$t,C$e),C$t._vertsDirty&&(this.updateUVs(C$t),this.updateVerts(C$t),C$t._vertsDirty=!1)},C$o.updateVerts=function(C$t){var C$e=C$t.node,C$i=C$e.width,C$n=C$e.height,C$r=C$e.anchorX*C$i,C$e=C$e.anchorY*C$n,C$s=C$t.spriteFrame,C$o=C$s.insetLeft,C$a=C$s.insetRight,C$c=C$s.insetTop,C$s=C$s.insetBottom,C$h=C$i-C$o-C$a,C$u=C$n-C$c-C$s,C$a=C$i/(C$o+C$a),C$c=C$n/(C$c+C$s),C$a=isNaN(C$a)||1<C$a?1:C$a,C$c=isNaN(C$c)||1<C$c?1:C$c,C$h=C$h<0?0:C$h,C$u=C$u<0?0:C$u,C$l=this._local;C$l[0]=-C$r,C$l[1]=-C$e,C$l[2]=C$o*C$a-C$r,C$l[3]=C$s*C$c-C$e,C$l[4]=C$l[2]+C$h,C$l[5]=C$l[3]+C$u,C$l[6]=C$i-C$r,C$l[7]=C$n-C$e,this.updateWorldVerts(C$t)},C$o.updateUVs=function(C$t){for(var C$e=this._renderData.vDatas[0],C$i=C$t.spriteFrame.uvSliced,C$n=this.uvOffset,C$r=this.floatsPerVert,C$s=0;C$s<4;++C$s)for(var C$o=0;C$o<4;++C$o){var C$a=4*C$s+C$o,C$c=C$i[C$a],C$a=C$a*C$r;C$e[C$a+C$n]=C$c.u,C$e[C$a+C$n+1]=C$c.v}},C$o.updateWorldVerts=function(C$t){for(var C$t=C$t.node._worldMatrix.m,C$e=C$t[0],C$i=C$t[1],C$h=C$t[4],C$u=C$t[5],C$_=C$t[12],C$d=C$t[13],C$n=this._local,C$r=this._renderData.vDatas[0],C$f=this.floatsPerVert,C$s=0;C$s<4;++C$s)for(var C$o=C$n[2*C$s+1],C$a=0;C$a<4;++C$a){var C$c=C$n[2*C$a],C$l=(4*C$s+C$a)*C$f;C$r[C$l]=C$c*C$e+C$o*C$h+C$_,C$r[1+C$l]=C$c*C$i+C$o*C$u+C$d}};var C$s,C$o,C$t=C$a;function C$a(){return C$s.apply(this,arguments)||this}C$i.default=C$t,Object.assign(C$t.prototype,{verticesCount:16,indicesCount:54}),C$e.exports=C$i.default},{"../../../../assembler-2d":215}],244:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=(C$t=C$t("../../../../assembler-2d"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$i){return function(){var C$t,C$e=C$r(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$r(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$r(C$t){return(C$r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$s=C$t.default,C$t=C$s,(C$o=C$a).prototype=Object.create(C$t.prototype),(C$o.prototype.constructor=C$o).__proto__=C$t,C$n(C$a),(C$o=C$a.prototype).initData=function(C$t){this.verticesCount=0,this.contentWidth=0,this.contentHeight=0,this.rectWidth=0,this.rectHeight=0,this.hRepeat=0,this.vRepeat=0,this.row=0,this.col=0,this._renderData.createFlexData(0,4,6,this.getVfmt()),this._updateIndices()},C$o.initLocal=function(){this._local={x:[],y:[]}},C$o._updateIndices=function(){for(var C$t=this._renderData.iDatas[0],C$e=0,C$i=0,C$n=C$t.length;C$e<C$n;C$e+=6,C$i+=4)C$t[C$e]=C$i,C$t[C$e+1]=C$i+1,C$t[C$e+2]=C$i+2,C$t[C$e+3]=C$i+1,C$t[C$e+4]=C$i+3,C$t[C$e+5]=C$i+2},C$o.updateRenderData=function(C$t){var C$e=C$t._spriteFrame,C$i=(this.packToDynamicAtlas(C$t,C$e),C$t.node),C$n=this.contentWidth=Math.abs(C$i.width),C$i=this.contentHeight=Math.abs(C$i.height),C$r=C$e._rect,C$s=C$e.insetLeft,C$o=C$e.insetRight,C$a=C$r.width-C$s-C$o,C$c=C$e.insetTop,C$e=C$e.insetBottom,C$r=C$r.height-C$c-C$e,C$n=(this.sizableWidth=C$n-C$s-C$o,this.sizableHeight=C$i-C$c-C$e,this.sizableWidth=0<this.sizableWidth?this.sizableWidth:0,this.sizableHeight=0<this.sizableHeight?this.sizableHeight:0,this.hRepeat=0==C$a?this.sizableWidth:this.sizableWidth/C$a),C$s=this.vRepeat=0==C$r?this.sizableHeight:this.sizableHeight/C$r,C$o=(this.row=Math.ceil(C$s+2))*(this.col=Math.ceil(C$n+2));this.verticesCount=4*C$o,this.indicesCount=6*C$o;C$i=this._renderData._flexBuffer;C$i.reserve(this.verticesCount,this.indicesCount)&&(this._updateIndices(),this.updateColor(C$t)),C$i.used(this.verticesCount,this.indicesCount),C$t._vertsDirty&&(this.updateUVs(C$t),this.updateVerts(C$t),C$t._vertsDirty=!1)},C$o.updateVerts=function(C$h){for(var C$t=C$h._spriteFrame,C$u=C$t._rect,C$e=C$h.node,C$i=C$e.anchorX*C$e.width,C$n=C$e.anchorY*C$e.height,C$_=this.row,C$d=this.col,C$f=this.contentWidth,C$p=this.contentHeight,C$m=this._local,C$y=C$m.x,C$g=C$m.y,C$r=(C$y.length=C$g.length=0,C$t.insetLeft),C$v=C$t.insetRight,C$s=C$u.width-C$r-C$v,C$x=C$t.insetTop,C$o=C$t.insetBottom,C$a=C$u.height-C$x-C$o,C$b=1<C$e.width/(C$r+C$v)?1:C$e.width/(C$r+C$v),C$A=1<C$e.height/(C$x+C$o)?1:C$e.height/(C$x+C$o),C$C=0<C$s?Math.floor(1e3*this.sizableWidth)/1e3%C$s==0?C$s:this.sizableWidth%C$s:this.sizableWidth,C$S=0<C$a?Math.floor(1e3*this.sizableHeight)/1e3%C$a==0?C$a:this.sizableHeight%C$a:this.sizableHeight,C$c=0;C$c<=C$d;C$c++)0===C$c?C$y[C$c]=-C$i:0<C$c&&C$c<C$d?C$y[C$c]=1===C$c?C$r*C$b+Math.min(C$s,this.sizableWidth)-C$i:0<C$s?C$c===C$d-1?C$r+C$C+C$s*(C$c-2)-C$i:C$r+Math.min(C$s,this.sizableWidth)+C$s*(C$c-2)-C$i:C$r+this.sizableWidth-C$i:C$c===C$d&&(C$y[C$c]=Math.min(C$r+this.sizableWidth+C$v,C$f)-C$i);for(var C$l=0;C$l<=C$_;C$l++)0===C$l?C$g[C$l]=-C$n:0<C$l&&C$l<C$_?C$g[C$l]=1===C$l?C$o*C$A+Math.min(C$a,this.sizableHeight)-C$n:0<C$a?C$l===C$_-1?C$o+C$S+(C$l-2)*C$a-C$n:C$o+Math.min(C$a,this.sizableHeight)+(C$l-2)*C$a-C$n:C$o+this.sizableHeight-C$n:C$l===C$_&&(C$g[C$l]=Math.min(C$o+this.sizableHeight+C$x,C$p)-C$n);this.updateWorldVerts(C$h)},C$o.updateWorldVerts=function(C$h){for(var C$t,C$e,C$i=this._renderData,C$u=this._local,C$_=C$u.x,C$d=C$u.y,C$n=C$i.vDatas[0],C$u=this.row,C$f=this.col,C$i=C$h.node._worldMatrix.m,C$r=C$i[0],C$s=C$i[1],C$o=C$i[4],C$a=C$i[5],C$c=C$i[12],C$p=C$i[13],C$m=this.floatsPerVert,C$l=0,C$y=0,C$g=C$u;C$y<C$g;++C$y)for(var C$v=C$d[C$y],C$x=C$d[C$y+1],C$b=0,C$A=C$f;C$b<C$A;++C$b)C$t=C$_[C$b],C$e=C$_[C$b+1],C$n[C$l]=C$t*C$r+C$v*C$o+C$c,C$n[C$l+1]=C$t*C$s+C$v*C$a+C$p,C$n[C$l+=C$m]=C$e*C$r+C$v*C$o+C$c,C$n[C$l+1]=C$e*C$s+C$v*C$a+C$p,C$n[C$l+=C$m]=C$t*C$r+C$x*C$o+C$c,C$n[C$l+1]=C$t*C$s+C$x*C$a+C$p,C$n[C$l+=C$m]=C$e*C$r+C$x*C$o+C$c,C$n[C$l+1]=C$e*C$s+C$x*C$a+C$p,C$l+=C$m},C$o.updateUVs=function(C$h){var C$t=this._renderData.vDatas[0];if(C$t)for(var C$u,C$e=C$h._spriteFrame,C$_=C$e._rect,C$d=C$e.insetLeft,C$f=C$e.insetRight,C$p=C$_.width-C$d-C$f,C$d=C$e.insetTop,C$f=C$e.insetBottom,C$m=C$_.height-C$d-C$f,C$i=this.row,C$n=this.col,C$y=this.hRepeat,C$g=this.vRepeat,C$r=C$h.spriteFrame.uv,C$s=C$h.spriteFrame.uvSliced,C$v=C$h.spriteFrame._rotated,C$o=this.floatsPerVert,C$a=this.uvOffset,C$c=0,C$x=C$i;C$c<C$x;++C$c)for(var C$b=this.sizableHeight>C$m?this.sizableHeight>=C$c*C$m?1:C$g%1:C$g,C$l=0,C$A=C$n;C$l<C$A;++C$l)C$u=this.sizableWidth>C$p?this.sizableWidth>=C$l*C$p?1:C$y%1:C$y,C$v?(C$t[C$a]=C$r[0],C$t[C$a+1]=C$r[1],C$t[C$a+=C$o]=C$r[0],C$t[C$a+1]=C$r[1]+(C$r[7]-C$r[1])*C$u,C$t[C$a+=C$o]=C$r[0]+(C$r[6]-C$r[0])*C$b,C$t[C$a+1]=C$r[1],C$t[C$a+=C$o]=C$t[C$a-C$o],C$t[C$a+1]=C$t[C$a+1-2*C$o]):(0===C$l?C$t[C$a]=C$r[0]:0<C$l&&C$l<C$n-1?C$t[C$a]=C$s[1].u:C$l===C$n-1&&(C$t[C$a]=C$s[2].u),0===C$c?C$t[C$a+1]=C$s[0].v:0<C$c&&C$c<C$i-1?C$t[C$a+1]=C$s[4].v:C$c===C$i-1&&(C$t[C$a+1]=C$s[8].v),C$a+=C$o,0===C$l||0<C$l&&C$l<C$n-1?C$t[C$a]=C$s[1].u+(C$s[2].u-C$s[1].u)*C$u:C$l===C$n-1&&(C$t[C$a]=C$s[3].u),0===C$c?C$t[C$a+1]=C$s[0].v:0<C$c&&C$c<C$i-1?C$t[C$a+1]=C$s[4].v:C$c===C$i-1&&(C$t[C$a+1]=C$s[8].v),C$a+=C$o,0===C$l?C$t[C$a]=C$r[0]:0<C$l&&C$l<C$n-1?C$t[C$a]=C$s[1].u:C$l===C$n-1&&(C$t[C$a]=C$s[2].u),0===C$c||0<C$c&&C$c<C$i-1?C$t[C$a+1]=C$s[4].v+(C$s[8].v-C$s[4].v)*C$b:C$c===C$i-1&&(C$t[C$a+1]=C$s[12].v),C$t[C$a+=C$o]=C$t[C$a-2*C$o],C$t[C$a+1]=C$t[C$a+1-C$o]),C$a+=C$o};var C$s,C$o,C$t=C$a;function C$a(){return C$s.apply(this,arguments)||this}C$i.default=C$t,C$e.exports=C$i.default},{"../../../../assembler-2d":215}],245:[function(C$t,C$i,C$u){"use strict";var C$_=C$e(C$t("../../../assembler")),C$n=C$t("../../../../components/CCSprite"),C$r=C$e(C$t("./2d/simple")),C$s=C$e(C$t("./2d/sliced")),C$o=C$e(C$t("./2d/tiled")),C$a=C$e(C$t("./2d/radial-filled")),C$c=C$e(C$t("./2d/bar-filled")),C$l=C$e(C$t("./2d/mesh")),C$h=C$e(C$t("./3d/simple")),C$d=C$e(C$t("./3d/sliced")),C$f=C$e(C$t("./3d/tiled")),C$p=C$e(C$t("./3d/radial-filled")),C$m=C$e(C$t("./3d/bar-filled")),C$y=C$e(C$t("./3d/mesh"));function C$e(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}C$t={getConstructor:function(C$t){var C$e=C$t.node.is3DNode,C$i=(C$e?C$h:C$r).default;switch(C$t.type){case C$n.Type.SLICED:C$i=(C$e?C$d:C$s).default;break;case C$n.Type.TILED:C$i=(C$e?C$f:C$o).default;break;case C$n.Type.FILLED:C$i=(C$t._fillType===C$n.FillType.RADIAL?C$e?C$p:C$a:C$e?C$m:C$c).default;break;case C$n.Type.MESH:C$i=(C$e?C$y:C$l).default}return C$i},Simple:C$r.default,Sliced:C$s.default,Tiled:C$o.default,RadialFilled:C$a.default,BarFilled:C$c.default,Mesh:C$l.default,Simple3D:C$h.default,Sliced3D:C$d.default,Tiled3D:C$f.default,RadialFilled3D:C$p.default,BarFilled3D:C$m.default,Mesh3D:C$y.default};C$_.default.register(cc.Sprite,C$t)},{"../../../../components/CCSprite":94,"../../../assembler":217,"./2d/bar-filled":239,"./2d/mesh":240,"./2d/radial-filled":241,"./2d/simple":242,"./2d/sliced":243,"./2d/tiled":244,"./3d/bar-filled":void 0,"./3d/mesh":void 0,"./3d/radial-filled":void 0,"./3d/simple":void 0,"./3d/sliced":void 0,"./3d/tiled":void 0}],246:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;(C$n=C$r.prototype)._reallocVData=function(C$t,C$e){this.vData=new Float32Array(C$t),this.uintVData=new Uint32Array(this.vData.buffer),C$e&&this.vData.set(C$e),this._handler.updateMesh(this._index,this.vData,this.iData)},C$n._reallocIData=function(C$t,C$e){this.iData=new Uint16Array(C$t),C$e&&this.iData.set(C$e),this._handler.updateMesh(this._index,this.vData,this.iData)},C$n.reserve=function(C$t,C$e){var C$i=C$t*this._verticesBytes>>2,C$n=this.vData.length,C$t=!1;if(C$n<C$i){for(;C$n<C$i;)C$n*=2;this._reallocVData(C$n,this.vData),C$t=!0}var C$r=this.iData.length;if(C$r<C$e){for(;C$r<C$e;)C$r*=2;this._reallocIData(C$e,this.iData),C$t=!0}return C$t},C$n.used=function(C$t,C$e){this.usedVertices=C$t,this.usedIndices=C$e,this.usedVerticesFloats=C$t*this._verticesBytes>>2,this._handler.updateMeshRange(C$t,C$e)},C$n.reset=function(){var C$t=this._initVerticesCount*this._verticesBytes>>2;this._reallocVData(C$t),this._reallocIData(this._initIndicesCount),this.usedVertices=0,this.usedVerticesFloats=0,this.usedIndices=0};var C$n=C$r;function C$r(C$t,C$e,C$i,C$n,C$r){this._handler=C$t,this._index=C$e,this._vfmt=C$r,this._verticesBytes=C$r._bytes,this._initVerticesCount=C$i,this._initIndicesCount=C$n,this.reset()}C$i.default=C$n,cc.FlexBuffer=C$n,C$e.exports=C$i.default},{}],247:[function(C$t,C$e,C$i){"use strict";var C$n=(C$t=C$t("../../../renderer/gfx"))&&C$t.__esModule?C$t:{default:C$t};C$t=cc.Class({name:"cc.MeshBuffer",ctor:function(C$t,C$e){this.init(C$t,C$e)},init:function(C$t,C$e){this.byteOffset=0,this.indiceOffset=0,this.vertexOffset=0,this.indiceStart=0,this._dirty=!1,this._vertexFormat=C$e,this._vertexBytes=this._vertexFormat._bytes,this._arrOffset=0,this._vbArr=[],this._vb=new C$n.default.VertexBuffer(C$t._device,C$e,C$n.default.USAGE_DYNAMIC,new ArrayBuffer,0),this._vbArr[0]=this._vb,this._ibArr=[],this._ib=new C$n.default.IndexBuffer(C$t._device,C$n.default.INDEX_FMT_UINT16,C$n.default.USAGE_STATIC,new ArrayBuffer,0),this._ibArr[0]=this._ib,this._vData=null,this._uintVData=null,this._iData=null,this._batcher=C$t,this._initVDataCount=256*C$e._bytes,this._initIDataCount=1536,this._offsetInfo={byteOffset:0,vertexOffset:0,indiceOffset:0},this._reallocBuffer()},uploadData:function(){var C$t,C$e;0!==this.byteOffset&&this._dirty&&(C$t=new Float32Array(this._vData.buffer,0,this.byteOffset>>2),C$e=new Uint16Array(this._iData.buffer,0,this.indiceOffset),this._vb.update(0,C$t),this._ib.update(0,C$e),this._dirty=!1)},switchBuffer:function(){var C$t=++this._arrOffset;this.byteOffset=0,this.vertexOffset=0,this.indiceOffset=0,this.indiceStart=0,C$t<this._vbArr.length?(this._vb=this._vbArr[C$t],this._ib=this._ibArr[C$t]):(this._vb=new C$n.default.VertexBuffer(this._batcher._device,this._vertexFormat,C$n.default.USAGE_DYNAMIC,new ArrayBuffer,0),this._vbArr[C$t]=this._vb,this._ib=new C$n.default.IndexBuffer(this._batcher._device,C$n.default.INDEX_FMT_UINT16,C$n.default.USAGE_STATIC,new ArrayBuffer,0),this._ibArr[C$t]=this._ib)},checkAndSwitchBuffer:function(C$t){65535<this.vertexOffset+C$t&&(this.uploadData(),this._batcher._flush(),this.switchBuffer())},requestStatic:function(C$t,C$e){this.checkAndSwitchBuffer(C$t);var C$i=this.byteOffset+C$t*this._vertexBytes,C$n=this.indiceOffset+C$e,C$r=this._vData.byteLength,C$s=this._iData.length;if(C$r<C$i||C$s<C$n){for(;C$r<C$i||C$s<C$n;)this._initVDataCount*=2,this._initIDataCount*=2,C$r=4*this._initVDataCount,C$s=this._initIDataCount;this._reallocBuffer()}this._updateOffset(C$t,C$e,C$i)},_updateOffset:function(C$t,C$e,C$i){var C$n=this._offsetInfo;C$n.vertexOffset=this.vertexOffset,this.vertexOffset+=C$t,C$n.indiceOffset=this.indiceOffset,this.indiceOffset+=C$e,C$n.byteOffset=this.byteOffset,this.byteOffset=C$i,this._dirty=!0},request:function(C$t,C$e){return this._batcher._buffer!==this&&(this._batcher._flush(),this._batcher._buffer=this),this.requestStatic(C$t,C$e),this._offsetInfo},_reallocBuffer:function(){this._reallocVData(!0),this._reallocIData(!0)},_reallocVData:function(C$t){this._vData&&(C$e=new Uint8Array(this._vData.buffer)),this._vData=new Float32Array(this._initVDataCount),this._uintVData=new Uint32Array(this._vData.buffer);var C$e,C$i=new Uint8Array(this._uintVData.buffer);if(C$e&&C$t)for(var C$n=0,C$r=C$e.length;C$n<C$r;C$n++)C$i[C$n]=C$e[C$n]},_reallocIData:function(C$t){var C$e=this._iData;if(this._iData=new Uint16Array(this._initIDataCount),C$e&&C$t)for(var C$i=this._iData,C$n=0,C$r=C$e.length;C$n<C$r;C$n++)C$i[C$n]=C$e[C$n]},reset:function(){this._arrOffset=0,this._vb=this._vbArr[0],this._ib=this._ibArr[0],this.byteOffset=0,this.indiceOffset=0,this.vertexOffset=0,this.indiceStart=0,this._dirty=!1},destroy:function(){this.reset();for(var C$t=0;C$t<this._vbArr.length;C$t++)this._vbArr[C$t].destroy();this._vbArr=null;for(var C$e=0;C$e<this._ibArr.length;C$e++)this._ibArr[C$e].destroy();this._ibArr=null,this._ib=null,this._vb=null},forwardIndiceStartToOffset:function(){this.indiceStart=this.indiceOffset}});cc.MeshBuffer=C$e.exports=C$t},{"../../../renderer/gfx":312}],248:[function(C$t,C$h,C$u){"use strict";var C$i=C$e(C$t("../../../renderer/core/input-assembler")),C$n=C$e(C$t("../../../renderer/memop/recycle-pool")),C$_=C$e(C$t("../../../renderer/scene/model"));function C$e(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$r(C$t,C$e){this._renderScene=C$e,this._device=C$t,this.walking=!1,this.material=C$l,this.cullingMask=1,this._iaPool=new C$n.default(function(){return new C$i.default},16),this._modelPool=new C$n.default(function(){return new C$_.default},16),this._quadBuffer=this.getBuffer("quad",C$o),this._meshBuffer=this.getBuffer("mesh",C$o),this._quadBuffer3D=this.getBuffer("quad",C$a),this._meshBuffer3D=this.getBuffer("mesh",C$a),this._buffer=this._meshBuffer,this._batchedModels=[],this._dummyNode=new cc.Node,this._sortKey=0,this.node=this._dummyNode,this.parentOpacity=1,this.parentOpacityDirty=0,this.worldMatDirty=0}var C$s=C$t("./vertex-format"),C$o=C$s.vfmtPosUvColor,C$a=C$s.vfmt3D,C$d=C$t("./quad-buffer"),C$f=C$t("./mesh-buffer"),C$p=C$t("./spine-buffer"),C$s=C$t("../../assets/material/CCMaterial"),C$c=(new(C$t("../../platform/id-generater"))("VertextFormat"),{}),C$l=new C$s,C$m=new C$i.default;C$m._count=0;C$r.prototype={constructor:C$r,reset:function(){this._iaPool.reset();for(var C$t,C$e=this._renderScene,C$i=this._batchedModels,C$n=0;C$n<C$i.length;++C$n)C$i[C$n].setInputAssembler(null),C$i[C$n].setEffect(null),C$e.removeModel(C$i[C$n]);for(C$t in this._modelPool.reset(),C$i.length=0,this._sortKey=0,C$c)C$c[C$t].reset();this._buffer=this._meshBuffer,this.node=this._dummyNode,this.material=C$l,this.cullingMask=1,this.parentOpacity=1,this.parentOpacityDirty=0,this.worldMatDirty=0},_flushMaterial:function(C$t){var C$e;!C$t||(C$t=(this.material=C$t).effect)&&(C$e=this._modelPool.add(),this._batchedModels.push(C$e),C$e.sortKey=this._sortKey++,C$e._cullingMask=this.cullingMask,C$e.setNode(this.node),C$e.setEffect(C$t,null),C$e.setInputAssembler(C$m),this._renderScene.addModel(C$e))},_flush:function(){var C$t,C$e=this.material,C$i=this._buffer,C$n=C$i.indiceOffset-C$i.indiceStart;!this.walking||!C$e||C$n<=0||(C$e=C$e.effect)&&((C$t=this._iaPool.add())._vertexBuffer=C$i._vb,C$t._indexBuffer=C$i._ib,C$t._start=C$i.indiceStart,C$t._count=C$n,C$n=this._modelPool.add(),this._batchedModels.push(C$n),C$n.sortKey=this._sortKey++,C$n._cullingMask=this.cullingMask,C$n.setNode(this.node),C$n.setEffect(C$e),C$n.setInputAssembler(C$t),this._renderScene.addModel(C$n),C$i.forwardIndiceStartToOffset())},_flushIA:function(C$t){var C$e,C$i;!C$t||(C$e=this.material.effect)&&(C$i=this._modelPool.add(),this._batchedModels.push(C$i),C$i.sortKey=this._sortKey++,C$i._cullingMask=this.cullingMask,C$i.setNode(this.node),C$i.setEffect(C$e),C$i.setInputAssembler(C$t),this._renderScene.addModel(C$i))},terminate:function(){for(var C$t in cc.dynamicAtlasManager&&cc.dynamicAtlasManager.enabled&&cc.dynamicAtlasManager.update(),this._flush(),C$c)C$c[C$t].uploadData();this.walking=!1},getBuffer:function(C$t,C$e){var C$i=C$t+C$e.getHash(),C$n=C$c[C$i];if(!C$n){if("mesh"===C$t)C$n=new C$f(this,C$e);else if("quad"===C$t)C$n=new C$d(this,C$e);else{if("spine"!==C$t)return cc.error("Not support buffer type ["+C$t+"]"),null;C$n=new C$p(this,C$e)}C$c[C$i]=C$n}return C$n}},C$h.exports=C$r},{"../../../renderer/core/input-assembler":302,"../../../renderer/memop/recycle-pool":327,"../../../renderer/scene/model":333,"../../assets/material/CCMaterial":53,"../../platform/id-generater":205,"./mesh-buffer":247,"./quad-buffer":249,"./spine-buffer":251,"./vertex-format":252}],249:[function(C$t,C$e,C$i){"use strict";C$t=C$t("./mesh-buffer"),C$t=cc.Class({name:"cc.QuadBuffer",extends:C$t,_fillQuadBuffer:function(){for(var C$t=this._initIDataCount/6,C$e=this._iData,C$i=0,C$n=0;C$i<C$t;C$i++){var C$r=4*C$i;C$e[C$n++]=C$r,C$e[C$n++]=1+C$r,C$e[C$n++]=2+C$r,C$e[C$n++]=1+C$r,C$e[C$n++]=3+C$r,C$e[C$n++]=2+C$r}var C$s=new Uint16Array(this._iData.buffer,0,6*C$t);this._ib.update(0,C$s)},uploadData:function(){var C$t;0!==this.byteOffset&&this._dirty&&(C$t=new Float32Array(this._vData.buffer,0,this.byteOffset>>2),this._vb.update(0,C$t),this._dirty=!1)},switchBuffer:function(){this._super();var C$t=new Uint16Array(this._iData.buffer,0,this._initIDataCount);this._ib.update(0,C$t)},_reallocBuffer:function(){this._reallocVData(!0),this._reallocIData(),this._fillQuadBuffer()}});cc.QuadBuffer=C$e.exports=C$t},{"./mesh-buffer":247}],250:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=C$o;var C$n,C$r=(C$n=C$t("./flex-buffer"))&&C$n.__esModule?C$n:{default:C$n},C$s=C$t("./vertex-format");function C$o(){this.vDatas=[],this.uintVDatas=[],this.iDatas=[],this.meshCount=0,this._infos=null,this._flexBuffer=null}cc.js.mixin(C$o.prototype,{init:function(C$t){},clear:function(){this.vDatas.length=0,this.iDatas.length=0,this.uintVDatas.length=0,this.meshCount=0,this._infos=null,this._flexBuffer&&this._flexBuffer.reset()},updateMesh:function(C$t,C$e,C$i){this.vDatas[C$t]=C$e,this.uintVDatas[C$t]=new Uint32Array(C$e.buffer,0,C$e.length),this.iDatas[C$t]=C$i,this.meshCount=this.vDatas.length},updateMeshRange:function(C$t,C$e){},createData:function(C$t,C$e,C$i){C$e=new Float32Array(C$e),C$i=new Uint16Array(C$i);this.updateMesh(C$t,C$e,C$i)},createQuadData:function(C$t,C$e,C$i){this.createData(C$t,C$e,C$i),this.initQuadIndices(this.iDatas[C$t])},createFlexData:function(C$t,C$e,C$i,C$n){C$n=C$n||C$s.vfmtPosUvColor,this._flexBuffer=new C$r.default(this,C$t,C$e,C$i,C$n)},initQuadIndices:function(C$t){for(var C$e=C$t.length/6,C$i=0,C$n=0;C$i<C$e;C$i++){var C$r=4*C$i;C$t[C$n++]=C$r,C$t[C$n++]=1+C$r,C$t[C$n++]=2+C$r,C$t[C$n++]=1+C$r,C$t[C$n++]=3+C$r,C$t[C$n++]=2+C$r}}}),cc.RenderData=C$o,C$e.exports=C$i.default},{"./flex-buffer":246,"./vertex-format":252}],251:[function(C$t,C$e,C$i){"use strict";C$t=cc.Class({name:"cc.SpineBuffer",extends:C$t("./mesh-buffer"),requestStatic:function(C$t,C$e){this.checkAndSwitchBuffer(C$t);var C$i=this.byteOffset+C$t*this._vertexBytes,C$n=this.indiceOffset+C$e,C$r=this._vData.byteLength,C$s=this._iData.length;if(C$r<C$i||C$s<C$n){for(;C$r<C$i||C$s<C$n;)this._initVDataCount*=2,this._initIDataCount*=2,C$r=4*this._initVDataCount,C$s=this._initIDataCount;this._reallocBuffer()}C$t=this._offsetInfo;C$t.vertexOffset=this.vertexOffset,C$t.indiceOffset=this.indiceOffset,C$t.byteOffset=this.byteOffset},adjust:function(C$t,C$e){this.vertexOffset+=C$t,this.indiceOffset+=C$e,this.byteOffset=this.byteOffset+C$t*this._vertexBytes,this._dirty=!0}});cc.SpineBuffer=C$e.exports=C$t},{"./mesh-buffer":247}],252:[function(C$t,C$e,C$i){"use strict";C$t=(C$t=C$t("../../../renderer/gfx"))&&C$t.__esModule?C$t:{default:C$t};var C$n=new C$t.default.VertexFormat([{name:C$t.default.ATTR_POSITION,type:C$t.default.ATTR_TYPE_FLOAT32,num:3},{name:C$t.default.ATTR_UV0,type:C$t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$t.default.ATTR_COLOR,type:C$t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}]),C$r=(C$n.name="vfmt3D",C$t.default.VertexFormat.XYZ_UV_Color=C$n,new C$t.default.VertexFormat([{name:C$t.default.ATTR_POSITION,type:C$t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$t.default.ATTR_UV0,type:C$t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$t.default.ATTR_COLOR,type:C$t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}])),C$s=(C$r.name="vfmtPosUvColor",C$t.default.VertexFormat.XY_UV_Color=C$r,new C$t.default.VertexFormat([{name:C$t.default.ATTR_POSITION,type:C$t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$t.default.ATTR_UV0,type:C$t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$t.default.ATTR_COLOR,type:C$t.default.ATTR_TYPE_UINT8,num:4,normalize:!0},{name:C$t.default.ATTR_COLOR0,type:C$t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}])),C$o=(C$s.name="vfmtPosUvTwoColor",C$t.default.VertexFormat.XY_UV_Two_Color=C$s,new C$t.default.VertexFormat([{name:C$t.default.ATTR_POSITION,type:C$t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$t.default.ATTR_UV0,type:C$t.default.ATTR_TYPE_FLOAT32,num:2}])),C$a=(C$o.name="vfmtPosUv",C$t.default.VertexFormat.XY_UV=C$o,new C$t.default.VertexFormat([{name:C$t.default.ATTR_POSITION,type:C$t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$t.default.ATTR_COLOR,type:C$t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}])),C$c=(C$a.name="vfmtPosColor",C$t.default.VertexFormat.XY_Color=C$a,new C$t.default.VertexFormat([{name:C$t.default.ATTR_POSITION,type:C$t.default.ATTR_TYPE_FLOAT32,num:2}]));C$c.name="vfmtPos",C$t.default.VertexFormat.XY=C$c,C$e.exports={vfmt3D:C$n,vfmtPosUvColor:C$r,vfmtPosUvTwoColor:C$s,vfmtPosUv:C$o,vfmtPosColor:C$a,vfmtPos:C$c}},{"../../../renderer/gfx":312}],253:[function(C$t,C$e,C$i){"use strict";C$t("../platform/CCSys");var C$n=/(\.[^\.\/\?\\]*)(\?.*)?$/,C$r=/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,C$s=/[^\.\/]+\/\.\.\//;cc.path={join:function(){for(var C$t=arguments.length,C$e="",C$i=0;C$i<C$t;C$i++)C$e=(C$e+(""===C$e?"":"/")+arguments[C$i]).replace(/(\/|\\\\)$/,"");return C$e},extname:function(C$t){C$t=C$n.exec(C$t);return C$t?C$t[1]:""},mainFileName:function(C$t){if(C$t){var C$e=C$t.lastIndexOf(".");if(-1!==C$e)return C$t.substring(0,C$e)}return C$t},basename:function(C$t,C$e){var C$i=C$t.indexOf("?"),C$i=(0<C$i&&(C$t=C$t.substring(0,C$i)),/(\/|\\)([^\/\\]+)$/g.exec(C$t.replace(/(\/|\\)$/,"")));if(!C$i)return null;C$i=C$i[2];return C$e&&C$t.substring(C$t.length-C$e.length).toLowerCase()===C$e.toLowerCase()?C$i.substring(0,C$i.length-C$e.length):C$i},dirname:function(C$t){C$t=C$r.exec(C$t);return C$t?C$t[2]:""},changeExtname:function(C$t,C$e){C$e=C$e||"";var C$i=C$t.indexOf("?"),C$n="";return 0<C$i&&(C$n=C$t.substring(C$i),C$t=C$t.substring(0,C$i)),(C$i=C$t.lastIndexOf("."))<0?C$t+C$e+C$n:C$t.substring(0,C$i)+C$e+C$n},changeBasename:function(C$t,C$e,C$i){if(0===C$e.indexOf("."))return this.changeExtname(C$t,C$e);var C$n=C$t.indexOf("?"),C$r="",C$i=C$i?this.extname(C$t):"";return 0<C$n&&(C$r=C$t.substring(C$n),C$t=C$t.substring(0,C$n)),C$n=C$t.lastIndexOf("/"),C$t.substring(0,C$n=C$n<=0?0:C$n+1)+C$e+C$i+C$r},_normalize:function(C$t){var C$e;for(C$t=String(C$t);C$t=(C$e=C$t).replace(C$s,""),C$e.length!==C$t.length;);return C$t},sep:cc.sys.os===cc.sys.OS_WINDOWS?"\\":"/",stripSep:function(C$t){return C$t.replace(/[\/\\]$/,"")}},C$e.exports=cc.path},{"../platform/CCSys":198}],254:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e,C$i,C$n,C$r,C$s){this.a=C$t,this.b=C$e,this.c=C$i,this.d=C$n,this.tx=C$r,this.ty=C$s}C$n.create=function(C$t,C$e,C$i,C$n,C$r,C$s){return{a:C$t,b:C$e,c:C$i,d:C$n,tx:C$r,ty:C$s}},C$n.identity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},C$n.clone=function(C$t){return{a:C$t.a,b:C$t.b,c:C$t.c,d:C$t.d,tx:C$t.tx,ty:C$t.ty}},C$n.concat=function(C$t,C$e,C$i){var C$n=C$e.a,C$r=C$e.b,C$s=C$e.c,C$o=C$e.d,C$a=C$e.tx,C$e=C$e.ty;return C$t.a=C$n*C$i.a+C$r*C$i.c,C$t.b=C$n*C$i.b+C$r*C$i.d,C$t.c=C$s*C$i.a+C$o*C$i.c,C$t.d=C$s*C$i.b+C$o*C$i.d,C$t.tx=C$a*C$i.a+C$e*C$i.c+C$i.tx,C$t.ty=C$a*C$i.b+C$e*C$i.d+C$i.ty,C$t},C$n.invert=function(C$t,C$e){var C$i=C$e.a,C$n=C$e.b,C$r=C$e.c,C$s=C$e.d,C$o=1/(C$i*C$s-C$n*C$r),C$a=C$e.tx,C$e=C$e.ty;return C$t.a=C$o*C$s,C$t.b=-C$o*C$n,C$t.c=-C$o*C$r,C$t.d=C$o*C$i,C$t.tx=C$o*(C$r*C$e-C$s*C$a),C$t.ty=C$o*(C$n*C$a-C$i*C$e),C$t},C$n.fromMat4=function(C$t,C$e){C$e=C$e.m;return C$t.a=C$e[0],C$t.b=C$e[1],C$t.c=C$e[4],C$t.d=C$e[5],C$t.tx=C$e[12],C$t.ty=C$e[13],C$t},C$n.transformVec2=function(C$t,C$e,C$i,C$n){var C$r,C$e=void 0===C$n?(C$n=C$i,C$r=C$e.x,C$e.y):(C$r=C$e,C$i);return C$t.x=C$n.a*C$r+C$n.c*C$e+C$n.tx,C$t.y=C$n.b*C$r+C$n.d*C$e+C$n.ty,C$t},C$n.transformSize=function(C$t,C$e,C$i){return C$t.width=C$i.a*C$e.width+C$i.c*C$e.height,C$t.height=C$i.b*C$e.width+C$i.d*C$e.height,C$t},C$n.transformRect=function(C$t,C$e,C$i){var C$n=C$e.x,C$r=C$e.y,C$s=C$n+C$e.width,C$e=C$r+C$e.height,C$o=C$i.a*C$n+C$i.c*C$r+C$i.tx,C$a=C$i.b*C$n+C$i.d*C$r+C$i.ty,C$c=C$i.a*C$s+C$i.c*C$r+C$i.tx,C$r=C$i.b*C$s+C$i.d*C$r+C$i.ty,C$l=C$i.a*C$n+C$i.c*C$e+C$i.tx,C$n=C$i.b*C$n+C$i.d*C$e+C$i.ty,C$h=C$i.a*C$s+C$i.c*C$e+C$i.tx,C$s=C$i.b*C$s+C$i.d*C$e+C$i.ty,C$e=Math.min(C$o,C$c,C$l,C$h),C$i=Math.max(C$o,C$c,C$l,C$h),C$o=Math.min(C$a,C$r,C$n,C$s),C$c=Math.max(C$a,C$r,C$n,C$s);return C$t.x=C$e,C$t.y=C$o,C$t.width=C$i-C$e,C$t.height=C$c-C$o,C$t},C$n.transformObb=function(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=C$r.x,C$a=C$r.y,C$c=C$r.width,C$r=C$r.height,C$l=C$s.a*C$o+C$s.c*C$a+C$s.tx,C$o=C$s.b*C$o+C$s.d*C$a+C$s.ty,C$a=C$s.a*C$c,C$c=C$s.b*C$c,C$h=C$s.c*C$r,C$s=C$s.d*C$r;C$e.x=C$l,C$e.y=C$o,C$i.x=C$a+C$l,C$i.y=C$c+C$o,C$t.x=C$h+C$l,C$t.y=C$s+C$o,C$n.x=C$a+C$h+C$l,C$n.y=C$c+C$s+C$o},cc.AffineTransform=C$e.exports=C$n},{}],255:[function(C$t,C$h,C$u){"use strict";var C$e=C$t("../platform/CCObject").Flags,C$_=C$t("./misc"),C$i=C$t("../platform/js"),C$d=C$t("../platform/id-generater"),C$f=C$t("../event-manager"),C$n=C$t("../renderer/render-flow"),C$c=C$e.Destroying,C$r=C$e.DontDestroy,C$s=C$e.Deactivating,C$o=new C$d("Node");function C$a(C$t){return C$t?"string"==typeof C$t?C$i.getClassByName(C$t):C$t:(cc.errorID(3804),null)}function C$p(C$t,C$e){if(C$e._sealed)for(var C$i=0;C$i<C$t._components.length;++C$i){var C$n=C$t._components[C$i];if(C$n.constructor===C$e)return C$n}else for(var C$r=0;C$r<C$t._components.length;++C$r){var C$s=C$t._components[C$r];if(C$s instanceof C$e)return C$s}return null}function C$l(C$t,C$e,C$i){if(C$e._sealed)for(var C$n=0;C$n<C$t._components.length;++C$n){var C$r=C$t._components[C$n];C$r.constructor===C$e&&C$i.push(C$r)}else for(var C$s=0;C$s<C$t._components.length;++C$s){var C$o=C$t._components[C$s];C$o instanceof C$e&&C$i.push(C$o)}}C$t=cc.Class({name:"cc._BaseNode",extends:cc.Object,properties:{_parent:null,_children:[],_active:!0,_components:[],_prefab:null,_persistNode:{get:function(){return 0<(this._objFlags&C$r)},set:function(C$t){C$t?this._objFlags|=C$r:this._objFlags&=~C$r}},name:{get:function(){return this._name},set:function(C$t){this._name=C$t}},uuid:{get:function(){return this._id}},children:{get:function(){return this._children}},childrenCount:{get:function(){return this._children.length}},active:{get:function(){return this._active},set:function(C$t){var C$e;this._active!==(C$t=!!C$t)&&(this._active=C$t,(C$e=this._parent)&&C$e._activeInHierarchy&&cc.director._nodeActivator.activateNode(this,C$t))}},activeInHierarchy:{get:function(){return this._activeInHierarchy}}},ctor:function(C$t){this._name=void 0!==C$t?C$t:"New Node",this._activeInHierarchy=!1,this._id=C$o.getNewId(),cc.director._scheduler&&cc.director._scheduler.enableForTarget(this),this.__eventTargets=[]},getParent:function(){return this._parent},setParent:function(C$t){var C$e,C$i;this._parent!==C$t&&((C$e=this._parent)&&C$e._objFlags&C$s&&cc.errorID(3821),this._parent=C$t||null,this._onSetParent(C$t),C$t&&(C$t._objFlags&C$s&&cc.errorID(3821),C$f._setDirtyForNode(this),C$t._children.push(this),C$t.emit&&C$t.emit("child-added",this),C$t._renderFlag|=C$n.FLAG_CHILDREN),C$e?C$e._objFlags&C$c||(C$i=C$e._children.indexOf(this),C$e._children.splice(C$i,1),C$e.emit&&C$e.emit("child-removed",this),this._onHierarchyChanged(C$e),0===C$e._children.length&&(C$e._renderFlag&=~C$n.FLAG_CHILDREN)):C$t&&this._onHierarchyChanged(null))},attr:function(C$t){C$i.mixin(this,C$t)},getChildByUuid:function(C$t){if(!C$t)return cc.log("Invalid uuid"),null;for(var C$e=this._children,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i]._id===C$t)return C$e[C$i];return null},getChildByName:function(C$t){if(!C$t)return cc.log("Invalid name"),null;for(var C$e=this._children,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i]._name===C$t)return C$e[C$i];return null},addChild:function(C$t){cc.assertID(C$t,1606),cc.assertID(null===C$t._parent,1605),C$t.setParent(this)},insertChild:function(C$t,C$e){C$t.parent=this,C$t.setSiblingIndex(C$e)},getSiblingIndex:function(){return this._parent?this._parent._children.indexOf(this):0},setSiblingIndex:function(C$t){var C$e,C$i;this._parent&&(this._parent._objFlags&C$s?cc.errorID(3821):(C$e=this._parent._children,(C$t=-1!==C$t?C$t:C$e.length-1)!==(C$i=C$e.indexOf(this))&&(C$e.splice(C$i,1),C$t<C$e.length?C$e.splice(C$t,0,this):C$e.push(this),this._onSiblingIndexChanged&&this._onSiblingIndexChanged(C$t))))},walk:function(C$t,C$e){for(var C$i,C$n,C$r,C$s=cc._BaseNode,C$o=1,C$a=C$s._stacks[C$s._stackId],C$c=(C$a||C$s._stacks.push(C$a=[]),C$s._stackId++,C$a.length=0,C$a[0]=this,null),C$l=!1;C$o;)if(C$n=C$a[--C$o])if(!C$l&&C$t?C$t(C$n):C$l&&C$e&&C$e(C$n),C$a[C$o]=null,C$l){if(C$l=!1,C$i)if(C$i[++C$r])C$a[C$o]=C$i[C$r],C$o++;else if(C$c&&(C$a[C$o]=C$c,C$o++,C$l=!0,C$c._parent?(C$r=(C$i=C$c._parent._children).indexOf(C$c),C$c=C$c._parent):C$i=C$c=null,C$r<0))break}else 0<C$n._children.length?(C$i=(C$c=C$n)._children,C$a[C$o]=C$i[C$r=0],C$o++):(C$a[C$o]=C$n,C$o++,C$l=!0);C$a.length=0,C$s._stackId--},cleanup:function(){},removeFromParent:function(C$t){this._parent&&this._parent.removeChild(this,C$t=void 0===C$t?!0:C$t)},removeChild:function(C$t,C$e){-1<this._children.indexOf(C$t)&&(!C$e&&void 0!==C$e||C$t.cleanup(),C$t.parent=null)},removeAllChildren:function(C$t){var C$e=this._children;void 0===C$t&&(C$t=!0);for(var C$i=C$e.length-1;0<=C$i;C$i--){var C$n=C$e[C$i];C$n&&(C$t&&C$n.cleanup(),C$n.parent=null)}this._children.length=0},isChildOf:function(C$t){var C$e=this;do{if(C$e===C$t)return!0}while(C$e=C$e._parent);return!1},getComponent:function(C$t){C$t=C$a(C$t);return C$t?C$p(this,C$t):null},getComponents:function(C$t){var C$t=C$a(C$t),C$e=[];return C$t&&C$l(this,C$t,C$e),C$e},getComponentInChildren:function(C$t){C$t=C$a(C$t);return C$t?function C$t(C$e,C$i){for(var C$n=0;C$n<C$e.length;++C$n){var C$r=C$e[C$n],C$s=C$p(C$r,C$i);if(C$s)return C$s;if(0<C$r._children.length&&(C$s=C$t(C$r._children,C$i)))return C$s}return null}(this._children,C$t):null},getComponentsInChildren:function(C$t){var C$t=C$a(C$t),C$e=[];return C$t&&(C$l(this,C$t,C$e),function C$t(C$e,C$i,C$n){for(var C$r=0;C$r<C$e.length;++C$r){var C$s=C$e[C$r];C$l(C$s,C$i,C$n),0<C$s._children.length&&C$t(C$s._children,C$i,C$n)}}(this._children,C$t,C$e)),C$e},_checkMultipleComp:!1,addComponent:function(C$t){var C$e;if("string"==typeof C$t){if(!(C$e=C$i.getClassByName(C$t)))return cc.errorID(3807,C$t),cc._RFpeek()&&cc.errorID(3808,C$t),null}else{if(!C$t)return cc.errorID(3804),null;C$e=C$t}if("function"!=typeof C$e)return cc.errorID(3809),null;if(!C$i.isChildClassOf(C$e,cc.Component))return cc.errorID(3810),null;C$t=C$e._requireComponent;if(C$t&&!this.getComponent(C$t)&&!this.addComponent(C$t))return null;C$t=new C$e;return(C$t.node=this)._components.push(C$t),this._activeInHierarchy&&cc.director._nodeActivator.activateComp(C$t),C$t},_addComponentAt:!1,removeComponent:function(C$t){C$t?(C$t=C$t instanceof cc.Component?C$t:this.getComponent(C$t))&&C$t.destroy():cc.errorID(3813)},_getDependComponent:!1,_removeComponent:function(C$t){var C$e;C$t?this._objFlags&C$c||(-1!==(C$e=this._components.indexOf(C$t))?this._components.splice(C$e,1):C$t.node!==this&&cc.errorID(3815)):cc.errorID(3814)},destroy:function(){cc.Object.prototype.destroy.call(this)&&(this.active=!1)},destroyAllChildren:function(){for(var C$t=this._children,C$e=0;C$e<C$t.length;++C$e)C$t[C$e].destroy()},_onSetParent:function(C$t){},_onPostActivated:function(){},_onBatchRestored:function(){},_onBatchCreated:function(){},_onHierarchyChanged:function(C$t){var C$e=this._parent,C$e=(!this._persistNode||C$e instanceof cc.Scene||cc.game.removePersistRootNode(this),this._active&&!(!C$e||!C$e._activeInHierarchy));this._activeInHierarchy!==C$e&&cc.director._nodeActivator.activateNode(this,C$e)},_instantiate:function(C$t){C$t=C$t||cc.instantiate._clone(this,this);var C$e=this._prefab;C$e&&this===C$e.root&&C$e.sync;return C$t._parent=null,C$t._onBatchRestored(),C$t},_registerIfAttached:!1,_onPreDestroy:function(){this._objFlags|=C$c;for(var C$t=this._parent,C$e=C$t&&C$t._objFlags&C$c,C$i=this._children,C$n=0,C$r=C$i.length;C$n<C$r;++C$n)C$i[C$n]._destroyImmediate();for(C$n=0,C$r=this._components.length;C$n<C$r;++C$n)this._components[C$n]._destroyImmediate();var C$s,C$o=this.__eventTargets;for(C$n=0,C$r=C$o.length;C$n<C$r;++C$n){var C$a=C$o[C$n];C$a&&C$a.targetOff(this)}return C$o.length=0,this._persistNode&&cc.game.removePersistRootNode(this),!C$e&&C$t&&(C$s=C$t._children.indexOf(this),C$t._children.splice(C$s,1),C$t.emit&&C$t.emit("child-removed",this)),C$e},onRestore:!1});C$t.idGenerater=C$o,C$t._stacks=[[]],C$t._stackId=0,C$t.prototype._onPreDestroyBase=C$t.prototype._onPreDestroy,C$t.prototype._onHierarchyChangedBase=C$t.prototype._onHierarchyChanged;C$_.propertyDefine(C$t,["parent","name","children","childrenCount"],{}),cc._BaseNode=C$h.exports=C$t},{"../event-manager":113,"../platform/CCObject":195,"../platform/id-generater":205,"../platform/js":209,"../renderer/render-flow":221,"./misc":264}],256:[function(C$t,C$e,C$i){"use strict";C$e.exports={binarySearchEpsilon:function(C$t,C$e){for(var C$i=0,C$n=C$t.length-1,C$r=C$n>>>1;C$i<=C$n;C$r=C$i+C$n>>>1){var C$s=C$t[C$r];if(C$e+1e-6<C$s)C$n=C$r-1;else{if(!(C$s<C$e-1e-6))return C$r;C$i=C$r+1}}return~C$i}}},{}],257:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../components/CCRenderComponent"),C$r=C$t("../platform/CCMacro").BlendFactor,C$s=C$t("../../renderer/gfx"),C$t=cc.Class({properties:{_srcBlendFactor:C$r.SRC_ALPHA,_dstBlendFactor:C$r.ONE_MINUS_SRC_ALPHA,srcBlendFactor:{get:function(){return this._srcBlendFactor},set:function(C$t){this._srcBlendFactor!==C$t&&(this._srcBlendFactor=C$t,this._updateBlendFunc())},animatable:!1,type:C$r,tooltip:!1,visible:!0},dstBlendFactor:{get:function(){return this._dstBlendFactor},set:function(C$t){this._dstBlendFactor!==C$t&&(this._dstBlendFactor=C$t,this._updateBlendFunc())},animatable:!1,type:C$r,tooltip:!1,visible:!0}},setMaterial:function(C$t,C$e){C$t=C$n.prototype.setMaterial.call(this,C$t,C$e);return this._srcBlendFactor===C$r.SRC_ALPHA&&this._dstBlendFactor===C$r.ONE_MINUS_SRC_ALPHA||this._updateMaterialBlendFunc(C$t),C$t},_updateMaterial:function(){this._updateBlendFunc()},_updateBlendFunc:function(){if(this._srcBlendFactor!==C$r.SRC_ALPHA||this._dstBlendFactor!==C$r.ONE_MINUS_SRC_ALPHA)for(var C$t=this.getMaterials(),C$e=0;C$e<C$t.length;C$e++){var C$i=C$t[C$e];this._updateMaterialBlendFunc(C$i)}},_updateMaterialBlendFunc:function(C$t){C$t.setBlend(!0,C$s.BLEND_FUNC_ADD,this._srcBlendFactor,this._dstBlendFactor,C$s.BLEND_FUNC_ADD,this._srcBlendFactor,this._dstBlendFactor)}});C$e.exports=cc.BlendFunc=C$t},{"../../renderer/gfx":312,"../components/CCRenderComponent":89,"../platform/CCMacro":194}],258:[function(C$t,C$e,C$i){"use strict";var C$s=C$t("./misc").BASE64_VALUES,C$o="0123456789abcdef".split(""),C$t=["","","",""],C$a=C$t.concat(C$t,"-",C$t,"-",C$t,"-",C$t,"-",C$t,C$t,C$t),C$c=C$a.map(function(C$t,C$e){return"-"===C$t?NaN:C$e}).filter(isFinite);C$e.exports=function(C$t){if(22!==C$t.length)return C$t;C$a[0]=C$t[0],C$a[1]=C$t[1];for(var C$e=2,C$i=2;C$e<22;C$e+=2){var C$n=C$s[C$t.charCodeAt(C$e)],C$r=C$s[C$t.charCodeAt(C$e+1)];C$a[C$c[C$i++]]=C$o[C$n>>2],C$a[C$c[C$i++]]=C$o[(3&C$n)<<2|C$r>>4],C$a[C$c[C$i++]]=C$o[15&C$r]}return C$a.join("")}},{"./misc":264}],259:[function(C$t,C$e,C$i){"use strict";cc.find=C$e.exports=function(C$t,C$e){if(null==C$t)return cc.errorID(3814),null;if(!C$e){var C$i=cc.director.getScene();if(!C$i)return null;C$e=C$i}for(var C$n=C$e,C$i="/"!==C$t[0]?0:1,C$r=C$t.split("/"),C$s=C$i;C$s<C$r.length;C$s++){for(var C$o=C$r[C$s],C$a=C$n._children,C$n=null,C$c=0,C$h=C$a.length;C$c<C$h;++C$c){var C$l=C$a[C$c];if(C$l.name===C$o){C$n=C$l;break}}if(!C$n)return null}return C$n}},{}],260:[function(C$t,C$e,C$i){"use strict";var C$n=(C$s=C$t("../assets/material/material-variant"))&&C$s.__esModule?C$s:{default:C$s};var C$r=C$t("../assets/material/CCMaterial"),C$s=cc.Class({properties:{_normalMaterial:null,normalMaterial:{get:function(){return this._normalMaterial},set:function(C$t){this._normalMaterial=C$t,this._updateDisabledState&&this._updateDisabledState()},type:C$r,tooltip:!1,animatable:!1},_grayMaterial:null,grayMaterial:{get:function(){return this._grayMaterial},set:function(C$t){this._grayMaterial=C$t,this._updateDisabledState&&this._updateDisabledState()},type:C$r,tooltip:!1,animatable:!1}},_switchGrayMaterial:function(C$t,C$e){var C$i=C$t?(C$i=(C$i=this._grayMaterial)||C$r.getBuiltinMaterial("2d-gray-sprite"),this._grayMaterial=C$n.default.create(C$i,C$e)):(C$i=(C$i=this._normalMaterial)||C$r.getBuiltinMaterial("2d-sprite",C$e),this._normalMaterial=C$n.default.create(C$i,C$e));C$e.setMaterial(0,C$i)}});C$e.exports=C$s},{"../assets/material/CCMaterial":53,"../assets/material/material-variant":60}],261:[function(C$t,C$e,C$i){"use strict";function C$n(){this._parsedObject={},this._specialSymbolArray=[],this._specialSymbolArray.push([/&lt;/g,"<"]),this._specialSymbolArray.push([/&gt;/g,">"]),this._specialSymbolArray.push([/&amp;/g,"&"]),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,"'"]),this._specialSymbolArray.push([/&nbsp;/g," "])}var C$c=/^(click)(\s)*=|(param)(\s)*=/,C$u=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*align(\s)*=|(\s)*offset(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;C$n.prototype={constructor:C$n,parse:function(C$t){this._resultObjectArray=[],this._stack=[];for(var C$e=0,C$i=C$t.length;C$e<C$i;){var C$n,C$r,C$s=C$t.indexOf(">",C$e),C$o=-1;0<=C$s&&(C$o=C$t.lastIndexOf("<",C$s))<C$e-1&&(C$o=C$t.indexOf("<",C$s+1),C$s=C$t.indexOf(">",C$o+1)),C$e=C$o<0?(this._stack.pop(),this._processResult(C$t.substring(C$e)),C$i):(C$n=C$t.substring(C$e,C$o),""===(C$r=C$t.substring(C$o+1,C$s))&&(C$n=C$t.substring(C$e,C$s+1)),this._processResult(C$n),-1===C$s?C$s=C$o:"/"===C$t.charAt(C$o+1)?this._stack.pop():this._addToStack(C$r),C$s+1)}return this._resultObjectArray},_attributeToObject:function(C$t){var C$e,C$i,C$n,C$r={};if(C$o=(C$t=C$t.trim()).match(/^(color|size)(\s)*=/)){if(C$e=C$o[0],""===(C$t=C$t.substring(C$e.length).trim()))return C$r;switch(C$i=C$t.indexOf(" "),C$e[0]){case"c":C$r.color=-1<C$i?C$t.substring(0,C$i).trim():C$t;break;case"s":C$r.size=parseInt(C$t)}return-1<C$i&&(C$n=C$t.substring(C$i+1).trim(),C$n=this._processEventHandler(C$n),C$r.event=C$n),C$r}if((C$o=C$t.match(/^(br(\s)*\/)/))&&0<C$o[0].length&&(C$e=C$o[0].trim()).startsWith("br")&&"/"===C$e[C$e.length-1])return C$r.isNewLine=!0,this._resultObjectArray.push({text:"",style:{newline:!0}}),C$r;if((C$o=C$t.match(/^(img(\s)*src(\s)*=[^>]+\/)/))&&0<C$o[0].length&&(C$e=C$o[0].trim()).startsWith("img")&&"/"===C$e[C$e.length-1]){for(var C$s,C$o=C$t.match(C$u),C$a=!1;C$o;){if(C$e=(C$t=C$t.substring(C$t.indexOf(C$o[0]))).substr(0,C$o[0].length),C$l=-1<(C$i=(C$s=C$t.substring(C$e.length).trim()).indexOf(" "))?C$s.substr(0,C$i):C$s,C$e=(C$e=C$e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),C$t=C$s.substring(C$i).trim(),C$l.endsWith("/")&&(C$l=C$l.slice(0,-1)),"src"===C$e){switch(C$l.charCodeAt(0)){case 34:case 39:C$a=!0,C$l=C$l.slice(1,-1)}C$r.isImage=!0,C$r.src=C$l}else if("height"===C$e)C$r.imageHeight=parseInt(C$l);else if("width"===C$e)C$r.imageWidth=parseInt(C$l);else if("align"===C$e){switch(C$l.charCodeAt(0)){case 34:case 39:C$l=C$l.slice(1,-1)}C$r.imageAlign=C$l.toLocaleLowerCase()}else"offset"===C$e?C$r.imageOffset=C$l:"click"===C$e&&(C$r.event=this._processEventHandler(C$e+"="+C$l));C$r.event&&"param"===C$e&&(C$r.event.param=C$l.replace(/^\"|\"$/g,"")),C$o=C$t.match(C$u)}return C$a&&C$r.isImage&&this._resultObjectArray.push({text:"",style:C$r}),{}}if(C$o=C$t.match(/^(outline(\s)*[^>]*)/)){var C$c={color:"#ffffff",width:1};if(C$t=C$o[0].substring("outline".length).trim()){var C$l,C$h=/(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(C$o=C$t.match(C$h);C$o;)C$e=(C$t=C$t.substring(C$t.indexOf(C$o[0]))).substr(0,C$o[0].length),C$l=-1<(C$i=(C$s=C$t.substring(C$e.length).trim()).indexOf(" "))?C$s.substr(0,C$i):C$s,C$e=(C$e=C$e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),C$t=C$s.substring(C$i).trim(),"click"===C$e?C$r.event=this._processEventHandler(C$e+"="+C$l):"color"===C$e?C$c.color=C$l:"width"===C$e&&(C$c.width=parseInt(C$l)),C$r.event&&"param"===C$e&&(C$r.event.param=C$l.replace(/^\"|\"$/g,"")),C$o=C$t.match(C$h)}C$r.outline=C$c}if((C$o=C$t.match(/^(on|u|b|i)(\s)*/))&&0<C$o[0].length){switch(C$e=C$o[0],C$t=C$t.substring(C$e.length).trim(),C$e[0]){case"u":C$r.underline=!0;break;case"i":C$r.italic=!0;break;case"b":C$r.bold=!0}if(""===C$t)return C$r;C$n=this._processEventHandler(C$t),C$r.event=C$n}return C$r},_processEventHandler:function(C$t){for(var C$e=0,C$i={},C$n=C$t.match(C$c),C$r=!1;C$n;){var C$s,C$o=C$n[0],C$a="",C$r=!1;'"'===(C$t=C$t.substring(C$o.length).trim()).charAt(0)?(-1<(C$e=C$t.indexOf('"',1))&&(C$a=C$t.substring(1,C$e).trim(),C$r=!0),C$e++):"'"===C$t.charAt(0)?(-1<(C$e=C$t.indexOf("'",1))&&(C$a=C$t.substring(1,C$e).trim(),C$r=!0),C$e++):C$e=(C$a=(C$s=C$t.match(/(\S)+/))?C$s[0]:"").length,C$r&&(C$i[C$o=C$o.substring(0,C$o.length-1).trim()]=C$a),C$n=(C$t=C$t.substring(C$e).trim()).match(C$c)}return C$i},_addToStack:function(C$t){var C$e=this._attributeToObject(C$t);if(0===this._stack.length)this._stack.push(C$e);else if(!C$e.isNewLine&&!C$e.isImage){var C$i,C$n=this._stack[this._stack.length-1];for(C$i in C$n)C$e[C$i]||(C$e[C$i]=C$n[C$i]);this._stack.push(C$e)}},_processResult:function(C$t){""!==C$t&&(C$t=this._escapeSpecialSymbol(C$t),0<this._stack.length?this._resultObjectArray.push({text:C$t,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:C$t}))},_escapeSpecialSymbol:function(C$t){for(var C$e=0;C$e<this._specialSymbolArray.length;++C$e){var C$i=this._specialSymbolArray[C$e][0],C$n=this._specialSymbolArray[C$e][1];C$t=C$t.replace(C$i,C$n)}return C$t}},C$e.exports=C$n},{}],262:[function(C$t,C$e,C$i){"use strict";C$t("./CCPath"),C$t("./profiler/CCProfiler"),C$t("./find"),C$t("./mutable-forward-iterator")},{"./CCPath":253,"./find":259,"./mutable-forward-iterator":265,"./profiler/CCProfiler":268}],263:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.postLoadMesh=function(C$i,C$n){!C$i.loaded&&C$i.nativeUrl?cc.loader.load(C$i.nativeUrl,function(C$t,C$e){C$e&&(C$i._nativeAsset=C$e),C$n&&C$n(C$t)}):C$n&&C$n()}},{}],264:[function(C$t,C$e,C$i){"use strict";for(var C$l=C$t("../platform/js"),C$t={propertyDefine:function(C$t,C$e,C$i){function C$n(C$t,C$e,C$i,C$n){var C$r=Object.getOwnPropertyDescriptor(C$t,C$e);C$r?(C$r.get&&(C$t[C$i]=C$r.get),C$r.set&&C$n&&(C$t[C$n]=C$r.set)):(C$r=C$t[C$i],C$l.getset(C$t,C$e,C$r,C$t[C$n]))}for(var C$r=C$t.prototype,C$s=0;C$s<C$e.length;C$s++){var C$o,C$a=(C$o=C$e[C$s])[0].toUpperCase()+C$o.slice(1);C$n(C$r,C$o,"get"+C$a,"set"+C$a)}for(C$o in C$i){var C$c=C$i[C$o];C$n(C$r,C$o,C$c[0],C$c[1])}},NextPOT:function(C$t){return--C$t,(C$t=(C$t=(C$t=(C$t=(C$t|=C$t>>1)|C$t>>2)|C$t>>4)|C$t>>8)|C$t>>16)+1},BUILTIN_CLASSID_RE:/^(?:cc|dragonBones|sp|ccsg)\..+/},C$n=new Array(123),C$r=0;C$r<123;++C$r)C$n[C$r]=64;for(var C$s=0;C$s<64;++C$s)C$n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(C$s)]=C$s;C$t.BASE64_VALUES=C$n,C$t.pushToMap=function(C$t,C$e,C$i,C$n){var C$r=C$t[C$e];C$r?Array.isArray(C$r)?C$n?(C$r.push(C$r[0]),C$r[0]=C$i):C$r.push(C$i):C$t[C$e]=C$n?[C$i,C$r]:[C$r,C$i]:C$t[C$e]=C$i},C$t.clampf=function(C$t,C$e,C$i){var C$n;return C$i<C$e&&(C$n=C$e,C$e=C$i,C$i=C$n),C$t<C$e?C$e:C$t<C$i?C$t:C$i},C$t.clamp01=function(C$t){return C$t<0?0:C$t<1?C$t:1},C$t.lerp=function(C$t,C$e,C$i){return C$t+(C$e-C$t)*C$i},C$t.degreesToRadians=function(C$t){return C$t*cc.macro.RAD},C$t.radiansToDegrees=function(C$t){return C$t*cc.macro.DEG},cc.misc=C$e.exports=C$t},{"../platform/js":209}],265:[function(C$t,C$e,C$i){"use strict";function C$n(C$t){this.i=0,this.array=C$t}var C$r=C$n.prototype;C$r.remove=function(C$t){C$t=this.array.indexOf(C$t);0<=C$t&&this.removeAt(C$t)},C$r.removeAt=function(C$t){this.array.splice(C$t,1),C$t<=this.i&&--this.i},C$r.fastRemove=function(C$t){C$t=this.array.indexOf(C$t);0<=C$t&&this.fastRemoveAt(C$t)},C$r.fastRemoveAt=function(C$t){var C$e=this.array;C$e[C$t]=C$e[C$e.length-1],--C$e.length,C$t<=this.i&&--this.i},C$r.push=function(C$t){this.array.push(C$t)},C$e.exports=C$n},{}],266:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;(C$n=C$r.prototype).get=function(){},C$n.put=function(){},C$n.clear=function(){};var C$n=C$r;function C$r(){this.enabled=!1,this.count=0,this.maxSize=1024}C$i.default=C$n,cc.pool={},C$n.register=function(C$t,C$e){cc.pool[C$t]=C$e},C$e.exports=C$i.default},{}],267:[function(C$t,C$e,C$i){"use strict";cc._PrefabInfo=cc.Class({name:"cc.PrefabInfo",properties:{root:null,asset:null,fileId:"",sync:!1,_synced:{default:!1,serializable:!1}}}),C$e.exports={syncWithPrefab:function(C$t){var C$e=C$t._prefab;if(C$e._synced=!0,!C$e.asset)return cc.errorID(3701,C$t.name),void(C$t._prefab=null);var C$i=C$t._objFlags,C$n=C$t._parent,C$r=C$t._id,C$s=C$t._name,C$o=C$t._active,C$a=C$t._eulerAngles.x,C$h=C$t._eulerAngles.y,C$u=C$t._eulerAngles.z,C$_=C$t._localZOrder,C$d=C$t._globalZOrder,C$c=C$t._trs,C$f=C$c[0],C$p=C$c[1],C$m=C$c[2],C$l=(cc.game._isCloning=!0,C$e.asset.data);C$l._prefab._synced=!0,C$l._iN$t=C$t,cc.instantiate._clone(C$l,C$l),cc.game._isCloning=!1,C$t._objFlags=C$i,C$t._parent=C$n,C$t._id=C$r,C$t._prefab=C$e,C$t._name=C$s,C$t._active=C$o,C$t._localZOrder=C$_,C$t._globalZOrder=C$d,(C$c=C$t._trs)[0]=C$f,C$c[1]=C$p,C$c[2]=C$m,C$t._eulerAngles.x=C$a,C$t._eulerAngles.y=C$h,C$t._eulerAngles.z=C$u}}},{}],268:[function(C$t,C$e,C$h){"use strict";var C$u=C$t("../../platform/CCMacro"),C$_=C$t("./perf-counter"),C$i=!1,C$n=15,C$s=null,C$r=null,C$o=null;function C$a(){C$r&&C$r.isValid||((C$r=new cc.Node("PROFILER-NODE")).x=C$r.y=10,C$r.groupIndex=cc.Node.BuiltinGroupIndex.DEBUG,cc.Camera._setupDebugCamera(),C$r.zIndex=C$u.MAX_ZINDEX,cc.game.addPersistRootNode(C$r),(C$i=new cc.Node("LEFT-PANEL")).anchorX=C$i.anchorY=0,(C$t=C$i.addComponent(cc.Label)).fontSize=C$n,C$t.lineHeight=C$n,C$i.parent=C$r,(C$i=new cc.Node("RIGHT-PANEL")).anchorX=1,C$i.anchorY=0,C$i.x=200,(C$e=C$i.addComponent(cc.Label)).horizontalAlign=cc.Label.HorizontalAlign.RIGHT,C$e.fontSize=C$n,C$e.lineHeight=C$n,C$i.parent=C$r,cc.sys.browserType!==cc.sys.BROWSER_TYPE_BAIDU_GAME_SUB&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB&&(C$t.cacheMode=cc.Label.CacheMode.CHAR,C$e.cacheMode=cc.Label.CacheMode.CHAR),C$o={left:C$t,right:C$e});var C$t,C$e,C$i=cc.director._lastUpdate;C$s.frame._counter.start(C$i),C$s.logic._counter.start(C$i)}function C$c(){var C$t=performance.now();cc.director.isPaused()?C$s.frame._counter.start(C$t):C$s.logic._counter.end(C$t),C$s.render._counter.start(C$t)}function C$l(){var C$t,C$e=performance.now(),C$i=(C$s.render._counter.end(C$e),C$s.draws._counter.value=cc.renderer.drawCalls,C$s.frame._counter.end(C$e),C$s.fps._counter.frame(C$e),""),C$n="";for(C$t in C$s){var C$r=C$s[C$t];C$r._counter.sample(C$e),C$i+=C$r.desc+"\n",C$n+=C$r._counter.human()+"\n"}C$o&&(C$o.left.string=C$i,C$o.right.string=C$n)}cc.profiler=C$e.exports={isShowingStats:function(){return C$i},hideStats:function(){C$i&&(C$r&&(C$r.active=!1),cc.director.off(cc.Director.EVENT_BEFORE_UPDATE,C$a),cc.director.off(cc.Director.EVENT_AFTER_UPDATE,C$c),cc.director.off(cc.Director.EVENT_AFTER_DRAW,C$l),C$i=!1)},showStats:function(){if(!C$i){if(!C$s){C$s={frame:{desc:"Frame time (ms)",min:0,max:50,average:500},fps:{desc:"Framerate (FPS)",below:30,average:500},draws:{desc:"Draw call"},logic:{desc:"Game Logic (ms)",min:0,max:50,average:500,color:"#080"},render:{desc:"Renderer (ms)",min:0,max:50,average:500,color:"#f90"},mode:{desc:cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WebGL":"Canvas",min:1}};var C$t,C$e=performance.now();for(C$t in C$s)C$s[C$t]._counter=new C$_(C$t,C$s[C$t],C$e)}C$r&&(C$r.active=!0),cc.director.on(cc.Director.EVENT_BEFORE_UPDATE,C$a),cc.director.on(cc.Director.EVENT_AFTER_UPDATE,C$c),cc.director.on(cc.Director.EVENT_AFTER_DRAW,C$l),C$i=!0}}}},{"../../platform/CCMacro":194,"./perf-counter":270}],269:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.Counter",ctor:function(C$t,C$e,C$i){this._id=C$t,this._opts=C$e||{},this._value=0,this._total=0,this._averageValue=0,this._accumValue=0,this._accumSamples=0,this._accumStart=C$i},properties:{value:{get:function(){return this._value},set:function(C$t){this._value=C$t}}},_average:function(C$t,C$e){this._opts.average&&(this._accumValue+=C$t,++this._accumSamples,(C$t=C$e)-this._accumStart>=this._opts.average&&(this._averageValue=this._accumValue/this._accumSamples,this._accumValue=0,this._accumStart=C$t,this._accumSamples=0))},sample:function(C$t){this._average(this._value,C$t)},human:function(){var C$t=this._opts.average?this._averageValue:this._value;return Math.round(100*C$t)/100},alarm:function(){return this._opts.below&&this._value<this._opts.below||this._opts.over&&this._value>this._opts.over}});C$e.exports=C$n},{}],270:[function(C$t,C$e,C$i){"use strict";C$t=C$t("./counter"),C$t=cc.Class({name:"cc.PerfCounter",extends:C$t,ctor:function(C$t,C$e,C$i){this._time=C$i},start:function(C$t){this._time=C$t},end:function(C$t){this._value=C$t-this._time,this._average(this._value)},tick:function(){this.end(),this.start()},frame:function(C$t){var C$e=C$t-this._time;this._total++,(this._opts.average||1e3)<C$e&&(this._value=1e3*this._total/C$e,this._total=0,this._time=C$t,this._average(this._value))}});C$e.exports=C$t},{"./counter":269}],271:[function(C$t,C$e,C$i){"use strict";var C$n=new((C$t=C$t("../platform/js"))&&C$t.__esModule?C$t:{default:C$t}).default.Pool(2);function C$r(C$t){this.count=0,this.limit=C$t,this.datas={},this.head=null,this.tail=null}C$n.get=function(){return this._get()||{key:null,value:null,prev:null,next:null}},C$r.prototype.moveToHead=function(C$t){C$t.next=this.head,(C$t.prev=null)!==this.head&&(this.head.prev=C$t),this.head=C$t,null===this.tail&&(this.tail=C$t),this.count++,this.datas[C$t.key]=C$t},C$r.prototype.put=function(C$t,C$e){var C$i=C$n.get();C$i.key=C$t,C$i.value=C$e,this.count>=this.limit&&(C$t=this.tail,delete this.datas[C$t.key],this.count--,this.tail=C$t.prev,this.tail.next=null,C$t.prev=null,C$t.next=null,C$n.put(C$t)),this.moveToHead(C$i)},C$r.prototype.remove=function(C$t){null!==C$t.prev?C$t.prev.next=C$t.next:this.head=C$t.next,null!==C$t.next?C$t.next.prev=C$t.prev:this.tail=C$t.prev,delete this.datas[C$t.key],this.count--},C$r.prototype.get=function(C$t){C$t=this.datas[C$t];return C$t?(this.remove(C$t),this.moveToHead(C$t),C$t.value):null},C$r.prototype.clear=function(){this.count=0,this.datas={},this.head=null,this.tail=null},C$r.prototype.has=function(C$t){return!!this.datas[C$t]},C$r.prototype.delete=function(C$t){C$t=this.datas[C$t];this.remove(C$t)};var C$s=new C$r(100);cc.textUtils=C$e.exports={BASELINE_RATIO:.26,MIDDLE_RATIO:.37,BASELINE_OFFSET:0,label_wordRex:/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430-\u044f\u0410-\u042f\u0401\u0451]+|\S)/,label_symbolRex:/^[!,.:;'}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/,label_lastWordRex:/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+|\S)$/,label_lastEnglish:/[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+$/,label_firstEnglish:/^[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]/,highSurrogateRex:/[\uD800-\uDBFF]/,lowSurrogateRex:/[\uDC00-\uDFFF]/,label_wrapinspection:!0,__CHINESE_REG:/^[\u4E00-\u9FFF\u3400-\u4DFF]+$/,__JAPANESE_REG:/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g,__KOREAN_REG:/^[\u1100-\u11FF]|[\u3130-\u318F]|[\uA960-\uA97F]|[\uAC00-\uD7AF]|[\uD7B0-\uD7FF]+$/,isUnicodeCJK:function(C$t){return this.__CHINESE_REG.test(C$t)||this.__JAPANESE_REG.test(C$t)||this.__KOREAN_REG.test(C$t)},isUnicodeSpace:function(C$t){return 9<=(C$t=C$t.charCodeAt(0))&&C$t<=13||32===C$t||133===C$t||160===C$t||5760===C$t||8192<=C$t&&C$t<=8202||8232===C$t||8233===C$t||8239===C$t||8287===C$t||12288===C$t},safeMeasureText:function(C$t,C$e,C$i){var C$i=(C$i||C$t.font)+"ðŸŽ®"+C$e,C$n=C$s.get(C$i);if(null!==C$n)return C$n;C$n=C$t.measureText(C$e),C$t=C$n&&C$n.width||0;return C$s.put(C$i,C$t),C$t},_safeSubstring:function(C$t,C$e,C$i){var C$n=C$e,C$r=C$i,C$s=C$t[C$e];return this.lowSurrogateRex.test(C$s)&&C$n--,void 0!==C$i&&(C$i-1!==C$e?(C$e=C$t[C$i-1],this.highSurrogateRex.test(C$e)&&C$r--):this.highSurrogateRex.test(C$s)&&C$r++),C$t.substring(C$n,C$r)},fragmentText:function(C$h,C$t,C$e,C$u){var C$i=[];if(0===C$h.length||C$e<0)return C$i.push(""),C$i;for(var C$n=C$h;C$e<C$t&&1<C$n.length;){for(var C$_,C$r=C$n.length*(C$e/C$t)|0,C$s=this._safeSubstring(C$n,C$r),C$o=C$t-C$u(C$s),C$a=C$s,C$d=0,C$f=0;C$e<C$o&&C$f++<10;)C$o=C$t-C$u(C$s=this._safeSubstring(C$n,C$r=C$r*(C$e/C$o)|0));for(C$f=0;C$o<=C$e&&C$f++<10;)C$s&&(C$d=(C$_=this.label_wordRex.exec(C$s))?C$_[0].length:1,C$a=C$s),C$r+=C$d,C$o=C$t-C$u(C$s=this._safeSubstring(C$n,C$r));0===(C$r-=C$d)?C$a=this._safeSubstring(C$n,C$r=1):1===C$r&&this.highSurrogateRex.test(C$n[0])&&(C$a=this._safeSubstring(C$n,C$r=2));var C$c,C$l=this._safeSubstring(C$n,0,C$r);this.label_wrapinspection&&this.label_symbolRex.test(C$a||C$s)&&(0===(C$r-=(C$c=this.label_lastWordRex.exec(C$l))?C$c[0].length:0)&&(C$r=1),C$a=this._safeSubstring(C$n,C$r),C$l=this._safeSubstring(C$n,0,C$r)),this.label_firstEnglish.test(C$a)&&(C$c=this.label_lastEnglish.exec(C$l))&&C$l!==C$c[0]&&(C$r-=C$c[0].length,C$a=this._safeSubstring(C$n,C$r),C$l=this._safeSubstring(C$n,0,C$r)),(0===C$i.length||0<(C$l=C$l.trimLeft()).length)&&C$i.push(C$l),C$t=C$u(C$n=C$a||C$s)}return(0===C$i.length||0<(C$n=C$n.trimLeft()).length)&&C$i.push(C$n),C$i}}},{"../platform/js":209}],272:[function(C$t,C$e,C$i){"use strict";var C$r=C$t("../assets/CCTexture2D");cc.textureUtil=C$e.exports={loadImage:function(C$t,C$i,C$n){cc.assertID(C$t,3103);var C$e=cc.loader.getRes(C$t);return C$e?C$e.loaded?C$i&&C$i.call(C$n,null,C$e):C$e.once("load",function(){C$i&&C$i.call(C$n,null,C$e)},C$n):((C$e=new C$r).url=C$t,cc.loader.load({url:C$t,texture:C$e},function(C$t,C$e){if(C$t)return C$i&&C$i.call(C$n,C$t||new Error("Unknown error"));C$e.handleLoadedTexture(),C$i&&C$i.call(C$n,null,C$e)})),C$e},cacheImage:function(C$t,C$e){var C$i;if(C$t&&C$e)return(C$i=new C$r).initWithElement(C$e),cc.loader.flowOut({id:C$t,url:C$t,error:null,content:C$i,complete:!1}),C$i},postLoadTexture:function(C$i,C$n){!C$i.loaded&&C$i.url?cc.loader.load({url:C$i.url,skips:C$i._isCompressed()?void 0:["Loader"]},function(C$t,C$e){if(C$e){if(C$e instanceof cc.Texture2D)return cc.error("internal error: loader handle pipe must be skipped");C$i.loaded||(C$i._nativeAsset=C$e)}C$n&&C$n(C$t)}):C$n&&C$n()}}},{"../assets/CCTexture2D":50}],273:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./node-unit"),C$t=C$t("./node-mem-pool");C$e.exports={NodeMemPool:new C$t(C$n)}},{"./node-mem-pool":275,"./node-unit":276}],274:[function(C$t,C$e,C$i){"use strict";function C$n(C$t){this._unitClass=C$t,this._pool=[],this._findOrder=[]}var C$r=C$n.prototype;C$r._initNative=function(){this._nativeMemPool=new renderer.MemPool},C$r._buildUnit=function(C$t){return new this._unitClass(C$t,this)},C$r._destroyUnit=function(C$t){this._pool[C$t]=null;for(var C$e=0,C$i=this._findOrder.length;C$e<C$i;C$e++){var C$n=this._findOrder[C$e];if(C$n&&C$n.unitID==C$t){this._findOrder.splice(C$e,1);break}}},C$r._findUnitID=function(){for(var C$t=0,C$e=this._pool;C$e[C$t];)C$t++;return C$t},C$r.pop=function(){for(var C$t,C$e=null,C$i=0,C$n=this._findOrder,C$r=this._pool,C$s=C$n.length;C$i<C$s;C$i++){var C$o=C$n[C$i];if(C$o&&C$o.hasSpace()){C$e=C$o;break}}C$e||(C$t=this._findUnitID(),C$e=this._buildUnit(C$t),C$r[C$t]=C$e,C$n.push(C$e),C$i=C$n.length-1);C$r=C$n[0];return C$r!==C$e&&(C$n[0]=C$e,C$n[C$i]=C$r),C$e.pop()},C$r.push=function(C$t){var C$e=this._pool[C$t.unitID];return C$e.push(C$t.index),1<this._findOrder.length&&C$e.isAllFree()&&this._destroyUnit(C$t.unitID),C$e},C$e.exports=C$n},{}],275:[function(C$t,C$e,C$i){"use strict";function C$n(C$t){C$r.call(this,C$t)}var C$r=C$t("./mem-pool");function C$s(){}C$s.prototype=C$r.prototype;C$t=C$n.prototype=new C$s;C$t._initNative=function(){this._nativeMemPool=new renderer.NodeMemPool},C$t._destroyUnit=function(C$t){C$r.prototype._destroyUnit.call(this,C$t)},C$e.exports=C$n},{"./mem-pool":274}],276:[function(C$t,C$e,C$r){"use strict";function C$i(C$t,C$e){C$l.call(this,C$t,C$e);var C$i=this._contentNum;this.trsList=new C$s.FLOAT_ARRAY_TYPE(10*C$i),this.localMatList=new C$s.FLOAT_ARRAY_TYPE(16*C$i),this.worldMatList=new C$s.FLOAT_ARRAY_TYPE(16*C$i);for(var C$n=0;C$n<C$i;C$n++){var C$r=this._spacesData[C$n];C$r.trs=new C$s.FLOAT_ARRAY_TYPE(this.trsList.buffer,C$n*C$o,10),C$r.localMat=new C$s.FLOAT_ARRAY_TYPE(this.localMatList.buffer,C$n*C$a,16),C$r.worldMat=new C$s.FLOAT_ARRAY_TYPE(this.worldMatList.buffer,C$n*C$c,16)}}var C$s=C$t("../../value-types/utils"),C$o=(Uint32Array,10*C$s.FLOAT_BYTES),C$a=16*C$s.FLOAT_BYTES,C$c=16*C$s.FLOAT_BYTES,C$l=(Uint32Array,Uint32Array,Int32Array,Uint8Array,Uint8Array,Uint32Array,C$s.FLOAT_BYTES,C$t("./unit-base"));function C$n(){}C$n.prototype=C$l.prototype,C$i.prototype=new C$n,C$e.exports=C$i},{"../../value-types/utils":286,"./unit-base":277}],277:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e,C$i){C$i=C$i||128,this.unitID=C$t,this._memPool=C$e,this._data=new Uint16Array(2),this._data[0]=0,this._data[1]=0,this._contentNum=C$i,this._signData=new Uint16Array(2*this._contentNum),this._spacesData=[];for(var C$n=0;C$n<C$i;C$n++){var C$r=2*C$n;this._signData[0+C$r]=C$n+1,this._signData[1+C$r]=0,this._spacesData[C$n]={index:C$n,unitID:C$t}}this._signData[2*(C$i-1)]=65535}var C$r=C$n.prototype;C$r.hasSpace=function(){return 65535!==this._data[0]},C$r.isAllFree=function(){return 0==this._data[1]},C$r.pop=function(){var C$t=this._data[0];if(65535===C$t)return null;var C$e=2*C$t,C$t=this._spacesData[C$t];return this._signData[1+C$e]=1,this._data[0]=this._signData[0+C$e],this._data[1]++,C$t},C$r.push=function(C$t){var C$e=2*C$t;this._signData[1+C$e]=0,this._signData[0+C$e]=this._data[0],this._data[0]=C$t,this._data[1]--},C$r.dump=function(){for(var C$t=0,C$e=this._data[0],C$i="";65535!=C$e;)C$t++,C$i+=C$e+"->",C$e=this._signData[2*C$e+0];for(var C$n=0,C$r="",C$s=this._contentNum,C$o=0;C$o<C$s;C$o++)1==this._signData[2*C$o+1]&&(C$n++,C$r+=C$o+"->");var C$a=C$t+C$n;console.log("unitID:",this.unitID,"spaceNum:",C$t,"calc using num:",C$n,"store using num:",this._data[1],"calc total num:",C$a,"actually total num:",this._contentNum),console.log("free info:",C$i),console.log("using info:",C$r),C$n!=this._data[1]&&cc.error("using num error","calc using num:",C$n,"store using num:",this._data[1]),C$t+C$n!=this._contentNum&&cc.error("total num error","calc total num:",C$a,"actually total num:",this._contentNum)},C$e.exports=C$n},{}],278:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$s(C$t("./value-type")),C$h=C$s(C$t("../platform/CCClass")),C$r=C$s(C$t("../utils/misc"));function C$s(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$o(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$c(C$t,C$e,C$i){return C$e&&C$o(C$t.prototype,C$e),C$i&&C$o(C$t,C$i),C$t}function C$u(C$i){return function(){var C$t,C$e=C$a(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$a(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$a(C$t){return(C$a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$l=function(C$s){var C$t;C$t=C$s,(C$e=C$a).prototype=Object.create(C$t.prototype),(C$e.prototype.constructor=C$e).__proto__=C$t,C$u(C$a);function C$a(C$t,C$e,C$i,C$n){var C$r;return void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=255),(C$r=C$s.call(this)||this)._val=0,"object"==typeof C$t&&(C$e=C$t.g,C$i=C$t.b,C$n=C$t.a,C$t=C$t.r),C$r._val=(C$n<<24>>>0)+(C$i<<16)+(C$e<<8)+C$t,C$r}C$a.copy=function(C$t,C$e){return C$t.r=C$e.r,C$t.g=C$e.g,C$t.b=C$e.b,C$t.a=C$e.a,C$t},C$a.clone=function(C$t){return new C$a(C$t.r,C$t.g,C$t.b,C$t.a)},C$a.set=function(C$t,C$e,C$i,C$n,C$r){return void 0===C$i&&(C$i=255),void 0===C$n&&(C$n=255),void 0===C$r&&(C$r=255),C$t.r=C$e=void 0===C$e?255:C$e,C$t.g=C$i,C$t.b=C$n,C$t.a=C$r,C$t},C$a.fromHex=function(C$t,C$e){var C$i=(C$e>>16&255)/255,C$n=(C$e>>8&255)/255,C$r=(255&C$e)/255;return C$t.r=(C$e>>24)/255,C$t.g=C$i,C$t.b=C$n,C$t.a=C$r,C$t},C$a.add=function(C$t,C$e,C$i){return C$t.r=C$e.r+C$i.r,C$t.g=C$e.g+C$i.g,C$t.b=C$e.b+C$i.b,C$t.a=C$e.a+C$i.a,C$t},C$a.subtract=function(C$t,C$e,C$i){return C$t.r=C$e.r-C$i.r,C$t.g=C$e.g-C$i.g,C$t.b=C$e.b-C$i.b,C$t.a=C$e.a-C$i.a,C$t},C$a.multiply=function(C$t,C$e,C$i){return C$t.r=C$e.r*C$i.r,C$t.g=C$e.g*C$i.g,C$t.b=C$e.b*C$i.b,C$t.a=C$e.a*C$i.a,C$t},C$a.divide=function(C$t,C$e,C$i){return C$t.r=C$e.r/C$i.r,C$t.g=C$e.g/C$i.g,C$t.b=C$e.b/C$i.b,C$t.a=C$e.a/C$i.a,C$t},C$a.scale=function(C$t,C$e,C$i){return C$t.r=C$e.r*C$i,C$t.g=C$e.g*C$i,C$t.b=C$e.b*C$i,C$t.a=C$e.a*C$i,C$t},C$a.lerp=function(C$t,C$e,C$i,C$n){var C$r=C$e.r,C$s=C$e.g,C$o=C$e.b,C$e=C$e.a;return C$t.r=C$r+C$n*(C$i.r-C$r),C$t.g=C$s+C$n*(C$i.g-C$s),C$t.b=C$o+C$n*(C$i.b-C$o),C$t.a=C$e+C$n*(C$i.a-C$e),C$t},C$a.toArray=function(C$t,C$e,C$i){var C$n=C$e instanceof C$a||1<C$e.a?1/255:1;return C$t[(C$i=void 0===C$i?0:C$i)+0]=C$e.r*C$n,C$t[C$i+1]=C$e.g*C$n,C$t[C$i+2]=C$e.b*C$n,C$t[C$i+3]=C$e.a*C$n,C$t},C$a.fromArray=function(C$t,C$e,C$i){return C$e.r=255*C$t[(C$i=void 0===C$i?0:C$i)+0],C$e.g=255*C$t[C$i+1],C$e.b=255*C$t[C$i+2],C$e.a=255*C$t[C$i+3],C$e},C$c(C$a,null,[{key:"WHITE",get:function(){return new C$a(255,255,255,255)}},{key:"BLACK",get:function(){return new C$a(0,0,0,255)}},{key:"TRANSPARENT",get:function(){return new C$a(0,0,0,0)}},{key:"GRAY",get:function(){return new C$a(127.5,127.5,127.5)}},{key:"RED",get:function(){return new C$a(255,0,0)}},{key:"GREEN",get:function(){return new C$a(0,255,0)}},{key:"BLUE",get:function(){return new C$a(0,0,255)}},{key:"YELLOW",get:function(){return new C$a(255,235,4)}},{key:"ORANGE",get:function(){return new C$a(255,127,0)}},{key:"CYAN",get:function(){return new C$a(0,255,255)}},{key:"MAGENTA",get:function(){return new C$a(255,0,255)}}]);var C$e=C$a.prototype;return C$e.clone=function(){var C$t=new C$a;return C$t._val=this._val,C$t},C$e.equals=function(C$t){return C$t&&this._val===C$t._val},C$e.lerp=function(C$t,C$e,C$i){C$i=C$i||new C$a;var C$n=this.r,C$r=this.g,C$s=this.b,C$o=this.a;return C$i.r=C$n+(C$t.r-C$n)*C$e,C$i.g=C$r+(C$t.g-C$r)*C$e,C$i.b=C$s+(C$t.b-C$s)*C$e,C$i.a=C$o+(C$t.a-C$o)*C$e,C$i},C$e.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},C$e.getR=function(){return 255&this._val},C$e.setR=function(C$t){return C$t=~~C$r.default.clampf(C$t,0,255),this._val=(4294967040&this._val|C$t)>>>0,this},C$e.getG=function(){return(65280&this._val)>>8},C$e.setG=function(C$t){return C$t=~~C$r.default.clampf(C$t,0,255),this._val=(4294902015&this._val|C$t<<8)>>>0,this},C$e.getB=function(){return(16711680&this._val)>>16},C$e.setB=function(C$t){return C$t=~~C$r.default.clampf(C$t,0,255),this._val=(4278255615&this._val|C$t<<16)>>>0,this},C$e.getA=function(){return(4278190080&this._val)>>>24},C$e.setA=function(C$t){return C$t=~~C$r.default.clampf(C$t,0,255),this._val=(16777215&this._val|C$t<<24)>>>0,this},C$e.toCSS=function(C$t){return C$t&&"rgba"!==C$t?"rgb"===C$t?"rgb("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+")":"#"+this.toHEX(C$t):"rgba("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+","+(this.a/255).toFixed(2)+")"},C$e.fromHEX=function(C$t){C$t=0===C$t.indexOf("#")?C$t.substring(1):C$t;var C$e=parseInt(C$t.substr(0,2),16)||0,C$i=parseInt(C$t.substr(2,2),16)||0,C$n=parseInt(C$t.substr(4,2),16)||0,C$t=parseInt(C$t.substr(6,2),16)||255;return this._val=(C$t<<24>>>0)+(C$n<<16)+(C$i<<8)+C$e,this},C$e.toHEX=function(C$t){var C$e=[(this.r<16?"0":"")+(0|this.r).toString(16),(this.g<16?"0":"")+(0|this.g).toString(16),(this.b<16?"0":"")+(0|this.b).toString(16)],C$i=-1;if("#rgb"===C$t)for(C$i=0;C$i<C$e.length;++C$i)1<C$e[C$i].length&&(C$e[C$i]=C$e[C$i][0]);else if("#rrggbb"===C$t)for(C$i=0;C$i<C$e.length;++C$i)1===C$e[C$i].length&&(C$e[C$i]="0"+C$e[C$i]);else"#rrggbbaa"===C$t&&C$e.push((this.a<16?"0":"")+(0|this.a).toString(16));return C$e.join("")},C$e.toRGBValue=function(){return 16777215&this._val},C$e.fromHSV=function(C$t,C$e,C$i){var C$n,C$r,C$s;if(0===C$e)C$n=C$r=C$s=C$i;else if(0===C$i)C$n=C$r=C$s=0;else{1===C$t&&(C$t=0),C$t*=6;var C$o=Math.floor(C$t),C$t=C$t-C$o,C$a=C$i*(1-C$e),C$c=C$i*(1-C$e*C$t),C$l=C$i*(1-C$e*(1-C$t));switch(C$o){case 0:C$n=C$i,C$r=C$l,C$s=C$a;break;case 1:C$n=C$c,C$r=C$i,C$s=C$a;break;case 2:C$n=C$a,C$r=C$i,C$s=C$l;break;case 3:C$n=C$a,C$r=C$c,C$s=C$i;break;case 4:C$n=C$l,C$r=C$a,C$s=C$i;break;case 5:C$n=C$i,C$r=C$a,C$s=C$c}}return this._val=(this.a<<24>>>0)+((C$s*=255)<<16)+((C$r*=255)<<8)+(C$n*=255),this},C$e.toHSV=function(){var C$t=this.r/255,C$e=this.g/255,C$i=this.b/255,C$n={h:0,s:0,v:0},C$r=Math.max(C$t,C$e,C$i),C$s=Math.min(C$t,C$e,C$i);return C$n.v=C$r,C$n.s=C$r?(C$r-C$s)/C$r:0,C$n.s?(C$s=C$r-C$s,C$n.h=C$t===C$r?(C$e-C$i)/C$s:C$e===C$r?2+(C$i-C$t)/C$s:4+(C$t-C$e)/C$s,C$n.h/=6,C$n.h<0&&(C$n.h+=1)):C$n.h=0,C$n},C$e.set=function(C$t){return C$t._val?this._val=C$t._val:(this.r=C$t.r,this.g=C$t.g,this.b=C$t.b,this.a=C$t.a),this},C$e._fastSetA=function(C$t){this._val=(16777215&this._val|C$t<<24)>>>0},C$e.multiply=function(C$t){var C$e=(255&this._val)*C$t.r>>8,C$i=(65280&this._val)*C$t.g>>8,C$n=(16711680&this._val)*C$t.b>>8,C$t=((4278190080&this._val)>>>8)*C$t.a;return this._val=4278190080&C$t|16711680&C$n|65280&C$i|255&C$e,this},C$c(C$a,[{key:"r",get:function(){return this.getR()},set:function(C$t){this.setR(C$t)}},{key:"g",get:function(){return this.getG()},set:function(C$t){this.setG(C$t)}},{key:"b",get:function(){return this.getB()},set:function(C$t){this.setB(C$t)}},{key:"a",get:function(){return this.getA()},set:function(C$t){this.setA(C$t)}}]),C$a}(C$n.default);(C$i.default=C$l).div=C$l.divide,C$l.sub=C$l.subtract,C$l.mul=C$l.multiply,C$l.WHITE_R=C$l.WHITE,C$l.BLACK_R=C$l.BLACK,C$l.TRANSPARENT_R=C$l.TRANSPARENT,C$l.GRAY_R=C$l.GRAY,C$l.RED_R=C$l.RED,C$l.GREEN_R=C$l.GREEN,C$l.BLUE_R=C$l.BLUE,C$l.YELLOW_R=C$l.YELLOW,C$l.ORANGE_R=C$l.ORANGE,C$l.CYAN_R=C$l.CYAN,C$l.MAGENTA_R=C$l.MAGENTA,C$h.default.fastDefine("cc.Color",C$l,{r:0,g:0,b:0,a:255}),cc.Color=C$l,cc.color=function(C$t,C$e,C$i,C$n){return"string"!=typeof C$t?"object"==typeof C$t?new C$l(C$t.r,C$t.g,C$t.b,C$t.a):new C$l(C$t,C$e,C$i,C$n):(new C$l).fromHEX(C$t)},C$e.exports=C$i.default},{"../platform/CCClass":189,"../utils/misc":264,"./value-type":287}],279:[function(C$t,C$e,C$i){"use strict";var C$n={Vec2:C$i.__esModule=!0,Vec3:!0,Vec4:!0,Mat4:!0,Mat3:!0,Rect:!0,Size:!0,Color:!0,Quat:!0,Trs:!0},C$r=(C$i.Trs=C$i.Quat=C$i.Color=C$i.Size=C$i.Rect=C$i.Mat3=C$i.Mat4=C$i.Vec4=C$i.Vec3=C$i.Vec2=void 0,C$o(C$t("./vec2"))),C$r=(C$i.Vec2=C$r.default,C$o(C$t("./vec3"))),C$r=(C$i.Vec3=C$r.default,C$o(C$t("./vec4"))),C$r=(C$i.Vec4=C$r.default,C$o(C$t("./mat4"))),C$r=(C$i.Mat4=C$r.default,C$o(C$t("./mat3"))),C$r=(C$i.Mat3=C$r.default,C$o(C$t("./rect"))),C$r=(C$i.Rect=C$r.default,C$o(C$t("./size"))),C$r=(C$i.Size=C$r.default,C$o(C$t("./color"))),C$r=(C$i.Color=C$r.default,C$o(C$t("./quat"))),C$r=(C$i.Quat=C$r.default,C$o(C$t("./trs"))),C$s=(C$i.Trs=C$r.default,C$t("./utils"));function C$o(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}Object.keys(C$s).forEach(function(C$t){"default"!==C$t&&"__esModule"!==C$t&&(Object.prototype.hasOwnProperty.call(C$n,C$t)||(C$i[C$t]=C$s[C$t]))}),cc.math=C$e.exports},{"./color":278,"./mat3":280,"./mat4":281,"./quat":282,"./rect":283,"./size":284,"./trs":285,"./utils":286,"./vec2":288,"./vec3":289,"./vec4":290}],280:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$g=C$t("../value-types/utils"),C$o=(C$t=C$t("./vec3"))&&C$t.__esModule?C$t:{default:C$t};C$l.create=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){return new C$l(C$t=void 0===C$t?1:C$t,C$e=void 0===C$e?0:C$e,C$i=void 0===C$i?0:C$i,C$n=void 0===C$n?0:C$n,C$r=void 0===C$r?1:C$r,C$s=void 0===C$s?0:C$s,C$o=void 0===C$o?0:C$o,C$a=void 0===C$a?0:C$a,C$c=void 0===C$c?1:C$c)},C$l.clone=function(C$t){C$t=C$t.m;return new C$l(C$t[0],C$t[1],C$t[2],C$t[3],C$t[4],C$t[5],C$t[6],C$t[7],C$t[8])},C$l.copy=function(C$t,C$e){return C$t.m.set(C$e.m),C$t},C$l.set=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$h){var C$l=C$t.m;return C$l[0]=C$e,C$l[1]=C$i,C$l[2]=C$n,C$l[3]=C$r,C$l[4]=C$s,C$l[5]=C$o,C$l[6]=C$a,C$l[7]=C$c,C$l[8]=C$h,C$t},C$l.identity=function(C$t){var C$e=C$t.m;return C$e[0]=1,C$e[1]=0,C$e[2]=0,C$e[3]=0,C$e[4]=1,C$e[5]=0,C$e[6]=0,C$e[7]=0,C$e[8]=1,C$t},C$l.transpose=function(C$t,C$e){var C$i,C$n,C$r=C$e.m,C$s=C$t.m;return C$t===C$e?(C$e=C$r[1],C$i=C$r[2],C$n=C$r[5],C$s[1]=C$r[3],C$s[2]=C$r[6],C$s[3]=C$e,C$s[5]=C$r[7],C$s[6]=C$i,C$s[7]=C$n):(C$s[0]=C$r[0],C$s[1]=C$r[3],C$s[2]=C$r[6],C$s[3]=C$r[1],C$s[4]=C$r[4],C$s[5]=C$r[7],C$s[6]=C$r[2],C$s[7]=C$r[5],C$s[8]=C$r[8]),C$t},C$l.invert=function(C$h,C$t){var C$t=C$t.m,C$e=C$h.m,C$i=C$t[0],C$n=C$t[1],C$r=C$t[2],C$s=C$t[3],C$o=C$t[4],C$a=C$t[5],C$c=C$t[6],C$u=C$t[7],C$t=C$t[8],C$_=C$t*C$o-C$a*C$u,C$d=-C$t*C$s+C$a*C$c,C$f=C$u*C$s-C$o*C$c,C$l=C$i*C$_+C$n*C$d+C$r*C$f;return C$l&&(C$e[0]=C$_*(C$l=1/C$l),C$e[1]=(-C$t*C$n+C$r*C$u)*C$l,C$e[2]=(C$a*C$n-C$r*C$o)*C$l,C$e[3]=C$d*C$l,C$e[4]=(C$t*C$i-C$r*C$c)*C$l,C$e[5]=(-C$a*C$i+C$r*C$s)*C$l,C$e[6]=C$f*C$l,C$e[7]=(-C$u*C$i+C$n*C$c)*C$l,C$e[8]=(C$o*C$i-C$n*C$s)*C$l),C$h},C$l.adjoint=function(C$h,C$t){var C$t=C$t.m,C$e=C$h.m,C$i=C$t[0],C$n=C$t[1],C$r=C$t[2],C$s=C$t[3],C$o=C$t[4],C$a=C$t[5],C$c=C$t[6],C$l=C$t[7],C$t=C$t[8];return C$e[0]=C$o*C$t-C$a*C$l,C$e[1]=C$r*C$l-C$n*C$t,C$e[2]=C$n*C$a-C$r*C$o,C$e[3]=C$a*C$c-C$s*C$t,C$e[4]=C$i*C$t-C$r*C$c,C$e[5]=C$r*C$s-C$i*C$a,C$e[6]=C$s*C$l-C$o*C$c,C$e[7]=C$n*C$c-C$i*C$l,C$e[8]=C$i*C$o-C$n*C$s,C$h},C$l.determinant=function(C$t){var C$t=C$t.m,C$e=C$t[0],C$i=C$t[1],C$n=C$t[2],C$r=C$t[3],C$s=C$t[4],C$o=C$t[5],C$a=C$t[6],C$c=C$t[7],C$t=C$t[8];return C$e*(C$t*C$s-C$o*C$c)+C$i*(-C$t*C$r+C$o*C$a)+C$n*(C$c*C$r-C$s*C$a)},C$l.multiply=function(C$h,C$t,C$e){var C$t=C$t.m,C$e=C$e.m,C$i=C$h.m,C$n=C$t[0],C$r=C$t[1],C$s=C$t[2],C$o=C$t[3],C$a=C$t[4],C$c=C$t[5],C$l=C$t[6],C$u=C$t[7],C$t=C$t[8],C$_=C$e[0],C$d=C$e[1],C$f=C$e[2],C$p=C$e[3],C$m=C$e[4],C$y=C$e[5],C$g=C$e[6],C$v=C$e[7],C$e=C$e[8];return C$i[0]=C$_*C$n+C$d*C$o+C$f*C$l,C$i[1]=C$_*C$r+C$d*C$a+C$f*C$u,C$i[2]=C$_*C$s+C$d*C$c+C$f*C$t,C$i[3]=C$p*C$n+C$m*C$o+C$y*C$l,C$i[4]=C$p*C$r+C$m*C$a+C$y*C$u,C$i[5]=C$p*C$s+C$m*C$c+C$y*C$t,C$i[6]=C$g*C$n+C$v*C$o+C$e*C$l,C$i[7]=C$g*C$r+C$v*C$a+C$e*C$u,C$i[8]=C$g*C$s+C$v*C$c+C$e*C$t,C$h},C$l.multiplyMat4=function(C$h,C$t,C$e){var C$t=C$t.m,C$e=C$e.m,C$i=C$h.m,C$n=C$t[0],C$r=C$t[1],C$s=C$t[2],C$o=C$t[3],C$a=C$t[4],C$c=C$t[5],C$l=C$t[6],C$u=C$t[7],C$t=C$t[8],C$_=C$e[0],C$d=C$e[1],C$f=C$e[2],C$p=C$e[4],C$m=C$e[5],C$y=C$e[6],C$g=C$e[8],C$v=C$e[9],C$e=C$e[10];return C$i[0]=C$_*C$n+C$d*C$o+C$f*C$l,C$i[1]=C$_*C$r+C$d*C$a+C$f*C$u,C$i[2]=C$_*C$s+C$d*C$c+C$f*C$t,C$i[3]=C$p*C$n+C$m*C$o+C$y*C$l,C$i[4]=C$p*C$r+C$m*C$a+C$y*C$u,C$i[5]=C$p*C$s+C$m*C$c+C$y*C$t,C$i[6]=C$g*C$n+C$v*C$o+C$e*C$l,C$i[7]=C$g*C$r+C$v*C$a+C$e*C$u,C$i[8]=C$g*C$s+C$v*C$c+C$e*C$t,C$h},C$l.translate=function(C$t,C$e,C$i){var C$e=C$e.m,C$n=C$t.m,C$r=C$e[0],C$s=C$e[1],C$o=C$e[2],C$a=C$e[3],C$c=C$e[4],C$h=C$e[5],C$u=C$e[6],C$_=C$e[7],C$e=C$e[8],C$l=C$i.x,C$i=C$i.y;return C$n[0]=C$r,C$n[1]=C$s,C$n[2]=C$o,C$n[3]=C$a,C$n[4]=C$c,C$n[5]=C$h,C$n[6]=C$l*C$r+C$i*C$a+C$u,C$n[7]=C$l*C$s+C$i*C$c+C$_,C$n[8]=C$l*C$o+C$i*C$h+C$e,C$t},C$l.rotate=function(C$t,C$e,C$i){var C$e=C$e.m,C$n=C$t.m,C$r=C$e[0],C$s=C$e[1],C$o=C$e[2],C$a=C$e[3],C$c=C$e[4],C$h=C$e[5],C$u=C$e[6],C$_=C$e[7],C$e=C$e[8],C$l=Math.sin(C$i),C$i=Math.cos(C$i);return C$n[0]=C$i*C$r+C$l*C$a,C$n[1]=C$i*C$s+C$l*C$c,C$n[2]=C$i*C$o+C$l*C$h,C$n[3]=C$i*C$a-C$l*C$r,C$n[4]=C$i*C$c-C$l*C$s,C$n[5]=C$i*C$h-C$l*C$o,C$n[6]=C$u,C$n[7]=C$_,C$n[8]=C$e,C$t},C$l.scale=function(C$t,C$e,C$i){var C$n=C$i.x,C$i=C$i.y,C$e=C$e.m,C$r=C$t.m;return C$r[0]=C$n*C$e[0],C$r[1]=C$n*C$e[1],C$r[2]=C$n*C$e[2],C$r[3]=C$i*C$e[3],C$r[4]=C$i*C$e[4],C$r[5]=C$i*C$e[5],C$r[6]=C$e[6],C$r[7]=C$e[7],C$r[8]=C$e[8],C$t},C$l.fromMat4=function(C$t,C$e){var C$e=C$e.m,C$i=C$t.m;return C$i[0]=C$e[0],C$i[1]=C$e[1],C$i[2]=C$e[2],C$i[3]=C$e[4],C$i[4]=C$e[5],C$i[5]=C$e[6],C$i[6]=C$e[8],C$i[7]=C$e[9],C$i[8]=C$e[10],C$t},C$l.fromTranslation=function(C$t,C$e){var C$i=C$t.m;return C$i[0]=1,C$i[1]=0,C$i[2]=0,C$i[3]=0,C$i[4]=1,C$i[5]=0,C$i[6]=C$e.x,C$i[7]=C$e.y,C$i[8]=1,C$t},C$l.fromRotation=function(C$t,C$e){var C$i=Math.sin(C$e),C$e=Math.cos(C$e),C$n=C$t.m;return C$n[0]=C$e,C$n[1]=C$i,C$n[2]=0,C$n[3]=-C$i,C$n[4]=C$e,C$n[5]=0,C$n[6]=0,C$n[7]=0,C$n[8]=1,C$t},C$l.fromScaling=function(C$t,C$e){var C$i=C$t.m;return C$i[0]=C$e.x,C$i[1]=0,C$i[2]=0,C$i[3]=0,C$i[4]=C$e.y,C$i[5]=0,C$i[6]=0,C$i[7]=0,C$i[8]=1,C$t},C$l.fromQuat=function(C$t,C$e){var C$i=C$t.m,C$n=C$e.x,C$r=C$e.y,C$s=C$e.z,C$e=C$e.w,C$o=C$n+C$n,C$a=C$r+C$r,C$c=C$s+C$s,C$n=C$n*C$o,C$l=C$r*C$o,C$r=C$r*C$a,C$h=C$s*C$o,C$u=C$s*C$a,C$s=C$s*C$c,C$o=C$e*C$o,C$a=C$e*C$a,C$e=C$e*C$c;return C$i[0]=1-C$r-C$s,C$i[3]=C$l-C$e,C$i[6]=C$h+C$a,C$i[1]=C$l+C$e,C$i[4]=1-C$n-C$s,C$i[7]=C$u-C$o,C$i[2]=C$h-C$a,C$i[5]=C$u+C$o,C$i[8]=1-C$n-C$r,C$t},C$l.fromViewUp=function(C$t,C$e,C$i){C$n=new C$o.default(0,1,0),C$r=new C$o.default,C$s=new C$o.default;var C$n,C$r,C$s;return C$o.default.lengthSqr(C$e)<C$g.EPSILON*C$g.EPSILON?(C$l.identity(C$t),C$t):(C$o.default.normalize(C$r,C$o.default.cross(C$r,C$i=C$i||C$n,C$e)),C$o.default.lengthSqr(C$r)<C$g.EPSILON*C$g.EPSILON?C$l.identity(C$t):(C$o.default.cross(C$s,C$e,C$r),C$l.set(C$t,C$r.x,C$r.y,C$r.z,C$s.x,C$s.y,C$s.z,C$e.x,C$e.y,C$e.z)),C$t)},C$l.normalFromMat4=function(C$h,C$t){var C$t=C$t.m,C$e=C$h.m,C$i=C$t[0],C$n=C$t[1],C$u=C$t[2],C$r=C$t[3],C$_=C$t[4],C$d=C$t[5],C$f=C$t[6],C$s=C$t[7],C$o=C$t[8],C$a=C$t[9],C$c=C$t[10],C$l=C$t[11],C$p=C$t[12],C$m=C$t[13],C$y=C$t[14],C$t=C$t[15],C$g=C$i*C$d-C$n*C$_,C$v=C$i*C$f-C$u*C$_,C$x=C$i*C$s-C$r*C$_,C$b=C$n*C$f-C$u*C$d,C$A=C$n*C$s-C$r*C$d,C$C=C$u*C$s-C$r*C$f,C$S=C$o*C$m-C$a*C$p,C$T=C$o*C$y-C$c*C$p,C$o=C$o*C$t-C$l*C$p,C$w=C$a*C$y-C$c*C$m,C$a=C$a*C$t-C$l*C$m,C$c=C$c*C$t-C$l*C$y,C$l=C$g*C$c-C$v*C$a+C$x*C$w+C$b*C$o-C$A*C$T+C$C*C$S;return C$l&&(C$e[0]=(C$d*C$c-C$f*C$a+C$s*C$w)*(C$l=1/C$l),C$e[1]=(C$f*C$o-C$_*C$c-C$s*C$T)*C$l,C$e[2]=(C$_*C$a-C$d*C$o+C$s*C$S)*C$l,C$e[3]=(C$u*C$a-C$n*C$c-C$r*C$w)*C$l,C$e[4]=(C$i*C$c-C$u*C$o+C$r*C$T)*C$l,C$e[5]=(C$n*C$o-C$i*C$a-C$r*C$S)*C$l,C$e[6]=(C$m*C$C-C$y*C$A+C$t*C$b)*C$l,C$e[7]=(C$y*C$x-C$p*C$C-C$t*C$v)*C$l,C$e[8]=(C$p*C$A-C$m*C$x+C$t*C$g)*C$l),C$h},C$l.frob=function(C$t){C$t=C$t.m;return Math.sqrt(Math.pow(C$t[0],2)+Math.pow(C$t[1],2)+Math.pow(C$t[2],2)+Math.pow(C$t[3],2)+Math.pow(C$t[4],2)+Math.pow(C$t[5],2)+Math.pow(C$t[6],2)+Math.pow(C$t[7],2)+Math.pow(C$t[8],2))},C$l.add=function(C$t,C$e,C$i){var C$e=C$e.m,C$i=C$i.m,C$n=C$t.m;return C$n[0]=C$e[0]+C$i[0],C$n[1]=C$e[1]+C$i[1],C$n[2]=C$e[2]+C$i[2],C$n[3]=C$e[3]+C$i[3],C$n[4]=C$e[4]+C$i[4],C$n[5]=C$e[5]+C$i[5],C$n[6]=C$e[6]+C$i[6],C$n[7]=C$e[7]+C$i[7],C$n[8]=C$e[8]+C$i[8],C$t},C$l.subtract=function(C$t,C$e,C$i){var C$e=C$e.m,C$i=C$i.m,C$n=C$t.m;return C$n[0]=C$e[0]-C$i[0],C$n[1]=C$e[1]-C$i[1],C$n[2]=C$e[2]-C$i[2],C$n[3]=C$e[3]-C$i[3],C$n[4]=C$e[4]-C$i[4],C$n[5]=C$e[5]-C$i[5],C$n[6]=C$e[6]-C$i[6],C$n[7]=C$e[7]-C$i[7],C$n[8]=C$e[8]-C$i[8],C$t},C$l.multiplyScalar=function(C$t,C$e,C$i){var C$e=C$e.m,C$n=C$t.m;return C$n[0]=C$e[0]*C$i,C$n[1]=C$e[1]*C$i,C$n[2]=C$e[2]*C$i,C$n[3]=C$e[3]*C$i,C$n[4]=C$e[4]*C$i,C$n[5]=C$e[5]*C$i,C$n[6]=C$e[6]*C$i,C$n[7]=C$e[7]*C$i,C$n[8]=C$e[8]*C$i,C$t},C$l.multiplyScalarAndAdd=function(C$t,C$e,C$i,C$n){var C$e=C$e.m,C$i=C$i.m,C$r=C$t.m;return C$r[0]=C$e[0]+C$i[0]*C$n,C$r[1]=C$e[1]+C$i[1]*C$n,C$r[2]=C$e[2]+C$i[2]*C$n,C$r[3]=C$e[3]+C$i[3]*C$n,C$r[4]=C$e[4]+C$i[4]*C$n,C$r[5]=C$e[5]+C$i[5]*C$n,C$r[6]=C$e[6]+C$i[6]*C$n,C$r[7]=C$e[7]+C$i[7]*C$n,C$r[8]=C$e[8]+C$i[8]*C$n,C$t},C$l.exactEquals=function(C$t,C$e){C$t=C$t.m,C$e=C$e.m;return C$t[0]===C$e[0]&&C$t[1]===C$e[1]&&C$t[2]===C$e[2]&&C$t[3]===C$e[3]&&C$t[4]===C$e[4]&&C$t[5]===C$e[5]&&C$t[6]===C$e[6]&&C$t[7]===C$e[7]&&C$t[8]===C$e[8]},C$l.equals=function(C$t,C$e){var C$t=C$t.m,C$e=C$e.m,C$i=C$t[0],C$n=C$t[1],C$r=C$t[2],C$s=C$t[3],C$o=C$t[4],C$a=C$t[5],C$c=C$t[6],C$l=C$t[7],C$t=C$t[8],C$h=C$e[0],C$u=C$e[1],C$_=C$e[2],C$d=C$e[3],C$f=C$e[4],C$p=C$e[5],C$m=C$e[6],C$y=C$e[7],C$e=C$e[8];return Math.abs(C$i-C$h)<=C$g.EPSILON*Math.max(1,Math.abs(C$i),Math.abs(C$h))&&Math.abs(C$n-C$u)<=C$g.EPSILON*Math.max(1,Math.abs(C$n),Math.abs(C$u))&&Math.abs(C$r-C$_)<=C$g.EPSILON*Math.max(1,Math.abs(C$r),Math.abs(C$_))&&Math.abs(C$s-C$d)<=C$g.EPSILON*Math.max(1,Math.abs(C$s),Math.abs(C$d))&&Math.abs(C$o-C$f)<=C$g.EPSILON*Math.max(1,Math.abs(C$o),Math.abs(C$f))&&Math.abs(C$a-C$p)<=C$g.EPSILON*Math.max(1,Math.abs(C$a),Math.abs(C$p))&&Math.abs(C$c-C$m)<=C$g.EPSILON*Math.max(1,Math.abs(C$c),Math.abs(C$m))&&Math.abs(C$l-C$y)<=C$g.EPSILON*Math.max(1,Math.abs(C$l),Math.abs(C$y))&&Math.abs(C$t-C$e)<=C$g.EPSILON*Math.max(1,Math.abs(C$t),Math.abs(C$e))},C$l.toArray=function(C$t,C$e,C$i){void 0===C$i&&(C$i=0);for(var C$n=C$e.m,C$r=0;C$r<9;C$r++)C$t[C$i+C$r]=C$n[C$r];return C$t},C$l.fromArray=function(C$t,C$e,C$i){void 0===C$i&&(C$i=0);for(var C$n=C$t.m,C$r=0;C$r<9;C$r++)C$n[C$r]=C$e[C$i+C$r];return C$t},C$l.prototype.toString=function(){var C$t=this.m;return"mat3("+C$t[0]+", "+C$t[1]+", "+C$t[2]+", "+C$t[3]+", "+C$t[4]+", "+C$t[5]+", "+C$t[6]+", "+C$t[7]+", "+C$t[8]+")"};C$t=C$l;function C$l(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){var C$l;void 0===C$t&&(C$t=1),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),void 0===C$r&&(C$r=1),void 0===C$s&&(C$s=0),void 0===C$o&&(C$o=0),void 0===C$a&&(C$a=0),void 0===C$c&&(C$c=1),this.m=void 0,C$t instanceof C$g.FLOAT_ARRAY_TYPE?this.m=C$t:(this.m=new C$g.FLOAT_ARRAY_TYPE(9),(C$l=this.m)[0]=C$t,C$l[1]=C$e,C$l[2]=C$i,C$l[3]=C$n,C$l[4]=C$r,C$l[5]=C$s,C$l[6]=C$o,C$l[7]=C$a,C$l[8]=C$c)}(C$i.default=C$t).sub=C$t.subtract,C$t.mul=C$t.multiply,C$t.IDENTITY=Object.freeze(new C$t),cc.Mat3=C$t,C$e.exports=C$i.default},{"../value-types/utils":286,"./vec3":289}],281:[function(C$e,C$i,C$r){"use strict";C$r.__esModule=!0,C$r.default=void 0;var C$t=C$c(C$e("./value-type")),C$s=C$c(C$e("../platform/CCClass")),C$o=C$c(C$e("./vec3")),C$a=C$c(C$e("./quat")),C$S=C$e("./utils"),C$u=C$c(C$e("./mat3"));function C$c(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$l(C$i){return function(){var C$t,C$e=C$h(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$h(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$h(C$t){return(C$h=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$T,C$m=0,C$y=0,C$g=0,C$v=0,C$x=0,C$b=0,C$A=0,C$C=0,C$w=0,C$E=0,C$M=0,C$I=0,C$p=0,C$B=0,C$R=0,C$P=0,C$D=(C$T=C$t.default,C$e=C$T,(C$t=C$n).prototype=Object.create(C$e.prototype),(C$t.prototype.constructor=C$t).__proto__=C$e,C$l(C$n),(C$t=C$n.prototype).mul=function(C$t,C$e){return C$n.multiply(C$e||new C$n,this,C$t)},C$t.mulScalar=function(C$t,C$e){C$n.multiplyScalar(C$e||new C$n,this,C$t)},C$t.sub=function(C$t,C$e){C$n.subtract(C$e||new C$n,this,C$t)},C$n.clone=function(C$t){C$t=C$t.m;return new C$n(C$t[0],C$t[1],C$t[2],C$t[3],C$t[4],C$t[5],C$t[6],C$t[7],C$t[8],C$t[9],C$t[10],C$t[11],C$t[12],C$t[13],C$t[14],C$t[15])},C$n.copy=function(C$t,C$e){var C$i=C$t.m,C$e=C$e.m;return C$i[0]=C$e[0],C$i[1]=C$e[1],C$i[2]=C$e[2],C$i[3]=C$e[3],C$i[4]=C$e[4],C$i[5]=C$e[5],C$i[6]=C$e[6],C$i[7]=C$e[7],C$i[8]=C$e[8],C$i[9]=C$e[9],C$i[10]=C$e[10],C$i[11]=C$e[11],C$i[12]=C$e[12],C$i[13]=C$e[13],C$i[14]=C$e[14],C$i[15]=C$e[15],C$t},C$n.set=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$h,C$u,C$_,C$d,C$f,C$p,C$m,C$y){var C$l=C$t.m;return C$l[0]=C$e,C$l[1]=C$i,C$l[2]=C$n,C$l[3]=C$r,C$l[4]=C$s,C$l[5]=C$o,C$l[6]=C$a,C$l[7]=C$c,C$l[8]=C$h,C$l[9]=C$u,C$l[10]=C$_,C$l[11]=C$d,C$l[12]=C$f,C$l[13]=C$p,C$l[14]=C$m,C$l[15]=C$y,C$t},C$n.identity=function(C$t){var C$e=C$t.m;return C$e[0]=1,C$e[1]=0,C$e[2]=0,C$e[3]=0,C$e[4]=0,C$e[5]=1,C$e[6]=0,C$e[7]=0,C$e[8]=0,C$e[9]=0,C$e[10]=1,C$e[11]=0,C$e[12]=0,C$e[13]=0,C$e[14]=0,C$e[15]=1,C$t},C$n.transpose=function(C$t,C$e){var C$i,C$n,C$r,C$s,C$o,C$a=C$t.m,C$c=C$e.m;return C$t===C$e?(C$e=C$c[1],C$i=C$c[2],C$n=C$c[3],C$r=C$c[6],C$s=C$c[7],C$o=C$c[11],C$a[1]=C$c[4],C$a[2]=C$c[8],C$a[3]=C$c[12],C$a[4]=C$e,C$a[6]=C$c[9],C$a[7]=C$c[13],C$a[8]=C$i,C$a[9]=C$r,C$a[11]=C$c[14],C$a[12]=C$n,C$a[13]=C$s,C$a[14]=C$o):(C$a[0]=C$c[0],C$a[1]=C$c[4],C$a[2]=C$c[8],C$a[3]=C$c[12],C$a[4]=C$c[1],C$a[5]=C$c[5],C$a[6]=C$c[9],C$a[7]=C$c[13],C$a[8]=C$c[2],C$a[9]=C$c[6],C$a[10]=C$c[10],C$a[11]=C$c[14],C$a[12]=C$c[3],C$a[13]=C$c[7],C$a[14]=C$c[11],C$a[15]=C$c[15]),C$t},C$n.invert=function(C$h,C$t){var C$t=C$t.m,C$t=(C$m=C$t[0],C$y=C$t[1],C$g=C$t[2],C$v=C$t[3],C$x=C$t[4],C$b=C$t[5],C$A=C$t[6],C$C=C$t[7],C$w=C$t[8],C$E=C$t[9],C$M=C$t[10],C$I=C$t[11],C$p=C$t[12],C$B=C$t[13],C$R=C$t[14],C$P=C$t[15],C$m*C$b-C$y*C$x),C$e=C$m*C$A-C$g*C$x,C$i=C$m*C$C-C$v*C$x,C$n=C$y*C$A-C$g*C$b,C$r=C$y*C$C-C$v*C$b,C$s=C$g*C$C-C$v*C$A,C$o=C$w*C$B-C$E*C$p,C$a=C$w*C$R-C$M*C$p,C$u=C$w*C$P-C$I*C$p,C$_=C$E*C$R-C$M*C$B,C$d=C$E*C$P-C$I*C$B,C$f=C$M*C$P-C$I*C$R,C$c=C$t*C$f-C$e*C$d+C$i*C$_+C$n*C$u-C$r*C$a+C$s*C$o;if(0==C$c)return null;var C$l=C$h.m;return C$l[0]=(C$b*C$f-C$A*C$d+C$C*C$_)*(C$c=1/C$c),C$l[1]=(C$g*C$d-C$y*C$f-C$v*C$_)*C$c,C$l[2]=(C$B*C$s-C$R*C$r+C$P*C$n)*C$c,C$l[3]=(C$M*C$r-C$E*C$s-C$I*C$n)*C$c,C$l[4]=(C$A*C$u-C$x*C$f-C$C*C$a)*C$c,C$l[5]=(C$m*C$f-C$g*C$u+C$v*C$a)*C$c,C$l[6]=(C$R*C$i-C$p*C$s-C$P*C$e)*C$c,C$l[7]=(C$w*C$s-C$M*C$i+C$I*C$e)*C$c,C$l[8]=(C$x*C$d-C$b*C$u+C$C*C$o)*C$c,C$l[9]=(C$y*C$u-C$m*C$d-C$v*C$o)*C$c,C$l[10]=(C$p*C$r-C$B*C$i+C$P*C$t)*C$c,C$l[11]=(C$E*C$i-C$w*C$r-C$I*C$t)*C$c,C$l[12]=(C$b*C$a-C$x*C$_-C$A*C$o)*C$c,C$l[13]=(C$m*C$_-C$y*C$a+C$g*C$o)*C$c,C$l[14]=(C$B*C$e-C$p*C$n-C$R*C$t)*C$c,C$l[15]=(C$w*C$n-C$E*C$e+C$M*C$t)*C$c,C$h},C$n.determinant=function(C$t){C$t=C$t.m;return C$m=C$t[0],C$y=C$t[1],C$g=C$t[2],C$v=C$t[3],C$x=C$t[4],C$b=C$t[5],C$A=C$t[6],C$C=C$t[7],C$w=C$t[8],C$E=C$t[9],C$M=C$t[10],C$I=C$t[11],C$p=C$t[12],C$B=C$t[13],C$R=C$t[14],C$P=C$t[15],(C$m*C$b-C$y*C$x)*(C$M*C$P-C$I*C$R)-(C$m*C$A-C$g*C$x)*(C$E*C$P-C$I*C$B)+(C$m*C$C-C$v*C$x)*(C$E*C$R-C$M*C$B)+(C$y*C$A-C$g*C$b)*(C$w*C$P-C$I*C$p)-(C$y*C$C-C$v*C$b)*(C$w*C$R-C$M*C$p)+(C$g*C$C-C$v*C$A)*(C$w*C$B-C$E*C$p)},C$n.multiply=function(C$t,C$e,C$i){var C$n=C$t.m,C$e=C$e.m,C$i=C$i.m,C$e=(C$m=C$e[0],C$y=C$e[1],C$g=C$e[2],C$v=C$e[3],C$x=C$e[4],C$b=C$e[5],C$A=C$e[6],C$C=C$e[7],C$w=C$e[8],C$E=C$e[9],C$M=C$e[10],C$I=C$e[11],C$p=C$e[12],C$B=C$e[13],C$R=C$e[14],C$P=C$e[15],C$i[0]),C$r=C$i[1],C$s=C$i[2],C$o=C$i[3];return C$n[0]=C$e*C$m+C$r*C$x+C$s*C$w+C$o*C$p,C$n[1]=C$e*C$y+C$r*C$b+C$s*C$E+C$o*C$B,C$n[2]=C$e*C$g+C$r*C$A+C$s*C$M+C$o*C$R,C$n[3]=C$e*C$v+C$r*C$C+C$s*C$I+C$o*C$P,C$e=C$i[4],C$r=C$i[5],C$s=C$i[6],C$o=C$i[7],C$n[4]=C$e*C$m+C$r*C$x+C$s*C$w+C$o*C$p,C$n[5]=C$e*C$y+C$r*C$b+C$s*C$E+C$o*C$B,C$n[6]=C$e*C$g+C$r*C$A+C$s*C$M+C$o*C$R,C$n[7]=C$e*C$v+C$r*C$C+C$s*C$I+C$o*C$P,C$e=C$i[8],C$r=C$i[9],C$s=C$i[10],C$o=C$i[11],C$n[8]=C$e*C$m+C$r*C$x+C$s*C$w+C$o*C$p,C$n[9]=C$e*C$y+C$r*C$b+C$s*C$E+C$o*C$B,C$n[10]=C$e*C$g+C$r*C$A+C$s*C$M+C$o*C$R,C$n[11]=C$e*C$v+C$r*C$C+C$s*C$I+C$o*C$P,C$e=C$i[12],C$r=C$i[13],C$s=C$i[14],C$o=C$i[15],C$n[12]=C$e*C$m+C$r*C$x+C$s*C$w+C$o*C$p,C$n[13]=C$e*C$y+C$r*C$b+C$s*C$E+C$o*C$B,C$n[14]=C$e*C$g+C$r*C$A+C$s*C$M+C$o*C$R,C$n[15]=C$e*C$v+C$r*C$C+C$s*C$I+C$o*C$P,C$t},C$n.transform=function(C$t,C$e,C$i){var C$n=C$i.x,C$r=C$i.y,C$i=C$i.z,C$s=C$t.m,C$o=C$e.m;return C$e===C$t?(C$s[12]=C$o[0]*C$n+C$o[4]*C$r+C$o[8]*C$i+C$o[12],C$s[13]=C$o[1]*C$n+C$o[5]*C$r+C$o[9]*C$i+C$o[13],C$s[14]=C$o[2]*C$n+C$o[6]*C$r+C$o[10]*C$i+C$o[14],C$s[15]=C$o[3]*C$n+C$o[7]*C$r+C$o[11]*C$i+C$o[15]):(C$m=C$o[0],C$y=C$o[1],C$g=C$o[2],C$v=C$o[3],C$x=C$o[4],C$b=C$o[5],C$A=C$o[6],C$C=C$o[7],C$w=C$o[8],C$E=C$o[9],C$M=C$o[10],C$I=C$o[11],C$p=C$o[12],C$B=C$o[13],C$R=C$o[14],C$P=C$o[15],C$s[0]=C$m,C$s[1]=C$y,C$s[2]=C$g,C$s[3]=C$v,C$s[4]=C$x,C$s[5]=C$b,C$s[6]=C$A,C$s[7]=C$C,C$s[8]=C$w,C$s[9]=C$E,C$s[10]=C$M,C$s[11]=C$I,C$s[12]=C$m*C$n+C$x*C$r+C$w*C$i+C$o[12],C$s[13]=C$y*C$n+C$b*C$r+C$E*C$i+C$o[13],C$s[14]=C$g*C$n+C$A*C$r+C$M*C$i+C$o[14],C$s[15]=C$v*C$n+C$C*C$r+C$I*C$i+C$o[15]),C$t},C$n.translate=function(C$t,C$e,C$i){var C$n=C$t.m,C$r=C$e.m;return C$e===C$t?(C$n[12]+=C$i.x,C$n[13]+=C$i.y,C$n[14]+=C$i.z):(C$n[0]=C$r[0],C$n[1]=C$r[1],C$n[2]=C$r[2],C$n[3]=C$r[3],C$n[4]=C$r[4],C$n[5]=C$r[5],C$n[6]=C$r[6],C$n[7]=C$r[7],C$n[8]=C$r[8],C$n[9]=C$r[9],C$n[10]=C$r[10],C$n[11]=C$r[11],C$n[12]+=C$i.x,C$n[13]+=C$i.y,C$n[14]+=C$i.z,C$n[15]=C$r[15]),C$t},C$n.scale=function(C$t,C$e,C$i){var C$n=C$i.x,C$r=C$i.y,C$i=C$i.z,C$s=C$t.m,C$e=C$e.m;return C$s[0]=C$e[0]*C$n,C$s[1]=C$e[1]*C$n,C$s[2]=C$e[2]*C$n,C$s[3]=C$e[3]*C$n,C$s[4]=C$e[4]*C$r,C$s[5]=C$e[5]*C$r,C$s[6]=C$e[6]*C$r,C$s[7]=C$e[7]*C$r,C$s[8]=C$e[8]*C$i,C$s[9]=C$e[9]*C$i,C$s[10]=C$e[10]*C$i,C$s[11]=C$e[11]*C$i,C$s[12]=C$e[12],C$s[13]=C$e[13],C$s[14]=C$e[14],C$s[15]=C$e[15],C$t},C$n.rotate=function(C$h,C$u,C$t,C$e){var C$i=C$e.x,C$n=C$e.y,C$e=C$e.z,C$r=Math.sqrt(C$i*C$i+C$n*C$n+C$e*C$e);if(Math.abs(C$r)<C$S.EPSILON)return null;C$i*=C$r=1/C$r,C$n*=C$r,C$e*=C$r;var C$r=Math.sin(C$t),C$t=Math.cos(C$t),C$s=1-C$t,C$o=C$u.m,C$a=(C$m=C$o[0],C$y=C$o[1],C$g=C$o[2],C$v=C$o[3],C$x=C$o[4],C$b=C$o[5],C$A=C$o[6],C$C=C$o[7],C$w=C$o[8],C$E=C$o[9],C$M=C$o[10],C$I=C$o[11],C$i*C$i*C$s+C$t),C$c=C$n*C$i*C$s+C$e*C$r,C$l=C$e*C$i*C$s-C$n*C$r,C$_=C$i*C$n*C$s-C$e*C$r,C$d=C$n*C$n*C$s+C$t,C$f=C$e*C$n*C$s+C$i*C$r,C$p=C$i*C$e*C$s+C$n*C$r,C$n=C$n*C$e*C$s-C$i*C$r,C$i=C$e*C$e*C$s+C$t,C$r=C$h.m;return C$r[0]=C$m*C$a+C$x*C$c+C$w*C$l,C$r[1]=C$y*C$a+C$b*C$c+C$E*C$l,C$r[2]=C$g*C$a+C$A*C$c+C$M*C$l,C$r[3]=C$v*C$a+C$C*C$c+C$I*C$l,C$r[4]=C$m*C$_+C$x*C$d+C$w*C$f,C$r[5]=C$y*C$_+C$b*C$d+C$E*C$f,C$r[6]=C$g*C$_+C$A*C$d+C$M*C$f,C$r[7]=C$v*C$_+C$C*C$d+C$I*C$f,C$r[8]=C$m*C$p+C$x*C$n+C$w*C$i,C$r[9]=C$y*C$p+C$b*C$n+C$E*C$i,C$r[10]=C$g*C$p+C$A*C$n+C$M*C$i,C$r[11]=C$v*C$p+C$C*C$n+C$I*C$i,C$u!==C$h&&(C$r[12]=C$o[12],C$r[13]=C$o[13],C$r[14]=C$o[14],C$r[15]=C$o[15]),C$h},C$n.rotateX=function(C$t,C$e,C$i){var C$n=C$t.m,C$r=C$e.m,C$s=Math.sin(C$i),C$i=Math.cos(C$i),C$o=C$r[4],C$a=C$r[5],C$c=C$r[6],C$l=C$r[7],C$h=C$r[8],C$u=C$r[9],C$_=C$r[10],C$d=C$r[11];return C$e!==C$t&&(C$n[0]=C$r[0],C$n[1]=C$r[1],C$n[2]=C$r[2],C$n[3]=C$r[3],C$n[12]=C$r[12],C$n[13]=C$r[13],C$n[14]=C$r[14],C$n[15]=C$r[15]),C$n[4]=C$o*C$i+C$h*C$s,C$n[5]=C$a*C$i+C$u*C$s,C$n[6]=C$c*C$i+C$_*C$s,C$n[7]=C$l*C$i+C$d*C$s,C$n[8]=C$h*C$i-C$o*C$s,C$n[9]=C$u*C$i-C$a*C$s,C$n[10]=C$_*C$i-C$c*C$s,C$n[11]=C$d*C$i-C$l*C$s,C$t},C$n.rotateY=function(C$t,C$e,C$i){var C$n=C$t.m,C$r=C$e.m,C$s=Math.sin(C$i),C$i=Math.cos(C$i),C$o=C$r[0],C$a=C$r[1],C$c=C$r[2],C$l=C$r[3],C$h=C$r[8],C$u=C$r[9],C$_=C$r[10],C$d=C$r[11];return C$e!==C$t&&(C$n[4]=C$r[4],C$n[5]=C$r[5],C$n[6]=C$r[6],C$n[7]=C$r[7],C$n[12]=C$r[12],C$n[13]=C$r[13],C$n[14]=C$r[14],C$n[15]=C$r[15]),C$n[0]=C$o*C$i-C$h*C$s,C$n[1]=C$a*C$i-C$u*C$s,C$n[2]=C$c*C$i-C$_*C$s,C$n[3]=C$l*C$i-C$d*C$s,C$n[8]=C$o*C$s+C$h*C$i,C$n[9]=C$a*C$s+C$u*C$i,C$n[10]=C$c*C$s+C$_*C$i,C$n[11]=C$l*C$s+C$d*C$i,C$t},C$n.rotateZ=function(C$t,C$e,C$i){var C$n=C$e.m,C$r=C$t.m,C$s=Math.sin(C$i),C$i=Math.cos(C$i),C$o=C$e.m[0],C$a=C$e.m[1],C$c=C$e.m[2],C$l=C$e.m[3],C$h=C$e.m[4],C$u=C$e.m[5],C$_=C$e.m[6],C$d=C$e.m[7];return C$e!==C$t&&(C$r[8]=C$n[8],C$r[9]=C$n[9],C$r[10]=C$n[10],C$r[11]=C$n[11],C$r[12]=C$n[12],C$r[13]=C$n[13],C$r[14]=C$n[14],C$r[15]=C$n[15]),C$r[0]=C$o*C$i+C$h*C$s,C$r[1]=C$a*C$i+C$u*C$s,C$r[2]=C$c*C$i+C$_*C$s,C$r[3]=C$l*C$i+C$d*C$s,C$r[4]=C$h*C$i-C$o*C$s,C$r[5]=C$u*C$i-C$a*C$s,C$r[6]=C$_*C$i-C$c*C$s,C$r[7]=C$d*C$i-C$l*C$s,C$t},C$n.fromTranslation=function(C$t,C$e){var C$i=C$t.m;return C$i[0]=1,C$i[1]=0,C$i[2]=0,C$i[3]=0,C$i[4]=0,C$i[5]=1,C$i[6]=0,C$i[7]=0,C$i[8]=0,C$i[9]=0,C$i[10]=1,C$i[11]=0,C$i[12]=C$e.x,C$i[13]=C$e.y,C$i[14]=C$e.z,C$i[15]=1,C$t},C$n.fromScaling=function(C$t,C$e){var C$i=C$t.m;return C$i[0]=C$e.x,C$i[1]=0,C$i[2]=0,C$i[3]=0,C$i[4]=0,C$i[5]=C$e.y,C$i[6]=0,C$i[7]=0,C$i[8]=0,C$i[9]=0,C$i[10]=C$e.z,C$i[11]=0,C$i[12]=0,C$i[13]=0,C$i[14]=0,C$i[15]=1,C$t},C$n.fromRotation=function(C$t,C$e,C$i){var C$n=C$i.x,C$r=C$i.y,C$i=C$i.z,C$s=Math.sqrt(C$n*C$n+C$r*C$r+C$i*C$i);if(Math.abs(C$s)<C$S.EPSILON)return null;C$n*=C$s=1/C$s,C$r*=C$s,C$i*=C$s;var C$s=Math.sin(C$e),C$e=Math.cos(C$e),C$o=1-C$e,C$a=C$t.m;return C$a[0]=C$n*C$n*C$o+C$e,C$a[1]=C$r*C$n*C$o+C$i*C$s,C$a[2]=C$i*C$n*C$o-C$r*C$s,C$a[3]=0,C$a[4]=C$n*C$r*C$o-C$i*C$s,C$a[5]=C$r*C$r*C$o+C$e,C$a[6]=C$i*C$r*C$o+C$n*C$s,C$a[7]=0,C$a[8]=C$n*C$i*C$o+C$r*C$s,C$a[9]=C$r*C$i*C$o-C$n*C$s,C$a[10]=C$i*C$i*C$o+C$e,C$a[11]=0,C$a[12]=0,C$a[13]=0,C$a[14]=0,C$a[15]=1,C$t},C$n.fromXRotation=function(C$t,C$e){var C$i=Math.sin(C$e),C$e=Math.cos(C$e),C$n=C$t.m;return C$n[0]=1,C$n[1]=0,C$n[2]=0,C$n[3]=0,C$n[4]=0,C$n[5]=C$e,C$n[6]=C$i,C$n[7]=0,C$n[8]=0,C$n[9]=-C$i,C$n[10]=C$e,C$n[11]=0,C$n[12]=0,C$n[13]=0,C$n[14]=0,C$n[15]=1,C$t},C$n.fromYRotation=function(C$t,C$e){var C$i=Math.sin(C$e),C$e=Math.cos(C$e),C$n=C$t.m;return C$n[0]=C$e,C$n[1]=0,C$n[2]=-C$i,C$n[3]=0,C$n[4]=0,C$n[5]=1,C$n[6]=0,C$n[7]=0,C$n[8]=C$i,C$n[9]=0,C$n[10]=C$e,C$n[11]=0,C$n[12]=0,C$n[13]=0,C$n[14]=0,C$n[15]=1,C$t},C$n.fromZRotation=function(C$t,C$e){var C$i=Math.sin(C$e),C$e=Math.cos(C$e),C$n=C$t.m;return C$n[0]=C$e,C$n[1]=C$i,C$n[2]=0,C$n[3]=0,C$n[4]=-C$i,C$n[5]=C$e,C$n[6]=0,C$n[7]=0,C$n[8]=0,C$n[9]=0,C$n[10]=1,C$n[11]=0,C$n[12]=0,C$n[13]=0,C$n[14]=0,C$n[15]=1,C$t},C$n.fromRT=function(C$t,C$e,C$i){var C$n=C$e.x,C$r=C$e.y,C$s=C$e.z,C$e=C$e.w,C$o=C$n+C$n,C$a=C$r+C$r,C$c=C$s+C$s,C$l=C$n*C$o,C$h=C$n*C$a,C$n=C$n*C$c,C$u=C$r*C$a,C$r=C$r*C$c,C$s=C$s*C$c,C$o=C$e*C$o,C$a=C$e*C$a,C$e=C$e*C$c,C$c=C$t.m;return C$c[0]=1-(C$u+C$s),C$c[1]=C$h+C$e,C$c[2]=C$n-C$a,C$c[3]=0,C$c[4]=C$h-C$e,C$c[5]=1-(C$l+C$s),C$c[6]=C$r+C$o,C$c[7]=0,C$c[8]=C$n+C$a,C$c[9]=C$r-C$o,C$c[10]=1-(C$l+C$u),C$c[11]=0,C$c[12]=C$i.x,C$c[13]=C$i.y,C$c[14]=C$i.z,C$c[15]=1,C$t},C$n.getTranslation=function(C$t,C$e){C$e=C$e.m;return C$t.x=C$e[12],C$t.y=C$e[13],C$t.z=C$e[14],C$t},C$n.getScaling=function(C$t,C$e){var C$e=C$e.m,C$i=C$d.m,C$n=C$i[0]=C$e[0],C$r=C$i[1]=C$e[1],C$s=C$i[2]=C$e[2],C$o=C$i[3]=C$e[4],C$a=C$i[4]=C$e[5],C$c=C$i[5]=C$e[6],C$l=C$i[6]=C$e[8],C$h=C$i[7]=C$e[9],C$i=C$i[8]=C$e[10];return C$t.x=Math.sqrt(C$n*C$n+C$r*C$r+C$s*C$s),C$t.y=Math.sqrt(C$o*C$o+C$a*C$a+C$c*C$c),C$t.z=Math.sqrt(C$l*C$l+C$h*C$h+C$i*C$i),C$u.default.determinant(C$d)<0&&(C$t.x*=-1),C$t},C$n.getRotation=function(C$t,C$e){var C$e=C$e.m,C$i=C$e[0]+C$e[5]+C$e[10],C$n=0;return 0<C$i?(C$n=2*Math.sqrt(C$i+1),C$t.w=.25*C$n,C$t.x=(C$e[6]-C$e[9])/C$n,C$t.y=(C$e[8]-C$e[2])/C$n,C$t.z=(C$e[1]-C$e[4])/C$n):C$e[0]>C$e[5]&&C$e[0]>C$e[10]?(C$n=2*Math.sqrt(1+C$e[0]-C$e[5]-C$e[10]),C$t.w=(C$e[6]-C$e[9])/C$n,C$t.x=.25*C$n,C$t.y=(C$e[1]+C$e[4])/C$n,C$t.z=(C$e[8]+C$e[2])/C$n):C$e[5]>C$e[10]?(C$n=2*Math.sqrt(1+C$e[5]-C$e[0]-C$e[10]),C$t.w=(C$e[8]-C$e[2])/C$n,C$t.x=(C$e[1]+C$e[4])/C$n,C$t.y=.25*C$n,C$t.z=(C$e[6]+C$e[9])/C$n):(C$n=2*Math.sqrt(1+C$e[10]-C$e[0]-C$e[5]),C$t.w=(C$e[1]-C$e[4])/C$n,C$t.x=(C$e[8]+C$e[2])/C$n,C$t.y=(C$e[6]+C$e[9])/C$n,C$t.z=.25*C$n),C$t},C$n.toRTS=function(C$t,C$e,C$i,C$n){var C$t=C$t.m,C$r=C$d.m;C$n.x=C$o.default.set(C$_,C$t[0],C$t[1],C$t[2]).mag(),C$r[0]=C$t[0]/C$n.x,C$r[1]=C$t[1]/C$n.x,C$r[2]=C$t[2]/C$n.x,C$n.y=C$o.default.set(C$_,C$t[4],C$t[5],C$t[6]).mag(),C$r[3]=C$t[4]/C$n.y,C$r[4]=C$t[5]/C$n.y,C$r[5]=C$t[6]/C$n.y,C$n.z=C$o.default.set(C$_,C$t[8],C$t[9],C$t[10]).mag(),C$r[6]=C$t[8]/C$n.z,C$r[7]=C$t[9]/C$n.z,C$r[8]=C$t[10]/C$n.z,C$u.default.determinant(C$d)<0&&(C$n.x*=-1,C$r[0]*=-1,C$r[1]*=-1,C$r[2]*=-1),C$a.default.fromMat3(C$e,C$d),C$o.default.set(C$i,C$t[12],C$t[13],C$t[14])},C$n.fromRTS=function(C$h,C$t,C$e,C$i){var C$n=C$t.x,C$r=C$t.y,C$s=C$t.z,C$t=C$t.w,C$o=C$n+C$n,C$a=C$r+C$r,C$c=C$s+C$s,C$u=C$n*C$o,C$_=C$n*C$a,C$n=C$n*C$c,C$d=C$r*C$a,C$r=C$r*C$c,C$s=C$s*C$c,C$o=C$t*C$o,C$a=C$t*C$a,C$t=C$t*C$c,C$c=C$i.x,C$f=C$i.y,C$i=C$i.z,C$l=C$h.m;return C$l[0]=(1-(C$d+C$s))*C$c,C$l[1]=(C$_+C$t)*C$c,C$l[2]=(C$n-C$a)*C$c,C$l[3]=0,C$l[4]=(C$_-C$t)*C$f,C$l[5]=(1-(C$u+C$s))*C$f,C$l[6]=(C$r+C$o)*C$f,C$l[7]=0,C$l[8]=(C$n+C$a)*C$i,C$l[9]=(C$r-C$o)*C$i,C$l[10]=(1-(C$u+C$d))*C$i,C$l[11]=0,C$l[12]=C$e.x,C$l[13]=C$e.y,C$l[14]=C$e.z,C$l[15]=1,C$h},C$n.fromRTSOrigin=function(C$h,C$t,C$u,C$e,C$i){var C$n=C$t.x,C$r=C$t.y,C$s=C$t.z,C$t=C$t.w,C$o=C$n+C$n,C$a=C$r+C$r,C$c=C$s+C$s,C$_=C$n*C$o,C$d=C$n*C$a,C$n=C$n*C$c,C$f=C$r*C$a,C$r=C$r*C$c,C$s=C$s*C$c,C$o=C$t*C$o,C$a=C$t*C$a,C$t=C$t*C$c,C$c=C$e.x,C$p=C$e.y,C$e=C$e.z,C$m=C$i.x,C$y=C$i.y,C$i=C$i.z,C$l=C$h.m;return C$l[0]=(1-(C$f+C$s))*C$c,C$l[1]=(C$d+C$t)*C$c,C$l[2]=(C$n-C$a)*C$c,C$l[3]=0,C$l[4]=(C$d-C$t)*C$p,C$l[5]=(1-(C$_+C$s))*C$p,C$l[6]=(C$r+C$o)*C$p,C$l[7]=0,C$l[8]=(C$n+C$a)*C$e,C$l[9]=(C$r-C$o)*C$e,C$l[10]=(1-(C$_+C$f))*C$e,C$l[11]=0,C$l[12]=C$u.x+C$m-(C$l[0]*C$m+C$l[4]*C$y+C$l[8]*C$i),C$l[13]=C$u.y+C$y-(C$l[1]*C$m+C$l[5]*C$y+C$l[9]*C$i),C$l[14]=C$u.z+C$i-(C$l[2]*C$m+C$l[6]*C$y+C$l[10]*C$i),C$l[15]=1,C$h},C$n.fromQuat=function(C$t,C$e){var C$i=C$e.x,C$n=C$e.y,C$r=C$e.z,C$e=C$e.w,C$s=C$i+C$i,C$o=C$n+C$n,C$a=C$r+C$r,C$i=C$i*C$s,C$c=C$n*C$s,C$n=C$n*C$o,C$l=C$r*C$s,C$h=C$r*C$o,C$r=C$r*C$a,C$s=C$e*C$s,C$o=C$e*C$o,C$e=C$e*C$a,C$a=C$t.m;return C$a[0]=1-C$n-C$r,C$a[1]=C$c+C$e,C$a[2]=C$l-C$o,C$a[3]=0,C$a[4]=C$c-C$e,C$a[5]=1-C$i-C$r,C$a[6]=C$h+C$s,C$a[7]=0,C$a[8]=C$l+C$o,C$a[9]=C$h-C$s,C$a[10]=1-C$i-C$n,C$a[11]=0,C$a[12]=0,C$a[13]=0,C$a[14]=0,C$a[15]=1,C$t},C$n.frustum=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){var C$a=1/(C$i-C$e),C$c=1/(C$r-C$n),C$h=1/(C$s-C$o),C$l=C$t.m;return C$l[0]=2*C$s*C$a,C$l[1]=0,C$l[2]=0,C$l[3]=0,C$l[4]=0,C$l[5]=2*C$s*C$c,C$l[6]=0,C$l[7]=0,C$l[8]=(C$i+C$e)*C$a,C$l[9]=(C$r+C$n)*C$c,C$l[10]=(C$o+C$s)*C$h,C$l[11]=-1,C$l[12]=0,C$l[13]=0,C$l[14]=C$o*C$s*2*C$h,C$l[15]=0,C$t},C$n.perspective=function(C$t,C$e,C$i,C$n,C$r){var C$e=1/Math.tan(C$e/2),C$s=1/(C$n-C$r),C$o=C$t.m;return C$o[0]=C$e/C$i,C$o[1]=0,C$o[2]=0,C$o[3]=0,C$o[4]=0,C$o[5]=C$e,C$o[6]=0,C$o[7]=0,C$o[8]=0,C$o[9]=0,C$o[10]=(C$r+C$n)*C$s,C$o[11]=-1,C$o[12]=0,C$o[13]=0,C$o[14]=2*C$r*C$n*C$s,C$o[15]=0,C$t},C$n.ortho=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){var C$a=1/(C$e-C$i),C$c=1/(C$n-C$r),C$h=1/(C$s-C$o),C$l=C$t.m;return C$l[0]=-2*C$a,C$l[1]=0,C$l[2]=0,C$l[3]=0,C$l[4]=0,C$l[5]=-2*C$c,C$l[6]=0,C$l[7]=0,C$l[8]=0,C$l[9]=0,C$l[10]=2*C$h,C$l[11]=0,C$l[12]=(C$e+C$i)*C$a,C$l[13]=(C$r+C$n)*C$c,C$l[14]=(C$o+C$s)*C$h,C$l[15]=1,C$t},C$n.lookAt=function(C$h,C$t,C$e,C$i){var C$n=C$t.x,C$u=C$t.y,C$t=C$t.z,C$r=C$i.x,C$_=C$i.y,C$i=C$i.z,C$s=C$n-C$e.x,C$o=C$u-C$e.y,C$e=C$t-C$e.z,C$a=1/Math.sqrt(C$s*C$s+C$o*C$o+C$e*C$e),C$c=C$_*(C$e*=C$a)-C$i*(C$o*=C$a),C$i=C$i*(C$s*=C$a)-C$r*C$e,C$r=C$r*C$o-C$_*C$s,C$_=(C$c*=C$a=1/Math.sqrt(C$c*C$c+C$i*C$i+C$r*C$r),C$o*(C$r*=C$a)-C$e*(C$i*=C$a)),C$a=C$e*C$c-C$s*C$r,C$d=C$s*C$i-C$o*C$c,C$l=C$h.m;return C$l[0]=C$c,C$l[1]=C$_,C$l[2]=C$s,C$l[3]=0,C$l[4]=C$i,C$l[5]=C$a,C$l[6]=C$o,C$l[7]=0,C$l[8]=C$r,C$l[9]=C$d,C$l[10]=C$e,C$l[11]=0,C$l[12]=-(C$c*C$n+C$i*C$u+C$r*C$t),C$l[13]=-(C$_*C$n+C$a*C$u+C$d*C$t),C$l[14]=-(C$s*C$n+C$o*C$u+C$e*C$t),C$l[15]=1,C$h},C$n.inverseTranspose=function(C$h,C$t){var C$t=C$t.m,C$u=(C$m=C$t[0],C$y=C$t[1],C$g=C$t[2],C$v=C$t[3],C$x=C$t[4],C$b=C$t[5],C$A=C$t[6],C$C=C$t[7],C$w=C$t[8],C$E=C$t[9],C$M=C$t[10],C$I=C$t[11],C$p=C$t[12],C$B=C$t[13],C$R=C$t[14],C$P=C$t[15],C$m*C$b-C$y*C$x),C$_=C$m*C$A-C$g*C$x,C$e=C$m*C$C-C$v*C$x,C$d=C$y*C$A-C$g*C$b,C$i=C$y*C$C-C$v*C$b,C$n=C$g*C$C-C$v*C$A,C$r=C$w*C$B-C$E*C$p,C$s=C$w*C$R-C$M*C$p,C$o=C$w*C$P-C$I*C$p,C$f=C$E*C$R-C$M*C$B,C$a=C$E*C$P-C$I*C$B,C$c=C$M*C$P-C$I*C$R,C$l=C$u*C$c-C$_*C$a+C$e*C$f+C$d*C$o-C$i*C$s+C$n*C$r;return C$l?((C$t=C$h.m)[0]=(C$b*C$c-C$A*C$a+C$C*C$f)*(C$l=1/C$l),C$t[1]=(C$A*C$o-C$x*C$c-C$C*C$s)*C$l,C$t[2]=(C$x*C$a-C$b*C$o+C$C*C$r)*C$l,C$t[3]=0,C$t[4]=(C$g*C$a-C$y*C$c-C$v*C$f)*C$l,C$t[5]=(C$m*C$c-C$g*C$o+C$v*C$s)*C$l,C$t[6]=(C$y*C$o-C$m*C$a-C$v*C$r)*C$l,C$t[7]=0,C$t[8]=(C$B*C$n-C$R*C$i+C$P*C$d)*C$l,C$t[9]=(C$R*C$e-C$p*C$n-C$P*C$_)*C$l,C$t[10]=(C$p*C$i-C$B*C$e+C$P*C$u)*C$l,C$t[11]=0,C$t[12]=0,C$t[13]=0,C$t[14]=0,C$t[15]=1,C$h):null},C$n.add=function(C$t,C$e,C$i){var C$n=C$t.m,C$e=C$e.m,C$i=C$i.m;return C$n[0]=C$e[0]+C$i[0],C$n[1]=C$e[1]+C$i[1],C$n[2]=C$e[2]+C$i[2],C$n[3]=C$e[3]+C$i[3],C$n[4]=C$e[4]+C$i[4],C$n[5]=C$e[5]+C$i[5],C$n[6]=C$e[6]+C$i[6],C$n[7]=C$e[7]+C$i[7],C$n[8]=C$e[8]+C$i[8],C$n[9]=C$e[9]+C$i[9],C$n[10]=C$e[10]+C$i[10],C$n[11]=C$e[11]+C$i[11],C$n[12]=C$e[12]+C$i[12],C$n[13]=C$e[13]+C$i[13],C$n[14]=C$e[14]+C$i[14],C$n[15]=C$e[15]+C$i[15],C$t},C$n.subtract=function(C$t,C$e,C$i){var C$n=C$t.m,C$e=C$e.m,C$i=C$i.m;return C$n[0]=C$e[0]-C$i[0],C$n[1]=C$e[1]-C$i[1],C$n[2]=C$e[2]-C$i[2],C$n[3]=C$e[3]-C$i[3],C$n[4]=C$e[4]-C$i[4],C$n[5]=C$e[5]-C$i[5],C$n[6]=C$e[6]-C$i[6],C$n[7]=C$e[7]-C$i[7],C$n[8]=C$e[8]-C$i[8],C$n[9]=C$e[9]-C$i[9],C$n[10]=C$e[10]-C$i[10],C$n[11]=C$e[11]-C$i[11],C$n[12]=C$e[12]-C$i[12],C$n[13]=C$e[13]-C$i[13],C$n[14]=C$e[14]-C$i[14],C$n[15]=C$e[15]-C$i[15],C$t},C$n.multiplyScalar=function(C$t,C$e,C$i){var C$n=C$t.m,C$e=C$e.m;return C$n[0]=C$e[0]*C$i,C$n[1]=C$e[1]*C$i,C$n[2]=C$e[2]*C$i,C$n[3]=C$e[3]*C$i,C$n[4]=C$e[4]*C$i,C$n[5]=C$e[5]*C$i,C$n[6]=C$e[6]*C$i,C$n[7]=C$e[7]*C$i,C$n[8]=C$e[8]*C$i,C$n[9]=C$e[9]*C$i,C$n[10]=C$e[10]*C$i,C$n[11]=C$e[11]*C$i,C$n[12]=C$e[12]*C$i,C$n[13]=C$e[13]*C$i,C$n[14]=C$e[14]*C$i,C$n[15]=C$e[15]*C$i,C$t},C$n.multiplyScalarAndAdd=function(C$t,C$e,C$i,C$n){var C$r=C$t.m,C$e=C$e.m,C$i=C$i.m;return C$r[0]=C$e[0]+C$i[0]*C$n,C$r[1]=C$e[1]+C$i[1]*C$n,C$r[2]=C$e[2]+C$i[2]*C$n,C$r[3]=C$e[3]+C$i[3]*C$n,C$r[4]=C$e[4]+C$i[4]*C$n,C$r[5]=C$e[5]+C$i[5]*C$n,C$r[6]=C$e[6]+C$i[6]*C$n,C$r[7]=C$e[7]+C$i[7]*C$n,C$r[8]=C$e[8]+C$i[8]*C$n,C$r[9]=C$e[9]+C$i[9]*C$n,C$r[10]=C$e[10]+C$i[10]*C$n,C$r[11]=C$e[11]+C$i[11]*C$n,C$r[12]=C$e[12]+C$i[12]*C$n,C$r[13]=C$e[13]+C$i[13]*C$n,C$r[14]=C$e[14]+C$i[14]*C$n,C$r[15]=C$e[15]+C$i[15]*C$n,C$t},C$n.strictEquals=function(C$t,C$e){C$t=C$t.m,C$e=C$e.m;return C$t[0]===C$e[0]&&C$t[1]===C$e[1]&&C$t[2]===C$e[2]&&C$t[3]===C$e[3]&&C$t[4]===C$e[4]&&C$t[5]===C$e[5]&&C$t[6]===C$e[6]&&C$t[7]===C$e[7]&&C$t[8]===C$e[8]&&C$t[9]===C$e[9]&&C$t[10]===C$e[10]&&C$t[11]===C$e[11]&&C$t[12]===C$e[12]&&C$t[13]===C$e[13]&&C$t[14]===C$e[14]&&C$t[15]===C$e[15]},C$n.equals=function(C$t,C$e,C$i){void 0===C$i&&(C$i=C$S.EPSILON);C$t=C$t.m,C$e=C$e.m;return Math.abs(C$t[0]-C$e[0])<=C$i*Math.max(1,Math.abs(C$t[0]),Math.abs(C$e[0]))&&Math.abs(C$t[1]-C$e[1])<=C$i*Math.max(1,Math.abs(C$t[1]),Math.abs(C$e[1]))&&Math.abs(C$t[2]-C$e[2])<=C$i*Math.max(1,Math.abs(C$t[2]),Math.abs(C$e[2]))&&Math.abs(C$t[3]-C$e[3])<=C$i*Math.max(1,Math.abs(C$t[3]),Math.abs(C$e[3]))&&Math.abs(C$t[4]-C$e[4])<=C$i*Math.max(1,Math.abs(C$t[4]),Math.abs(C$e[4]))&&Math.abs(C$t[5]-C$e[5])<=C$i*Math.max(1,Math.abs(C$t[5]),Math.abs(C$e[5]))&&Math.abs(C$t[6]-C$e[6])<=C$i*Math.max(1,Math.abs(C$t[6]),Math.abs(C$e[6]))&&Math.abs(C$t[7]-C$e[7])<=C$i*Math.max(1,Math.abs(C$t[7]),Math.abs(C$e[7]))&&Math.abs(C$t[8]-C$e[8])<=C$i*Math.max(1,Math.abs(C$t[8]),Math.abs(C$e[8]))&&Math.abs(C$t[9]-C$e[9])<=C$i*Math.max(1,Math.abs(C$t[9]),Math.abs(C$e[9]))&&Math.abs(C$t[10]-C$e[10])<=C$i*Math.max(1,Math.abs(C$t[10]),Math.abs(C$e[10]))&&Math.abs(C$t[11]-C$e[11])<=C$i*Math.max(1,Math.abs(C$t[11]),Math.abs(C$e[11]))&&Math.abs(C$t[12]-C$e[12])<=C$i*Math.max(1,Math.abs(C$t[12]),Math.abs(C$e[12]))&&Math.abs(C$t[13]-C$e[13])<=C$i*Math.max(1,Math.abs(C$t[13]),Math.abs(C$e[13]))&&Math.abs(C$t[14]-C$e[14])<=C$i*Math.max(1,Math.abs(C$t[14]),Math.abs(C$e[14]))&&Math.abs(C$t[15]-C$e[15])<=C$i*Math.max(1,Math.abs(C$t[15]),Math.abs(C$e[15]))},C$n.adjoint=function(C$h,C$t){var C$t=C$t.m,C$e=C$h.m,C$u=C$t[0],C$i=C$t[1],C$n=C$t[2],C$r=C$t[3],C$_=C$t[4],C$d=C$t[5],C$s=C$t[6],C$o=C$t[7],C$f=C$t[8],C$p=C$t[9],C$a=C$t[10],C$c=C$t[11],C$m=C$t[12],C$y=C$t[13],C$l=C$t[14],C$t=C$t[15];return C$e[0]=C$d*(C$a*C$t-C$c*C$l)-C$p*(C$s*C$t-C$o*C$l)+C$y*(C$s*C$c-C$o*C$a),C$e[1]=-(C$i*(C$a*C$t-C$c*C$l)-C$p*(C$n*C$t-C$r*C$l)+C$y*(C$n*C$c-C$r*C$a)),C$e[2]=C$i*(C$s*C$t-C$o*C$l)-C$d*(C$n*C$t-C$r*C$l)+C$y*(C$n*C$o-C$r*C$s),C$e[3]=-(C$i*(C$s*C$c-C$o*C$a)-C$d*(C$n*C$c-C$r*C$a)+C$p*(C$n*C$o-C$r*C$s)),C$e[4]=-(C$_*(C$a*C$t-C$c*C$l)-C$f*(C$s*C$t-C$o*C$l)+C$m*(C$s*C$c-C$o*C$a)),C$e[5]=C$u*(C$a*C$t-C$c*C$l)-C$f*(C$n*C$t-C$r*C$l)+C$m*(C$n*C$c-C$r*C$a),C$e[6]=-(C$u*(C$s*C$t-C$o*C$l)-C$_*(C$n*C$t-C$r*C$l)+C$m*(C$n*C$o-C$r*C$s)),C$e[7]=C$u*(C$s*C$c-C$o*C$a)-C$_*(C$n*C$c-C$r*C$a)+C$f*(C$n*C$o-C$r*C$s),C$e[8]=C$_*(C$p*C$t-C$c*C$y)-C$f*(C$d*C$t-C$o*C$y)+C$m*(C$d*C$c-C$o*C$p),C$e[9]=-(C$u*(C$p*C$t-C$c*C$y)-C$f*(C$i*C$t-C$r*C$y)+C$m*(C$i*C$c-C$r*C$p)),C$e[10]=C$u*(C$d*C$t-C$o*C$y)-C$_*(C$i*C$t-C$r*C$y)+C$m*(C$i*C$o-C$r*C$d),C$e[11]=-(C$u*(C$d*C$c-C$o*C$p)-C$_*(C$i*C$c-C$r*C$p)+C$f*(C$i*C$o-C$r*C$d)),C$e[12]=-(C$_*(C$p*C$l-C$a*C$y)-C$f*(C$d*C$l-C$s*C$y)+C$m*(C$d*C$a-C$s*C$p)),C$e[13]=C$u*(C$p*C$l-C$a*C$y)-C$f*(C$i*C$l-C$n*C$y)+C$m*(C$i*C$a-C$n*C$p),C$e[14]=-(C$u*(C$d*C$l-C$s*C$y)-C$_*(C$i*C$l-C$n*C$y)+C$m*(C$i*C$s-C$n*C$d)),C$e[15]=C$u*(C$d*C$a-C$s*C$p)-C$_*(C$i*C$a-C$n*C$p)+C$f*(C$i*C$s-C$n*C$d),C$h},C$n.toArray=function(C$t,C$e,C$i){void 0===C$i&&(C$i=0);for(var C$n=C$e.m,C$r=0;C$r<16;C$r++)C$t[C$i+C$r]=C$n[C$r];return C$t},C$n.fromArray=function(C$t,C$e,C$i){void 0===C$i&&(C$i=0);for(var C$n=C$t.m,C$r=0;C$r<16;C$r++)C$n[C$r]=C$e[C$i+C$r];return C$t},C$t.clone=function(){var C$t=this.m;return new C$n(C$t[0],C$t[1],C$t[2],C$t[3],C$t[4],C$t[5],C$t[6],C$t[7],C$t[8],C$t[9],C$t[10],C$t[11],C$t[12],C$t[13],C$t[14],C$t[15])},C$t.set=function(C$t){var C$e=this.m,C$t=C$t.m;return C$e[0]=C$t[0],C$e[1]=C$t[1],C$e[2]=C$t[2],C$e[3]=C$t[3],C$e[4]=C$t[4],C$e[5]=C$t[5],C$e[6]=C$t[6],C$e[7]=C$t[7],C$e[8]=C$t[8],C$e[9]=C$t[9],C$e[10]=C$t[10],C$e[11]=C$t[11],C$e[12]=C$t[12],C$e[13]=C$t[13],C$e[14]=C$t[14],C$e[15]=C$t[15],this},C$t.equals=function(C$t){return C$n.strictEquals(this,C$t)},C$t.fuzzyEquals=function(C$t){return C$n.equals(this,C$t)},C$t.toString=function(){var C$t=this.m;return C$t?"[\n"+C$t[0]+", "+C$t[1]+", "+C$t[2]+", "+C$t[3]+",\n"+C$t[4]+", "+C$t[5]+", "+C$t[6]+", "+C$t[7]+",\n"+C$t[8]+", "+C$t[9]+", "+C$t[10]+", "+C$t[11]+",\n"+C$t[12]+", "+C$t[13]+", "+C$t[14]+", "+C$t[15]+"\n]":"[\n1, 0, 0, 0\n0, 1, 0, 0\n0, 0, 1, 0\n0, 0, 0, 1\n]"},C$t.identity=function(){return C$n.identity(this)},C$t.transpose=function(C$t){return C$t=C$t||new C$n,C$n.transpose(C$t,this)},C$t.invert=function(C$t){return C$t=C$t||new C$n,C$n.invert(C$t,this)},C$t.adjoint=function(C$t){return C$t=C$t||new C$n,C$n.adjoint(C$t,this)},C$t.determinant=function(){return C$n.determinant(this)},C$t.add=function(C$t,C$e){return C$e=C$e||new C$n,C$n.add(C$e,this,C$t)},C$t.subtract=function(C$t){return C$n.subtract(this,this,C$t)},C$t.multiply=function(C$t){return C$n.multiply(this,this,C$t)},C$t.multiplyScalar=function(C$t){return C$n.multiplyScalar(this,this,C$t)},C$t.translate=function(C$t,C$e){return C$e=C$e||new C$n,C$n.translate(C$e,this,C$t)},C$t.scale=function(C$t,C$e){return C$e=C$e||new C$n,C$n.scale(C$e,this,C$t)},C$t.rotate=function(C$t,C$e,C$i){return C$i=C$i||new C$n,C$n.rotate(C$i,this,C$t,C$e)},C$t.getTranslation=function(C$t){return C$t=C$t||new C$o.default,C$n.getTranslation(C$t,this)},C$t.getScale=function(C$t){return C$t=C$t||new C$o.default,C$n.getScaling(C$t,this)},C$t.getRotation=function(C$t){return C$t=C$t||new C$a.default,C$n.getRotation(C$t,this)},C$t.fromRTS=function(C$t,C$e,C$i){return C$n.fromRTS(this,C$t,C$e,C$i)},C$t.fromQuat=function(C$t){return C$n.fromQuat(this,C$t)},C$n);function C$n(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$h,C$u,C$_,C$d,C$f,C$p,C$m,C$y){var C$c,C$l;return void 0===C$t&&(C$t=1),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),void 0===C$r&&(C$r=0),void 0===C$s&&(C$s=1),void 0===C$o&&(C$o=0),void 0===C$a&&(C$a=0),void 0===C$h&&(C$h=0),void 0===C$u&&(C$u=0),void 0===C$_&&(C$_=1),void 0===C$d&&(C$d=0),void 0===C$f&&(C$f=0),void 0===C$p&&(C$p=0),void 0===C$m&&(C$m=0),void 0===C$y&&(C$y=1),(C$c=C$T.call(this)||this).m=void 0,C$t instanceof C$S.FLOAT_ARRAY_TYPE?C$c.m=C$t:(C$c.m=new C$S.FLOAT_ARRAY_TYPE(16),(C$l=C$c.m)[0]=C$t,C$l[1]=C$e,C$l[2]=C$i,C$l[3]=C$n,C$l[4]=C$r,C$l[5]=C$s,C$l[6]=C$o,C$l[7]=C$a,C$l[8]=C$h,C$l[9]=C$u,C$l[10]=C$_,C$l[11]=C$d,C$l[12]=C$f,C$l[13]=C$p,C$l[14]=C$m,C$l[15]=C$y),C$c}(C$r.default=C$D).mul=C$D.multiply,C$D.sub=C$D.subtract,C$D.IDENTITY=Object.freeze(new C$D);for(var C$_=new C$o.default,C$d=new C$u.default,C$f=(C$s.default.fastDefine("cc.Mat4",C$D,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),0);C$f<16;C$f++)!function(C$e){Object.defineProperty(C$D.prototype,"m"+C$e,{get:function(){return this.m[C$e]},set:function(C$t){this.m[C$e]=C$t}})}(C$f);cc.mat4=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f,C$p){C$e=new C$D(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$f,C$p);return void 0===C$t&&C$D.identity(C$e),C$e},cc.Mat4=C$D,C$i.exports=C$r.default},{"../platform/CCClass":189,"./mat3":280,"./quat":282,"./utils":286,"./value-type":287,"./vec3":289}],282:[function(C$t,C$l,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$i=C$n(C$t("./value-type")),C$h=C$n(C$t("../platform/CCClass")),C$r=C$n(C$t("./vec3")),C$u=C$n(C$t("./mat3")),C$_=C$t("./utils");function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$d(C$i){return function(){var C$t,C$e=C$f(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$f(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$f(C$t){return(C$f=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$v=C$i.default,C$t=C$v,(C$i=C$o).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$d(C$o),(C$i=C$o.prototype).mul=function(C$t,C$e){return C$o.multiply(C$e||new C$o,this,C$t)},C$o.clone=function(C$t){return new C$o(C$t.x,C$t.y,C$t.z,C$t.w)},C$o.copy=function(C$t,C$e){return C$t.x=C$e.x,C$t.y=C$e.y,C$t.z=C$e.z,C$t.w=C$e.w,C$t},C$o.set=function(C$t,C$e,C$i,C$n,C$r){return C$t.x=C$e,C$t.y=C$i,C$t.z=C$n,C$t.w=C$r,C$t},C$o.identity=function(C$t){return C$t.x=0,C$t.y=0,C$t.z=0,C$t.w=1,C$t},C$o.rotationTo=function(C$t,C$e,C$i){var C$n=C$r.default.dot(C$e,C$i);return C$n<-.999999?(C$r.default.cross(C$c,C$r.default.RIGHT,C$e),C$c.mag()<1e-6&&C$r.default.cross(C$c,C$r.default.UP,C$e),C$r.default.normalize(C$c,C$c),C$o.fromAxisAngle(C$t,C$c,Math.PI),C$t):.999999<C$n?(C$t.x=0,C$t.y=0,C$t.z=0,C$t.w=1,C$t):(C$r.default.cross(C$c,C$e,C$i),C$t.x=C$c.x,C$t.y=C$c.y,C$t.z=C$c.z,C$t.w=1+C$n,C$o.normalize(C$t,C$t))},C$o.getAxisAngle=function(C$t,C$e){var C$i=2*Math.acos(C$e.w),C$n=Math.sin(C$i/2);return 0!==C$n?(C$t.x=C$e.x/C$n,C$t.y=C$e.y/C$n,C$t.z=C$e.z/C$n):(C$t.x=1,C$t.y=0,C$t.z=0),C$i},C$o.multiply=function(C$t,C$e,C$i){return C$p=C$e.x*C$i.w+C$e.w*C$i.x+C$e.y*C$i.z-C$e.z*C$i.y,C$m=C$e.y*C$i.w+C$e.w*C$i.y+C$e.z*C$i.x-C$e.x*C$i.z,C$y=C$e.z*C$i.w+C$e.w*C$i.z+C$e.x*C$i.y-C$e.y*C$i.x,C$g=C$e.w*C$i.w-C$e.x*C$i.x-C$e.y*C$i.y-C$e.z*C$i.z,C$t.x=C$p,C$t.y=C$m,C$t.z=C$y,C$t.w=C$g,C$t},C$o.multiplyScalar=function(C$t,C$e,C$i){return C$t.x=C$e.x*C$i,C$t.y=C$e.y*C$i,C$t.z=C$e.z*C$i,C$t.w=C$e.w*C$i,C$t},C$o.scaleAndAdd=function(C$t,C$e,C$i,C$n){return C$t.x=C$e.x+C$i.x*C$n,C$t.y=C$e.y+C$i.y*C$n,C$t.z=C$e.z+C$i.z*C$n,C$t.w=C$e.w+C$i.w*C$n,C$t},C$o.rotateX=function(C$t,C$e,C$i){C$i*=.5;var C$n=Math.sin(C$i),C$i=Math.cos(C$i);return C$t.x=C$e.x*C$i+C$e.w*C$n,C$t.y=C$e.y*C$i+C$e.z*C$n,C$t.z=C$e.z*C$i-C$e.y*C$n,C$t.w=C$e.w*C$i-C$e.x*C$n,C$t},C$o.rotateY=function(C$t,C$e,C$i){C$i*=.5;var C$n=Math.sin(C$i),C$i=Math.cos(C$i);return C$t.x=C$e.x*C$i-C$e.z*C$n,C$t.y=C$e.y*C$i+C$e.w*C$n,C$t.z=C$e.z*C$i+C$e.x*C$n,C$t.w=C$e.w*C$i-C$e.y*C$n,C$t},C$o.rotateZ=function(C$t,C$e,C$i){C$i*=.5;var C$n=Math.sin(C$i),C$i=Math.cos(C$i);return C$t.x=C$e.x*C$i+C$e.y*C$n,C$t.y=C$e.y*C$i-C$e.x*C$n,C$t.z=C$e.z*C$i+C$e.w*C$n,C$t.w=C$e.w*C$i-C$e.z*C$n,C$t},C$o.rotateAround=function(C$t,C$e,C$i,C$n){return C$o.invert(C$a,C$e),C$r.default.transformQuat(C$c,C$i,C$a),C$o.fromAxisAngle(C$a,C$c,C$n),C$o.multiply(C$t,C$e,C$a),C$t},C$o.rotateAroundLocal=function(C$t,C$e,C$i,C$n){return C$o.fromAxisAngle(C$a,C$i,C$n),C$o.multiply(C$t,C$e,C$a),C$t},C$o.calculateW=function(C$t,C$e){return C$t.x=C$e.x,C$t.y=C$e.y,C$t.z=C$e.z,C$t.w=Math.sqrt(Math.abs(1-C$e.x*C$e.x-C$e.y*C$e.y-C$e.z*C$e.z)),C$t},C$o.dot=function(C$t,C$e){return C$t.x*C$e.x+C$t.y*C$e.y+C$t.z*C$e.z+C$t.w*C$e.w},C$o.lerp=function(C$t,C$e,C$i,C$n){return C$t.x=C$e.x+C$n*(C$i.x-C$e.x),C$t.y=C$e.y+C$n*(C$i.y-C$e.y),C$t.z=C$e.z+C$n*(C$i.z-C$e.z),C$t.w=C$e.w+C$n*(C$i.w-C$e.w),C$t},C$o.slerp=function(C$t,C$e,C$i,C$n){var C$r,C$s=0,C$o=0,C$a=C$e.x*C$i.x+C$e.y*C$i.y+C$e.z*C$i.z+C$e.w*C$i.w;return C$a<0&&(C$a=-C$a,C$i.x=-C$i.x,C$i.y=-C$i.y,C$i.z=-C$i.z,C$i.w=-C$i.w),C$o=1e-6<1-C$a?(C$a=Math.acos(C$a),C$r=Math.sin(C$a),C$s=Math.sin((1-C$n)*C$a)/C$r,Math.sin(C$n*C$a)/C$r):(C$s=1-C$n,C$n),C$t.x=C$s*C$e.x+C$o*C$i.x,C$t.y=C$s*C$e.y+C$o*C$i.y,C$t.z=C$s*C$e.z+C$o*C$i.z,C$t.w=C$s*C$e.w+C$o*C$i.w,C$t},C$o.sqlerp=function(C$t,C$e,C$i,C$n,C$r,C$s){return C$o.slerp(C$a,C$e,C$r,C$s),C$o.slerp(C$x,C$i,C$n,C$s),C$o.slerp(C$t,C$a,C$x,2*C$s*(1-C$s)),C$t},C$o.invert=function(C$t,C$e){var C$i=C$e.x*C$e.x+C$e.y*C$e.y+C$e.z*C$e.z+C$e.w*C$e.w,C$i=C$i?1/C$i:0;return C$t.x=-C$e.x*C$i,C$t.y=-C$e.y*C$i,C$t.z=-C$e.z*C$i,C$t.w=C$e.w*C$i,C$t},C$o.conjugate=function(C$t,C$e){return C$t.x=-C$e.x,C$t.y=-C$e.y,C$t.z=-C$e.z,C$t.w=C$e.w,C$t},C$o.len=function(C$t){return Math.sqrt(C$t.x*C$t.x+C$t.y*C$t.y+C$t.z*C$t.z+C$t.w*C$t.w)},C$o.lengthSqr=function(C$t){return C$t.x*C$t.x+C$t.y*C$t.y+C$t.z*C$t.z+C$t.w*C$t.w},C$o.normalize=function(C$t,C$e){var C$i=C$e.x*C$e.x+C$e.y*C$e.y+C$e.z*C$e.z+C$e.w*C$e.w;return 0<C$i&&(C$i=1/Math.sqrt(C$i),C$t.x=C$e.x*C$i,C$t.y=C$e.y*C$i,C$t.z=C$e.z*C$i,C$t.w=C$e.w*C$i),C$t},C$o.fromAxes=function(C$t,C$e,C$i,C$n){return C$u.default.set(C$b,C$e.x,C$e.y,C$e.z,C$i.x,C$i.y,C$i.z,C$n.x,C$n.y,C$n.z),C$o.normalize(C$t,C$o.fromMat3(C$t,C$b))},C$o.fromViewUp=function(C$t,C$e,C$i){return C$u.default.fromViewUp(C$b,C$e,C$i),C$o.normalize(C$t,C$o.fromMat3(C$t,C$b))},C$o.fromAxisAngle=function(C$t,C$e,C$i){C$i*=.5;var C$n=Math.sin(C$i);return C$t.x=C$n*C$e.x,C$t.y=C$n*C$e.y,C$t.z=C$n*C$e.z,C$t.w=Math.cos(C$i),C$t},C$o.fromAngleZ=function(C$t,C$e){return C$e*=C$A,C$t.x=C$t.y=0,C$t.z=Math.sin(C$e),C$t.w=Math.cos(C$e),C$t},C$o.fromMat3=function(C$t,C$e){var C$e=C$e.m,C$i=C$e[0],C$n=C$e[1],C$r=C$e[2],C$s=C$e[3],C$o=C$e[4],C$a=C$e[5],C$c=C$e[6],C$h=C$e[7],C$e=C$e[8],C$l=C$i+C$o+C$e;return 0<C$l?(C$l=.5/Math.sqrt(C$l+1),C$t.w=.25/C$l,C$t.x=(C$a-C$h)*C$l,C$t.y=(C$c-C$r)*C$l,C$t.z=(C$n-C$s)*C$l):C$o<C$i&&C$e<C$i?(C$l=2*Math.sqrt(1+C$i-C$o-C$e),C$t.w=(C$a-C$h)/C$l,C$t.x=.25*C$l,C$t.y=(C$s+C$n)/C$l,C$t.z=(C$c+C$r)/C$l):C$e<C$o?(C$l=2*Math.sqrt(1+C$o-C$i-C$e),C$t.w=(C$c-C$r)/C$l,C$t.x=(C$s+C$n)/C$l,C$t.y=.25*C$l,C$t.z=(C$h+C$a)/C$l):(C$l=2*Math.sqrt(1+C$e-C$i-C$o),C$t.w=(C$n-C$s)/C$l,C$t.x=(C$c+C$r)/C$l,C$t.y=(C$h+C$a)/C$l,C$t.z=.25*C$l),C$t},C$o.fromEuler=function(C$t,C$e,C$i,C$n){C$e*=C$A,C$i*=C$A,C$n*=C$A;var C$r=Math.sin(C$e),C$e=Math.cos(C$e),C$s=Math.sin(C$i),C$i=Math.cos(C$i),C$o=Math.sin(C$n),C$n=Math.cos(C$n);return C$t.x=C$r*C$i*C$n+C$e*C$s*C$o,C$t.y=C$e*C$s*C$n+C$r*C$i*C$o,C$t.z=C$e*C$i*C$o-C$r*C$s*C$n,C$t.w=C$e*C$i*C$n-C$r*C$s*C$o,C$t},C$o.toAxisX=function(C$t,C$e){var C$i=2*C$e.y,C$n=2*C$e.z;return C$t.x=1-C$i*C$e.y-C$n*C$e.z,C$t.y=C$i*C$e.x+C$n*C$e.w,C$t.z=C$n*C$e.x+C$i*C$e.w,C$t},C$o.toAxisY=function(C$t,C$e){var C$i=2*C$e.x,C$n=2*C$e.y,C$r=2*C$e.z;return C$t.x=C$n*C$e.x-C$r*C$e.w,C$t.y=1-C$i*C$e.x-C$r*C$e.z,C$t.z=C$r*C$e.y+C$i*C$e.w,C$t},C$o.toAxisZ=function(C$t,C$e){var C$i=2*C$e.x,C$n=2*C$e.y,C$r=2*C$e.z;return C$t.x=C$r*C$e.x-C$n*C$e.w,C$t.y=C$r*C$e.y-C$i*C$e.w,C$t.z=1-C$i*C$e.x-C$n*C$e.y,C$t},C$o.toEuler=function(C$t,C$e,C$h){var C$u,C$i,C$n=C$e.x,C$r=C$e.y,C$s=C$e.z,C$e=C$e.w,C$o=0,C$a=0,C$c=0,C$l=C$n*C$r+C$s*C$e;return.499999<C$l?(C$a=(C$o=0,C$_.toDegree)(2*Math.atan2(C$n,C$e)),C$c=90):C$l<-.499999?(C$a=-(C$o=0,C$_.toDegree)(2*Math.atan2(C$n,C$e)),C$c=-90):(C$u=C$r*C$r,C$i=C$s*C$s,C$o=(0,C$_.toDegree)(Math.atan2(2*C$n*C$e-2*C$r*C$s,1-2*(C$n*C$n)-2*C$i)),C$a=(0,C$_.toDegree)(Math.atan2(2*C$r*C$e-2*C$n*C$s,1-2*C$u-2*C$i)),C$c=(0,C$_.toDegree)(Math.asin(2*C$l)),C$h&&(C$o=-180*Math.sign(C$o+1e-6)+C$o,C$a=-180*Math.sign(C$a+1e-6)+C$a,C$c=180*Math.sign(C$c+1e-6)-C$c)),C$t.x=C$o,C$t.y=C$a,C$t.z=C$c,C$t},C$o.strictEquals=function(C$t,C$e){return C$t.x===C$e.x&&C$t.y===C$e.y&&C$t.z===C$e.z&&C$t.w===C$e.w},C$o.equals=function(C$t,C$e,C$i){return void 0===C$i&&(C$i=C$_.EPSILON),Math.abs(C$t.x-C$e.x)<=C$i*Math.max(1,Math.abs(C$t.x),Math.abs(C$e.x))&&Math.abs(C$t.y-C$e.y)<=C$i*Math.max(1,Math.abs(C$t.y),Math.abs(C$e.y))&&Math.abs(C$t.z-C$e.z)<=C$i*Math.max(1,Math.abs(C$t.z),Math.abs(C$e.z))&&Math.abs(C$t.w-C$e.w)<=C$i*Math.max(1,Math.abs(C$t.w),Math.abs(C$e.w))},C$o.toArray=function(C$t,C$e,C$i){return C$t[(C$i=void 0===C$i?0:C$i)+0]=C$e.x,C$t[C$i+1]=C$e.y,C$t[C$i+2]=C$e.z,C$t[C$i+3]=C$e.w,C$t},C$o.fromArray=function(C$t,C$e,C$i){return C$t.x=C$e[(C$i=void 0===C$i?0:C$i)+0],C$t.y=C$e[C$i+1],C$t.z=C$e[C$i+2],C$t.w=C$e[C$i+3],C$t},C$i.clone=function(){return new C$o(this.x,this.y,this.z,this.w)},C$i.set=function(C$t){return this.x=C$t.x,this.y=C$t.y,this.z=C$t.z,this.w=C$t.w,this},C$i.equals=function(C$t){return C$t&&this.x===C$t.x&&this.y===C$t.y&&this.z===C$t.z&&this.w===C$t.w},C$i.toEuler=function(C$t){return C$o.toEuler(C$t,this)},C$i.fromEuler=function(C$t){return C$o.fromEuler(this,C$t.x,C$t.y,C$t.z)},C$i.lerp=function(C$t,C$e,C$i){return C$i=C$i||new C$o,C$o.slerp(C$i,this,C$t,C$e),C$i},C$i.multiply=function(C$t){return C$o.multiply(this,this,C$t)},C$i.rotateAround=function(C$t,C$e,C$i,C$n){return C$n=C$n||new C$o,C$o.rotateAround(C$n,C$t,C$e,C$i)};var C$p,C$m,C$y,C$g,C$v,C$s=C$o;function C$o(C$t,C$e,C$i,C$n){var C$r;return void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=1),(C$r=C$v.call(this)||this).x=void 0,C$r.y=void 0,C$r.z=void 0,C$r.w=void 0,C$t&&"object"==typeof C$t?(C$r.z=C$t.z,C$r.y=C$t.y,C$r.w=C$t.w,C$r.x=C$t.x):(C$r.x=C$t,C$r.y=C$e,C$r.z=C$i,C$r.w=C$n),C$r}(C$e.default=C$s).mul=C$s.multiply,C$s.scale=C$s.multiplyScalar,C$s.mag=C$s.len,C$s.IDENTITY=Object.freeze(new C$s);var C$a=new C$s,C$x=new C$s,C$c=new C$r.default,C$b=new C$u.default,C$A=.5*Math.PI/180;C$h.default.fastDefine("cc.Quat",C$s,{x:0,y:0,z:0,w:1}),cc.quat=function(C$t,C$e,C$i,C$n){return new C$s(C$t,C$e,C$i,C$n)},cc.Quat=C$s,C$l.exports=C$e.default},{"../platform/CCClass":189,"./mat3":280,"./utils":286,"./value-type":287,"./vec3":289}],283:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$s(C$t("./value-type")),C$r=C$s(C$t("../platform/CCClass")),C$o=C$s(C$t("./vec2")),C$h=C$s(C$t("./size"));function C$s(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$c(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$u(C$i){return function(){var C$t,C$e=C$a(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$a(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$a(C$t){return(C$a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$l=function(C$s){C$t=C$s,(C$i=C$a).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$u(C$a);function C$a(C$t,C$e,C$i,C$n){var C$r;return void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),(C$r=C$s.call(this)||this).x=void 0,C$r.y=void 0,C$r.width=void 0,C$r.height=void 0,C$t&&"object"==typeof C$t&&(C$e=C$t.y,C$i=C$t.width,C$n=C$t.height,C$t=C$t.x),C$r.x=C$t||0,C$r.y=C$e||0,C$r.width=C$i||0,C$r.height=C$n||0,C$r}C$a.fromMinMax=function(C$t,C$e){var C$i=Math.min(C$t.x,C$e.x),C$n=Math.min(C$t.y,C$e.y);return new C$a(C$i,C$n,Math.max(C$t.x,C$e.x)-C$i,Math.max(C$t.y,C$e.y)-C$n)};var C$t,C$e,C$i=C$a.prototype;return C$i.clone=function(){return new C$a(this.x,this.y,this.width,this.height)},C$i.equals=function(C$t){return C$t&&this.x===C$t.x&&this.y===C$t.y&&this.width===C$t.width&&this.height===C$t.height},C$i.lerp=function(C$t,C$e,C$i){C$i=C$i||new C$a;var C$n=this.x,C$r=this.y,C$s=this.width,C$o=this.height;return C$i.x=C$n+(C$t.x-C$n)*C$e,C$i.y=C$r+(C$t.y-C$r)*C$e,C$i.width=C$s+(C$t.width-C$s)*C$e,C$i.height=C$o+(C$t.height-C$o)*C$e,C$i},C$i.set=function(C$t){return this.x=C$t.x,this.y=C$t.y,this.width=C$t.width,this.height=C$t.height,this},C$i.intersects=function(C$t){var C$e=this.x+this.width,C$i=this.y+this.height,C$n=C$t.x+C$t.width,C$r=C$t.y+C$t.height;return!(C$e<C$t.x||C$n<this.x||C$i<C$t.y||C$r<this.y)},C$i.intersection=function(C$t,C$e){var C$i=this.x,C$n=this.y,C$r=this.x+this.width,C$s=this.y+this.height,C$o=C$e.x,C$a=C$e.y,C$c=C$e.x+C$e.width,C$e=C$e.y+C$e.height;return C$t.x=Math.max(C$i,C$o),C$t.y=Math.max(C$n,C$a),C$t.width=Math.min(C$r,C$c)-C$t.x,C$t.height=Math.min(C$s,C$e)-C$t.y,C$t},C$i.contains=function(C$t){return this.x<=C$t.x&&this.x+this.width>=C$t.x&&this.y<=C$t.y&&this.y+this.height>=C$t.y},C$i.containsRect=function(C$t){return this.x<=C$t.x&&this.x+this.width>=C$t.x+C$t.width&&this.y<=C$t.y&&this.y+this.height>=C$t.y+C$t.height},C$i.union=function(C$t,C$e){var C$i=this.x,C$n=this.y,C$r=this.width,C$s=this.height,C$o=C$e.x,C$a=C$e.y,C$c=C$e.width,C$e=C$e.height;return C$t.x=Math.min(C$i,C$o),C$t.y=Math.min(C$n,C$a),C$t.width=Math.max(C$i+C$r,C$o+C$c)-C$t.x,C$t.height=Math.max(C$n+C$s,C$a+C$e)-C$t.y,C$t},C$i.transformMat4=function(C$t,C$e){var C$i=this.x,C$n=this.y,C$r=C$i+this.width,C$s=C$n+this.height,C$e=C$e.m,C$o=C$e[0]*C$i+C$e[4]*C$n+C$e[12],C$a=C$e[1]*C$i+C$e[5]*C$n+C$e[13],C$c=C$e[0]*C$r+C$e[4]*C$n+C$e[12],C$n=C$e[1]*C$r+C$e[5]*C$n+C$e[13],C$l=C$e[0]*C$i+C$e[4]*C$s+C$e[12],C$i=C$e[1]*C$i+C$e[5]*C$s+C$e[13],C$h=C$e[0]*C$r+C$e[4]*C$s+C$e[12],C$r=C$e[1]*C$r+C$e[5]*C$s+C$e[13],C$s=Math.min(C$o,C$c,C$l,C$h),C$e=Math.max(C$o,C$c,C$l,C$h),C$o=Math.min(C$a,C$n,C$i,C$r),C$c=Math.max(C$a,C$n,C$i,C$r);return C$t.x=C$s,C$t.y=C$o,C$t.width=C$e-C$s,C$t.height=C$c-C$o,C$t},C$i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},C$t=C$a,(C$i=[{key:"xMin",get:function(){return this.x},set:function(C$t){this.width+=this.x-C$t,this.x=C$t}},{key:"yMin",get:function(){return this.y},set:function(C$t){this.height+=this.y-C$t,this.y=C$t}},{key:"xMax",get:function(){return this.x+this.width},set:function(C$t){this.width=C$t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(C$t){this.height=C$t-this.y}},{key:"center",get:function(){return new C$o.default(this.x+.5*this.width,this.y+.5*this.height)},set:function(C$t){this.x=C$t.x-.5*this.width,this.y=C$t.y-.5*this.height}},{key:"origin",get:function(){return new C$o.default(this.x,this.y)},set:function(C$t){this.x=C$t.x,this.y=C$t.y}},{key:"size",get:function(){return new C$h.default(this.width,this.height)},set:function(C$t){this.width=C$t.width,this.height=C$t.height}}])&&C$c(C$t.prototype,C$i),C$e&&C$c(C$t,C$e),C$a}(C$n.default);C$i.default=C$l,C$r.default.fastDefine("cc.Rect",C$l,{x:0,y:0,width:0,height:0}),cc.Rect=C$l,cc.rect=function(C$t,C$e,C$i,C$n){return new C$l(C$t,C$e,C$i,C$n)},C$e.exports=C$i.default},{"../platform/CCClass":189,"./size":284,"./value-type":287,"./vec2":288}],284:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$r(C$t("./value-type")),C$t=C$r(C$t("../platform/CCClass"));function C$r(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$o(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$a(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$c=function(C$n){var C$t,C$e;C$e=C$n,(C$t=C$s).prototype=Object.create(C$e.prototype),(C$t.prototype.constructor=C$t).__proto__=C$e,C$a(C$s);function C$s(C$t,C$e){var C$i;return void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),(C$i=C$n.call(this)||this).width=void 0,C$i.height=void 0,C$t&&"object"==typeof C$t?(C$i.height=C$t.height,C$i.width=C$t.width):(C$i.width=C$t||0,C$i.height=C$e||0),C$i}C$t=C$s,C$e=[{key:"ZERO",get:function(){return new C$s}}],(C$i=null)&&C$o(C$t.prototype,C$i),C$e&&C$o(C$t,C$e);var C$i=C$s.prototype;return C$i.clone=function(){return new C$s(this.width,this.height)},C$i.equals=function(C$t){return C$t&&this.width===C$t.width&&this.height===C$t.height},C$i.lerp=function(C$t,C$e,C$i){C$i=C$i||new C$s;var C$n=this.width,C$r=this.height;return C$i.width=C$n+(C$t.width-C$n)*C$e,C$i.height=C$r+(C$t.height-C$r)*C$e,C$i},C$i.set=function(C$t){return this.width=C$t.width,this.height=C$t.height,this},C$i.toString=function(){return"("+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},C$s}(C$n.default);(C$i.default=C$c).ZERO_R=C$c.ZERO,C$t.default.fastDefine("cc.Size",C$c,{width:0,height:0}),cc.size=function(C$t,C$e){return new C$c(C$t,C$e)},cc.Size=C$c,C$e.exports=C$i.default},{"../platform/CCClass":189,"./value-type":287}],285:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$r=(C$t=C$t("./quat"))&&C$t.__esModule?C$t:{default:C$t};var C$s=new C$r.default,C$t=(C$o.toRotation=function(C$t,C$e){return C$t.x=C$e[3],C$t.y=C$e[4],C$t.z=C$e[5],C$t.w=C$e[6],C$t},C$o.fromRotation=function(C$t,C$e){return C$t[3]=C$e.x,C$t[4]=C$e.y,C$t[5]=C$e.z,C$t[6]=C$e.w,C$t},C$o.toEuler=function(C$t,C$e){return C$o.toRotation(C$s,C$e),C$r.default.toEuler(C$t,C$s),C$t},C$o.fromEuler=function(C$t,C$e){return C$r.default.fromEuler(C$s,C$e.x,C$e.y,C$e.z),C$o.fromRotation(C$t,C$s),C$t},C$o.fromEulerNumber=function(C$t,C$e,C$i,C$n){return C$r.default.fromEuler(C$s,C$e,C$i,C$n),C$o.fromRotation(C$t,C$s),C$t},C$o.toScale=function(C$t,C$e){return C$t.x=C$e[7],C$t.y=C$e[8],C$t.z=C$e[9],C$t},C$o.fromScale=function(C$t,C$e){return C$t[7]=C$e.x,C$t[8]=C$e.y,C$t[9]=C$e.z,C$t},C$o.toPosition=function(C$t,C$e){return C$t.x=C$e[0],C$t.y=C$e[1],C$t.z=C$e[2],C$t},C$o.fromPosition=function(C$t,C$e){return C$t[0]=C$e.x,C$t[1]=C$e.y,C$t[2]=C$e.z,C$t},C$o.fromAngleZ=function(C$t,C$e){return C$r.default.fromAngleZ(C$s,C$e),C$o.fromRotation(C$t,C$s),C$t},C$o.toMat4=function(C$h,C$t){var C$e=C$t[3],C$i=C$t[4],C$n=C$t[5],C$r=C$t[6],C$s=C$e+C$e,C$o=C$i+C$i,C$a=C$n+C$n,C$u=C$e*C$s,C$_=C$e*C$o,C$e=C$e*C$a,C$d=C$i*C$o,C$i=C$i*C$a,C$n=C$n*C$a,C$s=C$r*C$s,C$o=C$r*C$o,C$r=C$r*C$a,C$a=C$t[7],C$c=C$t[8],C$f=C$t[9],C$l=C$h.m;return C$l[0]=(1-(C$d+C$n))*C$a,C$l[1]=(C$_+C$r)*C$a,C$l[2]=(C$e-C$o)*C$a,C$l[3]=0,C$l[4]=(C$_-C$r)*C$c,C$l[5]=(1-(C$u+C$n))*C$c,C$l[6]=(C$i+C$s)*C$c,C$l[7]=0,C$l[8]=(C$e+C$o)*C$f,C$l[9]=(C$i-C$s)*C$f,C$l[10]=(1-(C$u+C$d))*C$f,C$l[11]=0,C$l[12]=C$t[0],C$l[13]=C$t[1],C$l[14]=C$t[2],C$l[15]=1,C$h},C$o);function C$o(){}C$i.default=C$t,cc.Trs=C$t,C$e.exports=C$i.default},{"./quat":282}],286:[function(C$l,C$h,C$t){"use strict";C$t.__esModule=!0,C$t.equals=function(C$t,C$e){return Math.abs(C$t-C$e)<=C$n*Math.max(1,Math.abs(C$t),Math.abs(C$e))},C$t.approx=function(C$t,C$e,C$i){return C$i=C$i||C$n,Math.abs(C$t-C$e)<=C$i},C$t.clamp=function(C$t,C$e,C$i){return C$t<C$e?C$e:C$i<C$t?C$i:C$t},C$t.clamp01=function(C$t){return C$t<0?0:1<C$t?1:C$t},C$t.lerp=function(C$t,C$e,C$i){return C$t+(C$e-C$t)*C$i},C$t.toRadian=function(C$t){return C$t*C$e},C$t.toDegree=function(C$t){return C$t*C$i},C$t.randomRange=C$s,C$t.randomRangeInt=function(C$t,C$e){return Math.floor(C$s(C$t,C$e))},C$t.pseudoRandom=C$o,C$t.pseudoRandomRange=C$a,C$t.pseudoRandomRangeInt=function(C$t,C$e,C$i){return Math.floor(C$a(C$t,C$e,C$i))},C$t.nextPow2=function(C$t){return--C$t,C$t=(C$t=(C$t=(C$t=(C$t|=C$t>>1)|C$t>>2)|C$t>>4)|C$t>>8)|C$t>>16,++C$t},C$t.repeat=C$c,C$t.pingPong=function(C$t,C$e){return C$t=C$c(C$t,2*C$e),C$t=C$e-Math.abs(C$t-C$e)},C$t.inverseLerp=function(C$t,C$e,C$i){return(C$i-C$t)/(C$e-C$t)},C$t.sign=function(C$t){return(0<C$t)-(C$t<0)},C$t.random=C$t.FLOAT_BYTES=C$t.FLOAT_ARRAY_TYPE=C$t.INT_MIN=C$t.INT_MAX=C$t.INT_BITS=C$t.EPSILON=void 0;var C$e=Math.PI/180,C$i=180/Math.PI,C$n=1e-6,C$r=(C$t.EPSILON=C$n,C$t.INT_BITS=32,C$t.INT_MAX=2147483647,C$t.INT_MIN=-1<<31,Float64Array);C$t.FLOAT_ARRAY_TYPE=C$r;C$t.FLOAT_BYTES=8;C$r=Math.random;function C$s(C$t,C$e){return Math.random()*(C$e-C$t)+C$t}function C$o(C$t){return(C$t=(9301*C$t+49297)%233280)/233280}function C$a(C$t,C$e,C$i){return C$o(C$t)*(C$i-C$e)+C$e}function C$c(C$t,C$e){return C$t-Math.floor(C$t/C$e)*C$e}C$t.random=C$r},{}],287:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$t=C$t("../platform/js"))&&C$t.__esModule?C$t:{default:C$t};(C$t=C$r.prototype).clone=function(){return cc.errorID("0100",C$n.default.getClassName(this)+".clone"),null},C$t.equals=function(C$t){return cc.errorID("0100",C$n.default.getClassName(this)+".equals"),!1},C$t.lerp=function(C$t,C$e){return cc.errorID("0100",C$n.default.getClassName(this)+".lerp"),this.clone()},C$t.set=function(C$t){cc.errorID("0100",C$n.default.getClassName(this)+".set")},C$t.toString=function(){return""+{}};C$t=C$r;function C$r(){}C$i.default=C$t,C$n.default.setClassName("cc.ValueType",C$t),cc.ValueType=C$t,C$e.exports=C$i.default},{"../platform/js":209}],288:[function(C$t,C$h,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$i=C$s(C$t("./value-type")),C$u=C$s(C$t("../platform/CCClass")),C$n=C$s(C$t("../utils/misc")),C$r=C$t("./utils");function C$s(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$_(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$d(C$i){return function(){var C$t,C$e=C$f(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$f(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$f(C$t){return(C$f=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$p,C$m,C$y,C$o=0,C$a=0,C$c=(C$p=C$i.default,C$t=C$p,(C$i=C$l).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$d(C$l),(C$i=C$l.prototype).sub=function(C$t,C$e){return C$l.subtract(C$e||new C$l,this,C$t)},C$i.mul=function(C$t,C$e){return C$l.multiplyScalar(C$e||new C$l,this,C$t)},C$i.div=function(C$t,C$e){return C$l.multiplyScalar(C$e||new C$l,this,1/C$t)},C$i.scale=function(C$t,C$e){return C$l.multiply(C$e||new C$l,this,C$t)},C$i.neg=function(C$t){return C$l.negate(C$t||new C$l,this)},C$l.clone=function(C$t){return new C$l(C$t.x,C$t.y)},C$l.copy=function(C$t,C$e){return C$t.x=C$e.x,C$t.y=C$e.y,C$t},C$l.set=function(C$t,C$e,C$i){return C$t.x=C$e,C$t.y=C$i,C$t},C$l.add=function(C$t,C$e,C$i){return C$t.x=C$e.x+C$i.x,C$t.y=C$e.y+C$i.y,C$t},C$l.subtract=function(C$t,C$e,C$i){return C$t.x=C$e.x-C$i.x,C$t.y=C$e.y-C$i.y,C$t},C$l.multiply=function(C$t,C$e,C$i){return C$t.x=C$e.x*C$i.x,C$t.y=C$e.y*C$i.y,C$t},C$l.divide=function(C$t,C$e,C$i){return C$t.x=C$e.x/C$i.x,C$t.y=C$e.y/C$i.y,C$t},C$l.ceil=function(C$t,C$e){return C$t.x=Math.ceil(C$e.x),C$t.y=Math.ceil(C$e.y),C$t},C$l.floor=function(C$t,C$e){return C$t.x=Math.floor(C$e.x),C$t.y=Math.floor(C$e.y),C$t},C$l.min=function(C$t,C$e,C$i){return C$t.x=Math.min(C$e.x,C$i.x),C$t.y=Math.min(C$e.y,C$i.y),C$t},C$l.max=function(C$t,C$e,C$i){return C$t.x=Math.max(C$e.x,C$i.x),C$t.y=Math.max(C$e.y,C$i.y),C$t},C$l.round=function(C$t,C$e){return C$t.x=Math.round(C$e.x),C$t.y=Math.round(C$e.y),C$t},C$l.multiplyScalar=function(C$t,C$e,C$i){return C$t.x=C$e.x*C$i,C$t.y=C$e.y*C$i,C$t},C$l.scaleAndAdd=function(C$t,C$e,C$i,C$n){return C$t.x=C$e.x+C$i.x*C$n,C$t.y=C$e.y+C$i.y*C$n,C$t},C$l.distance=function(C$t,C$e){return C$o=C$e.x-C$t.x,C$a=C$e.y-C$t.y,Math.sqrt(C$o*C$o+C$a*C$a)},C$l.squaredDistance=function(C$t,C$e){return C$o=C$e.x-C$t.x,C$a=C$e.y-C$t.y,C$o*C$o+C$a*C$a},C$l.len=function(C$t){return C$o=C$t.x,C$a=C$t.y,Math.sqrt(C$o*C$o+C$a*C$a)},C$l.lengthSqr=function(C$t){return C$o=C$t.x,C$a=C$t.y,C$o*C$o+C$a*C$a},C$l.negate=function(C$t,C$e){return C$t.x=-C$e.x,C$t.y=-C$e.y,C$t},C$l.inverse=function(C$t,C$e){return C$t.x=1/C$e.x,C$t.y=1/C$e.y,C$t},C$l.inverseSafe=function(C$t,C$e){return C$o=C$e.x,C$a=C$e.y,Math.abs(C$o)<C$r.EPSILON?C$t.x=0:C$t.x=1/C$o,Math.abs(C$a)<C$r.EPSILON?C$t.y=0:C$t.y=1/C$a,C$t},C$l.normalize=function(C$t,C$e){C$o=C$e.x,C$a=C$e.y;C$e=C$o*C$o+C$a*C$a;return 0<C$e&&(C$e=1/Math.sqrt(C$e),C$t.x=C$o*C$e,C$t.y=C$a*C$e),C$t},C$l.dot=function(C$t,C$e){return C$t.x*C$e.x+C$t.y*C$e.y},C$l.cross=function(C$t,C$e,C$i){return C$t.x=C$t.y=0,C$t.z=C$e.x*C$i.y-C$e.y*C$i.x,C$t},C$l.lerp=function(C$t,C$e,C$i,C$n){return C$o=C$e.x,C$a=C$e.y,C$t.x=C$o+C$n*(C$i.x-C$o),C$t.y=C$a+C$n*(C$i.y-C$a),C$t},C$l.random=function(C$t,C$e){C$e=C$e||1;var C$i=2*(0,C$r.random)()*Math.PI;return C$t.x=Math.cos(C$i)*C$e,C$t.y=Math.sin(C$i)*C$e,C$t},C$l.transformMat3=function(C$t,C$e,C$i){C$o=C$e.x,C$a=C$e.y;C$e=C$i.m;return C$t.x=C$e[0]*C$o+C$e[3]*C$a+C$e[6],C$t.y=C$e[1]*C$o+C$e[4]*C$a+C$e[7],C$t},C$l.transformMat4=function(C$t,C$e,C$i){C$o=C$e.x,C$a=C$e.y;C$e=C$i.m;return C$t.x=C$e[0]*C$o+C$e[4]*C$a+C$e[12],C$t.y=C$e[1]*C$o+C$e[5]*C$a+C$e[13],C$t},C$l.strictEquals=function(C$t,C$e){return C$t.x===C$e.x&&C$t.y===C$e.y},C$l.equals=function(C$t,C$e,C$i){return void 0===C$i&&(C$i=C$r.EPSILON),Math.abs(C$t.x-C$e.x)<=C$i*Math.max(1,Math.abs(C$t.x),Math.abs(C$e.x))&&Math.abs(C$t.y-C$e.y)<=C$i*Math.max(1,Math.abs(C$t.y),Math.abs(C$e.y))},C$l.angle=function(C$t,C$e){C$l.normalize(C$g,C$t),C$l.normalize(C$v,C$e);C$t=C$l.dot(C$g,C$v);return 1<C$t?0:C$t<-1?Math.PI:Math.acos(C$t)},C$l.toArray=function(C$t,C$e,C$i){return C$t[(C$i=void 0===C$i?0:C$i)+0]=C$e.x,C$t[C$i+1]=C$e.y,C$t},C$l.fromArray=function(C$t,C$e,C$i){return C$t.x=C$e[(C$i=void 0===C$i?0:C$i)+0],C$t.y=C$e[C$i+1],C$t},C$t=C$l,C$y=[{key:"ONE",get:function(){return new C$l(1,1)}},{key:"ZERO",get:function(){return new C$l(0,0)}},{key:"UP",get:function(){return new C$l(0,1)}},{key:"RIGHT",get:function(){return new C$l(1,0)}}],(C$m=null)&&C$_(C$t.prototype,C$m),C$y&&C$_(C$t,C$y),C$i.clone=function(){return new C$l(this.x,this.y)},C$i.set=function(C$t){return this.x=C$t.x,this.y=C$t.y,this},C$i.equals=function(C$t){return C$t&&this.x===C$t.x&&this.y===C$t.y},C$i.fuzzyEquals=function(C$t,C$e){return this.x-C$e<=C$t.x&&C$t.x<=this.x+C$e&&this.y-C$e<=C$t.y&&C$t.y<=this.y+C$e},C$i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},C$i.lerp=function(C$t,C$e,C$i){C$i=C$i||new C$l;var C$n=this.x,C$r=this.y;return C$i.x=C$n+(C$t.x-C$n)*C$e,C$i.y=C$r+(C$t.y-C$r)*C$e,C$i},C$i.clampf=function(C$t,C$e){return this.x=C$n.default.clampf(this.x,C$t.x,C$e.x),this.y=C$n.default.clampf(this.y,C$t.y,C$e.y),this},C$i.add=function(C$t,C$e){return(C$e=C$e||new C$l).x=this.x+C$t.x,C$e.y=this.y+C$t.y,C$e},C$i.addSelf=function(C$t){return this.x+=C$t.x,this.y+=C$t.y,this},C$i.subtract=function(C$t){return this.x-=C$t.x,this.y-=C$t.y,this},C$i.multiplyScalar=function(C$t){return this.x*=C$t,this.y*=C$t,this},C$i.multiply=function(C$t){return this.x*=C$t.x,this.y*=C$t.y,this},C$i.divide=function(C$t){return this.x/=C$t,this.y/=C$t,this},C$i.negate=function(){return this.x=-this.x,this.y=-this.y,this},C$i.dot=function(C$t){return this.x*C$t.x+this.y*C$t.y},C$i.cross=function(C$t){return this.x*C$t.y-this.y*C$t.x},C$i.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},C$i.lengthSqr=function(){return this.x*this.x+this.y*this.y},C$i.normalizeSelf=function(){var C$t=this.x*this.x+this.y*this.y;if(1==C$t)return this;if(0==C$t)return this;C$t=1/Math.sqrt(C$t);return this.x*=C$t,this.y*=C$t,this},C$i.normalize=function(C$t){return(C$t=C$t||new C$l).x=this.x,C$t.y=this.y,C$t.normalizeSelf(),C$t},C$i.angle=function(C$t){var C$e=this.magSqr(),C$i=C$t.magSqr();if(0===C$e||0===C$i)return console.warn("Can't get angle between zero vector"),0;C$t=this.dot(C$t)/Math.sqrt(C$e*C$i),C$t=C$n.default.clampf(C$t,-1,1);return Math.acos(C$t)},C$i.signAngle=function(C$t){var C$e=this.angle(C$t);return this.cross(C$t)<0?-C$e:C$e},C$i.rotate=function(C$t,C$e){return(C$e=C$e||new C$l).x=this.x,C$e.y=this.y,C$e.rotateSelf(C$t)},C$i.rotateSelf=function(C$t){var C$e=Math.sin(C$t),C$t=Math.cos(C$t),C$i=this.x;return this.x=C$t*C$i-C$e*this.y,this.y=C$e*C$i+C$t*this.y,this},C$i.project=function(C$t){return C$t.multiplyScalar(this.dot(C$t)/C$t.dot(C$t))},C$i.transformMat4=function(C$t,C$e){return C$e=C$e||new C$l,C$l.transformMat4(C$e,this,C$t),C$e},C$i.maxAxis=function(){return Math.max(this.x,this.y)},C$l);function C$l(C$t,C$e){var C$i;return void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),(C$i=C$p.call(this)||this).mag=C$l.prototype.len,C$i.magSqr=C$l.prototype.lengthSqr,C$i.subSelf=C$l.prototype.subtract,C$i.mulSelf=C$l.prototype.multiplyScalar,C$i.divSelf=C$l.prototype.divide,C$i.scaleSelf=C$l.prototype.multiply,C$i.negSelf=C$l.prototype.negate,C$i.x=void 0,C$i.y=void 0,C$i.z=0,C$t&&"object"==typeof C$t?(C$i.y=C$t.y||0,C$i.x=C$t.x||0):(C$i.x=C$t||0,C$i.y=C$e||0),C$i}(C$e.default=C$c).sub=C$c.subtract,C$c.mul=C$c.multiply,C$c.scale=C$c.multiplyScalar,C$c.mag=C$c.len,C$c.squaredMagnitude=C$c.lengthSqr,C$c.div=C$c.divide,C$c.ONE_R=C$c.ONE,C$c.ZERO_R=C$c.ZERO,C$c.UP_R=C$c.UP,C$c.RIGHT_R=C$c.RIGHT;var C$g=new C$c,C$v=new C$c;C$u.default.fastDefine("cc.Vec2",C$c,{x:0,y:0}),cc.v2=function(C$t,C$e){return new C$c(C$t,C$e)},cc.Vec2=C$c,C$h.exports=C$e.default},{"../platform/CCClass":189,"../utils/misc":264,"./utils":286,"./value-type":287}],289:[function(C$t,C$h,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$i=C$d(C$t("./value-type")),C$u=C$d(C$t("../platform/CCClass")),C$_=C$d(C$t("../utils/misc")),C$r=C$d(C$t("./vec2")),C$a=C$t("./utils");function C$d(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$f(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$p(C$i){return function(){var C$t,C$e=C$m(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$m(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$m(C$t){return(C$m=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$y,C$g,C$v,C$o=0,C$c=0,C$l=0,C$n=(C$y=C$i.default,C$t=C$y,(C$i=C$s).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$p(C$s),(C$i=C$s.prototype).sub=function(C$t,C$e){return C$s.subtract(C$e||new C$s,this,C$t)},C$i.mul=function(C$t,C$e){return C$s.multiplyScalar(C$e||new C$s,this,C$t)},C$i.div=function(C$t,C$e){return C$s.multiplyScalar(C$e||new C$s,this,1/C$t)},C$i.scale=function(C$t,C$e){return C$s.multiply(C$e||new C$s,this,C$t)},C$i.neg=function(C$t){return C$s.negate(C$t||new C$s,this)},C$s.zero=function(C$t){return C$t.x=0,C$t.y=0,C$t.z=0,C$t},C$s.clone=function(C$t){return new C$s(C$t.x,C$t.y,C$t.z)},C$s.copy=function(C$t,C$e){return C$t.x=C$e.x,C$t.y=C$e.y,C$t.z=C$e.z,C$t},C$s.set=function(C$t,C$e,C$i,C$n){return C$t.x=C$e,C$t.y=C$i,C$t.z=C$n,C$t},C$s.add=function(C$t,C$e,C$i){return C$t.x=C$e.x+C$i.x,C$t.y=C$e.y+C$i.y,C$t.z=C$e.z+C$i.z,C$t},C$s.subtract=function(C$t,C$e,C$i){return C$t.x=C$e.x-C$i.x,C$t.y=C$e.y-C$i.y,C$t.z=C$e.z-C$i.z,C$t},C$s.multiply=function(C$t,C$e,C$i){return C$t.x=C$e.x*C$i.x,C$t.y=C$e.y*C$i.y,C$t.z=C$e.z*C$i.z,C$t},C$s.divide=function(C$t,C$e,C$i){return C$t.x=C$e.x/C$i.x,C$t.y=C$e.y/C$i.y,C$t.z=C$e.z/C$i.z,C$t},C$s.ceil=function(C$t,C$e){return C$t.x=Math.ceil(C$e.x),C$t.y=Math.ceil(C$e.y),C$t.z=Math.ceil(C$e.z),C$t},C$s.floor=function(C$t,C$e){return C$t.x=Math.floor(C$e.x),C$t.y=Math.floor(C$e.y),C$t.z=Math.floor(C$e.z),C$t},C$s.min=function(C$t,C$e,C$i){return C$t.x=Math.min(C$e.x,C$i.x),C$t.y=Math.min(C$e.y,C$i.y),C$t.z=Math.min(C$e.z,C$i.z),C$t},C$s.max=function(C$t,C$e,C$i){return C$t.x=Math.max(C$e.x,C$i.x),C$t.y=Math.max(C$e.y,C$i.y),C$t.z=Math.max(C$e.z,C$i.z),C$t},C$s.round=function(C$t,C$e){return C$t.x=Math.round(C$e.x),C$t.y=Math.round(C$e.y),C$t.z=Math.round(C$e.z),C$t},C$s.multiplyScalar=function(C$t,C$e,C$i){return C$t.x=C$e.x*C$i,C$t.y=C$e.y*C$i,C$t.z=C$e.z*C$i,C$t},C$s.scaleAndAdd=function(C$t,C$e,C$i,C$n){return C$t.x=C$e.x+C$i.x*C$n,C$t.y=C$e.y+C$i.y*C$n,C$t.z=C$e.z+C$i.z*C$n,C$t},C$s.distance=function(C$t,C$e){return C$o=C$e.x-C$t.x,C$c=C$e.y-C$t.y,C$l=C$e.z-C$t.z,Math.sqrt(C$o*C$o+C$c*C$c+C$l*C$l)},C$s.squaredDistance=function(C$t,C$e){return C$o=C$e.x-C$t.x,C$c=C$e.y-C$t.y,C$l=C$e.z-C$t.z,C$o*C$o+C$c*C$c+C$l*C$l},C$s.len=function(C$t){return C$o=C$t.x,C$c=C$t.y,C$l=C$t.z,Math.sqrt(C$o*C$o+C$c*C$c+C$l*C$l)},C$s.lengthSqr=function(C$t){return C$o=C$t.x,C$c=C$t.y,C$l=C$t.z,C$o*C$o+C$c*C$c+C$l*C$l},C$s.negate=function(C$t,C$e){return C$t.x=-C$e.x,C$t.y=-C$e.y,C$t.z=-C$e.z,C$t},C$s.inverse=function(C$t,C$e){return C$t.x=1/C$e.x,C$t.y=1/C$e.y,C$t.z=1/C$e.z,C$t},C$s.inverseSafe=function(C$t,C$e){return C$o=C$e.x,C$c=C$e.y,C$l=C$e.z,Math.abs(C$o)<C$a.EPSILON?C$t.x=0:C$t.x=1/C$o,Math.abs(C$c)<C$a.EPSILON?C$t.y=0:C$t.y=1/C$c,Math.abs(C$l)<C$a.EPSILON?C$t.z=0:C$t.z=1/C$l,C$t},C$s.normalize=function(C$t,C$e){C$o=C$e.x,C$c=C$e.y,C$l=C$e.z;C$e=C$o*C$o+C$c*C$c+C$l*C$l;return 0<C$e&&(C$e=1/Math.sqrt(C$e),C$t.x=C$o*C$e,C$t.y=C$c*C$e,C$t.z=C$l*C$e),C$t},C$s.dot=function(C$t,C$e){return C$t.x*C$e.x+C$t.y*C$e.y+C$t.z*C$e.z},C$s.cross=function(C$t,C$e,C$i){var C$n=C$e.x,C$r=C$e.y,C$e=C$e.z,C$s=C$i.x,C$o=C$i.y,C$i=C$i.z;return C$t.x=C$r*C$i-C$e*C$o,C$t.y=C$e*C$s-C$n*C$i,C$t.z=C$n*C$o-C$r*C$s,C$t},C$s.lerp=function(C$t,C$e,C$i,C$n){return C$t.x=C$e.x+C$n*(C$i.x-C$e.x),C$t.y=C$e.y+C$n*(C$i.y-C$e.y),C$t.z=C$e.z+C$n*(C$i.z-C$e.z),C$t},C$s.random=function(C$t,C$e){C$e=C$e||1;var C$i=2*(0,C$a.random)()*Math.PI,C$n=2*(0,C$a.random)()-1,C$r=Math.sqrt(1-C$n*C$n);return C$t.x=C$r*Math.cos(C$i)*C$e,C$t.y=C$r*Math.sin(C$i)*C$e,C$t.z=C$n*C$e,C$t},C$s.transformMat4=function(C$t,C$e,C$i){C$o=C$e.x,C$c=C$e.y,C$l=C$e.z;C$e=C$i.m,C$i=(C$i=C$e[3]*C$o+C$e[7]*C$c+C$e[11]*C$l+C$e[15])?1/C$i:1;return C$t.x=(C$e[0]*C$o+C$e[4]*C$c+C$e[8]*C$l+C$e[12])*C$i,C$t.y=(C$e[1]*C$o+C$e[5]*C$c+C$e[9]*C$l+C$e[13])*C$i,C$t.z=(C$e[2]*C$o+C$e[6]*C$c+C$e[10]*C$l+C$e[14])*C$i,C$t},C$s.transformMat4Normal=function(C$t,C$e,C$i){C$o=C$e.x,C$c=C$e.y,C$l=C$e.z;C$e=C$i.m,C$i=(C$i=C$e[3]*C$o+C$e[7]*C$c+C$e[11]*C$l)?1/C$i:1;return C$t.x=(C$e[0]*C$o+C$e[4]*C$c+C$e[8]*C$l)*C$i,C$t.y=(C$e[1]*C$o+C$e[5]*C$c+C$e[9]*C$l)*C$i,C$t.z=(C$e[2]*C$o+C$e[6]*C$c+C$e[10]*C$l)*C$i,C$t},C$s.transformMat3=function(C$t,C$e,C$i){C$o=C$e.x,C$c=C$e.y,C$l=C$e.z;C$e=C$i.m;return C$t.x=C$o*C$e[0]+C$c*C$e[3]+C$l*C$e[6],C$t.y=C$o*C$e[1]+C$c*C$e[4]+C$l*C$e[7],C$t.z=C$o*C$e[2]+C$c*C$e[5]+C$l*C$e[8],C$t},C$s.transformAffine=function(C$t,C$e,C$i){C$o=C$e.x,C$c=C$e.y,C$l=C$e.z;C$e=C$i.m;return C$t.x=C$e[0]*C$o+C$e[1]*C$c+C$e[2]*C$l+C$e[3],C$t.y=C$e[4]*C$o+C$e[5]*C$c+C$e[6]*C$l+C$e[7],C$t.x=C$e[8]*C$o+C$e[9]*C$c+C$e[10]*C$l+C$e[11],C$t},C$s.transformQuat=function(C$t,C$e,C$i){var C$n=C$i.w*C$e.x+C$i.y*C$e.z-C$i.z*C$e.y,C$r=C$i.w*C$e.y+C$i.z*C$e.x-C$i.x*C$e.z,C$s=C$i.w*C$e.z+C$i.x*C$e.y-C$i.y*C$e.x,C$e=-C$i.x*C$e.x-C$i.y*C$e.y-C$i.z*C$e.z;return C$t.x=C$n*C$i.w+C$e*-C$i.x+C$r*-C$i.z-C$s*-C$i.y,C$t.y=C$r*C$i.w+C$e*-C$i.y+C$s*-C$i.x-C$n*-C$i.z,C$t.z=C$s*C$i.w+C$e*-C$i.z+C$n*-C$i.y-C$r*-C$i.x,C$t},C$s.transformRTS=function(C$t,C$e,C$i,C$n,C$r){var C$s=C$e.x*C$r.x,C$o=C$e.y*C$r.y,C$e=C$e.z*C$r.z,C$r=C$i.w*C$s+C$i.y*C$e-C$i.z*C$o,C$a=C$i.w*C$o+C$i.z*C$s-C$i.x*C$e,C$c=C$i.w*C$e+C$i.x*C$o-C$i.y*C$s,C$s=-C$i.x*C$s-C$i.y*C$o-C$i.z*C$e;return C$t.x=C$r*C$i.w+C$s*-C$i.x+C$a*-C$i.z-C$c*-C$i.y+C$n.x,C$t.y=C$a*C$i.w+C$s*-C$i.y+C$c*-C$i.x-C$r*-C$i.z+C$n.y,C$t.z=C$c*C$i.w+C$s*-C$i.z+C$r*-C$i.y-C$a*-C$i.x+C$n.z,C$t},C$s.transformInverseRTS=function(C$t,C$e,C$i,C$n,C$r){var C$s=C$e.x-C$n.x,C$o=C$e.y-C$n.y,C$e=C$e.z-C$n.z,C$n=C$i.w*C$s-C$i.y*C$e+C$i.z*C$o,C$a=C$i.w*C$o-C$i.z*C$s+C$i.x*C$e,C$c=C$i.w*C$e-C$i.x*C$o+C$i.y*C$s,C$s=C$i.x*C$s+C$i.y*C$o+C$i.z*C$e;return C$t.x=(C$n*C$i.w+C$s*C$i.x+C$a*C$i.z-C$c*C$i.y)/C$r.x,C$t.y=(C$a*C$i.w+C$s*C$i.y+C$c*C$i.x-C$n*C$i.z)/C$r.y,C$t.z=(C$c*C$i.w+C$s*C$i.z+C$n*C$i.y-C$a*C$i.x)/C$r.z,C$t},C$s.rotateX=function(C$t,C$e,C$i,C$n){C$o=C$e.x-C$i.x,C$c=C$e.y-C$i.y,C$l=C$e.z-C$i.z;var C$e=Math.cos(C$n),C$n=Math.sin(C$n),C$r=C$o,C$s=C$c*C$e-C$l*C$n,C$n=C$c*C$n+C$l*C$e;return C$t.x=C$r+C$i.x,C$t.y=C$s+C$i.y,C$t.z=C$n+C$i.z,C$t},C$s.rotateY=function(C$t,C$e,C$i,C$n){C$o=C$e.x-C$i.x,C$c=C$e.y-C$i.y,C$l=C$e.z-C$i.z;var C$e=Math.cos(C$n),C$n=Math.sin(C$n),C$r=C$l*C$n+C$o*C$e,C$s=C$c,C$e=C$l*C$e-C$o*C$n;return C$t.x=C$r+C$i.x,C$t.y=C$s+C$i.y,C$t.z=C$e+C$i.z,C$t},C$s.rotateZ=function(C$t,C$e,C$i,C$n){C$o=C$e.x-C$i.x,C$c=C$e.y-C$i.y,C$l=C$e.z-C$i.z;var C$e=Math.cos(C$n),C$n=Math.sin(C$n),C$r=C$o*C$e-C$c*C$n,C$n=C$o*C$n+C$c*C$e,C$e=C$l;return C$t.x=C$r+C$i.x,C$t.y=C$n+C$i.y,C$t.z=C$e+C$i.z,C$t},C$s.strictEquals=function(C$t,C$e){return C$t.x===C$e.x&&C$t.y===C$e.y&&C$t.z===C$e.z},C$s.equals=function(C$t,C$e,C$i){void 0===C$i&&(C$i=C$a.EPSILON);var C$n=C$t.x,C$r=C$t.y,C$t=C$t.z,C$s=C$e.x,C$o=C$e.y,C$e=C$e.z;return Math.abs(C$n-C$s)<=C$i*Math.max(1,Math.abs(C$n),Math.abs(C$s))&&Math.abs(C$r-C$o)<=C$i*Math.max(1,Math.abs(C$r),Math.abs(C$o))&&Math.abs(C$t-C$e)<=C$i*Math.max(1,Math.abs(C$t),Math.abs(C$e))},C$s.angle=function(C$t,C$e){C$s.normalize(C$x,C$t),C$s.normalize(C$b,C$e);C$t=C$s.dot(C$x,C$b);return 1<C$t?0:C$t<-1?Math.PI:Math.acos(C$t)},C$s.projectOnPlane=function(C$t,C$e,C$i){return C$s.subtract(C$t,C$e,C$s.project(C$t,C$e,C$i))},C$s.project=function(C$t,C$e,C$i){var C$n=C$s.lengthSqr(C$i);return C$n<1e-6?C$s.set(C$t,0,0,0):C$s.multiplyScalar(C$t,C$i,C$s.dot(C$e,C$i)/C$n)},C$s.toArray=function(C$t,C$e,C$i){return C$t[(C$i=void 0===C$i?0:C$i)+0]=C$e.x,C$t[C$i+1]=C$e.y,C$t[C$i+2]=C$e.z,C$t},C$s.fromArray=function(C$t,C$e,C$i){return C$t.x=C$e[(C$i=void 0===C$i?0:C$i)+0],C$t.y=C$e[C$i+1],C$t.z=C$e[C$i+2],C$t},C$t=C$s,C$v=[{key:"ONE",get:function(){return new C$s(1,1,1)}},{key:"ZERO",get:function(){return new C$s}},{key:"UP",get:function(){return new C$s(0,1,0)}},{key:"RIGHT",get:function(){return new C$s(1,0,0)}},{key:"FORWARD",get:function(){return new C$s(0,0,1)}}],(C$g=null)&&C$f(C$t.prototype,C$g),C$v&&C$f(C$t,C$v),C$i.clone=function(){return new C$s(this.x,this.y,this.z)},C$i.set=function(C$t){return this.x=C$t.x,this.y=C$t.y,this.z=C$t.z,this},C$i.equals=function(C$t){return C$t&&this.x===C$t.x&&this.y===C$t.y&&this.z===C$t.z},C$i.fuzzyEquals=function(C$t,C$e){return this.x-C$e<=C$t.x&&C$t.x<=this.x+C$e&&this.y-C$e<=C$t.y&&C$t.y<=this.y+C$e&&this.z-C$e<=C$t.z&&C$t.z<=this.z+C$e},C$i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},C$i.lerp=function(C$t,C$e,C$i){return C$i=C$i||new C$s,C$s.lerp(C$i,this,C$t,C$e),C$i},C$i.clampf=function(C$t,C$e){return this.x=C$_.default.clampf(this.x,C$t.x,C$e.x),this.y=C$_.default.clampf(this.y,C$t.y,C$e.y),this.z=C$_.default.clampf(this.z,C$t.z,C$e.z),this},C$i.addSelf=function(C$t){return this.x+=C$t.x,this.y+=C$t.y,this.z+=C$t.z,this},C$i.add=function(C$t,C$e){return(C$e=C$e||new C$s).x=this.x+C$t.x,C$e.y=this.y+C$t.y,C$e.z=this.z+C$t.z,C$e},C$i.subtract=function(C$t){return this.x-=C$t.x,this.y-=C$t.y,this.z-=C$t.z,this},C$i.multiplyScalar=function(C$t){return this.x*=C$t,this.y*=C$t,this.z*=C$t,this},C$i.multiply=function(C$t){return this.x*=C$t.x,this.y*=C$t.y,this.z*=C$t.z,this},C$i.divide=function(C$t){return this.x/=C$t,this.y/=C$t,this.z/=C$t,this},C$i.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},C$i.dot=function(C$t){return this.x*C$t.x+this.y*C$t.y+this.z*C$t.z},C$i.cross=function(C$t,C$e){return C$e=C$e||new C$s,C$s.cross(C$e,this,C$t),C$e},C$i.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},C$i.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z},C$i.normalizeSelf=function(){return C$s.normalize(this,this),this},C$i.normalize=function(C$t){return C$t=C$t||new C$s,C$s.normalize(C$t,this),C$t},C$i.transformMat4=function(C$t,C$e){return C$e=C$e||new C$s,C$s.transformMat4(C$e,this,C$t),C$e},C$i.maxAxis=function(){return Math.max(this.x,this.y,this.z)},C$i.signAngle=function(C$t){cc.warnID(1408,"vec3.signAngle","v2.1","cc.v2(selfVector).signAngle(vector)");var C$e=new C$r.default(this.x,this.y),C$t=new C$r.default(C$t.x,C$t.y);return C$e.signAngle(C$t)},C$i.rotate=function(C$t,C$e){return cc.warnID(1408,"vec3.rotate","v2.1","cc.v2(selfVector).rotate(radians, out)"),C$r.default.prototype.rotate.call(this,C$t,C$e)},C$i.rotateSelf=function(C$t){return cc.warnID(1408,"vec3.rotateSelf","v2.1","cc.v2(selfVector).rotateSelf(radians)"),C$r.default.prototype.rotateSelf.call(this,C$t)},C$s);function C$s(C$t,C$e,C$i){var C$n;return void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),(C$n=C$y.call(this)||this).mag=C$s.prototype.len,C$n.magSqr=C$s.prototype.lengthSqr,C$n.subSelf=C$s.prototype.subtract,C$n.mulSelf=C$s.prototype.multiplyScalar,C$n.divSelf=C$s.prototype.divide,C$n.scaleSelf=C$s.prototype.multiply,C$n.negSelf=C$s.prototype.negate,C$n.x=void 0,C$n.y=void 0,C$n.z=void 0,C$n.angle=C$r.default.prototype.angle,C$n.project=C$r.default.prototype.project,C$t&&"object"==typeof C$t?(C$n.z=C$t.z,C$n.y=C$t.y,C$n.x=C$t.x):(C$n.x=C$t,C$n.y=C$e,C$n.z=C$i),C$n}(C$e.default=C$n).sub=C$n.subtract,C$n.mul=C$n.multiply,C$n.scale=C$n.multiplyScalar,C$n.mag=C$n.len,C$n.squaredMagnitude=C$n.lengthSqr,C$n.div=C$n.divide,C$n.ONE_R=C$n.ONE,C$n.ZERO_R=C$n.ZERO,C$n.UP_R=C$n.UP,C$n.RIGHT_R=C$n.RIGHT,C$n.FRONT_R=C$n.FORWARD;var C$x=new C$n,C$b=new C$n;C$u.default.fastDefine("cc.Vec3",C$n,{x:0,y:0,z:0}),cc.v3=function(C$t,C$e,C$i){return new C$n(C$t,C$e,C$i)},cc.Vec3=C$n,C$h.exports=C$e.default},{"../platform/CCClass":189,"../utils/misc":264,"./utils":286,"./value-type":287,"./vec2":288}],290:[function(C$t,C$n,C$e){"use strict";C$e.__esModule=!0,C$e.v4=C$v,C$e.default=void 0;var C$o=C$_(C$t("../platform/CCClass")),C$i=C$_(C$t("./value-type")),C$s=C$t("./utils");function C$_(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$d(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}function C$f(C$i){return function(){var C$t,C$e=C$p(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$p(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$p(C$t){return(C$p=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$m,C$y,C$g,C$c=0,C$l=0,C$h=0,C$u=0,C$r=(C$m=C$i.default,C$t=C$m,(C$i=C$a).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$f(C$a),(C$i=C$a.prototype).sub=function(C$t,C$e){return C$a.subtract(C$e||new C$a,this,C$t)},C$i.mul=function(C$t,C$e){return C$a.multiplyScalar(C$e||new C$a,this,C$t)},C$i.div=function(C$t,C$e){return C$a.multiplyScalar(C$e||new C$a,this,1/C$t)},C$i.scale=function(C$t,C$e){return C$a.multiply(C$e||new C$a,this,C$t)},C$i.neg=function(C$t){return C$a.negate(C$t||new C$a,this)},C$a.clone=function(C$t){return new C$a(C$t.x,C$t.y,C$t.z,C$t.w)},C$a.copy=function(C$t,C$e){return C$t.x=C$e.x,C$t.y=C$e.y,C$t.z=C$e.z,C$t.w=C$e.w,C$t},C$a.set=function(C$t,C$e,C$i,C$n,C$r){return C$t.x=C$e,C$t.y=C$i,C$t.z=C$n,C$t.w=C$r,C$t},C$a.add=function(C$t,C$e,C$i){return C$t.x=C$e.x+C$i.x,C$t.y=C$e.y+C$i.y,C$t.z=C$e.z+C$i.z,C$t.w=C$e.w+C$i.w,C$t},C$a.subtract=function(C$t,C$e,C$i){return C$t.x=C$e.x-C$i.x,C$t.y=C$e.y-C$i.y,C$t.z=C$e.z-C$i.z,C$t.w=C$e.w-C$i.w,C$t},C$a.multiply=function(C$t,C$e,C$i){return C$t.x=C$e.x*C$i.x,C$t.y=C$e.y*C$i.y,C$t.z=C$e.z*C$i.z,C$t.w=C$e.w*C$i.w,C$t},C$a.divide=function(C$t,C$e,C$i){return C$t.x=C$e.x/C$i.x,C$t.y=C$e.y/C$i.y,C$t.z=C$e.z/C$i.z,C$t.w=C$e.w/C$i.w,C$t},C$a.ceil=function(C$t,C$e){return C$t.x=Math.ceil(C$e.x),C$t.y=Math.ceil(C$e.y),C$t.z=Math.ceil(C$e.z),C$t.w=Math.ceil(C$e.w),C$t},C$a.floor=function(C$t,C$e){return C$t.x=Math.floor(C$e.x),C$t.y=Math.floor(C$e.y),C$t.z=Math.floor(C$e.z),C$t.w=Math.floor(C$e.w),C$t},C$a.min=function(C$t,C$e,C$i){return C$t.x=Math.min(C$e.x,C$i.x),C$t.y=Math.min(C$e.y,C$i.y),C$t.z=Math.min(C$e.z,C$i.z),C$t.w=Math.min(C$e.w,C$i.w),C$t},C$a.max=function(C$t,C$e,C$i){return C$t.x=Math.max(C$e.x,C$i.x),C$t.y=Math.max(C$e.y,C$i.y),C$t.z=Math.max(C$e.z,C$i.z),C$t.w=Math.max(C$e.w,C$i.w),C$t},C$a.round=function(C$t,C$e){return C$t.x=Math.round(C$e.x),C$t.y=Math.round(C$e.y),C$t.z=Math.round(C$e.z),C$t.w=Math.round(C$e.w),C$t},C$a.multiplyScalar=function(C$t,C$e,C$i){return C$t.x=C$e.x*C$i,C$t.y=C$e.y*C$i,C$t.z=C$e.z*C$i,C$t.w=C$e.w*C$i,C$t},C$a.scaleAndAdd=function(C$t,C$e,C$i,C$n){return C$t.x=C$e.x+C$i.x*C$n,C$t.y=C$e.y+C$i.y*C$n,C$t.z=C$e.z+C$i.z*C$n,C$t.w=C$e.w+C$i.w*C$n,C$t},C$a.distance=function(C$t,C$e){var C$i=C$e.x-C$t.x,C$n=C$e.y-C$t.y,C$r=C$e.z-C$t.z,C$e=C$e.w-C$t.w;return Math.sqrt(C$i*C$i+C$n*C$n+C$r*C$r+C$e*C$e)},C$a.squaredDistance=function(C$t,C$e){var C$i=C$e.x-C$t.x,C$n=C$e.y-C$t.y,C$r=C$e.z-C$t.z,C$e=C$e.w-C$t.w;return C$i*C$i+C$n*C$n+C$r*C$r+C$e*C$e},C$a.len=function(C$t){return C$c=C$t.x,C$l=C$t.y,C$h=C$t.z,C$u=C$t.w,Math.sqrt(C$c*C$c+C$l*C$l+C$h*C$h+C$u*C$u)},C$a.lengthSqr=function(C$t){return C$c=C$t.x,C$l=C$t.y,C$h=C$t.z,C$u=C$t.w,C$c*C$c+C$l*C$l+C$h*C$h+C$u*C$u},C$a.negate=function(C$t,C$e){return C$t.x=-C$e.x,C$t.y=-C$e.y,C$t.z=-C$e.z,C$t.w=-C$e.w,C$t},C$a.inverse=function(C$t,C$e){return C$t.x=1/C$e.x,C$t.y=1/C$e.y,C$t.z=1/C$e.z,C$t.w=1/C$e.w,C$t},C$a.inverseSafe=function(C$t,C$e){return C$c=C$e.x,C$l=C$e.y,C$h=C$e.z,C$u=C$e.w,Math.abs(C$c)<C$s.EPSILON?C$t.x=0:C$t.x=1/C$c,Math.abs(C$l)<C$s.EPSILON?C$t.y=0:C$t.y=1/C$l,Math.abs(C$h)<C$s.EPSILON?C$t.z=0:C$t.z=1/C$h,Math.abs(C$u)<C$s.EPSILON?C$t.w=0:C$t.w=1/C$u,C$t},C$a.normalize=function(C$t,C$e){C$c=C$e.x,C$l=C$e.y,C$h=C$e.z,C$u=C$e.w;C$e=C$c*C$c+C$l*C$l+C$h*C$h+C$u*C$u;return 0<C$e&&(C$e=1/Math.sqrt(C$e),C$t.x=C$c*C$e,C$t.y=C$l*C$e,C$t.z=C$h*C$e,C$t.w=C$u*C$e),C$t},C$a.dot=function(C$t,C$e){return C$t.x*C$e.x+C$t.y*C$e.y+C$t.z*C$e.z+C$t.w*C$e.w},C$a.lerp=function(C$t,C$e,C$i,C$n){return C$t.x=C$e.x+C$n*(C$i.x-C$e.x),C$t.y=C$e.y+C$n*(C$i.y-C$e.y),C$t.z=C$e.z+C$n*(C$i.z-C$e.z),C$t.w=C$e.w+C$n*(C$i.w-C$e.w),C$t},C$a.random=function(C$t,C$e){C$e=C$e||1;var C$i=2*(0,C$s.random)()*Math.PI,C$n=2*(0,C$s.random)()-1,C$r=Math.sqrt(1-C$n*C$n);return C$t.x=C$r*Math.cos(C$i)*C$e,C$t.y=C$r*Math.sin(C$i)*C$e,C$t.z=C$n*C$e,C$t.w=0,C$t},C$a.transformMat4=function(C$t,C$e,C$i){C$c=C$e.x,C$l=C$e.y,C$h=C$e.z,C$u=C$e.w;C$e=C$i.m;return C$t.x=C$e[0]*C$c+C$e[4]*C$l+C$e[8]*C$h+C$e[12]*C$u,C$t.y=C$e[1]*C$c+C$e[5]*C$l+C$e[9]*C$h+C$e[13]*C$u,C$t.z=C$e[2]*C$c+C$e[6]*C$l+C$e[10]*C$h+C$e[14]*C$u,C$t.w=C$e[3]*C$c+C$e[7]*C$l+C$e[11]*C$h+C$e[15]*C$u,C$t},C$a.transformAffine=function(C$t,C$e,C$i){C$c=C$e.x,C$l=C$e.y,C$h=C$e.z,C$u=C$e.w;C$i=C$i.m;return C$t.x=C$i[0]*C$c+C$i[1]*C$l+C$i[2]*C$h+C$i[3]*C$u,C$t.y=C$i[4]*C$c+C$i[5]*C$l+C$i[6]*C$h+C$i[7]*C$u,C$t.x=C$i[8]*C$c+C$i[9]*C$l+C$i[10]*C$h+C$i[11]*C$u,C$t.w=C$e.w,C$t},C$a.transformQuat=function(C$t,C$e,C$i){var C$n=C$e.x,C$r=C$e.y,C$s=C$e.z,C$i=(C$c=C$i.x,C$l=C$i.y,C$h=C$i.z,(C$u=C$i.w)*C$n+C$l*C$s-C$h*C$r),C$o=C$u*C$r+C$h*C$n-C$c*C$s,C$a=C$u*C$s+C$c*C$r-C$l*C$n,C$n=-C$c*C$n-C$l*C$r-C$h*C$s;return C$t.x=C$i*C$u+C$n*-C$c+C$o*-C$h-C$a*-C$l,C$t.y=C$o*C$u+C$n*-C$l+C$a*-C$c-C$i*-C$h,C$t.z=C$a*C$u+C$n*-C$h+C$i*-C$l-C$o*-C$c,C$t.w=C$e.w,C$t},C$a.strictEquals=function(C$t,C$e){return C$t.x===C$e.x&&C$t.y===C$e.y&&C$t.z===C$e.z&&C$t.w===C$e.w},C$a.equals=function(C$t,C$e,C$i){return void 0===C$i&&(C$i=C$s.EPSILON),Math.abs(C$t.x-C$e.x)<=C$i*Math.max(1,Math.abs(C$t.x),Math.abs(C$e.x))&&Math.abs(C$t.y-C$e.y)<=C$i*Math.max(1,Math.abs(C$t.y),Math.abs(C$e.y))&&Math.abs(C$t.z-C$e.z)<=C$i*Math.max(1,Math.abs(C$t.z),Math.abs(C$e.z))&&Math.abs(C$t.w-C$e.w)<=C$i*Math.max(1,Math.abs(C$t.w),Math.abs(C$e.w))},C$a.toArray=function(C$t,C$e,C$i){return C$t[(C$i=void 0===C$i?0:C$i)+0]=C$e.x,C$t[C$i+1]=C$e.y,C$t[C$i+2]=C$e.z,C$t[C$i+3]=C$e.w,C$t},C$a.fromArray=function(C$t,C$e,C$i){return C$t.x=C$e[(C$i=void 0===C$i?0:C$i)+0],C$t.y=C$e[C$i+1],C$t.z=C$e[C$i+2],C$t.w=C$e[C$i+3],C$t},C$t=C$a,C$g=[{key:"ZERO",get:function(){return new C$a(0,0,0,0)}},{key:"ONE",get:function(){return new C$a(1,1,1,1)}},{key:"NEG_ONE",get:function(){return new C$a(-1,-1,-1,-1)}}],(C$y=null)&&C$d(C$t.prototype,C$y),C$g&&C$d(C$t,C$g),C$i.clone=function(){return new C$a(this.x,this.y,this.z,this.w)},C$i.set=function(C$t,C$e,C$i,C$n){return C$t&&"object"==typeof C$t?(this.x=C$t.x,this.y=C$t.y,this.z=C$t.z,this.w=C$t.w):(this.x=C$t||0,this.y=C$e||0,this.z=C$i||0,this.w=C$n||0),this},C$i.equals=function(C$t,C$e){return void 0===C$e&&(C$e=C$s.EPSILON),Math.abs(this.x-C$t.x)<=C$e*Math.max(1,Math.abs(this.x),Math.abs(C$t.x))&&Math.abs(this.y-C$t.y)<=C$e*Math.max(1,Math.abs(this.y),Math.abs(C$t.y))&&Math.abs(this.z-C$t.z)<=C$e*Math.max(1,Math.abs(this.z),Math.abs(C$t.z))&&Math.abs(this.w-C$t.w)<=C$e*Math.max(1,Math.abs(this.w),Math.abs(C$t.w))},C$i.equals4f=function(C$t,C$e,C$i,C$n,C$r){return void 0===C$r&&(C$r=C$s.EPSILON),Math.abs(this.x-C$t)<=C$r*Math.max(1,Math.abs(this.x),Math.abs(C$t))&&Math.abs(this.y-C$e)<=C$r*Math.max(1,Math.abs(this.y),Math.abs(C$e))&&Math.abs(this.z-C$i)<=C$r*Math.max(1,Math.abs(this.z),Math.abs(C$i))&&Math.abs(this.w-C$n)<=C$r*Math.max(1,Math.abs(this.w),Math.abs(C$n))},C$i.strictEquals=function(C$t){return this.x===C$t.x&&this.y===C$t.y&&this.z===C$t.z&&this.w===C$t.w},C$i.strictEquals4f=function(C$t,C$e,C$i,C$n){return this.x===C$t&&this.y===C$e&&this.z===C$i&&this.w===C$n},C$i.lerp=function(C$t,C$e){return C$c=this.x,C$l=this.y,C$h=this.z,C$u=this.w,this.x=C$c+C$e*(C$t.x-C$c),this.y=C$l+C$e*(C$t.y-C$l),this.z=C$h+C$e*(C$t.z-C$h),this.w=C$u+C$e*(C$t.w-C$u),this},C$i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+", "+this.w.toFixed(2)+")"},C$i.clampf=function(C$t,C$e){return this.x=(0,C$s.clamp)(this.x,C$t.x,C$e.x),this.y=(0,C$s.clamp)(this.y,C$t.y,C$e.y),this.z=(0,C$s.clamp)(this.z,C$t.z,C$e.z),this.w=(0,C$s.clamp)(this.w,C$t.w,C$e.w),this},C$i.addSelf=function(C$t){return this.x+=C$t.x,this.y+=C$t.y,this.z+=C$t.z,this.w+=C$t.w,this},C$i.add=function(C$t,C$e){return(C$e=C$e||new C$a).x=this.x+C$t.x,C$e.y=this.y+C$t.y,C$e.z=this.z+C$t.z,C$e.w=this.w+C$t.w,C$e},C$i.subtract=function(C$t,C$e){return(C$e=C$e||new C$a).x=this.x-C$t.x,C$e.y=this.y-C$t.y,C$e.z=this.z-C$t.z,C$e.w=this.w-C$t.w,C$e},C$i.multiplyScalar=function(C$t){return this.x*=C$t,this.y*=C$t,this.z*=C$t,this.w*=C$t,this},C$i.multiply=function(C$t){return this.x*=C$t.x,this.y*=C$t.y,this.z*=C$t.z,this.w*=C$t.w,this},C$i.divide=function(C$t){return this.x/=C$t,this.y/=C$t,this.z/=C$t,this.w/=C$t,this},C$i.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},C$i.dot=function(C$t){return this.x*C$t.x+this.y*C$t.y+this.z*C$t.z+this.w*C$t.w},C$i.cross=function(C$t,C$e){C$e=C$e||new C$a;var C$i=this.x,C$n=this.y,C$r=this.z,C$s=C$t.x,C$o=C$t.y,C$t=C$t.z;return C$e.x=C$n*C$t-C$r*C$o,C$e.y=C$r*C$s-C$i*C$t,C$e.z=C$i*C$o-C$n*C$s,C$e},C$i.len=function(){var C$t=this.x,C$e=this.y,C$i=this.z,C$n=this.w;return Math.sqrt(C$t*C$t+C$e*C$e+C$i*C$i+C$n*C$n)},C$i.lengthSqr=function(){var C$t=this.x,C$e=this.y,C$i=this.z,C$n=this.w;return C$t*C$t+C$e*C$e+C$i*C$i+C$n*C$n},C$i.normalizeSelf=function(){return this.normalize(this),this},C$i.normalize=function(C$t){C$t=C$t||new C$a,C$c=this.x,C$l=this.y,C$h=this.z,C$u=this.w;var C$e=C$c*C$c+C$l*C$l+C$h*C$h+C$u*C$u;return 0<C$e&&(C$e=1/Math.sqrt(C$e),C$t.x=C$c*C$e,C$t.y=C$l*C$e,C$t.z=C$h*C$e,C$t.w=C$u*C$e),C$t},C$i.transformMat4=function(C$t,C$e){C$e=C$e||new C$a,C$c=this.x,C$l=this.y,C$h=this.z,C$u=this.w;C$t=C$t.m;return C$e.x=C$t[0]*C$c+C$t[4]*C$l+C$t[8]*C$h+C$t[12]*C$u,C$e.y=C$t[1]*C$c+C$t[5]*C$l+C$t[9]*C$h+C$t[13]*C$u,C$e.z=C$t[2]*C$c+C$t[6]*C$l+C$t[10]*C$h+C$t[14]*C$u,C$e.w=C$t[3]*C$c+C$t[7]*C$l+C$t[11]*C$h+C$t[15]*C$u,C$e},C$i.maxAxis=function(){return Math.max(this.x,this.y,this.z,this.w)},C$a);function C$a(C$t,C$e,C$i,C$n){var C$r;return void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),(C$r=C$m.call(this)||this).mag=C$a.prototype.len,C$r.magSqr=C$a.prototype.lengthSqr,C$r.subSelf=C$a.prototype.subtract,C$r.mulSelf=C$a.prototype.multiplyScalar,C$r.divSelf=C$a.prototype.divide,C$r.scaleSelf=C$a.prototype.multiply,C$r.negSelf=C$a.prototype.negate,C$r.x=void 0,C$r.y=void 0,C$r.z=void 0,C$r.w=void 0,C$t&&"object"==typeof C$t?(C$r.w=C$t.w,C$r.z=C$t.z,C$r.y=C$t.y,C$r.x=C$t.x):(C$r.x=C$t,C$r.y=C$e,C$r.z=C$i,C$r.w=C$n),C$r}function C$v(C$t,C$e,C$i,C$n){return new C$r(C$t,C$e,C$i,C$n)}(C$e.default=C$r).sub=C$r.subtract,C$r.mul=C$r.multiply,C$r.div=C$r.divide,C$r.scale=C$r.multiplyScalar,C$r.mag=C$r.len,C$r.squaredMagnitude=C$r.lengthSqr,C$r.ZERO_R=C$r.ZERO,C$r.ONE_R=C$r.ONE,C$r.NEG_ONE_R=C$r.NEG_ONE,C$o.default.fastDefine("cc.Vec4",C$r,{x:0,y:0,z:0,w:0}),cc.v4=C$v,cc.Vec4=C$r},{"../platform/CCClass":189,"./utils":286,"./value-type":287}],291:[function(C$t,C$e,C$l){"use strict";function C$i(C$i,C$t,C$n){C$i&&(C$n=C$n||C$a.getClassName(C$i),C$t.forEach(function(C$t){function C$e(){cc.errorID(1406,C$n,C$t)}C$a.getset(C$i.prototype,C$t,C$e,C$e)}))}function C$n(C$e,C$t,C$i){C$e&&C$t.forEach(function(C$t){C$a.getset(C$e,C$t,function(){cc.errorID(1406,C$i,C$t)})})}function C$r(C$n,C$t,C$e){if(C$n){var C$i,C$r,C$s,C$o="Sorry, "+(C$e||cc.js.getClassName(C$n))+".%s is removed, please use %s instead.";for(C$i in C$t)!function(){function C$e(C$e,C$t){function C$i(C$t){cc.error(C$o,C$e,C$t)}Array.isArray(C$t)||(C$t=C$t.split(",").map(function(C$t){return C$t.trim()}));try{C$a.getset(C$n,C$e,C$i.bind(null,C$t[0]),C$t[1]&&C$i.bind(null,C$t[1]))}catch(C$t){}}C$r=C$t[C$i],"*"===C$i[0]?(C$e("g"+(C$s=C$i.slice(1)),C$r),C$e("s"+C$s,C$r)):C$i.split(",").map(function(C$t){return C$t.trim()}).forEach(function(C$t){C$e(C$t,C$r)})}()}}function C$s(C$i,C$n,C$r){if(C$i)for(var C$s in C$r=C$r||C$a.getClassName(C$i),C$n)!function(){var C$t=C$s,C$e=C$i[C$t];C$e&&(C$i[C$t]=function(){return cc.warn("Sorry, %s.%s is deprecated. Please use %s instead",C$r,C$t,C$n[C$t]),C$e.apply(this,arguments)})}()}var C$a=cc.js,C$o=(C$a.get(cc,"info",function(){return cc.errorID(1400,"cc.info","cc.log"),cc.log}),C$a.get(cc,"spriteFrameCache",function(){cc.errorID(1404)}),C$a.get(cc,"vmath",function(){return cc.warnID(1400,"cc.vmath","cc.math"),cc.math}),C$a.get(cc.math,"vec2",function(){return cc.warnID(1400,"cc.vmath.vec2","cc.Vec2"),cc.Vec2}),C$a.get(cc.math,"vec3",function(){return cc.warnID(1400,"cc.vmath.vec3","cc.Vec3"),cc.Vec3}),C$a.get(cc.math,"vec4",function(){return cc.warnID(1400,"cc.vmath.vec4","cc.Vec4"),cc.Vec4}),C$a.get(cc.math,"mat4",function(){return cc.warnID(1400,"cc.vmath.mat4","cc.Mat4"),cc.Mat4}),C$a.get(cc.math,"mat3",function(){return cc.warnID(1400,"cc.vmath.mat3","cc.Mat3"),cc.Mat3}),C$a.get(cc.math,"quat",function(){return cc.warnID(1400,"cc.vmath.quat","cc.Quat"),cc.Quat}),C$a.get(cc.SpriteFrame.prototype,"_textureLoaded",function(){return cc.errorID(1400,"spriteFrame._textureLoaded","spriteFrame.textureLoaded()"),this.textureLoaded()}),C$i(cc.SpriteFrame,["addLoadedEventListener"]),C$s(cc.Sprite.prototype,{setState:"cc.Sprite.setMaterial",getState:"cc.Sprite.getMaterial"},"cc.Sprite"),C$a.get(cc.SpriteFrame.prototype,"clearTexture",function(){return cc.errorID(1406,"cc.SpriteFrame","clearTexture"),function(){}}),C$a.get(cc,"textureCache",function(){cc.errorID(1406,"cc","textureCache")}),cc.Texture2D),C$c=(C$a.get(C$o.prototype,"releaseTexture",function(){return cc.errorID(1400,"texture.releaseTexture()","texture.destroy()"),this.destroy}),C$a.get(C$o.prototype,"getName",function(){return cc.errorID(1400,"texture.getName()","texture._glID"),function(){return this._glID||null}}),C$a.get(C$o.prototype,"isLoaded",function(){return cc.errorID(1400,"texture.isLoaded function","texture.loaded property"),function(){return this.loaded}}),C$a.get(C$o.prototype,"setAntiAliasTexParameters",function(){return cc.errorID(1400,"texture.setAntiAliasTexParameters()","texture.setFilters(cc.Texture2D.Filter.LINEAR, cc.Texture2D.Filter.LINEAR)"),function(){this.setFilters(C$o.Filter.LINEAR,C$o.Filter.LINEAR)}}),C$a.get(C$o.prototype,"setAliasTexParameters",function(){return cc.errorID(1400,"texture.setAntiAliasTexParameters()","texture.setFilters(cc.Texture2D.Filter.NEAREST, cc.Texture2D.Filter.NEAREST)"),function(){this.setFilters(C$o.Filter.NEAREST,C$o.Filter.NEAREST)}}),C$n(cc.macro,["ENABLE_GL_STATE_CACHE","FIX_ARTIFACTS_BY_STRECHING_TEXEL"],"cc.macro"),C$r(cc.macro,{PI:"Math.PI",PI2:"Math.PI * 2",FLT_MAX:"Number.MAX_VALUE",FLT_MIN:"Number.MIN_VALUE",UINT_MAX:"Number.MAX_SAFE_INTEGER"},"cc.macro"),C$n(cc.game,["CONFIG_KEY"],"cc.game"),C$n(cc.sys,["dumpRoot","cleanScript"],"cc.sys"),C$r(cc.Director,{EVENT_PROJECTION_CHANGED:"",EVENT_BEFORE_VISIT:"EVENT_AFTER_UPDATE",EVENT_AFTER_VISIT:"EVENT_BEFORE_DRAW"},"cc.Director"),C$s(cc.Director.prototype,{convertToGL:"cc.view.convertToLocationInView",convertToUI:"",getWinSize:"cc.winSize",getWinSizeInPixels:"cc.winSize",getVisibleSize:"cc.view.getVisibleSize",getVisibleOrigin:"cc.view.getVisibleOrigin",purgeCachedData:"cc.loader.releaseAll",setDepthTest:"cc.Camera.main.depth",setClearColor:"cc.Camera.main.backgroundColor",getRunningScene:"cc.director.getScene",getAnimationInterval:"cc.game.getFrameRate",setAnimationInterval:"cc.game.setFrameRate",isDisplayStats:"cc.debug.isDisplayStats",setDisplayStats:"cc.debug.setDisplayStats",stopAnimation:"cc.game.pause",startAnimation:"cc.game.resume"},"cc.Director"),C$i(cc.Director,["pushScene","popScene","popToRootScene","popToSceneStackLevel","setProjection","getProjection"],"cc.Director"),C$r(cc.Scheduler,{scheduleCallbackForTarget:"schedule",scheduleUpdateForTarget:"scheduleUpdate",unscheduleCallbackForTarget:"unschedule",unscheduleUpdateForTarget:"unscheduleUpdate",unscheduleAllCallbacksForTarget:"unscheduleAllForTarget",unscheduleAllCallbacks:"unscheduleAll",unscheduleAllCallbacksWithMinPriority:"unscheduleAllWithMinPriority"},"cc.Scheduler"),C$r(cc.view,{adjustViewPort:"adjustViewportMeta",setViewPortInPoints:"setViewportInPoints",getViewPortRect:"getViewportRect"},"cc.view"),C$n(cc.view,["isViewReady","setTargetDensityDPI","getTargetDensityDPI","setFrameZoomFactor","canSetContentScaleFactor","setContentTranslateLeftTop","getContentTranslateLeftTop","setViewName","getViewName"],"cc.view"),C$i(cc.Pipeline,["flowInDeps","getItems"],"cc.loader"),C$i(cc.PhysicsManager,["attachDebugDrawToCamera","detachDebugDrawFromCamera"]),C$i(cc.CollisionManager,["attachDebugDrawToCamera","detachDebugDrawFromCamera"]),C$r(cc._BaseNode.prototype,{tag:"name",getTag:"name",setTag:"name",getChildByTag:"getChildByName",removeChildByTag:"getChildByName(name).destroy()"}),C$i(cc.Node,["_cascadeColorEnabled","cascadeColor","isCascadeColorEnabled","setCascadeColorEnabled","_cascadeOpacityEnabled","cascadeOpacity","isCascadeOpacityEnabled","setCascadeOpacityEnabled","opacityModifyRGB","isOpacityModifyRGB","setOpacityModifyRGB","ignoreAnchor","isIgnoreAnchorPointForPosition","ignoreAnchorPointForPosition","isRunning","_sgNode"]),C$s(cc.Node.prototype,{getNodeToParentTransform:"getLocalMatrix",getNodeToParentTransformAR:"getLocalMatrix",getNodeToWorldTransform:"getWorldMatrix",getNodeToWorldTransformAR:"getWorldMatrix",getParentToNodeTransform:"getLocalMatrix",getWorldToNodeTransform:"getWorldMatrix",convertTouchToNodeSpace:"convertToNodeSpaceAR",convertTouchToNodeSpaceAR:"convertToNodeSpaceAR",convertToWorldSpace:"convertToWorldSpaceAR",convertToNodeSpace:"convertToNodeSpaceAR"}),C$r(cc.Node.prototype,{getRotationX:"rotationX",setRotationX:"rotationX",getRotationY:"rotationY",setRotationY:"rotationY",getPositionX:"x",setPositionX:"x",getPositionY:"y",setPositionY:"y",getSkewX:"skewX",setSkewX:"skewX",getSkewY:"skewY",setSkewY:"skewY",getScaleX:"scaleX",setScaleX:"scaleX",getScaleY:"scaleY",setScaleY:"scaleY",getOpacity:"opacity",setOpacity:"opacity",getColor:"color",setColor:"color",getLocalZOrder:"zIndex",setLocalZOrder:"zIndex"}),C$r(cc.Sprite.prototype,{setInsetLeft:"cc.SpriteFrame insetLeft",setInsetRight:"cc.SpriteFrame insetRight",setInsetTop:"cc.SpriteFrame insetTop",setInsetBottom:"cc.SpriteFrame insetBottom"}),cc.Material.getInstantiatedBuiltinMaterial=cc.MaterialVariant.createWithBuiltin,cc.Material.getInstantiatedMaterial=cc.MaterialVariant.create,C$s(cc.Material,{getInstantiatedBuiltinMaterial:"cc.MaterialVariant.createWithBuiltin",getInstantiatedMaterial:"cc.MaterialVariant.create"}),cc.js.getset(cc.RenderComponent.prototype,"sharedMaterials",function(){return cc.warnID(1400,"sharedMaterials","getMaterials"),this.materials},function(C$t){cc.warnID(1400,"sharedMaterials","setMaterial"),this.materials=C$t}),C$s(cc.Camera.prototype,{getNodeToCameraTransform:"getWorldToScreenMatrix2D",getCameraToWorldPoint:"getScreenToWorldPoint",getWorldToCameraPoint:"getWorldToScreenPoint",getCameraToWorldMatrix:"getScreenToWorldMatrix2D",getWorldToCameraMatrix:"getWorldToScreenMatrix2D"}),C$i(cc.Camera,["addTarget","removeTarget","getTargets"]),'"%s" is not defined in the Scene, it is only defined in normal nodes.');Object.defineProperties(cc.Scene.prototype,{active:{get:function(){return cc.error(C$c,"active"),!0},set:function(){cc.error(C$c,"active")}},activeInHierarchy:{get:function(){return cc.error(C$c,"activeInHierarchy"),!0}},getComponent:{get:function(){return cc.error(C$c,"getComponent"),function(){return null}}},addComponent:{get:function(){return cc.error(C$c,"addComponent"),function(){return null}}}}),C$n(cc.dynamicAtlasManager,["minFrameSize"],"cc.dynamicAtlasManager"),cc.Light&&C$n(cc.Light.prototype,["shadowDepthScale"],"cc.Light.prototype"),C$r(cc,{affineTransformMake:"cc.AffineTransform.create",affineTransformMakeIdentity:"cc.AffineTransform.identity",affineTransformClone:"cc.AffineTransform.clone",affineTransformConcat:"cc.AffineTransform.concat",affineTransformConcatIn:"cc.AffineTransform.concat",affineTransformInvert:"cc.AffineTransform.invert",affineTransformInvertIn:"cc.AffineTransform.invert",affineTransformInvertOut:"cc.AffineTransform.invert",affineTransformEqualToTransform:"cc.AffineTransform.equal",pointApplyAffineTransform:"cc.AffineTransform.transformVec2",sizeApplyAffineTransform:"cc.AffineTransform.transformSize",rectApplyAffineTransform:"cc.AffineTransform.transformRect",obbApplyAffineTransform:"cc.AffineTransform.transformObb",pointEqualToPoint:"cc.Vec2 equals",sizeEqualToSize:"cc.Size equals",rectEqualToRect:"rectA.equals(rectB)",rectContainsRect:"rectA.containsRect(rectB)",rectContainsPoint:"rect.contains(vec2)",rectOverlapsRect:"rectA.intersects(rectB)",rectIntersectsRect:"rectA.intersects(rectB)",rectIntersection:"rectA.intersection(intersection, rectB)",rectUnion:"rectA.union(union, rectB)",rectGetMaxX:"rect.xMax",rectGetMidX:"rect.center.x",rectGetMinX:"rect.xMin",rectGetMaxY:"rect.yMax",rectGetMidY:"rect.center.y",rectGetMinY:"rect.yMin",colorEqual:"colorA.equals(colorB)",hexToColor:"color.fromHEX(hexColor)",colorToHex:"color.toHEX()",TextAlignment:"cc.macro.TextAlignment",VerticalTextAlignment:"cc.macro.VerticalTextAlignment",pNeg:"p.neg()",pAdd:"p1.add(p2)",pSub:"p1.sub(p2)",pMult:"p.mul(factor)",pMidpoint:"p1.add(p2).mul(0.5)",pDot:"p1.dot(p2)",pCross:"p1.cross(p2)",pPerp:"p.rotate(-90 * Math.PI / 180)",pRPerp:"p.rotate(90 * Math.PI / 180)",pProject:"p1.project(p2)",pLengthSQ:"p.magSqr()",pDistanceSQ:"p1.sub(p2).magSqr()",pLength:"p.mag()",pDistance:"p1.sub(p2).mag()",pNormalize:"p.normalize()",pForAngle:"cc.v2(Math.cos(a), Math.sin(a))",pToAngle:"Math.atan2(v.y, v.x)",pZeroIn:"p.x = p.y = 0",pIn:"p1.set(p2)",pMultIn:"p.mulSelf(factor)",pSubIn:"p1.subSelf(p2)",pAddIn:"p1.addSelf(p2)",pNormalizeIn:"p.normalizeSelf()",pSameAs:"p1.equals(p2)",pAngle:"v1.angle(v2)",pAngleSigned:"v1.signAngle(v2)",pRotateByAngle:"p.rotate(radians)",pCompMult:"v1.dot(v2)",pFuzzyEqual:"v1.fuzzyEquals(v2, tolerance)",pLerp:"p.lerp(endPoint, ratio)",pClamp:"p.clampf(min_inclusive, max_inclusive)",rand:"Math.random() * 0xffffff",randomMinus1To1:"(Math.random() - 0.5) * 2",container:"cc.game.container",_canvas:"cc.game.canvas",_renderType:"cc.game.renderType",_getError:"cc.debug.getError",_initDebugSetting:"cc.debug._resetDebugSetting",DebugMode:"cc.debug.DebugMode"},"cc"),C$n(cc,["blendFuncDisable","pFromSize","pCompOp","pIntersectPoint","pSegmentIntersect","pLineIntersect","obbApplyMatrix","getImageFormatByData","initEngine"],"cc"),C$s(cc,{p:"cc.v2"},"cc"),C$r(cc.Rect,{contain:"rectA.contains(rectB)",transformMat4:"rect.transformMat4(out, mat4)"}),C$r(cc.Color,{rgb2hsv:"color.toHSV()",hsv2rgb:"color.fromHSV(h, s, v)"}),C$a.get(cc,"lerp",function(){return cc.errorID(1400,"cc.lerp","cc.misc.lerp"),cc.misc.lerp}),C$a.get(cc,"random0To1",function(){return cc.errorID(1400,"cc.random0To1","Math.random"),Math.random}),C$a.get(cc,"degreesToRadians",function(){return cc.errorID(1400,"cc.degreesToRadians","cc.misc.degreesToRadians"),cc.misc.degreesToRadians}),C$a.get(cc,"radiansToDegrees",function(){return cc.errorID(1400,"cc.radiansToDegrees","cc.misc.radiansToDegrees"),cc.misc.radiansToDegrees}),C$a.get(cc,"clampf",function(){return cc.errorID(1400,"cc.clampf","cc.misc.clampf"),cc.misc.clampf}),C$a.get(cc,"clamp01",function(){return cc.errorID(1400,"cc.clamp01","cc.misc.clamp01"),cc.misc.clamp01}),C$a.get(cc,"ImageFormat",function(){return cc.errorID(1400,"cc.ImageFormat","cc.macro.ImageFormat"),cc.macro.ImageFormat}),C$a.get(cc,"KEY",function(){return cc.errorID(1400,"cc.KEY","cc.macro.KEY"),cc.macro.KEY}),C$a.get(cc,"Easing",function(){return cc.errorID(1400,"cc.Easing","cc.easing"),cc.easing}),C$a.get(cc,"isChildClassOf",function(){return cc.errorID(1400,"cc.isChildClassOf","cc.js.isChildClassOf"),cc.js.isChildClassOf}),"undefined"!=typeof dragonBones&&C$a.get(dragonBones.CCFactory,"getFactory",function(){return cc.errorID(1400,"dragonBones.CCFactory.getFactory","dragonBones.CCFactory.getInstance"),dragonBones.CCFactory.getInstance}),cc.renderer.renderEngine={get gfx(){return cc.warnID(1400,"cc.renderer.renderEngine.gfx","cc.gfx"),cc.gfx},get math(){return cc.warnID(1400,"cc.renderer.renderEngine.math","cc.math"),cc.vmath},get InputAssembler(){return cc.warnID(1400,"cc.renderer.renderEngine.InputAssembler","cc.renderer.InputAssembler"),cc.renderer.InputAssembler}}},{}],292:[function(C$t,C$e,C$i){"use strict";C$t("./core/CCGame"),C$t("./actions")},{"./actions":8,"./core/CCGame":29}],293:[function(C$t,C$e,C$i){"use strict";function C$n(C$t){var C$e,C$i,C$n,C$r,C$h,C$s,C$o,C$a,C$c,C$l;for(this.data=C$t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C$n=null;;){switch(C$e=this.readUInt32(),C$h=function(){var C$t,C$e=[];for(C$t=0;C$t<4;++C$t)C$e.push(String.fromCharCode(this.data[this.pos++]));return C$e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(C$e);break;case"fcTL":C$n&&this.animation.frames.push(C$n),this.pos+=4,C$n={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},C$o=this.readUInt16(),C$r=this.readUInt16()||100,C$n.delay=1e3*C$o/C$r,C$n.disposeOp=this.data[this.pos++],C$n.blendOp=this.data[this.pos++],C$n.data=[];break;case"IDAT":case"fdAT":for("fdAT"===C$h&&(this.pos+=4,C$e-=4),C$t=(null!=C$n?C$n.data:void 0)||this.imgData,C$a=0;0<=C$e?C$a<C$e:C$e<C$a;0<=C$e?++C$a:--C$a)C$t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(C$e),0<(C$s=255-this.transparency.indexed.length))for(C$c=0;0<=C$s?C$c<C$s:C$s<C$c;0<=C$s?++C$c:--C$c)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(C$e)[0];break;case 2:this.transparency.rgb=this.read(C$e)}break;case"tEXt":C$r=(C$o=this.read(C$e)).indexOf(0),C$l=String.fromCharCode.apply(String,C$o.slice(0,C$r)),this.text[C$l]=String.fromCharCode.apply(String,C$o.slice(C$r+1));break;case"IEND":return C$n&&this.animation.frames.push(C$n),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(C$l=this.colorType)||6===C$l,C$i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*C$i,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(Uint8Array!=Array&&(this.imgData=new Uint8Array(this.imgData)));default:this.pos+=C$e}if(this.pos+=4,this.pos>this.data.length)throw new Error(C$C.getError(6017))}}var C$A=C$t("../compression/zlib.min"),C$C=C$t("../core/CCDebug");C$n.prototype={constructor:C$n,read:function(C$t){var C$e,C$i=[];for(C$e=0;0<=C$t?C$e<C$t:C$t<C$e;0<=C$t?++C$e:--C$e)C$i.push(this.data[this.pos++]);return C$i},readUInt32:function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},readUInt16:function(){return this.data[this.pos++]<<8|this.data[this.pos++]},decodePixels:function(C$t){var C$e,C$i,C$h,C$n,C$u,C$_,C$d,C$f,C$p,C$r,C$s,C$o,C$a,C$c,C$l,C$m,C$y,C$g,C$v,C$x,C$b;if(0===(C$t=null==C$t?this.imgData:C$t).length)return new Uint8Array(0);for(C$t=new C$A.Inflate(C$t,{index:0,verify:!1}).decompress(),C$c=(C$r=this.pixelBitlength/8)*this.width,C$s=new Uint8Array(C$c*this.height),C$_=C$t.length,C$i=C$o=C$a=0;C$o<C$_;){switch(C$t[C$o++]){case 0:for(C$n=C$y=0;C$y<C$c;C$n=C$y+=1)C$s[C$i++]=C$t[C$o++];break;case 1:for(C$n=C$g=0;C$g<C$c;C$n=C$g+=1)C$e=C$t[C$o++],C$u=C$n<C$r?0:C$s[C$i-C$r],C$s[C$i++]=(C$e+C$u)%256;break;case 2:for(C$n=C$v=0;C$v<C$c;C$n=C$v+=1)C$e=C$t[C$o++],C$h=(C$n-C$n%C$r)/C$r,C$l=C$a&&C$s[(C$a-1)*C$c+C$h*C$r+C$n%C$r],C$s[C$i++]=(C$l+C$e)%256;break;case 3:for(C$n=C$x=0;C$x<C$c;C$n=C$x+=1)C$e=C$t[C$o++],C$h=(C$n-C$n%C$r)/C$r,C$u=C$n<C$r?0:C$s[C$i-C$r],C$l=C$a&&C$s[(C$a-1)*C$c+C$h*C$r+C$n%C$r],C$s[C$i++]=(C$e+Math.floor((C$u+C$l)/2))%256;break;case 4:for(C$n=C$b=0;C$b<C$c;C$n=C$b+=1)C$e=C$t[C$o++],C$h=(C$n-C$n%C$r)/C$r,C$u=C$n<C$r?0:C$s[C$i-C$r],0===C$a?C$l=C$m=0:(C$l=C$s[(C$a-1)*C$c+C$h*C$r+C$n%C$r],C$m=C$h&&C$s[(C$a-1)*C$c+(C$h-1)*C$r+C$n%C$r]),C$p=C$u+C$l-C$m,C$d=Math.abs(C$p-C$u),C$f=Math.abs(C$p-C$l),C$p=Math.abs(C$p-C$m),C$s[C$i++]=(C$e+(C$d<=C$f&&C$d<=C$p?C$u:C$f<=C$p?C$l:C$m))%256;break;default:throw new Error(C$C.getError(6018,C$t[C$o-1]))}C$a++}return C$s},copyToImageData:function(C$h,C$t){var C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$u,C$_=this.colors,C$c=null,C$l=this.hasAlphaChannel;if(this.palette.length&&(C$c=null!=(C$u=this._decodedPalette)?C$u:this._decodedPalette=this.decodePalette(),C$_=4,C$l=!0),C$o=(C$e=C$h.data||C$h).length,C$n=C$c||C$t,C$i=C$r=0,1===C$_)for(;C$i<C$o;)C$s=C$c?4*C$t[C$i/4]:C$r,C$a=C$n[C$s++],C$e[C$i++]=C$a,C$e[C$i++]=C$a,C$e[C$i++]=C$a,C$e[C$i++]=C$l?C$n[C$s++]:255,C$r=C$s;else for(;C$i<C$o;)C$s=C$c?4*C$t[C$i/4]:C$r,C$e[C$i++]=C$n[C$s++],C$e[C$i++]=C$n[C$s++],C$e[C$i++]=C$n[C$s++],C$e[C$i++]=C$l?C$n[C$s++]:255,C$r=C$s},decodePalette:function(){for(var C$t,C$e,C$i=this.palette,C$n=this.transparency.indexed||[],C$r=new Uint8Array((C$n.length||0)+C$i.length),C$s=0,C$o=0,C$a=C$t=0,C$c=C$i.length;C$t<C$c;C$a=C$t+=3)C$r[C$s++]=C$i[C$a],C$r[C$s++]=C$i[C$a+1],C$r[C$s++]=C$i[C$a+2],C$r[C$s++]=null!=(C$e=C$n[C$o++])?C$e:255;return C$r},render:function(C$t){var C$e;return C$t.width=this.width,C$t.height=this.height,C$e=(C$t=C$t.getContext("2d")).createImageData(this.width,this.height),this.copyToImageData(C$e,this.decodePixels()),C$t.putImageData(C$e,0,0)}},C$e.exports=C$n},{"../compression/zlib.min":26,"../core/CCDebug":27}],294:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../core/assets/CCAsset"),C$t=C$t("../core/assets/CCSpriteFrame"),C$n=cc.Class({name:"cc.ParticleAsset",extends:C$n,properties:{spriteFrame:{default:null,type:C$t}}});cc.ParticleAsset=C$e.exports=C$n},{"../core/assets/CCAsset":34,"../core/assets/CCSpriteFrame":47}],295:[function(C$t,C$e,C$h){"use strict";var C$o=C$t("../core/platform/CCMacro"),C$i=C$t("./CCParticleAsset"),C$u=C$t("../core/components/CCRenderComponent"),C$_=C$t("../compression/ZipUtils"),C$a=C$t("./CCPNGReader"),C$c=C$t("./CCTIFFReader"),C$l=C$t("../core/utils/texture-util"),C$d=(C$t("../core/renderer/render-flow"),C$t("./particle-simulator")),C$n=(C$t("../core/assets/material/CCMaterial"),C$t("../core/utils/blend-func"));var C$r=cc.Enum({GRAVITY:0,RADIUS:1}),C$s=cc.Enum({FREE:0,RELATIVE:1,GROUPED:2}),C$t={preview:{default:!0,editorOnly:!0,notify:!1,animatable:!1,tooltip:!1},_custom:!1,custom:{get:function(){return this._custom},set:function(C$t){this._custom!==C$t&&(this._custom=C$t,this._applyFile())},animatable:!1,tooltip:!1},_file:{default:null,type:C$i},file:{get:function(){return this._file},set:function(C$t,C$e){this._file!==C$t&&((this._file=C$t)?this._applyFile():this.custom=!0)},animatable:!1,type:C$i,tooltip:!1},_spriteFrame:{default:null,type:cc.SpriteFrame},spriteFrame:{get:function(){return this._spriteFrame},set:function(C$t,C$e){var C$i=this._renderSpriteFrame;C$i!==C$t&&((this._renderSpriteFrame=C$t)&&!C$t._uuid||(this._spriteFrame=C$t),(C$i&&C$i.getTexture())!==(C$t&&C$t.getTexture())&&this._applySpriteFrame(C$i))},type:cc.SpriteFrame,tooltip:!1},_texture:{default:null,type:cc.Texture2D,editorOnly:!0},texture:{get:function(){return this._getTexture()},set:function(C$t){C$t&&cc.warnID(6017)},type:cc.Texture2D,tooltip:!1,readonly:!0,visible:!1,animatable:!1},particleCount:{visible:!1,get:function(){return this._simulator.particles.length},readonly:!0},_stopped:!0,stopped:{get:function(){return this._stopped},animatable:!1,visible:!1},playOnLoad:!0,autoRemoveOnFinish:{default:!1,animatable:!1,tooltip:!1},active:{get:function(){return this._simulator.active},visible:!1},totalParticles:150,duration:-1,emissionRate:10,life:1,lifeVar:0,_startColor:null,startColor:{type:cc.Color,get:function(){return this._startColor},set:function(C$t){this._startColor.r=C$t.r,this._startColor.g=C$t.g,this._startColor.b=C$t.b,this._startColor.a=C$t.a}},_startColorVar:null,startColorVar:{type:cc.Color,get:function(){return this._startColorVar},set:function(C$t){this._startColorVar.r=C$t.r,this._startColorVar.g=C$t.g,this._startColorVar.b=C$t.b,this._startColorVar.a=C$t.a}},_endColor:null,endColor:{type:cc.Color,get:function(){return this._endColor},set:function(C$t){this._endColor.r=C$t.r,this._endColor.g=C$t.g,this._endColor.b=C$t.b,this._endColor.a=C$t.a}},_endColorVar:null,endColorVar:{type:cc.Color,get:function(){return this._endColorVar},set:function(C$t){this._endColorVar.r=C$t.r,this._endColorVar.g=C$t.g,this._endColorVar.b=C$t.b,this._endColorVar.a=C$t.a}},angle:90,angleVar:20,startSize:50,startSizeVar:0,endSize:0,endSizeVar:0,startSpin:0,startSpinVar:0,endSpin:0,endSpinVar:0,sourcePos:cc.Vec2.ZERO,posVar:cc.Vec2.ZERO,_positionType:{default:C$s.FREE,formerlySerializedAs:"positionType"},positionType:{type:C$s,get:function(){return this._positionType},set:function(C$t){this._positionType=C$t,this._updateMaterial()}},emitterMode:{default:C$r.GRAVITY,type:C$r},gravity:cc.Vec2.ZERO,speed:180,speedVar:50,tangentialAccel:80,tangentialAccelVar:0,radialAccel:0,radialAccelVar:0,rotationIsDir:!1,startRadius:0,startRadiusVar:0,endRadius:0,endRadiusVar:0,rotatePerS:0,rotatePerSVar:0},C$i=cc.Class({name:"cc.ParticleSystem",extends:C$u,mixins:[C$n],editor:!1,ctor:function(){this.initProperties()},initProperties:function(){this._previewTimer=null,this._focused=!1,this._aspectRatio=1,this._simulator=new C$d(this),this._startColor=cc.color(255,255,255,255),this._startColorVar=cc.color(0,0,0,0),this._endColor=cc.color(255,255,255,0),this._endColorVar=cc.color(0,0,0,0),this._renderSpriteFrame=null},properties:C$t,statics:{DURATION_INFINITY:-1,START_SIZE_EQUAL_TO_END_SIZE:-1,START_RADIUS_EQUAL_TO_END_RADIUS:-1,EmitterMode:C$r,PositionType:C$s,_PNGReader:C$a,_TIFFReader:C$c},onFocusInEditor:!1,onLostFocusInEditor:!1,_startPreview:!1,_stopPreview:!1,_convertTextureToSpriteFrame:!1,__preload:function(){this._super(),this._custom&&this.spriteFrame&&!this._renderSpriteFrame?this._applySpriteFrame(this.spriteFrame):this._file&&(this._custom&&this._getTexture()||this._applyFile()),this.playOnLoad&&this.resetSystem()},onDestroy:function(){this.autoRemoveOnFinish&&(this.autoRemoveOnFinish=!1),this._buffer&&(this._buffer.destroy(),this._buffer=null),this._simulator._uvFilled=0,this._super()},lateUpdate:function(C$t){this._simulator.finished||this._simulator.step(C$t)},addParticle:function(){},stopSystem:function(){this._stopped=!0,this._simulator.stop()},resetSystem:function(){this._stopped=!1,this._simulator.reset(),this.markForRender(!0)},isFull:function(){return this.particleCount>=this.totalParticles},setTextureWithRect:function(C$t,C$e){C$t instanceof cc.Texture2D&&(this.spriteFrame=new cc.SpriteFrame(C$t,C$e))},_applyFile:function(){var C$i,C$n=this._file;C$n&&(C$i=this,cc.loader.load(C$n.nativeUrl,function(C$t,C$e){!C$t&&C$e?C$i.isValid&&(C$i._plistFile=C$n.nativeUrl,C$i._custom||C$i._initWithDictionary(C$e),C$i._spriteFrame?!C$i._renderSpriteFrame&&C$i._spriteFrame&&C$i._applySpriteFrame(C$i.spriteFrame):C$n.spriteFrame?C$i.spriteFrame=C$n.spriteFrame:C$i._custom&&C$i._initTextureWithDictionary(C$e)):cc.errorID(6029)}))},_initTextureWithDictionary:function(C$i){var C$t=cc.path.changeBasename(this._plistFile,C$i.textureFileName||"");if(C$i.textureFileName)C$l.loadImage(C$t,function(C$t,C$e){C$t?(C$i.textureFileName=void 0,this._initTextureWithDictionary(C$i)):this.spriteFrame=new cc.SpriteFrame(C$e)},this);else if(C$i.textureImageData){var C$e=C$i.textureImageData;if(!(C$e&&0<C$e.length))return!1;var C$n=cc.loader.getRes(C$t);if(!C$n){C$e=C$_.unzipBase64AsArray(C$e,1);if(!C$e)return cc.logID(6030),!1;var C$r=8<(C$r=C$e).length&&137===C$r[0]&&80===C$r[1]&&78===C$r[2]&&71===C$r[3]&&13===C$r[4]&&10===C$r[5]&&26===C$r[6]&&10===C$r[7]?C$o.ImageFormat.PNG:2<C$r.length&&(73===C$r[0]&&73===C$r[1]||77===C$r[0]&&77===C$r[1]||255===C$r[0]&&216===C$r[1])?C$o.ImageFormat.TIFF:C$o.ImageFormat.UNKNOWN;if(C$r!==C$o.ImageFormat.TIFF&&C$r!==C$o.ImageFormat.PNG)return cc.logID(6031),!1;var C$s=document.createElement("canvas");C$r===C$o.ImageFormat.PNG?new C$a(C$e).render(C$s):C$c.parseTIFF(C$e,C$s),C$n=C$l.cacheImage(C$t,C$s)}C$n||cc.logID(6032),this.spriteFrame=new cc.SpriteFrame(C$n)}return!0},_initWithDictionary:function(C$t){this.totalParticles=parseInt(C$t.maxParticles||0),this.life=parseFloat(C$t.particleLifespan||0),this.lifeVar=parseFloat(C$t.particleLifespanVariance||0);var C$e=C$t.emissionRate,C$e=(this.emissionRate=C$e||Math.min(this.totalParticles/this.life,Number.MAX_VALUE),this.duration=parseFloat(C$t.duration||0),this.srcBlendFactor=parseInt(C$t.blendFuncSource||C$o.SRC_ALPHA),this.dstBlendFactor=parseInt(C$t.blendFuncDestination||C$o.ONE_MINUS_SRC_ALPHA),this._startColor),C$e=(C$e.r=255*parseFloat(C$t.startColorRed||0),C$e.g=255*parseFloat(C$t.startColorGreen||0),C$e.b=255*parseFloat(C$t.startColorBlue||0),C$e.a=255*parseFloat(C$t.startColorAlpha||0),this._startColorVar),C$e=(C$e.r=255*parseFloat(C$t.startColorVarianceRed||0),C$e.g=255*parseFloat(C$t.startColorVarianceGreen||0),C$e.b=255*parseFloat(C$t.startColorVarianceBlue||0),C$e.a=255*parseFloat(C$t.startColorVarianceAlpha||0),this._endColor),C$e=(C$e.r=255*parseFloat(C$t.finishColorRed||0),C$e.g=255*parseFloat(C$t.finishColorGreen||0),C$e.b=255*parseFloat(C$t.finishColorBlue||0),C$e.a=255*parseFloat(C$t.finishColorAlpha||0),this._endColorVar);if(C$e.r=255*parseFloat(C$t.finishColorVarianceRed||0),C$e.g=255*parseFloat(C$t.finishColorVarianceGreen||0),C$e.b=255*parseFloat(C$t.finishColorVarianceBlue||0),C$e.a=255*parseFloat(C$t.finishColorVarianceAlpha||0),this.startSize=parseFloat(C$t.startParticleSize||0),this.startSizeVar=parseFloat(C$t.startParticleSizeVariance||0),this.endSize=parseFloat(C$t.finishParticleSize||0),this.endSizeVar=parseFloat(C$t.finishParticleSizeVariance||0),this.positionType=parseFloat(void 0!==C$t.positionType?C$t.positionType:C$s.RELATIVE),this.sourcePos.x=0,this.sourcePos.y=0,this.posVar.x=parseFloat(C$t.sourcePositionVariancex||0),this.posVar.y=parseFloat(C$t.sourcePositionVariancey||0),this.angle=parseFloat(C$t.angle||0),this.angleVar=parseFloat(C$t.angleVariance||0),this.startSpin=parseFloat(C$t.rotationStart||0),this.startSpinVar=parseFloat(C$t.rotationStartVariance||0),this.endSpin=parseFloat(C$t.rotationEnd||0),this.endSpinVar=parseFloat(C$t.rotationEndVariance||0),this.emitterMode=parseInt(C$t.emitterType||C$r.GRAVITY),this.emitterMode===C$r.GRAVITY){this.gravity.x=parseFloat(C$t.gravityx||0),this.gravity.y=parseFloat(C$t.gravityy||0),this.speed=parseFloat(C$t.speed||0),this.speedVar=parseFloat(C$t.speedVariance||0),this.radialAccel=parseFloat(C$t.radialAcceleration||0),this.radialAccelVar=parseFloat(C$t.radialAccelVariance||0),this.tangentialAccel=parseFloat(C$t.tangentialAcceleration||0),this.tangentialAccelVar=parseFloat(C$t.tangentialAccelVariance||0);C$e=C$t.rotationIsDir||"";null!==C$e?(C$e=C$e.toString().toLowerCase(),this.rotationIsDir="true"===C$e||"1"===C$e):this.rotationIsDir=!1}else{if(this.emitterMode!==C$r.RADIUS)return cc.warnID(6009),!1;this.startRadius=parseFloat(C$t.maxRadius||0),this.startRadiusVar=parseFloat(C$t.maxRadiusVariance||0),this.endRadius=parseFloat(C$t.minRadius||0),this.endRadiusVar=parseFloat(C$t.minRadiusVariance||0),this.rotatePerS=parseFloat(C$t.rotatePerSecond||0),this.rotatePerSVar=parseFloat(C$t.rotatePerSecondVariance||0)}return this._initTextureWithDictionary(C$t),!0},_validateRender:function(){var C$t=this._getTexture();C$t&&C$t.loaded?this._super():this.disableRender()},_onTextureLoaded:function(){this._simulator.updateUVs(!0),this._syncAspect(),this._updateMaterial(),this.markForRender(!0)},_syncAspect:function(){var C$t=this._renderSpriteFrame._rect;this._aspectRatio=C$t.width/C$t.height},_applySpriteFrame:function(){this._renderSpriteFrame=this._renderSpriteFrame||this._spriteFrame,this._renderSpriteFrame&&(this._renderSpriteFrame.textureLoaded()?this._onTextureLoaded():this._renderSpriteFrame.onTextureLoaded(this._onTextureLoaded,this))},_getTexture:function(){return this._renderSpriteFrame&&this._renderSpriteFrame.getTexture()||this._texture},_updateMaterial:function(){var C$t=this.getMaterial(0);C$t&&(C$t.define("CC_USE_MODEL",this._positionType!==C$s.FREE),C$t.setProperty("texture",this._getTexture()),C$n.prototype._updateMaterial.call(this))},_finishedSimulation:function(){this.resetSystem(),this.stopSystem(),this.disableRender(),this.autoRemoveOnFinish&&this._stopped&&this.node.destroy()}});cc.ParticleSystem=C$e.exports=C$i},{"../compression/ZipUtils":23,"../core/assets/material/CCMaterial":53,"../core/components/CCRenderComponent":89,"../core/platform/CCMacro":194,"../core/renderer/render-flow":221,"../core/utils/blend-func":257,"../core/utils/texture-util":272,"./CCPNGReader":293,"./CCParticleAsset":294,"./CCTIFFReader":296,"./particle-simulator":298,"fire-url":void 0}],296:[function(C$t,C$e,C$i){"use strict";var C$tt=C$t("../core/CCDebug");C$e.exports={_littleEndian:!1,_tiffData:null,_fileDirectories:[],getUint8:function(C$t){return this._tiffData[C$t]},getUint16:function(C$t){return this._littleEndian?this._tiffData[C$t+1]<<8|this._tiffData[C$t]:this._tiffData[C$t]<<8|this._tiffData[C$t+1]},getUint32:function(C$t){var C$e=this._tiffData;return this._littleEndian?C$e[C$t+3]<<24|C$e[C$t+2]<<16|C$e[C$t+1]<<8|C$e[C$t]:C$e[C$t]<<24|C$e[C$t+1]<<16|C$e[C$t+2]<<8|C$e[C$t+3]},checkLittleEndian:function(){var C$t=this.getUint16(0);if(18761===C$t)this.littleEndian=!0;else{if(19789!==C$t)throw console.log(C$t),TypeError(C$tt.getError(6019));this.littleEndian=!1}return this.littleEndian},hasTowel:function(){if(42!==this.getUint16(2))throw RangeError(C$tt.getError(6020));return!0},getFieldTypeName:function(C$t){var C$e=this.fieldTypeNames;return C$t in C$e?C$e[C$t]:null},getFieldTagName:function(C$t){var C$e=this.fieldTagNames;return C$t in C$e?C$e[C$t]:(cc.logID(6021,C$t),"Tag"+C$t)},getFieldTypeLength:function(C$t){return-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(C$t)?1:-1!==["SHORT","SSHORT"].indexOf(C$t)?2:-1!==["LONG","SLONG","FLOAT"].indexOf(C$t)?4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(C$t)?8:null},getFieldValues:function(C$t,C$e,C$i,C$n){var C$r=[],C$s=this.getFieldTypeLength(C$e);if(C$s*C$i<=4)!1===this.littleEndian?C$r.push(C$n>>>8*(4-C$s)):C$r.push(C$n);else for(var C$o=0;C$o<C$i;C$o++){var C$a=C$s*C$o;8<=C$s?-1!==["RATIONAL","SRATIONAL"].indexOf(C$e)?(C$r.push(this.getUint32(C$n+C$a)),C$r.push(this.getUint32(C$n+C$a+4))):cc.logID(8e3):C$r.push(this.getBytes(C$s,C$n+C$a))}return"ASCII"===C$e&&C$r.forEach(function(C$t,C$e,C$i){C$i[C$e]=String.fromCharCode(C$t)}),C$r},getBytes:function(C$t,C$e){if(!(C$t<=0))return C$t<=1?this.getUint8(C$e):C$t<=2?this.getUint16(C$e):C$t<=3?this.getUint32(C$e)>>>8:C$t<=4?this.getUint32(C$e):void cc.logID(8002);cc.logID(8001)},getBits:function(C$t,C$e,C$i){C$i=C$i||0;var C$n,C$r,C$e=C$e+Math.floor(C$i/8),C$s=C$i+C$t,C$t=32-C$t;return C$s<=0?cc.logID(6023):C$s<=8?(C$n=24+C$i,C$r=this.getUint8(C$e)):C$s<=16?(C$n=16+C$i,C$r=this.getUint16(C$e)):C$s<=32?(C$n=C$i,C$r=this.getUint32(C$e)):cc.logID(6022),{bits:C$r<<C$n>>>C$t,byteOffset:C$e+Math.floor(C$s/8),bitOffset:C$s%8}},parseFileDirectory:function(C$t){for(var C$e=this.getUint16(C$t),C$i=[],C$n=C$t+2,C$r=0;C$r<C$e;C$n+=12,C$r++){var C$s=this.getUint16(C$n),C$o=this.getUint16(C$n+2),C$a=this.getUint32(C$n+4),C$c=this.getUint32(C$n+8),C$s=this.getFieldTagName(C$s),C$o=this.getFieldTypeName(C$o),C$a=this.getFieldValues(C$s,C$o,C$a,C$c);C$i[C$s]={type:C$o,values:C$a}}this._fileDirectories.push(C$i);C$t=this.getUint32(C$n);0!==C$t&&this.parseFileDirectory(C$t)},clampColorSample:function(C$t,C$e){C$e=Math.pow(2,8-C$e);return Math.floor(C$t*C$e+(C$e-1))},parseTIFF:function(C$t,C$e){if(C$e=C$e||document.createElement("canvas"),this._tiffData=C$t,this.canvas=C$e,this.checkLittleEndian(),this.hasTowel()){var C$h,C$t=this.getUint32(4),C$t=(this._fileDirectories.length=0,this.parseFileDirectory(C$t),this._fileDirectories[0]),C$u=C$t.ImageWidth.values[0],C$i=C$t.ImageLength.values[0],C$n=(this.canvas.width=C$u,this.canvas.height=C$i,[]),C$_=C$t.Compression?C$t.Compression.values[0]:1,C$d=C$t.SamplesPerPixel.values[0],C$r=[],C$f=0,C$p=!1,C$m=(C$t.BitsPerSample.values.forEach(function(C$t,C$e,C$i){C$r[C$e]={bitsPerSample:C$t,hasBytesPerSample:!1,bytesPerSample:void 0},C$t%8==0&&(C$r[C$e].hasBytesPerSample=!0,C$r[C$e].bytesPerSample=C$t/8),C$f+=C$t},this),C$f%8==0&&(C$p=!0,C$h=C$f/8),C$t.StripOffsets.values),C$y=C$m.length;if(C$t.StripByteCounts)var C$g=C$t.StripByteCounts.values;else{if(cc.logID(8003),1!==C$y)throw Error(C$tt.getError(6024));C$g=[Math.ceil(C$u*C$i*C$f/8)]}for(var C$s=0;C$s<C$y;C$s++)for(var C$v=C$m[C$s],C$x=(C$n[C$s]=[],C$g[C$s]),C$o=0,C$b=0,C$A=1,C$C=!0,C$a=[],C$S=0,C$T=0,C$w=0;C$o<C$x;C$o+=C$A)switch(C$_){case 1:for(var C$c=0,C$a=[];C$c<C$d;C$c++){if(!C$r[C$c].hasBytesPerSample)throw C$E=this.getBits(C$r[C$c].bitsPerSample,C$v+C$o,C$b),C$a.push(C$E.bits),C$o=C$E.byteOffset-C$v,C$b=C$E.bitOffset,RangeError(C$tt.getError(6025));var C$E=C$r[C$c].bytesPerSample*C$c;C$a.push(this.getBytes(C$r[C$c].bytesPerSample,C$v+C$o+C$E))}if(C$n[C$s].push(C$a),!C$p)throw C$A=0,RangeError(C$tt.getError(6026));C$A=C$h;break;case 2:case 3:case 4:case 5:case 6:case 7:break;case 32773:if(C$C){var C$C=!1,C$M=1,C$I=1,C$B=this.getInt8(C$v+C$o);0<=C$B&&C$B<=127?C$M=C$B+1:-127<=C$B&&C$B<=-1?C$I=1-C$B:C$C=!0}else{for(var C$R=this.getUint8(C$v+C$o),C$c=0;C$c<C$I;C$c++){if(!C$r[C$T].hasBytesPerSample)throw RangeError(C$tt.getError(6025));C$w=C$w<<8*C$S|C$R,++C$S===C$r[C$T].bytesPerSample&&(C$a.push(C$w),C$w=C$S=0,C$T++),C$T===C$d&&(C$n[C$s].push(C$a),C$a=[],C$T=0)}0===--C$M&&(C$C=!0)}C$A=1}if(C$e.getContext){var C$P,C$D,C$L=this.canvas.getContext("2d"),C$e=(C$L.fillStyle="rgba(255, 255, 255, 0)",C$t.RowsPerStrip?C$t.RowsPerStrip.values[0]:C$i),C$V=C$n.length,C$i=C$i%C$e,C$O=0==C$i?C$e:C$i,C$F=C$e,C$N=0,C$k=C$t.PhotometricInterpretation.values[0],C$G=[],C$z=0;C$t.ExtraSamples&&(C$z=(C$G=C$t.ExtraSamples.values).length),C$t.ColorMap&&(C$P=C$t.ColorMap.values,C$D=Math.pow(2,C$r[0].bitsPerSample));for(C$s=0;C$s<C$V;C$s++){C$s+1===C$V&&(C$F=C$O);for(var C$U=C$n[C$s].length,C$W=C$N*C$s,C$H=0,C$j=0;C$j<C$U;C$H++)for(var C$X=0;C$X<C$u;C$X++,C$j++){var C$Y,C$l=C$n[C$s][C$j],C$q=0,C$J=0,C$Z=0,C$K=1;if(0<C$z)for(var C$Q=0;C$Q<C$z;C$Q++)if(1===C$G[C$Q]||2===C$G[C$Q]){C$K=C$l[3+C$Q]/256;break}switch(C$k){case 0:C$r[0].hasBytesPerSample&&(C$Y=Math.pow(16,2*C$r[0].bytesPerSample)),C$l.forEach(function(C$t,C$e,C$i){C$i[C$e]=C$Y-C$t});case 1:C$q=C$J=C$Z=this.clampColorSample(C$l[0],C$r[0].bitsPerSample);break;case 2:C$q=this.clampColorSample(C$l[0],C$r[0].bitsPerSample),C$J=this.clampColorSample(C$l[1],C$r[1].bitsPerSample),C$Z=this.clampColorSample(C$l[2],C$r[2].bitsPerSample);break;case 3:if(void 0===C$P)throw Error(C$tt.getError(6027));var C$$=C$l[0],C$q=this.clampColorSample(C$P[C$$],16),C$J=this.clampColorSample(C$P[C$D+C$$],16),C$Z=this.clampColorSample(C$P[2*C$D+C$$],16);break;default:throw RangeError(C$tt.getError(6028,C$k))}C$L.fillStyle="rgba("+C$q+", "+C$J+", "+C$Z+", "+C$K+")",C$L.fillRect(C$X,C$W+C$H,1,1)}C$N=C$F}}return this.canvas}},fieldTagNames:{315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},fieldTypeNames:{1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"}}},{"../core/CCDebug":27}],297:[function(C$t,C$e,C$i){"use strict";C$t("./CCParticleAsset"),C$t("./CCParticleSystem"),C$t("./particle-simulator"),C$t("./particle-system-assembler")},{"./CCParticleAsset":294,"./CCParticleSystem":295,"./particle-simulator":298,"./particle-system-assembler":299}],298:[function(C$e,C$i,C$n){"use strict";function C$r(){this.pos=cc.v2(0,0),this.startPos=cc.v2(0,0),this.color=cc.color(0,0,0,255),this.deltaColor={r:0,g:0,b:0,a:255},this.size=0,this.deltaSize=0,this.rotation=0,this.deltaRotation=0,this.timeToLive=0,this.drawPos=cc.v2(0,0),this.aspectRatio=1,this.dir=cc.v2(0,0),this.radialAccel=0,this.tangentialAccel=0,this.angle=0,this.degreesPerSecond=0,this.radius=0,this.deltaRadius=0}function C$t(C$t){this.sys=C$t,this.particles=[],this.active=!1,this.readyToPlay=!0,this.finished=!1,this.elapsed=0,this.emitCounter=0,this._uvFilled=0}var C$m=C$e("../core/utils/affine-transform"),C$s=C$e("../core/platform/js"),C$y=C$e("../core/utils/misc"),C$g=cc.v2(0,0),C$v=C$m.create(),C$x=cc.v2(),C$b=cc.v2(),C$A=cc.v2(),C$C=cc.v2(),C$S=new C$s.Pool(function(C$t){C$t.pos.set(C$g),C$t.startPos.set(C$g),C$t.color._val=4278190080,C$t.deltaColor.r=C$t.deltaColor.g=C$t.deltaColor.b=0,C$t.deltaColor.a=255,C$t.size=0,C$t.deltaSize=0,C$t.rotation=0,C$t.deltaRotation=0,C$t.timeToLive=0,C$t.drawPos.set(C$g),C$t.aspectRatio=1,C$t.dir.set(C$g),C$t.radialAccel=0,C$t.tangentialAccel=0,C$t.angle=0,C$t.degreesPerSecond=0,C$t.radius=0,C$t.deltaRadius=0},1024);C$S.get=function(){return this._get()||new C$r};C$t.prototype.stop=function(){this.active=!1,this.readyToPlay=!1,this.elapsed=this.sys.duration,this.emitCounter=0},C$t.prototype.reset=function(){this.active=!0,this.readyToPlay=!0,this.elapsed=0,this.emitCounter=0,this.finished=!1;for(var C$t=this.particles,C$e=0;C$e<C$t.length;++C$e)C$S.put(C$t[C$e]);C$t.length=0},C$t.prototype.emitParticle=function(C$h){var C$t,C$e=this.sys,C$i=C$y.clampf,C$n=C$S.get(),C$r=(this.particles.push(C$n),C$n.timeToLive=C$e.life+C$e.lifeVar*(Math.random()-.5)*2,C$n.timeToLive=Math.max(0,C$n.timeToLive)),C$s=(C$n.pos.x=C$e.sourcePos.x+C$e.posVar.x*(Math.random()-.5)*2,C$n.pos.y=C$e.sourcePos.y+C$e.posVar.y*(Math.random()-.5)*2,C$e._startColor),C$o=C$e._startColorVar,C$a=C$e._endColor,C$c=C$e._endColorVar,C$o=(C$n.color.r=C$t=C$i(C$s.r+C$o.r*(Math.random()-.5)*2,0,255),C$n.color.g=C$l=C$i(C$s.g+C$o.g*(Math.random()-.5)*2,0,255),C$n.color.b=C$u=C$i(C$s.b+C$o.b*(Math.random()-.5)*2,0,255),C$n.color.a=C$s=C$i(C$s.a+C$o.a*(Math.random()-.5)*2,0,255),C$n.deltaColor.r=(C$i(C$a.r+C$c.r*(Math.random()-.5)*2,0,255)-C$t)/C$r,C$n.deltaColor.g=(C$i(C$a.g+C$c.g*(Math.random()-.5)*2,0,255)-C$l)/C$r,C$n.deltaColor.b=(C$i(C$a.b+C$c.b*(Math.random()-.5)*2,0,255)-C$u)/C$r,C$n.deltaColor.a=(C$i(C$a.a+C$c.a*(Math.random()-.5)*2,0,255)-C$s)/C$r,C$e.startSize+C$e.startSizeVar*(Math.random()-.5)*2),C$o=Math.max(0,C$o),C$l=(C$n.size=C$o,C$e.endSize===cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE?C$n.deltaSize=0:(C$t=C$e.endSize+C$e.endSizeVar*(Math.random()-.5)*2,C$t=Math.max(0,C$t),C$n.deltaSize=(C$t-C$o)/C$r),C$e.startSpin+C$e.startSpinVar*(Math.random()-.5)*2),C$u=C$e.endSpin+C$e.endSpinVar*(Math.random()-.5)*2,C$i=(C$n.rotation=C$l,C$n.deltaRotation=(C$u-C$l)/C$r,C$n.startPos.x=C$h.x,C$n.startPos.y=C$h.y,C$n.aspectRatio=C$e._aspectRatio||1,function(C$t){var C$e=0,C$i=C$t;for(;C$i;)C$e+=C$i.angle,C$i=C$i.parent;return C$e}(C$e.node)),C$a=C$e.positionType===cc.ParticleSystem.PositionType.FREE?C$e.angle+C$i:C$e.angle,C$c=C$y.degreesToRadians(C$a+C$e.angleVar*(Math.random()-.5)*2);C$e.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY?(C$s=C$e.speed+C$e.speedVar*(Math.random()-.5)*2,C$n.dir.x=Math.cos(C$c),C$n.dir.y=Math.sin(C$c),C$n.dir.mulSelf(C$s),C$n.radialAccel=C$e.radialAccel+C$e.radialAccelVar*(Math.random()-.5)*2,C$n.tangentialAccel=C$e.tangentialAccel+C$e.tangentialAccelVar*(Math.random()-.5)*2,C$e.rotationIsDir&&(C$n.rotation=-C$y.radiansToDegrees(Math.atan2(C$n.dir.y,C$n.dir.x)))):(C$t=C$e.startRadius+C$e.startRadiusVar*(Math.random()-.5)*2,C$o=C$e.endRadius+C$e.endRadiusVar*(Math.random()-.5)*2,C$n.radius=C$t,C$n.deltaRadius=C$e.endRadius===cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS?0:(C$o-C$t)/C$r,C$n.angle=C$c,C$n.degreesPerSecond=C$y.degreesToRadians(C$e.rotatePerS+C$e.rotatePerSVar*(Math.random()-.5)*2))},C$t.prototype.updateUVs=function(C$t){var C$e=this.sys._assembler;if(C$e){var C$i=C$e.getBuffer();if(C$i&&this.sys._renderSpriteFrame){for(var C$n=4*C$e._vfmt._bytes/4,C$r=C$i._vData,C$s=this.sys._renderSpriteFrame.uv,C$e=C$t?0:this._uvFilled,C$o=this.particles.length,C$a=C$e;C$a<C$o;C$a++){var C$c=C$a*C$n;C$r[2+C$c]=C$s[0],C$r[3+C$c]=C$s[1],C$r[7+C$c]=C$s[2],C$r[8+C$c]=C$s[3],C$r[12+C$c]=C$s[4],C$r[13+C$c]=C$s[5],C$r[17+C$c]=C$s[6],C$r[18+C$c]=C$s[7]}this._uvFilled=C$o}}},C$t.prototype.updateParticleBuffer=function(C$t,C$e,C$h,C$i){var C$u,C$_,C$d,C$n,C$r,C$s=C$h._vData,C$h=C$h._uintVData,C$o=C$e.x,C$e=C$e.y,C$a=C$t.size,C$c=C$a,C$l=C$t.aspectRatio,C$l=(1<C$l?C$c=C$a/C$l:C$a=C$c*C$l,C$a/2),C$a=C$c/2;C$t.rotation?(C$c=-C$l,C$u=-C$a,C$_=C$l,C$d=C$a,C$r=-C$y.degreesToRadians(C$t.rotation),C$n=Math.cos(C$r),C$r=Math.sin(C$r),C$s[C$i]=C$c*C$n-C$u*C$r+C$o,C$s[C$i+1]=C$c*C$r+C$u*C$n+C$e,C$s[C$i+5]=C$_*C$n-C$u*C$r+C$o,C$s[C$i+6]=C$_*C$r+C$u*C$n+C$e,C$s[C$i+10]=C$c*C$n-C$d*C$r+C$o,C$s[C$i+11]=C$c*C$r+C$d*C$n+C$e,C$s[C$i+15]=C$_*C$n-C$d*C$r+C$o,C$s[C$i+16]=C$_*C$r+C$d*C$n+C$e):(C$s[C$i]=C$o-C$l,C$s[C$i+1]=C$e-C$a,C$s[C$i+5]=C$o+C$l,C$s[C$i+6]=C$e-C$a,C$s[C$i+10]=C$o-C$l,C$s[C$i+11]=C$e+C$a,C$s[C$i+15]=C$o+C$l,C$s[C$i+16]=C$e+C$a),C$h[C$i+4]=C$t.color._val,C$h[C$i+9]=C$t.color._val,C$h[C$i+14]=C$t.color._val,C$h[C$i+19]=C$t.color._val},C$t.prototype.step=function(C$t){C$t=C$t>cc.director._maxParticleDeltaTime?cc.director._maxParticleDeltaTime:C$t;var C$h,C$e=this.sys,C$u=C$e.node,C$i=this.particles,C$_=4*this.sys._assembler._vfmt._bytes/4,C$d=(C$u._updateWorldMatrix(),C$v=C$m.identity(),C$e.positionType===cc.ParticleSystem.PositionType.FREE?(C$n=C$u._worldMatrix.m,C$v.tx=C$n[12],C$v.ty=C$n[13],C$m.transformVec2(C$x,C$g,C$v)):C$e.positionType===cc.ParticleSystem.PositionType.RELATIVE&&(C$n=C$y.degreesToRadians(-C$u.angle),C$h=Math.cos(C$n),C$n=Math.sin(C$n),C$v=C$m.create(C$h,-C$n,C$n,C$h,0,0),C$x.x=C$u.x,C$x.y=C$u.y),C$m.invert(C$v,C$v),C$v);if(this.active&&C$e.emissionRate){var C$f=1/C$e.emissionRate;for(C$i.length<C$e.totalParticles&&(this.emitCounter+=C$t);C$i.length<C$e.totalParticles&&this.emitCounter>C$f;)this.emitParticle(C$x),this.emitCounter-=C$f;this.elapsed+=C$t,-1!==C$e.duration&&C$e.duration<this.elapsed&&C$e.stopSystem()}for(var C$p=C$e._assembler.getBuffer(),C$n=C$i.length,C$r=(C$p.reset(),C$p.request(4*C$n,6*C$n),C$n>this._uvFilled&&this.updateUVs(),0);C$r<C$i.length;){C$b.x=C$b.y=C$A.x=C$A.y=C$C.x=C$C.y=0;var C$s,C$o,C$a,C$c,C$l=C$i[C$r];C$l.timeToLive-=C$t,0<C$l.timeToLive?(C$e.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY?(C$c=C$C,C$o=C$b,C$a=C$A,(C$l.pos.x||C$l.pos.y)&&(C$o.set(C$l.pos),C$o.normalizeSelf()),C$a.set(C$o),C$o.mulSelf(C$l.radialAccel),C$s=C$a.x,C$a.x=-C$a.y,C$a.y=C$s,C$a.mulSelf(C$l.tangentialAccel),C$c.set(C$o),C$c.addSelf(C$a),C$c.addSelf(C$e.gravity),C$c.mulSelf(C$t),C$l.dir.addSelf(C$c),C$c.set(C$l.dir),C$c.mulSelf(C$t),C$l.pos.addSelf(C$c)):(C$l.angle+=C$l.degreesPerSecond*C$t,C$l.radius+=C$l.deltaRadius*C$t,C$l.pos.x=-Math.cos(C$l.angle)*C$l.radius,C$l.pos.y=-Math.sin(C$l.angle)*C$l.radius),C$l.color.r+=C$l.deltaColor.r*C$t,C$l.color.g+=C$l.deltaColor.g*C$t,C$l.color.b+=C$l.deltaColor.b*C$t,C$l.color.a+=C$l.deltaColor.a*C$t,C$l.size+=C$l.deltaSize*C$t,C$l.size<0&&(C$l.size=0),C$l.rotation+=C$l.deltaRotation*C$t,C$s=C$b,C$o=C$A,C$e.positionType===cc.ParticleSystem.PositionType.FREE?(C$o.set(C$l.startPos),C$o.negSelf(),C$s.set(C$l.pos),C$s.subSelf(C$o)):C$e.positionType===cc.ParticleSystem.PositionType.RELATIVE?(C$a=C$C,C$m.transformVec2(C$o,C$x,C$d),C$m.transformVec2(C$a,C$l.startPos,C$d),C$o.subSelf(C$a),C$s.set(C$l.pos),C$s.subSelf(C$o)):C$s.set(C$l.pos),this.updateParticleBuffer(C$l,C$s,C$p,C$_*C$r),++C$r):(C$c=C$i[C$r],C$r!==C$i.length-1&&(C$i[C$r]=C$i[C$i.length-1]),C$S.put(C$c),C$i.length--)}0<C$i.length?(C$p.uploadData(),C$e._assembler._ia._count=6*C$i.length):this.active||this.readyToPlay||(this.finished=!0,C$e._finishedSimulation())},C$i.exports=C$t},{"../core/platform/js":209,"../core/utils/affine-transform":254,"../core/utils/misc":264}],299:[function(C$t,C$e,C$h){"use strict";var C$i=C$r(C$t("../core/renderer/assembler")),C$n=C$r(C$t("../renderer/core/input-assembler"));function C$r(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$u(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$o,C$a,C$_=C$t("./CCParticleSystem"),C$d=C$t("../core/renderer/"),C$f=C$t("../core/renderer/webgl/quad-buffer"),C$c=C$t("../core/renderer/webgl/vertex-format").vfmtPosUvColor,C$t=(C$o=C$i.default,C$t=C$o,(C$a=C$l).prototype=Object.create(C$t.prototype),(C$a.prototype.constructor=C$a).__proto__=C$t,C$u(C$l),(C$a=C$l.prototype).getBuffer=function(){return this._buffer||(this._buffer=new C$f(C$d._handle,C$c),this._ia=new C$n.default,this._ia._vertexBuffer=this._buffer._vb,this._ia._indexBuffer=this._buffer._ib,this._ia._start=0,this._ia._count=0),this._buffer},C$a.fillBuffers=function(C$t,C$e){this._ia&&(C$e.node=C$t.node,C$e.material=C$t._materials[0],C$e._flushIA(this._ia))},C$l);function C$l(C$t){C$t=C$o.call(this,C$t)||this;return C$t._buffer=null,C$t._ia=null,C$t._vfmt=C$c,C$t}C$i.default.register(C$_,C$t),C$e.exports=C$t},{"../core/renderer/":220,"../core/renderer/assembler":217,"../core/renderer/webgl/quad-buffer":249,"../core/renderer/webgl/vertex-format":252,"../renderer/core/input-assembler":302,"./CCParticleSystem":295}],300:[function(C$h,C$u,C$_){"use strict";var C$e,C$i,C$d=512,C$f=513,C$p=514,C$m=515,C$y=516,C$g=517,C$v=518,C$x=519,C$b=32774,C$A=32778,C$C=32779,C$S=0,C$T=1,C$w=768,C$E=769,C$M=774,C$I=775,C$B=770,C$R=771,C$P=772,C$D=773,C$L=32769,C$V=32770,C$O=32771,C$F=32772,C$N=776,C$k=7680,C$G=7681,C$z=7682,C$U=34055,C$W=7683,C$H=34056,C$j=5386,C$X=0,C$Y=1028,C$q=1029;(C$a=C$e=C$e||{})[C$a.UNKNOWN=0]="UNKNOWN",C$a[C$a.BUFFER=1]="BUFFER",C$a[C$a.TEXTURE=2]="TEXTURE",C$a[C$a.TEXTURE_VIEW=3]="TEXTURE_VIEW",C$a[C$a.RENDER_PASS=4]="RENDER_PASS",C$a[C$a.FRAMEBUFFER=5]="FRAMEBUFFER",C$a[C$a.SAMPLER=6]="SAMPLER",C$a[C$a.SHADER=7]="SHADER",C$a[C$a.PIPELINE_LAYOUT=8]="PIPELINE_LAYOUT",C$a[C$a.PIPELINE_STATE=9]="PIPELINE_STATE",C$a[C$a.BINDING_LAYOUT=10]="BINDING_LAYOUT",C$a[C$a.INPUT_ASSEMBLER=11]="INPUT_ASSEMBLER",C$a[C$a.COMMAND_ALLOCATOR=12]="COMMAND_ALLOCATOR",C$a[C$a.COMMAND_BUFFER=13]="COMMAND_BUFFER",C$a[C$a.QUEUE=14]="QUEUE",C$a[C$a.WINDOW=15]="WINDOW",(C$a=C$i=C$i||{})[C$a.UNREADY=0]="UNREADY",C$a[C$a.FAILED=1]="FAILED",C$a[C$a.SUCCESS=2]="SUCCESS";var C$n,C$t,C$r;Object.defineProperty(C$J.prototype,"gfxType",{get:function(){return this._gfxType},enumerable:!0,configurable:!0}),Object.defineProperty(C$J.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});function C$J(C$t){this._gfxType=C$e.UNKNOWN,this._status=C$i.UNREADY,this._gfxType=C$t}(C$a=C$n=C$n||{})[C$a.UNKNOWN=0]="UNKNOWN",C$a[C$a.BOOL=1]="BOOL",C$a[C$a.BOOL2=2]="BOOL2",C$a[C$a.BOOL3=3]="BOOL3",C$a[C$a.BOOL4=4]="BOOL4",C$a[C$a.INT=5]="INT",C$a[C$a.INT2=6]="INT2",C$a[C$a.INT3=7]="INT3",C$a[C$a.INT4=8]="INT4",C$a[C$a.UINT=9]="UINT",C$a[C$a.UINT2=10]="UINT2",C$a[C$a.UINT3=11]="UINT3",C$a[C$a.UINT4=12]="UINT4",C$a[C$a.FLOAT=13]="FLOAT",C$a[C$a.FLOAT2=14]="FLOAT2",C$a[C$a.FLOAT3=15]="FLOAT3",C$a[C$a.FLOAT4=16]="FLOAT4",C$a[C$a.COLOR4=17]="COLOR4",C$a[C$a.MAT2=18]="MAT2",C$a[C$a.MAT2X3=19]="MAT2X3",C$a[C$a.MAT2X4=20]="MAT2X4",C$a[C$a.MAT3X2=21]="MAT3X2",C$a[C$a.MAT3=22]="MAT3",C$a[C$a.MAT3X4=23]="MAT3X4",C$a[C$a.MAT4X2=24]="MAT4X2",C$a[C$a.MAT4X3=25]="MAT4X3",C$a[C$a.MAT4=26]="MAT4",C$a[C$a.SAMPLER1D=27]="SAMPLER1D",C$a[C$a.SAMPLER1D_ARRAY=28]="SAMPLER1D_ARRAY",C$a[C$a.SAMPLER2D=29]="SAMPLER2D",C$a[C$a.SAMPLER2D_ARRAY=30]="SAMPLER2D_ARRAY",C$a[C$a.SAMPLER3D=31]="SAMPLER3D",C$a[C$a.SAMPLER_CUBE=32]="SAMPLER_CUBE",C$a[C$a.COUNT=33]="COUNT",(C$a=C$c=C$c||{})[C$a.UNKNOWN=0]="UNKNOWN",C$a[C$a.A8=1]="A8",C$a[C$a.L8=2]="L8",C$a[C$a.LA8=3]="LA8",C$a[C$a.R8=4]="R8",C$a[C$a.R8SN=5]="R8SN",C$a[C$a.R8UI=6]="R8UI",C$a[C$a.R8I=7]="R8I",C$a[C$a.R16F=8]="R16F",C$a[C$a.R16UI=9]="R16UI",C$a[C$a.R16I=10]="R16I",C$a[C$a.R32F=11]="R32F",C$a[C$a.R32UI=12]="R32UI",C$a[C$a.R32I=13]="R32I",C$a[C$a.RG8=14]="RG8",C$a[C$a.RG8SN=15]="RG8SN",C$a[C$a.RG8UI=16]="RG8UI",C$a[C$a.RG8I=17]="RG8I",C$a[C$a.RG16F=18]="RG16F",C$a[C$a.RG16UI=19]="RG16UI",C$a[C$a.RG16I=20]="RG16I",C$a[C$a.RG32F=21]="RG32F",C$a[C$a.RG32UI=22]="RG32UI",C$a[C$a.RG32I=23]="RG32I",C$a[C$a.RGB8=24]="RGB8",C$a[C$a.SRGB8=25]="SRGB8",C$a[C$a.RGB8SN=26]="RGB8SN",C$a[C$a.RGB8UI=27]="RGB8UI",C$a[C$a.RGB8I=28]="RGB8I",C$a[C$a.RGB16F=29]="RGB16F",C$a[C$a.RGB16UI=30]="RGB16UI",C$a[C$a.RGB16I=31]="RGB16I",C$a[C$a.RGB32F=32]="RGB32F",C$a[C$a.RGB32UI=33]="RGB32UI",C$a[C$a.RGB32I=34]="RGB32I",C$a[C$a.RGBA8=35]="RGBA8",C$a[C$a.SRGB8_A8=36]="SRGB8_A8",C$a[C$a.RGBA8SN=37]="RGBA8SN",C$a[C$a.RGBA8UI=38]="RGBA8UI",C$a[C$a.RGBA8I=39]="RGBA8I",C$a[C$a.RGBA16F=40]="RGBA16F",C$a[C$a.RGBA16UI=41]="RGBA16UI",C$a[C$a.RGBA16I=42]="RGBA16I",C$a[C$a.RGBA32F=43]="RGBA32F",C$a[C$a.RGBA32UI=44]="RGBA32UI",C$a[C$a.RGBA32I=45]="RGBA32I",C$a[C$a.R5G6B5=46]="R5G6B5",C$a[C$a.R11G11B10F=47]="R11G11B10F",C$a[C$a.RGB5A1=48]="RGB5A1",C$a[C$a.RGBA4=49]="RGBA4",C$a[C$a.RGB10A2=50]="RGB10A2",C$a[C$a.RGB10A2UI=51]="RGB10A2UI",C$a[C$a.RGB9E5=52]="RGB9E5",C$a[C$a.D16=53]="D16",C$a[C$a.D16S8=54]="D16S8",C$a[C$a.D24=55]="D24",C$a[C$a.D24S8=56]="D24S8",C$a[C$a.D32F=57]="D32F",C$a[C$a.D32F_S8=58]="D32F_S8",C$a[C$a.BC1=59]="BC1",C$a[C$a.BC1_ALPHA=60]="BC1_ALPHA",C$a[C$a.BC1_SRGB=61]="BC1_SRGB",C$a[C$a.BC1_SRGB_ALPHA=62]="BC1_SRGB_ALPHA",C$a[C$a.BC2=63]="BC2",C$a[C$a.BC2_SRGB=64]="BC2_SRGB",C$a[C$a.BC3=65]="BC3",C$a[C$a.BC3_SRGB=66]="BC3_SRGB",C$a[C$a.BC4=67]="BC4",C$a[C$a.BC4_SNORM=68]="BC4_SNORM",C$a[C$a.BC5=69]="BC5",C$a[C$a.BC5_SNORM=70]="BC5_SNORM",C$a[C$a.BC6H_UF16=71]="BC6H_UF16",C$a[C$a.BC6H_SF16=72]="BC6H_SF16",C$a[C$a.BC7=73]="BC7",C$a[C$a.BC7_SRGB=74]="BC7_SRGB",C$a[C$a.ETC_RGB8=75]="ETC_RGB8",C$a[C$a.ETC2_RGB8=76]="ETC2_RGB8",C$a[C$a.ETC2_SRGB8=77]="ETC2_SRGB8",C$a[C$a.ETC2_RGB8_A1=78]="ETC2_RGB8_A1",C$a[C$a.ETC2_SRGB8_A1=79]="ETC2_SRGB8_A1",C$a[C$a.ETC2_RGBA8=80]="ETC2_RGBA8",C$a[C$a.ETC2_SRGB8_A8=81]="ETC2_SRGB8_A8",C$a[C$a.EAC_R11=82]="EAC_R11",C$a[C$a.EAC_R11SN=83]="EAC_R11SN",C$a[C$a.EAC_RG11=84]="EAC_RG11",C$a[C$a.EAC_RG11SN=85]="EAC_RG11SN",C$a[C$a.PVRTC_RGB2=86]="PVRTC_RGB2",C$a[C$a.PVRTC_RGBA2=87]="PVRTC_RGBA2",C$a[C$a.PVRTC_RGB4=88]="PVRTC_RGB4",C$a[C$a.PVRTC_RGBA4=89]="PVRTC_RGBA4",C$a[C$a.PVRTC2_2BPP=90]="PVRTC2_2BPP",C$a[C$a.PVRTC2_4BPP=91]="PVRTC2_4BPP",C$t=C$t||{},C$t[C$t.DEFAULT=100]="DEFAULT",(C$a=C$r=C$r||{})[C$a.MIN=0]="MIN",C$a[C$a.MAX=255]="MAX",C$a[C$a.DEFAULT=128]="DEFAULT";(C$a=C$s=C$s||{})[C$a.UBO_GLOBAL=23]="UBO_GLOBAL",C$a[C$a.UBO_SHADOW=22]="UBO_SHADOW",C$a[C$a.UBO_LOCAL=21]="UBO_LOCAL",C$a[C$a.UBO_FORWARD_LIGHTS=20]="UBO_FORWARD_LIGHTS",C$a[C$a.UBO_SKINNING=19]="UBO_SKINNING",C$a[C$a.UBO_SKINNING_TEXTURE=18]="UBO_SKINNING_TEXTURE",C$a[C$a.UBO_UI=17]="UBO_UI",C$a[C$a.SAMPLER_JOINTS=25]="SAMPLER_JOINTS",C$a[C$a.SAMPLER_ENVIRONMENT=26]="SAMPLER_ENVIRONMENT",C$a[C$a.CUSTUM_UBO_BINDING_END_POINT=17]="CUSTUM_UBO_BINDING_END_POINT",C$a[C$a.CUSTOM_SAMPLER_BINDING_START_POINT=30]="CUSTOM_SAMPLER_BINDING_START_POINT",(C$a=C$Z=C$Z||{})[C$a.minFilter=0]="minFilter",C$a[C$a.magFilter=1]="magFilter",C$a[C$a.mipFilter=2]="mipFilter",C$a[C$a.addressU=3]="addressU",C$a[C$a.addressV=4]="addressV",C$a[C$a.addressW=5]="addressW",C$a[C$a.maxAnisotropy=6]="maxAnisotropy",C$a[C$a.cmpFunc=7]="cmpFunc",C$a[C$a.minLOD=8]="minLOD",C$a[C$a.maxLOD=9]="maxLOD",C$a[C$a.mipLODBias=10]="mipLODBias",C$a[C$a.borderColor=11]="borderColor",C$a[C$a.total=15]="total";var C$s,C$Z,C$o,C$a={},C$c=(C$a[C$a.bool=C$n.BOOL]="bool",C$a[C$a.int=C$n.INT]="int",C$a[C$a.ivec2=C$n.INT2]="ivec2invTypeParams",C$a[C$a.ivec3=C$n.INT3]="ivec3",C$a[C$a.ivec4=C$n.INT4]="ivec4",C$a[C$a.float=C$n.FLOAT]="float",C$a[C$a.vec2=C$n.FLOAT2]="vec2",C$a[C$a.vec3=C$n.FLOAT3]="vec3",C$a[C$a.vec4=C$n.FLOAT4]="vec4",C$a[C$a.mat2=C$n.MAT2]="mat2",C$a[C$a.mat3=C$n.MAT3]="mat3",C$a[C$a.mat4=C$n.MAT4]="mat4",C$a[C$a.sampler2D=C$n.SAMPLER2D]="sampler2D",C$a[C$a.samplerCube=C$n.SAMPLER_CUBE]="samplerCube",(C$o={})[C$n.BOOL]=4,C$o[C$n.INT]=4,C$o[C$n.INT2]=8,C$o[C$n.INT3]=12,C$o[C$n.INT4]=16,C$o[C$n.FLOAT]=4,C$o[C$n.FLOAT2]=8,C$o[C$n.FLOAT3]=12,C$o[C$n.FLOAT4]=16,C$o[C$n.MAT2]=16,C$o[C$n.MAT3]=36,C$o[C$n.MAT4]=64,C$o[C$n.SAMPLER2D]=4,C$o[C$n.SAMPLER_CUBE]=4,(C$l={})[C$n.BOOL]=C$c.R32I,C$l[C$n.INT]=C$c.R32I,C$l[C$n.INT2]=C$c.RG32I,C$l[C$n.INT3]=C$c.RGB32I,C$l[C$n.INT4]=C$c.RGBA32I,C$l[C$n.FLOAT]=C$c.R32F,C$l[C$n.FLOAT2]=C$c.RG32F,C$l[C$n.FLOAT3]=C$c.RGB32F,C$l[C$n.FLOAT4]=C$c.RGBA32F,C$l),C$l={BACK:C$q,FRONT:C$Y,NONE:C$X,ADD:C$b,SUB:C$A,REV_SUB:C$C,ZERO:C$S,ONE:C$T,SRC_COLOR:C$w,ONE_MINUS_SRC_COLOR:C$E,DST_COLOR:C$M,ONE_MINUS_DST_COLOR:C$I,SRC_ALPHA:C$B,ONE_MINUS_SRC_ALPHA:C$R,DST_ALPHA:C$P,ONE_MINUS_DST_ALPHA:C$D,CONSTANT_COLOR:C$L,ONE_MINUS_CONSTANT_COLOR:C$V,CONSTANT_ALPHA:C$O,ONE_MINUS_CONSTANT_ALPHA:C$F,SRC_ALPHA_SATURATE:C$N,NEVER:C$d,LESS:C$f,EQUAL:C$p,LEQUAL:C$m,GREATER:C$y,NOTEQUAL:C$g,GEQUAL:C$v,ALWAYS:C$x,KEEP:C$k,REPLACE:C$G,INCR:C$z,INCR_WRAP:C$U,DECR:C$W,DECR_WRAP:C$H,INVERT:C$j};Object.assign(C$l,C$t);C$u.exports={murmurhash2_32_gc:function(C$t,C$e){for(var C$i,C$n=C$t.length,C$r=C$e^C$n,C$s=0;4<=C$n;)C$i=1540483477*(65535&(C$i=255&C$t.charCodeAt(C$s)|(255&C$t.charCodeAt(++C$s))<<8|(255&C$t.charCodeAt(++C$s))<<16|(255&C$t.charCodeAt(++C$s))<<24))+((1540483477*(C$i>>>16)&65535)<<16),C$r=1540483477*(65535&C$r)+((1540483477*(C$r>>>16)&65535)<<16)^1540483477*(65535&(C$i^=C$i>>>24))+((1540483477*(C$i>>>16)&65535)<<16),C$n-=4,++C$s;switch(C$n){case 3:C$r^=(255&C$t.charCodeAt(C$s+2))<<16;case 2:C$r^=(255&C$t.charCodeAt(C$s+1))<<8;case 1:C$r=1540483477*(65535&(C$r^=255&C$t.charCodeAt(C$s)))+((1540483477*(C$r>>>16)&65535)<<16)}return C$r=1540483477*(65535&(C$r^=C$r>>>13))+((1540483477*(C$r>>>16)&65535)<<16),(C$r^=C$r>>>15)>>>0},SamplerInfoIndex:C$Z,effectStructure:{$techniques:[{$passes:[{depthStencilState:{},rasterizerState:{},blendState:{targets:[{}]},properties:{any:{sampler:{},inspector:{}}}}]}]},typeMap:C$a,sizeMap:C$o,formatMap:C$c,passParams:C$l,RenderQueue:{OPAQUE:0,TRANSPARENT:1,OVERLAY:2},RenderPriority:C$r,GFXGetTypeSize:function(C$t){switch(C$t){case C$n.BOOL:case C$n.INT:case C$n.UINT:case C$n.FLOAT:return 4;case C$n.BOOL2:case C$n.INT2:case C$n.UINT2:case C$n.FLOAT2:return 8;case C$n.BOOL3:case C$n.INT3:case C$n.UINT3:case C$n.FLOAT3:return 12;case C$n.BOOL4:case C$n.INT4:case C$n.UINT4:case C$n.FLOAT4:case C$n.MAT2:return 16;case C$n.MAT2X3:return 24;case C$n.MAT2X4:return 32;case C$n.MAT3X2:return 24;case C$n.MAT3:return 36;case C$n.MAT3X4:return 48;case C$n.MAT4X2:case C$n.MAT4X2:return 32;case C$n.MAT4:return 64;case C$n.SAMPLER1D:case C$n.SAMPLER1D_ARRAY:case C$n.SAMPLER2D:case C$n.SAMPLER2D_ARRAY:case C$n.SAMPLER3D:case C$n.SAMPLER_CUBE:return 4;default:return 0}},UniformBinding:C$s}},{}],301:[function(C$t,C$r,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$i=C$t("../memop"),C$y=C$n(C$t("../enums")),C$g=C$t("../../core/value-types"),C$s=C$n(C$t("./program-lib")),C$o=C$n(C$t("./view")),C$A=C$n(C$t("../gfx"));function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}var C$m=new C$g.Mat4,C$v=new C$i.RecyclePool(function(){return{stage:null,items:null}},8),C$C=new C$i.RecyclePool(function(){return new Float32Array(2)},8),C$S=new C$i.RecyclePool(function(){return new Float32Array(3)},8),C$T=new C$i.RecyclePool(function(){return new Float32Array(4)},8),C$w=new C$i.RecyclePool(function(){return new Float32Array(9)},8),C$x=new C$i.RecyclePool(function(){return new Float32Array(16)},8),C$E=new C$i.RecyclePool(function(){return new Float32Array(64)},8),C$M=new C$i.RecyclePool(function(){return new Int32Array(2)},8),C$I=new C$i.RecyclePool(function(){return new Int32Array(3)},8),C$B=new C$i.RecyclePool(function(){return new Int32Array(4)},8),C$b=new C$i.RecyclePool(function(){return new Int32Array(64)},8);function C$a(C$t,C$e){this._device=C$t,this._programLib=new C$s.default(C$t),this._opts=C$e,this._type2defaultValue=((C$t={})[C$y.default.PARAM_INT]=0,C$t[C$y.default.PARAM_INT2]=new C$g.Vec2(0,0),C$t[C$y.default.PARAM_INT3]=new C$g.Vec3(0,0,0),C$t[C$y.default.PARAM_INT4]=new C$g.Vec4(0,0,0,0),C$t[C$y.default.PARAM_FLOAT]=0,C$t[C$y.default.PARAM_FLOAT2]=new C$g.Vec2(0,0),C$t[C$y.default.PARAM_FLOAT3]=new C$g.Vec3(0,0,0),C$t[C$y.default.PARAM_FLOAT4]=new C$g.Vec4(0,0,0,0),C$t[C$y.default.PARAM_COLOR4]=new C$g.Color(0,0,0,1),C$t[C$y.default.PARAM_MAT3]=new C$g.Mat3,C$t[C$y.default.PARAM_MAT4]=new C$g.Mat4,C$t[C$y.default.PARAM_TEXTURE_2D]=C$e.defaultTexture,C$t[C$y.default.PARAM_TEXTURE_CUBE]=C$e.defaultTextureCube,C$t),this._stage2fn={},this._usedTextureUnits=0,this._viewPools=new C$i.RecyclePool(function(){return new C$o.default},8),this._drawItemsPools=new C$i.RecyclePool(function(){return{model:null,node:null,ia:null,effect:null,defines:null,uniforms:null}},100),this._stageItemsPools=new C$i.RecyclePool(function(){return new C$i.RecyclePool(function(){return{model:null,node:null,ia:null,effect:null,defines:null,passes:[],sortKey:-1,uniforms:null}},100)},16)}(C$t=C$a.prototype)._resetTextuerUnit=function(){this._usedTextureUnits=0},C$t._allocTextureUnit=function(){var C$t=this._device,C$e=this._usedTextureUnits;return C$e>=C$t._caps.maxTextureUnits&&console.warn("Trying to use "+C$e+" texture units while this GPU supports only "+C$t._caps.maxTextureUnits),this._usedTextureUnits+=1,C$e},C$t._registerStage=function(C$t,C$e){this._stage2fn[C$t]=C$e},C$t.clear=function(){this._programLib.clear(),this.reset()},C$t.reset=function(){this._viewPools.reset(),this._stageItemsPools.reset()},C$t._requestView=function(){return this._viewPools.add()},C$t._render=function(C$t,C$h){var C$e=this._device,C$i=(C$e.setFrameBuffer(C$t._framebuffer),C$e.setViewport(C$t._rect.x,C$t._rect.y,C$t._rect.w,C$t._rect.h),{});C$t._clearFlags&C$y.default.CLEAR_COLOR&&(C$i.color=C$g.Vec4.toArray([],C$t._color)),C$t._clearFlags&C$y.default.CLEAR_DEPTH&&(C$i.depth=C$t._depth),C$t._clearFlags&C$y.default.CLEAR_STENCIL&&(C$i.stencil=C$t._stencil),C$e.clear(C$i),this._drawItemsPools.reset();for(var C$n=0;C$n<C$h._models.length;++C$n){var C$u,C$_=C$h._models.data[C$n];0!=(C$_._cullingMask&C$t._cullingMask)&&(C$u=this._drawItemsPools.add(),C$_.extractDrawItem(C$u))}C$v.reset();for(var C$r=0;C$r<C$t._stages.length;++C$r){var C$d=C$t._stages[C$r],C$s=this._stageItemsPools.add();C$s.reset();for(var C$o=0;C$o<this._drawItemsPools.length;++C$o){var C$a,C$c=this._drawItemsPools.data[C$o],C$l=C$c.effect.stagePasses[C$d];C$l&&0!==C$l.length&&((C$a=C$s.add()).passes=C$l,C$a.model=C$c.model,C$a.node=C$c.node,C$a.ia=C$c.ia,C$a.effect=C$c.effect,C$a.defines=C$c.defines,C$a.sortKey=-1,C$a.uniforms=C$c.uniforms)}var C$f=C$v.add();C$f.stage=C$d,C$f.items=C$s}for(var C$p=0;C$p<C$v.length;++C$p){var C$m=C$v.data[C$p];(0,this._stage2fn[C$m.stage])(C$t,C$m.items)}},C$t._setProperty=function(C$t){var C$e=this._device,C$i=C$t.value;if(void 0!==(C$i=void 0===(C$i=void 0===C$i?C$t.val:C$i)?this._type2defaultValue[C$t.type]:C$i))if(C$t.type===C$y.default.PARAM_TEXTURE_2D||C$t.type===C$y.default.PARAM_TEXTURE_CUBE)if(Array.isArray(C$i))if(C$i.length>C$t.count)console.error("Failed to set property ["+C$t.name+"] : The length of texture array ["+C$i.length+"] is bigger than ["+C$t.count+"].");else{for(var C$n=C$b.add(),C$r=0;C$r<C$i.length;++C$r)C$n[C$r]=this._allocTextureUnit();C$e.setTextureArray(C$t.name,C$i,C$n)}else C$e.setTexture(C$t.name,C$i,this._allocTextureUnit());else C$t.directly?C$e.setUniformDirectly(C$t.name,C$i):C$e.setUniform(C$t.name,C$i);else console.warn("Failed to set technique property "+C$t.name+", value not found.")},C$t._draw=function(C$t){for(var C$e=this._device,C$h=this._programLib,C$u=C$t.node,C$i=C$t.ia,C$n=C$t.passes,C$_=C$t.effect,C$r=(C$C.reset(),C$S.reset(),C$T.reset(),C$w.reset(),C$x.reset(),C$E.reset(),C$M.reset(),C$I.reset(),C$B.reset(),C$b.reset(),C$u.getWorldMatrix(C$m),C$e.setUniform("cc_matWorld",C$g.Mat4.toArray(C$x.add(),C$m)),C$g.Mat4.invert(C$m,C$m),C$g.Mat4.transpose(C$m,C$m),C$e.setUniform("cc_matWorldIT",C$g.Mat4.toArray(C$x.add(),C$m)),this._defines),C$s=0;C$s<C$n.length;++C$s){for(var C$o=C$n[C$s],C$d=C$i.count,C$a=(C$i._vertexBuffer&&C$e.setVertexBuffer(0,C$i._vertexBuffer),C$i._indexBuffer&&C$e.setIndexBuffer(C$i._indexBuffer),C$e.setPrimitiveType(C$i._primitiveType),Object.setPrototypeOf(C$r,C$o._defines),C$h.getProgram(C$o._programName,C$r,C$_.name)),C$c=(C$e.setProgram(C$a),C$a._uniforms),C$f=C$o._properties,C$l=0;C$l<C$c.length;C$l++){var C$p=C$f[C$c[C$l].name];void 0!==C$p&&this._setProperty(C$p)}C$e.setCullMode(C$o._cullMode),C$o._blend&&(C$e.enableBlend(),C$e.setBlendFuncSep(C$o._blendSrc,C$o._blendDst,C$o._blendSrcAlpha,C$o._blendDstAlpha),C$e.setBlendEqSep(C$o._blendEq,C$o._blendAlphaEq),C$e.setBlendColor32(C$o._blendColor)),C$o._depthTest&&(C$e.enableDepthTest(),C$e.setDepthFunc(C$o._depthFunc)),C$o._depthWrite&&C$e.enableDepthWrite(),C$e.setStencilTest(C$o._stencilTest),C$o._stencilTest===C$A.default.STENCIL_ENABLE&&(C$e.setStencilFuncFront(C$o._stencilFuncFront,C$o._stencilRefFront,C$o._stencilMaskFront),C$e.setStencilOpFront(C$o._stencilFailOpFront,C$o._stencilZFailOpFront,C$o._stencilZPassOpFront,C$o._stencilWriteMaskFront),C$e.setStencilFuncBack(C$o._stencilFuncBack,C$o._stencilRefBack,C$o._stencilMaskBack),C$e.setStencilOpBack(C$o._stencilFailOpBack,C$o._stencilZFailOpBack,C$o._stencilZPassOpBack,C$o._stencilWriteMaskBack)),C$e.draw(C$i._start,C$d),this._resetTextuerUnit()}},C$e.default=C$a,C$r.exports=C$e.default},{"../../core/value-types":279,"../enums":307,"../gfx":312,"../memop":324,"./program-lib":304,"./view":306}],302:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$t=C$t("../gfx"))&&C$t.__esModule?C$t:{default:C$t};function C$r(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}C$t=C$a,(C$o=[{key:"count",get:function(){return-1!==this._count?this._count:this._indexBuffer?this._indexBuffer.count:this._vertexBuffer?this._vertexBuffer.count:0}}])&&C$r(C$t.prototype,C$o),C$s&&C$r(C$t,C$s);var C$s,C$o=C$a;function C$a(C$t,C$e,C$i){void 0===C$i&&(C$i=C$n.default.PT_TRIANGLES),this._vertexBuffer=C$t,this._indexBuffer=C$e,this._primitiveType=C$i,this._start=0,this._count=-1}C$i.default=C$o,C$e.exports=C$i.default},{"../gfx":312}],303:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$c=C$n(C$t("../gfx")),C$o=C$n(C$t("../enums")),C$a=C$n(C$t("../../core/value-types/value-type"));function C$n(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$l(C$t,C$e,C$i,C$n,C$r,C$s){void 0===C$r&&(C$r={}),void 0===C$s&&(C$s={}),this._name=C$t,this._detailName=C$e,this._programName=C$i,this._stage=C$n,this._properties=C$r,this._defines=C$s,this._cullMode=C$c.default.CULL_BACK,this._blend=!1,this._blendEq=C$c.default.BLEND_FUNC_ADD,this._blendAlphaEq=C$c.default.BLEND_FUNC_ADD,this._blendSrc=C$c.default.BLEND_SRC_ALPHA,this._blendDst=C$c.default.BLEND_ONE_MINUS_SRC_ALPHA,this._blendSrcAlpha=C$c.default.BLEND_SRC_ALPHA,this._blendDstAlpha=C$c.default.BLEND_ONE_MINUS_SRC_ALPHA,this._blendColor=4294967295,this._depthTest=!1,this._depthWrite=!1,this._depthFunc=C$c.default.DS_FUNC_LESS,this._stencilTest=C$c.default.STENCIL_INHERIT,this._stencilFuncFront=C$c.default.DS_FUNC_ALWAYS,this._stencilRefFront=0,this._stencilMaskFront=255,this._stencilFailOpFront=C$c.default.STENCIL_OP_KEEP,this._stencilZFailOpFront=C$c.default.STENCIL_OP_KEEP,this._stencilZPassOpFront=C$c.default.STENCIL_OP_KEEP,this._stencilWriteMaskFront=255,this._stencilFuncBack=C$c.default.DS_FUNC_ALWAYS,this._stencilRefBack=0,this._stencilMaskBack=255,this._stencilFailOpBack=C$c.default.STENCIL_OP_KEEP,this._stencilZFailOpBack=C$c.default.STENCIL_OP_KEEP,this._stencilZPassOpBack=C$c.default.STENCIL_OP_KEEP,this._stencilWriteMaskBack=255}(C$t=C$l.prototype).setCullMode=function(C$t){void 0===C$t&&(C$t=C$c.default.CULL_BACK),this._cullMode=C$t},C$t.setBlend=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){void 0===C$e&&(C$e=C$c.default.BLEND_FUNC_ADD),void 0===C$i&&(C$i=C$c.default.BLEND_SRC_ALPHA),void 0===C$n&&(C$n=C$c.default.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$r&&(C$r=C$c.default.BLEND_FUNC_ADD),void 0===C$s&&(C$s=C$c.default.BLEND_SRC_ALPHA),void 0===C$o&&(C$o=C$c.default.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$a&&(C$a=4294967295),this._blend=C$t=void 0===C$t?!1:C$t,this._blendEq=C$e,this._blendSrc=C$i,this._blendDst=C$n,this._blendAlphaEq=C$r,this._blendSrcAlpha=C$s,this._blendDstAlpha=C$o,this._blendColor=C$a},C$t.setDepth=function(C$t,C$e,C$i){void 0===C$e&&(C$e=!1),void 0===C$i&&(C$i=C$c.default.DS_FUNC_LESS),this._depthTest=C$t=void 0===C$t?!1:C$t,this._depthWrite=C$e,this._depthFunc=C$i},C$t.setStencilFront=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){void 0===C$t&&(C$t=C$c.default.STENCIL_INHERIT),void 0===C$e&&(C$e=C$c.default.DS_FUNC_ALWAYS),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=255),void 0===C$r&&(C$r=C$c.default.STENCIL_OP_KEEP),void 0===C$s&&(C$s=C$c.default.STENCIL_OP_KEEP),void 0===C$o&&(C$o=C$c.default.STENCIL_OP_KEEP),void 0===C$a&&(C$a=255),this._stencilTest=C$t,this._stencilFuncFront=C$e,this._stencilRefFront=C$i,this._stencilMaskFront=C$n,this._stencilFailOpFront=C$r,this._stencilZFailOpFront=C$s,this._stencilZPassOpFront=C$o,this._stencilWriteMaskFront=C$a},C$t.setStencilEnabled=function(C$t){void 0===C$t&&(C$t=C$c.default.STENCIL_INHERIT),this._stencilTest=C$t},C$t.setStencilBack=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){void 0===C$t&&(C$t=C$c.default.STENCIL_INHERIT),void 0===C$e&&(C$e=C$c.default.DS_FUNC_ALWAYS),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=255),void 0===C$r&&(C$r=C$c.default.STENCIL_OP_KEEP),void 0===C$s&&(C$s=C$c.default.STENCIL_OP_KEEP),void 0===C$o&&(C$o=C$c.default.STENCIL_OP_KEEP),void 0===C$a&&(C$a=255),this._stencilTest=C$t,this._stencilFuncBack=C$e,this._stencilRefBack=C$i,this._stencilMaskBack=C$n,this._stencilFailOpBack=C$r,this._stencilZFailOpBack=C$s,this._stencilZPassOpBack=C$o,this._stencilWriteMaskBack=C$a},C$t.setStage=function(C$t){this._stage=C$t},C$t.setProperties=function(C$t){this._properties=C$t},C$t.getProperty=function(C$t){if(this._properties[C$t])return this._properties[C$t].value},C$t.setProperty=function(C$t,C$e,C$i){var C$n=this._properties[C$t];if(!C$n)return!1;if(C$n.directly=C$i,Array.isArray(C$e)){var C$r=C$n.value;if(C$r.length!==C$e.length)return void cc.warnID(9105,this._name,C$t);for(var C$s=0;C$s<C$e.length;C$s++)C$r[C$s]=C$e[C$s]}else C$e&&!ArrayBuffer.isView(C$e)?C$n.type===C$o.default.PARAM_TEXTURE_2D?C$n.value=C$e.getImpl():C$e instanceof C$a.default?C$e.constructor.toArray(C$n.value,C$e):("object"==typeof C$e&&cc.warnID(9106,this._name,C$t),C$n.value=C$e):C$n.value=C$e;return!0},C$t.getDefine=function(C$t){return this._defines[C$t]},C$t.define=function(C$t,C$e,C$i){if(!C$i&&void 0===this._defines[C$t])return!1;return this._defines[C$t]=C$e,!0},C$t.clone=function(){var C$t,C$e=new C$l(this._programName),C$i=(Object.assign(C$e,this),{}),C$n=this._properties;for(C$t in C$n){var C$r,C$s=C$n[C$t],C$o=C$i[C$t]={},C$a=C$s.value;for(C$r in Array.isArray(C$a)?C$o.value=C$a.concat():ArrayBuffer.isView(C$a)?C$o.value=new C$a.__proto__.constructor(C$a):C$o.value=C$a,C$s)"value"!==C$r&&(C$o[C$r]=C$s[C$r])}return C$e._properties=C$i,C$e._defines=Object.assign({},this._defines),C$e},C$i.default=C$l,C$e.exports=C$i.default},{"../../core/value-types/value-type":287,"../enums":307,"../gfx":312}],304:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$h=(C$t=C$t("../gfx"))&&C$t.__esModule?C$t:{default:C$t};var C$y=0;function C$u(C$t,C$e,C$i){for(var C$n=C$t,C$r=0;C$r<C$e.length;C$r++){var C$s=C$e[C$r].name,C$o=C$i[C$s];Number.isInteger(C$o)&&(C$s=new RegExp(C$s,"g"),C$n=C$n.replace(C$s,C$o))}return C$n}function C$_(C$t){return C$t.replace(/#pragma for (\w+) in range\(\s*(\d+)\s*,\s*(\d+)\s*\)([\s\S]+?)#pragma endFor/g,function(C$t,C$e,C$i,C$n,C$r){var C$s="",C$i=parseInt(C$i),C$o=parseInt(C$n);(C$i.isNaN||C$o.isNaN)&&console.error("Unroll For Loops Error: begin and end of range must be an int num.");for(var C$a=C$i;C$a<C$o;++C$a)C$s+=C$r.replace(new RegExp("{"+C$e+"}","g"),C$a);return C$s})}function C$d(C$t){return C$t.replace(/\bhighp\b/g,"mediump")}function C$n(C$t){this._device=C$t,this._templates={},this._cache={},this._checkPrecision()}(C$t=C$n.prototype).clear=function(){this._templates={},this._cache={}},C$t.define=function(C$t){var C$e=C$t.name,C$i=C$t.defines,C$n=C$t.glsl1||C$t,C$h=C$n.vert,C$n=C$n.frag;if(!this._templates[C$e]){for(var C$u=++C$y,C$_=0,C$r=0;C$r<C$i.length;++C$r){var C$s,C$o=C$i[C$r],C$d=1;"number"===C$o.type?(C$s=C$o.range||[],C$o.min=C$s[0]||0,C$o.max=C$s[1]||4,C$d=Math.ceil(Math.log2(C$o.max-C$o.min)),C$o._map=function(C$t){return C$t-this.min<<this._offset}.bind(C$o)):C$o._map=function(C$t){return C$t?1<<this._offset:0}.bind(C$o),C$o._offset=C$_,C$_+=C$d}var C$a=C$t.uniforms||[];if(C$t.samplers)for(var C$f=0;C$f<C$t.samplers.length;C$f++)C$a.push(C$t.samplers[C$f]);if(C$t.blocks)for(var C$c=0;C$c<C$t.blocks.length;C$c++)for(var C$p=C$t.blocks[C$c].defines,C$m=C$t.blocks[C$c].members,C$l=0;C$l<C$m.length;C$l++)C$a.push({defines:C$p,name:C$m[C$l].name,type:C$m[C$l].type});this._templates[C$e]={id:C$u,name:C$e,vert:C$h,frag:C$n,defines:C$i,attributes:C$t.attributes,uniforms:C$a,extensions:C$t.extensions}}},C$t.getTemplate=function(C$t){return this._templates[C$t]},C$t.hasProgram=function(C$t){return void 0!==this._templates[C$t]},C$t.getKey=function(C$t,C$e){for(var C$i=this._templates[C$t],C$n=0,C$r=0;C$r<C$i.defines.length;++C$r){var C$s=C$i.defines[C$r],C$o=C$e[C$s.name];void 0!==C$o&&(C$n|=C$s._map(C$o))}return C$i.id+":"+C$n},C$t.getProgram=function(C$t,C$e,C$n){var C$i=this.getKey(C$t,C$e),C$r=this._cache[C$i];if(C$r)return C$r;var C$t=this._templates[C$t],C$s=function(C$t,C$e){for(var C$i=[],C$n=0;C$n<C$t.length;C$n++){var C$r=C$t[C$n].name,C$s=C$e[C$r];"number"!=typeof C$s&&(C$s=C$s?1:0),C$i.push("#define "+C$r+" "+C$s)}return C$i.join("\n")+"\n"}(C$t.defines,C$e),C$o=C$s+C$_(C$o=C$u(C$t.vert,C$t.defines,C$e));this._highpSupported||(C$o=C$d(C$o));C$s+=C$_(C$s=C$u(C$t.frag,C$t.defines,C$e));this._highpSupported||(C$s=C$d(C$s));var C$a,C$c,C$l,C$e=(C$r=new C$h.default.Program(this._device,{vert:C$o,frag:C$s})).link();return C$e&&(C$a=C$o.split("\n"),C$c=C$s.split("\n"),C$l=C$t.defines.length,C$e.forEach(function(C$t){var C$e=C$t.line-1,C$i=C$t.line-C$l,C$e=("vs"===C$t.type?C$a:C$c)[C$e],C$i=C$t.info||"Failed to compile "+C$t.type+" "+C$t.fileID+" (ln "+C$i+"): \n "+C$t.message+": \n  "+C$e;cc.error(C$n+" : "+C$i)})),this._cache[C$i]=C$r},C$t._checkPrecision=function(){var C$t,C$e=this._device._gl,C$i=!1;C$e.getShaderPrecisionFormat&&(C$t=C$e.getShaderPrecisionFormat(C$e.VERTEX_SHADER,C$e.HIGH_FLOAT),C$e=C$e.getShaderPrecisionFormat(C$e.FRAGMENT_SHADER,C$e.HIGH_FLOAT),C$i=C$t&&0<C$t.precision&&C$e&&0<C$e.precision),C$i||cc.warnID(9102),this._highpSupported=C$i},C$i.default=C$n,C$e.exports=C$i.default},{"../gfx":312}],305:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}C$i.__esModule=!0,C$i.default=void 0;C$a.prototype.clone=function(){for(var C$t=[],C$e=0;C$e<this._passes.length;C$e++)C$t.push(this._passes[C$e].clone());return new C$a(this._name,C$t)},C$r=C$a,(C$o=[{key:"name",get:function(){return this._name}},{key:"passes",get:function(){return this._passes}}])&&C$n(C$r.prototype,C$o),C$s&&C$n(C$r,C$s);var C$r,C$s,C$o=C$a;function C$a(C$t,C$e){this._name=C$t,this._passes=C$e}C$i.default=C$o,C$e.exports=C$i.default},{}],306:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$t("../../core/value-types"),C$r=(C$t=C$t("../enums"))&&C$t.__esModule?C$t:{default:C$t};var C$s=new C$n.Mat4,C$o=0;function C$a(){this._id=C$o++,this._priority=0,this._rect={x:0,y:0,w:1,h:1},this._color=new C$n.Vec4(.3,.3,.3,1),this._depth=1,this._stencil=0,this._clearFlags=C$r.default.CLEAR_COLOR|C$r.default.CLEAR_DEPTH,this._clearModel=null,this._matView=cc.mat4(),this._matViewInv=cc.mat4(),this._matProj=cc.mat4(),this._matViewProj=cc.mat4(),this._matInvViewProj=cc.mat4(),this._stages=[],this._cullingByID=!1,this._framebuffer=null,this._shadowLight=null,this._cullingMask=4294967295}(C$t=C$a.prototype).getForward=function(C$t){var C$e=this._matView.m;return C$n.Vec3.set(C$t,-C$e[2],-C$e[6],-C$e[10])},C$t.getPosition=function(C$t){return C$n.Mat4.invert(C$s,this._matView),C$n.Mat4.getTranslation(C$t,C$s)},C$i.default=C$a,C$e.exports=C$i.default},{"../../core/value-types":279,"../enums":307}],307:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=C$t("./build/mappings"),C$t={PROJ_PERSPECTIVE:0,PROJ_ORTHO:1,LIGHT_DIRECTIONAL:0,LIGHT_POINT:1,LIGHT_SPOT:2,LIGHT_AMBIENT:3,SHADOW_NONE:0,SHADOW_HARD:1,SHADOW_SOFT:2,PARAM_INT:C$t.typeMap.int,PARAM_INT2:C$t.typeMap.ivec2,PARAM_INT3:C$t.typeMap.ivec3,PARAM_INT4:C$t.typeMap.ivec4,PARAM_FLOAT:C$t.typeMap.float,PARAM_FLOAT2:C$t.typeMap.vec2,PARAM_FLOAT3:C$t.typeMap.vec3,PARAM_FLOAT4:C$t.typeMap.vec4,PARAM_MAT2:C$t.typeMap.mat2,PARAM_MAT3:C$t.typeMap.mat3,PARAM_MAT4:C$t.typeMap.mat4,PARAM_TEXTURE_2D:C$t.typeMap.sampler2D,PARAM_TEXTURE_CUBE:C$t.typeMap.samplerCube,CLEAR_COLOR:1,CLEAR_DEPTH:2,CLEAR_STENCIL:4,CLEAR_SKYBOX:8,BUFFER_VIEW_INT8:0,BUFFER_VIEW_UINT8:1,BUFFER_VIEW_INT16:2,BUFFER_VIEW_UINT16:3,BUFFER_VIEW_INT32:4,BUFFER_VIEW_UINT32:5,BUFFER_VIEW_FLOAT32:6};C$i.default=C$t,C$e.exports=C$i.default},{"./build/mappings":300}],308:[function(C$t,C$l,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$r=C$i(C$t("./state")),C$P=C$t("./enums"),C$h=C$i(C$t("./texture-2d")),C$u=C$i(C$t("./texture-cube"));function C$i(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$n(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}(C$t={})[5124]=function(C$t,C$e,C$i){C$t.uniform1i(C$e,C$i)},C$t[5126]=function(C$t,C$e,C$i){C$t.uniform1f(C$e,C$i)},C$t[35664]=function(C$t,C$e,C$i){C$t.uniform2fv(C$e,C$i)},C$t[35665]=function(C$t,C$e,C$i){C$t.uniform3fv(C$e,C$i)},C$t[35666]=function(C$t,C$e,C$i){C$t.uniform4fv(C$e,C$i)},C$t[35667]=function(C$t,C$e,C$i){C$t.uniform2iv(C$e,C$i)},C$t[35668]=function(C$t,C$e,C$i){C$t.uniform3iv(C$e,C$i)},C$t[35669]=function(C$t,C$e,C$i){C$t.uniform4iv(C$e,C$i)},C$t[35670]=function(C$t,C$e,C$i){C$t.uniform1i(C$e,C$i)},C$t[35671]=function(C$t,C$e,C$i){C$t.uniform2iv(C$e,C$i)},C$t[35672]=function(C$t,C$e,C$i){C$t.uniform3iv(C$e,C$i)},C$t[35673]=function(C$t,C$e,C$i){C$t.uniform4iv(C$e,C$i)},C$t[35674]=function(C$t,C$e,C$i){C$t.uniformMatrix2fv(C$e,!1,C$i)},C$t[35675]=function(C$t,C$e,C$i){C$t.uniformMatrix3fv(C$e,!1,C$i)},C$t[35676]=function(C$t,C$e,C$i){C$t.uniformMatrix4fv(C$e,!1,C$i)},C$t[35678]=function(C$t,C$e,C$i){C$t.uniform1i(C$e,C$i)},C$t[35680]=function(C$t,C$e,C$i){C$t.uniform1i(C$e,C$i)};var C$D=C$t,C$L=((C$t={})[5124]=function(C$t,C$e,C$i){C$t.uniform1iv(C$e,C$i)},C$t[5126]=function(C$t,C$e,C$i){C$t.uniform1fv(C$e,C$i)},C$t[35664]=function(C$t,C$e,C$i){C$t.uniform2fv(C$e,C$i)},C$t[35665]=function(C$t,C$e,C$i){C$t.uniform3fv(C$e,C$i)},C$t[35666]=function(C$t,C$e,C$i){C$t.uniform4fv(C$e,C$i)},C$t[35667]=function(C$t,C$e,C$i){C$t.uniform2iv(C$e,C$i)},C$t[35668]=function(C$t,C$e,C$i){C$t.uniform3iv(C$e,C$i)},C$t[35669]=function(C$t,C$e,C$i){C$t.uniform4iv(C$e,C$i)},C$t[35670]=function(C$t,C$e,C$i){C$t.uniform1iv(C$e,C$i)},C$t[35671]=function(C$t,C$e,C$i){C$t.uniform2iv(C$e,C$i)},C$t[35672]=function(C$t,C$e,C$i){C$t.uniform3iv(C$e,C$i)},C$t[35673]=function(C$t,C$e,C$i){C$t.uniform4iv(C$e,C$i)},C$t[35674]=function(C$t,C$e,C$i){C$t.uniformMatrix2fv(C$e,!1,C$i)},C$t[35675]=function(C$t,C$e,C$i){C$t.uniformMatrix3fv(C$e,!1,C$i)},C$t[35676]=function(C$t,C$e,C$i){C$t.uniformMatrix4fv(C$e,!1,C$i)},C$t[35678]=function(C$t,C$e,C$i){C$t.uniform1iv(C$e,C$i)},C$t[35680]=function(C$t,C$e,C$i){C$t.uniform1iv(C$e,C$i)},C$t);function C$o(C$t,C$e,C$i,C$n){void 0===C$n&&(C$n=0),C$i instanceof C$h.default?C$t.framebufferTexture2D(C$t.FRAMEBUFFER,C$e,C$t.TEXTURE_2D,C$i._glID,0):C$i instanceof C$u.default?C$t.framebufferTexture2D(C$t.FRAMEBUFFER,C$e,C$t.TEXTURE_CUBE_MAP_POSITIVE_X+C$n,C$i._glID,0):C$t.framebufferRenderbuffer(C$t.FRAMEBUFFER,C$e,C$t.RENDERBUFFER,C$i._glID)}C$t=C$c,(C$a=[{key:"caps",get:function(){return this._caps}}])&&C$n(C$t.prototype,C$a),C$s&&C$n(C$t,C$s),(C$a=C$c.prototype)._initExtensions=function(C$t){for(var C$e=this._gl,C$i=0;C$i<C$t.length;++C$i)for(var C$n=C$t[C$i],C$r=["","WEBKIT_","MOZ_"],C$s=0;C$s<C$r.length;C$s++)try{var C$o=C$e.getExtension(C$r[C$s]+C$n);if(C$o){this._extensions[C$n]=C$o;break}}catch(C$t){console.error(C$t)}},C$a._initCaps=function(){var C$t=this._gl,C$e=this.ext("WEBGL_draw_buffers");this._caps.maxVertexStreams=4,this._caps.maxVertexTextures=C$t.getParameter(C$t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._caps.maxFragUniforms=C$t.getParameter(C$t.MAX_FRAGMENT_UNIFORM_VECTORS),this._caps.maxTextureUnits=C$t.getParameter(C$t.MAX_TEXTURE_IMAGE_UNITS),this._caps.maxVertexAttribs=C$t.getParameter(C$t.MAX_VERTEX_ATTRIBS),this._caps.maxTextureSize=C$t.getParameter(C$t.MAX_TEXTURE_SIZE),this._caps.maxDrawBuffers=C$e?C$t.getParameter(C$e.MAX_DRAW_BUFFERS_WEBGL):1,this._caps.maxColorAttachments=C$e?C$t.getParameter(C$e.MAX_COLOR_ATTACHMENTS_WEBGL):1},C$a._initStates=function(){var C$t=this._gl;C$t.disable(C$t.BLEND),C$t.blendFunc(C$t.ONE,C$t.ZERO),C$t.blendEquation(C$t.FUNC_ADD),C$t.blendColor(1,1,1,1),C$t.colorMask(!0,!0,!0,!0),C$t.enable(C$t.CULL_FACE),C$t.cullFace(C$t.BACK),C$t.disable(C$t.DEPTH_TEST),C$t.depthFunc(C$t.LESS),C$t.depthMask(!1),C$t.disable(C$t.POLYGON_OFFSET_FILL),C$t.depthRange(0,1),C$t.disable(C$t.STENCIL_TEST),C$t.stencilFunc(C$t.ALWAYS,0,255),C$t.stencilMask(255),C$t.stencilOp(C$t.KEEP,C$t.KEEP,C$t.KEEP),C$t.clearDepth(1),C$t.clearColor(0,0,0,0),C$t.clearStencil(0),C$t.disable(C$t.SCISSOR_TEST)},C$a._restoreTexture=function(C$t){var C$e=this._gl,C$t=this._current.textureUnits[C$t];C$t&&-1!==C$t._glID?C$e.bindTexture(C$t._target,C$t._glID):C$e.bindTexture(C$e.TEXTURE_2D,null)},C$a._restoreIndexBuffer=function(){var C$t=this._gl,C$e=this._current.indexBuffer;C$e&&-1!==C$e._glID?C$t.bindBuffer(C$t.ELEMENT_ARRAY_BUFFER,C$e._glID):C$t.bindBuffer(C$t.ELEMENT_ARRAY_BUFFER,null)},C$a.ext=function(C$t){return this._extensions[C$t]},C$a.allowFloatTexture=function(){return null!=this.ext("OES_texture_float")},C$a.setFrameBuffer=function(C$t){if(this._framebuffer!==C$t){this._framebuffer=C$t;var C$e=this._gl;if(C$t){C$e.bindFramebuffer(C$e.FRAMEBUFFER,C$t._glID);for(var C$i=C$t._colors.length,C$n=0;C$n<C$i;++C$n){var C$r=C$t._colors[C$n];C$o(C$e,C$e.COLOR_ATTACHMENT0+C$n,C$r)}for(var C$s=C$i;C$s<this._caps.maxColorAttachments;++C$s)C$e.framebufferTexture2D(C$e.FRAMEBUFFER,C$e.COLOR_ATTACHMENT0+C$s,C$e.TEXTURE_2D,null,0);C$t._depth&&C$o(C$e,C$e.DEPTH_ATTACHMENT,C$t._depth),C$t._stencil&&C$o(C$e,C$e.STENCIL_ATTACHMENT,C$t._stencil),C$t._depthStencil&&C$o(C$e,C$e.DEPTH_STENCIL_ATTACHMENT,C$t._depthStencil)}else C$e.bindFramebuffer(C$e.FRAMEBUFFER,null)}},C$a.setViewport=function(C$t,C$e,C$i,C$n){this._vx===C$t&&this._vy===C$e&&this._vw===C$i&&this._vh===C$n||(this._gl.viewport(C$t,C$e,C$i,C$n),this._vx=C$t,this._vy=C$e,this._vw=C$i,this._vh=C$n)},C$a.setScissor=function(C$t,C$e,C$i,C$n){this._sx===C$t&&this._sy===C$e&&this._sw===C$i&&this._sh===C$n||(this._gl.scissor(C$t,C$e,C$i,C$n),this._sx=C$t,this._sy=C$e,this._sw=C$i,this._sh=C$n)},C$a.clear=function(C$t){var C$e,C$i;void 0===C$t.color&&void 0===C$t.depth&&void 0===C$t.stencil||(C$e=this._gl,void(C$i=0)!==C$t.color&&(C$i|=C$e.COLOR_BUFFER_BIT,C$e.clearColor(C$t.color[0],C$t.color[1],C$t.color[2],C$t.color[3])),void 0!==C$t.depth&&(C$i|=C$e.DEPTH_BUFFER_BIT,C$e.clearDepth(C$t.depth),C$e.enable(C$e.DEPTH_TEST),C$e.depthMask(!0),C$e.depthFunc(C$e.ALWAYS)),void 0!==C$t.stencil&&(C$i|=C$e.STENCIL_BUFFER_BIT,C$e.clearStencil(C$t.stencil)),C$e.clear(C$i),void 0!==C$t.depth&&(!1===this._current.depthTest?C$e.disable(C$e.DEPTH_TEST):(!1===this._current.depthWrite&&C$e.depthMask(!1),this._current.depthFunc!==C$P.enums.DS_FUNC_ALWAYS&&C$e.depthFunc(this._current.depthFunc))))},C$a.enableBlend=function(){this._next.blend=!0},C$a.enableDepthTest=function(){this._next.depthTest=!0},C$a.enableDepthWrite=function(){this._next.depthWrite=!0},C$a.setStencilTest=function(C$t){this._next.stencilTest=C$t},C$a.setStencilFunc=function(C$t,C$e,C$i){this._next.stencilSep=!1,this._next.stencilFuncFront=this._next.stencilFuncBack=C$t,this._next.stencilRefFront=this._next.stencilRefBack=C$e,this._next.stencilMaskFront=this._next.stencilMaskBack=C$i},C$a.setStencilFuncFront=function(C$t,C$e,C$i){this._next.stencilSep=!0,this._next.stencilFuncFront=C$t,this._next.stencilRefFront=C$e,this._next.stencilMaskFront=C$i},C$a.setStencilFuncBack=function(C$t,C$e,C$i){this._next.stencilSep=!0,this._next.stencilFuncBack=C$t,this._next.stencilRefBack=C$e,this._next.stencilMaskBack=C$i},C$a.setStencilOp=function(C$t,C$e,C$i,C$n){this._next.stencilFailOpFront=this._next.stencilFailOpBack=C$t,this._next.stencilZFailOpFront=this._next.stencilZFailOpBack=C$e,this._next.stencilZPassOpFront=this._next.stencilZPassOpBack=C$i,this._next.stencilWriteMaskFront=this._next.stencilWriteMaskBack=C$n},C$a.setStencilOpFront=function(C$t,C$e,C$i,C$n){this._next.stencilSep=!0,this._next.stencilFailOpFront=C$t,this._next.stencilZFailOpFront=C$e,this._next.stencilZPassOpFront=C$i,this._next.stencilWriteMaskFront=C$n},C$a.setStencilOpBack=function(C$t,C$e,C$i,C$n){this._next.stencilSep=!0,this._next.stencilFailOpBack=C$t,this._next.stencilZFailOpBack=C$e,this._next.stencilZPassOpBack=C$i,this._next.stencilWriteMaskBack=C$n},C$a.setDepthFunc=function(C$t){this._next.depthFunc=C$t},C$a.setBlendColor32=function(C$t){this._next.blendColor=C$t},C$a.setBlendColor=function(C$t,C$e,C$i,C$n){this._next.blendColor=(255*C$t<<24|255*C$e<<16|255*C$i<<8|255*C$n)>>>0},C$a.setBlendFunc=function(C$t,C$e){this._next.blendSep=!1,this._next.blendSrc=C$t,this._next.blendDst=C$e},C$a.setBlendFuncSep=function(C$t,C$e,C$i,C$n){this._next.blendSep=!0,this._next.blendSrc=C$t,this._next.blendDst=C$e,this._next.blendSrcAlpha=C$i,this._next.blendDstAlpha=C$n},C$a.setBlendEq=function(C$t){this._next.blendSep=!1,this._next.blendEq=C$t},C$a.setBlendEqSep=function(C$t,C$e){this._next.blendSep=!0,this._next.blendEq=C$t,this._next.blendAlphaEq=C$e},C$a.setCullMode=function(C$t){this._next.cullMode=C$t},C$a.setVertexBuffer=function(C$t,C$e,C$i){void 0===C$i&&(C$i=0),this._next.vertexBuffers[C$t]=C$e,this._next.vertexBufferOffsets[C$t]=C$i,this._next.maxStream<C$t&&(this._next.maxStream=C$t)},C$a.setIndexBuffer=function(C$t){this._next.indexBuffer=C$t},C$a.setProgram=function(C$t){this._next.program=C$t},C$a.setTexture=function(C$t,C$e,C$i){C$i>=this._caps.maxTextureUnits?console.warn("Can not set texture "+C$t+" at stage "+C$i+", max texture exceed: "+this._caps.maxTextureUnits):(this._next.textureUnits[C$i]=C$e,this.setUniform(C$t,C$i),this._next.maxTextureSlot<C$i&&(this._next.maxTextureSlot=C$i))},C$a.setTextureArray=function(C$t,C$e,C$i){var C$n=C$e.length;if(C$n>=this._caps.maxTextureUnits)console.warn("Can not set "+C$n+" textures for "+C$t+", max texture exceed: "+this._caps.maxTextureUnits);else{for(var C$r=0;C$r<C$n;++C$r){var C$s=C$i[C$r];this._next.textureUnits[C$s]=C$e[C$r],this._next.maxTextureSlot<C$s&&(this._next.maxTextureSlot=C$s)}this.setUniform(C$t,C$i)}},C$a.setUniform=function(C$t,C$e){for(var C$i=this._uniforms[C$t],C$n=!1,C$h=!1,C$r=!1,C$s=!1;C$i&&(C$r=Array.isArray(C$e)||C$e instanceof Float32Array,C$s=C$e instanceof Int32Array,C$i.isArray===(C$h=C$r||C$s)&&(!C$i.isArray||C$i.value.length===C$e.length)&&(C$n=!0,0)););if(C$n){var C$o=C$i.value,C$a=!1;if(C$i.isArray)for(var C$c=0,C$u=C$o.length;C$c<C$u;C$c++)C$o[C$c]!==C$e[C$c]&&(C$a=!0,C$o[C$c]=C$e[C$c]);else C$o!==C$e&&(C$a=!0,C$i.value=C$e);C$a&&(C$i.dirty=!0)}else{var C$l=C$e;C$r?C$l=new Float32Array(C$e):C$s&&(C$l=new Int32Array(C$e)),C$i={dirty:!0,value:C$l,isArray:C$h}}this._uniforms[C$t]=C$i},C$a.setUniformDirectly=function(C$t,C$e){var C$i=this._uniforms[C$t];C$i||(this._uniforms[C$t]=C$i={}),C$i.dirty=!0,C$i.value=C$e},C$a.setPrimitiveType=function(C$t){this._next.primitiveType=C$t},C$a.resetDrawCalls=function(){this._stats.drawcalls=0},C$a.getDrawCalls=function(){return this._stats.drawcalls},C$a.draw=function(C$h,C$u){var C$t,C$e,C$i,C$n=this._gl,C$r=this._current,C$s=this._next,C$o=(!function(C$t,C$e,C$i){if(C$e.blend!==C$i.blend)return C$i.blend?(C$t.enable(C$t.BLEND),C$i.blendSrc!==C$P.enums.BLEND_CONSTANT_COLOR&&C$i.blendSrc!==C$P.enums.BLEND_ONE_MINUS_CONSTANT_COLOR&&C$i.blendDst!==C$P.enums.BLEND_CONSTANT_COLOR&&C$i.blendDst!==C$P.enums.BLEND_ONE_MINUS_CONSTANT_COLOR||C$t.blendColor((C$i.blendColor>>24)/255,(C$i.blendColor>>16&255)/255,(C$i.blendColor>>8&255)/255,(255&C$i.blendColor)/255),C$i.blendSep?(C$t.blendFuncSeparate(C$i.blendSrc,C$i.blendDst,C$i.blendSrcAlpha,C$i.blendDstAlpha),C$t.blendEquationSeparate(C$i.blendEq,C$i.blendAlphaEq)):(C$t.blendFunc(C$i.blendSrc,C$i.blendDst),C$t.blendEquation(C$i.blendEq))):C$t.disable(C$t.BLEND);!1!==C$i.blend&&(C$e.blendColor!==C$i.blendColor&&C$t.blendColor((C$i.blendColor>>24)/255,(C$i.blendColor>>16&255)/255,(C$i.blendColor>>8&255)/255,(255&C$i.blendColor)/255),C$e.blendSep===C$i.blendSep?C$i.blendSep?(C$e.blendSrc===C$i.blendSrc&&C$e.blendDst===C$i.blendDst&&C$e.blendSrcAlpha===C$i.blendSrcAlpha&&C$e.blendDstAlpha===C$i.blendDstAlpha||C$t.blendFuncSeparate(C$i.blendSrc,C$i.blendDst,C$i.blendSrcAlpha,C$i.blendDstAlpha),C$e.blendEq===C$i.blendEq&&C$e.blendAlphaEq===C$i.blendAlphaEq||C$t.blendEquationSeparate(C$i.blendEq,C$i.blendAlphaEq)):(C$e.blendSrc===C$i.blendSrc&&C$e.blendDst===C$i.blendDst||C$t.blendFunc(C$i.blendSrc,C$i.blendDst),C$e.blendEq!==C$i.blendEq&&C$t.blendEquation(C$i.blendEq)):C$i.blendSep?(C$t.blendFuncSeparate(C$i.blendSrc,C$i.blendDst,C$i.blendSrcAlpha,C$i.blendDstAlpha),C$t.blendEquationSeparate(C$i.blendEq,C$i.blendAlphaEq)):(C$t.blendFunc(C$i.blendSrc,C$i.blendDst),C$t.blendEquation(C$i.blendEq)))}(C$n,C$r,C$s),function(C$t,C$e,C$i){if(C$e.depthTest!==C$i.depthTest)return C$i.depthTest?(C$t.enable(C$t.DEPTH_TEST),C$t.depthFunc(C$i.depthFunc),C$t.depthMask(C$i.depthWrite)):C$t.disable(C$t.DEPTH_TEST);C$e.depthWrite!==C$i.depthWrite&&C$t.depthMask(C$i.depthWrite),!1!==C$i.depthTest?C$e.depthFunc!==C$i.depthFunc&&C$t.depthFunc(C$i.depthFunc):C$i.depthWrite&&(C$i.depthTest=!0,C$i.depthFunc=C$P.enums.DS_FUNC_ALWAYS,C$t.enable(C$t.DEPTH_TEST),C$t.depthFunc(C$i.depthFunc))}(C$n,C$r,C$s),C$i=C$n,C$e=C$r,(C$t=C$s).stencilTest!==C$P.enums.STENCIL_INHERIT&&(C$t.stencilTest!==C$e.stencilTest?C$t.stencilTest===C$P.enums.STENCIL_DISABLE?C$i.disable(C$i.STENCIL_TEST):(C$i.enable(C$i.STENCIL_TEST),C$t.stencilSep?(C$i.stencilFuncSeparate(C$i.FRONT,C$t.stencilFuncFront,C$t.stencilRefFront,C$t.stencilMaskFront),C$i.stencilMaskSeparate(C$i.FRONT,C$t.stencilWriteMaskFront),C$i.stencilOpSeparate(C$i.FRONT,C$t.stencilFailOpFront,C$t.stencilZFailOpFront,C$t.stencilZPassOpFront),C$i.stencilFuncSeparate(C$i.BACK,C$t.stencilFuncBack,C$t.stencilRefBack,C$t.stencilMaskBack),C$i.stencilMaskSeparate(C$i.BACK,C$t.stencilWriteMaskBack),C$i.stencilOpSeparate(C$i.BACK,C$t.stencilFailOpBack,C$t.stencilZFailOpBack,C$t.stencilZPassOpBack)):(C$i.stencilFunc(C$t.stencilFuncFront,C$t.stencilRefFront,C$t.stencilMaskFront),C$i.stencilMask(C$t.stencilWriteMaskFront),C$i.stencilOp(C$t.stencilFailOpFront,C$t.stencilZFailOpFront,C$t.stencilZPassOpFront))):C$t.stencilTest!==C$P.enums.STENCIL_DISABLE&&(C$e.stencilSep===C$t.stencilSep?C$t.stencilSep?(C$e.stencilFuncFront===C$t.stencilFuncFront&&C$e.stencilRefFront===C$t.stencilRefFront&&C$e.stencilMaskFront===C$t.stencilMaskFront||C$i.stencilFuncSeparate(C$i.FRONT,C$t.stencilFuncFront,C$t.stencilRefFront,C$t.stencilMaskFront),C$e.stencilWriteMaskFront!==C$t.stencilWriteMaskFront&&C$i.stencilMaskSeparate(C$i.FRONT,C$t.stencilWriteMaskFront),C$e.stencilFailOpFront===C$t.stencilFailOpFront&&C$e.stencilZFailOpFront===C$t.stencilZFailOpFront&&C$e.stencilZPassOpFront===C$t.stencilZPassOpFront||C$i.stencilOpSeparate(C$i.FRONT,C$t.stencilFailOpFront,C$t.stencilZFailOpFront,C$t.stencilZPassOpFront),C$e.stencilFuncBack===C$t.stencilFuncBack&&C$e.stencilRefBack===C$t.stencilRefBack&&C$e.stencilMaskBack===C$t.stencilMaskBack||C$i.stencilFuncSeparate(C$i.BACK,C$t.stencilFuncBack,C$t.stencilRefBack,C$t.stencilMaskBack),C$e.stencilWriteMaskBack!==C$t.stencilWriteMaskBack&&C$i.stencilMaskSeparate(C$i.BACK,C$t.stencilWriteMaskBack),C$e.stencilFailOpBack===C$t.stencilFailOpBack&&C$e.stencilZFailOpBack===C$t.stencilZFailOpBack&&C$e.stencilZPassOpBack===C$t.stencilZPassOpBack||C$i.stencilOpSeparate(C$i.BACK,C$t.stencilFailOpBack,C$t.stencilZFailOpBack,C$t.stencilZPassOpBack)):(C$e.stencilFuncFront===C$t.stencilFuncFront&&C$e.stencilRefFront===C$t.stencilRefFront&&C$e.stencilMaskFront===C$t.stencilMaskFront||C$i.stencilFunc(C$t.stencilFuncFront,C$t.stencilRefFront,C$t.stencilMaskFront),C$e.stencilWriteMaskFront!==C$t.stencilWriteMaskFront&&C$i.stencilMask(C$t.stencilWriteMaskFront),C$e.stencilFailOpFront===C$t.stencilFailOpFront&&C$e.stencilZFailOpFront===C$t.stencilZFailOpFront&&C$e.stencilZPassOpFront===C$t.stencilZPassOpFront||C$i.stencilOp(C$t.stencilFailOpFront,C$t.stencilZFailOpFront,C$t.stencilZPassOpFront)):C$t.stencilSep?(C$i.stencilFuncSeparate(C$i.FRONT,C$t.stencilFuncFront,C$t.stencilRefFront,C$t.stencilMaskFront),C$i.stencilMaskSeparate(C$i.FRONT,C$t.stencilWriteMaskFront),C$i.stencilOpSeparate(C$i.FRONT,C$t.stencilFailOpFront,C$t.stencilZFailOpFront,C$t.stencilZPassOpFront),C$i.stencilFuncSeparate(C$i.BACK,C$t.stencilFuncBack,C$t.stencilRefBack,C$t.stencilMaskBack),C$i.stencilMaskSeparate(C$i.BACK,C$t.stencilWriteMaskBack),C$i.stencilOpSeparate(C$i.BACK,C$t.stencilFailOpBack,C$t.stencilZFailOpBack,C$t.stencilZPassOpBack)):(C$i.stencilFunc(C$t.stencilFuncFront,C$t.stencilRefFront,C$t.stencilMaskFront),C$i.stencilMask(C$t.stencilWriteMaskFront),C$i.stencilOp(C$t.stencilFailOpFront,C$t.stencilZFailOpFront,C$t.stencilZPassOpFront)))),C$e=C$n,C$i=C$s,C$r.cullMode!==C$i.cullMode&&(C$i.cullMode!==C$P.enums.CULL_NONE?(C$e.enable(C$e.CULL_FACE),C$e.cullFace(C$i.cullMode)):C$e.disable(C$e.CULL_FACE)),this),C$_=C$n,C$d=C$r,C$a=C$s,C$f=!1;if(-1!==C$a.maxStream){if(C$d.maxStream!==C$a.maxStream)C$f=!0;else if(C$d.program!==C$a.program)C$f=!0;else for(var C$p=0;C$p<C$a.maxStream+1;++C$p)if(C$d.vertexBuffers[C$p]!==C$a.vertexBuffers[C$p]||C$d.vertexBufferOffsets[C$p]!==C$a.vertexBufferOffsets[C$p]){C$f=!0;break}if(C$f){for(var C$m=0;C$m<C$o._caps.maxVertexAttribs;++C$m)C$o._newAttributes[C$m]=0;for(var C$y=0;C$y<C$a.maxStream+1;++C$y){var C$g=C$a.vertexBuffers[C$y],C$v=C$a.vertexBufferOffsets[C$y];if(C$g&&-1!==C$g._glID){C$_.bindBuffer(C$_.ARRAY_BUFFER,C$g._glID);for(var C$x=0;C$x<C$a.program._attributes.length;++C$x){var C$c=C$a.program._attributes[C$x],C$l=C$g._format.element(C$c.name);C$l?(0===C$o._enabledAttributes[C$c.location]&&(C$_.enableVertexAttribArray(C$c.location),C$o._enabledAttributes[C$c.location]=1),C$o._newAttributes[C$c.location]=1,C$_.vertexAttribPointer(C$c.location,C$l.num,C$l.type,C$l.normalize,C$l.stride,C$l.offset+C$v*C$l.stride)):console.warn("Can not find vertex attribute: "+C$c.name)}}}for(var C$b=0;C$b<C$o._caps.maxVertexAttribs;++C$b)C$o._enabledAttributes[C$b]!==C$o._newAttributes[C$b]&&(C$_.disableVertexAttribArray(C$b),C$o._enabledAttributes[C$b]=0)}}C$r.indexBuffer!==C$s.indexBuffer&&C$n.bindBuffer(C$n.ELEMENT_ARRAY_BUFFER,C$s.indexBuffer&&-1!==C$s.indexBuffer._glID?C$s.indexBuffer._glID:null);for(var C$A,C$C=!1,C$S=(C$r.program!==C$s.program&&(C$s.program._linked?C$n.useProgram(C$s.program._glID):console.warn("Failed to use program: has not linked yet."),C$C=!0),C$n),C$T=C$r,C$w=C$s,C$E=0;C$E<C$w.maxTextureSlot+1;++C$E)C$T.textureUnits[C$E]===C$w.textureUnits[C$E]||(C$A=C$w.textureUnits[C$E])&&-1!==C$A._glID&&(C$S.activeTexture(C$S.TEXTURE0+C$E),C$S.bindTexture(C$A._target,C$A._glID));for(var C$M=0;C$M<C$s.program._uniforms.length;++C$M){var C$I,C$B=C$s.program._uniforms[C$M],C$R=this._uniforms[C$B.name];C$R&&(C$C||C$R.dirty)&&(C$R.dirty=!1,(C$I=(void 0===C$B.size?C$D:C$L)[C$B.type])?C$I(C$n,C$B.location,C$R.value):console.warn("Can not find commit function for uniform "+C$B.name))}C$u&&(C$s.indexBuffer?C$n.drawElements(this._next.primitiveType,C$u,C$s.indexBuffer._format,C$h*C$s.indexBuffer._bytesPerIndex):C$n.drawArrays(this._next.primitiveType,C$h,C$u),this._stats.drawcalls++),C$r.set(C$s),C$s.reset()};var C$s,C$a,C$t=C$c;function C$c(C$t,C$e){var C$i;void 0===(C$e=C$e||{}).alpha&&(C$e.alpha=!1),void 0===C$e.stencil&&(C$e.stencil=!0),void 0===C$e.depth&&(C$e.depth=!0),void 0===C$e.antialias&&(C$e.antialias=!1),void 0===C$e.preserveDrawingBuffer&&(C$e.preserveDrawingBuffer=!1);try{C$i=C$t.getContext("webgl",C$e)||C$t.getContext("experimental-webgl",C$e)||C$t.getContext("webkit-3d",C$e)||C$t.getContext("moz-webgl",C$e)}catch(C$t){return void console.error(C$t)}C$i||console.error("This device does not support webgl"),this._gl=C$i,this._extensions={},this._caps={},this._stats={texture:0,vb:0,ib:0,drawcalls:0},this._initExtensions(["EXT_texture_filter_anisotropic","EXT_shader_texture_lod","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","WEBGL_draw_buffers"]),this._initCaps(),this._initStates(),C$r.default.initDefault(this),this._current=new C$r.default(this),this._next=new C$r.default(this),this._uniforms={},this._vx=this._vy=this._vw=this._vh=0,this._sx=this._sy=this._sw=this._sh=0,this._framebuffer=null,this._enabledAttributes=new Array(this._caps.maxVertexAttribs),this._newAttributes=new Array(this._caps.maxVertexAttribs);for(var C$n=0;C$n<this._caps.maxVertexAttribs;++C$n)this._enabledAttributes[C$n]=0,this._newAttributes[C$n]=0}C$e.default=C$t,C$l.exports=C$e.default},{"./enums":309,"./state":316,"./texture-2d":317,"./texture-cube":318}],309:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.attrTypeBytes=function(C$t){return C$t===C$s.ATTR_TYPE_INT8||C$t===C$s.ATTR_TYPE_UINT8?1:C$t===C$s.ATTR_TYPE_INT16||C$t===C$s.ATTR_TYPE_UINT16?2:C$t===C$s.ATTR_TYPE_INT32||C$t===C$s.ATTR_TYPE_UINT32||C$t===C$s.ATTR_TYPE_FLOAT32?4:(console.warn("Unknown ATTR_TYPE: "+C$t),0)},C$i.glFilter=function(C$t,C$e,C$i){void 0===C$i&&(C$i=-1);var C$n=C$r[C$e][C$i+1];return void 0!==C$n?C$n:(console.warn("Unknown FILTER: "+C$e),-1===C$i?C$t.LINEAR:C$t.LINEAR_MIPMAP_LINEAR)},C$i.glTextureFmt=function(C$t){var C$e=C$n[C$t];return void 0!==C$e?C$e:(console.warn("Unknown TEXTURE_FMT: "+C$t),C$n[C$s.TEXTURE_FMT_RGBA8])},C$i.enums=void 0;var C$r=[[9728,9984,9986],[9729,9985,9987]],C$n=[{format:6407,internalFormat:33776,pixelType:null},{format:6408,internalFormat:33777,pixelType:null},{format:6408,internalFormat:33778,pixelType:null},{format:6408,internalFormat:33779,pixelType:null},{format:6407,internalFormat:36196,pixelType:null},{format:6407,internalFormat:35841,pixelType:null},{format:6408,internalFormat:35843,pixelType:null},{format:6407,internalFormat:35840,pixelType:null},{format:6408,internalFormat:35842,pixelType:null},{format:6406,internalFormat:6406,pixelType:5121},{format:6409,internalFormat:6409,pixelType:5121},{format:6410,internalFormat:6410,pixelType:5121},{format:6407,internalFormat:6407,pixelType:33635},{format:6408,internalFormat:6408,pixelType:32820},{format:6408,internalFormat:6408,pixelType:32819},{format:6407,internalFormat:6407,pixelType:5121},{format:6408,internalFormat:6408,pixelType:5121},{format:6407,internalFormat:6407,pixelType:36193},{format:6408,internalFormat:6408,pixelType:36193},{format:6407,internalFormat:6407,pixelType:5126},{format:6408,internalFormat:6408,pixelType:5126},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:6402,internalFormat:6402,pixelType:5123},{format:6402,internalFormat:6402,pixelType:5125},{format:6402,internalFormat:6402,pixelType:5125},{format:6407,internalFormat:37492,pixelType:null},{format:6408,internalFormat:37496,pixelType:null}],C$s={USAGE_STATIC:35044,USAGE_DYNAMIC:35048,USAGE_STREAM:35040,INDEX_FMT_UINT8:5121,INDEX_FMT_UINT16:5123,INDEX_FMT_UINT32:5125,ATTR_POSITION:"a_position",ATTR_NORMAL:"a_normal",ATTR_TANGENT:"a_tangent",ATTR_BITANGENT:"a_bitangent",ATTR_WEIGHTS:"a_weights",ATTR_JOINTS:"a_joints",ATTR_COLOR:"a_color",ATTR_COLOR0:"a_color0",ATTR_COLOR1:"a_color1",ATTR_UV:"a_uv",ATTR_UV0:"a_uv0",ATTR_UV1:"a_uv1",ATTR_UV2:"a_uv2",ATTR_UV3:"a_uv3",ATTR_UV4:"a_uv4",ATTR_UV5:"a_uv5",ATTR_UV6:"a_uv6",ATTR_UV7:"a_uv7",ATTR_TEX_COORD:"a_texCoord",ATTR_TEX_COORD1:"a_texCoord1",ATTR_TEX_COORD2:"a_texCoord2",ATTR_TEX_COORD3:"a_texCoord3",ATTR_TEX_COORD4:"a_texCoord4",ATTR_TEX_COORD5:"a_texCoord5",ATTR_TEX_COORD6:"a_texCoord6",ATTR_TEX_COORD7:"a_texCoord7",ATTR_TEX_COORD8:"a_texCoord8",ATTR_TYPE_INT8:5120,ATTR_TYPE_UINT8:5121,ATTR_TYPE_INT16:5122,ATTR_TYPE_UINT16:5123,ATTR_TYPE_INT32:5124,ATTR_TYPE_UINT32:5125,ATTR_TYPE_FLOAT32:5126,FILTER_NEAREST:0,FILTER_LINEAR:1,WRAP_REPEAT:10497,WRAP_CLAMP:33071,WRAP_MIRROR:33648,TEXTURE_FMT_RGB_DXT1:0,TEXTURE_FMT_RGBA_DXT1:1,TEXTURE_FMT_RGBA_DXT3:2,TEXTURE_FMT_RGBA_DXT5:3,TEXTURE_FMT_RGB_ETC1:4,TEXTURE_FMT_RGB_PVRTC_2BPPV1:5,TEXTURE_FMT_RGBA_PVRTC_2BPPV1:6,TEXTURE_FMT_RGB_PVRTC_4BPPV1:7,TEXTURE_FMT_RGBA_PVRTC_4BPPV1:8,TEXTURE_FMT_A8:9,TEXTURE_FMT_L8:10,TEXTURE_FMT_L8_A8:11,TEXTURE_FMT_R5_G6_B5:12,TEXTURE_FMT_R5_G5_B5_A1:13,TEXTURE_FMT_R4_G4_B4_A4:14,TEXTURE_FMT_RGB8:15,TEXTURE_FMT_RGBA8:16,TEXTURE_FMT_RGB16F:17,TEXTURE_FMT_RGBA16F:18,TEXTURE_FMT_RGB32F:19,TEXTURE_FMT_RGBA32F:20,TEXTURE_FMT_R32F:21,TEXTURE_FMT_111110F:22,TEXTURE_FMT_SRGB:23,TEXTURE_FMT_SRGBA:24,TEXTURE_FMT_D16:25,TEXTURE_FMT_D32:26,TEXTURE_FMT_D24S8:27,TEXTURE_FMT_RGB_ETC2:28,TEXTURE_FMT_RGBA_ETC2:29,DS_FUNC_NEVER:512,DS_FUNC_LESS:513,DS_FUNC_EQUAL:514,DS_FUNC_LEQUAL:515,DS_FUNC_GREATER:516,DS_FUNC_NOTEQUAL:517,DS_FUNC_GEQUAL:518,DS_FUNC_ALWAYS:519,RB_FMT_RGBA4:32854,RB_FMT_RGB5_A1:32855,RB_FMT_RGB565:36194,RB_FMT_D16:33189,RB_FMT_S8:36168,RB_FMT_D24S8:34041,BLEND_FUNC_ADD:32774,BLEND_FUNC_SUBTRACT:32778,BLEND_FUNC_REVERSE_SUBTRACT:32779,BLEND_ZERO:0,BLEND_ONE:1,BLEND_SRC_COLOR:768,BLEND_ONE_MINUS_SRC_COLOR:769,BLEND_DST_COLOR:774,BLEND_ONE_MINUS_DST_COLOR:775,BLEND_SRC_ALPHA:770,BLEND_ONE_MINUS_SRC_ALPHA:771,BLEND_DST_ALPHA:772,BLEND_ONE_MINUS_DST_ALPHA:773,BLEND_CONSTANT_COLOR:32769,BLEND_ONE_MINUS_CONSTANT_COLOR:32770,BLEND_CONSTANT_ALPHA:32771,BLEND_ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_SRC_ALPHA_SATURATE:776,STENCIL_DISABLE:0,STENCIL_ENABLE:1,STENCIL_INHERIT:2,STENCIL_OP_KEEP:7680,STENCIL_OP_ZERO:0,STENCIL_OP_REPLACE:7681,STENCIL_OP_INCR:7682,STENCIL_OP_INCR_WRAP:34055,STENCIL_OP_DECR:7683,STENCIL_OP_DECR_WRAP:34056,STENCIL_OP_INVERT:5386,CULL_NONE:0,CULL_FRONT:1028,CULL_BACK:1029,CULL_FRONT_AND_BACK:1032,PT_POINTS:0,PT_LINES:1,PT_LINE_LOOP:2,PT_LINE_STRIP:3,PT_TRIANGLES:4,PT_TRIANGLE_STRIP:5,PT_TRIANGLE_FAN:6};C$i.enums=C$s},{}],310:[function(C$t,C$e,C$i){"use strict";var C$n;function C$r(C$t,C$e,C$i,C$n){this._device=C$t,this._width=C$e,this._height=C$i,this._colors=C$n.colors||[],this._depth=C$n.depth||null,this._stencil=C$n.stencil||null,this._depthStencil=C$n.depthStencil||null,this._glID=C$t._gl.createFramebuffer()}C$i.__esModule=!0,C$i.default=void 0,(C$n=C$r.prototype).destroy=function(){null!==this._glID?(this._device._gl.deleteFramebuffer(this._glID),this._glID=null):console.error("The frame-buffer already destroyed")},C$n.getHandle=function(){return this._glID},C$i.default=C$r,C$e.exports=C$i.default},{}],311:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t=C$t("./enums");function C$n(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}(C$o={})[C$t.enums.INDEX_FMT_UINT8]=1,C$o[C$t.enums.INDEX_FMT_UINT16]=2,C$o[C$t.enums.INDEX_FMT_UINT32]=4;var C$r,C$s=C$o,C$o=((C$t=C$a.prototype).destroy=function(){-1!==this._glID?(this._device._gl.deleteBuffer(this._glID),this._device._stats.ib-=this.bytes,this._glID=-1):console.error("The buffer already destroyed")},C$t.update=function(C$t,C$e){if(-1!==this._glID){if(0!==C$e.byteLength){if(C$t+C$e.byteLength>this._bytes){if(C$t)return void console.error("Failed to update data, bytes exceed.");this._needExpandDataStore=!0,this._bytes=C$t+C$e.byteLength,this._numIndices=this._bytes/this._bytesPerIndex}var C$i=this._device._gl,C$n=this._usage;C$i.bindBuffer(C$i.ELEMENT_ARRAY_BUFFER,this._glID),this._needExpandDataStore?(C$i.bufferData(C$i.ELEMENT_ARRAY_BUFFER,C$e,C$n),this._needExpandDataStore=!1):C$i.bufferSubData(C$i.ELEMENT_ARRAY_BUFFER,C$t,C$e),this._device._restoreIndexBuffer()}}else console.error("The buffer is destroyed")},C$t.setUsage=function(C$t){this._usage=C$t},C$t=C$a,(C$o=[{key:"count",get:function(){return this._numIndices}}])&&C$n(C$t.prototype,C$o),C$r&&C$n(C$t,C$r),C$a);function C$a(C$t,C$e,C$i,C$n){this._device=C$t,this._format=C$e,this._usage=C$i,this._bytesPerIndex=C$s[C$e],this._bytes=C$n.byteLength,this._numIndices=this._bytes/this._bytesPerIndex,this._needExpandDataStore=!0,this._glID=C$t._gl.createBuffer(),this.update(0,C$n),C$t._stats.ib+=this._bytes}C$o.BYTES_PER_INDEX=C$s,C$i.default=C$o,C$e.exports=C$i.default},{"./enums":309}],312:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$t("./enums"),C$t={VertexFormat:C$t("./vertex-format"),IndexBuffer:C$t("./index-buffer"),VertexBuffer:C$t("./vertex-buffer"),Program:C$t("./program"),Texture:C$t("./texture"),Texture2D:C$t("./texture-2d"),TextureCube:C$t("./texture-cube"),RenderBuffer:C$t("./render-buffer"),FrameBuffer:C$t("./frame-buffer"),Device:C$t("./device"),attrTypeBytes:C$n.attrTypeBytes,glFilter:C$n.glFilter,glTextureFmt:C$n.glTextureFmt};Object.assign(C$t,C$n.enums),C$i.default=C$t,cc.gfx=C$t,C$e.exports=C$i.default},{"./device":308,"./enums":309,"./frame-buffer":310,"./index-buffer":311,"./program":314,"./render-buffer":315,"./texture":319,"./texture-2d":317,"./texture-cube":318,"./vertex-buffer":320,"./vertex-format":321}],313:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.isPow2=function(C$t){return!(C$t&C$t-1||!C$t)}},{}],314:[function(C$c,C$t,C$e){"use strict";function C$i(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}C$e.__esModule=!0,C$e.default=void 0;var C$n=0;function C$m(C$i,C$n,C$t){C$t.split("\n").forEach(function(C$t){var C$e;C$t.length<5||((C$e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(C$t))?C$i.push({type:C$n,fileID:0|C$e[1],line:0|C$e[2],message:C$e[3].trim()}):0<C$t.length&&C$i.push({type:C$n,fileID:-1,line:0,message:C$t}))})}(C$s=C$a.prototype).link=function(){if(!this._linked){var C$t=this._device._gl,C$e=C$y(C$t,C$t.VERTEX_SHADER,this._vertSource),C$i=C$y(C$t,C$t.FRAGMENT_SHADER,this._fragSource),C$n=C$t.createProgram(),C$r=(C$t.attachShader(C$n,C$e),C$t.attachShader(C$n,C$i),C$t.linkProgram(C$n),!1),C$s=this._errors;if(C$t.getShaderParameter(C$e,C$t.COMPILE_STATUS)||(C$m(C$s,"vs",C$t.getShaderInfoLog(C$e)),C$r=!0),C$t.getShaderParameter(C$i,C$t.COMPILE_STATUS)||(C$m(C$s,"fs",C$t.getShaderInfoLog(C$i)),C$r=!0),C$t.deleteShader(C$e),C$t.deleteShader(C$i),C$r)return C$s;if(!C$t.getProgramParameter(C$n,C$t.LINK_STATUS))return C$s.push({info:"Failed to link shader program: "+C$t.getProgramInfoLog(C$n)}),C$s;this._glID=C$n;for(var C$h=C$t.getProgramParameter(C$n,C$t.ACTIVE_ATTRIBUTES),C$o=0;C$o<C$h;++C$o){var C$a=C$t.getActiveAttrib(C$n,C$o),C$u=C$t.getAttribLocation(C$n,C$a.name);this._attributes.push({name:C$a.name,location:C$u,type:C$a.type})}for(var C$_=C$t.getProgramParameter(C$n,C$t.ACTIVE_UNIFORMS),C$c=0;C$c<C$_;++C$c){var C$d=C$t.getActiveUniform(C$n,C$c),C$l=C$d.name,C$f=C$t.getUniformLocation(C$n,C$l),C$p="[0]"===C$l.substr(C$l.length-3),C$l={name:C$l=C$p?C$l.substr(0,C$l.length-3):C$l,location:C$f,type:C$d.type,size:C$p?C$d.size:void 0};this._uniforms.push(C$l)}this._linked=!0}},C$s.destroy=function(){this._device._gl.deleteProgram(this._glID),this._linked=!1,this._glID=null,this._attributes=[],this._uniforms=[],this._samplers=[]},C$s=C$a,(C$o=[{key:"id",get:function(){return this._id}}])&&C$i(C$s.prototype,C$o),C$r&&C$i(C$s,C$r);var C$r,C$s,C$o=C$a;function C$a(C$t,C$e){this._device=C$t,this._attributes=[],this._uniforms=[],this._samplers=[],this._errors=[],this._linked=!1,this._vertSource=C$e.vert,this._fragSource=C$e.frag,this._glID=null,this._id=C$n++}function C$y(C$t,C$e,C$i){C$e=C$t.createShader(C$e);return C$t.shaderSource(C$e,C$i),C$t.compileShader(C$e),C$e}C$e.default=C$o,C$t.exports=C$e.default},{}],315:[function(C$t,C$e,C$i){"use strict";var C$n;function C$r(C$t,C$e,C$i,C$n){this._device=C$t,this._format=C$e,this._glID=C$t._gl.createRenderbuffer(),this.update(C$i,C$n)}C$i.__esModule=!0,C$i.default=void 0,(C$n=C$r.prototype).update=function(C$t,C$e){this._width=C$t,this._height=C$e;var C$i=this._device._gl;C$i.bindRenderbuffer(C$i.RENDERBUFFER,this._glID),C$i.renderbufferStorage(C$i.RENDERBUFFER,this._format,C$t,C$e),C$i.bindRenderbuffer(C$i.RENDERBUFFER,null)},C$n.destroy=function(){var C$t;null!==this._glID?((C$t=this._device._gl).bindRenderbuffer(C$t.RENDERBUFFER,null),C$t.deleteRenderbuffer(this._glID),this._glID=null):console.error("The render-buffer already destroyed")},C$i.default=C$r,C$e.exports=C$i.default},{}],316:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$t=C$t("./enums"),C$n={blend:!1,blendSep:!1,blendColor:4294967295,blendEq:C$t.enums.BLEND_FUNC_ADD,blendAlphaEq:C$t.enums.BLEND_FUNC_ADD,blendSrc:C$t.enums.BLEND_ONE,blendDst:C$t.enums.BLEND_ZERO,blendSrcAlpha:C$t.enums.BLEND_ONE,blendDstAlpha:C$t.enums.BLEND_ZERO,depthTest:!1,depthWrite:!1,depthFunc:C$t.enums.DS_FUNC_LESS,stencilTest:!1,stencilSep:!1,stencilFuncFront:C$t.enums.DS_FUNC_ALWAYS,stencilRefFront:0,stencilMaskFront:255,stencilFailOpFront:C$t.enums.STENCIL_OP_KEEP,stencilZFailOpFront:C$t.enums.STENCIL_OP_KEEP,stencilZPassOpFront:C$t.enums.STENCIL_OP_KEEP,stencilWriteMaskFront:255,stencilFuncBack:C$t.enums.DS_FUNC_ALWAYS,stencilRefBack:0,stencilMaskBack:255,stencilFailOpBack:C$t.enums.STENCIL_OP_KEEP,stencilZFailOpBack:C$t.enums.STENCIL_OP_KEEP,stencilZPassOpBack:C$t.enums.STENCIL_OP_KEEP,stencilWriteMaskBack:255,cullMode:C$t.enums.CULL_BACK,primitiveType:C$t.enums.PT_TRIANGLES,maxStream:-1,vertexBuffers:[],vertexBufferOffsets:[],indexBuffer:null,maxTextureSlot:-1,textureUnits:[],program:null};function C$r(C$t){this.vertexBuffers=new Array(C$t._caps.maxVertexStreams),this.vertexBufferOffsets=new Array(C$t._caps.maxVertexStreams),this.textureUnits=new Array(C$t._caps.maxTextureUnits),this.set(C$n)}C$r.initDefault=function(C$t){C$n.vertexBuffers=new Array(C$t._caps.maxVertexStreams),C$n.vertexBufferOffsets=new Array(C$t._caps.maxVertexStreams),C$n.textureUnits=new Array(C$t._caps.maxTextureUnits)},(C$t=C$r.prototype).reset=function(){this.set(C$n)},C$t.set=function(C$t){this.blend=C$t.blend,this.blendSep=C$t.blendSep,this.blendColor=C$t.blendColor,this.blendEq=C$t.blendEq,this.blendAlphaEq=C$t.blendAlphaEq,this.blendSrc=C$t.blendSrc,this.blendDst=C$t.blendDst,this.blendSrcAlpha=C$t.blendSrcAlpha,this.blendDstAlpha=C$t.blendDstAlpha,this.depthTest=C$t.depthTest,this.depthWrite=C$t.depthWrite,this.depthFunc=C$t.depthFunc,this.stencilTest=C$t.stencilTest,this.stencilSep=C$t.stencilSep,this.stencilFuncFront=C$t.stencilFuncFront,this.stencilRefFront=C$t.stencilRefFront,this.stencilMaskFront=C$t.stencilMaskFront,this.stencilFailOpFront=C$t.stencilFailOpFront,this.stencilZFailOpFront=C$t.stencilZFailOpFront,this.stencilZPassOpFront=C$t.stencilZPassOpFront,this.stencilWriteMaskFront=C$t.stencilWriteMaskFront,this.stencilFuncBack=C$t.stencilFuncBack,this.stencilRefBack=C$t.stencilRefBack,this.stencilMaskBack=C$t.stencilMaskBack,this.stencilFailOpBack=C$t.stencilFailOpBack,this.stencilZFailOpBack=C$t.stencilZFailOpBack,this.stencilZPassOpBack=C$t.stencilZPassOpBack,this.stencilWriteMaskBack=C$t.stencilWriteMaskBack,this.cullMode=C$t.cullMode,this.primitiveType=C$t.primitiveType,this.maxStream=C$t.maxStream;for(var C$e=0;C$e<C$t.vertexBuffers.length;++C$e)this.vertexBuffers[C$e]=C$t.vertexBuffers[C$e];for(var C$i=0;C$i<C$t.vertexBufferOffsets.length;++C$i)this.vertexBufferOffsets[C$i]=C$t.vertexBufferOffsets[C$i];this.indexBuffer=C$t.indexBuffer,this.maxTextureSlot=C$t.maxTextureSlot;for(var C$n=0;C$n<C$t.textureUnits.length;++C$n)this.textureUnits[C$n]=C$t.textureUnits[C$n];this.program=C$t.program},C$i.default=C$r,C$e.exports=C$i.default},{"./enums":309}],317:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$n=C$t("./texture"))&&C$n.__esModule?C$n:{default:C$n},C$o=C$t("./enums"),C$s=C$t("./misc");function C$r(C$i){return function(){var C$t,C$e=C$a(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$a(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$a(C$t){return(C$a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$c=C$n.default,C$t=C$c,(C$n=C$l).prototype=Object.create(C$t.prototype),(C$n.prototype.constructor=C$n).__proto__=C$t,C$r(C$l),(C$n=C$l.prototype).update=function(C$t){var C$e,C$i,C$n=this._device._gl,C$r=this._genMipmap;C$t&&(void 0!==C$t.width&&(this._width=C$t.width),void 0!==C$t.height&&(this._height=C$t.height),void 0!==C$t.anisotropy&&(this._anisotropy=C$t.anisotropy),void 0!==C$t.minFilter&&(this._minFilter=C$t.minFilter),void 0!==C$t.magFilter&&(this._magFilter=C$t.magFilter),void 0!==C$t.mipFilter&&(this._mipFilter=C$t.mipFilter),void 0!==C$t.wrapS&&(this._wrapS=C$t.wrapS),void 0!==C$t.wrapT&&(this._wrapT=C$t.wrapT),void 0!==C$t.format&&(this._format=C$t.format,this._compressed=this._format>=C$o.enums.TEXTURE_FMT_RGB_DXT1&&this._format<=C$o.enums.TEXTURE_FMT_RGBA_PVRTC_4BPPV1||this._format>=C$o.enums.TEXTURE_FMT_RGB_ETC2&&this._format<=C$o.enums.TEXTURE_FMT_RGBA_ETC2),void 0!==C$t.genMipmaps&&(this._genMipmap=C$t.genMipmaps,C$r=C$t.genMipmaps),(C$e=this._device.caps.maxTextureSize||Number.MAX_VALUE)<(C$i=Math.max(C$t.width||0,C$t.height||0))&&console.warn("The current texture size "+C$i+" exceeds the maximum size ["+C$e+"] supported on the device."),void 0!==C$t.images&&1<C$t.images.length&&(C$r=!1,(C$t.width>C$t.height?C$t.width:C$t.height)>>C$t.images.length-1!=1&&console.error("texture-2d mipmap is invalid, should have a 1x1 mipmap."))),(0,C$s.isPow2)(this._width)&&(0,C$s.isPow2)(this._height)||(C$r=!1),C$n.activeTexture(C$n.TEXTURE0),C$n.bindTexture(C$n.TEXTURE_2D,this._glID),void 0!==C$t.images&&0<C$t.images.length&&(this._setMipmap(C$t.images,C$t.flipY,C$t.premultiplyAlpha),1<C$t.images.length&&(this._genMipmap=!0)),C$r&&(C$n.hint(C$n.GENERATE_MIPMAP_HINT,C$n.NICEST),C$n.generateMipmap(C$n.TEXTURE_2D),this._genMipmap=!0),this._setTexInfo(),this._device._restoreTexture(0)},C$n.updateSubImage=function(C$t){var C$e=this._device._gl,C$i=(0,C$o.glTextureFmt)(this._format);C$e.activeTexture(C$e.TEXTURE0),C$e.bindTexture(C$e.TEXTURE_2D,this._glID),this._setSubImage(C$i,C$t),this._device._restoreTexture(0)},C$n.updateImage=function(C$t){var C$e=this._device._gl,C$i=(0,C$o.glTextureFmt)(this._format);C$e.activeTexture(C$e.TEXTURE0),C$e.bindTexture(C$e.TEXTURE_2D,this._glID),this._setImage(C$i,C$t),this._device._restoreTexture(0)},C$n._setSubImage=function(C$t,C$e){var C$i=this._device._gl,C$n=C$e.flipY,C$r=C$e.premultiplyAlpha,C$s=C$e.image;!C$s||ArrayBuffer.isView(C$s)||C$s instanceof ArrayBuffer?(void 0===C$n?C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,C$n),void 0===C$r?C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$r),this._compressed?C$i.compressedTexSubImage2D(C$i.TEXTURE_2D,C$e.level,C$e.x,C$e.y,C$e.width,C$e.height,C$t.format,C$s):C$i.texSubImage2D(C$i.TEXTURE_2D,C$e.level,C$e.x,C$e.y,C$e.width,C$e.height,C$t.format,C$t.pixelType,C$s)):(void 0===C$n?C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,!0):C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,C$n),void 0===C$r?C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$r),C$i.texSubImage2D(C$i.TEXTURE_2D,C$e.level,C$e.x,C$e.y,C$t.format,C$t.pixelType,C$s))},C$n._setImage=function(C$t,C$e){var C$i=this._device._gl,C$n=C$e.flipY,C$r=C$e.premultiplyAlpha,C$s=C$e.image;!C$s||ArrayBuffer.isView(C$s)||C$s instanceof ArrayBuffer?(void 0===C$n?C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,C$n),void 0===C$r?C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$r),this._compressed?C$i.compressedTexImage2D(C$i.TEXTURE_2D,C$e.level,C$t.internalFormat,C$e.width,C$e.height,0,C$s):C$i.texImage2D(C$i.TEXTURE_2D,C$e.level,C$t.internalFormat,C$e.width,C$e.height,0,C$t.format,C$t.pixelType,C$s)):(void 0===C$n?C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,!0):C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,C$n),void 0===C$r?C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$r),C$i.texImage2D(C$i.TEXTURE_2D,C$e.level,C$t.internalFormat,C$t.format,C$t.pixelType,C$s))},C$n._setMipmap=function(C$t,C$e,C$i){for(var C$n=(0,C$o.glTextureFmt)(this._format),C$r={width:this._width,height:this._height,flipY:C$e,premultiplyAlpha:C$i,level:0,image:null},C$s=0;C$s<C$t.length;++C$s)C$r.level=C$s,C$r.width=this._width>>C$s,C$r.height=this._height>>C$s,C$r.image=C$t[C$s],this._setImage(C$n,C$r)},C$n._setTexInfo=function(){var C$t=this._device._gl,C$e=(0,C$s.isPow2)(this._width)&&(0,C$s.isPow2)(this._height),C$i=(C$e||this._wrapS===C$o.enums.WRAP_CLAMP&&this._wrapT===C$o.enums.WRAP_CLAMP||(console.warn("WebGL1 doesn't support all wrap modes with NPOT textures"),this._wrapS=C$o.enums.WRAP_CLAMP,this._wrapT=C$o.enums.WRAP_CLAMP),this._genMipmap?this._mipFilter:-1),C$e=(C$e||-1===C$i||(console.warn("NPOT textures do not support mipmap filter"),C$i=-1),C$t.texParameteri(C$t.TEXTURE_2D,C$t.TEXTURE_MIN_FILTER,(0,C$o.glFilter)(C$t,this._minFilter,C$i)),C$t.texParameteri(C$t.TEXTURE_2D,C$t.TEXTURE_MAG_FILTER,(0,C$o.glFilter)(C$t,this._magFilter,-1)),C$t.texParameteri(C$t.TEXTURE_2D,C$t.TEXTURE_WRAP_S,this._wrapS),C$t.texParameteri(C$t.TEXTURE_2D,C$t.TEXTURE_WRAP_T,this._wrapT),this._device.ext("EXT_texture_filter_anisotropic"));C$e&&C$t.texParameteri(C$t.TEXTURE_2D,C$e.TEXTURE_MAX_ANISOTROPY_EXT,this._anisotropy)};var C$c,C$t=C$l;function C$l(C$t,C$e){var C$t=C$c.call(this,C$t)||this,C$i=C$t._device._gl;return C$t._target=C$i.TEXTURE_2D,C$t._glID=C$i.createTexture(),C$e.images=C$e.images||[null],C$t.update(C$e),C$t}C$i.default=C$t,C$e.exports=C$i.default},{"./enums":309,"./misc":313,"./texture":319}],318:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$n=C$t("./texture"))&&C$n.__esModule?C$n:{default:C$n},C$c=C$t("./enums"),C$r=C$t("./misc");function C$s(C$i){return function(){var C$t,C$e=C$o(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$o(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$o(C$t){return(C$o=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}C$a=C$n.default,C$t=C$a,(C$n=C$l).prototype=Object.create(C$t.prototype),(C$n.prototype.constructor=C$n).__proto__=C$t,C$s(C$l),(C$n=C$l.prototype).update=function(C$t){var C$e=this._device._gl,C$i=this._genMipmaps;C$t&&(void 0!==C$t.width&&(this._width=C$t.width),void 0!==C$t.height&&(this._height=C$t.height),void 0!==C$t.anisotropy&&(this._anisotropy=C$t.anisotropy),void 0!==C$t.minFilter&&(this._minFilter=C$t.minFilter),void 0!==C$t.magFilter&&(this._magFilter=C$t.magFilter),void 0!==C$t.mipFilter&&(this._mipFilter=C$t.mipFilter),void 0!==C$t.wrapS&&(this._wrapS=C$t.wrapS),void 0!==C$t.wrapT&&(this._wrapT=C$t.wrapT),void 0!==C$t.format&&(this._format=C$t.format,this._compressed=this._format>=C$c.enums.TEXTURE_FMT_RGB_DXT1&&this._format<=C$c.enums.TEXTURE_FMT_RGBA_PVRTC_4BPPV1||this._format>=C$c.enums.TEXTURE_FMT_RGB_ETC2&&this._format<=C$c.enums.TEXTURE_FMT_RGBA_ETC2),void 0!==C$t.genMipmaps&&(this._genMipmaps=C$t.genMipmaps,C$i=C$t.genMipmaps),void 0!==C$t.images&&1<C$t.images.length&&(C$i=!1,C$t.width!==C$t.height&&console.warn("texture-cube width and height should be identical."),C$t.width>>C$t.images.length-1!=1&&console.error("texture-cube mipmap is invalid. please set mipmap as 1x1, 2x2, 4x4 ... nxn"))),(0,C$r.isPow2)(this._width)&&(0,C$r.isPow2)(this._height)||(C$i=!1),C$e.activeTexture(C$e.TEXTURE0),C$e.bindTexture(C$e.TEXTURE_CUBE_MAP,this._glID),void 0!==C$t.images&&0<C$t.images.length&&(this._setMipmap(C$t.images,C$t.flipY,C$t.premultiplyAlpha),1<C$t.images.length&&(this._genMipmaps=!0)),C$i&&(C$e.hint(C$e.GENERATE_MIPMAP_HINT,C$e.NICEST),C$e.generateMipmap(C$e.TEXTURE_CUBE_MAP),this._genMipmaps=!0),this._setTexInfo(),this._device._restoreTexture(0)},C$n.updateSubImage=function(C$t){var C$e=this._device._gl,C$i=(0,C$c.glTextureFmt)(this._format);C$e.activeTexture(C$e.TEXTURE0),C$e.bindTexture(C$e.TEXTURE_CUBE_MAP,this._glID),this._setSubImage(C$i,C$t),this._device._restoreTexture(0)},C$n.updateImage=function(C$t){var C$e=this._device._gl,C$i=(0,C$c.glTextureFmt)(this._format);C$e.activeTexture(C$e.TEXTURE0),C$e.bindTexture(C$e.TEXTURE_CUBE_MAP,this._glID),this._setImage(C$i,C$t),this._device._restoreTexture(0)},C$n._setSubImage=function(C$t,C$e){var C$i=this._device._gl,C$n=C$e.flipY,C$r=C$e.premultiplyAlpha,C$s=C$e.faceIndex,C$o=C$e.image;void 0===C$n?C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,C$n),void 0===C$r?C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$r),!C$o||ArrayBuffer.isView(C$o)||C$o instanceof ArrayBuffer?this._compressed?C$i.compressedTexSubImage2D(C$i.TEXTURE_CUBE_MAP_POSITIVE_X+C$s,C$e.level,C$e.x,C$e.y,C$e.width,C$e.height,C$t.format,C$o):C$i.texSubImage2D(C$i.TEXTURE_CUBE_MAP_POSITIVE_X+C$s,C$e.level,C$e.x,C$e.y,C$e.width,C$e.height,C$t.format,C$t.pixelType,C$o):C$i.texSubImage2D(C$i.TEXTURE_CUBE_MAP_POSITIVE_X+C$s,C$e.level,C$e.x,C$e.y,C$t.format,C$t.pixelType,C$o)},C$n._setImage=function(C$t,C$e){var C$i=this._device._gl,C$n=C$e.flipY,C$r=C$e.premultiplyAlpha,C$s=C$e.faceIndex,C$o=C$e.image;void 0===C$n?C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_FLIP_Y_WEBGL,C$n),void 0===C$r?C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$i.pixelStorei(C$i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$r),!C$o||ArrayBuffer.isView(C$o)||C$o instanceof ArrayBuffer?this._compressed?C$i.compressedTexImage2D(C$i.TEXTURE_CUBE_MAP_POSITIVE_X+C$s,C$e.level,C$t.internalFormat,C$e.width,C$e.height,0,C$o):C$i.texImage2D(C$i.TEXTURE_CUBE_MAP_POSITIVE_X+C$s,C$e.level,C$t.internalFormat,C$e.width,C$e.height,0,C$t.format,C$t.pixelType,C$o):C$i.texImage2D(C$i.TEXTURE_CUBE_MAP_POSITIVE_X+C$s,C$e.level,C$t.internalFormat,C$t.format,C$t.pixelType,C$o)},C$n._setMipmap=function(C$t,C$e,C$i){for(var C$n=(0,C$c.glTextureFmt)(this._format),C$r={width:this._width,height:this._height,faceIndex:0,flipY:C$e,premultiplyAlpha:C$i,level:0,image:null},C$s=0;C$s<C$t.length;++C$s){var C$o=C$t[C$s];C$r.level=C$s,C$r.width=this._width>>C$s,C$r.height=this._height>>C$s;for(var C$a=0;C$a<6;++C$a)C$r.faceIndex=C$a,C$r.image=C$o[C$a],this._setImage(C$n,C$r)}},C$n._setTexInfo=function(){var C$t=this._device._gl,C$e=(0,C$r.isPow2)(this._width)&&(0,C$r.isPow2)(this._height),C$i=(C$e||this._wrapS===C$c.enums.WRAP_CLAMP&&this._wrapT===C$c.enums.WRAP_CLAMP||(console.warn("WebGL1 doesn't support all wrap modes with NPOT textures"),this._wrapS=C$c.enums.WRAP_CLAMP,this._wrapT=C$c.enums.WRAP_CLAMP),this._genMipmaps?this._mipFilter:-1),C$e=(C$e||-1===C$i||(console.warn("NPOT textures do not support mipmap filter"),C$i=-1),C$t.texParameteri(C$t.TEXTURE_CUBE_MAP,C$t.TEXTURE_MIN_FILTER,(0,C$c.glFilter)(C$t,this._minFilter,C$i)),C$t.texParameteri(C$t.TEXTURE_CUBE_MAP,C$t.TEXTURE_MAG_FILTER,(0,C$c.glFilter)(C$t,this._magFilter,-1)),C$t.texParameteri(C$t.TEXTURE_CUBE_MAP,C$t.TEXTURE_WRAP_S,this._wrapS),C$t.texParameteri(C$t.TEXTURE_CUBE_MAP,C$t.TEXTURE_WRAP_T,this._wrapT),this._device.ext("EXT_texture_filter_anisotropic"));C$e&&C$t.texParameteri(C$t.TEXTURE_CUBE_MAP,C$e.TEXTURE_MAX_ANISOTROPY_EXT,this._anisotropy)};var C$a,C$t=C$l;function C$l(C$t,C$e){var C$t=C$a.call(this,C$t)||this,C$i=C$t._device._gl;return C$t._target=C$i.TEXTURE_CUBE_MAP,C$t._glID=C$i.createTexture(),C$t.update(C$e),C$t}C$i.default=C$t,C$e.exports=C$i.default},{"./enums":309,"./misc":313,"./texture":319}],319:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$t("./enums"),C$r=0;function C$s(C$t){this._device=C$t,this._width=4,this._height=4,this._genMipmaps=!1,this._compressed=!1,this._anisotropy=1,this._minFilter=C$n.enums.FILTER_LINEAR,this._magFilter=C$n.enums.FILTER_LINEAR,this._mipFilter=C$n.enums.FILTER_LINEAR,this._wrapS=C$n.enums.WRAP_REPEAT,this._wrapT=C$n.enums.WRAP_REPEAT,this._format=C$n.enums.TEXTURE_FMT_RGBA8,this._target=-1,this._id=C$r++}C$s.prototype.destroy=function(){null!==this._glID?(this._device._gl.deleteTexture(this._glID),this._device._stats.tex-=this.bytes,this._glID=null):console.error("The texture already destroyed")},C$i.default=C$s,C$e.exports=C$i.default},{"./enums":309}],320:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;C$t("./enums");function C$n(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}(C$t=C$o.prototype).destroy=function(){-1!==this._glID?(this._device._gl.deleteBuffer(this._glID),this._device._stats.vb-=this.bytes,this._glID=-1):console.error("The buffer already destroyed")},C$t.update=function(C$t,C$e){if(-1!==this._glID){if(0!==C$e.byteLength){if(C$t+C$e.byteLength>this._bytes){if(C$t)return void console.error("Failed to update data, bytes exceed.");this._needExpandDataStore=!0,this._bytes=C$t+C$e.byteLength,this._numVertices=this._bytes/this._bytesPerVertex}var C$i=this._device._gl,C$n=this._usage;C$i.bindBuffer(C$i.ARRAY_BUFFER,this._glID),this._needExpandDataStore?(C$i.bufferData(C$i.ARRAY_BUFFER,C$e,C$n),this._needExpandDataStore=!1):C$i.bufferSubData(C$i.ARRAY_BUFFER,C$t,C$e),C$i.bindBuffer(C$i.ARRAY_BUFFER,null)}}else console.error("The buffer is destroyed")},C$t.getFormat=function(C$t){return this._format.element(C$t)},C$t.setUsage=function(C$t){this._usage=C$t},C$t=C$o,(C$s=[{key:"count",get:function(){return this._numVertices}}])&&C$n(C$t.prototype,C$s),C$r&&C$n(C$t,C$r);var C$r,C$s=C$o;function C$o(C$t,C$e,C$i,C$n){this._device=C$t,this._format=C$e,this._usage=C$i,this._bytesPerVertex=this._format._bytes,this._bytes=C$n.byteLength,this._numVertices=this._bytes/this._bytesPerVertex,this._needExpandDataStore=!0,this._glID=C$t._gl.createBuffer(),this.update(0,C$n),C$t._stats.vb+=this._bytes}C$i.default=C$s,C$e.exports=C$i.default},{"./enums":309}],321:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$a=C$t("./enums"),C$c=(C$t=C$t("../murmurhash2_gc"))&&C$t.__esModule?C$t:{default:C$t};function C$n(C$t){this._attr2el={},this._elements=[];for(var C$e="",C$i=this._bytes=0,C$n=C$t.length;C$i<C$n;++C$i){var C$r=C$t[C$i],C$r={name:C$r.name,offset:this._bytes,stride:0,stream:-1,type:C$r.type,num:C$r.num,normalize:void 0!==C$r.normalize&&C$r.normalize,bytes:C$r.num*(0,C$a.attrTypeBytes)(C$r.type)};this._attr2el[C$r.name]=C$r,this._elements.push(C$r),this._bytes+=C$r.bytes,C$e+=C$r.name+":"+C$r.num+":"+C$r.type+":"+C$r.normalize}for(var C$s=0,C$o=this._elements.length;C$s<C$o;++C$s)this._elements[C$s].stride=this._bytes;this._hash=(0,C$c.default)(C$e,666)}(C$t=C$n.prototype).element=function(C$t){return this._attr2el[C$t]},C$t.getHash=function(){return this._hash},C$i.default=C$n,C$e.exports=C$i.default},{"../murmurhash2_gc":330,"./enums":309}],322:[function(C$t,C$e,C$i){"use strict";function C$n(C$t,C$e){this._cursor=0,this._data=new Array(C$e);for(var C$i=0;C$i<C$e;++C$i)this._data[C$i]=C$t()}C$i.__esModule=!0,C$i.default=void 0,C$n.prototype.request=function(){var C$t=this._data[this._cursor];return this._cursor=(this._cursor+1)%this._data.length,C$t},C$i.default=C$n,C$e.exports=C$i.default},{}],323:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$t=C$t("./timsort"))&&C$t.__esModule?C$t:{default:C$t};function C$r(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}(C$t=C$a.prototype)._resize=function(C$t){if(C$t>this._data.length)for(var C$e=this._data.length;C$e<C$t;++C$e)this._data[C$e]=void 0},C$t.reset=function(){for(var C$t=0;C$t<this._count;++C$t)this._data[C$t]=void 0;this._count=0},C$t.push=function(C$t){this._count>=this._data.length&&this._resize(2*this._data.length),this._data[this._count]=C$t,++this._count},C$t.pop=function(){--this._count,this._count<0&&(this._count=0);var C$t=this._data[this._count];return this._data[this._count]=void 0,C$t},C$t.fastRemove=function(C$t){var C$e;C$t>=this._count||C$t<0||(C$e=this._count-1,this._data[C$t]=this._data[C$e],this._data[C$e]=void 0,--this._count)},C$t.indexOf=function(C$t){return this._data.indexOf(C$t)},C$t.sort=function(C$t){return(0,C$n.default)(this._data,0,this._count,C$t)},C$t=C$a,(C$o=[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}])&&C$r(C$t.prototype,C$o),C$s&&C$r(C$t,C$s);var C$s,C$o=C$a;function C$a(C$t){this._count=0,this._data=new Array(C$t)}C$i.default=C$o,C$e.exports=C$i.default},{"./timsort":328}],324:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.TypedArrayPool=C$i.RecyclePool=C$i.Pool=C$i.LinkedArray=C$i.FixedArray=C$i.CircularPool=void 0;var C$n=C$r(C$t("./circular-pool")),C$n=(C$i.CircularPool=C$n.default,C$r(C$t("./fixed-array"))),C$n=(C$i.FixedArray=C$n.default,C$r(C$t("./linked-array"))),C$n=(C$i.LinkedArray=C$n.default,C$r(C$t("./pool"))),C$n=(C$i.Pool=C$n.default,C$r(C$t("./recycle-pool"))),C$n=(C$i.RecyclePool=C$n.default,C$r(C$t("./typed-array-pool")));function C$r(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}C$i.TypedArrayPool=C$n.default},{"./circular-pool":322,"./fixed-array":323,"./linked-array":325,"./pool":326,"./recycle-pool":327,"./typed-array-pool":329}],325:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$t=C$t("./pool"))&&C$t.__esModule?C$t:{default:C$t};function C$r(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}(C$t=C$a.prototype).add=function(){var C$t=this._pool.alloc();return this._tail?(this._tail._next=C$t)._prev=this._tail:this._head=C$t,this._tail=C$t,this._count+=1,C$t},C$t.remove=function(C$t){C$t._prev?C$t._prev._next=C$t._next:this._head=C$t._next,C$t._next?C$t._next._prev=C$t._prev:this._tail=C$t._prev,C$t._next=null,C$t._prev=null,this._pool.free(C$t),--this._count},C$t.forEach=function(C$t,C$e){var C$i=this._head;if(C$i){C$e&&(C$t=C$t.bind(C$e));for(var C$n,C$r=0;C$i;)C$n=C$i._next,C$t(C$i,C$r,this),C$i=C$n,++C$r}},C$t=C$a,(C$o=[{key:"head",get:function(){return this._head}},{key:"tail",get:function(){return this._tail}},{key:"length",get:function(){return this._count}}])&&C$r(C$t.prototype,C$o),C$s&&C$r(C$t,C$s);var C$s,C$o=C$a;function C$a(C$t,C$e){this._fn=C$t,this._count=0,this._head=null,this._tail=null,this._pool=new C$n.default(C$t,C$e)}C$i.default=C$o,C$e.exports=C$i.default},{"./pool":326}],326:[function(C$t,C$e,C$i){"use strict";var C$n;function C$r(C$t,C$e){this._fn=C$t,this._idx=C$e-1,this._frees=new Array(C$e);for(var C$i=0;C$i<C$e;++C$i)this._frees[C$i]=C$t()}C$i.__esModule=!0,C$i.default=void 0,(C$n=C$r.prototype)._expand=function(C$t){for(var C$e=this._frees,C$i=(this._frees=new Array(C$t),C$t-C$e.length),C$n=0;C$n<C$i;++C$n)this._frees[C$n]=this._fn();for(var C$r=C$i,C$s=0;C$r<C$t;++C$r,++C$s)this._frees[C$r]=C$e[C$s];this._idx+=C$i},C$n.alloc=function(){this._idx<0&&this._expand(Math.round(1.2*this._frees.length)+1);var C$t=this._frees[this._idx];return this._frees[this._idx]=null,--this._idx,C$t},C$n.free=function(C$t){++this._idx,this._frees[this._idx]=C$t},C$n.clear=function(C$t){for(var C$e=0;C$e<=this._idx;C$e++)C$t&&C$t(this._frees[C$e]);this._frees.length=0,this._idx=-1},C$i.default=C$r,C$e.exports=C$i.default},{}],327:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$t=C$t("./timsort"))&&C$t.__esModule?C$t:{default:C$t};function C$r(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}(C$t=C$a.prototype).reset=function(){this._count=0},C$t.resize=function(C$t){if(C$t>this._data.length)for(var C$e=this._data.length;C$e<C$t;++C$e)this._data[C$e]=this._fn()},C$t.add=function(){return this._count>=this._data.length&&this.resize(2*this._data.length),this._data[this._count++]},C$t.remove=function(C$t){var C$e,C$i;C$t>=this._count||(C$e=this._count-1,C$i=this._data[C$t],this._data[C$t]=this._data[C$e],this._data[C$e]=C$i,--this._count)},C$t.sort=function(C$t){return(0,C$n.default)(this._data,0,this._count,C$t)},C$t=C$a,(C$o=[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}])&&C$r(C$t.prototype,C$o),C$s&&C$r(C$t,C$s);var C$s,C$o=C$a;function C$a(C$t,C$e){this._fn=C$t,this._count=0,this._data=new Array(C$e);for(var C$i=0;C$i<C$e;++C$i)this._data[C$i]=C$t()}C$i.default=C$o,cc.RecyclePool=C$o,C$e.exports=C$i.default},{"./timsort":328}],328:[function(C$n,C$r,C$t){"use strict";C$t.__esModule=!0,C$t.default=function(C$t,C$e,C$i,C$n){if(!Array.isArray(C$t))throw new TypeError("Can only sort arrays");void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=C$t.length),void 0===C$n&&(C$n=C$_);var C$r=C$i-C$e;if(!(C$r<2)){var C$s=0;if(C$r<C$l)C$s=C$h(C$t,C$e,C$i,C$n),C$u(C$t,C$e,C$i,C$e+C$s,C$n);else{var C$o,C$a=new C$d(C$t,C$n),C$c=function(C$t){var C$e=0;for(;C$l<=C$t;)C$e|=1&C$t,C$t>>=1;return C$t+C$e}(C$r);do{}while((C$s=C$h(C$t,C$e,C$i,C$n))<C$c&&(C$u(C$t,C$e,C$e+(C$o=C$c<(C$o=C$r)?C$c:C$o),C$e+C$s,C$n),C$s=C$o),C$a.pushRun(C$e,C$s),C$a.mergeRuns(),C$e+=C$s,0!==(C$r-=C$s));C$a.forceMergeRuns()}}};var C$l=32,C$s=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function C$o(C$t){return C$t<1e5?C$t<100?C$t<10?0:1:C$t<1e4?C$t<1e3?2:3:4:C$t<1e7?C$t<1e6?5:6:C$t<1e9?C$t<1e8?7:8:9}function C$_(C$t,C$e){if(C$t===C$e)return 0;if(~~C$t===C$t&&~~C$e===C$e){if(0===C$t||0===C$e)return C$t<C$e?-1:1;if(C$t<0||C$e<0){if(0<=C$e)return-1;if(0<=C$t)return 1;C$t=-C$t,C$e=-C$e}var C$i=C$o(C$t),C$n=C$o(C$e),C$r=0;return C$i<C$n?(C$t*=C$s[C$n-C$i-1],C$e/=10,C$r=-1):C$n<C$i&&(C$e*=C$s[C$i-C$n-1],C$t/=10,C$r=1),C$t===C$e?C$r:C$t<C$e?-1:1}C$i=String(C$t),C$n=String(C$e);return C$i===C$n?0:C$i<C$n?-1:1}function C$h(C$t,C$e,C$i,C$n){var C$r=C$e+1;if(C$r===C$i)return 1;if(C$n(C$t[C$r++],C$t[C$e])<0){for(;C$r<C$i&&C$n(C$t[C$r],C$t[C$r-1])<0;)C$r++;var C$s=C$t,C$o=C$e,C$a=C$r;for(C$a--;C$o<C$a;){var C$c=C$s[C$o];C$s[C$o++]=C$s[C$a],C$s[C$a--]=C$c}}else for(;C$r<C$i&&0<=C$n(C$t[C$r],C$t[C$r-1]);)C$r++;return C$r-C$e}function C$u(C$t,C$e,C$i,C$n,C$r){for(C$n===C$e&&C$n++;C$n<C$i;C$n++){for(var C$s=C$t[C$n],C$o=C$e,C$a=C$n;C$o<C$a;){var C$c=C$o+C$a>>>1;C$r(C$s,C$t[C$c])<0?C$a=C$c:C$o=1+C$c}var C$l=C$n-C$o;switch(C$l){case 3:C$t[C$o+3]=C$t[C$o+2];case 2:C$t[C$o+2]=C$t[C$o+1];case 1:C$t[C$o+1]=C$t[C$o];break;default:for(;0<C$l;)C$t[C$o+C$l]=C$t[C$o+C$l-1],C$l--}C$t[C$o]=C$s}}function C$y(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=0,C$a=0,C$c=1;if(0<C$s(C$t,C$e[C$i+C$r])){for(C$a=C$n-C$r;C$c<C$a&&0<C$s(C$t,C$e[C$i+C$r+C$c]);)(C$c=1+((C$o=C$c)<<1))<=0&&(C$c=C$a);C$a<C$c&&(C$c=C$a),C$o+=C$r,C$c+=C$r}else{for(C$a=C$r+1;C$c<C$a&&C$s(C$t,C$e[C$i+C$r-C$c])<=0;)(C$c=1+((C$o=C$c)<<1))<=0&&(C$c=C$a);C$n=C$o,C$o=C$r-(C$c=C$a<C$c?C$a:C$c),C$c=C$r-C$n}for(C$o++;C$o<C$c;){var C$l=C$o+(C$c-C$o>>>1);0<C$s(C$t,C$e[C$i+C$l])?C$o=C$l+1:C$c=C$l}return C$c}function C$g(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=0,C$a=0,C$c=1;if(C$s(C$t,C$e[C$i+C$r])<0){for(C$a=C$r+1;C$c<C$a&&C$s(C$t,C$e[C$i+C$r-C$c])<0;)(C$c=1+((C$o=C$c)<<1))<=0&&(C$c=C$a);var C$h=C$o,C$o=C$r-(C$c=C$a<C$c?C$a:C$c),C$c=C$r-C$h}else{for(C$a=C$n-C$r;C$c<C$a&&0<=C$s(C$t,C$e[C$i+C$r+C$c]);)(C$c=1+((C$o=C$c)<<1))<=0&&(C$c=C$a);C$a<C$c&&(C$c=C$a),C$o+=C$r,C$c+=C$r}for(C$o++;C$o<C$c;){var C$l=C$o+(C$c-C$o>>>1);C$s(C$t,C$e[C$i+C$l])<0?C$c=C$l:C$o=C$l+1}return C$c}(C$e=C$i.prototype).pushRun=function(C$t,C$e){this.runStart[this.stackSize]=C$t,this.runLength[this.stackSize]=C$e,this.stackSize+=1},C$e.mergeRuns=function(){for(;1<this.stackSize;){var C$t=this.stackSize-2;if(1<=C$t&&this.runLength[C$t-1]<=this.runLength[C$t]+this.runLength[C$t+1]||2<=C$t&&this.runLength[C$t-2]<=this.runLength[C$t]+this.runLength[C$t-1])this.runLength[C$t-1]<this.runLength[C$t+1]&&C$t--;else if(this.runLength[C$t]>this.runLength[C$t+1])break;this.mergeAt(C$t)}},C$e.forceMergeRuns=function(){for(;1<this.stackSize;){var C$t=this.stackSize-2;0<C$t&&this.runLength[C$t-1]<this.runLength[C$t+1]&&C$t--,this.mergeAt(C$t)}},C$e.mergeAt=function(C$t){var C$e=this.compare,C$i=this.array,C$n=this.runStart[C$t],C$r=this.runLength[C$t],C$s=this.runStart[C$t+1],C$o=this.runLength[C$t+1],C$t=(this.runLength[C$t]=C$r+C$o,C$t===this.stackSize-3&&(this.runStart[C$t+1]=this.runStart[C$t+2],this.runLength[C$t+1]=this.runLength[C$t+2]),this.stackSize--,C$g(C$i[C$s],C$i,C$n,C$r,0,C$e));C$n+=C$t,0!=(C$r-=C$t)&&0!==(C$o=C$y(C$i[C$n+C$r-1],C$i,C$s,C$o,C$o-1,C$e))&&(C$r<=C$o?this.mergeLow(C$n,C$r,C$s,C$o):this.mergeHigh(C$n,C$r,C$s,C$o))},C$e.mergeLow=function(C$h,C$t,C$u,C$e){for(var C$_=this.compare,C$i=this.array,C$n=this.tmp,C$r=0,C$r=0;C$r<C$t;C$r++)C$n[C$r]=C$i[C$h+C$r];var C$s=0,C$o=C$u,C$a=C$h;if(C$i[C$a++]=C$i[C$o++],0!=--C$e)if(1!==C$t){for(var C$d=this.minGallop;;){var C$c=0,C$l=0,C$f=!1;do{if(C$_(C$i[C$o],C$n[C$s])<0){if(C$i[C$a++]=C$i[C$o++],C$l++,(C$c=0)==--C$e){C$f=!0;break}}else if(C$i[C$a++]=C$n[C$s++],C$c++,C$l=0,1==--C$t){C$f=!0;break}}while((C$c|C$l)<C$d);if(C$f)break;do{if(0!==(C$c=C$g(C$i[C$o],C$n,C$s,C$t,0,C$_))){for(C$r=0;C$r<C$c;C$r++)C$i[C$a+C$r]=C$n[C$s+C$r];if(C$a+=C$c,C$s+=C$c,(C$t-=C$c)<=1){C$f=!0;break}}if(C$i[C$a++]=C$i[C$o++],0==--C$e){C$f=!0;break}if(0!==(C$l=C$y(C$n[C$s],C$i,C$o,C$e,0,C$_))){for(C$r=0;C$r<C$l;C$r++)C$i[C$a+C$r]=C$i[C$o+C$r];if(C$a+=C$l,C$o+=C$l,0===(C$e-=C$l)){C$f=!0;break}}if(C$i[C$a++]=C$n[C$s++],1==--C$t){C$f=!0;break}}while(C$d--,7<=C$c||7<=C$l);if(C$f)break;C$d<0&&(C$d=0),C$d+=2}if((this.minGallop=C$d)<1&&(this.minGallop=1),1===C$t){for(C$r=0;C$r<C$e;C$r++)C$i[C$a+C$r]=C$i[C$o+C$r];C$i[C$a+C$e]=C$n[C$s]}else{if(0===C$t)throw new Error("mergeLow preconditions were not respected");for(C$r=0;C$r<C$t;C$r++)C$i[C$a+C$r]=C$n[C$s+C$r]}}else{for(C$r=0;C$r<C$e;C$r++)C$i[C$a+C$r]=C$i[C$o+C$r];C$i[C$a+C$e]=C$n[C$s]}else for(C$r=0;C$r<C$t;C$r++)C$i[C$a+C$r]=C$n[C$s+C$r]},C$e.mergeHigh=function(C$h,C$t,C$u,C$e){for(var C$_=this.compare,C$i=this.array,C$n=this.tmp,C$r=0,C$r=0;C$r<C$e;C$r++)C$n[C$r]=C$i[C$u+C$r];var C$s=C$h+C$t-1,C$d=C$e-1,C$o=C$u+C$e-1,C$a=0,C$f=0;if(C$i[C$o--]=C$i[C$s--],0!=--C$t)if(1!==C$e){for(var C$p=this.minGallop;;){var C$c=0,C$l=0,C$m=!1;do{if(C$_(C$n[C$d],C$i[C$s])<0){if(C$i[C$o--]=C$i[C$s--],C$c++,(C$l=0)==--C$t){C$m=!0;break}}else if(C$i[C$o--]=C$n[C$d--],C$l++,C$c=0,1==--C$e){C$m=!0;break}}while((C$c|C$l)<C$p);if(C$m)break;do{if(0!==(C$c=C$t-C$g(C$n[C$d],C$i,C$h,C$t,C$t-1,C$_))){for(C$t-=C$c,C$f=(C$o-=C$c)+1,C$a=(C$s-=C$c)+1,C$r=C$c-1;0<=C$r;C$r--)C$i[C$f+C$r]=C$i[C$a+C$r];if(0===C$t){C$m=!0;break}}if(C$i[C$o--]=C$n[C$d--],1==--C$e){C$m=!0;break}if(0!==(C$l=C$e-C$y(C$i[C$s],C$n,0,C$e,C$e-1,C$_))){for(C$e-=C$l,C$f=(C$o-=C$l)+1,C$a=(C$d-=C$l)+1,C$r=0;C$r<C$l;C$r++)C$i[C$f+C$r]=C$n[C$a+C$r];if(C$e<=1){C$m=!0;break}}if(C$i[C$o--]=C$i[C$s--],0==--C$t){C$m=!0;break}}while(C$p--,7<=C$c||7<=C$l);if(C$m)break;C$p<0&&(C$p=0),C$p+=2}if((this.minGallop=C$p)<1&&(this.minGallop=1),1===C$e){for(C$f=(C$o-=C$t)+1,C$a=(C$s-=C$t)+1,C$r=C$t-1;0<=C$r;C$r--)C$i[C$f+C$r]=C$i[C$a+C$r];C$i[C$o]=C$n[C$d]}else{if(0===C$e)throw new Error("mergeHigh preconditions were not respected");for(C$a=C$o-(C$e-1),C$r=0;C$r<C$e;C$r++)C$i[C$a+C$r]=C$n[C$r]}}else{for(C$f=(C$o-=C$t)+1,C$a=(C$s-=C$t)+1,C$r=C$t-1;0<=C$r;C$r--)C$i[C$f+C$r]=C$i[C$a+C$r];C$i[C$o]=C$n[C$d]}else for(C$a=C$o-(C$e-1),C$r=0;C$r<C$e;C$r++)C$i[C$a+C$r]=C$n[C$r]};var C$e,C$d=C$i;function C$i(C$t,C$e){this.array=C$t,this.compare=C$e,this.minGallop=7,this.length=C$t.length,this.tmpStorageLength=256,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength),this.stackSize=0}C$r.exports=C$t.default},{}],329:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;for(var C$n=Array(8),C$r=0;C$r<8;++C$r)C$n[C$r]=[];function C$s(C$t){var C$e,C$i=(65535<C$t)<<4;return(C$i=(C$i|=C$e=(255<(C$t>>>=C$i))<<3)|(C$e=(15<(C$t>>>=C$e))<<2)|(C$e=(3<(C$t>>>=C$e))<<1))|(C$t>>>=C$e)>>1}function C$o(C$t){var C$t=function(C$t){for(var C$e=16;C$e<=1<<28;C$e*=16)if(C$t<=C$e)return C$e;return 0}(C$t),C$e=C$n[C$s(C$t)>>2];return 0<C$e.length?C$e.pop():new ArrayBuffer(C$t)}C$i.default={alloc_int8:function(C$t){var C$e=new Int8Array(C$o(C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_uint8:function(C$t){var C$e=new Uint8Array(C$o(C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_int16:function(C$t){var C$e=new Int16Array(C$o(2*C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_uint16:function(C$t){var C$e=new Uint16Array(C$o(2*C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_int32:function(C$t){var C$e=new Int32Array(C$o(4*C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_uint32:function(C$t){var C$e=new Uint32Array(C$o(4*C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_float32:function(C$t){var C$e=new Float32Array(C$o(4*C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_float64:function(C$t){var C$e=new Float64Array(C$o(8*C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},alloc_dataview:function(C$t){var C$e=new DataView(C$o(C$t),0,C$t);return C$e.length!==C$t?C$e.subarray(0,C$t):C$e},free:function(C$t){C$t=C$t.buffer,C$n[C$s(C$t.byteLength)>>2].push(C$t)},reset:function(){for(var C$t=Array(8),C$e=0;C$e<8;++C$e)C$t[C$e]=[]}},C$e.exports=C$i.default},{}],330:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=function(C$t,C$e){var C$i,C$n=C$t.length,C$r=C$e^C$n,C$s=0;for(;4<=C$n;)C$i=1540483477*(65535&(C$i=255&C$t.charCodeAt(C$s)|(255&C$t.charCodeAt(++C$s))<<8|(255&C$t.charCodeAt(++C$s))<<16|(255&C$t.charCodeAt(++C$s))<<24))+((1540483477*(C$i>>>16)&65535)<<16),C$r=1540483477*(65535&C$r)+((1540483477*(C$r>>>16)&65535)<<16)^(C$i=1540483477*(65535&(C$i^=C$i>>>24))+((1540483477*(C$i>>>16)&65535)<<16)),C$n-=4,++C$s;switch(C$n){case 3:C$r^=(255&C$t.charCodeAt(C$s+2))<<16;case 2:C$r^=(255&C$t.charCodeAt(C$s+1))<<8;case 1:C$r=1540483477*(65535&(C$r^=255&C$t.charCodeAt(C$s)))+((1540483477*(C$r>>>16)&65535)<<16)}return C$r=1540483477*(65535&(C$r^=C$r>>>13))+((1540483477*(C$r>>>16)&65535)<<16),(C$r^=C$r>>>15)>>>0},C$e.exports=C$i.default},{}],331:[function(C$t,C$h,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$r=C$t("../../core/value-types"),C$i=C$_(C$t("../core/base-renderer")),C$u=C$_(C$t("../enums")),C$t=C$t("../memop");function C$_(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}function C$d(C$n){return function(){var C$t,C$e,C$i=C$f(C$n);return C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$f(this).constructor,Reflect.construct(C$i,arguments,C$t)):C$i.apply(this,arguments),C$i=this,!(C$e=C$t)||"object"!=typeof C$e&&"function"!=typeof C$e?C$s(C$i):C$e}}function C$s(C$t){if(void 0===C$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$t}function C$f(C$t){return(C$f=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$n,C$p=new Float32Array(16),C$m=new Float32Array(16),C$y=new Float32Array(16),C$g=new Float32Array(16),C$v=new Float32Array(4),C$x=new Float32Array(64),C$b=[],C$A=new Float32Array(4),C$o=new C$r.Vec4(0,0,0,0),C$C=new C$r.Vec3(0,0,0),C$a=new C$r.Vec3(0,0,0),C$c=new C$t.RecyclePool(function(){return new Float32Array(16)},8),C$t=(C$n=C$i.default,C$t=C$n,(C$i=C$l).prototype=Object.create(C$t.prototype),(C$i.prototype.constructor=C$i).__proto__=C$t,C$d(C$l),(C$i=C$l.prototype).reset=function(){C$c.reset(),C$n.prototype.reset.call(this)},C$i.render=function(C$t,C$e){this.reset(),this._time[0]+=C$e,this._device.setUniform("cc_time",this._time),this._updateLights(C$t);for(var C$i=this._device._gl.canvas,C$n=0;C$n<C$t._cameras.length;++C$n){var C$r=this._requestView(),C$s=C$i.width,C$o=C$i.height;C$t._cameras.data[C$n].extractView(C$r,C$s,C$o)}this._viewPools.sort(function(C$t,C$e){return C$t._priority-C$e._priority});for(var C$a=0;C$a<this._viewPools.length;++C$a){var C$c=this._viewPools.data[C$a];this._render(C$c,C$t)}},C$i.renderCamera=function(C$t,C$e){this.reset();var C$i=this._device._gl.canvas,C$n=C$i.width,C$i=C$i.height,C$r=this._requestView();C$t.extractView(C$r,C$n,C$i),this._render(C$r,C$e)},C$i._updateLights=function(C$t){this._lights.length=0,this._shadowLights.length=0;for(var C$e=C$t._lights,C$i=0;C$i<C$e.length;++C$i){var C$n,C$r=C$e.data[C$i];C$r.update(this._device),C$r.shadowType!==C$u.default.SHADOW_NONE?(this._shadowLights.length<2&&this._shadowLights.splice(0,0,C$r),C$n=this._requestView(),C$r.extractView(C$n,["shadowcast"]),this._lights.splice(0,0,C$r)):this._lights.push(C$r)}this._updateLightDefines(),this._numLights=C$e._count},C$i._updateLightDefines=function(){for(var C$t=this._defines,C$e=0;C$e<this._lights.length;++C$e){var C$i=this._lights[C$e];C$t["CC_LIGHT_"+C$e+"_TYPE"]=C$i._type,C$t["CC_SHADOW_"+C$e+"_TYPE"]=C$i._shadowType}C$t.CC_NUM_LIGHTS=Math.min(4,this._lights.length),C$t.CC_NUM_SHADOW_LIGHTS=Math.min(4,this._shadowLights.length)},C$i._submitLightsUniforms=function(){var C$t=this._device;if(0<this._lights.length){for(var C$e=C$c.add(),C$i=C$c.add(),C$n=C$c.add(),C$r=Math.min(4,this._lights.length),C$s=0;C$s<C$r;++C$s){var C$o=this._lights[C$s],C$a=4*C$s;C$n.set(C$o._colorUniform,C$a),C$i.set(C$o._directionUniform,C$a),C$e.set(C$o._positionUniform,C$a),C$e[3+C$a]=C$o._range,C$o._type===C$u.default.LIGHT_SPOT?(C$i[3+C$a]=C$o._spotUniform[0],C$n[3+C$a]=C$o._spotUniform[1]):(C$i[3+C$a]=0,C$n[3+C$a]=0)}C$t.setUniform("cc_lightDirection",C$i),C$t.setUniform("cc_lightColor",C$n),C$t.setUniform("cc_lightPositionAndRange",C$e)}},C$i._submitShadowStageUniforms=function(C$t){var C$e=C$t._shadowLight,C$i=C$A;C$i[0]=C$e.shadowMinDepth,C$i[1]=C$e.shadowMaxDepth,C$i[2]=C$e.shadowDepthScale,C$i[3]=C$e.shadowDarkness,this._device.setUniform("cc_shadow_map_lightViewProjMatrix",C$r.Mat4.toArray(C$g,C$t._matViewProj)),this._device.setUniform("cc_shadow_map_info",C$i),this._device.setUniform("cc_shadow_map_bias",C$e.shadowBias),this._defines.CC_SHADOW_TYPE=C$e._shadowType},C$i._submitOtherStagesUniforms=function(){for(var C$t=C$c.add(),C$e=0;C$e<this._shadowLights.length;++C$e){var C$i=this._shadowLights[C$e],C$n=(C$n=C$b[C$e])||(C$b[C$e]=new Float32Array(C$x.buffer,64*C$e,16)),C$n=(C$r.Mat4.toArray(C$n,C$i.viewProjMatrix),4*C$e);C$t[C$n]=C$i.shadowMinDepth,C$t[1+C$n]=C$i.shadowMaxDepth,C$t[2+C$n]=C$i._shadowResolution,C$t[3+C$n]=C$i.shadowDarkness}this._device.setUniform("cc_shadow_lightViewProjMatrix",C$x),this._device.setUniform("cc_shadow_info",C$t)},C$i._sortItems=function(C$t){C$t.sort(function(C$t,C$e){return C$t.passes.length!==C$e.passes.length?C$t.passes.length-C$e.passes.length:C$t.sortKey-C$e.sortKey})},C$i._shadowStage=function(C$t,C$e){this._submitShadowStageUniforms(C$t);for(var C$i=0;C$i<C$e.length;++C$i){var C$n=C$e.data[C$i];C$n.effect.getDefine("CC_CASTING_SHADOW")&&this._draw(C$n)}},C$i._drawItems=function(C$t,C$e){var C$i=this._shadowLights;if(0===C$i.length&&0===this._numLights)for(var C$n=0;C$n<C$e.length;++C$n){var C$r=C$e.data[C$n];this._draw(C$r)}else for(var C$s=0;C$s<C$e.length;++C$s){for(var C$o=C$e.data[C$s],C$a=0;C$a<C$i.length;++C$a)this._device.setTexture("cc_shadow_map_"+C$a,C$i[C$a].shadowMap,this._allocTextureUnit());this._draw(C$o)}},C$i._opaqueStage=function(C$t,C$e){C$t.getPosition(C$o),this._device.setUniform("cc_matView",C$r.Mat4.toArray(C$p,C$t._matView)),this._device.setUniform("cc_matViewInv",C$r.Mat4.toArray(C$m,C$t._matViewInv)),this._device.setUniform("cc_matpProj",C$r.Mat4.toArray(C$y,C$t._matProj)),this._device.setUniform("cc_matViewProj",C$r.Mat4.toArray(C$g,C$t._matViewProj)),this._device.setUniform("cc_cameraPos",C$r.Vec4.toArray(C$v,C$o)),this._submitLightsUniforms(),this._submitOtherStagesUniforms(),this._drawItems(C$t,C$e)},C$i._transparentStage=function(C$t,C$e){C$t.getPosition(C$o),C$t.getForward(C$C),this._device.setUniform("cc_matView",C$r.Mat4.toArray(C$p,C$t._matView)),this._device.setUniform("cc_matViewInv",C$r.Mat4.toArray(C$m,C$t._matViewInv)),this._device.setUniform("cc_matpProj",C$r.Mat4.toArray(C$y,C$t._matProj)),this._device.setUniform("cc_matViewProj",C$r.Mat4.toArray(C$g,C$t._matViewProj)),this._device.setUniform("cc_cameraPos",C$r.Vec4.toArray(C$v,C$o)),this._submitLightsUniforms(),this._submitOtherStagesUniforms();for(var C$i=0;C$i<C$e.length;++C$i){var C$n=C$e.data[C$i];C$n.node.getWorldPosition(C$a),C$r.Vec3.sub(C$a,C$a,C$o),C$n.sortKey=-C$r.Vec3.dot(C$a,C$C)}this._sortItems(C$e),this._drawItems(C$t,C$e)},C$l);function C$l(C$t,C$e){C$t=C$n.call(this,C$t,C$e)||this;return C$t._time=new Float32Array(4),C$t._lights=[],C$t._shadowLights=[],C$t._numLights=0,C$t._defines={},C$t._registerStage("shadowcast",C$t._shadowStage.bind(C$s(C$t))),C$t._registerStage("opaque",C$t._opaqueStage.bind(C$s(C$t))),C$t._registerStage("transparent",C$t._transparentStage.bind(C$s(C$t))),C$t}C$e.default=C$t,C$h.exports=C$e.default},{"../../core/value-types":279,"../core/base-renderer":301,"../enums":307,"../memop":324}],332:[function(C$t,C$i,C$e){"use strict";C$e.__esModule=!0,C$e.default=void 0;var C$a=C$t("../../core/value-types"),C$_=C$t("../../core/geom-utils"),C$c=(C$t=C$t("../enums"))&&C$t.__esModule?C$t:{default:C$t};function C$s(C$t,C$e){for(var C$i=0;C$i<C$e.length;C$i++){var C$n=C$e[C$i];C$n.enumerable=C$n.enumerable||!1,C$n.configurable=!0,"value"in C$n&&(C$n.writable=!0),Object.defineProperty(C$t,C$n.key,C$n)}}var C$d,C$r=new C$a.Mat4,C$f=new C$a.Mat4,C$p=new C$a.Mat4,C$n=new C$a.Mat4,C$o=new C$a.Mat4,C$l=new C$a.Mat4,C$h=new C$a.Vec3,C$u=new C$a.Vec3,C$m=((C$t=C$y.prototype).setCullingMask=function(C$t){this._cullingMask=C$t},C$t.getNode=function(){return this._node},C$t.setNode=function(C$t){this._node=C$t},C$t.getType=function(){return this._projection},C$t.setType=function(C$t){this._projection=C$t},C$t.getPriority=function(){return this._priority},C$t.setPriority=function(C$t){this._priority=C$t},C$t.getOrthoHeight=function(){return this._orthoHeight},C$t.setOrthoHeight=function(C$t){this._orthoHeight=C$t},C$t.getFov=function(){return this._fov},C$t.setFov=function(C$t){this._fov=C$t},C$t.getNear=function(){return this._near},C$t.setNear=function(C$t){this._near=C$t},C$t.getFar=function(){return this._far},C$t.setFar=function(C$t){this._far=C$t},C$t.getColor=function(C$t){return C$a.Vec4.copy(C$t,this._color)},C$t.setColor=function(C$t,C$e,C$i,C$n){C$a.Vec4.set(this._color,C$t,C$e,C$i,C$n)},C$t.getDepth=function(){return this._depth},C$t.setDepth=function(C$t){this._depth=C$t},C$t.getStencil=function(){return this._stencil},C$t.setStencil=function(C$t){this._stencil=C$t},C$t.getClearFlags=function(){return this._clearFlags},C$t.setClearFlags=function(C$t){this._clearFlags=C$t},C$t.getRect=function(C$t){return C$t.x=this._rect.x,C$t.y=this._rect.y,C$t.w=this._rect.w,C$t.h=this._rect.h,C$t},C$t.setRect=function(C$t,C$e,C$i,C$n){this._rect.x=C$t,this._rect.y=C$e,this._rect.w=C$i,this._rect.h=C$n},C$t.getStages=function(){return this._stages},C$t.setStages=function(C$t){this._stages=C$t},C$t.getFramebuffer=function(){return this._framebuffer},C$t.setFrameBuffer=function(C$t){this._framebuffer=C$t},C$t._calcMatrices=function(C$t,C$e){this._node.getWorldRT(C$p),C$a.Mat4.invert(C$f,C$p);var C$t=C$t/C$e;this._projection===C$c.default.PROJ_PERSPECTIVE?C$a.Mat4.perspective(C$n,this._fov,C$t,this._near,this._far):(C$e=this._orthoHeight*C$t,C$t=this._orthoHeight,C$a.Mat4.ortho(C$n,-C$e,C$e,-C$t,C$t,this._near,this._far)),C$a.Mat4.mul(C$o,C$n,C$f),C$a.Mat4.invert(C$l,C$o)},C$t.extractView=function(C$t,C$e,C$i){this._framebuffer&&(C$e=this._framebuffer._width,C$i=this._framebuffer._height),C$t._priority=this._priority,C$t._rect.x=this._rect.x*C$e,C$t._rect.y=this._rect.y*C$i,C$t._rect.w=this._rect.w*C$e,C$t._rect.h=this._rect.h*C$i,this.getColor(C$t._color),C$t._depth=this._depth,C$t._stencil=this._stencil,C$t._clearFlags=this._clearFlags,C$t._clearModel=this._clearModel,C$t._stages=this._stages,C$t._framebuffer=this._framebuffer,this._calcMatrices(C$e,C$i),C$a.Mat4.copy(C$t._matView,C$f),C$a.Mat4.copy(C$t._matViewInv,C$p),C$a.Mat4.copy(C$t._matProj,C$n),C$a.Mat4.copy(C$t._matViewProj,C$o),C$a.Mat4.copy(C$t._matInvViewProj,C$l),C$t._cullingMask=this._cullingMask},C$t.screenPointToRay=function(C$t,C$e,C$i,C$n,C$r){if(!cc.geomUtils)return C$r;C$r=C$r||new C$_.Ray,this._calcMatrices(C$i,C$n);var C$s=this._rect.x*C$i,C$o=this._rect.y*C$n,C$i=this._rect.w*C$i,C$n=this._rect.h*C$n;return C$a.Vec3.set(C$u,(C$t-C$s)/C$i*2-1,(C$e-C$o)/C$n*2-1,1),C$a.Vec3.transformMat4(C$u,C$u,C$l),this._projection===C$c.default.PROJ_PERSPECTIVE?this._node.getWorldPosition(C$h):(C$a.Vec3.set(C$h,(C$t-C$s)/C$i*2-1,(C$e-C$o)/C$n*2-1,-1),C$a.Vec3.transformMat4(C$h,C$h,C$l)),C$_.Ray.fromPoints(C$r,C$h,C$u)},C$t.screenToWorld=function(C$t,C$e,C$i,C$n){this._calcMatrices(C$i,C$n);var C$r=this._rect.x*C$i,C$s=this._rect.y*C$n,C$i=this._rect.w*C$i,C$n=this._rect.h*C$n;return this._projection===C$c.default.PROJ_PERSPECTIVE?(C$a.Vec3.set(C$t,(C$e.x-C$r)/C$i*2-1,(C$e.y-C$s)/C$n*2-1,.9999),C$a.Vec3.transformMat4(C$t,C$t,C$l),this._node.getWorldPosition(C$h),C$a.Vec3.lerp(C$t,C$h,C$t,(0,C$a.lerp)(this._near/this._far,1,C$e.z))):(C$a.Vec3.set(C$t,(C$e.x-C$r)/C$i*2-1,(C$e.y-C$s)/C$n*2-1,2*C$e.z-1),C$a.Vec3.transformMat4(C$t,C$t,C$l)),C$t},C$t.worldToScreen=function(C$t,C$e,C$i,C$n){this._calcMatrices(C$i,C$n);var C$r=this._rect.x*C$i,C$s=this._rect.y*C$n,C$i=this._rect.w*C$i,C$n=this._rect.h*C$n;return C$a.Vec3.transformMat4(C$t,C$e,C$o),C$t.x=C$r+.5*(C$t.x+1)*C$i,C$t.y=C$s+.5*(C$t.y+1)*C$n,C$t.z=.5*C$t.z+.5,C$t},C$t.worldMatrixToScreen=function(C$t,C$e,C$i,C$n){this._calcMatrices(C$i,C$n),C$a.Mat4.mul(C$t,C$o,C$e);C$e=C$i/2,C$i=C$n/2;return C$a.Mat4.identity(C$r),C$a.Mat4.transform(C$r,C$r,C$a.Vec3.set(C$h,C$e,C$i,0)),C$a.Mat4.scale(C$r,C$r,C$a.Vec3.set(C$h,C$e,C$i,1)),C$a.Mat4.mul(C$t,C$r,C$t),C$t},C$t=C$y,(C$m=[{key:"cullingMask",get:function(){return this._cullingMask},set:function(C$t){this._cullingMask=C$t}}])&&C$s(C$t.prototype,C$m),C$d&&C$s(C$t,C$d),C$y);function C$y(){this._poolID=-1,this._node=null,this._projection=C$c.default.PROJ_PERSPECTIVE,this._priority=0,this._color=new C$a.Vec4(.2,.3,.47,1),this._depth=1,this._stencil=0,this._clearFlags=C$c.default.CLEAR_COLOR|C$c.default.CLEAR_DEPTH,this._clearModel=null,this._stages=[],this._framebuffer=null,this._near=.01,this._far=1e3,this._fov=Math.PI/4,this._rect={x:0,y:0,w:1,h:1},this._orthoHeight=10,this._cullingMask=4294967295}C$e.default=C$m,C$i.exports=C$e.default},{"../../core/geom-utils":123,"../../core/value-types":279,"../enums":307}],333:[function(C$t,C$e,C$i){"use strict";var C$n;function C$r(){this._type="default",this._poolID=-1,this._node=null,this._inputAssembler=null,this._effect=null,this._viewID=-1,this._cameraID=-1,this._userKey=-1,this._castShadow=!1,this._boundingShape=null}C$i.__esModule=!0,C$i.default=void 0,(C$n=C$r.prototype).setNode=function(C$t){this._node=C$t},C$n.setInputAssembler=function(C$t){this._inputAssembler=C$t},C$n.setEffect=function(C$t){this._effect=C$t},C$n.setUserKey=function(C$t){this._userKey=C$t},C$n.extractDrawItem=function(C$t){C$t.model=this,C$t.node=this._node,C$t.ia=this._inputAssembler,C$t.effect=this._effect},C$i.default=C$r,C$e.exports=C$i.default},{}],334:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=C$t("../memop");function C$r(C$t){this._lights=new C$n.FixedArray(16),this._models=new C$n.FixedArray(16),this._cameras=new C$n.FixedArray(16),this._debugCamera=null,this._app=C$t,this._views=[]}(C$t=C$r.prototype)._add=function(C$t,C$e){-1===C$e._poolID&&(C$t.push(C$e),C$e._poolID=C$t.length-1)},C$t._remove=function(C$t,C$e){-1!==C$e._poolID&&(C$t.data[C$t.length-1]._poolID=C$e._poolID,C$t.fastRemove(C$e._poolID),C$e._poolID=-1)},C$t.reset=function(){for(var C$t=0;C$t<this._models.length;++C$t)this._models.data[C$t]._viewID=-1},C$t.setDebugCamera=function(C$t){this._debugCamera=C$t},C$t.getCameraCount=function(){return this._cameras.length},C$t.getCamera=function(C$t){return this._cameras.data[C$t]},C$t.addCamera=function(C$t){this._add(this._cameras,C$t)},C$t.removeCamera=function(C$t){this._remove(this._cameras,C$t)},C$t.getModelCount=function(){return this._models.length},C$t.getModel=function(C$t){return this._models.data[C$t]},C$t.addModel=function(C$t){this._add(this._models,C$t)},C$t.removeModel=function(C$t){this._remove(this._models,C$t)},C$t.getLightCount=function(){return this._lights.length},C$t.getLight=function(C$t){return this._lights.data[C$t]},C$t.addLight=function(C$t){this._add(this._lights,C$t)},C$t.removeLight=function(C$t){this._remove(this._lights,C$t)},C$t.addView=function(C$t){-1===this._views.indexOf(C$t)&&this._views.push(C$t)},C$t.removeView=function(C$t){C$t=this._views.indexOf(C$t);-1!==C$t&&this._views.splice(C$t,1)},C$i.default=C$r,C$e.exports=C$i.default},{"../memop":324}],335:[function(C$t,C$h,C$e){"use strict";C$e.__esModule=!0,C$e.getInspectorProps=function(C$t){var C$e={type:C$t.type},C$t=(Object.assign(C$e,C$t.editor||C$t.inspector),C$e.defines=C$t.defines,C$e.value=C$_(C$e.type)(C$t.value),C$d(C$e.type));C$e.typeName=C$f[C$t]||C$t,C$e.valueCtor=C$c[C$e.type],"cc.Texture2D"==C$e.typeName&&(C$e.typeName="cc.Asset",C$e.assetType="cc.Texture2D");return C$e},C$e.getClassName=C$e.getInstanceCtor=C$e.getInstanceType=C$e.enums2default=C$e.ctor2enums=void 0;var C$i,C$n=C$o(C$t("./enums")),C$r=C$t("../core/value-types"),C$s=C$o(C$t("../core/assets/CCTexture2D"));function C$o(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}var C$t=C$t("./gfx/texture-2d"),C$a=cc.Object,C$u=((C$i={})[Boolean]=function(C$t){return C$t||!1},C$i[Number]=function(C$t){return C$t?ArrayBuffer.isView(C$t)?C$t[0]:C$t:0},C$i[C$r.Vec2]=function(C$t){return C$t?cc.v2(C$t[0],C$t[1]):cc.v2()},C$i[C$r.Vec3]=function(C$t){return C$t?cc.v3(C$t[0],C$t[1],C$t[2]):cc.v3()},C$i[C$r.Vec4]=function(C$t){return C$t?cc.v4(C$t[0],C$t[1],C$t[2],C$t[3]):cc.v4()},C$i[C$r.Color]=function(C$t){return C$t?cc.color(255*C$t[0],255*C$t[1],255*C$t[2],255*(C$t[3]||1)):cc.color()},C$i[C$r.Mat4]=function(C$t){return C$t?cc.mat4(C$t[0],C$t[1],C$t[2],C$t[3],C$t[4],C$t[5],C$t[6],C$t[7],C$t[8],C$t[9],C$t[10],C$t[11],C$t[12],C$t[13],C$t[14],C$t[15]):cc.mat4()},C$i[C$s.default]=function(){return null},C$i[C$a]=function(){return null},C$i),C$c=((C$i={})[C$n.default.PARAM_INT]=Number,C$i[C$n.default.PARAM_INT2]=C$r.Vec2,C$i[C$n.default.PARAM_INT3]=C$r.Vec3,C$i[C$n.default.PARAM_INT4]=C$r.Vec4,C$i[C$n.default.PARAM_FLOAT]=Number,C$i[C$n.default.PARAM_FLOAT2]=C$r.Vec2,C$i[C$n.default.PARAM_FLOAT3]=C$r.Vec3,C$i[C$n.default.PARAM_FLOAT4]=C$r.Vec4,C$i[C$n.default.PARAM_MAT4]=C$r.Mat4,C$i[C$n.default.PARAM_TEXTURE_2D]=C$s.default,C$i.color=C$r.Color,C$i.number=Number,C$i.boolean=Boolean,C$i.default=C$a,C$i);(C$a={})[Number]=C$n.default.PARAM_FLOAT,C$a[C$r.Vec2]=C$n.default.PARAM_FLOAT2,C$a[C$r.Vec3]=C$n.default.PARAM_FLOAT3,C$a[C$r.Vec4]=C$n.default.PARAM_FLOAT4,C$a[C$r.Color]=C$n.default.PARAM_COLOR3,C$a[C$r.Color]=C$n.default.PARAM_COLOR4,C$a[C$r.Mat4]=C$n.default.PARAM_MAT4,C$a[C$s.default]=C$n.default.PARAM_TEXTURE_2D,C$a[C$t]=C$n.default.PARAM_TEXTURE_2D;function C$l(C$t){return C$c[C$t]||C$c.default}C$e.ctor2enums=C$a,(C$i={})[C$n.default.PARAM_INT]=new Uint32Array([0]),C$i[C$n.default.PARAM_INT2]=new Uint32Array([0,0]),C$i[C$n.default.PARAM_INT3]=new Uint32Array([0,0,0]),C$i[C$n.default.PARAM_INT4]=new Uint32Array([0,0,0,0]),C$i[C$n.default.PARAM_FLOAT]=new Float32Array([0]),C$i[C$n.default.PARAM_FLOAT2]=new Float32Array([0,0]),C$i[C$n.default.PARAM_FLOAT3]=new Float32Array([0,0,0]),C$i[C$n.default.PARAM_FLOAT4]=new Float32Array([0,0,0,0]),C$i[C$n.default.PARAM_MAT4]=cc.mat4().m,C$i[C$n.default.PARAM_TEXTURE_2D]=null,C$i.number=0,C$i.boolean=!1;var C$r=C$i,C$_=(C$e.enums2default=C$r,C$e.getInstanceType=C$l,function(C$t){return C$u[C$l(C$t)]}),C$d=(C$e.getInstanceCtor=C$_,function(C$t){return cc.js.getClassName(C$l(C$t))}),C$f=(C$e.getClassName=C$d,{Number:"number",Boolean:"boolean"})},{"../core/assets/CCTexture2D":50,"../core/value-types":279,"./enums":307,"./gfx/texture-2d":317}],336:[function(C$t,C$e,C$i){"use strict";var C$_=C$t("../compression/ZipUtils"),C$d=C$t("../compression/zlib.min"),C$n=C$t("../core/platform/js");function C$u(C$t){if(!C$t)return cc.color(0,0,0,255);var C$e;if(8===(C$t=-1!==C$t.indexOf("#")?C$t.substring(1):C$t).length)return C$e=parseInt(C$t.substr(0,2),16)||255,C$i=parseInt(C$t.substr(2,2),16)||0,C$n=parseInt(C$t.substr(4,2),16)||0,C$r=parseInt(C$t.substr(6,2),16)||0,cc.color(C$i,C$n,C$r,C$e);var C$i=parseInt(C$t.substr(0,2),16)||0,C$n=parseInt(C$t.substr(2,2),16)||0,C$r=parseInt(C$t.substr(4,2),16)||0;return cc.color(C$i,C$n,C$r,255)}function C$G(C$t,C$e){for(var C$i=[],C$n=C$t.getElementsByTagName("properties"),C$r=0;C$r<C$n.length;++C$r)for(var C$s=C$n[C$r].getElementsByTagName("property"),C$o=0;C$o<C$s.length;++C$o)C$i.push(C$s[C$o]);C$e=C$e||{};for(var C$a=0;C$a<C$i.length;C$a++){var C$c=C$i[C$a],C$h=C$c.getAttribute("name"),C$l=C$c.getAttribute("type")||"string",C$c=C$c.getAttribute("value");"int"===C$l?C$c=parseInt(C$c):"float"===C$l?C$c=parseFloat(C$c):"bool"===C$l?C$c="true"===C$c:"color"===C$l&&(C$c=C$u(C$c)),C$e[C$h]=C$c}return C$e}C$t("../core/platform/CCSAXParser"),cc.TMXLayerInfo=function(){this.properties={},this.name="",this._layerSize=null,this._tiles=[],this.visible=!0,this._opacity=0,this.ownTiles=!0,this._minGID=1e5,this._maxGID=0,this.offset=cc.v2(0,0)},cc.TMXLayerInfo.prototype={constructor:cc.TMXLayerInfo,getProperties:function(){return this.properties},setProperties:function(C$t){this.properties=C$t}},cc.TMXImageLayerInfo=function(){this.name="",this.visible=!0,this.width=0,this.height=0,this.offset=cc.v2(0,0),this._opacity=0,this._trans=new cc.Color(255,255,255,255),this.sourceImage=null},cc.TMXObjectGroupInfo=function(){this.properties={},this.name="",this._objects=[],this.visible=!0,this._opacity=0,this._color=new cc.Color(255,255,255,255),this.offset=cc.v2(0,0),this._draworder="topdown"},cc.TMXObjectGroupInfo.prototype={constructor:cc.TMXObjectGroupInfo,getProperties:function(){return this.properties},setProperties:function(C$t){this.properties=C$t}},cc.TMXTilesetInfo=function(){this.name="",this.firstGid=0,this.spacing=0,this.margin=0,this.sourceImage=null,this.imageSize=cc.size(0,0),this.tileOffset=cc.v2(0,0),this._tileSize=cc.size(0,0)},cc.TMXTilesetInfo.prototype={constructor:cc.TMXTilesetInfo,rectForGID:function(C$t,C$e){var C$e=C$e||cc.rect(0,0,0,0),C$i=(C$e.width=this._tileSize.width,C$e.height=this._tileSize.height,C$t=(C$t&=cc.TiledMap.TileFlag.FLIPPED_MASK)-parseInt(this.firstGid,10),parseInt((this.imageSize.width-2*this.margin+this.spacing)/(this._tileSize.width+this.spacing),10));return C$e.x=parseInt(C$t%C$i*(this._tileSize.width+this.spacing)+this.margin,10),C$e.y=parseInt(parseInt(C$t/C$i,10)*(this._tileSize.height+this.spacing)+this.margin,10),C$e}},cc.TMXMapInfo=function(C$t,C$e,C$i,C$n,C$r){this.properties=[],this.orientation=null,this.parentElement=null,this.parentGID=null,this.layerAttrs=0,this.storingCharacters=!1,this.currentString=null,this.renderOrder=cc.TiledMap.RenderOrder.RightDown,this._supportVersion=[1,2,0],this._parser=new cc.SAXParser,this._objectGroups=[],this._allChildren=[],this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0),this._layers=[],this._tilesets=[],this._imageLayers=[],this._tileProperties={},this._tileAnimations={},this._tsxMap=null,this._textures=null,this._staggerAxis=null,this._staggerIndex=null,this._hexSideLength=0,this._imageLayerTextures=null,this.initWithXML(C$t,C$e,C$i,C$n,C$r)},cc.TMXMapInfo.prototype={constructor:cc.TMXMapInfo,getOrientation:function(){return this.orientation},setOrientation:function(C$t){this.orientation=C$t},getStaggerAxis:function(){return this._staggerAxis},setStaggerAxis:function(C$t){this._staggerAxis=C$t},getStaggerIndex:function(){return this._staggerIndex},setStaggerIndex:function(C$t){this._staggerIndex=C$t},getHexSideLength:function(){return this._hexSideLength},setHexSideLength:function(C$t){this._hexSideLength=C$t},getMapSize:function(){return cc.size(this._mapSize.width,this._mapSize.height)},setMapSize:function(C$t){this._mapSize.width=C$t.width,this._mapSize.height=C$t.height},_getMapWidth:function(){return this._mapSize.width},_setMapWidth:function(C$t){this._mapSize.width=C$t},_getMapHeight:function(){return this._mapSize.height},_setMapHeight:function(C$t){this._mapSize.height=C$t},getTileSize:function(){return cc.size(this._tileSize.width,this._tileSize.height)},setTileSize:function(C$t){this._tileSize.width=C$t.width,this._tileSize.height=C$t.height},_getTileWidth:function(){return this._tileSize.width},_setTileWidth:function(C$t){this._tileSize.width=C$t},_getTileHeight:function(){return this._tileSize.height},_setTileHeight:function(C$t){this._tileSize.height=C$t},getLayers:function(){return this._layers},setLayers:function(C$t){this._allChildren.push(C$t),this._layers.push(C$t)},getImageLayers:function(){return this._imageLayers},setImageLayers:function(C$t){this._allChildren.push(C$t),this._imageLayers.push(C$t)},getTilesets:function(){return this._tilesets},setTilesets:function(C$t){this._tilesets.push(C$t)},getObjectGroups:function(){return this._objectGroups},setObjectGroups:function(C$t){this._allChildren.push(C$t),this._objectGroups.push(C$t)},getAllChildren:function(){return this._allChildren},getParentElement:function(){return this.parentElement},setParentElement:function(C$t){this.parentElement=C$t},getParentGID:function(){return this.parentGID},setParentGID:function(C$t){this.parentGID=C$t},getLayerAttribs:function(){return this.layerAttrs},setLayerAttribs:function(C$t){this.layerAttrs=C$t},getStoringCharacters:function(){return this.storingCharacters},setStoringCharacters:function(C$t){this.storingCharacters=C$t},getProperties:function(){return this.properties},setProperties:function(C$t){this.properties=C$t},initWithXML:function(C$t,C$e,C$i,C$n,C$r){return this._tilesets.length=0,this._layers.length=0,this._imageLayers.length=0,this._tsxMap=C$e,this._textures=C$i,this._imageLayerTextures=C$r,this._textureSizes=C$n,this._objectGroups.length=0,this._allChildren.length=0,this.properties.length=0,this._tileProperties={},this._tileAnimations={},this.currentString="",this.storingCharacters=!1,this.layerAttrs=cc.TMXLayerInfo.ATTRIB_NONE,this.parentElement=cc.TiledMap.NONE,this.parseXMLString(C$t)},parseXMLString:function(C$t,C$h){var C$t=this._parser._parseXML(C$t).documentElement,C$e=C$t.getAttribute("orientation"),C$u=C$t.getAttribute("staggeraxis"),C$_=C$t.getAttribute("staggerindex"),C$d=C$t.getAttribute("hexsidelength"),C$f=C$t.getAttribute("renderorder"),C$p=C$t.getAttribute("version")||"1.0.0";if("map"===C$t.nodeName){for(var C$m=C$p.split("."),C$y=this._supportVersion,C$i=0;C$i<C$y.length;C$i++){var C$g=parseInt(C$m[C$i])||0;if(C$y[C$i]<C$g){cc.logID(7216,C$p);break}}"orthogonal"===C$e?this.orientation=cc.TiledMap.Orientation.ORTHO:"isometric"===C$e?this.orientation=cc.TiledMap.Orientation.ISO:"hexagonal"===C$e?this.orientation=cc.TiledMap.Orientation.HEX:null!==C$e&&cc.logID(7217,C$e),this.renderOrder="right-up"===C$f?cc.TiledMap.RenderOrder.RightUp:"left-up"===C$f?cc.TiledMap.RenderOrder.LeftUp:"left-down"===C$f?cc.TiledMap.RenderOrder.LeftDown:cc.TiledMap.RenderOrder.RightDown,"x"===C$u?this.setStaggerAxis(cc.TiledMap.StaggerAxis.STAGGERAXIS_X):"y"===C$u&&this.setStaggerAxis(cc.TiledMap.StaggerAxis.STAGGERAXIS_Y),"odd"===C$_?this.setStaggerIndex(cc.TiledMap.StaggerIndex.STAGGERINDEX_ODD):"even"===C$_&&this.setStaggerIndex(cc.TiledMap.StaggerIndex.STAGGERINDEX_EVEN),C$d&&this.setHexSideLength(parseFloat(C$d));C$e=cc.size(0,0);C$e.width=parseFloat(C$t.getAttribute("width")),C$e.height=parseFloat(C$t.getAttribute("height")),this.setMapSize(C$e),(C$e=cc.size(0,0)).width=parseFloat(C$t.getAttribute("tilewidth")),C$e.height=parseFloat(C$t.getAttribute("tileheight")),this.setTileSize(C$e),this.properties=C$G(C$t)}var C$v=C$t.getElementsByTagName("tileset");for("map"!==C$t.nodeName&&(C$v=[]).push(C$t),C$c=0;C$c<C$v.length;C$c++){var C$n=C$v[C$c],C$r=C$n.getAttribute("source");if(C$r){var C$x=parseInt(C$n.getAttribute("firstgid")),C$r=this._tsxMap[C$r];C$r&&this.parseXMLString(C$r,C$x)}else for(var C$r=C$n.getElementsByTagName("image"),C$b=1<C$r.length,C$A=(C$P=C$r[0]).getAttribute("source"),C$C=(C$A.replace(/\\/g,"/"),C$n.getElementsByTagName("tile")),C$S=C$C&&C$C.length||1,C$s=null,C$T=C$n.getAttribute("name")||"",C$w=parseInt(C$n.getAttribute("spacing"))||0,C$E=parseInt(C$n.getAttribute("margin"))||0,C$M=(C$M=parseInt(C$h))||(parseInt(C$n.getAttribute("firstgid"))||0),C$I=cc.size(0,0),C$x=(C$I.width=parseFloat(C$n.getAttribute("tilewidth")),C$I.height=parseFloat(C$n.getAttribute("tileheight")),C$n.getElementsByTagName("tileoffset")[0]),C$B=cc.v2(0,0),C$o=(C$x&&(C$B.x=parseFloat(C$x.getAttribute("x")),C$B.y=parseFloat(C$x.getAttribute("y"))),null),C$R=0;C$R<C$S;C$R++)if(C$o&&!C$b||((C$o=new cc.TMXTilesetInfo).name=C$T,C$o.firstGid=C$M,C$o.spacing=C$w,C$o.margin=C$E,C$o._tileSize=C$I,C$o.tileOffset=C$B,C$o.sourceImage=this._textures[C$A],C$o.imageSize=this._textureSizes[C$A]||C$o.imageSize,C$o.sourceImage||cc.errorID(7221,C$A),this.setTilesets(C$o)),C$s=C$C&&C$C[C$R]){this.parentGID=parseInt(C$M)+parseInt(C$s.getAttribute("id")||0);var C$P,C$a=C$s.getElementsByTagName("image"),C$a=(C$a&&0<C$a.length&&((C$a=(C$P=C$a[0]).getAttribute("source")).replace(/\\/g,"/"),C$o.sourceImage=this._textures[C$a],C$o.sourceImage||cc.errorID(7221,C$a),(C$a=cc.size(0,0)).width=parseFloat(C$P.getAttribute("width")),C$a.height=parseFloat(C$P.getAttribute("height")),C$o._tileSize=C$a,C$o.firstGid=this.parentGID),this._tileProperties[this.parentGID]=C$G(C$s),C$s.getElementsByTagName("animation"));if(C$a&&0<C$a.length)for(var C$D=C$a[0].getElementsByTagName("frame"),C$a={frames:[],dt:0,frameIdx:0},C$L=(this._tileAnimations[this.parentGID]=C$a).frames,C$V=0;C$V<C$D.length;C$V++){var C$O=C$D[C$V],C$F=parseInt(C$M)+parseInt(C$O.getAttribute("tileid")),C$O=parseFloat(C$O.getAttribute("duration"));C$L.push({tileid:C$F,duration:C$O/1e3,grid:null})}}}for(var C$N=C$t.childNodes,C$c=0;C$c<C$N.length;C$c++){var C$k,C$l=C$N[C$c];this._shouldIgnoreNode(C$l)||("imagelayer"!==C$l.nodeName||(C$k=this._parseImageLayer(C$l))&&this.setImageLayers(C$k),"layer"===C$l.nodeName&&(C$k=this._parseLayer(C$l),this.setLayers(C$k)),"objectgroup"===C$l.nodeName&&(C$l=this._parseObjectGroup(C$l),this.setObjectGroups(C$l)))}return C$t},_shouldIgnoreNode:function(C$t){return 3===C$t.nodeType||8===C$t.nodeType||4===C$t.nodeType},_parseImageLayer:function(C$t){var C$e=C$t.getElementsByTagName("image");if(!C$e||0==C$e.length)return null;var C$i=new cc.TMXImageLayerInfo,C$n=(C$i.name=C$t.getAttribute("name"),C$i.offset.x=parseFloat(C$t.getAttribute("offsetx"))||0,C$i.offset.y=parseFloat(C$t.getAttribute("offsety"))||0,C$t.getAttribute("visible")),C$n=(C$i.visible=!("0"===C$n),C$t.getAttribute("opacity")||1),C$t=(C$i.opacity=parseInt(255*parseFloat(C$n))||255,C$e[0]),C$n=C$t.getAttribute("source");return C$i.sourceImage=this._imageLayerTextures[C$n],C$i.width=parseInt(C$t.getAttribute("width"))||0,C$i.height=parseInt(C$t.getAttribute("height"))||0,C$i.trans=C$u(C$t.getAttribute("trans")),C$i.sourceImage?C$i:(cc.errorID(7221,C$n),null)},_parseLayer:function(C$t){for(var C$e=C$t.getElementsByTagName("data")[0],C$i=new cc.TMXLayerInfo,C$n=(C$i.name=C$t.getAttribute("name"),cc.size(0,0)),C$n=(C$n.width=parseFloat(C$t.getAttribute("width")),C$n.height=parseFloat(C$t.getAttribute("height")),C$i._layerSize=C$n,C$t.getAttribute("visible")),C$n=(C$i.visible=!("0"===C$n),C$t.getAttribute("opacity")||1),C$r=(C$i._opacity=C$n?parseInt(255*parseFloat(C$n)):255,C$i.offset=cc.v2(parseFloat(C$t.getAttribute("offsetx"))||0,parseFloat(C$t.getAttribute("offsety"))||0),""),C$s=0;C$s<C$e.childNodes.length;C$s++)C$r+=C$e.childNodes[C$s].nodeValue;var C$r=C$r.trim(),C$n=C$e.getAttribute("compression"),C$o=C$e.getAttribute("encoding");if(C$n&&"gzip"!==C$n&&"zlib"!==C$n)return cc.logID(7218),null;switch(C$n){case"gzip":C$a=C$_.unzipBase64AsArray(C$r,4);break;case"zlib":var C$a=function(C$t){if(C$t.length%4!=0)return null;for(var C$e=C$t.length/4,C$i=window.Uint32Array?new Uint32Array(C$e):[],C$n=0;C$n<C$e;C$n++){var C$r=4*C$n;C$i[C$n]=C$t[C$r]+256*C$t[1+C$r]+65536*C$t[2+C$r]+C$t[3+C$r]*(1<<24)}return C$i}(new C$d.Inflate(C$_.Base64.decodeAsArray(C$r,1)).decompress());break;case null:case"":if("base64"===C$o)C$a=C$_.Base64.decodeAsArray(C$r,4);else if("csv"===C$o){C$a=[];for(var C$h=C$r.split(","),C$c=0;C$c<C$h.length;C$c++)C$a.push(parseInt(C$h[C$c]))}else{var C$u=C$e.getElementsByTagName("tile");C$a=[];for(var C$l=0;C$l<C$u.length;C$l++)C$a.push(parseInt(C$u[C$l].getAttribute("gid")))}break;default:this.layerAttrs===cc.TMXLayerInfo.ATTRIB_NONE&&cc.logID(7219)}return C$a&&(C$i._tiles=new Uint32Array(C$a)),C$i.properties=C$G(C$t),C$i},_parseObjectGroup:function(C$t){var C$e=new cc.TMXObjectGroupInfo,C$i=(C$e.name=C$t.getAttribute("name")||"",C$e.offset=cc.v2(parseFloat(C$t.getAttribute("offsetx")),parseFloat(C$t.getAttribute("offsety"))),C$t.getAttribute("opacity")||1),C$i=(C$e._opacity=C$i?parseInt(255*parseFloat(C$i)):255,C$t.getAttribute("visible")),C$i=(C$i&&0===parseInt(C$i)&&(C$e.visible=!1),C$t.getAttribute("color")),C$i=(C$i&&C$e._color.fromHEX(C$i),C$t.getAttribute("draworder")),C$n=(C$i&&(C$e._draworder=C$i),C$e.setProperties(C$G(C$t)),C$t.getElementsByTagName("object"));if(C$n){for(var C$r=0;C$r<C$n.length;C$r++){var C$s=C$n[C$r],C$o={},C$a=(C$o.id=C$s.getAttribute("id")||C$r,C$o.name=C$s.getAttribute("name")||"",C$o.width=parseFloat(C$s.getAttribute("width"))||0,C$o.height=parseFloat(C$s.getAttribute("height"))||0,C$o.x=parseFloat(C$s.getAttribute("x"))||0,C$o.y=parseFloat(C$s.getAttribute("y"))||0,C$o.rotation=parseFloat(C$s.getAttribute("rotation"))||0,C$G(C$s,C$o),C$s.getAttribute("visible")),C$a=(C$o.visible=!(C$a&&0===parseInt(C$a)),C$s.getElementsByTagName("text")),C$a=(C$a&&0<C$a.length&&(C$a=C$a[0],C$o.type=cc.TiledMap.TMXObjectType.TEXT,C$o.wrap="1"==C$a.getAttribute("wrap"),C$o.color=C$u(C$a.getAttribute("color")),C$o.halign=function(C$t){var C$e=cc.Label.HorizontalAlign;switch(C$t){case"center":return C$e.CENTER;case"right":return C$e.RIGHT;default:return C$e.LEFT}}(C$a.getAttribute("halign")),C$o.valign=function(C$t){var C$e=cc.Label.VerticalAlign;switch(C$t){case"center":return C$e.CENTER;case"bottom":return C$e.BOTTOM;default:return C$e.TOP}}(C$a.getAttribute("valign")),C$o.pixelsize=parseInt(C$a.getAttribute("pixelsize"))||16,C$o.text=C$a.childNodes[0].nodeValue),C$s.getAttribute("gid")),C$a=(C$a&&(C$o.gid=parseInt(C$a),C$o.type=cc.TiledMap.TMXObjectType.IMAGE),C$s.getElementsByTagName("ellipse")),C$a=(C$a&&0<C$a.length&&(C$o.type=cc.TiledMap.TMXObjectType.ELLIPSE),C$s.getElementsByTagName("polygon")),C$a=(C$a&&0<C$a.length&&(C$o.type=cc.TiledMap.TMXObjectType.POLYGON,(C$a=C$a[0].getAttribute("points"))&&(C$o.points=this._parsePointsString(C$a))),C$s.getElementsByTagName("polyline"));C$a&&0<C$a.length&&(C$o.type=cc.TiledMap.TMXObjectType.POLYLINE,(C$s=C$a[0].getAttribute("points"))&&(C$o.polylinePoints=this._parsePointsString(C$s))),C$o.type||(C$o.type=cc.TiledMap.TMXObjectType.RECT),C$e._objects.push(C$o)}"index"!==C$i&&C$e._objects.sort(function(C$t,C$e){return C$t.y-C$e.y})}return C$e},_parsePointsString:function(C$t){if(!C$t)return null;for(var C$e=[],C$i=C$t.split(" "),C$n=0;C$n<C$i.length;C$n++){var C$r=C$i[C$n].split(",");C$e.push({x:parseFloat(C$r[0]),y:parseFloat(C$r[1])})}return C$e},setTileAnimations:function(C$t){this._tileAnimations=C$t},getTileAnimations:function(){return this._tileAnimations},getTileProperties:function(){return this._tileProperties},setTileProperties:function(C$t){this._tileProperties=C$t},getCurrentString:function(){return this.currentString},setCurrentString:function(C$t){this.currentString=C$t}};C$t=cc.TMXMapInfo.prototype;C$n.getset(C$t,"mapWidth",C$t._getMapWidth,C$t._setMapWidth),C$n.getset(C$t,"mapHeight",C$t._getMapHeight,C$t._setMapHeight),C$n.getset(C$t,"tileWidth",C$t._getTileWidth,C$t._setTileWidth),C$n.getset(C$t,"tileHeight",C$t._getTileHeight,C$t._setTileHeight),cc.TMXLayerInfo.ATTRIB_NONE=1,cc.TMXLayerInfo.ATTRIB_BASE64=2,cc.TMXLayerInfo.ATTRIB_GZIP=4,cc.TMXLayerInfo.ATTRIB_ZLIB=8},{"../compression/ZipUtils":23,"../compression/zlib.min":26,"../core/platform/CCSAXParser":196,"../core/platform/js":209}],337:[function(C$t,C$e,C$h){"use strict";var C$i=C$t("../core/value-types"),C$u=(C$n=C$t("../core/assets/material/material-variant"))&&C$n.__esModule?C$n:{default:C$n};var C$n=C$t("../core/components/CCRenderComponent"),C$_=C$t("../core/assets/material/CCMaterial"),C$r=C$t("../core/renderer/render-flow"),C$s=cc.mat4(),C$o=cc.v2(),C$a=cc.v2(),C$c={row:0,col:0},C$l=cc.Class({name:"cc.TiledUserNodeData",extends:cc.Component,ctor:function(){this._index=-1,this._row=-1,this._col=-1,this._tiledLayer=null}}),C$t=cc.Class({name:"cc.TiledLayer",extends:C$n,editor:{inspector:"packages://inspector/inspectors/comps/tiled-layer.js"},ctor:function(){this._userNodeGrid={},this._userNodeMap={},this._userNodeDirty=!1,this._tiledTiles=[],this._tilesetIndexArr=[],this._texIdToMatIndex={},this._viewPort={x:-1,y:-1,width:-1,height:-1},this._cullingRect={leftDown:{row:-1,col:-1},rightTop:{row:-1,col:-1}},this._cullingDirty=!0,this._rightTop={row:-1,col:-1},this._layerInfo=null,this._mapInfo=null,this._topOffset=0,this._downOffset=0,this._leftOffset=0,this._rightOffset=0,this._tiles=[],this._vertices=[],this._verticesDirty=!0,this._layerName="",this._layerOrientation=null,this._texGrids=null,this._textures=null,this._tilesets=null,this._leftDownToCenterX=0,this._leftDownToCenterY=0,this._hasTiledNodeGrid=!1,this._hasAniGrid=!1,this._animations=null,this._enableCulling=cc.macro.ENABLE_TILEDMAP_CULLING},_hasTiledNode:function(){return this._hasTiledNodeGrid},_hasAnimation:function(){return this._hasAniGrid},enableCulling:function(C$t){this._enableCulling!=C$t&&(this._enableCulling=C$t,this._cullingDirty=!0)},addUserNode:function(C$t){var C$e=C$t.getComponent(C$l);return C$e?(cc.warn("CCTiledLayer:addUserNode node has been added"),!1):(C$e=C$t.addComponent(C$l),C$t.parent=this.node,C$t._renderFlag|=C$r.FLAG_BREAK_FLOW,(this._userNodeMap[C$t._id]=C$e)._row=-1,C$e._col=-1,(C$e._tiledLayer=this)._nodeLocalPosToLayerPos(C$t,C$o),this._positionToRowCol(C$o.x,C$o.y,C$c),this._addUserNodeToGrid(C$e,C$c),this._updateCullingOffsetByUserNode(C$t),C$t.on(cc.Node.EventType.POSITION_CHANGED,this._userNodePosChange,C$e),C$t.on(cc.Node.EventType.SIZE_CHANGED,this._userNodeSizeChange,C$e),!0)},removeUserNode:function(C$t){var C$e=C$t.getComponent(C$l);return C$e?(C$t.off(cc.Node.EventType.POSITION_CHANGED,this._userNodePosChange,C$e),C$t.off(cc.Node.EventType.SIZE_CHANGED,this._userNodeSizeChange,C$e),this._removeUserNodeFromGrid(C$e),delete this._userNodeMap[C$t._id],C$t._removeComponent(C$e),C$e.destroy(),C$t.removeFromParent(!0),C$t._renderFlag&=~C$r.FLAG_BREAK_FLOW,!0):(cc.warn("CCTiledLayer:removeUserNode node is not exist"),!1)},destroyUserNode:function(C$t){this.removeUserNode(C$t),C$t.destroy()},_nodeLocalPosToLayerPos:function(C$t,C$e){C$e.x=C$t.x+this._leftDownToCenterX,C$e.y=C$t.y+this._leftDownToCenterY},_getNodesByRowCol:function(C$t,C$e){C$t=this._userNodeGrid[C$t];return C$t?C$t[C$e]:null},_getNodesCountByRow:function(C$t){C$t=this._userNodeGrid[C$t];return C$t?C$t.count:0},_updateAllUserNode:function(){for(var C$t in this._userNodeGrid={},this._userNodeMap){C$t=this._userNodeMap[C$t];this._nodeLocalPosToLayerPos(C$t.node,C$o),this._positionToRowCol(C$o.x,C$o.y,C$c),this._addUserNodeToGrid(C$t,C$c),this._updateCullingOffsetByUserNode(C$t.node)}},_updateCullingOffsetByUserNode:function(C$t){this._topOffset<C$t.height&&(this._topOffset=C$t.height),this._downOffset<C$t.height&&(this._downOffset=C$t.height),this._leftOffset<C$t.width&&(this._leftOffset=C$t.width),this._rightOffset<C$t.width&&(this._rightOffset=C$t.width)},_userNodeSizeChange:function(){var C$t=this.node;this._tiledLayer._updateCullingOffsetByUserNode(C$t)},_userNodePosChange:function(){var C$t=this.node,C$e=this._tiledLayer;C$e._nodeLocalPosToLayerPos(C$t,C$o),C$e._positionToRowCol(C$o.x,C$o.y,C$c),C$e._limitInLayer(C$c),C$c.row===this._row&&C$c.col===this._col||(C$e._removeUserNodeFromGrid(this),C$e._addUserNodeToGrid(this,C$c))},_removeUserNodeFromGrid:function(C$t){var C$e=C$t._row,C$i=C$t._col,C$n=C$t._index,C$e=this._userNodeGrid[C$e],C$i=C$e&&C$e[C$i];C$i&&(C$e.count--,C$i.count--,C$i.list[C$n]=null,C$i.count<=0&&(C$i.list.length=0,C$i.count=0)),C$t._row=-1,C$t._col=-1,C$t._index=-1,this._userNodeDirty=!0},_limitInLayer:function(C$t){var C$e=C$t.row,C$i=C$t.col;C$e<0&&(C$t.row=0),C$e>this._rightTop.row&&(C$t.row=this._rightTop.row),C$i<0&&(C$t.col=0),C$i>this._rightTop.col&&(C$t.col=this._rightTop.col)},_addUserNodeToGrid:function(C$t,C$e){var C$i=C$e.row,C$e=C$e.col,C$n=this._userNodeGrid[C$i]=this._userNodeGrid[C$i]||{count:0},C$r=C$n[C$e]=C$n[C$e]||{count:0,list:[]};C$t._row=C$i,C$t._col=C$e,C$t._index=C$r.list.length,C$n.count++,C$r.count++,C$r.list.push(C$t),this._userNodeDirty=!0},_isUserNodeDirty:function(){return this._userNodeDirty},_setUserNodeDirty:function(C$t){this._userNodeDirty=C$t},onEnable:function(){this._super(),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this),this._activateMaterial()},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},_syncAnchorPoint:function(){var C$t=this.node;this._leftDownToCenterX=C$t.width*C$t.anchorX*C$t.scaleX,this._leftDownToCenterY=C$t.height*C$t.anchorY*C$t.scaleY,this._cullingDirty=!0},onDestroy:function(){this._super(),this._buffer&&(this._buffer.destroy(),this._buffer=null),this._renderDataList=null},getLayerName:function(){return this._layerName},setLayerName:function(C$t){this._layerName=C$t},getProperty:function(C$t){return this._properties[C$t]},getPositionAt:function(C$t,C$e){var C$i,C$n;switch(C$e=void 0!==C$e?(C$i=Math.floor(C$t),Math.floor(C$e)):(C$i=Math.floor(C$t.x),Math.floor(C$t.y)),this._layerOrientation){case cc.TiledMap.Orientation.ORTHO:C$n=this._positionForOrthoAt(C$i,C$e);break;case cc.TiledMap.Orientation.ISO:C$n=this._positionForIsoAt(C$i,C$e);break;case cc.TiledMap.Orientation.HEX:C$n=this._positionForHexAt(C$i,C$e)}return C$n},_isInvalidPosition:function(C$t,C$e){var C$i;return C$t&&"object"==typeof C$t&&(C$e=(C$i=C$t).y,C$t=C$i.x),C$t>=this._layerSize.width||C$e>=this._layerSize.height||C$t<0||C$e<0},_positionForIsoAt:function(C$t,C$e){var C$i=0,C$n=0,C$r=Math.floor(C$t)+Math.floor(C$e)*this._layerSize.width,C$r=this._tiles[C$r];return C$r&&(C$i=(C$r=this._texGrids[C$r].tileset.tileOffset).x,C$n=C$r.y),cc.v2(.5*this._mapTileSize.width*(this._layerSize.height+C$t-C$e-1)+C$i,.5*this._mapTileSize.height*(this._layerSize.width-C$t+this._layerSize.height-C$e-2)-C$n)},_positionForOrthoAt:function(C$t,C$e){var C$i=0,C$n=0,C$r=Math.floor(C$t)+Math.floor(C$e)*this._layerSize.width,C$r=this._tiles[C$r];return C$r&&(C$i=(C$r=this._texGrids[C$r].tileset.tileOffset).x,C$n=C$r.y),cc.v2(C$t*this._mapTileSize.width+C$i,(this._layerSize.height-C$e-1)*this._mapTileSize.height-C$n)},_positionForHexAt:function(C$t,C$e){var C$i=this._mapTileSize.width,C$n=this._mapTileSize.height,C$r=this._layerSize.height,C$h=Math.floor(C$t)+Math.floor(C$e)*this._layerSize.width,C$h=this._tiles[C$h],C$s=this._texGrids[C$h].tileset.tileOffset,C$u=this._staggerIndex===cc.TiledMap.StaggerIndex.STAGGERINDEX_ODD?1:-1,C$o=0,C$a=0,C$c=0,C$l=0;switch(this._staggerAxis){case cc.TiledMap.StaggerAxis.STAGGERAXIS_Y:C$c=0,C$o=C$t*C$i+(C$c=C$e%2==1?C$i/2*C$u:C$c)+C$s.x,C$a=(C$r-C$e-1)*(C$n-(C$n-this._hexSideLength)/2)-C$s.y;break;case cc.TiledMap.StaggerAxis.STAGGERAXIS_X:C$l=0,C$o=C$t*(C$i-(C$i-this._hexSideLength)/2)+C$s.x,C$a=(C$r-C$e-1)*C$n+(C$l=C$t%2==1?C$n/2*-C$u:C$l)-C$s.y}return cc.v2(C$o,C$a)},setTileGIDAt:function(C$t,C$e,C$i,C$n){if(void 0===C$e)throw new Error("cc.TiledLayer.setTileGIDAt(): pos should be non-null");var C$r;if(void 0===C$n&&C$e instanceof cc.Vec2?(C$r=C$e,C$n=C$i):C$r=cc.v2(C$e,C$i),C$r.x=Math.floor(C$r.x),C$r.y=Math.floor(C$r.y),this._isInvalidPosition(C$r))throw new Error("cc.TiledLayer.setTileGIDAt(): invalid position");this._tiles&&this._tilesets&&0!=this._tilesets.length?0!==C$t&&C$t<this._tilesets[0].firstGid?cc.logID(7239,C$t):(C$n=C$n||0,C$e=this.getTileFlagsAt(C$r),this.getTileGIDAt(C$r)===C$t&&C$e===C$n||this._updateTileForGID((C$t|C$n)>>>0,C$r)):cc.logID(7238)},_updateTileForGID:function(C$t,C$e){0!==C$t&&!this._texGrids[C$t]||(C$e=0|C$e.x+C$e.y*this._layerSize.width)<this._tiles.length&&(this._tiles[C$e]=C$t,this._cullingDirty=!0)},getTileGIDAt:function(C$t,C$e){if(void 0===C$t)throw new Error("cc.TiledLayer.getTileGIDAt(): pos should be non-null");var C$i=C$t;if(void 0===C$e&&(C$i=C$t.x,C$e=C$t.y),this._isInvalidPosition(C$i,C$e))throw new Error("cc.TiledLayer.getTileGIDAt(): invalid position");if(!this._tiles)return cc.logID(7237),null;C$t=Math.floor(C$i)+Math.floor(C$e)*this._layerSize.width;return(this._tiles[C$t]&cc.TiledMap.TileFlag.FLIPPED_MASK)>>>0},getTileFlagsAt:function(C$t,C$e){if(!C$t)throw new Error("TiledLayer.getTileFlagsAt: pos should be non-null");if(void 0!==C$e&&(C$t=cc.v2(C$t,C$e)),this._isInvalidPosition(C$t))throw new Error("TiledLayer.getTileFlagsAt: invalid position");if(!this._tiles)return cc.logID(7240),null;C$e=Math.floor(C$t.x)+Math.floor(C$t.y)*this._layerSize.width;return(this._tiles[C$e]&cc.TiledMap.TileFlag.FLIPPED_ALL)>>>0},_setCullingDirty:function(C$t){this._cullingDirty=C$t},_isCullingDirty:function(){return this._cullingDirty},_updateViewPort:function(C$t,C$e,C$i,C$n){var C$r,C$s,C$o;this._viewPort.width===C$i&&this._viewPort.height===C$n&&this._viewPort.x===C$t&&this._viewPort.y===C$e||(this._viewPort.x=C$t,this._viewPort.y=C$e,this._viewPort.width=C$i,this._viewPort.height=C$n,C$t=1,this._layerOrientation===cc.TiledMap.Orientation.ISO&&(C$t=2),C$e=this._viewPort.x-this._offset.x+this._leftDownToCenterX,C$o=this._viewPort.y-this._offset.y+this._leftDownToCenterY,C$r=C$e-this._leftOffset,C$s=C$o-this._downOffset,C$e=C$e+C$i+this._rightOffset,C$i=C$o+C$n+this._topOffset,C$o=this._cullingRect.leftDown,C$n=this._cullingRect.rightTop,this._positionToRowCol(C$r=C$r<0?0:C$r,C$s=C$s<0?0:C$s,C$c),C$c.row-=C$t,C$c.col-=C$t,C$c.row=0<C$c.row?C$c.row:0,C$c.col=0<C$c.col?C$c.col:0,C$c.row===C$o.row&&C$c.col===C$o.col||(C$o.row=C$c.row,C$o.col=C$c.col,this._cullingDirty=!0),C$e<0||C$i<0?(C$c.row=-1,C$c.col=-1):(this._positionToRowCol(C$e,C$i,C$c),C$c.row++,C$c.col++),C$c.row>this._rightTop.row&&(C$c.row=this._rightTop.row),C$c.col>this._rightTop.col&&(C$c.col=this._rightTop.col),C$c.row===C$n.row&&C$c.col===C$n.col||(C$n.row=C$c.row,C$n.col=C$c.col,this._cullingDirty=!0))},_positionToRowCol:function(C$t,C$e,C$i){var C$n,C$r=cc.TiledMap,C$s=C$r.Orientation,C$h=C$r.StaggerAxis,C$o=this._mapTileSize.width,C$a=this._mapTileSize.height,C$u=.5*C$o,C$_=.5*C$a,C$c=0,C$l=0,C$d=this._staggerAxis;this._layerSize.width;switch(this._layerOrientation){case C$s.ORTHO:C$l=Math.floor(C$t/C$o),C$c=Math.floor(C$e/C$a);break;case C$s.ISO:C$l=Math.floor(C$t/C$u),C$c=Math.floor(C$e/C$_);break;case C$s.HEX:C$d===C$h.STAGGERAXIS_Y?(C$n=(C$c=Math.floor(C$e/(C$a-this._diffY1)))%2==1?C$u*this._odd_even:0,C$l=Math.floor((C$t-C$n)/C$o)):(C$n=(C$l=Math.floor(C$t/(C$o-this._diffX1)))%2==1?C$_*-this._odd_even:0,C$c=Math.floor((C$e-C$n)/C$a))}return C$i.row=C$c,C$i.col=C$l,C$i},_updateCulling:function(){var C$t,C$e;this._enableCulling&&(this.node._updateWorldMatrix(),C$i.Mat4.invert(C$s,this.node._worldMatrix),C$t=cc.visibleRect,(C$e=cc.Camera.findCamera(this.node))&&(C$o.x=0,C$o.y=0,C$a.x=C$o.x+C$t.width,C$a.y=C$o.y+C$t.height,C$e.getScreenToWorldPoint(C$o,C$o),C$e.getScreenToWorldPoint(C$a,C$a),C$i.Vec2.transformMat4(C$o,C$o,C$s),C$i.Vec2.transformMat4(C$a,C$a,C$s),this._updateViewPort(C$o.x,C$o.y,C$a.x-C$o.x,C$a.y-C$o.y)))},getLayerOrientation:function(){return this._layerOrientation},getProperties:function(){return this._properties},_updateVertices:function(){var C$h=cc.TiledMap,C$u=C$h.TileFlag.FLIPPED_MASK,C$_=C$h.StaggerAxis,C$d=C$h.Orientation,C$f=this._vertices,C$p=(C$f.length=0,this._layerOrientation),C$m=this._tiles;if(C$m){for(var C$t,C$e,C$y,C$g,C$v,C$x,C$b,C$A,C$i=this._rightTop,C$C=(C$i.row=-1,C$i.col=-1,this._mapTileSize.width),C$S=this._mapTileSize.height,C$T=.5*C$C,C$w=.5*C$S,C$n=this._layerSize.height,C$E=this._layerSize.width,C$M=this._texGrids,C$I=0,C$r=(C$p===C$d.HEX&&(C$y=this._staggerAxis,C$g=this._diffX1,C$v=this._diffY1,C$x=this._odd_even),0),C$s=0,C$o=(this._topOffset=0,this._downOffset=0,this._leftOffset=0,this._rightOffset=0,this._hasAniGrid=!1,0),C$B=0,C$a=0;C$a<C$n;++C$a){for(var C$c=0;C$c<C$E;++C$c){var C$R=C$I+C$c,C$P=C$M[C$l=(C$m[C$R]&C$u)>>>0];if(this._animations[C$l]&&(this._hasAniGrid=!0),C$P){switch(C$p){case C$d.ORTHO:C$t=(C$r=C$c)*C$C,C$e=(C$s=C$n-C$a-1)*C$S;break;case C$d.ISO:C$t=C$T*(C$r=C$n+C$c-C$a-1),C$e=C$w*(C$s=C$n+C$E-C$c-C$a-2);break;case C$d.HEX:C$t=C$c*(C$C-C$g)+(C$y===C$_.STAGGERAXIS_Y&&C$a%2==1?C$T*C$x:0),C$e=(C$n-C$a-1)*(C$S-C$v)+(C$y===C$_.STAGGERAXIS_X&&C$c%2==1?C$w*-C$x:0),C$r=C$c,C$s=C$n-C$a-1}var C$l=C$f[C$s]=C$f[C$s]||{minCol:0,maxCol:0},C$D=C$l[C$r]=C$l[C$r]||{};C$l.minCol>C$r&&(C$l.minCol=C$r),C$l.maxCol<C$r&&(C$l.maxCol=C$r),C$i.row<C$s&&(C$i.row=C$s),C$i.col<C$r&&(C$i.col=C$r),C$l=C$P.tileset.tileOffset,C$t+=this._offset.x+C$l.x,C$e+=this._offset.y-C$l.y,C$o=(C$o=-C$l.y+C$P.tileset._tileSize.height-C$S)<0?0:C$o,C$b=C$l.y<0?0:C$l.y,C$A=-C$l.x<0?0:-C$l.x,C$B=(C$B=C$l.x+C$P.tileset._tileSize.width-C$C)<0?0:C$B,this._rightOffset<C$A&&(this._rightOffset=C$A),this._leftOffset<C$B&&(this._leftOffset=C$B),this._topOffset<C$b&&(this._topOffset=C$b),this._downOffset<C$o&&(this._downOffset=C$o),C$D.left=C$t,C$D.bottom=C$e,C$D.index=C$R}}C$I+=C$E}this._verticesDirty=!1}},getTiledTileAt:function(C$t,C$e,C$i){if(this._isInvalidPosition(C$t,C$e))throw new Error("TiledLayer.getTiledTileAt: invalid position");if(!this._tiles)return cc.logID(7236),null;var C$n=Math.floor(C$t)+Math.floor(C$e)*this._layerSize.width,C$n=this._tiledTiles[C$n];return!C$n&&C$i&&((C$n=(C$i=new cc.Node).addComponent(cc.TiledTile))._x=C$t,C$n._y=C$e,C$n._layer=this,C$n._updateInfo(),C$i.parent=this.node),C$n},setTiledTileAt:function(C$t,C$e,C$i){if(this._isInvalidPosition(C$t,C$e))throw new Error("TiledLayer.setTiledTileAt: invalid position");if(!this._tiles)return cc.logID(7236),null;C$t=Math.floor(C$t)+Math.floor(C$e)*this._layerSize.width;return this._tiledTiles[C$t]=C$i,this._cullingDirty=!0,this._hasTiledNodeGrid=!!C$i||this._tiledTiles.some(function(C$t,C$e){return!!C$t}),C$i},getTexture:function(C$t){return C$t=C$t||0,this._textures&&0<=C$t&&this._textures.length>C$t?this._textures[C$t]:null},getTextures:function(){return this._textures},setTexture:function(C$t){this.setTextures([C$t])},setTextures:function(C$t){this._textures=C$t,this._activateMaterial()},getLayerSize:function(){return this._layerSize},getMapTileSize:function(){return this._mapTileSize},getTileSet:function(C$t){return C$t=C$t||0,this._tilesets&&0<=C$t&&this._tilesets.length>C$t?this._tilesets[C$t]:null},getTileSets:function(){return this._tilesets},setTileSet:function(C$t){this.setTileSets([C$t])},setTileSets:function(C$n){this._tilesets=C$n;for(var C$t=this._textures=[],C$r=this._texGrids=[],C$e=0;C$e<C$n.length;C$e++){var C$i=C$n[C$e];C$i&&(C$t[C$e]=C$i.sourceImage)}cc.TiledMap.loadAllTextures(C$t,function(){for(var C$t=0,C$e=C$n.length;C$t<C$e;++C$t){var C$i=C$n[C$t];C$i&&cc.TiledMap.fillTextureGrids(C$i,C$r,C$t)}this._prepareToRender()}.bind(this))},_traverseAllGrid:function(){for(var C$t=this._tiles,C$e=this._texGrids,C$i=this._tilesetIndexArr,C$n={},C$r=cc.TiledMap.TileFlag.FLIPPED_MASK,C$s=C$i.length=0;C$s<C$t.length;C$s++){var C$o,C$a=C$t[C$s];0!==C$a&&((C$o=C$e[C$a=(C$a&C$r)>>>0])?C$n[C$o=C$o.texId]||(C$n[C$o]=!0,C$i.push(C$o)):cc.error("CCTiledLayer:_traverseAllGrid grid is null, gid is:",C$a))}},_init:function(C$t,C$e,C$i,C$n,C$r){this._cullingDirty=!0,this._layerInfo=C$t,this._mapInfo=C$e;var C$s,C$o,C$a,C$c=C$t._layerSize,C$c=(this._layerName=C$t.name,this._tiles=C$t._tiles,this._properties=C$t.properties,this._layerSize=C$c,this._minGID=C$t._minGID,this._maxGID=C$t._maxGID,this._opacity=C$t._opacity,this._renderOrder=C$e.renderOrder,this._staggerAxis=C$e.getStaggerAxis(),this._staggerIndex=C$e.getStaggerIndex(),this._hexSideLength=C$e.getHexSideLength(),this._animations=C$e.getTileAnimations(),this._tilesets=C$i,this._textures=C$n,this._texGrids=C$r,this._layerOrientation=C$e.orientation,this._mapTileSize=C$e.getTileSize(),this._mapTileSize.width),C$i=this._mapTileSize.height,C$n=this._layerSize.width,C$r=this._layerSize.height;this._layerOrientation===cc.TiledMap.Orientation.HEX?(C$s=(C$e=cc.TiledMap).StaggerAxis,C$e=C$e.StaggerIndex,C$a=C$o=0,this._odd_even=this._staggerIndex===C$e.STAGGERINDEX_ODD?1:-1,this._staggerAxis===C$s.STAGGERAXIS_X?(this._diffX1=(C$c-this._hexSideLength)/2,this._diffY1=0,C$a=C$i*(C$r+.5),C$o=(C$c+this._hexSideLength)*Math.floor(C$n/2)+C$c*(C$n%2)):(this._diffX1=0,this._diffY1=(C$i-this._hexSideLength)/2,C$o=C$c*(C$n+.5),C$a=(C$i+this._hexSideLength)*Math.floor(C$r/2)+C$i*(C$r%2)),this.node.setContentSize(C$o,C$a)):this._layerOrientation===cc.TiledMap.Orientation.ISO?this.node.setContentSize(.5*C$c*(C$e=C$n+C$r),.5*C$i*C$e):this.node.setContentSize(C$n*C$c,C$r*C$i),this._offset=cc.v2(C$t.offset.x,-C$t.offset.y),this._useAutomaticVertexZ=!1,this._vertexZvalue=0,this._syncAnchorPoint(),this._prepareToRender()},_prepareToRender:function(){this._updateVertices(),this._traverseAllGrid(),this._updateAllUserNode(),this._activateMaterial()},_activateMaterial:function(){var C$t=this._tilesetIndexArr;if(0!==C$t.length){for(var C$e=this._texIdToMatIndex={},C$i=this._textures,C$n=C$t.length,C$r=0;C$r<C$n;C$r++){var C$s=C$t[C$r],C$o=C$i[C$s],C$a=(C$a=this._materials[C$r])||C$_.getBuiltinMaterial("2d-sprite");(C$a=C$u.default.create(C$a,this)).define("CC_USE_MODEL",!0),C$a.setProperty("texture",C$o),this._materials[C$r]=C$a,C$e[C$s]=C$r}this._materials.length=C$n,this.markForRender(!0)}else this.disableRender()}});cc.TiledLayer=C$e.exports=C$t},{"../core/assets/material/CCMaterial":53,"../core/assets/material/material-variant":60,"../core/components/CCRenderComponent":89,"../core/renderer/render-flow":221,"../core/value-types":279}],338:[function(C$t,C$e,C$i){"use strict";C$t("./CCTMXXMLParser"),C$t("./CCTiledMapAsset"),C$t("./CCTiledLayer"),C$t("./CCTiledTile"),C$t("./CCTiledObjectGroup");var C$t=cc.Enum({ORTHO:0,HEX:1,ISO:2}),C$n=cc.Enum({NONE:0,MAP:1,LAYER:2,OBJECTGROUP:3,OBJECT:4,TILE:5}),C$r=cc.Enum({HORIZONTAL:2147483648,VERTICAL:1073741824,DIAGONAL:536870912,FLIPPED_ALL:4026531840,FLIPPED_MASK:268435455}),C$s=cc.Enum({STAGGERAXIS_X:0,STAGGERAXIS_Y:1}),C$o=cc.Enum({STAGGERINDEX_ODD:0,STAGGERINDEX_EVEN:1}),C$a=cc.Enum({RightDown:0,RightUp:1,LeftDown:2,LeftUp:3}),C$c=cc.Enum({RECT:0,ELLIPSE:1,POLYGON:2,POLYLINE:3,IMAGE:4,TEXT:5}),C$t=cc.Class({name:"cc.TiledMap",extends:cc.Component,editor:!1,ctor:function(){this._texGrids=[],this._textures=[],this._tilesets=[],this._animations=[],this._imageLayers=[],this._layers=[],this._groups=[],this._images=[],this._properties=[],this._tileProperties=[],this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0)},statics:{Orientation:C$t,Property:C$n,TileFlag:C$r,StaggerAxis:C$s,StaggerIndex:C$o,TMXObjectType:C$c,RenderOrder:C$a},properties:{_tmxFile:{default:null,type:cc.TiledMapAsset},tmxAsset:{get:function(){return this._tmxFile},set:function(C$t,C$e){this._tmxFile!==C$t&&(this._tmxFile=C$t,this._applyFile())},type:cc.TiledMapAsset}},getMapSize:function(){return this._mapSize},getTileSize:function(){return this._tileSize},getMapOrientation:function(){return this._mapOrientation},getObjectGroups:function(){return this._groups},getObjectGroup:function(C$t){for(var C$e=this._groups,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r&&C$r.getGroupName()===C$t)return C$r}return null},enableCulling:function(C$t){for(var C$e=this._layers,C$i=0;C$i<C$e.length;++C$i)C$e[C$i].enableCulling(C$t)},getProperties:function(){return this._properties},getLayers:function(){return this._layers},getLayer:function(C$t){for(var C$e=this._layers,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r&&C$r.getLayerName()===C$t)return C$r}return null},_changeLayer:function(C$t,C$e){for(var C$i=this._layers,C$n=0,C$r=C$i.length;C$n<C$r;C$n++){var C$s=C$i[C$n];if(C$s&&C$s.getLayerName()===C$t)return void(C$i[C$n]=C$e)}},getProperty:function(C$t){return this._properties[C$t.toString()]},getPropertiesForGID:function(C$t){return this._tileProperties[C$t]},__preload:function(){this._tmxFile&&this._applyFile()},onEnable:function(){this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},onDisable:function(){this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},_applyFile:function(){var C$t=this._tmxFile;if(C$t){for(var C$e=C$t.textures,C$i=C$t.textureNames,C$h=C$t.textureSizes,C$n={},C$r={},C$s=0;C$s<C$e.length;++C$s){var C$o=C$i[C$s];C$n[C$o]=C$e[C$s],C$r[C$o]=C$h[C$s]}for(var C$u={},C$e=C$t.imageLayerTextures,C$i=C$t.imageLayerTextureNames,C$a=0;C$a<C$e.length;++C$a)C$u[C$i[C$a]]=C$e[C$a];for(var C$c=C$t.tsxFileNames,C$_=C$t.tsxFiles,C$d={},C$l=0;C$l<C$c.length;++C$l)0<C$c[C$l].length&&(C$d[C$c[C$l]]=C$_[C$l].text);var C$t=new cc.TMXMapInfo(C$t.tmxXmlStr,C$d,C$n,C$r,C$u),C$f=C$t.getTilesets();C$f&&0!==C$f.length||cc.logID(7241),this._buildWithMapInfo(C$t)}else this._releaseMapInfo()},_releaseMapInfo:function(){for(var C$t=this._layers,C$e=0,C$i=C$t.length;C$e<C$i;C$e++)C$t[C$e].node.removeFromParent(!0),C$t[C$e].node.destroy();C$t.length=0;for(var C$n=this._groups,C$r=0,C$s=C$n.length;C$r<C$s;C$r++)C$n[C$r].node.removeFromParent(!0),C$n[C$r].node.destroy();C$n.length=0;for(var C$o=this._images,C$a=0,C$c=C$o.length;C$a<C$c;C$a++)C$o[C$a].removeFromParent(!0),C$o[C$a].destroy();C$o.length=0},_syncAnchorPoint:function(){for(var C$t=this.node.getAnchorPoint(),C$e=this.node.width*C$t.x,C$i=this.node.height*(1-C$t.y),C$n=0,C$r=this._layers.length;C$n<C$r;C$n++)this._layers[C$n].node.setAnchorPoint(C$t);for(C$n=0,C$r=this._groups.length;C$n<C$r;C$n++){var C$s=this._groups[C$n],C$o=C$s.node;C$o.anchorX=.5,C$o.anchorY=.5,C$o.x=C$s._offset.x-C$e+C$o.width*C$o.anchorX,C$o.y=C$s._offset.y+C$i-C$o.height*C$o.anchorY}for(C$n=0,C$r=this._images.length;C$n<C$r;C$n++){var C$a=this._images[C$n];C$a.anchorX=.5,C$a.anchorY=.5,C$a.x=C$a._offset.x-C$e+C$a.width*C$a.anchorX,C$a.y=C$a._offset.y+C$i-C$a.height*C$a.anchorY}},_fillAniGrids:function(C$t,C$e){for(var C$i in C$e){C$i=C$e[C$i];if(C$i)for(var C$n=C$i.frames,C$r=0;C$r<C$n.length;C$r++){var C$s=C$n[C$r];C$s.grid=C$t[C$s.tileid]}}},_buildLayerAndGroup:function(){for(var C$t=this._tilesets,C$e=this._texGrids,C$h=this._animations,C$i=C$e.length=0,C$u=C$t.length;C$i<C$u;++C$i){var C$_=C$t[C$i];C$_&&cc.TiledMap.fillTextureGrids(C$_,C$e,C$i)}this._fillAniGrids(C$e,C$h);for(var C$n=this._layers,C$d=this._groups,C$f=this._images,C$r={},C$p=0,C$m=C$n.length;C$p<C$m;C$p++)C$r[C$n[C$p].node._name]=!0;for(var C$y=0,C$g=C$d.length;C$y<C$g;C$y++)C$r[C$d[C$y].node._name]=!0;for(var C$v=0,C$x=C$f.length;C$v<C$x;C$v++)C$r[C$f[C$v]._name]=!0;var C$n=this._layers=[],C$d=this._groups=[],C$f=this._images=[],C$b=this._mapInfo,C$A=this.node,C$s=C$b.getAllChildren(),C$C=this._textures,C$S=0,C$T=0;if(C$s&&0<C$s.length)for(var C$o=0,C$w=C$s.length;C$o<C$w;C$o++){var C$E,C$a=C$s[C$o],C$c=C$a.name,C$l=this.node.getChildByName(C$c);C$r[C$c]=!1,C$l||((C$l=new cc.Node).name=C$c,C$A.addChild(C$l)),C$l.setSiblingIndex(C$o),C$l.active=C$a.visible,C$a instanceof cc.TMXLayerInfo?((C$c=(C$c=C$l.getComponent(cc.TiledLayer))||C$l.addComponent(cc.TiledLayer))._init(C$a,C$b,C$t,C$C,C$e),C$a.ownTiles=!1,C$n.push(C$c)):C$a instanceof cc.TMXObjectGroupInfo?((C$c=(C$c=C$l.getComponent(cc.TiledObjectGroup))||C$l.addComponent(cc.TiledObjectGroup))._init(C$a,C$b,C$e),C$d.push(C$c)):C$a instanceof cc.TMXImageLayerInfo&&(C$c=C$a.sourceImage,C$l.opacity=C$a.opacity,C$l.layerInfo=C$a,C$l._offset=cc.v2(C$a.offset.x,-C$a.offset.y),(C$E=(C$a=(C$a=C$l.getComponent(cc.Sprite))||C$l.addComponent(cc.Sprite)).spriteFrame||new cc.SpriteFrame).setTexture(C$c),C$a.spriteFrame=C$E,C$l.width=C$c.width,C$l.height=C$c.height,C$f.push(C$l)),C$S=Math.max(C$S,C$l.width),C$T=Math.max(C$T,C$l.height)}for(var C$M=C$A.children,C$I=0,C$B=C$M.length;C$I<C$B;C$I++){var C$R=C$M[C$I];C$r[C$R._name]&&C$R.destroy()}this.node.width=C$S,this.node.height=C$T,this._syncAnchorPoint()},_buildWithMapInfo:function(C$t){this._mapInfo=C$t,this._mapSize=C$t.getMapSize(),this._tileSize=C$t.getTileSize(),this._mapOrientation=C$t.orientation,this._properties=C$t.properties,this._tileProperties=C$t.getTileProperties(),this._imageLayers=C$t.getImageLayers(),this._animations=C$t.getTileAnimations(),this._tilesets=C$t.getTilesets();for(var C$e=this._tilesets,C$i=[],C$n=this._textures.length=0,C$r=C$e.length;C$n<C$r;++C$n){var C$s=C$e[C$n];C$s&&C$s.sourceImage&&(this._textures[C$n]=C$s.sourceImage,C$i.push(C$s.sourceImage))}for(var C$o=0;C$o<this._imageLayers.length;C$o++){var C$a=this._imageLayers[C$o];C$a&&C$a.sourceImage&&C$i.push(C$a.sourceImage)}cc.TiledMap.loadAllTextures(C$i,function(){this._buildLayerAndGroup()}.bind(this))},update:function(C$t){var C$e,C$i=this._animations,C$n=this._texGrids;for(C$e in C$i){var C$r=C$i[C$e],C$s=C$r.frames,C$o=C$s[C$r.frameIdx];C$r.dt+=C$t,C$o.duration<C$r.dt&&(C$r.dt=0,C$r.frameIdx++,C$r.frameIdx>=C$s.length&&(C$r.frameIdx=0),C$o=C$s[C$r.frameIdx]),C$n[C$e]=C$o.grid}}});cc.TiledMap=C$e.exports=C$t,cc.TiledMap.loadAllTextures=function(C$t,C$e){var C$i=C$t.length;if(0!==C$i)for(var C$n=0,C$r=function(){C$i<=++C$n&&C$e()},C$s=0;C$s<C$i;C$s++){var C$o=C$t[C$s];C$o.loaded?C$r():C$o.once("load",function(){C$r()})}else C$e()},cc.TiledMap.fillTextureGrids=function(C$t,C$e,C$h){for(var C$i=C$t.sourceImage,C$u=(C$t.imageSize.width&&C$t.imageSize.height||(C$t.imageSize.width=C$i.width,C$t.imageSize.height=C$i.height),C$t._tileSize.width),C$_=C$t._tileSize.height,C$n=C$i.width,C$r=C$i.height,C$i=C$t.spacing,C$s=C$t.margin,C$d=Math.floor((C$n-2*C$s+C$i)/(C$u+C$i)),C$s=Math.floor((C$r-2*C$s+C$i)/(C$_+C$i))*C$d,C$o=C$t.firstGid,C$a=null,C$c=!!C$e[C$o],C$l=cc.macro.FIX_ARTIFACTS_BY_STRECHING_TEXEL_TMX?.5:0,C$f=C$t.firstGid+(C$s=C$s<=0?1:C$s);C$o<C$f&&((C$c=!(C$c&&!C$e[C$o])&&C$c)||!C$e[C$o]);++C$o)C$t.rectForGID(C$o,C$a={texId:C$h,tileset:C$t,x:0,y:0,width:C$u,height:C$_,t:0,l:0,r:0,b:0,gid:C$o}),C$a.x+=C$l,C$a.y+=C$l,C$a.width-=2*C$l,C$a.height-=2*C$l,C$a.t=C$a.y/C$r,C$a.l=C$a.x/C$n,C$a.r=(C$a.x+C$a.width)/C$n,C$a.b=(C$a.y+C$a.height)/C$r,C$e[C$o]=C$a},cc.js.obsolete(cc.TiledMap.prototype,"cc.TiledMap.tmxFile","tmxAsset",!0),cc.js.get(cc.TiledMap.prototype,"mapLoaded",function(){return cc.errorID(7203),[]},!1)},{"./CCTMXXMLParser":336,"./CCTiledLayer":337,"./CCTiledMapAsset":339,"./CCTiledObjectGroup":341,"./CCTiledTile":342}],339:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.TiledMapAsset",extends:cc.Asset,properties:{tmxXmlStr:"",textures:{default:[],type:[cc.Texture2D]},textureNames:[cc.String],textureSizes:{default:[],type:[cc.Size]},imageLayerTextures:{default:[],type:[cc.Texture2D]},imageLayerTextureNames:[cc.String],tsxFiles:[cc.TextAsset],tsxFileNames:[cc.String]},statics:{preventDeferredLoadDependents:!0},createNode:!1});cc.TiledMapAsset=C$n,C$e.exports=C$n},{}],340:[function(C$t,C$e,C$i){"use strict";var C$n=(C$t=C$t("../renderer/core/input-assembler"))&&C$t.__esModule?C$t:{default:C$t};C$t=cc.Class({name:"cc.TiledMapRenderDataList",ctor:function(){this._dataList=[],this._offset=0},_pushRenderData:function(){var C$t={};C$t.ia=new C$n.default,C$t.nodesRenderList=[],this._dataList.push(C$t)},popRenderData:function(C$t){this._offset>=this._dataList.length&&this._pushRenderData();var C$e=this._dataList[this._offset],C$i=(C$e.nodesRenderList.length=0,C$e.ia);return C$i._vertexBuffer=C$t._vb,C$i._indexBuffer=C$t._ib,C$i._start=C$t.indiceOffset,C$i._count=0,this._offset++,C$e},pushNodesList:function(C$t,C$e){C$t.nodesRenderList.push(C$e)},reset:function(){this._offset=0}});cc.TiledMapRenderDataList=C$e.exports=C$t},{"../renderer/core/input-assembler":302}],341:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.TiledObjectGroup",extends:cc.Component,getPositionOffset:function(){return this._positionOffset},getProperties:function(){this._properties},getGroupName:function(){return this._groupName},getProperty:function(C$t){return this._properties[C$t.toString()]},getObject:function(C$t){for(var C$e=0,C$i=this._objects.length;C$e<C$i;C$e++){var C$n=this._objects[C$e];if(C$n&&C$n.name===C$t)return C$n}return null},getObjects:function(){return this._objects},_init:function(C$h,C$t,C$u){for(var C$e=cc.TiledMap,C$_=C$e.TMXObjectType,C$d=C$e.Orientation,C$f=C$e.StaggerAxis,C$e=C$e.TileFlag,C$p=C$e.FLIPPED_MASK,C$m=C$e.HORIZONTAL,C$y=C$e.VERTICAL,C$i=(this._groupName=C$h.name,this._positionOffset=C$h.offset,this._mapInfo=C$t,this._properties=C$h.getProperties(),this._offset=cc.v2(C$h.offset.x,-C$h.offset.y),this._opacity=C$h._opacity,C$t._mapSize),C$n=C$t._tileSize,C$e=0,C$g=0,C$v=(C$t.orientation===C$d.HEX?C$t.getStaggerAxis()===C$f.STAGGERAXIS_X?(C$g=C$n.height*(C$i.height+.5),C$e=(C$n.width+C$t.getHexSideLength())*Math.floor(C$i.width/2)+C$n.width*(C$i.width%2)):(C$e=C$n.width*(C$i.width+.5),C$g=(C$n.height+C$t.getHexSideLength())*Math.floor(C$i.height/2)+C$n.height*(C$i.height%2)):C$g=C$t.orientation===C$d.ISO?(C$f=C$i.width+C$i.height,C$e=.5*C$n.width*C$f,.5*C$n.height*C$f):(C$e=C$i.width*C$n.width,C$i.height*C$n.height),this.node.setContentSize(C$e,C$g),C$e*this.node.anchorX),C$x=C$g*(1-this.node.anchorY),C$b=C$h._objects,C$A={},C$C=0,C$S=C$b.length;C$C<C$S;C$C++){var C$T,C$r,C$s,C$w,C$o,C$E,C$M,C$I,C$a,C$c=C$b[C$C],C$l=C$c.type,C$B=(C$c.offset=cc.v2(C$c.x,C$c.y),C$c.points||C$c.polylinePoints);if(C$B)for(var C$R=0;C$R<C$B.length;C$R++)C$B[C$R].y*=-1;C$d.ISO!==C$t.orientation?C$c.y=C$g-C$c.y:(C$T=C$c.x/C$n.height,C$r=C$c.y/C$n.height,C$c.x=.5*C$n.width*(C$i.height+C$T-C$r),C$c.y=.5*C$n.height*(C$i.width+C$i.height-C$T-C$r)),C$l===C$_.TEXT&&(C$A[C$T="text"+C$c.id]=!0,(C$r=(C$r=this.node.getChildByName(C$T))||new cc.Node).anchorX=0,C$r.anchorY=1,C$r.angle=-C$c.rotation,C$r.x=C$c.x-C$v,C$r.y=C$c.y-C$x,C$r.name=C$T,C$r.parent=this.node,C$r.color=C$c.color,C$r.opacity=this._opacity,C$r.setSiblingIndex(C$C),(C$s=(C$s=C$r.getComponent(cc.Label))||C$r.addComponent(cc.Label)).overflow=cc.Label.Overflow.SHRINK,C$s.lineHeight=C$c.height,C$s.string=C$c.text,C$s.horizontalAlign=C$c.halign,C$s.verticalAlign=C$c.valign,C$s.fontSize=C$c.pixelsize,C$r.width=C$c.width,C$r.height=C$c.height),C$l!==C$_.IMAGE||(C$l=C$u[((C$s=C$c.gid)&C$p)>>>0])&&(C$a=C$l.tileset,C$A[C$w="img"+C$c.id]=!0,C$o=this.node.getChildByName(C$w),C$E=C$c.width||C$l.width,C$M=C$c.height||C$l.height,C$I=C$a.tileOffset.x,C$a=C$a.tileOffset.y,C$o instanceof cc.PrivateNode&&(C$o.removeFromParent(),C$o.destroy(),C$o=null),C$o=C$o||new cc.Node,C$d.ISO==C$t.orientation?C$o.anchorX=.5+C$I/C$E:C$o.anchorX=C$I/C$E,C$o.anchorY=C$a/C$M,C$o.angle=-C$c.rotation,C$o.x=C$c.x-C$v,C$o.y=C$c.y-C$x,C$o.name=C$w,C$o.parent=this.node,C$o.opacity=this._opacity,C$o.setSiblingIndex(C$C),C$a=(C$a=(C$I=(C$I=C$o.getComponent(cc.Sprite))||C$o.addComponent(cc.Sprite)).spriteFrame)||new cc.SpriteFrame,(C$s&C$m)>>>0?C$a.setFlipX(!0):C$a.setFlipX(!1),(C$s&C$y)>>>0?C$a.setFlipY(!0):C$a.setFlipY(!1),C$a.setTexture(C$l.tileset.sourceImage,cc.rect(C$l)),C$I.spriteFrame=C$a,C$I.setVertsDirty(),C$o.width=C$E,C$o.height=C$M)}this._objects=C$b;for(var C$P=this.node.children,C$D=/^(?:img|text)\d+$/,C$L=0,C$V=C$P.length;C$L<C$V;C$L++){var C$O=C$P[C$L],C$F=C$O._name;C$D.test(C$F)&&!C$A[C$F]&&C$O.destroy()}}});cc.TiledObjectGroup=C$e.exports=C$n},{}],342:[function(C$t,C$e,C$i){"use strict";var C$n=cc.Class({name:"cc.TiledTile",extends:cc.Component,editor:!1,ctor:function(){this._layer=null},properties:{_x:0,_y:0,x:{get:function(){return this._x},set:function(C$t){C$t!==this._x&&(this._layer&&this._layer._isInvalidPosition(C$t,this._y)?cc.warn("Invalid x, the valid value is between [%s] ~ [%s]",0,this._layer._layerSize.width):(this._resetTile(),this._x=C$t,this._updateInfo()))},type:cc.Integer},y:{get:function(){return this._y},set:function(C$t){C$t!==this._y&&(this._layer&&this._layer._isInvalidPosition(this._x,C$t)?cc.warn("Invalid y, the valid value is between [%s] ~ [%s]",0,this._layer._layerSize.height):(this._resetTile(),this._y=C$t,this._updateInfo()))},type:cc.Integer},gid:{get:function(){return this._layer?this._layer.getTileGIDAt(this._x,this._y):0},set:function(C$t){this._layer&&this._layer.setTileGIDAt(C$t,this._x,this._y)},type:cc.Integer}},onEnable:function(){var C$t=this.node.parent;this._layer=C$t.getComponent(cc.TiledLayer),this._resetTile(),this._updateInfo()},onDisable:function(){this._resetTile()},_resetTile:function(){this._layer&&this._layer.getTiledTileAt(this._x,this._y)===this&&this._layer.setTiledTileAt(this._x,this._y,null)},_updateInfo:function(){var C$t,C$e;this._layer&&(C$t=this._x,C$e=this._y,this._layer.getTiledTileAt(C$t,C$e)?cc.warn("There is already a TiledTile at [%s, %s]",C$t,C$e):(this.node.setPosition(this._layer.getPositionAt(C$t,C$e)),this._layer.setTiledTileAt(C$t,C$e,this)))}});cc.TiledTile=C$e.exports=C$n},{}],343:[function(C$t,C$e,C$i){"use strict";C$t("./CCTiledMap"),C$t("./CCTiledMapRenderDataList"),C$t("./tiledmap-buffer"),C$t("./tmx-layer-assembler")},{"./CCTiledMap":338,"./CCTiledMapRenderDataList":340,"./tiledmap-buffer":344,"./tmx-layer-assembler":345}],344:[function(C$t,C$e,C$i){"use strict";C$t=cc.Class({name:"cc.TiledMapBuffer",extends:C$t("../core/renderer/webgl/quad-buffer"),_updateOffset:function(){var C$t=this._offsetInfo;C$t.vertexOffset=this.vertexOffset,C$t.indiceOffset=this.indiceOffset,C$t.byteOffset=this.byteOffset},adjust:function(C$t,C$e){this.vertexOffset+=C$t,this.indiceOffset+=C$e,this.indiceStart=this.indiceOffset,this.byteOffset=this.byteOffset+C$t*this._vertexBytes,this._dirty=!0}});cc.TiledMapBuffer=C$e.exports=C$t},{"../core/renderer/webgl/quad-buffer":249}],345:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$n=C$t("../core/renderer/assembler"))&&C$n.__esModule?C$n:{default:C$n},C$d=C$t("../core/value-types");function C$r(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$o=C$t("./CCTiledLayer"),C$a=C$t("./CCTiledMap"),C$V=C$a.TileFlag,C$O=C$V.FLIPPED_MASK,C$c=C$t("../core/renderer/"),C$l=C$t("../core/renderer/webgl/vertex-format").vfmtPosUvColor,C$F=parseInt(10922.5),C$f=C$a.RenderOrder,C$h=C$t("../core/renderer/render-flow"),C$p=cc.mat4(),C$m=cc.v3(),C$y={row:0,col:0},C$N={x:0,y:0},C$w={x:0,y:0},C$E={x:0,y:0},C$k={x:0,y:0},C$M=null,C$G=null,C$z=0,C$I=0,C$U=0,C$W=0,C$g=null,C$B=null,C$R=null,C$P=null,C$H=null,C$D=null,C$L=null,C$j=null;function C$v(C$t){C$t._updateLocalMatrix(),C$d.Mat4.mul(C$t._worldMatrix,C$g,C$t._matrix),C$t._renderFlag&=~(C$h.FLAG_TRANSFORM|C$h.FLAG_BREAK_FLOW),C$h.visitRootNode(C$t),C$t._renderFlag|=C$h.FLAG_BREAK_FLOW}function C$X(){0!==C$G._count&&(C$B.material=C$M.material,C$B.node=C$D.node,C$B._flushIA(C$M.ia),C$F<=C$z?(C$P.uploadData(),C$P.switchBuffer(),C$L=C$P._vData,C$j=C$P._uintVData,C$M=C$R.popRenderData(C$P),C$G=C$M.ia,C$z=C$I=0):(C$M=C$R.popRenderData(C$P),C$G=C$M.ia),C$M.material=C$H)}function C$Y(C$t,C$e){var C$i=C$D._getNodesByRowCol(C$t,C$e);if(C$i&&0!=C$i.count){var C$n=C$i.list,C$r=0,C$s=0;for(C$X(),C$B.worldMatDirty++;C$r<C$i.count;){var C$o=C$n[C$s];C$s++,C$o&&(C$v(C$o.node),C$r!==C$s&&((C$n[C$r]=C$o)._index=C$r),C$r++)}C$n.length=C$r,C$B.worldMatDirty--,C$R.pushNodesList(C$M,C$n),C$B._flush(),C$B.node=C$D.node}}C$u=C$n.default,C$a=C$u,(C$t=C$_).prototype=Object.create(C$a.prototype),(C$t.prototype.constructor=C$t).__proto__=C$a,C$r(C$_),(C$t=C$_.prototype).updateRenderData=function(C$t){C$t._renderDataList||(C$t._buffer=new cc.TiledMapBuffer(C$c._handle,C$l),C$t._renderDataList=new cc.TiledMapRenderDataList)},C$t.fillBuffers=function(C$t,C$e){if(0!==C$t._vertices.length){C$t._updateCulling();var C$i,C$n,C$h=C$t.node;if(C$U=C$t._leftDownToCenterX,C$W=C$t._leftDownToCenterY,C$g=C$h._worldMatrix,C$B=C$e,C$R=(C$D=C$t)._renderDataList,C$P=C$t._buffer,C$t._isCullingDirty()||C$t._isUserNodeDirty()||C$t._hasAnimation()||C$t._hasTiledNode()){C$P.reset();var C$r=((C$n=C$t._enableCulling?(C$i=(C$r=C$t._cullingRect).leftDown,C$r.rightTop):(C$i=C$y,C$t._rightTop)).row-C$i.row+1)*(C$n.col-C$i.col+1);switch(C$F<C$r&&(C$r=C$F),C$P.request(4*C$r,6*C$r),C$t._renderOrder){case C$f.RightDown:this.traverseGrids(C$i,C$n,-1,1);break;case C$f.LeftDown:this.traverseGrids(C$i,C$n,-1,-1);break;case C$f.RightUp:this.traverseGrids(C$i,C$n,1,1);break;case C$f.LeftUp:this.traverseGrids(C$i,C$n,1,-1)}C$t._setCullingDirty(!1),C$t._setUserNodeDirty(!1)}else for(var C$s,C$o,C$a,C$c=0;C$c<C$R._offset;C$c++){if(0<(C$o=(C$s=C$R._dataList[C$c]).nodesRenderList).length){C$e.worldMatDirty++;for(var C$l=0;C$l<C$o.length;C$l++)if(C$a=C$o[C$l])for(var C$u=0;C$u<C$a.length;C$u++){var C$_=C$a[C$u];C$_&&C$v(C$_.node)}C$e.worldMatDirty--,C$e._flush()}0<C$s.ia._count&&(C$e.material=C$s.material,C$e.node=C$h,C$e._flushIA(C$s.ia))}C$j=C$L=C$D=C$H=C$P=C$R=C$B=C$g=C$G=C$M=null}},C$t.traverseGrids=function(C$t,C$e,C$h,C$u){if(C$R.reset(),!(C$e.row<0||C$e.col<0)){C$M=C$R.popRenderData(C$P),C$G=C$M.ia,C$L=C$P._vData,C$j=C$P._uintVData,C$I=C$z=0,C$H=null;for(var C$i,C$n,C$_,C$r,C$s,C$d,C$o,C$f,C$a,C$p,C$m,C$c,C$l,C$y=C$D.node._color._val,C$g=C$D._tiledTiles,C$v=C$D._texGrids,C$x=C$D._tiles,C$b=C$D._texIdToMatIndex,C$A=C$D._materials,C$C=C$D._vertices,C$S=-1,C$T=-1==C$h?(C$r=C$e.row,C$t.row):(C$r=C$t.row,C$e.row);0<=(C$T-C$r)*C$h;C$r+=C$h)for(C$i=C$C[C$r],C$m=0==(C$p=C$D._getNodesCountByRow(C$r))&&null!=C$i,C$_=1==C$u?(C$n=C$m&&C$t.col<C$i.minCol?C$i.minCol:C$t.col,C$m&&C$e.col>C$i.maxCol?C$i.maxCol:C$e.col):(C$n=C$m&&C$e.col>C$i.maxCol?C$i.maxCol:C$e.col,C$m&&C$t.col<C$i.minCol?C$i.minCol:C$t.col);0<=(C$_-C$n)*C$u;C$n+=C$u)(C$c=C$i&&C$i[C$n])?(C$s=C$v[((C$d=C$x[C$c.index])&C$O)>>>0])&&(C$S!==C$s.texId&&(-1!==C$S&&C$X(),C$a=C$b[C$S=C$s.texId],C$H=C$A[C$a],C$M.material=C$H),C$H&&(C$a=C$c.left-C$U,C$o=C$c.bottom-C$W,C$f=C$a+(C$l=C$s.tileset._tileSize).width,C$l=C$o+C$l.height,(C$c=C$g[C$c.index])?this.fillByTiledNode(C$c.node,C$L,C$j,C$a,C$f,C$l,C$o):(C$L[C$I]=C$a,C$L[C$I+1]=C$l,C$j[C$I+4]=C$y,C$L[C$I+5]=C$a,C$L[C$I+6]=C$o,C$j[C$I+9]=C$y,C$L[C$I+10]=C$f,C$L[C$I+11]=C$l,C$j[C$I+14]=C$y,C$L[C$I+15]=C$f,C$L[C$I+16]=C$o,C$j[C$I+19]=C$y),C$c=C$s,C$l=C$d,C$N.x=C$c.l,C$N.y=C$c.t,C$w.x=C$c.r,C$w.y=C$c.t,C$E.x=C$c.l,C$E.y=C$c.b,C$k.x=C$c.r,C$k.y=C$c.b,C$c=null,(C$l&C$V.DIAGONAL)>>>0&&(C$c=C$w,C$w=C$E,C$E=C$c),(C$l&C$V.HORIZONTAL)>>>0&&(C$c=C$N,C$N=C$w,C$w=C$c,C$c=C$E,C$E=C$k,C$k=C$c),(C$l&C$V.VERTICAL)>>>0&&(C$c=C$N,C$N=C$E,C$E=C$c,C$c=C$w,C$w=C$k,C$k=C$c),C$L[C$I+2]=C$N.x,C$L[C$I+3]=C$N.y,C$L[C$I+7]=C$E.x,C$L[C$I+8]=C$E.y,C$L[C$I+12]=C$w.x,C$L[C$I+13]=C$w.y,C$L[C$I+17]=C$k.x,C$L[C$I+18]=C$k.y,C$I+=20,C$P.adjust(4,6),C$G._count+=6,C$z++,0<C$p&&C$Y(C$r,C$n),C$F<=C$z&&C$X())):0<C$p&&C$Y(C$r,C$n);C$P.uploadData(),0<C$G._count&&(C$B.material=C$M.material,C$B.node=C$D.node,C$B._flushIA(C$M.ia))}},C$t.fillByTiledNode=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){C$t._updateLocalMatrix(),C$d.Mat4.copy(C$p,C$t._matrix),C$d.Vec3.set(C$m,-(C$n+C$U),-(C$o+C$W),0),C$d.Mat4.transform(C$p,C$p,C$m);var C$a=C$p.m,C$c=C$a[0],C$l=C$a[1],C$h=C$a[4],C$u=C$a[5],C$_=C$a[12],C$a=C$a[13],C$t=C$t._color._val;C$e[C$I]=C$n*C$c+C$s*C$h+C$_,C$e[C$I+1]=C$n*C$l+C$s*C$u+C$a,C$i[C$I+4]=C$t,C$e[C$I+5]=C$n*C$c+C$o*C$h+C$_,C$e[C$I+6]=C$n*C$l+C$o*C$u+C$a,C$i[C$I+9]=C$t,C$e[C$I+10]=C$r*C$c+C$s*C$h+C$_,C$e[C$I+11]=C$r*C$l+C$s*C$u+C$a,C$i[C$I+14]=C$t,C$e[C$I+15]=C$r*C$c+C$o*C$h+C$_,C$e[C$I+16]=C$r*C$l+C$o*C$u+C$a,C$i[C$I+19]=C$t};var C$u,C$a=C$_;function C$_(){return C$u.apply(this,arguments)||this}C$i.default=C$a,C$n.default.register(C$o,C$a),C$e.exports=C$i.default},{"../core/renderer/":220,"../core/renderer/assembler":217,"../core/renderer/render-flow":221,"../core/renderer/webgl/vertex-format":252,"../core/value-types":279,"./CCTiledLayer":337,"./CCTiledMap":338}],346:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./video-player-impl"),C$r=C$n.EventType,C$s=cc.Enum({REMOTE:0,LOCAL:1}),C$t=cc.Class({name:"cc.VideoPlayer",extends:cc.Component,editor:!1,properties:{_resourceType:C$s.REMOTE,resourceType:{tooltip:!1,type:C$s,set:function(C$t){this._resourceType=C$t,this._updateVideoSource()},get:function(){return this._resourceType}},_remoteURL:"",remoteURL:{tooltip:!1,type:cc.String,set:function(C$t){this._remoteURL=C$t,this._updateVideoSource()},get:function(){return this._remoteURL}},_clip:{default:null,type:cc.Asset},clip:{tooltip:!1,get:function(){return this._clip},set:function(C$t){this._clip=C$t,this._updateVideoSource()},type:cc.Asset},currentTime:{tooltip:!1,type:cc.Float,set:function(C$t){this._impl&&this._impl.seekTo(C$t)},get:function(){return this._impl?this._currentStatus===C$r.NONE||this._currentStatus===C$r.STOPPED||this._currentStatus===C$r.META_LOADED||this._currentStatus===C$r.READY_TO_PLAY?0:this._currentStatus===C$r.COMPLETED?this._impl.duration():this._impl.currentTime():-1}},_volume:1,volume:{get:function(){return this._volume},set:function(C$t){this._volume=C$t,this.isPlaying()&&!this._mute&&this._syncVolume()},range:[0,1],type:cc.Float,tooltip:!1},_mute:!1,mute:{get:function(){return this._mute},set:function(C$t){this._mute=C$t,this._syncVolume()},tooltip:!1},keepAspectRatio:{tooltip:!1,default:!0,type:cc.Boolean,notify:function(){this._impl&&this._impl.setKeepAspectRatioEnabled(this.keepAspectRatio)}},_isFullscreen:{default:!1,formerlySerializedAs:"_N$isFullscreen"},isFullscreen:{get:function(){return this._isFullscreen=this._impl&&this._impl.isFullScreenEnabled(),this._isFullscreen},set:function(C$t){this._isFullscreen=C$t,this._impl&&this._impl.setFullScreenEnabled(C$t)},animatable:!1,tooltip:!1},_stayOnBottom:!1,stayOnBottom:{get:function(){return this._stayOnBottom},set:function(C$t){this._stayOnBottom=C$t,this._impl&&this._impl.setStayOnBottom(C$t)},animatable:!1,tooltip:!1},videoPlayerEvent:{default:[],type:cc.Component.EventHandler}},statics:{EventType:C$r,ResourceType:C$s,Impl:C$n},ctor:function(){this._impl=new C$n,this._currentStatus=C$r.NONE},_syncVolume:function(){var C$t,C$e=this._impl;C$e&&(C$t=this._mute?0:this._volume,C$e.setVolume(C$t))},_updateVideoSource:function(){var C$t="";this.resourceType===C$s.REMOTE?C$t=this.remoteURL:this._clip&&(C$t=this._clip.nativeUrl||""),C$t&&cc.loader.md5Pipe&&(C$t=cc.loader.md5Pipe.transformURL(C$t)),this._impl.setURL(C$t,this._mute||0===this._volume),this._impl.setKeepAspectRatioEnabled(this.keepAspectRatio)},onLoad:function(){var C$t=this._impl;C$t&&(C$t.createDomElementIfNeeded(this._mute||0===this._volume),C$t.setStayOnBottom(this._stayOnBottom),this._updateVideoSource(),C$t.seekTo(this.currentTime),C$t.setFullScreenEnabled(this._isFullscreen),this.pause(),C$t.setEventListener(C$r.PLAYING,this.onPlaying.bind(this)),C$t.setEventListener(C$r.PAUSED,this.onPasued.bind(this)),C$t.setEventListener(C$r.STOPPED,this.onStopped.bind(this)),C$t.setEventListener(C$r.COMPLETED,this.onCompleted.bind(this)),C$t.setEventListener(C$r.META_LOADED,this.onMetaLoaded.bind(this)),C$t.setEventListener(C$r.CLICKED,this.onClicked.bind(this)),C$t.setEventListener(C$r.READY_TO_PLAY,this.onReadyToPlay.bind(this)))},onRestore:function(){this._impl||(this._impl=new C$n)},onEnable:function(){this._impl&&this._impl.enable()},onDisable:function(){this._impl&&this._impl.disable()},onDestroy:function(){this._impl&&(this._impl.destroy(),this._impl=null)},update:function(C$t){this._impl&&this._impl.updateMatrix(this.node)},onReadyToPlay:function(){this._currentStatus=C$r.READY_TO_PLAY,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$r.READY_TO_PLAY),this.node.emit("ready-to-play",this)},onMetaLoaded:function(){this._currentStatus=C$r.META_LOADED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$r.META_LOADED),this.node.emit("meta-loaded",this)},onClicked:function(){this._currentStatus=C$r.CLICKED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$r.CLICKED),this.node.emit("clicked",this)},onPlaying:function(){this._currentStatus=C$r.PLAYING,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$r.PLAYING),this.node.emit("playing",this)},onPasued:function(){this._currentStatus=C$r.PAUSED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$r.PAUSED),this.node.emit("paused",this)},onStopped:function(){this._currentStatus=C$r.STOPPED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$r.STOPPED),this.node.emit("stopped",this)},onCompleted:function(){this._currentStatus=C$r.COMPLETED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$r.COMPLETED),this.node.emit("completed",this)},play:function(){this._impl&&(this._syncVolume(),this._impl.play())},resume:function(){this._impl&&(this._syncVolume(),this._impl.resume())},pause:function(){this._impl&&this._impl.pause()},stop:function(){this._impl&&this._impl.stop()},getDuration:function(){return this._impl?this._impl.duration():-1},isPlaying:function(){return!!this._impl&&this._impl.isPlaying()}});cc.VideoPlayer=C$e.exports=C$t},{"./video-player-impl":347}],347:[function(C$t,C$e,C$o){"use strict";var C$i=C$t("../core/platform/utils"),C$_=C$t("../core/platform/CCSys"),C$n=C$t("../core/platform/CCMacro"),C$r=1,C$s=4,C$d=cc.mat4(),C$f=cc.Class({name:"VideoPlayerImpl",ctor:function(){this._EventList={},this._video=null,this._url="",this._waitingFullscreen=!1,this._fullScreenEnabled=!1,this._stayOnBottom=!1,this._loadedmeta=!1,this._loaded=!1,this._visible=!1,this._playing=!1,this._ignorePause=!1,this._forceUpdate=!1,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this.__eventListeners={}},_bindEvent:function(){var C$t=this._video,C$e=this,C$i=this.__eventListeners;C$i.loadedmetadata=function(){C$e._loadedmeta=!0,C$e._forceUpdate=!0,C$e._waitingFullscreen&&(C$e._waitingFullscreen=!1,C$e._toggleFullscreen(!0)),C$e._dispatchEvent(C$f.EventType.META_LOADED)},C$i.ended=function(){C$e._video===C$t&&(C$e._playing=!1,C$e._dispatchEvent(C$f.EventType.COMPLETED))},C$i.play=function(){C$e._video===C$t&&(C$e._playing=!0,C$e._updateVisibility(),C$e._dispatchEvent(C$f.EventType.PLAYING))},C$i.pause=function(){C$e._video===C$t&&(C$e._playing=!1,C$e._ignorePause||C$e._dispatchEvent(C$f.EventType.PAUSED))},C$i.click=function(){C$e._dispatchEvent(C$f.EventType.CLICKED)},C$t.addEventListener("loadedmetadata",C$i.loadedmetadata),C$t.addEventListener("ended",C$i.ended),C$t.addEventListener("play",C$i.play),C$t.addEventListener("pause",C$i.pause),C$t.addEventListener("click",C$i.click),C$i.onCanPlay=function(){var C$t;C$e._loaded||C$e._playing||((C$t=C$e._video).readyState!==C$s&&C$t.readyState!==C$r||(C$t.currentTime=0,C$e._loaded=!0,C$e._forceUpdate=!0,C$e._dispatchEvent(C$f.EventType.READY_TO_PLAY),C$e._updateVisibility()))},C$t.addEventListener("canplay",C$i.onCanPlay),C$t.addEventListener("canplaythrough",C$i.onCanPlay),C$t.addEventListener("suspend",C$i.onCanPlay)},_updateVisibility:function(){var C$t=this._video;C$t&&(this._visible?C$t.style.visibility="visible":(C$t.style.visibility="hidden",C$t.pause(),this._playing=!1))},_updateSize:function(C$t,C$e){var C$i=this._video;C$i&&(C$i.style.width=C$t+"px",C$i.style.height=C$e+"px")},_createDom:function(C$t){var C$e=document.createElement("video");C$e.style.position="absolute",C$e.style.bottom="0px",C$e.style.left="0px",C$e.style["z-index"]=this._stayOnBottom?C$n.MIN_ZINDEX:0,C$e.className="cocosVideo",C$e.setAttribute("preload","auto"),C$e.setAttribute("webkit-playsinline",""),C$e.setAttribute("x5-playsinline",""),C$e.setAttribute("playsinline",""),C$t&&C$e.setAttribute("muted",""),this._video=C$e,cc.game.container.appendChild(C$e)},createDomElementIfNeeded:function(C$t){this._video||this._createDom(C$t)},removeDom:function(){var C$t,C$e=this._video;C$e&&(C$i.contains(cc.game.container,C$e)&&cc.game.container.removeChild(C$e),C$t=this.__eventListeners,C$e.removeEventListener("loadedmetadata",C$t.loadedmetadata),C$e.removeEventListener("ended",C$t.ended),C$e.removeEventListener("play",C$t.play),C$e.removeEventListener("pause",C$t.pause),C$e.removeEventListener("click",C$t.click),C$e.removeEventListener("canplay",C$t.onCanPlay),C$e.removeEventListener("canplaythrough",C$t.onCanPlay),C$e.removeEventListener("suspend",C$t.onCanPlay),C$t.loadedmetadata=null,C$t.ended=null,C$t.play=null,C$t.pause=null,C$t.click=null,C$t.onCanPlay=null),this._video=null,this._url=""},setURL:function(C$t,C$e){var C$i,C$n;if(this._url!==C$t){this.removeDom(),this._url=C$t,this.createDomElementIfNeeded(C$e),this._bindEvent();for(var C$r=this._video,C$s=(C$r.style.visibility="hidden",this._loaded=!1,this._playing=!1,this._loadedmeta=!1,(C$i=document.createElement("source")).src=C$t,C$r.appendChild(C$i),C$n=cc.path.extname(C$t),C$f._polyfill),C$o=0;C$o<C$s.canPlayType.length;C$o++)C$n!==C$s.canPlayType[C$o]&&((C$i=document.createElement("source")).src=C$t.replace(C$n,C$s.canPlayType[C$o]),C$r.appendChild(C$i))}},getURL:function(){return this._url},play:function(){var C$t=this._video;C$t&&this._visible&&!this._playing&&(C$f._polyfill.autoplayAfterOperation?setTimeout(function(){C$t.play()},20):C$t.play())},pause:function(){var C$t=this._video;this._playing&&C$t&&C$t.pause()},resume:function(){this.play()},stop:function(){var C$t=this._video;C$t&&this._visible&&(this._ignorePause=!0,C$t.currentTime=0,C$t.pause(),setTimeout(function(){this._dispatchEvent(C$f.EventType.STOPPED),this._ignorePause=!1}.bind(this),0))},setVolume:function(C$t){var C$e=this._video;C$e&&(C$e.volume=C$t)},seekTo:function(C$e){var C$i=this._video;C$i&&(this._loaded?C$i.currentTime=C$e:C$i.addEventListener(C$f._polyfill.event,function C$t(){C$i.currentTime=C$e,C$i.removeEventListener(C$f._polyfill.event,C$t)}),C$f._polyfill.autoplayAfterOperation&&this.isPlaying()&&setTimeout(function(){C$i.play()},20))},isPlaying:function(){var C$t=this._video;return C$f._polyfill.autoplayAfterOperation&&this._playing&&setTimeout(function(){C$t.play()},20),this._playing},duration:function(){var C$t=this._video,C$e=-1;return C$t&&(C$e=C$t.duration)<=0&&cc.logID(7702),C$e},currentTime:function(){var C$t=this._video;return C$t?C$t.currentTime:-1},setKeepAspectRatioEnabled:function(){cc.logID(7700)},isKeepAspectRatioEnabled:function(){return!0},_toggleFullscreen:function(C$t){var C$i=this,C$n=this._video;C$n&&(C$t?(C$_.browserType===C$_.BROWSER_TYPE_IE&&(C$n.style.transform=""),cc.screen.requestFullScreen(C$n,function(C$t){var C$e=C$_.browserType===C$_.BROWSER_TYPE_IE?document.msFullscreenElement:document.fullscreenElement;C$i._fullScreenEnabled=C$e===C$n},function(C$t){C$i._fullScreenEnabled=!1})):cc.screen.fullScreen()&&cc.screen.exitFullScreen(C$n))},setStayOnBottom:function(C$t){this._stayOnBottom=C$t,this._video&&(this._video.style["z-index"]=C$t?C$n.MIN_ZINDEX:0)},setFullScreenEnabled:function(C$t){!this._loadedmeta&&C$t?this._waitingFullscreen=!0:this._toggleFullscreen(C$t)},isFullScreenEnabled:function(){return this._fullScreenEnabled},setEventListener:function(C$t,C$e){this._EventList[C$t]=C$e},removeEventListener:function(C$t){this._EventList[C$t]=null},_dispatchEvent:function(C$t){C$t=this._EventList[C$t];C$t&&C$t.call(this,this,this._video.src)},onPlayEvent:function(){this._EventList[C$f.EventType.PLAYING].call(this,this,this._video.src)},enable:function(){var C$t=C$f.elements;-1===C$t.indexOf(this)&&C$t.push(this),this.setVisible(!0)},disable:function(){var C$t=C$f.elements,C$e=C$t.indexOf(this);-1!==C$e&&C$t.splice(C$e,1),this.setVisible(!1)},destroy:function(){this.disable(),this.removeDom()},setVisible:function(C$t){this._visible!==C$t&&(this._visible=!!C$t,this._updateVisibility())},updateMatrix:function(C$t){var C$e,C$i,C$n,C$r,C$s,C$h,C$o,C$u,C$a,C$c,C$l;this._video&&this._visible&&!this._fullScreenEnabled&&(C$t.getWorldMatrix(C$d),(C$e=cc.Camera._findRendererCamera(C$t))&&C$e.worldMatrixToScreen(C$d,C$d,cc.game.canvas.width,cc.game.canvas.height),C$e=C$d.m,!this._forceUpdate&&this._m00===C$e[0]&&this._m01===C$e[1]&&this._m04===C$e[4]&&this._m05===C$e[5]&&this._m12===C$e[12]&&this._m13===C$e[13]&&this._w===C$t._contentSize.width&&this._h===C$t._contentSize.height||(this._m00=C$e[0],this._m01=C$e[1],this._m04=C$e[4],this._m05=C$e[5],this._m12=C$e[12],this._m13=C$e[13],this._w=C$t._contentSize.width,this._h=C$t._contentSize.height,C$n=C$i=1/cc.view._devicePixelRatio,C$a=cc.game.container,C$r=C$e[0]*C$i,C$s=C$e[1],C$h=C$e[4],C$o=C$e[5]*C$n,C$u=C$a&&C$a.style.paddingLeft?parseInt(C$a.style.paddingLeft):0,C$a=C$a&&C$a.style.paddingBottom?parseInt(C$a.style.paddingBottom):0,C$f._polyfill.zoomInvalid?(this._updateSize(this._w*C$r,this._h*C$o),C$o=C$r=1,C$c=this._w*C$i,C$l=this._h*C$n):(C$c=this._w*C$i,C$l=this._h*C$n,this._updateSize(this._w,this._h)),C$c=C$c*C$e[0]*C$t._anchorPoint.x,C$l=C$l*C$e[5]*C$t._anchorPoint.y,C$t="matrix("+C$r+","+-C$s+","+-C$h+","+C$o+","+(C$e[12]*C$i-C$c+C$u)+","+-(C$e[13]*C$n-C$l+C$a)+")",this._video.style.transform=C$t,this._video.style["-webkit-transform"]=C$t,this._video.style["transform-origin"]="0px 100% 0px",this._video.style["-webkit-transform-origin"]="0px 100% 0px",C$_.browserType!==C$_.BROWSER_TYPE_IE&&(this._forceUpdate=!1)))}}),C$t=(C$f.EventType={NONE:-1,PLAYING:0,PAUSED:1,STOPPED:2,COMPLETED:3,META_LOADED:4,CLICKED:5,READY_TO_PLAY:6},C$f.elements=[],C$f.pauseElements=[],cc.game.on(cc.game.EVENT_HIDE,function(){for(var C$t,C$e=C$f.elements,C$i=0;C$i<C$e.length;C$i++)(C$t=C$e[C$i]).isPlaying()&&(C$t.pause(),C$f.pauseElements.push(C$t))}),cc.game.on(cc.game.EVENT_SHOW,function(){for(var C$t=C$f.pauseElements,C$e=C$t.pop();C$e;)C$e.play(),C$e=C$t.pop()}),C$f._polyfill={devicePixelRatio:!1,event:"canplay",canPlayType:[]},document.createElement("video")),C$t=(C$t.canPlayType&&(C$t.canPlayType("video/ogg")&&(C$f._polyfill.canPlayType.push(".ogg"),C$f._polyfill.canPlayType.push(".ogv")),C$t.canPlayType("video/mp4")&&C$f._polyfill.canPlayType.push(".mp4"),C$t.canPlayType("video/webm")&&C$f._polyfill.canPlayType.push(".webm")),C$_.browserType===C$_.BROWSER_TYPE_FIREFOX&&(C$f._polyfill.autoplayAfterOperation=!0),C$_.OS_ANDROID!==C$_.os||C$_.browserType!==C$_.BROWSER_TYPE_SOUGOU&&C$_.browserType!==C$_.BROWSER_TYPE_360||(C$f._polyfill.zoomInvalid=!0),document.createElement("style"));C$t.innerHTML=".cocosVideo:-moz-full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:-webkit-full-screen{transform:matrix(1,0,0,1,0,0) !important;}",document.head.appendChild(C$t),C$e.exports=C$f},{"../core/platform/CCMacro":194,"../core/platform/CCSys":198,"../core/platform/utils":213}],348:[function(C$t,C$e,C$i){"use strict";var C$t=C$t("./webview-impl"),C$n=C$t.EventType;function C$r(){}var C$s=cc.Class({name:"cc.WebView",extends:cc.Component,editor:!1,properties:{_useOriginalSize:!0,_url:"",url:{type:cc.String,tooltip:!1,get:function(){return this._url},set:function(C$t){this._url=C$t;var C$e=this._impl;C$e&&C$e.loadURL(C$t)}},webviewEvents:{default:[],type:cc.Component.EventHandler}},statics:{EventType:C$n,Impl:C$t},ctor:function(){this._impl=new C$s.Impl},onRestore:function(){this._impl||(this._impl=new C$s.Impl)},onEnable:function(){var C$t=this._impl;C$t.createDomElementIfNeeded(this.node.width,this.node.height),C$t.setEventListener(C$n.LOADED,this._onWebViewLoaded.bind(this)),C$t.setEventListener(C$n.LOADING,this._onWebViewLoading.bind(this)),C$t.setEventListener(C$n.ERROR,this._onWebViewLoadError.bind(this)),C$t.loadURL(this._url),C$t.setVisible(!0)},onDisable:function(){var C$t=this._impl;C$t.setVisible(!1),C$t.setEventListener(C$n.LOADED,C$r),C$t.setEventListener(C$n.LOADING,C$r),C$t.setEventListener(C$n.ERROR,C$r)},onDestroy:function(){this._impl&&(this._impl.destroy(),this._impl=null)},update:function(C$t){this._impl&&this._impl.updateMatrix(this.node)},_onWebViewLoaded:function(){cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$n.LOADED),this.node.emit("loaded",this)},_onWebViewLoading:function(){return cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$n.LOADING),this.node.emit("loading",this),!0},_onWebViewLoadError:function(){cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$n.ERROR),this.node.emit("error",this)},setJavascriptInterfaceScheme:function(C$t){this._impl&&this._impl.setJavascriptInterfaceScheme(C$t)},setOnJSCallback:function(C$t){this._impl&&this._impl.setOnJSCallback(C$t)},evaluateJS:function(C$t){this._impl&&this._impl.evaluateJS(C$t)}});cc.WebView=C$e.exports=C$s},{"./webview-impl":349}],349:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("../core/platform/utils"),C$t=C$t("../core/platform/CCSys"),C$_=cc.mat4(),C$r=cc.Class({name:"WebViewImpl",ctor:function(){this._EventList={},this._visible=!1,this._parent=null,this._div=null,this._iframe=null,this._listener=null,this._forceUpdate=!1,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this.__eventListeners={}},_updateVisibility:function(){var C$t;this._div&&(C$t=this._div,this._visible?C$t.style.visibility="visible":C$t.style.visibility="hidden")},_updateSize:function(C$t,C$e){var C$i=this._div;C$i&&(C$i.style.width=C$t+"px",C$i.style.height=C$e+"px")},_initEvent:function(){var C$t,C$e,C$i=this._iframe;C$i&&(C$t=this.__eventListeners,C$e=this,C$t.load=function(){C$e._forceUpdate=!0,C$e._dispatchEvent(C$r.EventType.LOADED)},C$t.error=function(){C$e._dispatchEvent(C$r.EventType.ERROR)},C$i.addEventListener("load",C$t.load),C$i.addEventListener("error",C$t.error))},_initStyle:function(){var C$t;this._div&&((C$t=this._div).style.position="absolute",C$t.style.bottom="0px",C$t.style.left="0px")},_setOpacity:function(C$t){var C$e=this._iframe;C$e&&C$e.style&&(C$e.style.opacity=C$t/255)},_createDom:function(C$t,C$e){C$r._polyfill.enableDiv?(this._div=document.createElement("div"),this._div.style["-webkit-overflow"]="auto",this._div.style["-webkit-overflow-scrolling"]="touch",this._iframe=document.createElement("iframe"),this._div.appendChild(this._iframe),this._iframe.style.width="100%",this._iframe.style.height="100%"):this._div=this._iframe=document.createElement("iframe"),C$r._polyfill.enableBG&&(this._div.style.background="#FFF"),this._div.style.background="#FFF",this._div.style.height=C$e+"px",this._div.style.width=C$t+"px",this._div.style.overflow="scroll",this._iframe.style.border="none",cc.game.container.appendChild(this._div),this._updateVisibility()},_createNativeControl:function(C$t,C$e){this._createDom(C$t,C$e),this._initStyle(),this._initEvent()},createDomElementIfNeeded:function(C$t,C$e){this._div?this._updateSize(C$t,C$e):this._createNativeControl(C$t,C$e)},removeDom:function(){var C$t,C$e=this._div,C$e=(C$e&&(C$n.contains(cc.game.container,C$e)&&cc.game.container.removeChild(C$e),this._div=null),this._iframe);C$e&&(C$t=this.__eventListeners,C$e.removeEventListener("load",C$t.load),C$e.removeEventListener("error",C$t.error),C$t.load=null,C$t.error=null,this._iframe=null)},setOnJSCallback:function(C$t){},setJavascriptInterfaceScheme:function(C$t){},loadData:function(C$t,C$e,C$i,C$n){},loadHTMLString:function(C$t,C$e){},loadURL:function(C$t){var C$e,C$i=this._iframe;C$i&&(C$i.src=C$t,C$e=this,C$i.addEventListener("load",function C$t(){C$e._loaded=!0,C$e._updateVisibility(),C$i.removeEventListener("load",C$t)}),this._dispatchEvent(C$r.EventType.LOADING))},stopLoading:function(){cc.logID(7800)},reload:function(){var C$t=this._iframe;!C$t||(C$t=C$t.contentWindow)&&C$t.location&&C$t.location.reload()},canGoBack:function(){return cc.logID(7801),!0},canGoForward:function(){return cc.logID(7802),!0},goBack:function(){try{if(C$r._polyfill.closeHistory)return cc.logID(7803);var C$t,C$e=this._iframe;!C$e||(C$t=C$e.contentWindow)&&C$t.location&&C$t.history.back.call(C$t)}catch(C$t){cc.log(C$t)}},goForward:function(){try{if(C$r._polyfill.closeHistory)return cc.logID(7804);var C$t,C$e=this._iframe;!C$e||(C$t=C$e.contentWindow)&&C$t.location&&C$t.history.forward.call(C$t)}catch(C$t){cc.log(C$t)}},evaluateJS:function(C$t){var C$e=this._iframe;if(C$e){C$e=C$e.contentWindow;try{C$e.eval(C$t),this._dispatchEvent(C$r.EventType.JS_EVALUATED)}catch(C$t){console.error(C$t)}}},setScalesPageToFit:function(){cc.logID(7805)},setEventListener:function(C$t,C$e){this._EventList[C$t]=C$e},removeEventListener:function(C$t){this._EventList[C$t]=null},_dispatchEvent:function(C$t){C$t=this._EventList[C$t];C$t&&C$t.call(this,this,this._iframe.src)},_createRenderCmd:function(){return new C$r.RenderCmd(this)},destroy:function(){this.removeDom()},setVisible:function(C$t){this._visible!==C$t&&(this._visible=!!C$t,this._updateVisibility())},updateMatrix:function(C$t){var C$e,C$i,C$n,C$r,C$s,C$h,C$u,C$o,C$a,C$c,C$l;this._div&&this._visible&&(C$t.getWorldMatrix(C$_),(C$e=cc.Camera._findRendererCamera(C$t))&&C$e.worldMatrixToScreen(C$_,C$_,cc.game.canvas.width,cc.game.canvas.height),C$e=C$_.m,!this._forceUpdate&&this._m00===C$e[0]&&this._m01===C$e[1]&&this._m04===C$e[4]&&this._m05===C$e[5]&&this._m12===C$e[12]&&this._m13===C$e[13]&&this._w===C$t._contentSize.width&&this._h===C$t._contentSize.height||(this._m00=C$e[0],this._m01=C$e[1],this._m04=C$e[4],this._m05=C$e[5],this._m12=C$e[12],this._m13=C$e[13],this._w=C$t._contentSize.width,this._h=C$t._contentSize.height,C$n=C$i=1/cc.view._devicePixelRatio,C$o=cc.game.container,C$l=C$e[0]*C$i,C$r=C$e[1],C$s=C$e[4],C$h=C$e[5]*C$n,C$u=C$o&&C$o.style.paddingLeft?parseInt(C$o.style.paddingLeft):0,C$o=C$o&&C$o.style.paddingBottom?parseInt(C$o.style.paddingBottom):0,this._updateSize(this._w,this._h),C$a=this._w*C$i,C$c=this._h*C$n,C$a=C$a*C$e[0]*C$t._anchorPoint.x,C$c=C$c*C$e[5]*C$t._anchorPoint.y,C$l="matrix("+C$l+","+-C$r+","+-C$s+","+C$h+","+(C$e[12]*C$i-C$a+C$u)+","+-(C$e[13]*C$n-C$c+C$o)+")",this._div.style.transform=C$l,this._div.style["-webkit-transform"]=C$l,this._div.style["transform-origin"]="0px 100% 0px",this._div.style["-webkit-transform-origin"]="0px 100% 0px",this._setOpacity(C$t.opacity),this._forceUpdate=!1))}}),C$s=(C$r.EventType={LOADING:0,LOADED:1,ERROR:2,JS_EVALUATED:3},C$r._polyfill={devicePixelRatio:!1,enableDiv:!1});C$t.os===C$t.OS_IOS&&(C$s.enableDiv=!0),C$t.isMobile?C$t.browserType===C$t.BROWSER_TYPE_FIREFOX&&(C$s.enableBG=!0):C$t.browserType===C$t.BROWSER_TYPE_IE&&(C$s.closeHistory=!0),C$e.exports=C$r},{"../core/platform/CCSys":198,"../core/platform/utils":213}],350:[function(C$t,C$e,C$i){"use strict";C$t("./cocos2d/core"),C$t("./cocos2d/animation"),C$t("./cocos2d/particle"),C$t("./cocos2d/tilemap"),C$t("./cocos2d/videoplayer/CCVideoPlayer"),C$t("./cocos2d/webview/CCWebView"),C$t("./cocos2d/core/components/CCStudioComponent"),C$t("./extensions/ccpool/CCNodePool"),C$t("./cocos2d/actions"),C$t("./extensions/spine"),C$t("./extensions/dragonbones"),C$t("./cocos2d/deprecated")},{"./cocos2d/actions":8,"./cocos2d/animation":17,"./cocos2d/core":135,"./cocos2d/core/components/CCStudioComponent":95,"./cocos2d/deprecated":291,"./cocos2d/particle":297,"./cocos2d/particle/CCParticleAsset":294,"./cocos2d/tilemap":343,"./cocos2d/tilemap/CCTiledMapAsset":339,"./cocos2d/videoplayer/CCVideoPlayer":346,"./cocos2d/webview/CCWebView":348,"./extensions/ccpool/CCNodePool":351,"./extensions/dragonbones":void 0,"./extensions/spine":354}],351:[function(C$t,C$e,C$i){"use strict";cc.NodePool=function(C$t){this.poolHandlerComp=C$t,this._pool=[]},cc.NodePool.prototype={constructor:cc.NodePool,size:function(){return this._pool.length},clear:function(){for(var C$t=this._pool.length,C$e=0;C$e<C$t;++C$e)this._pool[C$e].destroy();this._pool.length=0},put:function(C$t){var C$e;C$t&&-1===this._pool.indexOf(C$t)&&(C$t.removeFromParent(!1),(C$e=this.poolHandlerComp?C$t.getComponent(this.poolHandlerComp):null)&&C$e.unuse&&C$e.unuse(),this._pool.push(C$t))},get:function(){var C$t=this._pool.length-1;if(C$t<0)return null;var C$e=this._pool[C$t],C$t=(this._pool.length=C$t,this.poolHandlerComp?C$e.getComponent(this.poolHandlerComp):null);return C$t&&C$t.reuse&&C$t.reuse.apply(C$t,arguments),C$e}},C$e.exports=cc.NodePool},{}],352:[function(C$t,C$e,C$r){"use strict";var C$d=(C$n=C$t("../../cocos2d/core/value-types/mat4"))&&C$n.__esModule?C$n:{default:C$n};function C$i(){}function C$c(C$t){Object.defineProperty(C$t,"_worldMatDirty",{get:function(){return!0},set:function(C$t){}}),C$t._calculWorldMatrix=C$i,C$t._mulMat=C$i}var C$f=C$t("../../cocos2d/core/renderer/render-flow").FLAG_TRANSFORM,C$l="ATTACHED_NODE_TREE",C$h="ATTACHED_NODE:",C$p=new C$d.default,C$n=cc.Class({name:"sp.AttachUtil",ctor:function(){this._inited=!1,this._skeleton=null,this._skeletonNode=null,this._skeletonComp=null,this._attachedRootNode=null,this._attachedNodeArray=[],this._boneIndexToNode={}},init:function(C$t){this._inited=!0,this._skeleton=C$t._skeleton,this._skeletonNode=C$t.node,this._skeletonComp=C$t},reset:function(){this._inited=!1,this._skeleton=null,this._skeletonNode=null,this._skeletonComp=null},_prepareAttachNode:function(){var C$t;if(this._skeleton)return C$t=this._skeletonNode.getChildByName(C$l),C$t&&C$t.isValid||(C$t=new cc.Node(C$l),C$c(C$t),this._skeletonNode.addChild(C$t)),this._skeletonComp.isAnimationCached()&&this._skeletonComp._frameCache&&this._skeletonComp._frameCache.enableCacheAttachedInfo(),this._attachedRootNode=C$t},_buildBoneAttachedNode:function(C$t,C$e){var C$i=C$h+C$t.data.name,C$i=new cc.Node(C$i);return this._buildBoneRelation(C$i,C$t,C$e),C$i},_buildBoneRelation:function(C$t,C$e,C$i){C$c(C$t),C$t._bone=C$e,C$t._boneIndex=C$i,this._attachedNodeArray.push(C$t),this._boneIndexToNode[C$i]=C$t},getAttachedRootNode:function(){return this._attachedRootNode},getAttachedNodes:function(C$t){var C$e=this._attachedNodeArray,C$i=[];if(!this._inited)return C$i;for(var C$n=0,C$r=C$e.length;C$n<C$r;C$n++){var C$s=C$e[C$n];C$s&&C$s.isValid&&C$s.name===C$h+C$t&&C$i.push(C$s)}return C$i},_rebuildNodeArray:function(){for(var C$t=this._boneIndexToNode={},C$e=this._attachedNodeArray,C$i=this._attachedNodeArray=[],C$n=0,C$r=C$e.length;C$n<C$r;C$n++){var C$s=C$e[C$n];C$s&&C$s.isValid&&!C$s._toRemove&&(C$i.push(C$s),C$t[C$s._boneIndex]=C$s)}},_sortNodeArray:function(){this._attachedNodeArray.sort(function(C$t,C$e){return C$t._boneIndex<C$e._boneIndex?-1:1})},_getNodeByBoneIndex:function(C$t){C$t=this._boneIndexToNode[C$t];return C$t&&C$t.isValid?C$t:null},destroyAttachedNodes:function(C$t){if(this._inited){for(var C$e=this._attachedNodeArray,C$i=function C$t(C$e){for(var C$i=C$e.children,C$n=0,C$r=C$i.length;C$n<C$r;C$n++){var C$s=C$i[C$n];C$s&&C$t(C$s)}C$e._toRemove=!0},C$n=0,C$r=C$e.length;C$n<C$r;C$n++){var C$s=C$e[C$n];C$s&&C$s.isValid&&C$s.name.split(C$h)[1]===C$t&&(C$i(C$s),C$s.removeFromParent(!0),C$s.destroy(),C$e[C$n]=null)}this._rebuildNodeArray()}},generateAttachedNodes:function(C$t){var C$e=[];if(!this._inited)return C$e;var C$n=this._prepareAttachNode();if(!C$n)return C$e;for(var C$i=[],C$r=this._skeleton.bones,C$s=0,C$o=C$r.length;C$s<C$o;C$s++){var C$a=C$r[C$s];C$a.data.name==C$t&&C$i.push(C$a)}for(var C$c=function(C$t){if(C$t){var C$e=C$t.data;if(C$i=this._getNodeByBoneIndex(C$e.index))return C$i;var C$i=this._buildBoneAttachedNode(C$t,C$e.index),C$e=C$c(C$t.parent)||C$n;return C$i.parent=C$e,C$i}}.bind(this),C$l=0,C$h=C$i.length;C$l<C$h;C$l++){var C$u=C$c(C$i[C$l]);C$e.push(C$u)}return this._sortNodeArray(),C$e},destroyAllAttachedNodes:function(){var C$t;this._attachedRootNode=null,this._attachedNodeArray.length=0,this._boneIndexToNode={},!this._inited||(C$t=this._skeletonNode.getChildByName(C$l))&&(C$t.removeFromParent(!0),C$t.destroy())},generateAllAttachedNodes:function(){if(this._inited){this._boneIndexToNode={},this._attachedNodeArray.length=0;var C$t=this._prepareAttachNode();if(C$t){for(var C$e=this._skeleton.bones,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r,C$s=C$e[C$i],C$o=C$s.data,C$a=null;(C$a=C$s.parent?(C$r=C$s.parent.data.index,this._boneIndexToNode[C$r]):C$t)&&((C$r=C$a.getChildByName(C$h+C$o.name))&&C$r.isValid?this._buildBoneRelation(C$r,C$s,C$o.index):(C$r=this._buildBoneAttachedNode(C$s,C$o.index),C$a.addChild(C$r)))}return C$t}}},_hasAttachedNode:function(){return!!this._inited&&!!this._skeletonNode.getChildByName(C$l)},_associateAttachedNode:function(){if(this._inited){var C$t=this._skeletonNode.getChildByName(C$l);if(C$t&&C$t.isValid){this._attachedRootNode=C$t,this._boneIndexToNode={},this._attachedNodeArray.length=0,C$c(C$t);this._skeletonComp.isAnimationCached()&&this._skeletonComp._frameCache&&this._skeletonComp._frameCache.enableCacheAttachedInfo();for(var C$e=this._skeleton.bones,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r,C$s=C$e[C$i],C$o=C$s.data,C$a=null;!(C$a=C$s.parent?(C$r=C$s.parent.data.index,this._boneIndexToNode[C$r]):C$t)||(C$r=C$a.getChildByName(C$h+C$o.name))&&C$r.isValid&&this._buildBoneRelation(C$r,C$s,C$o.index)}}}},_syncAttachedNode:function(){if(this._inited){var C$t=this._attachedRootNode,C$e=this._attachedNodeArray;if(!C$t||!C$t.isValid)return this._attachedRootNode=null,void(C$e.length=0);var C$i,C$h=this._skeletonNode._worldMatrix;C$d.default.copy(C$t._worldMatrix,C$h),C$t._renderFlag&=~C$f;if(C$i=this._skeletonComp.isAnimationCached()?this._skeletonComp._curFrame&&this._skeletonComp._curFrame.boneInfos:this._skeleton.bones){for(var C$n,C$r,C$s,C$u=this._skeletonNode._mulMat,C$o=!1,C$a=0,C$_=C$e.length;C$a<C$_;C$a++){var C$c,C$l=C$e[C$a];C$l&&C$l.isValid?(C$c=C$i[C$l._boneIndex])?(C$n=C$l._worldMatrix,C$r=C$t._worldMatrix,C$c=C$c,C$s=void 0,(C$s=C$p.m)[0]=C$c.a,C$s[1]=C$c.c,C$s[4]=C$c.b,C$s[5]=C$c.d,C$s[12]=C$c.worldX,C$s[13]=C$c.worldY,C$u(C$n,C$r,C$p),C$l._renderFlag&=~C$f):(C$l.removeFromParent(!0),C$l.destroy(),C$o=!(C$e[C$a]=null)):C$o=!(C$e[C$a]=null)}C$o&&this._rebuildNodeArray()}}}});C$e.exports=sp.AttachUtil=C$n},{"../../cocos2d/core/renderer/render-flow":221,"../../cocos2d/core/value-types/mat4":281}],353:[function(C$t,C$e,C$h){"use strict";var C$n=C$t("./track-entry-listeners"),C$i=C$t("../../cocos2d/core/components/CCRenderComponent"),C$r=C$t("./lib/spine"),C$s=C$t("../../cocos2d/core/graphics/graphics"),C$o=C$t("../../cocos2d/core/renderer/render-flow").FLAG_POST_RENDER,C$a=C$t("./skeleton-cache"),C$c=C$t("./AttachUtil"),C$t=cc.Enum({default:-1}),C$u=cc.Enum({"<None>":0}),C$l=cc.Enum({REALTIME:0,SHARED_CACHE:1,PRIVATE_CACHE:2});sp.Skeleton=cc.Class({name:"sp.Skeleton",extends:C$i,editor:!1,statics:{AnimationCacheMode:C$l},properties:{paused:{default:!1,visible:!1},skeletonData:{default:null,type:sp.SkeletonData,notify:function(){this.defaultSkin="",this.defaultAnimation="",this._updateSkeletonData()},tooltip:!1},defaultSkin:{default:"",visible:!1},defaultAnimation:{default:"",visible:!1},animation:{get:function(){if(this.isAnimationCached())return this._animationName;var C$t=this.getCurrent(0);return C$t&&C$t.animation.name||""},set:function(C$t){(this.defaultAnimation=C$t)?this.setAnimation(0,C$t,this.loop):this.isAnimationCached()||(this.clearTrack(0),this.setToSetupPose())},visible:!1},_defaultSkinIndex:{get:function(){if(this.skeletonData){var C$t=this.skeletonData.getSkinsEnum();if(C$t)if(""===this.defaultSkin){if(C$t.hasOwnProperty(0))return this._defaultSkinIndex=0}else{C$t=C$t[this.defaultSkin];if(void 0!==C$t)return C$t}}return 0},set:function(C$t){if(!(C$e=this.skeletonData?this.skeletonData.getSkinsEnum():C$e))return cc.errorID("",this.name);var C$e=C$e[C$t];void 0!==C$e?(this.defaultSkin=C$e,this.setSkin(this.defaultSkin)):cc.errorID(7501,this.name)},type:C$t,visible:!0,displayName:"Default Skin",tooltip:!1},_animationIndex:{get:function(){var C$t=this.animation;if(this.skeletonData&&C$t){var C$e=this.skeletonData.getAnimsEnum();if(C$e){C$e=C$e[C$t];if(void 0!==C$e)return C$e}}return 0},set:function(C$t){if(0!==C$t){if(!(C$e=this.skeletonData?this.skeletonData.getAnimsEnum():C$e))return cc.errorID(7502,this.name);var C$e=C$e[C$t];void 0!==C$e?this.animation=C$e:cc.errorID(7503,this.name)}else this.animation=""},type:C$u,visible:!0,displayName:"Animation",tooltip:!1},_preCacheMode:-1,_cacheMode:C$l.REALTIME,_defaultCacheMode:{default:0,type:C$l,notify:function(){this.setAnimationCacheMode(this._defaultCacheMode)},editorOnly:!0,visible:!0,animatable:!1,displayName:"Animation Cache Mode",tooltip:!1},loop:{default:!0,tooltip:!1},premultipliedAlpha:{default:!0,tooltip:!1},timeScale:{default:1,tooltip:!1},debugSlots:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},debugBones:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},debugMesh:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},useTint:{default:!1,tooltip:!1,notify:function(){this._updateUseTint()}},enableBatch:{default:!1,notify:function(){this._updateBatch()},tooltip:!1},_accTime:0,_playCount:0,_frameCache:null,_curFrame:null,_skeletonCache:null,_animationName:"",_animationQueue:[],_headAniInfo:null,_playTimes:0,_isAniComplete:!0},ctor:function(){this._effectDelegate=null,this._skeleton=null,this._rootBone=null,this._listener=null,this._materialCache={},this._debugRenderer=null,this._startSlotIndex=-1,this._endSlotIndex=-1,this._startEntry={animation:{name:""},trackIndex:0},this._endEntry={animation:{name:""},trackIndex:0},this.attachUtil=new C$c},_getDefaultMaterial:function(){return cc.Material.getBuiltinMaterial("2d-spine")},_updateMaterial:function(){var C$t=this.useTint||this.isAnimationCached()&&!0,C$e=this.getMaterial(0);C$e&&(C$e.define("USE_TINT",C$t),C$e.define("CC_USE_MODEL",!this.enableBatch)),this._materialCache={}},disableRender:function(){this._super(),this.node._renderFlag&=~C$o},markForRender:function(C$t){this._super(C$t),C$t?this.node._renderFlag|=C$o:this.node._renderFlag&=~C$o},_updateUseTint:function(){var C$t,C$e=this.getMaterial(0);C$e&&(C$t=this.useTint||this.isAnimationCached()&&!0,C$e.define("USE_TINT",C$t)),this._materialCache={}},_updateBatch:function(){var C$t=this.getMaterial(0);C$t&&C$t.define("CC_USE_MODEL",!this.enableBatch),this._materialCache={}},_validateRender:function(){var C$t=this.skeletonData;C$t&&C$t.isTexturesLoaded()?this._super():this.disableRender()},setSkeletonData:function(C$t){var C$e;null!=C$t.width&&null!=C$t.height&&this.node.setContentSize(C$t.width,C$t.height),this._cacheMode===C$l.SHARED_CACHE?this._skeletonCache=C$a.sharedCache:this._cacheMode===C$l.PRIVATE_CACHE&&(this._skeletonCache=new C$a,this._skeletonCache.enablePrivateMode()),this.isAnimationCached()?((this.debugBones||this.debugSlots)&&cc.warn("Debug bones or slots is invalid in cached mode"),C$e=this._skeletonCache.getSkeletonCache(this.skeletonData._uuid,C$t),this._skeleton=C$e.skeleton,this._clipper=C$e.clipper):(this._skeleton=new C$r.Skeleton(C$t),this._clipper=new C$r.SkeletonClipping),this._rootBone=this._skeleton.getRootBone(),this.markForRender(!0)},setSlotsRange:function(C$t,C$e){this.isAnimationCached()?cc.warn("Slots visible range can not be modified in cached mode."):(this._startSlotIndex=C$t,this._endSlotIndex=C$e)},setAnimationStateData:function(C$t){this.isAnimationCached()?cc.warn("'setAnimationStateData' interface can not be invoked in cached mode."):(C$t=new C$r.AnimationState(C$t),this._listener&&(this._state&&this._state.removeListener(this._listener),C$t.addListener(this._listener)),this._state=C$t)},__preload:function(){this._super();for(var C$t=this.node.children,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e];C$n&&"DEBUG_DRAW_NODE"===C$n._name&&C$n.destroy()}this._updateSkeletonData(),this._updateDebugDraw(),this._updateUseTint(),this._updateBatch()},setAnimationCacheMode:function(C$t){this._preCacheMode!==C$t&&(this._cacheMode=C$t,this._updateSkeletonData(),this._updateUseTint())},isAnimationCached:function(){return this._cacheMode!==C$l.REALTIME},update:function(C$t){if(!this.paused)if(C$t*=this.timeScale*sp.timeScale,this.isAnimationCached()){var C$e;if(this._isAniComplete)return 0!==this._animationQueue.length||this._headAniInfo?(this._headAniInfo||(this._headAniInfo=this._animationQueue.shift()),this._accTime+=C$t,void(this._accTime>this._headAniInfo.delay&&(C$e=this._headAniInfo,this._headAniInfo=null,this.setAnimation(0,C$e.animationName,C$e.loop)))):void((C$e=this._frameCache)&&C$e.isInvalid()&&(C$e.updateToFrame(),C$e=C$e.frames,this._curFrame=C$e[C$e.length-1]));this._updateCache(C$t)}else this._updateRealtime(C$t)},_emitCacheCompleteEvent:function(){this._listener&&(this._endEntry.animation.name=this._animationName,this._listener.complete&&this._listener.complete(this._endEntry),this._listener.end&&this._listener.end(this._endEntry))},_updateCache:function(C$t){var C$e=this._frameCache;if(C$e.isInited()){var C$i=C$e.frames,C$n=C$a.FrameTime,C$t=(0==this._accTime&&0==this._playCount&&(this._startEntry.animation.name=this._animationName,this._listener&&this._listener.start&&this._listener.start(this._startEntry)),this._accTime+=C$t,Math.floor(this._accTime/C$n));if(C$e.isCompleted||C$e.updateToFrame(C$t),C$e.isCompleted&&C$t>=C$i.length){if(this._playCount++,0<this._playTimes&&this._playCount>=this._playTimes)return this._curFrame=C$i[C$i.length-1],this._accTime=0,this._playCount=0,this._isAniComplete=!0,void this._emitCacheCompleteEvent();C$t=this._accTime=0,this._emitCacheCompleteEvent()}this._curFrame=C$i[C$t]}},_updateRealtime:function(C$t){var C$e=this._skeleton,C$i=this._state;C$e&&(C$e.update(C$t),C$i&&(C$i.update(C$t),C$i.apply(C$e)))},setVertexEffectDelegate:function(C$t){this._effectDelegate=C$t},updateWorldTransform:function(){this.isAnimationCached()&&this._skeleton&&this._skeleton.updateWorldTransform()},setToSetupPose:function(){this._skeleton&&this._skeleton.setToSetupPose()},setBonesToSetupPose:function(){this._skeleton&&this._skeleton.setBonesToSetupPose()},setSlotsToSetupPose:function(){this._skeleton&&this._skeleton.setSlotsToSetupPose()},updateAnimationCache:function(C$t){var C$e;this.isAnimationCached()&&(C$e=this.skeletonData._uuid,this._skeletonCache&&this._skeletonCache.updateAnimationCache(C$e,C$t))},invalidAnimationCache:function(){this.isAnimationCached()&&this._skeletonCache&&this._skeletonCache.invalidAnimationCache(this.skeletonData._uuid)},findBone:function(C$t){return this._skeleton?this._skeleton.findBone(C$t):null},findSlot:function(C$t){return this._skeleton?this._skeleton.findSlot(C$t):null},setSkin:function(C$t){this._skeleton&&(this._skeleton.setSkinByName(C$t),this._skeleton.setSlotsToSetupPose()),this.invalidAnimationCache()},getAttachment:function(C$t,C$e){return this._skeleton?this._skeleton.getAttachmentByName(C$t,C$e):null},setAttachment:function(C$t,C$e){this._skeleton&&this._skeleton.setAttachment(C$t,C$e),this.invalidAnimationCache()},getTextureAtlas:function(C$t){return C$t.region},setMix:function(C$t,C$e,C$i){this._state&&this._state.data.setMix(C$t,C$e,C$i)},setAnimation:function(C$t,C$e,C$i){if(this._playTimes=C$i?0:1,this._animationName=C$e,this.isAnimationCached()){if(0!==C$t&&cc.warn("Track index can not greater than 0 in cached mode."),!this._skeletonCache)return null;var C$n=this._skeletonCache.getAnimationCache(this.skeletonData._uuid,C$e);(C$n=C$n||this._skeletonCache.initAnimationCache(this.skeletonData._uuid,C$e))&&(this._isAniComplete=!1,this._accTime=0,this._playCount=0,this._frameCache=C$n,this.attachUtil._hasAttachedNode()&&this._frameCache.enableCacheAttachedInfo(),this._frameCache.updateToFrame(0),this._curFrame=this._frameCache.frames[0])}else if(this._skeleton){C$n=this._skeleton.data.findAnimation(C$e);if(!C$n)return cc.logID(7509,C$e),null;C$e=this._state.setAnimationWith(C$t,C$n,C$i);return this._state.apply(this._skeleton),C$e}return null},addAnimation:function(C$t,C$e,C$i,C$n){var C$r;if(C$n=C$n||0,this.isAnimationCached())0!==C$t&&cc.warn("Track index can not greater than 0 in cached mode."),this._animationQueue.push({animationName:C$e,loop:C$i,delay:C$n});else if(this._skeleton)return(C$r=this._skeleton.data.findAnimation(C$e))?this._state.addAnimationWith(C$t,C$r,C$i,C$n):(cc.logID(7510,C$e),null);return null},findAnimation:function(C$t){return this._skeleton?this._skeleton.data.findAnimation(C$t):null},getCurrent:function(C$t){if(this.isAnimationCached())cc.warn("'getCurrent' interface can not be invoked in cached mode.");else if(this._state)return this._state.getCurrent(C$t);return null},clearTracks:function(){this.isAnimationCached()?cc.warn("'clearTracks' interface can not be invoked in cached mode."):this._state&&this._state.clearTracks()},clearTrack:function(C$t){this.isAnimationCached()?cc.warn("'clearTrack' interface can not be invoked in cached mode."):this._state&&this._state.clearTrack(C$t)},setStartListener:function(C$t){this._ensureListener(),this._listener.start=C$t},setInterruptListener:function(C$t){this._ensureListener(),this._listener.interrupt=C$t},setEndListener:function(C$t){this._ensureListener(),this._listener.end=C$t},setDisposeListener:function(C$t){this._ensureListener(),this._listener.dispose=C$t},setCompleteListener:function(C$t){this._ensureListener(),this._listener.complete=C$t},setEventListener:function(C$t){this._ensureListener(),this._listener.event=C$t},setTrackStartListener:function(C$t,C$e){C$n.getListeners(C$t).start=C$e},setTrackInterruptListener:function(C$t,C$e){C$n.getListeners(C$t).interrupt=C$e},setTrackEndListener:function(C$t,C$e){C$n.getListeners(C$t).end=C$e},setTrackDisposeListener:function(C$t,C$e){C$n.getListeners(C$t).dispose=C$e},setTrackCompleteListener:function(C$t,C$i){C$n.getListeners(C$t).complete=function(C$t){var C$e=Math.floor(C$t.trackTime/C$t.animationEnd);C$i(C$t,C$e)}},setTrackEventListener:function(C$t,C$e){C$n.getListeners(C$t).event=C$e},getState:function(){return this._state},_updateAnimEnum:!1,_updateSkinEnum:!1,_ensureListener:function(){this._listener||(this._listener=new C$n,this._state&&this._state.addListener(this._listener))},_updateSkeletonData:function(){if(this.skeletonData){var C$t=this.skeletonData.getRuntimeData();if(C$t){try{this.setSkeletonData(C$t),this.isAnimationCached()||this.setAnimationStateData(new C$r.AnimationStateData(this._skeleton.data)),this.defaultSkin&&this.setSkin(this.defaultSkin)}catch(C$t){cc.warn(C$t)}this.attachUtil.init(this),this.attachUtil._associateAttachedNode(),this._preCacheMode=this._cacheMode,this.animation=this.defaultAnimation}else this.disableRender()}else this.disableRender()},_refreshInspector:function(){this._updateAnimEnum(),this._updateSkinEnum(),Editor.Utils.refreshSelectedInspector("node",this.node.uuid)},_updateDebugDraw:function(){var C$t;this.debugBones||this.debugSlots?(this._debugRenderer||((C$t=new cc.PrivateNode).name="DEBUG_DRAW_NODE",(C$t=C$t.addComponent(C$s)).lineWidth=1,C$t.strokeColor=cc.color(255,0,0,255),this._debugRenderer=C$t),this._debugRenderer.node.parent=this.node,this.isAnimationCached()&&cc.warn("Debug bones or slots is invalid in cached mode")):this._debugRenderer&&(this._debugRenderer.node.parent=null)}}),C$e.exports=sp.Skeleton},{"../../cocos2d/core/components/CCRenderComponent":89,"../../cocos2d/core/graphics/graphics":131,"../../cocos2d/core/renderer/render-flow":221,"./AttachUtil":352,"./lib/spine":355,"./skeleton-cache":356,"./track-entry-listeners":360}],354:[function(C$t,C$e,C$i){"use strict";var C$n="undefined"==typeof window?global:window;C$n.spine=C$t("./lib/spine"),C$n.sp={},sp._timeScale=1,Object.defineProperty(sp,"timeScale",{get:function(){return this._timeScale},set:function(C$t){this._timeScale=C$t},configurable:!0}),sp.ATTACHMENT_TYPE={REGION:0,BOUNDING_BOX:1,MESH:2,SKINNED_MESH:3},sp.AnimationEventType=cc.Enum({START:0,INTERRUPT:1,END:2,DISPOSE:3,COMPLETE:4,EVENT:5}),sp.spine=C$n.spine,C$t("./skeleton-texture"),C$t("./skeleton-data"),C$t("./vertex-effect-delegate"),C$t("./Skeleton"),C$t("./spine-assembler")},{"./Skeleton":353,"./lib/spine":355,"./skeleton-data":357,"./skeleton-texture":358,"./spine-assembler":359,"./vertex-effect-delegate":361}],355:[function(C$s,C$o,C$a){"use strict";C$c=function(C$t,C$e){return(C$c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$t,C$e){C$t.__proto__=C$e}||function(C$t,C$e){for(var C$i in C$e)C$e.hasOwnProperty(C$i)&&(C$t[C$i]=C$e[C$i])})(C$t,C$e)};var C$c,C$l,C$h,C$d,C$f,C$p,C$m,C$y,C$g,C$v,C$x,C$b,C$A,C$C,C$S,C$T,C$u,C$w,C$E,C$M,C$I,C$B,C$R,C$P,C$t,C$D,C$V=function(C$t,C$e){function C$i(){this.constructor=C$t}C$c(C$t,C$e),C$t.prototype=null===C$e?Object.create(C$e):(C$i.prototype=C$e.prototype,new C$i)};function C$L(C$t){C$t=C$d.call(this,C$t,0,!1)||this;return C$t.bones=new Array,C$t.bendDirection=1,C$t.compress=!1,C$t.stretch=!1,C$t.uniform=!1,C$t.mix=1,C$t.softness=0,C$t}function C$O(C$t){C$t=C$f.call(this,C$t,0,!1)||this;return C$t.bones=new Array,C$t}!function(C$N){C$i.prototype.hasTimeline=function(C$t){return 1==this.timelineIds[C$t]},C$i.prototype.apply=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){if(null==C$t)throw new Error("skeleton cannot be null.");C$n&&0!=this.duration&&(C$i%=this.duration,0<C$e&&(C$e%=this.duration));for(var C$c=this.timelines,C$l=0,C$h=C$c.length;C$l<C$h;C$l++)C$c[C$l].apply(C$t,C$e,C$i,C$r,C$s,C$o,C$a)},C$i.binarySearch=function(C$t,C$e,C$i){var C$n=0,C$r=C$t.length/(C$i=void 0===C$i?1:C$i)-2;if(0==C$r)return C$i;for(var C$s=C$r>>>1;;){if(C$t[(C$s+1)*C$i]<=C$e?C$n=C$s+1:C$r=C$s,C$n==C$r)return(C$n+1)*C$i;C$s=C$n+C$r>>>1}},C$i.linearSearch=function(C$t,C$e,C$i){for(var C$n=0,C$r=C$t.length-C$i;C$n<=C$r;C$n+=C$i)if(C$t[C$n]>C$e)return C$n;return-1};var C$k,C$y,C$e,C$G=C$i;function C$i(C$t,C$e,C$i){if(null==C$t)throw new Error("name cannot be null.");if(null==C$e)throw new Error("timelines cannot be null.");this.name=C$t,this.timelines=C$e,this.timelineIds=[];for(var C$n=0;C$n<C$e.length;C$n++)this.timelineIds[C$e[C$n].getPropertyId()]=!0;this.duration=C$i}C$N.Animation=C$G,(C$t=C$k=C$N.MixBlend||(C$N.MixBlend={}))[C$t.setup=0]="setup",C$t[C$t.first=1]="first",C$t[C$t.replace=2]="replace",C$t[C$t.add=3]="add",(C$t=C$y=C$N.MixDirection||(C$N.MixDirection={}))[C$t.mixIn=0]="mixIn",C$t[C$t.mixOut=1]="mixOut",(C$t=C$e=C$N.TimelineType||(C$N.TimelineType={}))[C$t.rotate=0]="rotate",C$t[C$t.translate=1]="translate",C$t[C$t.scale=2]="scale",C$t[C$t.shear=3]="shear",C$t[C$t.attachment=4]="attachment",C$t[C$t.color=5]="color",C$t[C$t.deform=6]="deform",C$t[C$t.event=7]="event",C$t[C$t.drawOrder=8]="drawOrder",C$t[C$t.ikConstraint=9]="ikConstraint",C$t[C$t.transformConstraint=10]="transformConstraint",C$t[C$t.pathConstraintPosition=11]="pathConstraintPosition",C$t[C$t.pathConstraintSpacing=12]="pathConstraintSpacing",C$t[C$t.pathConstraintMix=13]="pathConstraintMix",C$t[C$t.twoColor=14]="twoColor";C$g.prototype.getFrameCount=function(){return this.curves.length/C$g.BEZIER_SIZE+1},C$g.prototype.setLinear=function(C$t){this.curves[C$t*C$g.BEZIER_SIZE]=C$g.LINEAR},C$g.prototype.setStepped=function(C$t){this.curves[C$t*C$g.BEZIER_SIZE]=C$g.STEPPED},C$g.prototype.getCurveType=function(C$t){C$t*=C$g.BEZIER_SIZE;if(C$t==this.curves.length)return C$g.LINEAR;C$t=this.curves[C$t];return C$t==C$g.LINEAR?C$g.LINEAR:C$t==C$g.STEPPED?C$g.STEPPED:C$g.BEZIER},C$g.prototype.setCurve=function(C$h,C$t,C$e,C$i,C$n){for(var C$u=.03*(2*-C$t+C$i),C$_=.03*(2*-C$e+C$n),C$r=.006*(3*(C$t-C$i)+1),C$s=.006*(3*(C$e-C$n)+1),C$d=2*C$u+C$r,C$f=2*C$_+C$s,C$o=.3*C$t+C$u+.16666667*C$r,C$a=.3*C$e+C$_+.16666667*C$s,C$c=C$h*C$g.BEZIER_SIZE,C$l=this.curves,C$p=(C$l[C$c++]=C$g.BEZIER,C$o),C$m=C$a,C$y=C$c+C$g.BEZIER_SIZE-1;C$c<C$y;C$c+=2)C$l[C$c]=C$p,C$l[C$c+1]=C$m,C$o+=C$d,C$a+=C$f,C$d+=C$r,C$f+=C$s,C$p+=C$o,C$m+=C$a},C$g.prototype.getCurvePercent=function(C$t,C$e){C$e=C$N.MathUtils.clamp(C$e,0,1);var C$i=this.curves,C$n=C$t*C$g.BEZIER_SIZE,C$t=C$i[C$n];if(C$t==C$g.LINEAR)return C$e;if(C$t==C$g.STEPPED)return 0;for(var C$r,C$s,C$o=0,C$a=++C$n,C$c=C$n+C$g.BEZIER_SIZE-1;C$n<C$c;C$n+=2)if(C$e<=(C$o=C$i[C$n]))return C$s=C$r=void 0,(C$s=C$n==C$a?C$r=0:(C$r=C$i[C$n-2],C$i[C$n-1]))+(C$i[C$n+1]-C$s)*(C$e-C$r)/(C$o-C$r);C$t=C$i[C$n-1];return C$t+(1-C$t)*(C$e-C$o)/(1-C$o)},C$g.LINEAR=0,C$g.STEPPED=1,C$g.BEZIER=2,C$g.BEZIER_SIZE=19;var C$t=C$g;function C$g(C$t){if(C$t<=0)throw new Error("frameCount must be > 0: "+C$t);this.curves=C$N.Utils.newFloatArray((C$t-1)*C$g.BEZIER_SIZE)}C$N.CurveTimeline=C$t;C$V(C$v,C$n=C$t),C$v.prototype.getPropertyId=function(){return(C$e.rotate<<24)+this.boneIndex},C$v.prototype.setFrame=function(C$t,C$e,C$i){this.frames[C$t<<=1]=C$e,this.frames[C$t+C$v.ROTATION]=C$i},C$v.prototype.apply=function(C$t,C$h,C$e,C$u,C$i,C$n,C$_){var C$r=this.frames,C$s=C$t.bones[this.boneIndex];if(C$s.active)if(C$e<C$r[0])switch(C$n){case C$k.setup:return void(C$s.rotation=C$s.data.rotation);case C$k.first:var C$o=C$s.data.rotation-C$s.rotation;C$s.rotation+=(C$o-360*(16384-(16384.499999999996-C$o/360|0)))*C$i}else if(C$e>=C$r[C$r.length-C$v.ENTRIES]){var C$a=C$r[C$r.length+C$v.PREV_ROTATION];switch(C$n){case C$k.setup:C$s.rotation=C$s.data.rotation+C$a*C$i;break;case C$k.first:case C$k.replace:C$a=(C$a+=C$s.data.rotation-C$s.rotation)-360*(16384-(16384.499999999996-C$a/360|0));case C$k.add:C$s.rotation+=C$a*C$i}}else{var C$t=C$G.binarySearch(C$r,C$e,C$v.ENTRIES),C$c=C$r[C$t+C$v.PREV_ROTATION],C$d=C$r[C$t],C$e=this.getCurvePercent((C$t>>1)-1,1-(C$e-C$d)/(C$r[C$t+C$v.PREV_TIME]-C$d)),C$l=C$c+((C$l=C$r[C$t+C$v.ROTATION]-C$c)-360*(16384-(16384.499999999996-C$l/360|0)))*C$e;switch(C$n){case C$k.setup:C$s.rotation=C$s.data.rotation+(C$l-360*(16384-(16384.499999999996-C$l/360|0)))*C$i;break;case C$k.first:case C$k.replace:C$l+=C$s.data.rotation-C$s.rotation;case C$k.add:C$s.rotation+=(C$l-360*(16384-(16384.499999999996-C$l/360|0)))*C$i}}},C$v.ENTRIES=2,C$v.PREV_TIME=-2,C$v.PREV_ROTATION=-1,C$v.ROTATION=1;var C$n,C$r=C$v;function C$v(C$t){var C$e=C$n.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t<<1),C$e}C$N.RotateTimeline=C$r;C$V(C$_,C$s=C$t),C$_.prototype.getPropertyId=function(){return(C$e.translate<<24)+this.boneIndex},C$_.prototype.setFrame=function(C$t,C$e,C$i,C$n){this.frames[C$t*=C$_.ENTRIES]=C$e,this.frames[C$t+C$_.X]=C$i,this.frames[C$t+C$_.Y]=C$n},C$_.prototype.apply=function(C$t,C$l,C$e,C$h,C$i,C$n,C$u){var C$r=this.frames,C$s=C$t.bones[this.boneIndex];if(C$s.active)if(C$e<C$r[0])switch(C$n){case C$k.setup:return C$s.x=C$s.data.x,void(C$s.y=C$s.data.y);case C$k.first:C$s.x+=(C$s.data.x-C$s.x)*C$i,C$s.y+=(C$s.data.y-C$s.y)*C$i}else{var C$o,C$a=0,C$c=0;switch(C$e>=C$r[C$r.length-C$_.ENTRIES]?(C$a=C$r[C$r.length+C$_.PREV_X],C$c=C$r[C$r.length+C$_.PREV_Y]):(C$a=C$r[(C$t=C$G.binarySearch(C$r,C$e,C$_.ENTRIES))+C$_.PREV_X],C$c=C$r[C$t+C$_.PREV_Y],C$o=C$r[C$t],C$e=this.getCurvePercent(C$t/C$_.ENTRIES-1,1-(C$e-C$o)/(C$r[C$t+C$_.PREV_TIME]-C$o)),C$a+=(C$r[C$t+C$_.X]-C$a)*C$e,C$c+=(C$r[C$t+C$_.Y]-C$c)*C$e),C$n){case C$k.setup:C$s.x=C$s.data.x+C$a*C$i,C$s.y=C$s.data.y+C$c*C$i;break;case C$k.first:case C$k.replace:C$s.x+=(C$s.data.x+C$a-C$s.x)*C$i,C$s.y+=(C$s.data.y+C$c-C$s.y)*C$i;break;case C$k.add:C$s.x+=C$a*C$i,C$s.y+=C$c*C$i}}},C$_.ENTRIES=3,C$_.PREV_TIME=-3,C$_.PREV_X=-2,C$_.PREV_Y=-1,C$_.X=1,C$_.Y=2;var C$s,C$r=C$_;function C$_(C$t){var C$e=C$s.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t*C$_.ENTRIES),C$e}C$N.TranslateTimeline=C$r;C$V(C$x,C$o=C$r),C$x.prototype.getPropertyId=function(){return(C$e.scale<<24)+this.boneIndex},C$x.prototype.apply=function(C$t,C$h,C$e,C$u,C$i,C$n,C$_){var C$r=this.frames,C$s=C$t.bones[this.boneIndex];if(C$s.active)if(C$e<C$r[0])switch(C$n){case C$k.setup:return C$s.scaleX=C$s.data.scaleX,void(C$s.scaleY=C$s.data.scaleY);case C$k.first:C$s.scaleX+=(C$s.data.scaleX-C$s.scaleX)*C$i,C$s.scaleY+=(C$s.data.scaleY-C$s.scaleY)*C$i}else{var C$d,C$o=0,C$a=0;if(C$a=C$e>=C$r[C$r.length-C$x.ENTRIES]?(C$o=C$r[C$r.length+C$x.PREV_X]*C$s.data.scaleX,C$r[C$r.length+C$x.PREV_Y]*C$s.data.scaleY):(C$o=C$r[(C$t=C$G.binarySearch(C$r,C$e,C$x.ENTRIES))+C$x.PREV_X],C$a=C$r[C$t+C$x.PREV_Y],C$d=C$r[C$t],C$e=this.getCurvePercent(C$t/C$x.ENTRIES-1,1-(C$e-C$d)/(C$r[C$t+C$x.PREV_TIME]-C$d)),C$o=(C$o+(C$r[C$t+C$x.X]-C$o)*C$e)*C$s.data.scaleX,(C$a+(C$r[C$t+C$x.Y]-C$a)*C$e)*C$s.data.scaleY),1==C$i)C$n==C$k.add?(C$s.scaleX+=C$o-C$s.data.scaleX,C$s.scaleY+=C$a-C$s.data.scaleY):(C$s.scaleX=C$o,C$s.scaleY=C$a);else{var C$c=0,C$l=0;if(C$_==C$y.mixOut)switch(C$n){case C$k.setup:C$c=C$s.data.scaleX,C$l=C$s.data.scaleY,C$s.scaleX=C$c+(Math.abs(C$o)*C$N.MathUtils.signum(C$c)-C$c)*C$i,C$s.scaleY=C$l+(Math.abs(C$a)*C$N.MathUtils.signum(C$l)-C$l)*C$i;break;case C$k.first:case C$k.replace:C$c=C$s.scaleX,C$l=C$s.scaleY,C$s.scaleX=C$c+(Math.abs(C$o)*C$N.MathUtils.signum(C$c)-C$c)*C$i,C$s.scaleY=C$l+(Math.abs(C$a)*C$N.MathUtils.signum(C$l)-C$l)*C$i;break;case C$k.add:C$c=C$s.scaleX,C$l=C$s.scaleY,C$s.scaleX=C$c+(Math.abs(C$o)*C$N.MathUtils.signum(C$c)-C$s.data.scaleX)*C$i,C$s.scaleY=C$l+(Math.abs(C$a)*C$N.MathUtils.signum(C$l)-C$s.data.scaleY)*C$i}else switch(C$n){case C$k.setup:C$c=Math.abs(C$s.data.scaleX)*C$N.MathUtils.signum(C$o),C$l=Math.abs(C$s.data.scaleY)*C$N.MathUtils.signum(C$a),C$s.scaleX=C$c+(C$o-C$c)*C$i,C$s.scaleY=C$l+(C$a-C$l)*C$i;break;case C$k.first:case C$k.replace:C$c=Math.abs(C$s.scaleX)*C$N.MathUtils.signum(C$o),C$l=Math.abs(C$s.scaleY)*C$N.MathUtils.signum(C$a),C$s.scaleX=C$c+(C$o-C$c)*C$i,C$s.scaleY=C$l+(C$a-C$l)*C$i;break;case C$k.add:C$c=C$N.MathUtils.signum(C$o),C$l=C$N.MathUtils.signum(C$a),C$s.scaleX=Math.abs(C$s.scaleX)*C$c+(C$o-Math.abs(C$s.data.scaleX)*C$c)*C$i,C$s.scaleY=Math.abs(C$s.scaleY)*C$l+(C$a-Math.abs(C$s.data.scaleY)*C$l)*C$i}}}};var C$o,C$a=C$x;function C$x(C$t){return C$o.call(this,C$t)||this}C$N.ScaleTimeline=C$a;C$V(C$A,C$c=C$r),C$A.prototype.getPropertyId=function(){return(C$e.shear<<24)+this.boneIndex},C$A.prototype.apply=function(C$t,C$l,C$e,C$h,C$i,C$n,C$u){var C$r=this.frames,C$s=C$t.bones[this.boneIndex];if(C$s.active)if(C$e<C$r[0])switch(C$n){case C$k.setup:return C$s.shearX=C$s.data.shearX,void(C$s.shearY=C$s.data.shearY);case C$k.first:C$s.shearX+=(C$s.data.shearX-C$s.shearX)*C$i,C$s.shearY+=(C$s.data.shearY-C$s.shearY)*C$i}else{var C$o,C$a=0,C$c=0;switch(C$e>=C$r[C$r.length-C$A.ENTRIES]?(C$a=C$r[C$r.length+C$A.PREV_X],C$c=C$r[C$r.length+C$A.PREV_Y]):(C$a=C$r[(C$t=C$G.binarySearch(C$r,C$e,C$A.ENTRIES))+C$A.PREV_X],C$c=C$r[C$t+C$A.PREV_Y],C$o=C$r[C$t],C$e=this.getCurvePercent(C$t/C$A.ENTRIES-1,1-(C$e-C$o)/(C$r[C$t+C$A.PREV_TIME]-C$o)),C$a+=(C$r[C$t+C$A.X]-C$a)*C$e,C$c+=(C$r[C$t+C$A.Y]-C$c)*C$e),C$n){case C$k.setup:C$s.shearX=C$s.data.shearX+C$a*C$i,C$s.shearY=C$s.data.shearY+C$c*C$i;break;case C$k.first:case C$k.replace:C$s.shearX+=(C$s.data.shearX+C$a-C$s.shearX)*C$i,C$s.shearY+=(C$s.data.shearY+C$c-C$s.shearY)*C$i;break;case C$k.add:C$s.shearX+=C$a*C$i,C$s.shearY+=C$c*C$i}}};var C$c,C$a=C$A;function C$A(C$t){return C$c.call(this,C$t)||this}C$N.ShearTimeline=C$a;C$V(C$m,C$l=C$t),C$m.prototype.getPropertyId=function(){return(C$e.color<<24)+this.slotIndex},C$m.prototype.setFrame=function(C$t,C$e,C$i,C$n,C$r,C$s){this.frames[C$t*=C$m.ENTRIES]=C$e,this.frames[C$t+C$m.R]=C$i,this.frames[C$t+C$m.G]=C$n,this.frames[C$t+C$m.B]=C$r,this.frames[C$t+C$m.A]=C$s},C$m.prototype.apply=function(C$t,C$h,C$e,C$u,C$i,C$_,C$d){var C$n=C$t.slots[this.slotIndex];if(C$n.bone.active){C$t=this.frames;if(C$e<C$t[0])switch(C$_){case C$k.setup:return void C$n.color.setFromColor(C$n.data.color);case C$k.first:var C$r=C$n.color,C$f=C$n.data.color;C$r.add((C$f.r-C$r.r)*C$i,(C$f.g-C$r.g)*C$i,(C$f.b-C$r.b)*C$i,(C$f.a-C$r.a)*C$i)}else{var C$s,C$p,C$o=0,C$a=0,C$c=0,C$l=0;C$e>=C$t[C$t.length-C$m.ENTRIES]?(C$o=C$t[(C$s=C$t.length)+C$m.PREV_R],C$a=C$t[C$s+C$m.PREV_G],C$c=C$t[C$s+C$m.PREV_B],C$l=C$t[C$s+C$m.PREV_A]):(C$o=C$t[(C$s=C$G.binarySearch(C$t,C$e,C$m.ENTRIES))+C$m.PREV_R],C$a=C$t[C$s+C$m.PREV_G],C$c=C$t[C$s+C$m.PREV_B],C$l=C$t[C$s+C$m.PREV_A],C$p=C$t[C$s],C$e=this.getCurvePercent(C$s/C$m.ENTRIES-1,1-(C$e-C$p)/(C$t[C$s+C$m.PREV_TIME]-C$p)),C$o+=(C$t[C$s+C$m.R]-C$o)*C$e,C$a+=(C$t[C$s+C$m.G]-C$a)*C$e,C$c+=(C$t[C$s+C$m.B]-C$c)*C$e,C$l+=(C$t[C$s+C$m.A]-C$l)*C$e),1==C$i?C$n.color.set(C$o,C$a,C$c,C$l):(C$r=C$n.color,C$_==C$k.setup&&C$r.setFromColor(C$n.data.color),C$r.add((C$o-C$r.r)*C$i,(C$a-C$r.g)*C$i,(C$c-C$r.b)*C$i,(C$l-C$r.a)*C$i))}}},C$m.ENTRIES=5,C$m.PREV_TIME=-5,C$m.PREV_R=-4,C$m.PREV_G=-3,C$m.PREV_B=-2,C$m.PREV_A=-1,C$m.R=1,C$m.G=2,C$m.B=3,C$m.A=4;var C$l,C$r=C$m;function C$m(C$t){var C$e=C$l.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t*C$m.ENTRIES),C$e}C$N.ColorTimeline=C$r;C$V(C$b,C$h=C$t),C$b.prototype.getPropertyId=function(){return(C$e.twoColor<<24)+this.slotIndex},C$b.prototype.setFrame=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c){this.frames[C$t*=C$b.ENTRIES]=C$e,this.frames[C$t+C$b.R]=C$i,this.frames[C$t+C$b.G]=C$n,this.frames[C$t+C$b.B]=C$r,this.frames[C$t+C$b.A]=C$s,this.frames[C$t+C$b.R2]=C$o,this.frames[C$t+C$b.G2]=C$a,this.frames[C$t+C$b.B2]=C$c},C$b.prototype.apply=function(C$t,C$h,C$e,C$u,C$i,C$_,C$d){var C$n=C$t.slots[this.slotIndex];if(C$n.bone.active){C$t=this.frames;if(C$e<C$t[0])switch(C$_){case C$k.setup:return C$n.color.setFromColor(C$n.data.color),void C$n.darkColor.setFromColor(C$n.data.darkColor);case C$k.first:var C$r=C$n.color,C$s=C$n.darkColor,C$f=C$n.data.color,C$p=C$n.data.darkColor;C$r.add((C$f.r-C$r.r)*C$i,(C$f.g-C$r.g)*C$i,(C$f.b-C$r.b)*C$i,(C$f.a-C$r.a)*C$i),C$s.add((C$p.r-C$s.r)*C$i,(C$p.g-C$s.g)*C$i,(C$p.b-C$s.b)*C$i,0)}else{var C$o,C$m,C$a=0,C$c=0,C$l=0,C$y=0,C$g=0,C$v=0,C$x=0;C$e>=C$t[C$t.length-C$b.ENTRIES]?(C$a=C$t[(C$o=C$t.length)+C$b.PREV_R],C$c=C$t[C$o+C$b.PREV_G],C$l=C$t[C$o+C$b.PREV_B],C$y=C$t[C$o+C$b.PREV_A],C$g=C$t[C$o+C$b.PREV_R2],C$v=C$t[C$o+C$b.PREV_G2],C$x=C$t[C$o+C$b.PREV_B2]):(C$a=C$t[(C$o=C$G.binarySearch(C$t,C$e,C$b.ENTRIES))+C$b.PREV_R],C$c=C$t[C$o+C$b.PREV_G],C$l=C$t[C$o+C$b.PREV_B],C$y=C$t[C$o+C$b.PREV_A],C$g=C$t[C$o+C$b.PREV_R2],C$v=C$t[C$o+C$b.PREV_G2],C$x=C$t[C$o+C$b.PREV_B2],C$m=C$t[C$o],C$e=this.getCurvePercent(C$o/C$b.ENTRIES-1,1-(C$e-C$m)/(C$t[C$o+C$b.PREV_TIME]-C$m)),C$a+=(C$t[C$o+C$b.R]-C$a)*C$e,C$c+=(C$t[C$o+C$b.G]-C$c)*C$e,C$l+=(C$t[C$o+C$b.B]-C$l)*C$e,C$y+=(C$t[C$o+C$b.A]-C$y)*C$e,C$g+=(C$t[C$o+C$b.R2]-C$g)*C$e,C$v+=(C$t[C$o+C$b.G2]-C$v)*C$e,C$x+=(C$t[C$o+C$b.B2]-C$x)*C$e),1==C$i?(C$n.color.set(C$a,C$c,C$l,C$y),C$n.darkColor.set(C$g,C$v,C$x,1)):(C$r=C$n.color,C$s=C$n.darkColor,C$_==C$k.setup&&(C$r.setFromColor(C$n.data.color),C$s.setFromColor(C$n.data.darkColor)),C$r.add((C$a-C$r.r)*C$i,(C$c-C$r.g)*C$i,(C$l-C$r.b)*C$i,(C$y-C$r.a)*C$i),C$s.add((C$g-C$s.r)*C$i,(C$v-C$s.g)*C$i,(C$x-C$s.b)*C$i,0))}}},C$b.ENTRIES=8,C$b.PREV_TIME=-8,C$b.PREV_R=-7,C$b.PREV_G=-6,C$b.PREV_B=-5,C$b.PREV_A=-4,C$b.PREV_R2=-3,C$b.PREV_G2=-2,C$b.PREV_B2=-1,C$b.R=1,C$b.G=2,C$b.B=3,C$b.A=4,C$b.R2=5,C$b.G2=6,C$b.B2=7;var C$h,C$a=C$b;function C$b(C$t){var C$e=C$h.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t*C$b.ENTRIES),C$e}function C$u(C$t){this.frames=C$N.Utils.newFloatArray(C$t),this.attachmentNames=new Array(C$t)}C$N.TwoColorTimeline=C$a,C$u.prototype.getPropertyId=function(){return(C$e.attachment<<24)+this.slotIndex},C$u.prototype.getFrameCount=function(){return this.frames.length},C$u.prototype.setFrame=function(C$t,C$e,C$i){this.frames[C$t]=C$e,this.attachmentNames[C$t]=C$i},C$u.prototype.apply=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){var C$a=C$t.slots[this.slotIndex];if(C$a.bone.active){if(C$o==C$y.mixOut&&C$s==C$k.setup)return C$o=C$a.data.attachmentName,void C$a.setAttachment(null==C$o?null:C$t.getAttachment(this.slotIndex,C$o));C$o=this.frames;C$i<C$o[0]?C$s!=C$k.setup&&C$s!=C$k.first||(C$s=C$a.data.attachmentName,C$a.setAttachment(null==C$s?null:C$t.getAttachment(this.slotIndex,C$s))):(C$a=0,C$a=C$i>=C$o[C$o.length-1]?C$o.length-1:C$G.binarySearch(C$o,C$i,1)-1,C$s=this.attachmentNames[C$a],C$t.slots[this.slotIndex].setAttachment(null==C$s?null:C$t.getAttachment(this.slotIndex,C$s)))}},C$N.AttachmentTimeline=C$u;var C$C,C$S=null,C$r=(C$V(C$T,C$C=C$t),C$T.prototype.getPropertyId=function(){return(C$e.deform<<27)+ +this.attachment.id+this.slotIndex},C$T.prototype.setFrame=function(C$t,C$e,C$i){this.frames[C$t]=C$e,this.frameVertices[C$t]=C$i},C$T.prototype.apply=function(C$t,C$h,C$u,C$_,C$e,C$d,C$f){C$t=C$t.slots[this.slotIndex];if(C$t.bone.active){var C$i=C$t.getAttachment();if(C$i instanceof C$N.VertexAttachment&&C$i.deformAttachment==this.attachment){var C$p=C$t.deform,C$t=(0==C$p.length&&(C$d=C$k.setup),this.frameVertices),C$n=C$t[0].length,C$m=this.frames;if(C$u<C$m[0]){var C$r=C$i;switch(C$d){case C$k.setup:return void(C$p.length=0);case C$k.first:if(1==C$e){C$p.length=0;break}var C$y=C$N.Utils.setArraySize(C$p,C$n);if(null==C$r.bones)for(var C$g=C$r.vertices,C$s=0;C$s<C$n;C$s++)C$y[C$s]+=(C$g[C$s]-C$y[C$s])*C$e;else{C$e=1-C$e;for(C$s=0;C$s<C$n;C$s++)C$y[C$s]*=C$e}}}else{var C$o=C$N.Utils.setArraySize(C$p,C$n);if(C$u>=C$m[C$m.length-1]){var C$a=C$t[C$m.length-1];if(1==C$e)if(C$d==C$k.add)if(null==(C$r=C$i).bones)for(var C$g=C$r.vertices,C$v=0;C$v<C$n;C$v++)C$o[C$v]+=C$a[C$v]-C$g[C$v];else for(var C$x=0;C$x<C$n;C$x++)C$o[C$x]+=C$a[C$x];else C$N.Utils.arrayCopy(C$a,0,C$o,0,C$n);else switch(C$d){case C$k.setup:if(null==C$i.bones)for(var C$g=C$i.vertices,C$b=0;C$b<C$n;C$b++){var C$A=C$g[C$b];C$o[C$b]=C$A+(C$a[C$b]-C$A)*C$e}else for(var C$C=0;C$C<C$n;C$C++)C$o[C$C]=C$a[C$C]*C$e;break;case C$k.first:case C$k.replace:for(var C$S=0;C$S<C$n;C$S++)C$o[C$S]+=(C$a[C$S]-C$o[C$S])*C$e;case C$k.add:if(null==(C$r=C$i).bones)for(var C$g=C$r.vertices,C$T=0;C$T<C$n;C$T++)C$o[C$T]+=(C$a[C$T]-C$g[C$T])*C$e;else for(var C$w=0;C$w<C$n;C$w++)C$o[C$w]+=C$a[C$w]*C$e}}else{var C$E=C$G.binarySearch(C$m,C$u),C$c=C$t[C$E-1],C$M=C$t[C$E],C$t=C$m[C$E],C$I=this.getCurvePercent(C$E-1,1-(C$u-C$t)/(C$m[C$E-1]-C$t));if(1==C$e)if(C$d==C$k.add)if(null==(C$r=C$i).bones)for(var C$g=C$r.vertices,C$B=0;C$B<C$n;C$B++){var C$l=C$c[C$B];C$o[C$B]+=C$l+(C$M[C$B]-C$l)*C$I-C$g[C$B]}else for(var C$R=0;C$R<C$n;C$R++){C$l=C$c[C$R];C$o[C$R]+=C$l+(C$M[C$R]-C$l)*C$I}else for(var C$P=0;C$P<C$n;C$P++){C$l=C$c[C$P];C$o[C$P]=C$l+(C$M[C$P]-C$l)*C$I}else switch(C$d){case C$k.setup:if(null==C$i.bones)for(var C$g=C$i.vertices,C$D=0;C$D<C$n;C$D++){C$l=C$c[C$D],C$A=C$g[C$D];C$o[C$D]=C$A+(C$l+(C$M[C$D]-C$l)*C$I-C$A)*C$e}else for(var C$L=0;C$L<C$n;C$L++){C$l=C$c[C$L];C$o[C$L]=(C$l+(C$M[C$L]-C$l)*C$I)*C$e}break;case C$k.first:case C$k.replace:for(var C$V=0;C$V<C$n;C$V++){C$l=C$c[C$V];C$o[C$V]+=(C$l+(C$M[C$V]-C$l)*C$I-C$o[C$V])*C$e}break;case C$k.add:if(null==(C$r=C$i).bones)for(var C$g=C$r.vertices,C$O=0;C$O<C$n;C$O++){C$l=C$c[C$O];C$o[C$O]+=(C$l+(C$M[C$O]-C$l)*C$I-C$g[C$O])*C$e}else for(var C$F=0;C$F<C$n;C$F++){C$l=C$c[C$F];C$o[C$F]+=(C$l+(C$M[C$F]-C$l)*C$I)*C$e}}}}}}},C$T);function C$T(C$t){var C$e=C$C.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t),C$e.frameVertices=new Array(C$t),null==C$S&&(C$S=C$N.Utils.newFloatArray(64)),C$e}function C$w(C$t){this.frames=C$N.Utils.newFloatArray(C$t),this.events=new Array(C$t)}function C$E(C$t){this.frames=C$N.Utils.newFloatArray(C$t),this.drawOrders=new Array(C$t)}C$N.DeformTimeline=C$r,C$w.prototype.getPropertyId=function(){return C$e.event<<24},C$w.prototype.getFrameCount=function(){return this.frames.length},C$w.prototype.setFrame=function(C$t,C$e){this.frames[C$t]=C$e.time,this.events[C$t]=C$e},C$w.prototype.apply=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){if(null!=C$n){var C$a=this.frames,C$c=this.frames.length;if(C$i<C$e)this.apply(C$t,C$e,Number.MAX_VALUE,C$n,C$r,C$s,C$o),C$e=-1;else if(C$e>=C$a[C$c-1])return;if(!(C$i<C$a[0])){var C$l=0;if(C$e<C$a[0])C$l=0;else for(var C$h=C$a[C$l=C$G.binarySearch(C$a,C$e)];0<C$l&&C$a[C$l-1]==C$h;)C$l--;for(;C$l<C$c&&C$i>=C$a[C$l];C$l++)C$n.push(this.events[C$l])}}},C$N.EventTimeline=C$w,C$E.prototype.getPropertyId=function(){return C$e.drawOrder<<24},C$E.prototype.getFrameCount=function(){return this.frames.length},C$E.prototype.setFrame=function(C$t,C$e,C$i){this.frames[C$t]=C$e,this.drawOrders[C$t]=C$i},C$E.prototype.apply=function(C$t,C$l,C$e,C$h,C$u,C$i,C$n){var C$r=C$t.drawOrder,C$s=C$t.slots;if(C$n!=C$y.mixOut||C$i!=C$k.setup){C$n=this.frames;if(C$e<C$n[0])C$i!=C$k.setup&&C$i!=C$k.first||C$N.Utils.arrayCopy(C$t.slots,0,C$t.drawOrder,0,C$t.slots.length);else{var C$i=C$e>=C$n[C$n.length-1]?C$n.length-1:C$G.binarySearch(C$n,C$e)-1,C$o=this.drawOrders[C$i];if(null==C$o)C$N.Utils.arrayCopy(C$s,0,C$r,0,C$s.length);else for(var C$a=0,C$c=C$o.length;C$a<C$c;C$a++)C$r[C$a]=C$s[C$o[C$a]]}}else C$N.Utils.arrayCopy(C$t.slots,0,C$t.drawOrder,0,C$t.slots.length)},C$N.DrawOrderTimeline=C$E;C$V(C$d,C$M=C$t),C$d.prototype.getPropertyId=function(){return(C$e.ikConstraint<<24)+this.ikConstraintIndex},C$d.prototype.setFrame=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){this.frames[C$t*=C$d.ENTRIES]=C$e,this.frames[C$t+C$d.MIX]=C$i,this.frames[C$t+C$d.SOFTNESS]=C$n,this.frames[C$t+C$d.BEND_DIRECTION]=C$r,this.frames[C$t+C$d.COMPRESS]=C$s?1:0,this.frames[C$t+C$d.STRETCH]=C$o?1:0},C$d.prototype.apply=function(C$t,C$h,C$e,C$u,C$i,C$n,C$r){var C$s,C$o,C$a,C$c=this.frames,C$l=C$t.ikConstraints[this.ikConstraintIndex];if(C$l.active)if(C$e<C$c[0])switch(C$n){case C$k.setup:return C$l.mix=C$l.data.mix,C$l.softness=C$l.data.softness,C$l.bendDirection=C$l.data.bendDirection,C$l.compress=C$l.data.compress,void(C$l.stretch=C$l.data.stretch);case C$k.first:C$l.mix+=(C$l.data.mix-C$l.mix)*C$i,C$l.softness+=(C$l.data.softness-C$l.softness)*C$i,C$l.bendDirection=C$l.data.bendDirection,C$l.compress=C$l.data.compress,C$l.stretch=C$l.data.stretch}else C$e>=C$c[C$c.length-C$d.ENTRIES]?C$n==C$k.setup?(C$l.mix=C$l.data.mix+(C$c[C$c.length+C$d.PREV_MIX]-C$l.data.mix)*C$i,C$l.softness=C$l.data.softness+(C$c[C$c.length+C$d.PREV_SOFTNESS]-C$l.data.softness)*C$i,C$r==C$y.mixOut?(C$l.bendDirection=C$l.data.bendDirection,C$l.compress=C$l.data.compress,C$l.stretch=C$l.data.stretch):(C$l.bendDirection=C$c[C$c.length+C$d.PREV_BEND_DIRECTION],C$l.compress=0!=C$c[C$c.length+C$d.PREV_COMPRESS],C$l.stretch=0!=C$c[C$c.length+C$d.PREV_STRETCH])):(C$l.mix+=(C$c[C$c.length+C$d.PREV_MIX]-C$l.mix)*C$i,C$l.softness+=(C$c[C$c.length+C$d.PREV_SOFTNESS]-C$l.softness)*C$i,C$r==C$y.mixIn&&(C$l.bendDirection=C$c[C$c.length+C$d.PREV_BEND_DIRECTION],C$l.compress=0!=C$c[C$c.length+C$d.PREV_COMPRESS],C$l.stretch=0!=C$c[C$c.length+C$d.PREV_STRETCH])):(C$s=C$c[(C$t=C$G.binarySearch(C$c,C$e,C$d.ENTRIES))+C$d.PREV_MIX],C$o=C$c[C$t+C$d.PREV_SOFTNESS],C$a=C$c[C$t],C$e=this.getCurvePercent(C$t/C$d.ENTRIES-1,1-(C$e-C$a)/(C$c[C$t+C$d.PREV_TIME]-C$a)),C$n==C$k.setup?(C$l.mix=C$l.data.mix+(C$s+(C$c[C$t+C$d.MIX]-C$s)*C$e-C$l.data.mix)*C$i,C$l.softness=C$l.data.softness+(C$o+(C$c[C$t+C$d.SOFTNESS]-C$o)*C$e-C$l.data.softness)*C$i,C$r==C$y.mixOut?(C$l.bendDirection=C$l.data.bendDirection,C$l.compress=C$l.data.compress,C$l.stretch=C$l.data.stretch):(C$l.bendDirection=C$c[C$t+C$d.PREV_BEND_DIRECTION],C$l.compress=0!=C$c[C$t+C$d.PREV_COMPRESS],C$l.stretch=0!=C$c[C$t+C$d.PREV_STRETCH])):(C$l.mix+=(C$s+(C$c[C$t+C$d.MIX]-C$s)*C$e-C$l.mix)*C$i,C$l.softness+=(C$o+(C$c[C$t+C$d.SOFTNESS]-C$o)*C$e-C$l.softness)*C$i,C$r==C$y.mixIn&&(C$l.bendDirection=C$c[C$t+C$d.PREV_BEND_DIRECTION],C$l.compress=0!=C$c[C$t+C$d.PREV_COMPRESS],C$l.stretch=0!=C$c[C$t+C$d.PREV_STRETCH])))},C$d.ENTRIES=6,C$d.PREV_TIME=-6,C$d.PREV_MIX=-5,C$d.PREV_SOFTNESS=-4,C$d.PREV_BEND_DIRECTION=-3,C$d.PREV_COMPRESS=-2,C$d.PREV_STRETCH=-1,C$d.MIX=1,C$d.SOFTNESS=2,C$d.BEND_DIRECTION=3,C$d.COMPRESS=4,C$d.STRETCH=5;var C$M,C$a=C$d;function C$d(C$t){var C$e=C$M.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t*C$d.ENTRIES),C$e}C$N.IkConstraintTimeline=C$a;C$V(C$p,C$I=C$t),C$p.prototype.getPropertyId=function(){return(C$e.transformConstraint<<24)+this.transformConstraintIndex},C$p.prototype.setFrame=function(C$t,C$e,C$i,C$n,C$r,C$s){this.frames[C$t*=C$p.ENTRIES]=C$e,this.frames[C$t+C$p.ROTATE]=C$i,this.frames[C$t+C$p.TRANSLATE]=C$n,this.frames[C$t+C$p.SCALE]=C$r,this.frames[C$t+C$p.SHEAR]=C$s},C$p.prototype.apply=function(C$t,C$h,C$e,C$u,C$i,C$_,C$d){var C$n=this.frames,C$r=C$t.transformConstraints[this.transformConstraintIndex];if(C$r.active)if(C$e<C$n[0]){var C$s=C$r.data;switch(C$_){case C$k.setup:return C$r.rotateMix=C$s.rotateMix,C$r.translateMix=C$s.translateMix,C$r.scaleMix=C$s.scaleMix,void(C$r.shearMix=C$s.shearMix);case C$k.first:C$r.rotateMix+=(C$s.rotateMix-C$r.rotateMix)*C$i,C$r.translateMix+=(C$s.translateMix-C$r.translateMix)*C$i,C$r.scaleMix+=(C$s.scaleMix-C$r.scaleMix)*C$i,C$r.shearMix+=(C$s.shearMix-C$r.shearMix)*C$i}}else{var C$o,C$f,C$t=0,C$a=0,C$c=0,C$l=0;C$e>=C$n[C$n.length-C$p.ENTRIES]?(C$t=C$n[(C$o=C$n.length)+C$p.PREV_ROTATE],C$a=C$n[C$o+C$p.PREV_TRANSLATE],C$c=C$n[C$o+C$p.PREV_SCALE],C$l=C$n[C$o+C$p.PREV_SHEAR]):(C$t=C$n[(C$o=C$G.binarySearch(C$n,C$e,C$p.ENTRIES))+C$p.PREV_ROTATE],C$a=C$n[C$o+C$p.PREV_TRANSLATE],C$c=C$n[C$o+C$p.PREV_SCALE],C$l=C$n[C$o+C$p.PREV_SHEAR],C$f=C$n[C$o],C$e=this.getCurvePercent(C$o/C$p.ENTRIES-1,1-(C$e-C$f)/(C$n[C$o+C$p.PREV_TIME]-C$f)),C$t+=(C$n[C$o+C$p.ROTATE]-C$t)*C$e,C$a+=(C$n[C$o+C$p.TRANSLATE]-C$a)*C$e,C$c+=(C$n[C$o+C$p.SCALE]-C$c)*C$e,C$l+=(C$n[C$o+C$p.SHEAR]-C$l)*C$e),C$_==C$k.setup?(C$s=C$r.data,C$r.rotateMix=C$s.rotateMix+(C$t-C$s.rotateMix)*C$i,C$r.translateMix=C$s.translateMix+(C$a-C$s.translateMix)*C$i,C$r.scaleMix=C$s.scaleMix+(C$c-C$s.scaleMix)*C$i,C$r.shearMix=C$s.shearMix+(C$l-C$s.shearMix)*C$i):(C$r.rotateMix+=(C$t-C$r.rotateMix)*C$i,C$r.translateMix+=(C$a-C$r.translateMix)*C$i,C$r.scaleMix+=(C$c-C$r.scaleMix)*C$i,C$r.shearMix+=(C$l-C$r.shearMix)*C$i)}},C$p.ENTRIES=5,C$p.PREV_TIME=-5,C$p.PREV_ROTATE=-4,C$p.PREV_TRANSLATE=-3,C$p.PREV_SCALE=-2,C$p.PREV_SHEAR=-1,C$p.ROTATE=1,C$p.TRANSLATE=2,C$p.SCALE=3,C$p.SHEAR=4;var C$I,C$r=C$p;function C$p(C$t){var C$e=C$I.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t*C$p.ENTRIES),C$e}C$N.TransformConstraintTimeline=C$r;C$V(C$R,C$B=C$t),C$R.prototype.getPropertyId=function(){return(C$e.pathConstraintPosition<<24)+this.pathConstraintIndex},C$R.prototype.setFrame=function(C$t,C$e,C$i){this.frames[C$t*=C$R.ENTRIES]=C$e,this.frames[C$t+C$R.VALUE]=C$i},C$R.prototype.apply=function(C$t,C$e,C$i,C$l,C$n,C$r,C$h){var C$s=this.frames,C$o=C$t.pathConstraints[this.pathConstraintIndex];if(C$o.active)if(C$i<C$s[0])switch(C$r){case C$k.setup:return void(C$o.position=C$o.data.position);case C$k.first:C$o.position+=(C$o.data.position-C$o.position)*C$n}else{var C$a,C$c,C$t=0;C$i>=C$s[C$s.length-C$R.ENTRIES]?C$t=C$s[C$s.length+C$R.PREV_VALUE]:(C$t=C$s[(C$a=C$G.binarySearch(C$s,C$i,C$R.ENTRIES))+C$R.PREV_VALUE],C$c=C$s[C$a],C$i=this.getCurvePercent(C$a/C$R.ENTRIES-1,1-(C$i-C$c)/(C$s[C$a+C$R.PREV_TIME]-C$c)),C$t+=(C$s[C$a+C$R.VALUE]-C$t)*C$i),C$r==C$k.setup?C$o.position=C$o.data.position+(C$t-C$o.data.position)*C$n:C$o.position+=(C$t-C$o.position)*C$n}},C$R.ENTRIES=2,C$R.PREV_TIME=-2,C$R.PREV_VALUE=-1,C$R.VALUE=1;var C$B,C$a=C$R;function C$R(C$t){var C$e=C$B.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t*C$R.ENTRIES),C$e}C$N.PathConstraintPositionTimeline=C$a;C$V(C$D,C$P=C$a),C$D.prototype.getPropertyId=function(){return(C$e.pathConstraintSpacing<<24)+this.pathConstraintIndex},C$D.prototype.apply=function(C$t,C$e,C$i,C$l,C$n,C$r,C$h){var C$s=this.frames,C$o=C$t.pathConstraints[this.pathConstraintIndex];if(C$o.active)if(C$i<C$s[0])switch(C$r){case C$k.setup:return void(C$o.spacing=C$o.data.spacing);case C$k.first:C$o.spacing+=(C$o.data.spacing-C$o.spacing)*C$n}else{var C$a,C$c,C$t=0;C$i>=C$s[C$s.length-C$D.ENTRIES]?C$t=C$s[C$s.length+C$D.PREV_VALUE]:(C$t=C$s[(C$a=C$G.binarySearch(C$s,C$i,C$D.ENTRIES))+C$D.PREV_VALUE],C$c=C$s[C$a],C$i=this.getCurvePercent(C$a/C$D.ENTRIES-1,1-(C$i-C$c)/(C$s[C$a+C$D.PREV_TIME]-C$c)),C$t+=(C$s[C$a+C$D.VALUE]-C$t)*C$i),C$r==C$k.setup?C$o.spacing=C$o.data.spacing+(C$t-C$o.data.spacing)*C$n:C$o.spacing+=(C$t-C$o.spacing)*C$n}};var C$P,C$r=C$D;function C$D(C$t){return C$P.call(this,C$t)||this}C$N.PathConstraintSpacingTimeline=C$r;C$V(C$f,C$L=C$t),C$f.prototype.getPropertyId=function(){return(C$e.pathConstraintMix<<24)+this.pathConstraintIndex},C$f.prototype.setFrame=function(C$t,C$e,C$i,C$n){this.frames[C$t*=C$f.ENTRIES]=C$e,this.frames[C$t+C$f.ROTATE]=C$i,this.frames[C$t+C$f.TRANSLATE]=C$n},C$f.prototype.apply=function(C$t,C$l,C$e,C$h,C$i,C$n,C$u){var C$r=this.frames,C$s=C$t.pathConstraints[this.pathConstraintIndex];if(C$s.active)if(C$e<C$r[0])switch(C$n){case C$k.setup:return C$s.rotateMix=C$s.data.rotateMix,void(C$s.translateMix=C$s.data.translateMix);case C$k.first:C$s.rotateMix+=(C$s.data.rotateMix-C$s.rotateMix)*C$i,C$s.translateMix+=(C$s.data.translateMix-C$s.translateMix)*C$i}else{var C$o,C$a,C$t=0,C$c=0;C$e>=C$r[C$r.length-C$f.ENTRIES]?(C$t=C$r[C$r.length+C$f.PREV_ROTATE],C$c=C$r[C$r.length+C$f.PREV_TRANSLATE]):(C$t=C$r[(C$o=C$G.binarySearch(C$r,C$e,C$f.ENTRIES))+C$f.PREV_ROTATE],C$c=C$r[C$o+C$f.PREV_TRANSLATE],C$a=C$r[C$o],C$e=this.getCurvePercent(C$o/C$f.ENTRIES-1,1-(C$e-C$a)/(C$r[C$o+C$f.PREV_TIME]-C$a)),C$t+=(C$r[C$o+C$f.ROTATE]-C$t)*C$e,C$c+=(C$r[C$o+C$f.TRANSLATE]-C$c)*C$e),C$n==C$k.setup?(C$s.rotateMix=C$s.data.rotateMix+(C$t-C$s.data.rotateMix)*C$i,C$s.translateMix=C$s.data.translateMix+(C$c-C$s.data.translateMix)*C$i):(C$s.rotateMix+=(C$t-C$s.rotateMix)*C$i,C$s.translateMix+=(C$c-C$s.translateMix)*C$i)}},C$f.ENTRIES=3,C$f.PREV_TIME=-3,C$f.PREV_ROTATE=-2,C$f.PREV_TRANSLATE=-1,C$f.ROTATE=1,C$f.TRANSLATE=2;var C$L,C$a=C$f;function C$f(C$t){var C$e=C$L.call(this,C$t)||this;return C$e.frames=C$N.Utils.newFloatArray(C$t*C$f.ENTRIES),C$e}C$N.PathConstraintMixTimeline=C$a}(C$t=C$t||{}),function(C$S){C$T.prototype.update=function(C$t){C$t*=this.timeScale;for(var C$e=this.tracks,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(null!=C$r){C$r.animationLast=C$r.nextAnimationLast,C$r.trackLast=C$r.nextTrackLast;var C$s=C$t*C$r.timeScale;if(0<C$r.delay){if(C$r.delay-=C$s,0<C$r.delay)continue;C$s=-C$r.delay,C$r.delay=0}var C$o=C$r.next;if(null!=C$o){var C$a=C$r.trackLast-C$o.delay;if(0<=C$a){for(C$o.delay=0,C$o.trackTime+=0==C$r.timeScale?0:(C$a/C$r.timeScale+C$t)*C$o.timeScale,C$r.trackTime+=C$s,this.setCurrent(C$i,C$o,!0);null!=C$o.mixingFrom;)C$o.mixTime+=C$t,C$o=C$o.mixingFrom;continue}}else if(C$r.trackLast>=C$r.trackEnd&&null==C$r.mixingFrom){C$e[C$i]=null,this.queue.end(C$r),this.disposeNext(C$r);continue}if(null!=C$r.mixingFrom&&this.updateMixingFrom(C$r,C$t)){var C$c=C$r.mixingFrom;for((C$r.mixingFrom=null)!=C$c&&(C$c.mixingTo=null);null!=C$c;)this.queue.end(C$c),C$c=C$c.mixingFrom}C$r.trackTime+=C$s}}this.queue.drain()},C$T.prototype.updateMixingFrom=function(C$t,C$e){var C$i=C$t.mixingFrom;if(null==C$i)return!0;var C$n=this.updateMixingFrom(C$i,C$e);return C$i.animationLast=C$i.nextAnimationLast,C$i.trackLast=C$i.nextTrackLast,0<C$t.mixTime&&C$t.mixTime>=C$t.mixDuration?(0!=C$i.totalAlpha&&0!=C$t.mixDuration||(C$t.mixingFrom=C$i.mixingFrom,null!=C$i.mixingFrom&&(C$i.mixingFrom.mixingTo=C$t),C$t.interruptAlpha=C$i.interruptAlpha,this.queue.end(C$i)),C$n):(C$i.trackTime+=C$e*C$i.timeScale,C$t.mixTime+=C$e,!1)},C$T.prototype.apply=function(C$t){if(null==C$t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var C$e=this.events,C$h=this.tracks,C$u=!1,C$i=0,C$_=C$h.length;C$i<C$_;C$i++){var C$n=C$h[C$i];if(!(null==C$n||0<C$n.delay)){var C$u=!0,C$r=0==C$i?C$S.MixBlend.first:C$n.mixBlend,C$s=C$n.alpha,C$d=(null!=C$n.mixingFrom?C$s*=this.applyMixingFrom(C$n,C$t,C$r):C$n.trackTime>=C$n.trackEnd&&null==C$n.next&&(C$s=0),C$n.animationLast),C$o=C$n.getAnimationTime(),C$a=C$n.animation.timelines.length,C$f=C$n.animation.timelines;if(0==C$i&&1==C$s||C$r==C$S.MixBlend.add)for(var C$c=0;C$c<C$a;C$c++)C$S.Utils.webkit602BugfixHelper(C$s,C$r),C$f[C$c].apply(C$t,C$d,C$o,C$e,C$s,C$r,C$S.MixDirection.mixIn);else for(var C$p=C$n.timelineMode,C$m=0==C$n.timelinesRotation.length,C$y=(C$m&&C$S.Utils.setArraySize(C$n.timelinesRotation,C$a<<1,null),C$n.timelinesRotation),C$c=0;C$c<C$a;C$c++){var C$l=C$f[C$c],C$g=(C$p[C$c]&C$T.NOT_LAST-1)==C$T.SUBSEQUENT?C$r:C$S.MixBlend.setup;C$l instanceof C$S.RotateTimeline?this.applyRotateTimeline(C$l,C$t,C$o,C$s,C$g,C$y,C$c<<1,C$m):(C$S.Utils.webkit602BugfixHelper(C$s,C$r),C$l.apply(C$t,C$d,C$o,C$e,C$s,C$g,C$S.MixDirection.mixIn))}this.queueEvents(C$n,C$o),C$e.length=0,C$n.nextAnimationLast=C$o,C$n.nextTrackLast=C$n.trackTime}}return this.queue.drain(),C$u},C$T.prototype.applyMixingFrom=function(C$t,C$e,C$i){var C$n=C$t.mixingFrom,C$r=(null!=C$n.mixingFrom&&this.applyMixingFrom(C$n,C$e,C$i),0),C$h=(0==C$t.mixDuration?(C$r=1,C$i==C$S.MixBlend.first&&(C$i=C$S.MixBlend.setup)):(1<(C$r=C$t.mixTime/C$t.mixDuration)&&(C$r=1),C$i!=C$S.MixBlend.first&&(C$i=C$n.mixBlend)),C$r<C$n.eventThreshold?this.events:null),C$u=C$r<C$n.attachmentThreshold,C$_=C$r<C$n.drawOrderThreshold,C$d=C$n.animationLast,C$s=C$n.getAnimationTime(),C$f=C$n.animation.timelines.length,C$p=C$n.animation.timelines,C$m=C$n.alpha*C$t.interruptAlpha,C$y=C$m*(1-C$r);if(C$i==C$S.MixBlend.add)for(var C$o=0;C$o<C$f;C$o++)C$p[C$o].apply(C$e,C$d,C$s,C$h,C$y,C$i,C$S.MixDirection.mixOut);else for(var C$g=C$n.timelineMode,C$v=C$n.timelineHoldMix,C$x=0==C$n.timelinesRotation.length,C$b=(C$x&&C$S.Utils.setArraySize(C$n.timelinesRotation,C$f<<1,null),C$n.timelinesRotation),C$o=C$n.totalAlpha=0;C$o<C$f;C$o++){var C$a=C$p[C$o],C$A=C$S.MixDirection.mixOut,C$c=void 0,C$l=0;switch(C$g[C$o]&C$T.NOT_LAST-1){case C$T.SUBSEQUENT:if(C$c=C$i,!C$u&&C$a instanceof C$S.AttachmentTimeline){if((C$g[C$o]&C$T.NOT_LAST)==C$T.NOT_LAST)continue;C$c=C$S.MixBlend.setup}if(!C$_&&C$a instanceof C$S.DrawOrderTimeline)continue;C$l=C$y;break;case C$T.FIRST:C$c=C$S.MixBlend.setup,C$l=C$y;break;case C$T.HOLD:C$c=C$S.MixBlend.setup,C$l=C$m;break;default:var C$c=C$S.MixBlend.setup,C$C=C$v[C$o],C$l=C$m*Math.max(0,1-C$C.mixTime/C$C.mixDuration)}C$n.totalAlpha+=C$l,C$a instanceof C$S.RotateTimeline?this.applyRotateTimeline(C$a,C$e,C$s,C$l,C$c,C$b,C$o<<1,C$x):(C$S.Utils.webkit602BugfixHelper(C$l,C$i),C$c==C$S.MixBlend.setup&&(C$a instanceof C$S.AttachmentTimeline?!C$u&&(C$g[C$o]&C$T.NOT_LAST)!=C$T.NOT_LAST||(C$A=C$S.MixDirection.mixIn):C$a instanceof C$S.DrawOrderTimeline&&C$_&&(C$A=C$S.MixDirection.mixIn)),C$a.apply(C$e,C$d,C$s,C$h,C$l,C$c,C$A))}return 0<C$t.mixDuration&&this.queueEvents(C$n,C$s),this.events.length=0,C$n.nextAnimationLast=C$s,C$n.nextTrackLast=C$n.trackTime,C$r},C$T.prototype.applyRotateTimeline=function(C$h,C$u,C$t,C$_,C$d,C$e,C$i,C$f){if(C$f&&(C$e[C$i]=0),1!=C$_){var C$n=C$h,C$r=C$n.frames,C$s=C$u.bones[C$n.boneIndex];if(C$s.active){var C$p=0,C$o=0;if(C$t<C$r[0])switch(C$d){case C$S.MixBlend.setup:C$s.rotation=C$s.data.rotation;default:return;case C$S.MixBlend.first:C$p=C$s.rotation,C$o=C$s.data.rotation}else{C$p=(C$d==C$S.MixBlend.setup?C$s.data:C$s).rotation;C$t>=C$r[C$r.length-C$S.RotateTimeline.ENTRIES]?C$o=C$s.data.rotation+C$r[C$r.length+C$S.RotateTimeline.PREV_ROTATION]:(C$c=C$r[(C$a=C$S.Animation.binarySearch(C$r,C$t,C$S.RotateTimeline.ENTRIES))+C$S.RotateTimeline.PREV_ROTATION],C$l=C$r[C$a],C$n=C$n.getCurvePercent((C$a>>1)-1,1-(C$t-C$l)/(C$r[C$a+C$S.RotateTimeline.PREV_TIME]-C$l)),C$o=C$r[C$a+C$S.RotateTimeline.ROTATION]-C$c,C$o=C$c+(C$o-=360*(16384-(16384.499999999996-C$o/360|0)))*C$n+C$s.data.rotation,C$o-=360*(16384-(16384.499999999996-C$o/360|0)))}var C$a,C$c,C$l=0,C$r=C$o-C$p;0==(C$r-=360*(16384-(16384.499999999996-C$r/360|0)))?C$l=C$e[C$i]:(C$c=C$a=0,C$c=C$f?(C$a=0,C$r):(C$a=C$e[C$i],C$e[C$i+1]),C$n=0<C$r,C$f=0<=C$a,C$S.MathUtils.signum(C$c)!=C$S.MathUtils.signum(C$r)&&Math.abs(C$c)<=90&&(180<Math.abs(C$a)&&(C$a+=360*C$S.MathUtils.signum(C$a)),C$f=C$n),C$l=C$r+C$a-C$a%360,C$f!=C$n&&(C$l+=360*C$S.MathUtils.signum(C$a)),C$e[C$i]=C$l),C$e[C$i+1]=C$r,C$s.rotation=(C$p+=C$l*C$_)-360*(16384-(16384.499999999996-C$p/360|0))}}else C$h.apply(C$u,0,C$t,null,1,C$d,C$S.MixDirection.mixIn)},C$T.prototype.queueEvents=function(C$t,C$e){for(var C$i=C$t.animationStart,C$n=C$t.animationEnd,C$r=C$n-C$i,C$s=C$t.trackLast%C$r,C$o=this.events,C$a=0,C$c=C$o.length;C$a<C$c;C$a++){var C$l=C$o[C$a];if(C$l.time<C$s)break;C$l.time>C$n||this.queue.event(C$t,C$l)}for((C$t.loop?0==C$r||C$s>C$t.trackTime%C$r:C$n<=C$e&&C$t.animationLast<C$n)&&this.queue.complete(C$t);C$a<C$c;C$a++)C$o[C$a].time<C$i||this.queue.event(C$t,C$o[C$a])},C$T.prototype.clearTracks=function(){var C$t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var C$e=0,C$i=this.tracks.length;C$e<C$i;C$e++)this.clearTrack(C$e);this.tracks.length=0,this.queue.drainDisabled=C$t,this.queue.drain()},C$T.prototype.clearTrack=function(C$t){if(!(C$t>=this.tracks.length)){C$t=this.tracks[C$t];if(null!=C$t){this.queue.end(C$t),this.disposeNext(C$t);for(var C$e=C$t;;){var C$i=C$e.mixingFrom;if(null==C$i)break;this.queue.end(C$i),C$e.mixingFrom=null,C$e.mixingTo=null,C$e=C$i}this.tracks[C$t.trackIndex]=null,this.queue.drain()}}},C$T.prototype.setCurrent=function(C$t,C$e,C$i){var C$n=this.expandToIndex(C$t);this.tracks[C$t]=C$e,null!=C$n&&(C$i&&this.queue.interrupt(C$n),((C$e.mixingFrom=C$n).mixingTo=C$e).mixTime=0,null!=C$n.mixingFrom&&0<C$n.mixDuration&&(C$e.interruptAlpha*=Math.min(1,C$n.mixTime/C$n.mixDuration)),C$n.timelinesRotation.length=0),this.queue.start(C$e)},C$T.prototype.setAnimation=function(C$t,C$e,C$i){var C$n=this.data.skeletonData.findAnimation(C$e);if(null==C$n)throw new Error("Animation not found: "+C$e);return this.setAnimationWith(C$t,C$n,C$i)},C$T.prototype.setAnimationWith=function(C$t,C$e,C$i){if(null==C$e)throw new Error("animation cannot be null.");var C$n=!0,C$r=this.expandToIndex(C$t),C$e=(null!=C$r&&(-1==C$r.nextTrackLast?(this.tracks[C$t]=C$r.mixingFrom,this.queue.interrupt(C$r),this.queue.end(C$r),this.disposeNext(C$r),C$r=C$r.mixingFrom,C$n=!1):this.disposeNext(C$r)),this.trackEntry(C$t,C$e,C$i,C$r));return this.setCurrent(C$t,C$e,C$n),this.queue.drain(),C$e},C$T.prototype.addAnimation=function(C$t,C$e,C$i,C$n){var C$r=this.data.skeletonData.findAnimation(C$e);if(null==C$r)throw new Error("Animation not found: "+C$e);return this.addAnimationWith(C$t,C$r,C$i,C$n)},C$T.prototype.addAnimationWith=function(C$t,C$e,C$i,C$n){if(null==C$e)throw new Error("animation cannot be null.");var C$r=this.expandToIndex(C$t);if(null!=C$r)for(;null!=C$r.next;)C$r=C$r.next;C$i=this.trackEntry(C$t,C$e,C$i,C$r);return null==C$r?(this.setCurrent(C$t,C$i,!0),this.queue.drain()):(C$r.next=C$i,C$n<=0&&(0!=(C$t=C$r.animationEnd-C$r.animationStart)?(C$r.loop?C$n+=C$t*(1+(C$r.trackTime/C$t|0)):C$n+=Math.max(C$t,C$r.trackTime),C$n-=this.data.getMix(C$r.animation,C$e)):C$n=C$r.trackTime)),C$i.delay=C$n,C$i},C$T.prototype.setEmptyAnimation=function(C$t,C$e){C$t=this.setAnimationWith(C$t,C$T.emptyAnimation,!1);return C$t.mixDuration=C$e,C$t.trackEnd=C$e,C$t},C$T.prototype.addEmptyAnimation=function(C$t,C$e,C$i){C$i<=0&&(C$i-=C$e);C$t=this.addAnimationWith(C$t,C$T.emptyAnimation,!1,C$i);return C$t.mixDuration=C$e,C$t.trackEnd=C$e,C$t},C$T.prototype.setEmptyAnimations=function(C$t){var C$e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var C$i=0,C$n=this.tracks.length;C$i<C$n;C$i++){var C$r=this.tracks[C$i];null!=C$r&&this.setEmptyAnimation(C$r.trackIndex,C$t)}this.queue.drainDisabled=C$e,this.queue.drain()},C$T.prototype.expandToIndex=function(C$t){return C$t<this.tracks.length?this.tracks[C$t]:(C$S.Utils.ensureArrayCapacity(this.tracks,C$t+1,null),this.tracks.length=C$t+1,null)},C$T.prototype.trackEntry=function(C$t,C$e,C$i,C$n){var C$r=this.trackEntryPool.obtain();return C$r.trackIndex=C$t,C$r.animation=C$e,C$r.loop=C$i,C$r.holdPrevious=!1,C$r.eventThreshold=0,C$r.attachmentThreshold=0,C$r.drawOrderThreshold=0,C$r.animationStart=0,C$r.animationEnd=C$e.duration,C$r.animationLast=-1,C$r.nextAnimationLast=-1,C$r.delay=0,C$r.trackTime=0,C$r.trackLast=-1,C$r.nextTrackLast=-1,C$r.trackEnd=Number.MAX_VALUE,C$r.timeScale=1,C$r.alpha=1,C$r.interruptAlpha=1,C$r.mixTime=0,C$r.mixDuration=null==C$n?0:this.data.getMix(C$n.animation,C$e),C$r},C$T.prototype.disposeNext=function(C$t){for(var C$e=C$t.next;null!=C$e;)this.queue.dispose(C$e),C$e=C$e.next;C$t.next=null},C$T.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var C$t=0,C$e=this.tracks.length;C$t<C$e;C$t++)if(null!=(C$i=this.tracks[C$t])){for(;null!=C$i.mixingFrom;)C$i=C$i.mixingFrom;for(;null!=C$i.mixingFrom&&C$i.mixBlend==C$S.MixBlend.add||this.computeHold(C$i),null!=(C$i=C$i.mixingTo););}this.propertyIDs.clear();for(C$t=this.tracks.length-1;0<=C$t;C$t--)for(var C$i=this.tracks[C$t];null!=C$i;)this.computeNotLast(C$i),C$i=C$i.mixingFrom},C$T.prototype.computeHold=function(C$t){var C$e=C$t.mixingTo,C$i=C$t.animation.timelines,C$n=C$t.animation.timelines.length,C$r=C$S.Utils.setArraySize(C$t.timelineMode,C$n),C$h=(C$t.timelineHoldMix.length=0,C$S.Utils.setArraySize(C$t.timelineHoldMix,C$n)),C$s=this.propertyIDs;if(null!=C$e&&C$e.holdPrevious)for(var C$o=0;C$o<C$n;C$o++)C$s.add(C$i[C$o].getPropertyId()),C$r[C$o]=C$T.HOLD;else C$t:for(C$o=0;C$o<C$n;C$o++){var C$a=C$i[C$o],C$c=C$a.getPropertyId();if(C$s.add(C$c))if(null==C$e||C$a instanceof C$S.AttachmentTimeline||C$a instanceof C$S.DrawOrderTimeline||C$a instanceof C$S.EventTimeline||!C$e.animation.hasTimeline(C$c))C$r[C$o]=C$T.FIRST;else{for(var C$l=C$e.mixingTo;null!=C$l;C$l=C$l.mixingTo)if(!C$l.animation.hasTimeline(C$c)){if(0<C$t.mixDuration){C$r[C$o]=C$T.HOLD_MIX,C$h[C$o]=C$l;continue C$t}break}C$r[C$o]=C$T.HOLD}else C$r[C$o]=C$T.SUBSEQUENT}},C$T.prototype.computeNotLast=function(C$t){for(var C$e,C$i=C$t.animation.timelines,C$n=C$t.animation.timelines.length,C$r=C$t.timelineMode,C$s=this.propertyIDs,C$o=0;C$o<C$n;C$o++)C$i[C$o]instanceof C$S.AttachmentTimeline&&(C$e=C$i[C$o],C$s.add(C$e.slotIndex)||(C$r[C$o]|=C$T.NOT_LAST))},C$T.prototype.getCurrent=function(C$t){return C$t>=this.tracks.length?null:this.tracks[C$t]},C$T.prototype.addListener=function(C$t){if(null==C$t)throw new Error("listener cannot be null.");this.listeners.push(C$t)},C$T.prototype.removeListener=function(C$t){C$t=this.listeners.indexOf(C$t);0<=C$t&&this.listeners.splice(C$t,1)},C$T.prototype.clearListeners=function(){this.listeners.length=0},C$T.prototype.clearListenerNotifications=function(){this.queue.clear()},C$T.emptyAnimation=new C$S.Animation("<empty>",[],0),C$T.SUBSEQUENT=0,C$T.FIRST=1,C$T.HOLD=2,C$T.HOLD_MIX=3,C$T.NOT_LAST=4;var C$t=C$T;function C$T(C$t){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new C$n(this),this.propertyIDs=new C$S.IntSet,this.animationsChanged=!1,this.trackEntryPool=new C$S.Pool(function(){return new C$e}),this.data=C$t}C$S.AnimationState=C$t;C$i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},C$i.prototype.getAnimationTime=function(){var C$t;return this.loop?0==(C$t=this.animationEnd-this.animationStart)?this.animationStart:this.trackTime%C$t+this.animationStart:Math.min(this.trackTime+this.animationStart,this.animationEnd)},C$i.prototype.setAnimationLast=function(C$t){this.animationLast=C$t,this.nextAnimationLast=C$t},C$i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},C$i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0};var C$e=C$i;function C$i(){this.mixBlend=C$S.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}C$S.TrackEntry=C$e;C$r.prototype.start=function(C$t){this.objects.push(C$a.start),this.objects.push(C$t),this.animState.animationsChanged=!0},C$r.prototype.interrupt=function(C$t){this.objects.push(C$a.interrupt),this.objects.push(C$t)},C$r.prototype.end=function(C$t){this.objects.push(C$a.end),this.objects.push(C$t),this.animState.animationsChanged=!0},C$r.prototype.dispose=function(C$t){this.objects.push(C$a.dispose),this.objects.push(C$t)},C$r.prototype.complete=function(C$t){this.objects.push(C$a.complete),this.objects.push(C$t)},C$r.prototype.event=function(C$t,C$e){this.objects.push(C$a.event),this.objects.push(C$t),this.objects.push(C$e)},C$r.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var C$t=this.objects,C$e=this.animState.listeners,C$i=0;C$i<C$t.length;C$i+=2){var C$n=C$t[C$i],C$r=C$t[C$i+1];switch(C$n){case C$a.start:null!=C$r.listener&&C$r.listener.start&&C$r.listener.start(C$r);for(var C$s=0;C$s<C$e.length;C$s++)C$e[C$s].start&&C$e[C$s].start(C$r);break;case C$a.interrupt:null!=C$r.listener&&C$r.listener.interrupt&&C$r.listener.interrupt(C$r);for(C$s=0;C$s<C$e.length;C$s++)C$e[C$s].interrupt&&C$e[C$s].interrupt(C$r);break;case C$a.end:null!=C$r.listener&&C$r.listener.end&&C$r.listener.end(C$r);for(C$s=0;C$s<C$e.length;C$s++)C$e[C$s].end&&C$e[C$s].end(C$r);case C$a.dispose:null!=C$r.listener&&C$r.listener.dispose&&C$r.listener.dispose(C$r);for(C$s=0;C$s<C$e.length;C$s++)C$e[C$s].dispose&&C$e[C$s].dispose(C$r);this.animState.trackEntryPool.free(C$r);break;case C$a.complete:null!=C$r.listener&&C$r.listener.complete&&C$r.listener.complete(C$r);for(C$s=0;C$s<C$e.length;C$s++)C$e[C$s].complete&&C$e[C$s].complete(C$r);break;case C$a.event:var C$o=C$t[2+C$i++];null!=C$r.listener&&C$r.listener.event&&C$r.listener.event(C$r,C$o);for(C$s=0;C$s<C$e.length;C$s++)C$e[C$s].event&&C$e[C$s].event(C$r,C$o)}}this.clear(),this.drainDisabled=!1}},C$r.prototype.clear=function(){this.objects.length=0};var C$a,C$n=C$r;function C$r(C$t){this.objects=[],this.drainDisabled=!1,this.animState=C$t}function C$s(){}C$S.EventQueue=C$n,(C$t=C$a=C$S.EventType||(C$S.EventType={}))[C$t.start=0]="start",C$t[C$t.interrupt=1]="interrupt",C$t[C$t.end=2]="end",C$t[C$t.dispose=3]="dispose",C$t[C$t.complete=4]="complete",C$t[C$t.event=5]="event",C$s.prototype.start=function(C$t){},C$s.prototype.interrupt=function(C$t){},C$s.prototype.end=function(C$t){},C$s.prototype.dispose=function(C$t){},C$s.prototype.complete=function(C$t){},C$s.prototype.event=function(C$t,C$e){},C$S.AnimationStateAdapter=C$s}(C$t=C$t||{}),function(C$t){function C$e(C$t){if(this.animationToMixTime={},this.defaultMix=0,null==C$t)throw new Error("skeletonData cannot be null.");this.skeletonData=C$t}C$e.prototype.setMix=function(C$t,C$e,C$i){var C$n=this.skeletonData.findAnimation(C$t);if(null==C$n)throw new Error("Animation not found: "+C$t);C$t=this.skeletonData.findAnimation(C$e);if(null==C$t)throw new Error("Animation not found: "+C$e);this.setMixWith(C$n,C$t,C$i)},C$e.prototype.setMixWith=function(C$t,C$e,C$i){if(null==C$t)throw new Error("from cannot be null.");if(null==C$e)throw new Error("to cannot be null.");C$t=C$t.name+"."+C$e.name;this.animationToMixTime[C$t]=C$i},C$e.prototype.getMix=function(C$t,C$e){C$t=C$t.name+"."+C$e.name,C$e=this.animationToMixTime[C$t];return void 0===C$e?this.defaultMix:C$e},C$t.AnimationStateData=C$e}(C$t=C$t||{}),function(C$_){function C$t(C$t,C$e){void 0===C$e&&(C$e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=C$t,this.pathPrefix=C$e}C$t.downloadText=function(C$t,C$e,C$i){var C$n=new XMLHttpRequest;C$n.open("GET",C$t,!0),C$n.onload=function(){200==C$n.status?C$e(C$n.responseText):C$i(C$n.status,C$n.responseText)},C$n.onerror=function(){C$i(C$n.status,C$n.responseText)},C$n.send()},C$t.downloadBinary=function(C$t,C$e,C$i){var C$n=new XMLHttpRequest;C$n.open("GET",C$t,!0),C$n.responseType="arraybuffer",C$n.onload=function(){200==C$n.status?C$e(new Uint8Array(C$n.response)):C$i(C$n.status,C$n.responseText)},C$n.onerror=function(){C$i(C$n.status,C$n.responseText)},C$n.send()},C$t.prototype.loadBinary=function(C$i,C$e,C$n){var C$r=this;void 0===C$e&&(C$e=null),void 0===C$n&&(C$n=null),C$i=this.pathPrefix+C$i,this.toLoad++,C$t.downloadBinary(C$i,function(C$t){C$r.assets[C$i]=C$t,C$e&&C$e(C$i,C$t),C$r.toLoad--,C$r.loaded++},function(C$t,C$e){C$r.errors[C$i]="Couldn't load binary "+C$i+": status "+status+", "+C$e,C$n&&C$n(C$i,"Couldn't load binary "+C$i+": status "+status+", "+C$e),C$r.toLoad--,C$r.loaded++})},C$t.prototype.loadText=function(C$i,C$e,C$n){var C$r=this;void 0===C$e&&(C$e=null),void 0===C$n&&(C$n=null),C$i=this.pathPrefix+C$i,this.toLoad++,C$t.downloadText(C$i,function(C$t){C$r.assets[C$i]=C$t,C$e&&C$e(C$i,C$t),C$r.toLoad--,C$r.loaded++},function(C$t,C$e){C$r.errors[C$i]="Couldn't load text "+C$i+": status "+status+", "+C$e,C$n&&C$n(C$i,"Couldn't load text "+C$i+": status "+status+", "+C$e),C$r.toLoad--,C$r.loaded++})},C$t.prototype.loadTexture=function(C$i,C$n,C$e){var C$r=this,C$s=(void 0===C$n&&(C$n=null),void 0===C$e&&(C$e=null),C$i=this.pathPrefix+C$i,this.toLoad++,new Image);C$s.crossOrigin="anonymous",C$s.onload=function(C$t){var C$e=C$r.textureLoader(C$s);C$r.assets[C$i]=C$e,C$r.toLoad--,C$r.loaded++,C$n&&C$n(C$i,C$s)},C$s.onerror=function(C$t){C$r.errors[C$i]="Couldn't load image "+C$i,C$r.toLoad--,C$r.loaded++,C$e&&C$e(C$i,"Couldn't load image "+C$i)},C$s.src=C$i},C$t.prototype.loadTextureData=function(C$i,C$t,C$n,C$e){var C$r=this,C$s=(void 0===C$n&&(C$n=null),void 0===C$e&&(C$e=null),C$i=this.pathPrefix+C$i,this.toLoad++,new Image);C$s.onload=function(C$t){var C$e=C$r.textureLoader(C$s);C$r.assets[C$i]=C$e,C$r.toLoad--,C$r.loaded++,C$n&&C$n(C$i,C$s)},C$s.onerror=function(C$t){C$r.errors[C$i]="Couldn't load image "+C$i,C$r.toLoad--,C$r.loaded++,C$e&&C$e(C$i,"Couldn't load image "+C$i)},C$s.src=C$t},C$t.prototype.loadTextureAtlas=function(C$a,C$c,C$l){var C$h=this,C$u=(void 0===C$c&&(C$c=null),void 0===C$l&&(C$l=null),0<=C$a.lastIndexOf("/")?C$a.substring(0,C$a.lastIndexOf("/")):"");C$a=this.pathPrefix+C$a,this.toLoad++,C$t.downloadText(C$a,function(C$r){var C$s={count:0},C$o=new Array;try{new C$_.TextureAtlas(C$r,function(C$t){C$o.push(C$u+"/"+C$t);C$t=document.createElement("img");return C$t.width=16,C$t.height=16,new C$_.FakeTexture(C$t)})}catch(C$t){var C$e=C$t;return C$h.errors[C$a]="Couldn't load texture atlas "+C$a+": "+C$e.message,C$l&&C$l(C$a,"Couldn't load texture atlas "+C$a+": "+C$e.message),C$h.toLoad--,void C$h.loaded++}for(var C$t=0,C$i=C$o;C$t<C$i.length;C$t++)!function(C$t){var C$n=!1;C$h.loadTexture(C$t,function(C$e,C$t){if(C$s.count++,C$s.count==C$o.length)if(C$n)C$h.errors[C$a]="Couldn't load texture atlas page "+C$e+"} of atlas "+C$a,C$l&&C$l(C$a,"Couldn't load texture atlas page "+C$e+" of atlas "+C$a),C$h.toLoad--,C$h.loaded++;else try{var C$i=new C$_.TextureAtlas(C$r,function(C$t){return C$h.get(C$u+"/"+C$t)});C$h.assets[C$a]=C$i,C$c&&C$c(C$a,C$i),C$h.toLoad--,C$h.loaded++}catch(C$t){C$e=C$t;C$h.errors[C$a]="Couldn't load texture atlas "+C$a+": "+C$e.message,C$l&&C$l(C$a,"Couldn't load texture atlas "+C$a+": "+C$e.message),C$h.toLoad--,C$h.loaded++}},function(C$t,C$e){C$n=!0,C$s.count++,C$s.count==C$o.length&&(C$h.errors[C$a]="Couldn't load texture atlas page "+C$t+"} of atlas "+C$a,C$l&&C$l(C$a,"Couldn't load texture atlas page "+C$t+" of atlas "+C$a),C$h.toLoad--,C$h.loaded++)})}(C$i[C$t])},function(C$t,C$e){C$h.errors[C$a]="Couldn't load texture atlas "+C$a+": status "+status+", "+C$e,C$l&&C$l(C$a,"Couldn't load texture atlas "+C$a+": status "+status+", "+C$e),C$h.toLoad--,C$h.loaded++})},C$t.prototype.get=function(C$t){return C$t=this.pathPrefix+C$t,this.assets[C$t]},C$t.prototype.remove=function(C$t){C$t=this.pathPrefix+C$t;var C$e=this.assets[C$t];C$e.dispose&&C$e.dispose(),this.assets[C$t]=null},C$t.prototype.removeAll=function(){for(var C$t in this.assets){C$t=this.assets[C$t];C$t.dispose&&C$t.dispose()}this.assets={}},C$t.prototype.isLoadingComplete=function(){return 0==this.toLoad},C$t.prototype.getToLoad=function(){return this.toLoad},C$t.prototype.getLoaded=function(){return this.loaded},C$t.prototype.dispose=function(){this.removeAll()},C$t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},C$t.prototype.getErrors=function(){return this.errors},C$_.AssetManager=C$t}(C$t=C$t||{}),function(C$n){function C$t(C$t){this.atlas=C$t}C$t.prototype.newRegionAttachment=function(C$t,C$e,C$i){C$i=this.atlas.findRegion(C$i);if(null==C$i)return null;C$i.renderObject=C$i;C$e=new C$n.RegionAttachment(C$e);return C$e.setRegion(C$i),C$e},C$t.prototype.newMeshAttachment=function(C$t,C$e,C$i){C$i=this.atlas.findRegion(C$i);if(null==C$i)return null;C$i.renderObject=C$i;C$e=new C$n.MeshAttachment(C$e);return C$e.region=C$i,C$e},C$t.prototype.newBoundingBoxAttachment=function(C$t,C$e){return new C$n.BoundingBoxAttachment(C$e)},C$t.prototype.newPathAttachment=function(C$t,C$e){return new C$n.PathAttachment(C$e)},C$t.prototype.newPointAttachment=function(C$t,C$e){return new C$n.PointAttachment(C$e)},C$t.prototype.newClippingAttachment=function(C$t,C$e){return new C$n.ClippingAttachment(C$e)},C$n.AtlasAttachmentLoader=C$t}(C$t=C$t||{}),(C$e=(C$e=C$t=C$t||{}).BlendMode||(C$e.BlendMode={}))[C$e.Normal=0]="Normal",C$e[C$e.Additive=1]="Additive",C$e[C$e.Multiply=2]="Multiply",C$e[C$e.Screen=3]="Screen",function(C$T){function C$t(C$t,C$e,C$i){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==C$t)throw new Error("data cannot be null.");if(null==C$e)throw new Error("skeleton cannot be null.");this.data=C$t,this.skeleton=C$e,this.parent=C$i,this.setToSetupPose()}C$t.prototype.isActive=function(){return this.active},C$t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},C$t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},C$t.prototype.updateWorldTransformWith=function(C$h,C$u,C$t,C$e,C$i,C$n,C$_){this.ax=C$h,this.ay=C$u,this.arotation=C$t,this.ascaleX=C$e,this.ascaleY=C$i,this.ashearX=C$n,this.ashearY=C$_,this.appliedValid=!0;var C$d,C$f,C$p,C$m=this.parent;if(null==C$m)return C$y=C$t+90+C$_,C$f=(C$d=this.skeleton).scaleX,C$p=C$d.scaleY,this.a=C$T.MathUtils.cosDeg(C$t+C$n)*C$e*C$f,this.b=C$T.MathUtils.cosDeg(C$y)*C$i*C$f,this.c=C$T.MathUtils.sinDeg(C$t+C$n)*C$e*C$p,this.d=C$T.MathUtils.sinDeg(C$y)*C$i*C$p,this.worldX=C$h*C$f+C$d.x,void(this.worldY=C$u*C$p+C$d.y);var C$r=C$m.a,C$s=C$m.b,C$o=C$m.c,C$a=C$m.d;switch(this.worldX=C$r*C$h+C$s*C$u+C$m.worldX,this.worldY=C$o*C$h+C$a*C$u+C$m.worldY,this.data.transformMode){case C$T.TransformMode.Normal:var C$y=C$t+90+C$_,C$g=C$T.MathUtils.cosDeg(C$t+C$n)*C$e,C$v=C$T.MathUtils.cosDeg(C$y)*C$i,C$x=C$T.MathUtils.sinDeg(C$t+C$n)*C$e,C$b=C$T.MathUtils.sinDeg(C$y)*C$i;return this.a=C$r*C$g+C$s*C$x,this.b=C$r*C$v+C$s*C$b,this.c=C$o*C$g+C$a*C$x,void(this.d=C$o*C$v+C$a*C$b);case C$T.TransformMode.OnlyTranslation:C$y=C$t+90+C$_;this.a=C$T.MathUtils.cosDeg(C$t+C$n)*C$e,this.b=C$T.MathUtils.cosDeg(C$y)*C$i,this.c=C$T.MathUtils.sinDeg(C$t+C$n)*C$e,this.d=C$T.MathUtils.sinDeg(C$y)*C$i;break;case C$T.TransformMode.NoRotationOrReflection:var C$A=0,C$c=C$t+C$n-(C$A=1e-4<(C$l=C$r*C$r+C$o*C$o)?(C$s=C$o*(C$l=Math.abs(C$r*C$a-C$s*C$o)/C$l),C$a=C$r*C$l,Math.atan2(C$o,C$r)*C$T.MathUtils.radDeg):(C$o=C$r=0,90-Math.atan2(C$a,C$s)*C$T.MathUtils.radDeg)),C$A=C$t+C$_-C$A+90,C$g=C$T.MathUtils.cosDeg(C$c)*C$e,C$v=C$T.MathUtils.cosDeg(C$A)*C$i,C$x=C$T.MathUtils.sinDeg(C$c)*C$e,C$b=C$T.MathUtils.sinDeg(C$A)*C$i;this.a=C$r*C$g-C$s*C$x,this.b=C$r*C$v-C$s*C$b,this.c=C$o*C$g+C$a*C$x,this.d=C$o*C$v+C$a*C$b;break;case C$T.TransformMode.NoScale:case C$T.TransformMode.NoScaleOrReflection:var C$l,C$c=C$T.MathUtils.cosDeg(C$t),C$A=C$T.MathUtils.sinDeg(C$t),C$C=(C$r*C$c+C$s*C$A)/this.skeleton.scaleX,C$c=(C$o*C$c+C$a*C$A)/this.skeleton.scaleY,C$A=(C$C*=C$l=1e-5<(C$l=Math.sqrt(C$C*C$C+C$c*C$c))?1/C$l:C$l,C$c*=C$l,C$l=Math.sqrt(C$C*C$C+C$c*C$c),this.data.transformMode==C$T.TransformMode.NoScale&&C$r*C$a-C$s*C$o<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(C$l=-C$l),Math.PI/2+Math.atan2(C$c,C$C)),C$S=Math.cos(C$A)*C$l,C$A=Math.sin(C$A)*C$l,C$g=C$T.MathUtils.cosDeg(C$n)*C$e,C$v=C$T.MathUtils.cosDeg(90+C$_)*C$i,C$x=C$T.MathUtils.sinDeg(C$n)*C$e,C$b=C$T.MathUtils.sinDeg(90+C$_)*C$i;this.a=C$C*C$g+C$S*C$x,this.b=C$C*C$v+C$S*C$b,this.c=C$c*C$g+C$A*C$x,this.d=C$c*C$v+C$A*C$b}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},C$t.prototype.setToSetupPose=function(){var C$t=this.data;this.x=C$t.x,this.y=C$t.y,this.rotation=C$t.rotation,this.scaleX=C$t.scaleX,this.scaleY=C$t.scaleY,this.shearX=C$t.shearX,this.shearY=C$t.shearY},C$t.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*C$T.MathUtils.radDeg},C$t.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*C$T.MathUtils.radDeg},C$t.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},C$t.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},C$t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var C$t=this.parent;if(null==C$t)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*C$T.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*C$T.MathUtils.radDeg);var C$e=C$t.a,C$i=C$t.b,C$n=C$t.c,C$r=C$t.d,C$s=1/(C$e*C$r-C$i*C$n),C$o=this.worldX-C$t.worldX,C$t=this.worldY-C$t.worldY,C$t=(this.ax=C$o*C$r*C$s-C$t*C$i*C$s,this.ay=C$t*C$e*C$s-C$o*C$n*C$s,C$s*C$r),C$o=C$s*C$e,C$r=C$s*C$i,C$e=C$s*C$n,C$i=C$t*this.a-C$r*this.c,C$s=C$t*this.b-C$r*this.d,C$n=C$o*this.c-C$e*this.a,C$t=C$o*this.d-C$e*this.b;this.ashearX=0,this.ascaleX=Math.sqrt(C$i*C$i+C$n*C$n),1e-4<this.ascaleX?(this.ascaleY=(C$r=C$i*C$t-C$s*C$n)/this.ascaleX,this.ashearY=Math.atan2(C$i*C$s+C$n*C$t,C$r)*C$T.MathUtils.radDeg,this.arotation=Math.atan2(C$n,C$i)*C$T.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(C$s*C$s+C$t*C$t),this.ashearY=0,this.arotation=90-Math.atan2(C$t,C$s)*C$T.MathUtils.radDeg)},C$t.prototype.worldToLocal=function(C$t){var C$e=this.a,C$i=this.b,C$n=this.c,C$r=this.d,C$s=1/(C$e*C$r-C$i*C$n),C$o=C$t.x-this.worldX,C$a=C$t.y-this.worldY;return C$t.x=C$o*C$r*C$s-C$a*C$i*C$s,C$t.y=C$a*C$e*C$s-C$o*C$n*C$s,C$t},C$t.prototype.localToWorld=function(C$t){var C$e=C$t.x,C$i=C$t.y;return C$t.x=C$e*this.a+C$i*this.b+this.worldX,C$t.y=C$e*this.c+C$i*this.d+this.worldY,C$t},C$t.prototype.worldToLocalRotation=function(C$t){var C$e=C$T.MathUtils.sinDeg(C$t),C$t=C$T.MathUtils.cosDeg(C$t);return Math.atan2(this.a*C$e-this.c*C$t,this.d*C$t-this.b*C$e)*C$T.MathUtils.radDeg+this.rotation-this.shearX},C$t.prototype.localToWorldRotation=function(C$t){C$t-=this.rotation-this.shearX;var C$e=C$T.MathUtils.sinDeg(C$t),C$t=C$T.MathUtils.cosDeg(C$t);return Math.atan2(C$t*this.c+C$e*this.d,C$t*this.a+C$e*this.b)*C$T.MathUtils.radDeg},C$t.prototype.rotateWorld=function(C$t){var C$e=this.a,C$i=this.b,C$n=this.c,C$r=this.d,C$s=C$T.MathUtils.cosDeg(C$t),C$t=C$T.MathUtils.sinDeg(C$t);this.a=C$s*C$e-C$t*C$n,this.b=C$s*C$i-C$t*C$r,this.c=C$t*C$e+C$s*C$n,this.d=C$t*C$i+C$s*C$r,this.appliedValid=!1},C$T.Bone=C$t}(C$t=C$t||{}),(C$l=C$t=C$t||{}).BoneData=function(C$t,C$e,C$i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=C$h.Normal,this.skinRequired=!1,this.color=new C$l.Color,C$t<0)throw new Error("index must be >= 0.");if(null==C$e)throw new Error("name cannot be null.");this.index=C$t,this.name=C$e,this.parent=C$i},(C$e=C$h=C$l.TransformMode||(C$l.TransformMode={}))[C$e.Normal=0]="Normal",C$e[C$e.OnlyTranslation=1]="OnlyTranslation",C$e[C$e.NoRotationOrReflection=2]="NoRotationOrReflection",C$e[C$e.NoScale=3]="NoScale",C$e[C$e.NoScaleOrReflection=4]="NoScaleOrReflection",(C$t||(C$t={})).ConstraintData=function(C$t,C$e,C$i){this.name=C$t,this.order=C$e,this.skinRequired=C$i},(C$t||(C$t={})).Event=function(C$t,C$e){if(null==C$e)throw new Error("data cannot be null.");this.time=C$t,this.data=C$e},(C$t||(C$t={})).EventData=function(C$t){this.name=C$t},function(C$q){function C$t(C$t,C$e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==C$t)throw new Error("data cannot be null.");if(null==C$e)throw new Error("skeleton cannot be null.");this.data=C$t,this.mix=C$t.mix,this.softness=C$t.softness,this.bendDirection=C$t.bendDirection,this.compress=C$t.compress,this.stretch=C$t.stretch,this.bones=new Array;for(var C$i=0;C$i<C$t.bones.length;C$i++)this.bones.push(C$e.findBone(C$t.bones[C$i].name));this.target=C$e.findBone(C$t.target.name)}C$t.prototype.isActive=function(){return this.active},C$t.prototype.apply=function(){this.update()},C$t.prototype.update=function(){var C$t=this.target,C$e=this.bones;switch(C$e.length){case 1:this.apply1(C$e[0],C$t.worldX,C$t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(C$e[0],C$e[1],C$t.worldX,C$t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},C$t.prototype.apply1=function(C$t,C$e,C$i,C$n,C$r,C$h,C$s){C$t.appliedValid||C$t.updateAppliedTransform();var C$o,C$a=C$t.parent,C$c=1/(C$a.a*C$a.d-C$a.b*C$a.c),C$e=C$e-C$a.worldX,C$i=C$i-C$a.worldY,C$l=(C$e*C$a.d-C$i*C$a.b)*C$c-C$t.ax,C$i=(C$i*C$a.a-C$e*C$a.c)*C$c-C$t.ay,C$e=Math.atan2(C$i,C$l)*C$q.MathUtils.radDeg-C$t.ashearX-C$t.arotation,C$a=(C$t.ascaleX<0&&(C$e+=180),180<C$e?C$e-=360:C$e<-180&&(C$e+=360),C$t.ascaleX),C$c=C$t.ascaleY;(C$n||C$r)&&(C$o=C$t.data.length*C$a,C$l=Math.sqrt(C$l*C$l+C$i*C$i),(C$n&&C$l<C$o||C$r&&C$o<C$l&&1e-4<C$o)&&(C$a*=C$i=(C$l/C$o-1)*C$s+1,C$h&&(C$c*=C$i))),C$t.updateWorldTransformWith(C$t.ax,C$t.ay,C$t.arotation+C$e*C$s,C$a,C$c,C$t.ashearX,C$t.ashearY)},C$t.prototype.apply2=function(C$t,C$e,C$h,C$u,C$_,C$d,C$f,C$p){if(0!=C$p){C$t.appliedValid||C$t.updateAppliedTransform(),C$e.appliedValid||C$e.updateAppliedTransform();var C$m,C$y=C$t.ax,C$g=C$t.ay,C$v=C$t.ascaleX,C$x=C$v,C$b=C$t.ascaleY,C$A=C$e.ascaleX,C$C=0,C$S=0,C$T=0,C$T=C$v<0?(C$v=-C$v,C$C=180,-1):(C$C=0,1),C$S=(C$b<0&&(C$b=-C$b,C$T=-C$T),C$A<0?(C$A=-C$A,180):0),C$w=C$e.ax,C$E=0,C$M=0,C$I=0,C$i=C$t.a,C$n=C$t.b,C$r=C$t.c,C$B=C$t.d,C$R=Math.abs(C$v-C$b)<=1e-4,C$I=C$R?(C$M=C$i*C$w+C$n*(C$E=C$e.ay)+C$t.worldX,C$r*C$w+C$B*C$E+C$t.worldY):(C$E=0,C$M=C$i*C$w+C$t.worldX,C$r*C$w+C$t.worldY),C$s=C$t.parent,C$P=(C$i=C$s.a,C$n=C$s.b,C$r=C$s.c,1/(C$i*(C$B=C$s.d)-C$n*C$r)),C$D=C$M-C$s.worldX,C$o=C$I-C$s.worldY,C$M=(C$D*C$B-C$o*C$n)*C$P-C$y,C$I=(C$o*C$i-C$D*C$r)*C$P-C$g,C$a=Math.sqrt(C$M*C$M+C$I*C$I),C$L=C$e.data.length*C$A;if(C$a<1e-4)return this.apply1(C$t,C$h,C$u,!1,C$d,!1,C$p),void C$e.updateWorldTransformWith(C$w,C$E,0,C$e.ascaleX,C$e.ascaleY,C$e.ashearX,C$e.ashearY);var C$V=((C$D=C$h-C$s.worldX)*C$B-(C$o=C$u-C$s.worldY)*C$n)*C$P-C$y,C$O=(C$o*C$i-C$D*C$r)*C$P-C$g,C$F=C$V*C$V+C$O*C$O;0!=C$f&&(C$f*=C$v*(C$A+1)/2,0<(C$I=(C$M=Math.sqrt(C$F))-C$a-C$L*C$v+C$f)&&(C$F=(C$V-=(C$h=(C$I-C$f*(1-(C$h=Math.min(1,C$I/(2*C$f))-1)*C$h))/C$M)*C$V)*C$V+(C$O-=C$h*C$O)*C$O));C$t:if(C$R){var C$c=(C$F-C$a*C$a-(C$L*=C$v)*C$L)/(2*C$a*C$L);C$c<-1?C$c=-1:1<C$c&&(C$c=1,C$d&&(C$x*=(Math.sqrt(C$F)/(C$a+C$L)-1)*C$p+1)),C$m=Math.acos(C$c)*C$_,C$i=C$a+C$L*C$c,C$n=C$L*Math.sin(C$m),C$Y=Math.atan2(C$O*C$i-C$V*C$n,C$V*C$i+C$O*C$n)}else{var C$N=(C$i=C$v*C$L)*C$i,C$k=(C$n=C$b*C$L)*C$n,C$G=Math.atan2(C$O,C$V),C$c=-2*C$k*C$a,C$z=C$k-C$N;if(0<=(C$B=C$c*C$c-4*C$z*(C$r=C$k*C$a*C$a+C$N*C$F-C$N*C$k))){var C$l=Math.sqrt(C$B),C$c=(C$l=-(C$c+(C$l=C$c<0?-C$l:C$l))/2)/C$z,C$z=C$r/C$l,C$l=Math.abs(C$c)<Math.abs(C$z)?C$c:C$z;if(C$l*C$l<=C$F){C$o=Math.sqrt(C$F-C$l*C$l)*C$_,C$Y=C$G-Math.atan2(C$o,C$l),C$m=Math.atan2(C$o/C$b,(C$l-C$a)/C$v);break C$t}}var C$c=C$q.MathUtils.PI,C$z=C$a-C$i,C$l=C$z*C$z,C$U=0,C$W=0,C$H=C$a+C$i,C$j=C$H*C$H,C$X=0;-1<=(C$r=-C$i*C$a/(C$N-C$k))&&C$r<=1&&(C$r=Math.acos(C$r),(C$B=(C$D=C$i*Math.cos(C$r)+C$a)*C$D+(C$o=C$n*Math.sin(C$r))*C$o)<C$l&&(C$c=C$r,C$l=C$B,C$z=C$D,C$U=C$o),C$j<C$B&&(C$W=C$r,C$j=C$B,C$H=C$D,C$X=C$o)),C$m=C$F<=(C$l+C$j)/2?(C$Y=C$G-Math.atan2(C$U*C$_,C$z),C$c*C$_):(C$Y=C$G-Math.atan2(C$X*C$_,C$H),C$W*C$_)}var C$Y,C$u=Math.atan2(C$E,C$w)*C$T,C$s=C$t.arotation;180<(C$Y=(C$Y-C$u)*C$q.MathUtils.radDeg+C$C-C$s)?C$Y-=360:C$Y<-180&&(C$Y+=360),C$t.updateWorldTransformWith(C$y,C$g,C$s+C$Y*C$p,C$x,C$t.ascaleY,0,0),C$s=C$e.arotation,180<(C$m=((C$m+C$u)*C$q.MathUtils.radDeg-C$e.ashearX)*C$T+C$S-C$s)?C$m-=360:C$m<-180&&(C$m+=360),C$e.updateWorldTransformWith(C$w,C$E,C$s+C$m*C$p,C$e.ascaleX,C$e.ascaleY,C$e.ashearX,C$e.ashearY)}else C$e.updateWorldTransform()},C$q.IkConstraint=C$t}(C$t=C$t||{}),C$e=C$t=C$t||{},C$d=C$e.ConstraintData,C$V(C$L,C$d),C$e.IkConstraintData=C$L,function(C$q){function C$J(C$t,C$e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==C$t)throw new Error("data cannot be null.");if(null==C$e)throw new Error("skeleton cannot be null.");this.data=C$t,this.bones=new Array;for(var C$i=0,C$n=C$t.bones.length;C$i<C$n;C$i++)this.bones.push(C$e.findBone(C$t.bones[C$i].name));this.target=C$e.findSlot(C$t.target.name),this.position=C$t.position,this.spacing=C$t.spacing,this.rotateMix=C$t.rotateMix,this.translateMix=C$t.translateMix}C$J.prototype.isActive=function(){return this.active},C$J.prototype.apply=function(){this.update()},C$J.prototype.update=function(){var C$h=this.target.getAttachment();if(C$h instanceof C$q.PathAttachment){var C$u=this.rotateMix,C$_=this.translateMix,C$d=0<C$u;if(0<C$_||C$d){var C$f=this.data,C$p=C$f.spacingMode==C$q.SpacingMode.Percent,C$m=C$f.rotateMode,C$y=C$m==C$q.RotateMode.Tangent,C$g=C$m==C$q.RotateMode.ChainScale,C$v=this.bones.length,C$x=C$y?C$v:C$v+1,C$b=this.bones,C$A=C$q.Utils.setArraySize(this.spaces,C$x),C$C=null,C$S=this.spacing;if(C$g||!C$p){C$g&&(C$C=C$q.Utils.setArraySize(this.lengths,C$v));for(var C$T=C$f.spacingMode==C$q.SpacingMode.Length,C$t=0,C$w=C$x-1;C$t<C$w;){var C$E,C$e=(C$i=C$b[C$t]).data.length;C$e<C$J.epsilon?(C$g&&(C$C[C$t]=0),C$A[++C$t]=0):C$p?(C$g&&(C$r=C$e*C$i.a,C$s=C$e*C$i.c,C$E=Math.sqrt(C$r*C$r+C$s*C$s),C$C[C$t]=C$E),C$A[++C$t]=C$S):(C$r=C$e*C$i.a,C$s=C$e*C$i.c,C$E=Math.sqrt(C$r*C$r+C$s*C$s),C$g&&(C$C[C$t]=C$E),C$A[++C$t]=(C$T?C$e+C$S:C$S)*C$E/C$e)}}else for(C$t=1;C$t<C$x;C$t++)C$A[C$t]=C$S;var C$M=this.computeWorldPositions(C$h,C$x,C$y,C$f.positionMode==C$q.PositionMode.Percent,C$p),C$I=C$M[0],C$B=C$M[1],C$R=C$f.offsetRotation,C$P=!1;0==C$R?C$P=C$m==C$q.RotateMode.Chain:(C$P=!1,C$R*=0<(C$n=this.target.bone).a*C$n.d-C$n.b*C$n.c?C$q.MathUtils.degRad:-C$q.MathUtils.degRad);for(var C$i,C$t=0,C$n=3;C$t<C$v;C$t++,C$n+=3){(C$i=C$b[C$t]).worldX+=(C$I-C$i.worldX)*C$_,C$i.worldY+=(C$B-C$i.worldY)*C$_;var C$r,C$s,C$o,C$D,C$L,C$V,C$a,C$c,C$O,C$l,C$F=(C$r=C$M[C$n])-C$I,C$N=(C$s=C$M[C$n+1])-C$B;!C$g||0!=(C$o=C$C[C$t])&&(C$o=(Math.sqrt(C$F*C$F+C$N*C$N)/C$o-1)*C$u+1,C$i.a*=C$o,C$i.c*=C$o),C$I=C$r,C$B=C$s,C$d&&(C$o=C$i.a,C$D=C$i.b,C$L=C$i.c,C$V=C$i.d,C$c=C$a=C$l=0,C$l=C$y?C$M[C$n-1]:0==C$A[C$t+1]?C$M[C$n+2]:Math.atan2(C$N,C$F),C$l-=Math.atan2(C$L,C$o),C$P?(C$a=Math.cos(C$l),C$c=Math.sin(C$l),C$I+=((C$O=C$i.data.length)*(C$a*C$o-C$c*C$L)-C$F)*C$u,C$B+=(C$O*(C$c*C$o+C$a*C$L)-C$N)*C$u):C$l+=C$R,C$l>C$q.MathUtils.PI?C$l-=C$q.MathUtils.PI2:C$l<-C$q.MathUtils.PI&&(C$l+=C$q.MathUtils.PI2),C$l*=C$u,C$a=Math.cos(C$l),C$c=Math.sin(C$l),C$i.a=C$a*C$o-C$c*C$L,C$i.b=C$a*C$D-C$c*C$V,C$i.c=C$c*C$o+C$a*C$L,C$i.d=C$c*C$D+C$a*C$V),C$i.appliedValid=!1}}}},C$J.prototype.computeWorldPositions=function(C$t,C$h,C$u,C$_,C$d){var C$f=this.target,C$p=this.position,C$m=this.spaces,C$y=C$q.Utils.setArraySize(this.positions,3*C$h+2),C$e=null,C$g=C$t.closed,C$i=C$t.worldVerticesLength,C$v=C$i/6,C$x=C$J.NONE;if(!C$t.constantSpeed){var C$b=C$t.lengths,C$A=C$b[C$v-=C$g?1:2];if(C$_&&(C$p*=C$A),C$d)for(var C$n=1;C$n<C$h;C$n++)C$m[C$n]*=C$A;for(var C$e=C$q.Utils.setArraySize(this.world,8),C$n=0,C$C=0,C$r=0;C$n<C$h;C$n++,C$C+=3){var C$s=C$p+=C$H=C$m[C$n];if(C$g)(C$s%=C$A)<0&&(C$s+=C$A),C$r=0;else{if(C$s<0){C$x!=C$J.BEFORE&&(C$x=C$J.BEFORE,C$t.computeWorldVertices(C$f,2,4,C$e,0,2)),this.addBeforePosition(C$s,C$e,0,C$y,C$C);continue}if(C$A<C$s){C$x!=C$J.AFTER&&(C$x=C$J.AFTER,C$t.computeWorldVertices(C$f,C$i-6,4,C$e,0,2)),this.addAfterPosition(C$s-C$A,C$e,0,C$y,C$C);continue}}for(;;C$r++){var C$S=C$b[C$r];if(!(C$S<C$s)){0==C$r?C$s/=C$S:C$s=(C$s-(C$X=C$b[C$r-1]))/(C$S-C$X);break}}C$r!=C$x&&(C$x=C$r,C$g&&C$r==C$v?(C$t.computeWorldVertices(C$f,C$i-4,4,C$e,0,2),C$t.computeWorldVertices(C$f,0,4,C$e,4,2)):C$t.computeWorldVertices(C$f,6*C$r+2,8,C$e,0,2)),this.addCurvePosition(C$s,C$e[0],C$e[1],C$e[2],C$e[3],C$e[4],C$e[5],C$e[6],C$e[7],C$y,C$C,C$u||0<C$n&&0==C$H)}return C$y}C$g?(C$e=C$q.Utils.setArraySize(this.world,C$i+=2),C$t.computeWorldVertices(C$f,2,C$i-4,C$e,0,2),C$t.computeWorldVertices(C$f,0,2,C$e,C$i-4,2),C$e[C$i-2]=C$e[0],C$e[C$i-1]=C$e[1]):(C$v--,C$e=C$q.Utils.setArraySize(this.world,C$i-=4),C$t.computeWorldVertices(C$f,2,C$i,C$e,0,2));for(var C$T=C$q.Utils.setArraySize(this.curves,C$v),C$o=0,C$w=C$e[0],C$E=C$e[1],C$M=0,C$I=0,C$B=0,C$R=0,C$P=0,C$D=0,C$L=0,C$V=0,C$O=0,C$F=0,C$N=0,C$k=0,C$a=0,C$c=0,C$n=0,C$G=2;C$n<C$v;C$n++,C$G+=6)C$M=C$e[C$G],C$I=C$e[C$G+1],C$B=C$e[C$G+2],C$R=C$e[C$G+3],C$N=2*(C$L=.1875*(C$w-2*C$M+C$B))+(C$O=.09375*(3*(C$M-C$B)-C$w+(C$P=C$e[C$G+4]))),C$k=2*(C$V=.1875*(C$E-2*C$I+C$R))+(C$F=.09375*(3*(C$I-C$R)-C$E+(C$D=C$e[C$G+5]))),C$a=.75*(C$M-C$w)+C$L+.16666667*C$O,C$c=.75*(C$I-C$E)+C$V+.16666667*C$F,C$o+=Math.sqrt(C$a*C$a+C$c*C$c),C$a+=C$N,C$c+=C$k,C$N+=C$O,C$k+=C$F,C$o+=Math.sqrt(C$a*C$a+C$c*C$c),C$a+=C$N,C$c+=C$k,C$o+=Math.sqrt(C$a*C$a+C$c*C$c),C$a+=C$N+C$O,C$c+=C$k+C$F,C$o+=Math.sqrt(C$a*C$a+C$c*C$c),C$T[C$n]=C$o,C$w=C$P,C$E=C$D;if(C$p*=C$_?C$o:C$o/C$t.lengths[C$v-1],C$d)for(C$n=1;C$n<C$h;C$n++)C$m[C$n]*=C$o;for(var C$z=this.segments,C$U=0,C$n=0,C$C=0,C$r=0,C$W=0;C$n<C$h;C$n++,C$C+=3){var C$H,C$s=C$p+=C$H=C$m[C$n];if(C$g)(C$s%=C$o)<0&&(C$s+=C$o),C$r=0;else{if(C$s<0){this.addBeforePosition(C$s,C$e,0,C$y,C$C);continue}if(C$o<C$s){this.addAfterPosition(C$s-C$o,C$e,C$i-4,C$y,C$C);continue}}for(;;C$r++){var C$j=C$T[C$r];if(!(C$j<C$s)){0==C$r?C$s/=C$j:C$s=(C$s-(C$X=C$T[C$r-1]))/(C$j-C$X);break}}if(C$r!=C$x){var C$x=C$r,C$l=6*C$r,C$w=C$e[C$l],C$E=C$e[C$l+1],C$M=C$e[C$l+2],C$I=C$e[C$l+3],C$B=C$e[C$l+4],C$R=C$e[C$l+5],C$N=2*(C$L=.03*(C$w-2*C$M+C$B))+(C$O=.006*(3*(C$M-C$B)-C$w+(C$P=C$e[C$l+6]))),C$k=2*(C$V=.03*(C$E-2*C$I+C$R))+(C$F=.006*(3*(C$I-C$R)-C$E+(C$D=C$e[C$l+7]))),C$a=.3*(C$M-C$w)+C$L+.16666667*C$O,C$c=.3*(C$I-C$E)+C$V+.16666667*C$F,C$U=Math.sqrt(C$a*C$a+C$c*C$c);for(C$z[0]=C$U,C$l=1;C$l<8;C$l++)C$a+=C$N,C$c+=C$k,C$N+=C$O,C$k+=C$F,C$U+=Math.sqrt(C$a*C$a+C$c*C$c),C$z[C$l]=C$U;C$a+=C$N,C$c+=C$k,C$U+=Math.sqrt(C$a*C$a+C$c*C$c),C$z[8]=C$U,C$a+=C$N+C$O,C$c+=C$k+C$F,C$U+=Math.sqrt(C$a*C$a+C$c*C$c),C$z[9]=C$U,C$W=0}for(C$s*=C$U;;C$W++){var C$X,C$Y=C$z[C$W];if(!(C$Y<C$s)){0==C$W?C$s/=C$Y:C$s=C$W+(C$s-(C$X=C$z[C$W-1]))/(C$Y-C$X);break}}this.addCurvePosition(.1*C$s,C$w,C$E,C$M,C$I,C$B,C$R,C$P,C$D,C$y,C$C,C$u||0<C$n&&0==C$H)}return C$y},C$J.prototype.addBeforePosition=function(C$t,C$e,C$i,C$n,C$r){var C$s=C$e[C$i],C$o=C$e[C$i+1],C$a=C$e[C$i+2]-C$s,C$e=C$e[C$i+3]-C$o,C$i=Math.atan2(C$e,C$a);C$n[C$r]=C$s+C$t*Math.cos(C$i),C$n[C$r+1]=C$o+C$t*Math.sin(C$i),C$n[C$r+2]=C$i},C$J.prototype.addAfterPosition=function(C$t,C$e,C$i,C$n,C$r){var C$s=C$e[C$i+2],C$o=C$e[C$i+3],C$a=C$s-C$e[C$i],C$e=C$o-C$e[C$i+1],C$i=Math.atan2(C$e,C$a);C$n[C$r]=C$s+C$t*Math.cos(C$i),C$n[C$r+1]=C$o+C$t*Math.sin(C$i),C$n[C$r+2]=C$i},C$J.prototype.addCurvePosition=function(C$t,C$e,C$i,C$n,C$r,C$h,C$u,C$_,C$d,C$s,C$o,C$f){if(0==C$t||isNaN(C$t))return C$s[C$o]=C$e,C$s[C$o+1]=C$i,void(C$s[C$o+2]=Math.atan2(C$r-C$i,C$n-C$e));var C$p=C$t*C$t,C$m=C$p*C$t,C$a=1-C$t,C$y=C$a*C$a,C$c=C$y*C$a,C$g=C$a*C$t,C$l=3*C$g,C$a=C$a*C$l,C$l=C$l*C$t,C$_=C$e*C$c+C$n*C$a+C$h*C$l+C$_*C$m,C$c=C$i*C$c+C$r*C$a+C$u*C$l+C$d*C$m;C$s[C$o]=C$_,C$s[C$o+1]=C$c,C$f&&(C$s[C$o+2]=C$t<.001?Math.atan2(C$r-C$i,C$n-C$e):Math.atan2(C$c-(C$i*C$y+C$r*C$g*2+C$u*C$p),C$_-(C$e*C$y+C$n*C$g*2+C$h*C$p)))},C$J.NONE=-1,C$J.BEFORE=-2,C$J.AFTER=-3,C$J.epsilon=1e-5,C$q.PathConstraint=C$J}(C$t=C$t||{}),C$e=C$t=C$t||{},C$f=C$e.ConstraintData,C$V(C$O,C$f),C$n=C$O,C$e.PathConstraintData=C$n,(C$n=C$e.PositionMode||(C$e.PositionMode={}))[C$n.Fixed=0]="Fixed",C$n[C$n.Percent=1]="Percent",(C$n=C$e.SpacingMode||(C$e.SpacingMode={}))[C$n.Length=0]="Length",C$n[C$n.Fixed=1]="Fixed",C$n[C$n.Percent=2]="Percent",(C$n=C$e.RotateMode||(C$e.RotateMode={}))[C$n.Tangent=0]="Tangent",C$n[C$n.Chain=1]="Chain",C$n[C$n.ChainScale=2]="ChainScale",function(C$t){C$e.prototype.loaded=function(){var C$t,C$e=0;for(C$t in this.assets)C$e++;return C$e};var C$r=C$e;function C$e(C$t){this.toLoad=new Array,this.assets={},this.clientId=C$t}function C$i(C$t){void 0===C$t&&(C$t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=C$t}C$i.prototype.queueAsset=function(C$t,C$e,C$i){var C$n=this.clientAssets[C$t];return null==C$n&&(C$n=new C$r(C$t),this.clientAssets[C$t]=C$n),null!==C$e&&(C$n.textureLoader=C$e),C$n.toLoad.push(C$i),this.queuedAssets[C$i]!==C$i&&(this.queuedAssets[C$i]=C$i,!0)},C$i.prototype.loadText=function(C$t,C$e){var C$i,C$n=this;C$e=this.pathPrefix+C$e,this.queueAsset(C$t,null,C$e)&&((C$i=new XMLHttpRequest).onreadystatechange=function(){C$i.readyState==XMLHttpRequest.DONE&&(200<=C$i.status&&C$i.status<300?C$n.rawAssets[C$e]=C$i.responseText:C$n.errors[C$e]="Couldn't load text "+C$e+": status "+C$i.status+", "+C$i.responseText)},C$i.open("GET",C$e,!0),C$i.send())},C$i.prototype.loadJson=function(C$t,C$e){var C$i,C$n=this;C$e=this.pathPrefix+C$e,this.queueAsset(C$t,null,C$e)&&((C$i=new XMLHttpRequest).onreadystatechange=function(){C$i.readyState==XMLHttpRequest.DONE&&(200<=C$i.status&&C$i.status<300?C$n.rawAssets[C$e]=JSON.parse(C$i.responseText):C$n.errors[C$e]="Couldn't load text "+C$e+": status "+C$i.status+", "+C$i.responseText)},C$i.open("GET",C$e,!0),C$i.send())},C$i.prototype.loadTexture=function(C$t,C$e,C$i){var C$n,C$r=this;C$i=this.pathPrefix+C$i,this.queueAsset(C$t,C$e,C$i)&&((C$n=new Image).src=C$i,C$n.crossOrigin="anonymous",C$n.onload=function(C$t){C$r.rawAssets[C$i]=C$n},C$n.onerror=function(C$t){C$r.errors[C$i]="Couldn't load image "+C$i})},C$i.prototype.get=function(C$t,C$e){C$e=this.pathPrefix+C$e;C$t=this.clientAssets[C$t];return null==C$t||C$t.assets[C$e]},C$i.prototype.updateClientAssets=function(C$t){for(var C$e=0;C$e<C$t.toLoad.length;C$e++){var C$i=C$t.toLoad[C$e],C$n=C$t.assets[C$i];null!=C$n||null!=(C$n=this.rawAssets[C$i])&&(C$n instanceof HTMLImageElement?C$t.assets[C$i]=C$t.textureLoader(C$n):C$t.assets[C$i]=C$n)}},C$i.prototype.isLoadingComplete=function(C$t){C$t=this.clientAssets[C$t];return null==C$t||(this.updateClientAssets(C$t),C$t.toLoad.length==C$t.loaded())},C$i.prototype.dispose=function(){},C$i.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},C$i.prototype.getErrors=function(){return this.errors},C$t.SharedAssetManager=C$i}(C$t=C$t||{}),function(C$g){function C$t(C$t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==C$t)throw new Error("data cannot be null.");this.data=C$t,this.bones=new Array;for(var C$e=0;C$e<C$t.bones.length;C$e++){var C$i,C$n=C$t.bones[C$e],C$r=void 0;null==C$n.parent?C$r=new C$g.Bone(C$n,this,null):(C$i=this.bones[C$n.parent.index],C$r=new C$g.Bone(C$n,this,C$i),C$i.children.push(C$r)),this.bones.push(C$r)}this.slots=new Array,this.drawOrder=new Array;for(C$e=0;C$e<C$t.slots.length;C$e++){var C$s=C$t.slots[C$e],C$r=this.bones[C$s.boneData.index],C$s=new C$g.Slot(C$s,C$r);this.slots.push(C$s),this.drawOrder.push(C$s)}this.ikConstraints=new Array;for(C$e=0;C$e<C$t.ikConstraints.length;C$e++){var C$o=C$t.ikConstraints[C$e];this.ikConstraints.push(new C$g.IkConstraint(C$o,this))}this.transformConstraints=new Array;for(C$e=0;C$e<C$t.transformConstraints.length;C$e++){var C$a=C$t.transformConstraints[C$e];this.transformConstraints.push(new C$g.TransformConstraint(C$a,this))}this.pathConstraints=new Array;for(C$e=0;C$e<C$t.pathConstraints.length;C$e++){var C$c=C$t.pathConstraints[C$e];this.pathConstraints.push(new C$g.PathConstraint(C$c,this))}this.color=new C$g.Color(1,1,1,1),this.updateCache()}C$t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var C$t=this.bones,C$e=0,C$i=C$t.length;C$e<C$i;C$e++)(C$n=C$t[C$e]).sorted=C$n.data.skinRequired,C$n.active=!C$n.sorted;if(null!=this.skin)for(var C$h=this.skin.bones,C$e=0,C$i=this.skin.bones.length;C$e<C$i;C$e++)for(var C$n=this.bones[C$h[C$e].index];C$n.sorted=!1,C$n.active=!0,null!=(C$n=C$n.parent););var C$r=this.ikConstraints,C$s=this.transformConstraints,C$o=this.pathConstraints,C$a=C$r.length,C$u=C$s.length,C$_=C$o.length,C$d=C$a+C$u+C$_;C$t:for(C$e=0;C$e<C$d;C$e++){for(var C$c=0;C$c<C$a;C$c++)if((C$l=C$r[C$c]).data.order==C$e){this.sortIkConstraint(C$l);continue C$t}for(C$c=0;C$c<C$u;C$c++)if((C$l=C$s[C$c]).data.order==C$e){this.sortTransformConstraint(C$l);continue C$t}for(var C$l,C$c=0;C$c<C$_;C$c++)if((C$l=C$o[C$c]).data.order==C$e){this.sortPathConstraint(C$l);continue C$t}}for(C$e=0,C$i=C$t.length;C$e<C$i;C$e++)this.sortBone(C$t[C$e])},C$t.prototype.sortIkConstraint=function(C$t){var C$e,C$i,C$n;C$t.active=C$t.target.isActive()&&(!C$t.data.skinRequired||null!=this.skin&&C$g.Utils.contains(this.skin.constraints,C$t.data,!0)),C$t.active&&(C$e=C$t.target,this.sortBone(C$e),C$i=(C$e=C$t.bones)[0],this.sortBone(C$i),1<C$e.length&&(C$n=C$e[C$e.length-1],-1<this._updateCache.indexOf(C$n)||this.updateCacheReset.push(C$n)),this._updateCache.push(C$t),this.sortReset(C$i.children),C$e[C$e.length-1].sorted=!0)},C$t.prototype.sortPathConstraint=function(C$t){if(C$t.active=C$t.target.bone.isActive()&&(!C$t.data.skinRequired||null!=this.skin&&C$g.Utils.contains(this.skin.constraints,C$t.data,!0)),C$t.active){var C$e=C$t.target,C$i=C$e.data.index,C$n=C$e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,C$i,C$n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,C$i,C$n);for(var C$r=0,C$s=this.data.skins.length;C$r<C$s;C$r++)this.sortPathConstraintAttachment(this.data.skins[C$r],C$i,C$n);for(var C$e=C$e.getAttachment(),C$o=(C$e instanceof C$g.PathAttachment&&this.sortPathConstraintAttachmentWith(C$e,C$n),C$t.bones),C$a=C$o.length,C$r=0;C$r<C$a;C$r++)this.sortBone(C$o[C$r]);this._updateCache.push(C$t);for(C$r=0;C$r<C$a;C$r++)this.sortReset(C$o[C$r].children);for(C$r=0;C$r<C$a;C$r++)C$o[C$r].sorted=!0}},C$t.prototype.sortTransformConstraint=function(C$t){if(C$t.active=C$t.target.isActive()&&(!C$t.data.skinRequired||null!=this.skin&&C$g.Utils.contains(this.skin.constraints,C$t.data,!0)),C$t.active){this.sortBone(C$t.target);var C$e=C$t.bones,C$i=C$e.length;if(C$t.data.local)for(var C$n=0;C$n<C$i;C$n++){var C$r=C$e[C$n];this.sortBone(C$r.parent),-1<this._updateCache.indexOf(C$r)||this.updateCacheReset.push(C$r)}else for(C$n=0;C$n<C$i;C$n++)this.sortBone(C$e[C$n]);this._updateCache.push(C$t);for(var C$s=0;C$s<C$i;C$s++)this.sortReset(C$e[C$s].children);for(C$s=0;C$s<C$i;C$s++)C$e[C$s].sorted=!0}},C$t.prototype.sortPathConstraintAttachment=function(C$t,C$e,C$i){var C$n=C$t.attachments[C$e];if(C$n)for(var C$r in C$n)this.sortPathConstraintAttachmentWith(C$n[C$r],C$i)},C$t.prototype.sortPathConstraintAttachmentWith=function(C$t,C$e){if(C$t instanceof C$g.PathAttachment){var C$i=C$t.bones;if(null==C$i)this.sortBone(C$e);else for(var C$n=this.bones,C$r=0;C$r<C$i.length;)for(var C$s=C$i[C$r++],C$o=C$r+C$s;C$r<C$o;C$r++){var C$a=C$i[C$r];this.sortBone(C$n[C$a])}}},C$t.prototype.sortBone=function(C$t){var C$e;C$t.sorted||(null!=(C$e=C$t.parent)&&this.sortBone(C$e),C$t.sorted=!0,this._updateCache.push(C$t))},C$t.prototype.sortReset=function(C$t){for(var C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e];C$n.active&&(C$n.sorted&&this.sortReset(C$n.children),C$n.sorted=!1)}},C$t.prototype.updateWorldTransform=function(){for(var C$t=this.updateCacheReset,C$e=0,C$i=C$t.length;C$e<C$i;C$e++){var C$n=C$t[C$e];C$n.ax=C$n.x,C$n.ay=C$n.y,C$n.arotation=C$n.rotation,C$n.ascaleX=C$n.scaleX,C$n.ascaleY=C$n.scaleY,C$n.ashearX=C$n.shearX,C$n.ashearY=C$n.shearY,C$n.appliedValid=!0}for(var C$r=this._updateCache,C$e=0,C$i=C$r.length;C$e<C$i;C$e++)C$r[C$e].update()},C$t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},C$t.prototype.setBonesToSetupPose=function(){for(var C$t=this.bones,C$e=0,C$i=C$t.length;C$e<C$i;C$e++)C$t[C$e].setToSetupPose();for(var C$n=this.ikConstraints,C$e=0,C$i=C$n.length;C$e<C$i;C$e++)(C$a=C$n[C$e]).mix=C$a.data.mix,C$a.softness=C$a.data.softness,C$a.bendDirection=C$a.data.bendDirection,C$a.compress=C$a.data.compress,C$a.stretch=C$a.data.stretch;for(var C$r=this.transformConstraints,C$e=0,C$i=C$r.length;C$e<C$i;C$e++){var C$s=(C$a=C$r[C$e]).data;C$a.rotateMix=C$s.rotateMix,C$a.translateMix=C$s.translateMix,C$a.scaleMix=C$s.scaleMix,C$a.shearMix=C$s.shearMix}for(var C$o=this.pathConstraints,C$e=0,C$i=C$o.length;C$e<C$i;C$e++){var C$a,C$s=(C$a=C$o[C$e]).data;C$a.position=C$s.position,C$a.spacing=C$s.spacing,C$a.rotateMix=C$s.rotateMix,C$a.translateMix=C$s.translateMix}},C$t.prototype.setSlotsToSetupPose=function(){var C$t=this.slots;C$g.Utils.arrayCopy(C$t,0,this.drawOrder,0,C$t.length);for(var C$e=0,C$i=C$t.length;C$e<C$i;C$e++)C$t[C$e].setToSetupPose()},C$t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},C$t.prototype.findBone=function(C$t){if(null==C$t)throw new Error("boneName cannot be null.");for(var C$e=this.bones,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.data.name==C$t)return C$r}return null},C$t.prototype.findBoneIndex=function(C$t){if(null==C$t)throw new Error("boneName cannot be null.");for(var C$e=this.bones,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i].data.name==C$t)return C$i;return-1},C$t.prototype.findSlot=function(C$t){if(null==C$t)throw new Error("slotName cannot be null.");for(var C$e=this.slots,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.data.name==C$t)return C$r}return null},C$t.prototype.findSlotIndex=function(C$t){if(null==C$t)throw new Error("slotName cannot be null.");for(var C$e=this.slots,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i].data.name==C$t)return C$i;return-1},C$t.prototype.setSkinByName=function(C$t){var C$e=this.data.findSkin(C$t);if(null==C$e)throw new Error("Skin not found: "+C$t);this.setSkin(C$e)},C$t.prototype.setSkin=function(C$t){if(C$t!=this.skin){if(null!=C$t)if(null!=this.skin)C$t.attachAll(this,this.skin);else for(var C$e=this.slots,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i],C$s=C$r.data.attachmentName;null==C$s||null!=(C$s=C$t.getAttachment(C$i,C$s))&&C$r.setAttachment(C$s)}this.skin=C$t,this.updateCache()}},C$t.prototype.getAttachmentByName=function(C$t,C$e){return this.getAttachment(this.data.findSlotIndex(C$t),C$e)},C$t.prototype.getAttachment=function(C$t,C$e){if(null==C$e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var C$i=this.skin.getAttachment(C$t,C$e);if(null!=C$i)return C$i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(C$t,C$e):null},C$t.prototype.setAttachment=function(C$t,C$e){if(null==C$t)throw new Error("slotName cannot be null.");for(var C$i=this.slots,C$n=0,C$r=C$i.length;C$n<C$r;C$n++){var C$s=C$i[C$n];if(C$s.data.name==C$t){var C$o=null;if(null!=C$e&&null==(C$o=this.getAttachment(C$n,C$e)))throw new Error("Attachment not found: "+C$e+", for slot: "+C$t);return void C$s.setAttachment(C$o)}}throw new Error("Slot not found: "+C$t)},C$t.prototype.findIkConstraint=function(C$t){if(null==C$t)throw new Error("constraintName cannot be null.");for(var C$e=this.ikConstraints,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.data.name==C$t)return C$r}return null},C$t.prototype.findTransformConstraint=function(C$t){if(null==C$t)throw new Error("constraintName cannot be null.");for(var C$e=this.transformConstraints,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.data.name==C$t)return C$r}return null},C$t.prototype.findPathConstraint=function(C$t){if(null==C$t)throw new Error("constraintName cannot be null.");for(var C$e=this.pathConstraints,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.data.name==C$t)return C$r}return null},C$t.prototype.getBounds=function(C$t,C$h,C$e){if(void 0===C$e&&(C$e=new Array(2)),null==C$t)throw new Error("offset cannot be null.");if(null==C$h)throw new Error("size cannot be null.");for(var C$u=this.drawOrder,C$i=Number.POSITIVE_INFINITY,C$n=Number.POSITIVE_INFINITY,C$_=Number.NEGATIVE_INFINITY,C$d=Number.NEGATIVE_INFINITY,C$r=0,C$f=C$u.length;C$r<C$f;C$r++){var C$s=C$u[C$r];if(C$s.bone.active){var C$o=0,C$a=null,C$c=C$s.getAttachment();if(C$c instanceof C$g.RegionAttachment?(C$a=C$g.Utils.setArraySize(C$e,C$o=8,0),C$c.computeWorldVertices(C$s.bone,C$a,0,2)):C$c instanceof C$g.MeshAttachment&&(C$o=(C$c=C$c).worldVerticesLength,C$a=C$g.Utils.setArraySize(C$e,C$o,0),C$c.computeWorldVertices(C$s,0,C$o,C$a,0,2)),null!=C$a)for(var C$l=0,C$p=C$a.length;C$l<C$p;C$l+=2)var C$m=C$a[C$l],C$y=C$a[C$l+1],C$i=Math.min(C$i,C$m),C$n=Math.min(C$n,C$y),C$_=Math.max(C$_,C$m),C$d=Math.max(C$d,C$y)}}C$t.set(C$i,C$n),C$h.set(C$_-C$i,C$d-C$n)},C$t.prototype.update=function(C$t){this.time+=C$t},C$g.Skeleton=C$t}(C$t=C$t||{});var C$H=C$t=C$t||{},C$e=(C$j.prototype.readSkeletonData=function(C$h){for(var C$t=this.scale,C$e=new C$H.SkeletonData,C$i=(C$e.name="",new C$F(C$h)),C$u=(C$e.hash=C$i.readString(),C$e.version=C$i.readString(),C$e.x=C$i.readFloat(),C$e.y=C$i.readFloat(),C$e.width=C$i.readFloat(),C$e.height=C$i.readFloat(),C$i.readBoolean()),C$n=(C$u&&(C$e.fps=C$i.readFloat(),C$e.imagesPath=C$i.readString(),C$e.audioPath=C$i.readString()),0),C$n=C$i.readInt(!0),C$r=0;C$r<C$n;C$r++)C$i.strings.push(C$i.readString());C$n=C$i.readInt(!0);for(C$r=0;C$r<C$n;C$r++){var C$_=C$i.readString(),C$d=0==C$r?null:C$e.bones[C$i.readInt(!0)];(C$s=new C$H.BoneData(C$r,C$_,C$d)).rotation=C$i.readFloat(),C$s.x=C$i.readFloat()*C$t,C$s.y=C$i.readFloat()*C$t,C$s.scaleX=C$i.readFloat(),C$s.scaleY=C$i.readFloat(),C$s.shearX=C$i.readFloat(),C$s.shearY=C$i.readFloat(),C$s.length=C$i.readFloat()*C$t,C$s.transformMode=C$j.TransformModeValues[C$i.readInt(!0)],C$s.skinRequired=C$i.readBoolean(),C$u&&C$H.Color.rgba8888ToColor(C$s.color,C$i.readInt32()),C$e.bones.push(C$s)}C$n=C$i.readInt(!0);for(C$r=0;C$r<C$n;C$r++){var C$f=C$i.readString(),C$p=C$e.bones[C$i.readInt(!0)],C$s=new C$H.SlotData(C$r,C$f,C$p),C$f=(C$H.Color.rgba8888ToColor(C$s.color,C$i.readInt32()),C$i.readInt32());-1!=C$f&&C$H.Color.rgb888ToColor(C$s.darkColor=new C$H.Color,C$f),C$s.attachmentName=C$i.readStringRef(),C$s.blendMode=C$j.BlendModeValues[C$i.readInt(!0)],C$e.slots.push(C$s)}C$n=C$i.readInt(!0);for(var C$r=0,C$o=void 0;C$r<C$n;C$r++){(C$s=new C$H.IkConstraintData(C$i.readString())).order=C$i.readInt(!0),C$s.skinRequired=C$i.readBoolean(),C$o=C$i.readInt(!0);for(var C$a=0;C$a<C$o;C$a++)C$s.bones.push(C$e.bones[C$i.readInt(!0)]);C$s.target=C$e.bones[C$i.readInt(!0)],C$s.mix=C$i.readFloat(),C$s.softness=C$i.readFloat()*C$t,C$s.bendDirection=C$i.readByte(),C$s.compress=C$i.readBoolean(),C$s.stretch=C$i.readBoolean(),C$s.uniform=C$i.readBoolean(),C$e.ikConstraints.push(C$s)}C$n=C$i.readInt(!0);for(C$r=0,C$o=void 0;C$r<C$n;C$r++){(C$s=new C$H.TransformConstraintData(C$i.readString())).order=C$i.readInt(!0),C$s.skinRequired=C$i.readBoolean(),C$o=C$i.readInt(!0);for(C$a=0;C$a<C$o;C$a++)C$s.bones.push(C$e.bones[C$i.readInt(!0)]);C$s.target=C$e.bones[C$i.readInt(!0)],C$s.local=C$i.readBoolean(),C$s.relative=C$i.readBoolean(),C$s.offsetRotation=C$i.readFloat(),C$s.offsetX=C$i.readFloat()*C$t,C$s.offsetY=C$i.readFloat()*C$t,C$s.offsetScaleX=C$i.readFloat(),C$s.offsetScaleY=C$i.readFloat(),C$s.offsetShearY=C$i.readFloat(),C$s.rotateMix=C$i.readFloat(),C$s.translateMix=C$i.readFloat(),C$s.scaleMix=C$i.readFloat(),C$s.shearMix=C$i.readFloat(),C$e.transformConstraints.push(C$s)}C$n=C$i.readInt(!0);for(C$r=0,C$o=void 0;C$r<C$n;C$r++){(C$s=new C$H.PathConstraintData(C$i.readString())).order=C$i.readInt(!0),C$s.skinRequired=C$i.readBoolean(),C$o=C$i.readInt(!0);for(C$a=0;C$a<C$o;C$a++)C$s.bones.push(C$e.bones[C$i.readInt(!0)]);C$s.target=C$e.slots[C$i.readInt(!0)],C$s.positionMode=C$j.PositionModeValues[C$i.readInt(!0)],C$s.spacingMode=C$j.SpacingModeValues[C$i.readInt(!0)],C$s.rotateMode=C$j.RotateModeValues[C$i.readInt(!0)],C$s.offsetRotation=C$i.readFloat(),C$s.position=C$i.readFloat(),C$s.positionMode==C$H.PositionMode.Fixed&&(C$s.position*=C$t),C$s.spacing=C$i.readFloat(),C$s.spacingMode!=C$H.SpacingMode.Length&&C$s.spacingMode!=C$H.SpacingMode.Fixed||(C$s.spacing*=C$t),C$s.rotateMix=C$i.readFloat(),C$s.translateMix=C$i.readFloat(),C$e.pathConstraints.push(C$s)}var C$h=this.readSkin(C$i,C$e,!0,C$u),C$r=(null!=C$h&&(C$e.defaultSkin=C$h,C$e.skins.push(C$h)),C$e.skins.length);for(C$H.Utils.setArraySize(C$e.skins,C$n=C$r+C$i.readInt(!0));C$r<C$n;C$r++)C$e.skins[C$r]=this.readSkin(C$i,C$e,!1,C$u);C$n=this.linkedMeshes.length;for(C$r=0;C$r<C$n;C$r++){var C$c=this.linkedMeshes[C$r],C$l=null==C$c.skin?C$e.defaultSkin:C$e.findSkin(C$c.skin);if(null==C$l)throw new Error("Skin not found: "+C$c.skin);C$l=C$l.getAttachment(C$c.slotIndex,C$c.parent);if(null==C$l)throw new Error("Parent mesh not found: "+C$c.parent);C$c.mesh.deformAttachment=C$c.inheritDeform?C$l:C$c.mesh,C$c.mesh.setParentMesh(C$l),C$c.mesh.updateUVs()}this.linkedMeshes.length=0,C$n=C$i.readInt(!0);for(C$r=0;C$r<C$n;C$r++)(C$s=new C$H.EventData(C$i.readStringRef())).intValue=C$i.readInt(!1),C$s.floatValue=C$i.readFloat(),C$s.stringValue=C$i.readString(),C$s.audioPath=C$i.readString(),null!=C$s.audioPath&&(C$s.volume=C$i.readFloat(),C$s.balance=C$i.readFloat()),C$e.events.push(C$s);C$n=C$i.readInt(!0);for(C$r=0;C$r<C$n;C$r++)C$e.animations.push(this.readAnimation(C$i,C$i.readString(),C$e));return C$e},C$j.prototype.readSkin=function(C$t,C$e,C$h,C$u){var C$i=null,C$n=0;if(C$h){if(0==(C$n=C$t.readInt(!0)))return null;C$i=new C$H.Skin("default")}else{(C$i=new C$H.Skin(C$t.readStringRef())).bones.length=C$t.readInt(!0);for(var C$r=0,C$s=C$i.bones.length;C$r<C$s;C$r++)C$i.bones[C$r]=C$e.bones[C$t.readInt(!0)];for(C$r=0,C$s=C$t.readInt(!0);C$r<C$s;C$r++)C$i.constraints.push(C$e.ikConstraints[C$t.readInt(!0)]);for(C$r=0,C$s=C$t.readInt(!0);C$r<C$s;C$r++)C$i.constraints.push(C$e.transformConstraints[C$t.readInt(!0)]);for(C$r=0,C$s=C$t.readInt(!0);C$r<C$s;C$r++)C$i.constraints.push(C$e.pathConstraints[C$t.readInt(!0)]);C$n=C$t.readInt(!0)}for(C$r=0;C$r<C$n;C$r++)for(var C$o=C$t.readInt(!0),C$a=0,C$_=C$t.readInt(!0);C$a<C$_;C$a++){var C$c=C$t.readStringRef(),C$l=this.readAttachment(C$t,C$e,C$i,C$o,C$c,C$u);null!=C$l&&C$i.setAttachment(C$o,C$c,C$l)}return C$i},C$j.prototype.readAttachment=function(C$t,C$h,C$u,C$_,C$d,C$e){var C$i=this.scale,C$n=C$t.readStringRef(),C$d=(null==C$n&&(C$n=C$d),C$t.readByte());switch(C$j.AttachmentTypeValues[C$d]){case C$H.AttachmentType.Region:var C$r=C$t.readStringRef(),C$f=C$t.readFloat(),C$p=C$t.readFloat(),C$m=C$t.readFloat(),C$y=C$t.readFloat(),C$s=C$t.readFloat(),C$g=C$t.readFloat(),C$o=C$t.readFloat(),C$v=C$t.readInt32(),C$a=(null==C$r&&(C$r=C$n),this.attachmentLoader.newRegionAttachment(C$u,C$n,C$r));return null==C$a?null:(C$a.path=C$r,C$a.x=C$p*C$i,C$a.y=C$m*C$i,C$a.scaleX=C$y,C$a.scaleY=C$s,C$a.rotation=C$f,C$a.width=C$g*C$i,C$a.height=C$o*C$i,C$H.Color.rgba8888ToColor(C$a.color,C$v),C$a.updateOffset(),C$a);case C$H.AttachmentType.BoundingBox:var C$c=C$t.readInt(!0),C$x=this.readVertices(C$t,C$c),C$v=C$e?C$t.readInt32():0,C$y=this.attachmentLoader.newBoundingBoxAttachment(C$u,C$n);return null==C$y?null:(C$y.worldVerticesLength=C$c<<1,C$y.vertices=C$x.vertices,C$y.bones=C$x.bones,C$e&&C$H.Color.rgba8888ToColor(C$y.color,C$v),C$y);case C$H.AttachmentType.Mesh:var C$r=C$t.readStringRef(),C$v=C$t.readInt32(),C$c=C$t.readInt(!0),C$s=this.readFloatArray(C$t,C$c<<1,1),C$a=this.readShortArray(C$t),C$x=this.readVertices(C$t,C$c),C$y=C$t.readInt(!0),C$b=null,C$g=0,C$o=0;return C$e&&(C$b=this.readShortArray(C$t),C$g=C$t.readFloat(),C$o=C$t.readFloat()),null==C$r&&(C$r=C$n),null==(C$l=this.attachmentLoader.newMeshAttachment(C$u,C$n,C$r))?null:(C$l.path=C$r,C$H.Color.rgba8888ToColor(C$l.color,C$v),C$l.bones=C$x.bones,C$l.vertices=C$x.vertices,C$l.worldVerticesLength=C$c<<1,C$l.triangles=C$a,C$l.regionUVs=C$s,C$l.updateUVs(),C$l.hullLength=C$y<<1,C$e&&(C$l.edges=C$b,C$l.width=C$g*C$i,C$l.height=C$o*C$i),C$l);case C$H.AttachmentType.LinkedMesh:var C$l,C$r=C$t.readStringRef(),C$v=C$t.readInt32(),C$a=C$t.readStringRef(),C$s=C$t.readStringRef(),C$y=C$t.readBoolean(),C$g=0,C$o=0;return C$e&&(C$g=C$t.readFloat(),C$o=C$t.readFloat()),null==C$r&&(C$r=C$n),null==(C$l=this.attachmentLoader.newMeshAttachment(C$u,C$n,C$r))?null:(C$l.path=C$r,C$H.Color.rgba8888ToColor(C$l.color,C$v),C$e&&(C$l.width=C$g*C$i,C$l.height=C$o*C$i),this.linkedMeshes.push(new C$k(C$l,C$a,C$_,C$s,C$y)),C$l);case C$H.AttachmentType.Path:for(var C$b=C$t.readBoolean(),C$g=C$t.readBoolean(),C$c=C$t.readInt(!0),C$x=this.readVertices(C$t,C$c),C$A=C$H.Utils.newArray(C$c/3,0),C$C=0,C$S=C$A.length;C$C<C$S;C$C++)C$A[C$C]=C$t.readFloat()*C$i;C$v=C$e?C$t.readInt32():0;return null==(C$r=this.attachmentLoader.newPathAttachment(C$u,C$n))?null:(C$r.closed=C$b,C$r.constantSpeed=C$g,C$r.worldVerticesLength=C$c<<1,C$r.vertices=C$x.vertices,C$r.bones=C$x.bones,C$r.lengths=C$A,C$e&&C$H.Color.rgba8888ToColor(C$r.color,C$v),C$r);case C$H.AttachmentType.Point:C$f=C$t.readFloat(),C$p=C$t.readFloat(),C$m=C$t.readFloat(),C$v=C$e?C$t.readInt32():0,C$o=this.attachmentLoader.newPointAttachment(C$u,C$n);return null==C$o?null:(C$o.x=C$p*C$i,C$o.y=C$m*C$i,C$o.rotation=C$f,C$e&&C$H.Color.rgba8888ToColor(C$o.color,C$v),C$o);case C$H.AttachmentType.Clipping:C$a=C$t.readInt(!0),C$c=C$t.readInt(!0),C$x=this.readVertices(C$t,C$c),C$v=C$e?C$t.readInt32():0,C$s=this.attachmentLoader.newClippingAttachment(C$u,C$n);return null==C$s?null:(C$s.endSlot=C$h.slots[C$a],C$s.worldVerticesLength=C$c<<1,C$s.vertices=C$x.vertices,C$s.bones=C$x.bones,C$e&&C$H.Color.rgba8888ToColor(C$s.color,C$v),C$s)}return null},C$j.prototype.readVertices=function(C$t,C$e){var C$i=C$e<<1,C$n=new C$G,C$r=this.scale;if(!C$t.readBoolean())return C$n.vertices=this.readFloatArray(C$t,C$i,C$r),C$n;for(var C$s=new Array,C$o=new Array,C$a=0;C$a<C$e;C$a++){var C$c=C$t.readInt(!0);C$o.push(C$c);for(var C$l=0;C$l<C$c;C$l++)C$o.push(C$t.readInt(!0)),C$s.push(C$t.readFloat()*C$r),C$s.push(C$t.readFloat()*C$r),C$s.push(C$t.readFloat())}return C$n.vertices=C$H.Utils.toFloatArray(C$s),C$n.bones=C$o,C$n},C$j.prototype.readFloatArray=function(C$t,C$e,C$i){var C$n=new Array(C$e);if(1==C$i)for(var C$r=0;C$r<C$e;C$r++)C$n[C$r]=C$t.readFloat();else for(C$r=0;C$r<C$e;C$r++)C$n[C$r]=C$t.readFloat()*C$i;return C$n},C$j.prototype.readShortArray=function(C$t){for(var C$e=C$t.readInt(!0),C$i=new Array(C$e),C$n=0;C$n<C$e;C$n++)C$i[C$n]=C$t.readShort();return C$i},C$j.prototype.readAnimation=function(C$t,C$h,C$u){for(var C$e=new Array,C$_=this.scale,C$i=0,C$d=new C$H.Color,C$f=new C$H.Color,C$n=0,C$r=C$t.readInt(!0);C$n<C$r;C$n++)for(var C$p=C$t.readInt(!0),C$s=0,C$m=C$t.readInt(!0);C$s<C$m;C$s++){var C$y=C$t.readByte(),C$o=C$t.readInt(!0);switch(C$y){case C$j.SLOT_ATTACHMENT:(C$c=new C$H.AttachmentTimeline(C$o)).slotIndex=C$p;for(var C$a=0;C$a<C$o;C$a++)C$c.setFrame(C$a,C$t.readFloat(),C$t.readStringRef());C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[C$o-1]);break;case C$j.SLOT_COLOR:(C$c=new C$H.ColorTimeline(C$o)).slotIndex=C$p;for(C$a=0;C$a<C$o;C$a++){var C$g=C$t.readFloat();C$H.Color.rgba8888ToColor(C$d,C$t.readInt32()),C$c.setFrame(C$a,C$g,C$d.r,C$d.g,C$d.b,C$d.a),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c)}C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.ColorTimeline.ENTRIES]);break;case C$j.SLOT_TWO_COLOR:(C$c=new C$H.TwoColorTimeline(C$o)).slotIndex=C$p;for(C$a=0;C$a<C$o;C$a++){C$g=C$t.readFloat();C$H.Color.rgba8888ToColor(C$d,C$t.readInt32()),C$H.Color.rgb888ToColor(C$f,C$t.readInt32()),C$c.setFrame(C$a,C$g,C$d.r,C$d.g,C$d.b,C$d.a,C$f.r,C$f.g,C$f.b),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c)}C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.TwoColorTimeline.ENTRIES])}}for(C$n=0,C$r=C$t.readInt(!0);C$n<C$r;C$n++)for(var C$v=C$t.readInt(!0),C$s=0,C$m=C$t.readInt(!0);C$s<C$m;C$s++){C$y=C$t.readByte(),C$o=C$t.readInt(!0);switch(C$y){case C$j.BONE_ROTATE:(C$c=new C$H.RotateTimeline(C$o)).boneIndex=C$v;for(C$a=0;C$a<C$o;C$a++)C$c.setFrame(C$a,C$t.readFloat(),C$t.readFloat()),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c);C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.RotateTimeline.ENTRIES]);break;case C$j.BONE_TRANSLATE:case C$j.BONE_SCALE:case C$j.BONE_SHEAR:var C$c=void 0,C$x=1;C$y==C$j.BONE_SCALE?C$c=new C$H.ScaleTimeline(C$o):C$y==C$j.BONE_SHEAR?C$c=new C$H.ShearTimeline(C$o):(C$c=new C$H.TranslateTimeline(C$o),C$x=C$_),C$c.boneIndex=C$v;for(C$a=0;C$a<C$o;C$a++)C$c.setFrame(C$a,C$t.readFloat(),C$t.readFloat()*C$x,C$t.readFloat()*C$x),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c);C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.TranslateTimeline.ENTRIES])}}for(C$n=0,C$r=C$t.readInt(!0);C$n<C$r;C$n++){var C$b=C$t.readInt(!0),C$o=C$t.readInt(!0);(C$c=new C$H.IkConstraintTimeline(C$o)).ikConstraintIndex=C$b;for(C$a=0;C$a<C$o;C$a++)C$c.setFrame(C$a,C$t.readFloat(),C$t.readFloat(),C$t.readFloat()*C$_,C$t.readByte(),C$t.readBoolean(),C$t.readBoolean()),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c);C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.IkConstraintTimeline.ENTRIES])}for(C$n=0,C$r=C$t.readInt(!0);C$n<C$r;C$n++){C$b=C$t.readInt(!0),C$o=C$t.readInt(!0);(C$c=new C$H.TransformConstraintTimeline(C$o)).transformConstraintIndex=C$b;for(C$a=0;C$a<C$o;C$a++)C$c.setFrame(C$a,C$t.readFloat(),C$t.readFloat(),C$t.readFloat(),C$t.readFloat(),C$t.readFloat()),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c);C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.TransformConstraintTimeline.ENTRIES])}for(C$n=0,C$r=C$t.readInt(!0);C$n<C$r;C$n++)for(var C$b=C$t.readInt(!0),C$A=C$u.pathConstraints[C$b],C$s=0,C$m=C$t.readInt(!0);C$s<C$m;C$s++){C$y=C$t.readByte(),C$o=C$t.readInt(!0);switch(C$y){case C$j.PATH_POSITION:case C$j.PATH_SPACING:var C$c=void 0,C$x=1;C$y==C$j.PATH_SPACING?(C$c=new C$H.PathConstraintSpacingTimeline(C$o),C$A.spacingMode!=C$H.SpacingMode.Length&&C$A.spacingMode!=C$H.SpacingMode.Fixed||(C$x=C$_)):(C$c=new C$H.PathConstraintPositionTimeline(C$o),C$A.positionMode==C$H.PositionMode.Fixed&&(C$x=C$_)),C$c.pathConstraintIndex=C$b;for(C$a=0;C$a<C$o;C$a++)C$c.setFrame(C$a,C$t.readFloat(),C$t.readFloat()*C$x),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c);C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.PathConstraintPositionTimeline.ENTRIES]);break;case C$j.PATH_MIX:(C$c=new C$H.PathConstraintMixTimeline(C$o)).pathConstraintIndex=C$b;for(C$a=0;C$a<C$o;C$a++)C$c.setFrame(C$a,C$t.readFloat(),C$t.readFloat(),C$t.readFloat()),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c);C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[(C$o-1)*C$H.PathConstraintMixTimeline.ENTRIES])}}for(C$n=0,C$r=C$t.readInt(!0);C$n<C$r;C$n++)for(var C$C=C$u.skins[C$t.readInt(!0)],C$s=0,C$m=C$t.readInt(!0);C$s<C$m;C$s++)for(var C$p=C$t.readInt(!0),C$S=0,C$T=C$t.readInt(!0);C$S<C$T;C$S++){var C$w=C$C.getAttachment(C$p,C$t.readStringRef()),C$E=null!=C$w.bones,C$M=C$w.vertices,C$I=C$E?C$M.length/3*2:C$M.length,C$o=C$t.readInt(!0);(C$c=new C$H.DeformTimeline(C$o)).slotIndex=C$p,C$c.attachment=C$w;for(C$a=0;C$a<C$o;C$a++){var C$g=C$t.readFloat(),C$B=void 0,C$R=C$t.readInt(!0);if(0==C$R)C$B=C$E?C$H.Utils.newFloatArray(C$I):C$M;else{var C$B=C$H.Utils.newFloatArray(C$I),C$P=C$t.readInt(!0);if(C$R+=C$P,1==C$_)for(var C$l=C$P;C$l<C$R;C$l++)C$B[C$l]=C$t.readFloat();else for(C$l=C$P;C$l<C$R;C$l++)C$B[C$l]=C$t.readFloat()*C$_;if(!C$E)for(var C$l=0,C$D=C$B.length;C$l<C$D;C$l++)C$B[C$l]+=C$M[C$l]}C$c.setFrame(C$a,C$g,C$B),C$a<C$o-1&&this.readCurve(C$t,C$a,C$c)}C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[C$o-1])}var C$L=C$t.readInt(!0);if(0<C$L){for(var C$c=new C$H.DrawOrderTimeline(C$L),C$V=C$u.slots.length,C$n=0;C$n<C$L;C$n++){for(var C$g=C$t.readFloat(),C$O=C$t.readInt(!0),C$F=C$H.Utils.newArray(C$V,0),C$s=C$V-1;0<=C$s;C$s--)C$F[C$s]=-1;for(var C$N=C$H.Utils.newArray(C$V-C$O,0),C$k=0,C$G=0,C$s=0;C$s<C$O;C$s++){for(C$p=C$t.readInt(!0);C$k!=C$p;)C$N[C$G++]=C$k++;C$F[C$k+C$t.readInt(!0)]=C$k++}for(;C$k<C$V;)C$N[C$G++]=C$k++;for(C$s=C$V-1;0<=C$s;C$s--)-1==C$F[C$s]&&(C$F[C$s]=C$N[--C$G]);C$c.setFrame(C$n,C$g,C$F)}C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[C$L-1])}var C$z=C$t.readInt(!0);if(0<C$z){for(C$c=new C$H.EventTimeline(C$z),C$n=0;C$n<C$z;C$n++){var C$g=C$t.readFloat(),C$U=C$u.events[C$t.readInt(!0)],C$W=new C$H.Event(C$g,C$U);C$W.intValue=C$t.readInt(!1),C$W.floatValue=C$t.readFloat(),C$W.stringValue=C$t.readBoolean()?C$t.readString():C$U.stringValue,null!=C$W.data.audioPath&&(C$W.volume=C$t.readFloat(),C$W.balance=C$t.readFloat()),C$c.setFrame(C$n,C$W)}C$e.push(C$c),C$i=Math.max(C$i,C$c.frames[C$z-1])}return new C$H.Animation(C$h,C$e,C$i)},C$j.prototype.readCurve=function(C$t,C$e,C$i){switch(C$t.readByte()){case C$j.CURVE_STEPPED:C$i.setStepped(C$e);break;case C$j.CURVE_BEZIER:this.setCurve(C$i,C$e,C$t.readFloat(),C$t.readFloat(),C$t.readFloat(),C$t.readFloat())}},C$j.prototype.setCurve=function(C$t,C$e,C$i,C$n,C$r,C$s){C$t.setCurve(C$e,C$i,C$n,C$r,C$s)},C$j.AttachmentTypeValues=[0,1,2,3,4,5,6],C$j.TransformModeValues=[C$H.TransformMode.Normal,C$H.TransformMode.OnlyTranslation,C$H.TransformMode.NoRotationOrReflection,C$H.TransformMode.NoScale,C$H.TransformMode.NoScaleOrReflection],C$j.PositionModeValues=[C$H.PositionMode.Fixed,C$H.PositionMode.Percent],C$j.SpacingModeValues=[C$H.SpacingMode.Length,C$H.SpacingMode.Fixed,C$H.SpacingMode.Percent],C$j.RotateModeValues=[C$H.RotateMode.Tangent,C$H.RotateMode.Chain,C$H.RotateMode.ChainScale],C$j.BlendModeValues=[C$H.BlendMode.Normal,C$H.BlendMode.Additive,C$H.BlendMode.Multiply,C$H.BlendMode.Screen],C$j.BONE_ROTATE=0,C$j.BONE_TRANSLATE=1,C$j.BONE_SCALE=2,C$j.BONE_SHEAR=3,C$j.SLOT_ATTACHMENT=0,C$j.SLOT_COLOR=1,C$j.SLOT_TWO_COLOR=2,C$j.PATH_POSITION=0,C$j.PATH_SPACING=1,C$j.PATH_MIX=2,C$j.CURVE_LINEAR=0,C$j.CURVE_STEPPED=1,C$j.CURVE_BEZIER=2,C$j);function C$j(C$t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=C$t}C$H.SkeletonBinary=C$e,C$N.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},C$N.prototype.readShort=function(){var C$t=this.buffer.getInt16(this.index);return this.index+=2,C$t},C$N.prototype.readInt32=function(){var C$t=this.buffer.getInt32(this.index);return this.index+=4,C$t},C$N.prototype.readInt=function(C$t){var C$e=this.readByte(),C$i=127&C$e;return 0!=(128&C$e)&&(C$i|=(127&(C$e=this.readByte()))<<7,0!=(128&C$e)&&(C$i|=(127&(C$e=this.readByte()))<<14,0!=(128&C$e)&&(C$i|=(127&(C$e=this.readByte()))<<21,0!=(128&C$e)&&(C$i|=(127&this.readByte())<<28)))),C$t?C$i:C$i>>>1^-(1&C$i)},C$N.prototype.readStringRef=function(){var C$t=this.readInt(!0);return 0==C$t?null:this.strings[C$t-1]},C$N.prototype.readString=function(){var C$t=this.readInt(!0);switch(C$t){case 0:return null;case 1:return""}C$t--;for(var C$e="",C$i=0;C$i<C$t;){var C$n=this.readByte();switch(C$n>>4){case 12:case 13:C$e+=String.fromCharCode((31&C$n)<<6|63&this.readByte()),C$i+=2;break;case 14:C$e+=String.fromCharCode((15&C$n)<<12|(63&this.readByte())<<6|63&this.readByte()),C$i+=3;break;default:C$e+=String.fromCharCode(C$n),C$i++}}return C$e},C$N.prototype.readFloat=function(){var C$t=this.buffer.getFloat32(this.index);return this.index+=4,C$t},C$N.prototype.readBoolean=function(){return 0!=this.readByte()};var C$F=C$N;function C$N(C$t,C$e,C$i,C$n){void 0===C$e&&(C$e=new Array),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=new DataView(C$t.buffer)),this.strings=C$e,this.index=C$i,this.buffer=C$n}var C$k=function(C$t,C$e,C$i,C$n,C$r){this.mesh=C$t,this.skin=C$e,this.slotIndex=C$i,this.parent=C$n,this.inheritDeform=C$r},C$G=function(C$t,C$e){void 0===C$e&&(C$e=null),this.bones=C$t=void 0===C$t?null:C$t,this.vertices=C$e};function C$i(C$t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==C$t)throw new Error("name cannot be null.");this.name=C$t}!function(C$u){function C$t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new C$u.Pool(function(){return C$u.Utils.newFloatArray(16)})}C$t.prototype.update=function(C$t,C$e){if(null==C$t)throw new Error("skeleton cannot be null.");var C$i=this.boundingBoxes,C$n=this.polygons,C$r=this.polygonPool,C$s=C$t.slots,C$h=C$s.length;C$i.length=0,C$r.freeAll(C$n);for(var C$o=C$n.length=0;C$o<C$h;C$o++){var C$a,C$c,C$l=C$s[C$o];C$l.bone.active&&((C$a=C$l.getAttachment())instanceof C$u.BoundingBoxAttachment&&(C$i.push(C$a=C$a),(C$c=C$r.obtain()).length!=C$a.worldVerticesLength&&(C$c=C$u.Utils.newFloatArray(C$a.worldVerticesLength)),C$n.push(C$c),C$a.computeWorldVertices(C$l,0,C$a.worldVerticesLength,C$c,0,2)))}C$e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},C$t.prototype.aabbCompute=function(){for(var C$t=Number.POSITIVE_INFINITY,C$e=Number.POSITIVE_INFINITY,C$i=Number.NEGATIVE_INFINITY,C$n=Number.NEGATIVE_INFINITY,C$r=this.polygons,C$s=0,C$h=C$r.length;C$s<C$h;C$s++)for(var C$o=C$r[C$s],C$a=C$o,C$c=0,C$u=C$o.length;C$c<C$u;C$c+=2)var C$l=C$a[C$c],C$_=C$a[C$c+1],C$t=Math.min(C$t,C$l),C$e=Math.min(C$e,C$_),C$i=Math.max(C$i,C$l),C$n=Math.max(C$n,C$_);this.minX=C$t,this.minY=C$e,this.maxX=C$i,this.maxY=C$n},C$t.prototype.aabbContainsPoint=function(C$t,C$e){return C$t>=this.minX&&C$t<=this.maxX&&C$e>=this.minY&&C$e<=this.maxY},C$t.prototype.aabbIntersectsSegment=function(C$t,C$e,C$i,C$n){var C$r=this.minX,C$s=this.minY,C$o=this.maxX,C$a=this.maxY;if(C$t<=C$r&&C$i<=C$r||C$e<=C$s&&C$n<=C$s||C$o<=C$t&&C$o<=C$i||C$a<=C$e&&C$a<=C$n)return!1;C$n=(C$n-C$e)/(C$i-C$t),C$i=C$n*(C$r-C$t)+C$e;if(C$s<C$i&&C$i<C$a)return!0;if(C$s<(C$i=C$n*(C$o-C$t)+C$e)&&C$i<C$a)return!0;C$i=(C$s-C$e)/C$n+C$t;return C$r<C$i&&C$i<C$o||C$r<(C$i=(C$a-C$e)/C$n+C$t)&&C$i<C$o},C$t.prototype.aabbIntersectsSkeleton=function(C$t){return this.minX<C$t.maxX&&this.maxX>C$t.minX&&this.minY<C$t.maxY&&this.maxY>C$t.minY},C$t.prototype.containsPoint=function(C$t,C$e){for(var C$i=this.polygons,C$n=0,C$r=C$i.length;C$n<C$r;C$n++)if(this.containsPointPolygon(C$i[C$n],C$t,C$e))return this.boundingBoxes[C$n];return null},C$t.prototype.containsPointPolygon=function(C$t,C$h,C$e){for(var C$i=C$t,C$n=C$t.length,C$r=C$n-2,C$s=!1,C$o=0;C$o<C$n;C$o+=2){var C$a,C$c=C$i[C$o+1],C$l=C$i[C$r+1];!(C$c<C$e&&C$e<=C$l||C$l<C$e&&C$e<=C$c)||(C$a=C$i[C$o])+(C$e-C$c)/(C$l-C$c)*(C$i[C$r]-C$a)<C$h&&(C$s=!C$s),C$r=C$o}return C$s},C$t.prototype.intersectsSegment=function(C$t,C$e,C$i,C$n){for(var C$r=this.polygons,C$s=0,C$o=C$r.length;C$s<C$o;C$s++)if(this.intersectsSegmentPolygon(C$r[C$s],C$t,C$e,C$i,C$n))return this.boundingBoxes[C$s];return null},C$t.prototype.intersectsSegmentPolygon=function(C$h,C$t,C$e,C$i,C$n){for(var C$r=C$h,C$u=C$h.length,C$_=C$t-C$i,C$d=C$e-C$n,C$f=C$t*C$n-C$e*C$i,C$s=C$r[C$u-2],C$o=C$r[C$u-1],C$p=0;C$p<C$u;C$p+=2){var C$a=C$r[C$p],C$c=C$r[C$p+1],C$m=C$s*C$c-C$o*C$a,C$l=C$s-C$a,C$y=C$o-C$c,C$g=C$_*C$y-C$d*C$l,C$l=(C$f*C$l-C$_*C$m)/C$g;if((C$s<=C$l&&C$l<=C$a||C$a<=C$l&&C$l<=C$s)&&(C$t<=C$l&&C$l<=C$i||C$i<=C$l&&C$l<=C$t)){C$l=(C$f*C$y-C$d*C$m)/C$g;if((C$o<=C$l&&C$l<=C$c||C$c<=C$l&&C$l<=C$o)&&(C$e<=C$l&&C$l<=C$n||C$n<=C$l&&C$l<=C$e))return!0}C$s=C$a,C$o=C$c}return!1},C$t.prototype.getPolygon=function(C$t){if(null==C$t)throw new Error("boundingBox cannot be null.");C$t=this.boundingBoxes.indexOf(C$t);return-1==C$t?null:this.polygons[C$t]},C$t.prototype.getWidth=function(){return this.maxX-this.minX},C$t.prototype.getHeight=function(){return this.maxY-this.minY},C$u.SkeletonBounds=C$t}(C$t=C$t||{}),function(C$Q){function C$c(){this.triangulator=new C$Q.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}C$c.prototype.clipStart=function(C$t,C$e){if(null!=this.clipAttachment)return 0;for(var C$i=(this.clipAttachment=C$e).worldVerticesLength,C$n=C$Q.Utils.setArraySize(this.clippingPolygon,C$i),C$e=(C$e.computeWorldVertices(C$t,0,C$i,C$n,0,2),this.clippingPolygon),C$r=(C$c.makeClockwise(C$e),this.clippingPolygons=this.triangulator.decompose(C$e,this.triangulator.triangulate(C$e))),C$s=0,C$o=C$r.length;C$s<C$o;C$s++){var C$a=C$r[C$s];C$c.makeClockwise(C$a),C$a.push(C$a[0]),C$a.push(C$a[1])}return C$r.length},C$c.prototype.clipEndWithSlot=function(C$t){null!=this.clipAttachment&&this.clipAttachment.endSlot==C$t.data&&this.clipEnd()},C$c.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},C$c.prototype.isClipping=function(){return null!=this.clipAttachment},C$c.prototype.clipTriangles=function(C$t,C$h,C$u,C$_,C$e,C$i,C$n,C$d,C$f,C$p,C$m,C$y){var C$g=this.clipOutput,C$v=this.clippedVertices,C$x=this.clippedTriangles,C$b=this.clippingPolygons,C$A=this.clippingPolygons.length,C$C=C$d?12:8,C$r=0;C$p=C$p||0,C$m=C$m||0,C$y=C$y||0,C$v.length=0,C$x.length=0;C$t:for(var C$S=C$p,C$T=C$p+C$_;C$S<C$T;C$S+=3)for(var C$w=C$u[C$S]*C$f,C$E=C$w+C$m,C$M=C$w+C$y,C$I=C$t[C$E],C$B=C$t[C$E+1],C$R=C$e[C$M],C$P=C$e[C$M+1],C$D=C$t[C$E=(C$w=C$u[C$S+1]*C$f)+C$m],C$L=C$t[C$E+1],C$V=C$e[C$M=C$w+C$y],C$O=C$e[C$M+1],C$F=C$t[C$E=(C$w=C$u[C$S+2]*C$f)+C$m],C$s=C$t[C$E+1],C$N=C$e[C$M=C$w+C$y],C$k=C$e[C$M+1],C$G=0;C$G<C$A;C$G++){var C$o=C$v.length;if(!this.clip(C$I,C$B,C$D,C$L,C$F,C$s,C$b[C$G],C$g)){(C$a=C$Q.Utils.setArraySize(C$v,C$o+3*C$C))[C$o]=C$I,C$a[C$o+1]=C$B,C$a[C$o+2]=C$i.r,C$a[C$o+3]=C$i.g,C$a[C$o+4]=C$i.b,C$a[C$o+5]=C$i.a,C$d?(C$a[C$o+6]=C$R,C$a[C$o+7]=C$P,C$a[C$o+8]=C$n.r,C$a[C$o+9]=C$n.g,C$a[C$o+10]=C$n.b,C$a[C$o+11]=C$n.a,C$a[C$o+12]=C$D,C$a[C$o+13]=C$L,C$a[C$o+14]=C$i.r,C$a[C$o+15]=C$i.g,C$a[C$o+16]=C$i.b,C$a[C$o+17]=C$i.a,C$a[C$o+18]=C$V,C$a[C$o+19]=C$O,C$a[C$o+20]=C$n.r,C$a[C$o+21]=C$n.g,C$a[C$o+22]=C$n.b,C$a[C$o+23]=C$n.a,C$a[C$o+24]=C$F,C$a[C$o+25]=C$s,C$a[C$o+26]=C$i.r,C$a[C$o+27]=C$i.g,C$a[C$o+28]=C$i.b,C$a[C$o+29]=C$i.a,C$a[C$o+30]=C$N,C$a[C$o+31]=C$k,C$a[C$o+32]=C$n.r,C$a[C$o+33]=C$n.g,C$a[C$o+34]=C$n.b,C$a[C$o+35]=C$n.a):(C$a[C$o+6]=C$R,C$a[C$o+7]=C$P,C$a[C$o+8]=C$D,C$a[C$o+9]=C$L,C$a[C$o+10]=C$i.r,C$a[C$o+11]=C$i.g,C$a[C$o+12]=C$i.b,C$a[C$o+13]=C$i.a,C$a[C$o+14]=C$V,C$a[C$o+15]=C$O,C$a[C$o+16]=C$F,C$a[C$o+17]=C$s,C$a[C$o+18]=C$i.r,C$a[C$o+19]=C$i.g,C$a[C$o+20]=C$i.b,C$a[C$o+21]=C$i.a,C$a[C$o+22]=C$N,C$a[C$o+23]=C$k),C$o=C$x.length,(C$K=C$Q.Utils.setArraySize(C$x,C$o+3))[C$o]=C$r,C$K[C$o+1]=C$r+1,C$K[C$o+2]=C$r+2,C$r+=3;continue C$t}var C$z=C$g.length;if(0!=C$z){for(var C$U=C$L-C$s,C$W=C$F-C$D,C$H=C$I-C$F,C$j=C$s-C$B,C$X=1/(C$U*C$H+C$W*(C$B-C$s)),C$Y=C$z>>1,C$q=this.clipOutput,C$a=C$Q.Utils.setArraySize(C$v,C$o+C$Y*C$C),C$c=0;C$c<C$z;C$c+=2){var C$l=C$q[C$c],C$J=C$q[C$c+1],C$l=(C$a[C$o]=C$l,C$a[C$o+1]=C$J,C$a[C$o+2]=C$i.r,C$a[C$o+3]=C$i.g,C$a[C$o+4]=C$i.b,C$a[C$o+5]=C$i.a,C$l-C$F),C$J=C$J-C$s,C$Z=(C$U*C$l+C$W*C$J)*C$X,C$l=(C$j*C$l+C$H*C$J)*C$X,C$J=1-C$Z-C$l;C$a[C$o+6]=C$R*C$Z+C$V*C$l+C$N*C$J,C$a[C$o+7]=C$P*C$Z+C$O*C$l+C$k*C$J,C$d&&(C$a[C$o+8]=C$n.r,C$a[C$o+9]=C$n.g,C$a[C$o+10]=C$n.b,C$a[C$o+11]=C$n.a),C$o+=C$C}var C$o=C$x.length,C$K=C$Q.Utils.setArraySize(C$x,C$o+3*(C$Y-2));C$Y--;for(C$c=1;C$c<C$Y;C$c++)C$K[C$o]=C$r,C$K[C$o+1]=C$r+C$c,C$K[C$o+2]=C$r+C$c+1,C$o+=3;C$r+=1+C$Y}}},C$c.prototype.clip=function(C$h,C$u,C$_,C$d,C$f,C$p,C$m,C$t){for(var C$e=C$t,C$y=!1,C$i=null,C$g=(2<=C$m.length%4?(C$i=C$t,C$t=this.scratch):C$i=this.scratch,C$i.length=0,C$i.push(C$h),C$i.push(C$u),C$i.push(C$_),C$i.push(C$d),C$i.push(C$f),C$i.push(C$p),C$i.push(C$h),C$i.push(C$u),C$t.length=0,C$m),C$v=C$m.length-4,C$n=0;;C$n+=2){for(var C$r=C$g[C$n],C$s=C$g[C$n+1],C$o=C$g[C$n+2],C$a=C$g[C$n+3],C$x=C$r-C$o,C$b=C$s-C$a,C$A=C$i,C$C=C$i.length-2,C$S=C$t.length,C$c=0;C$c<C$C;C$c+=2){var C$l=C$A[C$c],C$T=C$A[C$c+1],C$w=C$A[C$c+2],C$E=C$A[C$c+3],C$M=0<C$x*(C$E-C$a)-C$b*(C$w-C$o);if(0<C$x*(C$T-C$a)-C$b*(C$l-C$o)){if(C$M){C$t.push(C$w),C$t.push(C$E);continue}var C$I,C$B,C$R,C$P=(C$I=C$E-C$T)*(C$o-C$r)-(C$B=C$w-C$l)*(C$a-C$s);1e-6<Math.abs(C$P)?(C$t.push(C$r+(C$o-C$r)*(C$R=(C$B*(C$s-C$T)-C$I*(C$r-C$l))/C$P)),C$t.push(C$s+(C$a-C$s)*C$R)):(C$t.push(C$r),C$t.push(C$s))}else C$M&&(C$P=(C$I=C$E-C$T)*(C$o-C$r)-(C$B=C$w-C$l)*(C$a-C$s),1e-6<Math.abs(C$P)?(C$t.push(C$r+(C$o-C$r)*(C$R=(C$B*(C$s-C$T)-C$I*(C$r-C$l))/C$P)),C$t.push(C$s+(C$a-C$s)*C$R)):(C$t.push(C$r),C$t.push(C$s)),C$t.push(C$w),C$t.push(C$E));C$y=!0}if(C$S==C$t.length)return!(C$e.length=0);if(C$t.push(C$t[0]),C$t.push(C$t[1]),C$n==C$v)break;C$S=C$t;(C$t=C$i).length=0,C$i=C$S}if(C$e!=C$t)for(var C$n=C$e.length=0,C$D=C$t.length-2;C$n<C$D;C$n++)C$e[C$n]=C$t[C$n];else C$e.length=C$e.length-2;return C$y},C$c.makeClockwise=function(C$t){for(var C$e,C$i,C$n,C$r=C$t,C$t=C$t.length,C$s=C$r[C$t-2]*C$r[1]-C$r[0]*C$r[C$t-1],C$o=0,C$a=C$t-3;C$o<C$a;C$o+=2)C$e=C$r[C$o],C$i=C$r[C$o+1],C$n=C$r[C$o+2],C$s+=C$e*C$r[C$o+3]-C$n*C$i;if(!(C$s<0))for(var C$o=0,C$c=C$t-2,C$a=C$t>>1;C$o<C$a;C$o+=2){var C$h=C$r[C$o],C$u=C$r[C$o+1],C$l=C$c-C$o;C$r[C$o]=C$r[C$l],C$r[C$o+1]=C$r[1+C$l],C$r[C$l]=C$h,C$r[1+C$l]=C$u}},C$Q.SkeletonClipping=C$c}(C$t=C$t||{}),function(C$t){function C$e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}C$e.prototype.findBone=function(C$t){if(null==C$t)throw new Error("boneName cannot be null.");for(var C$e=this.bones,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findBoneIndex=function(C$t){if(null==C$t)throw new Error("boneName cannot be null.");for(var C$e=this.bones,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i].name==C$t)return C$i;return-1},C$e.prototype.findSlot=function(C$t){if(null==C$t)throw new Error("slotName cannot be null.");for(var C$e=this.slots,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findSlotIndex=function(C$t){if(null==C$t)throw new Error("slotName cannot be null.");for(var C$e=this.slots,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i].name==C$t)return C$i;return-1},C$e.prototype.findSkin=function(C$t){if(null==C$t)throw new Error("skinName cannot be null.");for(var C$e=this.skins,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findEvent=function(C$t){if(null==C$t)throw new Error("eventDataName cannot be null.");for(var C$e=this.events,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findAnimation=function(C$t){if(null==C$t)throw new Error("animationName cannot be null.");for(var C$e=this.animations,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findIkConstraint=function(C$t){if(null==C$t)throw new Error("constraintName cannot be null.");for(var C$e=this.ikConstraints,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findTransformConstraint=function(C$t){if(null==C$t)throw new Error("constraintName cannot be null.");for(var C$e=this.transformConstraints,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findPathConstraint=function(C$t){if(null==C$t)throw new Error("constraintName cannot be null.");for(var C$e=this.pathConstraints,C$i=0,C$n=C$e.length;C$i<C$n;C$i++){var C$r=C$e[C$i];if(C$r.name==C$t)return C$r}return null},C$e.prototype.findPathConstraintIndex=function(C$t){if(null==C$t)throw new Error("pathConstraintName cannot be null.");for(var C$e=this.pathConstraints,C$i=0,C$n=C$e.length;C$i<C$n;C$i++)if(C$e[C$i].name==C$t)return C$i;return-1},C$t.SkeletonData=C$e}(C$t=C$t||{}),function(C$et){function C$L(C$t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=C$t}C$L.prototype.readSkeletonData=function(C$t){var C$h=this.scale,C$e=new C$et.SkeletonData,C$i="string"==typeof C$t?JSON.parse(C$t):C$t,C$t=C$i.skeleton;if(null!=C$t&&(C$e.hash=C$t.hash,C$e.version=C$t.spine,C$e.x=C$t.x,C$e.y=C$t.y,C$e.width=C$t.width,C$e.height=C$t.height,C$e.fps=C$t.fps,C$e.imagesPath=C$t.images),C$i.bones)for(var C$n=0;C$n<C$i.bones.length;C$n++){var C$r=C$i.bones[C$n],C$u=null,C$_=this.getValue(C$r,"parent",null);if(null!=C$_&&null==(C$u=C$e.findBone(C$_)))throw new Error("Parent bone not found: "+C$_);(C$o=new C$et.BoneData(C$e.bones.length,C$r.name,C$u)).length=this.getValue(C$r,"length",0)*C$h,C$o.x=this.getValue(C$r,"x",0)*C$h,C$o.y=this.getValue(C$r,"y",0)*C$h,C$o.rotation=this.getValue(C$r,"rotation",0),C$o.scaleX=this.getValue(C$r,"scaleX",1),C$o.scaleY=this.getValue(C$r,"scaleY",1),C$o.shearX=this.getValue(C$r,"shearX",0),C$o.shearY=this.getValue(C$r,"shearY",0),C$o.transformMode=C$L.transformModeFromString(this.getValue(C$r,"transform","normal")),C$o.skinRequired=this.getValue(C$r,"skin",!1),C$e.bones.push(C$o)}if(C$i.slots)for(C$n=0;C$n<C$i.slots.length;C$n++){var C$d=(C$C=C$i.slots[C$n]).name,C$s=C$C.bone,C$f=C$e.findBone(C$s);if(null==C$f)throw new Error("Slot bone not found: "+C$s);var C$o=new C$et.SlotData(C$e.slots.length,C$d,C$f),C$f=this.getValue(C$C,"color",null),C$f=(null!=C$f&&C$o.color.setFromString(C$f),this.getValue(C$C,"dark",null));null!=C$f&&(C$o.darkColor=new C$et.Color(1,1,1,1),C$o.darkColor.setFromString(C$f)),C$o.attachmentName=this.getValue(C$C,"attachment",null),C$o.blendMode=C$L.blendModeFromString(this.getValue(C$C,"blend","normal")),C$e.slots.push(C$o)}if(C$i.ik)for(C$n=0;C$n<C$i.ik.length;C$n++){var C$a=C$i.ik[C$n];(C$o=new C$et.IkConstraintData(C$a.name)).order=this.getValue(C$a,"order",0),C$o.skinRequired=this.getValue(C$a,"skin",!1);for(var C$p=0;C$p<C$a.bones.length;C$p++){C$s=C$a.bones[C$p];if(null==(C$x=C$e.findBone(C$s)))throw new Error("IK bone not found: "+C$s);C$o.bones.push(C$x)}var C$m=C$a.target;if(C$o.target=C$e.findBone(C$m),null==C$o.target)throw new Error("IK target bone not found: "+C$m);C$o.mix=this.getValue(C$a,"mix",1),C$o.softness=this.getValue(C$a,"softness",0)*C$h,C$o.bendDirection=this.getValue(C$a,"bendPositive",!0)?1:-1,C$o.compress=this.getValue(C$a,"compress",!1),C$o.stretch=this.getValue(C$a,"stretch",!1),C$o.uniform=this.getValue(C$a,"uniform",!1),C$e.ikConstraints.push(C$o)}if(C$i.transform)for(C$n=0;C$n<C$i.transform.length;C$n++){C$a=C$i.transform[C$n];(C$o=new C$et.TransformConstraintData(C$a.name)).order=this.getValue(C$a,"order",0),C$o.skinRequired=this.getValue(C$a,"skin",!1);for(C$p=0;C$p<C$a.bones.length;C$p++){C$s=C$a.bones[C$p];if(null==(C$x=C$e.findBone(C$s)))throw new Error("Transform constraint bone not found: "+C$s);C$o.bones.push(C$x)}C$m=C$a.target;if(C$o.target=C$e.findBone(C$m),null==C$o.target)throw new Error("Transform constraint target bone not found: "+C$m);C$o.local=this.getValue(C$a,"local",!1),C$o.relative=this.getValue(C$a,"relative",!1),C$o.offsetRotation=this.getValue(C$a,"rotation",0),C$o.offsetX=this.getValue(C$a,"x",0)*C$h,C$o.offsetY=this.getValue(C$a,"y",0)*C$h,C$o.offsetScaleX=this.getValue(C$a,"scaleX",0),C$o.offsetScaleY=this.getValue(C$a,"scaleY",0),C$o.offsetShearY=this.getValue(C$a,"shearY",0),C$o.rotateMix=this.getValue(C$a,"rotateMix",1),C$o.translateMix=this.getValue(C$a,"translateMix",1),C$o.scaleMix=this.getValue(C$a,"scaleMix",1),C$o.shearMix=this.getValue(C$a,"shearMix",1),C$e.transformConstraints.push(C$o)}if(C$i.path)for(C$n=0;C$n<C$i.path.length;C$n++){C$a=C$i.path[C$n];(C$o=new C$et.PathConstraintData(C$a.name)).order=this.getValue(C$a,"order",0),C$o.skinRequired=this.getValue(C$a,"skin",!1);for(C$p=0;C$p<C$a.bones.length;C$p++){C$s=C$a.bones[C$p];if(null==(C$x=C$e.findBone(C$s)))throw new Error("Transform constraint bone not found: "+C$s);C$o.bones.push(C$x)}C$m=C$a.target;if(C$o.target=C$e.findSlot(C$m),null==C$o.target)throw new Error("Path target slot not found: "+C$m);C$o.positionMode=C$L.positionModeFromString(this.getValue(C$a,"positionMode","percent")),C$o.spacingMode=C$L.spacingModeFromString(this.getValue(C$a,"spacingMode","length")),C$o.rotateMode=C$L.rotateModeFromString(this.getValue(C$a,"rotateMode","tangent")),C$o.offsetRotation=this.getValue(C$a,"rotation",0),C$o.position=this.getValue(C$a,"position",0),C$o.positionMode==C$et.PositionMode.Fixed&&(C$o.position*=C$h),C$o.spacing=this.getValue(C$a,"spacing",0),C$o.spacingMode!=C$et.SpacingMode.Length&&C$o.spacingMode!=C$et.SpacingMode.Fixed||(C$o.spacing*=C$h),C$o.rotateMix=this.getValue(C$a,"rotateMix",1),C$o.translateMix=this.getValue(C$a,"translateMix",1),C$e.pathConstraints.push(C$o)}if(C$i.skins){var C$y=C$i.skins;if(!(C$y instanceof Array)){var C$g,C$v=[];for(C$g in C$y)C$v.push({name:C$g,attachments:C$y[C$g]});C$y=C$v}for(C$n=0;C$n<C$y.length;C$n++){var C$x,C$b,C$c=C$y[C$n],C$A=new C$et.Skin(C$c.name);if(C$c.bones)for(var C$l=0;C$l<C$c.bones.length;C$l++){if(null==(C$x=C$e.findBone(C$c.bones[C$l])))throw new Error("Skin bone not found: "+C$c.bones[C$n]);C$A.bones.push(C$x)}if(C$c.ik)for(C$l=0;C$l<C$c.ik.length;C$l++){if(null==(C$b=C$e.findIkConstraint(C$c.ik[C$l])))throw new Error("Skin IK constraint not found: "+C$c.ik[C$n]);C$A.constraints.push(C$b)}if(C$c.transform)for(C$l=0;C$l<C$c.transform.length;C$l++){if(null==(C$b=C$e.findTransformConstraint(C$c.transform[C$l])))throw new Error("Skin transform constraint not found: "+C$c.transform[C$n]);C$A.constraints.push(C$b)}if(C$c.path)for(C$l=0;C$l<C$c.path.length;C$l++){if(null==(C$b=C$e.findPathConstraint(C$c.path[C$l])))throw new Error("Skin path constraint not found: "+C$c.path[C$n]);C$A.constraints.push(C$b)}for(C$d in C$c.attachments){var C$C,C$S,C$T=C$e.findSlot(C$d);if(null==C$T)throw new Error("Slot not found: "+C$d);for(C$S in C$C=C$c.attachments[C$d]){var C$w=this.readAttachment(C$C[C$S],C$A,C$T.index,C$S,C$e);null!=C$w&&C$A.setAttachment(C$T.index,C$S,C$w)}}C$e.skins.push(C$A),"default"==C$A.name&&(C$e.defaultSkin=C$A)}}for(var C$n=0,C$E=this.linkedMeshes.length;C$n<C$E;C$n++){var C$M=this.linkedMeshes[C$n];if(null==(C$A=null==C$M.skin?C$e.defaultSkin:C$e.findSkin(C$M.skin)))throw new Error("Skin not found: "+C$M.skin);var C$I=C$A.getAttachment(C$M.slotIndex,C$M.parent);if(null==C$I)throw new Error("Parent mesh not found: "+C$M.parent);C$M.mesh.deformAttachment=C$M.inheritDeform?C$I:C$M.mesh,C$M.mesh.setParentMesh(C$I),C$M.mesh.updateUVs()}if(this.linkedMeshes.length=0,C$i.events)for(var C$B in C$i.events){var C$R=C$i.events[C$B];(C$o=new C$et.EventData(C$B)).intValue=this.getValue(C$R,"int",0),C$o.floatValue=this.getValue(C$R,"float",0),C$o.stringValue=this.getValue(C$R,"string",""),C$o.audioPath=this.getValue(C$R,"audio",null),null!=C$o.audioPath&&(C$o.volume=this.getValue(C$R,"volume",1),C$o.balance=this.getValue(C$R,"balance",0)),C$e.events.push(C$o)}if(C$i.animations)for(var C$P in C$i.animations){var C$D=C$i.animations[C$P];this.readAnimation(C$D,C$P,C$e)}return C$e},C$L.prototype.readAttachment=function(C$t,C$e,C$h,C$i,C$u){var C$n=this.scale;switch(C$i=this.getValue(C$t,"name",C$i),this.getValue(C$t,"type","region")){case"region":var C$r=this.getValue(C$t,"path",C$i),C$s=this.attachmentLoader.newRegionAttachment(C$e,C$i,C$r);return null==C$s?null:(C$s.path=C$r,C$s.x=this.getValue(C$t,"x",0)*C$n,C$s.y=this.getValue(C$t,"y",0)*C$n,C$s.scaleX=this.getValue(C$t,"scaleX",1),C$s.scaleY=this.getValue(C$t,"scaleY",1),C$s.rotation=this.getValue(C$t,"rotation",0),C$s.width=C$t.width*C$n,C$s.height=C$t.height*C$n,null!=(C$l=this.getValue(C$t,"color",null))&&C$s.color.setFromString(C$l),C$s.updateOffset(),C$s);case"boundingbox":C$s=this.attachmentLoader.newBoundingBoxAttachment(C$e,C$i);return null==C$s?null:(this.readVertices(C$t,C$s,C$t.vertexCount<<1),null!=(C$l=this.getValue(C$t,"color",null))&&C$s.color.setFromString(C$l),C$s);case"mesh":case"linkedmesh":var C$r=this.getValue(C$t,"path",C$i),C$s=this.attachmentLoader.newMeshAttachment(C$e,C$i,C$r);if(null==C$s)return null;C$s.path=C$r;null!=(C$l=this.getValue(C$t,"color",null))&&C$s.color.setFromString(C$l),C$s.width=this.getValue(C$t,"width",0)*C$n,C$s.height=this.getValue(C$t,"height",0)*C$n;var C$o=this.getValue(C$t,"parent",null);if(null!=C$o)return this.linkedMeshes.push(new C$d(C$s,this.getValue(C$t,"skin",null),C$h,C$o,this.getValue(C$t,"deform",!0))),C$s;C$o=C$t.uvs;return this.readVertices(C$t,C$s,C$o.length),C$s.triangles=C$t.triangles,C$s.regionUVs=C$o,C$s.updateUVs(),C$s.edges=this.getValue(C$t,"edges",null),C$s.hullLength=2*this.getValue(C$t,"hull",0),C$s;case"path":if(null==(C$r=this.attachmentLoader.newPathAttachment(C$e,C$i)))return null;C$r.closed=this.getValue(C$t,"closed",!1),C$r.constantSpeed=this.getValue(C$t,"constantSpeed",!0);for(var C$a=C$t.vertexCount,C$_=(this.readVertices(C$t,C$r,C$a<<1),C$et.Utils.newArray(C$a/3,0)),C$c=0;C$c<C$t.lengths.length;C$c++)C$_[C$c]=C$t.lengths[C$c]*C$n;return C$r.lengths=C$_,null!=(C$l=this.getValue(C$t,"color",null))&&C$r.color.setFromString(C$l),C$r;case"point":C$o=this.attachmentLoader.newPointAttachment(C$e,C$i);return null==C$o?null:(C$o.x=this.getValue(C$t,"x",0)*C$n,C$o.y=this.getValue(C$t,"y",0)*C$n,C$o.rotation=this.getValue(C$t,"rotation",0),null!=(C$l=this.getValue(C$t,"color",null))&&C$o.color.setFromString(C$l),C$o);case"clipping":C$s=this.attachmentLoader.newClippingAttachment(C$e,C$i);if(null==C$s)return null;C$r=this.getValue(C$t,"end",null);if(null!=C$r){C$o=C$u.findSlot(C$r);if(null==C$o)throw new Error("Clipping end slot not found: "+C$r);C$s.endSlot=C$o}var C$l,C$a=C$t.vertexCount;return this.readVertices(C$t,C$s,C$a<<1),null!=(C$l=this.getValue(C$t,"color",null))&&C$s.color.setFromString(C$l),C$s}return null},C$L.prototype.readVertices=function(C$h,C$t,C$e){var C$i=this.scale,C$n=(C$t.worldVerticesLength=C$e,C$h.vertices);if(C$e!=C$n.length){for(var C$r=new Array,C$s=new Array,C$o=0,C$a=C$n.length;C$o<C$a;){var C$c=C$n[C$o++];C$s.push(C$c);for(var C$u=C$o+4*C$c;C$o<C$u;C$o+=4)C$s.push(C$n[C$o]),C$r.push(C$n[C$o+1]*C$i),C$r.push(C$n[C$o+2]*C$i),C$r.push(C$n[C$o+3])}C$t.bones=C$s,C$t.vertices=C$et.Utils.toFloatArray(C$r)}else{var C$l=C$et.Utils.toFloatArray(C$n);if(1!=C$i)for(var C$o=0,C$a=C$n.length;C$o<C$a;C$o++)C$l[C$o]*=C$i;C$t.vertices=C$l}},C$L.prototype.readAnimation=function(C$t,C$h,C$e){var C$u=this.scale,C$i=new Array,C$n=0;if(C$t.slots)for(var C$_ in C$t.slots){var C$d=C$t.slots[C$_];if(-1==(C$Z=C$e.findSlotIndex(C$_)))throw new Error("Slot not found: "+C$_);for(C$l in C$d){var C$r=C$d[C$l];if("attachment"==C$l){(C$c=new C$et.AttachmentTimeline(C$r.length)).slotIndex=C$Z;for(var C$s=0,C$o=0;C$o<C$r.length;C$o++){var C$a=C$r[C$o];C$c.setFrame(C$s++,this.getValue(C$a,"time",0),C$a.name)}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[C$c.getFrameCount()-1])}else if("color"==C$l){for(C$s=((C$c=new C$et.ColorTimeline(C$r.length)).slotIndex=C$Z,0),C$o=0;C$o<C$r.length;C$o++){var C$a=C$r[C$o],C$f=new C$et.Color;C$f.setFromString(C$a.color),C$c.setFrame(C$s,this.getValue(C$a,"time",0),C$f.r,C$f.g,C$f.b,C$f.a),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.ColorTimeline.ENTRIES])}else{if("twoColor"!=C$l)throw new Error("Invalid timeline type for a slot: "+C$l+" ("+C$_+")");for(C$s=((C$c=new C$et.TwoColorTimeline(C$r.length)).slotIndex=C$Z,0),C$o=0;C$o<C$r.length;C$o++){var C$a=C$r[C$o],C$p=new C$et.Color,C$m=new C$et.Color;C$p.setFromString(C$a.light),C$m.setFromString(C$a.dark),C$c.setFrame(C$s,this.getValue(C$a,"time",0),C$p.r,C$p.g,C$p.b,C$p.a,C$m.r,C$m.g,C$m.b),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.TwoColorTimeline.ENTRIES])}}}if(C$t.bones)for(var C$y in C$t.bones){var C$g=C$t.bones[C$y],C$v=C$e.findBoneIndex(C$y);if(-1==C$v)throw new Error("Bone not found: "+C$y);for(C$l in C$g){C$r=C$g[C$l];if("rotate"===C$l){for(C$s=((C$c=new C$et.RotateTimeline(C$r.length)).boneIndex=C$v,0),C$o=0;C$o<C$r.length;C$o++){C$a=C$r[C$o];C$c.setFrame(C$s,this.getValue(C$a,"time",0),this.getValue(C$a,"angle",0)),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.RotateTimeline.ENTRIES])}else{if("translate"!==C$l&&"scale"!==C$l&&"shear"!==C$l)throw new Error("Invalid timeline type for a bone: "+C$l+" ("+C$y+")");for(var C$c=null,C$x=1,C$b=0,C$s=("scale"===C$l?(C$c=new C$et.ScaleTimeline(C$r.length),C$b=1):"shear"===C$l?C$c=new C$et.ShearTimeline(C$r.length):(C$c=new C$et.TranslateTimeline(C$r.length),C$x=C$u),C$c.boneIndex=C$v,0),C$o=0;C$o<C$r.length;C$o++){var C$a=C$r[C$o],C$A=this.getValue(C$a,"x",C$b),C$C=this.getValue(C$a,"y",C$b);C$c.setFrame(C$s,this.getValue(C$a,"time",0),C$A*C$x,C$C*C$x),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.TranslateTimeline.ENTRIES])}}}if(C$t.ik)for(var C$S in C$t.ik){for(var C$T=C$t.ik[C$S],C$w=C$e.findIkConstraint(C$S),C$s=((C$c=new C$et.IkConstraintTimeline(C$T.length)).ikConstraintIndex=C$e.ikConstraints.indexOf(C$w),0),C$o=0;C$o<C$T.length;C$o++){C$a=C$T[C$o];C$c.setFrame(C$s,this.getValue(C$a,"time",0),this.getValue(C$a,"mix",1),this.getValue(C$a,"softness",0)*C$u,this.getValue(C$a,"bendPositive",!0)?1:-1,this.getValue(C$a,"compress",!1),this.getValue(C$a,"stretch",!1)),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.IkConstraintTimeline.ENTRIES])}if(C$t.transform)for(var C$S in C$t.transform){for(C$T=C$t.transform[C$S],C$w=C$e.findTransformConstraint(C$S),C$s=((C$c=new C$et.TransformConstraintTimeline(C$T.length)).transformConstraintIndex=C$e.transformConstraints.indexOf(C$w),0),C$o=0;C$o<C$T.length;C$o++){C$a=C$T[C$o];C$c.setFrame(C$s,this.getValue(C$a,"time",0),this.getValue(C$a,"rotateMix",1),this.getValue(C$a,"translateMix",1),this.getValue(C$a,"scaleMix",1),this.getValue(C$a,"shearMix",1)),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.TransformConstraintTimeline.ENTRIES])}var C$E=C$t.path||C$t.paths;if(C$E)for(var C$S in C$E){var C$T=C$E[C$S],C$M=C$e.findPathConstraintIndex(C$S);if(-1==C$M)throw new Error("Path constraint not found: "+C$S);var C$I=C$e.pathConstraints[C$M];for(C$l in C$T){C$r=C$T[C$l];if("position"===C$l||"spacing"===C$l){for(C$c=null,C$x=1,C$s=("spacing"===C$l?(C$c=new C$et.PathConstraintSpacingTimeline(C$r.length),C$I.spacingMode!=C$et.SpacingMode.Length&&C$I.spacingMode!=C$et.SpacingMode.Fixed||(C$x=C$u)):(C$c=new C$et.PathConstraintPositionTimeline(C$r.length),C$I.positionMode==C$et.PositionMode.Fixed&&(C$x=C$u)),C$c.pathConstraintIndex=C$M,0),C$o=0;C$o<C$r.length;C$o++){C$a=C$r[C$o];C$c.setFrame(C$s,this.getValue(C$a,"time",0),this.getValue(C$a,C$l,0)*C$x),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===C$l){for(C$s=((C$c=new C$et.PathConstraintMixTimeline(C$r.length)).pathConstraintIndex=C$M,0),C$o=0;C$o<C$r.length;C$o++){C$a=C$r[C$o];C$c.setFrame(C$s,this.getValue(C$a,"time",0),this.getValue(C$a,"rotateMix",1),this.getValue(C$a,"translateMix",1)),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[(C$c.getFrameCount()-1)*C$et.PathConstraintMixTimeline.ENTRIES])}}}if(C$t.deform)for(var C$B in C$t.deform){var C$R=C$t.deform[C$B],C$P=C$e.findSkin(C$B);if(null==C$P)throw new Error("Skin not found: "+C$B);for(C$_ in C$R){var C$l,C$d=C$R[C$_];if(-1==(C$Z=C$e.findSlotIndex(C$_)))throw new Error("Slot not found: "+C$d.name);for(C$l in C$d){var C$r=C$d[C$l],C$D=C$P.getAttachment(C$Z,C$l);if(null!=C$D){for(var C$L=null!=C$D.bones,C$V=C$D.vertices,C$O=C$L?C$V.length/3*2:C$V.length,C$s=((C$c=new C$et.DeformTimeline(C$r.length)).slotIndex=C$Z,C$c.attachment=C$D,0),C$F=0;C$F<C$r.length;C$F++){var C$a=C$r[C$F],C$N=void 0,C$k=this.getValue(C$a,"vertices",null);if(null==C$k)C$N=C$L?C$et.Utils.newFloatArray(C$O):C$V;else{var C$N=C$et.Utils.newFloatArray(C$O),C$G=this.getValue(C$a,"offset",0);if(C$et.Utils.arrayCopy(C$k,0,C$N,C$G,C$k.length),1!=C$u)for(var C$z=(C$o=C$G)+C$k.length;C$o<C$z;C$o++)C$N[C$o]*=C$u;if(!C$L)for(C$o=0;C$o<C$O;C$o++)C$N[C$o]+=C$V[C$o]}C$c.setFrame(C$s,this.getValue(C$a,"time",0),C$N),this.readCurve(C$a,C$c,C$s),C$s++}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[C$c.getFrameCount()-1])}}}}var C$U=C$t.drawOrder;if(null!=(C$U=null==C$U?C$t.draworder:C$U)){for(var C$c=new C$et.DrawOrderTimeline(C$U.length),C$W=C$e.slots.length,C$s=0,C$F=0;C$F<C$U.length;C$F++){var C$H=C$U[C$F],C$j=null,C$X=this.getValue(C$H,"offsets",null);if(null!=C$X){for(var C$j=C$et.Utils.newArray(C$W,-1),C$Y=C$et.Utils.newArray(C$W-C$X.length,0),C$q=0,C$J=0,C$o=0;C$o<C$X.length;C$o++){var C$Z,C$K=C$X[C$o];if(-1==(C$Z=C$e.findSlotIndex(C$K.slot)))throw new Error("Slot not found: "+C$K.slot);for(;C$q!=C$Z;)C$Y[C$J++]=C$q++;C$j[C$q+C$K.offset]=C$q++}for(;C$q<C$W;)C$Y[C$J++]=C$q++;for(C$o=C$W-1;0<=C$o;C$o--)-1==C$j[C$o]&&(C$j[C$o]=C$Y[--C$J])}C$c.setFrame(C$s++,this.getValue(C$H,"time",0),C$j)}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[C$c.getFrameCount()-1])}if(C$t.events){for(C$c=new C$et.EventTimeline(C$t.events.length),C$s=0,C$o=0;C$o<C$t.events.length;C$o++){var C$Q=C$t.events[C$o],C$$=C$e.findEvent(C$Q.name);if(null==C$$)throw new Error("Event not found: "+C$Q.name);var C$tt=new C$et.Event(C$et.Utils.toSinglePrecision(this.getValue(C$Q,"time",0)),C$$);C$tt.intValue=this.getValue(C$Q,"int",C$$.intValue),C$tt.floatValue=this.getValue(C$Q,"float",C$$.floatValue),C$tt.stringValue=this.getValue(C$Q,"string",C$$.stringValue),null!=C$tt.data.audioPath&&(C$tt.volume=this.getValue(C$Q,"volume",1),C$tt.balance=this.getValue(C$Q,"balance",0)),C$c.setFrame(C$s++,C$tt)}C$i.push(C$c),C$n=Math.max(C$n,C$c.frames[C$c.getFrameCount()-1])}if(isNaN(C$n))throw new Error("Error while parsing animation, duration is NaN");C$e.animations.push(new C$et.Animation(C$h,C$i,C$n))},C$L.prototype.readCurve=function(C$t,C$e,C$i){var C$n=C$t.curve;C$n&&("stepped"==C$n?C$e.setStepped(C$i):"[object Array]"===Object.prototype.toString.call(C$n)?C$e.setCurve(C$i,C$n[0],C$n[1],C$n[2],C$n[3]):C$e.setCurve(C$i,C$n,this.getValue(C$t,"c2",0),this.getValue(C$t,"c3",1),this.getValue(C$t,"c4",1)))},C$L.prototype.getValue=function(C$t,C$e,C$i){return void 0!==C$t[C$e]?C$t[C$e]:C$i},C$L.blendModeFromString=function(C$t){if("normal"==(C$t=C$t.toLowerCase()))return C$et.BlendMode.Normal;if("additive"==C$t)return C$et.BlendMode.Additive;if("multiply"==C$t)return C$et.BlendMode.Multiply;if("screen"==C$t)return C$et.BlendMode.Screen;throw new Error("Unknown blend mode: "+C$t)},C$L.positionModeFromString=function(C$t){if("fixed"==(C$t=C$t.toLowerCase()))return C$et.PositionMode.Fixed;if("percent"==C$t)return C$et.PositionMode.Percent;throw new Error("Unknown position mode: "+C$t)},C$L.spacingModeFromString=function(C$t){if("length"==(C$t=C$t.toLowerCase()))return C$et.SpacingMode.Length;if("fixed"==C$t)return C$et.SpacingMode.Fixed;if("percent"==C$t)return C$et.SpacingMode.Percent;throw new Error("Unknown position mode: "+C$t)},C$L.rotateModeFromString=function(C$t){if("tangent"==(C$t=C$t.toLowerCase()))return C$et.RotateMode.Tangent;if("chain"==C$t)return C$et.RotateMode.Chain;if("chainscale"==C$t)return C$et.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+C$t)},C$L.transformModeFromString=function(C$t){if("normal"==(C$t=C$t.toLowerCase()))return C$et.TransformMode.Normal;if("onlytranslation"==C$t)return C$et.TransformMode.OnlyTranslation;if("norotationorreflection"==C$t)return C$et.TransformMode.NoRotationOrReflection;if("noscale"==C$t)return C$et.TransformMode.NoScale;if("noscaleorreflection"==C$t)return C$et.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+C$t)},C$et.SkeletonJson=C$L;var C$d=function(C$t,C$e,C$i,C$n,C$r){this.mesh=C$t,this.skin=C$e,this.slotIndex=C$i,this.parent=C$n,this.inheritDeform=C$r}}(C$t=C$t||{}),C$p=C$t=C$t||{},C$m=function(C$t,C$e,C$i){this.slotIndex=C$t,this.name=C$e,this.attachment=C$i},C$p.SkinEntry=C$m,C$i.prototype.setAttachment=function(C$t,C$e,C$i){if(null==C$i)throw new Error("attachment cannot be null.");var C$n=this.attachments;C$t>=C$n.length&&(C$n.length=C$t+1),C$n[C$t]||(C$n[C$t]={}),C$n[C$t][C$e]=C$i},C$i.prototype.addSkin=function(C$t){for(var C$e=0;C$e<C$t.bones.length;C$e++){for(var C$i=C$t.bones[C$e],C$n=!1,C$r=0;C$r<this.bones.length;C$r++)if(this.bones[C$r]==C$i){C$n=!0;break}C$n||this.bones.push(C$i)}for(C$e=0;C$e<C$t.constraints.length;C$e++){for(var C$s=C$t.constraints[C$e],C$n=!1,C$r=0;C$r<this.constraints.length;C$r++)if(this.constraints[C$r]==C$s){C$n=!0;break}C$n||this.constraints.push(C$s)}for(var C$o=C$t.getAttachments(),C$e=0;C$e<C$o.length;C$e++){var C$a=C$o[C$e];this.setAttachment(C$a.slotIndex,C$a.name,C$a.attachment)}},C$i.prototype.copySkin=function(C$t){for(var C$e=0;C$e<C$t.bones.length;C$e++){for(var C$i=C$t.bones[C$e],C$n=!1,C$r=0;C$r<this.bones.length;C$r++)if(this.bones[C$r]==C$i){C$n=!0;break}C$n||this.bones.push(C$i)}for(C$e=0;C$e<C$t.constraints.length;C$e++){for(var C$s=C$t.constraints[C$e],C$n=!1,C$r=0;C$r<this.constraints.length;C$r++)if(this.constraints[C$r]==C$s){C$n=!0;break}C$n||this.constraints.push(C$s)}for(var C$o=C$t.getAttachments(),C$e=0;C$e<C$o.length;C$e++){var C$a=C$o[C$e];null!=C$a.attachment&&(C$a.attachment instanceof C$p.MeshAttachment?C$a.attachment=C$a.attachment.newLinkedMesh():C$a.attachment=C$a.attachment.copy(),this.setAttachment(C$a.slotIndex,C$a.name,C$a.attachment))}},C$i.prototype.getAttachment=function(C$t,C$e){C$t=this.attachments[C$t];return C$t?C$t[C$e]:null},C$i.prototype.removeAttachment=function(C$t,C$e){C$t=this.attachments[C$t];C$t&&(C$t[C$e]=null)},C$i.prototype.getAttachments=function(){for(var C$t=new Array,C$e=0;C$e<this.attachments.length;C$e++){var C$i=this.attachments[C$e];if(C$i)for(var C$n in C$i){var C$r=C$i[C$n];C$r&&C$t.push(new C$m(C$e,C$n,C$r))}}return C$t},C$i.prototype.getAttachmentsForSlot=function(C$t,C$e){var C$i=this.attachments[C$t];if(C$i)for(var C$n in C$i){var C$r=C$i[C$n];C$r&&C$e.push(new C$m(C$t,C$n,C$r))}},C$i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},C$i.prototype.attachAll=function(C$t,C$e){for(var C$i=0,C$n=0;C$n<C$t.slots.length;C$n++){var C$r=C$t.slots[C$n],C$s=C$r.getAttachment();if(C$s&&C$i<C$e.attachments.length){var C$o,C$a=C$e.attachments[C$i];for(C$o in C$a)if(C$s==C$a[C$o]){var C$c=this.getAttachment(C$i,C$o);null!=C$c&&C$r.setAttachment(C$c);break}}C$i++}},C$p.Skin=C$i,function(C$i){function C$t(C$t,C$e){if(this.deform=new Array,null==C$t)throw new Error("data cannot be null.");if(null==C$e)throw new Error("bone cannot be null.");this.data=C$t,this.bone=C$e,this.color=new C$i.Color,this.darkColor=null==C$t.darkColor?null:new C$i.Color,this.setToSetupPose()}C$t.prototype.getSkeleton=function(){return this.bone.skeleton},C$t.prototype.getAttachment=function(){return this.attachment},C$t.prototype.setAttachment=function(C$t){this.attachment!=C$t&&(this.attachment=C$t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},C$t.prototype.setAttachmentTime=function(C$t){this.attachmentTime=this.bone.skeleton.time-C$t},C$t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},C$t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},C$i.Slot=C$t}(C$t=C$t||{}),(C$y=C$t=C$t||{}).SlotData=function(C$t,C$e,C$i){if(this.color=new C$y.Color(1,1,1,1),C$t<0)throw new Error("index must be >= 0.");if(null==C$e)throw new Error("name cannot be null.");if(null==C$i)throw new Error("boneData cannot be null.");this.index=C$t,this.name=C$e,this.boneData=C$i};var C$n=C$t=C$t||{};C$W.prototype.getImage=function(){return this._image},C$W.filterFromString=function(C$t){switch(C$t.toLowerCase()){case"nearest":return C$z.Nearest;case"linear":return C$z.Linear;case"mipmap":return C$z.MipMap;case"mipmapnearestnearest":return C$z.MipMapNearestNearest;case"mipmaplinearnearest":return C$z.MipMapLinearNearest;case"mipmapnearestlinear":return C$z.MipMapNearestLinear;case"mipmaplinearlinear":return C$z.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+C$t)}},C$W.wrapFromString=function(C$t){switch(C$t.toLowerCase()){case"mirroredtepeat":return C$U.MirroredRepeat;case"clamptoedge":return C$U.ClampToEdge;case"repeat":return C$U.Repeat;default:throw new Error("Unknown texture wrap "+C$t)}};var C$z,C$U,C$e=C$W;function C$W(C$t){this._image=C$t}C$n.Texture=C$e,(C$r=C$z=C$n.TextureFilter||(C$n.TextureFilter={}))[C$r.Nearest=9728]="Nearest",C$r[C$r.Linear=9729]="Linear",C$r[C$r.MipMap=9987]="MipMap",C$r[C$r.MipMapNearestNearest=9984]="MipMapNearestNearest",C$r[C$r.MipMapLinearNearest=9985]="MipMapLinearNearest",C$r[C$r.MipMapNearestLinear=9986]="MipMapNearestLinear",C$r[C$r.MipMapLinearLinear=9987]="MipMapLinearLinear",(C$r=C$U=C$n.TextureWrap||(C$n.TextureWrap={}))[C$r.MirroredRepeat=33648]="MirroredRepeat",C$r[C$r.ClampToEdge=33071]="ClampToEdge",C$r[C$r.Repeat=10497]="Repeat",C$n.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},C$V(C$Y,C$X=C$e),C$Y.prototype.setFilters=function(C$t,C$e){},C$Y.prototype.setWraps=function(C$t,C$e){},C$Y.prototype.dispose=function(){};var C$X,C$r=C$Y;function C$Y(){return null!==C$X&&C$X.apply(this,arguments)||this}function C$q(C$t){C$t=C$g.call(this,C$t,0,!1)||this;return C$t.bones=new Array,C$t.rotateMix=0,C$t.translateMix=0,C$t.scaleMix=0,C$t.shearMix=0,C$t.offsetRotation=0,C$t.offsetX=0,C$t.offsetY=0,C$t.offsetScaleX=0,C$t.offsetScaleY=0,C$t.offsetShearY=0,C$t.relative=!1,C$t.local=!1,C$t}function C$J(C$t){if(null==C$t)throw new Error("name cannot be null.");this.name=C$t}function C$Z(C$t){C$t=C$b.call(this,C$t)||this;return C$t.id=(65535&C$Z.nextID++)<<11,C$t.worldVerticesLength=0,C$t.deformAttachment=C$t}function C$K(C$t){C$t=C$C.call(this,C$t)||this;return C$t.color=new C$A.Color(1,1,1,1),C$t}function C$Q(C$t){C$t=C$T.call(this,C$t)||this;return C$t.color=new C$S.Color(.2275,.2275,.8078,1),C$t}function C$$(C$t){C$t=C$w.call(this,C$t)||this;return C$t.color=new C$u.Color(1,1,1,1),C$t.tempColor=new C$u.Color(0,0,0,0),C$t}function C$tt(C$t){C$t=C$M.call(this,C$t)||this;return C$t.closed=!1,C$t.constantSpeed=!1,C$t.color=new C$E.Color(1,1,1,1),C$t}function C$et(C$t){C$t=C$B.call(this,C$t)||this;return C$t.color=new C$I.Color(.38,.94,0,1),C$t}function C$_(C$t){C$t=C$P.call(this,C$t)||this;return C$t.x=0,C$t.y=0,C$t.scaleX=1,C$t.scaleY=1,C$t.rotation=0,C$t.width=0,C$t.height=0,C$t.color=new C$R.Color(1,1,1,1),C$t.offset=C$R.Utils.newFloatArray(8),C$t.uvs=C$R.Utils.newFloatArray(8),C$t.tempColor=new C$R.Color(1,1,1,1),C$t}function C$it(C$t,C$e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=C$t,this.interpolation=C$e}C$n.FakeTexture=C$r,function(C$u){function C$t(C$t,C$e){this.pages=new Array,this.regions=new Array,this.load(C$t,C$e)}C$t.prototype.load=function(C$h,C$t){if(null==C$t)throw new Error("textureLoader cannot be null.");for(var C$e=new C$_(C$h),C$i=new Array(4),C$n=null;;){var C$r,C$s,C$o,C$a,C$c,C$l=C$e.readLine();if(null==C$l)break;0==(C$l=C$l.trim()).length?C$n=null:C$n?((C$r=new C$f).name=C$l,C$r.page=C$n,"true"==(C$c=C$e.readValue()).toLocaleLowerCase()?C$r.degrees=90:"false"==C$c.toLocaleLowerCase()?C$r.degrees=0:C$r.degrees=parseFloat(C$c),C$r.rotate=90==C$r.degrees,C$e.readTuple(C$i),C$c=parseInt(C$i[0]),C$s=parseInt(C$i[1]),C$e.readTuple(C$i),C$o=parseInt(C$i[0]),C$a=parseInt(C$i[1]),C$r.u=C$c/C$n.width,C$r.v=C$s/C$n.height,C$r.rotate?(C$r.u2=(C$c+C$a)/C$n.width,C$r.v2=(C$s+C$o)/C$n.height):(C$r.u2=(C$c+C$o)/C$n.width,C$r.v2=(C$s+C$a)/C$n.height),C$r.x=C$c,C$r.y=C$s,C$r.width=Math.abs(C$o),C$r.height=Math.abs(C$a),4==C$e.readTuple(C$i)&&4==C$e.readTuple(C$i)&&C$e.readTuple(C$i),C$r.originalWidth=parseInt(C$i[0]),C$r.originalHeight=parseInt(C$i[1]),C$e.readTuple(C$i),C$r.offsetX=parseInt(C$i[0]),C$r.offsetY=parseInt(C$i[1]),C$r.index=parseInt(C$e.readValue()),C$r.texture=C$n.texture,this.regions.push(C$r)):((C$n=new C$d).name=C$l,2==C$e.readTuple(C$i)&&(C$n.width=parseInt(C$i[0]),C$n.height=parseInt(C$i[1]),C$e.readTuple(C$i)),C$e.readTuple(C$i),C$n.minFilter=C$u.Texture.filterFromString(C$i[0]),C$n.magFilter=C$u.Texture.filterFromString(C$i[1]),C$c=C$e.readValue(),C$n.uWrap=C$u.TextureWrap.ClampToEdge,C$n.vWrap=C$u.TextureWrap.ClampToEdge,"x"==C$c?C$n.uWrap=C$u.TextureWrap.Repeat:"y"==C$c?C$n.vWrap=C$u.TextureWrap.Repeat:"xy"==C$c&&(C$n.uWrap=C$n.vWrap=C$u.TextureWrap.Repeat),C$n.texture=C$t(C$l),C$n.texture.setFilters(C$n.minFilter,C$n.magFilter),C$n.texture.setWraps(C$n.uWrap,C$n.vWrap),C$n.width=C$n.texture.getImage().width,C$n.height=C$n.texture.getImage().height,this.pages.push(C$n))}},C$t.prototype.findRegion=function(C$t){for(var C$e=0;C$e<this.regions.length;C$e++)if(this.regions[C$e].name==C$t)return this.regions[C$e];return null},C$t.prototype.dispose=function(){for(var C$t=0;C$t<this.pages.length;C$t++)this.pages[C$t].texture.dispose()},C$u.TextureAtlas=C$t;C$e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},C$e.prototype.readValue=function(){var C$t=this.readLine(),C$e=C$t.indexOf(":");if(-1==C$e)throw new Error("Invalid line: "+C$t);return C$t.substring(C$e+1).trim()},C$e.prototype.readTuple=function(C$t){var C$e=this.readLine(),C$i=C$e.indexOf(":");if(-1==C$i)throw new Error("Invalid line: "+C$e);for(var C$n=0,C$r=C$i+1;C$n<3;C$n++){var C$s=C$e.indexOf(",",C$r);if(-1==C$s)break;C$t[C$n]=C$e.substr(C$r,C$s-C$r).trim(),C$r=C$s+1}return C$t[C$n]=C$e.substring(C$r).trim(),C$n+1};var C$_=C$e;function C$e(C$t){this.index=0,this.lines=C$t.split(/\r\n|\r|\n/)}var C$i,C$d=function(){},C$f=(C$u.TextureAtlasPage=C$d,C$i=C$u.TextureRegion,C$V(C$n,C$i),C$n);function C$n(){return null!==C$i&&C$i.apply(this,arguments)||this}C$u.TextureAtlasRegion=C$f}(C$t=C$t||{}),function(C$T){function C$t(C$t,C$e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new C$T.Vector2,this.active=!1,null==C$t)throw new Error("data cannot be null.");if(null==C$e)throw new Error("skeleton cannot be null.");this.data=C$t,this.rotateMix=C$t.rotateMix,this.translateMix=C$t.translateMix,this.scaleMix=C$t.scaleMix,this.shearMix=C$t.shearMix,this.bones=new Array;for(var C$i=0;C$i<C$t.bones.length;C$i++)this.bones.push(C$e.findBone(C$t.bones[C$i].name));this.target=C$e.findBone(C$t.target.name)}C$t.prototype.isActive=function(){return this.active},C$t.prototype.apply=function(){this.update()},C$t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},C$t.prototype.applyAbsoluteWorld=function(){for(var C$h=this.rotateMix,C$u=this.translateMix,C$_=this.scaleMix,C$d=this.shearMix,C$t=this.target,C$e=C$t.a,C$f=C$t.b,C$p=C$t.c,C$m=C$t.d,C$y=0<C$e*C$m-C$f*C$p?C$T.MathUtils.degRad:-C$T.MathUtils.degRad,C$g=this.data.offsetRotation*C$y,C$v=this.data.offsetShearY*C$y,C$x=this.bones,C$b=0,C$A=C$x.length;C$b<C$A;C$b++){var C$C,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l=C$x[C$b],C$S=!1;0!=C$h&&(C$i=C$l.a,C$r=C$l.b,C$n=C$l.c,C$s=C$l.d,(C$a=Math.atan2(C$p,C$e)-Math.atan2(C$n,C$i)+C$g)>C$T.MathUtils.PI?C$a-=C$T.MathUtils.PI2:C$a<-C$T.MathUtils.PI&&(C$a+=C$T.MathUtils.PI2),C$a*=C$h,C$C=Math.cos(C$a),C$o=Math.sin(C$a),C$l.a=C$C*C$i-C$o*C$n,C$l.b=C$C*C$r-C$o*C$s,C$l.c=C$o*C$i+C$C*C$n,C$l.d=C$o*C$r+C$C*C$s,C$S=!0),0!=C$u&&(C$i=this.temp,C$t.localToWorld(C$i.set(this.data.offsetX,this.data.offsetY)),C$l.worldX+=(C$i.x-C$l.worldX)*C$u,C$l.worldY+=(C$i.y-C$l.worldY)*C$u,C$S=!0),0<C$_&&(C$c=Math.sqrt(C$l.a*C$l.a+C$l.c*C$l.c),C$n=Math.sqrt(C$e*C$e+C$p*C$p),1e-5<C$c&&(C$c=(C$c+(C$n-C$c+this.data.offsetScaleX)*C$_)/C$c),C$l.a*=C$c,C$l.c*=C$c,C$c=Math.sqrt(C$l.b*C$l.b+C$l.d*C$l.d),C$n=Math.sqrt(C$f*C$f+C$m*C$m),1e-5<C$c&&(C$c=(C$c+(C$n-C$c+this.data.offsetScaleY)*C$_)/C$c),C$l.b*=C$c,C$l.d*=C$c,C$S=!0),0<C$d&&(C$r=C$l.b,C$s=C$l.d,C$o=Math.atan2(C$s,C$r),(C$a=Math.atan2(C$m,C$f)-Math.atan2(C$p,C$e)-(C$o-Math.atan2(C$l.c,C$l.a)))>C$T.MathUtils.PI?C$a-=C$T.MathUtils.PI2:C$a<-C$T.MathUtils.PI&&(C$a+=C$T.MathUtils.PI2),C$a=C$o+(C$a+C$v)*C$d,C$c=Math.sqrt(C$r*C$r+C$s*C$s),C$l.b=Math.cos(C$a)*C$c,C$l.d=Math.sin(C$a)*C$c,C$S=!0),C$S&&(C$l.appliedValid=!1)}},C$t.prototype.applyRelativeWorld=function(){for(var C$h=this.rotateMix,C$u=this.translateMix,C$_=this.scaleMix,C$d=this.shearMix,C$t=this.target,C$e=C$t.a,C$f=C$t.b,C$i=C$t.c,C$p=C$t.d,C$m=0<C$e*C$p-C$f*C$i?C$T.MathUtils.degRad:-C$T.MathUtils.degRad,C$y=this.data.offsetRotation*C$m,C$g=this.data.offsetShearY*C$m,C$v=this.bones,C$x=0,C$b=C$v.length;C$x<C$b;C$x++){var C$A,C$n,C$C,C$r,C$s,C$o,C$a,C$c,C$l=C$v[C$x],C$S=!1;0!=C$h&&(C$r=C$l.a,C$o=C$l.b,C$A=C$l.c,C$a=C$l.d,(C$s=Math.atan2(C$i,C$e)+C$y)>C$T.MathUtils.PI?C$s-=C$T.MathUtils.PI2:C$s<-C$T.MathUtils.PI&&(C$s+=C$T.MathUtils.PI2),C$s*=C$h,C$n=Math.cos(C$s),C$C=Math.sin(C$s),C$l.a=C$n*C$r-C$C*C$A,C$l.b=C$n*C$o-C$C*C$a,C$l.c=C$C*C$r+C$n*C$A,C$l.d=C$C*C$o+C$n*C$a,C$S=!0),0!=C$u&&(C$r=this.temp,C$t.localToWorld(C$r.set(this.data.offsetX,this.data.offsetY)),C$l.worldX+=C$r.x*C$u,C$l.worldY+=C$r.y*C$u,C$S=!0),0<C$_&&(C$c=(Math.sqrt(C$e*C$e+C$i*C$i)-1+this.data.offsetScaleX)*C$_+1,C$l.a*=C$c,C$l.c*=C$c,C$c=(Math.sqrt(C$f*C$f+C$p*C$p)-1+this.data.offsetScaleY)*C$_+1,C$l.b*=C$c,C$l.d*=C$c,C$S=!0),0<C$d&&((C$s=Math.atan2(C$p,C$f)-Math.atan2(C$i,C$e))>C$T.MathUtils.PI?C$s-=C$T.MathUtils.PI2:C$s<-C$T.MathUtils.PI&&(C$s+=C$T.MathUtils.PI2),C$o=C$l.b,C$a=C$l.d,C$s=Math.atan2(C$a,C$o)+(C$s-C$T.MathUtils.PI/2+C$g)*C$d,C$c=Math.sqrt(C$o*C$o+C$a*C$a),C$l.b=Math.cos(C$s)*C$c,C$l.d=Math.sin(C$s)*C$c,C$S=!0),C$S&&(C$l.appliedValid=!1)}},C$t.prototype.applyAbsoluteLocal=function(){for(var C$h=this.rotateMix,C$t=this.translateMix,C$e=this.scaleMix,C$u=this.shearMix,C$i=this.target,C$_=(C$i.appliedValid||C$i.updateAppliedTransform(),this.bones),C$n=0,C$d=C$_.length;C$n<C$d;C$n++){var C$r,C$s=C$_[C$n],C$o=(C$s.appliedValid||C$s.updateAppliedTransform(),C$s.arotation),C$a=(0!=C$h&&(C$r=C$i.arotation-C$o+this.data.offsetRotation,C$o+=(C$r-=360*(16384-(16384.499999999996-C$r/360|0)))*C$h),C$s.ax),C$f=C$s.ay,C$c=(0!=C$t&&(C$a+=(C$i.ax-C$a+this.data.offsetX)*C$t,C$f+=(C$i.ay-C$f+this.data.offsetY)*C$t),C$s.ascaleX),C$l=C$s.ascaleY,C$p=(0!=C$e&&(1e-5<C$c&&(C$c=(C$c+(C$i.ascaleX-C$c+this.data.offsetScaleX)*C$e)/C$c),1e-5<C$l&&(C$l=(C$l+(C$i.ascaleY-C$l+this.data.offsetScaleY)*C$e)/C$l)),C$s.ashearY);0!=C$u&&(C$r=C$i.ashearY-C$p+this.data.offsetShearY,C$r-=360*(16384-(16384.499999999996-C$r/360|0)),C$s.shearY+=C$r*C$u),C$s.updateWorldTransformWith(C$a,C$f,C$o,C$c,C$l,C$s.ashearX,C$p)}},C$t.prototype.applyRelativeLocal=function(){for(var C$t=this.rotateMix,C$e=this.translateMix,C$i=this.scaleMix,C$n=this.shearMix,C$r=this.target,C$s=(C$r.appliedValid||C$r.updateAppliedTransform(),this.bones),C$o=0,C$h=C$s.length;C$o<C$h;C$o++){var C$a=C$s[C$o],C$u=(C$a.appliedValid||C$a.updateAppliedTransform(),C$a.arotation),C$_=(0!=C$t&&(C$u+=(C$r.arotation+this.data.offsetRotation)*C$t),C$a.ax),C$d=C$a.ay,C$c=(0!=C$e&&(C$_+=(C$r.ax+this.data.offsetX)*C$e,C$d+=(C$r.ay+this.data.offsetY)*C$e),C$a.ascaleX),C$l=C$a.ascaleY,C$f=(0!=C$i&&(1e-5<C$c&&(C$c*=(C$r.ascaleX-1+this.data.offsetScaleX)*C$i+1),1e-5<C$l&&(C$l*=(C$r.ascaleY-1+this.data.offsetScaleY)*C$i+1)),C$a.ashearY);0!=C$n&&(C$f+=(C$r.ashearY+this.data.offsetShearY)*C$n),C$a.updateWorldTransformWith(C$_,C$d,C$u,C$c,C$l,C$a.ashearX,C$f)}},C$T.TransformConstraint=C$t}(C$t=C$t||{}),C$e=C$t=C$t||{},C$g=C$e.ConstraintData,C$V(C$q,C$g),C$e.TransformConstraintData=C$q,function(C$t){function C$z(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new C$t.Pool(function(){return new Array}),this.polygonIndicesPool=new C$t.Pool(function(){return new Array})}C$z.prototype.triangulate=function(C$h){for(var C$t=C$h,C$e=C$h.length>>1,C$i=this.indicesArray,C$n=C$i.length=0;C$n<C$e;C$n++)C$i[C$n]=C$n;for(var C$r=this.isConcaveArray,C$n=C$r.length=0,C$u=C$e;C$n<C$u;++C$n)C$r[C$n]=C$z.isConcave(C$n,C$e,C$t,C$i);var C$s=this.triangles;for(C$s.length=0;3<C$e;){for(var C$o=C$e-1,C$n=0,C$a=1;;){C$t:if(!C$r[C$n]){for(var C$_=C$i[C$o]<<1,C$d=C$i[C$n]<<1,C$f=C$i[C$a]<<1,C$p=C$t[C$_],C$m=C$t[1+C$_],C$y=C$t[C$d],C$g=C$t[1+C$d],C$v=C$t[C$f],C$x=C$t[1+C$f],C$c=(C$a+1)%C$e;C$c!=C$o;C$c=(C$c+1)%C$e)if(C$r[C$c]){var C$l=C$i[C$c]<<1,C$b=C$t[C$l],C$l=C$t[1+C$l];if(C$z.positiveArea(C$v,C$x,C$p,C$m,C$b,C$l)&&C$z.positiveArea(C$p,C$m,C$y,C$g,C$b,C$l)&&C$z.positiveArea(C$y,C$g,C$v,C$x,C$b,C$l))break C$t}break}if(0==C$a){for(;C$r[C$n]&&0<--C$n;);break}C$o=C$n,C$a=((C$n=C$a)+1)%C$e}C$s.push(C$i[(C$e+C$n-1)%C$e]),C$s.push(C$i[C$n]),C$s.push(C$i[(C$n+1)%C$e]),C$i.splice(C$n,1),C$r.splice(C$n,1);var C$A=(--C$e+C$n-1)%C$e,C$C=C$n==C$e?0:C$n;C$r[C$A]=C$z.isConcave(C$A,C$e,C$t,C$i),C$r[C$C]=C$z.isConcave(C$C,C$e,C$t,C$i)}return 3==C$e&&(C$s.push(C$i[2]),C$s.push(C$i[0]),C$s.push(C$i[1])),C$s},C$z.prototype.decompose=function(C$h,C$u){for(var C$t=C$h,C$e=this.convexPolygons,C$i=(this.polygonPool.freeAll(C$e),C$e.length=0,this.convexPolygonsIndices),C$n=(this.polygonIndicesPool.freeAll(C$i),C$i.length=0,this.polygonIndicesPool.obtain()),C$r=(C$n.length=0,this.polygonPool.obtain()),C$_=-1,C$d=C$r.length=0,C$s=0,C$f=C$u.length;C$s<C$f;C$s+=3){var C$p=C$u[C$s]<<1,C$m=C$u[C$s+1]<<1,C$y=C$u[C$s+2]<<1,C$g=C$t[C$p],C$v=C$t[1+C$p],C$x=C$t[C$m],C$b=C$t[1+C$m],C$o=C$t[C$y],C$a=C$t[1+C$y],C$A=!1;C$_==C$p&&(C$c=C$r.length-4,C$M=C$z.winding(C$r[C$c],C$r[C$c+1],C$r[C$c+2],C$r[C$c+3],C$o,C$a),C$I=C$z.winding(C$o,C$a,C$r[0],C$r[1],C$r[2],C$r[3]),C$M==C$d&&C$I==C$d&&(C$r.push(C$o),C$r.push(C$a),C$n.push(C$y),C$A=!0)),C$A||(0<C$r.length?(C$e.push(C$r),C$i.push(C$n)):(this.polygonPool.free(C$r),this.polygonIndicesPool.free(C$n)),(C$r=this.polygonPool.obtain()).length=0,C$r.push(C$g),C$r.push(C$v),C$r.push(C$x),C$r.push(C$b),C$r.push(C$o),C$r.push(C$a),(C$n=this.polygonIndicesPool.obtain()).length=0,C$n.push(C$p),C$n.push(C$m),C$n.push(C$y),C$d=C$z.winding(C$g,C$v,C$x,C$b,C$o,C$a),C$_=C$p)}0<C$r.length&&(C$e.push(C$r),C$i.push(C$n));for(C$s=0,C$f=C$e.length;C$s<C$f;C$s++)if(0!=(C$n=C$i[C$s]).length)for(var C$c,C$C,C$S,C$T,C$w,C$E,C$M,C$I,C$B=C$n[0],C$R=C$n[C$n.length-1],C$P=(C$r=C$e[C$s])[C$c=C$r.length-4],C$D=C$r[C$c+1],C$L=C$r[C$c+2],C$V=C$r[C$c+3],C$O=C$r[0],C$F=C$r[1],C$N=C$r[2],C$k=C$r[3],C$G=C$z.winding(C$P,C$D,C$L,C$V,C$O,C$F),C$l=0;C$l<C$f;C$l++)C$l!=C$s&&(3==(C$C=C$i[C$l]).length&&(C$S=C$C[0],C$T=C$C[1],C$w=C$C[2],C$o=(C$E=C$e[C$l])[C$E.length-2],C$a=C$E[C$E.length-1],C$S==C$B&&C$T==C$R&&(C$M=C$z.winding(C$P,C$D,C$L,C$V,C$o,C$a),C$I=C$z.winding(C$o,C$a,C$O,C$F,C$N,C$k),C$M==C$G&&C$I==C$G&&(C$E.length=0,C$C.length=0,C$r.push(C$o),C$r.push(C$a),C$n.push(C$w),C$P=C$L,C$D=C$V,C$L=C$o,C$V=C$a,C$l=0))));for(C$s=C$e.length-1;0<=C$s;C$s--)0==(C$r=C$e[C$s]).length&&(C$e.splice(C$s,1),this.polygonPool.free(C$r),C$n=C$i[C$s],C$i.splice(C$s,1),this.polygonIndicesPool.free(C$n));return C$e},C$z.isConcave=function(C$t,C$e,C$i,C$n){var C$r=C$n[(C$e+C$t-1)%C$e]<<1,C$s=C$n[C$t]<<1,C$n=C$n[(C$t+1)%C$e]<<1;return!this.positiveArea(C$i[C$r],C$i[1+C$r],C$i[C$s],C$i[1+C$s],C$i[C$n],C$i[1+C$n])},C$z.positiveArea=function(C$t,C$e,C$i,C$n,C$r,C$s){return 0<=C$t*(C$s-C$n)+C$i*(C$e-C$s)+C$r*(C$n-C$e)},C$z.winding=function(C$t,C$e,C$i,C$n,C$r,C$s){C$i-=C$t,C$n-=C$e;return 0<=C$r*C$n-C$s*C$i+C$i*C$e-C$t*C$n?1:-1},C$t.Triangulator=C$z}(C$t=C$t||{}),function(C$t){function C$e(){this.array=new Array}function C$i(C$t,C$e,C$i,C$n){void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),void 0===C$n&&(C$n=0),this.r=C$t=void 0===C$t?0:C$t,this.g=C$e,this.b=C$i,this.a=C$n}function C$n(){}C$e.prototype.add=function(C$t){var C$e=this.contains(C$t);return this.array[0|C$t]=0|C$t,!C$e},C$e.prototype.contains=function(C$t){return null!=this.array[0|C$t]},C$e.prototype.remove=function(C$t){this.array[0|C$t]=void 0},C$e.prototype.clear=function(){this.array.length=0},C$t.IntSet=C$e,C$i.prototype.set=function(C$t,C$e,C$i,C$n){return this.r=C$t,this.g=C$e,this.b=C$i,this.a=C$n,this.clamp(),this},C$i.prototype.setFromColor=function(C$t){return this.r=C$t.r,this.g=C$t.g,this.b=C$t.b,this.a=C$t.a,this},C$i.prototype.setFromString=function(C$t){return C$t="#"==C$t.charAt(0)?C$t.substr(1):C$t,this.r=parseInt(C$t.substr(0,2),16)/255,this.g=parseInt(C$t.substr(2,2),16)/255,this.b=parseInt(C$t.substr(4,2),16)/255,this.a=(8!=C$t.length?255:parseInt(C$t.substr(6,2),16))/255,this},C$i.prototype.add=function(C$t,C$e,C$i,C$n){return this.r+=C$t,this.g+=C$e,this.b+=C$i,this.a+=C$n,this.clamp(),this},C$i.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},C$i.rgba8888ToColor=function(C$t,C$e){C$t.r=((4278190080&C$e)>>>24)/255,C$t.g=((16711680&C$e)>>>16)/255,C$t.b=((65280&C$e)>>>8)/255,C$t.a=(255&C$e)/255},C$i.rgb888ToColor=function(C$t,C$e){C$t.r=((16711680&C$e)>>>16)/255,C$t.g=((65280&C$e)>>>8)/255,C$t.b=(255&C$e)/255},C$i.WHITE=new C$i(1,1,1,1),C$i.RED=new C$i(1,0,0,1),C$i.GREEN=new C$i(0,1,0,1),C$i.BLUE=new C$i(0,0,1,1),C$i.MAGENTA=new C$i(1,0,1,1),C$t.Color=C$i,C$n.clamp=function(C$t,C$e,C$i){return C$t<C$e?C$e:C$i<C$t?C$i:C$t},C$n.cosDeg=function(C$t){return Math.cos(C$t*C$n.degRad)},C$n.sinDeg=function(C$t){return Math.sin(C$t*C$n.degRad)},C$n.signum=function(C$t){return 0<C$t?1:C$t<0?-1:0},C$n.toInt=function(C$t){return 0<C$t?Math.floor(C$t):Math.ceil(C$t)},C$n.cbrt=function(C$t){var C$e=Math.pow(Math.abs(C$t),1/3);return C$t<0?-C$e:C$e},C$n.randomTriangular=function(C$t,C$e){return C$n.randomTriangularWith(C$t,C$e,.5*(C$t+C$e))},C$n.randomTriangularWith=function(C$t,C$e,C$i){var C$n=Math.random(),C$r=C$e-C$t;return C$n<=(C$i-C$t)/C$r?C$t+Math.sqrt(C$n*C$r*(C$i-C$t)):C$e-Math.sqrt((1-C$n)*C$r*(C$e-C$i))},C$n.PI2=2*(C$n.PI=3.1415927),C$n.radDeg=C$n.radiansToDegrees=180/C$n.PI,C$n.degRad=C$n.degreesToRadians=C$n.PI/180,C$t.MathUtils=C$n;C$h.prototype.apply=function(C$t,C$e,C$i){return C$t+(C$e-C$t)*this.applyInternal(C$i)};var C$r=C$h;function C$h(){}C$t.Interpolation=C$r;C$V(C$s,C$u=C$r),C$s.prototype.applyInternal=function(C$t){return C$t<=.5?Math.pow(2*C$t,this.power)/2:Math.pow(2*(C$t-1),this.power)/(this.power%2==0?-2:2)+1};var C$u,C$r=C$s;function C$s(C$t){var C$e=C$u.call(this)||this;return C$e.power=2,C$e.power=C$t,C$e}C$t.Pow=C$r;C$V(C$d,C$_=C$r),C$d.prototype.applyInternal=function(C$t){return Math.pow(C$t-1,this.power)*(this.power%2==0?-1:1)+1};var C$_,C$r=C$d;function C$d(C$t){return C$_.call(this,C$t)||this}function C$o(){}function C$f(){}function C$a(C$t){this.items=new Array,this.instantiator=C$t}function C$c(C$t,C$e){void 0===C$e&&(C$e=0),this.x=C$t=void 0===C$t?0:C$t,this.y=C$e}function C$p(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function C$l(C$t){void 0===C$t&&(C$t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(C$t)}C$t.PowOut=C$r,C$o.arrayCopy=function(C$t,C$e,C$i,C$n,C$r){for(var C$s=C$e,C$o=C$n;C$s<C$e+C$r;C$s++,C$o++)C$i[C$o]=C$t[C$s]},C$o.setArraySize=function(C$t,C$e,C$i){void 0===C$i&&(C$i=0);var C$n=C$t.length;if(C$n==C$e)return C$t;if(C$n<(C$t.length=C$e))for(var C$r=C$n;C$r<C$e;C$r++)C$t[C$r]=C$i;return C$t},C$o.ensureArrayCapacity=function(C$t,C$e,C$i){return void 0===C$i&&(C$i=0),C$t.length>=C$e?C$t:C$o.setArraySize(C$t,C$e,C$i)},C$o.newArray=function(C$t,C$e){for(var C$i=new Array(C$t),C$n=0;C$n<C$t;C$n++)C$i[C$n]=C$e;return C$i},C$o.newFloatArray=function(C$t){if(C$o.SUPPORTS_TYPED_ARRAYS)return new Float32Array(C$t);for(var C$e=new Array(C$t),C$i=0;C$i<C$e.length;C$i++)C$e[C$i]=0;return C$e},C$o.newShortArray=function(C$t){if(C$o.SUPPORTS_TYPED_ARRAYS)return new Int16Array(C$t);for(var C$e=new Array(C$t),C$i=0;C$i<C$e.length;C$i++)C$e[C$i]=0;return C$e},C$o.toFloatArray=function(C$t){return C$o.SUPPORTS_TYPED_ARRAYS?new Float32Array(C$t):C$t},C$o.toSinglePrecision=function(C$t){return C$o.SUPPORTS_TYPED_ARRAYS?Math.fround(C$t):C$t},C$o.webkit602BugfixHelper=function(C$t,C$e){},C$o.contains=function(C$t,C$e,C$i){void 0===C$i&&(C$i=!0);for(var C$n=0;C$n<C$t.length;C$n++)if(C$t[C$n]==C$e)return!0;return!1},C$o.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,C$t.Utils=C$o,C$f.logBones=function(C$t){for(var C$e=0;C$e<C$t.bones.length;C$e++){var C$i=C$t.bones[C$e];console.log(C$i.data.name+", "+C$i.a+", "+C$i.b+", "+C$i.c+", "+C$i.d+", "+C$i.worldX+", "+C$i.worldY)}},C$t.DebugUtils=C$f,C$a.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},C$a.prototype.free=function(C$t){C$t.reset&&C$t.reset(),this.items.push(C$t)},C$a.prototype.freeAll=function(C$t){for(var C$e=0;C$e<C$t.length;C$e++)C$t[C$e].reset&&C$t[C$e].reset(),this.items[C$e]=C$t[C$e]},C$a.prototype.clear=function(){this.items.length=0},C$t.Pool=C$a,C$c.prototype.set=function(C$t,C$e){return this.x=C$t,this.y=C$e,this},C$c.prototype.length=function(){var C$t=this.x,C$e=this.y;return Math.sqrt(C$t*C$t+C$e*C$e)},C$c.prototype.normalize=function(){var C$t=this.length();return 0!=C$t&&(this.x/=C$t,this.y/=C$t),this},C$t.Vector2=C$c,C$p.prototype.update=function(){var C$t=Date.now()/1e3;this.delta=C$t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=C$t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},C$t.TimeKeeper=C$p,C$l.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},C$l.prototype.addValue=function(C$t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=C$t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},C$l.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var C$t=0,C$e=0;C$e<this.values.length;C$e++)C$t+=this.values[C$e];this.mean=C$t/this.values.length,this.dirty=!1}return this.mean}return 0},C$t.WindowedMean=C$l}(C$t=C$t||{}),Math.fround||(Math.fround=(C$v=new Float32Array(1),function(C$t){return C$v[0]=C$t,C$v[0]})),(C$x=C$t=C$t||{}).Attachment=C$J,C$V(C$Z,C$b=C$J),C$Z.prototype.computeWorldVertices=function(C$h,C$u,C$_,C$t,C$d,C$f){C$_=C$d+(C$_>>1)*C$f;var C$p=C$h.bone.skeleton,C$m=C$h.deform,C$e=this.vertices,C$i=this.bones;if(null!=C$i){for(var C$n=0,C$y=0,C$g=0;C$g<C$u;C$g+=2)C$n+=(C$r=C$i[C$n])+1,C$y+=C$r;var C$v=C$p.bones;if(0==C$m.length)for(C$c=C$d,C$l=3*C$y;C$c<C$_;C$c+=C$f){var C$x=0,C$b=0,C$r=C$i[C$n++];for(C$r+=C$n;C$n<C$r;C$n++,C$l+=3){var C$s=C$v[C$i[C$n]],C$o=C$e[C$l],C$a=C$e[C$l+1],C$A=C$e[C$l+2];C$x+=(C$o*C$s.a+C$a*C$s.b+C$s.worldX)*C$A,C$b+=(C$o*C$s.c+C$a*C$s.d+C$s.worldY)*C$A}C$t[C$c]=C$x,C$t[C$c+1]=C$b}else for(var C$C=C$m,C$c=C$d,C$l=3*C$y,C$S=C$y<<1;C$c<C$_;C$c+=C$f){C$x=0,C$b=0,C$r=C$i[C$n++];for(C$r+=C$n;C$n<C$r;C$n++,C$l+=3,C$S+=2){C$s=C$v[C$i[C$n]],C$o=C$e[C$l]+C$C[C$S],C$a=C$e[C$l+1]+C$C[C$S+1],C$A=C$e[C$l+2];C$x+=(C$o*C$s.a+C$a*C$s.b+C$s.worldX)*C$A,C$b+=(C$o*C$s.c+C$a*C$s.d+C$s.worldY)*C$A}C$t[C$c]=C$x,C$t[C$c+1]=C$b}}else{0<C$m.length&&(C$e=C$m);for(var C$s,C$T=(C$s=C$h.bone).worldX,C$w=C$s.worldY,C$E=C$s.a,C$l=C$s.b,C$M=C$s.c,C$I=C$s.d,C$B=C$u,C$c=C$d;C$c<C$_;C$B+=2,C$c+=C$f){var C$o=C$e[C$B],C$a=C$e[C$B+1];C$t[C$c]=C$o*C$E+C$a*C$l+C$T,C$t[C$c+1]=C$o*C$M+C$a*C$I+C$w}}},C$Z.prototype.copyTo=function(C$t){null!=this.bones?(C$t.bones=new Array(this.bones.length),C$x.Utils.arrayCopy(this.bones,0,C$t.bones,0,this.bones.length)):C$t.bones=null,null!=this.vertices?(C$t.vertices=C$x.Utils.newFloatArray(this.vertices.length),C$x.Utils.arrayCopy(this.vertices,0,C$t.vertices,0,this.vertices.length)):C$t.vertices=null,C$t.worldVerticesLength=this.worldVerticesLength,C$t.deformAttachment=this.deformAttachment},C$Z.nextID=0,C$x.VertexAttachment=C$Z,(C$n=(C$n=C$t=C$t||{}).AttachmentType||(C$n.AttachmentType={}))[C$n.Region=0]="Region",C$n[C$n.BoundingBox=1]="BoundingBox",C$n[C$n.Mesh=2]="Mesh",C$n[C$n.LinkedMesh=3]="LinkedMesh",C$n[C$n.Path=4]="Path",C$n[C$n.Point=5]="Point",C$n[C$n.Clipping=6]="Clipping",C$A=C$t=C$t||{},C$C=C$A.VertexAttachment,C$V(C$K,C$C),C$K.prototype.copy=function(){var C$t=new C$K(name);return this.copyTo(C$t),C$t.color.setFromColor(this.color),C$t},C$A.BoundingBoxAttachment=C$K,C$S=C$t=C$t||{},C$T=C$S.VertexAttachment,C$V(C$Q,C$T),C$Q.prototype.copy=function(){var C$t=new C$Q(name);return this.copyTo(C$t),C$t.endSlot=this.endSlot,C$t.color.setFromColor(this.color),C$t},C$S.ClippingAttachment=C$Q,C$u=C$t=C$t||{},C$w=C$u.VertexAttachment,C$V(C$$,C$w),C$$.prototype.updateUVs=function(){var C$t=this.regionUVs,C$e=(null!=this.uvs&&this.uvs.length==C$t.length||(this.uvs=C$u.Utils.newFloatArray(C$t.length)),this.uvs),C$h=this.uvs.length,C$i=this.region.u,C$n=this.region.v,C$r=0,C$s=0;if(this.region instanceof C$u.TextureAtlasRegion){var C$o=this.region,C$a=C$o.texture.getImage().width,C$c=C$o.texture.getImage().height;switch(C$o.degrees){case 90:C$i-=(C$o.originalHeight-C$o.offsetY-C$o.height)/C$a,C$n-=(C$o.originalWidth-C$o.offsetX-C$o.width)/C$c;for(var C$r=C$o.originalHeight/C$a,C$s=C$o.originalWidth/C$c,C$l=0;C$l<C$h;C$l+=2)C$e[C$l]=C$i+C$t[C$l+1]*C$r,C$e[C$l+1]=C$n+(1-C$t[C$l])*C$s;return;case 180:C$i-=(C$o.originalWidth-C$o.offsetX-C$o.width)/C$a,C$n-=C$o.offsetY/C$c,C$r=C$o.originalWidth/C$a,C$s=C$o.originalHeight/C$c;for(C$l=0;C$l<C$h;C$l+=2)C$e[C$l]=C$i+(1-C$t[C$l])*C$r,C$e[C$l+1]=C$n+(1-C$t[C$l+1])*C$s;return;case 270:C$i-=C$o.offsetY/C$a,C$n-=C$o.offsetX/C$c,C$r=C$o.originalHeight/C$a,C$s=C$o.originalWidth/C$c;for(C$l=0;C$l<C$h;C$l+=2)C$e[C$l]=C$i+(1-C$t[C$l+1])*C$r,C$e[C$l+1]=C$n+C$t[C$l]*C$s;return}C$i-=C$o.offsetX/C$a,C$n-=(C$o.originalHeight-C$o.offsetY-C$o.height)/C$c,C$r=C$o.originalWidth/C$a,C$s=C$o.originalHeight/C$c}else null==this.region?(C$i=C$n=0,C$r=C$s=1):(C$r=this.region.u2-C$i,C$s=this.region.v2-C$n);for(C$l=0;C$l<C$h;C$l+=2)C$e[C$l]=C$i+C$t[C$l]*C$r,C$e[C$l+1]=C$n+C$t[C$l+1]*C$s},C$$.prototype.getParentMesh=function(){return this.parentMesh},C$$.prototype.setParentMesh=function(C$t){null!=(this.parentMesh=C$t)&&(this.bones=C$t.bones,this.vertices=C$t.vertices,this.worldVerticesLength=C$t.worldVerticesLength,this.regionUVs=C$t.regionUVs,this.triangles=C$t.triangles,this.hullLength=C$t.hullLength,this.worldVerticesLength=C$t.worldVerticesLength)},C$$.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var C$t=new C$$(this.name);return C$t.region=this.region,C$t.path=this.path,C$t.color.setFromColor(this.color),this.copyTo(C$t),C$t.regionUVs=new Array(this.regionUVs.length),C$u.Utils.arrayCopy(this.regionUVs,0,C$t.regionUVs,0,this.regionUVs.length),C$t.uvs=new Array(this.uvs.length),C$u.Utils.arrayCopy(this.uvs,0,C$t.uvs,0,this.uvs.length),C$t.triangles=new Array(this.triangles.length),C$u.Utils.arrayCopy(this.triangles,0,C$t.triangles,0,this.triangles.length),C$t.hullLength=this.hullLength,null!=this.edges&&(C$t.edges=new Array(this.edges.length),C$u.Utils.arrayCopy(this.edges,0,C$t.edges,0,this.edges.length)),C$t.width=this.width,C$t.height=this.height,C$t},C$$.prototype.newLinkedMesh=function(){var C$t=new C$$(this.name);return C$t.region=this.region,C$t.path=this.path,C$t.color.setFromColor(this.color),C$t.deformAttachment=this.deformAttachment,C$t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),C$t.updateUVs(),C$t},C$u.MeshAttachment=C$$,C$E=C$t=C$t||{},C$M=C$E.VertexAttachment,C$V(C$tt,C$M),C$tt.prototype.copy=function(){var C$t=new C$tt(name);return this.copyTo(C$t),C$t.lengths=new Array(this.lengths.length),C$E.Utils.arrayCopy(this.lengths,0,C$t.lengths,0,this.lengths.length),C$t.closed=closed,C$t.constantSpeed=this.constantSpeed,C$t.color.setFromColor(this.color),C$t},C$E.PathAttachment=C$tt,C$I=C$t=C$t||{},C$B=C$I.VertexAttachment,C$V(C$et,C$B),C$et.prototype.computeWorldPosition=function(C$t,C$e){return C$e.x=this.x*C$t.a+this.y*C$t.b+C$t.worldX,C$e.y=this.x*C$t.c+this.y*C$t.d+C$t.worldY,C$e},C$et.prototype.computeWorldRotation=function(C$t){var C$e=C$I.MathUtils.cosDeg(this.rotation),C$i=C$I.MathUtils.sinDeg(this.rotation),C$n=C$e*C$t.a+C$i*C$t.b,C$e=C$e*C$t.c+C$i*C$t.d;return Math.atan2(C$e,C$n)*C$I.MathUtils.radDeg},C$et.prototype.copy=function(){var C$t=new C$et(name);return C$t.x=this.x,C$t.y=this.y,C$t.rotation=this.rotation,C$t.color.setFromColor(this.color),C$t},C$I.PointAttachment=C$et,C$R=C$t=C$t||{},C$P=C$R.Attachment,C$V(C$_,C$P),C$_.prototype.updateOffset=function(){var C$t=this.width/this.region.originalWidth*this.scaleX,C$e=this.height/this.region.originalHeight*this.scaleY,C$i=-this.width/2*this.scaleX+this.region.offsetX*C$t,C$n=-this.height/2*this.scaleY+this.region.offsetY*C$e,C$t=C$i+this.region.width*C$t,C$e=C$n+this.region.height*C$e,C$r=this.rotation*Math.PI/180,C$s=Math.cos(C$r),C$r=Math.sin(C$r),C$o=C$i*C$s+this.x,C$i=C$i*C$r,C$a=C$n*C$s+this.y,C$n=C$n*C$r,C$c=C$t*C$s+this.x,C$t=C$t*C$r,C$s=C$e*C$s+this.y,C$e=C$e*C$r,C$r=this.offset;C$r[C$_.OX1]=C$o-C$n,C$r[C$_.OY1]=C$a+C$i,C$r[C$_.OX2]=C$o-C$e,C$r[C$_.OY2]=C$s+C$i,C$r[C$_.OX3]=C$c-C$e,C$r[C$_.OY3]=C$s+C$t,C$r[C$_.OX4]=C$c-C$n,C$r[C$_.OY4]=C$a+C$t},C$_.prototype.setRegion=function(C$t){this.region=C$t;var C$e=this.uvs;C$t.rotate?(C$e[2]=C$t.u,C$e[3]=C$t.v2,C$e[4]=C$t.u,C$e[5]=C$t.v,C$e[6]=C$t.u2,C$e[7]=C$t.v,C$e[0]=C$t.u2,C$e[1]=C$t.v2):(C$e[0]=C$t.u,C$e[1]=C$t.v2,C$e[2]=C$t.u,C$e[3]=C$t.v,C$e[4]=C$t.u2,C$e[5]=C$t.v,C$e[6]=C$t.u2,C$e[7]=C$t.v2)},C$_.prototype.computeWorldVertices=function(C$t,C$e,C$i,C$h){var C$n=this.offset,C$r=C$t.worldX,C$s=C$t.worldY,C$o=C$t.a,C$a=C$t.b,C$u=C$t.c,C$t=C$t.d,C$c=C$n[C$_.OX1],C$l=C$n[C$_.OY1];C$e[C$i]=C$c*C$o+C$l*C$a+C$r,C$e[C$i+1]=C$c*C$u+C$l*C$t+C$s,C$c=C$n[C$_.OX2],C$l=C$n[C$_.OY2],C$e[C$i+=C$h]=C$c*C$o+C$l*C$a+C$r,C$e[C$i+1]=C$c*C$u+C$l*C$t+C$s,C$c=C$n[C$_.OX3],C$l=C$n[C$_.OY3],C$e[C$i+=C$h]=C$c*C$o+C$l*C$a+C$r,C$e[C$i+1]=C$c*C$u+C$l*C$t+C$s,C$c=C$n[C$_.OX4],C$l=C$n[C$_.OY4],C$e[C$i+=C$h]=C$c*C$o+C$l*C$a+C$r,C$e[C$i+1]=C$c*C$u+C$l*C$t+C$s},C$_.prototype.copy=function(){var C$t=new C$_(name);return C$t.region=this.region,C$t.rendererObject=this.rendererObject,C$t.path=this.path,C$t.x=this.x,C$t.y=this.y,C$t.scaleX=this.scaleX,C$t.scaleY=this.scaleY,C$t.rotation=this.rotation,C$t.width=this.width,C$t.height=this.height,C$R.Utils.arrayCopy(this.uvs,0,C$t.uvs,0,8),C$R.Utils.arrayCopy(this.offset,0,C$t.offset,0,8),C$t.color.setFromColor(this.color),C$t},C$_.OX1=0,C$_.OY1=1,C$_.OX2=2,C$_.OY2=3,C$_.OX3=4,C$_.OY3=5,C$_.OX4=6,C$_.OY4=7,C$_.X1=0,C$_.Y1=1,C$_.C1R=2,C$_.C1G=3,C$_.C1B=4,C$_.C1A=5,C$_.U1=6,C$_.V1=7,C$_.X2=8,C$_.Y2=9,C$_.C2R=10,C$_.C2G=11,C$_.C2B=12,C$_.C2A=13,C$_.U2=14,C$_.V2=15,C$_.X3=16,C$_.Y3=17,C$_.C3R=18,C$_.C3G=19,C$_.C3B=20,C$_.C3A=21,C$_.U3=22,C$_.V3=23,C$_.X4=24,C$_.Y4=25,C$_.C4R=26,C$_.C4G=27,C$_.C4B=28,C$_.C4A=29,C$_.U4=30,C$_.V4=31,C$R.RegionAttachment=C$_,function(C$r){function C$t(C$t,C$e){this.jitterX=0,this.jitterY=0,this.jitterX=C$t,this.jitterY=C$e}C$t.prototype.begin=function(C$t){},C$t.prototype.transform=function(C$t,C$e,C$i,C$n){C$t.x+=C$r.MathUtils.randomTriangular(-this.jitterX,this.jitterY),C$t.y+=C$r.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},C$t.prototype.end=function(){},C$r.JitterEffect=C$t}(C$t=C$t||{}),C$D=C$t=C$t||{},C$it.prototype.begin=function(C$t){this.worldX=C$t.x+this.centerX,this.worldY=C$t.y+this.centerY},C$it.prototype.transform=function(C$t,C$e,C$i,C$n){var C$r=this.angle*C$D.MathUtils.degreesToRadians,C$s=C$t.x-this.worldX,C$o=C$t.y-this.worldY,C$a=Math.sqrt(C$s*C$s+C$o*C$o);C$a<this.radius&&(C$r=this.interpolation.apply(0,C$r,(this.radius-C$a)/this.radius),C$a=Math.cos(C$r),C$r=Math.sin(C$r),C$t.x=C$a*C$s-C$r*C$o+this.worldX,C$t.y=C$r*C$s+C$a*C$o+this.worldY)},C$it.prototype.end=function(){},C$it.interpolation=new C$D.PowOut(2),C$D.SwirlEffect=C$it,C$o.exports=C$t},{}],356:[function(C$t,C$e,C$i){"use strict";var C$y,C$g,C$v,C$x,C$b,C$A,C$o=C$t("./track-entry-listeners"),C$I=C$t("./lib/spine"),C$B=[],C$F=[],C$N=0,C$R=0,C$P=0,C$k=null,C$G=null,C$D=0,C$z=0,C$L=0,C$C=0,C$S=null,C$T=null,C$V=0,C$O=0,C$p=new C$I.Color(1,1,1,1),C$m=new C$I.Color(1,1,1,1),C$U=[0,1,2,2,3,0],C$s=cc.Class({ctor:function(){this._privateMode=!1,this._inited=!1,this._invalid=!0,this._enableCacheAttachedInfo=!1,this.frames=[],this.totalTime=0,this._frameIdx=-1,this.isCompleted=!1,this._skeletonInfo=null,this._animationName=null,this._tempSegments=null,this._tempColors=null,this._tempBoneInfos=null},init:function(C$t,C$e){this._inited=!0,this._animationName=C$e,this._skeletonInfo=C$t},clear:function(){this._inited=!1;for(var C$t=0,C$e=this.frames.length;C$t<C$e;C$t++)this.frames[C$t].segments.length=0;this.invalidAllFrame()},bind:function(C$t){var C$e=function(C$t){C$t&&C$t.animation.name===this._animationName&&(this.isCompleted=!0)}.bind(this);C$t.complete=C$e},unbind:function(C$t){C$t.complete=null},begin:function(){var C$t,C$e,C$i,C$n;this._invalid&&((C$n=(C$t=this._skeletonInfo).curAnimationCache)&&C$n!==this&&(this._privateMode?C$n.invalidAllFrame():C$n.updateToFrame()),C$n=C$t.skeleton,C$e=C$t.listener,C$i=C$t.state,C$n=C$n.data.findAnimation(this._animationName),C$i.setAnimationWith(0,C$n,!1),this.bind(C$e),(C$t.curAnimationCache=this)._frameIdx=-1,this.isCompleted=!1,this.totalTime=0,this._invalid=!1)},end:function(){this._needToUpdate()||(this._skeletonInfo.curAnimationCache=null,this.frames.length=this._frameIdx+1,this.isCompleted=!0,this.unbind(this._skeletonInfo.listener))},_needToUpdate:function(C$t){return!this.isCompleted&&this.totalTime<30&&(null==C$t||this._frameIdx<C$t)},updateToFrame:function(C$t){if(this._inited&&(this.begin(),this._needToUpdate(C$t))){for(var C$e=this._skeletonInfo,C$i=C$e.skeleton,C$n=C$e.clipper,C$r=C$e.state;C$i.update(1/60),C$r.update(1/60),C$r.apply(C$i),C$i.updateWorldTransform(),this._frameIdx++,this._updateFrame(C$i,C$n,this._frameIdx),this.totalTime+=1/60,this._needToUpdate(C$t););this.end()}},isInited:function(){return this._inited},isInvalid:function(){return this._invalid},invalidAllFrame:function(){this.isCompleted=!1,this._invalid=!0},updateAllFrame:function(){this.invalidAllFrame(),this.updateToFrame()},enableCacheAttachedInfo:function(){this._enableCacheAttachedInfo||(this._enableCacheAttachedInfo=!0,this.invalidAllFrame())},_updateFrame:function(C$t,C$e,C$i){C$C=C$L=C$z=C$D=C$R=C$N=C$P=0,C$T=C$S=C$G=C$k=null,this.frames[C$i]=this.frames[C$i]||{segments:[],colors:[],boneInfos:[],vertices:null,uintVert:null,indices:null};var C$i=this.frames[C$i],C$n=this._tempSegments=C$i.segments,C$h=this._tempColors=C$i.colors,C$u=this._tempBoneInfos=C$i.boneInfos,C$t=(this._traverseSkeleton(C$t,C$e),0<C$C&&(C$h[C$C-1].vfOffset=C$P),C$h.length=C$C,C$u.length=C$N,C$L-1);if(0<=C$t&&(0<C$z?((C$e=C$n[C$t]).indexCount=C$z,C$e.vfCount=6*C$D,C$e.vertexCount=C$D,C$n.length=C$L):C$n.length=C$L-1),0!=C$n.length){var C$r=C$i.vertices,C$s=C$i.uintVert;(!C$r||C$r.length<C$P)&&(C$r=C$i.vertices=new Float32Array(C$P),C$s=C$i.uintVert=new Uint32Array(C$r.buffer));for(var C$o=0,C$a=0;C$o<C$P;)C$r[C$o++]=C$B[C$a++],C$r[C$o++]=C$B[C$a++],C$r[C$o++]=C$B[C$a++],C$r[C$o++]=C$B[C$a++],C$s[C$o++]=C$B[C$a++],C$s[C$o++]=C$B[C$a++];var C$c=C$i.indices;(!C$c||C$c.length<C$R)&&(C$c=C$i.indices=new Uint16Array(C$R));for(var C$l=0;C$l<C$R;C$l++)C$c[C$l]=C$F[C$l];C$i.vertices=C$r,C$i.uintVert=C$s,C$i.indices=C$c}},fillVertices:function(C$t,C$e,C$i,C$n,C$r){if(C$x=C$i.a*C$e.a*C$t.a*255,C$y=C$e.r*C$t.r*255,C$g=C$e.g*C$t.g*255,C$v=C$e.b*C$t.b*255,C$p.r=C$y*C$i.r,C$p.g=C$g*C$i.g,C$p.b=C$v*C$i.b,C$p.a=C$x,null==C$r.darkColor?C$m.set(0,0,0,1):(C$m.r=C$r.darkColor.r*C$y,C$m.g=C$r.darkColor.g*C$g,C$m.b=C$r.darkColor.b*C$v),C$m.a=0,C$b=(C$p.a<<24>>>0)+(C$p.b<<16)+(C$p.g<<8)+C$p.r,C$A=(C$m.a<<24>>>0)+(C$m.b<<16)+(C$m.g<<8)+C$m.r,C$S===C$b&&C$T===C$A||(C$e=this._tempColors,C$S=C$b,C$T=C$A,0<C$C&&(C$e[C$C-1].vfOffset=C$P),C$e[C$C++]={fr:C$p.r,fg:C$p.g,fb:C$p.b,fa:C$p.a,dr:C$m.r,dg:C$m.g,db:C$m.b,da:C$m.a,vfOffset:0}),C$n.isClipping()){C$n.clipTriangles(C$B,C$V,C$F,C$O,C$B,C$p,C$m,!0,6,C$R,C$P,C$P+2);var C$s=C$n.clippedVertices,C$o=C$n.clippedTriangles;C$O=C$o.length,C$V=C$s.length/12*6;for(var C$h=0,C$u=C$R,C$_=C$o.length;C$h<C$_;)C$F[C$u++]=C$o[C$h++];for(var C$a=0,C$d=C$s.length,C$c=C$P;C$a<C$d;C$a+=12,C$c+=6)C$B[C$c]=C$s[C$a],C$B[C$c+1]=C$s[C$a+1],C$B[C$c+2]=C$s[C$a+6],C$B[C$c+3]=C$s[C$a+7],C$B[C$c+4]=C$b,C$B[C$c+5]=C$A}else for(var C$l=C$P,C$f=C$P+C$V;C$l<C$f;C$l+=6)C$B[C$l+4]=C$b,C$B[C$l+5]=C$A},_traverseSkeleton:function(C$t,C$e){var C$i,C$n,C$h,C$u,C$r,C$s,C$o,C$a,C$_=this._tempSegments,C$d=this._tempBoneInfos,C$f=C$t.color,C$p=C$t.bones;if(this._enableCacheAttachedInfo)for(var C$m=0,C$y=C$p.length;C$m<C$y;C$m++,C$N++){var C$c=C$p[C$m],C$l=C$d[C$N];(C$l=C$l||(C$d[C$N]={})).a=C$c.a,C$l.b=C$c.b,C$l.c=C$c.c,C$l.d=C$c.d,C$l.worldX=C$c.worldX,C$l.worldY=C$c.worldY}for(var C$g=0,C$v=C$t.drawOrder.length;C$g<C$v;C$g++)if(C$a=C$t.drawOrder[C$g],C$O=C$V=0,C$i=C$a.getAttachment())if(C$h=C$i instanceof C$I.RegionAttachment,C$u=C$i instanceof C$I.MeshAttachment,C$i instanceof C$I.ClippingAttachment)C$e.clipStart(C$a,C$i);else if(C$h||C$u)if(C$r=C$i.region.texture._texture)if(C$o=C$a.data.blendMode,C$k===C$r.url&&C$G===C$o||(C$k=C$r.url,C$G=C$o,0<=(C$s=C$L-1)&&(0<C$z?((C$s=C$_[C$s]).indexCount=C$z,C$s.vertexCount=C$D,C$s.vfCount=6*C$D):C$L--),C$_[C$L]={tex:C$r,blendMode:C$o,indexCount:0,vertexCount:0,vfCount:0},C$L++,C$D=C$z=0),C$h?(C$n=C$U,C$V=24,C$O=6,C$i.computeWorldVertices(C$a.bone,C$B,C$P,6)):C$u&&(C$n=C$i.triangles,C$V=6*(C$i.worldVerticesLength>>1),C$O=C$n.length,C$i.computeWorldVertices(C$a,0,C$i.worldVerticesLength,C$B,C$P,6)),0!=C$V&&0!=C$O){for(var C$x=0,C$b=C$R,C$A=C$n.length;C$x<C$A;)C$F[C$b++]=C$n[C$x++];for(var C$C=C$i.uvs,C$S=C$P,C$T=C$P+C$V,C$w=0;C$S<C$T;C$S+=6,C$w+=2)C$B[C$S+2]=C$C[C$w],C$B[C$S+3]=C$C[C$w+1];if(C$s=C$i.color,C$r=C$a.color,this.fillVertices(C$f,C$s,C$r,C$e,C$a),0<C$O){for(var C$E=C$R,C$M=C$R+C$O;C$E<C$M;C$E++)C$F[C$E]+=C$D;C$R+=C$O,C$P+=C$V,C$z+=C$O,C$D+=C$V/6}C$e.clipEndWithSlot(C$a)}else C$e.clipEndWithSlot(C$a);else C$e.clipEndWithSlot(C$a);else C$e.clipEndWithSlot(C$a);else C$e.clipEndWithSlot(C$a);C$e.clipEnd()}}),C$t=cc.Class({ctor:function(){this._privateMode=!1,this._animationPool={},this._skeletonCache={}},enablePrivateMode:function(){this._privateMode=!0},clear:function(){this._animationPool={},this._skeletonCache={}},removeSkeleton:function(C$t){var C$e=this._skeletonCache[C$t];if(C$e){var C$i,C$n=C$e.animationsCache;for(C$i in C$n){var C$r=C$n[C$i];C$r&&(this._animationPool[C$t+"#"+C$i]=C$r).clear()}delete this._skeletonCache[C$t]}},getSkeletonCache:function(C$t,C$e){var C$i,C$n,C$r,C$s=this._skeletonCache[C$t];return C$s||(C$e=new C$I.Skeleton(C$e),C$i=new C$I.SkeletonClipping,C$n=new C$I.AnimationStateData(C$e.data),C$n=new C$I.AnimationState(C$n),C$r=new C$o,C$n.addListener(C$r),this._skeletonCache[C$t]=C$s={skeleton:C$e,clipper:C$i,state:C$n,listener:C$r,animationsCache:{},curAnimationCache:null}),C$s},getAnimationCache:function(C$t,C$e){C$t=this._skeletonCache[C$t];return C$t?C$t.animationsCache[C$e]:null},invalidAnimationCache:function(C$t){C$t=this._skeletonCache[C$t];if(C$t&&C$t.skeleton){var C$e,C$i=C$t.animationsCache;for(C$e in C$i)C$i[C$e].invalidAllFrame()}},initAnimationCache:function(C$t,C$e){if(!C$e)return null;var C$i=this._skeletonCache[C$t],C$n=C$i&&C$i.skeleton;if(!C$n)return null;if(!C$n.data.findAnimation(C$e))return null;var C$n=C$i.animationsCache,C$r=C$n[C$e];return C$r||((C$r=this._animationPool[C$t=C$t+"#"+C$e])?delete this._animationPool[C$t]:(C$r=new C$s)._privateMode=this._privateMode,C$r.init(C$i,C$e),C$n[C$e]=C$r),C$r},updateAnimationCache:function(C$t,C$e){if(C$e){C$e=this.initAnimationCache(C$t,C$e);if(!C$e)return null;C$e.updateAllFrame()}else{C$e=this._skeletonCache[C$t];if(C$e&&C$e.skeleton){var C$i,C$n=C$e.animationsCache;for(C$i in C$n)C$n[C$i].updateAllFrame()}}}});C$t.FrameTime=1/60,C$t.sharedCache=new C$t,C$e.exports=C$t},{"./lib/spine":355,"./track-entry-listeners":360}],357:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./skeleton-cache").sharedCache,C$t=cc.Class({name:"sp.SkeletonData",extends:cc.Asset,ctor:function(){this.reset()},properties:{_skeletonJson:null,skeletonJsonStr:{get:function(){return this._skeletonJson?JSON.stringify(this._skeletonJson):""}},skeletonJson:{get:function(){return this._skeletonJson},set:function(C$t){this.reset(),this._skeletonJson="string"==typeof C$t?JSON.parse(C$t):C$t,!this._uuid&&C$t.skeleton&&(this._uuid=C$t.skeleton.hash)}},_atlasText:"",atlasText:{get:function(){return this._atlasText},set:function(C$t){this._atlasText=C$t,this.reset()}},textures:{default:[],type:[cc.Texture2D]},textureNames:{default:[],type:[cc.String]},scale:1,_nativeAsset:{get:function(){return this._buffer},set:function(C$t){this._buffer=C$t.buffer||C$t,this.reset()},override:!0}},statics:{preventDeferredLoadDependents:!0},createNode:!1,reset:function(){this._skeletonCache=null,this._atlasCache=null},ensureTexturesLoaded:function(C$t,C$e){var C$i=this.textures,C$n=C$i.length;if(0!=C$n)for(var C$r=0,C$s=function(){C$n<=++C$r&&(C$t&&C$t.call(C$e,!0),C$t=null)},C$o=0;C$o<C$n;C$o++){var C$a=C$i[C$o];C$a.loaded?C$s():C$a.once("load",C$s)}else C$t.call(C$e,!1)},isTexturesLoaded:function(){for(var C$t=this.textures,C$e=C$t.length,C$i=0;C$i<C$e;C$i++)if(!C$t[C$i].loaded)return!1;return!0},getRuntimeData:function(C$t){if(this._skeletonCache)return this._skeletonCache;if(!(this.textures&&0<this.textures.length)&&this.textureNames&&0<this.textureNames.length)return C$t||cc.errorID(7507,this.name),null;C$t=this._getAtlas(C$t);if(!C$t)return null;var C$e=new sp.spine.AtlasAttachmentLoader(C$t),C$i=null,C$n=null,C$i=this.skeletonJson?(C$n=new sp.spine.SkeletonJson(C$e),this.skeletonJson):(C$n=new sp.spine.SkeletonBinary(C$e),new Uint8Array(this._nativeAsset));return C$n.scale=this.scale,this._skeletonCache=C$n.readSkeletonData(C$i),C$t.dispose(),this._skeletonCache},getSkinsEnum:!1,getAnimsEnum:!1,_getTexture:function(C$t){for(var C$e,C$i,C$n=this.textureNames,C$r=0;C$r<C$n.length;C$r++)if(C$n[C$r]===C$t)return C$e=this.textures[C$r],(C$i=new sp.SkeletonTexture({width:C$e.width,height:C$e.height})).setRealTexture(C$e),C$i;return cc.errorID(7506,C$t),null},_getAtlas:function(C$t){return this._atlasCache||(this.atlasText?this._atlasCache=new sp.spine.TextureAtlas(this.atlasText,this._getTexture.bind(this)):(C$t||cc.errorID(7508,this.name),null))},destroy:function(){C$n.removeSkeleton(this._uuid),this._super()}});sp.SkeletonData=C$e.exports=C$t},{"./skeleton-cache":356}],358:[function(C$t,C$e,C$i){"use strict";sp.SkeletonTexture=cc.Class({name:"sp.SkeletonTexture",extends:sp.spine.Texture,_texture:null,_material:null,setRealTexture:function(C$t){this._texture=C$t},getRealTexture:function(){return this._texture},setFilters:function(C$t,C$e){this._texture&&this._texture.setFilters(C$t,C$e)},setWraps:function(C$t,C$e){this._texture&&this._texture.setWrapMode(C$t,C$e)},dispose:function(){}})},{}],359:[function(C$t,C$e,C$i){"use strict";C$i.__esModule=!0,C$i.default=void 0;var C$n=(C$n=C$t("../../cocos2d/core/renderer/assembler"))&&C$n.__esModule?C$n:{default:C$n};function C$r(C$i){return function(){var C$t,C$e=C$s(C$i),C$e=(C$t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$t){return!1}}()?(C$t=C$s(this).constructor,Reflect.construct(C$e,arguments,C$t)):C$e.apply(this,arguments),this);if(!C$t||"object"!=typeof C$t&&"function"!=typeof C$t){if(void 0===C$e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$e}return C$t}}function C$s(C$t){return(C$s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$t){return C$t.__proto__||Object.getPrototypeOf(C$t)})(C$t)}var C$b,C$A,C$W,C$H,C$O,C$j,C$X,C$Y,C$C,C$S,C$T,C$w,C$I,C$B,C$o,C$F,C$q,C$R,C$P,C$E,C$M,C$D,C$J,C$Z,C$K,C$Q,C$$,C$tt,C$et,C$it,C$nt,C$rt,C$a,C$c,C$l,C$h,C$u,C$_,C$d,C$N,C$k,C$st,C$ot,C$L,C$V,C$f=C$t("./Skeleton"),C$at=C$t("./lib/spine"),C$p=C$t("../../cocos2d/core/renderer/render-flow"),C$t=C$t("../../cocos2d/core/renderer/webgl/vertex-format"),C$m=C$t.vfmtPosUvColor,C$y=C$t.vfmtPosUvTwoColor,C$g=cc.gfx,C$ct=0,C$lt=[0,1,2,2,3,0],C$ht=cc.color(0,0,255,255),C$ut=cc.color(255,0,0,255),C$_t=cc.color(0,255,0,255),C$dt=cc.color(255,255,0,255),C$v=null,C$x=null,C$ft=null,C$pt=null,C$v=new C$at.Color(1,1,1,1),C$x=new C$at.Color(1,1,1,1),C$ft=new C$at.Vector2,C$pt=new C$at.Vector2,C$G=0,C$z=0,C$mt=0,C$U=0,C$yt=0;function C$gt(C$t,C$e){var C$i,C$n;switch(C$e){case C$at.BlendMode.Additive:C$i=C$b?cc.macro.ONE:cc.macro.SRC_ALPHA,C$n=cc.macro.ONE;break;case C$at.BlendMode.Multiply:C$i=cc.macro.DST_COLOR,C$n=cc.macro.ONE_MINUS_SRC_ALPHA;break;case C$at.BlendMode.Screen:C$i=cc.macro.ONE,C$n=cc.macro.ONE_MINUS_SRC_COLOR;break;default:C$at.BlendMode.Normal;C$i=C$b?cc.macro.ONE:cc.macro.SRC_ALPHA,C$n=cc.macro.ONE_MINUS_SRC_ALPHA}var C$e=!C$N.enableBatch,C$r=C$N._materials[0];if(!C$r)return null;var C$s=C$t.getId()+C$i+C$n+C$O+C$e,C$o=C$N._materialCache,C$a=C$o[C$s];return C$a||(C$o.baseMaterial?C$a=cc.MaterialVariant.create(C$r):C$o.baseMaterial=C$a=C$r,C$a.define("CC_USE_MODEL",C$e),C$a.define("USE_TINT",C$O),C$a.setProperty("texture",C$t),C$a.setBlend(!0,C$g.BLEND_FUNC_ADD,C$i,C$n,C$g.BLEND_FUNC_ADD,C$i,C$n),C$o[C$s]=C$a),C$a}function C$vt(C$t){C$u=C$t.fa*C$w,C$a=C$C*(C$A=C$b?C$u/255:1),C$c=C$S*C$A,C$l=C$T*C$A,C$h=C$t.fr*C$a,C$d=C$t.fg*C$c,C$_=C$t.fb*C$l,C$I=(C$u<<24>>>0)+(C$_<<16)+(C$d<<8)+C$h,C$u=C$t.dr*C$a,C$_=C$t.dg*C$c,C$d=C$t.db*C$l,C$B=((C$b?255:0)<<24>>>0)+(C$d<<16)+(C$_<<8)+C$u}function C$xt(C$t){return(C$t.a<<24>>>0)+(C$t.b<<16)+(C$t.g<<8)+C$t.r}C$bt=C$n.default,C$t=C$bt,(C$At=C$Ct).prototype=Object.create(C$t.prototype),(C$At.prototype.constructor=C$At).__proto__=C$t,C$r(C$Ct),(C$At=C$Ct.prototype).updateRenderData=function(C$t){C$t.isAnimationCached()||(C$t=C$t._skeleton)&&C$t.updateWorldTransform()},C$At.fillVertices=function(C$t,C$h,C$e,C$u,C$_){var C$i=C$k._vData,C$d=C$k._iData,C$n=C$k._uintVData;if(C$v.a=C$e.a*C$h.a*C$t.a*C$w*255,C$A=C$b?C$v.a:255,C$E=C$C*C$h.r*C$t.r*C$A,C$M=C$S*C$h.g*C$t.g*C$A,C$D=C$T*C$h.b*C$t.b*C$A,C$v.r=C$E*C$e.r,C$v.g=C$M*C$e.g,C$v.b=C$D*C$e.b,null==C$_.darkColor?C$x.set(0,0,0,1):(C$x.r=C$_.darkColor.r*C$E,C$x.g=C$_.darkColor.g*C$M,C$x.b=C$_.darkColor.b*C$D),C$x.a=C$b?255:0,C$u.isClipping()){var C$h=C$i.subarray(C$z+2),C$r=(C$u.clipTriangles(C$i.subarray(C$z),C$G,C$d.subarray(C$yt),C$U,C$h,C$v,C$x,C$O,C$F),new Float32Array(C$u.clippedVertices)),C$t=C$u.clippedTriangles;if(C$U=C$t.length,C$G=C$r.length/C$q*C$F,C$e=C$k.request(C$G/C$F,C$U),C$yt=C$e.indiceOffset,C$mt=C$e.vertexOffset,C$z=C$e.byteOffset>>2,C$i=C$k._vData,C$d=C$k._iData,C$n=C$k._uintVData,C$d.set(C$t,C$yt),C$V)for(var C$s=0,C$f=C$r.length,C$o=C$z;C$s<C$f;C$s+=C$q,C$o+=C$F)C$ft.x=C$r[C$s],C$ft.y=C$r[C$s+1],C$v.set(C$r[C$s+2],C$r[C$s+3],C$r[C$s+4],C$r[C$s+5]),C$pt.x=C$r[C$s+6],C$pt.y=C$r[C$s+7],C$O?C$x.set(C$r[C$s+8],C$r[C$s+9],C$r[C$s+10],C$r[C$s+11]):C$x.set(0,0,0,0),C$V.transform(C$ft,C$pt,C$v,C$x),C$i[C$o]=C$ft.x,C$i[C$o+1]=C$ft.y,C$i[C$o+2]=C$pt.x,C$i[C$o+3]=C$pt.y,C$n[C$o+4]=C$xt(C$v),C$O&&(C$n[C$o+5]=C$xt(C$x));else for(var C$a=0,C$p=C$r.length,C$c=C$z;C$a<C$p;C$a+=C$q,C$c+=C$F)C$i[C$c]=C$r[C$a],C$i[C$c+1]=C$r[C$a+1],C$i[C$c+2]=C$r[C$a+6],C$i[C$c+3]=C$r[C$a+7],C$I=(C$r[C$a+5]<<24>>>0)+(C$r[C$a+4]<<16)+(C$r[C$a+3]<<8)+C$r[C$a+2],C$n[C$c+4]=C$I,C$O&&(C$B=(C$r[C$a+11]<<24>>>0)+(C$r[C$a+10]<<16)+(C$r[C$a+9]<<8)+C$r[C$a+8],C$n[C$c+5]=C$B)}else if(C$V)for(var C$l=C$z,C$m=C$z+C$G;C$l<C$m;C$l+=C$F)C$ft.x=C$i[C$l],C$ft.y=C$i[C$l+1],C$pt.x=C$i[C$l+2],C$pt.y=C$i[C$l+3],C$V.transform(C$ft,C$pt,C$v,C$x),C$i[C$l]=C$ft.x,C$i[C$l+1]=C$ft.y,C$i[C$l+2]=C$pt.x,C$i[C$l+3]=C$pt.y,C$n[C$l+4]=C$xt(C$v),C$O&&(C$n[C$l+5]=C$xt(C$x));else{C$I=C$xt(C$v),C$B=C$xt(C$x);for(var C$y=C$z,C$g=C$z+C$G;C$y<C$g;C$y+=C$F)C$n[C$y+4]=C$I,C$O&&(C$n[C$y+5]=C$B)}},C$At.realTimeTraverse=function(C$h){var C$t,C$u,C$e,C$i,C$_,C$n,C$r,C$s,C$d=C$N._skeleton,C$f=C$d.color,C$o=C$N._debugRenderer,C$a=C$N._clipper,C$p=null;C$W=C$N._startSlotIndex,C$H=C$N._endSlotIndex,C$J=-1==C$W?!0:!1,C$j=C$N.debugSlots,C$X=C$N.debugBones,C$Y=C$N.debugMesh,C$o&&(C$X||C$j||C$Y)&&(C$o.clear(),C$o.lineWidth=2),C$q=C$O?12:8;for(var C$m=C$yt=C$U=C$mt=C$z=C$G=0,C$y=C$d.drawOrder.length;C$m<C$y;C$m++)if(C$r=C$d.drawOrder[C$m],C$J=0<=C$W&&C$W==C$r.data.index?!0:C$J)if(0<=C$H&&C$H==C$r.data.index&&(C$J=!1),C$U=C$G=0,C$s=C$r.getAttachment())if(C$i=C$s instanceof C$at.RegionAttachment,C$_=C$s instanceof C$at.MeshAttachment,C$s instanceof C$at.ClippingAttachment)C$a.clipStart(C$r,C$s);else if(C$i||C$_)if(C$p=C$gt(C$s.region.texture._texture,C$r.data.blendMode)){if(!C$Z&&C$p.getHash()===C$st.material.getHash()||(C$Z=!1,C$st._flush(),C$st.node=C$ot,C$st.material=C$p),C$i){if(C$e=C$lt,C$G=4*C$F,C$U=6,C$n=C$k.request(4,6),C$yt=C$n.indiceOffset,C$mt=C$n.vertexOffset,C$z=C$n.byteOffset>>2,C$t=C$k._vData,C$u=C$k._iData,C$s.computeWorldVertices(C$r.bone,C$t,C$z,C$F),C$o&&C$j){C$o.strokeColor=C$ht,C$o.moveTo(C$t[C$z],C$t[C$z+1]);for(var C$g=C$z+C$F,C$v=C$z+C$G;C$g<C$v;C$g+=C$F)C$o.lineTo(C$t[C$g],C$t[C$g+1]);C$o.close(),C$o.stroke()}}else if(C$_&&(C$e=C$s.triangles,C$G=(C$s.worldVerticesLength>>1)*C$F,C$U=C$e.length,C$n=C$k.request(C$G/C$F,C$U),C$yt=C$n.indiceOffset,C$mt=C$n.vertexOffset,C$z=C$n.byteOffset>>2,C$t=C$k._vData,C$u=C$k._iData,C$s.computeWorldVertices(C$r,0,C$s.worldVerticesLength,C$t,C$z,C$F),C$o&&C$Y)){C$o.strokeColor=C$dt;for(var C$x=0,C$b=C$e.length;C$x<C$b;C$x+=3){var C$A=C$e[C$x]*C$F+C$z,C$C=C$e[C$x+1]*C$F+C$z,C$S=C$e[C$x+2]*C$F+C$z;C$o.moveTo(C$t[C$A],C$t[C$A+1]),C$o.lineTo(C$t[C$C],C$t[C$C+1]),C$o.lineTo(C$t[C$S],C$t[C$S+1]),C$o.close(),C$o.stroke()}}if(0!=C$G&&0!=C$U){C$u.set(C$e,C$yt);for(var C$T=C$s.uvs,C$w=C$z,C$E=C$z+C$G,C$M=0;C$w<C$E;C$w+=C$F,C$M+=2)C$t[C$w+2]=C$T[C$M],C$t[C$w+3]=C$T[C$M+1];if(C$i=C$s.color,C$_=C$r.color,this.fillVertices(C$f,C$i,C$_,C$a,C$r),0<C$U){for(var C$I=C$yt,C$B=C$yt+C$U;C$I<C$B;C$I++)C$u[C$I]+=C$mt;if(C$h){C$s=C$h.m,C$$=C$s[0],C$tt=C$s[4],C$et=C$s[12],C$it=C$s[1],C$nt=C$s[5],C$rt=C$s[13];for(var C$c=C$z,C$R=C$z+C$G;C$c<C$R;C$c+=C$F)C$K=C$t[C$c],C$Q=C$t[C$c+1],C$t[C$c]=C$K*C$$+C$Q*C$tt+C$et,C$t[C$c+1]=C$K*C$it+C$Q*C$nt+C$rt}C$k.adjust(C$G/C$F,C$U)}C$a.clipEndWithSlot(C$r)}else C$a.clipEndWithSlot(C$r)}else C$a.clipEndWithSlot(C$r);else C$a.clipEndWithSlot(C$r);else C$a.clipEndWithSlot(C$r);else C$a.clipEndWithSlot(C$r);if(C$a.clipEnd(),C$o&&C$X){C$o.strokeColor=C$ut,C$o.fillColor=C$ht;for(var C$P=0,C$D=C$d.bones.length;C$P<C$D;C$P++){var C$l,C$L=(C$l=C$d.bones[C$P]).data.length*C$l.a+C$l.worldX,C$V=C$l.data.length*C$l.c+C$l.worldY;C$o.moveTo(C$l.worldX,C$l.worldY),C$o.lineTo(C$L,C$V),C$o.stroke(),C$o.circle(C$l.worldX,C$l.worldY,1.5*Math.PI),C$o.fill(),0===C$P&&(C$o.fillColor=C$_t)}}},C$At.cacheTraverse=function(C$t){var C$e=C$N._curFrame;if(C$e){var C$h=C$e.segments;if(0!=C$h.length){var C$u=C$e.vertices,C$_=C$e.indices,C$i=0,C$d=0;C$t&&(C$t=C$t.m,C$$=C$t[0],C$it=C$t[1],C$tt=C$t[4],C$nt=C$t[5],C$et=C$t[12],C$rt=C$t[13]);var C$f=16&C$ct,C$p=C$f&&(1===C$$&&0===C$it&&0===C$tt&&1===C$nt),C$m=0,C$y=C$e.colors,C$n=C$y[C$m++],C$g=C$n.vfOffset;C$vt(C$n);for(var C$v=0,C$x=C$h.length;C$v<C$x;C$v++){var C$r,C$s=C$h[C$v];if(C$r=C$gt(C$s.tex,C$s.blendMode)){!C$Z&&C$r.getHash()===C$st.material.getHash()||(C$Z=!1,C$st._flush(),C$st.node=C$ot,C$st.material=C$r),C$R=C$s.vertexCount,C$U=C$s.indexCount,C$r=C$k.request(C$R,C$U),C$yt=C$r.indiceOffset,C$mt=C$r.vertexOffset,C$P=C$r.byteOffset>>2;for(var C$o=C$k._vData,C$b=C$k._iData,C$A=C$k._uintVData,C$C=C$yt,C$S=C$yt+C$U;C$C<C$S;C$C++)C$b[C$C]=C$mt+C$_[C$d++];if(C$r=C$s.vfCount,C$o.set(C$u.subarray(C$i,C$i+C$r),C$P),C$i+=C$r,C$p)for(var C$a=C$P,C$T=C$P+C$r;C$a<C$T;C$a+=6)C$o[C$a]+=C$et,C$o[C$a+1]+=C$rt;else if(C$f)for(var C$c=C$P,C$w=C$P+C$r;C$c<C$w;C$c+=6)C$K=C$o[C$c],C$Q=C$o[C$c+1],C$o[C$c]=C$K*C$$+C$Q*C$tt+C$et,C$o[C$c+1]=C$K*C$it+C$Q*C$nt+C$rt;if(C$k.adjust(C$R,C$U),C$L)for(var C$E=C$i-C$r,C$l=4+C$P,C$M=4+C$P+C$r;C$l<C$M;C$l+=6,C$E+=6)C$g<=C$E&&(C$vt(C$n=C$y[C$m++]),C$g=C$n.vfOffset),C$A[C$l]=C$I,C$A[C$l+1]=C$B}}}}},C$At.fillBuffers=function(C$t,C$e){var C$i=C$t.node;C$i._renderFlag|=C$p.FLAG_UPDATE_RENDER_DATA,C$t._skeleton&&(C$i=C$i._color,C$C=C$i.r/255,C$S=C$i.g/255,C$T=C$i.b/255,C$w=C$i.a/255,C$O=C$t.useTint||C$t.isAnimationCached(),C$o=C$O?C$y:C$m,C$F=C$O?6:5,C$ot=C$t.node,C$k=C$e.getBuffer("spine",C$o),C$st=C$e,C$Z=!0,C$b=(C$N=C$t).premultipliedAlpha,C$ct=0,C$L=!(C$A=1),C$V=C$t._effectDelegate&&C$t._effectDelegate._vertexEffect,4294967295===C$i._val&&!C$b||(C$L=!0),C$i=void(C$O&&(C$ct|=1)),C$N.enableBatch&&(C$i=C$ot._worldMatrix,C$Z=!1,C$ct|=16),C$t.isAnimationCached()?this.cacheTraverse(C$i):(C$V&&C$V.begin(C$t._skeleton),this.realTimeTraverse(C$i),C$V&&C$V.end()),C$e.worldMatDirty++,C$t.attachUtil._syncAttachedNode(),C$N=C$st=C$k=C$ot=void 0,C$V=null)},C$At.postFillBuffers=function(C$t,C$e){C$e.worldMatDirty--};var C$bt,C$At,C$t=C$Ct;function C$Ct(){return C$bt.apply(this,arguments)||this}C$i.default=C$t,C$n.default.register(C$f,C$t),C$e.exports=C$i.default},{"../../cocos2d/core/renderer/assembler":217,"../../cocos2d/core/renderer/render-flow":221,"../../cocos2d/core/renderer/webgl/vertex-format":252,"./Skeleton":353,"./lib/spine":355}],360:[function(C$t,C$e,C$i){"use strict";function C$n(){this.start=null,this.end=null,this.complete=null,this.event=null,this.interrupt=null,this.dispose=null}C$n.getListeners=function(C$t){return C$t.listener||(C$t.listener=new C$n),C$t.listener},C$e.exports=C$n},{}],361:[function(C$t,C$e,C$i){"use strict";var C$n=C$t("./lib/spine");sp.VertexEffectDelegate=cc.Class({name:"sp.VertexEffectDelegate",ctor:function(){this._vertexEffect=null,this._interpolation=null,this._effectType="none"},clear:function(){this._vertexEffect=null,this._interpolation=null,this._effectType="none"},initJitter:function(C$t,C$e){return this._effectType="jitter",this._vertexEffect=new C$n.JitterEffect(C$t,C$e),this._vertexEffect},initSwirlWithPow:function(C$t,C$e){return this._interpolation=new C$n.Pow(C$e),this._vertexEffect=new C$n.SwirlEffect(C$t,this._interpolation),this._vertexEffect},initSwirlWithPowOut:function(C$t,C$e){return this._interpolation=new C$n.PowOut(C$e),this._vertexEffect=new C$n.SwirlEffect(C$t,this._interpolation),this._vertexEffect},getJitterVertexEffect:function(){return this._vertexEffect},getSwirlVertexEffect:function(){return this._vertexEffect},getVertexEffect:function(){return this._vertexEffect},getEffectType:function(){return this._effectType}}),C$e.exports=sp.VertexEffectDelegate},{"./lib/spine":355}],362:[function(C$t,C$e,C$i){"use strict";var C$n;C$n=function(C$H){function C$f(C$t,C$e){return void 0!==C$t?C$t:C$e}var C$P=1e37,C$M=1e-5,C$g=C$M*C$M,C$m=3.14159265359,C$I=2/180*C$m,C$p=8/180*C$m,C$T=.5*C$m,C$w=C$T*C$T,C$t=2/180*C$m;C$n.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision};var C$i=C$n;function C$n(C$t,C$e,C$i){void 0===C$t&&(C$t=0),void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),this.major=0,this.minor=0,this.revision=0,this.major=C$t,this.minor=C$e,this.revision=C$i}var C$s=new C$i(2,3,2);function C$c(C$t,C$e){for(var C$i=[],C$n=0;C$n<C$t;++C$n)C$i.push(C$e(C$n));return C$i}function C$h(C$t,C$e){void 0===C$e&&(C$e=0);for(var C$i=[],C$n=0;C$n<C$t;++C$n)C$i.push(C$e);return C$i}var C$o=C$m/180,C$a=2*C$m,C$D=Math.abs,C$L=Math.min,C$V=Math.max;function C$O(C$t,C$e,C$i){return C$t<C$e?C$e:C$i<C$t?C$i:C$t}var C$l=isFinite;function C$_(C$t){return C$t*C$t}function C$A(C$t){return 1/Math.sqrt(C$t)}var C$Y=Math.sqrt,C$u=Math.pow;var C$d=Math.cos,C$y=Math.sin,C$v=Math.acos,C$x=Math.asin,C$b=Math.atan2;C$e.prototype.Clone=function(){return new C$e(this.x,this.y)},C$e.prototype.SetZero=function(){return this.x=0,this.y=0,this},C$e.prototype.Set=function(C$t,C$e){return this.x=C$t,this.y=C$e,this},C$e.prototype.Copy=function(C$t){return this.x=C$t.x,this.y=C$t.y,this},C$e.prototype.SelfAdd=function(C$t){return this.x+=C$t.x,this.y+=C$t.y,this},C$e.prototype.SelfAddXY=function(C$t,C$e){return this.x+=C$t,this.y+=C$e,this},C$e.prototype.SelfSub=function(C$t){return this.x-=C$t.x,this.y-=C$t.y,this},C$e.prototype.SelfSubXY=function(C$t,C$e){return this.x-=C$t,this.y-=C$e,this},C$e.prototype.SelfMul=function(C$t){return this.x*=C$t,this.y*=C$t,this},C$e.prototype.SelfMulAdd=function(C$t,C$e){return this.x+=C$t*C$e.x,this.y+=C$t*C$e.y,this},C$e.prototype.SelfMulSub=function(C$t,C$e){return this.x-=C$t*C$e.x,this.y-=C$t*C$e.y,this},C$e.prototype.Dot=function(C$t){return this.x*C$t.x+this.y*C$t.y},C$e.prototype.Cross=function(C$t){return this.x*C$t.y-this.y*C$t.x},C$e.prototype.Length=function(){var C$t=this.x,C$e=this.y;return Math.sqrt(C$t*C$t+C$e*C$e)},C$e.prototype.LengthSquared=function(){var C$t=this.x,C$e=this.y;return C$t*C$t+C$e*C$e},C$e.prototype.Normalize=function(){var C$t,C$e=this.Length();return C$M<=C$e&&(this.x*=C$t=1/C$e,this.y*=C$t),C$e},C$e.prototype.SelfNormalize=function(){var C$t=this.Length();return C$M<=C$t&&(this.x*=C$t=1/C$t,this.y*=C$t),this},C$e.prototype.SelfRotate=function(C$t){var C$e=Math.cos(C$t),C$t=Math.sin(C$t),C$i=this.x;return this.x=C$e*C$i-C$t*this.y,this.y=C$t*C$i+C$e*this.y,this},C$e.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)},C$e.prototype.SelfCrossVS=function(C$t){var C$e=this.x;return this.x=C$t*this.y,this.y=-C$t*C$e,this},C$e.prototype.SelfCrossSV=function(C$t){var C$e=this.x;return this.x=-C$t*this.y,this.y=C$t*C$e,this},C$e.prototype.SelfMinV=function(C$t){return this.x=C$L(this.x,C$t.x),this.y=C$L(this.y,C$t.y),this},C$e.prototype.SelfMaxV=function(C$t){return this.x=C$V(this.x,C$t.x),this.y=C$V(this.y,C$t.y),this},C$e.prototype.SelfAbs=function(){return this.x=C$D(this.x),this.y=C$D(this.y),this},C$e.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this},C$e.prototype.SelfSkew=function(){var C$t=this.x;return this.x=-this.y,this.y=C$t,this},C$e.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$e})},C$e.AbsV=function(C$t,C$e){return C$e.x=C$D(C$t.x),C$e.y=C$D(C$t.y),C$e},C$e.MinV=function(C$t,C$e,C$i){return C$i.x=C$L(C$t.x,C$e.x),C$i.y=C$L(C$t.y,C$e.y),C$i},C$e.MaxV=function(C$t,C$e,C$i){return C$i.x=C$V(C$t.x,C$e.x),C$i.y=C$V(C$t.y,C$e.y),C$i},C$e.ClampV=function(C$t,C$e,C$i,C$n){return C$n.x=C$O(C$t.x,C$e.x,C$i.x),C$n.y=C$O(C$t.y,C$e.y,C$i.y),C$n},C$e.RotateV=function(C$t,C$e,C$i){var C$n=C$t.x,C$t=C$t.y,C$r=Math.cos(C$e),C$e=Math.sin(C$e);return C$i.x=C$r*C$n-C$e*C$t,C$i.y=C$e*C$n+C$r*C$t,C$i},C$e.DotVV=function(C$t,C$e){return C$t.x*C$e.x+C$t.y*C$e.y},C$e.CrossVV=function(C$t,C$e){return C$t.x*C$e.y-C$t.y*C$e.x},C$e.CrossVS=function(C$t,C$e,C$i){var C$n=C$t.x;return C$i.x=C$e*C$t.y,C$i.y=-C$e*C$n,C$i},C$e.CrossVOne=function(C$t,C$e){var C$i=C$t.x;return C$e.x=C$t.y,C$e.y=-C$i,C$e},C$e.CrossSV=function(C$t,C$e,C$i){var C$n=C$e.x;return C$i.x=-C$t*C$e.y,C$i.y=C$t*C$n,C$i},C$e.CrossOneV=function(C$t,C$e){var C$i=C$t.x;return C$e.x=-C$t.y,C$e.y=C$i,C$e},C$e.AddVV=function(C$t,C$e,C$i){return C$i.x=C$t.x+C$e.x,C$i.y=C$t.y+C$e.y,C$i},C$e.SubVV=function(C$t,C$e,C$i){return C$i.x=C$t.x-C$e.x,C$i.y=C$t.y-C$e.y,C$i},C$e.MulSV=function(C$t,C$e,C$i){return C$i.x=C$e.x*C$t,C$i.y=C$e.y*C$t,C$i},C$e.MulVS=function(C$t,C$e,C$i){return C$i.x=C$t.x*C$e,C$i.y=C$t.y*C$e,C$i},C$e.AddVMulSV=function(C$t,C$e,C$i,C$n){return C$n.x=C$t.x+C$e*C$i.x,C$n.y=C$t.y+C$e*C$i.y,C$n},C$e.SubVMulSV=function(C$t,C$e,C$i,C$n){return C$n.x=C$t.x-C$e*C$i.x,C$n.y=C$t.y-C$e*C$i.y,C$n},C$e.AddVCrossSV=function(C$t,C$e,C$i,C$n){var C$r=C$i.x;return C$n.x=C$t.x-C$e*C$i.y,C$n.y=C$t.y+C$e*C$r,C$n},C$e.MidVV=function(C$t,C$e,C$i){return C$i.x=.5*(C$t.x+C$e.x),C$i.y=.5*(C$t.y+C$e.y),C$i},C$e.ExtVV=function(C$t,C$e,C$i){return C$i.x=.5*(C$e.x-C$t.x),C$i.y=.5*(C$e.y-C$t.y),C$i},C$e.IsEqualToV=function(C$t,C$e){return C$t.x===C$e.x&&C$t.y===C$e.y},C$e.DistanceVV=function(C$t,C$e){var C$i=C$t.x-C$e.x,C$t=C$t.y-C$e.y;return Math.sqrt(C$i*C$i+C$t*C$t)},C$e.DistanceSquaredVV=function(C$t,C$e){var C$i=C$t.x-C$e.x,C$t=C$t.y-C$e.y;return C$i*C$i+C$t*C$t},C$e.NegV=function(C$t,C$e){return C$e.x=-C$t.x,C$e.y=-C$t.y,C$e},C$e.ZERO=new C$e(0,0),C$e.UNITX=new C$e(1,0),C$e.UNITY=new C$e(0,1),C$e.s_t0=new C$e,C$e.s_t1=new C$e,C$e.s_t2=new C$e,C$e.s_t3=new C$e;var C$j=C$e;function C$e(C$t,C$e){void 0===C$e&&(C$e=0),this.x=C$t=void 0===C$t?0:C$t,this.y=C$e}var C$C=new C$j(0,0),C$F=(C$N.prototype.Clone=function(){return new C$N(this.x,this.y,this.z)},C$N.prototype.SetZero=function(){return this.x=0,this.y=0,this.z=0,this},C$N.prototype.SetXYZ=function(C$t,C$e,C$i){return this.x=C$t,this.y=C$e,this.z=C$i,this},C$N.prototype.Copy=function(C$t){return this.x=C$t.x,this.y=C$t.y,this.z=C$t.z,this},C$N.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},C$N.prototype.SelfAdd=function(C$t){return this.x+=C$t.x,this.y+=C$t.y,this.z+=C$t.z,this},C$N.prototype.SelfAddXYZ=function(C$t,C$e,C$i){return this.x+=C$t,this.y+=C$e,this.z+=C$i,this},C$N.prototype.SelfSub=function(C$t){return this.x-=C$t.x,this.y-=C$t.y,this.z-=C$t.z,this},C$N.prototype.SelfSubXYZ=function(C$t,C$e,C$i){return this.x-=C$t,this.y-=C$e,this.z-=C$i,this},C$N.prototype.SelfMul=function(C$t){return this.x*=C$t,this.y*=C$t,this.z*=C$t,this},C$N.DotV3V3=function(C$t,C$e){return C$t.x*C$e.x+C$t.y*C$e.y+C$t.z*C$e.z},C$N.CrossV3V3=function(C$t,C$e,C$i){var C$n=C$t.x,C$r=C$t.y,C$t=C$t.z,C$s=C$e.x,C$o=C$e.y,C$e=C$e.z;return C$i.x=C$r*C$e-C$t*C$o,C$i.y=C$t*C$s-C$n*C$e,C$i.z=C$n*C$o-C$r*C$s,C$i},C$N.ZERO=new C$N(0,0,0),C$N.s_t0=new C$N,C$N);function C$N(C$t,C$e,C$i){void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=0),this.x=C$t=void 0===C$t?0:C$t,this.y=C$e,this.z=C$i}C$G.prototype.Clone=function(){return(new C$G).Copy(this)},C$G.FromVV=function(C$t,C$e){return(new C$G).SetVV(C$t,C$e)},C$G.FromSSSS=function(C$t,C$e,C$i,C$n){return(new C$G).SetSSSS(C$t,C$e,C$i,C$n)},C$G.FromAngle=function(C$t){return(new C$G).SetAngle(C$t)},C$G.prototype.SetSSSS=function(C$t,C$e,C$i,C$n){return this.ex.Set(C$t,C$i),this.ey.Set(C$e,C$n),this},C$G.prototype.SetVV=function(C$t,C$e){return this.ex.Copy(C$t),this.ey.Copy(C$e),this},C$G.prototype.SetAngle=function(C$t){var C$e=Math.cos(C$t),C$t=Math.sin(C$t);return this.ex.Set(C$e,C$t),this.ey.Set(-C$t,C$e),this},C$G.prototype.Copy=function(C$t){return this.ex.Copy(C$t.ex),this.ey.Copy(C$t.ey),this},C$G.prototype.SetIdentity=function(){return this.ex.Set(1,0),this.ey.Set(0,1),this},C$G.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this},C$G.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)},C$G.prototype.GetInverse=function(C$t){var C$e=this.ex.x,C$i=this.ey.x,C$n=this.ex.y,C$r=this.ey.y,C$s=C$e*C$r-C$i*C$n;return C$t.ex.x=(C$s=0!==C$s?1/C$s:C$s)*C$r,C$t.ey.x=-C$s*C$i,C$t.ex.y=-C$s*C$n,C$t.ey.y=C$s*C$e,C$t},C$G.prototype.Solve=function(C$t,C$e,C$i){var C$n=this.ex.x,C$r=this.ey.x,C$s=this.ex.y,C$o=this.ey.y,C$a=C$n*C$o-C$r*C$s;return C$i.x=(C$a=0!==C$a?1/C$a:C$a)*(C$o*C$t-C$r*C$e),C$i.y=C$a*(C$n*C$e-C$s*C$t),C$i},C$G.prototype.SelfAbs=function(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this},C$G.prototype.SelfInv=function(){return this.GetInverse(this),this},C$G.prototype.SelfAddM=function(C$t){return this.ex.SelfAdd(C$t.ex),this.ey.SelfAdd(C$t.ey),this},C$G.prototype.SelfSubM=function(C$t){return this.ex.SelfSub(C$t.ex),this.ey.SelfSub(C$t.ey),this},C$G.AbsM=function(C$t,C$e){var C$i=C$t.ex,C$t=C$t.ey;return C$e.ex.x=C$D(C$i.x),C$e.ex.y=C$D(C$i.y),C$e.ey.x=C$D(C$t.x),C$e.ey.y=C$D(C$t.y),C$e},C$G.MulMV=function(C$t,C$e,C$i){var C$n=C$t.ex,C$t=C$t.ey,C$r=C$e.x,C$e=C$e.y;return C$i.x=C$n.x*C$r+C$t.x*C$e,C$i.y=C$n.y*C$r+C$t.y*C$e,C$i},C$G.MulTMV=function(C$t,C$e,C$i){var C$n=C$t.ex,C$t=C$t.ey,C$r=C$e.x,C$e=C$e.y;return C$i.x=C$n.x*C$r+C$n.y*C$e,C$i.y=C$t.x*C$r+C$t.y*C$e,C$i},C$G.AddMM=function(C$t,C$e,C$i){var C$n=C$t.ex,C$t=C$t.ey,C$r=C$e.ex,C$e=C$e.ey;return C$i.ex.x=C$n.x+C$r.x,C$i.ex.y=C$n.y+C$r.y,C$i.ey.x=C$t.x+C$e.x,C$i.ey.y=C$t.y+C$e.y,C$i},C$G.MulMM=function(C$t,C$e,C$i){var C$n=C$t.ex.x,C$r=C$t.ex.y,C$s=C$t.ey.x,C$t=C$t.ey.y,C$o=C$e.ex.x,C$a=C$e.ex.y,C$c=C$e.ey.x,C$e=C$e.ey.y;return C$i.ex.x=C$n*C$o+C$s*C$a,C$i.ex.y=C$r*C$o+C$t*C$a,C$i.ey.x=C$n*C$c+C$s*C$e,C$i.ey.y=C$r*C$c+C$t*C$e,C$i},C$G.MulTMM=function(C$t,C$e,C$i){var C$n=C$t.ex.x,C$r=C$t.ex.y,C$s=C$t.ey.x,C$t=C$t.ey.y,C$o=C$e.ex.x,C$a=C$e.ex.y,C$c=C$e.ey.x,C$e=C$e.ey.y;return C$i.ex.x=C$n*C$o+C$r*C$a,C$i.ex.y=C$s*C$o+C$t*C$a,C$i.ey.x=C$n*C$c+C$r*C$e,C$i.ey.y=C$s*C$c+C$t*C$e,C$i},C$G.IDENTITY=new C$G;var C$k=C$G;function C$G(){this.ex=new C$j(1,0),this.ey=new C$j(0,1)}C$U.prototype.Clone=function(){return(new C$U).Copy(this)},C$U.prototype.SetVVV=function(C$t,C$e,C$i){return this.ex.Copy(C$t),this.ey.Copy(C$e),this.ez.Copy(C$i),this},C$U.prototype.Copy=function(C$t){return this.ex.Copy(C$t.ex),this.ey.Copy(C$t.ey),this.ez.Copy(C$t.ez),this},C$U.prototype.SetIdentity=function(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this},C$U.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this},C$U.prototype.SelfAddM=function(C$t){return this.ex.SelfAdd(C$t.ex),this.ey.SelfAdd(C$t.ey),this.ez.SelfAdd(C$t.ez),this},C$U.prototype.Solve33=function(C$t,C$e,C$i,C$h){var C$u=this.ex.x,C$_=this.ex.y,C$d=this.ex.z,C$n=this.ey.x,C$r=this.ey.y,C$s=this.ey.z,C$o=this.ez.x,C$a=this.ez.y,C$c=this.ez.z,C$l=C$u*(C$r*C$c-C$s*C$a)+C$_*(C$s*C$o-C$n*C$c)+C$d*(C$n*C$a-C$r*C$o);return C$h.x=(C$l=0!==C$l?1/C$l:C$l)*(C$t*(C$r*C$c-C$s*C$a)+C$e*(C$s*C$o-C$n*C$c)+C$i*(C$n*C$a-C$r*C$o)),C$h.y=C$l*(C$u*(C$e*C$c-C$i*C$a)+C$_*(C$i*C$o-C$t*C$c)+C$d*(C$t*C$a-C$e*C$o)),C$h.z=C$l*(C$u*(C$r*C$i-C$s*C$e)+C$_*(C$s*C$t-C$n*C$i)+C$d*(C$n*C$e-C$r*C$t)),C$h},C$U.prototype.Solve22=function(C$t,C$e,C$i){var C$n=this.ex.x,C$r=this.ey.x,C$s=this.ex.y,C$o=this.ey.y,C$a=C$n*C$o-C$r*C$s;return C$i.x=(C$a=0!==C$a?1/C$a:C$a)*(C$o*C$t-C$r*C$e),C$i.y=C$a*(C$n*C$e-C$s*C$t),C$i},C$U.prototype.GetInverse22=function(C$t){var C$e=this.ex.x,C$i=this.ey.x,C$n=this.ex.y,C$r=this.ey.y,C$s=C$e*C$r-C$i*C$n;C$t.ex.x=(C$s=0!==C$s?1/C$s:C$s)*C$r,C$t.ey.x=-C$s*C$i,C$t.ex.z=0,C$t.ex.y=-C$s*C$n,C$t.ey.y=C$s*C$e,C$t.ey.z=0,C$t.ez.x=0,C$t.ez.y=0,C$t.ez.z=0},C$U.prototype.GetSymInverse33=function(C$t){var C$e=C$F.DotV3V3(this.ex,C$F.CrossV3V3(this.ey,this.ez,C$F.s_t0)),C$i=this.ex.x,C$n=this.ey.x,C$r=this.ez.x,C$s=this.ey.y,C$o=this.ez.y,C$a=this.ez.z;C$t.ex.x=(C$e=0!==C$e?1/C$e:C$e)*(C$s*C$a-C$o*C$o),C$t.ex.y=C$e*(C$r*C$o-C$n*C$a),C$t.ex.z=C$e*(C$n*C$o-C$r*C$s),C$t.ey.x=C$t.ex.y,C$t.ey.y=C$e*(C$i*C$a-C$r*C$r),C$t.ey.z=C$e*(C$r*C$n-C$i*C$o),C$t.ez.x=C$t.ex.z,C$t.ez.y=C$t.ey.z,C$t.ez.z=C$e*(C$i*C$s-C$n*C$n)},C$U.MulM33V3=function(C$t,C$e,C$i){var C$n=C$e.x,C$r=C$e.y,C$e=C$e.z;return C$i.x=C$t.ex.x*C$n+C$t.ey.x*C$r+C$t.ez.x*C$e,C$i.y=C$t.ex.y*C$n+C$t.ey.y*C$r+C$t.ez.y*C$e,C$i.z=C$t.ex.z*C$n+C$t.ey.z*C$r+C$t.ez.z*C$e,C$i},C$U.MulM33XYZ=function(C$t,C$e,C$i,C$n,C$r){return C$r.x=C$t.ex.x*C$e+C$t.ey.x*C$i+C$t.ez.x*C$n,C$r.y=C$t.ex.y*C$e+C$t.ey.y*C$i+C$t.ez.y*C$n,C$r.z=C$t.ex.z*C$e+C$t.ey.z*C$i+C$t.ez.z*C$n,C$r},C$U.MulM33V2=function(C$t,C$e,C$i){var C$n=C$e.x,C$e=C$e.y;return C$i.x=C$t.ex.x*C$n+C$t.ey.x*C$e,C$i.y=C$t.ex.y*C$n+C$t.ey.y*C$e,C$i},C$U.MulM33XY=function(C$t,C$e,C$i,C$n){return C$n.x=C$t.ex.x*C$e+C$t.ey.x*C$i,C$n.y=C$t.ex.y*C$e+C$t.ey.y*C$i,C$n},C$U.IDENTITY=new C$U;var C$z=C$U;function C$U(){this.ex=new C$F(1,0,0),this.ey=new C$F(0,1,0),this.ez=new C$F(0,0,1)}C$W.prototype.Clone=function(){return(new C$W).Copy(this)},C$W.prototype.Copy=function(C$t){return this.s=C$t.s,this.c=C$t.c,this},C$W.prototype.SetAngle=function(C$t){return this.s=Math.sin(C$t),this.c=Math.cos(C$t),this},C$W.prototype.SetIdentity=function(){return this.s=0,this.c=1,this},C$W.prototype.GetAngle=function(){return Math.atan2(this.s,this.c)},C$W.prototype.GetXAxis=function(C$t){return C$t.x=this.c,C$t.y=this.s,C$t},C$W.prototype.GetYAxis=function(C$t){return C$t.x=-this.s,C$t.y=this.c,C$t},C$W.MulRR=function(C$t,C$e,C$i){var C$n=C$t.c,C$t=C$t.s,C$r=C$e.c,C$e=C$e.s;return C$i.s=C$t*C$r+C$n*C$e,C$i.c=C$n*C$r-C$t*C$e,C$i},C$W.MulTRR=function(C$t,C$e,C$i){var C$n=C$t.c,C$t=C$t.s,C$r=C$e.c,C$e=C$e.s;return C$i.s=C$n*C$e-C$t*C$r,C$i.c=C$n*C$r+C$t*C$e,C$i},C$W.MulRV=function(C$t,C$e,C$i){var C$n=C$t.c,C$t=C$t.s,C$r=C$e.x,C$e=C$e.y;return C$i.x=C$n*C$r-C$t*C$e,C$i.y=C$t*C$r+C$n*C$e,C$i},C$W.MulTRV=function(C$t,C$e,C$i){var C$n=C$t.c,C$t=C$t.s,C$r=C$e.x,C$e=C$e.y;return C$i.x=C$n*C$r+C$t*C$e,C$i.y=-C$t*C$r+C$n*C$e,C$i},C$W.IDENTITY=new C$W;var C$B=C$W;function C$W(C$t){void 0===C$t&&(C$t=0),this.s=0,this.c=1,C$t&&(this.s=Math.sin(C$t),this.c=Math.cos(C$t))}C$q.prototype.Clone=function(){return(new C$q).Copy(this)},C$q.prototype.Copy=function(C$t){return this.p.Copy(C$t.p),this.q.Copy(C$t.q),this},C$q.prototype.SetIdentity=function(){return this.p.SetZero(),this.q.SetIdentity(),this},C$q.prototype.SetPositionRotation=function(C$t,C$e){return this.p.Copy(C$t),this.q.Copy(C$e),this},C$q.prototype.SetPositionAngle=function(C$t,C$e){return this.p.Copy(C$t),this.q.SetAngle(C$e),this},C$q.prototype.SetPosition=function(C$t){return this.p.Copy(C$t),this},C$q.prototype.SetPositionXY=function(C$t,C$e){return this.p.Set(C$t,C$e),this},C$q.prototype.SetRotation=function(C$t){return this.q.Copy(C$t),this},C$q.prototype.SetRotationAngle=function(C$t){return this.q.SetAngle(C$t),this},C$q.prototype.GetPosition=function(){return this.p},C$q.prototype.GetRotation=function(){return this.q},C$q.prototype.GetRotationAngle=function(){return this.q.GetAngle()},C$q.prototype.GetAngle=function(){return this.q.GetAngle()},C$q.MulXV=function(C$t,C$e,C$i){var C$n=C$t.q.c,C$r=C$t.q.s,C$s=C$e.x,C$e=C$e.y;return C$i.x=C$n*C$s-C$r*C$e+C$t.p.x,C$i.y=C$r*C$s+C$n*C$e+C$t.p.y,C$i},C$q.MulTXV=function(C$t,C$e,C$i){var C$n=C$t.q.c,C$r=C$t.q.s,C$s=C$e.x-C$t.p.x,C$e=C$e.y-C$t.p.y;return C$i.x=C$n*C$s+C$r*C$e,C$i.y=-C$r*C$s+C$n*C$e,C$i},C$q.MulXX=function(C$t,C$e,C$i){return C$B.MulRR(C$t.q,C$e.q,C$i.q),C$j.AddVV(C$B.MulRV(C$t.q,C$e.p,C$i.p),C$t.p,C$i.p),C$i},C$q.MulTXX=function(C$t,C$e,C$i){return C$B.MulTRR(C$t.q,C$e.q,C$i.q),C$B.MulTRV(C$t.q,C$j.SubVV(C$e.p,C$t.p,C$i.p),C$i.p),C$i},C$q.IDENTITY=new C$q;var C$R=C$q;function C$q(){this.p=new C$j,this.q=new C$B}C$Z.prototype.Clone=function(){return(new C$Z).Copy(this)},C$Z.prototype.Copy=function(C$t){return this.localCenter.Copy(C$t.localCenter),this.c0.Copy(C$t.c0),this.c.Copy(C$t.c),this.a0=C$t.a0,this.a=C$t.a,this.alpha0=C$t.alpha0,this},C$Z.prototype.GetTransform=function(C$t,C$e){var C$i=1-C$e,C$i=(C$t.p.x=C$i*this.c0.x+C$e*this.c.x,C$t.p.y=C$i*this.c0.y+C$e*this.c.y,C$i*this.a0+C$e*this.a);return C$t.q.SetAngle(C$i),C$t.p.SelfSub(C$B.MulRV(C$t.q,this.localCenter,C$j.s_t0)),C$t},C$Z.prototype.Advance=function(C$t){var C$e=(C$t-this.alpha0)/(1-this.alpha0),C$i=1-C$e;this.c0.x=C$i*this.c0.x+C$e*this.c.x,this.c0.y=C$i*this.c0.y+C$e*this.c.y,this.a0=C$i*this.a0+C$e*this.a,this.alpha0=C$t},C$Z.prototype.Normalize=function(){var C$t=C$a*Math.floor(this.a0/C$a);this.a0-=C$t,this.a-=C$t};var C$J=C$Z;function C$Z(){this.localCenter=new C$j,this.c0=new C$j,this.c=new C$j,this.a0=0,this.a=0,this.alpha0=0}C$Q.prototype.Clone=function(){return(new C$Q).Copy(this)},C$Q.prototype.Copy=function(C$t){return this.r=C$t.r,this.g=C$t.g,this.b=C$t.b,this.a=C$t.a,this},C$Q.prototype.IsEqual=function(C$t){return this.r===C$t.r&&this.g===C$t.g&&this.b===C$t.b&&this.a===C$t.a},C$Q.prototype.IsZero=function(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a},C$Q.prototype.Set=function(C$t,C$e,C$i,C$n){void 0===C$n&&(C$n=this.a),this.SetRGBA(C$t,C$e,C$i,C$n)},C$Q.prototype.SetByteRGB=function(C$t,C$e,C$i){return this.r=C$t/255,this.g=C$e/255,this.b=C$i/255,this},C$Q.prototype.SetByteRGBA=function(C$t,C$e,C$i,C$n){return this.r=C$t/255,this.g=C$e/255,this.b=C$i/255,this.a=C$n/255,this},C$Q.prototype.SetRGB=function(C$t,C$e,C$i){return this.r=C$t,this.g=C$e,this.b=C$i,this},C$Q.prototype.SetRGBA=function(C$t,C$e,C$i,C$n){return this.r=C$t,this.g=C$e,this.b=C$i,this.a=C$n,this},C$Q.prototype.SelfAdd=function(C$t){return this.r+=C$t.r,this.g+=C$t.g,this.b+=C$t.b,this.a+=C$t.a,this},C$Q.prototype.Add=function(C$t,C$e){return C$e.r=this.r+C$t.r,C$e.g=this.g+C$t.g,C$e.b=this.b+C$t.b,C$e.a=this.a+C$t.a,C$e},C$Q.prototype.SelfSub=function(C$t){return this.r-=C$t.r,this.g-=C$t.g,this.b-=C$t.b,this.a-=C$t.a,this},C$Q.prototype.Sub=function(C$t,C$e){return C$e.r=this.r-C$t.r,C$e.g=this.g-C$t.g,C$e.b=this.b-C$t.b,C$e.a=this.a-C$t.a,C$e},C$Q.prototype.SelfMul=function(C$t){return this.r*=C$t,this.g*=C$t,this.b*=C$t,this.a*=C$t,this},C$Q.prototype.Mul=function(C$t,C$e){return C$e.r=this.r*C$t,C$e.g=this.g*C$t,C$e.b=this.b*C$t,C$e.a=this.a*C$t,C$e},C$Q.prototype.Mix=function(C$t,C$e){C$Q.MixColors(this,C$t,C$e)},C$Q.MixColors=function(C$t,C$e,C$i){var C$n=C$i*(C$e.r-C$t.r),C$r=C$i*(C$e.g-C$t.g),C$s=C$i*(C$e.b-C$t.b),C$i=C$i*(C$e.a-C$t.a);C$t.r+=C$n,C$t.g+=C$r,C$t.b+=C$s,C$t.a+=C$i,C$e.r-=C$n,C$e.g-=C$r,C$e.b-=C$s,C$e.a-=C$i},C$Q.prototype.MakeStyleString=function(C$t){return void 0===C$t&&(C$t=this.a),C$Q.MakeStyleString(this.r,this.g,this.b,C$t)},C$Q.MakeStyleString=function(C$t,C$e,C$i,C$n){return C$t*=255,C$e*=255,C$i*=255,(C$n=void 0===C$n?1:C$n)<1?"rgba("+C$t+","+C$e+","+C$i+","+C$n+")":"rgb("+C$t+","+C$e+","+C$i+")"},C$Q.ZERO=new C$Q(0,0,0,0),C$Q.RED=new C$Q(1,0,0),C$Q.GREEN=new C$Q(0,1,0),C$Q.BLUE=new C$Q(0,0,1);var C$K=C$Q;function C$Q(C$t,C$e,C$i,C$n){void 0===C$e&&(C$e=.5),void 0===C$i&&(C$i=.5),void 0===C$n&&(C$n=1),this.r=C$t=void 0===C$t?.5:C$t,this.g=C$e,this.b=C$i,this.a=C$n}(C$$=C$H.b2DrawFlags||(C$H.b2DrawFlags={}))[C$$.e_none=0]="e_none",C$$[C$$.e_shapeBit=1]="e_shapeBit",C$$[C$$.e_jointBit=2]="e_jointBit",C$$[C$$.e_aabbBit=4]="e_aabbBit",C$$[C$$.e_pairBit=8]="e_pairBit",C$$[C$$.e_centerOfMassBit=16]="e_centerOfMassBit",C$$[C$$.e_particleBit=32]="e_particleBit",C$$[C$$.e_controllerBit=64]="e_controllerBit",C$$[C$$.e_all=63]="e_all";C$tt.prototype.SetFlags=function(C$t){this.m_drawFlags=C$t},C$tt.prototype.GetFlags=function(){return this.m_drawFlags},C$tt.prototype.AppendFlags=function(C$t){this.m_drawFlags|=C$t},C$tt.prototype.ClearFlags=function(C$t){this.m_drawFlags&=~C$t};var C$$=C$tt;function C$tt(){this.m_drawFlags=0}C$it.prototype.Reset=function(){return this.m_start=Date.now(),this},C$it.prototype.GetMilliseconds=function(){return Date.now()-this.m_start};var C$et=C$it;function C$it(){this.m_start=Date.now()}C$rt.prototype.GetCount=function(){return this.m_count},C$rt.prototype.GetMinCount=function(){return this.m_min_count},C$rt.prototype.GetMaxCount=function(){return this.m_max_count},C$rt.prototype.ResetCount=function(){var C$t=this.m_count;return this.m_count=0,C$t},C$rt.prototype.ResetMinCount=function(){this.m_min_count=0},C$rt.prototype.ResetMaxCount=function(){this.m_max_count=0},C$rt.prototype.Increment=function(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)},C$rt.prototype.Decrement=function(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)};var C$nt=C$rt;function C$rt(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}C$ot.prototype.Reset=function(){return this.m_count=0,this},C$ot.prototype.Push=function(C$t){this.m_stack[this.m_count]=C$t,this.m_count++},C$ot.prototype.Pop=function(){this.m_count--;var C$t=this.m_stack[this.m_count];if((this.m_stack[this.m_count]=null)===C$t)throw new Error;return C$t},C$ot.prototype.GetCount=function(){return this.m_count};var C$st=C$ot;function C$ot(C$t){this.m_stack=[],this.m_count=0,this.m_stack=C$c(C$t,function(C$t){return null}),this.m_count=0}function C$at(){}function C$ct(){}C$ht.prototype.Copy=function(C$t){return C$t.m_vertices===C$t.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(C$t.m_buffer[0]),this.m_buffer[1].Copy(C$t.m_buffer[1])):this.m_vertices=C$t.m_vertices,this.m_count=C$t.m_count,this.m_radius=C$t.m_radius,this},C$ht.prototype.Reset=function(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this},C$ht.prototype.SetShape=function(C$t,C$e){C$t.SetupDistanceProxy(this,C$e)},C$ht.prototype.SetVerticesRadius=function(C$t,C$e,C$i){this.m_vertices=C$t,this.m_count=C$e,this.m_radius=C$i},C$ht.prototype.GetSupport=function(C$t){for(var C$e=0,C$i=C$j.DotVV(this.m_vertices[0],C$t),C$n=1;C$n<this.m_count;++C$n){var C$r=C$j.DotVV(this.m_vertices[C$n],C$t);C$i<C$r&&(C$e=C$n,C$i=C$r)}return C$e},C$ht.prototype.GetSupportVertex=function(C$t){for(var C$e=0,C$i=C$j.DotVV(this.m_vertices[0],C$t),C$n=1;C$n<this.m_count;++C$n){var C$r=C$j.DotVV(this.m_vertices[C$n],C$t);C$i<C$r&&(C$e=C$n,C$i=C$r)}return this.m_vertices[C$e]},C$ht.prototype.GetVertexCount=function(){return this.m_count},C$ht.prototype.GetVertex=function(C$t){return this.m_vertices[C$t]};var C$lt=C$ht;function C$ht(){this.m_buffer=C$j.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}C$_t.prototype.Reset=function(){return this.metric=0,this.count=0,this};var C$ut=C$_t;function C$_t(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}C$ft.prototype.Reset=function(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this};var C$dt=C$ft;function C$ft(){this.proxyA=new C$lt,this.proxyB=new C$lt,this.transformA=new C$R,this.transformB=new C$R,this.useRadii=!1}C$mt.prototype.Reset=function(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this};var C$pt=C$mt;function C$mt(){this.pointA=new C$j,this.pointB=new C$j,this.distance=0,this.iterations=0}function C$yt(){this.proxyA=new C$lt,this.proxyB=new C$lt,this.transformA=new C$R,this.transformB=new C$R,this.translationB=new C$j}function C$gt(){this.point=new C$j,this.normal=new C$j,this.lambda=0,this.iterations=0}C$H.b2_gjkCalls=0,C$H.b2_gjkIters=0,C$H.b2_gjkMaxIters=0;C$xt.prototype.Copy=function(C$t){return this.wA.Copy(C$t.wA),this.wB.Copy(C$t.wB),this.w.Copy(C$t.w),this.a=C$t.a,this.indexA=C$t.indexA,this.indexB=C$t.indexB,this};var C$vt=C$xt;function C$xt(){this.wA=new C$j,this.wB=new C$j,this.w=new C$j,this.a=0,this.indexA=0,this.indexB=0}C$At.prototype.ReadCache=function(C$t,C$e,C$i,C$n,C$h){this.m_count=C$t.count;for(var C$r,C$s,C$u=this.m_vertices,C$o=0;C$o<this.m_count;++C$o){(C$a=C$u[C$o]).indexA=C$t.indexA[C$o],C$a.indexB=C$t.indexB[C$o];var C$a,C$c=C$e.GetVertex(C$a.indexA),C$l=C$n.GetVertex(C$a.indexB);C$R.MulXV(C$i,C$c,C$a.wA),C$R.MulXV(C$h,C$l,C$a.wB),C$j.SubVV(C$a.wB,C$a.wA,C$a.w),C$a.a=0}1<this.m_count&&(C$r=C$t.metric,((C$s=this.GetMetric())<.5*C$r||2*C$r<C$s||C$s<C$M)&&(this.m_count=0)),0===this.m_count&&((C$a=C$u[0]).indexA=0,C$a.indexB=0,C$c=C$e.GetVertex(0),C$l=C$n.GetVertex(0),C$R.MulXV(C$i,C$c,C$a.wA),C$R.MulXV(C$h,C$l,C$a.wB),C$j.SubVV(C$a.wB,C$a.wA,C$a.w),C$a.a=1,this.m_count=1)},C$At.prototype.WriteCache=function(C$t){C$t.metric=this.GetMetric(),C$t.count=this.m_count;for(var C$e=this.m_vertices,C$i=0;C$i<this.m_count;++C$i)C$t.indexA[C$i]=C$e[C$i].indexA,C$t.indexB[C$i]=C$e[C$i].indexB},C$At.prototype.GetSearchDirection=function(C$t){switch(this.m_count){case 1:return C$j.NegV(this.m_v1.w,C$t);case 2:var C$e=C$j.SubVV(this.m_v2.w,this.m_v1.w,C$t);return 0<C$j.CrossVV(C$e,C$j.NegV(this.m_v1.w,C$j.s_t0))?C$j.CrossOneV(C$e,C$t):C$j.CrossVOne(C$e,C$t);default:return C$t.SetZero()}},C$At.prototype.GetClosestPoint=function(C$t){switch(this.m_count){case 0:return C$t.SetZero();case 1:return C$t.Copy(this.m_v1.w);case 2:return C$t.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return C$t.SetZero()}},C$At.prototype.GetWitnessPoints=function(C$t,C$e){switch(this.m_count){case 0:break;case 1:C$t.Copy(this.m_v1.wA),C$e.Copy(this.m_v1.wB);break;case 2:C$t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,C$t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,C$e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,C$e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:C$e.x=C$t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,C$e.y=C$t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}},C$At.prototype.GetMetric=function(){switch(this.m_count){case 0:case 1:return 0;case 2:return C$j.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return C$j.CrossVV(C$j.SubVV(this.m_v2.w,this.m_v1.w,C$j.s_t0),C$j.SubVV(this.m_v3.w,this.m_v1.w,C$j.s_t1));default:return 0}},C$At.prototype.Solve2=function(){var C$t=this.m_v1.w,C$e=this.m_v2.w,C$i=C$j.SubVV(C$e,C$t,C$At.s_e12),C$t=-C$j.DotVV(C$t,C$i);if(C$t<=0)return this.m_v1.a=1,void(this.m_count=1);C$e=C$j.DotVV(C$e,C$i);if(C$e<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);C$i=1/(C$e+C$t);this.m_v1.a=C$e*C$i,this.m_v2.a=C$t*C$i,this.m_count=2},C$At.prototype.Solve3=function(){var C$t=this.m_v1.w,C$e=this.m_v2.w,C$i=this.m_v3.w,C$n=C$j.SubVV(C$e,C$t,C$At.s_e12),C$r=C$j.DotVV(C$t,C$n),C$s=C$j.DotVV(C$e,C$n),C$r=-C$r,C$o=C$j.SubVV(C$i,C$t,C$At.s_e13),C$a=C$j.DotVV(C$t,C$o),C$h=C$j.DotVV(C$i,C$o),C$a=-C$a,C$c=C$j.SubVV(C$i,C$e,C$At.s_e23),C$l=C$j.DotVV(C$e,C$c),C$c=C$j.DotVV(C$i,C$c),C$l=-C$l,C$n=C$j.CrossVV(C$n,C$o),C$o=C$n*C$j.CrossVV(C$e,C$i),C$i=C$n*C$j.CrossVV(C$i,C$t),C$n=C$n*C$j.CrossVV(C$t,C$e);if(C$r<=0&&C$a<=0)return this.m_v1.a=1,void(this.m_count=1);if(0<C$s&&0<C$r&&C$n<=0)return this.m_v1.a=C$s*(C$t=1/(C$s+C$r)),this.m_v2.a=C$r*C$t,void(this.m_count=2);if(0<C$h&&0<C$a&&C$i<=0)return this.m_v1.a=C$h*(C$e=1/(C$h+C$a)),this.m_v3.a=C$a*C$e,this.m_count=2,void this.m_v2.Copy(this.m_v3);if(C$s<=0&&C$l<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(C$h<=0&&C$c<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(0<C$c&&0<C$l&&C$o<=0)return this.m_v2.a=C$c*(C$r=1/(C$c+C$l)),this.m_v3.a=C$l*C$r,this.m_count=2,void this.m_v1.Copy(this.m_v3);C$t=1/(C$o+C$i+C$n);this.m_v1.a=C$o*C$t,this.m_v2.a=C$i*C$t,this.m_v3.a=C$n*C$t,this.m_count=3},C$At.s_e12=new C$j,C$At.s_e13=new C$j,C$At.s_e23=new C$j;var C$bt=C$At;function C$At(){this.m_v1=new C$vt,this.m_v2=new C$vt,this.m_v3=new C$vt,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}var C$Ct=new C$bt,C$St=[0,0,0],C$Tt=[0,0,0],C$wt=new C$j,C$Et=new C$j,C$Mt=new C$j,C$It=new C$j,C$Bt=new C$j;function C$Rt(C$t,C$e,C$i){++C$H.b2_gjkCalls;for(var C$n,C$r=C$i.proxyA,C$s=C$i.proxyB,C$h=C$i.transformA,C$u=C$i.transformB,C$o=C$Ct,C$_=(C$o.ReadCache(C$e,C$r,C$h,C$s,C$u),C$o.m_vertices),C$d=C$St,C$f=C$Tt,C$a=0;C$a<20;){for(var C$p=C$o.m_count,C$c=0;C$c<C$p;++C$c)C$d[C$c]=C$_[C$c].indexA,C$f[C$c]=C$_[C$c].indexB;switch(C$o.m_count){case 1:break;case 2:C$o.Solve2();break;case 3:C$o.Solve3()}if(3===C$o.m_count)break;var C$m=C$o.GetSearchDirection(C$Et);if(C$m.LengthSquared()<C$g)break;for(var C$l=C$_[C$o.m_count],C$y=(C$l.indexA=C$r.GetSupport(C$B.MulTRV(C$h.q,C$j.NegV(C$m,C$j.s_t0),C$It)),C$R.MulXV(C$h,C$r.GetVertex(C$l.indexA),C$l.wA),C$l.indexB=C$s.GetSupport(C$B.MulTRV(C$u.q,C$m,C$Bt)),C$R.MulXV(C$u,C$s.GetVertex(C$l.indexB),C$l.wB),C$j.SubVV(C$l.wB,C$l.wA,C$l.w),++C$a,++C$H.b2_gjkIters,!1),C$c=0;C$c<C$p;++C$c)if(C$l.indexA===C$d[C$c]&&C$l.indexB===C$f[C$c]){C$y=!0;break}if(C$y)break;++C$o.m_count}C$H.b2_gjkMaxIters=C$V(C$H.b2_gjkMaxIters,C$a),C$o.GetWitnessPoints(C$t.pointA,C$t.pointB),C$t.distance=C$j.DistanceVV(C$t.pointA,C$t.pointB),C$t.iterations=C$a,C$o.WriteCache(C$e),C$i.useRadii&&(C$e=C$r.m_radius,C$i=C$s.m_radius,C$t.distance>C$e+C$i&&C$t.distance>C$M?(C$t.distance-=C$e+C$i,(C$n=C$j.SubVV(C$t.pointB,C$t.pointA,C$Mt)).Normalize(),C$t.pointA.SelfMulAdd(C$e,C$n),C$t.pointB.SelfMulSub(C$i,C$n)):(C$e=C$j.MidVV(C$t.pointA,C$t.pointB,C$wt),C$t.pointA.Copy(C$e),C$t.pointB.Copy(C$e),C$t.distance=0))}var C$Pt=new C$j,C$Dt=new C$bt,C$Lt=new C$j,C$Vt=new C$j,C$Ot=new C$j,C$Ft=new C$j,C$Nt=new C$j,C$kt=new C$j;(C$qt=C$H.b2ContactFeatureType||(C$H.b2ContactFeatureType={}))[C$qt.e_vertex=0]="e_vertex",C$qt[C$qt.e_face=1]="e_face";Object.defineProperty(C$zt.prototype,"key",{get:function(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key},set:function(C$t){this._key=C$t,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255},enumerable:!0,configurable:!0}),Object.defineProperty(C$zt.prototype,"indexA",{get:function(){return this._indexA},set:function(C$t){this._indexA=C$t,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(C$zt.prototype,"indexB",{get:function(){return this._indexB},set:function(C$t){this._indexB=C$t,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(C$zt.prototype,"typeA",{get:function(){return this._typeA},set:function(C$t){this._typeA=C$t,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(C$zt.prototype,"typeB",{get:function(){return this._typeB},set:function(C$t){this._typeB=C$t,this._key_invalid=!0},enumerable:!0,configurable:!0});var C$Gt=C$zt;function C$zt(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}C$Wt.prototype.Copy=function(C$t){return this.key=C$t.key,this},C$Wt.prototype.Clone=function(){return(new C$Wt).Copy(this)},Object.defineProperty(C$Wt.prototype,"key",{get:function(){return this.cf.key},set:function(C$t){this.cf.key=C$t},enumerable:!0,configurable:!0});var C$Ut=C$Wt;function C$Wt(){this.cf=new C$Gt}C$jt.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$jt})},C$jt.prototype.Reset=function(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0},C$jt.prototype.Copy=function(C$t){return this.localPoint.Copy(C$t.localPoint),this.normalImpulse=C$t.normalImpulse,this.tangentImpulse=C$t.tangentImpulse,this.id.Copy(C$t.id),this};var C$Ht=C$jt;function C$jt(){this.localPoint=new C$j,this.normalImpulse=0,this.tangentImpulse=0,this.id=new C$Ut}(C$qt=C$H.b2ManifoldType||(C$H.b2ManifoldType={}))[C$qt.e_unknown=-1]="e_unknown",C$qt[C$qt.e_circles=0]="e_circles",C$qt[C$qt.e_faceA=1]="e_faceA",C$qt[C$qt.e_faceB=2]="e_faceB";C$Yt.prototype.Reset=function(){for(var C$t=0;C$t<2;++C$t)this.points[C$t].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=C$H.b2ManifoldType.e_unknown,this.pointCount=0},C$Yt.prototype.Copy=function(C$t){this.pointCount=C$t.pointCount;for(var C$e=0;C$e<2;++C$e)this.points[C$e].Copy(C$t.points[C$e]);return this.localNormal.Copy(C$t.localNormal),this.localPoint.Copy(C$t.localPoint),this.type=C$t.type,this},C$Yt.prototype.Clone=function(){return(new C$Yt).Copy(this)};var C$Xt=C$Yt;function C$Yt(){this.points=C$Ht.MakeArray(2),this.localNormal=new C$j,this.localPoint=new C$j,this.type=C$H.b2ManifoldType.e_unknown,this.pointCount=0}C$Jt.prototype.Initialize=function(C$t,C$e,C$i,C$n,C$r){if(0!==C$t.pointCount)switch(C$t.type){case C$H.b2ManifoldType.e_circles:this.normal.Set(1,0);var C$s=C$R.MulXV(C$e,C$t.localPoint,C$Jt.Initialize_s_pointA),C$h=C$R.MulXV(C$n,C$t.points[0].localPoint,C$Jt.Initialize_s_pointB),C$o=(C$j.DistanceSquaredVV(C$s,C$h)>C$g&&C$j.SubVV(C$h,C$s,this.normal).SelfNormalize(),C$j.AddVMulSV(C$s,C$i,this.normal,C$Jt.Initialize_s_cA)),C$a=C$j.SubVMulSV(C$h,C$r,this.normal,C$Jt.Initialize_s_cB);C$j.MidVV(C$o,C$a,this.points[0]),this.separations[0]=C$j.DotVV(C$j.SubVV(C$a,C$o,C$j.s_t0),this.normal);break;case C$H.b2ManifoldType.e_faceA:C$B.MulRV(C$e.q,C$t.localNormal,this.normal);for(var C$u=C$R.MulXV(C$e,C$t.localPoint,C$Jt.Initialize_s_planePoint),C$c=0;C$c<C$t.pointCount;++C$c){var C$l=C$R.MulXV(C$n,C$t.points[C$c].localPoint,C$Jt.Initialize_s_clipPoint),C$_=C$i-C$j.DotVV(C$j.SubVV(C$l,C$u,C$j.s_t0),this.normal),C$o=C$j.AddVMulSV(C$l,C$_,this.normal,C$Jt.Initialize_s_cA),C$a=C$j.SubVMulSV(C$l,C$r,this.normal,C$Jt.Initialize_s_cB);C$j.MidVV(C$o,C$a,this.points[C$c]),this.separations[C$c]=C$j.DotVV(C$j.SubVV(C$a,C$o,C$j.s_t0),this.normal)}break;case C$H.b2ManifoldType.e_faceB:C$B.MulRV(C$n.q,C$t.localNormal,this.normal);for(C$u=C$R.MulXV(C$n,C$t.localPoint,C$Jt.Initialize_s_planePoint),C$c=0;C$c<C$t.pointCount;++C$c){C$l=C$R.MulXV(C$e,C$t.points[C$c].localPoint,C$Jt.Initialize_s_clipPoint),C$_=C$r-C$j.DotVV(C$j.SubVV(C$l,C$u,C$j.s_t0),this.normal),C$a=C$j.AddVMulSV(C$l,C$_,this.normal,C$Jt.Initialize_s_cB),C$o=C$j.SubVMulSV(C$l,C$i,this.normal,C$Jt.Initialize_s_cA);C$j.MidVV(C$o,C$a,this.points[C$c]),this.separations[C$c]=C$j.DotVV(C$j.SubVV(C$o,C$a,C$j.s_t0),this.normal)}this.normal.SelfNeg()}},C$Jt.Initialize_s_pointA=new C$j,C$Jt.Initialize_s_pointB=new C$j,C$Jt.Initialize_s_cA=new C$j,C$Jt.Initialize_s_cB=new C$j,C$Jt.Initialize_s_planePoint=new C$j,C$Jt.Initialize_s_clipPoint=new C$j;var C$qt=C$Jt;function C$Jt(){this.normal=new C$j,this.points=C$j.MakeArray(2),this.separations=C$h(2)}(C$Zt=C$H.b2PointState||(C$H.b2PointState={}))[C$Zt.b2_nullState=0]="b2_nullState",C$Zt[C$Zt.b2_addState=1]="b2_addState",C$Zt[C$Zt.b2_persistState=2]="b2_persistState",C$Zt[C$Zt.b2_removeState=3]="b2_removeState";C$Kt.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$Kt})},C$Kt.prototype.Copy=function(C$t){return this.v.Copy(C$t.v),this.id.Copy(C$t.id),this};var C$Zt=C$Kt;function C$Kt(){this.v=new C$j,this.id=new C$Ut}C$$t.prototype.Copy=function(C$t){return this.p1.Copy(C$t.p1),this.p2.Copy(C$t.p2),this.maxFraction=C$t.maxFraction,this};var C$Qt=C$$t;function C$$t(){this.p1=new C$j,this.p2=new C$j,this.maxFraction=1}C$ee.prototype.Copy=function(C$t){return this.normal.Copy(C$t.normal),this.fraction=C$t.fraction,this};var C$te=C$ee;function C$ee(){this.normal=new C$j,this.fraction=0}C$ne.prototype.Copy=function(C$t){return this.lowerBound.Copy(C$t.lowerBound),this.upperBound.Copy(C$t.upperBound),this},C$ne.prototype.IsValid=function(){var C$t=this.upperBound.x-this.lowerBound.x,C$e=this.upperBound.y-this.lowerBound.y;return 0<=C$t&&0<=C$e&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},C$ne.prototype.GetCenter=function(){return C$j.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)},C$ne.prototype.GetExtents=function(){return C$j.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)},C$ne.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))},C$ne.prototype.Combine1=function(C$t){return this.lowerBound.x=C$L(this.lowerBound.x,C$t.lowerBound.x),this.lowerBound.y=C$L(this.lowerBound.y,C$t.lowerBound.y),this.upperBound.x=C$V(this.upperBound.x,C$t.upperBound.x),this.upperBound.y=C$V(this.upperBound.y,C$t.upperBound.y),this},C$ne.prototype.Combine2=function(C$t,C$e){return this.lowerBound.x=C$L(C$t.lowerBound.x,C$e.lowerBound.x),this.lowerBound.y=C$L(C$t.lowerBound.y,C$e.lowerBound.y),this.upperBound.x=C$V(C$t.upperBound.x,C$e.upperBound.x),this.upperBound.y=C$V(C$t.upperBound.y,C$e.upperBound.y),this},C$ne.Combine=function(C$t,C$e,C$i){return C$i.Combine2(C$t,C$e),C$i},C$ne.prototype.Contains=function(C$t){return this.lowerBound.x<=C$t.lowerBound.x&&this.lowerBound.y<=C$t.lowerBound.y&&C$t.upperBound.x<=this.upperBound.x&&C$t.upperBound.y<=this.upperBound.y},C$ne.prototype.RayCast=function(C$h,C$t){var C$e=-C$P,C$i=C$P,C$n=C$t.p1.x,C$r=C$t.p1.y,C$u=C$t.p2.x-C$t.p1.x,C$_=C$t.p2.y-C$t.p1.y,C$d=C$D(C$u),C$f=C$D(C$_),C$s=C$h.normal;if(C$d<C$M){if(C$n<this.lowerBound.x||this.upperBound.x<C$n)return!1}else{var C$o=1/C$u,C$a=(this.lowerBound.x-C$n)*C$o,C$c=-1;if((C$l=(this.upperBound.x-C$n)*C$o)<C$a&&(C$p=C$a,C$a=C$l,C$l=C$p,C$c=1),C$e<C$a&&(C$s.x=C$c,C$s.y=0,C$e=C$a),(C$i=C$L(C$i,C$l))<C$e)return!1}if(C$f<C$M){if(C$r<this.lowerBound.y||this.upperBound.y<C$r)return!1}else{var C$l,C$p,C$o=1/C$_,C$a=(this.lowerBound.y-C$r)*C$o,C$c=-1;if((C$l=(this.upperBound.y-C$r)*C$o)<C$a&&(C$p=C$a,C$a=C$l,C$l=C$p,C$c=1),C$e<C$a&&(C$s.x=0,C$s.y=C$c,C$e=C$a),(C$i=C$L(C$i,C$l))<C$e)return!1}return!(C$e<0||C$t.maxFraction<C$e)&&(C$h.fraction=C$e,!0)},C$ne.prototype.TestContain=function(C$t){return!(C$t.x<this.lowerBound.x||this.upperBound.x<C$t.x)&&!(C$t.y<this.lowerBound.y||this.upperBound.y<C$t.y)},C$ne.prototype.TestOverlap=function(C$t){var C$e=C$t.lowerBound.x-this.upperBound.x,C$i=C$t.lowerBound.y-this.upperBound.y,C$n=this.lowerBound.x-C$t.upperBound.x,C$t=this.lowerBound.y-C$t.upperBound.y;return!(0<C$e||0<C$i)&&!(0<C$n||0<C$t)};var C$ie=C$ne;function C$ne(){this.lowerBound=new C$j,this.upperBound=new C$j,this.m_cache_center=new C$j,this.m_cache_extent=new C$j}function C$re(C$t,C$e){var C$i=C$e.lowerBound.x-C$t.upperBound.x,C$n=C$e.lowerBound.y-C$t.upperBound.y,C$r=C$t.lowerBound.x-C$e.upperBound.x,C$t=C$t.lowerBound.y-C$e.upperBound.y;return!(0<C$i||0<C$n)&&!(0<C$r||0<C$t)}function C$se(C$t,C$e,C$i,C$n,C$r){var C$s=0,C$o=C$e[0],C$e=C$e[1],C$a=C$j.DotVV(C$i,C$o.v)-C$n,C$i=C$j.DotVV(C$i,C$e.v)-C$n;return C$a<=0&&C$t[C$s++].Copy(C$o),C$i<=0&&C$t[C$s++].Copy(C$e),C$a*C$i<0&&((C$n=C$t[C$s].v).x=C$o.v.x+(C$a=C$a/(C$a-C$i))*(C$e.v.x-C$o.v.x),C$n.y=C$o.v.y+C$a*(C$e.v.y-C$o.v.y),(C$i=C$t[C$s].id).cf.indexA=C$r,C$i.cf.indexB=C$o.id.cf.indexB,C$i.cf.typeA=C$H.b2ContactFeatureType.e_vertex,C$i.cf.typeB=C$H.b2ContactFeatureType.e_face,++C$s),C$s}var C$oe=new C$dt,C$ae=new C$ut,C$ce=new C$pt;function C$le(C$t,C$e,C$i,C$n,C$r,C$s){var C$o=C$oe.Reset(),C$t=(C$o.proxyA.SetShape(C$t,C$e),C$o.proxyB.SetShape(C$i,C$n),C$o.transformA.Copy(C$r),C$o.transformB.Copy(C$s),C$o.useRadii=!0,C$ae.Reset()),C$e=(C$t.count=0,C$ce.Reset());return C$Rt(C$e,C$t,C$o),C$e.distance<10*C$M}function C$he(C$t){if(null===C$t)throw new Error;return C$t}C$_e.prototype.IsLeaf=function(){return null===this.child1};var C$ue=C$_e;function C$_e(C$t){void 0===C$t&&(C$t=0),this.m_id=0,this.aabb=new C$ie,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=C$t}C$fe.prototype.Query=function(C$t,C$e){if(null!==this.m_root){var C$i=this.m_stack.Reset();for(C$i.Push(this.m_root);0<C$i.GetCount();){var C$n=C$i.Pop();if(C$n.aabb.TestOverlap(C$t))if(C$n.IsLeaf()){if(!C$e(C$n))return}else C$i.Push(C$he(C$n.child1)),C$i.Push(C$he(C$n.child2))}}},C$fe.prototype.QueryPoint=function(C$t,C$e){if(null!==this.m_root){var C$i=this.m_stack.Reset();for(C$i.Push(this.m_root);0<C$i.GetCount();){var C$n=C$i.Pop();if(C$n.aabb.TestContain(C$t))if(C$n.IsLeaf()){if(!C$e(C$n))return}else C$i.Push(C$he(C$n.child1)),C$i.Push(C$he(C$n.child2))}}},C$fe.prototype.RayCast=function(C$t,C$h){if(null!==this.m_root){var C$e=C$t.p1,C$i=C$t.p2,C$u=C$j.SubVV(C$i,C$e,C$fe.s_r),C$_=(C$u.Normalize(),C$j.CrossOneV(C$u,C$fe.s_v)),C$d=C$j.AbsV(C$_,C$fe.s_abs_v),C$n=C$t.maxFraction,C$r=C$fe.s_segmentAABB,C$s=C$e.x+C$n*(C$i.x-C$e.x),C$o=C$e.y+C$n*(C$i.y-C$e.y),C$a=(C$r.lowerBound.x=C$L(C$e.x,C$s),C$r.lowerBound.y=C$L(C$e.y,C$o),C$r.upperBound.x=C$V(C$e.x,C$s),C$r.upperBound.y=C$V(C$e.y,C$o),this.m_stack.Reset());for(C$a.Push(this.m_root);0<C$a.GetCount();){var C$c=C$a.Pop();if(C$re(C$c.aabb,C$r)){var C$l=C$c.aabb.GetCenter(),C$f=C$c.aabb.GetExtents();if(!(0<C$D(C$j.DotVV(C$_,C$j.SubVV(C$e,C$l,C$j.s_t0)))-C$j.DotVV(C$d,C$f)))if(C$c.IsLeaf()){C$l=C$fe.s_subInput,C$f=(C$l.p1.Copy(C$t.p1),C$l.p2.Copy(C$t.p2),C$l.maxFraction=C$n,C$h(C$l,C$c));if(0===C$f)return;0<C$f&&(C$s=C$e.x+(C$n=C$f)*(C$i.x-C$e.x),C$o=C$e.y+C$n*(C$i.y-C$e.y),C$r.lowerBound.x=C$L(C$e.x,C$s),C$r.lowerBound.y=C$L(C$e.y,C$o),C$r.upperBound.x=C$V(C$e.x,C$s),C$r.upperBound.y=C$V(C$e.y,C$o))}else C$a.Push(C$he(C$c.child1)),C$a.Push(C$he(C$c.child2))}}}},C$fe.prototype.AllocateNode=function(){var C$t;return this.m_freeList?(C$t=this.m_freeList,this.m_freeList=C$t.parent,C$t.parent=null,C$t.child1=null,C$t.child2=null,C$t.height=0,delete C$t.userData,C$t):new C$ue(C$fe.s_node_id++)},C$fe.prototype.FreeNode=function(C$t){C$t.parent=this.m_freeList,C$t.child1=null,C$t.child2=null,C$t.height=-1,delete C$t.userData,this.m_freeList=C$t},C$fe.prototype.CreateProxy=function(C$t,C$e){var C$i=this.AllocateNode();return C$i.aabb.lowerBound.x=C$t.lowerBound.x-.1,C$i.aabb.lowerBound.y=C$t.lowerBound.y-.1,C$i.aabb.upperBound.x=C$t.upperBound.x+.1,C$i.aabb.upperBound.y=C$t.upperBound.y+.1,C$i.userData=C$e,C$i.height=0,this.InsertLeaf(C$i),C$i},C$fe.prototype.DestroyProxy=function(C$t){this.RemoveLeaf(C$t),this.FreeNode(C$t)},C$fe.prototype.MoveProxy=function(C$t,C$e,C$i){if(C$t.aabb.Contains(C$e))return!1;this.RemoveLeaf(C$t);var C$n=.1+2*(0<C$i.x?C$i.x:-C$i.x),C$i=.1+2*(0<C$i.y?C$i.y:-C$i.y);return C$t.aabb.lowerBound.x=C$e.lowerBound.x-C$n,C$t.aabb.lowerBound.y=C$e.lowerBound.y-C$i,C$t.aabb.upperBound.x=C$e.upperBound.x+C$n,C$t.aabb.upperBound.y=C$e.upperBound.y+C$i,this.InsertLeaf(C$t),!0},C$fe.prototype.InsertLeaf=function(C$t){if(++this.m_insertionCount,null===this.m_root)return this.m_root=C$t,void(this.m_root.parent=null);for(var C$e=C$t.aabb,C$i=this.m_root;!C$i.IsLeaf();){var C$n=C$he(C$i.child1),C$r=C$he(C$i.child2),C$h=C$i.aabb.GetPerimeter(),C$s=C$fe.s_combinedAABB,C$s=(C$s.Combine2(C$i.aabb,C$e),C$s.GetPerimeter()),C$u=2*C$s,C$s=2*(C$s-C$h),C$h=void 0,C$o=C$fe.s_aabb,C$_=void 0,C$h=C$n.IsLeaf()?(C$o.Combine2(C$e,C$n.aabb),C$o.GetPerimeter()+C$s):(C$o.Combine2(C$e,C$n.aabb),C$_=C$n.aabb.GetPerimeter(),C$o.GetPerimeter()-C$_+C$s),C$d=void 0,C$d=C$r.IsLeaf()?(C$o.Combine2(C$e,C$r.aabb),C$o.GetPerimeter()+C$s):(C$o.Combine2(C$e,C$r.aabb),C$_=C$r.aabb.GetPerimeter(),C$o.GetPerimeter()-C$_+C$s);if(C$u<C$h&&C$u<C$d)break;C$i=C$h<C$d?C$n:C$r}for(var C$a=C$i,C$f=C$a.parent,C$c=this.AllocateNode(),C$l=(C$c.parent=C$f,delete C$c.userData,C$c.aabb.Combine2(C$e,C$a.aabb),C$c.height=C$a.height+1,C$f?(C$f.child1===C$a?C$f.child1=C$c:C$f.child2=C$c,C$c.child1=C$a,C$c.child2=C$t,C$a.parent=C$c,C$t.parent=C$c):(C$c.child1=C$a,C$c.child2=C$t,C$a.parent=C$c,C$t.parent=C$c,this.m_root=C$c),C$t.parent);null!==C$l;){C$n=C$he((C$l=this.Balance(C$l)).child1),C$r=C$he(C$l.child2);C$l.height=1+C$V(C$n.height,C$r.height),C$l.aabb.Combine2(C$n.aabb,C$r.aabb),C$l=C$l.parent}},C$fe.prototype.RemoveLeaf=function(C$t){if(C$t!==this.m_root){var C$e=C$he(C$t.parent),C$i=C$e&&C$e.parent,C$t=C$e.child1===C$t?C$he(C$e.child2):C$he(C$e.child1);if(C$i){C$i.child1===C$e?C$i.child1=C$t:C$i.child2=C$t,C$t.parent=C$i,this.FreeNode(C$e);for(var C$n=C$i;C$n;){var C$r=C$he((C$n=this.Balance(C$n)).child1),C$s=C$he(C$n.child2);C$n.aabb.Combine2(C$r.aabb,C$s.aabb),C$n.height=1+C$V(C$r.height,C$s.height),C$n=C$n.parent}}else(this.m_root=C$t).parent=null,this.FreeNode(C$e)}else this.m_root=null},C$fe.prototype.Balance=function(C$t){if(C$t.IsLeaf()||C$t.height<2)return C$t;var C$e,C$i,C$n=C$he(C$t.child1),C$r=C$he(C$t.child2),C$s=C$r.height-C$n.height;return 1<C$s?(C$e=C$he(C$r.child1),C$i=C$he(C$r.child2),C$r.child1=C$t,C$r.parent=C$t.parent,null!==(C$t.parent=C$r).parent?C$r.parent.child1===C$t?C$r.parent.child1=C$r:C$r.parent.child2=C$r:this.m_root=C$r,C$e.height>C$i.height?(C$r.child2=C$e,((C$t.child2=C$i).parent=C$t).aabb.Combine2(C$n.aabb,C$i.aabb),C$r.aabb.Combine2(C$t.aabb,C$e.aabb),C$t.height=1+C$V(C$n.height,C$i.height),C$r.height=1+C$V(C$t.height,C$e.height)):(C$r.child2=C$i,((C$t.child2=C$e).parent=C$t).aabb.Combine2(C$n.aabb,C$e.aabb),C$r.aabb.Combine2(C$t.aabb,C$i.aabb),C$t.height=1+C$V(C$n.height,C$e.height),C$r.height=1+C$V(C$t.height,C$i.height)),C$r):C$s<-1?(C$e=C$he(C$n.child1),C$i=C$he(C$n.child2),C$n.child1=C$t,C$n.parent=C$t.parent,null!==(C$t.parent=C$n).parent?C$n.parent.child1===C$t?C$n.parent.child1=C$n:C$n.parent.child2=C$n:this.m_root=C$n,C$e.height>C$i.height?(C$n.child2=C$e,((C$t.child1=C$i).parent=C$t).aabb.Combine2(C$r.aabb,C$i.aabb),C$n.aabb.Combine2(C$t.aabb,C$e.aabb),C$t.height=1+C$V(C$r.height,C$i.height),C$n.height=1+C$V(C$t.height,C$e.height)):(C$n.child2=C$i,((C$t.child1=C$e).parent=C$t).aabb.Combine2(C$r.aabb,C$e.aabb),C$n.aabb.Combine2(C$t.aabb,C$i.aabb),C$t.height=1+C$V(C$r.height,C$e.height),C$n.height=1+C$V(C$t.height,C$i.height)),C$n):C$t},C$fe.prototype.GetHeight=function(){return null===this.m_root?0:this.m_root.height},C$fe.GetAreaNode=function(C$t){if(null===C$t)return 0;if(C$t.IsLeaf())return 0;var C$e=C$t.aabb.GetPerimeter();return(C$e+=C$fe.GetAreaNode(C$t.child1))+C$fe.GetAreaNode(C$t.child2)},C$fe.prototype.GetAreaRatio=function(){if(null===this.m_root)return 0;var C$t=this.m_root.aabb.GetPerimeter();return C$fe.GetAreaNode(this.m_root)/C$t},C$fe.prototype.ComputeHeightNode=function(C$t){if(!C$t||C$t.IsLeaf())return 0;var C$e=this.ComputeHeightNode(C$t.child1),C$t=this.ComputeHeightNode(C$t.child2);return 1+C$V(C$e,C$t)},C$fe.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)},C$fe.prototype.ValidateStructure=function(C$t){var C$e;null!==C$t&&(this.m_root,(C$t=C$t).IsLeaf()||(C$e=C$he(C$t.child1),C$t=C$he(C$t.child2),this.ValidateStructure(C$e),this.ValidateStructure(C$t)))},C$fe.prototype.ValidateMetrics=function(C$t){var C$e;null!==C$t&&((C$t=C$t).IsLeaf()||(C$e=C$he(C$t.child1),C$t=C$he(C$t.child2),C$fe.s_aabb.Combine2(C$e.aabb,C$t.aabb),this.ValidateMetrics(C$e),this.ValidateMetrics(C$t)))},C$fe.prototype.Validate=function(){},C$fe.GetMaxBalanceNode=function(C$t,C$e){if(null===C$t)return C$e;if(C$t.height<=1)return C$e;var C$i=C$he(C$t.child1),C$t=C$he(C$t.child2),C$t=C$D(C$t.height-C$i.height);return C$V(C$e,C$t)},C$fe.prototype.GetMaxBalance=function(){return C$fe.GetMaxBalanceNode(this.m_root,0)},C$fe.prototype.RebuildBottomUp=function(){this.Validate()},C$fe.ShiftOriginNode=function(C$t,C$e){var C$i,C$n;null!==C$t&&(C$t.height<=1||(C$i=C$t.child1,C$n=C$t.child2,C$fe.ShiftOriginNode(C$i,C$e),C$fe.ShiftOriginNode(C$n,C$e),C$t.aabb.lowerBound.SelfSub(C$e),C$t.aabb.upperBound.SelfSub(C$e)))},C$fe.prototype.ShiftOrigin=function(C$t){C$fe.ShiftOriginNode(this.m_root,C$t)},C$fe.s_r=new C$j,C$fe.s_v=new C$j,C$fe.s_abs_v=new C$j,C$fe.s_segmentAABB=new C$ie,C$fe.s_subInput=new C$Qt,C$fe.s_combinedAABB=new C$ie,C$fe.s_aabb=new C$ie,C$fe.s_node_id=0;var C$de=C$fe;function C$fe(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0,this.m_stack=new C$st(256)}var C$pe=function(C$t,C$e){this.proxyA=C$t,this.proxyB=C$e},C$me=(C$ye.prototype.CreateProxy=function(C$t,C$e){C$t=this.m_tree.CreateProxy(C$t,C$e);return++this.m_proxyCount,this.BufferMove(C$t),C$t},C$ye.prototype.DestroyProxy=function(C$t){this.UnBufferMove(C$t),--this.m_proxyCount,this.m_tree.DestroyProxy(C$t)},C$ye.prototype.MoveProxy=function(C$t,C$e,C$i){this.m_tree.MoveProxy(C$t,C$e,C$i)&&this.BufferMove(C$t)},C$ye.prototype.TouchProxy=function(C$t){this.BufferMove(C$t)},C$ye.prototype.GetProxyCount=function(){return this.m_proxyCount},C$ye.prototype.UpdatePairs=function(C$t){for(var C$r=this,C$e=(this.m_pairCount=0,this),C$i=0;C$i<this.m_moveCount;++C$i)!function(C$t){var C$n=C$e.m_moveBuffer[C$t];if(null===C$n)return;C$t=C$n.aabb;C$e.m_tree.Query(C$t,function(C$t){if(C$t.m_id===C$n.m_id)return!0;var C$e,C$i,C$t=C$t.m_id<C$n.m_id?(C$e=C$t,C$n):(C$e=C$n,C$t);return C$r.m_pairCount===C$r.m_pairBuffer.length?C$r.m_pairBuffer[C$r.m_pairCount]=new C$pe(C$e,C$t):((C$i=C$r.m_pairBuffer[C$r.m_pairCount]).proxyA=C$e,C$i.proxyB=C$t),++C$r.m_pairCount,!0})}(C$i);this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(C$ge);for(var C$n=0;C$n<this.m_pairCount;){var C$s=this.m_pairBuffer[C$n],C$o=C$s.proxyA.userData,C$a=C$s.proxyB.userData;for(C$o&&C$a&&C$t(C$o,C$a),++C$n;C$n<this.m_pairCount;){var C$c=this.m_pairBuffer[C$n];if(C$c.proxyA.m_id!==C$s.proxyA.m_id||C$c.proxyB.m_id!==C$s.proxyB.m_id)break;++C$n}}},C$ye.prototype.Query=function(C$t,C$e){this.m_tree.Query(C$t,C$e)},C$ye.prototype.QueryPoint=function(C$t,C$e){this.m_tree.QueryPoint(C$t,C$e)},C$ye.prototype.RayCast=function(C$t,C$e){this.m_tree.RayCast(C$t,C$e)},C$ye.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()},C$ye.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()},C$ye.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()},C$ye.prototype.ShiftOrigin=function(C$t){this.m_tree.ShiftOrigin(C$t)},C$ye.prototype.BufferMove=function(C$t){this.m_moveBuffer[this.m_moveCount]=C$t,++this.m_moveCount},C$ye.prototype.UnBufferMove=function(C$t){C$t=this.m_moveBuffer.indexOf(C$t);this.m_moveBuffer[C$t]=null},C$ye);function C$ye(){this.m_tree=new C$de,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}function C$ge(C$t,C$e){return C$t.proxyA.m_id===C$e.proxyA.m_id?C$t.proxyB.m_id-C$e.proxyB.m_id:C$t.proxyA.m_id-C$e.proxyA.m_id}C$H.b2_toiTime=0,C$H.b2_toiMaxTime=0,C$H.b2_toiCalls=0,C$H.b2_toiIters=0,C$H.b2_toiMaxIters=0,C$H.b2_toiRootIters=0,C$H.b2_toiMaxRootIters=0;var C$ve=new C$R,C$xe=new C$R,C$be=new C$j,C$Ae=new C$j,C$Ce=new C$j,C$Se=new C$j,C$Te=new C$j,C$we=function(){this.proxyA=new C$lt,this.proxyB=new C$lt,this.sweepA=new C$J,this.sweepB=new C$J,this.tMax=0},C$Ee=((C$Ee=C$H.b2TOIOutputState||(C$H.b2TOIOutputState={}))[C$Ee.e_unknown=0]="e_unknown",C$Ee[C$Ee.e_failed=1]="e_failed",C$Ee[C$Ee.e_overlapped=2]="e_overlapped",C$Ee[C$Ee.e_touching=3]="e_touching",C$Ee[C$Ee.e_separated=4]="e_separated",function(){this.state=C$H.b2TOIOutputState.e_unknown,this.t=0}),C$Me=((C$Me=C$H.b2SeparationFunctionType||(C$H.b2SeparationFunctionType={}))[C$Me.e_unknown=-1]="e_unknown",C$Me[C$Me.e_points=0]="e_points",C$Me[C$Me.e_faceA=1]="e_faceA",C$Me[C$Me.e_faceB=2]="e_faceB",C$Ie.prototype.Initialize=function(C$t,C$e,C$i,C$n,C$r,C$s){this.m_proxyA=C$e,this.m_proxyB=C$n;var C$o,C$e=C$t.count,C$n=(this.m_sweepA.Copy(C$i),this.m_sweepB.Copy(C$r),C$ve),C$i=C$xe;if(this.m_sweepA.GetTransform(C$n,C$s),this.m_sweepB.GetTransform(C$i,C$s),1===C$e)return this.m_type=C$H.b2SeparationFunctionType.e_points,C$o=this.m_proxyA.GetVertex(C$t.indexA[0]),C$u=this.m_proxyB.GetVertex(C$t.indexB[0]),C$c=C$R.MulXV(C$n,C$o,C$be),C$l=C$R.MulXV(C$i,C$u,C$Ae),C$j.SubVV(C$l,C$c,this.m_axis),C$a=this.m_axis.Normalize(),this.m_localPoint.SetZero(),C$a;if(C$t.indexA[0]===C$t.indexA[1])return this.m_type=C$H.b2SeparationFunctionType.e_faceB,C$r=this.m_proxyB.GetVertex(C$t.indexB[0]),C$s=this.m_proxyB.GetVertex(C$t.indexB[1]),C$j.CrossVOne(C$j.SubVV(C$s,C$r,C$j.s_t0),this.m_axis).SelfNormalize(),C$h=C$B.MulRV(C$i.q,this.m_axis,C$Ce),C$j.MidVV(C$r,C$s,this.m_localPoint),C$l=C$R.MulXV(C$i,this.m_localPoint,C$Ae),C$o=this.m_proxyA.GetVertex(C$t.indexA[0]),C$c=C$R.MulXV(C$n,C$o,C$be),(C$a=C$j.DotVV(C$j.SubVV(C$c,C$l,C$j.s_t0),C$h))<0&&(this.m_axis.SelfNeg(),C$a=-C$a),C$a;this.m_type=C$H.b2SeparationFunctionType.e_faceA;var C$a,C$e=this.m_proxyA.GetVertex(C$t.indexA[0]),C$r=this.m_proxyA.GetVertex(C$t.indexA[1]),C$h=(C$j.CrossVOne(C$j.SubVV(C$r,C$e,C$j.s_t0),this.m_axis).SelfNormalize(),C$B.MulRV(C$n.q,this.m_axis,C$Ce)),C$c=(C$j.MidVV(C$e,C$r,this.m_localPoint),C$R.MulXV(C$n,this.m_localPoint,C$be)),C$u=this.m_proxyB.GetVertex(C$t.indexB[0]),C$l=C$R.MulXV(C$i,C$u,C$Ae);return(C$a=C$j.DotVV(C$j.SubVV(C$l,C$c,C$j.s_t0),C$h))<0&&(this.m_axis.SelfNeg(),C$a=-C$a),C$a},C$Ie.prototype.FindMinSeparation=function(C$t,C$e,C$i){var C$n=C$ve,C$r=C$xe;switch(this.m_sweepA.GetTransform(C$n,C$i),this.m_sweepB.GetTransform(C$r,C$i),this.m_type){case C$H.b2SeparationFunctionType.e_points:var C$s=C$B.MulTRV(C$n.q,this.m_axis,C$Se),C$h=C$B.MulTRV(C$r.q,C$j.NegV(this.m_axis,C$j.s_t0),C$Te),C$o=(C$t[0]=this.m_proxyA.GetSupport(C$s),C$e[0]=this.m_proxyB.GetSupport(C$h),this.m_proxyA.GetVertex(C$t[0])),C$u=this.m_proxyB.GetVertex(C$e[0]),C$a=C$R.MulXV(C$n,C$o,C$be),C$c=C$R.MulXV(C$r,C$u,C$Ae);return C$j.DotVV(C$j.SubVV(C$c,C$a,C$j.s_t0),this.m_axis);case C$H.b2SeparationFunctionType.e_faceA:var C$l=C$B.MulRV(C$n.q,this.m_axis,C$Ce),C$a=C$R.MulXV(C$n,this.m_localPoint,C$be),C$h=C$B.MulTRV(C$r.q,C$j.NegV(C$l,C$j.s_t0),C$Te),C$u=(C$t[0]=-1,C$e[0]=this.m_proxyB.GetSupport(C$h),this.m_proxyB.GetVertex(C$e[0])),C$c=C$R.MulXV(C$r,C$u,C$Ae);return C$j.DotVV(C$j.SubVV(C$c,C$a,C$j.s_t0),C$l);case C$H.b2SeparationFunctionType.e_faceB:C$l=C$B.MulRV(C$r.q,this.m_axis,C$Ce),C$c=C$R.MulXV(C$r,this.m_localPoint,C$Ae),C$s=C$B.MulTRV(C$n.q,C$j.NegV(C$l,C$j.s_t0),C$Se),C$o=(C$e[0]=-1,C$t[0]=this.m_proxyA.GetSupport(C$s),this.m_proxyA.GetVertex(C$t[0])),C$a=C$R.MulXV(C$n,C$o,C$be);return C$j.DotVV(C$j.SubVV(C$a,C$c,C$j.s_t0),C$l);default:return C$t[0]=-1,C$e[0]=-1,0}},C$Ie.prototype.Evaluate=function(C$t,C$e,C$i){var C$n=C$ve,C$r=C$xe;switch(this.m_sweepA.GetTransform(C$n,C$i),this.m_sweepB.GetTransform(C$r,C$i),this.m_type){case C$H.b2SeparationFunctionType.e_points:var C$s=this.m_proxyA.GetVertex(C$t),C$o=this.m_proxyB.GetVertex(C$e),C$a=C$R.MulXV(C$n,C$s,C$be),C$c=C$R.MulXV(C$r,C$o,C$Ae);return C$j.DotVV(C$j.SubVV(C$c,C$a,C$j.s_t0),this.m_axis);case C$H.b2SeparationFunctionType.e_faceA:var C$l=C$B.MulRV(C$n.q,this.m_axis,C$Ce),C$a=C$R.MulXV(C$n,this.m_localPoint,C$be),C$o=this.m_proxyB.GetVertex(C$e),C$c=C$R.MulXV(C$r,C$o,C$Ae);return C$j.DotVV(C$j.SubVV(C$c,C$a,C$j.s_t0),C$l);case C$H.b2SeparationFunctionType.e_faceB:C$l=C$B.MulRV(C$r.q,this.m_axis,C$Ce),C$c=C$R.MulXV(C$r,this.m_localPoint,C$Ae),C$s=this.m_proxyA.GetVertex(C$t),C$a=C$R.MulXV(C$n,C$s,C$be);return C$j.DotVV(C$j.SubVV(C$a,C$c,C$j.s_t0),C$l);default:return 0}},C$Ie);function C$Ie(){this.m_sweepA=new C$J,this.m_sweepB=new C$J,this.m_type=C$H.b2SeparationFunctionType.e_unknown,this.m_localPoint=new C$j,this.m_axis=new C$j}var C$Be=new C$et,C$Re=new C$ut,C$Pe=new C$dt,C$De=new C$pt,C$Le=new C$Me,C$Ve=[0],C$Oe=[0],C$Fe=new C$J,C$Ne=new C$J;function C$ke(C$t,C$e){var C$h=C$Be.Reset(),C$u=(++C$H.b2_toiCalls,C$t.state=C$H.b2TOIOutputState.e_unknown,C$t.t=C$e.tMax,C$e.proxyA),C$_=C$e.proxyB,C$d=C$Fe.Copy(C$e.sweepA),C$f=C$Ne.Copy(C$e.sweepB),C$p=(C$d.Normalize(),C$f.Normalize(),C$e.tMax),C$i=C$u.m_radius+C$_.m_radius,C$n=C$V(.008,C$i-.024),C$r=0,C$m=0,C$y=C$Re,C$s=(C$y.count=0,C$Pe);for(C$s.proxyA.Copy(C$e.proxyA),C$s.proxyB.Copy(C$e.proxyB),C$s.useRadii=!1;;){var C$o=C$ve,C$g=C$xe,C$o=(C$d.GetTransform(C$o,C$r),C$f.GetTransform(C$g,C$r),C$s.transformA.Copy(C$o),C$s.transformB.Copy(C$g),C$De);if(C$Rt(C$o,C$y,C$s),C$o.distance<=0){C$t.state=C$H.b2TOIOutputState.e_overlapped,C$t.t=0;break}if(C$o.distance<C$n+.002){C$t.state=C$H.b2TOIOutputState.e_touching,C$t.t=C$r;break}for(var C$a=C$Le,C$c=(C$a.Initialize(C$y,C$u,C$d,C$_,C$f,C$r),!1),C$v=C$p,C$x=0;;){var C$b=C$Ve,C$A=C$Oe,C$C=C$a.FindMinSeparation(C$b,C$A,C$v);if(C$n+.002<C$C){C$t.state=C$H.b2TOIOutputState.e_separated,C$t.t=C$p,C$c=!0;break}if(C$n-.002<C$C){C$r=C$v;break}var C$l=C$a.Evaluate(C$b[0],C$A[0],C$r);if(C$l<C$n-.002){C$t.state=C$H.b2TOIOutputState.e_failed,C$t.t=C$r,C$c=!0;break}if(C$l<=C$n+.002){C$t.state=C$H.b2TOIOutputState.e_touching,C$t.t=C$r,C$c=!0;break}for(var C$S=0,C$T=C$r,C$w=C$v;;){var C$E=1&C$S?C$T+(C$n-C$l)*(C$w-C$T)/(C$C-C$l):.5*(C$T+C$w),C$M=(++C$S,++C$H.b2_toiRootIters,C$a.Evaluate(C$b[0],C$A[0],C$E));if(C$D(C$M-C$n)<.002){C$v=C$E;break}if(C$n<C$M?(C$T=C$E,C$l=C$M):(C$w=C$E,C$C=C$M),50===C$S)break}if(C$H.b2_toiMaxRootIters=C$V(C$H.b2_toiMaxRootIters,C$S),8===++C$x)break}if(++C$m,++C$H.b2_toiIters,C$c)break;if(20===C$m){C$t.state=C$H.b2TOIOutputState.e_failed,C$t.t=C$r;break}}C$H.b2_toiMaxIters=C$V(C$H.b2_toiMaxIters,C$m);C$i=C$h.GetMilliseconds();C$H.b2_toiMaxTime=C$V(C$H.b2_toiMaxTime,C$i),C$H.b2_toiTime+=C$i}var C$Ge=new C$j,C$ze=new C$j;function C$Ue(C$t,C$e,C$i,C$n,C$r){C$t.pointCount=0;C$i=C$R.MulXV(C$i,C$e.m_p,C$Ge),C$r=C$R.MulXV(C$r,C$n.m_p,C$ze),C$i=C$j.DistanceSquaredVV(C$i,C$r),C$r=C$e.m_radius+C$n.m_radius;C$r*C$r<C$i||(C$t.type=C$H.b2ManifoldType.e_circles,C$t.localPoint.Copy(C$e.m_p),C$t.localNormal.SetZero(),C$t.pointCount=1,C$t.points[0].localPoint.Copy(C$n.m_p),C$t.points[0].id.key=0)}var C$We=new C$j,C$He=new C$j,C$je=new C$j;function C$Xe(C$t,C$e,C$i,C$n,C$r){C$t.pointCount=0;for(var C$r=C$R.MulXV(C$r,C$n.m_p,C$We),C$s=C$R.MulTXV(C$i,C$r,C$He),C$h=0,C$u=-C$P,C$o=C$e.m_radius+C$n.m_radius,C$_=C$e.m_count,C$d=C$e.m_vertices,C$a=C$e.m_normals,C$c=0;C$c<C$_;++C$c){var C$f=C$j.DotVV(C$a[C$c],C$j.SubVV(C$s,C$d[C$c],C$j.s_t0));if(C$o<C$f)return;C$u<C$f&&(C$u=C$f,C$h=C$c)}C$i=C$h,C$r=C$d[C$i],C$e=C$d[(C$i+1)%C$_];if(C$u<C$M)return C$t.pointCount=1,C$t.type=C$H.b2ManifoldType.e_faceA,C$t.localNormal.Copy(C$a[C$h]),C$j.MidVV(C$r,C$e,C$t.localPoint),C$t.points[0].localPoint.Copy(C$n.m_p),void(C$t.points[0].id.key=0);var C$l=C$j.DotVV(C$j.SubVV(C$s,C$r,C$j.s_t0),C$j.SubVV(C$e,C$r,C$j.s_t1)),C$p=C$j.DotVV(C$j.SubVV(C$s,C$e,C$j.s_t0),C$j.SubVV(C$r,C$e,C$j.s_t1));C$l<=0?C$j.DistanceSquaredVV(C$s,C$r)>C$o*C$o||(C$t.pointCount=1,C$t.type=C$H.b2ManifoldType.e_faceA,C$j.SubVV(C$s,C$r,C$t.localNormal).SelfNormalize(),C$t.localPoint.Copy(C$r),C$t.points[0].localPoint.Copy(C$n.m_p),C$t.points[0].id.key=0):C$p<=0?C$j.DistanceSquaredVV(C$s,C$e)>C$o*C$o||(C$t.pointCount=1,C$t.type=C$H.b2ManifoldType.e_faceA,C$j.SubVV(C$s,C$e,C$t.localNormal).SelfNormalize(),C$t.localPoint.Copy(C$e),C$t.points[0].localPoint.Copy(C$n.m_p),C$t.points[0].id.key=0):(C$l=C$j.MidVV(C$r,C$e,C$je),C$o<C$j.DotVV(C$j.SubVV(C$s,C$l,C$j.s_t1),C$a[C$i])||(C$t.pointCount=1,C$t.type=C$H.b2ManifoldType.e_faceA,C$t.localNormal.Copy(C$a[C$i]).SelfNormalize(),C$t.localPoint.Copy(C$l),C$t.points[0].localPoint.Copy(C$n.m_p),C$t.points[0].id.key=0))}var C$Ye=new C$j,C$qe=new C$j,C$Je=new C$j,C$Ze=new C$j;function C$Ke(C$t,C$e,C$i,C$n,C$r){for(var C$h=C$t.m_vertices,C$t=C$t.m_normals,C$u=C$n.m_count,C$s=C$n.m_vertices,C$n=C$B.MulRV(C$e.q,C$t[C$i],C$Ye),C$_=C$B.MulTRV(C$r.q,C$n,C$qe),C$o=0,C$a=C$P,C$c=0;C$c<C$u;++C$c){var C$l=C$j.DotVV(C$s[C$c],C$_);C$l<C$a&&(C$a=C$l,C$o=C$c)}C$t=C$R.MulXV(C$e,C$h[C$i],C$Je),C$e=C$R.MulXV(C$r,C$s[C$o],C$Ze);return C$j.DotVV(C$j.SubVV(C$e,C$t,C$j.s_t0),C$n)}var C$Qe=new C$j,C$$e=new C$j;function C$ti(C$h,C$t,C$e,C$i,C$n){for(var C$r=C$t.m_count,C$u=C$t.m_normals,C$_=C$j.SubVV(C$R.MulXV(C$n,C$i.m_centroid,C$j.s_t0),C$R.MulXV(C$e,C$t.m_centroid,C$j.s_t1),C$Qe),C$d=C$B.MulTRV(C$e.q,C$_,C$$e),C$s=0,C$f=-C$P,C$o=0;C$o<C$r;++C$o){var C$p=C$j.DotVV(C$u[C$o],C$d);C$f<C$p&&(C$f=C$p,C$s=C$o)}var C$a=C$Ke(C$t,C$e,C$s,C$i,C$n),C$_=(C$s+C$r-1)%C$r,C$m=C$Ke(C$t,C$e,C$_,C$i,C$n),C$y=(C$s+1)%C$r,C$g=C$Ke(C$t,C$e,C$y,C$i,C$n),C$c=0,C$l=0,C$v=0;if(C$a<C$m&&C$g<C$m)C$v=-1,C$c=C$_,C$l=C$m;else{if(!(C$a<C$g))return C$h[0]=C$s,C$a;C$v=1,C$c=C$y,C$l=C$g}for(;;){if(!(C$l<(C$a=C$Ke(C$t,C$e,C$s=-1===C$v?(C$c+C$r-1)%C$r:(C$c+1)%C$r,C$i,C$n))))break;C$c=C$s,C$l=C$a}return C$h[0]=C$c,C$l}var C$ei=new C$j;var C$ii=C$Zt.MakeArray(2),C$ni=C$Zt.MakeArray(2),C$ri=C$Zt.MakeArray(2),C$si=[0],C$oi=[0],C$ai=new C$j,C$ci=new C$j,C$li=new C$j,C$hi=new C$j,C$ui=new C$j,C$_i=new C$j,C$di=new C$j,C$fi=new C$j;function C$pi(C$t,C$e,C$i,C$n,C$r){C$t.pointCount=0;var C$h=C$e.m_radius+C$n.m_radius,C$u=C$si,C$_=(C$u[0]=0,C$ti(C$u,C$e,C$i,C$n,C$r));if(!(C$h<C$_)){var C$s=C$oi,C$o=(C$s[0]=0,C$ti(C$s,C$n,C$r,C$e,C$i));if(!(C$h<C$o)){for(var C$d,C$f,C$p=0,C$m=0,C$m=.98*C$_+.001<C$o?(C$d=C$n,C$a=C$e,C$w=C$r,C$f=C$i,C$p=C$s[0],C$t.type=C$H.b2ManifoldType.e_faceB,1):(C$d=C$e,C$a=C$n,C$w=C$i,C$f=C$r,C$p=C$u[0],C$t.type=C$H.b2ManifoldType.e_faceA,0),C$_=C$ii,C$o=C$_,C$s=C$w,C$e=C$p,C$n=C$a,C$i=C$f,C$r=(C$r=C$d).m_normals,C$y=C$n.m_count,C$u=C$n.m_vertices,C$g=C$n.m_normals,C$v=C$B.MulTRV(C$i.q,C$B.MulRV(C$s.q,C$r[C$e],C$j.s_t0),C$ei),C$x=0,C$b=C$P,C$A=0;C$A<C$y;++C$A){var C$C=C$j.DotVV(C$v,C$g[C$A]);C$C<C$b&&(C$b=C$C,C$x=C$A)}C$s=((C$n=C$x)+1)%C$y,C$r=C$o[0],C$R.MulXV(C$i,C$u[C$n],C$r.v),(C$r=C$r.id.cf).indexA=C$e,C$r.indexB=C$n,C$r.typeA=C$H.b2ContactFeatureType.e_face,C$r.typeB=C$H.b2ContactFeatureType.e_vertex,C$n=C$o[1],C$R.MulXV(C$i,C$u[C$s],C$n.v),(C$r=C$n.id.cf).indexA=C$e,C$r.indexB=C$s,C$r.typeA=C$H.b2ContactFeatureType.e_face,C$r.typeB=C$H.b2ContactFeatureType.e_vertex;var C$a=C$d.m_count,C$o=C$d.m_vertices,C$i=C$p,C$u=(C$p+1)%C$a,C$n=C$o[C$i],C$e=C$o[C$u],C$s=C$j.SubVV(C$e,C$n,C$ai),C$r=(C$s.Normalize(),C$j.CrossVOne(C$s,C$ci)),C$p=C$j.MidVV(C$n,C$e,C$li),C$a=C$B.MulRV(C$w.q,C$s,C$ui),C$S=C$j.CrossVOne(C$a,C$hi),C$o=C$R.MulXV(C$w,C$n,C$di),C$s=C$R.MulXV(C$w,C$e,C$fi),C$T=C$j.DotVV(C$S,C$o),C$n=-C$j.DotVV(C$a,C$o)+C$h,C$w=C$j.DotVV(C$a,C$s)+C$h,C$e=C$ni,C$E=C$ri,C$o=C$se(C$e,C$_,C$j.NegV(C$a,C$_i),C$n,C$i);if(!(C$o<2||C$se(C$E,C$e,C$a,C$w,C$u)<2)){C$t.localNormal.Copy(C$r),C$t.localPoint.Copy(C$p);for(var C$M=0,C$I=0;C$I<2;++C$I){var C$c,C$l=C$E[C$I];C$j.DotVV(C$S,C$l.v)-C$T<=C$h&&(C$c=C$t.points[C$M],C$R.MulTXV(C$f,C$l.v,C$c.localPoint),C$c.id.Copy(C$l.id),C$m&&(C$l=C$c.id.cf,C$c.id.cf.indexA=C$l.indexB,C$c.id.cf.indexB=C$l.indexA,C$c.id.cf.typeA=C$l.typeB,C$c.id.cf.typeB=C$l.typeA),++C$M)}C$t.pointCount=C$M}}}}var C$mi=new C$j,C$yi=new C$j,C$gi=new C$j,C$vi=new C$j,C$xi=new C$j,C$bi=new C$j,C$Ai=new C$j,C$Ci=new C$Ut;function C$Si(C$t,C$e,C$i,C$h,C$n){C$t.pointCount=0;var C$i=C$R.MulTXV(C$i,C$R.MulXV(C$n,C$h.m_p,C$j.s_t0),C$mi),C$n=C$e.m_vertex1,C$r=C$e.m_vertex2,C$s=C$j.SubVV(C$r,C$n,C$yi),C$u=C$j.DotVV(C$s,C$j.SubVV(C$r,C$i,C$j.s_t0)),C$_=C$j.DotVV(C$s,C$j.SubVV(C$i,C$n,C$j.s_t0)),C$d=C$e.m_radius+C$h.m_radius,C$o=C$Ci;if(C$o.cf.indexB=0,C$o.cf.typeB=C$H.b2ContactFeatureType.e_vertex,C$_<=0){var C$a=C$n,C$c=C$j.SubVV(C$i,C$a,C$gi);if(C$d*C$d<C$j.DotVV(C$c,C$c))return;if(C$e.m_hasVertex0){var C$c=C$e.m_vertex0,C$l=C$n,C$c=C$j.SubVV(C$l,C$c,C$vi);if(0<C$j.DotVV(C$c,C$j.SubVV(C$l,C$i,C$j.s_t0)))return}return C$o.cf.indexA=0,C$o.cf.typeA=C$H.b2ContactFeatureType.e_vertex,C$t.pointCount=1,C$t.type=C$H.b2ManifoldType.e_circles,C$t.localNormal.SetZero(),C$t.localPoint.Copy(C$a),C$t.points[0].id.Copy(C$o),void C$t.points[0].localPoint.Copy(C$h.m_p)}if(C$u<=0){C$c=C$r,C$l=C$j.SubVV(C$i,C$c,C$gi);if(C$d*C$d<C$j.DotVV(C$l,C$l))return;if(C$e.m_hasVertex3){C$a=C$e.m_vertex3,C$l=C$r,C$e=C$j.SubVV(C$a,C$l,C$xi);if(0<C$j.DotVV(C$e,C$j.SubVV(C$i,C$l,C$j.s_t0)))return}return C$o.cf.indexA=1,C$o.cf.typeA=C$H.b2ContactFeatureType.e_vertex,C$t.pointCount=1,C$t.type=C$H.b2ManifoldType.e_circles,C$t.localNormal.SetZero(),C$t.localPoint.Copy(C$c),C$t.points[0].id.Copy(C$o),void C$t.points[0].localPoint.Copy(C$h.m_p)}C$a=C$j.DotVV(C$s,C$s),C$e=C$bi,C$e.x=1/C$a*(C$u*C$n.x+C$_*C$r.x),C$e.y=1/C$a*(C$u*C$n.y+C$_*C$r.y),C$l=C$j.SubVV(C$i,C$e,C$gi);C$d*C$d<C$j.DotVV(C$l,C$l)||(C$c=C$Ai.Set(-C$s.y,C$s.x),C$j.DotVV(C$c,C$j.SubVV(C$i,C$n,C$j.s_t0))<0&&C$c.Set(-C$c.x,-C$c.y),C$c.Normalize(),C$o.cf.indexA=0,C$o.cf.typeA=C$H.b2ContactFeatureType.e_face,C$t.pointCount=1,C$t.type=C$H.b2ManifoldType.e_faceA,C$t.localNormal.Copy(C$c),C$t.localPoint.Copy(C$n),C$t.points[0].id.Copy(C$o),C$t.points[0].localPoint.Copy(C$h.m_p))}var C$Ti=function(){this.type=0,this.index=0,this.separation=0},C$wi=function(){this.vertices=C$j.MakeArray(8),this.normals=C$j.MakeArray(8),this.count=0},C$Ei=function(){this.i1=0,this.i2=0,this.v1=new C$j,this.v2=new C$j,this.normal=new C$j,this.sideNormal1=new C$j,this.sideOffset1=0,this.sideNormal2=new C$j,this.sideOffset2=0};function C$Mi(){this.m_polygonB=new C$wi,this.m_xf=new C$R,this.m_centroidB=new C$j,this.m_v0=new C$j,this.m_v1=new C$j,this.m_v2=new C$j,this.m_v3=new C$j,this.m_normal0=new C$j,this.m_normal1=new C$j,this.m_normal2=new C$j,this.m_normal=new C$j,this.m_type1=0,this.m_type2=0,this.m_lowerLimit=new C$j,this.m_upperLimit=new C$j,this.m_radius=0,this.m_front=!1}C$Mi.prototype.Collide=function(C$t,C$h,C$e,C$u,C$_){C$R.MulTXX(C$e,C$_,this.m_xf),C$R.MulXV(this.m_xf,C$u.m_centroid,this.m_centroidB),this.m_v0.Copy(C$h.m_vertex0),this.m_v1.Copy(C$h.m_vertex1),this.m_v2.Copy(C$h.m_vertex2),this.m_v3.Copy(C$h.m_vertex3);var C$e=C$h.m_hasVertex0,C$_=C$h.m_hasVertex3,C$i=C$j.SubVV(this.m_v2,this.m_v1,C$Mi.s_edge1),C$n=(C$i.Normalize(),this.m_normal1.Set(C$i.y,-C$i.x),C$j.DotVV(this.m_normal1,C$j.SubVV(this.m_centroidB,this.m_v1,C$j.s_t0))),C$r=0,C$d=0,C$f=!1,C$p=!1;C$e&&((C$o=C$j.SubVV(this.m_v1,this.m_v0,C$Mi.s_edge0)).Normalize(),this.m_normal0.Set(C$o.y,-C$o.x),C$f=0<=C$j.CrossVV(C$o,C$i),C$r=C$j.DotVV(this.m_normal0,C$j.SubVV(this.m_centroidB,this.m_v0,C$j.s_t0))),C$_&&((C$o=C$j.SubVV(this.m_v3,this.m_v2,C$Mi.s_edge2)).Normalize(),this.m_normal2.Set(C$o.y,-C$o.x),C$p=0<C$j.CrossVV(C$i,C$o),C$d=C$j.DotVV(this.m_normal2,C$j.SubVV(this.m_centroidB,this.m_v2,C$j.s_t0))),C$e&&C$_?C$f&&C$p?(this.m_front=0<=C$r||0<=C$n||0<=C$d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):C$f?(this.m_front=0<=C$r||0<=C$n&&0<=C$d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):C$p?(this.m_front=0<=C$d||0<=C$r&&0<=C$n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=0<=C$r&&0<=C$n&&0<=C$d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):C$e?C$f?(this.m_front=0<=C$r||0<=C$n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_front=0<=C$r&&0<=C$n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):C$_?C$p?(this.m_front=0<=C$n||0<=C$d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=0<=C$n&&0<=C$d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=C$n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=C$u.m_count;for(var C$s=0;C$s<C$u.m_count;++C$s)C$R.MulXV(this.m_xf,C$u.m_vertices[C$s],this.m_polygonB.vertices[C$s]),C$B.MulRV(this.m_xf.q,C$u.m_normals[C$s],this.m_polygonB.normals[C$s]);this.m_radius=C$u.m_radius+C$h.m_radius,C$t.pointCount=0;C$i=this.ComputeEdgeSeparation(C$Mi.s_edgeAxis);if(0!==C$i.type&&!(C$i.separation>this.m_radius)){var C$o=this.ComputePolygonSeparation(C$Mi.s_polygonAxis);if(!(0!==C$o.type&&C$o.separation>this.m_radius)){var C$m=0!==C$o.type&&C$o.separation>.98*C$i.separation+.001?C$o:C$i,C$e=C$Mi.s_ie,C$a=C$Mi.s_rf;if(1===C$m.type){C$t.type=C$H.b2ManifoldType.e_faceA;for(var C$y=0,C$g=C$j.DotVV(this.m_normal,this.m_polygonB.normals[0]),C$s=1;C$s<this.m_polygonB.count;++C$s){var C$v=C$j.DotVV(this.m_normal,this.m_polygonB.normals[C$s]);C$v<C$g&&(C$g=C$v,C$y=C$s)}var C$c,C$l,C$f=C$y,C$r=(C$f+1)%this.m_polygonB.count;(C$c=C$e[0]).v.Copy(this.m_polygonB.vertices[C$f]),C$c.id.cf.indexA=0,C$c.id.cf.indexB=C$f,C$c.id.cf.typeA=C$H.b2ContactFeatureType.e_face,C$c.id.cf.typeB=C$H.b2ContactFeatureType.e_vertex,(C$l=C$e[1]).v.Copy(this.m_polygonB.vertices[C$r]),C$l.id.cf.indexA=0,C$l.id.cf.indexB=C$r,C$l.id.cf.typeA=C$H.b2ContactFeatureType.e_face,C$l.id.cf.typeB=C$H.b2ContactFeatureType.e_vertex,this.m_front?(C$a.i1=0,C$a.i2=1,C$a.v1.Copy(this.m_v1),C$a.v2.Copy(this.m_v2),C$a.normal.Copy(this.m_normal1)):(C$a.i1=1,C$a.i2=0,C$a.v1.Copy(this.m_v2),C$a.v2.Copy(this.m_v1),C$a.normal.Copy(this.m_normal1).SelfNeg())}else C$t.type=C$H.b2ManifoldType.e_faceB,(C$c=C$e[0]).v.Copy(this.m_v1),C$c.id.cf.indexA=0,C$c.id.cf.indexB=C$m.index,C$c.id.cf.typeA=C$H.b2ContactFeatureType.e_vertex,C$c.id.cf.typeB=C$H.b2ContactFeatureType.e_face,(C$l=C$e[1]).v.Copy(this.m_v2),C$l.id.cf.indexA=0,C$l.id.cf.indexB=C$m.index,C$l.id.cf.typeA=C$H.b2ContactFeatureType.e_vertex,C$l.id.cf.typeB=C$H.b2ContactFeatureType.e_face,C$a.i1=C$m.index,C$a.i2=(C$a.i1+1)%this.m_polygonB.count,C$a.v1.Copy(this.m_polygonB.vertices[C$a.i1]),C$a.v2.Copy(this.m_polygonB.vertices[C$a.i2]),C$a.normal.Copy(this.m_polygonB.normals[C$a.i1]);C$a.sideNormal1.Set(C$a.normal.y,-C$a.normal.x),C$a.sideNormal2.Copy(C$a.sideNormal1).SelfNeg(),C$a.sideOffset1=C$j.DotVV(C$a.sideNormal1,C$a.v1),C$a.sideOffset2=C$j.DotVV(C$a.sideNormal2,C$a.v2);var C$_=C$Mi.s_clipPoints1,C$x=C$Mi.s_clipPoints2,C$p=C$se(C$_,C$e,C$a.sideNormal1,C$a.sideOffset1,C$a.i1);if(!(C$p<2||C$se(C$x,C$_,C$a.sideNormal2,C$a.sideOffset2,C$a.i2)<2)){1===C$m.type?(C$t.localNormal.Copy(C$a.normal),C$t.localPoint.Copy(C$a.v1)):(C$t.localNormal.Copy(C$u.m_normals[C$a.i1]),C$t.localPoint.Copy(C$u.m_vertices[C$a.i1]));for(var C$b=0,C$s=0;C$s<2;++C$s){var C$A;C$j.DotVV(C$a.normal,C$j.SubVV(C$x[C$s].v,C$a.v1,C$j.s_t0))<=this.m_radius&&(C$A=C$t.points[C$b],1===C$m.type?(C$R.MulTXV(this.m_xf,C$x[C$s].v,C$A.localPoint),C$A.id=C$x[C$s].id):(C$A.localPoint.Copy(C$x[C$s].v),C$A.id.cf.typeA=C$x[C$s].id.cf.typeB,C$A.id.cf.typeB=C$x[C$s].id.cf.typeA,C$A.id.cf.indexA=C$x[C$s].id.cf.indexB,C$A.id.cf.indexB=C$x[C$s].id.cf.indexA),++C$b)}C$t.pointCount=C$b}}}},C$Mi.prototype.ComputeEdgeSeparation=function(C$t){var C$e=C$t;C$e.type=1,C$e.index=this.m_front?0:1,C$e.separation=C$P;for(var C$i=0;C$i<this.m_polygonB.count;++C$i){var C$n=C$j.DotVV(this.m_normal,C$j.SubVV(this.m_polygonB.vertices[C$i],this.m_v1,C$j.s_t0));C$n<C$e.separation&&(C$e.separation=C$n)}return C$e},C$Mi.prototype.ComputePolygonSeparation=function(C$t){for(var C$e=C$t,C$i=(C$e.type=0,C$e.index=-1,C$e.separation=-C$P,C$Mi.s_perp.Set(-this.m_normal.y,this.m_normal.x)),C$n=0;C$n<this.m_polygonB.count;++C$n){var C$r=C$j.NegV(this.m_polygonB.normals[C$n],C$Mi.s_n),C$s=C$j.DotVV(C$r,C$j.SubVV(this.m_polygonB.vertices[C$n],this.m_v1,C$j.s_t0)),C$o=C$j.DotVV(C$r,C$j.SubVV(this.m_polygonB.vertices[C$n],this.m_v2,C$j.s_t0)),C$s=C$L(C$s,C$o);if(C$s>this.m_radius)return C$e.type=2,C$e.index=C$n,C$e.separation=C$s,C$e;if(0<=C$j.DotVV(C$r,C$i)){if(C$j.DotVV(C$j.SubVV(C$r,this.m_upperLimit,C$j.s_t0),this.m_normal)<-C$I)continue}else if(C$j.DotVV(C$j.SubVV(C$r,this.m_lowerLimit,C$j.s_t0),this.m_normal)<-C$I)continue;C$s>C$e.separation&&(C$e.type=2,C$e.index=C$n,C$e.separation=C$s)}return C$e},C$Mi.s_edge1=new C$j,C$Mi.s_edge0=new C$j,C$Mi.s_edge2=new C$j,C$Mi.s_ie=C$Zt.MakeArray(2),C$Mi.s_rf=new C$Ei,C$Mi.s_clipPoints1=C$Zt.MakeArray(2),C$Mi.s_clipPoints2=C$Zt.MakeArray(2),C$Mi.s_edgeAxis=new C$Ti,C$Mi.s_polygonAxis=new C$Ti,C$Mi.s_n=new C$j,C$Mi.s_perp=new C$j;var C$Ii=new C$Mi;function C$Bi(C$t,C$e,C$i,C$n,C$r){C$Ii.Collide(C$t,C$e,C$i,C$n,C$r)}var C$Ri=function(){this.mass=0,this.center=new C$j(0,0),this.I=0},C$Pi=((C$Ei=C$H.b2ShapeType||(C$H.b2ShapeType={}))[C$Ei.e_unknown=-1]="e_unknown",C$Ei[C$Ei.e_circleShape=0]="e_circleShape",C$Ei[C$Ei.e_edgeShape=1]="e_edgeShape",C$Ei[C$Ei.e_polygonShape=2]="e_polygonShape",C$Ei[C$Ei.e_chainShape=3]="e_chainShape",C$Ei[C$Ei.e_shapeTypeCount=4]="e_shapeTypeCount",C$Di.prototype.Copy=function(C$t){return this.m_radius=C$t.m_radius,this},C$Di.prototype.GetType=function(){return this.m_type},C$Di);function C$Di(C$t,C$e){this.m_type=C$H.b2ShapeType.e_unknown,this.m_radius=0,this.m_type=C$t,this.m_radius=C$e}var C$Li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$t,C$e){C$t.__proto__=C$e}||function(C$t,C$e){for(var C$i in C$e)C$e.hasOwnProperty(C$i)&&(C$t[C$i]=C$e[C$i])};function C$Vi(C$t,C$e){function C$i(){this.constructor=C$t}C$Li(C$t,C$e),C$t.prototype=null===C$e?Object.create(C$e):(C$i.prototype=C$e.prototype,new C$i)}C$Vi(C$Fi,C$Oi=C$Pi),C$Fi.prototype.Set=function(C$t,C$e){return void 0===C$e&&(C$e=this.m_radius),this.m_p.Copy(C$t),this.m_radius=C$e,this},C$Fi.prototype.Clone=function(){return(new C$Fi).Copy(this)},C$Fi.prototype.Copy=function(C$t){return C$Oi.prototype.Copy.call(this,C$t),this.m_p.Copy(C$t.m_p),this},C$Fi.prototype.GetChildCount=function(){return 1},C$Fi.prototype.TestPoint=function(C$t,C$e){C$t=C$R.MulXV(C$t,this.m_p,C$Fi.TestPoint_s_center),C$e=C$j.SubVV(C$e,C$t,C$Fi.TestPoint_s_d);return C$j.DotVV(C$e,C$e)<=C$_(this.m_radius)},C$Fi.prototype.ComputeDistance=function(C$t,C$e,C$i,C$n){C$t=C$R.MulXV(C$t,this.m_p,C$Fi.ComputeDistance_s_center);return C$j.SubVV(C$e,C$t,C$i),C$i.Normalize()-this.m_radius},C$Fi.prototype.RayCast=function(C$t,C$e,C$i,C$n){var C$i=C$R.MulXV(C$i,this.m_p,C$Fi.RayCast_s_position),C$i=C$j.SubVV(C$e.p1,C$i,C$Fi.RayCast_s_s),C$r=C$j.DotVV(C$i,C$i)-C$_(this.m_radius),C$s=C$j.SubVV(C$e.p2,C$e.p1,C$Fi.RayCast_s_r),C$o=C$j.DotVV(C$i,C$s),C$a=C$j.DotVV(C$s,C$s),C$r=C$o*C$o-C$a*C$r;if(C$r<0||C$a<C$M)return!1;C$o=-(C$o+C$Y(C$r));return 0<=C$o&&C$o<=C$e.maxFraction*C$a&&(C$t.fraction=C$o/=C$a,C$j.AddVMulSV(C$i,C$o,C$s,C$t.normal).SelfNormalize(),!0)},C$Fi.prototype.ComputeAABB=function(C$t,C$e,C$i){C$e=C$R.MulXV(C$e,this.m_p,C$Fi.ComputeAABB_s_p);C$t.lowerBound.Set(C$e.x-this.m_radius,C$e.y-this.m_radius),C$t.upperBound.Set(C$e.x+this.m_radius,C$e.y+this.m_radius)},C$Fi.prototype.ComputeMass=function(C$t,C$e){var C$i=C$_(this.m_radius);C$t.mass=C$e*C$m*C$i,C$t.center.Copy(this.m_p),C$t.I=C$t.mass*(.5*C$i+C$j.DotVV(this.m_p,this.m_p))},C$Fi.prototype.SetupDistanceProxy=function(C$t,C$e){C$t.m_vertices=C$t.m_buffer,C$t.m_vertices[0].Copy(this.m_p),C$t.m_count=1,C$t.m_radius=this.m_radius},C$Fi.prototype.ComputeSubmergedArea=function(C$t,C$e,C$i,C$n){C$i=C$R.MulXV(C$i,this.m_p,new C$j),C$e=-(C$j.DotVV(C$t,C$i)-C$e);if(C$e<-this.m_radius+C$M)return 0;if(C$e>this.m_radius)return C$n.Copy(C$i),C$m*this.m_radius*this.m_radius;var C$r=this.m_radius*this.m_radius,C$s=C$e*C$e,C$e=C$r*(C$x(C$e/this.m_radius)+C$m/2)+C$e*C$Y(C$r-C$s),C$r=-2/3*C$u(C$r-C$s,1.5)/C$e;return C$n.x=C$i.x+C$t.x*C$r,C$n.y=C$i.y+C$t.y*C$r,C$e},C$Fi.prototype.Dump=function(C$t){C$t("    const shape: b2CircleShape = new b2CircleShape();\n"),C$t("    shape.m_radius = %.15f;\n",this.m_radius),C$t("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)},C$Fi.TestPoint_s_center=new C$j,C$Fi.TestPoint_s_d=new C$j,C$Fi.ComputeDistance_s_center=new C$j,C$Fi.RayCast_s_position=new C$j,C$Fi.RayCast_s_s=new C$j,C$Fi.RayCast_s_r=new C$j,C$Fi.ComputeAABB_s_p=new C$j;var C$Oi,C$Ti=C$Fi;function C$Fi(C$t){C$t=C$Oi.call(this,C$H.b2ShapeType.e_circleShape,C$t=void 0===C$t?0:C$t)||this;return C$t.m_p=new C$j,C$t}C$Vi(C$S,C$Ni=C$Pi),C$S.prototype.Clone=function(){return(new C$S).Copy(this)},C$S.prototype.Copy=function(C$t){C$Ni.prototype.Copy.call(this,C$t),this.m_centroid.Copy(C$t.m_centroid),this.m_count=C$t.m_count,this.m_vertices=C$j.MakeArray(this.m_count),this.m_normals=C$j.MakeArray(this.m_count);for(var C$e=0;C$e<this.m_count;++C$e)this.m_vertices[C$e].Copy(C$t.m_vertices[C$e]),this.m_normals[C$e].Copy(C$t.m_normals[C$e]);return this},C$S.prototype.GetChildCount=function(){return 1},C$S.prototype.Set=function(C$h,C$t,C$u){if(void 0===C$u&&(C$u=0),(C$t=void 0===C$t?C$h.length:C$t)<3)return this.SetAsBox(1,1);for(var C$e=C$L(C$t,8),C$i=C$S.Set_s_ps,C$_=0,C$n=0;C$n<C$e;++C$n){for(var C$r=C$h[C$u+C$n],C$d=!0,C$s=0;C$s<C$_;++C$s)if(C$j.DistanceSquaredVV(C$r,C$i[C$s])<16e-6){C$d=!1;break}C$d&&C$i[C$_++].Copy(C$r)}if((C$e=C$_)<3)return this.SetAsBox(1,1);for(var C$o=0,C$f=C$i[0].x,C$n=1;C$n<C$e;++C$n){var C$p=C$i[C$n].x;(C$f<C$p||C$p===C$f&&C$i[C$n].y<C$i[C$o].y)&&(C$o=C$n,C$f=C$p)}for(var C$a=C$S.Set_s_hull,C$c=0,C$m=C$o;;){C$a[C$c]=C$m;for(var C$y,C$g,C$l=0,C$s=1;C$s<C$e;++C$s)C$l!==C$m?(C$y=C$j.SubVV(C$i[C$l],C$i[C$a[C$c]],C$S.Set_s_r),C$r=C$j.SubVV(C$i[C$s],C$i[C$a[C$c]],C$S.Set_s_v),(C$g=C$j.CrossVV(C$y,C$r))<0&&(C$l=C$s),0===C$g&&C$r.LengthSquared()>C$y.LengthSquared()&&(C$l=C$s)):C$l=C$s;if(++C$c,(C$m=C$l)===C$o)break}this.m_count=C$c,this.m_vertices=C$j.MakeArray(this.m_count),this.m_normals=C$j.MakeArray(this.m_count);for(C$n=0;C$n<C$c;++C$n)this.m_vertices[C$n].Copy(C$i[C$a[C$n]]);for(C$n=0;C$n<C$c;++C$n){var C$v=this.m_vertices[C$n],C$x=this.m_vertices[(C$n+1)%C$c],C$x=C$j.SubVV(C$x,C$v,C$j.s_t0);C$j.CrossVOne(C$x,this.m_normals[C$n]).SelfNormalize()}return C$S.ComputeCentroid(this.m_vertices,C$c,this.m_centroid),this},C$S.prototype.SetAsArray=function(C$t,C$e){return void 0===C$e&&(C$e=C$t.length),this.Set(C$t,C$e)},C$S.prototype.SetAsBox=function(C$t,C$e,C$i,C$n){if(void 0===C$n&&(C$n=0),this.m_count=4,this.m_vertices=C$j.MakeArray(this.m_count),this.m_normals=C$j.MakeArray(this.m_count),this.m_vertices[0].Set(-C$t,-C$e),this.m_vertices[1].Set(C$t,-C$e),this.m_vertices[2].Set(C$t,C$e),this.m_vertices[3].Set(-C$t,C$e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),C$i){this.m_centroid.Copy(C$i);var C$r=new C$R;C$r.SetPosition(C$i),C$r.SetRotationAngle(C$n);for(var C$s=0;C$s<this.m_count;++C$s)C$R.MulXV(C$r,this.m_vertices[C$s],this.m_vertices[C$s]),C$B.MulRV(C$r.q,this.m_normals[C$s],this.m_normals[C$s])}return this},C$S.prototype.TestPoint=function(C$t,C$e){for(var C$i=C$R.MulTXV(C$t,C$e,C$S.TestPoint_s_pLocal),C$n=0;C$n<this.m_count;++C$n)if(0<C$j.DotVV(this.m_normals[C$n],C$j.SubVV(C$i,this.m_vertices[C$n],C$j.s_t0)))return!1;return!0},C$S.prototype.ComputeDistance=function(C$t,C$h,C$e,C$u){for(var C$i=C$R.MulTXV(C$t,C$h,C$S.ComputeDistance_s_pLocal),C$n=-C$P,C$r=C$S.ComputeDistance_s_normalForMaxDistance.Copy(C$i),C$s=0;C$s<this.m_count;++C$s){var C$o=C$j.DotVV(this.m_normals[C$s],C$j.SubVV(C$i,this.m_vertices[C$s],C$j.s_t0));C$n<C$o&&(C$n=C$o,C$r.Copy(this.m_normals[C$s]))}if(0<C$n){for(var C$a=C$S.ComputeDistance_s_minDistance.Copy(C$r),C$c=C$n*C$n,C$s=0;C$s<this.m_count;++C$s){var C$l=C$j.SubVV(C$i,this.m_vertices[C$s],C$S.ComputeDistance_s_distance),C$_=C$l.LengthSquared();C$_<C$c&&(C$a.Copy(C$l),C$c=C$_)}return C$B.MulRV(C$t.q,C$a,C$e),C$e.Normalize(),Math.sqrt(C$c)}return C$B.MulRV(C$t.q,C$r,C$e),C$n},C$S.prototype.RayCast=function(C$t,C$e,C$i,C$h){for(var C$n=C$R.MulTXV(C$i,C$e.p1,C$S.RayCast_s_p1),C$u=C$R.MulTXV(C$i,C$e.p2,C$S.RayCast_s_p2),C$_=C$j.SubVV(C$u,C$n,C$S.RayCast_s_d),C$r=0,C$s=C$e.maxFraction,C$o=-1,C$a=0;C$a<this.m_count;++C$a){var C$c=C$j.DotVV(this.m_normals[C$a],C$j.SubVV(this.m_vertices[C$a],C$n,C$j.s_t0)),C$l=C$j.DotVV(this.m_normals[C$a],C$_);if(0===C$l){if(C$c<0)return!1}else C$l<0&&C$c<C$r*C$l?(C$r=C$c/C$l,C$o=C$a):0<C$l&&C$c<C$s*C$l&&(C$s=C$c/C$l);if(C$s<C$r)return!1}return 0<=C$o&&(C$t.fraction=C$r,C$B.MulRV(C$i.q,this.m_normals[C$o],C$t.normal),!0)},C$S.prototype.ComputeAABB=function(C$t,C$e,C$i){for(var C$n=C$R.MulXV(C$e,this.m_vertices[0],C$t.lowerBound),C$r=C$t.upperBound.Copy(C$n),C$s=0;C$s<this.m_count;++C$s){var C$o=C$R.MulXV(C$e,this.m_vertices[C$s],C$S.ComputeAABB_s_v);C$j.MinV(C$o,C$n,C$n),C$j.MaxV(C$o,C$r,C$r)}C$t=this.m_radius;C$n.SelfSubXY(C$t,C$t),C$r.SelfAddXY(C$t,C$t)},C$S.prototype.ComputeMass=function(C$t,C$e){for(var C$i=C$S.ComputeMass_s_center.SetZero(),C$n=0,C$h=0,C$r=C$S.ComputeMass_s_s.SetZero(),C$s=0;C$s<this.m_count;++C$s)C$r.SelfAdd(this.m_vertices[C$s]);C$r.SelfMul(1/this.m_count);for(C$s=0;C$s<this.m_count;++C$s){var C$o=C$j.SubVV(this.m_vertices[C$s],C$r,C$S.ComputeMass_s_e1),C$a=C$j.SubVV(this.m_vertices[(C$s+1)%this.m_count],C$r,C$S.ComputeMass_s_e2),C$u=C$j.CrossVV(C$o,C$a),C$c=.5*C$u,C$c=(C$n+=C$c,C$i.SelfAdd(C$j.MulSV(1/3*C$c,C$j.AddVV(C$o,C$a,C$j.s_t0),C$j.s_t1)),C$o.x),C$o=C$o.y,C$l=C$a.x,C$a=C$a.y;C$h+=1/3*.25*C$u*(C$c*C$c+C$l*C$c+C$l*C$l+(C$o*C$o+C$a*C$o+C$a*C$a))}C$t.mass=C$e*C$n,C$i.SelfMul(1/C$n),C$j.AddVV(C$i,C$r,C$t.center),C$t.I=C$e*C$h,C$t.I+=C$t.mass*(C$j.DotVV(C$t.center,C$t.center)-C$j.DotVV(C$i,C$i))},C$S.prototype.Validate=function(){for(var C$t=0;C$t<this.m_count;++C$t)for(var C$e=C$t,C$i=(C$t+1)%this.m_count,C$n=this.m_vertices[C$e],C$r=C$j.SubVV(this.m_vertices[C$i],C$n,C$S.Validate_s_e),C$s=0;C$s<this.m_count;++C$s)if(C$s!==C$e&&C$s!==C$i){var C$o=C$j.SubVV(this.m_vertices[C$s],C$n,C$S.Validate_s_v);if(C$j.CrossVV(C$r,C$o)<0)return!1}return!0},C$S.prototype.SetupDistanceProxy=function(C$t,C$e){C$t.m_vertices=this.m_vertices,C$t.m_count=this.m_count,C$t.m_radius=this.m_radius},C$S.prototype.ComputeSubmergedArea=function(C$t,C$e,C$h,C$u){for(var C$_,C$d=C$B.MulTRV(C$h.q,C$t,C$S.ComputeSubmergedArea_s_normalL),C$f=C$e-C$j.DotVV(C$t,C$h.p),C$i=C$S.ComputeSubmergedArea_s_depths,C$p=0,C$n=-1,C$r=-1,C$m=!1,C$s=0;C$s<this.m_count;++C$s){C$i[C$s]=C$j.DotVV(C$d,this.m_vertices[C$s])-C$f;var C$y=C$i[C$s]<-C$M;0<C$s&&(C$y?C$m||(C$n=C$s-1,C$p++):C$m&&(C$r=C$s-1,C$p++)),C$m=C$y}switch(C$p){case 0:return C$m?(this.ComputeMass(C$_=C$S.ComputeSubmergedArea_s_md,1),C$R.MulXV(C$h,C$_.center,C$u),C$_.mass):0;case 1:-1===C$n?C$n=this.m_count-1:C$r=this.m_count-1}for(var C$e=(C$n+1)%this.m_count,C$o=(C$r+1)%this.m_count,C$t=(0-C$i[C$n])/(C$i[C$e]-C$i[C$n]),C$g=(0-C$i[C$r])/(C$i[C$o]-C$i[C$r]),C$a=C$S.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[C$n].x*(1-C$t)+this.m_vertices[C$e].x*C$t,this.m_vertices[C$n].y*(1-C$t)+this.m_vertices[C$e].y*C$t),C$v=C$S.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[C$r].x*(1-C$g)+this.m_vertices[C$o].x*C$g,this.m_vertices[C$r].y*(1-C$g)+this.m_vertices[C$o].y*C$g),C$x=0,C$b=C$S.ComputeSubmergedArea_s_center.SetZero(),C$c=this.m_vertices[C$e],C$A=C$e;C$A!==C$o;){var C$l=(C$A=(C$A+1)%this.m_count)===C$o?C$v:this.m_vertices[C$A],C$C=.5*((C$c.x-C$a.x)*(C$l.y-C$a.y)-(C$c.y-C$a.y)*(C$l.x-C$a.x));C$x+=C$C,C$b.x+=C$C*(C$a.x+C$c.x+C$l.x)/3,C$b.y+=C$C*(C$a.y+C$c.y+C$l.y)/3,C$c=C$l}return C$b.SelfMul(1/C$x),C$R.MulXV(C$h,C$b,C$u),C$x},C$S.prototype.Dump=function(C$t){C$t("    const shape: b2PolygonShape = new b2PolygonShape();\n"),C$t("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",8);for(var C$e=0;C$e<this.m_count;++C$e)C$t("    vs[%d].Set(%.15f, %.15f);\n",C$e,this.m_vertices[C$e].x,this.m_vertices[C$e].y);C$t("    shape.Set(vs, %d);\n",this.m_count)},C$S.ComputeCentroid=function(C$t,C$e,C$i){for(var C$n=C$i,C$r=(C$n.SetZero(),0),C$h=C$S.ComputeCentroid_s_pRef.SetZero(),C$s=0;C$s<C$e;++C$s){var C$o=C$h,C$a=C$t[C$s],C$c=C$t[(C$s+1)%C$e],C$l=C$j.SubVV(C$a,C$o,C$S.ComputeCentroid_s_e1),C$u=C$j.SubVV(C$c,C$o,C$S.ComputeCentroid_s_e2),C$l=.5*C$j.CrossVV(C$l,C$u);C$r+=C$l,C$n.x+=1/3*C$l*(C$o.x+C$a.x+C$c.x),C$n.y+=1/3*C$l*(C$o.y+C$a.y+C$c.y)}return C$n.SelfMul(1/C$r),C$n},C$S.Set_s_ps=C$j.MakeArray(8),C$S.Set_s_hull=C$h(8),C$S.Set_s_r=new C$j,C$S.Set_s_v=new C$j,C$S.TestPoint_s_pLocal=new C$j,C$S.ComputeDistance_s_pLocal=new C$j,C$S.ComputeDistance_s_normalForMaxDistance=new C$j,C$S.ComputeDistance_s_minDistance=new C$j,C$S.ComputeDistance_s_distance=new C$j,C$S.RayCast_s_p1=new C$j,C$S.RayCast_s_p2=new C$j,C$S.RayCast_s_d=new C$j,C$S.ComputeAABB_s_v=new C$j,C$S.ComputeMass_s_center=new C$j,C$S.ComputeMass_s_s=new C$j,C$S.ComputeMass_s_e1=new C$j,C$S.ComputeMass_s_e2=new C$j,C$S.Validate_s_e=new C$j,C$S.Validate_s_v=new C$j,C$S.ComputeSubmergedArea_s_normalL=new C$j,C$S.ComputeSubmergedArea_s_depths=C$h(8),C$S.ComputeSubmergedArea_s_md=new C$Ri,C$S.ComputeSubmergedArea_s_intoVec=new C$j,C$S.ComputeSubmergedArea_s_outoVec=new C$j,C$S.ComputeSubmergedArea_s_center=new C$j,C$S.ComputeCentroid_s_pRef=new C$j,C$S.ComputeCentroid_s_e1=new C$j,C$S.ComputeCentroid_s_e2=new C$j;var C$Ni,C$Ei=C$S;function C$S(){var C$t=C$Ni.call(this,C$H.b2ShapeType.e_polygonShape,.016)||this;return C$t.m_centroid=new C$j(0,0),C$t.m_vertices=[],C$t.m_normals=[],C$t.m_count=0,C$t}C$Vi(C$zi,C$ki=C$Pi),C$zi.prototype.Set=function(C$t,C$e){return this.m_vertex1.Copy(C$t),this.m_vertex2.Copy(C$e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},C$zi.prototype.Clone=function(){return(new C$zi).Copy(this)},C$zi.prototype.Copy=function(C$t){return C$ki.prototype.Copy.call(this,C$t),this.m_vertex1.Copy(C$t.m_vertex1),this.m_vertex2.Copy(C$t.m_vertex2),this.m_vertex0.Copy(C$t.m_vertex0),this.m_vertex3.Copy(C$t.m_vertex3),this.m_hasVertex0=C$t.m_hasVertex0,this.m_hasVertex3=C$t.m_hasVertex3,this},C$zi.prototype.GetChildCount=function(){return 1},C$zi.prototype.TestPoint=function(C$t,C$e){return!1},C$zi.prototype.ComputeDistance=function(C$t,C$e,C$i,C$n){var C$r,C$s=C$R.MulXV(C$t,this.m_vertex1,C$zi.ComputeDistance_s_v1),C$t=C$R.MulXV(C$t,this.m_vertex2,C$zi.ComputeDistance_s_v2),C$o=C$j.SubVV(C$e,C$s,C$zi.ComputeDistance_s_d),C$s=C$j.SubVV(C$t,C$s,C$zi.ComputeDistance_s_s),C$a=C$j.DotVV(C$o,C$s);return 0<C$a&&((C$r=C$j.DotVV(C$s,C$s))<C$a?C$j.SubVV(C$e,C$t,C$o):C$o.SelfMulSub(C$a/C$r,C$s)),C$i.Copy(C$o),C$i.Normalize()},C$zi.prototype.RayCast=function(C$t,C$e,C$i,C$l){var C$n=C$R.MulTXV(C$i,C$e.p1,C$zi.RayCast_s_p1),C$r=C$R.MulTXV(C$i,C$e.p2,C$zi.RayCast_s_p2),C$r=C$j.SubVV(C$r,C$n,C$zi.RayCast_s_d),C$s=this.m_vertex1,C$o=this.m_vertex2,C$a=C$j.SubVV(C$o,C$s,C$zi.RayCast_s_e),C$a=C$t.normal.Set(C$a.y,-C$a.x).SelfNormalize(),C$c=C$j.DotVV(C$a,C$j.SubVV(C$s,C$n,C$j.s_t0)),C$a=C$j.DotVV(C$a,C$r);if(0===C$a)return!1;C$a=C$c/C$a;if(C$a<0||C$e.maxFraction<C$a)return!1;C$e=C$j.AddVMulSV(C$n,C$a,C$r,C$zi.RayCast_s_q),C$n=C$j.SubVV(C$o,C$s,C$zi.RayCast_s_r),C$r=C$j.DotVV(C$n,C$n);if(0===C$r)return!1;C$o=C$j.DotVV(C$j.SubVV(C$e,C$s,C$j.s_t0),C$n)/C$r;return!(C$o<0||1<C$o)&&(C$t.fraction=C$a,C$B.MulRV(C$i.q,C$t.normal,C$t.normal),0<C$c&&C$t.normal.SelfNeg(),!0)},C$zi.prototype.ComputeAABB=function(C$t,C$e,C$i){var C$n=C$R.MulXV(C$e,this.m_vertex1,C$zi.ComputeAABB_s_v1),C$e=C$R.MulXV(C$e,this.m_vertex2,C$zi.ComputeAABB_s_v2),C$n=(C$j.MinV(C$n,C$e,C$t.lowerBound),C$j.MaxV(C$n,C$e,C$t.upperBound),this.m_radius);C$t.lowerBound.SelfSubXY(C$n,C$n),C$t.upperBound.SelfAddXY(C$n,C$n)},C$zi.prototype.ComputeMass=function(C$t,C$e){C$t.mass=0,C$j.MidVV(this.m_vertex1,this.m_vertex2,C$t.center),C$t.I=0},C$zi.prototype.SetupDistanceProxy=function(C$t,C$e){C$t.m_vertices=C$t.m_buffer,C$t.m_vertices[0].Copy(this.m_vertex1),C$t.m_vertices[1].Copy(this.m_vertex2),C$t.m_count=2,C$t.m_radius=this.m_radius},C$zi.prototype.ComputeSubmergedArea=function(C$t,C$e,C$i,C$n){return C$n.SetZero(),0},C$zi.prototype.Dump=function(C$t){C$t("    const shape: b2EdgeShape = new b2EdgeShape();\n"),C$t("    shape.m_radius = %.15f;\n",this.m_radius),C$t("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),C$t("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),C$t("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),C$t("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),C$t("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),C$t("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)},C$zi.ComputeDistance_s_v1=new C$j,C$zi.ComputeDistance_s_v2=new C$j,C$zi.ComputeDistance_s_d=new C$j,C$zi.ComputeDistance_s_s=new C$j,C$zi.RayCast_s_p1=new C$j,C$zi.RayCast_s_p2=new C$j,C$zi.RayCast_s_d=new C$j,C$zi.RayCast_s_e=new C$j,C$zi.RayCast_s_q=new C$j,C$zi.RayCast_s_r=new C$j,C$zi.ComputeAABB_s_v1=new C$j,C$zi.ComputeAABB_s_v2=new C$j;var C$ki,C$Gi=C$zi;function C$zi(){var C$t=C$ki.call(this,C$H.b2ShapeType.e_edgeShape,.016)||this;return C$t.m_vertex1=new C$j,C$t.m_vertex2=new C$j,C$t.m_vertex0=new C$j,C$t.m_vertex3=new C$j,C$t.m_hasVertex0=!1,C$t.m_hasVertex3=!1,C$t}C$Vi(C$Hi,C$Ui=C$Pi),C$Hi.prototype.CreateLoop=function(C$t,C$e,C$i){if(void 0===C$i&&(C$i=0),(C$e=void 0===C$e?C$t.length:C$e)<3)return this;this.m_count=C$e+1,this.m_vertices=C$j.MakeArray(this.m_count);for(var C$n=0;C$n<C$e;++C$n)this.m_vertices[C$n].Copy(C$t[C$i+C$n]);return this.m_vertices[C$e].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},C$Hi.prototype.CreateChain=function(C$t,C$e,C$i){void 0===C$e&&(C$e=C$t.length),void 0===C$i&&(C$i=0),this.m_count=C$e,this.m_vertices=C$j.MakeArray(C$e);for(var C$n=0;C$n<C$e;++C$n)this.m_vertices[C$n].Copy(C$t[C$i+C$n]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this},C$Hi.prototype.SetPrevVertex=function(C$t){return this.m_prevVertex.Copy(C$t),this.m_hasPrevVertex=!0,this},C$Hi.prototype.SetNextVertex=function(C$t){return this.m_nextVertex.Copy(C$t),this.m_hasNextVertex=!0,this},C$Hi.prototype.Clone=function(){return(new C$Hi).Copy(this)},C$Hi.prototype.Copy=function(C$t){return C$Ui.prototype.Copy.call(this,C$t),this.CreateChain(C$t.m_vertices,C$t.m_count),this.m_prevVertex.Copy(C$t.m_prevVertex),this.m_nextVertex.Copy(C$t.m_nextVertex),this.m_hasPrevVertex=C$t.m_hasPrevVertex,this.m_hasNextVertex=C$t.m_hasNextVertex,this},C$Hi.prototype.GetChildCount=function(){return this.m_count-1},C$Hi.prototype.GetChildEdge=function(C$t,C$e){C$t.m_type=C$H.b2ShapeType.e_edgeShape,C$t.m_radius=this.m_radius,C$t.m_vertex1.Copy(this.m_vertices[C$e]),C$t.m_vertex2.Copy(this.m_vertices[C$e+1]),0<C$e?(C$t.m_vertex0.Copy(this.m_vertices[C$e-1]),C$t.m_hasVertex0=!0):(C$t.m_vertex0.Copy(this.m_prevVertex),C$t.m_hasVertex0=this.m_hasPrevVertex),C$e<this.m_count-2?(C$t.m_vertex3.Copy(this.m_vertices[C$e+2]),C$t.m_hasVertex3=!0):(C$t.m_vertex3.Copy(this.m_nextVertex),C$t.m_hasVertex3=this.m_hasNextVertex)},C$Hi.prototype.TestPoint=function(C$t,C$e){return!1},C$Hi.prototype.ComputeDistance=function(C$t,C$e,C$i,C$n){var C$r=C$Hi.ComputeDistance_s_edgeShape;return this.GetChildEdge(C$r,C$n),C$r.ComputeDistance(C$t,C$e,C$i,0)},C$Hi.prototype.RayCast=function(C$t,C$e,C$i,C$n){var C$r=C$Hi.RayCast_s_edgeShape;return C$r.m_vertex1.Copy(this.m_vertices[C$n]),C$r.m_vertex2.Copy(this.m_vertices[(C$n+1)%this.m_count]),C$r.RayCast(C$t,C$e,C$i,0)},C$Hi.prototype.ComputeAABB=function(C$t,C$e,C$i){var C$n=this.m_vertices[C$i],C$i=this.m_vertices[(C$i+1)%this.m_count],C$n=C$R.MulXV(C$e,C$n,C$Hi.ComputeAABB_s_v1),C$e=C$R.MulXV(C$e,C$i,C$Hi.ComputeAABB_s_v2);C$j.MinV(C$n,C$e,C$t.lowerBound),C$j.MaxV(C$n,C$e,C$t.upperBound)},C$Hi.prototype.ComputeMass=function(C$t,C$e){C$t.mass=0,C$t.center.SetZero(),C$t.I=0},C$Hi.prototype.SetupDistanceProxy=function(C$t,C$e){C$t.m_vertices=C$t.m_buffer,C$t.m_vertices[0].Copy(this.m_vertices[C$e]),C$e+1<this.m_count?C$t.m_vertices[1].Copy(this.m_vertices[C$e+1]):C$t.m_vertices[1].Copy(this.m_vertices[0]),C$t.m_count=2,C$t.m_radius=this.m_radius},C$Hi.prototype.ComputeSubmergedArea=function(C$t,C$e,C$i,C$n){return C$n.SetZero(),0},C$Hi.prototype.Dump=function(C$t){C$t("    const shape: b2ChainShape = new b2ChainShape();\n"),C$t("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",8);for(var C$e=0;C$e<this.m_count;++C$e)C$t("    vs[%d].Set(%.15f, %.15f);\n",C$e,this.m_vertices[C$e].x,this.m_vertices[C$e].y);C$t("    shape.CreateChain(vs, %d);\n",this.m_count),C$t("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),C$t("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),C$t("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),C$t("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")},C$Hi.ComputeDistance_s_edgeShape=new C$Gi,C$Hi.RayCast_s_edgeShape=new C$Gi,C$Hi.ComputeAABB_s_v1=new C$j,C$Hi.ComputeAABB_s_v2=new C$j;var C$Ui,C$Wi=C$Hi;function C$Hi(){var C$t=C$Ui.call(this,C$H.b2ShapeType.e_chainShape,.016)||this;return C$t.m_vertices=[],C$t.m_count=0,C$t.m_prevVertex=new C$j,C$t.m_nextVertex=new C$j,C$t.m_hasPrevVertex=!1,C$t.m_hasNextVertex=!1,C$t}C$Xi.prototype.Clone=function(){return(new C$Xi).Copy(this)},C$Xi.prototype.Copy=function(C$t){return this.categoryBits=C$t.categoryBits,this.maskBits=C$t.maskBits,this.groupIndex=C$t.groupIndex||0,this},C$Xi.DEFAULT=new C$Xi;var C$ji=C$Xi;function C$Xi(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}var C$Yi=function(){this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new C$ji},C$qi=function(C$t){this.aabb=new C$ie,this.childIndex=0,this.fixture=C$t},C$Ji=(C$Zi.prototype.GetType=function(){return this.m_shape.GetType()},C$Zi.prototype.GetShape=function(){return this.m_shape},C$Zi.prototype.SetSensor=function(C$t){C$t!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=C$t)},C$Zi.prototype.IsSensor=function(){return this.m_isSensor},C$Zi.prototype.SetFilterData=function(C$t){this.m_filter.Copy(C$t),this.Refilter()},C$Zi.prototype.GetFilterData=function(){return this.m_filter},C$Zi.prototype.Refilter=function(){for(var C$t=this.m_body.GetContactList();C$t;){var C$e=C$t.contact,C$i=C$e.GetFixtureA(),C$n=C$e.GetFixtureB();C$i!==this&&C$n!==this||C$e.FlagForFiltering(),C$t=C$t.next}var C$r=this.m_body.GetWorld();if(null!==C$r)for(var C$s=C$r.m_contactManager.m_broadPhase,C$o=0;C$o<this.m_proxyCount;++C$o)C$s.TouchProxy(this.m_proxies[C$o].treeNode)},C$Zi.prototype.GetBody=function(){return this.m_body},C$Zi.prototype.GetNext=function(){return this.m_next},C$Zi.prototype.GetUserData=function(){return this.m_userData},C$Zi.prototype.SetUserData=function(C$t){this.m_userData=C$t},C$Zi.prototype.TestPoint=function(C$t){return this.m_shape.TestPoint(this.m_body.GetTransform(),C$t)},C$Zi.prototype.ComputeDistance=function(C$t,C$e,C$i){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),C$t,C$e,C$i)},C$Zi.prototype.RayCast=function(C$t,C$e,C$i){return this.m_shape.RayCast(C$t,C$e,this.m_body.GetTransform(),C$i)},C$Zi.prototype.GetMassData=function(C$t){return void 0===C$t&&(C$t=new C$Ri),this.m_shape.ComputeMass(C$t,this.m_density),C$t},C$Zi.prototype.SetDensity=function(C$t){this.m_density=C$t},C$Zi.prototype.GetDensity=function(){return this.m_density},C$Zi.prototype.GetFriction=function(){return this.m_friction},C$Zi.prototype.SetFriction=function(C$t){this.m_friction=C$t},C$Zi.prototype.GetRestitution=function(){return this.m_restitution},C$Zi.prototype.SetRestitution=function(C$t){this.m_restitution=C$t},C$Zi.prototype.GetAABB=function(C$t){return this.m_proxies[C$t].aabb},C$Zi.prototype.Dump=function(C$t,C$e){C$t("    const fd: b2FixtureDef = new b2FixtureDef();\n"),C$t("    fd.friction = %.15f;\n",this.m_friction),C$t("    fd.restitution = %.15f;\n",this.m_restitution),C$t("    fd.density = %.15f;\n",this.m_density),C$t("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),C$t("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),C$t("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),C$t("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(C$t),C$t("\n"),C$t("    fd.shape = shape;\n"),C$t("\n"),C$t("    bodies[%d].CreateFixture(fd);\n",C$e)},C$Zi.prototype.Create=function(C$t){var C$e=this;this.m_userData=C$t.userData,this.m_friction=C$f(C$t.friction,.2),this.m_restitution=C$f(C$t.restitution,0),this.m_next=null,this.m_filter.Copy(C$f(C$t.filter,C$ji.DEFAULT)),this.m_isSensor=C$f(C$t.isSensor,!1),this.m_proxies=C$c(this.m_shape.GetChildCount(),function(C$t){return new C$qi(C$e)}),this.m_proxyCount=0,this.m_density=C$f(C$t.density,0)},C$Zi.prototype.Destroy=function(){},C$Zi.prototype.CreateProxies=function(C$t){var C$e=this.m_body.m_world.m_contactManager.m_broadPhase;this.m_proxyCount=this.m_shape.GetChildCount();for(var C$i=0;C$i<this.m_proxyCount;++C$i){var C$n=this.m_proxies[C$i]=new C$qi(this);this.m_shape.ComputeAABB(C$n.aabb,C$t,C$i),C$n.treeNode=C$e.CreateProxy(C$n.aabb,C$n),C$n.childIndex=C$i}},C$Zi.prototype.DestroyProxies=function(){for(var C$t=this.m_body.m_world.m_contactManager.m_broadPhase,C$e=0;C$e<this.m_proxyCount;++C$e){var C$i=this.m_proxies[C$e];delete C$i.treeNode.userData,C$t.DestroyProxy(C$i.treeNode),delete C$i.treeNode}this.m_proxyCount=0},C$Zi.prototype.TouchProxies=function(){for(var C$t=this.m_body.m_world.m_contactManager.m_broadPhase,C$e=this.m_proxyCount,C$i=0;C$i<C$e;++C$i)C$t.TouchProxy(this.m_proxies[C$i].treeNode)},C$Zi.prototype.Synchronize=function(C$t,C$e){if(0!==this.m_proxyCount)for(var C$i=this.m_body.m_world.m_contactManager.m_broadPhase,C$n=0;C$n<this.m_proxyCount;++C$n){var C$r=this.m_proxies[C$n],C$s=C$Zi.Synchronize_s_aabb1,C$o=C$Zi.Synchronize_s_aabb2,C$s=(this.m_shape.ComputeAABB(C$s,C$t,C$n),this.m_shape.ComputeAABB(C$o,C$e,C$n),C$r.aabb.Combine2(C$s,C$o),C$j.SubVV(C$e.p,C$t.p,C$Zi.Synchronize_s_displacement));C$i.MoveProxy(C$r.treeNode,C$r.aabb,C$s)}},C$Zi.Synchronize_s_aabb1=new C$ie,C$Zi.Synchronize_s_aabb2=new C$ie,C$Zi.Synchronize_s_displacement=new C$j,C$Zi);function C$Zi(C$t,C$e){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=[],this.m_proxyCount=0,this.m_filter=new C$ji,this.m_isSensor=!1,this.m_userData=null,this.m_body=C$e,this.m_shape=C$t.shape.Clone()}(C$$i=C$H.b2BodyType||(C$H.b2BodyType={}))[C$$i.b2_unknown=-1]="b2_unknown",C$$i[C$$i.b2_staticBody=0]="b2_staticBody",C$$i[C$$i.b2_kinematicBody=1]="b2_kinematicBody",C$$i[C$$i.b2_dynamicBody=2]="b2_dynamicBody";function C$Ki(){this.type=C$H.b2BodyType.b2_staticBody,this.position=new C$j(0,0),this.angle=0,this.linearVelocity=new C$j(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}C$r.prototype.CreateFixture=function(C$t,C$e){return void 0===C$e&&(C$e=0),C$t instanceof C$Pi?this.CreateFixtureShapeDensity(C$t,C$e):this.CreateFixtureDef(C$t)},C$r.prototype.CreateFixtureDef=function(C$t){if(this.m_world.IsLocked())throw new Error;var C$e=new C$Ji(C$t,this);return C$e.Create(C$t),this.m_activeFlag&&C$e.CreateProxies(this.m_xf),C$e.m_next=this.m_fixtureList,this.m_fixtureList=C$e,++this.m_fixtureCount,0<C$e.m_density&&this.ResetMassData(),this.m_world.m_newFixture=!0,C$e},C$r.prototype.CreateFixtureShapeDensity=function(C$t,C$e){void 0===C$e&&(C$e=0);var C$i=C$r.CreateFixtureShapeDensity_s_def;return C$i.shape=C$t,C$i.density=C$e,this.CreateFixtureDef(C$i)},C$r.prototype.DestroyFixture=function(C$t){if(this.m_world.IsLocked())throw new Error;for(var C$e=this.m_fixtureList,C$i=null;null!==C$e;){if(C$e===C$t){C$i?C$i.m_next=C$t.m_next:this.m_fixtureList=C$t.m_next;break}C$e=(C$i=C$e).m_next}for(var C$n=this.m_contactList;C$n;){var C$r=C$n.contact,C$n=C$n.next,C$s=C$r.GetFixtureA(),C$o=C$r.GetFixtureB();C$t!==C$s&&C$t!==C$o||this.m_world.m_contactManager.Destroy(C$r)}this.m_activeFlag&&C$t.DestroyProxies(),C$t.m_next=null,C$t.Destroy(),--this.m_fixtureCount,this.ResetMassData()},C$r.prototype.SetTransformVec=function(C$t,C$e){this.SetTransformXY(C$t.x,C$t.y,C$e)},C$r.prototype.SetTransformXY=function(C$t,C$e,C$i){if(this.m_world.IsLocked())throw new Error;this.m_xf.q.SetAngle(C$i),this.m_xf.p.Set(C$t,C$e),this.m_xf0.Copy(this.m_xf),C$R.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=C$i,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=C$i;for(var C$n=this.m_fixtureList;C$n;C$n=C$n.m_next)C$n.Synchronize(this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},C$r.prototype.SetTransform=function(C$t){this.SetTransformVec(C$t.p,C$t.GetAngle())},C$r.prototype.GetTransform=function(){return this.m_xf},C$r.prototype.GetPosition=function(){return this.m_xf.p},C$r.prototype.SetPosition=function(C$t){this.SetTransformVec(C$t,this.GetAngle())},C$r.prototype.SetPositionXY=function(C$t,C$e){this.SetTransformXY(C$t,C$e,this.GetAngle())},C$r.prototype.GetAngle=function(){return this.m_sweep.a},C$r.prototype.SetAngle=function(C$t){this.SetTransformVec(this.GetPosition(),C$t)},C$r.prototype.GetWorldCenter=function(){return this.m_sweep.c},C$r.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},C$r.prototype.SetLinearVelocity=function(C$t){this.m_type!==C$H.b2BodyType.b2_staticBody&&(0<C$j.DotVV(C$t,C$t)&&this.SetAwake(!0),this.m_linearVelocity.Copy(C$t))},C$r.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},C$r.prototype.SetAngularVelocity=function(C$t){this.m_type!==C$H.b2BodyType.b2_staticBody&&(0<C$t*C$t&&this.SetAwake(!0),this.m_angularVelocity=C$t)},C$r.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},C$r.prototype.GetDefinition=function(C$t){return C$t.type=this.GetType(),C$t.allowSleep=this.m_autoSleepFlag,C$t.angle=this.GetAngle(),C$t.angularDamping=this.m_angularDamping,C$t.gravityScale=this.m_gravityScale,C$t.angularVelocity=this.m_angularVelocity,C$t.fixedRotation=this.m_fixedRotationFlag,C$t.bullet=this.m_bulletFlag,C$t.awake=this.m_awakeFlag,C$t.linearDamping=this.m_linearDamping,C$t.linearVelocity.Copy(this.GetLinearVelocity()),C$t.position.Copy(this.GetPosition()),C$t.userData=this.GetUserData(),C$t},C$r.prototype.ApplyForce=function(C$t,C$e,C$i){void 0===C$i&&(C$i=!0),this.m_type===C$H.b2BodyType.b2_dynamicBody&&(C$i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=C$t.x,this.m_force.y+=C$t.y,this.m_torque+=(C$e.x-this.m_sweep.c.x)*C$t.y-(C$e.y-this.m_sweep.c.y)*C$t.x))},C$r.prototype.ApplyForceToCenter=function(C$t,C$e){void 0===C$e&&(C$e=!0),this.m_type===C$H.b2BodyType.b2_dynamicBody&&(C$e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=C$t.x,this.m_force.y+=C$t.y))},C$r.prototype.ApplyTorque=function(C$t,C$e){void 0===C$e&&(C$e=!0),this.m_type===C$H.b2BodyType.b2_dynamicBody&&(C$e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=C$t))},C$r.prototype.ApplyLinearImpulse=function(C$t,C$e,C$i){void 0===C$i&&(C$i=!0),this.m_type===C$H.b2BodyType.b2_dynamicBody&&(C$i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*C$t.x,this.m_linearVelocity.y+=this.m_invMass*C$t.y,this.m_angularVelocity+=this.m_invI*((C$e.x-this.m_sweep.c.x)*C$t.y-(C$e.y-this.m_sweep.c.y)*C$t.x)))},C$r.prototype.ApplyLinearImpulseToCenter=function(C$t,C$e){void 0===C$e&&(C$e=!0),this.m_type===C$H.b2BodyType.b2_dynamicBody&&(C$e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*C$t.x,this.m_linearVelocity.y+=this.m_invMass*C$t.y))},C$r.prototype.ApplyAngularImpulse=function(C$t,C$e){void 0===C$e&&(C$e=!0),this.m_type===C$H.b2BodyType.b2_dynamicBody&&(C$e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*C$t))},C$r.prototype.GetMass=function(){return this.m_mass},C$r.prototype.GetInertia=function(){return this.m_I+this.m_mass*C$j.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)},C$r.prototype.GetMassData=function(C$t){return C$t.mass=this.m_mass,C$t.I=this.m_I+this.m_mass*C$j.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),C$t.center.Copy(this.m_sweep.localCenter),C$t},C$r.prototype.SetMassData=function(C$t){if(this.m_world.IsLocked())throw new Error;var C$e;this.m_type===C$H.b2BodyType.b2_dynamicBody&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=C$t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,0<C$t.I&&!this.m_fixedRotationFlag&&(this.m_I=C$t.I-this.m_mass*C$j.DotVV(C$t.center,C$t.center),this.m_invI=1/this.m_I),C$e=C$r.SetMassData_s_oldCenter.Copy(this.m_sweep.c),this.m_sweep.localCenter.Copy(C$t.center),C$R.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),C$j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$j.SubVV(this.m_sweep.c,C$e,C$j.s_t0),this.m_linearVelocity))},C$r.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===C$H.b2BodyType.b2_staticBody||this.m_type===C$H.b2BodyType.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);for(var C$t,C$e=C$r.ResetMassData_s_localCenter.SetZero(),C$i=this.m_fixtureList;C$i;C$i=C$i.m_next)0!==C$i.m_density&&(C$t=C$i.GetMassData(C$r.ResetMassData_s_massData),this.m_mass+=C$t.mass,C$e.x+=C$t.center.x*C$t.mass,C$e.y+=C$t.center.y*C$t.mass,this.m_I+=C$t.I);0<this.m_mass?(this.m_invMass=1/this.m_mass,C$e.x*=this.m_invMass,C$e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),0<this.m_I&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*C$j.DotVV(C$e,C$e),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var C$n=C$r.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(C$e),C$R.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),C$j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$j.SubVV(this.m_sweep.c,C$n,C$j.s_t0),this.m_linearVelocity)},C$r.prototype.GetWorldPoint=function(C$t,C$e){return C$R.MulXV(this.m_xf,C$t,C$e)},C$r.prototype.GetWorldVector=function(C$t,C$e){return C$B.MulRV(this.m_xf.q,C$t,C$e)},C$r.prototype.GetLocalPoint=function(C$t,C$e){return C$R.MulTXV(this.m_xf,C$t,C$e)},C$r.prototype.GetLocalVector=function(C$t,C$e){return C$B.MulTRV(this.m_xf.q,C$t,C$e)},C$r.prototype.GetLinearVelocityFromWorldPoint=function(C$t,C$e){return C$j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$j.SubVV(C$t,this.m_sweep.c,C$j.s_t0),C$e)},C$r.prototype.GetLinearVelocityFromLocalPoint=function(C$t,C$e){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(C$t,C$e),C$e)},C$r.prototype.GetLinearDamping=function(){return this.m_linearDamping},C$r.prototype.SetLinearDamping=function(C$t){this.m_linearDamping=C$t},C$r.prototype.GetAngularDamping=function(){return this.m_angularDamping},C$r.prototype.SetAngularDamping=function(C$t){this.m_angularDamping=C$t},C$r.prototype.GetGravityScale=function(){return this.m_gravityScale},C$r.prototype.SetGravityScale=function(C$t){this.m_gravityScale=C$t},C$r.prototype.SetType=function(C$t){if(this.m_world.IsLocked())throw new Error;if(this.m_type!==C$t){this.m_type=C$t,this.ResetMassData(),this.m_type===C$H.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var C$e=this.m_contactList;C$e;){var C$i=C$e,C$e=C$e.next;this.m_world.m_contactManager.Destroy(C$i.contact)}this.m_contactList=null;for(var C$n=this.m_fixtureList;C$n;C$n=C$n.m_next)C$n.TouchProxies()}},C$r.prototype.GetType=function(){return this.m_type},C$r.prototype.SetBullet=function(C$t){this.m_bulletFlag=C$t},C$r.prototype.IsBullet=function(){return this.m_bulletFlag},C$r.prototype.SetSleepingAllowed=function(C$t){(this.m_autoSleepFlag=C$t)||this.SetAwake(!0)},C$r.prototype.IsSleepingAllowed=function(){return this.m_autoSleepFlag},C$r.prototype.SetAwake=function(C$t){C$t?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},C$r.prototype.IsAwake=function(){return this.m_awakeFlag},C$r.prototype.SetActive=function(C$t){if(this.m_world.IsLocked())throw new Error;if(C$t!==this.IsActive())if(this.m_activeFlag=C$t)for(var C$e=this.m_fixtureList;C$e;C$e=C$e.m_next)C$e.CreateProxies(this.m_xf);else{for(C$e=this.m_fixtureList;C$e;C$e=C$e.m_next)C$e.DestroyProxies();for(var C$i=this.m_contactList;C$i;){var C$n=C$i,C$i=C$i.next;this.m_world.m_contactManager.Destroy(C$n.contact)}this.m_contactList=null}},C$r.prototype.IsActive=function(){return this.m_activeFlag},C$r.prototype.SetFixedRotation=function(C$t){this.m_fixedRotationFlag!==C$t&&(this.m_fixedRotationFlag=C$t,this.m_angularVelocity=0,this.ResetMassData())},C$r.prototype.IsFixedRotation=function(){return this.m_fixedRotationFlag},C$r.prototype.GetFixtureList=function(){return this.m_fixtureList},C$r.prototype.GetJointList=function(){return this.m_jointList},C$r.prototype.GetContactList=function(){return this.m_contactList},C$r.prototype.GetNext=function(){return this.m_next},C$r.prototype.GetUserData=function(){return this.m_userData},C$r.prototype.SetUserData=function(C$t){this.m_userData=C$t},C$r.prototype.GetWorld=function(){return this.m_world},C$r.prototype.Dump=function(C$t){var C$e=this.m_islandIndex,C$i=(C$t("{\n"),C$t("  const bd: b2BodyDef = new b2BodyDef();\n"),"");switch(this.m_type){case C$H.b2BodyType.b2_staticBody:C$i="b2BodyType.b2_staticBody";break;case C$H.b2BodyType.b2_kinematicBody:C$i="b2BodyType.b2_kinematicBody";break;case C$H.b2BodyType.b2_dynamicBody:C$i="b2BodyType.b2_dynamicBody"}C$t("  bd.type = %s;\n",C$i),C$t("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),C$t("  bd.angle = %.15f;\n",this.m_sweep.a),C$t("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),C$t("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),C$t("  bd.linearDamping = %.15f;\n",this.m_linearDamping),C$t("  bd.angularDamping = %.15f;\n",this.m_angularDamping),C$t("  bd.allowSleep = %s;\n",this.m_autoSleepFlag?"true":"false"),C$t("  bd.awake = %s;\n",this.m_awakeFlag?"true":"false"),C$t("  bd.fixedRotation = %s;\n",this.m_fixedRotationFlag?"true":"false"),C$t("  bd.bullet = %s;\n",this.m_bulletFlag?"true":"false"),C$t("  bd.active = %s;\n",this.m_activeFlag?"true":"false"),C$t("  bd.gravityScale = %.15f;\n",this.m_gravityScale),C$t("\n"),C$t("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),C$t("\n");for(var C$n=this.m_fixtureList;C$n;C$n=C$n.m_next)C$t("  {\n"),C$n.Dump(C$t,C$e),C$t("  }\n");C$t("}\n")},C$r.prototype.SynchronizeFixtures=function(){var C$t=C$r.SynchronizeFixtures_s_xf1;C$t.q.SetAngle(this.m_sweep.a0),C$B.MulRV(C$t.q,this.m_sweep.localCenter,C$t.p),C$j.SubVV(this.m_sweep.c0,C$t.p,C$t.p);for(var C$e=this.m_fixtureList;C$e;C$e=C$e.m_next)C$e.Synchronize(C$t,this.m_xf)},C$r.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngle(this.m_sweep.a),C$B.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),C$j.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},C$r.prototype.ShouldCollide=function(C$t){return(this.m_type!==C$H.b2BodyType.b2_staticBody||C$t.m_type!==C$H.b2BodyType.b2_staticBody)&&this.ShouldCollideConnected(C$t)},C$r.prototype.ShouldCollideConnected=function(C$t){for(var C$e=this.m_jointList;C$e;C$e=C$e.next)if(C$e.other===C$t&&!C$e.joint.m_collideConnected)return!1;return!0},C$r.prototype.Advance=function(C$t){this.m_sweep.Advance(C$t),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),C$B.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),C$j.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},C$r.prototype.GetControllerList=function(){return this.m_controllerList},C$r.prototype.GetControllerCount=function(){return this.m_controllerCount},C$r.CreateFixtureShapeDensity_s_def=new C$Yi,C$r.SetMassData_s_oldCenter=new C$j,C$r.ResetMassData_s_localCenter=new C$j,C$r.ResetMassData_s_oldCenter=new C$j,C$r.ResetMassData_s_massData=new C$Ri,C$r.SynchronizeFixtures_s_xf1=new C$R;var C$Qi=C$r;function C$r(C$t,C$e){this.m_type=C$H.b2BodyType.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new C$R,this.m_xf0=new C$R,this.m_sweep=new C$J,this.m_linearVelocity=new C$j,this.m_angularVelocity=0,this.m_force=new C$j,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,this.m_bulletFlag=C$f(C$t.bullet,!1),this.m_fixedRotationFlag=C$f(C$t.fixedRotation,!1),this.m_autoSleepFlag=C$f(C$t.allowSleep,!0),this.m_awakeFlag=C$f(C$t.awake,!0),this.m_activeFlag=C$f(C$t.active,!0),this.m_world=C$e,this.m_xf.p.Copy(C$f(C$t.position,C$j.ZERO)),this.m_xf.q.SetAngle(C$f(C$t.angle,0)),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(C$f(C$t.linearVelocity,C$j.ZERO)),this.m_angularVelocity=C$f(C$t.angularVelocity,0),this.m_linearDamping=C$f(C$t.linearDamping,0),this.m_angularDamping=C$f(C$t.angularDamping,0),this.m_gravityScale=C$f(C$t.gravityScale,1),this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=C$f(C$t.type,C$H.b2BodyType.b2_staticBody),C$t.type===C$H.b2BodyType.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=C$t.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}(C$$i=C$H.b2JointType||(C$H.b2JointType={}))[C$$i.e_unknownJoint=0]="e_unknownJoint",C$$i[C$$i.e_revoluteJoint=1]="e_revoluteJoint",C$$i[C$$i.e_prismaticJoint=2]="e_prismaticJoint",C$$i[C$$i.e_distanceJoint=3]="e_distanceJoint",C$$i[C$$i.e_pulleyJoint=4]="e_pulleyJoint",C$$i[C$$i.e_mouseJoint=5]="e_mouseJoint",C$$i[C$$i.e_gearJoint=6]="e_gearJoint",C$$i[C$$i.e_wheelJoint=7]="e_wheelJoint",C$$i[C$$i.e_weldJoint=8]="e_weldJoint",C$$i[C$$i.e_frictionJoint=9]="e_frictionJoint",C$$i[C$$i.e_ropeJoint=10]="e_ropeJoint",C$$i[C$$i.e_motorJoint=11]="e_motorJoint",C$$i[C$$i.e_areaJoint=12]="e_areaJoint",(C$$i=C$H.b2LimitState||(C$H.b2LimitState={}))[C$$i.e_inactiveLimit=0]="e_inactiveLimit",C$$i[C$$i.e_atLowerLimit=1]="e_atLowerLimit",C$$i[C$$i.e_atUpperLimit=2]="e_atUpperLimit",C$$i[C$$i.e_equalLimits=3]="e_equalLimits";C$tn.prototype.SetZero=function(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this},C$tn.prototype.Set=function(C$t,C$e,C$i){return this.linear.Copy(C$t),this.angularA=C$e,this.angularB=C$i,this};var C$$i=C$tn;function C$tn(){this.linear=new C$j,this.angularA=0,this.angularB=0}function C$en(C$t){this.type=C$H.b2JointType.e_unknownJoint,this.userData=null,this.collideConnected=!1,this.type=C$t}var C$in=function(C$t,C$e){this.prev=null,this.next=null,this.joint=C$t,this.other=C$e},C$nn=(C$rn.prototype.GetType=function(){return this.m_type},C$rn.prototype.GetBodyA=function(){return this.m_bodyA},C$rn.prototype.GetBodyB=function(){return this.m_bodyB},C$rn.prototype.GetNext=function(){return this.m_next},C$rn.prototype.GetUserData=function(){return this.m_userData},C$rn.prototype.SetUserData=function(C$t){this.m_userData=C$t},C$rn.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},C$rn.prototype.GetCollideConnected=function(){return this.m_collideConnected},C$rn.prototype.Dump=function(C$t){C$t("// Dump is not supported for this joint type.\n")},C$rn.prototype.ShiftOrigin=function(C$t){},C$rn);function C$rn(C$t){this.m_type=C$H.b2JointType.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=C$t.type,this.m_edgeA=new C$in(this,C$t.bodyB),this.m_edgeB=new C$in(this,C$t.bodyA),this.m_bodyA=C$t.bodyA,this.m_bodyB=C$t.bodyB,this.m_collideConnected=C$f(C$t.collideConnected,!1),this.m_userData=C$t.userData}C$Vi(C$an,C$sn=C$en),C$an.prototype.Initialize=function(C$t,C$e,C$i,C$n){this.bodyA=C$t,this.bodyB=C$e,this.bodyA.GetLocalPoint(C$i,this.localAnchorA),this.bodyB.GetLocalPoint(C$n,this.localAnchorB),this.length=C$j.DistanceVV(C$i,C$n),this.frequencyHz=0,this.dampingRatio=0};var C$sn,C$on=C$an;function C$an(){var C$t=C$sn.call(this,C$H.b2JointType.e_distanceJoint)||this;return C$t.localAnchorA=new C$j,C$t.localAnchorB=new C$j,C$t.length=1,C$t.frequencyHz=0,C$t.dampingRatio=0,C$t}C$Vi(C$hn,C$cn=C$nn),C$hn.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$hn.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$hn.prototype.GetReactionForce=function(C$t,C$e){return C$e.x=C$t*this.m_impulse*this.m_u.x,C$e.y=C$t*this.m_impulse*this.m_u.y,C$e},C$hn.prototype.GetReactionTorque=function(C$t){return 0},C$hn.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$hn.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$hn.prototype.SetLength=function(C$t){this.m_length=C$t},C$hn.prototype.Length=function(){return this.m_length},C$hn.prototype.SetFrequency=function(C$t){this.m_frequencyHz=C$t},C$hn.prototype.GetFrequency=function(){return this.m_frequencyHz},C$hn.prototype.SetDampingRatio=function(C$t){this.m_dampingRatio=C$t},C$hn.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$hn.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.length = %.15f;\n",this.m_length),C$t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$hn.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e,C$i=C$t.positions[this.m_indexA].c,C$n=C$t.positions[this.m_indexA].a,C$r=C$t.velocities[this.m_indexA].v,C$s=C$t.velocities[this.m_indexA].w,C$o=C$t.positions[this.m_indexB].c,C$a=C$t.positions[this.m_indexB].a,C$c=C$t.velocities[this.m_indexB].v,C$l=C$t.velocities[this.m_indexB].w,C$n=this.m_qA.SetAngle(C$n),C$a=this.m_qB.SetAngle(C$a),C$n=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$n,this.m_lalcA,this.m_rA),C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$a,this.m_lalcB,this.m_rB),this.m_u.x=C$o.x+this.m_rB.x-C$i.x-this.m_rA.x,this.m_u.y=C$o.y+this.m_rB.y-C$i.y-this.m_rA.y,this.m_u.Length()),C$a=(.008<C$n?this.m_u.SelfMul(1/C$n):this.m_u.SetZero(),C$j.CrossVV(this.m_rA,this.m_u)),C$o=C$j.CrossVV(this.m_rB,this.m_u),C$i=this.m_invMassA+this.m_invIA*C$a*C$a+this.m_invMassB+this.m_invIB*C$o*C$o;this.m_mass=0!==C$i?1/C$i:0,0<this.m_frequencyHz?(C$a=C$n-this.m_length,C$o=2*C$m*this.m_frequencyHz,C$n=2*this.m_mass*this.m_dampingRatio*C$o,C$o=this.m_mass*C$o*C$o,C$e=C$t.step.dt,this.m_gamma=C$e*(C$n+C$e*C$o),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=C$a*C$e*C$o*this.m_gamma,C$i+=this.m_gamma,this.m_mass=0!==C$i?1/C$i:0):(this.m_gamma=0,this.m_bias=0),C$t.step.warmStarting?(this.m_impulse*=C$t.step.dtRatio,C$n=C$j.MulSV(this.m_impulse,this.m_u,C$hn.InitVelocityConstraints_s_P),C$r.SelfMulSub(this.m_invMassA,C$n),C$s-=this.m_invIA*C$j.CrossVV(this.m_rA,C$n),C$c.SelfMulAdd(this.m_invMassB,C$n),C$l+=this.m_invIB*C$j.CrossVV(this.m_rB,C$n)):this.m_impulse=0,C$t.velocities[this.m_indexA].w=C$s,C$t.velocities[this.m_indexB].w=C$l},C$hn.prototype.SolveVelocityConstraints=function(C$t){var C$e=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$s=C$j.AddVCrossSV(C$e,C$i,this.m_rA,C$hn.SolveVelocityConstraints_s_vpA),C$o=C$j.AddVCrossSV(C$n,C$r,this.m_rB,C$hn.SolveVelocityConstraints_s_vpB),C$o=C$j.DotVV(this.m_u,C$j.SubVV(C$o,C$s,C$j.s_t0)),C$s=-this.m_mass*(C$o+this.m_bias+this.m_gamma*this.m_impulse),C$o=(this.m_impulse+=C$s,C$j.MulSV(C$s,this.m_u,C$hn.SolveVelocityConstraints_s_P));C$e.SelfMulSub(this.m_invMassA,C$o),C$i-=this.m_invIA*C$j.CrossVV(this.m_rA,C$o),C$n.SelfMulAdd(this.m_invMassB,C$o),C$r+=this.m_invIB*C$j.CrossVV(this.m_rB,C$o),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r},C$hn.prototype.SolvePositionConstraints=function(C$t){if(0<this.m_frequencyHz)return!0;var C$e=C$t.positions[this.m_indexA].c,C$i=C$t.positions[this.m_indexA].a,C$n=C$t.positions[this.m_indexB].c,C$r=C$t.positions[this.m_indexB].a,C$s=this.m_qA.SetAngle(C$i),C$o=this.m_qB.SetAngle(C$r),C$s=C$B.MulRV(C$s,this.m_lalcA,this.m_rA),C$o=C$B.MulRV(C$o,this.m_lalcB,this.m_rB),C$a=this.m_u;C$a.x=C$n.x+C$o.x-C$e.x-C$s.x,C$a.y=C$n.y+C$o.y-C$e.y-C$s.y;var C$c=C$O(this.m_u.Normalize()-this.m_length,-.2,.2),C$l=-this.m_mass*C$c,C$l=C$j.MulSV(C$l,C$a,C$hn.SolvePositionConstraints_s_P);return C$e.SelfMulSub(this.m_invMassA,C$l),C$i-=this.m_invIA*C$j.CrossVV(C$s,C$l),C$n.SelfMulAdd(this.m_invMassB,C$l),C$r+=this.m_invIB*C$j.CrossVV(C$o,C$l),C$t.positions[this.m_indexA].a=C$i,C$t.positions[this.m_indexB].a=C$r,C$D(C$c)<.008},C$hn.InitVelocityConstraints_s_P=new C$j,C$hn.SolveVelocityConstraints_s_vpA=new C$j,C$hn.SolveVelocityConstraints_s_vpB=new C$j,C$hn.SolveVelocityConstraints_s_P=new C$j,C$hn.SolvePositionConstraints_s_P=new C$j;var C$cn,C$ln=C$hn;function C$hn(C$t){var C$e=C$cn.call(this,C$t)||this;return C$e.m_frequencyHz=0,C$e.m_dampingRatio=0,C$e.m_bias=0,C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_gamma=0,C$e.m_impulse=0,C$e.m_length=0,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_u=new C$j,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_mass=0,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_frequencyHz=C$f(C$t.frequencyHz,0),C$e.m_dampingRatio=C$f(C$t.dampingRatio,0),C$e.m_localAnchorA.Copy(C$t.localAnchorA),C$e.m_localAnchorB.Copy(C$t.localAnchorB),C$e.m_length=C$t.length,C$e}C$Vi(C$dn,C$un=C$en),C$dn.prototype.AddBody=function(C$t){this.bodies.push(C$t),1===this.bodies.length?this.bodyA=C$t:2===this.bodies.length&&(this.bodyB=C$t)};var C$un,C$_n=C$dn;function C$dn(){var C$t=C$un.call(this,C$H.b2JointType.e_areaJoint)||this;return C$t.bodies=[],C$t.frequencyHz=0,C$t.dampingRatio=0,C$t}C$Vi(C$mn,C$fn=C$nn),C$mn.prototype.GetAnchorA=function(C$t){return C$t},C$mn.prototype.GetAnchorB=function(C$t){return C$t},C$mn.prototype.GetReactionForce=function(C$t,C$e){return C$e},C$mn.prototype.GetReactionTorque=function(C$t){return 0},C$mn.prototype.SetFrequency=function(C$t){this.m_frequencyHz=C$t;for(var C$e=0;C$e<this.m_joints.length;++C$e)this.m_joints[C$e].SetFrequency(C$t)},C$mn.prototype.GetFrequency=function(){return this.m_frequencyHz},C$mn.prototype.SetDampingRatio=function(C$t){this.m_dampingRatio=C$t;for(var C$e=0;C$e<this.m_joints.length;++C$e)this.m_joints[C$e].SetDampingRatio(C$t)},C$mn.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$mn.prototype.Dump=function(C$t){C$t("Area joint dumping is not supported.\n")},C$mn.prototype.InitVelocityConstraints=function(C$t){for(var C$e=0;C$e<this.m_bodies.length;++C$e){var C$i=this.m_bodies[(C$e+this.m_bodies.length-1)%this.m_bodies.length],C$n=this.m_bodies[(C$e+1)%this.m_bodies.length],C$i=C$t.positions[C$i.m_islandIndex].c,C$n=C$t.positions[C$n.m_islandIndex].c,C$r=this.m_deltas[C$e];C$j.SubVV(C$n,C$i,C$r)}if(C$t.step.warmStarting){this.m_impulse*=C$t.step.dtRatio;for(C$e=0;C$e<this.m_bodies.length;++C$e){var C$s=this.m_bodies[C$e],C$o=C$t.velocities[C$s.m_islandIndex].v,C$r=this.m_deltas[C$e];C$o.x+=C$s.m_invMass*C$r.y*.5*this.m_impulse,C$o.y+=C$s.m_invMass*-C$r.x*.5*this.m_impulse}}else this.m_impulse=0},C$mn.prototype.SolveVelocityConstraints=function(C$t){for(var C$e=0,C$i=0,C$n=0;C$n<this.m_bodies.length;++C$n){var C$r=this.m_bodies[C$n],C$s=C$t.velocities[C$r.m_islandIndex].v;C$e+=(C$a=this.m_deltas[C$n]).LengthSquared()/C$r.GetMass(),C$i+=C$j.CrossVV(C$s,C$a)}var C$o=-2*C$i/C$e;this.m_impulse+=C$o;for(C$n=0;C$n<this.m_bodies.length;++C$n){var C$r=this.m_bodies[C$n],C$s=C$t.velocities[C$r.m_islandIndex].v,C$a=this.m_deltas[C$n];C$s.x+=C$r.m_invMass*C$a.y*.5*C$o,C$s.y+=C$r.m_invMass*-C$a.x*.5*C$o}},C$mn.prototype.SolvePositionConstraints=function(C$t){for(var C$e=0,C$i=0,C$n=0;C$n<this.m_bodies.length;++C$n){var C$r=this.m_bodies[C$n],C$s=this.m_bodies[(C$n+1)%this.m_bodies.length],C$o=C$t.positions[C$r.m_islandIndex].c,C$s=C$t.positions[C$s.m_islandIndex].c,C$a=(C$c=C$j.SubVV(C$s,C$o,this.m_delta)).Length();C$a<C$M&&(C$a=1),this.m_normals[C$n].x=C$c.y/C$a,this.m_normals[C$n].y=-C$c.x/C$a,C$e+=C$a,C$i+=C$j.CrossVV(C$o,C$s)}for(var C$h=.5*(this.m_targetArea-(C$i*=.5))/C$e,C$u=!0,C$n=0;C$n<this.m_bodies.length;++C$n){var C$c,C$r=this.m_bodies[C$n],C$o=C$t.positions[C$r.m_islandIndex].c,C$l=(C$n+1)%this.m_bodies.length,C$l=((C$c=C$j.AddVV(this.m_normals[C$n],this.m_normals[C$l],this.m_delta)).SelfMul(C$h),C$c.LengthSquared());C$l>C$_(.2)&&C$c.SelfMul(.2/C$Y(C$l)),64e-6<C$l&&(C$u=!1),C$o.x+=C$c.x,C$o.y+=C$c.y}return C$u};var C$fn,C$pn=C$mn;function C$mn(C$t){var C$e=C$fn.call(this,C$t)||this,C$i=(C$e.m_frequencyHz=0,C$e.m_dampingRatio=0,C$e.m_impulse=0,C$e.m_targetArea=0,C$e.m_bodies=C$t.bodies,C$e.m_frequencyHz=C$f(C$t.frequencyHz,0),C$e.m_dampingRatio=C$f(C$t.dampingRatio,0),C$e.m_targetLengths=C$h(C$t.bodies.length),C$e.m_normals=C$j.MakeArray(C$t.bodies.length),C$e.m_joints=[],C$e.m_deltas=C$j.MakeArray(C$t.bodies.length),C$e.m_delta=new C$j,new C$on);C$i.frequencyHz=C$e.m_frequencyHz,C$i.dampingRatio=C$e.m_dampingRatio;for(var C$n=C$e.m_targetArea=0;C$n<C$e.m_bodies.length;++C$n){var C$r=C$e.m_bodies[C$n],C$s=C$e.m_bodies[(C$n+1)%C$e.m_bodies.length],C$o=C$r.GetWorldCenter(),C$a=C$s.GetWorldCenter();C$e.m_targetLengths[C$n]=C$j.DistanceVV(C$o,C$a),C$e.m_targetArea+=C$j.CrossVV(C$o,C$a),C$i.Initialize(C$r,C$s,C$o,C$a),C$e.m_joints[C$n]=C$r.GetWorld().CreateJoint(C$i)}return C$e.m_targetArea*=.5,C$e}C$Vi(C$vn,C$yn=C$en),C$vn.prototype.Initialize=function(C$t,C$e,C$i){this.bodyA=C$t,this.bodyB=C$e,this.bodyA.GetLocalPoint(C$i,this.localAnchorA),this.bodyB.GetLocalPoint(C$i,this.localAnchorB)};var C$yn,C$gn=C$vn;function C$vn(){var C$t=C$yn.call(this,C$H.b2JointType.e_frictionJoint)||this;return C$t.localAnchorA=new C$j,C$t.localAnchorB=new C$j,C$t.maxForce=0,C$t.maxTorque=0,C$t}C$Vi(C$An,C$xn=C$nn),C$An.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e=C$t.positions[this.m_indexA].a,C$h=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.positions[this.m_indexB].a,C$u=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$e=this.m_qA.SetAngle(C$e),C$n=this.m_qB.SetAngle(C$n),C$e=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$e,this.m_lalcA,this.m_rA)),C$n=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$n,this.m_lalcB,this.m_rB)),C$s=this.m_invMassA,C$o=this.m_invMassB,C$a=this.m_invIA,C$c=this.m_invIB,C$l=this.m_K;C$l.ex.x=C$s+C$o+C$a*C$e.y*C$e.y+C$c*C$n.y*C$n.y,C$l.ex.y=-C$a*C$e.x*C$e.y-C$c*C$n.x*C$n.y,C$l.ey.x=C$l.ex.y,C$l.ey.y=C$s+C$o+C$a*C$e.x*C$e.x+C$c*C$n.x*C$n.x,C$l.GetInverse(this.m_linearMass),this.m_angularMass=C$a+C$c,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),C$t.step.warmStarting?(this.m_linearImpulse.SelfMul(C$t.step.dtRatio),this.m_angularImpulse*=C$t.step.dtRatio,C$e=this.m_linearImpulse,C$h.SelfMulSub(C$s,C$e),C$i-=C$a*(C$j.CrossVV(this.m_rA,C$e)+this.m_angularImpulse),C$u.SelfMulAdd(C$o,C$e),C$r+=C$c*(C$j.CrossVV(this.m_rB,C$e)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r},C$An.prototype.SolveVelocityConstraints=function(C$t){var C$e=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$h=this.m_invMassA,C$u=this.m_invMassB,C$s=this.m_invIA,C$o=this.m_invIB,C$_=C$t.step.dt,C$a=-this.m_angularMass*(C$r-C$i),C$c=this.m_angularImpulse,C$l=C$_*this.m_maxTorque,C$c=(this.m_angularImpulse=C$O(this.m_angularImpulse+C$a,-C$l,C$l),C$i-=C$s*(C$a=this.m_angularImpulse-C$c),C$j.SubVV(C$j.AddVCrossSV(C$n,C$r+=C$o*C$a,this.m_rB,C$j.s_t0),C$j.AddVCrossSV(C$e,C$i,this.m_rA,C$j.s_t1),C$An.SolveVelocityConstraints_s_Cdot_v2)),C$a=C$k.MulMV(this.m_linearMass,C$c,C$An.SolveVelocityConstraints_s_impulseV).SelfNeg(),C$c=C$An.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse),C$l=(this.m_linearImpulse.SelfAdd(C$a),C$_*this.m_maxForce);this.m_linearImpulse.LengthSquared()>C$l*C$l&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(C$l)),C$j.SubVV(this.m_linearImpulse,C$c,C$a),C$e.SelfMulSub(C$h,C$a),C$i-=C$s*C$j.CrossVV(this.m_rA,C$a),C$n.SelfMulAdd(C$u,C$a),C$r+=C$o*C$j.CrossVV(this.m_rB,C$a),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r},C$An.prototype.SolvePositionConstraints=function(C$t){return!0},C$An.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$An.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$An.prototype.GetReactionForce=function(C$t,C$e){return C$e.x=C$t*this.m_linearImpulse.x,C$e.y=C$t*this.m_linearImpulse.y,C$e},C$An.prototype.GetReactionTorque=function(C$t){return C$t*this.m_angularImpulse},C$An.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$An.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$An.prototype.SetMaxForce=function(C$t){this.m_maxForce=C$t},C$An.prototype.GetMaxForce=function(){return this.m_maxForce},C$An.prototype.SetMaxTorque=function(C$t){this.m_maxTorque=C$t},C$An.prototype.GetMaxTorque=function(){return this.m_maxTorque},C$An.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.maxForce = %.15f;\n",this.m_maxForce),C$t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$An.SolveVelocityConstraints_s_Cdot_v2=new C$j,C$An.SolveVelocityConstraints_s_impulseV=new C$j,C$An.SolveVelocityConstraints_s_oldImpulseV=new C$j;var C$xn,C$bn=C$An;function C$An(C$t){var C$e=C$xn.call(this,C$t)||this;return C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_linearImpulse=new C$j,C$e.m_angularImpulse=0,C$e.m_maxForce=0,C$e.m_maxTorque=0,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_linearMass=new C$k,C$e.m_angularMass=0,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_K=new C$k,C$e.m_localAnchorA.Copy(C$t.localAnchorA),C$e.m_localAnchorB.Copy(C$t.localAnchorB),C$e.m_linearImpulse.SetZero(),C$e.m_maxForce=C$f(C$t.maxForce,0),C$e.m_maxTorque=C$f(C$t.maxTorque,0),C$e.m_linearMass.SetZero(),C$e}C$Vi(C$Tn,C$Cn=C$en);var C$Cn,C$Sn=C$Tn;function C$Tn(){var C$t=C$Cn.call(this,C$H.b2JointType.e_gearJoint)||this;return C$t.ratio=1,C$t}C$Vi(C$Mn,C$wn=C$nn),C$Mn.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var C$e,C$i=C$t.positions[this.m_indexA].a,C$h=C$t.velocities[this.m_indexA].v,C$n=C$t.velocities[this.m_indexA].w,C$r=C$t.positions[this.m_indexB].a,C$u=C$t.velocities[this.m_indexB].v,C$s=C$t.velocities[this.m_indexB].w,C$o=C$t.positions[this.m_indexC].a,C$_=C$t.velocities[this.m_indexC].v,C$a=C$t.velocities[this.m_indexC].w,C$c=C$t.positions[this.m_indexD].a,C$d=C$t.velocities[this.m_indexD].v,C$l=C$t.velocities[this.m_indexD].w,C$i=this.m_qA.SetAngle(C$i),C$r=this.m_qB.SetAngle(C$r),C$o=this.m_qC.SetAngle(C$o),C$c=this.m_qD.SetAngle(C$c);this.m_mass=0,this.m_typeA===C$H.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC):(C$e=C$B.MulRV(C$o,this.m_localAxisC,C$Mn.InitVelocityConstraints_s_u),C$j.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC),C$o=C$B.MulRV(C$o,this.m_lalcC,C$Mn.InitVelocityConstraints_s_rC),C$j.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA),C$i=C$B.MulRV(C$i,this.m_lalcA,C$Mn.InitVelocityConstraints_s_rA),this.m_JvAC.Copy(C$e),this.m_JwC=C$j.CrossVV(C$o,C$e),this.m_JwA=C$j.CrossVV(C$i,C$e),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA),this.m_typeB===C$H.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD)):(C$e=C$B.MulRV(C$c,this.m_localAxisD,C$Mn.InitVelocityConstraints_s_u),C$j.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD),C$o=C$B.MulRV(C$c,this.m_lalcD,C$Mn.InitVelocityConstraints_s_rD),C$j.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB),C$i=C$B.MulRV(C$r,this.m_lalcB,C$Mn.InitVelocityConstraints_s_rB),C$j.MulSV(this.m_ratio,C$e,this.m_JvBD),this.m_JwD=this.m_ratio*C$j.CrossVV(C$o,C$e),this.m_JwB=this.m_ratio*C$j.CrossVV(C$i,C$e),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB),this.m_mass=0<this.m_mass?1/this.m_mass:0,C$t.step.warmStarting?(C$h.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),C$n+=this.m_iA*this.m_impulse*this.m_JwA,C$u.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),C$s+=this.m_iB*this.m_impulse*this.m_JwB,C$_.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),C$a-=this.m_iC*this.m_impulse*this.m_JwC,C$d.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),C$l-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,C$t.velocities[this.m_indexA].w=C$n,C$t.velocities[this.m_indexB].w=C$s,C$t.velocities[this.m_indexC].w=C$a,C$t.velocities[this.m_indexD].w=C$l},C$Mn.prototype.SolveVelocityConstraints=function(C$t){var C$e=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$s=C$t.velocities[this.m_indexC].v,C$o=C$t.velocities[this.m_indexC].w,C$a=C$t.velocities[this.m_indexD].v,C$c=C$t.velocities[this.m_indexD].w,C$l=C$j.DotVV(this.m_JvAC,C$j.SubVV(C$e,C$s,C$j.s_t0))+C$j.DotVV(this.m_JvBD,C$j.SubVV(C$n,C$a,C$j.s_t0)),C$l=(C$l+=this.m_JwA*C$i-this.m_JwC*C$o+(this.m_JwB*C$r-this.m_JwD*C$c),-this.m_mass*C$l);this.m_impulse+=C$l,C$e.SelfMulAdd(this.m_mA*C$l,this.m_JvAC),C$i+=this.m_iA*C$l*this.m_JwA,C$n.SelfMulAdd(this.m_mB*C$l,this.m_JvBD),C$r+=this.m_iB*C$l*this.m_JwB,C$s.SelfMulSub(this.m_mC*C$l,this.m_JvAC),C$o-=this.m_iC*C$l*this.m_JwC,C$a.SelfMulSub(this.m_mD*C$l,this.m_JvBD),C$c-=this.m_iD*C$l*this.m_JwD,C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r,C$t.velocities[this.m_indexC].w=C$o,C$t.velocities[this.m_indexD].w=C$c},C$Mn.prototype.SolvePositionConstraints=function(C$t){var C$e,C$i,C$n,C$r,C$s,C$h=C$t.positions[this.m_indexA].c,C$u=C$t.positions[this.m_indexA].a,C$_=C$t.positions[this.m_indexB].c,C$d=C$t.positions[this.m_indexB].a,C$f=C$t.positions[this.m_indexC].c,C$p=C$t.positions[this.m_indexC].a,C$m=C$t.positions[this.m_indexD].c,C$y=C$t.positions[this.m_indexD].a,C$o=this.m_qA.SetAngle(C$u),C$g=this.m_qB.SetAngle(C$d),C$a=this.m_qC.SetAngle(C$p),C$v=this.m_qD.SetAngle(C$y),C$x=this.m_JvAC,C$b=this.m_JvBD,C$c=0,C$v=(C$o=this.m_typeA===C$H.b2JointType.e_revoluteJoint?(C$x.SetZero(),C$n=C$e=1,C$c+=this.m_iA+this.m_iC,C$u-C$p-this.m_referenceAngleA):(C$s=C$B.MulRV(C$a,this.m_localAxisC,C$Mn.SolvePositionConstraints_s_u),C$l=C$B.MulRV(C$a,this.m_lalcC,C$Mn.SolvePositionConstraints_s_rC),C$o=C$B.MulRV(C$o,this.m_lalcA,C$Mn.SolvePositionConstraints_s_rA),C$x.Copy(C$s),C$n=C$j.CrossVV(C$l,C$s),C$e=C$j.CrossVV(C$o,C$s),C$c+=this.m_mC+this.m_mA+this.m_iC*C$n*C$n+this.m_iA*C$e*C$e,C$l=this.m_lalcC,C$a=C$B.MulTRV(C$a,C$j.AddVV(C$o,C$j.SubVV(C$h,C$f,C$j.s_t0),C$j.s_t0),C$j.s_t0),C$j.DotVV(C$j.SubVV(C$a,C$l,C$j.s_t0),this.m_localAxisC)),C$s=this.m_typeB===C$H.b2JointType.e_revoluteJoint?(C$b.SetZero(),C$i=this.m_ratio,C$r=this.m_ratio,C$c+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),C$d-C$y-this.m_referenceAngleB):(C$s=C$B.MulRV(C$v,this.m_localAxisD,C$Mn.SolvePositionConstraints_s_u),C$a=C$B.MulRV(C$v,this.m_lalcD,C$Mn.SolvePositionConstraints_s_rD),C$l=C$B.MulRV(C$g,this.m_lalcB,C$Mn.SolvePositionConstraints_s_rB),C$j.MulSV(this.m_ratio,C$s,C$b),C$r=this.m_ratio*C$j.CrossVV(C$a,C$s),C$i=this.m_ratio*C$j.CrossVV(C$l,C$s),C$c+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*C$r*C$r+this.m_iB*C$i*C$i,C$g=this.m_lalcD,C$a=C$B.MulTRV(C$v,C$j.AddVV(C$l,C$j.SubVV(C$_,C$m,C$j.s_t0),C$j.s_t0),C$j.s_t0),C$j.DotVV(C$j.SubVV(C$a,C$g,C$j.s_t0),this.m_localAxisD)),C$o+this.m_ratio*C$s-this.m_constant),C$l=0<C$c?-C$v/C$c:0;return C$h.SelfMulAdd(this.m_mA*C$l,C$x),C$u+=this.m_iA*C$l*C$e,C$_.SelfMulAdd(this.m_mB*C$l,C$b),C$d+=this.m_iB*C$l*C$i,C$f.SelfMulSub(this.m_mC*C$l,C$x),C$p-=this.m_iC*C$l*C$n,C$m.SelfMulSub(this.m_mD*C$l,C$b),C$y-=this.m_iD*C$l*C$r,C$t.positions[this.m_indexA].a=C$u,C$t.positions[this.m_indexB].a=C$d,C$t.positions[this.m_indexC].a=C$p,C$t.positions[this.m_indexD].a=C$y,!0},C$Mn.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$Mn.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$Mn.prototype.GetReactionForce=function(C$t,C$e){return C$j.MulSV(C$t*this.m_impulse,this.m_JvAC,C$e)},C$Mn.prototype.GetReactionTorque=function(C$t){return C$t*this.m_impulse*this.m_JwA},C$Mn.prototype.GetJoint1=function(){return this.m_joint1},C$Mn.prototype.GetJoint2=function(){return this.m_joint2},C$Mn.prototype.GetRatio=function(){return this.m_ratio},C$Mn.prototype.SetRatio=function(C$t){this.m_ratio=C$t},C$Mn.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex,C$n=this.m_joint1.m_index,C$r=this.m_joint2.m_index;C$t("  const jd: b2GearJointDef = new b2GearJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.joint1 = joints[%d];\n",C$n),C$t("  jd.joint2 = joints[%d];\n",C$r),C$t("  jd.ratio = %.15f;\n",this.m_ratio),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$Mn.InitVelocityConstraints_s_u=new C$j,C$Mn.InitVelocityConstraints_s_rA=new C$j,C$Mn.InitVelocityConstraints_s_rB=new C$j,C$Mn.InitVelocityConstraints_s_rC=new C$j,C$Mn.InitVelocityConstraints_s_rD=new C$j,C$Mn.SolvePositionConstraints_s_u=new C$j,C$Mn.SolvePositionConstraints_s_rA=new C$j,C$Mn.SolvePositionConstraints_s_rB=new C$j,C$Mn.SolvePositionConstraints_s_rC=new C$j,C$Mn.SolvePositionConstraints_s_rD=new C$j;var C$wn,C$En=C$Mn;function C$Mn(C$t){var C$e,C$i,C$n=C$wn.call(this,C$t)||this,C$r=(C$n.m_typeA=C$H.b2JointType.e_unknownJoint,C$n.m_typeB=C$H.b2JointType.e_unknownJoint,C$n.m_localAnchorA=new C$j,C$n.m_localAnchorB=new C$j,C$n.m_localAnchorC=new C$j,C$n.m_localAnchorD=new C$j,C$n.m_localAxisC=new C$j,C$n.m_localAxisD=new C$j,C$n.m_referenceAngleA=0,C$n.m_referenceAngleB=0,C$n.m_constant=0,C$n.m_ratio=0,C$n.m_impulse=0,C$n.m_indexA=0,C$n.m_indexB=0,C$n.m_indexC=0,C$n.m_indexD=0,C$n.m_lcA=new C$j,C$n.m_lcB=new C$j,C$n.m_lcC=new C$j,C$n.m_lcD=new C$j,C$n.m_mA=0,C$n.m_mB=0,C$n.m_mC=0,C$n.m_mD=0,C$n.m_iA=0,C$n.m_iB=0,C$n.m_iC=0,C$n.m_iD=0,C$n.m_JvAC=new C$j,C$n.m_JvBD=new C$j,C$n.m_JwA=0,C$n.m_JwB=0,C$n.m_JwC=0,C$n.m_JwD=0,C$n.m_mass=0,C$n.m_qA=new C$B,C$n.m_qB=new C$B,C$n.m_qC=new C$B,C$n.m_qD=new C$B,C$n.m_lalcA=new C$j,C$n.m_lalcB=new C$j,C$n.m_lalcC=new C$j,C$n.m_lalcD=new C$j,C$n.m_joint1=C$t.joint1,C$n.m_joint2=C$t.joint2,C$n.m_typeA=C$n.m_joint1.GetType(),C$n.m_typeB=C$n.m_joint2.GetType(),C$n.m_bodyC=C$n.m_joint1.GetBodyA(),C$n.m_bodyA=C$n.m_joint1.GetBodyB(),C$n.m_bodyA.m_xf),C$s=C$n.m_bodyA.m_sweep.a,C$o=C$n.m_bodyC.m_xf,C$a=C$n.m_bodyC.m_sweep.a,C$o=(C$r=C$n.m_typeA===C$H.b2JointType.e_revoluteJoint?(C$i=C$t.joint1,C$n.m_localAnchorC.Copy(C$i.m_localAnchorA),C$n.m_localAnchorA.Copy(C$i.m_localAnchorB),C$n.m_referenceAngleA=C$i.m_referenceAngle,C$n.m_localAxisC.SetZero(),C$s-C$a-C$n.m_referenceAngleA):(C$e=C$t.joint1,C$n.m_localAnchorC.Copy(C$e.m_localAnchorA),C$n.m_localAnchorA.Copy(C$e.m_localAnchorB),C$n.m_referenceAngleA=C$e.m_referenceAngle,C$n.m_localAxisC.Copy(C$e.m_localXAxisA),C$s=C$n.m_localAnchorC,C$a=C$B.MulTRV(C$o.q,C$j.AddVV(C$B.MulRV(C$r.q,C$n.m_localAnchorA,C$j.s_t0),C$j.SubVV(C$r.p,C$o.p,C$j.s_t1),C$j.s_t0),C$j.s_t0),C$j.DotVV(C$j.SubVV(C$a,C$s,C$j.s_t0),C$n.m_localAxisC)),C$n.m_bodyD=C$n.m_joint2.GetBodyA(),C$n.m_bodyB=C$n.m_joint2.GetBodyB(),C$n.m_bodyB.m_xf),C$a=C$n.m_bodyB.m_sweep.a,C$s=C$n.m_bodyD.m_xf,C$c=C$n.m_bodyD.m_sweep.a;return C$c=C$n.m_typeB===C$H.b2JointType.e_revoluteJoint?(C$i=C$t.joint2,C$n.m_localAnchorD.Copy(C$i.m_localAnchorA),C$n.m_localAnchorB.Copy(C$i.m_localAnchorB),C$n.m_referenceAngleB=C$i.m_referenceAngle,C$n.m_localAxisD.SetZero(),C$a-C$c-C$n.m_referenceAngleB):(C$e=C$t.joint2,C$n.m_localAnchorD.Copy(C$e.m_localAnchorA),C$n.m_localAnchorB.Copy(C$e.m_localAnchorB),C$n.m_referenceAngleB=C$e.m_referenceAngle,C$n.m_localAxisD.Copy(C$e.m_localXAxisA),C$i=C$n.m_localAnchorD,C$a=C$B.MulTRV(C$s.q,C$j.AddVV(C$B.MulRV(C$o.q,C$n.m_localAnchorB,C$j.s_t0),C$j.SubVV(C$o.p,C$s.p,C$j.s_t1),C$j.s_t0),C$j.s_t0),C$j.DotVV(C$j.SubVV(C$a,C$i,C$j.s_t0),C$n.m_localAxisD)),C$n.m_ratio=C$f(C$t.ratio,1),C$n.m_constant=C$r+C$n.m_ratio*C$c,C$n.m_impulse=0,C$n}C$Vi(C$Rn,C$In=C$en),C$Rn.prototype.Initialize=function(C$t,C$e){this.bodyA=C$t,this.bodyB=C$e,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);C$t=this.bodyA.GetAngle(),C$e=this.bodyB.GetAngle();this.angularOffset=C$e-C$t};var C$In,C$Bn=C$Rn;function C$Rn(){var C$t=C$In.call(this,C$H.b2JointType.e_motorJoint)||this;return C$t.linearOffset=new C$j(0,0),C$t.angularOffset=0,C$t.maxForce=1,C$t.maxTorque=1,C$t.correctionFactor=.3,C$t}C$Vi(C$Ln,C$Pn=C$nn),C$Ln.prototype.GetAnchorA=function(C$t){var C$e=this.m_bodyA.GetPosition();return C$t.x=C$e.x,C$t.y=C$e.y,C$t},C$Ln.prototype.GetAnchorB=function(C$t){var C$e=this.m_bodyB.GetPosition();return C$t.x=C$e.x,C$t.y=C$e.y,C$t},C$Ln.prototype.GetReactionForce=function(C$t,C$e){return C$j.MulSV(C$t,this.m_linearImpulse,C$e)},C$Ln.prototype.GetReactionTorque=function(C$t){return C$t*this.m_angularImpulse},C$Ln.prototype.SetLinearOffset=function(C$t){C$j.IsEqualToV(C$t,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(C$t))},C$Ln.prototype.GetLinearOffset=function(){return this.m_linearOffset},C$Ln.prototype.SetAngularOffset=function(C$t){C$t!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=C$t)},C$Ln.prototype.GetAngularOffset=function(){return this.m_angularOffset},C$Ln.prototype.SetMaxForce=function(C$t){this.m_maxForce=C$t},C$Ln.prototype.GetMaxForce=function(){return this.m_maxForce},C$Ln.prototype.SetMaxTorque=function(C$t){this.m_maxTorque=C$t},C$Ln.prototype.GetMaxTorque=function(){return this.m_maxTorque},C$Ln.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$h=C$t.positions[this.m_indexA].c,C$e=C$t.positions[this.m_indexA].a,C$u=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$_=C$t.positions[this.m_indexB].c,C$d=C$t.positions[this.m_indexB].a,C$f=C$t.velocities[this.m_indexB].v,C$p=C$t.velocities[this.m_indexB].w,C$n=this.m_qA.SetAngle(C$e),C$r=this.m_qB.SetAngle(C$d),C$n=C$B.MulRV(C$n,C$j.SubVV(this.m_linearOffset,this.m_localCenterA,C$j.s_t0),this.m_rA),C$r=C$B.MulRV(C$r,C$j.NegV(this.m_localCenterB,C$j.s_t0),this.m_rB),C$s=this.m_invMassA,C$o=this.m_invMassB,C$a=this.m_invIA,C$c=this.m_invIB,C$l=this.m_K;C$l.ex.x=C$s+C$o+C$a*C$n.y*C$n.y+C$c*C$r.y*C$r.y,C$l.ex.y=-C$a*C$n.x*C$n.y-C$c*C$r.x*C$r.y,C$l.ey.x=C$l.ex.y,C$l.ey.y=C$s+C$o+C$a*C$n.x*C$n.x+C$c*C$r.x*C$r.x,C$l.GetInverse(this.m_linearMass),this.m_angularMass=C$a+C$c,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),C$j.SubVV(C$j.AddVV(C$_,C$r,C$j.s_t0),C$j.AddVV(C$h,C$n,C$j.s_t1),this.m_linearError),this.m_angularError=C$d-C$e-this.m_angularOffset,C$t.step.warmStarting?(this.m_linearImpulse.SelfMul(C$t.step.dtRatio),this.m_angularImpulse*=C$t.step.dtRatio,C$l=this.m_linearImpulse,C$u.SelfMulSub(C$s,C$l),C$i-=C$a*(C$j.CrossVV(C$n,C$l)+this.m_angularImpulse),C$f.SelfMulAdd(C$o,C$l),C$p+=C$c*(C$j.CrossVV(C$r,C$l)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$p},C$Ln.prototype.SolveVelocityConstraints=function(C$t){var C$e=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$h=this.m_invMassA,C$u=this.m_invMassB,C$s=this.m_invIA,C$_=this.m_invIB,C$d=C$t.step.dt,C$o=C$t.step.inv_dt,C$a=C$r-C$i+C$o*this.m_correctionFactor*this.m_angularError,C$a=-this.m_angularMass*C$a,C$c=this.m_angularImpulse,C$l=C$d*this.m_maxTorque,C$c=(this.m_angularImpulse=C$O(this.m_angularImpulse+C$a,-C$l,C$l),C$i-=C$s*(C$a=this.m_angularImpulse-C$c),this.m_rA),C$f=this.m_rB,C$a=C$j.AddVV(C$j.SubVV(C$j.AddVV(C$n,C$j.CrossSV(C$r+=C$_*C$a,C$f,C$j.s_t0),C$j.s_t0),C$j.AddVV(C$e,C$j.CrossSV(C$i,C$c,C$j.s_t1),C$j.s_t1),C$j.s_t2),C$j.MulSV(C$o*this.m_correctionFactor,this.m_linearError,C$j.s_t3),C$Ln.SolveVelocityConstraints_s_Cdot_v2),C$o=C$k.MulMV(this.m_linearMass,C$a,C$Ln.SolveVelocityConstraints_s_impulse_v2).SelfNeg(),C$a=C$Ln.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse),C$l=(this.m_linearImpulse.SelfAdd(C$o),C$d*this.m_maxForce);this.m_linearImpulse.LengthSquared()>C$l*C$l&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(C$l)),C$j.SubVV(this.m_linearImpulse,C$a,C$o),C$e.SelfMulSub(C$h,C$o),C$i-=C$s*C$j.CrossVV(C$c,C$o),C$n.SelfMulAdd(C$u,C$o),C$r+=C$_*C$j.CrossVV(C$f,C$o),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r},C$Ln.prototype.SolvePositionConstraints=function(C$t){return!0},C$Ln.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),C$t("  jd.angularOffset = %.15f;\n",this.m_angularOffset),C$t("  jd.maxForce = %.15f;\n",this.m_maxForce),C$t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),C$t("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$Ln.SolveVelocityConstraints_s_Cdot_v2=new C$j,C$Ln.SolveVelocityConstraints_s_impulse_v2=new C$j,C$Ln.SolveVelocityConstraints_s_oldImpulse_v2=new C$j;var C$Pn,C$Dn=C$Ln;function C$Ln(C$t){var C$e=C$Pn.call(this,C$t)||this;return C$e.m_linearOffset=new C$j,C$e.m_angularOffset=0,C$e.m_linearImpulse=new C$j,C$e.m_angularImpulse=0,C$e.m_maxForce=0,C$e.m_maxTorque=0,C$e.m_correctionFactor=.3,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_linearError=new C$j,C$e.m_angularError=0,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_linearMass=new C$k,C$e.m_angularMass=0,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_K=new C$k,C$e.m_linearOffset.Copy(C$f(C$t.linearOffset,C$j.ZERO)),C$e.m_linearImpulse.SetZero(),C$e.m_maxForce=C$f(C$t.maxForce,0),C$e.m_maxTorque=C$f(C$t.maxTorque,0),C$e.m_correctionFactor=C$f(C$t.correctionFactor,.3),C$e}C$Vi(C$Fn,C$Vn=C$en);var C$Vn,C$On=C$Fn;function C$Fn(){var C$t=C$Vn.call(this,C$H.b2JointType.e_mouseJoint)||this;return C$t.target=new C$j,C$t.maxForce=0,C$t.frequencyHz=5,C$t.dampingRatio=.7,C$t}C$Vi(C$Gn,C$Nn=C$nn),C$Gn.prototype.SetTarget=function(C$t){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(C$t)},C$Gn.prototype.GetTarget=function(){return this.m_targetA},C$Gn.prototype.SetMaxForce=function(C$t){this.m_maxForce=C$t},C$Gn.prototype.GetMaxForce=function(){return this.m_maxForce},C$Gn.prototype.SetFrequency=function(C$t){this.m_frequencyHz=C$t},C$Gn.prototype.GetFrequency=function(){return this.m_frequencyHz},C$Gn.prototype.SetDampingRatio=function(C$t){this.m_dampingRatio=C$t},C$Gn.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$Gn.prototype.InitVelocityConstraints=function(C$t){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var C$e=C$t.positions[this.m_indexB].c,C$i=C$t.positions[this.m_indexB].a,C$n=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$i=this.m_qB.SetAngle(C$i),C$s=this.m_bodyB.GetMass(),C$o=2*C$m*this.m_frequencyHz,C$a=2*C$s*this.m_dampingRatio*C$o,C$s=C$s*(C$o*C$o),C$o=C$t.step.dt,C$a=(this.m_gamma=C$o*(C$a+C$o*C$s),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=C$o*C$s*this.m_gamma,C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$i,this.m_lalcB,this.m_rB),this.m_K);C$a.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,C$a.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,C$a.ey.x=C$a.ex.y,C$a.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,C$a.GetInverse(this.m_mass),this.m_C.x=C$e.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=C$e.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),C$r*=.98,C$t.step.warmStarting?(this.m_impulse.SelfMul(C$t.step.dtRatio),C$n.x+=this.m_invMassB*this.m_impulse.x,C$n.y+=this.m_invMassB*this.m_impulse.y,C$r+=this.m_invIB*C$j.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),C$t.velocities[this.m_indexB].w=C$r},C$Gn.prototype.SolveVelocityConstraints=function(C$t){var C$e=C$t.velocities[this.m_indexB].v,C$i=C$t.velocities[this.m_indexB].w,C$n=C$j.AddVCrossSV(C$e,C$i,this.m_rB,C$Gn.SolveVelocityConstraints_s_Cdot),C$n=C$k.MulMV(this.m_mass,C$j.AddVV(C$n,C$j.AddVV(this.m_C,C$j.MulSV(this.m_gamma,this.m_impulse,C$j.s_t0),C$j.s_t0),C$j.s_t0).SelfNeg(),C$Gn.SolveVelocityConstraints_s_impulse),C$r=C$Gn.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse),C$s=(this.m_impulse.SelfAdd(C$n),C$t.step.dt*this.m_maxForce);this.m_impulse.LengthSquared()>C$s*C$s&&this.m_impulse.SelfMul(C$s/this.m_impulse.Length()),C$j.SubVV(this.m_impulse,C$r,C$n),C$e.SelfMulAdd(this.m_invMassB,C$n),C$i+=this.m_invIB*C$j.CrossVV(this.m_rB,C$n),C$t.velocities[this.m_indexB].w=C$i},C$Gn.prototype.SolvePositionConstraints=function(C$t){return!0},C$Gn.prototype.GetAnchorA=function(C$t){return C$t.x=this.m_targetA.x,C$t.y=this.m_targetA.y,C$t},C$Gn.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$Gn.prototype.GetReactionForce=function(C$t,C$e){return C$j.MulSV(C$t,this.m_impulse,C$e)},C$Gn.prototype.GetReactionTorque=function(C$t){return 0},C$Gn.prototype.Dump=function(C$t){C$t("Mouse joint dumping is not supported.\n")},C$Gn.prototype.ShiftOrigin=function(C$t){this.m_targetA.SelfSub(C$t)},C$Gn.SolveVelocityConstraints_s_Cdot=new C$j,C$Gn.SolveVelocityConstraints_s_impulse=new C$j,C$Gn.SolveVelocityConstraints_s_oldImpulse=new C$j;var C$Nn,C$kn=C$Gn;function C$Gn(C$t){var C$e=C$Nn.call(this,C$t)||this;return C$e.m_localAnchorB=new C$j,C$e.m_targetA=new C$j,C$e.m_frequencyHz=0,C$e.m_dampingRatio=0,C$e.m_beta=0,C$e.m_impulse=new C$j,C$e.m_maxForce=0,C$e.m_gamma=0,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_rB=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassB=0,C$e.m_invIB=0,C$e.m_mass=new C$k,C$e.m_C=new C$j,C$e.m_qB=new C$B,C$e.m_lalcB=new C$j,C$e.m_K=new C$k,C$e.m_targetA.Copy(C$f(C$t.target,C$j.ZERO)),C$R.MulTXV(C$e.m_bodyB.GetTransform(),C$e.m_targetA,C$e.m_localAnchorB),C$e.m_maxForce=C$f(C$t.maxForce,0),C$e.m_impulse.SetZero(),C$e.m_frequencyHz=C$f(C$t.frequencyHz,0),C$e.m_dampingRatio=C$f(C$t.dampingRatio,0),C$e.m_beta=0,C$e.m_gamma=0,C$e}C$Vi(C$Wn,C$zn=C$en),C$Wn.prototype.Initialize=function(C$t,C$e,C$i,C$n){this.bodyA=C$t,this.bodyB=C$e,this.bodyA.GetLocalPoint(C$i,this.localAnchorA),this.bodyB.GetLocalPoint(C$i,this.localAnchorB),this.bodyA.GetLocalVector(C$n,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$zn,C$Un=C$Wn;function C$Wn(){var C$t=C$zn.call(this,C$H.b2JointType.e_prismaticJoint)||this;return C$t.localAnchorA=new C$j,C$t.localAnchorB=new C$j,C$t.localAxisA=new C$j(1,0),C$t.referenceAngle=0,C$t.enableLimit=!1,C$t.lowerTranslation=0,C$t.upperTranslation=0,C$t.enableMotor=!1,C$t.maxMotorForce=0,C$t.motorSpeed=0,C$t}C$Vi(C$Xn,C$Hn=C$nn),C$Xn.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e=C$t.positions[this.m_indexA].c,C$i=C$t.positions[this.m_indexA].a,C$h=C$t.velocities[this.m_indexA].v,C$n=C$t.velocities[this.m_indexA].w,C$r=C$t.positions[this.m_indexB].c,C$s=C$t.positions[this.m_indexB].a,C$u=C$t.velocities[this.m_indexB].v,C$_=C$t.velocities[this.m_indexB].w,C$i=this.m_qA.SetAngle(C$i),C$s=this.m_qB.SetAngle(C$s),C$o=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$i,this.m_lalcA,this.m_rA)),C$s=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$s,this.m_lalcB,this.m_rB)),C$r=C$j.AddVV(C$j.SubVV(C$r,C$e,C$j.s_t0),C$j.SubVV(C$s,C$o,C$j.s_t1),C$Xn.InitVelocityConstraints_s_d),C$e=this.m_invMassA,C$a=this.m_invMassB,C$c=this.m_invIA,C$l=this.m_invIB;C$B.MulRV(C$i,this.m_localXAxisA,this.m_axis),this.m_a1=C$j.CrossVV(C$j.AddVV(C$r,C$o,C$j.s_t0),this.m_axis),this.m_a2=C$j.CrossVV(C$s,this.m_axis),this.m_motorMass=C$e+C$a+C$c*this.m_a1*this.m_a1+C$l*this.m_a2*this.m_a2,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),C$B.MulRV(C$i,this.m_localYAxisA,this.m_perp),this.m_s1=C$j.CrossVV(C$j.AddVV(C$r,C$o,C$j.s_t0),this.m_perp),this.m_s2=C$j.CrossVV(C$s,this.m_perp),this.m_K.ex.x=C$e+C$a+C$c*this.m_s1*this.m_s1+C$l*this.m_s2*this.m_s2,this.m_K.ex.y=C$c*this.m_s1+C$l*this.m_s2,this.m_K.ex.z=C$c*this.m_s1*this.m_a1+C$l*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=C$c+C$l,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=C$c*this.m_a1+C$l*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=C$e+C$a+C$c*this.m_a1*this.m_a1+C$l*this.m_a2*this.m_a2,this.m_enableLimit?(C$i=C$j.DotVV(this.m_axis,C$r),C$D(this.m_upperTranslation-this.m_lowerTranslation)<.016?this.m_limitState=C$H.b2LimitState.e_equalLimits:C$i<=this.m_lowerTranslation?this.m_limitState!==C$H.b2LimitState.e_atLowerLimit&&(this.m_limitState=C$H.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):C$i>=this.m_upperTranslation?this.m_limitState!==C$H.b2LimitState.e_atUpperLimit&&(this.m_limitState=C$H.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=C$H.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=C$H.b2LimitState.e_inactiveLimit,this.m_impulse.z=0),this.m_enableMotor||(this.m_motorImpulse=0),C$t.step.warmStarting?(this.m_impulse.SelfMul(C$t.step.dtRatio),this.m_motorImpulse*=C$t.step.dtRatio,C$o=C$j.AddVV(C$j.MulSV(this.m_impulse.x,this.m_perp,C$j.s_t0),C$j.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,C$j.s_t1),C$Xn.InitVelocityConstraints_s_P),C$s=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,C$r=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,C$h.SelfMulSub(C$e,C$o),C$n-=C$c*C$s,C$u.SelfMulAdd(C$a,C$o),C$_+=C$l*C$r):(this.m_impulse.SetZero(),this.m_motorImpulse=0),C$t.velocities[this.m_indexA].w=C$n,C$t.velocities[this.m_indexB].w=C$_},C$Xn.prototype.SolveVelocityConstraints=function(C$t){var C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$h=C$t.velocities[this.m_indexA].v,C$c=C$t.velocities[this.m_indexA].w,C$u=C$t.velocities[this.m_indexB].v,C$l=C$t.velocities[this.m_indexB].w,C$_=this.m_invMassA,C$d=this.m_invMassB,C$f=this.m_invIA,C$p=this.m_invIB,C$m=(this.m_enableMotor&&this.m_limitState!==C$H.b2LimitState.e_equalLimits&&(C$a=C$j.DotVV(this.m_axis,C$j.SubVV(C$u,C$h,C$j.s_t0))+this.m_a2*C$l-this.m_a1*C$c,C$a=this.m_motorMass*(this.m_motorSpeed-C$a),C$o=this.m_motorImpulse,C$s=C$t.step.dt*this.m_maxMotorForce,this.m_motorImpulse=C$O(this.m_motorImpulse+C$a,-C$s,C$s),C$a=this.m_motorImpulse-C$o,C$s=C$j.MulSV(C$a,this.m_axis,C$Xn.SolveVelocityConstraints_s_P),C$o=C$a*this.m_a1,C$a=C$a*this.m_a2,C$h.SelfMulSub(C$_,C$s),C$c-=C$f*C$o,C$u.SelfMulAdd(C$d,C$s),C$l+=C$p*C$a),C$j.DotVV(this.m_perp,C$j.SubVV(C$u,C$h,C$j.s_t0))+this.m_s2*C$l-this.m_s1*C$c),C$y=C$l-C$c;C$a=this.m_enableLimit&&this.m_limitState!==C$H.b2LimitState.e_inactiveLimit?(C$i=C$j.DotVV(this.m_axis,C$j.SubVV(C$u,C$h,C$j.s_t0))+this.m_a2*C$l-this.m_a1*C$c,C$e=C$Xn.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),C$i=this.m_K.Solve33(-C$m,-C$y,-C$i,C$Xn.SolveVelocityConstraints_s_df3),this.m_impulse.SelfAdd(C$i),this.m_limitState===C$H.b2LimitState.e_atLowerLimit?this.m_impulse.z=C$V(this.m_impulse.z,0):this.m_limitState===C$H.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=C$L(this.m_impulse.z,0)),C$n=-C$m-(this.m_impulse.z-C$e.z)*this.m_K.ez.x,C$r=-C$y-(this.m_impulse.z-C$e.z)*this.m_K.ez.y,(C$n=this.m_K.Solve22(C$n,C$r,C$Xn.SolveVelocityConstraints_s_f2r)).x+=C$e.x,C$n.y+=C$e.y,this.m_impulse.x=C$n.x,this.m_impulse.y=C$n.y,C$i.x=this.m_impulse.x-C$e.x,C$i.y=this.m_impulse.y-C$e.y,C$i.z=this.m_impulse.z-C$e.z,C$s=C$j.AddVV(C$j.MulSV(C$i.x,this.m_perp,C$j.s_t0),C$j.MulSV(C$i.z,this.m_axis,C$j.s_t1),C$Xn.SolveVelocityConstraints_s_P),C$o=C$i.x*this.m_s1+C$i.y+C$i.z*this.m_a1,C$i.x*this.m_s2+C$i.y+C$i.z*this.m_a2):(C$r=this.m_K.Solve22(-C$m,-C$y,C$Xn.SolveVelocityConstraints_s_df2),this.m_impulse.x+=C$r.x,this.m_impulse.y+=C$r.y,C$s=C$j.MulSV(C$r.x,this.m_perp,C$Xn.SolveVelocityConstraints_s_P),C$o=C$r.x*this.m_s1+C$r.y,C$r.x*this.m_s2+C$r.y),C$h.SelfMulSub(C$_,C$s),C$c-=C$f*C$o,C$u.SelfMulAdd(C$d,C$s),C$l+=C$p*C$a,C$t.velocities[this.m_indexA].w=C$c,C$t.velocities[this.m_indexB].w=C$l},C$Xn.prototype.SolvePositionConstraints=function(C$t){var C$h,C$u,C$_,C$d=C$t.positions[this.m_indexA].c,C$f=C$t.positions[this.m_indexA].a,C$p=C$t.positions[this.m_indexB].c,C$m=C$t.positions[this.m_indexB].a,C$e=this.m_qA.SetAngle(C$f),C$i=this.m_qB.SetAngle(C$m),C$y=this.m_invMassA,C$g=this.m_invMassB,C$n=this.m_invIA,C$r=this.m_invIB,C$s=C$B.MulRV(C$e,this.m_lalcA,this.m_rA),C$i=C$B.MulRV(C$i,this.m_lalcB,this.m_rB),C$o=C$j.SubVV(C$j.AddVV(C$p,C$i,C$j.s_t0),C$j.AddVV(C$d,C$s,C$j.s_t1),C$Xn.SolvePositionConstraints_s_d),C$v=C$B.MulRV(C$e,this.m_localXAxisA,this.m_axis),C$x=C$j.CrossVV(C$j.AddVV(C$o,C$s,C$j.s_t0),C$v),C$b=C$j.CrossVV(C$i,C$v),C$e=C$B.MulRV(C$e,this.m_localYAxisA,this.m_perp),C$s=C$j.CrossVV(C$j.AddVV(C$o,C$s,C$j.s_t0),C$e),C$i=C$j.CrossVV(C$i,C$e),C$a=C$Xn.SolvePositionConstraints_s_impulse,C$A=C$j.DotVV(C$e,C$o),C$C=C$m-C$f-this.m_referenceAngle,C$c=C$D(C$A),C$S=C$D(C$C),C$l=!1,C$T=0,C$l=(this.m_enableLimit&&(C$o=C$j.DotVV(C$v,C$o),C$D(this.m_upperTranslation-this.m_lowerTranslation)<.016?(C$T=C$O(C$o,-.2,.2),C$c=C$V(C$c,C$D(C$o)),C$l=!0):C$o<=this.m_lowerTranslation?(C$T=C$O(C$o-this.m_lowerTranslation+.008,-.2,0),C$c=C$V(C$c,this.m_lowerTranslation-C$o),C$l=!0):C$o>=this.m_upperTranslation&&(C$T=C$O(C$o-this.m_upperTranslation-.008,0,.2),C$c=C$V(C$c,C$o-this.m_upperTranslation),C$l=!0)),C$l?(0===(C$u=C$n+C$r)&&(C$u=1),C$o=C$n*C$x+C$r*C$b,C$l=C$y+C$g+C$n*C$x*C$x+C$r*C$b*C$b,(C$w=this.m_K3).ex.SetXYZ(C$y+C$g+C$n*C$s*C$s+C$r*C$i*C$i,C$h=C$n*C$s+C$r*C$i,C$_=C$n*C$s*C$x+C$r*C$i*C$b),C$w.ey.SetXYZ(C$h,C$u,C$o),C$w.ez.SetXYZ(C$_,C$o,C$l),C$a=C$w.Solve33(-C$A,-C$C,-C$T,C$a)):(0===(C$u=C$n+C$r)&&(C$u=1),(C$_=this.m_K2).ex.Set(C$y+C$g+C$n*C$s*C$s+C$r*C$i*C$i,C$h=C$n*C$s+C$r*C$i),C$_.ey.Set(C$h,C$u),C$o=C$_.Solve(-C$A,-C$C,C$Xn.SolvePositionConstraints_s_impulse1),C$a.x=C$o.x,C$a.y=C$o.y,C$a.z=0),C$j.AddVV(C$j.MulSV(C$a.x,C$e,C$j.s_t0),C$j.MulSV(C$a.z,C$v,C$j.s_t1),C$Xn.SolvePositionConstraints_s_P)),C$w=C$a.x*C$s+C$a.y+C$a.z*C$x,C$T=C$a.x*C$i+C$a.y+C$a.z*C$b;return C$d.SelfMulSub(C$y,C$l),C$f-=C$n*C$w,C$p.SelfMulAdd(C$g,C$l),C$m+=C$r*C$T,C$t.positions[this.m_indexA].a=C$f,C$t.positions[this.m_indexB].a=C$m,C$c<=.008&&C$S<=C$I},C$Xn.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$Xn.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$Xn.prototype.GetReactionForce=function(C$t,C$e){return C$e.x=C$t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),C$e.y=C$t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y),C$e},C$Xn.prototype.GetReactionTorque=function(C$t){return C$t*this.m_impulse.y},C$Xn.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$Xn.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$Xn.prototype.GetLocalAxisA=function(){return this.m_localXAxisA},C$Xn.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},C$Xn.prototype.GetJointTranslation=function(){var C$t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$Xn.GetJointTranslation_s_pA),C$e=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$Xn.GetJointTranslation_s_pB),C$e=C$j.SubVV(C$e,C$t,C$Xn.GetJointTranslation_s_d),C$t=this.m_bodyA.GetWorldVector(this.m_localXAxisA,C$Xn.GetJointTranslation_s_axis);return C$j.DotVV(C$e,C$t)},C$Xn.prototype.GetJointSpeed=function(){var C$t=this.m_bodyA,C$e=this.m_bodyB,C$i=(C$j.SubVV(this.m_localAnchorA,C$t.m_sweep.localCenter,this.m_lalcA),C$B.MulRV(C$t.m_xf.q,this.m_lalcA,this.m_rA)),C$n=(C$j.SubVV(this.m_localAnchorB,C$e.m_sweep.localCenter,this.m_lalcB),C$B.MulRV(C$e.m_xf.q,this.m_lalcB,this.m_rB)),C$r=C$j.AddVV(C$t.m_sweep.c,C$i,C$j.s_t0),C$s=C$j.AddVV(C$e.m_sweep.c,C$n,C$j.s_t1),C$s=C$j.SubVV(C$s,C$r,C$j.s_t2),C$r=C$t.GetWorldVector(this.m_localXAxisA,this.m_axis),C$o=C$t.m_linearVelocity,C$a=C$e.m_linearVelocity,C$t=C$t.m_angularVelocity,C$e=C$e.m_angularVelocity;return C$j.DotVV(C$s,C$j.CrossSV(C$t,C$r,C$j.s_t0))+C$j.DotVV(C$r,C$j.SubVV(C$j.AddVCrossSV(C$a,C$e,C$n,C$j.s_t0),C$j.AddVCrossSV(C$o,C$t,C$i,C$j.s_t1),C$j.s_t0))},C$Xn.prototype.IsLimitEnabled=function(){return this.m_enableLimit},C$Xn.prototype.EnableLimit=function(C$t){C$t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=C$t,this.m_impulse.z=0)},C$Xn.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},C$Xn.prototype.GetUpperLimit=function(){return this.m_upperTranslation},C$Xn.prototype.SetLimits=function(C$t,C$e){C$t===this.m_lowerTranslation&&C$e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=C$t,this.m_upperTranslation=C$e,this.m_impulse.z=0)},C$Xn.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C$Xn.prototype.EnableMotor=function(C$t){C$t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$t)},C$Xn.prototype.SetMotorSpeed=function(C$t){C$t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$t)},C$Xn.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C$Xn.prototype.SetMaxMotorForce=function(C$t){C$t!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=C$t)},C$Xn.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},C$Xn.prototype.GetMotorForce=function(C$t){return C$t*this.m_motorImpulse},C$Xn.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),C$t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),C$t("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),C$t("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),C$t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$t("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$Xn.InitVelocityConstraints_s_d=new C$j,C$Xn.InitVelocityConstraints_s_P=new C$j,C$Xn.SolveVelocityConstraints_s_P=new C$j,C$Xn.SolveVelocityConstraints_s_f2r=new C$j,C$Xn.SolveVelocityConstraints_s_f1=new C$F,C$Xn.SolveVelocityConstraints_s_df3=new C$F,C$Xn.SolveVelocityConstraints_s_df2=new C$j,C$Xn.SolvePositionConstraints_s_d=new C$j,C$Xn.SolvePositionConstraints_s_impulse=new C$F,C$Xn.SolvePositionConstraints_s_impulse1=new C$j,C$Xn.SolvePositionConstraints_s_P=new C$j,C$Xn.GetJointTranslation_s_pA=new C$j,C$Xn.GetJointTranslation_s_pB=new C$j,C$Xn.GetJointTranslation_s_d=new C$j,C$Xn.GetJointTranslation_s_axis=new C$j;var C$Hn,C$jn=C$Xn;function C$Xn(C$t){var C$e=C$Hn.call(this,C$t)||this;return C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_localXAxisA=new C$j,C$e.m_localYAxisA=new C$j,C$e.m_referenceAngle=0,C$e.m_impulse=new C$F(0,0,0),C$e.m_motorImpulse=0,C$e.m_lowerTranslation=0,C$e.m_upperTranslation=0,C$e.m_maxMotorForce=0,C$e.m_motorSpeed=0,C$e.m_enableLimit=!1,C$e.m_enableMotor=!1,C$e.m_limitState=C$H.b2LimitState.e_inactiveLimit,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_axis=new C$j(0,0),C$e.m_perp=new C$j(0,0),C$e.m_s1=0,C$e.m_s2=0,C$e.m_a1=0,C$e.m_a2=0,C$e.m_K=new C$z,C$e.m_K3=new C$z,C$e.m_K2=new C$k,C$e.m_motorMass=0,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localAnchorA.Copy(C$f(C$t.localAnchorA,C$j.ZERO)),C$e.m_localAnchorB.Copy(C$f(C$t.localAnchorB,C$j.ZERO)),C$e.m_localXAxisA.Copy(C$f(C$t.localAxisA,new C$j(1,0))).SelfNormalize(),C$j.CrossOneV(C$e.m_localXAxisA,C$e.m_localYAxisA),C$e.m_referenceAngle=C$f(C$t.referenceAngle,0),C$e.m_lowerTranslation=C$f(C$t.lowerTranslation,0),C$e.m_upperTranslation=C$f(C$t.upperTranslation,0),C$e.m_maxMotorForce=C$f(C$t.maxMotorForce,0),C$e.m_motorSpeed=C$f(C$t.motorSpeed,0),C$e.m_enableLimit=C$f(C$t.enableLimit,!1),C$e.m_enableMotor=C$f(C$t.enableMotor,!1),C$e}C$Vi(C$Jn,C$Yn=C$en),C$Jn.prototype.Initialize=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){this.bodyA=C$t,this.bodyB=C$e,this.groundAnchorA.Copy(C$i),this.groundAnchorB.Copy(C$n),this.bodyA.GetLocalPoint(C$r,this.localAnchorA),this.bodyB.GetLocalPoint(C$s,this.localAnchorB),this.lengthA=C$j.DistanceVV(C$r,C$i),this.lengthB=C$j.DistanceVV(C$s,C$n),this.ratio=C$o};var C$Yn,C$qn=C$Jn;function C$Jn(){var C$t=C$Yn.call(this,C$H.b2JointType.e_pulleyJoint)||this;return C$t.groundAnchorA=new C$j(-1,1),C$t.groundAnchorB=new C$j(1,1),C$t.localAnchorA=new C$j(-1,0),C$t.localAnchorB=new C$j(1,0),C$t.lengthA=0,C$t.lengthB=0,C$t.ratio=1,C$t.collideConnected=!0,C$t}C$Vi(C$Qn,C$Zn=C$nn),C$Qn.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e=C$t.positions[this.m_indexA].c,C$i=C$t.positions[this.m_indexA].a,C$n=C$t.velocities[this.m_indexA].v,C$r=C$t.velocities[this.m_indexA].w,C$s=C$t.positions[this.m_indexB].c,C$o=C$t.positions[this.m_indexB].a,C$a=C$t.velocities[this.m_indexB].v,C$c=C$t.velocities[this.m_indexB].w,C$i=this.m_qA.SetAngle(C$i),C$o=this.m_qB.SetAngle(C$o),C$i=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$i,this.m_lalcA,this.m_rA),C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$o,this.m_lalcB,this.m_rB),this.m_uA.Copy(C$e).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(C$s).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB),this.m_uA.Length()),C$o=this.m_uB.Length(),C$e=(.08<C$i?this.m_uA.SelfMul(1/C$i):this.m_uA.SetZero(),.08<C$o?this.m_uB.SelfMul(1/C$o):this.m_uB.SetZero(),C$j.CrossVV(this.m_rA,this.m_uA)),C$s=C$j.CrossVV(this.m_rB,this.m_uB),C$i=this.m_invMassA+this.m_invIA*C$e*C$e,C$o=this.m_invMassB+this.m_invIB*C$s*C$s;this.m_mass=C$i+this.m_ratio*this.m_ratio*C$o,0<this.m_mass&&(this.m_mass=1/this.m_mass),C$t.step.warmStarting?(this.m_impulse*=C$t.step.dtRatio,C$e=C$j.MulSV(-this.m_impulse,this.m_uA,C$Qn.InitVelocityConstraints_s_PA),C$s=C$j.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,C$Qn.InitVelocityConstraints_s_PB),C$n.SelfMulAdd(this.m_invMassA,C$e),C$r+=this.m_invIA*C$j.CrossVV(this.m_rA,C$e),C$a.SelfMulAdd(this.m_invMassB,C$s),C$c+=this.m_invIB*C$j.CrossVV(this.m_rB,C$s)):this.m_impulse=0,C$t.velocities[this.m_indexA].w=C$r,C$t.velocities[this.m_indexB].w=C$c},C$Qn.prototype.SolveVelocityConstraints=function(C$t){var C$e=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$s=C$j.AddVCrossSV(C$e,C$i,this.m_rA,C$Qn.SolveVelocityConstraints_s_vpA),C$o=C$j.AddVCrossSV(C$n,C$r,this.m_rB,C$Qn.SolveVelocityConstraints_s_vpB),C$s=-C$j.DotVV(this.m_uA,C$s)-this.m_ratio*C$j.DotVV(this.m_uB,C$o),C$o=-this.m_mass*C$s,C$s=(this.m_impulse+=C$o,C$j.MulSV(-C$o,this.m_uA,C$Qn.SolveVelocityConstraints_s_PA)),C$o=C$j.MulSV(-this.m_ratio*C$o,this.m_uB,C$Qn.SolveVelocityConstraints_s_PB);C$e.SelfMulAdd(this.m_invMassA,C$s),C$i+=this.m_invIA*C$j.CrossVV(this.m_rA,C$s),C$n.SelfMulAdd(this.m_invMassB,C$o),C$r+=this.m_invIB*C$j.CrossVV(this.m_rB,C$o),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r},C$Qn.prototype.SolvePositionConstraints=function(C$t){var C$h=C$t.positions[this.m_indexA].c,C$e=C$t.positions[this.m_indexA].a,C$u=C$t.positions[this.m_indexB].c,C$_=C$t.positions[this.m_indexB].a,C$i=this.m_qA.SetAngle(C$e),C$n=this.m_qB.SetAngle(C$_),C$i=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$i,this.m_lalcA,this.m_rA)),C$n=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$n,this.m_lalcB,this.m_rB)),C$r=this.m_uA.Copy(C$h).SelfAdd(C$i).SelfSub(this.m_groundAnchorA),C$s=this.m_uB.Copy(C$u).SelfAdd(C$n).SelfSub(this.m_groundAnchorB),C$o=C$r.Length(),C$a=C$s.Length(),C$c=(.08<C$o?C$r.SelfMul(1/C$o):C$r.SetZero(),.08<C$a?C$s.SelfMul(1/C$a):C$s.SetZero(),C$j.CrossVV(C$i,C$r)),C$l=C$j.CrossVV(C$n,C$s),C$c=this.m_invMassA+this.m_invIA*C$c*C$c,C$l=this.m_invMassB+this.m_invIB*C$l*C$l,C$c=C$c+this.m_ratio*this.m_ratio*C$l,C$l=(0<C$c&&(C$c=1/C$c),this.m_constant-C$o-this.m_ratio*C$a),C$o=C$D(C$l),C$a=-C$c*C$l,C$c=C$j.MulSV(-C$a,C$r,C$Qn.SolvePositionConstraints_s_PA),C$l=C$j.MulSV(-this.m_ratio*C$a,C$s,C$Qn.SolvePositionConstraints_s_PB);return C$h.SelfMulAdd(this.m_invMassA,C$c),C$e+=this.m_invIA*C$j.CrossVV(C$i,C$c),C$u.SelfMulAdd(this.m_invMassB,C$l),C$_+=this.m_invIB*C$j.CrossVV(C$n,C$l),C$t.positions[this.m_indexA].a=C$e,C$t.positions[this.m_indexB].a=C$_,C$o<.008},C$Qn.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$Qn.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$Qn.prototype.GetReactionForce=function(C$t,C$e){return C$e.x=C$t*this.m_impulse*this.m_uB.x,C$e.y=C$t*this.m_impulse*this.m_uB.y,C$e},C$Qn.prototype.GetReactionTorque=function(C$t){return 0},C$Qn.prototype.GetGroundAnchorA=function(){return this.m_groundAnchorA},C$Qn.prototype.GetGroundAnchorB=function(){return this.m_groundAnchorB},C$Qn.prototype.GetLengthA=function(){return this.m_lengthA},C$Qn.prototype.GetLengthB=function(){return this.m_lengthB},C$Qn.prototype.GetRatio=function(){return this.m_ratio},C$Qn.prototype.GetCurrentLengthA=function(){var C$t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$Qn.GetCurrentLengthA_s_p),C$e=this.m_groundAnchorA;return C$j.DistanceVV(C$t,C$e)},C$Qn.prototype.GetCurrentLengthB=function(){var C$t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$Qn.GetCurrentLengthB_s_p),C$e=this.m_groundAnchorB;return C$j.DistanceVV(C$t,C$e)},C$Qn.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),C$t("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.lengthA = %.15f;\n",this.m_lengthA),C$t("  jd.lengthB = %.15f;\n",this.m_lengthB),C$t("  jd.ratio = %.15f;\n",this.m_ratio),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$Qn.prototype.ShiftOrigin=function(C$t){this.m_groundAnchorA.SelfSub(C$t),this.m_groundAnchorB.SelfSub(C$t)},C$Qn.InitVelocityConstraints_s_PA=new C$j,C$Qn.InitVelocityConstraints_s_PB=new C$j,C$Qn.SolveVelocityConstraints_s_vpA=new C$j,C$Qn.SolveVelocityConstraints_s_vpB=new C$j,C$Qn.SolveVelocityConstraints_s_PA=new C$j,C$Qn.SolveVelocityConstraints_s_PB=new C$j,C$Qn.SolvePositionConstraints_s_PA=new C$j,C$Qn.SolvePositionConstraints_s_PB=new C$j,C$Qn.GetCurrentLengthA_s_p=new C$j,C$Qn.GetCurrentLengthB_s_p=new C$j;var C$Zn,C$Kn=C$Qn;function C$Qn(C$t){var C$e=C$Zn.call(this,C$t)||this;return C$e.m_groundAnchorA=new C$j,C$e.m_groundAnchorB=new C$j,C$e.m_lengthA=0,C$e.m_lengthB=0,C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_constant=0,C$e.m_ratio=0,C$e.m_impulse=0,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_uA=new C$j,C$e.m_uB=new C$j,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_mass=0,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_groundAnchorA.Copy(C$f(C$t.groundAnchorA,new C$j(-1,1))),C$e.m_groundAnchorB.Copy(C$f(C$t.groundAnchorB,new C$j(1,0))),C$e.m_localAnchorA.Copy(C$f(C$t.localAnchorA,new C$j(-1,0))),C$e.m_localAnchorB.Copy(C$f(C$t.localAnchorB,new C$j(1,0))),C$e.m_lengthA=C$f(C$t.lengthA,0),C$e.m_lengthB=C$f(C$t.lengthB,0),C$e.m_ratio=C$f(C$t.ratio,1),C$e.m_constant=C$f(C$t.lengthA,0)+C$e.m_ratio*C$f(C$t.lengthB,0),C$e.m_impulse=0,C$e}C$Vi(C$er,C$$n=C$en),C$er.prototype.Initialize=function(C$t,C$e,C$i){this.bodyA=C$t,this.bodyB=C$e,this.bodyA.GetLocalPoint(C$i,this.localAnchorA),this.bodyB.GetLocalPoint(C$i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$$n,C$tr=C$er;function C$er(){var C$t=C$$n.call(this,C$H.b2JointType.e_revoluteJoint)||this;return C$t.localAnchorA=new C$j(0,0),C$t.localAnchorB=new C$j(0,0),C$t.referenceAngle=0,C$t.enableLimit=!1,C$t.lowerAngle=0,C$t.upperAngle=0,C$t.enableMotor=!1,C$t.motorSpeed=0,C$t.maxMotorTorque=0,C$t}C$Vi(C$rr,C$ir=C$nn),C$rr.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e=C$t.positions[this.m_indexA].a,C$h=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.positions[this.m_indexB].a,C$u=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$s=this.m_qA.SetAngle(C$e),C$o=this.m_qB.SetAngle(C$n),C$s=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$s,this.m_lalcA,this.m_rA),C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$o,this.m_lalcB,this.m_rB),this.m_invMassA),C$o=this.m_invMassB,C$a=this.m_invIA,C$c=this.m_invIB,C$l=C$a+C$c===0;this.m_mass.ex.x=C$s+C$o+this.m_rA.y*this.m_rA.y*C$a+this.m_rB.y*this.m_rB.y*C$c,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*C$a-this.m_rB.y*this.m_rB.x*C$c,this.m_mass.ez.x=-this.m_rA.y*C$a-this.m_rB.y*C$c,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=C$s+C$o+this.m_rA.x*this.m_rA.x*C$a+this.m_rB.x*this.m_rB.x*C$c,this.m_mass.ez.y=this.m_rA.x*C$a+this.m_rB.x*C$c,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=C$a+C$c,this.m_motorMass=C$a+C$c,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!C$l||(this.m_motorImpulse=0),this.m_enableLimit&&!C$l?(C$l=C$n-C$e-this.m_referenceAngle,C$D(this.m_upperAngle-this.m_lowerAngle)<2*C$I?this.m_limitState=C$H.b2LimitState.e_equalLimits:C$l<=this.m_lowerAngle?(this.m_limitState!==C$H.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=C$H.b2LimitState.e_atLowerLimit):C$l>=this.m_upperAngle?(this.m_limitState!==C$H.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=C$H.b2LimitState.e_atUpperLimit):(this.m_limitState=C$H.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=C$H.b2LimitState.e_inactiveLimit,C$t.step.warmStarting?(this.m_impulse.SelfMul(C$t.step.dtRatio),this.m_motorImpulse*=C$t.step.dtRatio,C$n=C$rr.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y),C$h.SelfMulSub(C$s,C$n),C$i-=C$a*(C$j.CrossVV(this.m_rA,C$n)+this.m_motorImpulse+this.m_impulse.z),C$u.SelfMulAdd(C$o,C$n),C$r+=C$c*(C$j.CrossVV(this.m_rB,C$n)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r},C$rr.prototype.SolveVelocityConstraints=function(C$t){var C$e,C$i,C$n,C$r,C$s,C$o,C$h=C$t.velocities[this.m_indexA].v,C$a=C$t.velocities[this.m_indexA].w,C$u=C$t.velocities[this.m_indexB].v,C$c=C$t.velocities[this.m_indexB].w,C$_=this.m_invMassA,C$d=this.m_invMassB,C$f=this.m_invIA,C$p=this.m_invIB,C$l=C$f+C$p===0;this.m_enableMotor&&this.m_limitState!==C$H.b2LimitState.e_equalLimits&&!C$l&&(C$s=C$c-C$a-this.m_motorSpeed,C$s=-this.m_motorMass*C$s,C$e=this.m_motorImpulse,C$o=C$t.step.dt*this.m_maxMotorTorque,this.m_motorImpulse=C$O(this.m_motorImpulse+C$s,-C$o,C$o),C$a-=C$f*(C$s=this.m_motorImpulse-C$e),C$c+=C$p*C$s),this.m_enableLimit&&this.m_limitState!==C$H.b2LimitState.e_inactiveLimit&&!C$l?(C$o=C$j.SubVV(C$j.AddVCrossSV(C$u,C$c,this.m_rB,C$j.s_t0),C$j.AddVCrossSV(C$h,C$a,this.m_rA,C$j.s_t1),C$rr.SolveVelocityConstraints_s_Cdot1),C$e=this.m_mass.Solve33(C$o.x,C$o.y,C$c-C$a,C$rr.SolveVelocityConstraints_s_impulse_v3).SelfNeg(),this.m_limitState===C$H.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(C$e):this.m_limitState===C$H.b2LimitState.e_atLowerLimit?this.m_impulse.z+C$e.z<0?(C$i=-C$o.x+this.m_impulse.z*this.m_mass.ez.x,C$n=-C$o.y+this.m_impulse.z*this.m_mass.ez.y,C$r=this.m_mass.Solve22(C$i,C$n,C$rr.SolveVelocityConstraints_s_reduced_v2),C$e.x=C$r.x,C$e.y=C$r.y,C$e.z=-this.m_impulse.z,this.m_impulse.x+=C$r.x,this.m_impulse.y+=C$r.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(C$e):this.m_limitState===C$H.b2LimitState.e_atUpperLimit&&(0<this.m_impulse.z+C$e.z?(C$i=-C$o.x+this.m_impulse.z*this.m_mass.ez.x,C$n=-C$o.y+this.m_impulse.z*this.m_mass.ez.y,C$r=this.m_mass.Solve22(C$i,C$n,C$rr.SolveVelocityConstraints_s_reduced_v2),C$e.x=C$r.x,C$e.y=C$r.y,C$e.z=-this.m_impulse.z,this.m_impulse.x+=C$r.x,this.m_impulse.y+=C$r.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(C$e)),C$s=C$rr.SolveVelocityConstraints_s_P.Set(C$e.x,C$e.y),C$h.SelfMulSub(C$_,C$s),C$a-=C$f*(C$j.CrossVV(this.m_rA,C$s)+C$e.z),C$u.SelfMulAdd(C$d,C$s),C$c+=C$p*(C$j.CrossVV(this.m_rB,C$s)+C$e.z)):(C$l=C$j.SubVV(C$j.AddVCrossSV(C$u,C$c,this.m_rB,C$j.s_t0),C$j.AddVCrossSV(C$h,C$a,this.m_rA,C$j.s_t1),C$rr.SolveVelocityConstraints_s_Cdot_v2),C$o=this.m_mass.Solve22(-C$l.x,-C$l.y,C$rr.SolveVelocityConstraints_s_impulse_v2),this.m_impulse.x+=C$o.x,this.m_impulse.y+=C$o.y,C$h.SelfMulSub(C$_,C$o),C$a-=C$f*C$j.CrossVV(this.m_rA,C$o),C$u.SelfMulAdd(C$d,C$o),C$c+=C$p*C$j.CrossVV(this.m_rB,C$o)),C$t.velocities[this.m_indexA].w=C$a,C$t.velocities[this.m_indexB].w=C$c},C$rr.prototype.SolvePositionConstraints=function(C$t){var C$h=C$t.positions[this.m_indexA].c,C$e=C$t.positions[this.m_indexA].a,C$u=C$t.positions[this.m_indexB].c,C$i=C$t.positions[this.m_indexB].a,C$_=this.m_qA.SetAngle(C$e),C$n=this.m_qB.SetAngle(C$i),C$r=0,C$s=this.m_invIA+this.m_invIB===0,C$s=(this.m_enableLimit&&this.m_limitState!==C$H.b2LimitState.e_inactiveLimit&&!C$s&&(C$s=C$i-C$e-this.m_referenceAngle,C$a=0,this.m_limitState===C$H.b2LimitState.e_equalLimits?(C$o=C$O(C$s-this.m_lowerAngle,-C$p,C$p),C$a=-this.m_motorMass*C$o,C$r=C$D(C$o)):this.m_limitState===C$H.b2LimitState.e_atLowerLimit?(C$r=-(C$o=C$s-this.m_lowerAngle),C$o=C$O(C$o+C$I,-C$p,0),C$a=-this.m_motorMass*C$o):this.m_limitState===C$H.b2LimitState.e_atUpperLimit&&(C$o=C$O((C$r=C$o=C$s-this.m_upperAngle)-C$I,0,C$p),C$a=-this.m_motorMass*C$o),C$e-=this.m_invIA*C$a,C$i+=this.m_invIB*C$a),C$_.SetAngle(C$e),C$n.SetAngle(C$i),C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$_,this.m_lalcA,this.m_rA)),C$o=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$n,this.m_lalcB,this.m_rB)),C$a=C$j.SubVV(C$j.AddVV(C$u,C$o,C$j.s_t0),C$j.AddVV(C$h,C$s,C$j.s_t1),C$rr.SolvePositionConstraints_s_C_v2),C$_=C$a.Length(),C$n=this.m_invMassA,C$d=this.m_invMassB,C$c=this.m_invIA,C$f=this.m_invIB,C$l=this.m_K,C$l=(C$l.ex.x=C$n+C$d+C$c*C$s.y*C$s.y+C$f*C$o.y*C$o.y,C$l.ex.y=-C$c*C$s.x*C$s.y-C$f*C$o.x*C$o.y,C$l.ey.x=C$l.ex.y,C$l.ey.y=C$n+C$d+C$c*C$s.x*C$s.x+C$f*C$o.x*C$o.x,C$l.Solve(C$a.x,C$a.y,C$rr.SolvePositionConstraints_s_impulse).SelfNeg());return C$h.SelfMulSub(C$n,C$l),C$e-=C$c*C$j.CrossVV(C$s,C$l),C$u.SelfMulAdd(C$d,C$l),C$i+=C$f*C$j.CrossVV(C$o,C$l),C$t.positions[this.m_indexA].a=C$e,C$t.positions[this.m_indexB].a=C$i,C$_<=.008&&C$r<=C$I},C$rr.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$rr.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$rr.prototype.GetReactionForce=function(C$t,C$e){return C$e.x=C$t*this.m_impulse.x,C$e.y=C$t*this.m_impulse.y,C$e},C$rr.prototype.GetReactionTorque=function(C$t){return C$t*this.m_impulse.z},C$rr.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$rr.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$rr.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},C$rr.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},C$rr.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},C$rr.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C$rr.prototype.EnableMotor=function(C$t){C$t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$t)},C$rr.prototype.GetMotorTorque=function(C$t){return C$t*this.m_motorImpulse},C$rr.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C$rr.prototype.SetMaxMotorTorque=function(C$t){C$t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=C$t)},C$rr.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},C$rr.prototype.IsLimitEnabled=function(){return this.m_enableLimit},C$rr.prototype.EnableLimit=function(C$t){C$t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=C$t,this.m_impulse.z=0)},C$rr.prototype.GetLowerLimit=function(){return this.m_lowerAngle},C$rr.prototype.GetUpperLimit=function(){return this.m_upperAngle},C$rr.prototype.SetLimits=function(C$t,C$e){C$t===this.m_lowerAngle&&C$e===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=C$t,this.m_upperAngle=C$e)},C$rr.prototype.SetMotorSpeed=function(C$t){C$t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$t)},C$rr.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),C$t("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),C$t("  jd.upperAngle = %.15f;\n",this.m_upperAngle),C$t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$rr.InitVelocityConstraints_s_P=new C$j,C$rr.SolveVelocityConstraints_s_P=new C$j,C$rr.SolveVelocityConstraints_s_Cdot_v2=new C$j,C$rr.SolveVelocityConstraints_s_Cdot1=new C$j,C$rr.SolveVelocityConstraints_s_impulse_v3=new C$F,C$rr.SolveVelocityConstraints_s_reduced_v2=new C$j,C$rr.SolveVelocityConstraints_s_impulse_v2=new C$j,C$rr.SolvePositionConstraints_s_C_v2=new C$j,C$rr.SolvePositionConstraints_s_impulse=new C$j;var C$ir,C$nr=C$rr;function C$rr(C$t){var C$e=C$ir.call(this,C$t)||this;return C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_impulse=new C$F,C$e.m_motorImpulse=0,C$e.m_enableMotor=!1,C$e.m_maxMotorTorque=0,C$e.m_motorSpeed=0,C$e.m_enableLimit=!1,C$e.m_referenceAngle=0,C$e.m_lowerAngle=0,C$e.m_upperAngle=0,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_mass=new C$z,C$e.m_motorMass=0,C$e.m_limitState=C$H.b2LimitState.e_inactiveLimit,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_K=new C$k,C$e.m_localAnchorA.Copy(C$f(C$t.localAnchorA,C$j.ZERO)),C$e.m_localAnchorB.Copy(C$f(C$t.localAnchorB,C$j.ZERO)),C$e.m_referenceAngle=C$f(C$t.referenceAngle,0),C$e.m_impulse.SetZero(),C$e.m_motorImpulse=0,C$e.m_lowerAngle=C$f(C$t.lowerAngle,0),C$e.m_upperAngle=C$f(C$t.upperAngle,0),C$e.m_maxMotorTorque=C$f(C$t.maxMotorTorque,0),C$e.m_motorSpeed=C$f(C$t.motorSpeed,0),C$e.m_enableLimit=C$f(C$t.enableLimit,!1),C$e.m_enableMotor=C$f(C$t.enableMotor,!1),C$e.m_limitState=C$H.b2LimitState.e_inactiveLimit,C$e}C$Vi(C$ar,C$sr=C$en);var C$sr,C$or=C$ar;function C$ar(){var C$t=C$sr.call(this,C$H.b2JointType.e_ropeJoint)||this;return C$t.localAnchorA=new C$j(-1,0),C$t.localAnchorB=new C$j(1,0),C$t.maxLength=0,C$t}C$Vi(C$hr,C$cr=C$nn),C$hr.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e=C$t.positions[this.m_indexA].c,C$i=C$t.positions[this.m_indexA].a,C$n=C$t.velocities[this.m_indexA].v,C$r=C$t.velocities[this.m_indexA].w,C$s=C$t.positions[this.m_indexB].c,C$o=C$t.positions[this.m_indexB].a,C$a=C$t.velocities[this.m_indexB].v,C$c=C$t.velocities[this.m_indexB].w,C$i=this.m_qA.SetAngle(C$i),C$o=this.m_qB.SetAngle(C$o),C$i=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$i,this.m_lalcA,this.m_rA),C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$o,this.m_lalcB,this.m_rB),this.m_u.Copy(C$s).SelfAdd(this.m_rB).SelfSub(C$e).SelfSub(this.m_rA),this.m_length=this.m_u.Length(),this.m_length-this.m_maxLength);if(this.m_state=0<C$i?C$H.b2LimitState.e_atUpperLimit:C$H.b2LimitState.e_inactiveLimit,!(.008<this.m_length))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);C$o=C$j.CrossVV(this.m_rA,this.m_u),C$s=C$j.CrossVV(this.m_rB,this.m_u),C$e=this.m_invMassA+this.m_invIA*C$o*C$o+this.m_invMassB+this.m_invIB*C$s*C$s;this.m_mass=0!==C$e?1/C$e:0,C$t.step.warmStarting?(this.m_impulse*=C$t.step.dtRatio,C$i=C$j.MulSV(this.m_impulse,this.m_u,C$hr.InitVelocityConstraints_s_P),C$n.SelfMulSub(this.m_invMassA,C$i),C$r-=this.m_invIA*C$j.CrossVV(this.m_rA,C$i),C$a.SelfMulAdd(this.m_invMassB,C$i),C$c+=this.m_invIB*C$j.CrossVV(this.m_rB,C$i)):this.m_impulse=0,C$t.velocities[this.m_indexA].w=C$r,C$t.velocities[this.m_indexB].w=C$c},C$hr.prototype.SolveVelocityConstraints=function(C$t){var C$e=C$t.velocities[this.m_indexA].v,C$i=C$t.velocities[this.m_indexA].w,C$n=C$t.velocities[this.m_indexB].v,C$r=C$t.velocities[this.m_indexB].w,C$s=C$j.AddVCrossSV(C$e,C$i,this.m_rA,C$hr.SolveVelocityConstraints_s_vpA),C$o=C$j.AddVCrossSV(C$n,C$r,this.m_rB,C$hr.SolveVelocityConstraints_s_vpB),C$a=this.m_length-this.m_maxLength,C$o=C$j.DotVV(this.m_u,C$j.SubVV(C$o,C$s,C$j.s_t0)),C$s=(C$a<0&&(C$o+=C$t.step.inv_dt*C$a),-this.m_mass*C$o),C$a=this.m_impulse,C$o=(this.m_impulse=C$L(0,this.m_impulse+C$s),C$s=this.m_impulse-C$a,C$j.MulSV(C$s,this.m_u,C$hr.SolveVelocityConstraints_s_P));C$e.SelfMulSub(this.m_invMassA,C$o),C$i-=this.m_invIA*C$j.CrossVV(this.m_rA,C$o),C$n.SelfMulAdd(this.m_invMassB,C$o),C$r+=this.m_invIB*C$j.CrossVV(this.m_rB,C$o),C$t.velocities[this.m_indexA].w=C$i,C$t.velocities[this.m_indexB].w=C$r},C$hr.prototype.SolvePositionConstraints=function(C$t){var C$e=C$t.positions[this.m_indexA].c,C$i=C$t.positions[this.m_indexA].a,C$n=C$t.positions[this.m_indexB].c,C$r=C$t.positions[this.m_indexB].a,C$s=this.m_qA.SetAngle(C$i),C$o=this.m_qB.SetAngle(C$r),C$s=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$s,this.m_lalcA,this.m_rA)),C$o=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$o,this.m_lalcB,this.m_rB)),C$a=this.m_u.Copy(C$n).SelfAdd(C$o).SelfSub(C$e).SelfSub(C$s),C$c=C$a.Normalize(),C$l=C$O(C$c-this.m_maxLength,0,.2),C$l=-this.m_mass*C$l,C$l=C$j.MulSV(C$l,C$a,C$hr.SolvePositionConstraints_s_P);return C$e.SelfMulSub(this.m_invMassA,C$l),C$i-=this.m_invIA*C$j.CrossVV(C$s,C$l),C$n.SelfMulAdd(this.m_invMassB,C$l),C$r+=this.m_invIB*C$j.CrossVV(C$o,C$l),C$t.positions[this.m_indexA].a=C$i,C$t.positions[this.m_indexB].a=C$r,C$c-this.m_maxLength<.008},C$hr.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$hr.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$hr.prototype.GetReactionForce=function(C$t,C$e){return C$j.MulSV(C$t*this.m_impulse,this.m_u,C$e)},C$hr.prototype.GetReactionTorque=function(C$t){return 0},C$hr.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$hr.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$hr.prototype.SetMaxLength=function(C$t){this.m_maxLength=C$t},C$hr.prototype.GetMaxLength=function(){return this.m_maxLength},C$hr.prototype.GetLimitState=function(){return this.m_state},C$hr.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.maxLength = %.15f;\n",this.m_maxLength),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$hr.InitVelocityConstraints_s_P=new C$j,C$hr.SolveVelocityConstraints_s_vpA=new C$j,C$hr.SolveVelocityConstraints_s_vpB=new C$j,C$hr.SolveVelocityConstraints_s_P=new C$j,C$hr.SolvePositionConstraints_s_P=new C$j;var C$cr,C$lr=C$hr;function C$hr(C$t){var C$e=C$cr.call(this,C$t)||this;return C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_maxLength=0,C$e.m_length=0,C$e.m_impulse=0,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_u=new C$j,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_mass=0,C$e.m_state=C$H.b2LimitState.e_inactiveLimit,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_localAnchorA.Copy(C$f(C$t.localAnchorA,new C$j(-1,0))),C$e.m_localAnchorB.Copy(C$f(C$t.localAnchorB,new C$j(1,0))),C$e.m_maxLength=C$f(C$t.maxLength,0),C$e}C$Vi(C$dr,C$ur=C$en),C$dr.prototype.Initialize=function(C$t,C$e,C$i){this.bodyA=C$t,this.bodyB=C$e,this.bodyA.GetLocalPoint(C$i,this.localAnchorA),this.bodyB.GetLocalPoint(C$i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$ur,C$_r=C$dr;function C$dr(){var C$t=C$ur.call(this,C$H.b2JointType.e_weldJoint)||this;return C$t.localAnchorA=new C$j,C$t.localAnchorB=new C$j,C$t.referenceAngle=0,C$t.frequencyHz=0,C$t.dampingRatio=0,C$t}C$Vi(C$mr,C$fr=C$nn),C$mr.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e,C$i,C$n,C$r,C$s=C$t.positions[this.m_indexA].a,C$h=C$t.velocities[this.m_indexA].v,C$u=C$t.velocities[this.m_indexA].w,C$o=C$t.positions[this.m_indexB].a,C$_=C$t.velocities[this.m_indexB].v,C$d=C$t.velocities[this.m_indexB].w,C$f=this.m_qA.SetAngle(C$s),C$p=this.m_qB.SetAngle(C$o),C$f=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$f,this.m_lalcA,this.m_rA),C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$p,this.m_lalcB,this.m_rB),this.m_invMassA),C$p=this.m_invMassB,C$a=this.m_invIA,C$c=this.m_invIB,C$l=this.m_K;C$l.ex.x=C$f+C$p+this.m_rA.y*this.m_rA.y*C$a+this.m_rB.y*this.m_rB.y*C$c,C$l.ey.x=-this.m_rA.y*this.m_rA.x*C$a-this.m_rB.y*this.m_rB.x*C$c,C$l.ez.x=-this.m_rA.y*C$a-this.m_rB.y*C$c,C$l.ex.y=C$l.ey.x,C$l.ey.y=C$f+C$p+this.m_rA.x*this.m_rA.x*C$a+this.m_rB.x*this.m_rB.x*C$c,C$l.ez.y=this.m_rA.x*C$a+this.m_rB.x*C$c,C$l.ex.z=C$l.ez.x,C$l.ey.z=C$l.ez.y,C$l.ez.z=C$a+C$c,0<this.m_frequencyHz?(C$l.GetInverse22(this.m_mass),C$o=C$o-C$s-this.m_referenceAngle,C$s=2*C$m*this.m_frequencyHz,C$i=2*(C$r=0<(C$e=C$a+C$c)?1/C$e:0)*this.m_dampingRatio*C$s,C$n=C$t.step.dt,this.m_gamma=C$n*(C$i+C$n*(C$i=C$r*C$s*C$s)),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=C$o*C$n*C$i*this.m_gamma,C$e+=this.m_gamma,this.m_mass.ez.z=0!==C$e?1/C$e:0):(C$l.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0),C$t.step.warmStarting?(this.m_impulse.SelfMul(C$t.step.dtRatio),C$r=C$mr.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y),C$h.SelfMulSub(C$f,C$r),C$u-=C$a*(C$j.CrossVV(this.m_rA,C$r)+this.m_impulse.z),C$_.SelfMulAdd(C$p,C$r),C$d+=C$c*(C$j.CrossVV(this.m_rB,C$r)+this.m_impulse.z)):this.m_impulse.SetZero(),C$t.velocities[this.m_indexA].w=C$u,C$t.velocities[this.m_indexB].w=C$d},C$mr.prototype.SolveVelocityConstraints=function(C$t){var C$e,C$i,C$n=C$t.velocities[this.m_indexA].v,C$r=C$t.velocities[this.m_indexA].w,C$s=C$t.velocities[this.m_indexB].v,C$o=C$t.velocities[this.m_indexB].w,C$a=this.m_invMassA,C$h=this.m_invMassB,C$c=this.m_invIA,C$l=this.m_invIB;0<this.m_frequencyHz?(C$e=-this.m_mass.ez.z*(C$o-C$r+this.m_bias+this.m_gamma*this.m_impulse.z),this.m_impulse.z+=C$e,C$r-=C$c*C$e,C$e=C$j.SubVV(C$j.AddVCrossSV(C$s,C$o+=C$l*C$e,this.m_rB,C$j.s_t0),C$j.AddVCrossSV(C$n,C$r,this.m_rA,C$j.s_t1),C$mr.SolveVelocityConstraints_s_Cdot1),C$i=C$z.MulM33XY(this.m_mass,C$e.x,C$e.y,C$mr.SolveVelocityConstraints_s_impulse1).SelfNeg(),this.m_impulse.x+=C$i.x,this.m_impulse.y+=C$i.y,C$n.SelfMulSub(C$a,C$i=C$i),C$r-=C$c*C$j.CrossVV(this.m_rA,C$i),C$s.SelfMulAdd(C$h,C$i),C$o+=C$l*C$j.CrossVV(this.m_rB,C$i)):(C$e=C$j.SubVV(C$j.AddVCrossSV(C$s,C$o,this.m_rB,C$j.s_t0),C$j.AddVCrossSV(C$n,C$r,this.m_rA,C$j.s_t1),C$mr.SolveVelocityConstraints_s_Cdot1),C$e=C$z.MulM33XYZ(this.m_mass,C$e.x,C$e.y,C$o-C$r,C$mr.SolveVelocityConstraints_s_impulse).SelfNeg(),this.m_impulse.SelfAdd(C$e),C$i=C$mr.SolveVelocityConstraints_s_P.Set(C$e.x,C$e.y),C$n.SelfMulSub(C$a,C$i),C$r-=C$c*(C$j.CrossVV(this.m_rA,C$i)+C$e.z),C$s.SelfMulAdd(C$h,C$i),C$o+=C$l*(C$j.CrossVV(this.m_rB,C$i)+C$e.z)),C$t.velocities[this.m_indexA].w=C$r,C$t.velocities[this.m_indexB].w=C$o},C$mr.prototype.SolvePositionConstraints=function(C$t){var C$h,C$u,C$e,C$i,C$_=C$t.positions[this.m_indexA].c,C$n=C$t.positions[this.m_indexA].a,C$d=C$t.positions[this.m_indexB].c,C$r=C$t.positions[this.m_indexB].a,C$s=this.m_qA.SetAngle(C$n),C$o=this.m_qB.SetAngle(C$r),C$f=this.m_invMassA,C$p=this.m_invMassB,C$a=this.m_invIA,C$c=this.m_invIB,C$s=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$s,this.m_lalcA,this.m_rA)),C$o=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$o,this.m_lalcB,this.m_rB)),C$l=this.m_K;return C$l.ex.x=C$f+C$p+C$s.y*C$s.y*C$a+C$o.y*C$o.y*C$c,C$l.ey.x=-C$s.y*C$s.x*C$a-C$o.y*C$o.x*C$c,C$l.ez.x=-C$s.y*C$a-C$o.y*C$c,C$l.ex.y=C$l.ey.x,C$l.ey.y=C$f+C$p+C$s.x*C$s.x*C$a+C$o.x*C$o.x*C$c,C$l.ez.y=C$s.x*C$a+C$o.x*C$c,C$l.ex.z=C$l.ez.x,C$l.ey.z=C$l.ez.y,C$l.ez.z=C$a+C$c,0<this.m_frequencyHz?(C$h=(C$e=C$j.SubVV(C$j.AddVV(C$d,C$o,C$j.s_t0),C$j.AddVV(C$_,C$s,C$j.s_t1),C$mr.SolvePositionConstraints_s_C1)).Length(),C$u=0,C$i=C$l.Solve22(C$e.x,C$e.y,C$mr.SolvePositionConstraints_s_P).SelfNeg(),C$_.SelfMulSub(C$f,C$i),C$n-=C$a*C$j.CrossVV(C$s,C$i),C$d.SelfMulAdd(C$p,C$i),C$r+=C$c*C$j.CrossVV(C$o,C$i)):(C$e=C$j.SubVV(C$j.AddVV(C$d,C$o,C$j.s_t0),C$j.AddVV(C$_,C$s,C$j.s_t1),C$mr.SolvePositionConstraints_s_C1),C$o=C$r-C$n-this.m_referenceAngle,C$h=C$e.Length(),C$u=C$D(C$o),C$s=C$l.Solve33(C$e.x,C$e.y,C$o,C$mr.SolvePositionConstraints_s_impulse).SelfNeg(),C$i=C$mr.SolvePositionConstraints_s_P.Set(C$s.x,C$s.y),C$_.SelfMulSub(C$f,C$i),C$n-=C$a*(C$j.CrossVV(this.m_rA,C$i)+C$s.z),C$d.SelfMulAdd(C$p,C$i),C$r+=C$c*(C$j.CrossVV(this.m_rB,C$i)+C$s.z)),C$t.positions[this.m_indexA].a=C$n,C$t.positions[this.m_indexB].a=C$r,C$h<=.008&&C$u<=C$I},C$mr.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$mr.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$mr.prototype.GetReactionForce=function(C$t,C$e){return C$e.x=C$t*this.m_impulse.x,C$e.y=C$t*this.m_impulse.y,C$e},C$mr.prototype.GetReactionTorque=function(C$t){return C$t*this.m_impulse.z},C$mr.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$mr.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$mr.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},C$mr.prototype.SetFrequency=function(C$t){this.m_frequencyHz=C$t},C$mr.prototype.GetFrequency=function(){return this.m_frequencyHz},C$mr.prototype.SetDampingRatio=function(C$t){this.m_dampingRatio=C$t},C$mr.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$mr.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$mr.InitVelocityConstraints_s_P=new C$j,C$mr.SolveVelocityConstraints_s_Cdot1=new C$j,C$mr.SolveVelocityConstraints_s_impulse1=new C$j,C$mr.SolveVelocityConstraints_s_impulse=new C$F,C$mr.SolveVelocityConstraints_s_P=new C$j,C$mr.SolvePositionConstraints_s_C1=new C$j,C$mr.SolvePositionConstraints_s_P=new C$j,C$mr.SolvePositionConstraints_s_impulse=new C$F;var C$fr,C$pr=C$mr;function C$mr(C$t){var C$e=C$fr.call(this,C$t)||this;return C$e.m_frequencyHz=0,C$e.m_dampingRatio=0,C$e.m_bias=0,C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_referenceAngle=0,C$e.m_gamma=0,C$e.m_impulse=new C$F(0,0,0),C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_mass=new C$z,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_K=new C$z,C$e.m_frequencyHz=C$f(C$t.frequencyHz,0),C$e.m_dampingRatio=C$f(C$t.dampingRatio,0),C$e.m_localAnchorA.Copy(C$f(C$t.localAnchorA,C$j.ZERO)),C$e.m_localAnchorB.Copy(C$f(C$t.localAnchorB,C$j.ZERO)),C$e.m_referenceAngle=C$f(C$t.referenceAngle,0),C$e.m_impulse.SetZero(),C$e}C$Vi(C$vr,C$yr=C$en),C$vr.prototype.Initialize=function(C$t,C$e,C$i,C$n){this.bodyA=C$t,this.bodyB=C$e,this.bodyA.GetLocalPoint(C$i,this.localAnchorA),this.bodyB.GetLocalPoint(C$i,this.localAnchorB),this.bodyA.GetLocalVector(C$n,this.localAxisA)};var C$yr,C$gr=C$vr;function C$vr(){var C$t=C$yr.call(this,C$H.b2JointType.e_wheelJoint)||this;return C$t.localAnchorA=new C$j(0,0),C$t.localAnchorB=new C$j(0,0),C$t.localAxisA=new C$j(1,0),C$t.enableMotor=!1,C$t.maxMotorTorque=0,C$t.motorSpeed=0,C$t.frequencyHz=2,C$t.dampingRatio=.7,C$t}C$Vi(C$Ar,C$xr=C$nn),C$Ar.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C$Ar.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},C$Ar.prototype.SetSpringFrequencyHz=function(C$t){this.m_frequencyHz=C$t},C$Ar.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz},C$Ar.prototype.SetSpringDampingRatio=function(C$t){this.m_dampingRatio=C$t},C$Ar.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio},C$Ar.prototype.InitVelocityConstraints=function(C$t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$e=this.m_invMassA,C$i=this.m_invMassB,C$n=this.m_invIA,C$r=this.m_invIB,C$s=C$t.positions[this.m_indexA].c,C$o=C$t.positions[this.m_indexA].a,C$h=C$t.velocities[this.m_indexA].v,C$u=C$t.velocities[this.m_indexA].w,C$a=C$t.positions[this.m_indexB].c,C$c=C$t.positions[this.m_indexB].a,C$_=C$t.velocities[this.m_indexB].v,C$d=C$t.velocities[this.m_indexB].w,C$o=this.m_qA.SetAngle(C$o),C$c=this.m_qB.SetAngle(C$c),C$l=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$o,this.m_lalcA,this.m_rA)),C$c=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$c,this.m_lalcB,this.m_rB)),C$a=C$j.SubVV(C$j.AddVV(C$a,C$c,C$j.s_t0),C$j.AddVV(C$s,C$l,C$j.s_t1),C$Ar.InitVelocityConstraints_s_d);C$B.MulRV(C$o,this.m_localYAxisA,this.m_ay),this.m_sAy=C$j.CrossVV(C$j.AddVV(C$a,C$l,C$j.s_t0),this.m_ay),this.m_sBy=C$j.CrossVV(C$c,this.m_ay),this.m_mass=C$e+C$i+C$n*this.m_sAy*this.m_sAy+C$r*this.m_sBy*this.m_sBy,0<this.m_mass&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,(this.m_gamma=0)<this.m_frequencyHz?(C$B.MulRV(C$o,this.m_localXAxisA,this.m_ax),this.m_sAx=C$j.CrossVV(C$j.AddVV(C$a,C$l,C$j.s_t0),this.m_ax),this.m_sBx=C$j.CrossVV(C$c,this.m_ax),0<(C$s=C$e+C$i+C$n*this.m_sAx*this.m_sAx+C$r*this.m_sBx*this.m_sBx)&&(this.m_springMass=1/C$s,C$o=C$j.DotVV(C$a,this.m_ax),C$l=2*C$m*this.m_frequencyHz,C$c=2*this.m_springMass*this.m_dampingRatio*C$l,C$e=this.m_springMass*C$l*C$l,C$i=C$t.step.dt,this.m_gamma=C$i*(C$c+C$i*C$e),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=C$o*C$i*C$e*this.m_gamma,this.m_springMass=C$s+this.m_gamma,0<this.m_springMass&&(this.m_springMass=1/this.m_springMass))):this.m_springImpulse=0,this.m_enableMotor?(this.m_motorMass=C$n+C$r,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),C$t.step.warmStarting?(this.m_impulse*=C$t.step.dtRatio,this.m_springImpulse*=C$t.step.dtRatio,this.m_motorImpulse*=C$t.step.dtRatio,C$a=C$j.AddVV(C$j.MulSV(this.m_impulse,this.m_ay,C$j.s_t0),C$j.MulSV(this.m_springImpulse,this.m_ax,C$j.s_t1),C$Ar.InitVelocityConstraints_s_P),C$l=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,C$c=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,C$h.SelfMulSub(this.m_invMassA,C$a),C$u-=this.m_invIA*C$l,C$_.SelfMulAdd(this.m_invMassB,C$a),C$d+=this.m_invIB*C$c):(this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0),C$t.velocities[this.m_indexA].w=C$u,C$t.velocities[this.m_indexB].w=C$d},C$Ar.prototype.SolveVelocityConstraints=function(C$t){var C$h=this.m_invMassA,C$u=this.m_invMassB,C$e=this.m_invIA,C$i=this.m_invIB,C$n=C$t.velocities[this.m_indexA].v,C$r=C$t.velocities[this.m_indexA].w,C$s=C$t.velocities[this.m_indexB].v,C$o=C$t.velocities[this.m_indexB].w,C$a=C$j.DotVV(this.m_ax,C$j.SubVV(C$s,C$n,C$j.s_t0))+this.m_sBx*C$o-this.m_sAx*C$r,C$c=-this.m_springMass*(C$a+this.m_bias+this.m_gamma*this.m_springImpulse),C$l=(this.m_springImpulse+=C$c,C$j.MulSV(C$c,this.m_ax,C$Ar.SolveVelocityConstraints_s_P)),C$_=C$c*this.m_sAx,C$d=C$c*this.m_sBx,C$a=(C$n.SelfMulSub(C$h,C$l),C$r-=C$e*C$_,C$s.SelfMulAdd(C$u,C$l),(C$o+=C$i*C$d)-C$r-this.m_motorSpeed),C$c=-this.m_motorMass*C$a,C$f=this.m_motorImpulse,C$p=C$t.step.dt*this.m_maxMotorTorque,C$a=(this.m_motorImpulse=C$O(this.m_motorImpulse+C$c,-C$p,C$p),C$r-=C$e*(C$c=this.m_motorImpulse-C$f),C$o+=C$i*C$c,C$j.DotVV(this.m_ay,C$j.SubVV(C$s,C$n,C$j.s_t0))+this.m_sBy*C$o-this.m_sAy*C$r),C$c=-this.m_mass*C$a,C$l=(this.m_impulse+=C$c,C$j.MulSV(C$c,this.m_ay,C$Ar.SolveVelocityConstraints_s_P)),C$_=C$c*this.m_sAy,C$d=C$c*this.m_sBy;C$n.SelfMulSub(C$h,C$l),C$r-=C$e*C$_,C$s.SelfMulAdd(C$u,C$l),C$o+=C$i*C$d,C$t.velocities[this.m_indexA].w=C$r,C$t.velocities[this.m_indexB].w=C$o},C$Ar.prototype.SolvePositionConstraints=function(C$t){var C$e=C$t.positions[this.m_indexA].c,C$i=C$t.positions[this.m_indexA].a,C$n=C$t.positions[this.m_indexB].c,C$r=C$t.positions[this.m_indexB].a,C$s=this.m_qA.SetAngle(C$i),C$o=this.m_qB.SetAngle(C$r),C$a=(C$j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$B.MulRV(C$s,this.m_lalcA,this.m_rA)),C$o=(C$j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$B.MulRV(C$o,this.m_lalcB,this.m_rB)),C$c=C$j.AddVV(C$j.SubVV(C$n,C$e,C$j.s_t0),C$j.SubVV(C$o,C$a,C$j.s_t1),C$Ar.SolvePositionConstraints_s_d),C$s=C$B.MulRV(C$s,this.m_localYAxisA,this.m_ay),C$a=C$j.CrossVV(C$j.AddVV(C$c,C$a,C$j.s_t0),C$s),C$o=C$j.CrossVV(C$o,C$s),C$c=C$j.DotVV(C$c,this.m_ay),C$l=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,C$l=0!==C$l?-C$c/C$l:0,C$s=C$j.MulSV(C$l,C$s,C$Ar.SolvePositionConstraints_s_P),C$a=C$l*C$a,C$l=C$l*C$o;return C$e.SelfMulSub(this.m_invMassA,C$s),C$i-=this.m_invIA*C$a,C$n.SelfMulAdd(this.m_invMassB,C$s),C$r+=this.m_invIB*C$l,C$t.positions[this.m_indexA].a=C$i,C$t.positions[this.m_indexB].a=C$r,C$D(C$c)<=.008},C$Ar.prototype.GetDefinition=function(C$t){return C$t},C$Ar.prototype.GetAnchorA=function(C$t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$t)},C$Ar.prototype.GetAnchorB=function(C$t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$t)},C$Ar.prototype.GetReactionForce=function(C$t,C$e){return C$e.x=C$t*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),C$e.y=C$t*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),C$e},C$Ar.prototype.GetReactionTorque=function(C$t){return C$t*this.m_motorImpulse},C$Ar.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$Ar.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$Ar.prototype.GetLocalAxisA=function(){return this.m_localXAxisA},C$Ar.prototype.GetJointTranslation=function(){return this.GetPrismaticJointTranslation()},C$Ar.prototype.GetJointLinearSpeed=function(){return this.GetPrismaticJointSpeed()},C$Ar.prototype.GetJointAngle=function(){return this.GetRevoluteJointAngle()},C$Ar.prototype.GetJointAngularSpeed=function(){return this.GetRevoluteJointSpeed()},C$Ar.prototype.GetPrismaticJointTranslation=function(){var C$t=this.m_bodyA,C$e=this.m_bodyB,C$i=C$t.GetWorldPoint(this.m_localAnchorA,new C$j),C$e=C$e.GetWorldPoint(this.m_localAnchorB,new C$j),C$e=C$j.SubVV(C$e,C$i,new C$j),C$i=C$t.GetWorldVector(this.m_localXAxisA,new C$j);return C$j.DotVV(C$e,C$i)},C$Ar.prototype.GetPrismaticJointSpeed=function(){var C$t=this.m_bodyA,C$e=this.m_bodyB,C$i=(C$j.SubVV(this.m_localAnchorA,C$t.m_sweep.localCenter,this.m_lalcA),C$B.MulRV(C$t.m_xf.q,this.m_lalcA,this.m_rA)),C$n=(C$j.SubVV(this.m_localAnchorB,C$e.m_sweep.localCenter,this.m_lalcB),C$B.MulRV(C$e.m_xf.q,this.m_lalcB,this.m_rB)),C$r=C$j.AddVV(C$t.m_sweep.c,C$i,C$j.s_t0),C$s=C$j.AddVV(C$e.m_sweep.c,C$n,C$j.s_t1),C$s=C$j.SubVV(C$s,C$r,C$j.s_t2),C$r=C$t.GetWorldVector(this.m_localXAxisA,new C$j),C$o=C$t.m_linearVelocity,C$a=C$e.m_linearVelocity,C$t=C$t.m_angularVelocity,C$e=C$e.m_angularVelocity;return C$j.DotVV(C$s,C$j.CrossSV(C$t,C$r,C$j.s_t0))+C$j.DotVV(C$r,C$j.SubVV(C$j.AddVCrossSV(C$a,C$e,C$n,C$j.s_t0),C$j.AddVCrossSV(C$o,C$t,C$i,C$j.s_t1),C$j.s_t0))},C$Ar.prototype.GetRevoluteJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a},C$Ar.prototype.GetRevoluteJointSpeed=function(){var C$t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-C$t},C$Ar.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C$Ar.prototype.EnableMotor=function(C$t){C$t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$t)},C$Ar.prototype.SetMotorSpeed=function(C$t){C$t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$t)},C$Ar.prototype.SetMaxMotorTorque=function(C$t){C$t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=C$t)},C$Ar.prototype.GetMotorTorque=function(C$t){return C$t*this.m_motorImpulse},C$Ar.prototype.Dump=function(C$t){var C$e=this.m_bodyA.m_islandIndex,C$i=this.m_bodyB.m_islandIndex;C$t("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"),C$t("  jd.bodyA = bodies[%d];\n",C$e),C$t("  jd.bodyB = bodies[%d];\n",C$i),C$t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),C$t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),C$t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$Ar.InitVelocityConstraints_s_d=new C$j,C$Ar.InitVelocityConstraints_s_P=new C$j,C$Ar.SolveVelocityConstraints_s_P=new C$j,C$Ar.SolvePositionConstraints_s_d=new C$j,C$Ar.SolvePositionConstraints_s_P=new C$j;var C$xr,C$br=C$Ar;function C$Ar(C$t){var C$e=C$xr.call(this,C$t)||this;return C$e.m_frequencyHz=0,C$e.m_dampingRatio=0,C$e.m_localAnchorA=new C$j,C$e.m_localAnchorB=new C$j,C$e.m_localXAxisA=new C$j,C$e.m_localYAxisA=new C$j,C$e.m_impulse=0,C$e.m_motorImpulse=0,C$e.m_springImpulse=0,C$e.m_maxMotorTorque=0,C$e.m_motorSpeed=0,C$e.m_enableMotor=!1,C$e.m_indexA=0,C$e.m_indexB=0,C$e.m_localCenterA=new C$j,C$e.m_localCenterB=new C$j,C$e.m_invMassA=0,C$e.m_invMassB=0,C$e.m_invIA=0,C$e.m_invIB=0,C$e.m_ax=new C$j,C$e.m_ay=new C$j,C$e.m_sAx=0,C$e.m_sBx=0,C$e.m_sAy=0,C$e.m_sBy=0,C$e.m_mass=0,C$e.m_motorMass=0,C$e.m_springMass=0,C$e.m_bias=0,C$e.m_gamma=0,C$e.m_qA=new C$B,C$e.m_qB=new C$B,C$e.m_lalcA=new C$j,C$e.m_lalcB=new C$j,C$e.m_rA=new C$j,C$e.m_rB=new C$j,C$e.m_frequencyHz=C$f(C$t.frequencyHz,2),C$e.m_dampingRatio=C$f(C$t.dampingRatio,.7),C$e.m_localAnchorA.Copy(C$f(C$t.localAnchorA,C$j.ZERO)),C$e.m_localAnchorB.Copy(C$f(C$t.localAnchorB,C$j.ZERO)),C$e.m_localXAxisA.Copy(C$f(C$t.localAxisA,C$j.UNITX)),C$j.CrossOneV(C$e.m_localXAxisA,C$e.m_localYAxisA),C$e.m_maxMotorTorque=C$f(C$t.maxMotorTorque,0),C$e.m_motorSpeed=C$f(C$t.motorSpeed,0),C$e.m_enableMotor=C$f(C$t.enableMotor,!1),C$e.m_ax.SetZero(),C$e.m_ay.SetZero(),C$e}function C$Cr(C$t,C$e){return C$Y(C$t*C$e)}function C$Sr(C$t,C$e){return C$e<C$t?C$t:C$e}var C$Tr=function(C$t){this.prev=null,this.next=null,this.contact=C$t},C$wr=(C$Er.prototype.GetManifold=function(){return this.m_manifold},C$Er.prototype.GetWorldManifold=function(C$t){var C$e=this.m_fixtureA.GetBody(),C$i=this.m_fixtureB.GetBody(),C$n=this.m_fixtureA.GetShape(),C$r=this.m_fixtureB.GetShape();C$t.Initialize(this.m_manifold,C$e.GetTransform(),C$n.m_radius,C$i.GetTransform(),C$r.m_radius)},C$Er.prototype.IsTouching=function(){return this.m_touchingFlag},C$Er.prototype.SetEnabled=function(C$t){this.m_enabledFlag=C$t},C$Er.prototype.IsEnabled=function(){return this.m_enabledFlag},C$Er.prototype.GetNext=function(){return this.m_next},C$Er.prototype.GetFixtureA=function(){return this.m_fixtureA},C$Er.prototype.GetChildIndexA=function(){return this.m_indexA},C$Er.prototype.GetFixtureB=function(){return this.m_fixtureB},C$Er.prototype.GetChildIndexB=function(){return this.m_indexB},C$Er.prototype.FlagForFiltering=function(){this.m_filterFlag=!0},C$Er.prototype.SetFriction=function(C$t){this.m_friction=C$t},C$Er.prototype.GetFriction=function(){return this.m_friction},C$Er.prototype.ResetFriction=function(){this.m_friction=C$Cr(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},C$Er.prototype.SetRestitution=function(C$t){this.m_restitution=C$t},C$Er.prototype.GetRestitution=function(){return this.m_restitution},C$Er.prototype.ResetRestitution=function(){this.m_restitution=C$Sr(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},C$Er.prototype.SetTangentSpeed=function(C$t){this.m_tangentSpeed=C$t},C$Er.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed},C$Er.prototype.Reset=function(C$t,C$e,C$i,C$n){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=C$t,this.m_fixtureB=C$i,this.m_indexA=C$e,this.m_indexB=C$n,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,delete this.m_nodeA.contact,this.m_nodeA.prev=null,this.m_nodeA.next=null,delete this.m_nodeA.other,delete this.m_nodeB.contact,this.m_nodeB.prev=null,this.m_nodeB.next=null,delete this.m_nodeB.other,this.m_toiCount=0,this.m_friction=C$Cr(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=C$Sr(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},C$Er.prototype.Update=function(C$t){var C$e=this.m_oldManifold,C$e=(this.m_oldManifold=this.m_manifold,this.m_manifold=C$e,!(this.m_enabledFlag=!0)),C$i=this.m_touchingFlag,C$n=this.m_fixtureA.IsSensor(),C$r=this.m_fixtureB.IsSensor(),C$n=C$n||C$r,C$r=this.m_fixtureA.GetBody(),C$s=this.m_fixtureB.GetBody(),C$h=C$r.GetTransform(),C$u=C$s.GetTransform();if(C$n){var C$_=this.m_fixtureA.GetShape(),C$d=this.m_fixtureB.GetShape(),C$e=C$le(C$_,this.m_indexA,C$d,this.m_indexB,C$h,C$u);this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,C$h,C$u),C$e=0<this.m_manifold.pointCount;for(var C$o=0;C$o<this.m_manifold.pointCount;++C$o)for(var C$a=this.m_manifold.points[C$o],C$f=(C$a.normalImpulse=0,C$a.tangentImpulse=0,C$a.id),C$c=0;C$c<this.m_oldManifold.pointCount;++C$c){var C$l=this.m_oldManifold.points[C$c];if(C$l.id.key===C$f.key){C$a.normalImpulse=C$l.normalImpulse,C$a.tangentImpulse=C$l.tangentImpulse;break}}C$e!==C$i&&(C$r.SetAwake(!0),C$s.SetAwake(!0))}this.m_touchingFlag=C$e,!C$i&&C$e&&C$t&&C$t.BeginContact(this),C$i&&!C$e&&C$t&&C$t.EndContact(this),!C$n&&C$e&&C$t&&C$t.PreSolve(this,this.m_oldManifold)},C$Er.prototype.ComputeTOI=function(C$t,C$e){var C$i=C$Er.ComputeTOI_s_input,C$t=(C$i.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),C$i.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),C$i.sweepA.Copy(C$t),C$i.sweepB.Copy(C$e),C$i.tMax=.008,C$Er.ComputeTOI_s_output);return C$ke(C$t,C$i),C$t.t},C$Er.ComputeTOI_s_input=new C$we,C$Er.ComputeTOI_s_output=new C$Ee,C$Er);function C$Er(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_indexA=0,this.m_indexB=0,this.m_manifold=new C$Xt,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new C$Xt,this.m_nodeA=new C$Tr(this),this.m_nodeB=new C$Tr(this)}C$Vi(C$Br,C$Mr=C$wr),C$Br.Create=function(C$t){return new C$Br},C$Br.Destroy=function(C$t,C$e){},C$Br.prototype.Reset=function(C$t,C$e,C$i,C$n){C$Mr.prototype.Reset.call(this,C$t,C$e,C$i,C$n)},C$Br.prototype.Evaluate=function(C$t,C$e,C$i){C$Ue(C$t,this.m_fixtureA.GetShape(),C$e,this.m_fixtureB.GetShape(),C$i)};var C$Mr,C$Ir=C$Br;function C$Br(){return C$Mr.call(this)||this}C$Vi(C$Dr,C$Rr=C$wr),C$Dr.Create=function(C$t){return new C$Dr},C$Dr.Destroy=function(C$t,C$e){},C$Dr.prototype.Reset=function(C$t,C$e,C$i,C$n){C$Rr.prototype.Reset.call(this,C$t,C$e,C$i,C$n)},C$Dr.prototype.Evaluate=function(C$t,C$e,C$i){C$pi(C$t,this.m_fixtureA.GetShape(),C$e,this.m_fixtureB.GetShape(),C$i)};var C$Rr,C$Pr=C$Dr;function C$Dr(){return C$Rr.call(this)||this}C$Vi(C$Or,C$Lr=C$wr),C$Or.Create=function(C$t){return new C$Or},C$Or.Destroy=function(C$t,C$e){},C$Or.prototype.Reset=function(C$t,C$e,C$i,C$n){C$Lr.prototype.Reset.call(this,C$t,C$e,C$i,C$n)},C$Or.prototype.Evaluate=function(C$t,C$e,C$i){C$Xe(C$t,this.m_fixtureA.GetShape(),C$e,this.m_fixtureB.GetShape(),C$i)};var C$Lr,C$Vr=C$Or;function C$Or(){return C$Lr.call(this)||this}C$Vi(C$kr,C$Fr=C$wr),C$kr.Create=function(C$t){return new C$kr},C$kr.Destroy=function(C$t,C$e){},C$kr.prototype.Reset=function(C$t,C$e,C$i,C$n){C$Fr.prototype.Reset.call(this,C$t,C$e,C$i,C$n)},C$kr.prototype.Evaluate=function(C$t,C$e,C$i){C$Si(C$t,this.m_fixtureA.GetShape(),C$e,this.m_fixtureB.GetShape(),C$i)};var C$Fr,C$Nr=C$kr;function C$kr(){return C$Fr.call(this)||this}C$Vi(C$Ur,C$Gr=C$wr),C$Ur.Create=function(C$t){return new C$Ur},C$Ur.Destroy=function(C$t,C$e){},C$Ur.prototype.Reset=function(C$t,C$e,C$i,C$n){C$Gr.prototype.Reset.call(this,C$t,C$e,C$i,C$n)},C$Ur.prototype.Evaluate=function(C$t,C$e,C$i){C$Bi(C$t,this.m_fixtureA.GetShape(),C$e,this.m_fixtureB.GetShape(),C$i)};var C$Gr,C$zr=C$Ur;function C$Ur(){return C$Gr.call(this)||this}C$Vi(C$jr,C$Wr=C$wr),C$jr.Create=function(C$t){return new C$jr},C$jr.Destroy=function(C$t,C$e){},C$jr.prototype.Reset=function(C$t,C$e,C$i,C$n){C$Wr.prototype.Reset.call(this,C$t,C$e,C$i,C$n)},C$jr.prototype.Evaluate=function(C$t,C$e,C$i){var C$n=this.m_fixtureA.GetShape(),C$r=this.m_fixtureB.GetShape(),C$s=C$jr.Evaluate_s_edge;C$n.GetChildEdge(C$s,this.m_indexA),C$Si(C$t,C$s,C$e,C$r,C$i)},C$jr.Evaluate_s_edge=new C$Gi;var C$Wr,C$Hr=C$jr;function C$jr(){return C$Wr.call(this)||this}C$Vi(C$qr,C$Xr=C$wr),C$qr.Create=function(C$t){return new C$qr},C$qr.Destroy=function(C$t,C$e){},C$qr.prototype.Reset=function(C$t,C$e,C$i,C$n){C$Xr.prototype.Reset.call(this,C$t,C$e,C$i,C$n)},C$qr.prototype.Evaluate=function(C$t,C$e,C$i){var C$n=this.m_fixtureA.GetShape(),C$r=this.m_fixtureB.GetShape(),C$s=C$qr.Evaluate_s_edge;C$n.GetChildEdge(C$s,this.m_indexA),C$Bi(C$t,C$s,C$e,C$r,C$i)},C$qr.Evaluate_s_edge=new C$Gi;var C$Xr,C$Yr=C$qr;function C$qr(){return C$Xr.call(this)||this}var C$Jr=function(){this.createFcn=null,this.destroyFcn=null,this.primary=!1},C$Zr=(C$Kr.prototype.AddType=function(C$e,C$t,C$i,C$n){var C$r=this,C$s=C$c(256,function(C$t){return C$e(C$r.m_allocator)});function C$o(C$t){return C$s.pop()||C$e(C$t)}function C$a(C$t,C$e){C$s.push(C$t)}this.m_registers[C$i][C$n].createFcn=C$o,this.m_registers[C$i][C$n].destroyFcn=C$a,this.m_registers[C$i][C$n].primary=!0,C$i!==C$n&&(this.m_registers[C$n][C$i].createFcn=C$o,this.m_registers[C$n][C$i].destroyFcn=C$a,this.m_registers[C$n][C$i].primary=!1)},C$Kr.prototype.InitializeRegisters=function(){this.m_registers=[];for(var C$t=0;C$t<C$H.b2ShapeType.e_shapeTypeCount;C$t++){this.m_registers[C$t]=[];for(var C$e=0;C$e<C$H.b2ShapeType.e_shapeTypeCount;C$e++)this.m_registers[C$t][C$e]=new C$Jr}this.AddType(C$Ir.Create,C$Ir.Destroy,C$H.b2ShapeType.e_circleShape,C$H.b2ShapeType.e_circleShape),this.AddType(C$Vr.Create,C$Vr.Destroy,C$H.b2ShapeType.e_polygonShape,C$H.b2ShapeType.e_circleShape),this.AddType(C$Pr.Create,C$Pr.Destroy,C$H.b2ShapeType.e_polygonShape,C$H.b2ShapeType.e_polygonShape),this.AddType(C$Nr.Create,C$Nr.Destroy,C$H.b2ShapeType.e_edgeShape,C$H.b2ShapeType.e_circleShape),this.AddType(C$zr.Create,C$zr.Destroy,C$H.b2ShapeType.e_edgeShape,C$H.b2ShapeType.e_polygonShape),this.AddType(C$Hr.Create,C$Hr.Destroy,C$H.b2ShapeType.e_chainShape,C$H.b2ShapeType.e_circleShape),this.AddType(C$Yr.Create,C$Yr.Destroy,C$H.b2ShapeType.e_chainShape,C$H.b2ShapeType.e_polygonShape)},C$Kr.prototype.Create=function(C$t,C$e,C$i,C$n){var C$r=C$t.GetType(),C$s=C$i.GetType(),C$r=this.m_registers[C$r][C$s];return C$r.createFcn?(C$s=C$r.createFcn(this.m_allocator),C$r.primary?C$s.Reset(C$t,C$e,C$i,C$n):C$s.Reset(C$i,C$n,C$t,C$e),C$s):null},C$Kr.prototype.Destroy=function(C$t){var C$e=C$t.m_fixtureA,C$i=C$t.m_fixtureB,C$e=(0<C$t.m_manifold.pointCount&&!C$e.IsSensor()&&!C$i.IsSensor()&&(C$e.GetBody().SetAwake(!0),C$i.GetBody().SetAwake(!0)),C$e.GetType()),C$i=C$i.GetType(),C$e=this.m_registers[C$e][C$i];C$e.destroyFcn&&C$e.destroyFcn(C$t,this.m_allocator)},C$Kr);function C$Kr(C$t){this.m_allocator=null,this.m_allocator=C$t,this.InitializeRegisters()}C$$r.prototype.SayGoodbyeJoint=function(C$t){},C$$r.prototype.SayGoodbyeFixture=function(C$t){},C$$r.prototype.SayGoodbyeParticleGroup=function(C$t){},C$$r.prototype.SayGoodbyeParticle=function(C$t,C$e){};var C$Qr=C$$r;function C$$r(){}C$es.prototype.ShouldCollide=function(C$t,C$e){var C$i=C$t.GetBody(),C$n=C$e.GetBody();if(C$n.GetType()===C$H.b2BodyType.b2_staticBody&&C$i.GetType()===C$H.b2BodyType.b2_staticBody)return!1;if(!C$n.ShouldCollideConnected(C$i))return!1;C$n=C$t.GetFilterData(),C$i=C$e.GetFilterData();return C$n.groupIndex===C$i.groupIndex&&0!==C$n.groupIndex?0<C$n.groupIndex:0!=(C$n.maskBits&C$i.categoryBits)&&0!=(C$n.categoryBits&C$i.maskBits)},C$es.prototype.ShouldCollideFixtureParticle=function(C$t,C$e,C$i){return!0},C$es.prototype.ShouldCollideParticleParticle=function(C$t,C$e,C$i){return!0},C$es.b2_defaultFilter=new C$es;var C$ts=C$es;function C$es(){}var C$is=function(){this.normalImpulses=C$h(2),this.tangentImpulses=C$h(2),this.count=0},C$ns=(C$rs.prototype.BeginContact=function(C$t){},C$rs.prototype.EndContact=function(C$t){},C$rs.prototype.BeginContactFixtureParticle=function(C$t,C$e){},C$rs.prototype.EndContactFixtureParticle=function(C$t,C$e){},C$rs.prototype.BeginContactParticleParticle=function(C$t,C$e){},C$rs.prototype.EndContactParticleParticle=function(C$t,C$e){},C$rs.prototype.PreSolve=function(C$t,C$e){},C$rs.prototype.PostSolve=function(C$t,C$e){},C$rs.b2_defaultListener=new C$rs,C$rs);function C$rs(){}C$os.prototype.ReportFixture=function(C$t){return!0},C$os.prototype.ReportParticle=function(C$t,C$e){return!1},C$os.prototype.ShouldQueryParticleSystem=function(C$t){return!0};var C$ss=C$os;function C$os(){}C$cs.prototype.ReportFixture=function(C$t,C$e,C$i,C$n){return C$n},C$cs.prototype.ReportParticle=function(C$t,C$e,C$i,C$n,C$r){return 0},C$cs.prototype.ShouldQueryParticleSystem=function(C$t){return!0};var C$as=C$cs;function C$cs(){}C$hs.prototype.AddPair=function(C$t,C$e){var C$i=C$t.fixture,C$n=C$e.fixture,C$r=C$t.childIndex,C$s=C$e.childIndex,C$o=C$i.GetBody(),C$t=C$n.GetBody();if(C$o!==C$t){for(var C$a=C$t.GetContactList();C$a;){if(C$a.other===C$o){var C$c=C$a.contact.GetFixtureA(),C$l=C$a.contact.GetFixtureB(),C$h=C$a.contact.GetChildIndexA(),C$u=C$a.contact.GetChildIndexB();if(C$c===C$i&&C$l===C$n&&C$h===C$r&&C$u===C$s)return;if(C$c===C$n&&C$l===C$i&&C$h===C$s&&C$u===C$r)return}C$a=C$a.next}this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(C$i,C$n)||null!==(C$e=this.m_contactFactory.Create(C$i,C$r,C$n,C$s))&&(C$i=C$e.GetFixtureA(),C$n=C$e.GetFixtureB(),C$r=C$e.GetChildIndexA(),C$s=C$e.GetChildIndexB(),C$o=C$i.m_body,C$t=C$n.m_body,C$e.m_prev=null,C$e.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=C$e),((this.m_contactList=C$e).m_nodeA.contact=C$e).m_nodeA.other=C$t,C$e.m_nodeA.prev=null,C$e.m_nodeA.next=C$o.m_contactList,null!==C$o.m_contactList&&(C$o.m_contactList.prev=C$e.m_nodeA),C$o.m_contactList=C$e.m_nodeA,(C$e.m_nodeB.contact=C$e).m_nodeB.other=C$o,C$e.m_nodeB.prev=null,C$e.m_nodeB.next=C$t.m_contactList,null!==C$t.m_contactList&&(C$t.m_contactList.prev=C$e.m_nodeB),C$t.m_contactList=C$e.m_nodeB,C$i.IsSensor()||C$n.IsSensor()||(C$o.SetAwake(!0),C$t.SetAwake(!0)),++this.m_contactCount)}},C$hs.prototype.FindNewContacts=function(){var C$i=this;this.m_broadPhase.UpdatePairs(function(C$t,C$e){C$i.AddPair(C$t,C$e)})},C$hs.prototype.Destroy=function(C$t){var C$e=C$t.GetFixtureA(),C$i=C$t.GetFixtureB(),C$e=C$e.GetBody(),C$i=C$i.GetBody();this.m_contactListener&&C$t.IsTouching()&&this.m_contactListener.EndContact(C$t),C$t.m_prev&&(C$t.m_prev.m_next=C$t.m_next),C$t.m_next&&(C$t.m_next.m_prev=C$t.m_prev),C$t===this.m_contactList&&(this.m_contactList=C$t.m_next),C$t.m_nodeA.prev&&(C$t.m_nodeA.prev.next=C$t.m_nodeA.next),C$t.m_nodeA.next&&(C$t.m_nodeA.next.prev=C$t.m_nodeA.prev),C$t.m_nodeA===C$e.m_contactList&&(C$e.m_contactList=C$t.m_nodeA.next),C$t.m_nodeB.prev&&(C$t.m_nodeB.prev.next=C$t.m_nodeB.next),C$t.m_nodeB.next&&(C$t.m_nodeB.next.prev=C$t.m_nodeB.prev),C$t.m_nodeB===C$i.m_contactList&&(C$i.m_contactList=C$t.m_nodeB.next),this.m_contactFactory.Destroy(C$t),--this.m_contactCount},C$hs.prototype.Collide=function(){for(var C$t=this.m_contactList;C$t;){var C$e=C$t.GetFixtureA(),C$i=C$t.GetFixtureB(),C$n=C$t.GetChildIndexA(),C$r=C$t.GetChildIndexB(),C$s=C$e.GetBody(),C$o=C$i.GetBody();if(C$t.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(C$e,C$i)){C$t=(C$a=C$t).m_next;this.Destroy(C$a);continue}C$t.m_filterFlag=!1}var C$a,C$s=C$s.IsAwake()&&C$s.m_type!==C$H.b2BodyType.b2_staticBody,C$o=C$o.IsAwake()&&C$o.m_type!==C$H.b2BodyType.b2_staticBody;C$s||C$o?(C$s=C$e.m_proxies[C$n].treeNode,C$o=C$i.m_proxies[C$r].treeNode,C$re(C$s.aabb,C$o.aabb)?(C$t.Update(this.m_contactListener),C$t=C$t.m_next):(C$t=(C$a=C$t).m_next,this.Destroy(C$a))):C$t=C$t.m_next}};var C$ls=C$hs;function C$hs(){this.m_broadPhase=new C$me,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=C$ts.b2_defaultFilter,this.m_contactListener=C$ns.b2_defaultListener,this.m_allocator=null,this.m_contactFactory=new C$Zr(this.m_allocator)}C$_s.prototype.Reset=function(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this};var C$us=C$_s;function C$_s(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}C$fs.prototype.Copy=function(C$t){return this.dt=C$t.dt,this.inv_dt=C$t.inv_dt,this.dtRatio=C$t.dtRatio,this.positionIterations=C$t.positionIterations,this.velocityIterations=C$t.velocityIterations,this.particleIterations=C$t.particleIterations,this.warmStarting=C$t.warmStarting,this};var C$ds=C$fs;function C$fs(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}C$ms.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$ms})};var C$ps=C$ms;function C$ms(){this.c=new C$j,this.a=0}C$gs.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$gs})};var C$ys=C$gs;function C$gs(){this.v=new C$j,this.w=0}var C$vs=function(){this.step=new C$ds},C$xs=(C$bs.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$bs})},C$bs);function C$bs(){this.rA=new C$j,this.rB=new C$j,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}C$Cs.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$Cs})};var C$As=C$Cs;function C$Cs(){this.points=C$xs.MakeArray(2),this.normal=new C$j,this.tangent=new C$j,this.normalMass=new C$k,this.K=new C$k,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}C$Ts.MakeArray=function(C$t){return C$c(C$t,function(C$t){return new C$Ts})};var C$Ss=C$Ts;function C$Ts(){this.localPoints=C$j.MakeArray(2),this.localNormal=new C$j,this.localPoint=new C$j,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new C$j,this.localCenterB=new C$j,this.invIA=0,this.invIB=0,this.type=C$H.b2ManifoldType.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}var C$ws=function(){this.step=new C$ds,this.count=0,this.allocator=null},C$Es=(C$Ms.prototype.Initialize=function(C$t,C$e,C$i,C$n){var C$r=C$Ms.Initialize_s_pointA,C$s=C$Ms.Initialize_s_pointB,C$o=C$Ms.Initialize_s_planePoint,C$a=C$Ms.Initialize_s_clipPoint;switch(C$t.type){case C$H.b2ManifoldType.e_circles:C$R.MulXV(C$e,C$t.localPoint,C$r),C$R.MulXV(C$i,C$t.localPoints[0],C$s),C$j.SubVV(C$s,C$r,this.normal).SelfNormalize(),C$j.MidVV(C$r,C$s,this.point),this.separation=C$j.DotVV(C$j.SubVV(C$s,C$r,C$j.s_t0),this.normal)-C$t.radiusA-C$t.radiusB;break;case C$H.b2ManifoldType.e_faceA:C$B.MulRV(C$e.q,C$t.localNormal,this.normal),C$R.MulXV(C$e,C$t.localPoint,C$o),C$R.MulXV(C$i,C$t.localPoints[C$n],C$a),this.separation=C$j.DotVV(C$j.SubVV(C$a,C$o,C$j.s_t0),this.normal)-C$t.radiusA-C$t.radiusB,this.point.Copy(C$a);break;case C$H.b2ManifoldType.e_faceB:C$B.MulRV(C$i.q,C$t.localNormal,this.normal),C$R.MulXV(C$i,C$t.localPoint,C$o),C$R.MulXV(C$e,C$t.localPoints[C$n],C$a),this.separation=C$j.DotVV(C$j.SubVV(C$a,C$o,C$j.s_t0),this.normal)-C$t.radiusA-C$t.radiusB,this.point.Copy(C$a),this.normal.SelfNeg()}},C$Ms.Initialize_s_pointA=new C$j,C$Ms.Initialize_s_pointB=new C$j,C$Ms.Initialize_s_planePoint=new C$j,C$Ms.Initialize_s_clipPoint=new C$j,C$Ms);function C$Ms(){this.normal=new C$j,this.point=new C$j,this.separation=0}C$Bs.prototype.Initialize=function(C$t){if(this.m_step.Copy(C$t.step),this.m_allocator=C$t.allocator,this.m_count=C$t.count,this.m_positionConstraints.length<this.m_count)for(var C$h=C$V(2*this.m_positionConstraints.length,this.m_count);this.m_positionConstraints.length<C$h;)this.m_positionConstraints[this.m_positionConstraints.length]=new C$Ss;if(this.m_velocityConstraints.length<this.m_count)for(C$h=C$V(2*this.m_velocityConstraints.length,this.m_count);this.m_velocityConstraints.length<C$h;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new C$As;this.m_positions=C$t.positions,this.m_velocities=C$t.velocities,this.m_contacts=C$t.contacts;for(var C$e=0;C$e<this.m_count;++C$e){var C$i=this.m_contacts[C$e],C$n=C$i.m_fixtureA,C$r=C$i.m_fixtureB,C$u=C$n.GetShape(),C$_=C$r.GetShape(),C$u=C$u.m_radius,C$_=C$_.m_radius,C$n=C$n.GetBody(),C$r=C$r.GetBody(),C$s=C$i.GetManifold(),C$d=C$s.pointCount,C$o=this.m_velocityConstraints[C$e],C$a=(C$o.friction=C$i.m_friction,C$o.restitution=C$i.m_restitution,C$o.tangentSpeed=C$i.m_tangentSpeed,C$o.indexA=C$n.m_islandIndex,C$o.indexB=C$r.m_islandIndex,C$o.invMassA=C$n.m_invMass,C$o.invMassB=C$r.m_invMass,C$o.invIA=C$n.m_invI,C$o.invIB=C$r.m_invI,C$o.contactIndex=C$e,C$o.pointCount=C$d,C$o.K.SetZero(),C$o.normalMass.SetZero(),this.m_positionConstraints[C$e]);C$a.indexA=C$n.m_islandIndex,C$a.indexB=C$r.m_islandIndex,C$a.invMassA=C$n.m_invMass,C$a.invMassB=C$r.m_invMass,C$a.localCenterA.Copy(C$n.m_sweep.localCenter),C$a.localCenterB.Copy(C$r.m_sweep.localCenter),C$a.invIA=C$n.m_invI,C$a.invIB=C$r.m_invI,C$a.localNormal.Copy(C$s.localNormal),C$a.localPoint.Copy(C$s.localPoint),C$a.pointCount=C$d,C$a.radiusA=C$u,C$a.radiusB=C$_,C$a.type=C$s.type;for(var C$c=0;C$c<C$d;++C$c){var C$f=C$s.points[C$c],C$l=C$o.points[C$c];this.m_step.warmStarting?(C$l.normalImpulse=this.m_step.dtRatio*C$f.normalImpulse,C$l.tangentImpulse=this.m_step.dtRatio*C$f.tangentImpulse):(C$l.normalImpulse=0,C$l.tangentImpulse=0),C$l.rA.SetZero(),C$l.rB.SetZero(),C$l.normalMass=0,C$l.tangentMass=0,C$l.velocityBias=0,C$a.localPoints[C$c].Copy(C$f.localPoint)}}return this},C$Bs.prototype.InitializeVelocityConstraints=function(){for(var C$t=C$Bs.InitializeVelocityConstraints_s_xfA,C$e=C$Bs.InitializeVelocityConstraints_s_xfB,C$i=C$Bs.InitializeVelocityConstraints_s_worldManifold,C$h=0;C$h<this.m_count;++C$h){for(var C$n=this.m_velocityConstraints[C$h],C$r=this.m_positionConstraints[C$h],C$u=C$r.radiusA,C$_=C$r.radiusB,C$d=this.m_contacts[C$n.contactIndex].GetManifold(),C$s=C$n.indexA,C$f=C$n.indexB,C$p=C$n.invMassA,C$m=C$n.invMassB,C$y=C$n.invIA,C$g=C$n.invIB,C$v=C$r.localCenterA,C$r=C$r.localCenterB,C$x=this.m_positions[C$s].c,C$b=this.m_positions[C$s].a,C$A=this.m_velocities[C$s].v,C$C=this.m_velocities[C$s].w,C$S=this.m_positions[C$f].c,C$s=this.m_positions[C$f].a,C$T=this.m_velocities[C$f].v,C$w=this.m_velocities[C$f].w,C$E=(C$t.q.SetAngle(C$b),C$e.q.SetAngle(C$s),C$j.SubVV(C$x,C$B.MulRV(C$t.q,C$v,C$j.s_t0),C$t.p),C$j.SubVV(C$S,C$B.MulRV(C$e.q,C$r,C$j.s_t0),C$e.p),C$i.Initialize(C$d,C$t,C$u,C$e,C$_),C$n.normal.Copy(C$i.normal),C$j.CrossVOne(C$n.normal,C$n.tangent),C$n.pointCount),C$o=0;C$o<C$E;++C$o){var C$a=C$n.points[C$o],C$c=(C$j.SubVV(C$i.points[C$o],C$x,C$a.rA),C$j.SubVV(C$i.points[C$o],C$S,C$a.rB),C$j.CrossVV(C$a.rA,C$n.normal)),C$l=C$j.CrossVV(C$a.rB,C$n.normal),C$c=C$p+C$m+C$y*C$c*C$c+C$g*C$l*C$l,C$l=(C$a.normalMass=0<C$c?1/C$c:0,C$n.tangent),C$c=C$j.CrossVV(C$a.rA,C$l),C$l=C$j.CrossVV(C$a.rB,C$l),C$c=C$p+C$m+C$y*C$c*C$c+C$g*C$l*C$l,C$l=(C$a.tangentMass=0<C$c?1/C$c:0,C$a.velocityBias=0,C$j.DotVV(C$n.normal,C$j.SubVV(C$j.AddVCrossSV(C$T,C$w,C$a.rB,C$j.s_t0),C$j.AddVCrossSV(C$A,C$C,C$a.rA,C$j.s_t1),C$j.s_t0)));C$l<-1&&(C$a.velocityBias+=-C$n.restitution*C$l)}C$n.pointCount}},C$Bs.prototype.WarmStart=function(){for(var C$t=C$Bs.WarmStart_s_P,C$e=0;C$e<this.m_count;++C$e){for(var C$i=this.m_velocityConstraints[C$e],C$n=C$i.indexA,C$r=C$i.indexB,C$s=C$i.invMassA,C$h=C$i.invIA,C$u=C$i.invMassB,C$_=C$i.invIB,C$d=C$i.pointCount,C$f=this.m_velocities[C$n].v,C$o=this.m_velocities[C$n].w,C$p=this.m_velocities[C$r].v,C$a=this.m_velocities[C$r].w,C$m=C$i.normal,C$y=C$i.tangent,C$c=0;C$c<C$d;++C$c){var C$l=C$i.points[C$c];C$j.AddVV(C$j.MulSV(C$l.normalImpulse,C$m,C$j.s_t0),C$j.MulSV(C$l.tangentImpulse,C$y,C$j.s_t1),C$t),C$o-=C$h*C$j.CrossVV(C$l.rA,C$t),C$f.SelfMulSub(C$s,C$t),C$a+=C$_*C$j.CrossVV(C$l.rB,C$t),C$p.SelfMulAdd(C$u,C$t)}this.m_velocities[C$n].w=C$o,this.m_velocities[C$r].w=C$a}},C$Bs.prototype.SolveVelocityConstraints=function(){for(var C$t=C$Bs.SolveVelocityConstraints_s_dv,C$e=C$Bs.SolveVelocityConstraints_s_P,C$h=0;C$h<this.m_count;++C$h){for(var C$i=this.m_velocityConstraints[C$h],C$u=C$i.indexA,C$_=C$i.indexB,C$d=C$i.invMassA,C$f=C$i.invIA,C$p=C$i.invMassB,C$m=C$i.invIB,C$y=C$i.pointCount,C$n=this.m_velocities[C$u].v,C$r=this.m_velocities[C$u].w,C$s=this.m_velocities[C$_].v,C$o=this.m_velocities[C$_].w,C$g=C$i.normal,C$v=C$i.tangent,C$x=C$i.friction,C$a=0;C$a<C$y;++C$a){var C$c=C$i.points[C$a],C$b=(C$j.SubVV(C$j.AddVCrossSV(C$s,C$o,C$c.rB,C$j.s_t0),C$j.AddVCrossSV(C$n,C$r,C$c.rA,C$j.s_t1),C$t),C$j.DotVV(C$t,C$v)-C$i.tangentSpeed),C$l=C$c.tangentMass*-C$b,C$b=C$x*C$c.normalImpulse;C$l=(C$A=C$O(C$c.tangentImpulse+C$l,-C$b,C$b))-C$c.tangentImpulse,C$c.tangentImpulse=C$A,C$j.MulSV(C$l,C$v,C$e),C$n.SelfMulSub(C$d,C$e),C$r-=C$f*C$j.CrossVV(C$c.rA,C$e),C$s.SelfMulAdd(C$p,C$e),C$o+=C$m*C$j.CrossVV(C$c.rB,C$e)}C$i.pointCount;for(C$a=0;C$a<C$y;++C$a){var C$A,C$c=C$i.points[C$a],C$C=(C$j.SubVV(C$j.AddVCrossSV(C$s,C$o,C$c.rB,C$j.s_t0),C$j.AddVCrossSV(C$n,C$r,C$c.rA,C$j.s_t1),C$t),C$j.DotVV(C$t,C$g)),C$l=-C$c.normalMass*(C$C-C$c.velocityBias);C$l=(C$A=C$V(C$c.normalImpulse+C$l,0))-C$c.normalImpulse,C$c.normalImpulse=C$A,C$j.MulSV(C$l,C$g,C$e),C$n.SelfMulSub(C$d,C$e),C$r-=C$f*C$j.CrossVV(C$c.rA,C$e),C$s.SelfMulAdd(C$p,C$e),C$o+=C$m*C$j.CrossVV(C$c.rB,C$e)}this.m_velocities[C$u].w=C$r,this.m_velocities[C$_].w=C$o}},C$Bs.prototype.StoreImpulses=function(){for(var C$t=0;C$t<this.m_count;++C$t)for(var C$e=this.m_velocityConstraints[C$t],C$i=this.m_contacts[C$e.contactIndex].GetManifold(),C$n=0;C$n<C$e.pointCount;++C$n)C$i.points[C$n].normalImpulse=C$e.points[C$n].normalImpulse,C$i.points[C$n].tangentImpulse=C$e.points[C$n].tangentImpulse},C$Bs.prototype.SolvePositionConstraints=function(){for(var C$t=C$Bs.SolvePositionConstraints_s_xfA,C$e=C$Bs.SolvePositionConstraints_s_xfB,C$i=C$Bs.SolvePositionConstraints_s_psm,C$n=C$Bs.SolvePositionConstraints_s_rA,C$r=C$Bs.SolvePositionConstraints_s_rB,C$s=C$Bs.SolvePositionConstraints_s_P,C$o=0,C$a=0;C$a<this.m_count;++C$a){for(var C$c=this.m_positionConstraints[C$a],C$h=C$c.indexA,C$u=C$c.indexB,C$_=C$c.localCenterA,C$d=C$c.invMassA,C$f=C$c.invIA,C$p=C$c.localCenterB,C$m=C$c.invMassB,C$y=C$c.invIB,C$g=C$c.pointCount,C$v=this.m_positions[C$h].c,C$x=this.m_positions[C$h].a,C$b=this.m_positions[C$u].c,C$A=this.m_positions[C$u].a,C$C=0;C$C<C$g;++C$C){C$t.q.SetAngle(C$x),C$e.q.SetAngle(C$A),C$j.SubVV(C$v,C$B.MulRV(C$t.q,C$_,C$j.s_t0),C$t.p),C$j.SubVV(C$b,C$B.MulRV(C$e.q,C$p,C$j.s_t0),C$e.p),C$i.Initialize(C$c,C$t,C$e,C$C);var C$S=C$i.normal,C$T=C$i.point,C$l=C$i.separation,C$T=(C$j.SubVV(C$T,C$v,C$n),C$j.SubVV(C$T,C$b,C$r),C$o=C$L(C$o,C$l),C$O(.2*(C$l+.008),-.2,0)),C$l=C$j.CrossVV(C$n,C$S),C$w=C$j.CrossVV(C$r,C$S),C$l=C$d+C$m+C$f*C$l*C$l+C$y*C$w*C$w;C$j.MulSV(0<C$l?-C$T/C$l:0,C$S,C$s),C$v.SelfMulSub(C$d,C$s),C$x-=C$f*C$j.CrossVV(C$n,C$s),C$b.SelfMulAdd(C$m,C$s),C$A+=C$y*C$j.CrossVV(C$r,C$s)}this.m_positions[C$h].a=C$x,this.m_positions[C$u].a=C$A}return-.024<C$o},C$Bs.prototype.SolveTOIPositionConstraints=function(C$h,C$u){for(var C$t=C$Bs.SolveTOIPositionConstraints_s_xfA,C$e=C$Bs.SolveTOIPositionConstraints_s_xfB,C$i=C$Bs.SolveTOIPositionConstraints_s_psm,C$n=C$Bs.SolveTOIPositionConstraints_s_rA,C$r=C$Bs.SolveTOIPositionConstraints_s_rB,C$s=C$Bs.SolveTOIPositionConstraints_s_P,C$_=0,C$d=0;C$d<this.m_count;++C$d){for(var C$o=this.m_positionConstraints[C$d],C$a=C$o.indexA,C$c=C$o.indexB,C$f=C$o.localCenterA,C$p=C$o.localCenterB,C$m=C$o.pointCount,C$y=0,C$g=0,C$v=(C$a!==C$h&&C$a!==C$u||(C$y=C$o.invMassA,C$g=C$o.invIA),0),C$x=0,C$b=(C$c!==C$h&&C$c!==C$u||(C$v=C$o.invMassB,C$x=C$o.invIB),this.m_positions[C$a].c),C$A=this.m_positions[C$a].a,C$C=this.m_positions[C$c].c,C$S=this.m_positions[C$c].a,C$T=0;C$T<C$m;++C$T){C$t.q.SetAngle(C$A),C$e.q.SetAngle(C$S),C$j.SubVV(C$b,C$B.MulRV(C$t.q,C$f,C$j.s_t0),C$t.p),C$j.SubVV(C$C,C$B.MulRV(C$e.q,C$p,C$j.s_t0),C$e.p),C$i.Initialize(C$o,C$t,C$e,C$T);var C$w=C$i.normal,C$E=C$i.point,C$l=C$i.separation,C$E=(C$j.SubVV(C$E,C$b,C$n),C$j.SubVV(C$E,C$C,C$r),C$_=C$L(C$_,C$l),C$O(.75*(C$l+.008),-.2,0)),C$l=C$j.CrossVV(C$n,C$w),C$M=C$j.CrossVV(C$r,C$w),C$l=C$y+C$v+C$g*C$l*C$l+C$x*C$M*C$M;C$j.MulSV(0<C$l?-C$E/C$l:0,C$w,C$s),C$b.SelfMulSub(C$y,C$s),C$A-=C$g*C$j.CrossVV(C$n,C$s),C$C.SelfMulAdd(C$v,C$s),C$S+=C$x*C$j.CrossVV(C$r,C$s)}this.m_positions[C$a].a=C$A,this.m_positions[C$c].a=C$S}return-.012<=C$_},C$Bs.InitializeVelocityConstraints_s_xfA=new C$R,C$Bs.InitializeVelocityConstraints_s_xfB=new C$R,C$Bs.InitializeVelocityConstraints_s_worldManifold=new C$qt,C$Bs.WarmStart_s_P=new C$j,C$Bs.SolveVelocityConstraints_s_dv=new C$j,C$Bs.SolveVelocityConstraints_s_dv1=new C$j,C$Bs.SolveVelocityConstraints_s_dv2=new C$j,C$Bs.SolveVelocityConstraints_s_P=new C$j,C$Bs.SolveVelocityConstraints_s_a=new C$j,C$Bs.SolveVelocityConstraints_s_b=new C$j,C$Bs.SolveVelocityConstraints_s_x=new C$j,C$Bs.SolveVelocityConstraints_s_d=new C$j,C$Bs.SolveVelocityConstraints_s_P1=new C$j,C$Bs.SolveVelocityConstraints_s_P2=new C$j,C$Bs.SolveVelocityConstraints_s_P1P2=new C$j,C$Bs.SolvePositionConstraints_s_xfA=new C$R,C$Bs.SolvePositionConstraints_s_xfB=new C$R,C$Bs.SolvePositionConstraints_s_psm=new C$Es,C$Bs.SolvePositionConstraints_s_rA=new C$j,C$Bs.SolvePositionConstraints_s_rB=new C$j,C$Bs.SolvePositionConstraints_s_P=new C$j,C$Bs.SolveTOIPositionConstraints_s_xfA=new C$R,C$Bs.SolveTOIPositionConstraints_s_xfB=new C$R,C$Bs.SolveTOIPositionConstraints_s_psm=new C$Es,C$Bs.SolveTOIPositionConstraints_s_rA=new C$j,C$Bs.SolveTOIPositionConstraints_s_rB=new C$j,C$Bs.SolveTOIPositionConstraints_s_P=new C$j;var C$Is=C$Bs;function C$Bs(){this.m_step=new C$ds,this.m_allocator=null,this.m_positionConstraints=C$Ss.MakeArray(1024),this.m_velocityConstraints=C$As.MakeArray(1024),this.m_count=0}C$Ps.prototype.Initialize=function(C$t,C$e,C$i,C$n,C$r){if(this.m_bodyCapacity=C$t,this.m_contactCapacity=C$e,this.m_jointCapacity=C$i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=C$n,this.m_listener=C$r,this.m_positions.length<C$t)for(var C$s=C$V(2*this.m_positions.length,C$t);this.m_positions.length<C$s;)this.m_positions[this.m_positions.length]=new C$ps;if(this.m_velocities.length<C$t)for(C$s=C$V(2*this.m_velocities.length,C$t);this.m_velocities.length<C$s;)this.m_velocities[this.m_velocities.length]=new C$ys},C$Ps.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},C$Ps.prototype.AddBody=function(C$t){C$t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=C$t},C$Ps.prototype.AddContact=function(C$t){this.m_contacts[this.m_contactCount++]=C$t},C$Ps.prototype.AddJoint=function(C$t){this.m_joints[this.m_jointCount++]=C$t},C$Ps.prototype.Solve=function(C$h,C$t,C$u,C$_){for(var C$e=C$Ps.s_timer.Reset(),C$i=C$t.dt,C$n=0;C$n<this.m_bodyCount;++C$n){var C$r=this.m_bodies[C$n],C$d=(this.m_positions[C$n].c.Copy(C$r.m_sweep.c),C$r.m_sweep.a),C$s=this.m_velocities[C$n].v.Copy(C$r.m_linearVelocity),C$o=C$r.m_angularVelocity;C$r.m_sweep.c0.Copy(C$r.m_sweep.c),C$r.m_sweep.a0=C$r.m_sweep.a,C$r.m_type===C$H.b2BodyType.b2_dynamicBody&&(C$s.x+=C$i*(C$r.m_gravityScale*C$u.x+C$r.m_invMass*C$r.m_force.x),C$s.y+=C$i*(C$r.m_gravityScale*C$u.y+C$r.m_invMass*C$r.m_force.y),C$o+=C$i*C$r.m_invI*C$r.m_torque,C$s.SelfMul(1/(1+C$i*C$r.m_linearDamping)),C$o*=1/(1+C$i*C$r.m_angularDamping)),this.m_positions[C$n].a=C$d,this.m_velocities[C$n].w=C$o}C$e.Reset();var C$a=C$Ps.s_solverData,C$c=(C$a.step.Copy(C$t),C$a.positions=this.m_positions,C$a.velocities=this.m_velocities,C$Ps.s_contactSolverDef),C$l=(C$c.step.Copy(C$t),C$c.contacts=this.m_contacts,C$c.count=this.m_contactCount,C$c.positions=this.m_positions,C$c.velocities=this.m_velocities,C$c.allocator=this.m_allocator,C$Ps.s_contactSolver.Initialize(C$c));C$l.InitializeVelocityConstraints(),C$t.warmStarting&&C$l.WarmStart();for(C$n=0;C$n<this.m_jointCount;++C$n)this.m_joints[C$n].InitVelocityConstraints(C$a);C$h.solveInit=C$e.GetMilliseconds(),C$e.Reset();for(C$n=0;C$n<C$t.velocityIterations;++C$n){for(var C$f=0;C$f<this.m_jointCount;++C$f)this.m_joints[C$f].SolveVelocityConstraints(C$a);C$l.SolveVelocityConstraints()}C$l.StoreImpulses(),C$h.solveVelocity=C$e.GetMilliseconds();for(C$n=0;C$n<this.m_bodyCount;++C$n){var C$p,C$m=this.m_positions[C$n].c,C$d=this.m_positions[C$n].a,C$s=this.m_velocities[C$n].v,C$o=this.m_velocities[C$n].w,C$y=C$j.MulSV(C$i,C$s,C$Ps.s_translation),C$y=(4<C$j.DotVV(C$y,C$y)&&(C$p=2/C$y.Length(),C$s.SelfMul(C$p)),C$i*C$o);C$w<C$y*C$y&&(C$o*=C$p=C$T/C$D(C$y)),C$m.x+=C$i*C$s.x,C$m.y+=C$i*C$s.y,C$d+=C$i*C$o,this.m_positions[C$n].a=C$d,this.m_velocities[C$n].w=C$o}C$e.Reset();for(var C$g=!1,C$n=0;C$n<C$t.positionIterations;++C$n){for(var C$v=C$l.SolvePositionConstraints(),C$x=!0,C$f=0;C$f<this.m_jointCount;++C$f)var C$b=this.m_joints[C$f].SolvePositionConstraints(C$a),C$x=C$x&&C$b;if(C$v&&C$x){C$g=!0;break}}for(C$n=0;C$n<this.m_bodyCount;++C$n){var C$A=this.m_bodies[C$n];C$A.m_sweep.c.Copy(this.m_positions[C$n].c),C$A.m_sweep.a=this.m_positions[C$n].a,C$A.m_linearVelocity.Copy(this.m_velocities[C$n].v),C$A.m_angularVelocity=this.m_velocities[C$n].w,C$A.SynchronizeTransform()}if(C$h.solvePosition=C$e.GetMilliseconds(),this.Report(C$l.m_velocityConstraints),C$_){for(var C$C=C$P,C$n=0;C$n<this.m_bodyCount;++C$n)(C$r=this.m_bodies[C$n]).GetType()!==C$H.b2BodyType.b2_staticBody&&(C$C=!C$r.m_autoSleepFlag||.0012184696791469947<C$r.m_angularVelocity*C$r.m_angularVelocity||1e-4<C$j.DotVV(C$r.m_linearVelocity,C$r.m_linearVelocity)?C$r.m_sleepTime=0:(C$r.m_sleepTime+=C$i,C$L(C$C,C$r.m_sleepTime)));if(.5<=C$C&&C$g)for(C$n=0;C$n<this.m_bodyCount;++C$n)(C$r=this.m_bodies[C$n]).SetAwake(!1)}},C$Ps.prototype.SolveTOI=function(C$t,C$e,C$i){for(var C$n=0;C$n<this.m_bodyCount;++C$n){var C$r=this.m_bodies[C$n];this.m_positions[C$n].c.Copy(C$r.m_sweep.c),this.m_positions[C$n].a=C$r.m_sweep.a,this.m_velocities[C$n].v.Copy(C$r.m_linearVelocity),this.m_velocities[C$n].w=C$r.m_angularVelocity}for(var C$s=C$Ps.s_contactSolverDef,C$o=(C$s.contacts=this.m_contacts,C$s.count=this.m_contactCount,C$s.allocator=this.m_allocator,C$s.step.Copy(C$t),C$s.positions=this.m_positions,C$s.velocities=this.m_velocities,C$Ps.s_contactSolver.Initialize(C$s)),C$n=0;C$n<C$t.positionIterations&&!C$o.SolveTOIPositionConstraints(C$e,C$i);++C$n);this.m_bodies[C$e].m_sweep.c0.Copy(this.m_positions[C$e].c),this.m_bodies[C$e].m_sweep.a0=this.m_positions[C$e].a,this.m_bodies[C$i].m_sweep.c0.Copy(this.m_positions[C$i].c),this.m_bodies[C$i].m_sweep.a0=this.m_positions[C$i].a,C$o.InitializeVelocityConstraints();for(C$n=0;C$n<C$t.velocityIterations;++C$n)C$o.SolveVelocityConstraints();for(var C$a=C$t.dt,C$n=0;C$n<this.m_bodyCount;++C$n){var C$h,C$u=this.m_positions[C$n].c,C$_=this.m_positions[C$n].a,C$d=this.m_velocities[C$n].v,C$c=this.m_velocities[C$n].w,C$l=C$j.MulSV(C$a,C$d,C$Ps.s_translation),C$l=(4<C$j.DotVV(C$l,C$l)&&(C$h=2/C$l.Length(),C$d.SelfMul(C$h)),C$a*C$c),C$l=(C$w<C$l*C$l&&(C$c*=C$h=C$T/C$D(C$l)),C$u.SelfMulAdd(C$a,C$d),C$_+=C$a*C$c,this.m_positions[C$n].a=C$_,this.m_velocities[C$n].w=C$c,this.m_bodies[C$n]);C$l.m_sweep.c.Copy(C$u),C$l.m_sweep.a=C$_,C$l.m_linearVelocity.Copy(C$d),C$l.m_angularVelocity=C$c,C$l.SynchronizeTransform()}this.Report(C$o.m_velocityConstraints)},C$Ps.prototype.Report=function(C$t){if(null!==this.m_listener)for(var C$e=0;C$e<this.m_contactCount;++C$e){var C$i=this.m_contacts[C$e];if(C$i){var C$n=C$t[C$e],C$r=C$Ps.s_impulse;C$r.count=C$n.pointCount;for(var C$s=0;C$s<C$n.pointCount;++C$s)C$r.normalImpulses[C$s]=C$n.points[C$s].normalImpulse,C$r.tangentImpulses[C$s]=C$n.points[C$s].tangentImpulse;this.m_listener.PostSolve(C$i,C$r)}}},C$Ps.s_timer=new C$et,C$Ps.s_solverData=new C$vs,C$Ps.s_contactSolverDef=new C$ws,C$Ps.s_contactSolver=new C$Is,C$Ps.s_translation=new C$j,C$Ps.s_impulse=new C$is;var C$Rs=C$Ps;function C$Ps(){this.m_allocator=null,this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=C$ps.MakeArray(1024),this.m_velocities=C$ys.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}(C$Hs=C$H.b2ParticleFlag||(C$H.b2ParticleFlag={}))[C$Hs.b2_waterParticle=0]="b2_waterParticle",C$Hs[C$Hs.b2_zombieParticle=2]="b2_zombieParticle",C$Hs[C$Hs.b2_wallParticle=4]="b2_wallParticle",C$Hs[C$Hs.b2_springParticle=8]="b2_springParticle",C$Hs[C$Hs.b2_elasticParticle=16]="b2_elasticParticle",C$Hs[C$Hs.b2_viscousParticle=32]="b2_viscousParticle",C$Hs[C$Hs.b2_powderParticle=64]="b2_powderParticle",C$Hs[C$Hs.b2_tensileParticle=128]="b2_tensileParticle",C$Hs[C$Hs.b2_colorMixingParticle=256]="b2_colorMixingParticle",C$Hs[C$Hs.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",C$Hs[C$Hs.b2_barrierParticle=1024]="b2_barrierParticle",C$Hs[C$Hs.b2_staticPressureParticle=2048]="b2_staticPressureParticle",C$Hs[C$Hs.b2_reactiveParticle=4096]="b2_reactiveParticle",C$Hs[C$Hs.b2_repulsiveParticle=8192]="b2_repulsiveParticle",C$Hs[C$Hs.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",C$Hs[C$Hs.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",C$Hs[C$Hs.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",C$Hs[C$Hs.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle";var C$Ds=function(){this.flags=0,this.position=new C$j,this.velocity=new C$j,this.color=new C$K(0,0,0,0),this.lifetime=0,this.userData=null,this.group=null};function C$Ls(C$t,C$e,C$i){return C$O(Math.ceil(Math.sqrt(C$t/(.01*C$e))*C$i),1,8)}C$Os.prototype.GetIndex=function(){return this.m_index},C$Os.prototype.SetIndex=function(C$t){this.m_index=C$t};var C$Vs=C$Os;function C$Os(){this.m_index=-1}(C$Hs=C$H.b2ParticleGroupFlag||(C$H.b2ParticleGroupFlag={}))[C$Hs.b2_solidParticleGroup=1]="b2_solidParticleGroup",C$Hs[C$Hs.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",C$Hs[C$Hs.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",C$Hs[C$Hs.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",C$Hs[C$Hs.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",C$Hs[C$Hs.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask";var C$Fs=function(){this.flags=0,this.groupFlags=0,this.position=new C$j,this.angle=0,this.linearVelocity=new C$j,this.angularVelocity=0,this.color=new C$K,this.strength=1,this.shapeCount=0,this.stride=0,this.particleCount=0,this.lifetime=0,this.userData=null,this.group=null},C$Ns=(C$ks.prototype.GetNext=function(){return this.m_next},C$ks.prototype.GetParticleSystem=function(){return this.m_system},C$ks.prototype.GetParticleCount=function(){return this.m_lastIndex-this.m_firstIndex},C$ks.prototype.GetBufferIndex=function(){return this.m_firstIndex},C$ks.prototype.ContainsParticle=function(C$t){return this.m_firstIndex<=C$t&&C$t<this.m_lastIndex},C$ks.prototype.GetAllParticleFlags=function(){if(!this.m_system.m_flagsBuffer.data)throw new Error;for(var C$t=0,C$e=this.m_firstIndex;C$e<this.m_lastIndex;C$e++)C$t|=this.m_system.m_flagsBuffer.data[C$e];return C$t},C$ks.prototype.GetGroupFlags=function(){return this.m_groupFlags},C$ks.prototype.SetGroupFlags=function(C$t){C$t|=this.m_groupFlags&C$H.b2ParticleGroupFlag.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,C$t)},C$ks.prototype.GetMass=function(){return this.UpdateStatistics(),this.m_mass},C$ks.prototype.GetInertia=function(){return this.UpdateStatistics(),this.m_inertia},C$ks.prototype.GetCenter=function(){return this.UpdateStatistics(),this.m_center},C$ks.prototype.GetLinearVelocity=function(){return this.UpdateStatistics(),this.m_linearVelocity},C$ks.prototype.GetAngularVelocity=function(){return this.UpdateStatistics(),this.m_angularVelocity},C$ks.prototype.GetTransform=function(){return this.m_transform},C$ks.prototype.GetPosition=function(){return this.m_transform.p},C$ks.prototype.GetAngle=function(){return this.m_transform.q.GetAngle()},C$ks.prototype.GetLinearVelocityFromWorldPoint=function(C$t,C$e){var C$i=C$ks.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),C$j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$j.SubVV(C$t,this.m_center,C$i),C$e)},C$ks.prototype.GetUserData=function(){return this.m_userData},C$ks.prototype.SetUserData=function(C$t){this.m_userData=C$t},C$ks.prototype.ApplyForce=function(C$t){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,C$t)},C$ks.prototype.ApplyLinearImpulse=function(C$t){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,C$t)},C$ks.prototype.DestroyParticles=function(C$t){if(this.m_system.m_world.IsLocked())throw new Error;for(var C$e=this.m_firstIndex;C$e<this.m_lastIndex;C$e++)this.m_system.DestroyParticle(C$e,C$t)},C$ks.prototype.UpdateStatistics=function(){if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;var C$t=new C$j,C$e=new C$j;if(this.m_timestamp!==this.m_system.m_timestamp){var C$i=this.m_system.GetParticleMass();this.m_mass=C$i*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(var C$n,C$r=this.m_firstIndex;C$r<this.m_lastIndex;C$r++)this.m_center.SelfMulAdd(C$i,this.m_system.m_positionBuffer.data[C$r]),this.m_linearVelocity.SelfMulAdd(C$i,this.m_system.m_velocityBuffer.data[C$r]);0<this.m_mass&&(C$n=1/this.m_mass,this.m_center.SelfMul(C$n),this.m_linearVelocity.SelfMul(C$n)),this.m_inertia=0,this.m_angularVelocity=0;for(C$r=this.m_firstIndex;C$r<this.m_lastIndex;C$r++)C$j.SubVV(this.m_system.m_positionBuffer.data[C$r],this.m_center,C$t),C$j.SubVV(this.m_system.m_velocityBuffer.data[C$r],this.m_linearVelocity,C$e),this.m_inertia+=C$i*C$j.DotVV(C$t,C$t),this.m_angularVelocity+=C$i*C$j.CrossVV(C$t,C$e);0<this.m_inertia&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}},C$ks.GetLinearVelocityFromWorldPoint_s_t0=new C$j,C$ks);function C$ks(C$t){this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new C$j,this.m_linearVelocity=new C$j,this.m_angularVelocity=0,this.m_transform=new C$R,this.m_userData=null,this.m_system=C$t}C$zs.prototype.Push=function(C$t){if(this.m_back>=this.m_capacity){for(var C$e=this.m_front;C$e<this.m_back;C$e++)this.m_buffer[C$e-this.m_front]=this.m_buffer[C$e];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(0<this.m_capacity?(this.m_buffer.concat(C$c(this.m_capacity,function(C$t){return null})),this.m_capacity*=2):(this.m_buffer.concat(C$c(1,function(C$t){return null})),this.m_capacity=1))}this.m_buffer[this.m_back]=C$t,this.m_back++},C$zs.prototype.Pop=function(){this.m_buffer[this.m_front]=null,this.m_front++},C$zs.prototype.Empty=function(){return this.m_front===this.m_back},C$zs.prototype.Front=function(){var C$t=this.m_buffer[this.m_front];if(!C$t)throw new Error;return C$t};var C$Gs=C$zs;function C$zs(C$t){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=C$c(C$t,function(C$t){return null}),this.m_capacity=C$t}C$Ws.prototype.AddGenerator=function(C$t,C$e,C$i){var C$n=this.m_generatorBuffer[this.m_generatorCount++];C$n.center.Copy(C$t),C$n.tag=C$e,C$n.necessary=C$i},C$Ws.prototype.Generate=function(C$h,C$u){for(var C$_=1/C$h,C$t=new C$j(+C$P,+C$P),C$d=new C$j(-C$P,-C$P),C$f=0,C$e=0;C$e<this.m_generatorCount;C$e++)(C$o=this.m_generatorBuffer[C$e]).necessary&&(C$j.MinV(C$t,C$o.center,C$t),C$j.MaxV(C$d,C$o.center,C$d),++C$f);if(0===C$f)return this.m_countX=0,void(this.m_countY=0);C$t.x-=C$u,C$t.y-=C$u,C$d.x+=C$u,C$d.y+=C$u,this.m_countX=1+Math.floor(C$_*(C$d.x-C$t.x)),this.m_countY=1+Math.floor(C$_*(C$d.y-C$t.y)),this.m_diagram=[];for(var C$i=new C$Gs(4*this.m_countX*this.m_countY),C$e=0;C$e<this.m_generatorCount;C$e++){(C$o=this.m_generatorBuffer[C$e]).center.SelfSub(C$t).SelfMul(C$_);var C$n=Math.floor(C$o.center.x),C$r=Math.floor(C$o.center.y);0<=C$n&&0<=C$r&&C$n<this.m_countX&&C$r<this.m_countY&&C$i.Push(new C$Ws.Task(C$n,C$r,C$n+C$r*this.m_countX,C$o))}for(;!C$i.Empty();){var C$n=(C$a=C$i.Front()).m_x,C$r=C$a.m_y,C$s=C$a.m_i,C$o=C$a.m_generator;C$i.Pop(),this.m_diagram[C$s]||(this.m_diagram[C$s]=C$o,0<C$n&&C$i.Push(new C$Ws.Task(C$n-1,C$r,C$s-1,C$o)),0<C$r&&C$i.Push(new C$Ws.Task(C$n,C$r-1,C$s-this.m_countX,C$o)),C$n<this.m_countX-1&&C$i.Push(new C$Ws.Task(C$n+1,C$r,C$s+1,C$o)),C$r<this.m_countY-1&&C$i.Push(new C$Ws.Task(C$n,C$r+1,C$s+this.m_countX,C$o)))}for(C$r=0;C$r<this.m_countY;C$r++)for(C$n=0;C$n<this.m_countX-1;C$n++){C$s=C$n+C$r*this.m_countX;(C$c=this.m_diagram[C$s])!==(C$l=this.m_diagram[C$s+1])&&(C$i.Push(new C$Ws.Task(C$n,C$r,C$s,C$l)),C$i.Push(new C$Ws.Task(C$n+1,C$r,C$s+1,C$c)))}for(C$r=0;C$r<this.m_countY-1;C$r++)for(C$n=0;C$n<this.m_countX;C$n++){C$s=C$n+C$r*this.m_countX;(C$c=this.m_diagram[C$s])!==(C$l=this.m_diagram[C$s+this.m_countX])&&(C$i.Push(new C$Ws.Task(C$n,C$r,C$s,C$l)),C$i.Push(new C$Ws.Task(C$n,C$r+1,C$s+this.m_countX,C$c)))}for(;!C$i.Empty();){var C$a,C$c,C$l,C$p,C$m,C$y,C$n=(C$a=C$i.Front()).m_x,C$r=C$a.m_y,C$s=C$a.m_i,C$e=C$a.m_generator;C$i.Pop(),(C$c=this.m_diagram[C$s])!==(C$l=C$e)&&(C$p=C$c.center.x-C$n,C$m=C$c.center.y-C$r,(C$y=C$l.center.x-C$n)*C$y+(C$y=C$l.center.y-C$r)*C$y<C$p*C$p+C$m*C$m&&(this.m_diagram[C$s]=C$l,0<C$n&&C$i.Push(new C$Ws.Task(C$n-1,C$r,C$s-1,C$l)),0<C$r&&C$i.Push(new C$Ws.Task(C$n,C$r-1,C$s-this.m_countX,C$l)),C$n<this.m_countX-1&&C$i.Push(new C$Ws.Task(C$n+1,C$r,C$s+1,C$l)),C$r<this.m_countY-1&&C$i.Push(new C$Ws.Task(C$n,C$r+1,C$s+this.m_countX,C$l))))}},C$Ws.prototype.GetNodes=function(C$t){for(var C$e=0;C$e<this.m_countY-1;C$e++)for(var C$i=0;C$i<this.m_countX-1;C$i++){var C$n=C$i+C$e*this.m_countX,C$r=this.m_diagram[C$n],C$s=this.m_diagram[C$n+1],C$o=this.m_diagram[C$n+this.m_countX],C$n=this.m_diagram[C$n+1+this.m_countX];C$s!==C$o&&(C$r!==C$s&&C$r!==C$o&&(C$r.necessary||C$s.necessary||C$o.necessary)&&C$t(C$r.tag,C$s.tag,C$o.tag),C$n!==C$s&&C$n!==C$o&&(C$r.necessary||C$s.necessary||C$o.necessary)&&C$t(C$s.tag,C$n.tag,C$o.tag))}};var C$Us=C$Ws;function C$Ws(C$t){this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=[],this.m_generatorBuffer=C$c(C$t,function(C$t){return new C$Ws.Generator}),this.m_generatorCapacity=C$t}var C$Hs=C$Us=C$Ws||{};function C$js(C$t,C$e,C$i,C$n){this.m_x=C$t,this.m_y=C$e,this.m_i=C$i,this.m_generator=C$n}function C$Xs(C$t,C$e,C$i){var C$n=C$t[C$e];C$t[C$e]=C$t[C$i],C$t[C$i]=C$n}function C$Ys(C$t,C$e){return C$t<C$e}function C$qs(C$t,C$e,C$i,C$n){void 0===C$e&&(C$e=0),void 0===C$i&&(C$i=C$t.length-C$e),void 0===C$n&&(C$n=C$Ys);for(var C$r=C$e,C$s=[],C$o=0;;){for(;C$r+1<C$i;C$i++){var C$a=C$t[C$r+Math.floor(Math.random()*(C$i-C$r))];C$s[C$o++]=C$i;for(var C$c=C$r-1;;){for(;C$n(C$t[++C$c],C$a););for(;C$n(C$a,C$t[--C$i]););if(C$i<=C$c)break;C$Xs(C$t,C$c,C$i)}}if(0===C$o)break;C$r=C$i,C$i=C$s[--C$o]}return C$t}function C$Js(C$t,C$e,C$i,C$n){return C$qs(C$t,C$e=void 0===C$e?0:C$e,C$i=void 0===C$i?C$t.length-C$e:C$i,C$n=void 0===C$n?C$Ys:C$n)}function C$Zs(C$t,C$e,C$i){void 0===C$i&&(C$i=C$t.length);for(var C$n=0,C$r=0;C$r<C$i;++C$r)C$e(C$t[C$r])||(C$r!==C$n?C$Xs(C$t,C$n++,C$r):++C$n);return C$n}function C$Ks(C$t,C$e,C$i,C$n,C$r){void 0===C$r&&(C$r=C$Ys);for(var C$s=C$i-C$e;0<C$s;){var C$o=Math.floor(C$s/2),C$a=C$e+C$o;C$r(C$t[C$a],C$n)?(C$e=++C$a,C$s-=C$o+1):C$s=C$o}return C$e}function C$Qs(C$t,C$e,C$i,C$n,C$r){void 0===C$r&&(C$r=C$Ys);for(var C$s=C$i-C$e;0<C$s;){var C$o=Math.floor(C$s/2),C$a=C$e+C$o;C$r(C$n,C$t[C$a])?C$s=C$o:(C$e=++C$a,C$s-=C$o+1)}return C$e}function C$$s(C$t,C$e,C$i,C$n){for(var C$r=C$i;C$e!==C$r;)C$Xs(C$t,C$e++,C$r++),C$r===C$n?C$r=C$i:C$e===C$i&&(C$i=C$r)}C$Hs.Generator=function(){this.center=new C$j,this.tag=0,this.necessary=!1},C$Hs.Task=C$js;C$eo.prototype.Append=function(){return this.count>=this.capacity&&this.Grow(),this.count++},C$eo.prototype.Reserve=function(C$t){if(!(this.capacity>=C$t)){for(var C$e=this.capacity;C$e<C$t;++C$e)this.data[C$e]=this.allocator();this.capacity=C$t}},C$eo.prototype.Grow=function(){var C$t=this.capacity?2*this.capacity:256;this.Reserve(C$t)},C$eo.prototype.Free=function(){0!==this.data.length&&(this.data=[],this.capacity=0,this.count=0)},C$eo.prototype.Shorten=function(C$t){},C$eo.prototype.Data=function(){return this.data},C$eo.prototype.GetCount=function(){return this.count},C$eo.prototype.SetCount=function(C$t){this.count=C$t},C$eo.prototype.GetCapacity=function(){return this.capacity},C$eo.prototype.RemoveIf=function(C$t){this.count=C$Zs(this.data,C$t,this.count)},C$eo.prototype.Unique=function(C$t){this.count=function(C$t,C$e,C$i,C$n){if(C$e===C$i)return C$i;for(var C$r=C$e;++C$e!==C$i;)C$n(C$t[C$r],C$t[C$e])||C$Xs(C$t,++C$r,C$e);return++C$r}(this.data,0,this.count,C$t)};var C$to=C$eo;function C$eo(C$t){this.data=[],this.count=0,this.capacity=0,this.allocator=C$t}C$Vi(C$ro,C$io=C$ss),C$ro.prototype.ShouldQueryParticleSystem=function(C$t){return!1},C$ro.prototype.ReportFixture=function(C$t){if(C$t.IsSensor())return!0;for(var C$e=C$t.GetShape().GetChildCount(),C$i=0;C$i<C$e;C$i++)for(var C$n,C$r=C$t.GetAABB(C$i),C$s=this.m_system.GetInsideBoundsEnumerator(C$r);0<=(C$n=C$s.GetNext());)this.ReportFixtureAndParticle(C$t,C$i,C$n);return!0},C$ro.prototype.ReportParticle=function(C$t,C$e){return!1},C$ro.prototype.ReportFixtureAndParticle=function(C$t,C$e,C$i){};var C$io,C$no=C$ro;function C$ro(C$t){var C$e=C$io.call(this)||this;return C$e.m_system=C$t,C$e}C$oo.prototype.SetIndices=function(C$t,C$e){this.indexA=C$t,this.indexB=C$e},C$oo.prototype.SetWeight=function(C$t){this.weight=C$t},C$oo.prototype.SetNormal=function(C$t){this.normal.Copy(C$t)},C$oo.prototype.SetFlags=function(C$t){this.flags=C$t},C$oo.prototype.GetIndexA=function(){return this.indexA},C$oo.prototype.GetIndexB=function(){return this.indexB},C$oo.prototype.GetWeight=function(){return this.weight},C$oo.prototype.GetNormal=function(){return this.normal},C$oo.prototype.GetFlags=function(){return this.flags},C$oo.prototype.IsEqual=function(C$t){return this.indexA===C$t.indexA&&this.indexB===C$t.indexB&&this.flags===C$t.flags&&this.weight===C$t.weight&&this.normal.x===C$t.normal.x&&this.normal.y===C$t.normal.y},C$oo.prototype.IsNotEqual=function(C$t){return!this.IsEqual(C$t)},C$oo.prototype.ApproximatelyEqual=function(C$t){return this.indexA===C$t.indexA&&this.indexB===C$t.indexB&&this.flags===C$t.flags&&C$D(this.weight-C$t.weight)<.01&&C$j.DistanceSquaredVV(this.normal,C$t.normal)<1e-4};var C$so=C$oo;function C$oo(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new C$j,this.flags=0}var C$ao=function(){this.index=0,this.weight=0,this.normal=new C$j,this.mass=0},C$co=function(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0},C$lo=function(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new C$j(0,0),this.pb=new C$j(0,0),this.pc=new C$j(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0},C$ho=(C$uo.prototype.Copy=function(C$t){return this.strictContactCheck=C$t.strictContactCheck,this.density=C$t.density,this.gravityScale=C$t.gravityScale,this.radius=C$t.radius,this.maxCount=C$t.maxCount,this.pressureStrength=C$t.pressureStrength,this.dampingStrength=C$t.dampingStrength,this.elasticStrength=C$t.elasticStrength,this.springStrength=C$t.springStrength,this.viscousStrength=C$t.viscousStrength,this.surfaceTensionPressureStrength=C$t.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=C$t.surfaceTensionNormalStrength,this.repulsiveStrength=C$t.repulsiveStrength,this.powderStrength=C$t.powderStrength,this.ejectionStrength=C$t.ejectionStrength,this.staticPressureStrength=C$t.staticPressureStrength,this.staticPressureRelaxation=C$t.staticPressureRelaxation,this.staticPressureIterations=C$t.staticPressureIterations,this.colorMixingStrength=C$t.colorMixingStrength,this.destroyByAge=C$t.destroyByAge,this.lifetimeGranularity=C$t.lifetimeGranularity,this},C$uo.prototype.Clone=function(){return(new C$uo).Copy(this)},C$uo);function C$uo(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}function C$X(C$t,C$e){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new C$X.UserOverridableBuffer,this.m_flagsBuffer=new C$X.UserOverridableBuffer,this.m_positionBuffer=new C$X.UserOverridableBuffer,this.m_velocityBuffer=new C$X.UserOverridableBuffer,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new C$X.UserOverridableBuffer,this.m_groupBuffer=[],this.m_userDataBuffer=new C$X.UserOverridableBuffer,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new C$X.UserOverridableBuffer,this.m_bodyContactCountBuffer=new C$X.UserOverridableBuffer,this.m_consecutiveContactStepsBuffer=new C$X.UserOverridableBuffer,this.m_stuckParticleBuffer=new C$to(function(){return 0}),this.m_proxyBuffer=new C$to(function(){return new C$X.Proxy}),this.m_contactBuffer=new C$to(function(){return new C$so}),this.m_bodyContactBuffer=new C$to(function(){return new C$ao}),this.m_pairBuffer=new C$to(function(){return new C$co}),this.m_triadBuffer=new C$to(function(){return new C$lo}),this.m_expirationTimeBuffer=new C$X.UserOverridableBuffer,this.m_indexByExpirationTimeBuffer=new C$X.UserOverridableBuffer,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new C$ho,this.m_prev=null,this.m_next=null,this.SetStrictContactCheck(C$t.strictContactCheck),this.SetDensity(C$t.density),this.SetGravityScale(C$t.gravityScale),this.SetRadius(C$t.radius),this.SetMaxParticleCount(C$t.maxCount),this.m_def=C$t.Clone(),this.m_world=C$e,this.SetDestructionByAge(this.m_def.destroyByAge)}C$H.b2ParticleSystem=(C$X.computeTag=function(C$t,C$e){return(C$e+C$X.yOffset>>>0<<C$X.yShift)+(C$X.xScale*C$t+C$X.xOffset>>>0)>>>0},C$X.computeRelativeTag=function(C$t,C$e,C$i){return C$t+(C$i<<C$X.yShift)+(C$e<<C$X.xShift)>>>0},C$X.prototype.Drop=function(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)},C$X.prototype.CreateParticle=function(C$t){if(this.m_world.IsLocked())throw new Error;if(this.m_count>=this.m_internalAllocatedCapacity&&(C$e=this.m_count?2*this.m_count:256,this.ReallocateInternalAllocatedBuffers(C$e)),this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return-1;this.DestroyOldestParticle(0,!1),this.SolveZombie()}var C$e=this.m_count++;if(!this.m_flagsBuffer.data)throw new Error;if(this.m_flagsBuffer.data[C$e]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$e]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$e]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$e]=0),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;this.m_positionBuffer.data[C$e]=(this.m_positionBuffer.data[C$e]||new C$j).Copy(C$f(C$t.position,C$j.ZERO)),this.m_velocityBuffer.data[C$e]=(this.m_velocityBuffer.data[C$e]||new C$j).Copy(C$f(C$t.velocity,C$j.ZERO)),this.m_weightBuffer[C$e]=0,this.m_forceBuffer[C$e]=(this.m_forceBuffer[C$e]||new C$j).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$e]=0),this.m_depthBuffer&&(this.m_depthBuffer[C$e]=0);var C$i=(new C$K).Copy(C$f(C$t.color,C$K.ZERO)),C$i=(!this.m_colorBuffer.data&&C$i.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[C$e]=(this.m_colorBuffer.data[C$e]||new C$K).Copy(C$i)),(this.m_userDataBuffer.data||C$t.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[C$e]=C$t.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[C$e]=null),this.m_proxyBuffer.data[this.m_proxyBuffer.Append()]),C$n=C$f(C$t.lifetime,0),C$r=0<C$n;if(this.m_expirationTimeBuffer.data||C$r){if(this.SetParticleLifetime(C$e,C$r?C$n:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_indexByExpirationTimeBuffer.data[C$e]=C$e}C$i.index=C$e;C$r=C$f(C$t.group,null);return(this.m_groupBuffer[C$e]=C$r)&&(C$r.m_firstIndex<C$r.m_lastIndex?this.RotateBuffer(C$r.m_firstIndex,C$r.m_lastIndex,C$e):C$r.m_firstIndex=C$e,C$r.m_lastIndex=1+C$e),this.SetParticleFlags(C$e,C$f(C$t.flags,0)),C$e},C$X.prototype.GetParticleHandleFromIndex=function(C$t){this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);var C$e=this.m_handleIndexBuffer.data[C$t];return C$e||((C$e=new C$Vs).SetIndex(C$t),this.m_handleIndexBuffer.data[C$t]=C$e)},C$X.prototype.DestroyParticle=function(C$t,C$e){if(void 0===C$e&&(C$e=!1),!this.m_flagsBuffer.data)throw new Error;var C$i=C$H.b2ParticleFlag.b2_zombieParticle;C$e&&(C$i|=C$H.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(C$t,this.m_flagsBuffer.data[C$t]|C$i)},C$X.prototype.DestroyOldestParticle=function(C$t,C$e){void 0===C$e&&(C$e=!1);var C$i=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;if(!this.m_expirationTimeBuffer.data)throw new Error;C$i=this.m_indexByExpirationTimeBuffer.data[C$i-(C$t+1)],C$t=this.m_indexByExpirationTimeBuffer.data[C$t];this.DestroyParticle(0<this.m_expirationTimeBuffer.data[C$i]?C$i:C$t,C$e)},C$X.prototype.DestroyParticlesInShape=function(C$t,C$e,C$i){void 0===C$i&&(C$i=!1);var C$n=C$X.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked())throw new Error;C$i=new C$X.DestroyParticlesInShapeCallback(this,C$t,C$e,C$i);return C$t.ComputeAABB(C$n,C$e,0),this.m_world.QueryAABB(C$i,C$n),C$i.Destroyed()},C$X.prototype.CreateParticleGroup=function(C$t){var C$e=C$X.CreateParticleGroup_s_transform;if(this.m_world.IsLocked())throw new Error;var C$i=C$e,C$e=(C$i.SetPositionAngle(C$f(C$t.position,C$j.ZERO),C$f(C$t.angle,0)),this.m_count);if(C$t.shape&&this.CreateParticlesWithShapeForGroup(C$t.shape,C$t,C$i),C$t.shapes&&this.CreateParticlesWithShapesForGroup(C$t.shapes,C$f(C$t.shapeCount,C$t.shapes.length),C$t,C$i),C$t.positionData)for(var C$n=C$f(C$t.particleCount,C$t.positionData.length),C$r=0;C$r<C$n;C$r++){var C$s=C$t.positionData[C$r];this.CreateParticleForGroup(C$t,C$i,C$s)}var C$o=this.m_count,C$a=new C$Ns(this);C$a.m_firstIndex=C$e,C$a.m_lastIndex=C$o,C$a.m_strength=C$f(C$t.strength,1),C$a.m_userData=C$t.userData,C$a.m_transform.Copy(C$i),C$a.m_prev=null,C$a.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=C$a),this.m_groupList=C$a,++this.m_groupCount;for(C$r=C$e;C$r<C$o;C$r++)this.m_groupBuffer[C$r]=C$a;this.SetGroupFlags(C$a,C$f(C$t.groupFlags,0));var C$c=new C$X.ConnectionFilter;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(C$e,C$o,C$c),C$t.group&&(this.JoinParticleGroups(C$t.group,C$a),C$a=C$t.group),C$a},C$X.prototype.JoinParticleGroups=function(C$t,C$e){if(this.m_world.IsLocked())throw new Error;this.RotateBuffer(C$e.m_firstIndex,C$e.m_lastIndex,this.m_count),this.RotateBuffer(C$t.m_firstIndex,C$t.m_lastIndex,C$e.m_firstIndex);var C$i=new C$X.JoinParticleGroupsFilter(C$e.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(C$t.m_firstIndex,C$e.m_lastIndex,C$i);for(var C$n=C$e.m_firstIndex;C$n<C$e.m_lastIndex;C$n++)this.m_groupBuffer[C$n]=C$t;C$i=C$t.m_groupFlags|C$e.m_groupFlags;this.SetGroupFlags(C$t,C$i),C$t.m_lastIndex=C$e.m_lastIndex,C$e.m_firstIndex=C$e.m_lastIndex,this.DestroyParticleGroup(C$e)},C$X.prototype.SplitParticleGroup=function(C$t){this.UpdateContacts(!0);var C$e=C$c(C$t.GetParticleCount(),function(C$t){return new C$X.ParticleListNode}),C$i=(C$X.InitializeParticleLists(C$t,C$e),this.MergeParticleListsInContact(C$t,C$e),C$X.FindLongestParticleList(C$t,C$e));this.MergeZombieParticleListNodes(C$t,C$e,C$i),this.CreateParticleGroupsFromParticleList(C$t,C$e,C$i),this.UpdatePairsAndTriadsWithParticleList(C$t,C$e)},C$X.prototype.GetParticleGroupList=function(){return this.m_groupList},C$X.prototype.GetParticleGroupCount=function(){return this.m_groupCount},C$X.prototype.GetParticleCount=function(){return this.m_count},C$X.prototype.GetMaxParticleCount=function(){return this.m_def.maxCount},C$X.prototype.SetMaxParticleCount=function(C$t){this.m_def.maxCount=C$t},C$X.prototype.GetAllParticleFlags=function(){return this.m_allParticleFlags},C$X.prototype.GetAllGroupFlags=function(){return this.m_allGroupFlags},C$X.prototype.SetPaused=function(C$t){this.m_paused=C$t},C$X.prototype.GetPaused=function(){return this.m_paused},C$X.prototype.SetDensity=function(C$t){this.m_def.density=C$t,this.m_inverseDensity=1/this.m_def.density},C$X.prototype.GetDensity=function(){return this.m_def.density},C$X.prototype.SetGravityScale=function(C$t){this.m_def.gravityScale=C$t},C$X.prototype.GetGravityScale=function(){return this.m_def.gravityScale},C$X.prototype.SetDamping=function(C$t){this.m_def.dampingStrength=C$t},C$X.prototype.GetDamping=function(){return this.m_def.dampingStrength},C$X.prototype.SetStaticPressureIterations=function(C$t){this.m_def.staticPressureIterations=C$t},C$X.prototype.GetStaticPressureIterations=function(){return this.m_def.staticPressureIterations},C$X.prototype.SetRadius=function(C$t){this.m_particleDiameter=2*C$t,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter},C$X.prototype.GetRadius=function(){return this.m_particleDiameter/2},C$X.prototype.GetPositionBuffer=function(){if(!this.m_positionBuffer.data)throw new Error;return this.m_positionBuffer.data},C$X.prototype.GetVelocityBuffer=function(){if(!this.m_velocityBuffer.data)throw new Error;return this.m_velocityBuffer.data},C$X.prototype.GetColorBuffer=function(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data},C$X.prototype.GetGroupBuffer=function(){return this.m_groupBuffer},C$X.prototype.GetWeightBuffer=function(){return this.m_weightBuffer},C$X.prototype.GetUserDataBuffer=function(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data},C$X.prototype.GetFlagsBuffer=function(){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data},C$X.prototype.SetParticleFlags=function(C$t,C$e){if(!this.m_flagsBuffer.data)throw new Error;this.m_flagsBuffer.data[C$t]&~C$e&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&C$e&&(C$e&C$H.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),C$e&C$H.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=C$e),this.m_flagsBuffer.data[C$t]=C$e},C$X.prototype.GetParticleFlags=function(C$t){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data[C$t]},C$X.prototype.SetFlagsBuffer=function(C$t,C$e){this.SetUserOverridableBuffer(this.m_flagsBuffer,C$t,C$e)},C$X.prototype.SetPositionBuffer=function(C$t,C$e){this.SetUserOverridableBuffer(this.m_positionBuffer,C$t,C$e)},C$X.prototype.SetVelocityBuffer=function(C$t,C$e){this.SetUserOverridableBuffer(this.m_velocityBuffer,C$t,C$e)},C$X.prototype.SetColorBuffer=function(C$t,C$e){this.SetUserOverridableBuffer(this.m_colorBuffer,C$t,C$e)},C$X.prototype.SetUserDataBuffer=function(C$t,C$e){this.SetUserOverridableBuffer(this.m_userDataBuffer,C$t,C$e)},C$X.prototype.GetContacts=function(){return this.m_contactBuffer.data},C$X.prototype.GetContactCount=function(){return this.m_contactBuffer.count},C$X.prototype.GetBodyContacts=function(){return this.m_bodyContactBuffer.data},C$X.prototype.GetBodyContactCount=function(){return this.m_bodyContactBuffer.count},C$X.prototype.GetPairs=function(){return this.m_pairBuffer.data},C$X.prototype.GetPairCount=function(){return this.m_pairBuffer.count},C$X.prototype.GetTriads=function(){return this.m_triadBuffer.data},C$X.prototype.GetTriadCount=function(){return this.m_triadBuffer.count},C$X.prototype.SetStuckThreshold=function(C$t){0<(this.m_stuckThreshold=C$t)&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))},C$X.prototype.GetStuckCandidates=function(){return this.m_stuckParticleBuffer.Data()},C$X.prototype.GetStuckCandidateCount=function(){return this.m_stuckParticleBuffer.GetCount()},C$X.prototype.ComputeCollisionEnergy=function(){if(!this.m_velocityBuffer.data)throw new Error;for(var C$t=C$X.ComputeCollisionEnergy_s_v,C$e=this.m_velocityBuffer.data,C$i=0,C$n=0;C$n<this.m_contactBuffer.count;C$n++){var C$r=this.m_contactBuffer.data[C$n],C$s=C$r.indexA,C$o=C$r.indexB,C$r=C$r.normal,C$o=C$j.SubVV(C$e[C$o],C$e[C$s],C$t),C$s=C$j.DotVV(C$o,C$r);C$s<0&&(C$i+=C$s*C$s)}return.5*this.GetParticleMass()*C$i},C$X.prototype.SetStrictContactCheck=function(C$t){this.m_def.strictContactCheck=C$t},C$X.prototype.GetStrictContactCheck=function(){return this.m_def.strictContactCheck},C$X.prototype.SetParticleLifetime=function(C$t,C$e){var C$i=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),C$i)for(var C$n=this.GetParticleCount(),C$r=0;C$r<C$n;++C$r)this.m_indexByExpirationTimeBuffer.data[C$r]=C$r;C$i=C$e/this.m_def.lifetimeGranularity,C$e=0<C$i?this.GetQuantizedTimeElapsed()+C$i:C$i;C$e!==this.m_expirationTimeBuffer.data[C$t]&&(this.m_expirationTimeBuffer.data[C$t]=C$e,this.m_expirationTimeBufferRequiresSorting=!0)},C$X.prototype.GetParticleLifetime=function(C$t){return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[C$t])},C$X.prototype.SetDestructionByAge=function(C$t){C$t&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=C$t},C$X.prototype.GetDestructionByAge=function(){return this.m_def.destroyByAge},C$X.prototype.GetExpirationTimeBuffer=function(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data},C$X.prototype.ExpirationTimeToLifetime=function(C$t){return(0<C$t?C$t-this.GetQuantizedTimeElapsed():C$t)*this.m_def.lifetimeGranularity},C$X.prototype.GetIndexByExpirationTimeBuffer=function(){if(this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),!this.m_indexByExpirationTimeBuffer.data)throw new Error;return this.m_indexByExpirationTimeBuffer.data},C$X.prototype.ParticleApplyLinearImpulse=function(C$t,C$e){this.ApplyLinearImpulse(C$t,C$t+1,C$e)},C$X.prototype.ApplyLinearImpulse=function(C$t,C$e,C$i){if(!this.m_velocityBuffer.data)throw new Error;for(var C$n=this.m_velocityBuffer.data,C$r=(C$e-C$t)*this.GetParticleMass(),C$s=(new C$j).Copy(C$i).SelfMul(1/C$r),C$o=C$t;C$o<C$e;C$o++)C$n[C$o].SelfAdd(C$s)},C$X.IsSignificantForce=function(C$t){return 0!==C$t.x||0!==C$t.y},C$X.prototype.ParticleApplyForce=function(C$t,C$e){if(!this.m_flagsBuffer.data)throw new Error;C$X.IsSignificantForce(C$e)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[C$t])&&(this.PrepareForceBuffer(),this.m_forceBuffer[C$t].SelfAdd(C$e))},C$X.prototype.ApplyForce=function(C$t,C$e,C$i){var C$n=(new C$j).Copy(C$i).SelfMul(1/(C$e-C$t));if(C$X.IsSignificantForce(C$n)){this.PrepareForceBuffer();for(var C$r=C$t;C$r<C$e;C$r++)this.m_forceBuffer[C$r].SelfAdd(C$n)}},C$X.prototype.GetNext=function(){return this.m_next},C$X.prototype.QueryAABB=function(C$t,C$e){if(0!==this.m_proxyBuffer.count){var C$i=this.m_proxyBuffer.count,C$n=C$Ks(this.m_proxyBuffer.data,0,C$i,C$X.computeTag(this.m_inverseDiameter*C$e.lowerBound.x,this.m_inverseDiameter*C$e.lowerBound.y),C$X.Proxy.CompareProxyTag),C$r=C$Qs(this.m_proxyBuffer.data,C$n,C$i,C$X.computeTag(this.m_inverseDiameter*C$e.upperBound.x,this.m_inverseDiameter*C$e.upperBound.y),C$X.Proxy.CompareTagProxy);if(!this.m_positionBuffer.data)throw new Error;for(var C$s=this.m_positionBuffer.data,C$o=C$n;C$o<C$r;++C$o){var C$a=this.m_proxyBuffer.data[C$o].index,C$c=C$s[C$a];if(C$e.lowerBound.x<C$c.x&&C$c.x<C$e.upperBound.x&&C$e.lowerBound.y<C$c.y&&C$c.y<C$e.upperBound.y&&!C$t.ReportParticle(this,C$a))break}}},C$X.prototype.QueryShapeAABB=function(C$t,C$e,C$i,C$n){var C$r=C$X.QueryShapeAABB_s_aabb;C$e.ComputeAABB(C$r,C$i,C$n=void 0===C$n?0:C$n),this.QueryAABB(C$t,C$r)},C$X.prototype.QueryPointAABB=function(C$t,C$e,C$i){var C$n=C$X.QueryPointAABB_s_aabb;C$n.lowerBound.Set(C$e.x-(C$i=void 0===C$i?.008:C$i),C$e.y-C$i),C$n.upperBound.Set(C$e.x+C$i,C$e.y+C$i),this.QueryAABB(C$t,C$n)},C$X.prototype.RayCast=function(C$h,C$t,C$e){var C$i=C$X.RayCast_s_aabb,C$u=C$X.RayCast_s_p,C$_=C$X.RayCast_s_v,C$d=C$X.RayCast_s_n,C$f=C$X.RayCast_s_point;if(0!==this.m_proxyBuffer.count){if(!this.m_positionBuffer.data)throw new Error;for(var C$n,C$p=this.m_positionBuffer.data,C$r=(C$j.MinV(C$t,C$e,C$i.lowerBound),C$j.MaxV(C$t,C$e,C$i.upperBound),1),C$s=C$j.SubVV(C$e,C$t,C$_),C$m=C$j.DotVV(C$s,C$s),C$y=this.GetInsideBoundsEnumerator(C$i);0<=(C$n=C$y.GetNext());){var C$o=C$j.SubVV(C$t,C$p[C$n],C$u),C$a=C$j.DotVV(C$o,C$s),C$c=C$a*C$a-C$m*(C$j.DotVV(C$o,C$o)-this.m_squaredDiameter);if(0<=C$c){var C$c=C$Y(C$c),C$l=(-C$a-C$c)/C$m;if(!(C$r<C$l)&&!(C$l<0&&((C$l=(-C$a+C$c)/C$m)<0||C$r<C$l))){C$a=C$j.AddVMulSV(C$o,C$l,C$s,C$d),C$c=(C$a.Normalize(),C$h.ReportParticle(this,C$n,C$j.AddVMulSV(C$t,C$l,C$s,C$f),C$a,C$l));if((C$r=C$L(C$r,C$c))<=0)break}}}}},C$X.prototype.ComputeAABB=function(C$t){var C$e=this.GetParticleCount();if(C$t.lowerBound.x=+C$P,C$t.lowerBound.y=+C$P,C$t.upperBound.x=-C$P,C$t.upperBound.y=-C$P,!this.m_positionBuffer.data)throw new Error;for(var C$i=this.m_positionBuffer.data,C$n=0;C$n<C$e;C$n++){var C$r=C$i[C$n];C$j.MinV(C$t.lowerBound,C$r,C$t.lowerBound),C$j.MaxV(C$t.upperBound,C$r,C$t.upperBound)}C$t.lowerBound.x-=this.m_particleDiameter,C$t.lowerBound.y-=this.m_particleDiameter,C$t.upperBound.x+=this.m_particleDiameter,C$t.upperBound.y+=this.m_particleDiameter},C$X.prototype.FreeBuffer=function(C$t,C$e){null!==C$t&&(C$t.length=0)},C$X.prototype.FreeUserOverridableBuffer=function(C$t){0===C$t.userSuppliedCapacity&&this.FreeBuffer(C$t.data,this.m_internalAllocatedCapacity)},C$X.prototype.ReallocateBuffer3=function(C$t,C$e,C$i){if(C$i<=C$e)throw new Error;C$e=C$t?C$t.slice():[];return C$e.length=C$i,C$e},C$X.prototype.ReallocateBuffer5=function(C$t,C$e,C$i,C$n,C$r){if(C$n<=C$i)throw new Error;if(C$e&&!(C$n<=C$e))throw new Error;return C$t=C$r&&!C$t||C$e?C$t:this.ReallocateBuffer3(C$t,C$i,C$n)},C$X.prototype.ReallocateBuffer4=function(C$t,C$e,C$i,C$n){return this.ReallocateBuffer5(C$t.data,C$t.userSuppliedCapacity,C$e,C$i,C$n)},C$X.prototype.RequestBuffer=function(C$t){return C$t||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(256),(C$t=[]).length=this.m_internalAllocatedCapacity),C$t},C$X.prototype.ReallocateHandleBuffers=function(C$t){this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,C$t,!0)},C$X.prototype.ReallocateInternalAllocatedBuffers=function(C$t){function C$e(C$t,C$e){return C$e&&C$e<C$t?C$e:C$t}var C$i;C$t=C$e(C$t,this.m_def.maxCount),C$t=C$e(C$t,this.m_flagsBuffer.userSuppliedCapacity),C$t=C$e(C$t,this.m_positionBuffer.userSuppliedCapacity),C$t=C$e(C$t,this.m_velocityBuffer.userSuppliedCapacity),C$t=C$e(C$t,this.m_colorBuffer.userSuppliedCapacity),C$t=C$e(C$t,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<C$t&&(this.ReallocateHandleBuffers(C$t),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,C$t,!1),C$i=0<this.m_stuckThreshold,this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,C$t,C$i),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,C$t,C$i),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,C$t,C$i),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,C$t,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,C$t,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,C$t,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,C$t,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,C$t,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,C$t,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,C$t,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,C$t,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,C$t,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,C$t,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,C$t,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,C$t,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,C$t,!1),this.m_internalAllocatedCapacity=C$t)},C$X.prototype.CreateParticleForGroup=function(C$t,C$e,C$i){var C$n=new C$Ds;C$n.flags=C$f(C$t.flags,0),C$R.MulXV(C$e,C$i,C$n.position),C$j.AddVV(C$f(C$t.linearVelocity,C$j.ZERO),C$j.CrossSV(C$f(C$t.angularVelocity,0),C$j.SubVV(C$n.position,C$f(C$t.position,C$j.ZERO),C$j.s_t0),C$j.s_t0),C$n.velocity),C$n.color.Copy(C$f(C$t.color,C$K.ZERO)),C$n.lifetime=C$f(C$t.lifetime,0),C$n.userData=C$t.userData,this.CreateParticle(C$n)},C$X.prototype.CreateParticlesStrokeShapeForGroup=function(C$t,C$e,C$i){for(var C$n=C$X.CreateParticlesStrokeShapeForGroup_s_edge,C$h=C$X.CreateParticlesStrokeShapeForGroup_s_d,C$u=C$X.CreateParticlesStrokeShapeForGroup_s_p,C$r=C$f(C$e.stride,0),C$s=(0===C$r&&(C$r=this.GetParticleStride()),0),C$_=C$t.GetChildCount(),C$o=0;C$o<C$_;C$o++){for(var C$a=null,C$c=(C$t.GetType()===C$H.b2ShapeType.e_edgeShape?C$a=C$t:C$t.GetChildEdge(C$a=C$n,C$o),C$j.SubVV(C$a.m_vertex2,C$a.m_vertex1,C$h)),C$l=C$c.Length();C$s<C$l;){var C$d=C$j.AddVMulSV(C$a.m_vertex1,C$s/C$l,C$c,C$u);this.CreateParticleForGroup(C$e,C$i,C$d),C$s+=C$r}C$s-=C$l}},C$X.prototype.CreateParticlesFillShapeForGroup=function(C$t,C$e,C$i){var C$n=C$X.CreateParticlesFillShapeForGroup_s_aabb,C$h=C$X.CreateParticlesFillShapeForGroup_s_p,C$r=C$f(C$e.stride,0),C$s=(0===C$r&&(C$r=this.GetParticleStride()),C$R.IDENTITY),C$o=C$n;C$t.ComputeAABB(C$o,C$s,0);for(var C$a=Math.floor(C$o.lowerBound.y/C$r)*C$r;C$a<C$o.upperBound.y;C$a+=C$r)for(var C$c=Math.floor(C$o.lowerBound.x/C$r)*C$r;C$c<C$o.upperBound.x;C$c+=C$r){var C$l=C$h.Set(C$c,C$a);C$t.TestPoint(C$s,C$l)&&this.CreateParticleForGroup(C$e,C$i,C$l)}},C$X.prototype.CreateParticlesWithShapeForGroup=function(C$t,C$e,C$i){switch(C$t.GetType()){case C$H.b2ShapeType.e_edgeShape:case C$H.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(C$t,C$e,C$i);break;case C$H.b2ShapeType.e_polygonShape:case C$H.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(C$t,C$e,C$i)}},C$X.prototype.CreateParticlesWithShapesForGroup=function(C$t,C$e,C$i,C$n){C$t=new C$X.CompositeShape(C$t,C$e);this.CreateParticlesFillShapeForGroup(C$t,C$i,C$n)},C$X.prototype.CloneParticle=function(C$t,C$e){var C$i=new C$Ds;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;C$i.flags=this.m_flagsBuffer.data[C$t],C$i.position.Copy(this.m_positionBuffer.data[C$t]),C$i.velocity.Copy(this.m_velocityBuffer.data[C$t]),this.m_colorBuffer.data&&C$i.color.Copy(this.m_colorBuffer.data[C$t]),this.m_userDataBuffer.data&&(C$i.userData=this.m_userDataBuffer.data[C$t]),C$i.group=C$e;C$e=this.CreateParticle(C$i);return this.m_handleIndexBuffer.data&&((C$i=this.m_handleIndexBuffer.data[C$t])&&C$i.SetIndex(C$e),this.m_handleIndexBuffer.data[C$e]=C$i,this.m_handleIndexBuffer.data[C$t]=null),this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$e]=this.m_lastBodyContactStepBuffer.data[C$t]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$e]=this.m_bodyContactCountBuffer.data[C$t]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$e]=this.m_consecutiveContactStepsBuffer.data[C$t]),this.m_hasForce&&this.m_forceBuffer[C$e].Copy(this.m_forceBuffer[C$t]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$e]=this.m_staticPressureBuffer[C$t]),this.m_depthBuffer&&(this.m_depthBuffer[C$e]=this.m_depthBuffer[C$t]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[C$e]=this.m_expirationTimeBuffer.data[C$t]),C$e},C$X.prototype.DestroyParticlesInGroup=function(C$t,C$e){void 0===C$e&&(C$e=!1);for(var C$i=C$t.m_firstIndex;C$i<C$t.m_lastIndex;C$i++)this.DestroyParticle(C$i,C$e)},C$X.prototype.DestroyParticleGroup=function(C$t){this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(C$t),this.SetGroupFlags(C$t,0);for(var C$e=C$t.m_firstIndex;C$e<C$t.m_lastIndex;C$e++)this.m_groupBuffer[C$e]=null;C$t.m_prev&&(C$t.m_prev.m_next=C$t.m_next),C$t.m_next&&(C$t.m_next.m_prev=C$t.m_prev),C$t===this.m_groupList&&(this.m_groupList=C$t.m_next),--this.m_groupCount},C$X.ParticleCanBeConnected=function(C$t,C$e){return 0!=(C$t&(C$H.b2ParticleFlag.b2_wallParticle|C$H.b2ParticleFlag.b2_springParticle|C$H.b2ParticleFlag.b2_elasticParticle))||null!==C$e&&0!=(C$e.GetGroupFlags()&C$H.b2ParticleGroupFlag.b2_rigidParticleGroup)},C$X.prototype.UpdatePairsAndTriads=function(C$t,C$e,C$m){var C$v=C$X.UpdatePairsAndTriads_s_dab,C$x=C$X.UpdatePairsAndTriads_s_dbc,C$b=C$X.UpdatePairsAndTriads_s_dca;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$y=this.m_positionBuffer.data,C$i=0,C$n=C$t;C$n<C$e;C$n++)C$i|=this.m_flagsBuffer.data[C$n];if(C$i&C$X.k_pairFlags)for(var C$a=0;C$a<this.m_contactBuffer.count;C$a++){var C$c=this.m_contactBuffer.data[C$a],C$r=C$c.indexA,C$s=C$c.indexB,C$o=this.m_flagsBuffer.data[C$r],C$l=this.m_flagsBuffer.data[C$s],C$h=this.m_groupBuffer[C$r],C$u=this.m_groupBuffer[C$s];C$t<=C$r&&C$r<C$e&&C$t<=C$s&&C$s<C$e&&!((C$o|C$l)&C$H.b2ParticleFlag.b2_zombieParticle)&&(C$o|C$l)&C$X.k_pairFlags&&(C$m.IsNecessary(C$r)||C$m.IsNecessary(C$s))&&C$X.ParticleCanBeConnected(C$o,C$h)&&C$X.ParticleCanBeConnected(C$l,C$u)&&C$m.ShouldCreatePair(C$r,C$s)&&((C$o=this.m_pairBuffer.data[this.m_pairBuffer.Append()]).indexA=C$r,C$o.indexB=C$s,C$o.flags=C$c.flags,C$o.strength=C$L(C$h?C$h.m_strength:1,C$u?C$u.m_strength:1),C$o.distance=C$j.DistanceVV(C$y[C$r],C$y[C$s])),C$Js(this.m_pairBuffer.data,0,this.m_pairBuffer.count,C$X.ComparePairIndices),this.m_pairBuffer.Unique(C$X.MatchPairIndices)}if(C$i&C$X.k_triadFlags){for(var C$_=new C$Us(C$e-C$t),C$n=C$t;C$n<C$e;C$n++){var C$d=this.m_flagsBuffer.data[C$n],C$f=this.m_groupBuffer[C$n];C$d&C$H.b2ParticleFlag.b2_zombieParticle||!C$X.ParticleCanBeConnected(C$d,C$f)||C$_.AddGenerator(C$y[C$n],C$n,C$m.IsNecessary(C$n))}var C$p=this.GetParticleStride(),C$g=(C$_.Generate(C$p/2,2*C$p),this);C$_.GetNodes(function(C$t,C$e,C$i){if(!C$g.m_flagsBuffer.data)throw new Error;var C$n,C$r,C$s,C$o,C$a,C$h,C$c,C$u,C$_,C$l,C$d=C$g.m_flagsBuffer.data[C$t],C$f=C$g.m_flagsBuffer.data[C$e],C$p=C$g.m_flagsBuffer.data[C$i];(C$d|C$f|C$p)&C$X.k_triadFlags&&C$m.ShouldCreateTriad(C$t,C$e,C$i)&&(C$n=C$y[C$t],C$r=C$y[C$e],C$s=C$y[C$i],C$o=C$j.SubVV(C$n,C$r,C$v),C$a=C$j.SubVV(C$r,C$s,C$x),C$h=C$j.SubVV(C$s,C$n,C$b),C$c=4*C$g.m_squaredDiameter,C$j.DotVV(C$o,C$o)>C$c||C$j.DotVV(C$a,C$a)>C$c||C$j.DotVV(C$h,C$h)>C$c||(C$c=C$g.m_groupBuffer[C$t],C$u=C$g.m_groupBuffer[C$e],C$_=C$g.m_groupBuffer[C$i],(C$l=C$g.m_triadBuffer.data[C$g.m_triadBuffer.Append()]).indexA=C$t,C$l.indexB=C$e,C$l.indexC=C$i,C$l.flags=C$d|C$f|C$p,C$l.strength=C$L(C$L(C$c?C$c.m_strength:1,C$u?C$u.m_strength:1),C$_?C$_.m_strength:1),C$t=(C$n.x+C$r.x+C$s.x)/3,C$e=(C$n.y+C$r.y+C$s.y)/3,C$l.pa.x=C$n.x-C$t,C$l.pa.y=C$n.y-C$e,C$l.pb.x=C$r.x-C$t,C$l.pb.y=C$r.y-C$e,C$l.pc.x=C$s.x-C$t,C$l.pc.y=C$s.y-C$e,C$l.ka=-C$j.DotVV(C$h,C$o),C$l.kb=-C$j.DotVV(C$o,C$a),C$l.kc=-C$j.DotVV(C$a,C$h),C$l.s=C$j.CrossVV(C$n,C$r)+C$j.CrossVV(C$r,C$s)+C$j.CrossVV(C$s,C$n)))}),C$Js(this.m_triadBuffer.data,0,this.m_triadBuffer.count,C$X.CompareTriadIndices),this.m_triadBuffer.Unique(C$X.MatchTriadIndices)}},C$X.prototype.UpdatePairsAndTriadsWithReactiveParticles=function(){var C$t=new C$X.ReactiveFilter(this.m_flagsBuffer);if(this.UpdatePairsAndTriads(0,this.m_count,C$t),!this.m_flagsBuffer.data)throw new Error;for(var C$e=0;C$e<this.m_count;C$e++)this.m_flagsBuffer.data[C$e]&=~C$H.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~C$H.b2ParticleFlag.b2_reactiveParticle},C$X.ComparePairIndices=function(C$t,C$e){var C$i=C$t.indexA-C$e.indexA;return 0!=C$i?C$i<0:C$t.indexB<C$e.indexB},C$X.MatchPairIndices=function(C$t,C$e){return C$t.indexA===C$e.indexA&&C$t.indexB===C$e.indexB},C$X.CompareTriadIndices=function(C$t,C$e){var C$i=C$t.indexA-C$e.indexA;if(0!=C$i)return C$i<0;C$i=C$t.indexB-C$e.indexB;return 0!=C$i?C$i<0:C$t.indexC<C$e.indexC},C$X.MatchTriadIndices=function(C$t,C$e){return C$t.indexA===C$e.indexA&&C$t.indexB===C$e.indexB&&C$t.indexC===C$e.indexC},C$X.InitializeParticleLists=function(C$t,C$e){for(var C$i=C$t.GetBufferIndex(),C$n=C$t.GetParticleCount(),C$r=0;C$r<C$n;C$r++){var C$s=C$e[C$r];(C$s.list=C$s).next=null,C$s.count=1,C$s.index=C$r+C$i}},C$X.prototype.MergeParticleListsInContact=function(C$t,C$e){for(var C$i=C$t.GetBufferIndex(),C$n=0;C$n<this.m_contactBuffer.count;C$n++){var C$r,C$s=this.m_contactBuffer.data[C$n],C$o=C$s.indexA,C$s=C$s.indexB;C$t.ContainsParticle(C$o)&&C$t.ContainsParticle(C$s)&&((C$o=C$e[C$o-C$i].list)!==(C$s=C$e[C$s-C$i].list)&&(C$o.count<C$s.count&&(C$r=C$o,C$o=C$s,C$s=C$r),C$X.MergeParticleLists(C$o,C$s)))}},C$X.MergeParticleLists=function(C$t,C$e){for(var C$i=C$e;;){C$i.list=C$t;var C$n=C$i.next;if(!C$n){C$i.next=C$t.next;break}C$i=C$n}C$t.next=C$e,C$t.count+=C$e.count,C$e.count=0},C$X.FindLongestParticleList=function(C$t,C$e){for(var C$i=C$t.GetParticleCount(),C$n=C$e[0],C$r=0;C$r<C$i;C$r++){var C$s=C$e[C$r];C$n.count<C$s.count&&(C$n=C$s)}return C$n},C$X.prototype.MergeZombieParticleListNodes=function(C$t,C$e,C$i){if(!this.m_flagsBuffer.data)throw new Error;for(var C$n=C$t.GetParticleCount(),C$r=0;C$r<C$n;C$r++){var C$s=C$e[C$r];C$s!==C$i&&this.m_flagsBuffer.data[C$s.index]&C$H.b2ParticleFlag.b2_zombieParticle&&C$X.MergeParticleListAndNode(C$i,C$s)}},C$X.MergeParticleListAndNode=function(C$t,C$e){C$e.list=C$t,C$e.next=C$t.next,C$t.next=C$e,C$t.count++,C$e.count=0},C$X.prototype.CreateParticleGroupsFromParticleList=function(C$t,C$e,C$i){if(!this.m_flagsBuffer.data)throw new Error;var C$n=C$t.GetParticleCount(),C$r=new C$Fs;C$r.groupFlags=C$t.GetGroupFlags(),C$r.userData=C$t.GetUserData();for(var C$s=0;C$s<C$n;C$s++){var C$o=C$e[C$s];if(C$o.count&&C$o!==C$i)for(var C$a=this.CreateParticleGroup(C$r),C$c=C$o;C$c;C$c=C$c.next){var C$l=C$c.index,C$h=this.CloneParticle(C$l,C$a);this.m_flagsBuffer.data[C$l]|=C$H.b2ParticleFlag.b2_zombieParticle,C$c.index=C$h}}},C$X.prototype.UpdatePairsAndTriadsWithParticleList=function(C$t,C$e){for(var C$i=C$t.GetBufferIndex(),C$n=0;C$n<this.m_pairBuffer.count;C$n++){var C$r=this.m_pairBuffer.data[C$n],C$s=C$r.indexA,C$o=C$r.indexB;C$t.ContainsParticle(C$s)&&(C$r.indexA=C$e[C$s-C$i].index),C$t.ContainsParticle(C$o)&&(C$r.indexB=C$e[C$o-C$i].index)}for(C$n=0;C$n<this.m_triadBuffer.count;C$n++){var C$a=this.m_triadBuffer.data[C$n],C$s=C$a.indexA,C$o=C$a.indexB,C$c=C$a.indexC;C$t.ContainsParticle(C$s)&&(C$a.indexA=C$e[C$s-C$i].index),C$t.ContainsParticle(C$o)&&(C$a.indexB=C$e[C$o-C$i].index),C$t.ContainsParticle(C$c)&&(C$a.indexC=C$e[C$c-C$i].index)}},C$X.prototype.ComputeDepth=function(){for(var C$h=[],C$u=0,C$t=0;C$t<this.m_contactBuffer.count;C$t++){var C$e=(C$a=this.m_contactBuffer.data[C$t]).indexA,C$i=C$a.indexB,C$_=this.m_groupBuffer[C$e],C$d=this.m_groupBuffer[C$i];C$_&&C$_===C$d&&C$_.m_groupFlags&C$H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(C$h[C$u++]=C$a)}for(var C$f=[],C$p=0,C$n=this.m_groupList;C$n;C$n=C$n.GetNext())if(C$n.m_groupFlags&C$H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth){C$f[C$p++]=C$n,this.SetGroupFlags(C$n,C$n.m_groupFlags&~C$H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);for(var C$r=C$n.m_firstIndex;C$r<C$n.m_lastIndex;C$r++)this.m_accumulationBuffer[C$r]=0}for(C$t=0;C$t<C$u;C$t++){var C$e=(C$a=C$h[C$t]).indexA,C$i=C$a.indexB,C$s=C$a.weight;this.m_accumulationBuffer[C$e]+=C$s,this.m_accumulationBuffer[C$i]+=C$s}for(C$r=0;C$r<C$p;C$r++)for(var C$o=(C$n=C$f[C$r]).m_firstIndex;C$o<C$n.m_lastIndex;C$o++){C$s=this.m_accumulationBuffer[C$o];this.m_depthBuffer[C$o]=C$s<.8?0:C$P}for(var C$m=C$Y(this.m_count)>>0,C$y=0;C$y<C$m;C$y++){for(var C$g=!1,C$t=0;C$t<C$u;C$t++){var C$a,C$e=(C$a=C$h[C$t]).indexA,C$i=C$a.indexB,C$c=1-C$a.weight,C$v=this.m_depthBuffer[C$e],C$x=this.m_depthBuffer[C$i],C$b=C$x+C$c,C$c=C$v+C$c;C$b<C$v&&(this.m_depthBuffer[C$e]=C$b,C$g=!0),C$c<C$x&&(this.m_depthBuffer[C$i]=C$c,C$g=!0)}if(!C$g)break}for(C$r=0;C$r<C$p;C$r++)for(var C$l=(C$n=C$f[C$r]).m_firstIndex;C$l<C$n.m_lastIndex;C$l++)this.m_depthBuffer[C$l]<C$P?this.m_depthBuffer[C$l]*=this.m_particleDiameter:this.m_depthBuffer[C$l]=0},C$X.prototype.GetInsideBoundsEnumerator=function(C$t){var C$e=C$X.computeTag(this.m_inverseDiameter*C$t.lowerBound.x-1,this.m_inverseDiameter*C$t.lowerBound.y-1),C$t=C$X.computeTag(this.m_inverseDiameter*C$t.upperBound.x+1,this.m_inverseDiameter*C$t.upperBound.y+1),C$i=this.m_proxyBuffer.count,C$n=C$Ks(this.m_proxyBuffer.data,0,C$i,C$e,C$X.Proxy.CompareProxyTag),C$i=C$Qs(this.m_proxyBuffer.data,0,C$i,C$t,C$X.Proxy.CompareTagProxy);return new C$X.InsideBoundsEnumerator(this,C$e,C$t,C$n,C$i)},C$X.prototype.UpdateAllParticleFlags=function(){if(!this.m_flagsBuffer.data)throw new Error;for(var C$t=this.m_allParticleFlags=0;C$t<this.m_count;C$t++)this.m_allParticleFlags|=this.m_flagsBuffer.data[C$t];this.m_needsUpdateAllParticleFlags=!1},C$X.prototype.UpdateAllGroupFlags=function(){this.m_allGroupFlags=0;for(var C$t=this.m_groupList;C$t;C$t=C$t.GetNext())this.m_allGroupFlags|=C$t.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1},C$X.prototype.AddContact=function(C$t,C$e,C$i){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;var C$n,C$r,C$s=C$X.AddContact_s_d,C$o=this.m_positionBuffer.data,C$o=C$j.SubVV(C$o[C$e],C$o[C$t],C$s),C$s=C$j.DotVV(C$o,C$o);C$s<this.m_squaredDiameter&&(C$n=C$A(C$s),isFinite(C$n)||(C$n=198177537e11),(C$r=this.m_contactBuffer.data[this.m_contactBuffer.Append()]).indexA=C$t,C$r.indexB=C$e,C$r.flags=this.m_flagsBuffer.data[C$t]|this.m_flagsBuffer.data[C$e],C$r.weight=1-C$s*C$n*this.m_inverseDiameter,C$j.MulSV(C$n,C$o,C$r.normal))},C$X.prototype.FindContacts_Reference=function(C$t){for(var C$e=this.m_proxyBuffer.count,C$i=this.m_contactBuffer.count=0,C$n=0;C$i<C$e;C$i++){for(var C$r=C$X.computeRelativeTag(this.m_proxyBuffer.data[C$i].tag,1,0),C$s=C$i+1;C$s<C$e&&!(C$r<this.m_proxyBuffer.data[C$s].tag);C$s++)this.AddContact(this.m_proxyBuffer.data[C$i].index,this.m_proxyBuffer.data[C$s].index,this.m_contactBuffer);for(var C$o=C$X.computeRelativeTag(this.m_proxyBuffer.data[C$i].tag,-1,1);C$n<C$e&&!(C$o<=this.m_proxyBuffer.data[C$n].tag);C$n++);for(var C$a=C$X.computeRelativeTag(this.m_proxyBuffer.data[C$i].tag,1,1),C$s=C$n;C$s<C$e&&!(C$a<this.m_proxyBuffer.data[C$s].tag);C$s++)this.AddContact(this.m_proxyBuffer.data[C$i].index,this.m_proxyBuffer.data[C$s].index,this.m_contactBuffer)}},C$X.prototype.FindContacts=function(C$t){this.FindContacts_Reference(C$t)},C$X.prototype.UpdateProxies_Reference=function(C$t){if(!this.m_positionBuffer.data)throw new Error;for(var C$e=this.m_positionBuffer.data,C$i=this.m_inverseDiameter,C$n=0;C$n<this.m_proxyBuffer.count;++C$n){var C$r=this.m_proxyBuffer.data[C$n],C$s=C$e[C$r.index];C$r.tag=C$X.computeTag(C$i*C$s.x,C$i*C$s.y)}},C$X.prototype.UpdateProxies=function(C$t){this.UpdateProxies_Reference(C$t)},C$X.prototype.SortProxies=function(C$t){C$qs(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,C$X.Proxy.CompareProxyProxy)},C$X.prototype.FilterContacts=function(C$t){var C$e,C$i=this.GetParticleContactFilter();null!==C$i&&(C$e=this).m_contactBuffer.RemoveIf(function(C$t){return 0!=(C$t.flags&C$H.b2ParticleFlag.b2_particleContactFilterParticle)&&!C$i.ShouldCollideParticleParticle(C$e,C$t.indexA,C$t.indexB)})},C$X.prototype.NotifyContactListenerPreContact=function(C$t){if(null!==this.GetParticleContactListener())throw C$t.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error},C$X.prototype.NotifyContactListenerPostContact=function(C$t){var C$e=this.GetParticleContactListener();if(null!==C$e){for(var C$i=0;C$i<this.m_contactBuffer.count;++C$i){var C$n=this.m_contactBuffer.data[C$i];C$e.BeginContactParticleParticle(this,C$n)}throw new Error}},C$X.b2ParticleContactIsZombie=function(C$t){return(C$t.flags&C$H.b2ParticleFlag.b2_zombieParticle)===C$H.b2ParticleFlag.b2_zombieParticle},C$X.prototype.UpdateContacts=function(C$t){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);var C$e=new C$X.b2ParticlePairSet;this.NotifyContactListenerPreContact(C$e),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(C$e),C$t&&this.m_contactBuffer.RemoveIf(C$X.b2ParticleContactIsZombie)},C$X.prototype.NotifyBodyContactListenerPreContact=function(C$t){if(null!==this.GetFixtureContactListener())throw C$t.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error},C$X.prototype.NotifyBodyContactListenerPostContact=function(C$t){var C$e=this.GetFixtureContactListener();if(null!==C$e){for(var C$i=0;C$i<this.m_bodyContactBuffer.count;C$i++){var C$n=this.m_bodyContactBuffer.data[C$i];C$e.BeginContactFixtureParticle(this,C$n)}throw new Error}},C$X.prototype.UpdateBodyContacts=function(){var C$t=C$X.UpdateBodyContacts_s_aabb,C$e=new C$X.FixtureParticleSet;if(this.NotifyBodyContactListenerPreContact(C$e),0<this.m_stuckThreshold){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;for(var C$i=this.GetParticleCount(),C$n=0;C$n<C$i;C$n++)this.m_bodyContactCountBuffer.data[C$n]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[C$n]+1&&(this.m_consecutiveContactStepsBuffer.data[C$n]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);this.ComputeAABB(C$t);var C$r=new C$X.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter());this.m_world.QueryAABB(C$r,C$t),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(C$e)},C$X.prototype.Solve=function(C$t){var C$e=C$X.Solve_s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(C$t),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<C$t.particleIterations;this.m_iterationIndex++){++this.m_timestamp;var C$i=C$e.Copy(C$t);if(C$i.dt/=C$t.particleIterations,C$i.inv_dt*=C$t.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&C$H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(C$i),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(C$i),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(C$i),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(C$i),this.m_allGroupFlags&C$H.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(C$i),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(C$i),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(C$i),this.SolvePressure(C$i),this.SolveDamping(C$i),this.m_allParticleFlags&C$X.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(C$i),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_springParticle&&this.SolveSpring(C$i),this.LimitVelocity(C$i),this.m_allGroupFlags&C$H.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(C$i),this.SolveCollision(C$i),this.m_allGroupFlags&C$H.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(C$i),this.m_allParticleFlags&C$H.b2ParticleFlag.b2_wallParticle&&this.SolveWall(),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$n=0;C$n<this.m_count;C$n++)this.m_positionBuffer.data[C$n].SelfMulAdd(C$i.dt,this.m_velocityBuffer.data[C$n])}},C$X.prototype.SolveCollision=function(C$t){var C$e=C$X.SolveCollision_s_aabb;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$i=this.m_positionBuffer.data,C$n=this.m_velocityBuffer.data,C$r=C$e;C$r.lowerBound.x=+C$P,C$r.lowerBound.y=+C$P,C$r.upperBound.x=-C$P,C$r.upperBound.y=-C$P;for(var C$s=0;C$s<this.m_count;C$s++){var C$o=C$n[C$s],C$a=C$i[C$s],C$c=C$a.x+C$t.dt*C$o.x,C$o=C$a.y+C$t.dt*C$o.y;C$r.lowerBound.x=C$L(C$r.lowerBound.x,C$L(C$a.x,C$c)),C$r.lowerBound.y=C$L(C$r.lowerBound.y,C$L(C$a.y,C$o)),C$r.upperBound.x=C$V(C$r.upperBound.x,C$V(C$a.x,C$c)),C$r.upperBound.y=C$V(C$r.upperBound.y,C$V(C$a.y,C$o))}C$e=new C$X.SolveCollisionCallback(this,C$t);this.m_world.QueryAABB(C$e,C$r)},C$X.prototype.LimitVelocity=function(C$t){if(!this.m_velocityBuffer.data)throw new Error;for(var C$e=this.m_velocityBuffer.data,C$i=this.GetCriticalVelocitySquared(C$t),C$n=0;C$n<this.m_count;C$n++){var C$r=C$e[C$n],C$s=C$j.DotVV(C$r,C$r);C$i<C$s&&C$r.SelfMul(C$Y(C$i/C$s))}},C$X.prototype.SolveGravity=function(C$t){if(!this.m_velocityBuffer.data)throw new Error;for(var C$e=C$X.SolveGravity_s_gravity,C$i=this.m_velocityBuffer.data,C$n=C$j.MulSV(C$t.dt*this.m_def.gravityScale,this.m_world.GetGravity(),C$e),C$r=0;C$r<this.m_count;C$r++)C$i[C$r].SelfAdd(C$n)},C$X.prototype.SolveBarrier=function(C$h){var C$u=C$X.SolveBarrier_s_aabb,C$_=C$X.SolveBarrier_s_va,C$d=C$X.SolveBarrier_s_vb,C$f=C$X.SolveBarrier_s_pba,C$p=C$X.SolveBarrier_s_vba,C$m=C$X.SolveBarrier_s_vc,C$y=C$X.SolveBarrier_s_pca,C$g=C$X.SolveBarrier_s_vca,C$v=C$X.SolveBarrier_s_qba,C$x=C$X.SolveBarrier_s_qca,C$b=C$X.SolveBarrier_s_dv,C$A=C$X.SolveBarrier_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$C=this.m_positionBuffer.data,C$S=this.m_velocityBuffer.data,C$T=0;C$T<this.m_count;C$T++)0!=(this.m_flagsBuffer.data[C$T]&C$X.k_barrierWallFlags)&&C$S[C$T].SetZero();for(var C$w=2.5*C$h.dt,C$E=this.GetParticleMass(),C$M=0;C$M<this.m_pairBuffer.count;C$M++){var C$t=this.m_pairBuffer.data[C$M];if(C$t.flags&C$H.b2ParticleFlag.b2_barrierParticle)for(var C$I,C$B=C$t.indexA,C$t=C$t.indexB,C$R=C$C[C$B],C$P=C$C[C$t],C$D=C$u,C$L=(C$j.MinV(C$R,C$P,C$D.lowerBound),C$j.MaxV(C$R,C$P,C$D.upperBound),this.m_groupBuffer[C$B]),C$V=this.m_groupBuffer[C$t],C$O=this.GetLinearVelocity(C$L,C$B,C$R,C$_),C$B=this.GetLinearVelocity(C$V,C$t,C$P,C$d),C$F=C$j.SubVV(C$P,C$R,C$f),C$e=C$j.SubVV(C$B,C$O,C$p),C$N=this.GetInsideBoundsEnumerator(C$D);0<=(C$I=C$N.GetNext());){var C$k=C$C[C$I],C$i=this.m_groupBuffer[C$I];if(C$L!==C$i&&C$V!==C$i){var C$G=this.GetLinearVelocity(C$i,C$I,C$k,C$m),C$z=C$j.SubVV(C$k,C$R,C$y),C$U=C$j.SubVV(C$G,C$O,C$g),C$n=C$j.CrossVV(C$e,C$U),C$r=C$j.CrossVV(C$F,C$U)-C$j.CrossVV(C$z,C$e),C$s=C$j.CrossVV(C$F,C$z),C$o=void 0,C$a=void 0,C$c=C$v,C$W=C$x;if(0===C$n){if(0==C$r)continue;if(!(0<=(C$a=-C$s/C$r)&&C$a<C$w))continue;if(C$j.AddVMulSV(C$F,C$a,C$e,C$c),C$j.AddVMulSV(C$z,C$a,C$U,C$W),!(0<=(C$o=C$j.DotVV(C$c,C$W)/C$j.DotVV(C$c,C$c))&&C$o<=1))continue}else{C$s=C$r*C$r-4*C$s*C$n;if(C$s<0)continue;var C$s=C$Y(C$s),C$l=(-C$r-C$s)/(2*C$n),C$r=(-C$r+C$s)/(2*C$n);if(C$r<C$l&&(C$s=C$l,C$l=C$r,C$r=C$s),C$a=C$l,C$j.AddVMulSV(C$F,C$a,C$e,C$c),C$j.AddVMulSV(C$z,C$a,C$U,C$W),C$o=C$j.DotVV(C$c,C$W)/C$j.DotVV(C$c,C$c),!(0<=C$a&&C$a<C$w&&0<=C$o&&C$o<=1)){if(!(0<=(C$a=C$r)&&C$a<C$w))continue;if(C$j.AddVMulSV(C$F,C$a,C$e,C$c),C$j.AddVMulSV(C$z,C$a,C$U,C$W),!(0<=(C$o=C$j.DotVV(C$c,C$W)/C$j.DotVV(C$c,C$c))&&C$o<=1))continue}}C$n=C$b,C$s=(C$n.x=C$O.x+C$o*C$e.x-C$G.x,C$n.y=C$O.y+C$o*C$e.y-C$G.y,C$j.MulSV(C$E,C$n,C$A));C$i&&this.IsRigidGroup(C$i)?(C$l=C$i.GetMass(),C$r=C$i.GetInertia(),0<C$l&&C$i.m_linearVelocity.SelfMulAdd(1/C$l,C$s),0<C$r&&(C$i.m_angularVelocity+=C$j.CrossVV(C$j.SubVV(C$k,C$i.GetCenter(),C$j.s_t0),C$s)/C$r)):C$S[C$I].SelfAdd(C$n),this.ParticleApplyForce(C$I,C$s.SelfMul(-C$h.inv_dt))}}}},C$X.prototype.SolveStaticPressure=function(C$t){if(!this.m_flagsBuffer.data)throw new Error;this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);for(var C$t=this.GetCriticalPressure(C$t),C$e=this.m_def.staticPressureStrength*C$t,C$h=.25*C$t,C$u=this.m_def.staticPressureRelaxation,C$i=0;C$i<this.m_def.staticPressureIterations;C$i++){for(var C$n=0;C$n<this.m_count;C$n++)this.m_accumulationBuffer[C$n]=0;for(var C$r=0;C$r<this.m_contactBuffer.count;C$r++){var C$s,C$o,C$a=this.m_contactBuffer.data[C$r];C$a.flags&C$H.b2ParticleFlag.b2_staticPressureParticle&&(C$s=C$a.indexA,C$o=C$a.indexB,C$l=C$a.weight,this.m_accumulationBuffer[C$s]+=C$l*this.m_staticPressureBuffer[C$o],this.m_accumulationBuffer[C$o]+=C$l*this.m_staticPressureBuffer[C$s])}for(C$n=0;C$n<this.m_count;C$n++){var C$c,C$l=this.m_weightBuffer[C$n];this.m_flagsBuffer.data[C$n]&C$H.b2ParticleFlag.b2_staticPressureParticle?(C$c=this.m_accumulationBuffer[C$n],this.m_staticPressureBuffer[C$n]=C$O((C$c+C$e*(C$l-1))/(C$l+C$u),0,C$h)):this.m_staticPressureBuffer[C$n]=0}}},C$X.prototype.ComputeWeight=function(){for(var C$t=0;C$t<this.m_count;C$t++)this.m_weightBuffer[C$t]=0;for(C$t=0;C$t<this.m_bodyContactBuffer.count;C$t++){var C$e=(C$n=this.m_bodyContactBuffer.data[C$t]).index,C$i=C$n.weight;this.m_weightBuffer[C$e]+=C$i}for(C$t=0;C$t<this.m_contactBuffer.count;C$t++){var C$n,C$e=(C$n=this.m_contactBuffer.data[C$t]).indexA,C$r=C$n.indexB,C$i=C$n.weight;this.m_weightBuffer[C$e]+=C$i,this.m_weightBuffer[C$r]+=C$i}},C$X.prototype.SolvePressure=function(C$t){var C$h=C$X.SolvePressure_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$u=this.m_positionBuffer.data,C$e=this.m_velocityBuffer.data,C$_=this.GetCriticalPressure(C$t),C$d=this.m_def.pressureStrength*C$_,C$f=.25*C$_,C$i=0;C$i<this.m_count;C$i++){var C$n=this.m_weightBuffer[C$i],C$r=C$d*C$V(0,C$n-1);this.m_accumulationBuffer[C$i]=C$L(C$r,C$f)}if(this.m_allParticleFlags&C$X.k_noPressureFlags)for(C$i=0;C$i<this.m_count;C$i++)this.m_flagsBuffer.data[C$i]&C$X.k_noPressureFlags&&(this.m_accumulationBuffer[C$i]=0);if(this.m_allParticleFlags&C$H.b2ParticleFlag.b2_staticPressureParticle)for(C$i=0;C$i<this.m_count;C$i++)this.m_flagsBuffer.data[C$i]&C$H.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[C$i]+=this.m_staticPressureBuffer[C$i]);for(var C$p=C$t.dt/(this.m_def.density*this.m_particleDiameter),C$m=this.GetParticleInvMass(),C$s=0;C$s<this.m_bodyContactBuffer.count;C$s++){var C$o=(C$l=this.m_bodyContactBuffer.data[C$s]).index,C$a=C$l.body,C$n=C$l.weight,C$y=C$l.mass,C$g=C$l.normal,C$v=C$u[C$o],C$r=this.m_accumulationBuffer[C$o]+C$d*C$n,C$c=C$j.MulSV(C$p*C$n*C$y*C$r,C$g,C$h);C$e[C$o].SelfMulSub(C$m,C$c),C$a.ApplyLinearImpulse(C$c,C$v,!0)}for(C$s=0;C$s<this.m_contactBuffer.count;C$s++){var C$l,C$o=(C$l=this.m_contactBuffer.data[C$s]).indexA,C$a=C$l.indexB,C$n=C$l.weight,C$g=C$l.normal,C$r=this.m_accumulationBuffer[C$o]+this.m_accumulationBuffer[C$a],C$c=C$j.MulSV(C$p*C$n*C$r,C$g,C$h);C$e[C$o].SelfSub(C$c),C$e[C$a].SelfAdd(C$c)}},C$X.prototype.SolveDamping=function(C$h){var C$t=C$X.SolveDamping_s_v,C$u=C$X.SolveDamping_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$_=this.m_positionBuffer.data,C$e=this.m_velocityBuffer.data,C$d=this.m_def.dampingStrength,C$f=1/this.GetCriticalVelocity(C$h),C$p=this.GetParticleInvMass(),C$i=0;C$i<this.m_bodyContactBuffer.count;C$i++){var C$n=(C$o=this.m_bodyContactBuffer.data[C$i]).index,C$r=C$o.body,C$m=C$o.weight,C$y=C$o.mass,C$s=C$o.normal,C$g=C$_[C$n],C$v=C$j.SubVV(C$r.GetLinearVelocityFromWorldPoint(C$g,C$j.s_t0),C$e[C$n],C$t);(C$a=C$j.DotVV(C$v,C$s))<0&&(C$c=C$V(C$d*C$m,C$L(-C$f*C$a,.5)),C$l=C$j.MulSV(C$c*C$y*C$a,C$s,C$u),C$e[C$n].SelfMulAdd(C$p,C$l),C$r.ApplyLinearImpulse(C$l.SelfNeg(),C$g,!0))}for(C$i=0;C$i<this.m_contactBuffer.count;C$i++){var C$o,C$a,C$c,C$l,C$n=(C$o=this.m_contactBuffer.data[C$i]).indexA,C$r=C$o.indexB,C$m=C$o.weight,C$s=C$o.normal,C$v=C$j.SubVV(C$e[C$r],C$e[C$n],C$t);(C$a=C$j.DotVV(C$v,C$s))<0&&(C$c=C$V(C$d*C$m,C$L(-C$f*C$a,.5)),C$l=C$j.MulSV(C$c*C$a,C$s,C$u),C$e[C$n].SelfAdd(C$l),C$e[C$r].SelfSub(C$l))}},C$X.prototype.SolveRigidDamping=function(){var C$h=C$X.SolveRigidDamping_s_t0,C$u=C$X.SolveRigidDamping_s_t1,C$_=C$X.SolveRigidDamping_s_p,C$d=C$X.SolveRigidDamping_s_v,C$t=[0],C$e=[0],C$i=[0],C$f=[0],C$p=[0],C$m=[0];if(!this.m_positionBuffer.data)throw new Error;for(var C$y=this.m_positionBuffer.data,C$g=this.m_def.dampingStrength,C$n=0;C$n<this.m_bodyContactBuffer.count;C$n++){var C$r=(C$s=this.m_bodyContactBuffer.data[C$n]).index;(C$l=this.m_groupBuffer[C$r])&&this.IsRigidGroup(C$l)&&(C$a=C$s.body,C$c=C$s.normal,C$A=C$s.weight,C$o=C$y[C$r],C$v=C$j.SubVV(C$a.GetLinearVelocityFromWorldPoint(C$o,C$h),C$l.GetLinearVelocityFromWorldPoint(C$o,C$u),C$d),(C$x=C$j.DotVV(C$v,C$c))<0&&(this.InitDampingParameterWithRigidGroupOrParticle(C$t,C$e,C$i,!0,C$l,C$r,C$o,C$c),this.InitDampingParameter(C$f,C$p,C$m,C$a.GetMass(),C$a.GetInertia()-C$a.GetMass()*C$a.GetLocalCenter().LengthSquared(),C$a.GetWorldCenter(),C$o,C$c),C$b=C$g*C$L(C$A,1)*this.ComputeDampingImpulse(C$t[0],C$e[0],C$i[0],C$f[0],C$p[0],C$m[0],C$x),this.ApplyDamping(C$t[0],C$e[0],C$i[0],!0,C$l,C$r,C$b,C$c),C$a.ApplyLinearImpulse(C$j.MulSV(-C$b,C$c,C$j.s_t0),C$o,!0)))}for(C$n=0;C$n<this.m_contactBuffer.count;C$n++){var C$s,C$o,C$v,C$x,C$b,C$r=(C$s=this.m_contactBuffer.data[C$n]).indexA,C$a=C$s.indexB,C$c=C$s.normal,C$A=C$s.weight,C$l=this.m_groupBuffer[C$r],C$C=this.m_groupBuffer[C$a],C$S=this.IsRigidGroup(C$l),C$T=this.IsRigidGroup(C$C);C$l!==C$C&&(C$S||C$T)&&(C$o=C$j.MidVV(C$y[C$r],C$y[C$a],C$_),C$v=C$j.SubVV(this.GetLinearVelocity(C$C,C$a,C$o,C$h),this.GetLinearVelocity(C$l,C$r,C$o,C$u),C$d),(C$x=C$j.DotVV(C$v,C$c))<0&&(this.InitDampingParameterWithRigidGroupOrParticle(C$t,C$e,C$i,C$S,C$l,C$r,C$o,C$c),this.InitDampingParameterWithRigidGroupOrParticle(C$f,C$p,C$m,C$T,C$C,C$a,C$o,C$c),C$b=C$g*C$A*this.ComputeDampingImpulse(C$t[0],C$e[0],C$i[0],C$f[0],C$p[0],C$m[0],C$x),this.ApplyDamping(C$t[0],C$e[0],C$i[0],C$S,C$l,C$r,C$b,C$c),this.ApplyDamping(C$f[0],C$p[0],C$m[0],C$T,C$C,C$a,-C$b,C$c)))}},C$X.prototype.SolveExtraDamping=function(){var C$t=C$X.SolveExtraDamping_s_v,C$e=C$X.SolveExtraDamping_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$i=this.m_velocityBuffer.data,C$h=this.m_positionBuffer.data,C$u=this.GetParticleInvMass(),C$n=0;C$n<this.m_bodyContactBuffer.count;C$n++){var C$r,C$s,C$o,C$a,C$c=this.m_bodyContactBuffer.data[C$n],C$l=C$c.index;this.m_flagsBuffer.data[C$l]&C$X.k_extraDampingFlags&&(C$r=C$c.body,C$a=C$c.mass,C$c=C$c.normal,C$s=C$h[C$l],C$o=C$j.SubVV(C$r.GetLinearVelocityFromWorldPoint(C$s,C$j.s_t0),C$i[C$l],C$t),(C$o=C$j.DotVV(C$o,C$c))<0&&(C$a=C$j.MulSV(.5*C$a*C$o,C$c,C$e),C$i[C$l].SelfMulAdd(C$u,C$a),C$r.ApplyLinearImpulse(C$a.SelfNeg(),C$s,!0)))}},C$X.prototype.SolveWall=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$t=this.m_velocityBuffer.data,C$e=0;C$e<this.m_count;C$e++)this.m_flagsBuffer.data[C$e]&C$H.b2ParticleFlag.b2_wallParticle&&C$t[C$e].SetZero()},C$X.prototype.SolveRigid=function(C$t){var C$e=C$X.SolveRigid_s_position,C$i=C$X.SolveRigid_s_rotation,C$n=C$X.SolveRigid_s_transform,C$r=C$X.SolveRigid_s_velocityTransform;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$h=this.m_positionBuffer.data,C$u=this.m_velocityBuffer.data,C$s=this.m_groupList;C$s;C$s=C$s.GetNext())if(C$s.m_groupFlags&C$H.b2ParticleGroupFlag.b2_rigidParticleGroup){C$s.UpdateStatistics();var C$o=C$i,C$_=(C$o.SetAngle(C$t.dt*C$s.m_angularVelocity),C$j.AddVV(C$s.m_center,C$j.SubVV(C$j.MulSV(C$t.dt,C$s.m_linearVelocity,C$j.s_t0),C$B.MulRV(C$o,C$s.m_center,C$j.s_t1),C$j.s_t0),C$e)),C$a=C$n,C$c=(C$a.SetPositionRotation(C$_,C$o),C$R.MulXX(C$a,C$s.m_transform,C$s.m_transform),C$r);C$c.p.x=C$t.inv_dt*C$a.p.x,C$c.p.y=C$t.inv_dt*C$a.p.y,C$c.q.s=C$t.inv_dt*C$a.q.s,C$c.q.c=C$t.inv_dt*(C$a.q.c-1);for(var C$l=C$s.m_firstIndex;C$l<C$s.m_lastIndex;C$l++)C$R.MulXV(C$c,C$h[C$l],C$u[C$l])}},C$X.prototype.SolveElastic=function(C$h){var C$u=C$X.SolveElastic_s_pa,C$_=C$X.SolveElastic_s_pb,C$d=C$X.SolveElastic_s_pc,C$f=C$X.SolveElastic_s_r,C$t=C$X.SolveElastic_s_t0;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$p=this.m_positionBuffer.data,C$m=this.m_velocityBuffer.data,C$y=C$h.inv_dt*this.m_def.elasticStrength,C$g=0;C$g<this.m_triadBuffer.count;C$g++){var C$v,C$x,C$b,C$e,C$i,C$n,C$r,C$s,C$o,C$a,C$c,C$l=this.m_triadBuffer.data[C$g];C$l.flags&C$H.b2ParticleFlag.b2_elasticParticle&&(C$r=C$l.indexA,C$s=C$l.indexB,C$o=C$l.indexC,C$v=C$l.pa,C$x=C$l.pb,C$b=C$l.pc,C$e=C$u.Copy(C$p[C$r]),C$i=C$_.Copy(C$p[C$s]),C$n=C$d.Copy(C$p[C$o]),C$r=C$m[C$r],C$s=C$m[C$s],C$o=C$m[C$o],C$e.SelfMulAdd(C$h.dt,C$r),C$i.SelfMulAdd(C$h.dt,C$s),C$n.SelfMulAdd(C$h.dt,C$o),C$a=(C$e.x+C$i.x+C$n.x)/3,C$c=(C$e.y+C$i.y+C$n.y)/3,C$e.x-=C$a,C$e.y-=C$c,C$i.x-=C$a,C$i.y-=C$c,C$n.x-=C$a,C$n.y-=C$c,(C$a=C$f).s=C$j.CrossVV(C$v,C$e)+C$j.CrossVV(C$x,C$i)+C$j.CrossVV(C$b,C$n),C$a.c=C$j.DotVV(C$v,C$e)+C$j.DotVV(C$x,C$i)+C$j.DotVV(C$b,C$n),C$c=C$A(C$a.s*C$a.s+C$a.c*C$a.c),isFinite(C$c)||(C$c=198177537e11),C$a.s*=C$c,C$a.c*=C$c,C$c=C$y*C$l.strength,C$B.MulRV(C$a,C$v,C$t),C$j.SubVV(C$t,C$e,C$t),C$j.MulSV(C$c,C$t,C$t),C$r.SelfAdd(C$t),C$B.MulRV(C$a,C$x,C$t),C$j.SubVV(C$t,C$i,C$t),C$j.MulSV(C$c,C$t,C$t),C$s.SelfAdd(C$t),C$B.MulRV(C$a,C$b,C$t),C$j.SubVV(C$t,C$n,C$t),C$j.MulSV(C$c,C$t,C$t),C$o.SelfAdd(C$t))}},C$X.prototype.SolveSpring=function(C$t){var C$h=C$X.SolveSpring_s_pa,C$u=C$X.SolveSpring_s_pb,C$_=C$X.SolveSpring_s_d,C$d=C$X.SolveSpring_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$e=this.m_positionBuffer.data,C$i=this.m_velocityBuffer.data,C$f=C$t.inv_dt*this.m_def.springStrength,C$n=0;C$n<this.m_pairBuffer.count;C$n++){var C$r,C$s,C$o,C$a,C$c,C$l=this.m_pairBuffer.data[C$n];C$l.flags&C$H.b2ParticleFlag.b2_springParticle&&(C$r=C$l.indexA,C$s=C$l.indexB,C$a=C$h.Copy(C$e[C$r]),C$o=C$u.Copy(C$e[C$s]),C$r=C$i[C$r],C$s=C$i[C$s],C$a.SelfMulAdd(C$t.dt,C$r),C$o.SelfMulAdd(C$t.dt,C$s),C$o=C$j.SubVV(C$o,C$a,C$_),C$a=C$l.distance,C$c=C$o.Length(),C$l=C$f*C$l.strength,C$l=C$j.MulSV(C$l*(C$a-C$c)/C$c,C$o,C$d),C$r.SelfSub(C$l),C$s.SelfAdd(C$l))}},C$X.prototype.SolveTensile=function(C$t){var C$h=C$X.SolveTensile_s_weightedNormal,C$u=C$X.SolveTensile_s_s,C$_=C$X.SolveTensile_s_f;if(!this.m_velocityBuffer.data)throw new Error;for(var C$d=this.m_velocityBuffer.data,C$e=0;C$e<this.m_count;C$e++)this.m_accumulation2Buffer[C$e]=new C$j,this.m_accumulation2Buffer[C$e].SetZero();for(var C$f,C$i=0;C$i<this.m_contactBuffer.count;C$i++)(C$n=this.m_contactBuffer.data[C$i]).flags&C$H.b2ParticleFlag.b2_tensileParticle&&(C$r=C$n.indexA,C$s=C$n.indexB,C$o=C$n.weight,C$a=C$n.normal,C$f=C$j.MulSV((1-C$o)*C$o,C$a,C$h),this.m_accumulation2Buffer[C$r].SelfSub(C$f),this.m_accumulation2Buffer[C$s].SelfAdd(C$f));for(var C$n,C$r,C$s,C$o,C$a,C$c,C$l,C$t=this.GetCriticalVelocity(C$t),C$p=this.m_def.surfaceTensionPressureStrength*C$t,C$m=this.m_def.surfaceTensionNormalStrength*C$t,C$y=.5*C$t,C$i=0;C$i<this.m_contactBuffer.count;C$i++)(C$n=this.m_contactBuffer.data[C$i]).flags&C$H.b2ParticleFlag.b2_tensileParticle&&(C$r=C$n.indexA,C$s=C$n.indexB,C$o=C$n.weight,C$a=C$n.normal,C$c=this.m_weightBuffer[C$r]+this.m_weightBuffer[C$s],C$l=C$j.SubVV(this.m_accumulation2Buffer[C$s],this.m_accumulation2Buffer[C$r],C$u),C$c=C$L(C$p*(C$c-2)+C$m*C$j.DotVV(C$l,C$a),C$y)*C$o,C$l=C$j.MulSV(C$c,C$a,C$_),C$d[C$r].SelfSub(C$l),C$d[C$s].SelfAdd(C$l))},C$X.prototype.SolveViscous=function(){var C$t=C$X.SolveViscous_s_v,C$h=C$X.SolveViscous_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$u=this.m_positionBuffer.data,C$e=this.m_velocityBuffer.data,C$_=this.m_def.viscousStrength,C$d=this.GetParticleInvMass(),C$i=0;C$i<this.m_bodyContactBuffer.count;C$i++){var C$f,C$n,C$r=(C$s=this.m_bodyContactBuffer.data[C$i]).index;this.m_flagsBuffer.data[C$r]&C$H.b2ParticleFlag.b2_viscousParticle&&(C$o=C$s.body,C$a=C$s.weight,C$f=C$s.mass,C$n=C$u[C$r],C$c=C$j.SubVV(C$o.GetLinearVelocityFromWorldPoint(C$n,C$j.s_t0),C$e[C$r],C$t),C$l=C$j.MulSV(C$_*C$f*C$a,C$c,C$h),C$e[C$r].SelfMulAdd(C$d,C$l),C$o.ApplyLinearImpulse(C$l.SelfNeg(),C$n,!0))}for(var C$s,C$o,C$a,C$c,C$l,C$i=0;C$i<this.m_contactBuffer.count;C$i++)(C$s=this.m_contactBuffer.data[C$i]).flags&C$H.b2ParticleFlag.b2_viscousParticle&&(C$r=C$s.indexA,C$o=C$s.indexB,C$a=C$s.weight,C$c=C$j.SubVV(C$e[C$o],C$e[C$r],C$t),C$l=C$j.MulSV(C$_*C$a,C$c,C$h),C$e[C$r].SelfAdd(C$l),C$e[C$o].SelfSub(C$l))},C$X.prototype.SolveRepulsive=function(C$t){var C$e=C$X.SolveRepulsive_s_f;if(!this.m_velocityBuffer.data)throw new Error;for(var C$i=this.m_velocityBuffer.data,C$n=this.m_def.repulsiveStrength*this.GetCriticalVelocity(C$t),C$r=0;C$r<this.m_contactBuffer.count;C$r++){var C$s,C$o,C$a,C$c=this.m_contactBuffer.data[C$r];C$c.flags&C$H.b2ParticleFlag.b2_repulsiveParticle&&(C$s=C$c.indexA,C$o=C$c.indexB,this.m_groupBuffer[C$s]!==this.m_groupBuffer[C$o]&&(C$a=C$c.weight,C$c=C$c.normal,C$a=C$j.MulSV(C$n*C$a,C$c,C$e),C$i[C$s].SelfSub(C$a),C$i[C$o].SelfAdd(C$a)))}},C$X.prototype.SolvePowder=function(C$h){var C$t=C$X.SolvePowder_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$u=this.m_positionBuffer.data,C$e=this.m_velocityBuffer.data,C$i=this.m_def.powderStrength*this.GetCriticalVelocity(C$h),C$_=this.GetParticleInvMass(),C$n=0;C$n<this.m_bodyContactBuffer.count;C$n++){var C$d,C$f,C$r=(C$s=this.m_bodyContactBuffer.data[C$n]).index;this.m_flagsBuffer.data[C$r]&C$H.b2ParticleFlag.b2_powderParticle&&.25<(C$o=C$s.weight)&&(C$a=C$s.body,C$d=C$s.mass,C$f=C$u[C$r],C$c=C$s.normal,C$l=C$j.MulSV(C$i*C$d*(C$o-.25),C$c,C$t),C$e[C$r].SelfMulSub(C$_,C$l),C$a.ApplyLinearImpulse(C$l,C$f,!0))}for(var C$s,C$o,C$a,C$c,C$l,C$n=0;C$n<this.m_contactBuffer.count;C$n++)(C$s=this.m_contactBuffer.data[C$n]).flags&C$H.b2ParticleFlag.b2_powderParticle&&.25<(C$o=C$s.weight)&&(C$r=C$s.indexA,C$a=C$s.indexB,C$c=C$s.normal,C$l=C$j.MulSV(C$i*(C$o-.25),C$c,C$t),C$e[C$r].SelfSub(C$l),C$e[C$a].SelfAdd(C$l))},C$X.prototype.SolveSolid=function(C$t){var C$e=C$X.SolveSolid_s_f;if(!this.m_velocityBuffer.data)throw new Error;for(var C$i=this.m_velocityBuffer.data,C$n=(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer),C$t.inv_dt*this.m_def.ejectionStrength),C$r=0;C$r<this.m_contactBuffer.count;C$r++){var C$s,C$o,C$a=this.m_contactBuffer.data[C$r],C$c=C$a.indexA,C$l=C$a.indexB;this.m_groupBuffer[C$c]!==this.m_groupBuffer[C$l]&&(C$s=C$a.weight,C$a=C$a.normal,C$o=this.m_depthBuffer[C$c]+this.m_depthBuffer[C$l],C$o=C$j.MulSV(C$n*C$o*C$s,C$a,C$e),C$i[C$c].SelfSub(C$o),C$i[C$l].SelfAdd(C$o))}},C$X.prototype.SolveForce=function(C$t){if(!this.m_velocityBuffer.data)throw new Error;for(var C$e=this.m_velocityBuffer.data,C$i=C$t.dt*this.GetParticleInvMass(),C$n=0;C$n<this.m_count;C$n++)C$e[C$n].SelfMulAdd(C$i,this.m_forceBuffer[C$n]);this.m_hasForce=!1},C$X.prototype.SolveColorMixing=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_colorBuffer.data)throw new Error;var C$t=.5*this.m_def.colorMixingStrength;if(C$t)for(var C$e=0;C$e<this.m_contactBuffer.count;C$e++){var C$i=this.m_contactBuffer.data[C$e],C$n=C$i.indexA,C$i=C$i.indexB;this.m_flagsBuffer.data[C$n]&this.m_flagsBuffer.data[C$i]&C$H.b2ParticleFlag.b2_colorMixingParticle&&(C$n=this.m_colorBuffer.data[C$n],C$i=this.m_colorBuffer.data[C$i],C$K.MixColors(C$n,C$i,C$t))}},C$X.prototype.SolveZombie=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$t=0,C$e=[],C$i=0;C$i<this.m_count;C$i++)C$e[C$i]=-1;for(var C$h=0,C$i=0;C$i<this.m_count;C$i++){var C$u,C$n,C$_=this.m_flagsBuffer.data[C$i];C$_&C$H.b2ParticleFlag.b2_zombieParticle?(C$u=this.m_world.m_destructionListener,C$_&C$H.b2ParticleFlag.b2_destructionListenerParticle&&C$u&&C$u.SayGoodbyeParticle(this,C$i),this.m_handleIndexBuffer.data&&(C$n=this.m_handleIndexBuffer.data[C$i])&&(C$n.SetIndex(-1),this.m_handleIndexBuffer.data[C$i]=null),C$e[C$i]=-1):(C$i!==(C$e[C$i]=C$t)&&(this.m_handleIndexBuffer.data&&((C$n=this.m_handleIndexBuffer.data[C$i])&&C$n.SetIndex(C$t),this.m_handleIndexBuffer.data[C$t]=C$n),this.m_flagsBuffer.data[C$t]=this.m_flagsBuffer.data[C$i],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$t]=this.m_lastBodyContactStepBuffer.data[C$i]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$t]=this.m_bodyContactCountBuffer.data[C$i]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$t]=this.m_consecutiveContactStepsBuffer.data[C$i]),this.m_positionBuffer.data[C$t].Copy(this.m_positionBuffer.data[C$i]),this.m_velocityBuffer.data[C$t].Copy(this.m_velocityBuffer.data[C$i]),this.m_groupBuffer[C$t]=this.m_groupBuffer[C$i],this.m_hasForce&&this.m_forceBuffer[C$t].Copy(this.m_forceBuffer[C$i]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$t]=this.m_staticPressureBuffer[C$i]),this.m_depthBuffer&&(this.m_depthBuffer[C$t]=this.m_depthBuffer[C$i]),this.m_colorBuffer.data&&this.m_colorBuffer.data[C$t].Copy(this.m_colorBuffer.data[C$i]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[C$t]=this.m_userDataBuffer.data[C$i]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[C$t]=this.m_expirationTimeBuffer.data[C$i])),C$t++,C$h|=C$_)}for(var C$d=function(C$t){return C$t.index<0},C$f=function(C$t){return C$t.indexA<0||C$t.indexB<0},C$p=function(C$t){return C$t.index<0},C$m=function(C$t){return C$t.indexA<0||C$t.indexB<0},C$y=function(C$t){return C$t.indexA<0||C$t.indexB<0||C$t.indexC<0},C$r=0;C$r<this.m_proxyBuffer.count;C$r++){var C$g=this.m_proxyBuffer.data[C$r];C$g.index=C$e[C$g.index]}this.m_proxyBuffer.RemoveIf(C$d);for(C$r=0;C$r<this.m_contactBuffer.count;C$r++)(C$s=this.m_contactBuffer.data[C$r]).indexA=C$e[C$s.indexA],C$s.indexB=C$e[C$s.indexB];this.m_contactBuffer.RemoveIf(C$f);for(var C$s,C$r=0;C$r<this.m_bodyContactBuffer.count;C$r++)(C$s=this.m_bodyContactBuffer.data[C$r]).index=C$e[C$s.index];this.m_bodyContactBuffer.RemoveIf(C$p);for(C$r=0;C$r<this.m_pairBuffer.count;C$r++){var C$o=this.m_pairBuffer.data[C$r];C$o.indexA=C$e[C$o.indexA],C$o.indexB=C$e[C$o.indexB]}this.m_pairBuffer.RemoveIf(C$m);for(C$r=0;C$r<this.m_triadBuffer.count;C$r++){var C$a=this.m_triadBuffer.data[C$r];C$a.indexA=C$e[C$a.indexA],C$a.indexB=C$e[C$a.indexB],C$a.indexC=C$e[C$a.indexC]}if(this.m_triadBuffer.RemoveIf(C$y),this.m_indexByExpirationTimeBuffer.data)for(var C$v=0,C$x=0;C$x<this.m_count;C$x++){var C$b=C$e[this.m_indexByExpirationTimeBuffer.data[C$x]];-1!==C$b&&(this.m_indexByExpirationTimeBuffer.data[C$v++]=C$b)}for(var C$c=this.m_groupList;C$c;C$c=C$c.GetNext()){for(var C$l=C$t,C$A=0,C$C=!1,C$i=C$c.m_firstIndex;C$i<C$c.m_lastIndex;C$i++){var C$S=C$e[C$i];0<=C$S?(C$l=C$L(C$l,C$S),C$A=C$V(C$A,C$S+1)):C$C=!0}C$l<C$A?(C$c.m_firstIndex=C$l,C$c.m_lastIndex=C$A,C$C&&C$c.m_groupFlags&C$H.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(C$c,C$c.m_groupFlags|C$H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(C$c.m_firstIndex=0,C$c.m_lastIndex=0,C$c.m_groupFlags&C$H.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(C$c,C$c.m_groupFlags|C$H.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=C$t,this.m_allParticleFlags=C$h,this.m_needsUpdateAllParticleFlags=!1;for(C$c=this.m_groupList;C$c;){var C$T=C$c.GetNext();C$c.m_groupFlags&C$H.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(C$c),C$c=C$T}},C$X.prototype.SolveLifetimes=function(C$t){if(!this.m_expirationTimeBuffer.data)throw new Error;if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_timeElapsed=this.LifetimeToExpirationTime(C$t.dt);var C$e=this.GetQuantizedTimeElapsed(),C$n=this.m_expirationTimeBuffer.data,C$i=this.m_indexByExpirationTimeBuffer.data,C$t=this.GetParticleCount();this.m_expirationTimeBufferRequiresSorting&&(C$qs(C$i,0,C$t,function(C$t,C$e){var C$t=C$n[C$t],C$e=C$n[C$e],C$i=C$t<=0;return C$i==C$e<=0?C$e<C$t:C$i}),this.m_expirationTimeBufferRequiresSorting=!1);for(var C$r=C$t-1;0<=C$r;--C$r){var C$s=C$i[C$r],C$o=C$n[C$s];if(C$e<C$o||C$o<=0)break;this.DestroyParticle(C$s)}},C$X.prototype.RotateBuffer=function(C$e,C$i,C$n){if(C$e!==C$i&&C$i!==C$n){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;if(C$$s(this.m_flagsBuffer.data,C$e,C$i,C$n),this.m_lastBodyContactStepBuffer.data&&C$$s(this.m_lastBodyContactStepBuffer.data,C$e,C$i,C$n),this.m_bodyContactCountBuffer.data&&C$$s(this.m_bodyContactCountBuffer.data,C$e,C$i,C$n),this.m_consecutiveContactStepsBuffer.data&&C$$s(this.m_consecutiveContactStepsBuffer.data,C$e,C$i,C$n),C$$s(this.m_positionBuffer.data,C$e,C$i,C$n),C$$s(this.m_velocityBuffer.data,C$e,C$i,C$n),C$$s(this.m_groupBuffer,C$e,C$i,C$n),this.m_hasForce&&C$$s(this.m_forceBuffer,C$e,C$i,C$n),this.m_staticPressureBuffer&&C$$s(this.m_staticPressureBuffer,C$e,C$i,C$n),this.m_depthBuffer&&C$$s(this.m_depthBuffer,C$e,C$i,C$n),this.m_colorBuffer.data&&C$$s(this.m_colorBuffer.data,C$e,C$i,C$n),this.m_userDataBuffer.data&&C$$s(this.m_userDataBuffer.data,C$e,C$i,C$n),this.m_handleIndexBuffer.data){C$$s(this.m_handleIndexBuffer.data,C$e,C$i,C$n);for(var C$t=C$e;C$t<C$n;++C$t){var C$h=this.m_handleIndexBuffer.data[C$t];C$h&&C$h.SetIndex(C$l(C$h.GetIndex()))}}if(this.m_expirationTimeBuffer.data){C$$s(this.m_expirationTimeBuffer.data,C$e,C$i,C$n);var C$u=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;for(var C$_=this.m_indexByExpirationTimeBuffer.data,C$t=0;C$t<C$u;++C$t)C$_[C$t]=C$l(C$_[C$t])}for(var C$r=0;C$r<this.m_proxyBuffer.count;C$r++){var C$d=this.m_proxyBuffer.data[C$r];C$d.index=C$l(C$d.index)}for(C$r=0;C$r<this.m_contactBuffer.count;C$r++)(C$s=this.m_contactBuffer.data[C$r]).indexA=C$l(C$s.indexA),C$s.indexB=C$l(C$s.indexB);for(var C$s,C$r=0;C$r<this.m_bodyContactBuffer.count;C$r++)(C$s=this.m_bodyContactBuffer.data[C$r]).index=C$l(C$s.index);for(C$r=0;C$r<this.m_pairBuffer.count;C$r++){var C$o=this.m_pairBuffer.data[C$r];C$o.indexA=C$l(C$o.indexA),C$o.indexB=C$l(C$o.indexB)}for(C$r=0;C$r<this.m_triadBuffer.count;C$r++){var C$a=this.m_triadBuffer.data[C$r];C$a.indexA=C$l(C$a.indexA),C$a.indexB=C$l(C$a.indexB),C$a.indexC=C$l(C$a.indexC)}for(var C$c=this.m_groupList;C$c;C$c=C$c.GetNext())C$c.m_firstIndex=C$l(C$c.m_firstIndex),C$c.m_lastIndex=C$l(C$c.m_lastIndex-1)+1}function C$l(C$t){return C$t<C$e?C$t:C$t<C$i?C$t+C$n-C$i:C$t<C$n?C$t+C$e-C$i:C$t}},C$X.prototype.GetCriticalVelocity=function(C$t){return this.m_particleDiameter*C$t.inv_dt},C$X.prototype.GetCriticalVelocitySquared=function(C$t){C$t=this.GetCriticalVelocity(C$t);return C$t*C$t},C$X.prototype.GetCriticalPressure=function(C$t){return this.m_def.density*this.GetCriticalVelocitySquared(C$t)},C$X.prototype.GetParticleStride=function(){return.75*this.m_particleDiameter},C$X.prototype.GetParticleMass=function(){var C$t=this.GetParticleStride();return this.m_def.density*C$t*C$t},C$X.prototype.GetParticleInvMass=function(){var C$t=this.m_inverseDiameter*(1/.75);return this.m_inverseDensity*C$t*C$t},C$X.prototype.GetFixtureContactFilter=function(){return this.m_allParticleFlags&C$H.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},C$X.prototype.GetParticleContactFilter=function(){return this.m_allParticleFlags&C$H.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},C$X.prototype.GetFixtureContactListener=function(){return this.m_allParticleFlags&C$H.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},C$X.prototype.GetParticleContactListener=function(){return this.m_allParticleFlags&C$H.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},C$X.prototype.SetUserOverridableBuffer=function(C$t,C$e,C$i){C$t.data=C$e,C$t.userSuppliedCapacity=C$i},C$X.prototype.SetGroupFlags=function(C$t,C$e){var C$i=C$t.m_groupFlags;(C$i^C$e)&C$H.b2ParticleGroupFlag.b2_solidParticleGroup&&(C$e|=C$H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),C$i&~C$e&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&C$e&&(C$e&C$H.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=C$e),C$t.m_groupFlags=C$e},C$X.BodyContactCompare=function(C$t,C$e){return C$t.index===C$e.index?C$t.weight>C$e.weight:C$t.index<C$e.index},C$X.prototype.RemoveSpuriousBodyContacts=function(){C$qs(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,C$X.BodyContactCompare);var C$s=C$X.RemoveSpuriousBodyContacts_s_n,C$o=C$X.RemoveSpuriousBodyContacts_s_pos,C$a=C$X.RemoveSpuriousBodyContacts_s_normal,C$c=this,C$l=-1,C$h=0;this.m_bodyContactBuffer.count=C$Zs(this.m_bodyContactBuffer.data,function(C$t){if(C$t.index!==C$l&&(C$h=0,C$l=C$t.index),3<C$h++)return!0;var C$e=C$s.Copy(C$t.normal);if(C$e.SelfMul(C$c.m_particleDiameter*(1-C$t.weight)),!C$c.m_positionBuffer.data)throw new Error;var C$i=C$j.AddVV(C$c.m_positionBuffer.data[C$t.index],C$e,C$o);if(C$t.fixture.TestPoint(C$i))return!1;for(var C$n=C$t.fixture.GetShape().GetChildCount(),C$r=0;C$r<C$n;C$r++)if(C$t.fixture.ComputeDistance(C$i,C$a,C$r)<.008)return!1;return!0},this.m_bodyContactBuffer.count)},C$X.prototype.DetectStuckParticle=function(C$t){if(!(this.m_stuckThreshold<=0)){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;++this.m_bodyContactCountBuffer.data[C$t],2===this.m_bodyContactCountBuffer.data[C$t]&&(++this.m_consecutiveContactStepsBuffer.data[C$t],this.m_consecutiveContactStepsBuffer.data[C$t]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=C$t)),this.m_lastBodyContactStepBuffer.data[C$t]=this.m_timestamp}},C$X.prototype.ValidateParticleIndex=function(C$t){return 0<=C$t&&C$t<this.GetParticleCount()&&-1!==C$t},C$X.prototype.GetQuantizedTimeElapsed=function(){return Math.floor(this.m_timeElapsed/4294967296)},C$X.prototype.LifetimeToExpirationTime=function(C$t){return this.m_timeElapsed+Math.floor(C$t/this.m_def.lifetimeGranularity*4294967296)},C$X.prototype.ForceCanBeApplied=function(C$t){return!(C$t&C$H.b2ParticleFlag.b2_wallParticle)},C$X.prototype.PrepareForceBuffer=function(){if(!this.m_hasForce){for(var C$t=0;C$t<this.m_count;C$t++)this.m_forceBuffer[C$t].SetZero();this.m_hasForce=!0}},C$X.prototype.IsRigidGroup=function(C$t){return null!==C$t&&0!=(C$t.m_groupFlags&C$H.b2ParticleGroupFlag.b2_rigidParticleGroup)},C$X.prototype.GetLinearVelocity=function(C$t,C$e,C$i,C$n){if(C$t&&this.IsRigidGroup(C$t))return C$t.GetLinearVelocityFromWorldPoint(C$i,C$n);if(!this.m_velocityBuffer.data)throw new Error;return C$n.Copy(this.m_velocityBuffer.data[C$e])},C$X.prototype.InitDampingParameter=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){C$t[0]=0<C$n?1/C$n:0,C$e[0]=0<C$r?1/C$r:0,C$i[0]=C$j.CrossVV(C$j.SubVV(C$o,C$s,C$j.s_t0),C$a)},C$X.prototype.InitDampingParameterWithRigidGroupOrParticle=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){if(C$r&&C$n)this.InitDampingParameter(C$t,C$e,C$i,C$r.GetMass(),C$r.GetInertia(),C$r.GetCenter(),C$o,C$a);else{if(!this.m_flagsBuffer.data)throw new Error;C$n=this.m_flagsBuffer.data[C$s];this.InitDampingParameter(C$t,C$e,C$i,C$n&C$H.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,C$o,C$o,C$a)}},C$X.prototype.ComputeDampingImpulse=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o){C$t=C$t+C$e*C$i*C$i+C$n+C$r*C$s*C$s;return 0<C$t?C$o/C$t:0},C$X.prototype.ApplyDamping=function(C$t,C$e,C$i,C$n,C$r,C$s,C$o,C$a){if(C$r&&C$n)C$r.m_linearVelocity.SelfMulAdd(C$o*C$t,C$a),C$r.m_angularVelocity+=C$o*C$i*C$e;else{if(!this.m_velocityBuffer.data)throw new Error;this.m_velocityBuffer.data[C$s].SelfMulAdd(C$o*C$t,C$a)}},C$X.xTruncBits=12,C$X.yTruncBits=12,C$X.tagBits=32,C$X.yOffset=1<<C$X.yTruncBits-1,C$X.yShift=C$X.tagBits-C$X.yTruncBits,C$X.xShift=C$X.tagBits-C$X.yTruncBits-C$X.xTruncBits,C$X.xScale=1<<C$X.xShift,C$X.xOffset=C$X.xScale*(1<<C$X.xTruncBits-1),C$X.yMask=(1<<C$X.yTruncBits)-1<<C$X.yShift,C$X.xMask=~C$X.yMask,C$X.DestroyParticlesInShape_s_aabb=new C$ie,C$X.CreateParticleGroup_s_transform=new C$R,C$X.ComputeCollisionEnergy_s_v=new C$j,C$X.QueryShapeAABB_s_aabb=new C$ie,C$X.QueryPointAABB_s_aabb=new C$ie,C$X.RayCast_s_aabb=new C$ie,C$X.RayCast_s_p=new C$j,C$X.RayCast_s_v=new C$j,C$X.RayCast_s_n=new C$j,C$X.RayCast_s_point=new C$j,C$X.k_pairFlags=C$H.b2ParticleFlag.b2_springParticle,C$X.k_triadFlags=C$H.b2ParticleFlag.b2_elasticParticle,C$X.k_noPressureFlags=C$H.b2ParticleFlag.b2_powderParticle|C$H.b2ParticleFlag.b2_tensileParticle,C$X.k_extraDampingFlags=C$H.b2ParticleFlag.b2_staticPressureParticle,C$X.k_barrierWallFlags=C$H.b2ParticleFlag.b2_barrierParticle|C$H.b2ParticleFlag.b2_wallParticle,C$X.CreateParticlesStrokeShapeForGroup_s_edge=new C$Gi,C$X.CreateParticlesStrokeShapeForGroup_s_d=new C$j,C$X.CreateParticlesStrokeShapeForGroup_s_p=new C$j,C$X.CreateParticlesFillShapeForGroup_s_aabb=new C$ie,C$X.CreateParticlesFillShapeForGroup_s_p=new C$j,C$X.UpdatePairsAndTriads_s_dab=new C$j,C$X.UpdatePairsAndTriads_s_dbc=new C$j,C$X.UpdatePairsAndTriads_s_dca=new C$j,C$X.AddContact_s_d=new C$j,C$X.UpdateBodyContacts_s_aabb=new C$ie,C$X.Solve_s_subStep=new C$ds,C$X.SolveCollision_s_aabb=new C$ie,C$X.SolveGravity_s_gravity=new C$j,C$X.SolveBarrier_s_aabb=new C$ie,C$X.SolveBarrier_s_va=new C$j,C$X.SolveBarrier_s_vb=new C$j,C$X.SolveBarrier_s_pba=new C$j,C$X.SolveBarrier_s_vba=new C$j,C$X.SolveBarrier_s_vc=new C$j,C$X.SolveBarrier_s_pca=new C$j,C$X.SolveBarrier_s_vca=new C$j,C$X.SolveBarrier_s_qba=new C$j,C$X.SolveBarrier_s_qca=new C$j,C$X.SolveBarrier_s_dv=new C$j,C$X.SolveBarrier_s_f=new C$j,C$X.SolvePressure_s_f=new C$j,C$X.SolveDamping_s_v=new C$j,C$X.SolveDamping_s_f=new C$j,C$X.SolveRigidDamping_s_t0=new C$j,C$X.SolveRigidDamping_s_t1=new C$j,C$X.SolveRigidDamping_s_p=new C$j,C$X.SolveRigidDamping_s_v=new C$j,C$X.SolveExtraDamping_s_v=new C$j,C$X.SolveExtraDamping_s_f=new C$j,C$X.SolveRigid_s_position=new C$j,C$X.SolveRigid_s_rotation=new C$B,C$X.SolveRigid_s_transform=new C$R,C$X.SolveRigid_s_velocityTransform=new C$R,C$X.SolveElastic_s_pa=new C$j,C$X.SolveElastic_s_pb=new C$j,C$X.SolveElastic_s_pc=new C$j,C$X.SolveElastic_s_r=new C$B,C$X.SolveElastic_s_t0=new C$j,C$X.SolveSpring_s_pa=new C$j,C$X.SolveSpring_s_pb=new C$j,C$X.SolveSpring_s_d=new C$j,C$X.SolveSpring_s_f=new C$j,C$X.SolveTensile_s_weightedNormal=new C$j,C$X.SolveTensile_s_s=new C$j,C$X.SolveTensile_s_f=new C$j,C$X.SolveViscous_s_v=new C$j,C$X.SolveViscous_s_f=new C$j,C$X.SolveRepulsive_s_f=new C$j,C$X.SolvePowder_s_f=new C$j,C$X.SolveSolid_s_f=new C$j,C$X.RemoveSpuriousBodyContacts_s_n=new C$j,C$X.RemoveSpuriousBodyContacts_s_pos=new C$j,C$X.RemoveSpuriousBodyContacts_s_normal=new C$j,C$X),function(C$_){C$_.UserOverridableBuffer=function(){this.data=null,this.userSuppliedCapacity=0},C$e.CompareProxyProxy=function(C$t,C$e){return C$t.tag<C$e.tag},C$e.CompareTagProxy=function(C$t,C$e){return C$t<C$e.tag},C$e.CompareProxyTag=function(C$t,C$e){return C$t.tag<C$e};var C$t=C$e;function C$e(){this.index=-1,this.tag=0}function C$l(C$t,C$e,C$i,C$n,C$r){this.m_system=C$t,this.m_xLower=(C$e&C$_.xMask)>>>0,this.m_xUpper=(C$i&C$_.xMask)>>>0,this.m_yLower=(C$e&C$_.yMask)>>>0,this.m_yUpper=(C$i&C$_.yMask)>>>0,this.m_first=C$n,this.m_last=C$r}C$_.Proxy=C$t,C$l.prototype.GetNext=function(){for(;this.m_first<this.m_last;){var C$t=(this.m_system.m_proxyBuffer.data[this.m_first].tag&C$_.xMask)>>>0;if(C$t>=this.m_xLower&&C$t<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return-1},C$_.InsideBoundsEnumerator=C$l;C$_.ParticleListNode=function(){this.next=null,this.count=0,this.index=0},C$i.prototype.Allocate=function(C$t,C$e){return C$e},C$i.prototype.Clear=function(){},C$i.prototype.GetCount=function(){return 0},C$i.prototype.Invalidate=function(C$t){},C$i.prototype.GetValidBuffer=function(){return[]},C$i.prototype.GetBuffer=function(){return[]},C$i.prototype.SetCount=function(C$t){};C$t=C$i;function C$i(){}C$_.FixedSetAllocator=C$t;C$_.FixtureParticle=function(C$t,C$e){this.second=-1,this.first=C$t,this.second=C$e},C$Vi(C$n,C$h=C$_.FixedSetAllocator),C$n.prototype.Initialize=function(C$t,C$e){},C$n.prototype.Find=function(C$t){return-1};var C$h,C$t=C$n;function C$n(){return null!==C$h&&C$h.apply(this,arguments)||this}C$_.FixtureParticleSet=C$t;C$_.ParticlePair=function(C$t,C$e){this.first=-1,this.second=-1,this.first=C$t,this.second=C$e},C$Vi(C$r,C$u=C$_.FixedSetAllocator),C$r.prototype.Initialize=function(C$t,C$e){},C$r.prototype.Find=function(C$t){return-1};var C$u,C$t=C$r;function C$r(){return null!==C$u&&C$u.apply(this,arguments)||this}function C$d(){}C$_.b2ParticlePairSet=C$t,C$d.prototype.IsNecessary=function(C$t){return!0},C$d.prototype.ShouldCreatePair=function(C$t,C$e){return!0},C$d.prototype.ShouldCreateTriad=function(C$t,C$e,C$i){return!0},C$_.ConnectionFilter=C$d;C$Vi(C$s,C$f=C$ss),C$s.prototype.ReportFixture=function(C$t){return!1},C$s.prototype.ReportParticle=function(C$t,C$e){if(C$t!==this.m_system)return!1;if(!this.m_system.m_positionBuffer.data)throw new Error;return this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[C$e])&&(this.m_system.DestroyParticle(C$e,this.m_callDestructionListener),this.m_destroyed++),!0},C$s.prototype.Destroyed=function(){return this.m_destroyed};var C$f,C$t=C$s;function C$s(C$t,C$e,C$i,C$n){var C$r=C$f.call(this)||this;return C$r.m_callDestructionListener=!1,C$r.m_destroyed=0,C$r.m_system=C$t,C$r.m_shape=C$e,C$r.m_xf=C$i,C$r.m_callDestructionListener=C$n,C$r.m_destroyed=0,C$r}C$_.DestroyParticlesInShapeCallback=C$t;C$Vi(C$m,C$p=C$_.ConnectionFilter),C$m.prototype.ShouldCreatePair=function(C$t,C$e){return C$t<this.m_threshold&&this.m_threshold<=C$e||C$e<this.m_threshold&&this.m_threshold<=C$t},C$m.prototype.ShouldCreateTriad=function(C$t,C$e,C$i){return(C$t<this.m_threshold||C$e<this.m_threshold||C$i<this.m_threshold)&&(this.m_threshold<=C$t||this.m_threshold<=C$e||this.m_threshold<=C$i)};var C$p,C$t=C$m;function C$m(C$t){var C$e=C$p.call(this)||this;return C$e.m_threshold=0,C$e.m_threshold=C$t,C$e}C$_.JoinParticleGroupsFilter=C$t;C$Vi(C$o,C$y=C$Pi),C$o.prototype.Clone=function(){throw new Error},C$o.prototype.GetChildCount=function(){return 1},C$o.prototype.TestPoint=function(C$t,C$e){for(var C$i=0;C$i<this.m_shapeCount;C$i++)if(this.m_shapes[C$i].TestPoint(C$t,C$e))return!0;return!1},C$o.prototype.ComputeDistance=function(C$t,C$e,C$i,C$n){return 0},C$o.prototype.RayCast=function(C$t,C$e,C$i,C$n){return!1},C$o.prototype.ComputeAABB=function(C$t,C$e,C$i){var C$n=new C$ie;C$t.lowerBound.x=+C$P,C$t.lowerBound.y=+C$P,C$t.upperBound.x=-C$P,C$t.upperBound.y=-C$P;for(var C$r=0;C$r<this.m_shapeCount;C$r++)for(var C$s=this.m_shapes[C$r].GetChildCount(),C$o=0;C$o<C$s;C$o++){var C$a=C$n;this.m_shapes[C$r].ComputeAABB(C$a,C$e,C$o),C$t.Combine1(C$a)}},C$o.prototype.ComputeMass=function(C$t,C$e){},C$o.prototype.SetupDistanceProxy=function(C$t,C$e){},C$o.prototype.ComputeSubmergedArea=function(C$t,C$e,C$i,C$n){return 0},C$o.prototype.Dump=function(C$t){};var C$y,C$t=C$o;function C$o(C$t,C$e){void 0===C$e&&(C$e=C$t.length);var C$i=C$y.call(this,C$H.b2ShapeType.e_unknown,0)||this;return C$i.m_shapeCount=0,C$i.m_shapes=C$t,C$i.m_shapeCount=C$e,C$i}C$_.CompositeShape=C$t;C$Vi(C$v,C$g=C$_.ConnectionFilter),C$v.prototype.IsNecessary=function(C$t){if(!this.m_flagsBuffer.data)throw new Error;return 0!=(this.m_flagsBuffer.data[C$t]&C$H.b2ParticleFlag.b2_reactiveParticle)};var C$g,C$t=C$v;function C$v(C$t){var C$e=C$g.call(this)||this;return C$e.m_flagsBuffer=C$t,C$e}C$_.ReactiveFilter=C$t;C$Vi(C$a,C$x=C$no),C$a.prototype.ShouldCollideFixtureParticle=function(C$t,C$e,C$i){if(this.m_contactFilter&&this.m_system.GetFlagsBuffer()[C$i]&C$H.b2ParticleFlag.b2_fixtureContactFilterParticle)return this.m_contactFilter.ShouldCollideFixtureParticle(C$t,this.m_system,C$i);return!0},C$a.prototype.ReportFixtureAndParticle=function(C$t,C$e,C$i){var C$n=C$_.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n,C$r=C$_.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp;if(!this.m_system.m_flagsBuffer.data)throw new Error;if(!this.m_system.m_positionBuffer.data)throw new Error;var C$s,C$h,C$o,C$a,C$c,C$l=this.m_system.m_positionBuffer.data[C$i],C$e=C$t.ComputeDistance(C$l,C$n,C$e);C$e<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(C$t,this.m_system,C$i)&&(C$a=(C$s=C$t.GetBody()).GetWorldCenter(),C$h=0<(C$o=C$s.GetMass())?1/C$o:0,C$o=0<(C$o=C$s.GetInertia()-C$o*C$s.GetLocalCenter().LengthSquared())?1/C$o:0,C$c=this.m_system.m_flagsBuffer.data[C$i]&C$H.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),C$l=C$j.SubVV(C$l,C$a,C$r),C$r=C$c+C$h+C$o*(C$a=C$j.CrossVV(C$l,C$n))*C$a,(C$c=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()]).index=C$i,C$c.body=C$s,C$c.fixture=C$t,C$c.weight=1-C$e*this.m_system.m_inverseDiameter,C$c.normal.Copy(C$n.SelfNeg()),C$c.mass=0<C$r?1/C$r:0,this.m_system.DetectStuckParticle(C$i))},C$a.ReportFixtureAndParticle_s_n=new C$j,C$a.ReportFixtureAndParticle_s_rp=new C$j;var C$x,C$t=C$a;function C$a(C$t,C$e){C$t=C$x.call(this,C$t)||this;return C$t.m_contactFilter=C$e,C$t}C$_.UpdateBodyContactsCallback=C$t;C$Vi(C$c,C$b=C$no),C$c.prototype.ReportFixtureAndParticle=function(C$t,C$e,C$i){var C$n=C$_.SolveCollisionCallback.ReportFixtureAndParticle_s_p1,C$r=C$_.SolveCollisionCallback.ReportFixtureAndParticle_s_output,C$s=C$_.SolveCollisionCallback.ReportFixtureAndParticle_s_input,C$o=C$_.SolveCollisionCallback.ReportFixtureAndParticle_s_p,C$h=C$_.SolveCollisionCallback.ReportFixtureAndParticle_s_v,C$u=C$_.SolveCollisionCallback.ReportFixtureAndParticle_s_f,C$a=C$t.GetBody();if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;var C$c=this.m_system.m_positionBuffer.data[C$i],C$l=this.m_system.m_velocityBuffer.data[C$i];0===this.m_system.m_iterationIndex?(C$n=C$R.MulTXV(C$a.m_xf0,C$c,C$n),C$t.GetShape().GetType()===C$H.b2ShapeType.e_circleShape&&(C$n.SelfSub(C$a.GetLocalCenter()),C$B.MulRV(C$a.m_xf0.q,C$n,C$n),C$B.MulTRV(C$a.m_xf.q,C$n,C$n),C$n.SelfAdd(C$a.GetLocalCenter())),C$R.MulXV(C$a.m_xf,C$n,C$s.p1)):C$s.p1.Copy(C$c),C$j.AddVMulSV(C$c,this.m_step.dt,C$l,C$s.p2),C$s.maxFraction=1,C$t.RayCast(C$r,C$s,C$e)&&(C$a=C$r.normal,(C$n=C$o).x=(1-C$r.fraction)*C$s.p1.x+C$r.fraction*C$s.p2.x+.008*C$a.x,C$n.y=(1-C$r.fraction)*C$s.p1.y+C$r.fraction*C$s.p2.y+.008*C$a.y,(C$t=C$h).x=this.m_step.inv_dt*(C$n.x-C$c.x),C$t.y=this.m_step.inv_dt*(C$n.y-C$c.y),this.m_system.m_velocityBuffer.data[C$i].Copy(C$t),(C$e=C$u).x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(C$l.x-C$t.x),C$e.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(C$l.y-C$t.y),this.m_system.ParticleApplyForce(C$i,C$e))},C$c.prototype.ReportParticle=function(C$t,C$e){return!1},C$c.ReportFixtureAndParticle_s_p1=new C$j,C$c.ReportFixtureAndParticle_s_output=new C$te,C$c.ReportFixtureAndParticle_s_input=new C$Qt,C$c.ReportFixtureAndParticle_s_p=new C$j,C$c.ReportFixtureAndParticle_s_v=new C$j,C$c.ReportFixtureAndParticle_s_f=new C$j;var C$b,C$t=C$c;function C$c(C$t,C$e){C$t=C$b.call(this,C$t)||this;return C$t.m_step=C$e,C$t}C$_.SolveCollisionCallback=C$t}(C$H.b2ParticleSystem||(C$H.b2ParticleSystem={}));C$E.prototype.SetDestructionListener=function(C$t){this.m_destructionListener=C$t},C$E.prototype.SetContactFilter=function(C$t){this.m_contactManager.m_contactFilter=C$t},C$E.prototype.SetContactListener=function(C$t){this.m_contactManager.m_contactListener=C$t},C$E.prototype.SetDebugDraw=function(C$t){this.m_debugDraw=C$t},C$E.prototype.CreateBody=function(C$t){if(void 0===C$t&&(C$t={}),this.IsLocked())throw new Error;C$t=new C$Qi(C$t,this);return C$t.m_prev=null,C$t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=C$t),this.m_bodyList=C$t,++this.m_bodyCount,C$t},C$E.prototype.DestroyBody=function(C$t){if(this.IsLocked())throw new Error;for(var C$e=C$t.m_jointList;C$e;){var C$i=C$e,C$e=C$e.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(C$i.joint),this.DestroyJoint(C$i.joint),C$t.m_jointList=C$e}C$t.m_jointList=null;for(var C$n=C$t.m_controllerList;C$n;){var C$r=C$n,C$n=C$n.nextController;C$r.controller.RemoveBody(C$t)}for(var C$s=C$t.m_contactList;C$s;){var C$o=C$s,C$s=C$s.next;this.m_contactManager.Destroy(C$o.contact)}C$t.m_contactList=null;for(var C$a=C$t.m_fixtureList;C$a;){var C$c=C$a,C$a=C$a.m_next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(C$c),C$c.DestroyProxies(),C$c.Destroy(),C$t.m_fixtureList=C$a,--C$t.m_fixtureCount}C$t.m_fixtureList=null,C$t.m_fixtureCount=0,C$t.m_prev&&(C$t.m_prev.m_next=C$t.m_next),C$t.m_next&&(C$t.m_next.m_prev=C$t.m_prev),C$t===this.m_bodyList&&(this.m_bodyList=C$t.m_next),--this.m_bodyCount},C$E._Joint_Create=function(C$t,C$e){switch(C$t.type){case C$H.b2JointType.e_distanceJoint:return new C$ln(C$t);case C$H.b2JointType.e_mouseJoint:return new C$kn(C$t);case C$H.b2JointType.e_prismaticJoint:return new C$jn(C$t);case C$H.b2JointType.e_revoluteJoint:return new C$nr(C$t);case C$H.b2JointType.e_pulleyJoint:return new C$Kn(C$t);case C$H.b2JointType.e_gearJoint:return new C$En(C$t);case C$H.b2JointType.e_wheelJoint:return new C$br(C$t);case C$H.b2JointType.e_weldJoint:return new C$pr(C$t);case C$H.b2JointType.e_frictionJoint:return new C$bn(C$t);case C$H.b2JointType.e_ropeJoint:return new C$lr(C$t);case C$H.b2JointType.e_motorJoint:return new C$Dn(C$t);case C$H.b2JointType.e_areaJoint:return new C$pn(C$t)}throw new Error},C$E._Joint_Destroy=function(C$t,C$e){},C$E.prototype.CreateJoint=function(C$t){if(this.IsLocked())throw new Error;var C$e=C$E._Joint_Create(C$t,null),C$i=(C$e.m_prev=null,C$e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=C$e),this.m_jointList=C$e,++this.m_jointCount,C$e.m_edgeA.prev=null,C$e.m_edgeA.next=C$e.m_bodyA.m_jointList,C$e.m_bodyA.m_jointList&&(C$e.m_bodyA.m_jointList.prev=C$e.m_edgeA),C$e.m_bodyA.m_jointList=C$e.m_edgeA,C$e.m_edgeB.prev=null,C$e.m_edgeB.next=C$e.m_bodyB.m_jointList,C$e.m_bodyB.m_jointList&&(C$e.m_bodyB.m_jointList.prev=C$e.m_edgeB),C$e.m_bodyB.m_jointList=C$e.m_edgeB,C$t.bodyA),C$n=C$t.bodyB;if(!C$t.collideConnected)for(var C$r=C$n.GetContactList();C$r;)C$r.other===C$i&&C$r.contact.FlagForFiltering(),C$r=C$r.next;return C$e},C$E.prototype.DestroyJoint=function(C$t){if(this.IsLocked())throw new Error;var C$e=C$t.m_collideConnected,C$i=(C$t.m_prev&&(C$t.m_prev.m_next=C$t.m_next),C$t.m_next&&(C$t.m_next.m_prev=C$t.m_prev),C$t===this.m_jointList&&(this.m_jointList=C$t.m_next),C$t.m_bodyA),C$n=C$t.m_bodyB;if(C$i.SetAwake(!0),C$n.SetAwake(!0),C$t.m_edgeA.prev&&(C$t.m_edgeA.prev.next=C$t.m_edgeA.next),C$t.m_edgeA.next&&(C$t.m_edgeA.next.prev=C$t.m_edgeA.prev),C$t.m_edgeA===C$i.m_jointList&&(C$i.m_jointList=C$t.m_edgeA.next),C$t.m_edgeA.prev=null,C$t.m_edgeA.next=null,C$t.m_edgeB.prev&&(C$t.m_edgeB.prev.next=C$t.m_edgeB.next),C$t.m_edgeB.next&&(C$t.m_edgeB.next.prev=C$t.m_edgeB.prev),C$t.m_edgeB===C$n.m_jointList&&(C$n.m_jointList=C$t.m_edgeB.next),C$t.m_edgeB.prev=null,C$t.m_edgeB.next=null,C$E._Joint_Destroy(C$t,null),--this.m_jointCount,!C$e)for(var C$r=C$n.GetContactList();C$r;)C$r.other===C$i&&C$r.contact.FlagForFiltering(),C$r=C$r.next},C$E.prototype.CreateParticleSystem=function(C$t){if(this.IsLocked())throw new Error;C$t=new C$H.b2ParticleSystem(C$t,this);return C$t.m_prev=null,C$t.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=C$t),this.m_particleSystemList=C$t},C$E.prototype.DestroyParticleSystem=function(C$t){if(this.IsLocked())throw new Error;C$t.m_prev&&(C$t.m_prev.m_next=C$t.m_next),C$t.m_next&&(C$t.m_next.m_prev=C$t.m_prev),C$t===this.m_particleSystemList&&(this.m_particleSystemList=C$t.m_next)},C$E.prototype.CalculateReasonableParticleIterations=function(C$t){return null===this.m_particleSystemList?1:C$Ls(this.m_gravity.Length(),function(C$t){for(var C$e=C$P,C$i=C$t.GetParticleSystemList();null!==C$i;C$i=C$i.m_next)C$e=C$L(C$e,C$i.GetRadius());return C$e}(this),C$t)},C$E.prototype.Step=function(C$t,C$e,C$i,C$n){void 0===C$n&&(C$n=this.CalculateReasonableParticleIterations(C$t));var C$r=C$E.Step_s_stepTimer.Reset(),C$s=(this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0,C$E.Step_s_step),C$e=(C$s.dt=C$t,C$s.velocityIterations=C$e,C$s.positionIterations=C$i,C$s.particleIterations=C$n,C$s.inv_dt=0<C$t?1/C$t:0,C$s.dtRatio=this.m_inv_dt0*C$t,C$s.warmStarting=this.m_warmStarting,C$E.Step_s_timer.Reset());if(this.m_contactManager.Collide(),this.m_profile.collide=C$e.GetMilliseconds(),this.m_stepComplete&&0<C$s.dt){for(var C$i=C$E.Step_s_timer.Reset(),C$o=this.m_particleSystemList;C$o;C$o=C$o.m_next)C$o.Solve(C$s);this.Solve(C$s),this.m_profile.solve=C$i.GetMilliseconds()}this.m_continuousPhysics&&0<C$s.dt&&(C$n=C$E.Step_s_timer.Reset(),this.SolveTOI(C$s),this.m_profile.solveTOI=C$n.GetMilliseconds()),0<C$s.dt&&(this.m_inv_dt0=C$s.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=C$r.GetMilliseconds()},C$E.prototype.ClearForces=function(){for(var C$t=this.m_bodyList;C$t;C$t=C$t.m_next)C$t.m_force.SetZero(),C$t.m_torque=0},C$E.prototype.DrawParticleSystem=function(C$t){var C$e,C$i,C$n;null===this.m_debugDraw||(C$e=C$t.GetParticleCount())&&(C$i=C$t.GetRadius(),C$n=C$t.GetPositionBuffer(),C$t.m_colorBuffer.data?(C$t=C$t.GetColorBuffer(),this.m_debugDraw.DrawParticles(C$n,C$i,C$t,C$e)):this.m_debugDraw.DrawParticles(C$n,C$i,null,C$e))},C$E.prototype.DrawDebugData=function(){if(null!==this.m_debugDraw){var C$t=this.m_debugDraw.GetFlags(),C$e=C$E.DrawDebugData_s_color.SetRGB(0,0,0);if(C$t&C$H.b2DrawFlags.e_shapeBit)for(var C$i=this.m_bodyList;C$i;C$i=C$i.m_next){var C$n=C$i.m_xf;this.m_debugDraw.PushTransform(C$n);for(var C$r=C$i.GetFixtureList();C$r;C$r=C$r.m_next)C$i.IsActive()?C$i.GetType()===C$H.b2BodyType.b2_staticBody?C$e.SetRGB(.5,.9,.5):C$i.GetType()===C$H.b2BodyType.b2_kinematicBody?C$e.SetRGB(.5,.5,.9):C$i.IsAwake()?C$e.SetRGB(.9,.7,.7):C$e.SetRGB(.6,.6,.6):C$e.SetRGB(.5,.5,.3),this.DrawShape(C$r,C$e);this.m_debugDraw.PopTransform(C$n)}if(C$t&C$H.b2DrawFlags.e_particleBit)for(var C$s=this.m_particleSystemList;C$s;C$s=C$s.m_next)this.DrawParticleSystem(C$s);if(C$t&C$H.b2DrawFlags.e_jointBit)for(var C$o=this.m_jointList;C$o;C$o=C$o.m_next)this.DrawJoint(C$o);if(C$t&C$H.b2DrawFlags.e_aabbBit){C$e.SetRGB(.9,.3,.9);for(var C$a=C$E.DrawDebugData_s_vs,C$i=this.m_bodyList;C$i;C$i=C$i.m_next)if(C$i.IsActive())for(C$r=C$i.GetFixtureList();C$r;C$r=C$r.m_next)for(var C$h=0;C$h<C$r.m_proxyCount;++C$h){var C$c=C$r.m_proxies[C$h].treeNode.aabb;C$a[0].Set(C$c.lowerBound.x,C$c.lowerBound.y),C$a[1].Set(C$c.upperBound.x,C$c.lowerBound.y),C$a[2].Set(C$c.upperBound.x,C$c.upperBound.y),C$a[3].Set(C$c.lowerBound.x,C$c.upperBound.y),this.m_debugDraw.DrawPolygon(C$a,4,C$e)}}if(C$t&C$H.b2DrawFlags.e_centerOfMassBit)for(C$i=this.m_bodyList;C$i;C$i=C$i.m_next)(C$n=C$E.DrawDebugData_s_xf).q.Copy(C$i.m_xf.q),C$n.p.Copy(C$i.GetWorldCenter()),this.m_debugDraw.DrawTransform(C$n);if(C$t&C$H.b2DrawFlags.e_controllerBit)for(var C$l=this.m_controllerList;C$l;C$l=C$l.m_next)C$l.Draw(this.m_debugDraw)}},C$E.prototype.QueryAABB=function(C$e,C$t,C$i){if(this.m_contactManager.m_broadPhase.Query(C$t,function(C$t){C$t=C$t.userData.fixture;return C$e?C$e.ReportFixture(C$t):!C$i||C$i(C$t)}),C$e instanceof C$ss)for(var C$n=this.m_particleSystemList;C$n;C$n=C$n.m_next)C$e.ShouldQueryParticleSystem(C$n)&&C$n.QueryAABB(C$e,C$t)},C$E.prototype.QueryAllAABB=function(C$t,C$e){return void 0===C$e&&(C$e=[]),this.QueryAABB(null,C$t,function(C$t){return C$e.push(C$t),!0}),C$e},C$E.prototype.QueryPointAABB=function(C$e,C$t,C$i){if(this.m_contactManager.m_broadPhase.QueryPoint(C$t,function(C$t){C$t=C$t.userData.fixture;return C$e?C$e.ReportFixture(C$t):!C$i||C$i(C$t)}),C$e instanceof C$ss)for(var C$n=this.m_particleSystemList;C$n;C$n=C$n.m_next)C$e.ShouldQueryParticleSystem(C$n)&&C$n.QueryPointAABB(C$e,C$t)},C$E.prototype.QueryAllPointAABB=function(C$t,C$e){return void 0===C$e&&(C$e=[]),this.QueryPointAABB(null,C$t,function(C$t){return C$e.push(C$t),!0}),C$e},C$E.prototype.QueryFixtureShape=function(C$i,C$n,C$r,C$s,C$o){var C$t=C$E.QueryFixtureShape_s_aabb;if(C$n.ComputeAABB(C$t,C$s,C$r),this.m_contactManager.m_broadPhase.Query(C$t,function(C$t){var C$t=C$t.userData,C$e=C$t.fixture;if(C$le(C$n,C$r,C$e.GetShape(),C$t.childIndex,C$s,C$e.GetBody().GetTransform())){if(C$i)return C$i.ReportFixture(C$e);if(C$o)return C$o(C$e)}return!0}),C$i instanceof C$ss)for(var C$e=this.m_particleSystemList;C$e;C$e=C$e.m_next)C$i.ShouldQueryParticleSystem(C$e)&&C$e.QueryAABB(C$i,C$t)},C$E.prototype.QueryAllFixtureShape=function(C$t,C$e,C$i,C$n){return void 0===C$n&&(C$n=[]),this.QueryFixtureShape(null,C$t,C$e,C$i,function(C$t){return C$n.push(C$t),!0}),C$n},C$E.prototype.QueryFixturePoint=function(C$e,C$i,C$n){if(this.m_contactManager.m_broadPhase.QueryPoint(C$i,function(C$t){C$t=C$t.userData.fixture;if(C$t.TestPoint(C$i)){if(C$e)return C$e.ReportFixture(C$t);if(C$n)return C$n(C$t)}return!0}),C$e)for(var C$t=this.m_particleSystemList;C$t;C$t=C$t.m_next)C$e.ShouldQueryParticleSystem(C$t)&&C$t.QueryPointAABB(C$e,C$i)},C$E.prototype.QueryAllFixturePoint=function(C$t,C$e){return void 0===C$e&&(C$e=[]),this.QueryFixturePoint(null,C$t,function(C$t){return C$e.push(C$t),!0}),C$e},C$E.prototype.RayCast=function(C$s,C$o,C$a,C$c){var C$t=C$E.RayCast_s_input;if(C$t.maxFraction=1,C$t.p1.Copy(C$o),C$t.p2.Copy(C$a),this.m_contactManager.m_broadPhase.RayCast(C$t,function(C$t,C$e){var C$e=C$e.userData,C$i=C$e.fixture,C$e=C$e.childIndex,C$n=C$E.RayCast_s_output;if(C$i.RayCast(C$n,C$t,C$e)){var C$e=C$n.fraction,C$r=C$E.RayCast_s_point;if(C$r.Set((1-C$e)*C$o.x+C$e*C$a.x,(1-C$e)*C$o.y+C$e*C$a.y),C$s)return C$s.ReportFixture(C$i,C$r,C$n.normal,C$e);if(C$c)return C$c(C$i,C$r,C$n.normal,C$e)}return C$t.maxFraction}),C$s)for(var C$e=this.m_particleSystemList;C$e;C$e=C$e.m_next)C$s.ShouldQueryParticleSystem(C$e)&&C$e.RayCast(C$s,C$o,C$a)},C$E.prototype.RayCastOne=function(C$t,C$e){var C$r=null,C$s=1;return this.RayCast(null,C$t,C$e,function(C$t,C$e,C$i,C$n){return C$n<C$s&&(C$s=C$n,C$r=C$t),C$s}),C$r},C$E.prototype.RayCastAll=function(C$t,C$e,C$r){return void 0===C$r&&(C$r=[]),this.RayCast(null,C$t,C$e,function(C$t,C$e,C$i,C$n){return C$r.push(C$t),1}),C$r},C$E.prototype.GetBodyList=function(){return this.m_bodyList},C$E.prototype.GetJointList=function(){return this.m_jointList},C$E.prototype.GetParticleSystemList=function(){return this.m_particleSystemList},C$E.prototype.GetContactList=function(){return this.m_contactManager.m_contactList},C$E.prototype.SetAllowSleeping=function(C$t){if(C$t!==this.m_allowSleep&&(this.m_allowSleep=C$t,!this.m_allowSleep))for(var C$e=this.m_bodyList;C$e;C$e=C$e.m_next)C$e.SetAwake(!0)},C$E.prototype.GetAllowSleeping=function(){return this.m_allowSleep},C$E.prototype.SetWarmStarting=function(C$t){this.m_warmStarting=C$t},C$E.prototype.GetWarmStarting=function(){return this.m_warmStarting},C$E.prototype.SetContinuousPhysics=function(C$t){this.m_continuousPhysics=C$t},C$E.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics},C$E.prototype.SetSubStepping=function(C$t){this.m_subStepping=C$t},C$E.prototype.GetSubStepping=function(){return this.m_subStepping},C$E.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},C$E.prototype.GetBodyCount=function(){return this.m_bodyCount},C$E.prototype.GetJointCount=function(){return this.m_jointCount},C$E.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount},C$E.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()},C$E.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()},C$E.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()},C$E.prototype.SetGravity=function(C$t,C$e){if(void 0===C$e&&(C$e=!0),!C$j.IsEqualToV(this.m_gravity,C$t)&&(this.m_gravity.Copy(C$t),C$e))for(var C$i=this.m_bodyList;C$i;C$i=C$i.m_next)C$i.SetAwake(!0)},C$E.prototype.GetGravity=function(){return this.m_gravity},C$E.prototype.IsLocked=function(){return this.m_locked},C$E.prototype.SetAutoClearForces=function(C$t){this.m_clearForces=C$t},C$E.prototype.GetAutoClearForces=function(){return this.m_clearForces},C$E.prototype.ShiftOrigin=function(C$t){if(this.IsLocked())throw new Error;for(var C$e=this.m_bodyList;C$e;C$e=C$e.m_next)C$e.m_xf.p.SelfSub(C$t),C$e.m_sweep.c0.SelfSub(C$t),C$e.m_sweep.c.SelfSub(C$t);for(var C$i=this.m_jointList;C$i;C$i=C$i.m_next)C$i.ShiftOrigin(C$t);this.m_contactManager.m_broadPhase.ShiftOrigin(C$t)},C$E.prototype.GetContactManager=function(){return this.m_contactManager},C$E.prototype.GetProfile=function(){return this.m_profile},C$E.prototype.Dump=function(C$t){if(!this.m_locked){C$t("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),C$t("this.m_world.SetGravity(g);\n"),C$t("const bodies: b2Body[] = [];\n"),C$t("const joints: b2Joint[] = [];\n");for(var C$e=0,C$i=this.m_bodyList;C$i;C$i=C$i.m_next)C$i.m_islandIndex=C$e,C$i.Dump(C$t),++C$e;for(var C$e=0,C$n=this.m_jointList;C$n;C$n=C$n.m_next)C$n.m_index=C$e,++C$e;for(C$n=this.m_jointList;C$n;C$n=C$n.m_next)C$n.m_type!==C$H.b2JointType.e_gearJoint&&(C$t("{\n"),C$n.Dump(C$t),C$t("}\n"));for(C$n=this.m_jointList;C$n;C$n=C$n.m_next)C$n.m_type===C$H.b2JointType.e_gearJoint&&(C$t("{\n"),C$n.Dump(C$t),C$t("}\n"))}},C$E.prototype.DrawJoint=function(C$t){if(null!==this.m_debugDraw){var C$e=C$t.GetBodyA(),C$i=C$t.GetBodyB(),C$e=C$e.m_xf,C$i=C$i.m_xf,C$n=C$e.p,C$r=C$i.p,C$s=C$t.GetAnchorA(C$E.DrawJoint_s_p1),C$o=C$t.GetAnchorB(C$E.DrawJoint_s_p2),C$a=C$E.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(C$t.m_type){case C$H.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(C$s,C$o,C$a);break;case C$H.b2JointType.e_pulleyJoint:var C$c=C$t,C$l=C$c.GetGroundAnchorA(),C$c=C$c.GetGroundAnchorB();this.m_debugDraw.DrawSegment(C$l,C$s,C$a),this.m_debugDraw.DrawSegment(C$c,C$o,C$a),this.m_debugDraw.DrawSegment(C$l,C$c,C$a);break;case C$H.b2JointType.e_mouseJoint:C$l=C$E.DrawJoint_s_c;C$l.Set(0,1,0),this.m_debugDraw.DrawPoint(C$s,4,C$l),this.m_debugDraw.DrawPoint(C$o,4,C$l),C$l.Set(.8,.8,.8),this.m_debugDraw.DrawSegment(C$s,C$o,C$l);break;default:this.m_debugDraw.DrawSegment(C$n,C$s,C$a),this.m_debugDraw.DrawSegment(C$s,C$o,C$a),this.m_debugDraw.DrawSegment(C$r,C$o,C$a)}}},C$E.prototype.DrawShape=function(C$t,C$e){if(null!==this.m_debugDraw){var C$i=C$t.GetShape();switch(C$i.m_type){case C$H.b2ShapeType.e_circleShape:var C$n=C$i.m_p,C$r=C$i.m_radius,C$s=C$j.UNITX;this.m_debugDraw.DrawSolidCircle(C$n,C$r,C$s,C$e);break;case C$H.b2ShapeType.e_edgeShape:var C$o=C$i.m_vertex1,C$a=C$i.m_vertex2;this.m_debugDraw.DrawSegment(C$o,C$a,C$e);break;case C$H.b2ShapeType.e_chainShape:var C$n=C$i,C$h=C$n.m_count,C$c=C$n.m_vertices,C$r=C$E.DrawShape_s_ghostColor.SetRGBA(.75*C$e.r,.75*C$e.g,.75*C$e.b,C$e.a),C$o=C$c[0];this.m_debugDraw.DrawPoint(C$o,4,C$e),C$n.m_hasPrevVertex&&(C$s=C$n.m_prevVertex,this.m_debugDraw.DrawSegment(C$s,C$o,C$r),this.m_debugDraw.DrawCircle(C$s,.1,C$r));for(var C$l=1;C$l<C$h;++C$l){C$a=C$c[C$l];this.m_debugDraw.DrawSegment(C$o,C$a,C$e),this.m_debugDraw.DrawPoint(C$a,4,C$e),C$o=C$a}C$n.m_hasNextVertex&&(C$s=C$n.m_nextVertex,this.m_debugDraw.DrawSegment(C$s,C$o,C$r),this.m_debugDraw.DrawCircle(C$s,.1,C$r));break;case C$H.b2ShapeType.e_polygonShape:C$n=C$i.m_count,C$c=C$i.m_vertices;this.m_debugDraw.DrawSolidPolygon(C$c,C$n,C$e)}}},C$E.prototype.Solve=function(C$h){for(var C$t=this.m_bodyList;C$t;C$t=C$t.m_next)C$t.m_xf0.Copy(C$t.m_xf);for(var C$u=this.m_controllerList;C$u;C$u=C$u.m_next)C$u.Step(C$h);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;var C$e=this.m_island;C$e.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(C$t=this.m_bodyList;C$t;C$t=C$t.m_next)C$t.m_islandFlag=!1;for(var C$_=this.m_contactManager.m_contactList;C$_;C$_=C$_.m_next)C$_.m_islandFlag=!1;for(var C$d=this.m_jointList;C$d;C$d=C$d.m_next)C$d.m_islandFlag=!1;for(var C$i=this.s_stack,C$n=this.m_bodyList;C$n;C$n=C$n.m_next)if(!C$n.m_islandFlag&&C$n.IsAwake()&&C$n.IsActive()&&C$n.GetType()!==C$H.b2BodyType.b2_staticBody){C$e.Clear();var C$r=0;for((C$i[C$r++]=C$n).m_islandFlag=!0;0<C$r;){if(!(C$t=C$i[--C$r]))throw new Error;if(C$e.AddBody(C$t),C$t.m_awakeFlag=!0,C$t.GetType()!==C$H.b2BodyType.b2_staticBody){for(var C$s=C$t.m_contactList;C$s;C$s=C$s.next){var C$o=C$s.contact;if(!C$o.m_islandFlag&&(C$o.IsEnabled()&&C$o.IsTouching())){var C$f=C$o.m_fixtureA.m_isSensor,C$p=C$o.m_fixtureB.m_isSensor;if(!C$f&&!C$p){if(C$e.AddContact(C$o),C$o.m_islandFlag=!0,!(C$a=C$s.other))throw new Error;C$a.m_islandFlag||((C$i[C$r++]=C$a).m_islandFlag=!0)}}}for(var C$a,C$c=C$t.m_jointList;C$c;C$c=C$c.next)C$c.joint.m_islandFlag||(C$a=C$c.other).IsActive()&&(C$e.AddJoint(C$c.joint),C$c.joint.m_islandFlag=!0,C$a.m_islandFlag||((C$i[C$r++]=C$a).m_islandFlag=!0))}}var C$m=new C$us;C$e.Solve(C$m,C$h,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=C$m.solveInit,this.m_profile.solveVelocity+=C$m.solveVelocity,this.m_profile.solvePosition+=C$m.solvePosition;for(var C$l=0;C$l<C$e.m_bodyCount;++C$l)(C$t=C$e.m_bodies[C$l]).GetType()===C$H.b2BodyType.b2_staticBody&&(C$t.m_islandFlag=!1)}for(C$l=0;C$l<C$i.length&&C$i[C$l];++C$l)C$i[C$l]=null;for(var C$y=new C$et,C$t=this.m_bodyList;C$t;C$t=C$t.m_next)C$t.m_islandFlag&&C$t.GetType()!==C$H.b2BodyType.b2_staticBody&&C$t.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=C$y.GetMilliseconds()},C$E.prototype.SolveTOI=function(C$h){var C$t=this.m_island;if(C$t.Initialize(64,32,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(var C$u=this.m_bodyList;C$u;C$u=C$u.m_next)C$u.m_islandFlag=!1,C$u.m_sweep.alpha0=0;for(var C$e=this.m_contactManager.m_contactList;C$e;C$e=C$e.m_next)C$e.m_toiFlag=!1,C$e.m_islandFlag=!1,C$e.m_toiCount=0,C$e.m_toi=1}for(;;){for(var C$i=null,C$_=1,C$e=this.m_contactManager.m_contactList;C$e;C$e=C$e.m_next)if(C$e.IsEnabled()&&!(8<C$e.m_toiCount)){var C$d=1;if(C$e.m_toiFlag)C$d=C$e.m_toi;else{var C$f=C$e.GetFixtureA(),C$p=C$e.GetFixtureB();if(C$f.IsSensor()||C$p.IsSensor())continue;var C$n=C$f.GetBody(),C$m=C$p.GetBody(),C$r=C$n.m_type,C$y=C$m.m_type,C$g=C$n.IsAwake()&&C$r!==C$H.b2BodyType.b2_staticBody,C$s=C$m.IsAwake()&&C$y!==C$H.b2BodyType.b2_staticBody;if(!C$g&&!C$s)continue;C$g=C$n.IsBullet()||C$r!==C$H.b2BodyType.b2_dynamicBody,C$s=C$m.IsBullet()||C$y!==C$H.b2BodyType.b2_dynamicBody;if(!C$g&&!C$s)continue;C$r=C$n.m_sweep.alpha0,C$y=(C$n.m_sweep.alpha0<C$m.m_sweep.alpha0?(C$r=C$m.m_sweep.alpha0,C$n.m_sweep.Advance(C$r)):C$m.m_sweep.alpha0<C$n.m_sweep.alpha0&&(C$r=C$n.m_sweep.alpha0,C$m.m_sweep.Advance(C$r)),C$e.GetChildIndexA()),C$g=C$e.GetChildIndexB(),C$s=C$E.SolveTOI_s_toi_input,C$f=(C$s.proxyA.SetShape(C$f.GetShape(),C$y),C$s.proxyB.SetShape(C$p.GetShape(),C$g),C$s.sweepA.Copy(C$n.m_sweep),C$s.sweepB.Copy(C$m.m_sweep),C$s.tMax=1,C$E.SolveTOI_s_toi_output),C$y=(C$ke(C$f,C$s),C$f.t),C$d=C$f.state===C$H.b2TOIOutputState.e_touching?C$L(C$r+(1-C$r)*C$y,1):1;C$e.m_toi=C$d,C$e.m_toiFlag=!0}C$d<C$_&&(C$i=C$e,C$_=C$d)}if(null===C$i||1-10*C$M<C$_){this.m_stepComplete=!0;break}var C$v=C$i.GetFixtureA(),C$x=C$i.GetFixtureB(),C$o=C$v.GetBody(),C$a=C$x.GetBody(),C$v=C$E.SolveTOI_s_backup1.Copy(C$o.m_sweep),C$x=C$E.SolveTOI_s_backup2.Copy(C$a.m_sweep);if(C$o.Advance(C$_),C$a.Advance(C$_),C$i.Update(this.m_contactManager.m_contactListener),C$i.m_toiFlag=!1,++C$i.m_toiCount,C$i.IsEnabled()&&C$i.IsTouching()){C$o.SetAwake(!0),C$a.SetAwake(!0),C$t.Clear(),C$t.AddBody(C$o),C$t.AddBody(C$a),C$t.AddContact(C$i),C$o.m_islandFlag=!0,C$a.m_islandFlag=!0,C$i.m_islandFlag=!0;for(var C$b=0;C$b<2;++C$b)if((C$w=0===C$b?C$o:C$a).m_type===C$H.b2BodyType.b2_dynamicBody)for(var C$c=C$w.m_contactList;C$c&&C$t.m_bodyCount!==C$t.m_bodyCapacity&&C$t.m_contactCount!==C$t.m_contactCapacity;C$c=C$c.next){var C$l,C$A,C$C,C$S=C$c.contact;C$S.m_islandFlag||((C$l=C$c.other).m_type!==C$H.b2BodyType.b2_dynamicBody||C$w.IsBullet()||C$l.IsBullet())&&(C$C=C$S.m_fixtureA.m_isSensor,C$A=C$S.m_fixtureB.m_isSensor,C$C||C$A||(C$C=C$E.SolveTOI_s_backup.Copy(C$l.m_sweep),C$l.m_islandFlag||C$l.Advance(C$_),C$S.Update(this.m_contactManager.m_contactListener),C$S.IsEnabled()&&C$S.IsTouching()?(C$S.m_islandFlag=!0,C$t.AddContact(C$S),C$l.m_islandFlag||(C$l.m_islandFlag=!0,C$l.m_type!==C$H.b2BodyType.b2_staticBody&&C$l.SetAwake(!0),C$t.AddBody(C$l))):(C$l.m_sweep.Copy(C$C),C$l.SynchronizeTransform())))}var C$T=C$E.SolveTOI_s_subStep;C$T.dt=(1-C$_)*C$h.dt,C$T.inv_dt=1/C$T.dt,C$T.dtRatio=1,C$T.positionIterations=20,C$T.velocityIterations=C$h.velocityIterations,C$T.particleIterations=C$h.particleIterations,C$T.warmStarting=!1,C$t.SolveTOI(C$T,C$o.m_islandIndex,C$a.m_islandIndex);for(var C$w,C$b=0;C$b<C$t.m_bodyCount;++C$b)if((C$w=C$t.m_bodies[C$b]).m_islandFlag=!1,C$w.m_type===C$H.b2BodyType.b2_dynamicBody){C$w.SynchronizeFixtures();for(C$c=C$w.m_contactList;C$c;C$c=C$c.next)C$c.contact.m_toiFlag=!1,C$c.contact.m_islandFlag=!1}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}else C$i.SetEnabled(!1),C$o.m_sweep.Copy(C$v),C$a.m_sweep.Copy(C$x),C$o.SynchronizeTransform(),C$a.SynchronizeTransform()}},C$E.prototype.AddController=function(C$t){return C$t.m_next=this.m_controllerList,C$t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=C$t),this.m_controllerList=C$t,++this.m_controllerCount,C$t},C$E.prototype.RemoveController=function(C$t){return C$t.m_prev&&(C$t.m_prev.m_next=C$t.m_next),C$t.m_next&&(C$t.m_next.m_prev=C$t.m_prev),this.m_controllerList===C$t&&(this.m_controllerList=C$t.m_next),--this.m_controllerCount,C$t.m_prev=null,C$t.m_next=null,C$t},C$E.Step_s_step=new C$ds,C$E.Step_s_stepTimer=new C$et,C$E.Step_s_timer=new C$et,C$E.DrawDebugData_s_color=new C$K(0,0,0),C$E.DrawDebugData_s_vs=C$j.MakeArray(4),C$E.DrawDebugData_s_xf=new C$R,C$E.QueryFixtureShape_s_aabb=new C$ie,C$E.RayCast_s_input=new C$Qt,C$E.RayCast_s_output=new C$te,C$E.RayCast_s_point=new C$j,C$E.DrawJoint_s_p1=new C$j,C$E.DrawJoint_s_p2=new C$j,C$E.DrawJoint_s_color=new C$K(.5,.8,.8),C$E.DrawJoint_s_c=new C$K,C$E.DrawShape_s_ghostColor=new C$K,C$E.SolveTOI_s_subStep=new C$ds,C$E.SolveTOI_s_backup=new C$J,C$E.SolveTOI_s_backup1=new C$J,C$E.SolveTOI_s_backup2=new C$J,C$E.SolveTOI_s_toi_input=new C$we,C$E.SolveTOI_s_toi_output=new C$Ee;C$Hs=C$E;function C$E(C$t){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new C$ls,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new C$j,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new C$us,this.m_island=new C$Rs,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(C$t)}var C$_o=function(C$t,C$e){this.prevBody=null,this.nextBody=null,this.prevController=null,this.nextController=null,this.controller=C$t,this.body=C$e},C$do=(C$fo.prototype.GetNext=function(){return this.m_next},C$fo.prototype.GetPrev=function(){return this.m_prev},C$fo.prototype.GetBodyList=function(){return this.m_bodyList},C$fo.prototype.AddBody=function(C$t){var C$e=new C$_o(this,C$t);C$e.nextBody=this.m_bodyList,C$e.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=C$e),this.m_bodyList=C$e,++this.m_bodyCount,C$e.nextController=C$t.m_controllerList,C$e.prevController=null,C$t.m_controllerList&&(C$t.m_controllerList.prevController=C$e),C$t.m_controllerList=C$e,++C$t.m_controllerCount},C$fo.prototype.RemoveBody=function(C$t){if(this.m_bodyCount<=0)throw new Error;for(var C$e=this.m_bodyList;C$e&&C$e.body!==C$t;)C$e=C$e.nextBody;if(null===C$e)throw new Error;C$e.prevBody&&(C$e.prevBody.nextBody=C$e.nextBody),C$e.nextBody&&(C$e.nextBody.prevBody=C$e.prevBody),this.m_bodyList===C$e&&(this.m_bodyList=C$e.nextBody),--this.m_bodyCount,C$e.nextController&&(C$e.nextController.prevController=C$e.prevController),C$e.prevController&&(C$e.prevController.nextController=C$e.nextController),C$t.m_controllerList===C$e&&(C$t.m_controllerList=C$e.nextController),--C$t.m_controllerCount},C$fo.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0},C$fo);function C$fo(){this.m_bodyList=null,this.m_bodyCount=0,this.m_prev=null,this.m_next=null}C$Vi(C$yo,C$po=C$do),C$yo.prototype.Step=function(C$h){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());for(var C$t=this.m_bodyList;C$t;C$t=C$t.nextBody){var C$e=C$t.body;if(C$e.IsAwake()){for(var C$i,C$n=new C$j,C$r=new C$j,C$s=0,C$o=0,C$a=C$e.GetFixtureList();C$a;C$a=C$a.m_next){var C$u,C$c=new C$j,C$l=C$a.GetShape().ComputeSubmergedArea(this.normal,this.offset,C$e.GetTransform(),C$c);C$s+=C$l,C$n.x+=C$l*C$c.x,C$n.y+=C$l*C$c.y;C$o+=C$l*(C$u=this.useDensity?C$a.GetDensity():1),C$r.x+=C$l*C$c.x*C$u,C$r.y+=C$l*C$c.y*C$u}C$n.x/=C$s,C$n.y/=C$s,C$r.x/=C$o,C$r.y/=C$o,C$s<C$M||((C$i=this.gravity.Clone().SelfNeg()).SelfMul(this.density*C$s),C$e.ApplyForce(C$i,C$r),(C$i=C$e.GetLinearVelocityFromWorldPoint(C$n,new C$j)).SelfSub(this.velocity),C$i.SelfMul(-this.linearDrag*C$s),C$e.ApplyForce(C$i,C$n),C$e.ApplyTorque(-C$e.GetInertia()/C$e.GetMass()*C$s*C$e.GetAngularVelocity()*this.angularDrag))}}}},C$yo.prototype.Draw=function(C$t){var C$e=new C$j,C$i=new C$j,C$n=(C$e.x=this.normal.x*this.offset+100*this.normal.y,C$e.y=this.normal.y*this.offset-100*this.normal.x,C$i.x=this.normal.x*this.offset-100*this.normal.y,C$i.y=this.normal.y*this.offset+100*this.normal.x,new C$K(0,0,.8));C$t.DrawSegment(C$e,C$i,C$n)};var C$po,C$mo=C$yo;function C$yo(){var C$t=null!==C$po&&C$po.apply(this,arguments)||this;return C$t.normal=new C$j(0,1),C$t.offset=0,C$t.density=0,C$t.velocity=new C$j(0,0),C$t.linearDrag=0,C$t.angularDrag=0,C$t.useDensity=!1,C$t.useWorldGravity=!0,C$t.gravity=new C$j(0,0),C$t}C$Vi(C$xo,C$go=C$do),C$xo.prototype.Step=function(C$t){for(var C$e=C$j.MulSV(C$t.dt,this.A,C$xo.Step_s_dtA),C$i=this.m_bodyList;C$i;C$i=C$i.nextBody){var C$n=C$i.body;C$n.IsAwake()&&C$n.SetLinearVelocity(C$j.AddVV(C$n.GetLinearVelocity(),C$e,C$j.s_t0))}},C$xo.prototype.Draw=function(C$t){},C$xo.Step_s_dtA=new C$j;var C$go,C$vo=C$xo;function C$xo(){var C$t=null!==C$go&&C$go.apply(this,arguments)||this;return C$t.A=new C$j(0,0),C$t}C$Vi(C$Co,C$bo=C$do),C$Co.prototype.Step=function(C$t){for(var C$e=this.m_bodyList;C$e;C$e=C$e.nextBody){var C$i=C$e.body;C$i.IsAwake()&&C$i.ApplyForce(this.F,C$i.GetWorldCenter())}},C$Co.prototype.Draw=function(C$t){};var C$bo,C$Ao=C$Co;function C$Co(){var C$t=null!==C$bo&&C$bo.apply(this,arguments)||this;return C$t.F=new C$j(0,0),C$t}C$Vi(C$wo,C$So=C$do),C$wo.prototype.Step=function(C$h){if(this.invSqr)for(var C$t=this.m_bodyList;C$t;C$t=C$t.nextBody)for(var C$e=(C$r=C$t.body).GetWorldCenter(),C$u=C$r.GetMass(),C$i=this.m_bodyList;C$i&&C$i!==C$t;C$i=C$i.nextBody){var C$n=(C$s=C$i.body).GetWorldCenter(),C$_=C$s.GetMass();(C$c=(C$o=C$n.x-C$e.x)*C$o+(C$a=C$n.y-C$e.y)*C$a)<C$M||((C$l=C$wo.Step_s_f.Set(C$o,C$a)).SelfMul(this.G/C$c/C$Y(C$c)*C$u*C$_),C$r.IsAwake()&&C$r.ApplyForce(C$l,C$e),C$s.IsAwake()&&C$s.ApplyForce(C$l.SelfMul(-1),C$n))}else for(C$t=this.m_bodyList;C$t;C$t=C$t.nextBody)for(var C$r,C$e=(C$r=C$t.body).GetWorldCenter(),C$u=C$r.GetMass(),C$i=this.m_bodyList;C$i&&C$i!==C$t;C$i=C$i.nextBody){var C$s,C$o,C$a,C$c,C$l,C$n=(C$s=C$i.body).GetWorldCenter(),C$_=C$s.GetMass();(C$c=(C$o=C$n.x-C$e.x)*C$o+(C$a=C$n.y-C$e.y)*C$a)<C$M||((C$l=C$wo.Step_s_f.Set(C$o,C$a)).SelfMul(this.G/C$c*C$u*C$_),C$r.IsAwake()&&C$r.ApplyForce(C$l,C$e),C$s.IsAwake()&&C$s.ApplyForce(C$l.SelfMul(-1),C$n))}},C$wo.prototype.Draw=function(C$t){},C$wo.Step_s_f=new C$j;var C$So,C$To=C$wo;function C$wo(){var C$t=null!==C$So&&C$So.apply(this,arguments)||this;return C$t.G=1,C$t.invSqr=!0,C$t}C$Vi(C$Io,C$Eo=C$do),C$Io.prototype.Step=function(C$t){var C$e=C$t.dt;if(!(C$e<=C$M)){C$e>this.maxTimestep&&0<this.maxTimestep&&(C$e=this.maxTimestep);for(var C$i=this.m_bodyList;C$i;C$i=C$i.nextBody){var C$n,C$r=C$i.body;C$r.IsAwake()&&(C$n=C$r.GetWorldVector(C$k.MulMV(this.T,C$r.GetLocalVector(C$r.GetLinearVelocity(),C$j.s_t0),C$j.s_t1),C$Io.Step_s_damping),C$r.SetLinearVelocity(C$j.AddVV(C$r.GetLinearVelocity(),C$j.MulSV(C$e,C$n,C$j.s_t0),C$j.s_t1)))}}},C$Io.prototype.Draw=function(C$t){},C$Io.prototype.SetAxisAligned=function(C$t,C$e){this.T.ex.x=-C$t,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-C$e,this.maxTimestep=0<C$t||0<C$e?1/C$V(C$t,C$e):0},C$Io.Step_s_damping=new C$j;var C$Eo,C$Mo=C$Io;function C$Io(){var C$t=null!==C$Eo&&C$Eo.apply(this,arguments)||this;return C$t.T=new C$k,C$t.maxTimestep=0,C$t}function C$Bo(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new C$j(0,0),this.damping=.1,this.k2=.9,this.k3=.1}C$Po.prototype.GetVertexCount=function(){return this.m_count},C$Po.prototype.GetVertices=function(){return this.m_ps},C$Po.prototype.Initialize=function(C$t){this.m_count=C$t.count,this.m_ps=C$j.MakeArray(this.m_count),this.m_p0s=C$j.MakeArray(this.m_count),this.m_vs=C$j.MakeArray(this.m_count),this.m_ims=C$h(this.m_count);for(var C$e=0;C$e<this.m_count;++C$e){this.m_ps[C$e].Copy(C$t.vertices[C$e]),this.m_p0s[C$e].Copy(C$t.vertices[C$e]),this.m_vs[C$e].SetZero();var C$i=C$t.masses[C$e];this.m_ims[C$e]=0<C$i?1/C$i:0}var C$n=this.m_count-1,C$r=this.m_count-2;this.m_Ls=C$h(C$n),this.m_as=C$h(C$r);for(C$e=0;C$e<C$n;++C$e){var C$s=this.m_ps[C$e],C$o=this.m_ps[C$e+1];this.m_Ls[C$e]=C$j.DistanceVV(C$s,C$o)}for(C$e=0;C$e<C$r;++C$e){var C$s=this.m_ps[C$e],C$o=this.m_ps[C$e+1],C$a=this.m_ps[C$e+2],C$c=C$j.SubVV(C$o,C$s,C$j.s_t0),C$a=C$j.SubVV(C$a,C$o,C$j.s_t1),C$l=C$j.CrossVV(C$c,C$a),C$c=C$j.DotVV(C$c,C$a);this.m_as[C$e]=C$b(C$l,C$c)}this.m_gravity.Copy(C$t.gravity),this.m_damping=C$t.damping,this.m_k2=C$t.k2,this.m_k3=C$t.k3},C$Po.prototype.Step=function(C$t,C$e){if(0!==C$t){for(var C$i=Math.exp(-C$t*this.m_damping),C$n=0;C$n<this.m_count;++C$n)this.m_p0s[C$n].Copy(this.m_ps[C$n]),0<this.m_ims[C$n]&&this.m_vs[C$n].SelfMulAdd(C$t,this.m_gravity),this.m_vs[C$n].SelfMul(C$i),this.m_ps[C$n].SelfMulAdd(C$t,this.m_vs[C$n]);for(C$n=0;C$n<C$e;++C$n)this.SolveC2(),this.SolveC3(),this.SolveC2();for(var C$r=1/C$t,C$n=0;C$n<this.m_count;++C$n)C$j.MulSV(C$r,C$j.SubVV(this.m_ps[C$n],this.m_p0s[C$n],C$j.s_t0),this.m_vs[C$n])}},C$Po.prototype.SolveC2=function(){for(var C$t=this.m_count-1,C$e=0;C$e<C$t;++C$e){var C$i,C$n=this.m_ps[C$e],C$r=this.m_ps[C$e+1],C$s=C$j.SubVV(C$r,C$n,C$Po.s_d),C$o=C$s.Normalize(),C$a=this.m_ims[C$e],C$c=this.m_ims[C$e+1];C$a+C$c!==0&&(C$i=C$c/(C$a+C$c),C$n.SelfMulSub(this.m_k2*(C$a/(C$a+C$c))*(this.m_Ls[C$e]-C$o),C$s),C$r.SelfMulAdd(this.m_k2*C$i*(this.m_Ls[C$e]-C$o),C$s))}},C$Po.prototype.SetAngle=function(C$t){for(var C$e=this.m_count-2,C$i=0;C$i<C$e;++C$i)this.m_as[C$i]=C$t},C$Po.prototype.SolveC3=function(){for(var C$h=this.m_count-2,C$t=0;C$t<C$h;++C$t){var C$u=this.m_ps[C$t],C$e=this.m_ps[C$t+1],C$_=this.m_ps[C$t+2],C$d=this.m_ims[C$t],C$f=this.m_ims[C$t+1],C$p=this.m_ims[C$t+2],C$i=C$j.SubVV(C$e,C$u,C$Po.s_d1),C$n=C$j.SubVV(C$_,C$e,C$Po.s_d2),C$r=C$i.LengthSquared(),C$s=C$n.LengthSquared();if(C$r*C$s!=0){var C$o=C$j.CrossVV(C$i,C$n),C$a=C$j.DotVV(C$i,C$n),C$c=C$b(C$o,C$a),C$o=C$j.MulSV(-1/C$r,C$i.SelfSkew(),C$Po.s_Jd1),C$a=C$j.MulSV(1/C$s,C$n.SelfSkew(),C$Po.s_Jd2),C$r=C$j.NegV(C$o,C$Po.s_J1),C$i=C$j.SubVV(C$o,C$a,C$Po.s_J2),C$s=C$a;if(0!=(C$n=C$d*C$j.DotVV(C$r,C$r)+C$f*C$j.DotVV(C$i,C$i)+C$p*C$j.DotVV(C$s,C$s))){for(var C$n=1/C$n,C$l=C$c-this.m_as[C$t];C$m<C$l;)C$l=(C$c-=2*C$m)-this.m_as[C$t];for(;C$l<-C$m;)C$l=(C$c+=2*C$m)-this.m_as[C$t];C$o=-this.m_k3*C$n*C$l;C$u.SelfMulAdd(C$d*C$o,C$r),C$e.SelfMulAdd(C$f*C$o,C$i),C$_.SelfMulAdd(C$p*C$o,C$s)}}}},C$Po.prototype.Draw=function(C$t){for(var C$e=new C$K(.4,.5,.7),C$i=0;C$i<this.m_count-1;++C$i)C$t.DrawSegment(this.m_ps[C$i],this.m_ps[C$i+1],C$e)},C$Po.s_d=new C$j,C$Po.s_d1=new C$j,C$Po.s_d2=new C$j,C$Po.s_Jd1=new C$j,C$Po.s_Jd2=new C$j,C$Po.s_J1=new C$j,C$Po.s_J2=new C$j;var C$Ro=C$Po;function C$Po(){this.m_count=0,this.m_ps=[],this.m_p0s=[],this.m_vs=[],this.m_ims=[],this.m_Ls=[],this.m_as=[],this.m_gravity=new C$j,this.m_damping=0,this.m_k2=1,this.m_k3=.1}C$H.b2Assert=function(C$t){for(var C$e=[],C$i=1;C$i<arguments.length;C$i++)C$e[C$i-1]=arguments[C$i];if(!C$t)throw new(Error.bind.apply(Error,[void 0].concat(C$e)))},C$H.b2Maybe=C$f,C$H.b2_maxFloat=C$P,C$H.b2_epsilon=C$M,C$H.b2_epsilon_sq=C$g,C$H.b2_pi=C$m,C$H.b2_maxManifoldPoints=2,C$H.b2_maxPolygonVertices=8,C$H.b2_aabbExtension=.1,C$H.b2_aabbMultiplier=2,C$H.b2_linearSlop=.008,C$H.b2_angularSlop=C$I,C$H.b2_polygonRadius=.016,C$H.b2_maxSubSteps=8,C$H.b2_maxTOIContacts=32,C$H.b2_velocityThreshold=1,C$H.b2_maxLinearCorrection=.2,C$H.b2_maxAngularCorrection=C$p,C$H.b2_maxTranslation=2,C$H.b2_maxTranslationSquared=4,C$H.b2_maxRotation=C$T,C$H.b2_maxRotationSquared=C$w,C$H.b2_baumgarte=.2,C$H.b2_toiBaumgarte=.75,C$H.b2_invalidParticleIndex=-1,C$H.b2_maxParticleIndex=2147483647,C$H.b2_particleStride=.75,C$H.b2_minParticleWeight=1,C$H.b2_maxParticlePressure=.25,C$H.b2_maxParticleForce=.5,C$H.b2_maxTriadDistance=2,C$H.b2_maxTriadDistanceSquared=4,C$H.b2_minParticleSystemBufferCapacity=256,C$H.b2_barrierCollisionTime=2.5,C$H.b2_timeToSleep=.5,C$H.b2_linearSleepTolerance=.01,C$H.b2_angularSleepTolerance=C$t,C$H.b2Alloc=function(C$t){return null},C$H.b2Free=function(C$t){},C$H.b2Log=function(C$t){for(var C$e=[],C$i=1;C$i<arguments.length;C$i++)C$e[C$i-1]=arguments[C$i]},C$H.b2Version=C$i,C$H.b2_version=C$s,C$H.b2_branch="master",C$H.b2_commit="fbf51801d80fc389d43dc46524520e89043b6faf",C$H.b2ParseInt=function(C$t){return parseInt(C$t,10)},C$H.b2ParseUInt=function(C$t){return Math.abs(parseInt(C$t,10))},C$H.b2MakeArray=C$c,C$H.b2MakeNullArray=function(C$t){for(var C$e=[],C$i=0;C$i<C$t;++C$i)C$e.push(null);return C$e},C$H.b2MakeNumberArray=C$h,C$H.b2_pi_over_180=C$o,C$H.b2_180_over_pi=57.29577951307855,C$H.b2_two_pi=C$a,C$H.b2Abs=C$D,C$H.b2Min=C$L,C$H.b2Max=C$V,C$H.b2Clamp=C$O,C$H.b2Swap=function(C$t,C$e){var C$i=C$t[0];C$t[0]=C$e[0],C$e[0]=C$i},C$H.b2IsValid=C$l,C$H.b2Sq=C$_,C$H.b2InvSqrt=C$A,C$H.b2Sqrt=C$Y,C$H.b2Pow=C$u,C$H.b2DegToRad=function(C$t){return C$t*C$o},C$H.b2RadToDeg=function(C$t){return 57.29577951307855*C$t},C$H.b2Cos=C$d,C$H.b2Sin=C$y,C$H.b2Acos=C$v,C$H.b2Asin=C$x,C$H.b2Atan2=C$b,C$H.b2NextPowerOfTwo=function(C$t){return(C$t=(C$t=(C$t=(C$t=(C$t|=C$t>>1&2147483647)|C$t>>2&1073741823)|C$t>>4&268435455)|C$t>>8&16777215)|C$t>>16&65535)+1},C$H.b2IsPowerOfTwo=function(C$t){return 0<C$t&&0==(C$t&C$t-1)},C$H.b2Random=function(){return 2*Math.random()-1},C$H.b2RandomRange=function(C$t,C$e){return(C$e-C$t)*Math.random()+C$t},C$H.b2Vec2=C$j,C$H.b2Vec2_zero=C$C,C$H.b2Vec3=C$F,C$H.b2Mat22=C$k,C$H.b2Mat33=C$z,C$H.b2Rot=C$B,C$H.b2Transform=C$R,C$H.b2Sweep=C$J,C$H.b2Color=C$K,C$H.b2Draw=C$$,C$H.b2Timer=C$et,C$H.b2Counter=C$nt,C$H.b2GrowableStack=C$st,C$H.b2BlockAllocator=C$at,C$H.b2StackAllocator=C$ct,C$H.b2ContactFeature=C$Gt,C$H.b2ContactID=C$Ut,C$H.b2ManifoldPoint=C$Ht,C$H.b2Manifold=C$Xt,C$H.b2WorldManifold=C$qt,C$H.b2GetPointStates=function(C$t,C$e,C$i,C$n){for(var C$r=0;C$r<C$i.pointCount;++C$r){var C$s=C$i.points[C$r].id.key;C$t[C$r]=C$H.b2PointState.b2_removeState;for(var C$o=0,C$a=C$n.pointCount;C$o<C$a;++C$o)if(C$n.points[C$o].id.key===C$s){C$t[C$r]=C$H.b2PointState.b2_persistState;break}}for(;C$r<2;++C$r)C$t[C$r]=C$H.b2PointState.b2_nullState;for(C$r=0;C$r<C$n.pointCount;++C$r){C$s=C$n.points[C$r].id.key;C$e[C$r]=C$H.b2PointState.b2_addState;for(C$o=0,C$a=C$i.pointCount;C$o<C$a;++C$o)if(C$i.points[C$o].id.key===C$s){C$e[C$r]=C$H.b2PointState.b2_persistState;break}}for(;C$r<2;++C$r)C$e[C$r]=C$H.b2PointState.b2_nullState},C$H.b2ClipVertex=C$Zt,C$H.b2RayCastInput=C$Qt,C$H.b2RayCastOutput=C$te,C$H.b2AABB=C$ie,C$H.b2TestOverlapAABB=C$re,C$H.b2ClipSegmentToLine=C$se,C$H.b2TestOverlapShape=C$le,C$H.b2DistanceProxy=C$lt,C$H.b2SimplexCache=C$ut,C$H.b2DistanceInput=C$dt,C$H.b2DistanceOutput=C$pt,C$H.b2ShapeCastInput=C$yt,C$H.b2ShapeCastOutput=C$gt,C$H.b2_gjk_reset=function(){C$H.b2_gjkCalls=0,C$H.b2_gjkIters=0,C$H.b2_gjkMaxIters=0},C$H.b2SimplexVertex=C$vt,C$H.b2Simplex=C$bt,C$H.b2Distance=C$Rt,C$H.b2ShapeCast=function(C$t,C$e){C$t.iterations=0,C$t.lambda=1,C$t.normal.SetZero(),C$t.point.SetZero();for(var C$i=C$e.proxyA,C$n=C$e.proxyB,C$h=C$V(C$i.m_radius,.016)+C$V(C$n.m_radius,.016),C$r=C$e.transformA,C$s=C$e.transformB,C$o=C$e.translationB,C$u=C$Pt.Set(0,0),C$_=0,C$a=C$Dt,C$d=(C$a.m_count=0,C$a.m_vertices),C$f=C$i.GetSupport(C$B.MulTRV(C$r.q,C$j.NegV(C$o,C$j.s_t1),C$j.s_t0)),C$p=C$R.MulXV(C$r,C$i.GetVertex(C$f),C$Lt),C$m=C$n.GetSupport(C$B.MulTRV(C$s.q,C$o,C$j.s_t0)),C$y=C$R.MulXV(C$s,C$n.GetVertex(C$m),C$Vt),C$c=C$j.SubVV(C$p,C$y,C$Ot),C$g=C$V(.016,C$h-.016),C$v=0;C$v<20&&.004<C$D(C$c.Length()-C$g);){C$t.iterations+=1;var C$f=C$i.GetSupport(C$B.MulTRV(C$r.q,C$j.NegV(C$c,C$j.s_t1),C$j.s_t0)),C$p=C$R.MulXV(C$r,C$i.GetVertex(C$f),C$Lt),C$m=C$n.GetSupport(C$B.MulTRV(C$s.q,C$c,C$j.s_t0)),C$y=C$R.MulXV(C$s,C$n.GetVertex(C$m),C$Vt),C$l=C$j.SubVV(C$p,C$y,C$Ft),C$l=(C$c.Normalize(),C$j.DotVV(C$c,C$l)),C$x=C$j.DotVV(C$c,C$o);if(C$_*C$x<C$l-C$g){if(C$x<=0)return!1;if(1<(C$_=(C$l-C$g)/C$x))return!1;C$u.Copy(C$c).SelfNeg(),C$a.m_count=0}C$l=C$d[C$a.m_count];switch(C$l.indexA=C$m,C$l.wA.Copy(C$y).SelfMulAdd(C$_,C$o),C$l.indexB=C$f,C$l.wB.Copy(C$p),C$l.w.Copy(C$l.wB).SelfSub(C$l.wA),C$l.a=1,C$a.m_count+=1,C$a.m_count){case 1:break;case 2:C$a.Solve2();break;case 3:C$a.Solve3()}if(3===C$a.m_count)return!1;C$a.GetClosestPoint(C$c),++C$v}return C$a.GetWitnessPoints(C$Nt,C$kt),0<C$c.LengthSquared()&&(C$u.Copy(C$c).SelfNeg(),C$u.Normalize()),C$t.normal.Copy(C$u),C$t.lambda=C$_,C$t.iterations=C$v,!0},C$H.b2Pair=C$pe,C$H.b2BroadPhase=C$me,C$H.b2PairLessThan=C$ge,C$H.b2TreeNode=C$ue,C$H.b2DynamicTree=C$de,C$H.b2_toi_reset=function(){C$H.b2_toiTime=0,C$H.b2_toiMaxTime=0,C$H.b2_toiCalls=0,C$H.b2_toiIters=0,C$H.b2_toiMaxIters=0,C$H.b2_toiRootIters=0,C$H.b2_toiMaxRootIters=0},C$H.b2TOIInput=C$we,C$H.b2TOIOutput=C$Ee,C$H.b2SeparationFunction=C$Me,C$H.b2TimeOfImpact=C$ke,C$H.b2CollideCircles=C$Ue,C$H.b2CollidePolygonAndCircle=C$Xe,C$H.b2CollidePolygons=C$pi,C$H.b2CollideEdgeAndCircle=C$Si,C$H.b2CollideEdgeAndPolygon=C$Bi,C$H.b2MassData=C$Ri,C$H.b2Shape=C$Pi,C$H.b2CircleShape=C$Ti,C$H.b2PolygonShape=C$Ei,C$H.b2EdgeShape=C$Gi,C$H.b2ChainShape=C$Wi,C$H.b2Filter=C$ji,C$H.b2FixtureDef=C$Yi,C$H.b2FixtureProxy=C$qi,C$H.b2Fixture=C$Ji,C$H.b2BodyDef=C$Ki,C$H.b2Body=C$Qi,C$H.b2World=C$Hs,C$H.b2DestructionListener=C$Qr,C$H.b2ContactFilter=C$ts,C$H.b2ContactImpulse=C$is,C$H.b2ContactListener=C$ns,C$H.b2QueryCallback=C$ss,C$H.b2RayCastCallback=C$as,C$H.b2Island=C$Rs,C$H.b2Profile=C$us,C$H.b2TimeStep=C$ds,C$H.b2Position=C$ps,C$H.b2Velocity=C$ys,C$H.b2SolverData=C$vs,C$H.b2ContactManager=C$ls,C$H.b2MixFriction=C$Cr,C$H.b2MixRestitution=C$Sr,C$H.b2ContactEdge=C$Tr,C$H.b2Contact=C$wr,C$H.b2ContactRegister=C$Jr,C$H.b2ContactFactory=C$Zr,C$H.g_blockSolve=!1,C$H.b2VelocityConstraintPoint=C$xs,C$H.b2ContactVelocityConstraint=C$As,C$H.b2ContactPositionConstraint=C$Ss,C$H.b2ContactSolverDef=C$ws,C$H.b2PositionSolverManifold=C$Es,C$H.b2ContactSolver=C$Is,C$H.b2CircleContact=C$Ir,C$H.b2PolygonContact=C$Pr,C$H.b2PolygonAndCircleContact=C$Vr,C$H.b2EdgeAndCircleContact=C$Nr,C$H.b2EdgeAndPolygonContact=C$zr,C$H.b2ChainAndCircleContact=C$Hr,C$H.b2ChainAndPolygonContact=C$Yr,C$H.b2Jacobian=C$$i,C$H.b2JointEdge=C$in,C$H.b2JointDef=C$en,C$H.b2Joint=C$nn,C$H.b2AreaJointDef=C$_n,C$H.b2AreaJoint=C$pn,C$H.b2DistanceJointDef=C$on,C$H.b2DistanceJoint=C$ln,C$H.b2FrictionJointDef=C$gn,C$H.b2FrictionJoint=C$bn,C$H.b2GearJointDef=C$Sn,C$H.b2GearJoint=C$En,C$H.b2MotorJointDef=C$Bn,C$H.b2MotorJoint=C$Dn,C$H.b2MouseJointDef=C$On,C$H.b2MouseJoint=C$kn,C$H.b2PrismaticJointDef=C$Un,C$H.b2PrismaticJoint=C$jn,C$H.b2_minPulleyLength=2,C$H.b2PulleyJointDef=C$qn,C$H.b2PulleyJoint=C$Kn,C$H.b2RevoluteJointDef=C$tr,C$H.b2RevoluteJoint=C$nr,C$H.b2RopeJointDef=C$or,C$H.b2RopeJoint=C$lr,C$H.b2WeldJointDef=C$_r,C$H.b2WeldJoint=C$pr,C$H.b2WheelJointDef=C$gr,C$H.b2WheelJoint=C$br,C$H.b2ControllerEdge=C$_o,C$H.b2Controller=C$do,C$H.b2BuoyancyController=C$mo,C$H.b2ConstantAccelController=C$vo,C$H.b2ConstantForceController=C$Ao,C$H.b2GravityController=C$To,C$H.b2TensorDampingController=C$Mo,C$H.b2ParticleDef=C$Ds,C$H.b2CalculateParticleIterations=C$Ls,C$H.b2ParticleHandle=C$Vs,C$H.b2ParticleGroupDef=C$Fs,C$H.b2ParticleGroup=C$Ns,C$H.b2GrowableBuffer=C$to,C$H.b2FixtureParticleQueryCallback=C$no,C$H.b2ParticleContact=C$so,C$H.b2ParticleBodyContact=C$ao,C$H.b2ParticlePair=C$co,C$H.b2ParticleTriad=C$lo,C$H.b2ParticleSystemDef=C$ho,C$H.b2RopeDef=C$Bo,C$H.b2Rope=C$Ro,Object.defineProperty(C$H,"__esModule",{value:!0})},"object"==typeof C$i&&void 0!==C$e?C$n(C$i):"function"==typeof define&&define.amd?define(["exports"],C$n):C$n((void 0).box2d={})},{}],363:[function(C$t,C$e,C$i){"use strict";var C$n="undefined"==typeof window?global:window;C$n.cc=C$n.cc||{},cc.internal=cc.internal||{},C$t("./predefine"),C$t("./polyfill/string"),C$t("./polyfill/misc"),C$t("./polyfill/array"),C$t("./polyfill/object"),C$t("./polyfill/array-buffer"),C$t("./polyfill/number"),C$t("./polyfill/typescript"),C$t("./cocos2d/core/predefine"),C$t("./cocos2d"),C$t("./extends"),C$e.exports=C$n.cc},{"./cocos2d":292,"./cocos2d/core/predefine":214,"./extends":350,"./package":void 0,"./polyfill/array":365,"./polyfill/array-buffer":364,"./polyfill/misc":366,"./polyfill/number":367,"./polyfill/object":368,"./polyfill/string":369,"./polyfill/typescript":370,"./predefine":371}],364:[function(C$t,C$e,C$i){"use strict";var C$n;ArrayBuffer.isView||(C$n=Object.getPrototypeOf(Int8Array),ArrayBuffer.isView="function"==typeof C$n?function(C$t){return C$t instanceof C$n}:function(C$t){if("object"!=typeof C$t)return!1;C$t=C$t.constructor;return C$t===Float32Array||C$t===Uint8Array||C$t===Uint32Array||C$t===Int8Array})},{}],365:[function(C$t,C$e,C$i){"use strict";Array.isArray||(Array.isArray=function(C$t){return"[object Array]"===Object.prototype.toString.call(C$t)}),Array.prototype.find||(Array.prototype.find=function(C$t){for(var C$e=this.length,C$i=0;C$i<C$e;C$i++){var C$n=this[C$i];if(C$t.call(this,C$n,C$i,this))return C$n}}),Array.prototype.includes||(Array.prototype.includes=function(C$t){return-1!==this.indexOf(C$t)})},{}],366:[function(C$t,C$e,C$i){"use strict";var C$n,C$r;Math.sign||(Math.sign=function(C$t){return 0===(C$t=+C$t)||isNaN(C$t)?C$t:0<C$t?1:-1}),Math.log2||(Math.log2=function(C$t){return Math.log(C$t)*Math.LOG2E}),Number.isInteger||(Number.isInteger=function(C$t){return"number"==typeof C$t&&isFinite(C$t)&&Math.floor(C$t)===C$t}),console.time||(C$n=window.performance||Date,C$r=Object.create(null),console.time=function(C$t){C$r[C$t]=C$n.now()},console.timeEnd=function(C$t){var C$e=C$r[C$t],C$e=C$n.now()-C$e;console.log(C$t+": "+C$e+"ms")})},{}],367:[function(C$t,C$e,C$i){"use strict";Number.parseFloat=Number.parseFloat||parseFloat,Number.parseInt=Number.parseInt||parseInt},{}],368:[function(C$t,C$e,C$i){"use strict";Object.assign||(Object.assign=function(C$t,C$e){return cc.js.mixin(C$t,C$e)}),Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(C$t){var C$e={},C$i=Object.getOwnPropertyNames(C$t);Object.getOwnPropertySymbols&&(C$i=C$i.concat(Object.getOwnPropertySymbols(C$t)));for(var C$n=0;C$n<C$i.length;++C$n){var C$r=C$i[C$n];C$e[C$r]=Object.getOwnPropertyDescriptor(C$t,C$r)}return C$e})},{}],369:[function(C$t,C$e,C$i){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(C$t,C$e){return this.lastIndexOf(C$t,C$e=C$e||0)===C$e}),String.prototype.endsWith||(String.prototype.endsWith=function(C$t,C$e){(void 0===C$e||C$e>this.length)&&(C$e=this.length),C$e-=C$t.length;C$t=this.indexOf(C$t,C$e);return-1!==C$t&&C$t===C$e}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")})},{}],370:[function(C$t,C$e,C$i){"use strict";var C$n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$t,C$e){C$t.__proto__=C$e}||function(C$t,C$e){for(var C$i in C$e)C$e.hasOwnProperty(C$i)&&(C$t[C$i]=C$e[C$i])};window.__extends=function(C$t,C$e){function C$i(){this.constructor=C$t}C$n(C$t,C$e),C$t.prototype=null===C$e?Object.create(C$e):(C$i.prototype=C$e.prototype,new C$i)},window.__assign=Object.assign||function(C$t){for(var C$e,C$i=1,C$n=arguments.length;C$i<C$n;C$i++)for(var C$r in C$e=arguments[C$i])Object.prototype.hasOwnProperty.call(C$e,C$r)&&(C$t[C$r]=C$e[C$r]);return C$t},window.__rest=function(C$t,C$e){var C$i={};for(C$r in C$t)Object.prototype.hasOwnProperty.call(C$t,C$r)&&C$e.indexOf(C$r)<0&&(C$i[C$r]=C$t[C$r]);if(null!=C$t&&"function"==typeof Object.getOwnPropertySymbols)for(var C$n=0,C$r=Object.getOwnPropertySymbols(C$t);C$n<C$r.length;C$n++)C$e.indexOf(C$r[C$n])<0&&(C$i[C$r[C$n]]=C$t[C$r[C$n]]);return C$i},window.__decorate=function(C$t,C$e,C$i,C$n){var C$r,C$s=arguments.length,C$o=C$s<3?C$e:null===C$n?C$n=Object.getOwnPropertyDescriptor(C$e,C$i):C$n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C$o=Reflect.decorate(C$t,C$e,C$i,C$n);else for(var C$a=C$t.length-1;0<=C$a;C$a--)(C$r=C$t[C$a])&&(C$o=(C$s<3?C$r(C$o):3<C$s?C$r(C$e,C$i,C$o):C$r(C$e,C$i))||C$o);return 3<C$s&&C$o&&Object.defineProperty(C$e,C$i,C$o),C$o},window.__param=function(C$i,C$n){return function(C$t,C$e){C$n(C$t,C$e,C$i)}},window.__metadata=function(C$t,C$e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(C$t,C$e)},window.__awaiter=function(C$s,C$o,C$a,C$c){return new(C$a=C$a||Promise)(function(C$t,C$e){function C$i(C$t){try{C$r(C$c.next(C$t))}catch(C$t){C$e(C$t)}}function C$n(C$t){try{C$r(C$c.throw(C$t))}catch(C$t){C$e(C$t)}}function C$r(C$e){C$e.done?C$t(C$e.value):new C$a(function(C$t){C$t(C$e.value)}).then(C$i,C$n)}C$r((C$c=C$c.apply(C$s,C$o||[])).next())})},window.__generator=function(C$n,C$r){var C$s,C$o,C$a,C$c={label:0,sent:function(){if(1&C$a[0])throw C$a[1];return C$a[1]},trys:[],ops:[]},C$t={next:C$e(0),throw:C$e(1),return:C$e(2)};return"function"==typeof Symbol&&(C$t[Symbol.iterator]=function(){return this}),C$t;function C$e(C$i){return function(C$t){var C$e=[C$i,C$t];if(C$s)throw new TypeError("Generator is already executing.");for(;C$c;)try{if(C$s=1,C$o&&(C$a=2&C$e[0]?C$o.return:C$e[0]?C$o.throw||((C$a=C$o.return)&&C$a.call(C$o),0):C$o.next)&&!(C$a=C$a.call(C$o,C$e[1])).done)return C$a;switch(C$o=0,(C$e=C$a?[2&C$e[0],C$a.value]:C$e)[0]){case 0:case 1:C$a=C$e;break;case 4:return C$c.label++,{value:C$e[1],done:!1};case 5:C$c.label++,C$o=C$e[1],C$e=[0];continue;case 7:C$e=C$c.ops.pop(),C$c.trys.pop();continue;default:if(!(C$a=0<(C$a=C$c.trys).length&&C$a[C$a.length-1])&&(6===C$e[0]||2===C$e[0])){C$c=0;continue}if(3===C$e[0]&&(!C$a||C$e[1]>C$a[0]&&C$e[1]<C$a[3])){C$c.label=C$e[1];break}if(6===C$e[0]&&C$c.label<C$a[1]){C$c.label=C$a[1],C$a=C$e;break}if(C$a&&C$c.label<C$a[2]){C$c.label=C$a[2],C$c.ops.push(C$e);break}C$a[2]&&C$c.ops.pop(),C$c.trys.pop();continue}C$e=C$r.call(C$n,C$c)}catch(C$t){C$e=[6,C$t],C$o=0}finally{C$s=C$a=0}if(5&C$e[0])throw C$e[1];return{value:C$e[0]?C$e[1]:void 0,done:!0}}}},window.__exportStar=function(C$t,C$e){for(var C$i in C$t)C$e.hasOwnProperty(C$i)||(C$e[C$i]=C$t[C$i])},window.__values=function(C$t){var C$e="function"==typeof Symbol&&C$t[Symbol.iterator],C$i=0;return C$e?C$e.call(C$t):{next:function(){return{value:(C$t=C$t&&C$i>=C$t.length?void 0:C$t)&&C$t[C$i++],done:!C$t}}}},window.__read=function(C$t,C$e){var C$i="function"==typeof Symbol&&C$t[Symbol.iterator];if(!C$i)return C$t;var C$n,C$r,C$s=C$i.call(C$t),C$o=[];try{for(;(void 0===C$e||0<C$e--)&&!(C$n=C$s.next()).done;)C$o.push(C$n.value)}catch(C$t){C$r={error:C$t}}finally{try{C$n&&!C$n.done&&(C$i=C$s.return)&&C$i.call(C$s)}finally{if(C$r)throw C$r.error}}return C$o},window.__spread=function(){for(var C$t=[],C$e=0;C$e<arguments.length;C$e++)C$t=C$t.concat(__read(arguments[C$e]));return C$t},window.__await=function(C$t){return this instanceof __await?(this.v=C$t,this):new __await(C$t)},window.__asyncGenerator=function(C$t,C$e,C$i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C$r=C$i.apply(C$t,C$e||[]),C$s=[],C$o={};return C$n("next"),C$n("throw"),C$n("return"),C$o[Symbol.asyncIterator]=function(){return this},C$o;function C$n(C$n){C$r[C$n]&&(C$o[C$n]=function(C$i){return new Promise(function(C$t,C$e){1<C$s.push([C$n,C$i,C$t,C$e])||C$a(C$n,C$i)})})}function C$a(C$t,C$e){try{(C$i=C$r[C$t](C$e)).value instanceof __await?Promise.resolve(C$i.value.v).then(C$c,C$h):C$l(C$s[0][2],C$i)}catch(C$t){C$l(C$s[0][3],C$t)}var C$i}function C$c(C$t){C$a("next",C$t)}function C$h(C$t){C$a("throw",C$t)}function C$l(C$t,C$e){C$t(C$e),C$s.shift(),C$s.length&&C$a(C$s[0][0],C$s[0][1])}},window.__asyncDelegator=function(C$n){var C$r,C$t={};return C$e("next"),C$e("throw",function(C$t){throw C$t}),C$e("return"),C$t[Symbol.iterator]=function(){return this},C$t;function C$e(C$e,C$i){C$t[C$e]=C$n[C$e]?function(C$t){return(C$r=!C$r)?{value:__await(C$n[C$e](C$t)),done:"return"===C$e}:C$i?C$i(C$t):C$t}:C$i}},window.__asyncValues=function(C$o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C$t,C$e=C$o[Symbol.asyncIterator];return C$e?C$e.call(C$o):(C$o="function"==typeof __values?__values(C$o):C$o[Symbol.iterator](),C$t={},C$i("next"),C$i("throw"),C$i("return"),C$t[Symbol.asyncIterator]=function(){return this},C$t);function C$i(C$s){C$t[C$s]=C$o[C$s]&&function(C$r){return new Promise(function(C$t,C$e){var C$i,C$n;C$r=C$o[C$s](C$r),C$i=C$t,C$t=C$e,C$n=C$r.done,C$e=C$r.value,Promise.resolve(C$e).then(function(C$t){C$i({value:C$t,done:C$n})},C$t)})}}},window.__makeTemplateObject=function(C$t,C$e){return Object.defineProperty?Object.defineProperty(C$t,"raw",{value:C$e}):C$t.raw=C$e,C$t},window.__importStar=function(C$t){if(C$t&&C$t.__esModule)return C$t;var C$e={};if(null!=C$t)for(var C$i in C$t)Object.hasOwnProperty.call(C$t,C$i)&&(C$e[C$i]=C$t[C$i]);return C$e.default=C$t,C$e},window.__importDefault=function(C$t){return C$t&&C$t.__esModule?C$t:{default:C$t}}},{}],371:[function(C$t,C$e,C$i){"use strict";var C$n="undefined"==typeof window?global:window;function C$r(C$e,C$i){void 0===C$n[C$e]&&Object.defineProperty(C$n,C$e,{get:function(){var C$t;return"CC_WECHATGAMESUB"===C$e?C$t="cc.sys.platform === cc.sys.WECHAT_GAME_SUB":"CC_WECHATGAME"===C$e?C$t="cc.sys.platform === cc.sys.WECHAT_GAME":"CC_QQPLAY"===C$e&&(C$t="cc.sys.platform === cc.sys.QQ_PLAY"),cc.warnID(1400,C$e,C$t),C$i}})}function C$s(C$t){return"object"==typeof C$n[C$t]}C$a=!(C$o="CC_BUILD"),void 0===C$n[C$o]&&(C$n[C$o]=C$a),C$n.CC_BUILD=!0,C$n.CC_DEV=!1,C$n.CC_DEBUG=!0,C$n.CC_JSB=!1,C$n.CC_NATIVERENDERER=!1,C$n.CC_SUPPORT_JIT=!1,C$n.CC_PHYSICS_BUILTIN=!1,C$n.CC_PHYSICS_CANNON=!1,C$n.CC_EDITOR=!1,C$n.CC_PREVIEW=!1,C$n.CC_TEST=!1,C$n.CC_RUNTIME=!1,C$n.CC_JSB=!1;var C$o=!(!C$s("wx")||!wx.getSharedCanvas),C$a=!(!C$s("wx")||!wx.getSystemInfoSync&&!wx.getSharedCanvas),C$c=C$s("bk");C$r("CC_WECHATGAMESUB",C$o),C$r("CC_WECHATGAME",C$a),C$r("CC_QQPLAY",C$c);C$n.CocosEngine=cc.ENGINE_VERSION="2.3.3"},{}]},{},[363]);