window.__require=function e(t,i,n){function o(s,r){if(!i[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){return o(t[s][1][e]||e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({ActiveTaskItem:[function(e,t,i){"use strict";cc._RF.push(t,"c26aeiBB+ZO3Z3YPjJr+Irj","ActiveTaskItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/TaskConfig"),r=e("../network/SocketClient"),c=e("../utils/JumpActionUtils"),l=cc._decorator,d=l.ccclass,f=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title2=null,t.ItemPrefabContent=null,t.sendBt=null,t.jumpBt=null,t.yitijiaoBt=null,t.numTxt=null,t.nameTxt=null,t.percentNum=null,t}return n(t,e),t.prototype.init=function(e,t){this.activeTaskInfo=e,this.activeTaskView=t,this.initEvent(),this.initView()},t.prototype.initView=function(){var e=String(this.activeTaskInfo.id),t=s.TaskConfig.getTaskConfig(e);this.title2.string=t.name,this.percentNum.string=this.activeTaskInfo.cur+"/"+this.activeTaskInfo.total,this.numTxt.string=String(t.Active),this.nameTxt.string=t.desc2;var i=cc.Color.GREEN;if(2===this.activeTaskInfo.state)this.sendBt.active=!0;else if(1===this.activeTaskInfo.state){i=cc.Color.RED,this.jumpBt.active=!0;var n=t.jump_id;this.onAddEvent(this.jumpBt,this.jumpBtCleck.bind(this,n))}else 3===this.activeTaskInfo.state&&(this.yitijiaoBt.active=!0);this.percentNum.node.color=i},t.prototype.jumpBtCleck=function(e){this.activeTaskView.closeView(),c.default.doAction(e)},t.prototype.initEvent=function(){var e=this;this.onAddEvent(this.sendBt,function(){r.default.s_task_reward(e.activeTaskInfo.id)})},t.prototype.refashView=function(){},t.prototype.start=function(){},o([f(cc.Label)],t.prototype,"title2",void 0),o([f(cc.Node)],t.prototype,"ItemPrefabContent",void 0),o([f(cc.Node)],t.prototype,"sendBt",void 0),o([f(cc.Node)],t.prototype,"jumpBt",void 0),o([f(cc.Node)],t.prototype,"yitijiaoBt",void 0),o([f(cc.Label)],t.prototype,"numTxt",void 0),o([f(cc.Label)],t.prototype,"nameTxt",void 0),o([f(cc.Label)],t.prototype,"percentNum",void 0),t=o([d],t)}(a.default);i.default=g,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/TaskConfig":"TaskConfig","../network/SocketClient":"SocketClient","../utils/JumpActionUtils":"JumpActionUtils"}],ActiveTaskView:[function(e,t,i){"use strict";cc._RF.push(t,"21f63TGXV1LRrCGKZoqVXiK","ActiveTaskView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/SpriteFrameComponent"),c=e("../../engine/ViewBase"),l=e("../config/ITemsConfig"),d=e("../config/Task_boxConfig"),f=e("../config/WordConfig"),g=e("../event/CommonEvent"),h=e("../model/TaskModel"),u=e("../network/SocketClient"),p=e("../prefab/ItemPrefab"),m=e("../utils/MusicHelper"),C=e("./ActiveTaskItem"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dayTabs=[],t.weekTabs=[],t.title=null,t.decs=null,t.percentNum=null,t.activeTaskItem=null,t.content=null,t.boxs=[],t.btnClose=null,t.itemPrefab=null,t.progressBar=null,t.bg=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.onAddEvent(this.dayTabs[0],this.cleckTab.bind(this,h.ActiveTaskType.day)),this.onAddEvent(this.weekTabs[0],this.cleckTab.bind(this,h.ActiveTaskType.week)),this.cleckTab(h.ActiveTaskType.day),this.initEvent()},t.prototype.initEvent=function(){var e=this;a.EventManager.instance.on(g.CommonEvent.Event_c_task_reward_success,this.serverRefash,this),a.EventManager.instance.on(g.CommonEvent.Event_c_all_task_info,this.cleckTab,this),a.EventManager.instance.on(g.CommonEvent.Event_c_task_liveness_reward,this.refashBaoxiang,this),a.EventManager.instance.on(g.CommonEvent.Event_c_task_liveness_info,this.initBaoxiangAndLiveness,this),this.bg.on(cc.Node.EventType.TOUCH_END,this.hideShowAward,this,!0),this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){m.MusicHelper.play_click(),e.closeView()},this);for(var t=0,i=this.boxs.length;t<i;t++){var n=this.boxs[t];n.on(cc.Node.EventType.TOUCH_END,this.baoxiangCleck.bind(this,n),this)}},t.prototype.hideShowAward=function(){this.itemPrefabContent&&(this.itemPrefabContent.active=!1)},t.prototype.baoxiangCleck=function(e){var t=e.name;if(1!==h.TaskModel.getBoxStateById(Number(t))){var i=e.getChildByName("itemPrefabContent");if(!0!==i.active){this.hideShowAward(),this.itemPrefabContent=i,i.active=!0,i.removeAllChildren();var n=d.Task_boxConfig.getAwardResById(t);for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var a=n[o],s=cc.instantiate(this.itemPrefab),r=l.ITemsConfig.getITemsConfigById(o),c=s.getComponent(p.default);c.init(r,!0),c.setNumTxt(a),i.addChild(s)}}else i.active=!1}else u.default.s_task_liveness_reward(Number(t))},t.prototype.cleckTab=function(e){var t,i;(void 0===e&&(e=h.ActiveTaskType.day),this.tabType!==e)&&(this.tabType=e,this.tabType===h.ActiveTaskType.day?(t=this.dayTabs,i=this.weekTabs,this.decs.string=f.WordConfig.getWord(61591)):(t=this.weekTabs,i=this.dayTabs,this.decs.string=f.WordConfig.getWord(61592)),t[0].active=!(t[1].active=!0),i[0].active=!(i[1].active=!1),this.refashView(e),this.title.changeState())},t.prototype.refashView=function(e){this.refashContent(e),this.initBaoxiangAndLiveness(e)},t.prototype.initBaoxiangAndLiveness=function(e){void 0===e&&(e=this.tabType);var t=h.TaskModel.getLivenessInfoMap().get(e);if(t){this.percentNum.string=t.liveness+"",this.progressBar.progress=.01*t.liveness;for(var i=t.boxInfoArr,n=0,o=i.length;n<o;n++){var a=i[n],s=a.state,c=this.boxs[n];c.name=a.id.toString(),c.getChildByName("RedPointPrefab").active=!1,c.getChildByName("yilingqu").active=!1,c&&(0===s?c.getComponent(cc.Sprite).spriteFrame=c.getComponent(r.SpriteFrameComponent).spriteFrameList[0]:1===s?(c.getComponent(cc.Sprite).spriteFrame=c.getComponent(r.SpriteFrameComponent).spriteFrameList[1],c.getChildByName("RedPointPrefab").active=!0):2===s&&(c.getComponent(cc.Sprite).spriteFrame=c.getComponent(r.SpriteFrameComponent).spriteFrameList[0],c.getChildByName("yilingqu").active=!0))}}},t.prototype.refashBaoxiang=function(e){for(var t=0,i=this.boxs.length;t<i;t++){var n=this.boxs[t];Number(n.name)==e&&(n.getComponent(cc.Sprite).spriteFrame=n.getComponent(r.SpriteFrameComponent).spriteFrameList[0],n.getChildByName("yilingqu").active=!0,n.getChildByName("RedPointPrefab").active=!1)}},t.prototype.serverRefash=function(e){this.tabType===e&&this.refashContent(e)},t.prototype.refashContent=function(e){void 0===e&&(e=h.ActiveTaskType.day),this.content.removeAllChildren(),s.Logger.log("\u6d3b\u8dc3\u4efb\u52a1\uff0c \u5237\u65b0type",e);for(var t=h.TaskModel.getOderlyActiveTaskArrByTaskType(e),i=0,n=t.length;i<n;i++){var o=t[i],a=cc.instantiate(this.activeTaskItem);a.getComponent(C.default).init(o,this),this.content.addChild(a)}},t.prototype.start=function(){},o([y(Array(cc.Node))],t.prototype,"dayTabs",void 0),o([y(Array(cc.Node))],t.prototype,"weekTabs",void 0),o([y(r.SpriteFrameComponent)],t.prototype,"title",void 0),o([y(cc.Label)],t.prototype,"decs",void 0),o([y(cc.Label)],t.prototype,"percentNum",void 0),o([y(cc.Prefab)],t.prototype,"activeTaskItem",void 0),o([y(cc.Node)],t.prototype,"content",void 0),o([y(Array(cc.Node))],t.prototype,"boxs",void 0),o([y(cc.Node)],t.prototype,"btnClose",void 0),o([y(cc.Prefab)],t.prototype,"itemPrefab",void 0),o([y(cc.ProgressBar)],t.prototype,"progressBar",void 0),o([y(cc.Node)],t.prototype,"bg",void 0),t=o([v],t)}(c.default);i.default=b,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/ViewBase":"ViewBase","../config/ITemsConfig":"ITemsConfig","../config/Task_boxConfig":"Task_boxConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/TaskModel":"TaskModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/MusicHelper":"MusicHelper","./ActiveTaskItem":"ActiveTaskItem"}],ActivityCodeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"603e8Mq+W9Jla6dCR/q3WHJ","ActivityCodeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value={gem:200},t.condition={godOfWar:1,recovery:1},t.or=1,t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.des=e.des,i.value=e.value,i.level=e.level,i.recharge=e.recharge,i.condition=e.condition,i.or=e.or,i.error=e.error,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ActivityCodeConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ActivityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"74ce2sZ4S9J9YJ7o0eWQA2l","ActivityConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.icon=e.icon,i.dec=e.dec,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.Config_Name="activityConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ActivityConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ActivityManager:[function(e,t,i){"use strict";cc._RF.push(t,"6a5a5Q5e0xC3pYwfKLbWld2","ActivityManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../config/ViewConfig"),o=function(){function e(){}return e.prototype.init=function(){var t={};t[e.ACTIVITY_TEHUIJIJIN]=n.default.gameView.Holiday,t[e.ACTIVITY_SAIPAO]=n.default.gameView.HolidayMonster,t[e.ACTIVITY_CHUANQIBAYE]=n.default.gameView.BaYePrefab,t[e.ACTIVITY_JIAOZHUSAIPAO]=n.default.gameView.JiaoZhuRunGame,t[e.ACTIVITY_SHENGDANTEHUI]=n.default.gameView.DisCountPrefab,t[e.ACTIVITY_YUANDANTEHUI]=n.default.gameView.YuandanPrefab,t[e.ACTIVITY_XINGYUNKUANGHUAN]=n.default.gameView.ultimateGift,t[e.ACTIVITY_SHAOZHU]=n.default.gameView.firePigView,t[e.ACTIVITY_XINNIANKUANGHUAN]=n.default.gameView.NewYearTargetPrefab,t[e.ACTIVITY_DENGLUHAOLI]=n.default.gameView.NewYearGift,t[e.ACTIVITY_CHUXIHONGBAO]=n.default.gameView.RedPacket,t[e.ACTIVITY_MAFA]=n.default.gameView.MaFaMiLingView,t[e.ACTIVITY_CHENGZHANGJIJIN]=n.default.gameView.GrowFundView,t[e.ACTIVITY_JIZI]=n.default.gameView.CollectShopEnterView,t[e.ACTIVITY_SHUANGBEIDIAOLUO]=n.default.gameView.DoubleGetView,t[e.ACTIVITY_SHUANGBEIGUANGGAO]=n.default.gameView.DoubleAdView,t[e.ACTIVITY_QIRIDENGLU]=n.default.gameView.SevenDayLoginView,t[e.ACTIVITY_JISULIESHA]=n.default.gameView.FastKillView,t[e.ACTIVITY_CHENGBAMAFA]=n.default.gameView.ChengBaView,t[e.ACTIVITY_MEIRIDENGLU]=n.default.gameView.EverydaySignatureView,t[e.ACTIVITY_ZHISHU]=n.default.gameView.HolidayRunGame,t[e.ACTIVITY_XINSHOUGONGLUE]=n.default.gameView.GongLueView,t[e.ACTIVITY_SHIJIEBOSS]=n.default.gameView.BigBossView,t[e.ACTIVITY_ZHIYUAN]=n.default.gameView.HolidayRunGame,t[e.ACTIVITY_XINGYUNPINGTU]=n.default.gameView.LuckyPuzzle,t[e.ACTIVITY_ZIXUANLIBAO]=n.default.gameView.OptionalGiftBagView,t[e.ACTIVITY_XIAOFEIHUIKUI]=n.default.gameView.ConsumerFeedbackView,t[e.ACTIVITY_LIANCHONGTEHUI12]=n.default.gameView.ContinuousRechargeView,t[e.ACTIVITY_LIANCHONGTEHUI30]=n.default.gameView.ContinuousRechargeView,t[e.ACTIVITY_HEFUXIAOFEI]=n.default.gameView.ConsumerFeedbackMergedView,t[e.ACTIVITY_HEFUCHOUJIANG]=n.default.gameView.MergeLuckyDrawView,t[e.ACTIVITY_HEFUYOULI]=n.default.gameView.NewYearGift2,t[e.ACTIVITY_HEFUJIJIN]=n.default.gameView.Holiday2,t[e.ACTIVITY_HEFUBAYE]=n.default.gameView.BaYePrefab2,t[e.ACTIVITY_GUAGUALE]=n.default.gameView.LuckyBingoView,t[e.ACTIVITY_YAOXINYOULIBEI]=n.default.gameView.InvitationView,t[e.ACTIVITY_YAOXINYOULI]=n.default.gameView.InvitationView,t[e.ACTIVITY_YIYUTANSUO]=n.default.gameView.ExoticExploration,e.dicActitityConfig=t},e.instance=new e,e.ACTIVITY_TEHUIJIJIN=1,e.ACTIVITY_SAIPAO=2,e.ACTIVITY_CHUANQIBAYE=3,e.ACTIVITY_JIAOZHUSAIPAO=4,e.ACTIVITY_SHENGDANTEHUI=5,e.ACTIVITY_YUANDANTEHUI=6,e.ACTIVITY_XINGYUNKUANGHUAN=7,e.ACTIVITY_SHAOZHU=8,e.ACTIVITY_XINNIANKUANGHUAN=9,e.ACTIVITY_DENGLUHAOLI=10,e.ACTIVITY_CHUXIHONGBAO=11,e.ACTIVITY_MAFA=12,e.ACTIVITY_CHENGZHANGJIJIN=13,e.ACTIVITY_JIZI=14,e.ACTIVITY_SHUANGBEIDIAOLUO=15,e.ACTIVITY_SHUANGBEIGUANGGAO=16,e.ACTIVITY_QIRIDENGLU=17,e.ACTIVITY_JISULIESHA=18,e.ACTIVITY_CHENGBAMAFA=19,e.ACTIVITY_MEIRIDENGLU=20,e.ACTIVITY_ZHISHU=21,e.ACTIVITY_XINSHOUGONGLUE=22,e.ACTIVITY_SHIJIEBOSS=23,e.ACTIVITY_ZHIYUAN=24,e.ACTIVITY_XINGYUNPINGTU=25,e.ACTIVITY_ZIXUANLIBAO=26,e.ACTIVITY_XIAOFEIHUIKUI=27,e.ACTIVITY_LIANCHONGTEHUI12=28,e.ACTIVITY_LIANCHONGTEHUI30=29,e.ACTIVITY_HEFUXIAOFEI=30,e.ACTIVITY_HEFUCHOUJIANG=31,e.ACTIVITY_HEFUYOULI=33,e.ACTIVITY_HEFUJIJIN=34,e.ACTIVITY_HEFUBAYE=35,e.ACTIVITY_GUAGUALE=36,e.ACTIVITY_YAOXINYOULIBEI=37,e.ACTIVITY_YAOXINYOULI=38,e.ACTIVITY_YIYUTANSUO=39,e.dicActitityConfig={},e}();i.default=o,cc._RF.pop()},{"../../config/ViewConfig":"ViewConfig"}],ActivityOpenModel:[function(e,t,i){"use strict";cc._RF.push(t,"d591apdWGJHYJYp3Nh8yY0z","ActivityOpenModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/ActivitytimeConfig"),c=e("../event/CommonEvent"),l=function(){return function(){}}();i.ActivityInfoModel=l;var d=function(){function e(){}return e.proto2ModelList=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_activity_info,t);e.modelList=[];for(var r=i.getActivityList(),d=0;d<r.length;d++){var f=new l;f.activityId=r[d].getActivityid(),f.status=r[d].getStatus(),f.actStartTime=r[d].getActstarttime(),f.actEndTimes=r[d].getActendtimes(),e.modelList[d]=f}this.modelList.sort(function(e,t){return e.activityId-t.activityId}),o.Logger.log("c_get_activity_info",i,this.modelList),n.EventManager.instance.dispatch(c.CommonEvent.Event_ActivityStatus)},e.getOpenActivityModel=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.activityId==e&&1==this.modelList[t].status)return i}},e.getOpenActivityList=function(e){for(var t=[],i=0;i<this.modelList.length;i++){var n=this.modelList[i],a=r.ActivitytimeConfig.getConfigById(n.activityId);a&&a.activityType==e&&1==this.modelList[i].status&&t.push(n)}return t.sort(function(e,t){var i=r.ActivitytimeConfig.getConfigById(e.activityId),n=r.ActivitytimeConfig.getConfigById(t.activityId);return i.index-n.index}),o.Logger.log("getOpenActivity===",t,this.modelList),t},e.getStarTimeByActivityId=function(e){for(var t=0,i=this.modelList.length;t<i;t++){var n=this.modelList[t];if(n.activityId==e)return n.actStartTime}o.Logger.log("Star activityId:",e,this.modelList)},e.getEndTimeByActivityId=function(e){for(var t=0,i=this.modelList.length;t<i;t++){var n=this.modelList[t];if(n.activityId==e)return n.actEndTimes}o.Logger.log("ens activityId:",e,this.modelList)},e.getMinStarTimeByType=function(e){for(var t,i=0,n=this.modelList.length;i<n;i++){var o=this.modelList[i],a=r.ActivitytimeConfig.getConfigById(o.activityId);if(a)e===a.activityType&&1===o.status&&(t||(t=o.actStartTime),o.actStartTime<t&&(t=o.actStartTime))}return t},e.getMaxEndTimeByType=function(e){for(var t,i=0,n=this.modelList.length;i<n;i++){var o=this.modelList[i],a=r.ActivitytimeConfig.getConfigById(o.activityId);if(a)e===a.activityType&&1===o.status&&(t||(t=o.actEndTimes),o.actEndTimes>t&&(t=o.actEndTimes))}return t},e.modelList=[],e.typeKeyMode=new Map,e}();i.default=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/ActivitytimeConfig":"ActivitytimeConfig","../event/CommonEvent":"CommonEvent"}],ActivityRankConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f10e1uPmulJv6NkCq5XYTN/","ActivityRankConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.activityid=e.activityid,i.rank=e.rank,i.resource=e.resource,i.item=e.item,i.des=e.des,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfig=function(e,t){var i;return this.configMap.forEach(function(n,o){n.activityid==e&&t>=n.rank[0]&&t<=n.rank[1]&&(i=n)}),i},t.Config_Name="activityRank",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ActivityRankConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ActivityShopConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c75ff0YD1tLkb0vPIqXPovs","ActivityShopConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.activityId=e.city,i.item_id=e.item_id,i.maxnum=e.maxnum,i.unit_price=e.unit_price,i.name=e.name,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id==e&&(t=i)}),t},t.getActivityShopConfigList=function(e){var t=[];return this.configMap.forEach(function(i,n){i.activityId==e&&t.push(i)}),t},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ActivityShopConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ActivityShopModel:[function(e,t,i){"use strict";cc._RF.push(t,"3b15dn8rOxDhqWZzrXvYyJ2","ActivityShopModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/ProtoConfig"),a=e("../../engine/ProtoUtils"),s=e("../event/CommonEvent"),r=function(){function e(){}return e.proto2ModelList=function(t){var i=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_get_treeShopInfo,t);this.modelList=[];for(var r=i.getShoplistList(),c=0;c<r.length;c++){var l=new e;l.shopId=r[c].getShopid(),l.shopNum=r[c].getShopnum(),this.modelList.push(l)}n.EventManager.instance.dispatch(s.CommonEvent.Event_ActivityShop)},e.getModelByShopId=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.shopId==e)return i}},e.modelList=[],e}();i.ActivityShopModel=r,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent"}],ActivityView:[function(e,t,i){"use strict";cc._RF.push(t,"8b08eJaheFIaoOk19kGpgWA","ActivityView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../engine/DateUtil"),r=e("../../engine/EventManager"),c=e("../../engine/Logger"),l=e("../../engine/SpriteFrameComponent"),d=e("../../engine/UIManager"),f=e("../../engine/ViewBase"),g=e("../config/ActivitytimeConfig"),h=e("../config/StrategyConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../event/CommonEvent"),C=e("../manager/activity/ActivityManager"),_=e("../manager/RedPointManager"),v=e("../model/ActivityOpenModel"),y=e("../model/ExoticExplorationModel"),b=e("../model/InvitationModel"),I=e("../model/MergeLuckyDrawModel"),M=e("../model/RoleInfoModel"),w=e("../model/StrategyModel"),k=e("../network/HttpHelper"),S=e("../network/SocketClient"),P=e("../prefab/RedPointPrefab"),E=e("../utils/UIHelper"),L=e("./activity/GongLueView"),T=cc._decorator,R=T.ccclass,N=T.property;(function(e){e[e.List=0]="List",e[e.Select=1]="Select",e[e.Select1=2]="Select1"})(a||(a={}));var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activitySpriteFrameList=[],t.titleSpriteFrameList=[],t.gongLueViewPrefab=null,t.activityTabNodeList=[],t.selectStatus=a.List,t.activityViews={},t}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.activityIdList=g.ActivitytimeConfig.getConfigIdList(),this.sortChooseList(),this.activityNode=this.findChild(this.node,"huodong_bg/scrollView/view/content/activityNode"),this.huodong_bg=this.node.getChildByName("huodong_bg"),this.huodong_content=this.node.getChildByName("huodong_content"),this.gonglue_content=this.node.getChildByName("gonglue_content"),this.huodong_bg.active=!0,this.huodong_content.active=!1,this.gonglue_content.active=!1,this.btn_fanhui=this.huodong_content.getChildByName("btn_fanhui"),this.showActivity=this.huodong_content.getChildByName("showActivity"),this.btnGongLueBack=this.gonglue_content.getChildByName("btn_fanhui"),this.showGongLueTab=this.gonglue_content.getChildByName("showActivity"),this.gongLueView=cc.instantiate(this.gongLueViewPrefab).getComponent(L.default),this.gongLueView.node.active=!1,this.showGongLueTab.addChild(this.gongLueView.node),this.huodong_bg_02=this.findChild(this.node,"huodong_bg/huodong_bg_02"),this.huodong_bg_02.active=!1,this.onAddEvent(this.btn_fanhui,function(){t.selectStatus=a.List,S.default.s_get_activity_info(),t.refresh()}),this.onAddEvent(this.btnGongLueBack,function(){t.selectStatus=a.List,t.gongLueView.curTab=1,t.refresh()})},t.prototype.onEnable=function(){var e=this;r.EventManager.instance.on(m.CommonEvent.Event_ActivitySwithAct,function(t){e.nowActivityId=t;var i=e.findChild(e.node,"huodong_content/scrollView/view/content").getChildByName("index"+t);e.onBtnChoose(i,t),e.refresh()},this),r.EventManager.instance.on(m.CommonEvent.Event_ActivityStatus,this.initPro,this),r.EventManager.instance.on(m.CommonEvent.Event_ActivityStatus,this.refresh,this),r.EventManager.instance.on(m.CommonEvent.Event_StrategyInfo_refresh,this.initStrategyTab,this),r.EventManager.instance.on(m.CommonEvent.Event_ChangeActivity,this.onChangeActivity,this),S.default.s_get_activity_info(),S.default.s_activity_strategy_info(),this.selectStatus=a.List,this.refresh()},t.prototype.initPro=function(){var e=v.default.modelList;c.Logger.log("ActivityOpenModel.modelList===",v.default.modelList),e.forEach(function(e){if(1==e.status)switch(e.activityId){case 1:S.default.s_doubleegg_info(1);break;case 2:break;case 3:S.default.s_get_legendtask_info(3);break;case 4:S.default.s_get_holidayRun_info();break;case 5:case 6:case 7:case 8:break;case 9:S.default.s_carnival_target_info();break;case 10:S.default.s_get_activity_login_info(10);break;case 11:break;case 12:S.default.s_marfa_info();break;case 13:S.default.s_growup_info();break;case 14:case 15:case 16:break;case 17:S.default.s_activity_seven_login_info();break;case 18:S.default.s_get_topspeed_kill_info();break;case 19:S.default.s_get_marfaking_info();break;case 20:S.default.s_activity_everyday_login_info();break;case 21:S.default.s_get_holidayRun_info();break;case 22:S.default.s_activity_strategy_info();case 24:S.default.s_get_holidayRun_info();break;case 25:break;case 23:S.default.s_req_world_boss_info();break;case 26:S.default.s_req_optional_info();break;case 27:break;case 28:case 29:break;case 31:I.MergeLuckyDrawModel.s_lotterydraw_info(31);break;case 33:S.default.s_get_activity_login_info(33);break;case 34:S.default.s_doubleegg_info(34);break;case 35:S.default.s_get_legendtask_info(35);break;case 36:I.MergeLuckyDrawModel.s_lotterydraw_info(36);break;case 37:break;case 38:b.InvitationModel.s_invitation_info();break;case 39:y.ExoticExplorationModel.s_get_explore_info()}})},t.prototype.refresh=function(){this.selectStatus==a.List?(this.huodong_bg.active=!0,this.huodong_content.active=!1,this.gonglue_content.active=!1,this.refreshTabContent()):this.selectStatus==a.Select?(this.huodong_bg.active=!1,this.huodong_content.active=!0,this.refreshActivityContent()):this.selectStatus==a.Select1&&(this.huodong_bg.active=!1,this.huodong_content.active=!1,this.gonglue_content.active=!0)},t.prototype.refreshTabContent=function(){this.huodong_bg_02.active=!0;for(var e=0;e<this.activitySpriteFrameList.length;e++){var t=v.default.getOpenActivityList(e+1),i=void 0;if(this.activityTabNodeList[e]?i=this.activityTabNodeList[e]:((i=cc.instantiate(this.activityNode)).parent=this.activityNode.parent,this.activityNode.active=!1,this.activityTabNodeList[e]=i),8==e&&(i.zIndex=-1e3),i.active=!1,c.Logger.log("refreshTabContent===",e,t),t.length>0){i.active=!0,this.huodong_bg_02.active=!1,i.getChildByName("activitySp").getComponent(cc.Sprite).spriteFrame=this.activitySpriteFrameList[e],i.getChildByName("activityName").getComponent(cc.Sprite).spriteFrame=this.titleSpriteFrameList[e],this.onAddEvent(i,this.clickTab.bind(this,e,t));var n=this.findChild(i,"activityTime/timeNum").getComponent(cc.Label),o=v.default.getMinStarTimeByType(e+1),a=v.default.getMaxEndTimeByType(e+1);n.string=o&&a?s.default.formatDateStr5(1e3*o)+"-"+s.default.formatDateStr5(1e3*a):p.WordConfig.getWord(60391);var r=[],l=g.ActivitytimeConfig.getConfigById(1);l&&l.activityType==e+1&&r.push(_.RedPointId.Activity_Holiday);var d=g.ActivitytimeConfig.getConfigById(12);d&&d.activityType==e+1&&r.push(_.RedPointId.Activity_mafa);var f=g.ActivitytimeConfig.getConfigById(25);f&&f.activityType==e+1&&r.push(_.RedPointId.LuckyPuzzle);var h=g.ActivitytimeConfig.getConfigById(27);h&&h.activityType==e+1&&r.push(_.RedPointId.ConsumerFeedback);var u=g.ActivitytimeConfig.getConfigById(30);u&&u.activityType==e+1&&r.push(_.RedPointId.ConsumerFeedbackMerged);var m=g.ActivitytimeConfig.getConfigById(28);m&&m.activityType==e+1&&r.push(_.RedPointId.CRecharge12);var C=g.ActivitytimeConfig.getConfigById(29);C&&C.activityType==e+1&&r.push(_.RedPointId.CRecharge30);var y=g.ActivitytimeConfig.getConfigById(13);y&&y.activityType==e+1&&r.push(_.RedPointId.Activity_growFund);var b=g.ActivitytimeConfig.getConfigById(10);b&&b.activityType==e+1&&r.push(_.RedPointId.Activity_newYearGif);var I=g.ActivitytimeConfig.getConfigById(33);I&&I.activityType==e+1&&r.push(_.RedPointId.Activity_newYearGif2);var M=g.ActivitytimeConfig.getConfigById(17);M&&M.activityType==e+1&&r.push(_.RedPointId.Activity_Seven_Login);var w=g.ActivitytimeConfig.getConfigById(19);w&&w.activityType==e+1&&r.push(_.RedPointId.Activity_chengba_marfa);var k=g.ActivitytimeConfig.getConfigById(3);k&&k.activityType==e+1&&r.push(_.RedPointId.MaFaBaYe);var S=g.ActivitytimeConfig.getConfigById(35);S&&S.activityType==e+1&&r.push(_.RedPointId.MaFaBaYe2);var E=g.ActivitytimeConfig.getConfigById(20);E&&E.activityType==e+1&&r.push(_.RedPointId.Activity_Everyday_Login);var L=g.ActivitytimeConfig.getConfigById(18);L&&L.activityType==e+1&&r.push(_.RedPointId.fastKill);var T=g.ActivitytimeConfig.getConfigById(22);T&&T.activityType==e+1&&r.push(_.RedPointId.Activity_Strategy);var R=g.ActivitytimeConfig.getConfigById(9);R&&R.activityType==e+1&&r.push(_.RedPointId.choujianMubiao);var N=g.ActivitytimeConfig.getConfigById(23);N&&N.activityType==e+1&&r.push(_.RedPointId.worldBoss);var B=g.ActivitytimeConfig.getConfigById(38);B&&B.activityType==e+1&&r.push(_.RedPointId.Invitation);var A=g.ActivitytimeConfig.getConfigById(39);if(A&&A.activityType==e+1&&(r.push(_.RedPointId.ExoticExploration1),r.push(_.RedPointId.ExoticExploration2)),r.length>0)i.getChildByName("RedPointPrefab").getComponent(P.default).setRedPointIdList(r)}}},t.prototype.clickTab=function(e){if(10!=e){if(8!=e){var t=v.default.getOpenActivityList(e+1);this.selectStatus=a.Select,c.Logger.log("clickTab====",t,e,this.nowActivityId),this.nowActivityType=e+1,this.initChooseNode()}else this.selectStatus=a.Select1,this.gongLueView.node.active=!0,this.huodong_bg_02.active=!1,this.initStrategyTab();this.refresh()}else d.default.instance.createView(u.default.gameView.BigBossView)},t.prototype.hideAllView=function(){for(var e in this.activityViews){this.activityViews[e].active=!1}},t.prototype.showLoadViewBack=function(e,t){var i=t.getComponent(f.default);t.active=!0,this.huodong_bg_02.active=!1,28==this.nowActivityId||29==this.nowActivityId?i.refresh&&i.refresh(e):37!=this.nowActivityId&&38!=this.nowActivityId||i.changePage(e)},t.prototype.showView=function(e){var t=this.activityViews[e];if(t)this.showLoadViewBack(e,t);else{var i=this,n=C.default.dicActitityConfig[e];n?cc.loader.loadRes(n,cc.Prefab,function(o,a){o?(console.log("Activity load error url="+n),k.default.sendBugLog("Activity load error url="+n)):(console.log("Activity load ok url="+n),(t=cc.instantiate(a)).getComponent(f.default).init(),i.showActivity.addChild(t),i.activityViews[e]=t,i.showLoadViewBack(e,t))}):(console.log("Activity config error ActivityId="+e),k.default.sendBugLog("Activity config error ActivityId="+e))}},t.prototype.refreshActivityContent=function(){this.hideAllView(),c.Logger.log("refreshActivityContent===",this.nowActivityId);var e=v.default.getOpenActivityModel(this.nowActivityId);e&&1==e.status&&(1==this.nowActivityId?this.showView(this.nowActivityId):2==this.nowActivityId?this.showView(this.nowActivityId):3==this.nowActivityId?this.showView(this.nowActivityId):4==this.nowActivityId?this.showView(this.nowActivityId):5==this.nowActivityId?this.showView(this.nowActivityId):6==this.nowActivityId?this.showView(this.nowActivityId):7==this.nowActivityId?this.showView(this.nowActivityId):8==this.nowActivityId?this.showView(this.nowActivityId):9==this.nowActivityId?this.showView(this.nowActivityId):10==this.nowActivityId?this.showView(this.nowActivityId):11==this.nowActivityId?this.showView(this.nowActivityId):12==this.nowActivityId?this.showView(this.nowActivityId):13==this.nowActivityId?this.showView(this.nowActivityId):14==this.nowActivityId?this.showView(this.nowActivityId):15==this.nowActivityId?this.showView(this.nowActivityId):16==this.nowActivityId?this.showView(this.nowActivityId):17==this.nowActivityId?this.showView(this.nowActivityId):18==this.nowActivityId?this.showView(this.nowActivityId):19==this.nowActivityId?this.showView(this.nowActivityId):21==this.nowActivityId?this.showView(this.nowActivityId):20==this.nowActivityId?this.showView(this.nowActivityId):24==this.nowActivityId?this.showView(this.nowActivityId):25==this.nowActivityId?this.showView(this.nowActivityId):26==this.nowActivityId?this.showView(this.nowActivityId):27==this.nowActivityId?this.showView(this.nowActivityId):28==this.nowActivityId?this.showView(this.nowActivityId):29==this.nowActivityId?this.showView(this.nowActivityId):30==this.nowActivityId?this.showView(this.nowActivityId):31==this.nowActivityId?this.showView(this.nowActivityId):33==this.nowActivityId?this.showView(this.nowActivityId):34==this.nowActivityId?this.showView(this.nowActivityId):35==this.nowActivityId?this.showView(this.nowActivityId):36==this.nowActivityId?this.showView(this.nowActivityId):37==this.nowActivityId||38==this.nowActivityId?this.showView(this.nowActivityId):39==this.nowActivityId&&this.showView(this.nowActivityId))},t.prototype.initStrategyTab=function(){this.sortStrategyList();for(var e=this.findChild(this.node,"gonglue_content/scrollView/view/content"),t=1;t<=e.childrenCount;t++){var i=e.getChildByName("index"+t);i.active=!1;var n=h.StrategyConfig.GetOpenlevelByGroup(t,1e3*t+1),o=h.StrategyConfig.GetUnlocklevelByGroup(t,1e3*t+1),a=i.getChildByName("RedPointPrefab").getComponent(P.default),s=new Array;if(M.default.instance.level>=n&&(i.active=!0,i.getComponent(cc.Sprite).spriteFrame=i.getComponent(l.SpriteFrameComponent).spriteFrameList[2],M.default.instance.level>=o)){i.getComponent(cc.Sprite).spriteFrame=i.getComponent(l.SpriteFrameComponent).spriteFrameList[0],this.gongLueView.curTab==t&&(i.getComponent(cc.Sprite).spriteFrame=i.getComponent(l.SpriteFrameComponent).spriteFrameList[1]);var r=w.default.GetDataByIndex(t);if(this.gongLueView.curTab!=t&&(0==r.status||1==r.status)){var c="tab"+r.index;s.push(c)}}a.setRedPointIdList(s),_.default.getInstance().checkRedPointById(_.RedPointId.Activity_Strategy),this.onAddEvent(i,this.onClickStrategyTab.bind(this,i,t))}},t.prototype.onClickStrategyTab=function(e,t){if(this.gongLueView.curTab!=t){var i=h.StrategyConfig.GetUnlocklevelByGroup(t,1e3*t+1);if(!(M.default.instance.level>=i))return E.UIHelper.showTip(cc.js.formatStr(p.WordConfig.getWord(61229),i)),void d.default.instance.createView(u.default.gameView.toStrongerPanel,null,203);this.gongLueView.curTab=t,this.gongLueView.initializeView(this.gongLueView.curTab);for(var n=1;n<=e.parent.childrenCount;n++){var o=e.parent.getChildByName("index"+n);o.getComponent(cc.Sprite).spriteFrame=o.getComponent(l.SpriteFrameComponent).spriteFrameList[2];var a=h.StrategyConfig.GetUnlocklevelByGroup(n,1e3*n+1);if(M.default.instance.level>=a){o.getComponent(cc.Sprite).spriteFrame=o.getComponent(l.SpriteFrameComponent).spriteFrameList[0],this.gongLueView.curTab==n&&(o.getComponent(cc.Sprite).spriteFrame=o.getComponent(l.SpriteFrameComponent).spriteFrameList[1]);var s=o.getChildByName("RedPointPrefab").getComponent(P.default),r=new Array,c=w.default.GetDataByIndex(n);if(this.gongLueView.curTab!=n&&(0==c.status||1==c.status)){var f="tab"+c.index;r.push(f)}s.setRedPointIdList(r),_.default.getInstance().checkRedPointById(_.RedPointId.Activity_Strategy)}}}},t.prototype.sortChooseList=function(){for(var e=this.findChild(this.node,"huodong_content/scrollView/view/content"),t=0;t<this.activityIdList.length;t++){var i=this.activityIdList[t],n=e.getChildByName("index"+i),o=g.ActivitytimeConfig.getConfigById(i);n&&(n.zIndex=o.index)}},t.prototype.sortStrategyList=function(){for(var e=this.findChild(this.node,"gonglue_content/scrollView/view/content"),t=1;t<=e.childrenCount;t++){var i=e.getChildByName("index"+t);i&&(i.zIndex=t)}},t.prototype.initChooseNode=function(){var e=this,t=this.findChild(this.node,"huodong_content/scrollView/view/content");t.children.forEach(function(e){e.active=!1});for(var i=0;i<this.activityIdList.length;i++){var n=this.activityIdList[i],o=t.getChildByName("index"+n),a=g.ActivitytimeConfig.getConfigById(n);if(o){var s=v.default.getOpenActivityModel(n);if(o.getComponent(cc.Sprite).spriteFrame=o.getComponent(l.SpriteFrameComponent).spriteFrameList[0],s){this.onAddEvent(o,this.onBtnChoose.bind(this,o,n));var r=o.active=a.activityType==this.nowActivityType;r&&console.log(r,"  ---------\u5e8f\u53f7--------  index"+n)}o.data=n}}t.children.every(function(t){return!t.active||(e.nowActivityId=t.data,t.getComponent(cc.Sprite).spriteFrame=t.getComponent(l.SpriteFrameComponent).spriteFrameList[1],!1)})},t.prototype.onBtnChoose=function(e,t){var i=this.findChild(this.node,"huodong_content/scrollView/view/content");this.nowActivityId=t,this.refresh(),i.children.forEach(function(e){e.getComponent(cc.Sprite).spriteFrame=e.getComponent(l.SpriteFrameComponent).spriteFrameList[0]}),e.getComponent(cc.Sprite).spriteFrame=e.getComponent(l.SpriteFrameComponent).spriteFrameList[1]},t.prototype.onChangeActivity=function(e){var t=this.findChild(this.node,"huodong_content/scrollView/view/content"),i=g.ActivitytimeConfig.getConfigById(e);this.clickTab(i.activityType-1),t.getChildByName("index"+e)&&this.onBtnChoose(t.getChildByName("index"+e),e)},o([N({type:[cc.SpriteFrame]})],t.prototype,"activitySpriteFrameList",void 0),o([N({type:[cc.SpriteFrame]})],t.prototype,"titleSpriteFrameList",void 0),o([N(cc.Prefab)],t.prototype,"gongLueViewPrefab",void 0),t=o([R],t)}(f.default);i.default=B,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ActivitytimeConfig":"ActivitytimeConfig","../config/StrategyConfig":"StrategyConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../manager/activity/ActivityManager":"ActivityManager","../model/ActivityOpenModel":"ActivityOpenModel","../model/ExoticExplorationModel":"ExoticExplorationModel","../model/InvitationModel":"InvitationModel","../model/MergeLuckyDrawModel":"MergeLuckyDrawModel","../model/RoleInfoModel":"RoleInfoModel","../model/StrategyModel":"StrategyModel","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../prefab/RedPointPrefab":"RedPointPrefab","../utils/UIHelper":"UIHelper","./activity/GongLueView":"GongLueView"}],ActivitygiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6efbdSc76xNlautYvni/bNl","ActivitygiftConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;return i.id=t.id,i.actid=t.actid,i.chargeid=t.chargeid,i.times=t.times,i.des=t.des,i},e.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},e.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},e.getConfigsByActId=function(e){var t=[];return this.configMap.forEach(function(i,n){e==i.actid&&t.push(i)}),t},e.Config_Name="activitygift",e.configMap=new Map,e}();i.default=n,cc._RF.pop()},{}],ActivitytimeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"543c0QP5H9CLILXpXGMI4DY","ActivitytimeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.type=e.type,i.cid=e.cid,i.status=e.status,i.charge=e.charge,i.starttime=e.starttime,i.endtime=e.endtime,i.loopstarttime=e.loopstarttime,i.loopendtime=e.loopendtime,i.des=e.des,i.activityType=e.activityType,i.anger=e.anger,i.index=e.index,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i),t.idList.push(n.id)}),this.idList.sort(function(e,t){return e-t})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id==e&&(t=i)}),t},t.getConfigIdList=function(){return this.idList},t.configMap=new Map,t.idList=[],t}(e("./JsonConfigBase").JsonConfigBase);i.ActivitytimeConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],AdModel:[function(e,t,i){"use strict";cc._RF.push(t,"c4262CZ1NdNUa29qZJQGx4i","AdModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/LocalStorage"),a=e("./RoleInfoModel"),s=e("../../engine/DateUtil"),r=e("../config/DefaultConfig"),c=e("../../engine/EventManager"),l=e("../event/CommonEvent"),d=e("./ServerTime");(function(e){e[e.MakeEquip=1]="MakeEquip",e[e.Antique=2]="Antique",e[e.Coin=3]="Coin",e[e.NULL=Number.MAX_VALUE]="NULL"})(n=i.Ad_Type||(i.Ad_Type={}));var f=function(){function e(){this.adType=n.NULL,this.leftTimes=0,this.lastTime=0}return e.init=function(){e.Ad_Times[n.MakeEquip]=r.DefaultConfig.getConfigById(16).value.times,e.Ad_Times[n.Antique]=r.DefaultConfig.getConfigById(17).value.times,e.Ad_Times[n.Coin]=r.DefaultConfig.getConfigById(17).value.times,this.localKey=this.defaultLocalKey+a.default.instance.roleId,this.modelList=[];var t=o.default.getItem(this.localKey);if(t)for(var i=JSON.parse(t),s=0;s<i.length;s++){var c=new e;c.adType=i[s].adType,c.lastTime=i[s].lastTime,c.leftTimes=i[s].leftTimes,this.modelList[s]=c}},e.getAdLostTimes=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.adType==e)return i.leftTimes}},e.updateAdTimes=function(t){for(var i,n=0;n<this.modelList.length;n++){var o=this.modelList[n];o.adType==t&&(i=o)}return i||((i=new e).adType=t,i.lastTime=0,i.leftTimes=e.Ad_Times[t],this.modelList.push(i)),i.leftTimes--,i.lastTime=d.ServerTime.getServerTime(),s.default.isToday(i.lastTime)||(i.leftTimes=e.Ad_Times[t]),this.saveToLocalStorage(),i.leftTimes},e.saveToLocalStorage=function(){o.default.setItem(this.localKey,JSON.stringify(this.modelList))},e.getAdById=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.adType==e)return i}},e.proto2ModelList=function(t){for(var i=t.getAdvertisementListList(),n=0;n<i.length;n++){var o=this.getAdById(i[n].getId());o||(o=new e,this.modelList.push(o)),o.adType=i[n].getId(),o.leftTimes=i[n].getNum(),o.leftTimes=i[n].getNum()}c.EventManager.instance.dispatch(l.CommonEvent.Event_AdInfoUpdate)},e.modelList=[],e.Ad_Times=[5,5,5],e.defaultLocalKey="AdModel",e.localKey="",e.nowAdType=0,e}();i.default=f,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../config/DefaultConfig":"DefaultConfig","../event/CommonEvent":"CommonEvent","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],AdapterHelper:[function(e,t,i){"use strict";cc._RF.push(t,"0240aeTSeFBpr1OT2tA3oP0","AdapterHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.fixApdater=function(){var e=cc.view.getFrameSize();this.winSizeWidth||(this.winSizeWidth=cc.winSize.width,this.winSizeHeiht=cc.winSize.height);var t=cc.view.getDesignResolutionSize(),i=cc.Canvas.instance;e.height/e.width>t.height/t.width?(i.fitHeight=!1,i.fitWidth=!0):(i.fitHeight=!0,i.fitWidth=!1)},e}();i.default=n,cc._RF.pop()},{}],AiringConfig:[function(e,t,i){"use strict";cc._RF.push(t,"eaa97dzI4lKFIRsB8INQfGW","AiringConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=e[i];t.configMap.set(Number(i),n)})},t.Config_Name="airingConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.AiringConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],AnimationEx:[function(e,t,i){"use strict";cc._RF.push(t,"74353RoNrhPj5CrwZFQS05N","AnimationEx");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s,r=e("../../engine/Logger"),c=cc._decorator,l=c.ccclass,d=c.property;c.executionOrder;(function(e){e[e.Default=0]="Default",e[e.Loop=1]="Loop"})(a=i.WrapModeEx||(i.WrapModeEx={})),function(e){e[e.Animation=0]="Animation",e[e.Opacity=1]="Opacity"}(s||(s={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=s.Animation,t.wrapMode=a.Default,t.atlas=null,t.frameIndex=0,t.clipSample=60,t.framesCount=0,t.speed=.05,t.maxOpacity=255,t.minOpacity=255,t.durOpacity=255,t.isOnloadPlay=!1,t._playFun=function(e){},t._speedCountTimes=0,t._changeOpacity=0,t._isStop=!1,t._callBack=null,t._nodeSprite=null,t._spriteFrameChangeListener=null,t}return n(t,e),Object.defineProperty(t.prototype,"animation2",{get:function(){return this.animation},set:function(e){this.animation=e,this._updateProperty()},enumerable:!0,configurable:!0}),t.prototype._updateProperty=function(){cc.Class.Attr.setClassAttr(this,"atlas","visible",this.animation===s.Animation),cc.Class.Attr.setClassAttr(this,"frameIndex","visible",this.animation==s.Animation),cc.Class.Attr.setClassAttr(this,"clipSample","visible",this.animation==s.Animation),cc.Class.Attr.setClassAttr(this,"framesCount","visible",this.animation==s.Animation),cc.Class.Attr.setClassAttr(this,"speed","visible",this.animation==s.Animation),cc.Class.Attr.setClassAttr(this,"wrapMode","visible",this.animation==s.Animation),cc.Class.Attr.setClassAttr(this,"maxOpacity","visible",this.animation===s.Opacity),cc.Class.Attr.setClassAttr(this,"minOpacity","visible",this.animation==s.Opacity),cc.Class.Attr.setClassAttr(this,"durOpacity","visible",this.animation==s.Opacity)},t.prototype.onLoad=function(){this._speedCountTimes=0,this._isStop=!this.isOnloadPlay,this._callBack=null,this._nodeSprite=this.node.getComponent(cc.Sprite),this._spriteFrameChangeListener=null,this._changeOpacity=0,this._initPlayAnim(),this._nodeSprite?this.atlas?(0==this.framesCount&&(this.framesCount=this.atlas.getSpriteFrames().length),this.setFrameIndex(this.frameIndex)):r.Logger.warn("\u56fe\u96c6\u8d44\u6e90\u4e3a\u7a7a"):r.Logger.warn("\u7cbe\u7075\u7ec4\u4ef6\u4e3a\u7a7a")},t.prototype.onEnable=function(){this._isStop=!1},t.prototype.onDisable=function(){this.frameIndex=0},t.prototype.update=function(e){this._playFun[this.animation]&&this._playFun[this.animation].call(this,e)},t.prototype.setFrameIndex=function(e){if(this.frameIndex<0||this.frameIndex>this.framesCount-1)r.Logger.warn("\u975e\u6cd5\u5e27\u6570\uff0c\u6570\u503c\u8d85\u51fa\u8303\u56f4");else if(this._nodeSprite){var t=this.frameIndex;this.frameIndex=e,this._nodeSprite.spriteFrame=this.atlas.getSpriteFrames()[this.frameIndex],this._spriteFrameChangeListener&&t!==this.frameIndex&&this._spriteFrameChangeListener(this.frameIndex)}else r.Logger.warn("\u7cbe\u7075\u7ec4\u4ef6\u4e3a\u7a7a")},t.prototype._initPlayAnim=function(){this._playFun=function(e){},this._playFun[s.Animation]=this._playAnimBySpriteFrame,this._playFun[s.Opacity]=this._playAnimByOpacity},t.prototype._playAnimBySpriteFrame=function(e){if(this.atlas&&!this._isStop&&(this._speedCountTimes+=e,this._speedCountTimes>=this.speed)){this._speedCountTimes=0;var t=this.frameIndex+1;this.frameIndex>=this.framesCount-1?(this.setFrameIndex(0),this._speedCountTimes=0,this._doStop()):this.setFrameIndex(t)}},t.prototype._playAnimByOpacity=function(e){this._isStop||(this.node.opacity>=this.maxOpacity&&(this._changeOpacity=-this.durOpacity,this._doStop()),this.node.opacity<=this.minOpacity&&(this._changeOpacity=this.durOpacity),this.node.opacity+=this._changeOpacity*e,this.node.opacity=this.node.opacity>this.maxOpacity?this.maxOpacity:this.node.opacity,this.node.opacity=this.node.opacity<this.minOpacity?this.minOpacity:this.node.opacity)},t.prototype.setSpriteFrameChangeListener=function(e){this._spriteFrameChangeListener=e},t.prototype.reset=function(){this._isStop=!1,this.setFrameIndex(0)},t.prototype.playOnce=function(e){this._nodeSprite?(this._isStop=!1,this.setFrameIndex(0),this._callBack=e):r.Logger.warn("\u7cbe\u7075\u7ec4\u4ef6\u4e0d\u5b58\u5728------------")},t.prototype.pause=function(){this._isStop=!0},t.prototype.resume=function(){this._isStop=!1},t.prototype._doStop=function(){return this.wrapMode===a.Default&&(this._isStop=!0,this._callBack&&this.node&&this.node.isValid&&this._callBack(this.node),!0)},o([d({type:cc.Enum(s),tooltip:"\u52a8\u753b\u53d8\u5316\u7c7b\u578b\uff0c\u5e27\u52a8\u753b\u548c\u900f\u660e\u5ea6\u53d8\u5316"})],t.prototype,"animation2",null),o([d({type:cc.Enum(a),tooltip:"\u52a8\u753b\u4f7f\u7528\u7684\u64ad\u653e\u6a21\u5f0f"})],t.prototype,"wrapMode",void 0),o([d({type:cc.SpriteAtlas,tooltip:"\u5207\u7247\u56fe\u96c6"})],t.prototype,"atlas",void 0),o([d({type:cc.Integer,tooltip:"\u9996\u5e27\u7d22\u5f15",min:0})],t.prototype,"frameIndex",void 0),o([d({type:cc.Integer,tooltip:"\u52a8\u753b\u7684\u5e27\u901f\u7387"})],t.prototype,"clipSample",void 0),o([d({type:cc.Integer,tooltip:"\u52a8\u753b\u5e27\u6570\uff0c\u5982\u679c\u6ca1\u8bbe\u7f6e\u5219\u53d6\u56fe\u96c6\u7684\u603b\u5e27\u6570",min:0})],t.prototype,"framesCount",void 0),o([d({type:cc.Float,tooltip:"\u52a8\u753b\u5f00\u59cb\u64ad\u653e\u901f\u5ea6",min:0})],t.prototype,"speed",void 0),o([d({type:cc.Integer,tooltip:"\u6700\u5927\u900f\u660e\u5ea6",min:0,max:255})],t.prototype,"maxOpacity",void 0),o([d({type:cc.Integer,tooltip:"\u6700\u5c0f\u900f\u660e\u5ea6",min:0,max:255})],t.prototype,"minOpacity",void 0),o([d({type:cc.Integer,tooltip:"\u6bcf\u79d2\u53d8\u5316\u901f\u5ea6",min:0})],t.prototype,"durOpacity",void 0),o([d({tooltip:"\u662f\u5426\u7acb\u523b\u64ad\u653e"})],t.prototype,"isOnloadPlay",void 0),t=o([l],t)}(cc.Component);i.AnimationEx=f,cc._RF.pop()},{"../../engine/Logger":"Logger"}],AnnouncementModel:[function(e,t,i){"use strict";cc._RF.push(t,"71986/ha51J64Sm6P/ARG69","AnnouncementModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/LocalStorage"),a=e("../../engine/Md5Helper"),s=e("../event/CommonEvent"),r=e("./EquipGridModel"),c=function(){function e(){this.needShowRed=!1}return e.prototype.checkContent=function(e){this.getStrMD5()!=a.Md5Helper.getMd5Default(e)&&(this.needShowRed=!0,n.EventManager.instance.dispatch(s.CommonEvent.Event_ShowAnnouncementRed))},e.prototype.saveContent=function(e){var t=a.Md5Helper.getMd5Default(e);this.setStrMD5(t),this.needShowRed=!1,n.EventManager.instance.dispatch(s.CommonEvent.Event_ShowAnnouncementRed)},e.prototype.getStrMD5=function(){var e=r.EquipGridModel.LOCAL_KEY.STRENGTHEN_AUTOSELNEXT;return o.default.getItem(e)},e.prototype.setStrMD5=function(e){var t=r.EquipGridModel.LOCAL_KEY.STRENGTHEN_AUTOSELNEXT;o.default.setItem(t,e)},e.instance=new e,e.LOCAL_KEY_ANNOUNCEMENT="LOCAL_KEY_ANNOUNCEMENT",e}();i.default=c,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/Md5Helper":"Md5Helper","../event/CommonEvent":"CommonEvent","./EquipGridModel":"EquipGridModel"}],AnnouncementView:[function(e,t,i){"use strict";cc._RF.push(t,"d90efygXRVBv5bh3MZAPIHS","AnnouncementView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/UIManager"),s=e("../../engine/ViewBase"),r=e("../config/ColorConfig"),c=e("../config/ViewConfig"),l=e("../config/WordConfig"),d=e("../model/ServerTime"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrameList=[],t.richtest=null,t.prams=null,t.item=null,t.nodelist=[],t.change=null,t.istip=!0,t}return n(t,e),t.prototype.onInitChild=function(e,t){void 0===t&&(t=!0),this.prams=e,this.istip=t},t.prototype.onShow=function(){for(var e in console.log("this.prams",this.prams),a.default.instance.setTopUI(c.default.gameView.AnnouncementView),this.item=this.findChild(this.node,"view/line/view/content/item"),this.item.active=!1,this.prams){var t=this.prams[e];if(d.ServerTime.getServerTime()/1e3>=t.start_time&&d.ServerTime.getServerTime()/1e3<=t.end_time){var i=cc.instantiate(this.item);i.parent=this.item.parent,i.active=!0,i.getChildByName("name").getComponent(cc.Label).string=t.title,i.on(cc.Node.EventType.TOUCH_END,this.onChangeTitle.bind(this,e)),this.nodelist[e]=i,1!==t.is_auto_open||this.change||(this.change=e)}}this.change?this.onChangeTitle(this.change):(this.istip&&l.WordConfig.showWord(61807),this.closeView())},t.prototype.onEnable=function(){},t.prototype.onChangeTitle=function(e){this.nodelist[this.change].getComponent(cc.Sprite).spriteFrame=this.spriteFrameList[1],this.nodelist[this.change].getChildByName("name").color=r.ColorConfig.commonTabSelectNo,this.nodelist[e].getComponent(cc.Sprite).spriteFrame=this.spriteFrameList[0],this.nodelist[e].getChildByName("name").color=r.ColorConfig.CommonTabSelected,this.change=e,this.richtest.string=this.prams[e].content},o([h({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),o([h({type:cc.RichText})],t.prototype,"richtest",void 0),t=o([g],t)}(s.default);i.default=u,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/ServerTime":"ServerTime"}],AppDownloadModel:[function(e,t,i){"use strict";cc._RF.push(t,"a7a2fgiIbtL3ZwfKnLv2dKy","AppDownloadModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/GlobalConfig"),a=e("../../engine/LocalStorage"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../config/GameConfig"),l=e("../event/CommonEvent"),d=e("../network/SocketClient"),f=e("../sdk/ZRWXSDKManager"),g=e("./RoleInfoModel");(function(e){e[e.None=-1]="None",e[e.download=0]="download",e[e.reward=1]="reward",e[e.rewardOK=2]="rewardOK"})(i.AppDownloadShow_type||(i.AppDownloadShow_type={}));var h=function(){function e(){this.Cur_AppDownloadState=-1}return e.prototype.proto2AppDownloadState=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_wx_reward_info,e);this.Cur_AppDownloadState=t.getStatus(),n.EventManager.instance.dispatch(l.CommonEvent.Event_WxZhuanduanTypeChange,this.Cur_AppDownloadState)},e.prototype.proto2AppDownloadReward=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_wx_reward,e);this.Cur_AppDownloadState=t.getStatus(),n.EventManager.instance.dispatch(l.CommonEvent.Event_WxZhuanduanTypeChange,this.Cur_AppDownloadState)},e.prototype.useDownAct=function(){return!o.GlobalConfig.wxTest&&(c.GameConfig.isWechat()||c.GameConfig.isWechatClient())},e.prototype.getShowType=function(){return this.Cur_AppDownloadState},e.prototype.startRewardItems=function(){d.default.s_get_wx_reward()},e.prototype.getRewardInfo=function(){d.default.s_get_wx_reward_info()},e.prototype.startDownload=function(){c.GameConfig.isWechat()&&f.ZRWXSDKManager.QCSDK.downloadClient()},e.getTodayShowDownload=function(){var t=e.TodayShowAppDownload+g.default.instance.roleId,i=a.default.getInt(t);return 0==i&&(i=1),1==i},e.setTodayShowDownload=function(t){var i=e.TodayShowAppDownload+g.default.instance.roleId,n=t?1:2;a.default.setInt(i,n)},e.instance=new e,e.TodayShowAppDownload="TodayShowAppDownload",e}();i.AppDownloadModel=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GlobalConfig":"GlobalConfig","../../engine/LocalStorage":"LocalStorage","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GameConfig":"GameConfig","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../sdk/ZRWXSDKManager":"ZRWXSDKManager","./RoleInfoModel":"RoleInfoModel"}],AppearanceSystemSkillItem:[function(e,t,i){"use strict";cc._RF.push(t,"9b1ab55ow5HspfHiDYyMgav","AppearanceSystemSkillItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ResourcesManager"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/ColorConfig"),l=e("../config/SkinConfig"),d=e("../config/ViewConfig"),f=e("../model/RoleInfoModel"),g=e("../model/SkillEffectModel"),h=e("../model/SkillModel"),u=e("../config/WordConfig"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btLog=null,t.icon=null,t.effectName=null,t.effectValue=null,t}return n(t,e),t.prototype.init=function(e){this.skillId=e;for(var t=l.default.getConfigByTypeValue(this.skillId),i=0;i<t.length;i++){var n=l.default.getConfigById(t[i].id);if(g.default.getSkillEffectModelBySkillidAndSkinId(this.skillId,n.id,f.default.instance).isEquipped){this.skinId=n.id;break}}this.initView(),this.initEvent()},t.prototype.initEvent=function(){var e=this;this.onAddEvent(this.btLog,function(){for(var t=h.SkillModel.getMyActiveSkillList(),i=!1,n=0;n<t.length;n++)t[n].skillId==e.skillId&&(i=!0);i?s.default.instance.createView(d.default.gameView.SkillEffectView,null,e.skillId):u.WordConfig.showWord(60332)})},t.prototype.initView=function(){var e;(e=this.skinId?l.default.getConfigById(this.skinId):l.default.getDefaultSkinConfig(this.skillId))?(this.effectName.string=e.name,this.effectName.node.color=c.ColorConfig.getQualityColor(e.quality),this.effectValue.string=e.des,a.default.instance.loadSprite(this.icon,"skinIcon/"+e.skinIcon)):this.node.destroy()},t.prototype.start=function(){},o([C(cc.Node)],t.prototype,"btLog",void 0),o([C(cc.Sprite)],t.prototype,"icon",void 0),o([C(cc.Label)],t.prototype,"effectName",void 0),o([C(cc.Label)],t.prototype,"effectValue",void 0),t=o([m],t)}(r.default);i.default=_,cc._RF.pop()},{"../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/SkinConfig":"SkinConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/RoleInfoModel":"RoleInfoModel","../model/SkillEffectModel":"SkillEffectModel","../model/SkillModel":"SkillModel"}],AppellationConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b7a31HJgn9GRI9B+2MlrakW","AppellationConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=e[i];n.id=Number(i),t.AppellationconfigMap.set(n.id,n)})},t.json2Config2=function(e){Object.keys(e).forEach(function(i){var n=e[i];n.id=Number(i),t.AppellationJulingconfigMap.set(n.id,n)})},t.Config_Name1="AppellationConfig",t.Config_Name2="AppellationJulingConfig",t.AppellationconfigMap=new Map,t.AppellationJulingconfigMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.AppellationConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],AppellationView:[function(e,t,i){"use strict";cc._RF.push(t,"96a2c/sGe9Cy4vs/QB0pILd","AppellationView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ResourcesManager"),r=e("../../../engine/ViewBase"),c=e("../../config/AppellationConfig"),l=e("../../config/ColorConfig"),d=e("../../config/CostumeConfig"),f=e("../../config/ITemsConfig"),g=e("../../config/MagicNameConfig"),h=e("../../config/WordConfig"),u=e("../../event/CommonEvent"),p=e("../../model/AutoAppellationModel"),m=e("../../model/CostumeModel"),C=e("../../model/ItemInfoModel"),_=e("../../model/MagicModel"),v=e("../../utils/JumpActionUtils"),y=e("../../utils/UIHelper"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topResourcePrefab=null,t.changetype=0,t.jvnum=101,t}return n(t,e),t.prototype.start=function(){},t.prototype.onInitChild=function(){},t.prototype.onShow=function(){var e=this;this.setTopUI();var t=this.findChild(this.node,"publicnode");(this.top=this.findChild(t,"top"),this.top.childrenCount<=0)&&(cc.instantiate(this.topResourcePrefab).parent=this.top);for(var i=this.findChild(t,"toggle").children,n=0;n<i.length;n++){i[n].on(cc.Node.EventType.TOUCH_END,this.onChangeType.bind(this,n))}t.getChildByName("btnClose").on(cc.Node.EventType.TOUCH_END,this.closeView,this),this.appellationnode=this.findChild(this.node,"appellationnode");var o=this.appellationnode.getChildByName("jsnode");o.getChildByName("btnjs").on(cc.Node.EventType.TOUCH_END,this.onBtnjs,this),o.getChildByName("btnqwtz").on(cc.Node.EventType.TOUCH_END,this.onBtnqwtz,this),this.upnode=this.appellationnode.getChildByName("upnode"),this.upnode.active=!1,this.upnode.getChildByName("bg").on(cc.Node.EventType.TOUCH_END,function(){e.upnode.active=!1}),this.upnode.getChildByName("btnqd").on(cc.Node.EventType.TOUCH_END,function(){e.upnode.active=!1}),this.convergencenode=this.findChild(this.node,"convergencenode"),this.convergencenode.getChildByName("btnall").on(cc.Node.EventType.TOUCH_END,this.onBtnall.bind(this,!0)),this.btnjl=this.convergencenode.getChildByName("btnjl"),this.btnts=this.convergencenode.getChildByName("btnts"),this.btnjl.on(cc.Node.EventType.TOUCH_END,this.onBtnjl,this),this.convergencenode.getChildByName("togglecontainer").children.forEach(function(t){t.on(cc.Node.EventType.TOUCH_END,e.onJlToggle.bind(e,Number(t.name)))}),this.allnode=this.convergencenode.getChildByName("allnode"),this.allnode.active=!1,this.allnode.getChildByName("bg").on(cc.Node.EventType.TOUCH_END,this.onBtnall.bind(this,!1)),this.allnode.getChildByName("btnclose").on(cc.Node.EventType.TOUCH_END,this.onBtnall.bind(this,!1)),this.node.active=!1,a.EventManager.instance.on(u.CommonEvent.Event_AppellationView,this.onChangeType,this,!0),a.EventManager.instance.on(u.CommonEvent.Event_AppellationView_UP,this.onShowJS,this,!0),p.AutoAppellationModel.getModelMethod().s_get_appellation_info()},t.prototype.onShowJS=function(e){var t=this.upnode.getChildByName("bg");t.opacity=1,this.upnode.active=!0,this.upnode.stopAllActions(),this.upnode.scale=.1,this.upnode.runAction(cc.sequence(cc.scaleTo(.2,1),cc.callFunc(function(){t.opacity=100})));var i=c.AppellationConfig.AppellationconfigMap.get(e),n=c.AppellationConfig.AppellationconfigMap.get(i.next),o=this.upnode.getChildByName("chenghao");m.CostumeModel.setCostSF(o.getComponent(cc.Sprite),m.CostumeType.Title,n.give);var a=this.upnode.getChildByName("content"),s=a.getChildByName("labelnode"),r=0;for(var f in n.value){var h=a.children[r++];h||((h=cc.instantiate(s)).parent=s.parent),h.getChildByName("label1").getComponent(cc.Label).string=g.MagicNameConfig.getDesc(Number(f))+":",h.getChildByName("label2").getComponent(cc.Label).string=""+_.default.formatMagicValue(Number(f),n.value[f])}this.upnode.getChildByName("label2").getComponent(cc.Label).string=d.CostumeConfig.configMap_AppConf.get(n.give).name,this.upnode.getChildByName("label2").color=l.ColorConfig.getQualityColor(n.quality-1)},t.prototype.onChangeType=function(e){void 0===e&&(e=this.changetype),this.changetype=e,this.appellationnode.active=0==e&&this.onRefreshAppellation(),this.convergencenode.active=1==e&&this.onRefreshConvergence(),this.node.active=!0},t.prototype.onJlToggle=function(e){void 0===e&&(e=this.jvnum),this.jvnum=e;var t=this.convergencenode.getChildByName("jvling"),i=c.AppellationConfig.AppellationconfigMap.get(p.AutoAppellationModel.getModelMethod().appe_id),n=c.AppellationConfig.AppellationJulingconfigMap.get(this.jvnum);t.getChildByName("bg").color=l.ColorConfig.getQualityColor(n.quality),t.getChildByName("name").color=l.ColorConfig.getQualityColor(n.quality),t.getChildByName("name").getComponent(cc.Label).string=n.name;var o=i.upper_limit[this.jvnum],a=p.AutoAppellationModel.getModelMethod().julinlist.get(this.jvnum);for(var r in a=a||0,t.getChildByName("num").getComponent(cc.Label).string=a+"/"+o,t.getChildByName("num").color=a<o?cc.Color.GREEN:cc.Color.RED,t.getChildByName("name").y=-25,t.getChildByName("name").width=70,n.item){var d=t.getChildByName("bg").getChildByName("itemIconNode"),h=f.ITemsConfig.getITemsConfigById(r);if(null!=h){var u=cc.js.formatStr("itemIcon/%s",h.icon);s.default.instance.loadSprite(d.getComponent(cc.Sprite),u,!0)}}var m=this.convergencenode.getChildByName("content");m.children.forEach(function(e){e.active=!1});var v=m.getChildByName("labelnode"),y=0;for(var r in n.value){var b=m.children[y++];b||((b=cc.instantiate(v)).parent=v.parent),b.active=!0,b.getChildByName("label1").getComponent(cc.Label).string=g.MagicNameConfig.getDesc(Number(r))+":",b.getChildByName("label2").getComponent(cc.Label).string=_.default.formatMagicValue(Number(r),a*n.value[r]),b.getChildByName("label3").getComponent(cc.Label).string=_.default.formatMagicValue(Number(r),(a+1)*n.value[r])}var I="";for(var r in n.item)I=r;var M=C.default.getItemAmount(I);this.findChild(this.convergencenode,"btnjl/icon").active=a<o&&M>0,this.btnjl.active=a<o,this.btnts.active=a>=o},t.prototype.onBtnjs=function(){var e=p.AutoAppellationModel.getModelMethod(),t=c.AppellationConfig.AppellationconfigMap.get(e.appe_id);if(t.layer&&e.dungeon<t.layer)h.WordConfig.showWord(61842);else{var i="",n=0;for(var o in t.consume)i=o,n=t.consume[o];if(C.default.getItemAmount(i)<n){var a=f.ITemsConfig.getITemsConfigById(i);y.UIHelper.showTip(cc.js.formatStr(h.WordConfig.getWord(61843),a.name))}else p.AutoAppellationModel.getModelMethod().s_appellation_up()}},t.prototype.onBtnall=function(e){if(void 0===e&&(e=!1),this.allnode.active=e,e){var t=p.AutoAppellationModel.getModelMethod().julinlist,i=this.findChild(this.allnode,"scrollView/view/content"),n=i.getChildByName("labelnode"),o=[];t.forEach(function(e,t){var i=c.AppellationConfig.AppellationJulingconfigMap.get(t);for(var n in i.value){var a=o[n]||0;o[n]=a+i.value[n]*e}});var a=0;i.active=o.length>0,this.findChild(this.allnode,"label3").active=0==o.length,o.forEach(function(e,t){var o=i.children[a++];o||((o=cc.instantiate(n)).parent=n.parent),o.getChildByName("label1").getComponent(cc.Label).string=g.MagicNameConfig.getDesc(Number(t))+":",o.getChildByName("label2").getComponent(cc.Label).string="+"+_.default.formatMagicValue(Number(t),e)})}},t.prototype.onBtnjl=function(){p.AutoAppellationModel.getModelMethod();var e=c.AppellationConfig.AppellationJulingconfigMap.get(this.jvnum),t="";for(var i in e.item)t=i;if(0!=C.default.getItemAmount(t))p.AutoAppellationModel.getModelMethod().s_julin_up(this.jvnum);else{var n=f.ITemsConfig.getITemsConfigById(t);y.UIHelper.showTip(cc.js.formatStr(h.WordConfig.getWord(61843),n.name))}},t.prototype.onBtnts=function(){var e=this.findChild(this.node,"publicnode");this.findChild(e,"toggle").children[0].getComponent(cc.Toggle).check(),this.onChangeType(0)},t.prototype.onBtnqwtz=function(){v.default.doAction(v.FunctionIdList.TianGuan),this.closeView()},t.prototype.onRefreshAppellation=function(){var e=p.AutoAppellationModel.getModelMethod(),t=c.AppellationConfig.AppellationconfigMap.get(e.appe_id),i=t.next>0?c.AppellationConfig.AppellationconfigMap.get(t.next):null,n=this.appellationnode.getChildByName("currentappellation"),o=n.getChildByName("existence"),a=o.getChildByName("content"),s=o.getChildByName("chenghao"),r=o.getChildByName("nochenghao");if(a.active=e.appe_id>1e3,s.active=e.appe_id>1e3,r.active=1e3==e.appe_id,e.appe_id>0){var l=a.getChildByName("labelnode"),d=0;for(var f in m.CostumeModel.setCostSF(s.getComponent(cc.Sprite),m.CostumeType.Title,t.give),t.value){(I=a.children[d++])||((I=cc.instantiate(l)).parent=l.parent),I.getChildByName("label1").getComponent(cc.Label).string=g.MagicNameConfig.getDesc(Number(f))+":",I.getChildByName("label2").getComponent(cc.Label).string=_.default.formatMagicValue(Number(f),t.value[f])}}var u=n.getChildByName("nonexistent"),v=u.getChildByName("content"),y=u.getChildByName("chenghao"),b=u.getChildByName("nochenghao");if(v.active=t.next>0,y.active=t.next>0,b.active=0==t.next,i){l=v.getChildByName("labelnode"),d=0;for(var f in m.CostumeModel.setCostSF(y.getComponent(cc.Sprite),m.CostumeType.Title,i.give),i.value){var I;(I=v.children[d++])||((I=cc.instantiate(l)).parent=l.parent),I.getChildByName("label1").getComponent(cc.Label).string=g.MagicNameConfig.getDesc(Number(f))+":",I.getChildByName("label2").getComponent(cc.Label).string=_.default.formatMagicValue(Number(f),i.value[f])}}var M=this.appellationnode.getChildByName("nojs"),w=this.appellationnode.getChildByName("jsnode");if(M.active=0==t.next,w.active=t.next>0,t.next>0){w.getChildByName("condition1").getComponent(cc.Label).string=e.dungeon+h.WordConfig.getWord(61454)+"/"+t.layer+h.WordConfig.getWord(61454),w.getChildByName("condition1").color=e.dungeon<t.layer?cc.Color.RED:cc.Color.GREEN;var k="";d=0;for(var f in t.consume)k=f,d=t.consume[f];var S=C.default.getItemAmount(k);w.getChildByName("condition2").getComponent(cc.Label).string=S+"/"+d,w.getChildByName("condition2").color=S<d?cc.Color.RED:cc.Color.GREEN,w.getChildByName("icon").active=e.dungeon>=t.layer&&S>=d}return!0},t.prototype.onRefreshConvergence=function(){return this.convergencenode.getChildByName("togglecontainer").children.forEach(function(e){var t=c.AppellationConfig.AppellationJulingconfigMap.get(Number(e.name));e.getChildByName("Background").color=l.ColorConfig.getQualityColor(t.quality),e.getChildByName("name").color=l.ColorConfig.getQualityColor(t.quality),e.getChildByName("name").getComponent(cc.Label).string=t.name,e.getChildByName("name").getComponent(cc.Label).fontSize=14,e.getChildByName("name").y=-25,e.getChildByName("name").width=70;var i="";for(var n in t.item)i=n;var o=C.default.getItemAmount(i),a=c.AppellationConfig.AppellationconfigMap.get(p.AutoAppellationModel.getModelMethod().appe_id).upper_limit[t.id],r=p.AutoAppellationModel.getModelMethod().julinlist.get(t.id);for(var n in e.getChildByName("num").getComponent(cc.Label).string=o.toString(),e.getChildByName("num").color=o>0?cc.Color.GREEN:cc.Color.RED,e.getChildByName("num").y=25,e.getChildByName("icon").active=o>0&&(r||0)<a,e.getChildByName("icon").y=0,t.item){var d=e.getChildByName("Background").getChildByName("itemIconNode"),g=f.ITemsConfig.getITemsConfigById(n);if(null!=g){var h=cc.js.formatStr("itemIcon/%s",g.icon);s.default.instance.loadSprite(d.getComponent(cc.Sprite),h,!0)}}}),this.onJlToggle(),!0},t.prototype.closeView=function(){p.AutoAppellationModel.onDestory(),e.prototype.closeView.call(this)},o([M(cc.Prefab)],t.prototype,"topResourcePrefab",void 0),t=o([I],t)}(r.default);i.default=w,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/ViewBase":"ViewBase","../../config/AppellationConfig":"AppellationConfig","../../config/ColorConfig":"ColorConfig","../../config/CostumeConfig":"CostumeConfig","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/AutoAppellationModel":"AutoAppellationModel","../../model/CostumeModel":"CostumeModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../utils/JumpActionUtils":"JumpActionUtils","../../utils/UIHelper":"UIHelper"}],AppraisalConfig:[function(e,t,i){"use strict";cc._RF.push(t,"48cd9gJLa5CGYacV5Wgp5Yl","AppraisalConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){}}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=Number(i),t.AppraisalInfoConfigMap.set(Number(i),n)})},t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.getLevelConfi=function(e){var t=[];return this.AppraisalInfoConfigMap.forEach(function(i){i.level==e&&t.push(i)}),t.length>0||e<=0?t:this.getLevelConfi(e-10)},t.Config_Name="jianbaoshopConfig",t.AppraisalInfoConfigMap=new Map,t}(o.JsonConfigBase);i.AppraisalConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],AppraisalModel:[function(e,t,i){"use strict";cc._RF.push(t,"b6d3e86zH5HWrRl9ZWpaEDi","AppraisalModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/GameSocket"),o=e("../../engine/ProtoConfig"),a=e("../../engine/ProtoUtils"),s=e("../../engine/UIManager"),r=e("../config/ColorConfig"),c=e("../config/EquipConfig"),l=e("../config/GameConfig"),d=e("../config/GameConst"),f=e("../config/ViewConfig"),g=e("../utils/UIHelper"),h=e("./ItemInfoModel"),u=function(){function e(){this.use_diamond=0,this.ten_times=0,this.tips=0,this.next=0,this.again=!1}return e.proto_c_appraisal_setting=function(t){var i=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_appraisal_setting,t);e.instance.use_diamond=i.getUseDiamond(),e.instance.ten_times=i.getTenTimes(),e.instance.tips=i.getTips(),e.instance.next=i.getNextLucky()},e.proto_c_appraisal_start=function(t){var i=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_appraisal_start,t);if(0==i.getRet()){e.instance.next=i.getNextLucky();for(var n=i.getItemListList(),l=[],u=!1,p=0;p<n.length;p++){var m=h.default.proto2Model(n[p]);m.quality==d.GameConst.QUALITY.ORANGE&&(u=!0),l.push(m)}1==e.instance.tips||u?s.default.instance.createView(f.default.gameView.AppraisalTip,null,l):l.forEach(function(e){var t=c.EquipConfig.getEquipConfigById(e.itemType);t&&g.UIHelper.showTip(t.name+"X1",1,r.ColorConfig.getEquipQualityColor(e.quality))})}},e.s_appraisal_setting=function(e,t,i){if(l.GameConfig.connectServer&&n.default.getInstance().isLogin){var s=a.ProtoUtils.Create(o.ProtoConfig.s_appraisal_setting);s.setUseDiamond(e),s.setTenTimes(t),s.setTips(i),n.default.getInstance().sendToSocket(s),console.log("s_appraisal_setting",e,t,i)}},e.s_appraisal_start=function(e){if(l.GameConfig.connectServer&&n.default.getInstance().isLogin){var t=a.ProtoUtils.Create(o.ProtoConfig.s_appraisal_start);t.setId(e),n.default.getInstance().sendToSocket(t),console.log("s_appraisal_start",e)}},e.instance=new e,e}();i.AppraisalModel=u,cc._RF.pop()},{"../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../utils/UIHelper":"UIHelper","./ItemInfoModel":"ItemInfoModel"}],AppraisalTip:[function(e,t,i){"use strict";cc._RF.push(t,"bb466EwLOBMFJxYbMBnYE1L","AppraisalTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/GameConst"),r=e("../prefab/ItemPrefab"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){},t.prototype.onInitChild=function(e){this.list=e},t.prototype.onShow=function(){this.setTopUI(),this.findChild(this.node,"btnDefine").on(cc.Node.EventType.TOUCH_END,this.closeView,this);var e=this.findChild(this.node,"content"),t=!1,i=this.findChild(this.node,"content/Item");e.getComponent(cc.Layout).type=this.list.length>1?cc.Layout.Type.GRID:cc.Layout.Type.HORIZONTAL,i.active=!1,this.list.forEach(function(e){e.quality==s.GameConst.QUALITY.ORANGE&&(t=!0);var n=cc.instantiate(i);n.parent=i.parent,n.active=!0,n.getComponent(r.default).init(e,!0)}),t||this.findChild(this.node,"darkLayer1").on(cc.Node.EventType.TOUCH_END,this.closeView,this)},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../prefab/ItemPrefab":"ItemPrefab"}],AppraisalView:[function(e,t,i){"use strict";cc._RF.push(t,"bc922fWyPhKlKdHGTCMTf3P","AppraisalView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/AppraisalConfig"),r=e("../model/RoleInfoModel"),c=e("../config/GameConst"),l=e("../prefab/ItemPrefab"),d=e("../model/AppraisalModel"),f=e("../model/ItemInfoModel"),g=e("../config/WordConfig"),h=e("../../engine/UIManager"),u=e("../config/ViewConfig"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.occupation="equip_daoshi",t.islevel=null,t.islevelMax=null,t.islevelMin=null,t.anime=null,t.btncontentNodex=[],t.speed=1e3,t.move=!1,t}return n(t,e),t.prototype.onLoad=function(){this.anime=this.node.getChildByName("anime");var e=this.node.getChildByName("btncontent");for(var t in e.children){var i=e.children[t];this.btncontentNodex[t]=i.x,i.on(cc.Node.EventType.TOUCH_END,this.onStartBtn.bind(this,i.name))}for(var n=1;n<=3;n++){(i=this.node.getChildByName("toggle"+n)).on(cc.Node.EventType.TOUCH_END,this.onSetting.bind(this,n+1))}this.node.getChildByName("btnleft").on(cc.Node.EventType.TOUCH_END,this.onChangeType.bind(this,0)),this.node.getChildByName("btnright").on(cc.Node.EventType.TOUCH_END,this.onChangeType.bind(this,1)),r.default.instance.occupation==c.GameConst.OCCUPATION.ZHAN_SHI?this.occupation="equip_zhanshi":r.default.instance.occupation==c.GameConst.OCCUPATION.FA_SHI&&(this.occupation="equip_fashi")},t.prototype.onEnable=function(){var e=this;this.move=!1,this.anime.active=!1,s.AppraisalConfig.AppraisalInfoConfigMap.forEach(function(t){var i=t.level;(!e.islevelMax||e.islevelMax<i)&&(e.islevelMax=i),(!e.islevelMin||e.islevelMin>i)&&(e.islevelMin=i)});var t=10*Math.floor(r.default.instance.level/10);this.islevelMax>t&&(this.islevelMax=t),this.islevelMin>t&&(this.islevelMax=this.islevelMin),this.islevel=this.islevelMax,this.node.getChildByName("toggle1").getComponent(cc.Toggle).isChecked=2==d.AppraisalModel.instance.use_diamond,this.node.getChildByName("toggle2").getComponent(cc.Toggle).isChecked=2==d.AppraisalModel.instance.ten_times,this.node.getChildByName("toggle3").getComponent(cc.Toggle).isChecked=2==d.AppraisalModel.instance.tips,this.initPos(),this.onChangeType(this.islevelMax)},t.prototype.initPos=function(){var e=this.node.getChildByName("btncontent"),t=this.node.getChildByName("labelnode");for(var i in e.children){var n=e.children[i],o=t.getChildByName("label"+i);o.stopAllActions(),n.stopAllActions(),n.x=this.btncontentNodex[i],o.x=this.btncontentNodex[i]}},t.prototype.onStartBtn=function(e){var t=this;if(!this.move)if(this.node.getChildByName("toggle2").getComponent(cc.Toggle).isChecked&&!d.AppraisalModel.instance.again){var i=s.AppraisalConfig.getLevelConfi(this.islevel),n=this.node.getChildByName("toggle1").getComponent(cc.Toggle).isChecked?10*i[0].cost_2[2]+g.WordConfig.getWord(60517):10*i[0].cost_3[3]+g.WordConfig.getWord(60756),o=cc.js.formatStr(g.WordConfig.getWord(61836),n,this.islevel,c.GameConst.getEquipPositionName(e,!0));h.default.instance.createView(u.default.gameView.DialogCheck,null,o,function(i,n){i&&(t.onSendStart(e),d.AppraisalModel.instance.again=n)},!0)}else this.onSendStart(e)},t.prototype.onSendStart=function(e){var t=this;s.AppraisalConfig.getLevelConfi(this.islevel).forEach(function(t){t.position!=e||d.AppraisalModel.s_appraisal_start(t.id)}),this.anime.active=!0;var i=this.node.getChildByName("btncontent"),n=this.anime.getComponent(cc.Animation).play("appraisal");this.anime.setPosition(i.getChildByName(e.toString()).getPosition()),this.scheduleOnce(function(){t.anime.active=!1},n.duration)},t.prototype.onSetting=function(e){var t=this;this.scheduleOnce(function(){var e=t.node.getChildByName("toggle1").getComponent(cc.Toggle).isChecked?2:1,i=t.node.getChildByName("toggle2").getComponent(cc.Toggle).isChecked?2:1,n=t.node.getChildByName("toggle3").getComponent(cc.Toggle).isChecked?2:1;d.AppraisalModel.s_appraisal_setting(e,i,n)})},t.prototype.onChangeType=function(e){var t=this,i=this.node.getChildByName("btncontent"),n=this.node.getChildByName("labelnode");if(0==e)if(this.islevel-10<this.islevelMin)this.islevel=this.islevelMin;else for(var o in this.islevel=this.islevel-10,this.move=!0,this.initPos(),i.children){var a=this.btncontentNodex[o],r=i.children[o],d=n.getChildByName("label"+o);r.stopAllActions(),r.runAction(cc.sequence(cc.moveTo((385-a)/this.speed,385,r.y),cc.moveTo(0,-385,r.y),cc.moveTo(Math.abs(r.x+385)/this.speed,a,r.y),cc.callFunc(function(){t.move=!1}))),d.stopAllActions(),d.runAction(cc.sequence(cc.moveTo((385-a)/this.speed,385,d.y),cc.moveTo(0,-385,d.y),cc.moveTo(Math.abs(d.x+385)/this.speed,a,d.y)))}else if(1==e)if(this.islevel+10>this.islevelMax)this.islevel=this.islevelMax;else for(var o in this.islevel=this.islevel+10,this.move=!0,this.initPos(),i.children){a=this.btncontentNodex[o],r=i.children[o],d=n.getChildByName("label"+o);r.runAction(cc.sequence(cc.moveTo(Math.abs(r.x+385)/this.speed,-385,r.y),cc.moveTo(0,385,r.y),cc.moveTo((385-a)/this.speed,a,r.y),cc.callFunc(function(){t.move=!1}))),d.runAction(cc.sequence(cc.moveTo(Math.abs(d.x+385)/this.speed,-385,d.y),cc.moveTo(0,385,d.y),cc.moveTo((385-a)/this.speed,a,d.y)))}else this.islevel=e;this.node.getChildByName("btnleft").active=this.islevel!=this.islevelMin,this.node.getChildByName("btnright").active=this.islevel!=this.islevelMax;var h=this.node.getChildByName("showcontent"),u=s.AppraisalConfig.getLevelConfi(this.islevel);u&&u.length>0&&u.forEach(function(e){var i=h.getChildByName("bagItem"+e.position);i.getComponent(l.default).init(f.default.create(c.GameConst.ITEM_KIND.EQUIP,e[t.occupation],1,c.GameConst.QUALITY.ORANGE)),i.getComponent(l.default).playcanAnimation(),i.active=!0}),n.getChildByName("title").getComponent(cc.RichText).string=cc.js.formatStr(g.WordConfig.getWord(61829),this.islevel),n.getChildByName("tipsTxt1").getComponent(cc.RichText).string=cc.js.formatStr(g.WordConfig.getWord(61825),u[0].cost_2[2],u[0].cost_3[3])},t=o([m],t)}(a.default));i.AppraisalView=C,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/AppraisalConfig":"AppraisalConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/AppraisalModel":"AppraisalModel","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/ItemPrefab":"ItemPrefab"}],AppstoneView:[function(e,t,i){"use strict";cc._RF.push(t,"ea2f8GvYI9LTJsVuWxo4riK","AppstoneView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../sdk/SdkHelper"),r=e("../prefab/ItemPrefab"),c=e("../model/ItemInfoModel"),l=e("../config/GameConst"),d=e("../config/ITemsConfig"),f=e("../utils/UIHelper"),g=e("../network/SocketClient"),h=e("../config/GameConfig"),u=e("../sdk/SdkManager"),p=e("../sdk/SdkHandler"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){this.refresh()},t.prototype.aWakeFromBackGround=function(){this.refresh()},t.prototype.refresh=function(){var e=this;cc.game.off(cc.game.EVENT_SHOW,this.aWakeFromBackGround,this),cc.game.on(cc.game.EVENT_SHOW,this.aWakeFromBackGround,this),this.panel0=this.findChild(this.node,"panel0"),this.panel1=this.findChild(this.node,"panel1"),this.panel0.active=!s.default.isGetting_Appstore_reward,this.panel1.active=s.default.isGetting_Appstore_reward;var t=this.findChild(this.node,"panel0/btnRefuse");this.onAddEvent(t,function(){e.closeView()});var i=this.findChild(this.node,"panel0/btnApp");this.onAddEvent(i,function(){s.default.isGetting_Appstore_reward=!0,s.default.isIos()?h.GameConfig.sdkType==h.SdkType.KoreaBingNiao?u.default.sdkAuth(p.AuthType.sdkComment):s.default.appId==s.default.AppIdConfig.Ios1?window.location.href="https://apps.apple.com/cn/app/id1528674534?sign=jdasdjfoiafajfjjkjkjkjkjioewoieoijjkjkjkjyyyeiewouoweroerouwetyytowoouto":s.default.appId==s.default.AppIdConfig.Ios2?window.location.href="https://apps.apple.com/cn/app/id1529421659?sign=jdasdjfoiafajfjjkjkjkjkjioewoieoijjkjkjkjyyyeiewouoweroerouwetyytowoouto":s.default.appId==s.default.AppIdConfig.Ios6?window.location.href="https://apps.apple.com/cn/app/id1541984892?sign=jdasdjfoiafajfjjkjkjkjkjioewoieoijjkjkjkjyyyeiewouoweroerouwetyytowoouto":s.default.appId==s.default.AppIdConfig.Ios7?window.location.href="https://apps.apple.com/cn/app/id1565273799":s.default.appId==s.default.AppIdConfig.Ios8?window.location.href="https://apps.apple.com/cn/app/id1573870517":window.location.href="https://apps.apple.com/cn/app/id1528674534?sign=jdasdjfoiafajfjjkjkjkjkjioewoieoijjkjkjkjyyyeiewouoweroerouwetyytowoouto":s.default.isAndroid()&&cc.sys.openURL("https://play.google.com/store/apps/details?id=com.wenzichuanqi.apk")});var n=this.findChild(this.node,"itemPrefab"),o=d.ITemsConfig.getITemsConfigById(l.ItemId.Book),a=c.default.create(l.GameConst.ITEM_KIND.ITEM,l.ItemId.Book,50,o.quality);n.getComponent(r.default).init(a,!0),this.getChild(this.node,"jinbikuang/numJinbi",cc.Label).string=f.UIHelper.tranNumber(1e5);var m=this.findChild(this.node,"panel1/btnGet");this.onAddEvent(m,function(){e.closeView(),g.default.getAppstoneReward()})},t=o([C],t)}(a.default));i.default=_,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager","../utils/UIHelper":"UIHelper"}],ArenaRankRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a4806fpyDZAa4X0OAJHhn7j","ArenaRankRewardConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.score=e.score,i.items=e.items,i.ress=e.ress,i.rank=e.rank,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getAllListConfig=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.getPaiming=function(e){this.configMap.forEach(function(e,t){})},t.Config_Name="arenaRankRewardConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ArenaRankRewardConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ArenaWeekRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b78f0lck8hBz545QdO5fMp8","ArenaWeekRewardConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.limit=e.limit,i.items=e.items,i.ress=e.ress,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getAllListConfig=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.Config_Name="arenaWeekRewardConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ArenaWeekRewardConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],Astar:[function(e,t,i){"use strict";cc._RF.push(t,"1656cBL+z9Ikr2c9sZDM2Uj","Astar");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=cc._decorator,r=s.ccclass;s.property;(function(e){e[e.Hider=0]="Hider",e[e.Normal=1]="Normal",e[e.End=2]="End"})(a=i.AstarGridType||(i.AstarGridType={}));var c=function(){return function(){this.x=0,this.y=0,this.f=0,this.g=0,this.h=0,this.type=0,this.parent=null}}();i.AstarGrid=c;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mapW=24,t.mapH=13,t.is8dir=!1,t.openList=[],t.closeList=[],t.path=[],t.gridsList=[],t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e,t,i){void 0===i&&(i=!1),this.mapW=e,this.mapH=t,this.is8dir=i,this.initMap()},t.prototype.initMap=function(){this.openList=[],this.closeList=[],this.path=[],this.gridsList=new Array(this.mapW+1);for(var e=0;e<this.gridsList.length;e++)this.gridsList[e]=new Array(this.mapH+1);for(e=0;e<=this.mapW;e++)for(var t=0;t<=this.mapH;t++)this.addGrid(e,t,a.Normal)},t.prototype.addGrid=function(e,t,i){void 0===i&&(i=a.Hider);var n=new c;n.x=e,n.y=t,n.type=i,this.gridsList[e][t]=n},t.prototype.setGridType=function(e,t,i){this.gridsList[e][t].type=i},t.prototype.resetAllParent=function(){for(var e=0;e<this.gridsList.length;e++)for(var t=0;t<this.gridsList[e].length;t++)this.gridsList[e][t].parent=null,this.gridsList[e][t].f=0,this.gridsList[e][t].g=0,this.gridsList[e][t].h=0},t.prototype.findPath=function(e,t,i){void 0===i&&(i=null),this.resetAllParent();var n=this.gridsList[e.x][e.y];this.openList=[],this.closeList=[],this.path=[],this.openList.push(n);for(var o=this.openList[0];this.openList.length>0&&o.type!=a.End;){if((o=this.openList[0]).type==a.End)return this.generatePath(o),void(i&&i(this.path));for(var s=-1;s<=1;s++)for(var r=-1;r<=1;r++)if(0!=s||0!=r){var c=o.x+s,l=o.y+r;if(c>=0&&l>=0&&c<=this.mapW&&l<=this.mapH&&this.gridsList[c][l].type!=a.Hider&&this.closeList.indexOf(this.gridsList[c][l])<0){if(this.is8dir){if(this.gridsList[c-s][l].type==a.Hider||this.gridsList[c][l-r].type==a.Hider)continue}else if(Math.abs(s)==Math.abs(r))continue;var d=o.g+Math.floor(Math.sqrt(Math.pow(10*s,2))+Math.pow(10*r,2));(0==this.gridsList[c][l].g||this.gridsList[c][l].g>d)&&(this.gridsList[c][l].g=d,this.gridsList[c][l].parent=o),this.gridsList[c][l].h=Math.abs(t.x-c)+Math.abs(t.y-l),this.gridsList[c][l].f=this.gridsList[c][l].g+this.gridsList[c][l].h,this.openList.indexOf(this.gridsList[c][l])<0&&this.openList.push(this.gridsList[c][l])}}if(this.closeList.push(o),this.openList.splice(this.openList.indexOf(o),1),this.openList.length<=0){this.path=[],i&&i(this.path);break}this.openList.sort(function(e,t){return e.f-t.f})}},t.prototype.generatePath=function(e){for(this.path.push(e);e.parent;)e=e.parent,this.path.push(e);return this.path},t.prototype.onDestroy=function(){},t=o([r],t)}(cc.Component);i.Astar=l,cc._RF.pop()},{}],AuctionGoodsItem:[function(e,t,i){"use strict";cc._RF.push(t,"d4eb1+BJyBGA4YKWBHlj6Gz","AuctionGoodsItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/Logger"),r=e("../../config/ItemgoodsConfig"),c=e("../../config/WordConfig"),l=e("../../model/RoleInfoModel"),d=e("../../prefab/ItemPrefab"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.myAuctionGoods=null,t.takePart=null,t.price=null,t.auctionState=null,t.timeLael=null,t.time=null,t}return n(t,e),t.prototype.init=function(e,t,i){this.isInit=!0,this.model=e,this.config=this.model.getConfig(),this.auctionGoodsInfo=t,this.auctionHouseView=i,this.initView(),this.initEvent()},t.prototype.initEvent=function(){},t.prototype.clickCallback=function(){this.auctionHouseView.setSelectedGoods(this.auctionGoodsInfo);var e=0!==this.auctionGoodsInfo.state;this.auctionHouseView.setBiddingState(e),0!=e&&this.auctionHouseView.setFinalPriceBtState(r.default.getHaveTopPriceByItemType(this.model.itemType))},t.prototype.refash=function(){if(2===this.auctionGoodsInfo.state)return s.Logger.log("\u62cd\u5356\u884c\uff0c\u4e0b\u67b6\u62cd\u54c1,id:",this.model.itemId),this.node.destroy(),!0;this.setTab(),this.setCurPrice(),this.setAuctionState(),this.setTime()},t.prototype.initView=function(){this.setTab(),this.itemPrefab.getComponent(d.default).init(this.model,!0),this.itemPrefab.getComponent(d.default).setJustShow(!0),this.setCurPrice(),this.setAuctionState(),this.setTime()},t.prototype.setCurPrice=function(){var e=this.auctionGoodsInfo.curPrice;this.price.string=0===e?c.WordConfig.getWord(61558):String(this.auctionGoodsInfo.curPrice)},t.prototype.setTab=function(){var e=this.auctionGoodsInfo.heroId;this.auctionGoodsInfo.partake?this.takePart.active=!0:l.default.instance.checkIsMyself(e)&&(this.myAuctionGoods.active=!0)},t.prototype.setAuctionState=function(){var e=this.auctionGoodsInfo.bid;e?l.default.instance.checkIsMyself(String(e))?this.auctionState.string=c.WordConfig.getWord(61519):this.auctionState.string=c.WordConfig.getWord(61520):this.auctionState.string=c.WordConfig.getWord(61521)},t.prototype.setTime=function(){var e=this;0===this.auctionGoodsInfo.state?this.timeLael.string=c.WordConfig.getWord(61518):1===this.auctionGoodsInfo.state&&(this.timeLael.string=c.WordConfig.getWord(61517));var t=((new Date).getTime()-this.auctionGoodsInfo.receiptTime)/1e3;this.actualRemainder=Math.floor(this.auctionGoodsInfo.remainder-t),this.actualRemainder<=0?this.unschedule(this.refashTimeLCallback):(this.time.string=a.default.formatLeftTime2(1e3*this.actualRemainder),this.unschedule(this.refashTimeLCallback),setTimeout(function(){e.schedule(e.refashTimeLCallback,1)}))},t.prototype.refashTimeLCallback=function(){this.actualRemainder-=1,this.actualRemainder<0?this.unschedule(this.refashTimeLCallback):this.time.string=a.default.formatLeftTime2(1e3*this.actualRemainder)},t.prototype.start=function(){},t.prototype.onEnable=function(){if(this.auctionGoodsInfo){var e=((new Date).getTime()-this.auctionGoodsInfo.receiptTime)/1e3;this.actualRemainder=this.auctionGoodsInfo.remainder-e}},o([h(cc.Node)],t.prototype,"itemPrefab",void 0),o([h(cc.Node)],t.prototype,"myAuctionGoods",void 0),o([h(cc.Node)],t.prototype,"takePart",void 0),o([h(cc.Label)],t.prototype,"price",void 0),o([h(cc.Label)],t.prototype,"auctionState",void 0),o([h(cc.Label)],t.prototype,"timeLael",void 0),o([h(cc.Label)],t.prototype,"time",void 0),t=o([g],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/Logger":"Logger","../../config/ItemgoodsConfig":"ItemgoodsConfig","../../config/WordConfig":"WordConfig","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],"AuctionHouseModel ":[function(e,t,i){"use strict";cc._RF.push(t,"bfee3TB1+BPwp64Crkxh7P9","AuctionHouseModel "),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../config/ItemgoodsConfig"),s=e("../event/CommonEvent"),r=e("./RoleInfoModel"),c=function(){return function(){}}();i.AutionGoods=c;var l=function(){return function(){}}();i.AutionLogGoods=l;var d=function(){return function(){}}();i.AutionItemInfo=d;var f=function(){function e(){}return e.proto2Model=function(t){var i=(new Date).getTime();this.index=t.getIdx(),this.maxPage=t.getMaxPage();var a=t.getItemListList();if(this.haveDoneIndexMap.get(this.index))o.Logger.log("\u91cd\u590d \u9875\u7801\u6570\u636e index:",this.index);else{this.haveDoneIndexMap.set(this.index,this.index);var r=[];for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){var d=a[l],f=new c;f.id=d.getId(),f.heroId=d.getHeroId(),f.itemType=d.getItemType(),f.bid=d.getBid(),f.curPrice=d.getCurPrice(),f.fixedPrice=d.getFixedPrice(),f.itemNum=d.getItemNum(),f.remainder=d.getRemainder(),f.startPrice=d.getStartPrice(),f.state=d.getState(),f.partake=d.getPartake(),f.receiptTime=i,r.push(f);var g=e.allAutionGoodsMap.get(e.getIndex());g||(g=new Map,e.allAutionGoodsMap.set(e.getIndex(),g)),g.set(f.id,f)}o.Logger.log("mm index:",this.getIndex(),"",r),o.Logger.log(" c_auction_info \u62cd\u5356\u884c\u73b0\u6709\u7684\u7269\u54c1\u6570\u636e",a,e.allAutionGoodsMap),n.EventManager.instance.dispatch(s.CommonEvent.Event_auctionGoodsRefashAll)}},e.proto2LogModel=function(t){e.auctionHouseLogGoodsMap=new Map;for(var i=t.getLogListList(),a=0,r=i.length;a<r;a++){var c=new l,d=i[a];c.id=d.getId(),c.curPrice=d.getCurPrice(),c.itemType=d.getItemType(),c.itemNum=d.getItemNum(),c.state=d.getState(),c.time=d.getTime(),e.auctionHouseLogGoodsMap.set(c.id,c)}n.EventManager.instance.dispatch(s.CommonEvent.Event_auction_log),o.Logger.log("lxlog \u62cd\u5356\u884c\u7684\u4ea4\u6613\u8bb0\u5f55\u6570\u636e\uff1a",e.auctionHouseLogGoodsMap)},e.proto2ItemInfo=function(t){var i=e.auctionItemInfo=new d;i.itemType=t.getItemType(),i.itemId=String(t.getItemId()),i.auctionRemainder=t.getAuctionRemainder(),i.expire=t.getExpire(),o.Logger.log("\u62cd\u5356\u884c c_auction_item_info \u62cd\u5356\u7269\u54c1\u4fe1\u606f",i),n.EventManager.instance.dispatch(s.CommonEvent.Event_auctionGoodsTime)},e.proto2AutionBuy=function(e){var t=e.getRet();0===t&&n.EventManager.instance.dispatch(s.CommonEvent.Event_c_auction_buy_success),o.Logger.log("\u62cd\u5356\u884c \u4e00\u53e3\u4ef7\u53eb\u4ef7\u6570\u636e\uff1a",t)},e.proto2AutionBid=function(e){var t=e.getRet();0===t&&n.EventManager.instance.dispatch(s.CommonEvent.Event_c_auction_bid_success),o.Logger.log("\u62cd\u5356\u884c \u7ade\u4ef7\u53eb\u4ef7\u6570\u636e\uff1a",t)},e.proto2AutionSingleGoods=function(t){var i=t.getItemInfo(),a=(new Date).getTime(),r=i.getId(),c=e.getAutionGoodsById(r);c?(c.id=r,c.heroId=i.getHeroId(),c.itemType=i.getItemType(),c.bid=i.getBid(),c.curPrice=i.getCurPrice(),c.fixedPrice=i.getFixedPrice(),c.itemNum=i.getItemNum(),c.remainder=i.getRemainder(),c.startPrice=i.getStartPrice(),c.state=i.getState(),c.partake=i.getPartake(),c.receiptTime=a,n.EventManager.instance.dispatch(s.CommonEvent.Event_autionSingleGoods,r)):o.Logger.log("\u5ba2\u6237\u7aef\u6ca1\u6709\u5bf9\u5e94\u7684\u62cd\u54c1\u6570\u636e\u4fee\u6539"),o.Logger.log("\u62cd\u5356\u884c \u62cd\u54c1id:",r," \u5355\u4e2a\u62cd\u54c1\u6570\u636e\u4fee\u6539\uff1a",c)},e.proto2AutionShelves=function(e){var t=e.getRet();0===t&&n.EventManager.instance.dispatch(s.CommonEvent.Event_auctionShelvesState),o.Logger.log("\u62cd\u5356\u884c  0 \u6210\u529f 1\u5931\u8d25 \u62cd\u54c1\u4e0a\u67b6\u6570\u636e\uff1a",t)},e.getIndex=function(){return this.index},e.getOrderlyAuctionHouseLogGoodsArr=function(){var t=[];return e.auctionHouseLogGoodsMap.forEach(function(e,i){t.push(e)}),t.sort(function(e,t){return t.time-e.time}),t},e.getAutionGoodsById=function(t){var i;return e.allAutionGoodsMap.forEach(function(e){var n=e.get(t);n&&(i=n)}),i},e.getAllAutionGoodsMap=function(){return e.allAutionGoodsMap},e.getAllAutionGoodsMapSise=function(){return e.getAllAutionGoodsMap().size},e.checkCanRequest=function(){var t=e.maxPage>e.getIndex();if(!t);return t},e.clearAllAutionGoodsMap=function(){e.index=0,e.maxPage=1,e.allAutionGoodsMap=new Map,this.haveDoneIndexMap=new Map,o.Logger.log(" \u6e05\u7406\u62cd\u5356\u884c\u5546\u54c1\u6570\u636e")},e.getOrderlyAutionGoods=function(){return e.sortAutionGoods(e.getLastAutionGoodsMap())},e.getLastAutionGoodsMap=function(){var t=e.allAutionGoodsMap.get(e.getIndex());return t||(t=new Map),t},e.sortAutionGoods=function(t){var i=[],n=[],o=[],s=[];return t.forEach(function(e,t){0===a.default.getConfigByItemType(e.itemType).order?i.push(e):1===e.partake?n.push(e):e.heroId===r.default.instance.roleId?o.push(e):s.push(e)}),i.sort(function(e,t){return e.remainder-t.remainder}),e.sort(n),e.sort(o),e.sort(s),i.concat(n,o,s)},e.sort=function(e){e.sort(function(e,t){return a.default.getConfigByItemType(e.itemType).order-a.default.getConfigByItemType(t.itemType).order})},e.allAutionGoodsMap=new Map,e.auctionHouseLogGoodsMap=new Map,e.auctionItemInfo={},e.orderlyAutionGoodsArr=[],e.index=0,e.maxPage=1,e.haveDoneIndexMap=new Map,e}();i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../config/ItemgoodsConfig":"ItemgoodsConfig","../event/CommonEvent":"CommonEvent","./RoleInfoModel":"RoleInfoModel"}],AuctionHouseView:[function(e,t,i){"use strict";cc._RF.push(t,"7ed2fCGIZVEJ5FkrtjFFm5E","AuctionHouseView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s,r,c=e("../../../engine/EventManager"),l=e("../../../engine/Logger"),d=e("../../../engine/SpriteFrameComponent"),f=e("../../../engine/UIManager"),g=e("../../../engine/ViewBase"),h=e("../../config/GameConst"),u=e("../../config/ItemgoodsConfig"),p=e("../../config/ViewConfig"),m=e("../../config/WordConfig"),C=e("../../event/CommonEvent"),_=e("../../model/AuctionHouseModel "),v=e("../../model/ItemInfoModel"),y=e("../../network/SocketClient"),b=e("../../utils/MusicHelper"),I=e("../PublicTipView"),M=e("./AuctionGoodsItem");(function(e){e[e.All=0]="All",e[e.Zhuangbei=1]="Zhuangbei",e[e.Cailiao=2]="Cailiao"})(a||(a={})),function(e){e[e.FullServiceAuction=0]="FullServiceAuction",e[e.Hanghui=1]="Hanghui",e[e.TradingRecord=2]="TradingRecord"}(s||(s={})),function(e){e[e.AuctionPrice=0]="AuctionPrice",e[e.FinalPrice=1]="FinalPrice"}(r||(r={}));var w=cc._decorator,k=w.ccclass,S=w.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabArr=[],t.back=null,t.auctionScrollView=null,t.content=null,t.auctionGoodsItem=null,t.finalPriceBt=null,t.auctionBt=null,t.costTip=null,t.dataTabArr=[],t.auctionView=null,t.tradingRecordView=null,t.defaultItem=null,t.help=null,t.guildAuctionView=null,t.goodsMap2=new Map,t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){var t=this;this.viewHeight=this.auctionScrollView.node.getChildByName("view").height,e.prototype.onLoad.call(this),c.EventManager.instance.on(C.CommonEvent.Event_auctionGoodsRefashAll,this.addItemInContainer,this),this.auctionScrollView.node.on("scroll-to-bottom",function(){t.s_auction_info(),l.Logger.log("\u62cd\u5356\u884c \u62cd\u54c1\u89e6\u5e95\u8bf7\u6c42")}),this.onAddEvent(this.help,function(){f.default.instance.createView(p.default.gameView.PublicTipView,null,I.RuleType.TYPE_AUCTIONHOUSE)}),c.EventManager.instance.on(C.CommonEvent.Event_autionSingleGoods,this.refashGoodsState,this),c.EventManager.instance.on(C.CommonEvent.Event_c_auction_bid_success,this.closeCostTipNode,this),c.EventManager.instance.on(C.CommonEvent.Event_c_auction_buy_success,this.closeCostTipNode,this),_.default.clearAllAutionGoodsMap(),this.setBiddingState(!1)},t.prototype.closeCostTipNode=function(){this.costTipNode&&(this.costTipNode.destroy(),this.costTipNode=void 0)},t.prototype.s_auction_info=function(){if(_.default.checkCanRequest()){var e=_.default.getIndex()+1;y.default.s_auction_info(e)}},t.prototype.closeCallback=function(){this.closeView()},t.prototype.start=function(){this.onAddEvent(this.back,this.closeCallback.bind(this));for(var e=0,t=this.tabArr.length;e<t;e++)this.onAddEvent(this.tabArr[e],this.typeChangeCleck.bind(this,this.tabArr[e]));for(e=0,t=this.dataTabArr.length;e<t;e++){var i=this.dataTabArr[e],n=e;this.onAddEvent(i,this.changeDataType.bind(this,n))}this.auctionBt.on(cc.Node.EventType.TOUCH_END,this.FinalPriceBtClickCallback.bind(this,r.AuctionPrice,this.auctionBt),this),this.finalPriceBt.on(cc.Node.EventType.TOUCH_END,this.FinalPriceBtClickCallback.bind(this,r.FinalPrice,this.finalPriceBt),this),this.changeDataType(s.FullServiceAuction)},t.prototype.changeDataType=function(e){if(this.dataType!==e){this.dataType=e;for(var t=0,i=this.dataTabArr.length;t<i;t++){var n=this.dataTabArr[t],o=n.getComponent(d.SpriteFrameComponent).spriteFrameList;n.getComponent(cc.Sprite).spriteFrame=t==e?o[1]:o[0]}0==e?(this.auctionView.active=!0,this.guildAuctionView.active=!1,this.tradingRecordView.active=!1,this.tabArr[0].getComponent(cc.Sprite).spriteFrame=this.tabArr[0].getComponent(d.SpriteFrameComponent).spriteFrameList[0],this.typeChangeCleck(this.tabArr[0])):1==e?(this.auctionView.active=!1,this.guildAuctionView.active=!0,this.tradingRecordView.active=!1):2==e&&(this.auctionView.active=!1,this.guildAuctionView.active=!1,this.tradingRecordView.active=!0)}},t.prototype.FinalPriceBtClickCallback=function(e,t){var i=this;if((e!=r.FinalPrice||this.finalPriceBtState)&&(e!=r.AuctionPrice||this.auctionBtState)){b.MusicHelper.play_click(),this.costTipNode=cc.instantiate(this.costTip),this.node.addChild(this.costTipNode,1);var n,o=this.costTipNode.getChildByName("btnAgree"),a=this.costTipNode.getChildByName("btnCancel"),s=this.costTipNode.getChildByName("darkLayer"),c=this.costTipNode.getChildByName("tip").getComponent(cc.RichText),l=u.default.getConfigByItemType(this.autionGoods.itemType),d=l.docs;e===r.FinalPrice?(n=l.topPrice,c.string=cc.js.formatStr(m.WordConfig.getWord(61540),n,d)):(n=0===this.autionGoods.curPrice?this.autionGoods.startPrice:l.addPrice+this.autionGoods.curPrice,c.string=cc.js.formatStr(m.WordConfig.getWord(61541),n,d)),o.on(cc.Node.EventType.TOUCH_END,this.sendMassage.bind(this,e),this),a.on(cc.Node.EventType.TOUCH_END,function(){i.costTipNode.destroy(),i.costTipNode=void 0}),s.on(cc.Node.EventType.TOUCH_END,function(){i.costTipNode.destroy(),i.costTipNode=void 0})}},t.prototype.sendMassage=function(e){e===r.FinalPrice?y.default.s_auction_buy(this.selectedGoodsId):y.default.s_auction_bid(this.selectedGoodsId),b.MusicHelper.play_click()},t.prototype.setSelectedGoods=function(e){this.autionGoods=e,this.selectedGoodsId=e.id},t.prototype.setFinalPriceBtState=function(e){this.finalPriceBt.color=e?cc.Color.WHITE:cc.Color.GRAY,this.finalPriceBtState=e},t.prototype.setAuctionBtState=function(e){this.auctionBt.color=e?cc.Color.WHITE:cc.Color.GRAY,this.auctionBtState=e},t.prototype.setBiddingState=function(e){this.setFinalPriceBtState(e),this.setAuctionBtState(e)},t.prototype.typeChangeCleck=function(e){var t=e.getComponent(d.SpriteFrameComponent);if(t.changeState.call(t))for(var i=0,n=this.tabArr.length;i<n;i++){var o=this.tabArr[i];o!==e?o.getComponent(cc.Sprite).spriteFrame=o.getComponent(d.SpriteFrameComponent).spriteFrameList[0]:this.refashContainer(i)}},t.fitContont=function(e,t){var i=cc.instantiate(t),n=Math.floor(e.width/i.width),o=n+1,a=e.getComponent(cc.Layout);a.paddingLeft=a.paddingRight=a.spacingX=a.spacingY=(e.width-i.width*n)/o,i.destroy()},t.prototype.addItemInContainer=function(){i.fitContont(this.content,this.auctionGoodsItem);for(var e=_.default.getOrderlyAutionGoods(),t=0,n=e.length;t<n;t++){var o=e[t],a=cc.instantiate(this.auctionGoodsItem);this.content.addChild(a),a.name="auctionGoodsItem";var s=v.default.create(h.GameConst.ITEM_KIND.ITEM,o.itemType,o.itemNum);a.getComponent(M.default).init(s,o,this);var r=u.default.getAuctionGoodsTypeByItemType(o.itemType);this.goodsMap2.set(o.id,a),this.goodsType===r||0===this.goodsType?a.active=!0:a.active=!1}},t.prototype.refashContainer=function(e){var t=this;this.goodsType=e,this.auctionScrollView.scrollToTop(),this.resetAuctionGoodsSelectState();var i=0;this.goodsMap2.forEach(function(e,n){var o=_.default.getAutionGoodsById(n),a=u.default.getAuctionGoodsTypeByItemType(o.itemType);t.goodsType===a||0===t.goodsType?(e.active=!0,i+=1):e.active=!1}),i<10&&this.s_auction_info()},t.prototype.refashGoodsState=function(e){var t=this.goodsMap2.get(e);if(t){if(t.getComponent(M.default).refash())return t.destroy(),this.goodsMap2.delete(e),void this.resetAuctionGoodsSelectState();t.getComponent(cc.Toggle).isChecked&&this.resetAuctionGoodsSelectState()}else l.Logger.log("\u62cd\u5356\u884c\uff0c\u6ca1\u6709\u5bf9\u5e94\u663e\u793a\u7684\u62cd\u54c1\u6570\u636e\u66f4\u65b0\uff0c\u62cd\u54c1id:",e)},t.prototype.resetAuctionGoodsSelectState=function(){this.defaultItem.getComponent(cc.Toggle).check(),this.setBiddingState(!1)},o([S([cc.Node])],t.prototype,"tabArr",void 0),o([S(cc.Node)],t.prototype,"back",void 0),o([S(cc.ScrollView)],t.prototype,"auctionScrollView",void 0),o([S(cc.Node)],t.prototype,"content",void 0),o([S(cc.Prefab)],t.prototype,"auctionGoodsItem",void 0),o([S(cc.Node)],t.prototype,"finalPriceBt",void 0),o([S(cc.Node)],t.prototype,"auctionBt",void 0),o([S(cc.Prefab)],t.prototype,"costTip",void 0),o([S([cc.Node])],t.prototype,"dataTabArr",void 0),o([S(cc.Node)],t.prototype,"auctionView",void 0),o([S(cc.Node)],t.prototype,"tradingRecordView",void 0),o([S(cc.Node)],t.prototype,"defaultItem",void 0),o([S(cc.Node)],t.prototype,"help",void 0),o([S(cc.Node)],t.prototype,"guildAuctionView",void 0),t=i=o([k],t)}(g.default);i.default=P,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ItemgoodsConfig":"ItemgoodsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/AuctionHouseModel ":"AuctionHouseModel ","../../model/ItemInfoModel":"ItemInfoModel","../../network/SocketClient":"SocketClient","../../utils/MusicHelper":"MusicHelper","../PublicTipView":"PublicTipView","./AuctionGoodsItem":"AuctionGoodsItem"}],AuctionItemsTip:[function(e,t,i){"use strict";cc._RF.push(t,"1e080ZGFLlGFKV0g7FkdVfb","AuctionItemsTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ViewBase"),c=e("../../config/ItemgoodsConfig"),l=e("../../config/WordConfig"),d=e("../../event/CommonEvent"),f=e("../../network/SocketClient"),g=e("../../prefab/ItemPrefab"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startingPrice=null,t.finalPrice=null,t.btnUseSelf=null,t.btnGoToAuction=null,t.btnGoToAuctionOff=null,t.btnClose=null,t.itemPrefabNode=null,t}return n(t,e),t.prototype.init=function(e,t,i){this.auctionItemInfo=t,this.itemType=t.itemType,this.model=e,this.auctionedGoodInfoView=i,this.onInitBase("prefab/auctionHouse/auctionItemsTip");var n=this.itemPrefabNode.getComponent(g.default);n.init(e),n.setJustShow(!0);var o,a=c.default.getConfigByItemType(this.itemType);this.startingPrice.string=a.startPrice,o=a.topPrice?a.topPrice+"":l.WordConfig.getWord(61546),this.finalPrice.string=o,this.onAddEvent(this.btnUseSelf,this.useSelfCallback.bind(this)),this.onAddEvent(this.btnGoToAuction,this.goodsShelves.bind(this)),this.onAddEvent(this.btnClose,this.closeView.bind(this)),this.initEvent(),this.initView(),s.Logger.log("muxi itemId:",this.model.itemId)},t.prototype.initView=function(){this.auctionItemInfo.auctionRemainder||(this.btnGoToAuction.active=!1,this.btnGoToAuctionOff.active=!0)},t.prototype.initEvent=function(){a.EventManager.instance.on(d.CommonEvent.Event_auctionShelvesState,this.successCallback,this)},t.prototype.successCallback=function(){this.closeView(),this.auctionedGoodInfoView.closeView()},t.prototype.useSelfCallback=function(){this.model.useArticle(),s.Logger.log("\u62cd\u5356\u884c \u81ea\u5df1\u4f7f\u7528\u62cd\u54c1"),this.successCallback()},t.prototype.goodsShelves=function(){var e=Number(this.model.itemId);s.Logger.log("\u62cd\u5356\u884c \u4e0a\u67b6\u62cd\u54c1\uff0c\u80cc\u5305\u7269\u54c1\u552f\u4e00id:  ",e),f.default.s_auction_shelves(e)},o([p(cc.Label)],t.prototype,"startingPrice",void 0),o([p(cc.Label)],t.prototype,"finalPrice",void 0),o([p(cc.Node)],t.prototype,"btnUseSelf",void 0),o([p(cc.Node)],t.prototype,"btnGoToAuction",void 0),o([p(cc.Node)],t.prototype,"btnGoToAuctionOff",void 0),o([p(cc.Node)],t.prototype,"btnClose",void 0),o([p(cc.Node)],t.prototype,"itemPrefabNode",void 0),t=o([u],t)}(r.default);i.default=m,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ViewBase":"ViewBase","../../config/ItemgoodsConfig":"ItemgoodsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],AuctionLogGoodsItem:[function(e,t,i){"use strict";cc._RF.push(t,"906d6Q5/IxMFKrrxiuHVIWQ","AuctionLogGoodsItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/SpriteFrameComponent"),r=e("../../config/GameConst"),c=e("../../model/ItemInfoModel"),l=e("../../prefab/ItemPrefab"),d=cc._decorator,f=d.ccclass,g=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.price=null,t.time=null,t.auctionState=null,t}return n(t,e),t.prototype.init=function(e){this.model=c.default.create(r.GameConst.ITEM_KIND.ITEM,e.itemType,e.itemNum),this.config=this.model.getConfig(),this.autionLogGoodsInfo=e,this.initView(),this.initEvent()},t.prototype.initEvent=function(){},t.prototype.initView=function(){this.itemPrefab.getComponent(l.default).init(this.model,!0),this.itemPrefab.getComponent(l.default).setJustShow(!0),this.price.string=String(this.autionLogGoodsInfo.curPrice),this.setAuctionState(),this.setTime()},t.prototype.setAuctionState=function(){var e=this.autionLogGoodsInfo.state,t=this.auctionState.getComponent(cc.Sprite),i=this.auctionState.getComponent(s.SpriteFrameComponent).spriteFrameList;switch(e){case 1:t.spriteFrame=i[1];break;case 2:t.spriteFrame=i[0];break;case 3:t.spriteFrame=i[2]}},t.prototype.setTime=function(){var e=1e3*this.autionLogGoodsInfo.time;this.time.string=a.default.formatDateStr5(e)+a.default.formatHourMinStr(e)},o([g(cc.Node)],t.prototype,"itemPrefab",void 0),o([g(cc.Label)],t.prototype,"price",void 0),o([g(cc.Label)],t.prototype,"time",void 0),o([g(cc.Node)],t.prototype,"auctionState",void 0),t=o([f],t)}(cc.Component);i.default=h,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../config/GameConst":"GameConst","../../model/ItemInfoModel":"ItemInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],AuctionedGoodInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"568ee/twT9NQIYa9tNUCEJD","AuctionedGoodInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ViewBase"),c=e("../../config/WordConfig"),l=e("../../event/CommonEvent"),d=e("../../model/AuctionHouseModel "),f=e("../../network/SocketClient"),g=e("../../prefab/ItemPrefab"),h=e("./AuctionItemsTip"),u=cc._decorator,p=u.ccclass,m=u.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.desc=null,t.remainingTime=null,t.overtime=null,t.useBt=null,t.closeBt=null,t.auctionItemsTip=null,t.itemPrefab=null,t}return n(t,e),t.prototype.onInitChild=function(e){this.model=e,this.config=this.model.getConfig(),this.init()},t.prototype.initIcon=function(){var e=this.itemPrefab.getComponent(g.default);e.init(this.model),e.setJustShow(!0)},t.prototype.init=function(){var e=this;this.initEvents(),f.default.s_auction_item_info(this.model.itemId),this.initIcon(),this.findChild(this.node,"bg/content").getComponent(cc.RichText).string=this.config.description,this.onAddEvent(this.useBt,this.useCallback.bind(this)),this.onAddEvent(this.findChild(this.node,"bg/buttom/zhanshibtn"),function(){e.model.itemname=e.itemPrefab.getChildByName("nameTxt").getComponent(cc.Label).string,s.EventManager.instance.dispatch(l.CommonEvent.Event_ADD_ZHANSHI,e.model),e.closeView()}),this.useBt.active=0==this.model.isExhibition,this.findChild(this.node,"bg/buttom/zhanshibtn").active=1==this.model.isExhibition,this.onAddEvent(this.closeBt,this.closeView.bind(this))},t.prototype.initEvents=function(){s.EventManager.instance.on(l.CommonEvent.Event_auctionGoodsTime,this.setTimeL,this)},t.prototype.setTimeL=function(){d.default.auctionItemInfo.itemId===this.model.itemId&&(this.canNext=!0,this.remainingTime.string=d.default.auctionItemInfo.auctionRemainder?a.default.fomatTimeBySecond2(d.default.auctionItemInfo.auctionRemainder,!1):c.WordConfig.getWord(61620),this.overtime.string=a.default.formatDateStr7(1e3*d.default.auctionItemInfo.expire)+a.default.formatLeftTime8(1e3*d.default.auctionItemInfo.expire))},t.prototype.useCallback=function(){if(this.canNext){var e=cc.instantiate(this.auctionItemsTip).getComponent(h.default);this.node.addChild(e.node),e.init(this.model,d.default.auctionItemInfo,this)}},o([m(cc.Label)],t.prototype,"desc",void 0),o([m(cc.Label)],t.prototype,"remainingTime",void 0),o([m(cc.Label)],t.prototype,"overtime",void 0),o([m(cc.Node)],t.prototype,"useBt",void 0),o([m(cc.Node)],t.prototype,"closeBt",void 0),o([m(cc.Prefab)],t.prototype,"auctionItemsTip",void 0),o([m(cc.Node)],t.prototype,"itemPrefab",void 0),t=o([p],t)}(r.default);i.default=C,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/AuctionHouseModel ":"AuctionHouseModel ","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","./AuctionItemsTip":"AuctionItemsTip"}],AudioPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"1a1f5cxpChKaYyVWltgRVG/","AudioPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioList=[],t}return n(t,e),o([c({type:[cc.AudioClip]})],t.prototype,"audioList",void 0),t=o([r],t)}(a.default);i.default=l,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase"}],AutoAppellationModel:[function(e,t,i){"use strict";cc._RF.push(t,"5d4cfUfitlDxZnLtpbJFNJ1","AutoAppellationModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/GameSocket"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/UIManager"),c=e("../config/AppellationConfig"),l=e("../config/ViewConfig"),d=e("../event/CommonEvent"),f=e("../manager/RedPointManager"),g=e("./ItemInfoModel"),h=function(){function e(){this.appe_id=0,this.dungeon=0,this.eventIdList=[],this.protos=[],this.julinlist=new Map,this.eventIdList=[f.RedPointId.Appellation1,f.RedPointId.Appellation2],this.protos=[a.ProtoConfig.c_get_appellation_info],f.default.getInstance().addHandler(this,!0)}return e.prototype.checkRedPoint=function(){var e=[],t=!1,i=!1,n=c.AppellationConfig.AppellationconfigMap.get(this.appe_id);if(n){if(n.layer&&this.dungeon>=n.layer){var o="",a=0;for(var s in n.consume)o=s,a=n.consume[s];g.default.getItemAmount(o)>=a&&(t=!0)}for(var s in n.upper_limit){var d=n.upper_limit[s],h=c.AppellationConfig.AppellationJulingconfigMap.get(Number(s));o="";for(var p in h.item)o=p;var m=g.default.getItemAmount(o),C=this.julinlist.get(Number(s));d>(C||0)&&m>0&&(i=!0)}}var _={id:f.RedPointId.Appellation1,type:f.RedPointType.Default,show:t};e.push(_);var v={id:f.RedPointId.Appellation2,type:f.RedPointType.Default,show:i};return e.push(v),r.default.instance.isOpen(l.default.gameView.AppellationView)||setTimeout(function(){u.onDestory()}),e},e.prototype.s_get_appellation_info=function(){var e=s.ProtoUtils.Create(a.ProtoConfig.s_get_appellation_info);o.default.getInstance().sendToSocket(e)},e.prototype.s_appellation_up=function(){var e=s.ProtoUtils.Create(a.ProtoConfig.s_appellation_up);o.default.getInstance().sendToSocket(e)},e.prototype.s_julin_up=function(e){var t=s.ProtoUtils.Create(a.ProtoConfig.s_julin_up);t.setPos(e),o.default.getInstance().sendToSocket(t)},e.prototype.proto_c_get_appellation_info=function(e){var t=this,i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_appellation_info,e);this.julinlist.clear(),this.appe_id=i.getAppeId(),this.dungeon=i.getDungeon(),i.getJulinListList().forEach(function(e){t.julinlist.set(e.getPos(),e.getNum())}),n.EventManager.instance.dispatch(d.CommonEvent.Event_AppellationView)},e.prototype.proto_c_appellation_up=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_appellation_up,e);t.getRet(),0==t.getRet()&&n.EventManager.instance.dispatch(d.CommonEvent.Event_AppellationView_UP,t.getAppeId())},e.prototype.proto_c_julin_up=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_julin_up,e);t.getRet(),t.getPos()},e.prototype.onDestory=function(){f.default.getInstance().removeHandler(this)},e}();i.AppellationModel=h;var u=function(){function e(){}return e.getModelMethod=function(){return this.modelMethod=this.modelMethod?this.modelMethod:new h,this.modelMethod},e.onDestory=function(){this.destoryMethod()},e.destoryMethod=function(){this.modelMethod&&this.modelMethod instanceof h&&(this.modelMethod.onDestory(),delete this.modelMethod,this.modelMethod=null)},e.modelMethod=null,e}();i.AutoAppellationModel=u,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/AppellationConfig":"AppellationConfig","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./ItemInfoModel":"ItemInfoModel"}],AutoRobotChatModel:[function(e,t,i){"use strict";cc._RF.push(t,"3871dTlS/NJ+qPhe7romu3v","AutoRobotChatModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/UIManager"),c=e("../autoRobot/BossAttackModel"),l=e("../config/ViewConfig"),d=e("../network/SocketClient"),f=e("../prefab/GameManager"),g=e("./ItemInfoModel"),h=e("./RoleInfoModel"),u=function(){function e(){}return e.prototype.test=function(){p.modelList=[];for(var e=p.modelList.length,t=e;t<e+9;t++)this.addChat("test"+t)},e.prototype.getBossKillType=function(e){for(var t=0;t<p.bossAttackList.length;t++){var i=p.bossAttackList[t];if(i.monsterId==e||i.monsterId==e+5e4)return i.killType}return 0},e.prototype.getBossJingJie=function(e){for(var t=0;t<p.bossAttackList.length;t++){var i=p.bossAttackList[t];if(i.monsterId==e)return 0;if(i.monsterId==e+5e4)return 1}return 0},e.prototype.isBossSelect=function(e){for(var t=!1,i=0;i<p.bossAttackList.length;i++){var n=p.bossAttackList[i];if(n.monsterId==e||n.monsterId==e+5e4){t=!0;break}}return t},e.prototype.reInit=function(){p.exp=0,p.coin=0,p.mapId=h.default.instance.mapId,p.killWhiteMonsterNum=0,p.killGreenMonsteNum=0,p.killBlueMonsterNum=0,p.killPurpleMonsterNum=0,p.killBossMonsterNum=0,p.equipWhiteNum=0,p.equipGreenNum=0,p.equipBlueNum=0,p.equipPurpleNum=0,p.equipYellowNum=0,p.modelList=[],p.itemList=[],p.equipList=[]},e.prototype.addChat=function(e,t){void 0===t&&(t=p.Action_Type.Log);var i=new p;if(i.type=t,i.detail=e,t==p.Action_Type.TimeLog){var o=p.modelList[p.modelList.length-1];o&&o.type==p.Action_Type.TimeLog&&p.modelList.pop()}p.modelList.push(i),n.EventManager.instance.dispatch(p.Event_AutoRobotChatModel,i)},e.prototype.proto2Data=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_robot_fight,e),i=(t.getRoleid(),t.getData()),n=JSON.parse(i),o=n.action;o==p.Action_Type.KillMonster?this.onKillLog(n):o==p.Action_Type.Log?(p.startAutoRobotTime=parseInt(n.startTime),p.mapId=n.mapId,this.addChat(n.str)):o==p.Action_Type.TimeLog?(p.mapId=n.mapId,this.addChat(n.str,p.Action_Type.TimeLog)):o==p.Action_Type.UpdateItem&&(p.mapId=n.mapId,this.onUpdateItem(n))},e.prototype.onUpdateItem=function(e){this.onItemData(e),n.EventManager.instance.dispatch(p.Event_AutoRobotChatModel)},e.prototype.isInEuipList=function(e){for(var t=0;t<p.equipList.length;t++){if(p.equipList[t].itemId==e)return!0}},e.prototype.onItemData=function(e){var t=e.itemList,i=e.equipList;p.itemList=[];for(var n=0;n<t.length;n++){var a=g.default.deserializeBinaryToModel(t[n]);p.itemList.push(a)}for(n=0;n<i.length;n++){a=g.default.getItemByid(i[n]);this.isInEuipList(a.itemId)||p.equipList.push(a)}o.Logger.log("\u795e\u8d50\u5c5e\u6027\u3001========",i,p.equipList)},e.prototype.onKillLog=function(e){var t=e.str;this.parseToRobot(e),this.addChat(t)},e.prototype.parseToRobot=function(e){p.exp=e.exp,p.coin=e.coin,p.startAutoRobotTime=parseInt(e.startTime),p.killWhiteMonsterNum=e.killWhiteMonsterNum,p.killGreenMonsteNum=e.killGreenMonsteNum,p.killBlueMonsterNum=e.killBlueMonsterNum,p.killPurpleMonsterNum=e.killPurpleMonsterNum,p.killBossMonsterNum=e.killBossMonsterNum,p.equipWhiteNum=e.equipWhiteNum,p.equipGreenNum=e.equipGreenNum,p.equipBlueNum=e.equipBlueNum,p.equipPurpleNum=e.equipPurpleNum,p.equipYellowNum=e.equipYellowNum,p.mapId=e.mapId,this.onItemData(e),this.parse2Setting(e)},e.prototype.parse2Setting=function(e){p.isAutoBuyHp=e.isAutoBuyHp,p.isAutoBuyMp=e.isAutoBuyMp;var t=e.bossAttackList;p.bossAttackList=[];for(var i=0;i<t.length;i++){var n=new c.BossAttackModel;n.mapId=t[i].mapId,n.monsterId=t[i].monsterId,n.killType=t[i].killType,p.bossAttackList.push(n)}},e.prototype.proto2RobotRecord=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_robot_record_get,e),i=t.getData();o.Logger.log("c_robot_record_get=",t);if(i&&""!=i&&"test"!=i)try{var n=JSON.parse(i);this.parse2Setting(n),n.isShowLog&&(this.parseToRobot(n),this.addChat(n.str),f.default.instance.isGuaJi||r.default.instance.createView(l.default.gameView.autoShow))}catch(e){o.Logger.error("c_robot_record_get parse json\u5931\u8d25+",i,e)}},e.prototype.reset=function(){var e={isAutoBuyHp:p.isAutoBuyHp,isAutoBuyMp:p.isAutoBuyMp,bossAttackList:p.bossAttackList,isShowLog:!1};o.Logger.log("reset===",e),d.default.s_robot_record_set(JSON.stringify(e))},e.prototype.onDestory=function(){},e}();i.AutoRobotChatModelMethod=u;var p=function(){function e(){}return e.getModelMethod=function(){return this.modelMethod=this.modelMethod?this.modelMethod:new u,this.modelMethod},e.onDestory=function(){this.itemList=[],this.equipList=[],this.modelList=[],this.destoryMethod()},e.destoryMethod=function(){this.modelMethod&&this.modelMethod.onDestory(),delete this.modelMethod,this.modelMethod=null},e.Action_Type={KillMonster:1,UpdateItem:2,Log:3,TimeLog:4},e.Max_Plug_Time=432e5,e.Event_AutoRobotChatModel="AutoRobotChatModel",e.startAutoRobotTime=0,e.maxChatNum=100,e.modelList=[],e.itemList=[],e.equipList=[],e.mapId=0,e.coin=0,e.exp=0,e.killWhiteMonsterNum=0,e.killGreenMonsteNum=0,e.killBlueMonsterNum=0,e.killPurpleMonsterNum=0,e.killBossMonsterNum=0,e.equipWhiteNum=0,e.equipGreenNum=0,e.equipBlueNum=0,e.equipPurpleNum=0,e.equipYellowNum=0,e.isAutoBuyHp=!0,e.isAutoBuyMp=!0,e.bossAttackList=[],e.lastClickCd=0,e.hadClickTimes=0,e}();i.AutoRobotChatModel=p,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../autoRobot/BossAttackModel":"BossAttackModel","../config/ViewConfig":"ViewConfig","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","./ItemInfoModel":"ItemInfoModel","./RoleInfoModel":"RoleInfoModel"}],AutoRobotSettingView:[function(e,t,i){"use strict";cc._RF.push(t,"ba0ddGWBslBtqRxVSKcav+U","AutoRobotSettingView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/BossModel"),r=e("../config/MonsterConfig"),c=e("./BossSettingItem"),l=e("../model/RoleInfoModel"),d=e("../config/MapConfig"),f=e("../config/WordConfig"),g=e("../model/JingJieModel"),h=e("../utils/UIHelper"),u=e("../model/FightModel"),p=e("../network/SocketClient"),m=e("../network/HttpHelper"),C=e("../../engine/UIManager"),_=e("../config/ViewConfig"),v=e("../model/AutoRobotChatModel"),y=e("../../engine/DateUtil"),b=e("../model/PrivilegeModel"),I=e("../view/PublicTipView"),M=e("../../engine/EventManager"),w=e("../event/CommonEvent"),k=e("../model/FuGuiGameModel"),S=e("../config/MaprecommendConfig"),P=e("../config/GameConst"),E=cc._decorator,L=E.ccclass,T=E.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.experienceTagNode=null,t.noactivationTagNode=null,t.activationTagNode=null,t.experienceBtn=null,t.btnGo=null,t.btnStart=null,t.exprienceTimeLabel=null,t.itemList=[],t.jinjieList=[{skin:"city/but_button_fanren01",skinSelet:"city/but_button_fanren02",name:g.JingJieModel.getJingJieNameConfig()[0]},{skin:"city/but_button_lunhui01",skinSelet:"city/but_button_lunhui02",name:g.JingJieModel.getJingJieNameConfig()[1]}],t}return n(t,e),t.prototype.onEnable=function(){var e=this;M.EventManager.instance.on(w.CommonEvent.Event_Auto_Robot_Setting,this.onSaveSetting,this),M.EventManager.instance.on(P.EVENT_NAME.REFRESH_PRIVILEGE,this.refresh,this),p.default.s_req_if_kill_boss(),this.btnClose=this.findChild(this.node,"bg/topBtn/btnClose"),this.onAddEvent(this.btnClose,function(){e.closeView()}),this.onAddEvent(this.btnGo,function(){e.closeView(),C.default.instance.createView(_.default.gameView.GamePrivilege,null,b.default.Privilege_Type.GameHelper)}),this.btnHelp=this.findChild(this.node,"bg/topBtn/btn_help"),this.currWorld=this.findChild(this.node,"bg/detail/mapSetting/bg/1/currWorld"),this.currMap=this.findChild(this.node,"bg/detail/mapSetting/bg/2/currMap"),this.buyHp=this.findChild(this.node,"bg/detail/autoBuyDrugSetting/bg/buyHp/auto"),this.buyMp=this.findChild(this.node,"bg/detail/autoBuyDrugSetting/bg/buyMp/auto"),this.autoKillBossSetting=this.findChild(this.node,"bg/detail/autoKillBossSetting"),this.item=this.findChild(this.autoKillBossSetting,"bg/scrollView/view/content/item"),this.mapNameLabel=this.findChild(this.node,"bg/detail/mapSetting/title/mapName").getComponent(cc.Label);var t=S.default.getConfigByPower(l.default.instance.totalFight);if(this.mapNameLabel.node.active=void 0!=t,t){var i=d.MapConfig.getMapConfigByMapId(t.map);this.mapNameLabel.string=i.name}if(this.item.active=!1,this.onAddEvent(this.btnHelp,function(){C.default.instance.createView(_.default.gameView.PublicTipView,null,I.RuleType.TYPE_GAMEHELPER)}),this.hadGameHelperPrivilege=b.default.hadGameHelperPrivilege(),this.hadGameHelperPrivilege?(this.btnGo.active=!1,this.btnStart.active=!0):(this.btnGo.active=!0,this.btnStart.active=!1),this.onAddEvent(this.btnStart,this.onClickStart.bind(this)),this.itemList.length<=0){var n=s.BossModel.modelList.concat();n.sort(function(e,t){var i=d.MapConfig.getMapConfigByMapId(e.mapId);return d.MapConfig.getMapConfigByMapId(t.mapId).Lv-i.Lv});for(var o=function(t){var i=n[t],o=d.MapConfig.getMapConfigByMapId(i.mapId),s=r.MonsterConfig.getMonsterConfigById(i.monsterId);if(s&&1==s.m_type&&o.world==d.MapConfig.WORLD.FanRen){var l=cc.instantiate(a.item);l.parent=a.item.parent,l.active=!0,l.getComponent(c.default).init(i,o);var g=l.getChildByName("auto");v.AutoRobotChatModel.getModelMethod().isBossSelect(i.monsterId)?g.getComponent(cc.Toggle).check():g.getComponent(cc.Toggle).uncheck(),a.onAddEvent(g,function(){if(o.Lv>u.default.maxFight){g.getComponent(cc.Toggle).uncheck();var t=f.WordConfig.getWord(60130);t=t.replace("[#]",o.Lv+""),h.UIHelper.showTip(t),C.default.instance.createView(_.default.gameView.toStrongerPanel)}e.onSaveSetting()}),a.itemList.push(l)}},a=this,g=0;g<n.length;g++)o(g);this.onAddEvent(this.experienceBtn,this.onClickExperience.bind(this))}this.buyHp.on("toggle",function(){e.onSaveSetting()}),this.buyMp.on("toggle",function(){e.onSaveSetting()}),this.refresh()},t.prototype.refresh=function(){var e=this;this.currMap.getComponent(cc.Label).string=d.MapConfig.curMapConfig.name,d.MapConfig.curMapConfig.world==d.MapConfig.WORLD.FanRen?this.currWorld.getComponent(cc.Label).string=f.WordConfig.getWord(60234):d.MapConfig.curMapConfig.world==d.MapConfig.WORLD.LunHui&&(this.currWorld.getComponent(cc.Label).string=f.WordConfig.getWord(60235)),v.AutoRobotChatModel.isAutoBuyHp?this.buyHp.getComponent(cc.Toggle).check():this.buyHp.getComponent(cc.Toggle).uncheck(),v.AutoRobotChatModel.isAutoBuyMp?this.buyMp.getComponent(cc.Toggle).check():this.buyMp.getComponent(cc.Toggle).uncheck(),this.exprienceTimeLabel.node.active=!1;var t=b.default.getPrivilegeModel(b.default.Privilege_Type.GameHelper),i=b.default.getExperienceType(b.default.Privilege_Type.GameHelper);if(t&&(t.leftDay>0||-1==t.leftDay))if(i==b.default.Experience_Type.useing){this.experienceTagNode.active=!0,this.noactivationTagNode.active=!1,this.activationTagNode.active=!1,this.experienceBtn.active=!1,this.exprienceTimeLabel.node.active=!0,this.btnGo.active=!0,this.btnStart.active=!0;var n=function(){var t=b.default.getExperienceTimeStr(b.default.Privilege_Type.GameHelper);""!=t?(e.exprienceTimeLabel.string="\u5269\u4f59\u4f53\u9a8c\u65f6\u957f"+t,e.schedule(n,1)):e.refresh()};n()}else this.experienceTagNode.active=!1,this.noactivationTagNode.active=!1,this.activationTagNode.active=!0,this.experienceBtn.active=!1;else{t?(this.exprienceTimeLabel.node.active=!0,this.exprienceTimeLabel.string="\u4f53\u9a8c\u5df2\u7ed3\u675f,\u7acb\u5373\u6fc0\u6d3b\u5c0a\u8d35\u7279\u6743",this.btnGo.active=!0,this.btnStart.active=!1):this.exprienceTimeLabel.node.active=!1;var o=b.default.findExperienceItem(b.default.Privilege_Type.GameHelper)&&b.default.canUseExperience(b.default.Privilege_Type.GameHelper);this.experienceBtn.active=o,this.experienceTagNode.active=!1,this.noactivationTagNode.active=!this.hadGameHelperPrivilege,this.activationTagNode.active=!1}},t.prototype.onClickExperience=function(){var e=b.default.findExperienceItem(b.default.Privilege_Type.GameHelper);e&&e.useArticle(1)},t.prototype.onSaveSetting=function(){for(var e={},t=[],i=0;i<this.itemList.length;i++){var n=this.itemList[i];if(n.getChildByName("auto").getComponent(cc.Toggle).isChecked){var o={};t.push(o);var a=n.getComponent(c.default).model,s=n.getComponent(c.default);1==s.selectWorldConfig.index?(o.mapId=a.mapId+1e3,o.monsterId=a.monsterId+5e4):(o.mapId=a.mapId,o.monsterId=a.monsterId),o.killType=s.selectKillTypeConfig.index}}e.bossAttackList=t;e.isAutoBuyHp=!1,this.buyHp.getComponent(cc.Toggle).isChecked&&(1,e.isAutoBuyHp=!0);e.isAutoBuyMp=!1,this.buyMp.getComponent(cc.Toggle).isChecked&&(1,e.isAutoBuyMp=!0),v.AutoRobotChatModel.getModelMethod().parse2Setting(e),v.AutoRobotChatModel.getModelMethod().reset()},t.prototype.onClickStart=function(){var e=y.default.now(),t=e-v.AutoRobotChatModel.lastClickCd;if(t<6e4){if(v.AutoRobotChatModel.hadClickTimes>=3){var i=Math.floor((6e4-t)/1e3),n=cc.js.formatStr(f.WordConfig.getWord(60232),i);return void h.UIHelper.showTip(n)}v.AutoRobotChatModel.hadClickTimes++}else v.AutoRobotChatModel.hadClickTimes=1,v.AutoRobotChatModel.lastClickCd=e;if(d.MapConfig.curMapConfig.mapId!=k.FuGuiGameModel.mapId){if(d.MapConfig.curMapConfig.type==d.MapConfig.MAP_TYPE.Field){for(var o=[],a=0;a<this.itemList.length;a++){var s=this.itemList[a];if(s.getChildByName("auto").getComponent(cc.Toggle).isChecked){var r=[];o.push(r);var g=s.getComponent(c.default).model,u=s.getComponent(c.default);1==u.selectWorldConfig.index?(r[0]=g.mapId+1e3,r[1]=g.monsterId+5e4):(r[0]=g.mapId,r[1]=g.monsterId),r[2]=u.selectKillTypeConfig.index}}o.reverse();var C=0;this.buyHp.getComponent(cc.Toggle).isChecked&&(C=1);var _=0;this.buyMp.getComponent(cc.Toggle).isChecked&&(_=1);var b=m.default.plug(C,_,JSON.stringify(o));return this.closeView(),v.AutoRobotChatModel.startAutoRobotTime=0,void p.default.s_robot_switch(l.default.Neigua_Status.GuaJi,b)}f.WordConfig.showWord(60236)}else f.WordConfig.showWord(60233)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),v.AutoRobotChatModel.onDestory()},o([T(cc.Node)],t.prototype,"experienceTagNode",void 0),o([T(cc.Node)],t.prototype,"noactivationTagNode",void 0),o([T(cc.Node)],t.prototype,"activationTagNode",void 0),o([T(cc.Node)],t.prototype,"experienceBtn",void 0),o([T(cc.Node)],t.prototype,"btnGo",void 0),o([T(cc.Node)],t.prototype,"btnStart",void 0),o([T(cc.Label)],t.prototype,"exprienceTimeLabel",void 0),t=o([L],t)}(a.default);i.default=R,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/MaprecommendConfig":"MaprecommendConfig","../config/MonsterConfig":"MonsterConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/AutoRobotChatModel":"AutoRobotChatModel","../model/BossModel":"BossModel","../model/FightModel":"FightModel","../model/FuGuiGameModel":"FuGuiGameModel","../model/JingJieModel":"JingJieModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","../view/PublicTipView":"PublicTipView","./BossSettingItem":"BossSettingItem"}],AutoShowView:[function(e,t,i){"use strict";cc._RF.push(t,"c4f0dwU0YVLHo7xRwLKr70H","AutoShowView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/GameConst"),f=e("../config/MapConfig"),g=e("../config/ViewConfig"),h=e("../config/WordConfig"),u=e("../model/AutoRobotChatModel"),p=e("../model/ItemInfoModel"),m=e("../model/PrivilegeModel"),C=e("../model/RoleInfoModel"),_=e("../network/HttpHelper"),v=e("../network/SocketClient"),y=e("../prefab/GameManager"),b=e("../prefab/ItemPrefab"),I=e("../view/PublicTipView"),M=cc._decorator,w=M.ccclass,k=M.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.itemPool=new cc.NodePool,t.chatItemNodeList=[],t.itemList=[],t.equipList=[],t}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.txtBag=this.getChild(this.node,"mainNode/view/content/txtBag",cc.RichText);var i=this.findChild(this.node,"button_wenhao");this.onAddEvent(i,function(){c.default.instance.createView(g.default.gameView.PublicTipView,null,I.RuleType.TYPE_GAMEHELPER)}),this.txtCoin=this.getChild(this.node,"mainNode/view/content/infoNode/txtCoin",cc.Label),this.txtCoinSpeed=this.getChild(this.node,"mainNode/view/content/infoNode/txtCoinSpeed",cc.Label),this.txtExp=this.getChild(this.node,"mainNode/view/content/infoNode/txtExp",cc.Label),this.txtkillWhiteMonsterNum=this.getChild(this.node,"mainNode/view/content/infoNode/txtkillWhiteMonsterNum",cc.Label),this.txtkillGreenMonsteNum=this.getChild(this.node,"mainNode/view/content/infoNode/txtkillGreenMonsteNum",cc.Label),this.txtkillBlueMonsterNum=this.getChild(this.node,"mainNode/view/content/infoNode/txtkillBlueMonsterNum",cc.Label),this.txtkillPurpleMonsterNum=this.getChild(this.node,"mainNode/view/content/infoNode/txtkillPurpleMonsterNum",cc.Label),this.txtkillBossMonsterNum=this.getChild(this.node,"mainNode/view/content/infoNode/txtkillBossMonsterNum",cc.Label),this.txtExpSpeed=this.getChild(this.node,"mainNode/view/content/infoNode/txtExpSpeed",cc.Label),this.txtWhiteEquip=this.getChild(this.node,"mainNode/view/content/infoNode/txtWhiteEquip",cc.Label),this.txtGreenEquip=this.getChild(this.node,"mainNode/view/content/infoNode/txtGreenEquip",cc.Label),this.txtBlueEquip=this.getChild(this.node,"mainNode/view/content/infoNode/txtBlueEquip",cc.Label),this.txtPurpleEquip=this.getChild(this.node,"mainNode/view/content/infoNode/txtPurpleEquip",cc.Label),this.txtOrageEquip=this.getChild(this.node,"mainNode/view/content/infoNode/txtOrageEquip",cc.Label),this.btnEnd=this.findChild(this.node,"btnEnd"),this.msgScrollView=this.findChild(this.node,"mainNode/view/content/msg"),this.msgItem=this.findChild(this.node,"mainNode/view/content/msg/view/content/msgItem"),this.msgItem.active=!1;for(var n=0;n<u.AutoRobotChatModel.maxChatNum+1;n++)this.itemPool.put(cc.instantiate(this.msgItem));this.msgContainer=this.findChild(this.node,"mainNode/view/content/msg/view/content"),this.btnGoDown=this.findChild(this.node,"mainNode/view/content/msg/btnGoDown"),this.btnGoDown.active=!1,this.onAddEvent(this.btnGoDown,function(){t.btnGoDown.active=!1,t.msgScrollView.getComponent(cc.ScrollView).stopAutoScroll(),t.msgScrollView.getComponent(cc.ScrollView).scrollToBottom()}),this.txtTime=this.getChild(this.node,"mainNode/view/content/tongji/txtTime",cc.Label),this.txtTime.string="",this.button_close=this.findChild(this.node,"button_close"),this.onAddEvent(this.button_close,function(){c.default.instance.createView(g.default.gameView.DialogCheck,null,h.WordConfig.getWord(60700),function(e){e&&(u.AutoRobotChatModel.getModelMethod().reset(),v.default.s_robot_switch(C.default.Neigua_Status.Play,_.default.plugEnd()))})}),this.itemContainer=this.findChild(this.node,"mainNode/view/content/itemScrollView/view/content"),this.itemContainer.removeAllChildren(),this.equipContainer=this.findChild(this.node,"mainNode/view/content/equipScrollView/view/content"),this.equipContainer.removeAllChildren(),this.onAddEvent(this.btnEnd,function(){u.AutoRobotChatModel.getModelMethod().reset(),v.default.s_robot_switch(C.default.Neigua_Status.Play,_.default.plugEnd())}),this.updateItemList(),this.updateEquipList(),this.refreshTxt()},t.prototype.onEnable=function(){this.isAddEnd=!1,this.setTopUI(),this.itemList=[],this.equipList=[],this.msgContainer=this.findChild(this.node,"mainNode/view/content/msg/view/content"),this.itemContainer=this.findChild(this.node,"mainNode/view/content/itemScrollView/view/content"),this.equipContainer=this.findChild(this.node,"mainNode/view/content/equipScrollView/view/content"),this.msgContainer.removeAllChildren(),this.itemContainer.removeAllChildren(),this.equipContainer.removeAllChildren(),y.default.instance.isGuaJi=!0,this.initChatMsg(),s.EventManager.instance.on(u.AutoRobotChatModel.Event_AutoRobotChatModel,this.onChatMsg,this),this.updateItemList(),this.updateEquipList()},t.prototype.refreshTxt=function(){var e=C.default.instance.getBagHadItemNum();e>=C.default.instance.bagAMount?this.txtBag.string=cc.js.formatStr(h.WordConfig.getWord(60701),e,C.default.instance.bagAMount):this.txtBag.string=cc.js.formatStr(h.WordConfig.getWord(60702),e,C.default.instance.bagAMount),this.txtCoin.string=u.AutoRobotChatModel.coin+"",this.txtExp.string=u.AutoRobotChatModel.exp+"",this.txtkillWhiteMonsterNum.string=u.AutoRobotChatModel.killWhiteMonsterNum+"",this.txtkillGreenMonsteNum.string=u.AutoRobotChatModel.killGreenMonsteNum+"",this.txtkillBlueMonsterNum.string=u.AutoRobotChatModel.killBlueMonsterNum+"",this.txtkillPurpleMonsterNum.string=u.AutoRobotChatModel.killPurpleMonsterNum+"",this.txtkillBossMonsterNum.string=u.AutoRobotChatModel.killBossMonsterNum+"";var t=(a.default.now()-u.AutoRobotChatModel.startAutoRobotTime)/1e3;t<1&&(t=1),1e3*t>=u.AutoRobotChatModel.Max_Plug_Time&&(t=u.AutoRobotChatModel.Max_Plug_Time/1e3);var i=Math.ceil(u.AutoRobotChatModel.exp/t);(isNaN(i)||i<0)&&(i=0),this.txtCoinSpeed.string=Math.ceil(u.AutoRobotChatModel.coin/t)+h.WordConfig.getWord(60703),this.txtExpSpeed.string=i+h.WordConfig.getWord(60703),this.txtWhiteEquip.string=u.AutoRobotChatModel.equipWhiteNum+"",this.txtGreenEquip.string=u.AutoRobotChatModel.equipGreenNum+"",this.txtBlueEquip.string=u.AutoRobotChatModel.equipBlueNum+"",this.txtPurpleEquip.string=u.AutoRobotChatModel.equipPurpleNum+"",this.txtOrageEquip.string=u.AutoRobotChatModel.equipYellowNum+"";var n=this.getChild(this.node,"mainNode/view/content/mapNode/txtMap",cc.Label),o=this.getChild(this.node,"mainNode/view/content/worldNode/txtWorld",cc.Label),s=f.MapConfig.getMapConfigByMapId(u.AutoRobotChatModel.mapId);s&&(n.string=s.name,o.string=d.GameConst.WorldNameMap(s.world))},t.prototype.updateItemList=function(){for(var e=0;e<u.AutoRobotChatModel.itemList.length;e++){var t=u.AutoRobotChatModel.itemList[e],i=this.itemList[e];i||((i=cc.instantiate(this.itemPrefab)).setScale(.7,.7),this.itemContainer.addChild(i),this.itemList.push(i)),i.getComponent(b.default).init(t,!0,null,!0,!0)}},t.prototype.updateEquipList=function(){for(var e=0;e<u.AutoRobotChatModel.equipList.length;e++){var t=u.AutoRobotChatModel.equipList[e],i=this.equipList[e],n=p.default.getItemByid(u.AutoRobotChatModel.equipList[e].itemId);t.isLock=!!n&&n.isLock,i||((i=cc.instantiate(this.itemPrefab)).setScale(.7,.7),this.equipContainer.addChild(i),this.equipList.push(i)),i.getComponent(b.default).init(t,!0,null,!0,!0)}},t.prototype.update=function(){this.refreshTime()},t.prototype.refreshTime=function(){var e=a.default.now()-u.AutoRobotChatModel.startAutoRobotTime;if(0==u.AutoRobotChatModel.startAutoRobotTime)this.txtTime.string=""+a.default.formatLeftTime0(0);else{e<0&&(e=0);var t=m.default.getPrivilegeModel(m.default.Privilege_Type.GameHelper),i=m.default.getExperienceType(m.default.Privilege_Type.GameHelper)==m.default.Experience_Type.used;if(t&&i&&1==t.is_card){if(!this.isAddEnd){this.isAddEnd=!0;var n=a.default.formatHourMinSecondStr(t.endTime)||"";u.AutoRobotChatModel.getModelMethod().addChat("<color=#ff0000>"+n+" \u6258\u7ba1\u8bd5\u7528\u5df2\u7ed3\u675f,\u6258\u7ba1\u7ec8\u6b62,\u8bf7\u524d\u5f80\u6fc0\u6d3b\u5c0a\u8d35\u7279\u6743</colo>")}}else if(e>=u.AutoRobotChatModel.Max_Plug_Time&&(e=u.AutoRobotChatModel.Max_Plug_Time,!this.isAddEnd)){this.isAddEnd=!0;n=u.AutoRobotChatModel.startAutoRobotTime+u.AutoRobotChatModel.Max_Plug_Time;r.Logger.info("\u5df2\u5230\u8fbe\u6302\u673a\u6700\u9ad8\u65f6\u965012\u5c0f\u65f6,\u8bf7\u91cd\u65b0\u5f00\u59cb\u6302\u673a",n,u.AutoRobotChatModel.startAutoRobotTime),u.AutoRobotChatModel.getModelMethod().addChat(cc.js.formatStr(h.WordConfig.getWord(60704),a.default.formatHourMinSecondStr(n)))}this.txtTime.string=""+a.default.formatLeftTime0(e)}},t.prototype.initChatMsg=function(){this.delayInitOne(0)},t.prototype.delayInitOne=function(e){var t=this;e<u.AutoRobotChatModel.modelList.length?(this.isAddingChat=!0,this.initOneChatMsg(u.AutoRobotChatModel.modelList[e]),this.scheduleOnce(function(){t.delayInitOne(e+1)},.05)):this.isAddingChat=!1},t.prototype.getItermFromPool=function(){return this.itemPool.size()>0?this.itemPool.get():cc.instantiate(this.msgItem)},t.prototype.release2Pool=function(e){this.itemPool.put(e)},t.prototype.onChatMsg=function(e){this.isAddingChat||this.initOneChatMsg(e),this.updateItemList(),this.updateEquipList()},t.prototype.initOneChatMsg=function(e){if(e){if(e.type==u.AutoRobotChatModel.Action_Type.TimeLog&&this.lastModel&&this.lastModel.type==u.AutoRobotChatModel.Action_Type.TimeLog){var t=this.chatItemNodeList[this.chatItemNodeList.length-1];t&&(this.release2Pool(t),this.chatItemNodeList.pop())}this.lastModel=e,this.refreshTxt();var i=this.getItermFromPool();this.msgContainer.addChild(i),i.active=!0,i.getComponent(cc.RichText).string=e.detail,this.chatItemNodeList.push(i);var n=this.msgScrollView.getComponent(cc.ScrollView);if(n.getScrollOffset().y+20>=n.getMaxScrollOffset().y){for(;this.chatItemNodeList.length>u.AutoRobotChatModel.maxChatNum;){var o=this.chatItemNodeList.shift();this.release2Pool(o)}n.stopAutoScroll(),n.scrollToBottom()}else if(this.chatItemNodeList.length>2*u.AutoRobotChatModel.maxChatNum){o=this.chatItemNodeList.shift();this.release2Pool(o)}this.msgContainer.height>=this.msgScrollView.height&&(this.isGotoChat||(this.isGotoChat=!0,n.stopAutoScroll(),n.scrollToBottom()),n.getScrollOffset().y+20>=n.getMaxScrollOffset().y?(n.stopAutoScroll(),n.scrollToBottom()):this.btnGoDown.active||(this.btnGoDown.active=!0)),this.chatItemNodeList.length<=5?(n.stopAutoScroll(),n.scrollToTop()):this.btnGoDown.active||(n.stopAutoScroll(),n.scrollToBottom())}},t.prototype.onDisable=function(){},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.AutoRobotChatModel.onDestory()},o([k({type:cc.Prefab})],t.prototype,"itemPrefab",void 0),t=o([w],t)}(l.default);i.default=S,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/AutoRobotChatModel":"AutoRobotChatModel","../model/ItemInfoModel":"ItemInfoModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","../prefab/ItemPrefab":"ItemPrefab","../view/PublicTipView":"PublicTipView"}],AutoTipView:[function(e,t,i){"use strict";cc._RF.push(t,"ebea6jEcpFNTJr6dtjEeg/+","AutoTipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){this.setTopUI()},t=o([r],t)}(a.default));i.default=c,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase"}],BaGuaComposeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7ad34H4WFVEkLYwwpCBk1mb","BaGuaComposeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=i,t.configMap.set(o.id,o)})},t.getConfigById=function(e){return this.configMap.get(e)},t.Config_Name="baguacomposeConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],BaGuaCompoundSuccessView:[function(e,t,i){"use strict";cc._RF.push(t,"0da936pKbhG6K3ZcTykj79C","BaGuaCompoundSuccessView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/BaGuaEquipConfig"),r=e("../../config/ColorConfig"),c=e("../../config/ITemsConfig"),l=e("../../config/MagicNameConfig"),d=e("../../model/MagicModel"),f=e("../../model/RoleInfoModel"),g=e("../../prefab/ItemPrefab"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onInitChild=function(e,t){this.setTopUI(),this.lastItemType=e,this.pos=t,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.btnCloseNode=this.findChild(this.node,"frame/descFrame/btnClose"),this.listNode=this.findChild(this.node,"frame/descFrame/list"),this.propertyLabelNode=this.findChild(this.node,"frame/propertyLabel")},t.prototype.initView=function(){var e=this,t=c.ITemsConfig.getITemsConfigById(this.lastItemType),i=f.default.instance.getBaGuaEquipByPos(this.pos);this.listNode.children.forEach(function(n,o){var a=0==o?t:i,s=0==o?t.id:i.itemType;e.setInfo(n,a,s,0==o)}),this.onAddEvent(this.btnCloseNode,this.onClickClose.bind(this))},t.prototype.setInfo=function(e,t,i,n){var o=s.default.getConfigById(i),a=e.getChildByName("item"),r=cc.instantiate(this.baguaItem);r.parent=a,r.getComponent(g.default).init(t,!1);var c=o.attr,l=this.findChild(e,"property/base0/list");c&&this.setPorInfo(c,n,l);var d=o.star1attr,f=this.findChild(e,"property/base1/list");d?this.setPorInfo(d,n,f):this.findChild(e,"property/base1").active=!1;var h=o.star2attr,u=this.findChild(e,"property/base2/list");h?this.setPorInfo(h,n,u):this.findChild(e,"property/base2").active=!1;var p=o.star3attr,m=this.findChild(e,"property/base3/list");p?this.setPorInfo(p,n,m):this.findChild(e,"property/base3").active=!1},t.prototype.setPorInfo=function(e,t,i){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=e[n],a=cc.instantiate(this.propertyLabelNode);a.parent=i,a.active=!0,a.setPosition(0,0),a.color=t?r.ColorConfig.WhiteColor:r.ColorConfig.GreenColor,a.getComponent(cc.Label).string=l.MagicNameConfig.getDesc(Number(n))+"+"+d.default.formatMagicValue(Number(n),o)}},t.prototype.onClickClose=function(){this.closeView()},o([p(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([u],t)}(a.default);i.default=m,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/ColorConfig":"ColorConfig","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],BaGuaCompoundView:[function(e,t,i){"use strict";cc._RF.push(t,"ad1e24gO2VDm7C+0dyul9Gh","BaGuaCompoundView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/BaGuaComposeConfig"),l=e("../../config/ITemsConfig"),d=e("../../config/ViewConfig"),f=e("../../config/WordConfig"),g=e("../../event/CommonEvent"),h=e("../../manager/RedPointManager"),u=e("../../model/BaGuaModel"),p=e("../../model/ItemInfoModel"),m=e("../../model/RoleInfoModel"),C=e("../../network/SocketClient"),_=e("../../prefab/ItemPrefab"),v=e("../../prefab/RedPointPrefab"),y=e("./BaGuaEquipView"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaFrame=null,t.baguaItem=null,t.equipView=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode(),this.currentTab=Number(this.baguaListNode.children[0].name)},t.prototype.onEnable=function(){this.initView(),this.selectRedPoint(),a.EventManager.instance.on(g.CommonEvent.Event_BaGua_refresh,this.initView,this),a.EventManager.instance.on(g.CommonEvent.Event_BaGua_compound,this.handlerSuccess,this),a.EventManager.instance.on(g.CommonEvent.Event_BaGua_select_equip,this.handlerEquip,this),a.EventManager.instance.on(g.CommonEvent.Event_BaGua_compound,this.refreshBaGuaZhen,this)},t.prototype.refreshBaGuaZhen=function(){this.equipView.initBaGuaZhen(),this.initView()},t.prototype.selectRedPoint=function(){var e=this;this.baguaListNode.children.every(function(t){var i=Number(t.name);return!u.default.getIsCompose(i)||(e.currentTab=i,e.initSelectInfo(e.currentTab),!1)})},t.prototype.initView=function(){this.eyeNode.targetOff(this.eyeNode),this.equipList=new Array,this.initBaGuaZhen(),this.initSelectInfo(this.currentTab),h.default.getInstance().checkRedPointById(h.RedPointId.BaGua)},t.prototype.initFindNode=function(){this.eyeNode=this.findChild(this.baguaFrame,"centre/eye"),this.activateNode=this.findChild(this.baguaFrame,"centre/eye/activate"),this.baguaListNode=this.findChild(this.baguaFrame,"centre/list"),this.tipLabel=this.getChild(this.node,"tip",cc.Label),this.previewNode=this.findChild(this.node,"preview"),this.equipItemNode=this.findChild(this.node,"equipItem"),this.compoundNode=this.findChild(this.node,"compound"),this.batchBtnNode=this.findChild(this.compoundNode,"batchBtn"),this.compoundBtnNode=this.findChild(this.compoundNode,"compoundBtn"),this.listNode=this.findChild(this.compoundNode,"list"),this.activateBtnNode=this.findChild(this.baguaFrame,"centre/activateBtn"),this.previewTip=this.getChild(this.previewNode,"frame/tip",cc.Label),this.previewList=this.findChild(this.previewNode,"frame/list")},t.prototype.initSelectInfo=function(e,t){this.baguaListNode.children.forEach(function(t){t.getChildByName("effect").active=e==Number(t.name)});var i=this.compoundBtnNode.getChildByName("RedPointPrefab").getComponent(v.default),n="bagua_compose_"+e;i.setRedPointIdList([n]);var o=(t=t||m.default.instance.getBaGuaEquipByPos(e))?c.default.getConfigById(t.itemType):void 0;if(this.tipLabel.node.active=void 0==t||void 0==o,this.batchBtnNode.active=!this.tipLabel.node.active,this.tipLabel.string=void 0==t?f.WordConfig.getWord(61562):f.WordConfig.getWord(61563),this.config=o,this.model=t,this.listNode.active=!1,this.initPreview(),void 0!=t&&void 0!=o){var a=o.cost_item;for(var s in this.selectItemCost=[],a)if(Object.prototype.hasOwnProperty.call(a,s)){var r={id:s,count:a[s]};this.selectItemCost.push(r)}this.listNode.active=!0;for(var d=o.equip_num?o.equip_num:0,g=this.listNode.childrenCount>d+this.selectItemCost.length?this.listNode.childrenCount:d+this.selectItemCost.length,u=0;u<g;u++){var C=void 0;u<this.listNode.childrenCount?C=this.listNode.children[u]:((C=cc.instantiate(this.equipItemNode)).parent=this.listNode,C.setPosition(0,0));var _=C.getChildByName("add");C.getChildByName("num").getComponent(cc.Label);if(C.active=u<d+this.selectItemCost.length,C.data={isItem:!1},u<this.selectItemCost.length){_.active=!1,C.targetOff(C);var y=l.ITemsConfig.getITemsConfigById(this.selectItemCost[u].id),b=p.default.getItem(this.selectItemCost[u].id),I=b||y;this.addItem(C,I,!0,this.selectItemCost[u].count,!0),C.data.isItem=!0,C.data.itemId=void 0}else if(C.getChildByName("item").removeAllChildren(),_.active=!0,this.config.need_equip){y=l.ITemsConfig.getITemsConfigById(this.config.need_equip);this.addItem(C,y,!1,1),this.onAddEvent(C,this.onClickSelectEquip.bind(this,C))}}h.default.getInstance().checkRedPointById(h.RedPointId.BaGua),this.onAddEvent(this.batchBtnNode,this.onClickBatch.bind(this)),this.onAddEvent(this.compoundBtnNode,this.onClickCompound.bind(this))}},t.prototype.initPreview=function(){if(this.previewNode.active=!0,this.previewTip.string=void 0==this.model?f.WordConfig.getWord(61580):f.WordConfig.getWord(61581),this.previewTip.node.active=!this.model||!this.config,this.previewList.active=!this.tipLabel.node.active,this.model&&this.config){var e=this.previewList.getChildByName("current").getChildByName("item").getChildByName("ItemPrefab");e||((e=cc.instantiate(this.baguaItem)).parent=this.previewList.getChildByName("current").getChildByName("item")),e.getComponent(_.default).init(this.model);var t=this.previewList.getChildByName("next").getChildByName("item").getChildByName("ItemPrefab");t||((t=cc.instantiate(this.baguaItem)).parent=this.previewList.getChildByName("next").getChildByName("item"));var i=l.ITemsConfig.getITemsConfigById(this.config.get_item);t.getComponent(_.default).init(i)}},t.prototype.initBaGuaZhen=function(){var e=this,t=u.default.skillId;this.activateNode.active=t>0,this.activateBtnNode.active=!1,this.eyeNode.getChildByName("RedPointPrefab").active=!1,this.baguaListNode.children.forEach(function(t){var i=parseInt(t.name),n=m.default.instance.getBaGuaEquipByPos(i),o=t.getChildByName("itemPrefab"),a=t.getChildByName("activate");t.getChildByName("add").active=!1,t.getChildByName("RedPointPrefab").getComponent(v.default).setRedPointIdList([]),a.active=void 0!=n,e.onAddEvent(o,e.onClickItem.bind(e,i,n))})},t.prototype.addItem=function(e,t,i,n,o){void 0===o&&(o=!1),e.targetOff(e);var a,s=e.getChildByName("item").getChildByName("ItemPrefab");s||((s=cc.instantiate(this.baguaItem)).parent=e.getChildByName("item")),e.data={isItem:!1,itemId:t.itemId},s.getComponent(_.default).init(t,i);var r=0;t instanceof l.ITemsConfig?a=o?"0/"+n:0:(a=t.itemCnt+"/"+n,r=t.itemCnt),e.getChildByName("item").getChildByName("ItemPrefab").getComponent(_.default).setNumTxtStr(a),e.getChildByName("item").getChildByName("ItemPrefab").getComponent(_.default).setNumTxtColor(n,r)},t.prototype.onClickItem=function(e,t){this.currentTab=e,this.equipList=new Array,this.initSelectInfo(e,t)},t.prototype.onClickSelectEquip=function(e){var t=this;this.currentNode=e;var i=m.default.instance.getBaGuaEquipListById(this.config.need_equip),n=new Array;i.forEach(function(e){t.equipList.includes(e)||n.push(e)}),s.default.instance.createView(d.default.gameView.BaGuaSelectView,null,n)},t.prototype.onClickCompound=function(){if(this.config)if(this.model){var e=!0,t=!0;this.selectItemCost.every(function(t){var i=p.default.getItem(t.id);return!(!i||i.itemCnt<t.count)||(e=!1,!1)});var i=new Array;if(this.listNode.children.every(function(e){if(e.active&&!e.data.isItem){if(!e.data.itemId)return t=!1,!1;if(e.data.itemId)return i.push(e.data.itemId),!0}return!0}),e&&t){for(var n=new Array,o=this.config.equip_num?this.config.equip_num:0,a=0;a<o;a++){var s=i[a];n.push(Number(s))}this.lastItemType=this.model.itemType,C.default.s_bagua_compose(Number(this.model.itemId),n,this.currentTab)}else f.WordConfig.showWord(61574)}else f.WordConfig.showWord(61574);else f.WordConfig.showWord(61574)},t.prototype.onClickBatch=function(){var e=this,t=m.default.instance.getBaGuaEquipListById(this.config.need_equip),i=0;this.listNode.children.forEach(function(n){var o=i<t.length?t[i]:void 0;!n.data.isItem&&o&&(e.addItem(n,o,!1,1),n.getChildByName("add").active=!1,i++)});var n=this.config.equip_num?this.config.equip_num:0;if(t.length>=n)for(var o=new Array,a=0;a<n;a++){var s=t[a];o.push(Number(s.itemId))}},t.prototype.handlerSuccess=function(){s.default.instance.createView(d.default.gameView.BaGuaCompoundSuccessView,null,this.lastItemType,this.currentTab)},t.prototype.handlerEquip=function(e){this.addItem(this.currentNode,e,!1,1),this.currentNode.getChildByName("add").active=!1,this.equipList.push(e)},o([M(cc.Node)],t.prototype,"baguaFrame",void 0),o([M(cc.Prefab)],t.prototype,"baguaItem",void 0),o([M(y.default)],t.prototype,"equipView",void 0),t=o([I],t)}(r.default);i.default=w,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/BaGuaComposeConfig":"BaGuaComposeConfig","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/BaGuaModel":"BaGuaModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab","./BaGuaEquipView":"BaGuaEquipView"}],BaGuaConversionView:[function(e,t,i){"use strict";cc._RF.push(t,"c8703GsHtdMDakthB6fw/fj","BaGuaConversionView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../config/BaGuaExchangeConfig"),c=e("../../config/ITemsConfig"),l=e("../../config/WordConfig"),d=e("../../event/CommonEvent"),f=e("../../model/ItemInfoModel"),g=e("../../network/SocketClient"),h=e("../../prefab/ItemPrefab"),u=cc._decorator,p=u.ccclass,m=u.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){this.initView(),a.EventManager.instance.on(d.CommonEvent.Event_BaGua_refresh,this.initView,this)},t.prototype.initView=function(){var e=f.default.getItemAmount("B1007");this.resNumLabel.string=cc.js.formatStr(l.WordConfig.getWord(61564),e);for(var t=r.default.getConfigList(),i=this.contentNode.childrenCount>t.length?this.contentNode.childrenCount:t.length,n=0;n<i;n++){var o=void 0;if(n<this.contentNode.childrenCount?o=this.contentNode.children[n]:(o=cc.instantiate(this.shopItemNode)).parent=this.contentNode,o.active=n<t.length,n<t.length){var a=this.findChild(o,"conversionBtn"),s=o.getChildByName("item").getChildByName("ItemPrefab"),d=o.getChildByName("much").getComponent(cc.Label);for(var g in t[n].cost)if(Object.prototype.hasOwnProperty.call(t[n].cost,g)){var u=t[n].cost[g];d.string=u}s||((s=cc.instantiate(this.baguaItem)).parent=o.getChildByName("item"));var p=c.ITemsConfig.getITemsConfigById(t[n].item_id);s.getComponent(h.default).init(p,!0),this.onAddEvent(a,this.onClickConversion.bind(this,t[n]))}}},t.prototype.initFindNode=function(){this.shopItemNode=this.findChild(this.node,"shopItem"),this.contentNode=this.findChild(this.node,"scrollView/view/content"),this.resNumLabel=this.getChild(this.node,"resource/num",cc.RichText)},t.prototype.onClickConversion=function(e){var t,i;for(var n in e.cost)Object.prototype.hasOwnProperty.call(e.cost,n)&&(t=e.cost[n],i=n);f.default.getItemAmount(i)>=t?g.default.s_exchange_item(e.id):l.WordConfig.showWord(60188)},o([m(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([p],t)}(s.default);i.default=C,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/BaGuaExchangeConfig":"BaGuaExchangeConfig","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],BaGuaEquipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"0dcb4c9lCRH/bUuT2IbcNmd","BaGuaEquipConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/RoleInfoModel"),a=e("./DefaultConfig"),s=e("./GameConst"),r=e("./JsonConfigBase"),c=e("./MagicNameConfig"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.nameList=new Array,this.nameMap=new Map,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=i,t.configMap.set(o.id,o)});var i=a.DefaultConfig.getConfigById(130).value;for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var o=i[n];this.nameMap.set(Number(n),o),this.nameList.push(Number(n))}},t.getConfigById=function(e){return this.configMap.get(e)},t.getNameConfigByPos=function(e){return this.nameMap.get(e)},t.getPosList=function(){return this.nameList},t.getPower=function(e){var t=0;if(e)for(var i in e)if(e[i]>0){var n=parseInt(i),a=e[i],r=0;n==c.MagicNameConfig.MagicId.atk||n==c.MagicNameConfig.MagicId.mag||n==c.MagicNameConfig.MagicId.spt?o.default.instance.occupation==s.GameConst.OCCUPATION.ZHAN_SHI&&n==c.MagicNameConfig.MagicId.atk?r=c.MagicNameConfig.getZhanLi(n,a):o.default.instance.occupation==s.GameConst.OCCUPATION.FA_SHI&&n==c.MagicNameConfig.MagicId.mag?r=c.MagicNameConfig.getZhanLi(n,a):o.default.instance.occupation==s.GameConst.OCCUPATION.DAO_SHI&&n==c.MagicNameConfig.MagicId.spt&&(r=c.MagicNameConfig.getZhanLi(n,a)):r=c.MagicNameConfig.getZhanLi(n,a),t+=r}return t},t.getBaGuaEquipPower=function(e){var t=0;return t+=this.getPower(e.attr),t+=this.getPower(e.star1attr),t+=this.getPower(e.star2attr),t+=this.getPower(e.star3attr),Math.ceil(t)},t.Config_Name="baguaequipConfig",t.configMap=new Map,t}(r.JsonConfigBase);i.default=l,cc._RF.pop()},{"../model/RoleInfoModel":"RoleInfoModel","./DefaultConfig":"DefaultConfig","./GameConst":"GameConst","./JsonConfigBase":"JsonConfigBase","./MagicNameConfig":"MagicNameConfig"}],BaGuaEquipContrastView:[function(e,t,i){"use strict";cc._RF.push(t,"11665NV/2BO37LrS3Do5/37","BaGuaEquipContrastView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/Logger"),s=e("../../../engine/ResourcesManager"),r=e("../../../engine/UIManager"),c=e("../../../engine/ViewBase"),l=e("../../config/BaGuaEquipConfig"),d=e("../../config/BaGuaSuitConfig"),f=e("../../config/ColorConfig"),g=e("../../config/GameConst"),h=e("../../config/MagicNameConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../model/BaGuaModel"),C=e("../../model/MagicModel"),_=e("../../model/RoleInfoModel"),v=e("../../prefab/ItemPrefab"),y=cc._decorator,b=y.ccclass,I=y.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onInitChild=function(e){this.setTopUI(),this.model=e,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.normalPanelNode=this.findChild(this.node,"normalPanel"),this.btnWearNode=this.findChild(this.node,"normalPanel/node2/btnWear"),this.suitNode=this.findChild(this.node,"normalPanel/suit"),this.starNode=this.findChild(this.node,"normalPanel/star")},t.prototype.initView=function(){var e=l.default.getConfigById(this.model.itemType),t=_.default.instance.getBaGuaEquipByPos(e.pos);this.initInfo(this.normalPanelNode.getChildByName("node1"),t.getConfig()),this.initInfo(this.normalPanelNode.getChildByName("node2"),this.model.getConfig()),this.onAddEvent(this.btnWearNode,this.onClickUser.bind(this))},t.prototype.initInfo=function(e,t){var i=this,n=e.getChildByName("item"),o=e.getChildByName("quality").getComponent(cc.Sprite),a=this.getChild(e,"power/num",cc.Label),r=l.default.getConfigById(t.id),c=this.findChild(e,"scrollView/view/content/baseContent"),g=this.findChild(e,"scrollView/view/content/baseContent/txtDesc"),u=this.getChild(e,"scrollView/view/content/suitContent/txtDesc",cc.RichText),y=this.findChild(e,"scrollView/view/content/suitContent"),b=cc.instantiate(this.baguaItem);b.parent=n,b.getComponent(v.default).init(t,!1);var I=cc.js.formatStr("texture/bagua/img_bazhentu_tips_xiao_%s",t.quality);s.default.instance.loadSprite(o,I,!1),a.string=this.model.fight.toString();for(var M in r.attr)if(Object.prototype.hasOwnProperty.call(r.attr,M)){var w=r.attr[M],k=void 0;0<c.childrenCount?k=c.children[0]:(k=cc.instantiate(g)).parent=c,k.getComponent(cc.RichText).string=cc.js.formatStr("<color=#ffd87d>%s:</c><color=#ffffff>%s</color>",h.MagicNameConfig.getDesc(Number(M)),C.default.formatMagicValue(Number(M),w))}var S=d.default.getSuitArrByPos(r.pos),P="",E=this.model.gridId>-1;S.forEach(function(e){var t=l.default.getNameConfigByPos(e),i=void 0!=_.default.instance.getBaGuaEquipByPos(e)?f.ColorConfig.GreenHexColor:f.ColorConfig.WhiteHexColor;E||(i=f.ColorConfig.WhiteHexColor),P+=cc.js.formatStr("<color=%s>%s   </c>",i,t)}),u.string=P;var L=d.default.getSuitTypeByPos(r.pos);m.default.getsuitData(r.lev,L,E).forEach(function(e){var t=e.config,n=cc.instantiate(i.suitNode);n.parent=y,n.setPosition(0,0),n.active=!0;var o=n.getChildByName("name").getComponent(cc.Label),a=n.getChildByName("txtDefaultValue");o.string=cc.js.formatStr(p.WordConfig.getWord(61576),t.num),o.node.color=e.isValid?f.ColorConfig.GreenColor:f.ColorConfig.WhiteColor;for(var s in t.attr)if(Object.prototype.hasOwnProperty.call(t.attr,s)){var r=t.attr[s],c=void 0;1<n.childrenCount?c=n.children[1]:(c=cc.instantiate(a)).parent=n,c.getComponent(cc.Label).string=h.MagicNameConfig.getDesc(Number(s))+"+"+C.default.formatMagicValue(Number(s),r),c.color=e.isValid?f.ColorConfig.GreenColor:f.ColorConfig.WhiteColor}});var T=this.findChild(e,"scrollView/view/content");if(r.star1attr){var R=cc.instantiate(this.starNode);R.parent=T,R.setPosition(-128,0),R.active=!0,this.setStarInfo(R,r.star1attr,r.star1name)}if(r.star2attr){var N=cc.instantiate(this.starNode);N.parent=T,N.setPosition(-128,0),N.active=!0,this.setStarInfo(N,r.star2attr,r.star2name)}if(r.star3attr){var B=cc.instantiate(this.starNode);B.parent=T,B.setPosition(-128,0),B.active=!0,this.setStarInfo(B,r.star3attr,r.star3name)}},t.prototype.setStarInfo=function(e,t,i){var n=this.getChild(e,"tip/text",cc.Label),o=e.getChildByName("content"),a=o.getChildByName("txtDesc");for(var s in n.string=i,t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=t[s],c=void 0;0<o.childrenCount?c=o.children[0]:(c=cc.instantiate(a)).parent=o,c.getComponent(cc.Label).string=h.MagicNameConfig.getDesc(Number(s))+"+"+C.default.formatMagicValue(Number(s),r)}},t.prototype.onClickUser=function(){if(this.model.gridId<0){a.Logger.log("BaguaEqItemInfo=============22===",this.model);var e=l.default.getConfigById(this.model.itemType);_.default.instance.addBaGuaEquipByPos(e.pos,this.model.itemId)==g.ADD_EQ.SUCCESS&&this.closeView()}else _.default.instance.removeEquip(this.model.gridId),this.closeView();r.default.instance.closeView(u.default.gameView.BaGuaEquipInfoView)},o([I(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([b],t)}(c.default);i.default=M,cc._RF.pop()},{"../../../engine/Logger":"Logger","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/BaGuaSuitConfig":"BaGuaSuitConfig","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/MagicNameConfig":"MagicNameConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/BaGuaModel":"BaGuaModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],BaGuaEquipInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"39629GkDoNIV6el01w8lgcc","BaGuaEquipInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/Logger"),s=e("../../../engine/ResourcesManager"),r=e("../../../engine/UIManager"),c=e("../../../engine/ViewBase"),l=e("../../config/BaGuaEquipConfig"),d=e("../../config/BaGuaSuitConfig"),f=e("../../config/ColorConfig"),g=e("../../config/GameConst"),h=e("../../config/ITemsConfig"),u=e("../../config/MagicNameConfig"),p=e("../../config/ViewConfig"),m=e("../../config/WordConfig"),C=e("../../model/BaGuaModel"),_=e("../../model/ItemInfoModel"),v=e("../../model/MagicModel"),y=e("../../model/RoleInfoModel"),b=e("../../network/SocketClient"),I=e("../../prefab/ItemPrefab"),M=e("../../utils/UIHelper"),w=e("../../event/CommonEvent"),k=e("../../../engine/EventManager"),S=cc._decorator,P=S.ccclass,E=S.property,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onInitChild=function(e,t,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1),this.setTopUI(),this.config=e,this.isModel=i,this.model=t,this.justShow=n,this.isEquipNow=o,this.initFindNode(),this.initView(),this.justShowFun(),k.EventManager.instance.on(w.CommonEvent.Event_BaGua_select_equip,this.closeView,this)},t.prototype.justShowFun=function(){this.bottomNode.active=this.bottomNode.active&&!this.justShow},t.prototype.initFindNode=function(){this.qualityEffect=this.getChild(this.node,"frame/top/pnlType/qualityEffect",cc.Sprite),this.nameLabel=this.getChild(this.node,"frame/top/name",cc.Label),this.itemNode=this.findChild(this.node,"frame/top/pnlType/item"),this.posLabel=this.getChild(this.node,"frame/top/pnlType/title/pos/text",cc.Label),this.occupationLabel=this.getChild(this.node,"frame/top/pnlType/title/occupation/text",cc.Label),this.qualityLabel=this.getChild(this.node,"frame/top/pnlType/title/quality/text",cc.Label),this.powerLabel=this.getChild(this.node,"frame/top/pnlType/power/text",cc.Label),this.baseContentNode=this.findChild(this.node,"frame/mid/baseContent"),this.baseProLabel=this.getChild(this.node,"frame/mid/baseContent/txtDesc",cc.RichText),this.suitNameLabel=this.getChild(this.node,"frame/mid/suitContent/txtDesc",cc.RichText),this.suitContentNode=this.findChild(this.node,"frame/mid/suitContent"),this.suitNode=this.findChild(this.node,"frame/mid/suit"),this.starNode=this.findChild(this.node,"frame/star"),this.bottomNode=this.findChild(this.node,"frame/bottom"),this.userNode=this.findChild(this.node,"frame/bottom/bottom/user"),this.lockNode=this.findChild(this.node,"frame/bottom/bottom/lock"),this.btnReplace=this.findChild(this.node,"frame/bottom/bottom/btnReplace"),this.zhanshiNode=this.findChild(this.node,"frame/bottom/bottom/zhanshibtn"),this.btnCompared=this.findChild(this.node,"frame/top/btnCompared"),this.btnClose=this.findChild(this.node,"frame/top/btnClose")},t.prototype.initView=function(){var e=this,t=this.itemNode.getChildByName("ItemPrefab"),i=h.ITemsConfig.getITemsConfigById(this.config.id);this.model=this.isModel?this.model:_.default.createBaGuaEquip(i.id),t||((t=cc.instantiate(this.baguaItem)).parent=this.itemNode),t.getComponent(I.default).init(this.model,!1);var n=cc.js.formatStr("texture/bagua/img_bazhentu_tips_%s",i.quality);s.default.instance.loadSprite(this.qualityEffect,n,!1),this.nameLabel.string=i.name,this.posLabel.string=l.default.getNameConfigByPos(this.config.pos),M.UIHelper.formatRoleOccupation(this.occupationLabel,i.pro),this.qualityLabel.string=cc.js.formatStr(m.WordConfig.getWord(61575),this.config.lev,this.config.star),this.powerLabel.string=this.model.fight.toString();var o=0;for(var a in this.config.attr)if(Object.prototype.hasOwnProperty.call(this.config.attr,a)){var c=this.config.attr[a],g=void 0;o<this.baseContentNode.childrenCount?g=this.baseContentNode.children[o]:(g=cc.instantiate(this.baseProLabel.node)).parent=this.baseContentNode,o++,g.active=!0,g.getComponent(cc.RichText).string=cc.js.formatStr("<color=#ffd87d>%s:</c><color=#ffffff>%s</color>",u.MagicNameConfig.getDesc(Number(a)),v.default.formatMagicValue(Number(a),c))}var b=d.default.getSuitArrByPos(this.config.pos),S="",P=this.model.gridId>-1;b.forEach(function(e){var t=l.default.getNameConfigByPos(e),i=void 0!=y.default.instance.getBaGuaEquipByPos(e)?f.ColorConfig.GreenHexColor:f.ColorConfig.WhiteHexColor;P||(i=f.ColorConfig.WhiteHexColor),S+=cc.js.formatStr("<color=%s>%s   </c>",i,t)}),this.suitNameLabel.string=S;var E=d.default.getSuitTypeByPos(this.config.pos);C.default.getsuitData(this.config.lev,E,P).forEach(function(t){var i=t.config,n=cc.instantiate(e.suitNode);n.parent=e.suitContentNode,n.active=!0;var o=n.getChildByName("name").getComponent(cc.Label),a=n.getChildByName("txtDefaultValue");o.string=cc.js.formatStr(m.WordConfig.getWord(61576),i.num),o.node.color=t.isValid?f.ColorConfig.GreenColor:f.ColorConfig.WhiteColor;for(var s in i.attr)if(Object.prototype.hasOwnProperty.call(i.attr,s)){var r=i.attr[s],c=void 0;1<n.childrenCount?c=n.children[1]:(c=cc.instantiate(a)).parent=n,c.getComponent(cc.Label).string=u.MagicNameConfig.getDesc(Number(s))+"+"+v.default.formatMagicValue(Number(s),r),c.color=t.isValid?f.ColorConfig.GreenColor:f.ColorConfig.WhiteColor}});var L=this.findChild(this.node,"frame/mid");if(this.config.star1attr){var T=cc.instantiate(this.starNode);T.parent=L,T.active=!0,T.setPosition(0,0),this.setStarInfo(T,this.config.star1attr,this.config.star1name)}if(this.config.star2attr){var R=cc.instantiate(this.starNode);R.parent=L,R.active=!0,R.setPosition(0,0),this.setStarInfo(R,this.config.star2attr,this.config.star2name)}if(this.config.star3attr){var N=cc.instantiate(this.starNode);N.parent=L,N.active=!0,N.setPosition(0,0),this.setStarInfo(N,this.config.star3attr,this.config.star3name)}this.onAddEvent(this.btnClose,this.closeView.bind(this)),this.bottomNode.active=this.isModel;var B=y.default.instance.getBaGuaEquipByPos(this.config.pos);this.btnCompared.active=this.isModel&&B&&this.model.itemId!=B.itemId&&0==this.model.isExhibition&&!this.justShow,this.userNode.active=this.userNode.active&&0==this.model.isExhibition,this.lockNode.active=this.lockNode.active&&0==this.model.isExhibition,this.zhanshiNode.active=1==this.model.isExhibition,this.findChild(this.node,"frame/bottom/bottom/line").active=2!=this.model.isExhibition,this.onAddEvent(this.btnClose,this.closeView.bind(this)),this.isModel&&(this.userNode.getChildByName("down").active=C.default.getIsEquipByItemId(this.model.itemId),this.userNode.getChildByName("up").active=!C.default.getIsEquipByItemId(this.model.itemId),this.lockNode.getChildByName("open").active=!this.model.isLock,this.lockNode.getChildByName("close").active=this.model.isLock,this.onAddEvent(this.userNode,this.onClickUser.bind(this)),this.onAddEvent(this.lockNode,this.onClickLock.bind(this)),this.onAddEvent(this.btnCompared,this.onCompared.bind(this)),this.onAddEvent(this.zhanshiNode,function(){e.model.itemname=e.nameLabel.string,k.EventManager.instance.dispatch(w.CommonEvent.Event_ADD_ZHANSHI,e.model),e.closeView()}),this.lockNode.active=!this.isEquipNow,this.btnReplace.active=this.isEquipNow,this.onAddEvent(this.btnReplace,function(){var t=y.default.instance.getBaGuaItemListByPos(e.config.pos);r.default.instance.createView(p.default.gameView.BaGuaSelectView,null,t)}))},t.prototype.setStarInfo=function(e,t,i){var n=0,o=this.getChild(e,"tip/text",cc.Label),a=e.getChildByName("content"),s=a.getChildByName("txtDesc");for(var r in o.string=i,t)if(Object.prototype.hasOwnProperty.call(t,r)){var c=t[r],l=void 0;n<a.childrenCount?l=a.children[n]:(l=cc.instantiate(s)).parent=a,n++,l.active=!0,l.getComponent(cc.Label).string=u.MagicNameConfig.getDesc(Number(r))+"+"+v.default.formatMagicValue(Number(r),c)}},t.prototype.onClickUser=function(){this.model.gridId<0?(a.Logger.log("BaguaEqItemInfo=============22===",this.model,this.config),y.default.instance.addBaGuaEquipByPos(this.config.pos,this.model.itemId)==g.ADD_EQ.SUCCESS&&this.closeView()):(y.default.instance.removeBaGuaEquip(this.config.pos,this.model.itemId),this.closeView())},t.prototype.onClickLock=function(){this.model.isLock=!this.model.isLock,a.Logger.log("onLock====",this.model),b.default.s_equip_lock(this.model.itemId,this.model.isLock),this.closeView()},t.prototype.onCompared=function(){r.default.instance.createView(p.default.gameView.BaGuaEquipContrastView,null,this.model)},o([E(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([P],t)}(c.default);i.default=L,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/BaGuaSuitConfig":"BaGuaSuitConfig","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/BaGuaModel":"BaGuaModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/UIHelper":"UIHelper"}],BaGuaEquipView:[function(e,t,i){"use strict";cc._RF.push(t,"d9c3dEeTtVHz44hhDaBnHxu","BaGuaEquipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/BaGuaEquipConfig"),l=e("../../config/BaGuaSkillConfig"),d=e("../../config/GameConst"),f=e("../../config/ViewConfig"),g=e("../../event/CommonEvent"),h=e("../../manager/RedPointManager"),u=e("../../model/BaGuaModel"),p=e("../../model/RoleInfoModel"),m=e("../../prefab/ItemPrefab"),C=e("../../prefab/RedPointPrefab"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaFrame=null,t.baguaItem=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(g.CommonEvent.Event_BaGua_select_equip,this.handlerEquip,this),a.EventManager.instance.on(d.EVENT_NAME.BAG_CUT,this.initView,this),a.EventManager.instance.on(g.CommonEvent.Event_BaGua_refresh,this.initView,this),this.initView()},t.prototype.initFindNode=function(){this.eyeNode=this.findChild(this.baguaFrame,"centre/eye"),this.activateNode=this.findChild(this.baguaFrame,"centre/eye/activate"),this.levelNode=this.findChild(this.baguaFrame,"centre/level"),this.levelLabel=this.getChild(this.baguaFrame,"centre/level/name",cc.Label),this.listNode=this.findChild(this.baguaFrame,"centre/list"),this.activateBtnNode=this.findChild(this.baguaFrame,"centre/activateBtn"),this.powerLabel=this.getChild(this.node,"power/layout/num",cc.Label)},t.prototype.initView=function(){this.powerLabel.string=u.default.power.toString(),this.listNode.children.forEach(function(e){e.getChildByName("itemPrefab").removeAllChildren()}),this.initBaGuaZhen(),h.default.getInstance().checkRedPointById(h.RedPointId.BaGua)},t.prototype.initBaGuaZhen=function(){var e=this,t=u.default.skillId,i=l.default.getConfigById(t);this.eyeNode.getChildByName("RedPointPrefab").active=!0,this.activateNode.active=i.skillLev>0,this.levelNode.active=i.skillLev>0,this.activateBtnNode.active=i.skillLev<=0,this.levelLabel.string="lv."+i.skillLev,this.listNode.children.forEach(function(t){var i=parseInt(t.name),n=p.default.instance.getBaGuaEquipByPos(i),o=t.getChildByName("itemPrefab"),a=t.getChildByName("add"),s=t.getChildByName("effect"),r=t.getChildByName("activate"),c=o.getChildByName("ItemPrefab"),l=p.default.instance.getBaGuaItemListByPos(i),d="bagua_equip_"+i;if(t.getChildByName("RedPointPrefab").getComponent(C.default).setRedPointIdList([d]),!c&&n&&((c=cc.instantiate(e.baguaItem)).parent=o),n&&c){var f=u.default.getStrengthenByPos(i),g=f?"+"+f.value:"+0";c.getComponent(m.default).init(n,!1),c.getComponent(m.default).setNumTxtStr(g)}r.active=void 0!=n,a.active=!n&&l.length>0,s.active=void 0!=n,e.onAddEvent(o,e.onClickItem.bind(e,n,a.active,l))}),this.onAddEvent(this.activateBtnNode,this.onClickActivate.bind(this)),this.onAddEvent(this.eyeNode,this.onClickSkillInfo.bind(this))},t.prototype.onClickActivate=function(){s.default.instance.createView(f.default.gameView.BaGuaLevelView)},t.prototype.onClickSkillInfo=function(){s.default.instance.createView(f.default.gameView.BaGuaLevelView)},t.prototype.onClickItem=function(e,t,i){if(!e&&t)s.default.instance.createView(f.default.gameView.BaGuaSelectView,null,i);else if(e){var n=c.default.getConfigById(e.itemType);s.default.instance.createView(f.default.gameView.BaGuaEquipInfoView,null,n,e,!0,!1,!0)}},t.prototype.handlerEquip=function(e){var t=c.default.getConfigById(e.itemType);p.default.instance.addBaGuaEquipByPos(t.pos,e.itemId)},o([y(cc.Node)],t.prototype,"baguaFrame",void 0),o([y(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([v],t)}(r.default);i.default=b,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/BaGuaSkillConfig":"BaGuaSkillConfig","../../config/GameConst":"GameConst","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/BaGuaModel":"BaGuaModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab"}],BaGuaExchangeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"78aad3/sq9PlYZSqGN6+fjj","BaGuaExchangeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configList=new Array,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o),t.configList.push(o)}),this.configList.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfigList=function(){return this.configList},t.Config_Name="baguaexchangeConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],BaGuaIntensifyView:[function(e,t,i){"use strict";cc._RF.push(t,"0c48aVGd4NOIatg+2CmDebT","BaGuaIntensifyView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/BaGuaEquipConfig"),l=e("../../config/BaGuaStrongConfig"),d=e("../../config/ColorConfig"),f=e("../../config/ITemsConfig"),g=e("../../config/MagicNameConfig"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=e("../../event/CommonEvent"),m=e("../../manager/RedPointManager"),C=e("../../model/BaGuaModel"),_=e("../../model/ItemInfoModel"),v=e("../../model/MagicModel"),y=e("../../model/RoleInfoModel"),b=e("../../network/SocketClient"),I=e("../../prefab/RedPointPrefab"),M=e("./BaGuaEquipView"),w=e("./BaGuaView"),k=cc._decorator,S=k.ccclass,P=k.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaFrame=null,t.equipView=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode(),this.currentTab=Number(this.listNode.children[0].name)},t.prototype.onEnable=function(){this.initView(),this.selectRedPoint(),a.EventManager.instance.on(p.CommonEvent.Event_BaGua_refresh,this.initView,this),a.EventManager.instance.on(p.CommonEvent.Event_BaGua_Intensify,this.refreshBaGuaZhen,this)},t.prototype.refreshBaGuaZhen=function(){this.equipView.initBaGuaZhen(),this.initView()},t.prototype.selectRedPoint=function(){var e=this;this.listNode.children.every(function(t){var i=Number(t.name),n=C.default.getIsStrengByPos(i),o=C.default.getIsRefineByPos(i);return!n&&!o||(e.currentTab=i,e.initSelectInfo(e.currentTab),!1)})},t.prototype.initView=function(){this.eyeNode.targetOff(this.eyeNode),this.initBaGuaZhen(),this.initSelectInfo(this.currentTab),m.default.getInstance().checkRedPointById(m.RedPointId.BaGua)},t.prototype.initBaGuaZhen=function(){var e=this,t=C.default.skillId;this.activateNode.active=t>0,this.activateBtnNode.active=!1,this.eyeNode.getChildByName("RedPointPrefab").active=!1,this.listNode.children.forEach(function(t){var i=parseInt(t.name),n=y.default.instance.getBaGuaEquipByPos(i),o=t.getChildByName("itemPrefab"),a=t.getChildByName("activate");t.getChildByName("add").active=!1;var s="bagua_strengthen_"+i;t.getChildByName("RedPointPrefab").getComponent(I.default).setRedPointIdList([s]),a.active=void 0!=n,e.onAddEvent(o,e.onClickItem.bind(e,i))})},t.prototype.initFindNode=function(){this.eyeNode=this.findChild(this.baguaFrame,"centre/eye"),this.activateNode=this.findChild(this.baguaFrame,"centre/eye/activate"),this.listNode=this.findChild(this.baguaFrame,"centre/list"),this.nameTextLabel=this.getChild(this.node,"name/text",cc.Label),this.intensifyBtnNode=this.findChild(this.node,"intensifyBtn"),this.throughBtn=this.findChild(this.node,"throughBtn"),this.curentPropertyLabel=this.getChild(this.node,"layout/property/current",cc.Label),this.addPropertyLabel=this.getChild(this.node,"layout/property/add",cc.Label),this.btnLevelNode=this.findChild(this.node,"btnLevel"),this.btnLevelLabel=this.getChild(this.btnLevelNode,"level",cc.Label),this.muchNode=this.findChild(this.node,"much"),this.muchLabel=this.getChild(this.node,"much/num",cc.Label),this.muchNameLabel=this.getChild(this.node,"much/name",cc.Label),this.arrowNode=this.findChild(this.node,"layout/property/arrow"),this.activateBtnNode=this.findChild(this.baguaFrame,"centre/activateBtn"),this.levelMaxNode=this.findChild(this.node,"levelMax")},t.prototype.initSelectInfo=function(e){this.listNode.children.forEach(function(t){t.getChildByName("effect").active=e==Number(t.name)});var t=this.btnLevelNode.getChildByName("RedPointPrefab").getComponent(I.default),i="bagua_refine_"+e;t.setRedPointIdList([i]);var n=this.node.getChildByName("RedPointPrefab").getComponent(I.default),o="bagua_strengthen_"+e;n.setRedPointIdList([o]);var a,s,r=C.default.getStrengthenByPos(e),h=C.default.getRefineByPos(e),p=l.default.getConfig(e,r.value),y=p.cost?p.cost:p.cost10;if(y)for(var b in y)if(Object.prototype.hasOwnProperty.call(y,b)){s=y[b],a=b;break}var M=f.ITemsConfig.getITemsConfigById(a),w=_.default.getItem(a);for(var b in this.intensifyBtnNode.active=void 0!=p.cost,this.throughBtn.active=void 0!=p.cost10,this.muchNode.active=void 0!=y,this.arrowNode.active=void 0!=y,this.addPropertyLabel.node.active=void 0!=y,this.levelMaxNode.active=void 0==y,this.nameTextLabel.string=cc.js.formatStr(u.WordConfig.getWord(61559),c.default.getNameConfigByPos(e)),p.attr)if(Object.prototype.hasOwnProperty.call(p.attr,b)){var k=p.attr[b];this.curentPropertyLabel.string=g.MagicNameConfig.getDesc(Number(b))+"+"+v.default.formatMagicValue(Number(b),k)}if(this.btnLevelLabel.string=u.WordConfig.getWord(60497)+h.value,y){var S=l.default.getConfig(e,r.value+1);for(var b in S.attr)if(Object.prototype.hasOwnProperty.call(S.attr,b)){k=S.attr[b];this.addPropertyLabel.string="+"+k}this.muchNameLabel.string=cc.js.formatStr(u.WordConfig.getWord(61561),M.name);var P=w?w.itemCnt:0;this.muchLabel.string="("+P+"/"+s+")",this.muchLabel.node.color=P>=s?d.ColorConfig.GreenColor:d.ColorConfig.RedColor,this.onAddEvent(this.intensifyBtnNode,this.onClickStrengthen.bind(this,p.id,!0)),this.onAddEvent(this.throughBtn,this.onClickStrengthen.bind(this,p.id,!1))}m.default.getInstance().checkRedPointById(m.RedPointId.BaGua),this.onAddEvent(this.btnLevelNode,this.onClickRefine.bind(this))},t.prototype.onClickItem=function(e){this.currentTab=e,this.initSelectInfo(e)},t.prototype.onClickStrengthen=function(e,t){t?b.default.s_strengthen(e):s.default.instance.createView(h.default.gameView.BaGuaStrengthenView,null,w.BaGuaIntensiftType.Strengthen,this.currentTab)},t.prototype.onClickRefine=function(){s.default.instance.createView(h.default.gameView.BaGuaStrengthenView,null,w.BaGuaIntensiftType.Refine,this.currentTab)},o([P(cc.Node)],t.prototype,"baguaFrame",void 0),o([P(M.default)],t.prototype,"equipView",void 0),t=o([S],t)}(r.default);i.default=E,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/BaGuaStrongConfig":"BaGuaStrongConfig","../../config/ColorConfig":"ColorConfig","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/BaGuaModel":"BaGuaModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/RedPointPrefab":"RedPointPrefab","./BaGuaEquipView":"BaGuaEquipView","./BaGuaView":"BaGuaView"}],BaGuaLevelView:[function(e,t,i){"use strict";cc._RF.push(t,"503982n3lhJtaDs6w8AlQXp","BaGuaLevelView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/BaGuaSkillConfig"),r=e("../../config/ColorConfig"),c=e("../../config/ITemsConfig"),l=e("../../config/SkillConfig"),d=e("../../config/WordConfig"),f=e("../../model/BaGuaModel"),g=e("../../model/ItemInfoModel"),h=e("../../network/SocketClient"),u=e("../../prefab/ItemPrefab"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode()},t.prototype.onEnable=function(){this.setTopUI(),this.initView()},t.prototype.initFindNode=function(){this.levelLabel=this.getChild(this.node,"frame/level",cc.Label),this.descFrameNode=this.findChild(this.node,"frame/descFrame"),this.condition=this.getChild(this.node,"frame/condition",cc.RichText),this.layoutNode=this.findChild(this.node,"frame/layout"),this.itemListNode=this.findChild(this.layoutNode,"itemList"),this.btnLevelNode=this.findChild(this.node,"frame/btnLevel"),this.levelMaxNode=this.findChild(this.node,"frame/levelMax")},t.prototype.initView=function(){var e=f.default.skillId,t=s.default.getConfigById(e),i=s.default.getConfigById(t.nextid),n=l.SkillConfig.getConfigById(t.id.toString());if(this.config=t,this.condition.node.active=void 0!=i,this.btnLevelNode.active=void 0!=i,this.levelMaxNode.active=!this.btnLevelNode.active,this.descFrameNode.children[1].active=void 0!=i,this.layoutNode.active=void 0!=i,this.setInfo(this.descFrameNode.children[0],n),this.levelLabel.string=d.WordConfig.getWord(61596)+t.skillLev,i){var o=l.SkillConfig.getConfigById(i.id.toString());this.setInfo(this.descFrameNode.children[1],o);var a=f.default.getEquipCountByLev(t.lev),h=a>=8?r.ColorConfig.GreenHexColor:r.ColorConfig.RedHexColor;for(var p in this.condition.string=cc.js.formatStr(d.WordConfig.getWord(61566),t.lev,h,a),t.cost)if(Object.prototype.hasOwnProperty.call(t.cost,p)){var m=t.cost[p],C=cc.instantiate(this.baguaItem);C.parent=this.itemListNode,C.setPosition(0,0);var _=c.ITemsConfig.getITemsConfigById(p),v=g.default.getItemAmount(p),y=v+"/"+m;C.getComponent(u.default).init(_,!0),C.getComponent(u.default).setNumTxtStr(y),C.getComponent(u.default).setNumTxtColor(m,v)}this.onAddEvent(this.btnLevelNode,this.onClickLevel.bind(this))}},t.prototype.setInfo=function(e,t){e.getChildByName("desc").getComponent(cc.Label).string=t.desc},t.prototype.onClickLevel=function(){var e=!1;for(var t in this.config.cost)if(Object.prototype.hasOwnProperty.call(this.config.cost,t)){e=!1;var i=this.config.cost[t];g.default.getItemAmount(t)>=i&&(e=!0)}e?f.default.getEquipCountByLev(this.config.lev)<8?d.WordConfig.showWord(61574):(h.default.s_baguatu_skill_up(this.config.id),this.closeView()):d.WordConfig.showWord(60117)},o([C(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([m],t)}(a.default);i.default=_,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/BaGuaSkillConfig":"BaGuaSkillConfig","../../config/ColorConfig":"ColorConfig","../../config/ITemsConfig":"ITemsConfig","../../config/SkillConfig":"SkillConfig","../../config/WordConfig":"WordConfig","../../model/BaGuaModel":"BaGuaModel","../../model/ItemInfoModel":"ItemInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],BaGuaModel:[function(e,t,i){"use strict";cc._RF.push(t,"7e6a8o2JFpITJoqeZcBXZj/","BaGuaModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/BaGuaComposeConfig"),c=e("../config/BaGuaEquipConfig"),l=e("../config/BaGuaRefineConfig"),d=e("../config/BaGuaSkillConfig"),f=e("../config/BaGuaStrongConfig"),g=e("../config/BaGuaSuitConfig"),h=e("../config/DevilSealConfig"),u=e("../config/WordConfig"),p=e("../event/CommonEvent"),m=e("../manager/RedPointManager"),C=e("./ItemInfoModel"),_=e("./RoleInfoModel"),v=function(){return function(){}}();i.StrengthenData=v;var y=function(){return function(){}}();i.SuitModel=y;var b=function(){return function(){}}();i.SuitData=b;var I=function(){return function(){}}();i.Devilinfo=I;var M=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[m.RedPointId.BaGua,m.RedPointId.BaGua_Equip,m.RedPointId.BaGua_Intensify,m.RedPointId.BaGua_Skill,m.RedPointId.BaGua_Star],this.protos=[a.ProtoConfig.c_baguatu_info,a.ProtoConfig.c_strengthen,a.ProtoConfig.c_refine,a.ProtoConfig.c_baguatu_skill_up,a.ProtoConfig.c_bagua_compose,a.ProtoConfig.c_reback_item,a.ProtoConfig.c_update_baghouse_item,a.ProtoConfig.c_update_item_info,a.ProtoConfig.c_req_gossip_boss_info],m.default.getInstance().addHandler(this)}return e.proto2Model=function(t){this.model=this.model?this.model:new e;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_baguatu_info,t),r=i.getStrengthenList();for(var c in this.strengthenList=new Array,r)if(Object.prototype.hasOwnProperty.call(r,c)){var l=r[c];(u=new v).id=l.getId(),u.value=l.getValue(),this.strengthenList.push(u)}var d=i.getRefineList();for(var c in this.refineList=new Array,d)if(Object.prototype.hasOwnProperty.call(d,c)){var f=d[c];(u=new v).id=f.getId(),u.value=f.getValue(),this.refineList.push(u)}this.suitListMap=new Map;var g=i.getSuitListList();for(var c in g)if(Object.prototype.hasOwnProperty.call(g,c)){var h=g[c],u=new y;for(var m in u.id=h.getId(),u.lsit=new Array,h.getSuitIdList())if(Object.prototype.hasOwnProperty.call(h.getSuitIdList(),m)){var C=h.getSuitIdList()[m];u.lsit.push(C.getId())}u.lsit.sort(function(e,t){return e-t}),this.suitListMap.set(u.id,u)}this.power=i.getFight(),this.skillId=i.getSkillId(),o.Logger.log("c_baguatu_info=====",i),n.EventManager.instance.dispatch(p.CommonEvent.Event_BaGua_refresh)},e.protoStrengthen=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_strengthen,e),i=t.getStrengthenList();for(var r in this.strengthenList=new Array,i)if(Object.prototype.hasOwnProperty.call(i,r)){var c=i[r],l=new v;l.id=c.getId(),l.value=c.getValue(),this.strengthenList.push(l)}o.Logger.log("c_strengthen=====",t),u.WordConfig.showWord(60333),n.EventManager.instance.dispatch(p.CommonEvent.Event_BaGua_Intensify)},e.protoRefine=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_refine,e),i=t.getRefineList();for(var r in this.refineList=new Array,i)if(Object.prototype.hasOwnProperty.call(i,r)){var c=i[r],l=new v;l.id=c.getId(),l.value=c.getValue(),this.refineList.push(l)}o.Logger.log("c_refine=====",t),u.WordConfig.showWord(61578),n.EventManager.instance.dispatch(p.CommonEvent.Event_BaGua_Intensify)},e.protoSkillUp=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_baguatu_skill_up,e);this.skillId=t.getId(),o.Logger.log("c_baguatu_skill_up=====",t),u.WordConfig.showWord(60366),n.EventManager.instance.dispatch(p.CommonEvent.Event_BaGua_refresh)},e.protoReback=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_reback_item,e);o.Logger.log("c_reback_item=====",t),u.WordConfig.showWord(60256),n.EventManager.instance.dispatch(p.CommonEvent.Event_BaGua_reback)},e.protoExchange=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_exchange_item,e);o.Logger.log("c_exchange_item=====",t),u.WordConfig.showWord(61579),n.EventManager.instance.dispatch(p.CommonEvent.Event_BaGua_refresh)},e.protoCompose=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_bagua_compose,e);o.Logger.log("c_bagua_compose=====",t),u.WordConfig.showWord(60362),n.EventManager.instance.dispatch(p.CommonEvent.Event_BaGua_compound)},e.getStrengthenByPos=function(e){var t;return this.strengthenList&&this.strengthenList.every(function(i){return e!=i.id||(t=i,!1)}),t||((t=new v).id=e,t.value=0),t},e.getRefineByPos=function(e){var t;return this.refineList.every(function(i){return e!=i.id||(t=i,!1)}),t||((t=new v).id=e,t.value=0),t},e.getEquipCountByLev=function(e){var t=0;return _.default.instance.getBaGuaEquipList().forEach(function(i){c.default.getConfigById(i.itemType).lev>=e&&(t+=1)}),t},e.getEquipStrenthenByLev=function(e){var t=0;return this.strengthenList.forEach(function(i){i.value>=e&&(t+=1)}),t},e.getIsEquipByItemId=function(e){var t=!1;return _.default.instance.getBaGuaEquipList().every(function(i){return i.itemId!=e||(t=!0,!1)}),t},e.getsuitData=function(e,t,i){var n,o=g.default.getSuitList(e,t),a=new Array;return this.suitListMap?n=this.suitListMap.get(t):((n=new y).id=t,n.lsit=new Array),o.forEach(function(e,t){var o,s,r=new b;i?(o=t>=n.lsit.length?e:g.default.getConfigById(n.lsit[t]),s=!(t>=n.lsit.length)):(o=e,s=!1),r.config=o,r.isValid=s,a.push(r)}),a.sort(function(e,t){return e.config.num-t.config.num}),a},e.getIsStrengByPos=function(t){var i=c.default.getPosList(),n=e.getStrengthenByPos(t),o=f.default.getConfig(t,n.value),a=!1,s=!1,r=!1,l=!1;if(o.cost){for(var d in o.cost)if(Object.prototype.hasOwnProperty.call(o.cost,d)){var g=o.cost[d];if(!(C.default.getItemAmount(d)>=g)){s=!1;break}s=!0}}else s=!0;if(o.cost10){for(var d in o.cost10)if(Object.prototype.hasOwnProperty.call(o.cost10,d)){g=o.cost10[d];if(!(C.default.getItemAmount(d)>=g)){r=!1;break}r=!0}}else r=!0;if(o.condition){var h=function(t){if(Object.prototype.hasOwnProperty.call(o.condition,t)){var n=o.condition[t];i.every(function(t){return e.getStrengthenByPos(t).value>=n?(l=!0,!0):(l=!1,!1)})}};for(var d in o.condition)h(d)}else l=!0;return s&&r&&l&&(a=!0),o.cost||o.cost10||o.condition||(a=!1,l=!1,r=!1,s=!1),a},e.getIsRefineByPos=function(t){var i=e.getRefineByPos(t),n=e.getStrengthenByPos(t),o=l.default.getConfig(t,i.value),a=!1,s=!1,r=!1;if(o.condition&&n.value>=o.condition){if(s=!0,o.cost)for(var c in o.cost)if(Object.prototype.hasOwnProperty.call(o.cost,c)){var d=o.cost[c];if(!(C.default.getItemAmount(c)>=d)){a=!1;break}a=!0}s&&a&&(r=!0),o.condition||o.cost||(s=!1,a=!1,r=!1)}return r},e.getIsCompose=function(e){var t=_.default.instance.getBaGuaEquipByPos(e),i=!1;if(t){var n=r.default.getConfigById(t.itemType),o=!1,a=!1;if(n){if(n.cost_item){for(var s in n.cost_item)if(Object.prototype.hasOwnProperty.call(n.cost_item,s)){var c=n.cost_item[s];o=C.default.getItemAmount(s)>=c}}else o=!0;if(n.need_equip)_.default.instance.getBaGuaEquipListById(n.need_equip).length>=n.equip_num&&(a=!0);else a=!0}o&&a&&(i=!0)}return i},e.prototype.checkRedPoint=function(){var t=[],i=!1,n=c.default.getPosList(),o=_.default.instance.getBaGuaEquipList(),a=!1,s=!1,r=!1;n.forEach(function(n){var o=!1,r=_.default.instance.getBaGuaEquipByPos(n),c=_.default.instance.getBaGuaItemListByPos(n),l=!1;r?(c.every(function(e){return!(e.fight>r.fight)||(o=!0,i=!0,!1)}),(l=e.getIsCompose(n))&&(s=!0)):(c.length>0&&(i=!0),o=c.length>0);var d={id:"bagua_compose_"+n,type:m.RedPointType.Default,show:l};t.push(d);var f={id:"bagua_equip_"+n,type:m.RedPointType.Default,show:o};t.push(f);var g=e.getIsStrengByPos(n),h=e.getIsRefineByPos(n),u={id:"bagua_strengthen_"+n,type:m.RedPointType.Default,show:g};t.push(u);var p={id:"bagua_refine_"+n,type:m.RedPointType.Default,show:h};t.push(p),(g||h)&&(a=!0)});var l={id:m.RedPointId.BaGua_Intensify,type:m.RedPointType.Default,show:a};t.push(l);var f={id:m.RedPointId.BaGua_Star,type:m.RedPointType.Default,show:s};t.push(f);var g=!1,u=d.default.getConfigById(e.skillId);if(u){var p=!1,v=!1;if(o.length>=8&&o.every(function(e){return c.default.getConfigById(e.itemType).lev>=u.lev?(p=!0,!0):(p=!1,!1)}),u.cost){for(var y in u.cost)if(Object.prototype.hasOwnProperty.call(u.cost,y)){var b=u.cost[y];if(!(C.default.getItemAmount(y)>=b)){v=!1;break}v=!0}}else v=!0;p&&v&&(g=!0),u.nextid||(g=!1)}var I={id:m.RedPointId.BaGua_Skill,type:m.RedPointType.Default,show:g};t.push(I);var M={id:m.RedPointId.BaGua_Equip,type:m.RedPointType.Default,show:i};(t.push(M),_.default.instance.level>=60)&&(e.isClickRed?h.DevilSealConfig.configMap.forEach(function(t){var i=e.itemlistdata[t.id];i&&e.resttimes>0&&0==i.revive_time&&e.power>=t.battle&&(r=!0)}):r=!0);var w={id:m.RedPointId.BaGua_fengmogu,type:m.RedPointType.Default,show:r};t.push(w);var k={id:m.RedPointId.BaGua,type:m.RedPointType.Default,show:g||s||a||i};return t.push(k),t},e.isClickRed=!1,e.itemlistdata=[],e.resttimes=0,e}();i.default=M,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/BaGuaComposeConfig":"BaGuaComposeConfig","../config/BaGuaEquipConfig":"BaGuaEquipConfig","../config/BaGuaRefineConfig":"BaGuaRefineConfig","../config/BaGuaSkillConfig":"BaGuaSkillConfig","../config/BaGuaStrongConfig":"BaGuaStrongConfig","../config/BaGuaSuitConfig":"BaGuaSuitConfig","../config/DevilSealConfig":"DevilSealConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./ItemInfoModel":"ItemInfoModel","./RoleInfoModel":"RoleInfoModel"}],BaGuaRefineConfig:[function(e,t,i){"use strict";cc._RF.push(t,"59c1c6ywxhEqoX0Rr2NWKcO","BaGuaRefineConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfig=function(e,t){var i;return this.configMap.forEach(function(n){n.pos==e&&n.lv==t&&(i=n)}),i},t.Config_Name="baguarefineConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],BaGuaResolveView:[function(e,t,i){"use strict";cc._RF.push(t,"1e34dWs711L0YLsw09nO1Je","BaGuaResolveView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../config/BaGuaEquipConfig"),c=e("../../config/DefaultConfig"),l=e("../../config/ITemsConfig"),d=e("../../config/WordConfig"),f=e("../../event/CommonEvent"),g=e("../../model/ItemInfoModel"),h=e("../../model/RoleInfoModel"),u=e("../../network/SocketClient"),p=e("../../prefab/ItemPrefab"),m=cc._decorator,C=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(f.CommonEvent.Event_BaGua_reback,this.initView,this),this.initView()},t.prototype.initView=function(){this.selectArr=new Array;var e=h.default.instance.getBaGuaResolveItemList();e.sort(function(e,t){var i=l.ITemsConfig.getITemsConfigById(e.itemType),n=l.ITemsConfig.getITemsConfigById(t.itemType);return i.magic_value[0]-n.magic_value[0]}),this.fenjieTip.active=e.length<=0;for(var t=this.contentNode.childrenCount>e.length?this.contentNode.childrenCount:e.length,i=0;i<t;i++){var n=void 0;if(i<this.contentNode.childrenCount?n=this.contentNode.children[i]:(n=cc.instantiate(this.itemNode)).parent=this.contentNode,n.active=i<e.length,i<e.length){var o=n.getChildByName("itemPrefab").getChildByName("ItemPrefab");o||((o=cc.instantiate(this.baguaItem)).parent=n.getChildByName("itemPrefab")),o.getComponent(p.default).init(e[i],!1),o.getComponent(p.default).setBaGuaEffect(!1),n.getChildByName("select").active=!1,this.onAddEvent(n,this.onClickItem.bind(this,n,Number(e[i].itemId)))}}this.onAddEvent(this.resolveBtnNode,this.onClickResolve.bind(this)),this.setSelectInfo()},t.prototype.initFindNode=function(){this.itemNode=this.findChild(this.node,"item"),this.resolveBtnNode=this.findChild(this.node,"resolveBtn"),this.contentNode=this.findChild(this.node,"scrollView/view/content"),this.resNode=this.findChild(this.node,"resource/res"),this.resourceNode=this.findChild(this.node,"resource"),this.fenjieTip=this.findChild(this.node,"fenjieTip")},t.prototype.setSelectInfo=function(){var e=this,t=new Map;this.selectArr.forEach(function(e){var i=g.default.getItemByid(e.toString()),n=r.default.getConfigById(i.itemType).melt_get;if(n)for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var a=n[o],s=t.get(o);s||(s={id:o,count:0}),s.count+=a,t.set(o,s)}}),c.DefaultConfig.getConfigById(137).value.forEach(function(i,n){var o,a=l.ITemsConfig.getITemsConfigById(i),s=g.default.getItem(i);n<e.resourceNode.childrenCount?o=e.resourceNode.children[n]:(o=cc.instantiate(e.resNode)).parent=e.resourceNode,o.active=!0;var r=s?s.itemCnt:0,c=a.name,f=t.get(i),h=f?f.count:0;o.getComponent(cc.RichText).string=cc.js.formatStr(d.WordConfig.getWord(61565),c,r,h)})},t.prototype.onClickItem=function(e,t){if(e.getChildByName("select").active=!this.selectArr.includes(t),this.selectArr.includes(t)){var i=this.selectArr.indexOf(t);this.selectArr.splice(i,1)}else this.selectArr.push(t);this.setSelectInfo()},t.prototype.onClickResolve=function(){this.selectArr.length<=0?d.WordConfig.showWord(61995):u.default.s_reback_item(this.selectArr)},o([_(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([C],t)}(s.default);i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/DefaultConfig":"DefaultConfig","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],BaGuaSelectView:[function(e,t,i){"use strict";cc._RF.push(t,"740fb1LErhItZWLMdBhFd9T","BaGuaSelectView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../event/CommonEvent"),c=e("../../prefab/ItemPrefab"),l=cc._decorator,d=l.ccclass,f=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onInitChild=function(e){this.setTopUI(),this.models=e,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.contentNode=this.findChild(this.node,"frame/scrollView/view/content")},t.prototype.initView=function(){for(var e=this.contentNode.childrenCount>this.models.length?this.contentNode.childrenCount:this.models.length,t=0;t<e;t++){var i=void 0;t<this.contentNode.childrenCount?i=this.contentNode.children[t]:((i=cc.instantiate(this.baguaItem)).parent=this.contentNode,i.setPosition(0,0)),i.active=t<this.models.length,t<this.models.length&&(i.getComponent(c.default).init(this.models[t],!1),this.onAddEvent(i,this.onClickSelect.bind(this,this.models[t])))}},t.prototype.onClickSelect=function(e){a.EventManager.instance.dispatch(r.CommonEvent.Event_BaGua_select_equip,e),this.closeView()},o([f(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([d],t)}(s.default);i.default=g,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../event/CommonEvent":"CommonEvent","../../prefab/ItemPrefab":"ItemPrefab"}],BaGuaSkillConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bf7eahhWTBLK49c1A6G3ZF4","BaGuaSkillConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configList=new Array,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o),t.configList.push(o)}),this.configList.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){return this.configMap.get(e)},t.Config_Name="baguaskillConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],BaGuaStrengthenView:[function(e,t,i){"use strict";cc._RF.push(t,"832a7/15SlBQq2B2LoPyjWF","BaGuaStrengthenView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/BaGuaEquipConfig"),r=e("../../config/BaGuaRefineConfig"),c=e("../../config/BaGuaStrongConfig"),l=e("../../config/ColorConfig"),d=e("../../config/ITemsConfig"),f=e("../../config/MagicNameConfig"),g=e("../../config/WordConfig"),h=e("../../manager/RedPointManager"),u=e("../../model/BaGuaModel"),p=e("../../model/ItemInfoModel"),m=e("../../model/MagicModel"),C=e("../../network/SocketClient"),_=e("../../prefab/ItemPrefab"),v=e("../../prefab/RedPointPrefab"),y=e("./BaGuaView"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baguaItem=null,t}return n(t,e),t.prototype.onInitChild=function(e,t){this.setTopUI(),this.type=e,this.pos=t,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.name1Node=this.findChild(this.node,"frame/name1"),this.name2Node=this.findChild(this.node,"frame/name2"),this.currentNode=this.findChild(this.node,"frame/descFrame/property/layout/current"),this.nextNode=this.findChild(this.node,"frame/descFrame/property/layout/next"),this.arrowNode=this.findChild(this.node,"frame/descFrame/property/layout/arrow"),this.name01Node=this.findChild(this.node,"frame/descFrame/condition/name1"),this.name02Node=this.findChild(this.node,"frame/descFrame/condition/name2"),this.condition1=this.findChild(this.node,"frame/descFrame/condition/condition1"),this.condition=this.findChild(this.node,"frame/descFrame/condition"),this.itemListNode=this.findChild(this.node,"frame/descFrame/condition/condition2/itemList"),this.refineBtnNode=this.findChild(this.node,"frame/refineBtn"),this.breakBtnNode=this.findChild(this.node,"frame/breakBtn"),this.levelMaxNode=this.findChild(this.node,"frame/levelMax")},t.prototype.initView=function(){if(this.name1Node.active=this.type==y.BaGuaIntensiftType.Refine,this.name2Node.active=!this.name1Node.active,this.name01Node.active=this.name1Node.active,this.name02Node.active=!this.name1Node.active,this.refineBtnNode.active=this.name1Node.active,this.breakBtnNode.active=!this.name1Node.active,this.type==y.BaGuaIntensiftType.Refine){var e=u.default.getRefineByPos(this.pos),t=r.default.getConfig(this.pos,e.value),i=r.default.getConfig(this.pos,e.value+1);this.setInfo(t,i)}else{var n=u.default.getStrengthenByPos(this.pos),o=c.default.getConfig(this.pos,n.value),a=c.default.getConfig(this.pos,n.value+1);this.setInfo(o,a)}},t.prototype.setInfo=function(e,t){var i,n=this.type==y.BaGuaIntensiftType.Refine?g.WordConfig.getWord(61573):g.WordConfig.getWord(61572),o=this.type==y.BaGuaIntensiftType.Refine?e.cost:e.cost10,a=this.findChild(this.node,"frame/RedPointPrefab").getComponent(v.default);if(this.type==y.BaGuaIntensiftType.Refine){i="bagua_refine_"+this.pos;var r=u.default.getStrengthenByPos(this.pos),c=s.default.getNameConfigByPos(this.pos),f=r.value>=e.condition?l.ColorConfig.GreenHexColor:l.ColorConfig.RedHexColor;e&&(this.currentNode.getChildByName("name").getComponent(cc.Label).string=cc.js.formatStr(g.WordConfig.getWord(61569),e.lv),this.setPro(this.currentNode,e)),this.refineBtnNode.active=void 0!=t,this.nextNode.active=void 0!=t,this.levelMaxNode.active=!this.nextNode.active,this.condition.active=void 0!=t,this.arrowNode.active=void 0!=t,t&&(this.nextNode.getChildByName("name").getComponent(cc.Label).string=cc.js.formatStr(g.WordConfig.getWord(61571),t.lv),this.condition1.getComponent(cc.RichText).string=cc.js.formatStr(n,c,e.condition,f,r.value,e.condition),this.setPro(this.nextNode,t),this.onAddEvent(this.refineBtnNode,this.onClickRefine.bind(this,r.value>=e.condition,e.id)))}else{i="bagua_strengthen_"+this.pos,this.levelMaxNode.active=!1,this.currentNode.getChildByName("name").getComponent(cc.Label).string=cc.js.formatStr(g.WordConfig.getWord(61568),e.lv),this.nextNode.getChildByName("name").getComponent(cc.Label).string=cc.js.formatStr(g.WordConfig.getWord(61570),t.lv);var m=void 0;for(var C in e.condition)Object.prototype.hasOwnProperty.call(e.condition,C)&&(m=e.condition[C]);var b=u.default.getEquipStrenthenByLev(m);f=b>=8?l.ColorConfig.GreenHexColor:l.ColorConfig.RedHexColor;this.condition1.getComponent(cc.RichText).string=cc.js.formatStr(n,m,f,b),this.setPro(this.currentNode,e),this.setPro(this.nextNode,t),this.onAddEvent(this.breakBtnNode,this.onClickStrengthen.bind(this,b>=8,e.id))}for(var C in a.setRedPointIdList([i]),h.default.getInstance().checkRedPointById(h.RedPointId.BaGua),o)if(Object.prototype.hasOwnProperty.call(o,C)){var I=o[C],M=cc.instantiate(this.baguaItem);M.parent=this.itemListNode,M.setPosition(0,0);var w=d.ITemsConfig.getITemsConfigById(C),k=p.default.getItemAmount(C),S=k+"/"+I;M.getComponent(_.default).init(w,!1),M.getComponent(_.default).setNumTxtStr(S),M.getComponent(_.default).setNumTxtColor(I,k)}},t.prototype.setPro=function(e,t){for(var i in t.attr)if(Object.prototype.hasOwnProperty.call(t.attr,i)){var n=t.attr[i];e.getChildByName("desc").getComponent(cc.Label).string=g.WordConfig.getWord(61583)+f.MagicNameConfig.getDesc(Number(i))+"+"+m.default.formatMagicValue(Number(i),n)}},t.prototype.onClickRefine=function(e,t){e?(C.default.s_refine(t),this.closeView()):g.WordConfig.showWord(61574)},t.prototype.onClickStrengthen=function(e,t){e?(C.default.s_strengthen(t),this.closeView()):g.WordConfig.showWord(61574)},o([M(cc.Prefab)],t.prototype,"baguaItem",void 0),t=o([I],t)}(a.default);i.default=w,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/BaGuaRefineConfig":"BaGuaRefineConfig","../../config/BaGuaStrongConfig":"BaGuaStrongConfig","../../config/ColorConfig":"ColorConfig","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/WordConfig":"WordConfig","../../manager/RedPointManager":"RedPointManager","../../model/BaGuaModel":"BaGuaModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab","./BaGuaView":"BaGuaView"}],BaGuaStrongConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fae88ZfDlxD5L0kBjQwBCot","BaGuaStrongConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configPosMap=new Map,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o);var a=t.configPosMap.get(o.pos);a||(a=new Array),a.push(o),t.configPosMap.set(o.pos,a)}),this.configPosMap.forEach(function(e){e.sort(function(e,t){return e.id-t.id})})},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfig=function(e,t){var i;return this.configMap.forEach(function(n){n.pos==e&&n.lv==t&&(i=n)}),i},t.Config_Name="baguastrongConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],BaGuaSuitConfig:[function(e,t,i){"use strict";cc._RF.push(t,"53ac07SfdVJb7jFC27KE/Pu","BaGuaSuitConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./DefaultConfig"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},t.getConfigById=function(e){return this.configMap.get(e)},t.getSuitList=function(e,t){var i=new Array;return this.configMap.forEach(function(n){n.lev==e&&n.type==t&&i.push(n)}),i.sort(function(e,t){return e.id-t.id}),i},t.getSuitArrByPos=function(e){var t=o.DefaultConfig.getConfigById(129).value,i=new Array;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];if(a.includes(e)){i=a;break}}return i},t.getSuitArrByType=function(e){return o.DefaultConfig.getConfigById(129).value[e]},t.getSuitTypeByPos=function(e){var t,i=o.DefaultConfig.getConfigById(129).value;for(var n in i){if(Object.prototype.hasOwnProperty.call(i,n))if(i[n].includes(e)){t=Number(n);break}}return t},t.Config_Name="baguasuitConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=a,cc._RF.pop()},{"./DefaultConfig":"DefaultConfig","./JsonConfigBase":"JsonConfigBase"}],BaGuaView:[function(e,t,i){"use strict";cc._RF.push(t,"afdadlTBjdFxryjaezt9mri","BaGuaView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../../engine/EventManager"),r=e("../../../engine/ViewBase"),c=e("../../base/RadioButton"),l=e("../../event/CommonEvent"),d=e("../../network/SocketClient"),f=e("./BaGuaCompoundView"),g=e("./BaGuaConversionView"),h=e("./BaGuaEquipView"),u=e("./BaGuaIntensifyView"),p=e("./BaGuaResolveView"),m=cc._decorator,C=m.ccclass;m.property;(function(e){e[e.Equip=0]="Equip",e[e.Intensify=1]="Intensify",e[e.Compound=2]="Compound",e[e.Conversion=3]="Conversion",e[e.Resolve=4]="Resolve"})(a=i.BaGuaTab||(i.BaGuaTab={})),function(e){e[e.Refine=0]="Refine",e[e.Strengthen=1]="Strengthen"}(i.BaGuaIntensiftType||(i.BaGuaIntensiftType={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTab=a.Equip,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){s.EventManager.instance.on(l.CommonEvent.Event_BaGua_refresh,this.initView,this),d.default.s_baguatu_info()},t.prototype.initView=function(){var e=this;this.onClickBtn(this.currentTab,this.bottomNode.children[this.currentTab]),this.bottomNode.children.forEach(function(t,i){e.onAddEvent(t,e.onClickBtn.bind(e,i,t))})},t.prototype.initFindNode=function(){this.bottomNode=this.findChild(this.node,"bottom"),this.equipView=this.getChild(this.node,"equipView",h.default),this.intensifyView=this.getChild(this.node,"intensifyView",u.default),this.compoundView=this.getChild(this.node,"compoundView",f.default),this.conversionView=this.getChild(this.node,"conversionView",g.default),this.resolveView=this.getChild(this.node,"resolveView",p.default)},t.prototype.baguaView=function(e){},t.prototype.onClickBtn=function(e,t){switch(this.currentTab=e,e){case a.Equip:case a.Intensify:case a.Compound:case a.Conversion:case a.Resolve:}t.getComponent(c.default).selectOnClick()},t=o([C],t)}(r.default);i.default=_,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../base/RadioButton":"RadioButton","../../event/CommonEvent":"CommonEvent","../../network/SocketClient":"SocketClient","./BaGuaCompoundView":"BaGuaCompoundView","./BaGuaConversionView":"BaGuaConversionView","./BaGuaEquipView":"BaGuaEquipView","./BaGuaIntensifyView":"BaGuaIntensifyView","./BaGuaResolveView":"BaGuaResolveView"}],BaYeBuyView:[function(e,t,i){"use strict";cc._RF.push(t,"c9d1d8wi4FMWrgdBF098Jk/","BaYeBuyView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ViewBase"),c=e("../../config/GameConst"),l=e("../../config/ITemsConfig"),d=e("../../config/LegendaryThinkRewardConfig"),f=e("../../config/WordConfig"),g=e("../../event/CommonEvent"),h=e("../../model/ItemInfoModel"),u=e("../../model/LegendTaskModel"),p=e("../../network/SocketClient"),m=e("../../prefab/ItemPrefab"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxLevel=1,t.nowLevel=1,t.onceYuanBao=1,t.levelUpValue=1,t.itemNodeList=[],t.activityid=3,t}return n(t,e),t.prototype.onInitChild=function(e,t){void 0===e&&(e=1),this.nowLevel=e,this.activityid=t,this.maxLevel=d.LegendaryThinkRewardConfig.getMaxLevel(this.activityid),s.Logger.log("BaYeBuyView===",this.nowLevel,this.maxLevel),this.refresh()},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.txtLevel=this.getChild(this.node,"txtLevel",cc.RichText),this.txtInfo=this.getChild(this.node,"txtInfo",cc.RichText),this.btnDec=this.getChild(this.node,"btnDec"),this.btnAdd=this.getChild(this.node,"btnAdd"),this.btnBuy=this.getChild(this.node,"btnBuy"),this.txtMoney=this.getChild(this.node,"btnBuy/txtMoney",cc.Label),this.btnSlider=this.getChild(this.node,"btnSlider",cc.Slider),this.itemPrefab=this.getChild(this.node,"scrollView/view/content/ItemPrefab"),this.itemPrefab.active=!1},t.prototype.onEnable=function(){var e=this;a.EventManager.instance.on(g.CommonEvent.Event_LegendTaskModel,this.refresh,this),this.onAddEvent(this.btnDec,this.onClickDec.bind(this)),this.onAddEvent(this.btnAdd,this.onClickAdd.bind(this)),this.onAddEvent(this.btnBuy,function(){e.closeView();var t=e.nowLevel+e.levelUpValue;p.default.s_buy_legendtask_level(t,e.activityid)}),this.btnSlider.node.on("slide",this.onSlider,this),this.refresh()},t.prototype.onClickDec=function(){this.levelUpValue--,this.levelUpValue<=0&&(this.levelUpValue=1),this.refresh()},t.prototype.onClickAdd=function(){this.levelUpValue++,this.nowLevel+this.levelUpValue>this.maxLevel&&(this.levelUpValue=this.maxLevel-this.nowLevel),this.refresh()},t.prototype.onSlider=function(e){var t=e.progress,i=this.maxLevel-this.nowLevel;this.levelUpValue=Math.floor(i*t),this.levelUpValue<1&&(this.levelUpValue=1),s.Logger.log("onSlider====",t,i,this.levelUpValue),this.refresh()},t.prototype.refresh=function(){for(var e=0;e<this.itemNodeList.length;e++)this.itemNodeList[e].active=!1;var t=this.nowLevel+this.levelUpValue;this.txtLevel.string=cc.js.formatStr(f.WordConfig.getWord(60686),this.levelUpValue,t);var i=this.maxLevel-this.nowLevel;this.btnSlider.progress=this.levelUpValue/i;var n=d.LegendaryThinkRewardConfig.getOffestList(this.nowLevel+1,t,this.activityid);s.Logger.log("refresh=",this.nowLevel,t,n);var o=0,a=0;for(e=0;e<n.length;e++){var r=n[e];o+=r.exp,r.resource1&&(this.initResource(r.resource1,a),a++),r.item1&&(this.initItem(r.item1,a),a++),(3==this.activityid&&1==u.LegendTaskModel.instance.isActive||35==this.activityid&&1==u.LegendTaskModel.instance.isActive2)&&(r.resource2&&(this.initResource(r.resource2,a),a++),r.item2&&(this.initItem(r.item2,a),a++))}this.txtMoney.string=""+o*this.onceYuanBao,this.txtInfo.string=cc.js.formatStr(f.WordConfig.getWord(60784),t,a)},t.prototype.getOrCreateItem=function(e){var t;return this.itemNodeList[e]?t=this.itemNodeList[e]:(t=cc.instantiate(this.itemPrefab),this.itemNodeList[e]=t,t.parent=this.itemPrefab.parent),t.active=!0,t},t.prototype.initResource=function(e,t){var i=this.getOrCreateItem(t);for(var n in e)i.getComponent(m.default).initResource(parseInt(n),e[n])},t.prototype.initItem=function(e,t){var i=this.getOrCreateItem(t);for(var n in e){var o=l.ITemsConfig.getITemsConfigById(n),a=h.default.create(c.GameConst.ITEM_KIND.ITEM,n,e[n],o.quality);i.getComponent(m.default).init(a,!0)}},t=o([_],t)}(r.default));i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/LegendaryThinkRewardConfig":"LegendaryThinkRewardConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/LegendTaskModel":"LegendTaskModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],BaYePrefab2:[function(e,t,i){"use strict";cc._RF.push(t,"65253MB5Y1CmKWBOd7xFUQ5","BaYePrefab2");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../../engine/DateUtil"),r=e("../../../engine/EventManager"),c=e("../../../engine/Logger"),l=e("../../../engine/SpriteFrameComponent"),d=e("../../../engine/UIManager"),f=e("../../../engine/ViewBase"),g=e("../../config/ChongZhiConfig"),h=e("../../config/GameConst"),u=e("../../config/ITemsConfig"),p=e("../../config/LegendaryThinkRewardConfig"),m=e("../../config/LegendaryThinkTaskConfig"),C=e("../../config/ViewConfig"),_=e("../../config/WordConfig"),v=e("../../event/CommonEvent"),y=e("../../manager/RedPointManager"),b=e("../../model/ActivityOpenModel"),I=e("../../model/ItemInfoModel"),M=e("../../model/LegendTaskModel"),w=e("../../network/SocketClient"),k=e("../../prefab/ItemPrefab"),S=e("../../prefab/RedPointPrefab"),P=cc._decorator,E=P.ccclass;P.property;(function(e){e[e.Reward=1]="Reward",e[e.Task=2]="Task"})(a||(a={}));var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.taskItemList=[],t.giftItemList=[],t.selectStatus=a.Reward,t.activityid=35,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.txtTime=this.getChild(this.node,"txtTime",cc.Label),this.txtLevel=this.getChild(this.node,"xinxi1/txtLevel",cc.Label),this.txtExp=this.getChild(this.node,"xinxi2/txtExp",cc.Label),this.btnBuy=this.getChild(this.node,"btnBuy"),this.txtPrice=this.getChild(this.node,"btnBuy/txtPrice",cc.Label),this.txtYuanbao=this.getChild(this.node,"txtYuanbao",cc.RichText),this.giftItem=this.getChild(this.node,"tab1/giftScrollView/view/content/item1"),this.giftItem.active=!1,this.txtNowLevel=this.getChild(this.giftItem,"txtNowLevel",cc.Label),this.taskItem=this.getChild(this.node,"tab2/taskScrollView/view/content/taskItem"),this.taskItem.active=!1,this.hadBuyNode=this.getChild(this.node,"hadBuyNode"),this.hadBuyNode.active=!1,this.btnBuyLevel=this.getChild(this.node,"btnBuyLevel"),this.txtBigLevel=this.getChild(this.node,"tab1/txtBigLevel",cc.Label),this.selectTab1=this.getChild(this.node,"selectTab1"),this.selectTab2=this.getChild(this.node,"selectTab2"),this.chongzhiConfig=g.ChongZhiConfig.getChongZhiByIdAndPlatform(225),w.default.s_get_legendtask_info(this.activityid),this.selectStatus=a.Reward,this.refreshShow()},t.prototype.onEnable=function(){var e=this;r.EventManager.instance.on(v.CommonEvent.Event_LegendTaskModel,this.refreshInfo,this),this.maxLevel=p.LegendaryThinkRewardConfig.getMaxLevel(this.activityid),this.onAddEvent(this.btnBuy,function(){w.default.req_charge(e.chongzhiConfig.id)}),this.onAddEvent(this.btnBuyLevel,function(){M.LegendTaskModel.instance.level2>=e.maxLevel?_.WordConfig.showWord(60339):d.default.instance.createView(C.default.gameView.BaYeBuyView,null,M.LegendTaskModel.instance.level2,e.activityid)}),this.onAddEvent(this.selectTab1,function(){e.selectStatus=a.Reward,e.refreshShow()}),this.onAddEvent(this.selectTab2,function(){e.selectStatus=a.Task,e.refreshShow()}),this.refreshInfo(!0)},t.prototype.refreshShow=function(){var e=this.getChild(this.node,"tab1"),t=this.getChild(this.node,"tab2");this.selectTab1.getComponent(cc.Sprite).spriteFrame=this.selectTab1.getComponent(l.SpriteFrameComponent).spriteFrameList[0],this.selectTab2.getComponent(cc.Sprite).spriteFrame=this.selectTab2.getComponent(l.SpriteFrameComponent).spriteFrameList[0],this.txtPrice.string=this.chongzhiConfig.getMoneyStr(),e.active=!1,t.active=!1,this.selectStatus==a.Reward?(e.active=!0,this.selectTab1.getComponent(cc.Sprite).spriteFrame=this.selectTab1.getComponent(l.SpriteFrameComponent).spriteFrameList[1],c.Logger.log("refreshShow",this.selectStatus)):(t.active=!0,this.selectTab2.getComponent(cc.Sprite).spriteFrame=this.selectTab2.getComponent(l.SpriteFrameComponent).spriteFrameList[1]),this.checkoutRedpoint(this.selectTab1,"gift2"),this.checkoutRedpoint(this.selectTab2,"task2")},t.prototype.checkoutRedpoint=function(e,t){this.findChild(e,"RedPointPrefab").getComponent(S.default).setRedPointIdList([t]),y.default.getInstance().checkRedPointById(y.RedPointId.MaFaBaYe2)},t.prototype.refreshInfo=function(e){void 0===e&&(e=!1);var t=b.default.getStarTimeByActivityId(this.activityid),i=b.default.getEndTimeByActivityId(this.activityid);this.txtTime.string=s.default.formatDateStr7(1e3*t)+"-"+s.default.formatDateStr7(1e3*i),this.txtYuanbao.string=_.WordConfig.getWord(60797)+"<color=#0CFF00><size=25>"+this.chongzhiConfig.resource[2]+"</color></size>"+_.WordConfig.getWord(60517),1==M.LegendTaskModel.instance.isActive2?(this.hadBuyNode.active=!0,this.btnBuy.active=!1,this.txtYuanbao.node.active=!1):(this.btnBuy.active=!0,this.hadBuyNode.active=!1,this.txtYuanbao.node.active=!0),this.txtNowLevel.string=M.LegendTaskModel.instance.level2+"";var n=M.LegendTaskModel.instance.level2+1;n>=this.maxLevel&&(n=this.maxLevel);var o=p.LegendaryThinkRewardConfig.getConfigByLevel(n,this.activityid);this.txtLevel.string=M.LegendTaskModel.instance.level2+_.WordConfig.getWord(60433),M.LegendTaskModel.instance.level2>=this.maxLevel?this.txtExp.string=_.WordConfig.getWord(60515):this.txtExp.string=M.LegendTaskModel.instance.exp2+"/"+o.exp,this.refreshTask(),this.refreshGift(e),this.refreshBigGift()},t.prototype.refreshTask=function(){for(var e=this,t=m.LegendaryThinkTaskConfig.getAllList(this.activityid),i=function(i){var o=t[i],a=void 0;n.taskItemList[i]?a=n.taskItemList[i]:((a=cc.instantiate(n.taskItem)).parent=n.taskItem.parent,n.taskItemList[i]=a);var s=a.getChildByName("txtFinish").getComponent(cc.Label),r=a.getChildByName("btnGet");n.onAddEvent(r,function(){w.default.s_get_legendtask_exp(i+1,e.activityid),c.Logger.log("s_get_legendtask_exp===1",i)});var l=M.LegendTaskModel.getTaskInfoByLevel(o.id,n.activityid),d=0;l&&(d=l.finishTimes),s.string=cc.js.formatStr(_.WordConfig.getWord(60516),d),a.getChildByName("txtExp").getComponent(cc.Label).string=o.exp+"",a.getChildByName("txtName").getComponent(cc.Label).string=o.name;var f=a.getChildByName("txtTaskName").getComponent(cc.RichText);l?l.times<o.goal?(f.string=o.des+" <color=#df1500>"+l.times+"/"+o.goal+"</c>",a.zIndex=i+999):(f.string=o.des+" <color=#0CFF00>"+l.times+"/"+o.goal+"</c>",a.zIndex=i):(a.zIndex=i+999,f.string=o.des+" <color=#df1500>0/"+o.goal+"</c>"),a.active=!0;var g=a.getChildByName("txtLimit").getComponent(cc.RichText);o.limit?g.string=o.limit:g.string=""},n=this,o=0;o<t.length;o++)i(o)},t.prototype.refreshBigGift=function(){var e=p.LegendaryThinkRewardConfig.getNextBigLevel(M.LegendTaskModel.instance.level2,this.activityid),t=5;e&&(t=e.level);var i=p.LegendaryThinkRewardConfig.getConfigByLevel(t,this.activityid);this.getChild(this.node,"tab1/txtBigLevel",cc.Label).string=t+"";var n=this.getChild(this.node,"tab1/bigBaseGiftNode");this.initGiftConfigView(i,n,!1,!0);var o=this.getChild(this.node,"tab1/bigExtraGiftNode");this.initGiftConfigView(i,o,!0,!0)},t.prototype.refreshGift=function(e){void 0===e&&(e=!1);for(var t=p.LegendaryThinkRewardConfig.getAllList(this.activityid),i=0;i<t.length;i++){var n=t[i],o=void 0;this.giftItemList[i]?o=this.giftItemList[i]:((o=cc.instantiate(this.giftItem)).parent=this.giftItem.parent,this.giftItemList[i]=o),o.active=!0;o.getChildByName("txtLevel").getComponent(cc.Label).string=n.level+"";var a=o.getChildByName("baseGiftNode");this.initGiftConfigView(n,a,!1,!1,i);var s=o.getChildByName("extraGiftNode");this.initGiftConfigView(n,s,!0,!1,i)}},t.prototype.initGiftConfigView=function(e,t,i,n,o){var a=this;void 0===o&&(o=0);var s=1;i&&(s=2);var r=M.LegendTaskModel.getGiftByLevel(e.level,s,this.activityid),c=t.getChildByName("canGetNode"),l=t.getChildByName("noGetNode"),d=t.getChildByName("hadGetNode");d.active=!1,e.level<=M.LegendTaskModel.instance.level2?i?1==M.LegendTaskModel.instance.isActive2?(c.active=!0,l.active=!1):(c.active=!1,l.active=!0):(c.active=!0,l.active=!1):(c.active=!1,l.active=!0),r&&(c.active=!1,d.active=!0);var f=M.LegendTaskModel.getGiftByLevel(e.level,1,this.activityid),g=M.LegendTaskModel.getGiftByLevel(e.level,2,this.activityid);f&&g&&(o+=999);var p=t.getChildByName("itemPrefab");if(t.parent.zIndex=o,this.onAddEvent(t,function(t){a.onClickItemType(t,p,c.active,i,e,s)}),i){if(e.resource2)for(var m in e.resource2)p.getComponent(k.default).initResource(parseInt(m),e.resource2[m]);if(e.item2)for(var m in e.item2){C=u.ITemsConfig.getITemsConfigById(m),_=I.default.create(h.GameConst.ITEM_KIND.ITEM,m,e.item2[m],C.quality);p.getComponent(k.default).init(_,!0,function(t){a.onClickItemType(t,p,c.active,i,e,s)})}}else{if(e.resource1)for(var m in e.resource1)p.getComponent(k.default).initResource(parseInt(m),e.resource1[m]);if(e.item1)for(var m in e.item1){var C=u.ITemsConfig.getITemsConfigById(m),_=I.default.create(h.GameConst.ITEM_KIND.ITEM,m,e.item1[m],C.quality);p.getComponent(k.default).init(_,!0,function(t){a.onClickItemType(t,p,c.active,i,e,s)})}}if(!n){var v=this.findChild(t,"RedPointPrefab").getComponent(S.default),b=new Array;if(e.level<=M.LegendTaskModel.instance.level2){if(!M.LegendTaskModel.getGiftByLevel(e.level,1,this.activityid)&&0==i){var w="base_gift_"+e.level;b.push(w)}if(1==M.LegendTaskModel.instance.isActive2&&2==s&&i){w="extr_gift_"+e.level;b.push(w)}}v.setRedPointIdList(b),y.default.getInstance().checkRedPointById(y.RedPointId.MaFaBaYe2)}},t.prototype.onClickItemType=function(e,t,i,n,o,a){1==e?t.getComponent(k.default).onClickThis():i&&w.default.s_get_legendtask_gift(o.level,a,this.activityid)},t=o([E],t)}(f.default);i.default=L,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/LegendaryThinkRewardConfig":"LegendaryThinkRewardConfig","../../config/LegendaryThinkTaskConfig":"LegendaryThinkTaskConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/LegendTaskModel":"LegendTaskModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab"}],BaYePrefab:[function(e,t,i){"use strict";cc._RF.push(t,"af1a6msZoRHLrG1InjWu9S5","BaYePrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../../engine/DateUtil"),r=e("../../../engine/EventManager"),c=e("../../../engine/Logger"),l=e("../../../engine/SpriteFrameComponent"),d=e("../../../engine/UIManager"),f=e("../../../engine/ViewBase"),g=e("../../config/ChongZhiConfig"),h=e("../../config/GameConst"),u=e("../../config/ITemsConfig"),p=e("../../config/LegendaryThinkRewardConfig"),m=e("../../config/LegendaryThinkTaskConfig"),C=e("../../config/ViewConfig"),_=e("../../config/WordConfig"),v=e("../../event/CommonEvent"),y=e("../../manager/RedPointManager"),b=e("../../model/ActivityOpenModel"),I=e("../../model/ItemInfoModel"),M=e("../../model/LegendTaskModel"),w=e("../../network/SocketClient"),k=e("../../prefab/ItemPrefab"),S=e("../../prefab/RedPointPrefab"),P=cc._decorator,E=P.ccclass;P.property;(function(e){e[e.Reward=1]="Reward",e[e.Task=2]="Task"})(a||(a={}));var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.taskItemList=[],t.giftItemList=[],t.selectStatus=a.Reward,t.activityid=3,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.txtTime=this.getChild(this.node,"txtTime",cc.Label),this.txtLevel=this.getChild(this.node,"xinxi1/txtLevel",cc.Label),this.txtExp=this.getChild(this.node,"xinxi2/txtExp",cc.Label),this.btnBuy=this.getChild(this.node,"btnBuy"),this.txtPrice=this.getChild(this.node,"btnBuy/txtPrice",cc.Label),this.txtYuanbao=this.getChild(this.node,"txtYuanbao",cc.RichText),this.giftItem=this.getChild(this.node,"tab1/giftScrollView/view/content/item1"),this.giftItem.active=!1,this.txtNowLevel=this.getChild(this.giftItem,"txtNowLevel",cc.Label),this.taskItem=this.getChild(this.node,"tab2/taskScrollView/view/content/taskItem"),this.taskItem.active=!1,this.hadBuyNode=this.getChild(this.node,"hadBuyNode"),this.hadBuyNode.active=!1,this.btnBuyLevel=this.getChild(this.node,"btnBuyLevel"),this.txtBigLevel=this.getChild(this.node,"tab1/txtBigLevel",cc.Label),this.selectTab1=this.getChild(this.node,"selectTab1"),this.selectTab2=this.getChild(this.node,"selectTab2"),this.chongzhiConfig=g.ChongZhiConfig.getChongZhiByIdAndPlatform(222),w.default.s_get_legendtask_info(this.activityid),this.selectStatus=a.Reward,this.refreshShow()},t.prototype.onEnable=function(){var e=this;r.EventManager.instance.on(v.CommonEvent.Event_LegendTaskModel,this.refreshInfo,this),this.maxLevel=p.LegendaryThinkRewardConfig.getMaxLevel(this.activityid),this.onAddEvent(this.btnBuy,function(){w.default.req_charge(e.chongzhiConfig.id)}),this.onAddEvent(this.btnBuyLevel,function(){M.LegendTaskModel.instance.level>=e.maxLevel?_.WordConfig.showWord(60339):d.default.instance.createView(C.default.gameView.BaYeBuyView,null,M.LegendTaskModel.instance.level,e.activityid)}),this.onAddEvent(this.selectTab1,function(){e.selectStatus=a.Reward,e.refreshShow()}),this.onAddEvent(this.selectTab2,function(){e.selectStatus=a.Task,e.refreshShow()}),this.refreshInfo(!0)},t.prototype.refreshShow=function(){var e=this.getChild(this.node,"tab1"),t=this.getChild(this.node,"tab2");this.selectTab1.getComponent(cc.Sprite).spriteFrame=this.selectTab1.getComponent(l.SpriteFrameComponent).spriteFrameList[0],this.selectTab2.getComponent(cc.Sprite).spriteFrame=this.selectTab2.getComponent(l.SpriteFrameComponent).spriteFrameList[0],this.txtPrice.string=this.chongzhiConfig.getMoneyStr(),e.active=!1,t.active=!1,this.selectStatus==a.Reward?(e.active=!0,this.selectTab1.getComponent(cc.Sprite).spriteFrame=this.selectTab1.getComponent(l.SpriteFrameComponent).spriteFrameList[1],c.Logger.log("refreshShow",this.selectStatus)):(t.active=!0,this.selectTab2.getComponent(cc.Sprite).spriteFrame=this.selectTab2.getComponent(l.SpriteFrameComponent).spriteFrameList[1]),this.checkoutRedpoint(this.selectTab1,"gift"),this.checkoutRedpoint(this.selectTab2,"task")},t.prototype.checkoutRedpoint=function(e,t){this.findChild(e,"RedPointPrefab").getComponent(S.default).setRedPointIdList([t]),y.default.getInstance().checkRedPointById(y.RedPointId.MaFaBaYe)},t.prototype.refreshInfo=function(e){void 0===e&&(e=!1);var t=b.default.getStarTimeByActivityId(this.activityid),i=b.default.getEndTimeByActivityId(this.activityid);this.txtTime.string=s.default.formatDateStr7(1e3*t)+"-"+s.default.formatDateStr7(1e3*i),this.txtYuanbao.string=_.WordConfig.getWord(60797)+"<color=#0CFF00><size=25>"+this.chongzhiConfig.resource[2]+"</color></size>"+_.WordConfig.getWord(60517),1==M.LegendTaskModel.instance.isActive?(this.hadBuyNode.active=!0,this.btnBuy.active=!1,this.txtYuanbao.node.active=!1):(this.btnBuy.active=!0,this.hadBuyNode.active=!1,this.txtYuanbao.node.active=!0),this.txtNowLevel.string=M.LegendTaskModel.instance.level+"";var n=M.LegendTaskModel.instance.level+1;n>=this.maxLevel&&(n=this.maxLevel);var o=p.LegendaryThinkRewardConfig.getConfigByLevel(n,this.activityid);this.txtLevel.string=M.LegendTaskModel.instance.level+_.WordConfig.getWord(60433),M.LegendTaskModel.instance.level>=this.maxLevel?this.txtExp.string=_.WordConfig.getWord(60515):this.txtExp.string=M.LegendTaskModel.instance.exp+"/"+o.exp,this.refreshTask(),this.refreshGift(e),this.refreshBigGift()},t.prototype.refreshTask=function(){for(var e=this,t=m.LegendaryThinkTaskConfig.getAllList(this.activityid),i=function(i){var o=t[i],a=void 0;n.taskItemList[i]?a=n.taskItemList[i]:((a=cc.instantiate(n.taskItem)).parent=n.taskItem.parent,n.taskItemList[i]=a);var s=a.getChildByName("txtFinish").getComponent(cc.Label),r=a.getChildByName("btnGet");n.onAddEvent(r,function(){w.default.s_get_legendtask_exp(i+1,e.activityid),c.Logger.log("s_get_legendtask_exp===1",i)});var l=M.LegendTaskModel.getTaskInfoByLevel(o.id,n.activityid),d=0;l&&(d=l.finishTimes),s.string=cc.js.formatStr(_.WordConfig.getWord(60516),d),a.getChildByName("txtExp").getComponent(cc.Label).string=o.exp+"",a.getChildByName("txtName").getComponent(cc.Label).string=o.name;var f=a.getChildByName("txtTaskName").getComponent(cc.RichText);l?l.times<o.goal?(f.string=o.des+" <color=#df1500>"+l.times+"/"+o.goal+"</c>",a.zIndex=i+999):(f.string=o.des+" <color=#0CFF00>"+l.times+"/"+o.goal+"</c>",a.zIndex=i):(a.zIndex=i+999,f.string=o.des+" <color=#df1500>0/"+o.goal+"</c>"),a.active=!0;var g=a.getChildByName("txtLimit").getComponent(cc.RichText);o.limit?g.string=o.limit:g.string=""},n=this,o=0;o<t.length;o++)i(o)},t.prototype.refreshBigGift=function(){var e=p.LegendaryThinkRewardConfig.getNextBigLevel(M.LegendTaskModel.instance.level,this.activityid),t=5;e&&(t=e.level);var i=p.LegendaryThinkRewardConfig.getConfigByLevel(t,this.activityid);this.getChild(this.node,"tab1/txtBigLevel",cc.Label).string=t+"";var n=this.getChild(this.node,"tab1/bigBaseGiftNode");this.initGiftConfigView(i,n,!1,!0);var o=this.getChild(this.node,"tab1/bigExtraGiftNode");this.initGiftConfigView(i,o,!0,!0)},t.prototype.refreshGift=function(e){void 0===e&&(e=!1);for(var t=p.LegendaryThinkRewardConfig.getAllList(this.activityid),i=0;i<t.length;i++){var n=t[i],o=void 0;this.giftItemList[i]?o=this.giftItemList[i]:((o=cc.instantiate(this.giftItem)).parent=this.giftItem.parent,this.giftItemList[i]=o),o.active=!0;o.getChildByName("txtLevel").getComponent(cc.Label).string=n.level+"";var a=o.getChildByName("baseGiftNode");this.initGiftConfigView(n,a,!1,!1,i);var s=o.getChildByName("extraGiftNode");this.initGiftConfigView(n,s,!0,!1,i)}},t.prototype.initGiftConfigView=function(e,t,i,n,o){var a=this;void 0===o&&(o=0);var s=1;i&&(s=2);var r=M.LegendTaskModel.getGiftByLevel(e.level,s,this.activityid),c=t.getChildByName("canGetNode"),l=t.getChildByName("noGetNode"),d=t.getChildByName("hadGetNode");d.active=!1,e.level<=M.LegendTaskModel.instance.level?i?1==M.LegendTaskModel.instance.isActive?(c.active=!0,l.active=!1):(c.active=!1,l.active=!0):(c.active=!0,l.active=!1):(c.active=!1,l.active=!0),r&&(c.active=!1,d.active=!0);var f=M.LegendTaskModel.getGiftByLevel(e.level,1,this.activityid),g=M.LegendTaskModel.getGiftByLevel(e.level,2,this.activityid);f&&g&&(o+=999);var p=t.getChildByName("itemPrefab");if(t.parent.zIndex=o,this.onAddEvent(t,function(t){a.onClickItemType(t,p,c.active,i,e,s)}),i){if(e.resource2)for(var m in e.resource2)p.getComponent(k.default).initResource(parseInt(m),e.resource2[m]);if(e.item2)for(var m in e.item2){C=u.ITemsConfig.getITemsConfigById(m),_=I.default.create(h.GameConst.ITEM_KIND.ITEM,m,e.item2[m],C.quality);p.getComponent(k.default).init(_,!0,function(t){a.onClickItemType(t,p,c.active,i,e,s)})}}else{if(e.resource1)for(var m in e.resource1)p.getComponent(k.default).initResource(parseInt(m),e.resource1[m]);if(e.item1)for(var m in e.item1){var C=u.ITemsConfig.getITemsConfigById(m),_=I.default.create(h.GameConst.ITEM_KIND.ITEM,m,e.item1[m],C.quality);p.getComponent(k.default).init(_,!0,function(t){a.onClickItemType(t,p,c.active,i,e,s)})}}if(!n){var v=this.findChild(t,"RedPointPrefab").getComponent(S.default),b=new Array;if(e.level<=M.LegendTaskModel.instance.level){if(!M.LegendTaskModel.getGiftByLevel(e.level,1,this.activityid)&&0==i){var w="base_gift_"+e.level;b.push(w)}if(1==M.LegendTaskModel.instance.isActive&&2==s&&i){w="extr_gift_"+e.level;b.push(w)}}v.setRedPointIdList(b),y.default.getInstance().checkRedPointById(y.RedPointId.MaFaBaYe)}},t.prototype.onClickItemType=function(e,t,i,n,o,a){1==e?t.getComponent(k.default).onClickThis():i&&w.default.s_get_legendtask_gift(o.level,a,this.activityid)},t=o([E],t)}(f.default);i.default=L,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/LegendaryThinkRewardConfig":"LegendaryThinkRewardConfig","../../config/LegendaryThinkTaskConfig":"LegendaryThinkTaskConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/LegendTaskModel":"LegendTaskModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab"}],BaZhenPanel:[function(e,t,i){"use strict";cc._RF.push(t,"f28f9W4iZ1EG51amzIoab/P","BaZhenPanel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../base/RadioButton"),r=e("../../utils/JumpActionUtils"),c=e("../DevilSeal/DevilSealView"),l=cc._decorator,d=l.ccclass,f=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.devilSealPrefab=null,t.baGuaViewPrefab=null,t.topResourcePrefab=null,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){this.setTopUI(),this.onAddEvent(this.btnCloseNode,this.onClickClose.bind(this)),this.onAddEvent(this.baguaBtnNode,this.onClickBtn.bind(this,r.FunctionIdList.BaZhen)),this.onAddEvent(this.fengmoBtnNode,this.onClickBtn.bind(this,r.FunctionIdList.FengMo))},t.prototype.onInitChild=function(e){this.currentTab=e,this.initView()},t.prototype.initFindNode=function(){this.btnCloseNode=this.findChild(this.node,"frame/top/btnClose"),this.baguaBtnNode=this.findChild(this.node,"frame/bottom/btn1"),this.fengmoBtnNode=this.findChild(this.node,"frame/bottom/btn2"),this.baguaViewNode=this.findChild(this.node,"frame/baguaView"),this.fengmoViewNode=this.findChild(this.node,"frame/fengmoView"),this.top=this.findChild(this.node,"frame/top/TopResources")},t.prototype.initView=function(){this.top.childrenCount<=0&&(cc.instantiate(this.topResourcePrefab).parent=this.top);this.onClickBtn(this.currentTab)},t.prototype.onClickClose=function(){this.closeView()},t.prototype.onClickBtn=function(e){var t;if(this.currentTab=e,this.currentTab==r.FunctionIdList.BaZhen)t=this.baguaBtnNode,this.baguaViewNode&&!this.baguaViewNode.getChildByName("BaGuaView")&&((i=cc.instantiate(this.baGuaViewPrefab)).parent=this.baguaViewNode);else if(this.currentTab==r.FunctionIdList.FengMo){var i;if(t=this.fengmoBtnNode,this.fengmoViewNode&&!this.fengmoViewNode.getChildByName("DevilSeal"))(i=cc.instantiate(this.devilSealPrefab)).getComponent(c.DevilSealView).init(),i.parent=this.fengmoViewNode}this.baguaViewNode.active=this.currentTab==r.FunctionIdList.BaZhen,this.fengmoViewNode.active=this.currentTab==r.FunctionIdList.FengMo,t&&t.getComponent(s.default).selectOnClick()},o([f(cc.Prefab)],t.prototype,"devilSealPrefab",void 0),o([f(cc.Prefab)],t.prototype,"baGuaViewPrefab",void 0),o([f(cc.Prefab)],t.prototype,"topResourcePrefab",void 0),t=o([d],t)}(a.default);i.default=g,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../base/RadioButton":"RadioButton","../../utils/JumpActionUtils":"JumpActionUtils","../DevilSeal/DevilSealView":"DevilSealView"}],BagAddView:[function(e,t,i){"use strict";cc._RF.push(t,"bb0bcK8Ea9ALIk39Kdb/EF0","BagAddView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ProtoConfig"),r=e("../../../engine/UIManager"),c=e("../../../engine/ViewBase"),l=e("../../config/BagConfig"),d=e("../../config/ChongZhiConfig"),f=e("../../config/GameConfig"),g=e("../../config/GameConst"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=e("../../event/CommonEvent"),m=e("../../miniGameTools/tttool"),C=e("../../model/AdModel"),_=e("../../model/PrivilegeModel"),v=e("../../model/RoleInfoModel"),y=e("../../network/SocketClient"),b=e("../../sdk/LoongCheerManager"),I=e("../../sdk/SdkHandler"),M=e("../../sdk/SdkHelper"),w=e("../../sdk/SdkManager"),k=e("../../utils/UIHelper"),S=cc._decorator,P=S.ccclass,E=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chongzhiId=8,t}return n(t,e),t.prototype.onShow=function(){var e=this.getChild(this.node,"view");this.btnAd=this.getChild(e,"btnPanel/btnAd"),this.btnCoin=this.getChild(e,"btnPanel/btnGold"),this.btnGem=this.getChild(e,"btnPanel/btnGem"),this.btnBuy=this.getChild(e,"btnPanel/btnBuy"),this.button_mianfeihuode_gkgg=this.getChild(this.node,"view/btnPanel/btnAd/button_mianfeihuode_gkgg"),this.initData(),this.onEvent(),this.refreshInfo()},t.prototype.refreshInfo=function(){_.default.hadFreePrivilege()&&(this.button_mianfeihuode_gkgg.active=!1)},t.prototype.onEvent=function(){a.EventManager.instance.on(p.CommonEvent.Event_ad_end,this.onAdEnd,this),this.onAddEvent(this.btnCoin,this.onAddBagAmount.bind(this,1)),this.onAddEvent(this.btnGem,this.onAddBagAmount.bind(this,2)),this.onAddEvent(this.btnAd,this.onAddBagAmount.bind(this,3)),this.onAddEvent(this.btnBuy,this.onAddBagAmount.bind(this,4))},t.prototype.initData=function(){this.btnGem.active=this.btnAd.active=!1;var e=l.BagConfig.getConfigById(v.default.addBagTimes+1);if(null!=e){this.conifg=e;for(var t=[e.gold,e.gem,e.ad],i=[this.btnCoin,this.btnGem,this.btnAd],n=0;n<t.length;n++)if(0!=t[n]){if(0==n)this.getChild(this.btnCoin,"lblCoin",cc.Label).string=k.UIHelper.tranNumber(e.gold);else this.getChild(this.btnGem,"lblCoin",cc.Label).string=""+e.gem;i[n].active=!0}this.btnCoin.active=this.conifg.gold>0,v.default.instance.maxServerBagNum-v.default.instance.bagAMount>=50?this.btnBuy.active=!0:this.btnBuy.active=!1;var o=d.ChongZhiConfig.getChongZhiByIdAndPlatform(this.chongzhiId);this.btnBuy.getChildByName("lblCoin").getComponent(cc.Label).string=o.getMoneyStr(),f.GameConfig.isOpenAd||(this.btnAd.active=!1)}},t.prototype.onAddBagAmount=function(e){var t;if(v.default.instance.bagAMount>=v.default.instance.maxServerBagNum)u.WordConfig.showWord(60358);else switch(e){case 1:v.default.instance.getCoin()>=this.conifg.gold&&(t=!0),t?f.GameConfig.connectServer?y.default.req_buy(5,1,1,1,1,"1"):(v.default.instance.addBagAmount(),this.initData(),a.EventManager.instance.dispatch(g.EVENT_NAME.BAG_ADD_AMOUNT),a.EventManager.instance.dispatch(g.EVENT_NAME.DEC_COIN)):f.GameConfig.isWechat()?C.default.getAdLostTimes(C.Ad_Type.Coin)>0?r.default.instance.createView(h.default.gameView.buyMoney):u.WordConfig.showWord(60102):k.UIHelper.showCoinNoEnough();break;case 2:v.default.instance.getGold()>=this.conifg.gem&&(t=!0),t?y.default.req_buy(5,2,1,1,1,"1"):u.WordConfig.showWord(60115);break;case 3:_.default.hadFreePrivilege()?this.onAdEnd():f.GameConfig.isWechat()?m.tttool.OpenAD():f.GameConfig.sdkType==f.SdkType.BingNiao?M.default.sdkAd():w.default.sdkAd(I.AdType.videoAd,b.AdPosId.bagupgrade);break;case 4:var i=d.ChongZhiConfig.getChongZhiByIdAndPlatform(this.chongzhiId);y.default.req_charge(i.id),this.closeView()}},t.prototype.onAdEnd=function(){y.default.s_req_statistics(29),y.default.req_buy(5,2,1,1,1,"1"),k.UIHelper.showTip("\u80cc\u5305\u6269\u5c55\u5b8c\u6210")},t.prototype.onSocketRespMsg=function(e,t){e==s.ProtoConfig.c_req_buy&&this.initData()},t=o([P],t)}(c.default));i.default=E,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/BagConfig":"BagConfig","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../miniGameTools/tttool":"tttool","../../model/AdModel":"AdModel","../../model/PrivilegeModel":"PrivilegeModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../sdk/LoongCheerManager":"LoongCheerManager","../../sdk/SdkHandler":"SdkHandler","../../sdk/SdkHelper":"SdkHelper","../../sdk/SdkManager":"SdkManager","../../utils/UIHelper":"UIHelper"}],BagConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b3cfdjIM45B45+QjcWz1Rrd","BagConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bag=50,t.gold=1,t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.bag=e.bag,i.gold=e.gold,i.gem=e.gem,i.ad=e.ad,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i),n.bag>t.MAX_COUNT&&(t.MAX_COUNT=n.bag)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id==e&&(t=i)}),t},t.configMap=new Map,t.MAX_COUNT=0,t}(e("./JsonConfigBase").JsonConfigBase);i.BagConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],BagEqItemInfo:[function(e,t,i){"use strict";cc._RF.push(t,"f176dYPtWNJtpO9oGOXZPgw","BagEqItemInfo");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/ColorConfig"),g=e("../../config/EquipConfig"),h=e("../../config/GameConst"),u=e("../../config/ITemsConfig"),p=e("../../config/JingJieConfig"),m=e("../../config/MadelzhulingConfig"),C=e("../../config/MagicNameConfig"),_=e("../../config/MapConfig"),v=e("../../config/MedalConfig"),y=e("../../config/RandomFuMoConfig"),b=e("../../config/RuneConfig"),I=e("../../config/SpecialRingConfig"),M=e("../../config/SpecialRingEffectConfig"),w=e("../../config/ViewConfig"),k=e("../../config/WordConfig"),S=e("../../event/CommonEvent"),P=e("../../model/BlessModel"),E=e("../../model/BusinessModel"),L=e("../../model/EquipGridModel"),T=e("../../model/ItemInfoModel"),R=e("../../model/JingJieModel"),N=e("../../model/MagicModel"),B=e("../../model/RoleInfoModel"),A=e("../../network/SocketClient"),G=e("../../prefab/ItemPrefab"),x=e("../../utils/MusicHelper"),O=e("../../utils/UIHelper"),V=cc._decorator,j=V.ccclass,D=(V.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseNodeList=[],t.randomNodeList=[],t.fuwenList=[],t.fuwenNodeList=[],t.funwenAtrNodeList=[],t.zhulingNodeList=[],t.showFrom=0,t.zhanshi=0,t.bagType=-1,t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e,t,i,n,o){if(void 0===t&&(t=0),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=-1),this.isAuto=n,this.model=e,this.modelId=this.model.itemId,this.showFrom=t,this.bagType=o,this.zhanshi=e.isExhibition?e.isExhibition:0,this.config=g.EquipConfig.getEquipConfigById(this.model.itemType),this.config.world==_.MapConfig.WORLD.LunHui){this.runConfig=b.RuneConfig.getRuneById(this.model.fuwenId);for(var a=0;a<this.model.fuwenNeedList.length;a++)this.fuwenList[a]=null}},t.prototype.onShow=function(){var e=this;l.default.instance.setTopUI(this.viewPath);var t=this.getChild(this.node,"view/pnlValue");this.pnlValue=t,this.btnUser=this.getChild(t,"bottom/bottom/user"),this.btnLock=this.getChild(t,"bottom/bottom/lock"),this.btnzhanshi=this.getChild(t,"bottom/bottom/zhanshi"),this.btnClose=this.getChild(t,"top/top/btnClose"),this.btnRefine=this.getChild(t,"top/btn/btnRefine"),this.but_tujian=this.getChild(t,"top/btn/but_tujian"),this.but_tujian.active=!1,this.btnHuishou=this.getChild(t,"top/btn/but_huishou"),this.btnHuishou.active=1==this.bagType&&L.EquipGridModel.isShowHuishou(this.model),this.btnHuishou.active&&(null==E.BusinessModel.instance.getRestNum()&&E.BusinessModel.instance.sendReq_reback_info(),this.onAddEvent(this.btnHuishou,function(){E.BusinessModel.instance.startSellOne(e.model),e.closeView()})),this.btnCompared=this.getChild(t,"top/top/btnCompared"),this.itemBaseNode=this.findChild(t,"mid/content/itemBaseNode"),this.itemInfo=this.findChild(t,"mid/content/itemInfo"),this.itemRandomNode=this.findChild(t,"mid/content/itemRandomNode"),this.txtFanRenZhiLi=this.getChild(t,"top/top/pnlType/val/txtFanRenZhiLi"),this.txtFightName=this.getChild(t,"top/top/pnlType/val/txtFanRenZhiLi/txtFightName"),this.txtFightName.getComponent(cc.Label).string=(p.JingJieConfig.getDesc(this.config.world)||"\u6218\u529b")+"\uff1a",this.itemFuWen=this.findChild(t,"mid/content/itemFuWen"),this.itemFuWen.active=!1,this.itemGodNode=this.findChild(t,"mid/content/itemGodNode"),this.itemGodNode.active=!1,this.itemGodInfo=this.findChild(t,"mid/content/itemGodInfo"),this.itemGodInfo.active=!1,this.itemSpecialNode=this.findChild(t,"mid/content/itemSpecialNode"),this.itemSpecialNode.active=!1,this.itemSpecialInfo=this.findChild(t,"mid/content/itemSpecialInfo"),this.itemSpecialInfo.active=!1,this.itemzhulingNode=this.findChild(t,"mid/content/itemzhulingNode"),this.itemzhulingNode.active=!1,this.itemzhulingInfo=this.findChild(t,"mid/content/itemzhulingInfo"),this.itemzhulingInfo.active=!1,this.itemDes=this.findChild(t,"mid/content/itemDes"),this.itemDes.active=!1,this.initData(),this.onEvent()},t.prototype.initData=function(){if(this.model){var e=this.model.getConfig();this.config=g.EquipConfig.getEquipConfigById(e.id),this.initBtn(),this.initPnlvalue(),this.refreshAttriInfo(this.model,this.config)}},t.prototype.onSocketRespMsg=function(e,t){if(e==r.ProtoConfig.c_seq_embed){var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_seq_embed,t);this.model=T.default.getItemByid(this.modelId),1==i.getRet()&&(this.initData(),this.model.fuwenActive&&k.WordConfig.showWord(60359))}else if(e==r.ProtoConfig.c_seq_unembed){i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_seq_unembed,t);this.model=T.default.getItemByid(this.modelId),this.refreshAttriInfo(this.model,this.config)}},t.prototype.initBtn=function(){this.model.gridId>=0?(this.getChild(this.btnUser,"up",cc.Node).active=!1,this.getChild(this.btnUser,"down",cc.Node).active=!0):(this.getChild(this.btnUser,"up",cc.Node).active=!0,this.getChild(this.btnUser,"down",cc.Node).active=!1),this.getChild(this.btnLock,"open",cc.Node).active=!this.model.isLock,this.getChild(this.btnLock,"close",cc.Node).active=this.model.isLock;var e=g.EquipConfig.getGridTypeByPart(this.config.position,!0),t=B.default.instance.getEquipModelByGrid(e);this.config.position!=h.Position.BRACELET&&this.config.position!=h.Position.RING&&this.config.position!=h.Position.BRACELET_lunhui&&this.config.position!=h.Position.RING_lunhui||t||(e=g.EquipConfig.getGridTypeByPart(this.config.position,!1),t=B.default.instance.getEquipModelByGrid(e));var n=0;if(n=this.model?T.default.getItemAmountById(this.model.itemId):T.default.getItemAmount(this.config.id),t&&this.model&&t.itemId!=this.model.itemId&&this.model.gridId<=0?this.btnCompared.active=0==this.zhanshi:this.btnCompared.active=!1,this.btnRefine.active=!1,(this.model.randAttrList.length>0||this.model.fuwenAtriList.length>0)&&(this.btnRefine.active=0==this.zhanshi),this.config.cid==g.EquipCid.Special_Ring){var o=I.SpecialRingConfig.getConfigByEquipId(this.config.id);-1!=Number(o.composegoal)&&(this.btnRefine.active=0==this.zhanshi)}this.getChild(this.node,"view/pnlValue/bottom/bottom/txtSellMoney").active=!1,s.Logger.log("showFrom==================",n,this.showFrom),n<=0&&(this.btnRefine.active=!1,0==this.config.isrecov&&(this.getChild(this.node,"view/pnlValue/bottom/bottom/txtSellMoney").active=!0,this.getChild(this.node,"view/pnlValue/bottom/bottom/txtSellMoney",cc.Label).string=this.config.getPrice(this.model.quality)+k.WordConfig.getWord(60544)),this.getChild(this.btnLock,"open",cc.Node).parent.active=!1,this.getChild(this.btnUser,"down",cc.Node).parent.active=!1),1==this.config.dingzhi&&(this.btnRefine.active=!1),this.showFrom==i.showFromRank||2==this.zhanshi?(this.btnRefine.active=!1,this.btnLock.active=!1,this.btnUser.active=!1,this.btnCompared.active=!1,0==this.config.isrecov&&(this.getChild(this.node,"view/pnlValue/bottom/bottom/txtSellMoney").active=!0,this.getChild(this.node,"view/pnlValue/bottom/bottom/txtSellMoney",cc.Label).string=this.config.getPrice(this.model.quality)+k.WordConfig.getWord(60544))):this.showFrom==i.showFromMe&&(this.btnUser.active=!1,this.btnRefine.active=!1,this.btnLock.active=!1),s.Logger.log("\u9884\u89c8\u88c5\u5907===",this.showFrom,this.model),this.btnzhanshi.active=1==this.zhanshi,this.btnUser.active=this.btnUser.active&&0==this.zhanshi,this.btnLock.active=this.btnLock.active&&0==this.zhanshi},t.prototype.onEvent=function(){this.onAddEvent(this.btnUser,this.onUser.bind(this)),this.onAddEvent(this.btnLock,this.onLock.bind(this)),this.onAddEvent(this.btnClose,this.onClose.bind(this)),this.onAddEvent(this.btnRefine,this.onRefine.bind(this)),this.onAddEvent(this.btnCompared,this.onCompared.bind(this)),this.onAddEvent(this.btnzhanshi,this.onZhanshi.bind(this))},t.prototype.onZhanshi=function(){this.model.itemname=this.getChild(this.pnlValue,"top/top/title",cc.Label).string,a.EventManager.instance.dispatch(S.CommonEvent.Event_ADD_ZHANSHI,this.model),this.closeView()},t.prototype.initPnlvalue=function(){var e=this.config,t=this.getChild(this.pnlValue,"top/top/title",cc.Label);this.config.world==_.MapConfig.WORLD.FanRen?t.string=e.name+k.WordConfig.getWord(60542):t.string=e.name+k.WordConfig.getWord(60543),1003==e.cid&&(t.string=e.name),t.node.color=f.ColorConfig.getQualityColor(this.model.quality),this.getChild(this.pnlValue,"top/top/pnlType/icon").getComponent(G.default).init(this.model);var i=this.getChild(this.pnlValue,"top/top/pnlType/val");O.UIHelper.formatPart(i.getChildByName("txtType").getComponent(cc.Label),e.position),O.UIHelper.formatRoleOccupation(i.getChildByName("txtOccupation").getComponent(cc.Label),e.pro),O.UIHelper.formatRoleLevel(i.getChildByName("cdtionLevel").getComponent(cc.Label),e),O.UIHelper.formatQuality(i.getChildByName("lblQuality").getComponent(cc.Label),this.model.quality),this.model.quality>h.GameConst.QUALITY.WHITE?(i.getChildByName("jipin").active=!0,this.config.cid==g.EquipCid.XunZhang||(O.UIHelper.formatHighestGrade(i.getChildByName("jipin").getComponent(cc.Label),this.model),this.getChild(this.pnlValue,"top/top/pnlType/title/jipin").active=!0),1003==this.config.cid&&(this.getChild(this.pnlValue,"top/top/pnlType/title/jipin").active=!1,i.getChildByName("jipin").active=!1)):(i.getChildByName("jipin").active=!1,this.getChild(this.pnlValue,"top/top/pnlType/title/jipin").active=!1)},t.prototype.onUser=function(){if(2!=this.model.getConfig().world||R.JingJieModel.hadOpenJingJie(2))if(this.model.gridId<0){s.Logger.log("BagEqItemInfo=============22===",this.model,this.config),B.default.instance.addEquipByPosition(this.config.position,this.model.itemId)==h.ADD_EQ.SUCCESS&&this.onClose()}else B.default.instance.removeEquip(this.model.gridId),this.onClose();else k.WordConfig.showWord(60237)},t.prototype.onLock=function(){var e=T.default.getItemByid(this.model.itemId);this.model.isLock=!this.model.isLock,s.Logger.log("onLock====",e.itemId,this.model.isLock,e.isLock),A.default.s_equip_lock(e.itemId,this.model.isLock),this.onClose()},t.prototype.onRefine=function(){l.default.instance.closeView(w.default.gameView.equipInfo),this.config.cid==g.EquipCid.Special_Ring&&l.default.instance.createView(w.default.gameView.SpecialEquipComplexView,null,this.model),this.config.world==_.MapConfig.WORLD.FanRen?l.default.instance.createView(w.default.gameView.refine,null,this.model):this.config.world==_.MapConfig.WORLD.LunHui&&l.default.instance.createView(w.default.gameView.cuilian,null,this.model)},t.prototype.onCompared=function(){var e=this,t=function(){e.onClose()}.bind(this);l.default.instance.createView(w.default.gameView.equipContrastView,null,this.model,t,this.isAuto)},t.prototype.onClose=function(){l.default.instance.closeView(w.default.gameView.equipInfo)},t.prototype.refreshAttriInfo=function(e,t){var n=this;if(1==t.dingzhi&&t.world==_.MapConfig.WORLD.FanRen?this.txtFanRenZhiLi.getChildByName("txtFightValue").getComponent(cc.Label).string=g.EquipConfig.getFanRenZhiLiByDingZhi(t)+"":this.txtFanRenZhiLi.getChildByName("txtFightValue").getComponent(cc.Label).string=e.fight+"",this.itemInfo.active=!1,this.itemRandomNode.active=!1,this.itemFuWen.active=!1,this.but_tujian.active=!1,this.config.cid!=g.EquipCid.XunZhang)if(this.config.cid!=g.EquipCid.Special_Ring){var o=[C.MagicNameConfig.MagicId.atk,C.MagicNameConfig.MagicId.mag,C.MagicNameConfig.MagicId.spt,C.MagicNameConfig.MagicId.def,C.MagicNameConfig.MagicId.hp];for(O=0;O<o.length;O++){D=j=e.getBaseAddValue(o[O]);if(1==t.dingzhi?D=t.d_jipin[o[O]]:o[O]==C.MagicNameConfig.MagicId.atk?D+=t.atk:o[O]==C.MagicNameConfig.MagicId.mag?D+=t.mag:o[O]==C.MagicNameConfig.MagicId.spt?D+=t.spt:o[O]==C.MagicNameConfig.MagicId.def?D+=t.def:o[O]==C.MagicNameConfig.MagicId.hp&&(D+=t.hp),D>0){V=void 0;this.baseNodeList[O]?V=this.baseNodeList[O]:(V=cc.instantiate(this.itemInfo),this.baseNodeList[O]=V),V.parent=this.itemInfo.parent,V.active=!0,(z=V.getChildByName("txtDesc").getComponent(cc.Label)).string=C.MagicNameConfig.getDesc(o[O])+":",(J=V.getChildByName("txtDefaultValue").getComponent(cc.Label)).string=""+D;Y=V.getChildByName("txtExtra").getComponent(cc.Label);t.dingzhi,Y.string="("+j+")",Y.node.active=j>0}}if(e.blessAtttList.length>0){var a=cc.instantiate(this.itemGodNode);a.parent=this.itemGodNode.parent,a.active=!0;for(O=0;O<e.blessAtttList.length;O++){var r=cc.instantiate(this.itemGodInfo);r.parent=this.itemGodInfo.parent,r.active=!0,r.getChildByName("txtDesc").getComponent(cc.Label).string=P.default.getdes(e.blessAtttList[O].blessId,e.blessAtttList[O].blessValue)}}if(t.world==_.MapConfig.WORLD.FanRen){e.randAttrList.length>0&&(this.itemRandomNode.active=!0,this.itemRandomNode.zIndex=2);for(O=0;O<e.randAttrList.length;O++){var c=e.randAttrList[O];V=void 0;(V=this.randomNodeList[O]?this.randomNodeList[O]:cc.instantiate(this.itemInfo)).parent=this.itemInfo.parent,V.zIndex=3,V.active=!0;var d=y.RandomFuMoConfig.getRandomFuMoConfig(t,c.magicId),h=y.RandomFuMoConfig.getMagicValueByConfig(d,t.level);(z=V.getChildByName("txtDesc").getComponent(cc.Label)).string=C.MagicNameConfig.getDesc(c.magicId)+":"+N.default.formatMagicValue(c.magicId,c.magicValue),(J=V.getChildByName("txtDefaultValue").getComponent(cc.Label)).node.active=!1,J.node.x=z.node.x+z.node.width;Y=V.getChildByName("txtExtra").getComponent(cc.Label);1==t.dingzhi?(Y.string=cc.js.formatStr(k.WordConfig.getWord(60423),N.default.formatMagicValue(c.magicId,c.magicValue)),Y.node.color=f.ColorConfig.hexToColor("#df1500"),z.node.color=f.ColorConfig.hexToColor("#df1500")):(z.node.color=g.EquipConfig.getRandomAttColor(t,c),Y.string=cc.js.formatStr(k.WordConfig.getWord(60423),N.default.formatMagicValue(c.magicId,h[1])),Y.node.color=z.node.color,J.node.color=z.node.color),this.randomNodeList[O]=V}}else if(t.world==_.MapConfig.WORLD.LunHui&&this.runConfig){this.itemFuWen.active=!0,this.but_tujian.active=0==this.zhanshi,this.itemFuWen.zIndex=2,this.onAddEvent(this.but_tujian,function(){l.default.instance.createView(w.default.gameView.tujianInfo)});var p=this.itemFuWen.getChildByName("txtFuWenName"),b=p.getChildByName("txtName").getComponent(cc.Label);b.string=this.runConfig.name,b.node.color=f.ColorConfig.getFuWenColor(this.runConfig.quality);var S=p.getChildByName("txtStatus").getComponent(cc.Label);this.model.fuwenActive?(S.string=k.WordConfig.getWord(60421),S.node.color=f.ColorConfig.GreenColor):(S.string=k.WordConfig.getWord(60422),S.node.color=f.ColorConfig.RedColor),(Z=this.itemFuWen.getChildByName("imgPro").getChildByName("itemInfo")).active=!1;for(O=0;O<e.fuwenAtriList.length;O++){var E=void 0;this.funwenAtrNodeList[O]?E=this.funwenAtrNodeList[O]:(E=cc.instantiate(Z),this.funwenAtrNodeList[O]=E),E.active=!0,E.zIndex=4,E.parent=Z.parent;var L=E.getChildByName("leftNode");z=L.getChildByName("txtDesc").getComponent(cc.Label);this.showFrom==i.showFromRank?z.string=C.MagicNameConfig.getDesc(e.fuwenAtriList[O].magicId,this.config.pro)+":":z.string=C.MagicNameConfig.getDesc(e.fuwenAtriList[O].magicId)+":",(J=L.getChildByName("txtDefaultValue").getComponent(cc.Label)).string=""+N.default.formatMagicValue(e.fuwenAtriList[O].magicId,e.fuwenAtriList[O].magicValue),J.node.x=z.node.x+z.node.width;Y=E.getChildByName("txtExtra").getComponent(cc.Label);this.model.fuwenActive?(z.node.color=g.EquipConfig.getColorByCurrAndMax(e.fuwenAtriList[O].magicValue,e.fuwenAtriList[O].max),J.node.color=z.node.color,Y.node.color=z.node.color):(z.node.color=f.ColorConfig.hexToColor("#6f6f6f"),J.node.color=f.ColorConfig.hexToColor("#6f6f6f"),Y.node.color=f.ColorConfig.hexToColor("#6f6f6f")),Y.string=cc.js.formatStr(k.WordConfig.getWord(60423),N.default.formatMagicValue(e.fuwenAtriList[O].magicId,e.fuwenAtriList[O].max))}var T=this.itemFuWen.getChildByName("fuWenContainer").getChildByName("fuwen");T.active=!1;var R=function(t){var o=u.ITemsConfig.getITemsConfigById(e.fuwenNeedList[t].item_type),a=void 0,s=void 0,r=void 0;B.fuwenNodeList[t]?(s=(a=B.fuwenNodeList[t]).getChildByName("btnEquip"),r=a.getChildByName("btnUnEquip")):(a=cc.instantiate(T),B.fuwenNodeList.push(a),s=a.getChildByName("btnEquip"),r=a.getChildByName("btnUnEquip"),s.on(cc.Node.EventType.TOUCH_END,function(){x.MusicHelper.play_click(),n.onClickEmbed(e.fuwenNeedList[t].index,n.model.fuwenNeedList[t].item_type)},B),r.on(cc.Node.EventType.TOUCH_END,function(){x.MusicHelper.play_click(),n.onClickUnEmbed(e.fuwenNeedList[t].index,n.model.fuwenNeedList[t].item_type)},B)),a.active=!0,a.parent=T.parent;var c=a.getChildByName("fuwenNo"),l=a.getChildByName("fuwenHad");c.active=!1,l.active=!1;var d="";d=o.rune>=10?"$"+o.rune%10:""+o.rune%10,c.getChildByName("txtValue").getComponent(cc.Label).string=d+"",l.getChildByName("txtValue").getComponent(cc.Label).string=d+"",B.model.fuwenActive||1==B.model.embedRuneList[B.model.fuwenNeedList[t].index]?(l.active=!0,s.active=!1,r.active=0==B.zhanshi,B.showFrom!=i.showFromMe&&B.showFrom!=i.showFromRank||(r.active=!1)):(c.active=!0,s.active=0==B.zhanshi,r.active=!1,B.showFrom==i.showFromMe&&(s.active=!1))},B=this;for(O=0;O<e.fuwenNeedList.length;O++)R(O)}if(t.des1){var A=cc.instantiate(this.itemDes);A.parent=this.itemDes.parent,A.zIndex=4,A.active=!0,A.getChildByName("des").getComponent(cc.Label).string="   "+t.des1}}else{var G=I.SpecialRingConfig.getConfigByEquipId(this.config.id);q=G.formatBaseValue(G.base_value);s.Logger.log("formatBaseValue===",G.formatBaseValue(G.base_value)),this.btnHuishou.active=!1;for(var O=0;O<q.length;O++){var V=void 0;this.baseNodeList[O]?V=this.baseNodeList[O]:(V=cc.instantiate(this.itemInfo),this.baseNodeList[O]=V),V.parent=this.itemInfo.parent,V.active=!0;var j=e.getBaseAddValue(q[O].magicId),D=N.default.formatMagicValue(q[O].magicId,q[O].magicValue+j);(z=V.getChildByName("txtDesc").getComponent(cc.Label)).string=C.MagicNameConfig.getDesc(q[O].magicId)+":",(J=V.getChildByName("txtDefaultValue").getComponent(cc.Label)).string=D,J.node.x=z.node.x+55*z.string.length/3,s.Logger.log("txtDefaultValue.node.x==",z.string,J.node.x,z.node.x,z.node.width),(Y=V.getChildByName("txtExtra").getComponent(cc.Label)).string="("+j+")",Y.node.active=j>0}if(e.specialEffect>0){var F=M.SpecialRingEffectConfig.getConfigById(e.specialEffect);if(F){var H=cc.instantiate(this.itemSpecialNode);H.parent=this.itemSpecialNode.parent,H.active=!0;var U=cc.instantiate(this.itemSpecialInfo);U.parent=this.itemSpecialInfo.parent,U.active=!0,U.getChildByName("txtDesc").getComponent(cc.Label).string=F.des}}}else{var W=v.MedalConfig.getConfigByEquipId(this.config.id),q=v.MedalConfig.formatBaseValue(W.base_value);s.Logger.log("formatBaseValue===",v.MedalConfig.formatBaseValue(W.base_value));for(var O=0;O<q.length;O++){var V=void 0;this.baseNodeList[O]?V=this.baseNodeList[O]:(V=cc.instantiate(this.itemInfo),this.baseNodeList[O]=V),V.parent=this.itemInfo.parent,V.active=!0;var z,J,Y,j=e.getBaseAddValue(q[O].magicId),D=N.default.formatMagicValue(q[O].magicId,q[O].magicValue+j);(z=V.getChildByName("txtDesc").getComponent(cc.Label)).string=C.MagicNameConfig.getDesc(q[O].magicId)+":",(J=V.getChildByName("txtDefaultValue").getComponent(cc.Label)).string=D,J.node.x=z.node.x+55*z.string.length/3,s.Logger.log("txtDefaultValue.node.x==",z.string,J.node.x,z.node.x,z.node.width),(Y=V.getChildByName("txtExtra").getComponent(cc.Label)).string="("+j+")",Y.node.active=j>0}if(e.randAttrList.length>0){this.itemzhulingNode.active=!0,this.itemzhulingNode.zIndex=2,this.itemzhulingInfo.active=!1;for(var O=0;O<this.zhulingNodeList.length;O++)this.zhulingNodeList[O].active=!1;for(var O=0;O<e.randAttrList.length;O++){var Z=void 0;(Z=this.zhulingNodeList[O]?this.zhulingNodeList[O]:cc.instantiate(this.itemzhulingInfo)).parent=this.itemzhulingInfo.parent,Z.active=!0,Z.zIndex=3+O,Z.getChildByName("txtDesc").getComponent(cc.Label).string=m.MadelzhulingConfig.getdes(e.randAttrList[O].magicId,e.randAttrList[O].magicValue)}}}},t.prototype.getLeftFuWen=function(){for(var e=0,t=0;t<this.fuwenList.length;t++)this.fuwenList[t]||e++;return e},t.prototype.checkFinishFuWen=function(){for(var e=0;e<this.fuwenList.length;e++)if(!this.fuwenList[e])return},t.prototype.getHadUseItemNum=function(e){for(var t=0,i=0;i<this.fuwenList.length;i++)this.fuwenList[i]==e&&t++;return t},t.prototype.onClickEmbed=function(e,t){var i=T.default.getItem(t);i&&i.itemCnt>0?(s.Logger.log("\u70b9\u51fb\u9576\u5d4c",e,t),A.default.s_seq_embed(Number(this.model.itemId),e)):k.WordConfig.showWord(60360)},t.prototype.onClickUnEmbed=function(e,t){var i=this;s.Logger.log("\u70b9\u51fb\u53d6\u4e0b",e,t);var n=u.ITemsConfig.getITemsConfigById(t);B.default.instance.getNeedGridCount(T.AddItemParamStruct.create(B.default.instance,h.GameConst.ITEM_KIND.ITEM,t,1,n.quality))>=0?n.runeextra>0?l.default.instance.createView(w.default.gameView.DialogCheck,null,cc.js.formatStr(k.WordConfig.getWord(60545),n.name,n.runeextra),function(t){t&&A.default.s_seq_unembed(Number(i.model.itemId),e)}):A.default.s_seq_unembed(Number(this.model.itemId),e):k.WordConfig.showWord(60001)},t.showFromRank=1,t.showFromMe=2,t=i=o([j],t)}(d.default));i.BagEqItemInfo=D,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/JingJieConfig":"JingJieConfig","../../config/MadelzhulingConfig":"MadelzhulingConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/MapConfig":"MapConfig","../../config/MedalConfig":"MedalConfig","../../config/RandomFuMoConfig":"RandomFuMoConfig","../../config/RuneConfig":"RuneConfig","../../config/SpecialRingConfig":"SpecialRingConfig","../../config/SpecialRingEffectConfig":"SpecialRingEffectConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/BlessModel":"BlessModel","../../model/BusinessModel":"BusinessModel","../../model/EquipGridModel":"EquipGridModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/JingJieModel":"JingJieModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper"}],BagItemInfo:[function(e,t,i){"use strict";cc._RF.push(t,"ca9504vcFREJYD4LASouXQv","BagItemInfo");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../model/ItemInfoModel"),l=e("../../utils/MusicHelper"),d=e("../../config/ITemsConfig"),f=e("../../prefab/ItemPrefab"),g=e("../../model/MineModel"),h=e("../../config/MineInfoConfig"),u=e("../../config/WordConfig"),p=e("../../config/GameConst"),m=e("../../model/RoleInfoModel"),C=e("../../config/ColorConfig"),_=e("../../../engine/EventManager"),v=e("../../event/CommonEvent"),y=e("../ItemIfoLimitTtime"),b=e("../../model/PrivilegeModel"),I=e("../../utils/UIHelper"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bagIndex=0,t}return n(t,e),t.prototype.onInitChild=function(e,t,i){void 0===i&&(i=!0),this.model=e,this.bagIndex=t,this.isOwn=i,this.initWidget()},t.prototype.init=function(e){this.model=e,this.initWidget()},t.prototype.initWidget=function(){this.setTopUI(),this.pnlResolution=this.getChild(this.node,"view/pnlResolution"),this.pnlResolution.active=!1,this.pnlResolution.setPosition(0,0),this.pnlDisplay=this.getChild(this.node,"view/panel1"),this.pnlUseResulo=this.getChild(this.node,"view/panel2"),this.pnlUse=this.getChild(this.node,"view/panel3"),this.pnlComplex=this.getChild(this.node,"view/panel4"),this.pnlExhibition=this.getChild(this.node,"view/panel5"),this.initData()},t.prototype.initData=function(){this.pnlComplex.active=this.pnlDisplay.active=this.pnlUseResulo.active=this.pnlUse.active=!1;var e=this.model.getConfig();1==this.model.isExhibition?this.initExhibition():this.model.itemCnt<=0||!this.isOwn||2==this.model.isExhibition?this.initDisplay():1==e.compose?this.initComplex():(1==e.use||e.break)&&this.isOwn?e.break?this.initUseResulo():this.initUse():this.initDisplay()},t.prototype.initComplex=function(){var e=this,t=this.model.getConfig();this.pnlComplex.active=!0,this.pnlDisplay.active=!1,this.pnlUse.active=!1,this.pnlUseResulo.active=!1,this.pnlComplex.setPosition(0,0);var i=this.pnlComplex.getChildByName("buttom").getChildByName("btnContainer");i.getChildByName("btnUse").on(cc.Node.EventType.TOUCH_END,this.onClickComplex.bind(this));var n=i.getChildByName("btnBreak"),o=this.getChild(this.pnlComplex,"buttom/btnAcquire");o.active=!!(t.jump_id&&t.jump_id.length>0),o.active&&this.onAddEvent(o,this.onClickJump.bind(this,t)),t.break?n.active=!0:n.active=!1,n.on(cc.Node.EventType.TOUCH_END,function(){l.MusicHelper.play_click(),e.onUseRes()}),this.pnlComplex.getChildByName("icon").getComponent(f.default).init(this.model),this.pnlComplex.getChildByName("content").getComponent(cc.RichText).string=""+t.description;var a=this.pnlComplex.getChildByName("buttom").getChildByName("needClass").getChildByName("classNum").getComponent(cc.Label);a.node.parent.active=t&&t.level>1,t&&t.level>1&&(a.string=t.level+""),this.pnlComplex.getChildByName("buttom").getChildByName("pnlNum").getChildByName("num").getComponent(cc.Label).string=this.model.itemCnt.toString(),this.getChild(this.pnlComplex,"top/close").on(cc.Node.EventType.TOUCH_END,function(){e.closeView()},this)},t.prototype.initExhibition=function(){var e=this;this.pnlExhibition.active=!0,this.pnlExhibition.x=0,this.pnlExhibition.y=0,this.initComNode(this.pnlExhibition),this.getChild(this.pnlExhibition,"content",cc.RichText).string=""+this.model.getConfig().description,this.getChild(this.pnlExhibition,"buttom/butzhanshi").on(cc.Node.EventType.TOUCH_END,function(){e.model.itemname=e.findChild(e.pnlExhibition,"icon/nameTxt").getComponent(cc.Label).string,_.EventManager.instance.dispatch(v.CommonEvent.Event_ADD_ZHANSHI,e.model),e.onClose()})},t.prototype.initDisplay=function(){this.pnlDisplay.active=!0,this.pnlDisplay.x=0,this.initComNode(this.pnlDisplay),this.getChild(this.pnlDisplay,"content",cc.RichText).string=""+this.model.getConfig().description},t.prototype.initUseResulo=function(){var e=this.model.getConfig();this.pnlUseResulo.active=!0,this.pnlUseResulo.x=0,this.pnlResolution.active=!1,this.initComNode(this.pnlUseResulo);var t=this.getChild(this.pnlUseResulo,"buttom/btnRes");t.on("click",this.onUseRes,this),t.x=108.994;var i=this.getChild(this.pnlUseResulo,"buttom/user");i.on("click",this.onUse,this),0==e.use&&(i.active=!1,t.x=0),this.getChild(this.pnlUseResulo,"content",cc.RichText).string=""+this.model.getConfig().description},t.prototype.initUse=function(){this.pnlUse.active=!0,this.pnlUse.x=0,this.initComNode(this.pnlUse);var e=this.getChild(this.pnlUse,"buttom/count/pnlEdit");this.bingdingAmountCtrl(e,this.model.itemCnt,!0),this.getChild(this.pnlUse,"buttom/btnUse").on(cc.Node.EventType.TOUCH_END,this.onUse,this),this.getChild(this.pnlUse,"content",cc.RichText).string=""+this.model.getConfig().description},t.prototype.onUseRes=function(){var e=this.model.getConfig(),t=this.pnlResolution;t.active=!0;var i=this.getChild(t,"pnlEdit");this.bingdingAmountCtrl(i,this.model.itemCnt),this.getChild(t,"block").on(cc.Node.EventType.TOUCH_END,function(){t.active=!1},this),this.getChild(t,"close").on(cc.Node.EventType.TOUCH_END,function(){t.active=!1},this),this.getChild(i,"amountEditBox",cc.EditBox).string=e.pro!=p.GameConst.OCCUPATION.None&&e.pro!=m.default.instance.occupation?this.model.itemCnt.toString():"1",this.getChild(t,"pnlNum/num",cc.Label).string=""+this.model.itemCnt,this.getChild(t,"btnUse").on("click",this.onResolu,this)},t.prototype.initComNode=function(e){(this.getChild(e,"icon").getComponent(f.default).init(this.model),this.getChild(e,"top/close").on("click",this.onClose,this),e.getComponent(y.default).setTimeLimitLabel(this.model.end_time),this.getChild(e,"buttom").getChildByName("pnlNum"))&&((i=this.getChild(e,"buttom/pnlNum/num",cc.Label)).string=""+this.model.itemCnt,this.model.itemCnt<0&&(i.node.parent.parent.active=!1));var t=this.getChild(e,"buttom").getChildByName("levelNum");if(t){var i,n=this.model.getConfig();if(n.level>1)t.active=!0,(i=this.getChild(e,"buttom/levelNum/num",cc.Label)).string=n.level.toString(),i.node.color=m.default.instance.level>=n.level?C.ColorConfig.GreenColor:C.ColorConfig.RedColor;else t.active=!1}var o=this.model.getConfig(),a=e.getChildByName("buttom").getChildByName("btnAcquire");a.active=!!(o.jump_id&&o.jump_id.length>0),a.active&&this.onAddEvent(a,this.onClickJump.bind(this,o))},t.prototype.onUse=function(){l.MusicHelper.play_click();var e=0;e=this.editboxAmount?parseInt(this.editboxAmount.string):1;var t=this.model.getConfig();if("kpower"==t.position){if(!this.checkCanUseKPower(e))return}else if("active_book"==t.position)s.default.instance.createView(r.default.gameView.HandbookView);else if("vipcard"==t.position){var i=t.magic_value[0];return b.default.canUseExperience(i)?i===b.default.Privilege_Type.recovery?s.default.instance.createView(r.default.gameView.PrivilegeRecovery):i===b.default.Privilege_Type.FightGod?s.default.instance.createView(r.default.gameView.PrivilegeFightGodView):i===b.default.Privilege_Type.GameHelper&&s.default.instance.createView(r.default.gameView.AutoRobotSettingView):I.UIHelper.showTip("\u60a8\u5df2\u6fc0\u6d3b\u7279\u6743,\u65e0\u9700\u8bd5\u7528"),void this.onClose()}this.onClose(),this.model.useArticle(e,this.bagIndex)},t.prototype.checkCanUseKPower=function(e){var t=this.model.getConfig(),i=h.MineInfoConfig.getConfigById(1);return!(g.MinePersonaInfoModel.getCurrPower()+e*t.magic_value[0]>i.max_power)||(u.WordConfig.showWord(60361),!1)},t.prototype.onResolu=function(){l.MusicHelper.play_click(),this.onClose();var e=parseInt(this.editboxAmount.string)||1;c.default.resolutionArticle(this.model,e,this.bagIndex)},t.prototype.bingdingAmountCtrl=function(e,t,i){void 0===i&&(i=!1);var n=this.getChild(e,"amountEditBox",cc.EditBox);(n.string="1",i)&&(this.model.getConfig().max_amo==d.ITemsConfig.MAX_AMO.max_amo&&(n.string=t.toString()));this.editboxAmount=n;var o=function(){var e=parseInt(n.string)||0;e=(e=e<1?1:e)>t?t:e,n.string=""+e},a=function(){o()};n.node.off("text-changed"),n.node.on("text-changed",a,this);var s=this.getChild(e,"btn_jia"),r=this.getChild(e,"btn_jian"),c=this.getChild(e,"btn_max");s.off("click"),r.off("click"),c.off("click"),s.on("click",function(){var e=parseInt(n.string)||0;n.string=""+ ++e,o()},this),r.on("click",function(){var e=parseInt(n.string)||0;n.string=""+--e,o()},this),c.on("click",function(){n.string=""+t,a()},this)},t.prototype.onClickComplex=function(){this.closeView(),l.MusicHelper.play_click(),s.default.instance.createView(r.default.gameView.complex,null,this.model)},t.prototype.onClose=function(){s.default.instance.closeView(r.default.gameView.ItemInfo),l.MusicHelper.play_click()},t.prototype.formatName=function(e){switch(e.length){case 1:case 2:case 3:return e;case 4:case 5:return e.slice(0,2)+"\n"+e.slice(2);case 6:return e.slice(0,3)+"\n"+e.slice(3)}},t.prototype.onClickJump=function(e){s.default.instance.createView(r.default.gameView.ItemAcquire,null,this.model,e),this.closeView()},t=o([w],t)}(a.default));i.default=k,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MineInfoConfig":"MineInfoConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/MineModel":"MineModel","../../model/PrivilegeModel":"PrivilegeModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","../ItemIfoLimitTtime":"ItemIfoLimitTtime"}],BagItem:[function(e,t,i){"use strict";cc._RF.push(t,"eb45fIxl5VE2opfa/DaQ0X5","BagItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ComponentBase"),s=e("../../../engine/UIManager"),r=e("../../config/BaGuaEquipConfig"),c=e("../../config/EquipConfig"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../config/ViewConfig"),g=e("../../config/WordConfig"),h=e("../../model/ItemInfoModel"),u=e("../../model/RoleInfoModel"),p=e("../../network/SocketClient"),m=e("../../prefab/ItemPrefab"),C=e("../../utils/MusicHelper"),_=e("./HouseView"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cb=null,t.bagIndex=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.onEvent()},t.prototype.init=function(e,t,i){void 0===i&&(i=null),this.model=e,this.bagIndex=t,this.cb=i,this.initWidget()},t.prototype.setShowArticle=function(e){for(var t=this.node.getChildByName("content").children,i=0;i<t.length;i++)"contetn"==t[i].name?t[i].active=!0:t[i].active=e;this.model=null},t.prototype.initWidget=function(){this.spRed=this.getChild(this.node,"content/spRed"),this.itemPrefab=this.getChild(this.node,"content/ItemPrefab"),this.initData()},t.prototype.onEvent=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch.bind(this))},t.prototype.onTouch=function(){if(this.model)if(this.cb)this.cb(this.model);else{if(1==this.model.isNew)this.spRed.active=!1,this.model.isNew=!1,h.default.getItemByid(this.model.itemId).isNew=!1,u.default.saveToLocalStorage();if(C.MusicHelper.play_click(),_.default.instance&&_.default.instance.node.active){var e=d.ITemsConfig.getITemsConfigById(this.model.itemType),t=c.EquipConfig.getEquipConfigById(this.model.itemType);e&&0==e.storage||t&&0==t.storage?p.default.s_update_baghouse_item(parseInt(this.model.itemId),1,this.model.itemType):g.WordConfig.showWord(60212)}else{if("expball"==this.model.getConfig().position||"expball_full"==this.model.getConfig().position)return void s.default.instance.createView(f.default.gameView.ExpBallView,null,this.model);if("I3011"==this.model.itemType)s.default.instance.createView(f.default.gameView.ReNameView);else if("I6004"==this.model.itemType)s.default.instance.createView(f.default.gameView.ZuiQiangFangYuGiftView,null,this.model);else if("I6005"==this.model.itemType)s.default.instance.createView(f.default.gameView.ZuiQiangJiNengGiftView,null,this.model);else if("I6008"==this.model.itemType)s.default.instance.createView(f.default.gameView.ZuiQiangQunGongGiftView,null,this.model);else if(2==this.model.itemKind)s.default.instance.createView(f.default.gameView.equipInfo,null,this.model,0,!1,!1,1);else if("sell"==this.model.getConfig().position)s.default.instance.createView(f.default.gameView.auctionedGoodInfoView,null,this.model);else if(this.model.itemKind==l.GameConst.ITEM_KIND.BaGua){var i=r.default.getConfigById(this.model.itemType);s.default.instance.createView(f.default.gameView.BaGuaEquipInfoView,null,i,this.model,!0)}else"box"==this.model.getConfig().position&&0==this.model.isExhibition?s.default.instance.createView(f.default.gameView.OptionalView,null,this.model):s.default.instance.createView(f.default.gameView.ItemInfo,null,this.model,this.bagIndex)}}},t.prototype.initData=function(){this.spRed.active=this.model.isNew||!1,this.node.getChildByName("content").getChildByName("ItemPrefab").getComponent(m.default).init(this.model)},t.prefabName="roles/bagItem",t=o([y],t)}(a.default));i.default=b,cc._RF.pop()},{"../../../engine/ComponentBase":"ComponentBase","../../../engine/UIManager":"UIManager","../../config/BaGuaEquipConfig":"BaGuaEquipConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","./HouseView":"HouseView"}],BagView:[function(e,t,i){"use strict";cc._RF.push(t,"37d6dLJxs5Gf6cdmdKVhQOR","BagView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../../engine/EventManager"),r=e("../../../engine/Logger"),c=e("../../../engine/SpriteFrameComponent"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/BagConfig"),g=e("../../config/GameConst"),h=e("../../config/TaskConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../manager/RedPointManager"),_=e("../../model/BusinessModel"),v=e("../../model/GuideModel"),y=e("../../model/ItemInfoModel"),b=e("../../model/RoleInfoModel"),I=e("../../model/TaskModel"),M=e("../../network/SocketClient"),w=e("../../utils/CollideUtil"),k=e("../../utils/MusicHelper"),S=e("../GameUIView"),P=e("../Skill/SkillView"),E=e("../UserInfoView"),L=e("./BagItem"),T=e("./ButtomView");(function(e){e[e.Bag=0]="Bag",e[e.Businessman=1]="Businessman",e[e.Strengthen=2]="Strengthen",e[e.Jingjie=3]="Jingjie",e[e.Skill=4]="Skill",e[e.Shenbing=5]="Shenbing",e[e.Star=6]="Star"})(a=i.BagTabType||(i.BagTabType={}));var R=cc._decorator,N=R.ccclass,B=(R.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bagModelList=[],t.toggleStatus=0,t.currTabIndex=0,t}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.skillView=this.node.getChildByName("skillView"),this.skillView.getComponent(P.default).onShow(),this.buttomView=this.findChild(this.node,"bottom").getComponent(T.ButtomView),this.scroll=this.getChild(this.node,"bag/panel",cc.ScrollView),this.scrollContent=this.getChild(this.node,"bag/panel/view/content"),this.toggleTable=this.getChild(this.node,"bag/table"),this.btnAdd=this.getChild(this.node,"bag/btnAdd"),this.btnSort=this.getChild(this.node,"bag/btnSort"),this.lblAmount=this.getChild(this.node,"bag/lblAmount",cc.Label),this.houseView=this.node.getChildByName("houseView"),this.icon=this.findChild(this.node,"userinfo/role/icon"),this.btnAddBG=this.findChild(this.node,"bag/btnAdd/btnAddBG"),this.icon.getComponent(cc.Sprite).spriteFrame=this.icon.getComponent(c.SpriteFrameComponent).spriteFrameList[b.default.instance.occupation-1],this.buttomView.init(this),this.onAddEvent(this.btnSort,this.onSortBag.bind(this,1,2,3)),this.onAddEvent(this.btnAdd,this.onAdd.bind(this));for(var i=0;i<this.toggleTable.childrenCount;i++){this.toggleTable.children[i].on("toggle",this.onToggleTable.bind(this,i),this)}this.onAddEvent(this.getChild(this.node,"bag/btn_cangku"),function(){t.houseView.active=!t.houseView.active}),this.createScrollContent(),this.refresh()},t.prototype.btnAddFreshEff=function(){this.btnAddBG&&cc.tween(this.btnAddBG).repeatForever(cc.tween().to(.3,{scaleX:1,scaleY:1}).to(.3,{scaleX:.8,scaleY:.8})).start()},t.prototype.onEnable=function(){this.houseView.active=!1,_.BusinessModel.setNoSellOneAlert(!1),this.onEvent(),this.refresh(),this.btnAddFreshEff(),s.EventManager.instance.on("GUIDE_10104",function(e){this.scrollContent.children[2].getComponent(L.default).onTouch()}.bind(this),this),s.EventManager.instance.on("GUIDE_10102",function(e){this.scrollContent.children[3].getComponent(L.default).onTouch()}.bind(this),this),s.EventManager.instance.on("FEATURE_1024",this.onUseItemfun,this,!0),b.default.instance.isFullBag()&&S.default.tabIndex,M.default.s_baoshi_info()},t.prototype.onUseItemfun=function(){var e=h.TaskConfig.getTaskConfig(I.TaskModel.instance.taskid.toString());if(e&&7==e.condition&&e.limit){var t=y.default.getItem(e.limit[0]);t&&l.default.instance.createView(u.default.gameView.ItemInfo,null,t)}},t.prototype.jumptoBagTab=function(e){this.selectTab(e)},t.prototype.jumptoBagSkillTab=function(e){this.selectTab(4),l.default.instance.createView(u.default.gameView.SkillEffectView,null,e)},t.prototype.onScrollEvent=function(){var e=this.scrollContent.parent.parent.getChildByName("area"),t=cc.v2(e.x,e.y);this.scrollContent.children.forEach(function(i){var n=e.parent.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0))),o=w.CollisionUtil.getInstance().rectCollide(t,e.getContentSize(),n,i.getContentSize());i.getChildByName("content").active=o})},t.prototype.selectTab=function(e){if(this.currTabIndex!=e)switch(this.currTabIndex=e,s.EventManager.instance.dispatch("GUIDE_CLOSE"),e){case a.Bag:E.default.panelIndex=0,s.EventManager.instance.dispatch(m.CommonEvent.Event_userinfoViewSwitch),this.scroll&&(this.scroll.getComponent(cc.ScrollView).scrollToTop(),this.refresh(0));break;case a.Businessman:break;case a.Strengthen:E.default.panelIndex=1,v.GuideModel.instance.checkGuide(20101),s.EventManager.instance.dispatch(m.CommonEvent.Event_userinfoViewSwitch);break;case a.Jingjie:C.default.getInstance().checkRedPointById(C.RedPointId.JinJie);break;case a.Skill:C.default.getInstance().checkRedPointById(C.RedPointId.Skill);break;case a.Shenbing:v.GuideModel.instance.checkGuide(20201),C.default.getInstance().checkRedPointById(C.RedPointId.shenbin),C.default.getInstance().checkRedPointById(C.RedPointId.shenbin2),C.default.getInstance().checkRedPointById(C.RedPointId.shenbinSkill);break;case a.Star:r.Logger.log("\u661f\u8fb0\u70b9\u51fb-="),v.GuideModel.instance.checkGuide(20301)}},t.prototype.onEvent=function(){s.EventManager.instance.on(g.EVENT_NAME.BAG_ADD_AMOUNT,this.onEventBagAddAmount,this),s.EventManager.instance.on(m.CommonEvent.Event_Item_update,this.refresh,this),s.EventManager.instance.on(g.EVENT_NAME.BAG_CUT,this.onEventCutModel,this),s.EventManager.instance.on(m.CommonEvent.Event_JumpToSkillEffectView,this.jumptoBagSkillTab,this),s.EventManager.instance.on(m.CommonEvent.Event_JumpToBag,this.jumptoBagTab,this)},t.prototype.fixBagModelList=function(){if(b.default.instance.bagModelList.length<b.default.instance.bagAMount)for(var e=b.default.instance.bagAMount-b.default.instance.bagModelList.length,t=0;t<e;t++)b.default.instance.bagModelList.push(null)},t.prototype.onEventAddModel=function(e,t){void 0===t&&(t=0),this.refresh()},t.prototype.onEventCutModel=function(e,t){void 0===t&&(t=0),this.refresh()},t.prototype.onEventBagAddAmount=function(){this.refresh()},t.prototype.onEventBagRefresh=function(){this.refresh()},t.prototype.upBagAmout=function(){var e=b.default.instance.isFullBag()?"#FF0000":"#FFFFFF";this.lblAmount.string=b.default.instance.getBagHadItemNum()+"/"+b.default.instance.bagAMount,this.lblAmount.node.color=cc.color().fromHEX(e),this.btnAdd&&(this.btnAdd.active=b.default.instance.bagAMount<f.BagConfig.MAX_COUNT)},t.prototype.createScrollContent=function(e){void 0===e&&(e=b.default.instance.bagAMount),this.scrollContent.childrenCount<10&&this.scrollContent.removeAllChildren();for(var t=0;t<e;t++){var i=cc.instantiate(L.default.prefab);i.name="bagitem"+t,this.scrollContent.addChild(i),i.getComponent(L.default).setShowArticle(!1)}this.onScrollEvent()},t.prototype.initScrollContent=function(e,t){for(var i=0;i<b.default.instance.bagAMount;i++){var n=this.scrollContent.children[i];switch(t){case 0:!e[i]||i>=e.length?(n.active=!0,n.getComponent(L.default).setShowArticle(!1)):(n.active=!0,n.getComponent(L.default).setShowArticle(!0),n.getComponent(L.default).init(e[i],i));break;case 1:case 2:!e[i]||i>=e.length?n.active=!1:(n.active=!0,n.getComponent(L.default).setShowArticle(!0),n.getComponent(L.default).init(e[i],i))}}},t.prototype.onToggleTable=function(e,t){void 0===e&&(e=this.toggleStatus),void 0===t&&(t=null),k.MusicHelper.play_click(),this.scroll.scrollToTop(),this.refresh(e)},t.prototype.refresh=function(e){void 0===e&&(e=this.toggleStatus),this.scrollContent.children.length<b.default.instance.bagAMount&&this.createScrollContent(b.default.instance.bagAMount-this.scrollContent.children.length),this.fixBagModelList(),this.upBagAmout();var t=[];switch(e){case 0:t=b.default.instance.bagModelList;break;case 1:for(var i=0;i<b.default.instance.bagModelList.length;i++){(n=b.default.instance.bagModelList[i])&&1!=n.itemKind&&t.push(b.default.instance.bagModelList[i])}break;case 2:for(i=0;i<b.default.instance.bagModelList.length;i++){var n;(n=b.default.instance.bagModelList[i])&&1==n.itemKind&&t.push(b.default.instance.bagModelList[i])}}this.initScrollContent(t,e),this.toggleStatus=e,this.onScrollEvent()},t.prototype.onAdd=function(){f.BagConfig.getConfigById(b.default.addBagTimes+1)?l.default.instance.createView(u.default.gameView.bagAdd):p.WordConfig.showWord(60273)},t.prototype.onSortBag=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.default.instance.sortBag(),this.refresh()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),l.default.instance.closeView(u.default.gameView.equipInfo)},t=o([N],t)}(d.default));i.default=B,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/BagConfig":"BagConfig","../../config/GameConst":"GameConst","../../config/TaskConfig":"TaskConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/BusinessModel":"BusinessModel","../../model/GuideModel":"GuideModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/TaskModel":"TaskModel","../../network/SocketClient":"SocketClient","../../utils/CollideUtil":"CollideUtil","../../utils/MusicHelper":"MusicHelper","../GameUIView":"GameUIView","../Skill/SkillView":"SkillView","../UserInfoView":"UserInfoView","./BagItem":"BagItem","./ButtomView":"ButtomView"}],BaoshiInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"5efaeAPTVtAFo7CQ/NROngL","BaoshiInfoModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../engine/EventManager"),o=e("../../../engine/ProtoConfig"),a=e("../../../engine/ProtoUtils"),s=e("../../config/ShenbingGemAllConfig"),r=e("../../event/CommonEvent"),c=e("../../manager/RedPointManager"),l=e("../../model/ItemInfoModel"),d=e("../../model/RoleInfoModel"),f=function(){return function(){}}();i.AttrListInfo=f,i.shenbingType||(i.shenbingType={}),function(e){e[e.getStoneInfo=0]="getStoneInfo",e[e.stoneStrengthen=1]="stoneStrengthen"}(i.stoneModelType||(i.stoneModelType={}));var g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[c.RedPointId.shenbin2,c.RedPointId.shenbin_0_1,c.RedPointId.shenbin_1_1,c.RedPointId.shenbin_2_1],this.protos=[o.ProtoConfig.c_superweapon_stone_info,o.ProtoConfig.c_superweapon_stone_strengthen],c.default.getInstance().addHandler(this)}return e.prototype.checkRedPoint=function(){for(var t=[],i=[],n=d.default.instance.getCoin(),o=0;o<e.__modelListArr.length;o++){for(var a=e.__modelListArr[o],r=[],f=0;f<a.length;f++){for(var g=a[f],h=g.id,u=s.ShenbingGemAllConfig.configMap.get(h),p=!1,m=u.cost1,C=0,_=Object.keys(m);C<_.length;C++){var v=_[C];if(m.hasOwnProperty(v))n>=(w=m[v])&&g.unlock&&(p=!0)}for(var y=!1,b=u.cost2,I=0,M=Object.keys(b);I<M.length;I++){v=M[I];if(b.hasOwnProperty(v)){var w=b[v];l.default.getItemAmount(v)>=w&&g.unlock&&(y=!0)}}var k=void 0;k=50!==g.level&&(y&&p),r[f]=k}var S=r.includes(!0);if(i[o]=S,!0===S)switch(o){case 0:var P={id:c.RedPointId.shenbin_0_1,type:c.RedPointType.Default,show:!0};t.push(P);break;case 1:var E={id:c.RedPointId.shenbin_1_1,type:c.RedPointType.Default,show:!0};t.push(E);break;case 2:var L={id:c.RedPointId.shenbin_2_1,type:c.RedPointType.Default,show:!0};t.push(L)}}var T=i.includes(!0),R={id:c.RedPointId.shenbin2,type:c.RedPointType.Default,show:T};return t.push(R),t},e.getBaoshiHongdianStateByBaoshiId=function(e){for(var t=d.default.instance.getCoin(),i=e.id,n=s.ShenbingGemAllConfig.configMap.get(i),o=!1,a=n.cost1,r=0,c=Object.keys(a);r<c.length;r++){var f=c[r];if(a.hasOwnProperty(f))t>=(m=a[f])&&e.unlock&&(o=!0)}for(var g=!1,h=n.cost2,u=0,p=Object.keys(h);u<p.length;u++){f=p[u];if(h.hasOwnProperty(f)){var m=h[f];l.default.getItemAmount(f)>=m&&e.unlock&&(g=!0)}}return 50!==e.level&&(g&&o)},e.getModelList=function(e){if(void 0!==e){var t=e-1;return 0!==t&&1!==t&&2!==t&&cc.error("\u83b7\u53d6\u7684shenbingType =",e),this.__modelListArr[t]}cc.error("shenbingType = ",e)},e.getAtrrById=function(e,t){var i=0;return this.modelMap.forEach(function(n){n.swid==e&&n.attrList.forEach(function(e){e.id==t&&(i+=e.vaule)})}),i},e.getAtrrByBaoShiId=function(e){return this.modelMap.get(e)},e.clean=function(){},e.proto2Model=function(t,i){this.modelMap=new Map,void 0===this._instance&&(this._instance=new e);var o=[[],[],[]],s=a.ProtoUtils.DeserializeBinary(i,t);cc.log(i," protoPack: ",s);var c=s.getStonelistList();c.length;for(var l=0;l<c.length;l++){var d={},g=c[l];d.id=g.getId(),d.level=g.getLevel(),d.quality=g.getQuality(),d.type=g.getType(),d.unlock=g.getUnlock(),d.swid=g.getSwid();for(var h=g.getAttrlistList(),u=[],p=0;p<h.length;p++){var m=h[p],C=new f;C.id=m.getK(),C.vaule=m.getV(),u.push(C)}d.attrList=u,d.skillList=[];for(var _=g.getSkilllistList(),v=0;v<_.length;v++){var y=(m=_[v]).getNewid();d.skillList[v]=y}var b=d.type-1,I=d.swid-1,M=o[I];M[b]=d,this.__modelListArr[I]=M,this.modelMap.set(d.id,d)}n.EventManager.instance.dispatch(r.CommonEvent.Event_baoshi_refresh),n.EventManager.instance.dispatch(r.CommonEvent.Event_baoshi_jnglian_refresh,this.strengthID),this.strengthID=void 0},e.protoModel=function(e,t){var i=a.ProtoUtils.DeserializeBinary(t,e);this.ret=i.getRet();var o=i.getStoneinfo();if(1!==this.ret){var s={};s.id=o.getId(),s.level=o.getLevel(),s.quality=o.getQuality(),s.type=o.getType(),s.unlock=o.getUnlock(),s.attrList=o.getAttrlistList(),s.skillList=o.getSkilllistList(),this._model=s,this.strengthID=s.id,n.EventManager.instance.dispatch(r.CommonEvent.Event_baoshi_jnglian_refresh,s.id)}},e.getBaoShiSkillValueByType=function(t){var i=e.getModelList(t),n=[0,0,0];if(i)for(var o=0;o<i.length;o++){var a=i[o].skillList;if(a)for(var s=0;s<a.length;s++){var r=a[s];0!==r&&void 0!==r&&(n[s]=r)}}return n},e.getBaoShiAttListByShenbinType=function(t){for(var i=[],n=e.getModelList(t),o=0;o<n.length;o++)for(var a=0;a<n[o].attrList.length;a++)i.push(n[o].attrList[a]);return i},e.__modelListArr=[],e._model={},e}();i.BaoshiInfoModel=g,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../config/ShenbingGemAllConfig":"ShenbingGemAllConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel"}],BaoshiInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"789376KSDlBp5KBmAwag2C3","BaoshiInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/ColorConfig"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../config/MagicNameConfig"),g=e("../../config/ShenbingGemAllConfig"),h=e("../../config/ShenbingskillAllConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../model/FightModel"),_=e("../../model/ItemInfoModel"),v=e("../../model/MagicModel"),y=e("../../model/RoleInfoModel"),b=e("../../model/ShenBinModel"),I=e("../../model/SpiritsModel"),M=e("../../network/SocketClient"),w=e("../../utils/UIHelper"),k=e("./BaoshiInfoModel"),S=cc._decorator,P=S.ccclass,E=S.property,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.costProp=null,t.baoshiLevel=null,t.attributeL=null,t.bg=null,t.top=null,t.middle=null,t.bottom=null,t.lvmax=null,t.promote=null,t.skillItem=null,t.close=null,t.title=null,t.title2=null,t.newAttributeLInfo={},t.skillNodeList=[],t}return n(t,e),t.prototype.start=function(){this.skillItem.active=!1},t.prototype.changUiType=function(e){if(void 0===this.originalBgHeigh){this.originalBgHeigh=this.bg.height;this.bg.height+=200,this.middle.active=!0}},t.prototype.setTitle=function(){this.titleArr=new Array,this.titleArr.push(p.WordConfig.getWord(61302)),this.titleArr.push(p.WordConfig.getWord(61303)),this.titleArr.push(p.WordConfig.getWord(61304));var e=this.baoshiType-1;this.titleArr=new Array,this.titleArr.push(p.WordConfig.getWord(61302)),this.titleArr.push(p.WordConfig.getWord(61303)),this.titleArr.push(p.WordConfig.getWord(61304)),this.title.string=this.title2.string=this.titleArr[e]},t.prototype.bindNode=function(){this.onAddEvent(this.close,this.closeView.bind(this)),this.onAddEvent(this.promote,this.baoshiPromote.bind(this))},t.prototype.baoshiPromote=function(){var e=g.ShenbingGemAllConfig.configMap.get(this.stoneId);if(e.cost2)for(var t in e.cost2)if(Object.prototype.hasOwnProperty.call(e.cost2,t)){var i=e.cost2[t],n=_.default.getItem(t),o=d.ITemsConfig.getITemsConfigById(t);if(!n||n.itemCnt<i){var a=cc.js.formatStr(p.WordConfig.getWord(60242),o.name);return w.UIHelper.showTip(a),void(o&&o.jump_id&&o.jump_id.length>0&&s.default.instance.createView(u.default.gameView.ItemAcquire,null,null,o,u.default.gameView.BaoShiInfoView))}}if(e.cost1)for(var t in e.cost1)if(Object.prototype.hasOwnProperty.call(e.cost1,t)){i=e.cost1[t];if(y.default.instance.getCoin()<i){if((o=d.ITemsConfig.getITemsConfigById(t))&&o.jump_id&&o.jump_id.length>0){a=cc.js.formatStr(p.WordConfig.getWord(60242),o.name);w.UIHelper.showTip(a),s.default.instance.createView(u.default.gameView.ItemAcquire,null,null,o)}else w.UIHelper.showCoinNoEnough();return}}M.default.s_upBaoshi_info(this.swid,this.stoneId)},t.prototype.bindClickEvent=function(){},t.prototype.onInitChild=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.attributeL.active=!1,this.costProp.active=!1,this.bindNode();var i=e[0];this.stoneId=i.baoshiId,this.swid=i.swid,this.skillmodelId=i.skillmodelId,this.baoshiType=i.baoshiType,this.setTitle(),this.updateView(this.stoneId),a.EventManager.instance.on(m.CommonEvent.Event_baoshi_jnglian_refresh,this.updateView,this)},t.prototype.removeChildren=function(e,t){if(e instanceof cc.Node)for(var i=e.children,n=0;n<i.length;n++){var o=i[n];o.name===t&&o.destroy()}},t.prototype.updateView=function(e){if(void 0!==e){var t=g.ShenbingGemAllConfig.configMap.get(e);this.stoneId=e,50===t.level&&(this.promote.active=!1,this.lvmax.active=!0),this.baoshiLevel.string=t.level+"";var i=t.attribute;this.removeChildren(this.attributeL.parent,"newAttributeL");for(var n=0;n<i.length;n++){var o=i[n];for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)){var s=o[a],r=parseInt(a);if(41==r)continue;var l=f.MagicNameConfig.configMap.get(r.toString()),h=f.MagicNameConfig.getDesc(r)+"\uff1a",u=v.default.formatMagicValue(r,s),m=h+l.type,C=this.newAttributeLInfo[m];void 0===C&&((C=cc.instantiate(this.attributeL)).name=h,C.parent=this.attributeL.parent,C.active=!0,this.newAttributeLInfo[m]=C),C.getComponent(cc.Label).string=h,C.getChildByName("value").getComponent(cc.Label).string=u}}for(var b=t.cost1,I=0,M=Object.keys(b);I<M.length;I++){a=M[I];if(b.hasOwnProperty(a)){s=b[a];void 0===this.newCostProp1&&(this.newCostProp1=cc.instantiate(this.costProp),this.newCostProp1.parent=this.costProp.parent,this.newCostProp1.active=!0);var k=p.WordConfig.getWord(60396);this.newCostProp1.getChildByName("costName").getComponent(cc.Label).string=k;var S=y.default.instance.getCoin(),P=this.newCostProp1.getChildByName("costNum").getComponent(cc.Label);P.string=w.UIHelper.tranNumber(s),P.node.color=c.ColorConfig.GreenColor,S<s&&(P.node.color=c.ColorConfig.RedColor)}}for(var E=t.cost2,L=0,T=Object.keys(E);L<T.length;L++){a=T[L];if(E.hasOwnProperty(a)){s=E[a],k=d.ITemsConfig.configMap.get(a).name+p.WordConfig.getWord(60548);void 0===this.newCostProp&&(this.newCostProp=cc.instantiate(this.costProp),this.newCostProp.parent=this.costProp.parent,this.newCostProp.active=!0),this.newCostProp.getChildByName("costName").getComponent(cc.Label).string=k;var R=_.default.getItemAmount(a);this.newCostProp.getChildByName("costNum").getComponent(cc.Label).string=w.UIHelper.tranNumber(R)+"/"+s,this.newCostProp.getChildByName("costNum").color=c.ColorConfig.GreenColor,R<s&&(this.newCostProp.getChildByName("costNum").color=c.ColorConfig.RedColor)}}t&&t.skillvalue&&0!==t.skillvalue.length&&this.refreshSkillDes(t)}},t.prototype.refreshSkillDes=function(e){for(var t=e.type,i=k.BaoshiInfoModel.getModelList(t),n=[0,0,0],o=0;o<i.length;o++)for(var a=i[o].skillList,s=0;s<a.length;s++){0!==(f=a[s])&&void 0!==f&&(n[s]=f)}if(void 0!==n&&void 0!==this.skillmodelId){var r=0,d=h.ShenbingskillAllConfig.getSkillConfigById(this.skillmodelId);if(this.skillNodeList.length!=d.name.length){for(o=0;o<this.skillNodeList.length;o++)this.skillNodeList[o].destroy();this.skillNodeList=[];for(o=0;o<d.name.length;o++){var f=void 0;(f=cc.instantiate(this.skillItem)).parent=this.skillItem.parent,f.active=!0,this.skillNodeList.push(f)}}if(100001==d.skill_id){var g=I.default.model.spirits||0,u=I.default.model.spirits_eff||0,m=I.default.model.max_spirits||0,_="",v=d.parameter[2]/100,y=Math.floor(C.default.totalFight*d.parameter[2]/1e4);n&&(u=u+"+"+n[0],m=m+"+"+n[1],v=v+"%+"+n[2]/100,y=Math.floor(C.default.totalFight*(d.parameter[2]+n[2])/1e4));var M=c.ColorConfig.GreenHexColor;g>=m&&(M=c.ColorConfig.RedHexColor);for(o=0;o<this.skillNodeList.length;o++){this.skillNodeList[o].getChildByName("skillName").getComponent(cc.Label).string=d.name[o]+":",(E=this.skillNodeList[o].getChildByName("skillDes").getComponent(cc.RichText)).node.x=-156.566,E.maxWidth=362.366,0==o?E.string=cc.js.formatStr(p.WordConfig.getWord(61267),u,M,g,m):1==o&&(E.string=cc.js.formatStr(p.WordConfig.getWord(60552),c.ColorConfig.GreenHexColor,v,y)),r+=E.lineHeight+E.node.parent.parent.getComponent(cc.Layout).spacingY}}else if(200001==d.skill_id)for(o=0;o<this.skillNodeList.length;o++){this.skillNodeList[o].getChildByName("skillName").getComponent(cc.Label).string=d.name[o]+":",(E=this.skillNodeList[o].getChildByName("skillDes").getComponent(cc.RichText)).node.x=-104.2;_="",v="";n&&(_="+"+n[0]/100+"%",v="+"+n[1]/100+"%"),E.string=cc.js.formatStr(p.WordConfig.getWord(61269),c.ColorConfig.GreenHexColor,d.parameter[0]/100,_,c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.GREEN),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.BLUE),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.PURPLE),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.ORANGE),c.ColorConfig.GreenHexColor,d.parameter[1]/100,v),r+=E.node.height+E.node.parent.parent.getComponent(cc.Layout).spacingY}else if(300001==d.skill_id){var w=k.BaoshiInfoModel.getBaoShiAttListByShenbinType(b.ShenBinModel.SHIHUNFAZHANG),S="";for(o=0;o<w.length;o++){var P=w[o];if(41==P.id){S="+"+P.vaule;break}}for(o=0;o<this.skillNodeList.length;o++){var E;this.skillNodeList[o].getChildByName("skillName").getComponent(cc.Label).string=d.name[o]+":",(E=this.skillNodeList[o].getChildByName("skillDes").getComponent(cc.RichText)).node.x=-104.2;_="",v="";n&&(_="+"+n[0]/100+"%",v="+"+n[1]/100+"%"),E.string=cc.js.formatStr(p.WordConfig.getWord(61270),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.GREEN),d.level+S,c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.ORANGE),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.ORANGE),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.ORANGE),c.ColorConfig.GreenHexColor,d.parameter[0]/100,_,c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.ORANGE),c.ColorConfig.GreenHexColor,d.parameter[1]/100,v),r+=E.node.height+E.node.parent.parent.getComponent(cc.Layout).spacingY}}this.changUiType(r)}},t.prototype.onHide=function(){},o([E(cc.Node)],t.prototype,"costProp",void 0),o([E(cc.Label)],t.prototype,"baoshiLevel",void 0),o([E(cc.Node)],t.prototype,"attributeL",void 0),o([E(cc.Node)],t.prototype,"bg",void 0),o([E(cc.Node)],t.prototype,"top",void 0),o([E(cc.Node)],t.prototype,"middle",void 0),o([E(cc.Node)],t.prototype,"bottom",void 0),o([E(cc.Node)],t.prototype,"lvmax",void 0),o([E(cc.Node)],t.prototype,"promote",void 0),o([E(cc.Node)],t.prototype,"skillItem",void 0),o([E(cc.Node)],t.prototype,"close",void 0),o([E(cc.Label)],t.prototype,"title",void 0),o([E(cc.Label)],t.prototype,"title2",void 0),t=o([P],t)}(r.default);i.default=L,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/ShenbingGemAllConfig":"ShenbingGemAllConfig","../../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/FightModel":"FightModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ShenBinModel":"ShenBinModel","../../model/SpiritsModel":"SpiritsModel","../../network/SocketClient":"SocketClient","../../utils/UIHelper":"UIHelper","./BaoshiInfoModel":"BaoshiInfoModel"}],BestrongernConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fd7a7pifENGbZvP+gxrMTy0","BestrongernConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase");(function(e){e[e.RolePower=1]="RolePower",e[e.GainResource=2]="GainResource",e[e.FAQ=3]="FAQ"})(i.ToStrongerType||(i.ToStrongerType={}));var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.type=e.tag1,i.title=e.tag2,i.desc=e.desc,i.rolePowerIconName=e.res,i.rolePowerJumpId=e.function_id,i.gainResoureTitle2Arr=e.tag3,i.gainResoureDescArr=e.tag3desc,i.gainResoureJumpId=e.tag3function_id,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]),o=n.type,a=Number(i),s=t.configMap.get(o);void 0===s&&(s=new Map),s.set(a,n),t.configMap.set(o,s)}),this.configMap.forEach(function(e,i){var n=[];e.forEach(function(e,t){n.push(t)}),n.sort(function(e,t){return e-t});for(var o=new Map,a=0;a<n.length;a++)o.set(n[a],e.get(n[a]));t.configMap.set(i,o)})},t.getConfigMapByType=function(e){return this.configMap.get(e)},t.configMap=new Map,t}(o.JsonConfigBase);i.BestrongernConfig=a,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],BigBossBuyTimeTipView:[function(e,t,i){"use strict";cc._RF.push(t,"c83f4cnYpxISLKy8u4Q50d2","BigBossBuyTimeTipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/WordConfig"),r=e("../../model/RoleInfoModel"),c=e("../../network/SocketClient"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cost=0,t}return n(t,e),t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"but_tianguan_queding"),this.onClickSure.bind(this)),this.onAddEvent(this.findChild(this.node,"btn_quxiao"),this.closeView.bind(this))},t.prototype.onShow=function(){},t.prototype.onInitChild=function(e,t){this.cost=e,this.findChild(this.node,"costTip").getComponent(cc.RichText).string=cc.js.formatStr("%s",s.WordConfig.getWord(61254),e),this.findChild(this.node,"timeTip").getComponent(cc.RichText).string=cc.js.formatStr("%s",s.WordConfig.getWord(61255),t)},t.prototype.onClickSure=function(){r.default.instance.getGold()>=this.cost?(c.default.s_req_buy_world_boss_times(),this.closeView()):s.WordConfig.showWord(60115)},t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient"}],BigBossEndView:[function(e,t,i){"use strict";cc._RF.push(t,"d235e7PmsZP+68n6WbWfCDf","BigBossEndView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/DefaultConfig"),c=e("../../config/GameConst"),l=e("../../config/MonsterConfig"),d=e("../../config/ViewConfig"),f=e("../../utils/UIHelper"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"but_tianguan_queding"),this.onClickSure.bind(this))},t.prototype.onInitChild=function(e){var t=r.DefaultConfig.getConfigById(c.GameConst.SPECIALBOSSID.WORLDBOSS).value,i=l.MonsterConfig.getMonsterConfigById(t);this.findChild(this.node,"bossName").getComponent(cc.Label).string=i.name,this.findChild(this.node,"hurtValue").getComponent(cc.Label).string=f.UIHelper.tranNumber(e)},t.prototype.onClickSure=function(){this.closeView()},t.prototype.closeView=function(){e.prototype.closeView.call(this),a.default.instance.closeView(d.default.gameView.WorldBossFightView)},t=o([h],t)}(s.default));i.default=u,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/MonsterConfig":"MonsterConfig","../../config/ViewConfig":"ViewConfig","../../utils/UIHelper":"UIHelper"}],BigBossRewardPreView:[function(e,t,i){"use strict";cc._RF.push(t,"1e227ZMfu9Pi5F0tIRbqPzx","BigBossRewardPreView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/EquipConfig"),r=e("../../config/GameConst"),c=e("../../config/ITemsConfig"),l=e("../../config/WorldbossawardConfig"),d=e("../../model/RoleInfoModel"),f=e("../../prefab/ItemPrefab"),g=e("./WorldBossModel"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t.tempNode=null,t.mytempNode=null,t.myRewardContent=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.refresh(),this.refreshMyRank()},t.prototype.refresh=function(){for(var e=l.WorldbossawardConfig.getConfigList(),t=0;t<e.length;t++){var i=null;this.itemList[t]?i=this.itemList[t]:((i=cc.instantiate(this.tempNode)).active=!0,i.parent=this.tempNode.parent,this.itemList[t]=i),this.refreshRewardItem(i,e[t])}},t.prototype.onSocketRespMsg=function(e,t){},t.prototype.refreshMyRank=function(){var e=[],t=-1;switch(d.default.instance.occupation){case r.GameConst.OCCUPATION.ZHAN_SHI:e=g.WorldBossRankModel.zhanshiRankModelList;break;case r.GameConst.OCCUPATION.FA_SHI:e=g.WorldBossRankModel.fashiRankModelList;break;case r.GameConst.OCCUPATION.DAO_SHI:e=g.WorldBossRankModel.daoshiRankModelList}for(var i=0;i<e.length;i++)e[i].heroId==Number(d.default.instance.roleId)&&(t=e[i].rank);if(t>0){this.findChild(this.node,"myrank").active=!0,this.findChild(this.node,"myrank").getComponent(cc.Label).string=t+"",this.findChild(this.node,"weishangbang").active=!1;var n=l.WorldbossawardConfig.getConfigList(),o=void 0;for(i=0;i<n.length;i++)if(t>=n[i].rank[0]&&t<=n[i].rank[1]){o=n[i];break}if(o){if(o.award_res)for(var a in o.award_res){(h=cc.instantiate(this.mytempNode)).active=!0,h.parent=this.myRewardContent,h.getComponent(f.default).initResource(parseInt(a),o.award_res[a])}if(o.award_item)for(var a in o.award_item){var h;(h=cc.instantiate(this.mytempNode)).active=!0,h.parent=this.myRewardContent;var u=void 0;"I"==a.charAt(0)?(u=c.ITemsConfig.getITemsConfigById(a),h.getComponent(f.default).init(u,!0)):(u=s.EquipConfig.getEquipConfigById(a),h.getComponent(f.default).init(u,!0)),h.getComponent(f.default).setNumTxt(o.award_item[a])}}}else this.findChild(this.node,"myrank").active=!1,this.findChild(this.node,"weishangbang").active=!0},t.prototype.refreshRewardItem=function(e,t){if(e&&t){e.active=!0;var i=this.findChild(e,"reward/ItemPrefab"),n=e.getChildByName("rank");if(n.getChildByName("rank2").active=!1,n.getChildByName("rank1").getComponent(cc.Label).string=t.rank[0]+"",t.rank[0]!=t.rank[1]?(n.getChildByName("rank2").active=!0,n.getChildByName("rank2").getChildByName("rank").getComponent(cc.Label).string=t.rank[1]+""):n.getChildByName("rank2").active=!1,t.award_res)for(var o in t.award_res){(a=cc.instantiate(i)).active=!0,a.parent=i.parent,a.getComponent(f.default).initResource(parseInt(o),t.award_res[o])}if(t.award_item)for(var o in t.award_item){var a;(a=cc.instantiate(i)).active=!0,a.parent=i.parent;var r=void 0;"I"==o.charAt(0)?(r=c.ITemsConfig.getITemsConfigById(o),a.getComponent(f.default).init(r,!0)):(r=s.EquipConfig.getEquipConfigById(o),a.getComponent(f.default).init(r,!0)),a.getComponent(f.default).setNumTxt(t.award_item[o])}}},o([p({type:cc.Node})],t.prototype,"tempNode",void 0),o([p({type:cc.Node})],t.prototype,"mytempNode",void 0),o([p({type:cc.Node})],t.prototype,"myRewardContent",void 0),t=o([u],t)}(a.default);i.default=m,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/WorldbossawardConfig":"WorldbossawardConfig","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab","./WorldBossModel":"WorldBossModel"}],BigBossView:[function(e,t,i){"use strict";cc._RF.push(t,"c2963qQ3gtIiIonuxgHSHln","BigBossView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ProtoConfig"),r=e("../../../engine/ProtoUtils"),c=e("../../../engine/SpriteFrameComponent"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/DefaultConfig"),g=e("../../config/EquipConfig"),h=e("../../config/GameConst"),u=e("../../config/ITemsConfig"),p=e("../../config/MonsterConfig"),m=e("../../config/ViewConfig"),C=e("../../config/WordConfig"),_=e("../../config/WorldbossawardConfig"),v=e("../../config/WorldbosstaskConfig"),y=e("../../event/CommonEvent"),b=e("../../model/ActivityOpenModel"),I=e("../../model/RoleInfoModel"),M=e("../../network/SocketClient"),w=e("../../prefab/ItemPrefab"),k=e("../../utils/UIHelper"),S=e("../PublicTipView"),P=e("./WorldBossModel"),E=cc._decorator,L=E.ccclass,T=E.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bossHp=null,t.maxHpWight=165,t.text="hello",t.currentRewardId=1,t.bossTaskItemList=[],t.currSeletRankTap=0,t.rankItem=null,t.rankItemList=[],t}return n(t,e),t.prototype.onLoad=function(){this.rankItem=this.findChild(this.node,"rank/scrollView/view/content/item"),this.rankItem.active=!1},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"rewardPreView/btn_pre"),this.onClickPreView.bind(this)),this.onAddEvent(this.findChild(this.node,"btn_boss"),this.onClickFight.bind(this)),this.onAddEvent(this.findChild(this.node,"btn_add"),this.onClickAdd.bind(this)),this.onAddEvent(this.findChild(this.node,"title/btn_fanhui"),this.closeView.bind(this)),this.onAddEvent(this.findChild(this.node,"reward/btn_lingqu"),this.onClickGet.bind(this)),this.onAddEvent(this.findChild(this.node,"title/button_wenhao"),this.onClickHelp.bind(this)),a.EventManager.instance.on(y.CommonEvent.Event_WorldBossRank_Refresh,this.refreshRank,this),a.EventManager.instance.on(y.CommonEvent.Event_WorldBoss_Refresh,this.refreshRank,this),a.EventManager.instance.on(y.CommonEvent.Event_WorldBoss_Refresh,this.refresh,this);for(var e=0;e<3;e++)this.onAddEvent(this.findChild(this.node,"rank/tab/tab"+e),this.onClickTap.bind(this,e));var t=b.default.getOpenActivityModel(23);t&&1==t.status&&(M.default.s_req_world_boss_info(),M.default.s_req_world_boss_rank()),this.refresh(),this.refreshRank()},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_enter_world_boss){var i=(o=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_enter_world_boss,t)).getBossHp(),n=o.getEndTime();l.default.instance.createView(m.default.gameView.WorldBossFightView,null,i,n)}else if(e==s.ProtoConfig.c_req_world_boss_info);else if(e==s.ProtoConfig.c_req_world_boss_rank){var o=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_req_world_boss_rank,t);P.WorldBossRankModel.proto2Model(o)}e==s.ProtoConfig.c_user_login&&this.scheduleOnce(function(){var e=b.default.getOpenActivityModel(23);e&&1==e.status&&(M.default.s_req_world_boss_info(),M.default.s_req_world_boss_rank())},.2)},t.prototype.refresh=function(){var e=f.DefaultConfig.getConfigById(h.GameConst.SPECIALBOSSID.WORLDBOSS).value,t=p.MonsterConfig.getMonsterConfigById(e);this.findChild(this.node,"title/bossName").getComponent(cc.Label).string=t.name,this.bossHp.width=P.default.model.bossHp/1e4*this.maxHpWight;var i=_.WorldbossawardConfig.getConfigById(1),n=this.findChild(this.node,"rewardPreView/ItemPrefab");this.findChild(this.node,"rewardPreView/scrollView").getComponent(cc.ScrollView).content.removeAllChildren();var o=this.findChild(this.node,"rewardPreView/scrollView/view/content");if(i.award_res)for(var a in i.award_res){(d=cc.instantiate(n)).active=!0,d.parent=o,d.getComponent(w.default).initResource(parseInt(a),i.award_res[a])}if(i.award_item)for(var a in i.award_item){(d=cc.instantiate(n)).active=!0,d.parent=o;var s=void 0;"I"==a.charAt(0)?(s=u.ITemsConfig.getITemsConfigById(a),d.getComponent(w.default).init(s,!0)):(s=g.EquipConfig.getEquipConfigById(a),d.getComponent(w.default).init(s,!0)),d.getComponent(w.default).setNumTxt(i.award_item[a])}this.currentRewardId=1,P.default.model.awardList[P.default.model.awardList.length-1]&&(this.currentRewardId=P.default.model.awardList[P.default.model.awardList.length-1].id+1);var r=v.WorldbosstaskConfig.getConfigById(this.currentRewardId);r?(this.findChild(this.node,"reward/btn_lingqu").active=!0,this.findChild(this.node,"reward/img_yilingqu").active=!1):(r=v.WorldbosstaskConfig.getConfigById(P.default.model.awardList[P.default.model.awardList.length-1].id),this.findChild(this.node,"reward/btn_lingqu").active=!1,this.findChild(this.node,"reward/img_yilingqu").active=!0);var c=this.findChild(this.node,"reward/ItemPrefab"),l=this.findChild(this.node,"reward/scrollView/view/content");if(l.removeAllChildren(),this.findChild(this.node,"reward/btn_lingqu").color=cc.Color.GRAY,r){if(r.award_res)for(var a in r.award_res){(d=cc.instantiate(c)).active=!0,d.parent=l,d.getComponent(w.default).initResource(parseInt(a),r.award_res.ress[a])}if(r.award_item)for(var a in r.award_item){var d;(d=cc.instantiate(c)).active=!0,d.parent=l;s=void 0;"I"==a.charAt(0)?(s=u.ITemsConfig.getITemsConfigById(a),d.getComponent(w.default).init(s,!0)):(s=g.EquipConfig.getEquipConfigById(a),d.getComponent(w.default).init(s,!0)),d.getComponent(w.default).setNumTxt(r.award_item[a])}}this.findChild(this.node,"reward/totalHurt").getComponent(cc.Label).string=k.UIHelper.tranNumber(P.default.model.accHarm)+"/"+k.UIHelper.tranNumber(r.limit),this.findChild(this.node,"time").getComponent(cc.Label).string=P.default.model.leftTimes+"/"+f.DefaultConfig.getConfigById(71).value,this.findChild(this.node,"reward/img_bossfuhuo_progress").width=Math.floor(181*(P.default.model.accHarm/r.limit>1?1:P.default.model.accHarm/r.limit)),P.default.model.accHarm/r.limit>=1&&(this.findChild(this.node,"reward/btn_lingqu").color=cc.Color.WHITE)},t.prototype.refreshRank=function(){for(var e=0;e<3;e++){var t=this.findChild(this.node,"rank/tab/tab"+e);this.currSeletRankTap==e?t.getComponent(cc.Sprite).spriteFrame=t.getComponent(c.SpriteFrameComponent).spriteFrameList[1]:t.getComponent(cc.Sprite).spriteFrame=t.getComponent(c.SpriteFrameComponent).spriteFrameList[0]}for(e=0;e<this.rankItemList.length;e++)this.rankItemList[e].active=!1;var i=[];switch(this.currSeletRankTap){case 0:i=P.WorldBossRankModel.zhanshiRankModelList;break;case 1:i=P.WorldBossRankModel.fashiRankModelList;break;case 2:i=P.WorldBossRankModel.daoshiRankModelList}for(e=0;e<i.length;e++)if(this.rankItemList[e])this.initRankItem(this.rankItemList[e],i[e]);else{var n=cc.instantiate(this.rankItem);n.parent=this.rankItem.parent,this.rankItemList.push(n),this.initRankItem(n,i[e])}this.refreshMyRank()},t.prototype.refreshMyRank=function(){var e=[],t=-1,i=0,n=this.findChild(this.node,"rank/myrank");switch(this.findChild(n,"zhiyeicon").getComponent(cc.Sprite).spriteFrame=this.findChild(n,"zhiyeicon").getComponent(c.SpriteFrameComponent).spriteFrameList[I.default.instance.occupation-1],this.findChild(n,"roleName").getComponent(cc.Label).string=I.default.instance.roleName,I.default.instance.occupation){case h.GameConst.OCCUPATION.ZHAN_SHI:e=P.WorldBossRankModel.zhanshiRankModelList;break;case h.GameConst.OCCUPATION.FA_SHI:e=P.WorldBossRankModel.fashiRankModelList;break;case h.GameConst.OCCUPATION.DAO_SHI:e=P.WorldBossRankModel.daoshiRankModelList}for(var o=0;o<e.length;o++)e[o].heroId==Number(I.default.instance.roleId)&&(t=e[o].rank,i=e[o].harm);this.findChild(n,"weishangban").getComponent(cc.Label).string=t>0?t+"":"\u672a\u4e0a\u699c",this.findChild(n,"rolePower").getComponent(cc.Label).string=i+""},t.prototype.initRankItem=function(e,t){e&&t&&(e.active=!0,this.findChild(e,"order").active=!1,this.findChild(e,"rankicon").active=!1,t.rank>3?(this.findChild(e,"order").active=!0,this.findChild(e,"order").getComponent(cc.Label).string=t.rank+""):(this.findChild(e,"rankicon").active=!0,this.findChild(e,"rankicon").getComponent(cc.Sprite).spriteFrame=this.findChild(e,"rankicon").getComponent(c.SpriteFrameComponent).spriteFrameList[t.rank-1]),this.findChild(e,"roleName").getComponent(cc.Label).string=t.roleName,this.onAddEvent(this.findChild(e,"roleName"),k.UIHelper.showPlayerDetail.bind(this,t.heroId)),this.findChild(e,"zhiyeicon").getComponent(cc.Sprite).spriteFrame=this.findChild(e,"zhiyeicon").getComponent(c.SpriteFrameComponent).spriteFrameList[t.prof-1],this.findChild(e,"rolePower").getComponent(cc.Label).string=k.UIHelper.tranNumber(t.harm)+"")},t.prototype.onClickHelp=function(){l.default.instance.createView(m.default.gameView.PublicTipView,null,S.RuleType.TYPE_WORLDBOSS)},t.prototype.onClickTap=function(e){this.currSeletRankTap=e,this.refreshRank()},t.prototype.onClickBack=function(){this.closeView()},t.prototype.onClickPreView=function(){l.default.instance.createView(m.default.gameView.BigBossRewardPreView)},t.prototype.onClickGet=function(){M.default.s_req_buy_world_boss_award(this.currentRewardId)},t.prototype.onClickFight=function(){M.default.s_enter_world_boss()},t.prototype.onClickAdd=function(){if(this.getBuyMaxTime()-P.default.model.buyTimes>0){var e=f.DefaultConfig.getConfigById(72).value[P.default.model.buyTimes+1],t=this.getBuyMaxTime()-P.default.model.buyTimes;l.default.instance.createView(m.default.gameView.BigBossBuyTimeTipView,null,e,t)}else k.UIHelper.showTip(C.WordConfig.getWord(61273))},t.prototype.getBuyMaxTime=function(){var e=0;for(var t in f.DefaultConfig.getConfigById(72).value)e<Number(t)&&(e=Number(t));return e},o([T(cc.Node)],t.prototype,"bossHp",void 0),o([T],t.prototype,"text",void 0),t=o([L],t)}(d.default);i.default=R,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MonsterConfig":"MonsterConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../config/WorldbossawardConfig":"WorldbossawardConfig","../../config/WorldbosstaskConfig":"WorldbosstaskConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView","./WorldBossModel":"WorldBossModel"}],BlessModel:[function(e,t,i){"use strict";cc._RF.push(t,"d67fcOwc6pICZtFFGUP5Vx1","BlessModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("../config/ShenCiConfig"),a=e("./MagicModel"),s=function(){function e(){this.blessId=0,this.blessValue=0}return e.getdes=function(e,t){var i=o.ShenCiConfig.getConfigById(e);n.Logger.log("BlessModel====",e,i);var s=i.des,r=a.default.formatMagicValue(Number(i.statid),t),c=s.replace("[#]",r);return n.Logger.log("BlessModel==222==",r,c),c},e.proto2ModelList=function(e){},e}();i.default=s,cc._RF.pop()},{"../../engine/Logger":"Logger","../config/ShenCiConfig":"ShenCiConfig","./MagicModel":"MagicModel"}],BossAttackModel:[function(e,t,i){"use strict";cc._RF.push(t,"6e055PGZc9GpLuonZ/Qai1w","BossAttackModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.Kill_Type={Fight:0,SecKill:1},e}();i.BossAttackModel=n,cc._RF.pop()},{}],BossKillModel:[function(e,t,i){"use strict";cc._RF.push(t,"c8d62ltob1IRIg93vQrd81y","BossKillModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/ProtoConfig"),o=e("../../engine/ProtoUtils"),a=function(){function e(){}return e.proto2ModelList=function(t){this.modelList=[];for(var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_req_if_kill_boss,t).getKilledlistList(),a=0;a<i.length;a++){var s=new e;s.bossId=i[a].getBossid(),this.modelList.push(s)}},e.hadKillMonster=function(e){for(var t=0;t<this.modelList.length;t++){if(this.modelList[t].bossId==e)return!0}},e.modelList=[],e}();i.BossKillModel=a,cc._RF.pop()},{"../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils"}],BossModel:[function(e,t,i){"use strict";cc._RF.push(t,"ba686tL+RpN1IsPuFkwWVh5","BossModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/LocalStorage"),o=e("../config/MapConfig"),a=e("../../engine/Logger"),s=e("./RoleInfoModel"),r=e("../../engine/EventManager"),c=e("./ServerTime"),l=e("../manager/MonsterManager"),d=function(){function e(){this.hp=0}return e.init=function(){this.bossModelLocalKey=this.defaultLocalKey+s.default.instance.roleId,this.modelList=[];var t=n.default.getItem(this.bossModelLocalKey);if(t)for(var i=JSON.parse(t),a=0;a<i.length;a++){(r=new e).mapId=i[a].mapId,r.monsterId=parseInt(i[a].monsterId),r.reviveTime=i[a].reviveTime,this.modelList[a]=r}else{for(a=0;a<o.MapConfig.bossMapList.length;a++){var r=new e,c=o.MapConfig.bossMapList[a];r.mapId=c.mapId,r.monsterId=parseInt(c.boss.monsterid),r.reviveTime=0,this.modelList[a]=r}this.saveToLocalStorage()}},e.saveToLocalStorage=function(){n.default.setItem(this.bossModelLocalKey,JSON.stringify(this.modelList))},e.getBoss=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.mapId==e)return i}},e.getBossByMonsterId=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.monsterId==e)return i}},e.prototype.bossRefresh=function(){this.reviveTime=c.ServerTime.getServerTime()/1e3+60},e.prototype.getCanRevive=function(){return this.canRevive},e.prototype.getLeftTime=function(){var e=this.reviveTime-c.ServerTime.getServerTime()/1e3;return(e=Math.floor(e))<=0&&(e=0),e=Math.ceil(e)},e.proto2BossModelList=function(t){var i=t.getBossInfoList();e.modelList=[];for(var n=0;n<i.length;n++){var s=i[n];(d=new e).mapId=s.getScene(),d.monsterId=parseInt(s.getType()),d.reviveTime=s.getTime(),d.hp=s.getHp(),c.ServerTime.getServerTime()>=1e3*d.reviveTime?d.canRevive=!0:d.canRevive=!1,e.modelList.push(d)}for(n=0;n<o.MapConfig.bossMapList.length;n++){var d,f=o.MapConfig.bossMapList[n];if(!(d=this.getBoss(f.mapId))){var g=new e,h=o.MapConfig.bossMapList[n];g.mapId=h.mapId,g.monsterId=parseInt(h.boss.monsterid),g.reviveTime=0,g.hp=0,g.canRevive=!0,e.modelList.push(g)}}e.modelList.sort(function(e,t){var i=o.MapConfig.getMapConfigByMapId(e.mapId),n=o.MapConfig.getMapConfigByMapId(t.mapId);return i&&n?i.Lv-n.Lv:(a.Logger.warn("proto2BossModelList==",e,t,i,n),0)}),a.Logger.log("s_req_refresh_boss_hp====22=boss",t,e.modelList),l.default.instance.refreshBossHp(),r.EventManager.instance.dispatch(e.Event_Boss_Init)},e.getBossHp=function(t,i){for(var n=0;n<e.modelList.length;n++){var o=e.modelList[n];if(o.monsterId==t&&o.mapId==i)return o.hp}return 0},e.hadBoss=function(t){for(var i=0;i<e.modelList.length;i++){var n=e.modelList[i];if(n.monsterId==t)return n}},e.modelList=[],e.defaultLocalKey="bossModelLocalKey",e.bossModelLocalKey="",e.Event_Boss_Init="Event_BossInit",e}();i.BossModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../config/MapConfig":"MapConfig","../manager/MonsterManager":"MonsterManager","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],BossSettingItem:[function(e,t,i){"use strict";cc._RF.push(t,"24066Q7KS9POJcyARlbDuVv","BossSettingItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../model/BossModel"),l=e("../config/MonsterConfig"),d=e("../config/MapConfig"),f=e("../../engine/DropDownPrefab"),g=e("../model/JingJieModel"),h=e("../model/AutoRobotChatModel"),u=e("../config/ChiXueMoJianConfig"),p=e("../model/FightModel"),m=e("../model/ShenBinSkillModel"),C=e("../config/ShenbingskillAllConfig"),_=e("../utils/UIHelper"),v=e("../config/WordConfig"),y=e("../model/BossKillModel"),b=e("../model/RoleInfoModel"),I=e("../model/ShenBinModel"),M=e("../view/shenbing/BaoshiInfoModel"),w=e("../../engine/UIManager"),k=e("../config/ViewConfig"),S=cc._decorator,P=S.ccclass,E=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wordConfigList=[new f.DropDownConfig(0,v.WordConfig.getWord(60705)),new f.DropDownConfig(1,v.WordConfig.getWord(60706))],t.killTypeList=[new f.DropDownConfig(0,v.WordConfig.getWord(60707)),new f.DropDownConfig(1,v.WordConfig.getWord(60708))],t}return n(t,e),t.prototype.init=function(e,t){var i=this;this.model=e,this.mapConfig=t,this.auto=this.findChild(this.node,"auto"),this.bossName=this.findChild(this.node,"bossName"),this.bossName.getComponent(cc.Label).string=l.MonsterConfig.getMonsterConfigById(e.monsterId).name,this.bossworld=this.findChild(this.node,"bossworld"),this.killType=this.findChild(this.node,"killType");var n=h.AutoRobotChatModel.getModelMethod().getBossJingJie(e.monsterId);this.selectWorldConfig=this.wordConfigList[n],this.bossworld.getComponent(f.DropDownPrefab).init(this.wordConfigList,n,function(e){i.selectWorldConfig=e,i.checkBossMap(),i.checkBossSec(0),s.EventManager.instance.dispatch(r.CommonEvent.Event_Auto_Robot_Setting)});var o=I.ShenBinModel.getShenBinModelByType(I.ShenBinModel.CHIXUEMOJIAN),a=(u.ChiXueMoJianConfig.getChixuemojianConfigById(o.shenbingId),m.default.getModelByShenbinType(I.ShenBinModel.CHIXUEMOJIAN,b.default.instance)),c=(C.ShenbingskillAllConfig.getSkillConfigById(a.id),h.AutoRobotChatModel.getModelMethod().getBossKillType(e.monsterId));c>=this.killTypeList.length&&(c=0),this.selectKillTypeConfig=this.killTypeList[c],this.killType.getComponent(f.DropDownPrefab).init(this.killTypeList,c,function(e){i.selectKillTypeConfig=e,i.checkBossSec(1),s.EventManager.instance.dispatch(r.CommonEvent.Event_Auto_Robot_Setting)})},t.prototype.checkBossMap=function(){var e=this.mapConfig;if(1==this.selectWorldConfig.index)if(e=d.MapConfig.getMapConfigByMapId(e.mapId+1e3),g.JingJieModel.hadOpenJingJie(2))if(c.BossModel.hadBoss(this.model.monsterId+5e4)){if(e.Lv>p.default.maxFight){var t=v.WordConfig.getWord(60130);t=t.replace("[#]",e.Lv+""),_.UIHelper.showTip(t),w.default.instance.createView(k.default.gameView.toStrongerPanel),this.bossworld.getComponent(f.DropDownPrefab).onClickItem(this.wordConfigList[0])}}else v.WordConfig.showWord(60238),this.bossworld.getComponent(f.DropDownPrefab).onClickItem(this.wordConfigList[0]);else v.WordConfig.showWord(60237),this.bossworld.getComponent(f.DropDownPrefab).onClickItem(this.wordConfigList[0])},t.prototype.checkBossSec=function(e){if(1==this.selectKillTypeConfig.index){var t=I.ShenBinModel.getShenBinModelByType(I.ShenBinModel.CHIXUEMOJIAN),i=u.ChiXueMoJianConfig.getChixuemojianConfigById(t.shenbingId),n=m.default.getModelByShenbinType(I.ShenBinModel.CHIXUEMOJIAN,b.default.instance),o=C.ShenbingskillAllConfig.getSkillConfigById(n.id),a=this.mapConfig;1==this.selectWorldConfig.index&&(a=d.MapConfig.getMapConfigByMapId(a.mapId+1e3));var s=M.BaoshiInfoModel.getBaoShiSkillValueByType(I.ShenBinModel.CHIXUEMOJIAN);i.level<=0?(v.WordConfig.showWord(60239),this.killType.getComponent(f.DropDownPrefab).onClickItem(this.killTypeList[0])):y.BossKillModel.hadKillMonster(a.boss.monsterid)?a.Lv>Math.floor(p.default.totalFight*(o.parameter[2]/1e4+s[2]/1e4))&&(v.WordConfig.showWord(60241),0==e?this.bossworld.getComponent(f.DropDownPrefab).onClickItem(this.wordConfigList[0]):this.killType.getComponent(f.DropDownPrefab).onClickItem(this.killTypeList[0])):(v.WordConfig.showWord(60240),this.killType.getComponent(f.DropDownPrefab).onClickItem(this.killTypeList[0]))}},t=o([P],t)}(a.default));i.default=E,cc._RF.pop()},{"../../engine/DropDownPrefab":"DropDownPrefab","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ChiXueMoJianConfig":"ChiXueMoJianConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/AutoRobotChatModel":"AutoRobotChatModel","../model/BossKillModel":"BossKillModel","../model/BossModel":"BossModel","../model/FightModel":"FightModel","../model/JingJieModel":"JingJieModel","../model/RoleInfoModel":"RoleInfoModel","../model/ShenBinModel":"ShenBinModel","../model/ShenBinSkillModel":"ShenBinSkillModel","../utils/UIHelper":"UIHelper","../view/shenbing/BaoshiInfoModel":"BaoshiInfoModel"}],BossSpeedUpView:[function(e,t,i){"use strict";cc._RF.push(t,"09f4eVQAMpJyp2DgUG05ii8","BossSpeedUpView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/ViewBase"),c=e("../config/GameConst"),l=e("../config/ITemsConfig"),d=e("../config/MapConfig"),f=e("../config/MonsterConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../model/BossModel"),p=e("../model/ItemInfoModel"),m=e("../model/PrivilegeModel"),C=e("../model/RoleInfoModel"),_=e("../network/SocketClient"),v=e("../prefab/ItemPrefab"),y=e("../utils/UIHelper"),b=e("./FangShopView"),I=cc._decorator,M=I.ccclass,w=(I.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=20,t.currSelet=0,t.itemList=[],t.itemNameConfig=["I3131","I3132","I3133","I3134"],t}return n(t,e),t.prototype.onInitChild=function(){},t.prototype.onEnable=function(){s.EventManager.instance.on(h.CommonEvent.Event_Item_update,this.initItemList,this),this.bossName=this.findChild(this.node,"view/bg/middle/bossName/value"),this.refreshTimeTxt=this.findChild(this.node,"view/bg/middle/refreshTime/value"),this.materials=this.findChild(this.node,"view/bg/middle/materials"),this.itemPrefab=this.findChild(this.node,"view/bg/middle/materials/ItemPrefab"),this.itemPrefab.active=!1,this.des=this.findChild(this.node,"view/bg/middle/des/value"),this.currSelet=0,this.setTopUI(),this.initItemList(),this.refreshItem()},t.prototype.onShow=function(){this.onAddEvent(this.findChild(this.node,"view/bg/top/btnClose"),this.closeView.bind(this)),this.onAddEvent(this.findChild(this.node,"view/bg/btnUse"),this.onClickUse.bind(this)),this.refreshByServer(),this.refreshTime()},t.prototype.onClickUse=function(){var e=p.default.getItemAmount(this.itemNameConfig[this.currSelet]),t=l.ITemsConfig.getITemsConfigById(this.itemNameConfig[this.currSelet]);if(e>0){var i=u.BossModel.getBoss(C.default.instance.mapId);i&&_.default.s_req_buy_boss_rebtime(i.monsterId,this.itemNameConfig[this.currSelet],1,i.mapId)}else y.UIHelper.showTip(t.name+g.WordConfig.getWord(60306))},t.prototype.onClickGotoFangshi=function(){this.closeView(),y.UIHelper.gotoFangshi(b.default.TabIndex.YuanBao)},t.prototype.initItemList=function(){for(var e=this,t=function(t){var n=l.ITemsConfig.getITemsConfigById(i.itemNameConfig[t]),o=void 0;i.itemList[t]?o=i.itemList[t]:((o=cc.instantiate(i.itemPrefab)).parent=i.itemPrefab.parent,i.itemList[t]=o),o.active=!0;var a=p.default.create(c.GameConst.ITEM_KIND.ITEM,n.id,1,n.quality);o.getComponent(v.default).init(a),o.getChildByName("numTxt").getComponent(cc.Label).string=p.default.getItemAmount(n.id)+"/1",i.onAddEvent(o,function(){e.currSelet=t,e.refreshItem()})},i=this,n=0;n<this.itemNameConfig.length;n++)t(n)},t.prototype.refreshByServer=function(){var e=this;this.bossModel=u.BossModel.getBoss(C.default.instance.mapId);var t=f.MonsterConfig.getMonsterConfigById(this.bossModel.monsterId);this.bossName.getComponent(cc.Label).string=t.name,this.leftTime=this.bossModel.getLeftTime(),this.leftTime<=0&&(this.leftTime=0),this.schedule(function(){e.leftTime>=0&&(e.leftTime--,e.leftTime<=0&&e.closeView()),e.refreshTime()},1)},t.prototype.refreshTime=function(){this.bossModel=u.BossModel.getBoss(C.default.instance.mapId),this.bossModel&&(this.leftTime=this.bossModel.getLeftTime(),this.leftTime<=0?(this.refreshTimeTxt.getComponent(cc.Label).string="--",this.closeView()):this.refreshTimeTxt.getComponent(cc.Label).string=a.default.formatLeftTime2(1e3*this.bossModel.getLeftTime()))},t.prototype.refreshItem=function(){for(var e=u.BossModel.getBoss(C.default.instance.mapId),t=d.MapConfig.getMapConfigByMapId(e.mapId).boss.rebtime,i=0;i<this.itemList.length;i++)if(this.currSelet==i){var n=l.ITemsConfig.getITemsConfigById(this.itemNameConfig[i]);if(0==i||1==i)this.des.getComponent(cc.RichText).string=n.description;else{var o=void 0;o=m.default.hadFightGodPrivilege()?t*n.magic_value[0]/1e4/60*.5:t*n.magic_value[0]/1e4/60,this.des.getComponent(cc.RichText).string=cc.js.formatStr(g.WordConfig.getWord(60392),n.description,o)}this.itemList[i].getChildByName("img_xuanzhong").active=!0}else this.itemList[i].getChildByName("img_xuanzhong").active=!1},t=o([M],t)}(r.default));i.default=w,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/BossModel":"BossModel","../model/ItemInfoModel":"ItemInfoModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/UIHelper":"UIHelper","./FangShopView":"FangShopView"}],BuffConfig:[function(e,t,i){"use strict";cc._RF.push(t,"375a97AQHBIeJf09x3beTqt","BuffConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},e.getConfigById=function(e){return this.configMap.get(e)},e.getAllBuff=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},e.buffstate={attribute:"attribute",lucky_weakness:"lucky_weakness",BonusDamage_weakness:"BonusDamage_weakness",hppotion_ban:"hppotion_ban",manapotion_ban:"manapotion_ban"},e.Config_Name="buffConfig",e.configMap=new Map,e}();i.BuffConfig=n,cc._RF.pop()},{}],BuffModel:[function(e,t,i){"use strict";cc._RF.push(t,"cb6960lShNNC6ao1Y/3liUR","BuffModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.BuffModel=n,cc._RF.pop()},{}],BusinessModel:[function(e,t,i){"use strict";cc._RF.push(t,"d1e0fLdwHdAkL4nlwrRQFnu","BusinessModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/LocalStorage"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/RandomUtil"),c=e("../../engine/UIManager"),l=e("../config/EquipConfig"),d=e("../config/MapConfig"),f=e("../config/ViewConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../manager/RedPointManager"),p=e("../network/SocketClient"),m=e("./EquipGridModel"),C=e("./ItemInfoModel"),_=e("./PrivilegeModel"),v=e("./RoleInfoModel"),y=e("./ServerTime");(function(e){e[e.SellTime=0]="SellTime",e[e.BagTime=1]="BagTime",e[e.BuyTime=2]="BuyTime"})(i.BusinessTimeType||(i.BusinessTimeType={}));var b=function(){return function(){this.item_id="",this.priceIndex=0,this.item_num=0,this.shop_item_id=0,this.shop_item_resource_num=0,this.index=0}}();i.BusinessItem=b;var I=function(){function e(){this.timeLocalKeyList=["BusinessSellTime","BusinessBagTime","BusinessBuyTime"],this.buyList=[]}return e.prototype.initParam=function(){this.tipsTxt1=g.WordConfig.getWord(60577),this.tipsTxt2=g.WordConfig.getWord(60578),this.tipsTxt3=g.WordConfig.getWord(60579),this.tipsTxt4=g.WordConfig.getWord(60580),this.tipsTxt5=g.WordConfig.getWord(60581),this.tipsTxt6=g.WordConfig.getWord(60582),this.tipsTxt7=g.WordConfig.getWord(60583),this.tipsTxt8=g.WordConfig.getWord(60584),this.tipsTxt9=g.WordConfig.getWord(60585),this.equName=[g.WordConfig.getWord(60586),g.WordConfig.getWord(60587),g.WordConfig.getWord(60588),g.WordConfig.getWord(60589),g.WordConfig.getWord(60590)]},e.prototype.onEnable=function(){n.EventManager.instance.on(h.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},e.prototype.onSocketRespMsg=function(e,t){if(e==a.ProtoConfig.c_req_reback_items){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_reback_items,t).getRestNum();this.setRestNum(i)}},e.prototype.sendReq_reback_info=function(){p.default.req_reback_info(),n.EventManager.instance.on(h.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},e.prototype.getRestNum=function(){return this.restNum},e.prototype.setRestNum=function(e){this.restNum=e},e.setNoSellOneAlert=function(e){this.noSellOneAlert=e},e.getNoSellOneAlert=function(){return this.noSellOneAlert},e.prototype.startSellOne=function(t){if(t)if(this.getRestNum()<=0)g.WordConfig.showWord(60125);else{for(var i=0;i<t.fuwenNeedList.length;i++)if(t.fuwenActive||1==t.embedRuneList[t.fuwenNeedList[i].index])return void g.WordConfig.showWord(61535);var n=4==t.quality,o=m.EquipGridModel.isBetterByEquip(t);if(!e.getNoSellOneAlert()&&(n||o)){var a="\u60a8\u786e\u8ba4\u8981\u56de\u6536\u6b64\u88c5\u5907\u5417\uff1f";n?a="\u6b64\u88c5\u5907\u662f\u6a59\u8272\u88c5\u5907,"+a:o&&(a="\u6b64\u88c5\u5907\u6bd4\u60a8\u8eab\u4e0a\u88c5\u5907\u6218\u529b\u9ad8,"+a);var s={arr:[{name:"\u786e\u5b9a",id:1},{name:"\u53d6\u6d88",id:2}],txt:a,chk:"\u672c\u6b21\u80cc\u5305\u9762\u677f\u4e0d\u518d\u63d0\u793a",ext:t,fun:this.callbakSellOneAlert};c.default.instance.createView(f.default.gameView.CommonAlertView,null,s)}else e.startSellOne(t)}},e.startSellOne=function(e){var t=[];t.push(parseInt(e.itemId));var i=0,n=0,o=0,a=0;e.xilianTime>0&&e.isCanEquipAnimation()&&(l.EquipConfig.getEquipConfigById(e.itemType).world==d.MapConfig.WORLD.LunHui?(n++,a+=e.xilianCost):(i++,o+=e.xilianCost)),i>0||n>0?c.default.instance.createView(f.default.gameView.RecycleTip,null,i,o,n,a,t):p.default.req_reback_items(t,2)},e.prototype.callbakSellOneAlert=function(t,i,n){1==t&&(e.startSellOne(n),e.setNoSellOneAlert(i))},e.prototype.isRecovePrivilege=function(){return _.default.hadRecoveryPrivilege()},e.prototype.getPreTime=function(t){var i=this.timeLocalKeyList[t]+v.default.instance.roleId,n=o.default.getInt(i),a=y.ServerTime.getServerTime();return 0==n||a-n>e.COUNTDOWN_COUNT?(o.default.setInt(i,a),e.COUNTDOWN_COUNT):e.COUNTDOWN_COUNT-(a-n)},e.prototype.refreshTime=function(t){var i=this.timeLocalKeyList[t]+v.default.instance.roleId,n=y.ServerTime.getServerTime();return o.default.setInt(i,n),e.COUNTDOWN_COUNT},e.prototype.countDownToDate=function(e){var t=Math.floor(e/1e3),i=Math.floor(t/60),n=t%60;return(i<10?"0"+i:i)+g.WordConfig.getWord(60591)+(n<10?"0"+n:n)+g.WordConfig.getWord(60500)},e.prototype.getPreRatio=function(){var t=e.LOCAL_KEY.BUSINESS_SELL_RATIO+v.default.instance.roleId,i=o.default.getInt(t);return 0==i?this.refreshRatio():i},e.prototype.refreshRatio=function(){var t=e.LOCAL_KEY.BUSINESS_SELL_RATIO+v.default.instance.roleId,i=r.default.nextInt(50,150);return o.default.setInt(t,i),i},e.prototype.getRatio=function(){var t=this.getPreRatio();return this.isRecovePrivilege()?t*e.PRIVILEGE_SELL_RATIO:t},e.prototype.getUseBagSize=function(){var t=e.LOCAL_KEY.BUSINESS_USE_BAG_SIZE+v.default.instance.roleId;return o.default.getInt(t)},e.prototype.getLostBagSize=function(){return this.getMaxBagSize()-this.getUseBagSize()},e.prototype.getMaxBagSize=function(){return e.BASE_BAG_SIZE*(this.isRecovePrivilege()?e.PRIVILEGE_BAG_RATIO:1)},e.prototype.updateBagSize=function(t){var i=e.LOCAL_KEY.BUSINESS_USE_BAG_SIZE+v.default.instance.roleId,n=t+this.getUseBagSize();o.default.setInt(i,n)},e.prototype.refreshBagSize=function(){var t=e.LOCAL_KEY.BUSINESS_USE_BAG_SIZE+v.default.instance.roleId;o.default.setInt(t,0)},e.prototype.getPreShopData=function(){return this.buyList},e.prototype.updateShopData=function(e,t){},e.prototype.refreshShopData=function(){},e.prototype.getRurioNums=function(){return v.default.instance.getRurioAmount()},e.prototype.subRurioNums=function(){C.default.getItem("I3003").useArticle(1)},e.prototype.getIsOwnOccupation=function(){var t=e.LOCAL_KEY.BUSINESS_IS_OWN+v.default.instance.roleId;return o.default.getBoolean(t)},e.prototype.setIsOwnOccupation=function(t){var i=e.LOCAL_KEY.BUSINESS_IS_OWN+v.default.instance.roleId;o.default.setBoolean(i,t),u.default.getInstance().checkRedPointById(u.RedPointId.Recycle)},e.prototype.proto2ModelList=function(e){var t=e.getShopItemListList();this.nextRefreshTime=e.getTime(),this.proto2ItemList(t)},e.prototype.proto2ItemList=function(e){this.buyList=[];for(var t=0;t<e.length;t++){var i=e[t],o=new b;o.shop_item_id=i.getShopItemId(),o.item_id=i.getItemType(),o.item_num=i.getShopItemNum(),o.priceIndex=i.getShopItemResourceType()-1,o.shop_item_resource_num=i.getShopItemResourceNum(),o.index=i.getIndex(),this.buyList.push(o)}this.buyList.sort(function(e,t){return e.index-t.index}),n.EventManager.instance.dispatch(h.CommonEvent.Event_req_shop_fresh_info)},e.instance=new e,e.LOCAL_KEY={BUSINESS_SELL_RATIO:"BusinessSellRatio",BUSINESS_USE_BAG_SIZE:"BusinessUseBagSize",BUSINESS_SHOP_DATA:"BusinessShopData",BUSINESS_IS_OWN:"BusinessIsOwn"},e.COUNTDOWN_COUNT=18e5,e.BASE_BAG_SIZE=100,e.PRIVILEGE_SELL_RATIO=2,e.PRIVILEGE_BAG_RATIO=2,e.noSellOneAlert=!1,e}();i.BusinessModel=I,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/RandomUtil":"RandomUtil","../../engine/UIManager":"UIManager","../config/EquipConfig":"EquipConfig","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../network/SocketClient":"SocketClient","./EquipGridModel":"EquipGridModel","./ItemInfoModel":"ItemInfoModel","./PrivilegeModel":"PrivilegeModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],BusinessView:[function(e,t,i){"use strict";cc._RF.push(t,"795c3epAbtM5b6Xa0tnQ9bP","BusinessView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/SpriteFrameComponent"),l=e("../../engine/UIManager"),d=e("../../engine/ViewBase"),f=e("../config/ColorConfig"),g=e("../config/EquipConfig"),h=e("../config/GameConfig"),u=e("../config/GameConst"),p=e("../config/MapConfig"),m=e("../config/ShopAllConfig"),C=e("../config/ViewConfig"),_=e("../config/WordConfig"),v=e("../event/CommonEvent"),y=e("../miniGameTools/tttool"),b=e("../model/BusinessModel"),I=e("../model/ItemInfoModel"),M=e("../model/NewFeaturesModel"),w=e("../model/PrivilegeModel"),k=e("../model/RoleInfoModel"),S=e("../model/ServerTime"),P=e("../network/SocketClient"),E=e("../sdk/LoongCheerManager"),L=e("../sdk/SdkHandler"),T=e("../sdk/SdkHelper"),R=e("../sdk/SdkManager"),N=e("../utils/MusicHelper"),B=e("../utils/UIHelper"),A=e("./BuyShopView"),G=cc._decorator,x=G.ccclass,O=(G.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabList=[],t.sellItemList=[],t.curTabIndex=0,t.sellTimeText=null,t.bagTimeText=null,t.buyTimeText=null,t.sellCountDown=0,t.bagCountDown=0,t.buyCountDown=0,t.cleanUpBtnNode=null,t.isBagCountdown=!1,t.isBuyCountdownByServer=!1,t.isSellCountDownByServer=!1,t.isBagByServer=!1,t.buyNodeContent=null,t.yunyou=null,t.appraisal=null,t}return n(t,e),t.prototype.onLoad=function(){var e=this.node.getChildByName("public");e.getChildByName("btnyunyou").on(cc.Node.EventType.TOUCH_END,this.showShopType.bind(this,0));var t=e.getChildByName("btnappraisal");this.onAddEvent(t,M.NewFeaturesModel.instance.pushFeaturesNode(1041,t,this.showShopType.bind(this,1))),this.appraisal=this.node.getChildByName("appraisal"),this.yunyou=this.node.getChildByName("yunyou"),this.buyNode=this.yunyou.getChildByName("buyNode"),this.tabList=this.yunyou.getChildByName("selectTab").children,this.sellItemList=this.yunyou.getChildByName("sellNode").children,this.buyNodeContent=this.findChild(this.yunyou,"buyNode/view/content"),this.btn1=this.yunyou.getChildByName("btn1"),this.btn2=this.yunyou.getChildByName("btn2"),this.sellTips=this.yunyou.getChildByName("sellTips"),this.changePrice1=this.findChild(this.sellTips,"antiqueLayout/changePrice"),this.buyTips=this.yunyou.getChildByName("buyTips"),this.changePrice2=this.buyTips.getChildByName("changePrice"),this.tipsTxt1=this.yunyou.getChildByName("talkFrame").getChildByName("tipsTxt1"),this.tipsTxt2=this.yunyou.getChildByName("tipTxt2"),this.sellTimeText=this.sellTips.getChildByName("changeTime").getComponent(cc.Label),this.bagTimeText=this.findChild(this.sellTips,"bagTipsNode_1/bagTime").getComponent(cc.Label),this.buyTimeText=this.buyTips.getChildByName("changeTime2").getComponent(cc.Label),this.cleanUpBtnNode=this.findChild(this.sellTips,"bagTipsNode_1/btn_likeqingbao"),this.cleanUpBtnNode1=this.findChild(this.sellTips,"bagTipsNode_1/btn_likeqingbao_01"),this.sellNode=this.yunyou.getChildByName("sellNode"),this.isOwn=this.yunyou.getChildByName("isOwn"),this.btn_likeqingbao=this.getChild(this.yunyou,"sellTips/bagTipsNode_1/btn_likeqingbao"),this.txtAdCost=this.getChild(this.yunyou,"sellTips/bagTipsNode_1/btn_likeqingbao/txtAdCost",cc.Label),this.txtAdCost.node.active=!1,b.BusinessModel.instance.initParam(),this.addEvent()},t.prototype.showShopType=function(e){void 0===e&&(e=0),this.yunyou.active=0==e,this.appraisal.active=1==e},t.prototype.onEnable=function(){this.refreshTab(),this.refreshRurioNumsUI(),this.refreshSellRatioUI(),this.refreshBagTipsUI(),this.refreshEquipSellListUI(),this.refreshBuyUI(),P.default.req_shop_fresh_info(),P.default.req_reback_info(),h.GameConfig.connectServer||this.startCountdown(),this.isOwn.getComponent(cc.Toggle).isChecked=b.BusinessModel.instance.getIsOwnOccupation(),a.EventManager.instance.on(v.CommonEvent.Event_UserInfoRefresh,this.refreshEquipSellListUI,this),a.EventManager.instance.on(v.CommonEvent.Event_ad_end,this.onAdEnd,this),a.EventManager.instance.on(v.CommonEvent.Event_req_shop_fresh_info,this.onRefreshShopInfo,this),a.EventManager.instance.on(v.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),a.EventManager.instance.on(u.EVENT_NAME.BAG_ADD,this.onEventAddModel,this),a.EventManager.instance.on(u.EVENT_NAME.BAG_CUT,this.onEventCutModel,this),this.btn_likeqingbao.getComponent(cc.Sprite).spriteFrame=this.btn_likeqingbao.getComponent(c.SpriteFrameComponent).spriteFrameList[0],this.txtAdCost.node.active=!1,h.GameConfig.isOpenAd||(this.btn_likeqingbao.getComponent(cc.Sprite).spriteFrame=this.btn_likeqingbao.getComponent(c.SpriteFrameComponent).spriteFrameList[1],this.txtAdCost.node.active=!0),this.showShopType()},t.prototype.addEvent=function(){this.btn1.on(cc.Node.EventType.TOUCH_END,this.onClickRefreshSell.bind(this)),this.btn2.on(cc.Node.EventType.TOUCH_END,this.onClickRefreshBuy.bind(this)),this.cleanUpBtnNode.on(cc.Node.EventType.TOUCH_END,this.onClickRefreshBag.bind(this)),this.cleanUpBtnNode1.on(cc.Node.EventType.TOUCH_END,this.onClickRefreshBag.bind(this));for(var e=0;e<this.sellItemList.length;e++){this.sellItemList[e].getChildByName("btn_chushou").on(cc.Node.EventType.TOUCH_END,this.onClickSell.bind(this,e))}this.isOwn.on("toggle",this.onClickToggle,this)},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_req_reback_items){var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_req_reback_items,t),n=i.getRestNum();this.rest_num=n;var o=i.getTime(),a=i.getRebacktime();this.bagCountDown=1e3*a-S.ServerTime.getServerTime();var c=i.getRate();this.sellCountDown=1e3*o-S.ServerTime.getServerTime(),this.nowRadio=c,this.sellCountDown<=0&&(this.sellCountDown=0),this.isSellCountDownByServer=!0,this.bagCountDown<=0?this.bagCountDown=0:this.isBagCountdown=!0,this.isBagByServer=!0,this.refreshBagTipsUI(),this.refreshSellRatioUI(),this.resetSell(),this.resetBagSize(),this.resetBuy(),this.refreshEquipSellListUI(),this.isStartTime?this.nowRadio>=100?this.playTxtMv(this.tipsTxt1.getComponent(cc.Label),b.BusinessModel.instance.tipsTxt4):this.playTxtMv(this.tipsTxt1.getComponent(cc.Label),b.BusinessModel.instance.tipsTxt5):(this.startCountdown(),this.isStartTime=!0)}},t.prototype.onRefreshShopInfo=function(){this.isBuyCountdownByServer=!0;var e=S.ServerTime.getServerTime()/1e3,t=b.BusinessModel.instance.nextRefreshTime-e;t<=0&&(t=0),this.buyCountDown=1e3*t,this.refreshBuyUI(),w.default.hadFreePrivilege()&&(this.cleanUpBtnNode1.active=!0,this.cleanUpBtnNode.active=!1)},t.prototype.refreshTab=function(){this.unscheduleAllCallbacks();for(var e=0;e<this.tabList.length;e++)e==this.curTabIndex?this.tabList[e].getChildByName("select").active=!0:this.tabList[e].getChildByName("select").active=!1;0==this.curTabIndex?(this.sellNode.active=!0,this.buyNode.active=!1,this.refreshEquipSellListUI(),this.btn1.active=!0,this.btn2.active=!1,this.sellTips.active=!0,this.buyTips.active=!1,this.tipsTxt1.getComponent(cc.Label).string=b.BusinessModel.instance.tipsTxt1,this.tipsTxt2.getComponent(cc.Label).string=b.BusinessModel.instance.tipsTxt7):(this.sellNode.active=!1,this.buyNode.active=!0,this.btn1.active=!1,this.btn2.active=!0,this.sellTips.active=!1,this.buyTips.active=!0,this.tipsTxt1.getComponent(cc.Label).string=b.BusinessModel.instance.tipsTxt6,this.tipsTxt2.getComponent(cc.Label).string=b.BusinessModel.instance.tipsTxt8)},t.prototype.resetSell=function(){b.BusinessModel.instance.refreshRatio(),h.GameConfig.connectServer||(this.sellCountDown=b.BusinessModel.instance.refreshTime(b.BusinessTimeType.SellTime)),this.refreshCountdown(),this.refreshSellRatioUI(),this.refreshEquipSellListUI()},t.prototype.resetBuy=function(){b.BusinessModel.instance.refreshShopData(),h.GameConfig.connectServer||(this.buyCountDown=b.BusinessModel.instance.refreshTime(b.BusinessTimeType.BuyTime)),this.refreshCountdown(),this.refreshBuyUI()},t.prototype.resetBagSize=function(){b.BusinessModel.instance.refreshBagSize(),h.GameConfig.connectServer||(this.bagCountDown=b.BusinessModel.instance.refreshTime(b.BusinessTimeType.BagTime)),this.refreshCountdown(),this.refreshBagTipsUI(),this.refreshEquipSellListUI()},t.prototype.refreshSellRatioUI=function(){var e=b.BusinessModel.instance.getRatio();h.GameConfig.connectServer&&(e=this.nowRadio);var t=this.sellTips.getChildByName("pricePercent").getComponent(cc.Label),i=this.sellTips.getChildByName("up"),n=this.sellTips.getChildByName("down"),o=this.sellTips.getChildByName("godPrivilegeTxt");t.string=e+"%",o.active=b.BusinessModel.instance.isRecovePrivilege(),e>=100?(t.node.color=cc.Color.GREEN,i.active=!0,n.active=!1):e<100?(t.node.color=cc.Color.RED,i.active=!1,n.active=!0):(t.node.color=cc.Color.WHITE,i.active=!1,n.active=!1)},t.prototype.refreshEquipSellListUI=function(){for(var e=0;e<this.sellItemList.length;e++){var t=k.default.instance.getShowEquip(e,b.BusinessModel.instance.getIsOwnOccupation()),i=Math.floor(t.price*this.nowRadio/100),n=Math.floor(t.cream*this.nowRadio/100);this.sellItemList[e].getChildByName("txtName").getComponent(cc.Label).string=b.BusinessModel.instance.equName[e]+":"+t.count,this.sellItemList[e].getChildByName("txtCoin").getComponent(cc.Label).string=B.UIHelper.tranNumber(i)+"",this.sellItemList[e].getChildByName("txtCream").getComponent(cc.Label).string=B.UIHelper.tranNumber(n)+""}},t.prototype.refreshBagTipsUI=function(){var e=this.sellTips.getChildByName("bagTipsNode_1"),t=this.sellTips.getChildByName("bagTipsNode_2"),i=b.BusinessModel.instance.getUseBagSize(),n=b.BusinessModel.instance.getMaxBagSize(),o=b.BusinessModel.instance.getLostBagSize();if(h.GameConfig.connectServer&&(i=n-(o=this.rest_num)),0==i){e.active=!1,t.active=!0,(a=t.getChildByName("bagNums").getComponent(cc.Label)).string=o+"/"+n}else{e.active=!0,t.active=!1;var a=e.getChildByName("bagNums").getComponent(cc.Label),s=e.getChildByName("maxBagNums").getComponent(cc.Label);a.string=o+"",s.string="",a.node.color=0==o?cc.Color.RED:cc.Color.GREEN}},t.prototype.refreshBuyUI=function(){for(var e=b.BusinessModel.instance.getPreShopData(),t=this.buyNodeContent.childrenCount-1;t>=0;t--){var i=this.buyNodeContent.children[t];"temporary"==i.name&&i.removeFromParent()}var n=this.buyNodeContent.getChildByName("item");n.active=!1;for(var o=0;o<e.length;o++){var a=m.ShopAllConfig.getConfig(e[o].item_id);if(a){var s=cc.instantiate(n);s.name="temporary",s.parent=this.buyNodeContent,s.active=!0,s.getChildByName("mask").active=0==e[o].item_num;var r=f.ColorConfig.getQualityColor(I.default.getConfigById(a.item_id).quality),c=s.getChildByName("name");c.getComponent(cc.Label).string=a.name+"x"+e[o].item_num,c.color=r;var l=e[o].priceIndex;s.getChildByName("price").getComponent(cc.Label).string=0==l?_.WordConfig.getWord(60393)+e[o].shop_item_resource_num:_.WordConfig.getWord(60394)+e[o].shop_item_resource_num,s.on(cc.Node.EventType.TOUCH_END,this.onClickOpenBuyPanel.bind(this,o))}}},t.prototype.refreshRurioNumsUI=function(){var e=b.BusinessModel.instance.getRurioNums();this.changePrice1.getComponent(cc.Label).string=e+"",this.changePrice2.getComponent(cc.Label).string=e+"",0==e?(this.changePrice1.color=cc.Color.RED,this.changePrice2.color=cc.Color.RED):(this.changePrice1.color=cc.Color.GREEN,this.changePrice2.color=cc.Color.GREEN)},t.prototype.startCountdown=function(){var e=this;h.GameConfig.connectServer||(this.sellCountDown=b.BusinessModel.instance.getPreTime(b.BusinessTimeType.SellTime),this.bagCountDown=b.BusinessModel.instance.getPreTime(b.BusinessTimeType.BagTime),this.buyCountDown=b.BusinessModel.instance.getPreTime(b.BusinessTimeType.BuyTime),this.isBuyCountdownByServer=!0,this.isSellCountDownByServer=!0,this.isBagByServer=!0),this.refreshCountdown(),b.BusinessModel.COUNTDOWN_COUNT>this.bagCountDown&&(this.isBagCountdown=!0),this.timeId=setInterval(function(){e.isSellCountDownByServer&&(e.sellCountDown-=1e3,e.sellCountDown<=0&&(h.GameConfig.connectServer?(e.isSellCountDownByServer=!1,P.default.resh_reback_info(1)):e.resetSell())),e.isBagByServer&&(e.bagCountDown-=1e3,e.bagCountDown<=0&&(h.GameConfig.connectServer?P.default.resh_reback_info(2):e.resetBagSize())),e.isBuyCountdownByServer&&(e.buyCountDown-=1e3,e.buyCountDown<=0&&(h.GameConfig.connectServer?P.default.req_shop_fresh(2):e.resetBuy())),e.refreshCountdown()},1e3)},t.prototype.refreshCountdown=function(){this.sellCountDown<=0&&(this.sellCountDown=0),this.buyCountDown<=0&&(this.buyCountDown=0),this.bagCountDown<=0&&(this.bagCountDown=0),this.sellCountDown>=0&&(this.sellTimeText.string=b.BusinessModel.instance.countDownToDate(this.sellCountDown)),this.bagCountDown>=0&&(this.bagTimeText.string=cc.js.formatStr(_.WordConfig.getWord(60625),b.BusinessModel.instance.countDownToDate(this.bagCountDown))),this.buyCountDown>=0&&(this.buyTimeText.string=b.BusinessModel.instance.countDownToDate(this.buyCountDown))},t.prototype.onAdEnd=function(e){void 0===e&&(e=2),this.playTxtMv(this.tipsTxt1.getComponent(cc.Label),b.BusinessModel.instance.tipsTxt3),P.default.resh_reback_info(e,1)},t.prototype.onClickRefreshBag=function(){N.MusicHelper.play_click(),h.GameConfig.connectServer?h.GameConfig.sdkType==h.SdkType.BingNiao?w.default.hadFreePrivilege()?this.onAdEnd():h.GameConfig.isWechat()?y.tttool.OpenAD():h.GameConfig.sdkType==h.SdkType.BingNiao?T.default.sdkAd():R.default.sdkAd(L.AdType.videoAd,E.AdPosId.sellchance):h.GameConfig.sdkType==h.SdkType.LoongCheer?w.default.hadFreePrivilege()?this.onAdEnd():h.GameConfig.isWechat()?y.tttool.OpenAD():R.default.sdkAd(L.AdType.videoAd,E.AdPosId.sellchance):h.GameConfig.sdkType==h.SdkType.Xiaotun?w.default.hadFreePrivilege()?this.onAdEnd():R.default.sdkAd(L.AdType.videoAd,E.AdPosId.sellchance):this.onAdEnd(3):this.resetBagSize()},t.prototype.playTxtMv=function(e,t,i){void 0===i&&(i=1),t&&t.length>0&&i<=t.length&&(e.string=t.substring(0,i),this.unscheduleAllCallbacks(),this.scheduleOnce(this.playTxtMv.bind(this,e,t,i+1),.002))},t.prototype.onClickRefreshSell=function(){N.MusicHelper.play_click();B.UIHelper.printNodeAllNodeName(this.btn1);if(b.BusinessModel.instance.getRurioNums()<=0){var e={itemId:u.ItemId.ANTIQUE,desc:_.WordConfig.getWord(60395),amount:3,type:1};l.default.instance.createView(C.default.gameView.buyItem,null,e)}else h.GameConfig.connectServer?(T.default.sdkCustomAction(27,1),P.default.resh_reback_info(1,1)):(b.BusinessModel.instance.subRurioNums(),this.refreshRurioNumsUI(),this.resetSell())},t.prototype.onClickRefreshBuy=function(){if(N.MusicHelper.play_click(),b.BusinessModel.instance.getRurioNums()<=0){var e={itemId:u.ItemId.ANTIQUE,desc:_.WordConfig.getWord(60395),amount:3,type:2};l.default.instance.createView(C.default.gameView.buyItem,null,e)}else h.GameConfig.connectServer?(T.default.sdkCustomAction(28,1),P.default.req_shop_fresh(1)):(b.BusinessModel.instance.subRurioNums(),this.refreshRurioNumsUI(),this.resetBuy())},t.prototype.onClickSell=function(e){N.MusicHelper.play_click();var t=k.default.instance.getShowEquip(e,b.BusinessModel.instance.getIsOwnOccupation(),b.BusinessModel.instance.getLostBagSize()),i=t.equipList;if(0!=t.isnofuwen||1!=t.ishavefuwen)if(i.length>0){var n=Math.floor(t.price*this.nowRadio/b.BusinessModel.instance.getMaxBagSize()),o=Math.floor(t.cream*this.nowRadio/b.BusinessModel.instance.getMaxBagSize());if(h.GameConfig.connectServer){if(this.rest_num<=0)return void _.WordConfig.showWord(60125);for(var a=[],s=0;s<i.length;s++){var r=i[s];a.push(parseInt(r.itemId))}for(var c=0,d=0,f=0,u=0,m=0;m<i.length;m++)i[m].xilianTime>0&&i[m].isCanEquipAnimation()&&(g.EquipConfig.getEquipConfigById(i[m].itemType).world==p.MapConfig.WORLD.LunHui?(d++,u+=i[m].xilianCost):(c++,f+=i[m].xilianCost));c>0||d>0?l.default.instance.createView(C.default.gameView.RecycleTip,null,c,f,d,u,a):P.default.req_reback_items(a,2),T.default.sdkCustomAction(14,n),T.default.sdkCustomAction(23,o)}else k.default.instance.addCoin(n),k.default.instance.addCream(o),k.default.instance.recoveryEquipList(t.equipList),b.BusinessModel.instance.updateBagSize(t.count),this.isBagCountdown=!0,this.refreshBagTipsUI(),this.refreshEquipSellListUI()}else _.WordConfig.showWord(60307);else _.WordConfig.showWord(61535)},t.prototype.onClickTab=function(e,t){N.MusicHelper.play_click();var i=parseInt(t);this.curTabIndex=i,this.refreshTab()},t.prototype.onClickToggle=function(){N.MusicHelper.play_click(),b.BusinessModel.instance.getIsOwnOccupation()?(this.isOwn.getComponent(cc.Toggle).uncheck(),b.BusinessModel.instance.setIsOwnOccupation(!1)):(this.isOwn.getComponent(cc.Toggle).check(),b.BusinessModel.instance.setIsOwnOccupation(!0)),this.refreshEquipSellListUI()},t.prototype.onClickOpenBuyPanel=function(e){var t=this;N.MusicHelper.play_click();var i=b.BusinessModel.instance.getPreShopData()[e];m.ShopAllConfig.getConfig(i.item_id);l.default.instance.createView(C.default.gameView.BuyShopView,null,A.default.BuyType.YunYouShangRen,1,i.item_id,i.shop_item_resource_num,i.shop_item_resource_num,i.priceIndex,i.item_num,function(e,i){b.BusinessModel.instance.updateShopData(e,i),t.refreshBuyUI()}.bind(this,e),null,i.shop_item_id,i.index)},t.prototype.onEventAddModel=function(e,t){void 0===t&&(t=0),e&&"I3003"==e.itemType&&this.refreshRurioNumsUI()},t.prototype.onEventCutModel=function(e,t){void 0===t&&(t=0),e&&"I3003"==e.itemType&&this.refreshRurioNumsUI()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),clearInterval(this.timeId)},t=o([x],t)}(d.default));i.default=O,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/ShopAllConfig":"ShopAllConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../miniGameTools/tttool":"tttool","../model/BusinessModel":"BusinessModel","../model/ItemInfoModel":"ItemInfoModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../network/SocketClient":"SocketClient","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","./BuyShopView":"BuyShopView"}],ButtomView:[function(e,t,i){"use strict";cc._RF.push(t,"29dc5No/ZhISIAJMgGaxbdd","ButtomView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../utils/MusicHelper"),l=e("../../../engine/EventManager"),d=e("../../event/CommonEvent"),f=e("../../model/NewFeaturesModel"),g=e("../../base/RadioButton"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentView=1,t.curTabIndex=0,t.lastTabIndex=0,t}return n(t,e),t.prototype.init=function(e){this.bagView=e,this.onShow()},t.prototype.onEnable=function(){this.node.scale=1,this.curTabIndex=0,this.lastTabIndex=0,this.refreshSelect(),l.EventManager.instance.on("GUIDE_10302",function(e){this.onToggle(1)}.bind(this),this),l.EventManager.instance.on(d.CommonEvent.Event_JumpToBag,this.handlerActionBag,this),this.onToggle(0)},t.prototype.onShow=function(){this.view=this.node.parent,this.buttonList=this.getChild(this.node,"scrollView/view/content");for(var e=0;e<this.buttonList.childrenCount;e++){var t=this.buttonList.getChildByName("tabNode"+e);1==e?this.onAddEvent(t,f.NewFeaturesModel.instance.pushFeaturesNode(1001,t,this.onToggle.bind(this,e))):2==e?this.onAddEvent(t,f.NewFeaturesModel.instance.pushFeaturesNode(1002,t,this.onToggle.bind(this,e))):4==e?this.onAddEvent(t,f.NewFeaturesModel.instance.pushFeaturesNode(1003,t,this.onToggle.bind(this,e))):5==e?this.onAddEvent(t,f.NewFeaturesModel.instance.pushFeaturesNode(1004,t,this.onToggle.bind(this,e))):3==e?this.onAddEvent(t,f.NewFeaturesModel.instance.pushFeaturesNode(1005,t,this.onToggle.bind(this,e))):6==e?this.onAddEvent(t,f.NewFeaturesModel.instance.pushFeaturesNode(1006,t,this.onToggle.bind(this,e))):this.onAddEvent(t,this.onToggle.bind(this,e))}this.refreshSelect()},t.prototype.onToggle=function(e){c.MusicHelper.play_click(),this.lastTabIndex=this.curTabIndex,this.curTabIndex=e,this.refreshSelect(),this.buttonList.getChildByName("tabNode"+e)&&this.buttonList.getChildByName("tabNode"+e).getComponent(g.default).selectOnClick()},t.prototype.refreshSelect=function(){this.bagView.selectTab(this.curTabIndex)},t.prototype.handlerActionBag=function(e){this.onToggle(e)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),s.default.instance.closeView(r.default.gameView.business)},t=o([u],t)}(a.default));i.ButtomView=p,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../base/RadioButton":"RadioButton","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/NewFeaturesModel":"NewFeaturesModel","../../utils/MusicHelper":"MusicHelper"}],BuyShopView:[function(e,t,i){"use strict";cc._RF.push(t,"38ce9bfoFFI/JhY/jTxZl+t","BuyShopView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/UIManager"),s=e("../../engine/ViewBase"),r=e("../config/DefaultConfig"),c=e("../config/GameConfig"),l=e("../config/GameConst"),d=e("../config/ITemsConfig"),f=e("../config/ViewConfig"),g=e("../config/WordConfig"),h=e("../model/AdModel"),u=e("../model/ItemInfoModel"),p=e("../model/PkModel"),m=e("../model/RoleInfoModel"),C=e("../network/SocketClient"),_=e("../sdk/SdkHelper"),v=e("../utils/MusicHelper"),y=e("../utils/UIHelper"),b=cc._decorator,I=b.ccclass,M=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowBuyNum=1,t.closeCallFunc=null,t.buyCallFunc=null,t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e,t,n,o,a,s,r,c,l,d,f,g,h){void 0===a&&(a=0),void 0===s&&(s=0),void 0===r&&(r=Number.MAX_VALUE),void 0===c&&(c=null),void 0===l&&(l=null),void 0===d&&(d=1),void 0===f&&(f=1),void 0===g&&(g=1),void 0===h&&(h=-1),this.buyType=e,this.itemId=n,this.unit_price=o,this.gem=a,this.priceIndex=s;var u=0;this.maxNum=r,this.priceIndex==i.PriceType.JinBi?u=Math.floor(m.default.instance.getCoin()/o):this.priceIndex==i.PriceType.YuanBao?u=Math.floor(m.default.instance.getGold()/o):this.priceIndex==i.PriceType.LeiTaiBi&&(u=Math.floor(m.default.instance.getLeiTaiBi()/o)),this.maxNum=Math.min(r,u),this.maxNum<=0&&(this.maxNum=1),this.maxNum>999&&(this.maxNum=999),this.closeCallFunc=l,this.buyCallFunc=c,this.nowBuyNum=t,this.shop_item_id=d,this.shopIndex=f,this.groupNum=g,this.xiangou=h,this.xiangou>=1&&this.maxNum>h&&(this.maxNum=h)},t.prototype.onShow=function(){a.default.instance.setTopUI(f.default.gameView.BuyShopView),this.findChild(this.node,"btnClose").on(cc.Node.EventType.TOUCH_END,this.onClickClose.bind(this)),this.findChild(this.node,"btnDec").on(cc.Node.EventType.TOUCH_END,this.onCLickPre.bind(this)),this.findChild(this.node,"btnAdd").on(cc.Node.EventType.TOUCH_END,this.onClickNext.bind(this)),this.findChild(this.node,"btnMax").on(cc.Node.EventType.TOUCH_END,this.onClickMax.bind(this)),this.findChild(this.node,"btnBuy").on(cc.Node.EventType.TOUCH_END,this.onCLickBuy.bind(this));var e=d.ITemsConfig.getITemsConfigById(this.itemId);this.config=e,this.node.getChildByName("ItemPrefab").getComponent("ItemPrefab").init(e),this.node.getChildByName("txtDesc").getComponent(cc.RichText).string=e.description,this.node.getChildByName("txtLevel").getComponent(cc.Label).string=e.level+"",this.node.getChildByName("txtLevel").color=e.level>m.default.instance.level?cc.Color.RED:cc.Color.GREEN,this.costNode=this.findChild(this.node,"costNode"),this.iconCoin=this.costNode.getChildByName("iconCoin"),this.iconGold=this.costNode.getChildByName("iconGold"),this.iconLeiTai=this.costNode.getChildByName("iconLeiTai"),this.txtCoin=this.getChild(this.costNode,"txtCoin",cc.Label),this.txtPriceType=this.getChild(this.node,"txtPriceType",cc.Label),this.amountEditBox=this.getChild(this.node,"amountEditBox",cc.EditBox),this.amountEditBox.node.on("text-changed",this.onTextChange,this),this.txtPriceMax=this.getChild(this.node,"txtPriceMax",cc.Label),this.txtPriceMax.node.active=this.xiangou>=0,this.txtMax=this.getChild(this.node,"txtMax",cc.Label),this.txtMax.node.active=this.xiangou>=0,this.txtMax.string=this.xiangou+"",this.refreBuy()},t.prototype.onHide=function(){},t.prototype.onTextChange=function(){this.nowBuyNum=parseInt(this.amountEditBox.string),this.refreBuy()},t.prototype.refreBuy=function(){this.priceIndex==i.PriceType.JinBi?(this.iconGold.active=!1,this.iconCoin.active=!0,this.iconLeiTai.active=!1,this.txtPriceType.string=g.WordConfig.getWord(60396),this.amountEditBox.string=this.nowBuyNum+"",this.txtCoin.string=this.nowBuyNum*this.unit_price+"",this.txtCoin.node.color=this.nowBuyNum*this.unit_price>m.default.instance.getCoin()?cc.Color.RED:cc.Color.GREEN,this.costNode.getChildByName("")):this.priceIndex==i.PriceType.YuanBao?(this.iconGold.active=!0,this.iconCoin.active=!1,this.iconLeiTai.active=!1,this.txtPriceType.string=g.WordConfig.getWord(60397),this.amountEditBox.string=this.nowBuyNum+"",this.itemId==p.PkModel.Item_LeitaiLing?this.txtCoin.string=i.getSuitArrByPos(226,p.PkModel.buynum,p.PkModel.buynum+this.nowBuyNum)+"":this.txtCoin.string=this.nowBuyNum*this.gem+"",this.txtCoin.node.color=this.nowBuyNum*this.gem>m.default.instance.getGold()?cc.Color.RED:cc.Color.GREEN):this.priceIndex==i.PriceType.LeiTaiBi&&(this.iconLeiTai.active=!0,this.iconCoin.active=!1,this.iconGold.active=!1,this.txtPriceType.string=g.WordConfig.getWord(60398),this.amountEditBox.string=this.nowBuyNum+"",this.txtCoin.string=this.nowBuyNum*this.unit_price+"",this.txtCoin.node.color=this.nowBuyNum*this.unit_price>m.default.instance.getLeiTaiBi()?cc.Color.RED:cc.Color.GREEN),this.node.getChildByName("ItemPrefab").getChildByName("numTxt").active=!0,this.node.getChildByName("ItemPrefab").getChildByName("numTxt").getComponent(cc.Label).string=this.groupNum*this.nowBuyNum+""},t.getSuitArrByPos=function(e,t,i){var n=r.DefaultConfig.getConfigById(e).value,o=0;for(var a in n){var s=parseInt(a);s>t&&s<=i&&(o+=n[a])}return o},t.prototype.onClickMax=function(){if(v.MusicHelper.play_click(),this.priceIndex==i.PriceType.JinBi){var e=Math.floor(m.default.instance.getCoin()/this.unit_price);this.nowBuyNum=this.maxNum<e?this.maxNum:e}else if(this.priceIndex==i.PriceType.YuanBao){e=Math.floor(m.default.instance.getGold()/this.gem);this.nowBuyNum=this.maxNum<e?this.maxNum:e}else if(this.priceIndex==i.PriceType.LeiTaiBi){e=Math.floor(m.default.instance.getLeiTaiBi()/this.unit_price);this.nowBuyNum=this.maxNum<e?this.maxNum:e}this.refreBuy()},t.prototype.onClickNext=function(){v.MusicHelper.play_click();var e=this.nowBuyNum+1;this.priceIndex==i.PriceType.JinBi?m.default.instance.getCoin()>=e*this.unit_price&&e<=this.maxNum&&(this.nowBuyNum++,this.refreBuy()):this.priceIndex==i.PriceType.YuanBao?m.default.instance.getGold()>=e*this.gem&&e<=this.maxNum&&(this.nowBuyNum++,this.refreBuy()):this.priceIndex==i.PriceType.LeiTaiBi&&m.default.instance.getLeiTaiBi()>=e*this.unit_price&&e<=this.maxNum&&(this.nowBuyNum++,this.refreBuy())},t.prototype.onCLickPre=function(){v.MusicHelper.play_click(),this.nowBuyNum>1&&(this.nowBuyNum--,this.refreBuy())},t.prototype.onCLickBuy=function(){v.MusicHelper.play_click(),m.default.instance.getAddItemMaxNum(u.AddItemParamStruct.create(m.default.instance,this.config.kind,this.config.id,this.nowBuyNum,this.config.quality,!0))<this.nowBuyNum?g.WordConfig.showWord(60001):this.nowBuyNum>0&&(this.priceIndex==i.PriceType.JinBi?m.default.instance.getCoin()>=this.nowBuyNum*this.unit_price?(c.GameConfig.connectServer&&("ordinaryHp"!=this.config.position&&"ordinaryMp"!=this.config.position&&"seniorHp"!=this.config.position&&"seniorMp"!=this.config.position||_.default.sdkCustomAction(19,this.nowBuyNum*this.unit_price),this.itemId==l.ItemId.REFINE?(_.default.sdkCustomAction(20,this.nowBuyNum*this.unit_price),_.default.sdkCustomAction(30,this.nowBuyNum)):this.itemId==l.ItemId.Book?_.default.sdkCustomAction(21,this.nowBuyNum*this.unit_price):this.itemId==l.ItemId.SkillDan&&(_.default.sdkCustomAction(22,this.nowBuyNum*this.unit_price),_.default.sdkCustomAction(36,this.nowBuyNum)),this.buyType==i.BuyType.FangShi?C.default.s_seq_fangbuy(this.shop_item_id,this.nowBuyNum):C.default.req_buy(this.buyType,this.shop_item_id,this.nowBuyNum,this.priceIndex+1,this.shopIndex,this.itemId)),this.onSureBuy()):(this.closeView(),c.GameConfig.isWechat()?h.default.getAdLostTimes(h.Ad_Type.Coin)>0?a.default.instance.createView(f.default.gameView.buyMoney):g.WordConfig.showWord(60102):y.UIHelper.showCoinNoEnough()):this.priceIndex==i.PriceType.YuanBao?m.default.instance.getGold()>=this.nowBuyNum*this.gem?(c.GameConfig.connectServer&&(this.itemId==l.ItemId.REFINE&&_.default.sdkCustomAction(29,this.nowBuyNum),this.buyType==i.BuyType.FangShi?C.default.s_seq_fangbuy(this.shop_item_id,this.nowBuyNum):C.default.req_buy(this.buyType,this.shop_item_id,this.nowBuyNum,this.priceIndex+1,this.shopIndex,this.itemId)),this.onSureBuy()):g.WordConfig.showWord(60115):this.priceIndex==i.PriceType.LeiTaiBi&&(m.default.instance.getLeiTaiBi()>=this.nowBuyNum*this.unit_price?c.GameConfig.connectServer&&(this.buyType==i.BuyType.FangShi?C.default.s_seq_fangbuy(this.shop_item_id,this.nowBuyNum):C.default.req_buy(this.buyType,this.shop_item_id,this.nowBuyNum,this.priceIndex+1,this.shopIndex,this.itemId),this.closeView()):g.WordConfig.showWord(60209)))},t.prototype.onSureBuy=function(){this.priceIndex!=i.PriceType.JinBi&&this.priceIndex!=i.PriceType.YuanBao&&this.priceIndex!=i.PriceType.LeiTaiBi||(this.buyCallFunc&&this.buyCallFunc(this.nowBuyNum),this.onClose())},t.prototype.onClickClose=function(){v.MusicHelper.play_click(),this.onClose()},t.prototype.onClose=function(){this.closeCallFunc&&this.closeCallFunc(),this.closeView()},t.prototype.update=function(){this.nowBuyNum=parseInt(this.amountEditBox.string),(isNaN(this.nowBuyNum)||this.nowBuyNum<=0)&&(this.nowBuyNum=1,this.amountEditBox.string=this.nowBuyNum+"",this.refreBuy()),this.nowBuyNum>=this.maxNum&&(this.nowBuyNum=this.maxNum,this.amountEditBox.string=this.nowBuyNum+"",this.refreBuy())},t.BuyType={YunYouShangRen:1,YaoDian:2,KuaiJieGouMai:3,FangShi:4},t.PriceType={JinBi:0,YuanBao:1,LeiTaiBi:8},t=i=o([I],t)}(s.default));i.default=M,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/AdModel":"AdModel","../model/ItemInfoModel":"ItemInfoModel","../model/PkModel":"PkModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../sdk/SdkHelper":"SdkHelper","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper"}],ByteArray:[function(e,t,i){"use strict";cc._RF.push(t,"06394IkJVBOYrBHUm0cK8yy","ByteArray"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.initData(e,t)}return e.prototype.initData=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.bytesBuff=e,this.bytesBuffView=null,e?this.bytesBuffView=new DataView(this.bytesBuff):(this.fmt=[],this.data=[]),this.endian=t,this.position=0,this.length=0},e.prototype.destory=function(){this.bytesBuff=null,this.fmt=null,this.data=null,this.bytesBuff=null,this.bytesBuffView=null},e.prototype.readByte=function(){var e=this.bytesBuffView.getInt8(this.position);return this.position+=1,e},e.prototype.writeByte=function(e){this.fmt.push("b"),this.data.push(e),this.length+=1},e.prototype.readShort=function(){var e=this.bytesBuffView.getInt16(this.position,this.endian);return this.position+=2,e},e.prototype.writeShort=function(e){this.fmt.push("h"),this.data.push(e),this.length+=2},e.prototype.writeLong=function(e){this.fmt.push("l"),this.data.push(e),this.length+=8},e.prototype.readInt=function(){var e=this.bytesBuffView.getInt32(this.position,this.endian);return this.position+=4,e},e.prototype.writeInt=function(e){this.fmt.push("i"),this.data.push(e),this.length+=4},e.prototype.readDouble=function(){var e=this.bytesBuffView.getFloat64(this.position,this.endian);return this.position+=8,e},e.prototype.writeDouble=function(e){this.fmt.push("d"),this.data.push(e),this.length+=8},e.prototype.readString=function(){var e=this.readShort();if(e<1)return"";for(var t=new Uint8Array(this.bytesBuff,this.position),i=[],n=0;n<e;n++)i[n]=t[n];var a=o(i);return this.position+=e,a},e.prototype.readStringEx=function(e){for(var t=new Uint8Array(this.bytesBuff,this.position),i=[],n=0;n<e;n++)i[n]=t[n];var a=o(i);return this.position+=e,a},e.prototype.writeString=function(e){var t=a(e);this.writeShort(t.length),this.fmt.push("s"),this.data.push(this._uintCharArrToString(t)),this.length+=t.length},e.prototype.writeMultiByte=function(e){for(var t=e.length,i=0;i<t;i++)this.writeByte(e.charCodeAt(i));this.length+=t},e.prototype._uintCharArrToString=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e.prototype.getbytes=function(){if(this.bytesBuff)return this.bytesBuff;for(var e=new ArrayBuffer(this.length),t=new DataView(e),i=this.fmt.length,n="",o=0,a=0,s=0;s<i;s++)n=this.fmt[s],o=this.data[s],"b"==n?(t.setInt8(a,o),a+=1):"h"==n?(t.setInt16(a,o,this.endian),a+=2):"i"==n?(t.setInt32(a,o,this.endian),a+=4):"d"==n?(t.setFloat64(a,o,this.endian),a+=8):"s"==n&&(a+=this._fillArryBuffWithString(o,e,a));return e},e.prototype._fillArryBuffWithString=function(e,t,i){if(e){for(var n=e.length,o=new DataView(t,i),a=0;a<n;a++)o.setUint8(a,e.charCodeAt(a));return n}},e}();function o(e){var t="",i=0,n=0,o=0,a=0;for(e.length>=3&&239==(239&e[0])&&187==(187&e[1])&&191==(191&e[2])&&(i=3);i<e.length;)if((n=255&e[i])<128)t+=String.fromCharCode(n),i++;else if(n>191&&n<224){if(i+1>=e.length)throw"Un-expected encoding error, UTF-8 stream truncated, or incorrect";o=255&e[i+1],t+=String.fromCharCode((31&n)<<6|63&o),i+=2}else{if(i+2>=e.length||i+1>=e.length)throw"Un-expected encoding error, UTF-8 stream truncated, or incorrect";o=255&e[i+1],a=255&e[i+2],t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),i+=3}return t}function a(e,t){void 0===t&&(t=!1),e=e.replace(/\r\n/g,"\n");var i=[];1==t&&(i[0]=239,i[1]=187,i[2]=191);for(var n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?i[i.length]=o:o>127&&o<2048?(i[i.length]=o>>6|192,i[i.length]=63&o|128):(i[i.length]=o>>12|224,i[i.length]=o>>6&63|128,i[i.length]=63&o|128)}return i}i.ByteArray=n,cc._RF.pop()},{}],CarnivalConfig:[function(e,t,i){"use strict";cc._RF.push(t,"91207cgQHpMMIkPVY23CKeJ","CarnivalConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.groupid=e.groupid,i.items=e.items,i.ress=e.ress,i.weight=e.weight,i.condition=e.condition,i.suprice=e.suprice,i.name=e.name,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getAllConfigList=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.Config_Name="carnivalConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],CarnivalInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"d41b62dwF9An6glbHLTpFfv","CarnivalInfoModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../config/CarnivalConfig"),s=e("../event/CommonEvent"),r=e("../network/SocketClient"),c=e("./ServerTime"),l=function(){function e(){this.giftList=[]}return e.proto2ModelList=function(t){this.model.actEndTime=t.getActendtime(),this.model.roundNum=t.getRoundnum(),this.model.currSelet=t.getCurrselet(),this.model.actStartTime=t.getActstarttime();var i=t.getGiftlistList();this.model.giftList=[];for(var a=0;a<i.length;a++){var c=new d;c.index=i[a].getIndex(),c.giftId=i[a].getGiftid(),this.model.giftList[a]=c}o.Logger.log("c_get_carnival_info====",this.model),n.EventManager.instance.dispatch(s.CommonEvent.Event_CarnivalInfoChange),this.model.giftList.length>=35&&(e.canNext||this.getIsGetUltimateGift())&&(o.Logger.log("\u8fdb\u5165\u4e0b\u4e00\u8f6e"),setTimeout(function(){r.default.s_fresh_carnival(),n.EventManager.instance.dispatch(s.CommonEvent.Event_NextRound)},1e3)),r.default.s_carnival_target_info()},e.getLeftTime=function(){var t=e.model.actEndTime-c.ServerTime.getServerTime()/1e3;return(t=Math.floor(t))<=0&&(t=0),t=Math.ceil(t)},e.getIsGetUltimateGift=function(){for(var e=!1,t=0;t<this.model.giftList.length;t++){if(1==a.default.getConfigById(this.model.giftList[t].giftId).suprice){e=!0;break}}return e},e.canNext=!1,e.model=new e,e}();i.default=l;var d=function(){return function(){}}();i.CarnivalgiftModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../config/CarnivalConfig":"CarnivalConfig","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","./ServerTime":"ServerTime"}],CarvinalRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8151cQ06F1L3qxNLq55UMcm","CarvinalRewardConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.items=e.items,i.goal=e.goal,i.ress=e.ress,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getAllList=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.Config_Name="carnivalRewardConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],CarvinalSurpriceConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c7d560b7DdFPYm3hMeECpYQ","CarvinalSurpriceConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.groupid=e.groupid,i.times=e.times,i.weight=e.weight,i.items=e.items,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getAllConfigList=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.Config_Name="carnivalSurpriceConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ChangeWorldGiftView:[function(e,t,i){"use strict";cc._RF.push(t,"8611bLV6tlOlKSS5uyUIjKj","ChangeWorldGiftView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/UIManager"),r=e("../config/ViewConfig"),c=e("../config/GameConfig"),l=e("../network/SocketClient"),d=e("../model/RoleInfoModel"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){s.default.instance.setTopUI(r.default.gameView.ChangeWorldGiftView),this.addEvent()},t.prototype.addEvent=function(){this.onAddEvent(this.findChild(this.node,"btnClose"),this.onClickClose.bind(this)),this.onAddEvent(this.findChild(this.node,"btn_qhsj"),this.onClickChangeWorld.bind(this))},t.prototype.onClickChangeWorld=function(){d.default.instance.switchingMapId=1001,c.GameConfig.connectServer?l.default.req_switch_map(1001):d.default.instance.switchMap(!1)},t.prototype.onClickClose=function(){s.default.instance.closeView(r.default.gameView.ChangeWorldGiftView)},t=o([g],t)}(a.default));i.default=h,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConfig":"GameConfig","../config/ViewConfig":"ViewConfig","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient"}],ChaozhigiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fba04LqP1JFeaipfvkarnce","ChaozhigiftConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){this.rewards=[],this.ress=[]}}();i.ChaozhigiftConfigInfo=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(Number(i),n)})},t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfigByType=function(e){var t=[];return this.configMap.forEach(function(i,n){e==i.type&&t.push(i)}),t},t.Config_Name="chaozhigiftConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.ChaozhigiftConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ChaozhigifttypeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e99b5fBAixM+a32yAzmWsSK","ChaozhigifttypeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){this.args=[]}}();i.ChaozhigifttypeConfigInfo=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(Number(i),n),t.configArr.push(n)}),this.configArr.sort(function(e,t){return e.sort-t.sort})},t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.Config_Name="chaozhigifttypeConfig",t.configMap=new Map,t.configArr=[],t}(o.JsonConfigBase);i.ChaozhigifttypeConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ChargeActivityModel:[function(e,t,i){"use strict";cc._RF.push(t,"48cf4PlPgVOGL3KA9pNZAwS","ChargeActivityModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../event/CommonEvent"),a=e("../config/ChongZhiConfig"),s=e("./ServerTime"),r=function(){function e(){this.num=0,this.gift_id=0,this.time=0}return e.getCoinChargeModel=function(){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.type==e.ChargetType.Coin)return i}},e.getShuYeModel=function(){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.type==e.ChargetType.ShuYe)return i}},e.getXiLianShiModel=function(){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.type==e.ChargetType.XiLianShi)return i}},e.getCoinTimes=function(){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.type==e.ChargetType.Coin)return i.num}return 0},e.getCanSActivityCharge=function(){for(var e=0;e<this.modelList.length;e++){var t=this.modelList[e];if(t&&t.gift_id>0)return!0}},e.getShuYeLeftTime=function(){var e=this.getShuYeModel();if(!e||e.gift_id<=0)return 0;var t=(e.time+108e5-s.ServerTime.getServerTime())/1e3;return t<=0&&(t=0),t},e.getXiLianShiLeftTime=function(){var e=this.getXiLianShiModel();if(!e||e.gift_id<=0)return 0;var t=(e.time+108e5-s.ServerTime.getServerTime())/1e3;return t<=0&&(t=0),t},e.getCoinLeftTime=function(){var e=this.getCoinChargeModel();if(!e||e.gift_id<=0)return 0;var t=e.gift_id+201-1,i=a.ChongZhiConfig.getConfigById(t),n=(e.time+1e3*i.time-s.ServerTime.getServerTime())/1e3;return n<=0&&(n=0),n},e.proto2ModelList=function(t){e.total_charge_num=t.getTotalChargeNum();var i=t.getGiftInfoList();this.modelList=[];for(var a=0;a<i.length;a++){var s=new e;s.type=i[a].getType(),s.num=i[a].getNum(),s.gift_id=i[a].getGiftId(),s.time=1e3*i[a].getTime(),s.is_out_time=i[a].getIsOutTime(),this.modelList.push(s)}this.buy_coin_num=t.getBuyCoinNum(),this.buy_item_num=t.getBuyItemNum(),n.EventManager.instance.dispatch(o.CommonEvent.Event_ChargeActivity)},e.ChargetType={Coin:1,XiLianShi:2,ShuYe:3},e.GiftId={Coin_1:1,Coin_2:2,Coin_3:3,XiLianShi:4,ShuYe:5},e.buy_coin_num=0,e.buy_item_num=0,e.modelList=[],e}();i.default=r,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../config/ChongZhiConfig":"ChongZhiConfig","../event/CommonEvent":"CommonEvent","./ServerTime":"ServerTime"}],ChargeGiftModel:[function(e,t,i){"use strict";cc._RF.push(t,"19aa4ucl2tKjacXeqlI/M5G","ChargeGiftModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/LocalStorage"),a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../config/DefaultConfig"),l=e("../event/CommonEvent"),d=e("../manager/RedPointManager"),f=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[d.RedPointId.ChargeGift],this.protos=[s.ProtoConfig.c_recharge_gift_info],d.default.getInstance().addHandler(this)}return e.proto2Model=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_recharge_gift_info,e);this.total=t.getTotal()/100,this.silverstatus=t.getSilverstatus(),this.goldstatus=t.getGoldsttus(),a.Logger.log("c_recharge_gift_info=====",t),n.EventManager.instance.dispatch(l.CommonEvent.Event_Gift_refresh)},e.prototype.checkRedPoint=function(){var t=o.default.getBoolean("TopUpView"),i=1==e.silverstatus&&e.total>=c.DefaultConfig.getConfigById(51).money,n=1==e.goldstatus&&e.total>=c.DefaultConfig.getConfigById(52).money,s=(i||n)&&!t;return a.Logger.log("checkRedPoint======",s,i,n,t),{id:d.RedPointId.ChargeGift,type:d.RedPointType.Default,show:s}},e}();i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/DefaultConfig":"DefaultConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],ChargeSucView:[function(e,t,i){"use strict";cc._RF.push(t,"f5006D3B8ZAt7VRPwZgpBTq","ChargeSucView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../utils/MusicHelper"),r=e("../config/ChongZhiConfig"),c=e("../../engine/UIManager"),l=e("../config/ViewConfig"),d=e("../config/FangShopConfig"),f=e("../../engine/EventManager"),g=e("../event/CommonEvent"),h=e("../config/WordConfig"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e,t){this.chargeId=e,this.diamond=t,this.config=r.ChongZhiConfig.getConfigById(e)},t.prototype.onShow=function(){var e=this;c.default.instance.setTopUI(l.default.gameView.ChargeSucView);var t=r.ChongZhiConfig.getConfigById(this.chargeId);this.node.getChildByName("btnSure").on(cc.Node.EventType.TOUCH_END,function(){if(s.MusicHelper.play_click(),e.closeView(),601==e.chargeId||602==e.chargeId||603==e.chargeId){var t=d.default.getConfigByCharge(e.chargeId).shopId;c.default.instance.createView(l.default.gameView.ZhenBaoDes,null,t)}});var i=this.node.getChildByName("txtDesc").getComponent(cc.Label);2==this.chargeId?i.string=h.WordConfig.getWord(60763):3==this.chargeId?i.string=h.WordConfig.getWord(60764):4==this.chargeId?i.string=h.WordConfig.getWord(60765):5==this.chargeId?i.string=h.WordConfig.getWord(60766):6==this.chargeId?i.string=h.WordConfig.getWord(60767):9==this.chargeId||1009==this.chargeId?i.string=h.WordConfig.getWord(60768):10==this.chargeId||1010==this.chargeId?i.string=h.WordConfig.getWord(60769):11==this.chargeId||1011==this.chargeId?i.string=h.WordConfig.getWord(60770):601==this.chargeId||602==this.chargeId||603==this.chargeId||503==this.chargeId||504==this.chargeId||1503==this.chargeId||1504==this.chargeId?i.string=h.WordConfig.getWord(60771)+t.des:8==this.chargeId?i.string=h.WordConfig.getWord(60772):503==this.chargeId||504==this.chargeId?f.EventManager.instance.dispatch(g.CommonEvent.Event_ChargeActivityOk,this.chargeId):this.chargeId>=601&&this.chargeId<=606||this.chargeId>=1601&&this.chargeId<=1606?i.string=h.WordConfig.getWord(60773)+t.name:this.diamond>0?i.string=h.WordConfig.getWord(60774)+this.diamond:i.string=h.WordConfig.getWord(60127)},t=o([p],t)}(a.default));i.default=m,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/FangShopConfig":"FangShopConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../utils/MusicHelper":"MusicHelper"}],ChargegiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"77749EyC3xG0I7QVCjI7M9y","ChargegiftConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ChatModel:[function(e,t,i){"use strict";cc._RF.push(t,"df880qfdeRASpRPDv2SwrXa","ChatModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../event/CommonEvent"),s=e("../config/WordConfig");(function(e){e[e.monsterRefresh=0]="monsterRefresh",e[e.monsterDead=1]="monsterDead",e[e.useGoods=2]="useGoods",e[e.roleDead=3]="roleDead",e[e.bagFull=4]="bagFull",e[e.mine=5]="mine"})(n=i.ChatType||(i.ChatType={}));var r=function(){function e(){}return e.reInit=function(){this.modelList=[]},e.addChatStr=function(t,i){var n=new e;n.chatType=t,n.showStr=i,this.modelList.push(n),this.modelList.length>this.maxChatNum&&this.modelList.shift(),o.EventManager.instance.dispatch(a.CommonEvent.Event_addChat,n)},e.addChat=function(t,i,r,c,l,d){void 0===i&&(i=null),void 0===r&&(r=null),void 0===c&&(c=0),void 0===l&&(l=-1),void 0===d&&(d=null);var f=new e;f.chatType=t,t==n.monsterRefresh?(f.AAA=i,f.showStr=""+i+s.WordConfig.getWord(60732)):t==n.monsterDead?(f.AAA=i,f.BBB=r,f.CCC=c,f.DDD=l,f.EEE=d,f.showStr=cc.js.formatStr(s.WordConfig.getWord(60733),i,r,c,l,d)):t==n.useGoods?(f.AAA=i,f.BBB=r,f.showStr=cc.js.formatStr(s.WordConfig.getWord(60734),i,r)):t==n.roleDead?(f.AAA=i,f.showStr=cc.js.formatStr(s.WordConfig.getWord(60735),i)):t==n.mine&&(f.showStr=i),this.modelList.push(f),this.modelList.length>this.maxChatNum&&this.modelList.shift(),o.EventManager.instance.dispatch(a.CommonEvent.Event_addChat,f)},e.addBagFull=function(){e.addChatStr(n.bagFull,s.WordConfig.getWord(60736))},e.modelList=[],e.maxChatNum=20,e}();i.ChatModel=r,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent"}],ChatPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"c8da0I2vddABYhYTdQBeWKn","ChatPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/ColorConfig"),f=e("../config/GameConfig"),g=e("../config/MapConfig"),h=e("../config/MonsterConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../event/CommonEvent"),C=e("../model/BossModel"),_=e("../model/ChatModel"),v=e("../model/ChatRoomModel"),y=e("../model/NewFeaturesModel"),b=e("../model/PrivilegeModel"),I=e("../model/RoleInfoModel"),M=e("../model/ShenBinModel"),w=e("../model/ShenBinSkillModel"),k=e("../model/SpiritsModel"),S=e("../utils/MusicHelper"),P=e("../view/GameView"),E=e("../view/shenbing/BaoshiInfoModel"),L=e("./chatitem"),T=e("./GameManager"),R=cc._decorator,N=R.ccclass,B=R.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t.chatItemNodeList=[],t.chatCRItemNodeList=[],t.bossNode=null,t.msgNode=null,t.chatroomNode=null,t.smallscroll=null,t.btnChatGoDown=null,t.btnbroom=null,t.bossPrefabItem=null,t.bossList=[],t.itemPool=new cc.NodePool,t.itemPoolCR=new cc.NodePool,t.showchat=!0,t.timeOut=0,t.recorderTime=0,t.isRecorder=!1,t.startTime=0,t.worldId=0,t.lastVla=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this);for(var t=0;t<_.ChatModel.maxChatNum+1;t++)this.itemPool.put(cc.instantiate(this.item));for(t=0;t<v.ChatRoomModel.maxChatNum+1;t++)this.itemPoolCR.put(cc.instantiate(this.item));if(this.chatScrollView=this.findChild(this.node,"msg").getComponent(cc.ScrollView),this.chatContainer=this.findChild(this.node,"msg/view/content"),this.chatContainer.removeAllChildren(),this.msgNode=this.findChild(this.node,"msg"),this.btnGoDown=this.findChild(this.msgNode,"btnGoDown"),this.btnGoDown.active=!1,this.btnGoDown.on(cc.Node.EventType.TOUCH_END,this.onClickGoDown.bind(this)),this.recorder=this.msgNode.getChildByName("recorder"),this.recorder&&(this.recorder.active=!1),this.findChild(this.node,"tablelay/table_0")){this.sysbtn=this.findChild(this.node,"tablelay/table_0/select"),this.boosBtn=this.findChild(this.node,"tablelay/table_1/select"),this.chatBtn=this.findChild(this.node,"tablelay/table_2/select"),this.bossNode=this.findChild(this.node,"bossNode"),this.bossPrefabItem=this.findChild(this.node,"bossNode/scrollView/view/content/item"),this.bossPrefabItem.active=!1,this.findChild(this.node,"tablelay/table_0").on(cc.Node.EventType.TOUCH_END,this.onClickChat.bind(this)),this.findChild(this.node,"tablelay/table_1").on(cc.Node.EventType.TOUCH_END,this.onClickBoss.bind(this));var i=this.findChild(this.node,"tablelay/table_2");i.active=!1,this.onAddEvent(i,y.NewFeaturesModel.instance.pushFeaturesNode(1025,i,this.onClickChatRoom.bind(this)));var n=this.findChild(this.node,"bossNode/btnIntro");n&&n.on(cc.Node.EventType.TOUCH_END,this.onClickIntroduce.bind(this)),this.showchat=!0,n.active=!0,this.initChatRoomMsg()}this.initChatMsg()},t.prototype.onEnable=function(){this.unscheduleAllCallbacks(),s.EventManager.instance.on(m.CommonEvent.Event_addChat,this.onChatMsg,this),s.EventManager.instance.on(m.CommonEvent.Event_addChatRoom,this.onChatRoomMsg,this,!0)},t.prototype.initChatRoomMsg=function(){this.chatroomNode=this.findChild(this.node,"tablelay/table_2/chatroomNode"),this.chatroomNode&&(this.smallscroll=this.findChild(this.chatroomNode,"smallscroll"),this.btnChatGoDown=this.findChild(this.chatroomNode,"btnChatGoDown"),this.btnbroom=this.findChild(this.chatroomNode,"btnbroom"),this.chatCRContainer=this.findChild(this.chatroomNode,"smallscroll/view/content"),this.btnChatGoDown.active=!1,this.btnChatGoDown.on(cc.Node.EventType.TOUCH_END,this.onClickChatGoDown.bind(this)),this.btnbroom.on(cc.Node.EventType.TOUCH_END,this.onShowChatRoom.bind(this)))},t.prototype.update=function(){this.timeOut++,this.timeOut>=cc.game.getFrameRate()&&(this.timeOut=0,this.bossPrefabItem&&this.bossNode&&this.bossNode.active&&this.refreshBoss()),this.isRecorder&&(this.recorderTime++,this.recorderTime%10==0&&this.onAnim())},t.prototype.start=function(){this.msgNode.getComponent(cc.ScrollView).scrollToBottom()},t.prototype.onShowChatRoom=function(){c.default.instance.createView(u.default.gameView.ChatRoomView,null)},t.prototype.onClickChatGoDown=function(){S.MusicHelper.play_click(),this.btnChatGoDown.active=!1,this.smallscroll.getComponent(cc.ScrollView).stopAutoScroll(),this.smallscroll.getComponent(cc.ScrollView).scrollToBottom()},t.prototype.getItermFromPool=function(){return this.itemPool.size()>0?this.itemPool.get():cc.instantiate(this.item)},t.prototype.release2Pool=function(e){this.itemPool.put(e)},t.prototype.getItermFromPoolCR=function(){return this.itemPoolCR.size()>0?this.itemPoolCR.get():cc.instantiate(this.item)},t.prototype.release2PoolCR=function(e){this.itemPoolCR.put(e)},t.prototype.onClickChat=function(){S.MusicHelper.play_click(),this.onSysChat()},t.prototype.onClickBoss=function(){S.MusicHelper.play_click(),this.onBoosChat()},t.prototype.onClickChatRoom=function(){S.MusicHelper.play_click(),this.onChatRoom()},t.prototype.onSysChat=function(){this.unscheduleAllCallbacks(),this.sysbtn.active=!0,this.boosBtn.active=!1,this.chatBtn.active=!1,this.bossNode.active=!1,this.msgNode.active=!0,this.chatroomNode.active=!1},t.prototype.onBoosChat=function(){this.btnGoDown.active=!1,this.sysbtn.active=!1,this.boosBtn.active=!0,this.chatBtn.active=!1,this.msgNode.active=!1,this.bossNode.active=!0,this.chatroomNode.active=!1,this.unscheduleAllCallbacks(),this.refreshBoss()},t.prototype.onChatRoom=function(){this.btnChatGoDown.active=!1,this.sysbtn.active=!1,this.boosBtn.active=!1,this.chatBtn.active=!0,this.msgNode.active=!1,this.bossNode.active=!1,this.chatroomNode.active=!0},t.prototype.refreshBoss=function(){if(this.bossList.length>0)for(var e=0;e<this.bossList.length;e++){var t=this.bossList[e],i=(o=C.BossModel.modelList[e]).getLeftTime();g.MapConfig.curMapConfig.world==g.MapConfig.getMapConfigByMapId(o.mapId).world?t.active=!0:t.active=!1,t.getChildByName("txtTime").getComponent(cc.Label).string=i<=0?p.WordConfig.getWord(61463):a.default.formatLeftTime2(1e3*i);var n=g.MapConfig.getMapConfigByMapId(o.mapId);1!=(s=h.MonsterConfig.getMonsterConfigById(o.monsterId)).m_type&&(t.active=!1),t.getChildByName("txtName").getComponent(cc.Label).string=s.name,t.getChildByName("txtMap").getComponent(cc.Label).string=n.name,t.getChildByName("txtFight").getComponent(cc.Label).string=n.Lv+"",this.onAddEvent(t.getChildByName("btnSwitch"),this.onGoMap.bind(this,o,s)),w.default.hasOpen(100001,I.default.instance)&&f.GameConfig.platform!=cc.sys.WECHAT_GAME&&i<=0?t.getChildByName("btnKill").active=!0:t.getChildByName("btnKill").active=!1}else{(t=cc.instantiate(this.bossPrefabItem)).active=!0,t.parent=this.bossPrefabItem.parent;n=g.MapConfig.getMapConfigByMapId(1);t.getChildByName("txtName").getComponent(cc.Label).string="--",t.getChildByName("txtMap").getComponent(cc.Label).string=n.name,t.getChildByName("txtFight").getComponent(cc.Label).string="--",t.getChildByName("txtTime").getComponent(cc.Label).string="--",t.getChildByName("btnKill").active=!1,f.GameConfig.isWechat()&&(t.getChildByName("btnSwitch").active=!1),this.onAddEvent(t.getChildByName("btnSwitch"),this.onGoMap.bind(this));try{for(e=0;e<C.BossModel.modelList.length;e++){var o=C.BossModel.modelList[e],s=h.MonsterConfig.getMonsterConfigById(o.monsterId),c=cc.instantiate(this.bossPrefabItem);g.MapConfig.curMapConfig.world==g.MapConfig.getMapConfigByMapId(o.mapId).world?c.active=!0:c.active=!1,c.parent=this.bossPrefabItem.parent;var l=g.MapConfig.getMapConfigByMapId(o.mapId);c.getChildByName("txtName").getComponent(cc.Label).string=s.name,c.getChildByName("txtMap").getComponent(cc.Label).string=l.name,c.getChildByName("txtFight").getComponent(cc.Label).string=l.Lv+"",1!=s.m_type&&(c.active=!1);i=o.getLeftTime();c.getChildByName("txtTime").getComponent(cc.Label).string=i<=0?"\u5df2\u5237\u65b0":a.default.formatLeftTime2(1e3*i),w.default.hasOpen(100001,I.default.instance)&&f.GameConfig.platform!=cc.sys.WECHAT_GAME?c.getChildByName("btnKill").active=!0:c.getChildByName("btnKill").active=!1,f.GameConfig.isWechat()&&(c.getChildByName("btnSwitch").active=!1),this.onAddEvent(c.getChildByName("btnSwitch"),this.onGoMap.bind(this,o,s)),this.onAddEvent(c.getChildByName("btnKill"),this.killBoss.bind(this,o,s)),this.bossList.push(c)}}catch(e){r.Logger.warn("refreshBoss error==",e)}}},t.prototype.killBoss=function(e){var t=C.BossModel.getBossByMonsterId(e.monsterId),i=h.MonsterConfig.getMonsterConfigById(t.monsterId),n=g.MapConfig.getMapConfigByMapId(t.mapId);if(t.getLeftTime()>0)p.WordConfig.showWord(60286);else{var o="\u79d2\u6740<color="+d.ColorConfig.getQualityHexColor(4)+">\u3010"+i.name+"\u3011</color>";o+="\u9700\u8981<color="+d.ColorConfig.GreenHexColor+">"+n.kill_soul+"</color>";var a="#ffffff";a=k.default.model.spirits>=k.default.model.max_spirits?d.ColorConfig.RedHexColor:"#ffffff";var s=E.BaoshiInfoModel.getBaoShiSkillValueByType(M.ShenBinModel.CHIXUEMOJIAN);o+="\u9b42\u9b44\uff08\u5f53\u524d\u9b42\u9b44\uff1a<color="+a+">"+k.default.model.spirits+"/"+(k.default.model.max_spirits+s[1])+")\uff0c\u662f\u5426\u76f4\u63a5\u79d2\u6740\u83b7\u53d6Boss\u5956\u52b1\uff1f",c.default.instance.createView(u.default.gameView.KillBossTip,null,0,o,t)}},t.prototype.onGoMap=function(e,t){var i;(S.MusicHelper.play_click(),this.node.parent.parent.getComponent(P.default).isTweening)||(null==e||null==t?1==g.MapConfig.curMapConfig.world?i=g.MapConfig.getMapConfigByMapId(1):2==g.MapConfig.curMapConfig.world&&(i=g.MapConfig.getMapConfigByMapId(1001)):i=g.MapConfig.getMapConfigByMapId(e.mapId),T.default.instance.gameView&&T.default.instance.gameView.myRolePrefab&&T.default.instance.gameView.myRolePrefab.isDead||(i.mapId!=I.default.instance.mapId?b.default.hadFightGodPrivilege()?I.default.instance.switchMap(!0,i.mapId):c.default.instance.createView(u.default.gameView.PrivilegeFightGodView,null,!0,i.mapId):p.WordConfig.showWord(60287)))},t.prototype.initChatMsg=function(){this.delayInitOne(0)},t.prototype.delayInitOne=function(e){var t=this;e<_.ChatModel.modelList.length&&(this.initOneChatMsg(_.ChatModel.modelList[e]),this.scheduleOnce(function(){t.delayInitOne(e+1)},.05))},t.prototype.initOneChatMsg=function(e){if(e){var t=this.getItermFromPool();this.chatContainer.addChild(t),t.active=!0,e.chatType==_.ChatType.monsterRefresh?t.getComponent(cc.RichText).string=p.WordConfig.getWord(60732):e.chatType==_.ChatType.monsterDead?t.getComponent(cc.RichText).string=e.showStr:e.chatType==_.ChatType.useGoods?t.getComponent(cc.RichText).string="<color="+d.ColorConfig.GreenHexColor+">"+e.AAA+p.WordConfig.getWord(61472)+e.BBB:e.chatType==_.ChatType.roleDead?t.getComponent(cc.RichText).string="<color="+d.ColorConfig.GreenHexColor+">"+e.AAA+p.WordConfig.getWord(60641):e.chatType==_.ChatType.bagFull?t.getComponent(cc.RichText).string=e.showStr:e.chatType==_.ChatType.mine?t.getComponent(cc.RichText).string=e.showStr:t.getComponent(cc.RichText).string=p.WordConfig.getWord(61473),this.chatItemNodeList.push(t);var i=this.msgNode.getComponent(cc.ScrollView);if(i.getScrollOffset().y+20>=i.getMaxScrollOffset().y){for(;this.chatItemNodeList.length>_.ChatModel.maxChatNum;){var n=this.chatItemNodeList.shift();this.release2Pool(n)}i.scrollToBottom()}else if(this.chatItemNodeList.length>2*_.ChatModel.maxChatNum){n=this.chatItemNodeList.shift();this.release2Pool(n)}this.chatItemNodeList.length>=5&&this.chatItemNodeList.length<=6&&i.scrollToBottom(),this.chatContainer.height>=this.msgNode.height&&(this.isGotoChat||(this.isGotoChat=!0,i.scrollToBottom()),this.chatScrollView.getScrollOffset().y+20>=this.chatScrollView.getMaxScrollOffset().y?i.scrollToBottom():this.btnGoDown.active||(this.btnGoDown.active=!0))}},t.prototype.initOneChatRoomMsg=function(e,t){if(void 0===t&&(t="undefined"),e&&this.chatCRContainer){var i=this.getItermFromPoolCR();this.chatCRContainer.addChild(i),i.active=!0;var n=v.ChatRoomModel.getChatRichTextString(e,!0);i.getComponent(cc.RichText).string=n.richstr,i.getComponent(L.ChatItem).init(n,600,e.heroid),this.chatCRItemNodeList.push(i);var o=this.smallscroll.getComponent(cc.ScrollView);if(o.getScrollOffset().y+20>=o.getMaxScrollOffset().y){for(;this.chatCRItemNodeList.length>v.ChatRoomModel.maxChatNum;){var a=this.chatCRItemNodeList.shift();this.release2PoolCR(a)}o.scrollToBottom()}else if(this.chatCRItemNodeList.length>2*v.ChatRoomModel.maxChatNum){a=this.chatCRItemNodeList.shift();this.release2PoolCR(a)}this.chatCRItemNodeList.length>=5&&this.chatCRItemNodeList.length<=6&&o.scrollToBottom(),this.chatCRContainer.height>=this.msgNode.height&&(this.isGotoChatCR||(this.isGotoChatCR=!0,o.scrollToBottom()),o.getScrollOffset().y+20>=o.getMaxScrollOffset().y?o.scrollToBottom():this.btnChatGoDown.active=!0)}},t.prototype.onClickGoDown=function(){S.MusicHelper.play_click(),this.btnGoDown.active=!1,this.msgNode.getComponent(cc.ScrollView).stopAutoScroll(),this.msgNode.getComponent(cc.ScrollView).scrollToBottom()},t.prototype.onClickIntroduce=function(){S.MusicHelper.play_click(),c.default.instance.createView(u.default.gameView.BossDropIntroduce)},t.prototype.onAnim=function(){this.lastVla+=1,this.pointAni.string+=".",this.lastVla>=3&&(this.lastVla=0,this.pointAni.string=".")},t.prototype.onChatMsg=function(e){this.initOneChatMsg(e)},t.prototype.onChatRoomMsg=function(e){this.showchat&&this.chatroomNode&&(this.showchat=!1,this.onClickChatRoom()),this.initOneChatRoomMsg(e)},o([B({type:cc.Prefab})],t.prototype,"item",void 0),t=o([N],t)}(l.default);i.default=A,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/BossModel":"BossModel","../model/ChatModel":"ChatModel","../model/ChatRoomModel":"ChatRoomModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../model/ShenBinModel":"ShenBinModel","../model/ShenBinSkillModel":"ShenBinSkillModel","../model/SpiritsModel":"SpiritsModel","../utils/MusicHelper":"MusicHelper","../view/GameView":"GameView","../view/shenbing/BaoshiInfoModel":"BaoshiInfoModel","./GameManager":"GameManager","./chatitem":"chatitem"}],ChatRoomItem:[function(e,t,i){"use strict";cc._RF.push(t,"13da96ItllHEZczTvLBNgzR","ChatRoomItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/UIManager"),s=e("../config/ViewConfig"),r=e("../model/RoleInfoModel"),c=e("../model/CostumeModel"),l=e("./chatitem"),d=e("../model/ChatRoomModel"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=e.call(this)||this;return t.nameNode=null,t.chenghao=null,t.heroid=1,t.prof=1,t.richmax=420,t}return n(t,e),t.prototype.start=function(){},t.prototype.init=function(e,t,i,n){this.heroid=t,this.prof=i;var o=Number(r.default.instance.roleId),a=d.ChatRoomModel.getChatInfo(this.heroid);this.heroid==o&&(a=r.default.instance.personalize),c.CostumeModel.setCostSF(this.chenghao,c.CostumeType.Title,a.title);var s=this.node.getChildByName("playerinfo"),f=this.node.getChildByName("broadcast");if(s.active=e.type!=l.ChatType.BROADCAST,f.active=e.type==l.ChatType.BROADCAST,e.type!=l.ChatType.BROADCAST){var g=s.getChildByName("touxiang");g.on(cc.Node.EventType.TOUCH_END,this.onTouXiang,this),c.CostumeModel.setCostSF(g.getComponent(cc.Sprite),c.CostumeType.Head,a.portrait);var h=s.getChildByName("touxiangkuang");c.CostumeModel.setCostSF(h.getComponent(cc.Sprite),c.CostumeType.HeadFM,a.portrait_skin);var u=s.getChildByName("kuang"),p=a.chat_skin;o!=this.heroid&&5001==p&&(p=5002),c.CostumeModel.setCostSF(u.getComponent(cc.Sprite),c.CostumeType.Bubble,p),this.nameNode.getComponent(cc.Label).string=n,this.chenghao.node.active&&(this.nameNode.getComponent(cc.Label)._forceUpdateRenderData(!0),this.chenghao.node.x=this.nameNode.x+this.nameNode.width+this.chenghao.node.width*this.chenghao.node.scaleX/2)}var m=this.node.getChildByName("chatitem");if(m.getComponent(cc.RichText).string=e.richstr,m.getComponent(l.ChatItem).init(e,this.richmax,this.heroid),m._activeInHierarchy=!0,m.getComponent(cc.RichText)._updateRichText(),m.width>this.richmax&&(m.getComponent(cc.RichText).maxWidth=this.richmax,m._activeInHierarchy=!0,m.getComponent(cc.RichText)._updateRichText()),e.type==l.ChatType.BROADCAST){var C=f.getChildByName("broadcastbg");C.height=m.height+10,f.getChildByName("broadcasttitle").y=(55-C.height)/2,m.y=-10,this.node.height=m.height+15}else{(u=s.getChildByName("kuang")).height=m.height+25,u.width=m.width+60,m.y=-45,this.node.height=m.height+75}},t.prototype.onTouXiang=function(){a.default.instance.createView(s.default.gameView.PlayerInfoPreView,null,this.heroid)},t.prototype.onCloseEvent=function(){this.node.getChildByName("chatitem").getComponent(l.ChatItem).onCloseEvent()},o([h(cc.Node)],t.prototype,"nameNode",void 0),o([h(cc.Sprite)],t.prototype,"chenghao",void 0),t=o([g],t)}(cc.Component);i.ChatRoomItem=u,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../config/ViewConfig":"ViewConfig","../model/ChatRoomModel":"ChatRoomModel","../model/CostumeModel":"CostumeModel","../model/RoleInfoModel":"RoleInfoModel","./chatitem":"chatitem"}],ChatRoomModel:[function(e,t,i){"use strict";cc._RF.push(t,"551e9hf6/1CB6+eWmPiSoEf","ChatRoomModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../event/CommonEvent"),s=e("../config/WordConfig"),r=e("../../engine/ProtoConfig"),c=e("../../engine/ProtoUtils"),l=e("../../engine/GameSocket"),d=e("../config/ColorConfig"),f=e("./ItemInfoModel"),g=e("./GuildModel"),h=e("./CostumeModel"),u=e("../../engine/UIManager"),p=e("../config/ViewConfig");(function(e){e[e.WORLD=1]="WORLD",e[e.GUIDE=2]="GUIDE"})(n=i.CHAT_TYPE||(i.CHAT_TYPE={}));var m=function(){return function(){this.channel=0,this.content1="",this.heroid=0,this.prof=0,this.name="",this.content2=""}}();i.chatRoomData=m;var C=function(){return function(){this.richstr="",this.startnum=0,this.endnum=0,this.itemId="0",this.type="default",this.data=null}}();i.chatItemData=C;var _=function(){return function(){}}();i.chatTaskType=_;var v=function(){function e(){}return e.getChatInfo=function(t){return e.chatinfo_list[t]},e.proto2_c_send_world=function(t){var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_send_world,t),n=new m;n.channel=i.getChannel(),n.content1=i.getContent1(),n.heroid=i.getHeroid(),n.prof=i.getProf(),n.name=i.getName(),n.content2=i.getContent2(),n.personalize=h.CostumeModel.proto2Personalize(i.getPersonalize()),e.chatinfo_list[n.heroid]=n.personalize;var o=JSON.parse(n.content2);"broadcast"==o.type&&1==o.data.horn&&(e.lamplsit.length<=5&&e.lamplsit.push(n),u.default.instance.createView(p.default.gameView.HorseracelampView)),e.EventManagerChatRoom(n)},e.EventManagerChatRoom=function(t){e.chatRoomList.push(t),e.chatRoomList.length>e.maxChatNum&&e.chatRoomList.shift(),t.channel==n.WORLD?(e.worldchatRoomList.push(t),e.worldchatRoomList.length>e.maxChatNum&&e.worldchatRoomList.shift()):t.channel==n.GUIDE&&(e.guidechatRoomList.push(t),e.guidechatRoomList.length>e.maxChatNum&&e.guidechatRoomList.shift());var i=JSON.parse(t.content2);"guildtask"==i.type&&g.GuildModel.s_guild_task_help_info(i.data.id,t.heroid,i.data.startTime),o.EventManager.instance.dispatch(a.CommonEvent.Event_addChatRoom,t)},e.proto2_c_send_world_list=function(t){var i=[];c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_send_world_list,t).getMsglistList().forEach(function(t){var n=[],o=new m;o.channel=t.getChannel(),o.content1=t.getContent(),o.heroid=t.getHeroid(),o.prof=t.getProf(),o.name=t.getName(),o.content2=t.getContent2();var a=t.getPersonalize();o.personalize=h.CostumeModel.proto2Personalize(a),n.roomdata=o,n.time=t.getTime(),i.push(n),e.chatinfo_list[o.heroid]=o.personalize}),i.sort(function(e,t){return e.time-t.time}),i.forEach(function(t){e.EventManagerChatRoom(t.roomdata)})},e.proto2_c_get_iteminfo=function(t){for(var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_get_iteminfo,t).getItemlistList(),n=0;n<i.length;n++){var s=i[n],l=f.default.proto2Model(s);e.itemInfoList.push(l)}o.EventManager.instance.dispatch(a.CommonEvent.Event_Guild_Treasury_Info)},e.proto2_s_send_world=function(e,t,i){var n=c.ProtoUtils.Create(r.ProtoConfig.s_send_world);n.setChannel(e),n.setContent1(t),n.setContent2(i),n.setCid(1),l.default.getInstance().sendToSocket(n)},e.proto2_s_get_iteminfo=function(e){var t=c.ProtoUtils.Create(r.ProtoConfig.s_get_iteminfo);t.setItemid(e),l.default.getInstance().sendToSocket(t)},e.getChatRichTextString=function(t,i){void 0===i&&(i=!1);var n="",o=JSON.parse(t.content2);i&&("broadcast"==o.type?n+="<color=#ffc31f>"+s.WordConfig.getWord(61810)+"</color> ":(1==t.channel?n+="<color=#ffc31f>"+s.WordConfig.getWord(61440)+"</color> ":2==t.channel?n+="<color=#00aeff>"+s.WordConfig.getWord(61442)+"</color> ":n+="<color=#ffc31f>"+s.WordConfig.getWord(61441)+"</color> ",n+=t.name+": "));var a="",r=[],c=t.content1.split("["),l=/^[0-9]+.?[0-9]*$/;c.forEach(function(e){var t=e.indexOf("#"),i=e.indexOf("]");if(t>-1&&i>t&&l.test(e.slice(t+1,i))){var n={index:a.length,itemn:e.slice(t+1,i)};r.push(n),a+=e.slice(i+1)}else e==c[0]?a+=e:a+="["+e});var g=new C;if(o.type&&"default"!=o.type){h=o.data;"guildtask"==o.type?(g.data=h,g.richstr=n):"mine"==o.type?(g.data={id:h,roleId:o.roleId,beRoleId:o.beRoleId},g.richstr=n+o.desc):"broadcast"==o.type&&(g.data=h,g.richstr=n),g.type=o.type}else{for(;r.length>0;){var h,u="",p=o[(h=r.pop()).itemn-1];if(p)f.default.getItemByid(p.itemId)||e.getItemByid(p.itemId)||e.proto2_s_get_iteminfo(Number(p.itemId)),u="<color="+d.ColorConfig.getQualityHexColor(p.quality)+"'>["+p.itemname+"]</c>",a=a.substring(0,h.index)+u+a.substring(h.index),g.itemId=p.itemId,g.startnum=h.index,g.endnum=h.index+u.length}g.type="default",g.startnum=g.startnum+n.length,g.endnum=g.endnum+n.length,g.richstr=n+a}return g},e.getItemByid=function(t){for(var i=0;i<e.itemInfoList.length;i++){var n=e.itemInfoList[i];if(t==n.itemId)return n}},e.TaskTypeList=function(t,i){void 0===i&&(i=null);for(var n=!0,o=0,a=0;a<e.chattasktype_list.length;a++){e.chattasktype_list[a].id==t&&(i&&(e.chattasktype_list[a].type=i),o=e.chattasktype_list[a].type,n=!1)}if(n){var s=new _;s.id=t,s.type=o,e.chattasktype_list.push(s),e.chattasktype_list.length>e.maxChatNum&&e.chattasktype_list.shift()}return o},e.clearChangeInfo=function(t){t==n.WORLD?e.chatRoomList=[]:t==n.GUIDE&&(e.guidechatRoomList=[])},e.maxChatNum=30,e.chatRoomList=[],e.guidechatRoomList=[],e.worldchatRoomList=[],e.itemInfoList=[],e.sendstarttime=0,e.chatinfo_list=[],e.chattasktype_list=[],e.lamplsit=[],e}();i.ChatRoomModel=v,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/ColorConfig":"ColorConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","./CostumeModel":"CostumeModel","./GuildModel":"GuildModel","./ItemInfoModel":"ItemInfoModel"}],ChatRoomView:[function(e,t,i){"use strict";cc._RF.push(t,"98f1anLGVRCW54b1nmqz9m2","ChatRoomView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ViewBase"),r=e("../config/DefaultConfig"),c=e("../config/WordConfig"),l=e("../event/CommonEvent"),d=e("../model/ChatRoomModel"),f=e("../model/GuildModel"),g=e("../model/NewFeaturesModel"),h=e("../model/RoleInfoModel"),u=e("../model/ServerTime"),p=e("../prefab/ChatRoomItem"),m=e("../utils/MusicHelper"),C=e("../utils/NameHelper"),_=e("./Roles/BagItem"),v=cc._decorator,y=v.ccclass,b=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chatitem=null,t.zhanshilist=[],t.toggleStatus=0,t.chattoggleStatus=1,t.btnChatGoDown=null,t.bag=null,t.toggleTable=null,t.ChattoggleTable=null,t.myEditBox=null,t.chatitemList=new cc.NodePool,t.chatitemNodeList=[],t.sendtime=0,t}return n(t,e),t.prototype.onInitChild=function(e){this.chattoggleStatus=e||this.chattoggleStatus},t.prototype.onShow=function(){var e=this;d.ChatRoomModel.maxChatNum=r.DefaultConfig.getConfigById(51).value,this.sendtime=1e3*r.DefaultConfig.getConfigById(127).value;this.findChild(this.node,"liaotianbj");this.btnChatGoDown=this.findChild(this.node,"btnChatGoDown"),this.btnChatGoDown.active=!1,this.btnChatGoDown.on(cc.Node.EventType.TOUCH_END,this.onClickChatGoDown.bind(this)),this.findChild(this.node,"wupinzhanshi").on(cc.Node.EventType.TOUCH_END,this.onClickBag,this);var t=this.findChild(this.node,"fasong");this.onAddEvent(t,g.NewFeaturesModel.instance.pushFeaturesNode(10251,t,this.onClickSend.bind(this))),this.myEditBox=this.findChild(this.node,"MyEditBox"),this.ChattoggleTable=this.getChild(this.node,"chattable");for(var i=0;i<this.ChattoggleTable.childrenCount;i++){(n=this.ChattoggleTable.children[i]).on("toggle",this.onChatToggleTable.bind(this,i+1),this),n.getComponent(cc.Toggle).isChecked=i+1==this.chattoggleStatus,1==i&&(n.active=!1,f.GuildModel.instance.guildinfo&&f.GuildModel.instance.guildinfo.gid>0&&(n.active=!0))}this.findChild(this.node,"smallscroll1").on("scroll-to-top",this.onUpApplyView,this),this.findChild(this.node,"smallscroll2").on("scroll-to-top",this.onUpApplyView,this),this.bag=this.findChild(this.node,"bag"),this.bag.active=!1,this.bgscrollContent=this.findChild(this.node,"bag/panel/view/content"),this.findChild(this.node,"bag/darkLayer").on(cc.Node.EventType.TOUCH_END,function(){m.MusicHelper.play_click(),e.bag.active=!1}),this.toggleTable=this.getChild(this.node,"bag/table");for(i=0;i<this.toggleTable.childrenCount;i++){var n;(n=this.toggleTable.children[i]).on("toggle",this.onBagToggleTable.bind(this,i),this)}a.EventManager.instance.on(l.CommonEvent.Event_ADD_ZHANSHI,this.addZhanShi,this),a.EventManager.instance.on(l.CommonEvent.Event_addChatRoom,this.onChatRoomMsg,this),this.initChatRoom(),this.onClickChatGoDown()},t.prototype.closeView=function(){var t=this.findChild(this.node,"smallscroll1/view/content"),i=this.findChild(this.node,"smallscroll2/view/content");t.children.forEach(function(e){e.getComponent(p.ChatRoomItem).onCloseEvent()}),i.children.forEach(function(e){e.getComponent(p.ChatRoomItem).onCloseEvent()}),e.prototype.closeView.call(this)},t.prototype.initChatRoom=function(){this.findChild(this.node,"smallscroll"+this.chattoggleStatus+"/view/content").removeAllChildren(),this.refreshChatView(),this.onChatToggleTable()},t.prototype.addZhanShi=function(e){this.bag.active=!1,e.itemname=e.itemname.replace("\n","");var t=this.myEditBox.getComponent(cc.EditBox).string,i=t.indexOf("["),n=t.indexOf("#1]",i);this.zhanshilist[0]&&i>-1&&n>-1&&n>i?t=t.substring(0,i+1)+e.itemname+t.substring(n):t+="["+e.itemname+"#1]",this.myEditBox.getComponent(cc.EditBox).string=t;var o={quality:e.quality,itemname:e.itemname,itemId:e.itemId};this.zhanshilist[0]=o},t.prototype.onChatToggleTable=function(e){void 0===e&&(e=this.chattoggleStatus),m.MusicHelper.play_click(),this.chattoggleStatus=e,this.findChild(this.node,"smallscroll1").active=1==this.chattoggleStatus,this.findChild(this.node,"smallscroll2").active=2==this.chattoggleStatus,this.onClickChatGoDown()},t.prototype.onBagToggleTable=function(e){void 0===e&&(e=this.toggleStatus),m.MusicHelper.play_click(),this.refresh(e)},t.prototype.onClickBag=function(){this.bag.active=!0,this.createScrollContent(),this.refresh()},t.prototype.onClickSend=function(){var e=this.myEditBox.getComponent(cc.EditBox).string.replace(/\s+/g,""),t=e.indexOf("["),i=e.indexOf("#1]",t);if(this.zhanshilist[0]&&t>-1&&i>-1&&i>t&&(e=e.substring(0,t+1)+e.substring(i)),e)if(u.ServerTime.getServerTime()-d.ChatRoomModel.sendstarttime<this.sendtime)c.WordConfig.showWord(61284);else if(2!=this.chattoggleStatus||f.GuildModel.instance.guildinfo&&0!=f.GuildModel.instance.guildinfo.gid){var n=this;C.NameHelper.sendAddChat(e,this.chattoggleStatus,function(e){o(e)},function(){d.ChatRoomModel.sendstarttime=u.ServerTime.getServerTime(),n.myEditBox.getComponent(cc.EditBox).string="",n.zhanshilist=[]})}else c.WordConfig.showWord(61388);function o(e){d.ChatRoomModel.proto2_s_send_world(n.chattoggleStatus,e,JSON.stringify(n.zhanshilist)),d.ChatRoomModel.sendstarttime=u.ServerTime.getServerTime(),n.myEditBox.getComponent(cc.EditBox).string="",n.zhanshilist=[]}},t.prototype.onClickChatGoDown=function(){m.MusicHelper.play_click(),this.btnChatGoDown.active=!1;var e=this.findChild(this.node,"smallscroll"+this.chattoggleStatus);e.getComponent(cc.ScrollView).stopAutoScroll(),e.getComponent(cc.ScrollView).scrollToBottom()},t.prototype.createScrollContent=function(e){void 0===e&&(e=h.default.instance.bagAMount),this.bgscrollContent.removeAllChildren();for(var t=0;t<e;t++){var i=cc.instantiate(_.default.prefab);i?(i.name="bagitem"+t,i.active=!1,this.bgscrollContent.addChild(i),i.getComponent(_.default).setShowArticle(!1)):a.EventManager.instance.dispatch(l.CommonEvent.Event_AddDebugLog,"@ChatRoomViews 212 line \u65e0\u6cd5\u5b9e\u4f8b\u5316\u9884\u5236\u4f53 BagItem.prefab = "+_.default.prefab+" , \n createScrollContent.caller = "+this.createScrollContent.caller+" ")}},t.prototype.onUpApplyView=function(){for(var e,t=this.findChild(this.node,"smallscroll"+this.chattoggleStatus),i=this.findChild(this.node,"smallscroll"+this.chattoggleStatus+"/view/content"),n=(e=1==this.chattoggleStatus?d.ChatRoomModel.worldchatRoomList:d.ChatRoomModel.guidechatRoomList).length,o=i.children.length,a=n-o-1,s=a-10>0?a-10:0,r=a;r>s;r--){var c=e[r],l=this.getItermFromPoolCR(),f=d.ChatRoomModel.getChatRichTextString(c);l.getComponent(p.ChatRoomItem).init(f,c.heroid,c.prof,c.name),l.parent=i,l.zIndex=50-o-(d.ChatRoomModel.maxChatNum-r),this.chatitemNodeList[this.chattoggleStatus].push(l)}if(i.height>800&&s<a){t.getComponent(cc.ScrollView).stopAutoScroll();var g=i.height-800;this.scheduleOnce(function(){var e=i.height-800;t.getComponent(cc.ScrollView).scrollToPercentVertical(g/e)})}},t.prototype.refreshChatView=function(){this.chatitemNodeList=[],this.chatitemNodeList[1]=[],this.chatitemNodeList[2]=[];var e=this.findChild(this.node,"smallscroll1/view/content"),t=this.findChild(this.node,"smallscroll2/view/content"),i=e.parent.height+100;e.removeAllChildren(),t.removeAllChildren();for(var n=0,o=d.ChatRoomModel.worldchatRoomList.length-1;o>=0;o--){var a=d.ChatRoomModel.worldchatRoomList[o],s=this.getItermFromPoolCR(),r=d.ChatRoomModel.getChatRichTextString(a);if(s.getComponent(p.ChatRoomItem).init(r,a.heroid,a.prof,a.name),s.parent=e,s.zIndex=50-(d.ChatRoomModel.maxChatNum-o),this.chatitemNodeList[1].push(s),(n+=s.height)>i)break}var c=0;for(o=d.ChatRoomModel.guidechatRoomList.length-1;o>=0;o--){a=d.ChatRoomModel.guidechatRoomList[o],s=this.getItermFromPoolCR(),r=d.ChatRoomModel.getChatRichTextString(a);if(s.getComponent(p.ChatRoomItem).init(r,a.heroid,a.prof,a.name),s.parent=t,s.zIndex=50-(d.ChatRoomModel.maxChatNum-o),this.chatitemNodeList[2].push(s),(c+=s.height)>i)break}},t.prototype.refresh=function(e){void 0===e&&(e=this.toggleStatus),this.bgscrollContent.children.length<h.default.instance.bagAMount&&this.createScrollContent(h.default.instance.bagAMount-this.bgscrollContent.children.length);var t=[];switch(e){case 0:for(var i=0;i<h.default.instance.bagModelList.length;i++){(n=h.default.instance.bagModelList[i])&&t.push(n.clone())}break;case 1:for(i=0;i<h.default.instance.bagModelList.length;i++){(n=h.default.instance.bagModelList[i])&&1!=n.itemKind&&t.push(n.clone())}break;case 2:for(i=0;i<h.default.instance.bagModelList.length;i++){var n;(n=h.default.instance.bagModelList[i])&&1==n.itemKind&&t.push(n.clone())}}this.initScrollContent(t,e),this.toggleStatus=e},t.prototype.initScrollContent=function(e,t){for(var i=0;i<h.default.instance.bagAMount;i++){var n=this.bgscrollContent.children[i];switch(t){case 0:case 1:case 2:!e[i]||i>=e.length?n.active=!1:(n.active=!0,e[i].isExhibition=1,n.getComponent(_.default).setShowArticle(!0),n.getComponent(_.default).init(e[i],i))}}},t.prototype.onChatRoomMsg=function(e){this.initOneChatRoomMsg(e)},t.prototype.initOneChatRoomMsg=function(e){if(e){var t=this.findChild(this.node,"smallscroll"+e.channel+"/view/content"),i=this.findChild(this.node,"smallscroll"+e.channel),n=this.getItermFromPoolCR();n.parent=t,n.active=!0,n.zIndex=50;var o=d.ChatRoomModel.getChatRichTextString(e);n.getComponent(p.ChatRoomItem).init(o,e.heroid,e.prof,e.name),this.chatitemNodeList[this.chattoggleStatus]&&(this.chatitemNodeList[this.chattoggleStatus]=[]),this.chatitemNodeList[this.chattoggleStatus].push(n);var a=i.getComponent(cc.ScrollView);if(a.getScrollOffset().y+20>=a.getMaxScrollOffset().y){for(;this.chatitemNodeList[this.chattoggleStatus].length>d.ChatRoomModel.maxChatNum;){var s=this.chatitemNodeList[this.chattoggleStatus].shift();this.release2PoolCR(s)}a.scrollToBottom()}else if(this.chatitemNodeList[this.chattoggleStatus].length>2*d.ChatRoomModel.maxChatNum){s=this.chatitemNodeList[this.chattoggleStatus].shift();this.release2PoolCR(s)}this.chatitemNodeList[this.chattoggleStatus].length<=8&&a.scrollToBottom(),t.height>=i.height&&(this.isGotoChatCR||(this.isGotoChatCR=!0,a.scrollToBottom()),a.getScrollOffset().y+20>=a.getMaxScrollOffset().y?a.scrollToBottom():this.btnChatGoDown.active=!0)}},t.prototype.getItermFromPoolCR=function(){return this.chatitemList.size()>0?this.chatitemList.get():cc.instantiate(this.chatitem)},t.prototype.release2PoolCR=function(e){this.chatitemList.put(e)},o([b({type:cc.Prefab})],t.prototype,"chatitem",void 0),t=o([y],t)}(s.default);i.default=I,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ChatRoomModel":"ChatRoomModel","../model/GuildModel":"GuildModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../prefab/ChatRoomItem":"ChatRoomItem","../utils/MusicHelper":"MusicHelper","../utils/NameHelper":"NameHelper","./Roles/BagItem":"BagItem"}],CheckDeleteRoleView:[function(e,t,i){"use strict";cc._RF.push(t,"d3830WTNfJCiorMtLtclsKy","CheckDeleteRoleView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/WordConfig"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=300,t}return n(t,e),t.prototype.onInitChild=function(e){this.callback=e},t.prototype.onShow=function(){this.onAddEvent(this.findChild(this.node,"view/panel/close"),this.onClickClose.bind(this)),this.onAddEvent(this.findChild(this.node,"view/panel/btnCancel"),this.onClickClose.bind(this)),this.btnDelete=this.findChild(this.node,"view/panel/btnDelete"),this.btnSureDelete=this.findChild(this.node,"view/panel/btnSureDelete"),this.btnSureDelete.active=!1,this.onAddEvent(this.btnSureDelete,this.onClickSureClick.bind(this)),this.txtLeftTime=this.getChild(this.node,"view/panel/txtLeftTime",cc.Label),this.refreshTime()},t.prototype.update=function(e){this.leftTime>0&&(this.leftTime--,this.leftTime<=0&&(this.btnSureDelete.active=!0,this.btnDelete.active=!1),this.refreshTime())},t.prototype.refreshTime=function(){this.txtLeftTime.string=Math.floor(this.leftTime/60)+s.WordConfig.getWord(60500),0==this.leftTime&&(this.txtLeftTime.node.active=!1)},t.prototype.onClickSureClick=function(){this.callback(!0),this.closeView()},t.prototype.onClickClose=function(){this.callback(),this.closeView()},t=o([c],t)}(a.default));i.default=l,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig"}],ChengBaModel:[function(e,t,i){"use strict";cc._RF.push(t,"88acefMcVBP+YHcOGlotJDp","ChengBaModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/EventManager"),a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../config/MarfaKingConfig"),l=e("../event/CommonEvent"),d=e("../manager/RedPointManager"),f=e("./MaFaModel"),g=function(){return function(){}}();i.MarfaTaskData=g;var h=function(){return function(){}}();i.MarfaAccTaskData=h;var u=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[d.RedPointId.Activity_chengba_marfa],this.protos=[s.ProtoConfig.c_get_marfaking_info,s.ProtoConfig.c_get_marfaking_reward,s.ProtoConfig.c_get_marfaking_acc_reward],d.default.getInstance().addHandler(this)}return e.proto2Model=function(t){this.model=this.model?this.model:new e;var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_marfaking_info,t);this.marfaTaskMap=new Map,this.marFaAccTaskMap=new Map,this.startTime=i.getStarttime(),this.endTime=i.getEndtime(),this.progress=void 0==i.getProgress()?this.progress:i.getProgress();var n=i.getMarfaTaskList();if(n)for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)){var d=n[c],f=new g;f.id=d.getId(),f.progress=void 0==d.getProgress()?0:d.getProgress(),f.status=d.getStatus(),this.marfaTaskMap.set(f.id,f)}var u=i.getMarfaAccTaskList();if(u)for(var c in u)if(Object.prototype.hasOwnProperty.call(u,c)){d=u[c];var p=new h;p.id=d.getId(),p.status=d.getStatus(),this.marFaAccTaskMap.set(p.id,p)}a.Logger.log("c_get_marfaking_info=====",i),o.EventManager.instance.dispatch(l.CommonEvent.Event_MaFa_chengba_refresh)},e.proto2TaskAward=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_marfaking_reward,e),i=t.getId(),n=this.marfaTaskMap.get(i);n&&(n.status=3),a.Logger.log("c_get_marfaking_reward=====",t),o.EventManager.instance.dispatch(l.CommonEvent.Event_MaFa_chengba_refresh)},e.proto2AccTaskAward=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_marfaking_acc_reward,e),i=t.getId(),n=this.marFaAccTaskMap.get(i);n&&(n.status=3),a.Logger.log("c_get_marfaking_acc_reward=====",t),o.EventManager.instance.dispatch(l.CommonEvent.Event_MaFa_chengba_refresh)},e.getTaskDataById=function(e){if(this.marfaTaskMap.get(e))return this.marfaTaskMap.get(e);var t=new g;return t.id=e,t.progress=0,t.status=1,t},e.getAccTaskDataById=function(e){if(this.marFaAccTaskMap.get(e))return this.marFaAccTaskMap.get(e);var t=new h;return t.id=e,t.status=1,t},e.prototype.checkRedPoint=function(){var t=[],i=!1,o=1e3*e.startTime,a=new Date(o),s=new Date(new Date(a.toLocaleDateString()).getTime()),r=n.default.getPassDay(s.getTime());if(r=r%86400+1,e.marfaTaskMap){e.marfaTaskMap.forEach(function(e){var n=e.status==f.MaFaAwaradType.Receive;if(c.default.getConfigById(e.id).day<=r){e.status==f.MaFaAwaradType.Receive&&(i=!0);var o={id:"mafaKing_task_"+e.id,type:d.RedPointType.Default,show:n};t.push(o)}}),e.marFaAccTaskMap&&e.marFaAccTaskMap.forEach(function(e){var n=e.status==f.MaFaAwaradType.Receive;e.status==f.MaFaAwaradType.Receive&&(i=!0);var o={id:"mafaKing_box_"+e.id,type:d.RedPointType.Default,show:n};t.push(o)});var l={id:d.RedPointId.Activity_chengba_marfa,type:d.RedPointType.Default,show:i};t.push(l)}return t},e.progress=0,e}();i.default=u,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/MarfaKingConfig":"MarfaKingConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./MaFaModel":"MaFaModel"}],ChengBaView:[function(e,t,i){"use strict";cc._RF.push(t,"5f8fey43ApCMZuiSsnMzeqf","ChengBaView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ViewBase"),c=e("../../config/ColorConfig"),l=e("../../config/EquipConfig"),d=e("../../config/GameConst"),f=e("../../config/ITemsConfig"),g=e("../../config/MarfaKingConfig"),h=e("../../config/MarfaKingProConfig"),u=e("../../config/WordConfig"),p=e("../../event/CommonEvent"),m=e("../../manager/RedPointManager"),C=e("../../model/ChengBaModel"),_=e("../../model/ItemInfoModel"),v=e("../../model/RoleInfoModel"),y=e("../../network/SocketClient"),b=e("../../prefab/ItemPrefab"),I=e("../../prefab/RedPointPrefab"),M=e("../../utils/UIHelper"),w=cc._decorator,k=w.ccclass,S=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectTab=0,t.selectDay=1,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){this.initView(),s.EventManager.instance.on(p.CommonEvent.Event_MaFa_chengba_refresh,this.initView,this),y.default.s_get_marfaking_info(),this.onBtnCloseAwardTip()},t.prototype.initFindNode=function(){this.totalProgressLabel=this.findChild(this.node,"frame/totalTask/totalProgress/num").getComponent(cc.Label),this.taskProgressBar=this.findChild(this.node,"frame/totalTask/taskProgressBar").getComponent(cc.ProgressBar),this.boxListNode=this.findChild(this.node,"frame/totalTask/boxList"),this.activityTimeLabel=this.findChild(this.node,"frame/activityTime/text").getComponent(cc.Label),this.dayListNode=this.findChild(this.node,"frame/dayList"),this.dayCellNode=this.findChild(this.dayListNode,"dayCell"),this.tabListNode=this.findChild(this.node,"frame/selectFrame/tabScrollView/view/content"),this.tabCellNode=this.findChild(this.tabListNode,"tabCell"),this.taskListNode=this.findChild(this.node,"frame/selectFrame/taskScrollView/view/content"),this.taskCellNode=this.findChild(this.taskListNode,"taskCell"),this.itemNode=this.findChild(this.taskCellNode,"awardList/itemPrefab")},t.prototype.initView=function(){var e=a.default.formateNumYearMonthDayStr(1e3*C.default.startTime),t=a.default.formateNumYearMonthDayStr(1e3*C.default.endTime);this.activityTimeLabel.string=cc.js.formatStr("%s-%s",e,t),this.onAddEvent(this.node,this.onBtnCloseAwardTip.bind(this)),this.initBoxList(),this.initDayList(),this.initSelectFrame(this.selectDay)},t.prototype.initBoxList=function(){var e=this,t=h.default.getConfigs();this.totalProgressLabel.string=C.default.progress.toString();var i=C.default.progress/t[t.length-1].progress;i=i,this.taskProgressBar.progress=i,this.boxListNode.children.forEach(function(i,n){var o=n<t.length?t[n]:void 0;if(o){var a=C.default.getAccTaskDataById(o.id),s=e.findChild(i,"normal"),r=e.findChild(i,"receive"),c=e.findChild(i,"received");e.findChild(i,"tagetNum/num").getComponent(cc.Label).string=o.progress.toString(),r.active=2==a.status,c.active=3==a.status,s.active=!r.active&&!c.active,e.onAddEvent(s,e.onBtnUnReceive.bind(e,o,i)),e.onAddEvent(c,e.onBtnUnReceive.bind(e,o,i)),e.onAddEvent(r,e.onBtnReceiveBox.bind(e,o.id))}})},t.prototype.initDayList=function(){for(var e=g.default.dayList,t=e.length>this.dayListNode.childrenCount?e.length:this.dayListNode.childrenCount,i=function(t){var i=void 0;if(t<n.dayListNode.childrenCount?i=n.dayListNode.children[t]:(i=cc.instantiate(n.dayCellNode)).parent=n.dayListNode,t<e.length){i.active=!0;var o=n.findChild(i,"day/num").getComponent(cc.Label),s=n.findChild(i,"select"),r=n.findChild(i,"lock"),c=n.findChild(i,"open"),l=1e3*C.default.startTime,d=new Date(l),f=new Date(new Date(d.toLocaleDateString()).getTime()),h=a.default.getPassDay(f.getTime());h=h%86400+1,o.string=e[t].toString(),s.active=e[t]==n.selectDay,r.active=h<e[t],c.active=!r.active,n.onAddEvent(i,n.onBtnSelectDayClick.bind(n,t+1));var u=n.findChild(i,"RedPointPrefab").getComponent(I.default),p=g.default.getConfigsByDay(t+1),_=new Array;p.forEach(function(e){e&&e.configs.forEach(function(e){var t="mafaKing_task_"+e.id;_.push(t)})}),u.setRedPointIdList(_),m.default.getInstance().checkRedPointById(m.RedPointId.Activity_chengba_marfa)}else i.active=!1},n=this,o=0;o<t;o++)i(o)},t.prototype.initSelectFrame=function(e){var t=g.default.getConfigsByDay(e);this.initTabList(t),this.initTaskList(t[this.selectTab])},t.prototype.initTabList=function(e){for(var t=this.tabListNode.childrenCount>e.length?this.tabListNode.childrenCount:e.length,i=function(t){var i=void 0;if(t<n.tabListNode.childrenCount?i=n.tabListNode.children[t]:(i=cc.instantiate(n.tabCellNode)).parent=n.tabListNode,e[t]){i.active=!0;var o=n.findChild(i,"name").getComponent(cc.Label),a=n.findChild(i,"normal"),s=n.findChild(i,"select");s.active=t==n.selectTab,a.active=!s.active,o.node.color=t==n.selectTab?c.ColorConfig.YellowColor:c.ColorConfig.WhiteColor,o.string=e[t].title,n.onAddEvent(i,n.onBtnSelectTabClick.bind(n,e[t],t));var r=n.findChild(i,"RedPointPrefab").getComponent(I.default),l=g.default.getConfigsByDay(n.selectDay),d=new Array;l.every(function(i){return i.mark!=e[t].mark||(i.configs.forEach(function(e){var t="mafaKing_task_"+e.id;d.push(t)}),!1)}),r.setRedPointIdList(d),m.default.getInstance().checkRedPointById(m.RedPointId.Activity_chengba_marfa)}else i.active=!1},n=this,o=0;o<t;o++)i(o)},t.prototype.initTaskList=function(e){for(var t=this.taskListNode.childrenCount>e.configs.length?this.taskListNode.childrenCount:e.configs.length,i=0;i<t;i++){var n=void 0;if(i<this.taskListNode.childrenCount?n=this.taskListNode.children[i]:(n=cc.instantiate(this.taskCellNode)).parent=this.taskListNode,i<e.configs.length){n.active=!0;var o=e.configs[i],a=C.default.getTaskDataById(o.id),s=this.findChild(n,"desc").getComponent(cc.RichText),r=this.findChild(n,"progress").getComponent(cc.RichText),c=this.findChild(n,"awardList"),l=this.findChild(n,"btnList/btnReceive"),d=this.findChild(n,"btnList/btnUnreceived"),f=this.findChild(n,"btnList/received"),g=this.findChild(n,"btnList/btnBuy"),h=this.findChild(n,"btnList/sellOut"),u=this.findChild(g,"much").getComponent(cc.Label),p=void 0;p=a.progress>=o.goal?cc.js.formatStr("<color=ffffff>%s</c><color=#ffffff>/%s</color>",a.progress,o.goal):cc.js.formatStr("<color=ff0000>%s</c><color=#ffffff>/%s</color>",a.progress,o.goal),o.price&&(u.string=o.price[2]),r.string=p,s.string=o.des,g.active=1001==o.task_type&&3!=a.status,l.active=1001!=o.task_type&&2==a.status,f.active=1001!=o.task_type&&3==a.status,h.active=1001==o.task_type&&3==a.status,d.active=1001!=o.task_type&&1==a.status,2==a.status?n.zIndex=o.id:3==a.status?n.zIndex=1e4+o.id:n.zIndex=1e3+o.id,this.initItem(o,c),this.onAddEvent(l,this.onBtnReceiveTask.bind(this,o.id)),this.onAddEvent(d,this.onBtnUnReceive.bind(this,null,null)),this.onAddEvent(g,this.onBtnBuy.bind(this,o))}else n.active=!1}},t.prototype.initItem=function(e,t,i){void 0===i&&(i=0);var n=0,o=e.resource,a=e.item,s=e.equip;if(t.active=!0,t.children.forEach(function(e){e.active=!1}),o)for(var r in o)if(Object.prototype.hasOwnProperty.call(o,r)){var c=o[r],g=void 0;n<t.childrenCount?g=t.children[n]:((g=cc.instantiate(this.itemNode)).parent=t,g.setPosition(0,i),i>0&&(g.scaleX=1==t.scaleX?1:-1,g.scaleY=1==t.scaleY?1:-1)),g.active=!0,g.getComponent(b.default).initResource(parseInt(r),c),n++}if(a)for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){c=a[r],g=void 0;n<t.childrenCount?g=t.children[n]:((g=cc.instantiate(this.itemNode)).parent=t,g.setPosition(0,i),i>0&&(g.scaleX=1==t.scaleX?1:-1,g.scaleY=1==t.scaleY?1:-1)),g.active=!0;var h=f.ITemsConfig.getITemsConfigById(r),u=_.default.create(d.GameConst.ITEM_KIND.ITEM,h.id,c,h.quality);g.getComponent(b.default).init(u,!0),n++}if(s)for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){c=s[r],g=void 0;n<t.childrenCount?g=t.children[n]:((g=cc.instantiate(this.itemNode)).parent=t,g.setPosition(0,i),i>0&&(g.scaleX=1==t.scaleX?1:-1,g.scaleY=1==t.scaleY?1:-1)),g.active=!0;u=void 0;u=(h=l.EquipConfig.getEquipConfigById(r)).dingzhi?_.default.createDingZhiEquip(r):_.default.create(d.GameConst.ITEM_KIND.EQUIP,r),g.getComponent(b.default).init(u,!0),n++}},t.prototype.initAwardItemList=function(e,t){var i=t.getChildByName("awardShow");this.initItem(e,i,20)},t.prototype.onBtnCloseAwardTip=function(){this.boxListNode.children.forEach(function(e){e.getChildByName("awardShow").active=!1})},t.prototype.onBtnSelectDayClick=function(e){var t=this;if(this.onBtnCloseAwardTip(),e!=this.selectDay){this.selectTab=0;var i=1e3*C.default.startTime,n=new Date(i),o=new Date(new Date(n.toLocaleDateString()).getTime()),s=a.default.getPassDay(o.getTime());e>(s=s%86400+1)?M.UIHelper.showTip(cc.js.formatStr(u.WordConfig.getWord(60679),e)):(this.selectDay=e,this.dayListNode.children.forEach(function(i,n){t.findChild(i,"select").active=n+1==e}),this.initSelectFrame(e))}},t.prototype.onBtnSelectTabClick=function(e,t){var i=this;this.onBtnCloseAwardTip(),t!=this.selectTab&&(this.selectTab=t,this.tabListNode.children.forEach(function(e,n){var o=i.findChild(e,"name"),a=i.findChild(e,"normal"),s=i.findChild(e,"select");s.active=n==t,a.active=!s.active,o.color=n==t?c.ColorConfig.YellowColor:c.ColorConfig.WhiteColor}),this.initTaskList(e))},t.prototype.onBtnReceiveBox=function(e){this.onBtnCloseAwardTip(),y.default.s_get_marfaking_acc_reward(e)},t.prototype.onBtnReceiveTask=function(e){this.onBtnCloseAwardTip(),y.default.s_get_marfaking_reward(e)},t.prototype.onBtnUnReceive=function(e,t){this.onBtnCloseAwardTip(),e&&t?this.initAwardItemList(e,t):u.WordConfig.showWord(60199)},t.prototype.onBtnBuy=function(e){this.onBtnCloseAwardTip(),v.default.instance.getGold()>=e.price[2]?y.default.s_buy_marfaking(e.id):u.WordConfig.showWord(60115)},t=o([k],t)}(r.default));i.default=S,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MarfaKingConfig":"MarfaKingConfig","../../config/MarfaKingProConfig":"MarfaKingProConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ChengBaModel":"ChengBaModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab","../../utils/UIHelper":"UIHelper"}],ChiXueMoJianConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9e6c9pgbEtKOKDUBQZgY52c","ChiXueMoJianConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/MagicModel"),a=e("./JsonConfigBase"),s=e("./MagicNameConfig"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atk=0,t.mag=0,t.spt=0,t.BonusDamage=0,t.HpDrain=0,t.MpDrain=0,t.hp=0,t.mp=0,t.skill=[],t.need_level=0,t.zhanli=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.type=e.type,i.level=e.level,i.cost1=e.cost1,i.cost2=e.cost2,i.curr_progress=e.curr_progress,i.all_progress=e.all_progress,i.skill=e.skill,i.need_level=e.need_level,i.zhanli=e.zhanli,i.atk=e[1],i.mag=e[3],i.spt=e[5],i.BonusDamage=e[15],i.HpDrain=e[19]||-1,i.MpDrain=e[20]||-1,i.hp=e[10],i.mp=e[12],i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getChixuemojianConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getMagicModelList=function(e){var t,i=[];return e.atk>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.atk,t.magicValue=e.atk,i.push(t)),e.mag>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.mag,t.magicValue=e.mag,i.push(t)),e.spt>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.spt,t.magicValue=e.spt,i.push(t)),e.BonusDamage>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.BonusDamage,t.magicValue=e.BonusDamage,i.push(t)),e.HpDrain>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.HpDrain,t.magicValue=e.HpDrain,i.push(t)),e.MpDrain>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.MpDrain,t.magicValue=e.MpDrain,i.push(t)),e.hp>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.hp,t.magicValue=e.hp,i.push(t)),e.mp>=0&&((t=new o.default).magicId=s.MagicNameConfig.MagicId.mp,t.magicValue=e.mp,i.push(t)),i},t.Config_Name="chixuemojianConfig",t.configMap=new Map,t}(a.JsonConfigBase);i.ChiXueMoJianConfig=r,cc._RF.pop()},{"../model/MagicModel":"MagicModel","./JsonConfigBase":"JsonConfigBase","./MagicNameConfig":"MagicNameConfig"}],ChongZhiConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c9a77zFFsNGtqfUqaPy1Iym","ChongZhiConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("./GameConfig"),s=e("../sdk/SdkHelper"),r=e("./WordConfig"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.money=1,t.trigger=1,t.btn={text:"30",skin:"btn_goumai.png"},t.time=30,t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id!=e||(t=i)}),t},t.getChongZhiByIdAndPlatform=function(e){return(a.GameConfig.sdkType==a.SdkType.BingNiao||a.GameConfig.sdkType==a.SdkType.LongRui||a.GameConfig.sdkType==a.SdkType.KoreaBingNiao)&&s.default.isIos()?this.getConfigById(e+1e3):this.getConfigById(e)},t.prototype.getDefaultMoneyStr=function(){return a.GameConfig.sdkType==a.SdkType.BingNiao||a.GameConfig.sdkType==a.SdkType.LongRui||a.GameConfig.sdkType==a.SdkType.FengYue||a.GameConfig.sdkType==a.SdkType.Xiaotun?this.o_price+"":a.GameConfig.sdkType==a.SdkType.KoreaBingNiao?"\u20a9"+this.o_price:"$"+this.o_price/100},t.prototype.getMoneyStr=function(){return a.GameConfig.sdkType==a.SdkType.BingNiao||a.GameConfig.sdkType==a.SdkType.LongRui||a.GameConfig.sdkType==a.SdkType.FengYue||a.GameConfig.sdkType==a.SdkType.Xiaotun?cc.js.formatStr(r.WordConfig.getWord(60374),this.money):a.GameConfig.sdkType==a.SdkType.KoreaBingNiao?"\u20a9"+this.gp_ios:"$"+this.gp_ios/100},t.configMap=new Map,t}(o.JsonConfigBase);i.ChongZhiConfig=c,cc._RF.pop()},{"../sdk/SdkHelper":"SdkHelper","./GameConfig":"GameConfig","./JsonConfigBase":"JsonConfigBase","./WordConfig":"WordConfig"}],ChristmasterConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8eac57YX99BiL4lNTCUGtww","ChristmasterConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.boss=e.boss,i.droptimes=e.droptimes,i.mapid=e.mapid,i.weight=e.weight,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id==e&&(t=i)}),t},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ChristmasterConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],CityView:[function(e,t,i){"use strict";cc._RF.push(t,"b73f7+xTIhC54PTdQasE748","CityView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/MapConfig"),r=e("../../engine/Logger"),c=e("../config/YaoShopConfig"),l=e("../model/RoleInfoModel"),d=e("../config/ColorConfig"),f=e("../config/EquipConfig"),g=e("../model/ItemInfoModel"),h=e("../utils/UIHelper"),u=e("../../engine/UIManager"),p=e("../config/ViewConfig"),m=e("../utils/MusicHelper"),C=e("../../engine/EventManager"),_=e("../config/GameConst"),v=e("./BuyShopView"),y=e("../config/GameConfig"),b=e("../network/SocketClient"),I=e("../sdk/SdkHelper"),M=e("../event/CommonEvent"),w=e("../model/JingJieModel"),k=e("../model/FightModel"),S=e("../config/WordConfig"),P=e("../model/MineModel"),E=e("../config/MineConfig"),L=e("./PublicTipView"),T=e("./GameView"),R=e("./city/TianguanEntrance"),N=e("../utils/JumpActionUtils"),B=e("../prefab/RedPointPrefab"),A=e("../manager/RedPointManager"),G=cc._decorator,x=G.ccclass,O=G.property,V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jingJieSpriteFrameList=[],t.npcAtlas=null,t.jinjieList=[{skin:"city/but_button_fanren01",skinSelet:"city/but_button_fanren02",name:w.JingJieModel.getJingJieNameConfig()[0]},{skin:"city/but_button_lunhui01",skinSelet:"city/but_button_lunhui02",name:w.JingJieModel.getJingJieNameConfig()[1]}],t.npcSkin=[],t.selectIndex=0,t.equipNameConfig=[],t.itemList=[],t.npcList=[],t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.equipNameConfig=[S.WordConfig.getWord(60411),S.WordConfig.getWord(60412),S.WordConfig.getWord(60413),S.WordConfig.getWord(60414),S.WordConfig.getWord(60415)],this.npcDialogue=this.findChild(this.node,"view/panel/npcDialogue"),this.npcDialogue.active=!1,this.yishiwunvNPC=this.findChild(this.node,"view/panel/yishiwunvNPC"),this.yishiwunvNPC.active=!1,this.minePanel=this.findChild(this.node,"view/panel/minePanel"),this.minePanel.active=!1,this.tianguanPanel=this.findChild(this.node,"view/panel/tianguanPanel"),this.tianguanPanel.active=!1,this.findChild(this.node,"view/panel/npcDialogue/close").on(cc.Node.EventType.TOUCH_END,this.onCLickClose.bind(this)),this.findChild(this.node,"view/panel/yishiwunvNPC/btn_close").on(cc.Node.EventType.TOUCH_END,this.onCLickClose.bind(this)),this.findChild(this.node,"view/panel/minePanel/btn_close").on(cc.Node.EventType.TOUCH_END,this.onCLickClose.bind(this)),this.findChild(this.node,"view/panel/yishiwunvNPC/btn_tip").on(cc.Node.EventType.TOUCH_END,this.onClickShowTipWindow.bind(this)),this.findChild(this.node,"view/panel/minePanel/btn_tip").on(cc.Node.EventType.TOUCH_END,this.onClickShowTipWindow.bind(this)),this.title=this.getChild(this.node,"view/panel/title"),this.npc=this.getChild(this.node,"view/panel/npc"),this.content=this.getChild(this.node,"view/panel/content",cc.Label),this.npcItem=this.getChild(this.node,"view/panel/npc/view/content/item"),this.npcItem.active=!1,this.item_1=this.findChild(this.npcDialogue,"talk/view/content/item_1"),this.item_2=this.findChild(this.npcDialogue,"talk/view/content/item_2"),this.item_3=this.findChild(this.npcDialogue,"talk/view/content/item_3"),this.item_1.active=!1,this.item_2.active=!1,this.item_3.active=!1,this.item=this.findChild(this.yishiwunvNPC,"jinjieList/view/content/item"),this.item.active=!1,this.initNpc(),this.refreshTips(),this.onClickNpcDialog()},t.prototype.onEnable=function(){C.EventManager.instance.on(M.CommonEvent.Event_UserInfoRefresh,this.onUserInfoRefresh,this),C.EventManager.instance.on(M.CommonEvent.Event_SwitchMapSuc,this.switchMapSuc,this),C.EventManager.instance.on(M.CommonEvent.Event_ChangeWorld,this.refreshJinjie,this),C.EventManager.instance.on(M.CommonEvent.Event_Change_MineClass,this.refreshMini,this),C.EventManager.instance.on(M.CommonEvent.Event_Refresh_PersonalMine,this.initPower,this),C.EventManager.instance.on("GUIDE_10401",function(e){this.onOpenDialogue(0)},this),C.EventManager.instance.on("GUIDE_10601",function(e){this.onOpenDialogue(0)},this),C.EventManager.instance.on("GUIDE_10701",function(e){this.onOpenDialogue(0)},this),C.EventManager.instance.on("GUIDE_10801",function(e){this.onOpenDialogue(3)},this),C.EventManager.instance.on("GUIDE_10802",function(e){this.changeWorld(2)},this),this.registerEvent(),this.onClickNpcDialog()},t.prototype.onShow=function(){},t.prototype.initPower=function(){var e=this.getChild(this.minePanel,"power/num",cc.Label),t=this.getChild(this.minePanel,"power/btnAdd");e.string=P.MinePersonaInfoModel.getCurrPower()+"",this.onAddEvent(t,this.onClickAddPower.bind(this))},t.prototype.initNpc=function(){this.refreshTips(),this.title.getComponent(cc.Label).string=s.MapConfig.curMapConfig.name,this.npcSkin=[{skin:"npc_huishou",name:S.WordConfig.getWord(60399),tip:S.WordConfig.getWord(60400),topTip:0,isMine:!1},{skin:"npc_yaodian",name:S.WordConfig.getWord(60401),tip:S.WordConfig.getWord(60402),topTip:2,isMine:!1},{skin:"npc_shudian",name:S.WordConfig.getWord(60403),tip:S.WordConfig.getWord(60404),topTip:3,isMine:!1},{skin:"img_npc_wunv",name:S.WordConfig.getWord(60405),tip:S.WordConfig.getWord(60406),topTip:-1,isMine:!1},{skin:"img_npc_meilaoban",name:S.WordConfig.getWord(60407),tip:S.WordConfig.getWord(60408),topTip:-1,isMine:!0},{skin:"img_npc_tianguanlaoren",name:S.WordConfig.getWord(60409),tip:S.WordConfig.getWord(60410),topTip:-1,isMine:!1},{skin:"img_npc_kuangkengshouwei",name:S.WordConfig.getWord(61699),tip:S.WordConfig.getWord(60408),topTip:-1,isMine:!0},{skin:"img_npc_kuangkengshouwei",name:S.WordConfig.getWord(61700),tip:S.WordConfig.getWord(60408),topTip:-1,isMine:!0}];for(var e=0;e<this.npcSkin.length;e++){var t=cc.instantiate(this.npcItem),i=this.npcSkin[e];t.parent=this.npcItem.parent,t.active=!0,t.name=e+"",t.getChildByName("name").getComponent(cc.Label).string=i.name,t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.npcAtlas.getSpriteFrame(i.skin),t.on(cc.Node.EventType.TOUCH_END,this.onOpenDialogue.bind(this,e)),r.Logger.log("curMapConfig====",e,s.MapConfig.curMapConfig),s.MapConfig.curMapConfig.type==s.MapConfig.MAP_TYPE.Mine?t.active=i.isMine:(t.active=!i.isMine,s.MapConfig.curMapConfig.world>1&&1==e&&(t.active=!1),1!=s.MapConfig.curMapConfig.position&&3==e&&(t.active=!1)),this.npcList.push(t),6==e&&t.getChildByName("RedPointPrefab").getComponent(B.default).setRedPointIdList([A.RedPointId.Mine])}this.refreshNpc()},t.prototype.onUserInfoRefresh=function(){this.refreshSelectInfo()},t.prototype.switchMapSuc=function(){this.selectIndex=0,this.refreshTips(),this.onClickNpcDialog(),this.refreshNpc(),i.isTianGuan_laoren&&(i.isTianGuan_laoren=!1,this.onOpenDialogue(5))},t.prototype.refreshNpc=function(){if(s.MapConfig.curMapConfig.type==s.MapConfig.MAP_TYPE.Mine)for(var e=0;e<this.npcList.length;e++)this.npcList[e].active=this.npcSkin[e].isMine,4==e&&this.npcList[e].getChildByName("RedPointPrefab").getComponent(B.default).setRedPointIdList([A.RedPointId.Minemeilaoban]);else{for(e=0;e<this.npcList.length;e++)this.npcList[e].active=!this.npcSkin[e].isMine;this.npcList[3].active=1==s.MapConfig.curMapConfig.position,this.npcList[0].active=s.MapConfig.curMapConfig.world<=1,this.npcList[5].active=22==s.MapConfig.curMapConfig.mapId}},t.prototype.refreshTips=function(){this.title.getComponent(cc.Label).string=s.MapConfig.curMapConfig.name,this.content.string=s.MapConfig.curMapConfig.des},t.prototype.onClickNpcDialog=function(){this.npc.active=!0,this.npcDialogue.active=!1,this.yishiwunvNPC.active=!1,this.minePanel.active=!1,this.tianguanPanel.active=!1,this.findChild(this.node,"view/panel/content").active=!0,this.findChild(this.node,"view/panel/line").active=!0},t.prototype.registerEvent=function(){C.EventManager.instance.on(_.EVENT_NAME.BAG_ADD,this.refreshSelectInfo,this)},t.prototype.onOpenDialogue=function(e){switch(this.selectIndex=e,this.refreshTips(),this.getChild(this.npcDialogue,"npc/icon",cc.Sprite).spriteFrame=this.npcAtlas.getSpriteFrame(this.npcSkin[this.selectIndex].skin),this.getChild(this.npcDialogue,"dialogue/content",cc.Label).string=this.npcSkin[this.selectIndex].tip,this.getChild(this.npcDialogue,"npc/name",cc.Label).string=this.npcSkin[this.selectIndex].name,e){case 0:N.default.doAction(N.FunctionIdList.Blacksmith_Yingxincun);break;case 6:u.default.instance.createView(p.default.gameView.MinePlunderView);break;case 7:u.default.instance.createView(p.default.gameView.MineReportView);break;case 4:P.default.setFirstredMeilaoban(!0),A.default.getInstance().checkRedPointById(A.RedPointId.Minemeilaoban)}this.refreshSelectInfo()},t.prototype.refreshSelectInfo=function(){if(this.itemList)for(var e=0;e<this.itemList.length;e++)this.itemList[e].destroy();if(this.itemList=[],this.findChild(this.node,"view/panel/content").active=!0,this.findChild(this.node,"view/panel/line").active=!0,this.selectIndex==i.PHARMACY){this.npc.active=!1,this.npcDialogue.active=!0;var t=c.YaoShopConfig.getShopConfigByCity(l.default.instance.mapId);for(e=0;e<t.length;e++){var n=t[e],o=d.ColorConfig.getQualityColor(g.default.getConfigById(n.item_id).quality);(a=cc.instantiate(this.item_2)).parent=this.item_2.parent,a.active=!0,a.getChildByName("name").getComponent(cc.Label).string=n.name,a.getChildByName("name").color=o,a.getChildByName("coin").getComponent(cc.Label).string=S.WordConfig.getWord(60393)+h.UIHelper.tranNumber(n.unit_price),a.on(cc.Node.EventType.TOUCH_END,this.onBuyItem.bind(this,n)),this.itemList.push(a)}}else if(this.selectIndex==i.RECOYLE){this.npc.active=!1,this.npcDialogue.active=!0;for(e=0;e<5;e++){var a;(a=cc.instantiate(this.item_3)).parent=this.item_3.parent,a.active=!0,a.name=e+"";var s=l.default.instance.getShowEquip(e);a.getChildByName("name").getComponent(cc.Label).string=this.equipNameConfig[e]+":"+s.count,a.color=d.ColorConfig.getQualityColor(e),a.getChildByName("name").color=d.ColorConfig.getQualityColor(e),a.getChildByName("coin").getComponent(cc.Label).string=h.UIHelper.tranNumber(s.price),a.getChildByName("txtCream").getComponent(cc.Label).string=h.UIHelper.tranNumber(s.cream),a.on(cc.Node.EventType.TOUCH_END,this.onRecycle.bind(this,e)),this.itemList.push(a)}}else this.selectIndex==i.PSYCHIC?(this.npc.active=!1,this.findChild(this.node,"view/panel/content").active=!1,this.findChild(this.node,"view/panel/line").active=!1,this.yishiwunvNPC.active=!0,this.refreshJinjie()):this.selectIndex==i.MINI?(this.npc.active=!1,this.findChild(this.node,"view/panel/content").active=!1,this.findChild(this.node,"view/panel/line").active=!1,this.minePanel.active=!0,this.refreshMini()):this.selectIndex==i.TianGuan&&(this.npc.active=!1,this.findChild(this.node,"view/panel/content").active=!1,this.findChild(this.node,"view/panel/line").active=!1,this.tianguanPanel.active=!0,this.tianguanPanel.getComponent(R.default).init(this),this.title.getComponent(cc.Label).string=S.WordConfig.getWord(60416))},t.prototype.onBuyItem=function(e){m.MusicHelper.play_click();var t=Math.floor(l.default.instance.getCoin()/e.unit_price);u.default.instance.createView(p.default.gameView.BuyShopView,null,v.default.BuyType.YaoDian,1,e.item_id,e.unit_price,0,0,t,null,null,e.id)},t.prototype.refreshJinjie=function(){if(this.itemList)for(var e=0;e<this.itemList.length;e++)this.itemList[e].destroy();this.itemList=[];for(e=0;e<this.jinjieList.length;e++){var t=cc.instantiate(this.item);t.parent=this.item.parent,t.active=!0,t.name=e+1+"",t.getChildByName("name").getComponent(cc.Label).string=this.jinjieList[e].name,t.getChildByName("name").color=s.MapConfig.curMapConfig.world-1==e?d.ColorConfig.GreenColor:d.ColorConfig.WhiteColor,t.getChildByName("here").active=s.MapConfig.curMapConfig.world-1==e,t.getChildByName("btn").active=s.MapConfig.curMapConfig.world-1!=e,t.getChildByName("btn").on(cc.Node.EventType.TOUCH_END,this.changeWorld.bind(this,e+1));h.UIHelper.printNodeAllNodeName(t.getChildByName("btn")),s.MapConfig.curMapConfig.world-1==e?this.jinjieList[e].skinSelet:this.jinjieList[e].skin;var i=2*e;s.MapConfig.curMapConfig.world-1==e&&i++,t.getComponent(cc.Sprite).spriteFrame=this.jingJieSpriteFrameList[i],this.itemList.push(t)}},t.prototype.changeWorld=function(e){if(m.MusicHelper.play_click(),s.MapConfig.curMapConfig.world!=e)if(2==e){if(!w.JingJieModel.hadOpenJingJie(e)){var t=cc.js.formatStr(S.WordConfig.getWord(60309),w.JingJieModel.getJingJieNameConfig()[e-1]);return void h.UIHelper.showTip(t)}var i=s.MapConfig.getMapConfigByMapId(1001);if(k.default.maxFight<i.Lv){var n=S.WordConfig.getWord(60130);return n=n.replace("[#]",i.Lv+""),h.UIHelper.showTip(n),void u.default.instance.createView(p.default.gameView.toStrongerPanel)}b.default.s_seq_rune_gift()}else l.default.instance.changeWorld(e)},t.prototype.refreshMini=function(){this.initPower(),this.findChild(this.minePanel,"btn_close").active=!0;for(var e=0;e<5;e++){var t=E.MineConfig.getConfigById(e+1),i=void 0;(i=0==e?this.findChild(this.minePanel,"item1"):this.findChild(this.minePanel,"miniList/view/content/item"+(e+1))).getChildByName("name").getComponent(cc.Label).string=t.name,P.default.currMiniClass==e+1?(i.getChildByName("here").active=!0,i.getChildByName("btn").active=!1):(i.getChildByName("here").active=!1,i.getChildByName("btn").active=!0),this.onAddEvent(i.getChildByName("btn"),this.onClickChangeMini.bind(this,e+1))}1==P.default.currMiniClass?(this.minePanel.getChildByName("tip").getComponent(cc.Label).string=S.WordConfig.getWord(60417),this.getChild(this.minePanel,"npcIcon",cc.Sprite).spriteFrame=this.npcAtlas.getSpriteFrame("img_npc_meilaoban"),this.findChild(this.minePanel,"npcName").getComponent(cc.Label).string=S.WordConfig.getWord(60407)):2==P.default.currMiniClass?(this.minePanel.getChildByName("tip").getComponent(cc.Label).string=S.WordConfig.getWord(60418),this.getChild(this.minePanel,"npcIcon",cc.Sprite).spriteFrame=this.npcAtlas.getSpriteFrame("img_npc_kuangkengshouwei"),this.findChild(this.minePanel,"npcName").getComponent(cc.Label).string=S.WordConfig.getWord(60419)):(this.minePanel.getChildByName("tip").getComponent(cc.Label).string=S.WordConfig.getWord(60420),this.getChild(this.minePanel,"npcIcon",cc.Sprite).spriteFrame=this.npcAtlas.getSpriteFrame("img_npc_kuangkengshouwei"),this.findChild(this.minePanel,"npcName").getComponent(cc.Label).string=S.WordConfig.getWord(60419))},t.prototype.onClickChangeMini=function(e){var t=this;P.default.currMiniClass!=e&&(1!=P.default.currMiniClass?1!=e?P.default.currMiniClass<e?this.node.parent.getComponent(T.default).play1toNMineEffect(function(){t.changeMineClass(e)}):P.default.currMiniClass>e&&this.node.parent.getComponent(T.default).playNto1MineEffect(function(){t.changeMineClass(e)}):this.node.parent.getComponent(T.default).playNto0MineEffect(function(){t.changeMineClass(e)}):this.node.parent.getComponent(T.default).play0to1MineEffect(function(){t.changeMineClass(e)}))},t.prototype.changeMineClass=function(e){P.default.changeMineClass(e)},t.prototype.onRecycle=function(e){m.MusicHelper.play_click();var t=l.default.instance.getShowEquip(e),i=t.equipList;if(i.length>0){var n=t.price,o=t.cream;if(y.GameConfig.connectServer){for(var a=[],r=0;r<i.length;r++)a.push(parseInt(i[r].itemId));for(var c=0,d=0,g=0,h=0,C=0;C<i.length;C++)i[C].xilianTime>0&&i[C].isCanEquipAnimation()&&(f.EquipConfig.getEquipConfigById(i[C].itemType).world==s.MapConfig.WORLD.LunHui?(d++,h+=i[C].xilianCost):(c++,g+=i[C].xilianCost));c>0||d>0?u.default.instance.createView(p.default.gameView.RecycleTip,null,c,g,d,h,a):b.default.req_reback_items(a,3),I.default.sdkCustomAction(14,n),I.default.sdkCustomAction(23,o)}else l.default.instance.addCoin(n),l.default.instance.addCream(o),l.default.instance.recoveryEquipList(t.equipList)}},t.prototype.onCLickClose=function(){m.MusicHelper.play_click(),P.default.currMiniClass<=1?this.onClickNpcDialog():this.onClickChangeMini(1)},t.prototype.onClickShowTipWindow=function(e){m.MusicHelper.play_click(),this.selectIndex==i.MINI?u.default.instance.createView(p.default.gameView.PublicTipView,null,L.RuleType.TYPE_MINE):this.selectIndex==i.PSYCHIC&&u.default.instance.createView(p.default.gameView.PublicTipView,null,L.RuleType.TYPE_LUNHUI)},t.prototype.onClickCloseTipWindow=function(){m.MusicHelper.play_click()},t.prototype.onClickAddPower=function(){u.default.instance.createView(p.default.gameView.MineBuyPowerView)},t.prototype.onHide=function(){},t.MAkE_EQUIP=0,t.PHARMACY=1,t.RECOYLE=2,t.PSYCHIC=3,t.MINI=4,t.TianGuan=5,t.isTianGuan_laoren=!1,o([O({type:[cc.SpriteFrame]})],t.prototype,"jingJieSpriteFrameList",void 0),o([O({type:cc.SpriteAtlas})],t.prototype,"npcAtlas",void 0),t=i=o([x],t)}(a.default);i.default=V,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/MineConfig":"MineConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../config/YaoShopConfig":"YaoShopConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../model/FightModel":"FightModel","../model/ItemInfoModel":"ItemInfoModel","../model/JingJieModel":"JingJieModel","../model/MineModel":"MineModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/RedPointPrefab":"RedPointPrefab","../sdk/SdkHelper":"SdkHelper","../utils/JumpActionUtils":"JumpActionUtils","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","./BuyShopView":"BuyShopView","./GameView":"GameView","./PublicTipView":"PublicTipView","./city/TianguanEntrance":"TianguanEntrance"}],CollectActivityBuyView:[function(e,t,i){"use strict";cc._RF.push(t,"deb972fyeFFsZmWE9D9xLQe","CollectActivityBuyView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ColorConfig"),r=e("../../config/GameConst"),c=e("../../config/ITemsConfig"),l=e("../../config/WordConfig"),d=e("../../model/CollectActivityShopModel"),f=e("../../model/ItemInfoModel"),g=e("../../model/RoleInfoModel"),h=e("../../network/SocketClient"),u=e("../../prefab/ItemPrefab"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentIndex=1,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onInitChild=function(e){this.config=e,this.model=d.default.getModel(this.config.id+"");var t=void 0==this.model?this.config.restriction:this.model.prodRepo;this.countLabel.string=t.toString(),this.amountEditBox.string="1",this.setLabelString();var i=c.ITemsConfig.getITemsConfigById(e.item_id),n=f.default.create(r.GameConst.ITEM_KIND.ITEM,e.item_id,e.num,i.quality);this.itemNode.getComponent(u.default).init(n,!0),this.onAddEvent(this.reduceBtn,this.onBtnClickReduce.bind(this,!1)),this.onAddEvent(this.addBtn,this.onBtnClickReduce.bind(this,!0)),this.onAddEvent(this.buyBtn,this.onClickBuy.bind(this)),this.onAddEvent(this.maxBtn,this.onClickMax.bind(this))},t.prototype.onEnable=function(){},t.prototype.onShow=function(){},t.prototype.onSocketRespMsg=function(){},t.prototype.initFindNode=function(){this.itemNode=this.findChild(this.node,"frame/ItemPrefab"),this.countLabel=this.findChild(this.node,"frame/xiangou/count").getComponent(cc.Label),this.reduceBtn=this.findChild(this.node,"frame/btnRed"),this.addBtn=this.findChild(this.node,"frame/btnAdd"),this.maxBtn=this.findChild(this.node,"frame/btnMax"),this.buyBtn=this.findChild(this.node,"frame/btnDuihuan"),this.amountEditBox=this.findChild(this.node,"frame/amountEditBox").getComponent(cc.EditBox)},t.prototype.onBtnClickReduce=function(e){this.currentIndex=e?this.currentIndex+1>this.getCanBuyMaxNum()?this.getCanBuyMaxNum():this.currentIndex+1:this.currentIndex-1>=0?this.currentIndex-1:0,this.setLabelString()},t.prototype.onClickMax=function(){this.currentIndex=this.getCanBuyMaxNum(),this.setLabelString()},t.prototype.onClickBuy=function(){this.currentIndex>0&&(h.default.s_collect_shop_change(this.config.id,this.currentIndex),this.closeView())},t.prototype.setLabelString=function(){this.amountEditBox.string=Math.floor(this.currentIndex).toString();var e=this.config.token,t=[],i="";switch(this.config.price_type){case 1:i=this.getFormachRichText(l.WordConfig.getWord(60544)+"x"+this.config.unit_price*this.currentIndex,"#0CFF00");break;case 2:i=this.getFormachRichText(l.WordConfig.getWord(60517)+"x"+this.config.unit_price*this.currentIndex,"#FF6C00");break;case 3:for(var n=0;n<e.length;n++){var o=e[n];for(var a in t=[],o)t=[o[a],a];var r=c.ITemsConfig.getITemsConfigById(t[1]);i+=this.getFormachRichText(r.name+"x"+t[0]*this.currentIndex,s.ColorConfig.getQualityHexColor(r.quality))+" "}}this.findChild(this.node,"frame/cost/itemName").getComponent(cc.RichText).string=i},t.prototype.getFormachRichText=function(e,t){return"<color="+t+">"+e+"</color>"},t.prototype.getCanBuyMaxNum=function(){var e=void 0==this.model?this.config.restriction:this.model.prodRepo,t=this.config.token,i=0,n=0;switch(this.config.price_type){case 1:n=Math.floor(g.default.instance.getCoin()/this.config.unit_price);break;case 2:n=Math.floor(g.default.instance.getGold()/this.config.unit_price);break;case 3:for(var o="",a=0;a<t.length;a++)for(var s in t[a])t[a][s]>i&&(i=t[a][s],o=s);n=Math.floor(f.default.getItemAmount(o)/i)}return(n=n<=0?1:n)>=e?e:n},t.prototype.update=function(){this.currentIndex=parseInt(this.amountEditBox.string),(isNaN(this.currentIndex)||this.currentIndex<=0)&&(this.currentIndex=1),this.currentIndex=this.currentIndex>this.getCanBuyMaxNum()?this.getCanBuyMaxNum():this.currentIndex,this.setLabelString()},t=o([m],t)}(a.default));i.default=C,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../model/CollectActivityShopModel":"CollectActivityShopModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],CollectActivityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7ccd8ZqCw9FJJGKjEKFejYh","CollectActivityConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.token=[],t.m_show=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=Number(i),t.configMap.set(i,n),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getConfigListByActivityId=function(e){var t=[];return this.configMap.forEach(function(i,n){e==i.activity_id&&t.push(i)}),t},t.getConfigList=function(){return this.configList},t.configMap=new Map,t.configList=[],t.Config_Name="collectActivityConfig",t}(e("./JsonConfigBase").JsonConfigBase);i.CollectActivityConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],CollectActivityShopModel:[function(e,t,i){"use strict";cc._RF.push(t,"8a3e4eARtdD7rBUaFJCba7t","CollectActivityShopModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../event/CommonEvent"),s=function(){function e(){}return e.getNumById=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.productId==e+"")return i.prodRepo}return 0},e.getModel=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.productId==e)return i}},e.proto2Shop=function(t){var i=t.getShopItemListList();o.Logger.log("CollectActivityShopModel====",i),this.modelList=[];for(var s=0;s<i.length;s++){var r=new e;r.productId=i[s].getProductid(),r.prodRepo=i[s].getProdrepo(),this.modelList.push(r)}this.modelList.sort(function(e,t){return Number(e.productId)-Number(t.productId)}),n.EventManager.instance.dispatch(a.CommonEvent.Event_CollectActivityShop_Refresh),o.Logger.log("CollectActivityShopModel====",this.modelList)},e.proto2ShopItem=function(e){for(var t=e.getId(),i=e.getNewnumber(),o=0;o<this.modelList.length;o++)this.modelList[o].productId==t&&(this.modelList[o].prodRepo=i);n.EventManager.instance.dispatch(a.CommonEvent.Event_CollectActivityShop_Refresh)},e.modelList=[],e}();i.default=s,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../event/CommonEvent":"CommonEvent"}],CollectActivityShopView:[function(e,t,i){"use strict";cc._RF.push(t,"69137NfHjpCPLnz+RcAT/MM","CollectActivityShopView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/CollectActivityConfig"),l=e("../../config/ColorConfig"),d=e("../../config/GameConst"),f=e("../../config/ITemsConfig"),g=e("../../config/ViewConfig"),h=e("../../config/WordConfig"),u=e("../../event/CommonEvent"),p=e("../../model/CollectActivityShopModel"),m=e("../../model/ItemInfoModel"),C=e("../../model/RoleInfoModel"),_=e("../../network/SocketClient"),v=e("../../prefab/ItemPrefab"),y=cc._decorator,b=y.ccclass,I=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.exchangeNodeList=[],t.itemList=[],t}return n(t,e),t.prototype.onLoad=function(){this.shopListNode=this.findChild(this.node,"exchangeScrollView/view/content"),this.shopItemNode=this.findChild(this.shopListNode,"itemNode");var e=c.CollectActivityConfig.getConfigById(101);this.itemList=e.m_show,this.item=this.findChild(this.node,"itemList/item"),this.item.active=!1;for(var t=0;t<this.itemList.length;t++){var i=cc.instantiate(this.item);i.active=!0,i.parent=this.item.parent,i.getChildByName("ItemPrefab").getComponent(v.default).init(f.ITemsConfig.getITemsConfigById(this.itemList[t])),i.getChildByName("haveNum").getComponent(cc.Label).string=m.default.getItemAmount(this.itemList[t])+"",this.exchangeNodeList.push(i)}},t.prototype.onEnable=function(){a.EventManager.instance.on(u.CommonEvent.Event_CollectActivityShop_Refresh,this.refreshByServer,this),this.onAddEvent(this.findChild(this.node,"btn_close"),this.closeView.bind(this)),_.default.s_collect_shop_info()},t.prototype.onSocketRespMsg=function(e,t){},t.prototype.refreshByServer=function(){for(var e=p.default.modelList,t=this.shopListNode.childrenCount>e.length?this.shopListNode.childrenCount:e.length,i=0;i<t;i++){var n=void 0;i<this.shopListNode.childrenCount?n=this.shopListNode.children[i]:(n=cc.instantiate(this.shopItemNode)).parent=this.shopListNode,this.initShopItem(n,e[i])}for(i=0;i<this.exchangeNodeList.length;i++)this.exchangeNodeList[i].getChildByName("ItemPrefab").getComponent(v.default).init(f.ITemsConfig.getITemsConfigById(this.itemList[i])),this.exchangeNodeList[i].getChildByName("haveNum").getComponent(cc.Label).string=m.default.getItemAmount(this.itemList[i])+""},t.prototype.initShopItem=function(e,t){var i=c.CollectActivityConfig.getConfigById(Number(t.productId));if(e.active=!1,i){e.active=C.default.instance.level>=i.level&&(C.default.instance.occupation==i.zhiye||0==i.zhiye);var n=this.findChild(e,"ItemPrefab"),o=f.ITemsConfig.getITemsConfigById(i.item_id),a=m.default.create(d.GameConst.ITEM_KIND.ITEM,i.item_id,i.num,o.quality);n.getComponent(v.default).init(a,!0);var s=e.getChildByName("needNode"),r="";switch(i.price_type){case 1:r=this.getFormachRichText(h.WordConfig.getWord(60544)+"x"+i.unit_price,"#0CFF00");break;case 2:r=this.getFormachRichText(h.WordConfig.getWord(60517)+"x"+i.unit_price,"#FF6C00");break;case 3:for(var g=i.token,u=[],p=0;p<g.length;p++){var _=g[p];for(var y in u=[],_)u=[_[y],y];var b=f.ITemsConfig.getITemsConfigById(u[1]);r+=this.getFormachRichText(b.name+"x"+u[0],l.ColorConfig.getQualityHexColor(b.quality))+"\n"}}s.getChildByName("needItem").getComponent(cc.RichText).string=r,i.restriction>0?(e.getChildByName("xiangou").active=!0,e.getChildByName("xiangou").getChildByName("buynum").getComponent(cc.Label).string=t.prodRepo+""):e.getChildByName("xiangou").active=!1;var I=e.getChildByName("buy");this.onAddEvent(I,this.onClickExchange.bind(this,i)),t.prodRepo<=0?(I.active=!1,e.getChildByName("over").active=!0):(I.active=!0,e.getChildByName("over").active=!1)}},t.prototype.onClickExchange=function(e){s.default.instance.createView(g.default.gameView.CollectActivityBuyView,null,e)},t.prototype.getFormachRichText=function(e,t){return"<color="+t+">"+e+"</color>"},t=o([b],t)}(r.default));i.default=I,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/CollectActivityConfig":"CollectActivityConfig","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/CollectActivityShopModel":"CollectActivityShopModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],CollectShopEnterView:[function(e,t,i){"use strict";cc._RF.push(t,"5ba03dBcs9MPL329yo0k0yX","CollectShopEnterView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/CollectActivityConfig"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../config/ViewConfig"),g=e("../../config/WordConfig"),h=e("../../model/ActivityOpenModel"),u=e("../../prefab/ItemPrefab"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.node.getChildByName("actTime").getComponent(cc.Label);var e=h.default.getOpenActivityModel(14);this.node.getChildByName("actTime").getComponent(cc.Label).string=e?a.default.formatDateStr4(1e3*e.actStartTime)+"-"+a.default.formatDateStr4(1e3*e.actEndTimes):g.WordConfig.getWord(60782);for(var t=c.CollectActivityConfig.getConfigListByActivityId(14),i=[],n=0;n<t.length;n++)t[n].type==l.GameConst.ITEM_KIND.ITEM&&1==t[n].mainshow&&i.push(t[n].item_id);var o=this.findChild(this.node,"content/ItemPrefab");for(n=0;n<i.length;n++){var s=d.ITemsConfig.getITemsConfigById(i[n]),r=cc.instantiate(o);r.active=!0,r.parent=o.parent,r.getComponent(u.default).init(s,!0)}},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"btn_shop"),this.onClickShop.bind(this))},t.prototype.onClickShop=function(){s.default.instance.createView(f.default.gameView.CollectActivityShopView)},t=o([m],t)}(r.default));i.default=C,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/CollectActivityConfig":"CollectActivityConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/ActivityOpenModel":"ActivityOpenModel","../../prefab/ItemPrefab":"ItemPrefab"}],CollideUtil:[function(e,t,i){"use strict";cc._RF.push(t,"500e9RUWlpOh5I2GDBBla5S","CollideUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=10),this.maxIterations=e,this.innerPolygonCoef=[],this.outerPolygonCoef=[];for(var t=0;t<=this.maxIterations;t++){var i=4<<t;this.innerPolygonCoef[t]=.5/Math.cos(4*Math.acos(0)/i),this.outerPolygonCoef[t]=.5/Math.pow(Math.cos(2*Math.acos(0)/i),2)}}return e.prototype.collide=function(e,t,i,n,o,a){var s=0,r=a*a*(o*o+0)*(o*o+0)*(o*o+0),c=a*o*(0*(n.y-e.y)+o*(n.x-e.x))-0*(o*(n.y-e.y)-0*(n.x-e.x)),l=0*a*(0*(n.y-e.y)+o*(n.x-e.x))+o*(o*(n.y-e.y)-0*(n.x-e.x)),d=t,f=a*o*(d*i*0-o*s*i)-0*(o*(d*i)+0*s*i),g=0*a*(d*i*0-o*s*i)+o*(o*(d*i)+0*s*i);return(t=a*o*(0*s+o*t)-0*(o*s-0*t))*l-(s=0*a*(0*s+o*d)+o*(o*s-0*d))*c<0&&(c=-c,l=-l),(t-c)*(t-c)+(s-l)*(s-l)<=r||((t+c)*(t+c)+(s+l)*(s+l)<=r||((f-c)*(f-c)+(g-l)*(g-l)<=r||((f+c)*(f+c)+(g+l)*(g+l)<=r||(c*(g-s)+l*(t-f)<=g*t-f*s&&l*(t+f)-c*(s+g)<=g*t-f*s||(c*(t-f)-l*(g-s)>f*(t-f)-g*(g-s)&&c*(t-f)-l*(g-s)<t*(t-f)-s*(g-s)&&(c*(g-s)+l*(t-f)-g*t+f*s)*(c*(g-s)+l*(t-f)-g*t+f*s)<=r*((t-f)*(t-f)+(s-g)*(s-g))||(c*(t+f)+l*(s+g)>-t*(t+f)-s*(s+g)&&c*(t+f)+l*(s+g)<f*(t+f)+g*(s+g)&&(l*(t+f)-c*(s+g)-g*t+f*s)*(l*(t+f)-c*(s+g)-g*t+f*s)<=r*((t+f)*(t+f)+(s+g)*(s+g))||((f-t-c)*(f-t-c)+(g-s-l)*(g-s-l)<=r?this.iterate(c,l,f,g,-t,-s,r):(f+t-c)*(f+t-c)+(g+s-l)*(g+s-l)<=r?this.iterate(c,l,t,s,f,g,r):(t-f-c)*(t-f-c)+(s-g-l)*(s-g-l)<=r?this.iterate(c,l,-f,-g,t,s,r):(-t-f-c)*(-t-f-c)+(-s-g-l)*(-s-g-l)<=r?this.iterate(c,l,-t,-s,-f,-g,r):t*l-s*c<t*g-s*f&&Math.abs(f*l-g*c)<g*t-f*s?f*l-g*c>0?this.iterate(c,l,f,g,-t,-s,r):this.iterate(c,l,t,s,f,g,r):t*c+s*l>t*(f-t)+s*(g-s)&&t*c+s*l<t*(f+t)+s*(g+s)&&(t*l-s*c-g*t+f*s)*(t*l-s*c-g*t+f*s)<r*(t*t+s*s)?t*c+s*l>t*f+s*g?this.iterate(c,l,t,s,f,g,r):this.iterate(c,l,f,g,-t,-s,r):(f*l-g*c<0&&(c=-c,l=-l),f*c+g*l>-f*(t+f)-g*(s+g)&&f*c+g*l<f*(f-t)+g*(g-s)&&(f*l-g*c-g*t+f*s)*(f*l-g*c-g*t+f*s)<r*(f*f+g*g)&&(f*c+g*l>-f*t-g*s?this.iterate(c,l,f,g,-t,-s,r):this.iterate(c,l,-t,-s,-f,-g,r))))))))))},e.prototype.iterate=function(e,t,i,n,o,a,s){for(var r=1;r<=this.maxIterations;r++){var c=(i+o)*this.innerPolygonCoef[r],l=(n+a)*this.innerPolygonCoef[r],d=e-c,f=t-l;if(d*d+f*f<=s)return!0;var g=o-c,h=a-l;if(d*g+f*h>=0&&d*g+f*h<=g*g+h*h&&(f*g-d*h>=0||s*(g*g+h*h)>=(f*g-d*h)*(f*g-d*h)))return!0;var u=i-c,p=n-l;if(d*u+f*p>=0&&d*u+f*p<=u*u+p*p&&(f*u-d*p<=0||s*(u*u+p*p)>=(f*u-d*p)*(f*u-d*p)))return!0;var m=(i+c)*this.outerPolygonCoef[r],C=(n+l)*this.outerPolygonCoef[r];if((m-e)*(m-e)+(C-t)*(C-t)<s)o=c,a=l;else{var _=c-m+c,v=l-C+l;if(!((_-e)*(_-e)+(v-t)*(v-t)<s)){var y=m-c,b=C-l;if(f*y-d*b<=0||s*(y*y+b*b)>(f*y-d*b)*(f*y-d*b))if(d*y+f*b>0){if(Math.abs(d*y+f*b)<=y*y+b*b||(e-m)*(i-m)+(t-C)*(n-C)>=0){o=c,a=l;continue}}else if(-(d*y+f*b)<=y*y+b*b||(e-_)*(o-_)+(t-v)*(a-v)>=0){i=c,n=l;continue}return!1}i=c,n=l}}return!1},e}(),o=function(){function e(){this._rectA=new cc.Rect,this._rectB=new cc.Rect}return e.prototype.collide=function(e,t,i,n,o,a){return this._rectA.x=e.x-t,this._rectA.y=e.y-t*i,this._rectA.width=2*t,this._rectA.height=t*i*2,this._rectB.x=n.x-o,this._rectB.y=n.y-o*a,this._rectB.width=2*o,this._rectB.height=o*a*2,this._rectA.intersects(this._rectB)},e.prototype.collideByPoint=function(e,t,i,n){var o=new cc.Rect;return o.x=e.x-t,o.y=e.y-t*i,o.width=2*t,o.height=t*i*2,o.contains(n)},e}(),a=function(){function e(){this._ellipseCollision=new n,this._rectCollision=new o}return e.getInstance=function(){return e._obj},e.prototype.collide=function(e,t,i,n){var o=.5*t.width,a=t.height/t.width,s=.5*n.width,r=n.height/n.width;return this._rectCollision.collide(e,o,a,i,s,r)},e.prototype.ellipseCollide=function(e,t,i,n){var o=.5*t.width,a=t.height/t.width,s=.5*n.width,r=n.height/n.width;return this._ellipseCollision.collide(e,o,a,i,s,r)},e.prototype.rectCollide=function(e,t,i,n){return this._rectCollision.collide(e,.5*t.width,t.height/t.width,i,.5*n.width,n.height/n.width)},e.prototype.rectCollideByPoint=function(e,t,i){return this._rectCollision.collideByPoint(e,.5*t.width,t.height/t.width,i)},e._obj=new e,e}();i.CollisionUtil=a,cc._RF.pop()},{}],ColorConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7379dx7Pr5CZqDVeQ8xxEqO","ColorConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("./GameConst"),a=function(){function e(){}return e.getEquipQualityColor=function(e){try{return this.hexToColor(this.equipQualityColor[e])}catch(t){n.Logger.error("getEquipQualityColor==",e)}},e.getKuangQualityColor=function(e){try{return this.hexToColor(this.kuangColor[e])}catch(t){n.Logger.error("getKuangQualityColor==",e)}},e.getColor=function(e){return this.kuangColor[e]},e.getOccupationColor=function(e){return void 0===e&&(e=0),this.hexToColor(this.occupationColor[e])},e.getQualityHexColor=function(e){void 0===e&&(e=o.GameConst.QUALITY.WHITE);try{return this.qualityColor[e]}catch(t){n.Logger.error("getQualityHexColor==",e)}},e.getQualityColor=function(e){return void 0===e&&(e=o.GameConst.QUALITY.WHITE),e>=0?this.hexToColor(this.qualityColor[e]):this.hexToColor("#7a7a7a")},e.getExpBallBackQualityColor=function(e){return void 0===e&&(e=o.GameConst.QUALITY.WHITE),this.hexToColor(this.ExpBallBackColor[e])},e.getRoleColor=function(e){return this.hexToColor(this.roleColor[e])},e.getRoleColor1=function(e){return this.occupationColor[e]},Object.defineProperty(e,"RedColor",{get:function(){return this.hexToColor("#ff0000")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RedColor1",{get:function(){return this.hexToColor("#fa3a28")},enumerable:!0,configurable:!0}),e.getFuWenColor=function(e){return void 0===e&&(e=0),this.hexToColor(this.RuneColor[e-2])},Object.defineProperty(e,"YellowColor",{get:function(){return this.hexToColor("#FFC31f")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WhiteColor",{get:function(){return cc.Color.WHITE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GrayColor",{get:function(){return this.hexToColor("#655E5E")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GreenColor",{get:function(){return cc.Color.BLACK.fromHEX(this.GreenHexColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WhiteHexColor",{get:function(){return"#ffffff"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GreenHexColor",{get:function(){return"#00ff00"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RedHexColor",{get:function(){return"#ff0000"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShenGreenColor",{get:function(){return"#0ae797"},enumerable:!0,configurable:!0}),e.hexToColor=function(e){return cc.Color.BLACK.fromHEX(e)},Object.defineProperty(e,"CommonTabSelected",{get:function(){return this.hexToColor("#fedfa7")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"commonTabSelectNo",{get:function(){return this.hexToColor("#d3caba")},enumerable:!0,configurable:!0}),e.qualityColor=["#FFFFFF","#0CFF00","#00C0FF","#F702F4","#FF6C00","#FFD87F"],e.roleColor=["#FFFFFF","#0CFF00","#00C0FF","#F702F4"],e.redColor="df1500",e.equipQualityColor=["#FFFFFF","#0CFF00","#00C0FF","#F702F4","#df1500"],e.kuangColor=["#0CFF00","#00C0FF","#F702F4","#FF6C00"],e.occupationColor=["#FFFFFF","#ff580e","#41a3ff","#ff5ffd"],e.RuneColor=["#00C0FF","#F702F4","#FF6C00"],e.ExpBallBackColor=["#FFFFFF","#0CFF00","#003b92","#6a008a","#8a2a00"],e}();i.ColorConfig=a,cc._RF.pop()},{"../../engine/Logger":"Logger","./GameConst":"GameConst"}],ComEquipView:[function(e,t,i){"use strict";cc._RF.push(t,"fa8e4H2aAVNeZMebGE+vvdU","ComEquipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../prefab/ItemPrefab"),r=e("../config/ITemsConfig"),c=e("../model/ItemInfoModel"),l=e("../network/SocketClient"),d=e("../model/RoleInfoModel"),f=e("../config/ColorConfig"),g=e("../config/GameConst"),h=e("../config/WordConfig"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.needItemNum=0,t.haveNum=0,t.currSeletEquipList=[],t}return n(t,e),t.prototype.onInitChild=function(e){this.config=e},t.prototype.onShow=function(){var e=this,t=this.getChild(this.node,"view/itemPrefab");if(this.config.kind==g.GameConst.ITEM_KIND.EQUIP){var i=c.default.createDingZhiEquip(this.config.itemid);t.getComponent(s.default).init(i,!0)}else{var n=r.ITemsConfig.getITemsConfigById(this.config.itemid);t.getComponent(s.default).init(n,!0)}this.costItem=this.findChild(this.node,"view/costItem").getComponent(s.default),this.seletEquip=this.findChild(this.node,"view/seletEquip").getComponent(s.default),this.seletEquip.node.active=!1,this.seletPanal=this.node.getChildByName("seletPanal"),this.seletItemPrefab=this.seletPanal.getChildByName("item"),this.seletItemPrefab.active=!1,this.seletPanal.active=!1,this.seletPanalScrollView=this.seletPanal.getChildByName("scrollView").getComponent(cc.ScrollView),this.onAddEvent(this.findChild(this.seletPanal,"darkLayer"),this.hideSeletPanal.bind(this)),this.onAddEvent(this.findChild(this.seletPanal,"btn_guanbi"),this.hideSeletPanal.bind(this)),this.onAddEvent(this.findChild(this.node,"view/btnBuy"),this.onClickComplex.bind(this)),this.onAddEvent(this.findChild(this.node,"view/but_xuanzhecailiao"),function(){e.showSeletPanal()}),this.currSeletEquipList=[],this.seletModel=null,this.refreshNum(),this.refresh()},t.prototype.refresh=function(){if(this.config&&this.config.equip){var e=this.config.equip[0][1];this.findChild(this.node,"view/currSeletNum").getComponent(cc.Label).string=this.currSeletEquipList.length+"/"+e,e==this.currSeletEquipList.length?this.findChild(this.node,"view/currSeletNum").color=f.ColorConfig.GreenColor:this.findChild(this.node,"view/currSeletNum").color=f.ColorConfig.RedColor}if(this.seletModel?(this.seletEquip.node.active=!0,this.seletEquip.init(this.seletModel),this.findChild(this.node,"view/nonEquip").active=!1):this.findChild(this.node,"view/nonEquip").active=!0,this.config.item){this.costItem.node.active=!0;for(var t="",i=(e=0,0);i<this.config.item.length;i++){var n=this.config.item[i];t=n[0],e=n[1]}var o=r.ITemsConfig.getITemsConfigById(t);this.needItemNum=e,this.haveNum=c.default.getItemAmount(t),this.costItem.init(c.default.create(g.GameConst.ITEM_KIND.ITEM,t,e,o.quality)),this.costItem.node.getChildByName("numTxt").getComponent(cc.Label).string=this.haveNum+"/"+this.needItemNum,this.haveNum<this.needItemNum?this.costItem.node.getChildByName("numTxt").color=f.ColorConfig.RedColor:this.costItem.node.getChildByName("numTxt").color=f.ColorConfig.GreenColor}else this.costItem.node.active=!1},t.prototype.refreshNum=function(){var e=this.node.getChildByName("view").getChildByName("costNode").getChildByName("txtCoin").getComponent(cc.Label),t=this.config.gold[1];e.string=t+"",d.default.instance.getCoin()>=t?e.node.color=f.ColorConfig.GreenColor:e.node.color=f.ColorConfig.RedColor},t.prototype.onClickComplex=function(){if(this.haveNum<this.needItemNum)h.WordConfig.showWord(60188);else{var e=this.config.equip[0][1];if(this.currSeletEquipList.length==e&&this.currSeletEquipList.indexOf(null)<=-1){for(var t=[],i=0;i<this.currSeletEquipList.length;i++)t[i]=this.currSeletEquipList[i].itemId;this.closeView(),l.default.sendComplex(this.config.id,1,t)}else h.WordConfig.showWord(60310)}},t.prototype.showSeletPanal=function(){this.seletPanalScrollView.scrollToLeft(),this.canSeletEquipList=this.getCanSeletEquip();var e=this.config.equip[0][1];if(this.currSeletEquipList.length<e){if(this.canSeletEquipList.length<=0)return void h.WordConfig.showWord(60310);this.seletPanal.active=!0,this.refreshSeletPanal()}},t.prototype.refreshSeletPanal=function(){this.seletPanalScrollView.content.removeAllChildren();for(var e=0;e<this.canSeletEquipList.length;e++){var t=cc.instantiate(this.seletItemPrefab);t.active=!0,t.getChildByName("currItem").getComponent(s.default).init(this.canSeletEquipList[e]),t.on(cc.Node.EventType.TOUCH_END,this.selet.bind(this,e)),t.getChildByName("value").getComponent(cc.Label).string=this.canSeletEquipList[e].getCurrBaseAddAttrValue()+"("+this.canSeletEquipList[e].getJiPinPersent()+"%)",t.getChildByName("value").color=f.ColorConfig.getQualityColor(this.canSeletEquipList[e].quality),this.seletPanalScrollView.content.addChild(t)}this.seletPanalScrollView.scrollToLeft()},t.prototype.selet=function(e){this.seletModel=this.canSeletEquipList[e],this.currSeletEquipList.push(this.canSeletEquipList[e]),this.hideSeletPanal(),this.refresh()},t.prototype.hideSeletPanal=function(){this.seletPanal.active=!1},t.prototype.getCanSeletEquip=function(){for(var e,t=[],i=0;i<this.currSeletEquipList.length;i++){(a=this.currSeletEquipList[i])&&t.push(a.itemId)}for(var n=0;n<this.config.equip.length;n++){e=this.config.equip[n][0]}var o=[];for(i=0;i<d.default.instance.itemInfoList.length;i++){var a;(a=d.default.instance.itemInfoList[i])&&(a.itemType==e&&!a.isLock&&a.gridId<0&&t.indexOf(a.itemId)<=-1&&!a.getIsEmbedRune()&&o.push(a))}return o},t=o([p],t)}(a.default));i.default=m,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],CommonAlertView:[function(e,t,i){"use strict";cc._RF.push(t,"99c93GN00pEjZwwhUuOrk4G","CommonAlertView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnDic={},t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e){this.objData=e,this.callback=this.objData.fun,this.ext=this.objData.ext},t.prototype.setTip=function(e){this.tip&&(this.tip.getComponent(cc.RichText).string=e)},t.prototype.onShow=function(){this.tip=this.findChild(this.node,"tip"),this.setTip(this.objData.txt),this.tipsCheck=this.findChild(this.node,"tipsCheck"),this.chkCheck=this.tipsCheck.getComponent(cc.Toggle),this.txtChkDesc=this.tipsCheck.getChildByName("txtChkDesc"),this.objData.chk?(this.tipsCheck.active=!0,this.txtChkDesc.getComponent(cc.Label).string=this.objData.chk):this.tipsCheck.active=!1,this.btnAgree=this.findChild(this.node,"mcBtns/btnAgree"),this.onAddEvent(this.btnAgree,this.onBtnAgree.bind(this)),this.btnCancel=this.findChild(this.node,"mcBtns/btnCancel"),this.onAddEvent(this.btnCancel,this.onBtnCancel.bind(this)),this.btnArr=[],this.btnArr.push(this.btnAgree),this.btnArr.push(this.btnCancel);var e=this.objData.arr?this.objData.arr:i.BTN_ARR;this.btnDic={};for(var t=0;t<this.btnArr.length;t++){var n=e[t],o=this.btnArr[t],a=-1;n?(o.active=!0,a=n.id):o.active=!1,this.btnDic[a]=o}},t.prototype.getBtnId=function(e){for(var t in this.btnDic)if(this.btnDic[t]==e)return parseInt(t);return-1},t.prototype.onBtnAgree=function(){if(this.callback){var e=this.chkCheck.isChecked;this.callback(this.getBtnId(this.btnAgree),e,this.ext)}this.closeView()},t.prototype.onBtnCancel=function(){if(this.callback){var e=this.chkCheck.isChecked;this.callback(this.getBtnId(this.btnCancel),e,this.ext)}this.closeView()},t.prototype.onDarkLayerClick=function(){this.callback&&this.callback(-1,this.chkCheck.isChecked,this.ext)},t.BTN_ARR=[{name:"\u786e\u5b9a",id:1},{name:"\u53d6\u6d88",id:2}],t=i=o([r],t)}(a.default));i.default=c,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase"}],CommonEvent:[function(e,t,i){"use strict";cc._RF.push(t,"6c52duc1NtKZqNZV9kK/zHe","CommonEvent"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.Event_LoadingProgress="Event_LoadingProgress",e.Event_ShowAnnouncementRed="Event_ShowAnnouncementRed",e.Event_AddDebugLog="Event_AddDebugLog",e.Event_LoadJsonConfigOK="Event_LoadJsonConfigOK",e.Event_FrameUpdate="Event_FrameUpdate",e.Event_RoleLevelUp="Event_RoleLevelUp",e.Event_SocketRespMsg="Event_SocketRespMsg",e.Event_WxZhuanduanTypeChange="Event_WxZhuanduanTypeChange",e.Event_addChat="Event_addChat",e.Event_addChatRoom="Event_addChatRoom",e.Event_ADD_ZHANSHI="Event_ADD_ZHANSHI",e.Event_SwitchMapStart="Event_SwitchMapStart",e.Event_SwitchMapSuc="Event_SwitchMapSuc",e.Event_MapStatistic="Event_MapStatistic",e.Event_UserInfoRefresh="Event_UserInfoRefresh",e.Event_SkillRefresh="Event_SkillRefresh",e.Event_RolePrefabfresh="Event_RolePrefabfresh",e.Event_RoleRevive="Event_RoleRevive",e.Event_StrengthSwitch="Event_StrengthSwitch",e.Event_StrengthSelIndex="Event_StrengthSelIndex",e.Event_userinfoViewSwitch="Event_userinfoViewSwitch",e.Event_ad_end="Event_ad_end",e.Event_AdInfoUpdate="Event_AdInfoUpdate",e.Event_req_shop_fresh_info="Event_req_shop_fresh_info",e.Event_SdkInit="Event_SdkInit",e.Event_JingJie="Event_JingJie",e.Event_Make_Equip="Event_Make_Equip",e.Event_has_reward="Event_has_reward",e.Event_Setting="Event_Setting",e.Event_FightChange="Event_FightChange",e.Event_ChargeActivity="Event_ChargeActivity",e.Event_ChargeActivityOk="Event_ChargeActivityOk",e.Event_Buy_Suc="Event_Buy_Suc",e.Event_SettingBgClick="Event_SettingBgClick",e.Event_ChangeWorld="Event_ChangeWorld",e.Event_JingJie_Change="Event_JingJie_Change",e.Event_FangShi_Change="Event_FangShi_Change",e.Event_ZHENBAOFangShi_Change="Event_ZHENBAOFangShi_Change",e.Event_FangShi_Exchange_Change="Event_FangShi_Exchange_Change",e.Event_DisCount_Change="Event_DisCount_Change",e.Event_SkillEffectView_Change="Event_SkillEffectView_Change",e.Event_JumpToSkillEffectView="Event_JumpToSkillEffectView",e.Event_RefreshShenbin="Event_RefreshShenbin",e.Event_Refresh_Recycle="Event_Refresh_Recycle",e.Event_Refresh_Post="Event_Refresh_Post",e.Event_FeiYou_BindSuc="Event_FeiYou_BindSuc",e.Event_AutoRobotBgClick="Event_AutoRobotBgClick",e.Event_SdkGetInfo="Event_SdkGetInfo",e.Event_Auto_Medicine="Event_Auto_Medicine",e.Event_Refresh_EquipRank="Event_Refresh_EquipRank",e.Event_Refresh_PowerRank="Event_Refresh_PowerRank",e.Event_Refresh_Mine="Event_Refresh_Mine",e.Event_Change_MineClass="Event_Change_MineClass",e.Event_Refresh_PersonalMine="Event_Refresh_PersonalMine",e.Event_Change_ZhuZhan="Event_Change_ZhuZhan",e.Event_Change_HuiShou="Event_Change_HuiShou",e.Event_TopUp_Redot="Event_TopUp_Redot",e.Event_SHOW_GIFT="Event_SHOW_GIFT",e.Event_Show_Fangshi_Gift_RedDot="Event_Show_Fangshi_Gift_RedDot",e.Event_Hide_Fangshi_Gift_RedDot="Event_Hide_Fangshi_Gift_RedDot",e.Event_Auto_Robot_Setting="Event_Auto_Robot_Setting",e.Event_intensifyRefine_Refresh="Event_intensifyRefine_Refresh",e.Event_intensify_Refresh="Event_intensify_Refresh",e.Event_JumpToFangshi="Event_JumpToFangshi",e.Event_Refresh_DaliyReward="Event_Refresh_DaliyReward",e.Event_LegendTaskModel="Event_LegendTaskModel",e.Event_HolidayMonster="Event_HolidayMonster",e.Event_show_fund="Event_show_fund",e.Event_Milu="Event_Milu",e.Event_Milu_Tool="Event_Milu_Tool",e.Event_Milu_Tool_Suc="Event_Milu_Tool_Suc",e.Event_ShengDanDiscount="Event_ShengDanDiscount",e.Event_YuandanDiscount="Event_YuandanDiscount",e.Event_ActivityShop="Event_ActivityShop",e.Event_ActivityStatus="Event_ActivityStatus",e.Event_ActivitySwithAct="Event_ActivitySwithTab",e.Event_Item_update="Event_Item_update",e.Event_JumpSettingView="Event_JumpSettingView",e.Event_CarnivalInfoChange="Event_CarnivalInfoChange",e.Event_UltimateGiftChange="Event_UltimateGiftChange",e.Event_ExoticExploration_Refresh="Event_ExoticExploration_Refresh",e.Event_ExoticExploration_StartEx="Event_ExoticExploration_StartEx",e.Event_FuGuiGameModel="Event_FuGuiGameModel",e.Event_NewYearTarget="Event_NewYearTarget",e.Event_NextRound="Event_NextRound",e.Event_c_arena_info="Event_c_arena_info",e.Event_up_c_arena_info="Event_up_c_arena_info",e.Event_go_to_PaiHangBang="Event_go_to_PaiHangBang",e.Event_GameUIVIew_Tab_Switch="Event_GameUIVIew_Tab_Switch",e.Event_Pk_log="Event_Pk_log",e.Event_refresh_starInfo="Event_refresh_starInfo",e.Event_Star_Select="Event_Star_Select",e.Event_Star_Level="Event_Star_Level",e.Event_Up_Level="Event_Up_Level",e.Event_refresh_starPlanetInfo="Event_refresh_starPlanetInfo",e.Event_refresh_starPage="Event_refresh_starPage",e.Event_House_Info="Event_House_Info",e.Event_Pvp_start="Event_Pvp_start",e.Event_Pvp_End="Event_Pvp_End",e.Event_refresh_starSignRand="Event_refresh_starSignRand",e.Event_refresh_pickStarSign="Event_refresh_pickStarSign",e.Event_NewYearGift="Event_NewYearGift",e.Event_Redenvelope_State="Event_Redenvelope_State",e.Event_Redenvelope_Receive="Event_Redenvelope_Receive",e.Event_Redenvelope_Record="Event_Redenvelope_Record",e.Event_Title_update="Event_Title_update",e.Event_Red_Point="Event_Red_Point",e.Event_delect_time="Event_delect_time",e.Event_MaFa_Task_Award="Event_MaFa_Task_Award",e.Event_MaFa_refresh="Event_MaFa_refresh",e.Event_Gift_refresh="Event_Gift_refresh",e.Event_GrowFund_refresh="Event_GrowFund_refresh",e.Event_SkyPass_refresh="Event_SkyPass_refresh",e.Event_SkyPass_rank_refresh="Event_SkyPass_rank_refresh",e.Event_SkyPass_sweep="Event_SkyPass_sweep",e.Event_SkyPass_buy_sweep_times="Event_SkyPass_buy_sweep_times",e.Event_SkyPass_level_info="Event_SkyPass_level_info",e.Event_SkyPass_score_refresh="Event_SkyPass_score_refresh",e.Event_SkyPass_fight_start="Event_SkyPass_fight_start",e.Event_SkyPass_shop_refresh="Event_SkyPass_shop_refresh",e.Event_SkyPass_skip="Event_SkyPass_skip",e.Event_CollectActivityShop_Refresh="Event_CollectActivityShop_Refresh",e.Event_SevenDayLogin_refresh="Event_SevenDayLogin_refresh",e.Event_FastKill_Refresh="Event_FastKill_Refresh",e.Event_MaFa_chengba_refresh="Event_MaFa_chengba_refresh",e.Event_EverydayLogin_refresh="Event_EverydayLogin_refresh",e.Event_GetBookInfo_refresh="Event_GetBookInfo_refresh",e.Event_GetBookCell_refresh="Event_GetBookCell_refresh",e.Event_StrategyInfo_refresh="Event_StrategyInfo_refresh",e.Event_StrategyAward_refresh="Event_StrategyAward_refresh",e.Event_ChangeActivity="Event_ChangeActivity",e.Event_Tuitu_refresh="Event_Tuitu_refresh",e.Event_WorldBossRank_Refresh="Event_WorldBossRank_Refresh",e.Event_WorldBoss_Refresh="Event_WorldBoss_Refresh",e.Event_Word_refresh="Event_Word_refresh",e.Event_JumpToView="Event_JumpToView",e.Event_JumpToBag="Event_JumpToBag",e.Event_JumpToGuild="Event_JumpToGuild",e.Event_JumpToGuildPvP="Event_JumpToGuildPvP",e.Event_menu_close="Event_menu_close",e.Event_baoshi_refresh="Event_baoshi_refresh",e.Event_baoshi_jnglian_refresh="Event_baoshi_jnglian_refresh",e.Event_Guild_Apply="Event_Guild_Apply",e.Event_Guild_CreateClose="Event_Guild_CreateClose",e.Event_Guild_Information="Event_Guild_Information",e.Event_Guild_Member_Management="Event_Guild_Member_Management",e.Event_Guild_UP_LIST_VIEW="Event_Guild_UP_LIST_VIEW",e.Event_Guild_UP_Apply_LIST="Event_Guild_UP_Apply_LIST",e.Event_Guild_DONATE_INFO="Event_Guild_DONATE_INFO",e.Event_Guild_ANNOUNCEMENT="Event_Guild_ANNOUNCEMENT",e.Event_Guild_UPDATE_DATING="Event_Guild_UPDATE_DATING",e.Event_Guild_UPDATE_SHOP="Event_Guild_UPDATE_SHOP",e.Event_Guild_UPDATE_SHOP_LEVEL_UP="Event_Guild_UPDATE_SHOP_LEVEL_UP",e.Event_Guild_UPDATE_SKILL="Event_Guild_UPDATE_SKILL",e.Event_Guild_Treasury_Info="Event_Guild_Treasury_Info",e.Event_Guild_Treasury_Log="Event_Guild_Treasury_Log",e.Event_Guild_Redenvelope_Info="Event_Guild_Redenvelope_Info",e.Event_Guild_Redenvelope_Rank="Event_Guild_Redenvelope_Rank",e.Event_Guild_Task_Info="Event_Guild_Task_Info",e.Event_Guild_UP_IFMT_INFOVIEW="Event_Guild_UP_IFMT_INFOVIEW",e.Event_Guild_ContinuousRecharge="Event_Guild_ContinuousRecharge",e.Event_MergeLuckyDrawView_Refresh="Event_MergeLuckyDrawView_Refresh",e.Event_MergeLuckyDrawView_Start31="Event_MergeLuckyDrawView_Start31",e.Event_MergeLuckyDrawView_Start36="Event_MergeLuckyDrawView_Start36",e.Event_UP_OptionalGiftBagView="Event_UP_OptionalGiftBagView",e.Event_UP_InvitationView="Event_UP_InvitationView",e.Event_SERVER_FIGHT="Event_SERVER_FIGHT",e.Event_CLIENT_FIGHT="Event_CLIENT_FIGHT",e.Event_puzzle_got_success="Event_puzzle_got_success",e.Event_consumerFeedback_statusChange="Event_consumerFeedback_statusChange",e.Event_consumerFeedbackMerged_statusChange="Event_consumerFeedback_got_success",e.Event_BaGua_refresh="Event_BaGua_refresh",e.Event_BaGua_Intensify="Event_BaGua_Intensify",e.Event_BaGua_reback="Event_BaGua_reback",e.Event_BaGua_compound="Event_BaGua_compound",e.Event_BaGua_select_equip="Event_BaGua_select_equip",e.Event_auctionGoodsTime="Event_auctionGoodsTime",e.Event_auctionGoodsRefashAll="Event_auctionGoodsRefashAll",e.Event_auctionShelvesState="Event_auctionShelvesState",e.Event_autionSingleGoods="Event_autionSingleGoods",e.Event_auction_log="Event_auction_log",e.Event_c_auction_bid_success="Event_c_auction_bid_success",e.Event_c_auction_buy_success="Event_c_auction_buy_success",e.Event_game_ui_top_top="Event_game_ui_top_top",e.Event_c_task_reward_success="Event_c_task_reward_success",e.Event_c_all_task_info="Event_c_all_task_info",e.Event_c_task_liveness_reward="Event_c_task_liveness_reward",e.Event_c_task_liveness_info="Event_c_task_liveness_info",e.Event_addMoreMenuShow="Event_addMoreMenuShow",e.Event_Equip="Event_Equip",e.Event_Up_Costume="Event_Up_Costume",e.Event_skillIntemChange="Event_skillIntemChange",e.Event_TuJian_Active="Event_TuJian_Active",e.Event_Battlefield_End="Event_Battlefield_End",e.Event_Mine_Plunder="Event_Mine_Plunder",e.Event_Mine_Report="Event_Mine_Report",e.Event_Mine_Report_ID="Event_Mine_Report_ID",e.Event_AppellationView="Event_AppellationView",e.Event_AppellationView_UP="Event_AppellationView_UP",e.Event_ShenGong="Event_ShenGong",e.Event_Guild_Pvp_Move="Event_Guild_Pvp_Move",e.Event_Guild_Pvp_End="Event_Guild_Pvp_End",e.Event_Guild_Pvp_Enter="Event_Guild_Pvp_Enter",e.Event_Task_Sucess_Finish="Event_Task_Sucess_Finish",e.Event_Task_UP="TASK_UP",e.Event_LIBAO_RESH="Event_LIBAO_RESH",e.Event_ZUIQIANG_ITEM_RESH="Event_ZUIQIANG_ITEM_RESH",e.Event_USER_LVVEL_RESH="Event_USER_LVVEL_RESH",e.Event_GOTO_TIANGUANLAOREN="Event_GOTO_TIANGUANLAOREN",e.Event_XIANSHI_LIBAO_RUSH="Event_XIANSHI_LIBAO_RUSH",e.Event_XIANSHI_ADD_LIBAO_RUSH="Event_XIANSHI_ADD_LIBAO_RUSH"}(i.CommonEvent||(i.CommonEvent={})),cc._RF.pop()},{}],ComoensationView:[function(e,t,i){"use strict";cc._RF.push(t,"94f01eN0AZErbLqQ1QN41fx","ComoensationView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/UIManager"),r=e("../config/ViewConfig"),c=e("../utils/MusicHelper"),l=e("../utils/UIHelper"),d=e("../config/WordConfig"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wordList=[60149,60150],t.resourceList=["",d.WordConfig.getWord(60544),d.WordConfig.getWord(60517),d.WordConfig.getWord(60775),d.WordConfig.getWord(60757)],t}return n(t,e),t.prototype.onInitChild=function(e){this.findChild(this.node,"view/panel/mid").removeAllChildren(),this.list=e},t.prototype.onShow=function(){var e=this;this.item=this.findChild(this.node,"item"),this.item.active=!1,s.default.instance.setTopUI(r.default.gameView.ComoensationView),this.findChild(this.node,"view/panel/bottom/btnSure").on(cc.Node.EventType.TOUCH_END,function(){c.MusicHelper.play_click(),e.closeView()});for(var t=0;t<this.list.length;t++){var i=cc.instantiate(this.item);i.active=!0,this.findChild(this.node,"view/panel/mid").addChild(i),i.getChildByName("tip").getComponent(cc.Label).string=d.WordConfig.getWord(this.wordList[this.list[t].activeType-1]);for(var n="",o=this.list[t].itemlist,a=0;a<o.length;a++)n+=this.resourceList[o[a].type]+"+"+l.UIHelper.tranNumber(o[a].num)+"\n";i.getChildByName("txtDesc").getComponent(cc.Label).string=n}},t=o([g],t)}(a.default));i.default=h,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper"}],ComplexConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cca4fUnnT1PuI+ftm/w7cSX","ComplexConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.itemid=e.itemid,i.name=e.name,i.main_type=e.main_type,i.sub_type=e.sub_type,i.item=e.item,i.gold=e.gold,i.kind=e.kind,i.equip=e.equip,i.comtype=e.comtype,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id==e&&(t=i)}),t},t.getConfigByType=function(e,t){void 0===t&&(t=0);var i=[];return this.configMap.forEach(function(n,o){n.main_type==e&&(t<=0?i.push(n):t==n.sub_type&&i.push(n))}),i},t.Config_Name="composeConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ComplexConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ComplexView:[function(e,t,i){"use strict";cc._RF.push(t,"508a0WfmBlP1LuVs+681HaI","ComplexView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/ComplexConfig"),r=e("../prefab/ItemPrefab"),c=e("../config/ITemsConfig"),l=e("../utils/MusicHelper"),d=e("../../engine/UIManager"),f=e("../config/ViewConfig"),g=e("../model/ItemInfoModel"),h=e("../../engine/Logger"),u=e("../config/ColorConfig"),p=e("../model/RoleInfoModel"),m=e("../../engine/ProtoConfig"),C=e("../config/GameConst"),_=e("../config/EquipConfig"),v=e("../utils/UIHelper"),y=e("../config/WordConfig"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainTabSpriteFrame=[],t.mainType=0,t.subType=0,t.tempList=[],t.configList=[],t.noData=!1,t.costItemList=[],t.curScrollType=0,t}return n(t,e),t.prototype.onInitChild=function(e,t){e||t?(this.model=e,this.config=t||c.ITemsConfig.getITemsConfigById(this.model.itemType),1==this.config.compose_type?(this.mainType=0,this.subType=p.default.instance.occupation):2==this.config.compose_type?(this.mainType=1,this.subType=0):3==this.config.compose_type?(this.mainType=2,this.subType=0):4==this.config.compose_type&&(this.mainType=3,this.subType=0)):this.noData=!0},t.prototype.onEnable=function(){},t.prototype.onShow=function(){this.complexItem=this.findChild(this.node,"view/itemScrollView/view/content/complexItem"),this.complexItem.active=!1;for(var e=0;e<5;e++){if(this.findChild(this.node,"view/tabScrollView/view/content/btnTab"+e).on(cc.Node.EventType.TOUCH_END,this.onClickBtnTab.bind(this,e)),0==e)for(var t=1;t<4;t++){this.findChild(this.node,"view/tabScrollView/view/content/btnSubTab"+t).on(cc.Node.EventType.TOUCH_END,this.onClickSubTab.bind(this,e,t))}}this.refreshMainTab(),this.refreshType(),this.refreshSubTab()},t.prototype.onSocketRespMsg=function(e,t){e==m.ProtoConfig.c_seq_compose?this.refreshType():e!=m.ProtoConfig.c_req_equip&&e!=m.ProtoConfig.c_special_ring_compose||this.refreshMainTab()},t.prototype.onClickBtnTab=function(e){this.mainType=e,0!=this.mainType&&(this.subType=0),this.refreshMainTab()},t.prototype.refreshMainTab=function(){h.Logger.log("this.mainType===",this.mainType);for(var e=0;e<4;e++)this.findChild(this.node,"view/tabScrollView/view/content/btnSub"+(1001+e)).active=!1;if(4==this.mainType){var t=void 0;for(e=0;e<4;e++){var i=this.findChild(this.node,"view/tabScrollView/view/content/btnSub"+(1001+e));switch(e){case 0:(t=p.default.instance.getEquipModelByGrid(C.TeJie.SHENLI))&&(i.active=!0,this.findChild(i,"name").getComponent(cc.Label).string=t.getConfig().name,this.onAddEvent(i,this.onClickTeJie.bind(this,t)));break;case 1:(t=p.default.instance.getEquipModelByGrid(C.TeJie.HUSHEN))&&(i.active=!0,this.findChild(i,"name").getComponent(cc.Label).string=t.getConfig().name,this.onAddEvent(i,this.onClickTeJie.bind(this,t)));break;case 2:(t=p.default.instance.getEquipModelByGrid(C.TeJie.MABI))&&(i.active=!0,this.findChild(i,"name").getComponent(cc.Label).string=t.getConfig().name,this.onAddEvent(i,this.onClickTeJie.bind(this,t)));break;case 3:(t=p.default.instance.getEquipModelByGrid(C.TeJie.FUHUO))&&(i.active=!0,this.findChild(i,"name").getComponent(cc.Label).string=t.getConfig().name,this.onAddEvent(i,this.onClickTeJie.bind(this,t)))}}null==p.default.instance.getEquipModelByGrid(C.TeJie.SHENLI)&&null==p.default.instance.getEquipModelByGrid(C.TeJie.HUSHEN)&&null==p.default.instance.getEquipModelByGrid(C.TeJie.MABI)&&null==p.default.instance.getEquipModelByGrid(C.TeJie.FUHUO)&&v.UIHelper.showTip(y.WordConfig.getWord(61274))}for(e=0;e<5;e++){var n=this.findChild(this.node,"view/tabScrollView/view/content/btnTab"+e);e==this.mainType?n.getComponent(cc.Sprite).spriteFrame=this.mainTabSpriteFrame[1]:n.getComponent(cc.Sprite).spriteFrame=this.mainTabSpriteFrame[0]}if(0==this.mainType)for(var o=1;o<4;o++){this.findChild(this.node,"view/tabScrollView/view/content/btnSubTab"+o).active=!0}else for(o=1;o<4;o++){this.findChild(this.node,"view/tabScrollView/view/content/btnSubTab"+o).active=!1}this.refreshType()},t.prototype.refreshSubTab=function(){for(var e=1;e<4;e++){var t=this.findChild(this.node,"view/tabScrollView/view/content/btnSubTab"+e);this.subType==e?t.color=u.ColorConfig.hexToColor("#EAA700"):t.color=cc.Color.WHITE}},t.prototype.onClickSubTab=function(e,t){this.mainType=e,this.subType=t,l.MusicHelper.play_click(),this.refreshSubTab(),this.refreshType()},t.prototype.onClickTeJie=function(e){e?d.default.instance.createView(f.default.gameView.SpecialEquipComplexView,null,e):v.UIHelper.showTip(y.WordConfig.getWord(61274))},t.prototype.refreshType=function(){if(!0!==this.noData){var e=s.ComplexConfig.getConfigByType(this.mainType+1,this.subType);this.configList=e;for(var t=0;t<this.tempList.length;t++)this.tempList[t].destroy();for(t=0;t<this.costItemList.length;t++)this.costItemList[t].destroy();this.costItemList=[],this.tempList=[];for(t=0;t<e.length;t++){var i=e[t],n=void 0;n=cc.instantiate(this.complexItem),this.tempList.push(n),n.parent=this.complexItem.parent,n.active=!0;var o=this.getChild(n,"itemPrefab");if(i.kind==C.GameConst.ITEM_KIND.EQUIP){var a=g.default.createDingZhiEquip(i.itemid,C.GameConst.QUALITY.ORANGE);o.getComponent(r.default).init(a,!0)}else{var l=c.ITemsConfig.getITemsConfigById(i.itemid);o.getComponent(r.default).init(l,!0)}n.getChildByName("btnComplex").on(cc.Node.EventType.TOUCH_END,this.onClickComplex.bind(this,t));var d=n.getChildByName("costNode").getChildByName("costItem");if(d.active=!1,i.item)for(var f=0;f<i.item.length;f++){var h=i.item[f],m=void 0;(m=cc.instantiate(d)).parent=d.parent,m.active=!0;var v=0,y=m.getChildByName("txtCost").getComponent(cc.Label);if(h[2]==C.GameConst.ITEM_KIND.EQUIP){var b=_.EquipConfig.getEquipConfigById(h[0]);y.string=b.name,y.node.color=u.ColorConfig.getQualityColor(C.GameConst.QUALITY.ORANGE)}else{var I=c.ITemsConfig.getITemsConfigById(h[0]);y.string=I.name,y.node.color=u.ColorConfig.getQualityColor(I.quality)}v=g.default.getItemAmount(h[0]),(M=m.getChildByName("num").getComponent(cc.Label)).string=" ("+v+"/"+h[1]+")",v<h[1]?M.node.color=u.ColorConfig.RedColor:M.node.color=u.ColorConfig.GreenColor}if(i.equip)for(f=0;f<i.equip.length;f++){h=i.equip[f],m=void 0;(m=cc.instantiate(d)).parent=d.parent,m.active=!0;var M;v=0,y=m.getChildByName("txtCost").getComponent(cc.Label),b=_.EquipConfig.getEquipConfigById(h[0]);y.string=b.name,y.node.color=u.ColorConfig.getQualityColor(C.GameConst.QUALITY.ORANGE);for(var w=0;w<p.default.instance.itemInfoList.length;w++){var k=p.default.instance.itemInfoList[w];h[0]==k.itemType&&k.itemKind==C.GameConst.ITEM_KIND.EQUIP&&k.gridId<0&&!k.isLock&&!k.getIsEmbedRune()&&v++}(M=m.getChildByName("num").getComponent(cc.Label)).string=" ("+v+"/"+h[1]+")",v<h[1]?M.node.color=u.ColorConfig.RedColor:M.node.color=u.ColorConfig.GreenColor}var S=n.getChildByName("GoldNum").getComponent(cc.Label);S.node.color=u.ColorConfig.GreenColor,S.string=""+i.gold[1],p.default.instance.getCoin()<i.gold[1]&&(S.node.color=u.ColorConfig.RedColor)}this.findChild(this.node,"view/itemScrollView").getComponent(cc.ScrollView).stopAutoScroll(),this.curScrollType!=this.mainType&&(this.findChild(this.node,"view/itemScrollView").getComponent(cc.ScrollView).scrollToTop(),this.curScrollType=this.mainType)}},t.prototype.onClickComplex=function(e){l.MusicHelper.play_click();var t=this.configList[e];2==t.comtype||4==t.comtype?d.default.instance.createView(f.default.gameView.ComEquipView,null,t):d.default.instance.createView(f.default.gameView.complexView,null,t)},o([M({type:[cc.SpriteFrame]})],t.prototype,"mainTabSpriteFrame",void 0),t=o([I],t)}(a.default);i.default=w,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/ComplexConfig":"ComplexConfig","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/ItemPrefab":"ItemPrefab","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper"}],ComponentBase:[function(e,t,i){"use strict";cc._RF.push(t,"99f25EpomRKSKNpWVYUb5cp","ComponentBase");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./EventManager"),s=e("./Logger"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){for(var e=0,t=this.node.getComponentsInChildren(cc.Label);e<t.length;e++){var i=t[e];i.font||(i.fontFamily="SimHei",i.enableUnderline||cc.sys.OS_IOS||(i.cacheMode=cc.Label.CacheMode.CHAR))}for(var n=0,o=this.node.getComponentsInChildren(cc.RichText);n<o.length;n++){var a=o[n];a.font||cc.sys.OS_IOS||(a.fontFamily="SimHei",a.cacheMode=cc.Label.CacheMode.CHAR)}},t.prototype.onReuse=function(){},t.prototype.onUnuse=function(){},t.prototype.onDisable=function(){this._dispose()},t.prototype.onDestroy=function(){this._dispose(!0)},t.prototype.findChild=function(e,t,i){void 0===i&&(i=!0);var n=t.split("/"),o=e;if(n)for(var a=0;a<n.length;++a)if(!(e=o=e.getChildByName(n[a])))return void(i&&s.Logger.warn("getChild ----------- "+t+"  parent is null"));return o},t.prototype.getChild=function(e,t,i){if(void 0===i&&(i=cc.Node),e)return i==cc.Node?this.findChild(e,t):this.findChild(e,t).getComponent(i);s.Logger.warn("getChild ----------- "+t+"  parent is null")},t.prototype._dispose=function(e){void 0===e&&(e=!1),this.node.stopAllActions(),this.unscheduleAllCallbacks(),a.EventManager.instance.clear(this,e)},t=o([c],t)}(cc.Component));i.default=l,cc._RF.pop()},{"./EventManager":"EventManager","./Logger":"Logger"}],CompoundView:[function(e,t,i){"use strict";cc._RF.push(t,"ecd22NrkiRNFIGXWxaEGZ4c","CompoundView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../prefab/ItemPrefab"),r=e("../config/ITemsConfig"),c=e("../utils/MusicHelper"),l=e("../model/ItemInfoModel"),d=e("../network/SocketClient"),f=e("../model/RoleInfoModel"),g=e("../config/ColorConfig"),h=e("../config/GameConst"),u=e("../config/WordConfig"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowValue=1,t.mainType=1,t.subType=0,t.tempList=[],t.maxNum=5,t}return n(t,e),t.prototype.onInitChild=function(e){this.config=e},t.prototype.onShow=function(){this.amountEditBox=this.getChild(this.node,"view/amountEditBox").getComponent(cc.EditBox);var e=this.getChild(this.node,"view/itemPrefab");if(this.config.kind==h.GameConst.ITEM_KIND.EQUIP){var t=l.default.createDingZhiEquip(this.config.itemid);e.getComponent(s.default).init(t,!0)}else{var i=r.ITemsConfig.getITemsConfigById(this.config.itemid);e.getComponent(s.default).init(i,!0)}var n=this.config.item[0],o=n[0],a=n[1];this.needId=o;r.ITemsConfig.getITemsConfigById(o);this.needNum=a;var c=l.default.getItemAmount(o);this.maxNum=Math.floor(c/a),this.myNum=c,this.maxNum<=0&&(this.maxNum=1),this.getChild(this.node,"view/btnDec").on(cc.Node.EventType.TOUCH_END,this.onClickReduce.bind(this,this.config)),this.getChild(this.node,"view/btnAdd").on(cc.Node.EventType.TOUCH_END,this.onClickIncrease.bind(this,this.config)),this.getChild(this.node,"view/btnMax").on(cc.Node.EventType.TOUCH_END,this.onClickMax.bind(this,this.config)),this.getChild(this.node,"view/btnBuy").on(cc.Node.EventType.TOUCH_END,this.onClickComplex.bind(this,this.config)),this.refreshNum()},t.prototype.refreshNum=function(){this.getChild(this.node,"view/amountEditBox").getComponent(cc.EditBox);var e=this.node.getChildByName("view").getChildByName("costNode").getChildByName("txtCoin").getComponent(cc.Label),t=this.config.gold[1]*this.nowValue;e.string=t+"",f.default.instance.getCoin()>=t?e.node.color=g.ColorConfig.GreenColor:e.node.color=g.ColorConfig.RedColor;var i=this.getChild(this.node,"view/txtNeedItem",cc.Label);i.string=this.needNum*this.nowValue+"",this.myNum>=this.needNum*this.nowValue?i.node.color=g.ColorConfig.GreenColor:i.node.color=g.ColorConfig.RedColor},t.prototype.onClickReduce=function(){c.MusicHelper.play_click();var e=this.getChild(this.node,"view/amountEditBox").getComponent(cc.EditBox);this.nowValue<=1||this.nowValue>this.maxNum||this.nowValue>1&&this.nowValue<=this.maxNum&&this.nowValue--,e.string=""+this.nowValue,this.refreshNum()},t.prototype.onClickComplex=function(){c.MusicHelper.play_click(),this.closeView();var e=this.getChild(this.node,"view/amountEditBox").getComponent(cc.EditBox),t=parseInt(e.string);t>0?d.default.sendComplex(this.config.id,t):u.WordConfig.showWord(60311)},t.prototype.onClickIncrease=function(){c.MusicHelper.play_click();var e=this.getChild(this.node,"view/amountEditBox").getComponent(cc.EditBox);this.nowValue>=1&&this.nowValue<this.maxNum?this.nowValue++:this.nowValue<1||(this.nowValue,this.maxNum),e.string=""+this.nowValue,this.refreshNum()},t.prototype.onClickMax=function(){c.MusicHelper.play_click(),this.nowValue=this.maxNum,this.getChild(this.node,"view/amountEditBox").getComponent(cc.EditBox).string=this.nowValue.toString(),this.refreshNum()},t.prototype.update=function(){var e=this.getChild(this.node,"view/amountEditBox").getComponent(cc.EditBox),t=parseInt(e.string);(t<1||t>this.maxNum)&&(t=1),this.nowValue=t,e.string=t.toString(),this.refreshNum()},t=o([m],t)}(a.default));i.default=C,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/MusicHelper":"MusicHelper"}],ConfigMgr:[function(e,t,i){"use strict";cc._RF.push(t,"f4e0eeanBVEkK2KhYfGWYA7","ConfigMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/ActivityCodeConfig"),o=e("../config/ActivityConfig"),a=e("../config/ActivitygiftConfig"),s=e("../config/ActivityRankConfig"),r=e("../config/ActivityShopConfig"),c=e("../config/ActivitytimeConfig"),l=e("../config/AiringConfig"),d=e("../config/AppellationConfig"),f=e("../config/AppraisalConfig"),g=e("../config/ArenaRankRewardConfig"),h=e("../config/ArenaWeekRewardConfig"),u=e("../config/BagConfig"),p=e("../config/BaGuaComposeConfig"),m=e("../config/BaGuaEquipConfig"),C=e("../config/BaGuaExchangeConfig"),_=e("../config/BaGuaRefineConfig"),v=e("../config/BaGuaSkillConfig"),y=e("../config/BaGuaStrongConfig"),b=e("../config/BaGuaSuitConfig"),I=e("../config/BestrongernConfig"),M=e("../config/BuffConfig"),w=e("../config/CarnivalConfig"),k=e("../config/CarvinalRewardConfig"),S=e("../config/CarvinalSurpriceConfig"),P=e("../config/ChaozhigiftConfig"),E=e("../config/ChaozhigifttypeConfig"),L=e("../config/ChargegiftConfig"),T=e("../config/ChiXueMoJianConfig"),R=e("../config/ChongZhiConfig"),N=e("../config/ChristmasterConfig"),B=e("../config/CollectActivityConfig"),A=e("../config/ComplexConfig"),G=e("../config/ContinuousRechargeConfig"),x=e("../config/CostumeConfig"),O=e("../config/DefaultConfig"),V=e("../config/DevilSealConfig"),j=e("../config/ElkRunConfig"),D=e("../config/EquipConfig"),F=e("../config/EquipGatherConfig"),H=e("../config/ExoticExplorationConfig"),U=e("../config/FailedJumpConfig"),W=e("../config/FangShopConfig"),q=e("../config/GoldsConfig"),z=e("../config/GrowFundConfig"),J=e("../config/GuideConfig"),Y=e("../config/GuildConfig"),Z=e("../config/GuildfightCityConfig"),K=e("../config/GuildfightLvlConfig"),X=e("../config/GuildfightRewardConfig"),Q=e("../config/GuildfightTimeConfig"),$=e("../config/HeroConfig"),ee=e("../config/HolidayConfig"),te=e("../config/IllustratedBooksConfig"),ie=e("../config/IllustratedBooksenhanceConfig"),ne=e("../config/IllustratedBooksshowConfig"),oe=e("../config/IntensifyBuffConfig"),ae=e("../config/IntensifyConfig"),se=e("../config/IntensifyRefineConfig"),re=e("../config/InvitationConfig"),ce=e("../config/ItemGiftConfig"),le=e("../config/ItemgoodsConfig"),de=e("../config/ITemsConfig"),fe=e("../config/JingJieConfig"),ge=e("../config/LegendaryThinkRewardConfig"),he=e("../config/LegendaryThinkTaskConfig"),ue=e("../config/MadelzhulingConfig"),pe=e("../config/MagicNameConfig"),me=e("../config/MapConfig"),Ce=e("../config/MaprecommendConfig"),_e=e("../config/MarfaGoalConfig"),ve=e("../config/MarfaKingConfig"),ye=e("../config/MarfaKingProConfig"),be=e("../config/MarfaOrderConfig"),Ie=e("../config/MedalConfig"),Me=e("../config/MedalmakeConfig"),we=e("../config/MergeLuckyDrawConfig"),ke=e("../config/MineConfig"),Se=e("../config/MineInfoConfig"),Pe=e("../config/MingYunZhiRenConfig"),Ee=e("../config/MonsterConfig"),Le=e("../config/MonsterHunterConfig"),Te=e("../config/NewFuncitonConfig"),Re=e("../config/NewYearGiftConfig"),Ne=e("../config/OptionalgiftConfig"),Be=e("../config/PlayerNameConfig"),Ae=e("../config/PostConfig"),Ge=e("../config/PuzzleConfig"),xe=e("../config/QuenchingCostConfig"),Oe=e("../config/RandomFuMoConfig"),Ve=e("../config/RandomFuMoEntryConfig"),je=e("../config/RebirthConfig"),De=e("../config/RuleConfig"),Fe=e("../config/RuneConfig"),He=e("../config/SevenDayLoginConfig"),Ue=e("../config/ShenbingGemAllConfig"),We=e("../config/ShenbingskillAllConfig"),qe=e("../config/ShenCiConfig"),ze=e("../config/ShihunfazhangConfig"),Je=e("../config/ShopAllConfig"),Ye=e("../config/ShopConfig"),Ze=e("../config/ShopRecoverConfig"),Ke=e("../config/SignBoardConfig"),Xe=e("../config/SkillBuffConfig"),Qe=e("../config/SkillConfig"),$e=e("../config/SkillEffConfig"),et=e("../config/SkinConfig"),tt=e("../config/SkyPassConfig"),it=e("../config/SkypassShopConfig"),nt=e("../config/SpecialRingConfig"),ot=e("../config/SpecialRingEffectConfig"),at=e("../config/StarAbilityConfig"),st=e("../config/StarAstrolabeConfig"),rt=e("../config/StarChainConfig"),ct=e("../config/StarExchangeConfig"),lt=e("../config/StarLevelConfig"),dt=e("../config/StorageConfig"),ft=e("../config/StrategyConfig"),gt=e("../config/StrategyXingXiuConfig"),ht=e("../config/SuperbskillConfig"),ut=e("../config/TaskConfig"),pt=e("../config/Task_boxConfig"),mt=e("../config/WorldbossawardConfig"),Ct=e("../config/WorldbosstaskConfig"),_t=e("../config/XianJiConfig"),vt=e("../config/XianshiLibaoConfig"),yt=e("../config/Xiaofeihuikuiconfig"),bt=e("../config/Xiaofeimubiaoconfig"),It=e("../config/Xilianexpendconfig"),Mt=e("../config/YaoShopConfig"),wt=e("../view/Discount/DisCountConfig");(function(e){function t(t,i){e.configs[t]=i}e.configs={},e.getJsonList=function(){return Object.keys(e.configs)},e.parse=function(t){for(var i in e.configs){var n=void 0;if(t){var o=t.getData(i);o&&(n=JSON.parse(o))}else{var a=cc.loader.getRes("json/"+i,cc.JsonAsset);a&&(n=a.json)}n&&e.configs[i]?e.configs[i](n):cc.warn("json/"+i,"\u52a0\u8f7d\u5931\u8d25")}},e.init=function(){t("HeroConfig",$.HeroConfig.json2Config.bind($.HeroConfig)),t("EquipConfig",D.EquipConfig.json2Config.bind(D.EquipConfig)),t("IntensifyConfig",ae.IntensifyConfig.json2Config.bind(ae.IntensifyConfig)),t("IntensifyBuffConfig",oe.IntensifyBuffConfig.json2Config.bind(oe.IntensifyBuffConfig)),t("MagicNameConfig",pe.MagicNameConfig.json2Config.bind(pe.MagicNameConfig)),t("RebirthConfig",je.RebirthConfig.json2Config.bind(je.RebirthConfig)),t("MapConfig",me.MapConfig.json2Config.bind(me.MapConfig)),t("MonsterConfig",Ee.MonsterConfig.json2Config.bind(Ee.MonsterConfig)),t("EquipGatherConfig",F.EquipGatherConfig.json2Config.bind(F.EquipGatherConfig)),t("RandomFuMoConfig",Oe.RandomFuMoConfig.json2Config.bind(Oe.RandomFuMoConfig)),t("RandomFuMoEntryConfig",Ve.RandomFuMoEntryConfig.json2Config.bind(Ve.RandomFuMoEntryConfig)),t("DefaultConfig",O.DefaultConfig.json2Config.bind(O.DefaultConfig)),t("shopConfig",Ye.ShopConfig.json2Config.bind(Ye.ShopConfig)),t("iTemsConfig",de.ITemsConfig.json2Config.bind(de.ITemsConfig)),t("shopAllConfig",Je.ShopAllConfig.json2Config.bind(Je.ShopAllConfig)),t("shopRecoverConfig",Ze.ShopRecoverConfig.json2Config.bind(Ze.ShopRecoverConfig)),t("yaoShopConfig",Mt.YaoShopConfig.json2Config.bind(Mt.YaoShopConfig)),t("BagConfig",u.BagConfig.json2Config.bind(u.BagConfig)),t("goldsConfig",q.GoldsConfig.json2Config.bind(q.GoldsConfig)),t("chongZhiConfig",R.ChongZhiConfig.json2Config.bind(R.ChongZhiConfig)),t("activityCodeConfig",n.ActivityCodeConfig.json2Config.bind(n.ActivityCodeConfig)),t("SkillConfig",Qe.SkillConfig.json2Config.bind(Qe.SkillConfig)),t("JingJieConfig",fe.JingJieConfig.json2Config.bind(fe.JingJieConfig)),t("guideConfig",J.GuideConfig.json2Config.bind(J.GuideConfig)),t("functionConfig",Te.NewFuncitonConfig.json2Config.bind(Te.NewFuncitonConfig)),t("Xilianexpendconfig",It.Xilianexpendconfig.json2Config.bind(It.Xilianexpendconfig)),t(A.ComplexConfig.Config_Name,A.ComplexConfig.json2Config.bind(A.ComplexConfig)),t(l.AiringConfig.Config_Name,l.AiringConfig.json2Config.bind(l.AiringConfig)),t(re.InvitationConfig.Config_Name,re.InvitationConfig.json2Config.bind(re.InvitationConfig)),t(H.ExoticExplorationConfig.Config_Name1,H.ExoticExplorationConfig.json2Config.bind(H.ExoticExplorationConfig)),t(H.ExoticExplorationConfig.Config_Name2,H.ExoticGoalConfig.json2Config.bind(H.ExoticGoalConfig)),t(Fe.RuneConfig.Config_Name,Fe.RuneConfig.json2Config.bind(Fe.RuneConfig)),t(d.AppellationConfig.Config_Name1,d.AppellationConfig.json2Config.bind(d.AppellationConfig)),t(d.AppellationConfig.Config_Name2,d.AppellationConfig.json2Config2.bind(d.AppellationConfig)),t(xe.QuenchingCostConfig.Config_Name,xe.QuenchingCostConfig.json2Config.bind(xe.QuenchingCostConfig)),t(W.default.Config_Name,W.default.json2Config.bind(W.default)),t(wt.default.Config_Name,wt.default.json2Config.bind(wt.default)),t(et.default.Config_Name,et.default.json2Config.bind(et.default)),t(qe.ShenCiConfig.Config_Name,qe.ShenCiConfig.json2Config.bind(qe.ShenCiConfig)),t(Ae.default.Config_Name,Ae.default.json2Config.bind(Ae.default)),t(We.ShenbingskillAllConfig.Config_Name,We.ShenbingskillAllConfig.json2Config.bind(We.ShenbingskillAllConfig)),t(T.ChiXueMoJianConfig.Config_Name,T.ChiXueMoJianConfig.json2Config.bind(T.ChiXueMoJianConfig)),t(Pe.MingYunZhiRenConfig.Config_Name,Pe.MingYunZhiRenConfig.json2Config.bind(Pe.MingYunZhiRenConfig)),t(Ae.default.Config_Name,Ae.default.json2Config.bind(Ae.default)),t("MineConfig",ke.MineConfig.json2Config.bind(ke.MineConfig)),t("MiningInfoConfig",Se.MineInfoConfig.json2Config.bind(Se.MineInfoConfig)),t("Gaojixianjiconfig",_t.default.json2Config.bind(_t.default)),t(o.ActivityConfig.Config_Name,o.ActivityConfig.json2Config.bind(o.ActivityConfig)),t("IntensifyrefineConfig",se.IntensifyRefineConfig.json2Config.bind(se.IntensifyRefineConfig)),t("chargegiftConfig",L.default.json2Config.bind(L.default)),t(ut.TaskConfig.Config_Name,ut.TaskConfig.json2Config.bind(ut.TaskConfig)),t(he.LegendaryThinkTaskConfig.Config_Name,he.LegendaryThinkTaskConfig.json2Config.bind(he.LegendaryThinkTaskConfig)),t(he.LegendaryThinkTaskConfig.Config_Name2,he.LegendaryThinkTaskConfig.json2Config2.bind(he.LegendaryThinkTaskConfig)),t(ge.LegendaryThinkRewardConfig.Config_Name,ge.LegendaryThinkRewardConfig.json2Config.bind(ge.LegendaryThinkRewardConfig)),t(ge.LegendaryThinkRewardConfig.Config_Name2,ge.LegendaryThinkRewardConfig.json2Config2.bind(ge.LegendaryThinkRewardConfig)),t(ee.default.Config_Name,ee.default.json2Config.bind(ee.default)),t(ee.default.Config_Name2,ee.default.json2Config2.bind(ee.default)),t("activitytimeConfig",c.ActivitytimeConfig.json2Config.bind(c.ActivitytimeConfig)),t("Christmasrobber",N.ChristmasterConfig.json2Config.bind(N.ChristmasterConfig)),t("activityShop",r.ActivityShopConfig.json2Config.bind(r.ActivityShopConfig)),t(s.ActivityRankConfig.Config_Name,s.ActivityRankConfig.json2Config.bind(s.ActivityRankConfig)),t(a.default.Config_Name,a.default.json2Config.bind(a.default)),t(j.ElkRunConfig.Config_Name,j.ElkRunConfig.json2Config.bind(j.ElkRunConfig)),t(w.default.Config_Name,w.default.json2Config.bind(w.default)),t(k.default.Config_Name,k.default.json2Config.bind(k.default)),t(S.default.Config_Name,S.default.json2Config.bind(S.default)),t(g.ArenaRankRewardConfig.Config_Name,g.ArenaRankRewardConfig.json2Config.bind(g.ArenaRankRewardConfig)),t(h.ArenaWeekRewardConfig.Config_Name,h.ArenaWeekRewardConfig.json2Config.bind(h.ArenaWeekRewardConfig)),t(ct.default.Config_Name,ct.default.json2Config.bind(ct.default)),t(lt.default.Config_Name,lt.default.json2Config.bind(lt.default)),t(Re.default.Config_Name,Re.default.json2Config.bind(Re.default)),t(Re.default.Config_Name2,Re.default.json2Config2.bind(Re.default)),t(at.default.Config_Name,at.default.json2Config.bind(at.default)),t(st.default.Config_Name,st.default.json2Config.bind(st.default)),t(rt.default.Config_Name,rt.default.json2Config.bind(rt.default)),t(dt.StorageConfig.Config_Name,dt.StorageConfig.json2Config.bind(dt.StorageConfig)),t(ze.ShihunfazhangConfig.Config_Name,ze.ShihunfazhangConfig.json2Config.bind(ze.ShihunfazhangConfig)),t(nt.SpecialRingConfig.Config_Name,nt.SpecialRingConfig.json2Config.bind(nt.SpecialRingConfig)),t(ot.SpecialRingEffectConfig.Config_Name,ot.SpecialRingEffectConfig.json2Config.bind(ot.SpecialRingEffectConfig)),t(be.default.Config_Name,be.default.json2Config.bind(be.default)),t(_e.default.Config_Name,_e.default.json2Config.bind(_e.default)),t(z.GrowFundConfig.Config_Name,z.GrowFundConfig.json2Config.bind(z.GrowFundConfig)),t(tt.SkyPassConfig.Config_Name,tt.SkyPassConfig.json2Config.bind(tt.SkyPassConfig)),t(M.BuffConfig.Config_Name,M.BuffConfig.json2Config.bind(M.BuffConfig)),t(it.SkypassShopConfig.Config_Name,it.SkypassShopConfig.json2Config.bind(it.SkypassShopConfig)),t(B.CollectActivityConfig.Config_Name,B.CollectActivityConfig.json2Config.bind(B.CollectActivityConfig)),t(He.SevenDayLoginConfig.Config_Name,He.SevenDayLoginConfig.json2Config.bind(He.SevenDayLoginConfig)),t(Le.default.Config_Name,Le.default.json2Config.bind(Le.default)),t(ye.default.Config_Name,ye.default.json2Config.bind(ye.default)),t(ve.default.Config_Name,ve.default.json2Config.bind(ve.default)),t(Ke.SignBoardConfig.Config_Name,Ke.SignBoardConfig.json2Config.bind(Ke.SignBoardConfig)),t(De.default.Config_Name,De.default.json2Config.bind(De.default)),t(Be.default.Config_Name,Be.default.json2Config.bind(Be.default)),t(te.IllustratedBooksConfig.Config_Name,te.IllustratedBooksConfig.json2Config.bind(te.IllustratedBooksConfig)),t(ie.IllustratedBooksenhanceConfig.Config_Name,ie.IllustratedBooksenhanceConfig.json2Config.bind(ie.IllustratedBooksenhanceConfig)),t(ft.StrategyConfig.Config_Name,ft.StrategyConfig.json2Config.bind(ft.StrategyConfig)),t(gt.StrategyXingXiuConfig.Config_Name,gt.StrategyXingXiuConfig.json2Config.bind(gt.StrategyXingXiuConfig)),t(Xe.SkillBuffConfig.Config_Name,Xe.SkillBuffConfig.json2Config.bind(Xe.SkillBuffConfig)),t(mt.WorldbossawardConfig.Config_Name,mt.WorldbossawardConfig.json2Config.bind(mt.WorldbossawardConfig)),t(Ct.WorldbosstaskConfig.Config_Name,Ct.WorldbosstaskConfig.json2Config.bind(Ct.WorldbosstaskConfig)),t(Ce.default.Config_Name,Ce.default.json2Config.bind(Ce.default)),t("shenbingGemAllConfig",Ue.ShenbingGemAllConfig.json2Config.bind(Ue.ShenbingGemAllConfig)),t(ne.default.Config_Name,ne.default.json2Config.bind(ne.default)),t("bestrongernConfig",I.BestrongernConfig.json2Config.bind(I.BestrongernConfig)),t(Ne.OptionalgiftConfig.Config_Name,Ne.OptionalgiftConfig.json2Config.bind(Ne.OptionalgiftConfig)),t(G.ContinuousRechargeConfig.Config_Name12,G.ContinuousRechargeConfig.json2Config.bind(G.ContinuousRechargeConfig)),t(G.ContinuousRechargeConfig.Config_Name30,G.ContinuousRechargeConfig30.json2Config.bind(G.ContinuousRechargeConfig30)),t(we.MergeLuckyDrawConfig.Config_Name31,we.MergeLuckyDrawConfig.json2Config.bind(we.MergeLuckyDrawConfig)),t(we.MergeLuckyDrawConfig.Config_Name36,we.MergeLuckyDrawConfig36.json2Config.bind(we.MergeLuckyDrawConfig36)),t(f.AppraisalConfig.Config_Name,f.AppraisalConfig.json2Config.bind(f.AppraisalConfig)),t(Y.GuildConfig.Config_Name_Guildlv,Y.GuildConfig.json2Config_guildlv.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Donate,Y.GuildConfig.json2Config_guilddonate.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Skill,Y.GuildConfig.json2Config_guilskill.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Depot,Y.GuildConfig.json2Config_guildDepot.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Hb,Y.GuildConfig.json2Config_guildHb.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Task,Y.GuildConfig.json2Config_guildTask.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Skilllv,Y.GuildConfig.json2Config_guilskilllv.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Shop,Y.GuildConfig.json2Config_guilshop.bind(Y.GuildConfig)),t(Y.GuildConfig.Config_Name_Shoplv,Y.GuildConfig.json2Config_guilshoplv.bind(Y.GuildConfig)),t(V.DevilSealConfig.Config_Name,V.DevilSealConfig.json2Config.bind(V.DevilSealConfig)),t("puzzleConfig",Ge.PuzzleConfig.json2Config.bind(Ge.PuzzleConfig)),t("Xiaofeihuikuiconfig",yt.default.json2Config.bind(yt.default)),t(ce.default.Config_Name,ce.default.json2Config.bind(ce.default)),t("Xiaofeimubiaoconfig",bt.default.json2Config.bind(bt.default)),t("itemgoodsConfig",le.default.json2Config.bind(le.default)),t("task_boxConfig",pt.Task_boxConfig.json2Config.bind(pt.Task_boxConfig)),t("chaozhigiftConfig",P.ChaozhigiftConfig.json2Config.bind(P.ChaozhigiftConfig)),t("chaozhigifttypeConfig",E.ChaozhigifttypeConfig.json2Config.bind(E.ChaozhigifttypeConfig)),t(p.default.Config_Name,p.default.json2Config.bind(p.default)),t(m.default.Config_Name,m.default.json2Config.bind(m.default)),t(C.default.Config_Name,C.default.json2Config.bind(C.default)),t(_.default.Config_Name,_.default.json2Config.bind(_.default)),t(v.default.Config_Name,v.default.json2Config.bind(v.default)),t(y.default.Config_Name,y.default.json2Config.bind(y.default)),t(b.default.Config_Name,b.default.json2Config.bind(b.default)),t(x.CostumeConfig.Config_Name_AppConf,x.CostumeConfig.json2Config_AppConf.bind(x.CostumeConfig)),t(x.CostumeConfig.Config_Name_AppHeadConf,x.CostumeConfig.json2Config_AppHeadConf.bind(x.CostumeConfig)),t(x.CostumeConfig.Config_Name_AppHeadFMConf,x.CostumeConfig.json2Config_AppHeadFMConf.bind(x.CostumeConfig)),t(x.CostumeConfig.Config_Name_AppBubbleConf,x.CostumeConfig.json2Config_AppBubbleConf.bind(x.CostumeConfig)),t(U.FailedJumpConfig.Config_Name,U.FailedJumpConfig.json2Config.bind(U.FailedJumpConfig)),t(ht.default.Config_Name,ht.default.json2Config.bind(ht.default)),t(X.GuildfightRewardConfig.Config_Name,X.GuildfightRewardConfig.json2Config.bind(X.GuildfightRewardConfig)),t(K.GuildfightLvlConfig.Config_Name,K.GuildfightLvlConfig.json2Config.bind(K.GuildfightLvlConfig)),t(Z.GuildfightCityConfig.Config_Name,Z.GuildfightCityConfig.json2Config.bind(Z.GuildfightCityConfig)),t(Q.GuildfightTimeConfig.Config_Name,Q.GuildfightTimeConfig.json2Config.bind(Q.GuildfightTimeConfig)),t($e.SkillEffConfig.Config_Name,$e.SkillEffConfig.json2Config.bind($e.SkillEffConfig)),t(vt.XianshiLibaoConfig.Config_Name,vt.XianshiLibaoConfig.json2Config.bind(vt.XianshiLibaoConfig)),t(Ie.MedalConfig.Config_Name,Ie.MedalConfig.json2Config.bind(Ie.MedalConfig)),t(Me.MedalmakeConfig.Config_Name,Me.MedalmakeConfig.json2Config.bind(Me.MedalmakeConfig)),t(ue.MadelzhulingConfig.Config_Name,ue.MadelzhulingConfig.json2Config.bind(ue.MadelzhulingConfig))}})(i.ConfigMgr||(i.ConfigMgr={})),cc._RF.pop()},{"../config/ActivityCodeConfig":"ActivityCodeConfig","../config/ActivityConfig":"ActivityConfig","../config/ActivityRankConfig":"ActivityRankConfig","../config/ActivityShopConfig":"ActivityShopConfig","../config/ActivitygiftConfig":"ActivitygiftConfig","../config/ActivitytimeConfig":"ActivitytimeConfig","../config/AiringConfig":"AiringConfig","../config/AppellationConfig":"AppellationConfig","../config/AppraisalConfig":"AppraisalConfig","../config/ArenaRankRewardConfig":"ArenaRankRewardConfig","../config/ArenaWeekRewardConfig":"ArenaWeekRewardConfig","../config/BaGuaComposeConfig":"BaGuaComposeConfig","../config/BaGuaEquipConfig":"BaGuaEquipConfig","../config/BaGuaExchangeConfig":"BaGuaExchangeConfig","../config/BaGuaRefineConfig":"BaGuaRefineConfig","../config/BaGuaSkillConfig":"BaGuaSkillConfig","../config/BaGuaStrongConfig":"BaGuaStrongConfig","../config/BaGuaSuitConfig":"BaGuaSuitConfig","../config/BagConfig":"BagConfig","../config/BestrongernConfig":"BestrongernConfig","../config/BuffConfig":"BuffConfig","../config/CarnivalConfig":"CarnivalConfig","../config/CarvinalRewardConfig":"CarvinalRewardConfig","../config/CarvinalSurpriceConfig":"CarvinalSurpriceConfig","../config/ChaozhigiftConfig":"ChaozhigiftConfig","../config/ChaozhigifttypeConfig":"ChaozhigifttypeConfig","../config/ChargegiftConfig":"ChargegiftConfig","../config/ChiXueMoJianConfig":"ChiXueMoJianConfig","../config/ChongZhiConfig":"ChongZhiConfig","../config/ChristmasterConfig":"ChristmasterConfig","../config/CollectActivityConfig":"CollectActivityConfig","../config/ComplexConfig":"ComplexConfig","../config/ContinuousRechargeConfig":"ContinuousRechargeConfig","../config/CostumeConfig":"CostumeConfig","../config/DefaultConfig":"DefaultConfig","../config/DevilSealConfig":"DevilSealConfig","../config/ElkRunConfig":"ElkRunConfig","../config/EquipConfig":"EquipConfig","../config/EquipGatherConfig":"EquipGatherConfig","../config/ExoticExplorationConfig":"ExoticExplorationConfig","../config/FailedJumpConfig":"FailedJumpConfig","../config/FangShopConfig":"FangShopConfig","../config/GoldsConfig":"GoldsConfig","../config/GrowFundConfig":"GrowFundConfig","../config/GuideConfig":"GuideConfig","../config/GuildConfig":"GuildConfig","../config/GuildfightCityConfig":"GuildfightCityConfig","../config/GuildfightLvlConfig":"GuildfightLvlConfig","../config/GuildfightRewardConfig":"GuildfightRewardConfig","../config/GuildfightTimeConfig":"GuildfightTimeConfig","../config/HeroConfig":"HeroConfig","../config/HolidayConfig":"HolidayConfig","../config/ITemsConfig":"ITemsConfig","../config/IllustratedBooksConfig":"IllustratedBooksConfig","../config/IllustratedBooksenhanceConfig":"IllustratedBooksenhanceConfig","../config/IllustratedBooksshowConfig":"IllustratedBooksshowConfig","../config/IntensifyBuffConfig":"IntensifyBuffConfig","../config/IntensifyConfig":"IntensifyConfig","../config/IntensifyRefineConfig":"IntensifyRefineConfig","../config/InvitationConfig":"InvitationConfig","../config/ItemGiftConfig":"ItemGiftConfig","../config/ItemgoodsConfig":"ItemgoodsConfig","../config/JingJieConfig":"JingJieConfig","../config/LegendaryThinkRewardConfig":"LegendaryThinkRewardConfig","../config/LegendaryThinkTaskConfig":"LegendaryThinkTaskConfig","../config/MadelzhulingConfig":"MadelzhulingConfig","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../config/MaprecommendConfig":"MaprecommendConfig","../config/MarfaGoalConfig":"MarfaGoalConfig","../config/MarfaKingConfig":"MarfaKingConfig","../config/MarfaKingProConfig":"MarfaKingProConfig","../config/MarfaOrderConfig":"MarfaOrderConfig","../config/MedalConfig":"MedalConfig","../config/MedalmakeConfig":"MedalmakeConfig","../config/MergeLuckyDrawConfig":"MergeLuckyDrawConfig","../config/MineConfig":"MineConfig","../config/MineInfoConfig":"MineInfoConfig","../config/MingYunZhiRenConfig":"MingYunZhiRenConfig","../config/MonsterConfig":"MonsterConfig","../config/MonsterHunterConfig":"MonsterHunterConfig","../config/NewFuncitonConfig":"NewFuncitonConfig","../config/NewYearGiftConfig":"NewYearGiftConfig","../config/OptionalgiftConfig":"OptionalgiftConfig","../config/PlayerNameConfig":"PlayerNameConfig","../config/PostConfig":"PostConfig","../config/PuzzleConfig":"PuzzleConfig","../config/QuenchingCostConfig":"QuenchingCostConfig","../config/RandomFuMoConfig":"RandomFuMoConfig","../config/RandomFuMoEntryConfig":"RandomFuMoEntryConfig","../config/RebirthConfig":"RebirthConfig","../config/RuleConfig":"RuleConfig","../config/RuneConfig":"RuneConfig","../config/SevenDayLoginConfig":"SevenDayLoginConfig","../config/ShenCiConfig":"ShenCiConfig","../config/ShenbingGemAllConfig":"ShenbingGemAllConfig","../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../config/ShihunfazhangConfig":"ShihunfazhangConfig","../config/ShopAllConfig":"ShopAllConfig","../config/ShopConfig":"ShopConfig","../config/ShopRecoverConfig":"ShopRecoverConfig","../config/SignBoardConfig":"SignBoardConfig","../config/SkillBuffConfig":"SkillBuffConfig","../config/SkillConfig":"SkillConfig","../config/SkillEffConfig":"SkillEffConfig","../config/SkinConfig":"SkinConfig","../config/SkyPassConfig":"SkyPassConfig","../config/SkypassShopConfig":"SkypassShopConfig","../config/SpecialRingConfig":"SpecialRingConfig","../config/SpecialRingEffectConfig":"SpecialRingEffectConfig","../config/StarAbilityConfig":"StarAbilityConfig","../config/StarAstrolabeConfig":"StarAstrolabeConfig","../config/StarChainConfig":"StarChainConfig","../config/StarExchangeConfig":"StarExchangeConfig","../config/StarLevelConfig":"StarLevelConfig","../config/StorageConfig":"StorageConfig","../config/StrategyConfig":"StrategyConfig","../config/StrategyXingXiuConfig":"StrategyXingXiuConfig","../config/SuperbskillConfig":"SuperbskillConfig","../config/TaskConfig":"TaskConfig","../config/Task_boxConfig":"Task_boxConfig","../config/WorldbossawardConfig":"WorldbossawardConfig","../config/WorldbosstaskConfig":"WorldbosstaskConfig","../config/XianJiConfig":"XianJiConfig","../config/XianshiLibaoConfig":"XianshiLibaoConfig","../config/Xiaofeihuikuiconfig":"Xiaofeihuikuiconfig","../config/Xiaofeimubiaoconfig":"Xiaofeimubiaoconfig","../config/Xilianexpendconfig":"Xilianexpendconfig","../config/YaoShopConfig":"YaoShopConfig","../view/Discount/DisCountConfig":"DisCountConfig"}],ConsumerFeedbackMergedModel:[function(e,t,i){"use strict";cc._RF.push(t,"02263AvHV5NoYbuxTOAqEkw","ConsumerFeedbackMergedModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../event/CommonEvent"),r=e("../manager/RedPointManager"),c=function(){return function(){}}(),l=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[r.RedPointId.ConsumerFeedbackMerged],this.protos=[a.ProtoConfig.c_merge_consumer_reward,a.ProtoConfig.c_merge_consumer_info],r.default.getInstance().addHandler(this)}return e.proto2Model=function(t){e.starttime=t.getStarttime(),e.endtime=t.getEndtime(),e.costGold=t.getGold();var i=t.getConsumerlistList();o.Logger.log("\u5408\u670d\u6d88\u8d39\u76ee\u6807\u5217\u8868\u6570\u636e ConsumerlistList\uff1a",i);for(var a=i.length,r=0;r<a;r++){var l=new c,d=i[r];l.itemId=d.getId(),l.status=d.getStatus(),e.consumerInfoMap.set(l.itemId,l)}o.Logger.log("\u5408\u670d\u6d88\u8d39\u76ee\u6807\u5217\u8868\u6570\u636e consumerInfoMap\uff1a",e.consumerInfoMap),n.EventManager.instance.dispatch(s.CommonEvent.Event_consumerFeedbackMerged_statusChange)},e.proto2Reward=function(t){var i=t.getId(),a=e.getConsumerInfoById(i);if(!a)return o.Logger.warn("\u5408\u670d\u6d88\u8d39\u76ee\u6807\u5956\u52b1id\u9519\u8bef\uff0cid:",i),!1;e.successfulId=i,2===a.status&&(a.status=3),o.Logger.log("\u6210\u529f\u9886\u53d6\u5bf9\u5e94\u6d88\u8d39\u56de\u9988\u5956\u52b1\uff0cid:",i),n.EventManager.instance.dispatch(s.CommonEvent.Event_consumerFeedbackMerged_statusChange)},e.getConsumerInfoStatusById=function(t){return e.consumerInfoMap.get(t).status},e.getConsumerInfoById=function(t){return e.consumerInfoMap.get(t)},e.getOrderList=function(){var t=[],i=(new Map).set(1,[]).set(2,[]).set(3,[]);return e.consumerInfoMap.forEach(function(e,t){i.get(e.status).push(t)}),t=(t=(t=t.concat(i.get(2).sort(function(e,t){return e-t}))).concat(i.get(1).sort(function(e,t){return e-t}))).concat(i.get(3).sort(function(e,t){return e-t})),o.Logger.log("\u5408\u670d\u6d88\u8d39\u76ee\u6807 \u6709\u5e8f\u5956\u52b1\u5217\u8868",t),t},e.checkIsShowRedPoint=function(){var t=!1;return e.consumerInfoMap.forEach(function(e){if(2===e.status)return t=!0}),t},e.getConsumerInfoMap=function(){return e.consumerInfoMap},e.prototype.checkRedPoint=function(){var t=[],i={id:r.RedPointId.ConsumerFeedbackMerged,type:r.RedPointType.Default,show:e.checkIsShowRedPoint()};return t.push(i),o.Logger.log("\u5408\u670d\u6d88\u8d39\u56de\u9988\u7ea2\u70b9\u4fe1\u606f ",t),t},e.instance=new e,e.consumerInfoMap=new Map,e}();i.default=l,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],ConsumerFeedbackMergedView:[function(e,t,i){"use strict";cc._RF.push(t,"19e22evfypHsIqWW31zaMV6","ConsumerFeedbackMergedView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/ViewBase"),c=e("../event/CommonEvent"),l=e("../model/ConsumerFeedbackMergedModel"),d=e("../prefab/GainItemConsumerFeedbackMerged"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeNum=null,t.gainItem=null,t.gainContext=null,t}return n(t,e),t.prototype.onEnable=function(){this.init(),s.EventManager.instance.on(c.CommonEvent.Event_consumerFeedbackMerged_statusChange,this.init,this)},t.prototype.init=function(){this.gainContext.removeAllChildren(),this.timeNum.string=a.default.formatDateStr4(1e3*l.default.starttime)+"-"+a.default.formatDateStr4(1e3*l.default.endtime);for(var e=l.default.getOrderList(),t=e.length,i=0;i<t;i++){var n=e[i],o=cc.instantiate(this.gainItem);o.parent=this.gainContext,o.getComponent(d.default).init(n)}},o([h(cc.Label)],t.prototype,"timeNum",void 0),o([h(cc.Prefab)],t.prototype,"gainItem",void 0),o([h(cc.Node)],t.prototype,"gainContext",void 0),t=o([g],t)}(r.default);i.default=u,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../event/CommonEvent":"CommonEvent","../model/ConsumerFeedbackMergedModel":"ConsumerFeedbackMergedModel","../prefab/GainItemConsumerFeedbackMerged":"GainItemConsumerFeedbackMerged"}],ConsumerFeedbackModel:[function(e,t,i){"use strict";cc._RF.push(t,"fe7a2pdqudCFIPYnGbScdJO","ConsumerFeedbackModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../event/CommonEvent"),r=e("../manager/RedPointManager"),c=function(){return function(){}}(),l=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[r.RedPointId.ConsumerFeedback],this.protos=[a.ProtoConfig.c_req_consumer_reward,a.ProtoConfig.c_req_consumer_info],r.default.getInstance().addHandler(this)}return e.proto2Model=function(t){e.starttime=t.getStarttime(),e.endtime=t.getEndtime(),e.costGold=t.getGold();var i=t.getConsumerlistList();o.Logger.log("\u6d88\u8d39\u56de\u9988\u5217\u8868\u6570\u636e ConsumerlistList\uff1a",i);for(var a=i.length,r=0;r<a;r++){var l=new c,d=i[r];l.itemId=d.getId(),l.status=d.getStatus(),e.consumerInfoMap.set(l.itemId,l)}o.Logger.log("\u6d88\u8d39\u56de\u9988\u5217\u8868\u6570\u636e consumerInfoMap\uff1a",e.consumerInfoMap),n.EventManager.instance.dispatch(s.CommonEvent.Event_consumerFeedback_statusChange)},e.proto2Reward=function(t){var i=t.getId(),a=e.getConsumerInfoById(i);if(!a)return o.Logger.warn("\u6d88\u8d39\u56de\u9988\u5956\u52b1id\u9519\u8bef\uff0cid:",i),!1;e.successfulId=i,2===a.status&&(a.status=3),o.Logger.log("\u6210\u529f\u9886\u53d6\u5bf9\u5e94\u6d88\u8d39\u56de\u9988\u5956\u52b1\uff0cid:",i),n.EventManager.instance.dispatch(s.CommonEvent.Event_consumerFeedback_statusChange)},e.getConsumerInfoStatusById=function(t){return e.consumerInfoMap.get(t).status},e.getConsumerInfoById=function(t){return e.consumerInfoMap.get(t)},e.getOrderList=function(){var t=[],i=(new Map).set(1,[]).set(2,[]).set(3,[]);return e.consumerInfoMap.forEach(function(e,t){i.get(e.status).push(t)}),t=(t=(t=t.concat(i.get(2).sort(function(e,t){return e-t}))).concat(i.get(1).sort(function(e,t){return e-t}))).concat(i.get(3).sort(function(e,t){return e-t})),o.Logger.log("\u6d88\u8d39\u56de\u9988 \u6709\u5e8f\u5956\u52b1\u5217\u8868",t),t},e.checkIsShowRedPoint=function(){var t=!1;return e.consumerInfoMap.forEach(function(e){if(2===e.status)return t=!0}),t},e.getConsumerInfoMap=function(){return e.consumerInfoMap},e.prototype.checkRedPoint=function(){var t=[],i={id:r.RedPointId.ConsumerFeedback,type:r.RedPointType.Default,show:e.checkIsShowRedPoint()};return t.push(i),o.Logger.log("\u6d88\u8d39\u56de\u9988\u7ea2\u70b9\u4fe1\u606f ",t),t},e.instance=new e,e.consumerInfoMap=new Map,e}();i.default=l,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],ConsumerFeedbackView:[function(e,t,i){"use strict";cc._RF.push(t,"62cd1U2dMNGW7r2+53NuErS","ConsumerFeedbackView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/ViewBase"),c=e("../event/CommonEvent"),l=e("../model/ConsumerFeedbackModel"),d=e("../prefab/GainItemConsumerFeedback"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeNum=null,t.gainItem=null,t.gainContext=null,t}return n(t,e),t.prototype.onEnable=function(){this.init(),s.EventManager.instance.on(c.CommonEvent.Event_consumerFeedback_statusChange,this.init,this)},t.prototype.init=function(){this.gainContext.removeAllChildren(),this.timeNum.string=a.default.formatDateStr4(1e3*l.default.starttime)+"-"+a.default.formatDateStr4(1e3*l.default.endtime);for(var e=l.default.getOrderList(),t=e.length,i=0;i<t;i++){var n=e[i],o=cc.instantiate(this.gainItem);o.parent=this.gainContext,o.getComponent(d.default).init(n)}},o([h(cc.Label)],t.prototype,"timeNum",void 0),o([h(cc.Prefab)],t.prototype,"gainItem",void 0),o([h(cc.Node)],t.prototype,"gainContext",void 0),t=o([g],t)}(r.default);i.default=u,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../event/CommonEvent":"CommonEvent","../model/ConsumerFeedbackModel":"ConsumerFeedbackModel","../prefab/GainItemConsumerFeedback":"GainItemConsumerFeedback"}],ContinuousRechargeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"de34bs4HfdCI418svvT4xyI","ContinuousRechargeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=e[i];t.configMap12.set(i,n)})},t.getContinuousConfig12=function(e){return this.configMap12.get(e)},t.getContinuousConfig30=function(e){return this.configMap30.get(e)},t.Config_Name12="Lianchongtehui12Config",t.Config_Name30="Lianchongtehui30Config",t.configMap12=new Map,t.configMap30=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ContinuousRechargeConfig=o;var a=function(){function e(){}return e.json2Config=function(e){Object.keys(e).forEach(function(t){var i=e[t];o.configMap30.set(t,i)})},e}();i.ContinuousRechargeConfig30=a,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ContinuousRechargeItem:[function(e,t,i){"use strict";cc._RF.push(t,"9585cMSbW1MkYkoLfrg3ARv","ContinuousRechargeItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/ContinuousRechargeModel"),r=e("../prefab/ItemPrefab"),c=e("../config/WordConfig"),l=e("../config/ITemsConfig"),d=e("../model/ItemInfoModel"),f=e("../config/GameConst"),g=e("../config/ColorConfig"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t}return n(t,e),t.prototype.onEnable=function(){},t.prototype.init=function(e,t,i,n,o){this.getChild(this.node,"dayNum",cc.Label).string=e.day/10>1?"0\n"+e.day%10:e.day%10,this.getChild(this.node,"hadGetNode").active=1==t.state;var a,h=this.getChild(this.node,"progress");h.y=2==t.state?0:22,a=o?Math.floor(i/100)>e.rmb?e.rmb:Math.floor(i/100):3==t.state?e.rmb:0,h.getComponent(cc.Label).string=a+"/"+e.rmb,h.active=1!=t.state;var u=this.getChild(this.node,"btnGetGift");u.active=3==t.state,u.on(cc.Node.EventType.TOUCH_END,function(){s.ContinuousRechargeModel.s_req_recharge_reward(t.index,n)});var p=this.getChild(this.node,"panel_bg");for(var m in p.removeAllChildren(),e.item){var C=l.ITemsConfig.getITemsConfigById(m),_=cc.instantiate(this.itemPrefab);_.getComponent(r.default).init(d.default.create(f.GameConst.ITEM_KIND.ITEM,C.id,e.item[m],C.quality),!0),p.addChild(_)}var v=e.rescource[1]||e.rescource[2],y=this.getChild(this.node,"resnode"),b=this.getChild(y,"frameNode"),I=this.getChild(y,"nameTxt"),M=this.getChild(y,"numTxt"),w=e.rescource[1]?g.ColorConfig.getKuangQualityColor(0):g.ColorConfig.getKuangQualityColor(3);b.color=w,I.color=w,M.color=w,I.getComponent(cc.Label).string=e.rescource[1]?c.WordConfig.getWord(60544):c.WordConfig.getWord(60517),M.getComponent(cc.Label).string=v},o([p({type:cc.Prefab})],t.prototype,"itemPrefab",void 0),t=o([u],t)}(a.default);i.ContinuousRechargeItem=m,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../model/ContinuousRechargeModel":"ContinuousRechargeModel","../model/ItemInfoModel":"ItemInfoModel","../prefab/ItemPrefab":"ItemPrefab"}],ContinuousRechargeModel:[function(e,t,i){"use strict";cc._RF.push(t,"9e856hcrABFnYaRGG/noTvR","ContinuousRechargeModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/ProtoConfig"),a=e("../../engine/ProtoUtils"),s=e("../../engine/GameSocket"),r=e("../../game/network/SocketClient"),c=e("../event/CommonEvent"),l=e("../manager/RedPointManager"),d=function(){return function(){}}();i.TRewardInfo=d;var f=function(){return function(){}}(),g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[l.RedPointId.CRecharge12,l.RedPointId.CRecharge30],l.default.getInstance().addHandler(this),this.protos=[o.ProtoConfig.c_req_recharge_info]}return e.prototype.checkRedPoint=function(){var t=[],i=!1,n=!1,o=e.instance.CRInfo;e.instance.CRInfo&&(o.lowrewardlist&&o.lowrewardlist.forEach(function(e){3!=e.state||(i=!0)}),o.hightrewardlist&&o.hightrewardlist.forEach(function(e){3!=e.state||(n=!0)}));var a={id:l.RedPointId.CRecharge12,type:l.RedPointType.Default,show:i};t.push(a);var s={id:l.RedPointId.CRecharge30,type:l.RedPointType.Default,show:n};return t.push(s),t},e.proto_c_req_recharge_info=function(t){var i=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_req_recharge_info,t),s=new f;s.lowstarttime=i.getLowstarttime(),s.lowendtime=i.getLowendtime(),s.highttarttime=i.getHightstarttime(),s.hightendtime=i.getHightendtime(),s.lowtimes=i.getLowtimes(),s.highttimes=i.getHighttimes(),s.gold=i.getGold(),s.lowchargeday=i.getLowchargeDay(),s.hightchargeday=i.getHightchargeDay();var r=[];i.getLowrewardlistList().forEach(function(e){var t=new d;t.index=e.getIndex(),t.state=e.getState(),r.push(t)}),s.lowrewardlist=r,r=[],i.getHightrewardlistList().forEach(function(e){var t=new d;t.index=e.getIndex(),t.state=e.getState(),r.push(t)}),s.hightrewardlist=r,e.instance.CRInfo=s,n.EventManager.instance.dispatch(c.CommonEvent.Event_Guild_ContinuousRecharge)},e.proto_c_req_recharge_reward=function(e){var t=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_req_recharge_reward,e);t.getId(),t.getGear();r.default.s_req_recharge_info()},e.s_req_recharge_reward=function(e,t){var i=a.ProtoUtils.Create(o.ProtoConfig.s_req_recharge_reward);i.setId(e),i.setGear(t),s.default.getInstance().sendToSocket(i)},e.instance=new e,e}();i.ContinuousRechargeModel=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../game/network/SocketClient":"SocketClient","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],ContinuousRechargeView:[function(e,t,i){"use strict";cc._RF.push(t,"e582eD/br1LFY2SiE6QcyrH","ContinuousRechargeView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ViewBase"),l=e("../event/CommonEvent"),d=e("../config/ContinuousRechargeConfig"),f=e("../model/ContinuousRechargeModel"),g=e("./ContinuousRechargeItem"),h=e("../config/ITemsConfig"),u=e("../model/ItemInfoModel"),p=e("../prefab/ItemPrefab"),m=e("../config/GameConst"),C=e("../config/WordConfig"),_=e("../config/ColorConfig"),v=e("../model/ActivityOpenModel"),y=cc._decorator,b=y.ccclass,I=y.property,M=function(){return function(){}}(),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.CRItem=null,t.itemPrefab=null,t.defaultspriteFrameList=[],t.spriteFrameList=[],t.BigReward=[],t}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(l.CommonEvent.Event_Guild_ContinuousRecharge,this.refresh,this)},t.prototype.refresh=function(e){var t=this;void 0===e&&(e=null);var i,n=f.ContinuousRechargeModel.instance.CRInfo,o=[],s=0,c=n.gold;this.id=e||this.id;var l=v.default.getStarTimeByActivityId(this.id),h=v.default.getEndTimeByActivityId(this.id),u=a.default.formatDateStr7(1e3*l)+"-"+a.default.formatDateStr7(1e3*h);28==this.id?(o=n.lowrewardlist,s=n.lowtimes,i=n.lowchargeday,this.configfc=d.ContinuousRechargeConfig.getContinuousConfig12.bind(d.ContinuousRechargeConfig),this.gear=1):(o=n.hightrewardlist,s=n.highttimes,i=n.hightchargeday,this.configfc=d.ContinuousRechargeConfig.getContinuousConfig30.bind(d.ContinuousRechargeConfig),this.gear=2),this.findChild(this.node,"time/timeNum").getComponent(cc.Label).string=u;var p=this.configfc("1");this.getChild(this.node,"money",cc.Label).string=p.rmb;var m=this.findChild(this.node,"panle"),C=this.findChild(m,"view/gainContext");C.removeAllChildren(),o.sort(function(e,t){return e.state==t.state?e.index-t.index:t.state-e.state}),o.forEach(function(e){var n=t.configfc(e.index.toString());if(n)if(0==n.bonus){var o=cc.instantiate(t.CRItem);o.getComponent(g.ContinuousRechargeItem).init(n,e,c,t.gear,n.day==i),C.addChild(o)}else{var a=new M;a.state=3==e.state,a.index=e.index,t.BigReward[n.bonus]=a;var s=t.findChild(t.node,"reward"+n.bonus+"/rewardsp");s.stopAllActions(),1==e.state?s.getComponent(cc.Sprite).spriteFrame=t.spriteFrameList[3]:2==e.state?s.getComponent(cc.Sprite).spriteFrame=t.defaultspriteFrameList[n.bonus-1]:3==e.state&&(s.getComponent(cc.Sprite).spriteFrame=t.spriteFrameList[n.bonus-1],s.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.1,8),cc.rotateTo(.1,0),cc.rotateTo(.1,-8),cc.rotateTo(.1,0),cc.rotateTo(.1,8),cc.rotateTo(.1,0),cc.rotateTo(.1,-8),cc.rotateTo(.1,0),cc.delayTime(2))))),t.findChild(t.node,"reward"+n.bonus+"/ui_hongdian").active=3==e.state}else r.Logger.log("not confi",e.index.toString())}),m.getComponent(cc.ScrollView).scrollToTop();var _=this.findChild(this.node,"bigreward");_.active=!1,this.findChild(_,"darkLayer").on(cc.Node.EventType.TOUCH_END,function(){t.findChild(t.node,"bigreward").active=!1}),this.findChild(this.node,"progressBar").getComponent(cc.ProgressBar).progress=s/15},t.prototype.init=function(){this.findChild(this.node,"reward1").on(cc.Node.EventType.TOUCH_END,this.onShowBigReward.bind(this,1)),this.findChild(this.node,"reward2").on(cc.Node.EventType.TOUCH_END,this.onShowBigReward.bind(this,2)),this.findChild(this.node,"reward3").on(cc.Node.EventType.TOUCH_END,this.onShowBigReward.bind(this,3))},t.prototype.onShowBigReward=function(e,t){if(this.BigReward[e].state)f.ContinuousRechargeModel.s_req_recharge_reward(this.BigReward[e].index,this.gear);else{var i=this.BigReward[e].index,n=this.findChild(this.node,"bigreward");n.active=!0;var o=this.findChild(n,"huodongtip"),a=this.configfc(i.toString()),s=this.findChild(o,"gainContext");for(var r in s.removeAllChildren(),a.item){var c=h.ITemsConfig.getITemsConfigById(r),l=cc.instantiate(this.itemPrefab);l.getComponent(p.default).init(u.default.create(m.GameConst.ITEM_KIND.ITEM,c.id,a.item[r],c.quality),!0),s.addChild(l)}o.width=76*(s.children.length+1)+8*s.children.length+50,o.x=1==a.bonus?-165:2==a.bonus?130-o.width:310-o.width;var d=this.findChild(o,"huodongjiantou");d.x=1==a.bonus?65:o.width-45;var g=a.rescource?a.rescource[1]||a.rescource[2]:null,v=this.getChild(o,"resnode");if(g){v.active=!0,s.x=105;var y=this.getChild(v,"frameNode"),b=this.getChild(v,"nameTxt"),I=this.getChild(v,"numTxt"),M=a.rescource[1]?_.ColorConfig.getKuangQualityColor(0):_.ColorConfig.getKuangQualityColor(3);y.color=M,b.color=M,I.color=M,b.getComponent(cc.Label).string=a.rescource[1]?C.WordConfig.getWord(60544):C.WordConfig.getWord(60517),I.getComponent(cc.Label).string=g}else v.active=!1,s.x=20,o.width-=90,o.x-=1==a.bonus?0:-90,d.x-=1==a.bonus?0:90}},o([I(cc.Prefab)],t.prototype,"CRItem",void 0),o([I(cc.Prefab)],t.prototype,"itemPrefab",void 0),o([I({type:[cc.SpriteFrame]})],t.prototype,"defaultspriteFrameList",void 0),o([I({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),t=o([b],t)}(c.default);i.ContinuousRechargeView=w,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/ContinuousRechargeConfig":"ContinuousRechargeConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/ContinuousRechargeModel":"ContinuousRechargeModel","../model/ItemInfoModel":"ItemInfoModel","../prefab/ItemPrefab":"ItemPrefab","./ContinuousRechargeItem":"ContinuousRechargeItem"}],CostumeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f4d45FzZsFMj54DCCg2iMtW","CostumeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){}}();i.AppearanceConf=a;var s=function(){return function(){}}();i.AppearanceHeadConf=s;var r=function(){return function(){}}();i.AppearanceBubbleConf=r;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config_AppConf=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_AppConf=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config_AppConf(e[i]);o.id=parseInt(i),t.configMap_AppConf.set(o.id,o)})},t.getConfigById_AppConf_SF=function(e){var t=this.configMap_AppConf.get(e);return t?t.img:null},t.obj2Config_AppHeadConf=function(e){var t=new s;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_AppHeadConf=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config_AppHeadConf(e[i]);o.id=parseInt(i),t.configMap_AppHeadConf.set(o.id,o)})},t.getConfigById_AppHeadConf_SF=function(e){var t=this.configMap_AppHeadConf.get(e);return t?t.img:null},t.json2Config_AppHeadFMConf=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config_AppHeadConf(e[i]);o.id=parseInt(i),t.configMap_AppHeadFMConf.set(o.id,o)})},t.getConfigById_AppHeadFMConf_SF=function(e){var t=this.configMap_AppHeadFMConf.get(e);return t?t.img:null},t.json2Config_AppBubbleConf=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config_AppBubbleConf(e[i]);o.id=parseInt(i),t.configMap_AppBubbleConf.set(o.id,o)})},t.getConfigById_AppBubbleConf_SF=function(e){var t=this.configMap_AppBubbleConf.get(e);return t?t.img:null},t.obj2Config_AppBubbleConf=function(e){var t=new r;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.Config_Name_AppConf="AppearanceConfig",t.Config_Name_AppHeadConf="AppearanceHeadConfig",t.Config_Name_AppHeadFMConf="AppearanceHeadFrameConfig",t.Config_Name_AppBubbleConf="AppearanceBubbleConfig",t.configMap_AppConf=new Map,t.configMap_AppHeadConf=new Map,t.configMap_AppHeadFMConf=new Map,t.configMap_AppBubbleConf=new Map,t}(o.JsonConfigBase);i.CostumeConfig=c,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],CostumeModel:[function(e,t,i){"use strict";cc._RF.push(t,"da76aH4W35E147inWEoaJMv","CostumeModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/GameSocket"),c=e("../event/CommonEvent"),l=e("../../engine/ResourcesManager"),d=e("../config/CostumeConfig"),f=e("./RoleInfoModel"),g=e("../manager/RedPointManager"),h=e("../config/WordConfig");(function(e){e[e.Head=1]="Head",e[e.HeadFM=2]="HeadFM",e[e.Bubble=3]="Bubble",e[e.Title=4]="Title",e[e.skillSkin=5]="skillSkin"})(n=i.CostumeType||(i.CostumeType={}));var u=function(){return function(){}}();i.TPersonalizeInfo=u;var p=function(){return function(){}}();i.Personalize=p;var m=function(){function e(){this.portrait=0,this.portrait_skin=0,this.chat_skin=0,this.title=0,this.portrait_list=[],this.portrait_skin_list=[],this.chat_skin_list=[],this.title_list=[],this.eventIdList=[],this.protos=[],this.eventIdList=[g.RedPointId.CostCH,g.RedPointId.CostSkill,g.RedPointId.CostTX,g.RedPointId.CostTXK,g.RedPointId.CostLTK],g.default.getInstance().addHandler(this),this.protos=[a.ProtoConfig.c_personalize_info,a.ProtoConfig.c_personalize_setting]}return e.prototype.checkRedPoint=function(){var t=[],i=!1,n=!1,o=!1,a=!1;e.instance.title_list.forEach(function(e){1==e.state&&(i=!0)}),e.instance.portrait_list.forEach(function(e){1==e.state&&(n=!0)}),e.instance.portrait_skin_list.forEach(function(e){1==e.state&&(o=!0)}),e.instance.chat_skin_list.forEach(function(e){1==e.state&&(a=!0)});var s={id:g.RedPointId.CostCH,type:g.RedPointType.Default,show:i};t.push(s);var r={id:g.RedPointId.CostSkill,type:g.RedPointType.Default,show:!1};t.push(r);var c={id:g.RedPointId.CostTX,type:g.RedPointType.Default,show:n};t.push(c);var l={id:g.RedPointId.CostTXK,type:g.RedPointType.Default,show:o};t.push(l);var d={id:g.RedPointId.CostLTK,type:g.RedPointType.Default,show:a};return t.push(d),t},e.getTPersonalizeInfoList=function(e){var t=[];return e.forEach(function(e){var i=new u;i.id=e.getId(),i.state=e.getState(),i.time=e.getEndTime(),t.push(i)}),t},e.getTypeName=function(e){var t=0;switch(e){case n.Head:t=61650;break;case n.HeadFM:t=61651;break;case n.Bubble:t=61652;break;case n.Title:t=61649}return h.WordConfig.getWord(t)},e.c_personalize_info=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_personalize_info,t);e.instance.portrait=i.getPortrait(),e.instance.portrait_skin=i.getPortraitSkin(),e.instance.chat_skin=i.getChatSkin(),e.instance.title=i.getTitle();var n=i.getPortraitListList();e.instance.portrait_list=e.getTPersonalizeInfoList(n);var r=i.getPortraitSkinListList();e.instance.portrait_skin_list=e.getTPersonalizeInfoList(r);var l=i.getChatSkinListList();e.instance.chat_skin_list=e.getTPersonalizeInfoList(l);var d=i.getTitleListList();e.instance.title_list=e.getTPersonalizeInfoList(d),o.EventManager.instance.dispatch(c.CommonEvent.Event_UserInfoRefresh)},e.c_personalize_setting=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_personalize_setting,t),r=i.getRet(),l=i.getTarget(),d=i.getId(),g=i.getState(),h=i.getEndTime();if(0==r){switch(l){case n.Head:for(var u=0;u<e.instance.portrait_list.length;u++)e.instance.portrait_list[u].id==d&&(e.instance.portrait_list[u].state=g,e.instance.portrait_list[u].time=h);2==g&&(e.instance.portrait=d,f.default.instance.personalize.portrait=d);break;case n.HeadFM:for(u=0;u<e.instance.portrait_skin_list.length;u++)e.instance.portrait_skin_list[u].id==d&&(e.instance.portrait_skin_list[u].state=g,e.instance.portrait_skin_list[u].time=h);2==g&&(e.instance.portrait_skin=d,f.default.instance.personalize.portrait_skin=d);break;case n.Bubble:for(u=0;u<e.instance.chat_skin_list.length;u++)e.instance.chat_skin_list[u].id==d&&(e.instance.chat_skin_list[u].state=g,e.instance.chat_skin_list[u].time=h);2==g&&(e.instance.chat_skin=d,f.default.instance.personalize.chat_skin=d);break;case n.Title:for(u=0;u<e.instance.title_list.length;u++)e.instance.title_list[u].id==d&&(e.instance.title_list[u].state=g,e.instance.title_list[u].time=h);2==g&&(e.instance.title=d,f.default.instance.personalize.title=d)}o.EventManager.instance.dispatch(c.CommonEvent.Event_Up_Costume,{type:l,id:d,state:g,time:h}),o.EventManager.instance.dispatch(c.CommonEvent.Event_UserInfoRefresh)}},e.proto2Personalize=function(e){var t=new p;return t.portrait=e.getPortrait(),t.portrait_skin=e.getPortraitSkin(),t.chat_skin=e.getChatSkin(),t.title=e.getTitle(),t},e.s_personalize_info=function(){var e=s.ProtoUtils.Create(a.ProtoConfig.s_personalize_info);r.default.getInstance().sendToSocket(e)},e.s_personalize_setting=function(e,t,i){var n=s.ProtoUtils.Create(a.ProtoConfig.s_personalize_setting);n.setTarget(e),n.setId(t),n.setState(i),r.default.getInstance().sendToSocket(n)},e.setCostSF=function(t,i,o){void 0===o&&(o=null);var a="icon/Costume/";switch(i){case n.Head:o=o||e.instance.portrait,a+="touxiang/"+d.CostumeConfig.getConfigById_AppHeadConf_SF(o);break;case n.HeadFM:o=o||e.instance.portrait_skin,a+="touxiangkuang/"+d.CostumeConfig.getConfigById_AppHeadFMConf_SF(o);break;case n.Bubble:o=o||o||e.instance.chat_skin,a+="liaotiankuang/"+d.CostumeConfig.getConfigById_AppBubbleConf_SF(o);break;case n.Title:0!=(o=null===o?e.instance.title:o)?(a+="chenghao/"+d.CostumeConfig.getConfigById_AppConf_SF(o),t.node.active=!0):t.node.active=!1}0!=o&&l.default.instance.loadSprite(t,a,!0)},e.instance=new e,e}();i.CostumeModel=m,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/ResourcesManager":"ResourcesManager","../config/CostumeConfig":"CostumeConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./RoleInfoModel":"RoleInfoModel"}],CostumeView:[function(e,t,i){"use strict";cc._RF.push(t,"256a8YG0zZJ4rDAQM6Qx5aN","CostumeView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/SkillConfig"),r=e("../model/RoleInfoModel"),c=e("./AppearanceSystemSkillItem"),l=e("../config/CostumeConfig"),d=e("./Costume/costitemsf"),f=e("../config/WordConfig"),g=e("../model/CostumeModel"),h=e("../../engine/EventManager"),u=e("../event/CommonEvent"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.content2=null,t.costitem=null,t.tilte2=null,t.appearanceSystemSkillItem=null,t.costumeType=null,t.skillNodeList=[],t.skillItemMap=new Map,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){},t.prototype.onEnable=function(){this.skillnode=this.findChild(this.node,"kd_bg/skillnode"),this.panelnode=this.findChild(this.node,"kd_bg/panelnode"),h.EventManager.instance.on(u.CommonEvent.Event_Up_Costume,this.RefashItem,this),h.EventManager.instance.on(u.CommonEvent.Event_skillIntemChange,this.serverRefeshSkill,this),this.typeTabClick(null,4)},t.prototype.typeTabClick=function(e,t){void 0===e&&(e=null),this.costumeType!=t&&(this.costumeType=Number(t),this.refashContent())},t.prototype.RefashItem=function(e){e.type==this.costumeType&&this.content2.children.forEach(function(t){var i=t.getComponent(d.CostItemSf);t.active&&i.getitemid()==e.id&&(i.setItemType(e.state),i.setItemTime(e.time))})},t.prototype.serverRefeshSkill=function(e){e?this.privateSkillItem(e):this.refashContent()},t.prototype.refashContent=function(){if(this.skillnode.active=this.costumeType==g.CostumeType.skillSkin,this.panelnode.active=this.costumeType!=g.CostumeType.skillSkin,this.costumeType===g.CostumeType.skillSkin){for(var e=0,t=this.content.children.length;e<t;e++){(r=this.content.children[e]).destroy()}this.tilte2.string=f.WordConfig.getWord(61637),this.refreshSkill()}else{var i=void 0,n=void 0;switch(this.costumeType){case g.CostumeType.Title:this.tilte2.string=f.WordConfig.getWord(61638),n=l.CostumeConfig.configMap_AppConf,i=g.CostumeModel.instance.title_list;break;case g.CostumeType.Head:this.tilte2.string=f.WordConfig.getWord(61646),n=l.CostumeConfig.configMap_AppHeadConf,i=g.CostumeModel.instance.portrait_list;break;case g.CostumeType.HeadFM:this.tilte2.string=f.WordConfig.getWord(61647),n=l.CostumeConfig.configMap_AppHeadFMConf,i=g.CostumeModel.instance.portrait_skin_list;break;case g.CostumeType.Bubble:this.tilte2.string=f.WordConfig.getWord(61648),n=l.CostumeConfig.configMap_AppBubbleConf,i=g.CostumeModel.instance.chat_skin_list}var o=i.length,a=this.content2.children.length,s=o>a?o:a;i.sort(function(e,t){if(e.state!=t.state){if(2==e.state||1==e.state&&2!=t.state||3==e.state&&0==t.state)return e.state<t.state?e.state-t.state:t.state-e.state;if(2==t.state||1==t.state&&2!=e.state||3==t.state&&0==e.state)return e.state<t.state?t.state-e.state:e.state-t.state}return e.id-t.id});for(e=0;e<s;e++){var r;if((r=this.content2.children[e])||((r=cc.instantiate(this.costitem)).getComponent(d.CostItemSf).init(),this.content2.addChild(r)),e<o){var c=n.get(i[e].id);c&&-1!=c.condition&&0!=c.condition?(r.getComponent(d.CostItemSf).onRefresh(this.costumeType,c),r.getComponent(d.CostItemSf).setItemType(i[e].state),r.getComponent(d.CostItemSf).setItemTime(i[e].time),r.active=!0):r.active=!1,1==i[e].state&&0==c.jihuomode&&g.CostumeModel.s_personalize_setting(this.costumeType,c.id,3)}else r.active=!1}this.panelnode.getComponent(cc.ScrollView).scrollToTop()}},t.prototype.refreshSkill=function(){for(var e=r.default.instance.skillModelList,t=0;t<e.length;t++){var i=s.SkillConfig.getSkillConfigById(e[t].id,s.SkillConfig.getSkillLevel(e[t].id)),n=void 0;n=cc.instantiate(this.appearanceSystemSkillItem),this.content.addChild(n),this.skillItemMap.set(i.skillId,n),n.getComponent(c.default).init(i.skillId)}},t.prototype.privateSkillItem=function(e){var t=this.skillItemMap.get(e);t&&t.getComponent(c.default).init(e)},o([C(cc.Node)],t.prototype,"content",void 0),o([C(cc.Node)],t.prototype,"content2",void 0),o([C(cc.Prefab)],t.prototype,"costitem",void 0),o([C(cc.Label)],t.prototype,"tilte2",void 0),o([C(cc.Prefab)],t.prototype,"appearanceSystemSkillItem",void 0),t=o([m],t)}(a.default);i.default=_,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/CostumeConfig":"CostumeConfig","../config/SkillConfig":"SkillConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/CostumeModel":"CostumeModel","../model/RoleInfoModel":"RoleInfoModel","./AppearanceSystemSkillItem":"AppearanceSystemSkillItem","./Costume/costitemsf":"costitemsf"}],DateUtil:[function(e,t,i){"use strict";cc._RF.push(t,"64a115hjD9AE4jsIjRDWTvU","DateUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/model/ServerTime"),o=e("../game/config/WordConfig"),a=function(){function e(){}return e.formatNumStr=function(e){var t=""+e;return e<10&&(t="0"+e),t},e.formateYearMonthDayStr=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},e.formateYearMonthDayStr2=function(e){var t=new Date(e);return(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()},e.formateNumYearMonthDayStr=function(e){var t=new Date(e);return t.getFullYear()+"\u5e74"+(t.getMonth()+1)+"\u6708"+t.getDate()+"\u65e5"},e.formateMonthDayStr=function(e){var t=new Date(e);return t.getMonth()+1+"\u6708"+t.getDate()+"\u65e5"},e.formatDateStr=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+this.formatNumStr(t.getHours())+":"+this.formatNumStr(t.getMinutes())+":"+this.formatNumStr(t.getSeconds())},e.formatDateStr2=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"-"+this.formatNumStr(t.getHours())+"-"+this.formatNumStr(t.getMinutes())+"-"+this.formatNumStr(t.getSeconds())},e.formatDateStr3=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},e.formatDateStr4=function(e){var t=new Date(e);return cc.js.formatStr(o.WordConfig.getWord(60687),t.getFullYear(),t.getMonth()+1,t.getDate())},e.formatDateStr5=function(e){var t=new Date(e);return cc.js.formatStr(o.WordConfig.getWord(60688),t.getMonth()+1,t.getDate())},e.formatDateStr6=function(e){var t=new Date(e);return cc.js.formatStr(o.WordConfig.getWord(60689),t.getMonth()+1,t.getDate(),this.formatNumStr(t.getHours()))},e.formatDateStr7=function(e){var t=new Date(e);return cc.js.formatStr(o.WordConfig.getWord(60687),t.getFullYear(),t.getMonth()+1,t.getDate())},e.formatHourMinStr=function(e){var t=new Date(e);return this.formatNumStr(t.getHours())+":"+this.formatNumStr(t.getMinutes())},e.formatHourMinSecondStr=function(e){var t=new Date(e);return this.formatNumStr(t.getHours())+":"+this.formatNumStr(t.getMinutes())+":"+this.formatNumStr(t.getSeconds())},e.now=function(){return(new Date).getTime()},e.betweenTime=function(e,t){var i=new Date;return i.getTime()>=e&&i.getTime()<=t},e.formatLeftTime0=function(e){var t=Math.floor(e/36e5)%24,i=Math.floor(e/6e4)%60,n=Math.floor(e/1e3)%60;return t>0?this.formatNumStr(t)+":"+this.formatNumStr(i)+":"+this.formatNumStr(n):this.formatNumStr(i)+":"+this.formatNumStr(n)},e.formatLeftTime1=function(e){var t=Math.floor(e/864e5),i=Math.floor(e/36e5)%24+24*t,n=Math.floor(e/6e4)%60,o=Math.floor(e/1e3)%60;return this.formatNumStr(i)+":"+this.formatNumStr(n)+":"+this.formatNumStr(o)},e.formatLeftTime2=function(e){var t=Math.floor(e/36e5)%24,i=Math.floor(e/6e4)%60,n=Math.floor(e/1e3)%60;return this.formatNumStr(t)+":"+this.formatNumStr(i)+":"+this.formatNumStr(n)},e.formatLeftTime=function(e){var t=Math.floor(e/864e5),i=Math.floor(e/36e5)%24,n=Math.floor(e/6e4)%60,a=Math.floor(e/1e3)%60;return t+o.WordConfig.getWord(61482)+this.formatNumStr(i)+":"+this.formatNumStr(n)+":"+this.formatNumStr(a)},e.formatLeftTime3=function(e){var t=Math.floor(e/864e5),i=Math.floor(e/36e5)%24,n=Math.floor(e/6e4)%60;Math.floor(e/1e3);return t>0?t+o.WordConfig.getWord(61482)+this.formatNumStr(i)+o.WordConfig.getWord(60473)+this.formatNumStr(n)+o.WordConfig.getWord(60474):this.formatNumStr(i)+o.WordConfig.getWord(60473)+this.formatNumStr(n)+o.WordConfig.getWord(60474)},e.formatLeftTime8=function(e){var t=new Date(e),i=t.getHours(),n=t.getMinutes();return i+o.WordConfig.getWord(61623)+n+o.WordConfig.getWord(60591)},e.formatLeftTime4=function(e){var t=Math.floor(e/36e5),i=Math.floor(e/6e4)%60;return t>0?t+o.WordConfig.getWord(60473)+i+o.WordConfig.getWord(60591):i+o.WordConfig.getWord(60591)},e.formatLeftTime5=function(e){var t=Math.floor(e/60),i=e%60;return(t>=10?t.toString():"0"+t)+":"+(i>=10?i.toString():"0"+i)},e.formatLeftTime6=function(e){var t=Math.floor(e/60),i=e%60;return(t>=10?t.toString():"0"+t)+"\u5206"+(i>=10?i.toString():"0"+i)+"\u79d2"},e.formatLeftTime7=function(e){var t=Math.floor(e/864e5),i=Math.floor(e/36e5)%24,n=Math.floor(e/6e4)%60;return t>0?t+o.WordConfig.getWord(61482)+this.formatNumStr(i)+"\u65f6":t<=0&&i>0?this.formatNumStr(i)+"\u65f6"+this.formatNumStr(n)+"\u5206":this.formatNumStr(n)+"\u5206"},e.isToday=function(e){var t=new Date,i=new Date(e);return i.getFullYear()==t.getFullYear()&&i.getMonth()==t.getMonth()&&i.getDate()==t.getDate()},e.getDateByStr=function(e){var t=e.split(" "),i=t[0].split("-"),n=t[1].split(":"),o=parseInt(i[0]),a=parseInt(i[1])-1,s=parseInt(i[2]),r=parseInt(n[0]),c=parseInt(n[1]),l=parseInt(n[2]);return new Date(o,a,s,r,c,l)},e.getPassDay=function(e){var t=n.ServerTime.getServerTime(),i=new Date(e),o=t-(i=new Date(i.getFullYear(),i.getMonth(),i.getDate())).getTime();return o<0&&(o=0),Math.floor(o/864e5)},e.getLeftDay=function(e){var t=new Date(n.ServerTime.getServerTime());t=new Date(t.getFullYear(),t.getMonth(),t.getDate());var i=new Date(e);i=new Date(i.getFullYear(),i.getMonth(),i.getDate());var o=e-n.ServerTime.getServerTime();return o<0&&(o=0),Math.floor(o/864e5)},e.getDay=function(e){return Math.floor(e/864e5)},e.fomatTimeBySecond=function(e,t){void 0===t&&(t=!0);var i=Math.floor(e/86400),n=Math.floor(e%86400/3600),o=Math.floor(e%86400%3600/60),a=Math.floor(e%86400%3600%60),s="";return s+=i>0?i+"\u5929":"",s+=n>0?n+"\u65f6":"",s+=o>0?o+"\u5206\u949f":"",t&&(s+=a>0?a+"\u79d2":""),s},e.fomatTimeBySecond2=function(e,t){void 0===t&&(t=!0);var i=Math.floor(e/86400),n=Math.floor(e%86400/3600),a=Math.floor(e%86400%3600/60),s=Math.floor(e%86400%3600%60),r="";return r+=i>0?i+o.WordConfig.getWord(61482):"",r+=n>0?n+o.WordConfig.getWord(60473):"",r+=a>0?a+o.WordConfig.getWord(60591):"",t&&(r+=s>0?s+o.WordConfig.getWord(60500):""),r},e}();i.default=a,cc._RF.pop()},{"../game/config/WordConfig":"WordConfig","../game/model/ServerTime":"ServerTime"}],DefaultConfig:[function(e,t,i){"use strict";cc._RF.push(t,"465544lCqRIebOQVODkog6d","DefaultConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../../engine/Logger"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dec="",t.value={},t.value1={},t.item=[],t.equip=[],t.ress=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.dec=e.dec,i.value=e.value,i.value1=e.value1,i.ress=e.ress,i.item=e.item,i.money=e.money,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)}),a.Logger.log("qwrr",this.configMap)},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){n==""+e&&(t=i)}),t},t.configMap=new Map,t}(o.JsonConfigBase);i.DefaultConfig=s,cc._RF.pop()},{"../../engine/Logger":"Logger","./JsonConfigBase":"JsonConfigBase"}],DevilSealConfig:[function(e,t,i){"use strict";cc._RF.push(t,"51fdbZZuZdFpZF5qDcbnByE","DevilSealConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){}}();i.DevilSealItemConf=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(Number(i),n)})},t.getGuideConfig=function(e){return this.configMap.get(e)},t.Config_Name="baguamonsterConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.DevilSealConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],DevilSealItem:[function(e,t,i){"use strict";cc._RF.push(t,"fc400P30xpMWbF3AtEnaywC","DevilSealItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../config/ITemsConfig"),l=e("../../../game/config/MonsterConfig"),d=e("../../network/SocketClient"),f=e("../../model/ServerTime"),g=e("../../utils/UIHelper"),h=e("../../model/BaGuaModel"),u=e("../../prefab/ItemPrefab"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txspriteFrame=[],t.dttime=0,t.updatebool=!1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(e){this.model=e,this.progressBar=this.node.getChildByName("progressBar"),this.progressBar.active=!1,this.siwangsp=this.node.getChildByName("siwangsp"),this.btntz=this.node.getChildByName("btntz"),this.btntz.on(cc.Node.EventType.TOUCH_END,this.onBtnTz,this),this.iconNode=this.node.getChildByName("icon"),this.conditionnode=this.node.getChildByName("conditionnode"),this.zllabel=this.conditionnode.getChildByName("zllabel"),this.resurrectionnode=this.node.getChildByName("resurrectionnode"),this.timelabel=this.resurrectionnode.getChildByName("timelabel"),this.node.getChildByName("btnyl").on(cc.Node.EventType.TOUCH_END,this.onBtnYl,this),this.node.getChildByName("name").getComponent(cc.Label).string=l.MonsterConfig.getMonsterConfigById(e.id).name,this.node.getChildByName("bosstx").getComponent(cc.Sprite).spriteFrame=this.txspriteFrame[e.order-1];for(var t=this.node.getChildByName("ItemPrefabnode").children,i=0,n=0;n<e.reward_show.length;n++){var o=c.ITemsConfig.getITemsConfigById(e.reward_show[n]);t[i++].getComponent(u.default).init(o,!0)}},t.prototype.onEnable=function(){},t.prototype.onRefresh=function(e,t,i,n){this.updatebool=!1,this.dttime=0,this.bosstime=0,this.progressBar.active=1==t,this.siwangsp.active=2==t,this.progressBar.getComponent(cc.ProgressBar).progress=i/1e4,this.btntz.active=0==n&&h.default.power>=this.model.battle,this.iconNode.active=h.default.resttimes>0&&0==n&&h.default.power>=this.model.battle,this.resurrectionnode.active=0!=n&&h.default.power>=this.model.battle,this.conditionnode.active=h.default.power<this.model.battle,this.zllabel.getComponent(cc.Label).string=g.UIHelper.tranNumber(h.default.power)+"/"+g.UIHelper.tranNumber(this.model.battle),n>0&&(this.updatebool=!0,this.bosstime=Math.floor((1e3*n-f.ServerTime.getServerTime())/1e3),this.timelabel.getComponent(cc.Label).string=this.gettime(this.bosstime))},t.prototype.onShow=function(){},t.prototype.onBtnYl=function(){s.default.instance.createView(r.default.gameView.devilSealPreview,null,this.model.reward_all)},t.prototype.onBtnTz=function(){d.default.s_req_gossip_boss_info(),d.default.s_req_enter_gossip_boss(1,this.model.id)},t.prototype.update=function(e){this.updatebool&&(this.dttime>=1?(this.dttime=0,this.bosstime=--this.bosstime<=0?0:this.bosstime,this.timelabel.getComponent(cc.Label).string=this.gettime(this.bosstime),this.bosstime<=1&&d.default.s_req_gossip_boss_info()):this.dttime+=e)},t.prototype.gettime=function(e){var t="",i=Math.floor(e/60);return i>0&&(t+=i+"\u5206"),t+=e%60+"\u79d2"},o([C({type:[cc.SpriteFrame]})],t.prototype,"txspriteFrame",void 0),t=o([m],t)}(a.default);i.DevilSealItem=_,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../../game/config/MonsterConfig":"MonsterConfig","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../model/BaGuaModel":"BaGuaModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/UIHelper":"UIHelper"}],DevilSealView:[function(e,t,i){"use strict";cc._RF.push(t,"98cf5qGOuVKlrntmtBIMLuN","DevilSealView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../config/DevilSealConfig"),l=e("../../../engine/ProtoConfig"),d=e("../../../engine/ProtoUtils"),f=e("../../network/SocketClient"),g=e("../../../engine/EventManager"),h=e("../../event/CommonEvent"),u=e("../PublicTipView"),p=e("../../manager/RedPointManager"),m=e("./DevilSealItem"),C=e("../../model/BaGuaModel"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.devilSealItemPrefab=null,t.bossitemlist=[],t.resttimes=0,t.buytimes=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(){var e=this;this.onAddEvent(this.findChild(this.node,"btn_addRing"),function(){s.default.instance.createView(r.default.gameView.devilSealBuyTip,null,e.buytimes)}),this.onAddEvent(this.findChild(this.node,"button_wenhao"),function(){s.default.instance.createView(r.default.gameView.PublicTipView,null,u.RuleType.TYPE_DevilSeal)}),this.ringNum=this.findChild(this.node,"ringNum"),this.content=this.findChild(this.node,"scrollView/view/content"),this.content.removeAllChildren(),c.DevilSealConfig.configMap.forEach(function(t){var i=cc.instantiate(e.devilSealItemPrefab),n=C.default.itemlistdata[t.id];i.getComponent(m.DevilSealItem).init(t),e.content.addChild(i),e.bossitemlist[t.id]=i,n&&i.getComponent(m.DevilSealItem).onRefresh(n.boss_id,n.boss_state,n.boss_hp,n.revive_time)}),g.EventManager.instance.on(h.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),this.getBossInfo()},t.prototype.onEnable=function(){C.default.isClickRed=!0,g.EventManager.instance.on(h.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),this.getBossInfo(),this.schedule(this.getBossInfo,10)},t.prototype.onInitBase=function(){},t.prototype.getBossInfo=function(){f.default.s_req_gossip_boss_info()},t.prototype.onSocketRespMsg=function(e,t){var i=this;if(e==l.ProtoConfig.c_req_gossip_boss_info){var n=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_gossip_boss_info,t);this.resttimes=C.default.resttimes=n.getRestTimes(),this.buytimes=n.getBuyTimes(),n.getListList().forEach(function(e){var t=new C.Devilinfo;t.boss_id=e.getBossId(),t.boss_state=e.getBossState(),t.boss_hp=e.getBossHp(),t.revive_time=e.getReviveTime(),C.default.itemlistdata[t.boss_id]=t;var n=i.bossitemlist[t.boss_id];n&&n.getComponent(m.DevilSealItem).onRefresh(t.boss_id,t.boss_state,t.boss_hp,t.revive_time)}),this.ringNum.getComponent(cc.Label).string=this.resttimes.toString(),p.default.getInstance().socketRespMsg(e)}else if(e==l.ProtoConfig.c_req_enter_gossip_boss){var o=(n=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_enter_gossip_boss,t)).getType(),a=n.getBossHp();1==o?s.default.instance.createView(r.default.gameView.devilSealFightView,null,a):2==o?s.default.instance.isOpen(r.default.gameView.devilSealEndView)||s.default.instance.closeView(r.default.gameView.devilSealFightView):this.getBossInfo()}else e==l.ProtoConfig.c_user_login&&this.getBossInfo()},o([y(cc.Prefab)],t.prototype,"devilSealItemPrefab",void 0),t=o([v],t)}(a.default);i.DevilSealView=b,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DevilSealConfig":"DevilSealConfig","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/BaGuaModel":"BaGuaModel","../../network/SocketClient":"SocketClient","../PublicTipView":"PublicTipView","./DevilSealItem":"DevilSealItem"}],DialogCheckView:[function(e,t,i){"use strict";cc._RF.push(t,"832cfBgCPhFsasBt7zPdefv","DialogCheckView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../utils/MusicHelper"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.toggle=this.findChild(this.node,"view/panel/toggle").getComponent(cc.Toggle),this.tipLabel=this.node.getChildByName("view").getChildByName("panel").getChildByName("tipLabel").getComponent(cc.RichText),this.findChild(this.node,"view/panel/btnOk").on(cc.Node.EventType.TOUCH_END,this.onClickSure.bind(this)),this.findChild(this.node,"view/panel/btnCacel").on(cc.Node.EventType.TOUCH_END,this.onClickCancel.bind(this))},t.prototype.onInitChild=function(e,t,i){void 0===i&&(i=!1),this.showStr=e,this.again=i,this.callback=t},t.prototype.onShow=function(){r.default.instance.setTopUI(c.default.gameView.DialogCheck),this.tipLabel.string=this.showStr,this.toggle.node.active=this.again},t.prototype.onClickSure=function(){s.MusicHelper.play_click(),this.closeView(),this.callback(!0,this.toggle.isChecked)},t.prototype.onClickCancel=function(){s.MusicHelper.play_click(),this.closeView(),this.callback(!1,this.toggle.isChecked)},t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ViewConfig":"ViewConfig","../utils/MusicHelper":"MusicHelper"}],DisCountConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3ebb5rTJ9RJe40A4BRc7iQG","DisCountConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.level=e.level,i.version=e.version,i.gold=e.gold,i.chargeid=e.chargeid,i.money=e.money,i.num=e.num,i},t.getConfigBylevel=function(e){var t;return this.configMap.forEach(function(i,n){i.level==e&&(t=i)}),t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(parseInt(i),n),n.level=parseInt(i)})},t.Config_Name="giftConfig",t.configMap=new Map,t}(e("../../config/JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"../../config/JsonConfigBase":"JsonConfigBase"}],DisCountModel:[function(e,t,i){"use strict";cc._RF.push(t,"df7edxvmmFGxrGQ1CNfN+tN","DisCountModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../engine/Logger"),o=e("../../../engine/EventManager"),a=e("../../event/CommonEvent"),s=e("../../model/RedDotModel"),r=e("../../manager/RedPointManager"),c=e("../../../engine/ProtoConfig"),l=e("../../../engine/ProtoUtils"),d=e("../../model/RoleInfoModel"),f=e("../../../engine/UIManager"),g=e("../../config/ViewConfig"),h=e("../../../engine/LocalStorage");(function(e){e[e.status_weishouqing=0]="status_weishouqing",e[e.status_shouqing=1]="status_shouqing"})(i.ChongzhiGiftInfoType||(i.ChongzhiGiftInfoType={}));var u=function(){return function(){}}();i.ChongzhiGiftInfo=u;var p=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[r.RedPointId.LunHui],this.protos=[c.ProtoConfig.c_seq_rune_gift],r.default.getInstance().addHandler(this)}return e.proto2Model=function(t){var i=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_seq_rune_gift,t);this.state=i.getCheckRuneGift(),0==this.state?d.default.instance.changeWorld(2):1==this.state&&(f.default.instance.createView(g.default.gameView.ChangeWorldGiftView),this.firstShow=!0,n.Logger.log("c_seq_rune_gift====",this.firstShow,e.firstShow))},e.getNumById=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.productId==e+"")return i.prodRepo}return 0},e.getModel=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.productId==e)return i}},e.updateNum=function(e,t){for(var i=0;i<this.modelList.length;i++){var n=this.modelList[i];n.productId==e&&(n.prodRepo=t)}o.EventManager.instance.dispatch(a.CommonEvent.Event_DisCount_Change)},e.proto2ModelList=function(t){var i=t.getShopItemListList();this.modelList=[],e.total_charge_num=t.getChargeall();for(var n=0;n<i.length;n++){var o=new e;this.modelList.push(o),o.productId=i[n].getProductid(),o.prodRepo=i[n].getProdrepo()}},e.updateHongDian=function(){for(var e=0;e<this.modelList.length;e++){if(this.modelList[e].prodRepo>0)return s.default.isXianShi=!0,!0}return s.default.isXianShi=!1,!1},e.prototype.checkRedPoint=function(){var t=h.default.getBoolean("ChangeWorldGiftView"),i=(e.state,1==e.state&&!t);return{id:r.RedPointId.LunHui,type:r.RedPointType.Default,show:i}},e.modelList=[],e.firstShow=!1,e}();i.default=p,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/LocalStorage":"LocalStorage","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/RedDotModel":"RedDotModel","../../model/RoleInfoModel":"RoleInfoModel"}],DisCountPrefabModel:[function(e,t,i){"use strict";cc._RF.push(t,"e4cc6dcpIZLxIi4pc5oEu35","DisCountPrefabModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../event/CommonEvent"),c=function(){return function(){}}();i.DisCountInfoModel=c;var l=function(){function e(){}return e.proto2ModelList=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_christmas_discount_info,t);e.startTime=i.getActstarttime(),e.endTime=i.getActendtimes(),e.modelList=[];for(var l=i.getShopinfoList(),d=0;d<l.length;d++){var f=new c;f.shopId=l[d].getShopid(),f.shopNum=l[d].getShopnum(),e.modelList[d]=f}o.Logger.log("DisCountPrefabModel=====",i),n.EventManager.instance.dispatch(r.CommonEvent.Event_ShengDanDiscount)},e.protoModelList=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_newYear_discount_info,t);e.YuandanStartTime=i.getActstarttime(),e.YuandanEndTime=i.getActendtimes(),e.modelList1=[];for(var l=i.getShopinfoList(),d=0;d<l.length;d++){var f=new c;f.shopId=l[d].getShopid(),f.shopNum=l[d].getShopnum(),e.modelList1[d]=f}o.Logger.log("DisCountPrefabModel=====2===",i),n.EventManager.instance.dispatch(r.CommonEvent.Event_YuandanDiscount)},e.modelList=[],e.modelList1=[],e}();i.DisCountPrefabModel=l,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent"}],DisCountPrefabView:[function(e,t,i){"use strict";cc._RF.push(t,"10e7aA7xVhO051VNHFXsEoO","DisCountPrefabView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ViewBase"),l=e("../config/ActivitygiftConfig"),d=e("../config/ChongZhiConfig"),f=e("../config/GameConfig"),g=e("../config/GameConst"),h=e("../event/CommonEvent"),u=e("../model/DisCountPrefabModel"),p=e("../model/ItemInfoModel"),m=e("../network/SocketClient"),C=e("../prefab/ItemPrefab"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startLevel=333,t.itemList=[],t}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(h.CommonEvent.Event_ShengDanDiscount,this.onfresh,this),m.default.s_get_christmas_discount_info(),this.onfresh()},t.prototype.onfresh=function(){for(var e=this,t=0;t<this.itemList.length;t++)this.itemList[t].active=!1;var i=l.default.getConfigsByActId(5);if(i){for(var n=function(t){var n=o.findChild(o.node,"fundPanel/img_ui_shuangdan_kuang/scrollView/view/content/panel"),a=void 0;o.itemList[t]?a=o.itemList[t]:(a=cc.instantiate(n),o.itemList.push(a),a.parent=n.parent),n.active=!1,a.active=!0;var s=d.ChongZhiConfig.getConfigById(o.startLevel+t),c=a.getChildByName("txtDefault0").getComponent(cc.Label),h=a.getChildByName("txtLeft").getComponent(cc.Label);a.getChildByName("muchIcon").active=f.GameConfig.sdkType!=f.SdkType.LoongCheer,c.string=s.getDefaultMoneyStr(),a.getChildByName("btnCharge1").getChildByName("txtCost").getComponent(cc.Label).string=s.getMoneyStr();var m=a.getChildByName("panel_bg").getChildByName("ItemPrefab");if(s.item){var _=[];for(var v in s.item)_.push(v);if(_.sort(),_)for(var y=0;y<_.length;y++){var b=void 0;b=cc.instantiate(m);var I=s.item[_[y]];b.getComponent(C.default).init(p.default.create(g.GameConst.ITEM_KIND.ITEM,_[y],I),!0),b.parent=m.parent}}if(s.resource)for(var M in s.resource){var w=void 0;w=cc.instantiate(m);var k=s.resource[M];w.getComponent(C.default).initResource(parseInt(M),k),w.parent=m.parent}m.active=!1;var S=a.getChildByName("btnCharge1"),P=a.getChildByName("fontclib_shouqing");S.active=!0,P.active=!1;var E=i[t];if(0!=u.DisCountPrefabModel.modelList.length){for(var L=0;L<u.DisCountPrefabModel.modelList.length;L++)if(t+1==u.DisCountPrefabModel.modelList[L].shopId){var T=l.default.getConfigById(u.DisCountPrefabModel.modelList[L].shopId);r.Logger.log("onfresh====",E.times,T.times,T),E.times-u.DisCountPrefabModel.modelList[L].shopNum<=0&&(S.active=!1,P.active=!0),h.string=Math.max(E.times-u.DisCountPrefabModel.modelList[L].shopNum,0)+""}}else h.string=E.times+"";o.onAddEvent(S,function(){e.buyGift(t)})},o=this,s=0;s<i.length;s++)n(s);this.node.getChildByName("fundPanel").getChildByName("continueTime").getComponent(cc.Label).string=a.default.formatDateStr4(1e3*u.DisCountPrefabModel.startTime)+"-"+a.default.formatDateStr4(1e3*u.DisCountPrefabModel.endTime)}},t.prototype.buyGift=function(e){var t=d.ChongZhiConfig.getChongZhiByIdAndPlatform(this.startLevel+e);r.Logger.log("buyGift==",t),m.default.req_charge(t.id)},t=o([v],t)}(c.default));i.default=y,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/ActivitygiftConfig":"ActivitygiftConfig","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../event/CommonEvent":"CommonEvent","../model/DisCountPrefabModel":"DisCountPrefabModel","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],DiscountChongZhiItem:[function(e,t,i){"use strict";cc._RF.push(t,"bbc8cJz7xlPRb9goP4IeJvC","DiscountChongZhiItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/Logger"),r=e("../../../engine/ViewBase"),c=e("../../config/ChaozhigifttypeConfig"),l=e("../../config/ChongZhiConfig"),d=e("../../config/ColorConfig"),f=e("../../config/GameConst"),g=e("../../config/ITemsConfig"),h=e("../../model/ServerTime"),u=e("../../network/SocketClient"),p=e("../../prefab/ItemPrefab"),m=e("./DisCountModel"),C=cc._decorator,_=C.ccclass,v=C.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteAtlas=null,t.ItemPrefab=null,t.leftTime=20,t}return n(t,e),t.prototype.onInitChild=function(e){this.info_obj=e,this.callbackFun&&this.unschedule(this.callbackFun),this.onShow()},t.prototype.onShow=function(){var e=this;this.temp_info=this.info_obj.config_info;var t=l.ChongZhiConfig.getConfigById(this.temp_info.charge_id);if(this.temp_info&&t){this.node.active=!0;var i=this.node.getChildByName("fontclib_jinbitehui_xiaobiaoti").getComponent(cc.Sprite),n=this.node.getChildByName("gouamaiNode"),o=n.getChildByName("libaoLabel_0").getComponent(cc.Label),a=n.getChildByName("libaoLabel_1").getComponent(cc.Label),s=this.node.getChildByName("shengyuNode").getChildByName("txtLeft").getComponent(cc.Label),r=this.node.getChildByName("xianliangNode"),d=r.getChildByName("timeLabel"),g=this.node.getChildByName("btnCharge"),u=g.getChildByName("goumaiNode").getComponent(cc.Sprite),p=this.node.getChildByName("btnOver"),C=this.node.getChildByName("weiyi").getComponent(cc.Sprite),_=(this.node.getChildByName("bili").getComponent(cc.Sprite),this.node.getChildByName("bili").getChildByName("buililab").getComponent(cc.Label)),v=this.node.getChildByName("itemALL");for(var y in i.spriteFrame=this.spriteAtlas.getSpriteFrame("xiazi_zhongzhilibao_"+this.temp_info.type),u.spriteFrame=this.spriteAtlas.getSpriteFrame("xiazi_goumai_"+t.money),s.string=this.info_obj.rest_cnt.toString(),this.onAddEvent(g,this.buyGift.bind(this,t)),n.active=!0,t.resource)if(y==f.GameConst.RES_TYPE.YUAN_BAO.toString()){o.string=t.resource[y];break}if(a.string=this.temp_info.show_price.toString(),_.string=this.temp_info.discount+"%","\u552f\u4e00"==this.temp_info.tag?C.spriteFrame=this.spriteAtlas.getSpriteFrame("xiazi_zhongzhilibao_weiyi"):"\u7545\u9500"==this.temp_info.tag?C.spriteFrame=this.spriteAtlas.getSpriteFrame("xiazi_zhongzhilibao_changxiao"):"\u8d85\u503c"==this.temp_info.tag?C.spriteFrame=this.spriteAtlas.getSpriteFrame("xiazi_zhongzhilibao_chaozhi"):C.spriteFrame=null,this.info_obj.status==m.ChongzhiGiftInfoType.status_shouqing?(p.active=!0,g.active=!1):this.info_obj.status==m.ChongzhiGiftInfoType.status_weishouqing&&(p.active=!1,g.active=!0),0==c.ChaozhigifttypeConfig.configMap.get(this.info_obj.type).duration)r.active=!1;else{r.active=!0;h.ServerTime.getServerTime();this.leftTime=(1e3*this.info_obj.end_time-h.ServerTime.getServerTime())/1e3;var b=function(){e.leftTime=(1e3*e.info_obj.end_time-h.ServerTime.getServerTime())/1e3,e.leftTime<=0&&(r.active=!1,e.unschedule(b),e.getSuperGiftInfo()),e.refresh(e.leftTime,d)};this.leftTime<=0?r.active=!1:(this.schedule(b,1),this.callbackFun=b)}for(var I=0;I<v.children.length;I++)v.children[I].active=!1;var M=0;for(var w in this.temp_info.ress){var k=this.temp_info.ress[w];for(var S in k)this.initaward_res(Number(S),k[S],v,M),M++}for(var w in M=0,this.temp_info.rewards){k=this.temp_info.rewards[w];for(var S in k)this.initaward_item(S,k[S],v,M),M++}}},t.prototype.refresh=function(e,t){var i=t.getComponent(cc.Label);i.string=e<=0?"--":e>86400?a.default.formatLeftTime(1e3*e):a.default.formatLeftTime1(1e3*e),t.color=e<3600?d.ColorConfig.RedColor:d.ColorConfig.GreenColor},t.prototype.initaward_res=function(e,t,i,n){var o=i.getChildByName("ResourceCell"+n);o||((o=cc.instantiate(this.ItemPrefab)).name="ResourceCell"+n),o.active=!0,o.parent=i,o.getComponent(p.default).initResource(e,t)},t.prototype.initaward_item=function(e,t,i,n){var o=g.ITemsConfig.getITemsConfigById(e);if(o){var a=i.getChildByName("awardCell"+n);a||((a=cc.instantiate(this.ItemPrefab)).name="awardCell"+n),a.active=!0,a.parent=i,a.getComponent(p.default).init(o,!0),a.getComponent(p.default).setNumTxt(t)}},t.prototype.getSuperGiftInfo=function(){u.default.s_req_super_gift_info()},t.prototype.buyGift=function(e){s.Logger.log("buyGift==",e),u.default.req_charge(e.id)},t.MagicId={},o([v({type:cc.SpriteAtlas})],t.prototype,"spriteAtlas",void 0),o([v(cc.Prefab)],t.prototype,"ItemPrefab",void 0),t=o([_],t)}(r.default);i.default=y,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/Logger":"Logger","../../../engine/ViewBase":"ViewBase","../../config/ChaozhigifttypeConfig":"ChaozhigifttypeConfig","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","./DisCountModel":"DisCountModel"}],DiscountView:[function(e,t,i){"use strict";cc._RF.push(t,"5e404hS44ZNP7TlqzR+5xRw","DiscountView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/LocalStorage"),r=e("../../../engine/Logger"),c=e("../../../engine/ProtoConfig"),l=e("../../../engine/ProtoUtils"),d=e("../../../engine/UIManager"),f=e("../../../engine/ViewBase"),g=e("../../config/ChaozhigiftConfig"),h=e("../../config/ChaozhigifttypeConfig"),u=e("../../config/ChongZhiConfig"),p=e("../../config/ColorConfig"),m=e("../../config/EquipConfig"),C=e("../../config/GameConfig"),_=e("../../config/GameConst"),v=e("../../config/ITemsConfig"),y=e("../../config/MapConfig"),b=e("../../config/ViewConfig"),I=e("../../event/CommonEvent"),M=e("../../manager/RedPointManager"),w=e("../../model/ItemInfoModel"),k=e("../../model/JingJieModel"),S=e("../../network/SocketClient"),P=e("../../prefab/ItemPrefab"),E=e("../../sdk/SdkHelper"),L=e("../../utils/MusicHelper"),T=e("./DisCountConfig"),R=e("./DisCountModel"),N=cc._decorator,B=N.ccclass,A=N.property,G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startLevel=1,t.spriteAtlas=null,t.ItemPrefabNode=null,t.chongzhiInfoArr=[],t}return n(t,e),t.prototype.onShow=function(){E.default.isIos()&&C.GameConfig.sdkType==C.SdkType.BingNiao&&(this.startLevel=101),d.default.instance.setTopUI(b.default.gameView.DiscountView),this.item_node=this.findChild(this.node,"itemCell0"),this.node.children.forEach(function(e,t){e.active=!1}),1==R.default.state&&s.default.setBoolean("ChangeWorldGiftView",!0),M.default.getInstance().checkRedPointById(M.RedPointId.LunHui),this.getSuperGiftInfo(),a.EventManager.instance.on(I.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},t.prototype.onHide=function(){},t.prototype.onSocketRespMsg=function(e,t){var i=this;e==c.ProtoConfig.c_req_super_gift_info&&(this.chongzhiInfoArr=[],l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_req_super_gift_info,t).getGiftListList().forEach(function(e){var t=new R.ChongzhiGiftInfo;t.id=e.getId(),t.type=e.getType(),t.end_time=e.getEndTime(),t.status=e.getStatus();h.ChaozhigifttypeConfig.configMap;t.config_info=g.ChaozhigiftConfig.getConfigById(t.id),t.sort=h.ChaozhigifttypeConfig.configMap.get(t.type).sort,1===t.status&&(t.sort=1e4*t.sort),t.rest_cnt=e.getRestCnt(),i.chongzhiInfoArr.push(t)}),this.chongzhiInfoArr.sort(function(e,t){return e.sort-t.sort}),this.onfresh2())},t.prototype.getSuperGiftInfo=function(){S.default.s_req_super_gift_info()},t.prototype.onfresh2=function(){for(var e=0;e<this.chongzhiInfoArr.length;e++)this.initItem(this.findChild(this.node,"itemCell"+e),this.chongzhiInfoArr[e],e)},t.prototype.initItem=function(e,t,i){var n=t.config_info,o=u.ChongZhiConfig.getConfigById(n.charge_id);n&&o&&(e||((e=cc.instantiate(this.item_node)).name="itemCell"+i,this.node.addChild(e)),e.getComponent("DiscountChongZhiItem").onInitChild(t))},t.prototype.initaward_res=function(e,t,i,n){var o=i.getChildByName("ResourceCell"+n);o||((o=cc.instantiate(this.ItemPrefabNode)).name="ResourceCell"+n),o.active=!0,o.parent=i,o.getComponent(P.default).initResource(e,t)},t.prototype.initaward_item=function(e,t,i,n){var o=v.ITemsConfig.getITemsConfigById(e);if(o){var a=i.getChildByName("awardCell"+n);a||((a=cc.instantiate(this.ItemPrefabNode)).name="awardCell"+n),a.active=!0,a.parent=i,a.getComponent(P.default).init(o,!0),a.getComponent(P.default).setNumTxt(t)}},t.prototype.initaward_eauip=function(e,t,i,n,o){void 0===o&&(o=-1);var a=m.EquipConfig.getEquipConfigById(e);if(o>=0&&(a.quality=o),a){var s=cc.instantiate(this.ItemPrefabNode);s.active=!0,s.parent=i,s.getComponent(P.default).init(a,!0),s.getComponent(P.default).setNumTxt(t)}},t.prototype.onfresh=function(){for(var e=0;e<7;e++){for(var t=T.default.getConfigBylevel(this.startLevel+e),i=this.findChild(this.node,"item"+e),n=0;n<t.money.length;n++){if(R.default.total_charge_num<=t.money[n]){if(t.num[n]<=0){i.active=!1;break}i.active=!0;var o=i.getChildByName("txtLeft").getComponent(cc.Label);o.string=R.default.getNumById(t.level)+"",R.default.getNumById(t.level)<1&&(o.node.color=p.ColorConfig.RedColor,o.string="0")}var a=this.findChild(this.node,"item5");k.JingJieModel.hadOpenJingJie(y.MapConfig.WORLD.LunHui)?a.active=!0:a.active=!1}for(var s=0;s<t.chargeid.length;s++){var r=i.getChildByName("btnCharge"+s);this.onAddEvent(r,this.onClickCharge.bind(this,t,t.chargeid[s]));var c=i.getChildByName("btnOver"+s);R.default.getNumById(t.level)<=0?(c.active=!0,r.active=!1):(c.active=!1,r.active=!0);var l=i.getChildByName("yuanbao"+s),d=u.ChongZhiConfig.getConfigById(t.chargeid[s]),f=0;if(d.item)for(var g in d.item){var h=i.getChildByName("ItemPrefab"+s+"_"+f),m=d.item[g];h.getComponent(P.default).init(w.default.create(_.GameConst.ITEM_KIND.ITEM,g,m),!0),f++}if(l)l.getChildByName("yuanbaoNum").getComponent(cc.Label).string=d.resource[2];var C=i.getChildByName("txtGold");C&&(C.getComponent(cc.Label).string=d.resource[1]);var v=i.getChildByName("txtDefault"+s).getComponent(cc.Label),b=r.getChildByName("txtCost").getComponent(cc.Label);v.string=d.getDefaultMoneyStr(),b.string=d.getMoneyStr()}}},t.prototype.buyGift=function(e){r.Logger.log("buyGift==",e),S.default.req_charge(e.id)},t.prototype.onClickCharge=function(e,t){r.Logger.log("onClickCharge==",e,t),L.MusicHelper.play_click(),S.default.s_seq_limitshop(e.level,1,t)},t.DisCountList=[],o([A({type:cc.SpriteAtlas})],t.prototype,"spriteAtlas",void 0),o([A(cc.Prefab)],t.prototype,"ItemPrefabNode",void 0),t=o([B],t)}(f.default);i.default=G,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/LocalStorage":"LocalStorage","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChaozhigiftConfig":"ChaozhigiftConfig","../../config/ChaozhigifttypeConfig":"ChaozhigifttypeConfig","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MapConfig":"MapConfig","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ItemInfoModel":"ItemInfoModel","../../model/JingJieModel":"JingJieModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../sdk/SdkHelper":"SdkHelper","../../utils/MusicHelper":"MusicHelper","./DisCountConfig":"DisCountConfig","./DisCountModel":"DisCountModel"}],DoubleAdView:[function(e,t,i){"use strict";cc._RF.push(t,"745eeExGUxLc7cLqV13gyFE","DoubleAdView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/ViewBase"),r=e("../model/ActivityOpenModel"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.txtTime=this.node.getChildByName("txtTime").getComponent(cc.Label);var e=r.default.getOpenActivityModel(16);this.txtTime.string=e?a.default.formatDateStr4(1e3*e.actStartTime)+"-"+a.default.formatDateStr4(1e3*e.actEndTimes):""},t=o([l],t)}(s.default));i.default=d,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/ViewBase":"ViewBase","../model/ActivityOpenModel":"ActivityOpenModel"}],DoubleGetView:[function(e,t,i){"use strict";cc._RF.push(t,"da124Wto0JNHKBjHtuQjw4h","DoubleGetView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/ViewBase"),r=e("../model/ActivityOpenModel"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.txtTime=this.node.getChildByName("txtTime").getComponent(cc.Label);var e=r.default.getOpenActivityModel(15);this.txtTime.string=e?a.default.formatDateStr4(1e3*e.actStartTime)+"-"+a.default.formatDateStr4(1e3*e.actEndTimes):""},t=o([l],t)}(s.default));i.default=d,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/ViewBase":"ViewBase","../model/ActivityOpenModel":"ActivityOpenModel"}],DropDownBox:[function(e,t,i){"use strict";cc._RF.push(t,"5e30cV73aNDqpW3f6IAcMiS","DropDownBox");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/EventManager"),r=e("../../event/CommonEvent"),c=e("../../model/SettingModel"),l=e("../../config/WordConfig"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currSelet=0,t.itemList=[],t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){},t.prototype.onShow=function(){},t.prototype.onEnable=function(){s.EventManager.instance.on(r.CommonEvent.Event_SettingBgClick,this.hideDropBox,this),s.EventManager.instance.on(r.CommonEvent.Event_AutoRobotBgClick,this.hideDropBox,this)},t.prototype.init=function(e,t){void 0===e&&(e=[]),this.dropType=t,this.itemList=e,this.item=this.findChild(this.node,"Template/view/content/item"),this.item.active=!1,this.template=this.findChild(this.node,"Template"),this.template.active=!1,this.labelCaption=this.findChild(this.node,"DropDownBox/LabelCaption");for(var n=0;n<this.itemList.length;n++){var o=cc.instantiate(this.item);o.active=!0,this.dropType==i.levelType?o.getChildByName("Label").getComponent(cc.Label).string=this.itemList[n]+l.WordConfig.getWord(60433):this.dropType==i.runeType?o.getChildByName("Label").getComponent(cc.Label).string=this.itemList[n]:this.dropType==i.pensentType&&(o.getChildByName("Label").getComponent(cc.Label).string=this.itemList[n]+"%"),o.parent=this.item.parent,o.on(cc.Node.EventType.TOUCH_END,this.itemCallBack.bind(this,n))}this.refresh()},t.prototype.refresh=function(){this.dropType==i.levelType?(this.currSelet=c.SettingModel.levelSelet,this.itemList[this.currSelet]?this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet]+l.WordConfig.getWord(60433):this.labelCaption.getComponent(cc.Label).string=this.itemList[0]+l.WordConfig.getWord(60433)):this.dropType==i.runeType?(this.currSelet=c.SettingModel.runeSelet,this.itemList[this.currSelet]?this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet]:this.labelCaption.getComponent(cc.Label).string=this.itemList[0]):this.dropType==i.pensentType?(this.currSelet=c.SettingModel.persentSelet,this.itemList[this.currSelet]?this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet]+"%":this.labelCaption.getComponent(cc.Label).string=this.itemList[0]):this.dropType==i.seletBossWorld?(this.currSelet=0,this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet]):this.dropType==i.seletKillType&&(this.currSelet=1,this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet])},t.prototype.itemCallBack=function(e){this.currSelet=e,this.dropType==i.levelType?this.itemList[this.currSelet]?this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet]+l.WordConfig.getWord(60433):this.labelCaption.getComponent(cc.Label).string=this.itemList[0]+l.WordConfig.getWord(60433):this.dropType==i.runeType?this.itemList[this.currSelet]?this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet]:this.labelCaption.getComponent(cc.Label).string=this.itemList[0]:this.dropType==i.pensentType&&(this.itemList[this.currSelet]?this.labelCaption.getComponent(cc.Label).string=this.itemList[this.currSelet]+"%":this.labelCaption.getComponent(cc.Label).string=this.itemList[0]),this.template.active=!1,this.dropType==i.levelType?c.SettingModel.changeLevelSelet(this.currSelet):this.dropType==i.runeType?c.SettingModel.changeRuneSelet(this.currSelet):this.dropType==i.pensentType?c.SettingModel.changePersentSelet(this.currSelet):this.dropType==i.seletBossWorld||(this.dropType,i.seletKillType)},t.prototype.showDropBox=function(){s.EventManager.instance.dispatch(r.CommonEvent.Event_SettingBgClick),s.EventManager.instance.dispatch(r.CommonEvent.Event_AutoRobotBgClick),this.template.active=!0},t.prototype.hideDropBox=function(){this.template.active=!1},t.levelType=1,t.runeType=2,t.pensentType=3,t.seletBossWorld=4,t.seletKillType=5,t=i=o([f],t)}(a.default));i.default=g,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/SettingModel":"SettingModel"}],DropDownPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"87655EQ1ENNjqxy2cw8VvZq","DropDownPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./ViewBase"),s=e("../game/config/ColorConfig"),r=cc._decorator,c=r.ccclass,l=(r.property,function(){return function(e,t,i){void 0===i&&(i=s.ColorConfig.WhiteColor),this.index=e,this.name=t,this.color=i}}());i.DropDownConfig=l;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t}return n(t,e),t.prototype.init=function(e,t,i){var n=this;void 0===t&&(t=0),void 0===i&&(i=null),this.configList=e,this.callback=i,this.selectIndex=t,this.selectItemNode=this.node.getChildByName("selectItemNode"),this.onAddEvent(this.selectItemNode,function(){n.templateView.active=!n.templateView.active}),this.txtSelect=this.selectItemNode.getChildByName("txtSelect").getComponent(cc.Label),this.templateView=this.node.getChildByName("templateView"),this.templateView.active=!1;var o=this.findChild(this.templateView,"view/content/tempItem");o.active=!1;for(var a=0;a<this.itemList.length;a++)this.itemList[a].destroy();this.itemList=[];for(a=0;a<this.configList.length;a++){var s=this.configList[a],r=cc.instantiate(o);r.parent=o.parent,r.active=!0,this.itemList.push(r),r.getChildByName("txtName").getComponent(cc.Label).string=s.name,r.getChildByName("txtName").color=s.color,this.onAddEvent(r,this.onClickItem.bind(this,s))}this.refresh()},t.prototype.onClickItem=function(e){this.selectIndex=e.index,this.templateView.active=!1,this.callback&&this.callback(e),this.refresh()},t.prototype.refresh=function(){var e=this.configList[this.selectIndex];this.txtSelect.string=e.name,this.txtSelect.node.color=e.color},t=o([c],t)}(a.default);i.DropDownPrefab=d,cc._RF.pop()},{"../game/config/ColorConfig":"ColorConfig","./ViewBase":"ViewBase"}],ElkRunConfig:[function(e,t,i){"use strict";cc._RF.push(t,"da1f5/E/B5G5YcXKvS79KDG","ElkRunConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.length=e.length,i.speed=e.speed,i.debuff=e.debuff,i.buffvalue=e.buffvalue,i.debuffvalue=e.debuffvalue,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id!=e||(t=i)}),t},t.Config_Name="ElkRun",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ElkRunConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],EquipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"95928tqmvpGUodpn1IMPsuy","EquipConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/Logger"),a=e("../../engine/RandomUtil"),s=e("../model/MagicModel"),r=e("../model/PrivilegeModel"),c=e("../model/RoleInfoModel"),l=e("../model/SettingModel"),d=e("./ColorConfig"),f=e("./GameConst"),g=e("./JsonConfigBase"),h=e("./MagicNameConfig"),u=e("./RandomFuMoConfig"),p=e("./RandomFuMoEntryConfig"),m=e("./SpriteFrameConfig"),C=e("./WordConfig");(function(e){e[e.Default=1001]="Default",e[e.DingZhi_FanRen=1002]="DingZhi_FanRen",e[e.Special_Ring=1003]="Special_Ring",e[e.LunHui=2001]="LunHui",e[e.DingZhi_LunHui=2002]="DingZhi_LunHui",e[e.XunZhang=1004]="XunZhang"})(i.EquipCid||(i.EquipCid={})),function(e){e[e.OK=1]="OK",e[e.NO=0]="NO"}(i.XIANJI_TYPE||(i.XIANJI_TYPE={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon="",t.d_jipin={atk:0,def:0,hp:0,mag:0,spt:48},t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=i,t.configMap.set(i,n)})},t.getEquipConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getProName=function(e){return[C.WordConfig.getWord(60711),C.WordConfig.getWord(60712),C.WordConfig.getWord(60713),C.WordConfig.getWord(60714)][e]},t.getCanMakeEquipConfig=function(e){var t=[],i=10*Math.floor(e/10)+10;this.configMap.forEach(function(e,n){e.level>=i-10&&e.level<i&&t.push(e)});for(var n=t.length-1;n>=0;n--){var o=t[n];1==o.dingzhi?t.splice(n,1):o.pro!=c.default.instance.occupation&&o.pro!=f.GameConst.OCCUPATION.None&&t.splice(n,1)}return t=a.default.randomArr(t,3)},t.setMarkSprite=function(e,t){var i=e||0;t&&t(null,m.SpriteFrameConfig.occupation_spriteframe.get(i))},t.randomBaseAddAttrList=function(e,t){var i,n=0,o=[];if(e==f.GameConst.QUALITY.GREEN?i=t.Magic:e==f.GameConst.QUALITY.BLUE?i=t.Rare:e==f.GameConst.QUALITY.PURPLE?i=t.Legendary:e==f.GameConst.QUALITY.ORANGE&&(i=t.ancient),i){var r=[];n=a.default.nextInt(i[0],i[1]);var c=a.default.randomIndexByPercent(t.Quality_entry)+1,l=Math.ceil(n/2),d=Math.floor(n/4);d<=0&&(d=1);for(var g=0;g<c-1;g++){var u=a.default.nextInt(d,l);r[g]=u,(n-=u)<=0&&(n=1)}var p=[];r.push(n);var m=[h.MagicNameConfig.MagicId.atk,h.MagicNameConfig.MagicId.mag,h.MagicNameConfig.MagicId.spt,h.MagicNameConfig.MagicId.def],C=t.Quality_value.concat();for(g=0;g<c;g++){var _=a.default.randomIndexByPercent(C);(b=new s.default).magicId=m[_],b.magicValue=r[g],C.splice(_,1),m.splice(_,1),p.push(b)}var v=[h.MagicNameConfig.MagicId.atk,h.MagicNameConfig.MagicId.mag,h.MagicNameConfig.MagicId.spt,h.MagicNameConfig.MagicId.def];for(g=0;g<v.length;g++)for(var y=0;y<p.length;y++){var b;(b=p[y]).magicId==v[g]&&o.push(b)}}return o},t.randomAddAttrList=function(e,t,i){void 0===i&&(i=[]);for(var n=[],r=e,c=u.RandomFuMoConfig.getMagicListByPosition(t.position),l=p.RandomFuMoEntryConfig.getRandomFuMoEntry(t.position,t.level),d=[l.atk,l.mag,l.spt,l.def,l.speed,l.DamageReduction,l.BonusDamage,l.HpDrain,l.MpDrain,l.magic_find1,l.equip_times,l.lucky,l.hp,l.mp,l.atk_p,l.mag_p,l.spt_p,l.hp_p,l.mp_p],f=[h.MagicNameConfig.MagicId.atk,h.MagicNameConfig.MagicId.mag,h.MagicNameConfig.MagicId.spt,h.MagicNameConfig.MagicId.def,h.MagicNameConfig.MagicId.speed,h.MagicNameConfig.MagicId.DamageReduction,h.MagicNameConfig.MagicId.BonusDamage,h.MagicNameConfig.MagicId.HpDrain,h.MagicNameConfig.MagicId.MpDrain,h.MagicNameConfig.MagicId.magic_find1,h.MagicNameConfig.MagicId.equip_times,h.MagicNameConfig.MagicId.lucky,h.MagicNameConfig.MagicId.hp,h.MagicNameConfig.MagicId.mp,h.MagicNameConfig.MagicId.atk_p,h.MagicNameConfig.MagicId.mag_p,h.MagicNameConfig.MagicId.spt_p,h.MagicNameConfig.MagicId.hp_p,h.MagicNameConfig.MagicId.mp_p],g=[],m=0;m<f.length;m++)g[m]=0;i&&i.length>0&&(g=i);for(m=0;m<r;m++){var C=a.default.randomIndexByPercent(d),_=f[C],v=u.RandomFuMoConfig.getOneRandomFuMoConfig(c,_);if(v){d[C]*=v.attenuation/1e4,g[C]++,g[C]>=v.statnum&&(g.splice(C,1),f.splice(C,1),d.splice(C,1));var y=new s.default;y.magicId=_;var b=u.RandomFuMoConfig.getMagicValueByConfig(v,t.level);y.magicValue=a.default.nextInt(b[0],b[1]),n.push(y)}else o.Logger.warn("\u968f\u673a\u5230\u4e0d\u5bf9\u7684\u9644\u9b54")}return n},t.getRandomAttColor=function(e,t){var i=this.getRandomAttrQuality(e,t);return d.ColorConfig.getEquipQualityColor(i)},t.getRandomAttrQuality=function(e,t){var i=u.RandomFuMoConfig.getRandomFuMoConfig(e,t.magicId),n=u.RandomFuMoConfig.getMagicValueByConfig(i,e.level);return this.getQualityByCurrAndMax(t.magicValue,n[1])},t.getQualityByCurrAndMax=function(e,t){var i=Math.floor(e/t*100);f.GameConst.QUALITY.WHITE;return 100==i?f.GameConst.QUALITY.ORANGE:i>=90?f.GameConst.QUALITY.PURPLE:i>=80?f.GameConst.QUALITY.BLUE:i>=70?f.GameConst.QUALITY.GREEN:f.GameConst.QUALITY.WHITE},t.getColorByCurrAndMax=function(e,t){var i=this.getQualityByCurrAndMax(e,t);return d.ColorConfig.getEquipQualityColor(i)},t.getMagicModelByMagicId=function(e,t){for(var i=0;i<t.length;i++)if(t[i].magicId==e)return t[i];return null},t.getTotalBaseAtriList=function(e,i){for(var n=t.getEquipConfigById(e),o=[],a=0;a<i.length;a++)o[a]=i[a].clone();var r=[h.MagicNameConfig.MagicId.atk,h.MagicNameConfig.MagicId.mag,h.MagicNameConfig.MagicId.spt,h.MagicNameConfig.MagicId.def,h.MagicNameConfig.MagicId.hp];for(a=0;a<r.length;a++){var c=this.getMagicModelByMagicId(r[a],o),l=r[a],d=0;c&&(d=c.magicValue),l==h.MagicNameConfig.MagicId.atk?d+=n.atk:l==h.MagicNameConfig.MagicId.mag?d+=n.mag:l==h.MagicNameConfig.MagicId.spt?d+=n.spt:l==h.MagicNameConfig.MagicId.def?d+=n.def:l==h.MagicNameConfig.MagicId.hp&&(d+=n.hp),!c&&d>0&&((c=new s.default).magicId=l,o.push(c)),c&&(c.magicValue=d)}return o},t.getLunHuiZhiLi=function(e,i,n){for(var o=0,a=this.getTotalBaseAtriList(e,i),s=t.getEquipConfigById(e),r=0;r<a.length;r++){var l=(p=a[r]).magicId,d=p.magicValue,g=0;(p.magicId==h.MagicNameConfig.MagicId.atk||p.magicId==h.MagicNameConfig.MagicId.mag||p.magicId==h.MagicNameConfig.MagicId.spt||p.magicId==h.MagicNameConfig.MagicId.atk_p||p.magicId==h.MagicNameConfig.MagicId.mag_p||p.magicId==h.MagicNameConfig.MagicId.spt_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.ZHAN_SHI||p.magicId!=h.MagicNameConfig.MagicId.atk&&p.magicId!=h.MagicNameConfig.MagicId.atk_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.FA_SHI||p.magicId!=h.MagicNameConfig.MagicId.mag&&p.magicId!=h.MagicNameConfig.MagicId.mag_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.DAO_SHI||p.magicId!=h.MagicNameConfig.MagicId.spt&&p.magicId!=h.MagicNameConfig.MagicId.spt_p)||(g=h.MagicNameConfig.getZhanLi(l,d)),o+=g}var u=0;for(r=0;r<n.length;r++){var p,m=(p=n[r]).color;(p.magicId==h.MagicNameConfig.MagicId.atk||p.magicId==h.MagicNameConfig.MagicId.mag||p.magicId==h.MagicNameConfig.MagicId.spt||p.magicId==h.MagicNameConfig.MagicId.atk_p||p.magicId==h.MagicNameConfig.MagicId.mag_p||p.magicId==h.MagicNameConfig.MagicId.spt_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.ZHAN_SHI||p.magicId!=h.MagicNameConfig.MagicId.atk&&p.magicId!=h.MagicNameConfig.MagicId.atk_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.FA_SHI||p.magicId!=h.MagicNameConfig.MagicId.mag&&p.magicId!=h.MagicNameConfig.MagicId.mag_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.DAO_SHI||p.magicId!=h.MagicNameConfig.MagicId.spt&&p.magicId!=h.MagicNameConfig.MagicId.spt_p)||(u+=s.xilian_zhanli[m])}var C=o+u;return Math.ceil(C)},t.getFanRenZhiLi=function(e,i,n){for(var o=0,a=this.getTotalBaseAtriList(e,i),s=t.getEquipConfigById(e),r=0;r<a.length;r++){var l=(p=a[r]).magicId,d=p.magicValue,g=0;(p.magicId==h.MagicNameConfig.MagicId.atk||p.magicId==h.MagicNameConfig.MagicId.mag||p.magicId==h.MagicNameConfig.MagicId.spt||p.magicId==h.MagicNameConfig.MagicId.atk_p||p.magicId==h.MagicNameConfig.MagicId.mag_p||p.magicId==h.MagicNameConfig.MagicId.spt_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.ZHAN_SHI||p.magicId!=h.MagicNameConfig.MagicId.atk&&p.magicId!=h.MagicNameConfig.MagicId.atk_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.FA_SHI||p.magicId!=h.MagicNameConfig.MagicId.mag&&p.magicId!=h.MagicNameConfig.MagicId.mag_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.DAO_SHI||p.magicId!=h.MagicNameConfig.MagicId.spt&&p.magicId!=h.MagicNameConfig.MagicId.spt_p)||(g=h.MagicNameConfig.getZhanLi(l,d)),o+=g}var u=0;for(r=0;r<n.length;r++){var p=n[r],m=this.getRandomAttrQuality(s,p);(p.magicId==h.MagicNameConfig.MagicId.atk||p.magicId==h.MagicNameConfig.MagicId.mag||p.magicId==h.MagicNameConfig.MagicId.spt||p.magicId==h.MagicNameConfig.MagicId.atk_p||p.magicId==h.MagicNameConfig.MagicId.mag_p||p.magicId==h.MagicNameConfig.MagicId.spt_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.ZHAN_SHI||p.magicId!=h.MagicNameConfig.MagicId.atk&&p.magicId!=h.MagicNameConfig.MagicId.atk_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.FA_SHI||p.magicId!=h.MagicNameConfig.MagicId.mag&&p.magicId!=h.MagicNameConfig.MagicId.mag_p)&&(c.default.instance.occupation!=f.GameConst.OCCUPATION.DAO_SHI||p.magicId!=h.MagicNameConfig.MagicId.spt&&p.magicId!=h.MagicNameConfig.MagicId.spt_p)||(u+=s.xilian_zhanli[m])}var C=o+u;return Math.ceil(C)},t.getFanRenZhiLiByDingZhi=function(e){var t=0;for(var i in e.d_jipin)if(e.d_jipin[i]>0){var n=parseInt(i),o=e.d_jipin[i],a=0;n==h.MagicNameConfig.MagicId.atk||n==h.MagicNameConfig.MagicId.mag||n==h.MagicNameConfig.MagicId.spt?c.default.instance.occupation==f.GameConst.OCCUPATION.ZHAN_SHI&&n==h.MagicNameConfig.MagicId.atk?a=h.MagicNameConfig.getZhanLi(n,o):c.default.instance.occupation==f.GameConst.OCCUPATION.FA_SHI&&n==h.MagicNameConfig.MagicId.mag?a=h.MagicNameConfig.getZhanLi(n,o):c.default.instance.occupation==f.GameConst.OCCUPATION.DAO_SHI&&n==h.MagicNameConfig.MagicId.spt&&(a=h.MagicNameConfig.getZhanLi(n,o)):a=h.MagicNameConfig.getZhanLi(n,o),t+=a}var s=0;for(var i in e.d_suiji)if(e.d_suiji[i]>0){var r=Number(i);r>=1&&r<=6&&(1!=r&&2!=r||c.default.instance.occupation!=f.GameConst.OCCUPATION.ZHAN_SHI)&&(3!=r&&4!=r||c.default.instance.occupation!=f.GameConst.OCCUPATION.FA_SHI)&&(5!=r&&6!=r||c.default.instance.occupation!=f.GameConst.OCCUPATION.DAO_SHI)||(s+=e.xilian_zhanli[e.xilian_zhanli.length-1])}var l=t+s;return Math.ceil(l)},t.getGridTypeByPart=function(e,t){void 0===t&&(t=!0);var i=-1;switch(e){case f.Position.WEAPON:i=f.GridType.WEAPON;break;case f.Position.CORSELET:i=f.GridType.CORSELET;break;case f.Position.BRACELET:i=t?f.GridType.BRACELET_lEFT:f.GridType.BRACELET_RIGHT;break;case f.Position.RING:i=t?f.GridType.RING_LEFT:f.GridType.RING_RIGHT;break;case f.Position.BELT:i=f.GridType.BELT;break;case f.Position.HELMET:i=f.GridType.HELMET;break;case f.Position.NECK_LACE:i=f.GridType.NECK_LACE;break;case f.Position.SHOE:i=f.GridType.SHOE;break;case f.Position.WEAPON_lunhui:i=f.GridType.WEAPON_lunhui;break;case f.Position.CORSELET_lunhui:i=f.GridType.CORSELET_lunhui;break;case f.Position.BRACELET_lunhui:i=t?f.GridType.BRACELET_lEFT_lunhui:f.GridType.BRACELET_RIGHT_lunhui;break;case f.Position.RING_lunhui:i=t?f.GridType.RING_LEFT_lunhui:f.GridType.RING_RIGHT_lunhui;break;case f.Position.BELT_lunhui:i=f.GridType.BELT_lunhui;break;case f.Position.HELMET_lunhui:i=f.GridType.HELMET_lunhui;break;case f.Position.NECK_LACE_lunhui:i=f.GridType.NECK_LACE_lunhui;break;case f.Position.SHOE_lunhui:i=f.GridType.SHOE_lunhui;break;case f.Position.RING_SHENLI:i=f.GridType.RING_SHENLI;break;case f.Position.RING_MABI:i=f.GridType.RING_MABI;break;case f.Position.RING_HUSHEN:i=f.GridType.RING_HUSHEN;break;case f.Position.RING_FUHUO:i=f.GridType.RING_FUHUO;break;case f.Position.RING_XUNZHANG:i=f.GridType.RING_XUNZHANG}return i},t.checkAutoRecover=function(e,t){var i=!1;if(l.SettingModel.notItselfEq&&t.pro!=c.default.instance.occupation&&t.pro!=f.GameConst.OCCUPATION.None?i=!0:l.SettingModel.ordinaryEq&&e<=f.GameConst.QUALITY.WHITE?i=!0:l.SettingModel.excellentEq&&e<=f.GameConst.QUALITY.GREEN?i=!0:l.SettingModel.excellentEqs&&e<=f.GameConst.QUALITY.BLUE&&(i=!0),i){var n={count:0,price:0,cream:0,quality:e,name:t.name};return r.default.hadRecoveryPrivilege()?(n.price=Math.floor(parseInt(t.price[e].split(":")[1])),n.cream=Math.floor(parseInt(t.recov_cream[e].split(":")[1]))):(n.price=Math.floor(.5*parseInt(t.price[e].split(":")[1])),n.cream=Math.floor(.5*parseInt(t.recov_cream[e].split(":")[1]))),n}return null},t.prototype.getPrice=function(e){return Math.floor(parseInt(this.price[e].split(":")[1]))},t.getWorld=function(e){return t.getEquipConfigById(e).world},t.RecoveryCoinConfig=[1,4,6,8,10],t.RecoveryCreamConfig=[1,2,6,30,300],t.configMap=new Map,t}(g.JsonConfigBase);i.EquipConfig=_,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/RandomUtil":"RandomUtil","../model/MagicModel":"MagicModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../model/SettingModel":"SettingModel","./ColorConfig":"ColorConfig","./GameConst":"GameConst","./JsonConfigBase":"JsonConfigBase","./MagicNameConfig":"MagicNameConfig","./RandomFuMoConfig":"RandomFuMoConfig","./RandomFuMoEntryConfig":"RandomFuMoEntryConfig","./SpriteFrameConfig":"SpriteFrameConfig","./WordConfig":"WordConfig"}],EquipContrastView:[function(e,t,i){"use strict";cc._RF.push(t,"220d5/yLutJ+5WD28lMrQZy","EquipContrastView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/ColorConfig"),l=e("../config/EquipConfig"),d=e("../config/GameConst"),f=e("../config/JingJieConfig"),g=e("../config/MadelzhulingConfig"),h=e("../config/MagicNameConfig"),u=e("../config/MapConfig"),p=e("../config/MedalConfig"),m=e("../config/RandomFuMoConfig"),C=e("../config/RuneConfig"),_=e("../config/SpecialRingConfig"),v=e("../config/SpecialRingEffectConfig"),y=e("../config/ViewConfig"),b=e("../config/WordConfig"),I=e("../model/BlessModel"),M=e("../model/EquipGridModel"),w=e("../model/ItemInfoModel"),k=e("../model/MagicModel"),S=e("../model/MakeEquipModel"),P=e("../model/RoleInfoModel"),E=e("../network/SocketClient"),L=e("../prefab/ItemPrefab"),T=e("../utils/MusicHelper"),R=cc._decorator,N=R.ccclass,B=(R.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t.config=null,t.normalPanel=null,t.ornamentsPanel=null,t.normalNodeList=[],t.ornamentsNodeList=[],t.wearBtnNodeList=[],t.closeCallFun=null,t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this.model=e,this.closeCallFun=t,this.isAuto=n,this.config=i.autoGetEquipConfig(this.model)},t.prototype.onShow=function(){if(s.default.instance.setTopUI(y.default.gameView.equipContrastView),this.normalPanel=this.node.getChildByName("normalPanel"),this.ornamentsPanel=this.node.getChildByName("ornamentsPanel"),this.normalNodeList.push(this.findChild(this.node,"normalPanel/node_1")),this.normalNodeList.push(this.findChild(this.node,"normalPanel/node_2")),this.ornamentsNodeList.push(this.findChild(this.node,"ornamentsPanel/node_1")),this.ornamentsNodeList.push(this.findChild(this.node,"ornamentsPanel/node_2")),this.ornamentsNodeList.push(this.findChild(this.node,"ornamentsPanel/node_3")),this.wearBtnNodeList.push(this.findChild(this.node,"normalPanel/node_2/btnWear_1")),this.wearBtnNodeList.push(this.findChild(this.node,"ornamentsPanel/node_3/btnWear_1")),this.wearBtnNodeList.push(this.findChild(this.node,"ornamentsPanel/node_3/btnWear_2")),this.model instanceof S.default)for(var e=0;e<this.wearBtnNodeList.length;e++)this.wearBtnNodeList[e].active=!1;else if(this.model instanceof w.default)for(e=0;e<this.wearBtnNodeList.length;e++)this.wearBtnNodeList[e].on(cc.Node.EventType.TOUCH_END,this.onClickWear.bind(this,e));var t=0;if(t=this.model?w.default.getItemAmountById(this.model.itemId):w.default.getItemAmount(this.model.itemType),this.is_have=t>0,t<=0)for(e=0;e<this.wearBtnNodeList.length;e++)this.wearBtnNodeList[e].active=!1;if(null!=this.model)if(this.config.position==d.Position.BRACELET||this.config.position==d.Position.BRACELET_lunhui){this.normalPanel.active=!1,this.ornamentsPanel.active=!0;var i=void 0,n=void 0;if(this.config.position==d.Position.BRACELET?(i=P.default.instance.getEquipModelByGrid(d.GridType.BRACELET_lEFT),n=P.default.instance.getEquipModelByGrid(d.GridType.BRACELET_RIGHT)):this.config.position==d.Position.BRACELET_lunhui&&(i=P.default.instance.getEquipModelByGrid(d.GridType.BRACELET_lEFT_lunhui),n=P.default.instance.getEquipModelByGrid(d.GridType.BRACELET_RIGHT_lunhui)),i&&n)this.normalPanel.active=!1,this.ornamentsPanel.active=!0,this.refreshOrnamentsNode(this.ornamentsNodeList[0],i),this.refreshOrnamentsNode(this.ornamentsNodeList[1],n),this.refreshOrnamentsNode(this.ornamentsNodeList[2],this.model);else{this.normalPanel.active=!0,this.ornamentsPanel.active=!1;var o=i||n;this.refreshNormalNode(this.normalNodeList[0],o,0),this.refreshNormalNode(this.normalNodeList[1],this.model,1)}}else if(this.config.position==d.Position.RING||this.config.position==d.Position.RING_lunhui){i=void 0,n=void 0;if(this.config.position==d.Position.RING?(i=P.default.instance.getEquipModelByGrid(d.GridType.RING_LEFT),n=P.default.instance.getEquipModelByGrid(d.GridType.RING_RIGHT)):this.config.position==d.Position.RING_lunhui&&(i=P.default.instance.getEquipModelByGrid(d.GridType.RING_LEFT_lunhui),n=P.default.instance.getEquipModelByGrid(d.GridType.RING_RIGHT_lunhui)),i&&n)this.normalPanel.active=!1,this.ornamentsPanel.active=!0,this.refreshOrnamentsNode(this.ornamentsNodeList[0],i),this.refreshOrnamentsNode(this.ornamentsNodeList[1],n),this.refreshOrnamentsNode(this.ornamentsNodeList[2],this.model);else{this.normalPanel.active=!0,this.ornamentsPanel.active=!1;o=i||n;this.refreshNormalNode(this.normalNodeList[0],o,0),this.refreshNormalNode(this.normalNodeList[1],this.model,1)}}else{this.normalPanel.active=!0,this.ornamentsPanel.active=!1;o=P.default.instance.getEquipModelByGrid(this.config.position);this.refreshNormalNode(this.normalNodeList[0],o,0),this.refreshNormalNode(this.normalNodeList[1],this.model,1)}else a.Logger.error("\u6ca1\u6709\u88c5\u5907\u7684\u4fe1\u606f")},t.prototype.refreshNormalNode=function(e,t,n){void 0===n&&(n=0);var o=i.autoGetEquipConfig(t);this.refreshEquip(e,t,o),this.refreshAttriInfo(e,t,o,n);var a=this.findChild(e,"img_bg_shuxing/txtLaicalPower");this.getChild(e,"img_bg_shuxing/txtFightName",cc.Label).string=(f.JingJieConfig.getDesc(o.world)||b.WordConfig.getWord(60376))+":",1==o.dingzhi&&o.world==u.MapConfig.WORLD.FanRen?a.getComponent(cc.Label).string=l.EquipConfig.getFanRenZhiLiByDingZhi(o)+"":o.world==u.MapConfig.WORLD.FanRen?a.getComponent(cc.Label).string=l.EquipConfig.getFanRenZhiLi(t.itemType,t.baseAddAttrList,t.randAttrList)+"":o.world==u.MapConfig.WORLD.LunHui&&(a.getComponent(cc.Label).string=l.EquipConfig.getLunHuiZhiLi(t.itemType,t.baseAddAttrList,t.fuwenAtriList)+""),1003==o.cid&&(a.getComponent(cc.Label).string=t.fight+"");var s=this.findChild(e,"lock"),r=this.findChild(e,"btnWear_1");if(s&&r){var c=this.findChild(s,"open"),d=this.findChild(s,"close");d.active=this.model.isLock,c.active=!d.active,s.active=this.isAuto,r.active=!this.isAuto&&this.is_have,this.onAddEvent(s,this.onLock.bind(this))}},t.prototype.refreshOrnamentsNode=function(e,t){var n=i.autoGetEquipConfig(t),o=this.findChild(e,"lock"),a=this.findChild(e,"btnWear_1"),s=this.findChild(e,"btnWear_2");a&&s&&(a.active=this.is_have,s.active=this.is_have),this.refreshEquip(e,t,n),this.refreshAttriInfo(e,t,n);var r=this.findChild(e,"img_bg_shuxing/txtLaicalPower");if(this.getChild(e,"img_bg_shuxing/txtFightName",cc.Label).string=f.JingJieConfig.getDesc(n.world)+":",1==n.dingzhi&&n.world==u.MapConfig.WORLD.FanRen?r.getComponent(cc.Label).string=l.EquipConfig.getFanRenZhiLiByDingZhi(n)+"":n.world==u.MapConfig.WORLD.FanRen?r.getComponent(cc.Label).string=l.EquipConfig.getFanRenZhiLi(t.itemType,t.baseAddAttrList,t.randAttrList)+"":n.world==u.MapConfig.WORLD.LunHui&&(r.getComponent(cc.Label).string=l.EquipConfig.getLunHuiZhiLi(t.itemType,t.baseAddAttrList,t.fuwenAtriList)+""),o&&this.isAuto){var c=this.findChild(o,"open"),d=this.findChild(o,"close");o.active=this.isAuto,d.active=this.model.isLock,c.active=!d.active,a&&s&&(a.active=!this.isAuto&&this.is_have,s.active=!this.isAuto&&this.is_have),this.onAddEvent(o,this.onLock.bind(this))}},t.prototype.refreshEquip=function(e,t,i){this.findChild(e,"showItem").getComponent(L.default).init(t);var n=e.getChildByName("showItem").getChildByName("isWearableSprite");null==t?n&&(n.active=!1):n&&(n.active=!0)},t.prototype.refreshAttriInfo=function(e,t,i,n){void 0===n&&(n=0);var o=this.findChild(e,"scrollView/view/content");for(var a in o.children)"temporary"==o.children[a].name&&o.children[a].removeFromParent();var s=this.findChild(e,"scrollView/view/content/itemInfo");s.active=!1;var r=this.findChild(e,"scrollView/view/content/itemRandomNode");r.active=!1;var d=this.findChild(e,"scrollView/view/content/itemDes");d.active=!1;var f=this.findChild(e,"scrollView/view/content/itemFuWen");f.active=!1;var m=this.findChild(e,"scrollView/view/content/itemGodNode");m.active=!1;var y=this.findChild(e,"scrollView/view/content/itemGodInfo");y.active=!1;var I=this.findChild(e,"scrollView/view/content/itemSpecialNode");I.active=!1;var M=this.findChild(e,"scrollView/view/content/itemSpecialInfo");M.active=!1;var w=this.findChild(e,"scrollView/view/content/itemzhulingNode");w.active=!1;var S=this.findChild(e,"scrollView/view/content/itemzhulingInfo");if(S.active=!1,t&&i){if(1003==i.cid){var P=_.SpecialRingConfig.getConfigByEquipId(i.id),E=P.formatBaseValue(P.base_value);for(a=0;a<E.length;a++){var L=void 0;(L=cc.instantiate(s)).parent=s.parent,L.active=!0,L.name="temporary",this.updateBaseText(L,t,E[a].magicValue,E[a].magicId)}}else{var T=[h.MagicNameConfig.MagicId.atk,h.MagicNameConfig.MagicId.mag,h.MagicNameConfig.MagicId.spt,h.MagicNameConfig.MagicId.def,h.MagicNameConfig.MagicId.hp],R=["atk","mag","spt","def","hp"];for(a=0;a<T.length;a++){L=void 0;(L=cc.instantiate(s)).parent=s.parent,L.active=!0,L.name="temporary",this.updateBaseText(L,t,i[R[a]],T[a])}}if(t.blessAtttList.length>0){var N=cc.instantiate(m);N.parent=m.parent,N.active=!0;for(a=0;a<t.blessAtttList.length;a++){var B=cc.instantiate(y);B.parent=y.parent,B.active=!0,this.updateGodText(N,B,t.blessAtttList[a])}}if(t.specialEffect>0){var A=v.SpecialRingEffectConfig.getConfigById(t.specialEffect);if(A){var G=cc.instantiate(I);G.parent=I.parent,G.active=!0;var x=cc.instantiate(M);x.parent=M.parent,x.active=!0,x.getChildByName("txtDesc").getComponent(cc.Label).string=A.des}}if(t.randAttrList.length>0&&i.cid==l.EquipCid.XunZhang){w.active=!0,w.zIndex=2,S.active=!1;for(a=0;a<t.randAttrList.length;a++){(U=cc.instantiate(S)).parent=S.parent,U.active=!0,U.zIndex=3+a,U.getChildByName("txtDesc").getComponent(cc.Label).string=g.MadelzhulingConfig.getdes(t.randAttrList[a].magicId,t.randAttrList[a].magicValue)}}if(i.cid==l.EquipCid.XunZhang&&1==n){var O=p.MedalConfig.getConfigByEquipId(i.id);if(O.recov_res)(U=cc.instantiate(S)).parent=S.parent,U.active=!0,U.zIndex=18;if(O.recov_item)(U=cc.instantiate(S)).parent=S.parent,U.active=!0,U.zIndex=18}if(i.world==u.MapConfig.WORLD.FanRen){if(t.randAttrList.length>0){var V=cc.instantiate(r);V.parent=r.parent,V.active=!0,V.name="temporary"}for(a=0;a<t.randAttrList.length;a++){var j=t.randAttrList[a];(L=cc.instantiate(s)).parent=s.parent,L.active=!0,L.name="temporary",this.updateRandomText(L,j,i)}}else if(i.world==u.MapConfig.WORLD.LunHui){var D=C.RuneConfig.getRuneById(t.fuwenId);if(D){f.active=!0,f.zIndex=2;var F=f.getChildByName("txtFuWenName"),H=F.getChildByName("txtName").getComponent(cc.Label);H.string=D.name,H.node.color=c.ColorConfig.getFuWenColor(D.quality);var U,W=F.getChildByName("txtStatus").getComponent(cc.Label);t.fuwenActive?(W.string=b.WordConfig.getWord(60421),W.node.color=c.ColorConfig.GreenColor):(W.string=b.WordConfig.getWord(60422),W.node.color=c.ColorConfig.RedColor),(U=f.getChildByName("imgPro").getChildByName("itemInfo")).active=!1;for(a=0;a<t.fuwenAtriList.length;a++){var q=cc.instantiate(U);q.active=!0,q.parent=U.parent;var z=q.getChildByName("leftNode"),J=z.getChildByName("txtDesc").getComponent(cc.Label);J.string=h.MagicNameConfig.getDesc(t.fuwenAtriList[a].magicId)+":";var Y=z.getChildByName("txtDefaultValue").getComponent(cc.Label);Y.string=""+k.default.formatMagicValue(t.fuwenAtriList[a].magicId,t.fuwenAtriList[a].magicValue),Y.node.x=J.node.x+J.node.width;var Z=q.getChildByName("txtExtra").getComponent(cc.Label);Z.string=cc.js.formatStr(b.WordConfig.getWord(60423),k.default.formatMagicValue(t.fuwenAtriList[a].magicId,t.fuwenAtriList[a].max)),Z.node.color=c.ColorConfig.GreenColor,t.fuwenActive?(J.node.color=c.ColorConfig.getEquipQualityColor(t.fuwenAtriList[a].color),Z.node.color=c.ColorConfig.GreenColor):(J.node.color=c.ColorConfig.hexToColor("#6f6f6f"),Y.node.color=c.ColorConfig.hexToColor("#6f6f6f"),Z.node.color=c.ColorConfig.hexToColor("#6f6f6f"))}}}if(i.des1){var K=cc.instantiate(d);K.parent=d.parent,K.zIndex=4,K.active=!0,K.getChildByName("des").getComponent(cc.Label).string="   "+i.des1}}},t.prototype.updateBaseText=function(e,t,i,n){var o=e.getChildByName("itemInfo").getChildByName("txtDesc"),s=e.getChildByName("itemInfo").getChildByName("txtDefaultValue"),r=e.getChildByName("txtExtra"),c=l.EquipConfig.getEquipConfigById(t.itemType),d=t.getBaseAddValue(n),f=d;a.Logger.log("baseExtValue===",d,i,n),1==c.dingzhi?(f=c.d_jipin[n],a.Logger.log("\u5b9a\u5236====")):f+=i,f>0?(o.getComponent(cc.Label).string=h.MagicNameConfig.getDesc(n)+":",s.getComponent(cc.Label).string=k.default.formatMagicValue(n,f),r.getComponent(cc.Label).string="("+d+")",r.active=d>0):e.active=!1},t.prototype.updateGodText=function(e,t,i){t.getChildByName("txtDesc").getComponent(cc.Label).string=I.default.getdes(i.blessId,i.blessValue)+"\n"},t.prototype.updateRandomText=function(e,t,i){var n=e.getChildByName("itemInfo").getChildByName("txtDesc"),o=e.getChildByName("itemInfo").getChildByName("txtDefaultValue"),a=e.getChildByName("txtExtra");n.active=!1;var s=m.RandomFuMoConfig.getRandomFuMoConfig(i,t.magicId);if(s){var r=m.RandomFuMoConfig.getMagicValueByConfig(s,i.level);r?(o.getComponent(cc.Label).string=h.MagicNameConfig.getDesc(t.magicId)+":"+k.default.formatMagicValue(t.magicId,t.magicValue),1==i.dingzhi?(a.getComponent(cc.Label).string=cc.js.formatStr(b.WordConfig.getWord(60423),k.default.formatMagicValue(t.magicId,t.magicValue)),a.color=c.ColorConfig.hexToColor("#df1500"),n.color=c.ColorConfig.hexToColor("#df1500"),o.color=c.ColorConfig.hexToColor("#df1500")):(o.color=l.EquipConfig.getRandomAttColor(i,t),n.color=l.EquipConfig.getRandomAttColor(i,t),a.getComponent(cc.Label).string=cc.js.formatStr(b.WordConfig.getWord(60423),k.default.formatMagicValue(t.magicId,r[1])),a.color=l.EquipConfig.getRandomAttColor(i,t))):e.active=!1}else e.active=!1},t.autoGetEquipConfig=function(e){var t=null;return e instanceof S.default?t=l.EquipConfig.getEquipConfigById(e.itemType):e instanceof w.default&&(t=l.EquipConfig.getEquipConfigById(e.itemType)),t},t.prototype.onClickWear=function(e){if(T.MusicHelper.play_click(),this.model instanceof w.default){var t=void 0;t=e<=1&&e<1?-1==M.EquipGridModel.getGridTypeByType(this.config.position)?l.EquipConfig.getGridTypeByPart(this.config.position,!0):M.EquipGridModel.getGridTypeByType(this.config.position):l.EquipConfig.getGridTypeByPart(this.config.position,!(e>1)),P.default.instance.addEquip(t,this.model.itemId)==d.ADD_EQ.SUCCESS&&this.onClose()}},t.prototype.onClickClose=function(){T.MusicHelper.play_click(),this.onClose()},t.prototype.onLock=function(){var e=w.default.getItemByid(this.model.itemId);this.model.isLock=!this.model.isLock,a.Logger.log("onLock====",e.itemId,this.model.isLock,e.isLock),E.default.s_equip_lock(e.itemId,this.model.isLock),this.onClose()},t.prototype.onClose=function(){this.closeCallFun&&this.closeCallFun(),this.closeView()},t=i=o([N],t)}(r.default));i.default=B,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/JingJieConfig":"JingJieConfig","../config/MadelzhulingConfig":"MadelzhulingConfig","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../config/MedalConfig":"MedalConfig","../config/RandomFuMoConfig":"RandomFuMoConfig","../config/RuneConfig":"RuneConfig","../config/SpecialRingConfig":"SpecialRingConfig","../config/SpecialRingEffectConfig":"SpecialRingEffectConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/BlessModel":"BlessModel","../model/EquipGridModel":"EquipGridModel","../model/ItemInfoModel":"ItemInfoModel","../model/MagicModel":"MagicModel","../model/MakeEquipModel":"MakeEquipModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/MusicHelper":"MusicHelper"}],EquipGatherConfig:[function(e,t,i){"use strict";cc._RF.push(t,"aa53cNz9O1C7pIWomR3ga5A","EquipGatherConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("./GameConst"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loot_id="l_xinshou_1",t.weight=[100,100,100],t.item_id=["E100001","E100002","E100016"],t.drop_num=[1,1,1],t.type=0,t.itemKind=2,t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getEquipGatherConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e!=i.id||(t=i)}),t},t.getEquipTimesByQuality=function(e){var t=0;return e==a.GameConst.QUALITY.GREEN?t+=.5:e==a.GameConst.QUALITY.BLUE?t+=1:e==a.GameConst.QUALITY.PURPLE&&(t+=2),t},t.getEquipPercentByQuality=function(e){var t=0;return e==a.GameConst.QUALITY.WHITE?t=1e4:e==a.GameConst.QUALITY.GREEN?t=5e5:e==a.GameConst.QUALITY.BLUE?t=5e5:e==a.GameConst.QUALITY.PURPLE?t=5e5:e==a.GameConst.QUALITY.ORANGE&&(t=2e4),t},t.getEquipQualityAdd=function(e){return[1,2,5,10,2][e]},t.randomEquality=function(e,i){for(var n=0,o=e.magic_find1.length-1;o>=0;o--){var a=e.magic_find1[o]*t.getEquipQualityAdd(i);if(Math.random()<=a/1e6){n=o+1;break}}return n},t.configMap=new Map,t.DropType={One:0,EveryOne:1},t}(o.JsonConfigBase);i.EquipGatherConfig=s,cc._RF.pop()},{"./GameConst":"GameConst","./JsonConfigBase":"JsonConfigBase"}],EquipGridModel:[function(e,t,i){"use strict";cc._RF.push(t,"c1ccdZfQI5JGL+JTc95DBxj","EquipGridModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/LocalStorage"),o=e("../config/GameConst"),a=e("../config/IntensifyBuffConfig"),s=e("../config/IntensifyConfig"),r=e("../config/MagicNameConfig"),c=e("../config/MapConfig"),l=e("../manager/RedPointManager"),d=e("./JingJieModel"),f=e("./RoleInfoModel"),g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[],this.protos=[],l.default.getInstance().addHandler(this)}return e.getGridTypeByType=function(e){var t=e;switch(e){case o.Position.BRACELET:var i=f.default.instance.getEquipModelByGrid(o.GridType.BRACELET_lEFT),n=f.default.instance.getEquipModelByGrid(o.GridType.BRACELET_RIGHT);t=i&&n?i.fight<=n.fight?o.GridType.BRACELET_lEFT:o.GridType.BRACELET_RIGHT:!i&&n?o.GridType.BRACELET_lEFT:i&&!n?o.GridType.BRACELET_RIGHT:o.GridType.BRACELET_lEFT;break;case o.Position.RING:i=f.default.instance.getEquipModelByGrid(o.GridType.RING_LEFT),n=f.default.instance.getEquipModelByGrid(o.GridType.RING_RIGHT);t=i&&n?i.fight<=n.fight?o.GridType.RING_LEFT:o.GridType.RING_RIGHT:!i&&n?o.GridType.RING_LEFT:i&&!n?o.GridType.RING_RIGHT:o.GridType.RING_LEFT;break;case o.Position.BRACELET_lunhui:i=f.default.instance.getEquipModelByGrid(o.GridType.BRACELET_lEFT_lunhui),n=f.default.instance.getEquipModelByGrid(o.GridType.BRACELET_RIGHT_lunhui);t=i&&n?i.fight<=n.fight?o.GridType.BRACELET_lEFT_lunhui:o.GridType.BRACELET_RIGHT_lunhui:!i&&n?o.GridType.BRACELET_lEFT_lunhui:i&&!n?o.GridType.BRACELET_RIGHT_lunhui:o.GridType.BRACELET_lEFT_lunhui;break;case o.Position.RING_lunhui:i=f.default.instance.getEquipModelByGrid(o.GridType.RING_LEFT_lunhui),n=f.default.instance.getEquipModelByGrid(o.GridType.RING_RIGHT_lunhui);t=i&&n?i.fight<=n.fight?o.GridType.RING_LEFT_lunhui:o.GridType.RING_RIGHT_lunhui:!i&&n?o.GridType.RING_LEFT_lunhui:i&&!n?o.GridType.RING_RIGHT_lunhui:o.GridType.RING_LEFT_lunhui}return t},e.getEquipGridModel=function(e,t){void 0===t&&(t=f.default.instance);for(var i=0;i<t.equipGridList.length;i++){var n=t.equipGridList[i];if(n.gridId==e)return n}},e.levelUpEquipGrid=function(t,i,n){void 0===n&&(n=f.default.instance);var o=e.getEquipGridModel(t,n);o?o.strengthenNum=i:((o=new e).gridId=t,n.equipGridList.push(o),o.strengthenNum=i),f.default.saveToLocalStorage()},e.getEquipGridAddAllstat=function(){for(var e=0,t=f.default.instance.getEquipGridList(),i=0;i<t.length;i++){var n=t[i],o=s.IntensifyConfig.getMagicModelByGridStrenthenNum(n.gridId,n.strengthenNum);o.magicId==r.MagicNameConfig.MagicId.Allstat&&(e+=o.magicValue)}return e},e.getEquipGridAddDef=function(){for(var e=0,t=f.default.instance.getEquipGridList(),i=0;i<t.length;i++){var n=t[i],o=s.IntensifyConfig.getMagicModelByGridStrenthenNum(n.gridId,n.strengthenNum);o.magicId==r.MagicNameConfig.MagicId.def&&(e+=o.magicValue)}return e},e.getNowIntensifyLevelConfig=function(t){void 0===t&&(t=f.default.instance.getEquipGridList());var i,n=0;return a.IntensifyBuffConfig.configMap.forEach(function(o,a){n=0;for(var s=0;s<t.length;s++){t[s].strengthenNum>=o.level&&n++}n>=e.maGridNum&&(i=o)}),i},e.getNextIntensifyLevelConfig=function(){var e,t=this.getNowIntensifyLevelConfig();return a.IntensifyBuffConfig.configMap.forEach(function(i,n){t?i.level>t.level&&(e?i.level<=e.level&&(e=i):e=i):e?i.level<=e.level&&(e=i):e=i}),e||(e=t),e},e.getShangHaiZengJiaPercent=function(){var t=e.getNowIntensifyLevelConfig();return t?t.BonusDamage_p[1]/1e4:0},e.getShangHaiJianMianPercent=function(){var t=e.getNowIntensifyLevelConfig();return t?t.DamageReduction_p[1]/1e4:0},e.getHpPercent=function(){var t=e.getNowIntensifyLevelConfig();return t?t.hp_p[1]/1e4:0},e.getMpPercent=function(){var t=e.getNowIntensifyLevelConfig();return t?t.mp_p[1]/1e4:0},e.proto2ModelList=function(t){for(var i=t.getEquipListList(),n=[],o=0;o<i.length;o++){var a=i[i.length-1-o],s=new e;s.gridId=a.getPos(),s.strengthenNum=a.getLev(),n.push(s)}return n},e.deserializeBinaryToModelList=function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&(t[i]=this.deserializeBinaryToModel(e[i]));return t},e.deserializeBinaryToModel=function(t){var i=new e;return i.gridId=t.gridId,i.strengthenNum=t.strengthenNum,i},e.getSelAutoNext=function(){var t=e.LOCAL_KEY.STRENGTHEN_AUTOSELNEXT+f.default.instance.roleId,i=n.default.getInt(t);return 0==i&&(i=1),1==i},e.setSelAutoNext=function(t){var i=e.LOCAL_KEY.STRENGTHEN_AUTOSELNEXT+f.default.instance.roleId,o=t?1:2;n.default.setInt(i,o)},e.isShowHuishou=function(e){return!!e&&!e.isLock},e.isBetterByEquip=function(t){if(!t)return!1;var i,n=t.getConfig();if(t.itemKind!=o.GameConst.ITEM_KIND.EQUIP)return!1;var a=e.getGridTypeByType(n.position);return i=f.default.instance.getEquipModelByGrid(a),(n.pro==f.default.instance.occupation||n.pro==o.GameConst.OCCUPATION.None)&&(!(n.world==c.MapConfig.WORLD.LunHui&&d.JingJieModel.getMyLunHuiJingLevel()<n.reborn)&&(!i||n.level<=f.default.instance.level&&t.fight>i.fight))},e.LOCAL_KEY={STRENGTHEN_AUTOSELNEXT:"StrengthenAutoSelNext"},e.maGridNum=10,e}();i.EquipGridModel=g,cc._RF.pop()},{"../../engine/LocalStorage":"LocalStorage","../config/GameConst":"GameConst","../config/IntensifyBuffConfig":"IntensifyBuffConfig","../config/IntensifyConfig":"IntensifyConfig","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../manager/RedPointManager":"RedPointManager","./JingJieModel":"JingJieModel","./RoleInfoModel":"RoleInfoModel"}],EquipMakeView:[function(e,t,i){"use strict";cc._RF.push(t,"d81c4ZsWHBNZIPkmGFgrT/e","EquipMakeView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/ColorConfig"),d=e("../config/EquipConfig"),f=e("../config/GameConfig"),g=e("../config/MagicNameConfig"),h=e("../config/RandomFuMoConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../event/CommonEvent"),C=e("../miniGameTools/tttool"),_=e("../model/AdModel"),v=e("../model/ItemInfoModel"),y=e("../model/MagicModel"),b=e("../model/MakeEquipModel"),I=e("../model/PrivilegeModel"),M=e("../model/RoleInfoModel"),w=e("../model/ServerTime"),k=e("../network/SocketClient"),S=e("../prefab/ItemPrefab"),P=e("../sdk/LoongCheerManager"),E=e("../sdk/SdkHandler"),L=e("../sdk/SdkHelper"),T=e("../sdk/SdkManager"),R=e("../utils/MusicHelper"),N=e("../utils/UIHelper"),B=cc._decorator,A=B.ccclass,G=(B.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curSelectIndex=0,t.wantItemList=[],t.showItem=null,t.frameCount=0,t.showItemProNodeList=[],t.quality2Cream=[1,2,6,30,180],t.selectNodeList=[],t.hadMakeNodeList=[],t}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(m.CommonEvent.Event_AdInfoUpdate,this.refreshAdTimes,this),s.EventManager.instance.on(m.CommonEvent.Event_ad_end,this.onAdEnd,this),s.EventManager.instance.on(m.CommonEvent.Event_Make_Equip,this.onMakeUpdate,this)},t.prototype.onShow=function(){this.itemBaseNode=this.findChild(this.node,"view/scrollView/view/content/itemBaseNode"),this.itemBaseNode.active=!0,this.itemRandomNode=this.findChild(this.node,"view/scrollView/view/content/itemRandomNode"),this.itemRandomNode.active=!1,this.itemInfo=this.findChild(this.node,"view/scrollView/view/content/itemInfo"),this.itemInfo.active=!1,r.default.instance.setTopUI(u.default.gameView.EquipMakeView),this.findChild(this.node,"view/btnMake").on(cc.Node.EventType.TOUCH_END,this.onClickMake.bind(this));for(var e=0;e<3;e++)this.wantItemList[e]=this.findChild(this.node,"view/wantItem"+e),this.wantItemList[e].on(cc.Node.EventType.TOUCH_END,this.onClickWantItem.bind(this,e)),this.hadMakeNodeList[e]=this.findChild(this.node,"view/hadMakeNode"+e),this.selectNodeList[e]=this.findChild(this.node,"view/selectNode"+e);this.showItem=this.findChild(this.node,"view/showItem"),this.findChild(this.node,"view/btnRefresh").on(cc.Node.EventType.TOUCH_END,this.onClickRefresh.bind(this)),this.findChild(this.node,"view/btnAd").on(cc.Node.EventType.TOUCH_END,this.onClickAd.bind(this)),this.txtAdTimes=this.getChild(this.node,"view/btnAd/nums",cc.Label),this.contrastNode=this.findChild(this.node,"view/btnZhuangBeiDuiBI"),this.contrastNode.on(cc.Node.EventType.TOUCH_END,this.onClickContrast.bind(this)),this.txtMyCream=this.getChild(this.node,"view/txtMyCream",cc.Label),this.txtTime=this.getChild(this.node,"view/txtTime",cc.Label),this.initLeftTime(),this.refreshTime(),this.refreshMyCream(),this.refreshAdTimes(),f.GameConfig.isWechat()&&(this.findChild(this.node,"view/btnRefresh").active=!1,this.findChild(this.node,"view/btnAd").x=167.5),this.btnAd=this.getChild(this.node,"view/btnAd"),f.GameConfig.isOpenAd||(this.btnAd.active=!1),this.onMakeUpdate()},t.prototype.refreshAdTimes=function(){(this.txtAdTimes.string=_.default.getAdLostTimes(_.Ad_Type.MakeEquip)+"",I.default.hadFreePrivilege())&&(this.node.getChildByName("view").getChildByName("btnAd").getChildByName("button_mianfeihuoqu_gkgg").active=!1)},t.prototype.onMakeUpdate=function(){this.initLeftTime(),this.refreshEquip(),this.refreshSelect(),this.refreshMyCream()},t.prototype.initLeftTime=function(){this.leftTime=b.default.getLastRandomTime()-w.ServerTime.getServerTime(),this.leftTime<=0&&(this.leftTime=0),this.refreshTime()},t.prototype.onClickClose=function(){R.MusicHelper.play_click(),this.closeView()},t.prototype.update=function(e){this.leftTime>0&&(this.frameCount++,this.frameCount>=cc.game.getFrameRate()&&(this.frameCount=0,this.leftTime-=1e3,this.leftTime<=0&&(this.leftTime=0,k.default.req_make_info()),this.refreshTime()))},t.prototype.onClickAd=function(){R.MusicHelper.play_click(),_.default.getAdLostTimes(_.Ad_Type.MakeEquip)>0?I.default.hadFreePrivilege()?this.onAdEnd():f.GameConfig.isWechat()?C.tttool.OpenAD():f.GameConfig.sdkType==f.SdkType.BingNiao?L.default.sdkAd():T.default.sdkAd(E.AdType.videoAd,P.AdPosId.blacksmith):p.WordConfig.showWord(60308)},t.prototype.onAdEnd=function(){_.default.getAdLostTimes(_.Ad_Type.MakeEquip)>0&&(this.txtAdTimes.string=_.default.updateAdTimes(_.Ad_Type.MakeEquip)+"",k.default.refresh_make(1),this.randomEquip(!0))},t.prototype.onClickRefresh=function(){R.MusicHelper.play_click(),M.default.instance.decGold(20)&&(L.default.sdkCustomAction(13,20),k.default.refresh_make(2),this.randomEquip(!0))},t.prototype.refreshEquip=function(){for(var e=0;e<this.wantItemList.length;e++){var t=b.default.makeEquipList[e];this.wantItemList[e].getComponent(S.default).init(t),this.hadMakeNodeList[e].active=t.hadMake,t.getConfig().level>=50&&(this.wantItemList[e].getChildByName("up").active=!1)}this.refreshNowEquip()},t.prototype.refreshNowEquip=function(){var e=b.default.makeEquipList[this.curSelectIndex],t=d.EquipConfig.getEquipConfigById(e.itemType);this.showItem.getComponent(S.default).init(e),e.getConfig().level>=50&&(this.showItem.getChildByName("up").active=!1),this.nowNeedCream=parseInt(t.make_cream[e.quality].split(":")[1]),M.default.instance.getCream()>=this.nowNeedCream?this.findChild(this.node,"view/txtCream").color=l.ColorConfig.GreenColor:this.findChild(this.node,"view/txtCream").color=l.ColorConfig.RedColor,this.findChild(this.node,"view/txtCream").getComponent(cc.Label).string=this.nowNeedCream+"",N.UIHelper.formatQuality(this.findChild(this.node,"view/txtQuality").getComponent(cc.Label),e.quality),N.UIHelper.formatRoleOccupation(this.findChild(this.node,"view/txtOccupation").getComponent(cc.Label),t.pro),N.UIHelper.formatRoleLevel(this.findChild(this.node,"view/txtLevel").getComponent(cc.Label),t),N.UIHelper.formatPart(this.findChild(this.node,"view/txtEquipGridName").getComponent(cc.Label),t.position),N.UIHelper.formatHighestGrade(this.findChild(this.node,"view/txtHighestGrade").getComponent(cc.Label),e),this.findChild(this.node,"view/txtfanren").getComponent(cc.Label).string=e.fight+"",this.refreshAttriInfo(e,t),this.refreshContrastNode(e,t)},t.prototype.refreshAttriInfo=function(e,t){for(var i=0;i<this.showItemProNodeList.length;i++)this.showItemProNodeList[i].destroy();this.showItemProNodeList=[];var n=[g.MagicNameConfig.MagicId.atk,g.MagicNameConfig.MagicId.mag,g.MagicNameConfig.MagicId.spt,g.MagicNameConfig.MagicId.def,g.MagicNameConfig.MagicId.hp];for(i=0;i<n.length;i++){var o=e.getBaseAddValue(n[i]),a=o;if(n[i]==g.MagicNameConfig.MagicId.atk?a+=t.atk:n[i]==g.MagicNameConfig.MagicId.mag?a+=t.mag:n[i]==g.MagicNameConfig.MagicId.spt?a+=t.spt:n[i]==g.MagicNameConfig.MagicId.def?a+=t.def:n[i]==g.MagicNameConfig.MagicId.hp&&(a+=t.hp),a>0)(r=cc.instantiate(this.itemInfo)).parent=this.itemInfo.parent,r.active=!0,(l=r.getChildByName("txtDesc").getComponent(cc.Label)).string=g.MagicNameConfig.getDesc(n[i])+":",(f=r.getChildByName("txtDefaultValue").getComponent(cc.Label)).string=""+a,f.node.x=l.node.x+l.node.width,(u=r.getChildByName("txtExtra").getComponent(cc.Label)).string="("+o+")",u.node.active=o>0,this.showItemProNodeList.push(r),l._forceUpdateRenderData(),f._forceUpdateRenderData(),u._forceUpdateRenderData()}var s=cc.instantiate(this.itemRandomNode);s.parent=this.itemRandomNode.parent,s.active=!0,this.showItemProNodeList.push(s);for(i=0;i<e.randAttrList.length;i++){var r,c=e.randAttrList[i];(r=cc.instantiate(this.itemInfo)).parent=this.itemInfo.parent,r.active=!0;var l,f,u,m=h.RandomFuMoConfig.getRandomFuMoConfig(t,c.magicId),C=h.RandomFuMoConfig.getMagicValueByConfig(m,t.level);(l=r.getChildByName("txtDesc").getComponent(cc.Label)).string=g.MagicNameConfig.getDesc(c.magicId)+":"+y.default.formatMagicValue(c.magicId,c.magicValue),l.node.color=d.EquipConfig.getRandomAttColor(t,c),(f=r.getChildByName("txtDefaultValue").getComponent(cc.Label)).node.active=!1,(u=r.getChildByName("txtExtra").getComponent(cc.Label)).string=cc.js.formatStr(p.WordConfig.getWord(60423),y.default.formatMagicValue(c.magicId,C[1])),u.node.color=d.EquipConfig.getRandomAttColor(t,c),this.showItemProNodeList.push(r),l._forceUpdateRenderData(),f._forceUpdateRenderData(),u._forceUpdateRenderData()}},t.prototype.refreshContrastNode=function(e,t){var i=d.EquipConfig.getGridTypeByPart(t.position,!0),n=d.EquipConfig.getGridTypeByPart(t.position,!1);M.default.instance.getEquipModelByGrid(i)||M.default.instance.getEquipModelByGrid(n)?this.contrastNode.active=!0:this.contrastNode.active=!1},t.prototype.refreshMyCream=function(){this.txtMyCream.string=N.UIHelper.tranNumber(M.default.instance.getCream())+""},t.prototype.randomEquip=function(e){void 0===e&&(e=!1),(this.leftTime<=0||e&&!f.GameConfig.connectServer)&&(b.default.randomEquip(),this.refreshEquip(),this.initLeftTime())},t.prototype.refreshTime=function(){this.txtTime.string=a.default.formatLeftTime2(this.leftTime)},t.prototype.onClickWantItem=function(e){R.MusicHelper.play_click(),this.curSelectIndex=e,this.refreshSelect(),this.refreshNowEquip()},t.prototype.refreshSelect=function(){for(var e=0;e<this.selectNodeList.length;e++)this.curSelectIndex==e?this.selectNodeList[e].active=!0:this.selectNodeList[e].active=!1},t.prototype.onHide=function(){},t.prototype.onClickMake=function(){R.MusicHelper.play_click();N.UIHelper.printNodeAllNodeName(this.node.getChildByName("btnClose"));var e=b.default.makeEquipList[this.curSelectIndex];if(e.hadMake)p.WordConfig.showWord(60312);else{var t=d.EquipConfig.getEquipConfigById(e.itemType);if(M.default.instance.getCream()<this.nowNeedCream)p.WordConfig.showWord(60138);else M.default.instance.getAddItemMaxNum(v.AddItemParamStruct.create(M.default.instance,t.kind,t.id,1,e.quality,!0))<1?p.WordConfig.showWord(60001):M.default.instance.decCream(this.nowNeedCream)&&(L.default.sdkCustomAction(24,this.nowNeedCream),k.default.req_make_equip(e.index),b.default.saveToLocalStorage(),this.refreshEquip())}},t.prototype.onClickContrast=function(){R.MusicHelper.play_click();var e=b.default.makeEquipList[this.curSelectIndex];r.default.instance.createView(u.default.gameView.equipContrastView,null,e)},t=o([A],t)}(c.default));i.default=G,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConfig":"GameConfig","../config/MagicNameConfig":"MagicNameConfig","../config/RandomFuMoConfig":"RandomFuMoConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../miniGameTools/tttool":"tttool","../model/AdModel":"AdModel","../model/ItemInfoModel":"ItemInfoModel","../model/MagicModel":"MagicModel","../model/MakeEquipModel":"MakeEquipModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper"}],EquipRankItemModel:[function(e,t,i){"use strict";cc._RF.push(t,"c2b1aspPX5BqrnAUdwQp7Up","EquipRankItemModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/ItemInfoModel"),o=e("../../model/MagicModel"),a=e("../../model/BlessModel"),s=e("../../model/CostumeModel"),r=function(){function e(){}return e.getModel=function(t){var i=new e,r=new n.default;r.itemId=t.getItemid()+"",r.itemKind=t.getItemkind(),r.itemType=t.getItemtype(),r.itemCnt=t.getItemcnt(),r.quality=t.getQuality(),1==t.getIsnew()?r.isNew=!0:r.isNew=!1,1==t.getIslock()?r.isLock=!0:r.isLock=!1,r.gridId=t.getGridId(),r.baseAddAttrList=[];for(var c=t.getBaseaddattrlistList(),l=0;l<c.length;l++){var d=c[l].getK(),f=c[l].getV(),g=o.default.create(d,f);r.baseAddAttrList[l]=g}c=t.getRandattrlistList(),r.randAttrList=[];for(l=0;l<c.length;l++){d=c[l].getK(),f=c[l].getV();var h=c[l].getPos();g=o.default.create(d,f);r.randAttrList[h-1]=g}r.fight=t.getFight(),r.end_time=1e3*t.getEndTime();var u=t.getRuneMsg();r.fuwenId=u.getRuneId(),r.fuwenActive=u.getIsActive(),r.fuwenAtriList=o.default.proto2RunList(u.getPropertyListList()),r.fuwenNeedList=[];var p=u.getNeedRuneListList();for(l=0;l<p.length;l++){var m=new n.FuWenNeedModel;m.index=p[l].getIndex(),m.item_type=p[l].getItemType(),r.fuwenNeedList[l]=m}r.fuwenNeedList.sort(function(e,t){return e.index-t.index}),r.blessAtttList=[];var C=t.getBlessattrlistList();for(l=0;l<C.length;l++){var _=new a.default;_.blessId=C[l].getBlessid(),_.blessValue=C[l].getBlessattr(),r.blessAtttList[l]=_}return i.itemInfoModel=r,i.heroName=t.getHeroname(),i.heroId=t.getHeroid(),i.personalize=s.CostumeModel.proto2Personalize(t.getPersonalize()),i},e}();i.default=r,cc._RF.pop()},{"../../model/BlessModel":"BlessModel","../../model/CostumeModel":"CostumeModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel"}],EquipRankModel:[function(e,t,i){"use strict";cc._RF.push(t,"6348a3ff7FO5YWXPNL9ady9","EquipRankModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EquipRankItemModel"),o=e("../../../engine/EventManager"),a=e("../../event/CommonEvent"),s=e("../../model/ServerTime"),r=function(){function e(){this.list=[],this.refreshTime=0}return e.proto2ModelList=function(t){var i=new e;i.equipPos=t.getEquipPos();for(var r=[],c=t.getItemListList(),l=0;l<c.length;l++){var d=n.default.getModel(c[l]);r.push(d)}i.list=r,i.list.reverse(),i.refreshTime=s.ServerTime.getServerTime()/1e3;var f=-1;for(l=0;l<this.modelList.length;l++)this.modelList[l].equipPos==i.equipPos&&(f=l);f>=0?this.modelList[f]=i:this.modelList.push(i),o.EventManager.instance.dispatch(a.CommonEvent.Event_Refresh_EquipRank)},e.modelList=[],e}();i.default=r,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../event/CommonEvent":"CommonEvent","../../model/ServerTime":"ServerTime","./EquipRankItemModel":"EquipRankItemModel"}],EquipRank:[function(e,t,i){"use strict";cc._RF.push(t,"ef549FbGvpPC7BVFP7PZ6AJ","EquipRank");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../utils/MusicHelper"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../network/SocketClient"),l=e("./EquipRankModel"),d=e("../../../engine/EventManager"),f=e("../../event/CommonEvent"),g=e("../../prefab/ItemPrefab"),h=e("../../model/RoleInfoModel"),u=e("../../model/CostumeModel"),p=e("../../config/GameConst"),m=e("../../config/EquipConfig"),C=e("../../model/ServerTime"),_=e("../../../engine/ViewBase"),v=e("../../utils/UIHelper"),y=e("../PublicTipView"),b=e("../../config/WordConfig"),I=cc._decorator,M=I.ccclass,w=I.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currSelet=0,t.seletType=0,t.frameSpriteFrameList=[],t.poslist1=[1,2,3,4,5,6,7,10],t.poslist2=[101,102,103,104,105,106,107,110],t.itemList=[],t.itemModelList=[],t}var i;return n(t,e),i=t,t.prototype.onEnable=function(){},t.prototype.onInitChild=function(){if(this.btn_help=this.findChild(this.node,"bg/top/btn_help"),this.btn_close=this.findChild(this.node,"bg/top/btn_close"),this.tab_fanren=this.findChild(this.node,"bg/top/tab/tab_fanren"),this.tab_luanhui=this.findChild(this.node,"bg/top/tab/tab_luanhui"),this.itemTop1=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop1"),this.onAddEvent(this.itemTop1.getChildByName("ItemPrefab"),this.showEquipDetail.bind(this,0)),this.itemTop1.active=!1,this.itemTop2=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop2"),this.onAddEvent(this.itemTop2.getChildByName("ItemPrefab"),this.showEquipDetail.bind(this,1)),this.itemTop2.active=!1,this.itemTop3=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop3"),this.onAddEvent(this.itemTop3.getChildByName("ItemPrefab"),this.showEquipDetail.bind(this,2)),this.itemTop3.active=!1,this.itemOther=this.findChild(this.node,"bg/middle/scrollView/view/content/itemOther"),this.itemOther.active=!1,this.itemList.length<=0){this.itemList.push(this.itemTop1),this.itemList.push(this.itemTop2),this.itemList.push(this.itemTop3);for(var e=3;e<100;e++){var t=cc.instantiate(this.itemOther);t.parent=this.itemOther.parent,this.onAddEvent(t.getChildByName("ItemPrefab"),this.showEquipDetail.bind(this,e)),this.itemList.push(t)}}for(e=0;e<this.itemList.length;e++)this.itemList[e].active=!1;this.myRank=this.findChild(this.node,"bg/myRank"),this.onAddEvent(this.myRank.getChildByName("ItemPrefab"),this.showMyEquipDetail.bind(this)),this.dropBox=this.findChild(this.node,"bg/middle/top/top/dropBox"),this.template=this.findChild(this.dropBox,"Template"),this.dropContent=this.findChild(this.template,"view/content"),this.onAddEvent(this.btn_close,this.closeView.bind(this)),this.onAddEvent(this.btn_help,this.onClickHelp.bind(this)),this.onAddEvent(this.tab_fanren,this.onClickFanRen.bind(this)),this.onAddEvent(this.tab_luanhui,this.onClickLuanHui.bind(this)),this.onAddEvent(this.findChild(this.dropBox,"DropDownBox"),this.onClickDropBox.bind(this)),d.EventManager.instance.on(f.CommonEvent.Event_Refresh_EquipRank,this.refreshRankbyServer,this);for(e=0;e<this.dropContent.childrenCount;e++)this.onAddEvent(this.dropContent.getChildByName("item"+(e+1)),this.onclickItem.bind(this,e));this.template.active=!1,this.currSelet=i.TYPE_FANREN,this.refreshTab(),this.initDropBox()},t.prototype.onClickHelp=function(){s.default.instance.createView(r.default.gameView.RankRuleView,null,y.RuleType.TYPE_EQUIP)},t.prototype.onClickFanRen=function(){this.currSelet=i.TYPE_FANREN,this.refreshTab()},t.prototype.onClickLuanHui=function(){this.currSelet=i.TYPE_LUANHUI,this.refreshTab()},t.prototype.onClickDropBox=function(){this.findChild(this.dropBox,"Template").active=!this.findChild(this.dropBox,"Template").active},t.prototype.refreshTab=function(){this.findChild(this.tab_fanren,"1").active=!1,this.findChild(this.tab_luanhui,"1").active=!1,this.currSelet==i.TYPE_FANREN?this.findChild(this.tab_fanren,"1").active=!0:this.currSelet==i.TYPE_LUANHUI&&(this.findChild(this.tab_luanhui,"1").active=!0),this.refreshRank()},t.prototype.refreshRank=function(){var e=[];e=this.currSelet==i.TYPE_LUANHUI?this.poslist2:this.poslist1;for(var t=[],n=l.default.modelList,o=!1,a=0;a<n.length;a++){if(n[a].equipPos==e[this.seletType])t=n[a].list,Math.floor(C.ServerTime.getServerTime()/1e3-n[a].refreshTime)>=10&&(o=!0)}for(a=0;a<this.itemList.length;a++)this.itemList[a].active=!1;t.length>0&&!o?this.refreshRankbyServer():c.default.s_equip_rank(e[this.seletType])},t.prototype.refreshRankbyServer=function(){var e=[];e=this.currSelet==i.TYPE_LUANHUI?this.poslist2:this.poslist1;for(var t=l.default.modelList,n=0;n<this.itemList.length;n++)this.itemList[n].active=!1;for(n=0;n<t.length;n++)if(e[this.seletType]==t[n].equipPos){var o=t[n].list;this.itemModelList=o;for(var a=0;a<o.length;a++){var s=o[a].itemInfoModel;0==a?(this.itemTop1.active=!0,this.itemTop1.getChildByName("roleName").getComponent(cc.Label).string=o[a].heroName,this.onAddEvent(this.itemTop1.getChildByName("roleName"),v.UIHelper.showPlayerDetail.bind(this,o[a].heroId)),this.itemTop1.getChildByName("rolePower").getComponent(cc.Label).string=this.getJingJieDesc()+s.fight+"",this.itemTop1.getChildByName("ItemPrefab").getComponent(g.default).init(s),u.CostumeModel.setCostSF(this.itemTop1.getChildByName("touxiang").getComponent(cc.Sprite),u.CostumeType.Head,o[a].personalize.portrait),u.CostumeModel.setCostSF(this.itemTop1.getChildByName("touxiangkuang").getComponent(cc.Sprite),u.CostumeType.HeadFM,o[a].personalize.portrait_skin)):1==a?(this.itemTop2.active=!0,this.itemTop2.getChildByName("roleName").getComponent(cc.Label).string=o[a].heroName,this.onAddEvent(this.itemTop2.getChildByName("roleName"),v.UIHelper.showPlayerDetail.bind(this,o[a].heroId)),this.itemTop2.getChildByName("rolePower").getComponent(cc.Label).string=this.getJingJieDesc()+s.fight+"",this.itemTop2.getChildByName("ItemPrefab").getComponent(g.default).init(s),u.CostumeModel.setCostSF(this.itemTop2.getChildByName("touxiang").getComponent(cc.Sprite),u.CostumeType.Head,o[a].personalize.portrait),u.CostumeModel.setCostSF(this.itemTop2.getChildByName("touxiangkuang").getComponent(cc.Sprite),u.CostumeType.HeadFM,o[a].personalize.portrait_skin)):2==a?(this.itemTop3.active=!0,this.itemTop3.getChildByName("roleName").getComponent(cc.Label).string=o[a].heroName,this.itemTop3.getChildByName("rolePower").getComponent(cc.Label).string=this.getJingJieDesc()+s.fight+"",this.onAddEvent(this.itemTop3.getChildByName("roleName"),v.UIHelper.showPlayerDetail.bind(this,o[a].heroId)),this.itemTop3.getChildByName("ItemPrefab").getComponent(g.default).init(s),u.CostumeModel.setCostSF(this.itemTop3.getChildByName("touxiang").getComponent(cc.Sprite),u.CostumeType.Head,o[a].personalize.portrait),u.CostumeModel.setCostSF(this.itemTop3.getChildByName("touxiangkuang").getComponent(cc.Sprite),u.CostumeType.HeadFM,o[a].personalize.portrait_skin)):(this.itemList[a].getChildByName("roleName").getComponent(cc.Label).string=o[a].heroName,this.onAddEvent(this.itemList[a].getChildByName("roleName"),v.UIHelper.showPlayerDetail.bind(this,o[a].heroId)),this.itemList[a].getChildByName("rolePower").getComponent(cc.Label).string=this.getJingJieDesc()+s.fight+"",this.itemList[a].getChildByName("ItemPrefab").getComponent(g.default).init(s),this.itemList[a].getChildByName("order").getComponent(cc.Label).string=a+1+"",u.CostumeModel.setCostSF(this.itemList[a].getChildByName("touxiang").getComponent(cc.Sprite),u.CostumeType.Head,o[a].personalize.portrait),u.CostumeModel.setCostSF(this.itemList[a].getChildByName("touxiangkuang").getComponent(cc.Sprite),u.CostumeType.HeadFM,o[a].personalize.portrait_skin),this.itemList[a].active=!0)}for(var r=-1,c=this.getItemInfoModelByPos(e[this.seletType]),d=0;d<o.length;d++)if(o[d].heroId==Number(h.default.instance.roleId)){r=d+1,this.myEquip=c=o[d].itemInfoModel;break}this.myRank.getChildByName("ItemPrefab").active=!1,r>0?(this.myRank.getChildByName("wei").active=!1,this.myRank.getChildByName("order").active=!0,this.myRank.getChildByName("order").getComponent(cc.Label).string=r+"",this.myRank.getChildByName("rolePower").getComponent(cc.Label).string=this.getJingJieDesc()+c.fight+"",this.myRank.getChildByName("ItemPrefab").getComponent(g.default).init(c),this.myRank.getChildByName("ItemPrefab").active=!0):(this.myRank.getChildByName("wei").active=!0,this.myRank.getChildByName("order").active=!1,this.myRank.getChildByName("order").getComponent(cc.Label).string=r+"",c?(this.myRank.getChildByName("ItemPrefab").getComponent(g.default).init(c),this.myRank.getChildByName("rolePower").getComponent(cc.Label).string=this.getJingJieDesc()+c.fight+"",this.myRank.getChildByName("ItemPrefab").active=!0):(this.myRank.getChildByName("ItemPrefab").active=!1,this.myRank.getChildByName("rolePower").getComponent(cc.Label).string=this.getJingJieDesc()+0+"")),this.myEquip=c,this.myRank.getChildByName("roleName").getComponent(cc.Label).string=h.default.instance.roleName,u.CostumeModel.setCostSF(this.myRank.getChildByName("touxiang").getComponent(cc.Sprite),u.CostumeType.Head),u.CostumeModel.setCostSF(this.myRank.getChildByName("touxiangkuang").getComponent(cc.Sprite),u.CostumeType.HeadFM)}},t.prototype.initDropBox=function(){this.dropBox.getChildByName("DropDownBox").getChildByName("curr").getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[this.seletType];for(var e=0;e<this.dropContent.childrenCount;e++)this.seletType!=e?this.dropContent.getChildByName("item"+(e+1)).getChildByName("selet").active=!1:this.dropContent.getChildByName("item"+(e+1)).getChildByName("selet").active=!0;this.findChild(this.dropBox,"Template").active=!1},t.prototype.onclickItem=function(e){this.seletType!=e&&(this.seletType=e,this.refreshRank(),this.initDropBox())},t.prototype.getItemInfoModelByPos=function(e){for(var t=h.default.instance.itemInfoList,i=[],n=0;n<t.length;n++)t[n].itemKind==p.GameConst.ITEM_KIND.EQUIP&&t[n].gridId>=0&&m.EquipConfig.getEquipConfigById(t[n].itemType).position==e&&i.push(t[n]);return i.length>1?i[0].fight>i[1].fight?i[0]:i[1]:i[0]},t.prototype.showEquipDetail=function(e){this.itemModelList[e]&&s.default.instance.createView(r.default.gameView.equipInfo,null,this.itemModelList[e].itemInfoModel,1)},t.prototype.showMyEquipDetail=function(){this.myRank.getChildByName("ItemPrefab").active&&s.default.instance.createView(r.default.gameView.equipInfo,null,this.myEquip,1)},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e),e.on(cc.Node.EventType.TOUCH_END,function(){e.getComponent(cc.Button).enabled&&(a.MusicHelper.play_click(),t&&t())},e)},t.prototype.getJingJieDesc=function(){return this.currSelet==i.TYPE_FANREN?b.WordConfig.getWord(61666):this.currSelet==i.TYPE_LUANHUI?b.WordConfig.getWord(61667):void 0},t.type_equip=2,t.TYPE_FANREN=1,t.TYPE_LUANHUI=2,o([w({type:[cc.SpriteFrame]})],t.prototype,"frameSpriteFrameList",void 0),t=i=o([M],t)}(_.default);i.default=k,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView","./EquipRankModel":"EquipRankModel"}],EventManager:[function(e,t,i){"use strict";cc._RF.push(t,"65baaVVGOtMc64xZPRyFtjM","EventManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.handlers={}}return e.prototype.on=function(e,t,i,n){void 0===n&&(n=!1);var o=this.handlers[e];o||(o=[],this.handlers[e]=o);for(var a=0;a<o.length;a++){if(!o[a])return o[a].handler=t,o[a].target=i,o[a].isRestrict=n,a;if(o[a].handler==t&&o[a].target==i)return o[a].isRestrict=n,a}return o.push({handler:t,target:i,isRestrict:n}),o.length},e.prototype.dispatch=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.handlers[e];if(n)for(var o=0;o<n.length;o++){var a=n[o].handler,s=n[o].target,r=n[o].isRestrict;if(a)try{if(!r&&s&&s instanceof cc.Component&&0==s.enabledInHierarchy)continue;s?a.call.apply(a,[s].concat(t)):a.call.apply(a,t)}catch(e){console.error(e)}}},e.prototype.off=function(e,t,i){var n=this.handlers[e];if(n)for(var o=0;o<n.length;o++){var a=n[o].handler,s=n[o].target;if(a===t&&s===i){n.splice(o,1);break}}},e.prototype.clear=function(e,t){for(var i in void 0===t&&(t=!1),this.handlers)for(var n=this.handlers[i],o=0;o<n.length;o++){var a=n[o].target,s=n[o].isRestrict;a!==e||s&&!t||n.splice(o,1)}},e.prototype.clearAll=function(){this.handlers={}},e.prototype.addBtnEvent=function(e,t,i,n,o,a){void 0===o&&(o=null),void 0===a&&(a=!1);var s=t.addComponent(cc.Button),r=new cc.Component.EventHandler;r.target=e,r.component=i,r.handler=n,r.customEventData=o,s.clickEvents.push(r),a&&this.addBtnEffect(t)},e.prototype.removeBtnEvent=function(e){var t=e.getComponent(cc.Button);t&&(t.clickEvents=[]),e.removeComponent(cc.Button)},e.prototype.removeBtnEffect=function(e){e.getComponent(cc.Button).transition=cc.Button.Transition.NONE},e.prototype.addBtnEffect=function(e,t){void 0===t&&(t=1.1);var i=e.getComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.zoomScale=t},e.prototype.addSliderEvent=function(e,t,i,n){var o=t.getComponent(cc.Slider),a=new cc.Component.EventHandler;a.target=e,a.component=e.name,a.handler=i,a.customEventData=n,o.slideEvents.push(a)},e.instance=new e,e}();i.EventManager=n,cc._RF.pop()},{}],EverydayLoginModel:[function(e,t,i){"use strict";cc._RF.push(t,"4e239h5DoZOXq4su4d3291h","EverydayLoginModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../config/SignBoardConfig"),l=e("../event/CommonEvent"),d=e("../manager/RedPointManager"),f=function(){return function(){}}();i.AwardInfo=f,function(e){e[e.UnReceive=1]="UnReceive",e[e.Receive=2]="Receive",e[e.Received=3]="Received",e[e.ReceiveAgain=4]="ReceiveAgain",e[e.ReceivedAgain=5]="ReceivedAgain"}(n=i.AwardStatus||(i.AwardStatus={}));var g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[d.RedPointId.Activity_Everyday_Login],this.protos=[s.ProtoConfig.c_activity_everyday_login_info,s.ProtoConfig.c_activity_everyday_reward],d.default.getInstance().addHandler(this)}return e.proto2Model=function(t){new e;var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_activity_everyday_login_info,t);this.awardInfoMap=new Map,this.loginDays=i.getLogindays(),this.difday=i.getDifday();var n=i.getAwardsList();if(n)for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)){var d=n[c],g=new f;g.index=d.getIndex(),g.status=d.getState(),this.awardInfoMap.set(g.index,g)}a.Logger.log("c_activity_everyday_login_info====",i),o.EventManager.instance.dispatch(l.CommonEvent.Event_EverydayLogin_refresh)},e.proto2Award=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_activity_everyday_reward,e),i=t.getIndex(),c=this.awardInfoMap.get(i);c&&(c.status==n.Receive&&(c.status=n.Received),c.status==n.ReceiveAgain&&(c.status=n.ReceivedAgain)),a.Logger.log("c_activity_everyday_reward====",t),o.EventManager.instance.dispatch(l.CommonEvent.Event_EverydayLogin_refresh)},e.GetDataById=function(e){var t;return this.awardInfoMap&&this.awardInfoMap.get(e)?t=this.awardInfoMap.get(e):((t=new f).index=e,t.status=n.UnReceive),t},e.prototype.checkRedPoint=function(){var t=[],i=!1,o=c.SignBoardConfig.getAllList();0!=e.awardInfoMap.size&&o.forEach(function(t){var o=e.GetDataById(t.day);o.status!=n.Receive&&o.status!=n.ReceiveAgain||(i=!0)}),o.forEach(function(t){var n=e.awardInfoMap.get(t.day);e.loginDays!=t.day||n||(i=!0)});var s={id:d.RedPointId.Activity_Everyday_Login,type:d.RedPointType.Default,show:i};return t.push(s),a.Logger.log("awardInfoMap==="+e.awardInfoMap.size),t},e}();i.default=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/SignBoardConfig":"SignBoardConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],EverydaySignatureTip:[function(e,t,i){"use strict";cc._RF.push(t,"cf534OtJi9AMqkr7Wyejlrd","EverydaySignatureTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/ViewConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.btnClose=this.findChild(this.node,"panel/btnClose"),this.btnDefine=this.findChild(this.node,"panel/btnDefine"),this.btnCancel=this.findChild(this.node,"panel/btnCancel")},t.prototype.onEnable=function(){this.setTopUI(),this.onAddEvent(this.btnClose,this.OnClickClose.bind(this)),this.onAddEvent(this.btnDefine,this.OnClickDefine.bind(this)),this.onAddEvent(this.btnCancel,this.OnClickClose.bind(this))},t.prototype.OnClickClose=function(){a.default.instance.closeView(r.default.gameView.EverydaySignatureTip)},t.prototype.OnClickDefine=function(){a.default.instance.closeView(r.default.gameView.EverydaySignatureTip),a.default.instance.createView(r.default.gameView.topUp)},t=o([l],t)}(s.default));i.default=d,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig"}],EverydaySignatureView:[function(e,t,i){"use strict";cc._RF.push(t,"fa2d8Ahu4VB5o3P4OjpNu/o","EverydaySignatureView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/EquipConfig"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../config/MapConfig"),g=e("../../config/SignBoardConfig"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=e("../../event/CommonEvent"),m=e("../../manager/RedPointManager"),C=e("../../model/EverydayLoginModel"),_=e("../../model/ItemInfoModel"),v=e("../../network/SocketClient"),y=e("../../prefab/ItemPrefab"),b=e("../PublicTipView"),I=cc._decorator,M=I.ccclass,w=(I.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(p.CommonEvent.Event_EverydayLogin_refresh,this.initView,this),v.default.s_activity_everyday_login_info(),m.default.getInstance().checkRedPointById(m.RedPointId.Activity_Everyday_Login),this.initView()},t.prototype.initFindNode=function(){this.btnRule=this.findChild(this.node,"frame/activityName/btnRule"),this.content=this.findChild(this.node,"frame/award/view/content"),this.awardItem=this.findChild(this.node,"frame/award/view/content/awardItem"),this.itemPrefab=this.findChild(this.node,"frame/award/view/content/awardItem/itemList/ItemPrefab")},t.prototype.initView=function(){for(var e=g.SignBoardConfig.configArr,t=C.default.difday,i=t<=e.length?t:e.length,n=0;n<i;n++){var o=void 0;n<this.content.childrenCount?o=this.content.children[n]:(o=cc.instantiate(this.awardItem)).parent=this.content,n<i?this.initSignatureItem(o,e[n]):o.active=!1}this.onAddEvent(this.btnRule,this.OnClickRule.bind(this))},t.prototype.initSignatureItem=function(e,t){var i=e.getChildByName("normal"),n=e.getChildByName("selected"),o=e.getChildByName("itemList"),a=e.getChildByName("effect"),s=e.getChildByName("received"),r=e.getChildByName("receiveAgain"),c=e.getChildByName("clickNode"),l=e.getChildByName("day").getComponent(cc.Label);i.active=!0,c.active=!1;var d=C.default.loginDays,f=C.default.GetDataById(t.id);n.active=t.day==d,n.active&&f.status==C.AwardStatus.UnReceive&&(f.status=C.AwardStatus.Receive,c.active=!0),s.active=!1,f.status==C.AwardStatus.ReceivedAgain&&(s.active=!0,n.active=!1),r.active=!1,f.status==C.AwardStatus.Received&&(r.active=!0,n.active=!1,c.active=!0),f.status==C.AwardStatus.ReceiveAgain&&(r.active=!0,n.active=!0,c.active=!0),this.initItemPrefab(o,t,f.status),a.active=!1,t.ress&&void 0!=t.ress[2]&&(a.active=!0,a.getComponent(cc.Animation).play()),l.string=cc.js.formatStr(u.WordConfig.getWord(60438),t.day)},t.prototype.initItemPrefab=function(e,t,i){var n=this,o=0,a=t.ress,s=t.item,r=t.equip;if(a)for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)){var g=a[f],h=void 0;o<e.childrenCount?h=e.children[o]:((h=cc.instantiate(this.itemPrefab)).parent=e,h.setPosition(0,0)),h.active=!0,h.getComponent(y.default).initResource(parseInt(f),g),this.onAddEvent(e.parent,function(){n.onClickSignatureItem(t,i)}),o++}if(s){var u=function(a){if(Object.prototype.hasOwnProperty.call(s,a)){var r,c=s[a];o<e.childrenCount?r=e.children[o]:((r=cc.instantiate(p.itemPrefab)).parent=e,r.setPosition(0,0)),r.active=!0;var f=d.ITemsConfig.getITemsConfigById(a),g=_.default.create(l.GameConst.ITEM_KIND.ITEM,f.id,c,f.quality);r.getComponent(y.default).init(g,!0,function(e){1==e?r.getComponent(y.default).onClickThis():n.onClickSignatureItem(t,i)}),o++}},p=this;for(var f in s)u(f)}if(r){var m=function(a){if(Object.prototype.hasOwnProperty.call(r,a)){var s;r[a];o<e.childrenCount?s=e.children[o]:((s=cc.instantiate(C.itemPrefab)).parent=e,s.setPosition(0,0)),s.active=!0;var f=void 0;f=c.EquipConfig.getEquipConfigById(a).dingzhi?_.default.createDingZhiEquip(a):_.default.create(l.GameConst.ITEM_KIND.EQUIP,a);d.ITemsConfig.getITemsConfigById(f.itemType);s.getComponent(y.default).init(f,!0,function(e){1==e?s.getComponent(y.default).onClickThis():n.onClickSignatureItem(t,i)}),o++}},C=this;for(var f in r)m(f)}},t.prototype.onClickThis=function(e,t,i,n){var o;e?(o=t||_.default.create(e.kind,e.id,0,e.quality),_.default.getItemAmountById(o.itemId)>0&&("expball"==e.position||"expball_full"==e.position)?s.default.instance.createView(h.default.gameView.ExpBallView,null,o):s.default.instance.createView(h.default.gameView.ItemInfo,null,o,0,!1)):i&&(o=1==i.dingzhi?i.world==f.MapConfig.WORLD.FanRen?_.default.createDingZhiEquip(i.id):_.default.createFuWenEquip(i.id):t||_.default.create(i.kind,i.id,0,n),s.default.instance.createView(h.default.gameView.equipInfo,null,o,2))},t.prototype.onClickSignatureItem=function(e,t){if(t==C.AwardStatus.UnReceive)u.WordConfig.showWord(60680);else if(t==C.AwardStatus.Receive||t==C.AwardStatus.ReceiveAgain)v.default.s_activity_everyday_reward(e.id);else if(t==C.AwardStatus.Received)s.default.instance.createView(h.default.gameView.EverydaySignatureTip);else if(t==C.AwardStatus.ReceivedAgain)return;v.default.s_activity_everyday_login_info()},t.prototype.OnClickRule=function(){s.default.instance.createView(h.default.gameView.PublicTipView,null,b.RuleType.TYPE_EVERYDAY_SIGNATURE)},t=o([M],t)}(r.default));i.default=w,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MapConfig":"MapConfig","../../config/SignBoardConfig":"SignBoardConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/EverydayLoginModel":"EverydayLoginModel","../../model/ItemInfoModel":"ItemInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../PublicTipView":"PublicTipView"}],ExchangeShopView:[function(e,t,i){"use strict";cc._RF.push(t,"02746W6KxtPipXXoVbLsXGF","ExchangeShopView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/ViewBase"),r=e("../config/GameConst"),c=e("../config/ITemsConfig"),l=e("../model/ItemInfoModel"),d=e("../network/SocketClient"),f=e("../prefab/ItemPrefab"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minExchangeNum=1,t.exchangeNum=0,t.maxExchangeNum=0,t.needList=[],t}return n(t,e),t.prototype.onInitChild=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=1),this.fangShopConfig=e,t>this.minExchangeNum&&(this.minExchangeNum=t),this.exchangeNum=t,this.maxExchangeNum=i,i<=1&&(this.maxExchangeNum=t),this.needItem=this.findChild(this.node,"exchangeItemContainer/needItem"),this.needItem.active=!1,this.refreshShop(),this.refreshNum()},t.prototype.refreshShop=function(){var e=this,t=this.findChild(this.node,"ItemPrefab"),i=c.ITemsConfig.getITemsConfigById(this.fangShopConfig.item_id),n=l.default.create(r.GameConst.ITEM_KIND.ITEM,this.fangShopConfig.item_id,this.fangShopConfig.num,i.quality);t.getComponent(f.default).init(n,!0),this.getChild(this.node,"txtDesc",cc.RichText).string=i.description,this.getChild(this.node,"txtLevel",cc.Label).string=i.level+"";var o=this.findChild(this.node,"btnBuy");this.onAddEvent(o,function(){e.closeView(),a.Logger.log("\u5151\u6362+==",e.exchangeNum),d.default.s_seq_fangbuy(e.fangShopConfig.shopId,e.exchangeNum)});var s=this.findChild(this.node,"btnDec");this.onAddEvent(s,function(){e.exchangeNum--,e.exchangeNum<e.minExchangeNum&&(e.exchangeNum=e.minExchangeNum),e.refreshNum()});var g=this.findChild(this.node,"btnAdd");this.onAddEvent(g,function(){e.exchangeNum++,e.exchangeNum>e.maxExchangeNum&&(e.exchangeNum=e.maxExchangeNum),e.refreshNum()});var h=this.findChild(this.node,"btnMax");this.onAddEvent(h,function(){e.exchangeNum=e.maxExchangeNum,e.refreshNum()})},t.prototype.refreshNeed=function(){for(var e=this.fangShopConfig.token,t=[],i=0;i<e.length;i++){var n=e[i];for(var o in t=[],n)t=[n[o],o];var a=void 0;this.needList[i]?a=this.needList[i]:((a=cc.instantiate(this.needItem)).parent=this.needItem.parent,this.needList.push(a)),a.active=!0,a.getChildByName("txtNum").getComponent(cc.Label).string=""+t[0]*this.exchangeNum;var s=c.ITemsConfig.getITemsConfigById(t[1]),d=l.default.create(r.GameConst.ITEM_KIND.ITEM,s.id,0,s.quality);a.getChildByName("itemPrefab").getComponent(f.default).init(d,!0)}},t.prototype.refreshNum=function(){this.getChild(this.node,"amountEditBox",cc.EditBox).string=this.exchangeNum+"",this.refreshNeed()},t.prototype.update=function(){var e=this.getChild(this.node,"amountEditBox",cc.EditBox),t=parseInt(e.string);(isNaN(t)||t<=0)&&(t=1,e.string=t+""),t>=this.maxExchangeNum&&(t=this.maxExchangeNum,e.string=this.maxExchangeNum+""),t!=this.exchangeNum&&(this.exchangeNum=t,this.refreshNeed())},t=o([h],t)}(s.default));i.ExchangeShopView=u,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],ExoticExplorationConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ac70aijU1RM5qb8jOnvjTpr","ExoticExplorationConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=e[i];t.ExoticAwardConfigMap.set(Number(i),n)})},t.getAwards=function(e){var i=[];return t.ExoticAwardConfigMap.forEach(function(t,n){e==t.id_nd&&i.push(t)}),i},t.Config_Name1="Outlandexplore_awardConfig",t.Config_Name2="Outlandexplore_goalConfig",t.ExoticAwardConfigMap=new Map,t.ExoticGoalConfigMap=new Map,t}(o.JsonConfigBase);i.ExoticExplorationConfig=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){Object.keys(e).forEach(function(t){var i=e[t];a.ExoticGoalConfigMap.set(Number(t),i)})},t}(o.JsonConfigBase);i.ExoticGoalConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ExoticExplorationModel:[function(e,t,i){"use strict";cc._RF.push(t,"a0158N8ictC277mv0YuWn3G","ExoticExplorationModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/ProtoConfig"),o=e("../../engine/ProtoUtils"),a=e("../../engine/GameSocket"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../config/GameConfig"),l=e("../manager/RedPointManager"),d=e("./ItemInfoModel"),f=function(){return function(){}}();i.TKeyValue=f;var g=function(){return function(){}}();i.TRewardExplore=g;var h=function(){function e(){this.eventIdList=[],this.protos=[],this.exploreProgress=[],this.exploreTimes=[],this.freeTimes=0,this.rewardList=[],this.eventIdList=[l.RedPointId.ExoticExploration1,l.RedPointId.ExoticExploration2],l.default.getInstance().addHandler(this),this.protos=[n.ProtoConfig.c_get_explore_info,n.ProtoConfig.c_update_item_info]}return e.prototype.checkRedPoint=function(){var t=[],i=!1,n=!1;e.instance.freeTimes>0&&(i=!0),e.instance.rewardList.forEach(function(e){1==e.status&&(e.id<100?i=!0:n=!0)}),d.default.getItemAmount("I3924")>0&&(i=!0),d.default.getItemAmount("I3925")>0&&(n=!0);var o={id:l.RedPointId.ExoticExploration1,type:l.RedPointType.Default,show:i};t.push(o);var a={id:l.RedPointId.ExoticExploration2,type:l.RedPointType.Default,show:n};return t.push(a),t},e.proto_c_get_explore_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_get_explore_info,t),a=i.getExploreProgressList(),c=i.getExploreTimesList(),l=i.getFreeTimes(),d=i.getRewardListList();e.instance.exploreProgress=[],e.instance.exploreTimes=[],e.instance.freeTimes=l,e.instance.rewardList=[],a.forEach(function(t){var i=new f;i.key=t.getKey(),i.value=t.getValue(),e.instance.exploreProgress.push(i)}),c.forEach(function(t){var i=new f;i.key=t.getKey(),i.value=t.getValue(),e.instance.exploreTimes.push(i)}),d.forEach(function(t){var i=new g;i.id=t.getId(),i.status=t.getStatus(),e.instance.rewardList.push(i)}),s.EventManager.instance.dispatch(r.CommonEvent.Event_ExoticExploration_Refresh)},e.proto_c_get_explore_item=function(t){o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_get_explore_item,t).getRet();e.s_get_explore_info()},e.proto_c_start_explore=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_start_explore,t),a=i.getRet(),c=i.getRewardListList(),l=[];1==a&&c.forEach(function(e){var t={id:e.getId(),num:e.getNum()};l.push(t)}),e.s_get_explore_info(),s.EventManager.instance.dispatch(r.CommonEvent.Event_ExoticExploration_StartEx,l)},e.proto_c_get_explore_accreward=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_get_explore_accreward,t);i.getId(),i.getRet();e.s_get_explore_info()},e.s_get_explore_info=function(){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=o.ProtoUtils.Create(n.ProtoConfig.s_get_explore_info);a.default.getInstance().sendToSocket(e)}},e.s_get_explore_item=function(e,t){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=o.ProtoUtils.Create(n.ProtoConfig.s_get_explore_item);i.setBuyNum(e),i.setKey(t),a.default.getInstance().sendToSocket(i)}},e.s_start_explore=function(e,t){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=o.ProtoUtils.Create(n.ProtoConfig.s_start_explore);i.setType(e),i.setKey(t),a.default.getInstance().sendToSocket(i)}},e.s_get_explore_accreward=function(e){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=o.ProtoUtils.Create(n.ProtoConfig.s_get_explore_accreward);t.setId(e),a.default.getInstance().sendToSocket(t)}},e.getRewardListInfo=function(t){var i;return e.instance.rewardList.forEach(function(e){e.id==t&&(i=e)}),i},e.getExpTimeInfo=function(t){var i;return e.instance.exploreTimes.forEach(function(e){e.key==t&&(i=e)}),i},e.getExpProgress=function(t){var i;return e.instance.exploreProgress.forEach(function(e){e.key==t&&(i=e)}),i},e.getIsReward=function(t){var i=!1;return e.instance.rewardList.forEach(function(e){1==e.status&&(e.id<100&&1==t?i=!0:e.id>100&&2==t&&(i=!0))}),i},e.instance=new e,e}();i.ExoticExplorationModel=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GameConfig":"GameConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./ItemInfoModel":"ItemInfoModel"}],ExoticExplorationShop:[function(e,t,i){"use strict";cc._RF.push(t,"a5dbcw02qhLFpDt5y53I728","ExoticExplorationShop");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../prefab/ItemPrefab"),r=e("../../config/ITemsConfig"),c=e("../../config/WordConfig"),l=e("../../../engine/EventManager"),d=e("../../event/CommonEvent"),f=e("../../model/ItemInfoModel"),g=e("../../config/ColorConfig"),h=e("../../config/FangShopConfig"),u=e("../../model/FangShiModel"),p=e("../../network/SocketClient"),m=e("../../model/RoleInfoModel"),C=cc._decorator,_=C.ccclass,v=C.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconspriteFrameList=[],t.shopWindow=null,t.nowBuyNum=0,t.itemNodeList=[],t.maxNum=999,t.shoptype=1,t.config=null,t.hbid="I3924",t.money=0,t}return n(t,e),t.prototype.onInitChild=function(e){void 0===e&&(e=1),this.shoptype=e},t.prototype.onShow=function(){l.EventManager.instance.on(d.CommonEvent.Event_UserInfoRefresh,this.refresh,this),l.EventManager.instance.on(d.CommonEvent.Event_FangShi_Change,this.refresh,this),this.hbid=1==this.shoptype?"I3924":"I3925",this.item=this.getChild(this.node,"scrollView/view/content/item"),this.item.active=!1,this.node.getChildByName("anyushangdian").active=1==this.shoptype,this.node.getChildByName("moyushangdian").active=2==this.shoptype,this.shopWindow=this.getChild(this.node,"shopWindow"),this.shopWindow.active=!1,this.onAddEvent(this.findChild(this.shopWindow,"darkLayer"),this.onClickShopWindowClose.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btn_close"),this.onClickShopWindowClose.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btnDec"),this.onCLickPre.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btnAdd"),this.onClickNext.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btnMax"),this.onClickMax.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btn_duihuan"),this.onClickDuihuan.bind(this)),this.amountEditBox=this.findChild(this.node,"shopWindow/amountEditBox").getComponent(cc.EditBox),this.amountEditBox.node.on("text-changed",this.onTextChange,this);var e=this.iconspriteFrameList[1==this.shoptype?0:1];this.findChild(this.item,"cost/shopicon").getComponent(cc.Sprite).spriteFrame=e,this.findChild(this.node,"shopicon").getComponent(cc.Sprite).spriteFrame=e,this.findChild(this.shopWindow,"cost/shopicon").getComponent(cc.Sprite).spriteFrame=e;var t=1==this.shoptype?c.WordConfig.getWord(61715):c.WordConfig.getWord(61716);this.findChild(this.node,"shuijinglabel").getComponent(cc.Label).string=t,this.findChild(this.shopWindow,"xiaohaolabel").getComponent(cc.Label).string=t+c.WordConfig.getWord(60548),this.refresh()},t.prototype.refresh=function(){var e=this;this.money=f.default.getItemAmount(this.hbid),this.getChild(this.node,"txtMyScore",cc.Label).string=this.money;var t=this.findChild(this.node,"scrollView/view/content");t.children.forEach(function(e){e.active=!1});var i=0;h.default.getConfigListByType(this.shoptype+5).forEach(function(n){if(0==n.isshow||m.default.instance.level>=n.level){var o=t.children[i++];o||((o=cc.instantiate(e.item)).parent=t),o.active=!0;var a=o.getChildByName("xiangou"),c=o.getChildByName("cost"),l=o.getChildByName("btnBuy"),d=o.getChildByName("fontclib_shouqing");e.onAddEvent(l,e.onClickBuy.bind(e,n));var f=u.default.getNumById(n.shopId);l.active=0!=f,d.active=0==f,n.restriction>0&&f>0?(a.active=!0,c.y=-7,a.y=-35,a.getChildByName("txtXiangou").getComponent(cc.Label).string=f+""):(c.y=-18,a.active=!1),c.getChildByName("txtCost").getComponent(cc.Label).string=n.token[0][e.hbid]+"";var g=r.ITemsConfig.getITemsConfigById(n.item_id);o.getChildByName("ItemPrefab").getComponent(s.default).init(g,!0),o.getChildByName("ItemPrefab").getComponent(s.default).setNumTxt(n.num,!0)}})},t.prototype.onClickBuy=function(e){this.config=e,this.shopWindow.active=!0;var t=r.ITemsConfig.getITemsConfigById(e.item_id);if(this.findChild(this.shopWindow,"ItemPrefab").getComponent(s.default).init(t),this.findChild(this.shopWindow,"ItemPrefab").getComponent(s.default).setNumTxt(e.num,!0),e.restriction<0)this.findChild(this.shopWindow,"xiangou").active=!1,this.maxNum=999;else{this.findChild(this.shopWindow,"xiangou").active=!0;var i=u.default.getNumById(e.shopId);this.findChild(this.shopWindow,"xiangou/value").getComponent(cc.Label).string=i+"",this.maxNum=i}var n=Math.floor(this.money/this.config.token[0][this.hbid]);n<this.maxNum&&(this.maxNum=n),0==this.maxNum&&(this.maxNum=1),this.nowBuyNum=1,this.shopWindowRefresh()},t.prototype.onTextChange=function(){this.nowBuyNum=parseInt(this.amountEditBox.string),this.shopWindowRefresh()},t.prototype.shopWindowRefresh=function(){this.amountEditBox.string=this.nowBuyNum+"";var e=this.config.token[0][this.hbid]*this.nowBuyNum;this.findChild(this.shopWindow,"cost/value").getComponent(cc.Label).string=e+"",e<=this.money?this.findChild(this.shopWindow,"cost/value").color=g.ColorConfig.WhiteColor:this.findChild(this.shopWindow,"cost/value").color=g.ColorConfig.RedColor},t.prototype.onClickDuihuan=function(){p.default.s_seq_fangbuy(this.config.shopId,this.nowBuyNum),this.onClickShopWindowClose()},t.prototype.onClickShopWindowClose=function(){this.shopWindow.active=!1},t.prototype.onCLickPre=function(){this.nowBuyNum>1&&(this.nowBuyNum--,this.shopWindowRefresh())},t.prototype.onClickNext=function(){this.nowBuyNum++,this.shopWindowRefresh()},t.prototype.onClickMax=function(){this.nowBuyNum=999,this.shopWindowRefresh()},t.prototype.update=function(){void 0!=this.config&&(this.nowBuyNum=parseInt(this.amountEditBox.string),(isNaN(this.nowBuyNum)||this.nowBuyNum<=0)&&(this.nowBuyNum=1,this.amountEditBox.string=this.nowBuyNum+"",this.shopWindowRefresh()),this.nowBuyNum>=this.maxNum&&(this.nowBuyNum=this.maxNum,this.amountEditBox.string=this.nowBuyNum+"",this.shopWindowRefresh()))},o([v({type:[cc.SpriteFrame]})],t.prototype,"iconspriteFrameList",void 0),t=o([_],t)}(a.default);i.ExoticExplorationShop=y,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/FangShopConfig":"FangShopConfig","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/FangShiModel":"FangShiModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],ExoticExploration:[function(e,t,i){"use strict";cc._RF.push(t,"c421edDa6VEvLNcB/SdCpYN","ExoticExploration");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../prefab/ItemPrefab"),l=e("../../config/ITemsConfig"),d=e("../../config/WordConfig"),f=e("../../../engine/EventManager"),g=e("../../event/CommonEvent"),h=e("../../../engine/SpriteFrameComponent"),u=e("../../config/ExoticExplorationConfig"),p=e("../../model/ExoticExplorationModel"),m=e("../../model/ItemInfoModel"),C=e("../../config/DefaultConfig"),_=e("../PublicTipView"),v=e("../../utils/MusicHelper"),y=e("../BuyShopView"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.exoticPrefb=null,t.Toggletype=null,t.publicnode=null,t.btnjump=null,t.darklayer=null,t.anyunode=null,t.aycouponsid="I9143",t.aydrawmin=1,t.aydrawmax=5,t.aytansuonum=200,t.moyunode=null,t.mycouponsid="I9143",t.mydrawmin=1,t.mydrawmax=5,t.mytansuonum=200,t.rewardnode=null,t.rewardContent1=null,t.rewardContent2=null,t.cumulativenode=null,t.itemPrefabContent=null,t.itemlayer=null,t.anitime=!1,t}return n(t,e),t.prototype.onLoad=function(){var e=this;for(var t in C.DefaultConfig.getConfigById(163).value)this.aycouponsid=t,this.aydrawmin=C.DefaultConfig.getConfigById(163).value[t];for(var i in C.DefaultConfig.getConfigById(164).value)this.mycouponsid=i,this.mydrawmin=C.DefaultConfig.getConfigById(164).value[i];this.aydrawmax=C.DefaultConfig.getConfigById(165).value,this.mydrawmax=C.DefaultConfig.getConfigById(166).value,this.aytansuonum=C.DefaultConfig.getConfigById(167).value,this.mytansuonum=C.DefaultConfig.getConfigById(168).value,this.publicnode=this.node.getChildByName("publicnode"),this.anyunode=this.node.getChildByName("anyunode"),this.moyunode=this.node.getChildByName("moyunode"),this.darklayer=this.node.getChildByName("darkLayer2"),this.btnjump=this.publicnode.getChildByName("btnjump").getComponent(cc.Toggle),this.publicnode.getChildByName("btnanyu").on(cc.Node.EventType.TOUCH_END,this.onChangJackpot.bind(this,1)),this.publicnode.getChildByName("btnmoyu").on(cc.Node.EventType.TOUCH_END,this.onChangJackpot.bind(this,2)),this.publicnode.getChildByName("btnwenhao").on(cc.Node.EventType.TOUCH_END,this.onWenHao,this),this.publicnode.getChildByName("btnbuy").on(cc.Node.EventType.TOUCH_END,this.onBtnbuy,this),this.publicnode.getChildByName("btnyulan").on(cc.Node.EventType.TOUCH_END,this.onBtnyulan,this),this.publicnode.getChildByName("btnanyushop").on(cc.Node.EventType.TOUCH_END,this.onShop.bind(this,1)),this.publicnode.getChildByName("btnmoyushop").on(cc.Node.EventType.TOUCH_END,this.onShop.bind(this,1)),this.publicnode.getChildByName("btnleiji").on(cc.Node.EventType.TOUCH_END,this.onBtnleiji.bind(this,!0)),this.publicnode.getChildByName("btntansuo1").on(cc.Node.EventType.TOUCH_END,this.onBtntansuo.bind(this,1)),this.publicnode.getChildByName("btntansuo2").on(cc.Node.EventType.TOUCH_END,this.onBtntansuo.bind(this,2)),this.cumulativenode=this.node.getChildByName("cumulativenode");var n=this.findChild(this.cumulativenode,"baoxiangnode");this.itemPrefabContent=this.findChild(n,"itemPrefabContent"),this.itemlayer=this.findChild(n,"itemlayer"),this.itemlayer.on(cc.Node.EventType.TOUCH_END,function(){e.itemPrefabContent.active=!1,e.itemlayer.active=!1}),this.cumulativenode.getChildByName("darkLayer").on(cc.Node.EventType.TOUCH_END,this.onBtnleiji.bind(this,!1)),this.cumulativenode.getChildByName("btnClose").on(cc.Node.EventType.TOUCH_END,this.onBtnleiji.bind(this,!1)),this.cumulativenode.getChildByName("btnlingqv").on(cc.Node.EventType.TOUCH_END,this.onBtnLingQv.bind(this,!1));for(var o=1;o<=5;o++){n.getChildByName(o+"").on(cc.Node.EventType.TOUCH_END,this.onBaoXiang.bind(this,o))}this.rewardnode=this.node.getChildByName("rewardnode"),this.rewardContent1=this.rewardnode.getChildByName("content1"),this.rewardContent2=this.rewardnode.getChildByName("content2"),this.rewardnode.getChildByName("darkLayer").on(cc.Node.EventType.TOUCH_END,this.onShowReward.bind(this,!1)),this.rewardnode.getChildByName("btnqueding").on(cc.Node.EventType.TOUCH_END,this.onShowReward.bind(this,!1))},t.prototype.onEnable=function(){f.EventManager.instance.on(g.CommonEvent.Event_UserInfoRefresh,this.onRefresh,this),f.EventManager.instance.on(g.CommonEvent.Event_ExoticExploration_Refresh,this.onRefresh,this),f.EventManager.instance.on(g.CommonEvent.Event_ExoticExploration_StartEx,this.onStartEx,this),this.onChangJackpot(1)},t.prototype.onInit=function(){},t.prototype.onRefresh=function(){this.publicnode.getChildByName("tansuolabel11").getComponent(cc.Label).string=this.aydrawmin+"",this.publicnode.getChildByName("tansuolabel21").getComponent(cc.Label).string=this.aydrawmax+"",this.publicnode.getChildByName("tansuolabel12").getComponent(cc.Label).string=this.mydrawmin+"",this.publicnode.getChildByName("tansuolabel22").getComponent(cc.Label).string=this.mydrawmax+"",this.publicnode.getChildByName("tansuonum").getComponent(cc.Label).string=m.default.getItemAmount(1==this.Toggletype?this.aycouponsid:this.mycouponsid)+"";var e=p.ExoticExplorationModel.getExpProgress(this.Toggletype).value,t=1==this.Toggletype?this.aytansuonum:this.mytansuonum,i=1==this.Toggletype?d.WordConfig.getWord(61715):d.WordConfig.getWord(61716),n=cc.js.formatStr(d.WordConfig.getWord(61713),(t-e).toString(),i);this.publicnode.getChildByName("targetrich").getComponent(cc.RichText).string=n;var o=this.publicnode.getChildByName("btntansuo1"),a=1==this.Toggletype&&p.ExoticExplorationModel.instance.freeTimes>0;o.getComponent(cc.Sprite).spriteFrame=o.getComponent(h.SpriteFrameComponent).spriteFrameList[a?1:0],this.publicnode.getChildByName("tansuolabel11").active=!a,this.cumulativenode.active&&this.onRefreshCumulativenode(),this.CheckIcon()},t.prototype.onStartEx=function(e){var t=this,i=e.length;if(i>0)if(this.btnjump.isChecked)this.initStarEX(e);else{var n=0,o=[0,1,2,3,4,5,6,7,8,9];o.sort(function(){return.5-Math.random()});for(var a=(1==this.Toggletype?this.anyunode:this.moyunode).getChildByName("listnode"),s=0;s<i;s++){var r=a.getChildByName(o[s].toString()),c=cc.instantiate(this.exoticPrefb);c.parent=r,n=c.getComponent(cc.Animation).play(1==this.Toggletype?"anyuani":"moyuani").duration}this.scheduleOnce(function(){a.children.forEach(function(e){e.removeAllChildren()}),t.initStarEX(e)},n)}else this.onShowDarkLayer(!1)},t.prototype.initStarEX=function(e){this.rewardContent1.children.forEach(function(e){e.active=!1}),e.length>5?(this.rewardContent1.y=97,this.rewardContent2.active=!0,this.rewardContent2.children.forEach(function(e){e.active=!1})):(this.rewardContent1.y=40,this.rewardContent2.active=!1);for(var t=0;t<e.length;t++){var i=e[t],n=void 0;(n=t<5?this.rewardContent1.children[t]:this.rewardContent2.children[t-5])||((n=cc.instantiate(this.itemPrefab)).parent=t<5?this.rewardContent1:this.rewardContent2);var o=l.ITemsConfig.getITemsConfigById(i.id);n.getComponent(c.default).init(o,!0),n.getComponent(c.default).setNumTxt(i.num,!0),n.active=!0}this.onShowReward(!0)},t.prototype.onRefreshCumulativenode=function(){var e=this,t=this.findChild(this.cumulativenode,"baoxiangnode"),i=this.findChild(t,"labelnode"),n=[];p.ExoticExplorationModel.instance.rewardList.forEach(function(o){var a,s;if(1==e.Toggletype&&o.id<100?(a=t.getChildByName(o.id+""),s=i.getChildByName(o.id+"")):2==e.Toggletype&&o.id>100&&(a=t.getChildByName(o.id%100+""),s=i.getChildByName(o.id%100+"")),a){a.getChildByName("yilingqv").active=2==o.status,a.getChildByName("icon").active=1==o.status;var r=a.getChildByName("baoxiang");r.getComponent(cc.Sprite).spriteFrame=r.getComponent(h.SpriteFrameComponent).spriteFrameList[1==o.status?1:0]}if(s){var c=u.ExoticExplorationConfig.ExoticGoalConfigMap.get(o.id).goal;s.getComponent(cc.Label).string=c+"",n.push(c)}}),n.sort(function(e,t){return e-t});var o=p.ExoticExplorationModel.getExpTimeInfo(this.Toggletype).value,a=cc.js.formatStr(d.WordConfig.getWord(61710),o),s=0;this.findChild(this.cumulativenode,"tiprich").getComponent(cc.RichText).string=a;for(var r=0;r<n.length;r++){var c=n[r],l=n[r-1]?n[r-1]:0;if(!(o>=c)){s+=.2*(o-l)/(c-l);break}if(s+=.2,o==c)break}this.findChild(this.cumulativenode,"progressBar").getComponent(cc.ProgressBar).progress=s},t.prototype.onChangJackpot=function(e){if(v.MusicHelper.play_click(),this.Toggletype!=e){this.Toggletype=e;var t=this.publicnode.getChildByName("btnanyu"),i=this.publicnode.getChildByName("btnmoyu");t.getComponent(cc.Sprite).spriteFrame=t.getComponent(h.SpriteFrameComponent).spriteFrameList[1==e?1:0],i.getComponent(cc.Sprite).spriteFrame=i.getComponent(h.SpriteFrameComponent).spriteFrameList[2==e?1:0],this.anyunode.active=1==this.Toggletype,this.moyunode.active=2==this.Toggletype;var n=this.findChild(this.publicnode,"btnanyushop");n.active=1==this.Toggletype;var o=this.findChild(n,"butanyuAni").getComponent(cc.Animation);if(n.active){var a=o.getClips();o.play(a[0].name)}else o.stop();var s=this.findChild(this.publicnode,"btnmoyushop");s.active=2==this.Toggletype;var r=this.findChild(s,"butmoyuAni").getComponent(cc.Animation);if(s.active){a=r.getClips();r.play(a[0].name)}else r.stop();this.onRefresh()}},t.prototype.CheckIcon=function(){this.findChild(this.publicnode,"btntansuo1/icon").active=p.ExoticExplorationModel.instance.freeTimes>0&&1==this.Toggletype,this.findChild(this.publicnode,"btnanyushop/icon").active=m.default.getItemAmount("I3924")>0,this.findChild(this.publicnode,"btnmoyushop/icon").active=m.default.getItemAmount("I3925")>0,this.findChild(this.publicnode,"btnleiji/icon").active=p.ExoticExplorationModel.getIsReward(this.Toggletype),this.findChild(this.cumulativenode,"btnlingqv/icon").active=p.ExoticExplorationModel.getIsReward(this.Toggletype)},t.prototype.onWenHao=function(){v.MusicHelper.play_click(),s.default.instance.createView(r.default.gameView.PublicTipView,null,_.RuleType.TYPE_ExoticExploration)},t.prototype.onBtnbuy=function(){v.MusicHelper.play_click();var e=1==this.Toggletype?this.aycouponsid:this.mycouponsid,t=l.ITemsConfig.getITemsConfigById(e);s.default.instance.createView(r.default.gameView.BuyShopView,null,y.default.BuyType.KuaiJieGouMai,1,e,t.gem,t.gem,1,99)},t.prototype.onBtnyulan=function(){v.MusicHelper.play_click();var e=[],t=u.ExoticExplorationConfig.getAwards(this.Toggletype);t.sort(function(e,t){return e.order-t.order}),t.forEach(function(t,i){e.push(t.rewards_a)}),s.default.instance.createView(r.default.gameView.devilSealPreview,null,e,61712,!0)},t.prototype.onShop=function(e){v.MusicHelper.play_click(),s.default.instance.createView(r.default.gameView.ExoticExplorationShop,null,this.Toggletype)},t.prototype.onBtnleiji=function(e){v.MusicHelper.play_click(),e?(this.onRefreshCumulativenode(),this.itemPrefabContent.active=!1,this.cumulativenode.active=!0,this.cumulativenode.parent=s.default.instance.getTopRoot()):(this.cumulativenode.active=!1,this.cumulativenode.parent=this.node)},t.prototype.onBtntansuo=function(e){var t,i=this;(v.MusicHelper.play_click(),this.anitime)||(t=1==e?1:1==this.Toggletype?this.aydrawmax:this.mydrawmax,this.onShowDarkLayer(!0),this.unscheduleAllCallbacks(),this.scheduleOnce(function(){i.onShowDarkLayer(!1)},3),p.ExoticExplorationModel.s_start_explore(t,this.Toggletype))},t.prototype.onShowReward=function(e){if(v.MusicHelper.play_click(),e){var t=this;this.rewardnode.scale=.1,this.rewardnode.active=!0,this.rewardnode.parent=s.default.instance.getTopRoot(),this.rewardnode.runAction(cc.sequence(cc.scaleTo(.25,1),cc.callFunc(function(){t.onShowDarkLayer(!1)})))}else this.rewardnode.active=!1,this.rewardnode.parent=this.node;this.anitime=e},t.prototype.onShowDarkLayer=function(e){e?(this.darklayer.active=!0,this.darklayer.parent=s.default.instance.getTopRoot()):(this.darklayer.active=!1,this.darklayer.parent=this.node)},t.prototype.onBtnLingQv=function(){var e=this;v.MusicHelper.play_click(),p.ExoticExplorationModel.instance.rewardList.forEach(function(t){1==t.status&&(1==e.Toggletype&&t.id<100?p.ExoticExplorationModel.s_get_explore_accreward(t.id):2==e.Toggletype&&t.id>100&&p.ExoticExplorationModel.s_get_explore_accreward(t.id))})},t.prototype.onBaoXiang=function(e){var t=p.ExoticExplorationModel.getRewardListInfo(1==this.Toggletype?e:e+100);if(t&&1==t.status)p.ExoticExplorationModel.s_get_explore_accreward(t.id);else{var i=u.ExoticExplorationConfig.ExoticGoalConfigMap.get(t.id).rewards_a;if(this.itemPrefabContent.active=!0,this.itemlayer.active=!0,this.itemPrefabContent.active){switch(this.itemPrefabContent.removeAllChildren(),this.itemPrefabContent.scaleX=1==e||2==e?1:-1,e){case 1:this.itemPrefabContent.x=-258;break;case 2:this.itemPrefabContent.x=-159;break;case 3:this.itemPrefabContent.x=100;break;case 4:this.itemPrefabContent.x=198;break;case 5:this.itemPrefabContent.x=296}for(var n in i){var o=cc.instantiate(this.itemPrefab),a=l.ITemsConfig.getITemsConfigById(n);o.parent=this.itemPrefabContent,o.scaleX=1==e||2==e?1:-1,o.getComponent(c.default).init(a,!0),o.getComponent(c.default).setNumTxt(i[n],!0)}}}},o([M({type:cc.Prefab})],t.prototype,"itemPrefab",void 0),o([M({type:cc.Prefab})],t.prototype,"exoticPrefb",void 0),t=o([I],t)}(a.default);i.ExoticExplorationView=w,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/ExoticExplorationConfig":"ExoticExplorationConfig","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ExoticExplorationModel":"ExoticExplorationModel","../../model/ItemInfoModel":"ItemInfoModel","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","../BuyShopView":"BuyShopView","../PublicTipView":"PublicTipView"}],FailedJumpConfig:[function(e,t,i){"use strict";cc._RF.push(t,"70ba2d3/VRHe68YlGmIVHTF","FailedJumpConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},e.getConfig=function(){return this.configList},e.Config_Name="FailedJumpConfig",e.configList=[],e}();i.FailedJumpConfig=n,cc._RF.pop()},{}],FangShiModel:[function(e,t,i){"use strict";cc._RF.push(t,"0af39zEzJZPBb7E3uR6PiUi","FangShiModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("../../engine/EventManager"),a=e("../event/CommonEvent"),s=e("../config/FangShopConfig"),r=function(){function e(){}return e.getNumById=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.productId==e+"")return i.prodRepo}return 0},e.getModel=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.productId==e)return i}},e.updateNum=function(e,t){for(var i=0;i<this.modelList.length;i++){var n=this.modelList[i];n.productId==e&&(n.prodRepo=t)}var r=s.default.getConfigById(Number(e));3==r.shop_type?o.EventManager.instance.dispatch(a.CommonEvent.Event_ZHENBAOFangShi_Change):4==r.shop_type?o.EventManager.instance.dispatch(a.CommonEvent.Event_FangShi_Exchange_Change):o.EventManager.instance.dispatch(a.CommonEvent.Event_FangShi_Change,r.shop_type)},e.proto2ModelList=function(t){var i=t.getShopItemListList();this.modelList=[];for(var s=0;s<i.length;s++){var r=new e;this.modelList.push(r),r.productId=i[s].getProductid(),r.prodRepo=i[s].getProdrepo()}o.EventManager.instance.dispatch(a.CommonEvent.Event_FangShi_Change,1),n.Logger.log("FangShiModel====",this.modelList)},e.modelList=[],e}();i.default=r,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../config/FangShopConfig":"FangShopConfig","../event/CommonEvent":"CommonEvent"}],FangShopConfig:[function(e,t,i){"use strict";cc._RF.push(t,"17932l+EHBKs76H+aM8STDS","FangShopConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhenbao_des="",t.zhenbao_icon=1,t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.restriction=e.restriction,i.name=e.name,i.price_type=e.price_type,i.unit_price=e.unit_price,i.shop_type=e.shop_type,i.s_type=e.s_type,i.num=e.num,i.item_id=e.item_id,i.type=e.type,i.isshow=e.isshow,i.level=e.level,i.jingjie=e.jingjie,i.date=e.date,i.time=e.time,i.zhiye=e.zhiye,i.refresh=e.refresh,i.charge=e.charge,i.token=e.token,i.discount=e.discount,i.limit=e.limit,i.tehui_des=e.tehui_des,i.zhenbao_icon=e.zhenbao_icon,i.zhenbao_des=e.zhenbao_des,i.m_show=e.m_show,i},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.shopId&&(t=i)}),t},t.getConfigListByType=function(e,t){void 0===t&&(t=0);var i=[];return this.configMap.forEach(function(n,o){e==n.shop_type&&t==n.s_type&&i.push(n)}),i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.shopId=parseInt(i),t.configMap.set(n.shopId,n)})},t.getConfigByItemId=function(e){var t;return this.configMap.forEach(function(i,n){e==i.item_id&&(t=i)}),t},t.getConfigByCharge=function(e){var t;return this.configMap.forEach(function(i,n){e==i.charge&&(t=i)}),t},t.Config_Name="fangShopConfig",t.configMap=new Map,t.TYPE_ITEM=1,t.TYPE_EQUIP=2,t.TYPE_SKILLEFFECT=3,t.TYPE_EQUIPGIFT=4,t.TYPE_SKILLGIFT=5,t.TYPE_WEAPONUPGIFT=6,t.TYPE_QUNGONGGIFT=7,t.PRICE_GOLD=1,t.PRICE_YUANBAO=2,t.PRICE_RMB=101,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],FangShopView:[function(e,t,i){"use strict";cc._RF.push(t,"a13f7raLctKgb7jRhl74Lrp","FangShopView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/ColorConfig"),f=e("../config/FangShopConfig"),g=e("../config/GameConst"),h=e("../config/ITemsConfig"),u=e("../config/JingJieConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../event/CommonEvent"),_=e("../model/FangShiModel"),v=e("../model/ItemInfoModel"),y=e("../model/JingJieModel"),b=e("../model/RedDotModel"),I=e("../model/RoleInfoModel"),M=e("../prefab/ItemPrefab"),w=e("../sdk/LoongCheerManager"),k=e("../sdk/STUtils"),S=e("../utils/MusicHelper"),P=e("../utils/UIHelper"),E=e("./BuyShopView"),L=e("../model/NewFeaturesModel"),T=cc._decorator,R=T.ccclass,N=(T.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curTabIndex=-1,t.itemList=[],t.yuanbaoItemList=[],t.leiTaiBiItemList=[],t.tabConfigList=[],t.exchangeTokenItemList=[],t.exchangeNodeList=[],t.zhenbaoItemList=[],t.activityNodeList=[],t.activityTokenItemList=[],t.resourceNeedList=[],t}var i;return n(t,e),i=t,t.prototype.onEnable=function(){var e=this;this.itemNode=this.findChild(this.node,"ScrollView/view/content/itemNode"),this.itemNode.active=!1,this.yuanbaoItemNode=this.findChild(this.node,"yuanbaoScrollView/view/content/itemNode"),this.yuanbaoItemNode.active=!1,this.leiTaiBiItemNode=this.findChild(this.node,"leiTaiScrollView/view/content/itemNode"),this.leiTaiBiItemNode.active=!1,this.exchangeItem=this.findChild(this.node,"exchangeScrollView/view/content/itemNode"),this.exchangeItem.active=!1,this.activityItemNode=this.findChild(this.node,"activityScrollView/view/content/itemNode"),this.activityItemNode.active=!1,this.yuanbao=this.node.getChildByName("yuanbao"),this.gold=this.node.getChildByName("gold"),this.LeiTaiBi=this.node.getChildByName("leiTaiBi"),this.num1=this.yuanbao.getChildByName("num").getComponent(cc.Label),this.resource=this.node.getChildByName("resource"),this.resource.active=!1,this.needItemNode=this.findChild(this.node,"resource/needItemNode"),this.needItemNode.active=!1,this.goldNum=this.gold.getChildByName("goldNum").getComponent(cc.Label),this.LeiTainum=this.LeiTaiBi.getChildByName("LeiTainum").getComponent(cc.Label),this.Sprite1=this.node.getChildByName("Sprite1"),this.btnIntro=this.node.getChildByName("btnIntro"),this.Sprite1.active=!1,this.Sprite2=this.node.getChildByName("Sprite2"),this.Sprite2.active=!0,this.Sprite3=this.node.getChildByName("Sprite3"),this.Sprite3.active=!1,this.Sprite4=this.node.getChildByName("Sprite4"),this.Sprite4.active=!1,this.Sprite5=this.node.getChildByName("Sprite5"),this.Sprite5.active=!1,this.Sprite6=this.node.getChildByName("Sprite6"),this.Sprite6.active=!1,this.scorllView=this.node.getChildByName("ScrollView"),this.yuanbaoScrollView=this.node.getChildByName("yuanbaoScrollView"),this.zhenBaoScrollView=this.node.getChildByName("zhenBaoScrollView"),this.exchangeScrollView=this.node.getChildByName("exchangeScrollView"),this.activityScrollView=this.node.getChildByName("activityScrollView"),this.leiTaiScrollView=this.node.getChildByName("leiTaiScrollView"),s.EventManager.instance.on(C.CommonEvent.Event_FangShi_Change,function(t){t==i.TabIndex.Jinbi?e.refreshItemList():t==i.TabIndex.YuanBao?e.refreshYuanBaoList():t==i.TabIndex.LeiTaiBi&&e.refreshLeiTaiList(),e.onUpdateInfo()},this),s.EventManager.instance.on(C.CommonEvent.Event_UserInfoRefresh,this.onUpdateInfo,this),s.EventManager.instance.on(C.CommonEvent.Event_ZHENBAOFangShi_Change,this.refreshZhenBaoList,this),s.EventManager.instance.on(C.CommonEvent.Event_FangShi_Exchange_Change,function(){e.curTabIndex==i.TabIndex.Activity?e.refreshActivityList():e.curTabIndex==i.TabIndex.Exchange?e.refreshExchangeList():e.curTabIndex==i.TabIndex.YuanBao?e.refreshYuanBaoList():e.curTabIndex==i.TabIndex.ZhenBao?e.refreshZhenBaoList():e.curTabIndex==i.TabIndex.Jinbi?e.refreshItemList():e.curTabIndex==i.TabIndex.LeiTaiBi&&e.refreshLeiTaiList()},this),s.EventManager.instance.on(C.CommonEvent.Event_Show_Fangshi_Gift_RedDot,this.showFangshiZhenBaoRedDot,this),s.EventManager.instance.on(C.CommonEvent.Event_Hide_Fangshi_Gift_RedDot,this.hideFangshiZhenBaoRedDot,this),s.EventManager.instance.on(C.CommonEvent.Event_JumpToFangshi,this.gotoTab,this),this.tabNode0=this.node.getChildByName("button").getChildByName("tabNode0"),this.tabNode1=this.node.getChildByName("button").getChildByName("tabNode1"),this.tabNode2=this.node.getChildByName("button").getChildByName("tabNode2"),this.tabNode3=this.node.getChildByName("button").getChildByName("tabNode3"),this.tabNode4=this.node.getChildByName("button").getChildByName("tabNode4"),this.tabNode5=this.node.getChildByName("button").getChildByName("tabNode5"),this.buttonList=this.node.getChildByName("button"),this.onAddEvent(this.tabNode0,L.NewFeaturesModel.instance.pushFeaturesNode(1011,this.tabNode0,this.onClickChange1.bind(this))),this.onAddEvent(this.tabNode1,L.NewFeaturesModel.instance.pushFeaturesNode(1010,this.tabNode1,this.onClickChange0.bind(this))),this.onAddEvent(this.tabNode2,L.NewFeaturesModel.instance.pushFeaturesNode(1012,this.tabNode2,this.onClickZhenBao.bind(this))),this.onAddEvent(this.tabNode4,L.NewFeaturesModel.instance.pushFeaturesNode(1013,this.tabNode4,this.onClickDuihuan.bind(this))),this.onAddEvent(this.tabNode5,L.NewFeaturesModel.instance.pushFeaturesNode(1014,this.tabNode5,this.onClickLeiTai.bind(this))),this.onAddEvent(this.tabNode3,this.onClickActivity.bind(this)),this.btnIntro.on(cc.Node.EventType.TOUCH_END,this.onClickTip.bind(this)),this.checkmark0=this.tabNode0.getChildByName("checkmark0"),this.checkmark1=this.tabNode1.getChildByName("checkmark1"),this.checkmark2=this.tabNode2.getChildByName("checkmark"),this.checkmark3=this.tabNode3.getChildByName("checkmark"),this.checkmark4=this.tabNode4.getChildByName("checkmark"),this.checkmark5=this.tabNode5.getChildByName("checkmark1"),this.onClickChange0(),this.showFangshiZhenBaoRedDot()},t.prototype.onUpdateInfo=function(){this.goldNum.string=P.UIHelper.tranNumber(I.default.instance.getCoin())+"",this.num1.string=P.UIHelper.tranNumber(I.default.instance.getGold())+"",this.LeiTainum.string=P.UIHelper.tranNumber(I.default.instance.getLeiTaiBi())+""},t.prototype.gotoTab=function(e){r.Logger.log("gotoTab==",e),e==i.TabIndex.Jinbi?this.onClickChange0():e==i.TabIndex.YuanBao?this.onClickChange1():e==i.TabIndex.Activity?this.onClickActivity():e==i.TabIndex.Exchange?this.onClickDuihuan():e==i.TabIndex.ZhenBao?(k.default.stStatistics(w.StatisticsType.afEvent,"act_access_treasure"),k.default.stStatistics(w.StatisticsType.firebaseEvent,"act_access_treasure"),this.onClickZhenBao()):e==i.TabIndex.LeiTaiBi&&this.onClickLeiTai()},t.prototype.onClickChange0=function(e){void 0===e&&(e=!1),(e||this.curTabIndex!=i.TabIndex.Jinbi)&&(this.curTabIndex=i.TabIndex.Jinbi,this.onSelectTab(),this.refreshItemList(),this.onUpdateInfo())},t.prototype.onClickChange1=function(e){void 0===e&&(e=!1),(e||this.curTabIndex!=i.TabIndex.YuanBao)&&(this.curTabIndex=i.TabIndex.YuanBao,this.onSelectTab(),this.refreshYuanBaoList(),this.onUpdateInfo())},t.prototype.onClickZhenBao=function(e){void 0===e&&(e=!1),r.Logger.log("onClickZhenBao==",e,this.curTabIndex),(e||this.curTabIndex!=i.TabIndex.ZhenBao)&&(this.curTabIndex=i.TabIndex.ZhenBao,this.onSelectTab(),this.refreshZhenBaoList())},t.prototype.onClickLeiTai=function(e){void 0===e&&(e=!1),(e||this.curTabIndex!=i.TabIndex.LeiTaiBi)&&(this.curTabIndex=i.TabIndex.LeiTaiBi,this.onSelectTab(),this.refreshLeiTaiList(),this.onUpdateInfo())},t.prototype.onClickActivity=function(e){void 0===e&&(e=!1),r.Logger.log("onClickExchange==",e,this.curTabIndex),(e||this.curTabIndex!=i.TabIndex.Activity)&&(this.curTabIndex=i.TabIndex.Activity,this.onSelectTab(),this.refreshActivityList())},t.prototype.onClickDuihuan=function(e){void 0===e&&(e=!1),(e||this.curTabIndex!=i.TabIndex.Exchange)&&(this.curTabIndex=i.TabIndex.Exchange,this.onSelectTab(),this.onUpdateInfo(),this.refreshExchangeList())},t.prototype.refreshYuanBaoList=function(){var e=f.default.getConfigListByType(this.curTabIndex);e.sort(function(e,t){return e.shopId-t.shopId});for(var t=e.length;t<this.yuanbaoItemList.length;t++)this.yuanbaoItemList[t].active=!1;var i=[],n=[];this.tabConfigList=[];for(t=0;t<e.length;t++){var o=e[t],c=void 0;this.yuanbaoItemList[t]?c=this.yuanbaoItemList[t]:(c=cc.instantiate(this.yuanbaoItemNode),this.yuanbaoItemList[t]=c),this.tabConfigList[t]=o,c.active=!0;var l=c.getChildByName("disCount"),d=c.getChildByName("img_zhehoujia");d.active=!1;var p=l.getChildByName("disCountNum").getComponent(cc.Label);l.active=!1,o.discount<100&&(d.active=!0,l.active=!0,p.string=o.discount/10+"");var C,b=c.getChildByName("jinbiNode"),w=h.ITemsConfig.getITemsConfigById(o.item_id);C=v.default.create(g.GameConst.ITEM_KIND.ITEM,o.item_id,o.num,w.quality),c.getChildByName("ItemPrefab").getComponent(M.default).init(C,!0),b.getChildByName("txtCost").getComponent(cc.Label).string=o.unit_price+"";var k=b.getChildByName("yuanbao"),S=b.getChildByName("jinbi");2==this.curTabIndex?(S.active=!1,k.active=!0):1==this.curTabIndex&&(S.active=!0,k.active=!1);var P=c.getChildByName("xiangou").getChildByName("buynum").getComponent(cc.Label);P.string=o.restriction+"";var E=c.getChildByName("xiangou");E.active=!0;var L=c.getChildByName("over"),T=c.getChildByName("buy"),R=c.getChildByName("tiaojianNode"),N=R.getChildByName("xianshi"),B=R.getChildByName("xianshi1"),A=R.getChildByName("xianshi2");P.string=_.default.getNumById(o.shopId)+"";var G=parseInt(P.string);T.active=!0,L.active=!1,-1==G?(T.active=!0,E.active=!1):0==G&&(L.active=!0,T.active=!1,E.active=!1),s.EventManager.instance.removeBtnEvent(T),s.EventManager.instance.addBtnEvent(this.node,T,"FangShopView","onClickItem",t);var x=I.default.instance.create_time,O=a.default.getPassDay(x),V=u.JingJieConfig.getJingJieConfigById(o.jingjie),j=!1;if(V?y.JingJieModel.hadOpenJingJie(V.next)&&(j=!0):j=!0,O+1>=o.date&&j&&I.default.instance.level>=o.level)R.active=!1,i.push(c);else{if(T.active=!1,R.active=!0,N.active=!1,A.active=!1,B.active=!1,V&&(y.JingJieModel.hadOpenJingJie(V.next)||(A.active=!0)),I.default.instance.level<o.level&&(N.active=!0,N.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60424),o.level)),O+1<o.date){B.active=!0;var D=o.date-O-1;D<=0&&(D=0),B.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60425),D),r.Logger.log(" xianshi1.getComponent(cc.Label).string==",B.getComponent(cc.Label).string)}1==o.isshow?c.active=!1:n.push(c),c.active=!1}}for(t=0;t<i.length;t++)i[t].active=!0,i[t].parent=null,i[t].parent=this.yuanbaoItemNode.parent;for(t=0;t<n.length;t++)n[t].active=!0,n[t].parent=null,n[t].parent=this.yuanbaoItemNode.parent},t.prototype.initShow=function(){for(var e=f.default.getConfigListByType(this.curTabIndex),t=[],i=0;i<e.length;i++){var n=e[i],o=u.JingJieConfig.getJingJieConfigById(n.jingjie);o&&y.JingJieModel.hadOpenJingJie(o.next)?this.tabConfigList.push(n):(0==n.jingjie&&this.tabConfigList.push(n),0!=n.jingjie&&t.push(n))}t&&(this.tabConfigList=this.tabConfigList.concat(t))},t.prototype.refreshLeiTaiList=function(){var e=f.default.getConfigListByType(this.curTabIndex);r.Logger.log("refreshLeiTaiList====",e,this.curTabIndex),e.sort(function(e,t){return e.shopId-t.shopId});for(var t=e.length;t<this.leiTaiBiItemList.length;t++)this.leiTaiBiItemList[t].active=!1;var i=[];this.tabConfigList=[],this.initShow();for(t=0;t<this.tabConfigList.length;t++){var n=this.tabConfigList[t],o=void 0;this.leiTaiBiItemList[t]?o=this.leiTaiBiItemList[t]:(o=cc.instantiate(this.leiTaiBiItemNode),this.leiTaiBiItemList[t]=o,o.parent=this.leiTaiBiItemNode.parent),o.active=!0;var a,c=o.getChildByName("jinbiNode");r.Logger.log("refreshLeiTaiList=====",n.item_id,this.tabConfigList);var l=h.ITemsConfig.getITemsConfigById(n.item_id);a=v.default.create(g.GameConst.ITEM_KIND.ITEM,n.item_id,n.num,l.quality),o.getChildByName("ItemPrefab").getComponent(M.default).init(a,!0),c.getChildByName("txtCost").getComponent(cc.Label).string=n.unit_price+"";var d=o.getChildByName("over"),p=o.getChildByName("buy"),m=o.getChildByName("tiaojianNode"),C=m.getChildByName("xianshi2");p.active=!0,d.active=!1,s.EventManager.instance.removeBtnEvent(p),s.EventManager.instance.addBtnEvent(this.node,p,"FangShopView","onClickItem",t);var b=u.JingJieConfig.getJingJieConfigById(n.jingjie),w=!1,k=o.getChildByName("xiangou").getChildByName("buynum").getComponent(cc.Label);k.string=_.default.getNumById(n.shopId)+"";var S=parseInt(k.string);-1==S?(p.active=!0,d.active=!1):0==S&&(d.active=!0,p.active=!1),b?y.JingJieModel.hadOpenJingJie(b.next)&&(w=!0):w=!0,w&&I.default.instance.level>=n.level?m.active=!1:(p.active=!1,m.active=!0,C.active=!1,b&&(y.JingJieModel.hadOpenJingJie(b.next)||(C.active=!0)),1==n.isshow?o.active=!1:i.push(o))}},t.prototype.onSelectTab=function(){var e;this.yuanbao.active=!1,this.gold.active=!1,this.LeiTaiBi.active=!1,this.Sprite1.active=!1,this.Sprite2.active=!1,this.Sprite3.active=!1,this.Sprite4.active=!1,this.Sprite5.active=!1,this.Sprite6.active=!1,this.checkmark0.active=!1,this.checkmark1.active=!1,this.checkmark2.active=!1,this.checkmark3.active=!1,this.checkmark4.active=!1,this.checkmark5.active=!1,this.resource.active=!1,this.scorllView.active=!1,this.yuanbaoScrollView.active=!1,this.zhenBaoScrollView.active=!1,this.activityScrollView.active=!1,this.exchangeScrollView.active=!1,this.leiTaiScrollView.active=!1,this.buttonList.children.forEach(function(e){e.getChildByName("Background").active=!0}),this.curTabIndex==i.TabIndex.YuanBao?(e=this.checkmark0,this.Sprite1.active=!0,this.checkmark0.active=!0,this.yuanbao.active=!0,this.yuanbaoScrollView.active=!0):this.curTabIndex==i.TabIndex.Jinbi?(e=this.checkmark1,this.Sprite2.active=!0,this.checkmark1.active=!0,this.gold.active=!0,this.scorllView.active=!0):this.curTabIndex==i.TabIndex.ZhenBao?(e=this.checkmark2,this.Sprite3.active=!0,this.checkmark2.active=!0,this.zhenBaoScrollView.active=!0):this.curTabIndex==i.TabIndex.Activity?(e=this.checkmark3,this.Sprite4.active=!0,this.checkmark3.active=!0,this.resource.active=!0,this.activityScrollView.active=!0):this.curTabIndex==i.TabIndex.Exchange?(e=this.checkmark4,this.Sprite5.active=!0,this.checkmark4.active=!0,this.resource.active=!0,this.exchangeScrollView.active=!0):this.curTabIndex==i.TabIndex.LeiTaiBi&&(e=this.checkmark5,this.Sprite6.active=!0,this.checkmark5.active=!0,this.LeiTaiBi.active=!0,this.leiTaiScrollView.active=!0),e&&(e.parent.getChildByName("Background").active=!1)},t.prototype.refreshNeedResource=function(e){for(var t=e.m_show,i=0;i<this.resourceNeedList.length;i++)this.resourceNeedList[i].active=!1;if(t)for(i=0;i<t.length;i++){var n=t[i],o=h.ITemsConfig.getITemsConfigById(n),a=void 0;this.resourceNeedList[i]?a=this.resourceNeedList[i]:((a=cc.instantiate(this.needItemNode)).parent=this.needItemNode.parent,this.resourceNeedList.push(a)),a.active=!0;var s=v.default.getItemAmount(n);a.getChildByName("txtNum").getComponent(cc.Label).string=s+"";var r=a.getChildByName("itemName");r.color=d.ColorConfig.getEquipQualityColor(o.quality),r.getComponent(cc.Label).string=o.name+"\uff1a",r.getComponent(cc.Label).enableUnderline=!0,this.onAddEvent(r,this.onClickThis.bind(this,o))}},t.prototype.refreshActivityList=function(){for(var e=0;e<this.activityNodeList.length;e++)this.activityNodeList[e].active=!1;var t=f.default.getConfigListByType(4,1);t.sort(function(e,t){return e.shopId-t.shopId}),this.refreshNeedResource(t[0]);var i=[],n=[];for(e=0;e<this.activityTokenItemList.length;e++){var o=this.activityTokenItemList[e];if(o)for(var s=0;s<o.length;s++)o[s].active=!1}for(e=0;e<t.length;e++){var r=t[e],c=void 0;this.activityNodeList[e]?c=this.activityNodeList[e]:((c=cc.instantiate(this.activityItemNode)).parent=this.activityItemNode.parent,this.activityNodeList[e]=c),c.active=!0;var l,p=h.ITemsConfig.getITemsConfigById(r.item_id);l=v.default.create(g.GameConst.ITEM_KIND.ITEM,r.item_id,r.num,p.quality),c.getChildByName("ItemPrefab").getComponent(M.default).init(l,!0);var C=c.getChildByName("xiangou").getChildByName("buynum").getComponent(cc.Label);C.string=r.restriction+"";var b=c.getChildByName("tiaojianNode"),w=b.getChildByName("xianshi"),k=b.getChildByName("xianshi1"),S=b.getChildByName("xianshi2"),P=c.getChildByName("over"),E=c.getChildByName("buy"),L=c.getChildByName("xiangou");L.active=!0,C.string=_.default.getNumById(r.shopId)+"";var T=parseInt(C.string);E.active=!0,P.active=!1,-1==T?(E.active=!0,L.active=!1):0==T&&(P.active=!0,E.active=!1,L.active=!1);var R=c.getChildByName("needNode"),N=r.token;this.activityTokenItemList[e]||(this.activityTokenItemList[e]=[]);var B=[],A="";for(s=0;s<N.length;s++){var G=N[s];for(var x in B=[],G)B=[G[x],x];var O=h.ITemsConfig.getITemsConfigById(B[1]);A+=this.getFormachRichText(O.name+"x"+B[0],d.ColorConfig.getQualityHexColor(O.quality))+" "}R.getChildByName("needItem").getComponent(cc.RichText).string=A,this.onAddEvent(E,this.onClickExchangeView.bind(this,r));var V=I.default.instance.create_time,j=a.default.getPassDay(V),D=u.JingJieConfig.getJingJieConfigById(r.jingjie),F=!1;if(D?y.JingJieModel.hadOpenJingJie(D.next)&&(F=!0):F=!0,j+1>=r.date&&F&&I.default.instance.level>=r.level)b.active=!1,i.push(c);else{if(E.active=!1,b.active=!0,w.active=!1,S.active=!1,k.active=!1,D&&(y.JingJieModel.hadOpenJingJie(D.next)||(S.active=!0)),I.default.instance.level<r.level&&(w.active=!0,w.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60424),r.level)),j+1<r.date){k.active=!0;var H=r.date-j-1;H<=0&&(H=0),k.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60425),H)}1==r.isshow?c.active=!1:n.push(c),c.active=!1}}for(e=0;e<i.length;e++)i[e].active=!0,i[e].parent=null,i[e].parent=this.activityItemNode.parent;for(e=0;e<n.length;e++)n[e].active=!0,n[e].parent=null,n[e].parent=this.activityItemNode.parent},t.prototype.refreshExchangeList=function(){for(var e=0;e<this.exchangeNodeList.length;e++)this.exchangeNodeList[e].active=!1;var t=f.default.getConfigListByType(4);t.sort(function(e,t){return e.shopId-t.shopId}),this.refreshNeedResource(t[0]);var i=[],n=[];for(e=0;e<this.exchangeTokenItemList.length;e++){var o=this.exchangeTokenItemList[e];if(o)for(var s=0;s<o.length;s++)o[s].active=!1}for(e=0;e<t.length;e++){var r=t[e],c=void 0;this.exchangeNodeList[e]?c=this.exchangeNodeList[e]:(c=cc.instantiate(this.exchangeItem),this.exchangeNodeList[e]=c);var l,p=h.ITemsConfig.getITemsConfigById(r.item_id);l=v.default.create(g.GameConst.ITEM_KIND.ITEM,r.item_id,r.num,p.quality),c.getChildByName("ItemPrefab").getComponent(M.default).init(l,!0);var C=c.getChildByName("xiangou").getChildByName("buynum").getComponent(cc.Label);C.string=r.restriction+"";var b=c.getChildByName("tiaojianNode"),w=b.getChildByName("xianshi"),k=b.getChildByName("xianshi1"),S=b.getChildByName("xianshi2"),P=c.getChildByName("over"),E=c.getChildByName("buy"),L=c.getChildByName("xiangou");L.active=!0,C.string=_.default.getNumById(r.shopId)+"";var T=parseInt(C.string);E.active=!0,P.active=!1,-1==T?(E.active=!0,L.active=!1):0==T&&(P.active=!0,E.active=!1,L.active=!1);var R=c.getChildByName("needNode"),N=r.token;this.exchangeTokenItemList[e]||(this.exchangeTokenItemList[e]=[]);var B=[],A="";for(s=0;s<N.length;s++){var G=N[s];for(var x in B=[],G)B=[G[x],x];var O=h.ITemsConfig.getITemsConfigById(B[1]);A+=this.getFormachRichText(O.name+"x"+B[0],d.ColorConfig.getQualityHexColor(O.quality))+" "}R.getChildByName("needItem").getComponent(cc.RichText).string=A,this.onAddEvent(E,this.onClickExchangeView.bind(this,r));var V=I.default.instance.create_time,j=a.default.getPassDay(V),D=u.JingJieConfig.getJingJieConfigById(r.jingjie),F=!1;if(D?y.JingJieModel.hadOpenJingJie(D.next)&&(F=!0):F=!0,j+1>=r.date&&F&&I.default.instance.level>=r.level)b.active=!1,i.push(c);else{if(E.active=!1,b.active=!0,w.active=!1,S.active=!1,k.active=!1,D&&(y.JingJieModel.hadOpenJingJie(D.next)||(S.active=!0)),I.default.instance.level<r.level&&(w.active=!0,w.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60424),r.level)),j+1<r.date){k.active=!0;var H=r.date-j-1;H<=0&&(H=0),k.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60425),H)}1==r.isshow?c.active=!1:n.push(c),c.active=!1}}for(e=0;e<i.length;e++)i[e].active=!0,i[e].parent=null,i[e].parent=this.exchangeItem.parent;for(e=0;e<n.length;e++)n[e].active=!0,n[e].parent=null,n[e].parent=this.exchangeItem.parent},t.prototype.refreshItemList=function(){var e=f.default.getConfigListByType(this.curTabIndex);e.sort(function(e,t){return e.shopId-t.shopId});var t=[],i=[];this.tabConfigList=[];for(var n=e.length;n<this.itemList.length;n++)this.itemList[n].active=!1;for(n=0;n<e.length;n++){var o=e[n],r=void 0;this.itemList[n]?r=this.itemList[n]:(r=cc.instantiate(this.itemNode),this.itemList[n]=r),this.tabConfigList[n]=o,r.active=!0;var c=r.getChildByName("disCount"),l=r.getChildByName("img_zhehoujia"),d=c.getChildByName("disCountNum").getComponent(cc.Label);c.active=!1,l.active=!1,o.discount<100&&(c.active=!0,l.active=!0,d.string=o.discount/10+"");var p,C=r.getChildByName("jinbiNode"),b=h.ITemsConfig.getITemsConfigById(o.item_id),w=void 0==b?void 0:b.quality;p=v.default.create(g.GameConst.ITEM_KIND.ITEM,o.item_id,o.num,w),r.getChildByName("ItemPrefab").getComponent(M.default).init(p,!0),C.getChildByName("txtCost").getComponent(cc.Label).string=o.unit_price+"";var k=C.getChildByName("yuanbao"),S=C.getChildByName("jinbi");2==this.curTabIndex?(S.active=!1,k.active=!0):1==this.curTabIndex&&(S.active=!0,k.active=!1);var P=r.getChildByName("xiangou").getChildByName("buynum").getComponent(cc.Label);P.string=o.restriction+"";var E=r.getChildByName("xiangou");E.active=!0;var L=r.getChildByName("over"),T=r.getChildByName("buy"),R=r.getChildByName("tiaojianNode"),N=R.getChildByName("xianshi"),B=R.getChildByName("xianshi1"),A=R.getChildByName("xianshi2");P.string=_.default.getNumById(o.shopId)+"";var G=parseInt(P.string);T.active=!0,L.active=!1,-1==G?(T.active=!0,E.active=!1):0==G&&(L.active=!0,T.active=!1,E.active=!1),s.EventManager.instance.removeBtnEvent(T),s.EventManager.instance.addBtnEvent(this.node,T,"FangShopView","onClickItem",n);var x=I.default.instance.create_time,O=a.default.getPassDay(x),V=u.JingJieConfig.getJingJieConfigById(o.jingjie),j=!1;if(V?y.JingJieModel.hadOpenJingJie(V.next)&&(j=!0):j=!0,O+1>=o.date&&j&&I.default.instance.level>=o.level)R.active=!1,t.push(r);else{if(T.active=!1,R.active=!0,N.active=!1,A.active=!1,B.active=!1,V&&(y.JingJieModel.hadOpenJingJie(V.next)||(A.active=!0)),I.default.instance.level<o.level&&(N.active=!0,N.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60424),o.level)),O+1<o.date){B.active=!0;var D=o.date-O-1;D<=0&&(D=0),B.getComponent(cc.Label).string=cc.js.formatStr(m.WordConfig.getWord(60425),D)}1==o.isshow?r.active=!1:i.push(r),r.active=!1}}for(n=0;n<t.length;n++)t[n].active=!0,t[n].parent=null,t[n].parent=this.itemNode.parent;for(n=0;n<i.length;n++)i[n].active=!0,i[n].parent=null,i[n].parent=this.itemNode.parent},t.prototype.refreshZhenBaoList=function(){for(var e=0;e<this.zhenbaoItemList.length;e++)this.zhenbaoItemList[e]&&(this.zhenbaoItemList[e].active=!1);var t=f.default.getConfigListByType(this.curTabIndex);t.sort(function(e,t){return e.shopId-t.shopId}),r.Logger.log("refreshZhenBaoList===",t);for(e=0;e<t.length;e++)if(0==t[e].zhiye||t[e].zhiye==I.default.instance.occupation){if(1==t[e].isshow){if(I.default.instance.level<t[e].level)continue;var i=I.default.instance.create_time;if(a.default.getPassDay(i)+1<t[e].date)continue}var n=void 0;this.zhenbaoItemList[e]?n=this.zhenbaoItemList[e]:(n=cc.instantiate(this.findChild(this.node,"skillEffectItem")),this.zhenbaoItemList[e]=n,this.zhenBaoScrollView.getComponent(cc.ScrollView).content.addChild(n)),n.active=!0,n.getComponent("skillEffectItem").init(t[e].shopId)}},t.prototype.onClickExchangeView=function(e){for(var t,i=_.default.getNumById(e.shopId),n="",o=0,a=0;a<e.token.length;a++)for(var s in e.token[a])e.token[a][s]>o&&(o=e.token[a][s],n=s);t=Math.floor(v.default.getItemAmount(n)/o),i<0?i=t:i<t||(i=t),c.default.instance.createView(p.default.gameView.ExchangeShopView,null,e,1,i)},t.prototype.onClickItem=function(e,t){S.MusicHelper.play_click(),this.onCLickBuy(this.tabConfigList[t])},t.prototype.onCLickBuy=function(e){var t,i=_.default.getModel(e.shopId+"").prodRepo;i<=0&&(i=999),1==e.price_type?t=0:2==e.price_type?t=1:8==e.price_type&&(t=8),c.default.instance.createView(p.default.gameView.BuyShopView,null,E.default.BuyType.FangShi,1,e.item_id,e.unit_price,e.unit_price,t,i,function(e,t){}.bind(this),null,e.shopId,1,e.num)},t.prototype.onClickTip=function(){S.MusicHelper.play_click(),c.default.instance.createView(p.default.gameView.Explain)},t.prototype.showFangshiZhenBaoRedDot=function(){_.default.getNumById(4001)>0&&b.default.getModelByKey(b.default.fangshiFangyuDot).isShow&&(this.findChild(this.tabNode2,"ui_hongdian").active=!0),_.default.getNumById(5001)>0&&b.default.getModelByKey(b.default.fangshiJinengDot).isShow&&(this.findChild(this.tabNode2,"ui_hongdian").active=!0),(_.default.getNumById(5002)>0||_.default.getNumById(5003)>0||_.default.getNumById(5004)>0)&&b.default.getModelByKey(b.default.fangshiqungongDot).isShow&&(this.findChild(this.tabNode2,"ui_hongdian").active=!0)},t.prototype.hideFangshiZhenBaoRedDot=function(){this.findChild(this.tabNode2,"ui_hongdian").active=!1},t.prototype.getFormachRichText=function(e,t){return"<color="+t+">"+e+"</color>"},t.prototype.onClickThis=function(e){if(e){var t=v.default.getItem(e.id);t=t||v.default.create(e.kind,e.id,0,e.quality),v.default.getItemAmountById(t.itemId)>0&&("expball"==e.position||"expball_full"==e.position)?c.default.instance.createView(p.default.gameView.ExpBallView,null,t):c.default.instance.createView(p.default.gameView.ItemInfo,null,t,0,!1)}},t.TabIndex={Jinbi:1,YuanBao:2,ZhenBao:3,Activity:4,LeiTaiBi:5,Exchange:6},t.FangshiList=[],t=i=o([R],t)}(l.default));i.default=N,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/FangShopConfig":"FangShopConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/JingJieConfig":"JingJieConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/FangShiModel":"FangShiModel","../model/ItemInfoModel":"ItemInfoModel","../model/JingJieModel":"JingJieModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/RedDotModel":"RedDotModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/ItemPrefab":"ItemPrefab","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/STUtils":"STUtils","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","./BuyShopView":"BuyShopView"}],FanshiGiftView:[function(e,t,i){"use strict";cc._RF.push(t,"3ec717bQJdI07IkJc3JKfJX","FanshiGiftView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/SpriteFrameComponent"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/ChongZhiConfig"),d=e("../config/EquipConfig"),f=e("../config/FangShopConfig"),g=e("../config/GameConst"),h=e("../config/ITemsConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../event/CommonEvent"),C=e("../model/FangShiModel"),_=e("../model/ItemInfoModel"),v=e("../model/RoleInfoModel"),y=e("../network/SocketClient"),b=e("../prefab/ItemPrefab"),I=cc._decorator,M=I.ccclass,w=(I.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.shopId=e,this.content=this.findChild(this.node,"bg/content"),this.hadBuy=this.findChild(this.node,"bg/hadBuy"),this.hadBuy.active=!1,this.btnBuy=this.findChild(this.node,"bg/btnBuy"),this.btnClose=this.findChild(this.node,"bg/top/btnClose"),this.itemPrefab=this.findChild(this.node,"bg/content/ItemPrefab0"),this.onAddEvent(this.btnBuy,this.onClickBuy.bind(this)),this.onAddEvent(this.btnClose,this.closeView.bind(this))},t.prototype.onShow=function(){r.default.instance.setTopUI(u.default.gameView.FanshiGiftView),a.EventManager.instance.on(m.CommonEvent.Event_ChargeActivityOk,this.refreshByServer,this),this.content.removeAllChildren(),this.chongzhiConfig=l.ChongZhiConfig.getConfigById(f.default.getConfigById(this.shopId).charge);var e=this.findChild(this.node,"bg/top/title");e.getComponent(cc.Sprite).spriteFrame=e.getComponent(s.SpriteFrameComponent).spriteFrameList[this.chongzhiConfig.t_icon-1];var t=this.findChild(this.node,"bg/top/des");t.getComponent(cc.Sprite).spriteFrame=t.getComponent(s.SpriteFrameComponent).spriteFrameList[this.chongzhiConfig.ad-1];var i=[];for(var n in this.chongzhiConfig.item)i.push(n);for(n=0;n<i.length;n++){(v=cc.instantiate(this.itemPrefab)).active=!0;var o,c=i[n],d=h.ITemsConfig.getITemsConfigById(c);o=_.default.create(g.GameConst.ITEM_KIND.ITEM,c,this.chongzhiConfig.item[c],d.quality),v.getChildByName("tab").active=!1,v.getComponent(b.default).init(o,!0),this.content.addChild(v)}var p=[];for(var n in this.chongzhiConfig.resource)p.push(n);for(var C=0;C<p.length;C++){var v;(v=cc.instantiate(this.itemPrefab)).active=!0,v.getComponent(b.default).initResource(Number(p[C]),this.chongzhiConfig.resource[p[C]]),v.getChildByName("tab").active=!1,this.content.addChild(v)}this.btnBuy.getChildByName("txtCost").getComponent(cc.Label).string=this.chongzhiConfig.getMoneyStr()+"",this.findChild(this.node,"bg/btnBuy/txtCost").getComponent(cc.Label).string=this.chongzhiConfig.getMoneyStr()+"",this.refreshByServer()},t.prototype.onClickBuy=function(){var e=new Array;for(var t in this.chongzhiConfig.item){var i=d.EquipConfig.getEquipConfigById(t);if(i){var n=_.AddItemParamStruct.create(v.default.instance,i.kind,i.id,1);e.push(n)}else{var o=h.ITemsConfig.getITemsConfigById(t);e.push(_.AddItemParamStruct.create(v.default.instance,o.kind,o.id,this.chongzhiConfig.item[t],o.quality))}}v.default.instance.tryAddItemsToBag(e)?y.default.s_seq_fangbuy(this.shopId,1):p.WordConfig.showWord(60001)},t.prototype.refreshByServer=function(){C.default.getNumById(this.shopId)>0?(this.hadBuy.active=!1,this.btnBuy.active=!0):(this.hadBuy.active=!0,this.btnBuy.active=!1)},t=o([M],t)}(c.default));i.default=w,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/EquipConfig":"EquipConfig","../config/FangShopConfig":"FangShopConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/FangShiModel":"FangShiModel","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],FastKillModel:[function(e,t,i){"use strict";cc._RF.push(t,"7be66kOssJAVoBawqZzaFem","FastKillModel");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../manager/RedPointManager"),c=cc._decorator,l=c.ccclass,d=(c.property,function(){function e(){}return e.getModel=function(t){var i=new e;return i.id=t.getId(),i.num=t.getNum(),i},e}());i.FastStatus=d;var f=function(){function e(){this.statusMap=new Map}return e.getModel=function(t){var i=new e;i.id=t.getId(),i.progress=t.getProgress(),i.state=t.getState(),i.statusMap=new Map;for(var n=t.getBosslistList(),o=0;o<n.length;o++){var a=d.getModel(n[o]);i.statusMap.set(a.id,a.num)}return i},e}();i.FastTask=f;var g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[r.RedPointId.fastKill],this.protos=[a.ProtoConfig.c_get_topspeed_kill_info],r.default.getInstance().addHandler(this)}var t;return t=e,e.proto2Model=function(e){new t;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_topspeed_kill_info,e);o.Logger.log("c_get_topspeed_kill_info=====",i),t.ret=i.getRet(),t.startTime=i.getStarttime(),t.endTime=i.getEndtime();var n=i.getTaskList();this.modelList=[];for(var r=0;r<n.length;r++){var c=f.getModel(n[r]);this.modelList.push(c)}o.Logger.log("proto2Model==2=2=3",n,this.modelList)},e.getModelById=function(e){for(var t,i=0;i<this.modelList.length;i++)if(this.modelList[i].id==e){t=this.modelList[i];break}return t},e.prototype.checkRedPoint=function(){var e;t.modelList.every(function(t){return 1!=t.state||(e=!0,!1)});var i={id:r.RedPointId.fastKill,type:r.RedPointType.Default,show:e};return o.Logger.log("123456",i,e),i},e.modelList=[],e=t=n([l],e)}();i.default=g,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../manager/RedPointManager":"RedPointManager"}],FastKillView:[function(e,t,i){"use strict";cc._RF.push(t,"f9733R77qJN/oP3BGHvg2zC","FastKillView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/SpriteFrameComponent"),l=e("../../engine/ViewBase"),d=e("../config/GameConst"),f=e("../config/ITemsConfig"),g=e("../config/MonsterHunterConfig"),h=e("../config/WordConfig"),u=e("../event/CommonEvent"),p=e("../manager/RedPointManager"),m=e("../model/FastKillModel"),C=e("../model/ItemInfoModel"),_=e("../network/SocketClient"),v=e("../prefab/ItemPrefab"),y=e("../prefab/MonsterIcon"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrameList=[],t.giftItemList=[],t.monsterItemList=[],t.itemList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.selectNode=this.findChild(this.node,"itemNode/scrollView/view/content/selectNode"),this.selectNode.active=!1,this.awardList=this.findChild(this.node,"itemNode/scrollView/view/content"),this.txtTime=this.node.getChildByName("txtTime").getComponent(cc.Label)},t.prototype.onEnable=function(){s.EventManager.instance.on(u.CommonEvent.Event_FastKill_Refresh,this.refresh,this),_.default.s_get_topspeed_kill_info(),this.refresh(),p.default.getInstance().checkRedPointById(p.RedPointId.fastKill)},t.prototype.refresh=function(){var e=a.default.formateNumYearMonthDayStr(1e3*m.default.startTime),t=a.default.formateNumYearMonthDayStr(1e3*m.default.endTime);this.txtTime.string=cc.js.formatStr("%s-%s",e,t);for(var i=0;i<this.giftItemList.length;i++)if(this.giftItemList[i])for(var n=0;n<this.giftItemList[i].length;n++)this.giftItemList[i][n].active=!1;for(i=0;i<this.monsterItemList.length;i++)if(this.monsterItemList[i])for(n=0;n<this.monsterItemList[i].length;n++)this.monsterItemList[i][n].active=!1;var o=g.default.getAllList(),s=function(e){var t=g.default.getConfigById(e+1),i=m.default.getModelById(t.id),n=void 0;l.itemList[e]?n=l.itemList[e]:((n=cc.instantiate(l.selectNode)).parent=l.selectNode.parent,l.itemList[e]=n),l.giftItemList[e]||(l.giftItemList[e]=[]),l.monsterItemList[e]||(l.monsterItemList[e]=[]),n.active=!0,n.getChildByName("title").getChildByName("titleContent").getComponent(cc.Sprite).spriteFrame=l.spriteFrameList[e];var o=n.getChildByName("reward").getChildByName("rewardNode"),a=n.getChildByName("target").getChildByName("targetNode"),s=o.getChildByName("ItemPrefab"),u=a.getChildByName("monsterIcon");s.active=!1,u.active=!1;var p=void 0,b=0;for(var I in t.item){l.giftItemList[e][b]?p=l.giftItemList[e][b]:((p=cc.instantiate(s)).parent=s.parent,l.giftItemList[e][b]=p),b++,p.active=!0;var M=f.ITemsConfig.getITemsConfigById(I),w=C.default.create(d.GameConst.ITEM_KIND.ITEM,M.id,t.item[I],M.quality);p.getComponent(v.default).init(w,!0)}for(var I in t.ress)l.giftItemList[e][b]?p=l.giftItemList[e][b]:((p=cc.instantiate(s)).parent=s.parent,l.giftItemList[e][b]=p),b++,p.active=!0,p.getComponent(v.default).initResource(parseInt(I),t.ress[I]);for(var k=void 0,S=t.boss,P=0;P<S.length;P++){if(l.monsterItemList[e][P]?k=l.monsterItemList[e][P]:((k=cc.instantiate(u)).parent=u.parent,l.monsterItemList[e][P]=k),k.active=!0,r.Logger.log("refresh===222=",i,S[P]),i)i.statusMap.get(S[P])>0?k.getComponent(y.default).init(t,S[P],P,!0):k.getComponent(y.default).init(t,S[P],P,!1);else k.getComponent(y.default).init(t,S[P],P,!1);var E=n.getChildByName("btn_lingqu_01"),L=n.getChildByName("jindu").getComponent(cc.RichText);if(i){i.progress<t.boss.length?L.string=cc.js.formatStr(h.WordConfig.getWord(60776),i.progress,t.boss.length):L.string=h.WordConfig.getWord(60788)+i.progress+"/"+t.boss.length;var T=i.state;E.getComponent(cc.Sprite).spriteFrame=E.getComponent(c.SpriteFrameComponent).spriteFrameList[T],1==i.state&&l.onAddEvent(E,function(){r.Logger.log("asdffgg",e),_.default.s_get_topspeed_kill_reward(e+1)})}else E.getComponent(cc.Sprite).spriteFrame=E.getComponent(c.SpriteFrameComponent).spriteFrameList[0],L.string=cc.js.formatStr(h.WordConfig.getWord(60776),0,t.boss.length)}},l=this;for(i=0;i<o.length;i++)s(i)},o([M({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),t=o([I],t)}(l.default);i.default=w,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MonsterHunterConfig":"MonsterHunterConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../model/FastKillModel":"FastKillModel","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../prefab/MonsterIcon":"MonsterIcon"}],FeiYouSdkManager:[function(e,t,i){"use strict";cc._RF.push(t,"30eac/9dbJDlIIpUDmCOS7k","FeiYouSdkManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../config/GameConfig"),s=e("../config/WordConfig"),r=e("../event/CommonEvent"),c=e("../model/RoleInfoModel"),l=e("../model/ZoneModel"),d=e("../network/SocketClient"),f=e("./SdkHelper"),g=function(){function e(){}return e.init=function(){window.FeiYouSdkManager=e},e.sdkInit=function(){cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"init","()V"):f.default.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"init:",""):this.sdkLogin():this.sdkLogin()},e.sdkInit_callback=function(t,i){o.Logger.log("sdkInit_callback=====",t,i),0==t?(n.EventManager.instance.dispatch(r.CommonEvent.Event_SdkGetInfo),this.sdkLogin()):(s.WordConfig.showWord(60295),setTimeout(function(){e.sdkInit()},1500))},e.sdkLogin=function(){cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"login","(Z)V",this.isFirstLogin):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"login:",""):n.EventManager.instance.dispatch(r.CommonEvent.Event_SdkInit):n.EventManager.instance.dispatch(r.CommonEvent.Event_SdkInit)},e.sdkLogin_callback=function(t,i){if(o.Logger.log("sdkLogin_callback=====",t,i),0==t){try{this.isFirstLogin=!0;var n=JSON.parse(i);e.user_id=n.user_id,e.cp_sign=n.cp_sign,e.timestamp=n.timestamp+""}catch(e){o.Logger.error("sdkLogin_callback error",e)}d.default.s_feiyou_login()}},e.sdkLogout=function(){cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"logout","()V"):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"logout:",""):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os))},e.sdkLogout_callback=function(e,t){o.Logger.log("sdkLogout_callback=====",e,t),this.isFirstLogin=!1},e.role2String=function(e){var t=this.user_id,i=l.ZoneModel.nowZoneInfoModel.server_id+"",n=l.ZoneModel.nowZoneInfoModel.server_name+"",o=e.roleId,a=e.roleName,s=e.level+"",r={};return r.userId=t+"",r.serverCode=i+"",r.serverName=n+"",r.roleId=o+"",r.roleName=a+"",r.roleLevel=s+"",r.vipLevel="none",r.balance="none",JSON.stringify(r)},e.roleCreate=function(e){a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"roleCreate","(Ljava/lang/String;)V",this.role2String(e)):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"roleCreate:",this.role2String(e)):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os))},e.roleLauncher=function(e){a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"roleLauncher","(Ljava/lang/String;)V",this.role2String(e)):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"roleLauncher:",this.role2String(e)):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os))},e.roleUpgrade=function(e){a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"roleUpgrade","(Ljava/lang/String;)V",this.role2String(e)):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"roleUpgrade:",this.role2String(e)):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os))},e.openGmCenter=function(){a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"openGmCenter","()V"):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"openGmCenter:",""):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os))},e.openGmCenter_callback=function(e,t){o.Logger.log("openGmCenter_callback=====",e,t)},e.isGmCenterEnable=function(){var e=!1;return a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?e=jsb.reflection.callStaticMethod(this.androidNativeClassName,"isGmCenterEnable","()Z"):sdkHelper.isIos()?e=jsb.reflection.callStaticMethod(this.iosNativeClassName,"isGmCenterEnable:",""):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os)),o.Logger.log("isGmCenterEnable====",e),e},e.hasBindPlatformAccount=function(){var e=!1;return a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?e=jsb.reflection.callStaticMethod(this.androidNativeClassName,"hasBindPlatformAccount","()Z"):sdkHelper.isIos()?e=!(e=jsb.reflection.callStaticMethod(this.iosNativeClassName,"hasBindPlatformAccount:","")):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os)),o.Logger.log("hasBindPlatformAccount====",e),e},e.bindPlatformAccount=function(){a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"bindPlatformAccount","()V"):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"bindPlatformAccount:",""):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os))},e.bindPlatformAccount_callback=function(e,t){o.Logger.log("bindPlatformAccount_callback=====",e,t),n.EventManager.instance.dispatch(r.CommonEvent.Event_FeiYou_BindSuc)},e.charge=function(t,i,n,r,d,f,g){void 0===g&&(g="");var h=e.user_id,u=l.ZoneModel.nowZoneInfoModel.server_id+"",p=l.ZoneModel.nowZoneInfoModel.server_name+"",m=c.default.instance.roleId,C=c.default.instance.roleName,_=c.default.instance.level+"";if(n<=0)s.WordConfig.showWord(60296);else{var v={};v.userId=h,v.serverCode=u,v.serverName=p,v.roleId=m,v.roleName=C,v.roleLevel=_,v.cpOrderId=t,v.cpNotifyUrl=i,v.price=(n/100).toFixed(2),v.productId=r,v.productName=d,v.productDesc=f,v.cpCallbackInfo=g,a.GameConfig.sdkType==a.SdkType.Feiyou&&cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.androidNativeClassName,"charge","(Ljava/lang/String;)V",JSON.stringify(v)):sdkHelper.isIos()?jsb.reflection.callStaticMethod(this.iosNativeClassName,"charge:",JSON.stringify(v)):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os))}},e.charge_callback=function(e,t){o.Logger.log("charge_callback=====",e,t)},e.openExitView_callback=function(e,t){0==e&&cc.game.end()},e.androidNativeClassName="sdk/FeiYouSdkManager",e.iosNativeClassName="FeiYouSdkManager",e.user_id="",e.cp_sign="",e.timestamp="",e.isFirstLogin=!0,e}();i.FeiYouSdkManager=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../config/GameConfig":"GameConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","../network/SocketClient":"SocketClient","./SdkHelper":"SdkHelper"}],FightChangeView:[function(e,t,i){"use strict";cc._RF.push(t,"62e13xJnvFO0LP6IYx//YrP","FightChangeView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/ColorConfig"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameCount=0,t.speed=2,t}return n(t,e),t.prototype.onInitChild=function(e,t){this.preFight=e,this.showFight=e,this.nowFight=t},t.prototype.onShow=function(){var e=this;r.default.instance.setTopUI(c.default.gameView.FightChangeView),this.node.y=300,this.txtFight=this.getChild(this.node,"container/txtFight",cc.Label),this.icon_down=this.getChild(this.node,"container/icon_down"),this.icon_up=this.getChild(this.node,"container/icon_up"),this.txtChange=this.getChild(this.node,"container/txtChange",cc.Label),this.txtChange.string=Math.abs(this.nowFight-this.preFight)+"",this.icon_up.active=!1,this.icon_down.active=!1;var t=Math.abs(this.nowFight-this.preFight);this.nowFight>=this.preFight?(this.icon_up.active=!0,this.txtChange.node.color=s.ColorConfig.GreenColor):(this.icon_down.active=!0,this.txtChange.node.color=s.ColorConfig.RedColor),this.speed=Math.ceil(t/(2*cc.game.getFrameRate())),this.refreshFight(),this.scheduleOnce(function(){e.closeView()},2)},t.prototype.refreshFight=function(){this.txtFight.string=this.showFight+""},t.prototype.update=function(){this.isStop||(this.nowFight>=this.preFight?(this.showFight+=this.speed,this.showFight>=this.nowFight&&(this.showFight=this.nowFight,this.isStop=!0),this.refreshFight()):(this.showFight-=this.speed,this.showFight<=this.nowFight&&(this.showFight=this.nowFight,this.isStop=!0),this.refreshFight()))},t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/ViewConfig":"ViewConfig"}],FightFrameRes:[function(e,t,i){"use strict";cc._RF.push(t,"ec7f3v3+VRIBJ78pkq7bARw","FightFrameRes"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/ResourcesManager");(function(e){var t=["xinxi_boss","xinxi_guaiwu_00","xinxi_guaiwu_01","xinxi_guaiwu_02","xinxi_guaiwu_03","xinxi_jues_daoshi","xinxi_jues_fashi","xinxi_jues_zhanshi","xinxi_jues_kulou","xinxi_jues_shenshou","img_juesekaung_01_daoshi","img_juesekaung_01_fashi","img_juesekaung_01_zhanshi","img_juesekaung_02_daoshi","img_juesekaung_02_fashi","img_juesekaung_02_zhanshi","img_juesekaung_03_daoshi","img_juesekaung_03_fashi","img_juesekaung_03_zhanshi"];e.fight_frame=[],e.init=function(){if(!e.fight_frame.length)for(var i=n.default.instance.getAtlas("fightframe"),o=0,a=t;o<a.length;o++){var s=a[o];e.fight_frame.push(i.getSpriteFrame(s))}}})(i.FightFrameRes||(i.FightFrameRes={})),cc._RF.pop()},{"../../engine/ResourcesManager":"ResourcesManager"}],FightModel:[function(e,t,i){"use strict";cc._RF.push(t,"14a6fjofbJBwYAtzDOG9Mrg","FightModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/UIManager"),o=e("../config/ViewConfig"),a=e("../../engine/EventManager"),s=e("../event/CommonEvent"),r=e("./RoleInfoModel"),c=function(){function e(){this.type=0,this.value=0}return e.proto2ModelList=function(t){var i=t.getFightinfo();this.totalFight=i.getTotalfight(),this.maxFight=i.getMaxFight(),r.default.instance.totalFight=this.totalFight,r.default.instance.maxFight=this.maxFight,this.preFight!=this.totalFight&&0!=this.preFight?(n.default.instance.createView(o.default.gameView.FightChangeView,null,this.preFight,this.totalFight),this.preFight=this.totalFight):this.preFight=this.totalFight;var c=i.getFightlistList();this.modelList=[];for(var l=0;l<c.length;l++){var d=new e;d.type=c[l].getType(),d.value=c[l].getValue(),this.modelList[l]=d}a.EventManager.instance.dispatch(s.CommonEvent.Event_UserInfoRefresh)},e.getFanRenZhiLi=function(){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.type==e.FightType.FanRen)return i.value}return 0},e.getLunHuiZhiLi=function(){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.type==e.FightType.LunHui)return i.value}return 0},e.FightType={Normal:1,FanRen:2,LunHui:3},e.maxFight=0,e.totalFight=0,e.preFight=0,e.modelList=[],e}();i.default=c,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","./RoleInfoModel":"RoleInfoModel"}],FightRankItemModel:[function(e,t,i){"use strict";cc._RF.push(t,"dfc36AXHTZIt6JjFzPFDXQ9","FightRankItemModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/CostumeModel"),o=function(){function e(){}return e.getModel=function(t){var i=new e;return i.heroId=t.getHeroid(),i.heroName=t.getHeroname(),i.fight=t.getFight(),i.personalize=n.CostumeModel.proto2Personalize(t.getPersonalize()),i},e}();i.default=o,cc._RF.pop()},{"../../model/CostumeModel":"CostumeModel"}],FightRankModel:[function(e,t,i){"use strict";cc._RF.push(t,"0eceaGbvg5LWImJC2YHGTj1","FightRankModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./FightRankItemModel"),o=e("../../../engine/EventManager"),a=e("../../event/CommonEvent"),s=e("../../model/ServerTime"),r=function(){function e(){this.rankList=[],this.refreshTime=0}return e.proto2ModelList=function(t){var i=new e;i.prof=t.getProf();for(var r=t.getRankInfoList(),c=[],l=0;l<r.length;l++){var d=n.default.getModel(r[l]);c.push(d)}i.rankList=c,i.refreshTime=s.ServerTime.getServerTime()/1e3;var f=-1;for(l=0;l<this.modelList.length;l++)this.modelList[l].prof==i.prof&&(f=l);f>=0?this.modelList[f]=i:this.modelList.push(i),o.EventManager.instance.dispatch(a.CommonEvent.Event_Refresh_PowerRank)},e.getMaxFightRankModel=function(){for(var e=new n.default,t=[],i=0;i<this.modelList.length;i++)this.modelList[i].rankList.length>0&&t.push(this.modelList[i].rankList[0]);e=t[0];for(i=0;i<t.length;i++)t[i].fight>e.fight&&(e=t[i]);return e},e.modelList=[],e}();i.default=r,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../event/CommonEvent":"CommonEvent","../../model/ServerTime":"ServerTime","./FightRankItemModel":"FightRankItemModel"}],FightRoleInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"f4681xzOltJgpxDycwu7RJW","FightRoleInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.rolePrefab=e},t.prototype.onShow=function(){s.EventManager.instance.on(r.CommonEvent.Event_RolePrefabfresh,this.refresh,this),this.txtName=this.getChild(this.node,"view/info/txtName",cc.Label),this.txtFightAttack=this.getChild(this.node,"view/info/txtFightAttack",cc.Label),this.txtDef=this.getChild(this.node,"view/info/txtDef",cc.Label),this.txtHp=this.getChild(this.node,"view/info/txtHp",cc.Label),this.txtMp=this.getChild(this.node,"view/info/txtMp",cc.Label),this.txtAttackSpeed=this.getChild(this.node,"view/info/txtAttackSpeed",cc.Label),this.txtBonusDamage=this.getChild(this.node,"view/info/txtBonusDamage",cc.Label),this.txtDamageReduction=this.getChild(this.node,"view/info/txtDamageReduction",cc.Label),this.txtBonusDamage_p=this.getChild(this.node,"view/info/txtBonusDamage_p",cc.Label),this.txtDamageReduction_p=this.getChild(this.node,"view/info/txtDamageReduction_p",cc.Label),this.txtShengMingXiQu=this.getChild(this.node,"view/info/txtShengMingXiQu",cc.Label),this.txtFaLiXiQu=this.getChild(this.node,"view/info/txtFaLiXiQu",cc.Label),this.txtLucky=this.getChild(this.node,"view/info/txtLucky",cc.Label),this.txtSpt=this.getChild(this.node,"view/info/txtSpt",cc.Label),this.txtMagic=this.getChild(this.node,"view/info/txtMagic",cc.Label),this.refresh()},t.prototype.refresh=function(){this.rolePrefab&&this.rolePrefab.roleInfo?(this.txtName.string=this.rolePrefab.roleInfo.roleName,this.txtFightAttack.string=this.rolePrefab.roleInfo.attack+"",this.txtDef.string=this.rolePrefab.roleInfo.getDef()+"",this.txtHp.string=this.rolePrefab.roleInfo.getHp()+"",this.txtMp.string=this.rolePrefab.roleInfo.getMp()+"",this.txtAttackSpeed.string=this.rolePrefab.roleInfo.attackSpeed/1e3+"/s",this.txtBonusDamage.string=this.rolePrefab.roleInfo.BonusDamage+"",this.txtDamageReduction.string=this.rolePrefab.roleInfo.DamageReduction+"",this.txtBonusDamage_p.string=this.rolePrefab.roleInfo.BonusDamage_p+"",this.txtDamageReduction_p.string=this.rolePrefab.roleInfo.DamageReduction_p+"",this.txtShengMingXiQu.string=this.rolePrefab.roleInfo.HpDrain+"",this.txtFaLiXiQu.string=this.rolePrefab.roleInfo.MpDrain+"",this.txtLucky.string=this.rolePrefab.roleInfo.lucky+"",this.txtSpt.string=this.rolePrefab.roleInfo.spt+"",this.txtMagic.string=this.rolePrefab.roleInfo.mag+""):this.closeView()},t.prototype.onHide=function(){},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../event/CommonEvent":"CommonEvent"}],FirePigView:[function(e,t,i){"use strict";cc._RF.push(t,"d6afarKp99LMYWY0i8K1eXF","FirePigView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/Logger"),r=e("../../engine/ViewBase"),c=e("../config/EquipGatherConfig"),l=e("../config/GameConst"),d=e("../config/ITemsConfig"),f=e("../config/MapConfig"),g=e("../config/MonsterConfig"),h=e("../config/WordConfig"),u=e("../model/ActivityOpenModel"),p=e("../model/FuGuiGameModel"),m=e("../model/ItemInfoModel"),C=e("../prefab/ItemPrefab"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNodeList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.txtFireNum=this.getChild(this.node,"fundPanel/txtFireNum",cc.RichText),this.txtMap=this.getChild(this.node,"fundPanel/txtMap",cc.RichText),this.itemPrefab=this.getChild(this.node,"fundPanel/scrollView/view/content/ItemPrefab"),this.itemPrefab.active=!1,this.continueTime=this.getChild(this.node,"fundPanel/continueTime",cc.Label)},t.prototype.onEnable=function(){this.refresh()},t.prototype.refresh=function(){if(u.default.getOpenActivityModel(8)){var e=u.default.getStarTimeByActivityId(8),t=u.default.getEndTimeByActivityId(8);this.continueTime.string=a.default.formatDateStr7(1e3*e)+"-"+a.default.formatDateStr7(1e3*t)}var i=f.MapConfig.getMapConfigByMapId(p.FuGuiGameModel.mapId);this.txtMap.string=h.WordConfig.getWord(60426)+i.name,this.txtFireNum.string=h.WordConfig.getWord(60427)+m.default.getItemAmount(p.FuGuiGameModel.getItemID());var n=g.MonsterConfig.getMonsterConfigById(p.FuGuiGameModel.BossId),o=c.EquipGatherConfig.getEquipGatherConfigById(n.item),r=o.item_id;s.Logger.log("monsterConfig==",n,o);for(var _=[],v=0;v<r.length;v++)if(-1==_.indexOf(r[v])){_.push(r[v]);var y=void 0;this.itemNodeList[v]?y=this.itemNodeList[v]:((y=cc.instantiate(this.itemPrefab)).parent=this.itemPrefab.parent,this.itemNodeList[v]=y),y.active=!0;var b=d.ITemsConfig.getITemsConfigById(r[v]),I=m.default.create(l.GameConst.ITEM_KIND.ITEM,b.id,1,b.quality);y.getComponent(C.default).init(I,!0)}},t=o([v],t)}(r.default));i.default=y,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/EquipGatherConfig":"EquipGatherConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/WordConfig":"WordConfig","../model/ActivityOpenModel":"ActivityOpenModel","../model/FuGuiGameModel":"FuGuiGameModel","../model/ItemInfoModel":"ItemInfoModel","../prefab/ItemPrefab":"ItemPrefab"}],FuGuiGameModel:[function(e,t,i){"use strict";cc._RF.push(t,"1f9e6FSQnFJHIRmzfiMyngx","FuGuiGameModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../event/CommonEvent"),c=e("./ActivityOpenModel"),l=e("../config/DefaultConfig"),d=function(){function e(){}return e.proto2FuGui=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_roast_pig_info,e);this.num=t.getNum(),this.actStartTime=1e3*t.getActstarttime(),this.actEndTimes=1e3*t.getActendtimes(),o.Logger.log("FuGuiGameModel==",t),n.EventManager.instance.dispatch(r.CommonEvent.Event_FuGuiGameModel)},e.isInActTime=function(){var e=c.default.getOpenActivityModel(this.ActivityId);if(e&&1==e.status)return!0},e.getItemID=function(){if(!e.ItemId){var t=l.DefaultConfig.getConfigById(144).value;for(var i in t)e.ItemId=i}return e.ItemId},e.num=0,e.mapId=901,e.ActivityId=8,e.BossId=2003,e.ItemId=null,e}();i.FuGuiGameModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/DefaultConfig":"DefaultConfig","../event/CommonEvent":"CommonEvent","./ActivityOpenModel":"ActivityOpenModel"}],GainItemConsumerFeedbackMerged:[function(e,t,i){"use strict";cc._RF.push(t,"303c7fduBdA0p8SbzG2I+UO","GainItemConsumerFeedbackMerged");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/ColorConfig"),r=e("../config/GameConst"),c=e("../config/Xiaofeimubiaoconfig"),l=e("../model/ConsumerFeedbackMergedModel"),d=e("../model/ItemInfoModel"),f=e("../network/SocketClient"),g=e("./ItemPrefab"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.countLabel=null,t.ItemPrefab=null,t.rewardItemContext=null,t.gotNode=null,t.haveGot=null,t.notReach=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.onAddEvent(this.gotNode,this.gotCallback.bind(this))},t.prototype.gotCallback=function(){f.default.s_merge_consumer_reward(this.id)},t.prototype.init=function(e){var t=this;this.id=e;var i=c.default.getNeedCountById(e);this.titleLabel.string=c.default.getDecById(e),l.default.costGold>=i?(this.countLabel.string=i+"/"+i,this.countLabel.node.color=s.ColorConfig.GreenColor):(this.countLabel.string=l.default.costGold+"/"+i,this.gotNode.active=!1,this.notReach.active=!0,this.gotNode.getChildByName("RedPointPrefab").active=!1),3===l.default.getConsumerInfoStatusById(e)&&(this.haveGot.active=!0,this.gotNode.active=!1),c.default.getPropInfoById(e).forEach(function(e,i){var n=cc.instantiate(t.ItemPrefab);n.parent=t.rewardItemContext,n.getComponent(g.default).init(d.default.create(r.GameConst.ITEM_KIND.ITEM,i,e),!0)}),c.default.getRessInfoById(e).forEach(function(e,i){var n=cc.instantiate(t.ItemPrefab);n.parent=t.rewardItemContext,n.getComponent(g.default).initResource(Number(i),e)})},o([p(cc.RichText)],t.prototype,"titleLabel",void 0),o([p(cc.Label)],t.prototype,"countLabel",void 0),o([p(cc.Prefab)],t.prototype,"ItemPrefab",void 0),o([p(cc.Node)],t.prototype,"rewardItemContext",void 0),o([p(cc.Node)],t.prototype,"gotNode",void 0),o([p(cc.Node)],t.prototype,"haveGot",void 0),o([p(cc.Node)],t.prototype,"notReach",void 0),t=o([u],t)}(a.default);i.default=m,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/Xiaofeimubiaoconfig":"Xiaofeimubiaoconfig","../model/ConsumerFeedbackMergedModel":"ConsumerFeedbackMergedModel","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","./ItemPrefab":"ItemPrefab"}],GainItemConsumerFeedback:[function(e,t,i){"use strict";cc._RF.push(t,"554ffCb01dPdo2coVj/v1Hd","GainItemConsumerFeedback");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/ColorConfig"),r=e("../config/GameConst"),c=e("../config/Xiaofeihuikuiconfig"),l=e("../model/ConsumerFeedbackModel"),d=e("../model/ItemInfoModel"),f=e("../network/SocketClient"),g=e("./ItemPrefab"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.countLabel=null,t.rewardItem=null,t.ItemPrefab=null,t.rewardItemContext=null,t.gotNode=null,t.haveGot=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.onAddEvent(this.gotNode,this.gotCallback.bind(this))},t.prototype.gotCallback=function(){f.default.s_req_consumer_reward(this.id)},t.prototype.init=function(e){var t=this;this.id=e;var i=c.default.getNeedCountById(e);this.titleLabel.string=c.default.getDecById(e),l.default.costGold>=i?(this.countLabel.string=i+"/"+i,this.countLabel.node.color=s.ColorConfig.GreenColor):(this.countLabel.string=l.default.costGold+"/"+i,this.gotNode.color=cc.Color.GRAY,this.gotNode.getChildByName("RedPointPrefab").active=!1),3===l.default.getConsumerInfoStatusById(e)&&(this.haveGot.active=!0,this.gotNode.active=!1),c.default.getPropInfoById(e).forEach(function(e,i){var n=cc.instantiate(t.ItemPrefab);n.parent=t.rewardItemContext,n.getComponent(g.default).init(d.default.create(r.GameConst.ITEM_KIND.ITEM,i,e),!0)}),c.default.getRessInfoById(e).forEach(function(e,i){var n=cc.instantiate(t.ItemPrefab);n.parent=t.rewardItemContext,n.getComponent(g.default).initResource(Number(i),e)})},o([p(cc.RichText)],t.prototype,"titleLabel",void 0),o([p(cc.Label)],t.prototype,"countLabel",void 0),o([p(cc.Prefab)],t.prototype,"rewardItem",void 0),o([p(cc.Prefab)],t.prototype,"ItemPrefab",void 0),o([p(cc.Node)],t.prototype,"rewardItemContext",void 0),o([p(cc.Node)],t.prototype,"gotNode",void 0),o([p(cc.Node)],t.prototype,"haveGot",void 0),t=o([u],t)}(a.default);i.default=m,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/Xiaofeihuikuiconfig":"Xiaofeihuikuiconfig","../model/ConsumerFeedbackModel":"ConsumerFeedbackModel","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","./ItemPrefab":"ItemPrefab"}],GainItemView:[function(e,t,i){"use strict";cc._RF.push(t,"f6d9dzJYHxJW6eIQTsgRrQ6","GainItemView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../config/ColorConfig"),c=e("../../config/GameConst"),l=e("../../config/PuzzleConfig"),d=e("../../event/CommonEvent"),f=e("../../model/ItemInfoModel"),g=e("../../model/LuckyPuzzleModel"),h=e("../../network/SocketClient"),u=e("../../prefab/ItemPrefab"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.countLabel=null,t.rewardItem=null,t.ItemPrefab=null,t.rewardItemContext=null,t.gotNode=null,t.haveGot=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.onAddEvent(this.gotNode,this.gotCallback.bind(this)),a.EventManager.instance.on(d.CommonEvent.Event_puzzle_got_success,this.changeGotstate,this)},t.prototype.changeGotstate=function(){var e=g.LuckyPuzzleModel.id;try{e===this.id&&(this.findChild(this.node,"buttomM/gotNode").active=!1,this.findChild(this.node,"buttomM/haveGot").active=!0)}catch(e){}},t.prototype.gotCallback=function(){h.default.s_get_reward(this.id)},t.prototype.init=function(e,t){var i=this;this.id=t;var n=l.PuzzleConfig.getNeedCountById(t);this.titleLabel.string=l.PuzzleConfig.getDecById(t),this.countLabel.string="("+g.LuckyPuzzleModel.progress+"/"+n+")",g.LuckyPuzzleModel.progress>=n?this.countLabel.node.color=r.ColorConfig.GreenColor:(this.gotNode.color=cc.Color.GRAY,this.gotNode.getChildByName("RedPointPrefab").active=!1),3===e.status&&(this.haveGot.active=!0,this.gotNode.active=!1),l.PuzzleConfig.getAwardMapById(t).forEach(function(e,t){var n=cc.instantiate(i.ItemPrefab);n.parent=i.rewardItemContext,n.getComponent(u.default).init(f.default.create(c.GameConst.ITEM_KIND.ITEM,t,e),!0)})},t.prototype.start=function(){},o([C(cc.Label)],t.prototype,"titleLabel",void 0),o([C(cc.Label)],t.prototype,"countLabel",void 0),o([C(cc.Prefab)],t.prototype,"rewardItem",void 0),o([C(cc.Prefab)],t.prototype,"ItemPrefab",void 0),o([C(cc.Node)],t.prototype,"rewardItemContext",void 0),o([C(cc.Node)],t.prototype,"gotNode",void 0),o([C(cc.Node)],t.prototype,"haveGot",void 0),t=o([m],t)}(s.default);i.default=_,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/PuzzleConfig":"PuzzleConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/LuckyPuzzleModel":"LuckyPuzzleModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],GameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f175dV0NVhC3LnHZe4FIhg1","GameConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n,o,a=e("../../engine/GlobalConfig"),s=e("../../engine/Logger");(function(e){e[e.Local=0]="Local",e[e.Test=1]="Test",e[e.TiYan=2]="TiYan",e[e.Online=3]="Online"})(n=i.EnvironmentType||(i.EnvironmentType={})),function(e){e[e.BingNiao=0]="BingNiao",e[e.Feiyou=1]="Feiyou",e[e.LoongCheer=2]="LoongCheer",e[e.LongRui=3]="LongRui",e[e.KoreaBingNiao=4]="KoreaBingNiao",e[e.FengYue=5]="FengYue",e[e.Xiaotun=6]="Xiaotun"}(o=i.SdkType||(i.SdkType={}));var r=function(){function e(){}return e.getPlugUrl=function(){if(this.environment==n.Test){if(e.sdkType==o.LoongCheer)return"http://127.0.0.1/plug?";if(e.sdkType==o.Xiaotun)return"http://192.168.0.8:11000/plug?"}return e.sdkType==o.Xiaotun?this.environment==n.Online?"http://192.168.0.10:11000/plug?":"http://192.168.0.8:11000/plug?":"http://192.168.31.165:11000/plug?"},e.getHotUpdateUrl=function(){if(e.sdkType==o.BingNiao)return"http://"},e.getAddChatUrl=function(){return"https://center.q2.5tun.cn/User/addChat"},e.getHttpUrl=function(){return a.GlobalConfig.getServerListUrl&&""!=a.GlobalConfig.getServerListUrl?a.GlobalConfig.getServerListUrl:e.sdkType==o.Xiaotun?this.environment==n.Online?"https://api.q2.5tun.cn":"https://apitest.q2.5tun.cn":e.isWechat()?"https://apiwxtest.q2.5tun.cn":"https://apitest.q2.5tun.cn"},e.getNoteHttpUrl=function(){return"https://center.q2.5tun.cn/Notice/noticeList"},e.getPingbiziUrl=function(){return"https://center.q2.5tun.cn/Util/isDirty"},e.getLoginDomain=function(){return e.sdkType==o.Xiaotun?this.environment==n.Online?"wss://game.q2.5tun.cn":"wss://gametest.q2.5tun.cn":e.isWechat()?"wss://gamewxtest.q2.5tun.cn":"wss://gametest.q2.5tun.cn"},e.getBugLogUrl=function(){return"https://center.q2.5tun.cn/Util/collectBug"},e.getLoginCp=function(){if(this.environment==n.Test)return"http://"},e.getLoginChangelid=function(){return"1"},e.setEnvironment=function(e){this.environment=e,s.Logger.initLogLevel()},e.isWechat=function(){return e.platform===cc.sys.WECHAT_GAME},e.isWechatClient=function(){return!1},e.Languange_Type={ch:"ch",hk:"hk",en:"en"},e.Client_Type={test:0,xiaotunWeb:1,wx:2,wxWeb:3},e.nowLanguage=e.Languange_Type.ch,e.sdkType=o.FengYue,e.platform=cc.sys.platform,e.connectServer=!0,e.environment=n.Test,e.isOpenQusetionnaire=!1,e.isOpenAd=!0,e.isSdkExitGame=!0,e.socketUrl="",e.prefabLoadList=["prefab/gameui","prefab/game"],e.preloadList=["prefab/roles/bag","prefab/roles/bagAdd","prefab/roles/equipInfo","prefab/roles/ItemInfo","prefab/skill/skill","prefab/map","prefab/setting"],e.atlasList=["atlas/fightframe","markIcon/markIcon","skillIcon/skillIcon"],e}();i.GameConfig=r,cc._RF.pop()},{"../../engine/GlobalConfig":"GlobalConfig","../../engine/Logger":"Logger"}],GameConst:[function(e,t,i){"use strict";cc._RF.push(t,"bd33e06f1ZLMrRAERf4EmOI","GameConst"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("./MapConfig"),a=e("./WordConfig");(function(e){e.REFINE="I3001",e.ANTIQUE="I3003",e.HP="I1001",e.MP="I2001",e.HHP="I2101",e.HMP="I2201",e.SkillDan="I3004",e.Book="I4001",e.LingDang="I9111",e.XianJing="I9112",e.XingNianCoin="I9138",e.JiFengFu="I9130",e.XianDiFu="I9131",e.XinYunCoin="I9140"})(i.ItemId||(i.ItemId={})),function(e){e[e.HP=0]="HP",e[e.MP=1]="MP",e[e.HHP=2]="HHP",e[e.HMP=3]="HMP"}(i.DrugCoolDown||(i.DrugCoolDown={})),function(e){e[e["\u666e\u901a"]=0]="\u666e\u901a",e[e["\u4f18\u79c0"]=1]="\u4f18\u79c0",e[e["\u7cbe\u826f"]=2]="\u7cbe\u826f",e[e["\u53f2\u8bd7"]=3]="\u53f2\u8bd7",e[e["\u4f20\u8bf4"]=4]="\u4f20\u8bf4"}(i.QualityName||(i.QualityName={})),i.TestData=!1,function(e){e[e.NONE=0]="NONE",e[e.NOT_LEVEL=1]="NOT_LEVEL",e[e.NOT_PRO=2]="NOT_PRO",e[e.SUCCESS=3]="SUCCESS"}(i.ADD_EQ||(i.ADD_EQ={})),function(e){e.BAG_ADD="BAG_ADD",e.BAG_CUT="BAG_CUT",e.BAG_UPDATE="BAG_UPDATE",e.BAG_ADD_AMOUNT="BAG_ADD_AMOUNT",e.DEC_GOLD="DEC_GOLD",e.ADD_GOLD="ADD_GOLD",e.DEC_COIN="DEC_COIN",e.ADD_COIN="ADD_COIN",e.REFRESH_REFINE="REFRESH_REFINE",e.REFRESH_PRIVILEGE="REFRESH_PRIVILEGE"}(i.EVENT_NAME||(i.EVENT_NAME={})),function(e){e[e.NONE=-1]="NONE",e[e.WEAPON=1]="WEAPON",e[e.CORSELET=2]="CORSELET",e[e.BRACELET=3]="BRACELET",e[e.RING=4]="RING",e[e.BELT=5]="BELT",e[e.HELMET=6]="HELMET",e[e.NECK_LACE=7]="NECK_LACE",e[e.NONE2=8]="NONE2",e[e.NONE3=9]="NONE3",e[e.SHOE=10]="SHOE",e[e.WEAPON_lunhui=101]="WEAPON_lunhui",e[e.CORSELET_lunhui=102]="CORSELET_lunhui",e[e.BRACELET_lunhui=103]="BRACELET_lunhui",e[e.RING_lunhui=104]="RING_lunhui",e[e.BELT_lunhui=105]="BELT_lunhui",e[e.HELMET_lunhui=106]="HELMET_lunhui",e[e.NECK_LACE_lunhui=107]="NECK_LACE_lunhui",e[e.NONE2_lunhui=108]="NONE2_lunhui",e[e.NONE3_lunhui=109]="NONE3_lunhui",e[e.SHOE_lunhui=110]="SHOE_lunhui",e[e.RING_SHENLI=1001]="RING_SHENLI",e[e.RING_MABI=1002]="RING_MABI",e[e.RING_HUSHEN=1003]="RING_HUSHEN",e[e.RING_FUHUO=1004]="RING_FUHUO",e[e.RING_XUNZHANG=2001]="RING_XUNZHANG"}(n=i.Position||(i.Position={})),function(e){e[e.WEAPON=1]="WEAPON",e[e.CORSELET=2]="CORSELET",e[e.BRACELET_lEFT=3]="BRACELET_lEFT",e[e.RING_LEFT=4]="RING_LEFT",e[e.BELT=5]="BELT",e[e.HELMET=6]="HELMET",e[e.NECK_LACE=7]="NECK_LACE",e[e.BRACELET_RIGHT=8]="BRACELET_RIGHT",e[e.RING_RIGHT=9]="RING_RIGHT",e[e.SHOE=10]="SHOE",e[e.MEDAL=11]="MEDAL",e[e.WEAPON_lunhui=101]="WEAPON_lunhui",e[e.CORSELET_lunhui=102]="CORSELET_lunhui",e[e.BRACELET_lEFT_lunhui=103]="BRACELET_lEFT_lunhui",e[e.RING_LEFT_lunhui=104]="RING_LEFT_lunhui",e[e.BELT_lunhui=105]="BELT_lunhui",e[e.HELMET_lunhui=106]="HELMET_lunhui",e[e.NECK_LACE_lunhui=107]="NECK_LACE_lunhui",e[e.BRACELET_RIGHT_lunhui=108]="BRACELET_RIGHT_lunhui",e[e.RING_RIGHT_lunhui=109]="RING_RIGHT_lunhui",e[e.SHOE_lunhui=110]="SHOE_lunhui",e[e.RING_SHENLI=1001]="RING_SHENLI",e[e.RING_MABI=1002]="RING_MABI",e[e.RING_HUSHEN=1003]="RING_HUSHEN",e[e.RING_FUHUO=1004]="RING_FUHUO",e[e.RING_XUNZHANG=2001]="RING_XUNZHANG"}(i.GridType||(i.GridType={})),function(e){e.MAIN_SCENE="MainScene",e.WORLD_SCENE="WorldScene",e.BATTLE_SCENE="BattleScene",e.LOADING_SCENE="LoadingScene"}(i.SceneType||(i.SceneType={})),function(e){e[e.SHENLI=1001]="SHENLI",e[e.MABI=1002]="MABI",e[e.HUSHEN=1003]="HUSHEN",e[e.FUHUO=1004]="FUHUO"}(i.TeJie||(i.TeJie={})),function(e){e[e.Default=0]="Default",e[e.PvP=1]="PvP",e[e.PvE=2]="PvE"}(i.BattleType||(i.BattleType={})),function(e){e[e.Default=0]="Default",e[e.WorldBoss=1]="WorldBoss",e[e.TianGuan=2]="TianGuan",e[e.MinePVP=3]="MinePVP",e[e.pkPVP=4]="pkPVP",e[e.GuildPVP=5]="GuildPVP"}(i.ServerFightType||(i.ServerFightType={}));var s=function(){function e(){}return e.getEquipPositionName=function(e,t){return void 0===t&&(t=!1),e==n.WEAPON||e==n.WEAPON_lunhui?a.WordConfig.getWord(60715):e==n.CORSELET||e==n.CORSELET_lunhui?t?a.WordConfig.getWord(61830):a.WordConfig.getWord(60716):e==n.BRACELET||e==n.BRACELET_lunhui?a.WordConfig.getWord(60717):e==n.RING||e==n.RING_lunhui?a.WordConfig.getWord(60718):e==n.BELT||e==n.BELT_lunhui?a.WordConfig.getWord(60719):e==n.HELMET||e==n.HELMET_lunhui?a.WordConfig.getWord(60720):e==n.NECK_LACE||e==n.NECK_LACE_lunhui?a.WordConfig.getWord(60721):e==n.SHOE||e==n.SHOE_lunhui?a.WordConfig.getWord(60722):e==n.RING_SHENLI?a.WordConfig.getWord(60723):e==n.RING_FUHUO?a.WordConfig.getWord(60724):e==n.RING_MABI?a.WordConfig.getWord(60725):e==n.RING_HUSHEN?a.WordConfig.getWord(60726):e==n.RING_XUNZHANG?a.WordConfig.getWord(61999):void 0},e.qualityNameArr=function(e){var t=new Array;return t.push(a.WordConfig.getWord(61477)),t.push(a.WordConfig.getWord(61478)),t.push(a.WordConfig.getWord(61479)),t.push(a.WordConfig.getWord(61480)),t.push(a.WordConfig.getWord(61481)),t[e]},e.OccupationNameMap=function(t){var i=new Map;return i.set(e.OCCUPATION.None,a.WordConfig.getWord(60727)),i.set(e.OCCUPATION.ZHAN_SHI,a.WordConfig.getWord(60728)),i.set(e.OCCUPATION.FA_SHI,a.WordConfig.getWord(60729)),i.set(e.OCCUPATION.DAO_SHI,a.WordConfig.getWord(60730)),i.get(t)},e.WorldNameMap=function(e){var t=new Map;return t.set(o.MapConfig.WORLD.FanRen,a.WordConfig.getWord(61307)),t.set(o.MapConfig.WORLD.LunHui,a.WordConfig.getWord(61308)),t.get(e)},e.MaxRandomValue=1e4,e.PLATFORM={NONE:0,BN:1},e.UNIQID={USER:1,ROLE:2,ITEM:3,ORDER:4},e.OCCUPATION={None:0,ZHAN_SHI:1,FA_SHI:2,DAO_SHI:3},e.QUALITY={GRAY:-1,WHITE:0,GREEN:1,BLUE:2,PURPLE:3,ORANGE:4},e.RES_TYPE={COIN:1,YUAN_BAO:2,CREAM:3,EXP:4,power:6,mineSafeTime:7,LeiTaiCoin:8,TIGUANSCORE:9,Guild_GX:10,Guild_guildExploits:11},e.RET={SUC:1,FAIL:0},e.ITEM_KIND={ITEM:1,EQUIP:2,Hufu:3,BaGua:4,Auction:5},e.AOS={ADD:1,SUB:0},e.REASON={DROP:1,TEMPORARY:2},e.CHARGE_KIND={REWARD:1,PRIVILEGE:2,CHARGE:3},e.PRIVILEGE_TYPE={RECYCLE:1,FIGHT:2,FREEADV:3},e.isFirstInit=!0,e.JINGLIAN={ATTACK:1,DEFENSE:2},e.SPECIALBOSSID={WORLDBOSS:75,WORLDBOSSID:60001},e}();i.GameConst=s,cc._RF.pop()},{"./MapConfig":"MapConfig","./WordConfig":"WordConfig"}],GameController:[function(e,t,i){"use strict";cc._RF.push(t,"95363iDzgpHE5Y9YYUfBuyb","GameController"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../engine/EventManager"),o=e("../engine/GameSocket"),a=e("../engine/GlobalConfig"),s=e("../engine/Logger"),r=e("../engine/MusicPrefab"),c=e("../engine/ProtoUtils"),l=e("../engine/ResourcesManager"),d=e("../engine/SoundPrefab"),f=e("../engine/UIManager"),g=e("../engine/VersionManager"),h=e("./base/SyncHelper"),u=e("./config/GameConfig"),p=e("./config/GameConst"),m=e("./config/ViewConfig"),C=e("./config/WordConfig"),_=e("./event/CommonEvent"),v=e("./manager/SkillManager"),y=e("./manager/StartUpMgr"),b=e("./model/ChatModel"),I=e("./model/RoleInfoModel"),M=e("./model/ServerTime"),w=e("./network/HttpHelper"),k=e("./network/SocketClient"),S=e("./prefab/GameManager"),P=e("./sdk/FeiYouSdkManager"),E=e("./sdk/SdkHandler"),L=e("./sdk/SdkHelper"),T=e("./sdk/SdkManager"),R=e("./utils/MusicHelper"),N=function(){function e(){}return e.prototype.init=function(){a.GlobalConfig.init(),h.SyncHelper.init(),n.EventManager.instance.on(_.CommonEvent.Event_SdkInit,this.sdkInit,this),cc.debug.setDisplayStats(!1),cc.game.setFrameRate(60),cc.dynamicAtlasManager.enabled=!1,h.SyncHelper.init(),k.default.init(),g.default.instance.init(),L.default.init(),P.FeiYouSdkManager.init(),M.ServerTime.init(),v.default.instance.init(),c.ProtoUtils.init(),w.default.init()},e.prototype.onHideToBackground=function(){R.MusicHelper.stop_bg(!1)},e.prototype.aWakeFromBackGround=function(){R.MusicHelper.play_bg_index()},e.prototype.startGame=function(){s.Logger.log("startGame");window.location.href;cc.game.off(cc.game.EVENT_HIDE,this.onHideToBackground,this),cc.game.on(cc.game.EVENT_HIDE,this.onHideToBackground,this),cc.game.off(cc.game.EVENT_SHOW,this.aWakeFromBackGround,this),cc.game.on(cc.game.EVENT_SHOW,this.aWakeFromBackGround,this),b.ChatModel.reInit(),R.MusicHelper.play_bg(1),u.GameConfig.socketUrl=u.GameConfig.getLoginDomain(),console.log("GameConfig.sdkType="+u.GameConfig.sdkType),u.GameConfig.sdkType==u.SdkType.BingNiao?L.default.sdkInit_Ol():u.GameConfig.sdkType==u.SdkType.FengYue?u.GameConfig.isWechat()?T.default.sdkAuth(E.AuthType.login):n.EventManager.instance.dispatch(_.CommonEvent.Event_SdkInit):u.GameConfig.sdkType==u.SdkType.Feiyou?(cc.sys.isBrowser&&n.EventManager.instance.dispatch(_.CommonEvent.Event_SdkInit),P.FeiYouSdkManager.sdkInit()):u.GameConfig.sdkType==u.SdkType.Xiaotun?a.GlobalConfig.browserParam?T.default.sdkAuth(E.AuthType.login):n.EventManager.instance.dispatch(_.CommonEvent.Event_SdkInit):(cc.sys.isBrowser&&n.EventManager.instance.dispatch(_.CommonEvent.Event_SdkInit),T.default.sdkAuth(E.AuthType.login))},e.prototype.restartGame=function(){p.GameConst.isFirstInit=!0,I.default.instance=null,window.removeEventListener("message",L.default.eventCallback),d.default.destory(),r.default.destory(),o.default.getInstance().isReconnecting=!1,o.default.getInstance().reconnectTimes=0,o.default.getInstance().closeSocket(!1),o.default.getInstance().isKick=!1,l.default.instance.clearSpriteMap(),f.default.instance.closeAllView(),u.GameConfig.socketUrl=u.GameConfig.getLoginDomain(),cc.game.restart()},e.prototype.showServerFail=function(e){S.default.instance.isPause=!0,o.default.getInstance().isReconnecting=!1,o.default.getInstance().reconnectTimes=0,o.default.getInstance().closeSocket(!1),f.default.instance.createView(m.default.gameView.ServerWeiHuView,null,C.WordConfig.getWord(e))},e.prototype.sdkInit=function(){console.log("GameController.sdkInit====="),n.EventManager.instance.dispatch(_.CommonEvent.Event_SdkGetInfo),this.hasTempView()?f.default.instance.createView(m.default.gameView.TempView):this.loadServerList()},e.prototype.hasTempView=function(){return(u.GameConfig.sdkType!=u.SdkType.Xiaotun||!a.GlobalConfig.browserParam)&&!u.GameConfig.isWechat()},e.prototype.loadServerList=function(){var e=this;w.default.getDomainList(function(){e.enterGame()})},e.prototype.enterGame=function(){y.StartUpMgr.showZone()},e.prototype.gotoLogin=function(){y.StartUpMgr.showCreate()},e.instance=new e,e}();i.default=N,cc._RF.pop()},{"../engine/EventManager":"EventManager","../engine/GameSocket":"GameSocket","../engine/GlobalConfig":"GlobalConfig","../engine/Logger":"Logger","../engine/MusicPrefab":"MusicPrefab","../engine/ProtoUtils":"ProtoUtils","../engine/ResourcesManager":"ResourcesManager","../engine/SoundPrefab":"SoundPrefab","../engine/UIManager":"UIManager","../engine/VersionManager":"VersionManager","./base/SyncHelper":"SyncHelper","./config/GameConfig":"GameConfig","./config/GameConst":"GameConst","./config/ViewConfig":"ViewConfig","./config/WordConfig":"WordConfig","./event/CommonEvent":"CommonEvent","./manager/SkillManager":"SkillManager","./manager/StartUpMgr":"StartUpMgr","./model/ChatModel":"ChatModel","./model/RoleInfoModel":"RoleInfoModel","./model/ServerTime":"ServerTime","./network/HttpHelper":"HttpHelper","./network/SocketClient":"SocketClient","./prefab/GameManager":"GameManager","./sdk/FeiYouSdkManager":"FeiYouSdkManager","./sdk/SdkHandler":"SdkHandler","./sdk/SdkHelper":"SdkHelper","./sdk/SdkManager":"SdkManager","./utils/MusicHelper":"MusicHelper"}],GameManager:[function(e,t,i){"use strict";cc._RF.push(t,"e9cb0yOKnNCXrOSRA2a/KPB","GameManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/GameConst"),o=function(){function e(){this.tabIndex=0,this.isPause=!1,this.isGuaJi=!1,this.serverFightType=n.ServerFightType.Default,this.BattleType=n.BattleType.Default,this.FightBossId=null}return e.prototype.init=function(e){this.gameView=e},e.prototype.isInFightView=function(){return 0==e.instance.tabIndex},e.instance=new e,e}();i.default=o,cc._RF.pop()},{"../config/GameConst":"GameConst"}],GamePrivilegeView:[function(e,t,i){"use strict";cc._RF.push(t,"cde6eyT9npL6qhgJ1j3e7RI","GamePrivilegeView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/PrivilegeModel"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=e("../utils/MusicHelper"),d=e("../config/ChongZhiConfig"),f=e("../../engine/EventManager"),g=e("../config/GameConst"),h=e("../network/SocketClient"),u=e("../../engine/DateUtil"),p=e("../sdk/SdkHelper"),m=e("../model/TopUpModel"),C=e("../config/GameConfig"),_=e("../config/WordConfig"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e){void 0===e&&(e=s.default.Privilege_Type.recovery),this.privilegeType=e},t.prototype.onShow=function(){r.default.instance.setTopUI(c.default.gameView.GamePrivilege),this.initData(),this.initUI(),this.registerEvent()},t.prototype.initData=function(){this.privilegeType==s.default.Privilege_Type.recovery?p.default.isAndroid()||C.GameConfig.sdkType==C.SdkType.Feiyou||C.GameConfig.sdkType==C.SdkType.LoongCheer?(this.monthConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.RECYCLE_MONTH),this.seasonConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.RECYCLE_SEASON),this.mergeConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.MERGE_SEASON)):(this.monthConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.RECYCLE_MONTH),this.seasonConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.RECYCLE_SEASON),this.mergeConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.MERGE_SEASON)):this.privilegeType==s.default.Privilege_Type.FightGod?p.default.isAndroid()||C.GameConfig.sdkType==C.SdkType.Feiyou||C.GameConfig.sdkType==C.SdkType.LoongCheer?(this.monthConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.FIGHTGOD_MONTH),this.seasonConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.FIGHTGOD_SEASON),this.mergeConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.MERGE_SEASON)):(this.monthConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.FIGHTGOD_MONTH),this.seasonConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.FIGHTGOD_SEASON),this.mergeConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.MERGE_SEASON)):this.privilegeType==s.default.Privilege_Type.GameHelper&&(p.default.isAndroid()||C.GameConfig.sdkType==C.SdkType.Feiyou||C.GameConfig.sdkType==C.SdkType.LoongCheer?(this.monthConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.GAMEHELPER_MONTH),this.seasonConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.GAMEHELPER_SEASON),this.mergeConfig=d.ChongZhiConfig.getConfigById(i.CONFIG_INDEX.GAMEHELPER_FORGOOD)):(this.monthConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.GAMEHELPER_MONTH),this.seasonConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.GAMEHELPER_SEASON),this.mergeConfig=d.ChongZhiConfig.getConfigById(i.Config_Ios.GAMEHELPER_FORGOOD)))},t.prototype.initUI=function(){var e=this.findChild(this.node,"title/title_tuoguan"),t=this.findChild(this.node,"title/title_tequan"),i=this.findChild(this.node,"sp/recycle"),n=this.findChild(this.node,"sp/fightGod"),o=this.findChild(this.node,"sp/gameHelper"),a=this.findChild(this.node,"txt/label_1"),r=this.findChild(this.node,"txt/label_2"),c=this.findChild(this.node,"txt/label_3"),l=this.findChild(this.node,"txt/priceLabel_1"),d=this.findChild(this.node,"txt/priceLabel_2"),f=this.findChild(this.node,"txt/priceLabel_3"),g=this.monthConfig,h=this.seasonConfig,p=this.mergeConfig;if(this.privilegeType==s.default.Privilege_Type.recovery){e.active=!1,t.active=!0,i.active=!0,n.active=!1,o.active=!1;var m=u.default.getDay(1e3*g.continueTime),C=u.default.getDay(1e3*h.continueTime);a.getComponent(cc.Label).string=cc.js.formatStr(_.WordConfig.getWord(60428),m),r.getComponent(cc.Label).string=cc.js.formatStr(_.WordConfig.getWord(60428),C),c.getComponent(cc.Label).string=_.WordConfig.getWord(60429),l.getComponent(cc.Label).string=g.getMoneyStr(),d.getComponent(cc.Label).string=h.getMoneyStr(),f.getComponent(cc.Label).string=p.getMoneyStr()}else if(this.privilegeType==s.default.Privilege_Type.FightGod){e.active=!1,t.active=!0,i.active=!1,n.active=!0,o.active=!1;var v=g.continueTime;m=u.default.getDay(1e3*v),C=u.default.getDay(1e3*h.continueTime);a.getComponent(cc.Label).string=cc.js.formatStr(_.WordConfig.getWord(60430),m),r.getComponent(cc.Label).string=cc.js.formatStr(_.WordConfig.getWord(60430),C),c.getComponent(cc.Label).string=_.WordConfig.getWord(60429),l.getComponent(cc.Label).string=g.getMoneyStr(),d.getComponent(cc.Label).string=h.getMoneyStr(),f.getComponent(cc.Label).string=p.getMoneyStr()}else if(this.privilegeType==s.default.Privilege_Type.GameHelper){e.active=!0,t.active=!1,o.active=!0,i.active=!1,n.active=!1;v=g.continueTime,m=u.default.getDay(1e3*v),C=u.default.getDay(1e3*h.continueTime);a.getComponent(cc.Label).string=cc.js.formatStr(_.WordConfig.getWord(60431),m),r.getComponent(cc.Label).string=cc.js.formatStr(_.WordConfig.getWord(60431),C),c.getComponent(cc.Label).string=_.WordConfig.getWord(60432),l.getComponent(cc.Label).string=g.getMoneyStr(),d.getComponent(cc.Label).string=h.getMoneyStr(),f.getComponent(cc.Label).string=p.getMoneyStr()}},t.prototype.registerEvent=function(){var e=this.findChild(this.node,"btn/monthBtn"),t=this.findChild(this.node,"btn/seasonBtn"),i=this.findChild(this.node,"btn/mergeBtn"),n=this.findChild(this.node,"btn/closeBtn");this.onAddEvent(e,this.onClickMonth.bind(this)),this.onAddEvent(t,this.onClickSeason.bind(this)),this.onAddEvent(i,this.onClickMerge.bind(this)),this.onAddEvent(n,this.onClickClose.bind(this)),f.EventManager.instance.on(g.EVENT_NAME.REFRESH_PRIVILEGE,this.onEventRefreshPrivilege,this)},t.prototype.onEventRefreshPrivilege=function(e,t){},t.prototype.onClickMonth=function(){l.MusicHelper.play_click();var e=this.monthConfig;this.privilegeType!=s.default.Privilege_Type.GameHelper||-1!=m.TopUpModel.getGameHelperDay()?(h.default.req_charge(e.id),this.closeView()):_.WordConfig.showWord(60317)},t.prototype.onClickSeason=function(){l.MusicHelper.play_click();var e=this.seasonConfig;this.privilegeType!=s.default.Privilege_Type.GameHelper||-1!=m.TopUpModel.getGameHelperDay()?(h.default.req_charge(e.id),this.closeView()):_.WordConfig.showWord(60317)},t.prototype.onClickMerge=function(){l.MusicHelper.play_click();var e=this.mergeConfig;this.privilegeType!=s.default.Privilege_Type.GameHelper||-1!=m.TopUpModel.getGameHelperDay()?(h.default.req_charge(e.id),this.closeView()):_.WordConfig.showWord(60317)},t.prototype.onClickClose=function(){l.MusicHelper.play_click(),this.onClose()},t.prototype.onClose=function(){this.closeView()},t.CONFIG_INDEX={RECYCLE_MONTH:2,FIGHTGOD_MONTH:3,RECYCLE_SEASON:4,FIGHTGOD_SEASON:5,MERGE_SEASON:6,GAMEHELPER_MONTH:9,GAMEHELPER_SEASON:10,GAMEHELPER_FORGOOD:11},t.Config_Ios={RECYCLE_MONTH:1002,FIGHTGOD_MONTH:1003,RECYCLE_SEASON:1004,FIGHTGOD_SEASON:1005,MERGE_SEASON:1006,GAMEHELPER_MONTH:1009,GAMEHELPER_SEASON:1010,GAMEHELPER_FORGOOD:1011},t=i=o([y],t)}(a.default));i.default=b,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/PrivilegeModel":"PrivilegeModel","../model/TopUpModel":"TopUpModel","../network/SocketClient":"SocketClient","../sdk/SdkHelper":"SdkHelper","../utils/MusicHelper":"MusicHelper"}],GameSocket:[function(e,t,i){"use strict";cc._RF.push(t,"b2679krszZPOYxYmvmI4Jp8","GameSocket"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/event/CommonEvent"),o=e("./EventManager"),a=e("./GameWebSocket"),s=e("./Logger"),r=e("./ProtoConfig"),c=e("./ProtoUtils"),l=e("./UIManager"),d=e("../game/config/GameConfig"),f=e("../game/model/ServerTime"),g=e("../game/network/SocketClient"),h=e("../game/config/ViewConfig"),u=e("./DateUtil"),p=e("./SocketRequestData"),m=e("./RandomUtil"),C=e("../game/manager/MonsterManager"),_=e("../game/config/GameConst"),v=e("../game/sdk/FeiYouSdkManager"),y=e("./GlobalConfig"),b=function(){function e(){this.isConnected=!1,this.isConnecting=!1,this.requestMsgQue=[],this.pingInteval=1e4,this.sendTimeCount=13e3,this.connectTimeMax=3e3,this.lastRecvTime=0,this.isReconnecting=!1,this.reconnectCount=0,this.reconnectTimes=0,this.maxReconnectTimes=3,this.onlyId=1,this.callbackMap=new Map,this.lastHideTime=0,this.isKick=!1,this.checkReConnectCount=0,this.init()}return e.prototype.checkOnlyId=function(){var e=this.onlyId;return this.onlyId++,this.onlyId>=999999&&(this.onlyId=1),e},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.init=function(){this.socket=new a.default,o.EventManager.instance.off(n.CommonEvent.Event_FrameUpdate,this.onFrameUpdate,this),o.EventManager.instance.on(n.CommonEvent.Event_FrameUpdate,this.onFrameUpdate,this),this.isConnected=!1,this.isConnecting=!1,cc.game.off(cc.game.EVENT_HIDE,this.onHideToBackground,this),cc.game.on(cc.game.EVENT_HIDE,this.onHideToBackground,this),cc.game.off(cc.game.EVENT_SHOW,this.aWakeFromBackGround,this),cc.game.on(cc.game.EVENT_SHOW,this.aWakeFromBackGround,this),this.socket.SetCallBacks(this.onConnect,this.onClose,this.onSocketData,this.onError,this)},e.prototype.onHideToBackground=function(){this.lastHideTime=u.default.now(),cc.audioEngine.pauseAll()},e.prototype.aWakeFromBackGround=function(){cc.audioEngine.resumeAll(),d.GameConfig.connectServer&&e.getInstance().isLogin&&u.default.now()-this.lastHideTime>=3e5&&this.closeSocket()},e.prototype.onConnect=function(){void 0!=this.timeOutId&&clearTimeout(this.timeOutId),this.lastHideTime=u.default.now(),l.default.instance.closeView(h.default.gameView.OfflineView),this.isConnected=!0,this.isConnecting=!1,this.reconnectTimes=0,C.default.instance.needCheckClearMonster=!0,clearTimeout(this.connectTimeId),l.default.instance.hideLoadingIcon(),this.isReconnecting?2==y.GlobalConfig.loginTime&&(d.GameConfig.sdkType==d.SdkType.Feiyou?g.default.login(2,v.FeiYouSdkManager.user_id):g.default.login()):this.checkSendPack()},e.prototype.onClose=function(){this.isConnected=!1,this.isConnecting=!1,this.isLogin=!1,clearTimeout(this.connectTimeId),l.default.instance.hideLoadingIcon(),this.isReconnecting&&!this.isKick&&this.reConnect()},e.prototype.onError=function(e){console.log("GameSocket onError")},e.prototype.connnect=function(e){var t=this;void 0===e&&(e=d.GameConfig.socketUrl),this.isConnected||this.isConnecting||(this.isConnecting=!0,console.log("socket connect start==",e),l.default.instance.showLoadingIcon(),this.connectTimeId=setTimeout(function(){t.closeSocket(!0)},this.connectTimeMax),this.socket.connect(e))},e.prototype.reConnect=function(){this.requestMsgQue=[],this.reconnectTimes++,l.default.instance.createView(h.default.gameView.OfflineView),this.reconnectCount=1*cc.game.getFrameRate()},e.prototype.checkReConnect=function(){this.isReconnecting&&(this.reconnectCount--,0==this.reconnectCount&&(l.default.instance.createView(h.default.gameView.OfflineView),this.connnect()))},e.prototype.onFrameUpdate=function(){this.checkReConnect()},e.prototype.pingRequest=function(){var t=c.ProtoUtils.Create(r.ProtoConfig.s_req_heart);t.setHeart(1),e.getInstance().sendToSocket(t),clearTimeout(this.timeOutId),this.timeOutId=setTimeout(function(){e.getInstance().closeSocket(!0)},5e3)},e.prototype.ping=function(){var e=this;this.isConnected&&(this.pingRequest(),clearTimeout(this.pingTimeId),this.pingTimeId=setTimeout(function(){e.ping()},this.pingInteval))},e.prototype.checkSendPack=function(){if(this.requestMsgQue.length>0){var e=this.requestMsgQue.shift();if(this.isConnected){var t=this.createSendPack(e).buffer;this.socket.send(t),this.checkSendPack()}else this.reConnect()}},e.prototype.createSendPack=function(e){var t=c.ProtoUtils.GetProtoName(e.data),i=r.ProtoConfig.getProtoRequestType(t),n=e.data.serializeBinary();e.callback&&this.callbackMap.set(e.id,e.callback),this.scu_rand=m.default.nextInt(1,999999);var o=c.ProtoUtils.Create(r.ProtoConfig.PB_MESSAGE);o.setSeq(e.id),o.setHead(i),o.setData(n);var a=Math.floor(this.scu_key/1e3)+(100*(this.scu_rand<<1)-99);return isNaN(a)&&(a=1),o.setScu(a),o.setScuRand(this.scu_rand),r.ProtoConfig.s_req_heart,o.serializeBinary()},e.prototype.sendToSocket=function(e,t){void 0===t&&(t=null);var i=new p.default;i.id=this.checkOnlyId(),i.data=e,i.callback=t,this.requestMsgQue.push(i),this.isConnected?this.checkSendPack():this.connnect()},e.prototype.onSocketData=function(e){this.lastRecvTime=u.default.now();var t=new Uint8Array(e),i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.PB_MESSAGE,t),a=i.getSeq(),d=i.getHead(),g=i.getData(),h=i.getScuRand();this.scu_rand=h<<1;var p=r.ProtoConfig.getProtoRespName(d);if(clearTimeout(this.timeOutId),p!=r.ProtoConfig.c_req_heart&&s.Logger.log("onSocketData=",a,d,p,g),0!=a){var m=this.callbackMap.get(a);if(m)return void m(p,g)}if(d==r.ProtoConfig.getProtoResponeseType(r.ProtoConfig.c_user_login)){l.default.instance.hideLoadingIcon();var C=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_user_login,g),_=C.getRet();if(s.Logger.log("\u767b\u5f55\u6210\u529f=",C),1==_);else if(2==_){var v=C.getScuKey();this.scu_key=v}o.EventManager.instance.dispatch(n.CommonEvent.Event_SocketRespMsg,p,g)}else if(d==r.ProtoConfig.getProtoResponeseType(r.ProtoConfig.c_req_heart)){var y=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_heart,g);f.ServerTime.setServerTime(1e3*y.getServerTime())}else r.ProtoConfig.getProtoResponeseType(r.ProtoConfig.c_req_role_info),l.default.instance.hideLoadingIcon(),o.EventManager.instance.dispatch(n.CommonEvent.Event_SocketRespMsg,p,g)},e.prototype.closeSocket=function(e){void 0===e&&(e=!0),this.isConnected=!1,this.isLogin=!1,this.isReconnecting=e,this.isReconnecting&&(_.GameConst.isFirstInit=!1),this.socket.readyState!=a.GameWebSocketStatus.CLOSED&&(this.socket.close(),this.socket=null,this.init())},e}();i.default=b,cc._RF.pop()},{"../game/config/GameConfig":"GameConfig","../game/config/GameConst":"GameConst","../game/config/ViewConfig":"ViewConfig","../game/event/CommonEvent":"CommonEvent","../game/manager/MonsterManager":"MonsterManager","../game/model/ServerTime":"ServerTime","../game/network/SocketClient":"SocketClient","../game/sdk/FeiYouSdkManager":"FeiYouSdkManager","./DateUtil":"DateUtil","./EventManager":"EventManager","./GameWebSocket":"GameWebSocket","./GlobalConfig":"GlobalConfig","./Logger":"Logger","./ProtoConfig":"ProtoConfig","./ProtoUtils":"ProtoUtils","./RandomUtil":"RandomUtil","./SocketRequestData":"SocketRequestData","./UIManager":"UIManager"}],GameUIView:[function(e,t,i){"use strict";cc._RF.push(t,"5a783zfCzRA37Tyy1cagLfF","GameUIView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/UIManager"),c=e("../../engine/VersionManager"),l=e("../../engine/ViewBase"),d=e("../config/ColorConfig"),f=e("../config/GameConst"),g=e("../config/HeroConfig"),h=e("../config/ITemsConfig"),u=e("../config/ViewConfig"),p=e("../event/CommonEvent"),m=e("../manager/PvpManager"),C=e("../manager/RedPointManager"),_=e("../model/ActivityOpenModel"),v=e("../model/AppDownloadModel"),y=e("../model/ExoticExplorationModel"),b=e("../model/FangShiModel"),I=e("../model/GuideModel"),M=e("../model/InvitationModel"),w=e("../model/ItemInfoModel"),k=e("../model/RedDotModel"),S=e("../model/RoleInfoModel"),P=e("../model/XianshilibaoModel"),E=e("../network/SocketClient"),L=e("../prefab/GameManager"),T=e("../prefab/RedPointPrefab"),R=e("../utils/MenuIconRedPointIdMapping"),N=e("../utils/MusicHelper"),B=e("../utils/UIHelper"),A=e("./ActivityView"),G=e("./Discount/DisCountModel"),x=e("./FangShopView"),O=e("./guild/GuildView"),V=e("./MoreMenuView"),j=e("./Roles/BagView"),D=e("./shengong/ShenGongView"),F=cc._decorator,H=F.ccclass,U=F.property;(function(e){e[e.Battle=0]="Battle",e[e.Bag=1]="Bag",e[e.FangShi=2]="FangShi",e[e.Activity=3]="Activity"})(i.TabType||(i.TabType={}));var W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topResourcePrefab=null,t.gameViewPrefab=null,t.bagViewPrefab=null,t.fangshiPrefab=null,t.guildPrefab=null,t.shenGongPrefab=null,t.shenGongView=null,t.activeuplsit=[],t.Listening=!1,t}var i;return n(t,e),i=t,Object.defineProperty(t.prototype,"lastButNot4CurrSelect",{get:function(){return this._lastButNot4CurrSelect},set:function(e){4!==e&&(this._lastButNot4CurrSelect=e)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.pkNode=this.getChild(this.node,"view/pkNode"),this.pkNode.active=!1,E.default.s_req_skytower_info()},t.prototype.onEnable=function(){this.pkNode.active=!1,r.default.instance.closeView(u.default.gameView.LoadingTipView),a.EventManager.instance.on(p.CommonEvent.Event_Pvp_start,this.onPvpStart,this),a.EventManager.instance.on(p.CommonEvent.Event_Pvp_End,this.onPvpEnd,this),a.EventManager.instance.on(p.CommonEvent.Event_JumpToSkillEffectView,this.jumptoBagTab,this),a.EventManager.instance.on(p.CommonEvent.Event_JumpToFangshi,this.jumptoFangshi,this),a.EventManager.instance.on(p.CommonEvent.Event_JumpSettingView,this.jumptoDuiSetting,this),a.EventManager.instance.on(p.CommonEvent.Event_SHOW_GIFT,this.showGiftClock,this),a.EventManager.instance.on(p.CommonEvent.Event_Show_Fangshi_Gift_RedDot,this.showFangshiZhenBaoRedDot,this),a.EventManager.instance.on(p.CommonEvent.Event_Hide_Fangshi_Gift_RedDot,this.hideFangshiZhenBaoRedDot,this),a.EventManager.instance.on(p.CommonEvent.Event_GameUIVIew_Tab_Switch,this.onSelectBtn,this),a.EventManager.instance.on(p.CommonEvent.Event_JumpToView,this.jumptoView,this),a.EventManager.instance.on(p.CommonEvent.Event_menu_close,this.menuClosedCallback,this),a.EventManager.instance.on(p.CommonEvent.Event_JumpToGuild,this.doActionGuild,this),a.EventManager.instance.on(p.CommonEvent.Event_JumpToGuildPvP,this.doActionGuildPvP,this),a.EventManager.instance.on(p.CommonEvent.Event_ActivityStatus,this.initPro,this),a.EventManager.instance.on(p.CommonEvent.Event_addMoreMenuShow,this.refashMoreMenuRedPoint,this),a.EventManager.instance.on(p.CommonEvent.Event_TuJian_Active,this.handlerTuJian,this),a.EventManager.instance.on(p.CommonEvent.Event_ShenGong,this.handlerShenGong,this),a.EventManager.instance.on(p.CommonEvent.Event_WxZhuanduanTypeChange,this.zhuanduanTypeChange,this),a.EventManager.instance.on(p.CommonEvent.Event_RoleLevelUp,this.userInfo,this)},t.prototype.start=function(){this.checkOffline()},t.prototype.update=function(){S.default.instance&&(S.default.instance.checkFangYuGift(),S.default.instance.checkJiNengGift(),S.default.instance.checkQunGongGift())},t.prototype.initPro=function(){var e=this,t=_.default.modelList;s.Logger.log("ActivityOpenModel.modelList===",_.default.modelList),t.forEach(function(t){if(1==t.status)switch(t.activityId){case 25:E.default.s_get_puzzle_info();break;case 27:E.default.s_req_consumer_info();break;case 28:case 29:E.default.s_req_recharge_info();break;case 30:E.default.s_merge_consumer_info();break;case 37:case 38:M.InvitationModel.s_invitation_info(),e.addScheduleActivity(38,function(){M.InvitationModel.s_invitation_info()},300);break;case 39:y.ExoticExplorationModel.s_get_explore_info()}})},t.prototype.addScheduleActivity=function(e,t,i){this.activeuplsit[e]||(this.schedule(t,i),this.activeuplsit[e]=!0)},t.prototype.onPvpStart=function(e){e==m.PvpManager.PvpType.Pk&&(this.pkNode.active=!0)},t.prototype.onPvpEnd=function(){this.pkNode.active=!1},t.prototype.checkOffline=function(){S.default.instance&&S.default.instance.last_off_line_time>300&&S.default.instance.level>=5&&S.default.instance.off_line_exp>0&&r.default.instance.createView(u.default.gameView.OfflineGiftView)},t.prototype.onShow=function(){var e=this;(P.default.is_open==P.XianshiGiftChushihua.tanchu1&&(P.default.libaoInfoAddArr.length>0&&r.default.instance.createView(u.default.gameView.XianshilibaoInfoView,null,P.default.libaoInfoAddArr,P.default.libaoInfoAddArr[0]),P.default.is_open=P.XianshiGiftChushihua.tanchu2),N.MusicHelper.stop_bg(!0),this.view=this.node.getChildByName("view"),this.settingContainer=this.findChild(this.node,"view/settingContainer"),this.top=this.view.getChildByName("top"),this.top.childrenCount<=0)&&(cc.instantiate(this.topResourcePrefab).parent=this.top);this.refreshStatus(),this.bottom=this.view.getChildByName("bottom"),this.panel=this.bottom.getChildByName("panel"),this.nowExpNode=this.findChild(this.bottom,"expContainer/nowExpNode"),this.expWidth=this.nowExpNode.parent.width,this.txtVersion=this.getChild(this.bottom,"txtVersion",cc.Label),this.txtVersion.string=c.default.instance.nowVersion,this.txtExp=this.getChild(this.bottom,"expContainer/txtExp",cc.Label),this.gameContainer=this.findChild(this.node,"view/gameContainer"),r.default.instance.createViewByParent(u.default.gameView.game,this.gameContainer,!1,0),this.bagView=cc.instantiate(this.bagViewPrefab).getComponent(j.default),this.gameContainer.addChild(this.bagView.node),this.bagView.node.active=!1,this.bagView.onShow(),this.fangshiView=cc.instantiate(this.fangshiPrefab).getComponent(x.default),this.gameContainer.addChild(this.fangshiView.node),this.fangshiView.node.active=!1,this.fangshiView.onShow(),this.guildView=cc.instantiate(this.guildPrefab).getComponent(O.GuildView),this.gameContainer.addChild(this.guildView.node),this.guildView.node.active=!1,this.guildView.onShow(),this.moreMenuView=this.findChild(this.node,"view/bottom/panel/4/moreMenuView").getComponent(V.default),this.moreMenuView.node.active=!1;for(var t=0;t<this.panel.childrenCount;t++)this.onAddEvent(this.panel.children[t],this.onSelectBtn.bind(this,t));this.lastButNot4CurrSelect=this.currSelect=0,this.panel.children[this.currSelect].color=d.ColorConfig.YellowColor,this.onUpdateInfo(),a.EventManager.instance.on("FEATURE_BATTLE",function(e){I.GuideModel.dispatchTounchEndEvent(this.panel.children[0],e)}.bind(this),this,!0),a.EventManager.instance.on("FEATURE_ROLE",function(e){I.GuideModel.dispatchTounchEndEvent(this.panel.children[1],e)}.bind(this),this,!0),a.EventManager.instance.on("FEATURE_WF",function(e){I.GuideModel.dispatchTounchEndEvent(this.panel.children[4],e)}.bind(this),this,!0),a.EventManager.instance.on("FEATURE_FANGSHI",function(e){I.GuideModel.dispatchTounchEndEvent(this.panel.children[2],e)}.bind(this),this,!0),S.default.instance.getCanShowClock()&&this.showGiftClock(),this.showFangshiZhenBaoRedDot(),this.scheduleOnce(function(){e.checkRedPoint(),I.GuideModel.instance.checkGuide()},.5)},t.prototype.refreshStatus=function(){G.default.updateHongDian()?k.default.isXianShi=!0:k.default.isXianShi=!1,a.EventManager.instance.dispatch(p.CommonEvent.Event_has_reward),s.Logger.log("hadRewardRefresh3")},t.prototype.showGiftClock=function(){this.findChild(this.node,"view/bottom/panel/1/btn_showGift").active=!0},t.prototype.refashMoreMenuRedPoint=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var o=e[i],a=R.MenuIconRedPointIdMapping.getRedPointIdArrByFunctionId(o);t=t.concat(a)}this.findChild(this.panel,"4/RedPointPrefab").getComponent(T.default).addRedPointIdList(t)},t.prototype.onUserInfoRefresh=function(){this.onUpdateInfo()},t.prototype.onUpdateInfo=function(){var e=S.default.instance.getExp(),t=g.HeroConfig.getMaxExp(S.default.instance.occupation,S.default.instance.level);this.txtExp.string=e+"/"+t,this.nowExpNode.width=Math.floor(this.expWidth*(e/t)),this.nowExpNode.width>=this.expWidth&&(this.nowExpNode.width=this.expWidth)},t.prototype.menuClosedCallback=function(){this.onSelectBtn(this.lastButNot4CurrSelect)},t.prototype.jumptoView=function(e){this.onSelectBtn(e)},t.prototype.jumptoBagTab=function(){this.onSelectBtn(1)},t.prototype.jumptoFangshi=function(){this.onSelectBtn(2)},t.prototype.jumptoDuiSetting=function(){this.onSelectBtn(0)},t.prototype.checkRedPoint=function(e){var t=new Array;1==e||void 0==e?(t.push(C.RedPointId.Recycle),t.push(C.RedPointId.Skill),t.push(C.RedPointId.JinJie),t.push(C.RedPointId.shenbin),t.push(C.RedPointId.shenbin2),t.push(C.RedPointId.shenbinSkill),t.push(C.RedPointId.Tujian),t.push(C.RedPointId.Star)):3==e||void 0==e?(t.push(C.RedPointId.Activity_mafa),t.push(C.RedPointId.ChargeGift),t.push(C.RedPointId.Activity_chengba_marfa),t.push(C.RedPointId.fastKill),t.push(C.RedPointId.choujianMubiao),t.push(C.RedPointId.shenbinSkill)):4!=e&&void 0!=e||(t.push(C.RedPointId.BaGua),t.push(C.RedPointId.BaGua_fengmogu)),t.forEach(function(e){C.default.getInstance().checkRedPointById(e)})},t.prototype.onSelectBtn=function(e,t){if(void 0===t&&(t=!1),N.MusicHelper.play_click(),t||this.currSelect!=e||4===e){r.default.instance.closeView(u.default.gameView.BigBossView),this.lastButNot4CurrSelect=this.currSelect=e,L.default.instance.tabIndex=this.lastButNot4CurrSelect;for(var n=0;n<this.panel.childrenCount;n++)this.panel.children[n].color=d.ColorConfig.WhiteColor;e<this.panel.children.length?this.panel.children[e].color=d.ColorConfig.YellowColor:this.panel.children[4].color=d.ColorConfig.YellowColor,i.tabIndex=e,a.EventManager.instance.dispatch("GUIDE_CLOSE");var o=cc.find("GameView/view",this.gameContainer);if(o&&(o.active=0==e||4==e),0==e)this.bagView.node.active=!1,this.fangshiView.node.active=!1,this.activityView&&(this.activityView.node.active=!1),this.moreMenuView.node.active=!1,this.guildView.node.active=!1,this.shenGongView&&(this.shenGongView.node.active=!1);else if(1==e){if(this.bagView.node.active=!0,this.fangshiView.node.active=!1,this.activityView&&(this.activityView.node.active=!1),this.moreMenuView.node.active=!1,this.guildView.node.active=!1,this.shenGongView&&(this.shenGongView.node.active=!1),this.findChild(this.node,"view/bottom/panel/1/btn_showGift").active)if(this.findChild(this.node,"view/bottom/panel/1/btn_showGift").active=!1,S.default.instance.showGift==S.default.showFangyu){var s=w.default.createDingZhiEquip("D000004");r.default.instance.createView(u.default.gameView.GiftClockTip,null,s,function(){var e=w.default.getItem("I6004");r.default.instance.createView(u.default.gameView.ZuiQiangFangYuGiftView,null,e)})}else if(S.default.instance.showGift==S.default.showJiNeng){s=w.default.createDingZhiEquip("D000005");r.default.instance.createView(u.default.gameView.GiftClockTip,null,s,function(){var e=w.default.getItem("I6005");r.default.instance.createView(u.default.gameView.ZuiQiangJiNengGiftView,null,e)})}else if(S.default.instance.showGift==S.default.showQungong){var c=h.ITemsConfig.getITemsConfigById("I6008");s=w.default.create(f.GameConst.ITEM_KIND.ITEM,"I6008",1,c.quality);r.default.instance.createView(u.default.gameView.GiftClockTip,null,s,function(){var e=w.default.getItem("I6008");r.default.instance.createView(u.default.gameView.ZuiQiangQunGongGiftView,null,e)})}}else 2==e?(this.fangshiView.node.active=!0,this.bagView.node.active=!1,this.activityView&&(this.activityView.node.active=!1),this.moreMenuView.node.active=!1,this.guildView.node.active=!1,this.shenGongView&&(this.shenGongView.node.active=!1),E.default.s_seq_fangbuy_info()):3==e?(this.bagView.node.active=!1,this.fangshiView.node.active=!1,this.openActivityView(),this.moreMenuView.node.active=!1,this.guildView.node.active=!1,this.shenGongView&&(this.shenGongView.node.active=!1)):4==e&&(this.moreMenuView.node.active=!this.moreMenuView.node.active,this.moreMenuView.node.active||(this.panel.children[this.lastButNot4CurrSelect].color=d.ColorConfig.YellowColor,this.panel.children[4].color=d.ColorConfig.WhiteColor),this.menuContextAction(!0));this.checkRedPoint(e)}},t.prototype.openActivityView=function(){if(this.activityView)this.activityView.node.active=!0;else{var e=this;cc.loader.loadRes(u.default.gameView.ActivityView,cc.Prefab,function(t,i){t?console.log("prefab error url="+u.default.gameView.ActivityView):(e.activityView=cc.instantiate(i).getComponent(A.default),e.gameContainer.addChild(e.activityView.node),e.activityView.node.active=!0,e.activityView.onShow())})}},t.prototype.menuContextAction=function(e){},t.prototype.showFangshiZhenBaoRedDot=function(){b.default.getNumById(4001)>0&&k.default.getModelByKey(k.default.fangshiFangyuDot).isShow&&(this.findChild(this.bottom,"panel/2/ui_hongdian").active=!0),b.default.getNumById(5001)>0&&k.default.getModelByKey(k.default.fangshiJinengDot).isShow&&(this.findChild(this.bottom,"panel/2/ui_hongdian").active=!0),(b.default.getNumById(5002)>0||b.default.getNumById(5003)>0||b.default.getNumById(5004)>0)&&k.default.getModelByKey(k.default.fangshiqungongDot).isShow&&(this.findChild(this.bottom,"panel/2/ui_hongdian").active=!0)},t.prototype.hideFangshiZhenBaoRedDot=function(){this.findChild(this.bottom,"panel/2/ui_hongdian").active=!1},t.prototype.onClickBuy=function(){N.MusicHelper.play_click(),B.UIHelper.showCoinNoEnough()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.doActionGuild=function(){this.bagView.node.active=!1,this.fangshiView.node.active=!1,this.activityView&&(this.activityView.node.active=!1),this.moreMenuView.node.active=!1,this.guildView.node.active=!0,this.lastButNot4CurrSelect=5,this.currSelect=5,L.default.instance.tabIndex=this.lastButNot4CurrSelect,i.tabIndex=5,this.guildView.onToggleTable()},t.prototype.doActionGuildPvP=function(){this.bagView.node.active=!1,this.fangshiView.node.active=!1,this.activityView&&(this.activityView.node.active=!1),this.moreMenuView.node.active=!1,this.guildView.node.active=!0,this.lastButNot4CurrSelect=5,this.currSelect=5,L.default.instance.tabIndex=this.lastButNot4CurrSelect,i.tabIndex=5,this.guildView.onToggleTable(3)},t.prototype.zhuanduanTypeChange=function(e){v.AppDownloadModel.instance.useDownAct()&&(v.AppDownloadModel.instance.getShowType()===v.AppDownloadShow_type.download&&v.AppDownloadModel.getTodayShowDownload()?S.default.instance.level>2?r.default.instance.createView(u.default.gameView.ZhuanDuanRemindDialog):this.Listening=!0:v.AppDownloadModel.instance.getShowType()===v.AppDownloadShow_type.reward&&(S.default.instance.level>2?r.default.instance.createView(u.default.gameView.ZhuanDuaJiangli):this.Listening=!0))},t.prototype.userInfo=function(e){this.Listening&&e>=2&&(v.AppDownloadModel.instance.getShowType()===v.AppDownloadShow_type.download&&v.AppDownloadModel.getTodayShowDownload()?(r.default.instance.createView(u.default.gameView.ZhuanDuanRemindDialog),this.Listening=!1):v.AppDownloadModel.instance.getShowType()===v.AppDownloadShow_type.reward&&(r.default.instance.createView(u.default.gameView.ZhuanDuaJiangli),this.Listening=!1))},t.prototype.handlerTuJian=function(e){e?(this.bagView.node.active=!1,this.fangshiView.node.active=!1,this.activityView&&(this.activityView.node.active=!1),this.moreMenuView.node.active=!1,this.guildView.node.active=!1):this.onSelectBtn(this.currSelect,!0)},t.prototype.handlerShenGong=function(e){this.shenGongView||(this.shenGongView=cc.instantiate(this.shenGongPrefab).getComponent(D.default),this.shenGongView.node.parent=this.gameContainer),this.shenGongView.node.active=e},t.tabIndex=0,o([U(cc.Prefab)],t.prototype,"topResourcePrefab",void 0),o([U(cc.Prefab)],t.prototype,"gameViewPrefab",void 0),o([U(cc.Prefab)],t.prototype,"bagViewPrefab",void 0),o([U(cc.Prefab)],t.prototype,"fangshiPrefab",void 0),o([U(cc.Prefab)],t.prototype,"guildPrefab",void 0),o([U(cc.Prefab)],t.prototype,"shenGongPrefab",void 0),t=i=o([H],t)}(l.default);i.default=W,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/VersionManager":"VersionManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/HeroConfig":"HeroConfig","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","../manager/PvpManager":"PvpManager","../manager/RedPointManager":"RedPointManager","../model/ActivityOpenModel":"ActivityOpenModel","../model/AppDownloadModel":"AppDownloadModel","../model/ExoticExplorationModel":"ExoticExplorationModel","../model/FangShiModel":"FangShiModel","../model/GuideModel":"GuideModel","../model/InvitationModel":"InvitationModel","../model/ItemInfoModel":"ItemInfoModel","../model/RedDotModel":"RedDotModel","../model/RoleInfoModel":"RoleInfoModel","../model/XianshilibaoModel":"XianshilibaoModel","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","../prefab/RedPointPrefab":"RedPointPrefab","../utils/MenuIconRedPointIdMapping":"MenuIconRedPointIdMapping","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","./ActivityView":"ActivityView","./Discount/DisCountModel":"DisCountModel","./FangShopView":"FangShopView","./MoreMenuView":"MoreMenuView","./Roles/BagView":"BagView","./guild/GuildView":"GuildView","./shengong/ShenGongView":"ShenGongView"}],GameView:[function(e,t,i){"use strict";cc._RF.push(t,"ed4996sWY5HMqHV3s3DI8AD","GameView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/MathUtils"),l=e("../../engine/ProtoConfig"),d=e("../../engine/ProtoUtils"),f=e("../../engine/RandomUtil"),g=e("../../engine/UIManager"),h=e("../../engine/ViewBase"),u=e("../base/NodePoolManager"),p=e("../config/ActivitytimeConfig"),m=e("../config/GameConfig"),C=e("../config/GameConst"),_=e("../config/MapConfig"),v=e("../config/MonsterConfig"),y=e("../config/ViewConfig"),b=e("../config/WordConfig"),I=e("../event/CommonEvent"),M=e("../manager/activity/ActivityManager"),w=e("../manager/MapManager"),k=e("../manager/MonsterManager"),S=e("../manager/PvpManager"),P=e("../manager/ScoreManager"),E=e("../manager/SkillEffectManager"),L=e("../manager/SummonedManager"),T=e("../manager/TianGuanManager"),R=e("../model/ActivityOpenModel"),N=e("../model/AppDownloadModel"),B=e("../model/BossModel"),A=e("../model/CostumeModel"),G=e("../model/FuGuiGameModel"),x=e("../model/Grid"),O=e("../model/GuildModel"),V=e("../model/HolidayMonsterModel"),j=e("../model/ItemInfoModel"),D=e("../model/MapStatisticsModel"),F=e("../model/MineModel"),H=e("../model/PrivilegeModel"),U=e("../model/RoleInfoModel"),W=e("../model/ServerTime"),q=e("../model/TaskModel"),z=e("../network/HttpHelper"),J=e("../network/SocketClient"),Y=e("../prefab/GameManager"),Z=e("../prefab/RolePrefab"),K=e("../sdk/LoongCheerManager"),X=e("../sdk/STUtils"),Q=e("../serverFight/ServerFightView"),$=e("../utils/MusicHelper"),ee=e("./CityView"),te=e("./RedPacket/packetModel"),ie=e("./RedPacket/packetRankModel"),ne=cc._decorator,oe=ne.ccclass,ae=ne.property,se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tempPrefabItemNode=null,t.gridPositionList=[],t.allRolePrefabList=[],t.allGridList=[],t.maxBossProgressLength=162,t.myRoleGridRow=-1,t.myRoleGridCol=-1,t.rolePool=new cc.NodePool,t.cityPrefab=null,t.bgList=[],t.frontBgList=[],t.fieldGrid=cc.v2(-263,183),t.pkGrid=cc.v2(-263,135),t.tianguanGrid=cc.v2(-263,16),t.isTweening=!1,t.serverFightPrefab=null,t.serverFightViewNode=null,t.weiDuanFuli=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.serverFightView=cc.instantiate(this.serverFightPrefab),this.serverFightViewNode.addChild(this.serverFightView),N.AppDownloadModel.instance.getRewardInfo(),this.weiDuanFuli.active=!1},t.prototype.onEnable=function(){s.EventManager.instance.on(I.CommonEvent.Event_FuGuiGameModel,this.refreshFuGui,this),s.EventManager.instance.on(I.CommonEvent.Event_Item_update,this.refreshBaoZhuNum,this),s.EventManager.instance.on(C.EVENT_NAME.REFRESH_PRIVILEGE,this.refreshPrivilege,this),s.EventManager.instance.on(I.CommonEvent.Event_RoleRevive,this.onMyReview,this),s.EventManager.instance.on(I.CommonEvent.Event_SwitchMapStart,this.switchMapStart,this),s.EventManager.instance.on(I.CommonEvent.Event_SwitchMapSuc,this.switchMapSuc,this),s.EventManager.instance.on(B.BossModel.Event_Boss_Init,this.initBossClient,this),s.EventManager.instance.on(I.CommonEvent.Event_HolidayMonster,this.initBossClient,this),s.EventManager.instance.on(I.CommonEvent.Event_Redenvelope_State,this.refreshPacket,this),s.EventManager.instance.on(I.CommonEvent.Event_ActivityStatus,this.refreshPacket,this),s.EventManager.instance.on(I.CommonEvent.Event_Battlefield_End,this.handlerEnd,this),s.EventManager.instance.on(I.CommonEvent.Event_Task_UP,this.taskup,this),s.EventManager.instance.on(I.CommonEvent.Event_WxZhuanduanTypeChange,this.zhuanduanType,this),k.default.instance.init(),M.default.instance.init(),Y.default.instance.init(this),S.PvpManager.instance.init(this),T.TianGuanManager.instance.init(this),this.schedule(this.refreshBossHp.bind(this),1),this.refreshBaoZhuNum()},t.prototype.reInitGridPosition=function(e){this.allGridList=[];for(var t=0;t<w.default.instance.gridRow;t++){this.gridPositionList[t]=[];for(var i=0;i<w.default.instance.gridCol;i++){this.allGridList.push(x.default.init(t,i));var n=void 0,o=void 0;e==_.MapConfig.MAP_TYPE.Field?(n=this.fieldGrid.x+i*this.tempPrefabItemNode.width,o=this.fieldGrid.y-t*this.tempPrefabItemNode.height):e==_.MapConfig.MAP_TYPE.Tianguan?(n=this.tianguanGrid.x+i*this.tempPrefabItemNode.width,o=this.tianguanGrid.y-t*this.tempPrefabItemNode.height):(n=this.pkGrid.x+i*this.tempPrefabItemNode.width,o=this.pkGrid.y-t*this.tempPrefabItemNode.height),this.gridPositionList[t][i]=cc.v2(n,o)}}},t.prototype.onShow=function(){var e=this;$.MusicHelper.stop_bg(),J.default.s_activity_redenvelope_record(),J.default.s_get_activity_info(),J.default.s_get_holidayMonster_info();for(var t=0;t<_.MapConfig.Max_World;t++)this.bgList[t]=this.findChild(this.node,"view/game/panel/bg"+t),this.frontBgList[t]=this.findChild(this.node,"view/game/mapmask/minimap/frontBg"+t);this.cityView=cc.instantiate(this.cityPrefab).getComponent(ee.default),this.node.addChild(this.cityView.node),this.cityView.node.active=!1,this.cityView.onShow(),k.default.instance.init(),E.default.instance.init(this.findChild(this.node,"game/skill")),this.tempPrefabItemNode=this.findChild(this.node,"game/roleContainer/item"),this.bossNode=this.findChild(this.node,"boss"),this.bossNode.active=!1,this.bossRefresh=this.findChild(this.node,"boss/bossRefresh"),this.bossRefreshProgress=this.findChild(this.node,"boss/bossRefresh/bossRefreshProgress"),this.bossRevive=this.findChild(this.node,"boss/bossRevive"),this.bossReviveProgress=this.findChild(this.node,"boss/bossRevive/bossReviveProgress"),this.txtBossLeftTime=this.getChild(this.node,"boss/bossRevive/txtBossLeftTime",cc.Label),this.txtRecover=this.findChild(this.node,"game/txt/txtRecover").getComponent(cc.Label),this.txtRecover.node.active=!1,this.txtGuai=this.findChild(this.node,"game/txt/txtGuai").getComponent(cc.Label),this.txtGuai.node.active=!1,this.txtJueSe=this.findChild(this.node,"game/txt/txtJueSe").getComponent(cc.Label),this.txtJueSe.node.active=!1,this.txtQieGe=this.findChild(this.node,"game/txt/txtQieGe").getComponent(cc.Label),this.txtQieGe.node.active=!1,this.btnTaskComplete=this.findChild(this.node,"taskview/taskbtn/btnTaskComplete"),this.ani_task_node=this.findChild(this.node,"taskview/taskani_node"),this.ani_task=this.ani_task_node.getComponent(cc.Animation),this.btnCompoleteFreshEff(),this.btnTaskComplete&&this.onAddEvent(this.btnTaskComplete,function(){q.TaskModel.s_task_reward()}),this.activeTask=this.findChild(this.node,"activeTask"),this.onAddEvent(this.activeTask,function(){g.default.instance.createView(y.default.gameView.activeTaskView)}),this.txtYazhi=this.findChild(this.node,"game/txt/txtYazhi").getComponent(cc.Label),this.txtYazhi.node.active=!1,this.txtXinyun=this.findChild(this.node,"game/txt/txtXinyun").getComponent(cc.Label),this.txtXinyun.node.active=!1,this.txtSpecial=this.findChild(this.node,"game/txt/txtSpecial").getComponent(cc.Label),this.txtSpecial.node.active=!1,this.minimap=this.findChild(this.node,"view/game/mapmask/minimap"),this.minimap.active=!0,this.dongrukou=this.findChild(this.node,"view/game/mapmask/dongrukou"),this.dongrukou.y=208.789,this.dongrukou.active=!1,this.dianti=this.findChild(this.node,"view/game/mapmask/minePanel/2/dianti"),this.dianti.active=!1,this.minePanel=this.findChild(this.node,"view/game/mapmask/minePanel"),this.pkView=this.findChild(this.node,"pkView"),this.pkEffectNode=this.findChild(this.node,"pkEffectNode"),this.pkView.active=!1,this.pkEffectNode.active=!1,this.redPacket=this.findChild(this.node,"game/redPacket"),this.redPacket.active=!1,this.guildredPacket=this.findChild(this.node,"game/guildredPacket"),this.guildredPacket.active=!1,P.default.instance.init([this.txtRecover,this.txtJueSe,this.txtGuai,this.txtQieGe,this.txtYazhi,this.txtXinyun]),P.default.instance.init([this.txtRecover,this.txtJueSe,this.txtGuai,this.txtQieGe,this.txtYazhi,this.txtXinyun,this.txtSpecial]),this.tempPrefabItemNode.active=!1,this.reInitGridPosition(_.MapConfig.MAP_TYPE.Field),this.switchMapSuc(),this.refreshPacket(),this.onAddEvent(this.findChild(this.node,"privilege/toStrongerEnter"),this.onClickToStrongerEnter.bind(this)),this.onAddEvent(this.findChild(this.node,"privilege/huishouNode"),this.onClickHuiShouPrivilege.bind(this)),this.onAddEvent(this.findChild(this.node,"privilege/zhanshenNode"),this.onClickZhanShenPrivilege.bind(this)),this.onAddEvent(this.findChild(this.node,"privilege/autoRobotBtn"),this.onClickAutoRobot.bind(this)),this.onAddEvent(this.findChild(this.node,"boss/bossRevive/speedUp"),this.onClickBossSpeedUp.bind(this)),this.onAddEvent(this.redPacket,this.onClickPacketShow.bind(this)),this.onAddEvent(this.guildredPacket,this.onClickGuildPacketShow.bind(this)),this.linhuntip=this.findChild(this.node,"boss/bossRefresh/linhuntip"),this.linhuntip.active=!1,this.onAddEvent(this.linhuntip,this.hideLinhun.bind(this)),this.onAddEvent(this.findChild(this.node,"boss/bossRefresh/linhunBtn"),this.showLinhun.bind(this)),this.onAddEvent(this.findChild(this.node,"taskview/taskbtn"),function(){e.btnTaskComplete.active?q.TaskModel.s_task_reward():q.TaskModel.instance.ShowTaskView()}),this.findChild(this.node,"taskview").active=!!q.TaskModel.instance.isShow(),q.TaskModel.instance.dispatchUpGameTask(),s.EventManager.instance.on(I.CommonEvent.Event_Change_MineClass,this.refreshMine,this),s.EventManager.instance.on(I.CommonEvent.Event_SERVER_FIGHT,this.onEventServerFight,this),s.EventManager.instance.on(I.CommonEvent.Event_CLIENT_FIGHT,this.onEventClientFight,this),s.EventManager.instance.on(I.CommonEvent.Event_Guild_Redenvelope_Info,this.onGuildPacket,this),s.EventManager.instance.on(I.CommonEvent.Event_Task_Sucess_Finish,this.serverRefashTask,this),J.default.s_all_task_info(),J.default.s_task_liveness_info(),J.default.s_get_mine_allow(),J.default.s_function_open_info(),J.default.s_send_world_list(),O.GuildModel.s_guild_redenvelope_info(),A.CostumeModel.s_personalize_info()},t.prototype.btnCompoleteFreshEff=function(){this.btnTaskComplete&&cc.tween(this.btnTaskComplete).repeatForever(cc.tween().to(.3,{scaleX:1,scaleY:1}).to(.3,{scaleX:.8,scaleY:.8})).start()},t.prototype.serverRefashTask=function(e){q.TaskModel.instance.ShowTaskView()},t.prototype.onGuildPacket=function(){var e=0;O.GuildModel.instance.guildTRedenvelopeInfo.forEach(function(t){0==t.received&&++e}),this.guildredPacket.active=e>0,this.guildredPacket.getChildByName("num").getComponent(cc.Label).string=e.toString()},t.prototype.onClickToStrongerEnter=function(){g.default.instance.createView(y.default.gameView.toStrongerPanel)},t.prototype.onClickGuildPacketShow=function(){g.default.instance.createView(y.default.gameView.guildHongBao,null,1)},t.prototype.taskup=function(e,t){if(e){this.findChild(this.node,"taskview").active=!this.minePanel.active;var i=this.findChild(this.node,"taskview/taskbtn/tasklabel");i.getComponent(cc.RichText).string=e,this.btnTaskComplete&&(2==t?(this.btnTaskComplete.active=!0,this.btnTaskComplete.x=i.width+i.x+20,this.ani_task_node.active=!0,this.ani_task.play("taskFinishani",0)):(this.btnTaskComplete.active=!1,this.ani_task_node.active=!1,this.ani_task.stop()))}else this.findChild(this.node,"taskview").active=!1,this.ani_task_node.active=!1,this.ani_task.stop()},t.prototype.showLinhun=function(){this.linhuntip.active=!0,this.refreshLinhun()},t.prototype.refreshLinhun=function(){if(_.MapConfig.curMapConfig.boss){var e=v.MonsterConfig.getMonsterConfigById(_.MapConfig.curMapConfig.boss.monsterid);e.suppress<9999?(this.findChild(this.node,"boss/bossRefresh/linhuntip/tip/des").active=!0,this.findChild(this.node,"boss/bossRefresh/linhuntip/tip/des/level").getComponent(cc.Label).string=e.suppress+"",this.findChild(this.node,"boss/bossRefresh/linhuntip/tip/no").active=!1,U.default.instance.getSuppress()>e.suppress?(this.findChild(this.node,"boss/bossRefresh/linhunBtn/icom_linhun_01").active=!1,this.findChild(this.node,"boss/bossRefresh/linhunBtn/icom_linhun").active=!0):(this.findChild(this.node,"boss/bossRefresh/linhunBtn/icom_linhun_01").active=!0,this.findChild(this.node,"boss/bossRefresh/linhunBtn/icom_linhun").active=!1)):(this.findChild(this.node,"boss/bossRefresh/linhuntip/tip/des").active=!1,this.findChild(this.node,"boss/bossRefresh/linhuntip/tip/no").active=!0)}},t.prototype.hideLinhun=function(){this.linhuntip.active=!1},t.prototype.refreshWorld=function(){for(var e=0;e<this.bgList.length;e++)e==_.MapConfig.curMapConfig.world-1?(this.bgList[e].active=!0,this.frontBgList[e].zIndex=10,this.frontBgList[e].active=!0):(this.bgList[e].active=!1,this.frontBgList[e].active=!1)},t.prototype.refreshPacket=function(){var e=R.default.getOpenActivityModel(te.PacketModel.ActivityId);r.Logger.log("PacketModel.state========",te.PacketModel.state,e,R.default.modelList),this.redPacket.active=!1,e&&1==e.status&&(0!=te.PacketModel.state&&2!=te.PacketModel.state||(this.redPacket.active=!0,this.redPacket.getComponent(cc.Animation).play("packet_open")))},t.prototype.onClickPacketShow=function(){r.Logger.log("PacketRankModel.curRecv========",ie.default.curRecv,ie.default),2==te.PacketModel.state?g.default.instance.createView(y.default.gameView.PacketRank):g.default.instance.createView(y.default.gameView.RedPacket)},t.prototype.onClickHuiShouPrivilege=function(){X.default.stStatistics(K.StatisticsType.afEvent,"act_access_sellprivilege"),X.default.stStatistics(K.StatisticsType.firebaseEvent,"act_access_sellprivilege"),g.default.instance.createView(y.default.gameView.PrivilegeRecovery)},t.prototype.onClickZhanShenPrivilege=function(){X.default.stStatistics(K.StatisticsType.afEvent,"act_access_warprivilege"),X.default.stStatistics(K.StatisticsType.firebaseEvent,"act_access_warprivilege"),g.default.instance.createView(y.default.gameView.PrivilegeFightGodView)},t.prototype.onClickAutoRobot=function(){X.default.stStatistics(K.StatisticsType.afEvent,"act_access_afkhelper"),X.default.stStatistics(K.StatisticsType.firebaseEvent,"act_access_afkhelper"),g.default.instance.createView(y.default.gameView.AutoRobotSettingView)},t.prototype.onClickBossSpeedUp=function(){g.default.instance.createView(y.default.gameView.BossSpeedUpView)},t.prototype.switchMapStart=function(){this.clearFight(),this.hideLinhun()},t.prototype.clearFight=function(){Y.default.instance.isPause=!0;for(var e=this.allRolePrefabList.length-1;e>=0;e--)this.allRolePrefabList[e]&&this.allRolePrefabList[e].node&&(this.allRolePrefabList[e].nowRoleType==Z.default.RoleType.Summoned&&this.myRolePrefab&&!this.myRolePrefab.isDead&&L.default.instance.summonedInfoList.push(this.allRolePrefabList[e].roleInfo),this.allRolePrefabList[e].node.destroy(),this.allRolePrefabList.splice(e,1));this.myRolePrefab&&this.myRolePrefab.node&&this.myRolePrefab.node.destroy(),this.myRolePrefab=null,this.allRolePrefabList=[],k.default.instance.leaveMap(),L.default.instance.leaveMap(),this.bossNode.active=!1,S.PvpManager.instance.dispose()},t.prototype.switchMapSuc=function(){var e=this;if(this.clearFight(),Y.default.instance.isPause=!1,!this.isTweening){if(F.default.currMiniClass=1,this.refreshPrivilege(),D.default.instance.reInit(),this.refreshWorld(),this.myRoleGridRow=-1,this.myRoleGridCol=-1,this.myRolePrefab&&this.myRolePrefab.node&&this.myRolePrefab.node.destroy(),this.minimap.active=!0,this.minePanel.active=!1,this.findChild(this.node,"privilege").active=!0,this.findChild(this.node,"taskview").active=!!q.TaskModel.instance.isShow(),_.MapConfig.curMapConfig.type==_.MapConfig.MAP_TYPE.City)U.default.instance.revive(),J.default.s_req_set_role_hp(),L.default.instance.summonedInfoList=[],this.cityView.node.active=!0,w.default.instance.createMapAstar(),_.MapConfig.curMapConfig.mapId;else if(_.MapConfig.curMapConfig.type==_.MapConfig.MAP_TYPE.Mine)J.default.s_mine_personal_info(),w.default.instance.createMapAstar(),U.default.instance.revive(),J.default.s_req_set_role_hp(),this.cityView.node.active=!0,F.MinePersonaInfoModel.isShowTip=!0;else{if(_.MapConfig.curMapConfig.mapId==G.FuGuiGameModel.mapId&&(L.default.instance.summonedInfoList=[]),1==_.MapConfig.curMapConfig.fight_type)return;this.cityView.node.active=!1,w.default.instance.createMapAstar(),this.addMyRolePrefab(),k.default.instance.enterMap(this),L.default.instance.enterMap(this)}this.initBoss(),this.schedule(function(){e.initBossClient()},1),this.refreshMine(),this.refreshLinhun(),this.refreshBaoZhuNum()}},t.prototype.refreshMine=function(){_.MapConfig.curMapConfig.type==_.MapConfig.MAP_TYPE.Mine?1==F.default.currMiniClass?(this.minimap.active=!0,this.minePanel.active=!1):(this.minimap.active=!1,this.minePanel.active=!0):Y.default.instance.BattleType=C.BattleType.PvE},t.prototype.update=function(){Math.floor(W.ServerTime.getServerTime()/1e3-V.HolidayMonsterModel.refreshTime)>=60&&J.default.s_get_holidayMonster_info()},t.prototype.onSocketRespMsg=function(e,t){if(e==l.ProtoConfig.c_scene_obj_hp&&_.MapConfig.currFightType==_.MapConfig.FIGHTTYPE.SERVER&&_.MapConfig.curMapConfig.boss&&this.bossRefresh.active){for(var i=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_scene_obj_hp,t),n=i.getId(),o=this.serverFightView.getComponent(Q.default).serRolePrefabList,a=0;a<o.length;a++)if(n==o[a].serRoleInfoModel.id&&o[a].serRoleInfoModel.cid==_.MapConfig.curMapConfig.boss.monsterid){var s=i.getHp(),r=o[a].serRoleInfoModel.maxHp;this.bossRefreshProgress.width=s/r*this.maxBossProgressLength;break}this.bossRefreshProgress.width<=0&&(this.bossRefreshProgress.width=0),this.bossRefreshProgress.width>this.maxBossProgressLength&&(this.bossRefreshProgress.width=this.maxBossProgressLength)}},t.prototype.refreshBaoZhuNum=function(){var e=this.getChild(this.node,"boss/fireNode");(e.active=!1,_.MapConfig.curMapConfig&&_.MapConfig.curMapConfig.mapId==G.FuGuiGameModel.mapId)&&(e.active=!0,e.getChildByName("txtFireNum").getComponent(cc.Label).string=b.WordConfig.getWord(60434)+j.default.getItemAmount(G.FuGuiGameModel.getItemID())+"")},t.prototype.initBoss=function(){_.MapConfig.curMapConfig.boss?(this.bossNode.active=!0,m.GameConfig.connectServer?J.default.req_boss_fresh_time():this.initBossClient()):this.bossNode.active=!1},t.prototype.initBossClient=function(){if(_.MapConfig.curMapConfig.boss){var e=B.BossModel.getBoss(U.default.instance.mapId);if(e)if(2==v.MonsterConfig.getMonsterConfigById(e.monsterId).speedup?this.findChild(this.node,"boss/bossRevive/speedUp").active=!0:this.findChild(this.node,"boss/bossRevive/speedUp").active=!1,e.getLeftTime()<=0)this.bossRefresh.active=!0,this.bossRefresh.getChildByName("bossBloodbg1").active=!1,this.bossRefresh.getChildByName("bossBloodbg2").active=!1,this.bossRefresh.getChildByName("bossBloodbg3").active=!1,2001==e.monsterId?this.bossRefresh.getChildByName("bossBloodbg2").active=!0:e.monsterId==G.FuGuiGameModel.BossId?this.bossRefresh.getChildByName("bossBloodbg3").active=!0:this.bossRefresh.getChildByName("bossBloodbg1").active=!0,this.bossRevive.active=!1,k.default.instance.nowBoss||_.MapConfig.currFightType!=_.MapConfig.FIGHTTYPE.SERVER&&(this.bossRefreshProgress.width=this.maxBossProgressLength),2001==e.monsterId&&(1==V.HolidayMonsterModel.isActive&&1==V.HolidayMonsterModel.isInActive?this.bossRefresh.active=!0:this.bossRefresh.active=!1),e.getCanRevive()||J.default.req_boss_fresh_time(),V.HolidayMonsterModel.bossModel&&V.HolidayMonsterModel.bossModel.monsterId==e.monsterId&&V.HolidayMonsterModel.bossModel.mapId!=e.mapId&&(this.bossRefresh.active=!1,this.bossRevive.active=!1),e.monsterId==G.FuGuiGameModel.BossId&&this.refreshFuGui();else{this.bossRefresh.active=!1,this.bossRevive.active=!0,this.bossRevive.getChildByName("reviveBg1").active=!1,this.bossRevive.getChildByName("reviveBg2").active=!1,e.monsterId==G.FuGuiGameModel.BossId?this.bossRevive.getChildByName("reviveBg2").active=!0:this.bossRevive.getChildByName("reviveBg1").active=!0,2001==e.monsterId&&(1==V.HolidayMonsterModel.isActive&&1==V.HolidayMonsterModel.isInActive?this.bossRevive.active=!0:this.bossRevive.active=!1);var t=_.MapConfig.curMapConfig.boss.rebtime;H.default.hadFightGodPrivilege()&&(t=Math.floor(t/2)),this.bossReviveProgress.width=(t-e.getLeftTime())/t*this.maxBossProgressLength,this.bossReviveProgress.width<=0&&(this.bossReviveProgress.width=0),this.bossReviveProgress.width>this.maxBossProgressLength&&(this.bossReviveProgress.width=this.maxBossProgressLength),e.monsterId==G.FuGuiGameModel.BossId?this.refreshFuGui():this.txtBossLeftTime.string=a.default.formatLeftTime2(1e3*e.getLeftTime())}else this.bossRefresh.active=!1,this.bossRevive.active=!1}},t.prototype.refreshFuGui=function(){var e=p.ActivitytimeConfig.getConfigById(8);this.txtBossLeftTime.string=G.FuGuiGameModel.num+"/"+e.anger,this.bossReviveProgress.width=Math.min(G.FuGuiGameModel.num/e.anger,1)*this.maxBossProgressLength;var t=B.BossModel.getBoss(U.default.instance.mapId);r.Logger.log("refreshFuGui====",k.default.instance.nowBoss,t),t&&t.monsterId==G.FuGuiGameModel.BossId&&(k.default.instance.nowBoss?(this.bossRevive.active=!1,this.bossRefresh.active=!0):(this.bossRevive.active=!0,this.bossRefresh.active=!1))},t.prototype.refreshBossHp=function(){_.MapConfig.curMapConfig.boss&&_.MapConfig.currFightType!=_.MapConfig.FIGHTTYPE.SERVER&&(k.default.instance.nowBoss?(this.bossRefreshProgress.width=k.default.instance.nowBoss.getHp()/k.default.instance.nowBoss.getMaxHp()*this.maxBossProgressLength,this.bossRefreshProgress.width<=0&&(this.bossRefreshProgress.width=0),this.bossRefreshProgress.width>this.maxBossProgressLength&&(this.bossRefreshProgress.width=this.maxBossProgressLength)):this.initBossClient())},t.prototype.onMyReview=function(){this.addMyRolePrefab(),this.myRolePrefab.setWudi()},t.prototype.addMyRolePrefab=function(){var e=this.randomOneEmptyGrid();this.myRolePrefab=this.addRolePrefab(e),this.myRolePrefab.setRoleType(Z.default.RoleType.Role,U.default.instance)},t.prototype.randomOneEmptyGrid=function(){for(var e,t=this.getEmptyGridList(),i=0;i<t.length;i++)if(t[i].row==this.myRoleGridRow&&t[i].col==this.myRoleGridCol){e=t[i];break}return e||(e=f.default.randomItem(t)),e},t.prototype.getEmptyGridList=function(){for(var e=this.allGridList.concat(),t=0;t<this.allRolePrefabList.length;t++)for(var i=this.allRolePrefabList[t],n=e.length-1;n>=0;n--){var o=e[n];if(o.row==i.gridRow&&o.col==i.gridCol){e.splice(n,1);break}}return e.length<=0&&r.Logger.warn("getEmptyGridList error==",this.allRolePrefabList,this.allGridList,e),e},t.prototype.getRolePrefab=function(){return this.rolePool.size()>0?this.rolePool.get().getComponent(Z.default):u.default.Instance.instantiateRolePrefab().getComponent(Z.default)},t.prototype.addRolePrefab=function(e){var t=u.default.Instance.instantiateRolePrefab().getComponent(Z.default);return t.gridRow=e.row,t.gridCol=e.col,t.node.parent=this.tempPrefabItemNode.parent,t.node.active=!0,t.node.setPosition(this.gridPositionList[e.row][e.col]),this.allRolePrefabList.push(t),t},t.prototype.addSummoned=function(e,t){var i=this.addRolePrefab(e);return i.setRoleType(Z.default.RoleType.Summoned,t),i},t.prototype.addMonster=function(e,t,i,n,o){var a=this.addRolePrefab(n);return a.setRoleType(Z.default.RoleType.Monster,null,i,e,t,o),a},t.prototype.killMonster=function(e){this.releaseRolePrefab(e)},t.prototype.killSummoned=function(e){L.default.instance.gotoDead(e),this.releaseRolePrefab(e)},t.prototype.releaseRolePrefab=function(e){for(var t=this.allRolePrefabList.length-1;t>=0;t--){var i=this.allRolePrefabList[t];if(e.gridRow==i.gridRow&&e.gridCol==i.gridCol){this.allRolePrefabList.splice(t,1);break}}e&&e.node&&e.node.destroy()},t.prototype.gotoRoleDead=function(e){this.releaseRolePrefab(e),this.myRolePrefab||z.default.sendBugLog("@track ===> this.myRolePrefab = null");var t=this.myRolePrefab?{row:this.myRolePrefab.gridRow,col:this.myRolePrefab.gridCol}:{row:0,col:0};this.myRoleGridRow=t.row,this.myRoleGridCol=t.col,this.myRolePrefab=null,b.WordConfig.showWord(60318),T.TianGuanManager.instance.isFighting||g.default.instance.createView(y.default.gameView.revive)},t.prototype.getGridPosition=function(e,t){try{return this.gridPositionList[e][t]}catch(i){r.Logger.error("getGridPosition error=",e,t,this.gridPositionList)}},t.prototype.getMonsterAttackRoleList=function(e,t,i){for(var n=[],o=0;o<this.allRolePrefabList.length;o++){var a=this.allRolePrefabList[o];if(!a.isDead&&(a.nowRoleType==Z.default.RoleType.Role||a.nowRoleType==Z.default.RoleType.Summoned)){var s=Math.abs(a.gridRow-t),r=Math.abs(a.gridCol-i);s<=e&&r<=e&&n.push(a)}}return n},t.prototype.getMonsterAttackList=function(){for(var e=[],t=0;t<this.allRolePrefabList.length;t++){var i=this.allRolePrefabList[t];i.isDead||i.nowRoleType!=Z.default.RoleType.Role&&i.nowRoleType!=Z.default.RoleType.Summoned||e.push(i)}return e},t.prototype.getNearlyRole=function(e){for(var t,i=Number.MAX_VALUE,n=0;n<this.allRolePrefabList.length;n++){var o=this.allRolePrefabList[n];if(!o.isDead&&(o.nowRoleType==Z.default.RoleType.Role||o.nowRoleType==Z.default.RoleType.Summoned))c.default.distance(o.gridRow,o.gridCol,e.gridRow,e.gridCol)<=i&&(t=o)}return t},t.prototype.canWalk=function(e,t){if(e<0||e>=w.default.instance.gridRow)return!1;if(t<0||t>=w.default.instance.gridCol)return!1;for(var i=0;i<this.allRolePrefabList.length;i++){var n=this.allRolePrefabList[i];if(n.gridRow==e&&n.gridCol==t)return!1}return!0},t.prototype.refreshPrivilege=function(){this.freshHuishou(),this.freshAutoRobot(),this.freshZhanShen()},t.prototype.freshAutoRobot=function(){var e=this.findChild(this.node,"privilege/spRedTuoguan"),t=this.findChild(this.node,"privilege/autoRobotBtn"),i=this.findChild(this.node,"privilege/autoRobotBtn/noactiveNode"),n=this.findChild(this.node,"privilege/autoRobotBtn/activeNode"),o=H.default.Privilege_Type.GameHelper;if(e.active=!1,m.GameConfig.isWechat())t.active=!1;else{var a=H.default.getPrivilegeModel(o);a?a.leftDay>0||-1==a.leftDay?(i.active=!1,n.active=!0):(i.active=!0,n.active=!1):H.default.findExperienceItem(o)?(e.active=!0,i.active=!1,n.active=!0):(i.active=!0,n.active=!1)}},t.prototype.freshZhanShen=function(){var e=this.findChild(this.node,"privilege/spRedZhanShen"),t=this.findChild(this.node,"privilege/zhanshenNode"),i=this.findChild(this.node,"privilege/zhanshenNode/noactiveNode"),n=this.findChild(this.node,"privilege/zhanshenNode/activeNode"),o=H.default.Privilege_Type.FightGod;if(e.active=!1,m.GameConfig.isWechat())t.active=!1;else{var a=H.default.getPrivilegeModel(o),s=H.default.getExperienceType(o);a?a.leftDay>0?(i.active=!1,n.active=!0,s==H.default.Experience_Type.used&&2==a.is_get_diamond&&(e.active=!0)):(i.active=!0,n.active=!1):H.default.findExperienceItem(o)?(i.active=!1,n.active=!0,e.active=!0):(i.active=!0,n.active=!1)}},t.prototype.freshHuishou=function(){var e=this.findChild(this.node,"privilege/spRedHuiShou"),t=this.findChild(this.node,"privilege/huishouNode"),i=this.findChild(this.node,"privilege/huishouNode/noactiveNode"),n=this.findChild(this.node,"privilege/huishouNode/activeNode"),o=H.default.Privilege_Type.recovery;if(e.active=!1,m.GameConfig.isWechat())t.active=!1;else{var a=H.default.getPrivilegeModel(o),s=H.default.getExperienceType(o);a?a.leftDay>0?(i.active=!1,n.active=!0,s==H.default.Experience_Type.used&&2==a.is_get_diamond&&(e.active=!0)):(i.active=!0,n.active=!1):H.default.findExperienceItem(o)?(i.active=!1,n.active=!0,e.active=!0):(i.active=!0,n.active=!1)}},t.prototype.play0to1MineEffect=function(e){var t=this;0==this.isTweening&&(this.isTweening=!0,this.minimap.active=!0,this.minimap.y=-26,this.dongrukou.active=!0,this.dongrukou.scale=1,this.dongrukou.y=208.789,this.minePanel.scale=.1,this.minePanel.active=!1,this.findChild(this.node,"privilege").active=!1,this.findChild(this.node,"taskview").active=!1,cc.tween(this.minimap).to(.5,{y:-240.674}).call(function(){t.minimap.y=-26,t.minimap.active=!1}).start(),cc.tween(this.dongrukou).to(.5,{y:-27.94}).delay(.2).call(function(){t.play0to1MineEffect_1(),e()}).start())},t.prototype.play0to1MineEffect_1=function(){var e=this;this.minePanel.active=!0,this.minePanel.scale=.1,cc.tween(this.dongrukou).to(.5,{scale:4.3}).call(function(){e.dongrukou.y=208.789,e.dongrukou.active=!1}).start(),cc.tween(this.minePanel).to(.5,{scale:1}).call(function(){e.isTweening=!1}).start()},t.prototype.playNto1MineEffect=function(e){var t=this;if(0==this.isTweening){this.dianti.y=83.248,this.dianti.active=!0,this.isTweening=!0;var i=this.findChild(this.minePanel,"2/1");cc.tween(i).to(.4,{y:-232.783}).call(function(){i.y=402.066,t.playNto1MineEffect_1(),e()}).start(),cc.tween(this.dianti).to(.4,{y:-139.502}).call(function(){}).start()}},t.prototype.playNto1MineEffect_1=function(){var e=this,t=this.findChild(this.minePanel,"2/1");cc.tween(t).to(.6,{y:-50}).to(.2,{y:0}).call(function(){e.isTweening=!1}).start(),cc.tween(this.dianti).to(.6,{y:-559.943}).call(function(){e.dianti.active=!1}).start()},t.prototype.play1toNMineEffect=function(e){var t=this;if(0==this.isTweening){this.dianti.y=-575.082,this.dianti.active=!0,this.isTweening=!0;var i=this.findChild(this.minePanel,"2/1");cc.tween(i).to(.4,{y:243.506}).call(function(){i.y=-389.333,e(),t.play1toNMineEffect_1()}).start(),cc.tween(this.dianti).to(.4,{y:-305.576}).call(function(){}).start()}},t.prototype.play1toNMineEffect_1=function(){var e=this,t=this.findChild(this.minePanel,"2/1");cc.tween(t).to(.6,{y:50}).to(.2,{y:0}).call(function(){e.isTweening=!1}).start(),cc.tween(this.dianti).to(.6,{y:121.64}).call(function(){e.dianti.active=!1}).start()},t.prototype.playNto0MineEffect=function(e){var t=this;0==this.isTweening&&(this.minimap.y=-235.712,this.minimap.active=!0,this.minePanel.active=!0,cc.tween(this.minimap).to(.5,{y:-26}).call(function(){}).start(),cc.tween(this.minePanel).to(.5,{y:239.964}).call(function(){t.isTweening=!1,t.minePanel.active=!1,t.minePanel.y=0,t.findChild(t.node,"privilege").active=!0,t.findChild(t.node,"taskview").active=!!q.TaskModel.instance.isShow(),e()}).start())},t.prototype.onEventServerFight=function(){this.findChild(this.node,"game").active=!1,this.serverFightView&&(this.serverFightView.active=!0)},t.prototype.onEventClientFight=function(){this.findChild(this.node,"game").active=!0,this.serverFightView&&(this.serverFightView.active=!1)},t.prototype.handlerEnd=function(){for(var e=this.findChild(this.node,"game/skill"),t=e.childrenCount-1;t>0;t--){var i=e.children[t];i&&cc.isValid(i)&&u.default.Instance.put(i,"RoleSkillEffectPrefabEx")}},t.prototype.zhuanduanType=function(e){N.AppDownloadModel.instance.useDownAct()?e==N.AppDownloadShow_type.None?this.weiDuanFuli.active=!1:e!=N.AppDownloadShow_type.download&&e!=N.AppDownloadShow_type.reward&&e!=N.AppDownloadShow_type.rewardOK||(this.weiDuanFuli.active=!0,this.weiDuanFuli.getComponent(cc.Animation).play("zhuanduan")):this.weiDuanFuli.destroy()},t.prototype.onHide=function(){},t.prototype.onDisable=function(){k.default.instance.destroy()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},o([ae(cc.Prefab)],t.prototype,"cityPrefab",void 0),o([ae({type:cc.Prefab})],t.prototype,"serverFightPrefab",void 0),o([ae({type:cc.Node})],t.prototype,"serverFightViewNode",void 0),o([ae({type:cc.Node})],t.prototype,"weiDuanFuli",void 0),t=o([oe],t)}(h.default);i.default=se,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/MathUtils":"MathUtils","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/RandomUtil":"RandomUtil","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../base/NodePoolManager":"NodePoolManager","../config/ActivitytimeConfig":"ActivitytimeConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/MapManager":"MapManager","../manager/MonsterManager":"MonsterManager","../manager/PvpManager":"PvpManager","../manager/ScoreManager":"ScoreManager","../manager/SkillEffectManager":"SkillEffectManager","../manager/SummonedManager":"SummonedManager","../manager/TianGuanManager":"TianGuanManager","../manager/activity/ActivityManager":"ActivityManager","../model/ActivityOpenModel":"ActivityOpenModel","../model/AppDownloadModel":"AppDownloadModel","../model/BossModel":"BossModel","../model/CostumeModel":"CostumeModel","../model/FuGuiGameModel":"FuGuiGameModel","../model/Grid":"Grid","../model/GuildModel":"GuildModel","../model/HolidayMonsterModel":"HolidayMonsterModel","../model/ItemInfoModel":"ItemInfoModel","../model/MapStatisticsModel":"MapStatisticsModel","../model/MineModel":"MineModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../model/TaskModel":"TaskModel","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","../prefab/RolePrefab":"RolePrefab","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/STUtils":"STUtils","../serverFight/ServerFightView":"ServerFightView","../utils/MusicHelper":"MusicHelper","./CityView":"CityView","./RedPacket/packetModel":"packetModel","./RedPacket/packetRankModel":"packetRankModel"}],GameWebSocket:[function(e,t,i){"use strict";cc._RF.push(t,"861b8+wl3dETJXq24Rwjl6K","GameWebSocket"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("./Logger"),a=e("./GameSocket");(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"})(n=i.GameWebSocketStatus||(i.GameWebSocketStatus={}));var s=function(){function e(){}return e.prototype.SetCallBacks=function(e,t,i,n,o){this.onConnect=e,this.onClose=t,this.onSocketData=i,this.onError=n,this.thisObject=o},e.prototype.connect=function(e){if(this.socket&&this.socket.close(),cc.sys.isNative){var t=cc.url.raw("resources/https/cacert.pem");jsb.fileUtils.isFileExist(t)?this.socket=new WebSocket(e,null,t):this.socket=new WebSocket(e)}else this.socket=new WebSocket(e);this.socket.binaryType="arraybuffer",this.bindEvent()},e.prototype.bindEvent=function(){var e=this;this.socket.onopen=function(){o.Logger.log("gamewebsocket onopen="),e.onConnect.call(e.thisObject)},this.socket.onclose=function(){o.Logger.log("gamewebsocket close="),a.default.getInstance().isReconnecting=!0,e.onClose.call(e.thisObject),e.clear()},this.socket.onerror=function(){e.onError.call(e.thisObject)},this.socket.onmessage=function(t){e.onSocketData.call(e.thisObject,t.data)}},e.prototype.clear=function(){this.unBindEvent(),this.socket=null},e.prototype.unBindEvent=function(){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null},e.prototype.close=function(){this.socket&&this.socket.readyState==n.OPEN?(this.socket.close(),this.onClose.call(this.thisObject)):this.onClose.call(this.thisObject),this.clear()},e.prototype.send=function(e){this.socket&&this.socket.readyState==n.OPEN&&this.socket.send(e)},Object.defineProperty(e.prototype,"readyState",{get:function(){return this.socket?this.socket.readyState:n.CLOSED},enumerable:!0,configurable:!0}),e}();i.default=s,cc._RF.pop()},{"./GameSocket":"GameSocket","./Logger":"Logger"}],GesturesToZoom:[function(e,t,i){"use strict";cc._RF.push(t,"c7852VJr/xL6KKN5ugpKYX5","GesturesToZoom");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleNode=null,t.minScale=1,t.maxScale=1.5,t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onEventTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onEventTouchMove,this)},t.prototype.onEventTouchStart=function(e){var t=e.getTouches();1==t.length||2==t.length&&(this.startPos1=this.node.convertToNodeSpaceAR(t[0].getLocation()),this.startPos2=this.node.convertToNodeSpaceAR(t[1].getLocation()),this.pointsDis=this.startPos1.sub(this.startPos2).mag())},t.prototype.onEventTouchMove=function(e){var t=e.getTouches();if(1==t.length){var i=e.getDelta();this.scaleNode.setPosition(this.scaleNode.position.add(i)),this.restrictPic()}else if(2==t.length){var n=this.node.convertToNodeSpaceAR(t[0].getLocation()),o=this.node.convertToNodeSpaceAR(t[1].getLocation()),a=n.sub(o).mag();if(this.pointsDis||(this.pointsDis=0),a>this.pointsDis){if(this.scaleNode.scale>=this.maxScale)return void(this.scaleNode.scale=this.maxScale);this.pointsDis=a,this.scaleNode.scale+=.05}else if(a<this.pointsDis){if(this.scaleNode.scale<=this.minScale)return void(this.scaleNode.scale=this.minScale);this.pointsDis=a,this.scaleNode.scale-=.05}this.restrictPic()}},t.prototype.restrictPic=function(){var e=this.scaleNode.getBoundingBox().width,t=this.scaleNode.getBoundingBox().height;this.scaleNode.x>0&&this.scaleNode.x-0>e/2-this.node.width/2&&(this.scaleNode.x=e/2-this.node.width/2),this.scaleNode.x<0&&this.scaleNode.x-0<this.node.width/2-e/2&&(this.scaleNode.x=this.node.width/2-e/2),this.scaleNode.y>0&&this.scaleNode.y-0>t/2-this.node.height/2&&(this.scaleNode.y=t/2-this.node.height/2),this.scaleNode.y<0&&this.scaleNode.y-0<this.node.height/2-t/2&&(this.scaleNode.y=this.node.height/2-t/2)},o([r(cc.Node)],t.prototype,"scaleNode",void 0),o([r(cc.Float)],t.prototype,"minScale",void 0),o([r(cc.Float)],t.prototype,"maxScale",void 0),t=o([s],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],GiftClockTip:[function(e,t,i){"use strict";cc._RF.push(t,"5d5c08DLrJG0KcALXHshlln","GiftClockTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/UIManager"),s=e("../../engine/ViewBase"),r=e("../config/GameConst"),c=e("../config/ViewConfig"),l=e("../prefab/ItemPrefab"),d=e("../utils/MusicHelper"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.itemPrefab=this.findChild(this.node,"view/ItemPrefab"),this.findChild(this.node,"view/btn_go").on(cc.Node.EventType.TOUCH_END,this.onClickSure.bind(this)),this.findChild(this.node,"view/btn_guanbi").on(cc.Node.EventType.TOUCH_END,this.onClockClick.bind(this))},t.prototype.onInitChild=function(e,t){this.callback=t,this.itemModel=e},t.prototype.onShow=function(){a.default.instance.setTopUI(c.default.gameView.GiftClockTip),this.itemPrefab.getComponent(l.default).init(this.itemModel,!0),this.itemModel.itemKind==r.GameConst.ITEM_KIND.EQUIP?this.findChild(this.node,"view/fontclib_shenzhuang_biaoshi").active=!0:this.findChild(this.node,"view/fontclib_shenzhuang_biaoshi").active=!1},t.prototype.onClickSure=function(){d.MusicHelper.play_click(),this.closeView(),this.callback(!0)},t.prototype.onClockClick=function(){d.MusicHelper.play_click(),this.closeView()},t=o([g],t)}(s.default));i.default=h,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../prefab/ItemPrefab":"ItemPrefab","../utils/MusicHelper":"MusicHelper"}],GlobalConfig:[function(e,t,i){"use strict";cc._RF.push(t,"76e82SnvrhDoqNpPObC+HHC","GlobalConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/config/GameConfig"),o=e("./Logger"),a=function(){function e(){}return e.init=function(){this.initMyJsSetting(),this.initBrowserParam(),this.checkBrowserParam(),this.initLoadingBGIndex()},e.initMyJsSetting=function(){var t=window.myJsSetting;if(t){console.log("myJsSetting=="+t);var i=JSON.parse(t);n.GameConfig.sdkType=i.sdkType,n.GameConfig.setEnvironment(i.environment),e.getServerListUrl=i.getServerListUrl,i.logType&&(o.Logger.LEVEL=i.logType)}else n.GameConfig.isWechat()&&(n.GameConfig.isOpenAd=!1,this.wxTest=!0,this.platformId=2,n.GameConfig.setEnvironment(n.EnvironmentType.Online))},e.getClientType=function(){var e=n.GameConfig.Client_Type.test;return n.GameConfig.sdkType==n.SdkType.Xiaotun?e=n.GameConfig.Client_Type.xiaotunWeb:n.GameConfig.isWechat()&&(e=n.GameConfig.Client_Type.wx),e},e.initBrowserParam=function(){var e=window.location.search;if(""!=e){this.browserParam={};for(var t=(e=(e=decodeURIComponent(e)).replace("?","")).split("&"),i=0;i<t.length;i++){var n=t[i].split("=");this.browserParam[n[0]]=n[1]}console.log("browserParam="),console.log(this.browserParam)}},e.checkBrowserParam=function(){if(e.browserParam&&n.GameConfig.sdkType==n.SdkType.Xiaotun){var t=e.browserParam["7cwan_param"],i=JSON.parse(t);this.channelId=i.game_pkg}},e.initLoadingBGIndex=function(){var t="web";n.GameConfig.sdkType==n.SdkType.Xiaotun&&(t=e.channelId),n.GameConfig.isWechat()?this.lodingBGIndex=4:this.lodingBGIndex="wzcq-q2-_gbwzcq_A"==t?0:"wzcq-q2-_wzcqzzzjd_B"==t?1:"wzcq-q2-_kttl-q2-_C"==t?2:"wzcq-q2-_hmcs-q2-_D"==t?3:"wzcq-q2-_hmcs-ks-_I"==t?3:"wzcq-q2-_wzcqzzzjd_F"==t?1:0},e.isIPAddress=function(e){var t=e.match(/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/g);return t&&t.length>=0},e.loginTime=1,e.channelId="",e.lodingBGIndex=0,e.getServerListUrl="",e.wxTest=!1,e.platformId=1,e}();i.GlobalConfig=a,cc._RF.pop()},{"../game/config/GameConfig":"GameConfig","./Logger":"Logger"}],GmView:[function(e,t,i){"use strict";cc._RF.push(t,"45d79JcaM5CT50Nd/7N1zlK","GmView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/GameConfig"),r=e("../GameController"),c=e("../../engine/UIManager"),l=e("../network/SocketClient"),d=e("../config/ViewConfig"),f=e("../../engine/ResourcesManager"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){this.txtCode=this.node.getChildByName("txtCode").getComponent(cc.EditBox),this.txtArg=this.node.getChildByName("txtArg").getComponent(cc.EditBox),this.node.getChildByName("btnSend").on(cc.Node.EventType.TOUCH_END,this.onClickSend.bind(this))},t.prototype.onClickCLose=function(){this.closeView()},t.prototype.onClickSend=function(){if(s.GameConfig.connectServer)if("restart"==this.txtCode.string)this.closeView(),r.default.instance.restartGame();else if("addgm"==this.txtCode.string)c.default.instance.getTopRoot().parent.getChildByName("minigm")||f.default.instance.addTaskPrefab(d.default.gameView.MiniGmView,function(e){var t=cc.instantiate(e);t.parent=c.default.instance.getTopRoot().parent,t.zIndex=99,t.name="minigm",t.getChildByName("btngm").on(cc.Node.EventType.TOUCH_END,function(){c.default.instance.createView(d.default.gameView.GmView)})},this);else if("deletegm"==this.txtCode.string){var e=c.default.instance.getTopRoot().parent.getChildByName("minigm");e&&e.destroy()}else l.default.sendGm(this.txtCode.string,this.txtArg.string)},t=o([h],t)}(a.default));i.default=u,cc._RF.pop()},{"../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../GameController":"GameController","../config/GameConfig":"GameConfig","../config/ViewConfig":"ViewConfig","../network/SocketClient":"SocketClient"}],GoldsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f09f0qmcg9J1L1cu9YP0WJu","GoldsConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.level=0,t.gold=50,t.off_gold=1,t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.gold=e.gold,i.off_gold=e.off_gold,i.off_cream=e.off_cream,i.off_gold1=e.off_gold1,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==parseInt(n)&&(t=i)}),t},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.GoldsConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],GongLueJobPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"ad68ft+1ztEk4VkwwA5aZdC","GongLueJobPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/StrategyXingXiuConfig"),r=e("../../model/RoleInfoModel"),c=cc._decorator,l=c.ccclass,d=c.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrameList=[],t}return n(t,e),t.prototype.onLoad=function(){this.itemList=this.node.getChildByName("itemList"),this.itemPrefab=this.findChild(this.node,"itemList/item"),this.itemList.height=0;for(var e=s.StrategyXingXiuConfig.GetConfigsByRole(r.default.instance.occupation-1),t=e.length>this.itemList.childrenCount?e.length:this.itemList.childrenCount,i=0;i<t;i++){var n=e[i];if(n){var o=void 0;i<this.itemList.childrenCount?o=this.itemList.children[i]:(o=cc.instantiate(this.itemPrefab)).parent=this.itemList,i<e.length?(o.active=!0,this.initItem(o,n)):o.active=!1,this.itemList.height+=o.height}}this.node.height=this.node.getChildByName("label").height+this.itemList.height},t.prototype.initItem=function(e,t){e.getChildByName("name").getComponent(cc.RichText).string=t.subtypename,e.getChildByName("des").getComponent(cc.RichText).string=t.subdes,e.getChildByName("pic").getComponent(cc.Sprite).spriteFrame=this.spriteFrameList[t.picid]},o([d({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),t=o([l],t)}(a.default);i.default=f,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/StrategyXingXiuConfig":"StrategyXingXiuConfig","../../model/RoleInfoModel":"RoleInfoModel"}],GongLueView:[function(e,t,i){"use strict";cc._RF.push(t,"44d5eRWqrpH/IXd4VrEClRK","GongLueView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../config/GameConfig"),c=e("../../config/StrategyConfig"),l=e("../../event/CommonEvent"),d=e("../../manager/RedPointManager"),f=e("../../model/RoleInfoModel"),g=e("../../model/StrategyModel"),h=e("../../network/HttpHelper"),u=e("../../network/SocketClient"),p=e("../../prefab/RedPointPrefab"),m=cc._decorator,C=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curTab=1,t.picPrefabList=[],t.gongzhonghao2=null,t}return n(t,e),t.prototype.onLoad=function(){this.txtTitle=this.findChild(this.node,"frame/view/txtTitle"),this.content=this.findChild(this.node,"frame/view/ScrollView/view/content"),this.btn=this.findChild(this.node,"frame/view/ScrollView/view/content/btn"),this.btn.zIndex=1e4,this.btnReceive=this.btn.getChildByName("btnReceive"),this.btnReceived=this.btn.getChildByName("btnReceived"),this.btnReceive.active=!1,this.btnReceived.active=!1,this.itemPrefab=this.content.getChildByName("item")},t.prototype.onEnable=function(){a.EventManager.instance.on(l.CommonEvent.Event_StrategyInfo_refresh,this.refresh,this),u.default.s_activity_strategy_info(),g.default.awardInfoMap&&this.refresh()},t.prototype.refresh=function(){this.initializeView(this.curTab)},t.prototype.initializeView=function(e){var t=c.StrategyConfig.GetUnlocklevelByGroup(e,1e3*e+1);if(f.default.instance.level>=t){for(var i=c.StrategyConfig.GetConfigsByGroup(e),n=i.length>this.content.childrenCount-1?i.length:this.content.childrenCount-1,o=0;o<n;o++){var a=void 0;if(o<this.content.childrenCount-1?a=this.content.children[o]:(a=cc.instantiate(this.itemPrefab)).parent=this.content,o<i.length){if(a.active=!0,this.txtTitle.getComponent(cc.Label).string=i[o].groupname,!a.getChildByName("labelText")){h.default.sendBugLog("GongLueView.initializeView groupname="+i[o].groupname);continue}var s=a.getChildByName("labelText").getComponent(cc.RichText);s.string="<color=#ffdf69>"+i[o].subtypename+"</color>\n"+i[o].subdes,void 0==i[o].subtypename&&(i[o].subtypename="",s.string="<color=#ffdf69>"+i[o].subtypename+"</color>"+i[o].subdes),void 0==i[o].subdes&&(i[o].subdes="",s.string="<color=#ffdf69>"+i[o].subtypename+"</color>"+i[o].subdes),a.height=s.node.height;var l=a.getChildByName("pic");if(l.active=!1,1==i[o].isExit){if(l.active=!0,l.setPosition(0,-a.height),l.childrenCount>0)for(var u=0;u<l.childrenCount;u++){var m=l.children[u];m&&m.destroy()}var C=0==i[o].picid&&r.GameConfig.sdkType==r.SdkType.LongRui?cc.instantiate(this.gongzhonghao2):cc.instantiate(this.picPrefabList[i[o].picid]);C.parent=l,C.setAnchorPoint(.5,1),a.height=s.node.height+C.height}}else a.active=!1}var _=c.StrategyConfig.GetAwardByGroup(e,1e3*e+1);if(_){var v=_[0];if(v)for(var y in v)if(Object.prototype.hasOwnProperty.call(v,y))var b=v[y];var I=_[1];if(I)for(var y in I)if(Object.prototype.hasOwnProperty.call(I,y)){b=I[y];this.findChild(this.btn,"btnReceive/awardNum").getComponent(cc.Label).string=b}var M=_[2];if(M)for(var y in M)if(Object.prototype.hasOwnProperty.call(M,y))b=M[y]}var w=g.default.GetDataByIndex(e);0==w.status||1==w.status?(w.status=1,this.btnReceive.active=!0,this.btnReceived.active=!1):(this.btnReceive.active=!1,this.btnReceived.active=!0);var k=this.btn.getChildByName("RedPointPrefab").getComponent(p.default),S=new Array;if(0==w.status||1==w.status){var P="award"+w.index;S.push(P)}k.setRedPointIdList(S),d.default.getInstance().checkRedPointById(d.RedPointId.Activity_Strategy),this.btnReceive.active&&this.onAddEvent(this.btnReceive,this.onClickReceive.bind(this,e))}},t.prototype.onClickReceive=function(e){u.default.s_activity_strategy_reward(1e3*e+1)},o([_({type:[cc.Prefab]})],t.prototype,"picPrefabList",void 0),o([_(cc.Prefab)],t.prototype,"gongzhonghao2",void 0),t=o([C],t)}(s.default);i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/GameConfig":"GameConfig","../../config/StrategyConfig":"StrategyConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/RoleInfoModel":"RoleInfoModel","../../model/StrategyModel":"StrategyModel","../../network/HttpHelper":"HttpHelper","../../network/SocketClient":"SocketClient","../../prefab/RedPointPrefab":"RedPointPrefab"}],Grid:[function(e,t,i){"use strict";cc._RF.push(t,"6c6f58yfERPyLPsmYJevlWt","Grid"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.UP=0]="UP",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(i.GridSide||(i.GridSide={}));var n=function(){function e(e,t){this.row=e,this.col=t}return e.init=function(t,i){return new e(t,i)},e}();i.default=n,cc._RF.pop()},{}],GrowFundConfig:[function(e,t,i){"use strict";cc._RF.push(t,"96e4cXzbyVCTZ3UruTcCjVp","GrowFundConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},e.getConfigById=function(e){return this.configMap.get(e)},e.getConfig=function(){return this.configList},e.Config_Name="growFundConfig",e.configMap=new Map,e.configList=[],e}();i.GrowFundConfig=n,cc._RF.pop()},{}],GrowFundModel:[function(e,t,i){"use strict";cc._RF.push(t,"4a482qKQ1FHTJbsy46tTSra","GrowFundModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/GrowFundConfig"),c=e("../event/CommonEvent"),l=e("../manager/RedPointManager"),d=e("./RoleInfoModel"),f=function(){return function(){}}();i.GrowUpInfo=f;var g=function(){return function(){}}();i.GrowUpAward=g;var h=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[l.RedPointId.Activity_growFund],this.protos=[a.ProtoConfig.c_growup_get,a.ProtoConfig.c_growup_info],l.default.getInstance().addHandler(this)}return e.proto2Model=function(t){var i=this;this.model=this.model?this.model:new e,n.EventManager.instance.on(c.CommonEvent.Event_ChargeActivityOk,this.protoRechargeSuc,this);var r=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_growup_info,t);this.isBuy=r.getIsBuy(),r.getNormalIdxList()&&r.getNormalIdxList().forEach(function(e){i.normalIdx.includes(e.getNormalIdx())||i.normalIdx.push(e.getNormalIdx())}),r.getRechargeIdxList()&&r.getRechargeIdxList().forEach(function(e){i.rechargeIdx.includes(e.getRechargeIdx())||i.rechargeIdx.push(e.getRechargeIdx())}),o.Logger.log("c_growup_info=====",r),n.EventManager.instance.dispatch(c.CommonEvent.Event_GrowFund_refresh)},e.proto2Award=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_growup_get,e);if(o.Logger.log("c_growup_get=====",t),0==t.getRet()){var i=t.getNormalIdx(),r=t.getRechargeIdx();0!=i&&this.normalIdx.push(i),0!=r&&this.rechargeIdx.push(r),n.EventManager.instance.dispatch(c.CommonEvent.Event_GrowFund_refresh)}},e.protoRechargeSuc=function(e){223==e&&(this.isBuy=2,n.EventManager.instance.dispatch(c.CommonEvent.Event_GrowFund_refresh))},e.getIsReceived=function(e,t){return t?this.rechargeIdx.includes(e):this.normalIdx.includes(e)},e.prototype.checkRedPoint=function(){var t=[],i=!1,n=d.default.instance.level;r.GrowFundConfig.getConfig().forEach(function(o){var a=!1,s=!1;n>=o.level&&!e.getIsReceived(o.id,!1)&&(i=!0,a=!0);var r={id:"grow_free_"+o.id,type:l.RedPointType.Default,show:a};t.push(r),n>=o.level&&2==e.isBuy&&!e.getIsReceived(o.id,!0)&&(i=!0,s=!0);var c={id:"grow_recharge_"+o.id,type:l.RedPointType.Default,show:s};t.push(c)});var o={id:l.RedPointId.Activity_growFund,type:l.RedPointType.Default,show:i};return t.push(o),t},e.normalIdx=[],e.rechargeIdx=[],e}();i.default=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GrowFundConfig":"GrowFundConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./RoleInfoModel":"RoleInfoModel"}],GrowFundView:[function(e,t,i){"use strict";cc._RF.push(t,"d8a62ChIwBBkb7tlTJWaNKn","GrowFundView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../../engine/EventManager"),r=e("../../../engine/ViewBase"),c=e("../../config/ChongZhiConfig"),l=e("../../config/DefaultConfig"),d=e("../../config/GameConst"),f=e("../../config/GrowFundConfig"),g=e("../../config/ITemsConfig"),h=e("../../config/WordConfig"),u=e("../../event/CommonEvent"),p=e("../../model/GrowFundModel"),m=e("../../model/ItemInfoModel"),C=e("../../model/RoleInfoModel"),_=e("../../network/SocketClient"),v=e("../../prefab/ItemPrefab"),y=e("../../prefab/RedPointPrefab"),b=cc._decorator,I=b.ccclass;b.property;(function(e){e[e.Normal=1]="Normal",e[e.Recharge=2]="Recharge"})(a=i.GrowFundType||(i.GrowFundType={}));var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rechargeId=223,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){s.EventManager.instance.on(u.CommonEvent.Event_GrowFund_refresh,this.initView,this),_.default.s_growup_info()},t.prototype.initFindNode=function(){this.rateLabel=this.findChild(this.node,"frame/top/rate").getComponent(cc.Label),this.muchLabel=this.findChild(this.node,"frame/top/much").getComponent(cc.Label),this.buyMuchLabel=this.findChild(this.node,"frame/top/stauts/btnBuy/much").getComponent(cc.Label),this.buyNumLabel=this.findChild(this.node,"frame/top/stauts/btnBuy/tip").getComponent(cc.RichText),this.awardList=this.findChild(this.node,"frame/scrollView/view/content"),this.itemCellNode=this.findChild(this.node,"frame/itemCell"),this.buyNode=this.findChild(this.node,"frame/top/stauts/buy"),this.btnBuyNode=this.findChild(this.node,"frame/top/stauts/btnBuy")},t.prototype.initView=function(){var e=c.ChongZhiConfig.getChongZhiByIdAndPlatform(this.rechargeId),t=f.GrowFundConfig.getConfig();this.rateLabel.string=l.DefaultConfig.getConfigById(53).value,this.muchLabel.string=l.DefaultConfig.getConfigById(54).value,this.buyMuchLabel.string=e.getMoneyStr();var i=void 0!=e.resource[2]?e.resource[2]:"0";this.buyNumLabel.string=h.WordConfig.getWord(60797)+"<color=#0CFF00>"+i+"</color>"+h.WordConfig.getWord(60517),this.buyNode.active=2==p.default.isBuy,this.btnBuyNode.active=!this.buyNode.active;for(var n=this.awardList.childrenCount>t.length?this.awardList.childrenCount:t.length,o=0;o<n;o++){var a=void 0;o<this.awardList.childrenCount?a=this.awardList.children[o]:(a=cc.instantiate(this.itemCellNode)).parent=this.awardList,o<t.length?this.initGrowFundCell(a,t[o]):a.active=!1}this.onAddEvent(this.btnBuyNode,this.onBtnBuy.bind(this))},t.prototype.initGrowFundCell=function(e,t){e.active=!0;var i,n=C.default.instance.level>=t.level,o=this.findChild(e,"unlock"),s=this.findChild(e,"lock");i=n?o:s;var r=this.findChild(i,"normalItem"),c=this.findChild(i,"rechargeItem"),l=this.findChild(i,"level/num").getComponent(cc.Label),d=this.findChild(i,"normalItem/resource"),f=this.findChild(i,"rechargeItem/resource"),g=this.findChild(i,"normalItem/ItemPrefab"),h=this.findChild(i,"rechargeItem/ItemPrefab"),u=this.findChild(i,"normalItem/resource/frame/num").getComponent(cc.Label),m=this.findChild(i,"rechargeItem/resource/frame/num").getComponent(cc.Label),_=this.findChild(e,"activate");o.active=n,s.active=!n,d.active=void 0!=t.resource1,f.active=void 0!=t.resource1,g.active=!d.active,h.active=!f.active,_.active=2!=p.default.isBuy,l.string=t.level.toString(),this.initItemCell(t,e,r,g,u,!1),this.initItemCell(t,e,c,h,m,!0),this.onAddEvent(r,this.onBtnGetAward.bind(this,a.Normal,t)),this.onAddEvent(c,this.onBtnGetAward.bind(this,a.Recharge,t))},t.prototype.initItemCell=function(e,t,i,n,o,a){var s=this.findChild(i,"received"),r=this.findChild(i,"resource/frame"),c=this.findChild(t,"rechargeRed"),l=this.findChild(t,"freeRed"),d=a?e.resource2:e.resource1,f=a?e.item2:e.item1,g=a?"grow_recharge_":"grow_free_";if(g+=e.id,(a?c:l).getComponent(y.default).setRedPointIdList([g]),d){for(var u in d)if(Object.prototype.hasOwnProperty.call(d,u)){var m=d[u];o.string=m+h.WordConfig.getWord(60517)}}else if(f)for(var u in f)if(Object.prototype.hasOwnProperty.call(f,u)){m=f[u];this.initItem(n,u,m)}s.active=p.default.getIsReceived(e.id,a),r.active=!s.active},t.prototype.initItem=function(e,t,i){var n=g.ITemsConfig.getITemsConfigById(t),o=m.default.create(d.GameConst.ITEM_KIND.ITEM,n.id,i,n.quality);e.getComponent(v.default).init(o)},t.prototype.onBtnBuy=function(){_.default.req_charge(this.rechargeId)},t.prototype.onBtnGetAward=function(e,t){var i=p.default.getIsReceived(t.id,e==a.Recharge);if(C.default.instance.level<t.level)h.WordConfig.showWord(60340);else if(e!=a.Recharge||2==p.default.isBuy){if(!i)if(C.default.instance.level>=t.level&&!i){var n=e==a.Recharge?0:t.id,o=e==a.Recharge?t.id:0;_.default.s_growup_get(n,o)}else;}else h.WordConfig.showWord(60341)},t=o([I],t)}(r.default);i.default=M,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/GrowFundConfig":"GrowFundConfig","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GrowFundModel":"GrowFundModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab"}],GuideConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d07f3MhDYhJHZlhPX+TDl6R","GuideConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){this.id=null,this.arrows_type=null,this.group=null,this.step=null,this.limit=null,this.condition=null,this.type=null,this.shade=null,this.main="",this.controls="",this.desc=""}}();i.GuideItem=a;var s=function(){return function(){this.id="",this.parentid=""}}();i.GuideCheck=s;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(i,n)})},t.getGuideConfig=function(e){return this.configMap.get(e)},t.seachNexGuide=function(e){var t=this.getGuideConfig(e.toString()),i=this.getGuideConfig((e+1).toString());return t&&i&&t.group==i.group?e+1:null},t.getGuideCheck=function(e,t){var i=this.configCheckMap.get(e);if(i)return i[t]},t.configMap=new Map,t.configCheckMap=new Map,t}(o.JsonConfigBase);i.GuideConfig=r,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],GuideModel:[function(e,t,i){"use strict";cc._RF.push(t,"7a211+OQjtHXLAdqBsjbnMY","GuideModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/GuideConfig"),o=e("../../engine/UIManager"),a=e("../config/ViewConfig"),s=e("../network/SocketClient"),r=e("../../engine/ProtoConfig"),c=e("../../engine/ProtoUtils"),l=e("../../engine/GameSocket");(function(e){e[e.NOOB=1]="NOOB",e[e.YUN_YOU=2]="YUN_YOU",e[e.SKILL=3]="SKILL",e[e.NULL=Number.MAX_VALUE]="NULL"})(i.GUIDE_TYPE||(i.GUIDE_TYPE={}));var d=function(){function e(){this.GuideList=[],this.T_GuidList=[],this.CurrentGuid=[],this.isshow=!1}return e.prototype.checkGuide=function(e){var t;(void 0===e&&(e=null),e)&&(this.T_GuidList.forEach(function(i){i.id!=e||2!=i.state||(t=i)}),!t&&this.T_GuidList.length>1&&this.GuideList.push(e));this.GuideList.length>0&&!this.isshow&&(this.CurrentGuid=[],this.seachGuide())},e.prototype.seachGuide=function(e){void 0===e&&(e=null),e=e||this.GuideList.shift(),this.CurrentGuid.push(e);var t=n.GuideConfig.seachNexGuide(e);t?this.seachGuide(t):this.startGuid(this.CurrentGuid.shift().toString())},e.prototype.NextGuide=function(){this.CurrentGuid.length>0?this.startGuid(this.CurrentGuid.shift().toString()):this.GuideList.length>0?this.checkGuide():this.isshow=!1},e.prototype.CancelGuide=function(){this.CurrentGuid=[]},e.prototype.startGuid=function(e){this.isshow=!0;var t=n.GuideConfig.getGuideConfig(e);o.default.instance.createView(a.default.gameView.guideView,null,t,e)},e.prototype.saveGuidStep=function(e,t){return null},e.prototype.GuidEnd=function(e){s.default.req_finish_task(e,1)},e.dispatchTounchEndEvent=function(e,t){e&&e.dispatchEvent(t)},e.proto2GuideInfo=function(t){e.instance.T_GuidList=[];for(var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_guide_info,t).getGuideList(),n=0;n<i.length;n++){var o=[];o.id=i[n].getId(),o.state=i[n].getState(),e.instance.T_GuidList.push(o)}},e.proto2GuideTrigger=function(t){var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_guide_trigger,t),n=i.getId();1==i.getState()&&e.instance.GuideList.push(n),10101!=n&&e.instance.checkGuide()},e.s_guide_info=function(){e.instance.isshow=!1;var t=c.ProtoUtils.Create(r.ProtoConfig.s_guide_info);l.default.getInstance().sendToSocket(t)},e.s_guide_trigger=function(e){var t=c.ProtoUtils.Create(r.ProtoConfig.s_guide_trigger);t.setId(e),l.default.getInstance().sendToSocket(t)},e.LOCAL_KEY=["GuideNoobID","GuideYunYouID","GuideSkillID"],e.instance=new e,e}();i.GuideModel=d,cc._RF.pop()},{"../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/GuideConfig":"GuideConfig","../config/ViewConfig":"ViewConfig","../network/SocketClient":"SocketClient"}],GuildApplyItemPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"93a52CmgDBA9bPLaVKAyJew","GuildApplyItemPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/GuildModel"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhiyesf=[],t}return n(t,e),t.prototype.onLoad=function(){this.getChild(this.node,"btnrefuse").on(cc.Node.EventType.TOUCH_END,this.onBtnRefuse,this),this.getChild(this.node,"btnadopt").on(cc.Node.EventType.TOUCH_END,this.onBtnAdopt,this)},t.prototype.start=function(){},t.prototype.init=function(e){this.mode=e,this.getChild(this.node,"name",cc.Label).string=e.name,this.getChild(this.node,"level",cc.Label).string=e.level,this.getChild(this.node,"zhanli",cc.Label).string=e.power,this.getChild(this.node,"icon_zhiye",cc.Sprite).spriteFrame=this.zhiyesf[e.prof-1]},t.prototype.onBtnRefuse=function(e){s.GuildModel.s_guild_apply_operation(this.mode.id,2),this.node.destroy()},t.prototype.onBtnAdopt=function(e){s.GuildModel.s_guild_apply_operation(this.mode.id,1),this.node.destroy()},o([l({type:[cc.SpriteFrame]})],t.prototype,"zhiyesf",void 0),t=o([c],t)}(a.default);i.GuildApplyItemPrefab=d,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../model/GuildModel":"GuildModel"}],GuildAuctionView:[function(e,t,i){"use strict";cc._RF.push(t,"36f21sBahtDFpyJ+gZuZqms","GuildAuctionView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/SpriteFrameComponent"),s=e("../../../engine/ViewBase"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabArr=[],t}return n(t,e),t.prototype.start=function(){for(var e=0,t=this.tabArr.length;e<t;e++)this.onAddEvent(this.tabArr[e],this.typeChangeCleck.bind(this,this.tabArr[e]))},t.prototype.onEnable=function(){this.typeChangeCleck(this.tabArr[0])},t.prototype.typeChangeCleck=function(e){var t=e.getComponent(a.SpriteFrameComponent);if(t.changeState.call(t))for(var i=0,n=this.tabArr.length;i<n;i++){var o=this.tabArr[i];o!==e?o.getComponent(cc.Sprite).spriteFrame=o.getComponent(a.SpriteFrameComponent).spriteFrameList[0]:this.refashContainer(i)}},t.prototype.refashContainer=function(e){},o([l([cc.Node])],t.prototype,"tabArr",void 0),t=o([c],t)}(s.default);i.default=d,cc._RF.pop()},{"../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/ViewBase":"ViewBase"}],GuildConfig:[function(e,t,i){"use strict";cc._RF.push(t,"819edylHKROr6A1FFXvDp3D","GuildConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){}}();i.GuildInfo=a;var s=function(){return function(){}}();i.GuildDonate=s;var r=function(){return function(){}}();i.GuildShop=r;var c=function(){return function(){}}();i.GuildShopLv=c;var l=function(){return function(){}}();i.GuildSkill=l;var d=function(){return function(){}}();i.GuildSkillLv=d;var f=function(){return function(){}}();i.GuildDepot=f;var g=function(){return function(){}}();i.GuildHb=g;var h=function(){return function(){}}();i.GuildTask=h;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config_guildTask=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guildTask(e[i]);t.GuildTaskConfigMap.set(Number(i),n)})},t.obj2Config_guildTask=function(e){var t=new h;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guildHb=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guildHb(e[i]);t.GuildHbConfigMap.set(Number(i),n)})},t.obj2Config_guildHb=function(e){var t=new g;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guildDepot=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guildDepot(e[i]);t.GuildDepotConfigMap.set(i,n)})},t.obj2Config_guildDepot=function(e){var t=new f;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guildlv=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guildlv(e[i]);t.GuildInfoConfigMap.set(Number(i),n)})},t.getGuildInfoConfigMapNum=function(e){var i=t.GuildInfoConfigMap.get(e);return i?i.num:null},t.obj2Config_guildlv=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guilddonate=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guilddonate(e[i]);t.GuildDonateConfigMap.set(Number(i),n)})},t.obj2Config_guilddonate=function(e){var t=new s;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guilshop=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guilshop(e[i]);t.GuildShopConfigMap.set(Number(i),n)})},t.obj2Config_guilshop=function(e){var t=new r;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guilshoplv=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guilshoplv(e[i]);t.GuildShoplvConfigMap.set(Number(i),n)})},t.obj2Config_guilshoplv=function(e){var t=new c;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guilskill=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guilskill(e[i]);t.GuildSkillConfigMap.set(Number(i),n)})},t.obj2Config_guilskill=function(e){var t=new l;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config_guilskilllv=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config_guilskilllv(e[i]);t.GuildSkilllvConfigMap.set(Number(i),n)})},t.obj2Config_guilskilllv=function(e){var t=new d;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.Config_Name_Guildlv="guildlvConfig",t.Config_Name_Donate="guilddonateConfig",t.Config_Name_Shop="guildshopConfig",t.Config_Name_Shoplv="guildshoplvupConfig",t.Config_Name_Skill="guildskillConfig",t.Config_Name_Skilllv="guildskilllvConfig",t.Config_Name_Depot="guilddepotConfig",t.Config_Name_Hb="guild_hongbaoConfig",t.Config_Name_Task="guildtaskConfig",t.GuildInfoConfigMap=new Map,t.GuildDonateConfigMap=new Map,t.GuildShopConfigMap=new Map,t.GuildShoplvConfigMap=new Map,t.GuildSkillConfigMap=new Map,t.GuildSkilllvConfigMap=new Map,t.GuildDepotConfigMap=new Map,t.GuildHbConfigMap=new Map,t.GuildTaskConfigMap=new Map,t}(o.JsonConfigBase);i.GuildConfig=u,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],GuildFunctionView:[function(e,t,i){"use strict";cc._RF.push(t,"85b4cQXEeBLRaBIpqARTiA2","GuildFunctionView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../../engine/UIManager"),c=e("../../../engine/EventManager"),l=e("../../event/CommonEvent"),d=e("../../utils/UIHelper"),f=e("../../model/GuildModel"),g=e("../../../game/config/GuildConfig"),h=e("../../../game/config/BuffConfig"),u=e("../../prefab/GuildRecordItemPrefab"),p=e("../../config/WordConfig"),m=e("./GuildSkillView"),C=e("./GuildStoreRoomView"),_=e("../../config/ViewConfig"),v=e("../../utils/JumpActionUtils"),y=cc._decorator,b=y.ccclass,I=y.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guildrecorditem=null,t.guildSkillPrefab=null,t.guildStoreRoomPrefab=null,t.datingnode=null,t.datingup=null,t.datingrecord=null,t.guildrecordScrv=null,t.guildrecordcontent=null,t.donateinfo=null,t.deltime=!0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(){this.initguildfunction(),this.guildSkillView=cc.instantiate(this.guildSkillPrefab).getComponent(m.GuildSkillView),this.node.addChild(this.guildSkillView.node),this.guildSkillView.node.active=!1,this.guildSkillView.init(),this.setCallBackClose(this.guildSkillView.node,this.node),this.guildStoreRoomView=cc.instantiate(this.guildStoreRoomPrefab).getComponent(C.GuildStoreRoomView),this.node.addChild(this.guildStoreRoomView.node),this.guildStoreRoomView.node.active=!1,this.guildStoreRoomView.init(),this.setCallBackClose(this.guildStoreRoomView.node,this.node)},t.prototype.onEnable=function(){},t.prototype.onShow=function(){this.datingup.active=!1,this.setTopShow(this.datingnode,!1,this.node),this.setTopShow(this.datingrecord,!1,this.datingnode),this.setTopShow(this.guildSkillView.node,!1,this.node);var e=g.GuildConfig.GuildInfoConfigMap.get(f.GuildModel.instance.guildinfo.level+1);this.getChild(this.datingnode,"btnlevelup").color=e?cc.Color.WHITE:cc.Color.GRAY,c.EventManager.instance.on(l.CommonEvent.Event_Guild_DONATE_INFO,this.initDonateView,this),c.EventManager.instance.on(l.CommonEvent.Event_Guild_UPDATE_DATING,this.onBtnLevelinit,this)},t.prototype.initguildfunction=function(){var e=this,t=this.getChild(this.node,"funbtnnode");this.getChild(t,"btnbaoku").on(cc.Node.EventType.TOUCH_END,this.onBtnBaoKu,this),this.getChild(t,"btndating").on(cc.Node.EventType.TOUCH_END,this.onBtnDaTing,this),this.getChild(t,"btnboss").on(cc.Node.EventType.TOUCH_END,this.onBtnBoss,this),this.getChild(t,"btnhongbao").on(cc.Node.EventType.TOUCH_END,this.onBtnHongBao,this),this.getChild(t,"btnjineng").on(cc.Node.EventType.TOUCH_END,this.onBtnJiNeng,this),this.getChild(t,"btnshop").on(cc.Node.EventType.TOUCH_END,this.onBtnShop,this),this.getChild(t,"btntask").on(cc.Node.EventType.TOUCH_END,this.onBtnTask,this),this.datingnode=this.getChild(this.node,"datingnode"),this.setCallBackClose(this.datingnode,this.node),this.getChild(this.datingnode,"btnlevelup").on(cc.Node.EventType.TOUCH_END,this.onBtnLevelup,this),this.getChild(this.datingnode,"btnjuanzrecord").on(cc.Node.EventType.TOUCH_END,this.onBtnJuanZRecord,this),this.getChild(this.datingnode,"btnjzjb").on(cc.Node.EventType.TOUCH_END,this.onBtnJzJb,this),this.getChild(this.datingnode,"btnjzyb").on(cc.Node.EventType.TOUCH_END,this.onBtnJzYb,this),this.datingup=this.getChild(this.datingnode,"datingup"),this.setCallBackClose(this.datingup),this.getChild(this.datingup,"btnlevelup").on(cc.Node.EventType.TOUCH_END,this.onBtnLevelup2,this),this.datingrecord=this.getChild(this.datingnode,"datingrecord"),this.setCallBackClose(this.datingrecord,this.datingnode),this.getChild(this.datingrecord,"btnconfirm").on(cc.Node.EventType.TOUCH_END,function(){s.MusicHelper.play_click(),e.setTopShow(e.datingrecord,!1,e.datingnode)}),this.guildrecordScrv=this.findChild(this.datingrecord,"panel"),this.guildrecordScrv.on("scroll-to-bottom",this.onUpRecordVieww,this),this.guildrecordScrv.on("bounce-bottom",this.onUpRecordVieww,this),this.guildrecordcontent=this.findChild(this.datingrecord,"panel/view/content")},t.prototype.onBtnBaoKu=function(){s.MusicHelper.play_click(),this.setTopShow(this.guildStoreRoomView.node),this.guildStoreRoomView.onShow()},t.prototype.onBtnDaTing=function(){s.MusicHelper.play_click(),f.GuildModel.s_guild_donate_info(),this.setTopShow(this.datingnode)},t.prototype.onBtnBoss=function(){s.MusicHelper.play_click(),d.UIHelper.showTip("\u656c\u8bf7\u671f\u5f85")},t.prototype.onBtnHongBao=function(){s.MusicHelper.play_click(),r.default.instance.createView(_.default.gameView.guildHongBao)},t.prototype.onBtnJiNeng=function(){s.MusicHelper.play_click(),this.findChild(this.node,"funbtnnode/btnjineng/icon").active=!1,this.setTopShow(this.guildSkillView.node),this.guildSkillView.onShow()},t.prototype.onBtnShop=function(){s.MusicHelper.play_click(),v.default.doAction(v.FunctionIdList.GuildShop)},t.prototype.onBtnTask=function(){s.MusicHelper.play_click(),r.default.instance.createView(_.default.gameView.guildtask)},t.prototype.onBtnLevelinit=function(){var e=f.GuildModel.instance.guildinfo.level,t=g.GuildConfig.GuildInfoConfigMap.get(e),i=g.GuildConfig.GuildInfoConfigMap.get(e+1),n=this.getChild(this.datingnode,"labelconfnode");if(this.getChild(n,"datinglevel",cc.Label).string=e,!i)return this.getChild(this.datingnode,"btnlevelup").color=cc.Color.GRAY,void(this.datingup.active=!1);var o=h.BuffConfig.getConfigById(t.buff).magic_value[0][55],a=h.BuffConfig.getConfigById(i.buff).magic_value[0][55],s=this.getChild(this.datingup,"levellabel1");s.getComponent(cc.Label).string="lv."+e,this.getChild(s,"levellabel2").getComponent(cc.Label).string="lv."+(e+1);var r=this.getChild(this.datingup,"explabel1");r.getComponent(cc.Label).string=p.WordConfig.getWord(61375)+o/100+"%",this.getChild(r,"explabel2").getComponent(cc.Label).string=a/100+"%";var c=this.getChild(this.datingup,"numlabel1");c.getComponent(cc.Label).string=p.WordConfig.getWord(61376)+t.people,this.getChild(c,"numlabel2").getComponent(cc.Label).string=i.people;var l=f.GuildModel.instance.guildinfo.gold,d=t.cost,u=this.getChild(this.datingup,"prpgresslabel"),m=this.findChild(this.datingup,"prpgresslabel/img_icon_hanghuizijin");u.getComponent(cc.Label).string=l+"/"+d,this.getChild(this.datingup,"progressBar").getComponent(cc.ProgressBar).progress=l>d?1:(l/d).toFixed(2),setTimeout(function(){m.x=u.width/2+m.width/2+3})},t.prototype.onBtnLevelup=function(){s.MusicHelper.play_click(),this.datingup.active=!0,this.onBtnLevelinit()},t.prototype.onBtnLevelup2=function(){s.MusicHelper.play_click(),f.GuildModel.s_guild_levelup()},t.prototype.onBtnJuanZRecord=function(){s.MusicHelper.play_click(),this.setTopShow(this.datingrecord),this.onUpRecordVieww(null,!0),f.GuildModel.s_guild_donate_info()},t.prototype.onBtnJzJb=function(){var e=this;s.MusicHelper.play_click(),this.deltime&&(this.donateinfo.todayCoinCount>0?(f.GuildModel.s_guild_donate(1),setTimeout(function(){e.deltime=!0},500),this.deltime=!1):p.WordConfig.showWord(61370))},t.prototype.onBtnJzYb=function(){var e=this;s.MusicHelper.play_click(),this.deltime&&(this.donateinfo.todayDiamondCount>0?(f.GuildModel.s_guild_donate(2),setTimeout(function(){e.deltime=!0},500),this.deltime=!1):p.WordConfig.showWord(61370))},t.prototype.initDonateView=function(e){var t=e.tdlist;e.tdlist=t.sort(function(e,t){return e.idx-t.idx}),this.donateinfo=e;var i=f.GuildModel.instance.guildinfo,n=this.getChild(this.datingnode,"labelconfnode");this.getChild(n,"datinglevel",cc.Label).string=i.level;var o=e.todayDiamond+1;0==e.todayDiamondCount&&(o=e.todayDiamond);var a=g.GuildConfig.GuildDonateConfigMap.get(o);this.getChild(n,"hhgongxian",cc.Label).string=a.contribute,this.getChild(n,"hhzijin",cc.Label).string=a.money,this.getChild(n,"ybmoney",cc.Label).string=a.gold,this.getChild(n,"ybnum",cc.Label).string=e.todayDiamondCount,o=e.todayCoin+1,0==e.todayCoinCount&&(o=e.todayCoin),a=g.GuildConfig.GuildDonateConfigMap.get(o);var s=p.WordConfig.getWord(61377);a.coin>0&&(s=d.UIHelper.tranNumber(Number(a.coin))+""),this.getChild(n,"jbmoney",cc.Label).string=s,this.getChild(n,"jbnum",cc.Label).string=e.todayCoinCount},t.prototype.onUpRecordVieww=function(e,t){if(void 0===t&&(t=!1),this.donateinfo){t&&(this.guildrecordcontent.removeAllChildren(),this.guildrecordScrv.getComponent(cc.ScrollView).scrollToTop());var i=this.donateinfo.tdlist;i.sort(function(e,t){return t.count-e.count});var n=this.guildrecordcontent.children.length,o=i.length,a=o-n>10?n+10:o;if(o>n)for(var s=n;s<a;s++){var r=cc.instantiate(this.guildrecorditem),c=i[s];c.idx=s+1,r.getComponent(u.GuildRecordItemPrefab).init(c),this.guildrecordcontent.addChild(r)}}},t.prototype.setCallBackClose=function(e,t){var i=this;void 0===t&&(t=null);var n=function(){s.MusicHelper.play_click(),t?i.setTopShow(e,!1,t):e.active=!1};e.getChildByName("darkLayer")&&this.getChild(e,"darkLayer").on(cc.Node.EventType.TOUCH_END,n),e.getChildByName("btnclose")&&this.getChild(e,"btnclose").on(cc.Node.EventType.TOUCH_END,n)},t.prototype.setTopShow=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=null),e.parent=t?r.default.instance.getTopRoot():i||this.node,e.active=t},o([I(cc.Prefab)],t.prototype,"guildrecorditem",void 0),o([I(cc.Prefab)],t.prototype,"guildSkillPrefab",void 0),o([I(cc.Prefab)],t.prototype,"guildStoreRoomPrefab",void 0),t=o([b],t)}(a.default);i.GuildFunctionView=M,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../../game/config/BuffConfig":"BuffConfig","../../../game/config/GuildConfig":"GuildConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../prefab/GuildRecordItemPrefab":"GuildRecordItemPrefab","../../utils/JumpActionUtils":"JumpActionUtils","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","./GuildSkillView":"GuildSkillView","./GuildStoreRoomView":"GuildStoreRoomView"}],GuildHongBaoItem:[function(e,t,i){"use strict";cc._RF.push(t,"f833bzZHlBLvbx1wAMqoV2C","GuildHongBaoItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/GuildModel"),r=e("../../config/WordConfig"),c=e("../../../engine/SpriteFrameComponent"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(e){var t=this.node.getChildByName("bg");t.getComponent(cc.Sprite).spriteFrame=t.getComponent(c.SpriteFrameComponent).spriteFrameList[e.config_id-1];var i=cc.js.formatStr(r.WordConfig.getWord(61612),e.name,s.GuildModel.getPositonColor(e.pos,!1),s.GuildModel.getPositonWord(e.pos));this.node.getChildByName("namerichtext").getComponent(cc.RichText).string=i,this.node.getChildByName("kai").active=0==e.received,this.node.getChildByName("yilingqv").active=1==e.received,this.node.getChildByName("yilingwan").active=2==e.received,this.node.getChildByName("icon").active=0==e.received},t.prototype.setIcon=function(e){this.node.getChildByName("icon").active=e},t=o([d],t)}(a.default));i.GuildHongBaoItem=f,cc._RF.pop()},{"../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../model/GuildModel":"GuildModel"}],GuildHongBaoTip:[function(e,t,i){"use strict";cc._RF.push(t,"81b5bji9/dAEb3hbvOCl5aQ","GuildHongBaoTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/GuildModel"),r=e("../../../engine/SpriteFrameComponent"),c=e("../RedPacket/packItemModel"),l=e("../../../engine/DateUtil"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(e){this.protoPack=e,this.itemnode=this.findChild(this.node,"panel/view/content/rankitem"),this.itemnode.active=!1},t.prototype.onShow=function(){this.setTopUI();var e=this.node.getChildByName("hbspstr"),t=this.protoPack.getRecvListList();e.getComponent(cc.Sprite).spriteFrame=e.getComponent(r.SpriteFrameComponent).spriteFrameList[this.protoPack.getConfigId()-1],this.node.getChildByName("titile").getComponent(cc.Label).string=this.protoPack.getMessage(),this.node.getChildByName("name").getComponent(cc.Label).string=this.protoPack.getName(),this.node.getChildByName("rednum").getComponent(cc.Label).string=this.protoPack.getRecvNum()+"/"+this.protoPack.getTotalNum(),this.node.getChildByName("time").getComponent(cc.Label).string=l.default.formatLeftTime4(1e3*this.protoPack.getRemainder());for(var i=[],n=0;n<t.length;n++){var o=c.default.getModel(t[n]);i.push(o)}i.sort(function(e,t){return t.giftCoin-e.giftCoin});for(var a=0;a<i.length;a++)this.addInitItem(i[a],a)},t.prototype.addInitItem=function(e,t){var i=cc.instantiate(this.itemnode);i.parent=this.itemnode.parent,i.active=!0,i.getChildByName("top").active=0==t,i.getChildByName("money").getComponent(cc.Label).string=e.giftCoin.toString(),i.getChildByName("roleName").getComponent(cc.Label).string=e.heroName;var n=i.getChildByName("pos");n.getComponent(cc.Label).string=s.GuildModel.getPositonWord(e.pos),n.color=s.GuildModel.getPositonColor(e.pos),i.getChildByName("time").getComponent(cc.Label).string=l.default.formatDateStr3(1e3*e.giftTime)+" "+l.default.formatHourMinStr(1e3*e.giftTime);var o=i.getChildByName("zhiyeicon");o.getComponent(cc.Sprite).spriteFrame=o.getComponent(r.SpriteFrameComponent).spriteFrameList[e.heroCareer-1]},t=o([f],t)}(a.default));i.GuildHongBaoTip=g,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/ViewBase":"ViewBase","../../model/GuildModel":"GuildModel","../RedPacket/packItemModel":"packItemModel"}],GuildHongBao:[function(e,t,i){"use strict";cc._RF.push(t,"48850v/dStF0oKQiYF1T3Nz","GuildHongBao");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../../engine/UIManager"),c=e("../../../engine/EventManager"),l=e("../../event/CommonEvent"),d=e("../../model/GuildModel"),f=e("../../../game/config/GuildConfig"),g=e("../../config/ITemsConfig"),h=e("../../config/WordConfig"),u=e("../../model/RoleInfoModel"),p=e("./GuildHongBaoItem"),m=e("../../../engine/SpriteFrameComponent"),C=e("../../prefab/ItemPrefab"),_=e("../../utils/NameHelper"),v=e("../PublicTipView"),y=e("../../config/ViewConfig"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GuildHongBaoItem=null,t.itemprefab=null,t.fahongbao=null,t.fahongbaolist=[],t.hbmask=null,t.hbmask1=null,t.hbmask2=null,t.hbspstr=null,t.editBoxnum=null,t.editBoxnstr=null,t.itemcontent=null,t.money=null,t.yuanbao=null,t.gongxian=null,t.startnum=null,t.endnum=null,t.qiangcontent=null,t.qianghongbao=null,t.nobag=null,t.fahongbaoRank=null,t.toppeople=null,t.topnodepeople=null,t.rankcontent=null,t.rankitem=null,t.ToggleTable=0,t.fahongbaonum=2,t.isrunaciont=!1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(e){this.ToggleTable=e||0},t.prototype.onEnable=function(){},t.prototype.onShow=function(){this.node.getChildByName("button_wenhao").on(cc.Node.EventType.TOUCH_END,this.onButtonWenhao,this);for(var e=this.getChild(this.node,"toggle"),t=0;t<e.childrenCount;t++){e.children[t].on("toggle",this.onToggleTable.bind(this,t),this)}this.fahongbao=this.node.getChildByName("panel1"),this.hbspstr=this.fahongbao.getChildByName("hbspstr"),this.editBoxnum=this.fahongbao.getChildByName("editBoxnum").getComponent(cc.EditBox),this.editBoxnum.node.on("text-changed",this.onEditBoxnumEnd,this),this.editBoxnstr=this.fahongbao.getChildByName("editBoxnstr").getComponent(cc.EditBox),this.itemcontent=this.fahongbao.getChildByName("itemcontent"),this.money=this.fahongbao.getChildByName("money").getComponent(cc.Label),this.yuanbao=this.fahongbao.getChildByName("yuanbao").getComponent(cc.Label),this.gongxian=this.fahongbao.getChildByName("gongxian").getComponent(cc.Label),this.fahongbao.getChildByName("fsbtn").on(cc.Node.EventType.TOUCH_END,this.onSendHongBao,this),this.fahongbao.getChildByName("btnLeft").on(cc.Node.EventType.TOUCH_END,this.onRunHongBao.bind(this,!0)),this.fahongbao.getChildByName("btnright").on(cc.Node.EventType.TOUCH_END,this.onRunHongBao.bind(this,!1));for(t=1;t<=5;t++){var i=this.findChild(this.fahongbao,"hongbaocontent/hb"+t);1==t?i.zIndex=2:2==t?i.zIndex=4:3==t?i.zIndex=10:4==t?i.zIndex=3:5==t&&(i.zIndex=1),this.fahongbaolist.push(i)}this.findChild(this.fahongbao,"hongbaocontent/mask").zIndex=5,this.qianghongbao=this.node.getChildByName("panel2"),this.qiangcontent=this.findChild(this.node,"panel2/view/content"),this.hbmask=this.node.getChildByName("hbmask"),this.hbmask1=this.hbmask.getChildByName("hbmask1"),this.hbmask2=this.hbmask.getChildByName("hbmask2"),this.nobag=this.findChild(this.node,"panel2/nobag"),this.hbmask.active=!1,this.hbmask1.on(cc.Node.EventType.TOUCH_END,this.closeHbMask,this),this.fahongbaoRank=this.node.getChildByName("panel3"),this.toppeople=this.findChild(this.fahongbaoRank,"topnum/people"),this.toppeople.getChildByName("btnmobai").on(cc.Node.EventType.TOUCH_END,this.onLingJiang.bind(this,0)),this.toppeople.getChildByName("btnlingjiang").on(cc.Node.EventType.TOUCH_END,this.onLingJiang.bind(this,0)),this.topnodepeople=this.findChild(this.fahongbaoRank,"topnum/nopeople"),this.rankcontent=this.findChild(this.fahongbaoRank,"scrollview/view/content"),this.rankitem=this.rankcontent.getChildByName("rankitem"),this.rankitem.active=!1,c.EventManager.instance.on(l.CommonEvent.Event_Guild_Redenvelope_Info,this.onRefreshPlan2,this),c.EventManager.instance.on(l.CommonEvent.Event_Guild_Redenvelope_Rank,this.onRefreshPlan3,this),d.GuildModel.s_guild_redenvelope_info(),d.GuildModel.s_guild_redenvelope_rank(),this.onToggleTable()},t.prototype.onButtonWenhao=function(){r.default.instance.createView(y.default.gameView.PublicTipView,null,v.RuleType.TYPE_GuildHongBao)},t.prototype.onSendHongBao=function(){var e=this.editBoxnum.string,t=this.editBoxnstr.string;if(e)if(_.NameHelper.isScreenwordStr(t))h.WordConfig.showWord(61276);else{t||(t=this.editBoxnstr.placeholder);var i=f.GuildConfig.GuildHbConfigMap.get(this.fahongbaonum+1);d.GuildModel.s_guild_redenvelope_buy(this.fahongbaonum+1,e,i.chargeid[0],t)}else h.WordConfig.showWord(61611)},t.prototype.onRunHongBao=function(e){if(!this.isrunaciont)if(this.isrunaciont=!0,e){--this.fahongbaonum<0&&(this.fahongbaonum=this.fahongbaolist.length-1);for(var t=cc.instantiate(this.fahongbaolist[0]),i=this.fahongbaolist[0].zIndex,n=0;n<this.fahongbaolist.length;++n){var o=this.fahongbaolist[n];if(n==this.fahongbaolist.length-1)this.runActionHB(o,t,i);else{var a=this.fahongbaolist[n+1];this.runActionHB(o,a)}}}else{++this.fahongbaonum>=this.fahongbaolist.length&&(this.fahongbaonum=0);for(t=cc.instantiate(this.fahongbaolist[this.fahongbaolist.length-1]),i=this.fahongbaolist[this.fahongbaolist.length-1].zIndex,n=this.fahongbaolist.length-1;n>=0;--n){o=this.fahongbaolist[n];if(0==n)this.runActionHB(o,t,i);else{a=this.fahongbaolist[n-1];this.runActionHB(o,a)}}}},t.prototype.onRefreshPlan1=function(){var e=f.GuildConfig.GuildHbConfigMap.get(this.fahongbaonum+1);for(var t in this.hbspstr.getComponent(cc.Sprite).spriteFrame=this.hbspstr.getComponent(m.SpriteFrameComponent).spriteFrameList[this.fahongbaonum],this.money.string=e.packet.toString(),this.yuanbao.string=e.resource[2],this.gongxian.string=e.capital.toString(),this.itemcontent.removeAllChildren(),e.ress){(i=cc.instantiate(this.itemprefab)).getComponent(C.default).initResource(Number(t),e.ress[t]),this.itemcontent.addChild(i)}for(var t in e.items){var i=cc.instantiate(this.itemprefab),n=g.ITemsConfig.getITemsConfigById(t);i.getComponent(C.default).init(n,!0),i.getComponent(C.default).setNumTxt(e.items[t],!0),this.itemcontent.addChild(i)}this.startnum=e.count[0],this.endnum=e.count[1],this.editBoxnum.placeholder=cc.js.formatStr(h.WordConfig.getWord(61613),this.startnum,this.endnum),this.editBoxnstr.placeholder=e.Message,this.onEditBoxnumEnd()},t.prototype.onRefreshPlan2=function(e){var t=this;void 0===e&&(e=null),this.qiangcontent.removeAllChildren();var i=d.GuildModel.instance.guildTRedenvelopeInfo;i.sort(function(e,t){return e.received==t.received?t.id-e.id:e.received-t.received}),i.forEach(function(e){var i=cc.instantiate(t.GuildHongBaoItem);i.getComponent(p.GuildHongBaoItem).init(e),t.qiangcontent.addChild(i),i.on(cc.Node.EventType.TOUCH_END,t.onThouchHB.bind(t,i,e.id,e.received))}),this.nobag.active=0==i.length},t.prototype.onRefreshPlan3=function(){var e=d.GuildModel.instance.guildRedRankInfo,t=e.length,i=this.rankcontent.children.length,n=t>i?t:i;this.toppeople.active=t>0,this.topnodepeople.active=0==t;for(var o=0;o<n;o++)if(0==o)this.setrankitem(this.toppeople,e[o],o);else{var a=void 0;this.rankcontent.children[o]?(a=this.rankcontent.children[o],this.setrankitem(a,e[o],o)):((a=cc.instantiate(this.rankitem)).parent=this.rankitem.parent,this.setrankitem(a,e[o],o,!0)),a.active=o<t}},t.prototype.setrankitem=function(e,t,i,n){if(void 0===n&&(n=!1),t){var o=e.getChildByName("btnmobai");o.active=0==t.reward&&u.default.instance.roleId!=t.hero_id.toString(),n&&o.on(cc.Node.EventType.TOUCH_END,this.onLingJiang.bind(this,i));var a=e.getChildByName("btnlingjiang");a.active=0==t.reward&&u.default.instance.roleId==t.hero_id.toString(),n&&a.on(cc.Node.EventType.TOUCH_END,this.onLingJiang.bind(this,i));var s=e.getChildByName("zhiyeicon");s.getComponent(cc.Sprite).spriteFrame=s.getComponent(m.SpriteFrameComponent).spriteFrameList[t.occupation-1];var r=e.getChildByName("pos");r.getComponent(cc.Label).string=d.GuildModel.getPositonWord(t.pos),r.color=d.GuildModel.getPositonColor(t.pos),e.getChildByName("money").getComponent(cc.Label).string=t.total_send,e.getChildByName("name").getComponent(cc.Label).string=t.name,e.getChildByName("order")&&(e.getChildByName("order").getComponent(cc.Label).string=t.idx)}},t.prototype.onLingJiang=function(e){d.GuildModel.s_guild_redenvelope_reward(d.GuildModel.instance.guildRedRankInfo[e].idx)},t.prototype.onEditBoxnumEnd=function(){var e=this.editBoxnum.string;e&&(Number(e)<this.startnum&&(e=this.startnum),Number(e)>this.endnum&&(e=this.endnum),this.editBoxnum.string=e.toString())},t.prototype.runActionHB=function(e,t,i){var n=this;void 0===i&&(i=null),e.runAction(cc.sequence(cc.spawn(cc.moveTo(.2,t.x,t.y),cc.scaleTo(.2,t.scale),cc.callFunc(function(){e.zIndex=i||t.zIndex})),cc.callFunc(function(){n.isrunaciont=!1,n.onRefreshPlan1()})))},t.prototype.onThouchHB=function(e,t,i){var n=this;if(!this.isrunaciont)if(0==i){this.isrunaciont=!0,this.hbmask.active=!0,this.hbmask2.removeAllChildren();var o=cc.instantiate(e);o.parent=this.hbmask2,o.getComponent(p.GuildHongBaoItem).setIcon(!1),o.x=0,o.y=0,o.on(cc.Node.EventType.TOUCH_END,function(){d.GuildModel.s_guild_redenvelope_recv(t),n.closeHbMask()})}else d.GuildModel.s_guild_redenvelope_details(t),this.closeHbMask()},t.prototype.closeHbMask=function(){var e=this;this.hbmask.active=!1,setTimeout(function(){e.isrunaciont=!1},200)},t.prototype.onToggleTable=function(e){switch(void 0===e&&(e=this.ToggleTable),s.MusicHelper.play_click(),this.ToggleTable=e,this.getChild(this.node,"toggle").children[e].getComponent(cc.Toggle).isChecked=!0,this.fahongbao.active=0==this.ToggleTable,this.qianghongbao.active=1==this.ToggleTable,this.fahongbaoRank.active=2==this.ToggleTable,this.ToggleTable){case 0:this.onRefreshPlan1();break;case 1:this.onRefreshPlan2();break;case 2:this.onRefreshPlan3()}},o([M(cc.Prefab)],t.prototype,"GuildHongBaoItem",void 0),o([M(cc.Prefab)],t.prototype,"itemprefab",void 0),t=o([I],t)}(a.default);i.GuildHongBao=w,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../../game/config/GuildConfig":"GuildConfig","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/NameHelper":"NameHelper","../PublicTipView":"PublicTipView","./GuildHongBaoItem":"GuildHongBaoItem"}],GuildInfomationView:[function(e,t,i){"use strict";cc._RF.push(t,"eaf6b6kxlFDrqZoqCDqCjJF","GuildInfomationView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../../engine/EventManager"),c=e("../../event/CommonEvent"),l=e("../../utils/UIHelper"),d=e("../../model/GuildModel"),f=e("../../prefab/GuildinfoitemPrefab"),g=e("../../prefab/GuildApplyItemPrefab"),h=e("../../../game/config/GuildConfig"),u=e("../../../game/config/BuffConfig"),p=e("../../../engine/UIManager"),m=e("../../config/ViewConfig"),C=e("./GuildView"),_=e("../../model/RoleInfoModel"),v=e("../../config/WordConfig"),y=e("../../utils/NameHelper"),b=e("../../config/DefaultConfig"),I=cc._decorator,M=I.ccclass,w=I.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guildinfoitem=null,t.guildapplyitem=null,t.infonode=null,t.guildgonggao=null,t.guildrenming=null,t.ggeditbox=null,t.guildInfoScrv=null,t.guildInfocontent=null,t.guildapplylist=null,t.guildapplyScrv=null,t.guildapplycontent=null,t.guildsetting=null,t.applylist=null,t.currentdata=null,t.positon=null,t.positionlist=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onEnable=function(){},t.prototype.init=function(){this.initguildinfomation()},t.prototype.onShow=function(){this.infonode.active=!1,this.guildgonggao.active=!1,this.guildrenming.active=!1,this.guildapplylist.active=!1,this.guildsetting.active=!1;var e=d.GuildModel.instance.guildinfo;this.getChild(this.node,"btngonggao").active=!1,this.getChild(this.node,"name",cc.Label).string=e.name,this.getChild(this.node,"level",cc.Label).string="lv."+e.level,this.getChild(this.node,"name2",cc.Label).string=e.president;var t=h.GuildConfig.GuildInfoConfigMap.get(e.level).buff,i=u.BuffConfig.getConfigById(t).magic_value[0][55];this.getChild(this.node,"jiacheng",cc.Label).string=(i/100).toFixed(2)+"%",r.EventManager.instance.on(c.CommonEvent.Event_Guild_Member_Management,this.ShowInfo,this),r.EventManager.instance.on(c.CommonEvent.Event_Guild_UP_Apply_LIST,this.initApplyView,this),r.EventManager.instance.on(c.CommonEvent.Event_Guild_ANNOUNCEMENT,this.upAnnouncement,this),r.EventManager.instance.on(c.CommonEvent.Event_Guild_UP_IFMT_INFOVIEW,this.initUpInfoVieww,this),this.getChild(this.node,"btnliebiao").active=!1,this.getChild(this.node,"btntuichu").x=0,this.initUpInfoVieww(),d.GuildModel.s_guild_info(),d.GuildModel.s_guild_announcement()},t.prototype.initguildinfomation=function(){var e=this.getChild(this.node,"btngonggao");e.active=!1,e.on(cc.Node.EventType.TOUCH_END,this.onBtnGongGao,this),this.getChild(this.node,"btntuichu").on(cc.Node.EventType.TOUCH_END,this.onBtnTuiChu,this),this.getChild(this.node,"btnliebiao").on(cc.Node.EventType.TOUCH_END,this.onBtnLieBiao,this),this.infonode=this.getChild(this.node,"infonode");var t=this.getChild(this.infonode,"btnnode");this.getChild(t,"btnappointment").on(cc.Node.EventType.TOUCH_END,this.onBtnAppointment,this),this.getChild(t,"btnsee").on(cc.Node.EventType.TOUCH_END,this.onBtnSee,this),this.getChild(t,"btnout").on(cc.Node.EventType.TOUCH_END,this.onBtnOut,this),this.setCallBackClose(this.infonode),this.guildgonggao=this.findChild(this.node,"guildgonggao"),this.ggeditbox=this.getChild(this.guildgonggao,"ggeditbox"),this.setCallBackClose(this.guildgonggao),this.getChild(this.guildgonggao,"btnqvxiao").on(cc.Node.EventType.TOUCH_END,this.onBtnQvXiao,this),this.getChild(this.guildgonggao,"btnxiugai").on(cc.Node.EventType.TOUCH_END,this.onBtXiuGai,this),this.guildrenming=this.findChild(this.node,"guildrenming"),this.setCallBackClose(this.guildrenming),this.getChild(this.guildrenming,"btnzhiwei").on(cc.Node.EventType.TOUCH_END,this.onBtnZhiwei,this),this.guildInfoScrv=this.findChild(this.node,"panel"),this.guildInfoScrv.on("scroll-to-bottom",this.onUpInfoVieww,this),this.guildInfoScrv.on("bounce-bottom",this.onUpInfoVieww,this),this.guildInfocontent=this.findChild(this.node,"panel/view/content"),this.guildapplylist=this.findChild(this.node,"guildapplylist"),this.guildapplyScrv=this.findChild(this.guildapplylist,"panel"),this.guildapplyScrv.on("scroll-to-bottom",this.onUpApplyView,this),this.guildapplyScrv.on("bounce-bottom",this.onUpApplyView,this),this.guildapplycontent=this.findChild(this.guildapplylist,"panel/view/content"),this.getChild(this.guildapplylist,"btnrefuse").on(cc.Node.EventType.TOUCH_END,this.onBtnAllRefuse,this),this.getChild(this.guildapplylist,"btnsetting").on(cc.Node.EventType.TOUCH_END,this.onBtnSetting,this),this.getChild(this.guildapplylist,"btnallagree").on(cc.Node.EventType.TOUCH_END,this.onBtnAllAgree,this),this.setCallBackClose(this.guildapplylist),this.guildsetting=this.findChild(this.node,"guildsetting"),this.getChild(this.guildsetting,"pworeditbox").on("text-changed",function(e){var t=e.string.replace(/[^0-9]/gi,"");e.string=t}),this.getChild(this.guildsetting,"btndetermine").on(cc.Node.EventType.TOUCH_END,this.onBtnDetermine,this),this.setCallBackClose(this.guildsetting)},t.prototype.upAnnouncement=function(e){this.getChild(this.node,"gonggaolabel",cc.Label).string=e},t.prototype.initApplyView=function(e){this.applylist=e,this.onUpApplyView(null)},t.prototype.onUpApplyView=function(e,t){void 0===t&&(t=!1),t&&(this.guildapplycontent.removeAllChildren(),this.guildapplyScrv.getComponent(cc.ScrollView).scrollToTop());var i=this.applylist,n=this.guildapplycontent.children.length,o=i.length,a=o-n>10?n+10:o;if(o>n)for(var s=n;s<a;s++){var r=cc.instantiate(this.guildapplyitem),c=i[s];r.getComponent(g.GuildApplyItemPrefab).init(c),this.guildapplycontent.addChild(r)}},t.prototype.initUpInfoVieww=function(){var e=this;this.guildInfocontent.removeAllChildren(),this.guildInfoScrv.getComponent(cc.ScrollView).scrollToTop();for(var t=0;t<5;t++)this.positionlist[t]=0;d.GuildModel.instance.guildinfo.memberList.forEach(function(t){e.positionlist[t.position]+=1}),this.onUpInfoVieww()},t.prototype.onUpInfoVieww=function(){var e=d.GuildModel.instance.guildinfo.memberList;e.sort(function(e,t){return e.position-t.position});var t=this.guildInfocontent.children.length,i=e.length,n=i-t>10?t+10:i;if(i>t)for(var o=t;o<n;o++){var a=cc.instantiate(this.guildinfoitem),s=e[o];a.getComponent(f.GuildInfoItemPrefab).init(s),this.guildInfocontent.addChild(a),s.id==Number(_.default.instance.roleId)&&(this.positon=s.position,this.positon<=d.PositonType.VicePresident&&(this.getChild(this.node,"btngonggao").active=!0,this.getChild(this.node,"btnliebiao").active=!0,this.getChild(this.node,"btntuichu").x=-127,d.GuildModel.s_guild_apply_list()))}},t.prototype.onBtnDetermine=function(){var e=this.getChild(this.guildsetting,"pworeditbox",cc.EditBox).string,t=this.getChild(this.guildsetting,"toggle",cc.Toggle).isChecked;d.GuildModel.s_guild_setting(t?1:0,0==Number(e)?-1:1e4*Number(e)),this.guildsetting.active=!1},t.prototype.onBtnAllRefuse=function(){this.guildapplycontent.children.forEach(function(e){e.getComponent(g.GuildApplyItemPrefab).onBtnRefuse(null)})},t.prototype.onBtnAllAgree=function(){this.guildapplycontent.children.forEach(function(e){e.getComponent(g.GuildApplyItemPrefab).onBtnAdopt(null)})},t.prototype.onBtnSetting=function(){var e=d.GuildModel.instance.guildinfo;this.guildsetting.active=!0,this.getChild(this.guildsetting,"pworeditbox",cc.EditBox).string=-1==e.power_limit?0:e.power_limit/1e4,this.getChild(this.guildsetting,"toggle",cc.Toggle).isChecked=1==e.auto_join},t.prototype.onBtnZhiwei=function(){var e=this;s.MusicHelper.play_click();for(var t=this.getChild(this.guildrenming,"rmtogglecontainer"),i=null,n=0;n<t.childrenCount;n++){t.children[n].getComponent(cc.Toggle).isChecked&&(i=n+1)}var o=v.WordConfig.getWord(61356);switch(i){case 1:o=v.WordConfig.getWord(61353);break;case 2:o=v.WordConfig.getWord(61354);break;case 3:o=v.WordConfig.getWord(61355);break;default:o=v.WordConfig.getWord(61356)}var a=cc.js.formatStr(v.WordConfig.getWord(61372),this.currentdata.name)+o;p.default.instance.createView(m.default.gameView.DialogCheck,null,a,function(t){t&&(e.guildrenming.active=!1,d.GuildModel.s_guild_member_change(e.currentdata.id,i))})},t.prototype.onBtnGongGao=function(){s.MusicHelper.play_click(),this.guildgonggao.active=!0},t.prototype.onBtnTuiChu=function(){var e=this;s.MusicHelper.play_click();var t=v.WordConfig.getWord(61378),i=b.DefaultConfig.getConfigById(102).value,n=i[d.GuildModel.instance.guildinfo.leaveCount+1];"number"!=typeof n&&(n=i[9]);var o=Math.floor(n/3600),a=Math.floor(n%3600/60);n>0&&(t=cc.js.formatStr(v.WordConfig.getWord(61395),o,a)),p.default.instance.createView(m.default.gameView.DialogCheck,null,t,function(t){t&&(d.GuildModel.s_guild_leave(),e.node.parent.parent.getComponent(C.GuildView).onToggleTable(1))})},t.prototype.onBtnLieBiao=function(){s.MusicHelper.play_click(),this.applylist=[],this.guildapplylist.active=!0,this.onUpApplyView(null,!0),d.GuildModel.s_guild_apply_list()},t.prototype.onBtnAppointment=function(){s.MusicHelper.play_click(),this.guildrenming.active=!0,this.infonode.active=!1;var e=d.GuildModel.instance.guildinfo,t=h.GuildConfig.GuildInfoConfigMap.get(e.level),i=this.getYellowRichStr(v.WordConfig.getWord(61379))+" "+v.WordConfig.getWord(61380);this.getChild(this.guildrenming,"huizhang").getComponent(cc.RichText).string=i;var n=this.getYellowRichStr(v.WordConfig.getWord(61381))+this.getGreenRichStr(" ("+this.positionlist[d.PositonType.VicePresident]+"/"+t.position[d.PositonType.VicePresident-1][d.PositonType.VicePresident]+") ")+this.getYellowRichStr(": ")+v.WordConfig.getWord(61382);this.getChild(this.guildrenming,"fuhuizhang").getComponent(cc.RichText).string=n;var o=this.getYellowRichStr(v.WordConfig.getWord(61383))+this.getGreenRichStr(" ("+this.positionlist[d.PositonType.Elite]+"/"+t.position[d.PositonType.Elite-1][d.PositonType.Elite]+") ")+this.getYellowRichStr(": ")+v.WordConfig.getWord(61384);this.getChild(this.guildrenming,"jingying").getComponent(cc.RichText).string=o;var a=this.getYellowRichStr(v.WordConfig.getWord(61385))+" "+v.WordConfig.getWord(61386);this.getChild(this.guildrenming,"chengyuan").getComponent(cc.RichText).string=a},t.prototype.onBtnSee=function(){s.MusicHelper.play_click(),this.infonode.active=!1,l.UIHelper.showPlayerDetail(this.currentdata.id)},t.prototype.onBtnOut=function(){var e=this;s.MusicHelper.play_click(),this.infonode.active=!1;var t=cc.js.formatStr(v.WordConfig.getWord(61387),this.currentdata.name);p.default.instance.createView(m.default.gameView.DialogCheck,null,t,function(t){t&&d.GuildModel.s_guild_kick(e.currentdata.id)})},t.prototype.onBtnQvXiao=function(){s.MusicHelper.play_click(),this.guildgonggao.active=!1},t.prototype.onBtXiuGai=function(){s.MusicHelper.play_click();var e=this.ggeditbox.getComponent(cc.EditBox).string;""==e&&(e=" ");var t=this;function i(){t.guildgonggao&&(t.guildgonggao.active=!1),d.GuildModel.s_guild_modify_announcement(e)}y.NameHelper.getPingbizi(e,function(e){i()},function(){i()})},t.prototype.ShowInfo=function(e){this.currentdata=e.data,this.infonode.active=!0;var t=this.getChild(this.infonode,"btnnode"),i=e.event.touch.getLocation(),n=cc.winSize,o=cc.view.getDesignResolutionSize(),a=(n.width-o.width)/2,s=(n.height-o.height)/2;i.x-=a,i.y-=s,t.position=t.parent.convertToNodeSpaceAR(i),t.x<o.width/2&&(t.x+=t.width);var r=this.positon<=d.PositonType.VicePresident&&this.currentdata.id!=Number(_.default.instance.roleId);this.getChild(t,"btnappointment").active=r,this.getChild(t,"btnout").active=r},t.prototype.setCallBackClose=function(e){e.getChildByName("darkLayer")&&this.getChild(e,"darkLayer").on(cc.Node.EventType.TOUCH_END,function(){s.MusicHelper.play_click(),e.active=!1}),e.getChildByName("btnclose")&&this.getChild(e,"btnclose").on(cc.Node.EventType.TOUCH_END,function(){s.MusicHelper.play_click(),e.active=!1})},t.prototype.getYellowRichStr=function(e){return"<color=#ffd87d>"+e+"</c>"},t.prototype.getGreenRichStr=function(e){return"<color=#0cff00>"+e+"</c>"},t.prototype.setTopShow=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=null),e.parent=t?p.default.instance.getTopRoot():i||this.node,e.active=t},o([w(cc.Prefab)],t.prototype,"guildinfoitem",void 0),o([w(cc.Prefab)],t.prototype,"guildapplyitem",void 0),t=o([M],t)}(a.default);i.GuildInfomationView=k,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../../game/config/BuffConfig":"BuffConfig","../../../game/config/GuildConfig":"GuildConfig","../../config/DefaultConfig":"DefaultConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/GuildApplyItemPrefab":"GuildApplyItemPrefab","../../prefab/GuildinfoitemPrefab":"GuildinfoitemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/NameHelper":"NameHelper","../../utils/UIHelper":"UIHelper","./GuildView":"GuildView"}],GuildListView:[function(e,t,i){"use strict";cc._RF.push(t,"67297QnBUNP7Z3M+7iv3oLS","GuildListView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../../engine/EventManager"),c=e("../../event/CommonEvent"),l=e("../../model/GuildModel"),d=e("../../../game/config/DefaultConfig"),f=e("../../config/WordConfig"),g=e("../../utils/NameHelper"),h=e("../../prefab/GuilditemPrefab"),u=cc._decorator,p=u.ccclass,m=u.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guilditem=null,t.createguild=null,t.guildinfo=null,t.guildlistScrv=null,t.guildlistcontent=null,t.currentguild=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onEnable=function(){},t.prototype.init=function(){this.initguildlist()},t.prototype.onShow=function(){this.createguild.active=!1,this.guildinfo.active=!1;var e=!l.GuildModel.instance.guildinfo||0==l.GuildModel.instance.guildinfo.gid;this.getChild(this.node,"btncreate").active=e,this.getChild(this.node,"btnallapply").active=e,r.EventManager.instance.on(c.CommonEvent.Event_Guild_UP_LIST_VIEW,this.initList,this),r.EventManager.instance.on(c.CommonEvent.Event_Guild_Apply,this.onBtnApply,this),r.EventManager.instance.on(c.CommonEvent.Event_Guild_CreateClose,this.onCloseCreate,this),l.GuildModel.s_guild_list()},t.prototype.initguildlist=function(){this.getChild(this.node,"btncreate").on(cc.Node.EventType.TOUCH_END,this.onBtnCreate,this),this.getChild(this.node,"btnallapply").on(cc.Node.EventType.TOUCH_END,this.onBtnAllApply,this),this.guildinfo=this.getChild(this.node,"guildinfo"),this.guildinfo.active=!1,this.setCallBackClose(this.guildinfo),this.getChild(this.guildinfo,"btnapply2").on(cc.Node.EventType.TOUCH_END,this.onBtnApply2,this),this.createguild=this.getChild(this.node,"createguild"),this.createguild.active=!1,this.setCallBackClose(this.createguild),this.getChild(this.createguild,"btncreate").on(cc.Node.EventType.TOUCH_END,this.onBtnCreate2,this),this.guildlistScrv=this.findChild(this.node,"panel"),this.guildlistScrv.on("scroll-to-bottom",this.onUpListView,this),this.guildlistScrv.on("bounce-bottom",this.onUpListView,this),this.guildlistcontent=this.findChild(this.node,"panel/view/content")},t.prototype.initList=function(e){this.glist=e,this.glist.sort(function(e,t){return e.idx-t.idx}),this.onUpListView(null,!0)},t.prototype.onUpListView=function(e,t){void 0===t&&(t=!1),t&&(this.guildlistcontent.removeAllChildren(),this.guildlistScrv.getComponent(cc.ScrollView).scrollToTop());var i=this.glist,n=this.guildlistcontent.children.length,o=i.length,a=o-n>10?n+10:o;if(o>n)for(var s=n;s<a;s++){var r=cc.instantiate(this.guilditem),c=i[s];r.getComponent(h.GuildItem).init(c),this.guildlistcontent.addChild(r)}},t.prototype.onBtnCreate=function(){s.MusicHelper.play_click(),this.createguild.active=!0;var e=d.DefaultConfig.getConfigById(101).value[2];this.getChild(this.createguild,"money1").getComponent(cc.Label).string=e+f.WordConfig.getWord(60517),this.getChild(this.createguild,"money2").getComponent(cc.Label).string=e},t.prototype.onBtnCreate2=function(e){s.MusicHelper.play_click();var t=this.getChild(this.createguild,"guildedit").getComponent(cc.EditBox).string;if(""!=t)if(g.NameHelper.isAvailableName(t)){g.NameHelper.getPingbizi(t,function(e){i()},function(){i()})}else f.WordConfig.showWord(60331);else f.WordConfig.showWord(61364);function i(){l.GuildModel.s_guild_create(t)}},t.prototype.onCloseCreate=function(e){this.createguild.active=e},t.prototype.onBtnAllApply=function(){s.MusicHelper.play_click(),l.GuildModel.s_guild_onekey_apply()},t.prototype.onBtnApply=function(e){s.MusicHelper.play_click(),this.currentguild=e,this.guildinfo.active=!0,this.getChild(this.guildinfo,"guildname").getComponent(cc.Label).string=e.name,this.getChild(this.guildinfo,"guildlv").getComponent(cc.Label).string="lv."+e.level,this.getChild(this.guildinfo,"guildmoster").getComponent(cc.Label).string=e.president,this.getChild(this.guildinfo,"guildallzl").getComponent(cc.Label).string=e.allPower,this.getChild(this.guildinfo,"guildallrs").getComponent(cc.Label).string=e.memberCount+"/"+e.maxMember,l.GuildModel.instance.guildinfo&&l.GuildModel.instance.guildinfo.gid>0?this.getChild(this.guildinfo,"btnapply2").color=cc.Color.GRAY:this.getChild(this.guildinfo,"btnapply2").color=cc.Color.WHITE},t.prototype.onBtnApply2=function(){l.GuildModel.instance.guildinfo&&0!=l.GuildModel.instance.guildinfo.gid||(s.MusicHelper.play_click(),this.guildinfo.active=!1,l.GuildModel.s_guild_apply(this.currentguild.gid))},t.prototype.setCallBackClose=function(e){e.getChildByName("darkLayer")&&this.getChild(e,"darkLayer").on(cc.Node.EventType.TOUCH_END,function(){s.MusicHelper.play_click(),e.active=!1}),e.getChildByName("btnclose")&&this.getChild(e,"btnclose").on(cc.Node.EventType.TOUCH_END,function(){s.MusicHelper.play_click(),e.active=!1})},o([m(cc.Prefab)],t.prototype,"guilditem",void 0),t=o([p],t)}(a.default);i.GuildListView=C,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../../game/config/DefaultConfig":"DefaultConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../prefab/GuilditemPrefab":"GuilditemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/NameHelper":"NameHelper"}],GuildModel:[function(e,t,i){"use strict";cc._RF.push(t,"d229csvq6xDT6S1HnzQIUMd","GuildModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/ProtoConfig"),o=e("../../engine/ProtoUtils"),a=e("../../engine/GameSocket"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../utils/UIHelper"),l=e("../config/WordConfig"),d=e("../../engine/UIManager"),f=e("../config/ViewConfig"),g=e("./ChatRoomModel"),h=e("../config/ITemsConfig"),u=e("../config/DefaultConfig"),p=e("../config/GuildConfig"),m=e("../config/ChongZhiConfig"),C=e("./ServerTime"),_=e("../manager/RedPointManager"),v=e("./RoleInfoModel"),y=function(){return function(){}}();i.TMember=y;var b=function(){return function(){}}();i.TApply=b;var I=function(){return function(){}}();i.TDonate=I;var M=function(){return function(){}}();i.TGuild=M;var w=function(){return function(){}}();i.GuildDonateInfo=w;var k=function(){return function(){}}();i.GuildInfo=k;var S=function(){return function(){}}();i.GuildShopInfo=S;var P=function(){return function(){}}();i.TStore=P;var E=function(){return function(){}}();i.Tlibrary=E;var L=function(){return function(){}}();i.GuildSkillInfo=L;var T=function(){return function(){}}();i.GuildTaskList=T;var R=function(){return function(){}}();i.TreasuryItem=R;var N=function(){return function(){}}();i.TreasuryLog=N;var B=function(){return function(){}}();i.TRedenvelopeInfo=B;var A=function(){return function(){}}();i.TRedenvelopeRank=A;var G,x=function(){return function(){}}();i.TGuildRask=x,function(e){e[e.President=1]="President",e[e.VicePresident=2]="VicePresident",e[e.Elite=3]="Elite",e[e.Member=4]="Member"}(G=i.PositonType||(i.PositonType={}));var O=function(){function e(){this.eventIdList=[],this.protos=[],this.guildlist=[],this.guildinfo=null,this.guildapplylist=[],this.guildTreasurylist=[],this.guildTreasuryLoglist=[],this.guilddonateinfo=null,this.guildshoplist=new S,this.guildskillinfo=new L,this.guildTRedenvelopeInfo=[],this.guildRedRankInfo=[],this.guildtasklist=null,this.guildjpnexttime=null,this.GuildTaskColor=["#0CFF00","#00c0ff","#f702f4","#ff6c00","#ff0000"],this.eventIdList=[_.RedPointId.Guild1,_.RedPointId.Guild2,_.RedPointId.Guild3,_.RedPointId.GuildRank,_.RedPointId.GuildTask],_.default.getInstance().addHandler(this),this.protos=[n.ProtoConfig.c_guild_apply_list,n.ProtoConfig.c_guild_donate_info,n.ProtoConfig.c_guild_redenvelope_rank,n.ProtoConfig.c_guild_redenvelope_info,n.ProtoConfig.c_guild_redenvelope_single_info,n.ProtoConfig.c_guild_task_refresh,n.ProtoConfig.c_guild_task_operation]}return e.prototype.checkRedPoint=function(){var t=[],i=!1,n=!1,o=!1,a=!1,s=!1;if(e.instance.guildinfo&&e.instance.guildinfo.gid>0){if(e.instance.guilddonateinfo&&0==e.instance.guilddonateinfo.todayCoin&&(i=!0),e.instance.guildapplylist&&e.instance.guildapplylist.length>0&&(n=!0),e.instance.guildRedRankInfo)for(var r=e.instance.guildRedRankInfo,c=0;c<r.length;c++)if(0==r[c].reward){o=!0;break}if(e.instance.guildTRedenvelopeInfo)for(r=e.instance.guildTRedenvelopeInfo,c=0;c<r.length;c++)if(0==r[c].received){a=!0;break}if(e.instance.guildtasklist){var l=e.instance.guildtasklist,d=0,f=0;l.task_list.forEach(function(e){1==e.status||2==e.status?(++d,2==e.status&&(s=!0)):0==e.status&&++f}),d<p.GuildConfig.GuildInfoConfigMap.get(e.instance.guildinfo.level).num&&f>0&&(s=!0);var g=0,h=u.DefaultConfig.getConfigById(133).value;for(var m in h){0==h[m]&&++g}l.normal_cnt<g&&(s=!0),e.getJpRefresh()&&(s=!0)}}var C={id:_.RedPointId.Guild1,type:_.RedPointType.Default,show:i};t.push(C);var v={id:_.RedPointId.Guild2,type:_.RedPointType.Default,show:!1};t.push(v);var y={id:_.RedPointId.Guild3,type:_.RedPointType.Default,show:n};t.push(y);var b={id:_.RedPointId.GuildRank,type:_.RedPointType.Default,show:o};t.push(b);var I={id:_.RedPointId.GuildRedEnvelope,type:_.RedPointType.Default,show:a};t.push(I);var M={id:_.RedPointId.GuildTask,type:_.RedPointType.Default,show:s};return t.push(M),t},e.getPositonWord=function(e){var t=61356;switch(e){case G.President:t=61353;break;case G.VicePresident:t=61354;break;case G.Elite:t=61355}return l.WordConfig.getWord(t)},e.getPositonColor=function(e,t){void 0===t&&(t=!0);var i=cc.Color.WHITE,n="ffffff";switch(e){case G.President:case G.VicePresident:n="ff6c00";break;case G.Elite:n="00c0ff"}return t?i.fromHEX(n):n},e.proto_c_guild_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_info,t),a=new k,c=i.getMemberlistList();a.gid=i.getGid(),a.name=i.getName(),a.level=i.getLevel(),a.gold=i.getGold(),a.auto_join=i.getAutoJoin(),a.power_limit=i.getPowerLimit(),a.maxMember=i.getMaxmember(),a.allPower=i.getAllpower(),a.president=i.getPresident(),a.leaveCount=i.getLeavecount(),a.memberList=[],c.forEach(function(e){var t=new y;t.id=e.getId(),t.level=e.getLevel(),t.name=e.getName(),t.power=e.getPower(),t.position=e.getPosition(),t.prof=e.getProf(),t.donate=e.getDonate(),t.lastOnline=e.getLastonline(),a.memberList.push(t)}),e.instance.guildinfo&&0!=e.instance.guildinfo.gid?e.instance.guildinfo&&e.instance.guildinfo.gid>0&&0==a.gid?(e.instance.guildinfo=a,g.ChatRoomModel.clearChangeInfo(g.CHAT_TYPE.GUIDE),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Information,1),_.default.getInstance().checkRedPointById(_.RedPointId.Guild3)):(e.instance.guildinfo=a,s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UP_IFMT_INFOVIEW),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UPDATE_DATING)):(e.instance.guildinfo=a,e.instance.guildinfo.gid>0?(e.s_guild_library_info(),e.s_guild_treasury_info(),e.s_guild_treasury_log(),e.s_guild_redenvelope_info(),e.s_guild_redenvelope_rank(),e.s_guild_task_list(),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Information,0)):g.ChatRoomModel.clearChangeInfo(g.CHAT_TYPE.GUIDE))},e.proto_c_guild_create=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_create,t);0==i.getRet()&&e.s_guild_info(),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_CreateClose,0!=i.getRet())},e.proto_c_guild_apply=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_apply,e);if(0!=t.getRet()){var i=t.getApplytime();if(i>0){var a=Math.floor(i%86400/3600),s=Math.floor(i%86400%3600/60);c.UIHelper.showTip(cc.js.formatStr(l.WordConfig.getWord(61396),a,s))}}},e.proto_c_guild_onekey_apply=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_onekey_apply,e);if(0!=t.getRet()){var i=t.getApplytime();if(i>0){var a=Math.floor(i%86400/3600),s=Math.floor(i%86400%3600/60);c.UIHelper.showTip(cc.js.formatStr(l.WordConfig.getWord(61396),a,s))}}},e.proto_c_guild_apply_list=function(t){var i=[];o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_apply_list,t).getApplylistList().forEach(function(e){var t=new b;t.id=e.getId(),t.level=e.getLevel(),t.name=e.getName(),t.power=e.getPower(),i.push(t)}),e.instance.guildapplylist=i,s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UP_Apply_LIST,i)},e.proto_c_guild_leave=function(t){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_leave,t).getRet()&&e.s_guild_info()},e.proto_c_guild_kick=function(t){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_kick,t).getRet()&&e.s_guild_info()},e.proto_c_guild_dismiss=function(e){o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_dismiss,e).getRet()},e.proto_c_guild_donate_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_donate_info,t),a=new w;a.todayCoin=i.getTodaycoin(),a.todayCoinCount=i.getTodaycoincount(),a.totalCoin=i.getTotalcoin(),a.todayDiamond=i.getTodaydiamond(),a.todayDiamondCount=i.getTodaydiamondcount(),a.totalDiamond=i.getTotaldiamond(),a.totalDonate=i.getTotaldonate();var c=[];i.getDonatelistList().forEach(function(e){var t=new I;t.heroid=e.getHeroid(),t.prof=e.getProf(),t.name=e.getName(),t.position=e.getPosition(),t.count=e.getCount(),c.push(t)}),a.tdlist=c,e.instance.guilddonateinfo=a,s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_DONATE_INFO,a)},e.proto_c_guild_donate=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_donate,t);0==i.getRet()?(e.s_guild_donate_info(),e.s_guild_info(),l.WordConfig.showWord(61398)):1==i.getType()?c.UIHelper.showCoinNoEnough():2==i.getType()&&d.default.instance.createView(f.default.gameView.topUp)},e.proto_c_guild_levelup=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_levelup,t);i.getRet(),0==i.getRet()&&(l.WordConfig.showWord(61439),e.s_guild_info())},e.proto_c_guild_list=function(e){var t=[];o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_list,e).getGuildlistList().forEach(function(e){var i=new M;i.gid=e.getGid(),i.idx=e.getIdx(),i.name=e.getName(),i.level=e.getLevel(),i.memberCount=e.getMembercount(),i.maxMember=e.getMaxmember(),i.needPower=e.getNeedpower(),i.allPower=e.getAllpower(),i.president=e.getPresident(),t.push(i)}),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UP_LIST_VIEW,t)},e.proto_c_guild_setting=function(t){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_setting,t).getRet()&&e.s_guild_info()},e.proto_c_guild_member_change=function(t){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_member_change,t).getRet()&&e.s_guild_info()},e.proto_c_guild_announcement=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_announcement,e);t.getContent(),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_ANNOUNCEMENT,t.getContent())},e.proto_c_guild_modify_announcement=function(t){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_modify_announcement,t).getRet()&&e.s_guild_announcement()},e.proto_c_guild_apply_operation=function(t){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_apply_operation,t).getRet()&&e.s_guild_info()},e.proto_c_guild_store_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_store_info,t),a=[];i.getItemlistList().forEach(function(e){var t=new P;t.id=e.getId(),t.stock=e.getStock(),t.bought=e.getBought(),t.price=e.getPrice(),t.ulock=e.getUlock(),a.push(t)});var c=i.getType();e.instance.guildshoplist.itemList||(e.instance.guildshoplist.itemList=[]),e.instance.guildshoplist.itemList[c]=a,e.instance.guildshoplist.contribute=i.getContribute(),e.instance.guildshoplist.level=i.getLevel(),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UPDATE_SHOP)},e.proto_c_guild_store_buy=function(e){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_store_buy,e).getRet()&&s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UPDATE_SHOP_LEVEL_UP)},e.proto_c_guild_store_levelup=function(e){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_store_levelup,e).getRet()&&(l.WordConfig.showWord(61439),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UPDATE_SHOP_LEVEL_UP))},e.proto_c_guild_library_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_library_info,t),a=i.getSkillListList();e.instance.guildskillinfo.level=i.getLevel();var c=[];a.forEach(function(e){var t=new E;t.idx=e.getIdx(),t.unlock=e.getUnlock(),t.skillid=e.getSkillid(),c.push(t)}),c.sort(function(e,t){return e.idx-t.idx}),e.instance.guildskillinfo.tlibrary=c,s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_UPDATE_SKILL)},e.proto_c_guild_library_levelup=function(e){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_library_levelup,e).getRet()&&l.WordConfig.showWord(61439)},e.proto_c_guild_skill_levelup=function(e){0==o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_skill_levelup,e).getRet()&&l.WordConfig.showWord(61439)},e.proto_c_guild_treasury_info=function(t){var i=[];o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_treasury_info,t).getItemListList().forEach(function(t){var n=new R;n.id=t.getId(),n.item_type=t.getItemType(),n.item_num=t.getItemNum(),n.quality=t.getQuality(),n.stock=t.getStock(),n.price=t.getPrice(),n.endTime=t.getEndTime(),n.endnum=t.getEndNum(),i.push(n),h.ITemsConfig.getITemsConfigById(n.item_type)||g.ChatRoomModel.getItemByid(n.id.toString())||e.s_guild_treasury_item(n.id)}),i.sort(function(e,t){return e.id-t.id}),e.instance.guildTreasurylist=i,s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Treasury_Info)},e.proto_c_guild_treasury_deposit=function(e){o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_treasury_deposit,e)},e.proto_c_guild_treasury_takeout=function(t){0!=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_treasury_takeout,t).getRet()&&e.s_guild_treasury_info()},e.proto_c_guild_treasury_log=function(t){var i=[];o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_treasury_log,t).getLogListList().forEach(function(e){var t=new N;t.type=e.getType(),t.name=e.getName(),t.item_id=e.getItemId(),t.item_num=e.getItemNum(),t.quality=e.getQuality(),t.time=e.getTime(),i.push(t)}),i.sort(function(e,t){return t.time-e.time}),e.instance.guildTreasuryLoglist=i,s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Treasury_Log)},e.proto_c_guild_single_treasury_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_single_treasury_info,t),a=i.getType(),c=i.getItemList(),l=new R;l.id=c.getId(),l.item_type=c.getItemType(),l.item_num=c.getItemNum(),l.quality=c.getQuality(),l.stock=c.getStock(),l.price=c.getPrice(),l.endTime=c.getEndTime(),l.endnum=c.getEndNum();var d=!0;for(var f in e.instance.guildTreasurylist){var u=e.instance.guildTreasurylist[f];if(u.id==l.id&&u.item_type==l.item_type){d=!1,1==a?e.instance.guildTreasurylist[f].stock+=l.stock:(e.instance.guildTreasurylist[f].stock-=l.stock,e.instance.guildTreasurylist[f].stock<1&&e.instance.guildTreasurylist.splice(Number(f),1));break}}d&&e.instance.guildTreasurylist.push(l),e.instance.guildTreasurylist.sort(function(e,t){return e.id-t.id}),h.ITemsConfig.getITemsConfigById(l.item_type)||g.ChatRoomModel.getItemByid(l.id.toString())||e.s_guild_treasury_item(l.id),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Treasury_Info)},e.proto_c_guild_single_treasury_log=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_single_treasury_log,t).getLogList(),a=new N;a.type=i.getType(),a.name=i.getName(),a.item_id=i.getItemId(),a.item_num=i.getItemNum(),a.quality=i.getQuality(),a.time=i.getTime(),e.instance.guildTreasuryLoglist.unshift(a),e.instance.guildTreasuryLoglist.length>u.DefaultConfig.getConfigById(124).value&&e.instance.guildTreasuryLoglist.pop(),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Treasury_Log)},e.proto_c_guild_redenvelope_buy=function(e){o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_redenvelope_buy,e)},e.proto_c_guild_redenvelope_single_info=function(t){for(var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_redenvelope_single_info,t),a=e.getRedenvelopeInfoPro(i.getRedenvelopeInfo()),c=!1,l=0;l<e.instance.guildTRedenvelopeInfo.length;l++){e.instance.guildTRedenvelopeInfo[l].id==a.id&&(e.instance.guildTRedenvelopeInfo[l]=a,c=!0)}c||e.instance.guildTRedenvelopeInfo.push(a),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Redenvelope_Info)},e.proto_c_guild_redenvelope_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_redenvelope_info,t).getRedenvelopeListList();e.instance.guildTRedenvelopeInfo=[],i.forEach(function(t){var i=e.getRedenvelopeInfoPro(t);e.instance.guildTRedenvelopeInfo.push(i)}),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Redenvelope_Info)},e.proto_c_guild_redenvelope_details=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_redenvelope_details,t);d.default.instance.createView(f.default.gameView.guildhongbaoTip,null,i),e.s_guild_redenvelope_info()},e.proto_c_guild_redenvelope_recv=function(t){o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_redenvelope_recv,t);e.s_guild_redenvelope_info()},e.proto_c_guild_redenvelope_rank=function(t){var i=[];o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_redenvelope_rank,t).getRankListList().forEach(function(e){var t=new A;t.idx=e.getIdx(),t.hero_id=e.getHeroId(),t.name=e.getName(),t.occupation=e.getOccupation(),t.pos=e.getPos(),t.total_send=e.getTotalSend(),t.reward=e.getReward(),i.push(t)}),i.sort(function(e,t){return e.idx-t.idx}),e.instance.guildRedRankInfo=i,s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Redenvelope_Rank)},e.proto_c_guild_redenvelope_reward=function(t){o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_redenvelope_reward,t);e.s_guild_redenvelope_rank()},e.proto_c_guild_task_list=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_task_list,t);e.instance.guildtasklist;var a=new T;a.normal_cnt=i.getNormalCnt(),a.best_time=i.getBestTime(),a.task_list=[],i.getTaskListList().forEach(function(e){var t=new x;t.id=e.getId(),t.start_time=e.getStartTime(),t.end_time=e.getEndTime(),t.status=e.getStatus(),t.help=e.getHelp(),t.pos=e.getPos(),a.task_list.push(t)}),e.instance.guildtasklist=a,e.instance.guildtasklist.task_list.sort(function(e,t){return e.pos-t.pos}),e.getJpRefresh(!0),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Task_Info)},e.proto_c_guild_task_refresh=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_task_refresh,e),i=t.getRet(),a=t.getType();0==i?l.WordConfig.showWord(61674):1==a&&(l.WordConfig.showWord(60115),d.default.instance.createView(f.default.gameView.topUp))},e.proto_c_guild_task_operation=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_task_operation,t),a=i.getId(),c=i.getType(),d=i.getTask(),f=new x;if(3==c&&l.WordConfig.showWord(61687),2==c)e.s_guild_task_list();else{f.id=d.getId(),f.start_time=d.getStartTime(),f.end_time=d.getEndTime(),f.status=d.getStatus(),f.help=d.getHelp(),f.pos=d.getPos();for(var g=e.instance.guildtasklist.task_list,h=0;h<g.length;h++){var u=g[h];u.id==a&&f.id==u.id&&(e.instance.guildtasklist.task_list[h]=f)}e.instance.guildtasklist.task_list.sort(function(e,t){return e.pos-t.pos}),s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Task_Info)}},e.proto_c_guild_task_help=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_task_help,e);t.getRet(),t.getId(),t.getType(),t.getTime()},e.proto_c_guild_task_help_info=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_guild_task_help_info,e),i=t.getId(),a=t.getHeroId(),r=t.getStatus(),c=t.getTime();g.ChatRoomModel.TaskTypeList(i+"_"+a+"_"+c,r),s.EventManager.instance.dispatch(i+"_"+a+"_"+c)},e.s_guild_info=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_info);a.default.getInstance().sendToSocket(e)},e.s_guild_create=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_create);t.setName(e),a.default.getInstance().sendToSocket(t)},e.s_guild_apply=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_apply);t.setGid(e),a.default.getInstance().sendToSocket(t)},e.s_guild_onekey_apply=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_onekey_apply);a.default.getInstance().sendToSocket(e)},e.s_guild_apply_list=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_apply_list);a.default.getInstance().sendToSocket(e)},e.s_guild_leave=function(){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_leave);a.default.getInstance().sendToSocket(t),e.instance.guildinfo=null,e.instance.guilddonateinfo=null,e.instance.guildapplylist=[],_.default.getInstance().checkRedPointById(_.RedPointId.Guild3)},e.s_guild_kick=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_kick);t.setHeroid(e),a.default.getInstance().sendToSocket(t)},e.s_guild_dismiss=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_dismiss);a.default.getInstance().sendToSocket(e)},e.s_guild_donate_info=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_donate_info);a.default.getInstance().sendToSocket(e)},e.s_guild_donate=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_donate);t.setType(e),a.default.getInstance().sendToSocket(t)},e.s_guild_levelup=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_levelup);a.default.getInstance().sendToSocket(e)},e.s_guild_list=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_list);a.default.getInstance().sendToSocket(e)},e.s_guild_setting=function(e,t){var i=o.ProtoUtils.Create(n.ProtoConfig.s_guild_setting);i.setAutoJoin(e),i.setPowerLimit(t),a.default.getInstance().sendToSocket(i)},e.s_guild_member_change=function(e,t){var i=o.ProtoUtils.Create(n.ProtoConfig.s_guild_member_change);i.setHeroid(e),i.setPosition(t),a.default.getInstance().sendToSocket(i)},e.s_guild_announcement=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_announcement);a.default.getInstance().sendToSocket(e)},e.s_guild_modify_announcement=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_modify_announcement);t.setContent(e),a.default.getInstance().sendToSocket(t)},e.s_guild_apply_operation=function(e,t){var i=o.ProtoUtils.Create(n.ProtoConfig.s_guild_apply_operation);i.setHeroid(e),i.setOperation(t),a.default.getInstance().sendToSocket(i)},e.s_guild_store_info=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_store_info);t.setType(e),a.default.getInstance().sendToSocket(t)},e.s_guild_store_buy=function(e,t){var i=o.ProtoUtils.Create(n.ProtoConfig.s_guild_store_buy);i.setId(e),i.setNum(t),a.default.getInstance().sendToSocket(i)},e.s_guild_store_levelup=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_store_levelup);a.default.getInstance().sendToSocket(e)},e.s_guild_library_info=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_library_info);a.default.getInstance().sendToSocket(e)},e.s_guild_library_levelup=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_library_levelup);a.default.getInstance().sendToSocket(e)},e.s_guild_skill_levelup=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_skill_levelup);t.setIdx(e),a.default.getInstance().sendToSocket(t)},e.s_guild_treasury_info=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_treasury_info);a.default.getInstance().sendToSocket(e)},e.s_guild_treasury_deposit=function(e,t){var i=o.ProtoUtils.Create(n.ProtoConfig.s_guild_treasury_deposit);i.setItemId(e),i.setItemNum(t),a.default.getInstance().sendToSocket(i)},e.s_guild_treasury_takeout=function(e,t,i){var s=o.ProtoUtils.Create(n.ProtoConfig.s_guild_treasury_takeout);s.setType(e),s.setItem(t),s.setNum(i),a.default.getInstance().sendToSocket(s)},e.s_guild_treasury_log=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_treasury_log);a.default.getInstance().sendToSocket(e)},e.s_guild_treasury_item=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_treasury_item);t.setItemId(e),a.default.getInstance().sendToSocket(t)},e.s_guild_redenvelope_buy=function(e,t,i,s){var r=m.ChongZhiConfig.getChongZhiByIdAndPlatform(i),c=o.ProtoUtils.Create(n.ProtoConfig.s_guild_redenvelope_buy);c.setId(e),c.setNum(t),c.setRechargeId(r.id),c.setMessage(s),a.default.getInstance().sendToSocket(c)},e.s_guild_redenvelope_info=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_redenvelope_info);a.default.getInstance().sendToSocket(e)},e.s_guild_redenvelope_details=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_redenvelope_details);t.setId(e),a.default.getInstance().sendToSocket(t)},e.s_guild_redenvelope_recv=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_redenvelope_recv);t.setId(e),a.default.getInstance().sendToSocket(t)},e.s_guild_redenvelope_rank=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_redenvelope_rank);a.default.getInstance().sendToSocket(e)},e.s_guild_redenvelope_reward=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_redenvelope_reward);t.setIdx(e),a.default.getInstance().sendToSocket(t)},e.s_guild_task_list=function(){var e=o.ProtoUtils.Create(n.ProtoConfig.s_guild_task_list);a.default.getInstance().sendToSocket(e)},e.s_guild_task_refresh=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_guild_task_refresh);t.setType(e),a.default.getInstance().sendToSocket(t)},e.s_guild_task_operation=function(e,t){var i=o.ProtoUtils.Create(n.ProtoConfig.s_guild_task_operation);i.setId(e),i.setType(t),a.default.getInstance().sendToSocket(i)},e.s_guild_task_help=function(e,t,i,s){var r=o.ProtoUtils.Create(n.ProtoConfig.s_guild_task_help);r.setId(e),r.setType(t),r.setHeroId(i),r.setTime(s),a.default.getInstance().sendToSocket(r)},e.s_guild_task_help_info=function(e,t,i){var s=o.ProtoUtils.Create(n.ProtoConfig.s_guild_task_help_info);s.setId(e),s.setHeroId(t),s.setTime(i),a.default.getInstance().sendToSocket(s)},e.getRedenvelopeInfoPro=function(e){var t=new B;return t.id=e.getId(),t.config_id=e.getConfigId(),t.hero_id=e.getHeroId(),t.name=e.getName(),t.pos=e.getPos(),t.received=e.getReceived(),t},e.getJpRefresh=function(t){void 0===t&&(t=!1);var i=C.ServerTime.getServerTime();return e.instance.guildjpnexttime&&!t||(e.instance.guildjpnexttime=e.getJpTime()),i>=e.instance.guildjpnexttime},e.getJpTime=function(t){void 0===t&&(t=!1);var i=u.DefaultConfig.getConfigById(131).value,n=1e3*e.instance.guildtasklist.best_time,o=new Date(n),a=0,s=o.getHours(),r=o.getMinutes(),c=o.getSeconds(),l=null;for(var d in i){var f=i[d];if(f>s){a=f;break}(null==l||l>f)&&(l=f)}if(0==a&&(a=l),t)return a<10?"0"+a+":00":a+":00";var g=0;return a<s?((r>0||c>0)&&--a,g+=1e3*(24-s+a)*60*60):((r>0||c>0)&&--a,g+=1e3*(a-s)*60*60),n+(g+=c>0?1e3*(59-r)*60+1e3*(60-c):1e3*(60-r)*60)},e.prototype.getMyPositonType=function(){var e=G.Member;return this.guildinfo&&this.guildinfo.memberList&&this.guildinfo.memberList.every(function(t){return t.id!=parseInt(v.default.instance.roleId)||(e=t.position,!1)}),e},e.instance=new e,e}();i.GuildModel=O,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/ChongZhiConfig":"ChongZhiConfig","../config/DefaultConfig":"DefaultConfig","../config/GuildConfig":"GuildConfig","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../utils/UIHelper":"UIHelper","./ChatRoomModel":"ChatRoomModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],GuildPvPAwardView:[function(e,t,i){"use strict";cc._RF.push(t,"2c5c3FESEpItp9pBXje8CrA","GuildPvPAwardView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/ViewBase"),r=e("../../base/RadioButton"),c=e("../../config/GameConst"),l=e("../../config/GuildfightRewardConfig"),d=e("../../config/ITemsConfig"),f=e("../../model/GuildPvPModel"),g=e("../../model/ItemInfoModel"),h=e("../../prefab/ItemPrefab"),u=cc._decorator,p=u.ccclass,m=u.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.curentType=1,t}return n(t,e),t.prototype.onEnable=function(){this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.btnListNode=this.getChild(this.node,"frame/btnList"),this.layoutNode=this.getChild(this.node,"frame/info/layout")},t.prototype.initView=function(){var e=this;this.btnListNode.children.forEach(function(t,i){e.onAddEvent(t,e.onBtnClick.bind(e,t,i+1))}),this.initList(this.curentType)},t.prototype.initList=function(e){var t=this,i=a.default.getPassDay(f.GuildPvPModel.getInstance().starTime),n=e>=2?2:e,o=l.GuildfightRewardConfig.getConfigList(n,i);this.layoutNode.children.forEach(function(i,n){var a=t.getChild(i,"scrollView/view/content"),s=o[n],r=1==e||2==e?s.show_a:s.show_b;a.children.forEach(function(e){e.active=!1});var l=0;for(var f in r)if(Object.prototype.hasOwnProperty.call(r,f)){var u=void 0,p=r[f];l<a.childrenCount?u=a.children[l]:((u=cc.instantiate(t.itemPrefab)).parent=a,u.setPosition(0,0)),u.active=!0;var m=d.ITemsConfig.getITemsConfigById(f),C=g.default.create(c.GameConst.ITEM_KIND.ITEM,m.id,p,m.quality);u.getComponent(h.default).init(C,!0),l++}i.active=l>0})},t.prototype.onBtnClick=function(e,t){this.curentType=t,this.initList(this.curentType),e.getComponent(r.default).selectOnClick()},o([m(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=o([p],t)}(s.default);i.default=C,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/ViewBase":"ViewBase","../../base/RadioButton":"RadioButton","../../config/GameConst":"GameConst","../../config/GuildfightRewardConfig":"GuildfightRewardConfig","../../config/ITemsConfig":"ITemsConfig","../../model/GuildPvPModel":"GuildPvPModel","../../model/ItemInfoModel":"ItemInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],GuildPvPCityInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"b052ePKJ79LtI62FCpRuq4m","GuildPvPCityInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/GuildfightCityConfig"),l=e("../../config/ViewConfig"),d=e("../../config/WordConfig"),f=e("../../event/CommonEvent"),g=e("../../model/CostumeModel"),h=e("../../model/GuildModel"),u=e("../../model/GuildPvPModel"),p=e("../../model/RoleInfoModel"),m=e("../../utils/UIHelper"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.model=e,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.cityTypeLabel=this.getChild(this.node,"frame/info/cityType/text",cc.Label),this.countLabel=this.getChild(this.node,"frame/info/count/text",cc.Label),this.affiliationLabel=this.getChild(this.node,"frame/info/affiliation/text",cc.Label),this.powerLabel=this.getChild(this.node,"frame/info/power/text",cc.Label),this.listNode=this.getChild(this.node,"frame/list",cc.Node),this.playerNode=this.getChild(this.listNode,"playerInfo",cc.Node),this.btnMoveNode=this.getChild(this.node,"frame/btnMove",cc.Node),this.btnGoNode=this.getChild(this.node,"frame/btnGo",cc.Node)},t.prototype.initView=function(){var e=c.GuildfightCityConfig.getConfigById(this.model.nodeId);this.cityTypeLabel.string=e.type_name,this.affiliationLabel.string=this.model.guildId>0?this.model.guildName:d.WordConfig.getWord(61897);var t=0,i=0;this.model.strongholdList.forEach(function(e){t=e.defender.heroId>0?t+1:t,i=e.defender.heroId>0?i+e.defender.fightPower:i}),this.countLabel.string=t+"",this.powerLabel.string=m.UIHelper.tranNumber(i),this.initList(),this.onAddEvent(this.btnMoveNode,this.onBtnMove.bind(this)),this.onAddEvent(this.btnGoNode,this.onBtnEnter.bind(this))},t.prototype.initList=function(){for(var e=this.listNode.childrenCount>this.model.strongholdList.length?this.listNode.childrenCount:this.model.strongholdList.length,t=0;t<e;t++){var i=void 0;t<this.listNode.childrenCount?i=this.listNode.children[t]:((i=cc.instantiate(this.playerNode)).parent=this.listNode,i.setPosition(0,0)),i.active=t<this.model.strongholdList.length&&this.model.strongholdList[t].defender.heroId>0,t<this.model.strongholdList.length&&this.model.strongholdList[t].defender.heroId>0&&this.initPlayer(i,this.model.strongholdList[t])}},t.prototype.initPlayer=function(e,t){var i=this.getChild(e,"headFrame",cc.Sprite),n=this.getChild(i.node,"icon",cc.Sprite),o=this.getChild(e,"name",cc.Label),a=this.getChild(e,"power/num",cc.Label);g.CostumeModel.setCostSF(n,g.CostumeType.Head,t.defender.avatar.portrait),g.CostumeModel.setCostSF(i,g.CostumeType.HeadFM,t.defender.avatar.portrait),o.string=t.defender.name,a.string=t.defender.fightPower+""},t.prototype.checkDefend=function(){var e;return u.GuildPvPModel.getInstance().currentStopNodeData.strongholdList.every(function(t){return t.defender.heroId!=parseInt(p.default.instance.roleId)||(e=t,!1)}),e},t.prototype.onBtnMove=function(){var e=this;if(u.GuildPvPModel.getInstance().currentStopNodeData){var t=c.GuildfightCityConfig.getConfigById(u.GuildPvPModel.getInstance().currentStopNodeData.nodeId),i=u.GuildPvPModel.getInstance().currentStopNodeData;if(i.nodeId!=this.model.nodeId)if(t.city.includes(this.model.nodeId))if(this.model.guildId==h.GuildModel.instance.guildinfo.gid||i.guildId==h.GuildModel.instance.guildinfo.gid){var n=this.checkDefend();if(n){var o=cc.js.formatStr(d.WordConfig.getWord(61884),t.name);s.default.instance.createView(l.default.gameView.DialogCheck,null,o,function(t){t&&(u.GuildPvPModel.getInstance().s_cancel_defend_stronghold(u.GuildPvPModel.getInstance().currentStopNodeData.nodeId,n.strongholdId),a.EventManager.instance.dispatch(f.CommonEvent.Event_Guild_Pvp_Move,e.model,!1),e.closeView())})}else a.EventManager.instance.dispatch(f.CommonEvent.Event_Guild_Pvp_Move,this.model,!1),this.closeView()}else d.WordConfig.showWord(61898);else d.WordConfig.showWord(61880);else d.WordConfig.showWord(61899)}},t.prototype.onBtnEnter=function(){var e=this;if(u.GuildPvPModel.getInstance().currentStopNodeData){var t=c.GuildfightCityConfig.getConfigById(u.GuildPvPModel.getInstance().currentStopNodeData.nodeId);if(t.type!=c.MapNodeType.Resurgence){var i=u.GuildPvPModel.getInstance().currentStopNodeData;if(i.nodeId==this.model.nodeId)a.EventManager.instance.dispatch(f.CommonEvent.Event_Guild_Pvp_Enter,this.model),this.closeView();else if(t.city.includes(this.model.nodeId))if(this.model.guildId==h.GuildModel.instance.guildinfo.gid||i.guildId==h.GuildModel.instance.guildinfo.gid){var n=this.checkDefend();if(n){var o=cc.js.formatStr(d.WordConfig.getWord(61884),t.name);s.default.instance.createView(l.default.gameView.DialogCheck,null,o,function(t){t&&(u.GuildPvPModel.getInstance().s_cancel_defend_stronghold(u.GuildPvPModel.getInstance().currentStopNodeData.nodeId,n.strongholdId),a.EventManager.instance.dispatch(f.CommonEvent.Event_Guild_Pvp_Move,e.model,!0),e.closeView())})}else a.EventManager.instance.dispatch(f.CommonEvent.Event_Guild_Pvp_Move,this.model,!0),this.closeView()}else d.WordConfig.showWord(61898);else d.WordConfig.showWord(61880)}else d.WordConfig.showWord(61907)}},t=o([_],t)}(r.default));i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GuildfightCityConfig":"GuildfightCityConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel","../../model/RoleInfoModel":"RoleInfoModel","../../utils/UIHelper":"UIHelper"}],GuildPvPCityListView:[function(e,t,i){"use strict";cc._RF.push(t,"86ffbbL0nVPb7txIT7cCgql","GuildPvPCityListView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ProtoConfig"),s=e("../../../engine/ViewBase"),r=e("../../base/RadioButton"),c=e("../../config/BuffConfig"),l=e("../../config/ColorConfig"),d=e("../../config/GuildfightCityConfig"),f=e("../../config/WordConfig"),g=e("../../model/GuildModel"),h=e("../../model/GuildPvPModel"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentType=h.CityType.MyCamp,t}return n(t,e),t.prototype.onEnable=function(){this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.btnListNode=this.getChild(this.node,"frame/btnList",cc.Node),this.contentNode=this.getChild(this.node,"frame/scrollView/view/content",cc.Node),this.infoCellNode=this.getChild(this.contentNode,"infoCell",cc.Node),this.tipNode=this.getChild(this.node,"frame/tip",cc.Node)},t.prototype.initView=function(){var e=this;this.btnListNode.children.forEach(function(t,i){e.onAddEvent(t,e.onBtnClick.bind(e,t,i))}),this.initList(this.currentType)},t.prototype.initList=function(e){for(var t=h.GuildPvPModel.getInstance().getMapModeArrByType(e),i=this.contentNode.childrenCount>t.length?this.contentNode.childrenCount:t.length,n=0;n<i;n++){var o=void 0;n<this.contentNode.childrenCount?o=this.contentNode.children[n]:((o=cc.instantiate(this.infoCellNode)).parent=this.contentNode,this.contentNode.setPosition(0,0)),o.active=n<t.length,n<t.length&&this.initCellInfo(o,t[n])}this.tipNode.active=t.length<=0},t.prototype.initCellInfo=function(e,t){var i=d.GuildfightCityConfig.getConfigById(t.nodeId),n=c.BuffConfig.getConfigById(t.buffId),o=this.getChild(e,"name",cc.Label),a=this.getChild(e,"defendCount",cc.Label),s=this.getChild(e,"stopCount",cc.Label),r=this.getChild(e,"buff",cc.Label),h=this.getChild(e,"status",cc.Label);o.string=i.name;var u=f.WordConfig.getWord(61869),p=f.WordConfig.getWord(61869),m=f.WordConfig.getWord(61869),C=!1;t.stayingHeroInfo.every(function(e){return e.guildId!=g.GuildModel.instance.guildinfo.gid||(C=!0,!1)}),(C||0==t.guildId||t.guildId==g.GuildModel.instance.guildinfo.gid)&&(u=0,t.strongholdList.forEach(function(e){u=e.defender.heroId>0?u+1:u}),m=t.stayingHeroInfo.length+"",p=n?n.des:f.WordConfig.getWord(60456)),a.string=u,s.string=m,r.string=p,h.string=1==t.status?f.WordConfig.getWord(61870):f.WordConfig.getWord(61871),h.node.color=1==t.status?l.ColorConfig.RedColor:l.ColorConfig.GreenColor},t.prototype.onBtnClick=function(e,t){this.currentType=t,e.getComponent(r.default).selectOnClick(),this.initList(this.currentType)},t.prototype.onSocketRespMsg=function(e,t){e==a.ProtoConfig.c_fight_map_node_info&&this.initList(this.currentType)},t=o([p],t)}(s.default));i.default=m,cc._RF.pop()},{"../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ViewBase":"ViewBase","../../base/RadioButton":"RadioButton","../../config/BuffConfig":"BuffConfig","../../config/ColorConfig":"ColorConfig","../../config/GuildfightCityConfig":"GuildfightCityConfig","../../config/WordConfig":"WordConfig","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel"}],GuildPvPCityMainView:[function(e,t,i){"use strict";cc._RF.push(t,"07bf8aP0V5LTq754c7u9zIc","GuildPvPCityMainView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/ResourcesManager"),d=e("../../../engine/UIManager"),f=e("../../../engine/ViewBase"),g=e("../../config/ColorConfig"),h=e("../../config/DefaultConfig"),u=e("../../config/GuildfightCityConfig"),p=e("../../config/GuildfightTimeConfig"),m=e("../../config/ViewConfig"),C=e("../../config/WordConfig"),_=e("../../event/CommonEvent"),v=e("../../model/CostumeModel"),y=e("../../model/GuildModel"),b=e("../../model/GuildPvPModel"),I=e("../../model/ServerTime"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(_.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},t.prototype.onDisable=function(){this.unscheduleAllCallbacks(),s.EventManager.instance.off(_.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},t.prototype.init=function(e){this.model=e,this.lastGuildId=this.model.guildId,this.config=u.GuildfightCityConfig.getConfigById(this.model.nodeId),this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.iconSprite=this.getChild(this.node,"icon",cc.Sprite),this.timeLabel=this.getChild(this.node,"top/time",cc.Label),this.listNode=this.getChild(this.node,"list"),this.timeCountNode=this.getChild(this.node,"timeCount"),this.progressBar=this.getChild(this.node,"timeCount/progressBar",cc.ProgressBar),this.timeNumLabel=this.getChild(this.node,"timeCount/num",cc.Label),this.timeTip=this.getChild(this.node,"timeCount/tip",cc.Label),this.effect1=this.getChild(this.node,"effect1",cc.Animation),this.effect2=this.getChild(this.node,"effect2",cc.Animation)},t.prototype.initView=function(){this.initIcon(this.model),this.initTimeCount(),this.initList()},t.prototype.initTimeCount=function(){this.unscheduleAllCallbacks();var e=p.GuildfightTimeConfig.getConfig(b.GuildPvPModel.getInstance().round,p.GuildPvPTimeType.MakeWar),t=b.GuildPvPModel.getInstance().starTime+e.start_time+e.duration_time-Math.floor(I.ServerTime.getServerTime()/1e3);if(this.sumTimer(t),this.timeCountNode.active=this.model.timestamp>0,this.model.timestamp>0){var i=Math.floor(I.ServerTime.getServerTime()/1e3)-this.model.timestamp;this.ownerTimer(i)}},t.prototype.initIcon=function(e){var t;t=e.guildId==y.GuildModel.instance.guildinfo.gid?b.CityType.MyCamp:0==e.guildId?b.CityType.Neutrality:b.CityType.EnemyCamp;var i="texture/guild/"+this.config.icon+t;l.default.instance.loadSprite(this.iconSprite,i,!0)},t.prototype.initList=function(){var e=this;this.listNode.children.forEach(function(t,i){if(t.active=i<e.config.num,t.active){var n=e.model.strongholdList[i];e.initCell(t,n)}})},t.prototype.initCell=function(e,t){var i=this.findChild(e,"occupy"),n=this.getChild(i,"name",cc.Label),o=this.getChild(i,"power",cc.Label),a=this.findChild(e,"btnAdd"),s=this.getChild(i,"icon",cc.Sprite),r=this.getChild(i,"headFrame",cc.Sprite),c=this.findChild(i,"effect"),l=this.findChild(e,"tip"),d=this.findChild(e,"line");if(i.active=t.defender.heroId>0,this.model.guildId==y.GuildModel.instance.guildinfo.gid)a.active=t.defender.heroId<=0,l.active=!1;else{var f=!1;this.model.strongholdList.every(function(e){return!(e.defender.heroId>0)||(f=!0,!1)}),a.active=!f}d.active=i.active||a.active,l.active=!d.active,c.active=1==t.status,i.active?(n.string=t.defender.name,o.string=t.defender.fightPower+"",v.CostumeModel.setCostSF(s,v.CostumeType.Head,t.defender.avatar.portrait),v.CostumeModel.setCostSF(r,v.CostumeType.HeadFM,t.defender.avatar.portrait_skin)):this.onAddEvent(a,this.onBtnAdd.bind(this,t)),this.onAddEvent(e,this.onBtnOpenInfo.bind(this,t))},t.prototype.sumTimer=function(e){var t=this;this.timeLabel.string=a.default.formatLeftTime5(e),this.timeNumLabel.node.color=e>300?g.ColorConfig.GreenColor:g.ColorConfig.RedColor,this.schedule(function(){e-=1,t.timeLabel.string=a.default.formatLeftTime5(e),t.timeLabel.node.color=e>300?g.ColorConfig.GreenColor:g.ColorConfig.RedColor,0==e&&t.unscheduleAllCallbacks()},1)},t.prototype.ownerTimer=function(e){var t=this,i=e<this.config.time?1:2;if(2!=i||4==this.config.type){this.timeTip.string=1==i?C.WordConfig.getWord(61896):C.WordConfig.getWord(61897),e=1==i?this.config.time-e:e-this.config.time,this.timeNumLabel.string=a.default.formatLeftTime5(e),this.progressBar.progress=1==i?e/this.config.time:e/h.DefaultConfig.getConfigById(199).value,this.timeCount=function(){e=1==i?e-1:e+1,t.timeNumLabel.string=a.default.formatLeftTime5(e),1==i&&e<=0&&(t.unschedule(t.timeCount),t.timeCountNode.active=!1)},this.schedule(this.timeCount,1);var n=1==i?this.config.time-e:e-this.config.time,o=function(){n-=.1,t.progressBar.progress=1==i?n/t.config.time:n/h.DefaultConfig.getConfigById(199).value,n<=0&&t.unschedule(o)};this.schedule(o,.1)}else this.timeCountNode.active=!1},t.prototype.onBtnOpenInfo=function(e){e.defender.heroId<=0||(this.currentClickData=e,e.defender.guildId=this.model.guildId,d.default.instance.createView(m.default.gameView.GuildPvPStrongholdInfoView,null,this.model.nodeId,e.strongholdId,e.defender))},t.prototype.onBtnAdd=function(e){b.GuildPvPModel.getInstance().s_defend_stronghold(this.model.nodeId,e.strongholdId)},t.prototype.closeView=function(){e.prototype.closeView.call(this),this.unscheduleAllCallbacks()},t.prototype.onEventEffect1End=function(e){var t=this;this.effect1.off("finished",this.onEventEffect1End,this),this.effect1.node.active=!1,this.effect2.node.active=!0,this.effect2.play(),this.initIcon(e);var i=function(){t.effect2.node.active=!1,t.effect2.off("finished",i,t)};this.effect2.on("finished",i)},t.prototype.onSocketRespMsg=function(e,t){if(e==r.ProtoConfig.c_fight_map_node_info){var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_fight_map_node_info,t),n=b.GuildPvPModel.getInstance().protos_util_map_info(i.getFightMapNodeInfo());n.nodeId==this.model.nodeId&&(n.guildId!=this.lastGuildId&&(this.effect1.node.active=!0,this.effect1.on("finished",this.onEventEffect1End.bind(this,n),this),this.effect1.play()),this.model=n,this.lastGuildId=this.model.guildId,this.initView())}else if(e==r.ProtoConfig.c_start_attack){if(0==(i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_start_attack,t)).getResult()){var o=new b.AttackMapNodeData;o.nodeId=this.model.nodeId,o.strongholdData=this.currentClickData,o.myHeroInfo=b.GuildPvPModel.getInstance().getMyHeroInfoData(),d.default.instance.createView(m.default.gameView.GuildPvPFightView,null,o)}}},t=o([w],t)}(f.default));i.default=k,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/GuildfightCityConfig":"GuildfightCityConfig","../../config/GuildfightTimeConfig":"GuildfightTimeConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel","../../model/ServerTime":"ServerTime"}],GuildPvPEndTip:[function(e,t,i){"use strict";cc._RF.push(t,"a36c1a5+qJGpZfx9ep5NDjg","GuildPvPEndTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../config/GuildfightLvlConfig"),c=e("../../config/WordConfig"),l=e("../../event/CommonEvent"),d=e("../../model/GuildModel"),f=e("../../model/GuildPvPModel"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.model=e,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.ultimatelyEndNode=this.findChild(this.node,"ultimatelyEnd"),this.stageEndNode=this.findChild(this.node,"stageEnd"),this.endNode=this.findChild(this.node,"end"),this.ultimatelyEndNode.active=!1,this.stageEndNode.active=!1,this.endNode.active=!1},t.prototype.initView=function(){switch(this.type=this.model.type?this.model.type:f.GuildPvPModel.getInstance().getGuildPvpEndType(this.model),this.type){case f.GuildPvPEndType.UltimatelyEnd:this.initUltimatelyEnd();break;case f.GuildPvPEndType.StageEnd:this.initStageEnd();break;case f.GuildPvPEndType.End:this.initEnd();break;default:this.closeView()}},t.prototype.initUltimatelyEnd=function(){this.ultimatelyEndNode.active=!0;var e=this.getChild(this.ultimatelyEndNode,"guildName/name",cc.Label),t=this.getChild(this.ultimatelyEndNode,"playerName/name",cc.Label);e.string=this.model.guildNameList[0],t.string=this.model.guildLeaderName},t.prototype.initStageEnd=function(){this.stageEndNode.active=!0;var e=this.findChild(this.stageEndNode,"one"),t=this.findChild(this.stageEndNode,"two"),i=this.findChild(this.stageEndNode,"layout"),n=this.findChild(i,"guildName"),o=i.childrenCount>this.model.guildNameList.length?i.childrenCount:this.model.guildNameList.length;e.active=2==f.GuildPvPModel.getInstance().round,t.active=!e.active;for(var a=0;a<o;a++){var s=void 0;if(a<i.childrenCount?s=i.children[a]:((s=cc.instantiate(n)).parent=i,s.setPosition(0,0)),s.active=a<this.model.guildNameList.length,a<this.model.guildNameList.length)this.getChild(s,"name",cc.Label).string=this.model.guildNameList[a]}},t.prototype.initEnd=function(){this.endNode.active=!0;var e=this.model.guildId==d.GuildModel.instance.guildinfo.gid,t=this.findChild(this.endNode,"succeed"),i=this.findChild(this.endNode,"fail"),n=this.getChild(this.endNode,"name",cc.Label),o=this.findChild(this.endNode,"btnClose");t.active=e,i.active=!e;var a=r.GuildfightLvlConfig.getConfigByLev(this.model.round),s=r.GuildfightLvlConfig.getConfigByLev(this.model.round-1);n.string=e?cc.js.formatStr(c.WordConfig.getWord(61889),a.name,a.name):cc.js.formatStr(c.WordConfig.getWord(61890),a.name,s.name),this.onAddEvent(o,this.closeView.bind(this))},t.prototype.closeView=function(){this.type==f.GuildPvPEndType.End&&a.EventManager.instance.dispatch(l.CommonEvent.Event_Guild_Pvp_End),e.prototype.closeView.call(this)},t=o([h],t)}(s.default));i.default=u,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/GuildfightLvlConfig":"GuildfightLvlConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel"}],GuildPvPFightView:[function(e,t,i){"use strict";cc._RF.push(t,"39a550BYBhDbaOR12Pd2Prn","GuildPvPFightView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ProtoConfig"),r=e("../../../engine/ProtoUtils"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/DefaultConfig"),f=e("../../config/GameConst"),g=e("../../config/ViewConfig"),h=e("../../event/CommonEvent"),u=e("../../model/CostumeModel"),p=e("../../model/GuildPvPModel"),m=e("../../model/RoleInfoModel"),C=e("../../prefab/GameManager"),_=e("../../serverFight/ServerFightView"),v=cc._decorator,y=v.ccclass,b=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.serverFightPrefab=null,t.serverFightView=null,t.serverFightViewNode=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.serverFightView=cc.instantiate(this.serverFightPrefab),this.serverFightView.getComponent(_.default).setFightType(f.ServerFightType.GuildPVP),this.serverFightViewNode.addChild(this.serverFightView),this.initFindNode()},t.prototype.onEnable=function(){C.default.instance.serverFightType=f.ServerFightType.GuildPVP,C.default.instance.BattleType=f.BattleType.PvP},t.prototype.onInitChild=function(e){this.data=e,this.initView()},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_scene_obj_hp){var i,n=(a=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_scene_obj_hp,t)).getId(),o=a.getHp();this.serverFightView.getComponent(_.default).serRolePrefabList.every(function(e){var t=e.serRoleInfoModel;return n!=t.id||(i=t,!1)}),i&&(i.cid==parseInt(m.default.instance.roleId)?this.refreshHp(this.myInfo,i.maxHp,o):i.cid==this.data.strongholdData.defender.heroId&&this.refreshHp(this.pkInfo,i.maxHp,o))}else if(e==s.ProtoConfig.c_user_login)this.closeView();else if(e==s.ProtoConfig.c_attack_stronghold){var a,l=(a=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_attack_stronghold,t)).getResult(),d=a.getRewardListList(),f=new Array;for(var h in d)if(Object.prototype.hasOwnProperty.call(d,h)){var u=d[h],p={id:u.getItemid(),count:u.getItemnum()};f.push(p)}c.default.instance.createView(g.default.gameView.GuildPvPResultView,null,this.data,f,1==l)}},t.prototype.initFindNode=function(){this.myInfo=this.getChild(this.node,"myInfo"),this.pkInfo=this.getChild(this.node,"pkInfo"),this.downTime=this.getChild(this.node,"downTime",cc.Label),this.startTime=this.getChild(this.node,"start",cc.Label),this.hpWidth=this.getChild(this.node,"myInfo/hp").width},t.prototype.initView=function(){var e=this;this.startTime.node.active=!0;var t=3;this.startTime.string=t+"";var i=d.DefaultConfig.getConfigById(211).value;this.downTime.string=i+"",this.downFunction=function(){t--,e.startTime.string=t>0?t+"":"s",t<0&&(e.unschedule(e.downFunction),e.startTime.node.active=!1,p.GuildPvPModel.getInstance().s_attack_stronghold(e.data.nodeId,e.data.strongholdData.strongholdId),e.downFunction1=function(){i--,e.downTime.string=i+"",i<=0&&e.unschedule(e.downFunction1)},e.schedule(e.downFunction1,1))},this.schedule(this.downFunction,1),this.setPlayerInfo(this.myInfo,this.data.myHeroInfo),this.setPlayerInfo(this.pkInfo,this.data.strongholdData.defender)},t.prototype.setPlayerInfo=function(e,t){var i=this.getChild(e,"headFrame",cc.Sprite),n=this.getChild(e,"headFrame/icon",cc.Sprite);this.getChild(e,"name",cc.Label).string="Lv"+t.level+" "+t.name,u.CostumeModel.setCostSF(n,u.CostumeType.Head,t.avatar.portrait),u.CostumeModel.setCostSF(i,u.CostumeType.HeadFM,t.avatar.portrait_skin),this.refreshHp(e,this.hpWidth,this.hpWidth)},t.prototype.refreshHp=function(e,t,i){this.getChild(e,"hp").width=this.hpWidth*(i/t)>0?this.hpWidth*(i/t):0},t.prototype.closeView=function(){e.prototype.closeView.call(this),this.unschedule(this.downFunction),this.unschedule(this.downFunction1),C.default.instance.serverFightType=f.ServerFightType.Default,a.EventManager.instance.dispatch(h.CommonEvent.Event_Battlefield_End)},o([b({type:cc.Prefab})],t.prototype,"serverFightPrefab",void 0),o([b({type:cc.Node})],t.prototype,"serverFightViewNode",void 0),t=o([y],t)}(l.default);i.default=I,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/GuildPvPModel":"GuildPvPModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/GameManager":"GameManager","../../serverFight/ServerFightView":"ServerFightView"}],GuildPvPMainView:[function(e,t,i){"use strict";cc._RF.push(t,"8972cP8b5hPbpfZing7GL5j","GuildPvPMainView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/ColorConfig"),g=e("../../config/DefaultConfig"),h=e("../../config/GuildfightTimeConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../model/GuildModel"),_=e("../../model/GuildPvPModel"),v=e("../../model/ServerTime"),y=e("../../utils/UIHelper"),b=e("../PublicTipView"),I=cc._decorator,M=I.ccclass,w=(I.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(m.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),this.initFindNode(),_.GuildPvPModel.getInstance().s_guild_status(),_.GuildPvPModel.getInstance().s_fight_group_info(),_.GuildPvPModel.getInstance().s_round_result()},t.prototype.onDisable=function(){s.EventManager.instance.off(m.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},t.prototype.initFindNode=function(){this.btnHelpNode=this.getChild(this.node,"frame/btnHelp",cc.Node),this.btnAwardNode=this.getChild(this.node,"frame/btnAward",cc.Node),this.btnStarNode=this.getChild(this.node,"frame/btnStar",cc.Node),this.btnApplyNode=this.getChild(this.node,"frame/btnApply",cc.Node),this.btnApplyedNode=this.getChild(this.node,"frame/btnApplyed",cc.Node),this.cityListNode=this.getChild(this.node,"frame/info/city",cc.Node),this.effect1Node=this.getChild(this.node,"frame/info/effect1",cc.Node),this.effect2Node=this.getChild(this.node,"frame/info/effect2",cc.Node),this.effect3Node=this.getChild(this.node,"frame/info/effect3",cc.Node),this.muchNode=this.getChild(this.node,"frame/much",cc.Node),this.muchNumLabel=this.getChild(this.muchNode,"num",cc.Label),this.levelNode=this.getChild(this.node,"frame/level",cc.Node),this.levelNumLabel=this.getChild(this.levelNode,"num",cc.Label),this.failNode=this.getChild(this.node,"frame/fail",cc.Node),this.loadNode=this.getChild(this.node,"frame/load",cc.Node),this.closeNode=this.getChild(this.node,"frame/close",cc.Node),this.succeedNode=this.getChild(this.node,"frame/succeed",cc.Node),this.notOpenNode=this.getChild(this.node,"frame/notOpen",cc.Node),this.timeNumCountNode=this.getChild(this.node,"frame/timeCount",cc.Node),this.timeNumLabel=this.getChild(this.timeNumCountNode,"time",cc.Label)},t.prototype.initView=function(){this.effect1Node.active=!1,this.effect2Node.active=!1,this.effect3Node.active=!1,this.status=_.GuildPvPModel.getInstance().status,this.muchNode.active=this.status==_.StatusType.NotApply&&C.GuildModel.instance.getMyPositonType()==C.PositonType.President,this.levelNode.active=this.status==_.StatusType.NotApply&&C.GuildModel.instance.getMyPositonType()==C.PositonType.President,this.levelNumLabel.string=C.GuildModel.instance.guildinfo.level+"/"+g.DefaultConfig.getConfigById(204).value,this.levelNumLabel.node.color=C.GuildModel.instance.guildinfo.level>=g.DefaultConfig.getConfigById(204).value?f.ColorConfig.GreenColor:f.ColorConfig.RedColor,this.muchNumLabel.string=y.UIHelper.tranNumber(C.GuildModel.instance.guildinfo.gold)+"/"+y.UIHelper.tranNumber(g.DefaultConfig.getConfigById(200).value),this.muchNumLabel.node.color=C.GuildModel.instance.guildinfo.gold>=g.DefaultConfig.getConfigById(200).value?f.ColorConfig.GreenColor:f.ColorConfig.RedColor;var e=h.GuildfightTimeConfig.getConfig(_.GuildPvPModel.getInstance().round,h.GuildPvPTimeType.Truce),t=_.GuildPvPModel.getInstance().starTime+e.start_time,i=Math.floor(v.ServerTime.getServerTime()/1e3);this.failNode.active=this.status==_.StatusType.NotEnter,this.succeedNode.active=this.status==_.StatusType.EnterNotApply&&i<t||this.status==_.StatusType.EnterApply&&i<t,this.loadNode.active=this.status==_.StatusType.Audit||this.status==_.StatusType.NotApply&&C.GuildModel.instance.getMyPositonType()!=C.PositonType.President,this.btnApplyedNode.active=this.status==_.StatusType.EnterApply||this.status==_.StatusType.Audit,this.btnStarNode.active=this.status==_.StatusType.StarPk,this.btnApplyNode.active=!this.btnApplyedNode.active&&(this.status==_.StatusType.NotApply||this.status==_.StatusType.NotEnter||this.status==_.StatusType.EnterNotApply||this.status==_.StatusType.EnterApply)&&i<t,this.btnApplyNode.color=this.status==_.StatusType.NotEnter||this.status!=_.StatusType.EnterNotApply&&C.GuildModel.instance.getMyPositonType()!=C.PositonType.President?f.ColorConfig.GrayColor:f.ColorConfig.WhiteColor,this.closeNode.active=this.status==_.StatusType.Leisure||this.status==_.StatusType.EnterNotApply&&i>t;var n=_.GuildPvPModel.getInstance().getFightGroupMapById(_.GuildPvPModel.getInstance().groupId);if(1==_.GuildPvPModel.getInstance().openStatus?(this.notOpenNode.active=!0,this.closeNode.active=!1,this.failNode.active=!1,this.succeedNode.active=!1,this.loadNode.active=!1,this.btnApplyedNode.active=!1,this.btnStarNode.active=!1,this.btnApplyNode.active=!1,this.muchNode.active=!1,this.levelNode.active=!1):this.status==_.StatusType.StarPk&&n&&n.winGuild==C.GuildModel.instance.guildinfo.gid&&(this.closeNode.active=!0,this.notOpenNode.active=!1,this.failNode.active=!1,this.succeedNode.active=!1,this.loadNode.active=!1,this.btnApplyedNode.active=!1,this.btnStarNode.active=!1,this.btnApplyNode.active=!1,this.muchNode.active=!1,this.levelNode.active=!1),this.timeNumCountNode.active=this.btnStarNode.active,this.timeNumCountNode.active){this.unscheduleAllCallbacks();var o=h.GuildfightTimeConfig.getConfig(_.GuildPvPModel.getInstance().round,h.GuildPvPTimeType.MakeWar),a=_.GuildPvPModel.getInstance().starTime+o.start_time+o.duration_time-Math.floor(v.ServerTime.getServerTime()/1e3);this.sumTimer(a)}this.onAddEvent(this.btnApplyNode,this.btnApply.bind(this)),this.onAddEvent(this.btnHelpNode,this.onBtnHelp.bind(this)),this.onAddEvent(this.btnAwardNode,this.onBtnAward.bind(this)),this.onAddEvent(this.btnStarNode,this.btnStar.bind(this)),this.initCityList()},t.prototype.sumTimer=function(e){var t=this;this.timeNumLabel.string=a.default.formatLeftTime5(e),this.timeNumLabel.node.color=e>300?f.ColorConfig.GreenColor:f.ColorConfig.RedColor,this.schedule(function(){e-=1,t.timeNumLabel.string=a.default.formatLeftTime5(e),t.timeNumLabel.node.color=e>300?f.ColorConfig.GreenColor:f.ColorConfig.RedColor,0==e&&t.unscheduleAllCallbacks()},1)},t.prototype.initCityList=function(){var e=this;h.GuildfightTimeConfig.getConfig(_.GuildPvPModel.getInstance().round,h.GuildPvPTimeType.PrepareForWar);this.cityListNode.children.forEach(function(t){var i=parseInt(t.name),n=_.GuildPvPModel.getInstance().getFightGroupMapById(i),o=1!=i?_.GuildPvPModel.getInstance().getFightGroupMapById(Math.floor(i/2)):null,a=e.findChild(t,"normal"),s=e.findChild(t,"select");s.active=o&&n.groupId==o.winGuild,a.active=!s.active;var r=o&&n.groupId==o.winGuild?s:a,c=e.getChild(r,"guilidName"),l=e.getChild(r,"guilidName/name",cc.Label);c.active=n.winGuild>0,l.string=n.winGuildName});var t=_.GuildPvPModel.getInstance().round;if(this.status==_.StatusType.StarPk)if(3==t){var i=_.GuildPvPModel.getInstance().getFightGroupMapById(2),n=_.GuildPvPModel.getInstance().getFightGroupMapById(3);this.effect2Node.active=i.winGuild<=0,this.effect3Node.active=n.winGuild<=0}else if(4==t){var o=_.GuildPvPModel.getInstance().getFightGroupMapById(1);this.effect1Node.active=o.winGuild<=0}},t.prototype.onBtnHelp=function(){l.default.instance.createView(u.default.gameView.PublicTipView,null,b.RuleType.TYPE_GuildPvp)},t.prototype.onBtnAward=function(){l.default.instance.createView(u.default.gameView.GuildPvPAwardView)},t.prototype.btnStar=function(){l.default.instance.createView(u.default.gameView.GuildPvPMapView)},t.prototype.btnApply=function(){this.status==_.StatusType.NotApply&&C.GuildModel.instance.getMyPositonType()!=C.PositonType.President||(C.GuildModel.instance.guildinfo.level>=g.DefaultConfig.getConfigById(204).value?this.status==_.StatusType.NotApply&&C.GuildModel.instance.getMyPositonType()==C.PositonType.President?C.GuildModel.instance.guildinfo.gold>=g.DefaultConfig.getConfigById(204).value?_.GuildPvPModel.getInstance().s_guild_apply_fight():p.WordConfig.showWord(61877):this.status==_.StatusType.EnterNotApply&&_.GuildPvPModel.getInstance().s_guild_member_apply_fight():p.WordConfig.showWord(61886))},t.prototype.onSocketRespMsg=function(e,t){if(e==r.ProtoConfig.c_fight_group_info||e==r.ProtoConfig.c_guild_apply_fight||e==r.ProtoConfig.c_guild_member_apply_fight)this.initView();else if(e==r.ProtoConfig.c_round_result){var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_round_result,t),n=new _.GuildPvPEndData;n.guildNameList=i.getGuildNameListList();var o=h.GuildfightTimeConfig.getConfig(_.GuildPvPModel.getInstance().round,h.GuildPvPTimeType.Truce),a=_.GuildPvPModel.getInstance().starTime+o.start_time;if(v.ServerTime.getServerTime()/1e3<a)return;n.guildLeaderName=i.getGuildLeaderName(),n.guildNameList.length>0&&l.default.instance.createView(u.default.gameView.GuildPvPEndTip,null,n)}else r.ProtoConfig.s_guild_status},t=o([M],t)}(d.default));i.default=w,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/GuildfightTimeConfig":"GuildfightTimeConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel","../../model/ServerTime":"ServerTime","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView"}],GuildPvPMapPanel:[function(e,t,i){"use strict";cc._RF.push(t,"f8adavw38lFqrcIxqFa+q/m","GuildPvPMapPanel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/ResourcesManager"),d=e("../../../engine/UIManager"),f=e("../../../engine/ViewBase"),g=e("../../base/GesturesToZoom"),h=e("../../config/BuffConfig"),u=e("../../config/ColorConfig"),p=e("../../config/DefaultConfig"),m=e("../../config/GuildfightCityConfig"),C=e("../../config/ViewConfig"),_=e("../../event/CommonEvent"),v=e("../../model/CostumeModel"),y=e("../../model/GuildModel"),b=e("../../model/GuildPvPModel"),I=e("../../model/RoleInfoModel"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iscanClick=!1,t}return n(t,e),t.prototype.onEnable=function(){this.iscanClick=!1,this.initFindNode(),a.EventManager.instance.on(_.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),a.EventManager.instance.on(_.CommonEvent.Event_Guild_Pvp_Move,this.onEventMove,this),b.GuildPvPModel.getInstance().s_fight_map_info(),b.GuildPvPModel.getInstance().currentStopNodeData||b.GuildPvPModel.getInstance().s_enter_born()},t.prototype.onDisable=function(){a.EventManager.instance.off(_.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),a.EventManager.instance.off(_.CommonEvent.Event_Guild_Pvp_Move,this.onEventMove,this)},t.prototype.setMapPosition=function(){var e=this.myHeadNode.convertToWorldSpaceAR(cc.v2(0,0)),t=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(-t.x,-t.y),this.node.parent.getComponent(g.default).restrictPic()},t.prototype.initFindNode=function(){this.headNode=this.getChild(this.node,"head"),this.cityListNode=this.getChild(this.node,"list/cityList"),this.destinationNode=this.getChild(this.node,"list/destination"),this.pathListNode=this.getChild(this.node,"list/pathList")},t.prototype.initView=function(){this.initCityList(),this.initDestination(),this.setMapPosition()},t.prototype.initCityList=function(){var e=this;this.cityListNode.children.forEach(function(t){var i=parseInt(t.name),n=b.GuildPvPModel.getInstance().getGuildMapById(i);e.initCityInfo(t,n)})},t.prototype.initCityInfo=function(e,t){if(t){var i=m.GuildfightCityConfig.getConfigById(t.nodeId);if(i=1==b.GuildPvPModel.getInstance().myBirthId||i.type==m.MapNodeType.Destination?i:m.GuildfightCityConfig.getConfigById(i.opppsite_city)){var n=this.getChild(e,"name",cc.Label),o=this.findChild(e,"list"),a=this.findChild(e,"effect"),r=this.findChild(e,"frame"),c=this.getChild(r,"tip",cc.Label),d=e.getComponent(cc.Sprite);if(n.string=i.name,i.type!=m.MapNodeType.Resurgence){var f=void 0,g=void 0;t.guildId==y.GuildModel.instance.guildinfo.gid?(f=b.CityType.MyCamp,g=u.ColorConfig.GreenColor):0==t.guildId?(g=u.ColorConfig.WhiteColor,f=b.CityType.Neutrality):(f=b.CityType.EnemyCamp,g=u.ColorConfig.RedColor);var p="texture/guild/"+i.city_icon+f;l.default.instance.loadSprite(d,p,!0),n.node.color=g}if(a.active=1==t.status,r.active=t.buffId>0,r.active){var C=h.BuffConfig.getConfigById(t.buffId);c.string=C.des}var _=o.childrenCount>t.stayingHeroInfo.length?o.childrenCount:t.stayingHeroInfo.length;_=_>5?5:_;for(var v=0;v<_;v++){var I=void 0;v<o.childrenCount?I=o.children[v]:((I=cc.instantiate(this.headNode)).parent=o,I.setPosition(0,-30)),I.active=v<t.stayingHeroInfo.length&&t.stayingHeroInfo[v].guildId==y.GuildModel.instance.guildinfo.gid,v<t.stayingHeroInfo.length&&t.stayingHeroInfo[v].guildId==y.GuildModel.instance.guildinfo.gid&&this.initHead(I,t.stayingHeroInfo[v])}this.onAddEvent(o,this.onBtnClickStayList.bind(this,t))}else s.Logger.error("\u5730\u56fe\u8282\u70b9\uff1a"+t.nodeId+"\u914d\u7f6e\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e\uff01");this.onAddEvent(e,this.onBtnClickCity.bind(this,t))}else s.Logger.error("\u5730\u56fe\u8282\u70b9\uff1a"+e.name+"\u6570\u636e\u4e0d\u5b58\u5728\uff01")},t.prototype.initHead=function(e,t){var i=this.getChild(e,"icon",cc.Sprite),n=this.findChild(e,"my");v.CostumeModel.setCostSF(i,v.CostumeType.Head,t.avatar.portrait),n.active=t.heroId==parseInt(I.default.instance.roleId),n.active&&(this.myHeadNode=e)},t.prototype.initDestination=function(){var e=b.GuildPvPModel.getInstance().getGuildMapDestination();this.initCityInfo(this.destinationNode,e)},t.prototype.onEventMove=function(e,t){var i=this,n=b.GuildPvPModel.getInstance().currentStopNodeData,o=m.GuildfightCityConfig.getConfigById(n.nodeId),a=m.GuildfightCityConfig.getConfigById(e.nodeId),s=1==b.GuildPvPModel.getInstance().myBirthId||o.type==m.MapNodeType.Destination?n.nodeId.toString():o.opppsite_city.toString(),r=1==b.GuildPvPModel.getInstance().myBirthId||a.type==m.MapNodeType.Destination?e.nodeId.toString():a.opppsite_city.toString();28!=n.nodeId&&29!=n.nodeId||(s="27"),28!=n.nodeId&&29!=n.nodeId||(r="27"),this.destNodeId=r;var c=this.pathListNode.getChildByName(s),l=c.getChildByName("head"),d=c.getChildByName(r);c.active=!0,c.children.forEach(function(e){e.active=!1}),d.active=!0,d.children.forEach(function(e){e.active=!0}),l.active=!0;var f=(p.DefaultConfig.getConfigById(203).value-.5)/d.childrenCount,g=0,h=cc.instantiate(this.myHeadNode);h.parent=l,h.setPosition(d.children[g].position),this.myHeadNode.active=!1;var u=function(){if(g>=d.childrenCount)c.active=!1,l.removeAllChildren(),i.unschedule(u),i.destNodeId=null,b.GuildPvPModel.getInstance().s_move_end();else{var e=d.children[g];e.active=!1,h.setPosition(e.position),g++}};this.schedule(u,f)},t.prototype.onBtnClickCity=function(e){this.iscanClick&&d.default.instance.createView(C.default.gameView.GuildPvPCityInfoView,null,e)},t.prototype.onBtnClickStayList=function(e){this.iscanClick&&(e.stayingHeroInfo.length<=0||d.default.instance.createView(C.default.gameView.GuildPvPStayingListView,null,e))},t.prototype.onSocketRespMsg=function(e,t){var i=this;if(e==r.ProtoConfig.c_fight_map_node_info){var n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_fight_map_node_info,t),o=b.GuildPvPModel.getInstance().protos_util_map_info(n.getFightMapNodeInfo()),a=m.GuildfightCityConfig.getConfigById(o.nodeId),s=1==b.GuildPvPModel.getInstance().myBirthId||a.type==m.MapNodeType.Destination?o.nodeId:a.opppsite_city;if(this.destNodeId&&(parseInt(this.destNodeId)==s||b.GuildPvPModel.getInstance().currentStopNodeData.nodeId==s))return;a.type==m.MapNodeType.Destination?this.initCityInfo(this.destinationNode,o):this.cityListNode.children.every(function(e){return s==parseInt(e.name)&&i.initCityInfo(e,o),!0})}else e==r.ProtoConfig.c_fight_map_info&&(this.iscanClick=!0,this.initView())},t=o([w],t)}(f.default));i.default=k,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../base/GesturesToZoom":"GesturesToZoom","../../config/BuffConfig":"BuffConfig","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/GuildfightCityConfig":"GuildfightCityConfig","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel","../../model/RoleInfoModel":"RoleInfoModel"}],GuildPvPMapView:[function(e,t,i){"use strict";cc._RF.push(t,"9391d+i3t9NZYuzGAcHxAEJ","GuildPvPMapView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/ResourcesManager"),d=e("../../../engine/UIManager"),f=e("../../../engine/ViewBase"),g=e("../../base/GesturesToZoom"),h=e("../../config/ColorConfig"),u=e("../../config/DefaultConfig"),p=e("../../config/GuildfightCityConfig"),m=e("../../config/GuildfightLvlConfig"),C=e("../../config/GuildfightTimeConfig"),_=e("../../config/ViewConfig"),v=e("../../config/WordConfig"),y=e("../../event/CommonEvent"),b=e("../../model/GuildPvPModel"),I=e("../../model/ServerTime"),M=e("./GuildPvPCityMainView"),w=cc._decorator,k=w.ccclass,S=w.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.top=null,t.isCanClick=!1,t}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(y.CommonEvent.Event_Guild_Pvp_Move,this.onEventShowLoad,this),s.EventManager.instance.on(y.CommonEvent.Event_Guild_Pvp_Enter,this.onEventEnterCity,this),s.EventManager.instance.on(y.CommonEvent.Event_Guild_Pvp_End,this.closeView,this),this.isCanClick=!1,this.initFindNode()},t.prototype.onDisable=function(){s.EventManager.instance.off(y.CommonEvent.Event_Guild_Pvp_Move,this.onEventShowLoad,this),s.EventManager.instance.off(y.CommonEvent.Event_Guild_Pvp_Enter,this.onEventEnterCity,this),s.EventManager.instance.off(y.CommonEvent.Event_Guild_Pvp_End,this.closeView,this),this.unscheduleAllCallbacks()},t.prototype.initFindNode=function(){this.mapPanel=this.findChild(this.node,"frame/content"),this.mapNode=this.findChild(this.node,"frame/content/guildPvPMapPanel"),this.cityInfoNode=this.findChild(this.node,"frame/guildPvPCityMainView"),this.topNode=this.findChild(this.node,"frame/ui/top"),this.topSprite=this.getChild(this.topNode,"name",cc.Sprite),this.btnAwardNode=this.findChild(this.node,"frame/ui/btnAward"),this.btnCityInfoNode=this.findChild(this.node,"frame/ui/btnCityInfo"),this.btnChatNode=this.findChild(this.node,"frame/ui/btnChat"),this.slider=this.getChild(this.node,"frame/ui/slider",cc.Slider),this.timeNumLabel=this.getChild(this.topNode,"timeCount/time",cc.Label),this.addNode=this.findChild(this.node,"frame/ui/slider/add"),this.reduceNode=this.findChild(this.node,"frame/ui/slider/reduce"),this.loadNode=this.findChild(this.node,"frame/load"),this.loadTime=this.getChild(this.loadNode,"time/num",cc.Label),this.loadDesc=this.getChild(this.loadNode,"desc",cc.RichText),this.loadProgress=this.getChild(this.loadNode,"progressBar",cc.ProgressBar),this.btnClose=this.findChild(this.node,"frame/btnClose"),this.topResourceNode=this.findChild(this.node,"frame/top")},t.prototype.initView=function(){this.cityInfoNode.active=!1,this.topNode.active=!0,this.slider.node.active=!0,this.mapPanel.active=!0,this.unscheduleAllCallbacks();var e=C.GuildfightTimeConfig.getConfig(b.GuildPvPModel.getInstance().round,C.GuildPvPTimeType.MakeWar),t=b.GuildPvPModel.getInstance().starTime+e.start_time+e.duration_time-Math.floor(I.ServerTime.getServerTime()/1e3);this.sumTimer(t);var i=m.GuildfightLvlConfig.getConfigByLev(b.GuildPvPModel.getInstance().round);(l.default.instance.loadSprite(this.topSprite,"texture/guild/"+i.doc_icon,!1),this.onAddEvent(this.btnAwardNode,this.onBtnAward.bind(this)),this.onAddEvent(this.btnCityInfoNode,this.onBtnCityInfo.bind(this)),this.onAddEvent(this.btnChatNode,this.onBtnChat.bind(this)),this.onAddEvent(this.addNode,this.onBtnSlider.bind(this,1)),this.onAddEvent(this.reduceNode,this.onBtnSlider.bind(this,0)),this.onAddEvent(this.btnClose,this.closeView.bind(this)),this.topResourceNode.getChildByName("TopResources"))||(cc.instantiate(this.top).parent=this.topResourceNode)},t.prototype.sumTimer=function(e){var t=this;this.timeNumLabel.string=a.default.formatLeftTime5(e),this.timeNumLabel.node.color=e>300?h.ColorConfig.GreenColor:h.ColorConfig.RedColor,this.schedule(function(){e-=1,t.timeNumLabel.string=a.default.formatLeftTime5(e),t.timeNumLabel.node.color=e>300?h.ColorConfig.GreenColor:h.ColorConfig.RedColor,0==e&&t.unscheduleAllCallbacks()},1)},t.prototype.onEventEnterCity=function(e){this.cityInfoNode.active=!0,this.mapPanel.active=!1,this.topNode.active=!1,this.slider.node.active=!1,this.cityInfoNode.getComponent(M.default).init(e)},t.prototype.onEventShowLoad=function(e,t){var i,n=this;e||this.cityInfoNode.active&&(this.cityInfoNode.active=!1,this.mapPanel.active=!0,this.topNode.active=!0,this.slider.node.active=!0),this.loadNode.active=!0,e&&(i=p.GuildfightCityConfig.getConfigById(e.nodeId),i=1==b.GuildPvPModel.getInstance().myBirthId||i.type==p.MapNodeType.Destination?i:p.GuildfightCityConfig.getConfigById(i.opppsite_city),b.GuildPvPModel.getInstance().s_move_start(e.nodeId));var o=e?cc.js.formatStr(v.WordConfig.getWord(61895),i.name):v.WordConfig.getWord(61887);this.loadDesc.string=o;var a=e?203:205,s=u.DefaultConfig.getConfigById(a).value,r=u.DefaultConfig.getConfigById(a).value-1;this.loadTime.string=s+"s",this.loadProgress.progress=s/u.DefaultConfig.getConfigById(a).value;var c=function(){s--,n.loadTime.string=s+"s",s<=0&&(n.unschedule(c),n.loadNode.active=!1,e&&t&&n.onEventEnterCity(e))};this.schedule(c,1);var l=function(){r-=.1,n.loadProgress.progress=r/u.DefaultConfig.getConfigById(a).value,r<=0&&n.unschedule(l)};this.schedule(l,.1)},t.prototype.onEventSlider=function(){var e=this.slider.progress;this.mapNode.scale=1.5+.5*e,this.mapPanel.getComponent(g.default).restrictPic()},t.prototype.onBtnSlider=function(e){this.mapNode.scale=1==e?this.mapNode.scale+.1>2?2:this.mapNode.scale+.1:this.mapNode.scale-.1<1.5?1.5:this.mapNode.scale-.1,this.slider.progress=(this.mapNode.scale-1.5)/.5,this.mapPanel.getComponent(g.default).restrictPic()},t.prototype.onBtnAward=function(){this.isCanClick&&d.default.instance.createView(_.default.gameView.GuildPvPAwardView)},t.prototype.onBtnCityInfo=function(){this.isCanClick&&d.default.instance.createView(_.default.gameView.GuildPvPCityListView)},t.prototype.onBtnChat=function(){d.default.instance.createView(_.default.gameView.ChatRoomView,null,2)},t.prototype.closeView=function(){this.cityInfoNode.active?(this.cityInfoNode.active=!1,this.mapPanel.active=!0,this.topNode.active=!0,this.slider.node.active=!0):(e.prototype.closeView.call(this),this.unscheduleAllCallbacks())},t.prototype.onSocketRespMsg=function(e,t){if(e==r.ProtoConfig.c_fight_map_info)this.isCanClick=!0,this.initView();else if(e==r.ProtoConfig.c_dead){var i=1==(n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_dead,t)).getStatus()?61901:61900;v.WordConfig.showWord(i),this.onEventShowLoad()}else if(e==r.ProtoConfig.c_fight_end){var n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_fight_end,t),o=new b.GuildPvPEndData;if(o.round=n.getRound(),o.guildId=n.getGuildId(),o.type=b.GuildPvPEndType.End,!C.GuildfightTimeConfig.getConfig(b.GuildPvPModel.getInstance().round,C.GuildPvPTimeType.MakeWar))return;d.default.instance.createView(_.default.gameView.GuildPvPEndTip,null,o)}},o([S(cc.Prefab)],t.prototype,"top",void 0),t=o([k],t)}(f.default);i.default=P,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../base/GesturesToZoom":"GesturesToZoom","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/GuildfightCityConfig":"GuildfightCityConfig","../../config/GuildfightLvlConfig":"GuildfightLvlConfig","../../config/GuildfightTimeConfig":"GuildfightTimeConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildPvPModel":"GuildPvPModel","../../model/ServerTime":"ServerTime","./GuildPvPCityMainView":"GuildPvPCityMainView"}],GuildPvPModel:[function(e,t,i){"use strict";cc._RF.push(t,"0d0a658EMFOBr/7zv3z4860","GuildPvPModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o,a,s=e("../../engine/GameSocket"),r=e("../../engine/Logger"),c=e("../../engine/ProtoConfig"),l=e("../../engine/ProtoUtils"),d=e("../../engine/UIManager"),f=e("../config/DefaultConfig"),g=e("../config/GameConfig"),h=e("../config/GuildfightCityConfig"),u=e("../config/GuildfightTimeConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../manager/RedPointManager"),_=e("./CostumeModel"),v=e("./GuildModel"),y=e("./RoleInfoModel"),b=e("./ServerTime");(function(e){e[e.NotApply=1]="NotApply",e[e.Audit=2]="Audit",e[e.NotEnter=3]="NotEnter",e[e.EnterNotApply=4]="EnterNotApply",e[e.EnterApply=5]="EnterApply",e[e.StarPk=6]="StarPk",e[e.Leisure=7]="Leisure"})(n=i.StatusType||(i.StatusType={})),function(e){e[e.UltimatelyEnd=1]="UltimatelyEnd",e[e.StageEnd=2]="StageEnd",e[e.End=3]="End"}(o=i.GuildPvPEndType||(i.GuildPvPEndType={})),function(e){e[e.MyCamp=0]="MyCamp",e[e.EnemyCamp=1]="EnemyCamp",e[e.Neutrality=2]="Neutrality"}(a=i.CityType||(i.CityType={}));var I=function(){return function(){}}();i.FightGroup=I;var M=function(){return function(){}}();i.MapNodeData=M;var w=function(){return function(){}}();i.AttackMapNodeData=w;var k=function(){return function(){}}();i.StrongholdData=k;var S=function(){return function(){}}();i.HeroInfoData=S;var P=function(){return function(){}}();i.GuildPvPEndData=P;var E=function(){function e(){this.eventIdList=[],this.protos=[],this.round=99,this.fightGroupMap=new Map,this.eventIdList=[C.RedPointId.GuildPvP],this.protos=[c.ProtoConfig.c_guild_status],C.default.getInstance().addHandler(this)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.s_guild_status=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_guild_status);r.Logger.log("s_guild_status==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.s_guild_apply_fight=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_guild_apply_fight);r.Logger.log("s_guild_apply_fight==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.s_guild_member_apply_fight=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_guild_member_apply_fight);r.Logger.log("s_guild_member_apply_fight==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.s_fight_group_info=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_fight_group_info);r.Logger.log("s_fight_group_info==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.s_fight_map_info=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_fight_map_info);r.Logger.log("s_fight_map_info==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.s_enter_born=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_enter_born);r.Logger.log("s_enter_born==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.s_move_start=function(e){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var t=l.ProtoUtils.Create(c.ProtoConfig.s_move_start);t.setTargetId(e),r.Logger.log("s_move_start==",t),s.default.getInstance().sendToSocket(t)}},e.prototype.s_move_end=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_move_end);r.Logger.log("s_move_end==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.s_defend_stronghold=function(e,t){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var i=l.ProtoUtils.Create(c.ProtoConfig.s_defend_stronghold);i.setFightMapNodeId(e),i.setStrongholdId(t),r.Logger.log("s_defend_stronghold==",i),s.default.getInstance().sendToSocket(i)}},e.prototype.s_cancel_defend_stronghold=function(e,t){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var i=l.ProtoUtils.Create(c.ProtoConfig.s_cancel_defend_stronghold);i.setFightMapNodeId(e),i.setStrongholdId(t),r.Logger.log("s_cancel_defend_stronghold==",i),s.default.getInstance().sendToSocket(i)}},e.prototype.s_start_attack=function(e,t){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var i=l.ProtoUtils.Create(c.ProtoConfig.s_start_attack);i.setFightMapNodeId(e),i.setStrongholdId(t),r.Logger.log("s_start_attack==",i),s.default.getInstance().sendToSocket(i)}},e.prototype.s_attack_stronghold=function(e,t){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var i=l.ProtoUtils.Create(c.ProtoConfig.s_attack_stronghold);i.setFightMapNodeId(e),i.setStrongholdId(t),r.Logger.log("s_attack_stronghold==",i),s.default.getInstance().sendToSocket(i)}},e.prototype.s_round_result=function(t){if(void 0===t&&(t=e.getInstance().round),g.GameConfig.connectServer&&s.default.getInstance().isLogin){var i=l.ProtoUtils.Create(c.ProtoConfig.s_round_result);i.setRound(t),r.Logger.log("s_round_result==",i),s.default.getInstance().sendToSocket(i)}},e.prototype.s_guild_fight_open=function(){if(g.GameConfig.connectServer&&s.default.getInstance().isLogin){var e=l.ProtoUtils.Create(c.ProtoConfig.s_guild_fight_open);r.Logger.log("s_guild_fight_open==",e),s.default.getInstance().sendToSocket(e)}},e.prototype.protos_c_guild_fight_open=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_guild_fight_open,e);this.openStatus=t.getStatus()},e.prototype.protos_c_guild_status=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_guild_status,e);this.status=t.getStatus(),this.round=t.getRound(),this.groupId=t.getGroupId(),this.starTime=t.getPeriodStartTime()},e.prototype.protos_c_guild_apply_fight=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_guild_apply_fight,e).getStatus();this.status=0==t?n.Audit:this.status,0==t&&m.WordConfig.showWord(61878)},e.prototype.protos_c_guild_member_apply_fight=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_guild_member_apply_fight,e).getStatus();this.status=0==t?n.EnterApply:this.status,0==t&&m.WordConfig.showWord(61878)},e.prototype.protos_c_fight_group_info=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_fight_group_info,e).getFightGroupListList();for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i],o=new I;o.groupId=n.getGroupId(),o.winGuild=n.getWinGuild(),o.winGuildName=n.getWinGuildName(),o.starTime=n.getFightStartTime(),o.endTime=n.getFightEndTime(),this.fightGroupMap.set(o.groupId,o)}},e.prototype.protos_c_fight_map_info=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_fight_map_info,e).getFightMapNodeListList();for(var i in this.mapModel=new Map,t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i],o=this.protos_util_map_info(n);this.mapModel.set(o.nodeId,o)}},e.prototype.protos_c_fight_map_node_info=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_fight_map_node_info,e),i=this.protos_util_map_info(t.getFightMapNodeInfo());this.mapModel&&this.mapModel.set(i.nodeId,i)},e.prototype.protos_c_attack_stronghold=function(e){l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_attack_stronghold,e)},e.prototype.protos_c_round_result=function(e){var t=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_round_result,e),i=new P;i.guildLeaderName=t.getGuildLeaderName(),i.guildNameList=t.getGuildNameListList()},e.prototype.protos_util_map_info=function(e){var t=new M;t.nodeId=e.getNodeId(),t.guildId=e.getGuildId(),t.buffId=e.getBuffId(),t.timestamp=e.getTimestamp(),t.status=e.getStatus(),t.guildName=e.getGuildName(),t.strongholdList=new Array,t.stayingHeroInfo=new Array,1==h.GuildfightCityConfig.getConfigById(t.nodeId).type&&t.guildId==v.GuildModel.instance.guildinfo.gid&&(this.myBirthId=t.nodeId);var i=e.getStrongholdListList();for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var o=i[n],a=new k;a.strongholdId=o.getStrongholdId(),a.guildId=o.getGuildId(),a.status=o.getStatus(),(r=new S).level=o.getDefender().getLevel(),r.heroId=o.getDefender().getHeroId(),r.guildId=o.getDefender().getGuildId(),r.name=o.getDefender().getName(),r.fightPower=o.getDefender().getFightPower(),r.curHp=o.getDefender().getCurHp(),r.maxHp=o.getDefender().getMaxHp(),o.getDefender().getAvatar()&&(r.avatar=_.CostumeModel.proto2Personalize(o.getDefender().getAvatar())),a.defender=r,t.strongholdList.push(a)}t.strongholdList.sort(function(e,t){return e.strongholdId-t.strongholdId});var s=e.getStayingHeroInfoList();for(var n in s)if(Object.prototype.hasOwnProperty.call(s,n)){var r,c=s[n];(r=new S).heroId=c.getHeroId(),r.guildId=c.getGuildId(),r.name=c.getName(),r.level=c.getLevel(),r.fightPower=c.getFightPower(),r.curHp=c.getCurHp(),r.maxHp=c.getMaxHp(),r.avatar=_.CostumeModel.proto2Personalize(c.getAvatar()),t.stayingHeroInfo.push(r),r.heroId==parseInt(y.default.instance.roleId)&&(this.currentStopNodeData=t)}return t},e.prototype.getFightGroupMapById=function(e){return this.fightGroupMap.get(e)},e.prototype.getMapModeArrByType=function(e){var t=new Array;return this.mapModel.forEach(function(i){var n=h.GuildfightCityConfig.getConfigById(i.nodeId);e==a.Neutrality&&0==i.guildId&&n.type!=h.MapNodeType.Resurgence?t.push(i):e==a.MyCamp&&i.guildId==v.GuildModel.instance.guildinfo.gid&&n.type!=h.MapNodeType.Resurgence?t.push(i):e==a.EnemyCamp&&i.guildId!=v.GuildModel.instance.guildinfo.gid&&i.guildId>0&&n.type!=h.MapNodeType.Resurgence&&t.push(i)}),t},e.prototype.getGuildPvpEndType=function(t){var i=0;if(u.GuildfightTimeConfig.getConfig(e.getInstance().round,u.GuildPvPTimeType.MakeWar))return t.guildLeaderName&&t.guildLeaderName.length>0?i=o.UltimatelyEnd:t.guildNameList.length>0&&(i=o.StageEnd),i},e.prototype.getGuildGroudList=function(e){var t=new Array;if(1==e)for(var i=4;i<=7;i++)t.push(this.fightGroupMap.get(i));else if(2==e)for(i=2;i<=3;i++)t.push(this.fightGroupMap.get(i));else t.push(this.fightGroupMap.get(1));return t},e.prototype.getGuildMapDestination=function(){var e;return this.mapModel.forEach(function(t){h.GuildfightCityConfig.getConfigById(t.nodeId).type==h.MapNodeType.Destination&&(e=t)}),e},e.prototype.getGuildMapById=function(e){var t=h.GuildfightCityConfig.getConfigById(e);return 1==this.myBirthId||t.type==h.MapNodeType.Destination?this.mapModel.get(e):this.mapModel.get(t.opppsite_city)},e.prototype.getMyHeroInfoData=function(){var e;return this.currentStopNodeData.stayingHeroInfo.every(function(t){return t.heroId!=parseInt(y.default.instance.roleId)||(e=t,!1)}),e},e.prototype.test1=function(t){if(1==t){var i=new P;i.round=2,i.guildId=102112;var n=u.GuildfightTimeConfig.getConfig(e.getInstance().round,u.GuildPvPTimeType.MakeWar);if(!n)return;var o=b.ServerTime.getServerTime(),a=1e3*e.getInstance().starTime;o>=a+n.start_time&&o<=a+n.start_time+n.duration_time&&d.default.instance.createView(p.default.gameView.GuildPvPEndTip,null,i)}else if(2==t||3==t){var s=new P;s.guildNameList=["\u54c8\u54c8\u54c8","xiixixix","xhsadasd","dasdsad"],s.guildLeaderName=2==t?"dadad":"",s.guildNameList.length>0&&d.default.instance.createView(p.default.gameView.GuildPvPEndTip,null,s)}},e.prototype.checkRedPoint=function(){var t=!1,i=u.GuildfightTimeConfig.getConfig(e.getInstance().round,u.GuildPvPTimeType.Truce);if(i){var o=e.getInstance().starTime+i.start_time;Math.floor(b.ServerTime.getServerTime()/1e3)<o&&(t=v.GuildModel.instance.getMyPositonType()==v.PositonType.President&&this.status==n.NotApply&&v.GuildModel.instance.guildinfo.level>=f.DefaultConfig.getConfigById(204).value&&v.GuildModel.instance.guildinfo.gold>=f.DefaultConfig.getConfigById(200).value||this.status==n.EnterNotApply)}return{id:C.RedPointId.GuildPvP,type:C.RedPointType.Default,show:t}},e}();i.GuildPvPModel=E,window.GuildPvPModel=E,cc._RF.pop()},{"../../engine/GameSocket":"GameSocket","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/DefaultConfig":"DefaultConfig","../config/GameConfig":"GameConfig","../config/GuildfightCityConfig":"GuildfightCityConfig","../config/GuildfightTimeConfig":"GuildfightTimeConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../manager/RedPointManager":"RedPointManager","./CostumeModel":"CostumeModel","./GuildModel":"GuildModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],GuildPvPResultView:[function(e,t,i){"use strict";cc._RF.push(t,"9c038vL0MhCRrqAD0bSzNaH","GuildPvPResultView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/GameConst"),c=e("../../config/ITemsConfig"),l=e("../../config/ViewConfig"),d=e("../../config/WordConfig"),f=e("../../model/CostumeModel"),g=e("../../model/ItemInfoModel"),h=e("../../prefab/ItemPrefab"),u=cc._decorator,p=u.ccclass,m=u.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemCellPrefab=null,t}return n(t,e),t.prototype.onInitChild=function(e,t,i){this.pkData=e.strongholdData.defender,this.myData=e.myHeroInfo,this.isSucceed=i,this.itemArr=t,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.succeedNode=this.getChild(this.node,"frame/succeed"),this.failNode=this.getChild(this.node,"frame/fail"),this.playerBg1Node=this.getChild(this.node,"frame/playerBg1"),this.playerBg2Node=this.getChild(this.node,"frame/playerBg2"),this.itemListNode=this.getChild(this.node,"frame/award/itemList"),this.btnSure=this.getChild(this.node,"frame/btnSure")},t.prototype.initView=function(){var e=this;if(this.succeedNode.active=this.isSucceed,this.failNode.active=!this.isSucceed,this.myData&&this.pkData){var t=void 0,i=void 0;this.isSucceed?(t=this.myData,i=this.pkData):(t=this.pkData,i=this.myData),this.setPlayerInfo(this.playerBg1Node,t),this.setPlayerInfo(this.playerBg2Node,i)}this.itemArr&&this.itemArr.length>0&&this.itemArr&&this.itemArr.forEach(function(t){e.initItemCell(t.id,t.count)}),this.onAddEvent(this.btnSure,this.closeView.bind(this))},t.prototype.initItemCell=function(e,t){var i=cc.instantiate(this.itemCellPrefab);i.parent=this.itemListNode;var n=c.ITemsConfig.getITemsConfigById(e),o=g.default.create(r.GameConst.ITEM_KIND.ITEM,n.id,t,n.quality);i.getComponent(h.default).init(o)},t.prototype.setPlayerInfo=function(e,t){var i=this.getChild(e,"headFrame",cc.Sprite),n=this.getChild(e,"headFrame/icon",cc.Sprite),o=this.getChild(e,"txtLevel",cc.Label),a=this.getChild(e,"txtName",cc.Label),s=this.getChild(e,"txtZhanLi",cc.Label);f.CostumeModel.setCostSF(n,f.CostumeType.Head,t.avatar.portrait),f.CostumeModel.setCostSF(i,f.CostumeType.HeadFM,t.avatar.portrait_skin),o.string="Lv"+t.level,a.string=t.name,s.string=d.WordConfig.getWord(60463)+t.fightPower},t.prototype.closeView=function(){e.prototype.closeView.call(this),a.default.instance.closeView(l.default.gameView.GuildPvPFightView)},o([m(cc.Prefab)],t.prototype,"itemCellPrefab",void 0),t=o([p],t)}(s.default);i.default=C,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/CostumeModel":"CostumeModel","../../model/ItemInfoModel":"ItemInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],GuildPvPStayingListView:[function(e,t,i){"use strict";cc._RF.push(t,"aff4dQq3z1Mx4/r+CcpbADX","GuildPvPStayingListView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/CostumeModel"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.listNode=this.findChild(this.node,"frame/scrollView/view/content"),this.playerNode=this.findChild(this.listNode,"playerInfo"),this.initList(e)},t.prototype.initList=function(e){for(var t=this.listNode.childrenCount>e.stayingHeroInfo.length?this.listNode.childrenCount:e.stayingHeroInfo.length,i=0;i<t;i++){var n=void 0;i<this.listNode.childrenCount?n=this.listNode.children[i]:((n=cc.instantiate(this.playerNode)).parent=this.listNode,n.setPosition(0,0)),n.active=i<e.stayingHeroInfo.length,i<e.stayingHeroInfo.length&&this.initPlayer(n,e.stayingHeroInfo[i])}},t.prototype.initPlayer=function(e,t){var i=this.getChild(e,"headFrame",cc.Sprite),n=this.getChild(i.node,"icon",cc.Sprite),o=this.getChild(e,"name",cc.Label),a=this.getChild(e,"power/num",cc.Label);s.CostumeModel.setCostSF(n,s.CostumeType.Head,t.avatar.portrait),s.CostumeModel.setCostSF(i,s.CostumeType.HeadFM,t.avatar.portrait),o.string=t.name,a.string=t.fightPower+""},t=o([c],t)}(a.default));i.default=l,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../model/CostumeModel":"CostumeModel"}],GuildPvPStrongholdInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"db69dBB8MRHd7P5NbuIDe5D","GuildPvPStrongholdInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ProtoConfig"),s=e("../../../engine/ProtoUtils"),r=e("../../../engine/ViewBase"),c=e("../../config/WordConfig"),l=e("../../model/CostumeModel"),d=e("../../model/GuildModel"),f=e("../../model/GuildPvPModel"),g=e("../../model/RoleInfoModel"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e,t,i){this.model=i,this.mapId=e,this.nodeId=t,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.nameLabel=this.getChild(this.node,"frame/name",cc.Label),this.powerNumLabel=this.getChild(this.node,"frame/power/num",cc.Label),this.hpLabel=this.getChild(this.node,"frame/hp/num",cc.Label),this.tipLabel=this.getChild(this.node,"frame/tip",cc.Label),this.btnAttackNode=this.getChild(this.node,"frame/btnAttack",cc.Node),this.btnRetreatNode=this.getChild(this.node,"frame/btnRetreat",cc.Node),this.headFrame=this.getChild(this.node,"frame/head/headFrame",cc.Sprite),this.headIcon=this.getChild(this.node,"frame/head/headIcon",cc.Sprite)},t.prototype.initView=function(){this.nameLabel.string=this.model.name,this.powerNumLabel.string=this.model.fightPower+"",this.hpLabel.string=this.model.curHp+"/"+this.model.maxHp,this.tipLabel.string=this.model.guildId==d.GuildModel.instance.guildinfo.gid?c.WordConfig.getWord(61885):c.WordConfig.getWord(61872),l.CostumeModel.setCostSF(this.headIcon,l.CostumeType.Head,this.model.avatar.portrait),l.CostumeModel.setCostSF(this.headFrame,l.CostumeType.HeadFM,this.model.avatar.portrait_skin),this.btnAttackNode.active=this.model.guildId!=d.GuildModel.instance.guildinfo.gid,this.btnRetreatNode.active=this.model.guildId==d.GuildModel.instance.guildinfo.gid&&this.model.heroId==parseInt(g.default.instance.roleId),this.onAddEvent(this.btnAttackNode,this.onBtnAttack.bind(this)),this.onAddEvent(this.btnRetreatNode,this.onBtnRetreat.bind(this))},t.prototype.onBtnAttack=function(){f.GuildPvPModel.getInstance().s_start_attack(this.mapId,this.nodeId)},t.prototype.onBtnRetreat=function(){f.GuildPvPModel.getInstance().s_cancel_defend_stronghold(this.mapId,this.nodeId),this.closeView()},t.prototype.onSocketRespMsg=function(e,t){e==a.ProtoConfig.c_start_attack&&(0==s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_start_attack,t).getResult()&&this.closeView())},t=o([u],t)}(r.default));i.default=p,cc._RF.pop()},{"../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../model/CostumeModel":"CostumeModel","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel","../../model/RoleInfoModel":"RoleInfoModel"}],GuildRecordItemPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"55a79D5nSlF/p9TuoES6ia8","GuildRecordItemPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/WordConfig"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhiyesf=[],t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.init=function(e){this.getChild(this.node,"order",cc.Label).string=e.idx,this.getChild(this.node,"name",cc.Label).string=e.name,this.getChild(this.node,"grecord",cc.Label).string=e.count,this.getChild(this.getChild(this.node,"name"),"icon_zhiye",cc.Sprite).spriteFrame=this.zhiyesf[e.prof-1];var t=s.WordConfig.getWord(61356);switch(e.position){case 1:t=s.WordConfig.getWord(61353);break;case 2:t=s.WordConfig.getWord(61354);break;case 3:t=s.WordConfig.getWord(61355);break;default:t=s.WordConfig.getWord(61356)}this.getChild(this.node,"power",cc.Label).string=t},o([l({type:[cc.SpriteFrame]})],t.prototype,"zhiyesf",void 0),t=o([c],t)}(a.default);i.GuildRecordItemPrefab=d,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig"}],GuildShopTip:[function(e,t,i){"use strict";cc._RF.push(t,"e3533+CCRhLhpZ/u/gYMAlQ","GuildShopTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/GameConst"),r=e("../../config/ITemsConfig"),c=e("../../model/ItemInfoModel"),l=e("../../prefab/ItemPrefab"),d=e("../../config/GuildConfig"),f=e("../../model/GuildModel"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minExchangeNum=1,t.exchangeNum=0,t.maxExchangeNum=0,t.type=0,t.money=0,t}return n(t,e),t.prototype.onInitChild=function(e,t,i,n,o){void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=1),this.shopId=e,t>this.minExchangeNum&&(this.minExchangeNum=t),this.exchangeNum=t,this.maxExchangeNum=i,this.type=n,this.money=o,this.refreshShop(),this.refreshNum()},t.prototype.onShow=function(){},t.prototype.refreshShop=function(){var e=this,t=d.GuildConfig.GuildShopConfigMap.get(this.shopId),i=this.findChild(this.node,"ItemPrefab"),n=r.ITemsConfig.getITemsConfigById(t.item),o=c.default.create(s.GameConst.ITEM_KIND.ITEM,t.item,t.item_num,n.quality);i.getComponent(l.default).init(o,!0),this.getChild(this.node,"txtDesc",cc.RichText).string=n.description,this.getChild(this.node,"txtLevel",cc.Label).string=n.level+"";var a=this.findChild(this.node,"btnBuy");this.getChild(this.node,"img_gx").active=1==this.type,this.getChild(this.node,"img_yb").active=2==this.type,this.onAddEvent(a,function(){e.closeView(),f.GuildModel.s_guild_store_buy(e.shopId,e.exchangeNum)});var g=this.findChild(this.node,"btnDec");this.onAddEvent(g,function(){e.exchangeNum--,e.exchangeNum<e.minExchangeNum&&(e.exchangeNum=e.minExchangeNum),e.refreshNum()});var h=this.findChild(this.node,"btnAdd");this.onAddEvent(h,function(){e.exchangeNum++,e.exchangeNum>e.maxExchangeNum&&(e.exchangeNum=e.maxExchangeNum),e.refreshNum()});var u=this.findChild(this.node,"btnMax");this.onAddEvent(u,function(){e.exchangeNum=e.maxExchangeNum,e.refreshNum()});var p=this.getChild(this.node,"amountEditBox",cc.EditBox);p.node.on("text-changed",function(){var t=parseInt(p.string);(isNaN(t)||t<=0)&&(t=1,p.string=t+""),t>=e.maxExchangeNum&&(t=e.maxExchangeNum,p.string=e.maxExchangeNum+""),t!=e.exchangeNum&&(e.exchangeNum=t),e.refreshNum()})},t.prototype.refreshNum=function(){this.getChild(this.node,"amountEditBox",cc.EditBox).string=this.exchangeNum+"",this.getChild(this.node,"money",cc.Label).string=this.money*this.exchangeNum},t=o([h],t)}(a.default));i.GuildShopTip=u,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/GuildConfig":"GuildConfig","../../config/ITemsConfig":"ITemsConfig","../../model/GuildModel":"GuildModel","../../model/ItemInfoModel":"ItemInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],GuildShopView:[function(e,t,i){"use strict";cc._RF.push(t,"42d485EGjFKsKRO0iwRtJzc","GuildShopView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../../engine/EventManager"),c=e("../../event/CommonEvent"),l=e("../../utils/UIHelper"),d=e("../../model/GuildModel"),f=e("../../../game/config/GuildConfig"),g=e("../../prefab/GuildshopitemPrefab"),h=e("../../config/ITemsConfig"),u=e("../../config/WordConfig"),p=e("../../config/ColorConfig"),m=e("../../model/RoleInfoModel"),C=cc._decorator,_=C.ccclass,v=C.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guildshopitem=null,t.guildshopScrv=null,t.guildshopcontent=null,t.shopup=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(){for(var e=this,t=this.getChild(this.node,"toggle"),i=0;i<t.childrenCount;i++){t.children[i].on("toggle",this.onToggleTable.bind(this,i+1),this)}this.findChild(this.node,"btnclose").on(cc.Node.EventType.TOUCH_END,this.closeView,this),this.shopup=this.findChild(this.node,"shopup"),this.getChild(this.shopup,"btnlevelup").on(cc.Node.EventType.TOUCH_END,this.onBtnlevelup2,this),this.getChild(this.shopup,"darkLayer").on(cc.Node.EventType.TOUCH_END,function(){e.shopup.active=!1}),this.getChild(this.shopup,"btnclose").on(cc.Node.EventType.TOUCH_END,function(){e.shopup.active=!1}),this.guildshopScrv=this.findChild(this.node,"panel"),this.guildshopcontent=this.findChild(this.node,"panel/view/content"),this.findChild(this.node,"btnlevelup").on(cc.Node.EventType.TOUCH_END,this.onBtnlevelup,this)},t.prototype.onEnable=function(){},t.prototype.onShow=function(){this.init(),this.ToggleTable=null,this.node.active=!0,this.shopup.active=!1;var e=d.GuildModel.instance.guildshoplist;this.getChild(this.node,"levellabel",cc.Label).string="lv."+e.level,this.getChild(this.node,"contribute",cc.Label).string=l.UIHelper.tranNumber(m.default.instance.getGuildGX()),r.EventManager.instance.on(c.CommonEvent.Event_Guild_UPDATE_SHOP,this.onUpShopVieww,this),r.EventManager.instance.on(c.CommonEvent.Event_Guild_UPDATE_SHOP,this.initlevelup,this),r.EventManager.instance.on(c.CommonEvent.Event_UserInfoRefresh,this.initlevelup,this),r.EventManager.instance.on(c.CommonEvent.Event_Guild_UPDATE_SHOP_LEVEL_UP,this.onGetStoreInfo,this),this.onToggleTable(1)},t.prototype.onGetStoreInfo=function(){d.GuildModel.s_guild_store_info(this.ToggleTable)},t.prototype.initlevelup=function(){var e=d.GuildModel.instance.guildshoplist;this.getChild(this.node,"levellabel",cc.Label).string="lv."+e.level,this.getChild(this.node,"contribute",cc.Label).string=l.UIHelper.tranNumber(m.default.instance.getGuildGX());var t=f.GuildConfig.GuildShoplvConfigMap.get(e.level);if(this.getChild(this.node,"btnlevelup").color=t.limit>0?cc.Color.WHITE:cc.Color.GRAY,t.limit<0)this.shopup.active=!1;else{var i=this.getChild(this.shopup,"levellabel1");i.getComponent(cc.Label).string="lv."+e.level,this.getChild(i,"levellabel2").getComponent(cc.Label).string="lv."+(e.level+1);for(var n=function(e){var i=o.getChild(o.shopup,"preview"+e);if(t.item[e-1]){var n=o.getChild(i,"name"),a=h.ITemsConfig.getITemsConfigById(t.item[e-1]),s="<color="+p.ColorConfig.getQualityHexColor(a.quality)+">"+a.name+"</color> ";n.getComponent(cc.RichText).string=s+u.WordConfig.getWord(61417)+t.before[e-1];var r=o.getChild(n,"ui_jiantouxiao"),c=o.getChild(n,"num2");c.getComponent(cc.Label).string=t.after[e-1],setTimeout(function(){r.x=n.width+r.width,c.x=r.x+r.width}),i.active=!0}else i.active=!1},o=this,a=1;a<4;a++)n(a);this.getChild(this.shopup,"datinglevel",cc.Label).string=u.WordConfig.getWord(61351)+t.limit+u.WordConfig.getWord(61352),this.getChild(this.shopup,"datinglevel").color=d.GuildModel.instance.guildinfo.level>=t.limit?cc.Color.GREEN:cc.Color.RED;var s=d.GuildModel.instance.guildinfo.gold,r=t.cost,c=this.getChild(this.shopup,"prpgresslabel"),g=this.findChild(this.shopup,"prpgresslabel/img_icon_hanghuizijin");c.getComponent(cc.Label).string=s+"/"+r,this.getChild(this.shopup,"progressBar").getComponent(cc.ProgressBar).progress=s>r?1:(s/r).toFixed(2),setTimeout(function(){g.x=c.width/2+g.width/2+3})}},t.prototype.onBtnlevelup=function(){s.MusicHelper.play_click(),this.shopup.active=!0,this.initlevelup()},t.prototype.onBtnlevelup2=function(){s.MusicHelper.play_click(),d.GuildModel.s_guild_store_levelup()},t.prototype.onUpShopVieww=function(e){if(this.guildshopcontent.removeAllChildren(),this.guildshopScrv.getComponent(cc.ScrollView).scrollToTop(),d.GuildModel.instance.guildshoplist&&d.GuildModel.instance.guildshoplist.itemList&&d.GuildModel.instance.guildshoplist.itemList[this.ToggleTable]){var t=d.GuildModel.instance.guildshoplist.itemList[this.ToggleTable];t.sort(function(e,t){return e.id-t.id});for(var i=0;i<t.length;i++){var n=cc.instantiate(this.guildshopitem),o=t[i];n.getComponent(g.GuildshopitemPrefab).init(o,this.ToggleTable),this.guildshopcontent.addChild(n)}}},t.prototype.onToggleTable=function(e){this.ToggleTable!=e&&(s.MusicHelper.play_click(),this.ToggleTable=e,this.getChild(this.node,"toggle").children[e-1].getComponent(cc.Toggle).isChecked=!0,this.onGetStoreInfo())},o([v(cc.Prefab)],t.prototype,"guildshopitem",void 0),t=o([_],t)}(a.default);i.GuildShopView=y,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../../game/config/GuildConfig":"GuildConfig","../../config/ColorConfig":"ColorConfig","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/GuildshopitemPrefab":"GuildshopitemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper"}],GuildSkillView:[function(e,t,i){"use strict";cc._RF.push(t,"73cc8/nPbZESqGQF0k96L1S","GuildSkillView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../../engine/EventManager"),c=e("../../event/CommonEvent"),l=e("../../utils/UIHelper"),d=e("../../model/GuildModel"),f=e("../../model/RoleInfoModel"),g=e("../../../game/config/GuildConfig"),h=e("../../config/WordConfig"),u=e("../../config/MagicNameConfig"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guildshopitem=null,t.jdspriteFrameList_hui=[],t.jdspriteFrameList_huang=[],t.xianspriteFrameList_hui=[],t.xianspriteFrameList_huang=[],t.numspriteFrameList_hui=[],t.numspriteFrameList_huang=[],t.skillToggleTable=0,t.currentskilllevel=null,t.currentskilllevelMax=0,t.levelMax=10,t.runAnim=!1,t.studybool=!1,t.skillinfo=null,t.skilllevel=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(){var e=this;this.toggleTableContent=this.findChild(this.node,"scrollView/view/content");for(var t=0;t<this.toggleTableContent.childrenCount;t++){var i=this.toggleTableContent.children[t];i.on("toggle",this.onSkillToggleTable.bind(this,t),this);var n=g.GuildConfig.GuildSkillConfigMap.get(Number(t+1+"0101"));this.findChild(i,"Background/name").getComponent(cc.Label).string=n.name,this.findChild(i,"checkmark/name").getComponent(cc.Label).string=n.name}this.skilllist1=this.findChild(this.node,"skilllistmask/skilllist1"),this.skilllist2=this.findChild(this.node,"skilllistmask/skilllist2"),this.findChild(this.node,"btnclose").on(cc.Node.EventType.TOUCH_END,function(){s.MusicHelper.play_click(),e.node.active=!1}),this.findChild(this.node,"skilllevelnode/btnstudy").on(cc.Node.EventType.TOUCH_END,this.onBtnstudy,this),this.btnlevelup=this.findChild(this.node,"btnlevelup"),this.btnlevelup.on(cc.Node.EventType.TOUCH_END,this.onBtnlevelup,this),this.findChild(this.node,"btnLeft").on(cc.Node.EventType.TOUCH_END,this.onBtnLeft,this),this.findChild(this.node,"btnright").on(cc.Node.EventType.TOUCH_END,this.onBtnright,this),this.skillup=this.findChild(this.node,"skillup"),this.skillup.active=!1,this.getChild(this.skillup,"btnlevelup").on(cc.Node.EventType.TOUCH_END,this.onBtnlevelup2,this),this.findChild(this.skillup,"darkLayer").on(cc.Node.EventType.TOUCH_END,this.oncloseUp,this),this.findChild(this.skillup,"btnclose").on(cc.Node.EventType.TOUCH_END,this.oncloseUp,this),this.toggleTableContent=this.findChild(this.node,"scrollView/view/content"),this.levelmax=this.findChild(this.node,"levelmax"),this.datinglevel=this.findChild(this.skillup,"datinglevel"),this.prpgresslabel=this.findChild(this.skillup,"prpgresslabel"),this.hanghuizijin=this.findChild(this.skillup,"prpgresslabel/img_icon_hanghuizijin"),this.skilllevelnode=this.findChild(this.node,"skilllevelnode"),this.jblabel=this.findChild(this.skilllevelnode,"jblabel"),this.gxlabel=this.findChild(this.skilllevelnode,"gxlabel"),this.levellabel1=this.findChild(this.skillup,"levellabel1").getComponent(cc.Label),this.levellabel2=this.findChild(this.skillup,"levellabel1/levellabel2").getComponent(cc.Label),this.levellabel=this.findChild(this.node,"labelnode/levellabel").getComponent(cc.Label),this.skillname=this.findChild(this.node,"labelnode/skillname").getComponent(cc.Label),this.skilllevellabel=this.findChild(this.node,"labelnode/skilllevel").getComponent(cc.Label),this.progressBar=this.getChild(this.skillup,"progressBar").getComponent(cc.ProgressBar),this.namestr=this.findChild(this.skillup,"preview/name").getComponent(cc.RichText),d.GuildModel.s_guild_library_info()},t.prototype.onEnable=function(){},t.prototype.onShow=function(){if(this.skillup.active=!1,d.GuildModel.instance.guildskillinfo.level){var e=g.GuildConfig.GuildSkilllvConfigMap.get(d.GuildModel.instance.guildskillinfo.level+1);this.btnlevelup.active=!!e}r.EventManager.instance.on(c.CommonEvent.Event_Guild_UPDATE_SKILL,this.updateSkill,this),r.EventManager.instance.on(c.CommonEvent.Event_UserInfoRefresh,this.onRefreshGX,this),this.onSkillToggleTable(0),this.onRefreshGX()},t.prototype.updateSkill=function(){var e=d.GuildModel.instance.guildskillinfo.tlibrary[this.skillToggleTable].skillid,t=g.GuildConfig.GuildSkillConfigMap.get(e);this.currentskilllevel?t&&10==t.level?this.onBtnright():this.onRefresh(!1):this.checkSkillLevel(!0)},t.prototype.checkSkillLevel=function(e){void 0===e&&(e=!1);var t=d.GuildModel.instance.guildskillinfo.tlibrary;if(t&&!(t.length<1)){var i=t[this.skillToggleTable].skillid,n=g.GuildConfig.GuildSkillConfigMap.get(i);if(this.currentskilllevelMax=n.level==this.levelMax||0==n.level?n.floor+1:n.floor,e&&(this.currentskilllevel=this.currentskilllevelMax>this.levelMax?this.levelMax:this.currentskilllevelMax),this.currentskilllevel>this.currentskilllevelMax)this.currentskilllevel=this.currentskilllevelMax;else if(this.currentskilllevel>this.levelMax)this.currentskilllevel=this.levelMax;else{if(!(this.currentskilllevel<1))return!0;this.currentskilllevel=1}return!1}},t.prototype.onRefreshGX=function(){var e=d.GuildModel.instance.guildskillinfo.tlibrary;if(e&&!(e.length<1)){var t=e[this.skillToggleTable].skillid,i=g.GuildConfig.GuildSkillConfigMap.get(t);this.jblabel.getComponent(cc.Label).string=l.UIHelper.tranNumber(f.default.instance.getCoin())+"/"+l.UIHelper.tranNumber(i.cost[0]?i.cost[0][1]:0),this.gxlabel.getComponent(cc.Label).string=l.UIHelper.tranNumber(f.default.instance.getGuildGX())+"/"+l.UIHelper.tranNumber(i.cost[1]?i.cost[1][10]:0),this.jblabel.color=f.default.instance.getCoin()>=(i.cost[0]?i.cost[0][1]:0)?cc.Color.GREEN:cc.Color.RED,this.gxlabel.color=f.default.instance.getGuildGX()>=(i.cost[1]?i.cost[1][10]:0)?cc.Color.GREEN:cc.Color.RED}},t.prototype.onRefresh=function(e){void 0===e&&(e=!1);var t=d.GuildModel.instance.guildskillinfo,i=t.tlibrary;if(i&&!(i.length<1)){for(var n=i[this.skillToggleTable].skillid,o=g.GuildConfig.GuildSkillConfigMap.get(n),a=g.GuildConfig.GuildSkillConfigMap.get(0==o.next?n:o.next),s=function(e){var t=r.toggleTableContent.children[e];t.getComponent(cc.Toggle).interactable=1==i[e].unlock;var n=1==i[e].unlock?cc.Color.WHITE:cc.Color.GRAY,o=r.findChild(t,"Background");o.color=n,o.children.forEach(function(e){e.color=n}),r.findChild(t,"jiesuo").active=1!=i[e].unlock,r.findChild(t,"jiesuo").getComponent(cc.Label).string=cc.js.formatStr(h.WordConfig.getWord(61453),e+1)},r=this,c=0;c<this.toggleTableContent.childrenCount;c++)s(c);if(this.currentskilllevel>1)for(var l=1;l<=this.skilllist1.children.length;l++){(f=this.findChild(this.skilllist1,"skill"+l)).getChildByName("label").getComponent(cc.Label).string=this.getKillString(this.currentskilllevel-1,l)}for(l=1;l<=this.skilllist2.children.length;l++){var f,u=this.currentskilllevel<this.currentskilllevelMax||l<=o.level&&o.level!=this.levelMax,p=(f=this.findChild(this.skilllist2,"skill"+l)).getChildByName("xian"),m=f.getChildByName("quan"),C=f.getChildByName("num"),_=f.getChildByName("bg"),v=f.getChildByName("label");if(p&&(p.getComponent(cc.Sprite).spriteFrame=u?this.xianspriteFrameList_huang[l-2]:this.xianspriteFrameList_hui[l-2]),m){var y=5==l?2:10==l?3:0;m.getComponent(cc.Sprite).spriteFrame=u?this.jdspriteFrameList_huang[y]:this.jdspriteFrameList_hui[y]}C&&(C.getComponent(cc.Sprite).spriteFrame=u?this.numspriteFrameList_huang[l-1]:this.numspriteFrameList_hui[l-1]),_&&(_.getComponent(cc.Sprite).spriteFrame=u?this.jdspriteFrameList_huang[1]:this.jdspriteFrameList_hui[1],_.active=u||l==a.level||5==l||10==l),v&&(v.getComponent(cc.Label).string=this.getKillString(this.currentskilllevel,l),v.color=u?cc.Color.BLACK.fromHEX("#FFE1AD"):cc.Color.WHITE,v.active=u||l==a.level||5==l||10==l)}this.skilllist2.stopAllActions(),this.skilllist1.stopAllActions(),this.skilllist2.x=e?480:0,this.skilllist1.x=e?0:-480,this.levelmax.active=this.currentskilllevel<this.currentskilllevelMax,this.skilllevelnode.active=this.currentskilllevel>=this.currentskilllevelMax,this.levellabel.string="lv."+d.GuildModel.instance.guildskillinfo.level,this.skillname.string=o.name,this.skilllevellabel.string=this.skilllevel[this.currentskilllevel]+h.WordConfig.getWord(61454),this.checkBtnColor();g.GuildConfig.GuildSkilllvConfigMap.get(t.level);var b=g.GuildConfig.GuildSkilllvConfigMap.get(t.level+1);if(this.skillup.active)return b?void this.onRefreshLevelUp():(this.skillup.active=!1,void(this.btnlevelup.active=!1))}},t.prototype.onRefreshLevelUp=function(){var e=this,t=d.GuildModel.instance.guildskillinfo,i=g.GuildConfig.GuildSkilllvConfigMap.get(t.level),n=g.GuildConfig.GuildSkilllvConfigMap.get(t.level+1),o=g.GuildConfig.GuildSkillConfigMap.get(Number(n.newbook[0]+"0101"));this.namestr.string=h.WordConfig.getWord(61452)+" <color=#00ff00>"+o.name+"</c>",this.levellabel1.string="lv."+t.level,this.levellabel2.string="lv."+(t.level+1),this.datinglevel.getComponent(cc.Label).string=h.WordConfig.getWord(61351)+i.need+h.WordConfig.getWord(61352),this.datinglevel.color=d.GuildModel.instance.guildinfo.level>=i.need?cc.Color.GREEN:cc.Color.RED;var a=d.GuildModel.instance.guildinfo.gold,s=i.cost;this.prpgresslabel.getComponent(cc.Label).string=a+"/"+s,this.progressBar.progress=a>s?1:Number((a/s).toFixed(2)),setTimeout(function(){e.hanghuizijin.x=e.prpgresslabel.width/2+e.hanghuizijin.width/2+3})},t.prototype.getKillString=function(e,t){var i=d.GuildModel.instance.guildskillinfo.tlibrary,n=10==e?"10":"0"+e,o=10==t?"10":"0"+t;return this.getMagicConfigById(g.GuildConfig.GuildSkillConfigMap.get(Number(i[this.skillToggleTable].idx+n+o)).attr_add)},t.prototype.onBtnstudy=function(){var e=this;if(!this.studybool){var t=d.GuildModel.instance.guildskillinfo.tlibrary,i=t[this.skillToggleTable].skillid,n=g.GuildConfig.GuildSkillConfigMap.get(i);f.default.instance.getCoin()<(n.cost[0]?n.cost[0][1]:0)?h.WordConfig.showWord(60102):f.default.instance.getGuildGX()<(n.cost[1]?n.cost[1][10]:0)?h.WordConfig.showWord(61416):(this.studybool=!0,this.checkStudy()&&d.GuildModel.s_guild_skill_levelup(t[this.skillToggleTable].idx),setTimeout(function(){e.studybool=!1},500))}},t.prototype.checkStudy=function(){var e=!1,t=d.GuildModel.instance.guildskillinfo.tlibrary,i=t[this.skillToggleTable].skillid,n=g.GuildConfig.GuildSkillConfigMap.get(i),o=g.GuildConfig.GuildSkillConfigMap.get(n.next);if(o)if(o.condition.length>0){var a=o.condition[0];for(var s in a){var r=t[Number(s)-1].skillid,c=g.GuildConfig.GuildSkillConfigMap.get(r);if(c.floor>=a[s])e=!0;else{var f=cc.js.formatStr(h.WordConfig.getWord(61449),c.name,a[s]);l.UIHelper.showTip(f)}}}else e=!0;return e},t.prototype.onBtnLeft=function(){var e=this;this.runAnim||(--this.currentskilllevel,this.checkSkillLevel()&&(this.runAnim=!0,this.skilllist2.x=0,this.skilllist2.stopAllActions(),this.skilllist2.runAction(cc.sequence(cc.moveTo(.3,cc.v2(480,0)),cc.callFunc(function(){e.runAnim=!1,e.onRefresh(!1)}))),this.skilllist1.x=-480,this.skilllist1.stopAllActions(),this.skilllist1.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,0)),cc.callFunc(function(){})))))},t.prototype.onBtnright=function(){var e=this;this.runAnim||(++this.currentskilllevel,this.checkSkillLevel()?(this.runAnim=!0,this.onRefresh(!0),this.skilllist2.stopAllActions(),this.skilllist2.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,0)),cc.callFunc(function(){e.runAnim=!1}))),this.skilllist1.stopAllActions(),this.skilllist1.runAction(cc.sequence(cc.moveTo(.3,cc.v2(-480,0)),cc.callFunc(function(){})))):this.onRefresh(!1))},t.prototype.checkBtnColor=function(){this.findChild(this.node,"btnLeft").color=this.currentskilllevel<=1?cc.Color.GRAY:cc.Color.WHITE,this.currentskilllevel==this.levelMax||this.currentskilllevel==this.currentskilllevelMax?this.findChild(this.node,"btnright").color=cc.Color.GRAY:this.findChild(this.node,"btnright").color=cc.Color.WHITE},t.prototype.onBtnlevelup=function(){g.GuildConfig.GuildSkilllvConfigMap.get(d.GuildModel.instance.guildskillinfo.level+1)&&(this.skillup.active=!0,this.onRefreshLevelUp())},t.prototype.onBtnlevelup2=function(){d.GuildModel.s_guild_library_levelup()},t.prototype.oncloseUp=function(){this.skillup.active=!1},t.prototype.onSkillToggleTable=function(e){this.skillToggleTable=e,this.toggleTableContent.children[e].getComponent(cc.Toggle).isChecked=!0,this.checkSkillLevel(!0)&&(this.onRefresh(!1),this.onRefreshGX())},t.prototype.getMagicConfigById=function(e){var t="";return e.forEach(function(e){for(var i in e){var n=u.MagicNameConfig.getMagicConfigById(Number(i));n&&(t+=u.MagicNameConfig.getDesc(Number(i))+"+",1==n.type?t+=e[i]/100+"%":t+=e[i])}}),t},o([C(cc.Prefab)],t.prototype,"guildshopitem",void 0),o([C({type:[cc.SpriteFrame]})],t.prototype,"jdspriteFrameList_hui",void 0),o([C({type:[cc.SpriteFrame]})],t.prototype,"jdspriteFrameList_huang",void 0),o([C({type:[cc.SpriteFrame]})],t.prototype,"xianspriteFrameList_hui",void 0),o([C({type:[cc.SpriteFrame]})],t.prototype,"xianspriteFrameList_huang",void 0),o([C({type:[cc.SpriteFrame]})],t.prototype,"numspriteFrameList_hui",void 0),o([C({type:[cc.SpriteFrame]})],t.prototype,"numspriteFrameList_huang",void 0),t=o([m],t)}(a.default);i.GuildSkillView=_,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../../game/config/GuildConfig":"GuildConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/RoleInfoModel":"RoleInfoModel","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper"}],GuildStoreRoomItem:[function(e,t,i){"use strict";cc._RF.push(t,"0111cwuM/9C/YwXN/IumxKj","GuildStoreRoomItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/ItemInfoModel"),r=e("../../prefab/ItemPrefab"),c=e("../../../engine/UIManager"),l=e("../../config/ViewConfig"),d=e("../../config/GameConst"),f=e("../../model/ChatRoomModel"),g=e("../../model/RoleInfoModel"),h=e("../../config/ITemsConfig"),u=e("../../config/WordConfig"),p=e("../../model/ServerTime"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(e){if(this.confi=e,h.ITemsConfig.getITemsConfigById(e.item_type))this.model=s.default.create(d.GameConst.ITEM_KIND.ITEM,this.confi.item_type,this.confi.item_num,this.confi.quality);else{if(this.model=f.ChatRoomModel.getItemByid(e.id.toString()),!this.model)return;this.model.isExhibition=2}this.node.getChildByName("ItemPrefab").getComponent(r.default).init(this.model,!0),this.node.getChildByName("buy").on(cc.Node.EventType.TOUCH_END,this.onBuy,this),this.node.getChildByName("buynum").getComponent(cc.Label).string=e.stock+"",this.node.getChildByName("jinbiNode").getChildByName("txtCost").getComponent(cc.Label).string=e.price+""},t.prototype.onBuy=function(){var e=g.default.instance.getGuildGExploits(),t=Math.floor(e/this.confi.price);if((t=t>this.confi.stock?this.confi.stock:t)>0){var i=(1e3*this.confi.endTime-p.ServerTime.getServerTime())/1e3,n=Math.floor(i/3600),o=Math.floor(i%86400%3600/60),a="";a+=n>0?n+u.WordConfig.getWord(60473):"",a+=o>0?o+u.WordConfig.getWord(60474):"";var s=cc.js.formatStr(u.WordConfig.getWord(61624),this.confi.endnum,a);c.default.instance.createView(l.default.gameView.GuildstoreroomTip,null,this.model,!1,this.confi.price,t,s)}else u.WordConfig.showWord(61507)},t=o([C],t)}(a.default));i.GuildStoreRoomItem=_,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/ChatRoomModel":"ChatRoomModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ServerTime":"ServerTime","../../prefab/ItemPrefab":"ItemPrefab"}],GuildStoreRoomTip:[function(e,t,i){"use strict";cc._RF.push(t,"b793f8jTXZMVYUyCEpzbOMZ","GuildStoreRoomTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../prefab/ItemPrefab"),c=e("../../model/GuildModel"),l=e("../../../game/config/GuildConfig"),d=e("../../config/WordConfig"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t.type=null,t.confi=null,t.nummin=1,t.nummax=1,t.price=1,t.descstr="",t.nowBuyNum=1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(e,t,i,n,o){void 0===t&&(t=!1),void 0===n&&(n=1),void 0===o&&(o=""),this.model=e,this.type=t,this.nummax=n,this.price=i,this.confi=l.GuildConfig.GuildDepotConfigMap.get(this.model.itemType),this.nummin=1,this.descstr=o},t.prototype.onShow=function(){this.setTopUI(),this.findChild(this.node,"fontclip_fangru").active=this.type,this.findChild(this.node,"fontclip_duihuan").active=!this.type,this.findChild(this.node,"txtPriceType").getComponent(cc.Label).string=d.WordConfig.getWord(this.type?61509:61508),this.findChild(this.node,"btnstorage").active=this.type,this.findChild(this.node,"btnbuy").active=!this.type,this.itempre=this.node.getChildByName("ItemPrefab"),this.itempre.getComponent(r.default).init(this.model,!0),this.findChild(this.node,"btnDec").on(cc.Node.EventType.TOUCH_END,this.onCLickPre.bind(this)),this.findChild(this.node,"btnAdd").on(cc.Node.EventType.TOUCH_END,this.onClickNext.bind(this)),this.findChild(this.node,"btnMax").on(cc.Node.EventType.TOUCH_END,this.onClickMax.bind(this)),this.findChild(this.node,"btnbuy").on(cc.Node.EventType.TOUCH_END,this.onCLickBuy.bind(this)),this.findChild(this.node,"btnstorage").on(cc.Node.EventType.TOUCH_END,this.onStorage.bind(this)),this.amountEditBox=this.getChild(this.node,"amountEditBox",cc.EditBox),this.amountEditBox.node.on("text-changed",this.onTextChange,this),this.txtCoin=this.findChild(this.node,"txtCoin"),this.amountEditBox.string=this.nummin+"";var e=this.findChild(this.node,"txtDesc");e.active=!!this.descstr,e.getComponent(cc.RichText).string=this.descstr,this.onTextChange()},t.prototype.onTextChange=function(){this.nowBuyNum=parseInt(this.amountEditBox.string),this.refreBuy()},t.prototype.refreBuy=function(){this.nummax<this.nummin?this.nowBuyNum=0:isNaN(this.nowBuyNum)||this.nowBuyNum<=0?this.nowBuyNum=1:this.nowBuyNum>=this.nummax&&(this.nowBuyNum=this.nummax),this.amountEditBox.string=this.nowBuyNum+"";var e=this.nowBuyNum/this.nummin*this.price;this.txtCoin.getComponent(cc.Label).string=e.toString(),this.itempre.getComponent(r.default).setNumTxt(this.nowBuyNum*this.confi.unit)},t.prototype.onCLickBuy=function(){1!=this.model.itemKind?c.GuildModel.s_guild_treasury_takeout(2,this.model.itemId,this.nowBuyNum):c.GuildModel.s_guild_treasury_takeout(1,this.model.itemType,this.nowBuyNum),this.closeView()},t.prototype.onStorage=function(){this.model.embedRuneList.length>0?d.WordConfig.showWord(61535):this.model.isLock?d.WordConfig.showWord(61538):c.GuildModel.s_guild_treasury_deposit(Number(this.model.itemId),Number(this.amountEditBox.string)),this.closeView()},t.prototype.onCLickPre=function(){s.MusicHelper.play_click();var e=this.nowBuyNum-this.nummin;e>=this.nummin&&(this.nowBuyNum=e,this.refreBuy())},t.prototype.onClickNext=function(){s.MusicHelper.play_click();var e=this.nowBuyNum+this.nummin;e<=this.nummax&&(this.nowBuyNum=e,this.refreBuy())},t.prototype.onClickMax=function(){s.MusicHelper.play_click(),this.nowBuyNum=this.nummax,this.refreBuy()},t=o([g],t)}(a.default));i.GuildStoreRoomTip=h,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../../game/config/GuildConfig":"GuildConfig","../../config/WordConfig":"WordConfig","../../model/GuildModel":"GuildModel","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper"}],GuildStoreRoomView:[function(e,t,i){"use strict";cc._RF.push(t,"6f329YVoIVIyKO1d3eTuKcp","GuildStoreRoomView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("../../../engine/UIManager"),c=e("../../config/ViewConfig"),l=e("../../../engine/EventManager"),d=e("../../event/CommonEvent"),f=e("../../utils/UIHelper"),g=e("../../model/GuildModel"),h=e("../../model/RoleInfoModel"),u=e("../Roles/BagItem"),p=e("../../../engine/DateUtil"),m=e("../../../game/config/GuildConfig"),C=e("../../config/EquipConfig"),_=e("../../config/ITemsConfig"),v=e("../../config/WordConfig"),y=e("../../config/ColorConfig"),b=e("./GuildStoreRoomItem"),I=e("../../config/DefaultConfig"),M=e("../PublicTipView"),w=cc._decorator,k=w.ccclass,S=w.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t.guildstoreroomitem=null,t.recordmin=20,t.recordmax=100,t.lasttimestr=null,t.toggleStatus=0,t.ToggleTableContent=0,t.chatItemNodeList=[],t.itemPool=new cc.NodePool,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.init=function(){var e=this;this.recordmax=I.DefaultConfig.getConfigById(124).value;for(var t=this.findChild(this.node,"toggleContainer"),i=0;i<t.childrenCount;i++){t.children[i].on("toggle",this.onToggleTableContent.bind(this,i),this)}this.findChild(this.node,"btndetails").on(cc.Node.EventType.TOUCH_END,this.onBtnDetails,this),this.findChild(this.node,"btnstorage").on(cc.Node.EventType.TOUCH_END,this.onBtnStorage,this),this.findChild(this.node,"button_wenhao").on(cc.Node.EventType.TOUCH_END,this.onButtonWenhao,this),this.findChild(this.node,"btnclose").on(cc.Node.EventType.TOUCH_END,function(){s.MusicHelper.play_click(),e.node.active=!1}),this.bag=this.findChild(this.node,"bag"),this.bag.active=!1,this.findChild(this.bag,"darkLayer").on(cc.Node.EventType.TOUCH_END,function(){e.bag.active=!1}),this.bgscrollContent=this.findChild(this.node,"bag/panel/view/content");var n=this.getChild(this.node,"bag/table");for(i=0;i<n.childrenCount;i++){n.children[i].on("toggle",this.onBagToggleTable.bind(this,i),this)}this.msgNode=this.findChild(this.node,"msg"),this.treasurylog=this.findChild(this.node,"transaction"),this.treasurylogview=this.findChild(this.node,"transaction/panel"),this.treasurylogview.on("scroll-to-bottom",this.onUpLogView,this),this.treasurylogview.on("bounce-bottom",this.onUpLogView,this),this.treasurylogcontent=this.findChild(this.node,"transaction/panel/view/content"),this.timenode=this.findChild(this.node,"transaction/panel/view/timenode"),this.timenode.active=!1,this.findChild(this.treasurylog,"darkLayer").on(cc.Node.EventType.TOUCH_END,function(){e.treasurylog.active=!1}),this.medal=this.findChild(this.node,"labelnode/medal")},t.prototype.onEnable=function(){l.EventManager.instance.on(d.CommonEvent.Event_Guild_Treasury_Log,this.onChatMsg,this),l.EventManager.instance.on(d.CommonEvent.Event_UserInfoRefresh,this.refresh,this),g.GuildModel.s_guild_treasury_info(),g.GuildModel.s_guild_treasury_log()},t.prototype.onShow=function(){this.bag.active=!1,this.treasurylog.active=!1,l.EventManager.instance.on(d.CommonEvent.Event_Guild_Treasury_Info,this.onRefresh,this),l.EventManager.instance.on(d.CommonEvent.Event_UserInfoRefresh,this.onRefreshGX,this),this.onToggleTableContent(),this.onRefreshGX()},t.prototype.onRefreshGX=function(){this.medal.getComponent(cc.Label).string=f.UIHelper.tranNumber(h.default.instance.getGuildGExploits())},t.prototype.onChatMsg=function(){for(var e=0;e<this.msgNode.children.length;e++){var t=this.msgNode.children[e],i=g.GuildModel.instance.guildTreasuryLoglist[e];i?(t.getComponent(cc.RichText).string=this.getRichString(i),t.active=!0):t.active=!1}},t.prototype.onUpLogView=function(){var e=g.GuildModel.instance.guildTreasuryLoglist,t=this.treasurylogcontent.children.length,i=e.length,n=i-t>this.recordmin?t+this.recordmin:i,o=-this.treasurylogcontent.width/2+15,a=this.timenode.width;if(i>t)for(var s=t;s<n;s++){var r=g.GuildModel.instance.guildTreasuryLoglist[s];this.CheckAddTimeNode(r);var c=cc.instantiate(this.item);c.x=o,c.width=a,c.getComponent(cc.RichText).string=this.getRichString(r),this.treasurylogcontent.addChild(c)}},t.prototype.CheckAddTimeNode=function(e){var t=p.default.formateYearMonthDayStr2(1e3*e.time);if(t!=this.lasttimestr){this.lasttimestr=t;var i=cc.instantiate(this.timenode);i.active=!0,i.getChildByName("time").getComponent(cc.Label).string=t,this.treasurylogcontent.addChild(i)}},t.prototype.getRichString=function(e){var t=_.ITemsConfig.getITemsConfigById(e.item_id);return t||(t=C.EquipConfig.getEquipConfigById(e.item_id)),p.default.formatHourMinStr(1e3*e.time)+" <color=#ffd87d>"+e.name+"</c>"+cc.js.formatStr(v.WordConfig.getWord(1==e.type?61532:2==e.type?61533:61534),"<color="+y.ColorConfig.getQualityHexColor(e.quality)+">"+t.name+"X"+e.item_num+"</c>")},t.prototype.onButtonWenhao=function(){r.default.instance.createView(c.default.gameView.PublicTipView,null,M.RuleType.TYPE_GuildStoreRoom)},t.prototype.onRefresh=function(){var e=this,t=this.findChild(this.node,"shopScrollView/view/content");t.removeAllChildren(),g.GuildModel.instance.guildTreasurylist.forEach(function(i){if(1==e.ToggleTableContent)2==m.GuildConfig.GuildDepotConfigMap.get(i.item_type).type&&((n=cc.instantiate(e.guildstoreroomitem)).getComponent(b.GuildStoreRoomItem).init(i),t.addChild(n));else if(2==e.ToggleTableContent){if(1==m.GuildConfig.GuildDepotConfigMap.get(i.item_type).type)(n=cc.instantiate(e.guildstoreroomitem)).getComponent(b.GuildStoreRoomItem).init(i),t.addChild(n)}else{var n;(n=cc.instantiate(e.guildstoreroomitem)).getComponent(b.GuildStoreRoomItem).init(i),t.addChild(n)}})},t.prototype.onToggleTableContent=function(e){void 0===e&&(e=this.ToggleTableContent),this.ToggleTableContent=e,this.onRefresh()},t.prototype.onBtnDetails=function(){this.treasurylogcontent.removeAllChildren(),this.treasurylogview.getComponent(cc.ScrollView).scrollToTop(),this.treasurylog.active=!0,this.lasttimestr=null,this.onUpLogView()},t.prototype.onBtnStorage=function(){this.bag.active=!0,this.createScrollContent(),this.refresh()},t.prototype.onBtnStorage2=function(e){var t,i,n=m.GuildConfig.GuildDepotConfigMap.get(e.itemType);1==n.type?(t=n.get[0],i=(i=n.num_max-this.getItemMax(e.itemType))<e.itemCnt?i:e.itemCnt-e.itemCnt%n.unit):(t=n.get[e.quality],i=1),i<1?e.itemCnt>=n.unit?v.WordConfig.showWord(61514):v.WordConfig.showWord(60110):r.default.instance.createView(c.default.gameView.GuildstoreroomTip,null,e,!0,t,i/n.unit)},t.prototype.getItemMax=function(e){var t=0;return g.GuildModel.instance.guildTreasurylist.forEach(function(i){i.item_type==e&&(t=i.stock*i.item_num)}),t},t.prototype.onBagToggleTable=function(e){void 0===e&&(e=this.toggleStatus),s.MusicHelper.play_click(),this.refresh(e)},t.prototype.createScrollContent=function(e){void 0===e&&(e=h.default.instance.bagAMount),this.bgscrollContent.removeAllChildren();for(var t=0;t<e;t++){var i=cc.instantiate(u.default.prefab);i.name="bagitem"+t,i.active=!1,this.bgscrollContent.addChild(i),i.getComponent(u.default).setShowArticle(!1)}},t.prototype.refresh=function(e){void 0===e&&(e=this.toggleStatus),this.bgscrollContent.children.length<h.default.instance.bagAMount&&this.createScrollContent(h.default.instance.bagAMount-this.bgscrollContent.children.length);for(var t=[],i=function(i){var n=h.default.instance.bagModelList[i];if(n){var o=m.GuildConfig.GuildDepotConfigMap.get(n.itemType);if(o)switch(e){case 0:1!=n.itemKind?o.color.forEach(function(e){e==n.quality&&t.push(n)}):t.push(n.clone());break;case 1:1!=n.itemKind&&o.color.forEach(function(e){e==n.quality&&t.push(n.clone())});break;case 2:1==n.itemKind&&t.push(n.clone())}}},n=0;n<h.default.instance.bagModelList.length;n++)i(n);this.initScrollContent(t,e),this.toggleStatus=e},t.prototype.initScrollContent=function(e,t){for(var i=0;i<h.default.instance.bagAMount;i++){var n=this.bgscrollContent.children[i];switch(t){case 0:case 1:case 2:!e[i]||i>=e.length?n.active=!1:(n.active=!0,n.getComponent(u.default).setShowArticle(!0),n.getComponent(u.default).init(e[i],i,this.onBtnStorage2.bind(this)))}}},o([S({type:cc.Prefab})],t.prototype,"item",void 0),o([S({type:cc.Prefab})],t.prototype,"guildstoreroomitem",void 0),t=o([k],t)}(a.default);i.GuildStoreRoomView=P,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../../game/config/GuildConfig":"GuildConfig","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/EquipConfig":"EquipConfig","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/RoleInfoModel":"RoleInfoModel","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView","../Roles/BagItem":"BagItem","./GuildStoreRoomItem":"GuildStoreRoomItem"}],GuildTask:[function(e,t,i){"use strict";cc._RF.push(t,"8e1c6RsM5pId4pFQH459QlO","GuildTask");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/GuildModel"),r=e("../../model/ChatRoomModel"),c=e("../../../game/config/GuildConfig"),l=e("../../../game/config/DefaultConfig"),d=e("../../config/WordConfig"),f=e("../../../engine/SpriteFrameComponent"),g=e("../../model/ServerTime"),h=e("../../../engine/EventManager"),u=e("../../event/CommonEvent"),p=e("../../../engine/UIManager"),m=e("../../config/ViewConfig"),C=e("../../config/ColorConfig"),_=e("../../utils/MusicHelper"),v=cc._decorator,y=v.ccclass,b=(v.property,function(){return function(){}}()),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.freenum=0,t.yuanbmax=0,t.jptimelist=null,t.xiezhumax=0,t.tasknum=0,t.tasknummax=0,t.updatelist=[],t.uptime=0,t.qiuzhuinterval=0,t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onShow=function(){h.EventManager.instance.on(u.CommonEvent.Event_Guild_Task_Info,this.onRefresh,this);var e=this.findChild(this.node,"panel/view/content/guildtaskitem");e.active=!1,this.tasknummax=c.GuildConfig.GuildInfoConfigMap.get(s.GuildModel.instance.guildinfo.level).num,this.xiezhumax=l.DefaultConfig.getConfigById(134).value,this.qiuzhuinterval=l.DefaultConfig.getConfigById(147).value,this.freenum=0,this.yuanbmax=0;var t=l.DefaultConfig.getConfigById(133).value;for(var i in t){var n=t[i];0==n?++this.freenum:n>this.yuanbmax&&(this.yuanbmax=n)}this.node.getChildByName("shuaxin1").on(cc.Node.EventType.TOUCH_END,this.onShuaXin.bind(this,1)),this.node.getChildByName("jipinshuaxin").on(cc.Node.EventType.TOUCH_END,this.onShuaXin.bind(this,2)),this.initItemBtn(e,0),s.GuildModel.instance.guildtasklist&&this.onRefresh(),s.GuildModel.s_guild_task_list()},t.prototype.onRefresh=function(){var e=this;this.tasknum=0;var t=s.GuildModel.instance.guildtasklist,i=this.findChild(this.node,"panel/view/content"),n=this.findChild(this.node,"panel/view/content/guildtaskitem"),o=s.GuildModel.instance.guildtasklist.task_list,a=this.node.getChildByName("shuaxin1"),r=a.getChildByName("freenum"),c=a.getChildByName("yuanbaosp"),g=a.getChildByName("hongdian"),h=t.normal_cnt,u=l.DefaultConfig.getConfigById(133).value[h+1];0===u?(r.x=0,r.getComponent(cc.RichText).string=cc.js.formatStr(d.WordConfig.getWord(61655),"("+(this.freenum-h)+"/"+this.freenum+")"),a.getComponent(cc.Sprite).spriteFrame=a.getComponent(f.SpriteFrameComponent).spriteFrameList[0],g.active=!0,c.active=!1):(r.x=20,r.getComponent(cc.RichText).string=(u||this.yuanbmax).toString(),a.getComponent(cc.Sprite).spriteFrame=a.getComponent(f.SpriteFrameComponent).spriteFrameList[1],g.active=!1,c.active=!0);var p=s.GuildModel.getJpRefresh(),m=this.node.getChildByName("jipinshuaxin");m.getComponent(cc.Sprite).spriteFrame=m.getComponent(f.SpriteFrameComponent).spriteFrameList[p?0:1];var C=this.node.getChildByName("jipinlabel");C.getComponent(cc.Label).string=p?d.WordConfig.getWord(61654):d.WordConfig.getWord(61681)+"  "+s.GuildModel.getJpTime(!0),C.color=p?cc.Color.GREEN:cc.Color.RED,m.getChildByName("hongdian").active=p,o.forEach(function(t){1!=t.status&&2!=t.status||++e.tasknum}),this.node.getChildByName("tasknum").getComponent(cc.Label).string=this.tasknum+"/"+this.tasknummax,this.node.getChildByName("label2").active=0==o.length;for(var _=0;_<4;_++){var v=i.children[_];v||((v=cc.instantiate(n)).parent=n.parent,this.initItemBtn(v,_)),this.initTankItem(v,_)}},t.prototype.initItemBtn=function(e,t){this.findChild(e,"pickupNode/pickupbtn").on(cc.Node.EventType.TOUCH_END,this.onPickupBtn.bind(this,t)),this.findChild(e,"taskingNode/ljbtn").on(cc.Node.EventType.TOUCH_END,this.onLJBtn.bind(this,t)),this.findChild(e,"taskingNode/qzbtn").on(cc.Node.EventType.TOUCH_END,this.onQZBtn.bind(this,t)),this.findChild(e,"taskingNode/fqbtn").on(cc.Node.EventType.TOUCH_END,this.onFQBtn.bind(this,t))},t.prototype.onShuaXin=function(e){_.MusicHelper.play_click(),4==this.tasknum?d.WordConfig.showWord(61686):2==e?s.GuildModel.getJpRefresh()?p.default.instance.createView(m.default.gameView.DialogCheck,null,d.WordConfig.getWord(61683),function(t){t&&s.GuildModel.s_guild_task_refresh(e)}):d.WordConfig.showWord(61680):s.GuildModel.s_guild_task_refresh(e)},t.prototype.onPickupBtn=function(e){_.MusicHelper.play_click(),s.GuildModel.s_guild_task_operation(s.GuildModel.instance.guildtasklist.task_list[e].id,1)},t.prototype.onLJBtn=function(e){_.MusicHelper.play_click(),s.GuildModel.s_guild_task_operation(s.GuildModel.instance.guildtasklist.task_list[e].id,2)},t.prototype.onQZBtn=function(e,t){if(_.MusicHelper.play_click(),this.updatelist[e].helpnum!=this.xiezhumax){var n=g.ServerTime.getServerTime();if(!i.qiuzhutime[e]||n>i.qiuzhutime[e]){var o=s.GuildModel.instance.guildtasklist.task_list[e],a={type:"guildtask",data:{startTime:o.start_time,endTime:o.end_time,id:o.id}};r.ChatRoomModel.proto2_s_send_world(2,"guildtask",JSON.stringify(a)),i.qiuzhutime[e]=n+1e3*this.qiuzhuinterval,t.target.color=cc.Color.GRAY}else d.WordConfig.showWord(61685)}},t.prototype.onFQBtn=function(e){_.MusicHelper.play_click(),p.default.instance.createView(m.default.gameView.DialogCheck,null,d.WordConfig.getWord(61682),function(t){t&&s.GuildModel.s_guild_task_operation(s.GuildModel.instance.guildtasklist.task_list[e].id,3)})},t.prototype.initTankItem=function(e,t){var n=g.ServerTime.getServerTime(),o=s.GuildModel.instance.guildtasklist.task_list[t];if(o){var a=c.GuildConfig.GuildTaskConfigMap.get(o.id);if(a){3==o.status&&(s.GuildModel.instance.guildtasklist.task_list[t].status=0,e.scale=.01,e.stopAllActions(),e.runAction(cc.scaleTo(.25,1))),e.active=!0;var r=a.ress[10];e.getChildByName("gxsp").active=r>0,e.getChildByName("gxlabel").active=r>0,e.getChildByName("gxlabel").getComponent(cc.Label).string="x"+r;var l=0;if(a.award_item)for(var h in a.award_item)++l;e.getChildByName("jlsp").active=l>0,e.getChildByName("jllabel").active=l>0,e.getChildByName("jllabel").getComponent(cc.Label).string="x"+l;for(var u=e.getChildByName("starcontent").children,p=a.type,m=p>6?p-4:Math.ceil(p/2)-1,_=u.length>p?u.length:p,v=0;v<_;v++){var y=u[v];y?y.getComponent(cc.Sprite).spriteFrame=y.getComponent(f.SpriteFrameComponent).spriteFrameList[m]:(y=cc.instantiate(u[0])).parent=u[0].parent,y.active=v<p}var I=e.getChildByName("bg");I.getComponent(cc.Sprite).spriteFrame=I.getComponent(f.SpriteFrameComponent).spriteFrameList[m],e.getChildByName("titile1").getComponent(cc.Label).string=a.name,e.getChildByName("titile1").color=C.ColorConfig.hexToColor(s.GuildModel.instance.GuildTaskColor[m]),e.getChildByName("titile2").getComponent(cc.Label).string=a.text;var M=o.status,w=e.getChildByName("pickupNode");if(w.active=0==M,w.active){var k=this.tasknum<this.tasknummax;if(w.getChildByName("time").getComponent(cc.Label).string=this.getTaskTime(a.condition),w.getChildByName("max").active=!k,!k){var S=this.getlevelConfi();w.getChildByName("max").getComponent(cc.Label).string=cc.js.formatStr(d.WordConfig.getWord(61668),S.level,S.num)}w.getChildByName("hongdian").active=k,w.getChildByName("pickupbtn").active=k}var P=e.getChildByName("taskingNode"),E=1e3*o.start_time,L=1e3*o.end_time;if(P.active=1==M||2==M,P.active){var T=2==M;P.getChildByName("endsp").active=T,P.getChildByName("ljbtn").active=T,P.getChildByName("qzbtn").active=!T,P.getChildByName("fqbtn").active=!T,P.getChildByName("ingsp").active=!T;var R=P.getChildByName("titile");R.getComponent(cc.Label).string=T?a.doc:a.desc,R.color=T?cc.Color.GREEN:cc.Color.WHITE;var N=cc.js.formatStr(d.WordConfig.getWord(61656),o.help+"/"+this.xiezhumax);P.getChildByName("qzlabel").getComponent(cc.Label).string=N,this.setupteTaskTime(e,E,L),this.findChild(e,"taskingNode/qzbtn").color=i.qiuzhutime[t]>=n||o.help==this.xiezhumax?cc.Color.GRAY:cc.Color.WHITE}if(this.updatelist[t])this.updatelist[t].node=e,this.updatelist[t].index=t,this.updatelist[t].status=o.status,this.updatelist[t].statime=E,this.updatelist[t].endtime=L,this.updatelist[t].helpnum=o.help;else(S=new b).node=e,S.index=t,S.status=o.status,S.statime=E,S.endtime=L,S.helpnum=o.help,this.updatelist[t]=S}else e.active=!1}else e.active=!1},t.prototype.getlevelConfi=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var i={level:0,num:0},n=e||s.GuildModel.instance.guildinfo.level,o=n+1,a=t||c.GuildConfig.getGuildInfoConfigMapNum(n),r=c.GuildConfig.getGuildInfoConfigMapNum(o);return r?r>a?(i.level=o,i.num=r,i):this.getlevelConfi(o,r):(i.level=n,i.num=a,i)},t.prototype.update=function(e){var t=this;if(this.uptime+=e,this.uptime>=1){var n=g.ServerTime.getServerTime();this.updatelist.forEach(function(e){e.node&&(e.endtime>=n?(t.setupteTaskTime(e.node,e.statime,e.endtime),t.findChild(e.node,"taskingNode/qzbtn").color=i.qiuzhutime[e.index]>=n||e.helpnum==t.xiezhumax?cc.Color.GRAY:cc.Color.WHITE):0!=e.statime&&0!=e.endtime&&1==e.status&&s.GuildModel.s_guild_task_list())}),this.uptime=0}},t.prototype.setupteTaskTime=function(e,t,i){var n=e.getChildByName("taskingNode"),o=g.ServerTime.getServerTime(),a=i-o;a<0&&(a=0);var s=(o-t)/(i-t);n.getChildByName("progressBar").getComponent(cc.ProgressBar).progress=s>1?1:s<.01?.01:s,n.getChildByName("time").getComponent(cc.Label).string=this.getTimeStr(a)},t.prototype.getTaskTime=function(e){var t=Math.floor(e/60),i=e%60;return this.formatNumStr(t)+":"+this.formatNumStr(i)+":00"},t.prototype.formatNumStr=function(e){var t=""+e;return e<10&&(t="0"+e),t},t.prototype.getTimeStr=function(e){var t=Math.floor(e/36e5),i=Math.floor(e/6e4)%60,n=Math.floor(e/1e3)%60;return this.formatNumStr(t)+":"+this.formatNumStr(i)+":"+this.formatNumStr(n)},t.qiuzhutime=[],t=i=o([y],t)}(a.default);i.GuildTask=I,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../../game/config/DefaultConfig":"DefaultConfig","../../../game/config/GuildConfig":"GuildConfig","../../config/ColorConfig":"ColorConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ChatRoomModel":"ChatRoomModel","../../model/GuildModel":"GuildModel","../../model/ServerTime":"ServerTime","../../utils/MusicHelper":"MusicHelper"}],GuildView:[function(e,t,i){"use strict";cc._RF.push(t,"2d9f7iQ06dF/LuIQp0J+glY","GuildView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../utils/MusicHelper"),r=e("./GuildFunctionView"),c=e("./GuildInfomationView"),l=e("./GuildListView"),d=e("../../model/GuildModel"),f=e("../../../engine/EventManager"),g=e("../../event/CommonEvent"),h=e("../../config/WordConfig"),u=e("./GuildPvPMainView"),p=e("../../model/NewFeaturesModel"),m=e("../../utils/JumpActionUtils"),C=e("../../model/GuildPvPModel"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guildfunctionpf=null,t.guildlistpf=null,t.guildinfomationpf=null,t.guildPvPMainView=null,t.toggleStatus=1,t.guildfunction=null,t.guildlist=null,t.guildinfomation=null,t.guildPvPMainPanel=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onEnable=function(){C.GuildPvPModel.getInstance().s_guild_fight_open()},t.prototype.onShow=function(){for(var e=this.getChild(this.node,"toggle"),t=0;t<e.childrenCount;t++){var i=e.children[t];3==t?this.onAddEvent(i,p.NewFeaturesModel.instance.pushFeaturesNode(m.FunctionIdList.SC,i,this.onToggleTable.bind(this,t))):i.on("toggle",this.onToggleTable.bind(this,t),this)}this.guildContainer=this.findChild(this.node,"guildContainer"),this.guildfunction=cc.instantiate(this.guildfunctionpf).getComponent(r.GuildFunctionView),this.guildfunction.init(),this.guildfunction.node.active=!1,this.guildContainer.addChild(this.guildfunction.node),this.guildlist=cc.instantiate(this.guildlistpf).getComponent(l.GuildListView),this.guildlist.init(),this.guildlist.node.active=!0,this.guildContainer.addChild(this.guildlist.node),this.guildinfomation=cc.instantiate(this.guildinfomationpf).getComponent(c.GuildInfomationView),this.guildinfomation.init(),this.guildinfomation.node.active=!1,this.guildContainer.addChild(this.guildinfomation.node),this.guildPvPMainPanel=cc.instantiate(this.guildPvPMainView).getComponent(u.default),this.guildPvPMainPanel.node.active=!1,this.guildContainer.addChild(this.guildPvPMainPanel.node)},t.prototype.onToggleTable=function(e){void 0===e&&(e=-1),s.MusicHelper.play_click(),d.GuildModel.instance.guildinfo&&0!=d.GuildModel.instance.guildinfo.gid||1!=e&&(d.GuildModel.s_guild_info(),e>=0&&h.WordConfig.showWord(61388)),e<0&&(e=0,f.EventManager.instance.on(g.CommonEvent.Event_Guild_Information,this.refresh,this)),this.refresh(e)},t.prototype.refresh=function(e){switch(void 0===e&&(e=this.toggleStatus),d.GuildModel.instance.guildinfo&&0!=d.GuildModel.instance.guildinfo.gid||1!=e&&(e=1),this.guildinfomation.node.active=2==e,this.guildfunction.node.active=0==e,this.guildlist.node.active=1==e,this.guildPvPMainPanel.node.active=3==e,e){case 0:this.guildfunction.onShow();break;case 1:this.guildlist.onShow();break;case 2:this.guildinfomation.onShow()}this.getChild(this.node,"toggle").children[e].getComponent(cc.Toggle).isChecked=!0,this.toggleStatus=e},o([y(cc.Prefab)],t.prototype,"guildfunctionpf",void 0),o([y(cc.Prefab)],t.prototype,"guildlistpf",void 0),o([y(cc.Prefab)],t.prototype,"guildinfomationpf",void 0),o([y(cc.Prefab)],t.prototype,"guildPvPMainView",void 0),t=o([v],t)}(a.default);i.GuildView=b,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/GuildModel":"GuildModel","../../model/GuildPvPModel":"GuildPvPModel","../../model/NewFeaturesModel":"NewFeaturesModel","../../utils/JumpActionUtils":"JumpActionUtils","../../utils/MusicHelper":"MusicHelper","./GuildFunctionView":"GuildFunctionView","./GuildInfomationView":"GuildInfomationView","./GuildListView":"GuildListView","./GuildPvPMainView":"GuildPvPMainView"}],GuildfightCityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7980fKh6gNMnpljlSJweIdX","GuildfightCityConfig"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.Resurgence=1]="Resurgence",e[e.Own=2]="Own",e[e.Enemy=3]="Enemy",e[e.Destination=4]="Destination"}(i.MapNodeType||(i.MapNodeType={}));var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configMap=new Map,this.configMapList=new Map,Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n);var o=t.configMapList.get(n.type);o||(o=new Array),o.push(n),o.sort(function(e,t){return e.id-t.id}),t.configMapList.set(n.type,o)})},e.getConfigById=function(e){return this.configMap.get(e)},e.getConfigList=function(e){return this.configMapList.get(e)},e.Config_Name="GuildfightCityConfig",e}();i.GuildfightCityConfig=n,cc._RF.pop()},{}],GuildfightLvlConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e3238N6MsBH0LtbnYBGGlHu","GuildfightLvlConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configMap=new Map,Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.lvl,n)}),this.roudArrMap=new Map;for(var i=1;i<4;i++){var n=new Array;1==i?n.push(1):2==i?(n.push(2),n.push(3)):3==i&&(n.push(4),n.push(5),n.push(6),n.push(7)),this.roudArrMap.set(i,n)}},e.getConfigByLev=function(e){return this.configMap.get(e)},e.Config_Name="GuildfightLvlConfig",e}();i.GuildfightLvlConfig=n,cc._RF.pop()},{}],GuildfightRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"03c8eXch35DH5K9jvyokzXV","GuildfightRewardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configMap=new Map,this.dayList=new Array,Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i);var o=t.configMap.get(n.type);o||(o=new Map);var a=o.get(n.day_min);a||(a=new Array),a.sort(function(e,t){return e.id-t.id}),a.push(n),o.set(n.day_min,a),t.configMap.set(n.type,o),t.dayList.includes(n.day_min)||t.dayList.push(n.day_min)}),this.dayList.sort(function(e,t){return t-e})},e.getConfigList=function(e,t){var i=this.configMap.get(e),n=new Array,o=this.getDay(t);return i&&(n=i.get(o)),n},e.getDay=function(e){var t=1;return this.dayList.every(function(i){return!(e>=i)||(t=i,!1)}),t},e.Config_Name="GuildfightRewardConfig",e}();i.GuildfightRewardConfig=n,cc._RF.pop()},{}],GuildfightTimeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"39383ep+zJHfYO7Zd1C9d46","GuildfightTimeConfig"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.GuildApply=1]="GuildApply",e[e.GuildMemberApply=2]="GuildMemberApply",e[e.PrepareForWar=3]="PrepareForWar",e[e.MakeWar=4]="MakeWar",e[e.Truce=5]="Truce",e[e.Show=6]="Show"}(i.GuildPvPTimeType||(i.GuildPvPTimeType={}));var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configMap=new Map,Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i);var o=t.configMap.get(n.week);o||(o=new Map),o.set(n.type,n),t.configMap.set(n.week,o)})},e.getConfig=function(e,t){var i=this.configMap.get(e);if(i)return i.get(t)},e.Config_Name="GuildfightTimeConfig",e}();i.GuildfightTimeConfig=n,cc._RF.pop()},{}],GuildinfoitemPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"db4b6g3O4BCU54qCUPrhaMl","GuildinfoitemPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../config/WordConfig"),l=e("../model/ServerTime"),d=cc._decorator,f=d.ccclass,g=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zhiyesf=[],t}return n(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onShowInfo,this)},t.prototype.start=function(){},t.prototype.init=function(e){this.modle=e,this.getChild(this.node,"name",cc.Label).string=e.name,this.getChild(this.node,"contribution",cc.Label).string=e.donate,this.getChild(this.node,"icon_zhiye",cc.Sprite).spriteFrame=this.zhiyesf[e.prof-1];var t=c.WordConfig.getWord(61356);switch(e.position){case 1:t=c.WordConfig.getWord(61353);break;case 2:t=c.WordConfig.getWord(61354);break;case 3:t=c.WordConfig.getWord(61355);break;default:t=c.WordConfig.getWord(61356)}this.getChild(this.node,"power",cc.Label).string=t;var i=this.getChild(this.node,"type"),n=c.WordConfig.getWord(61357);e.lastOnline>0&&(i.color=cc.Color.RED,n=this.fomatTimeBySecond(l.ServerTime.getServerTime()-1e3*e.lastOnline)),i.getComponent(cc.Label).string=n},t.prototype.onShowInfo=function(e){s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Member_Management,{event:e,data:this.modle})},t.prototype.fomatTimeBySecond=function(e,t){void 0===t&&(t=!0);var i=Math.floor(e/1e3),n=Math.floor(i/86400),o=Math.floor(i%86400/3600),a=Math.floor(i%86400%3600/60),s=(Math.floor(i%86400%3600%60),"");return n>0?(s+=n>0?n+"\u5929":"",s+=o>0?o+"\u5c0f\u65f6":""):s=o>0?o>0?o+"\u5c0f\u65f6":"":a>0?a+"\u5206\u949f":"\u5c0f\u4e8e1\u5206\u949f",s},o([g({type:[cc.SpriteFrame]})],t.prototype,"zhiyesf",void 0),t=o([f],t)}(a.default);i.GuildInfoItemPrefab=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ServerTime":"ServerTime"}],GuilditemPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"b8449jv2WRPVItIplTHTYv9","GuilditemPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../model/FightModel"),l=e("../model/GuildModel"),d=e("../config/WordConfig"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.getChild(this.node,"btnapply").on(cc.Node.EventType.TOUCH_END,this.onBtnApply,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onBtnApply,this)},t.prototype.start=function(){},t.prototype.init=function(e){if(this.model=e,this.getChild(this.node,"order",cc.Label).string=e.idx+1,this.getChild(this.node,"name",cc.Label).string=e.name,this.getChild(this.node,"proportion",cc.Label).string=e.memberCount+"/"+e.maxMember,this.getChild(this.node,"zhanli",cc.Label).string=d.WordConfig.getWord(60463)+(0==e.needPower||-1==e.needPower?d.WordConfig.getWord(61373):e.needPower),(0==e.needPower||c.default.totalFight>e.needPower)&&(this.getChild(this.node,"zhanli").color=cc.Color.GREEN),l.GuildModel.instance.guildinfo&&l.GuildModel.instance.guildinfo.gid>0){var t=this.getChild(this.node,"btnapply");t.off(cc.Node.EventType.TOUCH_END,this.onBtnApply,this),t.color=cc.Color.GRAY}},t.prototype.onBtnApply=function(){s.EventManager.instance.dispatch(r.CommonEvent.Event_Guild_Apply,this.model)},t=o([g],t)}(a.default));i.GuildItem=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/FightModel":"FightModel","../model/GuildModel":"GuildModel"}],GuildshopitemPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"a3a25AkM6tNl709TcBWxawG","GuildshopitemPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/UIManager"),r=e("../model/RoleInfoModel"),c=e("../config/WordConfig"),l=e("../config/ITemsConfig"),d=e("../../game/config/GuildConfig"),f=e("../config/ViewConfig"),g=e("../utils/MusicHelper"),h=e("./ItemPrefab"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.getChild(this.node,"btnexchange").on(cc.Node.EventType.TOUCH_END,this.onBtnBuy,this)},t.prototype.start=function(){},t.prototype.init=function(e,t){this.model=e,this.type=t,this.getChild(this.node,"img_gx").active=1==t,this.getChild(this.node,"img_yb").active=2==t;var i=d.GuildConfig.GuildShopConfigMap.get(e.id);if(i){var n=l.ITemsConfig.getITemsConfigById(i.item);if(n){var o=this.getChild(this.node,"ItemPrefab");o.getComponent(h.default).init(n,!0),o.getComponent(h.default).setNumTxt(i.item_num),this.getChild(this.node,"contribution",cc.Label).string=e.price,this.getChild(this.node,"num",cc.Label).string=-1==e.stock?c.WordConfig.getWord(61373):e.stock}}},t.prototype.onBtnBuy=function(){g.MusicHelper.play_click();var e=1==this.type?r.default.instance.getGuildGX():r.default.instance.getGold(),t=e>this.model.price?Math.floor(e/this.model.price):0;if(-1!=this.model.stock&&(t=t>this.model.stock?this.model.stock:t),0==this.model.stock)c.WordConfig.showWord(61301);else if(0==t){var i=1==this.type?61416:60115;c.WordConfig.showWord(i)}else s.default.instance.createView(f.default.gameView.GuildShopTip,null,this.model.id,1,t,this.type,this.model.price)},t=o([p],t)}(a.default));i.GuildshopitemPrefab=m,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../../game/config/GuildConfig":"GuildConfig","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/RoleInfoModel":"RoleInfoModel","../utils/MusicHelper":"MusicHelper","./ItemPrefab":"ItemPrefab"}],Hacker:[function(e,t,i){"use strict";cc._RF.push(t,"f19c8cLqLZMcbGcwrmrXp59","Hacker"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../engine/Logger"),a=e("../engine/ResourcesManager"),s=e("../engine/UIManager");(function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=new Array(123),n=0;n<123;++n)i[n]=64;for(n=0;n<64;++n)i[t.charCodeAt(n)]=n;var o=i,a="0123456789abcdef".split(""),s=["","","",""],r=s.concat(s,"-",s,"-",s,"-",s,"-",s,s,s),c=r.map(function(e,t){return"-"===e?NaN:t}).filter(isFinite);e.decodeUuid=function(e){var t=e.split("@")[0];if(22!==t.length)return e;r[0]=e[0],r[1]=e[1];for(var i=2,n=2;i<22;i+=2){var s=o[e.charCodeAt(i)],l=o[e.charCodeAt(i+1)];r[c[n++]]=a[s>>2],r[c[n++]]=a[(3&s)<<2|l>>4],r[c[n++]]=a[15&l]}return e.replace(t,r.join(""))};var l={};for(n=0;n<a.length;n++){var d=a[n];l[d]=n}e.compressUuid=function(e){var i=e.split("@")[0];if(36!==i.length)return e;var n=[];n[0]=i[0],n[1]=i[1];for(var o=i.replace("-","").replace("-","").replace("-","").replace("-",""),a=2,s=2;a<32;a+=3){var r=l[String.fromCharCode(o.charCodeAt(a))],c=l[String.fromCharCode(o.charCodeAt(a+1))],d=l[String.fromCharCode(o.charCodeAt(a+2))];n[s++]=t[(r<<2)+(c>>2)],n[s++]=t[((3&c)<<4)+d]}return e.replace(i,n.join(""))}})(n||(n={})),function(e){function t(e,t){globalThis[e]||(globalThis[e]=t)}function i(e){var t=e.lastIndexOf("/");return-1!=t?e.slice(t+1):e}function r(t,n,o){var a=t[n];t[n]=function(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];e.Config[o]&&("string"==typeof s[0]&&e.WATCH[i(s[0])]&&(e.gotcha=s[0]),console.log(o,e.logCount[o]++,n,s[0])),a.call.apply(a,[t].concat(s))}}e.Config={LOAD_LOG:!1},e.logCount={},e.WATCH={"14b915009.ef239.png":1,"18b40a5e5.9a6ff.png":1,"1af7200bc.1cc79.png":1,"16c558960.a4015.png":1,"1b7aaf22b.1b16f.png":1},e.init=function(){for(var i in t("Hacker",e),t("ResourcesManager",a.default.instance),t("UIManager",s.default.instance),o.Logger.LEVEL=5,r(cc.loader,"load","LOAD_LOG"),r(cc.loader,"loadRes","LOAD_LOG"),r(cc.loader,"loadResArray","LOAD_LOG"),r(cc.loader,"loadResDir","LOAD_LOG"),cc._throw=function(e){throw e},e.Config)e.logCount[i]=0},e.regToGlobal=t,e.zipUuid=function(e){return n.compressUuid(e)},e.unzipUuid=function(e){return n.decodeUuid(e)}}(i.Hacker||(i.Hacker={})),cc._RF.pop()},{"../engine/Logger":"Logger","../engine/ResourcesManager":"ResourcesManager","../engine/UIManager":"UIManager"}],HandbookView:[function(e,t,i){"use strict";cc._RF.push(t,"b51f0bhSgJHHrfROTdFtxK5","HandbookView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../engine/EventManager"),r=e("../../engine/ResourcesManager"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../base/ListView"),f=e("../config/IllustratedBooksConfig"),g=e("../config/IllustratedBooksshowConfig"),h=e("../config/MagicNameConfig"),u=e("../config/MapConfig"),p=e("../config/ViewConfig"),m=e("../event/CommonEvent"),C=e("../manager/RedPointManager"),_=e("../model/MagicModel"),v=e("../model/RoleInfoModel"),y=e("../model/TuJianEquipModel"),b=e("../network/SocketClient"),I=e("../prefab/RedPointPrefab"),M=e("./PublicTipView"),w=e("./TuJianCell"),k=cc._decorator,S=k.ccclass,P=k.property;(function(e){e[e.ZhanShi=1]="ZhanShi",e[e.FaShi=2]="FaShi",e[e.DaoShi=3]="DaoShi",e[e.TeShu=99]="TeShu"})(a=i.TuJianJob||(i.TuJianJob={}));var E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.occupationSpiteList=[],t.occupationSpiteMarkList=[],t.topResourcePrefab=null,t.selectedTab=a.ZhanShi,t.selectedBtn=u.MapConfig.WORLD.FanRen,t}return n(t,e),t.prototype.onLoad=function(){this.initNode()},t.prototype.onEnable=function(){s.EventManager.instance.dispatch(m.CommonEvent.Event_TuJian_Active,!0),s.EventManager.instance.on(m.CommonEvent.Event_GetBookInfo_refresh,this.initView,this),s.EventManager.instance.on(m.CommonEvent.Event_GetBookCell_refresh,this.handlerTuJianCellRefresh,this),b.default.s_get_book_info(),this.initView()},t.prototype.onDisable=function(){s.EventManager.instance.dispatch(m.CommonEvent.Event_TuJian_Active,!1)},t.prototype.initNode=function(){this.btnRule=this.findChild(this.node,"frame/info/btnRule"),this.tabListNode=this.findChild(this.node,"frame/scrollViewTab/view/content"),this.tabNode=this.findChild(this.tabListNode,"tab"),this.jinjieListNode=this.findChild(this.node,"frame/info/jinjieList"),this.itemCellListNode=this.findChild(this.node,"frame/info/scrollView/view/content"),this.itemCellList=this.getChild(this.node,"frame/info/scrollView",d.default),this.propertyListNode=this.findChild(this.node,"frame/addition/view/content"),this.propertyNode=this.findChild(this.propertyListNode,"itemNode"),this.top=this.findChild(this.node,"frame/topResources"),this.onAddEvent(this.btnRule,this.onBtnRule.bind(this))},t.prototype.initView=function(){this.initOccupationTab(),this.initPropertyList(),this.initWordInfo(),this.initResource()},t.prototype.initResource=function(){this.top.childrenCount<=0&&(cc.instantiate(this.topResourcePrefab).parent=this.top)},t.prototype.initPropertyList=function(){for(var e=g.default.getCofnig().cid,t=this.propertyListNode.childrenCount>e.length?this.propertyListNode.childrenCount:e.length,i=0;i<t;i++){var n=void 0;if(i<this.propertyListNode.childrenCount?n=this.propertyListNode.children[i]:(n=cc.instantiate(this.propertyNode)).parent=this.propertyListNode,n.active=i<e.length,i<e.length){var o=y.default.getBooksPropertyById(e[i]);o&&this.initProperty(o.id,o.value,n)}}},t.prototype.initOccupationTab=function(){for(var e=f.IllustratedBooksConfig.getOccupationArr(),t=this.tabListNode.childrenCount>e.length?this.tabListNode:e.length,i=0;i<t;i++){var n=void 0;if(i<this.tabListNode.childrenCount?n=this.tabListNode.children[i]:(n=cc.instantiate(this.tabNode)).parent=this.tabListNode,i<e.length){n.active=!0;var o=this.findChild(n,"normal").getComponent(cc.Sprite),a=this.findChild(n,"selected").getComponent(cc.Sprite);o.spriteFrame=this.occupationSpiteList[i],a.spriteFrame=this.occupationSpiteMarkList[i],a.node.active=this.selectedTab==e[i],o.node.active=!a.node.active;var s=f.IllustratedBooksConfig.getMapByProId(e[i]);n.data={map:s,pro:e[i]};var r="tujian_occupation_"+e[i];n.getChildByName("RedPointPrefab").getComponent(I.default).setRedPointIdList([r]),this.onAddEvent(n,this.onBtnOccupationTab.bind(this,e[i]))}else n.active=!1,n.data=null}},t.prototype.initWordInfo=function(){var e=this;this.jinjieListNode.active=this.selectedTab!=a.TeShu,this.initTuJianList(),this.jinjieListNode.children.forEach(function(t,i){var n=e.findChild(t,"normal"),o=e.findChild(t,"selected");o.active=e.selectedBtn==i+1,n.active=!o.active,e.onAddEvent(t,e.onBtnJinJie.bind(e,i+1)),t.data=i+1;var a="tujian_Word_"+e.selectedTab+"_"+(i+1);t.getChildByName("RedPointPrefab").getComponent(I.default).setRedPointIdList([a])})},t.prototype.initTuJianList=function(){var e=this,t=f.IllustratedBooksConfig.getConfigs(this.selectedTab,this.selectedBtn),i=new Array;t.forEach(function(t){var n={config:t,selectedTab:e.selectedTab,selectedBtn:e.selectedBtn};i.push(n)});var n=new L;n.setDataSet(i),this.itemCellList.setAdapter(n)},t.prototype.initProperty=function(e,t,i,n){void 0===n&&(n=!1);var o="";n&&(o="layout/");var a=this.findChild(i,o+"additionNum").getComponent(cc.Label),s=this.findChild(i,o+"additionLabel").getComponent(cc.Label),c=this.findChild(i,o+"icon").getComponent(cc.Sprite),l=e,d=[0,h.MagicNameConfig.MagicId.atk,h.MagicNameConfig.MagicId.mag,h.MagicNameConfig.MagicId.spt];7!=e&&38!=e||(l=d[v.default.instance.occupation]);var f="texture/icon/img_icon_"+l;s.string=h.MagicNameConfig.getDesc(e),a.string=_.default.formatMagicValue(e,t),r.default.instance.loadSprite(c,f,!0)},t.prototype.onBtnRule=function(){c.default.instance.createView(p.default.gameView.PublicTipView,null,M.RuleType.TYPE_TUJIAN)},t.prototype.onBtnOccupationTab=function(e){var t=this;this.selectedTab=e,this.selectedBtn=u.MapConfig.WORLD.FanRen,this.tabListNode.children.forEach(function(e){var i=t.findChild(e,"normal"),n=t.findChild(e,"selected");n.active=t.selectedTab==e.data.pro,i.active=!n.active}),this.initWordInfo(),C.default.getInstance().checkRedPointById(C.RedPointId.Tujian)},t.prototype.onBtnJinJie=function(e){var t=this;this.selectedBtn=e,this.jinjieListNode.children.forEach(function(e){var i=t.findChild(e,"normal"),n=t.findChild(e,"selected");n.active=t.selectedBtn==e.data,i.active=!n.active}),this.initTuJianList()},t.prototype.handlerTuJianCellRefresh=function(e){var t=this;this.itemCellListNode.children.every(function(i){if(i.data.bookId==e){var n={config:i.data.config,selectedTab:t.selectedTab,selectedBtn:t.selectedBtn};return i.getComponent(w.default).init(n),!1}return!0})},o([P({type:[cc.SpriteFrame]})],t.prototype,"occupationSpiteList",void 0),o([P({type:[cc.SpriteFrame]})],t.prototype,"occupationSpiteMarkList",void 0),o([P(cc.Prefab)],t.prototype,"topResourcePrefab",void 0),t=o([S],t)}(l.default);i.default=E;var L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.updateView=function(e,t,i){e.getComponent(w.default).init(i)},t}(d.AbsAdapter);cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../base/ListView":"ListView","../config/IllustratedBooksConfig":"IllustratedBooksConfig","../config/IllustratedBooksshowConfig":"IllustratedBooksshowConfig","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../model/MagicModel":"MagicModel","../model/RoleInfoModel":"RoleInfoModel","../model/TuJianEquipModel":"TuJianEquipModel","../network/SocketClient":"SocketClient","../prefab/RedPointPrefab":"RedPointPrefab","./PublicTipView":"PublicTipView","./TuJianCell":"TuJianCell"}],HaoEncrypt:[function(e,t,i){"use strict";cc._RF.push(t,"54f3bDz/HFKIpG6zp9Ech5u","HaoEncrypt"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.encode=function(e){for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n+=i%2==0?3:1,t+=String.fromCharCode(n)}return t},e.decode=function(e){for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n-=i%2==0?3:1,t+=String.fromCharCode(n)}return t},e}();i.default=n,cc._RF.pop()},{}],HelloSlider:[function(e,t,i){"use strict";cc._RF.push(t,"e2ea1q4pHZMRoNcOOTPmSLT","HelloSlider");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./ViewBase"),s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragging=!1,t.touchHandle=!1,t.progress=0,t.progressBarMaxValue=177,t}return n(t,e),t.prototype.init=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=null),void 0===i&&(i=null),this.progress=e/.9,this.touchMoveCallBack=t,this.touchEndCallBack=i,this.refreshView(this.progress)},t.prototype.onEnable=function(){this.progressBar=this.findChild(this.node,"progressBar"),this.handle=this.findChild(this.node,"handle"),this.valueTxt=this.findChild(this.node,"valueTxt"),this.dragging=!1,this.touchHandle=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelled,this),this.handle.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.handle.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.handle.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.handle.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelled,this)},t.prototype.onHandleDragStart=function(e){this.dragging=!0,this.touchHandle=!0,e.stopPropagation()},t.prototype.onTouchBegin=function(e){this.dragging=!0,this.touchHandle||this.handleSliderLogic(e.touch),e.stopPropagation()},t.prototype.onTouchMove=function(e){this.handleSliderLogic(e.touch),e.stopPropagation(),this.touchMoveCallBack()},t.prototype.onTouchEnd=function(e){this.dragging=!1,this.touchHandle=!1,e.stopPropagation(),this.touchEndCallBack()},t.prototype.onTouchCancelled=function(e){this.onTouchEnd(e)},t.prototype.handleSliderLogic=function(e){this.updateProgress(e)},t.prototype.updateProgress=function(e){if(this.handle){var t=this.node,i=t.convertToNodeSpaceAR(e.getLocation()).x;cc.view.getVisibleSize().width,cc.view.getDesignResolutionSize().width;this.progress=Number(((i+t.anchorX*t.width)/t.width).toFixed(2)),this.progress<=0&&(this.progress=0),this.progress>=1&&(this.progress=1),this.refreshView(this.progress)}},t.prototype.refreshView=function(e){this.handle&&(this.progressBar.width=this.progressBarMaxValue*e,this.valueTxt.getComponent(cc.Label).string=Math.floor(90*e)+"%",this.handle.x=this.progress*this.node.width)},t.prototype.getProGress=function(){return Number(this.progress.toFixed(2))},t.prototype.setProgress=function(e){this.progress=Number(e.toFixed(2)),this.refreshView(this.progress)},t=o([r],t)}(a.default));i.default=c,cc._RF.pop()},{"./ViewBase":"ViewBase"}],HelpGiftModel:[function(e,t,i){"use strict";cc._RF.push(t,"2189cQQdrtIPIkRQDJYiMTS","HelpGiftModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeroConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b62cej4E01ABoYAERmUeQFu","HeroConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../model/RoleInfoModel"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.getMyMaxLevel=function(){var e=1;return this.configMap.forEach(function(t,i){a.default.instance.occupation==parseInt(t.roleType)&&t.level>e&&(e=t.level)}),e},t.getNextHeroConfig=function(){var e=this.getHeroConfig(a.default.instance.occupation,a.default.instance.level+1);return e||(e=this.getMyHeroConfig()),e},t.getMyHeroConfig=function(){return this.getHeroConfig(a.default.instance.occupation,a.default.instance.level)},t.getHeroConfig=function(e,t){var i;return this.configMap.forEach(function(n,o){e==parseInt(n.roleType)&&t==n.level&&(i=n)}),i},t.getMaxExp=function(e,t){return this.getHeroConfig(e,t).exp},t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.configMap=new Map,t}(o.JsonConfigBase);i.HeroConfig=s,cc._RF.pop()},{"../model/RoleInfoModel":"RoleInfoModel","./JsonConfigBase":"JsonConfigBase"}],HolidayConfig:[function(e,t,i){"use strict";cc._RF.push(t,"37f91o6SlJDR4sw90wwzQxT","HolidayConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ActivityNum=0,t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.date=e.date,i.resource=e.resource,i.item=e.item,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.json2Config2=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap2.set(n.id,n)})},t.getAllList=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e.sort(function(e,t){return e.id-t.id}),e},t.getAllList2=function(){var e=[];return this.configMap2.forEach(function(t,i){e.push(t)}),e.sort(function(e,t){return e.id-t.id}),e},t.Config_Name="fundConfig",t.Config_Name2="hefu_fundConfig",t.configMap=new Map,t.configMap2=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],HolidayModel:[function(e,t,i){"use strict";cc._RF.push(t,"776d4in81RDn6l1ddfKmoFY","HolidayModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/HolidayConfig"),c=e("../event/CommonEvent"),l=e("../manager/RedPointManager"),d=e("../model/RoleInfoModel"),f=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[l.RedPointId.Activity_Holiday],this.protos=[a.ProtoConfig.c_doubleegg_info],l.default.getInstance().addHandler(this)}return e.onReFreshContent=function(t){this.model=this.model?this.model:new e;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_doubleegg_info,t),r=i.getActivityId(),l=i.getDoubleeggAwardListList();if(1==r){e.modelList=[],d.default.instance.has_shuangdan=i.getIsBuy(),e.nowDay=i.getCurrDay();for(var f=0;f<l.length;f++){(g=new e).index=l[f].getIndex(),e.modelList.push(g)}o.Logger.log("c_doubleegg_info HolidayModel 1==",e.modelList)}else if(34==r){e.modelList2=[],d.default.instance.has_shuangdan2=i.getIsBuy(),e.nowDay2=i.getCurrDay();for(f=0;f<l.length;f++){var g;(g=new e).index=l[f].getIndex(),e.modelList2.push(g)}o.Logger.log("c_doubleegg_info HolidayModel 2==",d.default.instance.has_shuangdan2)}n.EventManager.instance.dispatch(c.CommonEvent.Event_show_fund)},e.hadGet=function(t){for(var i=0;i<this.modelList.length;i++)if(e.modelList[i].index==t)return!0},e.hadGet2=function(t){for(var i=0;i<this.modelList2.length;i++)if(e.modelList2[i].index==t)return!0},e.prototype.checkRedPoint=function(){for(var t=[],i=!1,n=r.default.getAllList(),o=0;o<n.length;o++){var a=n[o];a.date<=e.nowDay&&2==d.default.instance.has_shuangdan&&(e.hadGet(a.date)||(i=!0))}var s={id:l.RedPointId.Activity_Holiday,type:l.RedPointType.Default,show:i};return t.push(s),t},e.modelList=[],e.modelList2=[],e}();i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/HolidayConfig":"HolidayConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../model/RoleInfoModel":"RoleInfoModel"}],HolidayMonsterModel:[function(e,t,i){"use strict";cc._RF.push(t,"8e44cnwDwdGA4xoqf+z089B","HolidayMonsterModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/ProtoConfig"),a=e("../../engine/ProtoUtils"),s=e("../event/CommonEvent"),r=e("./BossModel"),c=e("./ServerTime"),l=function(){function e(){}return e.proto2ModelList=function(t){var i=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_get_holidayMonster_info,t);e.isActive=i.getIsactive(),e.closeTime=i.getClosetime();var l=i.getBossInfo(),f=new r.BossModel;f.mapId=l.getScene(),f.monsterId=parseInt(l.getType()),f.reviveTime=l.getTime(),f.hp=l.getHp(),c.ServerTime.getServerTime()>=1e3*f.reviveTime?f.canRevive=!0:f.canRevive=!1,e.bossModel=f,e.killTime=i.getKilltime();for(var g=i.getShowinfoList(),h=0;h<g.length;h++){var u=new d;u.startTime=g[h].getStarttime(),u.endTime=g[h].getEndtime(),e.showTimeinfoList[h]=u}var p=Math.floor(c.ServerTime.getServerTime()/1e3);e.isInActive=!1;for(h=0;h<e.showTimeinfoList.length;h++)if(p>=e.showTimeinfoList[h].startTime&&p<=e.showTimeinfoList[h].endTime){e.isInActive=!0;break}e.actStartTime=i.getActstarttime(),e.refreshTime=c.ServerTime.getServerTime()/1e3,n.EventManager.instance.dispatch(s.CommonEvent.Event_HolidayMonster)},e.getLeftTime=function(){var t=e.closeTime-c.ServerTime.getServerTime()/1e3;return(t=Math.floor(t))<=0&&(t=0),t=Math.ceil(t)},e.isActive=0,e.closeTime=0,e.actStartTime=0,e.bossModel=null,e.killTime=0,e.showTimeinfoList=[],e.isInActive=!1,e.getExp=0,e}();i.HolidayMonsterModel=l;var d=function(){return function(){}}();i.HolidayTimeModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent","./BossModel":"BossModel","./ServerTime":"ServerTime"}],HolidayMonsterPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"356e7j1cUdKtK8wMd4JCqpK","HolidayMonsterPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/ActivitytimeConfig"),f=e("../config/ChristmasterConfig"),g=e("../config/ColorConfig"),h=e("../config/EquipConfig"),u=e("../config/EquipGatherConfig"),p=e("../config/ITemsConfig"),m=e("../config/MapConfig"),C=e("../config/MonsterConfig"),_=e("../config/ViewConfig"),v=e("../config/WordConfig"),y=e("../event/CommonEvent"),b=e("../model/ActivityOpenModel"),I=e("../model/HolidayMonsterModel"),M=e("../network/SocketClient"),w=e("../view/PublicTipView"),k=e("./ItemPrefab"),S=cc._decorator,P=S.ccclass,E=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.christmasterConfig=f.ChristmasterConfig.getConfigById(1),t.activityTimeConfig=d.ActivitytimeConfig.getConfigById(2),t.dropitemList=[],t.dropEquipList=[],t.itemNodeList=[],t.isInit=!1,t}return n(t,e),t.prototype.onLoad=function(){if(e.prototype.onLoad.call(this),this.monsterconfig=C.MonsterConfig.getMonsterConfigById(this.christmasterConfig.boss),this.monsterconfig.item_prob>0){for(var t=u.EquipGatherConfig.getEquipGatherConfigById(this.monsterconfig.item),i=[],n=0;n<t.item_id.length;n++)i.push(t.item_id[n]);this.dropitemList=this.formatArr(i)}if(this.monsterconfig.equip_prob>0){t=u.EquipGatherConfig.getEquipGatherConfigById(this.monsterconfig.item);var o=[];for(n=0;n<t.item_id.length;n++)o.push(t.item_id[n]);this.dropEquipList=this.formatArr(o)}var a=this.findChild(this.node,"infoFrame/scrollView/view/content/ItemPrefab");for(n=0;n<this.dropitemList.length;n++){var s=p.ITemsConfig.getITemsConfigById(this.dropitemList[n]);(r=cc.instantiate(a)).active=!0,r.parent=a.parent,r.getComponent(k.default).init(s,!0)}for(n=0;n<this.dropEquipList.length;n++){var r;s=h.EquipConfig.getEquipConfigById(this.dropEquipList[n]);(r=cc.instantiate(a)).active=!0,r.parent=a.parent,r.getComponent(k.default).init(s,!0)}},t.prototype.formatArr=function(e){for(var t=[],i=0;i<e.length;i++)-1==t.indexOf(e[i])&&t.push(e[i]);return t},t.prototype.onEnable=function(){this.initFindNode(),this.onAddEvent(this.btnHelpNode,this.onclickHelp.bind(this)),s.EventManager.instance.on(y.CommonEvent.Event_HolidayMonster,this.refresh,this),M.default.s_get_holidayMonster_info(),this.refresh()},t.prototype.initFindNode=function(){this.leftTimeLabel=this.findChild(this.node,"topFrame/timeFrame/leftTime").getComponent(cc.Label),this.btnHelpNode=this.findChild(this.node,"topFrame/btn_help"),this.opentimeLabel=this.findChild(this.node,"infoFrame/time/opentime").getComponent(cc.Label),this.placeNameLabel=this.findChild(this.node,"infoFrame/location/placeName").getComponent(cc.Label),this.stateLabel=this.findChild(this.node,"infoFrame/state/state").getComponent(cc.Label),this.killTimeLabel=this.findChild(this.node,"infoFrame/killTimes/killTime").getComponent(cc.Label)},t.prototype.refresh=function(){if(1==I.HolidayMonsterModel.isActive){var e=b.default.getStarTimeByActivityId(2),t=b.default.getEndTimeByActivityId(2);this.leftTimeLabel.string=a.default.formatDateStr7(1e3*e)+"-"+a.default.formatDateStr7(1e3*t);var i=I.HolidayMonsterModel.bossModel;if(i){var n=m.MapConfig.getMapConfigByMapId(I.HolidayMonsterModel.bossModel.mapId);n&&I.HolidayMonsterModel.isInActive?this.placeNameLabel.string=n.name:this.placeNameLabel.string=v.WordConfig.getWord(60737);var o=i.getLeftTime();r.Logger.log("leftTime===",o),o<=0&&n&&I.HolidayMonsterModel.isInActive?(this.stateLabel.getComponent(cc.Label).string=v.WordConfig.getWord(60738),this.stateLabel.node.color=g.ColorConfig.GreenColor):(this.stateLabel.getComponent(cc.Label).string=v.WordConfig.getWord(60739),this.stateLabel.node.color=g.ColorConfig.RedColor)}}else this.leftTimeLabel.getComponent(cc.Label).string=v.WordConfig.getWord(60740),this.placeNameLabel.string=v.WordConfig.getWord(60741),this.stateLabel.getComponent(cc.Label).string=v.WordConfig.getWord(60739),this.stateLabel.node.color=g.ColorConfig.RedColor;var s="";if(I.HolidayMonsterModel.showTimeinfoList.length>0)for(var c=0;c<I.HolidayMonsterModel.showTimeinfoList.length;c++)s+=a.default.formatHourMinStr(1e3*I.HolidayMonsterModel.showTimeinfoList[c].startTime)+"-"+a.default.formatHourMinStr(1e3*I.HolidayMonsterModel.showTimeinfoList[c].endTime),c<I.HolidayMonsterModel.showTimeinfoList.length-1&&(s+=v.WordConfig.getWord(60742));else s=v.WordConfig.getWord(60743);this.opentimeLabel.string=s;var l=I.HolidayMonsterModel.killTime;l>=this.christmasterConfig.droptimes&&(l=this.christmasterConfig.droptimes),this.killTimeLabel.string=l+"/"+this.christmasterConfig.droptimes},t.prototype.onclickHelp=function(){c.default.instance.createView(_.default.gameView.PublicTipView,null,w.RuleType.TYPE_HOLIDAYMONSTER)},t=o([P],t)}(l.default));i.default=E,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ActivitytimeConfig":"ActivitytimeConfig","../config/ChristmasterConfig":"ChristmasterConfig","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/EquipGatherConfig":"EquipGatherConfig","../config/ITemsConfig":"ITemsConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/HolidayMonsterModel":"HolidayMonsterModel","../network/SocketClient":"SocketClient","../view/PublicTipView":"PublicTipView","./ItemPrefab":"ItemPrefab"}],HolidayRunGameModel:[function(e,t,i){"use strict";cc._RF.push(t,"db990Iy1oxN8rYQhyNho7+A","HolidayRunGameModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/UIManager"),c=e("../config/GameConst"),l=e("../config/ViewConfig"),d=e("../event/CommonEvent"),f=e("./RoleInfoModel"),g=function(){function e(e,t,i,n,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.trackId=e,this.rank=t,this.currdistance=i,this.ringNum=n,this.trapNum=o}return e.proto2Model=function(t){var i=new e;return i.trackId=t.getTrackid(),i.rank=t.getRank(),i.currdistance=t.getCurrdistance(),i.ringNum=t.getRingnum(),i.trapNum=t.getTrapnum(),i},e}();i.HolidayTrackResultModel=g;var h=function(){function e(){}return e.on_c_use_ringOrtrap=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_use_treeOrtrap,e).getReq();o.Logger.log("c_use_ringOrtrap==",t),1==t&&n.EventManager.instance.dispatch(d.CommonEvent.Event_Milu_Tool_Suc)},e.proto2Model=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_holidaytree_info,e);this.actStartTime=t.getActstarttime(),this.actEndTimes=t.getActendtimes(),this.signStartTime=t.getSignstarttime(),this.signEndTime=t.getSignendtime(),this.raceStartTime=t.getRacestarttime(),this.raceEndTime=t.getRaceendtime(),this.signState=t.getSignstate(),this.myTrackId=t.getTrackid(),this.score=t.getScore(),this.trackResultModelList=[];for(var i=t.getTrackinfoList(),r=0;r<i.length;r++)this.trackResultModelList[r]=g.proto2Model(i[r]);this.trackResultModelList.sort(function(e,t){return e.trackId-t.trackId}),o.Logger.log("HolidayRunGameModel===",t),n.EventManager.instance.dispatch(d.CommonEvent.Event_Milu)},e.on_c_track_sign=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_track_tree_sign,e);this.myTrackId=t.getMytrackid(),r.default.instance.createView(l.default.gameView.HolidaySelectPetView)},e.getMyLingDangNum=function(){for(var e=0,t=0;t<f.default.instance.itemInfoList.length;t++){var i=f.default.instance.itemInfoList[t];i.itemType==this.LingDang&&(e+=i.itemCnt)}return e},e.getMyXianJingNum=function(){for(var e=0,t=0;t<f.default.instance.itemInfoList.length;t++){var i=f.default.instance.itemInfoList[t];i.itemType==this.XianJing&&(e+=i.itemCnt)}return e},e.myTrackId=0,e.actStartTime=0,e.actEndTimes=0,e.signStartTime=0,e.signEndTime=0,e.raceStartTime=0,e.raceEndTime=0,e.signState=2,e.score=0,e.LingDang=c.ItemId.JiFengFu,e.XianJing=c.ItemId.XianDiFu,e.trackResultModelList=[new g(1,2,5e3,0,0),new g(2,3,200,0,0),new g(3,1,10001,0,0)],e}();i.HolidayRunGameModel=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","./RoleInfoModel":"RoleInfoModel"}],HolidayRunGame:[function(e,t,i){"use strict";cc._RF.push(t,"7a550clkFNDv6OVCYg+qrg+","HolidayRunGame");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/SpriteFrameComponent"),l=e("../../engine/UIManager"),d=e("../../engine/ViewBase"),f=e("../config/ActivityRankConfig"),g=e("../config/ColorConfig"),h=e("../config/ElkRunConfig"),u=e("../config/ITemsConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../event/CommonEvent"),_=e("../model/HolidayRunGameModel"),v=e("../model/ServerTime"),y=e("../network/SocketClient"),b=e("../utils/UIHelper"),I=e("../view/PublicTipView"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activityId=4,t.totalTrackNum=3,t.rankNameConfig=[m.WordConfig.getWord(60744),m.WordConfig.getWord(60745),m.WordConfig.getWord(60746)],t.jiaozhuNameConfig=[m.WordConfig.getWord(60747),m.WordConfig.getWord(60748),m.WordConfig.getWord(60749)],t.throwDefaultP=[cc.v2(-176,-264),cc.v2(-14,-264),cc.v2(146,-264)],t.txtEffectYList=[-119,33,185],t.throwToY=-174,t.miLuRightX=116,t.miLuLeftX=-264,t.miLuCenterX=0,t.miLuLength=0,t.miluSelectViewIndex=0,t.selectMvX=0,t.isFirstOpen=!0,t.isPlayingMv=!1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.elkConfig=h.ElkRunConfig.getConfigById(1),this.miLuLength=this.miLuRightX-this.miLuLeftX,this.miLuCenterX=(this.miLuLeftX+this.miLuRightX)/2,this.btn_login=this.getChild(this.node,"loginPanel/btn_login"),this.btn_login.active=!1,this.txtBaoMingTime=this.getChild(this.node,"loginPanel/txtBaoMingTime",cc.Label),this.txtSelectMilu=this.getChild(this.node,"loginPanel/txtSelectMilu",cc.RichText),this.huodongjieshu=this.getChild(this.node,"loginPanel/huodongjieshu"),this.yibaoming=this.getChild(this.node,"loginPanel/yibaoming"),this.weibaoming=this.getChild(this.node,"loginPanel/weibaoming"),this.ringNum=this.getChild(this.node,"ringNum",cc.Label),this.trapNum=this.getChild(this.node,"trapNum",cc.Label),this.txtScore=this.getChild(this.node,"txtScore",cc.Label),this.btn_shop=this.getChild(this.node,"btn_shop"),this.leftTime=this.getChild(this.node,"leftTime",cc.Label),this.runtime=this.getChild(this.node,"runtime",cc.Label),this.nonePanel=this.getChild(this.node,"nonePanel"),this.startPanel=this.getChild(this.node,"startPanel"),this.endingPanel=this.getChild(this.node,"endingPanel"),this.runningPanel=this.getChild(this.node,"runningPanel"),this.lingdangMvNode=this.getChild(this.node,"lingdangMvNode"),this.lingdangMvNode.active=!1,this.xianJingMvNode=this.getChild(this.node,"xianJingMvNode"),this.xianJingMvNode.active=!1,this.txtEffectMv=this.getChild(this.node,"txtEffectMv",cc.Label),this.txtEffectMv.node.active=!1,this.btn_addRing=this.getChild(this.node,"btn_addRing"),this.btn_addTrap=this.getChild(this.node,"btn_addTrap"),this.todayHuodongjieshu=this.getChild(this.node,"loginPanel/todayHuodongjieshu"),this.btn_help=this.getChild(this.node,"btn_help"),r.Logger.log("elkConfig===",this.elkConfig)},t.prototype.onEnable=function(){s.EventManager.instance.on(C.CommonEvent.Event_Milu_Tool_Suc,this.onMiluUseToolSuc,this),s.EventManager.instance.on(C.CommonEvent.Event_Item_update,this.refresh,this),s.EventManager.instance.on(C.CommonEvent.Event_Milu_Tool,this.onMiLuUseTool,this),s.EventManager.instance.on(C.CommonEvent.Event_Milu,this.refresh,this),y.default.s_get_holidayRun_info(),this.onAddEvent(this.btn_shop,function(){l.default.instance.createView(p.default.gameView.HolidayShopWindow,null,4)}),this.onAddEvent(this.btn_addRing,function(){v.ServerTime.getServerTime()>=1e3*_.HolidayRunGameModel.actEndTimes?m.WordConfig.showWord(60289):b.UIHelper.showQuickItemBuy(_.HolidayRunGameModel.LingDang)}),this.onAddEvent(this.btn_addTrap,function(){v.ServerTime.getServerTime()>=1e3*_.HolidayRunGameModel.actEndTimes?m.WordConfig.showWord(60289):b.UIHelper.showQuickItemBuy(_.HolidayRunGameModel.XianJing)}),this.onAddEvent(this.btn_help,function(){l.default.instance.createView(p.default.gameView.PublicTipView,null,I.RuleType.TYPE_Milu)}),this.refreshTopGift(),this.refresh()},t.prototype.refreshTopGift=function(){for(var e=0;e<3;e++){var t=f.ActivityRankConfig.getConfig(this.activityId,e+1),i=this.getChild(this.node,"reward"+(e+1),cc.Label),n=this.getChild(this.node,"rewardThing"+(e+1),cc.Node);i.string=t.resource[2];var o=void 0,a=void 0;if(t.item){for(var s in t.item)o=s,a=t.item[s];var c=u.ITemsConfig.getITemsConfigById(o);r.Logger.log("refreshTopGift==",this.activityId,t,o,c),n.getChildByName("thingName").getComponent(cc.Label).string=c.name,n.getChildByName("thingNum").getComponent(cc.Label).string=a+""}r.Logger.log("refreshTopGift===",e,t)}},t.prototype.refresh=function(){this.isFirstOpen&&_.HolidayRunGameModel.myTrackId>0&&(this.isFirstOpen=!1,this.miluSelectViewIndex=_.HolidayRunGameModel.myTrackId-1),this.runtime.string=a.default.formatHourMinStr(1e3*_.HolidayRunGameModel.raceStartTime)+"-"+a.default.formatHourMinStr(1e3*_.HolidayRunGameModel.raceEndTime),this.leftTime.string=a.default.formatDateStr4(1e3*_.HolidayRunGameModel.actStartTime)+"-"+a.default.formatDateStr4(1e3*_.HolidayRunGameModel.actEndTimes),this.ringNum.string=_.HolidayRunGameModel.getMyLingDangNum()+"",this.trapNum.string=_.HolidayRunGameModel.getMyXianJingNum()+"",this.txtScore.string=_.HolidayRunGameModel.score+"",this.txtBaoMingTime.string=a.default.formatHourMinStr(1e3*_.HolidayRunGameModel.signStartTime)+"-"+a.default.formatHourMinStr(1e3*_.HolidayRunGameModel.signEndTime);var e=v.ServerTime.getServerTime()/1e3;r.Logger.log("myTrackId=======================",this.isFirstOpen,_.HolidayRunGameModel.myTrackId,e,_.HolidayRunGameModel.actEndTimes),this.weibaoming.active=!1,this.btn_login.active=!1,this.nonePanel.active=!1,this.endingPanel.active=!1,this.startPanel.active=!1,this.runningPanel.active=!1,this.todayHuodongjieshu.active=!1,e>=_.HolidayRunGameModel.actEndTimes?(this.huodongjieshu.active=!0,this.txtBaoMingTime.node.active=!1,this.txtSelectMilu.node.active=!1,this.nonePanel.active=!0):(this.huodongjieshu.active=!1,this.txtBaoMingTime.node.active=!0,this.txtSelectMilu.node.active=!0,_.HolidayRunGameModel.myTrackId>0?(this.txtSelectMilu.string=cc.js.formatStr(m.WordConfig.getWord(60750),this.jiaozhuNameConfig[_.HolidayRunGameModel.myTrackId-1]),this.yibaoming.active=!0):(this.txtSelectMilu.string=m.WordConfig.getWord(60751),this.yibaoming.active=!1,e>=_.HolidayRunGameModel.signEndTime?(this.weibaoming.active=!0,this.txtSelectMilu.string=m.WordConfig.getWord(60752)):(this.weibaoming.active=!1,this.btn_login.active=!0,this.onAddEvent(this.btn_login,function(){r.Logger.log("\u62a5\u540d\u53c2\u8d5b"),y.default.s_track_sign()}))),e>=_.HolidayRunGameModel.raceEndTime?(this.weibaoming.active=!1,this.endingPanel.active=!0,this.refreshRankResult()):e>=_.HolidayRunGameModel.raceStartTime&&e<=_.HolidayRunGameModel.raceEndTime?(this.runningPanel.active=!0,this.refreshRunningPanel()):(this.startPanel.active=!0,this.refreshStartPanel()))},t.prototype.onMiLuUseTool=function(e,t,i){r.Logger.log("onMiLuUseTool==",e,t,i),this.tempType=e,this.tempNum=t,this.tempTrackId=i,y.default.s_use_ringOrtrap(i,t)},t.prototype.onMiluUseToolSuc=function(){this.playEffectNode(this.tempTrackId,this.tempType,this.tempNum)},t.prototype.playEffectNode=function(e,t,i){var n=this;void 0===e&&(e=1),void 0===t&&(t=0),this.isPlayingMv=!0;var o,a=this.throwDefaultP[e-1];0==t?(o=cc.instantiate(this.lingdangMvNode)).parent=this.lingdangMvNode.parent:(o=cc.instantiate(this.xianJingMvNode)).parent=this.xianJingMvNode.parent,o.active=!0,o.setPosition(a);var s=cc.v2(a.x,a.y+100);cc.tween(o).to(.3,{position:s}).call(function(){o.destroy();var a=cc.instantiate(n.txtEffectMv.node).getComponent(cc.Label);0==t?(a.node.color=g.ColorConfig.GreenColor,a.string="+"+n.elkConfig.buffvalue[0]*i+m.WordConfig.getWord(60753)):(a.node.color=g.ColorConfig.RedColor,a.string=""+n.elkConfig.debuffvalue[0]*i+m.WordConfig.getWord(60753)),a.node.active=!0,a.node.parent=n.txtEffectMv.node.parent,a.node.setPosition(n.txtEffectYList[e-1],-214),cc.tween(a.node).to(.5,{position:cc.v2(a.node.x,a.node.y+30)}).call(function(){a.node.destroy(),n.isPlayingMv=!1,n.refresh()}).start()}).start()},t.prototype.refreshRunningPanel=function(){var e=_.HolidayRunGameModel.trackResultModelList[this.miluSelectViewIndex];if(e){this.refreshRunningItem(this.miluSelectViewIndex,e);for(var t=0;t<this.totalTrackNum;t++)t!=this.miluSelectViewIndex&&this.refreshRunningItem(t,e)}},t.prototype.getMaxTrackId=function(){for(var e=0,t=0,i=0;i<_.HolidayRunGameModel.trackResultModelList.length;i++){var n=_.HolidayRunGameModel.trackResultModelList[i];n.currdistance>=t&&(e=n.trackId,t=n.currdistance)}return e},t.prototype.refreshRunningItem=function(e,t){var i=this;if(!this.isPlayingMv){var n=this.getChild(this.runningPanel,"item"+(e+1)),o=this.getMaxTrackId(),a=n.getChildByName("currDistance").getComponent(cc.Label),s=n.getChildByName("trapNum").getComponent(cc.Label),d=n.getChildByName("ringNum").getComponent(cc.Label),f=n.getChildByName("btn_useRing"),h=n.getChildByName("btn_useTrap");f.active=!1,h.active=!1;var u=n.getChildByName("trapIcon"),C=n.getChildByName("ringIcon");u.active=!1,C.active=!1;var v=n.getChildByName("value").getComponent(cc.Label),y=n.getChildByName("effect").getComponent(cc.Label),b=_.HolidayRunGameModel.trackResultModelList[e],I=this.getChild(n,"content/treeSmall"),M=this.getChild(n,"content/treeRoot"),w=this.getChild(n,"content/treeTop"),k=this.getChild(n,"content/treeBody"),S=this.getChild(n,"content/treeBody2"),P=this.getChild(n,"content/treeBody3"),E=this.getChild(n,"content/treeBody4"),L=this.getChild(n,"miLuLeft/upNode");L.active=!1,I.active=!1,w.active=!1,M.active=!1,k.active=!1,S.active=!1,P.active=!1,E.active=!1;var T=n.getChildByName("mine");T.active=!1,_.HolidayRunGameModel.myTrackId==e+1&&(T.active=!0);var R=n.getChildByName("miLuLeft"),N=n.getChildByName("pContainer");N.active=!0;this.elkConfig.length;if(b){if(r.Logger.log("\u5237\u65b0\u8d5b\u9053=",e,b),this.refreshAllPContainer(b.rank,N),R.getChildByName("txtTop").getComponent(cc.Label).string=e+1+"",a.string=b.currdistance+m.WordConfig.getWord(60753),a.node.color=g.ColorConfig.WhiteColor,o==b.trackId&&(a.node.color=g.ColorConfig.hexToColor("#fbc323")),w.active=!0,this.miluSelectViewIndex==e&&b.currdistance>500&&(k.active=!0),this.miluSelectViewIndex!=e){t.currdistance!=b.currdistance&&(L.active=!0,t.currdistance>=b.currdistance?L.getComponent(cc.Sprite).spriteFrame=L.getComponent(c.SpriteFrameComponent).spriteFrameList[1]:L.getComponent(cc.Sprite).spriteFrame=L.getComponent(c.SpriteFrameComponent).spriteFrameList[0]);var B=Math.abs(t.currdistance-b.currdistance);B<=1e3?t.currdistance<b.currdistance?(k.active=!0,t.currdistance>500&&(S.active=!0)):t.currdistance==b.currdistance?b.currdistance>500&&(k.active=!0):k.active=!1:B<=2e3?t.currdistance<b.currdistance?(k.active=!0,S.active=!0,t.currdistance>500&&(P.active=!0)):k.active=!1:(t.currdistance>b.currdistance?(I.active=!1,w.active=!1,k.active=!1,S.active=!1,P.active=!1,E.active=!1):(k.active=!0,S.active=!0,P.active=!0,t.currdistance>500&&(E.active=!0)),N.width=cc.winSize.width,t.currdistance>b.currdistance&&(N.active=!1))}this.onAddEvent(R,function(){i.miluSelectViewIndex=e,i.refresh()}),s.string=b.trapNum+"";var A=_.HolidayRunGameModel.getMyLingDangNum();if(d.string=b.ringNum+"",_.HolidayRunGameModel.myTrackId==e+1)I.getComponent(cc.Sprite).spriteFrame=I.getComponent(c.SpriteFrameComponent).spriteFrameList[1],w.getComponent(cc.Sprite).spriteFrame=w.getComponent(c.SpriteFrameComponent).spriteFrameList[1],M.getComponent(cc.Sprite).spriteFrame=M.getComponent(c.SpriteFrameComponent).spriteFrameList[1],k.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[1],S.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[1],P.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[1],E.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[1],f.active=!0,C.active=!0,this.onAddEvent(f,function(){A>0?l.default.instance.createView(p.default.gameView.HolidayToolView,null,0,A,e+1):m.WordConfig.showWord(60681)}),v.string=A+"",y.string="+"+this.elkConfig.buffvalue[0]+m.WordConfig.getWord(60753),y.node.color=g.ColorConfig.GreenColor;else{I.getComponent(cc.Sprite).spriteFrame=I.getComponent(c.SpriteFrameComponent).spriteFrameList[0],w.getComponent(cc.Sprite).spriteFrame=w.getComponent(c.SpriteFrameComponent).spriteFrameList[0],M.getComponent(cc.Sprite).spriteFrame=M.getComponent(c.SpriteFrameComponent).spriteFrameList[0],k.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[0],S.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[0],P.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[0],E.getComponent(cc.Sprite).spriteFrame=k.getComponent(c.SpriteFrameComponent).spriteFrameList[0],h.active=!0;var G=_.HolidayRunGameModel.getMyXianJingNum();this.onAddEvent(h,function(){G>0?l.default.instance.createView(p.default.gameView.HolidayToolView,null,1,G,e+1):m.WordConfig.showWord(60682)}),u.active=!0,v.string=G+"",y.string=""+this.elkConfig.debuffvalue[0]+m.WordConfig.getWord(60753),y.node.color=g.ColorConfig.RedColor}}N.active=!1,_.HolidayRunGameModel.myTrackId<=0?(n.y=16,R.y=159.991):(n.y=119,R.y=60.991)}},t.prototype.refreshAllPContainer=function(e,t){for(var i=0;i<t.childrenCount;i++){var n=t.children[i];n.getComponent(cc.Sprite).spriteFrame=n.getComponent(c.SpriteFrameComponent).spriteFrameList[e-1]}},t.prototype.refreshStartPanel=function(){for(var e=0;e<this.totalTrackNum;e++){var t=this.getChild(this.startPanel,"item"+(e+1)).getChildByName("mine");_.HolidayRunGameModel.myTrackId==e+1?t.active=!0:t.active=!1}},t.prototype.refreshRankResult=function(){this.todayHuodongjieshu.active=!0,this.yibaoming.active=!1;for(var e=0;e<this.totalTrackNum;e++){var t=this.getChild(this.endingPanel,"item"+(e+1)),i=t.getChildByName("rankIcon"),n=t.getChildByName("isChampion"),o=_.HolidayRunGameModel.trackResultModelList[e],a=t.getChildByName("txtIndex").getComponent(cc.Label),s=t.getChildByName("currdistance").getComponent(cc.Label),l=t.getChildByName("ringNum").getComponent(cc.Label),d=t.getChildByName("trapNum").getComponent(cc.Label),f=t.getChildByName("resultLabel").getComponent(cc.Label);f.string="";var g=t.getChildByName("mine");g.active=!1,r.Logger.log("refreshRankResult=",e,o),o&&(i.getComponent(cc.Sprite).spriteFrame=i.getComponent(c.SpriteFrameComponent).spriteFrameList[o.rank-1],1==o.rank?(n.getChildByName("1").active=!1,n.getChildByName("2").active=!0):(n.getChildByName("1").active=!0,n.getChildByName("2").active=!1),a.string=e+1+"",1==o.rank?a.node.setPosition(-114.626,-11.112):a.node.setPosition(-107.626,5.888),s.string=o.currdistance+m.WordConfig.getWord(60753),l.string=o.ringNum+m.WordConfig.getWord(60754),d.string=o.trapNum+m.WordConfig.getWord(60754),_.HolidayRunGameModel.myTrackId==e+1&&(g.active=!0,f.string=cc.js.formatStr(m.WordConfig.getWord(60755),this.rankNameConfig[o.rank-1])))}},t=o([w],t)}(d.default));i.default=k,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ActivityRankConfig":"ActivityRankConfig","../config/ColorConfig":"ColorConfig","../config/ElkRunConfig":"ElkRunConfig","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/HolidayRunGameModel":"HolidayRunGameModel","../model/ServerTime":"ServerTime","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","../view/PublicTipView":"PublicTipView"}],HolidaySelectPetView:[function(e,t,i){"use strict";cc._RF.push(t,"1d50aFUh/lLXKXO0syiex8h","HolidaySelectPetView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ViewBase"),r=e("../event/CommonEvent"),c=e("../model/HolidayRunGameModel"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pConfig=[-131,-4,131],t.targetIndex=3,t.totalRandomTime=3*cc.game.getFrameRate(),t.nowCount=0,t.frameCount=0,t.perFrame=8,t}return n(t,e),t.prototype.onLoad=function(){this.btnSure=this.getChild(this.node,"btnSure"),this.btnSure.active=!1,this.selectNode=this.getChild(this.node,"selectNode"),this.txtRandom=this.getChild(this.node,"txtRandom"),this.txtSelect=this.getChild(this.node,"txtSelect"),this.indexIcon=this.getChild(this.node,"txtSelect/indexIcon",cc.Label)},t.prototype.onEnable=function(){this.targetIndex=c.HolidayRunGameModel.myTrackId,this.startRandom()},t.prototype.startRandom=function(){this.btnSure.active=!1,this.txtSelect.active=!1,this.txtRandom.active=!0,this.isPlaying=!0},t.prototype.update=function(){var e=this;if(this.isPlaying&&(this.frameCount++,this.frameCount>=this.perFrame)){this.frameCount=0,this.nowCount++;var t=this.nowCount%3;this.selectNode.setPosition(this.pConfig[t],this.selectNode.getPosition().y),this.nowCount*this.perFrame>=this.totalRandomTime&&t+1==this.targetIndex&&(this.isPlaying=!1,this.txtSelect.active=!0,this.txtRandom.active=!1,this.indexIcon.string=this.targetIndex+"",this.btnSure.active=!0,this.onAddEvent(this.btnSure,function(){a.EventManager.instance.dispatch(r.CommonEvent.Event_Milu),e.closeView()}))}},t=o([d],t)}(s.default));i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../event/CommonEvent":"CommonEvent","../model/HolidayRunGameModel":"HolidayRunGameModel"}],HolidayShopWindow:[function(e,t,i){"use strict";cc._RF.push(t,"a3e03QrQUZBDofvCunjUnYA","HolidayShopWindow");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ViewBase"),c=e("../config/ActivityShopConfig"),l=e("../config/ColorConfig"),d=e("../config/GameConst"),f=e("../config/ITemsConfig"),g=e("../event/CommonEvent"),h=e("../model/ActivityShopModel"),u=e("../model/HolidayRunGameModel"),p=e("../model/ItemInfoModel"),m=e("../network/SocketClient"),C=e("../prefab/ItemPrefab"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNodeList=[],t.maxNum=999,t.nowBuyNum=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.item=this.getChild(this.node,"scrollView/view/content/item"),this.item.active=!1,this.txtMyScore=this.getChild(this.node,"txtMyScore",cc.Label),this.amountEditBox=this.findChild(this.node,"shopWindow/amountEditBox").getComponent(cc.EditBox),this.amountEditBox.node.on("text-changed",this.onTextChange,this)},t.prototype.onSocketRespMsg=function(e,t){e==s.ProtoConfig.c_get_holidaytree_info&&(this.shopWindow.active=!1,this.refresh())},t.prototype.onEnable=function(){a.EventManager.instance.on(g.CommonEvent.Event_ActivityShop,this.refresh,this),m.default.s_get_muluShopInfo(),this.shopWindow=this.getChild(this.node,"shopWindow"),this.shopWindow.active=!1,this.onAddEvent(this.findChild(this.shopWindow,"darkLayer"),this.onClickShopWindowClose.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btn_close"),this.onClickShopWindowClose.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btnDec"),this.onCLickPre.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btnAdd"),this.onClickNext.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btnMax"),this.onClickMax.bind(this)),this.onAddEvent(this.findChild(this.shopWindow,"btn_duihuan"),this.onClickDuihuan.bind(this))},t.prototype.onInitChild=function(e){this.activityId=e,this.activityConfigList=c.ActivityShopConfig.getActivityShopConfigList(e),this.refresh()},t.prototype.refresh=function(){this.txtMyScore.string=u.HolidayRunGameModel.score+"";for(var e=0;e<this.activityConfigList.length;e++){var t=this.activityConfigList[e],i=void 0;this.itemNodeList[e]?i=this.itemNodeList[e]:((i=cc.instantiate(this.item)).parent=this.item.parent,this.itemNodeList[e]=i),i.active=!0;var n=h.ActivityShopModel.getModelByShopId(t.id),o=i.getChildByName("xiangou");o.active=!0,i.getChildByName("cost").getChildByName("txtCost").getComponent(cc.Label).string=t.unit_price+"";var a=i.getChildByName("btnBuy");a.active=!0,this.onAddEvent(a,this.onClickBuy.bind(this,t));var s=f.ITemsConfig.getITemsConfigById(t.item_id);i.getChildByName("ItemPrefab").getComponent(C.default).init(p.default.create(d.GameConst.ITEM_KIND.ITEM,t.item_id,1,s.quality),!0);var r=i.getChildByName("fontclib_shouqing");r.active=!1,n?(o.getChildByName("txtXiangou").getComponent(cc.Label).string=t.maxnum-n.shopNum+"",t.maxnum>0?t.maxnum-n.shopNum<=0&&(r.active=!0,a.active=!1):o.active=!1):(o.getChildByName("txtXiangou").getComponent(cc.Label).string=t.maxnum+"",t.maxnum<=0&&(o.active=!1))}},t.prototype.onClickBuy=function(e){this.config=e,this.shopWindow.active=!0;var t=f.ITemsConfig.getITemsConfigById(e.item_id);this.findChild(this.shopWindow,"ItemPrefab").getComponent(C.default).init(t);var i=h.ActivityShopModel.getModelByShopId(e.id),n=0;if(i&&(n=i.shopNum),e.maxnum<0)this.findChild(this.shopWindow,"xiangou").active=!1,this.maxNum=999;else{this.findChild(this.shopWindow,"xiangou").active=!0;var o=e.maxnum-n;this.findChild(this.shopWindow,"xiangou/value").getComponent(cc.Label).string=o+"",this.maxNum=o}this.nowBuyNum=1,this.shopWindowRefresh()},t.prototype.onClickDuihuan=function(){m.default.s_miluShop_buy(this.config.id,this.nowBuyNum)},t.prototype.onClickShopWindowClose=function(){this.shopWindow.active=!1},t.prototype.shopWindowRefresh=function(){this.amountEditBox.string=this.nowBuyNum+"";var e=this.config.unit_price*this.nowBuyNum;this.findChild(this.shopWindow,"cost/value").getComponent(cc.Label).string=e+"",e<=u.HolidayRunGameModel.score?this.findChild(this.shopWindow,"cost/value").color=l.ColorConfig.WhiteColor:this.findChild(this.shopWindow,"cost/value").color=l.ColorConfig.RedColor},t.prototype.onTextChange=function(){this.nowBuyNum=parseInt(this.amountEditBox.string),this.shopWindowRefresh()},t.prototype.onClickMax=function(){this.nowBuyNum=999,this.shopWindowRefresh()},t.prototype.onClickNext=function(){this.nowBuyNum++,this.shopWindowRefresh()},t.prototype.onCLickPre=function(){this.nowBuyNum>1&&(this.nowBuyNum--,this.shopWindowRefresh())},t.prototype.update=function(){void 0!=this.config&&(this.nowBuyNum=parseInt(this.amountEditBox.string),(isNaN(this.nowBuyNum)||this.nowBuyNum<=0)&&(this.nowBuyNum=1,this.amountEditBox.string=this.nowBuyNum+"",this.shopWindowRefresh()),this.nowBuyNum>=this.maxNum&&(this.nowBuyNum=this.maxNum,this.amountEditBox.string=this.nowBuyNum+"",this.shopWindowRefresh()))},t=o([v],t)}(r.default));i.default=y,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ViewBase":"ViewBase","../config/ActivityShopConfig":"ActivityShopConfig","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../event/CommonEvent":"CommonEvent","../model/ActivityShopModel":"ActivityShopModel","../model/HolidayRunGameModel":"HolidayRunGameModel","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],HolidayToolView:[function(e,t,i){"use strict";cc._RF.push(t,"7860ex7hzNMepd0UaVbLJEl","HolidayToolView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/ViewBase"),c=e("../config/ElkRunConfig"),l=e("../config/WordConfig"),d=e("../event/CommonEvent"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minNum=1,t.nowValue=1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.elkConfig=c.ElkRunConfig.getConfigById(1),this.trapPanel=this.getChild(this.node,"panel/trapPanel"),this.ringPanel=this.getChild(this.node,"panel/ringPanel"),this.txtNum=this.getChild(this.node,"panel/pnlNum/txtNum",cc.Label),this.txtInput=this.getChild(this.node,"panel/count/pnlEdit/txtInput",cc.EditBox),this.btnDec=this.getChild(this.node,"panel/count/pnlEdit/btnDec"),this.btnAdd=this.getChild(this.node,"panel/count/pnlEdit/btnAdd"),this.btn_max=this.getChild(this.node,"panel/count/pnlEdit/btn_max"),this.btnUse=this.getChild(this.node,"panel/btnUse")},t.prototype.onInitChild=function(e,t,i){this.nowType=e,this.maxNum=t,this.trackId=i,this.maxNum<=0&&(this.maxNum=1),this.refresh()},t.prototype.onEnable=function(){var e=this;this.onAddEvent(this.btnAdd,function(){e.nowValue++,e.nowValue>e.maxNum&&(e.nowValue=e.maxNum),e.refresh()}),this.onAddEvent(this.btnDec,function(){e.nowValue--,e.nowValue<e.minNum&&(e.nowValue=e.minNum),e.refresh()}),this.onAddEvent(this.btn_max,function(){e.nowValue=e.maxNum,e.refresh()}),this.onAddEvent(this.btnUse,function(){e.closeView(),a.EventManager.instance.dispatch(d.CommonEvent.Event_Milu_Tool,e.nowType,e.nowValue,e.trackId)})},t.prototype.refresh=function(){this.txtInput.string=this.nowValue+"",this.txtNum.string=this.maxNum+"",this.trapPanel.active=!1,this.ringPanel.active=!1,0==this.nowType?this.ringPanel.active=!0:this.trapPanel.active=!0;var e=this.getChild(this.node,"panel/trapPanel/content",cc.RichText),t=this.getChild(this.node,"panel/ringPanel/content",cc.RichText);s.Logger.log("elkConfig====",this.nowType,this.elkConfig),0==this.nowType?t.string=cc.js.formatStr(l.WordConfig.getWord(60435),this.elkConfig.buffvalue[0]):e.string=cc.js.formatStr(l.WordConfig.getWord(60436),Math.abs(this.elkConfig.debuffvalue[0]))},t.prototype.update=function(){var e=parseInt(this.txtInput.string);(isNaN(e)||e<=0)&&(e=this.minNum,this.refresh()),e>=this.maxNum&&(e=this.maxNum),e!=this.nowValue&&(this.nowValue=e,this.refresh())},t=o([g],t)}(r.default));i.default=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/ElkRunConfig":"ElkRunConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent"}],HolidayView2:[function(e,t,i){"use strict";cc._RF.push(t,"35bb6Tvbf1PQIdpB3LgItSm","HolidayView2");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ViewBase"),l=e("../config/ChongZhiConfig"),d=e("../config/GameConst"),f=e("../config/HolidayConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../model/ActivityOpenModel"),p=e("../model/HolidayModel"),m=e("../model/ItemInfoModel"),C=e("../model/PrivilegeModel"),_=e("../model/RoleInfoModel"),v=e("../network/SocketClient"),y=e("../prefab/ItemPrefab"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SpriteFrameList=[],t.nodeList=[],t.activityid=34,t}return n(t,e),t.prototype.onLoad=function(){this.huishou=this.findChild(this.node,"fundPanel/huishou/1"),this.huishou.active=!1,this.zhanshen=this.findChild(this.node,"fundPanel/zhanshen/1"),this.zhanshen.active=!1,this.btn_buy=this.node.getChildByName("fundPanel").getChildByName("btn_buy"),this.continueTime=this.node.getChildByName("fundPanel").getChildByName("continueTime").getComponent(cc.Label),this.des=this.node.getChildByName("fundPanel").getChildByName("des").getComponent(cc.RichText),this.des.string=g.WordConfig.getWord(60437)},t.prototype.onEnable=function(){s.EventManager.instance.on(d.EVENT_NAME.REFRESH_PRIVILEGE,this.refreshShow,this),s.EventManager.instance.on(h.CommonEvent.Event_show_fund,this.refreshShow,this),this.fontclip_jijinyijihuo=this.node.getChildByName("fundPanel").getChildByName("fontclip_jijinyijihuo"),this.refreshShow(),this.clickChongZhi()},t.prototype.initUI=function(){for(var e=this,t=f.default.getAllList2(),i=function(i){var o,a=t[i],s=n.findChild(n.node,"fundPanel/scrollView/view/content/itemNode"),r=void 0;if(n.nodeList[i]?r=n.nodeList[i]:((r=cc.instantiate(s)).parent=s.parent,n.nodeList[i]=r),s.active=!1,r.active=!0,r.getChildByName("dateNum").getComponent(cc.Label).string=cc.js.formatStr(g.WordConfig.getWord(60438),a.date),o=r.getChildByName("ItemPrefab"),a.item)for(var c in a.item){var l=a.item[c];o.getComponent(y.default).init(m.default.create(d.GameConst.ITEM_KIND.ITEM,c,l))}if(a.resource)for(var f in a.resource){var h=a.resource[f];o.getComponent(y.default).initResource(parseInt(f),h)}o.active=!0,n.onAddEvent(r,function(t){1==t?o.getComponent(y.default).onClickThis():e.clickLingQu(i,a)});var u=r.getChildByName("lock"),C=r.getChildByName("canGetBg");u.active=!0,C.active=!1,a.date<=p.default.nowDay2&&2==_.default.instance.has_shuangdan2&&(u.active=!1,C.active=!0);var v=r.getChildByName("img_ui_yilinqu");v.active=!1,p.default.hadGet2(a.date)?(v.active=!0,C.active=!1):v.active=!1},n=this,o=0;o<t.length;o++)i(o)},t.prototype.clickLingQu=function(e,t){p.default.hadGet2(t.date)||2!=_.default.instance.has_shuangdan2||(v.default.s_doubleegg_get(e+1,this.activityid),r.Logger.log("clickLingQu",e))},t.prototype.refreshShow=function(){this.initUI();var e=u.default.getStarTimeByActivityId(this.activityid),t=u.default.getEndTimeByActivityId(this.activityid);this.continueTime.string=a.default.formatDateStr7(1e3*e)+"-"+a.default.formatDateStr7(1e3*t);var i=this.findChild(this.btn_buy,"price").getComponent(cc.Label),n=l.ChongZhiConfig.getConfigById(224);i.string=n.getMoneyStr()+"",1==_.default.instance.has_shuangdan2?(this.btn_buy.active=!0,this.des.node.active=!0,this.fontclip_jijinyijihuo.active=!1):(this.btn_buy.active=!1,this.des.node.active=!1,this.fontclip_jijinyijihuo.active=!0),C.default.hadRecoveryPrivilege()?this.huishou.active=!0:this.huishou.active=!1,r.Logger.log("refreshShow===",C.default.hadRecoveryPrivilege(),C.default.hadFightGodPrivilege()),C.default.hadFightGodPrivilege()?this.zhanshen.active=!0:this.zhanshen.active=!1},t.prototype.clickChongZhi=function(){this.onAddEvent(this.btn_buy,function(){if(C.default.hadFightGodPrivilege()&&C.default.hadRecoveryPrivilege()){var e=l.ChongZhiConfig.getChongZhiByIdAndPlatform(224);v.default.req_charge(e.id)}else g.WordConfig.showWord(60319)})},o([M({type:[cc.SpriteFrame]})],t.prototype,"SpriteFrameList",void 0),t=o([I],t)}(c.default);i.default=w,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConst":"GameConst","../config/HolidayConfig":"HolidayConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/HolidayModel":"HolidayModel","../model/ItemInfoModel":"ItemInfoModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],HolidayView:[function(e,t,i){"use strict";cc._RF.push(t,"3cbd66KZtND9LGev1ZJ924y","HolidayView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ViewBase"),l=e("../config/ChongZhiConfig"),d=e("../config/GameConst"),f=e("../config/HolidayConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../model/ActivityOpenModel"),p=e("../model/HolidayModel"),m=e("../model/ItemInfoModel"),C=e("../model/PrivilegeModel"),_=e("../model/RoleInfoModel"),v=e("../network/SocketClient"),y=e("../prefab/ItemPrefab"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SpriteFrameList=[],t.nodeList=[],t.activityid=1,t}return n(t,e),t.prototype.onLoad=function(){this.huishou=this.findChild(this.node,"fundPanel/huishou/1"),this.huishou.active=!1,this.zhanshen=this.findChild(this.node,"fundPanel/zhanshen/1"),this.zhanshen.active=!1,this.btn_buy=this.node.getChildByName("fundPanel").getChildByName("btn_buy"),this.continueTime=this.node.getChildByName("fundPanel").getChildByName("continueTime").getComponent(cc.Label),this.des=this.node.getChildByName("fundPanel").getChildByName("des").getComponent(cc.RichText),this.des.string=g.WordConfig.getWord(60437)},t.prototype.onEnable=function(){s.EventManager.instance.on(d.EVENT_NAME.REFRESH_PRIVILEGE,this.refreshShow,this),s.EventManager.instance.on(h.CommonEvent.Event_show_fund,this.refreshShow,this),this.fontclip_jijinyijihuo=this.node.getChildByName("fundPanel").getChildByName("fontclip_jijinyijihuo"),this.refreshShow(),this.clickChongZhi()},t.prototype.initUI=function(){for(var e=this,t=f.default.getAllList(),i=function(i){var o,a=t[i],s=n.findChild(n.node,"fundPanel/scrollView/view/content/itemNode"),r=void 0;if(n.nodeList[i]?r=n.nodeList[i]:((r=cc.instantiate(s)).parent=s.parent,n.nodeList[i]=r),s.active=!1,r.active=!0,r.getChildByName("dateNum").getComponent(cc.Label).string=cc.js.formatStr(g.WordConfig.getWord(60438),a.date),o=r.getChildByName("ItemPrefab"),a.item)for(var c in a.item){var l=a.item[c];o.getComponent(y.default).init(m.default.create(d.GameConst.ITEM_KIND.ITEM,c,l))}if(a.resource)for(var f in a.resource){var h=a.resource[f];o.getComponent(y.default).initResource(parseInt(f),h)}o.active=!0,n.onAddEvent(r,function(t){1==t?o.getComponent(y.default).onClickThis():e.clickLingQu(i,a)});var u=r.getChildByName("lock"),C=r.getChildByName("canGetBg");u.active=!0,C.active=!1,a.date<=p.default.nowDay&&2==_.default.instance.has_shuangdan&&(u.active=!1,C.active=!0);var v=r.getChildByName("img_ui_yilinqu");v.active=!1,p.default.hadGet(a.date)?(v.active=!0,C.active=!1):v.active=!1},n=this,o=0;o<t.length;o++)i(o)},t.prototype.clickLingQu=function(e,t){p.default.hadGet(t.date)||2!=_.default.instance.has_shuangdan||(v.default.s_doubleegg_get(e+1,this.activityid),r.Logger.log("clickLingQu",e))},t.prototype.refreshShow=function(){this.initUI();var e=u.default.getStarTimeByActivityId(this.activityid),t=u.default.getEndTimeByActivityId(this.activityid);this.continueTime.string=a.default.formatDateStr7(1e3*e)+"-"+a.default.formatDateStr7(1e3*t);var i=this.findChild(this.btn_buy,"price").getComponent(cc.Label),n=l.ChongZhiConfig.getConfigById(221);i.string=n.getMoneyStr()+"",1==_.default.instance.has_shuangdan?(this.btn_buy.active=!0,this.des.node.active=!0,this.fontclip_jijinyijihuo.active=!1):(this.btn_buy.active=!1,this.des.node.active=!1,this.fontclip_jijinyijihuo.active=!0),C.default.hadRecoveryPrivilege()?this.huishou.active=!0:this.huishou.active=!1,r.Logger.log("refreshShow===",C.default.hadRecoveryPrivilege(),C.default.hadFightGodPrivilege()),C.default.hadFightGodPrivilege()?this.zhanshen.active=!0:this.zhanshen.active=!1},t.prototype.clickChongZhi=function(){this.onAddEvent(this.btn_buy,function(){if(C.default.hadFightGodPrivilege()&&C.default.hadRecoveryPrivilege()){var e=l.ChongZhiConfig.getChongZhiByIdAndPlatform(221);v.default.req_charge(e.id)}else g.WordConfig.showWord(60319)})},o([M({type:[cc.SpriteFrame]})],t.prototype,"SpriteFrameList",void 0),t=o([I],t)}(c.default);i.default=w,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConst":"GameConst","../config/HolidayConfig":"HolidayConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/HolidayModel":"HolidayModel","../model/ItemInfoModel":"ItemInfoModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],HorseracelampView:[function(e,t,i){"use strict";cc._RF.push(t,"017a1WvNipL2pmvfe8FKVND","HorseracelampView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../model/ChatRoomModel"),s=e("../../engine/ViewBase"),r=e("../prefab/chatitem"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=2,t.interval=50,t.startx=360,t.chatitemlist=[],t.currentIndex=null,t.moveinfo=null,t.horseracelamp=null,t}return n(t,e),t.prototype.onInitChild=function(){},t.prototype.onShow=function(){this.setTopUI(),this.node.zIndex=99,this.horseracelamp=this.node.getChildByName("horseracelamp"),this.startx=this.horseracelamp.getChildByName("mask").width;for(var e=1;e<=2;e++){var t=this.horseracelamp.getChildByName("mask").getChildByName("chatitem"+e);this.chatitemlist.push(t)}a.ChatRoomModel.lamplsit.length>0?this.nextString():this.closeView()},t.prototype.update=function(e){this.moveinfo&&(this.moveinfo.x<0-this.interval-this.moveinfo.width?(this.moveinfo=null,this.horseracelamp.active=!1,this.scheduleOnce(this.nextString,1)):this.moveinfo.x-=this.speed)},t.prototype.nextString=function(){if(0!=a.ChatRoomModel.lamplsit.length){var e=this.chatitemlist[0],t=a.ChatRoomModel.lamplsit.shift(),i=a.ChatRoomModel.getChatRichTextString(t);e.getComponent(r.ChatItem).init(i,9999,t.heroid),this.horseracelamp.active=!0,e.x=this.startx,this.moveinfo=e}else this.closeView()},t=o([l],t)}(s.default));i.horseracelampView=d,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../model/ChatRoomModel":"ChatRoomModel","../prefab/chatitem":"chatitem"}],HotUpdate:[function(e,t,i){"use strict";cc._RF.push(t,"33266rIEM5PiojO/Y+nMski","HotUpdate"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./Logger"),o=e("./VersionManager"),a=e("./EventManager"),s=e("./ManifestConfig"),r=e("../game/sdk/SdkHelper"),c=function(){function e(){this.needUpdate=!1}return e.prototype.init=function(e,t,i){void 0===t&&(t="Code-remote-asset"),cc.sys.isNative&&(this.hotupdateIndex=e,this.key=t,this.storagePath=jsb.fileUtils.getWritablePath()+t,this.manifestUrl=i,jsb.fileUtils.isDirectoryExist(this.storagePath)||jsb.fileUtils.createDirectory(this.storagePath)),this.needUpdate=!1,this.isUpdating=!1,this.isFinishUpdate=!1,this.isCheck=!1},e.prototype.jumpToApkUpate=function(){var e;cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID?e=o.default.instance.apkStoreUrl:r.default.isSampIos()&&(e=o.default.instance.iosStoreUrl)),n.Logger.info("jumpToApkUpate==androidurl===",o.default.instance.apkStoreUrl),n.Logger.info("jumpToApkUpate==iosStoreUrl===",o.default.instance.iosStoreUrl),n.Logger.info("jumpToApkUpate=====",e),cc.sys.openURL(e)},e.prototype.showPackUpdateDialog=function(){this.jumpToApkUpate()},e.prototype.checkCb=function(t){switch(t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.failUpdate();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.failUpdate();break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.alreadyUpToDate();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.key==o.default.Config_Key[0]&&this.localBigVersion<this.remoteBigVersion?this.showPackUpdateDialog():(this.needUpdate=!0,a.EventManager.instance.dispatch(e.Event_On_NeedUpdate,this.key));break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var i=t.getPercent(),s=t.getPercentByFile();n.Logger.log("UPDATE_PROGRESSION==========",i,s);var r=t.getDownloadedFiles()+" / "+t.getTotalFiles(),c=t.getDownloadedBytes()+" / "+t.getTotalBytes();n.Logger.log("UPDATE_PROGRESSION2222==========",this.key,t.getDownloadedBytes(),t.getTotalBytes()),n.Logger.log("UPDATE_PROGRESSION3333==========",r,c),t.getTotalBytes()>0&&a.EventManager.instance.dispatch(e.Event_On_Progress,t.getDownloadedBytes(),t.getTotalBytes(),this.key);break;case jsb.EventAssetsManager.UPDATE_FINISHED:this.finishUpdate(!0);break;case jsb.EventAssetsManager.UPDATE_FAILED:this.failUpdate();break;case jsb.EventAssetsManager.ERROR_UPDATING:var l=this.storagePath+"/"+t.getAssetId(),d=this.storagePath+"_temp/"+t.getAssetId();n.Logger.log("fullFilePath====",l),n.Logger.log("tempFilePath====",d),n.Logger.log("ERROR_UPDATING=============",t.getAssetId(),t.getMessage()),this.failUpdate();break;default:return}},e.prototype.checkUpdate=function(){if(!this.isUpdating&&!this.isCheck){var e=o.default.Config_Url_Key[this.hotupdateIndex];this._am||(this._am=new jsb.AssetsManager("",this.storagePath,this.versionCompareHandle.bind(this)));var t=s.default.getManifestStr(e),i=new jsb.Manifest(t,this.storagePath);this._am.setVerifyCallback(function(e,t){return!0}),this._am.setEventCallback(this.checkCb.bind(this)),this.isCheck=!0,this._am.loadLocalManifest(i,this.storagePath),this._am.checkUpdate()}},e.prototype.versionCompareHandle=function(e,t){var i=e.split("."),a=t.split(".");n.Logger.log("versionCompareHandle======",this.key,o.default.Config_Key[0]),this.key==o.default.Config_Key[0]&&(n.Logger.log("versionCompareHandle22===",e,t),o.default.instance.nowVersion=e,o.default.instance.targetVersion=t),this.localBigVersion=parseInt(i[0]),this.remoteBigVersion=parseInt(a[0]);for(var s=0;s<i.length;++s){var r=parseInt(i[s]),c=parseInt(a[s]||0);if(r!==c)return r-c}return a.length>i.length?-1:0},e.prototype.startUpdate=function(){if(!this.isUpdating){var t=this._am.getLocalManifest(),i=this._am.getRemoteManifest();n.Logger.log("startUpdate111===",t.getVersionFileUrl()),n.Logger.log("startUpdate2222===",t.getManifestFileUrl()),n.Logger.log("startUpdate3333===",i.getVersionFileUrl()),n.Logger.log("startUpdate4444===",i.getManifestFileUrl()),this.isUpdating=!0,a.EventManager.instance.dispatch(e.Event_On_Progress,0,100,this.key),this._am.update()}},e.prototype.disposeUpdate=function(){this._am&&(this._am.setVerifyCallback(null),this._am.setEventCallback(null)),this._am=null,this._checkListener=null,this.isUpdating=!1,this.needUpdate=!1},e.prototype.failUpdate=function(){this.disposeUpdate(),this.isCheck=!1,this.key,o.default.Config_Key[0],a.EventManager.instance.dispatch(e.Event_On_Fail_Update,this.key)},e.prototype.alreadyUpToDate=function(){this.disposeUpdate(),this.isFinishUpdate=!0,a.EventManager.instance.dispatch(e.Event_On_ALREADY_UP_TO_DATE,this.key)},e.prototype.finishUpdate=function(t){if(this.disposeUpdate(),this.isFinishUpdate=!0,a.EventManager.instance.dispatch(e.Event_Finish_Update,this.key,t),t){var i=jsb.fileUtils.getSearchPaths();n.Logger.log("\u66f4\u65b0\u5b8c\u6210====searchPaths======",i),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(i)),cc.sys.localStorage.setItem("jhaoSearchPaths",JSON.stringify(i)),jsb.fileUtils.setSearchPaths(i),this.key==o.default.Config_Key[0]&&(cc.audioEngine.stopAll(),cc.game.restart())}},e.Event_CheckUpdate="Event_CheckUpdate",e.Event_On_Progress="HotUpdate_Event_On_Progress",e.Event_On_NeedUpdate="HotUpdate_Event_On_NeedUpdate",e.Event_Finish_Update="HotUpdate_Event_Finish",e.Event_On_ALREADY_UP_TO_DATE="HotUpdate_Event_On_ALREADY_UP_TO_DATE",e.Event_On_Fail_Update="HotUpdate_Event_On_Fail_Update",e}();i.default=c,cc._RF.pop()},{"../game/sdk/SdkHelper":"SdkHelper","./EventManager":"EventManager","./Logger":"Logger","./ManifestConfig":"ManifestConfig","./VersionManager":"VersionManager"}],HouseAddView:[function(e,t,i){"use strict";cc._RF.push(t,"45b09zIhetKyp3I9czMt+hz","HouseAddView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/ChongZhiConfig"),f=e("../../config/GameConfig"),g=e("../../config/StorageConfig"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=e("../../event/CommonEvent"),m=e("../../miniGameTools/tttool"),C=e("../../model/AdModel"),_=e("../../model/HouseModel"),v=e("../../model/PrivilegeModel"),y=e("../../model/RoleInfoModel"),b=e("../../network/SocketClient"),I=e("../../sdk/LoongCheerManager"),M=e("../../sdk/SdkHandler"),w=e("../../sdk/SdkHelper"),k=e("../../sdk/SdkManager"),S=e("../../utils/UIHelper"),P=cc._decorator,E=P.ccclass,L=(P.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chongzhiId=12,t}return n(t,e),t.prototype.onShow=function(){var e=this.getChild(this.node,"view");this.btnAd=this.getChild(e,"btnPanel/btnAd"),this.btnCoin=this.getChild(e,"btnPanel/btnGold"),this.btnGem=this.getChild(e,"btnPanel/btnGem"),this.btnBuy=this.getChild(e,"btnPanel/btnBuy"),this.button_mianfeihuode_gkgg=this.getChild(this.node,"view/btnPanel/btnAd/button_mianfeihuode_gkgg"),this.initData(),this.onEvent(),this.refreshInfo()},t.prototype.refreshInfo=function(){v.default.hadFreePrivilege()&&(this.button_mianfeihuode_gkgg.active=!1)},t.prototype.onEvent=function(){a.EventManager.instance.on(p.CommonEvent.Event_ad_end,this.onAdEnd,this),this.onAddEvent(this.btnCoin,this.onAddBagAmount.bind(this,1)),this.onAddEvent(this.btnGem,this.onAddBagAmount.bind(this,2)),this.onAddEvent(this.btnAd,this.onAddBagAmount.bind(this,3)),this.onAddEvent(this.btnBuy,this.onAddBagAmount.bind(this,4))},t.prototype.initData=function(){this.btnGem.active=this.btnAd.active=!1;var e=g.StorageConfig.getConfigById(_.HouseModel.addHouseTimes+1);if(null!=e){s.Logger.log("StorageConfig===",_.HouseModel.addHouseTimes,e),this.conifg=e;for(var t=[e.gold,e.gem,e.ad],i=[this.btnCoin,this.btnGem,this.btnAd],n=0;n<t.length;n++)if(0!=t[n]){if(0==n)this.getChild(this.btnCoin,"lblCoin",cc.Label).string=S.UIHelper.tranNumber(e.gold);else this.getChild(this.btnGem,"lblCoin",cc.Label).string=""+e.gem;i[n].active=!0}this.btnCoin.active=this.conifg.gold>0;var o=g.StorageConfig.getMaxNum();s.Logger.log("\u4ed3\u5e93==",o,this.conifg),o-_.HouseModel.houseNum>=50?this.btnBuy.active=!0:this.btnBuy.active=!1;var a=d.ChongZhiConfig.getChongZhiByIdAndPlatform(this.chongzhiId);this.btnBuy.getChildByName("lblCoin").getComponent(cc.Label).string=a.getMoneyStr(),f.GameConfig.isOpenAd||(this.btnAd.active=!1)}},t.prototype.onAddBagAmount=function(e){var t;switch(e){case 1:y.default.instance.getCoin()>=this.conifg.gold&&(t=!0),t?b.default.s_buy_warehouse(2,1):f.GameConfig.isWechat()?C.default.getAdLostTimes(C.Ad_Type.Coin)>0?c.default.instance.createView(h.default.gameView.buyMoney):u.WordConfig.showWord(60102):S.UIHelper.showCoinNoEnough();break;case 2:y.default.instance.getGold()>=this.conifg.gem&&(t=!0),t?b.default.s_buy_warehouse(3,1):u.WordConfig.showWord(60115);break;case 3:v.default.hadFreePrivilege()?this.onAdEnd():f.GameConfig.isWechat()?m.tttool.OpenAD():f.GameConfig.sdkType==f.SdkType.BingNiao?w.default.sdkAd():k.default.sdkAd(M.AdType.videoAd,I.AdPosId.storageupgrade);break;case 4:var i=d.ChongZhiConfig.getChongZhiByIdAndPlatform(this.chongzhiId);b.default.req_charge(i.id),this.closeView()}},t.prototype.onAdEnd=function(){b.default.s_buy_warehouse(1,1)},t.prototype.onSocketRespMsg=function(e,t){e==r.ProtoConfig.c_req_bug_warehouse&&this.initData()},t=o([E],t)}(l.default));i.default=L,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/GameConfig":"GameConfig","../../config/StorageConfig":"StorageConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../miniGameTools/tttool":"tttool","../../model/AdModel":"AdModel","../../model/HouseModel":"HouseModel","../../model/PrivilegeModel":"PrivilegeModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../sdk/LoongCheerManager":"LoongCheerManager","../../sdk/SdkHandler":"SdkHandler","../../sdk/SdkHelper":"SdkHelper","../../sdk/SdkManager":"SdkManager","../../utils/UIHelper":"UIHelper"}],HouseModel:[function(e,t,i){"use strict";cc._RF.push(t,"83ec1c867VEubQhN6SbafP4","HouseModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/ITemsConfig"),c=e("../event/CommonEvent"),l=e("./ItemInfoModel"),d=function(){function e(){}return e.proto2HouseList=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_baghouse_list,t);o.Logger.log("proto2HouseList===",i),e.houseNum=i.getNum(),e.addHouseTimes=i.getTimes();var r=i.getItemlistList();e.houseSortList=[];for(var d=0;d<r.length;d++){var f=new l.default;f.proto2Model(r[d]),this.addItemToHouse(f)}l.default.sort(e.houseSortList),n.EventManager.instance.dispatch(c.CommonEvent.Event_House_Info)},e.proto2_bug_warehouse=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_bug_warehouse,t),r=(i.getRet(),i.getNum()),l=i.getTime();e.houseNum=r,e.addHouseTimes=l,o.Logger.log("proto2_bug_warehouse===",i),n.EventManager.instance.dispatch(c.CommonEvent.Event_House_Info)},e.proto2_update_baghouse_item=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_update_baghouse_item,e),i=t.getChange(),r=t.getAdditemlistList();o.Logger.log("proto2_update_baghouse_item=",i,r);for(var d=0;d<r.length;d++){var f=new l.default;f.proto2Model(r[d]),1==i?(this.deleteItemToHouse(f),this.addItemToHouse(f)):this.deleteItemToHouse(f)}n.EventManager.instance.dispatch(c.CommonEvent.Event_House_Info)},e.deleteItemToHouse=function(e){for(var t=this.houseSortList.length-1;t>=0;t--)this.houseSortList[t].itemId==e.itemId&&this.houseSortList.splice(t,1)},e.addItemToHouse=function(e){var t=r.ITemsConfig.getITemsConfigById(e.itemType),i=e.itemCnt,n=e.clone();if(t&&t.stack==r.ITemsConfig.StackType.Yes){for(var o=0;o<this.houseSortList.length;o++)if(this.houseSortList[o].itemType==e.itemType){var a=r.ITemsConfig.getITemsConfigById(e.itemType);if(this.houseSortList[o].itemCnt+=i,!(this.houseSortList[o].itemCnt>a.max_stack)){i=0;break}i=this.houseSortList[o].itemCnt-a.max_stack,this.houseSortList[o].itemCnt=a.max_stack}if(i>0){var s=this.houseNum-this.houseSortList.length;for(o=0;o<s&&((n=n.clone()).itemCnt=i,t.max_stack<i?(n.itemCnt=t.max_stack,i-=t.max_stack):(n.itemCnt=i,i=0),this.houseSortList.push(n),!(i<=0));o++);}}i>0&&(n.itemCnt=i,this.houseSortList.push(n))},e.houseNum=0,e.houseSortList=[],e.addHouseTimes=0,e}();i.HouseModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/ITemsConfig":"ITemsConfig","../event/CommonEvent":"CommonEvent","./ItemInfoModel":"ItemInfoModel"}],HouseView:[function(e,t,i){"use strict";cc._RF.push(t,"537fdxmDrpCzpT08Z4fuBlo","HouseView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/GameConst"),l=e("../../config/StorageConfig"),d=e("../../config/ViewConfig"),f=e("../../config/WordConfig"),g=e("../../event/CommonEvent"),h=e("../../model/HouseModel"),u=e("../../model/ItemInfoModel"),p=e("../../network/SocketClient"),m=e("../../prefab/ItemPrefab"),C=e("../../utils/CollideUtil"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tempItemPrefab=null,t.tabIndex=0,t.Tab_Num=3,t.itemNodeList=[],t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),i.instance=this,this.itemContent=this.getChild(this.node,"panel/view/content"),this.txtHouseNum=this.getChild(this.node,"bag/txtHouseNum",cc.Label),this.scrollView=this.getChild(this.node,"panel",cc.ScrollView),this.btnCKAddBG=this.getChild(this.node,"bag/btnAdd/btnCKAddBG"),this.onAddEvent(this.getChild(this.node,"bag/btnAdd"),function(){var e=l.StorageConfig.getMaxNum();l.StorageConfig.getConfigById(h.HouseModel.addHouseTimes).storage<e?s.default.instance.createView(d.default.gameView.HouseAddView):f.WordConfig.showWord(60218)}),this.onAddEvent(this.getChild(this.node,"bag/btnSort"),function(){u.default.sort(h.HouseModel.houseSortList),t.refreshTab()}),this.onAddEvent(this.getChild(this.node,"btnBack"),function(){t.node.active=!1})},t.prototype.btnAddFreshEff=function(){this.btnCKAddBG&&cc.tween(this.btnCKAddBG).repeatForever(cc.tween().to(.3,{scaleX:1,scaleY:1}).to(.3,{scaleX:.8,scaleY:.8})).start()},t.prototype.onEnable=function(){a.EventManager.instance.on(g.CommonEvent.Event_House_Info,this.onHouseInfo,this),p.default.s_req_baghouse_list(),this.btnAddFreshEff(),this.refreshTab()},t.prototype.onScrollEvent=function(){var e=this.scrollView.node.getChildByName("area"),t=cc.v2(e.x,e.y);this.scrollView.content.children.forEach(function(i){var n=e.parent.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0))),o=C.CollisionUtil.getInstance().rectCollide(t,e.getContentSize(),n,i.getContentSize());i.getChildByName("content").active=o})},t.prototype.onHouseInfo=function(){this.refreshTab()},t.prototype.refreshTab=function(){for(var e=this,t=function(t){var n=i.getChild(i.node,"bag/tabNode"+t);i.onAddEvent(n,function(){e.tabIndex=t,e.refreshTab()}),t==i.tabIndex?n.getChildByName("checkmark").active=!0:n.getChildByName("checkmark").active=!1},i=this,n=0;n<this.Tab_Num;n++)t(n);this.refresh()},t.prototype.refresh=function(){var e=this;this.numSta=!1,h.HouseModel.houseNum-h.HouseModel.houseSortList.length==0&&(this.numSta=!0);var t=this.numSta?"#FF0000":"#FFFFFF";this.txtHouseNum.string=h.HouseModel.houseSortList.length+"/"+h.HouseModel.houseNum,this.txtHouseNum.node.color=cc.color().fromHEX(t);for(var n=function(t){o.scheduleOnce(function(){var n;e.itemNodeList[t]?n=e.itemNodeList[t]:((n=cc.instantiate(e.tempItemPrefab)).parent=e.itemContent,e.itemNodeList[t]=n),n.active=!1;var o=h.HouseModel.houseSortList[t];e.tabIndex==i.TabConfig.All&&(n.active=!0),n.getChildByName("content").getChildByName("spRed").active=!1;var a=n.getChildByName("content").getChildByName("ItemPrefab");a.active=!1,o&&(e.tabIndex==i.TabConfig.All||o.itemKind==c.GameConst.ITEM_KIND.EQUIP&&e.tabIndex==i.TabConfig.Equip||o.itemKind==c.GameConst.ITEM_KIND.ITEM&&e.tabIndex==i.TabConfig.Item)&&(n.active=!0,a.getComponent(m.default).init(o),a.active=!0,n.active=!0,e.onAddEvent(n,function(){p.default.s_update_baghouse_item(parseInt(o.itemId),2,o.itemType)}))},.01)},o=this,a=0;a<h.HouseModel.houseNum;a++)n(a);this.onScrollEvent()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.TabConfig={All:0,Equip:1,Item:2},o([y({type:cc.Prefab})],t.prototype,"tempItemPrefab",void 0),t=i=o([v],t)}(r.default);i.default=b,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/StorageConfig":"StorageConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/HouseModel":"HouseModel","../../model/ItemInfoModel":"ItemInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/CollideUtil":"CollideUtil"}],HttpHelper:[function(e,t,i){"use strict";cc._RF.push(t,"c8b3fiXHatHmJ6mznEJORw9","HttpHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/EventManager"),a=e("../../engine/GlobalConfig"),s=e("../../engine/HttpUtil"),r=e("../../engine/Logger"),c=e("../../engine/Md5Helper"),l=e("../../engine/VersionManager"),d=e("../config/GameConfig"),f=e("../event/CommonEvent"),g=e("../model/RoleInfoModel"),h=e("../model/ServerTime"),u=e("../model/SettingModel"),p=e("../model/ZoneModel"),m=e("../sdk/SdkHelper"),C=function(){function e(){}return e.init=function(){o.EventManager.instance.on(f.CommonEvent.Event_AddDebugLog,this.onAddDebugLog,this)},e.onAddDebugLog=function(e){this.sendBugLog(e)},e.setToken=function(e){this.token=e},e.getToken=function(){return this.token},e.plugEnd=function(){return"http://./plug?"+("switch=2&userName="+m.default.uId+"&roleId="+g.default.instance.roleId)},e.plug=function(e,t,i){(new s.default).setMethod(s.default.methodTypeOption.GET),i=encodeURIComponent(i);var o="startTime="+n.default.now()+"&mapId="+g.default.instance.mapId+"&notItselfEq="+u.SettingModel.notItselfEq+"&ordinaryEq="+u.SettingModel.ordinaryEq+"&excellentEq="+u.SettingModel.excellentEq+"&isAutoBuyHp="+e+"&isAutoBuyMp="+t+"&bossInfoList="+i,a=d.GameConfig.getPlugUrl()+o;return r.Logger.log("realUrl==",a),a},e.pvp=function(){for(var e=[],t=0;t<g.default.instance.attrList.length;t++){e[t]=[];var i=g.default.instance.attrList[t];e[t][0]=i.magicId,e[t][1]=i.magicValue}var n=[];for(t=0;t<g.default.instance.skillModelList.length;t++){var o=g.default.instance.skillModelList[t];n[t]=[],n[t][0]=o.id,n[t][1]=o.level,n[t][2]=o.isActive,n[t][3]=o.isSelect,n[t][4]=o.isSelectPvP}encodeURIComponent(JSON.stringify(e)),encodeURIComponent(JSON.stringify(n))},e.getDomainList=function(e){var t=this,i=new s.default;i.setMethod(s.default.methodTypeOption.GET);var n=[{user_id:m.default.uId,version:l.default.instance.nowVersion}],a=JSON.stringify(n);a=encodeURIComponent(a),i.requestByForm(d.GameConfig.getHttpUrl()+"/game/?server_list="+a,function(i,n){if(r.Logger.log("=========ZoneModel========",n),i){try{p.ZoneModel.json2ZoneModel(n)}catch(e){r.Logger.log("=========ZoneModel=====error===",e)}e&&e()}else r.Logger.log("=========getDomainList========error");!n&&t.isFirst&&(t.isFirst=!1,o.EventManager.instance.dispatch(f.CommonEvent.Event_SdkInit))})},e.getNotify=function(e){var t=new s.default;t.setMethod(s.default.methodTypeOption.GET);var i={};i.pid=a.GlobalConfig.platformId;var n=s.default.instance.fotmatGetUrl(d.GameConfig.getNoteHttpUrl(),i);t.requestByForm(n,function(t,i){if(t){var n=i;n&&(0==n.code?e&&e(n):r.Logger.warn("getNotify error=",n.code))}})},e.sendBugLog=function(e){if(!(this._bugCount>=3)){var t=c.Md5Helper.getMd5Default(e);if(!this._bugCache[t]){this._bugCache[t]=1,this._bugCount++;var i=new s.default;i.setMethod(s.default.methodTypeOption.GET);var n=[];if(p.ZoneModel.nowZoneInfoModel){var o=p.ZoneModel.nowZoneInfoModel.server_id;n.push("serverId="+o)}if(g.default.instance){var a=g.default.instance.roleId,f=m.default.uId;n.push("roleId="+a),n.push("uid="+f)}var h=l.default.instance.nowVersion;n.push("version="+h),n.push("str="+e),n.push("md5Str="+t);var u="";n.forEach(function(e){u+=e+="&"}),i.requestByForm(d.GameConfig.getBugLogUrl()+"?"+u,function(e,t){e&&t&&0==t.code&&r.Logger.log("sendBugLog ok")})}}},e.getServerTime=function(){var e=this,t=new s.default;t.setMethod(s.default.methodTypeOption.GET);var i;i="https://api.m.taobao.com/rest/api3.do?api=mtop.common.getTimestamp",t.requestByForm(i,function(e,t){if(e)try{h.ServerTime.setServerTime(t.data.t)}catch(e){r.Logger.warn("getServerTime error=",e)}}),clearTimeout(this.timeId),this.timeId=setTimeout(function(){e.getServerTime()},500)},e.getHotUpdateSwitch=function(e){void 0===e&&(e=null);var t=new s.default;t.setMethod(s.default.methodTypeOption.GET);var i;i=d.GameConfig.getHotUpdateUrl()+"/start.json?"+n.default.now(),t.requestByForm(i,function(t,i){t&&(r.Logger.warn("getHotUpdateSwitch =",i),r.Logger.warn("getHotUpdateSwitch =22",JSON.stringify(i)),e&&e(i))})},e.requestPhp=function(e,t,i){void 0===e&&(e=[]),void 0===i&&(i=!0);var n=new s.default;n.setMethod(s.default.methodTypeOption.GET);var o=(new Date).getTime()+"";o=o.substr(0,10),e.push("time="+o),e.push("partner_id="+d.GameConfig.getLoginChangelid()),e.push("platform_id="+m.default.platformId),e.push("game_pkg="+(cc.sys.isBrowser?"web":m.default.isIos()?"ios":"android")),i&&e.push("token="+this.token),i&&e.push("uid="+m.default.uId);var a="",r="";(e=e.sort()).forEach(function(e){a+=e+="&",r+=e.replace("=","")}),a=a.substr(0,a.length-1),r=r.substr(0,r.length-1),a=a+"&sign="+c.Md5Helper.getMd5Default(r+"asdfloNgRUi2021!!!qwer"),console.log("php===",d.GameConfig.getLoginCp()+"?"+a),n.requestByForm(d.GameConfig.getLoginCp()+"?"+a,function(e,i){console.log("phpres===",i),t&&t(e,i)})},e.requestPhpToken=function(e,t,i){void 0===e&&(e=[]),void 0===i&&(i=!0);var n=new s.default;n.setMethod(s.default.methodTypeOption.GET),e.push("partner_id="+d.GameConfig.getLoginChangelid()),e.push("platform_id="+m.default.platformId),i&&e.push("uid="+m.default.uId);var o="",a="";(e=e.sort()).forEach(function(e){o+=e+="&",a+=e.replace("=","")}),o=o.substr(0,o.length-1),a=a.substr(0,a.length-1),o=o+"&sign="+c.Md5Helper.getMd5Default(a+"asdfloNgRUi2021!!!qwer"),console.log("php===",d.GameConfig.getLoginCp()+"?"+o),n.requestByForm(d.GameConfig.getLoginCp()+"?"+o,function(e,i){console.log("phpres===",i),t&&t(e,i)})},e.isFirst=!0,e._bugCache={},e._bugCount=0,e}();i.default=C,window.HttpHelper=C,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/GlobalConfig":"GlobalConfig","../../engine/HttpUtil":"HttpUtil","../../engine/Logger":"Logger","../../engine/Md5Helper":"Md5Helper","../../engine/VersionManager":"VersionManager","../config/GameConfig":"GameConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../model/SettingModel":"SettingModel","../model/ZoneModel":"ZoneModel","../sdk/SdkHelper":"SdkHelper"}],HttpUtil:[function(e,t,i){"use strict";cc._RF.push(t,"9b04e5rx6JP2r+vAVnlh/Eo","HttpUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./Logger"),o=function(){function e(){this.methodType="GET",this.responseType="json",this.myRequestHeader=new Map,this.hadSetContentType=!1,this.contentType="",this.xhr=cc.loader.getXMLHttpRequest()}return e.prototype.setMethod=function(t){void 0===t&&(t=e.methodTypeOption.POST),this.methodType=t},e.prototype.setParams=function(e){var t="",i=1;for(var n in e)e.hasOwnProperty(n)&&(t+=1==i?n+"="+encodeURIComponent(e[n]):"&"+n+"="+encodeURIComponent(e[n]),i+=1);return t},e.prototype.fotmatGetUrl=function(e,t){return e+"?"+this.setParams(t)},e.prototype.setResponseType=function(e){this.responseType=e},e.prototype.setContentType=function(e){this.hadSetContentType=!0,this.contentType=e},e.prototype.setRequestHeader=function(e,t){this.myRequestHeader.set(e,t)},e.prototype.resetRequestHeader=function(){this.myRequestHeader.clear()},e.prototype.requestByForm=function(e,t,i){var o=this;void 0===i&&(i=5e3);var a=this.xhr;a.responseType=this.responseType,a.timeout=i,a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=a.response;n.Logger.info("http request======response========",e);try{t&&(t(!0,e),t=null)}catch(e){t&&(t(!1),t=null)}}else 4==a.readyState&&301==a.status?o.requestByForm(a.getResponseHeader("Location"),t):4==a.readyState&&404==a.status?t&&(t(!1),t=null):4==a.readyState&&t&&(t(!1),t=null)},a.onprogress=function(){},a.onerror=function(){n.Logger.warn("http request======error========",e),t&&(t(!1),t=null)},a.ontimeout=function(){t&&(t(!1),t=null)},n.Logger.info("http request======url========",e),a.open(this.methodType,e,!0),this.hadSetContentType?a.setRequestHeader("content-type",this.contentType):a.setRequestHeader("content-type","text/plain;charset=UTF-8"),this.myRequestHeader.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(),this.resetRequestHeader()},e.prototype.requestByBody=function(e,t,i,o){var a=this;void 0===i&&(i=null),void 0===o&&(o=5e3);var s=this.xhr;s.responseType=this.responseType,s.timeout=o,s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=s.response;n.Logger.info("http request======response========",e);try{t&&(t(!0,e),t=null)}catch(e){t&&(t(!1),t=null)}}else 4==s.readyState&&301==s.status?a.requestByBody(s.getResponseHeader("Location"),t):4==s.readyState&&404==s.status?t&&(t(!1),t=null):4==s.readyState&&t&&(t(!1),t=null)},s.onprogress=function(){},s.onerror=function(){n.Logger.warn("http request======error========",e),t&&(t(!1),t=null)},s.ontimeout=function(){t&&(t(!1),t=null)},n.Logger.info("http request======url========",e),n.Logger.info("http request======params========",i),s.open(this.methodType,e,!0),this.hadSetContentType?s.setRequestHeader("content-type",this.contentType):s.setRequestHeader("content-type","text/plain;charset=UTF-8"),this.myRequestHeader.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send(i),this.resetRequestHeader()},e.instance=new e,e.methodTypeOption={GET:"GET",POST:"POST"},e}();i.default=o,cc._RF.pop()},{"./Logger":"Logger"}],HurtModel:[function(e,t,i){"use strict";cc._RF.push(t,"e9567GlajxDppCYpuMcjGp2","HurtModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.baseHurt=0,this.wujiHurt=0,this.gongshahurt=0,this.fashujigntongHurt=0,this.totalHurt=0}return e.create=function(t,i,n,o){void 0===i&&(i=!1),void 0===n&&(n=0),void 0===o&&(o=0);var a=new e;return a.baseHurt=n,a.wujiHurt=o,a.totalHurt=t,a.isLucky=i,a},e.prototype.getCalculationTotalHurt=function(){return this.baseHurt+this.wujiHurt+this.gongshahurt+this.fashujigntongHurt},e.prototype.clone=function(){var t=new e;return t.baseHurt=this.baseHurt,t.wujiHurt=this.wujiHurt,t.gongshahurt=this.gongshahurt,t.fashujigntongHurt=this.fashujigntongHurt,t.totalHurt=this.totalHurt,t.isLucky=this.isLucky,t},e}();i.HurtModel=n,cc._RF.pop()},{}],ITemsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7a636NORYFKjK0hOv2Kp/oe","ITemsConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="",t.cid=0,t.kind=0,t.name="",t.icon="",t.position="",t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)i[n]=e[n];return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=i,t.configMap.set(i,n)})},t.getITemsConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.configMap=new Map,t.StackType={Yes:1,No:0},t.MAX_AMO={max_amo:1},t}(e("./JsonConfigBase").JsonConfigBase);i.ITemsConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],IllustratedBooksConfig:[function(e,t,i){"use strict";cc._RF.push(t,"15051r3pxFA7Js8MLVm+1X/","IllustratedBooksConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){}}();i.BooksMapConfig=a;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item_cost=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.map=new Map,this.occupationArr=new Array,Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n),t.occupationArr.includes(n.pro)||t.occupationArr.push(n.pro);var o=t.map.get(n.pro);o||(o=new Map,t.map.set(n.pro,o));var a,s=o.get(n.world);s||(s=new Map,o.set(n.world,s)),(a=s.get(n.type))||(a=new Array,s.set(n.type,a)),a.push(n),s.set(n.type,a),o.set(n.world,s),t.map.set(n.pro,o)}),this.occupationArr.sort(function(e,t){return e-t})},t.getConfigs=function(e,t){var i=this.map.get(e).get(t),n=new Array;return i&&(i.forEach(function(e){var t=new a;t.type=e[0].type,t.configs=e,n.push(t)}),n.sort(function(e,t){return e.type-t.type})),n},t.getOccupationArr=function(){return this.occupationArr},t.getConfigMap=function(){return this.map},t.getConfigById=function(e){return this.configMap.get(e)},t.getMapByProId=function(e){return this.map.get(e)},t.Config_Name="IllustratedBooksConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.IllustratedBooksConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],IllustratedBooksenhanceConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ac89au0cFhMWZlxGJUd+Guu","IllustratedBooksenhanceConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configMap=new Map,Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=i;var o=t.configMap.get(n.cid);o||(o=new Array),o.push(n),t.configMap.set(n.cid,o)})},t.getConfigByCid=function(e,t){var i;return this.configMap.get(e).every(function(e){return e.taolevel!=t||(i=e,!1)}),i},t.Config_Name="IllustratedBooksenhanceConfig",t}(e("./JsonConfigBase").JsonConfigBase);i.IllustratedBooksenhanceConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],IllustratedBooksshowConfig:[function(e,t,i){"use strict";cc._RF.push(t,"93d63QK0kBI/aoildGvrm/k","IllustratedBooksshowConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.config=n})},t.getCofnig=function(){return this.config},t.Config_Name="IllustratedBooksshowConfig",t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],IntensifyBuffConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cb5373nT/9OYp6j8alaR2s2","IntensifyBuffConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.BonusDamage_p=e.BonusDamage_p,i.DamageReduction_p=e.DamageReduction_p,i.hp_p=e.hp_p,i.level=e.level,i.mp_p=e.mp_p,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.level=parseInt(i)})},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.IntensifyBuffConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],IntensifyConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d1458C2FwxGv5B+GHKAXcYV","IntensifyConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/MagicModel"),a=e("./GameConst"),s=e("./JsonConfigBase"),r=e("./MagicNameConfig"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prob=1e4,t.limit_level=1,t.magicList=[],t}return n(t,e),t.prototype.getCost=function(){return this.cost},t.obj2Config=function(e){var i=new t;return i.level=e.level,i.prob=e.prob,i.cost=e.cost,i.cost4=e.cost4,i.prob1=e.prob1,i.limit_level=e.limit_level,i.magicList=[],i.magicList.push(o.default.create(e[1][0],e[1][1])),i.magicList.push(o.default.create(e[2][0],e[2][1])),i.magicList.push(o.default.create(e[3][0],e[3][1])),i.magicList.push(o.default.create(e[4][0],e[4][1])),i.magicList.push(o.default.create(e[5][0],e[5][1])),i.magicList.push(o.default.create(e[6][0],e[6][1])),i.magicList.push(o.default.create(e[7][0],e[7][1])),i.magicList.push(o.default.create(e[8][0],e[8][1])),i.magicList.push(o.default.create(e[9][0],e[9][1])),i.magicList.push(o.default.create(e[10][0],e[10][1])),i.weapon=o.default.create(e[1][0],e[1][1]),i.corselet=o.default.create(e[2][0],e[2][1]),i.helmet=o.default.create(e[6][0],e[6][1]),i.necklace=o.default.create(e[7][0],e[7][1]),i.bracelet_left=o.default.create(e[3][0],e[3][1]),i.bracelet_right=o.default.create(e[8][0],e[8][1]),i.ring_left=o.default.create(e[4][0],e[4][1]),i.ring_right=o.default.create(e[9][0],e[9][1]),i.belt=o.default.create(e[5][0],e[5][1]),i.shoe=o.default.create(e[10][0],e[10][1]),i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.jsonParse(n),t.configMap.set(i,n)})},t.jsonParse=function(e){for(var t in e)"string"==typeof e[t]&&(e[t]=JSON.parse(e[t]))},t.getIntensifyConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.level&&(t=i)}),t},t.getEquipIntensifyConfig=function(e){var i;return t.configMap.forEach(function(t,n){t.level!=e||(i=t)}),i},t.getMagicModelByGridStrenthenNum=function(e,t){var i,n=this.getEquipIntensifyConfig(t);return e==a.GridType.WEAPON?i=n.weapon:e==a.GridType.CORSELET?i=n.corselet:e==a.GridType.BELT?i=n.belt:e==a.GridType.BRACELET_lEFT?i=n.bracelet_left:e==a.GridType.BRACELET_RIGHT?i=n.bracelet_right:e==a.GridType.HELMET?i=n.helmet:e==a.GridType.NECK_LACE?i=n.necklace:e==a.GridType.RING_LEFT?i=n.ring_left:e==a.GridType.RING_RIGHT?i=n.ring_right:e==a.GridType.SHOE&&(i=n.shoe),i},t.prototype.getAllDef=function(){for(var e=0,t=0;t<this.magicList.length;t++){var i=this.magicList[t];i.magicId==r.MagicNameConfig.MagicId.def&&(e+=i.magicValue)}return e},t.configMap=new Map,t}(s.JsonConfigBase);i.IntensifyConfig=c,cc._RF.pop()},{"../model/MagicModel":"MagicModel","./GameConst":"GameConst","./JsonConfigBase":"JsonConfigBase","./MagicNameConfig":"MagicNameConfig"}],IntensifyRefineConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2323fPxylRMqZNSqqluEL2o","IntensifyRefineConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/EquipGridModel"),a=e("../model/JingLianModel"),s=e("./GameConst"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.level=e.level,i.maxlevel=e.maxlevel,i.limit_level=e.limit_level,i.item_atk=e.item_atk,i.atkRefine=e.atkRefine,i.item_def=e.item_def,i.defRefine=e.defRefine,i.zhanli=e.zhanli,i.atknum=e.atknum,i.defnum=e.defnum,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){return this.configMap.get(e.toString())},t.getConfigByLevel=function(e){var t;return this.configMap.forEach(function(i,n){e==i.level&&(t=i)}),t},t.getMaxStoneNum=function(e){var t=this.getConfigById(0).maxlevel,i=0,n=this.getConfigById(t);return e==s.GameConst.JINGLIAN.ATTACK?i=n.atknum:e==s.GameConst.JINGLIAN.DEFENSE&&(i=n.defnum),i},t.getCanJingLianMaxLevelCost=function(e){a.JingLianModel.getModel(e);var t=o.EquipGridModel.getNowIntensifyLevelConfig();t&&t.level;var i,n=this.getConfigById(0).maxlevel;return(i=this.getCurrLevelCost(n,e))>=0?i:0},t.getCanJingLianMaxLevel=function(e,t){var i=a.JingLianModel.getModel(e),n=i.refineLevel,r=o.EquipGridModel.getNowIntensifyLevelConfig(),c=0;r&&(c=r.level);for(var l=this.getConfigById(0).maxlevel,d=i.refineLevel+1;d<=l;d++){var f=this.getConfigByLevel(d);f.limit_level<=c&&(e==s.GameConst.JINGLIAN.ATTACK?t-=f.item_atk[1]:t-=f.item_def[1],t>=0&&n++)}return n},t.getCurrLevelCost=function(e,t){var i=0;if(e>0){var n=this.getConfigByLevel(e);i=t==s.GameConst.JINGLIAN.ATTACK?n.atknum-1:n.defnum-1}return i>=0?i:0},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.IntensifyRefineConfig=r,cc._RF.pop()},{"../model/EquipGridModel":"EquipGridModel","../model/JingLianModel":"JingLianModel","./GameConst":"GameConst","./JsonConfigBase":"JsonConfigBase"}],InvitationConfig:[function(e,t,i){"use strict";cc._RF.push(t,"abf21WDG4NEALxY+NZr+XTF","InvitationConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){}}();i.InvitationInfo=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.InvitationConfigMap.set(Number(i),n)})},t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.Config_Name="shareConfig",t.InvitationConfigMap=new Map,t}(o.JsonConfigBase);i.InvitationConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],InvitationModel:[function(e,t,i){"use strict";cc._RF.push(t,"a0dd9zUj5RETpzjaKBrwV0V","InvitationModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/ProtoConfig"),o=e("../../engine/ProtoUtils"),a=e("../../engine/GameSocket"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../config/GameConfig"),l=e("../manager/RedPointManager"),d=e("./ActivityOpenModel"),f=function(){return function(){}}();i.TInvitationTaskInfo=f;var g=function(){return function(){}}();i.TInvitationPlayerInfo=g;var h=function(){function e(){this.eventIdList=[],this.protos=[],this.invitationcode="",this.todayshare=0,this.bindcode="",this.tasklist=[],this.playlist=[],this.eventIdList=[l.RedPointId.Invitation],l.default.getInstance().addHandler(this),this.protos=[n.ProtoConfig.c_invitation_info]}return e.prototype.checkRedPoint=function(){var t=[],i=!1;e.instance.tasklist.forEach(function(e){if(2==e.state)i=!0;else if(1==e.state&&202==e.id){var t=d.default.getOpenActivityModel(38);t&&1==t.status&&(i=!0)}});var n={id:l.RedPointId.Invitation,type:l.RedPointType.Default,show:i};return t.push(n),t},e.proto_c_invitation_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_invitation_info,t);e.instance.invitationcode=i.getShareCode(),e.instance.todayshare=i.getTodayShare(),e.instance.bindcode=i.getBindCode();var a=i.getTaskListList();e.instance.tasklist=[],e.instance.playlist=[],a.forEach(function(t){var i=new f;i.id=t.getId(),i.cur=t.getCur(),i.total=t.getTotal(),i.state=t.getState(),e.instance.tasklist.push(i)}),i.getPlayerListList().forEach(function(t){var i=new g;i.heroid=t.getHeroid(),i.loginday=t.getLoginday(),i.servername=t.getServername(),i.name=t.getName(),i.level=t.getLevel(),i.fight=t.getFight(),i.prof=t.getProf(),e.instance.playlist.push(i)}),s.EventManager.instance.dispatch(r.CommonEvent.Event_UP_InvitationView)},e.proto_c_invitation_reward=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_invitation_reward,t);i.getRet(),i.getId(),i.getState();e.s_invitation_info()},e.proto_c_invitation_code=function(t){o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_invitation_code,t).getRet();e.s_invitation_info()},e.proto_c_invitation_share=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_invitation_share,t);i.getRet(),i.getCode();e.s_invitation_info()},e.s_invitation_info=function(){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=o.ProtoUtils.Create(n.ProtoConfig.s_invitation_info);a.default.getInstance().sendToSocket(e)}},e.s_invitation_reward=function(e){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=o.ProtoUtils.Create(n.ProtoConfig.s_invitation_reward);t.setId(e),a.default.getInstance().sendToSocket(t)}},e.s_invitation_code=function(e){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=o.ProtoUtils.Create(n.ProtoConfig.s_invitation_code);t.setCode(e),a.default.getInstance().sendToSocket(t)}},e.s_invitation_share=function(){if(c.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=o.ProtoUtils.Create(n.ProtoConfig.s_invitation_share);a.default.getInstance().sendToSocket(e)}},e.instance=new e,e}();i.InvitationModel=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GameConfig":"GameConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./ActivityOpenModel":"ActivityOpenModel"}],InvitationTip:[function(e,t,i){"use strict";cc._RF.push(t,"76b13zFuhtL/prX4E5h+4ic","InvitationTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/RoleInfoModel"),r=e("../../model/ZoneModel"),c=e("../../model/InvitationModel"),l=e("../../model/CostumeModel"),d=e("../../config/GameConfig"),f=e("../../../engine/SpriteFrameComponent"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.screenshotnode=null,t.texture=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){},t.prototype.onInitChild=function(){},t.prototype.onShow=function(){this.screenshotnode=this.node.getChildByName("screenshotnode");var e=this.screenshotnode.getChildByName("share");e.getChildByName("sever").getComponent(cc.Label).string=r.ZoneModel.nowZoneInfoModel.server_name,e.getChildByName("name").getComponent(cc.Label).string=s.default.instance.roleName,e.getChildByName("num").getComponent(cc.Label).string=c.InvitationModel.instance.invitationcode,e.getChildByName("zhiye").getComponent(cc.Sprite).spriteFrame=e.getChildByName("zhiye").getComponent(f.SpriteFrameComponent).spriteFrameList[s.default.instance.occupation-1],l.CostumeModel.setCostSF(e.getChildByName("touxiang").getComponent(cc.Sprite),l.CostumeType.Head),l.CostumeModel.setCostSF(e.getChildByName("touxiangkuang").getComponent(cc.Sprite),l.CostumeType.HeadFM);for(var t=1;t<4;t++){var i=e.getChildByName("bg"+t);d.GameConfig.sdkType==d.SdkType.FengYue?i.getComponent(cc.Sprite).spriteFrame=i.getComponent(f.SpriteFrameComponent).spriteFrameList[1]:d.GameConfig.sdkType==d.SdkType.Xiaotun?i.getComponent(cc.Sprite).spriteFrame=i.getComponent(f.SpriteFrameComponent).spriteFrameList[1]:i.getComponent(cc.Sprite).spriteFrame=i.getComponent(f.SpriteFrameComponent).spriteFrameList[0]}this.screenshotnode.getChildByName("btn").getChildByName("closebtn").on(cc.Node.EventType.TOUCH_END,this.closeView,this),this.screenshotnode.getChildByName("btn").getChildByName("savebtn").active=!1},t.prototype.onSaveBtn=function(){var e=this.screenshotnode.getChildByName("share"),t=Math.floor(e.width),i=Math.floor(e.height),n=e.getChildByName("cameraNode");n&&n.destroy(),(n=new cc.Node).parent=e,n.name="cameraNode";var o=n.addComponent(cc.Camera);n.position=cc.v3(0,0,255),o.cullingMask=4294967295;var a=new cc.RenderTexture;a.initWithSize(t,i,cc.gfx.RB_FMT_S8),this.texture=a,o.targetTexture=this.texture,o.render(e);for(var s=this.texture.readPixels(),r=new Uint8Array(t*i*4),c=4*t,l=0;l<i;l++)for(var d=i-1-l,f=Math.floor(d*t*4),g=l*t*4,h=0;h<c;h++)r[g+h]=s[f+h];if(this.createCanvas(r),cc.sys.isNative){var u=jsb.fileUtils.getWritablePath()+"share.png";jsb.fileUtils.isFileExist(u)&&jsb.fileUtils.removeFile(u),jsb.saveImageData(r,t,i,u)?console.log("\u4fdd\u5b58\u56fe\u50cf\u6570\u636e\u6210\u529f\uff0c\u6587\u4ef6: "+u):console.error("\u4fdd\u5b58\u56fe\u50cf\u6570\u636e\u5931\u8d25!")}},t.prototype.createCanvas=function(e){var t=new cc.Texture2D;t.initWithData(e,32,this.texture.width,this.texture.height);var i=new cc.SpriteFrame;i.setTexture(t);var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=i,n.zIndex=cc.macro.MAX_ZINDEX,n.name="minisp",n.parent=this.screenshotnode;var o=cc.winSize.width,a=cc.winSize.height;n.x=o/2,n.y=a/2,n.on(cc.Node.EventType.TOUCH_START,function(){n.parent=null,n.destroy()}),this.captureAction(n,o,a)},t.prototype.captureAction=function(e,t,i){var n=cc.scaleTo(1,.3),o=cc.v2(t-t/6,i/4),a=cc.moveTo(1,o),s=cc.spawn(n,a);e.runAction(s)},t=o([h],t)}(a.default));i.InvitationTip=u,cc._RF.pop()},{"../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/ViewBase":"ViewBase","../../config/GameConfig":"GameConfig","../../model/CostumeModel":"CostumeModel","../../model/InvitationModel":"InvitationModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ZoneModel":"ZoneModel"}],InvitationView:[function(e,t,i){"use strict";cc._RF.push(t,"21614adeH9FVoe9h5VY8YhC","InvitationView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../prefab/ItemPrefab"),l=e("../../config/InvitationConfig"),d=e("../../config/ITemsConfig"),f=e("../../config/WordConfig"),g=e("../../../engine/EventManager"),h=e("../../event/CommonEvent"),u=e("../../model/InvitationModel"),p=e("../PublicTipView"),m=cc._decorator,C=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.zhiyespriteframes=[],t.inputnode=null,t.inputEditBox=null,t.sharenode=null,t.yaoxinbtn=null,t.yaoqingbtn=null,t.scrollView1=null,t.scrollView2=null,t.tasknodelist=[],t.sharemax=0,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){g.EventManager.instance.on(h.CommonEvent.Event_UP_InvitationView,this.onRefresh,this),this.onRefresh()},t.prototype.onDisable=function(){for(var t=this.scrollView2.getChildByName("view").getChildByName("content"),i=1;i<t.children.length;i++){var n=t.children[i];n&&n.destroy()}e.prototype.onDisable.call(this)},t.prototype.onInitChild=function(){},t.prototype.init=function(){var e=this,t=l.InvitationConfig.InvitationConfigMap.get(101),i=l.InvitationConfig.InvitationConfigMap.get(202);this.sharemax=i.limit_time,this.inputnode=this.node.getChildByName("inputnode"),this.inputEditBox=this.inputnode.getChildByName("inputEditBox").getComponent(cc.EditBox),this.inputEditBox.placeholder=f.WordConfig.getWord(61695),this.inputnode.getChildByName("lingqvbtn").on(cc.Node.EventType.TOUCH_END,this.onLingQvBtn,this);var n=this.inputnode.getChildByName("itemcontent");for(var o in t.res_reward){(h=cc.instantiate(this.itemPrefab)).parent=n,h.getComponent(c.default).initResource(Number(o),t.res_reward[o])}for(var o in t.item_reward){var a=d.ITemsConfig.getITemsConfigById(o);(h=cc.instantiate(this.itemPrefab)).parent=n,h.getComponent(c.default).init(a,!0),h.getComponent(c.default).setNumTxt(t.item_reward[o],!0)}this.sharenode=this.node.getChildByName("sharenode");var g=this.sharenode.getChildByName("shareitem");for(var o in i.res_reward){var h;(h=cc.instantiate(this.itemPrefab)).parent=g,h.getComponent(c.default).initResource(Number(o),i.res_reward[o])}this.yaoxinbtn=this.sharenode.getChildByName("yaoxinbtn"),this.yaoqingbtn=this.sharenode.getChildByName("yaoqingbtn"),this.scrollView1=this.sharenode.getChildByName("scrollView1"),this.scrollView2=this.sharenode.getChildByName("scrollView2");var u=this.scrollView1.getChildByName("view").getChildByName("content"),m=u.getChildByName("item");m.active=!1,l.InvitationConfig.InvitationConfigMap.forEach(function(t,i){if(i>300){var n=cc.instantiate(m);n.active=!0,n.parent=u,e.initTargetItem(n,i,t)}}),this.findChild(this.node,"publicnode/btnwenhao").on(cc.Node.EventType.TOUCH_END,function(){s.default.instance.createView(r.default.gameView.PublicTipView,null,p.RuleType.TYPE_Invitation)}),g.on(cc.Node.EventType.TOUCH_END,this.onShareItem,this),this.yaoxinbtn.on(cc.Node.EventType.TOUCH_END,this.onChangeView,this),this.yaoqingbtn.on(cc.Node.EventType.TOUCH_END,this.onChangeView,this),this.sharenode.getChildByName("sharebtn").on(cc.Node.EventType.TOUCH_END,this.onShareBtn,this),this.scrollView2.on("scroll-to-bottom",this.onUpInfoVieww,this),this.scrollView2.on("bounce-bottom",this.onUpInfoVieww,this),this.onRefresh()},t.prototype.onShareItem=function(){u.InvitationModel.instance.tasklist.forEach(function(e){202==e.id&&2==e.state&&u.InvitationModel.s_invitation_reward(202)})},t.prototype.onLingQvBtn=function(){var e=this.inputEditBox.string;e&&u.InvitationModel.s_invitation_code(e)},t.prototype.onRefresh=function(){var e=this;if(37==this.page)this.inputnode.getChildByName("lingqvbtn").active=0==u.InvitationModel.instance.bindcode.length,this.inputnode.getChildByName("lingqvmax").active=0!=u.InvitationModel.instance.bindcode.length,this.inputEditBox.node.active=0==u.InvitationModel.instance.bindcode.length;else{this.sharenode.getChildByName("yaoqingnum").getComponent(cc.Label).string=u.InvitationModel.instance.playlist.length+"",this.sharenode.getChildByName("yaoqingma").getComponent(cc.Label).string=u.InvitationModel.instance.invitationcode;var t=u.InvitationModel.instance.todayshare>this.sharemax?this.sharemax:u.InvitationModel.instance.todayshare;this.sharenode.getChildByName("fenxianglabel").getComponent(cc.Label).string=t+"/"+this.sharemax;var i=this.scrollView2.getChildByName("view").getChildByName("content"),n=i.getChildByName("item");n.active=!1;for(var o=u.InvitationModel.instance.playlist.length,a=0;a<(o>5?5:o);a++){var s=i.children[a];s||((s=cc.instantiate(n)).parent=i),s.active=!0,this.initYaoQingItem(s,u.InvitationModel.instance.playlist[a])}u.InvitationModel.instance.tasklist.forEach(function(t){202==t.id?(e.sharenode.getChildByName("sharehongdian").active=1==t.state,e.sharenode.getChildByName("lingqvhongdian").active=2==t.state,e.sharenode.getChildByName("lingqvsp").active=3==t.state):e.tasknodelist[t.id]&&e.RefreshTargetItem(e.tasknodelist[t.id],t)})}},t.prototype.onUpInfoVieww=function(){var e=this.scrollView2.getChildByName("view").getChildByName("content"),t=e.getChildByName("item"),i=e.children.length,n=u.InvitationModel.instance.playlist.length,o=n-i>5?i+5:n;if(n>i)for(var a=i;a<o;a++){var s=e.children[a];s||((s=cc.instantiate(t)).parent=e,s.active=!0),this.initYaoQingItem(s,u.InvitationModel.instance.playlist[a])}},t.prototype.initTargetItem=function(e,t,i){var n=e.getChildByName("itemcontent");for(var o in i.res_reward){var a=cc.instantiate(this.itemPrefab);a.scale=.95,a.parent=n,a.getComponent(c.default).initResource(Number(o),i.res_reward[o])}for(var s in i.item_reward){var r=d.ITemsConfig.getITemsConfigById(s),l=cc.instantiate(this.itemPrefab);l.scale=.95,l.parent=n,l.getComponent(c.default).init(r,!0),l.getComponent(c.default).setNumTxt(i.item_reward[s])}e.getChildByName("target").getComponent(cc.RichText).string=i.task,e.getChildByName("lqbtn").on(cc.Node.EventType.TOUCH_END,this.onLQBtn.bind(this,t)),this.tasknodelist[t]=e},t.prototype.RefreshTargetItem=function(e,t){var i=cc.js.formatStr(f.WordConfig.getWord(61694),t.cur,t.total);e.getChildByName("awardnum").getComponent(cc.RichText).string=i,e.getChildByName("lqbtn").active=2==t.state,e.getChildByName("lqmax").active=3==t.state,e.getChildByName("lqno").active=1==t.state},t.prototype.initYaoQingItem=function(e,t){var i=cc.js.formatStr(f.WordConfig.getWord(61696),t.loginday);e.getChildByName("target").getComponent(cc.RichText).string=t.servername+i,e.getChildByName("name").getComponent(cc.Label).string=t.name,e.getChildByName("level").getComponent(cc.Label).string=t.level+f.WordConfig.getWord(61352),e.getChildByName("zhanli").getComponent(cc.Label).string=f.WordConfig.getWord(60376)+t.fight,e.getChildByName("icon_zhiye").getComponent(cc.Sprite).spriteFrame=this.zhiyespriteframes[t.prof-1]},t.prototype.onLQBtn=function(e){u.InvitationModel.s_invitation_reward(e)},t.prototype.changePage=function(e){this.page=e,this.node.getChildByName("inputnode").active=37==e,this.node.getChildByName("sharenode").active=38==e,38==e&&(this.scrollView1.getComponent(cc.ScrollView).scrollToTop(),this.scrollView2.getComponent(cc.ScrollView).scrollToTop(),this.onChangeView())},t.prototype.onShareBtn=function(){u.InvitationModel.instance.todayshare<this.sharemax&&u.InvitationModel.s_invitation_share(),s.default.instance.createView(r.default.gameView.InvitationTip)},t.prototype.onChangeView=function(e){void 0===e&&(e=null);var t=!e||e.target==this.yaoxinbtn;this.yaoxinbtn.color=t?cc.Color.WHITE:cc.Color.GRAY,this.yaoqingbtn.color=t?cc.Color.GRAY:cc.Color.WHITE,this.scrollView1.active=t,this.scrollView2.active=!t},o([_({type:cc.Prefab})],t.prototype,"itemPrefab",void 0),o([_({type:[cc.SpriteFrame]})],t.prototype,"zhiyespriteframes",void 0),t=o([C],t)}(a.default);i.InvitationView=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ITemsConfig":"ITemsConfig","../../config/InvitationConfig":"InvitationConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/InvitationModel":"InvitationModel","../../prefab/ItemPrefab":"ItemPrefab","../PublicTipView":"PublicTipView"}],ItemAcquire:[function(e,t,i){"use strict";cc._RF.push(t,"7bfdbQxKldDZqmHQbMYKk7G","ItemAcquire");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/NewFuncitonConfig"),l=e("../../event/CommonEvent"),d=e("../../model/RoleInfoModel"),f=e("../../prefab/ItemPrefab"),g=e("../../utils/JumpActionUtils"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e,t,i){this.jumpList=t.jump_id,this.model=e,this.count=e?e.itemCnt:0,this.config=e?e.getConfig():t,this.parentPath=i,this.count=4==this.config.kind?d.default.instance.getResourceById(parseInt(this.config.id)):this.count,this.initFindNode()},t.prototype.onShow=function(){this.setTopUI(),this.initView()},t.prototype.initFindNode=function(){this.itemPrefab=this.findChild(this.node,"panel/info/icon").getComponent(f.default),this.countLabel=this.findChild(this.node,"panel/info/count/num").getComponent(cc.Label),this.descLabel=this.findChild(this.node,"panel/info/desc").getComponent(cc.RichText),this.itemCellListNode=this.findChild(this.node,"panel/scrollView/view/content"),this.itemCellNode=this.findChild(this.itemCellListNode,"itemCell")},t.prototype.initView=function(){this.model?this.itemPrefab.init(this.model):this.itemPrefab.init(this.config),this.descLabel.string=this.config.description,this.countLabel.string=this.count.toString();for(var e=this.itemCellListNode.childrenCount>this.jumpList.length?this.itemCellListNode.childrenCount:this.jumpList.length,t=0;t<e;t++){var i=void 0;if(t<this.itemCellListNode.childrenCount?i=this.itemCellListNode.children[t]:(i=cc.instantiate(this.itemCellNode)).parent=this.itemCellListNode,i.active=t<this.jumpList.length,t<this.jumpList.length){var n=c.NewFuncitonConfig.getFunctionConfig(this.jumpList[t].toString());this.initItemCell(i,n)}}},t.prototype.initItemCell=function(e,t){var i=e.getChildByName("name").getComponent(cc.Label),n=e.getChildByName("desc").getComponent(cc.Label),o=e.getChildByName("btnJump");i.string="\u3010"+t.name+"\u3011",n.string=t.desc,o.active=t.btnType==c.BtnType.Jump,this.onAddEvent(o,this.onClickJump.bind(this,t))},t.prototype.onClickJump=function(e){a.EventManager.instance.dispatch(l.CommonEvent.Event_Word_refresh),g.default.doAction(e.id,this.config),this.parentPath&&s.default.instance.closeView(this.parentPath),this.closeView()},t=o([u],t)}(r.default));i.default=p,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/NewFuncitonConfig":"NewFuncitonConfig","../../event/CommonEvent":"CommonEvent","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab","../../utils/JumpActionUtils":"JumpActionUtils"}],ItemGiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c7be3am9cVCwq2DFNp42Aqh","ItemGiftConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configMap=new Map,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=i,t.configMap.set(i,o)})},t.getConfigById=function(e){return this.configMap.get(e)},t.Config_Name="itemgiftConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ItemIfoLimitTtime:[function(e,t,i){"use strict";cc._RF.push(t,"3cdc98JJ8VMm5dJKKYMxO6m","ItemIfoLimitTtime");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../config/WordConfig"),r=e("../model/ServerTime"),c=cc._decorator,l=c.ccclass,d=c.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeLimit=null,t}return n(t,e),t.prototype.setTimeLimitLabel=function(e){e&&e>0?(this.timeLimit.node.active=!0,this.timeLimit.string=cc.js.formatStr(s.WordConfig.getWord(61641),a.default.fomatTimeBySecond2((e-r.ServerTime.getServerTime())/1e3,!1))):this.timeLimit.node.active=!1},t.prototype.start=function(){},o([d(cc.RichText)],t.prototype,"timeLimit",void 0),t=o([l],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../config/WordConfig":"WordConfig","../model/ServerTime":"ServerTime"}],ItemInfoExpBallView:[function(e,t,i){"use strict";cc._RF.push(t,"f0152uNnvxIz7FXu9kOOt9t","ItemInfoExpBallView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ViewBase"),c=e("../config/WordConfig"),l=e("../model/ItemInfoModel"),d=e("../model/ChatRoomModel"),f=e("../model/RoleInfoModel"),g=e("../network/SocketClient"),h=e("../prefab/ItemPrefab"),u=e("../utils/UIHelper"),p=e("../../engine/EventManager"),m=e("../event/CommonEvent"),C=e("./ItemIfoLimitTtime"),_=e("../config/GameConst"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxNum=999,t.mult=1,t.zhanshi=0,t.nowBuyNum=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.progress=this.findChild(this.node,"view/buttom/progress"),this.count=this.findChild(this.node,"view/buttom/count"),this.level=this.findChild(this.node,"view/buttom/level"),this.usewindow=this.findChild(this.node,"usewindow"),this.amountEditBox=this.findChild(this.node,"usewindow/view/middle/pnlEdit/amountEditBox").getComponent(cc.EditBox),this.amountEditBox.node.on("text-changed",this.onTextChange,this)},t.prototype.onEnable=function(){var e=this;p.EventManager.instance.on(_.EVENT_NAME.BAG_ADD,this.handlerUpdate,this),this.onAddEvent(this.findChild(this.node,"view/buttom/btn/btn_zhijielingqu"),this.onClickUse.bind(this)),this.onAddEvent(this.findChild(this.node,"view/buttom/btn/btn_shuangbeilingqu"),this.onClickDoubleUse.bind(this)),this.onAddEvent(this.findChild(this.node,"view/top/btn_close"),this.onClickClose.bind(this)),this.onAddEvent(this.findChild(this.node,"usewindow/darkLayer"),this.hideUseWindow.bind(this)),this.onAddEvent(this.findChild(this.node,"usewindow/view/top/btn_close"),this.hideUseWindow.bind(this)),this.onAddEvent(this.findChild(this.node,"usewindow/view/middle/pnlEdit/btn_jian"),this.onCLickPre.bind(this)),this.onAddEvent(this.findChild(this.node,"usewindow/view/middle/pnlEdit/btn_jia"),this.onClickNext.bind(this)),this.onAddEvent(this.findChild(this.node,"usewindow/view/middle/pnlEdit/btn_max"),this.onClickMax.bind(this)),this.onAddEvent(this.findChild(this.node,"usewindow/view/buttom/btn/btn_zhijielingqu"),this.onClickGet.bind(this)),this.onAddEvent(this.findChild(this.node,"usewindow/view/buttom/btn/btn_shuangbeilingqu"),this.onClickDoubleGet.bind(this)),this.onAddEvent(this.findChild(this.node,"view/buttom/btnZhanShi"),function(){e.model.itemname=c.WordConfig.getWord(61282),p.EventManager.instance.dispatch(m.CommonEvent.Event_ADD_ZHANSHI,e.model),e.closeView()})},t.prototype.onSocketRespMsg=function(e,t){e==s.ProtoConfig.c_get_bag_iteminfo||e==s.ProtoConfig.c_req_use_exp_ball&&this.closeView()},t.prototype.onShow=function(){this.setTopUI(),g.default.s_get_bag_iteminfo(parseInt(this.modelId)),this.usewindow.active=!1,this.refresh()},t.prototype.onInitChild=function(e){this.model=e,this.modelId=this.model.itemId,this.config=this.model.getConfig(),this.zhanshi=e.isExhibition?e.isExhibition:0,a.Logger.log("\u805a\u7075\u73e0====",this.model),this.node.getComponent(C.default).setTimeLimitLabel(this.model.end_time)},t.prototype.refresh=function(){a.Logger.log("\u805a\u7075\u73e0====\u5237\u65b0=="),this.model=l.default.getItemByid(this.modelId);var e=l.default.getItemAmount(this.config.id);if(this.model||(this.model=d.ChatRoomModel.getItemByid(this.modelId),e=1),this.model&&e>0)if(this.findChild(this.node,"view/middle/ItemPrefab").getComponent(h.default).init(this.model),this.findChild(this.node,"view/middle/itemDes").getComponent(cc.RichText).string=this.config.description,this.count.getComponent(cc.RichText).string=cc.js.formatStr(c.WordConfig.getWord(60439),this.model.itemCnt),this.level.getComponent(cc.RichText).string=cc.js.formatStr(c.WordConfig.getWord(60440),this.config.level),this.level.active=this.config.level>1,"expball"==this.config.position){this.progress.active=!0;var t=0;for(var i in this.config.magic_value[0])t=this.config.magic_value[0][i];this.progress.getComponent(cc.RichText).string=cc.js.formatStr(c.WordConfig.getWord(60441),this.model.exp,t),this.findChild(this.node,"view/buttom/btn").active=!1}else this.progress.active=!1,this.findChild(this.node,"view/buttom/btn").active=0==this.zhanshi;else this.closeView();this.findChild(this.node,"view/buttom/btnZhanShi").active=1==this.zhanshi},t.prototype.onClickUse=function(){this.showUseWindow(1)},t.prototype.onClickDoubleUse=function(){this.showUseWindow(2)},t.prototype.onClickGet=function(){g.default.s_req_use_exp_ball(this.model.itemType,this.nowBuyNum)},t.prototype.onClickDoubleGet=function(){this.config.expball*this.nowBuyNum<=f.default.instance.getGold()?g.default.s_req_use_exp_ball(this.model.itemType,this.nowBuyNum,1):c.WordConfig.showWord(60115)},t.prototype.showUseWindow=function(e){void 0===e&&(e=1),this.usewindow.active=!0,this.maxNum=this.model.itemCnt<=999?this.model.itemCnt:999,this.findChild(this.usewindow,"view/middle/ItemPrefab").getComponent(h.default).init(this.model),this.findChild(this.usewindow,"view/buttom/count").getComponent(cc.RichText).string=cc.js.formatStr(c.WordConfig.getWord(60439),this.model.itemCnt),this.nowBuyNum=1,1==e?(this.findChild(this.usewindow,"view/buttom/btn/btn_zhijielingqu").active=!0,this.findChild(this.usewindow,"view/buttom/costPanel").active=!1,this.findChild(this.usewindow,"view/buttom/btn/btn_shuangbeilingqu").active=!1,this.mult=1):(this.findChild(this.usewindow,"view/buttom/costPanel").active=!0,this.findChild(this.usewindow,"view/buttom/btn/btn_zhijielingqu").active=!1,this.findChild(this.usewindow,"view/buttom/btn/btn_shuangbeilingqu").active=!0,this.mult=2),this.shopWindowRefresh()},t.prototype.hideUseWindow=function(){this.usewindow.active=!1},t.prototype.onClickClose=function(){this.closeView()},t.prototype.shopWindowRefresh=function(){this.amountEditBox.string=this.nowBuyNum+"";var e=this.config.expball*this.nowBuyNum,t="#ffffff";t=e<=f.default.instance.getGold()?"#ffffff":"#ff0000",this.findChild(this.node,"usewindow/view/buttom/costPanel/cost").getComponent(cc.RichText).string=cc.js.formatStr(c.WordConfig.getWord(60442),t,e);var i=u.UIHelper.tranNumber(this.config.magic_value[0]*this.nowBuyNum*this.mult);this.findChild(this.node,"usewindow/view/middle/itemDes").getComponent(cc.RichText).string=cc.js.formatStr(c.WordConfig.getWord(60443),i)},t.prototype.onTextChange=function(){this.nowBuyNum=parseInt(this.amountEditBox.string),this.shopWindowRefresh()},t.prototype.onClickMax=function(){this.nowBuyNum=999,this.shopWindowRefresh()},t.prototype.onClickNext=function(){this.nowBuyNum++,this.shopWindowRefresh()},t.prototype.onCLickPre=function(){this.nowBuyNum>1&&(this.nowBuyNum--,this.shopWindowRefresh())},t.prototype.update=function(){void 0!=this.config&&(this.nowBuyNum=parseInt(this.amountEditBox.string),(isNaN(this.nowBuyNum)||this.nowBuyNum<=0)&&(this.nowBuyNum=1,this.amountEditBox.string=this.nowBuyNum+"",this.shopWindowRefresh()),this.nowBuyNum>=this.maxNum&&(this.nowBuyNum=this.maxNum,this.amountEditBox.string=this.nowBuyNum+"",this.shopWindowRefresh()))},t.prototype.handlerUpdate=function(e,t){e.itemId==this.modelId&&(this.onInitChild(e),this.refresh())},t=o([y],t)}(r.default));i.default=b,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ChatRoomModel":"ChatRoomModel","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/UIHelper":"UIHelper","./ItemIfoLimitTtime":"ItemIfoLimitTtime"}],ItemInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"d688eCd7wtOgINV5+1snI1B","ItemInfoModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/EventManager"),a=e("../../engine/Logger"),s=e("../../engine/UIManager"),r=e("../config/BaGuaEquipConfig"),c=e("../config/EquipConfig"),l=e("../config/GameConfig"),d=e("../config/GameConst"),f=e("../config/ITemsConfig"),g=e("../config/MagicNameConfig"),h=e("../config/MapConfig"),u=e("../config/RuneConfig"),p=e("../config/SkillConfig"),m=e("../config/SpecialRingConfig"),C=e("../config/ViewConfig"),_=e("../config/WordConfig"),v=e("../event/CommonEvent"),y=e("../manager/SkillManager"),b=e("../network/SocketClient"),I=e("../sdk/SdkHelper"),M=e("../utils/UIHelper"),w=e("./BlessModel"),k=e("./MagicModel"),S=e("./PkModel"),P=e("./RoleInfoModel"),E=e("./ServerTime"),L=function(){function e(){}return e.create=function(t,i,n,o,a,s,r,c,l,f,g){void 0===i&&(i=d.GameConst.ITEM_KIND.EQUIP),void 0===n&&(n=""),void 0===o&&(o=0),void 0===a&&(a=d.GameConst.QUALITY.WHITE),void 0===s&&(s=!0),void 0===r&&(r=!1),void 0===c&&(c=0),void 0===l&&(l=[]),void 0===f&&(f=[]),void 0===g&&(g=-1);var h=new e;return h.role=t,h.itemKind=i,h.itemType=n,h.itemCnt=o,h.quality=a,h.isNew=s,h.isLock=r,h.index=c,h.baseAddAttrList=l,h.randAttrList=f,h.gridId=g,h},e}();i.AddItemParamStruct=L;var T=function(){function e(){}return e.create=function(t,i,n){void 0===n&&(n=-1);var o=new e;return o.itemId=t,o.amount=i,o.bagIndex=n,o},e}();i.DecItemParamStruct=T;var R=function(){return function(){}}();i.FuWenNeedModel=R;var N=function(){function e(){this.isExhibition=0,this.baseAddAttrList=[],this.randAttrList=[],this.gridId=2,this.fight=666,this.end_time=0,this.fuwenId=1,this.fuwenAtriList=[],this.fuwenNeedList=[],this.blessAtttList=[],this.embedRuneList=[],this.exp=0}return e.create=function(t,i,n,o,a,s,r,c,l,f,g,h,u){void 0===t&&(t=d.GameConst.ITEM_KIND.EQUIP),void 0===i&&(i=""),void 0===n&&(n=0),void 0===o&&(o=d.GameConst.QUALITY.WHITE),void 0===a&&(a=!0),void 0===s&&(s=!1),void 0===r&&(r=0),void 0===c&&(c=[]),void 0===l&&(l=[]),void 0===f&&(f=-1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===u&&(u=0);var p=new e;return p.itemKind=t,p.itemType=i,p.itemCnt=n,p.quality=o,p.isNew=a,p.isLock=s,p.index=r,p.baseAddAttrList=c,p.randAttrList=l,p.gridId=f,p.luckyValue=g,p.xilianTime=h,p.xilianCost=u,p},e.createDingZhiEquip=function(t,i){var o=new e,a=c.EquipConfig.getEquipConfigById(t);if(o.itemKind=d.GameConst.ITEM_KIND.EQUIP,o.itemType=t,o.itemId="-"+n.default.now(),o.quality=void 0!=i?i:a.d_pinzhi,o.itemCnt=0,o.baseAddAttrList=[],a.d_jipin)for(var s in a.d_jipin){if(a.d_jipin[s]>0)(r=k.default.create(parseInt(s),a.d_jipin[s])).magicId==g.MagicNameConfig.MagicId.atk?r.magicValue-=a.atk:r.magicId==g.MagicNameConfig.MagicId.mag?r.magicValue-=a.mag:r.magicId==g.MagicNameConfig.MagicId.spt?r.magicValue-=a.spt:r.magicId==g.MagicNameConfig.MagicId.def?r.magicValue-=a.def:r.magicId==g.MagicNameConfig.MagicId.hp&&(r.magicValue-=a.hp),o.baseAddAttrList.push(r)}for(var s in o.randAttrList=[],a.d_suiji)if(a.d_suiji[s]>0){var r=k.default.create(parseInt(s),a.d_suiji[s]);o.randAttrList.push(r)}return o},e.createBaGuaEquip=function(t){var i=new e,o=f.ITemsConfig.getITemsConfigById(t),a=r.default.getConfigById(t);for(var s in i.itemId="-"+n.default.now(),i.itemKind=d.GameConst.ITEM_KIND.BaGua,i.itemType=t,i.quality=o.quality,i.itemCnt=0,i.gridId=-1,i.baseAddAttrList=[],a.attr){var c=k.default.create(parseInt(s),a.attr[s]);c.magicValue=a.attr[s],i.baseAddAttrList.push(c)}return i.fight=r.default.getBaGuaEquipPower(a),i},e.createFuWenEquip=function(t){var i=new e,o=c.EquipConfig.getEquipConfigById(t);for(var a in i.itemId="-"+n.default.now(),i.itemKind=d.GameConst.ITEM_KIND.EQUIP,i.itemType=t,i.quality=o.d_pinzhi,i.gridId=-1,i.itemCnt=1,i.baseAddAttrList=[],o.d_jipin){if(o.d_jipin[a]>0)(f=k.default.create(parseInt(a),o.d_jipin[a])).magicId==g.MagicNameConfig.MagicId.atk?f.magicValue-=o.atk:f.magicId==g.MagicNameConfig.MagicId.mag?f.magicValue-=o.mag:f.magicId==g.MagicNameConfig.MagicId.spt?f.magicValue-=o.spt:f.magicId==g.MagicNameConfig.MagicId.def?f.magicValue-=o.def:f.magicId==g.MagicNameConfig.MagicId.hp&&(f.magicValue-=o.hp),i.baseAddAttrList.push(f)}i.fuwenId=o.d_rune,i.fuwenActive=!1,i.fuwenNeedList=[];for(var s=u.RuneConfig.getRuneById(i.fuwenId),r=0;r<s.rune.length;r++){var l=new R;l.index=r,l.item_type=s.rune[r],i.fuwenNeedList[r]=l}i.fuwenAtriList=[];for(r=0;r<s.property.length;r++){var f=new k.default;i.fuwenAtriList[r]=f,f.magicId=s.property[r],f.magicValue=s.pro_min[r],f.min=s.pro_min[r],f.magicId==g.MagicNameConfig.MagicId.skill_all?(f.magicValue=Math.ceil(s.pro_min[r]/100),f.max=Math.ceil(s.pro_max[r]/100)):f.max=s.pro_max[r],f.color=d.GameConst.QUALITY.ORANGE}return i.fight=c.EquipConfig.getLunHuiZhiLi(t,i.baseAddAttrList,i.fuwenAtriList),i},e.createSpecialRing=function(t){var i=new e;c.EquipConfig.getEquipConfigById(t);i.itemId="-"+n.default.now(),i.itemKind=d.GameConst.ITEM_KIND.EQUIP,i.itemType=t;var o=m.SpecialRingConfig.getConfigByEquipId(t);return i.quality=o.quality,i.itemCnt=0,i.gridId=-1,i.itemCnt=1,i.baseAddAttrList=[],i.blessAtttList=[],i.fight=o.zhanli[1],i.specialEffect=o.ability,i.randAttrList=[],i},e.req_item_listByServer=function(t,i){void 0===i&&(i=P.default.instance);e.proto2ModelList(t);P.default.saveToLocalStorage()},e.updateItemInfoById=function(e){var t=this;e.getItemlistList().forEach(function(e){var i=t.proto2Model(e),n=t.getItemByid(i.itemId);n=i,P.default.instance.itemInfoList.every(function(e,t){return e.itemId!=n.itemId||(P.default.instance.itemInfoList[t]=n,!1)}),P.default.instance.updateBagModel(n)})},e.updateItemInfoByServer=function(t,i){void 0===i&&(i=P.default.instance);for(var n=t.getDeleteItemIdListList(),r=t.getUpdateitemlistList(),c=t.getAdditemlistList(),l=t.getUpdateEquipList(),f=[],g=0;g<n.length;g++){var h=n[g].getItemid(),u=this.getItemByid(h+"");u&&f.push(T.create(h+"",u.itemCnt))}f.length>0&&this.decItems(f);for(g=0;g<c.length;g++){var p=c[g],m=this.proto2Model(p);P.default.instance.itemInfoList.push(m),P.default.instance.addItemToBag(m,m.itemCnt),o.EventManager.instance.dispatch(d.EVENT_NAME.BAG_ADD,m,m.itemCnt),m.itemType==S.PkModel.Item_LeitaiLing&&o.EventManager.instance.dispatch(v.CommonEvent.Event_up_c_arena_info)}for(g=0;g<r.length;g++){var _=r[g],y=_.getId(),b=_.getUpdateNum(),I=_.getNew(),M=this.getItemByid(y+"");M.exp=_.getExp(),M.end_time=1e3*_.getEndTime(),M.isNew=1==I,P.default.instance.updateBagModel(M),b>0?(M.itemCnt+=b,P.default.instance.addItemToBag(M,b)):b<0&&this.decItem(y+"",Math.abs(b)),o.EventManager.instance.dispatch(d.EVENT_NAME.BAG_ADD,M,M.itemCnt)}for(g=0;g<l.length;g++)for(var w=this.proto2Model(l[g]),k=0;k<P.default.instance.itemInfoList.length;k++)w.itemId==P.default.instance.itemInfoList[k].itemId&&(P.default.instance.itemInfoList[k]=w,P.default.instance.updateBagModel(w));o.EventManager.instance.dispatch(v.CommonEvent.Event_UserInfoRefresh);var E=e.getItem("I6004");E&&E.isNew&&0==P.default.instance.showFangYu&&(P.default.instance.showFangYu++,s.default.instance.createView(C.default.gameView.ZuiQiangFangYuGiftView,null,E),o.EventManager.instance.dispatch(v.CommonEvent.Event_ZUIQIANG_ITEM_RESH));var L=e.getItem("I6005");L&&L.isNew&&0==P.default.instance.showJiNeng&&(P.default.instance.showJiNeng++,s.default.instance.createView(C.default.gameView.ZuiQiangJiNengGiftView,null,L),o.EventManager.instance.dispatch(v.CommonEvent.Event_ZUIQIANG_ITEM_RESH));var R=e.getItem("I6008");R&&R.isNew&&0==P.default.instance.showQunGong&&(P.default.instance.showQunGong++,s.default.instance.createView(C.default.gameView.ZuiQiangQunGongGiftView,null,R),o.EventManager.instance.dispatch(v.CommonEvent.Event_ZUIQIANG_ITEM_RESH)),a.Logger.log("updateItemInfoByServer====",P.default.instance.itemInfoList),o.EventManager.instance.dispatch(v.CommonEvent.Event_Equip),o.EventManager.instance.dispatch(v.CommonEvent.Event_Item_update)},e.proto2ModelList=function(e){var t=e.getItemlistList(),i=[];P.default.instance.isInitBag||(P.default.instance.bagRemainingnumber=P.default.instance.bagAMount,P.default.instance.bagModelList=new Array(P.default.instance.bagAMount));for(var n=0;n<t.length;n++){var o=t[n],a=this.proto2Model(o);i.push(a)}return P.default.instance.itemInfoList=i,P.default.instance.isInitBag||(P.default.instance.isInitBag=!0),P.default.instance.sortBag(),P.default.saveToLocalStorage(),i},e.sort=function(e){var t=function(e){var t=e.slice(1,e.length);return parseInt(t)},i=function(e,i){return e.quality==i.quality?t(e.itemType)-t(i.itemType):i.quality-e.quality},n=function(e,t){var i=e.getConfig(),n=t.getConfig();return i.world==n.world?i.pro==n.pro?i.position==n.position?i.level==n.level?t.quality-e.quality:n.level-i.level:i.position-n.position:i.pro==d.GameConst.OCCUPATION.None?-1:n.pro==d.GameConst.OCCUPATION.None?1:i.pro==P.default.instance.occupation?-1:n.pro==P.default.instance.occupation?1:i.pro-n.pro:n.world-i.world};return e.sort(function(e,t){return e.isNew=!1,t.isNew=!1,e.itemKind==t.itemKind?1==e.itemKind?i(e,t):n(e,t):e.itemKind-t.itemKind}),e},e.prototype.proto2Model=function(e){if(this.itemId=e.getItemid()+"",this.itemKind=e.getItemkind(),this.itemType=e.getItemtype(),this.itemCnt=e.getItemcnt(),this.isSell=e.getIssell(),this.itemKind==d.GameConst.ITEM_KIND.EQUIP)this.quality=e.getQuality();else{var t=f.ITemsConfig.getITemsConfigById(this.itemType);this.quality=t.quality}1==e.getIsnew()?this.isNew=!0:this.isNew=!1,1==e.getIslock()?this.isLock=!0:this.isLock=!1,this.gridId=e.getGridId(),this.baseAddAttrList=[];for(var i=e.getBaseaddattrlistList(),n=0;n<i.length;n++){var o=i[n].getK(),a=i[n].getV(),s=k.default.create(o,a);this.baseAddAttrList[n]=s}i=e.getRandattrlistList(),this.randAttrList=[];for(n=0;n<i.length;n++){o=i[n].getK(),a=i[n].getV();var r=i[n].getPos();s=k.default.create(o,a);this.randAttrList[r-1]=s}this.fight=e.getFight(),this.end_time=1e3*e.getEndTime();var c=e.getRuneMsg();this.fuwenId=c.getRuneId(),this.fuwenActive=c.getIsActive(),this.fuwenAtriList=k.default.proto2RunList(c.getPropertyListList()),this.fuwenNeedList=[];var l=c.getNeedRuneListList();for(n=0;n<l.length;n++){var g=new R;g.index=l[n].getIndex(),g.item_type=l[n].getItemType(),this.fuwenNeedList[n]=g}this.fuwenNeedList.sort(function(e,t){return e.index-t.index}),this.embedRuneList=[];var h=c.getEmbedRunelistList();for(n=0;n<this.fuwenNeedList.length;n++)if(this.fuwenActive)this.embedRuneList[this.fuwenNeedList[n].index]=1;else for(var u=0;u<h.length;u++){if(this.fuwenNeedList[n].index==h[u].getIndex()){this.embedRuneList[this.fuwenNeedList[n].index]=1;break}this.embedRuneList[this.fuwenNeedList[n].index]=0}this.blessAtttList=[];var p=e.getBlessattrlistList();for(n=0;n<p.length;n++){var m=new w.default;m.blessId=p[n].getBlessid(),m.blessValue=p[n].getBlessattr(),this.blessAtttList[n]=m}return this.luckyValue=e.getLuckyvalue(),this.xilianCost=e.getXiliancost(),this.xilianTime=e.getXiliantime(),this.remodeLuckyValue=e.getRemodeluckyvalue(),this.exp=e.getExp(),this.specialEffect=e.getSpecialeffect(),this},e.proto2Model=function(t){var i=new e;return i.proto2Model(t),i},e.deserializeBinaryToModelList=function(e){for(var t=[],i=0;i<e.length;i++)e[i]?t[i]=this.deserializeBinaryToModel(e[i]):t[i]=null;return t},e.deserializeBinaryToModel=function(t){var i=new e;i.itemId=t.itemId,i.itemKind=t.itemKind,i.itemType=t.itemType,i.quality=t.quality,i.gridId=t.gridId,i.index=t.index,i.isLock=t.isLock,i.isNew=t.isNew,i.isSell=t.isSell,i.itemCnt=t.itemCnt;var n=t.baseAddAttrList;i.baseAddAttrList=[];for(var o=0,a=n;o<a.length;o++){var s=a[o],r=k.default.create(s.magicId,s.magicValue);i.baseAddAttrList.push(r)}var c=t.randAttrList;i.randAttrList=[];for(var l=0,d=c;l<d.length;l++){s=d[l],r=k.default.create(s.magicId,s.magicValue);i.randAttrList.push(r)}i.fuwenAtriList=[];for(var f=0,g=t.fuwenAtriList;f<g.length;f++){s=g[f];(r=k.default.create(s.magicId,s.magicValue)).min=s.min,r.max=s.max,r.color=s.color,r.pos=s.pos,i.fuwenAtriList.push(r)}for(var h=0,u=t.blessAtttList;h<u.length;h++){s=u[h],r=k.default.create(s.blessId,s.blessValue);var p=new w.default;p.blessId=r.magicId,p.blessValue=r.magicValue,i.blessAtttList.push(p)}return i.end_time=t.end_time,i.fight=t.fight,i.fuwenId=t.fuwenId,i.fuwenNeedList=t.fuwenNeedList,i},e.tryAddConfigItems=function(e){for(var t=new Array,i=0;i<e.length;i++){var n=e[i];for(var o in n){var a=f.ITemsConfig.getITemsConfigById(o);t.push(L.create(P.default.instance,a.kind,a.id,n[o],a.quality))}}if(P.default.instance.tryAddItemsToBag(t))return!0;_.WordConfig.showWord(60001)},e.addItems=function(t,i){if(void 0===i&&(i=P.default.instance),i.tryAddItemsToBag(t)){for(var n=0;n<t.length;n++){var a=t[n],s=e.addItemToData(a);a.role.addItemToBag(s,a.itemCnt),o.EventManager.instance.dispatch(d.EVENT_NAME.BAG_ADD,s,a.itemCnt)}return P.default.saveToLocalStorage(),!0}return _.WordConfig.showWord(60001),!1},e.addItemToData=function(t){var i;t.itemKind==d.GameConst.ITEM_KIND.ITEM&&((i=this.getItem(t.itemType,t.role))&&(f.ITemsConfig.getITemsConfigById(t.itemType).stack==f.ITemsConfig.StackType.Yes||(i=null)));return i?(i.itemCnt+=t.itemCnt,i.isNew=t.isNew):((i=new e).itemId=E.ServerTime.getServerTime()+"-"+this.randomId,this.randomId++,t.role.itemInfoList.push(i),i.itemKind=t.itemKind,i.itemType=t.itemType,i.itemCnt=t.itemCnt,i.quality=t.quality,i.isNew=t.isNew,i.isLock=t.isLock,i.index=t.index,i.baseAddAttrList=t.baseAddAttrList,i.randAttrList=t.randAttrList,i.gridId=t.gridId),i},e.getItem=function(e,t){void 0===t&&(t=P.default.instance);for(var i=0;i<t.itemInfoList.length;i++){var n=t.itemInfoList[i];if(e==n.itemType)return n}},e.getItemByid=function(e,t){void 0===t&&(t=P.default.instance);for(var i=0;i<t.itemInfoList.length;i++){var n=t.itemInfoList[i];if(e==n.itemId)return n}},e.getItemAmountById=function(t,i){void 0===i&&(i=P.default.instance);var n=e.getItemByid(t);return n?n.itemCnt:0},e.getItemLuckyById=function(t,i){void 0===i&&(i=P.default.instance);var n=e.getItemByid(t);return n?n.luckyValue:0},e.getItemTimesById=function(t,i){void 0===i&&(i=P.default.instance);var n=e.getItemByid(t);return n?n.xilianTime:0},e.getItemCostById=function(t,i){void 0===i&&(i=P.default.instance);var n=e.getItemByid(t);return n?n.xilianCost:0},e.decItem=function(e,t,i,n,o){void 0===i&&(i=-1),void 0===n&&(n=P.default.instance),void 0===o&&(o=!0),this.decItemByParamStruct(T.create(e,t,i),n,o)},e.decItemByParamStruct=function(t,i,n){void 0===i&&(i=P.default.instance),void 0===n&&(n=!0);var a=e.decItemToData(t.itemId,t.amount,i);i.decItemToBag(a,t.amount,t.bagIndex),a&&(o.EventManager.instance.dispatch(d.EVENT_NAME.BAG_CUT,a,t.amount),"I6004"!=a.itemType&&"I6005"!=a.itemType&&"I6008"!=a.itemType||o.EventManager.instance.dispatch(v.CommonEvent.Event_ZUIQIANG_ITEM_RESH),n&&P.default.saveToLocalStorage())},e.decItems=function(t,i,n){void 0===i&&(i=P.default.instance),void 0===n&&(n=!0);for(var a=!1,s=0;s<t.length;s++){var r=t[s],c=e.decItemToData(r.itemId,r.amount,i);i.decItemToBag(c,r.amount,r.bagIndex),"I6004"!=c.itemType&&"I6005"!=c.itemType&&"I6008"!=c.itemType||(a=!0)}a&&o.EventManager.instance.dispatch(v.CommonEvent.Event_ZUIQIANG_ITEM_RESH),o.EventManager.instance.dispatch(d.EVENT_NAME.BAG_CUT),n&&P.default.saveToLocalStorage()},e.decItemToData=function(e,t,i){void 0===i&&(i=P.default.instance);for(var n=0;n<i.itemInfoList.length;n++){var o=i.itemInfoList[n];if(e==o.itemId)return o.itemCnt-t<1?i.itemInfoList.splice(n,1):o.itemCnt-=t,o}return null},e.getItemAmount=function(e,t){void 0===t&&(t=P.default.instance);for(var i=0;i<t.itemInfoList.length;i++){var n=t.itemInfoList[i];if(e==n.itemType)return n.itemCnt||0}return 0},e.getBagEquipAmount=function(e,t){void 0===t&&(t=P.default.instance);for(var i=0,n=0;n<t.itemInfoList.length;n++){var o=t.itemInfoList[n];e==o.itemType&&o.itemKind==d.GameConst.ITEM_KIND.EQUIP&&o.gridId<0&&!o.isLock&&i++}return i},e.getItemLeftTimeByType=function(e,t){void 0===t&&(t=P.default.instance);for(var i=0;i<t.itemInfoList.length;i++){var n=t.itemInfoList[i];if(e==n.itemType)return(n.end_time-E.ServerTime.getServerTime())/1e3||0}return 0},e.getQuality=function(e){return d.GameConst.qualityNameArr(e)},e.prototype.getBaseAddValue=function(e){for(var t=0,i=0;i<this.baseAddAttrList.length;i++){var n=this.baseAddAttrList[i];if(n.magicId==e){t=n.magicValue;break}}return t},e.prototype.getBaseTotalValue=function(e){for(var t=0,i=[g.MagicNameConfig.MagicId.atk,g.MagicNameConfig.MagicId.mag,g.MagicNameConfig.MagicId.spt,g.MagicNameConfig.MagicId.def,g.MagicNameConfig.MagicId.hp],n=c.EquipConfig.getEquipConfigById(this.itemType),o=0;o<this.baseAddAttrList.length;o++){var a=this.baseAddAttrList[o];if(a.magicId==e){t=a.magicValue;for(var s=0;s<i.length;s++)i[o]==g.MagicNameConfig.MagicId.atk?t+=n.atk:i[o]==g.MagicNameConfig.MagicId.mag?t+=n.mag:i[o]==g.MagicNameConfig.MagicId.spt?t+=n.spt:i[o]==g.MagicNameConfig.MagicId.def?t+=n.def:i[o]==g.MagicNameConfig.MagicId.hp&&(t+=n.hp);break}}return t},e.prototype.useArticle=function(e,t){void 0===e&&(e=1),void 0===t&&(t=-1);var i=this.getConfig();if(P.default.instance.level<i.level)_.WordConfig.showWord(60253);else if("gold"==i.position)l.GameConfig.connectServer&&(I.default.sdkCustomAction(14,i.magic_value*e),b.default.req_use_item(this.itemId,e));else if("gem"==i.position)l.GameConfig.connectServer&&b.default.req_use_item(this.itemId,e);else if("book"==i.position){if(0==P.default.instance.updateSkill(i.skillid,1,!0,0,P.default.instance,!1))return void _.WordConfig.showWord(60254);if(p.SkillConfig.getSkillConfigById(i.skillid,i.level).type,p.SkillConfig.SkillType.ZhuDong,y.default.instance.getSkillModelById(i.skillid,P.default.instance).isActive)return void _.WordConfig.showWord(60119);l.GameConfig.connectServer&&(I.default.sdkCustomAction(34,1),_.WordConfig.showWord(60255),b.default.req_skill_lev_up(i.skillid))}else if("kpower"==i.position)l.GameConfig.connectServer&&b.default.req_use_item(this.itemId,e);else if(-1!=i.name.search("\u793c\u5305")){if(l.GameConfig.connectServer){for(var n=this.getConfig().magic_value,o=new Array,a=0;a<n.length;a++)for(var s in n[a]){var r=n[a][s]||1,g=c.EquipConfig.getEquipConfigById(s);if(g){var h=L.create(P.default.instance,g.kind,g.id,1,r);o.push(h)}else{var u=f.ITemsConfig.getITemsConfigById(s);o.push(L.create(P.default.instance,u.kind,u.id,r,u.quality))}}if(P.default.instance.tryAddItemsToBag(o)){for(a=0;a<o.length;a++){var m=o[a];m.itemKind==d.GameConst.ITEM_KIND.ITEM||(m.itemKind,d.GameConst.ITEM_KIND.EQUIP)}this.checkAppStone(),"I6001"==this.itemType?b.default.s_req_statistics(15):"I6002"==this.itemType?b.default.s_req_statistics(19):"I6003"==this.itemType&&b.default.s_req_statistics(20),b.default.req_use_item(this.itemId,e)}else _.WordConfig.showWord(60001)}}else l.GameConfig.connectServer&&(this.checkAppStone(),b.default.req_use_item(this.itemId,e))},e.prototype.checkAppStone=function(){(l.GameConfig.sdkType==l.SdkType.KoreaBingNiao||I.default.isIos())&&(I.default.isGetAppstore_reward||"I6002"!=this.itemType&&"I6003"!=this.itemType&&"I6006"!=this.itemType||s.default.instance.createView(C.default.gameView.AppstoneView))},e.tryOpenGift=function(e){for(var t=e.magic_value,i=new Array,n=0;n<t.length;n++)for(var o in t[n]){var a=t[n][o]||1,s=c.EquipConfig.getEquipConfigById(o);if(s){var r=L.create(P.default.instance,s.kind,s.id,1,a);i.push(r)}else{var l=f.ITemsConfig.getITemsConfigById(o);i.push(L.create(P.default.instance,l.kind,l.id,a,l.quality))}}return!!P.default.instance.tryAddItemsToBag(i)},e.prototype.addArticle=function(e){void 0===e&&(e=0)},e.resolutionArticle=function(e,t,i){void 0===i&&(i=-1);var n=e.getConfig();n.break;if(P.default.instance.getAddItemMaxNum(L.create(P.default.instance,d.GameConst.ITEM_KIND.ITEM,e.itemType,t,n.quality))==t){l.GameConfig.connectServer&&b.default.req_break_item(e.itemId,t);var o=new Array;M.UIHelper.showGetItemsTips(o,_.WordConfig.getWord(60256))}else _.WordConfig.showWord(60257)},e.prototype.addItemAmount=function(e,t){void 0===t&&(t=1)},e.prototype.useGifePackage=function(){for(var t=this.getConfig().magic_value,i=new Array,n=new Array,o=0;o<t.length;o++)for(var a in t[o]){var s=t[o][a]||1,r=c.EquipConfig.getEquipConfigById(a);if(r){var l=L.create(P.default.instance,r.kind,r.id,1,s);l.baseAddAttrList=c.EquipConfig.randomBaseAddAttrList(s,r),l.randAttrList=c.EquipConfig.randomAddAttrList(s,r),i.push(l),n.push(M.TipsItem.create(r.name,1,l.quality))}else{var d=f.ITemsConfig.getITemsConfigById(a);i.push(L.create(P.default.instance,d.kind,d.id,s,d.quality)),n.push(M.TipsItem.create(d.name,s,d.quality))}}var g=e.addItems(i);return g&&M.UIHelper.showGetItemsTips(n,_.WordConfig.getWord(60592)),g},e.prototype.getConfig=function(){return this.itemKind==d.GameConst.ITEM_KIND.ITEM||this.itemKind==d.GameConst.ITEM_KIND.Hufu||this.itemKind==d.GameConst.ITEM_KIND.BaGua||this.itemKind==d.GameConst.ITEM_KIND.Auction?f.ITemsConfig.getITemsConfigById(this.itemType):c.EquipConfig.getEquipConfigById(this.itemType)},e.getConfigById=function(e){var t;return(t=f.ITemsConfig.getITemsConfigById(e))||c.EquipConfig.getEquipConfigById(e),t},e.getConfigByZichanId=function(e){var t;return(t=f.ITemsConfig.getITemsConfigById("I"+e))||c.EquipConfig.getEquipConfigById("E"+e),t},e.prototype.isCanEquipAnimation=function(){if(this.quality<d.GameConst.QUALITY.PURPLE)return!1;var e=c.EquipConfig.getEquipConfigById(this.itemType);if(1003==e.cid)return!1;var t=0;if(e.world==h.MapConfig.WORLD.FanRen)for(var i=0;i<this.randAttrList.length;i++)c.EquipConfig.getRandomAttrQuality(e,this.randAttrList[i])==d.GameConst.QUALITY.ORANGE&&t++;else for(i=0;i<this.fuwenAtriList.length;i++){var n=this.fuwenAtriList[i];c.EquipConfig.getQualityByCurrAndMax(n.magicValue,n.max)==d.GameConst.QUALITY.ORANGE&&t++}if(e.world==h.MapConfig.WORLD.FanRen){if(t>=3)return!0}else if(t>=this.fuwenAtriList.length)return!0;return!1},e.prototype.clone=function(){var t=new e;return t.itemId=this.itemId,t.itemKind=this.itemKind,t.itemType=this.itemType,t.itemCnt=this.itemCnt,t.quality=this.quality,t.isNew=this.isNew,t.isSell=this.isSell,t.isLock=this.isLock,t.index=this.index,t.baseAddAttrList=this.baseAddAttrList,t.randAttrList=this.randAttrList,t.gridId=this.gridId,t.fight=this.fight,t.end_time=this.end_time,t.fuwenActive=this.fuwenActive,t.fuwenId=this.fuwenId,t.fuwenAtriList=this.fuwenAtriList,t.fuwenNeedList=this.fuwenNeedList,t.blessAtttList=this.blessAtttList,t.embedRuneList=this.embedRuneList,t.luckyValue=this.luckyValue,t.xilianCost=this.xilianCost,t.xilianTime=this.xilianTime,t.remodeLuckyValue=this.remodeLuckyValue,t.exp=this.exp,t.specialEffect=this.specialEffect,t},e.prototype.getItemQualityValue=function(){var e=c.EquipConfig.getEquipConfigById(this.itemType),t=[];return this.quality==d.GameConst.QUALITY.GREEN?t=e.Magic:this.quality==d.GameConst.QUALITY.BLUE?t=e.Rare:this.quality==d.GameConst.QUALITY.PURPLE?t=e.Legendary:this.quality==d.GameConst.QUALITY.ORANGE&&(t=e.ancient),t},e.prototype.getCurrBaseAddAttrValue=function(){for(var e=0,t=(c.EquipConfig.getEquipConfigById(this.itemType),0);t<this.baseAddAttrList.length;t++)e+=this.baseAddAttrList[t].magicValue;return e},e.prototype.getJiPinPersent=function(){var e=this.getItemQualityValue()[1],t=this.getCurrBaseAddAttrValue();return Math.floor(t/e*100).toFixed(0)},e.prototype.getIsEmbedRune=function(){for(var e=0;e<this.embedRuneList.length;e++)if(1==this.embedRuneList[e])return!0;return!1},e.randomId=0,e}();i.default=N,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../config/BaGuaEquipConfig":"BaGuaEquipConfig","../config/EquipConfig":"EquipConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../config/RuneConfig":"RuneConfig","../config/SkillConfig":"SkillConfig","../config/SpecialRingConfig":"SpecialRingConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/SkillManager":"SkillManager","../network/SocketClient":"SocketClient","../sdk/SdkHelper":"SdkHelper","../utils/UIHelper":"UIHelper","./BlessModel":"BlessModel","./MagicModel":"MagicModel","./PkModel":"PkModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],ItemPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"3f9b6++QthAvKRWn7uKzqPl","ItemPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/ResourcesManager"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/BaGuaEquipConfig"),d=e("../config/ColorConfig"),f=e("../config/EquipConfig"),g=e("../config/GameConst"),h=e("../config/ITemsConfig"),u=e("../config/MapConfig"),p=e("../config/ShenCiConfig"),m=e("../config/ViewConfig"),C=e("../config/WordConfig"),_=e("../model/BlessModel"),v=e("../model/EquipGridModel"),y=e("../model/ItemInfoModel"),b=e("../model/JingJieModel"),I=e("../model/RoleInfoModel"),M=e("../model/SettingModel"),w=e("../utils/NameHelper"),k=e("../utils/UIHelper"),S=cc._decorator,P=S.ccclass,E=S.property,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameSpriteFrameList=[],t.itemModel=null,t.itemConfig=null,t.equipConfig=null,t.itemType=0,t.canShowDetail=!1,t.touchTime=0,t.justShow=!1,t.is_showNum=!1,t}var i;return n(t,e),i=t,t.prototype.init=function(e,t,n,o,a,s,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=!0),void 0===r&&(r=!1),this.isAuto=a,this.canShowDetail=t,this.clickCallback=n,this.isSpecial=o,this.itemConfig=null,this.isShowEffect=s,this.is_showNum=r,e instanceof y.default?(this.itemModel=e,this.itemModel.itemKind==g.GameConst.ITEM_KIND.ITEM||this.itemModel.itemKind==g.GameConst.ITEM_KIND.Hufu||this.itemModel.itemKind==g.GameConst.ITEM_KIND.BaGua||this.itemModel.itemKind==g.GameConst.ITEM_KIND.Auction?(this.itemConfig=h.ITemsConfig.getITemsConfigById(this.itemModel.itemType),this.quality=this.itemConfig.quality):this.itemModel.itemKind==g.GameConst.ITEM_KIND.EQUIP&&(this.equipConfig=f.EquipConfig.getEquipConfigById(this.itemModel.itemType),this.quality=this.itemModel.quality),this.itemType=i.ITEM_TYEP.ITEM_MODEL):e instanceof h.ITemsConfig?(this.itemConfig=e,this.quality=this.itemConfig.quality,this.itemType=i.ITEM_TYEP.ITEM_CONFIG):e instanceof f.EquipConfig&&(this.equipConfig=e,void 0!=e.quality&&null!=e.quality?this.quality=e.quality:this.quality=g.GameConst.QUALITY.WHITE,this.itemType=i.ITEM_TYEP.EQUIP_CONFIG),o&&this.initClick(),this.refresh()},t.prototype.initOnlyName=function(e){this.node.getChildByName("frameNode").active=!1,this.node.getChildByName("occupationNode").active=!1,this.node.getChildByName("lockNode").active=!1;var t=this.node.getChildByName("animationNode");t&&(t.active=!1);var i=this.node.getChildByName("nameTxt").getComponent(cc.Label);i.node.active=!0,i.string=e},t.prototype.initResource=function(e,t,i){void 0===i&&(i=!1),this.node.getComponent(cc.Button)&&(this.node.getComponent(cc.Button).enabled=!1);var n=this.node.getChildByName("expBall");n&&(n.active=!1);var o=this.node.getChildByName("frameNode"),a=o.getChildByName("itemIconNode");this.node.getChildByName("occupationNode").active=!1;var r=this.node.getChildByName("nameTxt").getComponent(cc.Label);r.node.active=!0;var c=this.node.getChildByName("numTxt").getComponent(cc.Label);this.node.getChildByName("lockNode").active=!1;var l=this.node.getChildByName("suijiNode");l&&(l.active=!1);var f=this.node.getChildByName("zixuanNode");f&&(f.active=!1),c.node.anchorX=1,c.node.anchorY=.5,c.node.x=35,c.node.y=29,c.node.width=70,c.node.height=22,c.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,r.node.x=0,r.node.y=-25,r.fontSize=11;var h=this.node.getChildByName("animationNode");if(h&&(h.active=!1),a)a.active=!1;else{var u=o;(a=new cc.Node).addComponent(cc.Sprite);a.x=0,a.y=0,a.scaleX=a.scaleY=1,a.name="itemIconNode",u.addChild(a),a.active=!1}a.width=65,a.height=65,a.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,a.getComponent(cc.Sprite).trim=!1,a.getComponent(cc.Sprite).spriteFrame=null,a.active=!0;var p=cc.js.formatStr("itemIcon/%s","resource_"+e);s.default.instance.loadSprite(a.getComponent(cc.Sprite),p,!0);var m=0,_="",v=t+"";switch(e){case g.GameConst.RES_TYPE.COIN:m=g.GameConst.QUALITY.GREEN,_=C.WordConfig.getWord(60544);break;case g.GameConst.RES_TYPE.YUAN_BAO:m=g.GameConst.QUALITY.ORANGE,_=C.WordConfig.getWord(60517);break;case g.GameConst.RES_TYPE.CREAM:m=g.GameConst.QUALITY.BLUE,_=C.WordConfig.getWord(60756);break;case g.GameConst.RES_TYPE.EXP:m=g.GameConst.QUALITY.GREEN,_=C.WordConfig.getWord(60757);break;case g.GameConst.RES_TYPE.power:m=g.GameConst.QUALITY.BLUE,_=C.WordConfig.getWord(60758);break;case g.GameConst.RES_TYPE.mineSafeTime:break;case g.GameConst.RES_TYPE.LeiTaiCoin:m=g.GameConst.QUALITY.BLUE,_=C.WordConfig.getWord(60759);break;case g.GameConst.RES_TYPE.TIGUANSCORE:m=g.GameConst.QUALITY.BLUE,_=C.WordConfig.getWord(60760);break;case g.GameConst.RES_TYPE.Guild_GX:m=g.GameConst.QUALITY.PURPLE,_=C.WordConfig.getWord(61347);break;case g.GameConst.RES_TYPE.Guild_guildExploits:m=g.GameConst.QUALITY.PURPLE,_=C.WordConfig.getWord(61513)}t>=1e8&&(v=(t/1e8).toFixed(2)+C.WordConfig.getWord(60624)),t>0?(c.string=v+"",c.node.active=!0,c.node.color=d.ColorConfig.getQualityColor(m)):(c.node.active=!this.isSpecial,c.string="0"),r.string=k.UIHelper.formatName(_,!0),o.color=d.ColorConfig.getQualityColor(m),r.node.color=d.ColorConfig.getQualityColor(m),c.node.color=d.ColorConfig.getQualityColor(m),i&&(r.node.color=d.ColorConfig.RedColor,c.node.color=d.ColorConfig.RedColor,o.color=d.ColorConfig.RedColor),""!=r.string&&void 0!=r.string&&(r.fontSize=w.NameHelper.getNameLabSize(r.string))},t.prototype.setNumTxt=function(e,t){void 0===t&&(t=!0);var i=this.node.getChildByName("numTxt").getComponent(cc.Label);i.node.active=e>1&&t,i.string=e+""},t.prototype.setJustShow=function(e){void 0===e&&(e=!1),this.justShow=e},t.prototype.setNumTxtStr=function(e){var t=this.node.getChildByName("numTxt").getComponent(cc.Label);t.node.active=!0,t.string=e},t.prototype.setNumTxtColor=function(e,t){var i=e>t?d.ColorConfig.RedColor:d.ColorConfig.GreenColor;this.node.getChildByName("numTxt").color=i},t.prototype.setBaGuaEffect=function(e){var t=this.node.getChildByName("baguaEffect");t&&(t.active=e)},t.prototype.initClick=function(){var e=this;this.canShowDetail&&(this.node.getComponent(cc.Button)&&(this.node.getComponent(cc.Button).enabled=!0),this.onAddEvent(this.node,function(t){a.Logger.log("clickType===",t),e.clickCallback?e.clickCallback(t):0==t&&e.onClickThis()}))},t.prototype.onClickThis=function(){var e,t=this.node.getChildByName("numTxt").getComponent(cc.Label).string;if(this.itemConfig)if(e=this.itemModel?this.itemModel:this.itemConfig.kind==g.GameConst.ITEM_KIND.BaGua?y.default.createBaGuaEquip(this.itemConfig.id):y.default.create(this.itemConfig.kind,this.itemConfig.id,Number(t)>0?Number(t):0,this.itemConfig.quality),this.itemConfig.kind==g.GameConst.ITEM_KIND.BaGua){var n=l.default.getConfigById(e.itemType);r.default.instance.createView(m.default.gameView.BaGuaEquipInfoView,null,n,e,this.itemType==i.ITEM_TYEP.ITEM_MODEL,this.justShow)}else{y.default.getItemAmountById(e.itemId)>0&&("expball"==this.itemConfig.position||"expball_full"==this.itemConfig.position)?r.default.instance.createView(m.default.gameView.ExpBallView,null,e):"box"==e.getConfig().position?r.default.instance.createView(m.default.gameView.OptionalView,null,e,!1):r.default.instance.createView(m.default.gameView.ItemInfo,null,e,Number(t)>0?Number(t):0,!1)}else if(this.equipConfig){if(1==this.equipConfig.dingzhi){var o=(e=this.equipConfig.world==u.MapConfig.WORLD.FanRen?y.default.createDingZhiEquip(this.equipConfig.id):y.default.createFuWenEquip(this.equipConfig.id)).getConfig();if(o.shenci_id&&o.shenci_id.length>0&&e.blessAtttList.length<=0)for(var a=e.quality,s=0;s<o.shenci_id.length;++s){var c=o.shenci_id[s],d=p.ShenCiConfig.getConfigById(c);if(d){var f=new _.default;f.blessId=d.id,f.blessValue=d["pinzhi"+a][1],e.blessAtttList.push(f)}}}else e=this.itemModel?this.itemModel:y.default.create(this.equipConfig.kind,this.equipConfig.id,0,this.quality);r.default.instance.createView(m.default.gameView.equipInfo,null,e,2,!1,this.isAuto)}},t.prototype.refreshAuctionTag=function(e){var t=this.findChild(this.node,"tag/outOfDate",!1),i=this.findChild(this.node,"tag/auctionItem",!1);t&&i&&(e?1===e.isSell?(i.active=!0,t.active=!1):2===e.isSell?(i.active=!1,t.active=!0):"sell"==e.getConfig().position?(i.active=!0,t.active=!1):(i.active=!1,t.active=!1):this.itemConfig&&"sell"==this.itemConfig.position?(i.active=!0,t.active=!1):(i.active=!1,t.active=!1))},t.prototype.playcanAnimation=function(){var e=this.node.getChildByName("animationNode");if(this.isShowEffect&&e){e.active=!0;var t=e.getComponent(cc.Animation),i=t.getClips(),n=void 0;n=this.itemModel.quality==g.GameConst.QUALITY.ORANGE?i[1]:i[0],t.play(n.name,0)}},t.prototype.refresh=function(){var e=this.node.getChildByName("frameNode"),t=e.getChildByName("itemIconNode"),n=this.node.getChildByName("occupationNode"),o=this.node.getChildByName("nameTxt").getComponent(cc.Label);o.node.active=!0;var a=this.node.getChildByName("numTxt").getComponent(cc.Label),r=this.node.getChildByName("lockNode");r.zIndex=this.node.childrenCount+1;var c,h=this.node.getChildByName("animationNode"),p=this.node.getChildByName("unUse"),m=this.node.getChildByName("up"),_=this.findChild(this.node,"level",!1),S=this.node.getChildByName("starList"),P=this.findChild(this.node,"starList/icon",!1),E=this.node.getChildByName("baguaEffect");if((c=this.node.getChildByName("anishenxingNode"))&&(c.active=!1),a.node.anchorX=1,a.node.anchorY=.5,a.node.x=35,a.node.y=29,a.node.width=70,a.node.height=22,a.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,o.node.x=0,o.node.y=-25,o.fontSize=11,t)t.active=!1;else{var L=e;(t=new cc.Node).addComponent(cc.Sprite);t.x=0,t.y=0,t.scaleX=t.scaleY=1,t.name="itemIconNode",L.addChild(t),t.active=!1}t.width=65,t.height=65,t.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,t.getComponent(cc.Sprite).trim=!1,t.getComponent(cc.Sprite).spriteFrame=null,this.refreshAuctionTag(this.itemModel);var T=this.node.getChildByName("suijiNode");if(T)T.active=this.itemConfig&&"draw"==this.itemConfig.position;else if(this.itemConfig&&"draw"==this.itemConfig.position){L=this;var R=new cc.Node;R.addComponent(cc.Sprite),R.x=-19,R.y=30,R.name="suijiNode",L.node.addChild(R),s.default.instance.loadSprite(R.getComponent(cc.Sprite),"loadlanguagepic/fontclip_biaoshi_suiji",!0)}var N=this.node.getChildByName("zixuanNode");if(N)N.active=this.itemConfig&&"box"==this.itemConfig.position;else if(this.itemConfig&&"box"==this.itemConfig.position){L=this;var B=new cc.Node;B.addComponent(cc.Sprite),B.x=-19,B.y=31,B.name="zixuanNode",L.node.addChild(B),s.default.instance.loadSprite(B.getComponent(cc.Sprite),"loadlanguagepic/fontclip_biaoshi_zixuan",!0)}switch(p&&(p.active=!1),m&&(m.active=!1),h&&(h.active=!1),_&&S&&P&&E&&(_.active=!1,S.active=!1,E.active=!1),r.active=!1,n.active=!1,this.itemType){case i.ITEM_TYEP.ITEM_MODEL:if(e.color=d.ColorConfig.getQualityColor(this.quality),o.node.color=d.ColorConfig.getQualityColor(this.quality),p&&this.itemConfig&&(p.active=this.itemConfig.pro!=g.GameConst.OCCUPATION.None&&this.itemConfig.pro!=I.default.instance.occupation),t&&this.itemConfig){t.active=!0;var A=cc.js.formatStr("itemIcon/%s",this.itemConfig.icon);s.default.instance.loadSprite(t.getComponent(cc.Sprite),A,!0)}if(this.itemModel.itemKind==g.GameConst.ITEM_KIND.ITEM||this.itemModel.itemKind==g.GameConst.ITEM_KIND.Hufu||this.itemModel.itemKind==g.GameConst.ITEM_KIND.Auction)o.string=k.UIHelper.formatName(this.itemConfig.name,!0),this.itemModel.itemCnt>0?(a.string=this.itemModel.itemCnt+"",a.node.active=!0):(a.node.active=!this.isSpecial,a.string="0"),a.node.color=d.ColorConfig.getQualityColor(this.quality),this.itemConfig.rune?e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[1]:e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[0];else if(this.itemModel.itemKind==g.GameConst.ITEM_KIND.EQUIP){if(t){t.active=!0;A=cc.js.formatStr("itemIcon/%s",this.equipConfig.icon);s.default.instance.loadSprite(t.getComponent(cc.Sprite),A,!0)}if(p&&m)if(p.active=this.equipConfig.pro!=I.default.instance.occupation&&this.equipConfig.pro!=g.GameConst.OCCUPATION.None,-1==M.SettingModel.recycle_equip_tips){var G=v.EquipGridModel.getGridTypeByType(this.equipConfig.position),x=I.default.instance.getEquipModelByGrid(G);this.equipConfig.pro==I.default.instance.occupation||this.equipConfig.pro==g.GameConst.OCCUPATION.None?this.itemModel.getConfig().world==u.MapConfig.WORLD.LunHui&&b.JingJieModel.getMyLunHuiJingLevel()<this.itemModel.getConfig().reborn?m.active=!1:m.active=x?this.itemModel.getConfig().level<=I.default.instance.level&&this.itemModel.fight>x.fight:this.itemModel.getConfig().level<=I.default.instance.level:m.active=!1}else m.active=!1;if(a.node.active=!this.isSpecial,a.string="0",a.node.color=d.ColorConfig.getQualityColor(this.quality),r.active=this.itemModel.isLock,1003==this.equipConfig.cid?e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[2]:e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[this.equipConfig.world-1],o.string=k.UIHelper.formatName(this.equipConfig.name,!0),n.active=!0,f.EquipConfig.setMarkSprite(this.equipConfig.pro,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),this.isShowEffect&&h){if(1003==this.equipConfig.cid&&this.itemModel.quality>=g.GameConst.QUALITY.GREEN){h.active=!0;var O=void 0;O=(z=h.getComponent(cc.Animation)).getClips()[this.itemModel.quality+1],z.play(O.name,0)}if(this.itemModel.quality>=g.GameConst.QUALITY.PURPLE){(1==this.equipConfig.dingzhi&&1003!=this.equipConfig.cid||this.itemModel.isCanEquipAnimation())&&this.playcanAnimation()}}if(this.itemModel.blessAtttList&&this.itemModel.blessAtttList.length>0){var V;if(c){if(V=c.getComponent(cc.Animation))if(this.temp_shenxing_AnimationClip)V.play("shenxing",0);else{var j=this;cc.loader.loadRes("share/shenxing/shenxing",cc.AnimationClip,function(e,t){e||t&&V&&V.node&&(V.addClip(t,"shenxing"),V.play("shenxing",0),j.temp_shenxing_AnimationClip=t)})}}else if(c=new cc.Node,V=c.addComponent(cc.Animation),c.x=0,c.y=0,c.name="anishenxingNode",c.addComponent(cc.Sprite),c.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,c.getComponent(cc.Sprite).trim=!0,this.node.addChild(c,h.zIndex-1),this.temp_shenxing_AnimationClip)V.play("shenxing",0);else{var D=this;cc.loader.loadRes("share/shenxing/shenxing",cc.AnimationClip,function(e,t){e||t&&V&&V.node&&(V.addClip(t,"shenxing"),V.play("shenxing",0),D.temp_shenxing_AnimationClip=t)})}c.active=!0}}else if(this.itemModel.itemKind==g.GameConst.ITEM_KIND.BaGua){var F=l.default.getConfigById(this.itemModel.itemType),H=I.default.instance.getBaGuaEquipByPos(F.pos);a.node.active=!this.isSpecial,a.string="0",a.node.color=d.ColorConfig.getQualityColor(this.quality),r.active=this.itemModel.isLock,_.active=!0,S.active=!0,_.getComponent(cc.Label).string=cc.js.formatStr(C.WordConfig.getWord(61577),F.lev),o.string=this.itemConfig.name,e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[0],E.active=!0;O=void 0;O=(z=E.getComponent(cc.Animation)).getClips()[this.itemModel.quality],z.play(O.name,0);for(var U=S.childrenCount>F.client_show.length?S.childrenCount:F.client_show.length,W=0;W<U;W++){var q=void 0;if(W<S.childrenCount?q=S.children[W]:(q=cc.instantiate(S.children[0])).parent=S,q.active=W<F.client_show.length,W<F.client_show.length){A=cc.js.formatStr("texture/bagua/img_icon_%s",F.client_show[W]);s.default.instance.loadSprite(q.getComponent(cc.Sprite),A,!0)}}m&&(-1==M.SettingModel.recycle_equip_tips&&(this.itemConfig.pro==I.default.instance.occupation||this.itemConfig.pro==g.GameConst.OCCUPATION.None)?m.active=H?this.itemModel.getConfig().level<=I.default.instance.level&&this.itemModel.fight>H.fight:this.itemModel.getConfig().level<=I.default.instance.level:m.active=!1)}break;case i.ITEM_TYEP.ITEM_CONFIG:if(e.color=d.ColorConfig.getQualityColor(this.quality),o.node.color=d.ColorConfig.getQualityColor(this.quality),o.string=k.UIHelper.formatName(this.itemConfig.name,!0),a.node.active=!this.isSpecial,a.string=y.default.getItemAmount(this.itemConfig.id)+"",a.node.color=d.ColorConfig.getQualityColor(this.quality),t&&this.itemConfig){t.active=!0;A=cc.js.formatStr("itemIcon/%s",this.itemConfig.icon);s.default.instance.loadSprite(t.getComponent(cc.Sprite),A,!0)}if(this.itemConfig.rune?e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[1]:e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[0],this.itemConfig.kind==g.GameConst.ITEM_KIND.BaGua){F=l.default.getConfigById(this.itemConfig.id);E.active=!0,_.active=!0,S.active=!0;var z;O=void 0;O=(z=E.getComponent(cc.Animation)).getClips()[this.itemConfig.quality],z.play(O.name,0),_.getComponent(cc.Label).string=cc.js.formatStr(C.WordConfig.getWord(61577),F.lev),o.string=this.itemConfig.name,e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[0];for(U=S.childrenCount>F.client_show.length?S.childrenCount:F.client_show.length,W=0;W<U;W++){q=void 0;if(W<S.childrenCount?q=S.children[W]:(q=cc.instantiate(S.children[0])).parent=S,q.active=W<F.client_show.length,W<F.client_show.length){A=cc.js.formatStr("texture/bagua/img_icon_%s",F.client_show[W]);s.default.instance.loadSprite(q.getComponent(cc.Sprite),A,!0)}}}break;case i.ITEM_TYEP.EQUIP_CONFIG:if(e.color=d.ColorConfig.getQualityColor(this.quality),o.node.color=d.ColorConfig.getQualityColor(this.quality),a.node.active=!this.isSpecial,a.string="0",a.node.color=d.ColorConfig.getQualityColor(this.quality),o.string=k.UIHelper.formatName(this.equipConfig.name,!0),n.active=!0,1003==this.equipConfig.cid?e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[0]:e.getComponent(cc.Sprite).spriteFrame=this.frameSpriteFrameList[this.equipConfig.world-1],f.EquipConfig.setMarkSprite(this.equipConfig.pro,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),t&&this.equipConfig){t.active=!0;A=cc.js.formatStr("itemIcon/%s",this.equipConfig.icon);s.default.instance.loadSprite(t.getComponent(cc.Sprite),A,!0)}}this.refreshBall(),this.refreshCost(),this.is_showNum&&(a.node.active=this.is_showNum),""!=o.string&&void 0!=o.string&&(o.fontSize=w.NameHelper.getNameLabSize(o.string))},t.prototype.refreshCost=function(){if(this.itemConfig){var e=this.node.getChildByName("occupationNode"),t=void 0,i=["lv","lan","zi","cheng"];113==this.itemConfig.cid?t="icon/Costume/jiaobiao/img_jiaobiao_touxiang_"+i[this.itemConfig.quality-1]:114==this.itemConfig.cid?t="icon/Costume/jiaobiao/img_jiaobiao_liaotian_"+i[this.itemConfig.quality-1]:108==this.itemConfig.cid?t="icon/Costume/jiaobiao/img_jiaobiao_chenghao_"+i[this.itemConfig.quality-1]:112==this.itemConfig.cid&&(t="icon/Costume/jiaobiao/img_jiaobiao_tou_"+i[this.itemConfig.quality-1]),t&&(s.default.instance.loadSprite(e.getComponent(cc.Sprite),t),e.active=!0)}},t.prototype.refreshBall=function(){var e=this.node.getChildByName("expBall");if(null!=e&&(e.active=!1,null!=this.itemConfig))if(e.getChildByName("waiyuan").color=d.ColorConfig.getExpBallBackQualityColor(this.quality),e.getChildByName("mask").getChildByName("neiyuan_bai").color=d.ColorConfig.getExpBallBackQualityColor(this.quality),"expball"==this.itemConfig.position){e.active=!0,e.getChildByName("fontclip_biaoshi_man").active=!1;e.getChildByName("waiyuan").active=!1,e.getChildByName("neiyuan_hei").active=!1,e.getChildByName("mask").active=!1}else"expball_full"==this.itemConfig.position?(e.active=!0,e.getChildByName("waiyuan").active=!1,e.getChildByName("neiyuan_hei").active=!1,e.getChildByName("mask").active=!1,e.getChildByName("fontclip_biaoshi_man").active=!0,e.getChildByName("fontclip_biaoshi_man").x=-27,e.getChildByName("mask").height=76):e.active=!1},t.ITEM_TYEP={ITEM_MODEL:0,ITEM_CONFIG:1,EQUIP_CONFIG:2},o([E({type:[cc.SpriteFrame]})],t.prototype,"frameSpriteFrameList",void 0),t=i=o([P],t)}(c.default);i.default=L,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/BaGuaEquipConfig":"BaGuaEquipConfig","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MapConfig":"MapConfig","../config/ShenCiConfig":"ShenCiConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/BlessModel":"BlessModel","../model/EquipGridModel":"EquipGridModel","../model/ItemInfoModel":"ItemInfoModel","../model/JingJieModel":"JingJieModel","../model/RoleInfoModel":"RoleInfoModel","../model/SettingModel":"SettingModel","../utils/NameHelper":"NameHelper","../utils/UIHelper":"UIHelper"}],ItemgoodsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b43868QkmpODJlWOzuV/Zz2","ItemgoodsConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/Logger"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.itemType=e.id,i.topPrice=e.topPrice,i.addPrice=e.addPrice,i.startPrice=String(e.startPrice),i.sort=e.sort,i.order=e.order,i.docs=e.docs,i},t.json2Config=function(e){var i=this;Object.keys(e).forEach(function(n){var o=i.obj2Config(e[n]);t.configMap.set(n,o)}),o.Logger.log("itemgoodsConfig.configMap:",t.configMap)},t.getConfigByItemType=function(e){var i=t.configMap.get(e);return i||o.Logger.error("\u914d\u7f6e\u8868\u6ca1\u6709\u5bf9\u5e94\u6570\u636e itemType\uff1a",e),i},t.getAuctionGoodsTypeByItemType=function(e){return t.configMap.get(e).sort},t.getHaveTopPriceByItemType=function(e){var i=t.getConfigByItemType(e);return i?!!i.topPrice:(o.Logger.warn("\u62cd\u5356\u54c1\u914d\u7f6e\u8868\u6ca1\u6709\u76f8\u5173\u6570\u636e \u7269\u54c1id:",e),!1)},t.getStartPriceByItemType=function(e){return this.getConfigByItemType(e).startPrice},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=a,cc._RF.pop()},{"../../engine/Logger":"Logger","./JsonConfigBase":"JsonConfigBase"}],JiaoZhuRunGame:[function(e,t,i){"use strict";cc._RF.push(t,"c466fEw5EpFh6xsrbIiPGET","JiaoZhuRunGame");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/Logger"),c=e("../../../engine/SpriteFrameComponent"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/ActivityRankConfig"),g=e("../../config/ColorConfig"),h=e("../../config/ElkRunConfig"),u=e("../../config/GameConst"),p=e("../../config/ITemsConfig"),m=e("../../config/ViewConfig"),C=e("../../config/WordConfig"),_=e("../../event/CommonEvent"),v=e("../../model/ActivityOpenModel"),y=e("../../model/HolidayRunGameModel"),b=e("../../model/ServerTime"),I=e("../../network/SocketClient"),M=e("../../prefab/MoveEffectPrefab"),w=e("../../utils/UIHelper"),k=e("../PublicTipView"),S=cc._decorator,P=S.ccclass,E=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activityId=4,t.totalTrackNum=3,t.rankNameConfig=[C.WordConfig.getWord(60744),C.WordConfig.getWord(60745),C.WordConfig.getWord(60746)],t.jiaozhuNameConfig=[C.WordConfig.getWord(61404),C.WordConfig.getWord(61405),C.WordConfig.getWord(61406)],t.throwDefaultP=[cc.v2(247,-7),cc.v2(247,-117),cc.v2(247,-238)],t.txtEffectYList=[-28,-147,-267],t.throwToX=151,t.miLuRightX=116,t.miLuLeftX=-264,t.miLuCenterX=0,t.miLuLength=0,t.miluSelectViewIndex=0,t.selectMvX=0,t.isFirstOpen=!0,t.isPlayingMv=!1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.elkConfig=h.ElkRunConfig.getConfigById(1),this.miLuLength=this.miLuRightX-this.miLuLeftX,this.miLuCenterX=(this.miLuLeftX+this.miLuRightX)/2,this.btn_login=this.getChild(this.node,"loginPanel/btn_login"),this.btn_login.active=!1,this.txtBaoMingTime=this.getChild(this.node,"loginPanel/txtBaoMingTime",cc.Label),this.txtSelectMilu=this.getChild(this.node,"loginPanel/txtSelectMilu",cc.RichText),this.huodongjieshu=this.getChild(this.node,"loginPanel/huodongjieshu"),this.yibaoming=this.getChild(this.node,"loginPanel/yibaoming"),this.weibaoming=this.getChild(this.node,"loginPanel/weibaoming"),this.ringNum=this.getChild(this.node,"ringNum",cc.Label),this.trapNum=this.getChild(this.node,"trapNum",cc.Label),this.txtScore=this.getChild(this.node,"txtScore",cc.Label),this.btn_shop=this.getChild(this.node,"btn_shop"),this.leftTime=this.getChild(this.node,"leftTime",cc.Label),this.runtime=this.getChild(this.node,"runtime",cc.Label),this.nonePanel=this.getChild(this.node,"nonePanel"),this.startPanel=this.getChild(this.node,"startPanel"),this.endingPanel=this.getChild(this.node,"endingPanel"),this.runningPanel=this.getChild(this.node,"runningPanel"),this.lingdangMvNode=this.getChild(this.node,"lingdangMvNode"),this.lingdangMvNode.active=!1,this.xianJingMvNode=this.getChild(this.node,"xianJingMvNode"),this.xianJingMvNode.active=!1,this.txtEffectMv=this.getChild(this.node,"txtEffectMv",cc.Label),this.txtEffectMv.node.active=!1,this.btn_addRing=this.getChild(this.node,"btn_addRing"),this.btn_addTrap=this.getChild(this.node,"btn_addTrap"),this.todayHuodongjieshu=this.getChild(this.node,"loginPanel/todayHuodongjieshu"),this.btn_help=this.getChild(this.node,"btn_help"),r.Logger.log("elkConfig=",this.elkConfig)},t.prototype.onEnable=function(){s.EventManager.instance.on(_.CommonEvent.Event_Milu_Tool_Suc,this.onMiluUseToolSuc,this),s.EventManager.instance.on(_.CommonEvent.Event_Item_update,this.refresh,this),s.EventManager.instance.on(_.CommonEvent.Event_Milu_Tool,this.onMiLuUseTool,this),s.EventManager.instance.on(_.CommonEvent.Event_Milu,this.refresh,this),I.default.s_get_holidayRun_info(),this.onAddEvent(this.btn_shop,function(){l.default.instance.createView(m.default.gameView.HolidayShopWindow,null,4)}),this.onAddEvent(this.btn_addRing,function(){b.ServerTime.getServerTime()>=1e3*y.HolidayRunGameModel.actEndTimes?C.WordConfig.showWord(60289):w.UIHelper.showQuickItemBuy(u.ItemId.JiFengFu)}),this.onAddEvent(this.btn_addTrap,function(){b.ServerTime.getServerTime()>=1e3*y.HolidayRunGameModel.actEndTimes?C.WordConfig.showWord(60289):w.UIHelper.showQuickItemBuy(u.ItemId.XianDiFu)}),this.onAddEvent(this.btn_help,function(){l.default.instance.createView(m.default.gameView.PublicTipView,null,k.default.TYPE_Milu)}),this.refreshTopGift(),this.refresh()},t.prototype.refreshTopGift=function(){for(var e=0;e<3;e++){var t=f.ActivityRankConfig.getConfig(this.activityId,e+1),i=this.getChild(this.node,"reward"+(e+1),cc.Label),n=this.getChild(this.node,"rewardThing"+(e+1),cc.Node);i.string=t.resource[2];var o=void 0,a=void 0;if(t.item){for(var s in t.item)o=s,a=t.item[s];var c=p.ITemsConfig.getITemsConfigById(o);r.Logger.log("refreshTopGift==",this.activityId,t,o,c),n.getChildByName("thingName").getComponent(cc.Label).string=c.name,n.getChildByName("thingNum").getComponent(cc.Label).string=a+""}r.Logger.log("refreshTopGift===",e,t)}},t.prototype.refresh=function(){r.Logger.log("myTrackId=======================",this.isFirstOpen,y.HolidayRunGameModel.myTrackId),this.isFirstOpen&&y.HolidayRunGameModel.myTrackId>0&&(this.isFirstOpen=!1,this.miluSelectViewIndex=y.HolidayRunGameModel.myTrackId-1),this.runtime.string=a.default.formatHourMinStr(1e3*y.HolidayRunGameModel.raceStartTime)+"-"+a.default.formatHourMinStr(1e3*y.HolidayRunGameModel.raceEndTime);var e=v.default.getStarTimeByActivityId(4),t=v.default.getEndTimeByActivityId(4);this.leftTime.string=a.default.formatDateStr7(1e3*e)+"-"+a.default.formatDateStr7(1e3*t),this.ringNum.string=y.HolidayRunGameModel.getMyLingDangNum()+"",this.trapNum.string=y.HolidayRunGameModel.getMyXianJingNum()+"",this.txtScore.string=y.HolidayRunGameModel.score+"",this.txtBaoMingTime.string=a.default.formatHourMinStr(1e3*y.HolidayRunGameModel.signStartTime)+"-"+a.default.formatHourMinStr(1e3*y.HolidayRunGameModel.signEndTime);var i=b.ServerTime.getServerTime()/1e3;this.weibaoming.active=!1,this.btn_login.active=!1,this.nonePanel.active=!1,this.endingPanel.active=!1,this.startPanel.active=!1,this.runningPanel.active=!1,this.todayHuodongjieshu.active=!1,i>=y.HolidayRunGameModel.actEndTimes?(this.huodongjieshu.active=!0,this.txtBaoMingTime.node.active=!1,this.txtSelectMilu.node.active=!1,this.nonePanel.active=!0):(this.huodongjieshu.active=!1,this.txtBaoMingTime.node.active=!0,this.txtSelectMilu.node.active=!0,y.HolidayRunGameModel.myTrackId>0?(this.txtSelectMilu.string=cc.js.formatStr(C.WordConfig.getWord(61407),this.jiaozhuNameConfig[y.HolidayRunGameModel.myTrackId-1]),this.yibaoming.active=!0):(this.txtSelectMilu.string=C.WordConfig.getWord(61408),this.yibaoming.active=!1,i>=y.HolidayRunGameModel.signEndTime?(this.weibaoming.active=!0,this.txtSelectMilu.string=C.WordConfig.getWord(60752)):(this.weibaoming.active=!1,this.btn_login.active=!0,this.onAddEvent(this.btn_login,function(){r.Logger.log("\u62a5\u540d\u53c2\u8d5b"),I.default.s_track_sign()}))),i>=y.HolidayRunGameModel.raceEndTime?(this.weibaoming.active=!1,this.endingPanel.active=!0,this.refreshRankResult()):i>=y.HolidayRunGameModel.raceStartTime&&i<=y.HolidayRunGameModel.raceEndTime?(this.runningPanel.active=!0,this.refreshRunningPanel()):(this.startPanel.active=!0,this.refreshStartPanel()))},t.prototype.onMiLuUseTool=function(e,t,i){r.Logger.log("onMiLuUseTool==",e,t,i),this.tempType=e,this.tempNum=t,this.tempTrackId=i,I.default.s_use_ringOrtrap(i,t)},t.prototype.onMiluUseToolSuc=function(){this.playEffectNode(this.tempTrackId,this.tempType,this.tempNum)},t.prototype.playEffectNode=function(e,t,i){var n=this;void 0===e&&(e=1),void 0===t&&(t=0),this.isPlayingMv=!0;var o,a=this.throwDefaultP[e-1];0==t?(o=cc.instantiate(this.lingdangMvNode)).parent=this.lingdangMvNode.parent:(o=cc.instantiate(this.xianJingMvNode)).parent=this.xianJingMvNode.parent,o.active=!0,o.setPosition(a);var s=cc.v2(this.throwToX,a.y),r=(a.x-s.x)/2,c=cc.v2(a.x-r,s.y);o.getComponent(M.default).playCircle(c,s,r,function(){o.destroy();var a=cc.instantiate(n.txtEffectMv.node).getComponent(cc.Label);0==t?(a.node.color=g.ColorConfig.GreenColor,a.string="+"+n.elkConfig.buffvalue[0]*i+C.WordConfig.getWord(60753)):(a.node.color=g.ColorConfig.RedColor,a.string=""+n.elkConfig.debuffvalue[0]*i+C.WordConfig.getWord(60753)),a.node.active=!0,a.node.parent=n.txtEffectMv.node.parent,a.node.y=n.txtEffectYList[e-1],cc.tween(a.node).to(.5,{position:cc.v2(a.node.x,a.node.y+30)}).call(function(){a.node.destroy(),n.isPlayingMv=!1,n.refresh()}).start()})},t.prototype.refreshRunningPanel=function(){var e=y.HolidayRunGameModel.trackResultModelList[this.miluSelectViewIndex];if(e){this.refreshRunningItem(this.miluSelectViewIndex,e);for(var t=0;t<this.totalTrackNum;t++)t!=this.miluSelectViewIndex&&this.refreshRunningItem(t,e)}},t.prototype.refreshRunningItem=function(e,t){var i=this;if(!this.isPlayingMv){var n=this.getChild(this.runningPanel,"item"+(e+1)),o=n.getChildByName("currDistance").getComponent(cc.Label),a=n.getChildByName("trapNum").getComponent(cc.Label),s=n.getChildByName("ringNum").getComponent(cc.Label),r=n.getChildByName("btn_useRing"),d=n.getChildByName("btn_useTrap");r.active=!1,d.active=!1;var f=n.getChildByName("trapIcon"),h=n.getChildByName("ringIcon");f.active=!1,h.active=!1;var u=n.getChildByName("value").getComponent(cc.Label),p=n.getChildByName("effect").getComponent(cc.Label),_=y.HolidayRunGameModel.trackResultModelList[e],v=n.getChildByName("miLuMv"),b=n.getChildByName("mine");b.active=!1,y.HolidayRunGameModel.myTrackId==e+1?(b.active=!0,v.getComponent(cc.Animation).play(v.getComponent(cc.Animation).getClips()[0].name)):v.getComponent(cc.Animation).play(v.getComponent(cc.Animation).getClips()[1].name);var I=this.miLuCenterX;y.HolidayRunGameModel.myTrackId<=0&&(I-=137),v.x=I,v.active=!0;var M=n.getChildByName("miLuLeft");M.active=!1;var w=n.getChildByName("miLuRight");w.active=!1;var k=n.getChildByName("pContainer");if(k.active=!0,_){if(this.refreshAllPContainer(_.rank,k),M.getChildByName("topNode").getComponent(cc.Sprite).spriteFrame=M.getChildByName("topNode").getComponent(c.SpriteFrameComponent).spriteFrameList[e],w.getChildByName("topNode").getComponent(cc.Sprite).spriteFrame=w.getChildByName("topNode").getComponent(c.SpriteFrameComponent).spriteFrameList[e],o.string=_.currdistance+C.WordConfig.getWord(60753),this.miluSelectViewIndex==e)_.currdistance>=this.elkConfig.length/2?(v.x=I,k.width=Math.abs(v.x-this.miLuRightX)):(v.x=this.miLuRightX-this.miLuLength/this.elkConfig.length*_.currdistance,k.width=Math.abs(v.x-this.miLuRightX)),this.selectMvX=v.x;else Math.abs(t.currdistance-_.currdistance)<=this.elkConfig.length/2?(v.x=this.selectMvX+(t.currdistance-_.currdistance)*(this.miLuLength/this.elkConfig.length),k.width=Math.abs(v.x-this.miLuRightX)):(v.active=!1,k.width=cc.winSize.width,t.currdistance>_.currdistance?(w.active=!0,k.active=!1,this.onAddEvent(w,function(){i.miluSelectViewIndex=e,i.refresh()})):(M.active=!0,this.onAddEvent(M,function(){i.miluSelectViewIndex=e,i.refresh()})));a.string=_.trapNum+"";var S=y.HolidayRunGameModel.getMyLingDangNum();if(s.string=_.ringNum+"",y.HolidayRunGameModel.myTrackId==e+1)r.active=!0,h.active=!0,this.onAddEvent(r,function(){S>0?l.default.instance.createView(m.default.gameView.HolidayToolView,null,0,S,e+1):C.WordConfig.showWord(60290)}),u.string=S+"",p.string="+"+this.elkConfig.buffvalue[0]+C.WordConfig.getWord(60753),p.node.color=g.ColorConfig.GreenColor;else{d.active=!0;var P=y.HolidayRunGameModel.getMyXianJingNum();this.onAddEvent(d,function(){P>0?l.default.instance.createView(m.default.gameView.HolidayToolView,null,1,P,e+1):C.WordConfig.showWord(60291)}),f.active=!0,u.string=P+"",p.string=""+this.elkConfig.debuffvalue[0]+C.WordConfig.getWord(60753),p.node.color=g.ColorConfig.RedColor}}y.HolidayRunGameModel.myTrackId>0?(n.x=0,M.x=-280):(n.x=137,M.x=-418)}},t.prototype.refreshAllPContainer=function(e,t){for(var i=0;i<t.childrenCount;i++){var n=t.children[i];n.getComponent(cc.Sprite).spriteFrame=n.getComponent(c.SpriteFrameComponent).spriteFrameList[e-1]}},t.prototype.refreshStartPanel=function(){for(var e=0;e<this.totalTrackNum;e++){var t=this.getChild(this.startPanel,"item"+(e+1)).getChildByName("mine");y.HolidayRunGameModel.myTrackId==e+1?t.active=!0:t.active=!1}},t.prototype.refreshRankResult=function(){this.todayHuodongjieshu.active=!0,this.yibaoming.active=!1;for(var e=0;e<this.totalTrackNum;e++){var t=this.getChild(this.endingPanel,"item"+(e+1)),i=t.getChildByName("rankIcon"),n=t.getChildByName("isChampion"),o=y.HolidayRunGameModel.trackResultModelList[e],a=t.getChildByName("txtIndex").getComponent(cc.Label),s=t.getChildByName("currdistance").getComponent(cc.Label),l=t.getChildByName("ringNum").getComponent(cc.Label),d=t.getChildByName("trapNum").getComponent(cc.Label),f=t.getChildByName("resultLabel").getComponent(cc.Label);f.string="";var g=t.getChildByName("mine");g.active=!1,r.Logger.log("refreshRankResult=",e,o),o&&(i.getComponent(cc.Sprite).spriteFrame=i.getComponent(c.SpriteFrameComponent).spriteFrameList[o.rank-1],1==o.rank?(n.getChildByName("1").active=!1,n.getChildByName("2").active=!0):(n.getChildByName("1").active=!0,n.getChildByName("2").active=!1),a.string=e+1+"",1==o.rank?a.node.setPosition(-114.626,-11.112):a.node.setPosition(-107.626,5.888),s.string=o.currdistance+C.WordConfig.getWord(60753),l.string=o.ringNum+C.WordConfig.getWord(60754),d.string=o.trapNum+C.WordConfig.getWord(60754),y.HolidayRunGameModel.myTrackId==e+1&&(g.active=!0,f.string=cc.js.formatStr(C.WordConfig.getWord(61422),this.rankNameConfig[o.rank-1])))}},t=o([P],t)}(d.default));i.default=E,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ActivityRankConfig":"ActivityRankConfig","../../config/ColorConfig":"ColorConfig","../../config/ElkRunConfig":"ElkRunConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/HolidayRunGameModel":"HolidayRunGameModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../prefab/MoveEffectPrefab":"MoveEffectPrefab","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView"}],JiaoZhuSelectView:[function(e,t,i){"use strict";cc._RF.push(t,"991bctJhsVLRbxXYlrQo5bn","JiaoZhuSelectView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/SpriteFrameComponent"),r=e("../../engine/ViewBase"),c=e("../event/CommonEvent"),l=e("../model/HolidayRunGameModel"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pConfig=[78,-4,-101],t.targetIndex=3,t.totalRandomTime=3*cc.game.getFrameRate(),t.nowCount=0,t.frameCount=0,t.perFrame=8,t}return n(t,e),t.prototype.onLoad=function(){this.btnSure=this.getChild(this.node,"btnSure"),this.btnSure.active=!1,this.selectNode=this.getChild(this.node,"selectNode"),this.txtRandom=this.getChild(this.node,"txtRandom"),this.txtSelect=this.getChild(this.node,"txtSelect"),this.indexIcon=this.getChild(this.node,"txtSelect/indexIcon")},t.prototype.onEnable=function(){this.targetIndex=l.HolidayRunGameModel.myTrackId,this.startRandom()},t.prototype.startRandom=function(){this.btnSure.active=!1,this.txtSelect.active=!1,this.txtRandom.active=!0,this.isPlaying=!0},t.prototype.update=function(){var e=this;if(this.isPlaying&&(this.frameCount++,this.frameCount>=this.perFrame)){this.frameCount=0,this.nowCount++;var t=this.nowCount%3;this.selectNode.setPosition(this.selectNode.getPosition().x,this.pConfig[t]),this.nowCount*this.perFrame>=this.totalRandomTime&&t+1==this.targetIndex&&(this.isPlaying=!1,this.txtSelect.active=!0,this.txtRandom.active=!1,this.indexIcon.getComponent(cc.Sprite).spriteFrame=this.indexIcon.getComponent(s.SpriteFrameComponent).spriteFrameList[this.targetIndex-1],this.btnSure.active=!0,this.onAddEvent(this.btnSure,function(){a.EventManager.instance.dispatch(c.CommonEvent.Event_Milu),e.closeView()}))}},t=o([f],t)}(r.default));i.default=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/ViewBase":"ViewBase","../event/CommonEvent":"CommonEvent","../model/HolidayRunGameModel":"HolidayRunGameModel"}],JingJieConfig:[function(e,t,i){"use strict";cc._RF.push(t,"08fbahAExVPBoyC5w1vcuLJ","JingJieConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../model/MagicModel"),s=e("./MagicNameConfig"),r=e("./WordConfig"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.condition=[{level:3},{login:4}],t}return n(t,e),t.getDesc=function(e){void 0===e&&(e=1);var t=new Array;return t.push(""),t.push(r.WordConfig.getWord(60377)),t.push(r.WordConfig.getWord(60378)),t[e]},t.createZeroConfig=function(){var e=new t;return e.next=1,e.level=0,e},t.obj2Config=function(e){var i=new t;return i.id=e.id,i.next=e.next,i.level=e.level,i.condition=e.condition,i.need_pingfen=e.need_pingfen,i.expcost=e.expcost,i.atk=e[1],i.mag=e[3],i.spt=e[5],i.def=e[9],i.magic_find1=e[21],i.equip_times=e[22],i.hp=e[10],i.mp=e[12],i.zhanli=e.zhanli,i.BonusDamage=e[15],i.DamageReduction=e[17],i.name=e.name,i},t.json2Config=function(e){var i=this,n=new Array,o=new Array;t.JingJieNameConfig=new Array,n.push(r.WordConfig.getWord(61492)),o.push(r.WordConfig.getWord(61493)),this.map=new Map,Object.keys(e).forEach(function(t){var a=i.obj2Config(e[t]);i.configMap.set(parseInt(t),a),a.id=parseInt(t),1==a.next?n.push(a.name):2==a.next&&o.push(a.name);var s=i.map.get(a.next);s||(s=new Map),s.set(a.level,a),i.map.set(a.next,s)}),t.JingJieNameConfig.push(n),t.JingJieNameConfig.push(o)},t.getJingJieConfigById=function(e){return this.configMap.get(e)},t.getJingJieConfig=function(e,t){var i;void 0===t&&(t=1);var n=this.map.get(e);return n&&(i=n.get(t)),i},t.getMagicModelList=function(e){var t,i=[];return e.atk>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.atk,t.magicValue=e.atk,i.push(t)),e.mag>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.mag,t.magicValue=e.mag,i.push(t)),e.spt>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.spt,t.magicValue=e.spt,i.push(t)),e.def>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.def,t.magicValue=e.def,i.push(t)),e.magic_find1>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.magic_find1,t.magicValue=e.magic_find1,i.push(t)),e.equip_times>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.equip_times,t.magicValue=e.equip_times,i.push(t)),e.hp>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.hp,t.magicValue=e.hp,i.push(t)),e.mp>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.mp,t.magicValue=e.mp,i.push(t)),e.BonusDamage>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.BonusDamage,t.magicValue=e.BonusDamage,i.push(t)),e.DamageReduction>0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.DamageReduction,t.magicValue=e.DamageReduction,i.push(t)),i},t.JingJieNameConfig=new Array,t.configMap=new Map,t.map=new Map,t}(o.JsonConfigBase);i.JingJieConfig=c,cc._RF.pop()},{"../model/MagicModel":"MagicModel","./JsonConfigBase":"JsonConfigBase","./MagicNameConfig":"MagicNameConfig","./WordConfig":"WordConfig"}],JingJieModel:[function(e,t,i){"use strict";cc._RF.push(t,"d6c76O933ZDJJ1L5dzimDYK","JingJieModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../config/JingJieConfig"),r=e("../config/MapConfig"),c=e("../config/WordConfig"),l=e("../event/CommonEvent"),d=e("../manager/RedPointManager"),f=e("./FightModel"),g=e("./RoleInfoModel"),h=function(){function e(){this.eventIdList=[],this.protos=[],this.jingJieId=0,this.level=0,this.status=0,this.eventIdList=[d.RedPointId.JinJie,d.RedPointId.Jinjie_0,d.RedPointId.Jinjie_1],this.protos=[a.ProtoConfig.c_req_realm_info,a.ProtoConfig.c_req_role_info],d.default.getInstance().addHandler(this)}return e.getJingJieNameConfig=function(){return this.jingJieNameConfig=[c.WordConfig.getWord(60593),c.WordConfig.getWord(60594)],this.jingJieNameConfig},e.getMyFanrenJingLevel=function(e){void 0===e&&(e=1);for(var t=0;t<g.default.instance.jingJieList.length;t++){var i=g.default.instance.jingJieList[t];if(i.jingJieId==e)return i.level}return 0},e.getMyLunHuiJingLevel=function(e){void 0===e&&(e=2);for(var t=0;t<g.default.instance.jingJieList.length;t++){var i=g.default.instance.jingJieList[t];if(i.jingJieId==e)return i.level}return 0},e.getJingJieLevel=function(e){void 0===e&&(e=r.MapConfig.WORLD.LunHui);for(var t=0;t<g.default.instance.jingJieList.length;t++){var i=g.default.instance.jingJieList[t];if(i.jingJieId==e&&1==i.status)return i.level}return 0},e.getJingJieName=function(){for(var e=this.getJingJieNameConfig()[0],t=0,i=0;i<g.default.instance.jingJieList.length;i++){var n=g.default.instance.jingJieList[i];n.jingJieId>t&&n.level>0&&(t=n.jingJieId,e=this.getJingJieNameConfig()[t-1])}return e},e.hadOpenJingJie=function(e){for(var t=0;t<g.default.instance.jingJieList.length;t++){var i=g.default.instance.jingJieList[t];if(i.jingJieId==e&&1==i.status)return!0}return!1},e.getHadOpenJingjieByNext=function(e){for(var t=0;t<g.default.instance.jingJieList.length;t++){var i=g.default.instance.jingJieList[t];if(s.JingJieConfig.getJingJieConfig(i.jingJieId).next>=e)return!0}return!1},e.proto2JingJieList=function(e){for(var t=e.getRealmInfoList(),i=[],a=0;a<t.length;a++){var s=this.proto2JingJieModel(t[a]);i.push(s)}return g.default.instance.jingJieList=i,o.Logger.log("proto2JingJieList===",g.default.instance.jingJieList),n.EventManager.instance.dispatch(l.CommonEvent.Event_JingJie),g.default.saveToLocalStorage(),i},e.proto2JingJieModel=function(t){var i=new e;return i.jingJieId=t.getK(),i.level=t.getV(),i.status=t.getStatus(),i},e.deserializeBinaryToModelList=function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&(t[i]=this.deserializeBinaryToModel(e[i]));return t},e.deserializeBinaryToModel=function(t){var i=new e;return i.jingJieId=t.jingJieId,i.level=t.level,i},e.prototype.checkRedPoint=function(){var e,t,i=[],n=g.default.instance.getJingJieModel(1),o=g.default.instance.getJingJieModel(2),a=n?s.JingJieConfig.getJingJieConfig(1,n.level+1):s.JingJieConfig.getJingJieConfig(1,1),r=o?s.JingJieConfig.getJingJieConfig(2,o.level+1):s.JingJieConfig.getJingJieConfig(2,1),c=f.default.getFanRenZhiLi(),l=f.default.getLunHuiZhiLi();a&&(e=c>=a.need_pingfen[1]&&g.default.instance.getExp()>=a.expcost&&g.default.instance.isOpenJingJie(a).isOpen),r&&(t=l>=r.need_pingfen[1]&&g.default.instance.getExp()>=r.expcost);var h={id:d.RedPointId.JinJie,type:d.RedPointType.Default,show:e||t};i.push(h);var u={id:d.RedPointId.Jinjie_0,type:d.RedPointType.Default,show:e};i.push(u);var p={id:d.RedPointId.Jinjie_1,type:d.RedPointType.Default,show:t};return i.push(p),i},e}();i.JingJieModel=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../config/JingJieConfig":"JingJieConfig","../config/MapConfig":"MapConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./FightModel":"FightModel","./RoleInfoModel":"RoleInfoModel"}],JingJieView:[function(e,t,i){"use strict";cc._RF.push(t,"22acc52BF9KnqlHsPZVxtvP","JingJieView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/DateUtil"),r=e("../../engine/EventManager"),c=e("../config/ColorConfig"),l=e("../config/GameConfig"),d=e("../config/JingJieConfig"),f=e("../config/MagicNameConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../manager/RedPointManager"),p=e("../model/FightModel"),m=e("../model/JingJieModel"),C=e("../model/MagicModel"),_=e("../model/RoleInfoModel"),v=e("../network/SocketClient"),y=e("../prefab/RedPointPrefab"),b=e("../utils/MusicHelper"),I=e("../utils/UIHelper"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnTabList=[],t.curTabIndex=0,t.itemList=[],t.nowNodeList=[],t.nextNodeList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.btnLevelUp=this.findChild(this.node,"btnLevelUp"),this.btnLevelUp.on(cc.Node.EventType.TOUCH_END,this.onClickLevelUp.bind(this)),this.findChild(this.btnLevelUp,"RedPointPrefab").getComponent(y.default).setRedPointIdList([u.RedPointId.Jinjie_0]);for(var t=0;t<3;t++)this.btnTabList[t]=this.node.getChildByName("btnTab"+t),this.btnTabList[t].on(cc.Node.EventType.TOUCH_END,this.onClickTab.bind(this,t));this.txtNowJingJie=this.getChild(this.node,"txtNowJingJie",cc.Label),this.txtNextJingJie=this.node.getChildByName("txtNextJingJie").getComponent(cc.Label),this.nowItemNode=this.findChild(this.node,"scrollViewNow/view/content/itemNode"),this.nowItemNode.active=!1,this.nextitemNode=this.findChild(this.node,"scrollViewNext/view/content/itemNode"),this.nextitemNode.active=!1,this.txtPower=this.getChild(this.node,"txtPower",cc.Label),this.txtExp=this.getChild(this.node,"txtExp",cc.Label),this.txtSuoXu=this.getChild(this.node,"txtSuoXu",cc.Label),this.txtLevel=this.getChild(this.node,"txtLevel",cc.Label),this.txtSuoXuLEvel=this.getChild(this.node,"txtSuoXuLEvel",cc.Node),this.limitNode=this.findChild(this.node,"limitNode"),this.scrollViewNext=this.findChild(this.node,"scrollViewNext"),this.refreshTab()},t.prototype.onEnable=function(){r.EventManager.instance.on(h.CommonEvent.Event_JingJie,this.refreshTab,this),l.GameConfig.connectServer&&v.default.req_realm_info()},t.prototype.onClickTab=function(e){b.MusicHelper.play_click(),this.initJingJieConfig(e);s.default.getPassDay(_.default.instance.create_time);m.JingJieModel.hadOpenJingJie(e+1)||1!=e?(this.curTabIndex=e,this.refreshTab()):g.WordConfig.showWord(60320)},t.prototype.initJingJieConfig=function(e){var t,i,n=e+1,o=_.default.instance.getJingJieModel(n);if(o?(t=d.JingJieConfig.getJingJieConfig(n,o.level),(i=d.JingJieConfig.getJingJieConfig(n,o.level+1))||(i=t)):i=d.JingJieConfig.getJingJieConfig(n,1),t||(t=null),i||(i=t),this.nowConfig=t,this.nextConfig=i,this.nowConfig&&this.nowConfig.level==this.nextConfig.level&&(this.txtExp.string="---",this.txtPower.string="---",this.txtLevel.string="---"),this.nextConfig){var a=_.default.instance.isOpenJingJie(this.nextConfig);this.txtSuoXuLEvel.active=this.txtLevel.node.active=a.ishaveLeve}},t.prototype.refreshTab=function(){for(var e=0;e<this.btnTabList.length;e++){var t=this.btnTabList[e],i=t.getChildByName("selectNode"),n=t.getChildByName("openNode"),o=t.getChildByName("noOpenNode");i.active=!1,n.active=!1,o.active=!1;var a=e+1,s=_.default.instance.getJingJieModel(a);this.curTabIndex==e?i.active=!0:s?n.active=!0:o.active=!0}var r,l,f=this.curTabIndex+1,h=_.default.instance.getJingJieModel(f);h?(r=d.JingJieConfig.getJingJieConfig(f,h.level),l=d.JingJieConfig.getJingJieConfig(f,h.level+1),this.txtNowJingJie.string=d.JingJieConfig.JingJieNameConfig[f-1][h.level],this.txtNextJingJie.string=d.JingJieConfig.JingJieNameConfig[f-1][h.level+1]):(this.txtNowJingJie.string=d.JingJieConfig.JingJieNameConfig[f-1][0],this.txtNextJingJie.string=d.JingJieConfig.JingJieNameConfig[f-1][1],l=d.JingJieConfig.getJingJieConfig(f,1)),r||(r=null),l||(l=r);for(e=0;e<this.itemList.length;e++){this.itemList[e].destroy()}this.itemList=[];var m=0;0==this.curTabIndex?(m=p.default.getFanRenZhiLi(),this.findChild(this.btnLevelUp,"RedPointPrefab").getComponent(y.default).setRedPointIdList([u.RedPointId.Jinjie_0])):(m=p.default.getLunHuiZhiLi(),this.findChild(this.btnLevelUp,"RedPointPrefab").getComponent(y.default).setRedPointIdList([u.RedPointId.Jinjie_1])),m>=l.need_pingfen[1]?this.txtPower.node.color=c.ColorConfig.GreenColor:this.txtPower.node.color=c.ColorConfig.RedColor;var C=_.default.instance.isOpenJingJie(l);if(this.txtSuoXuLEvel.active=this.txtLevel.node.active=C.ishaveLeve,C.isOpen?this.txtLevel.node.color=c.ColorConfig.GreenColor:this.txtLevel.node.color=c.ColorConfig.RedColor,this.txtLevel.string=C.level.toString()+g.WordConfig.getWord(61352),this.txtPower.string=I.UIHelper.tranNumber(m)+"/"+I.UIHelper.tranNumber(l.need_pingfen[1]),this.txtExp.string=I.UIHelper.tranNumber(l.expcost)+"",_.default.instance.getExp()>=l.expcost?this.txtExp.node.color=c.ColorConfig.GreenColor:this.txtExp.node.color=c.ColorConfig.RedColor,this.txtSuoXu.string=cc.js.formatStr(g.WordConfig.getWord(60444),d.JingJieConfig.getDesc(l.need_pingfen[0])),this.nowConfig=r,this.nextConfig=l,this.jingJieModel=h,r)this.refreshOneConfig(r,0,d.JingJieConfig.getMagicModelList(r));else{var v=d.JingJieConfig.getMagicModelList(l);for(e=0;e<v.length;e++)v[e].magicValue=0;this.refreshOneConfig(r,0,v)}this.refreshOneConfig(l,1,d.JingJieConfig.getMagicModelList(l)),this.nowConfig&&this.nowConfig.level==this.nextConfig.level?(this.limitNode.active=!0,this.txtNextJingJie.node.active=!1,this.txtPower.string="---",this.txtPower.node.color=c.ColorConfig.hexToColor("#FFFFFF"),this.txtLevel.string="---",this.txtLevel.node.color=c.ColorConfig.hexToColor("#FFFFFF"),this.txtExp.string="---",this.txtExp.node.color=c.ColorConfig.hexToColor("#FFFFFF"),this.scrollViewNext.active=!1):(this.limitNode.active=!1,this.txtNextJingJie.node.active=!0,this.scrollViewNext.active=!0)},t.prototype.refreshOneConfig=function(e,t,i){0==t?this.nowNodeList=[]:this.nextNodeList=[];for(var n=0==t?this.nowItemNode.parent:this.nextitemNode.parent,o=0==t?this.nowItemNode:this.nextitemNode,a=0==t?this.nowNodeList:this.nextNodeList,s=n.childrenCount>i.length?n.childrenCount:i.length,r=0;r<s;r++){var c=void 0;if(r<n.childrenCount?c=n.children[r]:(c=cc.instantiate(o)).parent=n,c.active=r<i.length,r<i.length){a.push(c);var l=c.getChildByName("txtName").getComponent(cc.Label),d=i[r];l.string=f.MagicNameConfig.getDesc(d.magicId)+":",c.getChildByName("txtValue").getComponent(cc.Label).string=C.default.formatMagicValue(d.magicId,d.magicValue)+""}}},t.prototype.onClickLevelUp=function(){if(b.MusicHelper.play_click(),this.nowConfig&&this.nowConfig.level==this.nextConfig.level)g.WordConfig.showWord(60321);else{var e=_.default.instance.isOpenJingJie(this.nextConfig);if(!e.ishaveLeve||e.isOpen){if((0==this.curTabIndex?p.default.getFanRenZhiLi():p.default.getLunHuiZhiLi())<this.nextConfig.need_pingfen[1]){var t=60131;t=0==this.curTabIndex?60131:60143;var i=g.WordConfig.getWord(t);return i=i.replace("[#]",this.nextConfig.need_pingfen[1]+""),void I.UIHelper.showTip(i)}l.GameConfig.connectServer&&(this.nextConfig?v.default.req_up_realm(this.nextConfig.id):0==this.curTabIndex?v.default.req_up_realm(1):1==this.curTabIndex&&v.default.req_up_realm(101)),this.refreshTab()}else g.WordConfig.showWord(60162)}},t.prototype.onDisable=function(){r.EventManager.instance.clear(this)},t=o([w],t)}(a.default));i.default=k,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/JingJieConfig":"JingJieConfig","../config/MagicNameConfig":"MagicNameConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../model/FightModel":"FightModel","../model/JingJieModel":"JingJieModel","../model/MagicModel":"MagicModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/RedPointPrefab":"RedPointPrefab","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper"}],JingLianModel:[function(e,t,i){"use strict";cc._RF.push(t,"58e0ce+3eRLL74WQDHT3whV","JingLianModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../config/GameConst"),r=e("../config/IntensifyRefineConfig"),c=e("../event/CommonEvent"),l=e("../manager/RedPointManager"),d=e("./EquipGridModel"),f=e("./ItemInfoModel"),g=e("./MagicModel"),h=e("./RoleInfoModel"),u=function(){function e(){this.eventIdList=[],this.protos=[],this.refineLevel=0,this.hadUsed=0,this.attrList=[],this.eventIdList=[l.RedPointId.JingLian,l.RedPointId.JingLian_1,l.RedPointId.JingLian_2],this.protos=[a.ProtoConfig.c_req_role_info,a.ProtoConfig.c_req_strength],l.default.getInstance().addHandler(this)}return e.proto2ModelList=function(t){var i=[];o.Logger.log("JingLianModel1===",t);for(var a=0;a<t.length;a++){var s=t[a],l=new e;l.refineId=s.getRefineid(),l.refineLevel=s.getRefinelevel(),l.hadUsed=s.getHadused()+r.IntensifyRefineConfig.getCurrLevelCost(l.refineLevel,l.refineId),l.attrList=g.default.proto2ModelList(s.getAttrlistList()),i.push(l)}o.Logger.log("JingLianModel2===",i),h.default.instance.refineList=i,n.EventManager.instance.dispatch(c.CommonEvent.Event_intensifyRefine_Refresh)},e.getModel=function(t){var i=new e,n=r.IntensifyRefineConfig.getConfigById(0);if(t==s.GameConst.JINGLIAN.ATTACK){i.refineId=s.GameConst.JINGLIAN.ATTACK,i.refineLevel=0,i.hadUsed=0;for(var o=[],a=0;a<n.atkRefine.length;a++){var c=new g.default,l=n.atkRefine[a];for(var d in l)c.magicId=Number(d),c.magicValue=Number(l[d]);o.push(c),i.attrList=o}}else if(t==s.GameConst.JINGLIAN.DEFENSE){i.refineId=s.GameConst.JINGLIAN.DEFENSE,i.refineLevel=0,i.hadUsed=0;for(o=[],a=0;a<n.defRefine.length;a++){c=new g.default,l=n.defRefine[a];for(var d in l)c.magicId=Number(d),c.magicValue=Number(l[d]);o.push(c),i.attrList=o}}for(var f=0;f<h.default.instance.refineList.length;f++)h.default.instance.refineList[f].refineId==t&&(i=h.default.instance.refineList[f]);return i},e.prototype.checkRedPoint=function(){var t=[],i=!1,n=!1,o=!1,a=!1,c=e.getModel(s.GameConst.JINGLIAN.ATTACK),g=e.getModel(s.GameConst.JINGLIAN.DEFENSE),h=d.EquipGridModel.getNowIntensifyLevelConfig();if(h){if(c){var u=e.getModel(s.GameConst.JINGLIAN.ATTACK).refineLevel,p=r.IntensifyRefineConfig.getConfigByLevel(c.refineLevel);o=h.level>=p.limit_level&&h.level<=p.maxlevel,o=(i=f.default.getItemAmount(p.item_atk[0])>=p.item_atk[1])&&o&&u!=p.maxlevel}if(g){var m=e.getModel(s.GameConst.JINGLIAN.DEFENSE).refineLevel,C=r.IntensifyRefineConfig.getConfigByLevel(g.refineLevel);a=h.level>=C.limit_level&&h.level<=C.maxlevel,a=(n=f.default.getItemAmount(C.item_def[0])>=C.item_def[1])&&a&&m!=C.maxlevel}}var _={id:l.RedPointId.JingLian,type:l.RedPointType.Default,show:i&&o||n&&a};t.push(_);var v={id:l.RedPointId.JingLian_1,type:l.RedPointType.Default,show:o};t.push(v);var y={id:l.RedPointId.JingLian_2,type:l.RedPointType.Default,show:a};return t.push(y),t},e.attackIsShow=!1,e.defenseIsShow=!1,e}();i.JingLianModel=u,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../config/GameConst":"GameConst","../config/IntensifyRefineConfig":"IntensifyRefineConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./EquipGridModel":"EquipGridModel","./ItemInfoModel":"ItemInfoModel","./MagicModel":"MagicModel","./RoleInfoModel":"RoleInfoModel"}],JingLianView:[function(e,t,i){"use strict";cc._RF.push(t,"1cce5NlVedI3oe5E8uUWqAV","JingLianView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/ColorConfig"),d=e("../config/GameConst"),f=e("../config/IntensifyRefineConfig"),g=e("../config/ITemsConfig"),h=e("../config/MagicNameConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../event/CommonEvent"),C=e("../model/EquipGridModel"),_=e("../model/ItemInfoModel"),v=e("../model/JingLianModel"),y=e("../model/MagicModel"),b=e("../model/RoleInfoModel"),I=e("../network/SocketClient"),M=e("../prefab/ItemPrefab"),w=e("../utils/UIHelper"),k=e("./FangShopView"),S=cc._decorator,P=S.ccclass,E=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxNum=1,t}return n(t,e),t.prototype.onInitChild=function(e){s.Logger.log("JingLianView===type==",e),this.showType=e,this.attributeRichTxt=this.findChild(this.node,"view/bg/middle/attributeRichTxt"),this.usedTxt=this.findChild(this.node,"view/bg/middle/usedTxt"),this.itemPrefab=this.findChild(this.node,"view/bg/middle/ItemPrefab"),this.pnlEdit=this.findChild(this.node,"view/bg/middle/pnlEdit"),this.from=this.findChild(this.node,"view/bg/middle/Label/from"),this.btnUse=this.findChild(this.node,"view/bg/btnUse");var t=this.findChild(this.node,"view/bg/middle/pnlEdit");this.bingdingAmountCtrl(t),this.showType==d.GameConst.JINGLIAN.DEFENSE?(this.from.getChildByName("Label2").getComponent(cc.Label).string=p.WordConfig.getWord(60445),this.from.getChildByName("Label2").getComponent(cc.Label).enableUnderline=!1,this.from.getChildByName("Label1").active=!0):(this.from.getChildByName("Label2").getComponent(cc.Label).string=p.WordConfig.getWord(60446),this.from.getChildByName("Label2").getComponent(cc.Label).enableUnderline=!0,this.from.getChildByName("Label1").active=!1)},t.prototype.onEnable=function(){this.setTopUI(),a.EventManager.instance.on(m.CommonEvent.Event_intensifyRefine_Refresh,this.refreshByServer,this),this.onAddEvent(this.findChild(this.node,"view/bg/middle/Label/from/Label1"),this.showDailyGift.bind(this)),this.onAddEvent(this.findChild(this.node,"view/bg/middle/Label/from/Label2"),this.showFangshi.bind(this))},t.prototype.showDailyGift=function(){1==b.default.instance.has_status?r.default.instance.createView(u.default.gameView.topUp,null,0):p.WordConfig.showWord(60322)},t.prototype.showFangshi=function(){this.showType!=d.GameConst.JINGLIAN.DEFENSE&&(this.closeView(),w.UIHelper.gotoFangshi(k.default.TabIndex.Exchange))},t.prototype.onShow=function(){this.onAddEvent(this.findChild(this.node,"view/bg/top/btnClose"),this.closeView.bind(this)),this.onAddEvent(this.btnUse,this.onClickUse.bind(this)),this.refreshByServer()},t.prototype.onClickUse=function(e){void 0===e&&(e=0);var t=f.IntensifyRefineConfig.getConfigById(0),i=0,n="";this.showType==d.GameConst.JINGLIAN.ATTACK?(i=_.default.getItemAmount(t.item_atk[0]),n=g.ITemsConfig.getITemsConfigById(t.item_atk[0]).name):(i=_.default.getItemAmount(t.item_def[0]),n=g.ITemsConfig.getITemsConfigById(t.item_def[0]).name);var o=parseInt(this.editboxAmount.string);if(!(o<=0)){var a=v.JingLianModel.getModel(this.showType);if(a.refineLevel<t.maxlevel){var s=f.IntensifyRefineConfig.getConfigByLevel(a.refineLevel+1),r=C.EquipGridModel.getNowIntensifyLevelConfig(),c=0;if(r&&(c=r.level),c>=s.limit_level)if(o<=i)0==e&&I.default.s_intensify_refine(this.showType,o);else{var l=cc.js.formatStr(p.WordConfig.getWord(60242),n);w.UIHelper.showTip(l)}else{l=cc.js.formatStr(p.WordConfig.getWord(60323),s.limit_level);w.UIHelper.showTip(l)}}else p.WordConfig.showWord(60324)}},t.prototype.refreshByServer=function(){var e=this.findChild(this.node,"view/bg/middle/pnlEdit");this.getChild(e,"amountEditBox",cc.EditBox).string="1";var t=0,i="",n=f.IntensifyRefineConfig.getConfigById(0),o=this.findChild(this.node,"view/bg/middle/ItemPrefab"),a=v.JingLianModel.getModel(this.showType),s=a.hadUsed;if(this.showType==d.GameConst.JINGLIAN.ATTACK){t=C.EquipGridModel.getEquipGridAddAllstat();var r="";b.default.instance.occupation==d.GameConst.OCCUPATION.ZHAN_SHI?r=p.WordConfig.getWord(60447):b.default.instance.occupation==d.GameConst.OCCUPATION.FA_SHI?r=p.WordConfig.getWord(60448):b.default.instance.occupation==d.GameConst.OCCUPATION.DAO_SHI&&(r=p.WordConfig.getWord(60449));for(var c=a.attrList,u="",m="",I=0,w=0,k=0,S=0;S<c.length;S++){var P=c[S];0==h.MagicNameConfig.getMagicConfigById(P.magicId).type?(w+=P.magicValue,u=y.default.formatMagicValue(P.magicId,P.magicValue)):(m=y.default.formatMagicValue(P.magicId,P.magicValue),k+=P.magicValue/1e4)}I=Math.ceil(t*k+w),i+=cc.js.formatStr(p.WordConfig.getWord(60450),r,u,r,m,Math.ceil(t*k),r,I);var E=g.ITemsConfig.getITemsConfigById(n.item_atk[0]),L=_.default.getItemAmount(n.item_atk[0]),T=f.IntensifyRefineConfig.getCanJingLianMaxLevel(this.showType,L),R=f.IntensifyRefineConfig.getConfigByLevel(T).atknum-1-v.JingLianModel.getModel(this.showType).hadUsed;this.maxNum=R>L?L:R;var N=_.default.create(d.GameConst.ITEM_KIND.ITEM,n.item_atk[0],L,E.quality);o.getComponent(M.default).init(N),o.getChildByName("numTxt").active=!0,o.getChildByName("numTxt").getComponent(cc.Label).string=""+L,o.getChildByName("numTxt").color=l.ColorConfig.getQualityColor(E.quality)}else if(this.showType==d.GameConst.JINGLIAN.DEFENSE){t=C.EquipGridModel.getEquipGridAddDef();for(c=a.attrList,u="",m="",I=0,w=0,k=0,S=0;S<c.length;S++){P=c[S];0==h.MagicNameConfig.getMagicConfigById(P.magicId).type?(w+=P.magicValue,u=y.default.formatMagicValue(P.magicId,P.magicValue),u=f.IntensifyRefineConfig.getConfigByLevel(a.refineLevel).defRefine[0][9]):(m=y.default.formatMagicValue(P.magicId,P.magicValue),k+=P.magicValue/1e4)}I=Math.ceil(t*k+w),i+=cc.js.formatStr(p.WordConfig.getWord(60451),u,m,Math.ceil(t*k),I);E=g.ITemsConfig.getITemsConfigById(n.item_def[0]),L=_.default.getItemAmount(n.item_def[0]),N=_.default.create(d.GameConst.ITEM_KIND.ITEM,n.item_def[0],L,E.quality);o.getComponent(M.default).init(N),o.getChildByName("numTxt").active=!0,o.getChildByName("numTxt").getComponent(cc.Label).string=""+L,o.getChildByName("numTxt").color=l.ColorConfig.getQualityColor(E.quality);T=f.IntensifyRefineConfig.getCanJingLianMaxLevel(this.showType,L),R=f.IntensifyRefineConfig.getConfigByLevel(T).defnum-1-v.JingLianModel.getModel(this.showType).hadUsed;this.maxNum=R>L?L:R}this.usedTxt.getComponent(cc.RichText).string=cc.js.formatStr(p.WordConfig.getWord(60452),s,f.IntensifyRefineConfig.getCanJingLianMaxLevelCost(this.showType)),this.attributeRichTxt.getComponent(cc.RichText).string=i,this.maxNum<=0&&(this.maxNum=0)},t.prototype.bingdingAmountCtrl=function(e){var t=this,i=this.getChild(e,"amountEditBox",cc.EditBox);i.string="1",this.editboxAmount=i;var n=function(){var e=parseInt(i.string)||0;e=(e=e<1?1:e)>t.maxNum?t.maxNum:e,0==t.maxNum?(i.string="1",t.onClickUse(1)):i.string=""+e},o=function(){n()};i.node.off("text-changed"),i.node.on("text-changed",o,this);var a=this.getChild(e,"btn_jia"),s=this.getChild(e,"btn_jian"),r=this.getChild(e,"btn_max");a.off("click"),s.off("click"),r.off("click"),a.on("click",function(){var e=parseInt(i.string)||0;i.string=""+ ++e,n()},this),s.on("click",function(){var e=parseInt(i.string)||0;i.string=""+--e,n()},this),r.on("click",function(){i.string=""+t.maxNum,o()},this)},t=o([P],t)}(c.default));i.default=E,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/IntensifyRefineConfig":"IntensifyRefineConfig","../config/MagicNameConfig":"MagicNameConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/EquipGridModel":"EquipGridModel","../model/ItemInfoModel":"ItemInfoModel","../model/JingLianModel":"JingLianModel","../model/MagicModel":"MagicModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/UIHelper":"UIHelper","./FangShopView":"FangShopView"}],JsonConfigBase:[function(e,t,i){"use strict";cc._RF.push(t,"566a0i4iClEXanMBWVWffp3","JsonConfigBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.JsonConfigBase=n,cc._RF.pop()},{}],JumpActionUtils:[function(e,t,i){"use strict";cc._RF.push(t,"aa178j49HtOFJ8AK/gnoURC","JumpActionUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../../engine/UIManager"),s=e("../config/MapConfig"),r=e("../config/NewFuncitonConfig"),c=e("../config/ViewConfig"),l=e("../config/WordConfig"),d=e("../event/CommonEvent"),f=e("../manager/PvpManager"),g=e("../manager/TianGuanManager"),h=e("../model/GuildModel"),u=e("../model/NewFeaturesModel"),p=e("../model/RoleInfoModel"),m=e("../network/SocketClient"),C=e("../view/CityView"),_=e("../view/FangShopView"),v=e("../view/GameUIView"),y=e("../view/Roles/BagView"),b=e("./UIHelper");(function(e){e[e.Businessman=1001]="Businessman",e[e.Strengthening=1002]="Strengthening",e[e.Skill=1003]="Skill",e[e.ShenBing=1004]="ShenBing",e[e.JingJie=1005]="JingJie",e[e.Star=1006]="Star",e[e.PK=1007]="PK",e[e.TianGuan=1008]="TianGuan",e[e.DarkIron=1009]="DarkIron",e[e.FangShi_Gold=1010]="FangShi_Gold",e[e.FangShi_YuanBao=1011]="FangShi_YuanBao",e[e.FangShi_ZhenBao=1012]="FangShi_ZhenBao",e[e.FangShi_Conversion=1013]="FangShi_Conversion",e[e.FangShi_PK=1014]="FangShi_PK",e[e.Blacksmith=1015]="Blacksmith",e[e.Compound=1016]="Compound",e[e.Trusteeship=1017]="Trusteeship",e[e.Setting=1018]="Setting",e[e.Mail=1019]="Mail",e[e.Rank=1020]="Rank",e[e.Recharge_YuanBao=1021]="Recharge_YuanBao",e[e.Recharge_GiftBag=1022]="Recharge_GiftBag",e[e.Recharge_Privilege=1023]="Recharge_Privilege",e[e.Bag=1024]="Bag",e[e.Chat=1025]="Chat",e[e.TianGuan_Shop=1026]="TianGuan_Shop",e[e.Guild=1027]="Guild",e[e.Map=1028]="Map",e[e.BuyMoney=1029]="BuyMoney",e[e.AuctionHouse=1030]="AuctionHouse",e[e.BaZhen=1031]="BaZhen",e[e.FengMo=1032]="FengMo",e[e.TeiJie=1033]="TeiJie",e[e.WaiGuan=1034]="WaiGuan",e[e.Blacksmith_Yingxincun=1035]="Blacksmith_Yingxincun",e[e.YaoXin1=1036]="YaoXin1",e[e.YaoXin2=1037]="YaoXin2",e[e.YiYuTanSuo=1038]="YiYuTanSuo",e[e.GuildBOSS=1039]="GuildBOSS",e[e.ActiveTask=1040]="ActiveTask",e[e.JianDing=1041]="JianDing",e[e.Appellation=1042]="Appellation",e[e.GuildShop=1043]="GuildShop",e[e.ShenGong=1044]="ShenGong",e[e.SC=1045]="SC",e[e.Battle=1046]="Battle"})(n=i.FunctionIdList||(i.FunctionIdList={}));var I=function(){function e(){}return e.doAction=function(e,t){var i=this;o.EventManager.instance.dispatch(d.CommonEvent.Event_ShenGong,!1);var s=u.NewFeaturesModel.checkFunctionOpen(e);if(s.isOk)if(e==n.Bag||e==n.Businessman||e==n.Strengthening||e==n.Skill||e==n.ShenBing||e==n.JingJie||e==n.Star)this.doActionBag(e);else if(e==n.PK)this.doActionPK();else if(e==n.TianGuan)this.doActionTianGuan();else if(e==n.DarkIron)this.doActionDarkIron();else if(e==n.FangShi_Gold||e==n.FangShi_YuanBao||e==n.FangShi_ZhenBao||e==n.FangShi_Conversion||e==n.FangShi_PK)this.doActionFangShi(e);else if(e==n.Blacksmith)this.doActionBlacksmith();else if(e==n.Compound)this.doActionCompound(t);else if(e==n.Trusteeship)this.doActionTrusteeship();else if(e==n.Battle)this.doActionBattle();else if(e==n.Setting)this.doActionSetting();else if(e==n.Mail)this.doActionMail();else if(e==n.Rank)this.doActionRank();else if(e==n.Recharge_YuanBao||e==n.Recharge_GiftBag||e==n.Recharge_Privilege)this.doActionRecharge(e);else if(e==n.TianGuan_Shop)this.doActionTianGuanShop();else if(e==n.BuyMoney)this.doActionBuyGold();else if(e==n.Guild)this.doActionGuild();else if(e==n.AuctionHouse)this.doActionAuctionHouse();else if(e==n.BaZhen||e==n.FengMo)this.doActionBaZhen(e);else if(e==n.TeiJie)this.doActionTeJie(e);else if(e==n.Blacksmith_Yingxincun)this.doActionBlacksmith_Yingxincun();else if(e==n.ActiveTask)this.doActionActiveTask();else if(e==n.Appellation)this.doActionAppellationView();else if(e==n.GuildShop)this.doActionGuildShop();else if(e==n.ShenGong)this.doActionShenGong();else if(e==n.SC)this.doActionGuildShop();else{var l=r.NewFuncitonConfig.getFunctionConfig(e.toString());l&&l.activity_id&&(a.default.instance.isOpen(c.default.gameView.BaZhenPanel)?a.default.instance.isOpen(c.default.gameView.BaGuaLevelView)?a.default.instance.closeView(c.default.gameView.BaGuaLevelView,function(){a.default.instance.closeView(c.default.gameView.BaZhenPanel,function(){i.doActionActivity(l.activity_id)})}):a.default.instance.closeView(c.default.gameView.BaZhenPanel,function(){i.doActionActivity(l.activity_id)}):this.doActionActivity(l.activity_id))}else 1==s.type&&a.default.instance.createView(c.default.gameView.toStrongerPanel,null,203),b.UIHelper.showTip(s.desc)},e.doActionBag=function(e){switch(o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToView,v.TabType.Bag),e){case n.Businessman:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToBag,y.BagTabType.Businessman);break;case n.Strengthening:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToBag,y.BagTabType.Strengthen);break;case n.Skill:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToBag,y.BagTabType.Skill);break;case n.ShenBing:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToBag,y.BagTabType.Shenbing);break;case n.JingJie:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToBag,y.BagTabType.Jingjie);break;case n.Star:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToBag,y.BagTabType.Star)}},e.doActionPK=function(){g.TianGuanManager.instance.isFighting||f.PvpManager.instance.isFighting?l.WordConfig.showWord(60246):(a.default.instance.createView(c.default.gameView.PkView),a.default.instance.closeView(c.default.gameView.TianGuanPrefab))},e.doActionTianGuan=function(){a.default.instance.createView(c.default.gameView.DialogCheck,null,l.WordConfig.getWord(61635),function(e){if(e)if(g.TianGuanManager.instance.isFighting||f.PvpManager.instance.isFighting)l.WordConfig.showWord(60246);else{var t=s.MapConfig.getMapConfigByMapId(22).Lv;if(p.default.instance.totalFight>=t)m.default.req_switch_map(22),o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpSettingView),C.default.isTianGuan_laoren=!0;else{var i=l.WordConfig.getWord(60316).replace("%s",t.toString());b.UIHelper.showTip(i),a.default.instance.createView(c.default.gameView.toStrongerPanel)}}})},e.doActionDarkIron=function(){a.default.instance.createView(c.default.gameView.DialogCheck,null,l.WordConfig.getWord(61636),function(e){if(e){var t=s.MapConfig.getMapConfigByMapId(75).Lv;if(p.default.instance.totalFight>=t)m.default.req_switch_map(75),o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpSettingView),a.default.instance.closeView(c.default.gameView.TianGuanPrefab);else{var i=l.WordConfig.getWord(60316).replace("%s",t.toString());b.UIHelper.showTip(i),a.default.instance.createView(c.default.gameView.toStrongerPanel)}}})},e.doActionFangShi=function(e){switch(o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToView,v.TabType.FangShi),e){case n.FangShi_Gold:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToFangshi,_.default.TabIndex.Jinbi);break;case n.FangShi_YuanBao:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToFangshi,_.default.TabIndex.YuanBao);break;case n.FangShi_ZhenBao:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToFangshi,_.default.TabIndex.ZhenBao);break;case n.FangShi_Conversion:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToFangshi,_.default.TabIndex.Exchange);break;case n.FangShi_PK:o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToFangshi,_.default.TabIndex.LeiTaiBi)}},e.doActionBlacksmith=function(){var e=s.MapConfig.getMapConfigByMapId(22).Lv;if(p.default.instance.totalFight>=e)m.default.req_switch_map(22),o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpSettingView);else{var t=l.WordConfig.getWord(60316).replace("%s",e.toString());b.UIHelper.showTip(t),a.default.instance.createView(c.default.gameView.toStrongerPanel)}},e.doActionCompound=function(e){if(!e&&!(e=p.default.instance.getFirstComposeItemInfoInList()))return!1;a.default.instance.createView(c.default.gameView.complex,null,null,e)},e.doActionBattle=function(){o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToView,v.TabType.Battle)},e.doActionTrusteeship=function(){o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToView,v.TabType.Battle),a.default.instance.createView(c.default.gameView.AutoRobotSettingView)},e.doActionSetting=function(){a.default.instance.createView(c.default.gameView.setting)},e.doActionMail=function(){a.default.instance.createView(c.default.gameView.PostView)},e.doActionRank=function(){a.default.instance.createView(c.default.gameView.RankView)},e.doActionRecharge=function(e){switch(e){case n.Recharge_YuanBao:a.default.instance.createView(c.default.gameView.topUp,null,0);break;case n.Recharge_GiftBag:a.default.instance.createView(c.default.gameView.topUp,null,1);break;case n.Recharge_Privilege:a.default.instance.createView(c.default.gameView.topUp,null,2)}},e.doActionTianGuanShop=function(){m.default.s_req_dungeon_shop()},e.doActionBuyGold=function(){a.default.instance.createView(c.default.gameView.buyMoney)},e.doActionGuild=function(){o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToGuild)},e.doActionGuildShop=function(){h.GuildModel.instance.guildinfo&&h.GuildModel.instance.guildinfo.gid>0?a.default.instance.createView(c.default.gameView.guildShopView):l.WordConfig.showWord(61850)},e.doActionGuildPvP=function(){h.GuildModel.instance.guildinfo&&h.GuildModel.instance.guildinfo.gid>0?o.EventManager.instance.dispatch(d.CommonEvent.Event_JumpToGuildPvP):l.WordConfig.showWord(61850)},e.doActionAuctionHouse=function(){a.default.instance.createView(c.default.gameView.auctionHouseView)},e.doActionBaZhen=function(e){a.default.instance.createView(c.default.gameView.BaZhenPanel,null,e)},e.doActionAppellationView=function(){a.default.instance.createView(c.default.gameView.AppellationView)},e.doActionTeJie=function(e){a.default.instance.createView(c.default.gameView.SpecialEquipView)},e.doActionBlacksmith_Yingxincun=function(){m.default.req_make_info()},e.doActionActivity=function(e){b.UIHelper.gotoButtomTab(3),setTimeout(function(){o.EventManager.instance.dispatch(d.CommonEvent.Event_ChangeActivity,e)})},e.doActionActiveTask=function(){a.default.instance.createView(c.default.gameView.activeTaskView)},e.doActionShenGong=function(){o.EventManager.instance.dispatch(d.CommonEvent.Event_ShenGong,!0)},e}();i.default=I,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../config/MapConfig":"MapConfig","../config/NewFuncitonConfig":"NewFuncitonConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/PvpManager":"PvpManager","../manager/TianGuanManager":"TianGuanManager","../model/GuildModel":"GuildModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../view/CityView":"CityView","../view/FangShopView":"FangShopView","../view/GameUIView":"GameUIView","../view/Roles/BagView":"BagView","./UIHelper":"UIHelper"}],KillBossTip:[function(e,t,i){"use strict";cc._RF.push(t,"2af31I/TnVJaYm9+/i/gFWG","KillBossTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ViewConfig"),r=e("../../../engine/UIManager"),c=e("../../network/SocketClient"),l=e("../../config/WordConfig"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e,t,i){void 0===i&&(i=null),this.viewType=e,this.tipString=t,this.bossModel=i},t.prototype.onShow=function(){r.default.instance.setTopUI(s.default.gameView.KillBossTip),this.btnAgree=this.getChild(this.node,"bg/bottom/btnAgree"),this.btnCancel=this.getChild(this.node,"bg/bottom/btnCancel"),this.tip=this.getChild(this.node,"bg/tip"),this.title=this.getChild(this.node,"bg/top/title"),this.tip.getComponent(cc.RichText).string=this.tipString,this.btnAgree.x=-113.999,this.viewType==i.TYPE_GET_TIP?(this.title.getComponent(cc.Label).string=l.WordConfig.getWord(60546),this.btnCancel.active=!1,this.btnAgree.x=0):this.viewType==i.TYPE_KILL_TIP&&(this.title.getComponent(cc.Label).string=l.WordConfig.getWord(60547),this.btnCancel.active=!0),this.onAddEvent(this.btnAgree,this.onCilckkillBoss.bind(this,this.bossModel)),this.onAddEvent(this.btnCancel,this.closeView.bind(this))},t.prototype.onCilckkillBoss=function(e){void 0===e&&(e=null),e&&c.default.s_seckill_monster(e.monsterId,4,e.mapId),this.closeView()},t.TYPE_KILL_TIP=0,t.TYPE_GET_TIP=1,t=i=o([f],t)}(a.default));i.default=g,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../network/SocketClient":"SocketClient"}],KoreaBNHandler:[function(e,t,i){"use strict";cc._RF.push(t,"cf2a6evuOtGF6ZDLcfmSYJ6","KoreaBNHandler"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("../GameController"),a=e("../network/SocketClient"),s=e("./SdkHandler"),r=e("./SdkHelper"),c=e("./SdkManager"),l=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance?this._instance:new e},enumerable:!0,configurable:!0}),e.prototype.authCallback=function(e,t){if(n.Logger.log("authCallback=====",e,t),e==s.Code.OK)try{t.authType==s.AuthType.init?s.SdkHandler.isInit=!0:t.authType==s.AuthType.login?(r.default.appId=t.appId,r.default.sid=cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?t.sid:t.sessionID,r.default.extra=t.extra,r.default.gameId=t.gameId,r.default.channelId=t.channelId,a.default.login(1)):t.authType==s.AuthType.loginOut?o.default.instance.restartGame():t.authType==s.AuthType.exitGame&&cc.game.end()}catch(e){n.Logger.error("authCallback error",e)}},e.prototype.payCallBack=function(e,t){if(n.Logger.log("payCallBack=====",e,t),200==e)try{var i=parseInt(t.shopId),o=void 0;if(2==i||1002==i?o={key:"huishou_right",value:"\u56de\u6536\u7279\u6743"}:3==i||1003==i?o={key:"zhanshen_right",value:"\u6218\u795e\u7279\u6743"}:i>=9&&i<=11||i>=1009&&i<=1011?o={key:"tuoguan_right",value:"\u6258\u7ba1\u52a9\u624b"}:7==i||1007==i?o={key:"zhuzhan_right",value:"\u52a9\u6218\u793c\u5305"}:501!=i&&503!=i&&1501!=i&&1503!=i||(o={key:"defense_gift",value:"\u6700\u5f3a\u9632\u5fa1\u793c\u5305"}),o){var a=JSON.stringify(o);c.default.sdkAuth(s.AuthType.onCustomEvent,a)}}catch(e){n.Logger.error("googlePayCallBack error",e)}},e}();i.KoreaBNHandler=l,cc._RF.pop()},{"../../engine/Logger":"Logger","../GameController":"GameController","../network/SocketClient":"SocketClient","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper","./SdkManager":"SdkManager"}],KoreaBNSdkManager:[function(e,t,i){"use strict";cc._RF.push(t,"dfabfXWDDZFMaJC92p151+0","KoreaBNSdkManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/LocalStorage"),o=e("../../engine/Logger"),a=e("../config/ChongZhiConfig"),s=e("../model/RoleInfoModel"),r=e("../model/ZoneModel"),c=e("./SdkHandler"),l=e("./SdkHelper"),d=function(){function e(){}return e.doCommand=function(e,t,i){void 0===i&&(i="(Ljava/lang/String;)V");var n=void 0==t?void 0:JSON.stringify(t),o=cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?this.androidNativeClassName:this.iosNativeClassName,a=cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?e:e+":";return cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(o,a,n):void 0==n?jsb.reflection.callStaticMethod(o,a,i):void jsb.reflection.callStaticMethod(o,a,i,n)},e.setUserInfo=function(e){return{userId:l.default.uId,roleId:e.roleId,roleName:e.roleName,level:e.level,vipLevel:0,serverId:cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?r.ZoneModel.nowZoneInfoModel.server_id:r.ZoneModel.nowZoneInfoModel.server_id.toString(),serverName:r.ZoneModel.nowZoneInfoModel.server_name,yuanbao:e.yuanBao,creatorTime:e.create_time?e.create_time:-1,guildName:e.guildName?e.guildName:"unknown",function:null}},e.sdkAuth=function(e,t,i){if(void 0===t&&(t=""),o.Logger.log("sdkAuth--------------",c.SdkHandler.isInit),c.SdkHandler.isInit){var a=void 0;if(e==c.AuthType.onLoginRsp){var r=JSON.parse(t);l.default.uId=r.content.data.userId,n.default.setItem(l.default.Local_Login_Uid_Key,l.default.uId),a={function:e,token:JSON.stringify(r)}}else if(e==c.AuthType.onUploadCreateRole||e==c.AuthType.onLoginRoleInfo||e==c.AuthType.onUpdateRoleInfo){var d=i||s.default.instance;a={function:e,data:this.setUserInfo(d)}}else if(e==c.AuthType.onCustomEvent){a={function:e,key:(r=JSON.parse(t)).key,value:r.value}}else a={function:e};o.Logger.log("sdkAuth--------------11",a),this.doCommand("sdkAuth",a)}else o.Logger.error("sdk\u521d\u59cb\u5316\u5931\u8d25\uff0c\u6388\u6743\u5931\u8d25")},e.sdkPay=function(e,t){var i=a.ChongZhiConfig.getConfigById(t.configId),n=void 0!=t.configId?100*i.money:"",c=s.default.instance.roleId,l=s.default.instance.roleName,d=s.default.instance.level,f=r.ZoneModel.nowZoneInfoModel.server_id,g=r.ZoneModel.nowZoneInfoModel.server_name,h=t.extend,u=t.notifyUrl,p=void 0==i.des?"":i.des,m={function:e=cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?e:"CZ",cpOrderNo:t.cpOrderNo,totalCharge:n,productId:t.shopId,productName:i.name,productAmount:t.count,productDesc:p,roleId:c,roleName:l,roleLevel:d,vipLevel:0,serverId:f,serverName:g,shopId:t.configId,currency:"KRW",asyncCallbackUrl:u,extend:h,rate:10},C=cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?"sdkPay":"sdkCZ";this.doCommand(C,m),o.Logger.log("sdkPay",m)},e.sdkAd=function(e){var t={function:e,adId:this.androidAdMobVideoId};this.doCommand("sdkAd",t)},e.androidNativeClassName="sdk/SdkManager",e.iosNativeClassName="CocosCenter",e.androidAdMobVideoId="R1",e.userId="",e}();i.KoreaBNSdkManager=d,window.LongRuiManager=d,cc._RF.pop()},{"../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../config/ChongZhiConfig":"ChongZhiConfig","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper"}],LanguageComponent:[function(e,t,i){"use strict";cc._RF.push(t,"42c896PLUtB5a29kUw4vdKn","LanguageComponent");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../game/config/WordConfig"),s=e("./ComponentBase"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code=0,t}return n(t,e),t.prototype.onLoad=function(){var e=a.WordConfig.getWord(this.code);if(e){var t=this.node.getComponent(cc.Label);if(t)t.string=e;else{var i=this.node.getComponent(cc.RichText);i&&(i.string=e)}}},o([l({type:cc.Integer})],t.prototype,"code",void 0),t=o([c],t)}(s.default);i.default=d,cc._RF.pop()},{"../game/config/WordConfig":"WordConfig","./ComponentBase":"ComponentBase"}],LanguageHelper:[function(e,t,i){"use strict";cc._RF.push(t,"1b555epWoNBK7+p05R0alxT","LanguageHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],LegendTaskModel:[function(e,t,i){"use strict";cc._RF.push(t,"c71e6A8LEpBMqtdC7x4Cb4v","LegendTaskModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../config/LegendaryThinkRewardConfig"),l=e("../config/LegendaryThinkTaskConfig"),d=e("../config/WordConfig"),f=e("../event/CommonEvent"),g=e("../manager/RedPointManager");(function(e){e[e.BAYE=3]="BAYE",e[e.HEFUBAYE=35]="HEFUBAYE"})(n||(n={}));var h=function(){return function(){}}();i.LegendTaskInfoModel=h;var u=function(){return function(){}}();i.LegendTaskGiftModel=u;var p=function(){function e(){this.eventIdList=[],this.protos=[],this.isActive=0,this.level=0,this.exp=0,this.taskInfoList=[],this.giftList=[],this.isActive2=0,this.level2=0,this.exp2=0,this.taskInfoList2=[],this.giftList2=[],this.eventIdList=[g.RedPointId.MaFaBaYe,g.RedPointId.MaFaBaYe2],this.protos=[s.ProtoConfig.c_get_legendtask_info],g.default.getInstance().addHandler(this)}return e.proto2ModelList=function(t){new e;var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_legendtask_info,t),c=i.getActivityId(),l=i.getTasklistList(),d=i.getGiftList();if(c==n.BAYE){e.instance.isActive=i.getIsactive(),e.instance.level=i.getLevel(),e.instance.exp=i.getExp(),e.instance.taskInfoList=[];for(var g=0;g<l.length;g++){(p=new h).times=l[g].getTimes(),p.finishTimes=l[g].getFinishtimes(),p.taskId=l[g].getTaskid(),e.instance.taskInfoList[g]=p}e.instance.giftList=[];for(g=0;g<d.length;g++){(m=new u).level=d[g].getLevel(),m.gift=d[g].getGift(),e.instance.giftList[g]=m}}else if(c==n.HEFUBAYE){e.instance.isActive2=i.getIsactive(),e.instance.level2=i.getLevel(),e.instance.exp2=i.getExp(),e.instance.taskInfoList2=[];for(g=0;g<l.length;g++){var p;(p=new h).times=l[g].getTimes(),p.finishTimes=l[g].getFinishtimes(),p.taskId=l[g].getTaskid(),e.instance.taskInfoList2[g]=p}e.instance.giftList2=[];for(g=0;g<d.length;g++){var m;(m=new u).level=d[g].getLevel(),m.gift=d[g].getGift(),e.instance.giftList2[g]=m}}a.Logger.log("LegendTaskModel resp",i,e.instance),o.EventManager.instance.dispatch(f.CommonEvent.Event_LegendTaskModel)},e.proto2Buy=function(t){var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_buy_legendtask_level,t),c=i.getCode(),l=i.getActivityId();a.Logger.log("proto2Buy",i),c&&(d.WordConfig.showWord(60127),l==n.BAYE?e.instance.level++:l==n.HEFUBAYE&&e.instance.level2++,o.EventManager.instance.dispatch(f.CommonEvent.Event_LegendTaskModel))},e.getTaskInfoByLevel=function(t,i){if(i==n.BAYE)for(var o=0;o<e.instance.taskInfoList.length;o++){if((a=e.instance.taskInfoList[o]).taskId==t)return a}else if(i==n.HEFUBAYE)for(o=0;o<e.instance.taskInfoList2.length;o++){var a;if((a=e.instance.taskInfoList2[o]).taskId==t)return a}},e.getGiftByLevel=function(t,i,o){if(o==n.BAYE)for(var a=0;a<e.instance.giftList.length;a++){if((s=e.instance.giftList[a]).level==t&&s.gift==i)return s}else if(o==n.HEFUBAYE)for(a=0;a<e.instance.giftList2.length;a++){var s;if((s=e.instance.giftList2[a]).level==t&&s.gift==i)return s}},e.prototype.checkRedPoint=function(){var t=[],i=!1,o=!1,a=c.LegendaryThinkRewardConfig.getAllList(n.BAYE),s=e.instance.level>=c.LegendaryThinkRewardConfig.getMaxLevel(n.BAYE),r=c.LegendaryThinkRewardConfig.getAllList(n.HEFUBAYE);e.instance.level,c.LegendaryThinkRewardConfig.getMaxLevel(n.HEFUBAYE);if(0!=a.length){a.forEach(function(o){if(e.instance.level>=o.level){if(!e.getGiftByLevel(o.level,1,n.BAYE)){var a=i=!0,s={id:"base_gift_"+o.level,type:g.RedPointType.Default,show:a};t.push(s)}if(!e.getGiftByLevel(o.level,2,n.BAYE)&&1==e.instance.isActive){var r=i=!0,c={id:"extr_gift_"+o.level,type:g.RedPointType.Default,show:r};t.push(c)}}});var d={id:"gift",type:g.RedPointType.Default,show:i};t.push(d)}if(0!=r.length){r.forEach(function(i){if(e.instance.level2>=i.level){if(!e.getGiftByLevel(i.level,1,n.HEFUBAYE)){var a=o=!0,s={id:"base_gift_"+i.level,type:g.RedPointType.Default,show:a};t.push(s)}if(!e.getGiftByLevel(i.level,2,n.HEFUBAYE)&&1==e.instance.isActive2){var r=o=!0,c={id:"extr_gift_"+i.level,type:g.RedPointType.Default,show:r};t.push(c)}}});var f={id:"gift2",type:g.RedPointType.Default,show:o};t.push(f)}var h=!1,u=l.LegendaryThinkTaskConfig.getAllList(n.BAYE);if(0!=e.instance.taskInfoList.length){u.forEach(function(t){var i=e.getTaskInfoByLevel(t.id,n.BAYE);i&&i.times>=t.goal&&!s&&(h=!0)});var p={id:"task",type:g.RedPointType.Default,show:h};t.push(p)}var m=l.LegendaryThinkTaskConfig.getAllList(n.HEFUBAYE);if(0!=e.instance.taskInfoList2.length){m.forEach(function(t){var i=e.getTaskInfoByLevel(t.id,n.HEFUBAYE);i&&i.times>=t.goal&&!s&&(h=!0)});var C={id:"task2",type:g.RedPointType.Default,show:!1};t.push(C)}var _=!1;(i||h)&&(_=!0);var v={id:g.RedPointId.MaFaBaYe,type:g.RedPointType.Default,show:_};t.push(v);var y=!1;o&&(y=!0);var b={id:g.RedPointId.MaFaBaYe2,type:g.RedPointType.Default,show:y};return t.push(b),t},e.instance=new e,e}();i.LegendTaskModel=p,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/LegendaryThinkRewardConfig":"LegendaryThinkRewardConfig","../config/LegendaryThinkTaskConfig":"LegendaryThinkTaskConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],LegendaryThinkRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ae95b01tRdN+K1S9SkxnadD","LegendaryThinkRewardConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o,a=e("./JsonConfigBase");(function(e){e[e.BAYE=3]="BAYE",e[e.HEFUBAYE=35]="HEFUBAYE"})(o||(o={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.getConfigByLevel=function(e,t){var i,n;return t==o.BAYE?i=this.configMap:t==o.HEFUBAYE&&(i=this.configMap2),i.forEach(function(t,i){t.level!=e||(n=t)}),n},t.getNextBigLevel=function(e,t){var i=this.getAllList(t);i.sort(function(e,t){return e.level-t.level});for(var n=i[i.length-1],o=0;o<i.length;o++)if(i[o].level>e&&1==i[o].awards){n=i[o];break}return n},t.getMaxLevel=function(e){var t=this.getAllList(e);return t.sort(function(e,t){return e.level-t.level}),t[t.length-1].level},t.getOffestList=function(e,t,i){var n;i==o.BAYE?n=this.configMap:i==o.HEFUBAYE&&(n=this.configMap2);var a=[];return n.forEach(function(i,n){i.level>=e&&i.level<=t&&a.push(i)}),a},t.getAllList=function(e){var t;e==o.BAYE?t=this.configMap:e==o.HEFUBAYE&&(t=this.configMap2);var i=[];return t.forEach(function(e,t){i.push(e)}),i.sort(function(e,t){return e.level-t.level}),i},t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.json2Config2=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap2.set(i,n)})},t.Config_Name="legendaryThinkReward",t.Config_Name2="hefu_ThinkReward",t.configMap=new Map,t.configMap2=new Map,t}(a.JsonConfigBase);i.LegendaryThinkRewardConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],LegendaryThinkTaskConfig:[function(e,t,i){"use strict";cc._RF.push(t,"edc59iueopD/4qjobOV20Ag","LegendaryThinkTaskConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o,a=e("./JsonConfigBase");(function(e){e[e.BAYE=3]="BAYE",e[e.HEFUBAYE=35]="HEFUBAYE"})(o||(o={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.getAllList=function(e){var t;e==o.BAYE?t=this.configMap:e==o.HEFUBAYE&&(t=this.configMap2);var i=[];return t.forEach(function(e,t){i.push(e)}),i},t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(i,n)})},t.json2Config2=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap2.set(i,n)})},t.Config_Name="legendaryThinkTask",t.Config_Name2="hefu_ThinkTask",t.configMap=new Map,t.configMap2=new Map,t}(a.JsonConfigBase);i.LegendaryThinkTaskConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],LeiTaiRankModel:[function(e,t,i){"use strict";cc._RF.push(t,"c23198SqvhBDbxjD+dtG5RE","LeiTaiRankModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./FightRankItemModel"),o=e("../../../engine/EventManager"),a=e("../../event/CommonEvent"),s=e("../../model/ServerTime"),r=function(){function e(){this.rankList=[],this.refreshTime=0}return e.proto2ModelList=function(t){var i=new e;i.prof=t.getProf();for(var r=t.getRankInfoList(),c=[],l=0;l<r.length;l++){var d=n.default.getModel(r[l]);c.push(d)}i.rankList=c,i.refreshTime=s.ServerTime.getServerTime()/1e3;var f=-1;for(l=0;l<this.modelList.length;l++)this.modelList[l].prof==i.prof&&(f=l);f>=0?this.modelList[f]=i:this.modelList.push(i),o.EventManager.instance.dispatch(a.CommonEvent.Event_Refresh_PowerRank)},e.getMaxFightRankModel=function(){for(var e=new n.default,t=[],i=0;i<this.modelList.length;i++)this.modelList[i].rankList.length>0&&t.push(this.modelList[i].rankList[0]);e=t[0];for(i=0;i<t.length;i++)t[i].fight>e.fight&&(e=t[i]);return e},e.modelList=[],e}();i.default=r,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../event/CommonEvent":"CommonEvent","../../model/ServerTime":"ServerTime","./FightRankItemModel":"FightRankItemModel"}],LeiTaiRank:[function(e,t,i){"use strict";cc._RF.push(t,"c3213mFpYtGdb5WDB25K669","LeiTaiRank");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../config/ViewConfig"),r=e("../../network/SocketClient"),c=e("../../event/CommonEvent"),l=e("../../../engine/EventManager"),d=e("../../model/RoleInfoModel"),f=e("../../model/FightModel"),g=e("../../../engine/ViewBase"),h=e("../../model/PkModel"),u=e("../../utils/UIHelper"),p=e("../PublicTipView"),m=e("../../model/CostumeModel"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t}return n(t,e),t.prototype.onInitChild=function(){if(l.EventManager.instance.on(c.CommonEvent.Event_c_arena_info,this.refreshRank,this),r.default.s_arena_info(),this.btn_help=this.findChild(this.node,"bg/top/btn_help"),this.btn_close=this.findChild(this.node,"bg/top/btn_close"),this.itemTop1=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop1"),this.itemTop1.active=!1,this.itemTop2=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop2"),this.itemTop2.active=!1,this.itemTop3=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop3"),this.itemTop3.active=!1,this.itemOther=this.findChild(this.node,"bg/middle/scrollView/view/content/itemOther"),this.itemOther.active=!1,this.itemList.length<=0){this.itemList.push(this.itemTop1),this.itemList.push(this.itemTop2),this.itemList.push(this.itemTop3);for(var e=0;e<97;e++){var t=cc.instantiate(this.itemOther);t.parent=this.itemOther.parent,this.itemList.push(t)}}this.myRank=this.findChild(this.node,"bg/myRank"),this.onAddEvent(this.btn_close,this.closeView.bind(this)),this.onAddEvent(this.btn_help,this.onClickHelp.bind(this)),this.refreshRank()},t.prototype.onClickHelp=function(){a.default.instance.createView(s.default.gameView.RankRuleView,null,p.RuleType.TYPE_LEITAI_2)},t.prototype.refreshRank=function(){for(var e=h.PkModel.ranklist,t=0;t<this.itemList.length;t++)this.itemList[t].active=!1;for(t=0;t<e.length;t++){var i=e[t];0==t?(this.itemTop1.active=!0,this.itemTop1.getChildByName("roleName").getComponent(cc.Label).string=i.name,i.robotid?this.itemTop1.getChildByName("roleName").getComponent(cc.Label).enableUnderline=!1:(this.itemTop1.getChildByName("roleName").getComponent(cc.Label).enableUnderline=!0,this.onAddEvent(this.itemTop1.getChildByName("roleName"),u.UIHelper.showPlayerDetail.bind(this,i.heroid))),this.itemTop1.getChildByName("rolePower").getComponent(cc.Label).string=i.fight+"",this.itemTop1.getChildByName("leitaiZhanli").getComponent(cc.Label).string=i.score+"",m.CostumeModel.setCostSF(this.itemTop1.getChildByName("touxiang").getComponent(cc.Sprite),m.CostumeType.Head,i.personalize.portrait),m.CostumeModel.setCostSF(this.itemTop1.getChildByName("touxiangkuang").getComponent(cc.Sprite),m.CostumeType.HeadFM,i.personalize.portrait_skin)):1==t?(this.itemTop2.active=!0,this.itemTop2.getChildByName("roleName").getComponent(cc.Label).string=i.name,i.robotid?this.itemTop2.getChildByName("roleName").getComponent(cc.Label).enableUnderline=!1:(this.itemTop2.getChildByName("roleName").getComponent(cc.Label).enableUnderline=!0,this.onAddEvent(this.itemTop2.getChildByName("roleName"),u.UIHelper.showPlayerDetail.bind(this,i.heroid))),this.itemTop2.getChildByName("rolePower").getComponent(cc.Label).string=i.fight+"",this.itemTop2.getChildByName("leitaiZhanli").getComponent(cc.Label).string=i.score+"",m.CostumeModel.setCostSF(this.itemTop2.getChildByName("touxiang").getComponent(cc.Sprite),m.CostumeType.Head,i.personalize.portrait),m.CostumeModel.setCostSF(this.itemTop2.getChildByName("touxiangkuang").getComponent(cc.Sprite),m.CostumeType.HeadFM,i.personalize.portrait_skin)):2==t?(this.itemTop3.active=!0,this.itemTop3.getChildByName("roleName").getComponent(cc.Label).string=i.name,i.robotid?this.itemTop3.getChildByName("roleName").getComponent(cc.Label).enableUnderline=!1:(this.itemTop3.getChildByName("roleName").getComponent(cc.Label).enableUnderline=!0,this.onAddEvent(this.itemTop3.getChildByName("roleName"),u.UIHelper.showPlayerDetail.bind(this,i.heroid))),this.itemTop3.getChildByName("rolePower").getComponent(cc.Label).string=i.fight+"",this.itemTop3.getChildByName("leitaiZhanli").getComponent(cc.Label).string=i.score+"",m.CostumeModel.setCostSF(this.itemTop3.getChildByName("touxiang").getComponent(cc.Sprite),m.CostumeType.Head,i.personalize.portrait),m.CostumeModel.setCostSF(this.itemTop3.getChildByName("touxiangkuang").getComponent(cc.Sprite),m.CostumeType.HeadFM,i.personalize.portrait_skin)):(this.itemList[t].getChildByName("order").getComponent(cc.Label).string=t+1+"",this.itemList[t].getChildByName("roleName").getComponent(cc.Label).string=i.name,i.robotid?this.itemList[t].getChildByName("roleName").getComponent(cc.Label).enableUnderline=!1:(this.itemList[t].getChildByName("roleName").getComponent(cc.Label).enableUnderline=!0,this.onAddEvent(this.itemList[t].getChildByName("roleName"),u.UIHelper.showPlayerDetail.bind(this,i.heroid))),this.itemList[t].getChildByName("rolePower").getComponent(cc.Label).string=i.fight+"",this.itemList[t].getChildByName("leitaiZhanli").getComponent(cc.Label).string=i.score+"",m.CostumeModel.setCostSF(this.itemList[t].getChildByName("touxiang").getComponent(cc.Sprite),m.CostumeType.Head,i.personalize.portrait),m.CostumeModel.setCostSF(this.itemList[t].getChildByName("touxiangkuang").getComponent(cc.Sprite),m.CostumeType.HeadFM,i.personalize.portrait_skin),this.itemList[t].active=!0);var n=h.PkModel.rankid;n>0&&n<=100?(this.myRank.getChildByName("wei").active=!1,this.myRank.getChildByName("order").active=!0,this.myRank.getChildByName("order").getComponent(cc.Label).string=n+""):(this.myRank.getChildByName("wei").active=!0,this.myRank.getChildByName("order").active=!1),this.myRank.getChildByName("roleName").getComponent(cc.Label).string=d.default.instance.roleName,this.myRank.getChildByName("rolePower").getComponent(cc.Label).string=f.default.totalFight+"",this.myRank.getChildByName("leitaiZhanli").getComponent(cc.Label).string=h.PkModel.score+"",m.CostumeModel.setCostSF(this.myRank.getChildByName("touxiang").getComponent(cc.Sprite),m.CostumeType.Head),m.CostumeModel.setCostSF(this.myRank.getChildByName("touxiangkuang").getComponent(cc.Sprite),m.CostumeType.HeadFM)}},t.type_leitai=3,t=o([_],t)}(g.default));i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/FightModel":"FightModel","../../model/PkModel":"PkModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView"}],LibaoCellPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"480a7Z5YGhIL6ntDQkHI70D","LibaoCellPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/RoleInfoModel"),r=e("../../model/ChargeGiftModel"),c=e("../../model/PrivilegeModel"),l=e("../../model/ItemInfoModel"),d=e("../../../engine/UIManager"),f=e("../../config/ViewConfig"),g=e("../../utils/UIHelper"),h=e("./LibaoView"),u=e("../../model/XianshilibaoModel"),p=e("../../utils/MusicHelper"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=0,t}return n(t,e),t.prototype.onInitChild=function(e){this.cur_cell_type=e,this.onShow()},t.prototype.onShow=function(){this.onAddEvent(this.node,this.cellOnButtonBackFun.bind(this,this.cur_cell_type)),this.itemBGNode=this.node.getChildByName("libaocell_bg"),this.animation=this.itemBGNode.getComponent(cc.Animation),this.itemLabNode=this.node.getChildByName("libaocell_lab"),this.itemLabNode=this.node.getChildByName("libaocell_lab"),this.red_node=this.node.getChildByName("icon"),this.data_lab=this.itemLabNode.getComponent(cc.Label),this.data_lab.string="",this.refreshFun()},t.prototype.playcanAnimation=function(){this.animation.getClips();this.node.active||this.animation&&this.animation.stop(),this.animation&&this.animation.play(this.cur_cell_type,0)},t.prototype.refreshFun=function(){switch(this.unschedule(this.downFunction),this.cur_cell_type){case"shouchong":this.itemLabNode.active=!1,this.firstShowFun();break;case"tequan":this.itemLabNode.active=!1,this.tequanShowFun();break;case"yiyutansuo":this.itemLabNode.active=!1,this.yiyutesuoFun();break;case"xianshi":this.itemLabNode.active=!0,this.zuiqiangShowFun()}this.playcanAnimation(),this.red_node.active=h.default.red_icon_show[this.cur_cell_type],this.red_node.x=25},t.prototype.getCellIndex=function(){switch(this.cur_cell_type){case"shouchong":return-10;case"tequan":return-9;case"yiyutansuo":return-8;case"xianshi":return this.leftTime}},t.prototype.zuiqiangShowFun=function(){var e=l.default.getItemAmount("I6004"),t=l.default.getItemAmount("I6005"),i=l.default.getItemAmount("I6008");this.node.active=i>0||t>0||e>0||u.default.libaoInfoAllArr.length>0},t.prototype.yiyutesuoFun=function(){var e=s.default.instance.level>=30;this.node.active=e},t.prototype.tequanShowFun=function(){var e=!1;c.default.hadRecoveryPrivilege()||(e=!0),c.default.hadFightGodPrivilege()||(e=!0),this.node.active=e},t.prototype.firstShowFun=function(){var e=!1;1==s.default.instance.has_reward?e=!0:0==s.default.instance.has_reward?e=!0:(1==r.default.goldstatus&&(e=!0),1==r.default.silverstatus&&(e=!0)),this.node.active=e},t.prototype.update=function(e){},t.prototype.cellOnButtonBackFun=function(e){switch(p.MusicHelper.play_click(),this.cur_cell_type){case"shouchong":d.default.instance.createView(f.default.gameView.topUp,null,0);break;case"tequan":d.default.instance.createView(f.default.gameView.topUp,null,2);break;case"yiyutansuo":g.UIHelper.gotoButtomTab(3);break;case"xianshi":d.default.instance.createView(f.default.gameView.XianshiLibaoView,null)}h.default.red_icon_show[this.cur_cell_type]=!1,this.red_node.active=h.default.red_icon_show[this.cur_cell_type]},t.prototype.closeView=function(){},t.prototype.closeInputEvents=function(e){},t.MagicId={},t=o([C],t)}(a.default));i.default=_,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../model/ChargeGiftModel":"ChargeGiftModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/PrivilegeModel":"PrivilegeModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/XianshilibaoModel":"XianshilibaoModel","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","./LibaoView":"LibaoView"}],LibaoView:[function(e,t,i){"use strict";cc._RF.push(t,"319f2CrhHtGtq/oSfuifXfy","LibaoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../event/CommonEvent"),r=e("../../../engine/EventManager"),c=e("../../config/GameConst");(function(e){e[e.shouchong=0]="shouchong",e[e.tequan=1]="tequan",e[e.zuiqiangfangyu=2]="zuiqiangfangyu",e[e.zuiqiangjineng=3]="zuiqiangjineng",e[e.zuiqiangqungong=4]="zuiqiangqungong"})(i.libaomenType||(i.libaomenType={}));var l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e){},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.itemNode=this.node.getChildByName("libaoCell"),this.refreshUI()},t.prototype.onEnable=function(){r.EventManager.instance.on(s.CommonEvent.Event_ZUIQIANG_ITEM_RESH,this.refreshUI,this),r.EventManager.instance.on(s.CommonEvent.Event_has_reward,this.refreshUI,this),r.EventManager.instance.on(s.CommonEvent.Event_Gift_refresh,this.refreshUI,this),r.EventManager.instance.on(c.EVENT_NAME.REFRESH_PRIVILEGE,this.refreshUI,this),r.EventManager.instance.on(s.CommonEvent.Event_USER_LVVEL_RESH,this.refreshUI,this),r.EventManager.instance.on(s.CommonEvent.Event_XIANSHI_LIBAO_RUSH,this.refreshUI,this)},t.prototype.onShow=function(){},t.prototype.refreshUI=function(){for(var e=0,t=i.menu_icon_arr,n=[];e<t.length;++e){var o=void 0;e<this.node.childrenCount?o=this.node.children[e]:(o=cc.instantiate(this.itemNode)).parent=this.node,(a=o.getComponent("LibaoCellPrefab")).onInitChild(i.menu_icon_arr[e]),n.push(a)}for(n.sort(function(e,t){return e.getCellIndex()-t.getCellIndex()}),e=0;e<n.length;++e){var a;(o=(a=n[e]).node)&&(o.zIndex=e)}},t.prototype.cellOnButtonBackFun=function(){this.refreshUI()},t.menu_icon_arr=["shouchong","tequan","yiyutansuo","xianshi"],t.red_icon_show={shouchong:!0,tequan:!0,yiyutansuo:!0,xianshi:!0},t.MagicId={},t=i=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../event/CommonEvent":"CommonEvent"}],ListViewBase:[function(e,t,i){"use strict";cc._RF.push(t,"bbb491IrM9LwYpZVu2C3xO4","ListViewBase");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("./ListViewItemBase"),r=cc._decorator,c=r.ccclass,l=r.property;(function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.TOP_TO_BOTTOM=2]="TOP_TO_BOTTOM",e[e.BOTTOM_TO_TOP=3]="BOTTOM_TO_TOP"})(a=i.LIST_VIEW||(i.LIST_VIEW={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefabList=[],t.direction=a.TOP_TO_BOTTOM,t.spacing=0,t.paddingStart=0,t.paddingEnd=0,t._dataSource=[],t._nodePoolList=[],t._didInit=!1,t}return n(t,e),t.prototype.onLoad=function(){this._scrollView=this.getComponent(cc.ScrollView)},t.prototype.onDestroy=function(){this._nodePoolList&&this._nodePoolList.forEach(function(e){e.clear()})},t.prototype.init=function(){this._didInit||(this._didInit=!0,this._initNodePool(),this._initScrollView(),this._resetParams())},t.prototype.reloadData=function(e,t){this.init(),this._dataSource=e,this.reloadView(t)},t.prototype.reloadView=function(e){this._initDataSource(),this._resetShowParams(this._scrollView.getScrollOffset()),e>=0&&this.scrollToOffsetByIndex(e)},t.prototype.itemIndexToPrefabIndex=function(e){return e>=0&&e<this._dataSource.length&&void 0!=this._dataSource[e].prefabIndex?this._dataSource[e].prefabIndex:0},t.prototype.newItem=function(e){var t=this._getPrefab(e);return cc.instantiate(t)},t.prototype.scrollToOffsetByIndex=function(e){var t=this._maxIndex-this._minIndex,i=e+t;i>this._count-1&&(e=(i=this._count-1)-t);for(var n=e;n<=i;n++)this._addItem(n);this._oldMaxIndex=i,this._oldMinIndex=i-t;var o=this._scrollView.getScrollOffset();switch(this.direction){case a.LEFT_TO_RIGHT:o.x=this._startPosList[e];break;case a.RIGHT_TO_LEFT:o.x=this._startPosList[this._startPosList.length-1]-this._startPosList[i];break;case a.TOP_TO_BOTTOM:o.y=this._startPosList[e];break;case a.BOTTOM_TO_TOP:o.y=this._startPosList[this._startPosList.length-1]-this._startPosList[i]}this._scrollView.scrollToOffset(o)},t.prototype.initItem=function(e,t){var i=e.getComponent(s.default),n=this._dataSource[t];i.init(t,n)},t.prototype._initNodePool=function(){this._nodePoolList=[];for(var e=this.itemPrefabList.length,t=0;t<e;t++)this._nodePoolList[t]=new cc.NodePool},t.prototype._initScrollView=function(){switch(this._scrollView=this.getComponent(cc.ScrollView),this.direction){case a.LEFT_TO_RIGHT:this._scrollView.horizontal=!0,this._scrollView.vertical=!1,this._scrollView.content.anchorX=0,this._scrollView.content.anchorY=.5;break;case a.RIGHT_TO_LEFT:this._scrollView.horizontal=!0,this._scrollView.vertical=!1,this._scrollView.content.anchorX=1,this._scrollView.content.anchorY=.5;break;case a.TOP_TO_BOTTOM:this._scrollView.horizontal=!1,this._scrollView.vertical=!0,this._scrollView.content.anchorX=.5,this._scrollView.content.anchorY=1;break;case a.BOTTOM_TO_TOP:this._scrollView.horizontal=!1,this._scrollView.vertical=!0,this._scrollView.content.anchorX=.5,this._scrollView.content.anchorY=0}this._scrollView.node.on("scrolling",this._onScrolling,this)},t.prototype._resetParams=function(){this._startPosList=[],this._itemMap=new Map,this._oldMinIndex=-1,this._oldMaxIndex=-1,this._minIndex=-1,this._maxIndex=-1},t.prototype._getPrefab=function(e){return this.itemPrefabList[this.itemIndexToPrefabIndex(e)]},t.prototype._getNodePool=function(e){return this._nodePoolList[this.itemIndexToPrefabIndex(e)]},t.prototype._getItem=function(e){var t=this._getItemFromPool(e);return t||this.newItem(e)},t.prototype._getItemFromPool=function(e){var t=this._getNodePool(e);return t.size()>0?t.get():void 0},t.prototype._putItemToPool=function(e,t){this._getNodePool(e).put(t)},t.prototype._getItemLength=function(e){var t=this._getPrefab(e);return this.direction==a.LEFT_TO_RIGHT||this.direction==a.RIGHT_TO_LEFT?t.data.width:t.data.height},t.prototype._initDataSource=function(){if(this._oldMinIndex>=0)for(var e=this._oldMinIndex;e<=this._oldMaxIndex;e++)this._removeItem(e);this._resetParams();var t,i,n=this._dataSource.length;i=this.paddingStart;for(var o=0;o<n;o++){this._startPosList[o]=i;var s=this._getItemLength(o);o==n-1?i+=s:i=i+s+this.spacing}i+=this.paddingEnd,this.direction==a.LEFT_TO_RIGHT||this.direction==a.RIGHT_TO_LEFT?(t=this._scrollView.node.width,this._scrollView.content.width=Math.max(i,t)):(t=this._scrollView.node.height,this._scrollView.content.height=Math.max(i,t)),this._count=n,this._viewLength=t,this._contentLength=i},t.prototype._resetShowParams=function(e){var t=this._count,i=this._contentLength,n=this._viewLength,o=0,s=0;switch(this.direction){case a.LEFT_TO_RIGHT:o=-e.x,s=-e.x+n;break;case a.RIGHT_TO_LEFT:o=i+e.x-n,s=i+e.x;break;case a.TOP_TO_BOTTOM:o=e.y,s=e.y+n;break;case a.BOTTOM_TO_TOP:o=i-e.y-n,s=i-e.y}for(var r=t-1,c=t-1,l=0;l<t-1;l++){if((d=this._startPosList[l])>=o){r=l;break}if((f=this._startPosList[l+1])>o){r=l;break}}for(l=0;l<t-1;l++){var d=this._startPosList[l],f=this._startPosList[l+1];if(d<s&&s<=f){c=l;break}}this._minIndex=r,this._maxIndex=c,this._updateItem()},t.prototype._updateItem=function(){for(var e=this._minIndex,t=this._maxIndex,i=this._oldMinIndex,n=this._oldMaxIndex,o=Math.max(e,i),a=Math.min(t,n),s=i;s<o;s++)this._removeItem(s);for(s=a+1;s<=n;s++)this._removeItem(s);for(s=e;s<o;s++)this._addItem(s);for(s=a+1;s<=t;s++)this._addItem(s);this._oldMinIndex=e,this._oldMaxIndex=t},t.prototype._addItem=function(e){var t=this._getItem(e);switch(t.parent=this._scrollView.content,this.direction){case a.LEFT_TO_RIGHT:t.x=this._startPosList[e]+t.width*t.anchorX,t.y=t.height*(t.anchorY-.5);break;case a.RIGHT_TO_LEFT:t.x=-this._startPosList[e]-t.width*(1-t.anchorX),t.y=t.height*(t.anchorY-.5);break;case a.TOP_TO_BOTTOM:t.x=t.width*(t.anchorX-.5),t.y=-this._startPosList[e]-t.height*(1-t.anchorY);break;case a.BOTTOM_TO_TOP:t.x=t.width*(t.anchorX-.5),t.y=this._startPosList[e]+t.height*t.anchorY}this.initItem(t,e),this._itemMap.set(e,t)},t.prototype._removeItem=function(e){this._putItemToPool(e,this._itemMap.get(e)),this._itemMap.set(e,void 0)},t.prototype._onScrolling=function(e){this._resetShowParams(e.getScrollOffset())},o([l({type:cc.Prefab,tooltip:"\u5355\u5143\u683c\u9884\u5236\u4f53\u5217\u8868\uff0c\u9ed8\u8ba4\u4ec5\u53d6\u7b2c\u4e00\u4e2a\u3002\u8bbe\u5b9a\u4e3a\u5217\u8868\u662f\u4e3a\u4e86\u5b50\u7c7b\u81ea\u5b9a\u4e49\u5217\u8868\u2014\u2014\u542b\u6709\u4e0d\u540c\u6837\u5f0f\u7684\u5355\u5143\u683c\u7684\u5217\u8868\u3002"})],t.prototype,"itemPrefabList",void 0),o([l({type:cc.Enum(a),tooltip:"\u5217\u8868\u5355\u5143\u683c\u6392\u5217\u7684\u65b9\u5411"})],t.prototype,"direction",void 0),o([l({type:cc.Integer,tooltip:"\u5355\u5143\u683c\u95f4\u8ddd"})],t.prototype,"spacing",void 0),o([l({type:cc.Integer,tooltip:"\u5f00\u59cb\u8fb9\u8ddd"})],t.prototype,"paddingStart",void 0),o([l({type:cc.Integer,tooltip:"\u7ed3\u675f\u8fb9\u8ddd"})],t.prototype,"paddingEnd",void 0),t=o([c],t)}(cc.Component);i.default=d,cc._RF.pop()},{"./ListViewItemBase":"ListViewItemBase"}],ListViewItemBase:[function(e,t,i){"use strict";cc._RF.push(t,"85655waZCJM/rBF43jpSuK5","ListViewItemBase");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(e,t,i){this.index=e,this.data=t},t=o([s],t)}(cc.Component));i.default=r,cc._RF.pop()},{}],ListView:[function(e,t,i){"use strict";cc._RF.push(t,"075fbLB5VlPMaaQeLRHwvWC","ListView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=cc.Component,c=cc._decorator,l=c.ccclass,d=c.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemTemplate=null,t.spacing=cc.v2(0,0),t.margin=cc.rect(0,0,0,0),t.spawnCount=2,t.column=1,t.scrollView=null,t.emptyView=null,t.content=null,t.adapter=null,t._items=new cc.NodePool,t._filledIds={},t.horizontal=!1,t._itemHeight=1,t._itemWidth=1,t._itemsVisible=1,t.dataChanged=!1,t._isInited=!1,t.visibleRange=[-1,-1],t.comp=null,t}return n(t,e),t.prototype.onLoad=function(){this.init(),this.pager=new g(this),this.scrollView},t.prototype.setAdapter=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){return this.adapter===e?(this.notifyUpdate(),[2]):(this.adapter=e,null==this.adapter?(console.warn("adapter \u4e3a\u7a7a."),[2]):null==this.itemTemplate?(console.error("Listview \u672a\u8bbe\u7f6e\u5f85\u663e\u793a\u7684Item\u6a21\u677f."),[2]):(this.visibleRange[0]=this.visibleRange[1]=-1,this.recycleAll(),this.notifyUpdate(),[2]))})})},t.prototype.getAdapter=function(){return this.adapter},t.prototype.getScrollView=function(){return this.scrollView},t.prototype.getAllItems=function(){return this._items},t.prototype.scrollToPage=function(e,t,i){if(!this.adapter||!this.scrollView)return!1;this.adapter.getCount();if(this.horizontal){var n=0,o=this.content.width,a=this.getColumnWH();if(t)n=a*t;else{var s=this.content.parent.width;n=Math.floor(s/a)*a}return this.scrollView.scrollToOffset(cc.v2(n*e,0),i),n*(e+1)>=o}var r=this.content.height,c=this.getColumnWH(),l=0;if(t)l=c*t;else{var d=this.content.parent.height;l=Math.floor(d/c)*c}return this.scrollView.scrollToOffset(cc.v2(0,l*e),i),l*(e+1)>=r},t.prototype.getVisibleElements=function(){var e=0;if(this.horizontal){var t=this.content.parent.width;e=Math.floor(t/this.getColumnWH())}else{var i=this.content.parent.height;e=Math.floor(i/this.getColumnWH())}return e*this.column},t.prototype.getColumnWH=function(){return this.horizontal?this._itemWidth+this.spacing.x:this._itemHeight+this.spacing.y},t.prototype.notifyUpdate=function(){null!=this.adapter&&(this._isOnLoadCalled||this.init(),this.scrollView&&this.content&&(this.emptyView&&(this.emptyView.opacity=this.adapter.getCount()>0?0:255),this.visibleRange[0]=this.visibleRange[1]=-1,this.horizontal?this.content.width=Math.ceil(this.adapter.getCount()/this.column)*(this._itemWidth+this.spacing.x)-this.spacing.x+this.margin.x+this.margin.width:this.content.height=Math.ceil(this.adapter.getCount()/this.column)*(this._itemHeight+this.spacing.y)-this.spacing.y+this.margin.y+this.margin.height,this.dataChanged=!0))},t.prototype.lateUpdate=function(){var e=this.getVisibleRange();this.checkNeedUpdate(e)&&(this.recycleDirty(e),this.updateView(e))},t.prototype._layoutVertical=function(e,t){this.content.addChild(e);var i=t%(this.column||1),n=Math.floor(t/(this.column||1));e.setPosition(this.column>1?this.margin.x+e.width*e.anchorX+(e.width+this.spacing.x)*i-this.content.width*this.content.anchorX:0,-this.margin.y-e.height*(e.anchorY+n)-this.spacing.y*n)},t.prototype._layoutHorizontal=function(e,t){this.content.addChild(e);var i=t%(this.column||1),n=Math.floor(t/(this.column||1));e.setPosition(e.width*(e.anchorX+n)+this.spacing.x*n+this.margin.x,this.column>1?-1*(this.margin.y+e.height*e.anchorY+(e.height+this.spacing.y)*i-this.content.height*this.content.anchorY):0)},t.prototype.recycleAll=function(){for(var e in this._filledIds)this._filledIds.hasOwnProperty(e)&&this._items.put(this._filledIds[e]);this._filledIds={}},t.prototype.recycleDirty=function(e){if(e&&!(e.length<2)){for(var t=this.visibleRange[0];t<e[0];t++)t<0||!this._filledIds[t]||(this._items.put(this._filledIds[t]),this._filledIds[t]=null);for(var i=this.visibleRange[1];i>e[1];i--)i<0||!this._filledIds[i]||(this._items.put(this._filledIds[i]),this._filledIds[i]=null);this.visibleRange[0]=e[0],this.visibleRange[1]=e[1]}},t.prototype.checkNeedUpdate=function(e){return e&&this.visibleRange&&(this.visibleRange[0]!=e[0]||this.visibleRange[1]!=e[1])},t.prototype.updateView=function(e){for(var t=e[0];t<=e[1];t++)if(this.dataChanged||!this._filledIds[t]){var i=this._filledIds[t]||this._items.get()||cc.instantiate(this.itemTemplate);!this.comp||i.getComponent(r)instanceof this.comp||(i.removeComponent(r),i.addComponent(this.comp)),i.removeFromParent(!1),this.horizontal?this._layoutHorizontal(i,t):this._layoutVertical(i,t),this._filledIds[t]=this.adapter._getView(i,t)}this.dataChanged=!1},t.prototype.getVisibleRange=function(){if(null==this.adapter)return null;var e=this.scrollView.getScrollOffset(),t=0;(t=this.horizontal?Math.floor(-e.x/(this._itemWidth+this.spacing.x)):Math.floor(e.y/(this._itemHeight+this.spacing.y)))<0&&(t=0);var i=this.column*(t+this._itemsVisible+this.spawnCount);return i>=this.adapter.getCount()&&(i=this.adapter.getCount()-1),[t*this.column,i]},t.prototype.init=function(){if(!this._isInited){this._isInited=!0,this.scrollView?(this.content=this.scrollView.content,this.horizontal=this.scrollView.horizontal,this.horizontal?(this.scrollView.vertical=!1,this.content.anchorX=0,this.content.anchorY=this.content.parent.anchorY,this.content.x=0-this.content.parent.width*this.content.parent.anchorX,this.content.y=0):(this.scrollView.vertical=!0,this.content.anchorX=this.content.parent.anchorX,this.content.anchorY=1,this.content.x=0,this.content.y=this.content.parent.height*this.content.parent.anchorY)):console.error("ListView need a scrollView for showing.");var e=this._items.get()||cc.instantiate(this.itemTemplate);this._items.put(e),this._itemHeight=e.height||10,this._itemWidth=e.width||10,this.horizontal?this._itemsVisible=Math.ceil((this.content.parent.width-this.margin.x-this.margin.width)/(this._itemWidth+this.spacing.x)):this._itemsVisible=Math.ceil((this.content.parent.height-this.margin.y-this.margin.height)/(this._itemHeight+this.spacing.y))}},o([d({type:cc.Prefab,tooltip:"\u5217\u8868\u5185\u7684\u5355\u5143\u683c\u9884\u5236\u4f53"})],t.prototype,"itemTemplate",void 0),o([d({tooltip:"\u5355\u5143\u683c\u4e4b\u95f4\u7684\u95f4\u9694"})],t.prototype,"spacing",void 0),o([d({tooltip:"\u4e0e\u5bb9\u5668\u56db\u5468\u7684\u95f4\u9694"})],t.prototype,"margin",void 0),o([d({type:cc.Integer,tooltip:"\u53ef\u89c1\u5143\u7d20\u591a\u7f13\u5b58\u4e2a\u6570, \u7f13\u5b58\u8d8a\u591a,\u5feb\u901f\u6ed1\u52a8\u8d8a\u6d41\u7545,\u4f46\u540c\u65f6\u521d\u59cb\u5316\u8d8a\u6162"})],t.prototype,"spawnCount",void 0),o([d({type:cc.Integer,tooltip:"\u6a2a\u5411\u5e03\u5c40\u7684item \u6570\u91cf. \u9ed8\u8ba4\u4e3a1,\u5373\u6bcf\u884c\u4e00\u4e2a\u5143\u7d20."})],t.prototype,"column",void 0),o([d(cc.ScrollView)],t.prototype,"scrollView",void 0),o([d({type:cc.Node,tooltip:"\u5217\u8868\u4e3a\u7a7a\u65f6\u5019\u5c55\u793a\u7684\u8282\u70b9\uff0c\u53ef\u4ee5\u4e0d\u4f20"})],t.prototype,"emptyView",void 0),t=o([l],t)}(cc.Component);i.default=f;var g=function(){function e(e,t){void 0===t&&(t=0),this.listView=null,this.pageOfItems=0,this.currentPageIndex=0,this.onPageChangeListener=null,this.listView=e,this.pageOfItems=t}return e.prototype.getPageCount=function(){if(!this.listView.getAdapter())return 1;var e=this.listView.getAdapter().getCount();return this.pageOfItems||(this.pageOfItems=this.listView.getVisibleElements()),this.pageOfItems<=0&&(this.pageOfItems=1),Math.ceil(e/this.pageOfItems)},e.prototype.getCurrentPage=function(){return this.currentPageIndex},e.prototype.prePage=function(){this.currentPageIndex--,this.currentPageIndex<0&&(this.currentPageIndex=0),this.listView.scrollToPage(this.currentPageIndex,0,.2),this.onPageChangeListener&&this.onPageChangeListener(this.listView,this.currentPageIndex)},e.prototype.nextPage=function(){this.currentPageIndex++;var e=this.getPageCount();this.currentPageIndex>e-1&&(this.currentPageIndex=e-1),this.listView.scrollToPage(this.currentPageIndex,0,.2),this.onPageChangeListener&&this.onPageChangeListener(this.listView,this.currentPageIndex)},e.prototype.canPrePage=function(){return this.currentPageIndex>0},e.prototype.canNextPage=function(){return this.currentPageIndex<this.getPageCount()-1},e.prototype.setOnPageChangeListener=function(e){this.onPageChangeListener=e},e}();i.Pager=g;var h=function(){function e(){this.dataSet=[]}return e.prototype.setDataSet=function(e){this.dataSet=e||[]},e.prototype.getCount=function(){return this.dataSet?this.dataSet.length:0},e.prototype.getItem=function(e){return this.dataSet[e]},e.prototype._getView=function(e,t){return this.updateView(e,t,this.dataSet[t]),e},e}();i.AbsAdapter=h,cc._RF.pop()},{}],LoadingTipView:[function(e,t,i){"use strict";cc._RF.push(t,"7b2642SO/tLzZzJkEczu7I4","LoadingTipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../config/WordConfig"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){s.default.instance.setTopUI(r.default.gameView.LoadingTipView),this.node.y=90,this.txtTip=this.getChild(this.node,"container/txtTip",cc.Label),this.img_shangshen_bg=this.findChild(this.node,"img_shangshen_bg"),this.lastVla=0,this.schedule(this.onAnim,.5),this.txtTip.string=this.tipStr},t.prototype.onInitChild=function(e){void 0===e&&(e=c.WordConfig.getWord(60568)),this.tipStr=e},t.prototype.onAnim=function(){this.lastVla+=1,this.txtTip.string+=" .",this.lastVla>3&&(this.lastVla=0,this.txtTip.string=this.tipStr)},t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig"}],LoadingView:[function(e,t,i){"use strict";cc._RF.push(t,"2dcdb1ljkJGlK9ZjBQOEpKt","LoadingView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../engine/EventManager"),c=e("../../engine/HotUpdate"),l=e("../../engine/Logger"),d=e("../../engine/UIManager"),f=e("../../engine/VersionManager"),g=e("../../engine/ViewBase"),h=e("../config/GameConfig"),u=e("../config/SpriteFrameConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../event/CommonEvent"),_=e("../GameController"),v=e("../network/HttpHelper"),y=e("../sdk/SdkHandler"),b=e("../sdk/SdkHelper"),I=e("../sdk/SdkManager"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.percent=0,t}return n(t,e),t.prototype.onShow=function(){d.default.instance.setTopUI(p.default.gameView.loading),this.loading=this.node.getChildByName("loading").getComponent(cc.Label),this.lastVla=0,this.progressBar=this.node.getChildByName("progressBar").getComponent(cc.ProgressBar),this.progressBar.progress=0,this.progressBar.node.active=!1,this.txtProgress=this.node.getChildByName("txtProgress").getComponent(cc.Label),this.txtProgress.string="",this.schedule(this.onAnim,.5),r.EventManager.instance.on(c.default.Event_On_NeedUpdate,this.onNeedUpdate,this),r.EventManager.instance.on(c.default.Event_On_Progress,this.onUpdateProgress,this),r.EventManager.instance.on(c.default.Event_On_Fail_Update,this.onUpdateFail,this),r.EventManager.instance.on(c.default.Event_Finish_Update,this.onUpdateFinish,this),r.EventManager.instance.on(c.default.Event_On_ALREADY_UP_TO_DATE,this.onUpdateFinish,this),r.EventManager.instance.on(C.CommonEvent.Event_SdkGetInfo,this.refreshBg,this),r.EventManager.instance.on(C.CommonEvent.Event_LoadingProgress,this.onLoadingProgress,this),this.textNode=this.findChild(this.node,"text"),this.textNode.active=!1,this.checkUpdate()},t.prototype.onEnable=function(){this.btnLogin=this.findChild(this.node,"btnLogin"),this.onAddEvent(this.btnLogin,function(){_.default.instance.startGame()})},t.prototype.start=function(){this.refreshBg(),cc.sys.isBrowser&&(h.GameConfig.sdkType!=h.SdkType.FengYue&&h.GameConfig.sdkType!=h.SdkType.Xiaotun||I.default.sdkAuth(y.AuthType.init)),h.GameConfig.sdkType==h.SdkType.Xiaotun?I.default.sdkAuth(y.AuthType.init):h.GameConfig.isWechat()&&I.default.sdkAuth(y.AuthType.init)},t.prototype.refreshBg=function(){this.bg=this.node.getChildByName("bg").getComponent(cc.Sprite),this.bg.spriteFrame=u.SpriteFrameConfig.loadingBG_frame},t.prototype.update=function(){},t.prototype.onHide=function(){this.unscheduleAllCallbacks()},t.prototype.checkUpdate=function(){var e=this;console.log("checkUpdate"),cc.sys.getNetworkType()!=cc.sys.NetworkType.NONE?h.GameConfig.sdkType==h.SdkType.Feiyou?cc.sys.isBrowser?this.startLoadingLocal():v.default.getHotUpdateSwitch(function(t){b.default.isAndroid()?1==t.as?e.checkStartUpdate():e.startLoadingLocal():b.default.isIos()?1==t.is?e.checkStartUpdate():e.startLoadingLocal():e.checkStartUpdate()}):(console.log("checkUpdate2"),this.checkStartUpdate()):(console.log("checkUpdate3"),this.scheduleOnce(function(){e.checkUpdate()},1))},t.prototype.checkStartUpdate=function(){f.default.instance.isOpenHotUpdate?f.default.instance.checkUpdate(0):this.startLoadingLocal()},t.prototype.onNeedUpdate=function(e){e==f.default.Config_Key[0]&&(this.isHotupdating=!0,f.default.instance.startUpdate(0),this.progressBar.node.active=!0)},t.prototype.onUpdateProgress=function(e,t,i){if(i==f.default.Config_Key[0]){this.isHotupdating=!0;var n=Math.min(100,e/t*100).toFixed(2)+"%";this.txtProgress.string=n,this.progressBar.progress=e/t,this.findChild(this.node,"progressBar/bar/icon").setPosition(this.percent/100*395,0)}},t.prototype.onUpdateFail=function(e){e==f.default.Config_Key[0]&&(l.Logger.warn("\u70ed\u66f4\u65b0\u5931\u8d25========"),m.WordConfig.showWord(60325),this.scheduleOnce(function(){cc.game.restart()},2))},t.prototype.onUpdateFinish=function(e,t){this.isHotupdating=!1,e!=f.default.Config_Key[0]||t||this.startLoadingLocal()},t.prototype.getLoadProgressInfo=function(e,t,i){e||(e={precent:0,realPrecent:0,completedCount:0,totalCount:0,lastPrecent:0,lastCompletedCount:0,tickTimes:0}),e.tickTimes=e.tickTimes+1;var n=Math.min(e.tickTimes/100,.01);if(0==i)return e.precent=n,e;if(i==t)return e.precent=1,e;i>e.totalCount&&(e.lastCompletedCount=e.completedCount,e.lastPrecent=e.realPrecent);var o=(1-e.lastPrecent)/(i-e.lastCompletedCount);return e.realPrecent=e.lastPrecent+(t-e.lastCompletedCount)*o,e.completedCount=t,e.totalCount=i,e.precent=Math.max(e.realPrecent,n),e},t.prototype.startLoadingLocal=function(){this.progressBar.node.active=!0,this.accountLogin()},t.prototype.onLoadingProgress=function(e,t){this.progressInfo=this.getLoadProgressInfo(this.progressInfo,e,t);var i=100*this.progressInfo.precent,n=Math.floor(i/100*100);n>n&&(n=n),this.txtProgress.string=n+"%",this.progressBar.progress=n/100,this.findChild(this.node,"progressBar/bar/icon").setPosition(n/100*395,0)},t.prototype.accountLogin=function(){return a(this,void 0,void 0,function(){return s(this,function(e){return this.progressBar.node.active=!1,_.default.instance.startGame(),this.btnLogin.active=h.GameConfig.sdkType==h.SdkType.LongRui||h.GameConfig.sdkType==h.SdkType.KoreaBingNiao||h.GameConfig.sdkType==h.SdkType.FengYue||h.GameConfig.sdkType==h.SdkType.Xiaotun,this.progressBar.node.active=!this.btnLogin.active,this.loading.node.active=!this.btnLogin.active,this.txtProgress.node.active=!this.btnLogin.active,[2]})})},t.prototype.onAnim=function(){this.lastVla+=1,this.loading.string+=" .",this.lastVla>3&&(this.lastVla=0,this.isHotupdating?this.loading.string=m.WordConfig.getWord(60453):this.loading.string=m.WordConfig.getWord(60454))},t=o([w],t)}(g.default));i.default=k,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/HotUpdate":"HotUpdate","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/VersionManager":"VersionManager","../../engine/ViewBase":"ViewBase","../GameController":"GameController","../config/GameConfig":"GameConfig","../config/SpriteFrameConfig":"SpriteFrameConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../network/HttpHelper":"HttpHelper","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager"}],LocalStorage:[function(e,t,i){"use strict";cc._RF.push(t,"39ea6mUx7dMiJ/SeWX7YNQb","LocalStorage"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./HaoEncrypt"),o=function(){function e(){}return e.setItem=function(t,i){var o=n.default.encode(i);cc.sys.localStorage.setItem(e.GamePreFlag+t,o)},e.getItem=function(t){var i=cc.sys.localStorage.getItem(e.GamePreFlag+t),o=i;return i&&(o=n.default.decode(i)),o},e.removeItem=function(t){cc.sys.localStorage.removeItem(e.GamePreFlag+t)},e.getInt=function(t){var i=e.getItem(t),n=0;return i&&(n=parseInt(i)),n},e.setInt=function(t,i){e.setItem(t,i.toString())},e.getFloat=function(t){var i=e.getItem(t),n=0;return i&&(n=parseFloat(i)),n},e.setFloat=function(t,i){e.setItem(t,i.toString())},e.getBoolean=function(t){return 1==e.getInt(t)},e.setBoolean=function(t,i){i?e.setInt(t,1):e.setInt(t,0)},e.clear=function(){cc.sys.localStorage.clear()},e.GamePreFlag="legend-game-HaoLocalStorage-",e}();i.default=o,cc._RF.pop()},{"./HaoEncrypt":"HaoEncrypt"}],Logger:[function(e,t,i){"use strict";cc._RF.push(t,"0db68YcSsNAza72hAvNP/Ok","Logger"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../game/config/GameConfig");(function(e){e[e.DEBUG=0]="DEBUG",e[e.LOG=1]="LOG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR"})(n||(n={}));var a=["debug","log","info","warn","error"],s=function(){function e(){}return e.initLogLevel=function(){e.LEVEL=o.GameConfig.environment==o.EnvironmentType.Online?n.ERROR:n.LOG},e.formatNow=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()},e.getLogPreKey=function(t){return"["+e.formatNow()+"] "+e.tag+" ["+a[t]+"] "},e.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(e.LEVEL>n.DEBUG)&&t){var o=this.getLogPreKey(n.DEBUG);t.join(" ");this.Terminal_Log?console.log.apply(console,["%c"+o,this.Log_Color_Config[n.DEBUG]].concat(t)):console.log.apply(console,[o].concat(t))}},e.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(e.LEVEL>n.LOG)){var o=this.getLogPreKey(n.LOG);t.join(" ");this.Terminal_Log?console.log.apply(console,["%c"+o,this.Log_Color_Config[n.DEBUG]].concat(t)):console.log.apply(console,[o].concat(t))}},e.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(e.LEVEL>n.INFO)){var o=this.getLogPreKey(n.INFO);t.join(" ");this.Terminal_Log?console.info.apply(console,["%c"+o,this.Log_Color_Config[n.DEBUG]].concat(t)):console.info.apply(console,[o].concat(t))}},e.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(e.LEVEL>n.WARN)){var o=this.getLogPreKey(n.WARN);t.join(" ");this.Terminal_Log?console.warn.apply(console,["%c"+o,this.Log_Color_Config[n.DEBUG]].concat(t)):console.warn.apply(console,[o].concat(t))}},e.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!(e.LEVEL>n.ERROR)){var o=this.getLogPreKey(n.ERROR);this.Terminal_Log?console.error.apply(console,["%c"+o,this.Log_Color_Config[n.DEBUG]].concat(t)):console.error.apply(console,[o].concat(t))}},e.tag="[HaoJslog]",e.LEVEL=o.GameConfig.environment==o.EnvironmentType.Online?n.ERROR:n.LOG,e.Log_Color_Config=["color:#890;font-size:10px;","color:#000;font-size:11px;","color:#09f;font-size:12px;","color:#f90;font-size:13px;","color:#f00;font-size:15px;"],e.Terminal_Log=!1,e}();i.Logger=s,cc._RF.pop()},{"../game/config/GameConfig":"GameConfig"}],LoginView:[function(e,t,i){"use strict";cc._RF.push(t,"f7821oyyMRL8KOMlPOkOp16","LoginView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/GameSocket"),c=e("../../engine/LocalStorage"),l=e("../../engine/Logger"),d=e("../../engine/ProtoConfig"),f=e("../../engine/ProtoUtils"),g=e("../../engine/UIManager"),h=e("../../engine/ViewBase"),u=e("../config/ColorConfig"),p=e("../config/GameConfig"),m=e("../config/GameConst"),C=e("../config/ViewConfig"),_=e("../config/WordConfig"),v=e("../event/CommonEvent"),y=e("../manager/StartUpMgr"),b=e("../model/CostumeModel"),I=e("../model/RoleInfoModel"),M=e("../model/ServerTime"),w=e("../model/ZoneModel"),k=e("../network/SocketClient"),S=e("../sdk/LoongCheerManager"),P=e("../sdk/SdkHandler"),E=e("../sdk/SdkHelper"),L=e("../sdk/SdkManager"),T=e("../sdk/STUtils"),R=e("../utils/MusicHelper"),N=cc._decorator,B=N.ccclass,A=(N.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=null,t.m_type=[],t.m_selectIndex=1,t.isClickLogin=!1,t}var i;return n(t,e),i=t,t.prototype.onShow=function(){var e=this;this.btnSwitchAccount=this.findChild(this.node,"btnSwitchAccount"),this.textNode=this.findChild(this.node,"view/text"),this.imgSelectBG=this.findChild(this.node,"view/imgSelectBG"),this.textNode.active=p.GameConfig.sdkType==p.SdkType.BingNiao||p.GameConfig.sdkType==p.SdkType.FengYue||p.GameConfig.sdkType==p.SdkType.Xiaotun,this.onAddEvent(this.btnSwitchAccount,function(){r.default.getInstance().closeSocket(!1),e.closeView(),g.default.instance.createView(C.default.gameView.zoneServer)}),this.m_selectIndex=c.default.getInt(i.LOGIN_KEY)+1,I.default.instance=null,this.btnNotity=this.findChild(this.node,"view/notity"),this.onAddEvent(this.btnNotity,this.onShowNotity.bind(this)),this.view=this.node.getChildByName("view");for(var t=0;t<3;t++)this.m_type.push(this.view.getChildByName(""+t)),this.m_type[t].on(cc.Node.EventType.TOUCH_END,this.onClickItem.bind(this,t)),s.EventManager.instance.addBtnEvent(this.node,this.m_type[t].getChildByName("info").getChildByName("delect"),"LoginView","onDeleteRole",t);this.onUserInfoRefresh(),this.view.getChildByName("startGame").on(cc.Node.EventType.TOUCH_END,this.onStartGame.bind(this)),this.schedule(function(){e.updateTime()},1)},t.prototype.onEnable=function(){s.EventManager.instance.on(v.CommonEvent.Event_UserInfoRefresh,this.onUserInfoRefresh,this)},t.prototype.onHide=function(){},t.prototype.setTimeOut=function(e,t,i){void 0===i&&(i=null);var n=cc.delayTime(t),o=cc.repeat(cc.sequence(n,cc.callFunc(e)),999999);return i.runAction(o),o},t.prototype.update=function(e){},t.prototype.updateTime=function(){for(var e=0;e<this.m_type.length;e++){var t=I.default.getRoleByPos(e+1);if(t&&t.dtime>0){this.m_type[e].getChildByName("info").getChildByName("times").active=!0;var i=1e3*t.dtime-M.ServerTime.getServerTime();i<=0&&(i=0,I.default.deleteRole(t),k.default.reqRoleList()),this.m_type[e].getChildByName("info").getChildByName("times").getComponent(cc.Label).string=a.default.formatLeftTime1(i)}}},t.prototype.onClickItem=function(e){R.MusicHelper.play_click(),c.default.setInt(i.LOGIN_KEY,e),this.m_selectIndex=e+1;var t=this.m_type[e].getChildByName("create");this.m_type[e].getChildByName("info");t.active?g.default.instance.createView(C.default.gameView.register,null,e):this.onUserInfoRefresh()},t.prototype.onUserInfoRefresh=function(){this.imgSelectBG&&this.m_type[this.m_selectIndex-1]&&(this.imgSelectBG.setPosition(0,0,0),this.imgSelectBG.parent=this.m_type[this.m_selectIndex-1]);for(var e=function(e){var i=t.m_type[e].getChildByName("create"),n=t.m_type[e].getChildByName("info"),o=I.default.getRoleByPos(e+1);if(o){n.active=!0;var s=n.getChildByName("btnResume");s.active=!1,i.active=!1;var r=n.getChildByName("select");if(r.active=!0,b.CostumeModel.setCostSF(n.getChildByName("touxiang").getComponent(cc.Sprite),b.CostumeType.Head,o.personalize.portrait),b.CostumeModel.setCostSF(n.getChildByName("touxiangkuang").getComponent(cc.Sprite),b.CostumeType.HeadFM,o.personalize.portrait_skin),n.getChildByName("userName").getComponent(cc.Label).string=o.roleName,n.getChildByName("content_1").getComponent(cc.Label).string=o.level+"",n.getChildByName("content_2").getComponent(cc.Label).string=m.GameConst.OccupationNameMap(o.occupation),n.getChildByName("content_2").color=u.ColorConfig.getRoleColor(o.occupation),o.dtime>0){n.getChildByName("delect").active=!1,t.m_type[e].getChildByName("info").getChildByName("times").active=!0;var c=1e3*o.dtime-M.ServerTime.getServerTime();c<=0&&(c=0,I.default.deleteRole(o),k.default.reqRoleList()),s.active=!0,r.active=!1,t.onAddEvent(s,function(){k.default.s_cancle_delete(E.default.uId,o.roleId)}),t.m_type[e].getChildByName("info").getChildByName("times").getComponent(cc.Label).string=a.default.formatLeftTime1(c)}else n.getChildByName("delect").active=!0,t.m_type[e].getChildByName("info").getChildByName("times").active=!1}else n.active=!1,i.active=!0},t=this,i=0;i<this.m_type.length;i++)e(i)},t.prototype.onShowNotity=function(e,t){g.default.instance.createView(C.default.gameView.notity)},t.prototype.onDeleteRole=function(e,t){R.MusicHelper.play_click();var i=I.default.getRoleByPos(t+1);l.Logger.log("onDeleteRole==",i.roleId,i.roleName),i&&(this.nowRoleInfo=i,g.default.instance.createView(C.default.gameView.CheckDeleteRoleView,null,function(e){e&&k.default.s_delete_hero(E.default.uId,i.roleId)}))},t.prototype.onSocketRespMsg=function(e,t){if(e==d.ProtoConfig.c_delete_hero)f.ProtoUtils.DeserializeBinary(d.ProtoConfig.c_delete_hero,t).getRes();else if(e==d.ProtoConfig.c_cancle_delete)f.ProtoUtils.DeserializeBinary(d.ProtoConfig.c_cancle_delete,t).getRes();else if(e==d.ProtoConfig.c_req_role_info){this.gotoGame(),T.default.stEnterGame(S.StatisticsType.afEvent),T.default.stEnterGame(S.StatisticsType.firebaseEvent);var i=localStorage.getItem("loginTime");if(void 0==i)T.default.stLoginFirst(S.StatisticsType.afEvent),T.default.stLoginFirst(S.StatisticsType.firebaseEvent);else a.default.isToday(parseInt(i))||(T.default.stLoginFirst(S.StatisticsType.afEvent),T.default.stLoginFirst(S.StatisticsType.firebaseEvent));localStorage.setItem("loginTime",a.default.now().toString())}},t.prototype.onStartGame=function(){R.MusicHelper.play_click();var e=I.default.getRoleByPos(this.m_selectIndex);if(e)if(p.GameConfig.connectServer){if(e.dtime>0)return void _.WordConfig.showWord(60326);y.StartUpMgr.doLogin(e)}else I.default.initMyRoleInfo(e),this.gotoGame();else _.WordConfig.showWord(60326)},t.prototype.gotoGame=function(){this.sendRepotData(),y.StartUpMgr.showMain()},t.prototype.sendRepotData=function(){l.Logger.log("sendRepotData");var e=w.ZoneModel.nowZoneInfoModel,t=I.default.getRoleByPos(this.m_selectIndex);if(t){var i={server_id:e.server_id,server_name:e.server_name,role_id:t.roleId,role_name:t.roleName,role_level:t.level,balance:t.getGold()};if(p.GameConfig.sdkType==p.SdkType.Xiaotun||p.GameConfig.isWechat()){var n={eventName:P.AuthType.enterServer,param:i};L.default.sdkAuth(P.AuthType.onCustomEvent,JSON.stringify(n))}}},t.LOGIN_KEY="LOGIN_KEY",t=i=o([B],t)}(h.default));i.default=A,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/StartUpMgr":"StartUpMgr","../model/CostumeModel":"CostumeModel","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../model/ZoneModel":"ZoneModel","../network/SocketClient":"SocketClient","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/STUtils":"STUtils","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager","../utils/MusicHelper":"MusicHelper"}],LongRuiHandler:[function(e,t,i){"use strict";cc._RF.push(t,"3acef0oLotPUJi6rKArQ4Tx","LongRuiHandler"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/LocalStorage"),a=e("../../engine/Logger"),s=e("../event/CommonEvent"),r=e("../GameController"),c=e("../network/SocketClient"),l=e("../utils/UIHelper"),d=e("./LongRuiManager"),f=e("./SdkHandler"),g=e("./SdkHelper"),h=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance?this._instance:new e},enumerable:!0,configurable:!0}),e.prototype.authCallback=function(e,t){if(a.Logger.log("authCallback=====",e,t),e==f.Code.OK)try{t.authType==f.AuthType.login?(g.default.appId=t.appId?t.appId:g.default.appId,g.default.uId=t.authCode,d.LongRuiManager.userId=t.openId,o.default.setItem(g.default.Local_Login_Uid_Key,g.default.uId),c.default.login(1)):t.authType==f.AuthType.loginOut&&r.default.instance.restartGame()}catch(e){a.Logger.error("authCallback error",e)}},e.prototype.payCallBack=function(e,t){a.Logger.log("payCallBack=====",e,t)},e.prototype.adCallback=function(e,t){if(a.Logger.log("adCallback=====",e,t),e==f.Code.ADFAIL){var i=t.msg;l.UIHelper.showTip(i)}else e==f.Code.ADREAWARD?n.EventManager.instance.dispatch(s.CommonEvent.Event_ad_end):e==f.Code.ADCOLSE?c.default.s_seq_start_adv_status(2):f.Code.ADSHOW},e}();i.LongRuiHandler=h,window.LongRuiHandler=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../GameController":"GameController","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","./LongRuiManager":"LongRuiManager","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper"}],LongRuiManager:[function(require,module,exports){"use strict";cc._RF.push(module,"45739gJZEBP+r8cpmw2gSvJ","LongRuiManager"),Object.defineProperty(exports,"__esModule",{value:!0});var Logger_1=require("../../engine/Logger"),ChongZhiConfig_1=require("../config/ChongZhiConfig"),GameConfig_1=require("../config/GameConfig"),RoleInfoModel_1=require("../model/RoleInfoModel"),ZoneModel_1=require("../model/ZoneModel"),SdkHandler_1=require("./SdkHandler"),SdkHelper_1=require("./SdkHelper"),LongRuiManager=function(){function LongRuiManager(){}return LongRuiManager.doCommand=function(e,t,i){void 0===i&&(i="(Ljava/lang/String;)V");var n=void 0==t?void 0:JSON.stringify(t),o=this.androidNativeClassName,a=e;if(void 0==n)return jsb.reflection.callStaticMethod(o,a,i);jsb.reflection.callStaticMethod(o,a,i,n)},LongRuiManager.sdkAuth=function(e,t){if(void 0===t&&(t=""),cc.sys.isBrowser){if(e==SdkHandler_1.AuthType.init)return Logger_1.Logger.log("websdk\u521d\u59cb\u5316"),void this.init();if(Logger_1.Logger.log("sdkAuth--------------",SdkHandler_1.SdkHandler.isInit),SdkHandler_1.SdkHandler.isInit&&window.QCCPSDK){if(e==SdkHandler_1.AuthType.login)window.QCCPSDK.login();else if(e==SdkHandler_1.AuthType.loginOut)window.QCCPSDK.logout();else if(e==SdkHandler_1.AuthType.onLoginRsp){var i=JSON.parse(t);SdkHelper_1.default.uId=i.content.unionid;var n=i.content.access_token;Logger_1.Logger.log("loginRsp--\u767b\u5f55\u4e8c\u6b21\u9a8c\u8bc1\uff1a",n),window.QCCPSDK.loginRsp(n)}}else Logger_1.Logger.warn("sdk\u521d\u59cb\u5316\u5931\u8d25\uff0c\u6388\u6743\u5931\u8d25")}else if(cc.sys.isNative)if(SdkHandler_1.SdkHandler.isInit=this.doCommand("getInit",void 0,"()Z"),SdkHandler_1.SdkHandler.isInit){var o=void 0;if(e==SdkHandler_1.AuthType.onLoginRsp){i=JSON.parse(t);SdkHelper_1.default.uId=i.content.unionid,o={function:e,token:i.content.access_token}}else if(e==SdkHandler_1.AuthType.onCustomEvent){o={function:e,eventName:(i=JSON.parse(t)).eventName,param:i.param}}else o={function:e};this.doCommand("sdkAuth",o)}else Logger_1.Logger.warn("sdk\u521d\u59cb\u5316\u5931\u8d25\uff0c\u6388\u6743\u5931\u8d25")},LongRuiManager.sdkPay=function(e,t){var i,n=ChongZhiConfig_1.ChongZhiConfig.getConfigById(t.configId),o=void 0!=t.configId?100*n.money:"",a=RoleInfoModel_1.default.instance.roleId,s=RoleInfoModel_1.default.instance.roleName,r=RoleInfoModel_1.default.instance.level,c=ZoneModel_1.ZoneModel.nowZoneInfoModel.server_id,l=ZoneModel_1.ZoneModel.nowZoneInfoModel.server_name,d=RoleInfoModel_1.default.instance.getGold(),f=t.extend,g=t.notifyUrl,h=void 0==n.des?"":n.des;cc.sys.isBrowser&&window.QCCPSDK?(i={cp_order_id:t.cpOrderNo,role_id:a,role_name:s,role_level:r,vip_level:0,server_id:c,server_name:l,amount:o,product_count:t.count,product_name:n.name,product_type:"\u5143\u5b9d",product_id:t.configId,product_desc:h,rate:10,notify_url:g},window.QCCPSDK.pay(i)):cc.sys.isNative&&(i={function:e,cpOrderNo:t.cpOrderNo,totalCharge:o,productId:t.configId,productName:n.name,productAmount:t.count,productDesc:h,roleId:a,roleName:s,roleLevel:r,vipLevel:0,serverId:c,serverName:l,unionName:"",balance:d,asyncCallbackUrl:g,extend:f},this.doCommand("sdkPay",i)),Logger_1.Logger.log("sdkPay",i)},LongRuiManager.sdkAd=function(e){if(Logger_1.Logger.log("sdkAd",e),cc.sys.isBrowser)SdkHelper_1.default.sdkAd();else if(cc.sys.isNative){var t={function:e,adId:this.androidAdMobVideoId};this.doCommand("sdkAd",t)}},LongRuiManager.init=function(){window.onCpCallback=function(callback_type,callback_data){var data=eval("("+callback_data+")"),ret=data.ret;Logger_1.Logger.log("onCpCallback===\u56de\u8c03\u6570\u636e",data);var authData=new SdkHandler_1.AuthData;switch(authData.sdkType=GameConfig_1.SdkType.FengYue,callback_type){case QCCPSDK.E_INIT:Logger_1.Logger.log("onCpCallback===\u521d\u59cb\u5316\u7ed3\u679c",ret),authData.functionName=SdkHandler_1.FunctionName.InitCallBack;var str=JSON.stringify(authData);1==ret?SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.OK,str):SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.FAIL,str);break;case QCCPSDK.E_LOGIN:if(Logger_1.Logger.log("onCpCallback===\u767b\u5f55\u7ed3\u679c",ret,data),authData.functionName=SdkHandler_1.FunctionName.AuthCallBack,authData.authType=SdkHandler_1.AuthType.login,1==ret){authData.authCode=data.auth_code||"",authData.openId=data.open_id||"";var str=JSON.stringify(authData);SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.OK,str)}else{var str=JSON.stringify(authData);SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.FAIL,str)}break;case QCCPSDK.E_LOGOUT:Logger_1.Logger.log("onCpCallback===\u767b\u51fa\u7ed3\u679c",ret),authData.functionName=SdkHandler_1.FunctionName.AuthCallBack,authData.authType=SdkHandler_1.AuthType.loginOut;var str=JSON.stringify(authData);1==ret?SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.OK,str):SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.FAIL,str);break;case QCCPSDK.E_PAY:Logger_1.Logger.log("onCpCallback===\u652f\u4ed8\u7ed3\u679c",ret),authData.functionName=SdkHandler_1.FunctionName.PayCallBack;var str=JSON.stringify(authData);1==ret?SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.OK,str):SdkHandler_1.SdkHandler.callback(SdkHandler_1.Code.FAIL,str)}},window.QCCPSDK&&(Logger_1.Logger.log("onCpCallback===\u8c03\u7528\u521d\u59cb\u5316"),window.QCCPSDK.init("onCpCallback"))},LongRuiManager.androidNativeClassName="sdk/SdkManager",LongRuiManager.androidAdMobVideoId="R1",LongRuiManager.userId="",LongRuiManager}();exports.LongRuiManager=LongRuiManager,window.LongRuiManager=LongRuiManager,cc._RF.pop()},{"../../engine/Logger":"Logger","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConfig":"GameConfig","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper"}],LoongCheerHandle:[function(e,t,i){"use strict";cc._RF.push(t,"bc990j6eJRE4p9MFZkWzGiK","LoongCheerHandle"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../event/CommonEvent"),s=e("../network/SocketClient"),r=e("../utils/UIHelper"),c=e("./LoongCheerManager"),l=e("./SdkHandler"),d=e("./SdkHelper"),f=e("./STUtils"),g=function(){function e(){}return e.authCallback=function(e,t){if(o.Logger.log("authCallback=====",e,t),200==e)try{var i=JSON.parse(t);c.LoongCheerManager.userId=i.openId,d.default.uId=i.openId,n.EventManager.instance.dispatch(a.CommonEvent.Event_SdkGetInfo),n.EventManager.instance.dispatch(a.CommonEvent.Event_SdkInit)}catch(e){o.Logger.error("authCallback error",e)}else f.default.stLoginFailed(c.StatisticsType.afEvent),f.default.stLoginFailed(c.StatisticsType.firebaseEvent)},e.googlePayCallBack=function(e,t){if(o.Logger.log("googlePayCallBack=====",e,t),200==e)try{var i=JSON.parse(t),n=i.key;if(n==c.PayType.googleplayInapp||n==c.PayType.queryPurchasesList){var a=i.orderId,r=i.token,l=i.shopid;i.accountId;if(s.default.s_loongcheer_recharge(l,r,a),n==c.PayType.googleplayInapp){var d="iap"+l;f.default.stPayPurchaseInfo(c.StatisticsType.afEvent,d),f.default.stPayPurchaseInfo(c.StatisticsType.firebaseEvent,d)}}else if(n==c.PayType.consumption)i.accountId;else c.PayType.googleplaySubs}catch(e){o.Logger.error("googlePayCallBack error",e)}},e.Adcallback=function(e,t){o.Logger.log("Adcallback=====",e,t);var i,d=JSON.parse(t),g=d.posId;if(e==l.Code.ADFAIL){var h=d.error;i="iaa_rwdall_adfail",r.UIHelper.showTip(h)}else e==l.Code.ADREAWARD?(i="iaa_rwdall_reward",n.EventManager.instance.dispatch(a.CommonEvent.Event_ad_end)):e==l.Code.ADCOLSE?s.default.s_seq_start_adv_status(2):e==l.Code.ADSHOW&&(i="iaa_rwdall_show");f.default.stVideo(c.StatisticsType.afEvent,e,g),f.default.stVideo(c.StatisticsType.firebaseEvent,e,g),f.default.stStatistics(c.StatisticsType.afEvent,i),f.default.stStatistics(c.StatisticsType.firebaseEvent,i)},e}();i.LoongCheerHandle=g,window.LoongCheerHandle=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","./LoongCheerManager":"LoongCheerManager","./STUtils":"STUtils","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper"}],LoongCheerManager:[function(e,t,i){"use strict";cc._RF.push(t,"a01d21B/9lCJqBvG/8LrNf9","LoongCheerManager"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../../engine/Logger"),s=e("../config/ChongZhiConfig"),r=e("../config/GameConfig"),c=e("../event/CommonEvent"),l=e("./SdkHandler"),d=e("./SdkHelper"),f=e("./STUtils");(function(e){e.googleplayInapp="googleplayInapp",e.googleplaySubs="googleplaySubs",e.consumption="consumption",e.queryPurchasesList="queryPurchasesList"})(i.PayType||(i.PayType={})),function(e){e[e.default=0]="default",e[e.blacksmith=1]="blacksmith",e[e.freegolds=2]="freegolds",e[e.freeantique=3]="freeantique",e[e.sellchance=4]="sellchance",e[e.offlinereward=5]="offlinereward",e[e.bagupgrade=6]="bagupgrade",e[e.storageupgrade=7]="storageupgrade"}(i.AdPosId||(i.AdPosId={})),function(e){e.afEvent="afEvent",e.firebaseEvent="firebaseEvent",e.umEvent="umEvent"}(n=i.StatisticsType||(i.StatisticsType={}));var g=function(){function e(){}return e.doCommand=function(e,t){var i=JSON.stringify(t),n=this.androidNativeClassName,o=e;jsb.reflection.callStaticMethod(n,o,"(Ljava/lang/String;)V",i)},e.loongCheerAuth=function(e){if(cc.sys.isNative)if(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX){var t={function:e};this.doCommand("loongcheerAuth",t)}else d.default.isIos()||o.EventManager.instance.dispatch(c.CommonEvent.Event_SdkInit);else o.EventManager.instance.dispatch(c.CommonEvent.Event_SdkInit)},e.loongCheerPay=function(e,t,i,n,o){if(void 0===i&&(i=""),void 0===n&&(n=""),void 0===o&&(o=""),cc.sys.isNative)if(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX){var r={function:e,shopid:i,token:n,money:void 0!=t?s.ChongZhiConfig.getConfigById(t).gp_ios/100:"",accountid:o};this.doCommand("googlePay",r),a.Logger.log("googlePay",r)}else d.default.isIos()||a.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os)},e.loongCheerAd=function(e,t){if(cc.sys.isNative)if(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX){f.default.stStatistics(n.afEvent,"iaa_rwdall_click"),f.default.stStatistics(n.firebaseEvent,"iaa_rwdall_click"),f.default.stVideo(n.afEvent,l.Code.ADCLICKED,t),f.default.stVideo(n.firebaseEvent,l.Code.ADCLICKED,t);var i={function:e,adId:this.androidAdMobVideoId,posId:t};this.doCommand("loongcheerAd",i)}else d.default.isIos()||a.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os)},e.loongCheerStatistics=function(e,t,i,n){if(a.Logger.log("eventName:",t),r.GameConfig.sdkType==r.SdkType.LoongCheer&&cc.sys.isNative)if(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX){var o={function:e,eventName:t,name:i,vaule:n};this.doCommand("loongcheerStatistics",o)}else d.default.isIos()||a.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os)},e.androidNativeClassName="sdk/SdkManager",e.androidAdMobVideoId="ca-app-pub-8341771607925753/1750479990",e.userId="",e}();i.LoongCheerManager=g,window.LoongCheerManager=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConfig":"GameConfig","../event/CommonEvent":"CommonEvent","./STUtils":"STUtils","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper"}],LuckyBingoView:[function(e,t,i){"use strict";cc._RF.push(t,"dcf4avu0W9L9J5FI+IsOEZ2","LuckyBingoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/ViewBase"),c=e("../event/CommonEvent"),l=e("../config/ITemsConfig"),d=e("../config/DefaultConfig"),f=e("../prefab/ItemPrefab"),g=e("../config/WordConfig"),h=e("../model/MergeLuckyDrawModel"),u=e("../../engine/UIManager"),p=e("./../config/ViewConfig"),m=e("../config/EquipConfig"),C=e("../model/ActivityOpenModel"),_=e("../model/RoleInfoModel"),v=e("./PublicTipView"),y=cc._decorator,b=y.ccclass,I=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isTurnType=!1,t.darkLayer1=null,t.acitvity_id=36,t}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(c.CommonEvent.Event_MergeLuckyDrawView_Refresh,this.refresh,this),s.EventManager.instance.on(c.CommonEvent.Event_MergeLuckyDrawView_Start36,this.onTurning,this),this.refresh()},t.prototype.refresh=function(e){var t=this;void 0===e&&(e=null);var i=C.default.getOpenActivityModel(this.acitvity_id),n=a.default.formatDateStr4(1e3*i.actStartTime)+"-"+a.default.formatDateStr4(1e3*i.actEndTimes);this.findChild(this.node,"time/timeNum").getComponent(cc.Label).string=n,h.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id).forEach(function(e){var i=t.findChild(t.itemlist,e.idx.toString());i.getChildByName("yilingqv").active=1==e.status,i.getChildByName("xuanzhong").active=!1;var n=i.getChildByName("ItemPrefab");n.active=!1;var o=e.item_id;if(o){var a=l.ITemsConfig.getITemsConfigById(o);a||(a=m.EquipConfig.getEquipConfigById(o)),n.getComponent(f.default).init(a,!0),n.getComponent(f.default).setNumTxt(e.item_num),n.active=!0}e.idx<=8&&(o?(i.getChildByName("btnchange").active=!0,i.getChildByName("btnadd").active=!1):(i.getChildByName("btnchange").active=!1,i.getChildByName("btnadd").active=!0))})},t.prototype.init=function(){this.darkLayer1=this.findChild(this.node,"darkLayer1"),this.darkLayer1.active=!1,this.itemlist=this.findChild(this.node,"itemlist"),this.guajiangnode=this.findChild(this.node,"guajiangnode"),this.guajiangnode.active=!0,this.guajianganime=this.findChild(this.node,"guajianganime"),this.guajianganime.active=!1,this.zhongjiangnode=this.findChild(this.node,"zhongjiangnode"),this.zhongjiangnode.active=!1,this.jsItemPrefab=this.findChild(this.node,"jsItemPrefab"),this.findChild(this.node,"btnReset").on(cc.Node.EventType.TOUCH_END,this.onBtnReset,this),this.findChild(this.node,"btnTurn").on(cc.Node.EventType.TOUCH_END,this.onBtnTurn,this),this.findChild(this.node,"money").getComponent(cc.Label).string=d.DefaultConfig.getConfigById(139).value;var e=this.findChild(this.node,"btnRule");this.onAddEvent(e,this.OnClickRule.bind(this));for(var t=1;t<=8;t++){var i=this.findChild(this.itemlist,t.toString());i.getChildByName("btnchange").on(cc.Node.EventType.TOUCH_END,this.onBtnChange.bind(this,t)),i.getChildByName("btnadd").on(cc.Node.EventType.TOUCH_END,this.onBtnChange.bind(this,t))}},t.prototype.closeView=function(){this.isTurnType||e.prototype.closeView.call(this)},t.prototype.onBtnChange=function(e){this.isTurnType||u.default.instance.createView(p.default.gameView.MergeLuckyDrawTip,null,!0,e-1,this.acitvity_id)},t.prototype.onBtnReset=function(){var e=this;this.isTurnType||u.default.instance.createView(p.default.gameView.DialogCheck,null,g.WordConfig.getWord(61447),function(t){t&&(e.zhongjiangnode.active=!1,e.guajiangnode.active=!0,h.MergeLuckyDrawModel.s_lotterydraw_reset(e.acitvity_id))})},t.prototype.onBtnTurn=function(){this.isTurnType||(h.MergeLuckyDrawModel.islotterydrawInfo(this.acitvity_id)?0!=this.checkDrawNum()?_.default.instance.bagRemainingnumber<=0?g.WordConfig.showWord(60001):(this.isTurnType=!0,this.darkLayer1.parent=u.default.instance.getTopRoot(),this.darkLayer1.active=!0,h.MergeLuckyDrawModel.s_lotterydraw_start(this.acitvity_id)):g.WordConfig.showWord(61625):g.WordConfig.showWord(61445))},t.prototype.onTurning=function(e){var t=this;if(0==e.ret){if(this.findChild(this.node,"skip").getComponent(cc.Toggle).isChecked)setTimeout(function(){t.LuckDraw(e.idx)},200);else{this.guajianganime.active=!0;var i=this.guajianganime.getComponent(cc.Animation).play("guajianganime",0);setTimeout(function(){var i=t.findChild(t.itemlist,e.idx.toString());t.blinkLuckDraw(i,e.idx)},1e3*i.duration)}var n=h.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id)[e.idx-1],o=l.ITemsConfig.getITemsConfigById(n.item_id);o||(o=m.EquipConfig.getEquipConfigById(n.item_id)),this.jsItemPrefab.getComponent(f.default).init(o,!0),this.jsItemPrefab.getComponent(f.default).setNumTxt(n.item_num),this.zhongjiangnode.active=!1,this.guajiangnode.active=!1}else this.isTurnType=!1,this.darkLayer1.parent=this.node,this.darkLayer1.active=!1,h.MergeLuckyDrawModel.s_lotterydraw_info(this.acitvity_id)},t.prototype.blinkLuckDraw=function(e,t){var i=this;this.zhongjiangnode.parent=e,this.zhongjiangnode.x=0,this.zhongjiangnode.y=0,this.zhongjiangnode.active=!0;var n=this.zhongjiangnode.getComponent(cc.Animation).play("zhongjianganime",0);setTimeout(function(){i.LuckDraw(t)},1e3*n.duration+200)},t.prototype.LuckDraw=function(e){this.isTurnType=!1,this.darkLayer1.parent=this.node,this.darkLayer1.active=!1,this.guajianganime.active=!1,this.guajiangnode.active=!1,this.findChild(this.itemlist,e+"/yilingqv").active=!0,u.default.instance.createView(p.default.gameView.MergeLuckyDrawTip,null,!1,e-1,this.acitvity_id)},t.prototype.checkLingQ=function(e){var t=this.itemlist.children.length;return this.itemlist.children[e].getChildByName("yilingqv").active?this.checkLingQ(++e>=t?0:e):e},t.prototype.checkDrawNum=function(){var e=0;return h.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id).forEach(function(t){1!=t.status&&++e}),e},t.prototype.OnClickRule=function(){u.default.instance.createView(p.default.gameView.PublicTipView,null,v.RuleType.TYPE_LuckBingoRule)},t=o([b],t)}(r.default));i.LuckyBingoView=I,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/EquipConfig":"EquipConfig","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/MergeLuckyDrawModel":"MergeLuckyDrawModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/ItemPrefab":"ItemPrefab","./../config/ViewConfig":"ViewConfig","./PublicTipView":"PublicTipView"}],LuckyPuzzleModel:[function(e,t,i){"use strict";cc._RF.push(t,"1191fDcUYxA37HefZDyjGwy","LuckyPuzzleModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../config/PuzzleConfig"),r=e("../event/CommonEvent"),c=e("../manager/RedPointManager"),l=function(){return function(){}}();i.RewardItemInfo=l;var d=function(){function e(){this.eventIdList=[],this.protos=[],this.initRedPoint()}return e.prototype.initRedPoint=function(){e.redPointIsInit||(e.redPointIsInit=!0,this.eventIdList=[c.RedPointId.LuckyPuzzle],this.protos=[a.ProtoConfig.c_get_puzzle_info],c.default.getInstance().addHandler(this))},e.proto2Model=function(t){e.starttime=t.getStarttime(),e.overtime=t.getOvertime(),e.progress=t.getProgress();var i=[],n=new Map;e.rewardInfoArr=[];for(var a=t.getRewardListList(),r=0;r<a.length;r++){var c=new l,d=a[r];c.type=d.getId(),c.gear=d.getGear(),c.status=d.getStatus();var f=s.PuzzleConfig.getPLConfigIdByRankAndTaskid(c.gear,c.type);i.push(f),f?n.set(f,c):o.Logger.error("\u6ca1\u6709\u5bf9\u5e94\u62fc\u56fe\u6d3b\u52a8Id ,id:",f)}i.sort(function(e,t){return e-t});var g=i.length;for(r=0;r<g;r++){f=i[r];e.rewardInfoArr.push(n.get(f))}e.puzzleIdArr=[];var h=t.getPuzzleListList();for(r=0;r<h.length;r++){var u=(d=h[r]).getId();e.puzzleIdArr.push(u)}},e.proto2Reward=function(t){e.id=t.getIndex(),e.ret=t.getRet(),n.EventManager.instance.dispatch(r.CommonEvent.Event_puzzle_got_success)},e.prototype.checkRedPoint=function(){for(var t=[],i=!1,n=e.rewardInfoArr.length,o=0;o<n;o++){if(2===e.rewardInfoArr[o].status){i=!0;break}}var a={id:c.RedPointId.LuckyPuzzle,type:c.RedPointType.Default,show:i};return t.push(a),t},e._instance=new e,e.redPointIsInit=!1,e.puzzleIdArr=[],e.rewardInfoArr=[],e}();i.LuckyPuzzleModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../config/PuzzleConfig":"PuzzleConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],LuckyPuzzleView:[function(e,t,i){"use strict";cc._RF.push(t,"229abMqc69BjKhtEyY1fOWW","LuckyPuzzleView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/Logger"),r=e("../../../engine/ResourcesManager"),c=e("../../../engine/ViewBase"),l=e("../../config/PuzzleConfig"),d=e("../../config/WordConfig"),f=e("../../model/ActivityOpenModel"),g=e("../../model/LuckyPuzzleModel"),h=e("./GainItemView"),u=cc._decorator,p=u.ccclass,m=u.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.puzzleManager=null,t.timeNum=null,t.gainItem=null,t.gainContext=null,t.someDecs=null,t.icon0Prefix="img_pingtu_an_",t.icon1Prefix="img_pingtu_liang_",t}return n(t,e),t.prototype.onLoad=function(){this.someDecs.string=d.WordConfig.getWord(61399)},t.prototype.onEnable=function(){this.init()},t.prototype.init=function(e){void 0===e&&(e=null),this.gainContext.removeAllChildren();var t=f.default.getStarTimeByActivityId(25),i=f.default.getEndTimeByActivityId(25);this.timeNum.string=a.default.formatDateStr7(1e3*t)+"-"+a.default.formatDateStr7(1e3*i);for(var n=0;n<g.LuckyPuzzleModel.puzzleIdArr.length;n++){var o=m=g.LuckyPuzzleModel.puzzleIdArr[n],c="";o<10&&(c="0");var d=this.puzzleManager.getChildByName(this.icon0Prefix+c+o);if(d){var u="icon/"+this.icon1Prefix+c+o;r.default.instance.loadSprite(d.getComponent(cc.Sprite),u)}}var p=g.LuckyPuzzleModel.rewardInfoArr.length;for(n=0;n<p;n++){var m,C=g.LuckyPuzzleModel.rewardInfoArr[n];if(!(m=l.PuzzleConfig.getPLConfigIdByRankAndTaskid(C.gear,C.type)))return void s.Logger.error("\u6ca1\u6709\u5bf9\u5e94\u62fc\u56fe\u6d3b\u52a8id",C);var _=cc.instantiate(this.gainItem);_.parent=this.gainContext,_.getComponent(h.default).init(C,m)}},t.prototype.start=function(){},o([m(cc.Node)],t.prototype,"puzzleManager",void 0),o([m(cc.Label)],t.prototype,"timeNum",void 0),o([m(cc.Prefab)],t.prototype,"gainItem",void 0),o([m(cc.Node)],t.prototype,"gainContext",void 0),o([m(cc.RichText)],t.prototype,"someDecs",void 0),t=o([p],t)}(c.default);i.default=C,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/Logger":"Logger","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/ViewBase":"ViewBase","../../config/PuzzleConfig":"PuzzleConfig","../../config/WordConfig":"WordConfig","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/LuckyPuzzleModel":"LuckyPuzzleModel","./GainItemView":"GainItemView"}],MaFaMiLingAwardView:[function(e,t,i){"use strict";cc._RF.push(t,"1b2ddyO3fFNTp6SHUuipOdG","MaFaMiLingAwardView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../config/GameConst"),c=e("../../config/ITemsConfig"),l=e("../../config/WordConfig"),d=e("../../event/CommonEvent"),f=e("../../manager/RedPointManager"),g=e("../../model/ItemInfoModel"),h=e("../../model/MaFaModel"),u=e("../../network/SocketClient"),p=e("../../prefab/ItemPrefab"),m=e("../../prefab/RedPointPrefab"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode(),a.EventManager.instance.on(d.CommonEvent.Event_MaFa_Task_Award,this.closeView,this)},t.prototype.onInitChild=function(e){this.config=e,this.data=h.default.getMaFaTaskModelById(this.config.id),this.initView()},t.prototype.initFindNode=function(){this.desc=this.findChild(this.node,"panel/frame/task/desc").getComponent(cc.Label),this.progressBar=this.findChild(this.node,"panel/frame/progress/progressBar").getComponent(cc.ProgressBar),this.progressNum=this.findChild(this.progressBar.node,"text").getComponent(cc.Label),this.awardList=this.findChild(this.node,"panel/frame/awardList"),this.itemPrefabNode=this.findChild(this.awardList,"ItemPrefab"),this.btnReceive=this.findChild(this.node,"panel/btnReceive"),this.btnClose=this.findChild(this.node,"panel/btnClose"),this.redPoint=this.findChild(this.btnReceive,"RedPointPrefab").getComponent(m.default)},t.prototype.initView=function(){this.initAwardList(),this.desc.string=this.config.des;var e=void 0!=this.data?this.data.num:0;this.progressBar.progress=e/this.config.goal,this.progressNum.string=cc.js.formatStr("%s/%s",e,this.config.goal),this.onAddEvent(this.btnReceive,this.onBtnReceive.bind(this)),this.onAddEvent(this.btnClose,this.closeView.bind(this))},t.prototype.initAwardList=function(){var e=this.config.ress,t=this.config.item,i=0;this.awardList.children.forEach(function(e){e.active=!1});var n="mafa_task_"+this.config.id;if(this.redPoint.setRedPointIdList([n]),f.default.getInstance().checkRedPointById(f.RedPointId.Activity_mafa),this.awardList.children.forEach(function(e){e.active=!1}),e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=e[o],s=void 0;i<this.awardList.childrenCount?s=this.awardList.children[i]:(s=cc.instantiate(this.itemPrefabNode)).parent=this.awardList,s.active=!0,s.getComponent(p.default).initResource(parseInt(o),a),i++}if(t)for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){a=t[o],s=void 0;i<this.awardList.childrenCount?s=this.awardList.children[i]:(s=cc.instantiate(this.itemPrefabNode)).parent=this.awardList,s.active=!0;var l=c.ITemsConfig.getITemsConfigById(o),d=g.default.create(r.GameConst.ITEM_KIND.ITEM,l.id,a,l.quality);s.getComponent(p.default).init(d,!0),i++}},t.prototype.onBtnReceive=function(){this.data?this.data.status==h.MaFaAwaradType.UnReceive?l.WordConfig.showWord(60342):this.data.status==h.MaFaAwaradType.Received?l.WordConfig.showWord(60196):u.default.s_marfa_cumulative_task(this.data.id):l.WordConfig.showWord(60342)},t=o([_],t)}(s.default));i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ItemInfoModel":"ItemInfoModel","../../model/MaFaModel":"MaFaModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab"}],MaFaMiLingView:[function(e,t,i){"use strict";cc._RF.push(t,"792c9f7jTJPBaXclJeU/gPQ","MaFaMiLingView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/UIManager"),c=e("../../../engine/ViewBase"),l=e("../../config/ColorConfig"),d=e("../../config/GameConst"),f=e("../../config/ITemsConfig"),g=e("../../config/MarfaGoalConfig"),h=e("../../config/MarfaOrderConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../model/ActivityOpenModel"),_=e("../../model/ItemInfoModel"),v=e("../../model/MaFaModel"),y=e("../../network/SocketClient"),b=e("../../prefab/ItemPrefab"),I=e("../../prefab/RedPointPrefab"),M=e("../PublicTipView"),w=cc._decorator,k=w.ccclass,S=w.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){s.EventManager.instance.on(m.CommonEvent.Event_MaFa_refresh,this.initView,this),y.default.s_marfa_info(),this.onBtnCloseAwardTip()},t.prototype.initFindNode=function(){this.taskList=this.findChild(this.node,"frame/info/taskList"),this.taskCell=this.findChild(this.taskList,"taskCell"),this.boxList=this.findChild(this.node,"frame/info/boxList"),this.btnRule=this.findChild(this.node,"frame/activityName/btnRule"),this.progressBar=this.findChild(this.node,"frame/info/awardProgress/progressBar").getComponent(cc.ProgressBar),this.progressNum=this.findChild(this.node,"frame/info/awardProgress/curProgress/num").getComponent(cc.Label),this.progressAwardList=this.findChild(this.node,"frame/info/awardProgress/awardList"),this.awardList=this.findChild(this.node,"frame/info/awardList"),this.itemPrefabNode=this.findChild(this.node,"frame/info/awardList/ItemPrefab"),this.activityTime=this.findChild(this.node,"frame/avtivityTime/time").getComponent(cc.Label)},t.prototype.initView=function(){for(var e=this,t=h.default.configArr,i=C.default.getOpenActivityModel(12),n=t.length>this.taskList.childrenCount?t.length:this.taskList.childrenCount,o=0;o<n;o++){var s=void 0;o<this.taskList.childrenCount?s=this.taskList.children[o]:(s=cc.instantiate(this.taskCell)).parent=this.taskList,o<t.length?this.initTaskCell(s,t[o]):s.active=!1}if(this.boxList.children.forEach(function(t,i){var n=g.default.getBoxConfigs()[i];e.initBox(t,n)}),this.progressAwardList.children.forEach(function(t,i){var n=g.default.getTotalConfigs()[i];e.initTotalAward(t,n)}),this.initAwardList(),this.progressNum.string=v.default.num+"",this.progressBar.progress=v.default.num/8,i){var c=a.default.formateNumYearMonthDayStr(1e3*i.actStartTime),l=a.default.formateNumYearMonthDayStr(1e3*i.actEndTimes);this.activityTime.string=cc.js.formatStr("%s-%s",c,l)}this.onAddEvent(this.btnRule,function(){e.onBtnCloseAwardTip(),r.default.instance.createView(u.default.gameView.PublicTipView,null,M.RuleType.TYPE_MAFA)}),this.onAddEvent(this.node,this.onBtnCloseAwardTip.bind(this))},t.prototype.initTaskCell=function(e,t){e.active=!0;var i=this.findChild(e,"RedPointPrefab").getComponent(I.default),n=this.findChild(e,"task/time").getComponent(cc.Label),o=this.findChild(e," received"),a=v.default.getMaFaTaskModelById(t.id);o.active=!(!a||a.status!=v.MaFaAwaradType.Received),n.string=t.name,this.onAddEvent(e,this.onBtnOpenTaskInfo.bind(this,t,a));var s="mafa_task_"+t.id;i.setRedPointIdList([s])},t.prototype.initBox=function(e,t){var i=this.findChild(e,"normal"),n=this.findChild(e,"receive"),o=this.findChild(e,"open"),a=this.findChild(e,"RedPointPrefab").getComponent(I.default),s=v.default.getMaFaAccTaskModelById(t.id);i.active=!s&&!v.default.getMaFaIsBoxComplete(t.id),n.active=!s&&v.default.getMaFaIsBoxComplete(t.id),o.active=s,this.onAddEvent(e,this.onBtnBoxClicked.bind(this,s,t,e));var r="mafa_box_"+t.id;a.setRedPointIdList([r])},t.prototype.initTotalAward=function(e,t){var i=this.findChild(e,"normal"),n=this.findChild(e,"receive"),o=this.findChild(e,"received"),a=this.findChild(e,"num").getComponent(cc.Label),s=this.findChild(e,"RedPointPrefab").getComponent(I.default),r=v.default.getMaFaAccTaskModelById(t.id);i.active=v.default.num<parseInt(t.stage)&&!r,n.active=v.default.num>=parseInt(t.stage)&&!r,o.active=r,a.string=t.stage+p.WordConfig.getWord(60518),a.node.color=void 0!=r?l.ColorConfig.GreenColor:l.ColorConfig.WhiteColor,this.onAddEvent(e,this.onBtnTotalAward.bind(this,r,t,e));var c="mafa_total_award_"+t.id;s.setRedPointIdList([c])},t.prototype.initAwardList=function(){var e=g.default.getTotalConfigs()[g.default.getTotalConfigs().length-1];this.awardList.children.forEach(function(e){e.active=!1}),this.initItem(e,this.awardList)},t.prototype.initItem=function(e,t,i){void 0===i&&(i=0);var n=0,o=e.ress,a=e.item;if(t.active=!0,t.children.forEach(function(e){e.active=!1}),o)for(var s in o)if(Object.prototype.hasOwnProperty.call(o,s)){var r=o[s],c=void 0;n<t.childrenCount?c=t.children[n]:((c=cc.instantiate(this.itemPrefabNode)).parent=t,c.setPosition(0,i),c.scaleX=1==t.scaleX?1:-1),c.active=!0,c.getComponent(b.default).initResource(parseInt(s),r),n++}if(a)for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s)){r=a[s],c=void 0;n<t.childrenCount?c=t.children[n]:((c=cc.instantiate(this.itemPrefabNode)).parent=t,c.setPosition(0,i),c.scaleX=1==t.scaleX?1:-1),c.active=!0;var l=f.ITemsConfig.getITemsConfigById(s),g=_.default.create(d.GameConst.ITEM_KIND.ITEM,l.id,r,l.quality);c.getComponent(b.default).init(g,!0),n++}},t.prototype.initAwardItemList=function(e,t){var i=t.getChildByName("awardShow");this.onBtnCloseAwardTip(),this.initItem(e,i,20)},t.prototype.onBtnCloseAwardTip=function(){this.progressAwardList.children.forEach(function(e){e.getChildByName("awardShow").active=!1}),this.boxList.children.forEach(function(e){e.getChildByName("awardShow").active=!1})},t.prototype.onBtnOpenTaskInfo=function(e,t){this.onBtnCloseAwardTip(),t&&t.status==v.MaFaAwaradType.Received?p.WordConfig.showWord(60196):r.default.instance.createView(u.default.gameView.MaFaMiLingAwardView,null,e)},t.prototype.onBtnBoxClicked=function(e,t,i){var n=v.default.getMaFaIsBoxComplete(t.id);!e&&!n||e?this.initAwardItemList(t,i):y.default.s_marfa_stalibge_reward(t.id)},t.prototype.onBtnTotalAward=function(e,t,i){!e&&v.default.num<parseInt(t.stage)||e?this.initAwardItemList(t,i):y.default.s_marfa_stalibge_reward(t.id)},o([S(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=o([k],t)}(c.default);i.default=P,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MarfaGoalConfig":"MarfaGoalConfig","../../config/MarfaOrderConfig":"MarfaOrderConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MaFaModel":"MaFaModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../prefab/RedPointPrefab":"RedPointPrefab","../PublicTipView":"PublicTipView"}],MaFaModel:[function(e,t,i){"use strict";cc._RF.push(t,"b2d1eNyyKVE3aMS41vo7A2i","MaFaModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/EventManager"),a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../config/MarfaGoalConfig"),l=e("../event/CommonEvent"),d=e("../manager/RedPointManager"),f=function(){return function(){}}();i.MaFaTask=f,function(e){e[e.UnReceive=1]="UnReceive",e[e.Receive=2]="Receive",e[e.Received=3]="Received"}(n=i.MaFaAwaradType||(i.MaFaAwaradType={}));var g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[d.RedPointId.Activity_mafa],this.protos=[s.ProtoConfig.c_marfa_cumulative_task,s.ProtoConfig.c_marfa_info,s.ProtoConfig.c_marfa_stalibge_reward],d.default.getInstance().addHandler(this)}return e.proto2TaskAward=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_marfa_cumulative_task,e),i=t.getId();this.marfaTaskMap.get(i).status=n.Received,a.Logger.log("c_marfa_cumulative_task=====",t),o.EventManager.instance.dispatch(l.CommonEvent.Event_MaFa_Task_Award),o.EventManager.instance.dispatch(l.CommonEvent.Event_MaFa_refresh)},e.proto2Model=function(t){var i=this;this.model=this.model?this.model:new e,this.marfaTaskMap=new Map;var n=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_marfa_info,t);this.num=void 0==n.getNum()?this.num:n.getNum();var c=n.getMarfaTaskList();if(c)for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var g=c[d],h=new f;h.id=g.getId(),h.num=void 0==g.getNum()?0:g.getNum(),h.status=g.getStatus(),this.marfaTaskMap.set(h.id,h)}n.getMarfaAccTaskList()&&n.getMarfaAccTaskList().forEach(function(e){i.maFaAccTaskList.includes(e.getId())||i.maFaAccTaskList.push(e.getId())}),a.Logger.log("c_marfa_info=====",n),o.EventManager.instance.dispatch(l.CommonEvent.Event_MaFa_refresh)},e.proto2Award=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_marfa_stalibge_reward,e),i=t.getId();this.maFaAccTaskList.push(i),c.default.isBoxById(i)&&(this.num+=1),a.Logger.log("c_marfa_stalibge_reward=====",t),o.EventManager.instance.dispatch(l.CommonEvent.Event_MaFa_refresh)},e.getMaFaAccTaskModelById=function(e){return this.maFaAccTaskList.includes(e)},e.getMaFaTaskModelById=function(e){return this.marfaTaskMap.get(e)},e.getMaFaIsBoxComplete=function(e){var t=this,i=!0,n=c.default.getConfigById(e);return n&&n.taskid?n.taskid.every(function(e){var n=t.marfaTaskMap.get(e);return void 0!=n&&1!=n.status||(i=!1,!1)}):i=!1,i},e.prototype.checkRedPoint=function(){var t=[],i=!1;if(e.marfaTaskMap){e.marfaTaskMap.forEach(function(e){var o=e.status==n.Receive;e.status==n.Receive&&(i=!0);var a={id:"mafa_task_"+e.id,type:d.RedPointType.Default,show:o};t.push(a)}),c.default.getBoxConfigs().forEach(function(n){var o=e.getMaFaAccTaskModelById(n.id),a=e.getMaFaIsBoxComplete(n.id)&&!o;a&&(i=!0);var s={id:"mafa_box_"+n.id,type:d.RedPointType.Default,show:a};t.push(s)}),c.default.getTotalConfigs().forEach(function(n){var o=e.num>=parseInt(n.stage)&&!e.getMaFaAccTaskModelById(n.id);o&&(i=!0);var a={id:"mafa_total_award_"+n.id,type:d.RedPointType.Default,show:o};t.push(a)});var o={id:d.RedPointId.Activity_mafa,type:d.RedPointType.Default,show:i};t.push(o)}return t},e.maFaAccTaskList=[],e.num=0,e}();i.default=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/MarfaGoalConfig":"MarfaGoalConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],MadelzhulingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a5143y1n51OErq5AxSp15ZB","MadelzhulingConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/Logger"),a=e("../model/MagicModel"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.stat=e.stat,i.statid=e.statid,i.pinzhi0=e.pinzhi0,i.pinzhi1=e.pinzhi1,i.pinzhi2=e.pinzhi2,i.pinzhi3=e.pinzhi3,i.pinzhi4=e.pinzhi4,i.des=e.des,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id!=e||(t=i)}),t},t.getdes=function(e,i){var n=t.getConfigById(e);o.Logger.log("BlessModel====",e,n);var s=n.des,r=a.default.formatMagicValue(Number(n.statid),i),c=s.replace("[#]",r);return o.Logger.log("BlessModel==222==",r,c),c},t.Config_Name="madelzhulingConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.MadelzhulingConfig=s,cc._RF.pop()},{"../../engine/Logger":"Logger","../model/MagicModel":"MagicModel","./JsonConfigBase":"JsonConfigBase"}],MagicModel:[function(e,t,i){"use strict";cc._RF.push(t,"b6737T00x1CgK3G6UWu/lV9","MagicModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/MagicNameConfig"),o=e("../../engine/Logger"),a=function(){function e(){this.pos=0,this.min=1,this.max=1,this.color=0}return e.create=function(t,i){var n=new e;return n.magicId=t,n.magicValue=i,n},e.formatMagicValue=function(e,t){return 1==n.MagicNameConfig.getMagicConfigById(e).type?t/100+"%":t+""},e.proto2ModelList=function(t){for(var i=[],n=0;n<t.length;n++){var a=t[n],s=new e;s.magicId=a.getK(),s.magicValue=a.getV(),i.push(s)}return o.Logger.log("infoModel==========",i),i},e.proto2RunList=function(t){for(var i=[],n=0;n<t.length;n++){var o=t[n],a=new e;a.pos=o.getPos(),a.color=o.getColor(),a.min=o.getMinV(),a.max=o.getMaxV(),a.magicId=o.getK(),a.magicValue=o.getV(),i.push(a)}return i.sort(function(e,t){return e.pos-t.pos}),i},e.getMagicValueByList=function(e,t){for(var i=0,n=0;n<t.length;n++){var o=t[n];if(o.magicId==e){i=o.magicValue;break}}return i},e.prototype.clone=function(){var t=new e;return t.magicId=this.magicId,t.magicValue=this.magicValue,t},e}();i.default=a,cc._RF.pop()},{"../../engine/Logger":"Logger","../config/MagicNameConfig":"MagicNameConfig"}],MagicNameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1643eSMFGlO/YJELLXrP5Va","MagicNameConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../model/RoleInfoModel"),s=e("./WordConfig"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.initDescMap=function(){this.descMap=new Map,this.descMap.set(t.MagicId.atk,s.WordConfig.getWord(60447)),this.descMap.set(t.MagicId.atk_p,s.WordConfig.getWord(60447)),this.descMap.set(t.MagicId.mag,s.WordConfig.getWord(60448)),this.descMap.set(t.MagicId.mag_p,s.WordConfig.getWord(60448)),this.descMap.set(t.MagicId.spt,s.WordConfig.getWord(60449)),this.descMap.set(t.MagicId.spt_p,s.WordConfig.getWord(60449)),this.descMap.set(t.MagicId.Allstat,s.WordConfig.getWord(61176)),this.descMap.set(t.MagicId.lucky,s.WordConfig.getWord(60539)),this.descMap.set(t.MagicId.def,s.WordConfig.getWord(60854)),this.descMap.set(t.MagicId.hp,s.WordConfig.getWord(60849)),this.descMap.set(t.MagicId.hp_p,s.WordConfig.getWord(60849)),this.descMap.set(t.MagicId.mp,s.WordConfig.getWord(60850)),this.descMap.set(t.MagicId.mp_p,s.WordConfig.getWord(60850)),this.descMap.set(t.MagicId.speed,s.WordConfig.getWord(60538)),this.descMap.set(t.MagicId.BonusDamage,s.WordConfig.getWord(61177)),this.descMap.set(t.MagicId.BonusDamage_p,s.WordConfig.getWord(61178)),this.descMap.set(t.MagicId.DamageReduction,s.WordConfig.getWord(61179)),this.descMap.set(t.MagicId.DamageReduction_p,s.WordConfig.getWord(61180)),this.descMap.set(t.MagicId.HpDrain,s.WordConfig.getWord(61181)),this.descMap.set(t.MagicId.MpDrain,s.WordConfig.getWord(61182)),this.descMap.set(t.MagicId.magic_find1,s.WordConfig.getWord(61183)),this.descMap.set(t.MagicId.equip_times,s.WordConfig.getWord(61184)),this.descMap.set(t.MagicId.stun,s.WordConfig.getWord(61185)),this.descMap.set(t.MagicId.maxHp,s.WordConfig.getWord(61186)),this.descMap.set(t.MagicId.maxMp,s.WordConfig.getWord(61204)),this.descMap.set(t.MagicId.jichujianshu,s.WordConfig.getWord(61187)),this.descMap.set(t.MagicId.gongshajianshu,s.WordConfig.getWord(61188)),this.descMap.set(t.MagicId.cishajianshu,s.WordConfig.getWord(61189)),this.descMap.set(t.MagicId.banyuewandao,s.WordConfig.getWord(61190)),this.descMap.set(t.MagicId.yemanchongzhuang,s.WordConfig.getWord(61191)),this.descMap.set(t.MagicId.hutizhenqi,s.WordConfig.getWord(61192)),this.descMap.set(t.MagicId.liehuojianfa,s.WordConfig.getWord(61193)),this.descMap.set(t.MagicId.huoqiushu,s.WordConfig.getWord(61194)),this.descMap.set(t.MagicId.leidianshu,s.WordConfig.getWord(61195)),this.descMap.set(t.MagicId.huoqiang,s.WordConfig.getWord(61196)),this.descMap.set(t.MagicId.youhuozhiguang,s.WordConfig.getWord(61197)),this.descMap.set(t.MagicId.mofadun,s.WordConfig.getWord(61198)),this.descMap.set(t.MagicId.fashujingtong,s.WordConfig.getWord(61199)),this.descMap.set(t.MagicId.bingpaoxiao,s.WordConfig.getWord(61200)),this.descMap.set(t.MagicId.jingshenlizhanfa,s.WordConfig.getWord(61201)),this.descMap.set(t.MagicId.zhiliaoshu,s.WordConfig.getWord(61202)),this.descMap.set(t.MagicId.linghunhuofu,s.WordConfig.getWord(61203)),this.descMap.set(t.MagicId.shidushu,s.WordConfig.getWord(61205)),this.descMap.set(t.MagicId.zhaohuanshu,s.WordConfig.getWord(61206)),this.descMap.set(t.MagicId.yinshenshu,s.WordConfig.getWord(61207)),this.descMap.set(t.MagicId.shenshengzhanjiashu,s.WordConfig.getWord(61208)),this.descMap.set(t.MagicId.wujizhenqi,s.WordConfig.getWord(61209)),this.descMap.set(t.MagicId.skill_all,s.WordConfig.getWord(61210)),this.descMap.set(t.MagicId.skill_daoshi,s.WordConfig.getWord(61211)),this.descMap.set(t.MagicId.skill_zhanshi,s.WordConfig.getWord(61212)),this.descMap.set(t.MagicId.skill_fashi,s.WordConfig.getWord(61213)),this.descMap.set(t.MagicId.skill_banyue,s.WordConfig.getWord(61214)),this.descMap.set(t.MagicId.skill_huoqiang,s.WordConfig.getWord(61215)),this.descMap.set(t.MagicId.skill_shidu,s.WordConfig.getWord(61216)),this.descMap.set(t.MagicId.HpDraineffect_p,s.WordConfig.getWord(61217)),this.descMap.set(t.MagicId.BonusDamageeffect_p,s.WordConfig.getWord(61179)),this.descMap.set(t.MagicId.petspeed,s.WordConfig.getWord(61218)),this.descMap.set(t.MagicId.petdamage,s.WordConfig.getWord(61219)),this.descMap.set(t.MagicId.petdamage_p,s.WordConfig.getWord(61219)),this.descMap.set(t.MagicId.ignoredef_p,s.WordConfig.getWord(61220)),this.descMap.set(t.MagicId.pvpIncrease_p,s.WordConfig.getWord(61221)),this.descMap.set(t.MagicId.pvpReduction_p,s.WordConfig.getWord(61222)),this.descMap.set(t.MagicId.def_p,s.WordConfig.getWord(61223)),this.descMap.set(t.MagicId.Allstat_p,s.WordConfig.getWord(61224)),this.descMap.set(t.MagicId.skill_liehuo,s.WordConfig.getWord(61225)),this.descMap.set(t.MagicId.skill_bingpaoxiao,s.WordConfig.getWord(61226)),this.descMap.set(t.MagicId.skill_wuji,s.WordConfig.getWord(61227)),this.descMap.set(t.MagicId.speed_p,s.WordConfig.getWord(60538)),this.descMap.set(t.MagicId.suppress,s.WordConfig.getWord(61369))},t.getRolePropertyList=function(){var e=new Array;return e.push(t.MagicId.hp),e.push(t.MagicId.mp),e.push(t.MagicId.atk),e.push(t.MagicId.mag),e.push(t.MagicId.spt),e.push(t.MagicId.def),e.push(t.MagicId.speed),e.push(t.MagicId.lucky),e.push(t.MagicId.BonusDamage),e.push(t.MagicId.HpDrain),e.push(t.MagicId.DamageReduction),e.push(t.MagicId.MpDrain),e.push(t.MagicId.BonusDamage_p),e.push(t.MagicId.magic_find1),e.push(t.MagicId.DamageReduction_p),e.push(t.MagicId.equip_times),e.push(t.MagicId.petspeed),e.push(t.MagicId.petdamage),e.push(t.MagicId.petdamage_p),e.push(t.MagicId.ignoredef_p),e},t.getDesc=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1);var i=new Array;if(i.push(""),i.push(s.WordConfig.getWord(60447)),i.push(s.WordConfig.getWord(60447)),i.push(s.WordConfig.getWord(60448)),i.push(s.WordConfig.getWord(60448)),i.push(s.WordConfig.getWord(60449)),i.push(s.WordConfig.getWord(60449)),i.push(s.WordConfig.getWord(61176)),i.push(s.WordConfig.getWord(60539)),i.push(s.WordConfig.getWord(60854)),i.push(s.WordConfig.getWord(60849)),i.push(s.WordConfig.getWord(60849)),i.push(s.WordConfig.getWord(60850)),i.push(s.WordConfig.getWord(60850)),i.push(s.WordConfig.getWord(60538)),i.push(s.WordConfig.getWord(61177)),i.push(s.WordConfig.getWord(61178)),i.push(s.WordConfig.getWord(61179)),i.push(s.WordConfig.getWord(61180)),i.push(s.WordConfig.getWord(61181)),i.push(s.WordConfig.getWord(61182)),i.push(s.WordConfig.getWord(61183)),i.push(s.WordConfig.getWord(61184)),i.push(s.WordConfig.getWord(61185)),i.push(s.WordConfig.getWord(61186)),i.push(s.WordConfig.getWord(61204)),i.push(""),i.push(""),i.push(""),i.push(s.WordConfig.getWord(61228)),i.push(s.WordConfig.getWord(61179)),i.push(s.WordConfig.getWord(611218)),i.push(s.WordConfig.getWord(61219)),i.push(s.WordConfig.getWord(61220)),7==e||38==e){if(t>0){var n=new Array;return n.push(""),n.push(s.WordConfig.getWord(60447)),n.push(s.WordConfig.getWord(60448)),n.push(s.WordConfig.getWord(60449)),n[t||1]}return a.default.instance.AttackType}return this.descMap.get(e)},t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)}),this.initDescMap()},t.getMagicConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e!=i.id||(t=i)}),t},t.getZhanLi=function(e,t){return this.getMagicConfigById(e).zhan*t/100},t.configMap=new Map,t.MagicId={atk:1,atk_p:2,mag:3,mag_p:4,spt:5,spt_p:6,Allstat:7,lucky:8,def:9,hp:10,hp_p:11,mp:12,mp_p:13,speed:14,BonusDamage:15,BonusDamage_p:16,DamageReduction:17,DamageReduction_p:18,HpDrain:19,MpDrain:20,magic_find1:21,equip_times:22,stun:23,maxHp:24,maxMp:25,HpDraineffect_p:29,BonusDamageeffect_p:30,petspeed:31,petdamage:32,petdamage_p:33,ignoredef_p:34,pvpIncrease_p:35,pvpReduction_p:36,def_p:37,Allstat_p:38,speed_p:39,defall_p:40,suppress:41,BonusDamagerate_p:42,Lucky_p:43,HpDrain_p:44,MpDrain_p:45,EXP_p:55,jichujianshu:101,gongshajianshu:102,cishajianshu:103,banyuewandao:104,yemanchongzhuang:105,hutizhenqi:106,liehuojianfa:107,huoqiushu:201,leidianshu:202,huoqiang:203,youhuozhiguang:204,mofadun:205,fashujingtong:206,bingpaoxiao:207,jingshenlizhanfa:301,zhiliaoshu:302,linghunhuofu:303,shidushu:304,zhaohuanshu:305,yinshenshu:306,shenshengzhanjiashu:307,wujizhenqi:308,skill_all:1e3,skill_zhanshi:1001,skill_fashi:1002,skill_daoshi:1003,skill_cisha:2102,skill_banyue:2104,skill_yeman:2105,skill_liehuo:2107,skill_leidian:2202,skill_huoqiang:2203,skill_youhuo:2204,skill_bingpaoxiao:2207,skill_huofu:2303,skill_shidu:2304,skill_zhaohuan:2305,skill_wuji:2308},t}(o.JsonConfigBase);i.MagicNameConfig=r,cc._RF.pop()},{"../model/RoleInfoModel":"RoleInfoModel","./JsonConfigBase":"JsonConfigBase","./WordConfig":"WordConfig"}],Main:[function(e,t,i){"use strict";cc._RF.push(t,"6daa3OHgsJNTLdjxnlZpqTX","Main");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./debug/Hacker"),s=e("./engine/AdapterHelper"),r=e("./engine/ComponentBase"),c=e("./engine/EventManager"),l=e("./engine/Logger"),d=e("./engine/UIManager"),f=e("./game/config/GameConfig"),g=e("./game/config/ViewConfig"),h=e("./game/config/WordConfig"),u=e("./game/event/CommonEvent"),p=e("./game/GameController"),m=e("./game/manager/StartUpMgr"),C=e("./game/network/HttpHelper"),_=e("./game/sdk/SdkHandler"),v=e("./game/sdk/SdkHelper"),y=e("./game/sdk/SdkManager"),b=cc._decorator,I=b.ccclass,M=(b.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.fixIOSMeshBuffer=function(){var e=cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&cc.sys.isMobile,t=e&&/iPhone OS 14/.test(window.navigator.userAgent),i=e&&/iPhone OS 15/.test(window.navigator.userAgent);(t||i)&&(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(e){this.vertexOffset+e>65535&&(this.uploadData(),this._batcher._flush())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.uploadData(),this.switchBuffer()})},t.prototype.onLoad=function(){if(window){this.fixIOSMeshBuffer();cc.sys.isBrowser?(console.log("buglog on"),window.onerror=function(e,t,i,n,o){l.Logger.warn(e,t,i,n,o);var a=o.stack;a=(a=a.replace(/'/g,"")).replace(/\n/g,""),C.default.sendBugLog(a)}):f.GameConfig.isWechat()&&wx.onError(function(e){l.Logger.warn(e.message),C.default.sendBugLog(e.message)})}if(e.prototype.onLoad.call(this),cc.view.enableAutoFullScreen(!1),s.default.fixApdater(),c.EventManager.instance.clearAll(),p.default.instance.init(),d.default.instance.init(this.node.getChildByName("UIRoot")),m.StartUpMgr.start(),cc.sys.isBrowser){var t=new URLSearchParams(window.location.search);"1"==t.get("hacker")&&a.Hacker.init();var i=t.get("appId");v.default.appId=i||v.default.appId,c.EventManager.instance.dispatch(u.CommonEvent.Event_SdkGetInfo)}cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.update=function(e){c.EventManager.instance.dispatch(u.CommonEvent.Event_FrameUpdate,e)},t.prototype.onKeyUp=function(e){l.Logger.log("\u6309\u4e0b\u8fd4\u56de\u952e===",e.keyCode,cc.macro.KEY.back),e.keyCode!==cc.macro.KEY.escape&&e.keyCode!==cc.macro.KEY.back||(f.GameConfig.isSdkExitGame?y.default.sdkAuth(_.AuthType.exitGame):d.default.instance.createView(g.default.gameView.DialogCheck,null,h.WordConfig.getWord(60370),function(e){e&&cc.game.end()}))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t=o([I],t)}(r.default));i.default=M,cc._RF.pop()},{"./debug/Hacker":"Hacker","./engine/AdapterHelper":"AdapterHelper","./engine/ComponentBase":"ComponentBase","./engine/EventManager":"EventManager","./engine/Logger":"Logger","./engine/UIManager":"UIManager","./game/GameController":"GameController","./game/config/GameConfig":"GameConfig","./game/config/ViewConfig":"ViewConfig","./game/config/WordConfig":"WordConfig","./game/event/CommonEvent":"CommonEvent","./game/manager/StartUpMgr":"StartUpMgr","./game/network/HttpHelper":"HttpHelper","./game/sdk/SdkHandler":"SdkHandler","./game/sdk/SdkHelper":"SdkHelper","./game/sdk/SdkManager":"SdkManager"}],MakeEquipModel:[function(e,t,i){"use strict";cc._RF.push(t,"a96b0/ixJ9Jh68M1AzlEmZR","MakeEquipModel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/LocalStorage"),a=e("./RoleInfoModel"),s=e("../config/EquipConfig"),r=e("../../engine/RandomUtil"),c=e("../config/GameConst"),l=e("./ItemInfoModel"),d=e("./ServerTime"),f=e("../../engine/EventManager"),g=e("../event/CommonEvent"),h=e("../../engine/UIManager"),u=e("../config/ViewConfig"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hadMake=!1,t.index=0,t}return n(t,e),t.init=function(){this.makeEquipModelLocalKey=this.defaultLocalKey+a.default.instance.roleId;var e=o.default.getItem(this.makeEquipModelLocalKey);if(e)for(var i=JSON.parse(e),n=0;n<i.length;n++){var s=i[n],r=new t;for(var c in s)"function"!=typeof s[c]&&(r[c]=s[c])}},t.getLastRandomTime=function(){return this.nextRandomTime},t.prototype.getBaseAddValue=function(e){for(var t=0,i=0;i<this.baseAddAttrList.length;i++){var n=this.baseAddAttrList[i];if(n.magicId==e){t=n.magicValue;break}}return t},t.randomEquip=function(){var e=d.ServerTime.getServerTime(),i=s.EquipConfig.getCanMakeEquipConfig(a.default.instance.level),n=r.default.nextInt(0,i.length-1),o=i.splice(n,1)[0],l=new t;this.makeEquipList=[],this.makeEquipList.push(l),l.itemType=o.id,l.itemKind=c.GameConst.ITEM_KIND.EQUIP,l.lastRandomTime=e,l.hadMake=!1,l.quality=c.GameConst.QUALITY.PURPLE;var f=s.EquipConfig.getEquipConfigById(l.itemType);l.baseAddAttrList=s.EquipConfig.randomBaseAddAttrList(l.quality,f),l.randAttrList=s.EquipConfig.randomAddAttrList(l.quality,f);for(var g=0;g<2;g++){l=new t;var h=r.default.randomIndexByPercent([8500,1300,200]);l.quality=0==h?c.GameConst.QUALITY.BLUE:1==h?c.GameConst.QUALITY.PURPLE:c.GameConst.QUALITY.ORANGE,o=i.shift(),l.itemType=o.id,l.itemKind=c.GameConst.ITEM_KIND.EQUIP,l.lastRandomTime=e,l.hadMake=!1,f=s.EquipConfig.getEquipConfigById(l.itemType),l.baseAddAttrList=s.EquipConfig.randomBaseAddAttrList(l.quality,f),l.randAttrList=s.EquipConfig.randomAddAttrList(l.quality,f),this.makeEquipList.push(l)}this.makeEquipList=r.default.randomArr(this.makeEquipList,this.makeEquipList.length)},t.saveToLocalStorage=function(){o.default.setItem(this.makeEquipModelLocalKey,JSON.stringify(t.makeEquipList))},t.proto2ModelList=function(e){this.nextRandomTime=1e3*e.getTime();var t=e.getItemlistList();this.makeEquipList=[];for(var i=0;i<t.length;i++){var n=this.proto2Model(t[i]);this.makeEquipList[i]=n}return h.default.instance.isOpen(u.default.gameView.EquipMakeView)?f.EventManager.instance.dispatch(g.CommonEvent.Event_Make_Equip):h.default.instance.createView(u.default.gameView.EquipMakeView),this.makeEquipList},t.proto2Model=function(e){var i=new t;i.index=e.getIndex(),1==e.getIsmake()?i.hadMake=!0:i.hadMake=!1;var n=e.getTItemInfo();return i.proto2Model(n),i},t.makeEquipList=[],t.CD=18e5,t.defaultLocalKey="MakeEquipModel",t.makeEquipModelLocalKey="",t}(l.default);i.default=p,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/RandomUtil":"RandomUtil","../../engine/UIManager":"UIManager","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","./ItemInfoModel":"ItemInfoModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],ManifestConfig:[function(e,t,i){"use strict";cc._RF.push(t,"354022dQw9EqISJbNlwNtj/","ManifestConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/config/GameConfig"),o=e("./DateUtil"),a=function(){function e(){}return e.getManifestStr=function(t){var i={};return i.packageUrl=n.GameConfig.getHotUpdateUrl()+"/hotupdate/"+t+"/",i.remoteManifestUrl=n.GameConfig.getHotUpdateUrl()+"/hotupdate/"+t+"/project.manifest?t="+o.default.now(),i.remoteVersionUrl=n.GameConfig.getHotUpdateUrl()+"/hotupdate/"+t+"/version.manifest?t="+o.default.now(),i.version=e.version,i.assets={"src/assets/Script/engine/protolib.jsc":{size:142764,md5:"73b5c0a0d0e7831f795e171939f64176"},"src/cocos2d-jsb.jsc":{size:372524,md5:"4874deb64fa4a168260093782785e933"},"src/project.jsc":{size:1349328,md5:"9c6a2129c7a3378f56bd010fb727bcd1"},"src/settings.jsc":{size:105956,md5:"04fe85e6de664a6538322ecbd2b7d39c"},"res/import/01/01054d944.json":{size:19375,md5:"e8f3326bde650db5d95571d662a24ccf"},"res/import/01/0109136cb.json":{size:2151,md5:"7d36309b50999ad4c99928f937942107"},"res/import/01/010a12378.json":{size:20976,md5:"b5c83cc11a0056a69ddeebf8815abca8"},"res/import/01/010fa087d.json":{size:5436,md5:"cf84c6c2fa6276330d49ee75d87218d2"},"res/import/01/011c1a6d8.json":{size:3894,md5:"932d83f39fa99a21fd6b09b9d699dee3"},"res/import/01/012a77aae.json":{size:2558,md5:"26a3c8268032ff64e724a87522361824"},"res/import/01/012b575db.json":{size:40910,md5:"fb277898637eb7e9c053a9de70926055"},"res/import/01/012d72307.json":{size:1333,md5:"202dca26b4c7262a82d6ff181fd19ae0"},"res/import/01/012e6baa5.json":{size:7669,md5:"890d141e8644ae9632bef43dfdcea030"},"res/import/01/0136d1869.json":{size:2249,md5:"041932cafbeaa821554ea6828f28ae2f"},"res/import/01/014c55fa7.json":{size:24514,md5:"02c005d29b070ffd85e702881cc577ad"},"res/import/01/014e80f94.json":{size:1185,md5:"d159556dbfe6ba73ff837999662e6305"},"res/import/01/014fd5d27.json":{size:7618,md5:"9465a6b57d53c38f6332eea7a734a355"},"res/import/01/015ebe7ba.json":{size:1249,md5:"b3623cc722506fc47ed83ca9419f5e3c"},"res/import/01/0169c5a22.json":{size:157830,md5:"a9538510dfd4e17ef59520eb9f23f982"},"res/import/01/016aa0235.json":{size:20595,md5:"d3abd20a9238dca1b86a3823de6f60ef"},"res/import/01/016d7586d.json":{size:2248,md5:"fde76e526689fc436063d05a40eecffd"},"res/import/01/016ea22d-0b06-4d97-8663-16a941a04370.json":{size:174,md5:"e5f4df803eae11990329157040ae4d3f"},"res/import/01/01711adf4.json":{size:1467,md5:"91c6b8c479dca5afcefea42d088f06c1"},"res/import/01/019674dfd.json":{size:2206,md5:"2ec814668ba3f5d04aa329e7e94056ff"},"res/import/01/019c87659.json":{size:13654,md5:"5afe5bea5a389aa9a5b104d14641df6f"},"res/import/01/01a772180.json":{size:2947,md5:"807b3cc70a4ccec8e5d66ca37fb935ad"},"res/import/01/01a7c2b34.json":{size:6090,md5:"9d20290ce1df27fea173578eb174725d"},"res/import/01/01ab932fa.json":{size:42367,md5:"6ad9b57ae7846c5eac36040d88a04314"},"res/import/01/01b3f2a48.json":{size:17985,md5:"e718ab7980689dd37a210fefb5ca3e2a"},"res/import/01/01c155c8a.json":{size:2250,md5:"d1b9bfb25577d8705c7ce80327089fb7"},"res/import/01/01c33be65.json":{size:23487,md5:"24dd3d6a468fa0e3430f5f20ba77170c"},"res/import/01/01c4cb5ab.json":{size:3236,md5:"57c876b75029b36632be94e73b0fdc66"},"res/import/01/01c9222eb.json":{size:11847,md5:"77f98c696ec8fd12a2ff3177ad79d6f0"},"res/import/01/01ceca084.json":{size:17729,md5:"8b9b9ffb90228cd37cf77166f4afccfe"},"res/import/01/01d0a281d.json":{size:698,md5:"e865cd0af702dd6c1e6313eae018ed85"},"res/import/01/01d1a4bc4.json":{size:10176,md5:"1aa8ee19f10344f71c363b6d760bb986"},"res/import/01/01d44df70.json":{size:1428,md5:"9b25da12b2ea2abb5bdf53245c7bd79a"},"res/import/01/01d753405.json":{size:29007,md5:"f9e2a44967cbc77222053d7b9ad55cd2"},"res/import/01/01ea2edbf.json":{size:2063,md5:"015993712991ad6c8fe2739239635e79"},"res/import/01/01f8090ac.json":{size:1683,md5:"d487475ad193f4e53034fdd1d5ba8e5e"},"res/import/01/01f890332.json":{size:60349,md5:"c82103817ba52eb48e8fc186f9a9ebf1"},"res/import/01/01fff3d67.json":{size:1168,md5:"5bf215ebe5c0c2eb76d062c1a4da5ec6"},"res/import/02/020aa4494.json":{size:33620,md5:"08d96c1a1e1846f88a7175c8b68bc0a9"},"res/import/02/020ce48f-2eb4-40f4-b49b-53c044343e74.json":{size:196,md5:"88cbd23ae85d7e9ddb881d6799eaebed"},"res/import/02/020cedbd4.json":{size:8611,md5:"7d079c50c071d9e9ee3673e0f43b6bef"},"res/import/02/020ee111e.json":{size:24952,md5:"a884144687d620aea6bcffdd44119b43"},"res/import/02/02486541d.json":{size:6936,md5:"e84dd1c423ba40ed3836a04ed15a13ac"},"res/import/02/025fa182b.json":{size:364,md5:"9c5f7d1692db8a5edc2dd6e0381347fe"},"res/import/02/0263ddc2f.json":{size:888,md5:"29043a83899b9e4f1575f4f89087ff46"},"res/import/02/027198b25.json":{size:1610,md5:"e1341e682be5ffcbf2b1c9c8c899183e"},"res/import/02/02762597c.json":{size:4873,md5:"8d44a29fcb3d8548f900d6e3c6f6b1a7"},"res/import/02/0284e1a50.json":{size:2134,md5:"5d65d18ae9870f15a7707bb2151054d0"},"res/import/02/029fd88e0.json":{size:18825,md5:"ffd3fd87c651c6f69febe46da01416c2"},"res/import/02/02a39f1a8.json":{size:17452,md5:"03c93169a441c742c6127981b4011b77"},"res/import/02/02b465950.json":{size:1476,md5:"d9da4509fdc7aa677042e3554f3bde06"},"res/import/02/02b949ce1.json":{size:22714,md5:"d1a9cdf88aa3026207783df58d1c7a60"},"res/import/02/02ca1ddbd.json":{size:1123,md5:"9de2962ee3f812f3601913accd3fcfea"},"res/import/02/02ca6232c.json":{size:13690,md5:"4db966dbb6106713a2e8fc195f6a6662"},"res/import/02/02d02f8ff.json":{size:1461,md5:"b5cfb8cae756820f834adb681647b9ea"},"res/import/02/02d7c23f8.json":{size:19497,md5:"1015776c8298b3443f0767230b11f4c3"},"res/import/02/02d805719.json":{size:46747,md5:"fc204275609f3824115b8e9dbdae8d1e"},"res/import/02/02e71231d.json":{size:22818,md5:"a8877f4f849eb205a973e13343d42b7c"},"res/import/02/02f24107a.json":{size:1457,md5:"c8da6e85fba7f7b60f94353f39e57fe6"},"res/import/02/02f49f4b1.json":{size:1126,md5:"f8e8ca5a7e8c6bfdbca6c07e1b1e86bf"},"res/import/02/02f7258e8.json":{size:23493,md5:"fd6d45f3cbc3d54e70dc86cc9891a714"},"res/import/03/03039b196.json":{size:2666,md5:"3ad1e0b7840046e11a1cae350d07092f"},"res/import/03/0309d5025.json":{size:270069,md5:"1610335a3a7e121582caa8b5440b05f9"},"res/import/03/031eb3b0d.json":{size:50421,md5:"ceddc4df6c254e7f22350b0e69d45bcb"},"res/import/03/032115416.json":{size:2211,md5:"10d6253f42ec448a77989a4ca4c24c68"},"res/import/03/03217eb10.json":{size:6020,md5:"5c7daf0ac34008a8e1eece7bf0dec44f"},"res/import/03/0327dd79b.json":{size:58635,md5:"48d04b32ee451a2a91988f19c49143f0"},"res/import/03/032a85fb9.json":{size:200228,md5:"a76d92957944189a27929f01a326e731"},"res/import/03/032f5ae97.json":{size:1640,md5:"1797ce535ae94a5f51ef2c17e3847b3d"},"res/import/03/0332db3b3.json":{size:2293,md5:"9ba3d407524727c4b2d4b0f993fe5363"},"res/import/03/033ab9d8a.json":{size:375,md5:"e2ce6c43f656e7c028a19be8192c2a42"},"res/import/03/0353132e9.json":{size:4440,md5:"ddc2c9143d37f7ec55d68a7b52edf0fc"},"res/import/03/0357badb0.json":{size:1389,md5:"184afed595bcd3271baa7521a194a1b5"},"res/import/03/036857b60.json":{size:15204,md5:"afbaa490b718a39fe6908c20bf2e39be"},"res/import/03/037205b1b.json":{size:39539,md5:"b9f9bbd36688eeed29613dbdce21866e"},"res/import/03/0377c4cd4.json":{size:18860,md5:"6061aaaa3bb8bd9a34bfc602be07d69f"},"res/import/03/038d18e14.json":{size:1564,md5:"b4a1d94da3864c871614f79b4076a301"},"res/import/03/03959ba0f.json":{size:1647,md5:"1c4eef4629c9c80cd3a3e0703116f020"},"res/import/03/03970d32-7b56-4bac-b435-494b93d21ae1.json":{size:191,md5:"f1bed8214adc20ed5a895d87ffac94dc"},"res/import/03/03ac55a70.json":{size:11812,md5:"a0dcbaed5d8c7885363f0583836a734a"},"res/import/03/03cfcdded.json":{size:1784,md5:"30bb820a29ce0e3e6c4bf20bf1364d3f"},"res/import/03/03dd172c7.json":{size:797,md5:"558ac5bf2c098b29b81ea3a62ddb001e"},"res/import/03/03e6ce736.json":{size:16075,md5:"5c4f34e90221bc4b8120e580bbd68319"},"res/import/03/03e76d4e6.json":{size:24452,md5:"e50aabcf10afa73a45fbde9a061a6449"},"res/import/03/03ede8a2e.json":{size:6388,md5:"361773b9e7020adb94720dadc9686113"},"res/import/03/03f524147.json":{size:57617,md5:"eb2316af65121ba7f35287035b268daf"},"res/import/03/03fa7c116.json":{size:1143,md5:"e8876aa014bec60ab74fdcb28782eb2f"},"res/import/04/0401f487e.json":{size:1401,md5:"c214976bd6e315f31e3d43e5ec1ef2f8"},"res/import/04/040de899e.json":{size:1448,md5:"f31c7c8c086f02bb74c86a695f32b013"},"res/import/04/040e417e5.json":{size:29854,md5:"5a3b43183fa783d15080da2511378a5b"},"res/import/04/040f771c4.json":{size:7697,md5:"bc6a099e7eb9c2a4de192a3ac0be0ba4"},"res/import/04/042adde70.json":{size:3629,md5:"470d8867a17cf510710b7acea392c47c"},"res/import/04/0436fd90f.json":{size:1457,md5:"417fe5cf152f9abd5b74e0a0ed3f4904"},"res/import/04/044649580.json":{size:16151,md5:"81f488c3b3dfdf2a913bcb1235520d1e"},"res/import/04/0458cbd7f.json":{size:15842,md5:"d7668e282e0ef97607d3cc7c805d34e9"},"res/import/04/046f2ac54.json":{size:196143,md5:"478bbdae5aec7b25c96eebedb4fc1a82"},"res/import/04/047cc6dc-8457-4146-8450-86bf9f8c3e4e.json":{size:1241,md5:"76c839c691fd947ef0a365a73e86a271"},"res/import/04/0490c30a9.json":{size:16149,md5:"00e595423f13c17126c75862064ef67e"},"res/import/04/04942ae13.json":{size:6513,md5:"08a81e825a8d492dadc3cee7f643fd29"},"res/import/04/049bc03b1.json":{size:20521,md5:"e3f3973e13448d100809d3116118ada8"},"res/import/04/04a04d6e0.json":{size:7245,md5:"ea2c9d442ef5f311abe881a5131b07b3"},"res/import/04/04a13e8bd.json":{size:15908,md5:"cdbf6e4caabb3c35a3c6658ef6bb1d84"},"res/import/04/04a90d202.json":{size:3349,md5:"82678b5cd3910f6daae2f01b583a04fe"},"res/import/04/04aa2875f.json":{size:20384,md5:"6b500dec28e31ec83bfbaccd91338264"},"res/import/04/04ac52fe3.json":{size:370,md5:"d7d927c56b2af7b5b7a92a7e87d651a9"},"res/import/04/04adb0cd9.json":{size:2148,md5:"89af7b3309bb8ef7e38d1e0fd0b4fa9b"},"res/import/04/04b387bca.json":{size:81893,md5:"a5968b80e72a21eaa0c64210ecadfddd"},"res/import/04/04bbee0d0.json":{size:50840,md5:"e740abfc120301b88503371f06c322ec"},"res/import/04/04c965c30.json":{size:2266,md5:"0969df4f9dc4515b88e3a50f4765d3e8"},"res/import/04/04cf79a4d.json":{size:2616,md5:"72a9742c0bb87837e4156272e704bb61"},"res/import/04/04d40740f.json":{size:1311,md5:"16bfa884c43b9f9d52f388995b0c43dc"},"res/import/04/04daaed4d.json":{size:1140,md5:"0132ca14ba43c931eb17af39b15174c8"},"res/import/04/04e003fa4.json":{size:21014,md5:"cec0c73348977b19f3f37195a3c3d12e"},"res/import/04/04e30b060.json":{size:1348,md5:"42e2108b125f95e5f11bfaae8c52f254"},"res/import/04/04f2bbdb5.json":{size:1682,md5:"b5923ddf270ee3020565f9bebe2f43a3"},"res/import/04/04f3d31f4.json":{size:7514,md5:"30bed088a9f119aff03470aff4fd188e"},"res/import/05/050ae3970.json":{size:1543,md5:"74b4d8f73b94f8a9e3104001195565cd"},"res/import/05/050d8b6ee.json":{size:27187,md5:"521d710bc56260f361f49c0978cd229b"},"res/import/05/05147e7d7.json":{size:92345,md5:"5991aaacb846cfc711bfd2373dc2a21c"},"res/import/05/051521f9a.json":{size:35935,md5:"f54d4576843cae46a9690632a326ef41"},"res/import/05/05202889c.json":{size:6776,md5:"4df6f821b274303bfa63a6d3b8a9ddc7"},"res/import/05/0527cbfb2.json":{size:1461,md5:"9a66744a36cd8bf90b1c006f0bc5a0c4"},"res/import/05/052a91b3-7244-4515-825d-faaf06600c0c.json":{size:204,md5:"a8b038cf616b51aa55cf341ec457a7de"},"res/import/05/052b98f00.json":{size:28519,md5:"4fb10b48c318b815db4f8d21f06764ee"},"res/import/05/052bd2117.json":{size:1670,md5:"f1a61af978535d355427b14b284b1a1e"},"res/import/05/052bf670d.json":{size:4971,md5:"0464969af948bfa512a51be4f7f2ade3"},"res/import/05/0541e2359.json":{size:1170,md5:"060e512b17a213c699640f4afafcce6a"},"res/import/05/0542c28e3.json":{size:1523,md5:"6b6942e84e25818005bfe6c2818ea591"},"res/import/05/05439fa90.json":{size:4085,md5:"e49eddc3a7adef75f2c0bdae8a4f5968"},"res/import/05/0557955ea.json":{size:36199,md5:"de73a577c53661e9b037d7234dabf058"},"res/import/05/056a444f1.json":{size:1335,md5:"ea1f4dd82953c8d2a05290fd5b75ad87"},"res/import/05/056f4266e.json":{size:1803,md5:"5b52c6fd5180002cc9f3880089656c53"},"res/import/05/05809ff45.json":{size:2089,md5:"11eb77d75ea0d4fd7b0e507fae219e55"},"res/import/05/058a331d5.json":{size:34592,md5:"e404cc937247899700b04c042689c6c8"},"res/import/05/058c4a033.json":{size:846,md5:"aae42415141569dd874f2ce80c26ad50"},"res/import/05/058e6e0a3.json":{size:14543,md5:"6c2f369ba780c47ff9a05e0662f3225f"},"res/import/05/05909567e.json":{size:2288,md5:"77b3013376bfde30693d579d459e883e"},"res/import/05/05949e003.json":{size:603,md5:"356fad7e22e204a91f4dfbd3e9f328f0"},"res/import/05/05a7b2b75.json":{size:4780,md5:"b7bd0ce5ce88467ca1f68bfa64df1915"},"res/import/05/05ae75ea1.json":{size:13656,md5:"bfd1ae051983e55c8525d6f978b58aa5"},"res/import/05/05b51fc2c.json":{size:871,md5:"f1db9f1ab0fbf54dc5a8d79a96040287"},"res/import/05/05c69251b.json":{size:3047,md5:"474faa120011f5ebaf4cde179cf8499b"},"res/import/05/05d731b07.json":{size:5682,md5:"74209c11c673f949c5c39c2b0b2d3f16"},"res/import/05/05d80794d.json":{size:85618,md5:"da0681122d57b708f728c202baa9ec22"},"res/import/05/05dd2bbb1.json":{size:986,md5:"611ca2b457542fbc9fdb7241845ffb22"},"res/import/05/05e567443.json":{size:27644,md5:"f82561a92e7a8087942300a5d62f0b87"},"res/import/05/05e880cf5.json":{size:104297,md5:"4c19a94036c850b8427666fa335d928b"},"res/import/05/05f04b5e0.json":{size:25492,md5:"bcd84e8a8bc03e0fd10baa7c052ef1e2"},"res/import/05/05f5a8880.json":{size:16835,md5:"ea6c8a562d9145bc8c07d5e8ef2ea51a"},"res/import/05/05f62e36b.json":{size:1329,md5:"16b88257275171d7b8677e57ed3d14e0"},"res/import/05/05fc955ef.json":{size:2133,md5:"ecd9110d0dda67b724b796a99143fd17"},"res/import/06/060067847.json":{size:23673,md5:"f3c2066a2905772c75e7414a5c8e023c"},"res/import/06/061723cfe.json":{size:1330,md5:"e4178ba1c5191549684c9f722119b5d3"},"res/import/06/061989618.json":{size:775,md5:"8003e4d8c4587c18c6a930d43b62da63"},"res/import/06/0620745c3.json":{size:33258,md5:"0e6d38f91570e6dfa87e48ca24510dfe"},"res/import/06/06248796-ca21-4b31-a099-afff6b7a3d6e.json":{size:197,md5:"49805f7b61e7306b4f603e7dd93929fd"},"res/import/06/062e3dbff.json":{size:229403,md5:"24c6d58c853fa02a6667ab6a7f575806"},"res/import/06/063014180.json":{size:1535,md5:"af4f922bc5b6d197ceb526428260c72e"},"res/import/06/063fcd464.json":{size:12347,md5:"139ac5a30c109302a89a206673f7795b"},"res/import/06/0644f414c.json":{size:21257,md5:"f100cf64cba19027f498e6fb2500abe9"},"res/import/06/066264abf.json":{size:23065,md5:"ef52020faac8fbdb88c28582ebc915b3"},"res/import/06/066d80196.json":{size:1428,md5:"74697c54f8e3fb9ce113cb07c891dc0d"},"res/import/06/0677692a5.json":{size:1654,md5:"21a5820ad2f4b90baf6616e760d6f9f2"},"res/import/06/067b1e120.json":{size:1649,md5:"31887af53338cde3cc9edf2b77122a73"},"res/import/06/067daf01d.json":{size:2264,md5:"1b96fa2ec2fb9ab1b49e4dcc8b48a5c6"},"res/import/06/068d4db3-7ddf-4791-a7e1-1de3d7500df9.json":{size:184,md5:"953cbddadab077351e75bf7da6949cf1"},"res/import/06/06982e9fb.json":{size:78354,md5:"8242527d99cb04999affc275705466cb"},"res/import/06/06c716784.json":{size:1156,md5:"2f6885dc7b0c65b8727d04914cf9c0ee"},"res/import/06/06ce91f46.json":{size:668169,md5:"38c6a5cdab3def6f9f035da0415df186"},"res/import/06/06d4695d1.json":{size:9128,md5:"186c268c0040d3efb3ae5e8952fccc95"},"res/import/06/06da2d1f9.json":{size:6607,md5:"c0c8b98cf80c37310a0e50daee64802d"},"res/import/06/06dd403e8.json":{size:1596,md5:"e0419fd7e443e5f76a57419fea0c5eba"},"res/import/06/06e96a197.json":{size:168086,md5:"43a3ff09e38ac98eb68a683f0bc15b87"},"res/import/06/06ee71cdf.json":{size:79786,md5:"e3bbdf5222405bacbc2b0280d08f1952"},"res/import/07/071583b1c.json":{size:68411,md5:"9431e6c21a22cd64352cb67a6c58b627"},"res/import/07/071c890d0.json":{size:1559,md5:"de21f8f0587b3c4dd5fd17dee46420e4"},"res/import/07/07222fdfd.json":{size:4841,md5:"640fabf565dde569981c32b66c76cf7c"},"res/import/07/0723a2a6d.json":{size:27630,md5:"4fa2d4ca8f9a4fb4c5bf6db75fbd5068"},"res/import/07/07267595a.json":{size:1719,md5:"4cd771c9f5e3868a8b681d4caf6bb3a5"},"res/import/07/07307b563.json":{size:1362,md5:"2ada25229098001967129f8c21062830"},"res/import/07/0732138c1.json":{size:11041,md5:"c66556510deb9f9adf9d85cb057f0460"},"res/import/07/073230da0.json":{size:230960,md5:"45b11e2f5cee17bea490910f454cf2b2"},"res/import/07/07335f51d.json":{size:950,md5:"32eafdf3a4dbf6129b413e015ca25049"},"res/import/07/07423fa97.json":{size:7461,md5:"3df7bceabf3737c612590f52e4c9a723"},"res/import/07/074244f89.json":{size:12010,md5:"392426c4ef17d4945e809a02b8d2c5eb"},"res/import/07/07692cb7d.json":{size:1640,md5:"bc529515617000000865438f60c12192"},"res/import/07/076b622bd.json":{size:16024,md5:"2f652c51fd93a01b2bd162491782ba4f"},"res/import/07/077ac26df.json":{size:1498,md5:"74bf28b4b7801a0f4c08758cd2754266"},"res/import/07/0781203c4.json":{size:1671,md5:"455cfe2aea1e1274734cdff64fca37c5"},"res/import/07/07840ee00.json":{size:1617,md5:"ed4416734c2492e650cf5eed77823500"},"res/import/07/0787bb930.json":{size:28280,md5:"64e4fa60116ff5297533d378361810ae"},"res/import/07/07984f768.json":{size:24628,md5:"dac6031e30156d16b99bceae496fb459"},"res/import/07/079ade4b3.json":{size:1344,md5:"e3b170f00ce0e6c91708cee22c7a5493"},"res/import/07/07ab1fc39.json":{size:2438,md5:"ced28640a6fd7236ffbfdec4f4635d97"},"res/import/07/07b079cf1.json":{size:23907,md5:"45dd0ef52943b78d9d7128942aa732d0"},"res/import/07/07e1df1d8.json":{size:23574,md5:"5ed160dcbcef9694005a2062eb68f0a0"},"res/import/07/07e5613d6.json":{size:17309,md5:"7c94c11e2e45d23d5b0c769efe0e3d69"},"res/import/07/07eae89d4.json":{size:4684,md5:"785ed6d03267f49d0e7742fad92cb322"},"res/import/07/07f3c230a.json":{size:26560,md5:"70ec0326e1a253a6e047c78ea5dfb147"},"res/import/08/080a3269d.json":{size:1363,md5:"88ac69a6b347808a884002de32f25121"},"res/import/08/0825b3d95.json":{size:9248,md5:"a33d41ba72a4d6f9501faf2bd7abed72"},"res/import/08/083364bf8.json":{size:15122,md5:"61a39a6177bf674f5e7bc58517300cf4"},"res/import/08/0848549b4.json":{size:1538,md5:"4d76ed3e65f43254d4a66788ee77ca15"},"res/import/08/0859dd4ca.json":{size:1222,md5:"be2036ab030e1355652e846f4fe26c5f"},"res/import/08/0872d0e14.json":{size:1433,md5:"1f17960558a230e59bac08e0412b1e04"},"res/import/08/08735b3fc.json":{size:3608,md5:"bc49bc392fba84162f2ef8b232f3b691"},"res/import/08/087e74ec1.json":{size:6526,md5:"7872904ccbe57ee22d2e6800c16a04f6"},"res/import/08/08848ac51.json":{size:1433,md5:"fcfb4594631bc49f0f86409302acb735"},"res/import/08/08a19e995.json":{size:2304,md5:"b3e233223d6bdcb5dbaafd508a9042a8"},"res/import/08/08a4fe8a3.json":{size:1810,md5:"e91459eb0c425d5338c3502f553ef45f"},"res/import/08/08b5e1323.json":{size:8544,md5:"fbe0c307acd76a9f4f2338f9711a7dc8"},"res/import/08/08b659445.json":{size:26500,md5:"50123fd9a6c34c743cc185442362f76e"},"res/import/08/08bcd8332.json":{size:6931,md5:"424fe647c171afc8347795a62c2b76e2"},"res/import/08/08be6ad6e.json":{size:2295,md5:"3a92d97bcfa096b8bce2d2d2fd295cb8"},"res/import/08/08cb76ab0.json":{size:2601,md5:"b7891331f888a192c440c0c940d173ee"},"res/import/08/08ed722b6.json":{size:13217,md5:"575bee2bfcea6f7013b7bba90c818d1b"},"res/import/08/08ee5fee9.json":{size:1482,md5:"f4f58b6b05edf418c555b76f3704ad06"},"res/import/08/08fd867f-3efa-43ed-b461-2fea7edd6f11.json":{size:1039,md5:"75239c4afe96647f407b2d10dedc5e1b"},"res/import/09/092456a14.json":{size:1477,md5:"968300d8fb781a79c6f7b719189ea974"},"res/import/09/0924cfd20.json":{size:26456,md5:"aa244a4928abfa1ab08c0a9091c81afd"},"res/import/09/0925e8a41.json":{size:1523,md5:"6fbc5fdd52492b804f7afbd778594247"},"res/import/09/092a99229.json":{size:1535,md5:"c3981d2fd87a4a1daf3784a74682b15a"},"res/import/09/092cec5c1.json":{size:161928,md5:"f93fc7fe23f1ea9a3583f8f0d792e8b2"},"res/import/09/096858260.json":{size:34129,md5:"724b96f81ed8fc6622a1131a64f9a2ac"},"res/import/09/096c37386.json":{size:48955,md5:"38d6d7c1abe59bc39a9328f845251942"},"res/import/09/096d8b2af.json":{size:1800,md5:"51fbe36a8a425b9a3aed37855bcc7a45"},"res/import/09/097a2241-e356-4d92-b095-6cab027c4354.json":{size:39783,md5:"f06ba92b6cfe8abfab12b01baed35729"},"res/import/09/0999e5045.json":{size:1146,md5:"3e3b7b2d41d71d34e66a5b13273d0fff"},"res/import/09/099b917ad.json":{size:12089,md5:"9eb2ca2a0d3e4430d74e74fd119019c5"},"res/import/09/09b502fe0.json":{size:10064,md5:"46c63329dece5af422960f680daf1ddc"},"res/import/09/09c57f59a.json":{size:1346,md5:"1595968014fb7546d8ee982c3151ce4f"},"res/import/09/09deefeda.json":{size:2073,md5:"6790a491bb7eaf4545fc5fef63df9627"},"res/import/09/09e8f56e6.json":{size:15107,md5:"fc49f3f906b60f06432480702a285f27"},"res/import/09/09ea39937.json":{size:9940,md5:"67ded63793f0b82307d9c1cd0fdf824c"},"res/import/09/09efa3d88.json":{size:1494,md5:"07d417cbb8d3f2400762f065e77db930"},"res/import/09/09f05ad0f.json":{size:2115,md5:"aada20bbfdfc2b85c2031fae55aac690"},"res/import/09/09fe0cb30.json":{size:13898,md5:"e8bfc263bef7a6f7d4bdb6bfb3e2d923"},"res/import/09/09ff27ca1.json":{size:2241,md5:"87d6743e70f136b3bddf87876459f497"},"res/import/0a/0a01c596e.json":{size:2250,md5:"d7c8d21c9078fce1ee2cc6f1be652653"},"res/import/0a/0a0d44d19.json":{size:9386,md5:"20e0d4b753c9eb95c3097b7b85b7fede"},"res/import/0a/0a19647c7.json":{size:817,md5:"b694e8b6a0f6907da63fe8a2b246c2df"},"res/import/0a/0a21b7701.json":{size:2220,md5:"ceafb4c5e4446970ec32e2d3146b2ab0"},"res/import/0a/0a2abf459.json":{size:885,md5:"a15a7b48d76bca73adac75529f8a481d"},"res/import/0a/0a32815ee.json":{size:1349,md5:"b1f7f42d02ecace604ce47cc5ccac375"},"res/import/0a/0a346531d.json":{size:1657,md5:"cd957b1e8110dd9def9a829d0ccd0bba"},"res/import/0a/0a3d8deeb.json":{size:39408,md5:"7c88d30ef3664a439fef4e30ad83bd9a"},"res/import/0a/0a4230318.json":{size:35145,md5:"80ed4217b995fb9d9792616dd331910b"},"res/import/0a/0a44caeba.json":{size:42735,md5:"702a5f10720bc7a387b4b8b6049d543b"},"res/import/0a/0a495c0b2.json":{size:44389,md5:"d34cc1285c74c67ea0c0d780b361cc96"},"res/import/0a/0a5c412b1.json":{size:11223,md5:"b73d35e993357dc6e15c5af0b9f61022"},"res/import/0a/0a5e6b4df.json":{size:1439,md5:"1b7c97a6cffd084df17a6ecd097c20d8"},"res/import/0a/0a9be927c.json":{size:1769,md5:"16837661fcdba7264c1b216ce504da2e"},"res/import/0a/0ab3af3b7.json":{size:14214,md5:"920a5f9778d8a55e20898e3475490523"},"res/import/0a/0abcea755.json":{size:245357,md5:"df21d3b45bf47defec1c8e06ba38a7dd"},"res/import/0a/0abfa32c9.json":{size:54347,md5:"836bc9b4d730051baf07a3f86d140b09"},"res/import/0a/0ac0b614e.json":{size:12815,md5:"42a38e7e4592be1627df51a115a69638"},"res/import/0a/0ad90f115.json":{size:6735,md5:"14e1ea0528b33043555c4831f0ebc986"},"res/import/0a/0af155dd7.json":{size:12729,md5:"091b4c40363a5eb2045a4aeb46a2a581"},"res/import/0b/0b0874929.json":{size:1972,md5:"ce1b018fe481b4d21fb5aaa4d191a9d7"},"res/import/0b/0b08bfb51.json":{size:1751,md5:"51419edf27385bbc63759d26096bdddd"},"res/import/0b/0b1469335.json":{size:1632,md5:"6f6e35b5e6834a948ad73ee930762782"},"res/import/0b/0b23d4f18.json":{size:24722,md5:"d0b21bc9dc253ca91aff79c4a86a46e3"},"res/import/0b/0b321272a.json":{size:96714,md5:"3b72b00671fb3835bd608d0a74198e46"},"res/import/0b/0b36de0e7.json":{size:199337,md5:"f17e0ab86a89d1c509c0cc54d50f2915"},"res/import/0b/0b3aa76c9.json":{size:2063,md5:"85b8832364b0999eff57fdfd4cd8e128"},"res/import/0b/0b503c99c.json":{size:1490,md5:"9aa97245d0383bb5abcfd4f2de1c7298"},"res/import/0b/0b57c5745.json":{size:23121,md5:"1c94e5f7b7703261256fe9630a68b499"},"res/import/0b/0b588d570.json":{size:2086,md5:"a938f8a22e019c0fdee1bc646d4270ca"},"res/import/0b/0b5d58671.json":{size:712,md5:"29f6e77c98177c9df02a7719d01ec37e"},"res/import/0b/0b640a77a.json":{size:1386,md5:"92845271366cec0724d4d37b6b83c53e"},"res/import/0b/0b649e504.json":{size:38227,md5:"1b072c9cb8913bde5bee1a02051d182a"},"res/import/0b/0b66ddd36.json":{size:1920,md5:"4c98d032c8a66b26c030111e084e89a3"},"res/import/0b/0b68de1ef.json":{size:1672,md5:"5f8cfe9f8ed4829e6120e47b53bb3cd9"},"res/import/0b/0b6cdcb5b.json":{size:17628,md5:"46ef2a05ce0003dfe327627810d08850"},"res/import/0b/0b6e3294-28ff-44f8-806f-7660e19cfbf0.json":{size:28785,md5:"55bdfd2adef92979d469776fc2e0fb3f"},"res/import/0b/0b745de46.json":{size:23553,md5:"86fe61da6c7ece2095ce7cf664700987"},"res/import/0b/0b8a3281e.json":{size:1432,md5:"3c133a84ce938b431bf7685920687fc6"},"res/import/0b/0b98d7af8.json":{size:27841,md5:"7b4cf765363e9a656e5cb74301b74bae"},"res/import/0b/0b9c85fef.json":{size:1188,md5:"b5c5b5b0657c005dfeff770d379fe864"},"res/import/0b/0ba1088da.json":{size:3275,md5:"cc2eaeb97364d6b51a683efeb06e67c1"},"res/import/0b/0ba6b2c14.json":{size:1317,md5:"ab40c202bdf5b518e224d1db9a094719"},"res/import/0b/0bafda89f.json":{size:73150,md5:"e52a8dd53511c798dbc3155201d3d5a1"},"res/import/0b/0bb8e5c93.json":{size:85591,md5:"160ddcb1bbef1d401b556365fad3404e"},"res/import/0b/0bbe068de.json":{size:6227,md5:"52559aca50303ab4fba7df61548255fd"},"res/import/0b/0bbe555b0.json":{size:72366,md5:"a8c83d4a2ac80f17f041b3ffd0bf47cc"},"res/import/0b/0bc2357c2.json":{size:7284,md5:"400b5b25fbb7e86354029e5ce6edddf4"},"res/import/0b/0be6f7018.json":{size:1559,md5:"3f3fbdf62575b7406039a515de10b736"},"res/import/0b/0be79dc2-2614-4cad-8f56-18a9341bb10e.json":{size:187,md5:"3c0d795be1485f2a5a6bad5cfd74a366"},"res/import/0b/0be9b04f8.json":{size:42493,md5:"d347172ac3fdd60b8156334206717612"},"res/import/0b/0becb3146.json":{size:1303,md5:"4947222505d792b2f62c6a3e695de834"},"res/import/0c/0c0168c80.json":{size:1442,md5:"4d088a6448e3432b5ff3ba8fa5cf9475"},"res/import/0c/0c129fb4f.json":{size:1600,md5:"3bd493021ae8d2d0110af33bbc5fdd81"},"res/import/0c/0c14cb18c.json":{size:10588,md5:"0cff40180a2e6992773e7fa373e216d9"},"res/import/0c/0c19eed1d.json":{size:1427,md5:"d7c2d0aeb0fb7e40a1ade8debea9e822"},"res/import/0c/0c21c3e42.json":{size:1337,md5:"5214a890e9f1d0d85fabb84256f2746a"},"res/import/0c/0c22eaab0.json":{size:2980,md5:"6bacb4a06b3f338cf9ab0e68d4f93e10"},"res/import/0c/0c286cacf.json":{size:1463,md5:"bf01c1369988bac2bf37b25571197bcf"},"res/import/0c/0c3826fef.json":{size:3926,md5:"63ecbbde141665b7e2e2145d3661a784"},"res/import/0c/0c449d79c.json":{size:9228,md5:"1f4a59e4b41b219db87fc1a4cdea2cfc"},"res/import/0c/0c627851b.json":{size:27485,md5:"fdbfabfc54a7fa662d8dda4fa4e281a5"},"res/import/0c/0c70c5b29.json":{size:1745,md5:"5be7a480faaea9ff9c8ac7bbaca16929"},"res/import/0c/0c80f9a2d.json":{size:19985,md5:"1ca504d3681e013a87d861b2554d55ee"},"res/import/0c/0c8c01d31.json":{size:2733,md5:"a81d6dcb61b96b28d9282533593b3d55"},"res/import/0c/0c8f1b4e4.json":{size:38932,md5:"722c7fb9894117919783ed4581492f37"},"res/import/0c/0c91907da.json":{size:1814,md5:"6cc5b4489965a8586d4c9d39148d943f"},"res/import/0c/0ca879e95.json":{size:12773,md5:"4b6496bcb9ed09511ea70028d018c7e3"},"res/import/0c/0cab91a65.json":{size:36843,md5:"b39d6160882f1cb3e2f3e5b39cd6e49d"},"res/import/0c/0cb27377c.json":{size:695,md5:"4eba7c335a665ef797f9d8029acf86d9"},"res/import/0c/0cc0d9d29.json":{size:1681,md5:"b96be2ba73fa06a759c73fa487072129"},"res/import/0c/0cc3357d7.json":{size:1334,md5:"7ad690ff19fa9c7c874d5cc84b58198b"},"res/import/0c/0cc4e9038.json":{size:1435,md5:"d415e92439996ae92a42ecf1de00101d"},"res/import/0c/0cc609084.json":{size:12392,md5:"2ad256f05abb4ed8faee64c47d3db0b5"},"res/import/0c/0cd832346.json":{size:57201,md5:"186483558f08a33a63986d17ba1f27da"},"res/import/0c/0cdf36346.json":{size:1425,md5:"6a3f7a7c63e97f36158b9787e6cb1680"},"res/import/0c/0cf29fc07.json":{size:27748,md5:"dd44df9404cd892eea51c8eaddaae986"},"res/import/0c/0cf9a09b-3946-4dbf-8b32-114eacd02d13.json":{size:10052,md5:"494bc6b909ede9d766470ceaf4bd4b9f"},"res/import/0c/0cfc34c32.json":{size:1986,md5:"05966cd1970d296b9070f4b0f307bdaf"},"res/import/0d/0d05d5dc6.json":{size:2604,md5:"9bf72c350f06be47005eb6a29eb9238b"},"res/import/0d/0d06d1094.json":{size:1231,md5:"e6be4421c19b39bdaf477fefc8de78d4"},"res/import/0d/0d0d8555a.json":{size:9756,md5:"7ed76d6ad20a36fbfb14d8b71b5397a8"},"res/import/0d/0d12af1a0.json":{size:770,md5:"e259ef4c021e8d2f83473ce400c77314"},"res/import/0d/0d13b8cd1.json":{size:2229,md5:"463fbb9b645747522a9a6815951f8485"},"res/import/0d/0d26ad1d0.json":{size:12136,md5:"0835419aea317debf373454ad8f8c4da"},"res/import/0d/0d284f1c4.json":{size:2269,md5:"669c3d1b55ceeb9689230256e411d098"},"res/import/0d/0d2b0f71c.json":{size:158161,md5:"18f93ca9a6a2af0ce7911423d0033f7c"},"res/import/0d/0d2d7f915.json":{size:12129,md5:"09c6e28a53586bf48caa1c31388a3f01"},"res/import/0d/0d2f075ee.json":{size:1467,md5:"a0effabd990d2c5ffa4b3cad253e4238"},"res/import/0d/0d301373f.json":{size:7719,md5:"4831f1a158fcbae837e67c4090749a9c"},"res/import/0d/0d341338a.json":{size:19043,md5:"1622b3813331b5f72b7e09f70e93aa84"},"res/import/0d/0d36692ef.json":{size:2165,md5:"17405a10a8cc4bbd1cbd586a82f7e131"},"res/import/0d/0d3c2dc68.json":{size:2208,md5:"a3719eed326657d16c8f217a35af6076"},"res/import/0d/0d3d2940f.json":{size:3373,md5:"935a50598c44fa6333841ef8ef4c24e7"},"res/import/0d/0d405d538.json":{size:1608,md5:"4440378e7278a572f0d6f1843a0ca400"},"res/import/0d/0d50397a5.json":{size:27803,md5:"5be5548e4aeba5e4b44a399f6366a152"},"res/import/0d/0d5b16c22.json":{size:1641,md5:"8594b96eb436a7f369ea59aa3debe371"},"res/import/0d/0d624e520.json":{size:56900,md5:"4ae940702cb80362ec5f92d58f55227a"},"res/import/0d/0d67b6c6-9648-4687-89f0-22e86f585264.json":{size:558,md5:"b3bd2113cb69237a862671762ad3d99b"},"res/import/0d/0d68ecd4e.json":{size:1200,md5:"151e9d9a18fcb8aa5e94732ec2269cfb"},"res/import/0d/0d72e618a.json":{size:6849,md5:"62fbb83af14d88a6cc4b1ad71c276d48"},"res/import/0d/0d77d5847.json":{size:18114,md5:"d45a6b459dda11b3a5f70beca16fc42d"},"res/import/0d/0d7d7c001.json":{size:127687,md5:"2e3db42bc6154834e674c523c36e6990"},"res/import/0d/0da320687.json":{size:2932,md5:"6f734ca84fb8444e30cc772fdb8e45c6"},"res/import/0d/0db8fb18-9771-44a0-81a2-ec3324f4f6fb.json":{size:171,md5:"439503463a9d8bea57a83abb6a810a61"},"res/import/0d/0dc1204c-1e67-4781-96a9-41e0096db962.json":{size:623,md5:"63de8a740c23168b698d90b608c10ca7"},"res/import/0d/0dc4a674b.json":{size:67797,md5:"949df8e08b4e9b15c575eeb19d913431"},"res/import/0d/0dd1ae518.json":{size:11393,md5:"cf2d2b191ba81afb7b2029e76d3dd449"},"res/import/0d/0dd283688.json":{size:26698,md5:"37d24184af47094be0dbea918dff2213"},"res/import/0d/0dde8654d.json":{size:13658,md5:"08c36a0ab5c3dc521a52b1d09ed041f2"},"res/import/0e/0e04a81c3.json":{size:1551,md5:"bdeea3f99ff0619a48641944db73837d"},"res/import/0e/0e0f5659d.json":{size:23798,md5:"8963aaa52f77ae290ec7b51296c10179"},"res/import/0e/0e1205242.json":{size:15275,md5:"46a9b8bed1e185c6a050074014ed192f"},"res/import/0e/0e1303370.json":{size:3304,md5:"b918acfdc698ae904d09c09d5f5f98af"},"res/import/0e/0e228dd11.json":{size:69768,md5:"4c7856e3caf3bb73d5b314e72e64c5a7"},"res/import/0e/0e2562cf2.json":{size:1038,md5:"f217dcc1ae32b3e3a46992d0618054d1"},"res/import/0e/0e2ca9451.json":{size:315302,md5:"18b850891377e8558877804b65d61375"},"res/import/0e/0e2ec04ef.json":{size:3270,md5:"43b94e5d6b877b680b97ad287bab2502"},"res/import/0e/0e3ad0cd5.json":{size:18435,md5:"bb48febbefd2c9442fde23d375fa8a6b"},"res/import/0e/0e50eef53.json":{size:68918,md5:"aa8c65329a43971c926300e57991297e"},"res/import/0e/0e60a9b72.json":{size:11939,md5:"c1a406fc2e90bc140378452ce065dc19"},"res/import/0e/0e6299935.json":{size:17935,md5:"e36ce89ee23e543a5645a6e2e9179584"},"res/import/0e/0e69916ae.json":{size:1589,md5:"71786047f2345fe304e75a99cd267ede"},"res/import/0e/0e76eef5-ffcb-446c-89fb-cde6914d97a7.json":{size:184,md5:"f22a8566eb170a1905678bfc8a3a0ce5"},"res/import/0e/0e8667440.json":{size:16876,md5:"cb3bae657d0cfcbe41e1aec4475e116c"},"res/import/0e/0e93aeaa-0b53-4e40-b8e0-6268b4e07bd7.json":{size:4703,md5:"56864f407307f3f1b207f3ff12948f4e"},"res/import/0e/0e962c8b3.json":{size:98540,md5:"076946099cdc6d28718736b8a65b88e8"},"res/import/0e/0e981fe60.json":{size:1311,md5:"2dd7bcb8538d30b4e0a3c601148bdd74"},"res/import/0e/0e98ae9a-22a0-477e-bfcf-a78c51a52801.json":{size:1158,md5:"1434bb436d71876b5e46360bfccb2cb4"},"res/import/0e/0eb536d51.json":{size:3698,md5:"7b9bd0387e0e368c13c6b41907bf3b8f"},"res/import/0e/0eba826a5.json":{size:24068,md5:"c436c7c53b611e8b2086bd080064e717"},"res/import/0e/0ebe62146.json":{size:15226,md5:"92bbcced11f51c4cc342e69993c91729"},"res/import/0e/0ebfbbb4f.json":{size:1133,md5:"e1aa55ba7d55708c0df791c892e7be3a"},"res/import/0e/0ee655509.json":{size:2119,md5:"9895dd194fa0182245fe1b207b369be6"},"res/import/0e/0ee8774d7.json":{size:2201,md5:"fc67a57ff1b3c8f1e88a5fb075ba8d03"},"res/import/0e/0ee9082a7.json":{size:42991,md5:"370b32f3cb67e1b358d4d15e64c44f91"},"res/import/0e/0eeef0236.json":{size:1772,md5:"f4e17e589e8176f73aaecc5506de31c7"},"res/import/0e/0ef049b4a.json":{size:23078,md5:"476dbb98763f32e75683e90cc7f67c80"},"res/import/0e/0ef501500.json":{size:37340,md5:"6fba9f331531e90de4b4bf3ce533b817"},"res/import/0f/0f005b8f9.json":{size:6668,md5:"406736ff741f8869a7ae5cfa8d985856"},"res/import/0f/0f02cc071.json":{size:28757,md5:"09c9cd891207c4458a48ca8457bdb670"},"res/import/0f/0f030208a.json":{size:18872,md5:"4174252b7486bf560e5291eea472217d"},"res/import/0f/0f0969ff8.json":{size:2661,md5:"27f5c904c7f4da1af25b6ec5a63da144"},"res/import/0f/0f141f4cc.json":{size:23348,md5:"79db7ebe96014bc089d308c608ec1007"},"res/import/0f/0f1e103f5.json":{size:28057,md5:"1a188bd1fe2a79e7e2133a4d501d471f"},"res/import/0f/0f1f40b10.json":{size:43827,md5:"e35db3ef9d7011554f99c7f32e4845eb"},"res/import/0f/0f275dc05.json":{size:2195,md5:"8d8327be90e910fe975e28074aa638e6"},"res/import/0f/0f3b88bd1.json":{size:74416,md5:"2d053661695746404c69235e35f52e0b"},"res/import/0f/0f4c3a19f.json":{size:3704,md5:"020e5da4bb48fea06c169ca5ef9159f7"},"res/import/0f/0f4f8eb11.json":{size:1457,md5:"4616d325bf59eff30a1ce0780e51edf2"},"res/import/0f/0f5872552.json":{size:32378,md5:"51d3fa61e0d16d6e1e1eaec9318f4780"},"res/import/0f/0f5b8298d.json":{size:11775,md5:"022eb448aa29d0f2b2a08699be4df21f"},"res/import/0f/0f695dade.json":{size:6464,md5:"2e824da5d96b71818696f2f7b25bcf28"},"res/import/0f/0f74ec73a.json":{size:37622,md5:"ab39fbf86e9bd6372315e3ddef12363c"},"res/import/0f/0f795224c.json":{size:7400,md5:"af78692f6bc557e0132268a287c40d95"},"res/import/0f/0f8abbd20.json":{size:3014,md5:"58793d54ee8c0a0cad81af8b7a87f588"},"res/import/0f/0f8fc65fe.json":{size:1724,md5:"28995c1ac6cc17a0e9dc11ff35fe8736"},"res/import/0f/0fa74047b.json":{size:348638,md5:"8a9fb2eaedf2d508bc56513190c09776"},"res/import/0f/0fc5ba6e3.json":{size:4431,md5:"466b0273d5dda39b17046b5a66651734"},"res/import/0f/0fc5f1d25.json":{size:1107,md5:"58c80513692c4201dcd1301d33fec70d"},"res/import/0f/0fd515dd4.json":{size:63187,md5:"fb72ed8a3707b21bd81e7b332a8aa572"},"res/import/0f/0fd79e294.json":{size:2257,md5:"17d58fd1d444973d8fa82a2c33c4afc0"},"res/import/0f/0fd818902.json":{size:40323,md5:"6d54c4db90c44ae3ecfd9c2dbcb6d453"},"res/import/0f/0fde638f9.json":{size:95417,md5:"a33ea0afd449d7d3d4f17f329669ae09"},"res/import/0f/0fdf25ccd.json":{size:1311,md5:"8f860964ad693a165f6cc71422ffb0e2"},"res/import/0f/0fe272e13.json":{size:23968,md5:"75f25427b6b7eca11b4d449c32644ef0"},"res/import/0f/0fe4ef693.json":{size:141228,md5:"aa50693c198adb2932d3209374d3970f"},"res/import/0f/0fe60dd6d.json":{size:1213,md5:"96c868e642ff7e3e13781a28087175ef"},"res/import/0f/0fe63ed76.json":{size:3284,md5:"33422738e17bccebf777d340cad6ce9c"},"res/import/0f/0fee7d500.json":{size:19360,md5:"212a0927992355ebb83f393881454173"},"res/import/0f/0fef55c44.json":{size:45523,md5:"b0b0fcab81c7477e9fc915aa5688868e"},"res/import/0f/0ff68bae1.json":{size:570,md5:"12f6cbc2e7ebccb94f9375af8b0409ce"},"res/import/0f/0ffbe3f89.json":{size:1485,md5:"9a9eec587edadf36db764497bc34e8d9"},"res/import/10/1044a509-b4d2-4d16-83f1-f11ae6df70d9.json":{size:171,md5:"b1be1bc371817e0b171a1c78c6e92b9e"},"res/import/10/107c0427-0842-415e-8789-bed948993780.json":{size:174,md5:"14f1b37e22ca319017d7b1be5d1668ac"},"res/import/11/11386e32-354d-4880-8f71-f3f5c5877985.json":{size:6288,md5:"b726301b060317a7d7128903ec6027a7"},"res/import/12/121a3b1e-4df9-4d8d-ac59-22b5ff354798.json":{size:7895,md5:"23839175e96dace70e81f41df1b08c6b"},"res/import/13/13e3bbc2-cbd2-4aa4-8d65-45f58e57acb7.json":{size:668,md5:"eefa667cd8afe1e5be661818f1837ec8"},"res/import/14/14170ed5-4978-4b80-99b6-9ed741847739.json":{size:184,md5:"df61982d9ea42cdc3814353186ef47ac"},"res/import/14/144c3297-af63-49e8-b8ef-1cfa29b3be28.json":{size:2709,md5:"1d76c086e6d070875cb1b81286f32d3a"},"res/import/14/145dabf1-63b0-4f8b-bc20-9d9b6131bddb.json":{size:186,md5:"5c61eada7562569bc5e32cbcab1c9671"},"res/import/14/146a50bf-f8cf-4c39-a634-02e0562fa273.json":{size:186,md5:"a2a3f5973d7e0c68ae36a86479548a06"},"res/import/15/157653d8-0346-48d0-8dc5-aa2cfbe887a3.json":{size:61,md5:"b6d122a3fb8ad8fd5bf44c747a468089"},"res/import/16/164b68c9-0907-49f6-94f3-f185f53704eb.json":{size:327,md5:"ae46aa3c9401baeded692ddeeda65428"},"res/import/17/17083e11-1ca7-439d-a79c-800fd0bd6634.json":{size:198,md5:"4aca71a1019b639a9ef734b61f2a1f8b"},"res/import/18/18069d5f-5879-4ab5-a557-18ba5bcf834c.json":{size:187,md5:"cea4bf2ca38e161fdfd4f581dea9021e"},"res/import/18/18dddf53-bfaa-4850-8ce6-bb2fe93d27a6.json":{size:186,md5:"741ab26d0e8d61d276d631f2538cd1b8"},"res/import/19/19954f86-108a-4126-bb29-76a0c16db62c.json":{size:5248,md5:"47cdbdfc6720c4473ede25b653737e5d"},"res/import/19/19ed7b78-faea-4329-84f7-8fc506cffc47.json":{size:926,md5:"d76e7f4dd6be8d6cc2eb90eca8fde1c2"},"res/import/1a/1a9b4833-dbc6-404a-8f42-9ec8c1b692f4.json":{size:8204,md5:"cc8963183f2a54c42d60ef7467e044f1"},"res/import/1b/1b423f9c-3fa5-4c01-82b9-af7da6857741.json":{size:181,md5:"1c8bb4cc0a5a0ab0febd328afc469455"},"res/import/1c/1c0bd588-5625-4622-84f7-36cef3deffc1.json":{size:192,md5:"1b9ac3753d24714aa461f5639fe08e21"},"res/import/1c/1cb6fd7e-117b-478f-bff7-4d3c35ab4973.json":{size:1246,md5:"f56353e4695b36949164439e5fc1ab12"},"res/import/1c/1cb8a40b-c2a4-4389-9821-e3d585bae4e1.json":{size:140,md5:"f408897636e9aa948de03c495f22e23b"},"res/import/1d/1d34a026-584d-46ce-9347-5ddf9d870594.json":{size:4852,md5:"2174172f63a7c493c6f56ddbbac9f0b0"},"res/import/1d/1d679cb1-7821-42d0-a632-5c3cf4a82aa6.json":{size:178,md5:"f2c6492e9f07a7294ba8f4bf03810896"},"res/import/1e/1e4ef2cc-c5fc-4834-8236-7ef7a40bef44.json":{size:968,md5:"cc6365225e12b833d169e194b2bfb981"},"res/import/1e/1ea51d84-a065-4bde-8f7b-dbfe996959d6.json":{size:187,md5:"6900762d9fdde2ce36eafc50cdb72351"},"res/import/1e/1eef65e2-94fe-4b77-b4fa-a33a9ec92dee.json":{size:35035,md5:"790a44ff0dcfa50a341e0344d95fdd95"},"res/import/1f/1fb828a3-b991-4f08-a685-20a5c6d22f10.json":{size:172,md5:"e3fb239b80db63e0c396ed4d97dd881f"},"res/import/20/20637b59-6e6c-4417-b095-ad58f1ac968e.json":{size:1451,md5:"814ac4a153e0b818e7caaa8949e4aff5"},"res/import/20/20c1022b-624f-4ee3-83e8-8b034639669c.json":{size:5246,md5:"f4cd376d9d8d9ebcbc10703991ff88df"},"res/import/21/211eddf3-c53d-46e3-8c09-c1bf38e644e2.json":{size:4881,md5:"7ac1591441fb710a7f24402d1158772c"},"res/import/21/21670953-968e-48d6-aa7d-366c4886d0f6.json":{size:181,md5:"8016d9d3c0a5c6b4c8fb9ba97bfb1c78"},"res/import/21/219531bf-2b9a-4f0d-be2e-84db1fc043d7.json":{size:175,md5:"76019eb0d38131832af23e604f9c716a"},"res/import/21/21acbc4d-48c5-41cd-af82-6d78869c7c8f.json":{size:186,md5:"4f45779134bd7c42d1a231dae557837a"},"res/import/23/23326c6f-2e94-470b-81e9-ae3cd8d03b3f.json":{size:185,md5:"1c21f4ec2296f759f8ec80bcc262917e"},"res/import/23/235a8ee4-7e1b-4af7-8916-2cd71007f61d.json":{size:186,md5:"81ed9e6bacba2756ce51b257fefa8f82"},"res/import/23/23c8bea0-2986-423b-98bb-308b832f6ace.json":{size:95,md5:"5ad125850ffe0a8322a3192e5d77f0f1"},"res/import/23/23ccd3c7-fafd-43eb-bac0-eef3040caafe.json":{size:178,md5:"3a782726b1c82228c1007fbc8c2430b7"},"res/import/24/248504cb-8321-463d-97af-38656978996a.json":{size:15916,md5:"d5b9ca7bc54c19badac5b999ca74416d"},"res/import/24/24e2e334-0858-4810-a909-c2f5394e72f5.json":{size:61,md5:"9cb60a23121be384332f2d315628c677"},"res/import/25/2506c8b8-c747-4b43-9c58-617eae913f5d.json":{size:160,md5:"f2fd34e525024c1f59350102c68656b0"},"res/import/25/2518ec33-3291-4eb8-9066-6adf730737a7.json":{size:196,md5:"a115a61234b9d0bd416b5d027f7b999b"},"res/import/26/268b1aff-299a-4735-9f5c-5aa8d4d51788.json":{size:183,md5:"c36e1c6e03cb9a0f3de5adf675180b25"},"res/import/27/27465b53-4218-4d31-aad8-858ee976223a.json":{size:174,md5:"7041528d97dd152843410b92df934e65"},"res/import/27/27830b86-4eda-4b5c-816f-9241f3f80c54.json":{size:185,md5:"d6e9e8e89449dfe85b0aa1a089d35a76"},"res/import/27/278e1a8c-d33e-44bd-bdf8-09884f69ba4f.json":{size:186,md5:"3a4bff978da94bbb44666de8e68f1259"},"res/import/28/2874f8dd-416c-4440-81b7-555975426e93.json":{size:4058,md5:"cb6cae98fbf2f34bef47bcddd9489384"},"res/import/29/29304bcf-df73-4c8a-bfa4-bb65fa489a3c.json":{size:171,md5:"2d6807a10035417ab3b178c2e0dbe724"},"res/import/2a/2a296057-247c-4a1c-bbeb-0548b6c98650.json":{size:232,md5:"884e90b20ccc9c187b40e35ba77b08a4"},"res/import/2a/2a37d219-7014-49ec-9d3d-1be4bc8ce0e7.json":{size:9029,md5:"c2d7ae491b130e02888ab6e074d56aa5"},"res/import/2a/2a7c0036-e0b3-4fe1-8998-89a54b8a2bec.json":{size:19587,md5:"efbce43d5a6f11fdb755478d54a5f802"},"res/import/2b/2bf2ba61-696e-4235-ae79-27ef9e6d4117.json":{size:878,md5:"c0d24aa56a0fa9cbaef97019b10561f6"},"res/import/2d/2d64ab09-720f-4471-b600-46cc92af96e3.json":{size:340,md5:"c92d695746162cd531f99393c580d5ca"},"res/import/2e/2e1b3f30-4b3d-4cbb-b87f-83ecaf10a272.json":{size:187,md5:"8958764582e46c2c7e0b16d5b02f57ea"},"res/import/2e/2e5b29d9-dd5e-4f3d-92e9-e580745b3bc8.json":{size:4426,md5:"f2b768bdbc289a3015197407fd0eac51"},"res/import/2f/2fd24990-3878-4e40-b0a5-60de9fbe3a3c.json":{size:188,md5:"39c263db547ad4e6d371c7e717fa6b93"},"res/import/30/3018857e-75ef-4811-b66a-d08c220abaed.json":{size:178,md5:"7e1ad750675f157a43970a94472bda24"},"res/import/30/304cc90d-f25b-4096-8cdc-13bc3a6880f5.json":{size:20132,md5:"807bf40b3a3b1bb399c41ca46d2cc36a"},"res/import/30/3050d1be-ffe9-4af0-9a3f-30286715174d.json":{size:1154,md5:"e235b19698360e0088e43632e6dd88b2"},"res/import/31/3150d514-282e-454d-9caf-bccecfac03cd.json":{size:190,md5:"c4c149b5f9cb8cc7a9067c14066126cd"},"res/import/31/315d3768-3d81-41cc-954f-413891202064.json":{size:174,md5:"126b528d3fe98a64ef8abccfeda0b0a6"},"res/import/31/3184c0b9-ae80-4a86-801a-5c13a9cfbd15.json":{size:115,md5:"7100d43dfd2d7bbb1db3ee344bee5ef4"},"res/import/32/32b59e53-680b-4a57-8ad6-9e135ad4dbb7.json":{size:347,md5:"21ae6b00f9f271a8d30ab42e27e2745b"},"res/import/33/333fd1c0-645d-487a-9202-251aa452649e.json":{size:9651,md5:"5e93d05047cf67e322fb0dabfd3afbf9"},"res/import/33/3375c45c-45b3-45c3-9308-dd36d307f14b.json":{size:877,md5:"37f9464b121418e4bbef4c771306149f"},"res/import/33/33b34ac4-688f-4c67-959e-f178316dbedb.json":{size:171,md5:"ce25e42ccc59305cc03797f5de62acdd"},"res/import/33/33d37a50-acae-44de-af5d-3e4c85b1136e.json":{size:466,md5:"b111f2c06d8116e39b940bfde44d2c9e"},"res/import/34/345a48c3-c00c-45d2-b6c9-b1ac49f46662.json":{size:8832,md5:"25a772343a38a386f7b160a591a6aed7"},"res/import/35/35904126-06a6-4d95-87a0-e2f3d9ed18ef.json":{size:11470,md5:"71e44a4885da56ca2949b27dfe1414d9"},"res/import/35/35df0c6a-39a5-42af-8e3c-9290a4afe9c2.json":{size:184,md5:"9252421d6bb2ba1cadfce7670a833f1d"},"res/import/36/36b1fede-eb12-46d0-ae31-c827bbb7082c.json":{size:179,md5:"ec7a4a2d2aa8837f398f1b90addf3556"},"res/import/38/384bed13-04ca-45f1-a301-29bc83f3d1d2.json":{size:186,md5:"ca293eb51a65fc9ba87a012abc667f4c"},"res/import/39/3922d3c7-1a5e-47aa-8d28-067d60654314.json":{size:462,md5:"57c78813316cf2e9a23574563bffc1ee"},"res/import/39/39c5ef4e-3557-43c5-b12d-08d6cef3ca4c.json":{size:70162,md5:"426af5a852da6ce464729a6d9bed11e7"},"res/import/3a/3a3ee1bf-e8f6-4fed-8c81-f2d2f9beae6a.json":{size:193,md5:"ff81e6506b2fe315fd260dfbb0955366"},"res/import/3a/3a7bb79f-32fd-422e-ada2-96f518fed422.json":{size:132,md5:"238b98c5dbfd374101682fb8ec9ecdf3"},"res/import/3a/3a8bc7f3-cf88-4b85-bd36-b7960d2a82b5.json":{size:173,md5:"7a002fc0dc47034d580aae4433722f95"},"res/import/3a/3ada9441-88a6-466f-a400-8cf6f2522913.json":{size:122144,md5:"a6a0ae45a4779d4727e9f54087b5bb0c"},"res/import/3b/3b169558-d243-4267-b270-14cbb900bf93.json":{size:193,md5:"5cfee1a00058c650ec944170de9adec4"},"res/import/3c/3cdee1d1-47af-4450-97ae-51796412828e.json":{size:1674,md5:"89d7e1ff8d23122731104183dff36cda"},"res/import/3c/3ce4b134-2bb7-4349-845f-e05762400736.json":{size:206,md5:"9f359b8a99fb1aa3b54dd571e4f98e40"},"res/import/3d/3d564744-4c5e-472e-b654-49a59880ca77.json":{size:185,md5:"6b4d267d4cd4a0b8d4fbc8f7888fcac8"},"res/import/3e/3e89356b-a4e4-400f-b8ad-a410e3e7917f.json":{size:69,md5:"6a1fdb06816240ba3d279badc18ec33b"},"res/import/3e/3ed8ab19-c6db-4b87-8cd8-e49ca89736d3.json":{size:186,md5:"2f41287fd4de1dc69e54325216186140"},"res/import/3f/3f02ada4-587a-4eb2-894a-28d1982ecd71.json":{size:5728,md5:"47b94eaf66632eb085f10091d809ad44"},"res/import/41/4149abde-21ea-4336-a459-fa06c5db012d.json":{size:195,md5:"92e12fc81cfe5c5a58396fe6de98ee90"},"res/import/41/41f4d474-d707-45bb-af93-637573f92d54.json":{size:6452,md5:"81312f8eb02e5dc0365f7198610a1d16"},"res/import/43/4372e5fd-dbc7-4be1-913a-14fc0f733be5.json":{size:176,md5:"272618e8996cf2c63d024ab8c7d29637"},"res/import/43/43a22f18-72fc-4399-b5ae-8305705861f4.json":{size:280,md5:"fd5298a81d81e01fc078af0b2f8ed1c2"},"res/import/43/43f604d4-03f2-409d-93c2-be1e71bbfe30.json":{size:42413,md5:"c08e7a61b2f15b49a86540cf47feb9f5"},"res/import/44/443c7acf-d8ef-4d24-b373-655269969416.json":{size:175,md5:"04228eaf15c175c6fdda6b46958bc04b"},"res/import/44/44e4faf0-79cc-4b1f-a737-80285e626d23.json":{size:186,md5:"46a0426a20fb69541628355a27dd5b20"},"res/import/45/4513ac56-be02-439a-86bf-5b2af800ebc4.json":{size:14594,md5:"bc83fccb5957cfa3661f25ca518eeec7"},"res/import/45/45507502-e971-461d-ad46-0be09efc94f9.json":{size:67902,md5:"b48cbbfe0ddb64d64978f2b43ee321e4"},"res/import/45/45637ab2-69a5-4068-9d15-9342e020d9aa.json":{size:178,md5:"8de82280f140dafcacee452c1a359476"},"res/import/45/459e0aaa-4ed7-435a-8322-7a745c7a2543.json":{size:62,md5:"7839caa9d9a63f59e1799d07903c97ec"},"res/import/45/45d0ea6d-589c-42a5-9c2e-dece53a88777.json":{size:18466,md5:"5724ade01acf8b63b10640ca216b1b3f"},"res/import/46/466d4f9b-e5f4-4ea8-85d5-3c6e9a65658a.json":{size:193,md5:"63eadaff286aee9996efc46c0108f4fe"},"res/import/46/466d9dcd-b5a1-4e95-8ffa-7213e2399c0d.json":{size:3110,md5:"58f3cf0ec0b144e96576dd9e488e1afd"},"res/import/46/4687a958-d6aa-4b49-9a71-f41c9892471c.json":{size:641,md5:"0e0b7acca55e24de69c328af1ede1bc3"},"res/import/47/470a892a-208a-484d-b217-c00c48ff8711.json":{size:187,md5:"4c75120828cdd82d8e12d40a8bcc5951"},"res/import/47/47c1420d-b43a-403e-9773-60cb5cd64dc2.json":{size:16011,md5:"b33733ffcbfb14ee92cf44bf9deb1517"},"res/import/48/486e39fd-0b99-4dc8-b764-cffc9f0cc001.json":{size:610,md5:"e4da31f3d8ac55387bfa193544f6ee7b"},"res/import/49/49bfeca5-23f6-43ec-97aa-1bbcaf7151c6.json":{size:5132,md5:"614cbeedfe82854b7147b862380c5f66"},"res/import/4a/4a50a734-1c1a-478e-a87e-1026549f2962.json":{size:186,md5:"cb6ac75ad0b1fdb2ee1255f02f3d5789"},"res/import/4b/4b462bd9-b07d-458b-a1b6-f2a839212f56.json":{size:186,md5:"f9001aa29e04825458422d20d8612b2b"},"res/import/4b/4b85a734-7c79-4259-a7cd-54d43d49987d.json":{size:191,md5:"1a09e74754e3536a8df4e0e8a4e20dff"},"res/import/4c/4c5650bd-38ae-41c7-8604-5300d652c2dc.json":{size:643,md5:"bc2e2d063483931266a1f3cd67cc9881"},"res/import/4e/4e8d6264-9ea7-4ba7-a044-9defbc99c730.json":{size:586,md5:"c991fabb158dde74af6d5ecdd644084e"},"res/import/4f/4f137b01-9668-4191-9bee-6fd0e6e44cde.json":{size:3503,md5:"3b99546d971e140ce0a9f33109e1ff44"},"res/import/50/50e2c9a8-3da8-4c16-9876-f4198fcaffdd.json":{size:4804,md5:"333ba87b84b23edc2f18f2bdecd73247"},"res/import/51/515c56a9-2507-4fb5-8fdd-8a1f872f4ceb.json":{size:372,md5:"b505ea32f1851d105991ba3021162bc9"},"res/import/51/51915c86-8d7f-43f5-8e10-e5e31c5738bc.json":{size:306593,md5:"4c07f143719f35286f7dab8e0dbb49d9"},"res/import/51/51ab28b3-d8f0-4f5f-bfae-43edf0e48a57.json":{size:1624,md5:"1188da64d7af5993e7811889872f4a07"},"res/import/53/530b97e9-81e5-4727-9d3e-ac1b7ec6aea1.json":{size:184,md5:"42f7883a1cf38318cbe146992f343029"},"res/import/53/538543b1-7014-48b9-b5e7-8cdc0dc9fe18.json":{size:59,md5:"110c6b67c91e7df5993f4d21225cd182"},"res/import/54/5410b920-df4f-4ae1-915c-0da18f4f3760.json":{size:177,md5:"8909d0f5808625cad0f13ac0b616e161"},"res/import/54/54afae8f-8596-4a93-bb97-7024bf2b6fa8.json":{size:2173,md5:"5a977d6ce6ae08f538c4a33c82752f86"},"res/import/55/5510c839-ff19-4c51-a7b2-3dbd3a5d861d.json":{size:206,md5:"0f7ce3f052b993bc789a8bd3df39a4ed"},"res/import/55/5530e996-b556-413a-a164-28ce8de40741.json":{size:198,md5:"b13956177db4b03db694388420dbac40"},"res/import/55/55a352b6-e192-459f-b597-42c1dab25d8f.json":{size:1251,md5:"cc21d3a5653357e62f07f55ca572af56"},"res/import/56/566d1de3-bd38-47a7-8713-c8b3774a1bf0.json":{size:195,md5:"8b23bb4a2414c4c1c398c2e3a6a97dd4"},"res/import/56/5678e0d6-3446-44bd-baa2-61111b4dc670.json":{size:179,md5:"286758958cc056778a5dbdd052226b2c"},"res/import/56/56830358-5c78-4f17-a879-eabd35ab4a8b.json":{size:18870,md5:"94a7e496c4405ad8f403b2db2bf7fb08"},"res/import/57/571478f1-6492-45a5-80c4-eafb99c179e6.json":{size:616,md5:"786dac9521b23df624b934192e9e83e5"},"res/import/57/5732613b-a456-4418-9da6-03f64c3fe0a3.json":{size:174,md5:"b93cc06e8314ba9d955ceb5a51342319"},"res/import/57/5799f050-1e9b-41b0-a87f-4851723c455e.json":{size:184,md5:"d4467b72ac28b8fc7e0344f84c411b15"},"res/import/58/585674bc-c009-4a3a-ad98-eeeeb2984e2e.json":{size:2540,md5:"3f5d7fa95e40df3aea8cc48e51c1af69"},"res/import/59/5930af6f-dfda-4c17-940c-75ef83ffacf6.json":{size:298404,md5:"4251b0b7c86048327a5aeea9c1a476cc"},"res/import/59/59d9972e-3f63-40ad-96bb-cec4a7b1d2bd.json":{size:178,md5:"b78e7b3c022e40b2b29c31e79b1c9130"},"res/import/5c/5c9d099f-7860-4c82-91db-ea12ba7514b4.json":{size:197,md5:"0cc6656abb70f5c538fff9c141e0b9a1"},"res/import/5c/5cbf51b9-6285-42d1-b35a-752a7ca36087.json":{size:1292,md5:"98091f1ce91aadc03af79f36f9e2a5fb"},"res/import/5c/5cd72d00-e0c1-43a6-995e-d1fd605265f0.json":{size:3509,md5:"64329a3bf841d52b0bc37e96f8f31856"},"res/import/5e/5ec4f129-2ba3-4ad7-baf3-1935e96171f2.json":{size:171,md5:"1cfa3025b899e7802482b6287c6b551e"},"res/import/5f/5f03deff-db95-4130-ae3c-427c94c33198.json":{size:151,md5:"5c69b38d1d3205ac5ef3b5fe6826a468"},"res/import/5f/5fc18621-47f4-4efe-b195-8cc6506f0cf6.json":{size:61,md5:"c5620fecd6596514abafb8b1cf67bd71"},"res/import/60/6026e638-5787-4608-ac5d-046734b339d3.json":{size:177,md5:"c62dd8dd8e22e7e7deafa7f73fe34bd8"},"res/import/60/608c8e38-d323-4cb8-a19c-3d0542d9f717.json":{size:198,md5:"19326da0cc086d2651dff11bfc5c6fbf"},"res/import/60/609fd82f-a1ae-489e-a0bc-5f6edc33422b.json":{size:171,md5:"c6e292cd5e3026523a7314ebd0f7c7eb"},"res/import/64/647e873f-e0ed-4ce7-84cb-9e4d4f8a211f.json":{size:186,md5:"15a12bc49f781e7a3e6232f43f1f18a8"},"res/import/65/65f1dc9c-c103-4308-bec3-20dfe5fd54ec.json":{size:195,md5:"4a744e28b52bc163d767cd60e7eefa5a"},"res/import/66/66b174e4-65f7-4ba4-974c-cee34b765645.json":{size:181,md5:"907567fa3e97c5db97e60348cc56157c"},"res/import/66/66ce73f0-c53a-40a2-a4ac-6b1cb58627ff.json":{size:4078,md5:"8ac6d933d8e95278e31db0c32863b82c"},"res/import/68/687c21ba-99b9-44f3-8efd-7ad0788f3eff.json":{size:11745,md5:"77b8196186467cdf2065963598529c6a"},"res/import/69/69626e64-77d1-418a-9bde-ea7ab95a212a.json":{size:171,md5:"2f930170018e5b611080192827824237"},"res/import/69/69ac4c70-9c63-4914-b31e-f35429eae8dc.json":{size:1675,md5:"50ab622d6dcc09cfb628a142f639291b"},"res/import/6a/6a1e2132-1f42-474c-bd3a-846a659f0bc6.json":{size:186,md5:"5d9a19b058a540db4a42d48622ceba8c"},"res/import/6a/6af0306b-3f6d-4cd0-a37d-91763d2c0044.json":{size:1545,md5:"481095179b448435ccb7b0a14395cd11"},"res/import/6c/6c24dfc8-2601-4d8c-ac0b-540a9ae51e14.json":{size:185,md5:"fe122d4c650c0da57415a2bed49ae27a"},"res/import/6c/6c895038-2745-4ad3-963c-08aa30b279c6.json":{size:177,md5:"c447f43fb48c42ae31d7f787eb216f74"},"res/import/6c/6c9a54cd-761f-41eb-a861-4a786c75846a.json":{size:203,md5:"3220b6804a1ad35eda459bfe60c468e2"},"res/import/6d/6d91e591-4ce0-465c-809f-610ec95019c6.json":{size:15270,md5:"82ebb6c5c5940650032a560371ac1997"},"res/import/6e/6e8afb1d-57b4-41a8-a836-6475ca62e934.json":{size:191,md5:"6ddc2e7361e805fef3d56932331008de"},"res/import/6e/6eecb1da-441a-4932-8ec2-66eaa6007088.json":{size:190,md5:"463fe99c7531c748ecf4a4e157f4cca5"},"res/import/6f/6f5aab5a-1de3-43fd-b349-4d6abe37056d.json":{size:171,md5:"2fa6b7b3f82bbcbdb4e3653d7b2db869"},"res/import/6f/6f801092-0c37-4f30-89ef-c8d960825b36.json":{size:125,md5:"17b20ade167c3325db08ffe0bc988549"},"res/import/71/717f4bf5-bb62-4c30-920b-fba198ae3326.json":{size:1013,md5:"3d97ec56ccd23bfa7f48a34c11de4bde"},"res/import/71/7192b387-d924-4d5d-a3d3-585a96411d37.json":{size:186,md5:"9c47d5be90fe5b8105605d54aac7a434"},"res/import/71/71aee3c7-ed71-4666-ad8e-8881b57953ae.json":{size:565,md5:"9d399ac0778ac2b6e4923150d3597027"},"res/import/72/7238b016-ddd9-4fd2-844d-7bc14c1478f7.json":{size:186,md5:"eb81646045548968aebb192c53856b93"},"res/import/72/723cd501-0110-4407-b50b-dada32034f00.json":{size:178,md5:"ef12c9434f7735946606b726f96f40b1"},"res/import/73/7392bed7-58f8-4811-9bea-60df97473baa.json":{size:186,md5:"5cd244eee35369cfae69f544977b2754"},"res/import/73/73ec661d-2855-4514-ac98-f02dd6a554a4.json":{size:323,md5:"39a8aaa82c31421e85fb008962170db9"},"res/import/74/743a9061-9921-4e1e-9c40-04f7bfbef017.json":{size:191,md5:"b3e6c60167b0ce6d6b4c50e9a7922948"},"res/import/74/74ecaa99-fdc7-4782-96c7-cc2cb6c07fc6.json":{size:187,md5:"afcb244a8ac3005adbfc86870c5dfc19"},"res/import/75/754b5b64-1a05-404e-bc08-125490cd8c75.json":{size:1329,md5:"81184ad7cd68727ce930b14edea99a4c"},"res/import/75/75877f0e-af5e-4e87-a0b5-76b0eeda0f0e.json":{size:35763,md5:"12ddd4399e291ce460aac5f2d20f15b9"},"res/import/75/75a30699-de16-4db8-adb4-9a0b3e7471c4.json":{size:4256,md5:"e4141391fa65d7da2fbecce5df1b7d36"},"res/import/75/75ce7151-3af9-4376-89da-94a5f3bbee63.json":{size:187,md5:"14dcc9d0e49975e77b92e5f8f79332e2"},"res/import/76/76819267-5199-45da-85a8-680a1525527f.json":{size:189,md5:"b5a12365ed02e7e70e3f2abf79fb9ca6"},"res/import/77/779daed3-e262-4736-bd72-bbd45ab1197b.json":{size:196,md5:"7697131910035f29326e932c7b632170"},"res/import/78/788a4f54-55ed-473b-bd11-1600065e9bc9.json":{size:175,md5:"f1776fbfec322b3298f8af7f22c5267c"},"res/import/78/78b77361-b92a-480c-af35-a5ec37818bf0.json":{size:761,md5:"d288f63222109a6b5bb5f561c14672a5"},"res/import/79/7962e6c4-7311-4b1a-8294-9ea60c7e3c0c.json":{size:181,md5:"eb202cdb4137c50abfd99e7501a84b3f"},"res/import/7a/7aa0a3ee-b889-4909-b318-ba9263428be0.json":{size:81862,md5:"e79546811c633c03242aa16cbf532640"},"res/import/7a/7afd064b-113f-480e-b793-8817d19f63c3.json":{size:126,md5:"cacde058b1d10074f9eaf98f378db4f5"},"res/import/7b/7b968efc-b842-4f51-bfd8-0043bdd07806.json":{size:1815,md5:"1a53e6a5dcf00e6e7cc159f6b3f1eb32"},"res/import/7b/7bc1ba53-1b56-4c33-bcf3-46638ab7dd2b.json":{size:85476,md5:"adf8524da63e2dbc712a42d1867e3c37"},"res/import/7c/7c24b57e-e819-4fc9-a8d2-b06cf61b782d.json":{size:6285,md5:"0f91ee991d9a0e73f339a6976661fa20"},"res/import/7e/7ecf5c83-a09e-464d-a28b-9ff76d0e3983.json":{size:302717,md5:"155fd94d9d396cb3c6b4dafb1cad31e0"},"res/import/7e/7ed6e56e-c8c4-48f8-86c9-d7c9ceae5f01.json":{size:1634,md5:"8c3023e3a01cb0ca6bfeee5feb5c7a09"},"res/import/80/80e728c1-c59c-4256-bee0-630e48ae9937.json":{size:18008,md5:"cf5a48bb5e146d32b14b91637ae2b92f"},"res/import/82/824969df-7b23-4b58-a0f3-99ea8b74fc1f.json":{size:197,md5:"5aff5f63aeea0f7799adb38c47ab6e30"},"res/import/82/82f00406-d3c9-4905-9998-2e1219da7f53.json":{size:187,md5:"d4270543616ba9a283a95b5f411d0058"},"res/import/83/8327f36b-efe9-4111-a034-7a8d77a467a8.json":{size:1771,md5:"147713e64b5794dbdc940c65319b664c"},"res/import/83/836e7118-412d-49bb-8132-7d2b14ecbd4f.json":{size:61,md5:"2b065ce33db9dcde5d822632648c33b1"},"res/import/84/8402b0e2-196c-4926-9b48-90eade128843.json":{size:62,md5:"44ab26f3b4fa605174d8b097ab194ab3"},"res/import/84/84041cfa-9535-4429-b670-2e546bc3c81b.json":{size:193,md5:"baa37e9ef04e5b83bd4eff40f919cbfb"},"res/import/84/8413721f-19e2-4793-b9e8-dabe43288817.json":{size:187,md5:"729801a91a527296cafb0d59706a0f79"},"res/import/84/84b414bd-aff4-4cb5-839a-032083cb66de.json":{size:7842,md5:"fdc1653d0c75b8a09b8ab2a31842c152"},"res/import/84/84d9c130-147a-47b8-ae42-b8b20e6e3ea6.json":{size:178,md5:"91463caa36832318796ccdb9ca7b38b9"},"res/import/85/851a688d-305d-4397-912c-730f8e3de4de.json":{size:191,md5:"308e48dc4001eee2354813027441130a"},"res/import/85/853e9579-7ce3-4860-9b6a-92025cdc3672.json":{size:186,md5:"459fad9165bfe44c61ee913b2452f1bd"},"res/import/86/8662f80e-11e6-4d80-b189-6edee8c9362c.json":{size:61,md5:"25b31ff747bbbb5bf659384c7cb31f64"},"res/import/86/867fd17a-4c65-4d8c-999b-9a52931d2946.json":{size:59,md5:"982f0c5b794e7e4a578c54cd40183906"},"res/import/88/8843dd06-22bd-4ace-bbd1-cdb4ac500d8a.json":{size:182,md5:"506ff960c73aecd72dd386e6553cb2e8"},"res/import/8a/8a305f96-6842-4e38-90a8-98c83229a9ae.json":{size:30707,md5:"46cc2c8030a3e67c9585cff48cbde9ed"},"res/import/8a/8ab025cb-15d4-4672-a2e5-b81f6212290c.json":{size:200,md5:"193f7cee82687c3e7849ec25c7772aea"},"res/import/8a/8ad8d1c4-dc08-4c13-8e3e-4f02b63fc361.json":{size:746,md5:"6ae18f24e26f0fde74e49946b94d12b3"},"res/import/8a/8af4adc3-7bfa-44c8-bc81-bc3bfd243f54.json":{size:2243,md5:"27d5d72343112c85ed7018693ce48f6d"},"res/import/8b/8b5e7fcf-5747-4b6c-a670-aa121dbf74c4.json":{size:187,md5:"aa730b9b6e3df9627a78170234598b51"},"res/import/8c/8c07fbb8-6904-403b-8791-965e219abaa6.json":{size:61,md5:"02898744d2910c2d7003bb63fb81af67"},"res/import/8c/8c9acb63-a9d1-4ded-b5f2-c009f5d10566.json":{size:174,md5:"cfec92538a4ed2af0b0d043280c30e08"},"res/import/8c/8cf05690-3c0b-48ec-a68d-bebebdda1196.json":{size:255,md5:"0a2464ccead110fc98e109482c8a2c2d"},"res/import/8c/8cf26977-84bf-47f0-bee6-56264dd1691d.json":{size:2136,md5:"9f71f8d9bfd088c84c3b38788f5d6621"},"res/import/8d/8d0ec020-7990-4355-9709-72049df0ab7a.json":{size:176,md5:"a377a497c01577677694ff4b2b008dc1"},"res/import/8e/8ed14950-5027-4662-86f0-51c1f42033b9.json":{size:2246,md5:"3a67ef938b547690d505ba138377fd84"},"res/import/8e/8edb3d9f-56b6-4973-9286-1a4594e845e0.json":{size:466,md5:"adfc867a0f7281833237403ab9dfb0ad"},"res/import/8e/8ee316bf-21c0-4cd1-9e3b-0f40f17c5d1d.json":{size:186,md5:"c10bccbcfc90b019e61529665224ef30"},"res/import/8f/8fa41338-1585-4e7e-8e11-bee836623183.json":{size:825,md5:"198bc45cbf8966be880031afa7704d6a"},"res/import/8f/8fd33837-50ea-47ae-a18d-19c1906a2b9a.json":{size:171,md5:"799639a6326a32a568ba3ad35c8d1c68"},"res/import/8f/8fd5a05c-158c-46b1-aebe-66875b866d35.json":{size:61,md5:"0a70cb7cd3dfd5b9c07d701dd95f2283"},"res/import/8f/8ffb07f4-44f6-4f83-ae94-37c17c3ca627.json":{size:61,md5:"25a9f3090db4b1320e24155fcbaa2ef8"},"res/import/91/9111f850-e529-43d9-8dcc-039626fb8ad0.json":{size:8248,md5:"613639f0d288788c10852bac7d0db9d2"},"res/import/91/9137ede8-3408-4ce0-93c1-a5ca1e4c353a.json":{size:4502,md5:"4506103c6a750ed84c43afd8c9277109"},"res/import/92/92f43d69-bab2-42da-a3c5-4761717df173.json":{size:7406,md5:"84021bf62d4a33208511b604e6ccfd12"},"res/import/93/93308b54-7e01-4dd9-8ef1-048426070592.json":{size:186,md5:"0413b9f8b5158b04d1c30fd399a4cec4"},"res/import/93/934287f8-83c7-48ec-a7f9-5bde0ac5d7fb.json":{size:186,md5:"71c19fa34df96e182062b0111a4dbbad"},"res/import/93/9372416b-c8ac-4089-9c0a-90532e10e606.json":{size:62,md5:"25bda78ffd342b9c126676816b4e915c"},"res/import/93/93c355da-4d73-41f2-8330-be0f069606cf.json":{size:449109,md5:"8321c7bd4aa3402cd11d54388d8dc117"},"res/import/94/9425fe7e-167c-4fb7-ad2d-365c37c9c373.json":{size:123670,md5:"d4368f6f8cf46bcc467c86f7cc903357"},"res/import/95/95a4263b-291a-4598-b1de-53d66719eafb.json":{size:655,md5:"1373ce675fe54068fada781f79d61edf"},"res/import/95/95cf43bc-ca0b-4706-a7ff-cc91de0b785c.json":{size:59,md5:"cbcd8422aba35f85f3b6e642313c1df3"},"res/import/95/95e622e4-85bf-4f2d-8a2f-dd1118277377.json":{size:198,md5:"bba413e3e41e9a320decfdda5f4074f5"},"res/import/96/9638979d-62b3-4e5b-adea-7ad706e66e65.json":{size:5395,md5:"a0197a0abcb1ba38b6fc528bd41772c1"},"res/import/96/966f7285-54fa-41d7-b4e5-a70f879f5a69.json":{size:178,md5:"d384b7d0aa880db7ed76422434979c96"},"res/import/97/973ce85a-44fe-4cbd-b8f6-af869647dbbc.json":{size:18174,md5:"07282c60f84032204efd0d84f97dfa16"},"res/import/97/97e08c13-09b8-419b-a754-734dd158bae9.json":{size:17421,md5:"af3a4c5806f58823b631764f3d7afdbb"},"res/import/98/98095230-7b7e-42ca-9b0f-56ffaac50489.json":{size:176,md5:"b3e755fcafc6ee26da7243687ad78cc8"},"res/import/99/991155eb-9a4e-41af-8368-1c1ef7b57b7a.json":{size:191,md5:"e302bccb04eb2d8159336255db831427"},"res/import/9a/9a4e192b-d09a-4910-b15a-70956af8ea7f.json":{size:192,md5:"2da3d270ad10887f5f9dfd8ff966cbe5"},"res/import/9b/9b74ee79-c32c-4267-a114-3e7a7bbbc62f.json":{size:3537,md5:"7daa867162e69b03c13d55e6518d7554"},"res/import/9b/9bcc4c43-4ca7-4a87-820f-26532d7a2d99.json":{size:187,md5:"40d8b379508520e97d4b66ab4a8ae6e1"},"res/import/9c/9c128dd8-60a2-4ba9-ba37-5a988f05ae81.json":{size:200,md5:"659d7c9b9685fab37dc75eef4be63f12"},"res/import/9c/9cbb7493-3f49-4484-aaa4-3d5385ea2dea.json":{size:47660,md5:"c769711bb96e1c7a2063843fe222b776"},"res/import/9d/9d143aa2-e21b-46b6-976d-b6f38b0f3855.json":{size:199,md5:"55a36f943cd5b369bae04d67884e9cfc"},"res/import/9d/9d5cf10c-ba9e-4f79-9317-ad4903909b92.json":{size:195,md5:"132d6d5f968a393bc619e5d82fabed95"},"res/import/9d/9d652e47-2d4a-4b55-b263-d623755724d8.json":{size:5817,md5:"dcbd2865a8c382704f7ab0f16747b61c"},"res/import/9d/9de5b30f-a3c5-4881-bdeb-d88e0c6d0803.json":{size:61,md5:"ed8cb257556b9238e3d38680ca99a386"},"res/import/9e/9ed44de3-060a-4c6b-bdbd-48ec21e53540.json":{size:1066,md5:"4b00fc5ba935df182751e542e4902073"},"res/import/9f/9f5a3d16-e3d8-44e4-8ef5-1e4a06f4964d.json":{size:28209,md5:"9baca54f9bad11d2e6d5b55e2fcbd950"},"res/import/9f/9fc3566c-edf5-4e36-bbfd-d93005fac63b.json":{size:178,md5:"6abd0757b60ece39c00368b06ab78a60"},"res/import/a0/a08660d3-ac7f-4a34-89f0-301c957a028d.json":{size:187,md5:"ee99cb46ed8cd1e9f50cb0c3f6c71cb7"},"res/import/a1/a123cae6-a664-47d6-af36-d3d136f12f98.json":{size:323,md5:"450986e0253e6d7869968015b19978eb"},"res/import/a2/a2bf74be-bfad-4a68-be07-ded8a249f703.json":{size:556,md5:"0fb5478279f9e16ea33d4fcedb3d62cf"},"res/import/a3/a31787c1-ce95-480d-9070-64cfa2b4818b.json":{size:3110,md5:"8709917ecd61e545f489315ef9f7586d"},"res/import/a3/a3fc63ff-8eb6-4776-93ef-fbfc0785b11c.json":{size:178,md5:"d0829b58302a03f74f846c2af213e9c2"},"res/import/a4/a4c17e87-65b2-4ab3-afd6-75497dd80ff2.json":{size:82074,md5:"660cac8496ad6b058e644fac9516d4ed"},"res/import/a5/a5024776-d62b-4efb-9d33-690674dea3cb.json":{size:186,md5:"9e1ed19dbf3c5700c427bd99fce4a2af"},"res/import/a5/a514b4c1-f877-4f1b-b618-d724f67e4cbc.json":{size:193,md5:"9ee0dea1f8490f98f4de7b661a40d329"},"res/import/a5/a5e2b470-e34f-46fd-bb53-0e2c34b90f98.json":{size:509,md5:"00d90f966c11158dc4f4b03c904dd118"},"res/import/a6/a6263896-0992-4792-934e-74f16b67fa1b.json":{size:1989,md5:"681233bd9121fa231e2b547282ea6e9a"},"res/import/a7/a70e8139-f81b-4951-94b5-3904cbbec950.json":{size:61,md5:"bb851e28104eaf54e559df3be2343cbd"},"res/import/a8/a86e8864-5390-443f-b41b-b38e9d584c43.json":{size:237,md5:"42b8cee5d7891aae2e1d1cec5b322ee1"},"res/import/aa/aa6e1578-e97b-4347-9177-d250b764a3a6.json":{size:186,md5:"2615e8a11d9272428657127fb5e7a783"},"res/import/aa/aaabb3e9-c0cd-4518-a4ac-9973bdb1e0a6.json":{size:717,md5:"7597ba3b54141a63ac5c063d45fb56d7"},"res/import/ab/abc2cb62-7852-4525-a90d-d474487b88f2.json":{size:56369,md5:"2b55f7dd7bbbbba6d8da418674b2a2ab"},"res/import/ac/ac2dd2a5-51ea-429c-aff4-7e408845e767.json":{size:81596,md5:"eda16e8eeec623dac2477bf762a47419"},"res/import/ac/acf4a9c0-4a75-400c-9d12-071a35ef948a.json":{size:183,md5:"741bc013cd255ac8eaeaefedca7bb8e1"},"res/import/ad/ad0a50e3-65f3-4168-92ee-89d3550bb370.json":{size:178,md5:"46149234eeade2ff49d7e1ada9c4ec17"},"res/import/ad/ad864363-c454-4753-9168-9ee3551aefce.json":{size:856,md5:"46e1df38dfebebaf77fb5a57c1c74cdd"},"res/import/ad/ad8c6398-422f-4bfe-954d-088cfdc981c6.json":{size:176,md5:"a5ac49bc10e764db68e91578aa74b531"},"res/import/ad/adcf6803-f7ab-4987-9583-11f8dde207fe.json":{size:796,md5:"bf4554af80c36683f751b65138da437f"},"res/import/af/af3f77f9-89e9-49dd-93d4-09710587a599.json":{size:177,md5:"46d7e00ffdb69158c789fa5e78a0bf86"},"res/import/af/afd240d9-c5e8-4c78-a1cb-f91d08029547.json":{size:171,md5:"9040c7bdaffaa18ce3bc65097389c57e"},"res/import/b0/b01e9f03-ae7e-4898-a45c-db97287b605f.json":{size:1294,md5:"3095b4b772e89d99214f7a3ffa93aecb"},"res/import/b1/b1119ce1-0ba2-4997-8a5e-26077968a855.json":{size:186,md5:"93f3002607534b8e2cf02421cc922539"},"res/import/b1/b11a92cd-54ca-4206-9ba3-4ebe495831f2.json":{size:870,md5:"d2de22b3de12cee5089f215fb441384e"},"res/import/b2/b227bb91-6a8d-4a76-b39c-2bff70022990.json":{size:186,md5:"a005996d2528dd6cb8cd4b2ec2e62478"},"res/import/b2/b2843a1a-9eb3-4b6c-a211-da25d45c3e55.json":{size:174,md5:"c17c3e3216fc78da070ef666fc35ba29"},"res/import/b2/b2b0ab9b-3324-447b-bc96-b056b840ce96.json":{size:38645,md5:"62dce9096b25ac0ed2a3313c96b2bd01"},"res/import/b2/b2c4f953-7d1e-4c8a-b019-49263c92fdd4.json":{size:193,md5:"7abcd718582e0f11d1c74b12c46205c1"},"res/import/b3/b304b33c-26b9-4c68-a1a8-3f9275e37981.json":{size:176,md5:"52f8aec099dfd054a166b689f7a79bbe"},"res/import/b3/b33435ce-3059-4f3f-adcc-e3233f56a189.json":{size:6804,md5:"87fc79220f91d7f319f6a5cc7c428009"},"res/import/b4/b43cf052-bdea-49b3-9118-cdcc05774f00.json":{size:535,md5:"cb6ab953be36fe5fdcc824b50a93f350"},"res/import/b4/b48a6f19-47cf-4cd0-a61f-6ebc7b01691e.json":{size:991,md5:"2ac35331cd5597aeba3920172179550d"},"res/import/b4/b4dafff0-5ef3-4d51-a389-cfb356b7c992.json":{size:172,md5:"f1c9a18d0ebb7a47e74cc1b9bbb98a52"},"res/import/b5/b526e091-b9ee-4f8e-b524-1b14d6505ad2.json":{size:2123,md5:"95427bf1f3800e27dee03cdeca81a832"},"res/import/b5/b53614db-cf9e-4a65-9412-1bcb33fe33b3.json":{size:15513,md5:"217b76f2f4bf211c8505c5a69f18b852"},"res/import/b5/b59b63f3-88aa-4f08-87d2-201966c6bf3f.json":{size:79571,md5:"87872f4e6a015d630dd841b084eab582"},"res/import/b6/b6bdf100-aeb0-4b8c-90bb-ad1882057c91.json":{size:61,md5:"816ca4139633e8cb462a1ebd14bb473d"},"res/import/b7/b73688d6-4455-41fd-8106-24947ca965dc.json":{size:58,md5:"44aa9be4fa3be4e3016e4b261159bc12"},"res/import/bb/bb145c21-ea06-42c6-88c7-9a6c2fbc93cb.json":{size:185,md5:"7486cc1a861bc48ba298ce3794aafd88"},"res/import/bb/bb604788-c0af-4f00-bd7a-61680dcbcea3.json":{size:155,md5:"0bb4b550657840915c6f80f82f4536aa"},"res/import/bb/bb74d0fd-a699-412d-8bcb-623def324345.json":{size:3768,md5:"62f964d2b5d198813d6121d2c8607ac9"},"res/import/bd/bd427c89-4ba7-45c7-8b85-6b0a3f21a274.json":{size:176,md5:"54d123aa036977660cbbf504b8ac17d7"},"res/import/bd/bdf615c4-60aa-400d-ac21-db189b0af48c.json":{size:184,md5:"84ceea6d22b9c4188abcad64d9b40145"},"res/import/c0/c0040c95-c57f-49cd-9cbc-12316b73d0d4.json":{size:831,md5:"b0dbd4e5c5fe0c626ffbc059f412c2c2"},"res/import/c0/c04556bb-2473-487b-9d41-4f9ac77be79c.json":{size:186,md5:"45de7622d8900d647c3bda992cfd3edb"},"res/import/c0/c0d32ea8-7faf-4096-b048-dc13b15db43c.json":{size:2502,md5:"092db88bf4e5216767f0b08fef7b7178"},"res/import/c1/c1e8664a-0fdb-460e-9106-c7c40ceda781.json":{size:174,md5:"3c817a6883361a06abb67031595780f0"},"res/import/c2/c223580e-259f-4b96-bd7c-83506748180b.json":{size:18441,md5:"dd04b816a7b5d9887ef0a8681c98e2d1"},"res/import/c2/c27a0344-0920-4574-968b-2c8fa6d7e42f.json":{size:179,md5:"6df20aecc246719e585dd2800b730261"},"res/import/c3/c327d6b3-70e6-45f3-bbcd-352b6991c58c.json":{size:186,md5:"d383dca7206df467930df9466ec6a621"},"res/import/c3/c33803b9-682c-4055-a7b2-87a4f24acef5.json":{size:346,md5:"9a754e85f2dce883aab6673c2b160cc0"},"res/import/c3/c358200c-7ae5-4d46-ad05-f85706213a3c.json":{size:61,md5:"a370847c62054015793a42ac216a5862"},"res/import/c4/c4480a0a-6ac5-443f-8b40-361a14257fc8.json":{size:160,md5:"ee700864c601206ff8bcf7de3ee962bd"},"res/import/c4/c4bcd51c-aeca-470e-b4de-61a5cd38163b.json":{size:287,md5:"1322e6f8a0e0863b4d55172d7f4dc8bd"},"res/import/c5/c520ae6d-5a1c-4a8e-a887-2c075a959c29.json":{size:186,md5:"24ce7b467fbe332c19ad78c4f325cda7"},"res/import/c5/c585c316-692c-42c7-87cb-a5d1ade05392.json":{size:186,md5:"3f5f4c172c2a2580bb3d145243dcd032"},"res/import/c6/c6037927-12ec-4e61-b062-ae9778020cc9.json":{size:198,md5:"98804a0fac3148ffdf9e45481c33e1ae"},"res/import/c6/c620f2c9-2a54-4c01-baa0-2ff5f4545215.json":{size:357,md5:"7b6ca097b6fef116c698f9753e0d46a7"},"res/import/c6/c68f3533-d159-4ea2-94df-033c83d23281.json":{size:196,md5:"d33aabb4cf16e5ef429de2e6631eff73"},"res/import/c7/c7b7f83b-ea4b-4db2-8361-d84836594330.json":{size:2391,md5:"c4119704281262ede4babd2136ec6c8e"},"res/import/c9/c95fb92b-d55f-4f3f-bd51-e97d92201ea3.json":{size:187,md5:"a3eb841052a8883118c8deadf4a86283"},"res/import/c9/c97e1192-2f8f-4ee0-8d45-17f502b576a9.json":{size:1141,md5:"1d16925c43a618f3ce5b833b3ee5c2df"},"res/import/ca/ca13d677-bc34-4e6b-8ad5-d0c6f6d37bae.json":{size:184,md5:"cfce66a7bcb97fd4b29283709f5ab9d2"},"res/import/ca/ca420819-f60b-4f60-8bdf-a29bacbe5237.json":{size:187,md5:"4a6a5647d791161758e36d6f626338b9"},"res/import/cb/cb0cf3ee-c571-44f5-a8da-54112c0aab02.json":{size:6213,md5:"4bddde62b8b407699e8c199c15dd1634"},"res/import/cb/cb27b66e-4cad-46c5-b85b-e33e67ca98e4.json":{size:186,md5:"d2fa86a2bb9a023de3f05050660a8220"},"res/import/cc/cc7b7d43-b1bd-4177-805b-eaf4ce3e79f0.json":{size:41252,md5:"bf6766ec745ac55a6ead7087e9cfbc20"},"res/import/cc/ccaece38-ecf8-4db3-be7a-c571c246bc6c.json":{size:186,md5:"fea13b4c2cf1c530b35235d4a766c1f4"},"res/import/cd/cd372c0f-71e1-410c-82af-b0cf16aac142.json":{size:504,md5:"d65fb8fd8d2b5fa4f869fffbbfaa4865"},"res/import/cd/cdc37dde-2e4d-4010-81e0-c624a900af2b.json":{size:204,md5:"e92374a621da313bb627e8ff7fdad86b"},"res/import/cf/cf7e0bb8-a81c-44a9-ad79-d28d43991032.json":{size:131,md5:"fa6d38214f75812c8e2d20cbca1d5f02"},"res/import/cf/cfebf4e2-1c06-4360-817e-880259dd3e8b.json":{size:59,md5:"de57171255d1b19d411b8a24cb20ce6c"},"res/import/d0/d012d6b9-64ef-4db8-86db-bd64d6776070.json":{size:1827,md5:"291401a2aed35962cffe53fe148561e1"},"res/import/d0/d07bf81d-1f23-494e-9ec7-3a9e23d331f1.json":{size:186,md5:"3ca860801eecae34db289d12fcd064bf"},"res/import/d0/d0c80b5d-d212-4e75-8581-23ec133eb3a4.json":{size:3527,md5:"916fdacc5ef1168611f81649fb525f1c"},"res/import/d1/d1ff130f-323b-448d-a350-6ba92822d3cd.json":{size:757,md5:"72b7b6929132fd6868da55d2e3e2799d"},"res/import/d2/d225c874-89f5-44f0-8663-fa7b76c55485.json":{size:61,md5:"5e06f1c207aae73284928deda806d098"},"res/import/d2/d28a113e-45d0-4aa5-ae73-26cbe29c2772.json":{size:178,md5:"c0cef14f4fac159350feb145c508feb0"},"res/import/d3/d34f181f-2dc5-44f3-9677-6fd0c7c9927c.json":{size:186,md5:"24a664c13eb1a8ce936620d1815dd9b8"},"res/import/d3/d356ec73-109a-4ce5-a0d8-205e97279f0e.json":{size:475,md5:"ec068c5ce089cf485252e22e771b484c"},"res/import/d3/d357023e-0a44-4df2-85e6-0c98a3e567a9.json":{size:934,md5:"337dd2b4568d442db4bf280e4f60ffae"},"res/import/d3/d3bd0200-ef02-4d2a-87a0-32b315194038.json":{size:1865,md5:"23d9eff7aa753796de2e89109127f00e"},"res/import/d3/d3ffb3bc-6b21-40a0-b2f5-498d0f23b907.json":{size:187,md5:"f44273d23ab5b1c16f9083b3637e219e"},"res/import/d5/d5b841fa-8032-4a48-9142-6c5499cf4667.json":{size:176,md5:"1f1e2d2b2ae007e25ee2a30614f50c1c"},"res/import/d6/d6356e56-f947-4af7-8903-279d2c7e45f0.json":{size:121248,md5:"4af9fc1f649c0a6713e93d2689ddf72d"},"res/import/d7/d7195546-513f-4986-80fb-db90aa506bc5.json":{size:173,md5:"c1ed7db8419bb8c4ef409ce0d2421fea"},"res/import/d7/d7676387-811f-4c8e-887c-2330eb5b620b.json":{size:1435,md5:"9325fef49553d9cf5fcb2c3fb003c4b5"},"res/import/d8/d8d2ba13-b341-4b99-820d-27fb5f752af4.json":{size:194,md5:"61c0f6d660b3e42444462d5ed3931a73"},"res/import/d9/d94dcdf2-2836-47c2-9274-5102e2f3f75f.json":{size:190,md5:"2bc4d40a7a7741b24d6c626c963cd4e5"},"res/import/dc/dcd8ae50-163a-42b7-8ca1-4b05a97e8f8a.json":{size:172,md5:"e1773ba97cec602667262dc86d617bab"},"res/import/dd/dd3d8f78-9b79-4ca7-9bf7-7a09f7b34108.json":{size:197,md5:"cf0e82f2066eb08925fd400602efa08b"},"res/import/dd/ddeeff4c-ff8d-458d-8ef1-4e42fed30cde.json":{size:190,md5:"f6fc1136e93ca5f36ddfc07a22698b75"},"res/import/de/de12a430-842a-4f1e-b560-504c5017a49b.json":{size:11958,md5:"8d0f5008437ba3248a30c7f97b501669"},"res/import/df/dfe12084-1db2-46b8-b8af-fba335dd3f83.json":{size:177,md5:"a74a273e1e49ee9b5367fa2006b4818b"},"res/import/e0/e007f66f-0410-43a0-806c-999d53290323.json":{size:71673,md5:"326a57db04a6cac19a7524b686355e6c"},"res/import/e0/e0268105-8cc4-4eca-94e5-8212033d823e.json":{size:174,md5:"f2e71c90c46748982692b8341dd28ab6"},"res/import/e0/e04af2f9-b97a-4f79-ab49-3a1029fb08ae.json":{size:703,md5:"643b996e9edd92ec6bd5901be9a1460e"},"res/import/e2/e245adde-56c9-4f6d-85e5-5d958e1fb94c.json":{size:6167,md5:"d0b35ae5052c3cb3ab86f60b8c6c683b"},"res/import/e2/e272805d-f009-4736-b5ff-3873807fc1ec.json":{size:1435,md5:"ee1fe65e7e5397326743e76c47badab5"},"res/import/e3/e38534e8-1e8c-410e-ae8a-1751e8802170.json":{size:204,md5:"c2568c7d5231cc3edb8a24ccc80c7101"},"res/import/e3/e3b8fa56-7587-4805-aac6-0656ae680fb3.json":{size:293,md5:"6539f52f91a9af8125f96d13b4dc8ab1"},"res/import/e4/e4b858c1-d3d7-489d-938a-03d16206444a.json":{size:346074,md5:"fab58c954a1f98c9b3596c0036828ae5"},"res/import/e4/e4bad8c2-577c-43e0-a8f8-89122732f7ef.json":{size:172,md5:"a626937a95d8899e54196bf2efa74e0c"},"res/import/e5/e51cfc47-ab92-4e12-b285-f21d4e5084f0.json":{size:186,md5:"99d9770168332c95bf681472f5c3c70d"},"res/import/e5/e53a3c4a-5893-4e0e-b61d-ffcf0687563f.json":{size:192,md5:"5aeca582cdfa38543083b8c634ab5dd8"},"res/import/e5/e589dda3-a30c-45ea-b8b4-44888f111181.json":{size:192,md5:"1a1840cc5fbcca3fcf08c8a503760567"},"res/import/e5/e596f5fc-9eb3-432d-bf32-6d4b9ff297e3.json":{size:1358,md5:"1db263dd9aad0b4ad460e2718a131793"},"res/import/e5/e59b6148-4fb2-438c-9f78-0d071fbbca8d.json":{size:190,md5:"41de6640e74f364cb281e62dd1a73b8f"},"res/import/e5/e5d4dc07-fc31-4949-9099-a4525b0ccd0d.json":{size:1360,md5:"db1c4123ec40f72c5752f3d3103ba990"},"res/import/e8/e83d6de9-05c3-4fac-9b6a-f98b10c5c7c3.json":{size:174,md5:"7073ab04620ece51a7b0a420cfad02f9"},"res/import/e8/e8de23b8-4f97-4dc7-bc57-248ea52e2de4.json":{size:172,md5:"8a3850cac2a50b904b694e86e61e798b"},"res/import/e9/e939041a-c568-457a-a1e0-95961aacf96c.json":{size:179,md5:"e6800228c122d9e58e83c42adb2814b7"},"res/import/e9/e962b840-debe-4d58-9e92-2d2688311f68.json":{size:192,md5:"6ade6f434a616d1a7c38b0b126c6edff"},"res/import/e9/e9682cd1-a19c-4fcb-ad8c-cf1783b805e6.json":{size:7376,md5:"813faa394bc41dfa93ec50f7ab2aac85"},"res/import/e9/e9734e1f-fd21-425c-b4bf-994fbca20572.json":{size:202,md5:"d2e2f98acf9b3586a3ebdba96d0b5d8a"},"res/import/eb/eb74d9df-da38-47fe-911f-dacffeb6b45a.json":{size:118,md5:"9609a73548777fe94ffe52d0bace9d48"},"res/import/eb/eb96c646-4cc5-41cd-9f63-9b8e25cf1f0f.json":{size:61,md5:"0940fcda9ed0d6a90b301f8866292720"},"res/import/eb/ebc6bfde-07eb-4aab-9e20-ad0d2a720397.json":{size:61,md5:"6b0a86560b957bfe6315d84058e6d50f"},"res/import/ec/eca5d2f2-8ef6-41c2-bbe6-f9c79d09c432.json":{size:163,md5:"7f5866bbb3088de8b6680e4e95b464b7"},"res/import/ed/ed4b9768-3da0-45c4-a6db-63a361e1b967.json":{size:196,md5:"4f791b770d8f258f7fb97e64f9707066"},"res/import/ee/ee9df2cd-dc1c-4fa7-9ef6-b253eee81746.json":{size:173,md5:"2f18102363d4bcbf941a660e312b9c3b"},"res/import/ee/eec795f7-f6a2-42e1-99f6-2762f663b508.json":{size:157,md5:"d2b337a92478ce1798d4f927c3f02443"},"res/import/f0/f0a3cc44-a827-4647-911c-ad4a5d28e054.json":{size:69850,md5:"6626c895d75b266bfc710e9985bb32c0"},"res/import/f0/f0af4d50-d433-4f95-a225-a7808037c066.json":{size:8767,md5:"e454bf400a68bd2da5b436732535a722"},"res/import/f0/f0d95264-9da9-433d-9466-95d312d9e4ae.json":{size:1140545,md5:"c3688e61b3ddc51988137903b7d5b442"},"res/import/f1/f13d0b24-54a0-46f9-ac4a-bd6f89d76f94.json":{size:189,md5:"bdc5c22e13bf812c474a46667e62e157"},"res/import/f1/f163bc71-eeeb-4871-be7d-85317c44a2eb.json":{size:4678,md5:"4f4d44a6a17a42dcf5a1e4243c132fb5"},"res/import/f1/f1c32931-7e55-46ca-8819-84256d0e5433.json":{size:195,md5:"17327caaf8396bc20dba224a80f11303"},"res/import/f2/f2651803-80c3-4665-bd81-2ad946a12dec.json":{size:221,md5:"d0a979676c26cc1be66cb727ec6c7c10"},"res/import/f3/f32c8c60-93a1-4196-9c61-826d703d83ca.json":{size:459,md5:"c441b6e8d3c325478b81f4732052ff3b"},"res/import/f4/f48020f3-0407-4fcb-b737-4689eb0d0efa.json":{size:174,md5:"fe7d90a8ef22b87eb308ed622b8ed991"},"res/import/f4/f4b87a7f-c64a-491d-a990-a1b3d60be0f3.json":{size:57,md5:"9127c1e1ac397b1773b770426d8d9ce3"},"res/import/f5/f55b7edd-a768-4d6f-9f10-5a5592992a00.json":{size:6300,md5:"ca566acc54a47c6143b1cd03dd6b5c65"},"res/import/f6/f6318041-c378-4563-aa61-c8e52928af9b.json":{size:1483,md5:"19eb3c05873776be4b2eb0135f542795"},"res/import/f6/f65b2ab7-13ff-4fda-af56-29aacde7e99a.json":{size:176,md5:"08dcb98386690dde681f2799c0041598"},"res/import/f7/f77af995-e172-4584-bd0a-fae317588873.json":{size:4814,md5:"922b022085aa1f58cab6f0098c2587c6"},"res/import/f7/f77e3f23-c684-490a-bc02-f626c318ecc7.json":{size:177,md5:"a8000ec79897da392fa1150e847cc807"},"res/import/f7/f7937bbc-b8d9-440f-b8e9-b4338d5532a7.json":{size:174,md5:"b4805b2878797e022e080d6289606e5c"},"res/import/f9/f911537d-8bb0-48b0-af63-a80c704cca16.json":{size:30129,md5:"34d1af010523d9597683c75502ac8e3a"},"res/import/f9/f9fb0abb-0cfc-4a93-af53-cb8067032851.json":{size:174,md5:"bb1f76fe44a72b2ba881ba0a2184a2a7"},"res/import/fb/fb8e3884-a688-409d-b113-f7776f398aba.json":{size:3516,md5:"c590b574685a90410e1920e210acf199"},"res/import/fc/fc3b5e30-ade7-4cce-b9ba-94c50188a438.json":{size:175,md5:"b39226f4eadb7886a3878800f539c649"},"res/import/fe/fee8960a-9d20-4c8c-a95a-b01037efb778.json":{size:192,md5:"60ab460f4e3672aadd60393cafea2b17"},"res/raw-assets/00/0054b18b-3d33-4e59-8b36-666fc92cdde2.png":{size:6994,md5:"8e16805ecb2c56dc5230539b7e5772df"},"res/raw-assets/00/00a4e329-50ee-4092-acf6-ec7135fd8d94.png":{size:14589,md5:"3e2aec0471530d6cf19125e1440340b0"},"res/raw-assets/00/00bdaae6-d095-46fc-92d0-3620a2fb2700.png":{size:30565,md5:"c29eb3b2023bf7cbcb0708ced8a61df8"},"res/raw-assets/01/011e4ca9-6678-48e4-a24d-4c1f9b322ff6.png":{size:1620,md5:"096a67b21d412c89308099c73c25050d"},"res/raw-assets/01/0191116b-1fa5-48f6-8f8e-038c2bbbd353.png":{size:2504,md5:"2bb9eef7e58e22556a2ed7b333e1f0ee"},"res/raw-assets/01/01b9b116-4711-4226-bc26-a29f4f3a8564.png":{size:2955,md5:"2d66ed867b004a4a2cd4605467eebd08"},"res/raw-assets/01/01c00b17-ab9c-4603-99b5-57749f6f7fba.png":{size:1839,md5:"c15d9314e6db1331d0a5a20f958466ae"},"res/raw-assets/02/0268dd95-4fcd-4bf4-bb3f-36bde69f3270.png":{size:2054,md5:"6f746f1b39672c77df09c11cd7e0d6a7"},"res/raw-assets/02/0275e94c-56a7-410f-bd1a-fc7483f7d14a.png":{size:82,md5:"cea68f0d7cba38440224f6f74531e2d8"},"res/raw-assets/02/02a4a4fb-9b70-4b02-b6c1-37c4357957f9.png":{size:26593,md5:"1ab4f841dea2bd51ed17bf44e90bd191"},"res/raw-assets/03/030b6a75-6100-4131-a9d4-cd0d1200a99a.png":{size:2376,md5:"42e76aead312b1c3141b84f62d928e82"},"res/raw-assets/03/03b81ca5-1657-408c-be74-18e298767b30.png":{size:7570,md5:"0c74c4b692eefb163580fc6917390686"},"res/raw-assets/03/03e06d00-b162-44ca-adf9-8b6af8a87c94.png":{size:1782,md5:"b940a91a69ece303f438618605300b7e"},"res/raw-assets/04/04612fbd-ab40-44b2-8b33-e1eee8d5313e.png":{size:539,md5:"ea70e1b47eb6ea5e388626a1c0804879"},"res/raw-assets/05/053a8500-5532-4677-950a-9c1346ab4558.png":{size:873,md5:"a43833a37819a6ef03a378543092d71f"},"res/raw-assets/05/05423696-af8b-444d-9803-8f308f2fea81.png":{size:4793,md5:"16a878974b271a9f367f843b52cf54d1"},"res/raw-assets/05/05520e42-2f9f-4f51-8547-b52baefa2367.png":{size:1406,md5:"818a8bdbbbc67149afd405a5f3973b7d"},"res/raw-assets/05/0561cee0-f5b7-4111-89e0-1dc17c86c8c3.png":{size:2070,md5:"7af232f20867577e27f4c71fb01c01c7"},"res/raw-assets/05/056d32fc-73d1-4b79-b549-73866a62f177.png":{size:586,md5:"dd8f27b9feadc994bcc3540f494b77fb"},"res/raw-assets/05/05bb8395-c64c-426a-81ab-d1d09a90e464.png":{size:1360,md5:"7a70151878e532c774553cee55f7c534"},"res/raw-assets/05/05bbf088-96df-4326-ae1e-2e3e06fdb717.png":{size:593,md5:"7f6fbd0f1a5144e00ae00ab3cc6c3756"},"res/raw-assets/05/05d96ff1-22e6-4b8b-8b10-0fd3854174d6.png":{size:1194,md5:"3786a05d77840b1a97bed046b4c513ca"},"res/raw-assets/05/05f415f8-3874-4c5a-aead-e804bf362e4f.png":{size:6331,md5:"80a8756bc6768416d2cafddc00094bb1"},"res/raw-assets/06/060ac2a9-ce59-4c78-9d8c-05d62c7e33e5.png":{size:12751,md5:"fd60dc469f51725fae42c8a55aac5976"},"res/raw-assets/06/066b9e5a-0d1e-458d-8f4c-b065f0734a6f.png":{size:6549,md5:"2550511280785416f4606fef9eb49f44"},"res/raw-assets/06/0675b865-a9f4-4367-9a6c-666abb36dbfb.png":{size:7336,md5:"da7a53ad728402443ded691628858078"},"res/raw-assets/06/069b8b59-3583-4d98-86b7-1bda80a3ea73.png":{size:2562,md5:"0019dc32f6aec8de98fd6b94bca351d9"},"res/raw-assets/06/06bef750-fa0b-4e48-90f3-a628182bb365.png":{size:6403,md5:"d755204d197d496364bfba1bdc89b327"},"res/raw-assets/06/06e65cb3-9a88-41a3-bed1-aea2da812847.png":{size:1483,md5:"eb2f8674a64db769d4bd1cbde3a52e69"},"res/raw-assets/06/06f69e5d-e809-49d7-9666-94b773cabed1.png":{size:569,md5:"a6e747bd35b8209d7a167c7d48a34463"},"res/raw-assets/06/06f7ab33-fb48-4996-a89b-d824bca69f62.png":{size:11278,md5:"9d2795f3668118efa0e2212414acd4c2"},"res/raw-assets/07/075792a0-721f-410e-ae11-631d5d8619dc.png":{size:2248,md5:"fb4ac33bca481ab6318e7a28ea9c9fde"},"res/raw-assets/07/077a45a7-e022-4df2-b440-6b5b1a57b9a9.png":{size:866,md5:"c6e4fd49cc608b3f15e25fe32331086f"},"res/raw-assets/07/078ce6e0-b50d-4dde-bb6a-4b07bd326560.png":{size:1222,md5:"0dd5009492b29d9bfa6c40c7d78cde2b"},"res/raw-assets/07/078eb197-dcce-4be5-ab57-e34bedf7b811.png":{size:9519,md5:"c0b46a6b099f75cde02aa85b36d6065f"},"res/raw-assets/07/07a557eb-3979-4c97-a643-2eb06eacf66a.png":{size:3512,md5:"6898318c0af2d2072115c40855f3f6bf"},"res/raw-assets/08/081a5b22-7e22-4281-b91c-8a2a7acad038.png":{size:1271,md5:"89be027a3100bbf72834b21ea28ccc82"},"res/raw-assets/08/0839cd00-aa33-495c-b48b-5ecb7c65c3f5.png":{size:2916,md5:"b5594ec9db5c92ac2467565464e48462"},"res/raw-assets/08/084e22a6-3693-4827-975f-c68777f6f133.png":{size:2682,md5:"0aedf17a4595b9be9e70f4b2e4fb97d0"},"res/raw-assets/08/085df8b4-bd47-40de-9fc3-51eb3e069c88.png":{size:731,md5:"5532729f31944879bf62be875cc0309d"},"res/raw-assets/08/08817782-809b-4275-b4e2-995aaf60fc82.png":{size:662,md5:"c9f155525e505d4e7b3516c33f6d51b0"},"res/raw-assets/08/08d31c33-e27b-4519-a5b8-94093f655af1.png":{size:1468,md5:"1ddacb261b47a4eeffdec39441ca5840"},"res/raw-assets/09/096966e9-bd4b-4efb-b480-e9c78a8a19ee.png":{size:848,md5:"1796d1461cb5a7bf2db284649991b3dd"},"res/raw-assets/09/099f3b8d-558c-42d5-9329-aaec1ec10f79.png":{size:6118,md5:"6efb0f6e36a3a09c322a22ef229a9cac"},"res/raw-assets/09/09bbd20d-6751-4342-97e4-1a9aba695ccb.png":{size:1620,md5:"29029437fa58507968a86d439678af27"},"res/raw-assets/09/09c77553-3b51-49f6-9baa-2f6475cd4fa6.png":{size:2016,md5:"90c2856e653efe4c4ba29d8ccdce45cb"},"res/raw-assets/09/09cf9efa-5b52-448f-83aa-2d35446b4097.png":{size:7810,md5:"5b5b90025af4f86c4d6fce277a24f0d1"},"res/raw-assets/09/09da0ed9-8d29-4b1a-bd81-5905a33e2e70.png":{size:2895,md5:"5a9702fbd0f5f30c41c556b6a6c07875"},"res/raw-assets/09/09fa9b96-948a-4e4d-b54d-277472a12857.png":{size:5112,md5:"c5022f7402cb9d58991d845bfa0fcf57"},"res/raw-assets/0a/0a0f3a48-c312-457a-acb4-26f0f918d6f6.png":{size:6341,md5:"e20b3a26f1a52eaf44e4966a69c63c44"},"res/raw-assets/0a/0a27306d-279b-4fb6-a3dc-4b694405f486.png":{size:24259,md5:"f7fe00276a93c21bd207bbabf1791475"},"res/raw-assets/0a/0a43e7dd-7a9d-4f07-b177-5b2a22ed57c1.png":{size:2034,md5:"c73fa7cc49c2df134b9841981a705a79"},"res/raw-assets/0a/0a6dbc6e-eb47-4117-bd07-63f173dd0a6f.png":{size:1884,md5:"6fd3366277a73b98be0daaa5633bf681"},"res/raw-assets/0a/0ab6fe81-5bbb-4b4c-a250-1979774b23ee.png":{size:2091,md5:"8fd1f424ad2f7da63ec98ebc864a0ed2"},"res/raw-assets/0a/0ac8037f-090e-4681-90ae-7fe4d50b2f8b.png":{size:6853,md5:"ff0f9dd90e53091d0c6002cc9435643d"},"res/raw-assets/0a/0ae9aac9-5407-4641-b876-77d378c0b2d5.png":{size:653,md5:"898cf222963e7cff970af8e409959f1d"},"res/raw-assets/0b/0b68fe16-d0cf-4ee6-a14c-702cd43a9a48.png":{size:4494,md5:"c36c32ba5b59eb13acae5b68d6d0f896"},"res/raw-assets/0b/0b8fc80d-ad5c-4075-87a8-61dc84e22a32.png":{size:1657,md5:"0edc45e01868971ad33303d711f47949"},"res/raw-assets/0b/0bbe3b5a-452b-4d01-9231-39624653ba98.png":{size:876,md5:"d1c0f938b70f5e67816e11c97de658c4"},"res/raw-assets/0b/0bc28936-6fe3-4c76-83f6-4e509ef7f086.png":{size:3249,md5:"1be6cc9125b791dd0c73417015031438"},"res/raw-assets/0c/0c14dfcf-f2c8-4c1b-837b-6b37818da2c1.png":{size:2366,md5:"0ffc7352f619edd5b6d9705336d480ae"},"res/raw-assets/0c/0c6bf14b-ca02-4728-985f-803bdd1a6368.png":{size:1093,md5:"37ee08ebc7947e79b2d863062ae2f6e3"},"res/raw-assets/0c/0c780db9-6040-4f7b-95d6-f31290aab7be.png":{size:2759,md5:"8170217a9e6310f289d2b78f1842533f"},"res/raw-assets/0c/0cd203dd-d255-4d4f-a6ec-0399ba26c686.png":{size:16406,md5:"3da9e010369a837b5f624a07eba0bd4d"},"res/raw-assets/0d/0d4151be-0d96-4401-913d-cc839b971210.png":{size:1636,md5:"dd4e853dd2bc9cedd0223abfa104634c"},"res/raw-assets/0d/0de2eeb5-2f9e-4e1a-af3f-1e0780cf8381.png":{size:828,md5:"fcce2f07cb0ef66565076df56aae3c66"},"res/raw-assets/0d/0df6ba33-2fe1-4125-ac6a-40bd12dd9741.png":{size:6824,md5:"61777a2430402f578854aff7fd87f762"},"res/raw-assets/0e/0e47c552-761d-4cae-ad3b-53d9c3de531b.png":{size:1287,md5:"184388465b268e9793a998e65f1a8dd6"},"res/raw-assets/0e/0e6b0b2e-ddfe-4008-bfde-ceea76bd857f.png":{size:5620,md5:"7c6dafab1d752445e5b77c16e4e24aca"},"res/raw-assets/0e/0ed75a4b-3776-4bd0-b6d0-aef3d84344b2.png":{size:4446,md5:"f5fbbdaf8ef137c745455efbad41d8ff"},"res/raw-assets/0f/0f58f3dc-a8ed-4c6d-9bf6-1bbffaf96c11.png":{size:15714,md5:"352c64ca60761ac396323663614a6067"},"res/raw-assets/0f/0f9859b2-7049-459a-98fa-15e04c370a3f.png":{size:1049,md5:"2828f1a8693853851be0733ffb94f4d9"},"res/raw-assets/0f/0fd17481-f477-4999-b532-62a66e2a363f.png":{size:15704,md5:"d2d4af272e8f5eb55c860ecdb5c1d033"},"res/raw-assets/0f/0ffa7da7-e238-431c-aecc-32524ce1cdc9.png":{size:3788,md5:"f3cb589ce6c3f7e14cdbe121553c6e42"},"res/raw-assets/10/10903a68-e704-408d-9afa-9a74de7ac292.png":{size:1249,md5:"bfec3cf3d08ed290dae9f2efcae89bd6"},"res/raw-assets/10/10aee1e7-4c8f-412f-b83d-1e4de4e77a9a.png":{size:1075,md5:"0be4cf3dcfbaca7288fb544a0c5c6385"},"res/raw-assets/11/1117e886-953c-406c-8b47-004d9575a9e0.png":{size:3069,md5:"3dae01f46632e5552654e9f3fce841e8"},"res/raw-assets/11/114c18d19.png":{size:945567,md5:"6fb27008458493e8c1e87a9c58d57037"},"res/raw-assets/11/114edecf-8e31-4bc9-a7a1-a8e2ef4c7a39.png":{size:14164,md5:"26f312cc296f70e810a745ed40a30d9b"},"res/raw-assets/11/11c2d0a2-5be8-4de8-ab75-3f9102c16d52.png":{size:2186,md5:"3894000533a718a5e1ef6c5c4f47db16"},"res/raw-assets/11/11e064f75.png":{size:1694145,md5:"ff5dabeed1cb1ac58134845479386627"},"res/raw-assets/11/11e1b1a7b.png":{size:1005635,md5:"33e83952a156f283ed0de589aacc1701"},"res/raw-assets/12/121d585aa.png":{size:393936,md5:"e9c87c033bd2cb04c199fdf0ac75c73f"},"res/raw-assets/12/12412d7c2.png":{size:1103976,md5:"af3d6884fc300a5d9d0263662f597db4"},"res/raw-assets/12/125db2dcd.png":{size:335909,md5:"47400fd6d1d71b2f94ccf8c908f295ca"},"res/raw-assets/12/12d909d6-c4ab-49cf-b171-33397609dad4.png":{size:20453,md5:"2ffe912f8fffb9516fe8d8e2b0c1a63a"},"res/raw-assets/12/12f63445a.png":{size:987230,md5:"46b37bc97af4a64f501441f4c54305bb"},"res/raw-assets/12/12f8cd56e.png":{size:202321,md5:"2668bfefcd3882df8f0a92521c25fe74"},"res/raw-assets/13/13263be3-2cf7-4438-be0d-a333054a7c67.png":{size:4924,md5:"41a1cd28e29135c25b164150874ff83f"},"res/raw-assets/13/1363197e4.png":{size:981185,md5:"5163f2d0d5fc53e0fb6cb9a231390fb7"},"res/raw-assets/13/1365a33e0.png":{size:1369905,md5:"a6f4410bc83aef5c2ecee34789a0c8d7"},"res/raw-assets/13/13669a63-e46b-4757-926f-a7fe550d292a.png":{size:4623,md5:"7d30810e9553c9e23b73dffa2d592029"},"res/raw-assets/13/13b64bcac.png":{size:851400,md5:"d8fc2c75dc004fb59193435381d24528"},"res/raw-assets/13/13c369d76.png":{size:404891,md5:"a3ceedb64fd8d54f98b5251b8331dad9"},"res/raw-assets/13/13efc2b56.png":{size:966133,md5:"c718f40ea4a8c824b72bf71465c9f02a"},"res/raw-assets/14/140a8d89-c294-47e4-91ec-5802403d4cd5.png":{size:2627,md5:"3477ebdaf85ec3704d326e6538ffd3ef"},"res/raw-assets/14/1425f3a7-25d9-4ef0-a687-e604f5373c9c.png":{size:566,md5:"18af821ad637d259b542e30f91ae6f6b"},"res/raw-assets/14/14948ceb-d647-48f7-a28c-2b49fd4993e3.png":{size:3622,md5:"77357a689512326b368f2fff21b61e11"},"res/raw-assets/14/14b3bbba-0d2e-4cb1-9f9f-66cf9d13828a.png":{size:6768,md5:"0cb2b2a2a7ca2939ddc8d912ec8c664f"},"res/raw-assets/14/14d0276a-9caa-417f-8d58-2813b543d15a.png":{size:3654,md5:"c3d38cdae91580cce9bfcab9461784ec"},"res/raw-assets/14/14d4fedc-acda-4a58-8092-eb6fc7c74784.png":{size:2325,md5:"fb658b802bfbae5a2b6e3ef4be25805a"},"res/raw-assets/14/14db0888-7e67-4682-b8d7-60ae5dc1a6b0.png":{size:2110,md5:"395e3441e02f3a9559a32e3d088a6145"},"res/raw-assets/14/14f9d494-8567-45e3-919a-d65fa2cbed0b.png":{size:877,md5:"521543bdc44dbbc4a8bf3e232c2ad5a9"},"res/raw-assets/14/14fa2e832.png":{size:1052831,md5:"d28b8310b53238fb31228432d8b58839"},"res/raw-assets/15/150d8cb51.png":{size:1464137,md5:"727f5e4fb4b1569ff3eec628ffbb4099"},"res/raw-assets/15/1521a89d-1887-4dc6-bafd-61a55d71f484.png":{size:1596,md5:"a684fa1b0a23ef5d0e8393b1bb539161"},"res/raw-assets/15/15231a4e-cf24-4cb3-91cc-1defdd0dafe9.png":{size:6329,md5:"130895c0278030261ee1de28bc43e2cc"},"res/raw-assets/15/155a39fa4.png":{size:406907,md5:"18635a1f86b72c9869308f861957803e"},"res/raw-assets/15/15681eb1-5959-44dc-be56-fc831640e6ab.png":{size:20266,md5:"ea92306bce76087117a34dbe8cbb7645"},"res/raw-assets/15/157653d8-0346-48d0-8dc5-aa2cfbe887a3.mp3":{size:19479,md5:"0815a7e1b79b65235aa35b87b0da2eec"},"res/raw-assets/15/15e96aefd.png":{size:332953,md5:"baabb33240ebc424388f8b98f35b894e"},"res/raw-assets/15/15f7359c-b169-4e6c-9909-755ebc397d5f.png":{size:1759,md5:"656816331fe9164ea444bd9e12001b94"},"res/raw-assets/16/1619b4729.png":{size:600171,md5:"6e710d29137d4023b9ddea0e9f56c029"},"res/raw-assets/16/162ecd06-f90a-4bad-98fd-89c308cfda7b.png":{size:736,md5:"89243d12faef38c47cdf50be1cc4b74e"},"res/raw-assets/16/1677a83b0.png":{size:1412597,md5:"14c0a488dc9603bf057a0f661a92ae31"},"res/raw-assets/16/1682b148-252e-4484-83eb-ed9ad1198d74.png":{size:2440,md5:"4ea7b9cfa8eb52c2e76a4291fc165c8d"},"res/raw-assets/16/1698364d-5765-40db-85f3-3db6b7c47bf1.png":{size:3183,md5:"179b251fe25273fde2ffef7e900d798e"},"res/raw-assets/16/16993f79-9891-4f4e-a40e-03aca7444176.png":{size:2733,md5:"afad5685a687e88ff74f928da77edb08"},"res/raw-assets/16/16be6f10e.png":{size:346725,md5:"f6733250c08d9cc4de6a10c0bf9382ad"},"res/raw-assets/16/16c9d4e80.png":{size:586930,md5:"05ed06a715470e2336126bb1ca6f0564"},"res/raw-assets/17/174c63f1-1d45-4c1c-ac5b-19746ac443e3.png":{size:6307,md5:"793e007a7d3234c1e845f86b4807aba1"},"res/raw-assets/17/17ce0689-0259-484a-869f-a792225648b6.png":{size:5764,md5:"c9bf55c682ecbc529cac721fc5bd8eee"},"res/raw-assets/17/17f9ef39-b625-449f-bd13-60054f2cc883.png":{size:4280,md5:"aeb558c3061cc4c70d048af4dde47963"},"res/raw-assets/18/180ce1ed-6862-430f-9943-3147319ca12b.png":{size:2011,md5:"8c44f0ebbb5ecf868123d9732ef9cbc3"},"res/raw-assets/18/18122f41-bba7-449f-b515-8519179bb0ae.png":{size:3108,md5:"6ac9dea6db05cc04434e5b44e31ba60b"},"res/raw-assets/18/186458ba-ab43-4990-bfa8-3ef46976c450.png":{size:1295,md5:"1c058ad81acf345085538808bd7324af"},"res/raw-assets/18/187361ff-6638-4a57-a34c-c6dd98eee3d0.png":{size:5224,md5:"60eaa6328f1a85c0407d4e706182b5e4"},"res/raw-assets/18/1894f8a4-2f2f-4484-9fd4-e68bbd5ba9d7.png":{size:3196,md5:"a675062033405edd1ef6f32c0f5c85fa"},"res/raw-assets/18/18ac30dd-70dc-4f48-a212-d6ff6a01dcae.png":{size:2706,md5:"fc1a4a9488986a224ee6e2f30bf762e8"},"res/raw-assets/19/190c4678-aef8-46ef-bebb-3f504be96f7d.png":{size:1169,md5:"c07510af24d913f53fa77817e277aeaf"},"res/raw-assets/19/19294586f.png":{size:1444116,md5:"9b4696d319644d059863530c0714250c"},"res/raw-assets/19/195081060.png":{size:425988,md5:"f9da2916e07f69892aafb48ad07810db"},"res/raw-assets/19/196a224b-db3d-42d7-8d75-35e9c5a459e6.png":{size:2210,md5:"0a12058ed4301dc7cf0d16af5a96af62"},"res/raw-assets/19/19783f749.png":{size:451401,md5:"8d3599a6b4eb62a2f700bba089954ebd"},"res/raw-assets/19/1986d4ee8.png":{size:157552,md5:"a0e357c5795235c6ef710ef26b0f4824"},"res/raw-assets/19/19bd6a55-165e-46b9-8390-c6a64cb52014.png":{size:954,md5:"5ac86a85dd34a2d00a4cc971e22a589e"},"res/raw-assets/19/19c3f070-a836-41e5-9c94-de5cf7f7573d.png":{size:14465,md5:"2e2e80de858c639b08b57d0809303891"},"res/raw-assets/19/19d49de70.png":{size:1372990,md5:"a5f2276f6dd7424784c3de75e8b983c5"},"res/raw-assets/19/19d601b0-927b-4b9b-a61e-8b81d7748e09.png":{size:5826,md5:"b7d6bc48839f90c081c7d98994c27ec5"},"res/raw-assets/19/19de5e626.png":{size:322170,md5:"68ee65352a109ba259703540eb2ac905"},"res/raw-assets/19/19e30f9f-3994-4715-9879-1bde44d78f23.png":{size:2509,md5:"ff3ed936e998c5d74247ca09bd9e77eb"},"res/raw-assets/19/19e433cf-482f-4362-a606-9aac60632185.png":{size:1202,md5:"90e95842d7a3316ebc6d912fee11cfc9"},"res/raw-assets/1a/1a488a6f-b17a-4546-8eff-afff59d8a9e4.png":{size:5223,md5:"677f33a8b9650e4430e332e3ee7ec7bf"},"res/raw-assets/1a/1a4dcab4-d754-436c-b970-90a42d14df05.png":{size:2577,md5:"c0cf177e19787b5fbed4034b41cc8eb3"},"res/raw-assets/1a/1a6223d2-f594-452a-9007-93ab40073084.png":{size:3573,md5:"f69464d2a59e7c3765627e6f76875f15"},"res/raw-assets/1a/1a6f14a0-fc8f-4076-83af-615d6378ddbb.png":{size:2300,md5:"c7bfeca806dffe13084e28963942eac2"},"res/raw-assets/1a/1a743e33-79e9-4288-bdef-6f17e162c6af.png":{size:1044,md5:"f0910dc7a65d5d0f225b175ecb229495"},"res/raw-assets/1a/1a7ef17f-2b6d-43a6-bd79-93ae1d9ed157.png":{size:14264,md5:"e3530a27a818f3b50e886b622fe8a6ed"},"res/raw-assets/1a/1a8f6d35-49de-471f-8bee-1d82e4bfdf1a.png":{size:4109,md5:"c36036fe86b8dcc6fbf4f823617b229b"},"res/raw-assets/1a/1acc3504-fc5f-432c-99d9-485d972bd317.png":{size:766,md5:"d89221b30696dbdae419b92979a8d612"},"res/raw-assets/1a/1af70489-774e-461c-84d1-6a1b4c0ba111.png":{size:2093,md5:"ed5ca0758b6d76eb36e59b00576e66e1"},"res/raw-assets/1b/1b2032a40.png":{size:216480,md5:"4b9d92afc3c9516d576b584acb6ad136"},"res/raw-assets/1b/1b44a509-213d-4ce8-abe1-5bbc0ed0117a.png":{size:482,md5:"ec9d84e80732b865c1ebf1c9484f5781"},"res/raw-assets/1b/1b6b73232.png":{size:371532,md5:"e48a733454d28dc0c72a4fa5d61f643d"},"res/raw-assets/1b/1b863144-c949-4382-ae12-29fbfbf8e8b9.png":{size:4081,md5:"d31a556dfd4ab7dd17ae72281dbb7a8b"},"res/raw-assets/1b/1b8ec342-997b-4975-a1d6-f607f81d49cc.png":{size:3203,md5:"08b63be57cd27d77758b27752a76749e"},"res/raw-assets/1b/1ba02fe6-4bcb-46c2-9bbf-f571a0e20dc3.png":{size:754,md5:"09c8e6e794db9efac103ec4875781d53"},"res/raw-assets/1b/1bbc769bb.png":{size:824197,md5:"96a08045c52d86e5cc572fd02f5bd464"},"res/raw-assets/1b/1bc5b06c4.png":{size:158088,md5:"7fdd6854d8b3c0ff9b5c0c13a535d31a"},"res/raw-assets/1b/1bc8ea478.png":{size:551863,md5:"4041b56fb52b04b06c658c0d9dca4b4a"},"res/raw-assets/1b/1be2c4f4-a7a6-4ddb-a53c-ccb2c5ead4f6.png":{size:1072,md5:"e5d3082df33bc9f42d9341654a29f115"},"res/raw-assets/1b/1bf086b71.png":{size:357675,md5:"0d574dbcdfc912e0c6d697ec571f6e12"},"res/raw-assets/1b/1bfb8e489.png":{size:121426,md5:"4f907cd22c76258249d3b5f478560922"},"res/raw-assets/1c/1c467f1d-1d76-4680-b8b3-b2b8112d50de.png":{size:2129,md5:"1d85a8459c1fb318d3c13d0fa2496354"},"res/raw-assets/1c/1c4884ec7.png":{size:361144,md5:"7ce4e47a448ae820cfb4085f8a5a358a"},"res/raw-assets/1c/1c56d0cc9.png":{size:583052,md5:"607ebce71faaa6e36fca94cf3afb95a0"},"res/raw-assets/1c/1c876681a.png":{size:1399951,md5:"6082316bb5f4123ed5e507456f386664"},"res/raw-assets/1c/1c885d449.png":{size:313693,md5:"7d532f0bead947c42b9322fd68400883"},"res/raw-assets/1c/1ca4e962-a5e2-424a-a568-8e4fd093a05b.png":{size:6370,md5:"9274e28c577bf9109688eec827222cdd"},"res/raw-assets/1c/1cb359f84.png":{size:868579,md5:"140ceb6621533d00e8fbb7ebcebe39c6"},"res/raw-assets/1c/1cc60be5-01e1-40b7-be40-7e19bebf2d5f.png":{size:1878,md5:"60bb5e4c243e416949e7ecc7830cc57b"},"res/raw-assets/1c/1cc8659f0.png":{size:298736,md5:"77ab0bf8799947cb6b571325ea796a63"},"res/raw-assets/1c/1cd4b592-6a0b-420a-a0ed-22bc5b841f73.png":{size:1399,md5:"2800224baf6af91fd3927d2dda313cba"},"res/raw-assets/1c/1cd8347a-756d-44be-bfec-dea237cbe7ce.png":{size:949,md5:"bcfdb26ffd3242c221583c48f4375ad6"},"res/raw-assets/1c/1ce15bbd-2c03-4d4e-a783-cd40cc8bb68d.png":{size:2654,md5:"8bdb5cfb9d7f35f500e21240424bf6fb"},"res/raw-assets/1c/1cf13238-2a12-405c-9f99-b70cc5a894c3.png":{size:6821,md5:"a1a97257b9a21b503f84ad0822cf551c"},"res/raw-assets/1d/1d5b6f004.png":{size:206143,md5:"5a77624f7494b0be6095a3f1c1270d56"},"res/raw-assets/1d/1da3fc43-cfe4-4e89-9d78-c7d16ad12ecf.png":{size:5946,md5:"79362ddb2e22dfdca5fff672f900cd68"},"res/raw-assets/1d/1dca1eb82.png":{size:1153054,md5:"ea633aebc09870c05611d948b8531a6f"},"res/raw-assets/1d/1ddaa2b1f.png":{size:1650178,md5:"67cfa5859bd3736aa1b8bb00058330fc"},"res/raw-assets/1d/1de91936-3811-411e-ba01-e3aac8031b46.png":{size:5160,md5:"c3587886ee6a2b946e81de51868b821d"},"res/raw-assets/1e/1e19f55e-09a5-4d64-9f46-19a4f3f97a27.png":{size:6215,md5:"64c35fc1ca6fed07a9c08cab6d7ddd4d"},"res/raw-assets/1e/1e2a3920c.png":{size:1894127,md5:"299edb18656340e1c8e1304566a6d312"},"res/raw-assets/1e/1e48ffdc-2845-4bc0-96fb-41c7beedf405.png":{size:15557,md5:"066b6473b17fde725c45913f0af95a51"},"res/raw-assets/1e/1e7eafcd4.png":{size:1267490,md5:"2bcdc518fac7a34316ee8eea844b1575"},"res/raw-assets/1e/1e88682a-ce85-450b-bd12-b16598b9b59d.png":{size:555,md5:"4d4ca3cc6f4172db96f2533ad6230861"},"res/raw-assets/1e/1eae0c13-9915-4d9e-a1ff-14a0bc629012.png":{size:3471,md5:"f9277f5ac0be661a7ba4f51f64c29471"},"res/raw-assets/1e/1eafc558d.png":{size:270195,md5:"0e632b87c9d654ea72fe4da97d438779"},"res/raw-assets/1e/1ee4328d-fd87-409e-8365-b8b6ce818980.png":{size:789,md5:"67b998d5f270c0a2d67600d5482df320"},"res/raw-assets/1e/1efdbaa3-5215-4163-8592-8f1ecde4bc84.png":{size:3182,md5:"410708546fb050f3a7376fd72a4c2067"},"res/raw-assets/1f/1f117f53-08bd-406a-807b-7e2bedffb160.png":{size:6414,md5:"92a3fb947258efac02f1cce197a1879a"},"res/raw-assets/1f/1f1740363.png":{size:1580748,md5:"0bb14afcba2acf42c9f963938e2ac862"},"res/raw-assets/1f/1f19402db.png":{size:409188,md5:"7a6323e9f43fea81637be23336d941cc"},"res/raw-assets/1f/1f20c38bc.png":{size:1139249,md5:"3292787624198bd5bdd6b8da3b6ffeb0"},"res/raw-assets/1f/1f307349a.png":{size:265349,md5:"70972770fc09f5e2f49bad58836d87f4"},"res/raw-assets/1f/1f8f12fb-e816-4fb3-b44c-39e7b121ebd8.png":{size:2786,md5:"4e16580e07dcf6fd5846f56b3b1f0313"},"res/raw-assets/20/20212369-2a5d-4043-a31f-1e20162377c0.png":{size:1603,md5:"870612ccc2ff9f91207ac8742a904f59"},"res/raw-assets/20/206ccb16-fe3d-4be8-b1ea-d8ac58347cf8.png":{size:4150,md5:"adc9a2068177f46487a90d5355b456a0"},"res/raw-assets/20/20c45fc4-2f13-4ebf-9fc6-33d7deec0d64.png":{size:3367,md5:"05865f15cc6ab6777efd20593ceab39c"},"res/raw-assets/21/215bf820-636f-4776-9d09-0f7300cbf208.png":{size:1274,md5:"e0e15a32884c5109ee0ceb24719eea2a"},"res/raw-assets/21/218a2c3f-67a6-49ce-bc59-20d6c057ad00.png":{size:2364,md5:"e8f30178886fe2700549a7afddf6341e"},"res/raw-assets/21/219d3012-7557-4269-8f05-52b7bb76baa6.png":{size:2433,md5:"bdbfd9fdf0fa841265a0c7fcb32ca670"},"res/raw-assets/21/21a99397-b83e-4b1c-a699-19c15e3bd386.png":{size:13105,md5:"feee947d062d63c0507f36ae65970a61"},"res/raw-assets/21/21be528e-2010-45a1-b10e-ea2953f2922e.png":{size:13967,md5:"d93dd0f97ef492f78350f6b7f61e65f9"},"res/raw-assets/22/223dd6ee-5765-4a86-9a6f-ad57dddaeb4d.png":{size:1759,md5:"28edb528c7609421bbd0eeb6d60976b3"},"res/raw-assets/22/22538bbe-3578-4cea-a417-1fe41313d91d.png":{size:2337,md5:"a856305e078432b65f11cfe8ae473e51"},"res/raw-assets/22/22740726-4084-41cb-86e3-7fe583d46722.png":{size:2428,md5:"22955a8c127839d51ccee0a21623128e"},"res/raw-assets/22/22c4e72b-1600-4996-8bae-71b456a27f27.png":{size:2575,md5:"66b5b1ce11f81be969fc271202aa429d"},"res/raw-assets/22/22d38fb7-92a7-4590-863a-b12a26da8d81.png":{size:2844,md5:"e5bac592bfbf12f2f2a09563e5f66aff"},"res/raw-assets/22/22e3623e-22df-48d4-b161-3395742a1ef8.png":{size:1389,md5:"3ae7afc36fb491c17f6955eba5d4ec25"},"res/raw-assets/23/2303f7d5-8611-4a22-93a0-fb442affcc12.png":{size:2030,md5:"cfbec59b9a940d64ab88523a6c628744"},"res/raw-assets/23/2359400f-d6a1-417a-96e7-e3840afc3f72.png":{size:3540,md5:"a07adf40e8f906924ff800d49d2f2cde"},"res/raw-assets/23/23858b5c-c9bb-4590-a19f-58078c73f0fc.png":{size:7037,md5:"40bf602229e95d2d91b6c808b33c161d"},"res/raw-assets/23/23882e51-12af-41d3-b4a2-acf506523452.png":{size:828,md5:"d470965e14f734333f70f51b5f6e9f4d"},"res/raw-assets/23/23c1004b-7031-465f-9e2a-e120fa83bc33.png":{size:1850,md5:"5d035becaf3a56fc933d9001f028ee92"},"res/raw-assets/23/23e5154c-abcc-4971-89c3-c6b32c42a962.png":{size:645,md5:"49efa4329238dceaf02615a691b2ac14"},"res/raw-assets/24/2454fa40-7b12-48b6-9682-16530fd21172.png":{size:1854,md5:"fb708210a3edc7921df678686c3e4085"},"res/raw-assets/24/245b86e6-b351-4de1-b39a-33d5c72f55b0.png":{size:793,md5:"49d460c50ef0f6ae108c2b3eca339cd1"},"res/raw-assets/24/24b31275-82af-4d4f-a903-7132e3578d3b.png":{size:3284,md5:"207291e7f11e659fee44b5e80a4b1fda"},"res/raw-assets/24/24e2e334-0858-4810-a909-c2f5394e72f5.mp3":{size:6914,md5:"f6163856d47914dc6e39fb57baabb334"},"res/raw-assets/25/251a58e2-30bd-4f62-a43a-1b0c7be35c3c.png":{size:4601,md5:"e2589235fce4de69cf26100d04921584"},"res/raw-assets/25/252848e6-dac5-4d85-a5c3-e074330cbc84.png":{size:1760,md5:"05f3cbbe0c8899da0ba269d438e22019"},"res/raw-assets/25/253943ae-8c85-4297-b58c-1cfa2bc8180c.png":{size:4335,md5:"2652842627bdc6dd09330e6df9fc0fca"},"res/raw-assets/25/25780b6b-0b2c-4ee8-83c9-c19a5e43934a.png":{size:2334,md5:"2f79e84149ac07e4f9b6485b83a26d14"},"res/raw-assets/25/257ed7cf-9cb3-4322-85f2-16977361f2ed.png":{size:612,md5:"34a3eb1b34031ef75f388f1ca3100b1e"},"res/raw-assets/25/2585b4c6-b003-4916-ab63-3b2a396f98fa.png":{size:2057,md5:"60b621ea216110e24df97508f6885fa4"},"res/raw-assets/25/25bc437e-d175-405d-abfe-254e1a372284.png":{size:1979,md5:"19333e655e60c64d92a617b09a0d187c"},"res/raw-assets/25/25d3298e-3b97-4453-9a7e-608220ade725.png":{size:990,md5:"9e64cc820ac9337ae3db5f19ccdaf6b9"},"res/raw-assets/25/25db89d0-aebe-4aca-ba24-200eec9eb459.png":{size:4127,md5:"a35f7f5baabde3c6a56453f22fe0b452"},"res/raw-assets/25/25ff1751-ae9f-4267-aa2e-1a07c273ba75.png":{size:723,md5:"ffe6372c6b4d24cd972bda412cc3bad4"},"res/raw-assets/25/25ff9a69-1754-46fa-a69b-3a0fd85dd4a2.png":{size:4941,md5:"6641c2dfcd3aee1c0d588f4fdd1f78e0"},"res/raw-assets/26/2634199f-be2a-4dd1-90b1-3a5bbee9c082.jpg":{size:98955,md5:"0472461a8f8cf26e81cc0dc28499a4f7"},"res/raw-assets/26/26359b36-4e86-4f35-affb-c1250746b5bd.png":{size:1531,md5:"04fd34a3bf3bce4fea0a08767964849a"},"res/raw-assets/26/264ca20e-448f-4b00-928d-1ad01510b102.png":{size:525,md5:"1f0887a613fab73ef21cadad4417f769"},"res/raw-assets/26/265dbee0-19b1-477b-9a29-26f72c6a5b2c.png":{size:2392,md5:"4ef2b3231ae3404f389038409c40d5aa"},"res/raw-assets/26/268064f7-1b9e-4c61-8af3-52ecbbbcf31e.png":{size:1528,md5:"3904ad6695f86f446ed31a4c3c67b026"},"res/raw-assets/27/27154a7b-d014-485b-b374-450489963392.png":{size:833,md5:"ee486d4ffd1b7856a1824f6490f36873"},"res/raw-assets/27/2742999a-3928-461c-a067-7cc255951888.png":{size:17186,md5:"579a334e5163d1d9a8c4f561d6844695"},"res/raw-assets/27/279657de-d7f7-41b4-99dc-e7dd440bb046.png":{size:769,md5:"fc536ccf56a6464ac34fe05560fa0168"},"res/raw-assets/27/27ca3a80-671a-4ae7-b85c-6bf2060008a2.png":{size:736,md5:"76917474523c5bca563b7f6d18e6b58f"},"res/raw-assets/28/2804cc6f-ad43-44a0-bb80-e766e25c00a0.png":{size:1330,md5:"60d06eb2d80d47c767e30bb81b7dcd54"},"res/raw-assets/28/28562409-6ff6-4929-8e23-b841c23c8c33.png":{size:417,md5:"ff27040754e99d480da60ca0ebb369cb"},"res/raw-assets/28/2875cd86-509d-4b41-9f2e-2e4e5a916c3c.png":{size:427,md5:"c91b0d7cec228da83ec4821e7b98c3e4"},"res/raw-assets/29/293cf062-58bb-42b6-a32a-592ffe399275.png":{size:1013,md5:"413fc176cc7fa5f6840bc8ecffea80bb"},"res/raw-assets/29/294af8e2-bd89-4891-9ab4-89adbba3900d.png":{size:2856,md5:"d67f6ea995dba88e07d1d85f6b99ee0b"},"res/raw-assets/29/296706f8-b43c-4053-81ed-179e65c2f317.png":{size:3766,md5:"c566b9d28e225df47bf1c377cf8935bb"},"res/raw-assets/29/298a5e5f-2434-4d44-a91d-f90f242eb610.png":{size:1991,md5:"239ad88dfc751b867d8e0967fceaa623"},"res/raw-assets/29/298c6083-a8a9-45d9-9e94-caa8af0e3c0c.png":{size:5209,md5:"53a8125c9d4c6fa3b971fd1af42ea035"},"res/raw-assets/2a/2a1c3871-22ba-4dbc-a535-b7baa3d74cce.png":{size:2556,md5:"88df0b8700dff6afe878d63c105ccf9e"},"res/raw-assets/2a/2a420b61-1599-46ed-950e-f58e6ff27341.png":{size:3729,md5:"fa69e90a6d2b5685b17017767e665ce9"},"res/raw-assets/2a/2a9cf12d-19dc-460b-92bf-8cc08fa7fbc5.png":{size:1451,md5:"0f4bc8cf0643e07da5db5147cef19a62"},"res/raw-assets/2a/2adeee74-3748-4031-92dc-96290d529905.png":{size:1655,md5:"a886f59d9db4334ad59c96d3751811e2"},"res/raw-assets/2a/2aebd2e3-ee41-4727-9c80-42b2e6036301.png":{size:3773,md5:"f2399ea3cbbd65831b831547aa5dcd95"},"res/raw-assets/2b/2b4b3961-150a-45ad-bd58-50e558f05cfe.png":{size:2176,md5:"c5394fbb07650e5ea5e778b8f8b5e3e2"},"res/raw-assets/2b/2b564fe1-81b4-4fe0-a02a-cc277e827b8e.png":{size:2052,md5:"24df0a91fbc7c5e76510420675c43eab"},"res/raw-assets/2b/2b813a0d-bec5-41bd-a683-c84c594f4461.png":{size:6917,md5:"eb40dd786fabbed087baf8b66fdc70b6"},"res/raw-assets/2b/2b890d3d-09eb-44cf-9ec6-570cf1117bb3.jpg":{size:87031,md5:"7dd64357d825132851bae817a6465de6"},"res/raw-assets/2b/2bab2c08-324c-460d-a214-7b044ce03468.png":{size:4355,md5:"d455f595939f6ad1f6683e86acba59c7"},"res/raw-assets/2b/2bbd1b03-0ed5-4480-913c-b26444000557.png":{size:4356,md5:"5f4b1c46a91118f2dc7e33771bc15620"},"res/raw-assets/2c/2c7cd5ea-dd3d-4f24-84a0-7f9c5d3aa360.png":{size:411,md5:"92c12380d2f147e69726bbe5fdaa5270"},"res/raw-assets/2c/2c870045-8a38-435f-a78f-4d99ae852315.png":{size:2233,md5:"44ecd2ec3a40b2401cc803a78c69e86c"},"res/raw-assets/2d/2d185fb4-5c06-475a-af1a-af2162769be7.png":{size:706,md5:"f9ef1ff733db6f0404c03164ffc962ce"},"res/raw-assets/2d/2d2ad6d9-77ab-47d8-9567-51fc2ce875b6.png":{size:693,md5:"e65ea8072249de1021bbf0179d33f91f"},"res/raw-assets/2d/2d3c1e30-aae8-499b-8e69-0ba7c838b9e6.png":{size:516,md5:"0e19a8cd2656a99850b883473ac9f768"},"res/raw-assets/2d/2d89f4a1-24cf-48a6-b309-6cb0f58180a7.png":{size:2146,md5:"ecd2e5561ba501e1b500f8c1cb0f9033"},"res/raw-assets/2d/2da74781-9ea9-4032-a32a-c1770e8b2933.png":{size:1622,md5:"5d3f2427965ff262a2474744f897f05a"},"res/raw-assets/2d/2da9a7c3-e27f-4885-b79f-71ca0faf4a48.png":{size:2549,md5:"20633293ca23fb595c0d36fdf2e50f64"},"res/raw-assets/2d/2dfc3d90-415d-4301-aeec-b05d0b49424f.png":{size:3429,md5:"71d404a1c0f7650bd761f7d6257f3c45"},"res/raw-assets/2e/2ef237f2-2c92-4428-8df6-674d778fe5a0.png":{size:1127,md5:"300b88f9a2a27eadfae6e06ac850b2b5"},"res/raw-assets/2f/2f109423-5190-4523-a567-9ca5b6aef626.png":{size:2052,md5:"2141bdc407746e2eb5aa78b4545ef2c9"},"res/raw-assets/2f/2f37dcc9-8f29-4381-986a-5b990f5723c2.png":{size:2327,md5:"e7eefb94809bb6f1941072b328b3dc03"},"res/raw-assets/2f/2fdcfb41-1808-4484-acd2-a80b3cb2d17a.png":{size:2503,md5:"131f1c4f982799f82036dd95e8dccf45"},"res/raw-assets/30/30646712-b09d-4e2c-9462-0010516cdd42.png":{size:1341,md5:"229aad0b1243d39e6dd77406154bbf16"},"res/raw-assets/30/30d144f7-8605-4e74-bdbe-4f07c32cc061.png":{size:6374,md5:"942d861a0ed9f4b0a4762a1494b49ced"},"res/raw-assets/31/31156029-e879-4b55-8be1-ef0a480d394b.png":{size:11024,md5:"a709e6063a04e2b8c6da02c2f60caf91"},"res/raw-assets/31/313dc78b-4ef5-4c6f-a5e8-c85bff658dec.png":{size:1366,md5:"8beb1dbab86aeb31f471d1da0b3e13a7"},"res/raw-assets/31/31c12787-0ad2-4b15-b399-b415593aaffe.png":{size:540,md5:"88113f1b2983e2ba9f00dfbd6e71eb73"},"res/raw-assets/32/324e31c2-72b8-49c3-af01-ed08e9ba60d6.png":{size:6299,md5:"0af3d72d2d3393ceb3c4cdee25a11179"},"res/raw-assets/32/3278fd49-482f-4d08-961e-74241c4e0581.png":{size:2171,md5:"8657351dda28aba49e648b56eb5b6c8c"},"res/raw-assets/32/32ab053e-c3ca-4d41-9470-7490a92796c1.png":{size:645,md5:"f77b505e13f45243abde3916a049657d"},"res/raw-assets/33/3314b88f-0c2b-484a-a01e-2ad04e468478.png":{size:1689,md5:"0e8bd8d92c261f9099f0cad06abc40bf"},"res/raw-assets/33/3336c1e7-f02e-405f-9f9f-fb3aa938f110.png":{size:5530,md5:"bf8ec37600976adb0896ec409263c7b0"},"res/raw-assets/33/33591051-c8cf-4b4a-b714-0f5886b78154.png":{size:2051,md5:"6f81590cb2918905152cbb739db39997"},"res/raw-assets/33/33c04f55-27cd-4ab7-83fa-69b6a95c669d.png":{size:1030,md5:"e45244e413fce5695d1f9205e5758e26"},"res/raw-assets/33/33ecad1e-8bc9-49a6-b1df-79d6cc24161b.png":{size:14904,md5:"999a08ed98d821a07844eab139c065dd"},"res/raw-assets/33/33f1518a-fa3e-4b61-b882-d8f9bc22b880.jpeg":{size:98499,md5:"a64748e043f6390644e9a9cc50831808"},"res/raw-assets/34/34022a8d-485a-4f85-983f-9bee1a55e709.png":{size:636,md5:"c69675892952155fa05340b8fdf1d508"},"res/raw-assets/34/34253523-1895-4f80-9236-8b2a9a8d0984.webp":{size:1074,md5:"f6ea95bc023aa5a82f3aed2cb2c00819"},"res/raw-assets/34/344d3a8c-b18f-4717-8b54-a88a32028b37.png":{size:2365,md5:"8e334a522e56321e3abdd407a5427ee6"},"res/raw-assets/34/3457dada-0408-4f1d-983c-242970b6beec.png":{size:2770,md5:"3f0c060e82edcb608a682d576d4db414"},"res/raw-assets/34/34752e2b-824b-43e6-8595-f93c225caa23.png":{size:3020,md5:"0c6cfb3ebc3810fa9db1583058b671ae"},"res/raw-assets/34/347926fe-8be0-4cb5-8133-50a92a23d747.png":{size:93195,md5:"062a3f6c553073785b5909a941c79296"},"res/raw-assets/34/34a707bc-b72d-4b91-a7c4-cc52a79f6e36.png":{size:574,md5:"bbad6fbc64c918377862f21a87f8d18c"},"res/raw-assets/34/34bfdb8d-e41c-4bc3-90f4-e38f41f8e04c.png":{size:2463,md5:"6a093993813361dd33639e48292bfb4b"},"res/raw-assets/34/34da919d-6973-4dd0-81f3-8fd94dbdba5a.png":{size:91768,md5:"425139fdb0acc6e88d5bed337b326248"},"res/raw-assets/34/34f44f07-5dab-438c-bd3c-f4016a408fea.jpeg":{size:46149,md5:"a1c9ae182c3110bcacbea57543045310"},"res/raw-assets/35/351cdc71-f816-43f7-a330-6f367481144f.png":{size:2329,md5:"64a6abdb6bf22ed5b6055eb98a5df4ef"},"res/raw-assets/36/36159f91-8794-4536-aae8-74e876066fc9.png":{size:1592,md5:"9806535ed2e3f55512c8f3acf66ae344"},"res/raw-assets/36/3654f1f1-54aa-48f6-8e6f-f9fe4fe84b04.png":{size:399,md5:"f03f9c4a40b752d263566c81d0ef0fd7"},"res/raw-assets/36/365b4949-7053-488f-bf70-8790fa422568.png":{size:2372,md5:"d3de635a6a843c8511af06985d30b6d7"},"res/raw-assets/36/36a2585f-7c57-4fde-b3d0-1f88516857bc.png":{size:2275,md5:"05c1225d142f243850e26e8f4b9eb459"},"res/raw-assets/36/36ba0ca8-eca5-442b-aa3a-fe1d0b2c406d.png":{size:3345,md5:"612261a9709810289607cc3b6a6ff450"},"res/raw-assets/37/37061dcc-f56f-4aac-bc8a-ae7ae3be332f.png":{size:747,md5:"14471310660f68fbadd3ffc26730fde9"},"res/raw-assets/37/372107c2-06d7-4397-b91a-b547114b9163.png":{size:493,md5:"0928d2974e33d2693f6ef5735de48afe"},"res/raw-assets/37/372e0329-c6d4-4390-91b3-efa8ae90bc88.png":{size:2209,md5:"e88bc2f0402576566752df02716cc660"},"res/raw-assets/37/37472874-c21c-42e0-8055-44d0cc98f1e7.png":{size:443,md5:"95904f43031c541319362850347e2dbb"},"res/raw-assets/37/378635c4-61e4-4945-b64c-f70880908b00.png":{size:1074,md5:"a8513f309f622d59d9694296c970558d"},"res/raw-assets/37/379e0de6-0a28-4de5-bd72-8a0752e15aa8.png":{size:2011,md5:"4ebf127dad603f6c43215bae401c642d"},"res/raw-assets/37/37a2a554-86b0-48aa-8068-0eee0c828b08.png":{size:2134,md5:"2f8b82b0bce76b4b7d4cba5467075da0"},"res/raw-assets/37/37a3360d-f344-4c19-ad14-03fc303e3004.png":{size:927,md5:"0585eb196dfee7349f23d3860c84dc51"},"res/raw-assets/38/386e2389-160d-4217-ad96-8123a7398ce5.png":{size:3356,md5:"f698d2f136a227650b572927d842d937"},"res/raw-assets/38/38dbe779-272a-4b22-8c59-4c0b0b38e7d8.png":{size:1933,md5:"e3ce2d5a19ea1490c9f8174e70a2651e"},"res/raw-assets/39/3900773a-3878-4d41-8e92-20a4f8ddabc6.png":{size:1665,md5:"f03c0a417bc0f27c523942ea11a650ea"},"res/raw-assets/39/391b5324-05c5-4d10-b281-fe311fac67ff.png":{size:6627,md5:"c6176789d6cdd3d06dcd0c11077b4d94"},"res/raw-assets/39/3932600e-c0d2-4554-b6da-1b87098c69c3.png":{size:2599,md5:"d86bc3afc33f38ebb1b5817ab35671fe"},"res/raw-assets/39/394bf4e8-9971-437a-8e6c-1971c24441ef.png":{size:1975,md5:"0c5af0d5632fe594cb59fa7ed6bcc5dc"},"res/raw-assets/39/396816f1-2a4e-4447-9043-a34c6da00980.png":{size:908,md5:"046d56174ff0758ab241f217f1006122"},"res/raw-assets/39/398f7597-bb1d-4d17-a15f-a7e81b0cdc91.png":{size:683,md5:"a0671e202724a521e0bce2989093f8ee"},"res/raw-assets/39/39f6c1dd-ec53-4a46-a358-3f72b8250634.png":{size:7216,md5:"638497fe69970ccc31f58c2103f44351"},"res/raw-assets/3a/3a1fad64-a7b4-4db1-a269-e6893b9ae64e.png":{size:719,md5:"8c070f221346508df83f14cf55dd8a1a"},"res/raw-assets/3a/3a3c628b-ed59-4020-81ce-f4247adbf7e2.png":{size:14232,md5:"26b90939795343fa33c6fe56b1eb1676"},"res/raw-assets/3a/3a4f8eb4-12bf-4651-96bc-989d59d3b0eb.png":{size:8090,md5:"2e50fb9f73289005ac5c3b8b699fd6c4"},"res/raw-assets/3a/3acd59cf-7ff1-4925-8c0c-8e4617e2c514.png":{size:2963,md5:"ef6e40c711757b37d575f05836d5fceb"},"res/raw-assets/3b/3be13941-df1f-4adf-a0bb-a8c7754a9d5a.png":{size:433,md5:"038226971404defd5cefb457f80a5712"},"res/raw-assets/3b/3bf13b1b-72d0-4a1b-a27b-baa9c934c6b4.png":{size:15958,md5:"ca39a5cd6cd855b475f010c2e592ec76"},"res/raw-assets/3c/3c1a5505-d287-4ae7-ae0b-15220ddfbe4a.png":{size:2573,md5:"15109c5eee3557c26775d079758a165a"},"res/raw-assets/3c/3c3af823-19e9-4662-967d-18a35d42287c.png":{size:1577,md5:"52b55ebda9df716c82f31fca73ae27db"},"res/raw-assets/3c/3c576948-e710-470c-b83a-09698dfc5b80.png":{size:13991,md5:"af1da61e6cb50c76a7de12efab758aa4"},"res/raw-assets/3c/3cf69154-e719-480b-9c41-3d3382b1c506.png":{size:759,md5:"54c9f84149ce61db012b1e9c74959a66"},"res/raw-assets/3d/3d08f6b4-fe2a-46d4-a096-a940401639e4.png":{size:4948,md5:"fda02273498e52548fbe003e16757fdc"},"res/raw-assets/3d/3d15294a-aa9d-4e99-98fc-949efdd69bed.png":{size:1411,md5:"eb5e3e44701b6592212753d2e3be416f"},"res/raw-assets/3d/3d4c8b18-9f76-45e1-a968-7030f1c99f0f.png":{size:2702,md5:"f5905f108dc41679f2ef413ff6b2b3ed"},"res/raw-assets/3d/3dacbdf7-ae7f-4313-84bd-f534e8faaa8d.png":{size:2207,md5:"19c3f0ba08b45c57a65f3475dd93b1e8"},"res/raw-assets/3d/3dd01401-e38f-47e3-9ad0-d538369df482.png":{size:1674,md5:"9319739cb7bf3cd5f65efc06ae77b9ee"},"res/raw-assets/3e/3e25a51b-0b17-466d-a644-243769a17dd0.png":{size:2238,md5:"6952d4a68ab5aa7f5af0d230ca04f16c"},"res/raw-assets/3e/3e89356b-a4e4-400f-b8ad-a410e3e7917f.erl":{size:402,md5:"3c92f956c40fd197b44a3f332b6a2fcb"},"res/raw-assets/3e/3ebb401d-f573-494c-a69a-d96ffeae888d.png":{size:4694,md5:"c4a28c2035cc2da8c4444a6d9ebf24f4"},"res/raw-assets/3e/3eda3030-eca4-4e5d-83d9-1c997f079bd6.png":{size:951,md5:"cd286711dde7224a5ea7314b02e600a8"},"res/raw-assets/3f/3f400bfb-c561-4ee6-8b13-bf90861359b1.png":{size:4215,md5:"dc7d439533ca1e5b243012701a6247d8"},"res/raw-assets/3f/3f6cf547-33a7-4695-877b-cc5ea0e46545.png":{size:4082,md5:"f259e2da9878d7e2575c62bed1a344d8"},"res/raw-assets/3f/3ff66a8b-88cf-4ce5-af51-934b767ae7ae.png":{size:3778,md5:"1e07cd49fc60dc275af76b1e9bc35f1a"},"res/raw-assets/3f/3fff38c9-f25d-4c38-8269-3737efeab69d.png":{size:1942,md5:"67b7e0ced0928730ccf4fbe00860122a"},"res/raw-assets/40/4042ec54-9017-4a48-8265-29a33e75a0b8.png":{size:3514,md5:"e874e1744580de8c31b155b02de9b615"},"res/raw-assets/40/40e732b6-698a-499b-9cc3-3282a143e996.png":{size:4194,md5:"01af8f315aa5cdf8bb36f80dc39df6d5"},"res/raw-assets/40/40f32268-f3b3-46eb-8bfa-26410a5de040.png":{size:2468,md5:"f07e210010e2b74d82ea7e151120ca35"},"res/raw-assets/40/40f3a272-903b-4a47-9d39-9a878db06267.png":{size:28484,md5:"1f7d9b28b904526f65a6fe60b6623f9e"},"res/raw-assets/41/41d64235-61f4-41e5-95da-3bd5284e3d32.png":{size:568,md5:"51b0e3e523407ebf3a8c0ad5e6811d58"},"res/raw-assets/41/41e2fc4d-19b5-47b6-a98f-bd818ef4e659.png":{size:6610,md5:"e72b1317e924cdd31f08c59e5e26c496"},"res/raw-assets/41/41f485e0-585d-4f72-b367-3f4162f9a1ac.png":{size:10855,md5:"a834a1d21bb9aae057b12947554a1e09"},"res/raw-assets/42/4235abb1-35b7-482c-bd47-c558701ddafc.png":{size:4951,md5:"71d64f9a775624e6978a7b87a5982d95"},"res/raw-assets/42/42444217-2bef-4a77-9511-0a21ddb6e6d2.png":{size:1341,md5:"229aad0b1243d39e6dd77406154bbf16"},"res/raw-assets/42/42f33e11-73bc-4f3c-b79f-66a48f88838d.png":{size:2222,md5:"c2e1a382930d976c5eb8d70c9e5a78bb"},"res/raw-assets/43/4329bf4b-a94d-43d3-8ba3-bf840b4e2daf.png":{size:5877,md5:"a0610b43821f9b71a0ae1cc33d444595"},"res/raw-assets/43/43619cf6-7972-477f-bca3-6719d67ae36b.png":{size:2483,md5:"7132f8a7cbfd447d8cad3f0ee6f7403c"},"res/raw-assets/43/436f17a2-0649-4e39-a4c8-920bfd9c68cc.png":{size:2541,md5:"25103b58bfcdb17e41db5f4d9fb1fd17"},"res/raw-assets/43/43f77bfb-c4fc-4a8e-8619-67336f307de4.png":{size:2560,md5:"3f99911dc097d703338717284c79de73"},"res/raw-assets/44/44104278-fcd6-47e2-8095-5abdd689faa6.png":{size:749,md5:"a3eebc6126d47ea9e8527605b0f8deb4"},"res/raw-assets/44/442d6bc3-aee3-4055-b826-a1b808c781ed.png":{size:1609,md5:"2e47d7cc9b0a049e96748b3f393e80ce"},"res/raw-assets/44/444ec1c2-ca13-46e3-a196-96ba1c166cd0.png":{size:3592,md5:"4e4ea9f9f997e94a8e9984b3fd7fe9af"},"res/raw-assets/44/4474b453-7a64-45ae-adae-0d8e13789beb.png":{size:910,md5:"5f20bb8780b7dd6815372a5826b7f147"},"res/raw-assets/44/448b01b9-74db-43d3-8878-ffbcb36b40f2.png":{size:7099,md5:"f4193c457ce186ee4c36df938e2f4513"},"res/raw-assets/44/44c8563a-672f-4527-aa7b-f8ffb176f152.png":{size:447,md5:"66d328b689066dcbc13843263577c0fb"},"res/raw-assets/45/45253a2d-1705-4481-a8fb-22a676b4d5db.png":{size:1999,md5:"677f4a01cbb5c400d912b762f7a040fa"},"res/raw-assets/45/452a370a-8f37-404d-84f0-ded80f79f03f.png":{size:1497,md5:"8dd7147e2ad9ac5300a5de4eabb16417"},"res/raw-assets/45/459cfe85-574a-4ff5-8c93-6cacd105a5e0.png":{size:3639,md5:"19949638fb7b2cb7a135b22b44caecd6"},"res/raw-assets/45/459e0aaa-4ed7-435a-8322-7a745c7a2543.mp3":{size:19061,md5:"b498df8efa97d57a5da64dcb8ddd1036"},"res/raw-assets/45/45a4d4b4-ef70-44c4-a989-83d54604ed43.png":{size:1470,md5:"c7234401d087f8f63afed2c6a5b4fcf6"},"res/raw-assets/46/469486a1-491d-496e-bb5f-3ab765a0d359.png":{size:11163,md5:"ea826a170ae6d4250b74ed51f3308371"},"res/raw-assets/46/46a0af2f-6f7b-4e94-bcfb-e578329c44d5.webp":{size:716,md5:"ce3f2a746bd2ff6bcbc697c5a6d49121"},"res/raw-assets/47/471a996e-a7b5-4f4d-87fb-43392ade4d28.png":{size:1199,md5:"c21dcd81b4f14a53e32de1f5157c1e6c"},"res/raw-assets/47/472d7fb0-a775-4e7c-9f84-888d8667a95c.png":{size:1687,md5:"3117bd97f6821f7d509a74e9b61cc41e"},"res/raw-assets/48/485a5961-de7a-4761-87e2-93e9fc19a4c6.png":{size:6614,md5:"5def6e76fb2a5b067bfbf7e161d52ede"},"res/raw-assets/48/48690345-34e9-411a-aa21-45070bfa2c73.png":{size:2559,md5:"4aae152242de54ce5a126d696bb2556b"},"res/raw-assets/48/48cf30b0-b942-4b7c-a395-51bd6389bf7f.png":{size:30949,md5:"097e307ac0af9e678c17fdc87137b833"},"res/raw-assets/49/490be7be-9978-4451-97cd-4379e9469ea0.png":{size:4438,md5:"9132310422ef0a7b09e1d74ac0147f0e"},"res/raw-assets/49/491f0a4a-bac8-4ab2-a7e1-20598d060322.png":{size:1845,md5:"b3252da843f0264de7d1d11aab9ea280"},"res/raw-assets/49/494ca774-364d-4cb6-9a6e-32c7fe722a75.png":{size:1700,md5:"cb95092c5e98932e05cc3bd85c814b3b"},"res/raw-assets/49/49c51648-db89-4e02-8604-d78f1611e1b3.png":{size:956,md5:"3888a71070140f9f2ae6615e11df9b64"},"res/raw-assets/49/49e50621-3492-47a1-9625-b878c5a5436e.png":{size:7332,md5:"381bb9b35d9ec7b59f5da48ccebd587e"},"res/raw-assets/49/49e8eaab-d496-4f7b-9200-7cc273935eb6.png":{size:1223,md5:"b8b2ec6add7ad8e65df51e9e7e8d098a"},"res/raw-assets/49/49eae3b3-4fe1-424d-b5b7-e48c2ec4b621.jpg":{size:99360,md5:"3148ea987dcd797ffa379944257b287c"},"res/raw-assets/49/49ec8ba2-07ac-48d0-9523-6896d23ca2fc.png":{size:630,md5:"f72948ef5e61cf191c44b8b89ac39f66"},"res/raw-assets/4a/4a4ea4ce-a16f-408b-87fd-b740ee71e551.png":{size:147710,md5:"747d117a35e708355404f662186d23db"},"res/raw-assets/4a/4ac92899-d11e-4d2f-855a-8a18a2551281.png":{size:3194,md5:"7ce8bc26c35737d1fa3f64dc5163ff3b"},"res/raw-assets/4a/4ad4799c-fb30-49b7-854c-55ec2c7ca7fc.png":{size:1249,md5:"e8ea2611268842fae4237d90cf6dcd15"},"res/raw-assets/4b/4b0b2d17-a617-4934-9685-f1424b3aa1f9.png":{size:5474,md5:"949be26439c35ccb04c76ba5c796174d"},"res/raw-assets/4b/4b96cd70-f835-46d4-80aa-9a4e1b107f7e.png":{size:4516,md5:"28833bd1932840f15d58c73f668220b4"},"res/raw-assets/4b/4bb0ba1a-80ac-480b-899e-550e796007ad.png":{size:9844,md5:"02bc01ee40729762f93c5809c1129220"},"res/raw-assets/4b/4bd0930c-4fdd-47ae-8823-447e73438ad2.png":{size:5048,md5:"7995e020176beab891202c4296f19a0f"},"res/raw-assets/4b/4bd977db-6cf5-40bb-8251-c88232f91e43.png":{size:167,md5:"ad86330318b1e717d271cad4e243f7cc"},"res/raw-assets/4c/4c1ebec1-3660-4aeb-99c5-efa71baff1da.png":{size:1206,md5:"dcdb31234e20e43f4f2a1d51168879be"},"res/raw-assets/4c/4c6c4134-5387-4019-a60c-5401417b82d5.png":{size:2404,md5:"02692ff0138c235b18b92ebcb20017da"},"res/raw-assets/4c/4c6c5dfa-f782-42a4-a03b-2aae7198a632.png":{size:5648,md5:"b317932065718826b57e1eeed0c58177"},"res/raw-assets/4c/4c783bd7-adb7-4ed9-957d-ea8b04c96ebe.png":{size:1492,md5:"431ab51df22ff7583bc4f7559bebc65b"},"res/raw-assets/4c/4c9f212b-b5ca-465d-8f00-e145cd0f0872.png":{size:1215,md5:"8a0b643b404a343466dff209b721fc11"},"res/raw-assets/4c/4cf8eaa7-b333-49f3-becc-9dc4a7cfb236.png":{size:1200,md5:"16e0b0f9815c92bd478ad0ada01f6c6f"},"res/raw-assets/4d/4d145598-2395-440a-a539-792494489a87.png":{size:4075,md5:"bc27374a4654f80b882e286fd27fc434"},"res/raw-assets/4d/4d32abf1-f9a5-4e53-899f-d7dee1f822c6.png":{size:647,md5:"09f0435b9c6b3661d59cb4939c0413b5"},"res/raw-assets/4d/4d4a77b3-5b08-445a-863b-c375f5264260.png":{size:6940,md5:"8ba1be90d66223a3e475400944ec496e"},"res/raw-assets/4d/4d516692-2980-4a47-8b85-d0262092551f.png":{size:6891,md5:"13c22cb68a90a2c97f4abdd439e2844f"},"res/raw-assets/4e/4e21a716-b4bd-4036-977c-7e577be8e29e.png":{size:1621,md5:"7d1e53898c8e6a28e6d4a4b19edd1ac3"},"res/raw-assets/4e/4e9cb6c8-51d0-48b2-ae36-ea21dd5453bf.png":{size:1866,md5:"db41c6bee90844d58d9c4ed79ce0660d"},"res/raw-assets/4f/4f38e812-e610-432a-b184-24cc9b86c8cc.png":{size:2266,md5:"d4c2b97240fda8137d098a0a9e5ccf80"},"res/raw-assets/4f/4f5bdf0b-e6e4-433f-bf31-5dc269a170c0.png":{size:467,md5:"ea9c9fc19d1339c5b527a8ef658f9b4b"},"res/raw-assets/4f/4f6f0dd8-5238-46b2-b762-9e7aacfea58e.png":{size:7310,md5:"bb6512cfe69f1537cce2e86a9a68deb2"},"res/raw-assets/4f/4fb227f4-34d1-49f5-8276-05d047886895.png":{size:2639,md5:"151d0fb3f9c94af07f5d48af0a071e85"},"res/raw-assets/4f/4ff2d1e3-9ffe-4144-99bf-c2cbb4d2eef6.png":{size:585,md5:"53f3e84b18ac8867b09d830a4d3ec2af"},"res/raw-assets/50/5026c5c9-adb3-4820-90c1-1431df1c014b.png":{size:3061,md5:"a5c51914b3441e17580bf096c9df1bbe"},"res/raw-assets/50/503a17f9-5948-4cbb-832c-f14ed84d6289.png":{size:3965,md5:"b497deb630176c58fc03908c55979543"},"res/raw-assets/50/50725e91-627c-42c5-a421-fa2a02ff4f16.png":{size:2814,md5:"740ed10f261d544dfb5ff93b5a716056"},"res/raw-assets/50/508d300a-cb32-4a51-88d4-640bfea267bf.png":{size:3067,md5:"8c94761fefda0c0f46073846722ade51"},"res/raw-assets/50/50942f8b-e7e9-4ba3-bd84-24a0ede1d890.png":{size:2127,md5:"46b07cd15a6c61d6b7d0f4276f8c854e"},"res/raw-assets/50/50ae26d5-c075-4344-9baf-f229c47bd69e.png":{size:37361,md5:"c9efa46229c394f11a44e0b3a8607a4f"},"res/raw-assets/51/512f3c29-fe6d-4414-89bd-24e2be942dad.png":{size:1667,md5:"ba3bc9f427243af2f6821d440b6bdab9"},"res/raw-assets/51/518a0460-a459-48a2-8ac3-23333af3fcfd.png":{size:7819,md5:"219678367093dbdeb2cf957c436b3c95"},"res/raw-assets/52/52413f5f-f8aa-4447-96a7-6cda9d588388.png":{size:4997,md5:"ae26287b6afbb2502f8677f78f3006e2"},"res/raw-assets/52/5270b924-9fa5-4f0e-8ed4-0de4e7527a85.png":{size:7232,md5:"ece7d8971a31262e4ab3eda8109dc947"},"res/raw-assets/52/529598ed-301d-47a0-adf7-5ebd70c01b0e.png":{size:12484,md5:"88723346d8253efca1a4b31777409dbd"},"res/raw-assets/52/52e9f613-d196-4961-885e-1133b94038f6.png":{size:1214,md5:"284bc720df33d12b9d705f980afad0d9"},"res/raw-assets/52/52eb2ae8-4100-41bf-809d-8612551b9abc.png":{size:19805,md5:"28423cd5d267ecdad52545e5d54a9488"},"res/raw-assets/52/52ed4a0b-4396-4864-9e24-2279097570d4.png":{size:4691,md5:"f5fc0442f8e13f73d71262ef233a6466"},"res/raw-assets/52/52fbb90d-7d2b-4458-8b6c-ae659217bee2.png":{size:2770,md5:"e94a4b0ab3663d1c713404a6584485c9"},"res/raw-assets/53/531ccfb1-001d-42f2-b360-1f084655b4ec.png":{size:6211,md5:"b2a1f48d9fc040695b4dee2673fa99c5"},"res/raw-assets/53/533815c3-f523-4545-9d84-fc8b748ce5fb.png":{size:6420,md5:"62b0e76a3a85df24589f7dbc60ea46bc"},"res/raw-assets/53/538543b1-7014-48b9-b5e7-8cdc0dc9fe18.wav":{size:74218,md5:"8e0aff49ed1c05609cdc0ca1750c0cd4"},"res/raw-assets/53/53a1be68-7cec-4da7-a893-fcc5183d7a2f.png":{size:2303,md5:"13c5464e9eda581b4077336bc6f86821"},"res/raw-assets/53/53b45c83-f988-4f03-aaa1-d30ec4d4ac75.png":{size:4270,md5:"d40a541e32ac873e928511e58c68aa32"},"res/raw-assets/53/53ceab61-af60-48b4-bb54-fda03000dcc2.png":{size:6041,md5:"2218bdfb83d758d0db38e1de10552211"},"res/raw-assets/53/53dc428e-e842-4028-b5b0-d4bd571c1cef.png":{size:2054,md5:"ce4e20e5044e0d89b81b0ebf0e58c8a2"},"res/raw-assets/54/54004b43-375b-44fa-81fc-52dc793912ee.png":{size:745,md5:"7c623b498de50f1f23b1ad5fb832e369"},"res/raw-assets/54/5407c5f5-c446-44f0-af9e-467b3906d4c7.png":{size:2134,md5:"b6315f73dd7fff949372a36ae9eae442"},"res/raw-assets/54/5418f4a4-aa2b-4d33-a999-f4df5376b053.jpg":{size:252320,md5:"d8a9dca43f7fe816f7011515a35c6286"},"res/raw-assets/54/5419131d-ca9a-46d3-98ba-118125d73570.png":{size:1151,md5:"80c565e43d367fa7a20f8b5990bd70c7"},"res/raw-assets/54/545207db-fb94-4d47-857f-424feed65399.png":{size:2403,md5:"4fc9be0096e2dccd3a894f94bd83edc1"},"res/raw-assets/54/5474a581-e0e8-44b7-bf3d-246a62dc952f.png":{size:3841,md5:"c1d62d876982eab95dc46f0079bd1ca8"},"res/raw-assets/54/54ef375d-8ff7-4643-852e-0903cb4877e0.png":{size:1051,md5:"efce9d456f97c93c3ffd6dcf2422e97f"},"res/raw-assets/54/54f9d883-0254-4e9a-a28c-32dc90c80f49.png":{size:1636,md5:"520bf496ffe27da7c5fc37538543d1d2"},"res/raw-assets/55/5546822c-e699-4769-bcde-fad503dbaafc.png":{size:4280,md5:"22487b162104dedc56e718c2cae75545"},"res/raw-assets/55/555dee64-db7c-4980-8c6c-a95d998bf74e.jpeg":{size:93780,md5:"9797feba99d956aa4484ed825367dc06"},"res/raw-assets/55/5597d3cb-925a-4d5b-87df-669eb9d320a0.png":{size:4036,md5:"12ae23d835ccb242c56a23113061da90"},"res/raw-assets/55/55e1a346-3322-4172-8a27-9f85353ff0c2.png":{size:1148,md5:"436e6547d4c69e2c747a39660aa7f391"},"res/raw-assets/55/55f5a216-e752-487c-9bda-e1c4022cbc94.png":{size:3925,md5:"db3b6bf2e8456f99ba3fdc27a44b6eb4"},"res/raw-assets/56/56279899-c4e1-461a-8d6b-31729ded6651.png":{size:1399,md5:"fdc4b8244fb62dea2cfacb473db35d57"},"res/raw-assets/56/565645f5-c276-4c26-a55c-32aa4fe220ac.png":{size:2015,md5:"0f02ba21f1df35603401f30251085ac4"},"res/raw-assets/56/567dcd80-8bf4-4535-8a5a-313f1caf078a.png":{size:1675,md5:"5f1d92d4416374a0500f336771a68366"},"res/raw-assets/56/56d4bdb5-b37a-469e-ba87-90ed2a3e5646.png":{size:14127,md5:"14bb4c226adb9fdef1d6688c70535dee"},"res/raw-assets/56/56ee526f-fb2e-45b4-9de8-7bd94129be5b.png":{size:4074,md5:"46d96a384924da30eb77bfe403dd32aa"},"res/raw-assets/57/573e5242-866d-488b-9648-ca256ca5adeb.png":{size:12849,md5:"ccf2ff53da2e576ce17f5939f0fd4a06"},"res/raw-assets/57/5786ffd6-a622-48fb-9f15-ac46f6199b1c.png":{size:829,md5:"67382b0f4effb0a3857491a8228ac832"},"res/raw-assets/58/5832464e-3853-4f5d-b36a-9a7d9e55ff82.png":{size:14598,md5:"4fddc509b0fffe0cfba19283c45c1e43"},"res/raw-assets/58/588c79ab-43a1-46a9-9239-a75af15e6cdd.png":{size:14895,md5:"259fd5e01641e03b38aa7d61a4ccf689"},"res/raw-assets/58/588d956d-f051-4563-af31-19dd0a10fbce.png":{size:25996,md5:"47dec9ce7e8adfcfa0048251db4a9cf7"},"res/raw-assets/58/58c6fd8b-6f2a-4e6d-a5c9-d484416fc1d3.png":{size:1662,md5:"497cc1a10510e00e7d0160f0f3697738"},"res/raw-assets/58/58f18f11-9a12-4477-ad03-df012593ccf8.png":{size:2440,md5:"3efd7397c09c845e353dd444cd7bb9a9"},"res/raw-assets/59/590856d5-03b6-4f5d-91e7-916269b55854.png":{size:3316,md5:"17a01746504e0452cc72a63e8e94a575"},"res/raw-assets/59/590b5983-1d6e-4dda-8b79-e8fd91eb3b1b.png":{size:457,md5:"4b4656b0d26fd9749e3d05786ae771be"},"res/raw-assets/59/594bd4e2-3d76-4ae0-908f-8acdd3018222.png":{size:1867,md5:"31f1109009592f73ffcb26a9cbc4e258"},"res/raw-assets/5a/5a07af62-3f91-4540-adf6-153fe00b66ca.png":{size:2641,md5:"5f9c54a1b2c22022ea8196f060258bcb"},"res/raw-assets/5a/5a421173-caae-4fb6-ba64-afbebedb101b.png":{size:4048,md5:"45fca1e9458663e56912a3b52fa41556"},"res/raw-assets/5a/5a44d5bc-291c-4d1c-bdff-fb4d3223d87d.png":{size:20279,md5:"eac5b6ac64555479493f83fe7397985e"},"res/raw-assets/5a/5a6be66b-9b84-4cf4-ae35-32dadd130ca2.png":{size:1557,md5:"c2c06681c46f62ec7b9a859df7d352fc"},"res/raw-assets/5a/5a79bc61-e96d-4535-92ce-4aae761b94b8.png":{size:1367,md5:"a3d0205c8346611e7a9e0c55db7238b6"},"res/raw-assets/5b/5b2d2ba7-69d0-4c3c-8e0e-1b6d3047af85.png":{size:679,md5:"5c1466436df1a37e17300992603b888c"},"res/raw-assets/5b/5b2ea7eb-455f-42b6-bb7c-1606b54cde8d.png":{size:1308,md5:"51174dc43d22ff85e011950f2f909590"},"res/raw-assets/5b/5b32149d-1ef6-4ae2-961a-8ea683917f37.png":{size:541,md5:"af30a467637da10d8ca155915cc6526b"},"res/raw-assets/5b/5b9ceb2e-c91d-49a3-b706-96044e562746.png":{size:548,md5:"07fe6ddbd2fce0694975529b6eca78ef"},"res/raw-assets/5b/5ba39902-704a-4c4f-aa74-6b8ce2565e09.png":{size:1359,md5:"a7eed76dd9fcc99cfc033368df3544b3"},"res/raw-assets/5b/5ba576fe-fc56-44a1-a6a0-2bc6d5336d89.png":{size:845,md5:"a286ab186531f90afd992606ae41285f"},"res/raw-assets/5c/5c809c4d-f9af-451e-a5cd-185b0822e9f1.jpg":{size:95842,md5:"2824f1f63f46150e95905a5919ad3e75"},"res/raw-assets/5d/5d2048c7-9812-47d5-99f7-f676456beed7.png":{size:1423,md5:"669189e3396dfc4506d45aba40db0a96"},"res/raw-assets/5d/5d205486-0937-4c68-abb1-cbbd5bd9d3cf.png":{size:693,md5:"1136f9b41ad72c19472e25d5198614df"},"res/raw-assets/5d/5d270b3b-2a83-4f4e-aeb2-d10be54db4bc.png":{size:7986,md5:"512d9f00fd31b993776be95ef9d658cb"},"res/raw-assets/5d/5d9778b4-9997-4693-a0f1-d993850ce6f6.png":{size:1876,md5:"1932f3e53885ae5e435dd20d6abc645d"},"res/raw-assets/5d/5da167b7-2669-4e26-8147-894c31f96d3a.png":{size:20960,md5:"205527169ff6d9a05044153b1d0ed223"},"res/raw-assets/5e/5e17969e-a68c-47c9-b459-3052386879cd.png":{size:552,md5:"f43cb49911c59e7e41c3c5ae4a96cde8"},"res/raw-assets/5e/5e40f669-850e-4c34-ba89-a50a98e57fab.png":{size:1177,md5:"900d6a58198629dfc39c5b4ed7d84447"},"res/raw-assets/5e/5e4aecd6-c0d8-4737-b47e-5a459cd948d7.png":{size:4733,md5:"2050379575bcf37697e4f6a42107bb73"},"res/raw-assets/5f/5f2759bb-cd8f-4b3c-98cd-d006d9552cc4.png":{size:9475,md5:"4297af894abdc5ab3f6c04e00e52854e"},"res/raw-assets/5f/5f2de040-4096-43d5-8459-c7bd831b6db7.png":{size:399,md5:"4241f6180640b23d8d4878bc89c15266"},"res/raw-assets/5f/5f37c20f-b5f8-4623-aa2a-5d4e5eb39d35.png":{size:2476,md5:"6e5c211d9a0eb3455fc6e560454230f7"},"res/raw-assets/5f/5f43670a-e826-485a-9667-a79499d2fe36.png":{size:3198,md5:"7a25b5329110b6ec31c30386f58a4647"},"res/raw-assets/5f/5f92801d-9e56-4ebf-81b0-c889d4158711.png":{size:3108,md5:"6ac9dea6db05cc04434e5b44e31ba60b"},"res/raw-assets/5f/5fc18621-47f4-4efe-b195-8cc6506f0cf6.mp3":{size:19061,md5:"b498df8efa97d57a5da64dcb8ddd1036"},"res/raw-assets/5f/5feedd62-754c-47aa-af13-8b554ccfd15a.png":{size:2489,md5:"8511fb9c3cb7bd02cc7b991638261c21"},"res/raw-assets/60/600c598d-2d53-488f-80c7-46e33bd9cf67.png":{size:4333,md5:"f30e1504b391494bc5743210ea6d13de"},"res/raw-assets/60/603cb517-53e1-4478-9853-855c31b82bd7.png":{size:8449,md5:"1f08f892747f77ffd3bc9c26aee15e81"},"res/raw-assets/60/605c8696-4316-4fdf-9b31-41ec3c2b0415.png":{size:98949,md5:"24317d4f345b9a11335d519bc146156c"},"res/raw-assets/60/6080feff-4e79-4cc1-9e21-bafe66e124fc.png":{size:457,md5:"1f546f6cb392674ce81d8f9d90738492"},"res/raw-assets/60/60fb2eb3-9707-411c-b3cb-7ac27978c79e.png":{size:407,md5:"414390c9db4e3c74413584ac9d9ea588"},"res/raw-assets/61/615f37a0-3e6b-419b-8146-1f8a8a51669e.png":{size:2088,md5:"f74dd03bc208d2835ee921899d577ddd"},"res/raw-assets/61/617323dd-11f4-4dd3-8eec-0caf6b3b45b9.png":{size:1187,md5:"6d707a7a357fe9eb17dce608a8255e7d"},"res/raw-assets/61/618e280d-8653-4843-af61-5fdc066c7248.png":{size:839,md5:"79e7c6b2277c3cf91388cf52588fdd13"},"res/raw-assets/61/61d0148d-d181-474c-b352-097b2680eb42.png":{size:1832,md5:"7a74026fd331dea7dfca59508f683208"},"res/raw-assets/61/61e181c4-4ade-4e04-ae37-b186fed953dd.png":{size:1268,md5:"2c7b1efec68ecc8ac368d2eba8e9a047"},"res/raw-assets/62/6202b10f-f6bf-4b72-8f28-abd7aaa34d9c.png":{size:1649,md5:"64efcdde484f36812fc5025497e5f5d4"},"res/raw-assets/62/622f3656-09af-47b1-9bae-0a255676662b.png":{size:2734,md5:"dc9f519e031e730a395091698b0c126f"},"res/raw-assets/62/623cf946-ce20-4788-a28e-1c8641859123.png":{size:311,md5:"f7cdd372b11762a0116a9a3782befe25"},"res/raw-assets/63/634e7ea2-f6c1-481d-9dc7-1dc8528e23a4.png":{size:5022,md5:"969265c96d2e3ec854f8121fd013f759"},"res/raw-assets/63/63614edb-ab14-45ed-8593-609954e09aea.png":{size:3171,md5:"284f688551809a2b0e9da603574bf542"},"res/raw-assets/63/63a95730-f92e-4aa7-811e-fa61619449cf.png":{size:2097,md5:"701477818ede1573abcb02afbf0466c6"},"res/raw-assets/63/63ad3244-9ea5-4608-9de1-eb82b8336410.png":{size:704,md5:"d94218dc9564da810b53a8c8f199b956"},"res/raw-assets/63/63f491dd-31fb-4dad-b8d6-b5b785bd1e3c.png":{size:4150,md5:"371aaaac208ab5ef1cf22686d077befa"},"res/raw-assets/63/63f9064c-882c-4d25-b045-da02caf24a09.png":{size:982,md5:"b31b07d969811c98b42ceba071f41268"},"res/raw-assets/64/64169e03-cedc-490f-9b63-209a5a68e000.png":{size:10544,md5:"f4ef322f972d50581a000a8b50a8dbcd"},"res/raw-assets/64/643e47c5-daf9-44b6-a68a-b7ca79b5645d.png":{size:6800,md5:"3e01a902ddfc488cc905a67157bc4a2b"},"res/raw-assets/64/644b47d1-ba97-4960-9d2e-eace840337eb.png":{size:2301,md5:"715a981ac9fc5aef0fd75ad9fc60fe76"},"res/raw-assets/65/655389ec-5a47-463b-a79b-d0b767b8e255.png":{size:19203,md5:"702244cca926390f8eb006f8bfb85a7a"},"res/raw-assets/65/65689146-8f01-47a2-a1fb-166922c08582.png":{size:1907,md5:"ead25b2e1abf74675e485dcda3b35b11"},"res/raw-assets/65/659d19f7-5b7a-45ce-aca6-fa2a85d733a8.png":{size:2548,md5:"cb024c8f7f1352cc40e8141529831312"},"res/raw-assets/65/65ca5a95-b2c8-4d72-b754-edd99ceeadb3.png":{size:487,md5:"760a78a855ec503340ac3c1b3ed2c6bb"},"res/raw-assets/66/66099bac-a5e0-4829-a369-38c31e95f5d2.png":{size:2809,md5:"6bdb2e7ec5e0281d7fd250b6f187113b"},"res/raw-assets/66/661d7f45-26f4-418b-be45-18176a4cca30.png":{size:3449,md5:"c54c8489432aebf8591ec245fdcd9073"},"res/raw-assets/66/6632f17b-effa-4d35-98e5-1b6ffab84e4c.png":{size:1525,md5:"92a70301bec04f855f79de5568a18d55"},"res/raw-assets/66/664ed063-a5aa-4a39-a595-95cd40b09b3f.png":{size:10078,md5:"ea1403720adeadc60664f46414863c4b"},"res/raw-assets/66/668dcdae-899b-4b5e-acb8-21713224c627.png":{size:5083,md5:"5179efe3cee4937f9cd6ae50b21f7dba"},"res/raw-assets/66/66b3e33b-93f3-48df-84e8-d2e6a4228499.png":{size:8212,md5:"7be3fe61d0bb57f02392afbd4f8ad144"},"res/raw-assets/66/66c1c7db-b251-4ba1-a338-27b300368dd5.png":{size:4432,md5:"cd221a5557ec3c0d100c076e734d49a5"},"res/raw-assets/66/66e711ca-3e11-43ea-a501-162df54f780f.png":{size:2786,md5:"c7df0fb61de2664b08c14f55aeaee011"},"res/raw-assets/67/674ead54-d6d4-4b0d-afbb-55e2abece9ae.png":{size:4480,md5:"2969c4212b5ee2b58c3fdfa98334de1c"},"res/raw-assets/67/67b1aa02-98b6-498f-b38f-e244337ebd73.png":{size:2778,md5:"1002452a83c45a046425a7a10b201ac8"},"res/raw-assets/68/684fd8a4-b270-4550-b017-4b4fa3c9d702.png":{size:1650,md5:"c0fb7eceb24a5ebc0df34921851765d7"},"res/raw-assets/68/686d46d0-fc97-4225-ba10-03e979ce1ddb.png":{size:905,md5:"ec6e1a46c68d1477c5a7c60bc9f85321"},"res/raw-assets/68/68a28bec-8658-4599-ba09-0b791eb31683.png":{size:1738,md5:"8cdc57f126506f640bc525c4895e42c3"},"res/raw-assets/68/68abd58a-6ddf-4305-9b52-82b05c467c4a.png":{size:3012,md5:"f197600fff7a1a17f4c6772c1c7da2d1"},"res/raw-assets/69/6913df3c-9593-491b-abb9-24bb7c30c81f.png":{size:866,md5:"2a4d9ec3ff2cc4674df1d1de4b980547"},"res/raw-assets/69/6921e69a-d91b-4b8c-9ba1-0d61510d92b2.png":{size:6709,md5:"8cb9982425a23db2d1cb1f9e0f682fd2"},"res/raw-assets/69/69383e2b-0613-4b5c-bd4c-c190d3d22217.png":{size:1456,md5:"8f8046c5c62a846611784fafe3fd8c8f"},"res/raw-assets/69/6984efd1-d734-47a2-b80b-a2ecd401e25f.png":{size:614,md5:"a520e553d094e8caeb286e590bd5e1fa"},"res/raw-assets/69/69c229a5-89df-4964-9a26-eaae67655542.png":{size:1516,md5:"ff925befece062a0d5011f91a6f5d2eb"},"res/raw-assets/69/69ddd6f9-3ab6-4084-b0ea-c1f7fa9eba11.png":{size:1964,md5:"4df10970d6f130b9f7ad27b1c56f3fde"},"res/raw-assets/69/69e56d5e-5078-47fc-a0a9-cf125f399f8a.png":{size:715,md5:"ef7d46f5f114a1ae96e8acefead9e7df"},"res/raw-assets/69/69fabc46-2287-4bbf-939c-f87a697f77fc.png":{size:2063,md5:"6db32456ae63bc8f8d7ecd5aeaecb6a1"},"res/raw-assets/6a/6ae7b7f4-199e-41c8-b587-e64a379aa508.png":{size:1783,md5:"75198df00f677c1274ed4a3d88f66841"},"res/raw-assets/6a/6aec2418-4420-4e90-83d1-dce302be0aaa.png":{size:603,md5:"07a53433c0c0cb1251124e2e0e3e333f"},"res/raw-assets/6a/6af60dcb-3978-4bfd-afb6-82df6515c28a.png":{size:6527,md5:"f7b41ea22b94f5bba12a0f48f60f6916"},"res/raw-assets/6b/6b1cfc79-3e0e-4832-90f0-1214112d712a.png":{size:6233,md5:"4616e3ea5b7b935adc8a70e1af037c4b"},"res/raw-assets/6b/6b2d8f9f-3ac2-470e-88bc-43e9885b7798.png":{size:696,md5:"8357da7b090c90b4918a9d2c31e88cf5"},"res/raw-assets/6b/6b6891ea-98ff-453a-8824-fb0d2613b9fd.png":{size:977,md5:"19ff490cfa955a99240231a6e16a10a8"},"res/raw-assets/6b/6bc9be16-f78c-4e11-a506-4d2300cf15a5.png":{size:488,md5:"2339452f2251197501a675bb665ad740"},"res/raw-assets/6c/6c1ff0d4-9699-4e97-acf9-cd0847a13d25.png":{size:1763,md5:"bdbc217e1c154153a5f6e5cb9545261a"},"res/raw-assets/6c/6c3f1298-675b-4cdb-815b-c38a8fe820a5.png":{size:1500,md5:"008e6d962aeae49b3ea6fd6bb40f8337"},"res/raw-assets/6c/6c5c7e39-c59b-46d6-bda3-28bc58d5448e.jpg":{size:28656,md5:"480fcb8cb9542338fdd175d2b5dc7841"},"res/raw-assets/6c/6c9330b8-1487-4231-b12b-7d4aadedc574.png":{size:560,md5:"8f2c803c50f9ee7744826a6535fbbeea"},"res/raw-assets/6c/6c95ff17-a2fb-48b8-806a-423764edbfef.png":{size:14152,md5:"5c88c6ae521bc1d62680eead60080f70"},"res/raw-assets/6c/6cfa1057-11ae-4681-909d-c8a2edd809c6.png":{size:515,md5:"67537d3936ac5839814456e51b455a51"},"res/raw-assets/6d/6d268bde-cdb6-40e2-95b7-5eb594614942.png":{size:2360,md5:"f96f364160decf80d37d405134c1539a"},"res/raw-assets/6d/6d3d6ab9-5e78-4eed-8695-9b12bf147606.png":{size:2665,md5:"f2cfbfca2a91e0f9b70e1c0fe9cccf00"},"res/raw-assets/6d/6d4bc960-aae8-4fc7-b5c8-4f2a6f2bfd59.png":{size:1579,md5:"f5ea6cca6b8c0f1657208b9187c19a8d"},"res/raw-assets/6d/6d765391-db77-4902-a9d4-21f5f7a02d6c.png":{size:1198,md5:"51e49fabff53ace3d35a4ea534725c11"},"res/raw-assets/6d/6d7ae549-dffb-4731-a15f-085efa67123c.png":{size:678,md5:"a8454445a0f2b7fd2fa536f84b21f83e"},"res/raw-assets/6d/6d85d01c-fba4-4fe9-96b2-ac7eac5739b5.png":{size:1307,md5:"cfce600d398af0b3ff584dd01ddb6d69"},"res/raw-assets/6e/6e056173-d285-473c-b206-40a7fff5386e.png":{size:1633,md5:"6d3cf6c6ee7dbfbab63c2bbd2d135ad5"},"res/raw-assets/6e/6e551271-2163-4d63-ba26-037271db3153.png":{size:7066,md5:"5f7a1178dbb2f3972251796f0723f4d5"},"res/raw-assets/6e/6e7bb018-8ec8-4231-a33b-585247d05abb.png":{size:1147,md5:"84393ccea7ca04902428a902773c9761"},"res/raw-assets/6e/6ec9fd19-0644-4fba-aece-01da2a0b91d1.png":{size:852,md5:"20d4b065903176a8728408473d93bb46"},"res/raw-assets/6f/6f0543bb-5cd2-4058-9ab7-a1b25ecdee98.png":{size:14075,md5:"17618cedfb14d82fc983222e63e40ce5"},"res/raw-assets/6f/6f177dc0-74b6-4a1c-a6d5-3a527e2cfe93.png":{size:2456,md5:"7de4593fb9bd694a574e62665d6c71ef"},"res/raw-assets/6f/6f3cae80-fa2d-4ec1-ba50-9766f51ece8f.png":{size:2799,md5:"8f889797619dd63b5d5d4ffe3494d188"},"res/raw-assets/6f/6f50de20-eedd-46d2-bba1-d90e8ff70e86.png":{size:2048,md5:"ff2511a42a5b20990b16aa3406ba4a90"},"res/raw-assets/70/7089960a-2193-46e4-9756-99975182fc2d.png":{size:2222,md5:"8730b4f125ba7e630a710ac2a36649b1"},"res/raw-assets/71/710dd78d-7a15-4fa3-b5d2-2303ec12d651.png":{size:2253,md5:"68ee678cfdd79e82229550f36221cf0c"},"res/raw-assets/71/71561142-4c83-4933-afca-cb7a17f67053.png":{size:1050,md5:"c06a93f5f1a8a1c6edc4fd8b52e96cbf"},"res/raw-assets/71/71b7356c-32a3-45be-bd1c-6e2cc9ab20c1.png":{size:11473,md5:"13b1c4cd89d24de7ec2897390f401774"},"res/raw-assets/71/71e7cdb2-916d-4a04-9356-bb53134ba059.png":{size:649,md5:"10d43b3fef56dbe39e48b801723fa8d7"},"res/raw-assets/72/7279fe0e-bd94-43d5-81c4-bd3d4b7b4d27.png":{size:11543,md5:"d67076fd919bdc82fb0fe56a6d2ae6a2"},"res/raw-assets/72/728074a1-34d9-431f-8b8e-d011718e9616.png":{size:514,md5:"b556594d8a6b45adb8e6c7a6ffb07e52"},"res/raw-assets/72/7283a043-d6ea-4279-8088-b6dd1187eea0.png":{size:51150,md5:"f2b12856009c594ff100b628619f0979"},"res/raw-assets/72/72a67fc7-9c52-4a62-ae56-fd8d6837742d.png":{size:9496,md5:"3035848e34b2cc530e4dd1cf670de6e2"},"res/raw-assets/72/72c1e39f-f8cd-4030-8625-5b0cb9d56dc8.png":{size:546,md5:"aef493819ea43fc1a26de8261c5656c6"},"res/raw-assets/72/72cc3ec9-2040-4575-a9ed-05906ac16543.png":{size:628,md5:"489827b4861ccb7ab98e0727b34ba79a"},"res/raw-assets/72/72e66d7a-9ce5-4e93-81b8-79a12e80d02e.png":{size:15253,md5:"1f6e024c07dd0ccc7eb7bc4c4aa8111b"},"res/raw-assets/72/72eddc32-2535-4607-bd3c-a00774110744.png":{size:715,md5:"ed445c5f8f55206bd1ef1b1f1521b081"},"res/raw-assets/72/72f69812-254a-458d-aec7-10a8bf1aebd1.png":{size:1553,md5:"1e6484c8f0005b384b3bfb02e920900e"},"res/raw-assets/73/7336c51c-b48e-4858-a623-c32d543d613e.png":{size:7701,md5:"311e112f86725a271a18640d0c2fdd74"},"res/raw-assets/73/734c867f-a13d-48ad-8151-49eaf292965c.png":{size:4132,md5:"947d046c439968c9ca974f421a7020ff"},"res/raw-assets/73/73656442-1b5a-4595-b70e-cc17d6cd431d.png":{size:5087,md5:"2d05441ecb9f28eef729afd561912cc6"},"res/raw-assets/73/73a35dc9-a17c-4cbf-a05b-11265d6539e4.png":{size:29194,md5:"adeee313ec1434fffe31c0ba4056dce7"},"res/raw-assets/73/73b16bf6-c787-464c-8bc2-323bd52f6485.png":{size:2399,md5:"38cbd4baefb581f0db7137382a236710"},"res/raw-assets/73/73f3164b-3ef2-4734-8f11-466eee34518d.png":{size:1703,md5:"22713f5656d005e58da194c29d6cba24"},"res/raw-assets/74/74167eb0-0e57-4ffe-a47c-63c0ae6a7a6c.png":{size:2977,md5:"e30190bfbcd2f4ca22348205ae09526a"},"res/raw-assets/74/7423184d-40d6-483d-a6e0-7142b40ea751.png":{size:3032,md5:"077e6d285eb4e830cc5285aa96226cb1"},"res/raw-assets/74/7453942f-5ac7-4de1-9794-44482cc0a91f.png":{size:11707,md5:"77fa79d31dd2558deb0f726b423f4526"},"res/raw-assets/74/746f6a8b-f21e-4d44-82ce-7c9346fc3aec.png":{size:3320,md5:"6f08302b87b83a6d6d5cb9e0cf89a613"},"res/raw-assets/75/759dd56f-8368-4223-9d6b-bca1a7afec83.png":{size:2309,md5:"3010d3e05b0bfcd7ca01806fd2071ddd"},"res/raw-assets/75/759f094c-fcc1-41f2-b951-875cc0036f77.png":{size:2755,md5:"fb7440981e9be90ec283c03e3a224090"},"res/raw-assets/75/75cceddb-de51-4c6f-9f0b-647d0cdac41c.png":{size:423,md5:"2eedb8c2e9d04c66f3d16f20ef05f3d9"},"res/raw-assets/75/75e2306d-cbcc-4c42-93bc-86dbb3bcd5c4.png":{size:6011,md5:"78b4c99cddc88e85c9e96134a26f5f28"},"res/raw-assets/76/764c8482-ab52-4517-8797-e5ee58af533e.png":{size:693,md5:"43623304955b59ba2de0e93a1e6b2503"},"res/raw-assets/76/7665cab7-9707-4b3b-8b95-ff2689822630.png":{size:1610,md5:"3ce9af89299f72fec4d5a3c8e2ddbb87"},"res/raw-assets/76/766754e2-d6ab-4d30-a4c5-f6d384e75e51.png":{size:2235,md5:"6439206dcecdaf2bda4ca10ca6f37eca"},"res/raw-assets/76/767b21d1-8345-49b6-8a35-a4ec7c4b3cab.png":{size:3586,md5:"ad5cae1687923f51477429e484c94411"},"res/raw-assets/76/76be670c-ac8e-4c43-9581-263bbf43f78b.png":{size:4354,md5:"46fc3b81f7ea0a35ffc71a8a6b521ad1"},"res/raw-assets/76/76f4d862-c6d3-4c3d-85ee-b999e8a6537d.png":{size:34180,md5:"f24c290c95ea7b021488130771ad4869"},"res/raw-assets/77/7714c728-4121-4af6-a4cf-f1f29a601739.png":{size:7189,md5:"afdcd2e2cd1027d029ff7dcda13d2203"},"res/raw-assets/77/77441a3c-0212-42cd-acff-cb3636fe880a.png":{size:1829,md5:"e65bdd457f9609a5b7ceff6c68964cbb"},"res/raw-assets/77/7752d93f-4645-4d64-b147-9da002b9c456.png":{size:8682,md5:"429ecc5cd9c76a6e5ad64f60bb12f73c"},"res/raw-assets/77/775d11e7-e07a-4561-abf0-4891688fd516.png":{size:1184,md5:"73ffdcccb914cfed8533b6fb583f3921"},"res/raw-assets/77/777180b5-ddcd-4f42-9eaf-15621ea35b12.jpeg":{size:96759,md5:"9a04d3a36944a124e386b6c5cba5996c"},"res/raw-assets/77/777f7c0b-eef4-40cc-aedc-e81c73aff6ec.png":{size:1776,md5:"1d0eeb9b6fb6e19479ddca1309361df6"},"res/raw-assets/77/77999c10-8fe7-4e3d-9e68-970e30bddc9d.png":{size:3843,md5:"ad71155ca8d6b083fbb3925734d87e5b"},"res/raw-assets/77/77a0add3-3a01-43d6-93d0-2acb496909a7.png":{size:784,md5:"1cda1adf35dd2ab673e3104051d70ad2"},"res/raw-assets/77/77a6dea8-d735-4ef8-95d3-0168d0cfe2f9.png":{size:936,md5:"fc24a2378ab6926df907a241c524e091"},"res/raw-assets/77/77a7db8e-6654-42dd-9cbd-97634892837d.png":{size:4830,md5:"6bdb38a2c318a549e8d5d5601a239ec6"},"res/raw-assets/77/77e33f28-ecfb-4491-865c-1cf63926fa64.png":{size:7251,md5:"28d1ee6fb8040508b22d2cf52add5f76"},"res/raw-assets/78/781ecff0-234d-4692-94b6-8c73853fee5a.png":{size:37541,md5:"92eadc09636f93b7bd2dccfe318e4ef0"},"res/raw-assets/78/78232c4e-5beb-4afa-ae92-dda667a41e59.png":{size:6237,md5:"e719daa7324edcfa7bb3f5720718333d"},"res/raw-assets/78/7885807b-01bb-46e1-878c-dba3da1e3023.png":{size:3950,md5:"c363750567dc64f7c7382417d6b01b53"},"res/raw-assets/78/78dd432f-0e7f-44e8-af54-8a6208e9a451.png":{size:6855,md5:"2633bef795bb3b7f5f5a692839437253"},"res/raw-assets/79/790716c5-b8c7-424a-814b-c5a9afe1a9b7.png":{size:3167,md5:"ae3c67d1710cee6819a9747dbedd2531"},"res/raw-assets/79/79194aef-b134-4a5b-b1ba-b4f6870a97b1.png":{size:3157,md5:"cafb203ae6926b853abf1dc5ad4700c6"},"res/raw-assets/79/79d11932-996e-484a-8594-23373299078a.png":{size:2228,md5:"d9857c042950ee349f8f232ecf9651d3"},"res/raw-assets/79/79e84cae-0d41-4af0-96af-b3c39e7675c5.png":{size:7100,md5:"5b2527c66bf7ad9cb18c3dafeed4fc3d"},"res/raw-assets/7a/7a1d4154-21d4-4561-8497-14a19626f2f1.png":{size:2824,md5:"1f1439318c6a08d7f205779961c88a40"},"res/raw-assets/7a/7a428b87-1119-4477-a5c8-2cc2dc75ac35.png":{size:1546,md5:"69ec43a3ae972ab3ca4b111247e0a365"},"res/raw-assets/7a/7a7e135c-1796-4857-9753-f5a2d4755109.png":{size:1187,md5:"19b966b760f85832939709fd6f219f00"},"res/raw-assets/7a/7acb85d6-b6c5-49b0-ad4f-49181ee99b3e.png":{size:5953,md5:"8b18ed6d5014e37e619b050301ed6f1f"},"res/raw-assets/7a/7ada901b-90f1-4750-b9ec-d0be3cd4909a.png":{size:31201,md5:"8198eb500326149b55e3863167627453"},"res/raw-assets/7b/7b0ffe45-9976-4be9-a346-b9759553d7ed.png":{size:774,md5:"da0f98635e1e364807676de0a947a500"},"res/raw-assets/7b/7b821f14-f74e-4a82-96d8-e4ee233c340a.png":{size:1234,md5:"cd26281981c64d3df08f8111447efc55"},"res/raw-assets/7b/7bf046fd-b1d3-4f22-8bea-646f106e83aa.png":{size:3209,md5:"91a7f9506c26ae5cbd017666e74b2e5b"},"res/raw-assets/7c/7c514d58-a434-49ae-b863-98dc2322c72b.png":{size:15813,md5:"43f7b4b51c1115074a18d30770e09a12"},"res/raw-assets/7c/7ca8cdb9-ea11-4959-8052-b1eef5bdfafa.png":{size:2706,md5:"c7e9698a6b0dafc3585718a686f4cf53"},"res/raw-assets/7c/7cb6ee97-38cd-489b-b70d-1318590eb108.png":{size:841,md5:"a80a74342510946f815e2c05524fa836"},"res/raw-assets/7c/7ccf3c9e-52c0-4d23-9306-c41dafe6c298.png":{size:1558,md5:"c0d0a82baa8c9a6a10030e1b3f69fdb5"},"res/raw-assets/7d/7d391cf8-cb92-46cf-b97d-fdc3a9a25208.png":{size:13820,md5:"af9aa71ca475df218377bace4573b1ef"},"res/raw-assets/7d/7d54025d-35b4-436e-959e-0cd72b88daad.png":{size:19082,md5:"0198557a2abfa6ef2ed7ed82416d6099"},"res/raw-assets/7d/7d564b8f-dbdf-4740-92ce-d96fa9a2d49c.png":{size:14757,md5:"fff1d3b43ef1ef268cd4ff11c0976528"},"res/raw-assets/7d/7d6602b9-5d9e-4613-abd1-0d542b57c712.png":{size:8606,md5:"a330e2ade90d813b76852ce751aefc72"},"res/raw-assets/7d/7d895a06-82d1-401e-9126-862615bf6411.png":{size:1695,md5:"92d0de7eb6234bc0393dfb2cb766f2af"},"res/raw-assets/7d/7dfc53e4-6e1f-4446-a2ce-828b44e267cd.png":{size:4372,md5:"87d4abdb91fa50d7ff811497403785e4"},"res/raw-assets/7e/7e50fa74-788a-4249-85a8-16e86f5702a5.png":{size:2081,md5:"a5e4233e02edb31b758ea906c55c4b90"},"res/raw-assets/7e/7e55d71a-afba-45f2-8595-6a52881b4d3c.png":{size:1307,md5:"cfce600d398af0b3ff584dd01ddb6d69"},"res/raw-assets/7e/7e7ccc37-bff8-4f79-9be8-f879082746e0.png":{size:2700,md5:"62694dc133e311db16ef9a4452c6a1fc"},"res/raw-assets/7e/7ea33c32-82cd-453c-8299-8041ad5f8670.png":{size:1177,md5:"795b7b757909976acf8cc9fdc2206d43"},"res/raw-assets/7f/7f07e7f9-e894-4de6-ba1c-2e3c6c2f8999.png":{size:514,md5:"ef824faeb7474eb08167db59704833b6"},"res/raw-assets/7f/7f188e12-3584-4785-aec7-ac9c1ca6db80.png":{size:1739,md5:"d5a4a43660d75675929bb86ecc0bc153"},"res/raw-assets/7f/7f6e37fe-0b60-4fbf-a16c-2caccfda7add.png":{size:741,md5:"9e4be6bfb5d5680efd13356926b64574"},"res/raw-assets/7f/7fd5f580-b42a-4468-a087-8e6019b05510.png":{size:6960,md5:"7aa21e5b87d564e734ab6890f69f683c"},"res/raw-assets/7f/7ff2a971-0745-4af3-ac36-38dac307ca5e.png":{size:4415,md5:"f18ee2a19760145c80dea21bdec082a2"},"res/raw-assets/80/800509fb-3598-442e-9b9f-f474569d5c07.png":{size:532,md5:"47214de2a131bbc27a0f520543f396a9"},"res/raw-assets/80/804dcf75-ef2a-4a45-8110-77069200336a.png":{size:3040,md5:"6a3f3f1ef7f68f6a8966a06b028f501f"},"res/raw-assets/80/8050981c-e4a4-4350-97fa-070203121c67.png":{size:2276,md5:"53757701a5d681664c4d150cdc4fbb9a"},"res/raw-assets/80/80c33ee5-fcdb-4ed9-82d9-d1d9a70304e9.png":{size:7963,md5:"fe78d4dd4bee01fac22b2269e6fe41a9"},"res/raw-assets/80/80f34422-adc4-4291-a68d-cb4e36c96bbb.png":{size:15509,md5:"51a9e8d3bb9a9e045ac194bf9fec9088"},"res/raw-assets/81/81052698-ec34-484e-86cb-f88d7d52cff4.png":{size:1677,md5:"56b1ac65e4eb30fa4eac5dff7f656044"},"res/raw-assets/81/8123aa79-4a1c-4ab7-b010-d81863459263.png":{size:476,md5:"1ef1cf5f4255aabce9e8e8fae347415f"},"res/raw-assets/81/81a73635-236c-4a82-ae3f-ff1e0f5c0096.png":{size:1903,md5:"e9be869424ea64a2d541b368f4d5b0cb"},"res/raw-assets/81/81d68b7e-f36d-4345-b867-9d8caaa818d2.png":{size:6344,md5:"384622bcb5ff651ed35382aa2cab99d9"},"res/raw-assets/81/81edc9c1-d4aa-4443-9d92-82fb1e160cf0.png":{size:7164,md5:"2b3f21b607899988863bb4232c79e735"},"res/raw-assets/82/82140740-133b-48e5-a821-80c7f48382a8.png":{size:1957,md5:"7c051b564f63ab7539754dd4a5095bf9"},"res/raw-assets/82/8240df30-c518-45ee-b033-bc1c596668b4.png":{size:1399,md5:"fdc4b8244fb62dea2cfacb473db35d57"},"res/raw-assets/82/82435312-f69b-41dc-b8af-b5e708a350a8.png":{size:570,md5:"3604844b5146464b80e48d63894ec029"},"res/raw-assets/82/82913ca4-6517-4bf7-b84d-a26d7b8caedf.png":{size:1618,md5:"cd14d84c51bfcc8eb7c1c63e9b2a2a67"},"res/raw-assets/82/8294c0a7-9c49-4a1d-9522-9a55dfbbfc1e.png":{size:12427,md5:"e9ca7ef8caf3cb9c2970043afc3d1e5a"},"res/raw-assets/82/82a26497-e9bc-4051-812b-2236856a62ed.png":{size:545,md5:"d7fb2fcc5d30657d595f940f3b1befec"},"res/raw-assets/82/82a3ee56-b554-47ea-8080-f375cd20b6c4.png":{size:908,md5:"ee2d50ec71037b5bfee3de111b586d00"},"res/raw-assets/82/82e528b8-e27f-45e9-94ac-6c497d8e3ced.png":{size:4470,md5:"c7cb2946bb278d0d00f58eb2fbc97b0b"},"res/raw-assets/83/83335c98-ecac-489d-8afa-533a7e0ccccf.png":{size:1195,md5:"2c93cc17e4a5e320676c380941cbe42a"},"res/raw-assets/83/836e7118-412d-49bb-8132-7d2b14ecbd4f.mp3":{size:3779,md5:"914e85ebed76c87460b3614eef7a6647"},"res/raw-assets/83/83c316ec-f66d-4053-89de-4eca352f6916.png":{size:1006,md5:"46c6c7b42223dc0d2d13e986915d8b22"},"res/raw-assets/83/83cbd567-cb4c-4f90-86e6-b9559dec1fc9.png":{size:2222,md5:"5501bcbcff47924af848820ef3ebc3a6"},"res/raw-assets/84/8402b0e2-196c-4926-9b48-90eade128843.mp3":{size:28278,md5:"a15dfc62c9b276b528dd12ffa094cca2"},"res/raw-assets/84/8433cc00-7760-4cf6-823c-2535cdf28147.png":{size:1188,md5:"7773514ba6ed5071d194d8b7b8a6f36d"},"res/raw-assets/84/8452f477-da45-447f-8113-30db53ac51d9.png":{size:2060,md5:"8cf0797ee6a1a3a44b265ebf81c176e2"},"res/raw-assets/84/84542460-dea5-4fc1-9cc4-661670a2e3cd.png":{size:67103,md5:"aee3a80007d3de90b8bea2f0c261b5cf"},"res/raw-assets/84/8463feec-1c69-4d65-b502-f475e15cc890.png":{size:730,md5:"a80a7b21f6729ee0661707c8f7afc4cc"},"res/raw-assets/84/84698b1e-4856-4891-b793-62c8057fb5f6.png":{size:1972,md5:"aaae462acdc7600a094ccc40c9ad657c"},"res/raw-assets/84/847ba779-d006-4d93-84a2-d0237abee876.png":{size:2187,md5:"d21c2489f872ae194ace8ff217cb50d7"},"res/raw-assets/84/847f4baa-56d7-47c7-9dfc-faf1e12e177b.png":{size:2206,md5:"e552e31b615953d623cf70d5642b9c84"},"res/raw-assets/84/849cc923-b73b-4c1e-bcc7-01a9610f338d.png":{size:5497,md5:"97fae6fb2a98040f001bea6e60613a2e"},"res/raw-assets/84/849d98ef-6252-4bdb-91f9-83e8708ce026.png":{size:8612,md5:"5caab3cf5c84fe84ad6636d8aae0018b"},"res/raw-assets/84/84dd141b-4261-4eb3-868f-9f5018e74ab6.png":{size:2809,md5:"5ffb5dc2f5e5834c798b7f0757b08e0e"},"res/raw-assets/84/84de525f-593b-43a9-a26e-0e28408969f3.png":{size:732,md5:"8f56c4b58a45bb27e0fb7fd438b4f722"},"res/raw-assets/85/8585d59a-7dad-4065-9d5a-81dad857c9c7.png":{size:3997,md5:"937d2c8905412217596775952f902186"},"res/raw-assets/85/8587d9bc-da52-4167-96ce-4aaba19c308d.png":{size:6745,md5:"9a1e22f7a0337474c8dd2911f3b7e90b"},"res/raw-assets/85/85ce1b09-aa64-4877-85d9-c08218537ba4.png":{size:1820,md5:"edb8fc98a43b930983cf1660ec0eaf7a"},"res/raw-assets/86/8628636b-61fd-4871-9833-5f5c587c9d21.png":{size:1502,md5:"e1ad5c1e345677ad33062e37dbe58e08"},"res/raw-assets/86/864d8777-c94b-4d4d-98cd-a9f85aef3635.png":{size:2417,md5:"f714b75df59036d35a9b6da697428f88"},"res/raw-assets/86/86513e92-8335-4d8d-9910-1dd8054cff79.png":{size:1699,md5:"343c292ab9a7d076fbb0a72a75980ce3"},"res/raw-assets/86/8662f80e-11e6-4d80-b189-6edee8c9362c.mp3":{size:6496,md5:"d38e5e40b41af3139675f2de821e892b"},"res/raw-assets/86/8665ccad-178b-44f8-bea5-e93443ea53d9.png":{size:11308,md5:"56c848d7c0bc5ae82113bd56f8687497"},"res/raw-assets/86/867fd17a-4c65-4d8c-999b-9a52931d2946.mp3":{size:16997,md5:"988455b8597339d56913f97a9a0e2afe"},"res/raw-assets/86/868ba7ea-704c-4112-b71a-99924f588e8e.png":{size:3913,md5:"9e70baa93e92e67fe7718cefb4495686"},"res/raw-assets/87/872a37d7-cdc8-4667-8975-d89a085a8761.png":{size:562,md5:"112e8628877111fcbb0e7ffe9a959921"},"res/raw-assets/87/87ff5a4a-5a13-4e15-82a8-c08cf1ef760a.png":{size:3601,md5:"643850456341c8e742629f34903d9520"},"res/raw-assets/88/880b2143-63fb-4663-94da-f127667aff29.png":{size:147655,md5:"abbabad28ed4a8d15922ba5102e2de11"},"res/raw-assets/88/882237f6-3b53-4b04-bc88-8ed5cca178f3.png":{size:1224,md5:"d6a61657d874fb5c4bf9c724f8dc6986"},"res/raw-assets/88/88b447fe-7c61-403a-b8a5-237cafe25dc9.png":{size:720,md5:"adafeeb68b179e83adb55df54408dac0"},"res/raw-assets/88/88c03a24-aa1e-457e-9dcf-e187675e6fa4.png":{size:4600,md5:"85efd0c1bdb835ca4744c25d7a202f16"},"res/raw-assets/89/89152d22-a25b-4120-a513-0b314dce34cb.png":{size:3198,md5:"7d88a4d124b758ba13879a285a6a32f9"},"res/raw-assets/89/8943d95e-d7ff-4bfc-b1ab-1795d744118d.png":{size:1178,md5:"ea8451993f6434b0d5343431dde8bb3d"},"res/raw-assets/89/8973c938-5c99-4ac7-9df0-32898617583e.png":{size:579,md5:"f20411217f090195ac44ef078b499bee"},"res/raw-assets/89/89d86b4d-c559-40be-ba1a-dc1c700a0cbb.jpg":{size:96228,md5:"6ca923f16d77f4cbefadefb47a5525e8"},"res/raw-assets/89/89ef47dd-197a-4f2d-9e57-975a6646de85.png":{size:598,md5:"57ea1ca0102645cf36ef207d5113465e"},"res/raw-assets/8a/8a1d6413-1c08-457e-9972-a1aad48dcab9.png":{size:4246,md5:"d35da7da5ddd388e2ba070f998db11e0"},"res/raw-assets/8a/8a645188-0cd5-48c2-a3c1-62566c9a7b58.png":{size:65280,md5:"357740e828a41a2e7ca03f191bb73acc"},"res/raw-assets/8a/8a7a2e08-29d5-4dd9-94bb-d4126d74e32f.png":{size:10097,md5:"0b3814049a440c84a4576dc965e109e3"},"res/raw-assets/8a/8a7f56da-b7af-448e-9db7-8bf3087432ed.png":{size:3097,md5:"00cf621832a8069fa0bb0b2cc3ca8748"},"res/raw-assets/8a/8ac58db8-f66f-46f6-b2ee-8efc109ddf0e.png":{size:437,md5:"61b8a80d27e64e742ed3f25b785f79d1"},"res/raw-assets/8a/8adde45e-d448-4cc9-bd8a-21eff1f7c509.png":{size:4155,md5:"bc909557717d1dd9753efde6a84ad31c"},"res/raw-assets/8a/8afc66d3-8c9c-4688-8b3d-94636bf97179.png":{size:11565,md5:"c3dec74d7e52b646d7e39a95405913f4"},"res/raw-assets/8b/8b54c960-0bb5-41fd-a722-1faf67696855.png":{size:815,md5:"130145f631bfe16d71123564bb381151"},"res/raw-assets/8b/8b9e2858-a4ad-4609-93b0-af7f12fe61e5.png":{size:11785,md5:"5e6ea35268dd5240cac7c448caf1237c"},"res/raw-assets/8b/8bbd65e6-110a-4f8a-b796-d4af72fbd93b.png":{size:547,md5:"7d1bc4a2d8cc081cd712aa718469fbf8"},"res/raw-assets/8c/8c07fbb8-6904-403b-8791-965e219abaa6.mp3":{size:23240,md5:"a5e43778b2058d7aa9e0b05ffa48c39d"},"res/raw-assets/8c/8cafa79e-1152-4149-8f7b-b670742cb6ff.png":{size:1173,md5:"805199478ce5203dc46b7091abdde021"},"res/raw-assets/8c/8cafe9ee-cf74-40d3-8ee4-95d6d2d9d276.png":{size:605,md5:"44231ce71a3723fff14160ee392c9493"},"res/raw-assets/8c/8ce54d16-fb42-40d1-bfc6-8e9e2052b1be.png":{size:2541,md5:"4d9ec51539d30201e2d4fe021ef25f50"},"res/raw-assets/8d/8d4b4f10-329b-4356-a58e-55aa2248b953.png":{size:6524,md5:"d9d6e06fd0b9682b9f06f55cfd85c2ff"},"res/raw-assets/8d/8d62e98c-c024-4f6c-ac6a-dc1b598ffe93.png":{size:6324,md5:"32756bcc7026517966a2b32d5d170a42"},"res/raw-assets/8d/8d7277e7-664c-41eb-9179-fb0f0d91e6f3.png":{size:463,md5:"5aa36ce940f11d4eca478d045672a746"},"res/raw-assets/8e/8e3b5265-0414-4552-9133-17d92dec5d54.png":{size:491,md5:"bb81eecd0805d248efdd206d6b25f34c"},"res/raw-assets/8e/8e719111-fb76-4339-bc5e-b8319a2cd7c8.png":{size:15175,md5:"f7510b10fb35c7a55cef03dec14a49dd"},"res/raw-assets/8e/8e8adaf0-4cc9-4a67-9b92-77bcd1ceb825.png":{size:334,md5:"4d7e72b15f44205bb3c1dda1f9f20bf4"},"res/raw-assets/8e/8eb28b61-0582-4379-8c6b-966b2703be7b.png":{size:851,md5:"ca9a41047bf89f90b15a5ba707b14fa3"},"res/raw-assets/8e/8eb38580-832b-40c3-bb30-ca30cd93b80a.png":{size:3319,md5:"386c617b31bef4485dbc682637e1a7b8"},"res/raw-assets/8e/8ec14de3-3deb-4b08-863a-21fab16c9436.png":{size:732,md5:"43f54a51bb85fb4231f1acab79008090"},"res/raw-assets/8f/8f549815-6cf2-45f8-9666-0b64286a9bbf.png":{size:3469,md5:"8533ce6d523943e50d0c92d76ef88798"},"res/raw-assets/8f/8f6ea1a4-1e6d-45a6-ba4b-550b01d76272.png":{size:2614,md5:"46867e0b0bffadad47bf2e2a0da6835c"},"res/raw-assets/8f/8f70e070-35fd-4137-b6ae-c811626ac886.png":{size:4365,md5:"6f96ea414e2e706dd0ffd5f244ab91e5"},"res/raw-assets/8f/8fbbebbd-aba5-4caa-9a58-ff5a3c976f50.png":{size:8986,md5:"8c815d21c01e0ff0a58aec077d859806"},"res/raw-assets/8f/8fd5a05c-158c-46b1-aebe-66875b866d35.wav":{size:265842,md5:"6777000bdce43991c82a90c875e19ca9"},"res/raw-assets/8f/8fdd5c75-31de-4cf1-b0e5-81cc997fd7a2.png":{size:2138,md5:"f02ae15b9a1579b25b40121e7f3c74fa"},"res/raw-assets/8f/8ff454e1-faeb-446a-a0d2-d72ef8d462f3.png":{size:1760,md5:"05f3cbbe0c8899da0ba269d438e22019"},"res/raw-assets/8f/8ffb07f4-44f6-4f83-ae94-37c17c3ca627.mp3":{size:28674,md5:"7e5c7df4eac9e0426b61b92017a099b1"},"res/raw-assets/90/9007f080-121f-43a0-b504-94dcaaf3075b.png":{size:4461,md5:"53a61ab6ebaae357055f30b6638dddad"},"res/raw-assets/90/902bda37-910a-4fed-836f-1d9877f21bc9.png":{size:5030,md5:"70c2499c19ecd5caf835a7d7db3fba1c"},"res/raw-assets/90/90abce97-1b02-4b9a-8afa-86560ca6153f.png":{size:3931,md5:"45fd76024751928966aee647e1599557"},"res/raw-assets/90/90cbdc18-d7c4-4c82-b552-58025dc5dd26.png":{size:946,md5:"6257b1b6e82f1fce233ed0790c5df48c"},"res/raw-assets/90/90f68cb9-dd4d-4978-80a5-59972699f85c.png":{size:4424,md5:"a3baafefa60452d12bad21f6f90122e8"},"res/raw-assets/90/90f971d8-5adb-4557-a6ab-eaf762704e03.png":{size:1299,md5:"0406f082aa9545f013c0985d90eba576"},"res/raw-assets/91/9148c0dc-fbdb-486c-9f1b-da54850fd9dc.png":{size:1906,md5:"0a3ee8a36cd9403444bfab80abd6d0e0"},"res/raw-assets/91/91568168-118a-4197-a0c9-b3b2e568e01a.png":{size:6831,md5:"f7bda71e8385e95f082a589d9e5c5eef"},"res/raw-assets/91/917c9f38-061a-4a5b-93cc-114110cfa739.png":{size:3099,md5:"cdb9966f3d3f3f68496b89fab54a0f6a"},"res/raw-assets/91/91e7ebaf-d1e5-4cdc-92a0-53106ffb3f35.png":{size:2350,md5:"bb5fdbbfb2fdbd8b349901b7bb54457d"},"res/raw-assets/92/92299038-6383-448e-bc9e-1765698706dc.png":{size:1296,md5:"c0515c92cdffff6901986ad00e278db3"},"res/raw-assets/92/922ea81d-20e5-4b28-88ef-eef7a81d8eee.png":{size:853,md5:"e2abd5d1db985918488fdf2fd81537b3"},"res/raw-assets/92/92606002-dd5b-4829-9328-c4f31aad70be.png":{size:579,md5:"bf5a25e9280d0c7ff298d2f04f42059e"},"res/raw-assets/93/930b5c53-c39d-4eed-ae11-86cef1acb7a2.webp":{size:926,md5:"d9afa13d6c5bc76ee1881b5298b99116"},"res/raw-assets/93/93138c28-423c-4c87-9aa8-3a8bc14c958b.png":{size:715,md5:"9d1391b40119aa989c5f7973ea7ce443"},"res/raw-assets/93/931fd734-465b-456a-8a4f-98409ac2593f.png":{size:2545,md5:"e1286f7ee9242ee9edc644ac38600b1a"},"res/raw-assets/93/9372416b-c8ac-4089-9c0a-90532e10e606.mp3":{size:40377,md5:"f8b60cf62134a7578fe68eba287b18a5"},"res/raw-assets/94/9438bb42-9268-4a22-901d-229635daf024.png":{size:1556,md5:"6b940e34450d9eb9fc7ef61e11300f35"},"res/raw-assets/95/95c2014f-fc6b-4204-97cf-b1f420005131.png":{size:2154,md5:"faaf946399b6df413eeff85e548f55d0"},"res/raw-assets/95/95cf43bc-ca0b-4706-a7ff-cc91de0b785c.wav":{size:74218,md5:"8e0aff49ed1c05609cdc0ca1750c0cd4"},"res/raw-assets/95/95fec743-6161-4b35-8441-81b09e39b291.png":{size:2512,md5:"a5dfa3c9d4d1376be0761207af56dd4c"},"res/raw-assets/96/9618d361-9b93-4808-8335-2fecb8f48551.png":{size:3210,md5:"f1c6c2fe708e080a43445ed9cf2370c8"},"res/raw-assets/96/9622c42c-e8d3-4db0-b864-d6fcf79ce343.png":{size:5386,md5:"7cd503b9583916f8a842cc246f4681d0"},"res/raw-assets/96/962a5592-7c26-4935-b5ed-eb752abda597.png":{size:7362,md5:"35339b021e430cda92921efc511e5bbe"},"res/raw-assets/96/963c8107-ebbb-4ea3-821f-92554784ab03.png":{size:13786,md5:"71be63c59fc0808da33f61871ba6351c"},"res/raw-assets/96/963deeb0-a502-4a85-9864-b251721376d3.png":{size:1152,md5:"0c9c31b9e976854efb8665b62e1ebb34"},"res/raw-assets/96/96488b4b-6095-4bd4-8d9f-7d93c5870408.png":{size:514,md5:"1edf368f867f8d68edc39490ba51efa5"},"res/raw-assets/96/969a556d-7741-4acd-b3a1-c16160423964.png":{size:4131,md5:"6f17dfe4a4bee06d1e1a68dd9a85bbfe"},"res/raw-assets/96/96c9a68d-8974-4f9b-afd5-13ccdb2beea1.png":{size:15579,md5:"a47ee16f3b93bf3f336da8b34c5657c6"},"res/raw-assets/96/96e77c02-22e6-4e5d-9b1a-45150bd8c408.png":{size:825,md5:"bdda5e664c50be299265d6bf4ed789b7"},"res/raw-assets/97/974605ac-55d5-4b25-88c6-e41d3e3e0ae0.png":{size:816,md5:"365f93aaf5f1e3dbfdaf489c694223dd"},"res/raw-assets/97/975d5be0-e3be-4ed4-9951-80db504ed4cc.png":{size:2267,md5:"d1be0a2a03bfbbc32193262c387e5b22"},"res/raw-assets/97/9777405c-f3f8-4468-988d-b406ce3d09c2.png":{size:1150,md5:"80435a22e3e7f8dbd1038fe96274e82a"},"res/raw-assets/97/97c24d2f-830a-483a-bc3f-74eee0e0ce60.png":{size:4425,md5:"c51ae3fd551a5307e1dfb6a6392c41aa"},"res/raw-assets/97/97e975b6-9e77-4510-9933-9a3b71d17b3c.png":{size:3607,md5:"657ed15b86420877ece332c5e223b95d"},"res/raw-assets/98/98000a0f-9fa8-4194-9d7b-3bd8c57914fa.png":{size:4328,md5:"f228a3da727a23f4f89aca3e296306ce"},"res/raw-assets/98/9861bf0b-1ba5-4081-99de-ae346ec93b83.png":{size:4560,md5:"bd3ed07dc29c23fca101cf4af17aafbe"},"res/raw-assets/98/98994f28-ad29-44b0-880b-fd982012831b.png":{size:690,md5:"fd0855e806fe2f5547d752fc067f576f"},"res/raw-assets/98/98e002d5-9e62-4b40-a85e-a051d84502cd.png":{size:4346,md5:"c64e1ba3af2007cc641324b97d873489"},"res/raw-assets/99/99170b0b-d210-46f1-b213-7d9e3f23098a.png":{size:1177,md5:"d1118d133683bb4227d5e60c79c846b7"},"res/raw-assets/99/991a578f-e6b7-4c2a-92ee-18441b6cb1bc.png":{size:736,md5:"20e9da7daaa4e1e3168f32e47825b54a"},"res/raw-assets/99/991af277-079a-4fe2-a4ce-44bfc41b7c27.png":{size:4566,md5:"e4f87993379fb97b9a5d77e813b208e3"},"res/raw-assets/99/9924eae5-e9ca-4db4-a957-e05d9634a3c2.png":{size:1032,md5:"095d2d1730d9208c5b5bd01261a657f3"},"res/raw-assets/99/99e41153-0512-4831-882b-0129b6a21309.png":{size:7261,md5:"d4518ccf43ef66445feb4f3be2764ad8"},"res/raw-assets/99/99f0921e-3536-40bc-a499-1e88700a84a0.png":{size:1306,md5:"e3d3491aca64594b7ad43bc7496970f6"},"res/raw-assets/9a/9a1668ae-292f-4de3-905a-8c0e8accecbf.png":{size:569,md5:"1ec7edae13a54798ba6ef651d16c4a37"},"res/raw-assets/9a/9a3ed2c5-07ae-4915-b04d-6b6d266721ab.png":{size:4871,md5:"45aa6c9eb51ce934e8ad176bcf3f27dd"},"res/raw-assets/9a/9a75f4a3-a562-4e9c-87de-23d5d5037946.png":{size:5093,md5:"90f79bd81fdd75c0feb4520d13fcb915"},"res/raw-assets/9b/9b464de3-443b-46b6-94e6-7dc77a6f2381.png":{size:514,md5:"cd06471df7cafa62a789c70ee1f0dd6b"},"res/raw-assets/9b/9bece482-b999-40ce-90a8-e8b027541d93.png":{size:2028,md5:"889928c79a13a1e778be44ed5fb2e763"},"res/raw-assets/9c/9c006530-b044-461f-9b2b-a2066a91ffdb.png":{size:1566,md5:"276a23707bd6ac4cb9fea73f2062487b"},"res/raw-assets/9c/9c47b42d-070f-48ee-b325-f65b451dfc15.png":{size:4808,md5:"4346505c076d28352d6f7961a92e7fe2"},"res/raw-assets/9c/9c584bbb-b785-46e3-b606-f1645ec24280.png":{size:302,md5:"4c9d919e6d28d678732cd77dd503455a"},"res/raw-assets/9c/9c5d483d-0c39-4625-b70a-4cb920ffddf5.png":{size:6836,md5:"be15d4c725fa26feefeaf80d3aad8178"},"res/raw-assets/9c/9c749979-3260-4ca0-ba5b-42532dd443bd.png":{size:789,md5:"e54782a8ac4d769620be707a5983765e"},"res/raw-assets/9d/9d380afa-8e14-47b3-a759-62cec2f8ec26.png":{size:418,md5:"e67ad5bffbdd68580fef3ca365d9da5d"},"res/raw-assets/9d/9d551abe-d6b5-4301-91d1-0dbfe8d7d2aa.png":{size:2770,md5:"5de59a5cf621e9aa17a193c41e689d67"},"res/raw-assets/9d/9d562132-5ced-4c65-b71f-987cafdc4ebd.png":{size:1896,md5:"96250a477976b4883d538bb8f852e45c"},"res/raw-assets/9d/9d5fe918-6292-4f50-98c8-aa26da8dce74.png":{size:5247,md5:"73689cd4c512d5897511a703752ed0f1"},"res/raw-assets/9d/9de5b30f-a3c5-4881-bdeb-d88e0c6d0803.mp3":{size:14463,md5:"074012b2fff3b342ca18dd4119b55299"},"res/raw-assets/9d/9deac76e-aa7d-448f-9225-d7b92d064d5d.png":{size:1235,md5:"48e4c8404cb6949a62532104cc8c70b8"},"res/raw-assets/9e/9e040f7d-6036-487b-9faa-b981f870ce1e.png":{size:9312,md5:"19ebb091100fb1704f7bde1b91642083"},"res/raw-assets/9e/9e0ad79d-310a-4052-af6d-20ab31a8ee4b.png":{size:2287,md5:"8a4ceaa0589be4ca6190dc0f60ca92d4"},"res/raw-assets/9e/9e0ef784-60b0-4efb-886b-9d079d84cd82.png":{size:1188,md5:"97791dab6578bac8f5e2ca43091fa0b1"},"res/raw-assets/9e/9e48a558-71ec-4b4b-b260-4c206e40506c.png":{size:2905,md5:"f885f0cc74a0a5223b64cfb03b05b09f"},"res/raw-assets/9e/9e500137-9245-468d-80de-c1b217e483e9.png":{size:26165,md5:"64027d71bd65e059f6ca471db1f33591"},"res/raw-assets/9e/9e6094db-2891-472c-871a-39644a272c2b.png":{size:553,md5:"54bb904cf5bb42a19070275c8b7a8de9"},"res/raw-assets/9e/9e9aab22-8ddc-4901-a697-fc4c20d38853.png":{size:546,md5:"4a1327d889810b41481b3f579010df8f"},"res/raw-assets/9e/9ee0b540-182a-4c04-a71f-3e5fa7de4102.png":{size:1374,md5:"a6a446a89bf9a37026c8e5f44ece4dab"},"res/raw-assets/9e/9ef14ce1-883a-43b5-94e6-2150262782e3.png":{size:2191,md5:"1768534f0db27ae735fb2036f00e12d0"},"res/raw-assets/9f/9f1c204a-1fe9-46a8-ae72-9cdd91252f4c.png":{size:13942,md5:"7d017de5ea193cf3d1d176e502649800"},"res/raw-assets/9f/9f80b7ac-1209-4d57-bfeb-36c970ec197f.png":{size:749,md5:"a7fc8fea6286ea8d950e3884a94869d9"},"res/raw-assets/9f/9fdcbda4-7355-4dba-9154-e1a002b6f85b.png":{size:4101,md5:"9aeac9e118895463701e9c1f8dbb9c69"},"res/raw-assets/9f/9fee6b97-3e57-49b8-bc0a-6ab2838bef15.png":{size:1532,md5:"89f4d5d1d21caaf44b654abaa9e9d647"},"res/raw-assets/a0/a03fb81e-cf37-4bc7-84bb-a7e7202b225b.png":{size:3712,md5:"a5ec55663c0180da46c8feb13604258b"},"res/raw-assets/a0/a04897f0-58d9-44af-8bfb-20a980dacc81.png":{size:458,md5:"18624a2c11c1a83dc9e30238e38b7593"},"res/raw-assets/a0/a066cbfd-bd01-4fb5-88b5-1f68a20d910d.png":{size:6541,md5:"319c072b276ea7b7550cf0b2930b5ffd"},"res/raw-assets/a0/a0a7a3a1-d71b-4290-96ff-daa851e91e8c.png":{size:1375,md5:"8fe94217a80ff0bcd162fa55275686fc"},"res/raw-assets/a1/a167f4e6-a295-40bb-8493-1cd12ee0037e.png":{size:1451,md5:"7068767338ce19b29b6489788b04361e"},"res/raw-assets/a1/a1b3e15f-fd73-44e2-920d-24eb93e0e960.png":{size:2005,md5:"2dcfffa40e898a7a8b8281b48e504c4b"},"res/raw-assets/a1/a1fa7c6e-7e38-45b3-b7ff-951121e4c04a.png":{size:620,md5:"2114b3fdc78b2af08d1c853e1bf27063"},"res/raw-assets/a2/a2325d6a-f9f0-40ed-ab39-e4cb9d9e1ba6.png":{size:19171,md5:"1582f48d4fdcdc5f59e11b7acbdb9e3d"},"res/raw-assets/a2/a23993ba-04be-4192-ae2f-d53169e6e82d.png":{size:3610,md5:"f3af4b3cbb99ce43ba8f428d23af72b4"},"res/raw-assets/a2/a2685162-7dc5-421f-86f3-2b1ba10df61a.png":{size:21319,md5:"9ffbe09897fcf4c9c9fe5c438354e5ba"},"res/raw-assets/a2/a2e709c8-60e2-48a6-922a-9bfe36c794b5.png":{size:3483,md5:"5c5be72100f1c669fff237e7b5cc08f1"},"res/raw-assets/a2/a2ec9326-add7-4669-8ba0-9436ac347617.png":{size:494,md5:"acec6de8cf8127cdb7096603cc23d9b0"},"res/raw-assets/a2/a2ef0d8c-788a-479c-810f-f499d8d62227.png":{size:5657,md5:"9a3a3101baab9fb3a697aa0cfdb72b6d"},"res/raw-assets/a3/a376e968-c533-40de-960b-071f2ba16255.png":{size:3612,md5:"66a71e120eb2cf3857197dfd53e73e29"},"res/raw-assets/a3/a3e30fd1-7388-405b-867b-9d4452244a72.jpg":{size:17155,md5:"4ff0e67bb544e277bcd4fdd47a7b9b1b"},"res/raw-assets/a3/a3eaea67-8b51-42f2-b537-f3fedc2c9cb8.png":{size:92849,md5:"d22b5fee95adc7e4b56f9b7061dde953"},"res/raw-assets/a3/a3fbc67a-aae4-4f39-90c5-bb5d54c9dc58.png":{size:2769,md5:"bc8f076830a8098ffa7dd7e58c2786ec"},"res/raw-assets/a4/a4db4167-7dab-4f2b-9fe9-dfe09908c7a2.png":{size:3492,md5:"f4c5c216da68638720d3e4cdd93a7b15"},"res/raw-assets/a4/a4de4b02-ef03-481e-8b9d-9c8f0d862494.png":{size:612,md5:"8ca2ae1662438a155f486d0605e95bdb"},"res/raw-assets/a5/a5149166-dbf2-4526-8545-3f8f312ad2a7.png":{size:3274,md5:"8ec404024204ab7ec359d5e4478df322"},"res/raw-assets/a5/a59e6923-1261-414a-8b70-111e346b372d.png":{size:7733,md5:"899bb30bf4db5df6ff17b9888157fcd5"},"res/raw-assets/a5/a59f48fd-505d-49c1-a2de-1d464e9c033d.png":{size:3453,md5:"ff7b1d114b39d3f858c20ac6185267ff"},"res/raw-assets/a5/a5b0a81e-0776-4919-a77c-ce96a34d37c6.png":{size:2541,md5:"25103b58bfcdb17e41db5f4d9fb1fd17"},"res/raw-assets/a6/a66c6b58-5aca-4db5-977f-eb355573893e.png":{size:1181,md5:"22271f2ce2be0be0d8e1df9e37b73976"},"res/raw-assets/a6/a6b67371-5709-4e62-8dea-caba42545852.png":{size:2541,md5:"25103b58bfcdb17e41db5f4d9fb1fd17"},"res/raw-assets/a6/a6baa117-7a3c-445e-a39a-1a30ca0dfffe.png":{size:830,md5:"005ece95e3cd6edd2d77b1d23d7652f3"},"res/raw-assets/a6/a6c62b32-3157-4eac-af33-4d30aa23bb8b.png":{size:581,md5:"911d58c716c39bda370a4362d42a042a"},"res/raw-assets/a6/a6dda516-44ac-4bbb-9284-90f9caabc098.png":{size:1756,md5:"33da73cf77d506fddc0c74f089c4a77f"},"res/raw-assets/a7/a70e8139-f81b-4951-94b5-3904cbbec950.mp3":{size:16135,md5:"85fcc54a840d1c61af748c810c3c6fac"},"res/raw-assets/a7/a7c6bca5-8207-4f2d-86fa-91c0ab7443cc.png":{size:21858,md5:"464c091a7f50dec0b79fbcf0bcc26bc5"},"res/raw-assets/a7/a7fa1222-9d84-41a6-a535-5309fd214fe1.png":{size:3255,md5:"412677e42fa18e51d66563b28452a451"},"res/raw-assets/a7/a7faede2-34d4-4cfa-a6b1-90c6ebff75a9.png":{size:806,md5:"e611228f14d6178af1bbfc0d34dc7277"},"res/raw-assets/a8/a80401a7-b352-4529-a867-987b70758953.png":{size:608,md5:"fdb6ef9f048662d3639292b8148d5391"},"res/raw-assets/a8/a8479f0a-b17c-49ef-bc77-adfdc607f925.png":{size:446,md5:"ae9c70db68101066caa42e8b2a17d69f"},"res/raw-assets/a8/a863e7f0-fe23-43a1-a840-a377d4ce298c.png":{size:2283,md5:"46a79e515ce188734bd907e020a8827a"},"res/raw-assets/a8/a88ad7fd-f58f-4441-8c93-23edd76f7ae1.png":{size:4355,md5:"17d175593e52269b53b3d5202d0d97e6"},"res/raw-assets/a8/a8931860-2ec0-48e5-88f0-e723423fe5b5.png":{size:1655,md5:"ff1ab3bbb6b44d1d9d02049d6526a3a3"},"res/raw-assets/a8/a8b82a0f-07d4-4c42-9301-4e92f6252cdc.png":{size:827,md5:"0dfb7968ac39ec67971bb401c96eef0f"},"res/raw-assets/a8/a8ba0569-7f3a-4be5-8b35-a8f2e1b951d9.png":{size:1590,md5:"418498c678faa932464cab6483115dfb"},"res/raw-assets/a8/a8da3dbd-5cf2-4005-a5c4-f38f10b23787.png":{size:1935,md5:"eef432bb2ab31ee957501128cfdae994"},"res/raw-assets/a9/a900b65f-0617-41a6-98da-7cc6fca5dc53.png":{size:1504,md5:"dbaf8f2eea8a43c04c5c69379adae082"},"res/raw-assets/a9/a969799f-99b5-41de-b934-db3a0c0bfd02.png":{size:1272,md5:"c599df2d4d9be10f74afdc30c3985900"},"res/raw-assets/a9/a978ce91-0384-4c62-9667-e23b541ed4bc.png":{size:7764,md5:"4539fcdf2d2610ba7d67000c6ad20f99"},"res/raw-assets/a9/a9a1b137-1341-4aa3-96d0-30ab97967298.png":{size:2551,md5:"5f2f062796e49edf0fa7197323e29a7f"},"res/raw-assets/a9/a9d67115-ed19-49dd-b8bf-eb320926da05.png":{size:2413,md5:"95d241e76d553960f8be62cbf8ddd3b0"},"res/raw-assets/aa/aa3e58dc-0ccd-4de6-bb31-7b95e9b07ee7.png":{size:1068,md5:"ba69f305383706b9d345de06e9b2e536"},"res/raw-assets/aa/aa53282f-bae0-4b1e-9fb4-402db257a5e6.png":{size:3593,md5:"c6123c34306656e43516a6ffd78eba34"},"res/raw-assets/aa/aa5ee4b8-51d6-4e44-9a10-f193c797adbe.png":{size:251160,md5:"80b617d76a343bfe1af2ded196122047"},"res/raw-assets/aa/aa80abba-6341-460e-9234-57f12cf54b7a.png":{size:502,md5:"32dd5f438bdade57c7b527cd465dc0a8"},"res/raw-assets/aa/aa8dc9c3-299a-4dfc-80db-58d770f3f5b7.png":{size:1557,md5:"bc1f260069207330b2601495ca6a6ae2"},"res/raw-assets/aa/aae63040-32ec-4b6f-ac82-a781432201a6.png":{size:1346,md5:"9cc03ed7b724f7236cf40a78c58a96b8"},"res/raw-assets/ab/ab07455b-dca0-48de-9be6-c524bb36272b.png":{size:1890,md5:"eca98cf6fd79e517dcf80aea102cc0ad"},"res/raw-assets/ab/ab5446eb-e004-44c8-ba84-00faedf9495d.png":{size:3440,md5:"f72691bf7a9505b42684dfdaaa6e0fd6"},"res/raw-assets/ab/ab5e3799-2ce1-4e44-9403-c2bf10a5b305.png":{size:2867,md5:"86be0b955d5caa8bdb79d6c14bb3062a"},"res/raw-assets/ab/ab8ba454-520d-4eb4-96da-45c14025a167.png":{size:608,md5:"b1766ba6e152849a77b336b748b223b7"},"res/raw-assets/ab/abb84618-3f53-4f8a-a2ab-a0c3e7a56ec5.png":{size:2311,md5:"fb657d535143a9a1b4eb859b3483b96d"},"res/raw-assets/ab/abd8799e-b8be-48d0-ba32-759bb248069d.png":{size:2296,md5:"4cf24e81dbf45407ebaa99e0a9780f55"},"res/raw-assets/ac/ac1a2e21-6b5a-4c69-afea-3cb56fd611c8.png":{size:3142,md5:"8ef367ade80bf8f410bf8abd6198c023"},"res/raw-assets/ac/acb05982-f2e5-4ba8-b3dd-21c779504ad2.png":{size:1498,md5:"7a6a9c442255907986e02e4aa4703bf0"},"res/raw-assets/ac/acc35b71-8039-4204-ab2a-c22581529233.png":{size:1474,md5:"0decb7899ece732d43180502b5c49960"},"res/raw-assets/ac/acd46cdb-613e-407a-acac-d42be1aaf667.png":{size:4508,md5:"0637d6129ecab40c39ce10447e908a19"},"res/raw-assets/ac/acea5d9e-2979-4edd-ba0c-4c0c28382341.png":{size:16423,md5:"4d0f68e79e63425d5d0fd09e7823e9f9"},"res/raw-assets/ad/ad423b85-8a85-4dd1-a60a-849db5ac4410.jpeg":{size:46527,md5:"356e6e67daccfdea195f23d247ed082f"},"res/raw-assets/ad/ad7a4a9d-1297-4671-b7a2-137868a86ccc.png":{size:6866,md5:"c35c0a02fd65665542976a23e823c5fe"},"res/raw-assets/ad/ad9116f7-fdff-4409-adfb-c2efdfff110f.png":{size:7255,md5:"7f4934167fbf0a6ae56284c790481f6c"},"res/raw-assets/ad/ad966d03-f571-48fa-9021-48b41fa0192f.png":{size:763,md5:"508d150adf355fd84bb3805a3c83f708"},"res/raw-assets/ad/ad97f459-6ad4-45eb-8c96-7369a91bcf83.png":{size:711,md5:"9b4a8e020db9c747847124daec7a31ec"},"res/raw-assets/ad/ad9b4035-371e-4968-9226-6d55d2eb49ea.png":{size:10448,md5:"28fb6c80a4346f475af70981901db327"},"res/raw-assets/ad/ada74036-b7e1-499f-97fa-1d639d881007.png":{size:1284,md5:"23928ce1e7a2c8b538d96e386f2c53db"},"res/raw-assets/ad/adbef35b-a519-477b-9d01-80becbc50782.png":{size:762,md5:"171a78d0bc6ccec4cb1f16c4671cf704"},"res/raw-assets/ae/ae312872-9468-47ae-868e-0c7998b978b1.png":{size:5305,md5:"75912f0153ccc43d3f9b2ed7d699f06f"},"res/raw-assets/ae/ae60cd94-710e-4ddf-a497-bb1cf1a701bf.png":{size:2061,md5:"df09c798996938c18a20842d4c41790f"},"res/raw-assets/ae/ae8198e5-127b-4464-8509-f5dc0a73c0cd.png":{size:4016,md5:"f50b9c45e9ea24140735830a4bf95ebb"},"res/raw-assets/ae/ae8c44dc-42d6-409b-98b0-15ecb46dd1c7.png":{size:1849,md5:"3a0821c5aa7e5773c68948820c99bfc4"},"res/raw-assets/ae/aed5e701-ee71-4d9b-ba19-45f821475269.png":{size:1184,md5:"1774257f73a4dbef081f4dc84305451b"},"res/raw-assets/ae/aedb3bed-249c-4177-8387-09b6dd25a944.png":{size:42297,md5:"f861d15d444a194c495e0bb27961b84a"},"res/raw-assets/ae/aeea8bd6-3522-4d2e-b09c-8ee3d93f4311.png":{size:12503,md5:"06c598dc60a2725c84406f02b182a346"},"res/raw-assets/af/af40375f-860e-4e77-bf8f-94e479c570c9.png":{size:6987,md5:"72e22b1fe54aa90712b314227f3dbc58"},"res/raw-assets/af/af44f886-eae0-4b2a-974b-fa86d0c5d1cc.png":{size:3855,md5:"8ec1a5f557d2d7463ef4b03c3923cff0"},"res/raw-assets/af/af90ea89-6269-4bec-80c3-844241aea5e0.png":{size:3823,md5:"82e5844ad01a73529dac6307cb812b29"},"res/raw-assets/af/afce0477-a7fe-4956-91c5-c763b8335505.png":{size:13933,md5:"f563212e568f207de67b3678aa1525ea"},"res/raw-assets/b0/b05c8d7a-d7ac-4139-a5dc-8c1e3df3a5c5.png":{size:587,md5:"99e58982f301c42754394df2748bd73e"},"res/raw-assets/b0/b06dd4c4-51af-447c-af71-e9b1392ed24f.png":{size:722,md5:"06266bd0591f40a92f39150416f15f7c"},"res/raw-assets/b0/b099d4ac-da3a-43a7-9b78-84f292c1d852.png":{size:2162,md5:"00986d9631e298e33c04ca549ed824b6"},"res/raw-assets/b0/b0d5ce4c-9439-4bf3-9e27-960354a13de6.png":{size:6766,md5:"8e19b9819c72a3792848173fd0e136d6"},"res/raw-assets/b0/b0d6bb9c-c7ed-4377-b182-7d63b79928b9.png":{size:562,md5:"d78e385ae2e2c0d13c19eaae3b26060f"},"res/raw-assets/b0/b0ead57d-5bbe-4a41-b4f2-047740a13771.png":{size:8480,md5:"9f4f232ccd80e57b32fb57b87bf59cb3"},"res/raw-assets/b0/b0fc7f56-2889-427b-8234-ac225d4736ee.png":{size:1200,md5:"1746de695b9609ec14a1134972f15ee6"},"res/raw-assets/b1/b13dd5aa-9654-440b-9550-b0920adfd8bd.png":{size:5476,md5:"8bbfeeba5b25046515bdb00527850bd9"},"res/raw-assets/b1/b17e2ab2-e2a1-4aa6-92d7-369a025e7b3c.png":{size:941,md5:"79dd71d0eaac77de78869e94160a99c5"},"res/raw-assets/b1/b1c34195-f469-4976-8e08-20c16208df2b.png":{size:1012,md5:"93ddbdac78c09262d755d516c12d0d4d"},"res/raw-assets/b1/b1df8126-80f6-49c1-9087-0b46cd8080ea.png":{size:914,md5:"16be555f1b1cd3eb375372036cf47f83"},"res/raw-assets/b2/b273b85a-b01d-41bb-b7ed-78f72dfb5fe5.png":{size:4473,md5:"37245015e39b86dab9e40b9823cbe1ff"},"res/raw-assets/b2/b2edcf4a-2d3c-4d85-a52f-693b192337e4.png":{size:2071,md5:"fdea4a2d97e8426e1f827865037bb4b8"},"res/raw-assets/b3/b3235199-570a-43f4-aedb-d0dc03edef2b.png":{size:1188,md5:"e831a8e5448105227940d7e55184ead9"},"res/raw-assets/b3/b34a37fe-79e4-4e80-8834-a2af139359f7.png":{size:3451,md5:"a406136c42f1cc10f6b5136e03c171fe"},"res/raw-assets/b3/b36a52b3-6d68-4a40-b1da-24ec0d0e1f40.png":{size:11163,md5:"32601b06d3d22674b744bf97a7e5ccae"},"res/raw-assets/b3/b3aaf3ff-acc2-4c80-9568-ae4a0df922dc.png":{size:2382,md5:"1204cfcdf35e876570fc75613d0c09fc"},"res/raw-assets/b3/b3b80170-2aa8-45bb-aabf-a3777e88f348.png":{size:686,md5:"7bec8a8047e532376cb550bac64e6991"},"res/raw-assets/b3/b3c4dcb8-b350-4b8e-aa70-05a30979bc90.png":{size:2114,md5:"56fc9800c57795faf5381cab5bbb855d"},"res/raw-assets/b3/b3cacda4-c6d3-424c-826e-0f3b9a2b8a90.png":{size:1377,md5:"76b352729dfdb89207ad77784bdfca08"},"res/raw-assets/b3/b3cb340e-75f6-4c2b-a81a-8d27c598144d.png":{size:1146,md5:"c82cfba5e012ec15f8506c8b5998f655"},"res/raw-assets/b4/b43ff3c2-02bb-4874-81f7-f2dea6970f18.png":{size:1114,md5:"83fcc9912e01ae5411c357651fb8b1cf"},"res/raw-assets/b4/b4cff08c-c865-40ac-b8ea-81966b09e9cd.png":{size:2239,md5:"4c2f8bea74ffaded6607937f723234c1"},"res/raw-assets/b4/b4f09890-f46f-4754-91c4-94f26a721df6.png":{size:566,md5:"70579703319aada18fd60ec3322d4059"},"res/raw-assets/b5/b5735b7c-cfee-409f-aa1c-5020dccc0e63.png":{size:6621,md5:"cc2f640547a49931bc0f4c5653b4ce18"},"res/raw-assets/b5/b59d096c-bd20-41f4-bbc9-aa541958cf2f.png":{size:1061,md5:"c678bc3a6169e5e00f473c92be5cd75f"},"res/raw-assets/b5/b5a29e63-94cb-4173-912b-5c03fbf7de5b.png":{size:28334,md5:"d176ad7872086dc89c1faa4763dedc32"},"res/raw-assets/b6/b62aecf8-f98c-40eb-b912-5477e86bf88a.png":{size:6506,md5:"f3a1b9776e65d9e99f7255f5bacee6f3"},"res/raw-assets/b6/b6742ec1-9471-48d0-b5ed-cb1057748a55.png":{size:587,md5:"45fa6d52970571a1c98babd5b2ee77d2"},"res/raw-assets/b6/b6bdf100-aeb0-4b8c-90bb-ad1882057c91.mp3":{size:4615,md5:"289c651809847caf547fbb39a18a6ed3"},"res/raw-assets/b6/b6c94baf-3fef-4c0c-95c0-575f002fadb3.png":{size:7081,md5:"eaa48d3c8372922931265534902c73b6"},"res/raw-assets/b7/b73688d6-4455-41fd-8106-24947ca965dc.wav":{size:6345630,md5:"2abfcbcc39a53e5d901655ba3a767618"},"res/raw-assets/b7/b762d4d0-4975-486e-a276-ffb630ba58a9.png":{size:1039,md5:"607dee296340e3efb83f75c7f14600a6"},"res/raw-assets/b7/b79cdf63-87d1-46de-bdeb-1b56e6c34f48.png":{size:2184,md5:"4d0f1d6998016cc5bc7b90cb90efd9ea"},"res/raw-assets/b7/b7d7c0fc-a45e-4576-9cb6-a44751e82ada.png":{size:9445,md5:"5ed7073c629a3189b52be921c6b325c3"},"res/raw-assets/b8/b873a1fa-8886-45a8-945f-9ab48f4d35d0.png":{size:1592,md5:"a27bcaf009166d7743c4076776c69376"},"res/raw-assets/b9/b908146d-114a-440a-8436-8af40988cd2e.png":{size:589,md5:"cdd2793db7cc6f42e3b3443ce878fe28"},"res/raw-assets/b9/b9256436-8418-42db-af9d-59d23518aaf5.png":{size:1668,md5:"0b669df8189ada529f67bd8ff9f73db1"},"res/raw-assets/b9/b9650ffe-98d4-4f56-b5b5-0174785af658.png":{size:5016,md5:"7994336b90b7828990d53be7abfa2238"},"res/raw-assets/b9/b965949d-75f0-4290-bbd3-c394492e64e1.png":{size:1741,md5:"8986f75ba191ac14e37a1aeb8157ea52"},"res/raw-assets/b9/b9907783-fd14-4baa-9641-da2d180126e7.png":{size:3623,md5:"b12195ce912c5e72a1d1567983a693ab"},"res/raw-assets/b9/b9b327b8-7da5-4ba4-b49b-19135b184cf9.png":{size:1902,md5:"73db124757065359bf309bd5465a7807"},"res/raw-assets/b9/b9c5df15-c154-4679-9234-9ee8d8a4d2c0.png":{size:4239,md5:"7e02424a68d98fce247538e1312334db"},"res/raw-assets/b9/b9dfff9f-28b0-4b4a-98fb-31afd0d4c543.png":{size:1633,md5:"d400d268f4e7c1fc54dc63c391ad6458"},"res/raw-assets/b9/b9fa2a87-eee6-42b9-86b9-b030cc40901f.png":{size:25864,md5:"db1518d28eac6f0e14a2ba1c8ed70acb"},"res/raw-assets/b9/b9fff447-05ca-497f-8d6d-c4d555e310b6.png":{size:2375,md5:"5fb3e0045b7d8bb21baa288f78ac0d30"},"res/raw-assets/ba/ba2e8704-9d84-4dac-af55-a0eceddaa99b.png":{size:2620,md5:"08047b13597f057f66065036b27f9433"},"res/raw-assets/ba/bacac482-ace1-4fa5-a520-56a3fbdb4222.png":{size:1623,md5:"88f8a57aace96e576c0a0565a777b2e0"},"res/raw-assets/bb/bb2ee4e9-2911-4a27-9dba-81f5ff6d8a9b.png":{size:7391,md5:"09b17c83a522f5ecad85339d9816d424"},"res/raw-assets/bb/bb3abefd-e0d7-43ea-b15c-ebd659cb9736.png":{size:42375,md5:"1ddb2a53dffa3a53db50b969ccf2c52b"},"res/raw-assets/bb/bba4a4de-2caf-4807-bf05-fb74f8c801d3.png":{size:1332,md5:"6e166839fcf759b87cea8558a0110e47"},"res/raw-assets/bc/bc99c60b-790c-404e-a31e-886bfee5fd89.png":{size:1120,md5:"0766291bdd943bcca7b8a28473052ebe"},"res/raw-assets/bc/bcbcc827-1321-4829-9ddd-4f56f7ae1c78.png":{size:900,md5:"10aabc73399e6c05c90ccbe84f142612"},"res/raw-assets/bd/bd1c74b7-abce-486e-a773-1917f055d6fa.png":{size:2022,md5:"c1bc13519004f9aa4f63b5cfb82bf2f6"},"res/raw-assets/bd/bd295802-2af9-4f75-8ab0-2941cdee0598.png":{size:1813,md5:"65a2b282a70d8c4200c4dd1f681b6c6f"},"res/raw-assets/bd/bd307187-cdc2-428e-88df-87ea400e34e5.png":{size:1987,md5:"939cdc6f26b0c1ceac60bb443cedbeab"},"res/raw-assets/bd/bda8e0f6-09a1-43d2-888f-76b0b58946c7.png":{size:1948,md5:"3755a5d754772d293914b709f74f12a8"},"res/raw-assets/bd/bdcd5fc8-4024-4a74-b08e-017a6dce107c.png":{size:2170,md5:"ac9b35e80524e4542a7d2104b2be4a4b"},"res/raw-assets/be/be1d06eb-4da2-4b1b-a3c1-78e6dcfe0115.png":{size:489,md5:"9fc6cd02e6409ea82e2e629f588824f2"},"res/raw-assets/be/be200649-0ab8-468b-9369-24081312d535.png":{size:6379,md5:"fb33ba011145bc5d083e4e67e3be44fd"},"res/raw-assets/be/be5a5e52-832c-42a7-a1b9-427ae67c6cba.png":{size:6622,md5:"1e7bea1ac61b89909a78092dd6bb557f"},"res/raw-assets/be/be7d4017-c402-4463-a02c-e54c12e7b8aa.png":{size:793,md5:"38450e5983c7617981fff64116f602eb"},"res/raw-assets/be/be7d66cb-2900-4d10-bdae-b01543f78fca.png":{size:5865,md5:"7c53f431c69ecaa0459048a12683d24e"},"res/raw-assets/be/bec06fb7-de53-4d8f-b41d-658a7602f368.png":{size:6902,md5:"ca3fcbef38b98b33e627583201d38d32"},"res/raw-assets/be/bef1fd2b-efe5-402c-8841-739bb1097756.png":{size:3089,md5:"7877a157302fa1bf3a0ddbbc909458cf"},"res/raw-assets/be/befa52ea-7eba-43ae-b679-9aa1372f8661.png":{size:968,md5:"e40d086f415df641919276526d4a3183"},"res/raw-assets/bf/bf064532-3b97-46ef-93f5-22d4585d5d2f.png":{size:2101,md5:"fe2f6223a04424ea0d99bf36a687eb8f"},"res/raw-assets/bf/bf2e9064-c6a6-4d8c-b2ec-0efa39e752c0.png":{size:1109,md5:"28608e466c8ea95b08538dfefbc556ac"},"res/raw-assets/bf/bf3691b6-c518-49ad-9a8c-1921b44d9ee3.png":{size:3504,md5:"93b4b9ddfd89b84781c4185c115a1b82"},"res/raw-assets/bf/bf48d2c7-19a7-4040-879e-10a3c6d7f7a9.png":{size:7026,md5:"8fbdce7e281c43e2ec4b3514ce9ccf9f"},"res/raw-assets/bf/bf5d8ab8-ea5d-4dfd-95a3-173dbe5a4c21.png":{size:1979,md5:"15dbde07c32f7d224b7f72722f6e9943"},"res/raw-assets/bf/bfb8a325-b9d5-4741-85dc-8f70feea56a0.png":{size:14651,md5:"63502c2f29952995051b4a454d79550b"},"res/raw-assets/bf/bfdda903-7c79-4869-b3cf-7be75324f181.png":{size:683,md5:"b524fbeb6bf3d03706e7a590609ad7f0"},"res/raw-assets/c0/c014fbc9-ff86-4599-ae64-8ba9e0e756c6.png":{size:1560,md5:"cc9a8c7f6e6455463ad98716d6a1b9f3"},"res/raw-assets/c0/c036c60c-6e4a-4319-8f35-1d56c444ff35.png":{size:571,md5:"94166edfbda63223c89a276af2f30046"},"res/raw-assets/c0/c08076e4-f0ae-4fc2-ae1a-10b094a284cf.png":{size:6373,md5:"d743a50d53967653cfcad3c6d3880b0b"},"res/raw-assets/c0/c0a7061c-69eb-4cbb-85ae-8ee602fcd87e.png":{size:15008,md5:"c8538b223068704c646d569518c1f410"},"res/raw-assets/c0/c0b54123-11fd-4e3b-9576-ba853182213e.png":{size:2325,md5:"fb658b802bfbae5a2b6e3ef4be25805a"},"res/raw-assets/c0/c0f84bbb-9ff8-45f7-8e34-134adffadfd1.png":{size:748,md5:"c62b80f9c3afa0bfb4304de0fed23007"},"res/raw-assets/c1/c148d443-a982-4008-a42c-ed89a7c006f7.png":{size:1494,md5:"6f6df9ec17a2e48035e5ada6196e50bb"},"res/raw-assets/c1/c1b80f33-42fa-4249-9e33-030d6df3b7ce.png":{size:1502,md5:"e1ad5c1e345677ad33062e37dbe58e08"},"res/raw-assets/c2/c22bc4c1-17d8-4734-94d6-441b5d75a1bd.png":{size:2747,md5:"669f4e703ccd6eecdd3c799e5b600fc2"},"res/raw-assets/c2/c2814830-83a2-4b84-9e81-c5230aa33509.png":{size:3815,md5:"87985feaa145cd6435837b3a7a9b5d29"},"res/raw-assets/c2/c2f06efc-2f22-42c2-a1d0-6f76afd09370.png":{size:8915,md5:"9273a76e641f8934d1105c4922b25f9a"},"res/raw-assets/c3/c30d17e0-0420-4e33-a6fd-50d26e7b6541.png":{size:18462,md5:"e8b38009494f3e820eceef2e8123bb07"},"res/raw-assets/c3/c358200c-7ae5-4d46-ad05-f85706213a3c.mp3":{size:24076,md5:"4d7f40eae236eeef8a4095a99657aa23"},"res/raw-assets/c3/c3c34f2e-62db-49fe-99b7-f6b6e3fc8419.png":{size:435,md5:"52b341f41824c160a898082ef7187352"},"res/raw-assets/c3/c3c78a88-099a-4375-88a9-280f7491d12a.png":{size:2755,md5:"5ec2b5814346c5b305d9eddbdaffc854"},"res/raw-assets/c3/c3dec4bf-98a1-426f-be39-884a83357d31.jpg":{size:101486,md5:"644cfcb5ebd893c1271d7d178761fb26"},"res/raw-assets/c4/c4165412-6a22-46c7-aee7-53aa27a7b350.png":{size:1548,md5:"84b9ba8bea1798538d39b74c163b5225"},"res/raw-assets/c4/c4493d58-cf35-4196-bf7d-cbc83ea1e1fa.png":{size:1852,md5:"929100ec270021b367859405512f1346"},"res/raw-assets/c4/c4750bb8-f344-4c36-909f-0a96ad93a15b.png":{size:1303,md5:"edbd4382cd5d225cb841ab46775f2fa9"},"res/raw-assets/c4/c47ab96b-a78e-4405-af6d-3da2067a087e.png":{size:510,md5:"be481e147f46f57eeca00e747b71db30"},"res/raw-assets/c4/c4990afb-3284-44e3-bb2e-fe67ba89d055.png":{size:1878,md5:"54d75a25d77c83c90e9278a7cf86b757"},"res/raw-assets/c4/c49b1e66-6719-4fe8-a1a3-84bef01a6022.webp":{size:980,md5:"bef3b679de00ea685222778cb5efb862"},"res/raw-assets/c4/c4aa0f78-cd62-4163-83a1-f0ae6f8ea5df.png":{size:3983,md5:"29498426e13aa2c677b40e5e65173d78"},"res/raw-assets/c4/c4bfa720-7b92-4b34-aa4d-9ae9fe8fa5d5.png":{size:5188,md5:"4c8aa67fa86f1c5e2507d3be59c7615a"},"res/raw-assets/c5/c51a57a1-071a-47b3-86f8-cd343ad70ee8.png":{size:1614,md5:"d558dea1de7dfce1468c935dbd02d15d"},"res/raw-assets/c5/c5631328-2b25-42a4-870e-93b18a52cc5d.png":{size:5188,md5:"5233b0ad3aa867c26bfba33f28230b85"},"res/raw-assets/c5/c56eaf7c-4c8a-4863-af04-59b7c8331bf8.png":{size:1837,md5:"6f4c1a9cbcbc366fc5a026a0ccbcb61d"},"res/raw-assets/c5/c5db8f16-fc78-4103-8342-a4a4bfbad4af.png":{size:4845,md5:"851c17a25c27124673a75da192f4aace"},"res/raw-assets/c5/c5ea2a05-a9b9-409a-bfb7-b697aaa725d3.png":{size:2973,md5:"d824df94589c3221a991ba4eb368f8a9"},"res/raw-assets/c6/c6504b8f-811c-4b94-b365-9040cafd65b2.png":{size:5823,md5:"2f1f049792e96c712c47fe46fd9d8216"},"res/raw-assets/c6/c6bf2813-a9b5-412f-a990-b73b9a62529e.png":{size:25359,md5:"777de32cbe317121f344a691c8a3647b"},"res/raw-assets/c6/c6cc8e6f-e169-4d5a-b0a0-7f4ad7c45811.png":{size:2157,md5:"7ec1f4843537828dc8e6696bc7a055e1"},"res/raw-assets/c7/c72d4444-8d79-4790-925c-f0596c407a9a.png":{size:1685,md5:"91ac7eaf0e4f633e033ee8d1c5c47684"},"res/raw-assets/c7/c7334b02-c598-49d9-822e-dcc4e3f38f2a.png":{size:828,md5:"410658e61c77994fe335dac2c05617c8"},"res/raw-assets/c7/c7a2064c-c2be-4af9-8761-161c850c2c10.png":{size:2016,md5:"90c2856e653efe4c4ba29d8ccdce45cb"},"res/raw-assets/c7/c7c5fe1d-5190-4a61-a6f0-043a59e8166e.png":{size:827,md5:"bb8fa43ce211e11ff9cf52e384493066"},"res/raw-assets/c7/c7cee38f-9714-4ca7-802a-efe9a95a6bbb.png":{size:6619,md5:"c170b2888c03cf1d1b8109fcc7fd1269"},"res/raw-assets/c7/c7e34849-77f7-448b-be78-933383b8dec1.png":{size:2277,md5:"299b9d9231e879771d26fd686b30b2f0"},"res/raw-assets/c7/c7efb6d9-5c88-4e04-8d32-43173cb57d21.png":{size:1885,md5:"a4d61d845d3243d33f3688d24ab08ecb"},"res/raw-assets/c7/c7f2450b-b358-43d6-9e23-8d64ce62ebef.png":{size:783,md5:"45fd4d2e940fc4b8805490d25d743612"},"res/raw-assets/c8/c8491e1c-7863-4e99-b6dd-e8b9d0face48.png":{size:50222,md5:"0c3c7eb2b3e83ab5127ede4258da7e12"},"res/raw-assets/c8/c8f3529f-abb0-4b8e-b313-7948a8baf58e.png":{size:2451,md5:"d8841fb5f5fa9991c15b448a606149dd"},"res/raw-assets/c9/c9329983-1c8a-43c0-8da1-0176914efd0e.png":{size:2996,md5:"3ed02aec2172aff19365ed2b653de304"},"res/raw-assets/c9/c93fc02d-5a5f-4f72-ad49-f099117f86ad.png":{size:2702,md5:"942cea33ce591bde34f7fafbaa9ba374"},"res/raw-assets/c9/c93ff198-de39-482e-82ca-368d691b01ca.png":{size:941,md5:"f98be88d72037154658bcc13465562cb"},"res/raw-assets/c9/c98358d5-c234-4170-b684-efae17a91193.png":{size:1880,md5:"9208bc9a2ad2a58fd2527512a62bbc10"},"res/raw-assets/ca/ca70161a-2692-41b7-aa85-6a2aabfc9c9a.png":{size:463,md5:"988c8902539b6d0067bb677a669e2acc"},"res/raw-assets/ca/ca80031a-c479-4354-b3c7-6d2509c304bb.png":{size:2790,md5:"e7931286114a367eee4d8be8a88b3506"},"res/raw-assets/ca/ca956c36-b3c3-41ef-ba04-0b97dbca9075.png":{size:1829,md5:"fc70401a1ada83d97fcf909f62179d4d"},"res/raw-assets/ca/caadb7ee-0682-4655-a56f-bf1c6d721999.png":{size:1513,md5:"6f6704211cc7a32a85649644fd59f83e"},"res/raw-assets/ca/cafe542a-8e45-40e1-b5cb-ae46b1e57d81.png":{size:2267,md5:"cb1beefea2497d2ba599826fdaf5c05c"},"res/raw-assets/cb/cb073e94-a3d5-4439-9c38-c5bb17c0069f.png":{size:3483,md5:"cad34114cb825038c97643e43e8f7ad3"},"res/raw-assets/cb/cb2b9319-f793-45d4-9aa6-58fa660fd3ea.png":{size:589,md5:"17d6b75566caa809efee11eef383bad2"},"res/raw-assets/cb/cb9dcf9c-e6c9-40b6-be6f-c4ad2a4e6d3c.png":{size:1202,md5:"90e95842d7a3316ebc6d912fee11cfc9"},"res/raw-assets/cb/cbc172dc-aec6-4612-beff-7c283135fe7d.png":{size:13742,md5:"e83137743845655c5147e2bebe360e94"},"res/raw-assets/cb/cbdae330-fddc-44ce-b974-1a79ce689317.png":{size:1673,md5:"caf37e1cfcee319e60e3e738610563b2"},"res/raw-assets/cc/cc1a9db6-15bd-4213-8000-9b9db729cf39.png":{size:1219,md5:"22403505f5cd0c78131147192be37d35"},"res/raw-assets/cc/cc260ee5-4634-4209-a4c0-fb7aba625f77.png":{size:437,md5:"d0c516d817fc1724cfda19f75cbdf0a1"},"res/raw-assets/cc/cc366dcd-7696-440d-b159-fd888420df9b.png":{size:811,md5:"9fbc21d61be90d3b3e7f653782e72a32"},"res/raw-assets/cc/cc3b2167-6524-43b5-aada-b4a306a20673.png":{size:16297,md5:"a6a433c04702b6f4f3f9483c2c834059"},"res/raw-assets/cc/cc429b99-f805-4199-b1ae-9b8b04249cbe.png":{size:1663,md5:"7c7c8fdfcbab1a9c15112390ccafb6f9"},"res/raw-assets/cc/cc4d24fd-6c5b-4213-843b-04ebf5bcad39.png":{size:1227,md5:"e161f6bdeec4550740ee05922698f577"},"res/raw-assets/cc/cc7ca3af-f247-487a-bedb-3701875b4755.png":{size:2016,md5:"90c2856e653efe4c4ba29d8ccdce45cb"},"res/raw-assets/cc/ccdf14f1-2ee2-4257-aa76-46298be3e7c1.png":{size:620,md5:"ebb8435f0cc614b210294b7ce0f8b0e8"},"res/raw-assets/cd/cd089e3e-e06e-4008-a7ce-fe5a3266c9c0.png":{size:2728,md5:"f0175a17d2f8c928a2afb02879fcde8c"},"res/raw-assets/cd/cd2b9a3c-b5d0-4ad3-a407-e01806aca0ba.png":{size:6152,md5:"0d7f9ad9b7fecdeef4773c70e00e0026"},"res/raw-assets/cd/cd905f4a-9c5f-42ff-84e5-ccb18c9b70c7.png":{size:2260,md5:"aa087249711a532cf5ed818422bd909f"},"res/raw-assets/cd/cdee676b-bab9-4361-8c08-1c0fd0d81cf3.png":{size:2823,md5:"fe560fb0e76bb05102528f75684a2185"},"res/raw-assets/cd/cdf1d377-ee61-4c50-98cb-2c0ba8ab0f53.png":{size:784,md5:"03ffc5dba41347408b56df7e639295e4"},"res/raw-assets/ce/ce0a3e7c-a3c2-4b4b-956b-1cb55e013d4d.webp":{size:824,md5:"0fd7af9acb6cf986870df53a0b15b26f"},"res/raw-assets/ce/ce234498-028f-4b72-a88a-5bf19e670727.png":{size:29379,md5:"106c77a153688388347e1dd7321494ed"},"res/raw-assets/ce/ce9d187b-4ac2-44bb-a7a7-88565b2a74e0.png":{size:611,md5:"e48ad3742156fec1c64b2e285e2d09f9"},"res/raw-assets/ce/ce9f084d-936d-4620-a32c-258ff226123b.png":{size:2820,md5:"ab43f1cd2f819257327c67d0f38e8e75"},"res/raw-assets/ce/ceb584d8-a718-45e5-b1ff-5f031812c01e.png":{size:5412,md5:"082c71432ef81484b9cdf30ab69f5af9"},"res/raw-assets/ce/cef4588c-0d44-4d3a-bb34-c8fca4ce765f.png":{size:2415,md5:"efea38d6ff7c5b22dc7b924501375fc6"},"res/raw-assets/cf/cf19695c-1085-4a33-a4d1-2424d89ccf7e.png":{size:1012,md5:"563b48c3346efa74ecb210115b86a771"},"res/raw-assets/cf/cfebf4e2-1c06-4360-817e-880259dd3e8b.wav":{size:85414,md5:"82942c767f292c3db906d5a1cfc73b75"},"res/raw-assets/d0/d0014f68-9019-4cff-a46f-6caf15266d77.png":{size:3621,md5:"7868f3d7f1270aebf5b47fc85207e225"},"res/raw-assets/d0/d0dbf388-4e9d-4e41-9950-2eab9efbbb31.png":{size:13972,md5:"fed5fa162b3950cb3c2cf9b193858939"},"res/raw-assets/d0/d0e5b7f7-ae89-4f68-b73b-37018e24ed69.png":{size:5844,md5:"c21db26279fc5a5ca257668b311258d3"},"res/raw-assets/d1/d1109ae2-7696-4705-a9d2-94179017ea96.png":{size:3337,md5:"8e916b0893c0ff5b177189452d4377e0"},"res/raw-assets/d1/d18794bb-c5da-4b9b-b524-d3e052b57d57.png":{size:5470,md5:"0ce71812209d05b3254c8cca77704455"},"res/raw-assets/d1/d195dfe3-e162-4657-bde5-eca8c57eb52c.png":{size:1979,md5:"67aab5f4c7cbd4290ae17b26a515677e"},"res/raw-assets/d1/d19bf3c5-d73e-479a-97ee-e75fa49d9291.png":{size:686,md5:"0bd80837494cecea36a5db9609f06afe"},"res/raw-assets/d1/d1bf79a7-cc62-407e-a065-cc54b8090cf1.png":{size:2660,md5:"173e2a62882cf8c43f66f677ea9b08c9"},"res/raw-assets/d1/d1f56e4c-eab6-4d21-abb2-015b67025fc3.webp":{size:538,md5:"dcd7a647d18f9bdeb421afdb10833150"},"res/raw-assets/d2/d20797e9-fbc4-47de-a6cc-c87bfae7ed6a.png":{size:864,md5:"a8dedba831dbdfce04aafa05eebcc232"},"res/raw-assets/d2/d225c874-89f5-44f0-8663-fa7b76c55485.mp3":{size:3988,md5:"e3f0b5b1a5b2918b33f524d1d97bff47"},"res/raw-assets/d2/d2360ebb-6f94-4384-9148-57c4eb004a9e.png":{size:4601,md5:"58ee0a1e5d3b26712d12b7226a336379"},"res/raw-assets/d2/d241f7cd-29a2-4761-99a3-e46fa686c883.png":{size:46864,md5:"bb4bd04101e1debe6b44a68d8d857ed3"},"res/raw-assets/d2/d247a920-b593-44bf-be79-11724a6da8f2.png":{size:974,md5:"27a6cbfc150232fcc96b360debb4deb1"},"res/raw-assets/d2/d2513fbb-6251-4b06-aba1-93150051658e.png":{size:1138,md5:"bcc679f9003e46db2a588f3c3704a302"},"res/raw-assets/d2/d25f8458-4dc2-4de3-a69f-7d7d5bc6e23f.png":{size:6192,md5:"30df75972332904d28e737c273681acd"},"res/raw-assets/d2/d2a5457a-ddcb-459c-888b-7c64aa0d9146.png":{size:900,md5:"e808861e54b51a6075903d69c320aed6"},"res/raw-assets/d2/d2b1ee51-c9bf-49fb-a863-7dd687c9b517.png":{size:1185,md5:"5c24c78f4563141a881fbb1065ffa2c6"},"res/raw-assets/d2/d2b5eec5-da81-4bdd-8236-02819f1dc30f.png":{size:8625,md5:"8ad23423487a0b37e7c0d3917e7cf503"},"res/raw-assets/d2/d2dd06e0-5414-4159-8b16-5473a19a446a.png":{size:4870,md5:"c607b0ec561276e4c73296edeeb2e631"},"res/raw-assets/d3/d3580152-67e1-4d3f-bcca-20f5221ee687.png":{size:689,md5:"a02f403bf2db6ad69bd38ff8e0592f7d"},"res/raw-assets/d3/d3f476d1-36c7-4a6a-9e0c-d87b60398a54.png":{size:2130,md5:"9a4d088ca58889e09505d3b83ce45842"},"res/raw-assets/d4/d40d9122-bd50-4085-89dc-ce0116dd5381.png":{size:1408,md5:"979ba05197a8ef0784e282e9d1b81570"},"res/raw-assets/d4/d450a06d-55cd-449d-b3af-92e516523ede.png":{size:3002,md5:"3141a2598b2dc7eae301faee75dea3bb"},"res/raw-assets/d4/d45fe73c-f865-4ff8-a868-2c16aa1f432b.png":{size:6289,md5:"ad88f77f54cd1d10e806d74cc32f50e9"},"res/raw-assets/d4/d4a1fc7c-92c8-47c6-b65d-818e8d14df95.png":{size:18361,md5:"ddf6c6df5bad734482a1a4329049b686"},"res/raw-assets/d5/d5105bca-79ed-46ed-aba2-0d3f0cdf34c4.png":{size:1468,md5:"1ddacb261b47a4eeffdec39441ca5840"},"res/raw-assets/d5/d5291563-0b01-4be8-8674-30a78db03871.png":{size:7230,md5:"9679535d80af42d62b3343a5e32efca7"},"res/raw-assets/d5/d5497b62-3655-4930-b874-4bede52a2ace.png":{size:1103,md5:"1570f8302a64fb8f9156b50b6f554116"},"res/raw-assets/d5/d5660fa0-88d6-4c56-b225-7430e33b060a.png":{size:15608,md5:"2bd1736e393590f74cb7b1160b1dcb38"},"res/raw-assets/d5/d5b591e0-14b2-4685-b03f-fb7454b2bb5b.png":{size:2951,md5:"4076f7fe92e6a64d691144f0dcd8cb42"},"res/raw-assets/d5/d5fe077b-f1cc-4070-b954-6455d759f673.png":{size:1658,md5:"0fa6710e4e38d1baf958926b367e4bfb"},"res/raw-assets/d6/d6451fc5-53ec-4f9d-947a-bae64e935251.png":{size:3926,md5:"af4fdc9fe54fe75690009aeda705454d"},"res/raw-assets/d6/d661c3d3-df8c-4feb-8607-31736fc24d0a.png":{size:2577,md5:"c2dd80a33f305b965cead3d8ecdf3d34"},"res/raw-assets/d6/d6752628-d8e8-46ee-8568-b37922922ed3.png":{size:995,md5:"fa162178fdb3e0630213128174561f7e"},"res/raw-assets/d6/d691fdd2-9144-427f-82c4-580f1e1d495c.png":{size:1609,md5:"4a4fe5d983d36ad10cb1d6d610198669"},"res/raw-assets/d6/d6cf847c-e8f8-46fb-9230-8ce85504a7a2.png":{size:1190,md5:"a66f6c6181b59ed3d43ac2b80f0eb5b8"},"res/raw-assets/d6/d6d3ca85-4681-47c1-b5dd-d036a9d39ea2.png":{size:1047,md5:"d55c2eb11156ee03fcc4549419c7f61b"},"res/raw-assets/d6/d6db70ba-8234-4e57-84b2-43b5b9ddf2a6.png":{size:13560,md5:"1db5183ad2e064d3e9634de1131961f4"},"res/raw-assets/d6/d6dd4270-55e0-49a9-90ae-0a7709f8bf93.png":{size:2675,md5:"4f41f401d635f2da97bf0097f9fc9cf8"},"res/raw-assets/d6/d6f46ec5-aa6c-4c33-9e93-2997af0c74c5.png":{size:3415,md5:"6f2ea34507dfe7d7713c5dd0993b3735"},"res/raw-assets/d7/d7093726-03ab-4319-b6ff-d9095c0284b1.png":{size:7583,md5:"5fd62a6641de00fae38ceeb0922e0cc6"},"res/raw-assets/d7/d74d69e5-432d-45c9-9116-41eed41be175.png":{size:1955,md5:"d251996610bf6e025e33b3f03b95d489"},"res/raw-assets/d7/d75317ca-8439-4f11-9aca-d4069f26f29d.png":{size:1907,md5:"ae16a84a473a8ebf751f6ad5a4b4c6cc"},"res/raw-assets/d7/d75ea33a-125f-4870-aec9-7a4490308990.png":{size:1600,md5:"8d68236a2ea24786dc5f91e29f46656d"},"res/raw-assets/d8/d81ec8ad-247c-4e62-aa3c-d35c4193c7af.png":{size:158,md5:"cdbc996e9ab38bf90c517c528459810e"},"res/raw-assets/d8/d83cf535-3e2a-4a43-acfc-973f9ac7d733.png":{size:2145,md5:"4079454e65df2a90bcb44f53c58593c3"},"res/raw-assets/d8/d856d1a7-2042-4fcf-9564-d468acf1fd9a.png":{size:1712,md5:"3faabbdfbaeeb30b2898112d489fb261"},"res/raw-assets/d8/d8a49793-572b-4e3e-b963-735f0f9c0ac5.png":{size:2482,md5:"bebb778645cb39ab88dd76bc9de01bf7"},"res/raw-assets/d8/d8c1cb3d-1480-4cd4-b844-39db08853b87.png":{size:4618,md5:"8c5dce4a72126228547fd8e924f456f3"},"res/raw-assets/d8/d8e9a28f-9d64-4611-a369-474a88735707.webp":{size:758,md5:"c766e81c761752cfc3e675550aefe4ac"},"res/raw-assets/d8/d8faf608-44aa-47f0-81db-32f152b45e40.png":{size:3926,md5:"af4fdc9fe54fe75690009aeda705454d"},"res/raw-assets/d9/d90999e0-551a-4227-826c-8c6631911694.png":{size:4923,md5:"5ce3258bd515b2b312bc74f573e24983"},"res/raw-assets/d9/d9374f21-9ea7-457d-a5bb-84bc987aac57.png":{size:9531,md5:"b6030b9885851bc5312b6d1a750959f6"},"res/raw-assets/d9/d9404963-be9a-47bc-9a72-03c4426e3260.png":{size:1702,md5:"86ee8cadbf32f4b70ea79a834a0df94f"},"res/raw-assets/d9/d9874218-ba94-4aea-ac47-0036548ef6b4.png":{size:853,md5:"43fca29fd9d6cde1f0ed218c3bf2a39f"},"res/raw-assets/d9/d99d760b-0600-494c-94a4-7110b1864972.png":{size:3083,md5:"7e97d4d79558c3e18d10ec4d4753315f"},"res/raw-assets/d9/d9b8cf30-bc0f-4ae3-8331-ebf38accf263.png":{size:7178,md5:"524582975933be170beebf057602f766"},"res/raw-assets/d9/d9e2bc19-a46c-4464-88be-8eb19fa6e1cc.png":{size:4383,md5:"1bcd06f49b13c3a4d58da0857335d889"},"res/raw-assets/d9/d9f74f40-0f36-42cf-a907-11aecbdc8f90.png":{size:1001,md5:"c1d49240a64205b9b653789d101d8d66"},"res/raw-assets/da/da12fac7-7390-4a6a-aec8-6c6739581295.png":{size:2880,md5:"3002f36b9cc30a96316017c9c7de54ba"},"res/raw-assets/da/da1438f5-3ee0-460a-a539-2381883369fd.png":{size:1968,md5:"e66bc3bd1452fe651fd6b8560847107d"},"res/raw-assets/da/da1a6e1a-857f-42a6-91e3-a807cba78214.png":{size:18438,md5:"e276f3a71401cc327f2379b28000a1b0"},"res/raw-assets/da/da24d8b7-85f6-4e5e-a70d-d1dc37bb9ebc.png":{size:406,md5:"0cd1cda6888707945e47dbd1495cc9b7"},"res/raw-assets/da/da7f5b8e-3e23-4fb6-9c4f-4858e718cb4a.png":{size:1607,md5:"c839fc722d97acaa13932862ec753b26"},"res/raw-assets/da/da91a59c-5b26-455c-aba6-b999eade7e9b.png":{size:3974,md5:"6d2675d85cc76661844890cdaf87d3a2"},"res/raw-assets/da/da9a4642-718d-449c-893e-ff23a667decb.png":{size:5364,md5:"8cd79f01fc4b362fc370cfe79f91ee19"},"res/raw-assets/da/dae1ca3b-ffb9-4d32-a47a-e5537d67d988.png":{size:8477,md5:"f1661215907d4cc4cc6c706e2abd3114"},"res/raw-assets/db/db4f4ba5-53b2-43ad-83ae-40b29e76a010.png":{size:1149,md5:"1d4826430d2814176142b0bf1cb2153f"},"res/raw-assets/db/db566db3-6af6-4429-a2a1-be373481983a.png":{size:10242,md5:"9940436621409131d35a98e5e650f76f"},"res/raw-assets/db/db7d7e0b-b421-4bb7-b946-a24949652a74.png":{size:1393,md5:"3dae274434cc5cdbdc0538fe846a70e4"},"res/raw-assets/db/dba3591b-29f3-42f7-be8b-55432753cd34.png":{size:485,md5:"7fcb4ef9c16a24d8bf59b68145d49efe"},"res/raw-assets/db/dbdc3ff4-6499-4b04-9def-1da33533d336.png":{size:1496,md5:"50db41a7175384984884c8d8ba3cb2e6"},"res/raw-assets/db/dbf3ee02-4256-4685-8ac2-00dbe8bf6b4d.png":{size:620,md5:"2d091be4fdf5112258e6315339ac5a12"},"res/raw-assets/dc/dc8900d5-9c52-4445-9ecc-04eaeab3ab73.png":{size:10643,md5:"83e846c94d0a6931a6af959f44859639"},"res/raw-assets/dc/dc8cff42-13eb-4173-af93-ce5fb153fbf0.png":{size:5307,md5:"b7fe2e8e29b7c0dd15bb4c4e50c9eb88"},"res/raw-assets/dc/dca61360-9c56-49a1-829e-29f36e61d01e.png":{size:4704,md5:"9fe86f861644eb62e4e827322ff43844"},"res/raw-assets/dc/dcb5a76b-8e8c-46e6-8ce7-358d8adef4a7.png":{size:1866,md5:"528ec4e3c2681c8df53f4ff288539a42"},"res/raw-assets/dc/dcdf528a-e4ef-408b-991f-e65aa1492a67.png":{size:15409,md5:"9d31b8fc3d58a3d1735fb666f255a9fd"},"res/raw-assets/dc/dce3eb41-036f-4233-b6a7-72ac4771ee5c.png":{size:4554,md5:"0103b757c61f3009e8126d8a63982cb9"},"res/raw-assets/dd/dd01e073-6af1-43e5-ae33-61e6530e33ea.png":{size:14530,md5:"e84b41995b4eab078bcb0f75e358ae6d"},"res/raw-assets/dd/dd26127b-7d38-44b6-8b8a-ac5c54b1e8db.png":{size:824,md5:"47b8dd3e6a5167c8cd8b3d00b8968f19"},"res/raw-assets/dd/dd55471a-16de-4b3d-b710-d9260d624b81.png":{size:582,md5:"aaeeb9e16bd8af3912c6b4889bbb30e4"},"res/raw-assets/dd/dd69b6ba-b85b-4f2a-aa28-d4fd1035d567.png":{size:6621,md5:"c66e80fdc334fe04c01a89a673a5664c"},"res/raw-assets/de/de225d2a-729f-4cd3-9f0c-6dd95d6fc7a2.png":{size:10498,md5:"64b71e01cb7c51e7aac9a0433de575dd"},"res/raw-assets/de/dea75457-1587-49bf-89d0-b0b9620a5b5e.png":{size:14058,md5:"15eaaec494920a7981f3c729c469583a"},"res/raw-assets/de/deafe85f-e947-4d0a-b3ac-841927717349.png":{size:5778,md5:"4d4c1c328cf1dc68d68dca0fb39dcd6f"},"res/raw-assets/df/df276d79-8f08-4b1f-af31-175921cb4427.png":{size:3619,md5:"4880f2a340154b76a272260847c3aa2e"},"res/raw-assets/df/df42a3c0-ed16-4641-9a50-74d8109ee277.png":{size:1500,md5:"07460c27449bafecfd7d0457baee9d75"},"res/raw-assets/df/df51bd37-6197-4493-9570-6196e3eb2898.png":{size:2860,md5:"e644e6d03575abb94437f267c736256b"},"res/raw-assets/df/df898048-fc8a-4be1-955d-488f57664d82.png":{size:612,md5:"c455d6d7c3d257181b6ce810734e8473"},"res/raw-assets/df/dfed63ee-63f5-4776-8a67-e70c7d5b8d9e.png":{size:2073,md5:"703b418f12d9a7796c1974e1fea36e10"},"res/raw-assets/df/dff49e1c-c0f1-4606-b496-ec55037f1105.png":{size:15872,md5:"4f3af66fda3fbd0a225714ab1c47d1ea"},"res/raw-assets/e0/e0242dde-05b4-48c0-927d-e7ac50f4ac82.png":{size:1002,md5:"67ad9fc75ea10ecab5148710eef7b80d"},"res/raw-assets/e0/e03b3ab1-6d66-474b-b18b-5ddcdd3bb51e.png":{size:2266,md5:"dfeb93e3d637e80bd8b5aeb1fc02c3bf"},"res/raw-assets/e0/e0574c06-7b98-470f-9dad-4b07a74830ef.png":{size:1943,md5:"dcbe4ce7fbde81ad553c611ec799f37c"},"res/raw-assets/e0/e060368a-2287-4331-9544-7cb509ead91e.png":{size:581,md5:"a4cdb1a16fb88fcbf5b33714cc85f9eb"},"res/raw-assets/e0/e0ac1c18-30f3-4214-89c9-b92e3d227f15.png":{size:3108,md5:"6ac9dea6db05cc04434e5b44e31ba60b"},"res/raw-assets/e0/e0af9c2c-f24e-4108-a969-6ecd379ec17e.png":{size:2152,md5:"65e4e72de3aa0761c34d2a688ad9de07"},"res/raw-assets/e0/e0dcc4c7-b0f0-47cd-814a-036194bc6d1e.png":{size:5010,md5:"ba0f6d3b80bf360766dbd74a270e9304"},"res/raw-assets/e1/e1573595-2f28-448e-b481-a4cdfa432c59.png":{size:1736,md5:"4e7998410680a8bf9410e145bcf14918"},"res/raw-assets/e1/e15e1f94-003d-48b4-bc10-376193ed4c6f.png":{size:16450,md5:"b3513387e667b8f3b65ad0cbed80edc4"},"res/raw-assets/e2/e234aa86-c294-4751-91ca-12f928695307.png":{size:2788,md5:"629124100c59c82f17f8973bc7f7b97f"},"res/raw-assets/e2/e257a8d5-3ff0-4884-bfa9-1b7a046ba74c.png":{size:1519,md5:"9bafbe3a3c5a4544e89ade3a6ed915b5"},"res/raw-assets/e2/e2587411-de1c-436a-9f0d-b15b0c9bd161.png":{size:8115,md5:"f27260a1b88156add894d8fd97556f83"},"res/raw-assets/e3/e320f13a-9baf-43ed-be46-de2c151a8091.png":{size:1471,md5:"d126b35478f6133246a3e553be6118b5"},"res/raw-assets/e3/e32192af-ddb5-4f5d-98f8-c338a122b2e5.png":{size:2834,md5:"1b18fe37c58ac2235314ddc2994c7e4b"},"res/raw-assets/e3/e388d0a4-8b90-430c-9f43-7ff451190b7d.png":{size:1483,md5:"f27c5e469427bac570ed0752bac6b8e4"},"res/raw-assets/e3/e3ae66ac-95a5-4fe5-bf3c-adeda60c64f0.png":{size:521,md5:"25af0afa228898ac63ed99c3e3f676d4"},"res/raw-assets/e3/e3d34f7a-8df2-4b5e-9ce2-e0a73f8a4ae2.png":{size:2038,md5:"14f10cb470588fbea3c19aff259f1a33"},"res/raw-assets/e4/e453dced-c1c0-4c53-bac3-45c361de17f3.png":{size:693,md5:"7e5ed202ca55f66179599cdede70602e"},"res/raw-assets/e4/e460c95f-47e5-48a4-8d0b-8f035c13aff5.png":{size:2383,md5:"81410c4ad5149e9a4547035c0c96a809"},"res/raw-assets/e4/e48fa369-bd5a-40e1-a71e-77a4b2681722.png":{size:2225,md5:"ddff1fb330bb79d83af715443951de35"},"res/raw-assets/e5/e57b3469-8b66-4579-8a95-58453f4c59b0.png":{size:1285,md5:"d76ccac3ca8ef1e81cb9c5d1bca01f07"},"res/raw-assets/e5/e58dcc94-3ff7-4385-a8b3-5ea08dbd9da2.png":{size:7106,md5:"e74c59b5c8a445c72210d070d2ca3fba"},"res/raw-assets/e5/e5b0a295-f9d3-4220-876a-7a45a6fc2975.png":{size:8746,md5:"ded682627c442669b7866cd11ab4fb29"},"res/raw-assets/e5/e5b16dbe-2385-42d4-b94d-3b6fa43aeec1.png":{size:525,md5:"7c5f6dafa20a226b110dd9bcd5c37dd6"},"res/raw-assets/e6/e65d8ed1-14ff-44e0-9ecb-d90ad6ef09cb.png":{size:10006,md5:"331d7f98b2bc35d26b4d0fa2920f394a"},"res/raw-assets/e6/e6e4abb6-b23d-493a-8192-b448e801ee2c.png":{size:6884,md5:"6ee771c5be6b1ecb758d9be38fdd4942"},"res/raw-assets/e7/e717b5a6-4626-4523-a935-503283f9afd4.png":{size:3240,md5:"d75d80ac23bca2ed82ada2e6f792bf00"},"res/raw-assets/e7/e7209e6e-522a-49fd-8fee-03e69300c960.png":{size:5254,md5:"80e9be0e568f05e2357910431ef095ef"},"res/raw-assets/e7/e7509e63-e20e-4a16-8bdc-3af6a0aa8c73.png":{size:1906,md5:"2498c2cb3ab01a4df3e55e36df14048a"},"res/raw-assets/e7/e75a778d-8b7b-4ad5-943d-c59598220614.png":{size:6424,md5:"80c08a881e5c98611daf7339b266fb5d"},"res/raw-assets/e7/e782ef5a-4d92-44a7-ae21-25900bd270bf.png":{size:736,md5:"28f5f421aae53e91f96bb164652473e8"},"res/raw-assets/e7/e7ca34f9-23d6-42b8-8731-eaacf94c1b4c.png":{size:16687,md5:"a8b0861fa40fd9f46ad900f9c13d607d"},"res/raw-assets/e7/e7e9b833-17f5-41eb-adb8-d5a7129cf732.png":{size:3448,md5:"1c733351165e72937bdb91e592551657"},"res/raw-assets/e8/e83c34db-18c8-4ea1-ba15-63c5b3df9bb6.png":{size:1626,md5:"4a4f514bfabaa92b89e9707bfa9f2108"},"res/raw-assets/e8/e851e89b-faa2-4484-bea6-5c01dd9f06e2.png":{size:1082,md5:"90cf45d059d0408bec327f66eae5764c"},"res/raw-assets/e8/e85ed6ee-3c30-419a-9371-f02a7b2a88ac.png":{size:1760,md5:"05f3cbbe0c8899da0ba269d438e22019"},"res/raw-assets/e8/e8cad2ba-508e-47b3-8aab-b516d522cd65.png":{size:3342,md5:"0baea87a0200d92e55a2880c5c61292a"},"res/raw-assets/e9/e9b1f0df-723f-45f5-a5d7-97d4db1599c8.png":{size:2503,md5:"131f1c4f982799f82036dd95e8dccf45"},"res/raw-assets/e9/e9d327e3-fd0f-4d33-b501-d78e8ff77fda.png":{size:4097,md5:"c1ea1e9e912a5f3196f830a1deb4831c"},"res/raw-assets/e9/e9f61348-63b2-4902-b078-337d0babffca.png":{size:4563,md5:"5cf55d646bb8ceb857d809a9f8ec0bf8"},"res/raw-assets/ea/ea140659-3e09-4381-b038-5a93724d1402.png":{size:874,md5:"529f99bebf5f36acf2c3ae45a101c1ee"},"res/raw-assets/ea/ea18e46a-c265-47fc-90af-61a9297538fa.png":{size:645,md5:"5e5c4c873dd6b3990b95b4e741a47602"},"res/raw-assets/ea/ea57c3fe-fe4a-413f-a11f-a414f349901f.png":{size:4791,md5:"ca3d600b756f1dd33b199175615bb7f7"},"res/raw-assets/eb/eb304c57-54f4-46f6-9b21-9c911a6b9c93.png":{size:465,md5:"adf7aabdc00d8469e8a5717088388edd"},"res/raw-assets/eb/eb58a503-f766-4570-b61f-7173966080b1.png":{size:895,md5:"badacf7bf7f6974aad25210af7633457"},"res/raw-assets/eb/eb64a15e-2974-4213-961a-7b2baef9a102.png":{size:4413,md5:"ef4c257ff7f8f1ffdeabbc24124af9ea"},"res/raw-assets/eb/eb924a5f-dfea-42d8-97a3-5391377bc862.png":{size:1146,md5:"f4ea28bbf8f86e0dac47c421703c40aa"},"res/raw-assets/eb/eb96c646-4cc5-41cd-9f63-9b8e25cf1f0f.mp3":{size:32435,md5:"2748e11bccb55a95e5a658f5206de95b"},"res/raw-assets/eb/eb9eb9ab-eb8d-46ce-a880-4eae01bbb97c.png":{size:4523,md5:"5adf73a0dbda4936b3d9e4e82682079f"},"res/raw-assets/eb/ebc6bfde-07eb-4aab-9e20-ad0d2a720397.mp3":{size:12791,md5:"a49b20c14abebc2f65ef111fb23c952a"},"res/raw-assets/eb/ebca9210-62ab-44e7-83a4-84d210f4698b.png":{size:2086,md5:"22849a811f81a7ea3c37f2ca58f136da"},"res/raw-assets/eb/ebe4060c-2359-4a28-923c-05c032dfe9b1.png":{size:4437,md5:"3952da971cc4fd9619eea13d4c6daf74"},"res/raw-assets/eb/ebeb377c-1bfe-4064-a229-28327aa5e695.png":{size:3062,md5:"4bed20c677152cd98e737b962cda29ae"},"res/raw-assets/eb/ebff51b6-c6aa-4277-8a71-2a6e7982cd6f.png":{size:4951,md5:"af9d80d147147ffadbaf63986b3776ea"},"res/raw-assets/ec/ec3b4086-ae0b-4d29-8eb5-217330981bf6.png":{size:2025,md5:"9a8c45a928fc03784ae8f9894b5dc51b"},"res/raw-assets/ec/ec55e176-6ce2-490a-aaa8-e2e20fb7125f.png":{size:1829,md5:"0e826df2e905fc04ae6667de632a7c78"},"res/raw-assets/ec/eca34156-141d-4c1d-b33b-1bbc841fa325.png":{size:544,md5:"f387a153cca2a05f9239b697af2915c8"},"res/raw-assets/ec/eccab7ba-1edc-48e3-86f0-92b0700a75ab.png":{size:42219,md5:"26399da00f122e84a384f64075ab649a"},"res/raw-assets/ec/ece43cfd-ff94-4092-b990-79f1f59ea2ff.png":{size:22721,md5:"0667538b73d57b82ce4813bddf15cf2a"},"res/raw-assets/ed/ed37bf5a-dfaf-4c61-94cb-5f279a625eb4.png":{size:1845,md5:"466db69f541ca6c83ec0213786d5e343"},"res/raw-assets/ed/ed7ddee4-0cf1-4b35-b19f-15032b8b934c.png":{size:2237,md5:"4b56f59d280bee9fd93990b33687e289"},"res/raw-assets/ed/ed98e876-1249-4dc8-b0c1-6d0b9b5b0a01.png":{size:7002,md5:"bff7d4b330bc7edf7af6bb9e75673dce"},"res/raw-assets/ed/ed9b2189-a686-497a-b13f-d251810c7852.png":{size:16519,md5:"b645a38498be26c1cfafbe7e5c8913a9"},"res/raw-assets/ed/edd215b9-2796-4a05-aaf5-81f96c9281ce.png":{size:1038,md5:"17df6c6f608454e43fd7c3c2a8c3d0b0"},"res/raw-assets/ed/ede5bee0-db94-4e5a-bf85-f5b9e05d4ea8.png":{size:2144,md5:"851454491137ab6797a149a0d9849d33"},"res/raw-assets/ee/ee0b4bcd-56b4-40ee-8ade-08ad14f0ceef.png":{size:2990,md5:"3ce0ba0818558f4f671abbd815fa1425"},"res/raw-assets/ee/ee2e6800-d519-46ed-b574-f5c86663442a.png":{size:583,md5:"80b5a16aee2a9f0919ef3043e0a14166"},"res/raw-assets/ee/ee4d1687-64b5-4d21-9be9-f3a132f7a461.png":{size:6928,md5:"47ed2056a51fa6b9336cb7c448744711"},"res/raw-assets/ee/ee7c5719-9cee-461a-a71b-97e2ba42df71.png":{size:756,md5:"3ebf619f7f3860f598df45740ee45608"},"res/raw-assets/ee/eeae739e-a469-40ca-93b5-bf7371309279.png":{size:2472,md5:"a4faed3eeca6c9b069f7a06c7d7e487c"},"res/raw-assets/ee/eeb7e4c7-a4ed-4683-9cb1-ece1fb3862cf.png":{size:3293,md5:"1cb01aab8beb99a424633d8938365cb2"},"res/raw-assets/ee/eebeb24f-70fb-4365-9a16-720ecbe0df20.png":{size:1177,md5:"db28f553a4455b68b815e436129b5417"},"res/raw-assets/ee/eee8cb99-a137-40e3-af83-bbe791d6b65d.png":{size:14060,md5:"6ae6aa92f94d14bc484507aeccb5de65"},"res/raw-assets/ef/ef339d6c-e182-43a0-a87e-507c450a6a9a.png":{size:9720,md5:"c4434c4b9f60e73799fca063bec12cb1"},"res/raw-assets/ef/ef620564-a4fc-48ab-8a65-fa3c7d11b547.jpeg":{size:101632,md5:"bb5a679f63f0531339a9594fb7bc264d"},"res/raw-assets/ef/efdd1dd2-e9cf-43be-9106-36da91323f06.png":{size:949,md5:"97b9a7a95608ad5484986b126144aecb"},"res/raw-assets/ef/eff182b3-e7b7-403b-99c3-e16d89100247.png":{size:2495,md5:"110377276b2d62ad6c58c43e6c222bcc"},"res/raw-assets/f0/f01bd796-92f1-42a6-b30b-4e2e712ff682.png":{size:3943,md5:"6cb5875c223bdd79bd7fee47d680872e"},"res/raw-assets/f0/f04b8b25-27bb-4fac-a928-8fbd8a0e5c05.png":{size:631,md5:"e4ffb88d5a82ac9f0ac6018eb24183d4"},"res/raw-assets/f0/f05292f6-a5aa-4f82-8546-e56cc06a4a34.png":{size:2501,md5:"f2ce2b34e6b046c87b3853dbff122b22"},"res/raw-assets/f0/f0771ede-7de7-4d10-8fbe-ca3e55880f88.png":{size:1891,md5:"e8ead9dca7f7ef4b681448196ad5cdac"},"res/raw-assets/f0/f0847dee-4e0d-4b09-bb58-e283b6dd4d94.png":{size:1981,md5:"1685c628dcab59015490f5429934dacf"},"res/raw-assets/f0/f0995864-0d99-4828-a31a-a2c42842c714.png":{size:1155,md5:"3554f73a26202f54b519bb2e9547aaf2"},"res/raw-assets/f0/f0a3c97b-920a-45be-bf36-72608c53ac2f.png":{size:2028,md5:"ca0de4a2583c215848252772941cae11"},"res/raw-assets/f0/f0fa5cb1-4b57-40b5-9e77-a12f77a80e29.png":{size:11055,md5:"99ac9cbb0c9960035dd8a28e1f748c06"},"res/raw-assets/f1/f1b95677-afd1-44b5-934d-b6e15306e411.png":{size:721,md5:"35384545928d2ed6739ab5a6916eeb3b"},"res/raw-assets/f2/f246fcd6-0b3d-490b-8e2b-b65531018ee7.png":{size:6838,md5:"d729c4728f46260eef9715ad399057ab"},"res/raw-assets/f2/f275c7ad-cf4a-470b-b18a-6b05117d2f84.png":{size:4596,md5:"0bd064371cce0eee188a213d193f71e8"},"res/raw-assets/f2/f2f54ec6-2632-40f6-b8d0-71bd9b63a22f.png":{size:2048,md5:"cb154ec19a5e07ff4616924453dd43af"},"res/raw-assets/f2/f2fe9737-87dd-4503-a39e-4f7b212a098d.png":{size:1289,md5:"c60a621e7a2ce6fc6c869838ef8d9eb1"},"res/raw-assets/f3/f30b7937-1072-4a70-ac94-4af49cd550d6.png":{size:1145,md5:"13790c76e5b469d7a5c1bf0cac461a71"},"res/raw-assets/f3/f34ff75b-e580-4a7e-89a7-fa99a0a4428d.png":{size:803,md5:"71b96de7ab3f5e619fb2f9ce999b4dcd"},"res/raw-assets/f3/f37719ca-9f60-4739-8f93-8ba065074ed0.png":{size:5608,md5:"abca96fc8620b9b7159f9d73bcd56fef"},"res/raw-assets/f3/f3ba9bec-bc87-4b05-9a34-c50dfedc8f0b.png":{size:1944,md5:"02822f03dce98168ab718aefbaef63e4"},"res/raw-assets/f3/f3bdfad8-ef22-4483-9984-6d468c0db8da.png":{size:683,md5:"4b1a920521b9362a1b71857de34b6dac"},"res/raw-assets/f3/f3f9c7bc-df88-4169-aa77-81c94690b761.png":{size:4102,md5:"95b607b42b941bbcaca09591a8c68a64"},"res/raw-assets/f4/f4140e08-f6e4-4d4c-9054-1b08f80aee07.png":{size:6621,md5:"55daf769196fd71e9b5111fa37f01e3f"},"res/raw-assets/f4/f4b33bab-9351-42d0-969e-a5e548b5f38a.png":{size:631,md5:"2ab2ec0ec4a62a2e42636f32c27a8657"},"res/raw-assets/f4/f4b87a7f-c64a-491d-a990-a1b3d60be0f3.pem":{size:226116,md5:"f4a13fcdd32ca18c3e62c7a728ebb378"},"res/raw-assets/f4/f4e46bb9-1d02-4b01-a9ed-de90809a89a2.png":{size:6320,md5:"6857d0728dcacbc9658b0de16a85f8ff"},"res/raw-assets/f5/f5444a20-0c2f-437f-aeea-7353405caf5e.png":{size:493,md5:"093765588104969e9aeb7dc06bff0f9d"},"res/raw-assets/f5/f5609e34-b400-456e-8c32-f82ad3480e5d.png":{size:1926,md5:"fd04a7755a76a7d959802f76ffbe3f26"},"res/raw-assets/f5/f5761e08-492a-4964-a4a2-cb4cf76f988d.png":{size:586,md5:"41a4d29b33e690ef77e4e62edf00d3dc"},"res/raw-assets/f5/f5a37544-1e49-4ff4-9514-fc373d62d3da.png":{size:4244,md5:"7b43c43cce869ff01029e896e5832ec5"},"res/raw-assets/f6/f63a2596-0103-4d00-980e-50cdf1e8e12c.png":{size:546,md5:"026fa681227f924c6888ad3ce1f10c8c"},"res/raw-assets/f6/f65172f9-1afd-41fd-b890-98c2b1061539.png":{size:6011,md5:"8a8b5e4f0912a49781f64ff89d7a0b18"},"res/raw-assets/f6/f6953b6d-a4ce-4eff-8404-c78a25e50c90.png":{size:4639,md5:"c92bfda38c80ecbe8701bbba02b22325"},"res/raw-assets/f6/f69a1a96-ec5f-459c-abab-3012ae2bc1c6.png":{size:3976,md5:"c7dbac014e5386aec8c03e03c871c8a9"},"res/raw-assets/f7/f7451aee-cbe5-4a5d-abea-36b1f4954e26.png":{size:2246,md5:"4e9bbb1fbe7977a28d5a2c3ff1e2f55c"},"res/raw-assets/f7/f7622f34-697d-4f1a-88b3-cbf33944784b.png":{size:2285,md5:"bbbcc0a26bdaf17a823dbe05459e3d65"},"res/raw-assets/f7/f7722dd4-5cce-43eb-9600-141eba975d8e.png":{size:3044,md5:"f0e7f30ebf6550cd1857e844f03129bc"},"res/raw-assets/f7/f7a429df-5882-4eb6-8b4f-1b1789fcb6d9.png":{size:3079,md5:"d5f94c3fe2c3d2dec1ab6e2686fc0d41"},"res/raw-assets/f7/f7ac195b-94e7-42cf-a5c8-a5c75400c7ec.png":{size:1462,md5:"b2920ef0ae778fecb5433690b502bd7c"},"res/raw-assets/f7/f7deb25d-b989-4cf0-93b6-e9502b44d243.png":{size:1910,md5:"ed73e3c987266eada00be29616f6c1f3"},"res/raw-assets/f7/f7e0bd05-a39c-454e-982c-1ea5536d8b61.png":{size:1198,md5:"a8c9755ce277fc10386c08c5b0479dce"},"res/raw-assets/f7/f7f9167e-df17-4568-99f2-9e5a988c5deb.png":{size:1111,md5:"0b731a343f08d32a4a67e7435990e0af"},"res/raw-assets/f8/f802f44b-5834-40a7-9c57-b14367d39a8a.png":{size:686,md5:"68d0a25eb40f098bb056abdf2bb47e16"},"res/raw-assets/f8/f87a596a-8931-426d-9341-aa64b51ee072.png":{size:2619,md5:"7c08ac978b51de34734b5195f0f4764b"},"res/raw-assets/f8/f8936971-3c52-491c-b014-9ba9248af2c0.png":{size:18859,md5:"5b4806a3887f792dd9dec2bce045df8b"},"res/raw-assets/f8/f8e13e52-9c3e-4668-b188-068cec1322a8.png":{size:3344,md5:"a2943b88eb3989370532f0687b890d19"},"res/raw-assets/f9/f98adba3-f6fe-49a0-92b3-004b9aaf9f62.png":{size:3955,md5:"5984365bca6c99c90cf718eedfff38ac"},"res/raw-assets/f9/f9a126e5-4577-4d29-99b3-aaca0dc8906c.png":{size:4938,md5:"6c9e2856d3e88152d96b3d2148f61260"},"res/raw-assets/fa/fa365cf0-47a5-4f0e-8ca2-be99818bf3d1.png":{size:443,md5:"3949b4785d22d94fccb0154009a5f6e7"},"res/raw-assets/fa/fa48e4d2-d3bd-41b2-9db6-86c9be0d9133.png":{size:1950,md5:"74577a864c87320f02278f52a3c47b7d"},"res/raw-assets/fa/fa57776a-0311-4d0a-93c6-b134ed6a3ef9.png":{size:2368,md5:"d869c1995cc110a1fd2ee95035cc2cfc"},"res/raw-assets/fa/fa83ba98-b941-4eee-8650-16e11d87a62f.png":{size:4473,md5:"0bf68f174a2716b1c63459384860bf30"},"res/raw-assets/fa/fab15d63-5376-493e-9e51-ec0f6f99fafd.png":{size:1529,md5:"22025650cf4820b2a62a94fd3908444a"},"res/raw-assets/fa/faba5fa2-4044-4367-8160-dd9a2300a668.png":{size:2276,md5:"a6bc37847f2fc8f5c8e5c10c86585144"},"res/raw-assets/fa/fac3e922-77b2-469f-8ecc-a81b6d00e884.png":{size:2116,md5:"ab4b04c0f0b218f67108f7db3a6cde5e"},"res/raw-assets/fa/fac7fa24-a151-4ab4-9c22-2e9b387f9d77.png":{size:1663,md5:"323cb1bcdf1cfd6e43a358d93c89c5da"},"res/raw-assets/fb/fb3114bc-bd46-410b-966b-b418099abb1a.png":{size:4992,md5:"4f2e79f9d05de69e50b91ab8ad6bb6ae"},"res/raw-assets/fb/fb39298b-532e-4448-b199-06feadcf6e98.png":{size:462,md5:"1895c84058c968a3076d855c41886cc0"},"res/raw-assets/fb/fb445f06-772b-4785-9eba-8bdf21c89e32.png":{size:2201,md5:"b4a0982bf5fca3533636ebb989d3780b"},"res/raw-assets/fb/fb88a23a-785f-4dfc-9a25-7afabc973fd9.png":{size:2172,md5:"57a58c1e569d1ee4aa89a212bacb9c93"},"res/raw-assets/fb/fbadc9a6-6425-4c2f-88a5-467a166c5a1b.png":{size:1090,md5:"d7cd62ecf4143e69f0f598eeb43c68d0"},"res/raw-assets/fc/fc1792e5-663c-47f2-b13d-96b933f8957f.png":{size:693,md5:"fc8a9f9548b9beaf1370d255c1f8e3a5"},"res/raw-assets/fc/fc4bbbf9-8dfb-41cf-ac99-4059bcfdf4ad.png":{size:2505,md5:"733642a96958cb3a09cd48989f853a37"},"res/raw-assets/fc/fc64a3b2-00cd-4e8d-9102-aa56eae2defc.png":{size:1811,md5:"e00ac995f562e294c6e29c9c977ec557"},"res/raw-assets/fc/fcab4725-06bf-476f-9a96-4fa89fec1d65.jpg":{size:98843,md5:"384742104ccb6a46022af2c962416110"},"res/raw-assets/fc/fcde7b15-c0ae-44d5-92a1-f31b9f4b840e.png":{size:861,md5:"e8fd066d234bd588fb8906d1c59ec048"},"res/raw-assets/fd/fd0b33ee-d4bb-45dd-ac7a-7ad9896a85c5.png":{size:11030,md5:"3665cf43616a318873c5b1915111d521"},"res/raw-assets/fd/fd18ad3d-465d-468e-a764-e205e3978b4b.png":{size:1974,md5:"9b237d6862c64d5dc61160e4023ff26d"},"res/raw-assets/fd/fd282990-c4a3-4c33-a6d9-09efa49409ba.png":{size:2184,md5:"87f1857a8cd0b479a9c10f85ffb13f38"},"res/raw-assets/fd/fd3a280e-71e9-4aac-90dc-0eb5ef836e5b.png":{size:2269,md5:"5ff9ebed9533b44e4918d839067555af"},"res/raw-assets/fd/fd516007-b1a9-49f3-8af6-d808d6020ef3.png":{size:4315,md5:"80a8d372f7d65ea86f15f2c1e43e21b4"},"res/raw-assets/fd/fdce5c93-11c3-491f-973d-646be149cd42.png":{size:1519,md5:"f6d72480283791dd49b66944909679ec"},"res/raw-assets/fd/fdd6b379-e8c0-4275-a939-43256c7c07f2.png":{size:1828,md5:"7eab9233d52c923d5175f5d2fb88904c"},"res/raw-assets/fd/fdf72511-be3a-42ef-b4cd-23ae2e50d551.png":{size:20080,md5:"b4ea48b7fd078b4d07561284b426e855"},"res/raw-assets/fe/fe47735b-7ed9-461a-a4be-68486d931708.jpg":{size:192247,md5:"b9c4740acc55ed6493d3677f8360bbd6"},"res/raw-assets/fe/fe5ae84b-29bb-444c-8cce-6c1dafb29d41.png":{size:2665,md5:"efdb8390bb2afe56bb263e4ae6df3034"},"res/raw-assets/fe/fe67596d-73dd-41e4-923b-ff3f10ceeb4e.png":{size:2223,md5:"b25b5f8cd8c6b27c7dbdcf0f5ae9caf8"},"res/raw-assets/fe/fec523d8-a033-4f3d-9e80-8c5b926aa00c.png":{size:1272,md5:"18ba0c58de4fac0e237f1435c5627df5"},"res/raw-assets/ff/ff5ebef2-5514-4fc1-9fb2-547042c4d8e6.png":{size:6488,md5:"4712483d62ebb92d0da10afbcf6557fd"},"res/raw-assets/ff/ff70e147-7e67-4fc7-9018-5690aec5f31e.png":{size:142,md5:"2d9756e22b31f951baf3db33f68638d9"},"res/raw-assets/ff/ffb0ecf3-f307-48c5-96e3-93fb195815f1.png":{size:1914,md5:"bbf7206ba1252e8879e35a6b8c27296e"}},i.searchPaths=[],JSON.stringify(i)},e.packageUrl="",e.remoteManifestUrl="",e.remoteVersionUrl="",e.version="1.0.3055",e.assets={},e.searchPaths=[],e}();i.default=a,cc._RF.pop()},{"../game/config/GameConfig":"GameConfig","./DateUtil":"DateUtil"}],MapConfig:[function(e,t,i){"use strict";cc._RF.push(t,"61b2b5/QcNHG4PLijMqSoN2","MapConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="",t.map=[0,2,0,0,1,0,0,0,0],t.monsterArray=[1,78],t.refresh_time=[3,5],t.refresh_num=[2,3],t.max_monster=5,t.boss={monsterid:1007,rate:5e3,num:10,rebtime:7200},t.elite={rate:300,num:100},t.header={rate:80,num:300},t.Commander={rate:20,num:800},t.map_shade={skin0:"button_ditu04_kuangdong02",skin1:"button_ditu04_kuangdong01"},t.drop_info=[],t.level="",t.monster=[],t.map_drop=[],t.des="",t.fight_type=0,t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.mapId=e.id,i.position=e.position,i.world=e.world,i.name=e.name,i.Lv=e.Lv,i.t_def=e.t_def,i.t_db=e.t_db,i.area=e.area,i.reborn=e.reborn,i.map=e.map,i.monsterArray=e.monsterArray,i.type=e.type,i.refresh_time=e.refresh_time,i.refresh_num=e.refresh_num,i.max_monster=e.max_monster,i.boss=e.boss,i.elite=e.elite,i.header=e.header,i.Commander=e.Commander,i.map_shade=e.map_shade,i.drop_info=e.drop_info,i.level=e.level,i.monster=e.monster,i.map_drop=e.map_drop,i.des=e.des,i.kill_soul=e.kill_soul,i.fight_type=e.fight_type,i},t.getMapConfigByMapId=function(e){var t;return this.configMap.forEach(function(i,n){e==parseInt(n)&&(t=i)}),t},t.json2Config=function(e){var t=this;this.bossMapList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.mapId=parseInt(i),t.configMap.set(i,n),n.boss&&t.bossMapList.push(n);var o=t.configAreaMap.get(n.area);o||(o=new Array),o.push(n),t.configAreaMap.set(n.area,o)}),this.bossMapList.sort(function(e,t){return e.Lv-t.Lv})},t.getMapIdByPositonAndWorld=function(e,t){var i;return this.configMap.forEach(function(n,o){n.position!=e||n.world!=t||(i=n)}),i},t.getMapMinPowerByArea=function(e){var t,i=this.configAreaMap.get(e),n=this.curMapConfig.world;return i&&i.length>0&&i.forEach(function(e){var i=e.Lv;n==e.world&&void 0==t?t=i:i<t&&(t=i)}),t=void 0==t?0:t},t.getMapMaxPowerByArea=function(e){var t,i=this.configAreaMap.get(e),n=this.curMapConfig.world;return i&&i.length>0&&i.forEach(function(e){var i=e.Lv;n==e.world&&void 0==t?t=i:i>t&&(t=i)}),t=void 0==t?0:t},t.MAP_TYPE={Field:0,City:1,Mine:2,Tianguan:3},t.WORLD={FanRen:1,LunHui:2,XianTian:3},t.FIGHTTYPE={CLIENT:0,SERVER:1},t.Max_World=3,t.bossMapList=[],t.configMap=new Map,t.configAreaMap=new Map,t.curJingJieIndex=0,t}(e("./JsonConfigBase").JsonConfigBase);i.MapConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MapInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"18eb6zcKx1KY6e3vJC3vzbU","MapInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/MapConfig"),r=e("../../model/FightModel"),c=e("../../config/WordConfig"),l=e("../../model/RoleInfoModel"),d=e("../../network/SocketClient"),f=e("../../../engine/EventManager"),g=e("../../event/CommonEvent"),h=e("../../utils/UIHelper"),u=e("../../model/PrivilegeModel"),p=e("../../../engine/UIManager"),m=e("../../config/ViewConfig"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.params=e},t.prototype.onShow=function(){var e=this.getChild(this.node,"view/panel");this.titleName=this.getChild(e,"1/titleName",cc.Label),this.mapName=this.getChild(e,"2/map/mapName",cc.Label),this.mapPower=this.getChild(e,"2/power/mapPower",cc.Label),this.mapLevel=this.getChild(e,"2/level/mapLevel",cc.Label),this.monsterInfo=this.getChild(e,"monster/monsterInfo",cc.RichText),this.dropInfo=this.getChild(e,"drop/dropInfo",cc.RichText),this.btnClose=this.getChild(e,"1/btnClose",cc.Node),this.btnTp=this.getChild(e,"btnTp",cc.Node),this.onAddEvent(this.btnTp,this.onClickTp.bind(this)),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.clickClose,this),this.initData()},t.prototype.initData=function(){this.config=s.MapConfig.getMapConfigByMapId(this.params),s.MapConfig.curMapConfig.world==s.MapConfig.WORLD.LunHui&&(this.config=void 0!=s.MapConfig.getMapIdByPositonAndWorld(this.config.position,s.MapConfig.WORLD.LunHui)?s.MapConfig.getMapIdByPositonAndWorld(this.config.position,s.MapConfig.WORLD.LunHui):this.config),this.titleName.string=""+this.config.name,this.mapName.string=""+this.config.name,this.mapPower.string=""+this.config.Lv,this.mapPower.node.color=r.default.maxFight<this.config.Lv?cc.Color.RED:cc.Color.WHITE,this.mapLevel.string=""+this.config.level,this.monsterInfo.string=this.getRictString(this.config.monster),this.dropInfo.string=this.getRictString(this.config.map_drop)},t.prototype.getRictString=function(e){var t="";if(!e)return c.WordConfig.getWord(60456);for(var i=0;i<e.length;i++){var n=e[i];t+="<color="+n.color+">"+n.name}return t+="</color>"},t.prototype.clickClose=function(){this.closeView()},t.prototype.onClickTp=function(){var e=this.config;if(u.default.hadFightGodPrivilege())if(l.default.instance.totalFight>=e.Lv)d.default.req_switch_map(e.mapId),f.EventManager.instance.dispatch(g.CommonEvent.Event_Word_refresh);else{var t=cc.js.formatStr(c.WordConfig.getWord(60316),e.Lv);h.UIHelper.showTip(t),p.default.instance.createView(m.default.gameView.toStrongerPanel)}else p.default.instance.createView(m.default.gameView.PrivilegeFightGodView,null,!0,e.mapId);this.closeView()},t=o([_],t)}(a.default));i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/MapConfig":"MapConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/FightModel":"FightModel","../../model/PrivilegeModel":"PrivilegeModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../utils/UIHelper":"UIHelper"}],MapManager:[function(e,t,i){"use strict";cc._RF.push(t,"2151c/aKGtHurC2SRVv85gR","MapManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Astar"),o=e("../model/Grid"),a=e("../prefab/GameManager"),s=function(){function e(){this.gridRow=6,this.gridCol=6}return e.prototype.createMapAstar=function(){var e=new n.Astar;return this.astar=e,this.reInit(),e},e.prototype.reInit=function(){var e=this.astar;e.init(this.gridCol-1,this.gridRow-1);for(var t=0;t<this.gridRow;t++)for(var i=0;i<this.gridCol;i++)a.default.instance.gameView.canWalk(t,i)?e.setGridType(i,t,n.AstarGridType.Normal):e.setGridType(i,t,n.AstarGridType.Hider);return e},e.prototype.findPath2=function(e,t,i,n){if(e==i)if(t<n){if(a.default.instance.gameView.canWalk(e,t+1))return o.default.init(e,t+1)}else if(t>n&&a.default.instance.gameView.canWalk(e,t-1))return o.default.init(e,t-1);if(t==n)if(e<i){if(a.default.instance.gameView.canWalk(e+1,t))return o.default.init(e+1,t)}else if(e>i&&a.default.instance.gameView.canWalk(e-1,t))return o.default.init(e-1,t);return Math.abs(e-i)>Math.abs(t-n)?i>e?o.default.init(e+1,t):o.default.init(e-1,t):n>t?o.default.init(e,t+1):o.default.init(e,t-1)},e.prototype.findPath=function(e,t,i,s,r){var c=this,l=this.astar;this.reInit(),l.setGridType(s,i,n.AstarGridType.End);var d=this.findPath2(e,t,i,s);a.default.instance.gameView.canWalk(d.row,d.col)?r(d):l.findPath(cc.v2(t,e),cc.v2(s,i),function(n){if(n.length>=2&&(n.pop(),n.shift()),n.length>0){var l=n[n.length-1];r(o.default.init(l.y,l.x))}else{var d=c.findPath2(e,t,i,s);a.default.instance.gameView.canWalk(d.row,d.col)?r(d):r()}})},e.prototype.inDistance=function(e,t,i,n,o){var a=Math.abs(e-i),s=Math.abs(t-n);return a<=o&&s<=o},e.instance=new e,e}();i.default=s,cc._RF.pop()},{"../../engine/Astar":"Astar","../model/Grid":"Grid","../prefab/GameManager":"GameManager"}],MapStatisticsModel:[function(e,t,i){"use strict";cc._RF.push(t,"9ed76JO6LFCsJRVehHpsV2J","MapStatisticsModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ServerTime"),o=function(){function e(){}return e.prototype.reInit=function(){this.enterMapTime=n.ServerTime.getServerTime(),this.exp=0,this.killWhiteMonsterNum=0,this.killGreenMonsteNum=0,this.killBlueMonsterNum=0,this.killBlueMonsterNum=0,this.killPurpleMonsterNum=0,this.killBossMonsterNum=0,this.equipWhiteNum=0,this.equipGreenNum=0,this.equipBlueNum=0,this.equipPurpleNum=0,this.equipYellowNum=0},e.instance=new e,e}();i.default=o,cc._RF.pop()},{"./ServerTime":"ServerTime"}],MapView:[function(e,t,i){"use strict";cc._RF.push(t,"0cec5AZ7DpHZLLYG22ScBXA","MapView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../config/MapConfig"),l=e("../../utils/UIHelper"),d=e("../../../engine/Logger"),f=e("../../model/PrivilegeModel"),g=e("../../event/CommonEvent"),h=e("../../config/WordConfig"),u=e("../../../engine/EventManager"),p=e("../../network/SocketClient"),m=e("../../model/RoleInfoModel"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offsetView=0,t}return n(t,e),t.prototype.onEnable=function(){if(u.EventManager.instance.on(g.CommonEvent.Event_Word_refresh,this.closeView.bind(this),this),this.tabParent)for(var e=this.mapView.children,t=c.MapConfig.curMapConfig.area,i=0;i<e.length;i++){var n=e[i];n.name==t.toString()&&this.tabParent.setPosition(n.getPosition())}},t.prototype.onShow=function(){var e=this;this.tabParent=this.getChild(this.node,"view/scrollView/view/content/tabParent"),this.mapView=this.getChild(this.node,"view/scrollView/view/content"),this.btnLeft=this.getChild(this.node,"view/btnLeft"),this.btnRight=this.getChild(this.node,"view/btnRight"),this.darkLayer=this.getChild(this.node,"view/darkLayer"),this.btnLeft.on(cc.Node.EventType.TOUCH_START,function(t){e.offsetView=3},this),this.btnRight.on(cc.Node.EventType.TOUCH_START,function(t){e.offsetView=-3},this),this.btnLeft.on(cc.Node.EventType.TOUCH_END,function(t){e.offsetView=0},this),this.btnRight.on(cc.Node.EventType.TOUCH_END,function(t){e.offsetView=0},this),this.btnLeft.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.offsetView=0},this),this.btnRight.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.offsetView=0},this),this.onAddEvent(this.darkLayer,function(){e.closeView()});for(var t=this.mapView.children,i=c.MapConfig.curMapConfig.area,n=0;n<t.length;n++){var o=t[n];if("tabParent"!=o.name){var a=this.findChild(o,"btn");if(o.name==i.toString()&&this.tabParent.setPosition(o.getPosition()),a&&o.active){var s=this.findChild(o,"level").getComponent(cc.Label),r=c.MapConfig.getMapConfigByMapId(parseInt(o.name));d.Logger.log("parseInt(child.name)===",parseInt(o.name),r),c.MapConfig.curMapConfig.world==c.MapConfig.WORLD.LunHui&&(r=void 0!=c.MapConfig.getMapIdByPositonAndWorld(r.position,c.MapConfig.WORLD.LunHui)?c.MapConfig.getMapIdByPositonAndWorld(r.position,c.MapConfig.WORLD.LunHui):r),s.string="("+r.level+")",this.onAddEvent(a,this.onClickTp.bind(this,r))}o.on("click",this.lookMapInfo.bind(this,o.name),this)}}},t.prototype.lookMapInfo=function(e){s.default.instance.createView(r.default.gameView.mapInfo,null,parseInt(e))},t.prototype.update=function(){this.mapView.x+=this.offsetView},t.prototype.onClickTp=function(e){if(f.default.hadFightGodPrivilege())if(m.default.instance.totalFight>=e.Lv)p.default.req_switch_map(e.mapId),this.closeView();else{var t=cc.js.formatStr(h.WordConfig.getWord(60316),e.Lv);l.UIHelper.showTip(t),s.default.instance.createView(r.default.gameView.toStrongerPanel)}else s.default.instance.createView(r.default.gameView.PrivilegeFightGodView,null,!0,e.mapId)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),s.default.instance.closeView(r.default.gameView.mapInfo)},t=o([_],t)}(a.default));i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/MapConfig":"MapConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/PrivilegeModel":"PrivilegeModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../utils/UIHelper":"UIHelper"}],MaprecommendConfig:[function(e,t,i){"use strict";cc._RF.push(t,"67d1cQw1TBP+4UrtTHAc7v5","MaprecommendConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configMap=new Map,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfigByPower=function(e){var t,i=!1;return this.configMap.forEach(function(n){!i&&e>=n.fight[0]&&e<=n.fight[1]&&(i=!0,t=n)}),t},t.Config_Name="MaprecommendConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MarfaGoalConfig:[function(e,t,i){"use strict";cc._RF.push(t,"71042iiJE1D1qvCEMWQnNUt","MarfaGoalConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.stage=e.stage,i.taskid=e.taskid,i.ress=e.ress,i.item=e.item,i},t.json2Config=function(e){var t=this;this.boxAwardArr=[],this.totalAwardArr=[],Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o),void 0!=o.stage?t.totalAwardArr.push(o):t.boxAwardArr.push(o)}),this.totalAwardArr.sort(function(e,t){return e.id-t.id}),this.boxAwardArr.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){return this.configMap.get(e)},t.getBoxConfigs=function(){return this.boxAwardArr},t.getTotalConfigs=function(){return this.totalAwardArr},t.isBoxById=function(e){var t=!1;return this.boxAwardArr.every(function(i){return i.id!=e||(t=!0,!1)}),t},t.Config_Name="marfaGoalConfig",t.configMap=new Map,t.boxAwardArr=[],t.totalAwardArr=[],t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MarfaKingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"150959f/NBCOa8cY66Iv7UH","MarfaKingConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){}}();i.MarfaKingTabConfig=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.dayList=new Array,this.configMap=new Map,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o),t.dayList.includes(o.day)||t.dayList.push(o.day)}),this.dayList.sort(function(e,t){return e-t})},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfigsByDay=function(e){var t=new Map;this.configMap.forEach(function(i){if(i.day==e){var n=void 0;t.get(i.title)||t.set(i.title,[]),(n=t.get(i.title)).push(i),t.set(i.title,n)}}),t.forEach(function(e){e.sort(function(e,t){return e.id-t.id})});var i=new Array;return t.forEach(function(e){var t=new a;t.mark=e[0].mark,t.title=e[0].title,t.configs=e,i.push(t)}),i.sort(function(e,t){return e.mark-t.mark}),i},t.Config_Name="MarfaKingConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.default=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MarfaKingProConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d4a597YtplP35dtiXYvPiVu","MarfaKingProConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configList=new Array,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o),t.configList.push(o)}),this.configList.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfigs=function(){return this.configList},t.Config_Name="MarfaKingProConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MarfaOrderConfig:[function(e,t,i){"use strict";cc._RF.push(t,"602a6y28i5EYbBbkcePKezn","MarfaOrderConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.name=e.name,i.itemid=e.itemid,i.limit=e.limit,i.condition=e.condition,i.goal=e.goal,i.des=e.des,i.ress=e.ress,i.item=e.item,i},t.json2Config=function(e){var t=this;this.configArr=[],Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o),t.configArr.push(o)}),this.configArr.sort(function(e,t){return e.id-t.id})},t.Config_Name="marfaOrderConfig",t.configMap=new Map,t.configArr=[],t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MathUtils:[function(e,t,i){"use strict";cc._RF.push(t,"5b6663dB2ZOoZI87jvkXge/","MathUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.distance=function(e,t,i,n){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2))},e.sub=function(e,t){return cc.v2(e.x-t.x,e.y-t.y)},e.radiansToDegrees=function(e){return 180/Math.PI*e},e.degreesToRadians=function(e){return Math.PI*e/180},e.p2pRad=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},e.rotation2Fish=function(e){return e=e>=0&&e<=180?180-e:-180-e},e}();i.default=n,cc._RF.pop()},{}],Md5Helper:[function(e,t,i){"use strict";cc._RF.push(t,"8bab74PqV1OWJA/YYui74lW","Md5Helper"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./md5"),o=function(){function e(){}return e.getMd5Default=function(e){return n(e)},e.Private_Key="jhao666666",e}();i.Md5Helper=o,cc._RF.pop()},{"./md5":"md5"}],MedalConfig:[function(e,t,i){"use strict";cc._RF.push(t,"023802asptGmrnogA8U9cJU","MedalConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/MagicModel"),a=e("./JsonConfigBase"),s=function(){return function(){this.recov_res=[],this.zhulingnum=[],this.zhulingnum_pro=[],this.zhuling_id=[],this.zhuling_weight=[],this.recov_item=[]}}();i.MedalConfigInfo=s;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var t=new s;return t.pro_id=e.pro_id,t.name=e.name,t.level=e.level,t.quality=e.quality,t.base_value=e.base_value,t.recov_res=e.recov_res,t.zhulingnum=e.zhulingnum,t.zhulingnum_pro=e.zhulingnum_pro,t.zhuling_id=e.zhuling_id,t.zhuling_weight=e.zhuling_weight,t.zhuling_slot=e.zhuling_slot,t.upperlimit=e.upper_limit,t.recov_item=e.recov_item,t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.index_id=parseInt(i),t.configMap.set(n.pro_id,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.index_id&&(t=i)}),t},t.getConfigByEquipId=function(e){return this.configMap.get(e)},t.formatBaseValue=function(e){var t=[];for(var i in e){var n=new o.default;n.magicId=Number(i),n.magicValue=e[i],t.push(n)}return t},t.Config_Name="medalConfig",t.configMap=new Map,t}(a.JsonConfigBase);i.MedalConfig=r,cc._RF.pop()},{"../model/MagicModel":"MagicModel","./JsonConfigBase":"JsonConfigBase"}],MedalmakeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"35119eK/PlFLrNZOyUp4EFd","MedalmakeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){this.medal_list=[],this.weight=[],this.luck_madel=[]}}();i.MedalmakeConfigInfo=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var t=new a;return t.jieji=e.jieji,t.level_limit=e.level_limit,t.medal_list=e.medal_list,t.weight=e.weight,t.res=e.res,t.luck=e.luck,t.maxluck=e.maxluck,t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigById=function(e){return this.configMap.get(e)},t.Config_Name="medalmakeConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.MedalmakeConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MenuIconRedPointIdMapping:[function(e,t,i){"use strict";cc._RF.push(t,"9870eqSX8lHCI/OTfJIVabL","MenuIconRedPointIdMapping"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../manager/RedPointManager"),o=e("./JumpActionUtils"),a=function(){function e(){}return e.getRedPointIdArrByFunctionId=function(e){var t=[];return e===o.FunctionIdList.TianGuan?t=[n.RedPointId.TianGuan]:e===o.FunctionIdList.ShenBing?t=[n.RedPointId.shenbin,n.RedPointId.shenbin2]:e===o.FunctionIdList.JingJie?t=[n.RedPointId.JinJie]:e===o.FunctionIdList.Star?t=[n.RedPointId.Star]:e===o.FunctionIdList.Guild?t=[n.RedPointId.Guild1,n.RedPointId.Guild2,n.RedPointId.Guild3,n.RedPointId.GuildRank,n.RedPointId.GuildRedEnvelope,n.RedPointId.GuildTask]:e===o.FunctionIdList.Mail?t=[n.RedPointId.Mail]:e===o.FunctionIdList.BaZhen?t=[n.RedPointId.BaGua,n.RedPointId.BaGua_fengmogu]:e==o.FunctionIdList.DarkIron?t=[n.RedPointId.Mine]:e==o.FunctionIdList.ShenGong?t=[n.RedPointId.ShenGong]:e==o.FunctionIdList.SC&&(t=[n.RedPointId.GuildPvP]),t},e}();i.MenuIconRedPointIdMapping=a,cc._RF.pop()},{"../manager/RedPointManager":"RedPointManager","./JumpActionUtils":"JumpActionUtils"}],MergeLuckyDrawConfig:[function(e,t,i){"use strict";cc._RF.push(t,"25ba5sEGZdFNYHgg/69R7r1","MergeLuckyDrawConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=e[i];t.LuckInfoConfigMap31.set(Number(i),n)})},t.getMapConfi=function(e,t){return 31==t?this.LuckInfoConfigMap31.get(e):36==t?this.LuckInfoConfigMap36.get(e):null},t.Config_Name31="MergeLuckyDrawConfig",t.Config_Name36="MergeLuckyGuagualeConfig",t.LuckInfoConfigMap31=new Map,t.LuckInfoConfigMap36=new Map,t}(o.JsonConfigBase);i.MergeLuckyDrawConfig=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){Object.keys(e).forEach(function(t){var i=e[t];a.LuckInfoConfigMap36.set(Number(t),i)})},t}(o.JsonConfigBase);i.MergeLuckyDrawConfig36=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MergeLuckyDrawModel:[function(e,t,i){"use strict";cc._RF.push(t,"00b6fwwfiFENoEdCFUyuBpL","MergeLuckyDrawModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/ProtoConfig"),o=e("../../engine/ProtoUtils"),a=e("../../engine/GameSocket"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../../engine/Logger"),l=function(){return function(){}}(),d=function(){function e(){this.lotterydrawInfo31=[],this.lotterydrawInfo36=[]}return e.proto_c_lotterydraw_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_lotterydraw_info,t),a=i.getRewardListList(),d=i.getActivityId(),f=[];a.forEach(function(e){var t=new l;t.idx=e.getIdx(),t.status=e.getStatus(),t.item_id=e.getItemId(),t.item_num=e.getItemNum(),t.quality=e.getQuality(),f.push(t)}),31==d?(e.instance.lotterydrawInfo31=f,e.instance.lotterydrawInfo31.sort(function(e,t){return e.idx-t.idx}),c.Logger.log("c_lotterydraw_info",e.instance.lotterydrawInfo31)):36==d&&(e.instance.lotterydrawInfo36=f,e.instance.lotterydrawInfo36.sort(function(e,t){return e.idx-t.idx}),c.Logger.log("c_lotterydraw_info",e.instance.lotterydrawInfo36)),s.EventManager.instance.dispatch(r.CommonEvent.Event_MergeLuckyDrawView_Refresh)},e.proto_c_select_reward=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_select_reward,e);c.Logger.log("c_select_reward",t.getActivityId(),t.getRet())},e.proto_c_lotterydraw_start=function(e){var t=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_lotterydraw_start,e),i=t.getActivityId(),a={};a.ret=t.getRet(),a.idx=t.getIdx(),a.status=t.getStatus(),c.Logger.log("c_lotterydraw_start",a),31==i?s.EventManager.instance.dispatch(r.CommonEvent.Event_MergeLuckyDrawView_Start31,a):36==i&&s.EventManager.instance.dispatch(r.CommonEvent.Event_MergeLuckyDrawView_Start36,a)},e.s_lotterydraw_info=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_lotterydraw_info);t.setActivityId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_lotterydraw_info")},e.s_select_reward=function(e,t){for(var i=o.ProtoUtils.Create(n.ProtoConfig.s_select_reward),s=[],r=0;r<8;r++){var l=e[r],d=o.ProtoUtils.Create(n.ProtoConfig.t_select_reward);d.setIdx(l.idx),d.setItemId(l.item_id),s.push(d)}i.setSelectListList(s),i.setActivityId(t),a.default.getInstance().sendToSocket(i),c.Logger.log("s_select_reward",e)},e.s_lotterydraw_start=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_lotterydraw_start);t.setActivityId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_lotterydraw_start")},e.s_lotterydraw_reset=function(e){var t=o.ProtoUtils.Create(n.ProtoConfig.s_lotterydraw_reset);t.setActivityId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_lotterydraw_reset")},e.islotterydrawInfo=function(t){var i=!0;return 31==t?e.instance.lotterydrawInfo31.forEach(function(e){if(!e.item_id)return i=!1}):36==t&&e.instance.lotterydrawInfo36.forEach(function(e){if(!e.item_id)return i=!1}),i},e.getlotterydrawInfo=function(t){return 31==t?e.instance.lotterydrawInfo31:36==t?e.instance.lotterydrawInfo36:void 0},e.setlotterydrawInfo=function(t,i,n,o){31==t?e.instance.lotterydrawInfo31[i][n]=o:36==t&&(e.instance.lotterydrawInfo36[i][n]=o)},e.instance=new e,e}();i.MergeLuckyDrawModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent"}],MergeLuckyDrawTip:[function(e,t,i){"use strict";cc._RF.push(t,"f08fa1dcatEnZ1yTO5p+jwc","MergeLuckyDrawTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ResourcesManager"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/ColorConfig"),l=e("../config/EquipConfig"),d=e("../config/GameConst"),f=e("../config/ITemsConfig"),g=e("../config/MergeLuckyDrawConfig"),h=e("../config/ViewConfig"),u=e("../config/WordConfig"),p=e("../model/ItemInfoModel"),m=e("../model/MergeLuckyDrawModel"),C=e("../prefab/ItemPrefab"),_=e("../utils/NameHelper"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawlist=[],t.configkey=[],t.Toggleindex=0,t.acitvity_id=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){},t.prototype.onInitChild=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=null),this.tiptype=e,this.itemstr=t,this.acitvity_id=i,"number"==typeof t&&(this.Toggleindex=t)},t.prototype.onShow=function(){for(var e=1;e<=2;e++)this.findChild(this.node,"panel"+e).active=!1;this.tiptype?this.initP1():this.initP2()},t.prototype.initP1=function(){var e=this;this.drawlist=[],m.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id).forEach(function(t){e.drawlist.push(cc.instantiate(t))}),this.panel=this.findChild(this.node,"panel1"),this.panel.active=!0;for(var t=this.findChild(this.panel,"toggleContainer"),i=0;i<t.children.length;i++){var n=t.children[i],o=u.WordConfig.getWord(61443)+(i+1);i>3&&(o=u.WordConfig.getWord(61444)+(i-3)),n.getChildByName("togglestr").getComponent(cc.Label).string=o,n.on(cc.Node.EventType.TOUCH_END,this.onToggle.bind(this,i))}this.findChild(this.panel,"btnDefine").on(cc.Node.EventType.TOUCH_END,this.onbtnDefine,this),this.findChild(this.panel,"btnCancel").on(cc.Node.EventType.TOUCH_END,this.closeView,this),this.findChild(this.panel,"btnClose").on(cc.Node.EventType.TOUCH_END,this.closeView,this),this.onToggle(Number(this.itemstr));var a=this.findChild(this.panel,"content"),r=function(t){var i=a.children[t];i.on(cc.Node.EventType.TOUCH_START,function(){var i=e.configkey[e.Toggleindex][t];e.showschedule=setTimeout(function(){var t,n=g.MergeLuckyDrawConfig.getMapConfi(e.Toggleindex+1,e.acitvity_id),o=f.ITemsConfig.getITemsConfigById(i),a=!1;o?t=o.quality:(a=!0,o=l.EquipConfig.getEquipConfigById(i),t=n.color);var r=p.default.create(d.GameConst.ITEM_KIND.ITEM,o.id,n.rewards_a[i],t);a?s.default.instance.createView(h.default.gameView.equipInfo,null,r):p.default.getItemAmountById(r.itemId)>0&&("expball"==o.position||"expball_full"==o.position)?s.default.instance.createView(h.default.gameView.ExpBallView,null,r):s.default.instance.createView(h.default.gameView.ItemInfo,null,r,0,!1);e.stopShow()},1e3)}),i.on(cc.Node.EventType.TOUCH_CANCEL,c.stopShow,c),i.on(cc.Node.EventType.TOUCH_END,function(){e.showschedule&&(e.stopShow(),1==m.MergeLuckyDrawModel.getlotterydrawInfo(e.acitvity_id)[e.Toggleindex].status?u.WordConfig.showWord(61621):(a.children.forEach(function(e){e.getComponent(cc.Toggle).isChecked=!1}),i.getComponent(cc.Toggle).isChecked=!0,e.drawlist[e.Toggleindex].item_id=e.configkey[e.Toggleindex][t]))})},c=this;for(i=0;i<a.children.length;i++)r(i);this.onToggle(Number(this.itemstr))},t.prototype.initP2=function(){var e=m.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id)[this.itemstr];m.MergeLuckyDrawModel.setlotterydrawInfo(this.acitvity_id,this.itemstr,"status",1),this.panel=this.findChild(this.node,"panel2"),this.panel.active=!0;var t=f.ITemsConfig.getITemsConfigById(e.item_id);if(t||(t=l.EquipConfig.getEquipConfigById(e.item_id)),t){var i=this.findChild(this.panel,"ItemPrefab");i.getComponent(C.default).init(t),i.getComponent(C.default).setNumTxt(e.item_num)}this.findChild(this.panel,"btnDefine").on(cc.Node.EventType.TOUCH_END,this.closeView,this),this.findChild(this.panel,"btnClose").on(cc.Node.EventType.TOUCH_END,this.closeView,this)},t.prototype.onToggle=function(e){this.Toggleindex=e,this.findChild(this.panel,"toggleContainer/toggle"+(e+1)).getComponent(cc.Toggle).isChecked=!0;var t=g.MergeLuckyDrawConfig.getMapConfi(e+1,this.acitvity_id),i=this.findChild(this.panel,"content");i.children.forEach(function(e){e.getComponent(cc.Toggle).isChecked=!1,e.active=!1});var n=0;for(var o in this.configkey[this.Toggleindex]=[],t.rewards_a){var s=t.rewards_a[o],r=i.children[n];r.active=!0,o==this.drawlist[this.Toggleindex].item_id&&(r.getComponent(cc.Toggle).isChecked=!0);var l=f.ITemsConfig.getITemsConfigById(o),d=l.quality,h=c.ColorConfig.getQualityColor(d);this.getChild(r,"name",cc.Label).string=l.name,this.getChild(r,"num",cc.Label).string=s,this.getChild(r,"name").color=h,this.getChild(r,"num").color=h,this.getChild(r,"Background").color=h,this.getChild(r,"zixuanNode").active="box"==l.position,this.getChild(r,"suijiNode").active="draw"==l.position;var u=this.getChild(r,"name",cc.Label);""!=u.string&&void 0!=u.string&&(u.fontSize=_.NameHelper.getNameLabSize(u.string)),this.getChild(r,"num").y=24;var p=this.getChild(r,"name");p.width=70,p.y=-22;var C=this.getChild(r,"Background"),v=C.getChildByName("itemIconNode");if(v)v.active=!1;else{var y=C;(v=new cc.Node).addComponent(cc.Sprite);v.x=0,v.y=0,v.scaleX=v.scaleY=1,v.name="itemIconNode",y.addChild(v),v.active=!1}if(v.width=65,v.height=65,v.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,v.getComponent(cc.Sprite).trim=!1,v.getComponent(cc.Sprite).spriteFrame=null,v.active=!0,l){var b=cc.js.formatStr("itemIcon/%s",l.icon);a.default.instance.loadSprite(v.getComponent(cc.Sprite),b,!0)}var I=this.getChild(r,"occupationNode");I.active=!1;var M=void 0,w=["lv","lan","zi","cheng"];113==l.cid?M="icon/Costume/jiaobiao/img_jiaobiao_touxiang_"+w[l.quality-1]:114==l.cid?M="icon/Costume/jiaobiao/img_jiaobiao_liaotian_"+w[l.quality-1]:108==l.cid?M="icon/Costume/jiaobiao/img_jiaobiao_chenghao_"+w[l.quality-1]:112==l.cid&&(M="icon/Costume/jiaobiao/img_jiaobiao_tou_"+w[l.quality-1]),M&&(a.default.instance.loadSprite(I.getComponent(cc.Sprite),M),I.active=!0),this.configkey[this.Toggleindex][n]=o,n++}var k=1==m.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id)[this.Toggleindex].status;this.findChild(this.panel,"btnDefine").active=!k,this.findChild(this.panel,"btnCancel").active=!k},t.prototype.stopShow=function(){this.showschedule&&(clearTimeout(this.showschedule),this.showschedule=null)},t.prototype.onbtnDefine=function(){m.MergeLuckyDrawModel.s_select_reward(this.drawlist,this.acitvity_id),this.closeView()},t=o([y],t)}(r.default));i.default=b,cc._RF.pop()},{"../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MergeLuckyDrawConfig":"MergeLuckyDrawConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/MergeLuckyDrawModel":"MergeLuckyDrawModel","../prefab/ItemPrefab":"ItemPrefab","../utils/NameHelper":"NameHelper"}],MergeLuckyDrawView:[function(e,t,i){"use strict";cc._RF.push(t,"fa7bfxwt7pKU6WaTkPjDNFI","MergeLuckyDrawView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/ViewBase"),c=e("../event/CommonEvent"),l=e("../config/ITemsConfig"),d=e("../config/DefaultConfig"),f=e("../prefab/ItemPrefab"),g=e("../config/WordConfig"),h=e("../model/MergeLuckyDrawModel"),u=e("../../engine/UIManager"),p=e("./../config/ViewConfig"),m=e("../config/EquipConfig"),C=e("../model/ActivityOpenModel"),_=e("../model/RoleInfoModel"),v=e("./PublicTipView"),y=cc._decorator,b=y.ccclass,I=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.acitvity_id=31,t.isTurnType=!1,t.startnum=1,t.turntime=3e3,t.darkLayer1=null,t}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(c.CommonEvent.Event_MergeLuckyDrawView_Refresh,this.refresh,this),s.EventManager.instance.on(c.CommonEvent.Event_MergeLuckyDrawView_Start31,this.onTurning,this),this.refresh()},t.prototype.refresh=function(e){var t=this;void 0===e&&(e=null);var i=C.default.getOpenActivityModel(this.acitvity_id),n=a.default.formatDateStr4(1e3*i.actStartTime)+"-"+a.default.formatDateStr4(1e3*i.actEndTimes);this.findChild(this.node,"time/timeNum").getComponent(cc.Label).string=n,h.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id).forEach(function(e){var i=t.findChild(t.itemlist,e.idx.toString());i.getChildByName("yilingqv").active=1==e.status,i.getChildByName("xuanzhong").active=!1;var n=i.getChildByName("ItemPrefab");n.active=!1;var o=e.item_id;if(o){var a=l.ITemsConfig.getITemsConfigById(o);a||(a=m.EquipConfig.getEquipConfigById(o)),n.getComponent(f.default).init(a,!0),n.getComponent(f.default).setNumTxt(e.item_num),n.active=!0}e.idx<=8&&(o?(i.getChildByName("btnchange").active=!0,i.getChildByName("btnadd").active=!1):(i.getChildByName("btnchange").active=!1,i.getChildByName("btnadd").active=!0))})},t.prototype.init=function(){this.darkLayer1=this.findChild(this.node,"darkLayer1"),this.darkLayer1.active=!1,this.itemlist=this.findChild(this.node,"itemlist"),this.findChild(this.node,"btnReset").on(cc.Node.EventType.TOUCH_END,this.onBtnReset,this),this.findChild(this.node,"btnTurn").on(cc.Node.EventType.TOUCH_END,this.onBtnTurn,this),this.findChild(this.node,"money").getComponent(cc.Label).string=d.DefaultConfig.getConfigById(116).value;var e=this.findChild(this.node,"btnRule");this.onAddEvent(e,this.OnClickRule.bind(this));for(var t=1;t<=8;t++){var i=this.findChild(this.itemlist,t.toString());i.getChildByName("btnchange").on(cc.Node.EventType.TOUCH_END,this.onBtnChange.bind(this,t)),i.getChildByName("btnadd").on(cc.Node.EventType.TOUCH_END,this.onBtnChange.bind(this,t))}},t.prototype.closeView=function(){this.isTurnType||e.prototype.closeView.call(this)},t.prototype.onBtnChange=function(e){this.isTurnType||u.default.instance.createView(p.default.gameView.MergeLuckyDrawTip,null,!0,e-1,this.acitvity_id)},t.prototype.onBtnReset=function(){var e=this;this.isTurnType||u.default.instance.createView(p.default.gameView.DialogCheck,null,g.WordConfig.getWord(61447),function(t){t&&h.MergeLuckyDrawModel.s_lotterydraw_reset(e.acitvity_id)})},t.prototype.onBtnTurn=function(){this.isTurnType||(h.MergeLuckyDrawModel.islotterydrawInfo(this.acitvity_id)?0!=this.checkDrawNum()?_.default.instance.bagRemainingnumber<=0?g.WordConfig.showWord(60001):(this.isTurnType=!0,this.darkLayer1.parent=u.default.instance.getTopRoot(),this.darkLayer1.active=!0,h.MergeLuckyDrawModel.s_lotterydraw_start(this.acitvity_id)):g.WordConfig.showWord(61446):g.WordConfig.showWord(61445))},t.prototype.onTurning=function(e){var t=this;if(0==e.ret)if(this.findChild(this.node,"skip").getComponent(cc.Toggle).isChecked){this.itemlist.children[this.startnum].getChildByName("xuanzhong").active=!1;var i=this.findChild(this.itemlist,e.idx.toString());this.blinkLuckDraw(i,e.idx)}else{var n=this.findChild(this.node,"animebg").getComponent(cc.Animation).play("mergeluckydraw",0);setTimeout(function(){if(t.itemlist.children[t.startnum].getChildByName("xuanzhong").active=!1,t.checkDrawNum()>1)t.nextNodeXZ(t.startnum,0,e.idx);else{var i=t.findChild(t.itemlist,e.idx.toString());t.blinkLuckDraw(i,e.idx)}},1e3*n.duration)}else this.isTurnType=!1,this.darkLayer1.parent=this.node,this.darkLayer1.active=!1,h.MergeLuckyDrawModel.s_lotterydraw_info(this.acitvity_id)},t.prototype.blinkLuckDraw=function(e,t){var i=this;e.getChildByName("xuanzhong").active=!0,e.getChildByName("xuanzhong").runAction(cc.sequence(cc.delayTime(.25),cc.blink(1,4),cc.callFunc(function(){i.LuckDraw(t)})));for(var n=0;n<this.itemlist.children.length;n++){this.itemlist.children[n]==e&&(this.startnum=n)}},t.prototype.nextNodeXZ=function(e,t,i){var n=this,o=this.itemlist.children.length;this.itemlist.children[e-1==-1?o-1:e-1].getChildByName("xuanzhong").active=!1,e=this.checkLingQ(e);var a=this.itemlist.children[e];a.getChildByName("xuanzhong").active=!0,t/o>=1&&Number(a.name)==i?this.blinkLuckDraw(a,i):setTimeout(function(){n.nextNodeXZ(++e>=o?0:e,++t,i)},this.turntime/(3*o+i))},t.prototype.LuckDraw=function(e){this.isTurnType=!1,this.darkLayer1.parent=this.node,this.darkLayer1.active=!1,this.findChild(this.itemlist,e+"/yilingqv").active=!0,u.default.instance.createView(p.default.gameView.MergeLuckyDrawTip,null,!1,e-1,this.acitvity_id)},t.prototype.checkLingQ=function(e){var t=this.itemlist.children.length;return this.itemlist.children[e].getChildByName("yilingqv").active?this.checkLingQ(++e>=t?0:e):e},t.prototype.checkDrawNum=function(){var e=0;return h.MergeLuckyDrawModel.getlotterydrawInfo(this.acitvity_id).forEach(function(t){1!=t.status&&++e}),e},t.prototype.OnClickRule=function(){u.default.instance.createView(p.default.gameView.PublicTipView,null,v.RuleType.TYPE_MergeLuckyDraw)},t=o([b],t)}(r.default));i.MergeLuckyDrawView=I,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/EquipConfig":"EquipConfig","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/MergeLuckyDrawModel":"MergeLuckyDrawModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/ItemPrefab":"ItemPrefab","./../config/ViewConfig":"ViewConfig","./PublicTipView":"PublicTipView"}],MethodView:[function(e,t,i){"use strict";cc._RF.push(t,"d7cccY8S5xPwqvD38CnJ4hs","MethodView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnSure=null,t.content=null,t}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.onAddEvent(this.btnSure,function(){t.closeView()})},t.prototype.onInitChild=function(e){this.content.string=e.strategy},o([c({type:cc.Node})],t.prototype,"btnSure",void 0),o([c({type:cc.Label})],t.prototype,"content",void 0),t=o([r],t)}(a.default);i.default=l,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase"}],MineBuyPowerView:[function(e,t,i){"use strict";cc._RF.push(t,"f5a0aH2PrFL4qA7GtToqTui","MineBuyPowerView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/DefaultConfig"),r=e("../config/MineInfoConfig"),c=e("../config/WordConfig"),l=e("../model/MineModel"),d=e("../model/RoleInfoModel"),f=e("../network/SocketClient"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentIndex=1,t}return n(t,e),t.prototype.onEnable=function(){this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.powerNumLabel=this.getChild(this.node,"frame/layout/num",cc.Label),this.yuanbaoNumLabel=this.getChild(this.node,"frame/layout2/num",cc.Label),this.amountEditBox=this.getChild(this.node,"frame/count/pnlEdit/amountEditBox",cc.EditBox),this.reduceBtn=this.getChild(this.node,"frame/count/pnlEdit/btn_jian"),this.addBtn=this.getChild(this.node,"frame/count/pnlEdit/btn_jia"),this.maxBtn=this.getChild(this.node,"frame/count/pnlEdit/btn_max"),this.buyBtn=this.getChild(this.node,"frame/btnBuy")},t.prototype.initView=function(){this.powerRatio=s.DefaultConfig.getConfigById(156).value,this.yunbaoRatio=s.DefaultConfig.getConfigById(155).value;var e=Math.floor(d.default.instance.yuanBao/this.yunbaoRatio)>0?Math.floor(d.default.instance.yuanBao/this.yunbaoRatio):1,t=Math.floor((r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower())/this.powerRatio);this.powerNumLabel.string=this.currentIndex*this.powerRatio+"",this.yuanbaoNumLabel.string=this.currentIndex*this.yunbaoRatio+"",this.amountEditBox.string=this.currentIndex+"",this.reduceBtn.active=1!=this.currentIndex,this.addBtn.active=this.currentIndex<Math.min(e,t),this.onAddEvent(this.reduceBtn,this.onBtnClickReduce.bind(this,!1)),this.onAddEvent(this.addBtn,this.onBtnClickReduce.bind(this,!0)),this.onAddEvent(this.maxBtn,this.onBtnClickMax.bind(this)),this.onAddEvent(this.buyBtn,this.onBtnBuy.bind(this))},t.prototype.onEventMathFloor=function(e){var t=Math.floor(d.default.instance.yuanBao/this.yunbaoRatio)>0?Math.floor(d.default.instance.yuanBao/this.yunbaoRatio):1,i=r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower()>0?r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower():0,n=Math.floor(i/this.powerRatio),o=parseInt(e.string);o=isNaN(o)?1:o,this.currentIndex=o>Math.min(t,n)?Math.min(t,n):o,this.initView()},t.prototype.onBtnClickReduce=function(e){if(e){var t=Math.floor(d.default.instance.yuanBao/this.yunbaoRatio)>0?Math.floor(d.default.instance.yuanBao/this.yunbaoRatio):1,i=Math.floor((r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower())/this.powerRatio);this.currentIndex=this.currentIndex+1>Math.min(t,i)?Math.min(t,i):this.currentIndex+1}else this.currentIndex=this.currentIndex-1>0?this.currentIndex-1:1;this.initView()},t.prototype.onBtnClickMax=function(){var e=Math.floor(d.default.instance.yuanBao/this.yunbaoRatio)>0?Math.floor(d.default.instance.yuanBao/this.yunbaoRatio):1,t=r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower()>0?r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower():0,i=Math.floor(t/this.powerRatio);this.currentIndex=Math.min(e,i),this.initView()},t.prototype.onBtnBuy=function(){d.default.instance.yuanBao>=this.currentIndex*this.yunbaoRatio&&r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower()>=this.currentIndex*this.powerRatio?(f.default.s_mine_buy_energy(this.currentIndex),this.closeView()):d.default.instance.yuanBao<this.currentIndex*this.yunbaoRatio?c.WordConfig.showWord(60115):r.MineInfoConfig.getConfigById(1).max_power-l.MinePersonaInfoModel.getCurrPower()<this.currentIndex*this.powerRatio&&c.WordConfig.showWord(61738)},t=o([h],t)}(a.default));i.default=u,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/MineInfoConfig":"MineInfoConfig","../config/WordConfig":"WordConfig","../model/MineModel":"MineModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient"}],MineConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b1bdeoqIQZCBLx/HLRbRHnY","MineConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reward=[],t.protect_item=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.name=e.name,i.zhanli=e.zhanli,i.p_time=e.p_time,i.reward=e.reward,i.num=e.num,i.exploit_power=e.exploit_power,i.rob_power=e.rob_power,i.protect_item=e.protect_item,i.protect_time=e.protect_time,i.color=e.color,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=Number(i),t.configMap.set(i,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==parseInt(n)&&(t=i)}),t},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.MineConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MineFightView:[function(e,t,i){"use strict";cc._RF.push(t,"3892dqJBiVGvLinPtus0oyF","MineFightView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/GameConst"),f=e("../config/MineInfoConfig"),g=e("../config/ViewConfig"),h=e("../event/CommonEvent"),u=e("../model/CostumeModel"),p=e("../model/MineModel"),m=e("../model/RoleInfoModel"),C=e("../network/SocketClient"),_=e("../prefab/GameManager"),v=e("../serverFight/ServerFightView"),y=cc._decorator,b=y.ccclass,I=y.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPlunder=!1,t.serverFightPrefab=null,t.serverFightViewNode=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.serverFightView=cc.instantiate(this.serverFightPrefab),this.serverFightView.getComponent(v.default).setFightType(d.ServerFightType.MinePVP),this.serverFightViewNode.addChild(this.serverFightView),this.initFindNode()},t.prototype.onEnable=function(){_.default.instance.serverFightType=d.ServerFightType.MinePVP,_.default.instance.BattleType=d.BattleType.PvP},t.prototype.onInitChild=function(e,t){this.data=e,this.mineType=t,this.initView()},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_scene_obj_hp){var i,n=(a=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_scene_obj_hp,t)).getId(),o=a.getHp();this.serverFightView.getComponent(v.default).serRolePrefabList.every(function(e){var t=e.serRoleInfoModel;return n!=t.id||(i=t,!1)}),i.cid==this.myData.roleId?this.refreshHp(this.myInfo,i.maxHp,o):i.cid==this.data.roleId&&this.refreshHp(this.pkInfo,i.maxHp,o)}else if(e==s.ProtoConfig.c_user_login)c.default.instance.closeView(g.default.gameView.MineFightView);else if(e==s.ProtoConfig.c_pvp_result){var a,l=0==(a=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_pvp_result,t)).getRet();switch(a.getType()){case p.MineType.Plunder:c.default.instance.createView(g.default.gameView.MineResultView,null,this.myData,this.data,l,p.MineReportType.Plunder);break;case p.MineType.Occupy:c.default.instance.createView(g.default.gameView.MineResultView,null,this.myData,this.data,l,p.MineReportType.Occupy);break;case p.MineType.Retake:var d=1==a.getRetakeType()?p.MineReportType.Retake:p.MineReportType.AssistRetake,f=a.getItemList(),h=a.getResList(),u=new Array,m=new Array;if(f)for(var C in f)if(Object.prototype.hasOwnProperty.call(f,C)){var _={id:(y=f[C]).getItemid(),count:y.getItemnum()};u.push(_)}if(h)for(var C in h)if(Object.prototype.hasOwnProperty.call(h,C)){var y;_={id:(y=h[C]).getItemid(),count:y.getItemnum()};m.push(_)}c.default.instance.createView(g.default.gameView.MineResultView,null,this.myData,this.data,l,d,u,m)}}},t.prototype.createUi=function(e,t,i,n){switch(void 0===i&&(i=null),void 0===n&&(n=null),e){case 0:c.default.instance.createView(g.default.gameView.MineResultView,null,this.myData,this.data,!0,t,i,n);break;case 1:c.default.instance.createView(g.default.gameView.MineResultView,null,this.myData,this.data,!1,t);break;default:c.default.instance.closeView(g.default.gameView.MineFightView)}},t.prototype.initFindNode=function(){this.myInfo=this.getChild(this.node,"myInfo"),this.pkInfo=this.getChild(this.node,"pkInfo"),this.downTime=this.getChild(this.node,"downTime",cc.Label),this.startTime=this.getChild(this.node,"start",cc.Label),this.hpWidth=this.getChild(this.node,"myInfo/hp").width},t.prototype.initView=function(){var e=this;this.startTime.node.active=!0;var t=3;this.startTime.string=t+"";var i=f.MineInfoConfig.getConfigById(1).battletime;this.downTime.string=i+"",this.downFunction=function(){t--,e.startTime.string=t>0?t+"":"s",t<0&&(e.unschedule(e.downFunction),e.startTime.node.active=!1,e.mineType==p.MineReportType.Plunder?C.default.s_pvp_result(e.myData.mineId,p.MineType.Plunder):e.mineType==p.MineReportType.Retake||e.mineType==p.MineReportType.AssistRetake?C.default.s_pvp_result(e.myData.reportId,p.MineType.Retake):e.mineType==p.MineReportType.Occupy&&C.default.s_pvp_result(e.myData.mineId,p.MineType.Occupy),e.downFunction1=function(){i--,e.downTime.string=i+"",i<=0&&e.unschedule(e.downFunction1)},e.schedule(e.downFunction1,1))},this.schedule(this.downFunction,1),this.myData=m.default.instance.creatMineData(this.data),this.setPlayerInfo(this.myInfo,this.myData),this.setPlayerInfo(this.pkInfo,this.data),this.onAddEvent(this.node.getChildByName("btnGiveUp"),function(){C.default.s_mine_escape(),e.closeView()})},t.prototype.setPlayerInfo=function(e,t){var i=this.getChild(e,"headFrame",cc.Sprite),n=this.getChild(e,"headFrame/icon",cc.Sprite);this.getChild(e,"name",cc.Label).string="Lv"+t.level+" "+t.name,u.CostumeModel.setCostSF(n,u.CostumeType.Head,t.skin.portrait),u.CostumeModel.setCostSF(i,u.CostumeType.HeadFM,t.skin.portrait_skin),this.refreshHp(e,this.hpWidth,this.hpWidth)},t.prototype.refreshHp=function(e,t,i){this.getChild(e,"hp").width=this.hpWidth*(i/t)>0?this.hpWidth*(i/t):0},t.prototype.closeView=function(){e.prototype.closeView.call(this),this.unschedule(this.downFunction),this.unschedule(this.downFunction1),_.default.instance.serverFightType=d.ServerFightType.Default,a.EventManager.instance.dispatch(h.CommonEvent.Event_Battlefield_End)},o([I({type:cc.Prefab})],t.prototype,"serverFightPrefab",void 0),o([I({type:cc.Node})],t.prototype,"serverFightViewNode",void 0),t=o([b],t)}(l.default);i.default=M,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/MineInfoConfig":"MineInfoConfig","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","../model/CostumeModel":"CostumeModel","../model/MineModel":"MineModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","../serverFight/ServerFightView":"ServerFightView"}],MineInfoConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9eb7aOgz5NB56sf1GL7nuyC","MineInfoConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.max_power=e.max_power,i.re_power=e.re_power,i.s_cooldown=e.s_cooldown,i.l_cooldown=e.l_cooldown,i.h_cooldown=e.h_cooldown,i.protect_time=e.protect_time,i.battletime=e.battletime,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=Number(i),t.configMap.set(i,n)})},t.getConfigById=function(e){return this.configMap.get(e.toString())},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.MineInfoConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MineMapItem:[function(e,t,i){"use strict";cc._RF.push(t,"2d2a5v/Pw9LW6e059IQqqcz","MineMapItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../config/ColorConfig"),r=e("../config/WordConfig"),c=e("../model/MineModel"),l=e("../model/OneMineModel"),d=e("../model/ServerTime"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrameList=[],t.bgSpriteFrameList=[],t.colorList=["#ff580e","#41a3ff","#ff5ffd"],t.timeOut=0,t.refreshTime=0,t}return n(t,e),t.prototype.refresh=function(e){if(this.model=c.default.modelList[e],this.model){if(this.findChild(this.node,"bg").color=s.ColorConfig.getQualityColor(this.model.mineConfigId-1),this.findChild(this.node,"nobody").color=s.ColorConfig.getQualityColor(this.model.mineConfigId-1),this.findChild(this.node,"nobody").getComponent(cc.Label).string=r.WordConfig.getWord(61471),this.model.mineState==l.default.EMPTY)this.findChild(this.node,"nobody").active=!0,this.findChild(this.node,"heroInfo").active=!1,this.findChild(this.node,"icon_baohu").active=!1,this.findChild(this.node,"icon_zhanling").active=!1,this.findChild(this.node,"powerInfo").active=!1;else if(this.model.mineState==l.default.LOCKED){this.findChild(this.node,"nobody").active=!1,this.findChild(this.node,"heroInfo").active=!0,this.findChild(this.node,"heroInfo/icon").getComponent(cc.Sprite).spriteFrame=this.spriteFrameList[this.model.roleModel.occupation-1],this.findChild(this.node,"heroInfo/roleName").getComponent(cc.Label).string=this.model.roleModel.name,this.findChild(this.node,"heroInfo/roleName").color=s.ColorConfig.getOccupationColor(this.model.roleModel.occupation),this.findChild(this.node,"heroInfo/roleLevel").getComponent(cc.Label).string="lv"+this.model.roleModel.lv,this.findChild(this.node,"heroInfo/roleLevel").color=s.ColorConfig.getOccupationColor(this.model.roleModel.occupation),this.refreshPower();var t=this.model.safeTime-d.ServerTime.getServerTime()/1e3;(t=Math.floor(t))<=0&&(t=0),(t=Math.ceil(t))>0&&this.model.mineConfigId>2?(this.findChild(this.node,"icon_baohu").active=!0,this.findChild(this.node,"icon_zhanling").active=!1):(this.findChild(this.node,"icon_baohu").active=!1,this.findChild(this.node,"icon_zhanling").active=!0)}this.findChild(this.node,"index").getComponent(cc.Label).string=(this.model.mineId+"").substr(1)}},t.prototype.showPower=function(){this.model&&this.model.mineState==l.default.LOCKED&&(this.refreshPower(),this.findChild(this.node,"powerInfo").active=!0)},t.prototype.showInfo=function(){this.model&&this.model.mineState==l.default.LOCKED&&(this.findChild(this.node,"powerInfo").active=!1)},t.prototype.refreshPower=function(){this.findChild(this.node,"powerInfo/progressBar").getComponent(cc.ProgressBar).progress=c.default.getCurrPower(this.model)/this.model.roleModel.maxPower,this.findChild(this.node,"powerInfo/power").getComponent(cc.Label).string=c.default.getCurrPower(this.model)+"/"+this.model.roleModel.maxPower,this.findChild(this.node,"powerInfo/progressBar/light").x=c.default.getCurrPower(this.model)/this.model.roleModel.maxPower*120-60},o([h({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),o([h({type:[cc.SpriteFrame]})],t.prototype,"bgSpriteFrameList",void 0),t=o([g],t)}(a.default);i.default=u,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../config/ColorConfig":"ColorConfig","../config/WordConfig":"WordConfig","../model/MineModel":"MineModel","../model/OneMineModel":"OneMineModel","../model/ServerTime":"ServerTime"}],MineModel:[function(e,t,i){"use strict";cc._RF.push(t,"f55eeWm/sdDrKIuljZ2z4IB","MineModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/EventManager"),a=e("../../engine/LocalStorage"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../config/ColorConfig"),l=e("../config/ITemsConfig"),d=e("../config/MineConfig"),f=e("../config/MineInfoConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../manager/RedPointManager"),p=e("../network/SocketClient"),m=e("./ChatModel"),C=e("./CostumeModel"),_=e("./OneMineModel"),v=e("./RoleInfoModel"),y=e("./ServerTime"),b=function(){return function(){}}();i.MineData=b;var I=function(){return function(){}}();i.MineReportData=I,function(e){e[e.Occupy=1]="Occupy",e[e.Plunder=2]="Plunder",e[e.Retake=3]="Retake"}(i.MineType||(i.MineType={})),function(e){e[e.Occupy=1]="Occupy",e[e.Plunder=2]="Plunder",e[e.BeOccupy=3]="BeOccupy",e[e.BePlunder=4]="BePlunder",e[e.Retake=5]="Retake",e[e.AssistRetake=6]="AssistRetake"}(i.MineReportType||(i.MineReportType={}));var M=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[u.RedPointId.Mine,u.RedPointId.Minemeilaoban],this.protos=[s.ProtoConfig.c_mine_info,s.ProtoConfig.c_mine_list,s.ProtoConfig.c_pvp_result],u.default.getInstance().addHandler(this)}return e.proto2ModelList=function(t){this.model=this.model?this.model:new e;for(var i=this.getDefaultModelList(),n=t.getMineInfoListList(),a=0;a<n.length;a++)for(var s=_.default.proto2ModelList(n[a]),r=0;r<i.length;r++)s.mineId==i[r].mineId&&(i[r]=s);this.plunder=t.getPlunder(),this.modelList=i,this.refreshMineTime=y.ServerTime.getServerTime()/1e3,o.EventManager.instance.dispatch(h.CommonEvent.Event_Refresh_Mine)},e.proto2Model=function(e){var t=this,i=e.getInfo(),n=_.default.proto2ModelList(i);this.modelList&&this.modelList.every(function(e,i){return n.mineId!=e.mineId||(t.modelList[i]=n,!1)})},e.proto2PlunderModelList=function(e){var t=this,i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_mine_list,e),n=i.getPage();this.plunder=i.getPlunder(),this.assist=i.getAssist(),this.plunderList=1==n?new Array:this.plunderList;var a=i.getMineListList(),c=function(e){if(Object.prototype.hasOwnProperty.call(a,e)){var i=a[e],n=new b;n.mineId=i.getMineId(),n.roleId=i.getId(),n.name=i.getName(),n.prof=i.getProf(),n.layer=i.getLayer(),n.reward=i.getReward(),n.fight=i.getFight(),n.configId=i.getCfgid(),n.level=i.getLevel(),n.skin=C.CostumeModel.proto2Personalize(i.getSkin());var o=!1;l.plunderList.every(function(e,i){return e.mineId!=n.mineId||(o=!0,t.plunderList[i]=n,!1)}),o||l.plunderList.push(n)}},l=this;for(var d in a)c(d);(1==n||a.length>0)&&o.EventManager.instance.dispatch(h.CommonEvent.Event_Mine_Plunder,n)},e.proto2Report=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_mine_battle_report,e);this.reportList=new Array;var i=t.getReportListList();for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var a=i[n],c=new I;c.reportId=a.getReportId(),c.mineId=a.getMineId(),c.type=a.getType(),c.roleId=a.getId(),c.name=a.getName(),c.prof=a.getProf(),c.level=a.getLevel(),c.fight=a.getFight(),c.state=a.getState(),c.time=a.getTime(),c.skin=C.CostumeModel.proto2Personalize(a.getSkin()),this.reportList.push(c)}this.reportList.sort(function(e,t){return t.time-e.time}),o.EventManager.instance.dispatch(h.CommonEvent.Event_Mine_Report)},e.proto2Retake=function(e){var t=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_mine_retake,e),i=t.getRet(),n=t.getReportId(),a=t.getType();0==i&&2==a&&o.EventManager.instance.dispatch("mine_retake_"+n)},e.createMineData=function(e){var t=new b;return t.mineId=e.mineId,t.roleId=e.roleId,t.name=e.name,t.prof=e.prof,t.level=e.level,t.fight=e.fight,t.skin=e.skin,t.reportId=e.reportId,t},e.getReportById=function(e){var t;return this.reportList&&this.reportList.length>0&&this.reportList.every(function(i){return e!=i.reportId||(t=i,!1)}),t},e.getPlunderById=function(e){var t;return this.plunderList&&this.plunderList.length>0&&this.plunderList.every(function(i){return i.mineId!=e||(t=i,!1)}),t},e.getDefaultModelList=function(){for(var e=[],t=1;t<10;t++){var i=new _.default;i.mineId=1e4*this.currMiniClass+9*(this.currPage-1)+t,i.mineState=1,i.mineConfigId=this.currMiniClass,i.safeTime=0,i.workTime=0,i.rewordNum=0,i.roleModel=null,e.push(i)}return e},e.getModelList=function(){return this.modelList},e.getMaxPage=function(){var e=d.MineConfig.getConfigById(this.currMiniClass);return this.maxPage=Math.floor(e.num/9),this.maxPage},e.getOneMineModelById=function(e){for(var t=0;t<this.modelList.length;t++)if(this.modelList[t].mineId==e)return this.modelList[t]},e.changeMineClass=function(e){this.currMiniClass!=e&&(this.currMiniClass=e,this.currPage=1,this.jumpToMyMine(),this.showTipStr(),e>1&&this.getMineInfoFromServer(),o.EventManager.instance.dispatch(h.CommonEvent.Event_Change_MineClass))},e.jumpToMyMine=function(){if(w.getIsHaveMine()){var e=w.myMineId,t=(e+"").charAt(0);if(Number(t)==this.currMiniClass){var i=(e+"").substr(1);this.currPage=Math.ceil(Number(i)/9)}}},e.showTipStr=function(){var e=d.MineConfig.getConfigById(Number(this.currMiniClass)),t="";1==this.currMiniClass?t+=cc.js.formatStr(g.WordConfig.getWord(60595),c.ColorConfig.ShenGreenColor,v.default.instance.roleName):(this.currMiniClass,t+=cc.js.formatStr(g.WordConfig.getWord(60597),c.ColorConfig.ShenGreenColor,v.default.instance.roleName,c.ColorConfig.getQualityHexColor(Number(e.id)-1),e.name)),m.ChatModel.addChatStr(m.ChatType.mine,t)},e.changePage=function(e){this.currPage!=e&&(this.currPage=e,this.getMineInfoFromServer())},e.getMineInfoFromServer=function(){this.currMiniClass>1&&p.default.s_mine_info(this.currMiniClass,this.currPage)},e.getCurrPower=function(e){var t=e.roleModel.currPower,i=e.workTime,n=d.MineConfig.getConfigById(e.mineConfigId).p_time;return t-Math.ceil(i/n)<0?0:t-Math.ceil(i/n)},e.prototype.checkRedPoint=function(t){var i,n={id:t,type:u.RedPointType.Default,show:i};return t==u.RedPointId.Mine?(i=e.plunder>0&&!e.isShow,n.show=i):t==u.RedPointId.Minemeilaoban&&(i=e.getFirstredMeilaoban(),n.show=i),n},e.getFirstredMeilaoban=function(){var e=this.LOCAL_KEY.FIRST_REDMEILAOBAN+v.default.instance.roleId;return!a.default.getBoolean(e)},e.setFirstredMeilaoban=function(e){var t=this.LOCAL_KEY.FIRST_REDMEILAOBAN+v.default.instance.roleId;a.default.setBoolean(t,e)},e.LOCAL_KEY={FIRST_REDMEILAOBAN:"first_redMeilaoban"},e.modelList=[],e.refreshMineTime=0,e.currMiniClass=1,e.currPage=1,e}();i.default=M;var w=function(){function e(){}return e.proto2ModelList=function(e){this.currPower=e.getCurrpower(),this.maxPower=e.getMaxpower(),this.mineCd=e.getMinecd(),this.myMineId=e.getMymineid(),this.workTime=e.getWorktime(),this.rewordNum=e.getRewordnum(),this.refreshMineTime=y.ServerTime.getServerTime()/1e3,this.isShowTip&&(this.showTip(),this.isShowTip=!1),console.log("MinePersonaInfoModel this.currPower this.maxPower",this.currPower,this.maxPower),o.EventManager.instance.dispatch(h.CommonEvent.Event_Refresh_PersonalMine)},e.getCurrPower=function(e){void 0===e&&(e=this.currPower);var t=this.workTime,i=d.MineConfig.getConfigById(2).p_time;return e-Math.ceil(t/i)<0?0:e-Math.ceil(t/i)},e.getIsHaveMine=function(){var e=!1;return this.myMineId>0&&(e=!0),e},e.showTip=function(){var t=e.myMineId,i=(t+"").charAt(0),o=d.MineConfig.getConfigById(Number(i)),a=(t+"").substr(1),s=f.MineInfoConfig.getConfigById(1),r="";r+=t>0?cc.js.formatStr(g.WordConfig.getWord(60598),c.ColorConfig.ShenGreenColor,v.default.instance.roleName,c.ColorConfig.getQualityHexColor(Number(i)-1),o.name,a,n.default.formatLeftTime2(1e3*e.workTime),c.ColorConfig.getQualityHexColor(l.ITemsConfig.getITemsConfigById(o.reward[0]).quality),l.ITemsConfig.getITemsConfigById(o.reward[0]).name,e.rewordNum,e.getCurrPower(),s.max_power):cc.js.formatStr(g.WordConfig.getWord(60599),c.ColorConfig.ShenGreenColor,v.default.instance.roleName,e.getCurrPower(),s.max_power),m.ChatModel.addChatStr(m.ChatType.mine,r)},e.currPower=0,e.maxPower=0,e.mineCd=0,e.myMineId=-1,e.workTime=0,e.rewordNum=0,e.pkRoleName="",e.refreshMineTime=0,e.isShowTip=!1,e}();i.MinePersonaInfoModel=w,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/ColorConfig":"ColorConfig","../config/ITemsConfig":"ITemsConfig","../config/MineConfig":"MineConfig","../config/MineInfoConfig":"MineInfoConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../network/SocketClient":"SocketClient","./ChatModel":"ChatModel","./CostumeModel":"CostumeModel","./OneMineModel":"OneMineModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],MinePanel:[function(e,t,i){"use strict";cc._RF.push(t,"66a41hTn2ROjqxmbVzdZTTg","MinePanel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/EventManager"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=e("../config/WordConfig"),d=e("../event/CommonEvent"),f=e("../model/MineModel"),g=e("../model/ServerTime"),h=e("../network/SocketClient"),u=e("../utils/MusicHelper"),p=e("./MineMapItem"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modelList=[],t.timeOut=0,t.refreshTime=0,t.showType=1,t.showTime=0,t}var i;return n(t,e),i=t,t.prototype.onEnable=function(){this.currClass=this.findChild(this.node,"1/currClass"),this.map=this.findChild(this.node,"2/1/map"),this.btn_lastClass=this.findChild(this.node,"2/1/btn_lastClass"),this.btn_lastTenClass=this.findChild(this.node,"2/1/btn_lastTenClass"),this.btn_nextClass=this.findChild(this.node,"2/1/btn_nextClass"),this.btn_nextTenClass=this.findChild(this.node,"2/1/btn_nextTenClass"),this.onAddEvent(this.btn_lastClass,this.onClickLastClass.bind(this)),this.onAddEvent(this.btn_lastTenClass,this.onClickLastTenClass.bind(this)),this.onAddEvent(this.btn_nextClass,this.onClickNextClass.bind(this)),this.onAddEvent(this.btn_nextTenClass,this.onClickNextTenClass.bind(this));for(var e=0;e<9;e++)this.onAddEvent(this.findChild(this.map,e+1+""),this.onClickItem.bind(this,e));s.EventManager.instance.on(d.CommonEvent.Event_Refresh_Mine,this.refreshMap,this)},t.prototype.refreshMap=function(){var e=cc.js.formatStr(l.WordConfig.getWord(60390),f.default.currPage,f.default.getMaxPage());this.currClass.getComponent(cc.Label).string=e,this.modelList=f.default.getModelList();for(var t=0;t<this.modelList.length;t++)this.findChild(this.map,t+1+"").getComponent(p.default).refresh(t)},t.prototype.onClickLastClass=function(){var e=f.default.currPage;(e-=1)>=1&&f.default.changePage(e)},t.prototype.onClickLastTenClass=function(){var e=f.default.currPage;(e-=10)>=1||(e=1),f.default.changePage(e)},t.prototype.onClickNextClass=function(){var e=f.default.currPage;(e+=1)<f.default.getMaxPage()||(e=f.default.getMaxPage()),f.default.changePage(e)},t.prototype.onClickNextTenClass=function(){var e=f.default.currPage;(e+=10)<f.default.getMaxPage()||(e=f.default.getMaxPage()),f.default.changePage(e)},t.prototype.onClickItem=function(e){r.default.instance.createView(c.default.gameView.MineTipView,null,this.modelList[e])},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e),e.on(cc.Node.EventType.TOUCH_END,function(){e.getComponent(cc.Button).enabled&&(u.MusicHelper.play_click(),t&&t())},e)},t.prototype.showPower=function(){for(var e=0;e<this.modelList.length;e++)this.findChild(this.map,e+1+"").getComponent(p.default).showPower();this.showType=i.SHOWPOWER},t.prototype.showInfo=function(){for(var e=0;e<this.modelList.length;e++)this.findChild(this.map,e+1+"").getComponent(p.default).showInfo();this.showType=i.SHOWINFO},t.prototype.update=function(){this.node.active&&(this.timeOut++,this.timeOut>=cc.game.getFrameRate()&&(this.refreshTime++,this.showTime++,this.timeOut=0,this.refreshTime>=10&&(this.refreshTime=0,this.showPower()),this.showTime>=3&&(this.showTime=0,this.showType==i.SHOWINFO?this.showPower():this.showInfo())),Math.floor(g.ServerTime.getServerTime()/1e3-f.default.refreshMineTime)>=60&&f.default.getMineInfoFromServer(),Math.floor(g.ServerTime.getServerTime()/1e3-f.MinePersonaInfoModel.refreshMineTime)>=60&&h.default.s_mine_personal_info())},t.SHOWINFO=1,t.SHOWPOWER=2,t=i=o([C],t)}(a.default));i.default=_,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/MineModel":"MineModel","../model/ServerTime":"ServerTime","../network/SocketClient":"SocketClient","../utils/MusicHelper":"MusicHelper","./MineMapItem":"MineMapItem"}],MinePlunderCell:[function(e,t,i){"use strict";cc._RF.push(t,"9349eBj50FHAajzBphFEZ6N","MinePlunderCell");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/DateUtil"),r=e("../../engine/SpriteFrameComponent"),c=e("../config/ColorConfig"),l=e("../config/MineConfig"),d=e("../config/WordConfig"),f=e("../model/CostumeModel"),g=e("../model/RoleInfoModel"),h=e("../network/SocketClient"),u=e("../utils/MusicHelper"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode()},t.prototype.initView=function(e){this.data=e,this.zhiye=["",d.WordConfig.getWord(60503),d.WordConfig.getWord(60504),d.WordConfig.getWord(60505)],this.config=l.MineConfig.getConfigById(e.configId),this.nameLabel.string=this.config.name,this.nameLabel.node.color=c.ColorConfig.hexToColor(this.config.color),this.itemLabel.string=d.WordConfig.getWord(61737)+"X"+e.reward,this.roleName.string=e.name,this.occupationName.string=this.zhiye[e.prof],this.occupationIcon.spriteFrame=this.occupationIcon.node.getComponent(r.SpriteFrameComponent).spriteFrameList[e.prof-1],this.powerLabel.string=e.fight+"",this.powerLabel.node.color=g.default.instance.totalFight>=e.fight?c.ColorConfig.GreenColor:c.ColorConfig.RedColor,f.CostumeModel.setCostSF(this.headIcon,f.CostumeType.Head,e.skin.portrait),f.CostumeModel.setCostSF(this.headFrame,f.CostumeType.HeadFM,e.skin.portrait_skin),this.onAddEvent(this.btnPlunderNode,this.onBtnPlunder.bind(this))},t.prototype.initFindNode=function(){this.nameLabel=this.getChild(this.node,"name",cc.Label),this.itemLabel=this.getChild(this.node,"plunder/item",cc.Label),this.powerLabel=this.getChild(this.node,"power/num",cc.Label),this.roleName=this.getChild(this.node,"role/name",cc.Label),this.occupationIcon=this.getChild(this.node,"occupation/icon",cc.Sprite),this.occupationName=this.getChild(this.node,"occupation/name",cc.Label),this.btnPlunderNode=this.getChild(this.node,"btnPlunder",cc.Node),this.headIcon=this.getChild(this.node,"headFrame/icon",cc.Sprite),this.headFrame=this.getChild(this.node,"headFrame",cc.Sprite)},t.prototype.onBtnPlunder=function(){h.default.s_mine_plunder(this.data.mineId)},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e);var n=0;e.on(cc.Node.EventType.TOUCH_START,function(){n=s.default.now()}),e.on(cc.Node.EventType.TOUCH_END,function(){if(e.getComponent(cc.Button).enabled){u.MusicHelper.play_click();var i=s.default.now();t(0!=n&&i-n>=400?1:0)}},e)},t=o([m],t)}(a.default));i.default=C,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/DateUtil":"DateUtil","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../config/ColorConfig":"ColorConfig","../config/MineConfig":"MineConfig","../config/WordConfig":"WordConfig","../model/CostumeModel":"CostumeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../utils/MusicHelper":"MusicHelper"}],MinePlunderView:[function(e,t,i){"use strict";cc._RF.push(t,"2469cI4wFRBBIAWhr0afeTK","MinePlunderView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/ColorConfig"),f=e("../config/DefaultConfig"),g=e("../config/ViewConfig"),h=e("../config/WordConfig"),u=e("../event/CommonEvent"),p=e("../manager/RedPointManager"),m=e("../model/MineModel"),C=e("../model/RoleInfoModel"),_=e("../network/SocketClient"),v=e("./MinePlunderCell"),y=cc._decorator,b=y.ccclass,I=y.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemCell=null,t.currentPage=0,t.isRequest=!1,t.isCd=!1,t}return n(t,e),t.prototype.onEnable=function(){this.initFindNode(),_.default.s_mine_list(this.currentPage+1),a.EventManager.instance.on(u.CommonEvent.Event_Mine_Plunder,this.initView,this),m.default.isShow=!0,p.default.getInstance().checkRedPointById(p.RedPointId.Mine)},t.prototype.initFindNode=function(){this.tip=this.getChild(this.node,"frame/scrollView/view/tip"),this.frameTip=this.getChild(this.node,"frame/tip"),this.plunderNumLabel=this.getChild(this.node,"frame/bottom/count/num",cc.Label),this.awardNumLabel=this.getChild(this.node,"frame/bottom/helpCount/num",cc.Label),this.itemListNode=this.getChild(this.node,"frame/scrollView/view/content"),this.scrollView=this.getChild(this.node,"frame/scrollView",cc.ScrollView),this.btnSelect=this.getChild(this.node,"frame/btnSelect"),this.btnSelectIcon=this.getChild(this.btnSelect,"icon")},t.prototype.initView=function(e){this.tip.active=!1,this.currentPage=e,this.initItemList(),this.initInfo(),this.onAddEvent(this.btnSelect,this.onBtnSelect.bind(this))},t.prototype.initItemList=function(){for(var e=m.default.plunderList,t=e.length>this.itemListNode.childrenCount?e.length:this.itemListNode.childrenCount,i=0;i<t;i++){var n=void 0;i<this.itemListNode.childrenCount?n=this.itemListNode.children[i]:((n=cc.instantiate(this.itemCell)).parent=this.itemListNode,n.setPosition(0,0)),n.active=this.btnSelectIcon.active?i<e.length&&C.default.instance.totalFight>=e[i].fight:i<e.length,i<e.length&&n.getComponent(v.default).initView(e[i])}this.frameTip.active=e.length<=0},t.prototype.initInfo=function(){this.plunderNumLabel.string=m.default.plunder+"/"+f.DefaultConfig.getConfigById(151).value,this.awardNumLabel.string=m.default.assist+"/"+f.DefaultConfig.getConfigById(153).value,this.plunderNumLabel.node.color=m.default.plunder>0?d.ColorConfig.GreenColor:d.ColorConfig.RedColor,this.awardNumLabel.node.color=m.default.assist>0?d.ColorConfig.GreenColor:d.ColorConfig.RedColor},t.prototype.onScrollEvent=function(){var e=this;if(!this.isRequest&&!this.isCd){var t=this.scrollView.getMaxScrollOffset().y;this.scrollView.getScrollOffset().y-t>100&&(this.tip.active=!0,this.isRequest=!0,this.isCd=!0,this.scheduleOnce(function(){e.isCd=!1},1),_.default.s_mine_list(this.currentPage+1))}},t.prototype.onBtnSelect=function(){this.btnSelectIcon.active=!this.btnSelectIcon.active,this.initView(this.currentPage)},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_mine_list)this.isRequest=!1;else if(e==s.ProtoConfig.c_mine_plunder){var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_mine_plunder,t),n=i.getRet(),o=i.getMineId();if(0==n){var a=m.default.getPlunderById(o);a?(c.default.instance.createView(g.default.gameView.MineFightView,null,a,m.MineReportType.Plunder),this.closeView()):h.WordConfig.showWord(61742)}}},o([I(cc.Prefab)],t.prototype,"itemCell",void 0),t=o([b],t)}(l.default);i.default=M,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/DefaultConfig":"DefaultConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../model/MineModel":"MineModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","./MinePlunderCell":"MinePlunderCell"}],MineReportCell:[function(e,t,i){"use strict";cc._RF.push(t,"9cffdj+lS1Pq6nUj0r2bRA7","MineReportCell");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/DateUtil"),r=e("../../engine/EventManager"),c=e("../config/ColorConfig"),l=e("../config/WordConfig"),d=e("../event/CommonEvent"),f=e("../model/ChatRoomModel"),g=e("../model/MineModel"),h=e("../model/RoleInfoModel"),u=e("../network/SocketClient"),p=e("../utils/MusicHelper"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode()},t.prototype.initView=function(e){var t;switch(this.data=e,e.type){case g.MineReportType.Occupy:t=cc.js.formatStr(l.WordConfig.getWord(61723),e.name);break;case g.MineReportType.Plunder:t=cc.js.formatStr(l.WordConfig.getWord(61721),e.name);break;case g.MineReportType.BeOccupy:t=cc.js.formatStr(l.WordConfig.getWord(61722),e.name);break;case g.MineReportType.BePlunder:t=cc.js.formatStr(l.WordConfig.getWord(61720),e.name)}this.btnListNode.children.forEach(function(e){e.active=!1}),this.descLabel.string=t,this.timeLabel.string=s.default.formatDateStr(1e3*e.time),this.plunder.active=e.type==g.MineReportType.Plunder,this.occupy.active=e.type==g.MineReportType.Occupy,this.btnRecaptureAward.active=e.type==g.MineReportType.BePlunder,this.btnRecaptureMine.active=e.type==g.MineReportType.BeOccupy,this.btnHelp.active=!1,1==e.state?(this.onAddEvent(this.btnRecaptureAward,this.onBtnRetake.bind(this)),this.onAddEvent(this.btnRecaptureMine,this.onBtnRob.bind(this)),this.onAddEvent(this.btnHelp,this.onBtnGuildHelp.bind(this))):(this.btnRecaptureAward.color=c.ColorConfig.hexToColor("#434343"),this.btnRecaptureMine.color=c.ColorConfig.hexToColor("#434343"),this.btnHelp.color=c.ColorConfig.hexToColor("#434343"))},t.prototype.onBtnRetake=function(){u.default.s_mine_retake(this.data.reportId)},t.prototype.onBtnRob=function(){r.EventManager.instance.dispatch(d.CommonEvent.Event_Mine_Report_ID,this.data.reportId),u.default.s_mine_rob(this.data.mineId)},t.prototype.onBtnGuildHelp=function(){var e={type:"mine",desc:cc.js.formatStr(l.WordConfig.getWord(61733),this.data.name,this.data.level,this.data.fight),data:this.data.reportId,roleId:h.default.instance.roleId,beRoleId:this.data.roleId};f.ChatRoomModel.proto2_s_send_world(2,"mine",JSON.stringify(e))},t.prototype.initFindNode=function(){this.timeLabel=this.getChild(this.node,"time",cc.Label),this.descLabel=this.getChild(this.node,"desc",cc.RichText),this.btnListNode=this.getChild(this.node,"btnList"),this.btnRecaptureAward=this.getChild(this.btnListNode,"btnRecaptureAward"),this.btnHelp=this.getChild(this.btnListNode,"btnHelp"),this.btnRecaptureMine=this.getChild(this.btnListNode,"btnRecaptureMine"),this.plunder=this.getChild(this.btnListNode,"plunder"),this.occupy=this.getChild(this.btnListNode,"occupy")},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e);var n=0;e.on(cc.Node.EventType.TOUCH_START,function(){n=s.default.now()}),e.on(cc.Node.EventType.TOUCH_END,function(){if(e.getComponent(cc.Button).enabled){p.MusicHelper.play_click();var i=s.default.now();t(0!=n&&i-n>=400?1:0)}},e)},t=o([C],t)}(a.default));i.default=_,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../config/ColorConfig":"ColorConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ChatRoomModel":"ChatRoomModel","../model/MineModel":"MineModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../utils/MusicHelper":"MusicHelper"}],MineReportView:[function(e,t,i){"use strict";cc._RF.push(t,"8c7a39t9x9OEJ7+iZSgQ6aV","MineReportView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/ViewConfig"),f=e("../config/WordConfig"),g=e("../event/CommonEvent"),h=e("../model/MineModel"),u=e("../network/SocketClient"),p=e("./MineReportCell"),m=cc._decorator,C=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemCell=null,t}return n(t,e),t.prototype.onEnable=function(){this.initFindNode(),u.default.s_mine_battle_report(),a.EventManager.instance.on(g.CommonEvent.Event_Mine_Report,this.initItemList,this),a.EventManager.instance.on(g.CommonEvent.Event_Mine_Report_ID,this.handlerReportId,this)},t.prototype.initFindNode=function(){this.scrollView=this.getChild(this.node,"frame/scrollView",cc.ScrollView),this.frameTip=this.getChild(this.node,"frame/tip")},t.prototype.initItemList=function(){for(var e=h.default.reportList,t=e.length>this.scrollView.content.childrenCount?e.length:this.scrollView.content.childrenCount,i=0;i<t;i++){var n=void 0;i<this.scrollView.content.childrenCount?n=this.scrollView.content.children[i]:((n=cc.instantiate(this.itemCell)).parent=this.scrollView.content,n.setPosition(0,0)),n.active=i<e.length,i<e.length&&n.getComponent(p.default).initView(e[i])}this.frameTip.active=e.length<=0},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_mine_retake){var i=(g=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_mine_retake,t)).getRet(),n=g.getReportId(),o=g.getType();if(0==i&&1==o){var a=h.default.getReportById(n);if(a){var l=h.default.createMineData(a);c.default.instance.createView(d.default.gameView.MineFightView,null,l,h.MineReportType.Retake),this.closeView()}else f.WordConfig.showWord(61742)}}else if(e==s.ProtoConfig.c_mine_rob){var g;i=(g=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_mine_rob,t)).getRet(),g.getMineId();if(0==i)(l=h.default.getReportById(this.selectReportId))?(c.default.instance.createView(d.default.gameView.MineFightView,null,l,h.MineReportType.Occupy),this.closeView()):f.WordConfig.showWord(61742)}},t.prototype.handlerReportId=function(e){this.selectReportId=e},o([_(cc.Prefab)],t.prototype,"itemCell",void 0),t=o([C],t)}(l.default);i.default=v,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/MineModel":"MineModel","../network/SocketClient":"SocketClient","./MineReportCell":"MineReportCell"}],MineResultView:[function(e,t,i){"use strict";cc._RF.push(t,"89bc2xBXH9BKLimPs+L2pTe","MineResultView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ResourcesManager"),s=e("../../engine/SpriteFrameComponent"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/FailedJumpConfig"),d=e("../config/GameConst"),f=e("../config/ITemsConfig"),g=e("../config/ViewConfig"),h=e("../config/WordConfig"),u=e("../model/CostumeModel"),p=e("../model/ItemInfoModel"),m=e("../model/MineModel"),C=e("../prefab/ItemPrefab"),_=e("../utils/JumpActionUtils"),v=cc._decorator,y=v.ccclass,b=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemCellPrefab=null,t}return n(t,e),t.prototype.onInitChild=function(e,t,i,n,o,a){this.pkData=t,this.myData=e,this.mineType=n,this.isSucceed=i,this.itemArr=o,this.resArr=a,this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.succeedNode=this.getChild(this.node,"frame/succeed"),this.failNode=this.getChild(this.node,"frame/fail"),this.descLabel=this.getChild(this.succeedNode,"desc",cc.RichText),this.playerBg1Node=this.getChild(this.succeedNode,"playerBg1"),this.playerBg2Node=this.getChild(this.succeedNode,"playerBg2"),this.awardNode=this.getChild(this.succeedNode,"award"),this.itemListNode=this.getChild(this.awardNode,"itemList"),this.iconListNode=this.getChild(this.failNode,"itemList"),this.iconNode=this.getChild(this.iconListNode,"item"),this.tipNode=this.getChild(this.awardNode,"tip"),this.plunderText=this.getChild(this.awardNode,"plunder"),this.helpText=this.getChild(this.awardNode,"help"),this.retakeText=this.getChild(this.awardNode,"retake"),this.btnSure1=this.getChild(this.succeedNode,"btnSure"),this.btnSure2=this.getChild(this.failNode,"btnSure")},t.prototype.initView=function(){this.isSucceed?this.initSucced():this.initFail()},t.prototype.initSucced=function(){var e,t=this;switch(this.succeedNode.active=!0,this.myData&&this.pkData&&(this.setPlayerInfo(this.playerBg1Node,this.myData),this.setPlayerInfo(this.playerBg2Node,this.pkData)),this.awardNode.active=this.mineType!=m.MineReportType.Occupy,this.plunderText.active=this.mineType==m.MineReportType.Plunder,this.helpText.active=this.mineType==m.MineReportType.AssistRetake,this.retakeText.active=this.mineType==m.MineReportType.Retake,this.awardNode.active&&(this.mineType==m.MineReportType.AssistRetake?this.itemArr&&this.itemArr.length>0||this.resArr&&this.resArr.length>0?(this.itemArr&&this.itemArr.forEach(function(e){t.initItemCell(e.id,e.count,!1)}),this.resArr&&this.resArr.forEach(function(e){t.initItemCell(e.id,e.count,!0)})):(this.tipNode.active=!0,this.tipNode.getComponent(cc.Label).string=h.WordConfig.getWord(61731)):this.mineType==m.MineReportType.Retake?(this.tipNode.active=!0,this.tipNode.getComponent(cc.Label).string=h.WordConfig.getWord(61740)):this.initItemCell("I3101",this.myData.reward,!1)),this.mineType){case m.MineReportType.Occupy:case m.MineReportType.BeOccupy:e=cc.js.formatStr(h.WordConfig.getWord(61728),this.pkData.name);break;case m.MineReportType.Plunder:case m.MineReportType.BePlunder:e=cc.js.formatStr(h.WordConfig.getWord(61726),this.pkData.name);break;case m.MineReportType.Retake:e=cc.js.formatStr(h.WordConfig.getWord(61739),this.pkData.name);break;case m.MineReportType.AssistRetake:e=cc.js.formatStr(h.WordConfig.getWord(61729),this.pkData.name)}this.descLabel.string=e,this.onAddEvent(this.btnSure1,this.closeView.bind(this))},t.prototype.initFail=function(){var e=this;this.failNode.active=!0;for(var t=l.FailedJumpConfig.getConfig(),i=t.length>this.iconListNode.childrenCount?t.length:this.iconListNode,n=function(i){var n=void 0;if(i<o.iconListNode.childrenCount?n=o.iconListNode.children[i]:(n=cc.instantiate(o.iconNode)).parent=o.iconListNode,n.active=i<t.length,i<t.length){var s=n.getChildByName("icon").getComponent(cc.Sprite),r=n.getChildByName("name").getComponent(cc.Label);a.default.instance.loadSprite(s,"toStrongerIcon/"+t[i].icon),r.string=t[i].name,o.onAddEvent(n,function(){_.default.doAction(t[i].jumpId),e.closeView()})}},o=this,s=0;s<i;s++)n(s);this.onAddEvent(this.btnSure2,this.closeView.bind(this))},t.prototype.initItemCell=function(e,t,i){void 0===i&&(i=!1);var n=cc.instantiate(this.itemCellPrefab);if(n.parent=this.itemListNode,i)n.getComponent(C.default).initResource(parseInt(e),t);else{var o=f.ITemsConfig.getITemsConfigById("I3101"),a=p.default.create(d.GameConst.ITEM_KIND.ITEM,o.id,t,o.quality);n.getComponent(C.default).init(a)}},t.prototype.setPlayerInfo=function(e,t){var i=this.getChild(e,"headFrame",cc.Sprite),n=this.getChild(e,"headFrame/icon",cc.Sprite),o=this.getChild(e,"occupation"),a=this.getChild(e,"txtLevel",cc.Label),r=this.getChild(e,"txtName",cc.Label),c=this.getChild(e,"txtZhanLi",cc.Label);u.CostumeModel.setCostSF(n,u.CostumeType.Head,t.skin.portrait),u.CostumeModel.setCostSF(i,u.CostumeType.HeadFM,t.skin.portrait_skin),o.getComponent(cc.Sprite).spriteFrame=o.getComponent(s.SpriteFrameComponent).spriteFrameList[t.prof-1],a.string="Lv"+t.level,r.string=t.name,c.string=h.WordConfig.getWord(60463)+t.fight},t.prototype.closeView=function(){e.prototype.closeView.call(this),r.default.instance.closeView(g.default.gameView.MineFightView)},o([b(cc.Prefab)],t.prototype,"itemCellPrefab",void 0),t=o([y],t)}(c.default);i.default=I,cc._RF.pop()},{"../../engine/ResourcesManager":"ResourcesManager","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/FailedJumpConfig":"FailedJumpConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/CostumeModel":"CostumeModel","../model/ItemInfoModel":"ItemInfoModel","../model/MineModel":"MineModel","../prefab/ItemPrefab":"ItemPrefab","../utils/JumpActionUtils":"JumpActionUtils"}],MineTipView:[function(e,t,i){"use strict";cc._RF.push(t,"d3502jkegRCJ74mVXvPRc/U","MineTipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ProtoConfig"),l=e("../../engine/ProtoUtils"),d=e("../../engine/UIManager"),f=e("../../engine/ViewBase"),g=e("../config/ColorConfig"),h=e("../config/DefaultConfig"),u=e("../config/ITemsConfig"),p=e("../config/MineConfig"),m=e("../config/ViewConfig"),C=e("../config/WordConfig"),_=e("../event/CommonEvent"),v=e("../model/FightModel"),y=e("../model/ItemInfoModel"),b=e("../model/MineModel"),I=e("../model/OneMineModel"),M=e("../model/RoleInfoModel"),w=e("../model/ServerTime"),k=e("../network/HttpHelper"),S=e("../network/SocketClient"),P=e("../utils/UIHelper"),E=cc._decorator,L=E.ccclass,T=E.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeOut=0,t.modelRoleId=0,t.topspriteFrameList=[],t.spriteFrameList=[],t.zhiyespriteFrameList=[],t.isGetting=!1,t.doType=0,t}var i;return n(t,e),i=t,t.getNameListByIndex=function(e){return this.nameList=["",""],this.nameList.push(C.WordConfig.getWord(60570)),this.nameList.push(C.WordConfig.getWord(60571)),this.nameList.push(C.WordConfig.getWord(60572)),this.nameList.push(C.WordConfig.getWord(60573)),this.nameList[e]},t.prototype.onInitChild=function(e){this.zhiye=["",C.WordConfig.getWord(60503),C.WordConfig.getWord(60504),C.WordConfig.getWord(60505)],this.mineId=e.mineId,this.btnClose=this.findChild(this.node,"panel/top/btnClose"),this.top=this.findChild(this.node,"panel/top"),this.index=this.findChild(this.node,"panel/top/index"),this.txtTitle=this.findChild(this.node,"panel/top/txtTitle"),this.mineInfo=this.findChild(this.node,"panel/middle/mineInfo"),this.needPower=this.findChild(this.node,"panel/middle/needPower"),this.rewardSpeed=this.findChild(this.node,"panel/middle/rewardSpeed"),this.reward=this.findChild(this.node,"panel/middle/reward"),this.baohuTime=this.findChild(this.node,"panel/middle/baohuTime"),this.currPower=this.findChild(this.node,"panel/middle/currPower"),this.currPassTime=this.findChild(this.node,"panel/middle/currPassTime"),this.owerInfo=this.findChild(this.node,"panel/middle/owerInfo"),this.buttom=this.findChild(this.node,"panel/buttom"),this.btn_addSaveTime=this.findChild(this.baohuTime,"btn_addSaveTime")},t.prototype.onShow=function(){var e=this;d.default.instance.setTopUI(m.default.gameView.MineTipView),this.model=b.default.getOneMineModelById(this.mineId),this.isGetting=!1,this.onAddEvent(this.btnClose,this.onClickClose.bind(this)),this.onAddEvent(this.findChild(this.buttom,"btn_kaicai"),this.onClickKaiCai.bind(this)),this.onAddEvent(this.findChild(this.buttom,"btn_rob"),this.onClickRob.bind(this)),this.onAddEvent(this.findChild(this.buttom,"btn_lift"),this.onClickLift.bind(this)),this.onAddEvent(this.findChild(this.buttom,"btn_occupy"),this.onBtnOccupy.bind(this)),this.onAddEvent(this.btn_addSaveTime,this.onClickAddSafeTime.bind(this));var t=this.getChild(this.getChild(this.node,"pnlTips"),"pnlBtn");this.findChild(t,"btnAgree").on(cc.Node.EventType.TOUCH_END,function(){e.findChild(e.node,"pnlTips").active=!1,e.model.mineState==I.default.LOCKED?(e.doType=i.Do_Occupy,e.isGetting=!0,b.default.getMineInfoFromServer()):e.model.mineState==I.default.EMPTY&&(e.isGetting=!0,b.default.getMineInfoFromServer())}),this.findChild(t,"btnCancel").on(cc.Node.EventType.TOUCH_END,function(){e.findChild(e.node,"pnlTips").active=!1}),this.refresh(),s.EventManager.instance.on(_.CommonEvent.Event_Refresh_Mine,this.refresh,this)},t.prototype.refresh=function(){if(this.model=b.default.getOneMineModelById(this.mineId),this.model){this.model.roleModel?this.model.roleModel.roleId!=this.modelRoleId&&(this.modelRoleId=this.model.roleModel.roleId,this.isGetting&&C.WordConfig.showWord(60248),this.isGetting=!1):0!=this.modelRoleId&&(this.modelRoleId=0,C.WordConfig.showWord(60248),this.isGetting=!1);var e=p.MineConfig.getConfigById(this.model.mineConfigId);if(this.index.getChildByName("value").getComponent(cc.Label).string=C.WordConfig.getWord(60574)+(this.model.mineId+"").substr(1),this.txtTitle.getComponent(cc.Label).string=i.getNameListByIndex(this.model.mineConfigId),this.txtTitle.color=g.ColorConfig.getQualityColor(this.model.mineConfigId-1),this.top.getChildByName("bg1").getComponent(cc.Sprite).spriteFrame=this.topspriteFrameList[this.model.mineConfigId-2],this.mineInfo.getChildByName("mineIcon1").getComponent(cc.Sprite).spriteFrame=this.spriteFrameList[this.model.mineConfigId-2],this.needPower.getChildByName("value").getComponent(cc.Label).string=e.zhanli+"",v.default.totalFight<e.zhanli?this.needPower.getChildByName("value").color=g.ColorConfig.RedColor:this.needPower.getChildByName("value").color=g.ColorConfig.GreenColor,this.rewardSpeed.getChildByName("value").getComponent(cc.Label).string=u.ITemsConfig.getITemsConfigById(e.reward[0]).name+"x"+e.reward[1]+C.WordConfig.getWord(60575),this.model.mineState==I.default.LOCKED)if(this.reward.active=!0,this.reward.getChildByName("value").getComponent(cc.Label).string=u.ITemsConfig.getITemsConfigById(e.reward[0]).name+"x"+this.model.rewordNum,this.reward.getChildByName("value").color=g.ColorConfig.getEquipQualityColor(u.ITemsConfig.getITemsConfigById(e.reward[0]).quality),this.baohuTime.active=!0,this.baohuTime.getChildByName("value").getComponent(cc.Label).string=this.getLeftTime()>0?a.default.formatLeftTime2(1e3*this.getLeftTime()):C.WordConfig.getWord(60456),this.currPower.active=!0,this.currPower.getChildByName("value").getComponent(cc.Label).string=b.default.getCurrPower(this.model)+"/"+this.model.roleModel.maxPower,this.currPassTime.active=!0,this.currPassTime.getChildByName("value").getComponent(cc.Label).string=a.default.formatLeftTime2(1e3*this.model.workTime),this.owerInfo.getChildByName("nobody").active=!1,this.owerInfo.getChildByName("owerName").active=!0,this.owerInfo.getChildByName("owerOccupation").active=!0,this.owerInfo.getChildByName("owerPower").active=!0,this.owerInfo.getChildByName("owerName").getChildByName("value").getComponent(cc.Label).string=this.model.roleModel.name,b.MinePersonaInfoModel.pkRoleName=this.model.roleModel.name,this.owerInfo.getChildByName("owerOccupation").getChildByName("value").getComponent(cc.Label).string=this.zhiye[this.model.roleModel.occupation],this.owerInfo.getChildByName("owerOccupation").getChildByName("value").color=g.ColorConfig.getOccupationColor(this.model.roleModel.occupation),this.owerInfo.getChildByName("owerOccupation").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.zhiyespriteFrameList[this.model.roleModel.occupation-1],this.owerInfo.getChildByName("owerPower").getChildByName("value").getComponent(cc.Label).string=this.model.roleModel.fight+"",this.findChild(this.buttom,"btn_kaicai").active=!1,this.btn_addSaveTime.active=!1,this.model.mineConfigId<=2&&(this.baohuTime.active=!1),this.model.roleModel.roleId==Number(M.default.instance.roleId))this.findChild(this.buttom,"btn_rob").active=!1,this.findChild(this.buttom,"btn_lift").active=!0,this.doType=i.Do_Leave,e.protect_time>0&&this.getCanDoTime()?this.btn_addSaveTime.active=!0:this.btn_addSaveTime.active=!1;else{var t=this.findChild(this.buttom,"btn_rob"),n=this.findChild(this.buttom,"btn_occupy"),o=this.findChild(n,"powerCost/value").getComponent(cc.Label);o.string=e.rob_power+"/"+b.MinePersonaInfoModel.getCurrPower(),o.node.color=e.rob_power<=b.MinePersonaInfoModel.getCurrPower()?g.ColorConfig.GreenColor:g.ColorConfig.RedColor,b.MinePersonaInfoModel.getCurrPower()<e.rob_power?this.findChild(n,"powerCost/value").color=g.ColorConfig.RedColor:this.findChild(n,"powerCost/value").color=g.ColorConfig.GreenColor,this.findChild(t,"powerCost/value").getComponent(cc.Label).string=b.default.plunder+"/"+h.DefaultConfig.getConfigById(151).value,this.findChild(t,"powerCost/value").color=b.default.plunder>0?g.ColorConfig.GreenColor:g.ColorConfig.RedColor,this.findChild(this.buttom,"btn_lift").active=!1,this.findChild(this.buttom,"btn_rob").active=!0,this.findChild(this.buttom,"btn_occupy").active=!0,this.model.mineConfigId<=2?this.buttom.active=!1:this.buttom.active=!0}else{this.doType=i.Do_KaiChai,this.reward.active=!1,this.baohuTime.active=!1,this.currPower.active=!1,this.currPassTime.active=!1;var s=this.findChild(this.buttom,"btn_kaicai");this.owerInfo.getChildByName("nobody").active=!0,this.owerInfo.getChildByName("owerName").active=!1,this.owerInfo.getChildByName("owerOccupation").active=!1,this.owerInfo.getChildByName("owerPower").active=!1,s.active=!0,this.findChild(this.buttom,"btn_rob").active=!1,this.findChild(this.buttom,"btn_lift").active=!1,b.MinePersonaInfoModel.getCurrPower()<e.exploit_power?this.findChild(s,"powerCost/value").color=g.ColorConfig.RedColor:this.findChild(s,"powerCost/value").color=g.ColorConfig.GreenColor,this.findChild(s,"powerCost/value").getComponent(cc.Label).string=e.exploit_power+""}this.isGetting&&(this.doType==i.Do_Rob?S.default.s_mine_plunder(this.model.mineId):this.doType==i.Do_Leave?(S.default.s_do_leaving(this.model.mineId),this.closeView()):this.doType==i.Do_KaiChai?(S.default.s_do_minning(this.model.mineId),this.closeView()):this.doType==i.Do_Occupy&&S.default.s_mine_rob(this.model.mineId))}else k.default.sendBugLog("model not find mimeId="+this.mineId)},t.prototype.update=function(){this.timeOut++,this.timeOut>=cc.game.getFrameRate()&&(this.timeOut=0,this.model&&this.model.workTime++,this.refreshTimeTxt())},t.prototype.createMineData=function(){var e=new b.MineData;return e.mineId=this.model.mineId,e.roleId=this.model.roleModel.roleId,e.name=this.model.roleModel.name,e.prof=this.model.roleModel.occupation,e.level=this.model.roleModel.lv,e.configId=this.model.mineConfigId,e.fight=this.model.roleModel.fight,e.skin=this.model.skin,e},t.prototype.refreshTimeTxt=function(){this.model&&(this.baohuTime.getChildByName("value").getComponent(cc.Label).string=this.getLeftTime()>0?a.default.formatLeftTime2(1e3*this.getLeftTime()):C.WordConfig.getWord(60456),this.currPassTime.getChildByName("value").getComponent(cc.Label).string=a.default.formatLeftTime2(1e3*this.model.workTime))},t.prototype.onSocketRespMsg=function(e,t){if(e==c.ProtoConfig.c_mine_plunder){var i=(n=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_mine_plunder,t)).getRet();n.getMineId();if(0==i)(o=this.createMineData())?(d.default.instance.createView(m.default.gameView.MineFightView,null,o,b.MineReportType.Plunder),this.closeView()):C.WordConfig.showWord(61742);else r.Logger.warn("\u670d\u52a1\u5668\u4e0d\u8ba9\u8fdb\u6218\u6597c_mine_plunder:",n)}else if(e==c.ProtoConfig.c_mine_rob){var n,o;i=(n=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_mine_rob,t)).getRet(),n.getMineId();if(0==i)(o=this.createMineData())?(d.default.instance.createView(m.default.gameView.MineFightView,null,o,b.MineReportType.Occupy),this.closeView()):C.WordConfig.showWord(61742);else r.Logger.warn("\u670d\u52a1\u5668\u4e0d\u8ba9\u8fdb\u6218\u6597c_mine_rob:",n)}},t.prototype.onClickClose=function(){this.closeView()},t.prototype.onClickKaiCai=function(){var e=p.MineConfig.getConfigById(this.model.mineConfigId);if(v.default.totalFight<e.zhanli)C.WordConfig.showWord(60167);else if(this.getCd()>0){var t=cc.js.formatStr(C.WordConfig.getWord(60249),a.default.fomatTimeBySecond(this.getCd()));P.UIHelper.showTip(t)}else b.MinePersonaInfoModel.myMineId>0?this.showTip():(this.isGetting=!0,b.default.getMineInfoFromServer())},t.prototype.onClickAddSafeTime=function(){var e=this,t="",i=p.MineConfig.getConfigById(this.model.mineConfigId),n=u.ITemsConfig.getITemsConfigById(i.protect_item[0]);g.ColorConfig.getEquipQualityColor(n.quality);var o=y.default.getItemAmount(i.protect_item[0]);if(o>=Number(i.protect_item[1]))t=cc.js.formatStr(C.WordConfig.getWord(60576),g.ColorConfig.getQualityHexColor(n.quality),n.name,i.protect_item[1],o,a.default.fomatTimeBySecond(i.protect_time)),d.default.instance.createView(m.default.gameView.DialogCheck,null,t,function(t){t&&S.default.s_add_safeTime(e.model.mineId)});else{var s=cc.js.formatStr(C.WordConfig.getWord(60242),n.name);P.UIHelper.showTip(s)}},t.prototype.onClickRob=function(){if(this.getLeftTime()>0)C.WordConfig.showWord(60165);else{var e=p.MineConfig.getConfigById(this.model.mineConfigId);if(v.default.totalFight<e.zhanli)C.WordConfig.showWord(60167);else if(this.getCd()>0){var t=cc.js.formatStr(C.WordConfig.getWord(60249),a.default.fomatTimeBySecond(this.getCd()));P.UIHelper.showTip(t)}else this.doType=i.Do_Rob,this.isGetting=!0,b.default.getMineInfoFromServer()}},t.prototype.onBtnOccupy=function(){if(this.getLeftTime()>0)C.WordConfig.showWord(60165);else{var e=p.MineConfig.getConfigById(this.model.mineConfigId);if(v.default.totalFight<e.zhanli)C.WordConfig.showWord(60167);else if(this.getCd()>0){var t=cc.js.formatStr(C.WordConfig.getWord(60249),a.default.fomatTimeBySecond(this.getCd()));P.UIHelper.showTip(t)}else b.MinePersonaInfoModel.myMineId>0?this.showTip():(this.doType=i.Do_Occupy,this.isGetting=!0,b.default.getMineInfoFromServer())}},t.prototype.onClickLift=function(){this.showTip()},t.prototype.getLeftTime=function(){var e=this.model.safeTime-w.ServerTime.getServerTime()/1e3;return(e=Math.floor(e))<=0&&(e=0),e=Math.ceil(e)},t.prototype.getCanDoTime=function(){var e=p.MineConfig.getConfigById(this.model.mineConfigId),t=b.default.getCurrPower(this.model)*e.p_time;return!((t-=this.getLeftTime())<0)},t.prototype.getCd=function(){var e=b.MinePersonaInfoModel.mineCd-w.ServerTime.getServerTime()/1e3;return(e=Math.floor(e))<=0&&(e=0),e=Math.ceil(e)},t.prototype.showTip=function(){var e=this.getChild(this.node,"pnlTips");e.active=!0,e.x=0,this.getChild(e,"pnlLbl/content",cc.Label).string=C.WordConfig.getWord(60250),this.model.mineState==I.default.LOCKED&&(this.model.roleModel.roleId,Number(M.default.instance.roleId))},t.Do_KaiChai=1,t.Do_Rob=2,t.Do_Leave=3,t.Do_Occupy=4,o([T({type:[cc.SpriteFrame]})],t.prototype,"topspriteFrameList",void 0),o([T({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),o([T({type:[cc.SpriteFrame]})],t.prototype,"zhiyespriteFrameList",void 0),t=i=o([L],t)}(f.default);i.default=R,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/DefaultConfig":"DefaultConfig","../config/ITemsConfig":"ITemsConfig","../config/MineConfig":"MineConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/FightModel":"FightModel","../model/ItemInfoModel":"ItemInfoModel","../model/MineModel":"MineModel","../model/OneMineModel":"OneMineModel","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper"}],MingYunZhiRenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b3589RVYP5Ga5cyNWUdhVg8","MingYunZhiRenConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../model/MagicModel"),s=e("./MagicNameConfig"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atk=0,t.mag=0,t.spt=0,t.hp=0,t.mp=0,t.BonusDamage_p=0,t.skill=[],t.need_level=0,t.zhanli=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.type=e.type,i.level=e.level,i.cost1=e.cost1,i.cost2=e.cost2,i.curr_progress=e.curr_progress,i.all_progress=e.all_progress,i.skill=e.skill,i.need_level=e.need_level,i.zhanli=e.zhanli,i.atk=e[1],i.mag=e[3],i.spt=e[5],i.BonusDamage_p=e[16],i.hp=e[10],i.mp=e[12],i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getJingJieConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getMagicModelList=function(e){var t,i=[];return e.atk>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.atk,t.magicValue=e.atk,i.push(t)),e.mag>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.mag,t.magicValue=e.mag,i.push(t)),e.spt>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.spt,t.magicValue=e.spt,i.push(t)),e.BonusDamage_p>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.BonusDamage_p,t.magicValue=e.BonusDamage_p,i.push(t)),e.hp>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.hp,t.magicValue=e.hp,i.push(t)),e.mp>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.mp,t.magicValue=e.mp,i.push(t)),i},t.Config_Name="mingyunzhirenConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.MingYunZhiRenConfig=r,cc._RF.pop()},{"../model/MagicModel":"MagicModel","./JsonConfigBase":"JsonConfigBase","./MagicNameConfig":"MagicNameConfig"}],MiniMapPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"e378btiDApHg5MgHz/3a+qF","MiniMapPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/DateUtil"),r=e("../../engine/EventManager"),c=e("../../engine/LocalStorage"),l=e("../../engine/ResourcesManager"),d=e("../../engine/UIManager"),f=e("../config/ColorConfig"),g=e("../config/GameConfig"),h=e("../config/MapConfig"),u=e("../config/MonsterConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../event/CommonEvent"),_=e("../model/AnnouncementModel"),v=e("../model/FightModel"),y=e("../model/FuGuiGameModel"),b=e("../model/HolidayMonsterModel"),I=e("../model/PostModel"),M=e("../model/RoleInfoModel"),w=e("../network/SocketClient"),k=e("../utils/MusicHelper"),S=e("../utils/UIHelper"),P=e("./GameManager"),E=cc._decorator,L=E.ccclass,T=(E.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxMapNum=9,t.maxCd=1*cc.game.getFrameRate(),t.nexCd=0,t.maxTime=500,t.infoBgList=[],t.mapbtnBgList=[],t.settingList=[],t.mapList=[],t}return n(t,e),t.prototype.onEnable=function(){r.EventManager.instance.on(C.CommonEvent.Event_SwitchMapSuc,this.onSwitchMapSuc,this),r.EventManager.instance.on(C.CommonEvent.Event_Refresh_Post,this.onRefreshHongdian,this),r.EventManager.instance.on(C.CommonEvent.Event_UserInfoRefresh,this.onRefreshHongdian,this),r.EventManager.instance.on(C.CommonEvent.Event_ShowAnnouncementRed,this.onRefreshHongdian,this),r.EventManager.instance.on("FEATURE_1018",this.onClickSetting,this,!0),r.EventManager.instance.on("FEATURE_1028",this.onClickMap,this,!0),this.onRefreshHongdian(),this.onSwitchMapSuc()},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.ui_hongdian=this.findChild(this.node,"infobtn/ui_hongdian"),this.ui_hongdian.active=!1;for(var t=0;t<h.MapConfig.Max_World;t++)this.infoBgList[t]=this.findChild(this.node,"infobtn/infoBg"+t),this.mapbtnBgList[t]=this.findChild(this.node,"mapbtn/mapbtnBg"+t),this.settingList[t]=this.node.getChildByName("infobtn").getChildByName("setting"+t),this.mapList[t]=this.findChild(this.node,"mapbtn/mapBg"+t),this.mapbtnBgList[t].on(cc.Node.EventType.TOUCH_END,this.onClickMapInfo.bind(this),this),this.infoBgList[t].on(cc.Node.EventType.TOUCH_END,this.onClickInfo,this),this.mapList[t].on(cc.Node.EventType.TOUCH_END,this.onClickMap,this),this.settingList[t].on(cc.Node.EventType.TOUCH_END,this.onClickSetting,this);this.progressBar=this.node.getChildByName("progressBar").getComponent(cc.ProgressBar),this.progressBar.node.active=!1;var i=this.node.getChildByName("map");this.mapItemNodeList=[],this.txtMapNameList=[];for(t=0;t<this.maxMapNum;t++){var n=i.getChildByName(""+t),o=n.getChildByName("name").getComponent(cc.Label);this.mapItemNodeList.push(n),this.txtMapNameList.push(o),n.on(cc.Node.EventType.TOUCH_END,this.selectMap.bind(this,t,n,o))}r.EventManager.instance.on(C.CommonEvent.Event_HolidayMonster,this.refreshMap,this),this.refreshMap(),this.refreshWorld()},t.prototype.onRefreshHongdian=function(){!I.default.getHadAllRead()||_.default.instance.needShowRed||M.default.instance.level>=52&&g.GameConfig.isOpenQusetionnaire&&null==c.default.getItem("questRedPoint")?this.ui_hongdian.active=!0:this.ui_hongdian.active=!1},t.prototype.refreshWorld=function(){for(var e=0;e<this.infoBgList.length;e++)e+1==h.MapConfig.curMapConfig.world?(this.infoBgList[e].active=!0,this.mapbtnBgList[e].active=!0,this.settingList[e].active=!0,this.mapList[e].active=!0):(this.infoBgList[e].active=!1,this.mapbtnBgList[e].active=!1,this.settingList[e].active=!1,this.mapList[e].active=!1)},t.prototype.onClickInfo=function(){k.MusicHelper.play_click(),d.default.instance.createView(p.default.gameView.msgInfo,null,0)},t.prototype.onClickMapInfo=function(){k.MusicHelper.play_click(),d.default.instance.createView(p.default.gameView.msgInfo,null,1)},t.prototype.onClickSetting=function(){k.MusicHelper.play_click(),d.default.instance.createView(p.default.gameView.setting);this.settingList},t.prototype.onClickMap=function(){k.MusicHelper.play_click(),d.default.instance.createView(p.default.gameView.map)},t.prototype.selectMap=function(e){if(k.MusicHelper.play_click(),!(P.default.instance.gameView&&P.default.instance.gameView.myRolePrefab&&P.default.instance.gameView.myRolePrefab.isDead||this.progressBar.node.active||-1!=M.default.instance.switchingMapId)){var t=h.MapConfig.getMapConfigByMapId(M.default.instance.mapId).map[e];if(!(t<=0)){var i=h.MapConfig.getMapIdByPositonAndWorld(t,h.MapConfig.curMapConfig.world);if(i.mapId!=M.default.instance.mapId)if(w.default.s_get_mine_allow(),75!=i.mapId||M.default.instance.mineAllow){if(v.default.maxFight<i.Lv){var n=m.WordConfig.getWord(60130);return n=n.replace("[#]",i.Lv+""),S.UIHelper.showTip(n),void d.default.instance.createView(p.default.gameView.toStrongerPanel)}i.mapId!=y.FuGuiGameModel.mapId||y.FuGuiGameModel.isInActTime()?(M.default.instance.switchingMapId=i.mapId,d.default.instance.showLoadingIcon(!1),this.progressBar.node.active=!0,this.progressBar.progress=0,this.nexCd=s.default.now()+this.maxTime,this.nowSelectIndex=e):m.WordConfig.showWord(60293)}else m.WordConfig.showWord(60292)}}},t.prototype.onSwitchMapSuc=function(){this.refreshMap(),this.refreshWorld()},t.prototype.update=function(){if(this.progressBar.node.active){var e=this.nexCd-s.default.now();e<=0&&(e=0),this.progressBar.progress=1-e/this.maxTime,e<=0&&(d.default.instance.hideLoadingIcon(),this.progressBar.node.active=!1,-1!=M.default.instance.switchingMapId&&M.default.instance.switchingMapId!=M.default.instance.mapId&&M.default.instance.switchMap(!0,M.default.instance.switchingMapId))}},t.prototype.refreshMap=function(){for(var e=h.MapConfig.curMapConfig.map,t=0;t<e.length;t++){var i=e[t],n=h.MapConfig.getMapIdByPositonAndWorld(i,h.MapConfig.curMapConfig.world),o=this.mapItemNodeList[t],a=o.getComponent(cc.Sprite),s=o.getChildByName("bossIcon"),r=!1;if(o.color=f.ColorConfig.WhiteColor,this.txtMapNameList[t].node.color=f.ColorConfig.WhiteColor,n)if(this.txtMapNameList[t].string=n.name,n.boss){var c=u.MonsterConfig.getMonsterConfigById(n.boss.monsterid);"2001"!=c.id&&c.id!=y.FuGuiGameModel.BossId.toString()?(l.default.instance.loadSprite(a,"mapicon/"+n.map_shade.skin0),r=!0):b.HolidayMonsterModel.isInActive&&b.HolidayMonsterModel.bossModel&&n.mapId==b.HolidayMonsterModel.bossModel.mapId?(n.mapId==M.default.instance.mapId?l.default.instance.loadSprite(a,"mapicon/ditu08_button_maoshandaoshi02"):(l.default.instance.loadSprite(a,"mapicon/ditu08_button_maoshandaoshi01"),this.txtMapNameList[t].node.color=f.ColorConfig.RedColor),r=!1):c.id==y.FuGuiGameModel.BossId.toString()?(n.mapId==M.default.instance.mapId?l.default.instance.loadSprite(a,"mapicon/ditu07_button_fuguizhu02"):(l.default.instance.loadSprite(a,"mapicon/ditu07_button_fuguizhu01"),this.txtMapNameList[t].node.color=f.ColorConfig.RedColor1),r=!1):l.default.instance.loadSprite(a,"mapicon/"+n.map_shade.skin0)}else l.default.instance.loadSprite(a,"mapicon/"+n.map_shade.skin0);else s&&(s.active=!1),this.txtMapNameList[t].string="",l.default.instance.loadSprite(a,"mapicon/ditu00_button");r?(s||((s=new cc.Node).name="bossIcon",s.addComponent(cc.Sprite),l.default.instance.loadSprite(s.getComponent(cc.Sprite),"mapicon/icon_boss"),s.x=-57,o.addChild(s)),s.active=!0):s&&(s.active=!1),n&&n.mapId==M.default.instance.mapId&&(this.mapItemNodeList[t].color=f.ColorConfig.YellowColor,this.txtMapNameList[t].node.color=f.ColorConfig.YellowColor)}h.MapConfig.curMapConfig.type==h.MapConfig.MAP_TYPE.Mine?(this.findChild(this.node,"infobtn").active=!1,this.findChild(this.node,"mapbtn").active=!1,this.findChild(this.node,"mineTip").active=!0):(this.findChild(this.node,"infobtn").active=!0,this.findChild(this.node,"mapbtn").active=!0,this.findChild(this.node,"mineTip").active=!1)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t=o([L],t)}(a.default));i.default=T,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/AnnouncementModel":"AnnouncementModel","../model/FightModel":"FightModel","../model/FuGuiGameModel":"FuGuiGameModel","../model/HolidayMonsterModel":"HolidayMonsterModel","../model/PostModel":"PostModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","./GameManager":"GameManager"}],MonsterConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ad86dv1faFHq4gESmuFVS16","MonsterConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./GameConst"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="1",t.elite_add={exp:1e3,hp:1e3,atk:1e3,def:1e3},t.header_add={exp:1e3,hp:1e3,atk:1e3,def:1e3},t.Commander_add={exp:1e3,hp:1e3,atk:1e3,def:1e3},t.boss_add={exp:1e3,hp:1e3,atk:1e3,def:1e3},t.bossHpKey="bossHpKey",t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.name=e.name,i.m_type=e.m_type,i.level=e.level,i.atk=e.atk,i.hp=e.hp,i.def=e.def,i.atDistance=e.atDistance,i.atSpeed=e.atSpeed,i.moveSpeed=e.movespeed,i.BonusDamage=e.BonusDamage,i.exp=e.exp,i.gold_prob=e.gold_prob,i.gold=e.gold,i.item_prob=e.item_prob,i.item=e.item,i.item_times=e.item_times/1e4,i.equip_prob=e.equip_prob,i.equip=e.equip,i.equip_times=e.equip_times/1e4,i.magic_find1=e.magic_find1,i.elite_add=e.elite_add,i.header_add=e.header_add,i.Commander_add=e.Commander_add,i.boss_add=e.boss_add,i.lucky=e.lucky,i.qiege=e.qiege,i.speedup=e.speedup,i.suppress=e.suppress,i.attacknum=e.attacknum,i.setNumber(i.bossHpKey,i.boss_add.hp),i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=i,t.configMap.set(i,n)})},t.getMonsterConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==parseInt(n)&&(t=i)}),t},t.prototype.getAttack=function(e){void 0===e&&(e=o.GameConst.QUALITY.WHITE);var t=this.atk;return e==o.GameConst.QUALITY.GREEN?t*=this.elite_add.atk/1e3:e==o.GameConst.QUALITY.BLUE?t*=this.header_add.atk/1e3:e==o.GameConst.QUALITY.PURPLE?t*=this.Commander_add.atk/1e3:e==o.GameConst.QUALITY.ORANGE&&(t*=this.boss_add.atk/1e3),t=Math.ceil(t)},t.prototype.getHp=function(e){void 0===e&&(e=o.GameConst.QUALITY.WHITE);var t=this.hp;return e==o.GameConst.QUALITY.GREEN?t*=this.elite_add.hp/1e3:e==o.GameConst.QUALITY.BLUE?t*=this.header_add.hp/1e3:e==o.GameConst.QUALITY.PURPLE?t*=this.Commander_add.hp/1e3:e==o.GameConst.QUALITY.ORANGE&&(t*=this.getNumber(this.bossHpKey)/1e3),t=Math.ceil(t)},t.prototype.getDef=function(e){void 0===e&&(e=o.GameConst.QUALITY.WHITE);var t=this.def;return e==o.GameConst.QUALITY.GREEN?t*=this.elite_add.def/1e3:e==o.GameConst.QUALITY.BLUE?t*=this.header_add.def/1e3:e==o.GameConst.QUALITY.PURPLE?t*=this.Commander_add.def/1e3:e==o.GameConst.QUALITY.ORANGE&&(t*=this.boss_add.def/1e3),t=Math.ceil(t)},t.configMap=new Map,t}(e("../../engine/SafeDataModelBase").default);i.MonsterConfig=a,cc._RF.pop()},{"../../engine/SafeDataModelBase":"SafeDataModelBase","./GameConst":"GameConst"}],MonsterHunterConfig:[function(e,t,i){"use strict";cc._RF.push(t,"dc9fbyr4rdNb5Lkh5obJgxP","MonsterHunterConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./JsonConfigBase"),s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boss=[],t.num=[],t.iconId=[],t}var i;return n(t,e),i=t,t.obj2Config=function(e){var t=new i;return t.id=e.id,t.jingjie=e.jingjie,t.boss=e.boss,t.num=e.num,t.ress=e.ress,t.item=e.item,t.iconId=e.iconId,t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getAllList=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.getOneList=function(e){var t=[];return this.configMap.forEach(function(i,n){if(i.jingjie==e)for(var o=0;o<i.boss.length;o++)t.push(i.iconId[o])}),t},t.Config_Name="MonsterHunterConfig",t.configMap=new Map,t=i=o([r],t)}(a.JsonConfigBase));i.default=c,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],MonsterIcon:[function(e,t,i){"use strict";cc._RF.push(t,"13161C8/CBPg6j1XcobmeHy","MonsterIcon");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/ViewBase"),r=e("../config/MonsterConfig"),c=e("../../engine/SpriteFrameComponent"),l=cc._decorator,d=l.ccclass,f=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fanRenList=[],t.lunHuiList=[],t.monsterConfig=null,t}return n(t,e),t.prototype.init=function(e,t,i,n){void 0===n&&(n=!1);var o=this.node.getChildByName("jingjieIcon"),s=this.node.getChildByName("icon"),l=this.node.getChildByName("nameTxt").getComponent(cc.Label);this.node.getChildByName("img_yijinsha").active=n;var d=r.MonsterConfig.getMonsterConfigById(t);a.Logger.log("init===",t,i),0==e.jingjie?o.getComponent(cc.Sprite).spriteFrame=o.getComponent(c.SpriteFrameComponent).spriteFrameList[0]:1==e.jingjie&&(o.getComponent(cc.Sprite).spriteFrame=o.getComponent(c.SpriteFrameComponent).spriteFrameList[1]),s.getComponent(cc.Sprite).spriteFrame=this.fanRenList[e.iconId[i]],l.string=d.name},o([f({type:[cc.SpriteFrame]})],t.prototype,"fanRenList",void 0),o([f({type:[cc.SpriteFrame]})],t.prototype,"lunHuiList",void 0),t=o([d],t)}(s.default);i.default=g,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/ViewBase":"ViewBase","../config/MonsterConfig":"MonsterConfig"}],MonsterManager:[function(e,t,i){"use strict";cc._RF.push(t,"f4a62BgSDZMfouSB2lVDF4L","MonsterManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/MathUtils"),s=e("../../engine/RandomUtil"),r=e("../config/GameConst"),c=e("../config/MapConfig"),l=e("../event/CommonEvent"),d=e("../model/BossModel"),f=e("../model/RoleInfoModel"),g=e("../../engine/DateUtil"),h=e("../../engine/ProtoUtils"),u=e("../../engine/ProtoConfig"),p=e("../prefab/GameManager"),m=e("../network/SocketClient"),C=e("./TianGuanManager"),_=e("../config/WordConfig"),v=function(){function e(){this.isAlive=!1,this.firstRefreshMonsterTime=3e3,this.nextRefreshMonsterTimeCount=0,this.monsterRolePrefabList=[],this.killWhiteMonsterNum=0,this.timeCount=0,this.cacheList=[],this.needCheckClearMonster=!0}return e.prototype.init=function(){n.EventManager.instance.on(l.CommonEvent.Event_SwitchMapSuc,this.switchMapSuc,this),n.EventManager.instance.off(l.CommonEvent.Event_FrameUpdate,this.onFrameUpdate,this),n.EventManager.instance.on(l.CommonEvent.Event_FrameUpdate,this.onFrameUpdate,this)},e.prototype.onFrameUpdate=function(){this.isAlive&&(this.nextRefreshMonsterTimeCount>0&&(g.default.now(),this.nextRefreshMonsterTimeCount),this.timeCount++,this.timeCount>=cc.game.getFrameRate()&&(this.timeCount=0,this.checkDeleteDeadMonster()))},e.prototype.checkDeleteDeadMonster=function(){for(var e=0;e<this.monsterRolePrefabList.length;e++){var t=this.monsterRolePrefabList[e];null!=t&&null!=t.roleInfo&&null!=t.roleInfo.monsterConfig&&(t.isDead||t.getHp()<=0)&&m.default.kill_monster(t.roleInfo.monsterId+"",t.roleInfo.monsterConfig.id,t.roleInfo.quality,p.default.instance.gameView.myRolePrefab)}},e.prototype.switchMapSuc=function(){this.cacheList=[]},e.prototype.enterMap=function(e){this.gameView=e,c.MapConfig.curMapConfig.type==c.MapConfig.MAP_TYPE.City||(this.nextRefreshMonsterTimeCount=this.firstRefreshMonsterTime+g.default.now(),this.isAlive=!0,this.killWhiteMonsterNum=0)},e.prototype.leaveMap=function(){clearTimeout(this.timeId),this.isAlive=!1,this.monsterRolePrefabList=[],this.nowBoss=null,this.hadRandomBoss=!1},e.prototype.isInNeedServerList=function(e,t){for(var i=0;i<e.length;i++){if(e[i].getMonsterid()==t)return!0}return!1},e.prototype.onServerRefresh=function(e){var t=this,i=h.ProtoUtils.DeserializeBinary(u.ProtoConfig.c_refresh_monster,e).getMonsterlistList();if(o.Logger.log("needCheckClearMonster=-======",this.needCheckClearMonster,i,this.monsterRolePrefabList),this.cacheList=this.cacheList.concat(i),this.needCheckClearMonster){this.needCheckClearMonster=!1;for(var n=this.monsterRolePrefabList.length-1;n>=0;n--){var a=this.monsterRolePrefabList[n];a&&a.roleInfo&&!this.isInNeedServerList(i,a.roleInfo.monsterId)&&(this.monsterRolePrefabList.splice(n,1),p.default.instance.gameView.killMonster(a))}this.initMonsterId=setTimeout(function(){t.checkInitMonster()},500)}else this.checkInitMonster()},e.prototype.checkInitMonster=function(){var e=this;if(clearTimeout(this.cacheId),this.gameView&&c.MapConfig.curMapConfig&&c.MapConfig.curMapConfig.type==c.MapConfig.MAP_TYPE.Field){for(var t=this.gameView.getEmptyGridList(),i=0;i<this.cacheList.length;i++)if(t.length>0){var n=this.cacheList[i].getMonstertype(),o=this.cacheList[i].getMonsterid();if(this.canAddMonster(o,n)){2003==n&&_.WordConfig.showWord(60245);var a=this.cacheList[i].getQuality(),r=this.cacheList[i].getIsboss(),l=s.default.nextInt(0,t.length-1),d=t[l];t.splice(l,1),r?this.addBoss(d,o,n):this.randomOneMonster(o,n,a,d)}}this.cacheList=[]}else this.cacheId=setTimeout(function(){e.checkInitMonster()},1e3)},e.prototype.randomMonster=function(){},e.prototype.addBoss=function(e,t,i){this.hadRandomBoss=!0;var n=this.gameView.addMonster(t,i,r.GameConst.QUALITY.ORANGE,e,!0);this.nowBoss=n,this.monsterRolePrefabList.push(n),this.gameView.initBoss()},e.prototype.randomOneMonster=function(e,t,i,n){var o=this.gameView.addMonster(e,t,i,n,!1);this.monsterRolePrefabList.push(o)},e.prototype.getNearlyMonster=function(e){for(var t,i=Number.MAX_VALUE,n=0;n<this.monsterRolePrefabList.length;n++){var o=this.monsterRolePrefabList[n];if(!o.isDead)a.default.distance(e.gridRow,e.gridCol,o.gridRow,o.gridCol)<=i&&(t=o)}return t},e.prototype.getAttackMonsterList=function(e,t,i,n,o){void 0===o&&(o=null);var s=[];if(o&&!o.isDead&&o.node&&!o.isRecycle){var r=Math.abs(o.gridRow-i),c=Math.abs(o.gridCol-n);r<=e&&c<=e&&s.push(o)}this.monsterRolePrefabList.sort(function(e,t){return e.roleInfo&&t.roleInfo?e.roleInfo.quality-t.roleInfo.quality:0}),this.monsterRolePrefabList.reverse();for(var l=0;l<this.monsterRolePrefabList.length;l++){var d=this.monsterRolePrefabList[l];if(!d.isDead){r=Math.abs(d.gridRow-i),c=Math.abs(d.gridCol-n);r<=e&&c<=e&&d!=o&&d.node&&s.push(d)}}return s.sort(function(e,t){return Math.floor(a.default.distance(e.gridRow,e.gridCol,i,n))-Math.floor(a.default.distance(t.gridRow,t.gridCol,i,n))}),s.length>t?s.splice(0,t):s},e.prototype.gotoDead=function(e){for(var t=this.monsterRolePrefabList.length-1;t>=0;t--){var i=this.monsterRolePrefabList[t];if(e.gridRow==i.gridRow&&e.gridCol==i.gridCol){this.monsterRolePrefabList.splice(t,1),e.roleInfo.quality==r.GameConst.QUALITY.WHITE&&this.killWhiteMonsterNum++,e.roleInfo.isBoss&&(this.hadRandomBoss=!1,this.nowBoss=null);break}}1==this.monsterRolePrefabList.length&&this.nowBoss?(this.nextRefreshMonsterTimeCount,g.default.now(),cc.game.getFrameRate()):this.monsterRolePrefabList.length<=0&&(this.nextRefreshMonsterTimeCount,g.default.now(),cc.game.getFrameRate())},e.prototype.canAddMonster=function(e,t){d.BossModel.getBossByMonsterId(t);for(var i=this.monsterRolePrefabList.length-1;i>=0;i--){var n=this.monsterRolePrefabList[i];if(n&&n.roleInfo&&n.roleInfo.monsterId==e)return!1}return!0},e.prototype.onServerKillMonster=function(e){for(var t=this.monsterRolePrefabList.length-1;t>=0;t--){var i=this.monsterRolePrefabList[t];if(i&&i.roleInfo&&i.roleInfo.monsterId==e){i.roleInfo.isBoss&&(this.hadRandomBoss=!1,this.nowBoss=null),this.monsterRolePrefabList.splice(t,1),p.default.instance.gameView.killMonster(i),C.TianGuanManager.instance.killNum++;break}}},e.prototype.refreshBossHp=function(){for(var e=0;e<this.monsterRolePrefabList.length;e++){var t=this.monsterRolePrefabList[e];if(t&&cc.isValid(t)&&t.roleInfo.isBoss){var i=d.BossModel.getBossHp(parseInt(t.roleInfo.monsterConfig.id),f.default.instance.mapId);t.roleInfo.setHp(t.roleInfo.getMaxHp()-i),t.refreshRoleInfo();break}}},e.prototype.destroy=function(){clearTimeout(this.initMonsterId),clearTimeout(this.cacheId),clearTimeout(this.timeId),this.leaveMap(),n.EventManager.instance.clear(this)},e.instance=new e,e}();i.default=v,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/MathUtils":"MathUtils","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/RandomUtil":"RandomUtil","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/BossModel":"BossModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","./TianGuanManager":"TianGuanManager"}],MoreMenuView:[function(e,t,i){"use strict";cc._RF.push(t,"302183AMoVJApOb6We6ubq5","MoreMenuView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ResourcesManager"),l=e("../../engine/ViewBase"),d=e("../config/NewFuncitonConfig"),f=e("../event/CommonEvent"),g=e("../network/HttpHelper"),h=e("../prefab/RedPointPrefab"),u=e("../utils/JumpActionUtils"),p=e("../utils/MenuIconRedPointIdMapping"),m=e("../utils/MusicHelper"),C=cc._decorator,_=C.ccclass,v=C.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menuItem=null,t.iconNodePrefab=null,t.darkLayer=null,t.menuContext=null,t.idMap=new Map,t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.menuContext=this.findChild(this.node,"menuContext"),this.darkLayer=this.node.getChildByName("darkLayer"),this.darkLayer.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation(),e.node.active=!1,s.EventManager.instance.dispatch(f.CommonEvent.Event_menu_close)},this)},t.prototype.onEnable=function(){this.init()},t.prototype.clearMenuContextChild=function(){this.menuContext.removeAllChildren()},t.prototype.init=function(){this.clearMenuContextChild();var e=this;s.EventManager.instance.on("FEATURE_1044",function(e){this.clickAction(1044)}.bind(this),this,!0),d.NewFuncitonConfig.getMenuMap().forEach(function(t,i){if(!t.icon)return r.Logger.error("\u529f\u80fd\u5f00\u542f\u914d\u7f6e \u9519\u8bef","sort:",i,"icon:",t.icon),void g.default.sendBugLog("\u529f\u80fd\u5f00\u542f\u914d\u7f6e \u9519\u8bef sort:"+i+"icon:"+t.icon);if(void 0===e.newMenuItem||5===e.count){var n=e.newMenuItem;e.count=0,e.newMenuItem=cc.instantiate(e.menuItem),e.newMenuItem.active=!0,e.newMenuItem.parent=e.menuContext,void 0===n&&(e.newMenuItem.getChildByName("cuttingLine").active=!1)}e.count+=1;var o=e.newMenuItem.getChildByName("iconLayout"),a=cc.instantiate(e.iconNodePrefab);a.parent=o,a.getChildByName("RedPointPrefab").getComponent(h.default).setRedPointIdList(p.MenuIconRedPointIdMapping.getRedPointIdArrByFunctionId(t.id)),c.default.instance.loadSprite(a.getComponent(cc.Sprite),"icon/"+t.icon),a.active=!0,e.onAddEvent1(a,e.clickAction.bind(e,t.id),!0)}),e.newMenuItem=void 0,e.count=0},t.prototype.clickAction=function(e){this.node.active=!1,u.default.doAction(e)},t.prototype.start=function(){},t.prototype.onAddEvent1=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=n,e.targetOff(e);var o=0;e.on(cc.Node.EventType.TOUCH_START,function(){o=a.default.now()}),e.on(cc.Node.EventType.TOUCH_END,function(n){if(i&&n.stopPropagation(),e.getComponent(cc.Button).enabled){m.MusicHelper.play_click();var s=a.default.now();t(0!=o&&s-o>=400?1:0)}},e)},o([v(cc.Prefab)],t.prototype,"menuItem",void 0),o([v(cc.Prefab)],t.prototype,"iconNodePrefab",void 0),t=o([_],t)}(l.default);i.default=y,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ResourcesManager":"ResourcesManager","../../engine/ViewBase":"ViewBase","../config/NewFuncitonConfig":"NewFuncitonConfig","../event/CommonEvent":"CommonEvent","../network/HttpHelper":"HttpHelper","../prefab/RedPointPrefab":"RedPointPrefab","../utils/JumpActionUtils":"JumpActionUtils","../utils/MenuIconRedPointIdMapping":"MenuIconRedPointIdMapping","../utils/MusicHelper":"MusicHelper"}],MoveEffectPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"d922fyKQZxMdYJDpFx340XC","MoveEffectPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/MathUtils"),r=e("../../engine/ViewBase"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rot=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.playCircle=function(e,t,i,n){this.rot=0,this.centerP=e,this.radius=i,this.toP=t,this.isPlaying=!0,this.callback=n},t.prototype.update=function(){if(this.isPlaying){if(this.rot+=8,this.rot>=180)this.rot=180,this.isPlaying=!1,this.node.setPosition(this.toP),this.callback&&this.callback();else{var e=s.default.degreesToRadians(this.rot);this.node.x=this.centerP.x+this.radius*Math.cos(e),this.node.y=this.centerP.y+this.radius*Math.sin(e)}a.Logger.log("rot=====",this.rot)}},t=o([l],t)}(r.default));i.default=d,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/MathUtils":"MathUtils","../../engine/ViewBase":"ViewBase"}],MsginfoView:[function(e,t,i){"use strict";cc._RF.push(t,"44b9aXOBI1Kq5pe4nSNFAz5","MsginfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/MapConfig"),r=e("../model/RoleInfoModel"),c=e("../config/MonsterConfig"),l=e("../config/ColorConfig"),d=e("../model/MapStatisticsModel"),f=e("../../engine/EventManager"),g=e("../event/CommonEvent"),h=e("../model/ServerTime"),u=e("../config/WordConfig"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.infoType=e},t.prototype.onShow=function(){f.EventManager.instance.on(g.CommonEvent.Event_MapStatistic,this.refreshInfo,this),this.infoNode=this.findChild(this.node,"view/panel/info"),this.mapNode=this.findChild(this.node,"view/panel/map"),this.infoNode.active=!1,this.mapNode.active=!1;var e=this.infoNode.getChildByName("val"),t=this.infoNode.getChildByName("val2");this.val=[],this.val2=[];for(var i=0;i<6;i++)this.val.push(e.getChildByName(""+(i+1)).getComponent(cc.Label)),this.val2.push(t.getChildByName(""+(i+1)).getComponent(cc.Label));0==this.infoType?this.refreshInfo():this.refreshMap()},t.prototype.onHide=function(){},t.prototype.refreshInfo=function(){if(0==this.infoType){this.infoNode.active=!0,this.val[0].string=d.default.instance.exp+"",this.val[1].string=d.default.instance.killWhiteMonsterNum+"",this.val[2].string=d.default.instance.killGreenMonsteNum+"",this.val[3].string=d.default.instance.killBlueMonsterNum+"",this.val[4].string=d.default.instance.killPurpleMonsterNum+"",this.val[5].string=d.default.instance.killBossMonsterNum+"";var e=(h.ServerTime.getServerTime()-d.default.instance.enterMapTime)/1e3,t=Math.floor(d.default.instance.exp/e);this.val2[0].string=t+u.WordConfig.getWord(60455),this.val2[1].string=d.default.instance.equipWhiteNum+"",this.val2[2].string=d.default.instance.equipGreenNum+"",this.val2[3].string=d.default.instance.equipBlueNum+"",this.val2[4].string=d.default.instance.equipPurpleNum+"",this.val2[5].string=d.default.instance.equipYellowNum+""}},t.prototype.refreshMap=function(){if(1==this.infoType){this.mapNode.active=!0;var e=this.findChild(this.mapNode,"prop_1/item"),t=this.findChild(this.mapNode,"prop_2/item"),i=this.findChild(this.mapNode,"defNum"),n=this.findChild(this.mapNode,"staNum");e.active=!1,t.active=!1;var o=s.MapConfig.getMapConfigByMapId(r.default.instance.mapId);if(i.getComponent(cc.Label).string=""+o.t_def,n.getComponent(cc.Label).string=""+o.t_db,parseInt(i.getComponent(cc.Label).string)<=r.default.instance.getDefend()?i.color=l.ColorConfig.GreenColor:i.color=l.ColorConfig.RedColor,parseInt(n.getComponent(cc.Label).string)<=r.default.instance.getGuDingJianShang()?n.color=l.ColorConfig.GreenColor:n.color=l.ColorConfig.RedColor,o.type==s.MapConfig.MAP_TYPE.City)return e.getComponent(cc.Label).string=u.WordConfig.getWord(60456),t.getComponent(cc.Label).string=u.WordConfig.getWord(60456),e.active=!0,void(t.active=!0);for(var a=0;a<o.monsterArray.length;a++){var d=o.monsterArray[a],f=c.MonsterConfig.getMonsterConfigById(d),g=cc.instantiate(e);g.parent=e.parent,g.active=!0,g.getComponent(cc.Label).string=cc.js.formatStr(u.WordConfig.getWord(60457),f.name,f.level)}for(var h=0;h<o.drop_info.length;h++){var p=cc.instantiate(t);p.parent=t.parent,p.active=!0,p.color=l.ColorConfig.hexToColor(o.drop_info[h].color),p.getComponent(cc.Label).string=o.drop_info[h].name}}},t=o([m],t)}(a.default));i.default=C,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/MapStatisticsModel":"MapStatisticsModel","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime"}],MusicConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5db09z4fg9BG5OkY+YuYnUM","MusicConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.musicKey2Path=(new Map).set("bgm","audio/bgm").set("attack","audio/attack").set("click","audio/button").set("dsjn_1","audio/dsjn_1").set("dsjn_3","audio/dsjn_3").set("dsjn_4","audio/dsjn_4").set("dsjn_5","audio/dsjn_5").set("dsjn_7","audio/dsjn_7").set("dsjn_13","audio/dsjn_13").set("fsjn_1","audio/fsjn_1").set("fsjn_6","audio/fsjn_6").set("fsjn_9","audio/fsjn_9").set("fsjn_11","audio/fsjn_11").set("fsjn_13","audio/fsjn_13").set("lvup","audio/lvup").set("zsjn_3","audio/zsjn_3").set("zsjn_4","audio/zsjn_4").set("zsjn_5","audio/zsjn_5").set("zsjn_6","audio/zsjn_6").set("dssw","audio/dssw").set("fssw","audio/fssw").set("zssw","audio/zssw").set("kaimen","audio/kaimen").set("loading_bg","audio/loading_bg").set("role_bg","audio/role_bg"),e.musicKey2Cache=new Map,e}();i.default=n,cc._RF.pop()},{}],MusicHelper:[function(e,t,i){"use strict";cc._RF.push(t,"3b988T/cE5D77+uP9P2f2ct","MusicHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/MusicPrefab"),o=e("../../engine/SoundPrefab"),a=e("../prefab/GameManager"),s=e("../config/GameConst"),r=function(){function e(){}return e.play_bg=function(t){if(void 0===t&&(t=0),this.stop_bg(),e.bg_music_index=t,1==e.bg_music_index&&n.default)return n.default.play("loading_bg"),void e.bg_music_index++;2==e.bg_music_index&&n.default&&(n.default.play("role_bg"),e.bg_music_index++)},e.play_bg_index=function(){this.stop_bg(),1==e.bg_music_index&&n.default?n.default.play("loading_bg"):2==e.bg_music_index&&n.default&&n.default.play("role_bg")},e.play_kaimen=function(){o.default.play("kaimen")},e.roleDead=function(e){e==s.GameConst.OCCUPATION.DAO_SHI?o.default.play("dssw"):e==s.GameConst.OCCUPATION.FA_SHI?o.default.play("fssw"):e==s.GameConst.OCCUPATION.ZHAN_SHI&&o.default.play("zssw")},e.stop_bg=function(t){void 0===t&&(t=!1),t&&(e.bg_music_index=100),n.default&&n.default.stop()},e.play_click=function(){o.default.play("click")},e.play_attack=function(){a.default.instance.isInFightView()&&o.default.play("attack")},e.play_lvup=function(){o.default.play("lvup")},e.play_ZhiLiao=function(){a.default.instance.isInFightView()&&o.default.play("dsjn_1")},e.play_ShiDu=function(){a.default.instance.isInFightView()&&o.default.play("dsjn_3")},e.play_LingHunHuoFu=function(){a.default.instance.isInFightView()&&o.default.play("dsjn_4")},e.play_call=function(){a.default.instance.isInFightView()&&o.default.play("dsjn_5")},e.play_shenshengzhanjia=function(){a.default.instance.isInFightView()&&o.default.play("dsjn_7")},e.play_huoqiushu=function(){a.default.instance.isInFightView()&&o.default.play("fsjn_1")},e.play_leidianshu=function(){a.default.instance.isInFightView()&&o.default.play("fsjn_6")},e.play_huoqiang=function(){a.default.instance.isInFightView()&&o.default.play("fsjn_9")},e.play_mofadun=function(){a.default.instance.isInFightView()&&o.default.play("fsjn_11")},e.play_bingpaoxiao=function(){a.default.instance.isInFightView()&&o.default.play("fsjn_13")},e.play_cishajianshu=function(){a.default.instance.isInFightView()&&o.default.play("zsjn_3")},e.play_banyuewandao=function(){a.default.instance.isInFightView()&&o.default.play("zsjn_4")},e.play_yemanchongzhuang=function(){a.default.instance.isInFightView()&&o.default.play("zsjn_5")},e.play_liehuojianfa=function(){a.default.instance.isInFightView()&&o.default.play("zsjn_6")},e.bg_music_index=0,e}();i.MusicHelper=r,cc._RF.pop()},{"../../engine/MusicPrefab":"MusicPrefab","../../engine/SoundPrefab":"SoundPrefab","../config/GameConst":"GameConst","../prefab/GameManager":"GameManager"}],MusicPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"e947e8HuVhEcbWl8KzX4pnS","MusicPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../game/config/MusicConfig"),s=e("./LocalStorage"),r=e("./Logger"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return n(t,e),i=t,t.play=function(e){var t=this,i=a.default.musicKey2Path.get(e);i?cc.loader.loadRes(i,cc.AudioClip,function(e,i){e?r.Logger.warn(t,"load music error===",e.message):i&&t.instance&&t.instance.node&&(t.instance.node.getComponent(cc.AudioSource).clip=i,t.instance.node.getComponent(cc.AudioSource).volume=t.musicVolumn,t.instance.node.getComponent(cc.AudioSource).play(),t.instance.node.getComponent(cc.AudioSource).loop=!0)}):r.Logger.warn(this,"\u64ad\u653e\u4e0d\u5b58\u5728\u7684music=",e)},t.stop=function(){this.instance&&this.instance.node&&this.instance.node.getComponent(cc.AudioSource)&&this.instance.node.getComponent(cc.AudioSource).stop()},t.changeVolumn=function(e){this.musicVolumn=e,this.instance.node&&(this.instance.node.getComponent(cc.AudioSource).volume=e),s.default.setItem(i.MUSIC_VOLUMN_KEY,this.musicVolumn.toString())},t.preInit=function(e){this.instance=cc.instantiate(e).getComponent(i),this.musicVolumn=parseFloat(s.default.getItem(i.MUSIC_VOLUMN_KEY)),isNaN(this.musicVolumn)&&(this.musicVolumn=1)},t.destory=function(){i.instance&&(i.instance.getComponent(cc.AudioSource).stop(),i.instance.destroy()),i.instance=null},t.MUSIC_VOLUMN_KEY="musicVolumn",t.musicVolumn=.5,t=i=o([l],t)}(cc.Component));i.default=d,cc._RF.pop()},{"../game/config/MusicConfig":"MusicConfig","./LocalStorage":"LocalStorage","./Logger":"Logger"}],MyJsonLoader:[function(e,t,i){"use strict";cc._RF.push(t,"bf9f3K4TE5NwYEx/C/gNcWj","MyJsonLoader");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../event/CommonEvent"),r=e("./ByteArray"),c=function(){function e(){this.tables={},this.myBuff=new r.ByteArray}return e.prototype.getData=function(e){var t=this.tables[e];if(!t)return null;var i=t[0],n=t[1],o=t[2];this.myBuff.position=i;var a=this.myBuff.readStringEx(n-i);return o?JSON.parse(a):a},e.prototype.loadAsync=function(e){return n(this,void 0,void 0,function(){var t=this;return o(this,function(i){return[2,new Promise(function(i,n){a.EventManager.instance.on(s.CommonEvent.Event_LoadJsonConfigOK,function e(){a.EventManager.instance.off(s.CommonEvent.Event_LoadJsonConfigOK,e,this),i(this)},t),t.load(e)})]})})},e.prototype.load=function(e){this.url=e;var t=cc.url.raw(e),i=this.tables,n=this.myBuff;cc.loader.load({url:t,type:"binary"},function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var o,r=window.Zlib;r?o=new r.Inflate(t).decompress():o=t;var c=o.length;n.initData(o.buffer,!0),n.position=c-4;var l=n.readInt();n.position=c-l-4;for(var d=n.readStringEx(l).split("|"),f=0;f<d.length;f++){var g=d[f].split("*");if(g.length>=4){var h=parseInt(g[1]),u=parseInt(g[2]),p=parseInt(g[3]),m=g[0];m=(m=m.replace("config/","")).replace(".json",""),i[m]=[h,u,p]}}a.EventManager.instance.dispatch(s.CommonEvent.Event_LoadJsonConfigOK)})},e}();i.MyJsonLoader=c,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../event/CommonEvent":"CommonEvent","./ByteArray":"ByteArray"}],NameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4c849O9wGlHIo/QWsjXebqf","NameConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../../engine/RandomUtil"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.getRandomUserName=function(){return a.default.randomItem(this.nameList)},t.nameList=[],t}(o.JsonConfigBase);i.NameConfig=s,cc._RF.pop()},{"../../engine/RandomUtil":"RandomUtil","./JsonConfigBase":"JsonConfigBase"}],NameHelper:[function(e,t,i){"use strict";cc._RF.push(t,"15a3diPC/JMvoUQrPsz9X6G","NameHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/HttpUtil"),a=e("../../engine/Logger"),s=e("../config/GameConfig"),r=e("../config/PlayerNameConfig"),c=e("../config/WordConfig"),l=e("../model/RoleInfoModel"),d=e("../model/ServerTime"),f=e("../model/ZoneModel"),g=e("../sdk/SdkHelper"),h=e("../sdk/ZRWXSDKManager"),u=function(){function e(){}return e.getName=function(){var e=r.default.getConfigById(1).givenNames,t=r.default.getConfigById(1).familyNames,i=t[parseInt(""+t.length*Math.random())],n=e.length;return i+e[parseInt(""+n*Math.random())]},e.json2Config=function(t){Object.keys(t).forEach(function(i){e.ScreenwordStr.push(t[i].content)})},e.isScreenwordStr=function(t){for(var i=0;i<e.ScreenwordStr.length;i++)if(t.indexOf(e.ScreenwordStr[i])>-1)return a.Logger.log("NameHelper.ScreenwordStr[i]=",e.ScreenwordStr[i]),!0;return!1},e.isAvailableName=function(e){return!/[~#^$@%&!?%*]/gi.test(e)&&!this.isEmojiCharacter(e)},e.isEmojiCharacter=function(e){for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(55296<=i&&i<=56319){if(e.length>1){var n=1024*(i-55296)+(e.charCodeAt(t+1)-56320)+65536;if(118784<=n&&n<=128895)return!0}}else if(e.length>1){if(8419==e.charCodeAt(t+1))return!0}else{if(8448<=i&&i<=10239)return!0;if(11013<=i&&i<=11015)return!0;if(10548<=i&&i<=10549)return!0;if(12951<=i&&i<=12953)return!0;if(169==i||174==i||12349==i||12336==i||11093==i||11036==i||11035==i||11088==i)return!0}}},e.isSensitiveName=function(e){for(var t=0,i=0;i<this.sensitiveConfig.length;i++){var n=this.sensitiveConfig[i].trim();if(n.length>0){t=0;for(var o=0;o<n.length;o++)-1!=e.indexOf(n[o])&&t++;if(t>=n.length)return a.Logger.warn("compareName==sdfdfd=",t,n,n.length),!0}}return!1},e.hadChinaWord=function(e){a.Logger.log("hadChinaWord==",e);for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(a.Logger.log("hadChinaWord==",t,i,19968,40959),i>=19968&&i<=40959)return!0}return a.Logger.log("hadChinaWord==false",e),!1},e.getNameLabSize=function(e){if(""!=e&&void 0!=e)return e.length>5?12:(e.length,14)},e.sendAddChat=function(t,i,n,o){s.GameConfig.isWechat()&&h.ZRWXSDKManager.QCSDK?h.ZRWXSDKManager.QCSDK.checkMsg(t,function(a,s){0==a?e._sendAddChat(t,i,n,o):c.WordConfig.showWord(61276)}):e._sendAddChat(t,i,n,o)},e._sendAddChat=function(e,t,i,r){var h=l.default.instance,u={server_id:f.ZoneModel.nowZoneInfoModel.server_id,uid:g.default.gameUId,hero_id:h.roleId,hero_name:h.roleName,career_id:h.occupation,career_name:h.getOccupationName(),channel_id:t,content:e,chat_time:n.default.formatDateStr(d.ServerTime.getServerTime())},p=o.default.instance.fotmatGetUrl(s.GameConfig.getAddChatUrl(),u),m=new o.default;m.setMethod(o.default.methodTypeOption.GET),m.requestByForm(p,function(e,t){if(e){a.Logger.log(n);var n=t;0==n.code&&n.data&&""!=n.data.content?i&&i(n.data.content):n.data&&n.data.msg?c.WordConfig.showTip(n.data.msg):c.WordConfig.showWord(61276)}else r&&r()})},e.getPingbizi=function(e,t,i){if(s.GameConfig.isWechat()&&h.ZRWXSDKManager.QCSDK)h.ZRWXSDKManager.QCSDK.checkMsg(e,function(i,n){0==i?t&&t(e):c.WordConfig.showWord(60331)});else{var n=new o.default;n.setMethod(o.default.methodTypeOption.GET),n.requestByForm(s.GameConfig.getPingbiziUrl()+"?kw="+e,function(e,n){if(e){var o=n;0==o.code&&o.data&&0==o.data.data?t&&t(o):c.WordConfig.showWord(60331)}else i&&i()})}},e.sensitiveConfig=[],e.Config_Name="ScreenwordConfig",e.ScreenwordStr=[],e}();i.NameHelper=u,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/HttpUtil":"HttpUtil","../../engine/Logger":"Logger","../config/GameConfig":"GameConfig","../config/PlayerNameConfig":"PlayerNameConfig","../config/WordConfig":"WordConfig","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../model/ZoneModel":"ZoneModel","../sdk/SdkHelper":"SdkHelper","../sdk/ZRWXSDKManager":"ZRWXSDKManager"}],NewFeaturesModel:[function(e,t,i){"use strict";cc._RF.push(t,"88c91BP0zVBNrxwopKpQ45w","NewFeaturesModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/ViewConfig"),o=e("../../engine/ProtoConfig"),a=e("../../engine/ProtoUtils"),s=e("../config/NewFuncitonConfig"),r=e("../../engine/UIManager"),c=e("../utils/UIHelper"),l=e("../../engine/EventManager"),d=e("../config/WordConfig"),f=e("../network/SocketClient"),g=e("../../engine/Logger"),h=e("../event/CommonEvent"),u=e("./ShenGongModel"),p=e("./GuildPvPModel"),m=function(){return function(){}}();i.FunctionData=m;var C=function(){return function(){this.id=null,this.node=null,this.mytarget=null,this.cb=null}}();i.FeaturesNode=C;var _=function(){function e(){}return e.proto2NewFeaturesFuntion=function(t){var i=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_function_open,t),n=i.getOpenid(),s=0==i.getShowid()?n:i.getShowid();e.openList[n]=!0,e.showidList[s]=!0,e.instance.CheckShow(s),e.instance.CheckOpen(n),e.instance.setMoreMenuRedPoint([s]),g.Logger.log("showidList",e.showidList),g.Logger.log("openList",e.openList)},e.proto2NewFeaturesInfoFuntion=function(t){var i=a.ProtoUtils.DeserializeBinary(o.ProtoConfig.c_function_open_info,t),n=i.getOpenfuncList(),s=i.getShowfuncList();e.openList=[],e.showidList=[],n.forEach(function(t){var i=t.getId();e.openList[i]=!0,e.showidList[i]=!0,e.instance.CheckShow(i)});var r=[];s.forEach(function(t){var i=t.getId();r.push(i),e.showidList[i]=!0,e.instance.CheckShow(i)}),e.instance.setMoreMenuRedPoint(r),e.instance.CheckBeAbleToOpen(1031)&&f.default.s_baguatu_info(),e.instance.CheckBeAbleToOpen(1006)&&f.default.s_star_info(),e.instance.CheckBeAbleToOpen(1044)&&u.ShenGongModel.getModelMethod().s_get_superskill_info(),e.instance.CheckBeAbleToOpen(1045)&&p.GuildPvPModel.getInstance().s_guild_status(),g.Logger.log("showidList",e.showidList),g.Logger.log("openList",e.openList)},e.prototype.pushFeaturesNode=function(t,i,o,a){void 0===o&&(o=null),void 0===a&&(a=null);var f=new C;f.id=t,f.node=i,f.mytarget=a,f.cb=o,i.active=!1;var g,h=s.NewFuncitonConfig.getFunctionConfig(t.toString());function u(){e.openList[t]?o&&o():(1==h.open_condition&&r.default.instance.createView(n.default.gameView.toStrongerPanel,null,203),c.UIHelper.showTip(g))}return 1==h.open_condition?g=cc.js.formatStr(d.WordConfig.getWord(61229),h.open_limit):2==h.open_condition?g=cc.js.formatStr(d.WordConfig.getWord(61233),h.open_limit):3==h.open_condition&&(g=d.WordConfig.getWord(61234)),l.EventManager.instance.on("FEATURE_"+t,u,i),e.FNodeList.set(t.toString(),f),e.instance.CheckShow(t),u},e.prototype.setMoreMenuRedPoint=function(t){for(var i=[],n=0,o=t.length;n<o;n++){var a=t[n];if(e.showidList[a])s.NewFuncitonConfig.getFunctionSortById(String(a))&&i.push(a)}l.EventManager.instance.dispatch(h.CommonEvent.Event_addMoreMenuShow,i)},e.prototype.CheckShow=function(t){var i=e.FNodeList.get(t.toString());return e.showidList[t]&&i&&(i.node.active=!0),e.showidList[t]},e.prototype.isShow=function(t){return Boolean(e.showidList[t])},e.prototype.CheckOpen=function(t){var i=s.NewFuncitonConfig.getFunctionConfig(t.toString()),o=e.FNodeList.get(t.toString());i&&1==i.show&&r.default.instance.createView(n.default.gameView.newfeaturesView,null,i,o,t)},e.prototype.CheckBeAbleToOpen=function(t){return e.openList[t]},e.checkFunctionOpen=function(t){var i,n=s.NewFuncitonConfig.getFunctionConfig(t.toString());1==n.open_condition?i=cc.js.formatStr(d.WordConfig.getWord(61229),n.open_limit):2==n.open_condition?i=cc.js.formatStr(d.WordConfig.getWord(61233),n.open_limit):3==n.open_condition&&(i=d.WordConfig.getWord(61234));var o=!1;e.openList[t]&&(o=!0);var a=new m;return a.isOk=o,a.desc=i,a.type=n.open_condition,a},e.openList=[],e.showidList=[],e.FNodeList=new Map,e.instance=new e,e}();i.NewFeaturesModel=_,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/NewFuncitonConfig":"NewFuncitonConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","./GuildPvPModel":"GuildPvPModel","./ShenGongModel":"ShenGongModel"}],NewFeaturesView:[function(e,t,i){"use strict";cc._RF.push(t,"1f34bbHnKJMBrtwGCID2Cx3","NewFeaturesView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ViewBase"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=null,t.feat=null,t.id=null,t}return n(t,e),t.prototype.onInitChild=function(e,t,i){this.config=e,this.feat=t,this.id=i},t.prototype.onShow=function(){var e=this;this.setTopUI();var t=this.node.getChildByName("bg"),i=this.node.getChildByName("tipnode"),n=i.getChildByName("guang"),o=i.getChildByName(this.config.icon);o?(o.active=!0,i.scale=.1,i.runAction(cc.scaleTo(.25,1)),n.runAction(cc.repeatForever(cc.rotateBy(3,360))),setTimeout(function(){t.on(cc.Node.EventType.TOUCH_END,function(t){var i=e.id;i>=1001&&i<=1006?a.EventManager.instance.dispatch("FEATURE_ROLE",t):i>=1007&&i<=1008?a.EventManager.instance.dispatch("FEATURE_WF",t):1031==i?a.EventManager.instance.dispatch("FEATURE_WF",t):1044==i&&a.EventManager.instance.dispatch("FEATURE_WF",t),a.EventManager.instance.dispatch("FEATURE_"+i,t),e.closeView()})},1e3)):this.closeView()},t.prototype.update=function(e){},t=o([c],t)}(s.default));i.default=l,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase"}],NewFuncitonConfig:[function(e,t,i){"use strict";cc._RF.push(t,"83248vsVqRHTJG/0Q22/+dz","NewFuncitonConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../model/NewFeaturesModel");(function(e){e[e.Default=0]="Default",e[e.Jump=1]="Jump"})(i.BtnType||(i.BtnType={}));var s=function(){return function(){this.icon=null,this.id=null}}(),r=function(){return function(){this.id=null,this.open_condition=null,this.name=null,this.show=null,this.show_limit=null,this.show_condition=null,this.open_limit=null,this.icon=null,this.desc=null,this.btnType=null,this.sort=null,this.activity_id=null}}();i.FunctionItem=r;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var t=new r;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(i,n)})},t.getFunctionConfig=function(e){return this.configMap.get(e)},t.getFunctionSortById=function(e){return this.configMap.get(e)?this.configMap.get(e).sort:null},t.getMenuMap=function(){var e=this;return this.configMap.forEach(function(t,i){var n=t.sort;if(n>0&&!e.menuMap.get(n)&&a.NewFeaturesModel.instance.isShow(Number(i))){var o=new s;o.icon=t.icon,o.id=Number(i),e.menuMap.set(n,o)}}),this.menuMap},t.configMap=new Map,t.menuMap=new Map,t}(o.JsonConfigBase);i.NewFuncitonConfig=c,cc._RF.pop()},{"../model/NewFeaturesModel":"NewFeaturesModel","./JsonConfigBase":"JsonConfigBase"}],NewGuideView:[function(e,t,i){"use strict";cc._RF.push(t,"226abAYuNVEXbkEFxqiKFtK","NewGuideView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/GuideModel"),r=e("../../engine/EventManager"),c=e("../../engine/Logger"),l=e("../sdk/STUtils"),d=e("../sdk/LoongCheerManager"),f=e("../config/GameConfig"),g=e("../../engine/GameSocket"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=null,t.config=null,t.inputEvents=null,t.mask=null,t.next=null,t.guidenode=null,t.childnode=null,t.icon_node=null,t.dttime=0,t.checknum=0,t.stop=!1,t.uptime=0,t}return n(t,e),t.prototype.onInitChild=function(e,t){this.config=e,this.id=t},t.prototype.onShow=function(){c.Logger.log("guide show ",this.id,this.config),this.checknum=0,this.guidenode=this.node.getChildByName("guidenode"),this.inputEvents=this.guidenode.getChildByName("inputEvents"),this.mask=this.guidenode.getChildByName("mask"),this.next=this.guidenode.getChildByName("next"),this.next.on(cc.Node.EventType.TOUCH_END,this.onClickNext,this),r.EventManager.instance.on("GUIDE_CLOSE",this.checkCloseView,this),this.setTopUI(),this.node.zIndex=10,this.refreshUI()},t.prototype.refreshUI=function(){var e=this;if(this.config&&this.node){this.dttime=0,this.stop=!1,this.childnode=null;var t=this.config;this.inputEvents.active=!0,this.mask.active=1==t.shade,2==t.type?this.inputEvents.on(cc.Node.EventType.TOUCH_END,this.closeInputEvents,this):this.inputEvents.off(cc.Node.EventType.TOUCH_END,this.closeInputEvents,this);var i=this.guidenode.getChildByName("panel_2");this.guidenode.getChildByName("icon_1").active=5!=t.arrows_type,this.guidenode.getChildByName("icon_2").active=5==t.arrows_type;var n=void 0;Number(t.arrows_type)<5?(n=this.guidenode.getChildByName("icon_1"),2==t.arrows_type?n.angle=180:1==t.arrows_type?n.angle=0:4==t.arrows_type?n.angle=-90:3==t.arrows_type&&(n.angle=90)):n=this.guidenode.getChildByName("icon_2"),this.icon_node=n,this.guidenode.getChildByName("panel_1").active=!1;var o=this.guidenode.getChildByName("panel_2");if(t.main&&t.controls){var a="act_newbie_guide_"+t.id;l.default.stStatistics(d.StatisticsType.afEvent,a),l.default.stStatistics(d.StatisticsType.firebaseEvent,a),this.updataIconNode()}o.active=!0,i.getChildByName("content").getComponent(cc.Label).string=t.desc,this.node.getChildByName("newgame").active="10101"==this.id,"10101"==this.id&&(this.guidenode.active=!1,this.node.getChildByName("newgame").on(cc.Node.EventType.TOUCH_END,function(){e.guidenode.active=!0,e.node.getChildByName("newgame").active=!1}))}else this.node&&this.closeView()},t.prototype.update=function(e){this.stop&&(this.dttime+=e,this.childnode&&this.childnode.active?this.dttime>3&&this.closeView():(this.stop=!1,this.closeView())),this.uptime>.1?(this.uptime=0,this.updataPosition()):this.uptime+=e},t.prototype.updataIconNode=function(){var e=this;if(this.icon_node){var t=this.findChild(this.node.parent.parent,this.config.main,!1),i=null;if(t&&(i=this.findChild(t,this.config.controls,!1)),i){if(this.guidenode.getChildByName("icon_1").stopAllActions(),this.guidenode.getChildByName("icon_2").stopAllActions(),this.config.arrows_type<5){var n=3==this.config.arrows_type?-30:4==this.config.arrows_type?30:0,o=2==this.config.arrows_type?-30:1==this.config.arrows_type?30:0;this.icon_node.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,n,o),cc.moveBy(.5,-n,-o))))}else this.icon_node.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,0,-30),cc.moveBy(.5,0,30))));this.updataPosition()}else c.Logger.log("\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u8282\u70b9"),this.checknum++<10?setTimeout(function(){e.refreshUI()},100):this.closeView()}},t.prototype.updataPosition=function(){var e=this.findChild(this.node.parent.parent,this.config.main,!1),t=null;if(e&&(t=this.findChild(e,this.config.controls,!1)),t){var i=this.guidenode.getChildByName("panel_2"),n=this.icon_node.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position));if(this.icon_position&&this.icon_position.x==n.x&&this.icon_position.y==n.y)return;this.icon_position=n,this.icon_node.position=n,i.position=i.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),this.config.arrows_type<5?1==this.config.arrows_type?i.y+=150:2==this.config.arrows_type?i.y-=150:3==this.config.arrows_type?i.x-=180:4==this.config.arrows_type&&(i.x+=180):i.y-=150,this.mask.position=this.mask.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),this.next.position=this.next.parent.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),this.childnode=t}},t.prototype.onClickNext=function(e){var t=this;if(f.GameConfig.connectServer&&g.default.getInstance().isLogin){if(this.childnode)if(10902==this.config.id||10903==this.config.id||10904==this.config.id||10905==this.config.id){var i=this.findChild(this.node.parent.parent,this.config.main,!1),n=this.findChild(i,this.config.controls,!1);if(n){var o=new cc.Event("click",!0);n.dispatchEvent(o)}}else this.childnode.dispatchEvent(e);r.EventManager.instance.dispatch("GUIDE_"+this.id),this.next.off(cc.Node.EventType.TOUCH_END,this.onClickNext,this),setTimeout(function(){t.closeView()},200)}},t.prototype.closeView=function(){this.guidenode&&(this.guidenode.getChildByName("icon_1").active=!1,this.guidenode.getChildByName("icon_2").active=!1,this.guidenode.getChildByName("panel_1").active=!1,this.guidenode.getChildByName("panel_2").active=!1),e.prototype.closeView.call(this),s.GuideModel.s_guide_trigger(Number(this.id)),s.GuideModel.s_guide_info(),s.GuideModel.instance.NextGuide()},t.prototype.checkCloseView=function(){this.stop&&this.closeView()},t.prototype.closeInputEvents=function(e){0!=this.config.arrows_type?(this.inputEvents.active=!1,this.guidenode.getChildByName("panel_1").active=!1,this.guidenode.getChildByName("panel_2").active=!1,this.mask.active=!1,this.stop=!0,s.GuideModel.instance.CancelGuide()):this.onClickNext(e)},t=o([u],t)}(a.default));i.default=p,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/GameConfig":"GameConfig","../model/GuideModel":"GuideModel","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/STUtils":"STUtils"}],NewYearGiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"51188QelZFNb5I7JdOt1+YP","NewYearGiftConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.day=e.day,i.item=e.item,i.ress=e.ress,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.json2Config2=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap2.set(n.id,n)})},t.getAllList=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.getAllList2=function(){var e=[];return this.configMap2.forEach(function(t,i){e.push(t)}),e},t.Config_Name="loginGiftConfig",t.Config_Name2="hefu_GiftConfig",t.configMap=new Map,t.configMap2=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],NewYearGiftModel:[function(e,t,i){"use strict";cc._RF.push(t,"f99f5bnllxEQ7JTinO34QpS","NewYearGiftModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../event/CommonEvent"),c=e("../manager/RedPointManager"),l=function(){return function(){}}();i.TYearGift=l;var d=function(){function e(){this.eventIdList=[],this.protos=[],this.ActivityId=10,this.modelList=[],this.ActivityId2=33,this.modelList2=[],this.eventIdList=[c.RedPointId.Activity_newYearGif,c.RedPointId.Activity_newYearGif2],this.protos=[a.ProtoConfig.c_get_activity_login_info,a.ProtoConfig.c_activity_login_receive],c.default.getInstance().addHandler(this)}return e.proto2Model=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_activity_login_info,t),c=i.getActivityId(),d=i.getAwardsList();if(c==e.instance.ActivityId){e.instance.actStaus=i.getRet(),e.instance.modelList=[];for(var f=0;f<d.length;f++){(g=new l).index=d[f].getIndex(),g.state=d[f].getState(),e.instance.modelList[f]=g}}else if(c==e.instance.ActivityId2){e.instance.actStaus2=i.getRet(),e.instance.modelList2=[];for(f=0;f<d.length;f++){var g;(g=new l).index=d[f].getIndex(),g.state=d[f].getState(),e.instance.modelList2[f]=g}}o.Logger.log("NewYearGiftModel=",i),n.EventManager.instance.dispatch(r.CommonEvent.Event_NewYearGift)},e.getModelById=function(t,i){if(i==e.instance.ActivityId)for(var n=0;n<e.instance.modelList.length;n++){if((o=e.instance.modelList[n]).index==t)return o}else if(i==e.instance.ActivityId2)for(n=0;n<e.instance.modelList2.length;n++){var o;if((o=e.instance.modelList2[n]).index==t)return o}},e.prototype.checkRedPoint=function(){var t,i,n=[];e.instance.modelList.every(function(e){return 1!=e.state||(t=!0,!1)}),e.instance.modelList2.every(function(e){return 1!=e.state||(i=!0,!1)});var o={id:c.RedPointId.Activity_newYearGif,type:c.RedPointType.Default,show:t};n.push(o);var a={id:c.RedPointId.Activity_newYearGif2,type:c.RedPointType.Default,show:i};return n.push(a),n},e.instance=new e,e}();i.NewYearGiftModel=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],NewYearGiftView2:[function(e,t,i){"use strict";cc._RF.push(t,"420d7ishHlMd70Z1CaFpz2X","NewYearGiftView2");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ViewBase"),c=e("../../config/GameConst"),l=e("../../config/ITemsConfig"),d=e("../../config/NewYearGiftConfig"),f=e("../../event/CommonEvent"),g=e("../../model/ActivityOpenModel"),h=e("../../model/ItemInfoModel"),u=e("../../model/NewYearGiftModel"),p=e("../../network/SocketClient"),m=e("../ItemPrefab"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t.giftItemList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.tempItem=this.getChild(this.node,"fundPanel/scrollView/view/content/tempItem"),this.tempItem.active=!1,this.continueTime=this.getChild(this.node,"fundPanel/continueTime",cc.Label)},t.prototype.onEnable=function(){s.EventManager.instance.on(f.CommonEvent.Event_NewYearGift,this.refresh,this),p.default.s_get_activity_login_info(u.NewYearGiftModel.instance.ActivityId2),this.refresh()},t.prototype.refresh=function(){for(var e=0;e<this.giftItemList.length;e++)if(this.giftItemList[e])for(var t=0;t<this.giftItemList[e].length;t++)this.giftItemList[e][t].active=!1;if(g.default.getOpenActivityModel(u.NewYearGiftModel.instance.ActivityId2)){var i=g.default.getStarTimeByActivityId(u.NewYearGiftModel.instance.ActivityId2),n=g.default.getEndTimeByActivityId(u.NewYearGiftModel.instance.ActivityId2);this.continueTime.string=a.default.formatDateStr7(1e3*i)+"-"+a.default.formatDateStr7(1e3*n)}else this.continueTime.string="";var o=d.default.getAllList2(),s=function(e){var t=o[e],i=void 0;r.itemList[e]?i=r.itemList[e]:((i=cc.instantiate(r.tempItem)).parent=r.tempItem.parent,r.itemList[e]=i),r.giftItemList[e]||(r.giftItemList[e]=[]),i.active=!0;var n=i.getChildByName("hadGetNode");n.active=!1;var a=i.getChildByName("btnGetGift");a.active=!1;var s=i.getChildByName("img_weidacheng");s.active=!0;var d=i.getChildByName("img_tian_bg").getChildByName("dayNum").getComponent(cc.Label);d.string=e+1<10?(e+1).toString():e+1==10?"0":"0"+(e+1)%10;var f=i.getChildByName("panel_bg").getChildByName("ItemPrefab");f.active=!1;var g=void 0,C=0;for(var _ in t.item){r.giftItemList[e][C]?g=r.giftItemList[e][C]:((g=cc.instantiate(f)).parent=f.parent,r.giftItemList[e][C]=g),C++,g.active=!0;var v=l.ITemsConfig.getITemsConfigById(_),y=h.default.create(c.GameConst.ITEM_KIND.ITEM,v.id,t.item[_],v.quality);g.getComponent(m.default).init(y,!0)}for(var _ in t.ress)r.giftItemList[e][C]?g=r.giftItemList[e][C]:((g=cc.instantiate(f)).parent=f.parent,r.giftItemList[e][C]=g),C++,g.active=!0,g.getComponent(m.default).initResource(parseInt(_),t.ress[_]);var b=u.NewYearGiftModel.getModelById(o[e].day,u.NewYearGiftModel.instance.ActivityId2);b&&(s.active=!1,n.active=!1,a.active=!1,2==b.state?n.active=!0:1==b.state?(a.active=!0,r.onAddEvent(a,function(){p.default.s_activity_login_receive(o[e].day,u.NewYearGiftModel.instance.ActivityId2)})):s.active=!0)},r=this;for(e=0;e<o.length;e++)s(e)},t=o([_],t)}(r.default));i.default=v,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/NewYearGiftConfig":"NewYearGiftConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/NewYearGiftModel":"NewYearGiftModel","../../network/SocketClient":"SocketClient","../ItemPrefab":"ItemPrefab"}],NewYearGiftView:[function(e,t,i){"use strict";cc._RF.push(t,"2bbb3IYnzdDG6SyxPYskBlC","NewYearGiftView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ViewBase"),c=e("../../config/GameConst"),l=e("../../config/ITemsConfig"),d=e("../../config/NewYearGiftConfig"),f=e("../../event/CommonEvent"),g=e("../../model/ActivityOpenModel"),h=e("../../model/ItemInfoModel"),u=e("../../model/NewYearGiftModel"),p=e("../../network/SocketClient"),m=e("../ItemPrefab"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t.giftItemList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.tempItem=this.getChild(this.node,"fundPanel/scrollView/view/content/tempItem"),this.tempItem.active=!1,this.continueTime=this.getChild(this.node,"fundPanel/continueTime",cc.Label)},t.prototype.onEnable=function(){s.EventManager.instance.on(f.CommonEvent.Event_NewYearGift,this.refresh,this),p.default.s_get_activity_login_info(u.NewYearGiftModel.instance.ActivityId),this.refresh()},t.prototype.refresh=function(){for(var e=0;e<this.giftItemList.length;e++)if(this.giftItemList[e])for(var t=0;t<this.giftItemList[e].length;t++)this.giftItemList[e][t].active=!1;if(g.default.getOpenActivityModel(u.NewYearGiftModel.instance.ActivityId)){var i=g.default.getStarTimeByActivityId(u.NewYearGiftModel.instance.ActivityId),n=g.default.getEndTimeByActivityId(u.NewYearGiftModel.instance.ActivityId);this.continueTime.string=a.default.formatDateStr7(1e3*i)+"-"+a.default.formatDateStr7(1e3*n)}else this.continueTime.string="";var o=d.default.getAllList(),s=function(e){var t=o[e],i=void 0;r.itemList[e]?i=r.itemList[e]:((i=cc.instantiate(r.tempItem)).parent=r.tempItem.parent,r.itemList[e]=i),r.giftItemList[e]||(r.giftItemList[e]=[]),i.active=!0;var n=i.getChildByName("hadGetNode");n.active=!1;var a=i.getChildByName("btnGetGift");a.active=!1;var s=i.getChildByName("img_weidacheng");s.active=!0,i.getChildByName("img_tian_bg").getChildByName("dayNum").getComponent(cc.Label).string=e+1+"";var d=i.getChildByName("panel_bg").getChildByName("ItemPrefab");d.active=!1;var f=void 0,g=0;for(var C in t.item){r.giftItemList[e][g]?f=r.giftItemList[e][g]:((f=cc.instantiate(d)).parent=d.parent,r.giftItemList[e][g]=f),g++,f.active=!0;var _=l.ITemsConfig.getITemsConfigById(C),v=h.default.create(c.GameConst.ITEM_KIND.ITEM,_.id,t.item[C],_.quality);f.getComponent(m.default).init(v,!0)}for(var C in t.ress)r.giftItemList[e][g]?f=r.giftItemList[e][g]:((f=cc.instantiate(d)).parent=d.parent,r.giftItemList[e][g]=f),g++,f.active=!0,f.getComponent(m.default).initResource(parseInt(C),t.ress[C]);var y=u.NewYearGiftModel.getModelById(o[e].day,u.NewYearGiftModel.instance.ActivityId);y&&(s.active=!1,n.active=!1,a.active=!1,2==y.state?n.active=!0:1==y.state?(a.active=!0,r.onAddEvent(a,function(){p.default.s_activity_login_receive(o[e].day,u.NewYearGiftModel.instance.ActivityId)})):s.active=!0)},r=this;for(e=0;e<o.length;e++)s(e)},t=o([_],t)}(r.default));i.default=v,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/NewYearGiftConfig":"NewYearGiftConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/NewYearGiftModel":"NewYearGiftModel","../../network/SocketClient":"SocketClient","../ItemPrefab":"ItemPrefab"}],NewYearTargetModel:[function(e,t,i){"use strict";cc._RF.push(t,"ba051eOPjhJdIvq3S7MhRty","NewYearTargetModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../engine/EventManager"),o=e("../../../engine/Logger"),a=e("../../../engine/ProtoConfig"),s=e("../../../engine/ProtoUtils"),r=e("../../event/CommonEvent"),c=e("../../manager/RedPointManager"),l=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[c.RedPointId.choujianMubiao],this.protos=[a.ProtoConfig.c_carnival_target_info],c.default.getInstance().addHandler(this)}return e.proto2Model=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_carnival_target_info,t);this.times=i.getTimes(),this.modelList=[];for(var c=i.getRewardList(),l=0;l<c.length;l++){var d=new e;d.index=c[l].getIndex(),d.state=c[l].getState(),this.modelList[l]=d}o.Logger.log("NewYearTargetModel=",i),n.EventManager.instance.dispatch(r.CommonEvent.Event_NewYearTarget)},e.getModelById=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i.index==e)return i}},e.prototype.checkRedPoint=function(){var t,i=new Array;e.modelList.forEach(function(e){1==e.state&&(t=!0);var n={id:e.index,type:c.RedPointType.Default,show:1==e.state};return i.push(n),!0});var n={id:c.RedPointId.choujianMubiao,type:c.RedPointType.Default,show:t};return i.push(n),i},e.ActivityId=9,e.times=0,e.modelList=[],e}();i.NewYearTargetModel=l,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager"}],NewYearTargetPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"1169fMTjfZIPYgz243Qk4iw","NewYearTargetPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ViewBase"),c=e("../../config/CarvinalRewardConfig"),l=e("../../config/ColorConfig"),d=e("../../config/GameConst"),f=e("../../config/ITemsConfig"),g=e("../../config/WordConfig"),h=e("../../event/CommonEvent"),u=e("../../model/ActivityOpenModel"),p=e("../../model/ItemInfoModel"),m=e("../../model/newyear/NewYearTargetModel"),C=e("../../network/SocketClient"),_=e("../ItemPrefab"),v=e("../RedPointPrefab"),y=cc._decorator,b=y.ccclass,I=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t.giftItemList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.tempItem=this.getChild(this.node,"fundPanel/img_ui_shuangdan_kuang/scrollView/view/content/tempItem"),this.tempItem.active=!1,this.continueTime=this.getChild(this.node,"fundPanel/continueTime",cc.Label)},t.prototype.onEnable=function(){s.EventManager.instance.on(h.CommonEvent.Event_NewYearTarget,this.refresh,this),C.default.s_carnival_target_info(),this.refresh()},t.prototype.refresh=function(){for(var e=0;e<this.giftItemList.length;e++)if(this.giftItemList[e])for(var t=0;t<this.giftItemList[e].length;t++)this.giftItemList[e][t].active=!1;if(u.default.getOpenActivityModel(m.NewYearTargetModel.ActivityId)){var i=u.default.getStarTimeByActivityId(9),n=u.default.getEndTimeByActivityId(9);this.continueTime.string=a.default.formatDateStr7(1e3*i)+"-"+a.default.formatDateStr7(1e3*n)}else this.continueTime.string="";var o=c.default.getAllList(),r=function(e){var t=o[e],i=void 0;y.itemList[e]?i=y.itemList[e]:(i=cc.instantiate(y.tempItem),y.findChild(i,"btnGetGift/RedPointPrefab").getComponent(v.default).setRedPointIdList([o[e].id]),i.parent=y.tempItem.parent,y.itemList[e]=i),y.giftItemList[e]||(y.giftItemList[e]=[]),i.active=!0,i.getChildByName("txtTarget").getComponent(cc.RichText).string=cc.js.formatStr(g.WordConfig.getWord(61235),o[e].goal);var n=i.getChildByName("jinduNum").getComponent(cc.RichText);n.string=m.NewYearTargetModel.times+"/"+o[e].goal,n.node.color=l.ColorConfig.GreenColor,m.NewYearTargetModel.times<o[e].goal&&(n.node.color=l.ColorConfig.RedColor);var a=i.getChildByName("hadGetNode");a.active=!1;var r=i.getChildByName("btnGetGift");r.active=!1;var c=i.getChildByName("btnGo");c.active=!0,y.onAddEvent(c,function(){s.EventManager.instance.dispatch(h.CommonEvent.Event_ActivitySwithAct,7)});var u=i.getChildByName("panel_bg").getChildByName("ItemPrefab");u.active=!1;var b=void 0,I=0;for(var M in t.items){y.giftItemList[e][I]?b=y.giftItemList[e][I]:((b=cc.instantiate(u)).parent=u.parent,y.giftItemList[e][I]=b),I++,b.active=!0;var w=f.ITemsConfig.getITemsConfigById(M),k=p.default.create(d.GameConst.ITEM_KIND.ITEM,w.id,t.items[M],w.quality);b.getComponent(_.default).init(k,!0)}for(var M in t.ress)y.giftItemList[e][I]?b=y.giftItemList[e][I]:((b=cc.instantiate(u)).parent=u.parent,y.giftItemList[e][I]=b),I++,b.active=!0,b.getComponent(_.default).initResource(parseInt(M),t.ress[M]);var S=m.NewYearTargetModel.getModelById(o[e].id);S&&(2==S.state?(a.active=!0,c.active=!1):1==S.state&&(r.active=!0,c.active=!1,y.onAddEvent(r,function(){C.default.s_carnival_target_reward(o[e].id)})))},y=this;for(e=0;e<o.length;e++)r(e)},t=o([b],t)}(r.default));i.default=I,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/CarvinalRewardConfig":"CarvinalRewardConfig","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/newyear/NewYearTargetModel":"NewYearTargetModel","../../network/SocketClient":"SocketClient","../ItemPrefab":"ItemPrefab","../RedPointPrefab":"RedPointPrefab"}],NextUltimateGiftWindow:[function(e,t,i){"use strict";cc._RF.push(t,"fd0fbBbKTZEtJC2/MCKZVyb","NextUltimateGiftWindow");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/CarnivalInfoModel"),r=e("../network/SocketClient"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){this.setTopUI()},t.prototype.onShow=function(){this.onAddEvent(this.findChild(this.node,"panel/btn_close"),this.closeView.bind(this)),this.onAddEvent(this.findChild(this.node,"panel/btn_quxiao"),this.closeView.bind(this)),this.onAddEvent(this.findChild(this.node,"panel/btn_queding"),this.onClickSure.bind(this))},t.prototype.onClickSure=function(){s.default.canNext&&r.default.s_fresh_carnival(),this.closeView()},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../model/CarnivalInfoModel":"CarnivalInfoModel","../network/SocketClient":"SocketClient"}],NoBossPrivilegeView:[function(e,t,i){"use strict";cc._RF.push(t,"dc8251zbAFPOaB6qIUttcHl","NoBossPrivilegeView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/UIManager"),r=e("../config/ViewConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){s.default.instance.setTopUI(r.default.gameView.NoBossPrivilege),this.onAddEvent(this.findChild(this.node,"view/panel/btnGo"),this.onClickGo.bind(this))},t.prototype.onHide=function(){},t.prototype.onClickGo=function(){this.closeView(),s.default.instance.createView(r.default.gameView.topUp)},t.prototype.onClickClose=function(){this.closeView()},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ViewConfig":"ViewConfig"}],NodeEx:[function(e,t,i){"use strict";cc._RF.push(t,"208218C/XFDZJ0iCYjVALrX","NodeEx");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(cc.Node);i.NodeEx=o,cc._RF.pop()},{}],NodePoolManager:[function(e,t,i){"use strict";cc._RF.push(t,"78d56GrIX1GNKneL4J8fvOs","NodePoolManager");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/ComponentBase"),a=e("../../engine/ResourcesManager"),s=cc._decorator,r=s.ccclass,c=(s.property,function(){function e(){this.nodePools={},cc.log("created NodePoolManager")}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),e.prototype.update=function(e){},e.prototype.invokeReuse=function(e){var t=e.getComponents(o.default);if(t&&t.length>0)for(var i=0,n=t;i<n.length;i++){n[i].onReuse()}},e.prototype.invokeUnuse=function(e){var t=e.getComponents(o.default);if(t.length>0)for(var i=0,n=t;i<n.length;i++){n[i].onUnuse()}},e.prototype.get=function(e,t){if(e){var i=null,n=this.nodePools[t||e];if(n){var o=n.length-1;return o<0?null:(i=n[o],n.length=o,i&&cc.isValid(i,!0)?(this.invokeReuse(i),i):(console.log("obj is destroyd"),null))}}return null},e.prototype.put=function(e,t){if(e&&cc.isValid(e,!0)){var i=this.nodePools[t||e.name];i||(i=this.nodePools[t||e.name]=[]),-1===i.indexOf(e)&&(i.push(e),e.removeFromParent(!1),this.invokeUnuse(e))}},e.prototype.getNodeCount=function(e){var t=this.nodePools[e];return t?t.length:0},e.prototype.obtain=function(e,t,i){var n=this.get(e,i);n?t&&t(n):a.default.instance.instantiateBy(e,t)},e.prototype.preloadBy=function(e,t,i,n){var o=this;void 0===t&&(t=1);for(var s=function(t){a.default.instance.instantiateBy(e,function(e){o.put(e,n),i&&i(e,t)})},r=0;r<t;r++)s(r)},e.prototype.preload=function(e,t,i){void 0===t&&(t=1);for(var n=0;n<t;n++)this.put(cc.instantiate(e),i)},e.prototype.clear=function(e){if(e){if(n=this.nodePools[e]){for(var t=n.length-1;t>=0;t--){n[t].destroy()}this.nodePools[e].length=0}}else{for(var i in this.nodePools){var n;for(t=(n=this.nodePools[i]).length-1;t>=0;t--){n[t].destroy()}this.nodePools[i].length=0}this.nodePools={}}},e.prototype.instantiateRolePrefab=function(){var e=this.get("RolePerfab");return e||(e=cc.instantiate(this.rolePrefab)),e},e.prototype.instantiateRoleSkillEffectPrefab=function(){var e=this.get("RoleSkillEffectPrefab");return e||(e=cc.instantiate(this.RoleSkillEffectPrefab)),e},e.prototype.instantiateRoleSkillEffectPrefabEx=function(){var e=this.get("RoleSkillEffectPrefabEx");return e||(e=cc.instantiate(this.RoleSkillEffectPrefabEx)),e},e._instance=new t,e=t=n([r],e)}());i.default=c,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/ResourcesManager":"ResourcesManager"}],NodeSync:[function(e,t,i){"use strict";cc._RF.push(t,"17deci2kkBDor+RQuHwSqmK","NodeSync");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./SyncHelper"),s=cc._decorator,r=s.ccclass,c=s.property,l=(s.executionOrder,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.syncMode=a.SyncType.Position,t.syncNode=null,t}return n(t,e),t.prototype.update=function(e){a.SyncHelper.syncFun[this.syncMode].call(this,this.node,this.syncNode)},o([c({type:cc.Enum(a.SyncType),tooltip:"\u540c\u6b65\u7684\u7c7b\u578b"})],t.prototype,"syncMode",void 0),o([c({type:cc.Node,tooltip:"\u9700\u8981\u540c\u6b65\u7684\u8282\u70b9"})],t.prototype,"syncNode",void 0),t=o([r],t)}(cc.Component));i.NodeSync=l,cc._RF.pop()},{"./SyncHelper":"SyncHelper"}],NotifyModel:[function(e,t,i){"use strict";cc._RF.push(t,"fc92aLTi8FGT59GMWpWHcO6","NotifyModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.NotifyModel=n,cc._RF.pop()},{}],NotityView:[function(e,t,i){"use strict";cc._RF.push(t,"f83ffl3xR9BNodXPkQr5n5O","NotityView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/NotifyModel"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){this.lblContent=this.getChild(this.node,"view/panel/content",cc.Label),this.btnBack=this.findChild(this.node,"view/panel/back"),this.btnClose=this.findChild(this.node,"view/panel/title/btnClose"),this.onAddEvent(this.btnClose,this.onBack.bind(this)),this.onAddEvent(this.btnBack,this.onBack.bind(this)),this.lblContent.string=s.NotifyModel.content},t.prototype.onBack=function(){this.closeView()},t.prototype.onHide=function(){},t=o([c],t)}(a.default));i.default=l,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../model/NotifyModel":"NotifyModel"}],OfflineGiftView:[function(e,t,i){"use strict";cc._RF.push(t,"ddef2YK6AJF65/AZZd2MJnI","OfflineGiftView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/ProtoConfig"),c=e("../../engine/ProtoUtils"),l=e("../../engine/UIManager"),d=e("../../engine/ViewBase"),f=e("../config/GameConfig"),g=e("../config/GoldsConfig"),h=e("../config/ViewConfig"),u=e("../config/WordConfig"),p=e("../event/CommonEvent"),m=e("../miniGameTools/tttool"),C=e("../model/PrivilegeModel"),_=e("../model/RoleInfoModel"),v=e("../network/SocketClient"),y=e("../sdk/LoongCheerManager"),b=e("../sdk/SdkHandler"),I=e("../sdk/SdkHelper"),M=e("../sdk/SdkManager"),w=e("../utils/UIHelper"),k=cc._decorator,S=k.ccclass,P=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxUseGold=100,t.totalTimeConfig=[4,12],t.hadGet=!1,t}return n(t,e),t.prototype.onShow=function(){s.EventManager.instance.on(p.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),l.default.instance.setTopUI(h.default.gameView.OfflineGiftView),s.EventManager.instance.on(p.CommonEvent.Event_ad_end,this.onAdEnd,this),this.btnFree=this.findChild(this.node,"btnNode/btnFree"),this.btnMoney=this.findChild(this.node,"btnNode/btnMoney"),this.btnAd=this.findChild(this.node,"btnNode/btnAd"),this.txtExp=this.node.getChildByName("txtExp").getComponent(cc.Label),this.txtOfflineTime=this.node.getChildByName("txtOfflineTime").getComponent(cc.Label),this.txtTotalOffline=this.node.getChildByName("txtTotalOffline").getComponent(cc.Label),this.txtCoin=this.node.getChildByName("txtCoin").getComponent(cc.Label),this.txtCream=this.node.getChildByName("txtCream").getComponent(cc.Label),this.txtNeedGold=this.btnMoney.getChildByName("txtNeedGold").getComponent(cc.Label),this.onAddEvent(this.btnFree,this.onClickFree.bind(this)),this.onAddEvent(this.btnMoney,this.onClickMoney.bind(this)),this.onAddEvent(this.btnAd,this.onClickAd.bind(this)),this.refresh(),f.GameConfig.isOpenAd?this.btnAd.active=!0:this.btnAd.active=!1,f.GameConfig.isWechat()&&(this.btnAd.active=!1)},t.prototype.refresh=function(){this.txtNeedGold.string=_.default.instance.off_line_need_gold+"",this.txtOfflineTime.string=a.default.formatLeftTime3(1e3*_.default.instance.last_off_line_time);var e=_.default.instance.off_line_exp;this.txtExp.string=w.UIHelper.tranNumber(e)+"",this.exp=e;g.GoldsConfig.getConfigById(_.default.instance.level);var t=_.default.instance.off_line_coin;this.coin=t;var i=_.default.instance.off_line_cream;(this.cream=i,this.txtCoin.string=w.UIHelper.tranNumber(t)+"",this.txtCream.string=w.UIHelper.tranNumber(i)+"",C.default.hadRecoveryPrivilege()?this.txtTotalOffline.string=cc.js.formatStr(u.WordConfig.getWord(60458),12):this.txtTotalOffline.string=cc.js.formatStr(u.WordConfig.getWord(60458),4),C.default.hadFreePrivilege())&&(this.btnAd.getChildByName("btn_guangao").active=!1)},t.prototype.onClickAd=function(){f.GameConfig.isWechat()?m.tttool.OpenAD():C.default.hadFreePrivilege()?this.onAdEnd():f.GameConfig.sdkType==f.SdkType.BingNiao?I.default.sdkAd():M.default.sdkAd(b.AdType.videoAd,y.AdPosId.offlinereward)},t.prototype.onAdEnd=function(){v.default.req_get_offline_reward(2)},t.prototype.onClickFree=function(){v.default.req_get_offline_reward(1)},t.prototype.onSocketRespMsg=function(e,t){e==r.ProtoConfig.c_req_get_offline_reward&&(1==c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_get_offline_reward,t).getRet()&&(this.hadGet=!0,this.closeView()))},t.prototype.onClickMoney=function(){I.default.sdkCustomAction(9,5),v.default.req_get_offline_reward(5)},t.prototype.showGetTip=function(e){w.UIHelper.showTip("\u83b7\u5f97\u7ecf\u9a8c"+this.exp*e),w.UIHelper.showTip("\u83b7\u5f97\u7cbe\u534e"+this.cream*e),w.UIHelper.showTip("\u83b7\u5f97\u91d1\u5e01"+this.coin*e)},t.prototype.onHide=function(){this.hadGet||v.default.req_get_offline_reward(1)},t=o([S],t)}(d.default));i.default=P,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConfig":"GameConfig","../config/GoldsConfig":"GoldsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../miniGameTools/tttool":"tttool","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager","../utils/UIHelper":"UIHelper"}],OfflineView:[function(e,t,i){"use strict";cc._RF.push(t,"fa617ctpJxPF7LBv1+FeEn8","OfflineView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/WordConfig"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=5,t}return n(t,e),t.prototype.onShow=function(){var e=this;this.txtTips=this.getChild(this.node,"view/panel/btnReconnect/txtTips",cc.Label),this.refresh(),this.schedule(function(){e.count--,e.count<=0&&(e.count=0,e.closeView()),e.refresh()},1)},t.prototype.refresh=function(){this.txtTips.string=cc.js.formatStr(s.WordConfig.getWord(60459),this.count)},t.prototype.onHide=function(){},t=o([c],t)}(a.default));i.default=l,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig"}],OneMineModel:[function(e,t,i){"use strict";cc._RF.push(t,"f7a32eD1FBIwY6iE4nLhon7","OneMineModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./CostumeModel"),o=e("./PvpRoleModel"),a=function(){function e(){}return e.proto2ModelList=function(t){var i=new e;return i.mineId=t.getMineid(),i.mineState=t.getMinestate(),i.mineConfigId=t.getMineconfigid(),i.safeTime=t.getSafetime(),i.workTime=t.getWordtime(),i.rewordNum=t.getRewordnum(),i.roleModel=o.default.proto2ModelList(t.getOwerroleinfo()),i.skin=n.CostumeModel.proto2Personalize(t.getSkin()),i},e.EMPTY=1,e.LOCKED=2,e}();i.default=a,cc._RF.pop()},{"./CostumeModel":"CostumeModel","./PvpRoleModel":"PvpRoleModel"}],OptionalGiftBagItem:[function(e,t,i){"use strict";cc._RF.push(t,"1bb13Kt9AhL6qi8b18GXIjB","OptionalGiftBagItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/OptionalGiftBagModel"),r=e("../../../engine/UIManager"),c=e("../../config/ViewConfig"),l=e("../../config/ITemsConfig"),d=e("../../config/WordConfig"),f=e("../../model/ItemInfoModel"),g=e("../../config/GameConst"),h=e("../../utils/MusicHelper"),u=e("../../prefab/ItemPrefab"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteframe=[],t.itemlist=[],t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){},t.prototype.init=function(e,t){var i=this;this.config=t,this.confid=Number(e),this.getChild(this.node,"imgcolor",cc.Sprite).spriteFrame=this.spriteframe[t.color-1],this.getChild(this.node,"goldnum",cc.Label).string=t.yuanbao[2],this.getChild(this.node,"name",cc.Label).string=t.name,this.getChild(this.node,"num",cc.Label).string="0/"+t.times,s.OptionalGiftBagModel.instance.optionalGiftBagInfo.optionallist.forEach(function(n){n.id==Number(e)&&(i.getChild(i.node,"num",cc.Label).string=n.num+"/"+t.times,i.buynum=n.num)});for(var n=function(e){var n=o.getChild(o.node,"btnchoose"+e);n.active=e<=t.box_num,n.on(cc.Node.EventType.TOUCH_START,function(){h.MusicHelper.play_click(),i.showschedule=setTimeout(function(){i.onBtnShow(e)},1e3)}),n.on(cc.Node.EventType.TOUCH_CANCEL,o.stopShow,o),n.on(cc.Node.EventType.TOUCH_END,o.onBtnChoose.bind(o,e));var a=o.config.rewards_a;2==e?a=o.config.rewards_b:3==e&&(a=o.config.rewards_c);var s=0,r=void 0;for(var c in a){++s;var l=a[c];r||(r={id:c,num:l})}1==s&&o.OnChooseCallBack(e,r)},o=this,a=1;a<=3;a++)n(a);this.getChild(this.node,"btnbuy").on(cc.Node.EventType.TOUCH_END,this.onBtnBuy,this)},t.prototype.stopShow=function(){this.showschedule&&(clearTimeout(this.showschedule),this.showschedule=null)},t.prototype.onBtnChoose=function(e){this.showschedule&&r.default.instance.createView(c.default.gameView.OptionalGiftBagTip,null,e,this.itemlist[e-1],this.config,this.OnChooseCallBack.bind(this)),this.stopShow()},t.prototype.onBtnShow=function(e){var t=this.itemlist[e-1];if(t){var i=l.ITemsConfig.getITemsConfigById(t.type),n=f.default.create(g.GameConst.ITEM_KIND.ITEM,i.id,t.num,i.quality);f.default.getItemAmountById(n.itemId)>0&&("expball"==i.position||"expball_full"==i.position)?r.default.instance.createView(c.default.gameView.ExpBallView,null,n):r.default.instance.createView(c.default.gameView.ItemInfo,null,n,0,!1)}this.stopShow()},t.prototype.onBtnBuy=function(){h.MusicHelper.play_click(),this.buynum!=this.config.times?this.isBuyOK()?s.OptionalGiftBagModel.s_req_optional_change(this.confid,this.config.chargeid[0],this.itemlist):d.WordConfig.showWord(61389):d.WordConfig.showWord(61390)},t.prototype.OnChooseCallBack=function(e,t){var i=new s.TEasyItem;i.type=t.id,i.num=t.num,i.pos=e,this.itemlist[e-1]=i;var n=this.getChild(this.node,"btnchoose"+e);this.getChild(n,"btnchoose").active=!1;var o=this.getChild(n,"Item"),a=l.ITemsConfig.getITemsConfigById(t.id);o.active=!0,o.getComponent(u.default).init(a),o.getComponent(u.default).setNumTxt(t.num)},t.prototype.isBuyOK=function(){var e=0,t=!0;return this.itemlist.forEach(function(i){i&&i.type&&i.num?e++:t=!1}),e==this.config.box_num&&t},t.prototype.onDestroy=function(){this.stopShow(),e.prototype.onDestroy.call(this)},o([C({type:[cc.SpriteFrame]})],t.prototype,"spriteframe",void 0),t=o([m],t)}(a.default);i.OptionalGiftBagItem=_,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/ItemInfoModel":"ItemInfoModel","../../model/OptionalGiftBagModel":"OptionalGiftBagModel","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper"}],OptionalGiftBagModel:[function(e,t,i){"use strict";cc._RF.push(t,"dfe33SZyn9LiZytxlGVlqnF","OptionalGiftBagModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/ProtoConfig"),o=e("../../engine/ProtoUtils"),a=e("../../engine/GameSocket"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../config/ChongZhiConfig"),l=function(){return function(){}}(),d=function(){return function(){}}();i.TEasyItem=d;var f=function(){return function(){}}();i.OptionalGiftBagInfo=f;var g=function(){function e(){this.optionalGiftBagInfo=new f}return e.proto2_c_req_optional_info=function(t){var i=o.ProtoUtils.DeserializeBinary(n.ProtoConfig.c_req_optional_info,t);e.instance.optionalGiftBagInfo.starttime=i.getStarttime(),e.instance.optionalGiftBagInfo.endtime=i.getEndtime();var a=[];i.getOptionallistList().forEach(function(e){var t=new l;t.id=e.getId(),t.num=e.getNum(),a.push(t)}),e.instance.optionalGiftBagInfo.optionallist=a,s.EventManager.instance.dispatch(r.CommonEvent.Event_UP_OptionalGiftBagView)},e.s_req_optional_change=function(e,t,i){var s=c.ChongZhiConfig.getChongZhiByIdAndPlatform(t),r=o.ProtoUtils.Create(n.ProtoConfig.s_req_optional_change);r.setId(e),r.setRechargeid(s.id);var l=[];i.forEach(function(e){if(e&&e.type){var t=o.ProtoUtils.Create(n.ProtoConfig.t_easy_item_info);t.setType(e.type),t.setNum(e.num),t.setPos(e.pos),l.push(t)}}),r.setItemlistList(l),a.default.getInstance().sendToSocket(r)},e.instance=new e,e}();i.OptionalGiftBagModel=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/ChongZhiConfig":"ChongZhiConfig","../event/CommonEvent":"CommonEvent"}],OptionalGiftBagTip:[function(e,t,i){"use strict";cc._RF.push(t,"37bc7rHOlNNL5IH+7Q6pSkO","OptionalGiftBagTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ResourcesManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/ColorConfig"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../config/ViewConfig"),g=e("../../model/ItemInfoModel"),h=e("../../utils/MusicHelper"),u=e("../../utils/NameHelper"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){},t.prototype.onInitChild=function(e,t,i,n){this.id=e,this.config=i,this.cb=n,this.item=t},t.prototype.onShow=function(){var e=this;this.itemlist=[];var t=0,i=this.config.rewards_a;for(var n in 2==this.id?i=this.config.rewards_b:3==this.id&&(i=this.config.rewards_c),i){++t;var o=i[n];this.itemlist[t]={id:n,num:o}}for(var r=function(i){var n=p.findChild(p.node,"panel/content/toggle"+i);if(n.active=i<=t,i<=t){var o=d.ITemsConfig.getITemsConfigById(p.itemlist[i].id),r=c.ColorConfig.getQualityColor(o.quality);p.getChild(n,"name",cc.Label).string=o.name;var m=p.getChild(n,"name",cc.Label);""!=m.string&&void 0!=m.string&&(m.fontSize=u.NameHelper.getNameLabSize(m.string)),p.getChild(n,"num",cc.Label).string=p.itemlist[i].num,p.getChild(n,"num").y=24;var C=p.getChild(n,"name");C.width=70,C.y=-22,p.getChild(n,"name").color=r,p.getChild(n,"num").color=r,p.getChild(n,"Background").color=r,p.getChild(n,"zixuanNode").active="box"==o.position,p.getChild(n,"suijiNode").active="draw"==o.position;var _=p.getChild(n,"Background"),v=_.getChildByName("itemIconNode");if(v)v.active=!1;else{var y=_;(v=new cc.Node).addComponent(cc.Sprite);v.x=0,v.y=0,v.scaleX=v.scaleY=1,v.name="itemIconNode",y.addChild(v),v.active=!1}if(v.width=65,v.height=65,v.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.CUSTOM,v.getComponent(cc.Sprite).trim=!1,v.getComponent(cc.Sprite).spriteFrame=null,v.active=!0,o){var b=cc.js.formatStr("itemIcon/%s",o.icon);a.default.instance.loadSprite(v.getComponent(cc.Sprite),b,!0)}n.on(cc.Node.EventType.TOUCH_START,function(){h.MusicHelper.play_click(),e.showschedule=setTimeout(function(){var t=g.default.create(l.GameConst.ITEM_KIND.ITEM,o.id,e.itemlist[i].num,o.quality);g.default.getItemAmountById(t.itemId)>0&&("expball"==o.position||"expball_full"==o.position)?s.default.instance.createView(f.default.gameView.ExpBallView,null,t):s.default.instance.createView(f.default.gameView.ItemInfo,null,t,0,!1)},1e3)}),n.on(cc.Node.EventType.TOUCH_CANCEL,p.stopShow,p),n.on(cc.Node.EventType.TOUCH_END,p.stopShow,p),p.item&&p.item.type==p.itemlist[i].id&&(n.getComponent(cc.Toggle).isChecked=!0)}},p=this,m=1;m<=8;m++)r(m);var C=this.findChild(this.node,"panel");this.getChild(C,"btnDefine").on(cc.Node.EventType.TOUCH_END,this.onBtnDefine,this),this.getChild(C,"btnCancel").on(cc.Node.EventType.TOUCH_END,function(){h.MusicHelper.play_click(),e.closeView()},this),this.getChild(C,"btnClose").on(cc.Node.EventType.TOUCH_END,function(){h.MusicHelper.play_click(),e.closeView()},this)},t.prototype.stopShow=function(){this.showschedule&&(clearTimeout(this.showschedule),this.showschedule=null)},t.prototype.onBtnDefine=function(){h.MusicHelper.play_click();for(var e=1;e<=8;e++){if(this.findChild(this.node,"panel/content/toggle"+e).getComponent(cc.Toggle).isChecked)return this.cb&&this.itemlist[e]&&this.cb(this.id,this.itemlist[e]),void this.closeView()}},t=o([m],t)}(r.default));i.default=C,cc._RF.pop()},{"../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../model/ItemInfoModel":"ItemInfoModel","../../utils/MusicHelper":"MusicHelper","../../utils/NameHelper":"NameHelper"}],OptionalGiftBagView:[function(e,t,i){"use strict";cc._RF.push(t,"bdb1673/LhHsY1pyx6NCO8V","OptionalGiftBagView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/OptionalGiftBagModel"),r=e("../../config/OptionalgiftConfig"),c=e("./OptionalGiftBagItem"),l=e("../../../engine/DateUtil"),d=e("../../event/CommonEvent"),f=e("../../../engine/EventManager"),g=e("../../model/ActivityOpenModel"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){var e=s.OptionalGiftBagModel.instance.optionalGiftBagInfo,t=this.findChild(this.node,"frame/avtivityTime/time");t.getComponent(cc.Label).string=l.default.formatDateStr4(1e3*e.starttime)+"-"+l.default.formatDateStr4(1e3*e.endtime);var i=g.default.getStarTimeByActivityId(26),n=g.default.getEndTimeByActivityId(26);t.getComponent(cc.Label).string=l.default.formatDateStr7(1e3*i)+"-"+l.default.formatDateStr7(1e3*n),f.EventManager.instance.on(d.CommonEvent.Event_UP_OptionalGiftBagView,this.initOptionalgiftList,this),this.initOptionalgiftList()},t.prototype.initOptionalgiftList=function(){var e=this,t=this.findChild(this.node,"frame/scrollView/view/content");t.removeAllChildren(),r.OptionalgiftConfig.configKey.forEach(function(i){var n=r.OptionalgiftConfig.configMap.get(i),o=cc.instantiate(e.itemPrefab);o.getComponent(c.OptionalGiftBagItem).init(i,n),t.addChild(o)})},o([p({type:cc.Prefab})],t.prototype,"itemPrefab",void 0),t=o([u],t)}(a.default);i.default=m,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/OptionalgiftConfig":"OptionalgiftConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/OptionalGiftBagModel":"OptionalGiftBagModel","./OptionalGiftBagItem":"OptionalGiftBagItem"}],OptionalView:[function(e,t,i){"use strict";cc._RF.push(t,"ff7dd4CFLlJ/KQz4k1iB0p5","OptionalView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../../../engine/ViewBase"),r=e("../../config/EquipConfig"),c=e("../../config/GameConst"),l=e("../../config/ItemGiftConfig"),d=e("../../config/ITemsConfig"),f=e("../../config/ShenCiConfig"),g=e("../../config/WordConfig"),h=e("../../model/BlessModel"),u=e("../../model/ItemInfoModel"),p=e("../../network/SocketClient"),m=e("../../prefab/ItemPrefab"),C=cc._decorator,_=C.ccclass,v=C.property,y=function(){return function(){}}();i.OptionalData=y,function(e){e[e.resource=1]="resource",e[e.equip=2]="equip",e[e.item=3]="item"}(a=i.ItemGiftType||(i.ItemGiftType={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.currentNum=0,t}return n(t,e),t.prototype.onInitChild=function(e,t){void 0===t&&(t=!0),this.model=e,this.config=this.model.getConfig(),this.initNode(t),this.initView()},t.prototype.initNode=function(e){void 0===e&&(e=!0),this.topItemNode=this.getChild(this.node,"bg/top/itemPrefab",cc.Node),this.topItemNumLabel=this.getChild(this.node,"bg/top/count/numTxt",cc.Label),this.itemListNode=this.getChild(this.node,"bg/info/ScrollView/view/content",cc.Node),this.itemNode=this.getChild(this.itemListNode,"item",cc.Node),this.btnUse=this.getChild(this.node,"bg/btnUse",cc.Node),this.btnUse.active=e,this.setTopUI()},t.prototype.initView=function(){var e=void 0==this.topItemNode.getChildByName("ItemPrefab")?cc.instantiate(this.itemPrefab):this.topItemNode.getChildByName("ItemPrefab");e.parent=this.topItemNode,e.getComponent(m.default).init(this.model,!0),this.topItemNumLabel.string=this.currentNum+"/"+this.model.itemCnt;var t=l.default.getConfigById(this.config.id),i=0,n=t.resource,o=t.item,s=t.equip;if(this.itemListNode.children.forEach(function(e){e.active=!1}),n)for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var c=n[r],d=void 0;i<this.itemListNode.childrenCount?d=this.itemListNode.children[i]:(d=cc.instantiate(this.itemNode)).parent=this.itemListNode,d.active=!0,d.data={id:r,type:a.resource,count:c,selectNum:0},this.initItemNode(d),i++}if(o)for(var r in o)if(Object.prototype.hasOwnProperty.call(o,r)){c=o[r],d=void 0;i<this.itemListNode.childrenCount?d=this.itemListNode.children[i]:(d=cc.instantiate(this.itemNode)).parent=this.itemListNode,d.active=!0,d.data={id:r,type:a.item,count:c,selectNum:0},this.initItemNode(d),i++}if(s)for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){c=s[r],d=void 0;i<this.itemListNode.childrenCount?d=this.itemListNode.children[i]:(d=cc.instantiate(this.itemNode)).parent=this.itemListNode,d.active=!0,d.data={id:r,type:a.equip,count:1,selectNum:0},this.initItemNode(d,c),i++}this.onAddEvent(this.btnUse,this.onClickUsed.bind(this))},t.prototype.initItemNode=function(e,t){void 0===t&&(t=0);var i=void 0==e.getChildByName("itemPrefab").getChildByName("ItemPrefab")?cc.instantiate(this.itemPrefab):e.getChildByName("itemPrefab").getChildByName("ItemPrefab");if(i.parent=e.getChildByName("itemPrefab"),e.data.type==a.resource)i.getComponent(m.default).initResource(parseInt(e.data.id),e.data.count*(e.data.selectNum+1));else if(e.data.type==a.item){var n=d.ITemsConfig.getITemsConfigById(e.data.id),o=u.default.create(c.GameConst.ITEM_KIND.ITEM,n.id,e.data.count*(e.data.selectNum+1),n.quality);i.getComponent(m.default).init(o,!0)}else if(e.data.type==a.equip){o=void 0;if((n=r.EquipConfig.getEquipConfigById(e.data.id)).dingzhi){var s=(o=u.default.createDingZhiEquip(e.data.id)).getConfig();if(s.shenci_id&&s.shenci_id.length>0&&o.blessAtttList.length<=0)for(var l=o.quality,g=0;g<s.shenci_id.length;++g){var p=s.shenci_id[g],C=f.ShenCiConfig.getConfigById(p);if(C){var _=new h.default;_.blessId=C.id,_.blessValue=C["pinzhi"+l][1],o.blessAtttList.push(_)}}}else o=u.default.create(c.GameConst.ITEM_KIND.EQUIP,e.data.id,1,t);i.getComponent(m.default).init(o,!0)}var v=this.findChild(e,"frame/btnAdd"),y=this.findChild(e,"frame/btnReduce"),b=this.getChild(e,"frame/numTxt",cc.Label);this.onAddEvent(v,this.onClickSelect.bind(this,!0,e,b)),this.onAddEvent(y,this.onClickSelect.bind(this,!1,e,b))},t.prototype.initItem=function(e,t,i,n){for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){var a=i[o]*(n+1),s=d.ITemsConfig.getITemsConfigById(o),r=u.default.create(c.GameConst.ITEM_KIND.ITEM,s.id,a,s.quality);t.getComponent(m.default).init(r,!0)}},t.prototype.onClickSelect=function(e,t,i,n){var o=t.data;if(e){var a=!(this.currentNum>=this.model.itemCnt);o.selectNum=a?o.selectNum+=1:o.selectNum,this.currentNum=this.currentNum>=this.model.itemCnt?this.currentNum:this.currentNum+1,i.string=o.selectNum,a||g.WordConfig.showWord(61420)}else this.currentNum=this.currentNum<=0?0:this.currentNum-1,o.selectNum=o.selectNum<=0?0:o.selectNum-=1,i.string=o.selectNum;var s=t.getChildByName("itemPrefab").getChildByName("ItemPrefab");this.initItem(t,s,n,o.selectNum),this.topItemNumLabel.string=this.currentNum+"/"+this.model.itemCnt},t.prototype.onClickUsed=function(){var e=new Array;this.itemListNode.children.forEach(function(t){var i=t.data;if(i.selectNum>0){var n=new y;n.id=i.id,n.num=i.selectNum,n.type=i.type,e.push(n)}}),e.length>0?(p.default.s_optional_gift(this.config.id,e),this.closeView()):g.WordConfig.showWord(61421)},o([v(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=o([_],t)}(s.default);i.default=b,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ItemGiftConfig":"ItemGiftConfig","../../config/ShenCiConfig":"ShenCiConfig","../../config/WordConfig":"WordConfig","../../model/BlessModel":"BlessModel","../../model/ItemInfoModel":"ItemInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],OptionalgiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4ca19HvUAZFsJhZcNcLh6QI","OptionalgiftConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=function(){return function(){}}();i.OptionalgiftItem=a;var s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),t.configKey.push(i)})},t.Config_Name="OptionalgiftConfig",t.configMap=new Map,t.configKey=[],t=o([r],t)}(cc.Component));i.OptionalgiftConfig=c,cc._RF.pop()},{}],PkChallenge:[function(e,t,i){"use strict";cc._RF.push(t,"5ccefEBaWFB/IYYDJzf7b4y","PkChallenge");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/SpriteFrameComponent"),l=e("../../engine/UIManager"),d=e("../../engine/ViewBase"),f=e("../config/ArenaWeekRewardConfig"),g=e("../config/DefaultConfig"),h=e("../config/GameConst"),u=e("../config/ITemsConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../event/CommonEvent"),_=e("../model/CostumeModel"),v=e("../model/ItemInfoModel"),y=e("../model/PkModel"),b=e("../model/RoleInfoModel"),I=e("../network/SocketClient"),M=e("../prefab/ItemPrefab"),w=e("../utils/UIHelper"),k=e("./FangShopView"),S=e("./PkView"),P=cc._decorator,E=P.ccclass,L=(P.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressWidthConfig=[50,110,180,270,350,420,520],t.itemNodeList=[],t.giftContainerList=[],t.lastRefreshTime=0,t}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.tipBg=this.getChild(this.node,"tipBg"),this.tipBg.active=!1,this.txtMyTop=this.getChild(this.node,"leitaiBg/top/minePaiMing/txtMyTop",cc.Label),this.txtMyScore=this.getChild(this.node,"leitaiBg/top/mineJiFen/layout/txtMyScore",cc.Label),this.txtLeiTaiLing=this.getChild(this.node,"leitaiBg/top/img_jingjichang_ui_di03/txtLeiTaiLing",cc.Label),this.freerichtext=this.getChild(this.node,"leitaiBg/top/freerich",cc.RichText),this.temShowNode=this.getChild(this.node,"leitaiBg/scrollView/view/content/temShowNode"),this.temShowNode.active=!1,this.tiaoZhanNum=this.getChild(this.node,"tiaoZhanNum",cc.Label),this.progressNode=this.getChild(this.node,"progressNode");var i=this.getChild(this.node,"btnRefresh");y.PkModel.TotalFreeTimes=g.DefaultConfig.getConfigById(171).value,this.onAddEvent(i,function(){a.default.now()-t.lastRefreshTime>=1e3?(t.lastRefreshTime=a.default.now(),I.default.s_arena_info()):m.WordConfig.showWord(60327)});var n=this.getChild(this.node,"btnLeiTaiRank");this.onAddEvent(n,function(){w.UIHelper.gotoPaiHangBang(4)});var o=this.getChild(this.node,"btnFangShi");this.onAddEvent(o,function(){t.node.parent.getComponent(S.default).closeView(),w.UIHelper.gotoFangshi(k.default.TabIndex.LeiTaiBi)});var s=this.getChild(this.node,"leitaiBg/top/but_milu_jia");this.onAddEvent(s,function(){if(y.PkModel.Item_LeitaiLing_Max-y.PkModel.buynum>0){var e=v.default.getConfigById(y.PkModel.Item_LeitaiLing),t=Math.floor(b.default.instance.getGold()/e.gem);l.default.instance.createView(p.default.gameView.BuyShopView,null,3,1,y.PkModel.Item_LeitaiLing,e.gem,e.gem,1,t,null,null,1,1,1,y.PkModel.Item_LeitaiLing_Max-y.PkModel.buynum)}else m.WordConfig.showWord(61273)});var r=this.getChild(this.node,"btnRecord");this.onAddEvent(r,function(){l.default.instance.createView(p.default.gameView.PkRecordView)}),this.onAddEvent(this.tipBg,function(){t.onHideGiftContainer(-1)}),this.initWeedReward()},t.prototype.initWeedReward=function(){for(var e=f.ArenaWeekRewardConfig.getAllListConfig(),t=0;t<e.length;t++){var i=e[t],n=this.getChild(this.node,"giftContainer"+t);this.giftContainerList[t]=n;var o=n.getChildByName("ItemPrefab");o.active=!1;for(var a=0;a<i.ress.length;a++){var s=i.ress[a],r=cc.instantiate(o);for(var c in r.parent=o.parent,r.active=!0,s)r.getComponent(M.default).initResource(parseInt(c),s[c])}for(a=0;a<i.items.length;a++){s=i.items[a],r=cc.instantiate(o);for(var c in r.parent=o.parent,r.active=!0,s){var l=u.ITemsConfig.getITemsConfigById(c),d=v.default.create(h.GameConst.ITEM_KIND.ITEM,l.id,s[c],l.quality);r.getComponent(M.default).init(d,!0)}}}},t.prototype.onEnable=function(){s.EventManager.instance.on(C.CommonEvent.Event_up_c_arena_info,this.refreshItem,this),s.EventManager.instance.on(C.CommonEvent.Event_c_arena_info,this.refresh,this),this.onHideGiftContainer(-1),this.refresh()},t.prototype.refreshItem=function(){I.default.s_arena_info()},t.prototype.onHideGiftContainer=function(e){this.tipBg.active=!1;for(var t=0;t<this.giftContainerList.length;t++)e!=t&&(this.giftContainerList[t].active=!1)},t.prototype.refresh=function(){var e=this,t=y.PkModel.TotalFreeTimes-y.PkModel.freetime;this.txtMyScore.string=y.PkModel.score+"",this.freerichtext.string=cc.js.formatStr(m.WordConfig.getWord(61805),t<0?0:t,y.PkModel.TotalFreeTimes),this.txtLeiTaiLing.string=v.default.getItemAmount(y.PkModel.Item_LeitaiLing)+"",0==y.PkModel.rankid||y.PkModel.rankid>100?this.txtMyTop.string=m.WordConfig.getWord(60460):this.txtMyTop.string=""+y.PkModel.rankid,this.tiaoZhanNum.string=cc.js.formatStr(m.WordConfig.getWord(60461),y.PkModel.pkTimes);var i=f.ArenaWeekRewardConfig.getAllListConfig();this.progressNode.width=0;for(var n=function(t){var n=i[t],a=o.getChild(o.node,"txtTarget"+t,cc.Label),s=o.getChild(o.node,"baoxiangIcon/icon"+t),l=y.PkModel.getRewardModel(n.id);s.getComponent(cc.Sprite).spriteFrame=s.getComponent(c.SpriteFrameComponent).spriteFrameList[1],o.onAddEvent(s,function(){r.Logger.log("onCLickicon",t),e.onHideGiftContainer(t),e.giftContainerList[t].active=!e.giftContainerList[t].active,e.tipBg.active=e.giftContainerList[t].active}),l&&(2==l.state?s.getComponent(cc.Sprite).spriteFrame=s.getComponent(c.SpriteFrameComponent).spriteFrameList[0]:1==l.state&&(s.getComponent(cc.Sprite).spriteFrame=s.getComponent(c.SpriteFrameComponent).spriteFrameList[2],o.onAddEvent(s,function(){v.default.tryAddConfigItems(n.items)&&I.default.s_arena_week_reward(n.id)}))),a.string=n.limit+"",y.PkModel.pkTimes>=n.limit&&(o.progressNode.width=o.progressWidthConfig[t])},o=this,a=0;a<i.length;a++)n(a);for(a=0;a<this.itemNodeList.length;a++)this.itemNodeList[a].active=!1;var s=function(t){var i=y.PkModel.pklist[t],n=void 0;l.itemNodeList[t]?n=l.itemNodeList[t]:((n=cc.instantiate(l.temShowNode)).parent=l.temShowNode.parent,l.itemNodeList[t]=n);var o=n.getChildByName("btnPk"),a=n.getChildByName("btnFree");y.PkModel.freetime>=y.PkModel.TotalFreeTimes?(a.active=!1,o.active=!0):(a.active=!0,l.onAddEvent(a,function(){e.checkCanPkTime()&&(r.Logger.log("\u70b9\u51fb\u6311\u6218+=",i),0==i.heroid?I.default.s_challenge_start(i.rankid,i.robotid):I.default.s_challenge_start(i.rankid,i.heroid))}),o.active=!1),n.active=!0;var s=l.getChild(n,"headFrame",cc.Sprite),c=l.getChild(n,"headFrame/icon",cc.Sprite);_.CostumeModel.setCostSF(c,_.CostumeType.Head,i.personalize.portrait),_.CostumeModel.setCostSF(s,_.CostumeType.HeadFM,i.personalize.portrait_skin),n.getChildByName("txtLevel").getComponent(cc.Label).string="Lv"+i.lev;var d=n.getChildByName("txtName").getComponent(cc.Label);d.string=i.name,i.robotid?d.enableUnderline=!1:(d.enableUnderline=!0,l.onAddEvent(d.node,w.UIHelper.showPlayerDetail.bind(l,i.heroid))),n.getChildByName("txtPaiMing").getComponent(cc.Label).string=m.WordConfig.getWord(60462)+i.rankid+"",n.getChildByName("JiFenNum").getComponent(cc.Label).string=i.score+"",n.getChildByName("txtZhanLi").getComponent(cc.Label).string=m.WordConfig.getWord(60463)+i.fight,l.onAddEvent(o,function(){e.checkHadLing()&&e.checkCanPkTime()&&(r.Logger.log("\u70b9\u51fb\u6311\u6218+=",i),0==i.heroid?I.default.s_challenge_start(i.rankid,i.robotid):I.default.s_challenge_start(i.rankid,i.heroid))})},l=this;for(a=0;a<y.PkModel.pklist.length;a++)s(a)},t.prototype.checkHadLing=function(){if(v.default.getItemAmount(y.PkModel.Item_LeitaiLing)>0)return!0;m.WordConfig.showWord(61555)},t.prototype.checkCanPkTime=function(){if(!(b.default.instance.bagRemainingnumber<=0))return a.default.now()-y.PkModel.lastPkTime>=1e3||void m.WordConfig.showWord(60327);m.WordConfig.showWord(60001)},t=o([E],t)}(d.default));i.default=L,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ArenaWeekRewardConfig":"ArenaWeekRewardConfig","../config/DefaultConfig":"DefaultConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/CostumeModel":"CostumeModel","../model/ItemInfoModel":"ItemInfoModel","../model/PkModel":"PkModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/UIHelper":"UIHelper","./FangShopView":"FangShopView","./PkView":"PkView"}],PkDailyGift:[function(e,t,i){"use strict";cc._RF.push(t,"fd1d45+1glC37/nE1xrkRBx","PkDailyGift");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/SpriteFrameComponent"),r=e("../../engine/ViewBase"),c=e("../config/ArenaRankRewardConfig"),l=e("../config/ColorConfig"),d=e("../config/GameConst"),f=e("../config/ITemsConfig"),g=e("../config/WordConfig"),h=e("../model/ItemInfoModel"),u=e("../model/PkModel"),p=e("../prefab/ItemPrefab"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNodeList=[],t.giftItemList=[],t.rewardList=[],t.myTopIndex=2,t.nowLevel=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.txtMyTop=this.getChild(this.node,"txtMyTop",cc.Label),this.tempShowNode=this.getChild(this.node,"scrollView/view/content/tempShowNode"),this.tempShowNode.active=!1,this.topNode=this.getChild(this.node,"reward/scrollView/view/content/topNode"),this.topNode.active=!1},t.prototype.onEnable=function(){this.refresh()},t.prototype.refresh=function(){this.myTopIndex=u.PkModel.rankid,0==u.PkModel.rankid||u.PkModel.rankid>100?this.txtMyTop.string=g.WordConfig.getWord(60460):this.txtMyTop.string=u.PkModel.rankid+"";var e=c.ArenaRankRewardConfig.getAllListConfig();a.Logger.log("refresh===lj===",e);for(var t=0;t<e.length;t++){var i=e[t];this.giftItemList[t]||(this.giftItemList[t]=[]);var n=void 0;this.itemNodeList[t]?n=this.itemNodeList[t]:((n=cc.instantiate(this.tempShowNode)).parent=this.tempShowNode.parent,this.itemNodeList[t]=n);var o=n.getChildByName("topNode");o.active=!1,n.active=!0;var r=n.getChildByName("icon"),m=n.getChildByName("scrollView").getChildByName("view").getChildByName("content").getChildByName("ItemPrefab");m.active=!1,r.active=!1;var C=n.getChildByName("txtRank").getComponent(cc.Label);e[t+1]?i.rank[1]?C.string=i.rank[0]+"-"+i.rank[1]:(C.string=i.rank[0],1==i.rank[0]?(C.string="",r.active=!0,o.active=!0,o.getChildByName("frameNode").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.ORANGE),o.getChildByName("nameTxt").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.ORANGE),o.getChildByName("giftNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("giftNode").getComponent(s.SpriteFrameComponent).spriteFrameList[0],r.getComponent(cc.Sprite).spriteFrame=r.getComponent(s.SpriteFrameComponent).spriteFrameList[0]):2==i.rank[0]?(C.string="",r.active=!0,o.active=!0,o.getChildByName("nameTxt").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.PURPLE),o.getChildByName("frameNode").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.PURPLE),o.getChildByName("giftNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("giftNode").getComponent(s.SpriteFrameComponent).spriteFrameList[1],r.getComponent(cc.Sprite).spriteFrame=r.getComponent(s.SpriteFrameComponent).spriteFrameList[1]):3==i.rank[0]&&(C.string="",r.active=!0,o.active=!0,o.getChildByName("nameTxt").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.BLUE),o.getChildByName("frameNode").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.BLUE),o.getChildByName("giftNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("giftNode").getComponent(s.SpriteFrameComponent).spriteFrameList[2],r.getComponent(cc.Sprite).spriteFrame=r.getComponent(s.SpriteFrameComponent).spriteFrameList[2])):C.string=i.rank[0]+"+";var _=0;if(i.items)for(var v in i.items){var y=void 0;this.giftItemList[t][_]?y=this.giftItemList[t][_]:((y=cc.instantiate(m)).parent=m.parent,this.giftItemList[t][_]=y);var b=f.ITemsConfig.getITemsConfigById(v),I=h.default.create(d.GameConst.ITEM_KIND.ITEM,b.id,i.items[v],b.quality);y.getComponent(p.default).init(I,!0),y.active=!0,_++}if(i.ress)for(var v in i.ress){var M=void 0;this.giftItemList[t][_]?M=this.giftItemList[t][_]:((M=cc.instantiate(m)).parent=m.parent,this.giftItemList[t][_]=M),M.getComponent(p.default).initResource(parseInt(v),i.ress[v]),M.active=!0,_++}}var w=this.findChild(this.node,"reward/scrollView/view/content/ItemPrefab");w.active=!1,this.nowLevel=e.length;for(t=0;t<e.length;t++)this.myTopIndex>=e[e.length-1].rank[0]?this.nowLevel=e.length:this.myTopIndex>=e[t].rank[0]&&this.myTopIndex<e[t+1].rank[0]&&(this.nowLevel=t+1);this.topNode.active=!1,1==this.nowLevel?(this.topNode.active=!0,this.topNode.getChildByName("nameTxt").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.ORANGE),this.topNode.getChildByName("frameNode").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.ORANGE),this.topNode.getChildByName("giftNode").getComponent(cc.Sprite).spriteFrame=this.topNode.getChildByName("giftNode").getComponent(s.SpriteFrameComponent).spriteFrameList[0]):2==this.nowLevel?(this.topNode.active=!0,this.topNode.getChildByName("frameNode").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.PURPLE),this.topNode.getChildByName("nameTxt").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.PURPLE),this.topNode.getChildByName("giftNode").getComponent(cc.Sprite).spriteFrame=this.topNode.getChildByName("giftNode").getComponent(s.SpriteFrameComponent).spriteFrameList[1]):3==this.nowLevel&&(this.topNode.active=!0,this.topNode.getChildByName("frameNode").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.BLUE),this.topNode.getChildByName("nameTxt").color=l.ColorConfig.getQualityColor(d.GameConst.QUALITY.BLUE),this.topNode.getChildByName("giftNode").getComponent(cc.Sprite).spriteFrame=this.topNode.getChildByName("giftNode").getComponent(s.SpriteFrameComponent).spriteFrameList[2]),a.Logger.log("refresh====2===",this.nowLevel,e);var k=0;for(var v in e[this.nowLevel-1].items){y=void 0;this.rewardList[k]?y=this.rewardList[k]:((y=cc.instantiate(w)).parent=w.parent,this.rewardList[k]=y);b=f.ITemsConfig.getITemsConfigById(v),I=h.default.create(d.GameConst.ITEM_KIND.ITEM,b.id,e[this.nowLevel-1].items[v],b.quality);y.getComponent(p.default).init(I,!0),k++,y.active=!0}for(var v in e[this.nowLevel-1].ress){y=void 0;this.rewardList[k]?y=this.rewardList[k]:((y=cc.instantiate(w)).parent=w.parent,this.rewardList[k]=y),y.getComponent(p.default).initResource(parseInt(v),e[this.nowLevel-1].ress[v]),y.active=!0,k++}a.Logger.log("myGiftIndex====",k,this.rewardList,this.nowLevel,e[this.nowLevel-1])},t=o([C],t)}(r.default));i.default=_,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/ViewBase":"ViewBase","../config/ArenaRankRewardConfig":"ArenaRankRewardConfig","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/PkModel":"PkModel","../prefab/ItemPrefab":"ItemPrefab"}],PkModel:[function(e,t,i){"use strict";cc._RF.push(t,"21dac9VPfxOjpRq1WS8IpKk","PkModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=e("../event/CommonEvent"),d=e("./CostumeModel"),f=function(){function e(){}return e.proto2Model=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_arena_info,e);this.rankid=t.getRankid(),this.score=t.getScore(),this.freetime=t.getFreetime(),this.pkTimes=t.getPktimes(),this.buynum=t.getBuyNum(),this.ranklist=[];for(var i=t.getRanklistList(),r=0;r<i.length;r++){var c=h.proto2RankModel(i[r]);this.ranklist[r]=c}this.ranklist.sort(function(e,t){return e.rankid-t.rankid}),this.pklist=[];var d=t.getPklistList();for(r=0;r<d.length;r++){c=h.proto2RankModel(d[r]);this.pklist[r]=c}this.rewardList=[];var f=t.getRewardlistList();for(r=0;r<f.length;r++){var u=g.proto2Model(f[r]);this.rewardList[r]=u}o.Logger.log("PkModel=====",t),this.pklist.sort(function(e,t){return e.score-t.score}),n.EventManager.instance.dispatch(l.CommonEvent.Event_c_arena_info)},e.getRewardModel=function(e){for(var t=0;t<this.rewardList.length;t++){var i=this.rewardList[t];if(i.index==e)return i}},e.proto2PkResult=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_challenge_result,e),i=t.getOwnScore(),n=t.getOwnChangeScore(),o=(t.getOwnRank(),t.getOwnChangeRank(),t.getEnScore()),l=t.getEnChangeScore(),d=(t.getEnRank(),t.getEnChangeRank(),t.getListList()),f=t.getRsListList(),g=t.getResult();r.default.instance.createView(c.default.gameView.PkResultView,null,n,l,g,i,o,d,f)},e.Item_LeitaiLing="I3010",e.Item_LeitaiLing_Max=5,e.lastPkTime=0,e.TotalFreeTimes=5,e.rankid=1,e.score=0,e.pkTimes=0,e.freetime=0,e.buynum=0,e.ranklist=[],e.pklist=[],e.rewardList=[],e}();i.PkModel=f;var g=function(){function e(){}return e.proto2Model=function(t){var i=new e;return i.index=t.getIndex(),i.state=t.getState(),i},e}();i.PkRankReward=g;var h=function(){function e(){}return e.proto2RankModel=function(t){var i=new e;return i.rankid=t.getRankid(),i.lev=t.getLev(),i.name=t.getName(),i.career=t.getCareer(),i.score=t.getScore(),i.fight=t.getFight(),i.heroid=t.getHeroid(),i.robotid=t.getRobotid(),i.personalize=d.CostumeModel.proto2Personalize(t.getPersonalize()),i},e}();i.PkRankModel=h;var u=function(){function e(){}return e.proto2Model=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_arena_log,t);this.logList=[];for(var r=i.getLogList(),c=0;c<r.length;c++){var f=new e;f.name1=r[c].getName1(),f.career1=r[c].getCareer1(),f.name2=r[c].getName2(),f.career2=r[c].getCareer2(),f.res=r[c].getRes(),f.scorechange=r[c].getScorechange(),f.ptime=r[c].getPtime(),f.score=r[c].getScore(),f.isattack=r[c].getIsattack(),f.heroId=r[c].getHeroid(),f.robotid=r[c].getRobotid(),f.my_personalize=d.CostumeModel.proto2Personalize(r[c].getMyPersonalize()),f.en_personalize=d.CostumeModel.proto2Personalize(r[c].getEnPersonalize()),this.logList[c]=f}o.Logger.log("c_arena_log",i),n.EventManager.instance.dispatch(l.CommonEvent.Event_Pk_log)},e.logList=[],e}();i.PkLog=u,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","./CostumeModel":"CostumeModel"}],PkRecordView:[function(e,t,i){"use strict";cc._RF.push(t,"135723L8CZP6bAJcW+/v7oz","PkRecordView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/SpriteFrameComponent"),c=e("../../engine/ViewBase"),l=e("../config/ColorConfig"),d=e("../config/WordConfig"),f=e("../event/CommonEvent"),g=e("../model/CostumeModel"),h=e("../model/PkModel"),u=e("../network/SocketClient"),p=e("../utils/UIHelper"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNodeList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.tempNode=this.getChild(this.node,"scrollView/view/content/tempNode"),this.tempNode.active=!1},t.prototype.onEnable=function(){s.EventManager.instance.on(f.CommonEvent.Event_Pk_log,this.initList,this),this.initList(),u.default.s_arena_log()},t.prototype.initList=function(){for(var e=this,t=function(t){i.scheduleOnce(function(){e.initOne(t)},.01*t)},i=this,n=0;n<h.PkLog.logList.length;n++)t(n)},t.prototype.initOne=function(e){var t,i=h.PkLog.logList[e];this.itemNodeList[e]?t=this.itemNodeList[e]:((t=cc.instantiate(this.tempNode)).parent=this.tempNode.parent,this.itemNodeList[e]=t),t.active=!0;var n=t.getChildByName("gameStatus").getComponent(cc.Label),o=t.getChildByName("myNode"),s=t.getChildByName("pkNode");o.getChildByName("occupationNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("occupationNode").getComponent(r.SpriteFrameComponent).spriteFrameList[i.career1-1],s.getChildByName("occupationNode").getComponent(cc.Sprite).spriteFrame=s.getChildByName("occupationNode").getComponent(r.SpriteFrameComponent).spriteFrameList[i.career2-1],o.getChildByName("txtName").getComponent(cc.Label).string=i.name1,s.getChildByName("txtName").getComponent(cc.Label).string=i.name2;var c=this.getChild(o,"headFrame",cc.Sprite),f=this.getChild(o,"headFrame/icon",cc.Sprite),u=this.getChild(s,"headFrame",cc.Sprite),m=this.getChild(s,"headFrame/icon",cc.Sprite);i.my_personalize&&i.en_personalize?(g.CostumeModel.setCostSF(f,g.CostumeType.Head,i.my_personalize.portrait),g.CostumeModel.setCostSF(c,g.CostumeType.HeadFM,i.my_personalize.portrait_skin),g.CostumeModel.setCostSF(m,g.CostumeType.Head,i.en_personalize.portrait),g.CostumeModel.setCostSF(u,g.CostumeType.HeadFM,i.en_personalize.portrait_skin),u.node.active=!0,c.node.active=!0):(c.node.active=!1,u.node.active=!1);var C=t.getChildByName("txtTime").getComponent(cc.Label),_=t.getChildByName("txtTop").getComponent(cc.RichText);t.getChildByName("txtScore").getComponent(cc.Label).string=""+i.score,C.string=a.default.formatDateStr(1e3*i.ptime),1==i.res?(1==i.isattack?(n.string=d.WordConfig.getWord(60464),o.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[0],s.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=s.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[1]):(n.string=d.WordConfig.getWord(60465),o.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[1],s.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=s.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[0]),n.node.color=l.ColorConfig.GreenColor,_.string='<img src="img_icon_jinji_shangsheng" /><color=#00ff00>'+Math.abs(i.scorechange)+"</color>"):(1==i.isattack?(n.string=d.WordConfig.getWord(60466),o.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[1],s.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=s.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[0]):(n.string=d.WordConfig.getWord(60467),o.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=o.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[0],s.getChildByName("iconNode").getComponent(cc.Sprite).spriteFrame=s.getChildByName("iconNode").getComponent(r.SpriteFrameComponent).spriteFrameList[1]),n.node.color=l.ColorConfig.RedColor,_.string='<img src="img_icon_jinji_xiajiang" /><color=#FF1B03>'+Math.abs(i.scorechange)+"</color>"),0==i.scorechange&&(_.string=d.WordConfig.getWord(60468)),o.getChildByName("txtName").getComponent(cc.Label).enableUnderline=!1,o.getChildByName("txtName").targetOff(o),s.getChildByName("txtName").getComponent(cc.Label).enableUnderline=!1,s.getChildByName("txtName").targetOff(s),1==i.isattack?i.robotid||(s.getChildByName("txtName").getComponent(cc.Label).enableUnderline=!0,this.onAddEvent(s.getChildByName("txtName"),p.UIHelper.showPlayerDetail.bind(this,i.heroId))):i.robotid||(o.getChildByName("txtName").getComponent(cc.Label).enableUnderline=!0,this.onAddEvent(o.getChildByName("txtName"),p.UIHelper.showPlayerDetail.bind(this,i.heroId)))},t.prototype.onDestroy=function(){},t=o([C],t)}(c.default));i.default=_,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/CostumeModel":"CostumeModel","../model/PkModel":"PkModel","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper"}],PkResultView:[function(e,t,i){"use strict";cc._RF.push(t,"aa1fefUda5GebJURDm+uoP4","PkResultView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/SpriteFrameComponent"),s=e("../../engine/ViewBase"),r=e("../config/GameConst"),c=e("../config/ITemsConfig"),l=e("../config/WordConfig"),d=e("../model/ItemInfoModel"),f=e("../model/PkModel"),g=e("../prefab/ItemPrefab"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.occuSpriteFrameList=[],t.winSpriteFrameList=[],t}return n(t,e),t.prototype.onLoad=function(){var e=this,t=this.getChild(this.node,"view/btnSure");this.onAddEvent(t,function(){e.closeView()}),this.tempItemNode=this.getChild(this.node,"view/content/tempItemNode"),this.titleNode=this.getChild(this.node,"view/titleNode")},t.prototype.onEnable=function(){},t.prototype.onInitChild=function(e,t,i,n,o,s,h){var u=this,p=this.getChild(this.node,"view/playerBg1/txtZhanLi",cc.Label),m=f.PkModel.myRole.getOccupation(),C=f.PkModel.myRole.getName(),_=f.PkModel.myRole.getLev();p.string=l.WordConfig.getWord(60463)+f.PkModel.myRole.getFight();var v=this.getChild(this.node,"view/playerBg1/txtLevel",cc.Label),y=this.getChild(this.node,"view/playerBg1/win");v.string="lv"+_;var b=this.getChild(this.node,"view/playerBg1/txtName",cc.Label);b.string=C;var I=this.getChild(this.node,"view/playerBg1/iconNode/iconSprite");I.getComponent(cc.Sprite).spriteFrame=this.occuSpriteFrameList[m-1];var M=this.getChild(this.node,"view/playerBg1/txtScore",cc.Label),w=this.getChild(this.node,"view/playerBg1/txtTop",cc.RichText);M.string=n+"",1==i?(w.string='<img src="img_icon_jinji_shangsheng" /><color=#00ff00>'+Math.abs(e)+"</color>",this.titleNode.getComponent(cc.Sprite).spriteFrame=this.titleNode.getComponent(a.SpriteFrameComponent).spriteFrameList[0],y.getComponent(cc.Sprite).spriteFrame=this.winSpriteFrameList[0]):(y.getComponent(cc.Sprite).spriteFrame=this.winSpriteFrameList[1],w.string='<img src="img_icon_jinji_xiajiang" /><color=#FF1B03>'+Math.abs(e)+"</color>",this.titleNode.getComponent(cc.Sprite).spriteFrame=this.titleNode.getComponent(a.SpriteFrameComponent).spriteFrameList[1]),0==e&&(w.string=l.WordConfig.getWord(60468)),y=this.getChild(this.node,"view/playerBg2/win"),(p=this.getChild(this.node,"view/playerBg2/txtZhanLi",cc.Label)).string=l.WordConfig.getWord(60463)+f.PkModel.pkRole.getFight();var k=f.PkModel.pkRole.getOccupation();(I=this.getChild(this.node,"view/playerBg2/iconNode/iconSprite")).getComponent(cc.Sprite).spriteFrame=this.occuSpriteFrameList[k-1];var S=f.PkModel.pkRole.getLev();(v=this.getChild(this.node,"view/playerBg2/txtLevel",cc.Label)).string="lv"+S,C=f.PkModel.pkRole.getName(),(b=this.getChild(this.node,"view/playerBg2/txtName",cc.Label)).string=C,(M=this.getChild(this.node,"view/playerBg2/txtScore",cc.Label)).string=o+"",w=this.getChild(this.node,"view/playerBg2/txtTop",cc.RichText),1==i?(y.getComponent(cc.Sprite).spriteFrame=this.winSpriteFrameList[1],w.string='<img src="img_icon_jinji_xiajiang" /><color=#FF1B03>'+Math.abs(t)+"</color>"):(y.getComponent(cc.Sprite).spriteFrame=this.winSpriteFrameList[0],w.string='<img src="img_icon_jinji_shangsheng" /><color=#00ff00>'+Math.abs(t)+"</color>"),0==t&&(w.string=l.WordConfig.getWord(60468)),this.tempItemNode.active=!1,s.forEach(function(e){var t=e.getItemType(),i=e.getNum(),n=cc.instantiate(u.tempItemNode),o=c.ITemsConfig.getITemsConfigById(t),a=d.default.create(r.GameConst.ITEM_KIND.ITEM,t,i,o.quality);n.getComponent(g.default).init(a,!0),n.parent=u.tempItemNode.parent,n.active=!0}),h.forEach(function(e){var t=e.getK(),i=e.getV(),n=cc.instantiate(u.tempItemNode);n.getComponent(g.default).initResource(t,i),n.parent=u.tempItemNode.parent,n.active=!0})},o([p({type:[cc.SpriteFrame]})],t.prototype,"occuSpriteFrameList",void 0),o([p({type:[cc.SpriteFrame]})],t.prototype,"winSpriteFrameList",void 0),t=o([u],t)}(s.default);i.default=m,cc._RF.pop()},{"../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/PkModel":"PkModel","../prefab/ItemPrefab":"ItemPrefab"}],PkView:[function(e,t,i){"use strict";cc._RF.push(t,"4e1ff09w+RLfYzJXw1oElLp","PkView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/DefaultConfig"),l=e("../config/ViewConfig"),d=e("../config/WordConfig"),f=e("../model/ItemInfoModel"),g=e("../model/PkModel"),h=e("../model/RoleInfoModel"),u=e("../network/SocketClient"),p=e("./PublicTipView"),m=cc._decorator,C=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeList=[],t.openList=[],t.xuanzhongList=[],t.spriteFrameList1=[],t.iconList=[],t.tabIndex=0,t.btnTabList=[],t.viewNodeList=[],t}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this);var i=c.DefaultConfig.getConfigById(169).value;for(var n in i)g.PkModel.Item_LeitaiLing=n,g.PkModel.Item_LeitaiLing_Max=i[n];this.btn_help=this.findChild(this.node,"btn_help"),this.btnOneKey=this.getChild(this.node,"view0/btnOneKey"),this.onAddEvent(this.btn_help,function(){s.default.instance.createView(l.default.gameView.PublicTipView,null,p.RuleType.TYPE_LEITAI)}),this.onAddEvent(this.btnOneKey,function(){t.checkCanPkTime()&&(g.PkModel.freetime<g.PkModel.TotalFreeTimes||f.default.getItemAmount(g.PkModel.Item_LeitaiLing)>0?u.default.s_challenge_fast():d.WordConfig.showWord(61555))});for(var o=0;o<2;o++)this.btnTabList[o]=this.getChild(this.node,"bgNode/btnTab"+o),this.btnTabList[o].active=!0,this.onAddEvent(this.btnTabList[o],this.onClickTab.bind(this,o)),this.viewNodeList[o]=this.getChild(this.node,"view"+o)},t.prototype.onEnable=function(){u.default.s_arena_info(),this.refreshTab()},t.prototype.onClickTab=function(e){this.tabIndex=e,this.refreshTab()},t.prototype.refreshTab=function(){for(var e=0;e<this.btnTabList.length;e++)this.tabIndex==e?(this.viewNodeList[e].active=!0,this.btnTabList[e].getChildByName("selNode").active=!0):(this.viewNodeList[e].active=!1,this.btnTabList[e].getChildByName("selNode").active=!1)},t.prototype.checkCanPkTime=function(){if(!(h.default.instance.bagRemainingnumber<=0))return a.default.now()-g.PkModel.lastPkTime>=1e3||void d.WordConfig.showWord(60327);d.WordConfig.showWord(60001)},o([_({type:[cc.SpriteFrame]})],t.prototype,"closeList",void 0),o([_({type:[cc.SpriteFrame]})],t.prototype,"openList",void 0),o([_({type:[cc.SpriteFrame]})],t.prototype,"xuanzhongList",void 0),o([_({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList1",void 0),o([_({type:[cc.SpriteFrame]})],t.prototype,"iconList",void 0),t=o([C],t)}(r.default);i.default=v,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/PkModel":"PkModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","./PublicTipView":"PublicTipView"}],PlayerInfoPreView:[function(e,t,i){"use strict";cc._RF.push(t,"2faafGBcVxNHoMTT/tMDRkO","PlayerInfoPreView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/Logger"),s=e("../../../engine/ProtoConfig"),r=e("../../../engine/ProtoUtils"),c=e("../../../engine/ResourcesManager"),l=e("../../../engine/SpriteFrameComponent"),d=e("../../../engine/UIManager"),f=e("../../../engine/ViewBase"),g=e("../../config/ChiXueMoJianConfig"),h=e("../../config/ColorConfig"),u=e("../../config/EquipConfig"),p=e("../../config/GameConst"),m=e("../../config/ITemsConfig"),C=e("../../config/JingJieConfig"),_=e("../../config/MagicNameConfig"),v=e("../../config/MapConfig"),y=e("../../config/MingYunZhiRenConfig"),b=e("../../config/ShenbingskillAllConfig"),I=e("../../config/ShihunfazhangConfig"),M=e("../../config/SkillConfig"),w=e("../../config/SpriteFrameConfig"),k=e("../../config/StarAbilityConfig"),S=e("../../config/ViewConfig"),P=e("../../config/WordConfig"),E=e("../../model/CostumeModel"),L=e("../../model/EquipGridModel"),T=e("../../model/ItemInfoModel"),R=e("../../model/JingJieModel"),N=e("../../model/MagicModel"),B=e("../../model/NewFeaturesModel"),A=e("../../model/RoleInfoModel"),G=e("../../model/ShenBinModel"),x=e("../../model/ShenBinSkillModel"),O=e("../../model/SkillModel"),V=e("../../network/SocketClient"),j=e("../../prefab/ItemPrefab"),D=cc._decorator,F=D.ccclass,H=D.property,U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemRrefabNode=null,t.txtRoleName=null,t.txtOccupation=null,t.txtLevel=null,t.txtFight=null,t.chenghaonode=null,t.chenghao=null,t.touxiang=null,t.touxiangkuang=null,t.txtHp=null,t.txtMp=null,t.txtAttack=null,t.txtMag=null,t.txtSpt=null,t.txtDef=null,t.txtAtSpeed=null,t.txtLucky=null,t.txtPvPAt=null,t.txtPvPDf=null,t.txtExp=null,t.txtBonusDamage=null,t.txtDamageReduction=null,t.txtBonusDamage_p=null,t.txtDamageReduction_p=null,t.txtHpDrain=null,t.txtMpDrain=null,t.txtMagic_find1=null,t.txtEquip_times=null,t.txtPet_atSpeed=null,t.txtPet_attack=null,t.txtPet_BonusDamage=null,t.txtIgnoreDefend=null,t.btnDownBase=null,t.property_teshu=null,t.btnUpBase=null,t.txtAllStrengh=null,t.txtMainStrengh=null,t.txtDefendStrengh=null,t.skillItemNode=null,t.txtJingJie_fanren=null,t.txtJingJie_lunhui=null,t.txtStarLevel=null,t.starItemNodePve=null,t.starItemNodePvP=null,t.shenbinNode=null,t.tejieNode=null,t.xinchenNode=null,t.equipTabIndex=0,t.gridOffest=100,t.skillItemList=[],t.starItemList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(e){V.default.s_get_hero_info(e)},t.prototype.onEnable=function(){var e=this;this.btnDownBase.active=!0,this.property_teshu.active=!1,this.onAddEvent(this.btnDownBase,function(){e.btnDownBase.active&&(e.btnDownBase.active=!1,e.property_teshu.active=!0)}),this.onAddEvent(this.btnUpBase,function(){e.property_teshu.active=!1,e.btnDownBase.active=!0})},t.prototype.onSocketRespMsg=function(e,t){try{if(e==s.ProtoConfig.c_get_hero_info){a.Logger.log("c_get_hero_info===",t);var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_hero_info,t),n=i.getPersonalize(),o=E.CostumeModel.proto2Personalize(n);this.refreshTiele(o),a.Logger.log("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u4e2a\u6027\u5316===");var c=i.getName(),l=i.getOccupation(),d=i.getLevel(),f=i.getFightinfo().getTotalfight();this.refreshBaseInfo(c,l,d,f);var g=N.default.proto2ModelList(i.getAllattrsList());this.refreshProperty(g),a.Logger.log("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u5c5e\u6027\u5217\u8868===",g);for(var h=i.getItemlistList(),u=[],m=0;m<h.length;m++){var _=h[m],y=T.default.proto2Model(_);u.push(y)}a.Logger.log("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u88c5\u5907\u5217\u8868===",u);var b=i.getBaguaStrengthlistList(),I=new Map;for(var M in b)if(Object.prototype.hasOwnProperty.call(b,M)){var w=b[M];I.set(w.getPos(),w.getLev())}this.refreshEquip(u),this.refreshBagua(u,I);var k=[],S=i.getStrengthlistList();for(m=0;m<S.length;m++){_=S[m];(y=new L.EquipGridModel).gridId=_.getPos(),y.strengthenNum=_.getLev(),k.push(y)}var P=L.EquipGridModel.getNowIntensifyLevelConfig(k),A=0;P&&(A=P.level);var O=0,V=0,j=i.getRefinelistList();a.Logger.log("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u5f3a\u5316\u7cbe\u70bc===",j);for(m=0;m<j.length;m++){(_=j[m]).getId()==p.GameConst.JINGLIAN.ATTACK?O=_.getLevel():_.getId()==p.GameConst.JINGLIAN.DEFENSE&&(V=_.getLevel())}this.refreshStrength(A,O,V,l);var D=[],F=i.getSkilllistList();a.Logger.log("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u6280\u80fd\u5217\u8868===",F);for(m=0;m<F.length;m++){var H=new W;H.skillId=F[m].getId(),H.skillLevel=F[m].getLevel(),D.push(H)}this.refreshSkill(D,l,g);var U=C.JingJieConfig.JingJieNameConfig[v.MapConfig.WORLD.FanRen-1][0],q=C.JingJieConfig.JingJieNameConfig[v.MapConfig.WORLD.LunHui-1][0],z=i.getRealminfoList();for(m=0;m<z.length;m++){var J=R.JingJieModel.proto2JingJieModel(z[m]),Y=C.JingJieConfig.JingJieNameConfig[J.jingJieId-1][J.level];if(J.jingJieId==v.MapConfig.WORLD.FanRen)U="<color=#FFFFFF>"+(Z=Y.split("\xb7"))[0]+"\xb7</c><color=#00ff00>"+Z[1]+"</color>";else if(J.jingJieId==v.MapConfig.WORLD.LunHui){var Z;q="<color=#FFFFFF>"+(Z=Y.split("\xb7"))[0]+"\xb7</c><color=#00ff00>"+Z[1]+"</color>"}}this.refreshJingJie(U,q);var K=i.getStartLevel(),X=new Array,Q=new Array;i.getSignlistList();for(var M in i.getSignlistList()){if(Object.prototype.hasOwnProperty.call(i.getSignlistList(),M))if(1==(w=i.getSignlistList()[M]).getType()){var $={id:w.getId(),lev:w.getLev(),time:0};X.push($)}else{$={id:w.getId(),lev:w.getLev(),time:0};Q.push($)}}a.Logger.log("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u661f\u5bbf\u7b49\u7ea7===",K,"\u661f\u5bbf\u5217\u8868===",X,i.getSignlistList()),B.NewFeaturesModel.instance.CheckBeAbleToOpen(1006)?(this.xinchenNode.active=!0,this.refreshStar(K,X,!1),this.refreshStar(K,Q,!0)):this.xinchenNode.active=!1;var ee=[],te=[],ie=i.getShenbinglistList();for(m=0;m<ie.length;m++){(oe=new G.ShenBinModel).shenbingId=ie[m].getNewid(),oe.shenbingType=ie[m].getShenbingtype(),ee[m]=oe}var ne=i.getShenbingskillsList();for(m=0;m<ne.length;m++){var oe;(oe=new x.default).id=ne[m].getNewid(),te[m]=oe}a.Logger.log("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u795e\u5175\u5217\u8868===",ee,"\u795e\u5175\u6280\u80fd\u5217\u8868===",te),ee.length>0?(this.shenbinNode.active=!0,this.refreshSuperWeapon(ee,te,g)):this.shenbinNode.active=!1,d>=60?(this.tejieNode.active=!0,this.refreshTeJie(u)):this.tejieNode.active=!1}}catch(t){a.Logger.error("\u67e5\u770b\u73a9\u5bb6\u4fe1\u606f===\u53cd\u5e8f\u5217\u62a5\u9519",e,t)}},t.prototype.refreshBaseInfo=function(e,t,i,n){this.txtRoleName.string=e,this.txtOccupation.string='<img src="'+t+'"/>'+p.GameConst.OccupationNameMap(t),this.txtLevel.string=i+"",this.txtFight.string=n+""},t.prototype.refreshProperty=function(e){this.txtHp.string=N.default.getMagicValueByList(_.MagicNameConfig.MagicId.hp,e)+"",this.txtMp.string=N.default.getMagicValueByList(_.MagicNameConfig.MagicId.mp,e)+"",this.txtAttack.string=N.default.getMagicValueByList(_.MagicNameConfig.MagicId.atk,e)+"",this.txtMag.string=N.default.getMagicValueByList(_.MagicNameConfig.MagicId.mag,e)+"",this.txtSpt.string=N.default.getMagicValueByList(_.MagicNameConfig.MagicId.spt,e)+"",this.txtDef.string=N.default.getMagicValueByList(_.MagicNameConfig.MagicId.def,e)+"",this.txtAtSpeed.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.speed,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.speed,e)/1e3)+"/s",this.txtLucky.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.lucky,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.lucky,e)),this.txtPvPAt.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.pvpIncrease_p,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.pvpIncrease_p,e)),this.txtPvPDf.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.pvpReduction_p,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.pvpReduction_p,e)),this.txtExp.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.EXP_p,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.EXP_p,e)),this.txtBonusDamage.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.BonusDamage,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.BonusDamage,e)),this.txtDamageReduction.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.DamageReduction,Math.ceil(N.default.getMagicValueByList(_.MagicNameConfig.MagicId.DamageReduction,e)*(1+N.default.getMagicValueByList(_.MagicNameConfig.MagicId.BonusDamageeffect_p,e)/1e4))),this.txtBonusDamage_p.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.BonusDamage_p,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.BonusDamage_p,e)),this.txtDamageReduction_p.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.DamageReduction_p,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.DamageReduction_p,e)),this.txtHpDrain.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.HpDrain,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.HpDrain,e)),this.txtMpDrain.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.MpDrain,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.MpDrain,e)),this.txtMagic_find1.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.magic_find1,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.magic_find1,e)),this.txtEquip_times.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.equip_times,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.equip_times,e)),this.txtPet_atSpeed.string=N.default.getMagicValueByList(_.MagicNameConfig.MagicId.petspeed,e)/1e3+1+"/s",this.txtPet_attack.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.petdamage,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.petdamage,e)),this.txtPet_BonusDamage.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.petdamage_p,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.petdamage_p,e)),this.txtIgnoreDefend.string=N.default.formatMagicValue(_.MagicNameConfig.MagicId.ignoredef_p,N.default.getMagicValueByList(_.MagicNameConfig.MagicId.ignoredef_p,e))},t.prototype.refreshEquip=function(e){var t=this;console.log("equipList =",e);for(var i=function(i){var o=n.getChild(n.node,"view/equip/view/content/equipment/btnEquipTab"+i);n.onAddEvent(o,function(){t.equipTabIndex=i,t.refreshEquip(e)}),n.equipTabIndex==i?o.getComponent(cc.Sprite).spriteFrame=o.getComponent(l.SpriteFrameComponent).spriteFrameList[0]:o.getComponent(cc.Sprite).spriteFrame=o.getComponent(l.SpriteFrameComponent).spriteFrameList[1]},n=this,o=0;o<2;o++)i(o);for(o=0;o<10;o++){var a=this.gridOffest*this.equipTabIndex+o+1,s=A.default.instance.getEquipModelByGrid(a,e),r=this.getChild(this.node,"view/equip/view/content/equipment/equip"+o);r.active=!1,s&&(r.active=!0,r.getComponent(j.default).init(s),this.onAddEvent(r,this.showEquipDetail.bind(this,s)))}},t.prototype.refreshBagua=function(e,t){for(var i=0;i<e.length;i++)if(e[i].gridId>=1011&&e[i].gridId<=1018){var n=m.ITemsConfig.getITemsConfigById(e[i].itemType);if(n.kind==p.GameConst.ITEM_KIND.BaGua){var o=this.getChild(this.node,"view/equip/view/content/bagua/content/"+e[i].gridId+"/node");o.removeAllChildren();var a=cc.instantiate(this.itemRrefabNode);a.getComponent(j.default).init(n,!0),a.parent=o,this.getChild(this.node,"view/equip/view/content/bagua/content/"+e[i].gridId+"/label").active=!1}}this.getChild(this.node,"view/equip/view/content/bagua/content").children.forEach(function(e){var i=t.get(Number(e.name))?"+"+t.get(Number(e.name)):"+0",n=e.getChildByName("numTxt").getComponent(cc.Label);n.node.active=!0,n.string=i})},t.prototype.refreshTiele=function(e){E.CostumeModel.setCostSF(this.chenghao,E.CostumeType.Title,e.title),E.CostumeModel.setCostSF(this.touxiang,E.CostumeType.Head,e.portrait),E.CostumeModel.setCostSF(this.touxiangkuang,E.CostumeType.HeadFM,e.portrait_skin)},t.prototype.refreshStrength=function(e,t,i,n){this.txtAllStrengh.string=P.WordConfig.getWord(60494)+e;var o="";n==p.GameConst.OCCUPATION.ZHAN_SHI?o=P.WordConfig.getWord(60447):n==p.GameConst.OCCUPATION.FA_SHI?o=P.WordConfig.getWord(60448):n==p.GameConst.OCCUPATION.DAO_SHI&&(o=P.WordConfig.getWord(60449)),this.txtMainStrengh.string=o+P.WordConfig.getWord(60497)+t,this.txtDefendStrengh.string=P.WordConfig.getWord(60498)+i},t.prototype.refreshSkill=function(e,t,i){this.skillItemNode.active=!1;for(var n=0;n<this.skillItemList.length;n++)this.skillItemList[n].active=!1;for(n=0;n<e.length;n++){var o=void 0,a=M.SkillConfig.getSkillConfigById(e[n].skillId,1);this.skillItemList[n]?o=this.skillItemList[n]:((o=cc.instantiate(this.skillItemNode)).parent=this.skillItemNode.parent,this.skillItemList[n]=o),o.active=!0,o.getChildByName("txtName").getComponent(cc.Label).string=a.name,o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=w.SpriteFrameConfig.skill_frame.get("skillIcon/"+a.next_level);var s=o.getChildByName("txtLevel").getComponent(cc.Label);if(s.string=P.WordConfig.getWord(60674),s.node.color=h.ColorConfig.RedColor,e[n].skillLevel>0){O.SkillModel.getExtLevel(A.default.instance.attrList,A.default.instance.occupation,e[n].skillId);var r=e[n].skillLevel>=a.maxlevel?a.maxlevel:e[n].skillLevel;s.string="lv"+r,s.node.color=h.ColorConfig.GreenColor}}},t.prototype.refreshJingJie=function(e,t){this.txtJingJie_fanren.string=e,this.txtJingJie_lunhui.string=t},t.prototype.refreshStar=function(e,t,i){this.txtStarLevel.string=cc.js.formatStr(P.WordConfig.getWord(60675),e);var n=i?this.starItemNodePvP:this.starItemNodePve;n.active=!1;for(var o=n.parent,a=t.length>o.childrenCount?t.length:o.childrenCount,s=0;s<a;s++){if(!t[s])return;var r=k.default.getConfig(t[s].id,t[s].lev),l=void 0;s<o.childrenCount?l=o.children[s]:(l=cc.instantiate(n)).parent=o,l.active=!0;var d=cc.js.formatStr("starXiu/img_star_icon_%s",t[s].id),f=l.getChildByName("icon");c.default.instance.loadSprite(f.getComponent(cc.Sprite),d,!0);var g=cc.js.formatStr("starXiu/img_star_level_quality_0%s",r.quality),h=cc.js.formatStr("starXiu/img_star_big_quality_0%s",r.quality);r.quality>0&&(c.default.instance.loadSprite(l.getChildByName("quality").getComponent(cc.Sprite),g,!0),c.default.instance.loadSprite(l.getComponent(cc.Sprite),h,!0)),l.getChildByName("txtName").getComponent(cc.Label).string=r.name;var u=cc.js.formatStr("starXiu/img_star_level_0%s",t[s].lev);c.default.instance.loadSprite(l.getChildByName("quality").getChildByName("star_level").getComponent(cc.Sprite),u,!0)}},t.prototype.refreshSuperWeapon=function(e,t,i){console.log("refreshSuperWeapon attrList = ",i);var n=0;i.forEach(function(e){41==e.magicId&&(n=e.magicValue)});for(var o=0;o<e.length;o++){var a=void 0;this.shenbinNode.children[e[o].shenbingType].active=!0,e[o].shenbingType==G.ShenBinModel.CHIXUEMOJIAN?a=g.ChiXueMoJianConfig.getChixuemojianConfigById(e[o].shenbingId):e[o].shenbingType==G.ShenBinModel.MINGYUNZHIREN?a=y.MingYunZhiRenConfig.getConfigById(e[o].shenbingId):e[o].shenbingType==G.ShenBinModel.SHIHUNFAZHANG&&(a=I.ShihunfazhangConfig.getConfigById(e[o].shenbingId)),this.shenbinNode.children[e[o].shenbingType].getChildByName("weapenLevel").getComponent(cc.Label).string="lv"+a.level+" "+P.WordConfig.getWord(60675+Number(e[o].shenbingType));for(var s=0;s<t.length;s++){if((l=b.ShenbingskillAllConfig.getSkillConfigById(t[s].id)).shenbing==e[o].shenbingType){for(var r="",c=0;c<l.name.length;c++)r+=l.name[c];e[o].shenbingType==G.ShenBinModel.SHIHUNFAZHANG&&(n-=l.level),e[o].shenbingType==G.ShenBinModel.SHIHUNFAZHANG&&n>0?(this.shenbinNode.children[e[o].shenbingType].getChildByName("skillLevel").getComponent(cc.Label).string="lv"+l.level+"+"+n+" "+r,n=0):this.shenbinNode.children[e[o].shenbingType].getChildByName("skillLevel").getComponent(cc.Label).string="lv"+l.level+" "+r}}}if(n>0){var l=b.ShenbingskillAllConfig.getSkillConfigById(2001);this.shenbinNode.children[G.ShenBinModel.SHIHUNFAZHANG].getChildByName("skillLevel").getComponent(cc.Label).string="lv0+"+n+" "+l.name[0]}},t.prototype.refreshTeJie=function(e){for(var t=0;t<e.length;t++){var i=u.EquipConfig.getEquipConfigById(e[t].itemType);if(i&&1003==i.cid){var n=this.tejieNode.getChildByName("tejieNode"+e[t].gridId);n.active=!0,n.getComponent(j.default).init(e[t],!0),this.onAddEvent(n,this.showEquipDetail.bind(this,e[t]))}}},t.prototype.showEquipDetail=function(e){d.default.instance.createView(S.default.gameView.equipInfo,null,e,1)},o([H({type:cc.Prefab})],t.prototype,"itemRrefabNode",void 0),o([H({type:cc.Label})],t.prototype,"txtRoleName",void 0),o([H({type:cc.RichText})],t.prototype,"txtOccupation",void 0),o([H({type:cc.Label})],t.prototype,"txtLevel",void 0),o([H({type:cc.Label})],t.prototype,"txtFight",void 0),o([H(cc.Node)],t.prototype,"chenghaonode",void 0),o([H(cc.Sprite)],t.prototype,"chenghao",void 0),o([H(cc.Sprite)],t.prototype,"touxiang",void 0),o([H(cc.Sprite)],t.prototype,"touxiangkuang",void 0),o([H({type:cc.Label})],t.prototype,"txtHp",void 0),o([H({type:cc.Label})],t.prototype,"txtMp",void 0),o([H({type:cc.Label})],t.prototype,"txtAttack",void 0),o([H({type:cc.Label})],t.prototype,"txtMag",void 0),o([H({type:cc.Label})],t.prototype,"txtSpt",void 0),o([H({type:cc.Label})],t.prototype,"txtDef",void 0),o([H({type:cc.Label})],t.prototype,"txtAtSpeed",void 0),o([H({type:cc.Label})],t.prototype,"txtLucky",void 0),o([H({type:cc.Label})],t.prototype,"txtPvPAt",void 0),o([H({type:cc.Label})],t.prototype,"txtPvPDf",void 0),o([H({type:cc.Label})],t.prototype,"txtExp",void 0),o([H({type:cc.Label})],t.prototype,"txtBonusDamage",void 0),o([H({type:cc.Label})],t.prototype,"txtDamageReduction",void 0),o([H({type:cc.Label})],t.prototype,"txtBonusDamage_p",void 0),o([H({type:cc.Label})],t.prototype,"txtDamageReduction_p",void 0),o([H({type:cc.Label})],t.prototype,"txtHpDrain",void 0),o([H({type:cc.Label})],t.prototype,"txtMpDrain",void 0),o([H({type:cc.Label})],t.prototype,"txtMagic_find1",void 0),o([H({type:cc.Label})],t.prototype,"txtEquip_times",void 0),o([H({type:cc.Label})],t.prototype,"txtPet_atSpeed",void 0),o([H({type:cc.Label})],t.prototype,"txtPet_attack",void 0),o([H({type:cc.Label})],t.prototype,"txtPet_BonusDamage",void 0),o([H({type:cc.Label})],t.prototype,"txtIgnoreDefend",void 0),o([H({type:cc.Node})],t.prototype,"btnDownBase",void 0),o([H({type:cc.Node})],t.prototype,"property_teshu",void 0),o([H({type:cc.Node})],t.prototype,"btnUpBase",void 0),o([H({type:cc.Label})],t.prototype,"txtAllStrengh",void 0),o([H({type:cc.Label})],t.prototype,"txtMainStrengh",void 0),o([H({type:cc.Label})],t.prototype,"txtDefendStrengh",void 0),o([H({type:cc.Node})],t.prototype,"skillItemNode",void 0),o([H({type:cc.RichText})],t.prototype,"txtJingJie_fanren",void 0),o([H({type:cc.RichText})],t.prototype,"txtJingJie_lunhui",void 0),o([H({type:cc.Label})],t.prototype,"txtStarLevel",void 0),o([H({type:cc.Node})],t.prototype,"starItemNodePve",void 0),o([H({type:cc.Node})],t.prototype,"starItemNodePvP",void 0),o([H({type:cc.Node})],t.prototype,"shenbinNode",void 0),o([H({type:cc.Node})],t.prototype,"tejieNode",void 0),o([H({type:cc.Node})],t.prototype,"xinchenNode",void 0),t=o([F],t)}(f.default);i.PlayerInfoPreView=U;var W=function(){return function(){}}();cc._RF.pop()},{"../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChiXueMoJianConfig":"ChiXueMoJianConfig","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/JingJieConfig":"JingJieConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/MapConfig":"MapConfig","../../config/MingYunZhiRenConfig":"MingYunZhiRenConfig","../../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../../config/ShihunfazhangConfig":"ShihunfazhangConfig","../../config/SkillConfig":"SkillConfig","../../config/SpriteFrameConfig":"SpriteFrameConfig","../../config/StarAbilityConfig":"StarAbilityConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/CostumeModel":"CostumeModel","../../model/EquipGridModel":"EquipGridModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/JingJieModel":"JingJieModel","../../model/MagicModel":"MagicModel","../../model/NewFeaturesModel":"NewFeaturesModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ShenBinModel":"ShenBinModel","../../model/ShenBinSkillModel":"ShenBinSkillModel","../../model/SkillModel":"SkillModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],PlayerNameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ddeda25kU9GgboxRIZcoESj","PlayerNameConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},t.getConfigById=function(e){return this.configMap.get(e)},t.Config_Name="PlayerNameConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],PostConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2d188dGHWxLdpwAlshMy7xK","PostConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.postId=e.postId,i.des=e.des,i.title=e.title,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.postId=parseInt(i),t.configMap.set(n.postId,n)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.postId&&(t=i)}),t},t.Config_Name="mailConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],PostModel:[function(e,t,i){"use strict";cc._RF.push(t,"ef554PGk6VKsY+YSpxENn1B","PostModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("../event/CommonEvent"),a=e("../../engine/EventManager"),s=e("../manager/RedPointManager"),r=e("../../engine/ProtoConfig"),c=function(){return function(){}}();i.Post_mail_configParam_list=c;var l,d=function(){return function(){}}();i.PostGiftModel=d,function(e){e[e.HRead=1]="HRead",e[e.NRead=-1]="NRead"}(l=i.IRead||(i.IRead={}));var f=function(){function e(){this.eventIdList=[],this.protos=[],this.resList=[],this.items=[],this.rechargeList=[],this.postList=[],this.eventIdList=[s.RedPointId.Mail],this.protos=[r.ProtoConfig.c_seq_get_mail],s.default.getInstance().addHandler(this)}return e.prototype.checkRedPoint=function(){var t=[],i=!e.getHadAllRead(),n={id:s.RedPointId.Mail,type:s.RedPointType.Default,show:i};return t.push(n),t},e.getHadAllRead=function(){for(var t=0;t<this.modelList.length;t++){if(e.modelList[t].YiDu==l.NRead)return!1}return!0},e.onReFreshContent=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t],n=e.getMailid();if(i.id==n){i.YiDu=l.HRead;break}}a.EventManager.instance.dispatch(o.CommonEvent.Event_Refresh_Post,1)},e.sort=function(){e.modelList.sort(function(e,t){return e.YiDu==l.HRead&&t.YiDu==l.HRead?t.receiveDate-e.receiveDate:e.YiDu==l.HRead&&t.YiDu!=l.HRead?1:e.YiDu!=l.HRead&&t.YiDu==l.HRead?-1:t.receiveDate-e.receiveDate})},e.proto2ModelList=function(t){var i=t.getMailInfoListList();n.Logger.log("c_seq_get_mail=====",t,i,i.length),this.modelList=[];for(var s=0;s<i.length;s++){var r=new e;r.id=i[s].getId(),r.title=i[s].getTitle(),r.detail=i[s].getDetail(),r.receiveDate=1e3*i[s].getReceivedate(),r.configId=i[s].getConfigid();var l=i[s].getResourcelistList();r.resList=[];for(var f=0;f<l.length;f++){(m=new d).type=l[f].getType(),m.num=l[f].getNum(),r.resList.push(m)}var g=i[s].getItemlistList();r.items=[];for(var h=0;h<g.length;h++){(m=new d).type=g[h].getType(),m.num=g[h].getNum(),r.items.push(m)}var u=i[s].getRechargelistList();r.rechargeList=[];for(var p=0;p<u.length;p++){var m;(m=new d).type=u[p].getShopid(),m.num=u[p].getMoney(),r.rechargeList.push(m)}var C=i[s].getConfigparamList();r.postList=[];for(var _=0;_<C.length;_++){var v=new c;v.paramIndex=C[_].getParamindex(),v.paramValue=C[_].getParamvalue(),r.postList.push(v)}r.postList.sort(function(e,t){return e.paramIndex-t.paramIndex}),r.YiDu=i[s].getIsread(),this.modelList[s]=r}this.sort(),a.EventManager.instance.dispatch(o.CommonEvent.Event_Refresh_Post,1)},e.modelList=[],e}();i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],PostPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"1d7e2sS2Y9PhLtGz8xk8eGl","PostPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.txtDate=this.node.getChildByName("txtDate").getComponent(cc.Label),this.txtNotice=this.node.getChildByName("txtNotice").getComponent(cc.Label),this.img_youjian=this.node.getChildByName("img_youjian"),this.img_youjian_h=this.node.getChildByName("img_youjian_h"),this.helpGift=this.node.getChildByName("helpGiftF"),this.refreshPost()},t.prototype.refreshPost=function(){},t=o([r],t)}(a.default));i.default=c,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase"}],PostView:[function(e,t,i){"use strict";cc._RF.push(t,"ed473BcqvJBJqW4aba9O26R","PostView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ProtoConfig"),l=e("../../engine/ProtoUtils"),d=e("../../engine/UIManager"),f=e("../../engine/ViewBase"),g=e("../config/ChongZhiConfig"),h=e("../config/ColorConfig"),u=e("../config/EquipConfig"),p=e("../config/GameConst"),m=e("../config/ITemsConfig"),C=e("../config/PostConfig"),_=e("../config/ViewConfig"),v=e("../config/WordConfig"),y=e("../event/CommonEvent"),b=e("../mine/MineTipView"),I=e("../model/ChatRoomModel"),M=e("../model/ItemInfoModel"),w=e("../model/MineModel"),k=e("../model/PostModel"),S=e("../model/RoleInfoModel"),P=e("../network/SocketClient"),E=e("../prefab/ItemPrefab"),L=cc._decorator,T=L.ccclass,R=(L.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tempList=[],t.itemList=[],t.rechargeList=[],t.postMap=new Map,t}return n(t,e),t.prototype.onShow=function(){this.btnClose=this.getChild(this.node,"post/btnClose"),this.post=this.getChild(this.node,"post"),this.post1=this.getChild(this.node,"post1"),this.btn_shanchuyidu=this.post.getChildByName("btn_shanchuyidu"),this.btn_yijianlingqu=this.post.getChildByName("btn_yijianlingqu"),this.txtContent1=this.getChild(this.post1,"scrollView/view/content/txtContent"),this.content1=this.getChild(this.post1,"scrollView/view/content"),this.chongzhikuan=this.getChild(this.content1,"itemNode/chongzhikuan"),this.btnRecaptureAward=this.post1.getChildByName("btnRecaptureAward"),this.btnHelp=this.post1.getChildByName("btnHelp"),this.btnRecaptureMine=this.post1.getChildByName("btnRecaptureMine"),this.btnRecaptureAward.active=!1,this.btnHelp.active=!1,this.btnRecaptureMine.active=!1,this.post.active=!0,this.post1.active=!1,this.curPostModel=null,this.chongzhikuan.active=!1,this.onAddEvent(this.btnClose,this.onClickClose.bind(this));var e=this.node.getChildByName("dark");this.onAddEvent(e,this.onClickDark.bind(this)),this.refreshList()},t.prototype.onClickDark=function(){1==this.post1.active?(this.post1.active=!1,this.curPostModel=null,this.post.active=!0):this.closeView()},t.prototype.onEnable=function(){var e=this;k.default.sort(),s.EventManager.instance.on(y.CommonEvent.Event_Refresh_Post,function(){e.refreshList(),e.curPostModel&&e.onClickEnter(e.curPostModel)},this)},t.prototype.onClickClose=function(){this.closeView(),this.refreshList()},t.prototype.refreshList=function(){var e=this.findChild(this.post,"scrollView/view/content/postItem");e.active=!1;for(var t=0;t<this.tempList.length;t++)this.tempList[t].destroy();this.tempList=[];for(var i=0;i<k.default.modelList.length;i++){var n=void 0,o=k.default.modelList[i];(n=cc.instantiate(e)).parent=e.parent,n.active=!0;var s=n.getChildByName("txtDate").getComponent(cc.Label),c=n.getChildByName("txtNotice").getComponent(cc.Label);s.string=a.default.formatDateStr(o.receiveDate);var l=C.default.getConfigById(o.configId);r.Logger.log("refreshList===",o.configId,l,o),o.configId<=0?c.string=o.title:9999==o.configId?c.string=o.title:c.string=l.title,this.tempList.push(n);var d=n.getChildByName("img_youjian"),f=n.getChildByName("img_youjian_h");o.YiDu==k.IRead.NRead?(f.active=!1,d.active=!0):(f.active=!0,d.active=!1),this.onAddEvent(n,this.onClickEnter.bind(this,o,n))}this.onAddEvent(this.btn_yijianlingqu,this.onAllGet.bind(this)),this.onAddEvent(this.btn_shanchuyidu,this.onDelete.bind(this))},t.prototype.onDelete=function(){P.default.s_seq_delete_mail(parseInt(S.default.instance.roleId)),0==k.default.modelList.length&&v.WordConfig.showWord(60328),this.refreshList()},t.prototype.onAllGet=function(){S.default.instance.bagRemainingnumber<=0?v.WordConfig.showWord(60329):(P.default.s_seq_get_all_content(S.default.instance.bagRemainingnumber),this.refreshList())},t.prototype.onClickEnter=function(e){var t=this;this.curPostModel=e,this.chongzhikuan.active=!1,this.post.active=!1,this.post1.active=!0,this.btnRecaptureAward.active=!1,this.btnRecaptureMine.active=!1,this.btnHelp.active=!1;var i=this.post1.getChildByName("txtNotice").getComponent(cc.Label),n=this.post1.getChildByName("txtDate").getComponent(cc.Label),o=this.post1.getChildByName("btnClose");this.onAddEvent(o,function(){t.post1.active=!1,t.curPostModel=null,t.post.active=!0,t.refreshList(),t.curPostModel=null});var c,l=C.default.getConfigById(e.configId);if(l&&(i.string=l.title,c=C.default.getConfigById(e.configId).des),r.Logger.log("onClickEnter===============",this.curPostModel),e.configId<=0)c=e.detail,i.string=e.title;else if(9999==e.configId)c=e.detail,i.string=e.title;else if(136==e.configId)s.EventManager.instance.on("mine_"+e.postList[2].paramValue,this.handlerReport,this),P.default.s_mine_report_state(parseInt(e.postList[2].paramValue)),P.default.s_mine_battle_report(),this.btnRecaptureAward.active=!0,this.btnRecaptureAward.x=0,this.btnHelp.active=!1,c=cc.js.formatStr(c,e.postList[0].paramValue,e.postList[1].paramValue),this.onAddEvent(this.btnRecaptureAward,function(){t.mineReportData&&1==t.mineReportData.state&&P.default.s_mine_retake(t.mineReportData.reportId)}),this.onAddEvent(this.btnHelp,function(){if(t.mineReportData&&1==t.mineReportData.state){var e={type:"mine",desc:cc.js.formatStr(v.WordConfig.getWord(61733),t.mineReportData.name,t.mineReportData.level,t.mineReportData.fight),data:t.mineReportData.reportId,roleId:S.default.instance.roleId,beRoleId:t.mineReportData.roleId};I.ChatRoomModel.proto2_s_send_world(2,"mine",JSON.stringify(e))}});else if(137==e.configId)c=cc.js.formatStr(c,e.postList[0].paramValue),s.EventManager.instance.on("mine_"+e.postList[1].paramValue,this.handlerReport,this),P.default.s_mine_report_state(parseInt(e.postList[1].paramValue)),P.default.s_mine_battle_report(),this.btnRecaptureMine.active=!0,this.onAddEvent(this.btnRecaptureMine,function(){t.mineReportData&&1==t.mineReportData.state&&P.default.s_mine_rob(t.mineReportData.mineId)});else if(138==e.configId)c=cc.js.formatStr(c,e.postList[0].paramValue);else for(var d=0;d<e.postList.length;d++){i.string=l.title;var f=e.postList[d],_=f.paramValue.split("*"),y=f.paramValue,w=[v.WordConfig.getWord(60469),v.WordConfig.getWord(60470),v.WordConfig.getWord(60471),v.WordConfig.getWord(60472)];if(_.length>1)y=m.ITemsConfig.getITemsConfigById(_[0]).name,y="<color="+h.ColorConfig.getQualityHexColor(m.ITemsConfig.getITemsConfigById(_[0]).quality)+">"+y+"*"+_[1]+"</color>";else if(e.configId<=6)if(1==d&&e.postList.length>2)y="<color="+h.ColorConfig.getColor(parseInt(f.paramValue)-2)+">"+b.default.getNameListByIndex(parseInt(f.paramValue))+"</color>";else if(0==d&&e.postList.length>2)y="<color="+h.ColorConfig.getColor(w.indexOf(f.paramValue))+">"+f.paramValue+"</color>";else if(3==d||2==d||7==e.postList.length&&6==d||9==e.postList.length&&6==d)y="<color=#FFD87F>"+f.paramValue+"</color>";else if(9!=e.postList.length&&7!=e.postList.length||5!=d){if(6==e.postList.length&&4==d||9==e.postList.length&&7==d){var L=Math.floor(parseInt(f.paramValue)/60/60),T=Math.floor((parseInt(f.paramValue)-60*L*60)/60);y="<color=#00ff00>"+L+v.WordConfig.getWord(60473)+T+v.WordConfig.getWord(60474)+"</color>"}}else y="<color="+h.ColorConfig.getRoleColor1(parseInt(f.paramValue))+">"+p.GameConst.OccupationNameMap(parseInt(f.paramValue))+"</color>";else y=1!=d&&0!=d||2!=e.postList.length?"<color=#FFD87F>"+f.paramValue+"</color>":"<color=#FF6C00>"+f.paramValue+"</color>";c=c.replace("[#"+f.paramIndex+"]",y+"")}this.txtContent1.getComponent(cc.RichText).string=c,n.string=a.default.formatDateStr(e.receiveDate);var R=this.post1.getChildByName("btn_lingqu"),N=this.post1.getChildByName("img_yilingqu"),B=this.content1.getChildByName("itemNode").getChildByName("ItemPrefab"),A=this.content1.getChildByName("txtWupin");B.active=!1,A.active=!0,R.active=!0,N.active=!1,0==e.resList.length&&0==e.rechargeList.length&&0==e.items.length?(R.active=!1,N.active=!1,A.active=!1,e.YiDu==k.IRead.HRead?(R.active=!1,A.active=!1):P.default.s_seq_read_mail(e.id),this.refreshList()):e.YiDu==k.IRead.NRead?(R.active=!0,N.active=!1,A.active=!0):(R.active=!1,N.active=!0);for(var G=0;G<this.itemList.length;G++)this.itemList[G].destroy();if(this.itemList=[],0!=e.items.length)for(var x=0;x<e.items.length;x++){var O=e.items[x],V=void 0,j=m.ITemsConfig.getITemsConfigById(O.type),D=void 0;if(j)D=M.default.create(p.GameConst.ITEM_KIND.ITEM,O.type,O.num,j.quality);else D=u.EquipConfig.getEquipConfigById(O.type).dingzhi?M.default.createDingZhiEquip(O.type):M.default.create(p.GameConst.ITEM_KIND.EQUIP,O.type);(V=cc.instantiate(B)).getComponent(E.default).init(D,!0),V.parent=B.parent,V.active=!0,this.itemList.push(V)}if(0!=e.resList.length)for(d=0;d<e.resList.length;d++){var F=void 0,H=e.resList[d];F=cc.instantiate(B),r.Logger.log("lj=======",e.resList,H),F.getComponent(E.default).initResource(parseInt(H.type),H.num),F.parent=B.parent,F.active=!0,this.itemList.push(F)}for(G=0;G<this.rechargeList.length;G++)this.rechargeList[G].destroy();if(this.rechargeList=[],0!=e.rechargeList.length)for(var U=0;U<e.rechargeList.length;U++){var W=e.rechargeList[U],q=void 0;(q=cc.instantiate(this.chongzhikuan)).parent=this.chongzhikuan.parent,q.active=!0;var z=g.ChongZhiConfig.getConfigById(parseInt(W.type));q.getChildByName("txtChongzhi").getComponent(cc.Label).string=z.name,this.rechargeList.push(q)}this.onAddEvent(R,function(){S.default.instance.bagRemainingnumber<=0?v.WordConfig.showWord(60329):P.default.s_seq_read_mail(e.id)})},t.prototype.onSocketRespMsg=function(e,t){if(e==c.ProtoConfig.c_mine_retake){var i=(r=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_mine_retake,t)).getRet(),n=r.getReportId(),o=r.getType();if(0==i&&1==o){var a=w.default.getReportById(n);if(a){var s=w.default.createMineData(a);d.default.instance.createView(_.default.gameView.MineFightView,null,s,w.MineReportType.Retake),this.closeView()}else v.WordConfig.showWord(61742)}}else if(e==c.ProtoConfig.c_mine_rob){var r;i=(r=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_mine_plunder,t)).getRet(),r.getMineId();if(0==i)(s=w.default.getReportById(this.mineReportData.reportId))?(d.default.instance.createView(_.default.gameView.MineFightView,null,s,w.MineReportType.Occupy),this.closeView()):v.WordConfig.showWord(61742)}},t.prototype.handlerReport=function(e){this.mineReportData=e,1!=this.mineReportData.state&&(this.btnRecaptureAward.color=h.ColorConfig.hexToColor("#434343"),this.btnRecaptureMine.color=h.ColorConfig.hexToColor("#434343"),this.btnHelp.color=h.ColorConfig.hexToColor("#434343"))},t=o([T],t)}(f.default));i.default=R,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/PostConfig":"PostConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../mine/MineTipView":"MineTipView","../model/ChatRoomModel":"ChatRoomModel","../model/ItemInfoModel":"ItemInfoModel","../model/MineModel":"MineModel","../model/PostModel":"PostModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],PowerRank:[function(e,t,i){"use strict";cc._RF.push(t,"e8c339aUBVDpr4WnigRBQVv","PowerRank");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../utils/MusicHelper"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../config/GameConst"),l=e("../../network/SocketClient"),d=e("../../event/CommonEvent"),f=e("../../../engine/EventManager"),g=e("./FightRankModel"),h=e("../../model/RoleInfoModel"),u=e("../../model/FightModel"),p=e("../../model/ServerTime"),m=e("../../../engine/ViewBase"),C=e("../../utils/UIHelper"),_=e("../PublicTipView"),v=e("../../model/CostumeModel"),y=cc._decorator,b=y.ccclass,I=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currSelet=0,t.itemList=[],t}return n(t,e),t.prototype.onInitChild=function(){if(this.btn_help=this.findChild(this.node,"bg/top/btn_help"),this.btn_close=this.findChild(this.node,"bg/top/btn_close"),this.tab_zhanshi=this.findChild(this.node,"bg/top/tab/tab_zhanshi"),this.tab_fashi=this.findChild(this.node,"bg/top/tab/tab_fashi"),this.tab_daoshi=this.findChild(this.node,"bg/top/tab/tab_daoshi"),this.itemTop1=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop1"),this.itemTop1.active=!1,this.itemTop2=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop2"),this.itemTop2.active=!1,this.itemTop3=this.findChild(this.node,"bg/middle/scrollView/view/content/itemTop3"),this.itemTop3.active=!1,this.itemOther=this.findChild(this.node,"bg/middle/scrollView/view/content/itemOther"),this.itemOther.active=!1,this.itemList.length<=0){this.itemList.push(this.itemTop1),this.itemList.push(this.itemTop2),this.itemList.push(this.itemTop3);for(var e=0;e<97;e++){var t=cc.instantiate(this.itemOther);t.parent=this.itemOther.parent,this.itemList.push(t)}}this.myRank=this.findChild(this.node,"bg/myRank"),this.onAddEvent(this.btn_close,this.closeView.bind(this)),this.onAddEvent(this.btn_help,this.onClickHelp.bind(this)),this.onAddEvent(this.tab_zhanshi,this.onClickZhanShi.bind(this)),this.onAddEvent(this.tab_fashi,this.onClickFaShi.bind(this)),this.onAddEvent(this.tab_daoshi,this.onClickDaoShi.bind(this)),f.EventManager.instance.on(d.CommonEvent.Event_Refresh_PowerRank,this.refreshRankByServer,this),this.currSelet=c.GameConst.OCCUPATION.ZHAN_SHI,this.refreshTab()},t.prototype.onClickHelp=function(){s.default.instance.createView(r.default.gameView.RankRuleView,null,_.RuleType.TYPE_POWER)},t.prototype.onClickZhanShi=function(){this.currSelet=c.GameConst.OCCUPATION.ZHAN_SHI,this.refreshTab()},t.prototype.onClickFaShi=function(){this.currSelet=c.GameConst.OCCUPATION.FA_SHI,this.refreshTab()},t.prototype.onClickDaoShi=function(){this.currSelet=c.GameConst.OCCUPATION.DAO_SHI,this.refreshTab()},t.prototype.refreshTab=function(){this.findChild(this.tab_zhanshi,"1").active=!1,this.findChild(this.tab_fashi,"1").active=!1,this.findChild(this.tab_daoshi,"1").active=!1,this.currSelet==c.GameConst.OCCUPATION.ZHAN_SHI?this.findChild(this.tab_zhanshi,"1").active=!0:this.currSelet==c.GameConst.OCCUPATION.FA_SHI?this.findChild(this.tab_fashi,"1").active=!0:this.currSelet==c.GameConst.OCCUPATION.DAO_SHI&&(this.findChild(this.tab_daoshi,"1").active=!0),this.refreshRank()},t.prototype.refreshRank=function(){for(var e=g.default.modelList,t=[],i=!1,n=0;n<e.length;n++){if(e[n].prof==this.currSelet)t=e[n].rankList,Math.floor(p.ServerTime.getServerTime()/1e3-e[n].refreshTime)>=10&&(i=!0)}t.length>0&&!i?this.refreshRankByServer():l.default.s_fight_rank(this.currSelet)},t.prototype.refreshRankByServer=function(){for(var e=g.default.modelList,t=0;t<this.itemList.length;t++)this.itemList[t].active=!1;for(t=0;t<e.length;t++)if(e[t].prof==this.currSelet){for(var i=e[t].rankList,n=0;n<i.length;n++)0==n?(this.itemTop1.active=!0,this.itemTop1.getChildByName("roleName").getComponent(cc.Label).string=i[n].heroName,this.onAddEvent(this.itemTop1.getChildByName("roleName"),C.UIHelper.showPlayerDetail.bind(this,i[n].heroId)),this.itemTop1.getChildByName("rolePower").getComponent(cc.Label).string=i[n].fight+"",v.CostumeModel.setCostSF(this.itemTop1.getChildByName("touxiang").getComponent(cc.Sprite),v.CostumeType.Head,i[n].personalize.portrait),v.CostumeModel.setCostSF(this.itemTop1.getChildByName("touxiangkuang").getComponent(cc.Sprite),v.CostumeType.HeadFM,i[n].personalize.portrait_skin)):1==n?(this.itemTop2.active=!0,this.itemTop2.getChildByName("roleName").getComponent(cc.Label).string=i[n].heroName,this.onAddEvent(this.itemTop2.getChildByName("roleName"),C.UIHelper.showPlayerDetail.bind(this,i[n].heroId)),this.itemTop2.getChildByName("rolePower").getComponent(cc.Label).string=i[n].fight+"",v.CostumeModel.setCostSF(this.itemTop2.getChildByName("touxiang").getComponent(cc.Sprite),v.CostumeType.Head,i[n].personalize.portrait),v.CostumeModel.setCostSF(this.itemTop2.getChildByName("touxiangkuang").getComponent(cc.Sprite),v.CostumeType.HeadFM,i[n].personalize.portrait_skin)):2==n?(this.itemTop3.active=!0,this.itemTop3.getChildByName("roleName").getComponent(cc.Label).string=i[n].heroName,this.onAddEvent(this.itemTop3.getChildByName("roleName"),C.UIHelper.showPlayerDetail.bind(this,i[n].heroId)),this.itemTop3.getChildByName("rolePower").getComponent(cc.Label).string=i[n].fight+"",v.CostumeModel.setCostSF(this.itemTop3.getChildByName("touxiang").getComponent(cc.Sprite),v.CostumeType.Head,i[n].personalize.portrait),v.CostumeModel.setCostSF(this.itemTop3.getChildByName("touxiangkuang").getComponent(cc.Sprite),v.CostumeType.HeadFM,i[n].personalize.portrait_skin)):(this.itemList[n].getChildByName("order").getComponent(cc.Label).string=n+1+"",this.onAddEvent(this.itemList[n].getChildByName("roleName"),C.UIHelper.showPlayerDetail.bind(this,i[n].heroId)),this.itemList[n].getChildByName("roleName").getComponent(cc.Label).string=i[n].heroName,this.itemList[n].getChildByName("rolePower").getComponent(cc.Label).string=i[n].fight+"",this.itemList[n].active=!0,v.CostumeModel.setCostSF(this.itemList[n].getChildByName("touxiang").getComponent(cc.Sprite),v.CostumeType.Head,i[n].personalize.portrait),v.CostumeModel.setCostSF(this.itemList[n].getChildByName("touxiangkuang").getComponent(cc.Sprite),v.CostumeType.HeadFM,i[n].personalize.portrait_skin));for(var o=-1,a=0;a<i.length;a++)i[a].heroId==Number(h.default.instance.roleId)&&(o=a+1);o>0?(this.myRank.getChildByName("wei").active=!1,this.myRank.getChildByName("order").active=!0,this.myRank.getChildByName("order").getComponent(cc.Label).string=o+""):(this.myRank.getChildByName("wei").active=!0,this.myRank.getChildByName("order").active=!1),this.myRank.getChildByName("roleName").getComponent(cc.Label).string=h.default.instance.roleName,this.myRank.getChildByName("rolePower").getComponent(cc.Label).string=u.default.totalFight+"",v.CostumeModel.setCostSF(this.myRank.getChildByName("touxiang").getComponent(cc.Sprite),v.CostumeType.Head),v.CostumeModel.setCostSF(this.myRank.getChildByName("touxiangkuang").getComponent(cc.Sprite),v.CostumeType.HeadFM)}},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e),e.on(cc.Node.EventType.TOUCH_END,function(){e.getComponent(cc.Button).enabled&&(a.MusicHelper.play_click(),t&&t())},e)},t.type_power=1,t=o([b],t)}(m.default));i.default=I,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/FightModel":"FightModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView","./FightRankModel":"FightRankModel"}],PrivilegeFightGodView:[function(e,t,i){"use strict";cc._RF.push(t,"5a7f6GmHCpBK6NwvTGNPE+e","PrivilegeFightGodView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/PrivilegeModel"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=e("../network/SocketClient"),d=e("../../engine/EventManager"),f=e("../config/GameConst"),g=e("../model/RoleInfoModel"),h=e("../config/ITemsConfig"),u=e("../config/MapConfig"),p=e("../config/WordConfig"),m=e("../utils/UIHelper"),C=e("../event/CommonEvent"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.privilegeType=s.default.Privilege_Type.FightGod,t.itemid="I9147",t.client2server=null,t.switchingMapId=null,t}return n(t,e),t.prototype.onInitChild=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.client2server=e,this.switchingMapId=t},t.prototype.onShow=function(){d.EventManager.instance.on(f.EVENT_NAME.REFRESH_PRIVILEGE,this.refresh,this),this.noactivationNode=this.node.getChildByName("noactivationNode"),this.activationNode=this.node.getChildByName("activationNode"),this.experienceNode=this.node.getChildByName("experienceNode"),this.btnActivation=this.findChild(this.node,"btnNode/btnActivation"),this.btnGetGold=this.findChild(this.node,"btnNode/btnGetGold"),this.btnHadGet=this.findChild(this.node,"btnNode/btnHadGet"),this.btnFeixie=this.findChild(this.node,"btnNode/btnFeixie"),this.btnExperience=this.findChild(this.node,"btnNode/btnExperience"),this.txtTime=this.btnActivation.getChildByName("txtTime"),this.onAddEvent(this.btnFeixie,this.onClickFeixie.bind(this)),this.onAddEvent(this.btnActivation,this.onClickActivation.bind(this)),this.onAddEvent(this.btnGetGold,this.onClickGetGold.bind(this)),this.onAddEvent(this.btnExperience,this.onClickExperience.bind(this)),this.refresh()},t.prototype.onClickExperience=function(){var e=s.default.findExperienceItem(this.privilegeType);e&&e.useArticle(1)},t.prototype.onClickActivation=function(){this.closeView(),r.default.instance.createView(c.default.gameView.topUp,null,2)},t.prototype.onClickFeixie=function(){if(g.default.instance.getItemAmount(this.itemid)>0){var e=u.MapConfig.getMapConfigByMapId(this.switchingMapId);if(e.mapId==g.default.instance.mapId)return void p.WordConfig.showWord(60287);if(g.default.instance.totalFight>=e.Lv)d.EventManager.instance.dispatch(C.CommonEvent.Event_Word_refresh),l.default.s_enter_delivery(this.switchingMapId);else{var t=cc.js.formatStr(p.WordConfig.getWord(60316),e.Lv);m.UIHelper.showTip(t),r.default.instance.createView(c.default.gameView.toStrongerPanel)}}else{var i=h.ITemsConfig.getITemsConfigById(this.itemid);r.default.instance.createView(c.default.gameView.ItemAcquire,null,null,i)}this.closeView()},t.prototype.onClickGetGold=function(){l.default.req_get_vip_diamond(s.default.Privilege_Type.FightGod)},t.prototype.refresh=function(){var e=this,t=s.default.getPrivilegeModel(this.privilegeType),i=s.default.getExperienceType(this.privilegeType);if(t&&t.leftDay>0)this.btnExperience.active=!1,i==s.default.Experience_Type.useing?(this.experienceNode.active=!0,this.btnActivation.active=!0,this.noactivationNode.active=!1,this.activationNode.active=!1,this.btnHadGet.active=!1,this.btnGetGold.active=!1,this.txtTime.active=!0,this.downFunction=function(){var t=s.default.getExperienceTimeStr(e.privilegeType);""!=t?(e.txtTime.getComponent(cc.Label).string="\u5269\u4f59\u4f53\u9a8c\u65f6\u957f"+t,e.schedule(e.downFunction,1)):e.refresh()},this.downFunction()):(this.noactivationNode.active=!1,this.activationNode.active=!0,this.experienceNode.active=!1,this.btnActivation.active=!1,this.txtTime.active=!1,1==t.is_get_diamond?(this.btnHadGet.active=!0,this.btnGetGold.active=!1):(this.btnHadGet.active=!1,this.btnGetGold.active=!0)),this.btnFeixie.active=!1;else{this.noactivationNode.active=!0,this.activationNode.active=!1,this.experienceNode.active=!1,this.btnActivation.active=!0,this.btnHadGet.active=!1,this.btnGetGold.active=!1,t?(this.txtTime.active=!0,this.txtTime.getComponent(cc.Label).string="\u4f53\u9a8c\u5df2\u7ed3\u675f\uff0c\u7acb\u5373\u6fc0\u6d3b\u5c0a\u8d35\u7279\u6743"):this.txtTime.active=!1;var n=s.default.findExperienceItem(this.privilegeType);this.btnExperience.active=n&&s.default.canUseExperience(this.privilegeType),null!=this.client2server&&this.btnExperience.active?this.btnActivation.active=!1:this.btnActivation.active=!0,this.freshFeixie()}},t.prototype.freshFeixie=function(){if(null==this.client2server)this.btnFeixie.active=!1;else{this.btnFeixie.active=!0;var e=this.btnFeixie.getChildByName("label"),t=g.default.instance.getItemAmount(this.itemid);e.getComponent(cc.Label).string=t+"/1",e.color=t>0?cc.Color.GREEN:cc.Color.RED}},t.prototype.onHide=function(){},t=o([v],t)}(a.default));i.default=y,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper"}],PrivilegeModel:[function(e,t,i){"use strict";cc._RF.push(t,"d66beo6I+dIwKBBX30cL80O","PrivilegeModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RoleInfoModel"),o=e("../../engine/DateUtil"),a=e("../../engine/EventManager"),s=e("../config/GameConst"),r=e("./ServerTime"),c=e("../../engine/Logger"),l=e("./ItemInfoModel"),d=function(){function e(){this.is_get_diamond=1}return e.create=function(t,i){for(var o=r.ServerTime.getServerTime(),c=0;c<n.default.instance.privilegeList.length;c++){var l=n.default.instance.privilegeList[c];if(l.privilegeType==t)return l.endTime=Math.max(o,l.endTime)+24*i*60*60*1e3,a.EventManager.instance.dispatch(s.EVENT_NAME.REFRESH_PRIVILEGE),n.default.saveToLocalStorage(),l}var d=new e;return d.privilegeType=t,d.endTime=o+24*i*60*60*1e3,n.default.instance.privilegeList.push(d),a.EventManager.instance.dispatch(s.EVENT_NAME.REFRESH_PRIVILEGE),n.default.saveToLocalStorage(),d},e.getPrivilegeIndex=function(e){for(var t=0;t<n.default.instance.privilegeList.length;t++){if(n.default.instance.privilegeList[t].privilegeType==e)return t}},e.proto2ModelList=function(e){n.default.instance.privilegeList=[];for(var t=0;t<e.length;t++){var i=this.proto2Model(e[t]);n.default.instance.privilegeList[t]=i}c.Logger.log("privilegeList=====",e,n.default.instance.privilegeList),a.EventManager.instance.dispatch(s.EVENT_NAME.REFRESH_PRIVILEGE)},e.proto2Model=function(t){var i=new e;return i.privilegeType=t.getType(),i.endTime=1e3*t.getEndTime(),i.is_get_diamond=t.getIsGetDiamond(),i.leftDay=t.getLeftday(),i.is_card=t.getIsCard(),i},e.deserializeBinaryToModelList=function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&(t[i]=this.deserializeBinaryToModel(e[i]));return t},e.deserializeBinaryToModel=function(t){var i=new e;return i.privilegeType=t.privilegeType,i.endTime=t.endTime,i},e.hadRecoveryPrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.recovery&&t.leftDay>0)return!0}return!1},e.hadFreePrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.FreeAdv&&-1==t.leftDay)return!0}return!1},e.hadFightGodPrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.FightGod&&t.leftDay>0)return!0}return!1},e.hadGameHelperPrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.GameHelper&&(t.leftDay>0||-1==t.leftDay))return!0}return!1},e.getRecoveryPrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.recovery&&t.leftDay>0)return t}return null},e.getFightGodPrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.FightGod&&t.leftDay>0)return t}return null},e.getFreeAdvPrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.FreeAdv&&t.leftDay>0)return t}return null},e.getGameHelperPrivilege=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.GameHelper&&t.leftDay>0)return t}return null},e.getRecoveryLeftDay=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.recovery)return t.leftDay}return 0},e.getFightLeftDay=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.FightGod)return t.leftDay}return 0},e.getFreeLeftDay=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.FreeAdv)return t.leftDay}return 0},e.getGameHelperLeftDay=function(){for(var e=0;e<n.default.instance.privilegeList.length;e++){var t=n.default.instance.privilegeList[e];if(t.privilegeType==this.Privilege_Type.GameHelper)return t.leftDay}return 0},e.canUseExperience=function(e){return this.getExperienceType(e)==this.Experience_Type.unUse},e.getExperienceType=function(e){var t=this.getPrivilegeModel(e);if(!t)return this.Experience_Type.unUse;var i=r.ServerTime.getServerTime();return 1==t.is_card?i<t.endTime?this.Experience_Type.useing:(t.leftDay=0,this.Experience_Type.used):this.Experience_Type.used},e.getPrivilegeModel=function(e){for(var t=0;t<n.default.instance.privilegeList.length;t++){var i=n.default.instance.privilegeList[t];if(i.privilegeType==e)return i}return null},e.findExperienceItem=function(e){var t;if(e==this.Privilege_Type.recovery)t=this.ITEMID_RECOVERY;else if(e==this.Privilege_Type.FightGod)t=this.ITEMID_FIGHTGOD;else{if(e!=this.Privilege_Type.GameHelper)return null;t=this.ITEMID_GAMEHELPER}return l.default.getItem(t)},e.getExperienceTimeStr=function(e){var t=this.getPrivilegeModel(e);if(!t)return"";var i=t.endTime-r.ServerTime.getServerTime();return i>0?o.default.formatLeftTime2(i):""},e.ITEMID_GAMEHELPER="I6133",e.ITEMID_FIGHTGOD="I6134",e.ITEMID_RECOVERY="I6135",e.Privilege_Type={recovery:1,FightGod:2,FreeAdv:3,GameHelper:4},e.Experience_Type={unUse:1,useing:2,used:3},e}();i.default=d,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../config/GameConst":"GameConst","./ItemInfoModel":"ItemInfoModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime"}],PrivilegeRecoveryView:[function(e,t,i){"use strict";cc._RF.push(t,"d9f3bqisjpI6azS5gczKXQb","PrivilegeRecoveryView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/PrivilegeModel"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=e("../network/SocketClient"),d=e("../../engine/EventManager"),f=e("../config/GameConst"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.privilegeType=s.default.Privilege_Type.recovery,t}return n(t,e),t.prototype.onShow=function(){d.EventManager.instance.on(f.EVENT_NAME.REFRESH_PRIVILEGE,this.refresh,this),this.noactivationNode=this.node.getChildByName("noactivationNode"),this.activationNode=this.node.getChildByName("activationNode"),this.experienceNode=this.node.getChildByName("experienceNode"),this.btnGetGold=this.findChild(this.node,"btnNode/btnGetGold"),this.btnHadGet=this.findChild(this.node,"btnNode/btnHadGet"),this.btnExperience=this.findChild(this.node,"btnNode/btnExperience"),this.btnActivation=this.findChild(this.node,"btnNode/btnActivation"),this.txtTime=this.btnActivation.getChildByName("txtTime"),this.onAddEvent(this.btnActivation,this.onClickActivation.bind(this)),this.onAddEvent(this.btnGetGold,this.onClickGetGold.bind(this)),this.onAddEvent(this.btnExperience,this.onClickExperience.bind(this)),this.refresh()},t.prototype.onClickActivation=function(){this.closeView(),r.default.instance.createView(c.default.gameView.topUp,null,2)},t.prototype.onClickGetGold=function(){l.default.req_get_vip_diamond(s.default.Privilege_Type.recovery)},t.prototype.onClickExperience=function(){var e=s.default.findExperienceItem(this.privilegeType);e&&e.useArticle(1)},t.prototype.update=function(e){},t.prototype.refresh=function(){var e=this,t=s.default.getPrivilegeModel(this.privilegeType),i=s.default.getExperienceType(this.privilegeType);if(t&&t.leftDay>0)this.btnExperience.active=!1,i==s.default.Experience_Type.useing?(this.experienceNode.active=!0,this.btnActivation.active=!0,this.noactivationNode.active=!1,this.activationNode.active=!1,this.btnHadGet.active=!1,this.btnGetGold.active=!1,this.txtTime.active=!0,this.downFunction=function(){var t=s.default.getExperienceTimeStr(e.privilegeType);""!=t?(e.txtTime.getComponent(cc.Label).string="\u5269\u4f59\u4f53\u9a8c\u65f6\u957f"+t,e.schedule(e.downFunction,1)):e.refresh()},this.downFunction()):(this.noactivationNode.active=!1,this.activationNode.active=!0,this.experienceNode.active=!1,this.btnActivation.active=!1,this.txtTime.active=!1,1==t.is_get_diamond?(this.btnHadGet.active=!0,this.btnGetGold.active=!1):(this.btnHadGet.active=!1,this.btnGetGold.active=!0));else{this.noactivationNode.active=!0,this.activationNode.active=!1,this.experienceNode.active=!1,this.btnActivation.active=!0,this.btnHadGet.active=!1,this.btnGetGold.active=!1,t?(this.txtTime.active=!0,this.txtTime.getComponent(cc.Label).string="\u4f53\u9a8c\u5df2\u7ed3\u675f\uff0c\u7acb\u5373\u6fc0\u6d3b\u5c0a\u8d35\u7279\u6743"):this.txtTime.active=!1;var n=s.default.findExperienceItem(this.privilegeType);this.btnExperience.active=n&&s.default.canUseExperience(this.privilegeType)}},t.prototype.onHide=function(){},t=o([h],t)}(a.default));i.default=u,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../model/PrivilegeModel":"PrivilegeModel","../network/SocketClient":"SocketClient"}],ProtoConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f4197Pzyj5Bv55BL/Fr48+r","ProtoConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.getProtoRequestType=function(t){var i=1;return e.requestProtoMap.forEach(function(e,n){e!=t||(i=n)}),i},e.getProtoReqName=function(t){return e.requestProtoMap.get(t)},e.getProtoResponeseType=function(t){var i=1;return e.responseMap.forEach(function(e,n){e!=t||(i=n)}),i},e.getProtoRespName=function(t){return e.responseMap.get(t)},e.PB_MESSAGE="PB_MESSAGE",e.s_user_login="s_user_login",e.c_user_login="c_user_login",e.s_user_base_info="s_user_base_info",e.c_user_base_info="c_user_base_info",e.s_req_role_list="s_req_role_list",e.c_req_role_list="c_req_role_list",e.s_req_create_role="s_req_create_role",e.c_req_create_role="c_req_create_role",e.s_req_del_role="s_req_del_role",e.c_req_del_role="c_req_del_role",e.s_req_start_game="s_req_start_game",e.c_req_start_game="c_req_start_game",e.s_req_role_info="s_req_role_info",e.c_req_role_info="c_req_role_info",e.s_req_enter_scene="s_req_enter_scene",e.c_req_enter_scene="c_req_enter_scene",e.s_req_heart="s_req_heart",e.c_req_heart="c_req_heart",e.c_tell_by_language_id="c_tell_by_language_id",e.c_tell_direct="c_tell_direct",e.s_req_item_list="s_req_item_list",e.c_req_item_list="c_req_item_list",e.s_kill_monster="s_kill_monster",e.t_skill_arg="t_skill_arg",e.c_update_item_info="c_update_item_info",e.s_req_charge="s_req_charge",e.c_req_charge="c_req_charge",e.s_enter_delivery="s_enter_delivery",e.c_enter_delivery="c_enter_delivery",e.c_temporary_report_cheat="c_temporary_report_cheat",e.c_kill_monster="c_kill_monster",e.c_add_res_list="c_add_res_list",e.t_monster_info="t_monster_info",e.s_req_equip="s_req_equip",e.c_req_equip="c_req_equip",e.c_property_list_update="c_property_list_update",e.c_resource_list_update="c_resource_list_update",e.c_error_code="c_error_code",e.s_req_fresh_equip="s_req_fresh_equip",e.c_req_fresh_equip="c_req_fresh_equip",e.s_req_save_property="s_req_save_property",e.c_req_save_property="c_req_save_property",e.s_req_gm_code="s_req_gm_code",e.s_req_strength="s_req_strength",e.c_req_strength="c_req_strength",e.s_req_boss_fresh_time="s_req_boss_fresh_time",e.c_req_boss_fresh_time="c_req_boss_fresh_time",e.s_req_buy="s_req_buy",e.c_req_buy="c_req_buy",e.s_req_shop_fresh_info="s_req_shop_fresh_info",e.c_req_shop_fresh_info="c_req_shop_fresh_info",e.s_req_shop_fresh="s_req_shop_fresh",e.s_req_advertisement_info="s_req_advertisement_info",e.c_req_advertisement_info="c_req_advertisement_info",e.s_req_advertisement="s_req_advertisement",e.s_req_reback_items="s_req_reback_items",e.c_req_reback_items="c_req_reback_items",e.s_req_reback_info="s_req_reback_info",e.s_resh_reback_info="s_resh_reback_info",e.s_req_skill="s_req_skill",e.s_req_skill_lev_up="s_req_skill_lev_up",e.s_req_skill_add_exp="s_req_skill_add_exp",e.s_req_skill_use="s_req_skill_use",e.c_req_skill="c_req_skill",e.t_skill="t_skill",e.s_req_use_item="s_req_use_item",e.c_req_use_item="c_req_use_item",e.s_req_break_item="s_req_break_item",e.s_req_lev_up="s_req_lev_up",e.c_req_lev_up="c_req_lev_up",e.s_req_realm_info="s_req_realm_info",e.c_req_realm_info="c_req_realm_info",e.s_req_up_realm="s_req_up_realm",e.c_req_up_realm="c_req_up_realm",e.s_req_get_vip_info="s_req_get_vip_info",e.c_req_get_vip_info="c_req_get_vip_info",e.s_req_get_vip_diamond="s_req_get_vip_diamond",e.s_req_get_offline_reward="s_req_get_offline_reward",e.c_req_get_offline_reward="c_req_get_offline_reward",e.s_req_task="s_req_task",e.s_req_finish_task="s_req_finish_task",e.c_req_task="c_req_task",e.s_req_make_info="s_req_make_info",e.c_req_make_info="c_req_make_info",e.s_refresh_make="s_refresh_make",e.s_req_make_equip="s_req_make_equip",e.c_req_bags_add_num="c_req_bags_add_num",e.c_off_line_reward_info="c_off_line_reward_info",e.s_req_first_rechard_info="s_req_first_rechard_info",e.s_req_get_first_rechard_info="s_req_get_first_rechard_info",e.c_req_first_rechard_info="c_req_first_rechard_info",e.c_get_item_tip="c_get_item_tip",e.t_kill_reback_info="t_kill_reback_info",e.c_charge_suc="c_charge_suc",e.s_seq_charge_info="s_seq_charge_info",e.c_seq_charge_info="c_seq_charge_info",e.s_equip_lock="s_equip_lock",e.c_kick="c_kick",e.s_seq_update_gift_info="s_seq_update_gift_info",e.c_seq_act_info="c_seq_act_info",e.s_req_code="s_req_code",e.s_seq_start_adv_status="s_seq_start_adv_status",e.s_seq_compose="s_seq_compose",e.c_seq_compose="c_seq_compose",e.s_seq_quench="s_seq_quench",e.c_seq_quench="c_seq_quench",e.s_seq_saverune="s_seq_saverune",e.c_seq_saverune="c_seq_saverune",e.s_seq_embed="s_seq_embed",e.c_seq_embed="c_seq_embed",e.s_seq_unembed="s_seq_unembed",e.c_seq_unembed="c_seq_unembed",e.t_property_info="t_property_info",e.s_seq_fangbuy="s_seq_fangbuy",e.c_seq_fangbuy="c_seq_fangbuy",e.s_seq_fangbuy_info="s_seq_fangbuy_info",e.c_seq_fangbuy_info="c_seq_fangbuy_info",e.t_fang_shop_item_info="t_fang_shop_item_info",e.s_seq_limitshop="s_seq_limitshop",e.s_seq_limitshopbuy_info="s_seq_limitshopbuy_info",e.c_seq_limitshop="c_seq_limitshop",e.c_seq_limitshopbuy_info="c_seq_limitshopbuy_info",e.t_limitshop_item_info="t_limitshop_item_info",e.s_seq_xianji="s_seq_xianji",e.c_seq_xianji="c_seq_xianji",e.s_seq_xianji_save="s_seq_xianji_save",e.c_seq_xianji_save="c_seq_xianji_save",e.s_seq_xianji_regret="s_seq_xianji_regret",e.c_seq_xianji_regret="c_seq_xianji_regret",e.s_seq_rune_gift="s_seq_rune_gift",e.c_seq_rune_gift="c_seq_rune_gift",e.s_seq_compensate_info="s_seq_compensate_info",e.c_seq_compensate_info="c_seq_compensate_info",e.s_seq_all_skill_sin="s_seq_all_skill_sin",e.c_seq_all_skill_sin="c_seq_all_skill_sin",e.t_skill_sin_list="t_skill_sin_list",e.s_seq_swap_skill_sin="s_seq_swap_skill_sin",e.c_seq_swap_skill_sin="c_seq_swap_skill_sin",e.s_seq_try_item="s_seq_try_item",e.c_seq_try_item="c_seq_try_item",e.c_refresh_monster="c_refresh_monster",e.s_seq_shenbing="s_seq_shenbing",e.c_seq_shenbing="c_seq_shenbing",e.s_seq_shenbing_skill="s_seq_shenbing_skill",e.c_seq_shenbing_skill="c_seq_shenbing_skill",e.s_seq_spirits="s_seq_spirits",e.c_seq_spirits="c_seq_spirits",e.s_seckill_monster="s_seckill_monster",e.c_seckill_monster="c_seckill_monster",e.s_recycle_options="s_recycle_options",e.c_recycle_options="c_recycle_options",e.s_seq_get_mail="s_seq_get_mail",e.c_seq_get_mail="c_seq_get_mail",e.s_seq_read_mail="s_seq_read_mail",e.c_seq_read_mail="c_seq_read_mail",e.s_seq_delete_mail="s_seq_delete_mail",e.c_seq_delete_mail="c_seq_delete_mail",e.s_seq_get_all_content="s_seq_get_all_content",e.c_seq_get_all_content="c_seq_get_all_content",e.s_req_use_item_add_skill_exp="s_req_use_item_add_skill_exp",e.s_req_check_property="s_req_check_property",e.s_seq_appstore_reward="s_seq_appstore_reward",e.c_seq_appstore_reward="c_seq_appstore_reward",e.s_equip_rank="s_equip_rank",e.c_equip_rank="c_equip_rank",e.t_equip_rank_info="t_equip_rank_info",e.s_fight_rank="s_fight_rank",e.c_fight_rank="c_fight_rank",e.t_fight_rank="t_fight_rank",e.s_seq_check_excision="s_seq_check_excision",e.c_seq_check_excision="c_seq_check_excision",e.s_seq_auto_medicine="s_seq_auto_medicine",e.c_seq_auto_medicine="c_seq_auto_medicine",e.t_auto_medicine_info="t_auto_medicine_info",e.s_robot_switch="s_robot_switch",e.c_robot_swith="c_robot_swith",e.s_robot_login="s_robot_login",e.c_robot_login="c_robot_login",e.s_robot_fight="s_robot_fight",e.c_robot_fight="c_robot_fight",e.s_robot_record_set="s_robot_record_set",e.s_robot_record_get="s_robot_record_get",e.c_robot_record_get="c_robot_record_get",e.s_mine_info="s_mine_info",e.c_mine_info="c_mine_info",e.t_mine_info="t_mine_info",e.t_pvp_role="t_pvp_role",e.s_mine_rob="s_mine_rob",e.c_mine_rob="c_mine_rob",e.s_do_minning="s_do_minning",e.c_do_minning="c_do_minning",e.s_do_leaving="s_do_leaving",e.c_do_leaving="c_do_leaving",e.s_mine_personal_info="s_mine_personal_info",e.c_mine_personal_info="c_mine_personal_info",e.s_req_if_kill_boss="s_req_if_kill_boss",e.c_req_if_kill_boss="c_req_if_kill_boss",e.t_killed_boss="t_killed_boss",e.s_pvp_result="s_pvp_result",e.c_pvp_result="c_pvp_result",e.s_mine_list="s_mine_list",e.c_mine_list="c_mine_list",e.s_mine_battle_report="s_mine_battle_report",e.c_mine_battle_report="c_mine_battle_report",e.s_mine_buy_energy="s_mine_buy_energy",e.c_mine_buy_energy="c_mine_buy_energy",e.s_mine_retake="s_mine_retake",e.c_mine_retake="c_mine_retake",e.s_mine_assist="s_mine_assist",e.c_mine_assist="c_mine_assist",e.s_mine_plunder="s_mine_plunder",e.c_mine_plunder="c_mine_plunder",e.s_mine_update="s_mine_update",e.c_mine_update="c_mine_update",e.s_mine_report_state="s_mine_report_state",e.c_mine_report_state="c_mine_report_state",e.s_mine_escape="s_mine_escape",e.c_mine_escape="c_mine_escape",e.t_monster_rank="t_monster_rank",e.s_req_normal_monster_rank="s_req_normal_monster_rank",e.c_req_normal_monster_rank="c_req_normal_monster_rank",e.s_req_rem_monster_rank="s_req_rem_monster_rank",e.c_req_rem_monster_rank="c_req_rem_monster_rank",e.s_superweapon_stone_info="s_superweapon_stone_info",e.c_superweapon_stone_info="c_superweapon_stone_info",e.s_superweapon_stone_strengthen="s_superweapon_stone_strengthen",e.c_superweapon_stone_strengthen="c_superweapon_stone_strengthen",e.t_fight_info="t_fight_info",e.s_req_refresh_boss_hp="s_req_refresh_boss_hp",e.s_add_safeTime="s_add_safeTime",e.c_add_safeTime="c_add_safeTime",e.s_get_mine_allow="s_get_mine_allow",e.c_get_mine_allow="c_get_mine_allow",e.c_robot_role_status="c_robot_role_status",e.s_req_set_role_hp="s_req_set_role_hp",e.s_req_get_role_hp="s_req_get_role_hp",e.c_req_get_role_hp="c_req_get_role_hp",e.s_req_statistics="s_req_statistics",e.c_req_get_refeshLibao="c_req_get_refeshLibao",e.s_get_dailyGift="s_get_dailyGift",e.s_intensify_refine="s_intensify_refine",e.t_intensify_refine="t_intensify_refine",e.c_intensify_refine="c_intensify_refine",e.s_do_remode="s_do_remode",e.c_do_remode="c_do_remode",e.s_save_remode="s_save_remode",e.c_save_remode="c_save_remode",e.s_feiyou_login="s_feiyou_login",e.c_feiyou_login="c_feiyou_login",e.s_doubleegg_get="s_doubleegg_get",e.c_doubleegg_info="c_doubleegg_info",e.s_doubleegg_info="s_doubleegg_info",e.t_doubleegg_award="t_doubleegg_award",e.s_get_activity_info="s_get_activity_info",e.t_activity_info="t_activity_info",e.c_get_activity_info="c_get_activity_info",e.s_get_legendtask_info="s_get_legendtask_info",e.c_get_legendtask_info="c_get_legendtask_info",e.s_get_legendtask_gift="s_get_legendtask_gift",e.s_buy_legendtask_level="s_buy_legendtask_level",e.c_buy_legendtask_level="c_buy_legendtask_level",e.s_get_holidayMonster_info="s_get_holidayMonster_info",e.c_get_holidayMonster_info="c_get_holidayMonster_info",e.s_get_legendtask_exp="s_get_legendtask_exp",e.c_get_legendtask_exp="c_get_legendtask_exp",e.s_get_holidaytree_info="s_get_holidaytree_info",e.c_get_holidaytree_info="c_get_holidaytree_info",e.s_use_treeOrtrap="s_use_treeOrtrap",e.c_use_treeOrtrap="c_use_treeOrtrap",e.s_track_tree_sign="s_track_tree_sign",e.c_track_tree_sign="c_track_tree_sign",e.s_treeShop_buy="s_treeShop_buy",e.c_treeShop_buy="c_treeShop_buy",e.s_get_treeShopInfo="s_get_treeShopInfo",e.c_get_treeShopInfo="c_get_treeShopInfo",e.c_christmas_discount_info="c_christmas_discount_info",e.s_get_christmas_discount_info="s_get_christmas_discount_info",e.t_discount_shopItem="t_discount_shopItem",e.c_newYear_discount_info="c_newYear_discount_info",e.s_get_newYear_discount_info="s_get_newYear_discount_info",e.s_get_roast_pig_info="s_get_roast_pig_info",e.c_get_roast_pig_info="c_get_roast_pig_info",e.s_get_carnival_info="s_get_carnival_info",e.c_get_carnival_info="c_get_carnival_info",e.t_carnivalgift_item="t_carnivalgift_item",e.s_selet_ultimateGift="s_selet_ultimateGift",e.c_selet_ultimateGift="c_selet_ultimateGift",e.s_get_carnivalGift="s_get_carnivalGift",e.c_get_carnivalGift="s_get_carnivalGift",e.s_get_ultimate_gift_info="s_get_ultimate_gift_info",e.c_get_ultimate_gift_info="c_get_ultimate_gift_info",e.t_ultimategift_item="t_ultimategift_item",e.s_fresh_carnival="s_fresh_carnival",e.c_fresh_carnival="c_fresh_carnival",e.c_get_ultimateGift="c_get_ultimateGift",e.s_carnival_target_info="s_carnival_target_info",e.c_carnival_target_info="c_carnival_target_info",e.s_carnival_target_reward="s_carnival_target_reward",e.c_carnival_target_reward="c_carnival_target_reward",e.s_req_buy_boss_rebtime="s_req_buy_boss_rebtime",e.c_req_buy_boss_rebtime="c_req_buy_boss_rebtime",e.s_req_use_exp_ball="s_req_use_exp_ball",e.c_req_use_exp_ball="c_req_use_exp_ball",e.s_arena_info="s_arena_info",e.c_arena_info="c_arena_info",e.s_challenge_start="s_challenge_start",e.c_challenge_start="c_challenge_start",e.s_challenge_result="s_challenge_result",e.c_challenge_result="c_challenge_result",e.s_arena_week_reward="s_arena_week_reward",e.c_arena_week_reward="c_arena_week_reward",e.s_arena_log="s_arena_log",e.c_arena_log="c_arena_log",e.s_star_info="s_star_info",e.c_star_info="c_star_info",e.t_star_sign="t_star_sign",e.s_star_exchange="s_star_exchange",e.c_star_exchange="c_star_exchange",e.s_star_up_level="s_star_up_level",e.c_star_up_level="c_star_up_level",e.s_star_sign_info="s_star_sign_info",e.c_star_sign_info="c_star_sign_info",e.s_star_sign_rand="s_star_sign_rand",e.c_star_sign_rand="c_star_sign_rand",e.s_pick_star_sign="s_pick_star_sign",e.c_pick_star_sign="c_pick_star_sign",e.s_less_star_sign="s_less_star_sign",e.c_less_star_sign="c_less_star_sign",e.s_active_astralobe="s_active_astralobe",e.c_active_astralobe="c_active_astralobe",e.s_equip_star_sign="s_equip_star_sign",e.c_equip_star_sign="c_equip_star_sign",e.s_star_sign_switch="s_star_sign_switch",e.c_star_sign_switch="c_star_sign_switch",e.s_star_sign_unlock="s_star_sign_unlock",e.c_star_sign_unlock="c_star_sign_unlock",e.s_star_sign_page="s_star_sign_page",e.c_star_sign_page="c_star_sign_page",e.s_star_sign_preview="s_star_sign_preview",e.s_req_get_title="s_req_get_title",e.c_req_get_title="c_req_get_title",e.c_get_activity_login_info="c_get_activity_login_info",e.s_get_activity_login_info="s_get_activity_login_info",e.s_activity_login_receive="s_activity_login_receive",e.c_activity_login_receive="c_activity_login_receive",e.s_req_baghouse_list="s_req_baghouse_list",e.c_req_baghouse_list="c_req_baghouse_list",e.s_update_baghouse_item="s_update_baghouse_item",e.c_update_baghouse_item="c_update_baghouse_item",e.s_buy_warehouse="s_buy_warehouse",e.c_req_bug_warehouse="c_req_bug_warehouse",e.s_special_ring_compose="s_special_ring_compose",e.c_special_ring_compose="c_special_ring_compose",e.t_material="t_material",e.s_marfa_info="s_marfa_info",e.c_marfa_info="c_marfa_info",e.s_marfa_cumulative_task="s_marfa_cumulative_task",e.c_marfa_cumulative_task="c_marfa_cumulative_task",e.s_marfa_stalibge_reward="s_marfa_stalibge_reward",e.c_marfa_stalibge_reward="c_marfa_stalibge_reward",e.s_growup_info="s_growup_info",e.c_growup_info="c_growup_info",e.s_growup_get="s_growup_get",e.c_growup_get="c_growup_get",e.s_delete_hero="s_delete_hero",e.c_delete_hero="c_delete_hero",e.s_cancle_delete="s_cancle_delete",e.c_cancle_delete="c_cancle_delete",e.s_change_name="s_change_name",e.c_change_name="c_change_name",e.s_recharge_gift_info="s_recharge_gift_info",e.c_recharge_gift_info="c_recharge_gift_info",e.s_recharge_gift_reward="s_recharge_gift_reward",e.c_recharge_gift_reward="c_recharge_gift_reward",e.s_activity_redenvelope_state="s_activity_redenvelope_state",e.c_activity_redenvelope_state="c_activity_redenvelope_state",e.s_activity_redenvelope_receive="s_activity_redenvelope_receive",e.c_activity_redenvelope_receive="c_activity_redenvelope_receive",e.s_activity_redenvelope_record="s_activity_redenvelope_record",e.c_activity_redenvelope_record="c_activity_redenvelope_record",e.s_req_skytower_info="s_req_skytower_info",e.c_req_skytower_info="c_req_skytower_info",e.s_enter_skytower="s_enter_skytower",e.c_enter_skytower="c_enter_skytower",e.c_challenge_skytower_result="c_challenge_skytower_result",e.s_req_skytower_record="s_req_skytower_record",e.c_req_skytower_record="c_req_skytower_record",e.s_req_skytower_rank="s_req_skytower_rank",e.c_req_skytower_rank="c_req_skytower_rank",e.s_req_sweeep_skytower="s_req_sweeep_skytower",e.c_req_sweeep_skytower="c_req_sweeep_skytower",e.s_req_buy_sweep_skytower="s_req_buy_sweep_skytower",e.c_req_buy_sweep_skytower="c_req_buy_sweep_skytower",e.s_req_quit_skytower="s_req_quit_skytower",e.s_req_dungeon_shop="s_req_dungeon_shop",e.c_req_dungeon_shop="c_req_dungeon_shop",e.s_req_buy_dungeon_shop="s_req_buy_dungeon_shop",e.c_req_buy_dungeon_shop="c_req_buy_dungeon_shop",e.s_collect_shop_info="s_collect_shop_info",e.c_collect_shop_info="c_collect_shop_info",e.s_collect_shop_change="s_collect_shop_change",e.c_collect_shop_change="c_collect_shop_change",e.s_activity_seven_login_info="s_activity_seven_login_info",e.c_activity_seven_login_info="c_activity_seven_login_info",e.s_activity_seven_login_reward="s_activity_seven_login_reward",e.c_activity_seven_login_reward="c_activity_seven_login_reward",e.s_get_hero_info="s_get_hero_info",e.t_intensify_info="t_intensify_info",e.t_skill_info="t_skill_info",e.t_shenbing_info="t_shenbing_info",e.c_get_hero_info="c_get_hero_info",e.s_get_topspeed_kill_info="s_get_topspeed_kill_info",e.t_kill_boss="t_kill_boss",e.t_topspeed_kill_task="t_topspeed_kill_task",e.c_get_topspeed_kill_info="c_get_topspeed_kill_info",e.s_get_topspeed_kill_reward="s_get_topspeed_kill_reward",e.c_get_topspeed_kill_reward="c_get_topspeed_kill_reward",e.s_get_marfaking_info="s_get_marfaking_info",e.c_get_marfaking_info="c_get_marfaking_info",e.s_get_marfaking_reward="s_get_marfaking_reward",e.c_get_marfaking_reward="c_get_marfaking_reward",e.s_get_marfaking_acc_reward="s_get_marfaking_acc_reward",e.c_get_marfaking_acc_reward="c_get_marfaking_acc_reward",e.s_buy_marfaking="s_buy_marfaking",e.s_activity_everyday_login_info="s_activity_everyday_login_info",e.c_activity_everyday_login_info="c_activity_everyday_login_info",e.s_activity_everyday_reward="s_activity_everyday_reward",e.c_activity_everyday_reward="c_activity_everyday_reward",e.c_get_skin_tip="c_get_skin_tip",e.s_challenge_fast="s_challenge_fast",e.s_loongcheer_recharge="s_loongcheer_recharge",e.c_loongcheer_recharge="c_loongcheer_recharge",e.s_get_book_info="s_get_book_info",e.c_get_book_info="c_get_book_info",e.s_get_book_equip="s_get_book_equip",e.c_get_book_equip="c_get_book_equip",e.s_add_book_equip="s_add_book_equip",e.c_add_book_equip="c_add_book_equip",e.s_strengthen_book="s_strengthen_book",e.c_strengthen_book="c_strengthen_book",e.s_degree_elevation="s_degree_elevation",e.c_degree_elevation="c_degree_elevation",e.s_activity_strategy_info="s_activity_strategy_info",e.c_activity_strategy_info="c_activity_strategy_info",e.s_activity_strategy_reward="s_activity_strategy_reward",e.c_activity_strategy_reward="c_activity_strategy_reward",e.s_guide_info="s_guide_info",e.c_guide_info="c_guide_info",e.s_guide_trigger="s_guide_trigger",e.c_guide_trigger="c_guide_trigger",e.t_guide="t_guide",e.c_function_open="c_function_open",e.c_function_open_info="c_function_open_info",e.s_function_open_info="s_function_open_info",e.t_task_info="t_task_info",e.s_all_task_info="s_all_task_info",e.c_all_task_info="c_all_task_info",e.c_update_task_info="c_update_task_info",e.s_update_task_info="s_update_task_info",e.s_task_reward="s_task_reward",e.c_task_reward="c_task_reward",e.s_task_liveness_info="s_task_liveness_info",e.c_task_liveness_info="c_task_liveness_info",e.s_task_liveness_reward="s_task_liveness_reward",e.c_task_liveness_reward="c_task_liveness_reward",e.s_req_change_scene="s_req_change_scene",e.t_scene_obj_buff="t_scene_obj_buff",e.c_req_change_scene="c_req_change_scene",e.t_scene_obj="t_scene_obj",e.c_scene_add_obj="c_scene_add_obj",e.c_scene_delete_obj="c_scene_delete_obj",e.c_scene_obj_move="c_scene_obj_move",e.c_scene_atack="c_scene_atack",e.t_scene_harm="t_scene_harm",e.c_scene_obj_hp="c_scene_obj_hp",e.c_scene_obj_mp="c_scene_obj_mp",e.c_scene_buff_harm="c_scene_buff_harm",e.c_scene_obj_state="c_scene_obj_state",e.s_scene_leave="s_scene_leave",e.c_scene_obj_leave="c_scene_obj_leave",e.c_scene_hero_die="c_scene_hero_die",e.c_scene_obj_trigger_skill="c_scene_obj_trigger_skill",e.s_req_scene_obj_list="s_req_scene_obj_list",e.c_req_scene_obj_list="c_req_scene_obj_list",e.s_send_world="s_send_world",e.c_send_world="c_send_world",e.s_send_world_list="s_send_world_list",e.c_send_world_list="c_send_world_list",e.t_send_world_list="t_send_world_list",e.s_get_iteminfo="s_get_iteminfo",e.c_get_iteminfo="c_get_iteminfo",e.s_req_world_boss_info="s_req_world_boss_info",e.t_boss_award="t_boss_award",e.c_req_world_boss_info="c_req_world_boss_info",e.s_req_world_boss_rank="s_req_world_boss_rank",e.t_world_boss_rank="t_world_boss_rank",e.c_req_world_boss_rank="c_req_world_boss_rank",e.s_enter_world_boss="s_enter_world_boss",e.c_enter_world_boss="c_enter_world_boss",e.c_world_boss_res="c_world_boss_res",e.s_req_buy_world_boss_times="s_req_buy_world_boss_times",e.s_req_buy_world_boss_award="s_req_buy_world_boss_award",e.s_req_quit_world_boss="s_req_quit_world_boss",e.c_guild_info="c_guild_info",e.s_guild_info="s_guild_info",e.t_member="t_member",e.c_guild_create="c_guild_create",e.s_guild_create="s_guild_create",e.c_guild_apply="c_guild_apply",e.s_guild_apply="s_guild_apply",e.s_guild_onekey_apply="s_guild_onekey_apply",e.c_guild_onekey_apply="c_guild_onekey_apply",e.c_guild_apply_list="c_guild_apply_list",e.s_guild_apply_list="s_guild_apply_list",e.c_guild_leave="c_guild_leave",e.s_guild_leave="s_guild_leave",e.c_guild_kick="c_guild_kick",e.s_guild_kick="s_guild_kick",e.c_guild_dismiss="c_guild_dismiss",e.s_guild_dismiss="s_guild_dismiss",e.t_donate="t_donate",e.c_guild_donate_info="c_guild_donate_info",e.s_guild_donate_info="s_guild_donate_info",e.c_guild_donate="c_guild_donate",e.s_guild_donate="s_guild_donate",e.c_guild_levelup="c_guild_levelup",e.s_guild_levelup="s_guild_levelup",e.t_guild="t_guild",e.c_guild_list="c_guild_list",e.s_guild_list="s_guild_list",e.c_guild_setting="c_guild_setting",e.s_guild_setting="s_guild_setting",e.c_guild_member_change="c_guild_member_change",e.s_guild_member_change="s_guild_member_change",e.s_guild_announcement="s_guild_announcement",e.c_guild_announcement="c_guild_announcement",e.s_guild_modify_announcement="s_guild_modify_announcement",e.c_guild_modify_announcement="c_guild_modify_announcement",e.s_guild_store_info="s_guild_store_info",e.t_store="t_store",e.c_guild_store_info="c_guild_store_info",e.s_guild_store_buy="s_guild_store_buy",e.c_guild_store_buy="c_guild_store_buy",e.s_guild_store_levelup="s_guild_store_levelup",e.c_guild_store_levelup="c_guild_store_levelup",e.s_guild_apply_operation="s_guild_apply_operation",e.c_guild_apply_operation="c_guild_apply_operation",e.t_library="t_library",e.s_guild_library_info="s_guild_library_info",e.c_guild_library_info="c_guild_library_info",e.s_guild_library_levelup="s_guild_library_levelup",e.c_guild_library_levelup="c_guild_library_levelup",e.s_guild_skill_levelup="s_guild_skill_levelup",e.c_guild_skill_levelup="c_guild_skill_levelup",e.s_guild_treasury_info="s_guild_treasury_info",e.t_treasury_item="t_treasury_item",e.c_guild_treasury_info="c_guild_treasury_info",e.s_guild_treasury_deposit="s_guild_treasury_deposit",e.c_guild_treasury_deposit="c_guild_treasury_deposit",e.s_guild_treasury_takeout="s_guild_treasury_takeout",e.c_guild_treasury_takeout="c_guild_treasury_takeout",e.s_guild_treasury_log="s_guild_treasury_log",e.t_treasury_log="t_treasury_log",e.c_guild_treasury_log="c_guild_treasury_log",e.s_guild_treasury_item="s_guild_treasury_item",e.c_guild_single_treasury_info="c_guild_single_treasury_info",e.c_guild_single_treasury_log="c_guild_single_treasury_log",e.s_guild_redenvelope_buy="s_guild_redenvelope_buy",e.c_guild_redenvelope_buy="c_guild_redenvelope_buy",e.s_guild_redenvelope_info="s_guild_redenvelope_info",e.t_redenvelope_info="t_redenvelope_info",e.c_guild_redenvelope_single_info="c_guild_redenvelope_single_info",e.c_guild_redenvelope_info="c_guild_redenvelope_info",e.s_guild_redenvelope_details="s_guild_redenvelope_details",e.c_guild_redenvelope_details="c_guild_redenvelope_details",e.s_guild_redenvelope_recv="s_guild_redenvelope_recv",e.c_guild_redenvelope_recv="c_guild_redenvelope_recv",e.s_guild_redenvelope_rank="s_guild_redenvelope_rank",e.t_redenvelope_rank="t_redenvelope_rank",e.c_guild_redenvelope_rank="c_guild_redenvelope_rank",e.s_guild_redenvelope_reward="s_guild_redenvelope_reward",e.c_guild_redenvelope_reward="c_guild_redenvelope_reward",e.t_guild_task="t_guild_task",e.s_guild_task_list="s_guild_task_list",e.c_guild_task_list="c_guild_task_list",e.s_guild_task_refresh="s_guild_task_refresh",e.c_guild_task_refresh="c_guild_task_refresh",e.s_guild_task_operation="s_guild_task_operation",e.c_guild_task_operation="c_guild_task_operation",e.s_guild_task_help="s_guild_task_help",e.c_guild_task_help="c_guild_task_help",e.s_guild_task_help_info="s_guild_task_help_info",e.c_guild_task_help_info="c_guild_task_help_info",e.c_error_code_args="c_error_code_args",e.t_error_code_args="t_error_code_args",e.s_invitation_info="s_invitation_info",e.t_invitation_task_info="t_invitation_task_info",e.t_invitation_player_info="t_invitation_player_info",e.c_invitation_info="c_invitation_info",e.s_invitation_reward="s_invitation_reward",e.c_invitation_reward="c_invitation_reward",e.s_invitation_code="s_invitation_code",e.c_invitation_code="c_invitation_code",e.s_invitation_share="s_invitation_share",e.c_invitation_share="c_invitation_share",e.s_get_explore_info="s_get_explore_info",e.c_get_explore_info="c_get_explore_info",e.t_key_value="t_key_value",e.t_reward_explore="t_reward_explore",e.s_get_explore_item="s_get_explore_item",e.c_get_explore_item="c_get_explore_item",e.s_start_explore="s_start_explore",e.c_start_explore="c_start_explore",e.s_get_explore_accreward="s_get_explore_accreward",e.c_get_explore_accreward="c_get_explore_accreward",e.s_req_gossip_boss_info="s_req_gossip_boss_info",e.t_gossip_boss_info="t_gossip_boss_info",e.t_gossip_boss_rank="t_gossip_boss_rank",e.c_req_gossip_boss_info="c_req_gossip_boss_info",e.s_req_gossip_boss_buy="s_req_gossip_boss_buy",e.c_req_single_gossip_boss_rank="c_req_single_gossip_boss_rank",e.s_req_enter_gossip_boss="s_req_enter_gossip_boss",e.c_req_enter_gossip_boss="c_req_enter_gossip_boss",e.t_gossip_boss_award="t_gossip_boss_award",e.c_gossip_boss_res_info="c_gossip_boss_res_info",e.s_req_optional_change="s_req_optional_change",e.c_req_optional_change="c_req_optional_change",e.t_easy_item_info="t_easy_item_info",e.s_req_optional_info="s_req_optional_info",e.c_req_optional_info="c_req_optional_info",e.s_req_recharge_info="s_req_recharge_info",e.s_req_recharge_reward="s_req_recharge_reward",e.c_req_recharge_info="c_req_recharge_info",e.c_req_recharge_reward="c_req_recharge_reward",e.s_get_puzzle_info="s_get_puzzle_info",e.c_get_puzzle_info="c_get_puzzle_info",e.s_open_treasure_chest="s_open_treasure_chest",e.s_get_reward="s_get_reward",e.c_get_reward="c_get_reward",e.c_send_puzzle="c_send_puzzle",e.s_req_consumer_info="s_req_consumer_info",e.c_req_consumer_info="c_req_consumer_info",e.s_req_consumer_reward="s_req_consumer_reward",e.c_req_consumer_reward="c_req_consumer_reward",e.t_lotterydraw="t_lotterydraw",e.s_lotterydraw_info="s_lotterydraw_info",e.c_lotterydraw_info="c_lotterydraw_info",e.s_select_reward="s_select_reward",e.c_select_reward="c_select_reward",e.t_select_reward="t_select_reward",e.s_lotterydraw_start="s_lotterydraw_start",e.c_lotterydraw_start="c_lotterydraw_start",e.s_lotterydraw_reset="s_lotterydraw_reset",e.s_optional_gift="s_optional_gift",e.c_optional_gift="c_optional_gift",e.t_select_item="t_select_item",e.s_merge_consumer_info="s_merge_consumer_info",e.c_merge_consumer_info="c_merge_consumer_info",e.s_merge_consumer_reward="s_merge_consumer_reward",e.c_merge_consumer_reward="c_merge_consumer_reward",e.s_auction_info="s_auction_info",e.c_auction_info="c_auction_info",e.s_auction_log="s_auction_log",e.c_auction_log="c_auction_log",e.s_auction_item_info="s_auction_item_info",e.c_auction_item_info="c_auction_item_info",e.c_auction_single_info="c_auction_single_info",e.s_auction_bid="s_auction_bid",e.c_auction_bid="c_auction_bid",e.s_auction_buy="s_auction_buy",e.c_auction_buy="c_auction_buy",e.s_auction_shelves="s_auction_shelves",e.c_auction_shelves="c_auction_shelves",e.s_baguatu_info="s_baguatu_info",e.c_baguatu_info="c_baguatu_info",e.s_strengthen="s_strengthen",e.c_strengthen="c_strengthen",e.s_refine="s_refine",e.c_refine="c_refine",e.s_baguatu_skill_up="s_baguatu_skill_up",e.c_baguatu_skill_up="c_baguatu_skill_up",e.s_reback_item="s_reback_item",e.c_reback_item="c_reback_item",e.s_exchange_item="s_exchange_item",e.c_exchange_item="c_exchange_item",e.s_bagua_compose="s_bagua_compose",e.c_bagua_compose="c_bagua_compose",e.t_equipid_list="t_equipid_list",e.s_personalize_info="s_personalize_info",e.c_personalize_info="c_personalize_info",e.t_personalize_info="t_personalize_info",e.s_personalize_setting="s_personalize_setting",e.c_personalize_setting="c_personalize_setting",e.s_get_bag_iteminfo="s_get_bag_iteminfo",e.c_get_bag_iteminfo="c_get_bag_iteminfo",e.s_req_pvp_skill="s_req_pvp_skill",e.c_req_pvp_skill="c_req_pvp_skill",e.s_req_pvp_skill_use="s_req_pvp_skill_use",e.c_req_pvp_skill_use="c_req_pvp_skill_use",e.s_appraisal_setting="s_appraisal_setting",e.c_appraisal_setting="c_appraisal_setting",e.s_appraisal_start="s_appraisal_start",e.c_appraisal_start="c_appraisal_start",e.s_get_appellation_info="s_get_appellation_info",e.c_get_appellation_info="c_get_appellation_info",e.s_appellation_up="s_appellation_up",e.c_appellation_up="c_appellation_up",e.s_julin_up="s_julin_up",e.c_julin_up="c_julin_up",e.t_julin_info="t_julin_info",e.s_get_superskill_info="s_get_superskill_info",e.c_get_superskill_info="c_get_superskill_info",e.s_superskill_up="s_superskill_up",e.c_superskill_up="c_superskill_up",e.s_guild_status="s_guild_status",e.c_guild_status="c_guild_status",e.s_guild_apply_fight="s_guild_apply_fight",e.c_guild_apply_fight="c_guild_apply_fight",e.s_guild_member_apply_fight="s_guild_member_apply_fight",e.c_guild_member_apply_fight="c_guild_member_apply_fight",e.s_fight_group_info="s_fight_group_info",e.c_fight_group_info="c_fight_group_info",e.s_fight_map_info="s_fight_map_info",e.c_fight_map_info="c_fight_map_info",e.s_enter_born="s_enter_born",e.c_enter_born="c_enter_born",e.c_fight_map_node_info="c_fight_map_node_info",e.s_move_start="s_move_start",e.s_move_end="s_move_end",e.s_defend_stronghold="s_defend_stronghold",e.s_cancel_defend_stronghold="s_cancel_defend_stronghold",e.s_attack_stronghold="s_attack_stronghold",e.c_attack_stronghold="c_attack_stronghold",e.s_round_result="s_round_result",e.c_round_result="c_round_result",e.s_start_attack="s_start_attack",e.c_start_attack="c_start_attack",e.c_dead="c_dead",e.c_fight_end="c_fight_end",e.s_guild_fight_open="s_guild_fight_open",e.c_guild_fight_open="c_guild_fight_open",e.s_req_super_gift_info="s_req_super_gift_info",e.c_req_super_gift_info="c_req_super_gift_info",e.s_get_limit_gift_info="s_get_limit_gift_info",e.c_get_limit_gift_info="c_get_limit_gift_info",e.c_limit_gift_popup="c_limit_gift_popup",e.s_get_wx_reward_info="s_get_wx_reward_info",e.c_get_wx_reward_info="c_get_wx_reward_info",e.s_get_wx_reward="s_get_wx_reward",e.c_get_wx_reward="c_get_wx_reward",e.requestProtoMap=(new Map).set(1,e.s_user_login).set(2,e.s_req_role_list).set(3,e.s_req_create_role).set(4,e.s_req_del_role).set(5,e.s_req_start_game).set(6,e.s_req_role_info).set(25,e.s_req_enter_scene).set(9,e.s_req_item_list).set(10,e.s_kill_monster).set(13,e.s_req_charge).set(15,e.s_req_equip).set(19,e.s_req_fresh_equip).set(20,e.s_req_save_property).set(21,e.s_req_gm_code).set(22,e.s_req_strength).set(23,e.s_req_boss_fresh_time).set(24,e.s_req_buy).set(26,e.s_req_shop_fresh_info).set(27,e.s_req_shop_fresh).set(28,e.s_req_advertisement_info).set(29,e.s_req_advertisement).set(30,e.s_req_reback_items).set(31,e.s_req_heart).set(32,e.s_req_reback_info).set(33,e.s_resh_reback_info).set(34,e.s_req_skill).set(35,e.s_req_skill_lev_up).set(36,e.s_req_skill_add_exp).set(37,e.s_req_skill_use).set(38,e.s_req_use_item).set(39,e.s_req_break_item).set(40,e.s_req_lev_up).set(41,e.s_req_realm_info).set(42,e.s_req_up_realm).set(43,e.s_req_get_vip_info).set(44,e.s_req_get_vip_diamond).set(45,e.s_req_get_offline_reward).set(46,e.s_req_task).set(47,e.s_req_finish_task).set(48,e.s_req_make_info).set(49,e.s_refresh_make).set(50,e.s_req_make_equip).set(53,e.s_req_first_rechard_info).set(54,e.s_req_get_first_rechard_info).set(57,e.s_seq_charge_info).set(58,e.s_equip_lock).set(60,e.s_seq_update_gift_info).set(61,e.s_req_code).set(62,e.s_seq_start_adv_status).set(63,e.s_seq_compose).set(64,e.s_seq_quench).set(65,e.s_seq_embed).set(66,e.s_seq_saverune).set(68,e.s_seq_fangbuy).set(69,e.s_seq_fangbuy_info).set(70,e.s_seq_limitshop).set(71,e.s_seq_limitshopbuy_info).set(72,e.s_seq_xianji).set(73,e.s_seq_xianji_save).set(74,e.s_seq_xianji_regret).set(75,e.s_seq_rune_gift).set(78,e.s_seq_compensate_info).set(79,e.s_seq_all_skill_sin).set(80,e.s_seq_swap_skill_sin).set(81,e.s_seq_try_item).set(86,e.s_seq_shenbing).set(87,e.s_seq_shenbing_skill).set(88,e.s_seq_spirits).set(89,e.s_seckill_monster).set(90,e.s_recycle_options).set(93,e.s_seq_get_mail).set(94,e.s_seq_read_mail).set(95,e.s_seq_delete_mail).set(96,e.s_seq_get_all_content).set(91,e.s_req_use_item_add_skill_exp).set(92,e.s_req_check_property).set(97,e.s_seq_appstore_reward).set(98,e.s_seq_check_excision).set(99,e.s_seq_auto_medicine).set(100,e.s_robot_switch).set(101,e.s_robot_login).set(102,e.s_robot_fight).set(105,e.s_robot_record_set).set(106,e.s_robot_record_get).set(103,e.s_equip_rank).set(104,e.s_fight_rank).set(107,e.s_mine_info).set(108,e.s_mine_rob).set(109,e.s_mine_personal_info).set(113,e.s_req_if_kill_boss).set(110,e.s_do_minning).set(111,e.s_do_leaving).set(112,e.s_pvp_result).set(114,e.s_req_refresh_boss_hp).set(115,e.s_add_safeTime).set(116,e.s_get_mine_allow).set(118,e.s_req_set_role_hp).set(119,e.s_req_get_role_hp).set(120,e.s_req_statistics).set(121,e.s_intensify_refine).set(122,e.s_get_dailyGift).set(124,e.s_seq_unembed).set(125,e.s_do_remode).set(126,e.s_save_remode).set(127,e.s_feiyou_login).set(128,e.s_doubleegg_get).set(129,e.s_doubleegg_info).set(130,e.s_get_activity_info).set(131,e.s_get_legendtask_info).set(132,e.s_get_legendtask_gift).set(133,e.s_buy_legendtask_level).set(134,e.s_get_holidayMonster_info).set(140,e.s_get_christmas_discount_info).set(141,e.s_get_carnival_info).set(142,e.s_selet_ultimateGift).set(143,e.s_get_carnivalGift).set(144,e.s_get_ultimate_gift_info).set(145,e.s_fresh_carnival).set(146,e.s_carnival_target_info).set(147,e.s_carnival_target_reward).set(149,e.s_get_newYear_discount_info).set(150,e.s_get_roast_pig_info).set(152,e.s_req_use_exp_ball).set(153,e.s_req_buy_boss_rebtime).set(154,e.s_arena_info).set(155,e.s_challenge_start).set(156,e.s_challenge_result).set(157,e.s_arena_week_reward).set(158,e.s_req_get_title).set(159,e.s_star_info).set(160,e.s_star_exchange).set(161,e.s_star_up_level).set(162,e.s_arena_log).set(163,e.s_star_sign_info).set(164,e.s_star_sign_rand).set(165,e.s_pick_star_sign).set(166,e.s_less_star_sign).set(167,e.s_active_astralobe).set(168,e.s_equip_star_sign).set(169,e.s_req_baghouse_list).set(170,e.s_update_baghouse_item).set(171,e.s_buy_warehouse).set(172,e.s_get_activity_login_info).set(173,e.s_activity_login_receive).set(178,e.s_activity_redenvelope_state).set(179,e.s_activity_redenvelope_receive).set(180,e.s_activity_redenvelope_record).set(174,e.s_special_ring_compose).set(175,e.s_marfa_info).set(176,e.s_marfa_cumulative_task).set(177,e.s_marfa_stalibge_reward).set(183,e.s_growup_info).set(184,e.s_growup_get).set(181,e.s_change_name).set(182,e.s_delete_hero).set(183,e.s_cancle_delete).set(184,e.s_growup_info).set(185,e.s_growup_get).set(186,e.s_recharge_gift_info).set(187,e.s_recharge_gift_reward).set(188,e.s_req_skytower_info).set(189,e.s_enter_skytower).set(190,e.s_req_skytower_record).set(191,e.s_req_skytower_rank).set(192,e.s_req_sweeep_skytower).set(193,e.s_req_buy_sweep_skytower).set(195,e.s_req_quit_skytower).set(196,e.s_collect_shop_info).set(197,e.s_collect_shop_change).set(198,e.s_req_dungeon_shop).set(199,e.s_req_buy_dungeon_shop).set(200,e.s_activity_seven_login_info).set(201,e.s_activity_seven_login_reward).set(202,e.s_get_hero_info).set(204,e.s_get_legendtask_exp).set(205,e.s_get_marfaking_info).set(206,e.s_get_marfaking_reward).set(207,e.s_get_marfaking_acc_reward).set(208,e.s_buy_marfaking).set(209,e.s_get_topspeed_kill_info).set(210,e.s_get_topspeed_kill_reward).set(211,e.s_challenge_fast).set(212,e.s_req_change_scene).set(225,e.s_get_treeShopInfo).set(224,e.s_treeShop_buy).set(223,e.s_track_tree_sign).set(222,e.s_use_treeOrtrap).set(221,e.s_get_holidaytree_info).set(219,e.s_activity_everyday_login_info).set(220,e.s_activity_everyday_reward).set(228,e.s_loongcheer_recharge).set(229,e.s_get_book_info).set(230,e.s_get_book_equip).set(231,e.s_add_book_equip).set(232,e.s_strengthen_book).set(233,e.s_degree_elevation).set(238,e.s_activity_strategy_info).set(239,e.s_activity_strategy_reward).set(234,e.s_guide_info).set(235,e.s_guide_trigger).set(237,e.s_function_open_info).set(242,e.s_all_task_info).set(243,e.s_update_task_info).set(244,e.s_task_reward).set(254,e.s_send_world).set(255,e.s_send_world_list).set(256,e.s_get_iteminfo).set(240,e.s_req_normal_monster_rank).set(241,e.s_req_rem_monster_rank).set(247,e.s_req_world_boss_info).set(248,e.s_req_world_boss_rank).set(249,e.s_enter_world_boss).set(251,e.s_req_buy_world_boss_times).set(253,e.s_req_buy_world_boss_award).set(252,e.s_req_quit_world_boss).set(245,e.s_superweapon_stone_info).set(246,e.s_superweapon_stone_strengthen).set(275,e.s_req_optional_change).set(276,e.s_req_optional_info).set(273,e.s_get_puzzle_info).set(274,e.s_get_reward).set(257,e.s_guild_info).set(258,e.s_guild_create).set(259,e.s_guild_apply).set(260,e.s_guild_apply_list).set(261,e.s_guild_leave).set(262,e.s_guild_kick).set(263,e.s_guild_dismiss).set(264,e.s_guild_donate_info).set(265,e.s_guild_donate).set(266,e.s_guild_levelup).set(267,e.s_guild_list).set(268,e.s_guild_setting).set(269,e.s_guild_member_change).set(270,e.s_guild_announcement).set(271,e.s_guild_modify_announcement).set(279,e.s_guild_store_info).set(280,e.s_guild_store_buy).set(281,e.s_guild_store_levelup).set(272,e.s_guild_apply_operation).set(299,e.s_guild_library_info).set(300,e.s_guild_library_levelup).set(301,e.s_guild_skill_levelup).set(302,e.s_guild_onekey_apply).set(303,e.s_guild_treasury_info).set(304,e.s_guild_treasury_deposit).set(305,e.s_guild_treasury_takeout).set(306,e.s_guild_treasury_log).set(307,e.s_guild_treasury_item).set(331,e.s_guild_redenvelope_buy).set(332,e.s_guild_redenvelope_info).set(334,e.s_guild_redenvelope_details).set(335,e.s_guild_redenvelope_recv).set(336,e.s_guild_redenvelope_rank).set(337,e.s_guild_redenvelope_reward).set(310,e.s_req_gossip_boss_info).set(311,e.s_req_gossip_boss_buy).set(313,e.s_req_enter_gossip_boss).set(286,e.s_req_recharge_info).set(287,e.s_req_recharge_reward).set(295,e.s_lotterydraw_info).set(296,e.s_select_reward).set(297,e.s_lotterydraw_start).set(298,e.s_lotterydraw_reset).set(282,e.s_req_consumer_info).set(283,e.s_req_consumer_reward).set(277,e.s_scene_leave).set(285,e.s_optional_gift).set(288,e.s_star_sign_switch).set(289,e.s_star_sign_unlock).set(290,e.s_star_sign_page).set(292,e.s_star_sign_preview).set(293,e.s_merge_consumer_info).set(294,e.s_merge_consumer_reward).set(314,e.s_auction_info).set(315,e.s_auction_log).set(316,e.s_auction_item_info).set(317,e.s_auction_bid).set(318,e.s_auction_buy).set(320,e.s_auction_shelves).set(322,e.s_baguatu_info).set(323,e.s_strengthen).set(324,e.s_refine).set(325,e.s_baguatu_skill_up).set(326,e.s_reback_item).set(327,e.s_exchange_item).set(328,e.s_bagua_compose).set(329,e.s_task_liveness_info).set(330,e.s_task_liveness_reward).set(338,e.s_personalize_info).set(339,e.s_personalize_setting).set(340,e.s_get_bag_iteminfo).set(341,e.s_guild_task_list).set(342,e.s_guild_task_refresh).set(343,e.s_guild_task_operation).set(344,e.s_guild_task_help_info).set(345,e.s_guild_task_help).set(346,e.s_req_scene_obj_list).set(348,e.s_req_pvp_skill).set(349,e.s_req_pvp_skill_use).set(350,e.s_invitation_info).set(351,e.s_invitation_reward).set(352,e.s_invitation_code).set(353,e.s_invitation_share).set(354,e.s_mine_list).set(355,e.s_mine_battle_report).set(356,e.s_mine_buy_energy).set(357,e.s_mine_retake).set(358,e.s_mine_assist).set(359,e.s_mine_plunder).set(360,e.s_get_explore_info).set(361,e.s_start_explore).set(362,e.s_get_explore_accreward).set(363,e.s_get_explore_item).set(365,e.s_mine_report_state).set(366,e.s_appraisal_setting).set(367,e.s_appraisal_start).set(368,e.s_mine_escape).set(369,e.s_enter_delivery).set(370,e.s_get_appellation_info).set(371,e.s_appellation_up).set(372,e.s_julin_up).set(373,e.s_get_superskill_info).set(374,e.s_superskill_up).set(376,e.s_guild_apply_fight).set(377,e.s_guild_member_apply_fight).set(378,e.s_fight_group_info).set(379,e.s_fight_map_info).set(380,e.s_enter_born).set(382,e.s_move_start).set(383,e.s_move_end).set(384,e.s_defend_stronghold).set(385,e.s_cancel_defend_stronghold).set(386,e.s_attack_stronghold).set(387,e.s_round_result).set(388,e.s_start_attack).set(389,e.s_guild_status).set(392,e.s_guild_fight_open).set(415,e.s_req_super_gift_info).set(416,e.s_get_limit_gift_info).set(418,e.s_get_wx_reward_info).set(419,e.s_get_wx_reward),e.responseMap=(new Map).set(1,e.c_user_login).set(2,e.c_req_role_list).set(3,e.c_req_create_role).set(4,e.c_req_del_role).set(5,e.c_req_start_game).set(6,e.c_req_role_info).set(25,e.c_req_enter_scene).set(9,e.c_req_item_list).set(10,e.c_kill_monster).set(11,e.c_update_item_info).set(12,e.c_add_res_list).set(13,e.c_req_charge).set(15,e.c_req_equip).set(16,e.c_property_list_update).set(17,e.c_resource_list_update).set(18,e.c_error_code).set(19,e.c_req_fresh_equip).set(20,e.c_req_save_property).set(22,e.c_req_strength).set(23,e.c_req_boss_fresh_time).set(24,e.c_req_buy).set(26,e.c_req_shop_fresh_info).set(28,e.c_req_advertisement_info).set(30,e.c_req_reback_items).set(31,e.c_req_heart).set(34,e.c_req_skill).set(35,e.c_req_skill).set(36,e.c_req_skill).set(37,e.c_req_skill).set(38,e.c_req_use_item).set(40,e.c_req_lev_up).set(41,e.c_req_realm_info).set(42,e.c_req_up_realm).set(43,e.c_req_get_vip_info).set(44,e.c_req_get_vip_info).set(45,e.c_req_get_offline_reward).set(46,e.c_req_task).set(47,e.c_req_task).set(48,e.c_req_make_info).set(49,e.c_req_make_info).set(50,e.c_req_make_info).set(51,e.c_req_bags_add_num).set(52,e.c_off_line_reward_info).set(53,e.c_req_first_rechard_info).set(54,e.c_req_first_rechard_info).set(55,e.c_get_item_tip).set(56,e.c_charge_suc).set(57,e.c_seq_charge_info).set(59,e.c_kick).set(60,e.c_seq_act_info).set(63,e.c_seq_compose).set(64,e.c_seq_quench).set(65,e.c_seq_embed).set(66,e.c_seq_saverune).set(68,e.c_seq_fangbuy).set(69,e.c_seq_fangbuy_info).set(70,e.c_seq_limitshop).set(71,e.c_seq_limitshopbuy_info).set(72,e.c_seq_xianji).set(73,e.c_seq_xianji_save).set(74,e.c_seq_xianji_regret).set(75,e.c_seq_rune_gift).set(78,e.c_seq_compensate_info).set(79,e.c_seq_all_skill_sin).set(80,e.c_seq_swap_skill_sin).set(81,e.c_seq_try_item).set(85,e.c_refresh_monster).set(86,e.c_seq_shenbing).set(87,e.c_seq_shenbing_skill).set(88,e.c_seq_spirits).set(89,e.c_seckill_monster).set(90,e.c_recycle_options).set(93,e.c_seq_get_mail).set(94,e.c_seq_read_mail).set(95,e.c_seq_delete_mail).set(96,e.c_seq_get_all_content).set(97,e.c_seq_appstore_reward).set(98,e.c_seq_check_excision).set(99,e.c_seq_auto_medicine).set(100,e.c_robot_swith).set(101,e.c_robot_login).set(102,e.c_robot_fight).set(106,e.c_robot_record_get).set(103,e.c_equip_rank).set(104,e.c_fight_rank).set(107,e.c_mine_info).set(108,e.c_mine_rob).set(109,e.c_mine_personal_info).set(113,e.c_req_if_kill_boss).set(110,e.c_do_minning).set(111,e.c_do_leaving).set(112,e.c_pvp_result).set(114,e.c_req_boss_fresh_time).set(115,e.c_add_safeTime).set(116,e.c_get_mine_allow).set(117,e.c_robot_role_status).set(118,e.c_req_get_role_hp).set(119,e.c_req_get_role_hp).set(121,e.c_intensify_refine).set(123,e.c_req_get_refeshLibao).set(124,e.c_seq_unembed).set(125,e.c_do_remode).set(126,e.c_save_remode).set(127,e.c_feiyou_login).set(129,e.c_doubleegg_info).set(130,e.c_get_activity_info).set(131,e.c_get_legendtask_info).set(133,e.c_buy_legendtask_level).set(134,e.c_get_holidayMonster_info).set(140,e.c_christmas_discount_info).set(141,e.c_get_carnival_info).set(142,e.c_selet_ultimateGift).set(143,e.c_get_carnivalGift).set(144,e.c_get_ultimate_gift_info).set(145,e.c_fresh_carnival).set(146,e.c_carnival_target_info).set(147,e.c_carnival_target_reward).set(149,e.c_newYear_discount_info).set(150,e.c_get_roast_pig_info).set(151,e.c_get_ultimateGift).set(152,e.c_req_use_exp_ball).set(153,e.c_req_buy_boss_rebtime).set(154,e.c_arena_info).set(154,e.c_arena_info).set(155,e.c_challenge_start).set(156,e.c_challenge_result).set(157,e.c_arena_week_reward).set(158,e.c_req_get_title).set(159,e.c_star_info).set(160,e.c_star_exchange).set(161,e.c_star_up_level).set(162,e.c_arena_log).set(163,e.c_star_sign_info).set(164,e.c_star_sign_rand).set(165,e.c_pick_star_sign).set(166,e.c_less_star_sign).set(167,e.c_active_astralobe).set(168,e.c_equip_star_sign).set(169,e.c_req_baghouse_list).set(170,e.c_update_baghouse_item).set(171,e.c_req_bug_warehouse).set(172,e.c_get_activity_login_info).set(173,e.c_activity_login_receive).set(174,e.c_special_ring_compose).set(175,e.c_marfa_info).set(176,e.c_marfa_cumulative_task).set(177,e.c_marfa_stalibge_reward).set(178,e.c_activity_redenvelope_state).set(179,e.c_activity_redenvelope_receive).set(180,e.c_activity_redenvelope_record).set(181,e.c_change_name).set(182,e.c_delete_hero).set(183,e.c_cancle_delete).set(184,e.c_growup_info).set(185,e.c_growup_get).set(186,e.c_recharge_gift_info).set(187,e.c_recharge_gift_reward).set(188,e.c_req_skytower_info).set(189,e.c_enter_skytower).set(190,e.c_req_skytower_record).set(191,e.c_req_skytower_rank).set(192,e.c_req_sweeep_skytower).set(193,e.c_req_buy_sweep_skytower).set(194,e.c_challenge_skytower_result).set(198,e.c_req_dungeon_shop).set(199,e.c_req_buy_dungeon_shop).set(196,e.c_collect_shop_info).set(197,e.c_collect_shop_change).set(200,e.c_activity_seven_login_info).set(201,e.c_activity_seven_login_reward).set(202,e.c_get_hero_info).set(204,e.c_get_legendtask_exp).set(203,e.c_get_skin_tip).set(205,e.c_get_marfaking_info).set(206,e.c_get_marfaking_reward).set(207,e.c_get_marfaking_acc_reward).set(209,e.c_get_topspeed_kill_info).set(210,e.c_get_topspeed_kill_reward).set(212,e.c_req_change_scene).set(213,e.c_scene_add_obj).set(214,e.c_scene_delete_obj).set(215,e.c_scene_obj_move).set(216,e.c_scene_atack).set(217,e.c_scene_obj_hp).set(218,e.c_scene_obj_mp).set(227,e.c_scene_buff_harm).set(225,e.c_get_treeShopInfo).set(224,e.c_treeShop_buy).set(223,e.c_track_tree_sign).set(222,e.c_use_treeOrtrap).set(221,e.c_get_holidaytree_info).set(219,e.c_activity_everyday_login_info).set(220,e.c_activity_everyday_reward).set(228,e.c_loongcheer_recharge).set(229,e.c_get_book_info).set(230,e.c_get_book_equip).set(231,e.c_add_book_equip).set(232,e.c_strengthen_book).set(233,e.c_degree_elevation).set(238,e.c_activity_strategy_info).set(239,e.c_activity_strategy_reward).set(234,e.c_guide_info).set(235,e.c_guide_trigger).set(236,e.c_function_open).set(237,e.c_function_open_info).set(242,e.c_all_task_info).set(243,e.c_update_task_info).set(244,e.c_task_reward).set(240,e.c_req_normal_monster_rank).set(241,e.c_req_rem_monster_rank).set(247,e.c_req_world_boss_info).set(248,e.c_req_world_boss_rank).set(249,e.c_enter_world_boss).set(250,e.c_world_boss_res).set(240,e.c_req_normal_monster_rank).set(241,e.c_req_rem_monster_rank).set(245,e.c_superweapon_stone_info).set(246,e.c_superweapon_stone_strengthen).set(226,e.c_scene_obj_state).set(275,e.c_req_optional_change).set(276,e.c_req_optional_info).set(273,e.c_get_puzzle_info).set(274,e.c_get_reward).set(254,e.c_send_world).set(255,e.c_send_world_list).set(256,e.c_get_iteminfo).set(257,e.c_guild_info).set(258,e.c_guild_create).set(259,e.c_guild_apply).set(260,e.c_guild_apply_list).set(261,e.c_guild_leave).set(262,e.c_guild_kick).set(263,e.c_guild_dismiss).set(264,e.c_guild_donate_info).set(265,e.c_guild_donate).set(266,e.c_guild_levelup).set(267,e.c_guild_list).set(268,e.c_guild_setting).set(269,e.c_guild_member_change).set(270,e.c_guild_announcement).set(271,e.c_guild_modify_announcement).set(279,e.c_guild_store_info).set(280,e.c_guild_store_buy).set(281,e.c_guild_store_levelup).set(272,e.c_guild_apply_operation).set(299,e.c_guild_library_info).set(300,e.c_guild_library_levelup).set(301,e.c_guild_skill_levelup).set(302,e.c_guild_onekey_apply).set(303,e.c_guild_treasury_info).set(304,e.c_guild_treasury_deposit).set(305,e.c_guild_treasury_takeout).set(306,e.c_guild_treasury_log).set(308,e.c_guild_single_treasury_info).set(309,e.c_guild_single_treasury_log).set(331,e.c_guild_redenvelope_buy).set(332,e.c_guild_redenvelope_info).set(333,e.c_guild_redenvelope_single_info).set(334,e.c_guild_redenvelope_details).set(335,e.c_guild_redenvelope_recv).set(336,e.c_guild_redenvelope_rank).set(337,e.c_guild_redenvelope_reward).set(310,e.c_req_gossip_boss_info).set(312,e.c_req_single_gossip_boss_rank).set(313,e.c_gossip_boss_res_info).set(321,e.c_req_enter_gossip_boss).set(278,e.c_send_puzzle).set(286,e.c_req_recharge_info).set(287,e.c_req_recharge_reward).set(282,e.c_req_consumer_info).set(283,e.c_req_consumer_reward).set(277,e.c_scene_obj_leave).set(284,e.c_scene_hero_die).set(285,e.c_optional_gift).set(288,e.c_star_sign_switch).set(289,e.c_star_sign_unlock).set(295,e.c_lotterydraw_info).set(296,e.c_select_reward).set(297,e.c_lotterydraw_start).set(290,e.c_star_sign_page).set(291,e.c_scene_obj_trigger_skill).set(293,e.c_merge_consumer_info).set(294,e.c_merge_consumer_reward).set(322,e.c_baguatu_info).set(323,e.c_strengthen).set(324,e.c_refine).set(325,e.c_baguatu_skill_up).set(326,e.c_reback_item).set(327,e.c_exchange_item).set(328,e.c_bagua_compose).set(314,e.c_auction_info).set(315,e.c_auction_log).set(316,e.c_auction_item_info).set(317,e.c_auction_bid).set(318,e.c_auction_buy).set(319,e.c_auction_single_info).set(320,e.c_auction_shelves).set(329,e.c_task_liveness_info).set(330,e.c_task_liveness_reward).set(338,e.c_personalize_info).set(339,e.c_personalize_setting).set(340,e.c_get_bag_iteminfo).set(341,e.c_guild_task_list).set(342,e.c_guild_task_refresh).set(343,e.c_guild_task_operation).set(344,e.c_guild_task_help_info).set(345,e.c_guild_task_help).set(346,e.c_req_scene_obj_list).set(347,e.c_error_code_args).set(348,e.c_req_pvp_skill).set(349,e.c_req_pvp_skill_use).set(350,e.c_invitation_info).set(351,e.c_invitation_reward).set(352,e.c_invitation_code).set(353,e.c_invitation_share).set(354,e.c_mine_list).set(355,e.c_mine_battle_report).set(356,e.c_mine_buy_energy).set(357,e.c_mine_retake).set(358,e.c_mine_assist).set(359,e.c_mine_plunder).set(360,e.c_get_explore_info).set(361,e.c_start_explore).set(362,e.c_get_explore_accreward).set(363,e.c_get_explore_item).set(364,e.c_mine_update).set(365,e.c_mine_report_state).set(366,e.c_appraisal_setting).set(367,e.c_appraisal_start).set(368,e.c_mine_escape).set(369,e.c_enter_delivery).set(370,e.c_get_appellation_info).set(371,e.c_appellation_up).set(372,e.c_julin_up).set(373,e.c_get_superskill_info).set(374,e.c_superskill_up).set(376,e.c_guild_apply_fight).set(377,e.c_guild_member_apply_fight).set(378,e.c_fight_group_info).set(379,e.c_fight_map_info).set(381,e.c_fight_map_node_info).set(386,e.c_attack_stronghold).set(387,e.c_round_result).set(388,e.c_start_attack).set(389,e.c_guild_status).set(390,e.c_dead).set(391,e.c_fight_end).set(392,e.c_guild_fight_open).set(415,e.c_req_super_gift_info).set(416,e.c_get_limit_gift_info).set(417,e.c_limit_gift_popup).set(418,e.c_get_wx_reward_info).set(419,e.c_get_wx_reward),e}();i.ProtoConfig=n,cc._RF.pop()},{}],ProtoUtils:[function(e,t,i){"use strict";cc._RF.push(t,"eefa73W0mtP9KIm6DOyP66J","ProtoUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/config/GameConfig"),o=e("./Logger"),a=function(){function e(){}return e.init=function(){n.GameConfig.isWechat()&&(proto=window.proto),o.Logger.log("ProtoUtils init==proto=",proto)},e.Create=function(e){return proto[e]?new proto[e]:null},e.CreateQianTao2=function(e,t){return new proto[e][t]},e.DeserializeBinary=function(e,t){return proto[e]?proto[e].deserializeBinary(t):null},e.GetProtoName=function(e){return e.constructor.displayName.substring(6)},e}();i.ProtoUtils=a,cc._RF.pop()},{"../game/config/GameConfig":"GameConfig","./Logger":"Logger"}],PublicTipView:[function(e,t,i){"use strict";cc._RF.push(t,"48167vxaOlJ9LJ8AjXX4Qc+","PublicTipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/RuleConfig"),r=cc._decorator,c=r.ccclass;r.property;(function(e){e[e.TYPE_MINE=1]="TYPE_MINE",e[e.TYPE_LUNHUI=2]="TYPE_LUNHUI",e[e.TYPE_XILIAN=3]="TYPE_XILIAN",e[e.TYPE_XIANJI=4]="TYPE_XIANJI",e[e.TYPE_CUILIAN=5]="TYPE_CUILIAN",e[e.TYPE_GAMEHELPER=6]="TYPE_GAMEHELPER",e[e.TYPE_REMOLE=7]="TYPE_REMOLE",e[e.TYPE_HOLIDAYMONSTER=8]="TYPE_HOLIDAYMONSTER",e[e.TYPE_Milu=9]="TYPE_Milu",e[e.TYPE_UltimateGift=10]="TYPE_UltimateGift",e[e.TYPE_STAR=11]="TYPE_STAR",e[e.TYPE_MAFA=12]="TYPE_MAFA",e[e.TYPE_TEJIE=13]="TYPE_TEJIE",e[e.TYPE_LEITAI=14]="TYPE_LEITAI",e[e.TYPE_TIANGUAN=15]="TYPE_TIANGUAN",e[e.TYPE_TIANGUAN_RNAK=16]="TYPE_TIANGUAN_RNAK",e[e.TYPE_EVERYDAY_SIGNATURE=17]="TYPE_EVERYDAY_SIGNATURE",e[e.TYPE_POWER=18]="TYPE_POWER",e[e.TYPE_EQUIP=19]="TYPE_EQUIP",e[e.TYPE_LEITAI_2=20]="TYPE_LEITAI_2",e[e.TYPE_CHIXUEMOJIAN=21]="TYPE_CHIXUEMOJIAN",e[e.TYPE_MINGYUNZHIREN=22]="TYPE_MINGYUNZHIREN",e[e.TYPE_SHIHUNFAZHANG=23]="TYPE_SHIHUNFAZHANG",e[e.TYPE_TUITU=24]="TYPE_TUITU",e[e.TYPE_TUJIAN=25]="TYPE_TUJIAN",e[e.TYPE_WORLDBOSS=26]="TYPE_WORLDBOSS",e[e.TYPE_MergeLuckyDraw=27]="TYPE_MergeLuckyDraw",e[e.TYPE_DevilSeal=28]="TYPE_DevilSeal",e[e.TYPE_GuildStoreRoom=29]="TYPE_GuildStoreRoom",e[e.TYPE_AUCTIONHOUSE=30]="TYPE_AUCTIONHOUSE",e[e.TYPE_LuckBingoRule=31]="TYPE_LuckBingoRule",e[e.TYPE_GuildHongBao=32]="TYPE_GuildHongBao",e[e.TYPE_STAR_Num=33]="TYPE_STAR_Num",e[e.TYPE_Invitation=34]="TYPE_Invitation",e[e.TYPE_ExoticExploration=35]="TYPE_ExoticExploration",e[e.TYPE_GuildBoss=36]="TYPE_GuildBoss",e[e.TYPE_GuildPvp=37]="TYPE_GuildPvp",e[e.TYPE_XUYUAN=38]="TYPE_XUYUAN",e[e.TYPE_CHUANQIBAODIAN=39]="TYPE_CHUANQIBAODIAN",e[e.TYPE_STRENGTHEN=40]="TYPE_STRENGTHEN",e[e.TYPE_SHILINGNIANLING=41]="TYPE_SHILINGNIANLING",e[e.TYPE_COPYRIGHT=42]="TYPE_COPYRIGHT",e[e.TYPE_WEIDUANFULI=43]="TYPE_WEIDUANFULI"})(i.RuleType||(i.RuleType={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.scrollView=this.findChild(this.node,"panel/scrollView"),this.txtContent=this.findChild(this.node,"panel/scrollView/view/content/txtContent"),this.defaultHeight=this.scrollView.height,this.txtContent.getComponent(cc.RichText).string=s.default.getConfigById(e).desc,this.checkUiView()},t.prototype.checkUiView=function(){var e=this.scrollView.getComponent(cc.ScrollView),t=this.findChild(this.node,"panel").getComponent(cc.Layout);this.txtContent.height>=this.defaultHeight?(e.enabled=!0,t.enabled=!1):(this.scrollView.height=this.txtContent.height,e.enabled=!1,t.enabled=!0)},t.prototype.onEnable=function(){this.setTopUI()},t.prototype.onShow=function(){this.onAddEvent(this.findChild(this.node,"panel/top/btnClose"),this.closeView.bind(this))},t.TYPE_MINE=1,t.TYPE_LUNHUI=2,t.TYPE_XILIAN=3,t.TYPE_XIANJI=4,t.TYPE_CUILIAN=5,t.TYPE_GAMEHELPER=6,t.TYPE_REMOLE=7,t.TYPE_HOLIDAYMONSTER=8,t.TYPE_Milu=9,t.TYPE_UltimateGift=10,t.TYPE_STAR=11,t.TYPE_MAFA=12,t.TYPE_TEJIE=13,t.TYPE_LEITAI=14,t.TYPE_TIANGUAN=15,t.TYPE_TIANGUAN_RNAK=16,t.TYPE_EVERYDAY_SIGNATURE=17,t.TYPE_EQUIP_TUJIAN=18,t=o([c],t)}(a.default);i.default=l,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/RuleConfig":"RuleConfig"}],PuzzleConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5562eLyeUJAM4xQgibyONYi","PuzzleConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.awardMap=new Map,t}return n(t,e),t.obj2Config=function(e,i){var n=new t;n.rank=e.rank,n.task_id=e.task_id,n.docs=e.docs,n.needCount=e.condition;var o=new Map,a=e.award;for(var s in a)o.set(s,a[s]);return n.awardMap.set(Number(i),o),n},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i],i),o=Number(i);t.puzzleConfigMap.set(o,n)})},t.getDecById=function(e){return this.puzzleConfigMap.get(e).docs},t.getAwardMapById=function(e){return this.puzzleConfigMap.get(e).awardMap.get(e)},t.getPuzzleConfigByRankAndTaskid=function(e,t){var i;return this.puzzleConfigMap.forEach(function(n){if(n.rank===e&&n.task_id===t)return i=n}),i},t.getNeedCountById=function(e){return t.puzzleConfigMap.get(e).needCount},t.getPLConfigIdByRankAndTaskid=function(e,t){var i;this.puzzleConfigMap.forEach(function(n,o){if(n.rank===e&&n.task_id===t)return i=o});return i},t.puzzleConfigMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.PuzzleConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],PvpManager:[function(e,t,i){"use strict";cc._RF.push(t,"59ca7m0GDFPpIk15jyGPnYv","PvpManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/ProtoConfig"),a=e("../../engine/ProtoUtils"),s=e("../../engine/SpriteFrameComponent"),r=e("../../engine/UIManager"),c=e("../config/GameConst"),l=e("../config/MagicNameConfig"),d=e("../config/MapConfig"),f=e("../config/ViewConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../model/Grid"),p=e("../model/PvpRoleModel"),m=e("../model/RoleInfoModel"),C=e("../prefab/GameManager"),_=e("../prefab/RolePrefab"),v=e("../utils/UIHelper"),y=e("./TianGuanManager"),b=function(){function e(){this.isFighting=!1,this.attackSummonedPrefabList=[],this.beAttackSummonedPrefabList=[],this.onlyId=0,this.pvpIncrease_p=0,this.pvpReduction_p=0,this.bloodTotalLength=164,this.leftTime=0}return e.prototype.init=function(e){this.gameView=e},e.prototype.test=function(){this.gameView.cityView.node.active=!1,m.default.instance.revive();var e=new m.default;e.roleId="54465461",e.level=1,e.attrList=m.default.instance.attrList.concat(),e.skillModelList=[];for(var t=0;t<m.default.instance.skillModelList.length;t++){var i=m.default.instance.skillModelList[t];e.skillModelList.push(i.clone())}e.roleName="\u654c\u4eba\u5047",e.occupation=m.default.instance.occupation,e.revive(),this.startPvp(m.default.instance,e)},e.prototype.clearSkillCd=function(e){for(var t=0;t<e.skillModelList.length;t++){e.skillModelList[t].lastUseTIme=0}},e.prototype.oneStartEffect=function(e,t){var i=this,n=["3","2","1","s"];e>=n.length?t&&t():(this.txtTip.node.active=!0,this.txtTip.node.setScale(0,0),cc.tween(this.txtTip.node).to(.2,{scaleX:1,scaleY:1}).start(),this.txtTip.string=n[e],this.timeId=setTimeout(function(){i.oneStartEffect(e+1,t)},1e3))},e.prototype.playStart=function(e){var t=this;this.gameView.pkEffectNode.active=!0,this.gameView.pkView.active=!0,this.txtTip=this.gameView.pkEffectNode.getChildByName("txtTip").getComponent(cc.Label),this.txtTip.node.active=!0,this.oneStartEffect(0,function(){t.txtTip.node.active=!1,e&&e()}),this.gameView.pkView.getChildByName("btnGiveUp").on(cc.Node.EventType.TOUCH_END,this.checkGiveUp.bind(this))},e.prototype.checkGiveUp=function(){var e=this;r.default.instance.createView(f.default.gameView.DialogCheck,null,g.WordConfig.getWord(60247),function(t){t&&e.isPvping&&!e.isEnding&&e.myDead()})},e.prototype.refreshTime=function(){this.txtLeftTime.string=this.leftTime+""},e.prototype.startPvpByServer=function(e,t,i,n,o,a){if(void 0===n&&(n=0),void 0===o&&(o=8e3),void 0===a&&(a=null),this.isFighting||y.TianGuanManager.instance.isFighting)return g.WordConfig.showWord(60246),-1;C.default.instance.BattleType=c.BattleType.PvP,v.UIHelper.gotoButtomTab(0),this.isFighting=!0,this.nowPvpType=e,this.myRoleProto=t,this.pkRoleProto=i;var s=p.default.getPvpRoleInfoModel(t),r=p.default.getPvpRoleInfoModel(i);this.startPvp(s,r,n,o,a)},e.prototype.startPvp=function(t,i,o,a,r){var c=this;void 0===o&&(o=0),void 0===a&&(a=8e3),void 0===r&&(r=null),this.myRoleInfo=null,this.pkRoleInfo=null,this.attackRole=t,this.beAttackRole=i,this.gameView.reInitGridPosition(d.MapConfig.MAP_TYPE.Mine),this.gameView.cityView.node.active=!1,this.nowPvpType,e.PvpType.Pk,this.isPvping=!0,this.isEnding=!1,this.txtLeftTime=this.gameView.pkView.getChildByName("txtLeftTime").getComponent(cc.Label),this.leftTime=120,this.refreshTime(),this.gameView.pkView.getChildByName("txtMyName").getComponent(cc.Label).string="Lv"+t.level+" "+t.roleName,this.gameView.pkView.getChildByName("txtPkName").getComponent(cc.Label).string="Lv"+i.level+" "+i.roleName;var l=this.gameView.pkView.getChildByName("myIcon").getComponent(cc.Sprite);l.spriteFrame=l.getComponent(s.SpriteFrameComponent).spriteFrameList[t.occupation];var f=this.gameView.pkView.getChildByName("pkIcon").getComponent(cc.Sprite);f.spriteFrame=f.getComponent(s.SpriteFrameComponent).spriteFrameList[i.occupation],this.myBloodNode=this.gameView.pkView.getChildByName("myBloodNode"),this.myBloodNode.width=this.bloodTotalLength,this.pkBloodNode=this.gameView.pkView.getChildByName("pkBloodNode"),this.pkBloodNode.width=this.bloodTotalLength;for(var g=0;g<2;g++){var p=this.gameView.pkView.getChildByName("pkBg"+g);g==this.nowPvpType?p.active=!0:p.active=!1}n.EventManager.instance.dispatch(h.CommonEvent.Event_Pvp_start,this.nowPvpType),this.pvpEndCallback=r,this.playStart(function(){c.clearSkillCd(t),c.clearSkillCd(i),c.pvpIncrease_p=o,c.pvpReduction_p=a,t.revive(),i.revive(),c.onlyId++,c.timeId=setInterval(function(){c.leftTime--,c.refreshTime(),c.leftTime<=0&&(c.leftTime=0,c.pvpEnd(!1))},1e3);var e=u.default.init(3,1);c.attackRolePrefab=c.gameView.addRolePrefab(e),c.attackRolePrefab.setRoleType(_.default.RoleType.PvpAttackRole,t);var n=u.default.init(3,4);return c.beAttackRolePrefab=c.gameView.addRolePrefab(n),c.beAttackRolePrefab.setRoleType(_.default.RoleType.PvpBeAttackRole,i),c.myRoleInfo=c.attackRolePrefab.roleInfo,c.pkRoleInfo=c.beAttackRolePrefab.roleInfo,c.onlyId})},e.prototype.refreshBlood=function(){this.attackRolePrefab&&(this.myBloodNode.width=this.bloodTotalLength*(this.attackRolePrefab.roleInfo.getHp()/this.attackRolePrefab.roleInfo.getMaxHp())),this.beAttackRolePrefab&&(this.pkBloodNode.width=this.bloodTotalLength*(this.beAttackRolePrefab.roleInfo.getHp()/this.beAttackRolePrefab.roleInfo.getMaxHp()))},e.prototype.getAttackList=function(e,t,i,n,o,a){void 0===o&&(o=!1),void 0===a&&(a=null);var s=[];if(this.attackRolePrefab&&!this.attackRolePrefab.isDead){var r=Math.abs(this.attackRolePrefab.gridRow-i),c=Math.abs(this.attackRolePrefab.gridCol-n);r<=e&&c<=e&&s.push(this.attackRolePrefab)}if(o&&s.length>=1&&s.length<t)for(var l=0;l<this.attackSummonedPrefabList.length;l++){r=Math.abs(this.attackSummonedPrefabList[l].gridRow-i),c=Math.abs(this.attackSummonedPrefabList[l].gridCol-n);if(r<=e&&c<=e&&(s.push(this.attackSummonedPrefabList[l]),s.length>=t))break}return s},e.prototype.getBeAttackList=function(e,t,i,n,o,a){void 0===o&&(o=!1),void 0===a&&(a=null);var s=[];if(this.beAttackRolePrefab&&!this.beAttackRolePrefab.isDead){var r=Math.abs(this.beAttackRolePrefab.gridRow-i),c=Math.abs(this.beAttackRolePrefab.gridCol-n);r<=e&&c<=e&&s.push(this.beAttackRolePrefab)}if(o&&s.length>=1&&s.length<t)for(var l=0;l<this.beAttackSummonedPrefabList.length;l++){r=Math.abs(this.beAttackSummonedPrefabList[l].gridRow-i),c=Math.abs(this.beAttackSummonedPrefabList[l].gridCol-n);if(r<=e&&c<=e&&(s.push(this.beAttackSummonedPrefabList[l]),s.length>=t))break}return s},e.prototype.myDead=function(){if(!this.isEnding&&this.isPvping){this.attackRolePrefab&&this.gameView.releaseRolePrefab(this.attackRolePrefab),this.attackRolePrefab=null,this.beAttackRolePrefab&&(this.beAttackRolePrefab.isDead=!0);for(var e=0;e<this.attackSummonedPrefabList.length;e++)this.gameView.killSummoned(this.attackSummonedPrefabList[e]);this.attackSummonedPrefabList=[];for(e=0;e<this.beAttackSummonedPrefabList.length;e++)this.beAttackSummonedPrefabList[e].isDead=!0;this.pvpEnd(!1)}},e.prototype.mySummonedDead=function(){for(var e=0;e<this.attackSummonedPrefabList.length;e++)this.gameView.killSummoned(this.attackSummonedPrefabList[e]);this.attackSummonedPrefabList=[]},e.prototype.bePkSummonedDead=function(){for(var e=0;e<this.beAttackSummonedPrefabList.length;e++)this.gameView.killSummoned(this.beAttackSummonedPrefabList[e]);this.beAttackSummonedPrefabList=[]},e.prototype.bePkDead=function(){if(!this.isEnding&&this.isPvping){this.beAttackRolePrefab&&this.gameView.releaseRolePrefab(this.beAttackRolePrefab),this.beAttackRolePrefab=null,this.attackRolePrefab&&(this.attackRolePrefab.isDead=!0);for(var e=0;e<this.attackSummonedPrefabList.length;e++)this.attackSummonedPrefabList[e].isDead=!0;for(e=0;e<this.beAttackSummonedPrefabList.length;e++)this.gameView.killSummoned(this.beAttackSummonedPrefabList[e]);this.pvpEnd(!0)}},e.prototype.clear=function(){this.gameView.pkView.active=!1,this.gameView.pkEffectNode.active=!1,this.attackRolePrefab&&this.attackRolePrefab.node&&this.gameView.releaseRolePrefab(this.attackRolePrefab),this.beAttackRolePrefab&&this.beAttackRolePrefab.node&&this.gameView.releaseRolePrefab(this.beAttackRolePrefab),this.mySummonedDead(),this.bePkSummonedDead(),this.attackRolePrefab=null,this.beAttackRolePrefab=null},e.prototype.checkRolePack=function(e,t,i){if(t&&e){for(var n=[],s=0;s<t.attrList.length;s++){var r=a.ProtoUtils.Create(o.ProtoConfig.t_property_info);r.setK(t.attrList[s].magicId),r.setV(t.attrList[s].magicValue),n[s]=r}if(e.setAttrlistList(n),i)for(s=0;s<t.attrList.length;s++){var c=t.attrList[s];c.magicId==l.MagicNameConfig.MagicId.atk?c.magicValue=i.attack:(c.magicId=l.MagicNameConfig.MagicId.spt)?c.magicValue=i.spt:c.magicId==l.MagicNameConfig.MagicId.mag?c.magicValue=i.mag:c.magicId==l.MagicNameConfig.MagicId.hp?c.magicValue=i.getHp():c.magicId==l.MagicNameConfig.MagicId.maxHp?(c.magicId,i.getMaxHp()):c.magicId==l.MagicNameConfig.MagicId.mp?c.magicValue=i.getMp():c.magicId==l.MagicNameConfig.MagicId.maxMp?c.magicValue=i.getMaxMp():c.magicId==l.MagicNameConfig.MagicId.def?c.magicValue=i.def:c.magicId==l.MagicNameConfig.MagicId.lucky?c.magicValue=i.lucky:c.magicId==l.MagicNameConfig.MagicId.speed?c.magicValue=i.attackSpeed:c.magicId==l.MagicNameConfig.MagicId.BonusDamage?c.magicValue=i.BonusDamage:c.magicId==l.MagicNameConfig.MagicId.DamageReduction?c.magicValue=i.DamageReduction:c.magicId==l.MagicNameConfig.MagicId.BonusDamage_p?c.magicValue=i.BonusDamage_p:c.magicId==l.MagicNameConfig.MagicId.ignoredef_p?c.magicValue=i.ignoredef_p:c.magicId==l.MagicNameConfig.MagicId.DamageReduction_p?c.magicValue=i.DamageReduction_p:c.magicId==l.MagicNameConfig.MagicId.HpDrain?c.magicValue=i.HpDrain:c.magicId==l.MagicNameConfig.MagicId.MpDrain&&(c.magicValue=i.MpDrain)}var d=[];for(s=0;s<t.skillModelList.length;s++){var f=a.ProtoUtils.Create(o.ProtoConfig.t_skill);f.setK(t.skillModelList[s].id),f.setV(t.skillModelList[s].level),f.setExp(t.skillModelList[s].exp),f.setUse(t.skillModelList[s].isSelectPvP?1:0),d[s]=f}e.setSkillListList(d),e.setTitle(t.title);var g=[];for(s=0;s<t.sign_list.length;s++){var h=a.ProtoUtils.Create(o.ProtoConfig.t_star_sign);h.setId(t.sign_list[s].id),h.setLev(t.sign_list[s].lev),g[s]=h}return e.setSignListList(g),e}},e.prototype.pvpEnd=function(t){var i=this;this.isEnding=!0,this.gameView.reInitGridPosition(d.MapConfig.MAP_TYPE.Field),clearTimeout(this.timeId),this.txtTip.node.zIndex=999,this.txtTip.node.setScale(0,0),cc.tween(this.txtTip.node).to(.2,{scaleX:1,scaleY:1}).start(),this.txtTip.node.active=!0,this.txtTip.string=t?"w":"f",this.myRoleProto=this.checkRolePack(this.myRoleProto,this.attackRole,this.myRoleInfo),this.pkRoleProto=this.checkRolePack(this.pkRoleProto,this.beAttackRole,this.pkRoleInfo),setTimeout(function(){i.isPvping=!1,i.isFighting=!1,i.clear(),i.pvpEndCallback&&i.pvpEndCallback(t,i.onlyId,i.myRoleProto,i.pkRoleProto),i.gameView.cityView.node.active=!0,i.nowPvpType==e.PvpType.Mine&&i.gameView.cityView.onOpenDialogue(4),n.EventManager.instance.dispatch(h.CommonEvent.Event_Pvp_End,t,i.onlyId,i.myRoleProto,i.pkRoleProto)},1500)},e.prototype.dispose=function(){this.isPvping=!1,clearTimeout(this.timeId)},e.PvpType={Mine:0,Pk:1},e.instance=new e,e}();i.PvpManager=b,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../config/GameConst":"GameConst","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/Grid":"Grid","../model/PvpRoleModel":"PvpRoleModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/GameManager":"GameManager","../prefab/RolePrefab":"RolePrefab","../utils/UIHelper":"UIHelper","./TianGuanManager":"TianGuanManager"}],PvpRoleModel:[function(e,t,i){"use strict";cc._RF.push(t,"c1a71kJMYNCWKDi1bSZjloz","PvpRoleModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("./MagicModel"),a=e("./RoleInfoModel"),s=e("./ShenBinSkillModel"),r=e("./SkillEffectModel"),c=e("./SkillModel"),l=e("./SpecialRingModel"),d=function(){function e(){this.skillEffectList=[],this.shenbinSkillList=[]}return e.proto2ModelList=function(t){var i=new e;i.roleId=t.getId(),i.name=t.getName(),i.occupation=t.getOccupation(),i.lv=t.getLev(),i.attrList=t.getAttrlistList(),i.skillList=t.getSkillListList();var n=t.getFightinfo();return i.fight=n.getTotalfight(),i.currPower=t.getCurrpower(),i.maxPower=t.getMaxpower(),i.skillEffectList=t.getSkillSkinListList(),i.title=t.getTitle(),i},e.getPvpRoleInfoModel=function(e){var t=new a.default;t.roleId=e.getId(),t.roleName=e.getName(),t.occupation=e.getOccupation(),t.level=e.getLev(),t.title=e.getTitle(),t.attrList=o.default.proto2ModelList(e.getAttrlistList());var i=e.getSignListList();t.sign_list=[];for(var d=0;d<i.length;d++){var f={id:i[d].getId(),lev:i[d].getLev(),time:0};t.sign_list[d]=f}var g=e.getSkillListList(),h=[];for(d=0;d<g.length;d++){var u=new c.SkillModel;u.id=g[d].getK(),u.level=g[d].getV(),u.exp=g[d].getExp(),u.isSelect=1==g[d].getUse(),u.isSelectPvP=1==g[d].getUse(),u.isActive=!(u.level<=0),h.push(u)}t.skillModelList=h,t.skillEffectList=r.default.getModelListBySever(e);var p=e.getFightinfo();t.totalFight=p.getTotalfight(),t.maxFight=p.getMaxFight();var m=e.getShenbingSkillList();for(d=0;d<m.length;d++){var C=new s.default;C.id=m[d].getNewid(),t.shenbinSkillList[d]=C}return t.specialRingModelList=l.SpecialRingModel.proto2ModelList(e.getSpecialeffectlistList()),n.Logger.log("getPvpRoleInfoModel===",t),t},e}();i.default=d,cc._RF.pop()},{"../../engine/Logger":"Logger","./MagicModel":"MagicModel","./RoleInfoModel":"RoleInfoModel","./ShenBinSkillModel":"ShenBinSkillModel","./SkillEffectModel":"SkillEffectModel","./SkillModel":"SkillModel","./SpecialRingModel":"SpecialRingModel"}],QieGePrefab:[function(e,t,i){"use strict";cc._RF.push(t,"87ffbrwvMpKDoVOYBBvfp1J","QieGePrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../config/ColorConfig"),r=e("../model/RoleInfoModel"),c=e("./RolePrefab"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxHpWidth=86,t.nowRoleType=c.default.RoleType.Role,t}return n(t,e),t.prototype.init=function(e){this.node.x=e.node.x,this.node.y=e.node.y,this.nowRoleType=e.nowRoleType,this.leftPanel=this.node.getChildByName("leftPanel"),this.rightPanel=this.node.getChildByName("rightPanel"),this.blueImg1=this.node.getChildByName("leftPanel").getChildByName("blueImg"),this.blueImg2=this.node.getChildByName("rightPanel").getChildByName("blueImg"),this.refreshPanel(this.leftPanel,e),this.refreshPanel(this.rightPanel,e)},t.prototype.refreshPanel=function(e,t){e.x=0,e.y=0;var i=e.getChildByName("mask_1").getChildByName("role1");t.nowRoleType==c.default.RoleType.Role||t.nowRoleType==c.default.RoleType.PvpAttackRole||t.nowRoleType==c.default.RoleType.PvpBeAttackRole?i.getComponent(cc.Sprite).spriteFrame=c.default.getFightFrame(t.roleInfoModel.title,t.nowRoleType,t.roleInfo.occupation,t.roleInfo.isBoss,t.roleInfo.quality):i.getComponent(cc.Sprite).spriteFrame=c.default.getFightFrame(0,t.nowRoleType,t.roleInfo.occupation,t.roleInfo.isBoss,t.roleInfo.quality),e.getChildByName("blueImg").active=!0,i.getChildByName("name").getComponent(cc.Label).string=t.roleInfo.roleName,i.getChildByName("name").color=s.ColorConfig.getQualityColor(t.roleInfo.quality);var n=this.findChild(i,"hp/content").getComponent(cc.Label),o=i.getChildByName("hp"),a=this.findChild(i,"mp/txtMp").getComponent(cc.Label),l=i.getChildByName("mp");this.nowRoleType==c.default.RoleType.Role?(n.string=Math.ceil(r.default.instance.getHp())+"/"+r.default.instance.getMaxHp(),o.width=r.default.instance.getHp()/r.default.instance.getMaxHp()*this.maxHpWidth,a.string=Math.ceil(r.default.instance.getMp())+"/"+r.default.instance.getMaxMp(),l.width=r.default.instance.getMp()/r.default.instance.getMaxMp()*this.maxHpWidth):this.nowRoleType==c.default.RoleType.Summoned?(n.string=t.roleInfo.getHp()+"/"+t.roleInfo.getMaxHp(),o.width=t.roleInfo.getHp()/t.roleInfo.getMaxHp()*this.maxHpWidth,a.string=t.roleInfo.getMp()+"/"+t.roleInfo.getMaxMp(),a.node.active=!1,l.width=this.maxHpWidth):this.nowRoleType==c.default.RoleType.Monster&&(n.string=t.roleInfo.getHp()+"/"+t.roleInfo.getMaxHp(),o.width=t.roleInfo.getHp()/t.roleInfo.getMaxHp()*this.maxHpWidth,a.string=t.roleInfo.getMp()+"/"+t.roleInfo.getMaxMp(),a.node.active=!1,l.width=this.maxHpWidth),o.width>this.maxHpWidth&&(o.width=this.maxHpWidth),l.width>this.maxHpWidth&&(l.width=this.maxHpWidth);var d=this.findChild(i,"debuff/iconDu");d&&(d.active=t.iconDu.active),(d=this.findChild(i,"debuff/icon_pojia"))&&(d.active=t.icon_pojia.active),(d=this.findChild(i,"debuff/iconHuoQiang"))&&(d.active=t.iconHuoQiang.active),(d=this.findChild(i,"debuff/iconYinShen"))&&(d.active=t.iconYinShen.active),(d=this.findChild(i,"debuff/iconBanYue"))&&(d.active=t.iconBanYue.active),(d=this.findChild(i,"debuff/iconMoFaDun"))&&(d.active=t.iconMoFaDun.active),(d=this.findChild(i,"debuff/iconAddHp"))&&(d.active=t.iconAddHp.active),(d=this.findChild(i,"debuff/iconShengSheng"))&&(d.active=t.iconShengSheng.active),(d=this.findChild(i,"debuff/icon_WujiZhenQi"))&&(d.active=t.icon_WujiZhenQi.active),(d=this.findChild(i,"debuff/icon_zhenqi"))&&(d.active=t.icon_zhenqi.active)},t.prototype.playEffect=function(e){var t=this;cc.tween(this.leftPanel).to(.34,{position:cc.v2(-30,19)}).call(function(){}).start(),cc.tween(this.blueImg1).to(0,{opacity:145}).to(.04,{opacity:255}).to(.2,{opacity:0}).call(function(){}).start(),cc.tween(this.blueImg2).to(0,{opacity:145}).to(.04,{opacity:255}).to(.2,{opacity:0}).call(function(){}).start(),cc.tween(this.rightPanel).to(.34,{position:cc.v2(30,-19)}).delay(.1).call(function(){t.node.destroy(),e.call()}).start()},t.prefabName="qiegePrefab",t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../config/ColorConfig":"ColorConfig","../model/RoleInfoModel":"RoleInfoModel","./RolePrefab":"RolePrefab"}],QuenchingCostConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ce010FquhFEW6mR6VydmuGx","QuenchingCostConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.level=e.level,i.quality2=e.quality2,i.quality3=e.quality3,i.quality4=e.quality4,i.quality5=e.quality5,i.quality6=e.quality6,i.rehandle3=e.rehandle3,i.rehandle4=e.rehandle4,i},t.getConfigByLevel=function(e){var t;return this.configMap.forEach(function(i,n){e==i.level&&(t=i)}),t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.level=parseInt(i)})},t.Config_Name="cuilianconfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.QuenchingCostConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],QuestionItem:[function(e,t,i){"use strict";cc._RF.push(t,"0d78b7e+YVMVanyPhHgrMyr","QuestionItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./ToStrongerItemBase"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unfoldContent=null,t.title=null,t.unfold=null,t.fold=null,t.explainItem=null,t.explainItem_title=null,t.explainItem_text=null,t}return n(t,e),t.prototype.onLoad=function(){this.onAddEvent(this.unfold,this.initUnfoldContent.bind(this)),this.onAddEvent(this.fold,this.foldContentCallback.bind(this))},t.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this.title.string=t.title,this.explainItem_text.string=t.desc},t.prototype.initUnfoldContent=function(){a.ToStrongerItemBase.changeList(a.ToStrongerItemTye.QuestionItem,this),this.unfold.active=!1,this.fold.active=!0,this.unfoldContent.active=!0},t.prototype.foldContentCallback=function(){this.unfold.active=!0,this.fold.active=!1,this.unfoldContent.active=!1},t.prototype.start=function(){},o([c(cc.Node)],t.prototype,"unfoldContent",void 0),o([c(cc.RichText)],t.prototype,"title",void 0),o([c(cc.Node)],t.prototype,"unfold",void 0),o([c(cc.Node)],t.prototype,"fold",void 0),o([c(cc.Node)],t.prototype,"explainItem",void 0),o([c(cc.Label)],t.prototype,"explainItem_title",void 0),o([c(cc.RichText)],t.prototype,"explainItem_text",void 0),t=o([r],t)}(a.ToStrongerItemBase);i.default=l,cc._RF.pop()},{"./ToStrongerItemBase":"ToStrongerItemBase"}],RadioButton:[function(e,t,i){"use strict";cc._RF.push(t,"d28adJe5DhMH58rZjlXziqP","RadioButton");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selected=!1,t.marks=[],t.btnList=[],t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){this.init()},t.prototype.init=function(){this.setSelected(this.selected,!0)},t.prototype.isSelected=function(){return this.selected},t.prototype.setSelected=function(e,t){var n=this;this.selected==e&&0==t||(e&&this.btnList.forEach(function(e){var t=e.getComponent(i);t&&t!=n&&(t.selected=!1,t.marks.forEach(function(e){e.active=!1}))}),this.selected=e,this.marks.forEach(function(t){t.active=e}))},t.prototype.selectOnClick=function(e){this.setSelected(!0)},o([r()],t.prototype,"selected",void 0),o([r(cc.Node)],t.prototype,"marks",void 0),o([r(i)],t.prototype,"btnList",void 0),t=i=o([s],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],RandomFuMoConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7f1ceL/oIZNq7nXs08at290","RandomFuMoConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.position=1,t.level10=[1,2],t.level20=[1,4],t.level30=[1,5],t.level40=[2,6],t.level50=[2,6],t.level60=[],t.level70=[2,6],t.level80=[2,10],t.level90=[2,15],t.level100=[2,15],t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.getMagicListByPosition=function(e){var t=[];return this.configMap.forEach(function(i,n){i.position==e&&t.push(i)}),t},t.getRandomFuMoConfig=function(e,t){var i;return this.configMap.forEach(function(n,o){n.position!=e.position||t!=n.statid||(i=n)}),i},t.getOneRandomFuMoConfig=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.statid==t)return n}},t.getMagicValueByConfig=function(e,t){var i=[];return t<=10?i=e.level10:t<=20?i=e.level20:t<=30?i=e.level30:t<=40?i=e.level40:t<=50?i=e.level50:t<=60?i=e.level60:t<=70?i=e.level70:t<=80?i=e.level80:t<=90?i=e.level90:t<=100&&(i=e.level100),i},t.getMaxValue=function(e,i){var n;return this.configMap.forEach(function(t,i){e==t.statid&&(n=t)}),t.getMagicValueByConfig(n,i)[1]},t.getLevelEntry=function(e,t){var i;return this.configMap.forEach(function(t,n){e==t.statid&&(i=t)}),i.statnum},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.RandomFuMoConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],RandomFuMoEntryConfig:[function(e,t,i){"use strict";cc._RF.push(t,"df6afc2u9ZAnKk1/TfVskpn","RandomFuMoEntryConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.position=1,t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.getRandomFuMoEntry=function(e,t){var i,n=this;return this.configMap.forEach(function(o,a){o.position==e&&t>=o.level[0]&&t<=o.level[1]&&(i=n.obj2Config(o))}),i},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.RandomFuMoEntryConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],RandomUtil:[function(e,t,i){"use strict";cc._RF.push(t,"be90aHdflxLy4G/RcdVPic8","RandomUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.nextInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.nextNumber=function(e,t){return Math.random()*(t-e)+e},e.nextSign=function(){return Math.random()<.5?1:-1},e.nextBoolean=function(){return Math.random()<.5},e.randomArr=function(t,i){for(var n=t.concat(),o=[],a=0;a<i&&!(n.length<=0);a++){var s=e.nextInt(0,n.length-1);o.push(n.splice(s,1)[0])}return o},e.randomItem=function(e){return this.randomArr(e,1)[0]},e.randomP=function(t,i,n,o){var a=e.nextNumber(t,i),s=e.nextNumber(n,o);return cc.v2(a,s)},e.randomIndexByPercent=function(e){void 0===e&&(e=[100,100,100]);for(var t=[],i=0,n=0;n<e.length;n++)i+=e[n],t[n]=i;var o=this.nextInt(0,i),a=t.length-1;for(n=0;n<t.length;n++)if(o<=t[n]){a=n;break}return a},e}();i.default=n,cc._RF.pop()},{}],RankModel:[function(e,t,i){"use strict";cc._RF.push(t,"38df3Ob1khKgrcY1JS2dOGs","RankModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../config/WordConfig"),o=function(){function e(){this.myRank=[]}return e.proto2ModelList=function(e){},e.Rank_TypeList=[n.WordConfig.getWord(60519),n.WordConfig.getWord(60520),n.WordConfig.getWord(60521)],e.modelList=[],e}();i.default=o,cc._RF.pop()},{"../../config/WordConfig":"WordConfig"}],RankRuleView:[function(e,t,i){"use strict";cc._RF.push(t,"28867jcExdIqI8oI64lQjsn","RankRuleView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../config/RuleConfig"),l=cc._decorator,d=l.ccclass;l.property;(function(e){e[e.TuiTu=4]="TuiTu"})(i.rankExplainType||(i.rankExplainType={}));var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.showType=e,this.txtContent=this.findChild(this.node,"panel/txtContent")},t.prototype.onShow=function(){s.default.instance.setTopUI(r.default.gameView.RankRuleView),this.txtContent.getComponent(cc.RichText).string=c.default.getConfigById(this.showType).desc},t=o([d],t)}(a.default);i.default=f,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/RuleConfig":"RuleConfig","../../config/ViewConfig":"ViewConfig"}],RankView:[function(e,t,i){"use strict";cc._RF.push(t,"847a7CDbfVCK4WQnzqXIusG","RankView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../network/SocketClient"),r=e("../../config/GameConst"),c=e("./FightRankModel"),l=e("../../../engine/Logger"),d=e("../../../engine/EventManager"),f=e("../../event/CommonEvent"),g=e("../../../engine/UIManager"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return n(t,e),i=t,t.prototype.onLoad=function(){this.btnClose=this.findChild(this.node,"bg/btnClose"),this.powerRank=this.findChild(this.node,"bg/scrollView/view/content/powerRank"),this.equipRank=this.findChild(this.node,"bg/scrollView/view/content/equipRank"),this.classRank=this.findChild(this.node,"bg/scrollView/view/content/classRank"),this.leiTaiRank=this.findChild(this.node,"bg/scrollView/view/content/leiTaiRank"),this.tianGuanRank=this.findChild(this.node,"bg/scrollView/view/content/tianGuanRank")},t.prototype.onEnable=function(){this.onAddEvent(this.btnClose,this.onClickClose.bind(this)),this.onAddEvent(this.powerRank,this.onClickPower.bind(this)),this.onAddEvent(this.equipRank,this.onClickEquip.bind(this)),this.onAddEvent(this.classRank,this.onClickClass.bind(this)),this.onAddEvent(this.leiTaiRank,this.onClickLeiTai.bind(this)),this.onAddEvent(this.tianGuanRank,this.onClickTianGuan.bind(this)),this.onAddEvent(this.findChild(this.node,"bg/scrollView/view/content/powerRank/btn_gift"),this.onClickPowerGift.bind(this)),this.onAddEvent(this.findChild(this.node,"bg/scrollView/view/content/equipRank/btn_gift"),this.onClickEquipGift.bind(this)),this.onAddEvent(this.findChild(this.node,"bg/scrollView/view/content/classRank/btn_gift"),this.onClickClassGift.bind(this)),this.onAddEvent(this.findChild(this.node,"bg/scrollView/view/content/leiTaiRank/btn_gift"),this.onClickLeiTaiGift.bind(this)),d.EventManager.instance.on(f.CommonEvent.Event_go_to_PaiHangBang,this.jumpPaiHangBang,this),d.EventManager.instance.on(f.CommonEvent.Event_Refresh_PowerRank,this.refreshRankByServer,this),i.showNum<1&&(s.default.s_fight_rank(r.GameConst.OCCUPATION.ZHAN_SHI),s.default.s_fight_rank(r.GameConst.OCCUPATION.FA_SHI),s.default.s_fight_rank(r.GameConst.OCCUPATION.DAO_SHI)),s.default.s_req_skytower_rank(),i.showNum++,this.refreshRankByServer()},t.prototype.onInitChild=function(e){l.Logger.log("onInitChild======2===",e),this.jumpPaiHangBang(e)},t.prototype.jumpPaiHangBang=function(e){e==i.PaiHangIndex.ZhanLi&&this.onClickPowerGift(),e==i.PaiHangIndex.Equip&&this.onClickEquipGift(),e==i.PaiHangIndex.TuiTu&&this.onClickClassGift(),e==i.PaiHangIndex.LeiTai&&this.onClickLeiTai(),e==i.PaiHangIndex.LeiTai&&this.onClickLeiTai(),e==i.PaiHangIndex.TianGuan&&this.onClickTianGuan()},t.prototype.refreshRankByServer=function(){var e=c.default.getMaxFightRankModel();e?(this.powerRank.getChildByName("info").active=!0,this.powerRank.getChildByName("info").getChildByName("roleName").getComponent(cc.Label).string=e.heroName,this.powerRank.getChildByName("info").getChildByName("rankValue").getComponent(cc.Label).string=u.WordConfig.getWord(60522)+e.fight):this.powerRank.getChildByName("info").active=!1},t.prototype.onClickPower=function(){g.default.instance.createView(h.default.gameView.PowerRankPanel)},t.prototype.onClickPowerGift=function(){},t.prototype.onClickEquip=function(){g.default.instance.createView(h.default.gameView.EquipRankPanel)},t.prototype.onClickEquipGift=function(){},t.prototype.onClickClass=function(){g.default.instance.createView(h.default.gameView.TuituRankPanel)},t.prototype.onClickClassGift=function(){},t.prototype.onClickLeiTaiGift=function(){},t.prototype.onClickLeiTai=function(){g.default.instance.createView(h.default.gameView.LeiTaiRankPanel)},t.prototype.onClickTianGuan=function(){g.default.instance.createView(h.default.gameView.TianGuanRankPanel)},t.prototype.onClickClose=function(){this.closeView()},t.PaiHangIndex={ZhanLi:1,Equip:2,TuiTu:3,LeiTai:4,TianGuan:5},t.showNum=0,t=i=o([m],t)}(a.default));i.default=C,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../network/SocketClient":"SocketClient","./FightRankModel":"FightRankModel"}],RebirthConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9dfa3BHmTtLU6S6jRIoAqYm","RebirthConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.atk=e.atk,i.def=e.def,i.equip_times=e.equip_times,i.expcost=e.expcost,i.level_limit=e.level_limit,i.mag=e.mag,i.magic_find1=e.magic_find1,i.next=e.next,i.roleLevel=e.roleLevel,i.spt=e.spt,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.RebirthConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],RecycleTipView:[function(e,t,i){"use strict";cc._RF.push(t,"1f8c42REqpHGL3kXLkHqUn3","RecycleTipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/ViewConfig"),c=e("../../config/WordConfig"),l=e("../../network/SocketClient"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id_list=[],t}return n(t,e),t.prototype.onInitChild=function(e,t,i,n,o){a.default.instance.setTopUI(r.default.gameView.RecycleTip),this.id_list=o,this.xilianEquaip=e,this.cuilianEquip=i,this.stone=t,this.cuilianStone=n},t.prototype.onShow=function(){var e=this;this.txtContent=this.node.getChildByName("txtContent").getComponent(cc.RichText),this.btnAgree=this.node.getChildByName("btnAgree"),this.btnCancel=this.node.getChildByName("btnCancel"),this.onAddEvent(this.btnAgree,this.onClickAgree.bind(this)),this.onAddEvent(this.btnCancel,function(){e.closeView()});var t=c.WordConfig.getWord(60533);t+=cc.js.formatStr(c.WordConfig.getWord(60534),this.xilianEquaip,this.cuilianEquip),t+=c.WordConfig.getWord(60535),t+=cc.js.formatStr(c.WordConfig.getWord(60536),this.stone,this.cuilianStone),t+=c.WordConfig.getWord(60537),this.txtContent.string=t},t.prototype.onClickAgree=function(){l.default.req_reback_items(this.id_list,2),this.closeView()},t=o([f],t)}(s.default));i.default=g,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../network/SocketClient":"SocketClient"}],RedDotModel:[function(e,t,i){"use strict";cc._RF.push(t,"4e133o6QsBKvpJD2NrlYVum","RedDotModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/LocalStorage"),o=e("../../engine/Logger"),a=e("./RoleInfoModel"),s=function(){function e(){this.key=0,this.isOnly=!1,this.isShow=!0}return e.initData=function(){var e=this.redDotLocalKey+a.default.instance.roleId,t=n.default.getItem(""+e);if(t)try{var i=JSON.parse(t);if(i){if(this.modelList=i,i.length<this.keyList.length){var s=[];for(var r in i)s.push(Number(i[r].key));var c=this.getArrDifference(s,this.keyList);for(r=0;r<c.length;r++)this.modelList[c[r]-1]=this.addNewModel(c[r]);this.setModelFromLocal()}}else this.saveToLocalStorage()}catch(e){o.Logger.error("RedDotModel.initData error==",e)}else this.saveToLocalStorage()},e.saveToLocalStorage=function(){for(var t=[],i=0;i<this.keyList.length;i++){var o=new e;o.key=this.keyList[i],o.isOnly=!0,o.isShow=!0,t[i]=o}var s=this.redDotLocalKey+a.default.instance.roleId;this.modelList=t,n.default.setItem(s,JSON.stringify(t))},e.addNewModel=function(t){var i=new e;return i.key=t,i.isOnly=!0,i.isShow=!0,i},e.getRedDotModelByKey=function(e){for(var t=0;t<this.modelList.length;t++)if(e==this.modelList[t].key)return this.modelList[t]},e.setRedDotIsShowByKey=function(e,t){for(var i=0;i<this.modelList.length;i++)e==this.modelList[i].key&&(this.modelList[i].isShow=t);this.setModelFromLocal()},e.setModelByKey=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);for(var n=0;n<this.modelList.length;n++)e==this.modelList[n].key&&(this.modelList[n].isOnly=t,this.modelList[n].isShow=i);this.setModelFromLocal()},e.getModelByKey=function(e){for(var t=0;t<this.modelList.length;t++)if(this.modelList[t].key==e)return this.modelList[t]},e.setModelFromLocal=function(){n.default.setItem(e.redDotLocalKey+a.default.instance.roleId,JSON.stringify(e.modelList))},e.getArrDifference=function(e,t){return e.concat(t).filter(function(e,t,i){return i.indexOf(e)===i.lastIndexOf(e)})},e.isXianShi=!1,e.isXianShiRedDot=!1,e.isShowRedDot=!1,e.modelList=[],e.redDotLocalKey="redDotLocalKey",e.fangshiFangyuDot=1,e.fangshiJinengDot=2,e.fangshiqungongDot=3,e.keyList=[1,2,3],e}();i.default=s,cc._RF.pop()},{"../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","./RoleInfoModel":"RoleInfoModel"}],RedPaperConfig:[function(e,t,i){"use strict";cc._RF.push(t,"18260VMun1GLYsg7+aTzLm7","RedPaperConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=1,t.times=1,t.weight=0,t.gem=0,t.limit_times=0,t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.times=e.times,i.weight=e.weight,i.gem=e.gem,i.limit_times=e.limit_times,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getAllConfigList=function(){var e=[];return this.configMap.forEach(function(t,i){e.push(t)}),e},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e!=i.id||(t=i)}),t},t.getLimitBygem=function(e){var t;return 58==e?t=-1:66==e?t=-1:88==e?t=-1:128==e?t=-1:168==e?t=-1:188==e?t=-1:288==e?t=-1:888==e?t=5:8888==e&&(t=1),t},t.Config_Name="redPaperConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],RedPointManager:[function(e,t,i){"use strict";cc._RF.push(t,"a28aejuoeZBoanAnvB4Uo/T","RedPointManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../event/CommonEvent");(function(e){e[e.Default=0]="Default",e[e.Bag=1]="Bag",e[e.LunHui=2]="LunHui",e[e.Recycle=3]="Recycle",e[e.Recycle_0=4]="Recycle_0",e[e.Recycle_1=5]="Recycle_1",e[e.Recycle_2=6]="Recycle_2",e[e.Recycle_3=7]="Recycle_3",e[e.Recycle_4=8]="Recycle_4",e[e.Skill=9]="Skill",e[e.JinJie=10]="JinJie",e[e.Jinjie_0=11]="Jinjie_0",e[e.Jinjie_1=12]="Jinjie_1",e[e.shenbin=13]="shenbin",e[e.shenbin_0=14]="shenbin_0",e[e.shenbin_1=15]="shenbin_1",e[e.shenbin_2=16]="shenbin_2",e[e.shenbinSkill=17]="shenbinSkill",e[e.shenbinSkill_0=18]="shenbinSkill_0",e[e.shenbinSkill_1=19]="shenbinSkill_1",e[e.shenbinSkill_2=20]="shenbinSkill_2",e[e.Activity_mafa=21]="Activity_mafa",e[e.Activity_growFund=22]="Activity_growFund",e[e.Activity_newYearGif=23]="Activity_newYearGif",e[e.ChargeGift=24]="ChargeGift",e[e.TianGuan=25]="TianGuan",e[e.Activity_Seven_Login=26]="Activity_Seven_Login",e[e.MaFaBaYe=27]="MaFaBaYe",e[e.Activity_chengba_marfa=28]="Activity_chengba_marfa",e[e.Activity_Everyday_Login=29]="Activity_Everyday_Login",e[e.fastKill=30]="fastKill",e[e.Activity_Strategy=31]="Activity_Strategy",e[e.Tujian=32]="Tujian",e[e.choujianMubiao=33]="choujianMubiao",e[e.shenbin2=34]="shenbin2",e[e.shenbin_0_1=35]="shenbin_0_1",e[e.shenbin_1_1=36]="shenbin_1_1",e[e.shenbin_2_1=37]="shenbin_2_1",e[e.worldBoss=38]="worldBoss",e[e.Star=39]="Star",e[e.Guild1=40]="Guild1",e[e.Guild2=41]="Guild2",e[e.Guild3=42]="Guild3",e[e.LuckyPuzzle=43]="LuckyPuzzle",e[e.ConsumerFeedback=44]="ConsumerFeedback",e[e.CRecharge12=45]="CRecharge12",e[e.CRecharge30=46]="CRecharge30",e[e.ConsumerFeedbackMerged=47]="ConsumerFeedbackMerged",e[e.Mail=48]="Mail",e[e.BaGua=49]="BaGua",e[e.Activity_newYearGif2=50]="Activity_newYearGif2",e[e.MaFaBaYe2=51]="MaFaBaYe2",e[e.BaGua_Equip=52]="BaGua_Equip",e[e.BaGua_Intensify=53]="BaGua_Intensify",e[e.BaGua_Star=54]="BaGua_Star",e[e.BaGua_Skill=55]="BaGua_Skill",e[e.ActiveTask=56]="ActiveTask",e[e.ActiveTaskDay=57]="ActiveTaskDay",e[e.ActiveTaskWeek=58]="ActiveTaskWeek",e[e.GuildRank=59]="GuildRank",e[e.GuildRedEnvelope=60]="GuildRedEnvelope",e[e.JingLian=61]="JingLian",e[e.JingLian_1=62]="JingLian_1",e[e.JingLian_2=63]="JingLian_2",e[e.CostCH=64]="CostCH",e[e.CostSkill=65]="CostSkill",e[e.CostTX=66]="CostTX",e[e.CostTXK=67]="CostTXK",e[e.CostLTK=68]="CostLTK",e[e.GuildTask=69]="GuildTask",e[e.Invitation=70]="Invitation",e[e.ExoticExploration1=71]="ExoticExploration1",e[e.ExoticExploration2=72]="ExoticExploration2",e[e.Mine=73]="Mine",e[e.Appellation1=74]="Appellation1",e[e.Appellation2=75]="Appellation2",e[e.ShenGong=76]="ShenGong",e[e.GuildPvP=77]="GuildPvP",e[e.Minemeilaoban=78]="Minemeilaoban",e[e.BaGua_fengmogu=79]="BaGua_fengmogu",e[e.XIANSHI_LIBAO=80]="XIANSHI_LIBAO",e[e.Star_xingchendan=81]="Star_xingchendan",e[e.Star_xingchenExp=82]="Star_xingchenExp",e[e.Activity_Holiday=83]="Activity_Holiday"})(i.RedPointId||(i.RedPointId={})),function(e){e[e.Default=0]="Default",e[e.Num=1]="Num",e[e.Text=2]="Text"}(i.RedPointType||(i.RedPointType={}));var a=function(){function e(){this.handlers=new Map}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getHandler=function(){return this.handlers},e.prototype.addHandler=function(e,t){var i=this;void 0===t&&(t=!1),e.eventIdList.forEach(function(n){!t&&i.handlers.get(n)||i.handlers.set(n,e)})},e.prototype.removeHandler=function(e){var t=this;e.eventIdList.forEach(function(e){t.handlers.delete(e)})},e.prototype.socketRespMsg=function(e){var t=this;this.handlers.forEach(function(i){i.protos.includes(e)&&i.eventIdList&&i.eventIdList.forEach(function(e){t.checkRedPointById(e)})})},e.prototype.checkRedPointById=function(e){var t;if(void 0===e)this.handlers.forEach(function(e){e&&e.checkRedPoint&&(t=e.checkRedPoint())});else{var i=this.handlers.get(e);if(!i||!i.checkRedPoint)return;t=i.checkRedPoint(e)}t&&t instanceof Array?t.forEach(function(e){n.EventManager.instance.dispatch(o.CommonEvent.Event_Red_Point,e)}):n.EventManager.instance.dispatch(o.CommonEvent.Event_Red_Point,t)},e}();i.default=a,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../event/CommonEvent":"CommonEvent"}],RedPointPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"c4ff08iRflMlbQzKQdZFjqS","RedPointPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../event/CommonEvent"),r=e("../manager/RedPointManager"),c=cc._decorator,l=c.ccclass,d=c.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redPointType=r.RedPointType.Default,t.redPointIdList=[r.RedPointId.Default],t.redNode=null,t.redPointData=[],t}return n(t,e),t.prototype.onLoad=function(){this.redPointData=[],a.EventManager.instance.on(s.CommonEvent.Event_Red_Point,this.handlerRedPointEvent,this)},t.prototype.onEnable=function(){this.redPointIdList.forEach(function(e){r.default.getInstance().checkRedPointById(e)})},t.prototype.onDestroy=function(){a.EventManager.instance.off(s.CommonEvent.Event_Red_Point,this.handlerRedPointEvent,this)},t.prototype.setRedPointIdList=function(e){this.redPointIdList=e,this.redPointData=[],this.redNode.active=!1,this.redPointIdList.forEach(function(e){r.default.getInstance().checkRedPointById(e)})},t.prototype.addRedPointIdList=function(e){this.redPointIdList=this.redPointIdList.concat(e),this.redPointIdList.forEach(function(e){r.default.getInstance().checkRedPointById(e)});for(var t=0,i=this.redPointIdList.length;t<i;t++){var n=this.redPointIdList[t];r.default.getInstance().checkRedPointById(n)}},t.prototype.handlerRedPointEvent=function(e){var t=this,i=!1;if(this.redPointIdList.length<=0){this.node,this.redPointIdList;this.redNode.active=!1}else e.type==this.redPointType&&this.redPointIdList.includes(e.id)&&(this.redPointData.every(function(n,o){return e.id!=n.id||(t.redPointData[o]=e,void(i=!0))}),i||this.redPointData.push(e),this.redPointData.every(function(e){if(e.show){t.node,t.redPointIdList;return t.redNode.active=e.show,!1}t.node,t.redPointIdList;return t.redNode.active=!1,!0}))},o([d({type:cc.Enum(r.RedPointType),tooltip:"\u7ea2\u70b9\u7c7b\u578b"})],t.prototype,"redPointType",void 0),o([d({type:[cc.Enum(r.RedPointId)],tooltip:"\u7ea2\u70b9id"})],t.prototype,"redPointIdList",void 0),o([d(cc.Node)],t.prototype,"redNode",void 0),t=o([l],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],RefineHelpView:[function(e,t,i){"use strict";cc._RF.push(t,"c62209XZrNHBoP83H3FXZbd","RefineHelpView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/MagicNameConfig"),r=e("../../config/RandomFuMoConfig"),c=e("../../../engine/UIManager"),l=e("../../config/ViewConfig"),d=e("../../model/MagicModel"),f=e("../../model/RoleInfoModel"),g=e("../../config/WordConfig"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t}return n(t,e),t.prototype.onInitChild=function(e,t){void 0===e&&(e=1),this.init(e,t)},t.prototype.init=function(e,t){var i;void 0===e&&(e=1),c.default.instance.setTopUI(l.default.gameView.RefineHelp),this.onAddEvent(this.findChild(this.node,"btnClose"),this.onClickClose.bind(this)),this.node.x=0,this.node.active=!0,this.scrollContent=this.getChild(this.node,"ScrollView/view/content");for(var n="",o=0,a=0,f=0;f<this.itemList.length;f++)this.itemList[f].destroy();this.itemList=[];var g=r.RandomFuMoConfig.getMagicListByPosition(t);for(f=0;f<g.length;f++){var h=g[f];if(!(h.min_level>e)){var u=h.statid;i=r.RandomFuMoConfig.getMagicValueByConfig(h,e),o=h.statnum,n=s.MagicNameConfig.getDesc(u);var p=d.default.formatMagicValue(u,i[1]);this.initItem(n,p,o,a++)}}},t.prototype.initItem=function(e,t,i,n){var o=this.getChild(this.node,"ScrollView/view/content/item");o.active=!1;var a=cc.instantiate(o);a.active=!0;var s=this.getChild(a,"bg"),r=this.getChild(a,"lblAttName",cc.Label),c=this.getChild(a,"lblMax",cc.Label),l=this.getChild(a,"lblEntry",cc.Label);f.default.instance.level>=30?(r.string=e,c.string=t+"",l.string=i+"",n%2==0&&(s.active=!1),this.scrollContent.addChild(a),this.itemList.push(a)):(e!=g.WordConfig.getWord(60538)&&e!=g.WordConfig.getWord(60539)||a.destroy(),r.string=e,c.string=t+"",l.string=i+"",n%2==0&&(s.active=!1),this.scrollContent.addChild(a),this.itemList.push(a))},t.prototype.onClickClose=function(){this.node.active=!1},t=o([u],t)}(a.default));i.default=p,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/MagicNameConfig":"MagicNameConfig","../../config/RandomFuMoConfig":"RandomFuMoConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel"}],RefineRuleView:[function(e,t,i){"use strict";cc._RF.push(t,"08737ZNQqlM5q6EMhrzn6Lp","RefineRuleView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/UIManager"),r=e("../config/ViewConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){s.default.instance.setTopUI(r.default.gameView.RefineRule)},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ViewConfig":"ViewConfig"}],RefineView:[function(e,t,i){"use strict";cc._RF.push(t,"e3bf6aPsMZEjKetMIifV9j6","RefineView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/ColorConfig"),g=e("../../config/EquipConfig"),h=e("../../config/GameConfig"),u=e("../../config/GameConst"),p=e("../../config/ITemsConfig"),m=e("../../config/MagicNameConfig"),C=e("../../config/RandomFuMoConfig"),_=e("../../config/ViewConfig"),v=e("../../config/WordConfig"),y=e("../../config/Xilianexpendconfig"),b=e("../../model/AdModel"),I=e("../../model/ItemInfoModel"),M=e("../../model/MagicModel"),w=e("../../model/RoleInfoModel"),k=e("../../network/SocketClient"),S=e("../../prefab/ItemPrefab"),P=e("../../sdk/SdkHelper"),E=e("../../utils/MusicHelper"),L=e("../../utils/UIHelper"),T=e("../PublicTipView"),R=e("./xianjiPrefab"),N=cc._decorator,B=N.ccclass,A=(N.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isNotTips=!1,t.isSave=!0,t.refineRan=[],t.stoneAmount=0,t.coin=0,t.useGold=!1,t.canLockNum=0,t.lockList=[],t.lockNodeList=[],t.suoNodeList=[],t.showId=0,t.wantList=[],t.txtNowFight=null,t.txtWantFight=null,t.clickingRefine=!1,t.pageType=0,t.newIndexList=[],t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e){this.model=e,this.itemId=this.model.itemId,this.model.quality==u.GameConst.QUALITY.PURPLE&&(this.canLockNum=this.model.randAttrList.length-1),this.model.quality==u.GameConst.QUALITY.ORANGE&&(this.canLockNum=this.model.randAttrList.length-1),this.config=g.EquipConfig.getEquipConfigById(this.model.itemType)},t.prototype.onShow=function(){l.default.instance.setTopUI(this.viewPath),this.refinePanel=this.getChild(this.node,"panel/refinePanel"),this.xianjiPanel=this.getChild(this.node,"panel/xianjiPanel"),this.txtTip=this.getChild(this.node,"panel/refinePanel/pnlBtn/txtTip",cc.Label),this.txtTip1=this.getChild(this.node,"panel/refinePanel/pnlBtn/txtTip1",cc.Label),this.xingyunTip=this.node.getChildByName("xingyunTip"),this.jindutiaoNum=this.findChild(this.refinePanel,"pnlPanel/jindutiao/jindutiaoNum").getComponent(cc.Label),this.xingyunTip.active=!1,this.txtTip.node.active=!1,this.txtTip1.node.active=!1,this.initData(),this.onEvent(),this.refreshLbl(),h.GameConfig.isWechat()&&(this.findChild(this.refinePanel,"pnlPanel/pnlLbl/pnlGold").active=!1,this.findChild(this.node,"panel/refinePanel/pnlBtn/btnUseGold").active=!1),this.btnTab0=this.findChild(this.node,"btnTab0"),this.btnTab1=this.findChild(this.node,"btnTab1"),this.btnTab1.active=this.config.is_xianji==g.XIANJI_TYPE.OK,this.pageType=i.TYPE_REFINE,this.changePage(),this.refreshLucky()},t.prototype.refreshLucky=function(){this.model=I.default.getItemByid(this.model.itemId);var e=g.EquipConfig.getEquipConfigById(this.model.itemType);this.jindutiaoNum.string=this.model.luckyValue+"/"+e.xilian_lucky;var t=this.node.getChildByName("xilian").getComponent(cc.Animation);if(this.model.luckyValue==e.xilian_lucky?(t.play(),t.node.active=!0):t.node.active=!1,this.findChild(this.refinePanel,"pnlPanel/jindutiao/img_xilian_ui_jindu").getComponent(cc.ProgressBar).progress=this.model.luckyValue/e.xilian_lucky,this.model.quality==u.GameConst.QUALITY.PURPLE||this.model.quality==u.GameConst.QUALITY.ORANGE){this.model.isCanEquipAnimation()?(this.txtTip.node.active=!0,this.txtTip.string=cc.js.formatStr(v.WordConfig.getWord(60540),this.model.xilianCost),this.txtTip1.node.active=!1):(this.txtTip1.node.active=!0,this.txtTip1.string=cc.js.formatStr(v.WordConfig.getWord(60541),this.model.xilianCost),this.txtTip.node.active=!1)}else this.txtTip1.node.active=!1,this.txtTip.node.active=!1},t.prototype.onUserInfoRefresh=function(){this.refreshLbl()},t.prototype.onSocketRespMsg=function(e,t){var i=this;if(e==r.ProtoConfig.c_req_fresh_equip){this.clickingRefine=!1;var n=(g=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_fresh_equip,t)).getRandattrlistList();this.wantList=[];for(var o=0;o<n.length;o++){var a=new M.default;a.magicId=n[o].getK(),a.magicValue=n[o].getV();var s=n[o].getPos();this.wantList[s-1]=a}var l=g.getIslucky();this.newIndexList=[];for(o=0;o<this.model.randAttrList.length;o++){var d=this.model.randAttrList[o],f=this.wantList[o];d.magicId==f.magicId&&d.magicValue==f.magicValue||this.newIndexList.push(o)}1==l&&(this.xingyunTip.active=!0,this.xingyunTip.y=-70.745,cc.tween(this.xingyunTip).delay(.1).to(1,{y:-30}).call(function(){i.xingyunTip.active=!1}).start()),this.refreshWantAttri(),this.refreshLbl()}else if(e==r.ProtoConfig.c_req_save_property){1==(g=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_save_property,t)).getRet()&&(this.model.randAttrList=this.wantList,this.initLeftRandomAttr(),this.wantList=[],this.scrollViewRight.content.removeAllChildren(),this.refreshLbl())}else if(e==r.ProtoConfig.c_req_buy){var g;(g=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_buy,t)).getRet()}else e==r.ProtoConfig.c_update_item_info&&this.refreshLucky();this.model=I.default.getItemByid(this.model.itemId),this.findChild(this.refinePanel,"pnlPanel/pnlName").getComponent(S.default).init(this.model)},t.prototype.onEvent=function(){var e=this;this.onAddEventOnly(this.node,"panel/btnDisplay",this.onDisplay.bind(this)),this.onAddEventOnly(this.node,"panel/btnClose",this.onClose.bind(this)),this.onAddEvent(this.findChild(this.node,"xianjiRule/darkLayer"),function(){e.findChild(e.node,"xianjiRule").active=!1}),this.onAddEventOnly(this.node,"panel/refinePanel/pnlBtn/btnRefine",this.onClickRefine.bind(this)),this.onAddEventOnly(this.node,"panel/refinePanel/pnlBtn/btnSave",this.onSave.bind(this)),this.onAddEventOnly(this.node,"panel/refinePanel/pnlBtn/btnUseGold",this.onUseGold.bind(this)),this.onAddEventOnly(this.node,"btnTab0",this.changePageType.bind(this,"btnTab0")),this.onAddEventOnly(this.node,"btnTab1",this.changePageType.bind(this,"btnTab1")),a.EventManager.instance.on(u.EVENT_NAME.REFRESH_REFINE,this.refreshLbl,this),this.onAddEvent(this.findChild(this.node,"panel/refinePanel/pnlPanel/btnEye"),function(){l.default.instance.createView(_.default.gameView.RefineHelp,null,e.model.getConfig().level,e.model.getConfig().position)}),this.initTipFrame()},t.prototype.changePageType=function(e){if("btnTab0"==e){if(this.xianjiPanel.getComponent(R.default).xianjistate!=R.default.xianji_IDLE&&this.xianjiPanel.getComponent(R.default).wantList.length>0)return void this.showTips(3);this.findChild(this.node,"panel/kd__bg").height=845,this.pageType=i.TYPE_REFINE}else if("btnTab1"==e){if(!this.isSave&&!this.isNotTips&&this.wantList.length>0)return void this.showTips(2);this.findChild(this.node,"panel/kd__bg").height=750,this.pageType=i.TYPE_XIANJI}this.changePage()},t.prototype.changePage=function(){if(this.pageType==i.TYPE_REFINE)this.refinePanel.active=!0,this.xianjiPanel.active=!1,this.findChild(this.btnTab0,"isSelet").active=!0,this.findChild(this.btnTab0,"noSelet").active=!1,this.findChild(this.btnTab1,"isSelet").active=!1,this.findChild(this.btnTab1,"noSelet").active=!0,this.xianjiPanel.getComponent(R.default).initNoSeletModel(),this.findChild(this.node,"panel/kd__bg").height=845,this.initLeftRandomAttr(),this.refreshLucky();else if(this.pageType==i.TYPE_XIANJI){this.refinePanel.active=!1,this.xianjiPanel.active=!0,this.findChild(this.btnTab0,"isSelet").active=!1,this.findChild(this.btnTab0,"noSelet").active=!0,this.findChild(this.btnTab1,"isSelet").active=!0,this.findChild(this.btnTab1,"noSelet").active=!1,this.wantList=[],this.scrollViewRight.content.removeAllChildren(),this.isSave=!0,this.refreshLbl(),this.node.getChildByName("xilian").getComponent(cc.Animation).node.active=!1}},t.prototype.initData=function(){this.findChild(this.refinePanel,"pnlPanel/pnlName").getComponent(S.default).init(this.model),this.scrollViewLeft=this.getChild(this.refinePanel,"pnlPanel/scrollViewLeft",cc.ScrollView),this.scrollViewRight=this.getChild(this.refinePanel,"pnlPanel/scrollViewRight",cc.ScrollView),this.scrollViewLeft.content.removeAllChildren(),this.scrollViewRight.content.removeAllChildren(),this.itemNode=this.findChild(this.refinePanel,"pnlPanel/item"),this.itemNode.active=!1,this.txtNowFight=this.getChild(this.refinePanel,"pnlPanel/pnlLbl/txtNowFight",cc.Label),this.txtWantFight=this.getChild(this.refinePanel,"pnlPanel/pnlLbl/txtWantFight",cc.Label),this.initLeftRandomAttr(),this.xianjiPanel.getComponent("xianjiPrefab").init(this.model),this.useGold=!1,this.getChild(this.node,"panel/refinePanel/pnlBtn/btnUseGold/btn_gou").active=this.useGold},t.prototype.initLeftRandomAttr=function(){this.model=I.default.getItemByid(this.itemId),this.lockNodeList=[],this.suoNodeList=[],this.scrollViewLeft.content.removeAllChildren();for(var e=0;e<this.model.randAttrList.length;e++){var t=cc.instantiate(this.itemNode);t.active=!0,this.scrollViewLeft.content.addChild(t);var i=t.getChildByName("lockItem").getChildByName("lockNode");this.canLockNum>0?i.active=!0:i.active=!1,this.lockNodeList[e]=i;var n=this.lockNodeList[e].getChildByName("suoNode");n.active=!1,this.suoNodeList[e]=n,t.setPosition(0,0),i.on(cc.Node.EventType.TOUCH_END,this.onClickLock.bind(this,e));var o=this.model.randAttrList[e],a=g.EquipConfig.getEquipConfigById(this.model.itemType),s=C.RandomFuMoConfig.getRandomFuMoConfig(a,o.magicId),r=(C.RandomFuMoConfig.getMagicValueByConfig(s,a.level),t.getChildByName("txtDesc").getComponent(cc.Label));r.string=m.MagicNameConfig.getDesc(o.magicId)+":"+M.default.formatMagicValue(o.magicId,o.magicValue),r.node.color=g.EquipConfig.getRandomAttColor(a,o)}for(e=0;e<this.lockList.length;e++)this.suoNodeList[this.lockList[e]].active=!0;if(this.lockList.length>=this.canLockNum)for(e=0;e<this.lockNodeList.length;e++){-1==this.lockList.indexOf(e)&&(this.lockNodeList[e].active=!1)}},t.prototype.onClickLock=function(e){var t=this.lockList.indexOf(e);if(-1==t){if(this.lockList.push(e),this.suoNodeList[e].active=!0,this.lockList.length>=this.canLockNum)for(var i=0;i<this.lockNodeList.length;i++){-1==this.lockList.indexOf(i)?this.lockNodeList[i].active=!1:(this.lockNodeList[i].active=!0,this.suoNodeList[i].active=!0)}}else if(this.suoNodeList[e].active=!1,this.lockList.splice(t,1),this.lockList.length<this.canLockNum)for(i=0;i<this.lockNodeList.length;i++)this.lockNodeList[i].active=!0;this.refreshLbl()},t.prototype.refreshWantAttri=function(){this.scrollViewRight.content.removeAllChildren();for(var e=0;e<this.wantList.length;e++){var t=cc.instantiate(this.itemNode);t.active=!0,this.scrollViewRight.content.addChild(t);var i=t.getChildByName("lockItem").getChildByName("lockNode");i.active=!0;var n=i.getChildByName("suoNode");-1!=this.lockList.indexOf(e)?n.active=!0:(n.active=!1,i.active=!1),t.setPosition(0,0);var o=this.wantList[e],a=g.EquipConfig.getEquipConfigById(this.model.itemType),s=C.RandomFuMoConfig.getRandomFuMoConfig(a,o.magicId),r=(C.RandomFuMoConfig.getMagicValueByConfig(s,a.level),t.getChildByName("txtDesc").getComponent(cc.Label));r.string=m.MagicNameConfig.getDesc(o.magicId)+":"+M.default.formatMagicValue(o.magicId,o.magicValue),r.node.color=g.EquipConfig.getRandomAttColor(a,o)}},t.prototype.onAddEventOnly=function(e,t,i,n){void 0===n&&(n=!1);var o=this.getChild(e,""+t);n&&o.off("click"),o.on("click",function(){i(),E.MusicHelper.play_click()}.bind(this),this)},t.prototype.refreshLbl=function(){this.stoneAmount=this.getStoneAmount(),this.coin=this.getCoin();var e=w.default.instance.getRefineStoneAmount(),t=this.getChild(this.refinePanel,"pnlPanel/pnlLbl/pnlCoin/lblCoin",cc.Label);t.string=this.coin+"",w.default.instance.getCoin()>=this.coin?t.node.color=f.ColorConfig.GreenColor:t.node.color=f.ColorConfig.RedColor;var i=this.getChild(this.refinePanel,"pnlPanel/pnlLbl/pnlStone/lblStone",cc.RichText);e>=this.stoneAmount?i.string="<color=#00ff00>"+e+"</color><color=#ffffff>/"+this.stoneAmount+"</color>":i.string="<color=#FF0000>"+e+"</color><color=#ffffff>/"+this.stoneAmount+"</color>",this.txtNowFight.string=g.EquipConfig.getFanRenZhiLi(this.model.itemType,this.model.baseAddAttrList,this.model.randAttrList)+"",this.wantList.length>0?this.txtWantFight.string=g.EquipConfig.getFanRenZhiLi(this.model.itemType,this.model.baseAddAttrList,this.wantList)+"":this.txtWantFight.string="0"},t.prototype.getStoneAmount=function(){var e=this.model.getConfig().level;return y.Xilianexpendconfig.getNeedConfig(e,this.model.quality)[1]*Math.pow(2,this.lockList.length)},t.prototype.getCoin=function(){return y.Xilianexpendconfig.getNeedConfig(this.model.getConfig().level,this.model.quality)[0]},t.prototype.onDisplay=function(){this.pageType==i.TYPE_REFINE?l.default.instance.createView(_.default.gameView.PublicTipView,null,T.RuleType.TYPE_XILIAN):this.pageType==i.TYPE_XIANJI&&l.default.instance.createView(_.default.gameView.PublicTipView,null,T.RuleType.TYPE_XIANJI)},t.prototype.onClickRefine=function(e){!this.isSave&&!this.isNotTips&&this.wantList.length>0?this.showTips(1):this.clickingRefine||this.onRefine()},t.prototype.checkGold=function(){var e=!0;if(w.default.instance.getCoin()<this.coin){e=!1,this.clickingRefine=!1;var t=p.ITemsConfig.getITemsConfigById(u.GameConst.RES_TYPE.COIN.toString());h.GameConfig.isWechat()?b.default.getAdLostTimes(b.Ad_Type.Coin)>0?t&&t.jump_id&&t.jump_id.length>0?l.default.instance.createView(_.default.gameView.ItemAcquire,null,null,t,_.default.gameView.refine):l.default.instance.createView(_.default.gameView.buyMoney):(v.WordConfig.showWord(60102),t&&t.jump_id&&t.jump_id.length>0&&l.default.instance.createView(_.default.gameView.ItemAcquire,null,null,t,_.default.gameView.refine)):t&&t.jump_id&&t.jump_id.length>0?l.default.instance.createView(_.default.gameView.ItemAcquire,null,null,t,_.default.gameView.refine):L.UIHelper.showCoinNoEnough()}return e},t.prototype.onRefine=function(){var e=0,t=w.default.instance.getRefineStoneAmount(),i=this.stoneAmount,n=p.ITemsConfig.getITemsConfigById(u.ItemId.REFINE),o=I.default.getItem(u.ItemId.REFINE);if(t<this.stoneAmount){if(this.clickingRefine=!1,h.GameConfig.isWechat())return v.WordConfig.showWord(60101),void(n&&n.jump_id&&n.jump_id.length>0&&l.default.instance.createView(_.default.gameView.ItemAcquire,null,o,n,_.default.gameView.refine));if(e=(this.stoneAmount-t)*n.gem,this.useGold){if(!this.checkGold())return;if(i=t,w.default.instance.getGold()<e){this.clickingRefine=!1,L.UIHelper.showTip(v.WordConfig.getWord(60115));var a=I.default.getConfigById(u.GameConst.RES_TYPE.YUAN_BAO);return void(a&&a.jump_id&&a.jump_id.length>0&&l.default.instance.createView(_.default.gameView.ItemAcquire,null,null,a,_.default.gameView.refine))}return this.isSave=!1,this.refine(1),void this.refreshLbl()}return s.Logger.log("demandGold=================",e,n.gem),this.clickingRefine=!1,void(n&&n.jump_id&&n.jump_id.length>0&&l.default.instance.createView(_.default.gameView.ItemAcquire,null,o,n,_.default.gameView.refine))}if(this.checkGold()){if(!h.GameConfig.connectServer){var r=I.default.getItem(u.ItemId.REFINE);e>0&&w.default.instance.decGold(e),r&&r.useArticle(i),w.default.instance.decCoin(this.coin)}P.default.sdkCustomAction(31,i),P.default.sdkCustomAction(18,this.coin),this.isSave=!1,this.refine(),this.refreshLbl()}},t.prototype.refine=function(e){var t=this;if(void 0===e&&(e=-1),h.GameConfig.connectServer){for(var i=0;i<this.lockList.length;i++)this.lockList[i]++;this.clickingRefine=!0,k.default.req_fresh_equip(this.model.itemId,this.lockList,e);for(i=0;i<this.lockList.length;i++)this.lockList[i]--;this.scheduleOnce(function(){t.clickingRefine&&(t.clickingRefine=!1)},1)}else{this.wantList=[];var n=[],o=[m.MagicNameConfig.MagicId.atk,m.MagicNameConfig.MagicId.mag,m.MagicNameConfig.MagicId.spt,m.MagicNameConfig.MagicId.def,m.MagicNameConfig.MagicId.speed,m.MagicNameConfig.MagicId.DamageReduction,m.MagicNameConfig.MagicId.BonusDamage,m.MagicNameConfig.MagicId.HpDrain,m.MagicNameConfig.MagicId.MpDrain,m.MagicNameConfig.MagicId.magic_find1,m.MagicNameConfig.MagicId.equip_times,m.MagicNameConfig.MagicId.lucky,m.MagicNameConfig.MagicId.hp,m.MagicNameConfig.MagicId.mp,m.MagicNameConfig.MagicId.atk_p,m.MagicNameConfig.MagicId.mag_p,m.MagicNameConfig.MagicId.spt_p,m.MagicNameConfig.MagicId.hp_p,m.MagicNameConfig.MagicId.mp_p];for(i=0;i<o.length;i++)n[i]=0;var a=this.model.randAttrList;for(i=0;i<a.length;i++){if(-1!=this.lockList.indexOf(i)){var s=a[i];this.wantList[i]=s,n[o.indexOf(s.magicId)]+=1}}var r=g.EquipConfig.randomAddAttrList(this.model.randAttrList.length-this.lockList.length,this.model.getConfig(),n);for(i=0;i<this.wantList.length;i++)this.wantList[i]||(this.wantList[i]=r.shift());this.wantList=this.wantList.concat(r),this.refreshWantAttri()}},t.prototype.onSave=function(){0!=this.wantList.length&&k.default.req_save_property(this.model.itemId)},t.prototype.onUseGold=function(e){var t=this.getChild(this.node,"panel/refinePanel/pnlBtn/btnUseGold"),i=this.getChild(this.node,"panel/refinePanel/pnlBtn/btnUseGold/btn_gou");this.useGold?this.useGold=!1:this.useGold=!0,h.GameConfig.isWechat()&&(t.active=!1),i.active=this.useGold},t.prototype.onClose=function(){if(this.pageType==i.TYPE_REFINE){if(!this.isSave&&!this.isNotTips&&this.wantList.length>0)return void this.showTips(0);l.default.instance.closeView(_.default.gameView.refine)}else if(this.pageType==i.TYPE_XIANJI){if(this.xianjiPanel.getComponent(R.default).xianjistate!=R.default.xianji_IDLE&&this.xianjiPanel.getComponent(R.default).wantList.length>0)return void this.showTips(4);l.default.instance.closeView(_.default.gameView.refine)}},t.prototype.initTipFrame=function(){var e=this,t=this.getChild(this.node,"pnlTips"),n=this.getChild(t,"pnlBtn");this.findChild(n,"btnAgree").on(cc.Node.EventType.TOUCH_END,function(){if(0==e.showId)l.default.instance.closeView(_.default.gameView.refine);else if(1==e.showId){e.onRefine();var n=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);e.isNotTips=n.isChecked,t.active=!1}else if(2==e.showId){n=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);e.isNotTips=n.isChecked,t.active=!1,e.pageType=i.TYPE_XIANJI,e.changePage()}else if(3==e.showId){n=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);t.active=!1,e.pageType=i.TYPE_REFINE,e.changePage()}else 4==e.showId&&l.default.instance.closeView(_.default.gameView.refine)}),this.findChild(n,"btnCancel").on(cc.Node.EventType.TOUCH_END,function(){t.active=!1})},t.prototype.getHaveMaxMagic=function(){for(var e=!1,t=0;t<this.wantList.length;t++)if(-1!=this.newIndexList.indexOf(t)&&g.EquipConfig.getRandomAttrQuality(this.config,this.wantList[t])==u.GameConst.QUALITY.ORANGE){e=!0;break}return e},t.prototype.showTips=function(e){if(void 0===e&&(e=1),this.pageType==i.TYPE_REFINE){if(1==e&&this.isNotTips)return;this.showId=e,(a=this.getChild(this.node,"pnlTips")).active=!0,a.x=0;var t=this.getChild(a,"pnlLbl/content",cc.Label),n=v.WordConfig.getWord(60345);this.getHaveMaxMagic()&&(n=v.WordConfig.getWord(60346));var o=[v.WordConfig.getWord(60347),n,v.WordConfig.getWord(60347)];t.string=""+o[e];this.getChild(a,"pnlBtn");this.getChild(a,"pnlBtn/tipsCheck",cc.Toggle).node.active=0!=e&&3!=e}else if(this.pageType==i.TYPE_XIANJI){var a;this.showId=e,(a=this.getChild(this.node,"pnlTips")).active=!0,a.x=0,(t=this.getChild(a,"pnlLbl/content",cc.Label)).string=v.WordConfig.getWord(60348);this.getChild(a,"pnlBtn");this.getChild(a,"pnlBtn/tipsCheck",cc.Toggle).node.active=!1}},t.TYPE_REFINE=0,t.TYPE_XIANJI=1,t=i=o([B],t)}(d.default));i.default=A,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/RandomFuMoConfig":"RandomFuMoConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../config/Xilianexpendconfig":"Xilianexpendconfig","../../model/AdModel":"AdModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../sdk/SdkHelper":"SdkHelper","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView","./xianjiPrefab":"xianjiPrefab"}],RegisterView:[function(e,t,i){"use strict";cc._RF.push(t,"228ea3D2D9HQLxnOohR/M/O","RegisterView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/ColorConfig"),f=e("../config/GameConfig"),g=e("../config/GameConst"),h=e("../config/ViewConfig"),u=e("../config/WordConfig"),p=e("../model/RoleInfoModel"),m=e("../model/ZoneModel"),C=e("../network/SocketClient"),_=e("../sdk/FeiYouSdkManager"),v=e("../sdk/SdkHandler"),y=e("../sdk/SdkManager"),b=e("../utils/MusicHelper"),I=e("../utils/NameHelper"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectItem=[],t.movePositionList=[],t}return n(t,e),t.prototype.onInitChild=function(e){this.pos=e+1},t.prototype.onShow=function(){var e=this;this.view=this.node.getChildByName("view"),this.view.getChildByName("startGame").on(cc.Node.EventType.TOUCH_END,this.oncreateRole.bind(this)),this.nameId=this.findChild(this.view,"userName/name").getComponent(cc.EditBox),this.findChild(this.view,"userName/random_btn").on(cc.Node.EventType.TOUCH_END,function(){b.MusicHelper.play_click(),e.nameId.string=I.NameHelper.getName()},this),this.view.getChildByName("notity").on("click",function(){b.MusicHelper.play_click(),c.default.instance.createView(h.default.gameView.notity)},this),this.view.getChildByName("break").on(cc.Node.EventType.TOUCH_END,function(){b.MusicHelper.play_click(),e.closeView()},this),this.txtContent=this.findChild(this.view,"select/content").getComponent(cc.Label);for(var t=0;t<3;t++)this.selectItem.push(this.findChild(this.view,"select/"+t)),this.selectItem[t].on(cc.Node.EventType.TOUCH_END,this.onSelectItem.bind(this,t)),this.movePositionList[t]=this.selectItem[t].getPosition();this.onSelectItem(Math.floor(3*Math.random()))},t.prototype.onHide=function(){},t.prototype.onSelectItem=function(e){b.MusicHelper.play_click(),0==e?(this.roleType=g.GameConst.OCCUPATION.DAO_SHI,this.txtContent.string=u.WordConfig.getWord(60475)):1==e?(this.roleType=g.GameConst.OCCUPATION.FA_SHI,this.txtContent.string=u.WordConfig.getWord(60476)):(this.roleType=g.GameConst.OCCUPATION.ZHAN_SHI,this.txtContent.string=u.WordConfig.getWord(60477));for(var t=0;t<this.selectItem.length;t++)t==e?(this.selectItem[t].color=d.ColorConfig.hexToColor("#FEDFA7"),cc.tween(this.selectItem[t]).to(.2,{position:this.movePositionList[0]}).start()):(this.selectItem[t].color=d.ColorConfig.WhiteColor,0==e&&1==t?(cc.tween(this.selectItem[1]).to(.2,{position:this.movePositionList[1]}).start(),cc.tween(this.selectItem[2]).to(.2,{position:this.movePositionList[2]}).start()):1==e&&0==t?(cc.tween(this.selectItem[0]).to(.2,{position:this.movePositionList[2]}).start(),cc.tween(this.selectItem[2]).to(.2,{position:this.movePositionList[1]}).start()):2==e&&0==t&&(cc.tween(this.selectItem[0]).to(.2,{position:this.movePositionList[1]}).start(),cc.tween(this.selectItem[1]).to(.2,{position:this.movePositionList[2]}).start()))},t.prototype.oncreateRole=function(){if(b.MusicHelper.play_click(),""!=this.nameId.string)if(I.NameHelper.isAvailableName(this.nameId.string)){var e=this,t=this.roleType,i=this.nameId.string,n=this.pos;I.NameHelper.getPingbizi(this.nameId.string,function(e){o()},function(){o()})}else u.WordConfig.showWord(60331);else u.WordConfig.showWord(60330);function o(){f.GameConfig.connectServer?C.default.req_create_role(t,i,n):e.closeView()}},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_req_create_role){var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_req_create_role,t);a.Logger.log("c_req_create_role==",i);var n=p.default.proto2BaseModel(i.getBaseRoleInfo()),o={server_id:m.ZoneModel.nowZoneInfoModel.server_id,server_name:m.ZoneModel.nowZoneInfoModel.server_name,role_id:n.roleId,role_name:n.roleName,role_level:1,balance:0};if(f.GameConfig.sdkType==f.SdkType.Feiyou)_.FeiYouSdkManager.roleCreate(n);else if(f.GameConfig.sdkType==f.SdkType.FengYue){var c={eventName:v.AuthType.createRole,param:o};y.default.sdkAuth(v.AuthType.onCustomEvent,JSON.stringify(c))}else if(f.GameConfig.sdkType==f.SdkType.Xiaotun){c={eventName:v.AuthType.createRole,param:o};y.default.sdkAuth(v.AuthType.onCustomEvent,JSON.stringify(c))}y.default.sdkAuth(v.AuthType.onUploadCreateRole,null,n),this.closeView()}},t=o([w],t)}(l.default));i.default=k,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","../network/SocketClient":"SocketClient","../sdk/FeiYouSdkManager":"FeiYouSdkManager","../sdk/SdkHandler":"SdkHandler","../sdk/SdkManager":"SdkManager","../utils/MusicHelper":"MusicHelper","../utils/NameHelper":"NameHelper"}],RemindDialog:[function(e,t,i){"use strict";cc._RF.push(t,"f658f1ogjJMCIhpjnnjFq3v","RemindDialog");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../engine/ResourcesManager"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/DefaultConfig"),f=e("../../config/GameConst"),g=e("../../config/ITemsConfig"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=e("../../model/AppDownloadModel"),m=e("../../model/ItemInfoModel"),C=e("../ItemPrefab"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prompt1=null,t.prompt2=null,t.prompt3=null,t.freeLayout=null,t.payLayout=null,t.noPrompt=null,t.itemNode=null,t.app=null,t}return n(t,e),t.prototype.start=function(){this.app=new p.AppDownloadModel,p.AppDownloadModel.getTodayShowDownload()?this.noPrompt.isChecked=!1:this.noPrompt.isChecked=!0,this.itemNode.active=!1,this.prompt1.string=u.WordConfig.getWord(61990),this.prompt2.string=u.WordConfig.getWord(61991),this.prompt3.string=u.WordConfig.getWord(61992);var e=d.DefaultConfig.getConfigById(228),t=d.DefaultConfig.getConfigById(229);for(var i in e.value){var n=g.ITemsConfig.getITemsConfigById(i),o=m.default.create(f.GameConst.ITEM_KIND.ITEM,n.id,e.value[i],n.quality);(a=cc.instantiate(this.itemNode)).getComponent(C.default).init(o,!0),this.freeLayout.node.addChild(a),a.active=!0}for(var i in t.value){var a;n=g.ITemsConfig.getITemsConfigById(i),o=m.default.create(f.GameConst.ITEM_KIND.ITEM,n.id,t.value[i],n.quality);(a=cc.instantiate(this.itemNode)).getComponent(C.default).init(o,!0),this.payLayout.node.addChild(a),a.active=!0}},t.prototype.loadLoading=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Promise.all([r.default.instance.loadResAsync("json/Word",cc.JsonAsset),r.default.instance.loadResAsync("json/DefaultConfig",cc.JsonAsset),r.default.instance.loadResAsync("json/iTemsConfig",cc.JsonAsset)])];case 1:return e.sent(),u.WordConfig.json2Config(cc.loader.getRes("json/Word",cc.JsonAsset).json),d.DefaultConfig.json2Config(cc.loader.getRes("json/DefaultConfig",cc.JsonAsset).json),g.ITemsConfig.json2Config(cc.loader.getRes("json/iTemsConfig",cc.JsonAsset).json),[2]}})})},t.prototype.confirm=function(){p.AppDownloadModel.instance.startDownload(),c.default.instance.closeView(h.default.gameView.ZhuanDuanRemindDialog,null),this.node.destroy()},t.prototype.close=function(){this.noPrompt.isChecked?p.AppDownloadModel.setTodayShowDownload(!1):p.AppDownloadModel.setTodayShowDownload(!0),c.default.instance.closeView(h.default.gameView.ZhuanDuanRemindDialog,null),this.node.destroy()},o([y(cc.Label)],t.prototype,"prompt1",void 0),o([y(cc.Label)],t.prototype,"prompt2",void 0),o([y(cc.Label)],t.prototype,"prompt3",void 0),o([y(cc.Layout)],t.prototype,"freeLayout",void 0),o([y(cc.Layout)],t.prototype,"payLayout",void 0),o([y(cc.Toggle)],t.prototype,"noPrompt",void 0),o([y(cc.Node)],t.prototype,"itemNode",void 0),t=o([v],t)}(l.default);i.default=b,cc._RF.pop()},{"../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/AppDownloadModel":"AppDownloadModel","../../model/ItemInfoModel":"ItemInfoModel","../ItemPrefab":"ItemPrefab"}],RemolePreView:[function(e,t,i){"use strict";cc._RF.push(t,"0c641V3fY5E14PAAMFfuHhx","RemolePreView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/MagicNameConfig"),r=e("../../../engine/UIManager"),c=e("../../config/ViewConfig"),l=e("../../model/MagicModel"),d=e("../../config/RuneConfig"),f=e("../../../engine/DropDownPrefab"),g=e("../../config/EquipConfig"),h=e("../../config/GameConst"),u=e("../../config/MapConfig"),p=e("../../config/ColorConfig"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t.fuwenIdList=[],t}return n(t,e),t.prototype.onInitChild=function(e){var t=this;r.default.instance.setTopUI(c.default.gameView.RemolePreView),this.dropBox=this.findChild(this.node,"dropBox"),this.fuwenIdList=[];var i=[],n=g.EquipConfig.getEquipConfigById(e.itemType);if(n.world==u.MapConfig.WORLD.LunHui)if(e.quality==h.GameConst.QUALITY.GREEN)for(var o=0;o<n.rune1.length;o++)this.fuwenIdList.push(n.rune1[o]);else if(e.quality==h.GameConst.QUALITY.BLUE)for(o=0;o<n.rune2.length;o++)this.fuwenIdList.push(n.rune2[o]);else if(e.quality==h.GameConst.QUALITY.PURPLE)for(o=0;o<n.rune3.length;o++)this.fuwenIdList.push(n.rune3[o]);else if(e.quality==h.GameConst.QUALITY.ORANGE)for(o=0;o<n.rune4.length;o++)this.fuwenIdList.push(n.rune4[o]);this.fuwenIdList.sort(function(e,t){return e-t});for(o=0;o<this.fuwenIdList.length;o++){var a=d.RuneConfig.getRuneById(this.fuwenIdList[o]);i.push(new f.DropDownConfig(o,a.name,p.ColorConfig.getFuWenColor(a.quality)))}var s=0;for(o=0;o<this.fuwenIdList.length;o++)this.fuwenIdList[o]==e.fuwenId&&(s=o);this.dropBox.getComponent(f.DropDownPrefab).init(i,s,function(e){var i=t.fuwenIdList[e.index];t.init(i)}),this.init(this.fuwenIdList[s])},t.prototype.formatArr=function(e){for(var t=[],i=0;i<e.length;i++)-1==t.indexOf(e[i])&&t.push(e[i]);return t},t.prototype.init=function(e){this.onAddEvent(this.findChild(this.node,"btnClose"),this.onClickClose.bind(this)),this.node.x=0,this.node.active=!0,this.scrollContent=this.getChild(this.node,"ScrollView/view/content");for(var t="",i="",n="",o=0,a=0;a<this.itemList.length;a++)this.itemList[a].destroy();this.itemList=[];var r=d.RuneConfig.getRuneById(e),c=[];for(a=0;a<r.property.length;a++){var f=new l.default;f.magicId=r.property[a],f.min=r.pro_min[a],f.max=r.tpro_max[a],c.push(f)}var g=c;for(a=0;a<g.length;a++)i=s.MagicNameConfig.getDesc(g[a].magicId),t=l.default.formatMagicValue(g[a].magicId,g[a].max),n=l.default.formatMagicValue(g[a].magicId,g[a].min),this.initItem(i,t,n,o++)},t.prototype.initItem=function(e,t,i,n){var o=this.getChild(this.node,"ScrollView/view/content/item");o.active=!1;var a=cc.instantiate(o);a.active=!0;var s=this.getChild(a,"bg"),r=this.getChild(a,"lblAttName",cc.Label),c=this.getChild(a,"lblMax",cc.Label),l=this.getChild(a,"lblMin",cc.Label);r.string=e,c.string=t+"",l.string=i+"",n%2==0&&(s.active=!1),this.scrollContent.addChild(a),this.itemList.push(a)},t.prototype.onClickClose=function(){this.node.active=!1},t=o([C],t)}(a.default));i.default=_,cc._RF.pop()},{"../../../engine/DropDownPrefab":"DropDownPrefab","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/MagicNameConfig":"MagicNameConfig","../../config/MapConfig":"MapConfig","../../config/RuneConfig":"RuneConfig","../../config/ViewConfig":"ViewConfig","../../model/MagicModel":"MagicModel"}],RemoleView:[function(e,t,i){"use strict";cc._RF.push(t,"29febNOvUJLtq1vFH+Vh2um","RemoleView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/ColorConfig"),g=e("../../config/EquipConfig"),h=e("../../config/GameConfig"),u=e("../../config/GameConst"),p=e("../../config/ITemsConfig"),m=e("../../config/MagicNameConfig"),C=e("../../config/MapConfig"),_=e("../../config/QuenchingCostConfig"),v=e("../../config/RuneConfig"),y=e("../../config/ViewConfig"),b=e("../../config/WordConfig"),I=e("../../event/CommonEvent"),M=e("../../model/AdModel"),w=e("../../model/ItemInfoModel"),k=e("../../model/MagicModel"),S=e("../../model/RoleInfoModel"),P=e("../../network/SocketClient"),E=e("../../prefab/ItemPrefab"),L=e("../../utils/UIHelper"),T=e("./cuilianView"),R=cc._decorator,N=R.ccclass,B=(R.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSave=!0,t.isNotTips=!1,t.clickingRefine=!1,t.txtNowFight=null,t.txtWantFight=null,t.fuwenName=null,t.fuwenName_left=null,t.fuwenName_right=null,t.itemCnt=0,t.coin=0,t}return n(t,e),t.prototype.init=function(e){this.model=e,this.modelId=this.model.itemId,this.scrollViewLeft=this.getChild(this.node,"pnlPanel/scrollViewLeft",cc.ScrollView),this.scrollViewRight=this.getChild(this.node,"pnlPanel/scrollViewRight",cc.ScrollView),this.itemNode=this.findChild(this.node,"pnlPanel/item"),this.itemNode.active=!1,this.txtNowFight=this.getChild(this.node,"pnlPanel/pnlLbl/txtNowFight",cc.Label),this.txtWantFight=this.getChild(this.node,"pnlPanel/pnlLbl/txtWantFight",cc.Label),this.fuwenName=this.getChild(this.node,"pnlPanel/fuwenName",cc.Label),this.fuwenName_left=this.getChild(this.node,"pnlPanel/fuwenName_left",cc.Label),this.fuwenName_right=this.getChild(this.node,"pnlPanel/fuwenName_right",cc.Label),this.config=g.EquipConfig.getEquipConfigById(this.model.itemType),this.jindutiaoNum=this.findChild(this.node,"pnlPanel/jindutiao/jindutiaoNum").getComponent(cc.Label),this.initTipFrame(),this.refreshLeft()},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"pnlBtn/btnRefine"),this.onClickDoRemode.bind(this)),this.onAddEvent(this.findChild(this.node,"pnlBtn/btnSave"),this.onClickSave.bind(this)),this.onAddEvent(this.findChild(this.node,"pnlPanel/btnEye"),this.onClickPreView.bind(this)),a.EventManager.instance.on(I.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),this.isSave=!0,this.model=w.default.getItemByid(this.modelId)},t.prototype.onShow=function(){},t.prototype.onClickDoRemode=function(){if(!(this.model.embedRuneList.length>0))return!this.isSave&&!this.isNotTips&&this.scrollViewRight.content.childrenCount>0?(s.Logger.log,void this.showTips(1)):void this.doRemode();b.WordConfig.showWord(60349)},t.prototype.doRemode=function(){if(!this.clickingRefine){var e=p.ITemsConfig.getITemsConfigById("I8000"),t=w.default.getItem("I8000");if(S.default.instance.getItemAmount("I8000")<this.itemCnt)return b.WordConfig.showWord(60350),void(e&&e.jump_id&&e.jump_id.length>0&&l.default.instance.createView(y.default.gameView.ItemAcquire,null,t,e,y.default.gameView.cuilian));if(S.default.instance.getCoin()<this.coin){var i=p.ITemsConfig.getITemsConfigById(u.GameConst.RES_TYPE.COIN.toString());h.GameConfig.isWechat()?M.default.getAdLostTimes(M.Ad_Type.Coin)>0?i&&i.jump_id&&i.jump_id.length>0?l.default.instance.createView(y.default.gameView.ItemAcquire,null,null,i,y.default.gameView.cuilian):l.default.instance.createView(y.default.gameView.buyMoney):(b.WordConfig.showWord(60102),i&&i.jump_id&&i.jump_id.length>0?l.default.instance.createView(y.default.gameView.ItemAcquire,null,null,i,y.default.gameView.cuilian):L.UIHelper.showCoinNoEnough()):i&&i.jump_id&&i.jump_id.length>0?l.default.instance.createView(y.default.gameView.ItemAcquire,null,null,i,y.default.gameView.cuilian):L.UIHelper.showCoinNoEnough()}else this.clickingRefine=!0,this.isSave=!1,P.default.s_do_remode(Number(this.model.itemId))}},t.prototype.onClickSave=function(){this.scrollViewRight.content.childrenCount>0&&P.default.s_save_remode(Number(this.model.itemId))},t.prototype.onClickPreView=function(){l.default.instance.createView(y.default.gameView.RemolePreView,null,this.model)},t.prototype.onSocketRespMsg=function(e,t){if(this.model=w.default.getItemByid(this.modelId),e==r.ProtoConfig.c_do_remode){T.default.RemoleIsSave=!1,this.clickingRefine=!1;var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_do_remode,t).getRuneMsg(),n=i.getRuneId(),o=v.RuneConfig.getRuneById(n),a=k.default.proto2RunList(i.getPropertyListList());this.refreshRight(o,a)}else if(e==r.ProtoConfig.c_save_remode){T.default.RemoleIsSave=!0;c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_save_remode,t);this.refreshLeft(),this.clearRight()}this.refreshLucky()},t.prototype.refreshLeft=function(){if(this.config.world==C.MapConfig.WORLD.LunHui){this.refreshLucky(),this.model=w.default.getItemByid(this.modelId),this.findChild(this.node,"pnlPanel/pnlName").getComponent(E.default).init(this.model);var e=v.RuneConfig.getRuneById(this.model.fuwenId);this.fuwenName_left.string=e.name,this.fuwenName_left.node.color=f.ColorConfig.getFuWenColor(e.quality),this.fuwenName.string=e.name,this.fuwenName.node.color=f.ColorConfig.getFuWenColor(e.quality),this.scrollViewLeft.content.removeAllChildren();for(var t=0;t<this.model.fuwenAtriList.length;t++){var i=cc.instantiate(this.itemNode);i.active=!0,this.scrollViewLeft.content.addChild(i),i.setPosition(0,0);var n=this.model.fuwenAtriList[t],o=i.getChildByName("txtDesc").getComponent(cc.Label);o.string=m.MagicNameConfig.getDesc(n.magicId)+":"+k.default.formatMagicValue(n.magicId,n.magicValue)+cc.js.formatStr(b.WordConfig.getWord(60423),k.default.formatMagicValue(n.magicId,n.max)),o.node.color=g.EquipConfig.getColorByCurrAndMax(n.magicValue,n.max)}this.txtNowFight.string=g.EquipConfig.getLunHuiZhiLi(this.model.itemType,this.model.baseAddAttrList,this.model.fuwenAtriList)+"",this.refreshCost()}},t.prototype.refreshRight=function(e,t){this.fuwenName_right.string=e.name,this.fuwenName_right.node.color=f.ColorConfig.getFuWenColor(e.quality),this.scrollViewRight.content.removeAllChildren();for(var i=0;i<t.length;i++){var n=cc.instantiate(this.itemNode);n.active=!0,this.scrollViewRight.content.addChild(n),n.setPosition(0,0);var o=t[i],a=n.getChildByName("txtDesc").getComponent(cc.Label);a.string=m.MagicNameConfig.getDesc(o.magicId)+":"+k.default.formatMagicValue(o.magicId,o.magicValue)+cc.js.formatStr(b.WordConfig.getWord(60423),k.default.formatMagicValue(o.magicId,o.max)),a.node.color=g.EquipConfig.getColorByCurrAndMax(o.magicValue,o.max)}this.txtWantFight.string=g.EquipConfig.getLunHuiZhiLi(this.model.itemType,this.model.baseAddAttrList,t)+"",this.refreshCost()},t.prototype.clearRight=function(){this.fuwenName_right.string="",this.scrollViewRight.content.removeAllChildren(),this.txtWantFight.string="0",T.default.RemoleIsSave=!0},t.prototype.getCoin=function(){var e=_.QuenchingCostConfig.getConfigByLevel(g.EquipConfig.getEquipConfigById(this.model.itemType).level);return this.model.quality==u.GameConst.QUALITY.PURPLE?e.rehandle3[0]:this.model.quality==u.GameConst.QUALITY.ORANGE?e.rehandle4[0]:void 0},t.prototype.getFuwen=function(){var e=_.QuenchingCostConfig.getConfigByLevel(g.EquipConfig.getEquipConfigById(this.model.itemType).level);return this.model.quality==u.GameConst.QUALITY.PURPLE?e.rehandle3[1]:this.model.quality==u.GameConst.QUALITY.ORANGE?e.rehandle4[1]:void 0},t.prototype.refreshCost=function(){this.itemCnt=this.getFuwen(),this.coin=this.getCoin();var e=S.default.instance.getItemAmount("I8000"),t=this.getChild(this.node,"pnlPanel/pnlLbl/pnlCoin/lblCoin",cc.Label);t.string=this.coin+"",S.default.instance.getCoin()>=this.coin?t.node.color=f.ColorConfig.GreenColor:t.node.color=f.ColorConfig.RedColor;var i=this.getChild(this.node,"pnlPanel/pnlLbl/pnlStone/lblStone",cc.RichText);e>=this.itemCnt?i.string="<color=#00ff00>"+e+"</color><color=#ffffff>/"+this.itemCnt+"</color>":i.string="<color=#FF0000>"+e+"</color><color=#ffffff>/"+this.itemCnt+"</color>"},t.prototype.refreshLucky=function(){this.model=w.default.getItemByid(this.model.itemId),this.jindutiaoNum.string=this.model.remodeLuckyValue+"/"+this.config.rehandlelucky;var e=this.node.getChildByName("xilian").getComponent(cc.Animation);this.model.remodeLuckyValue==this.config.rehandlelucky?(e.play(),e.node.active=!0):e.node.active=!1,this.findChild(this.node,"pnlPanel/jindutiao/img_xilian_ui_jindu").getComponent(cc.ProgressBar).progress=this.model.remodeLuckyValue/this.config.rehandlelucky},t.prototype.showTips=function(e){if(void 0===e&&(e=1),1!=e||!this.isNotTips){this.showId=e;var t=this.node.getChildByName("pnlTips");t.active=!0,t.x=0;var i=this.getChild(t,"pnlLbl/content",cc.Label),n=[b.WordConfig.getWord(60351),b.WordConfig.getWord(60352),b.WordConfig.getWord(60353)];i.string=""+n[e];this.getChild(t,"pnlBtn");var o=this.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);o.node.active=0!=e&&3!=e}},t.prototype.initTipFrame=function(){var e=this,t=this.getChild(this.node,"pnlTips"),i=this.getChild(t,"pnlBtn");this.findChild(i,"btnAgree").on(cc.Node.EventType.TOUCH_END,function(){if(0==e.showId)l.default.instance.closeView(y.default.gameView.cuilian);else if(1==e.showId){var i=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);e.isNotTips=i.isChecked,t.active=!1,e.doRemode()}else if(2==e.showId){i=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);e.isNotTips=i.isChecked,t.active=!1}else if(3==e.showId){i=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);t.active=!1}else 4==e.showId&&l.default.instance.closeView(y.default.gameView.cuilian)}),this.findChild(i,"btnCancel").on(cc.Node.EventType.TOUCH_END,function(){t.active=!1})},t=o([N],t)}(d.default));i.default=B,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/MapConfig":"MapConfig","../../config/QuenchingCostConfig":"QuenchingCostConfig","../../config/RuneConfig":"RuneConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/AdModel":"AdModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/UIHelper":"UIHelper","./cuilianView":"cuilianView"}],RenameView:[function(e,t,i){"use strict";cc._RF.push(t,"c87c1n0HKFHUr/pxbg+og4/","RenameView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/ViewBase"),c=e("../config/WordConfig"),l=e("../network/SocketClient"),d=e("../utils/MusicHelper"),f=e("../utils/NameHelper"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){var e=this;this.nameId=this.findChild(this.node,"bg/editBox").getComponent(cc.EditBox),this.nameId.string=f.NameHelper.getName(),this.findChild(this.node,"bg/button_random").on(cc.Node.EventType.TOUCH_END,function(){d.MusicHelper.play_click(),e.nameId.string=f.NameHelper.getName()},this),this.btn_reName=this.findChild(this.node,"bg/btn_querengaiming"),this.btn_canel=this.findChild(this.node,"bg/btn_fangqigaiming"),this.btn_close=this.findChild(this.node,"bg/btnClose"),this.onAddEvent(this.btn_reName,this.onChangeName.bind(this)),this.onAddEvent(this.btn_canel,this.onCloseView.bind(this)),this.onAddEvent(this.btn_close,this.onCloseView.bind(this))},t.prototype.onSocketRespMsg=function(e,t){e==a.ProtoConfig.c_change_name&&(1==s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_change_name,t).getRes()&&this.closeView())},t.prototype.onChangeName=function(){if(""!=this.nameId.string)if(f.NameHelper.isAvailableName(this.nameId.string)){var e=this.nameId.string;f.NameHelper.getPingbizi(e,function(e){t()},function(){t()})}else c.WordConfig.showWord(60331);else c.WordConfig.showWord(60330);function t(){l.default.s_change_name(e)}},t.prototype.onCloseView=function(){this.closeView()},t=o([h],t)}(r.default));i.default=u,cc._RF.pop()},{"../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig","../network/SocketClient":"SocketClient","../utils/MusicHelper":"MusicHelper","../utils/NameHelper":"NameHelper"}],ResModel:[function(e,t,i){"use strict";cc._RF.push(t,"921959iXtNHaIaQfXEHzA3V","ResModel"),cc._RF.pop()},{}],ResourceItem:[function(e,t,i){"use strict";cc._RF.push(t,"663d9DlC0RF8rq0jG7nqMDV","ResourceItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./ToStrongerItemBase"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unfoldContent=null,t.title=null,t.description=null,t.unfold=null,t.fold=null,t.explainItem=null,t}return n(t,e),t.prototype.onLoad=function(){this.onAddEvent(this.unfold,this.initUnfoldContent.bind(this)),this.onAddEvent(this.fold,this.foldContentCallback.bind(this))},t.prototype.init=function(t,i){if(e.prototype.init.call(this,t,i),this.title.string=t.title,this.description.string=t.desc,t.gainResoureTitle2Arr.length===t.gainResoureDescArr.length)for(var n=0;n<t.gainResoureTitle2Arr.length;n++){var o=cc.instantiate(this.explainItem);o.getChildByName("explainItem_title").getComponent(cc.Label).string=t.gainResoureTitle2Arr[n],o.getChildByName("explainItem_text").getComponent(cc.RichText).string=t.gainResoureDescArr[n],o.parent=this.unfoldContent,o.active=!0,n==t.gainResoureTitle2Arr.length-1&&(o.getChildByName("cuttingLine").active=!1);var a=o.getChildByName("go"),s=(new Map).set(a,t.gainResoureJumpId[n]);this.bindJumpAction(s)}},t.prototype.initUnfoldContent=function(){a.ToStrongerItemBase.changeList(a.ToStrongerItemTye.ResourceItem,this),this.unfold.active=!1,this.fold.active=!0,this.unfoldContent.active=!0},t.prototype.foldContentCallback=function(){this.unfold.active=!0,this.fold.active=!1,this.unfoldContent.active=!1},t.prototype.start=function(){},o([c(cc.Node)],t.prototype,"unfoldContent",void 0),o([c(cc.Label)],t.prototype,"title",void 0),o([c(cc.RichText)],t.prototype,"description",void 0),o([c(cc.Node)],t.prototype,"unfold",void 0),o([c(cc.Node)],t.prototype,"fold",void 0),o([c(cc.Node)],t.prototype,"explainItem",void 0),t=o([r],t)}(a.ToStrongerItemBase);i.default=l,cc._RF.pop()},{"./ToStrongerItemBase":"ToStrongerItemBase"}],ResourcesManager:[function(e,t,i){"use strict";cc._RF.push(t,"14cf3rEBxVEnqdg1ay9XxuI","ResourcesManager");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../game/event/CommonEvent"),s=e("./EventManager"),r=e("./Logger"),c=function(){return function(e,t,i,n,o){this.path=e,this.callback=t,this.state=0,this.taret=i,this.clipName=n,this.type=o}}(),l=function(){function e(){this.type=null,this.url=null,this.resource=null,this.ref=0,this.depends=[]}return Object.defineProperty(e.prototype,"assetKey",{get:function(){return 0==this.depends.length?null:this.depends[this.depends.length-1]},enumerable:!0,configurable:!0}),e}(),d={itemIcon:"itemIcon"},f=function(){function e(){this.loadingPrefabTaskList=[],this.loadingPrefabState=0,this.loadSpriteMap=new Map,this.atlasMap=new Map,this._loadedRes=new Map,this._loadingRes={},this.persistenceResInfos=[]}return Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(e){this._font=e},enumerable:!0,configurable:!0}),e.prototype.addTaskPrefab=function(e,t,i){this.loadingPrefabTaskList.push(new c(e,t,i,"",cc.Node)),this.loadPrefabTask()},e.prototype.loadPrefabTask=function(){var e=this;if(1!=this.loadingPrefabState&&this.loadingPrefabTaskList.length>0){this.loadingPrefabState=1;var t=this.loadingPrefabTaskList[0],i=cc.loader.getRes(t.path,cc.Prefab),n=function(i,n){null==i?t.callback.call(t.taret,n):console.warn("loadPrefabTask error=",i),e.loadingPrefabState=0,e.loadingPrefabTaskList.shift(),e.loadPrefabTask()};if(i)return void n(null,i);cc.loader.loadRes(t.path,n)}},e.prototype.getAtlas=function(e){var t=this.atlasMap.get(e);if(!t)try{(t=cc.loader.getRes("atlas/"+e,cc.SpriteAtlas))&&this.atlasMap.set(e,t)}catch(e){s.EventManager.instance.dispatch(a.CommonEvent.Event_AddDebugLog,"getAtlas ====> \u627e\u4e0d\u5230\u8d44\u6e90 "+t)}return t},e.prototype.loadSpriteInAtlas=function(e,t,i){var n=this,o=this.getAtlas(i),c=t.slice(i.length+1);if(o){var l=o.getSpriteFrame(c);l?e.spriteFrame=l:s.EventManager.instance.dispatch("item atlas not found "+c)}else cc.loader.loadRes("atlas/"+i,cc.SpriteAtlas,function(o,l){if(o)r.Logger.warn("\u56fe\u96c6\u52a0\u8f7d\u5931\u8d25\uff1a",i),s.EventManager.instance.dispatch(a.CommonEvent.Event_AddDebugLog,"\u56fe\u96c6\u52a0\u8f7d\u5931\u8d25\uff1a"+i);else try{if(n.atlasMap.set(i,l),!cc.isValid(e))return;e.spriteFrame=l.getSpriteFrame(c)}catch(e){s.EventManager.instance.dispatch(a.CommonEvent.Event_AddDebugLog," ====> \u627e\u4e0d\u5230\u8d44\u6e90 \n atlas = "+i+" , \n frame = "+c+", \n path = "+t+", \n e = "+e)}})},e.prototype.getAtlasName=function(e){var t=e.indexOf("/");if(-1!=t)return d[e.slice(0,t)]},e.prototype.loadSprite=function(e,t,i){var n=this;void 0===i&&(i=!1);var o=this.loadSpriteMap.get(t);if(o&&cc.isValid(o))e.spriteFrame=this.loadSpriteMap.get(t);else{var a=this.getAtlasName(t);if(a)return void this.loadSpriteInAtlas(e,t,a);cc.loader.loadRes(t,cc.SpriteFrame,function(o,a){if(o)return r.Logger.warn("loadSprite error===",t),void s.EventManager.instance.dispatch("loadSprite error==="+t);cc.isValid(e)&&(e&&e.node&&(e.spriteFrame=a),i&&n.loadSpriteMap.set(t,a))})}},e.prototype.clearSpriteMap=function(){this.loadSpriteMap.clear()},e.prototype.instantiateBy=function(e,t){this.loadPrefab(e,function(e,i){if(e)r.Logger.warn(e);else{var n=cc.instantiate(i);t&&t(n)}})},e.prototype.loadPrefab=function(e,t){this.loadRes(e,cc.Prefab,t)},e.prototype.loadPrefabAsync=function(e){return n(this,void 0,void 0,function(){return o(this,function(t){return[2,this.loadResAsync(e,cc.Prefab)]})})},e.prototype.loadResAsync=function(e,t){return n(this,void 0,void 0,function(){var i=this;return o(this,function(n){return[2,new Promise(function(n,o){i.loadRes(e,t,function(e,t){n(t)})})]})})},e.prototype.loadRes=function(e,t,i,n){var o=this,a=this._loadedRes.get(e);if(a&&a.resource&&a.resource.isValid)i&&i(null,a.resource);else{for(var s in this._loadingRes)if(this._loadingRes.hasOwnProperty(s)){var c=this._loadingRes[s];cc.sys.now()-c>=1e4&&delete this._loadingRes[s]}this._loadingRes[e]=cc.sys.now(),cc.loader.loadRes(e,t,function(n,s){if(delete o._loadingRes[e],n)return r.Logger.error(n,e),void(i&&i(n,s));s.assetUrl=e;var c=void 0;(c=a||new l).type=t,c.url=e,c.resource=s,o._loadedRes.set(e,c),i&&i(null,s)})}},e.prototype.loadResListAsync=function(e,t){return n(this,void 0,void 0,function(){var i=this;return o(this,function(n){return[2,new Promise(function(n,o){i.loadResList(e,t,function(){n(null)})})]})})},e.prototype.loadResList=function(t,i,n){0==t.length&&n(null);var o={},a=0,s=0,c=0;(function l(){for(var d=function(){c++;var e=t[s];cc.loader.loadRes(e.url,e.type,function(n,s){o[e.url]=n/(s||1);var r=0;for(var c in o)r+=o[c];i(a+r,t.length)},function(i,s){i&&r.Logger.warn(i),c--,a++,delete o[e.url],a==t.length?n(i):l()})};s<t.length&&c<e.QUEUE_SIZE;s++)d()})()},e.instance=new e,e.QUEUE_SIZE=4,e}();i.default=f,cc._RF.pop()},{"../game/event/CommonEvent":"CommonEvent","./EventManager":"EventManager","./Logger":"Logger"}],ReviveView:[function(e,t,i){"use strict";cc._RF.push(t,"ad94cgjUtNDaJJKArh0gqlh","ReviveView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../utils/MusicHelper"),r=e("../model/RoleInfoModel"),c=e("../../engine/EventManager"),l=e("../event/CommonEvent"),d=e("../sdk/SdkHelper"),f=e("../network/SocketClient"),g=e("../config/WordConfig"),h=e("../config/MapConfig"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.yuanBao=0,t.needbao=20,t.timeDown=15,t.timeOut=0,t.times=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.setTopUI(),this.findChild(this.node,"view/panel/close").on(cc.Node.EventType.TOUCH_END,this.onClickClose.bind(this)),this.findChild(this.node,"view/panel/brack").on(cc.Node.EventType.TOUCH_END,this.onClickClose.bind(this)),this.findChild(this.node,"view/panel/btnRevive").on(cc.Node.EventType.TOUCH_END,this.onClickLocalRevive.bind(this)),this.findChild(this.node,"view/panel/btn_Revive_v").on(cc.Node.EventType.TOUCH_END,this.onClickLocalRevive.bind(this))},t.prototype.onShow=function(){},t.prototype.onEnable=function(){c.EventManager.instance.on(l.CommonEvent.Event_Buy_Suc,this.onBuySuc,this),this.times=0,this.timeOut=0,this.findChild(this.node,"view/panel/timeDown").active=!1,h.MapConfig.currFightType==h.MapConfig.FIGHTTYPE.SERVER&&(this.findChild(this.node,"view/panel/timeDown").active=!0)},t.prototype.onHide=function(){},t.prototype.onClickLocalRevive=function(){s.MusicHelper.play_click(),r.default.instance.getGold()>=this.needbao?(d.default.sdkCustomAction(12,this.needbao),f.default.req_buy(6,1,1,1,1,"")):g.WordConfig.showWord(60115)},t.prototype.onBuySuc=function(){6==f.default.nowbuyType&&(h.MapConfig.currFightType==h.MapConfig.FIGHTTYPE.SERVER||(r.default.instance.revive(),f.default.s_req_set_role_hp(),c.EventManager.instance.dispatch(l.CommonEvent.Event_RoleRevive)),this.closeView())},t.prototype.onClickClose=function(){s.MusicHelper.play_click(),this.closeView(),r.default.instance.gotoRebornMap()},t.prototype.update=function(){h.MapConfig.currFightType==h.MapConfig.FIGHTTYPE.SERVER&&(this.timeOut++,this.timeOut>=cc.game.getFrameRate()&&(this.timeOut=0,this.times++,this.findChild(this.node,"view/panel/timeDown").getComponent(cc.Label).string=cc.js.formatStr(g.WordConfig.getWord(61401),Math.floor(this.timeDown-this.times)),this.times>=this.timeDown&&this.onClickClose()))},t=o([p],t)}(a.default));i.default=m,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/MapConfig":"MapConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../sdk/SdkHelper":"SdkHelper","../utils/MusicHelper":"MusicHelper"}],RoleInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"4535ecET8BIZ4B6XqSvoiuz","RoleInfoModel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/EventManager"),a=e("../../engine/Logger"),s=e("../../engine/ProtoConfig"),r=e("../../engine/SafeDataModelBase"),c=e("../../engine/UIManager"),l=e("../config/BagConfig"),d=e("../config/BaGuaEquipConfig"),f=e("../config/DefaultConfig"),g=e("../config/EquipConfig"),h=e("../config/GameConfig"),u=e("../config/GameConst"),p=e("../config/HeroConfig"),m=e("../config/ITemsConfig"),C=e("../config/JingJieConfig"),_=e("../config/MagicNameConfig"),v=e("../config/MapConfig"),y=e("../config/SkillConfig"),b=e("../config/StarAbilityConfig"),I=e("../config/ViewConfig"),M=e("../config/WordConfig"),w=e("../event/CommonEvent"),k=e("../manager/RedPointManager"),S=e("../manager/SkillEffectManager"),P=e("../network/SocketClient"),E=e("../sdk/FeiYouSdkManager"),L=e("../sdk/SdkHelper"),T=e("../serverFight/SerSkillEffectManager"),R=e("../utils/MusicHelper"),N=e("../utils/UIHelper"),B=e("./AdModel"),A=e("./BossModel"),G=e("./BusinessModel"),x=e("./CostumeModel"),O=e("./EquipGridModel"),V=e("./FightModel"),j=e("./ItemInfoModel"),D=e("./JingJieModel"),F=e("./JingLianModel"),H=e("./MagicModel"),U=e("./MakeEquipModel"),W=e("./MineModel"),q=e("./PrivilegeModel"),z=e("./RedDotModel"),J=e("./SettingModel"),Y=e("./SkillEffectModel"),Z=e("./SkillModel"),K=e("./SpecialRingModel"),X=e("./StarPlanetInfoModel"),Q=function(e){function t(){var t=e.call(this)||this;return t.eventIdList=[],t.protos=[],t.level=0,t.hpKey="hp",t.mpKey="mp",t.hp=0,t.mp=0,t.coin=0,t.exp=0,t.yuanBao=0,t.leiTaiBi=0,t.guildGX=0,t.guildExploits=0,t._tianGuanScore=0,t.cream=0,t.privilegeList=[],t.skillModelList=[],t.itemInfoList=[],t.equipGridList=[],t.jingJieList=[],t.attrList=[],t.blessList=[],t.shenBinList=[],t.maxServerBagNum=198,t.bagAMount=0,t.bagRemainingnumber=0,t._bagModelList=[],t.skillEffectList=[],t.refineList=[],t.totalFight=0,t.maxFight=0,t.switchingMapId=-1,t.isInitBag=!1,t.last_off_line_time=0,t.off_line_exp=0,t.off_line_coin=0,t.off_line_cream=0,t.off_line_need_gold=0,t.has_reward=0,t.has_status=0,t.has_shuangdan=1,t.has_shuangdan2=1,t.qiegeTimes=0,t.qiegeRefreshTime=0,t.showFangYu=0,t.showJiNeng=0,t.showQunGong=0,t.showGift=0,t.mineAllow=!1,t.shopShowFangyuHongDian=0,t.shopShowJinengHongDian=0,t.shopShowQunGongHongDian=0,t.has_daliyReward=0,t.title=0,t.sign_list=[],t.shenbinSkillList=[],t.specialRingModelList=[],t.fuhuoTime=0,t.hushenTime=0,t.shenliTime=0,t.isFirstLogin=!0,t.fengyinzhiliActTime=0,t.fengyinzhiliEndTime=0,t.personalize=new x.Personalize,t.eventIdList=[k.RedPointId.Recycle,k.RedPointId.Recycle_0,k.RedPointId.Recycle_1,k.RedPointId.Recycle_2,k.RedPointId.Recycle_3,k.RedPointId.Recycle_4],t.protos=[s.ProtoConfig.c_req_shop_fresh_info,s.ProtoConfig.c_req_reback_items,s.ProtoConfig.c_req_role_info],k.default.getInstance().addHandler(t),t}return n(t,e),Object.defineProperty(t.prototype,"bagModelList",{get:function(){return this._bagModelList},set:function(e){this._bagModelList=e},enumerable:!0,configurable:!0}),t.prototype.getBagHadItemNum=function(){for(var e=0,t=0;t<this.bagModelList.length;t++)this.bagModelList[t]&&e++;return e},t.prototype.getFirstComposeItemInfoInList=function(){for(var e=0;e<this.itemInfoList.length;e++){var t=m.ITemsConfig.getITemsConfigById(this.itemInfoList[e].itemType);if(t&&1===t.compose)return t}return null},Object.defineProperty(t.prototype,"AttackType",{get:function(){return["","\u653b\u51fb","\u9b54\u6cd5","\u9053\u672f"][this.occupation||1]},enumerable:!0,configurable:!0}),t.prototype.getEquipBaseAttack=function(){for(var e=0,t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];if(i.itemKind==u.GameConst.ITEM_KIND.EQUIP&&i.gridId>=0)e+=g.EquipConfig.getEquipConfigById(i.itemType).atk}return e},t.prototype.getEquipBaseHp=function(){for(var e=0,t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];if(i.itemKind==u.GameConst.ITEM_KIND.EQUIP&&i.gridId>=0)e+=g.EquipConfig.getEquipConfigById(i.itemType).hp}return e},t.prototype.getEquipBaseMag=function(){for(var e=0,t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];if(i.itemKind==u.GameConst.ITEM_KIND.EQUIP&&i.gridId>=0)e+=g.EquipConfig.getEquipConfigById(i.itemType).mag}return e},t.prototype.getEquipBaseSpt=function(){for(var e=0,t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];if(i.itemKind==u.GameConst.ITEM_KIND.EQUIP&&i.gridId>=0)e+=g.EquipConfig.getEquipConfigById(i.itemType).spt}return e},t.prototype.getEquipBaseDef=function(){for(var e=0,t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];if(i.itemKind==u.GameConst.ITEM_KIND.EQUIP&&i.gridId>=0)e+=g.EquipConfig.getEquipConfigById(i.itemType).def}return e},t.prototype.getEquipAdd=function(e){for(var t=0,i=0;i<this.itemInfoList.length;i++){var n=this.itemInfoList[i];if(n.itemKind==u.GameConst.ITEM_KIND.EQUIP&&n.gridId>=0){for(var o=0;o<n.baseAddAttrList.length;o++){if(s=n.baseAddAttrList[o])for(var a=0;a<e.length;a++)s.magicId==e[i]&&(t+=s.magicValue)}for(o=0;o<n.randAttrList.length;o++){var s;if(s=n.randAttrList[o])for(a=0;a<e.length;a++)s.magicId==e[i]&&(t+=s.magicValue)}}}return t},t.prototype.recoveryEquipList=function(e){for(var i=new Array,n=this.itemInfoList.length-1;n>=0;n--)for(var o=this.itemInfoList[n],a=0;a<e.length;a++){var s=e[a];o.itemKind==u.GameConst.ITEM_KIND.EQUIP&&o.itemId==s.itemId&&i.push(j.DecItemParamStruct.create(o.itemId,1,-1))}j.default.decItems(i,t.instance)},t.prototype.getShowEquip=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=Number.MAX_VALUE);var n={count:0,price:0,cream:0,equipList:[],isnofuwen:0,ishavefuwen:0};if(i<=0)return n;for(var o=0;o<this.itemInfoList.length;o++){var a=this.itemInfoList[o],s=g.EquipConfig.getEquipConfigById(a.itemType);if(a.itemKind==u.GameConst.ITEM_KIND.EQUIP&&a.quality==e&&0==a.isLock&&0==s.isrecov&&a.gridId<0){if(0==t&&(s.pro==u.GameConst.OCCUPATION.None||s.pro==this.occupation))continue;if(n.count+=1,s.price&&(n.price+=parseInt(s.price[e].split(":")[1])),s.recov_cream&&(n.cream+=parseInt(s.recov_cream[e].split(":")[1])),this.getIsHaveFunwen(a)?n.ishavefuwen=1:(n.isnofuwen=1,n.equipList.push(a)),n.count>=i)break}}return n},t.prototype.getIsHaveFunwen=function(e){for(var t=0;t<e.fuwenNeedList.length;t++)if(e.fuwenActive||1==e.embedRuneList[e.fuwenNeedList[t].index])return!0;return!1},t.prototype.getIsSellEquip=function(e,i){var n;return this.itemInfoList.every(function(o){if(o.itemKind==u.GameConst.ITEM_KIND.EQUIP&&0==o.isLock)if(i>=0){if(o.quality==i&&o.gridId<0){var a=g.EquipConfig.getEquipConfigById(o.itemType);if(e)return n=!0,!1;if(a&&a.pro!=u.GameConst.OCCUPATION.None&&a.pro!=t.instance.occupation)return n=!0,!1}}else if(o.gridId<0){a=g.EquipConfig.getEquipConfigById(o.itemType);if(e)return n=!0,!1;if(a&&a.pro!=u.GameConst.OCCUPATION.None&&a.pro!=t.instance.occupation)return n=!0,!1}return!0}),n},t.prototype.getEquipAddPercent=function(e){return this.getEquipAdd(e)},t.prototype.getPvpIncrease_p=function(){return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.pvpIncrease_p,this.attrList)},t.prototype.getPvpReduction_p=function(){return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.pvpReduction_p,this.attrList)},t.prototype.getEXP_p=function(){return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.EXP_p,this.attrList)},t.prototype.getAttack=function(){if(h.GameConfig.connectServer){var e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.atk,this.attrList);return e=Math.ceil(e)}e=p.HeroConfig.getMyHeroConfig().atk+this.getEquipBaseAttack();var t=this.getEquipAdd([_.MagicNameConfig.MagicId.atk,_.MagicNameConfig.MagicId.Allstat]);return this.occupation==u.GameConst.OCCUPATION.ZHAN_SHI&&(t+=O.EquipGridModel.getEquipGridAddAllstat()),e+=t,e*=this.getEquipAddPercent([_.MagicNameConfig.MagicId.atk_p])+1,e=Math.ceil(e)},t.prototype.getMofa=function(){if(h.GameConfig.connectServer){var e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.mag,this.attrList);return e=Math.ceil(e)}e=p.HeroConfig.getMyHeroConfig().mag+this.getEquipBaseMag();var t=this.getEquipAdd([_.MagicNameConfig.MagicId.mag,_.MagicNameConfig.MagicId.Allstat]);return this.occupation==u.GameConst.OCCUPATION.FA_SHI&&(t+=O.EquipGridModel.getEquipGridAddAllstat()),e+=t,e*=this.getEquipAddPercent([_.MagicNameConfig.MagicId.mag_p])+1,e=Math.ceil(e)},t.prototype.getDaoShu=function(){if(h.GameConfig.connectServer){var e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.spt,this.attrList);return e=Math.ceil(e)}e=p.HeroConfig.getMyHeroConfig().spt+this.getEquipBaseSpt();var t=this.getEquipAdd([_.MagicNameConfig.MagicId.spt,_.MagicNameConfig.MagicId.Allstat]);return this.occupation==u.GameConst.OCCUPATION.DAO_SHI&&(t+=O.EquipGridModel.getEquipGridAddAllstat()),e+=t,e*=this.getEquipAddPercent([_.MagicNameConfig.MagicId.spt_p])+1,e=Math.ceil(e)},t.prototype.getHp=function(){var e=this.getNumber(this.hpKey);return this.hp=e,e},t.prototype.getMp=function(){var e=this.getNumber(this.mpKey);return this.mp=e,this.mp},t.prototype.getMaxHp=function(){if(h.GameConfig.connectServer)return e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.maxHp,this.attrList);var e=p.HeroConfig.getMyHeroConfig().hp+this.getEquipBaseHp();e+=this.getEquipAdd([_.MagicNameConfig.MagicId.hp]);var t=this.getEquipAddPercent([_.MagicNameConfig.MagicId.hp_p]);return e*=(t+=O.EquipGridModel.getHpPercent())+1,e=Math.ceil(e)},t.prototype.setHp=function(e){this.hp=e,this.setNumber(this.hpKey,this.hp)},t.prototype.setMp=function(e){this.mp=e,this.setNumber(this.mpKey,this.mp)},t.prototype.addHp=function(e,i){if(void 0===i&&(i=0),e>0){this.hp=this.getHp();var n=Math.min(this.getMaxHp()+i-this.hp,e);this.hp+=n,this.setNumber(this.hpKey,this.hp),t.saveToLocalStorage(),P.default.s_req_set_role_hp()}},t.prototype.decHp=function(e){e>0&&(this.hp=this.getHp(),this.hp=Math.max(this.hp-e,0),this.setNumber(this.hpKey,this.hp),t.saveToLocalStorage(),P.default.s_req_set_role_hp())},t.prototype.addMp=function(e){if(e>0){var t=Math.min(this.getMaxMp()-this.mp,e);this.mp+=t,this.setNumber(this.mpKey,this.mp),P.default.s_req_set_role_hp()}},t.prototype.decMp=function(e){e>0&&(this.mp=this.getMp(),this.mp=Math.max(this.mp-e,0),this.setNumber(this.mpKey,this.mp),P.default.s_req_set_role_hp())},t.prototype.getMaxMp=function(){if(h.GameConfig.connectServer)return e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.maxMp,this.attrList);var e=p.HeroConfig.getMyHeroConfig().mp;e+=this.getEquipAdd([_.MagicNameConfig.MagicId.mp]);var t=this.getEquipAddPercent([_.MagicNameConfig.MagicId.mp_p]);return e*=(t+=O.EquipGridModel.getMpPercent())+1,e=Math.ceil(e)},t.prototype.getDefend=function(){if(h.GameConfig.connectServer){var e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.def,this.attrList);return e=Math.ceil(e)}},t.prototype.getAttackSpeed=function(){if(h.GameConfig.connectServer){var e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.speed,this.attrList);return"ub22985300241zg"==L.default.uId&&(e+=1e3),e}var t=p.HeroConfig.getMyHeroConfig().atSpeed;return t+=this.getEquipAdd([_.MagicNameConfig.MagicId.speed]),t=Math.ceil(t)},t.prototype.getLucky=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.lucky,this.attrList);var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.lucky]),e=Math.ceil(e)},t.prototype.getGuDingShangHai=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.BonusDamage,this.attrList);var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.BonusDamage]),e=Math.ceil(e)},t.prototype.getGuDingJianShang=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.DamageReduction,this.attrList);var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.DamageReduction]),e=Math.ceil(e)},t.prototype.getShangHaiZengJia=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.BonusDamage_p,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.BonusDamage_p]),e*=O.EquipGridModel.getShangHaiZengJiaPercent()+1,e=Math.ceil(e)},t.prototype.getShangHaiJianMian=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.DamageReduction_p,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.DamageReduction_p]),e*=O.EquipGridModel.getShangHaiJianMianPercent()+1,e=Math.ceil(e)},t.prototype.getShengMingXiQu=function(){if(h.GameConfig.connectServer){var e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.HpDrain,this.attrList);return e=Math.ceil(e)}e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.HpDrain]),e=Math.ceil(e)},t.prototype.getFaLiXiQu=function(){if(h.GameConfig.connectServer){var e=H.default.getMagicValueByList(_.MagicNameConfig.MagicId.MpDrain,this.attrList);return e=Math.ceil(e)}e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.MpDrain]),e=Math.ceil(e)},t.prototype.getJinPiGaiLv=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.magic_find1,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.magic_find1])},t.prototype.getZhuangBeiDiaoLv=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.equip_times,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.equip_times])},t.prototype.getHpDraineffect_p=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.HpDraineffect_p,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.HpDraineffect_p])},t.prototype.getBonusDamageeffect_p=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.BonusDamageeffect_p,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.BonusDamageeffect_p])},t.prototype.getpetspeed=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.petspeed,this.attrList);var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.petspeed])},t.prototype.getpetdamage=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.petdamage,this.attrList);var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.petdamage])},t.prototype.getpetdamage_p=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.petdamage_p,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.petdamage_p])},t.prototype.getignoredef_p=function(){if(h.GameConfig.connectServer)return H.default.getMagicValueByList(_.MagicNameConfig.MagicId.ignoredef_p,this.attrList)/1e4;var e=0;return e+=this.getEquipAdd([_.MagicNameConfig.MagicId.ignoredef_p])},t.prototype.getSuppress=function(){return h.GameConfig.connectServer?H.default.getMagicValueByList(_.MagicNameConfig.MagicId.suppress,this.attrList):0},t.prototype.getEquipGridList=function(){return this.equipGridList},t.prototype.getEquipList=function(){for(var e=[],t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];i.itemKind==u.GameConst.ITEM_KIND.EQUIP&&i.gridId>=0&&e.push(i)}return e},t.prototype.getBaGuaEquipByPos=function(e){var t;return this.getBaGuaEquipList().every(function(i){return i.gridId!=e||(t=i,!1)}),t},t.prototype.getBaGuaEquipList=function(){for(var e=[],t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];i.itemKind==u.GameConst.ITEM_KIND.BaGua&&i.gridId>=0&&e.push(i)}return e},t.prototype.getBaGuaItemList=function(){for(var e=[],t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t];i.itemKind==u.GameConst.ITEM_KIND.BaGua&&i.gridId<0&&e.push(i)}return e},t.prototype.getBaGuaItemListByPos=function(e){var t=this.getBaGuaItemList(),i=new Array;return t.forEach(function(t){d.default.getConfigById(t.itemType).pos==e&&i.push(t)}),i},t.prototype.getBaGuaItemListByType=function(e){var t=this.getBaGuaItemList(),i=new Array;return t.forEach(function(t){d.default.getConfigById(t.itemType).id!=e||t.isLock||i.push(t)}),i},t.prototype.getBaGuaResolveItemList=function(){for(var e=[],t=0;t<this.itemInfoList.length;t++){var i=this.itemInfoList[t],n=d.default.getConfigById(i.itemType);i.itemKind==u.GameConst.ITEM_KIND.BaGua&&i.gridId<0&&n.melt_get&&!i.isLock&&e.push(i)}return e},t.prototype.getEquipById=function(e,t){var i=new Array;return this.itemInfoList.forEach(function(n){n.gridId<0&&!n.isLock&&n.itemType==e&&n.quality>=t&&i.push(n)}),i},t.prototype.getEquipModelByGrid=function(e,t){void 0===t&&(t=this.getEquipList());for(var i=0;i<t.length;i++){var n=t[i];if(n.gridId==e)return n}},t.prototype.getResourceById=function(e){var t=0;switch(e){case u.GameConst.RES_TYPE.COIN:t=this.getCoin();break;case u.GameConst.RES_TYPE.YUAN_BAO:t=this.getGold();break;case u.GameConst.RES_TYPE.CREAM:t=this.getCream();break;case u.GameConst.RES_TYPE.EXP:t=this.getExp();break;case u.GameConst.RES_TYPE.LeiTaiCoin:t=this.getLeiTaiBi();break;case u.GameConst.RES_TYPE.TIGUANSCORE:t=this.tianGuanScore;break;case u.GameConst.RES_TYPE.Guild_GX:t=this.guildGX;break;case u.GameConst.RES_TYPE.Guild_guildExploits:t=this.guildExploits}return t},t.prototype.getGuildGX=function(){return this.guildGX},t.prototype.getGuildGExploits=function(){return this.guildExploits},t.prototype.getLeiTaiBi=function(){return this.leiTaiBi},t.prototype.addLeiTaiBi=function(e){return"number"==typeof e&&(this.leiTaiBi+=e,t.saveToLocalStorage()),!1},Object.defineProperty(t.prototype,"tianGuanScore",{get:function(){return this._tianGuanScore},set:function(e){this._tianGuanScore=e},enumerable:!0,configurable:!0}),t.prototype.getGold=function(){return this.yuanBao},t.prototype.addGold=function(e){return"number"==typeof e&&(this.yuanBao+=e,t.saveToLocalStorage()),!1},t.prototype.decGold=function(e){if("number"==typeof e){var i=void 0;return this.yuanBao<e?M.WordConfig.showWord(60115):(this.yuanBao-=e,i=!0,t.saveToLocalStorage()),i}return!1},t.prototype.decLeiTaiBi=function(e){if("number"==typeof e){var i=void 0;return this.leiTaiBi<e?M.WordConfig.showWord(60209):(this.leiTaiBi-=e,i=!0,t.saveToLocalStorage()),i}return!1},t.prototype.getSkillDrug=function(){return this.getItemAmount("I3004")},t.prototype.getCoin=function(){return this.coin},t.prototype.addCoin=function(e,i){if(void 0===i&&(i=!0),"number"==typeof e){if(this.coin+=e,i){var n=cc.js.formatStr(M.WordConfig.getWord(60258),e);N.UIHelper.showTip(n)}return t.saveToLocalStorage(),this.coin}return!1},t.prototype.decCoin=function(e){if("number"==typeof e){var i=void 0;return this.coin<e?h.GameConfig.isWechat()?B.default.getAdLostTimes(B.Ad_Type.Coin)>0?c.default.instance.createView(I.default.gameView.buyMoney):M.WordConfig.showWord(60102):N.UIHelper.showCoinNoEnough():(this.coin-=e,i=!0,t.saveToLocalStorage()),i}return!1},t.prototype.addCream=function(e,i){if(void 0===i&&(i=!0),this.cream+=e,i){var n=cc.js.formatStr(M.WordConfig.getWord(60259),e);N.UIHelper.showTip(n)}return t.saveToLocalStorage(),this.cream},t.prototype.decCream=function(e){var i;return this.cream<e?M.WordConfig.showWord(60138):(this.cream-=e,i=!0,t.saveToLocalStorage()),i},t.prototype.getCream=function(){return this.cream},t.prototype.getOccupationName=function(){return u.GameConst.OccupationNameMap(this.occupation)},t.prototype.levelUp=function(e){void 0===e&&(e=!0);var i=p.HeroConfig.myHeroConfig,n=p.HeroConfig.getNextHeroConfig();t.instance.getExp()>=i.exp?this.level<p.HeroConfig.getMyMaxLevel()?(h.GameConfig.connectServer?(P.default.req_lev_up(),p.HeroConfig.myHeroConfig=n):(this.level+=1,this.decExp(i.exp)),R.MusicHelper.play_lvup(),t.saveToLocalStorage()):e&&M.WordConfig.showWord(60260):e&&(t.instance.level<f.DefaultConfig.getConfigById(145).value?M.WordConfig.showWord(60261):(M.WordConfig.showWord(60113),c.default.instance.createView(I.default.gameView.toStrongerPanel,null,203)))},t.prototype.getExp=function(){return this.exp},t.prototype.addExp=function(e){return this.exp+=e,this.level<f.DefaultConfig.getConfigById(145).value&&this.levelUp(!1),t.saveToLocalStorage(),e},t.prototype.decExp=function(e){var i;return this.exp<e?M.WordConfig.showWord(60113):(this.exp-=e,i=!0,t.saveToLocalStorage()),i},t.prototype.addEquipByPosition=function(e,t){var i=-1==O.EquipGridModel.getGridTypeByType(e)?g.EquipConfig.getGridTypeByPart(e,!0):O.EquipGridModel.getGridTypeByType(e);if(e==u.Position.RING||e==u.Position.BRACELET||e==u.Position.RING_lunhui||e==u.Position.BRACELET_lunhui){var n=this.getEquipModelByGrid(i);if(n){var o=g.EquipConfig.getGridTypeByPart(e,!1);(n=this.getEquipModelByGrid(o))||(i=o)}}return this.addEquip(i,t)},t.prototype.addBaGuaEquipByPos=function(e,i){j.default.getItemByid(i);return t.saveToLocalStorage(),h.GameConfig.connectServer&&P.default.req_equip(i,e,1),u.ADD_EQ.SUCCESS},t.prototype.removeBaGuaEquip=function(e,i){P.default.req_equip(i,e,2),t.saveToLocalStorage()},t.prototype.addEquip=function(e,i){for(var n=0;n<this.itemInfoList.length;n++){var a=this.itemInfoList[n];if(a.itemKind==u.GameConst.ITEM_KIND.EQUIP&&a.itemId==i){var s=a.getConfig();return s.world==v.MapConfig.WORLD.FanRen&&s.level>t.instance.level?(M.WordConfig.showWord(60162),u.ADD_EQ.NOT_LEVEL):s.world==v.MapConfig.WORLD.LunHui&&D.JingJieModel.getMyLunHuiJingLevel()<s.reborn?(M.WordConfig.showWord(60142),u.ADD_EQ.NOT_LEVEL):s.pro!=u.GameConst.OCCUPATION.None&&s.pro!=t.instance.occupation?(M.WordConfig.showWord(60254),u.ADD_EQ.NOT_PRO):(t.saveToLocalStorage(),h.GameConfig.connectServer&&P.default.req_equip(a.itemId,e,1),1001!=e&&1002!=e&&1003!=e&&1004!=e&&o.EventManager.instance.dispatch(w.CommonEvent.Event_JingJie_Change,s.world),u.ADD_EQ.SUCCESS)}}},t.prototype.removeEquip=function(e){for(var i=0;i<this.itemInfoList.length;i++){var n=this.itemInfoList[i];if(n.itemKind==u.GameConst.ITEM_KIND.EQUIP&&n.gridId==e){t.instance.isFullBag()?M.WordConfig.showWord(60001):P.default.req_equip(n.itemId,n.gridId,2);break}}t.saveToLocalStorage(),o.EventManager.instance.dispatch(w.CommonEvent.Event_Equip)},t.prototype.addResList=function(e){for(var i=0;i<e.length;i++){var n=e[i].getK(),o=e[i].getV();n==u.GameConst.RES_TYPE.COIN?this.coin=o:n==u.GameConst.RES_TYPE.CREAM?this.cream=o:n==u.GameConst.RES_TYPE.EXP?this.exp=o:n==u.GameConst.RES_TYPE.YUAN_BAO?this.yuanBao=o:n==u.GameConst.RES_TYPE.LeiTaiCoin?this.leiTaiBi=o:n==u.GameConst.RES_TYPE.TIGUANSCORE&&(this._tianGuanScore=o)}t.saveToLocalStorage()},t.prototype.gotoRebornMap=function(){var e=v.MapConfig.getMapIdByPositonAndWorld(v.MapConfig.curMapConfig.reborn,v.MapConfig.curMapConfig.world);t.instance.switchMap(!0,e.mapId)},t.prototype.switchMap=function(e,i){if(void 0===e&&(e=!0),void 0===i&&(i=1),a.Logger.log("switchMap==111===",e,i),v.MapConfig.currFightType==v.MapConfig.FIGHTTYPE.SERVER?T.default.instance.removeAllEff():S.default.instance.removeAllEff(),e){if(i==this.mapId||-1==i)return;var n=v.MapConfig.getMapConfigByMapId(i);if(V.default.maxFight<n.Lv){var s=M.WordConfig.getWord(60130);return s=s.replace("[#]",n.Lv+""),N.UIHelper.showTip(s),void c.default.instance.createView(I.default.gameView.toStrongerPanel)}o.EventManager.instance.dispatch(w.CommonEvent.Event_SwitchMapStart),this.switchingMapId=i,h.GameConfig.connectServer?P.default.req_switch_map(i):this.switchMap(!1)}else{this.mapId=i,this.switchingMapId=-1;var r=v.MapConfig.curMapConfig;v.MapConfig.curMapConfig=v.MapConfig.getMapConfigByMapId(t.instance.mapId),v.MapConfig.currFightType=v.MapConfig.curMapConfig.fight_type,a.Logger.log("RoleInfoModel.instance.mapId===",t.instance.mapId,r),t.saveToLocalStorage(),o.EventManager.instance.dispatch(w.CommonEvent.Event_ChangeWorld),o.EventManager.instance.dispatch(w.CommonEvent.Event_SwitchMapSuc),r.world!=v.MapConfig.curMapConfig.world&&(v.MapConfig.curJingJieIndex=v.MapConfig.curMapConfig.world==v.MapConfig.WORLD.FanRen?0:1,N.UIHelper.showTip("\u6210\u529f\u8fdb\u5165"+D.JingJieModel.getJingJieNameConfig()[v.MapConfig.curMapConfig.world-1]),o.EventManager.instance.dispatch(w.CommonEvent.Event_JingJie_Change,v.MapConfig.curMapConfig.world),c.default.instance.isOpen(I.default.gameView.ChangeWorldGiftView)&&c.default.instance.closeView(I.default.gameView.ChangeWorldGiftView))}},t.prototype.changeWorld=function(e){if(v.MapConfig.curMapConfig.world!=e)if(!D.JingJieModel.hadOpenJingJie(e)&&e>1){var i=cc.js.formatStr(M.WordConfig.getWord(60309),D.JingJieModel.getJingJieNameConfig()[e-1]);N.UIHelper.showTip(i)}else{var n=v.MapConfig.curMapConfig,o=v.MapConfig.getMapIdByPositonAndWorld(n.position,e);t.instance.switchMap(!0,o.mapId)}},t.prototype.getSkillList=function(){return this.skillModelList},t.prototype.getShowSkillList=function(){var e=new Array;return this.skillModelList.forEach(function(t){0!=y.SkillConfig.getSkillConfigById(t.id,y.SkillConfig.getSkillLevel(t.id)).show&&e.push(t)}),e},t.prototype.getSkillModel=function(e,t){void 0===t&&(t=!1);for(var i=null,n=0;n<this.skillModelList.length;n++){var o=this.skillModelList[n];o.id==e&&(i=o)}return!i&&t&&((i=new Z.SkillModel).id=e,i.exp=0,i.level=1,i.isActive=!1,i.lastUseTIme=0),i},t.prototype.useSkillDan=function(e){void 0===e&&(e=1),this.useItem(e,"I3004")},t.prototype.getPageAmount=function(){return this.getItemAmount("I4001")},t.prototype.getRurioAmount=function(){return this.getItemAmount("I3003")},t.prototype.getRefineStoneAmount=function(){return this.getItemAmount("I3001")},t.prototype.getChuiLianStoneAmount=function(){return this.getItemAmount("I3903")},t.prototype.useItem=function(e,i){void 0===e&&(e=1);var n=j.default.getItem(""+i);n&&(j.default.decItem(n.itemId,e),t.saveToLocalStorage())},t.prototype.getItemAmount=function(e){var t=j.default.getItem(""+e);return t&&t.itemCnt||0},t.prototype.getBaGuaEquipListById=function(e){var t=new Array;return this.itemInfoList.forEach(function(i){i.itemType==e&&i.gridId<0&&!i.isLock&&t.push(i)}),t},t.prototype.canUseYinShen=function(){for(var e=Z.SkillModel.getBeiDongSkillList(this),t=0;t<e.length;t++){var i=e[t];if(i.skillId==y.SkillConfig.SkillIdConfig.YinShen)return i}},t.prototype.updateSkill=function(e,i,n,o,a,s,r){void 0===i&&(i=1),void 0===n&&(n=!0),void 0===o&&(o=0),void 0===a&&(a=t.instance),void 0===s&&(s=!0),void 0===r&&(r=!0);var c=this.getSkillModel(e),l=y.SkillConfig.getSkillConfigById(e,1);if(c)1!=i&&(c.level=i),0!=o&&(c.exp=o);else{if(a.occupation!=l.role&&l.role!=u.GameConst.OCCUPATION.None)return!1;(c=new Z.SkillModel).id=e,c.level=i,c.exp=o,c.isActive=n,c.isSelect=s,c.isSelectPvP=r,this.skillModelList.push(c)}return t.saveToLocalStorage(),!0},t.prototype.upSkill=function(e){if(h.GameConfig.connectServer)P.default.req_skill_lev_up(e);else{var i=this.getSkillModel(e);i.level++,i.exp=0,t.saveToLocalStorage()}},t.prototype.autoDrug=function(e){var i,n,o=J.SettingModel.drugCdown;if(o||(J.SettingModel.drugCdown=[0,0,0,0]),o[e]||(o[e]=0),o[e]>0)return 0;var a=[J.SettingModel.drugHp,J.SettingModel.drugMp,J.SettingModel.drugHighHp,J.SettingModel.drugHighMp],s=j.default.getItem(a[e]);if(!s||s.itemCnt<=0)return 0;n=s.getConfig(),i=this.useDrug(n);var r=1e3*n.magic_value[1]||3e3,c=X.default.getStarModelById(b.default.SkillConfig.Skill_404,t.instance);if(c){var l=b.default.getConfig(c.id,c.lev);i=Math.floor(i*l.skillvalue[0]/1e4),r=1e3*l.skillvalue[1]}return J.SettingModel.drugCdown[e]=r,0!=i&&setTimeout(function(){J.SettingModel.drugCdown[e]=0},r),0!==i&&(h.GameConfig.connectServer?P.default.req_use_item(s.itemId,1):this.useItem(1,s.itemType)),i},t.prototype.useDrug=function(e){var i=0;return t.instance.level>=e.level?(i=e.magic_value[2]?"ordinaryMp"==e.position||"seniorMp"==e.position?e.magic_value[0]+t.instance.getMaxMp()*e.magic_value[2]/1e4:e.magic_value[0]+t.instance.getMaxHp()*e.magic_value[2]/1e4:e.magic_value[0],i=Math.ceil(i)):0},t.prototype.getBagItemWithKind=function(e){for(var t=[],i=0;i<this.itemInfoList.length;i++)this.itemInfoList[i].itemKind==e&&t.push(this.itemInfoList[i]);return t},t.prototype.getJingJieModel=function(e,t){void 0===t&&(t=this.jingJieList);for(var i=0;i<t.length;i++){var n=t[i];if(n.jingJieId==e)return n}},t.prototype.isOpenJingJie=function(e){var i={isOpen:!0,ishaveLeve:!1,level:0};if(e.condition){for(var n=0;n<e.condition.length;n++){var o=e.condition[n];if(o.level)return t.instance.level>=o.level?(i.isOpen=!0,i.ishaveLeve=!0,i.level=o.level,i):(i.isOpen=!1,i.ishaveLeve=!0,i.level=o.level,i)}return i.isOpen=!0,i.ishaveLeve=!1,i.level=0,i}return i},t.prototype.openJingJie=function(e){var i=t.instance.getJingJieModel(e);if(!i){var n=C.JingJieConfig.getJingJieConfig(e);if(n){var o=!0;if(n.condition)for(var a=0;a<n.condition.length;a++){var s=n.condition[a];if(s.level&&s.level>t.instance.level){o=!1;break}}o&&((i=new D.JingJieModel).jingJieId=e,i.level=0,this.jingJieList.push(i))}}return i},t.initRoleInfoByLocalStorage=function(){},t.prototype.revive=function(){this.hp=this.getMaxHp(),this.setNumber(this.hpKey,this.hp),this.mp=this.getMaxMp(),this.setNumber(this.mpKey,this.mp)},t.prototype.isFullBag=function(){return 0==this.bagRemainingnumber},t.prototype.calculateGridCount=function(e,t){return Math.ceil(e/t)},t.prototype.getAddItemMaxNum=function(e){var t=m.ITemsConfig.getITemsConfigById(e.itemType),i=0;if(t&&t.stack==m.ITemsConfig.StackType.Yes){i=this.bagRemainingnumber*t.max_stack;for(var n=0,o=0;o<this.bagModelList.length;o++)this.bagModelList[o]&&this.bagModelList[o].itemType==e.itemType&&(n+=t.max_stack-this.bagModelList[o].itemCnt);return e.itemCnt<=i+n?e.itemCnt:i+n}return i=this.bagRemainingnumber,e.itemCnt<=i?e.itemCnt:i},t.prototype.getNeedGridCount=function(e){var t=0,i=m.ITemsConfig.getITemsConfigById(e.itemType);if(i&&i.stack==m.ITemsConfig.StackType.Yes){var n=j.default.getItem(e.itemType,e.role);if(n)t=this.calculateGridCount(n.itemCnt+e.itemCnt,i.max_stack)-this.calculateGridCount(n.itemCnt,i.max_stack);else t=this.calculateGridCount(e.itemCnt,i.max_stack)}else t=e.itemCnt;return this.bagRemainingnumber<t?-1:t},t.prototype.tryAddItemsToBag=function(e){if(0==e.length)return!0;var t=e[e.length-1],i=this.getNeedGridCount(t);if(-1!=i){e.pop();var n=j.default.addItemToData(t);this.bagRemainingnumber-=i;var o=this.tryAddItemsToBag(e);return this.bagRemainingnumber+=i,j.default.decItemToData(n.itemId,t.itemCnt,this),e.push(t),o}return!1},t.prototype.addItemToBag=function(e,t){if(void 0===t&&(t=0),!(e.gridId>=0)){var i=m.ITemsConfig.getITemsConfigById(e.itemType);if(i&&i.stack==m.ITemsConfig.StackType.Yes){for(var n=0;n<this.bagModelList.length;n++)if(this.bagModelList[n]&&this.bagModelList[n].itemType==e.itemType){if(a.Logger.log("addItemToBag==1111==",n,this.bagModelList[n].itemCnt,e.itemType,t,i.max_stack),this.bagModelList[n].itemCnt+=t,a.Logger.log("addItemToBag==222==",n,this.bagModelList[n].itemCnt,e.itemType,t,i.max_stack),this.bagModelList[n].isNew=!0,!(this.bagModelList[n].itemCnt>i.max_stack)){t=0;break}t=this.bagModelList[n].itemCnt-i.max_stack,this.bagModelList[n].itemCnt=i.max_stack}if(0!=t)for(n=0;n<this.bagModelList.length;n++)if(!this.bagModelList[n]){var o=e.clone();if(i.max_stack<t?(o.itemCnt=i.max_stack,t-=i.max_stack):(o.itemCnt=t,t=0),this.bagModelList[n]=o,this.bagRemainingnumber--,0==t)break}}else for(n=0;n<this.bagModelList.length;n++)if(!this.bagModelList[n]){o=e.clone();if(this.bagModelList[n]=o,this.bagModelList[n].itemCnt=1,this.bagRemainingnumber--,0==--t)break}}},t.prototype.updateBagModel=function(e){for(var t=0;t<this.bagModelList.length;t++){var i=this.bagModelList[t];if(i&&i.itemId==e.itemId){var n=e.clone();n.itemCnt=i.itemCnt,this.bagModelList[t]=n,o.EventManager.instance.dispatch(u.EVENT_NAME.BAG_ADD,e,e.itemCnt);break}}},t.prototype.decItemToBag=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=-1),-1!=i)this.bagModelList[i]?this.bagModelList[i].itemId==e.itemId?(this.bagModelList[i].itemCnt-=t,this.bagModelList[i].itemCnt<=0&&(this.bagModelList[i]=null,this.bagRemainingnumber++)):a.Logger.error("\u5220\u9664\u7269\u54c1\u51fa\u95192: name="+e.getConfig().name+",bagIndex"+i):a.Logger.error("\u5220\u9664\u7269\u54c1\u51fa\u95191: name="+e.getConfig().name+",bagIndex"+i);else for(var n=this.bagModelList.length-1;n>=0;n--)if(this.bagModelList[n]&&this.bagModelList[n].itemId==e.itemId){if(t>0){var o=Math.min(this.bagModelList[n].itemCnt,t);this.bagModelList[n].itemCnt-=o,t-=o,this.bagModelList[n].itemCnt<=0&&(this.bagModelList[n]=null,this.bagRemainingnumber++)}if(t<=0)break}},t.prototype.sortBag=function(){this.bagRemainingnumber=t.instance.bagAMount,t.instance.bagModelList=new Array(t.instance.bagAMount);for(var e=0;e<t.instance.itemInfoList.length;e++){var i=t.instance.itemInfoList[e];i.isSell&&a.Logger.log("muxi \u62cd\u54c1\u4fe1\u606f \u80cc\u5305 ",i.itemType,i),t.instance.addItemToBag(i,i.itemCnt)}var n=function(e){var t=e.slice(1,e.length);return parseInt(t)},o=function(e,t){return e.quality==t.quality?n(e.itemType)-n(t.itemType):t.quality-e.quality},s=function(e,i){var n=e.getConfig(),o=i.getConfig();return n.world==o.world?n.pro==o.pro?n.position==o.position?n.level==o.level?i.quality-e.quality:o.level-n.level:n.position-o.position:n.pro==u.GameConst.OCCUPATION.None?-1:o.pro==u.GameConst.OCCUPATION.None?1:n.pro==t.instance.occupation?-1:o.pro==t.instance.occupation?1:n.pro-o.pro:o.world-n.world},r=[];for(e=0;e<this.bagModelList.length;e++)if(this.bagModelList[e]){r.push(this.bagModelList[e]),this.bagModelList[e].isNew=!1;var c=j.default.getItemByid(this.bagModelList[e].itemId);c&&(c.isNew=!1)}r.sort(function(e,t){return e.itemKind==t.itemKind?1==e.itemKind?o(e,t):s(e,t):e.itemKind-t.itemKind});for(e=r.length;e<this.bagModelList.length;e++)r.push(null);this.bagModelList=r,t.instance.bagRemainingnumber=t.instance.bagAMount-t.instance.getBagHadItemNum()},t.prototype.addBagAmount=function(e){void 0===e&&(e=5),this.bagRemainingnumber+=e,this.bagAMount+=e;for(var t=0;t<e;t++)this.bagModelList.push(null)},t.initMyRoleInfo=function(e){t.instance=e,a.Logger.log("initMyRoleInfo===",e),v.MapConfig.curMapConfig=v.MapConfig.getMapConfigByMapId(t.instance.mapId),p.HeroConfig.myHeroConfig=p.HeroConfig.getHeroConfig(e.occupation,e.level),u.GameConst.isFirstInit&&t.instance.revive(),A.BossModel.init(),B.default.init(),Y.default.init(),J.SettingModel.initData(),U.default.init(),P.default.req_skill(),P.default.req_boss_fresh_time(),P.default.req_task(),P.default.req_advertisement(),P.default.req_first_rechard_info(),P.default.seq_charge_info(),P.default.s_req_get_role_hp(),P.default.s_req_get_title(),P.default.s_req_baghouse_list(),P.default.s_req_pvp_skill(),P.default.s_get_limit_gift_info(),z.default.initData(),e.level>=f.DefaultConfig.getConfigById(50).value&&P.default.s_star_sign_info()},t.createRoleByLocal=function(e,t,i){this.saveToLocalStorage()},t.deleteRole=function(e){for(var t=0;t<this.roleList.length;t++){if(this.roleList[t].roleId==e.roleId){this.roleList.splice(t,1);break}}o.EventManager.instance.dispatch(w.CommonEvent.Event_UserInfoRefresh),this.saveToLocalStorage()},t.resumeRole=function(e){this.roleList.push(e),o.EventManager.instance.dispatch(w.CommonEvent.Event_UserInfoRefresh),this.saveToLocalStorage()},t.getRoleByPos=function(e){for(var t=0;t<this.roleList.length;t++){var i=this.roleList[t];if(i.pos==e)return i}},t.proto2BaseModel=function(e){var i=new t;return i.roleId=e.getId(),i.roleName=e.getName(),i.occupation=e.getOccupation(),i.level=e.getLev(),i.pos=e.getPos(),i.dtime=e.getDtime(),i.personalize.portrait=e.getPortrait(),i.personalize.portrait_skin=e.getPortraitSkin(),this.roleList.push(i),a.Logger.log("proto2BaseModel",e),o.EventManager.instance.dispatch(w.CommonEvent.Event_UserInfoRefresh),i},t.proto2BaseModelList=function(e){this.roleList=[];for(var t=e.getRolelistList(),i=0;i<t.length;i++)this.proto2BaseModel(t[i]);a.Logger.log("rolelist=",e),o.EventManager.instance.dispatch(w.CommonEvent.Event_UserInfoRefresh)},t.proto2ResList=function(e,i){for(var n=0;n<e.length;n++){var a=e[n].getK(),s=e[n].getV();a==u.GameConst.RES_TYPE.COIN?i.coin=s:a==u.GameConst.RES_TYPE.CREAM?i.cream=s:a==u.GameConst.RES_TYPE.YUAN_BAO?i.yuanBao=s:a==u.GameConst.RES_TYPE.EXP?i.exp=s:a==u.GameConst.RES_TYPE.Guild_GX?i.guildGX=s:a==u.GameConst.RES_TYPE.Guild_guildExploits?i.guildExploits=s:a==u.GameConst.RES_TYPE.LeiTaiCoin?i.leiTaiBi=s:a==u.GameConst.RES_TYPE.TIGUANSCORE&&(i._tianGuanScore=s,o.EventManager.instance.dispatch(w.CommonEvent.Event_SkyPass_score_refresh))}t.saveToLocalStorage()},t.proto2Model=function(e){var i=t.instance,n=e.getRoleinfo();i.roleId=n.getId(),i.roleName=n.getName(),i.occupation=n.getOccupation(),n.getLev()>i.level&&(i.level=n.getLev(),E.FeiYouSdkManager.roleUpgrade(i),o.EventManager.instance.dispatch(w.CommonEvent.Event_USER_LVVEL_RESH)),a.Logger.log("\u5347\u7ea7======",i.level,n.getLev()),i.level=n.getLev(),i.pos=n.getPos(),i.mapId=n.getScene(),i.exp=n.getExp(),t.instance.maxServerBagNum=n.getBagNum(),i.create_time=1e3*n.getCreateTime();var s=l.BagConfig.getConfigById(t.addBagTimes);t.instance.bagAMount=s.bag,i.mapId<=0&&(i.mapId=1),1==v.MapConfig.getMapConfigByMapId(i.mapId).fight_type&&v.MapConfig.currFightType!=v.MapConfig.FIGHTTYPE.SERVER&&P.default.s_req_change_scene(i.mapId),i.itemInfoList=j.default.proto2ModelList(n),a.Logger.log("muxi itemInfoList:",i.itemInfoList),i.equipGridList=O.EquipGridModel.proto2ModelList(n);var r=n.getResnumList();this.proto2ResList(r,i),i.privilegeList=[];var c=n.getVipInfoList();q.default.proto2ModelList(c),i.jingJieList=D.JingJieModel.proto2JingJieList(n),i.attrList=H.default.proto2ModelList(n.getAttrlistList()),F.JingLianModel.proto2ModelList(n.getRefinelistList()),i.specialRingModelList=K.SpecialRingModel.proto2ModelList(n.getSpecialeffectlistList()),i.personalize=x.CostumeModel.proto2Personalize(n.getPersonalize()),2==n.getSendTimes()||(V.default.proto2ModelList(n),t.initMyRoleInfo(i),P.default.req_item_list(),h.GameConfig.sdkType==h.SdkType.Feiyou&&E.FeiYouSdkManager.roleLauncher(t.instance),P.default.s_robot_record_get(),P.default.s_get_holidayMonster_info(),P.default.s_get_roast_pig_info(),P.default.s_get_book_info())},t.proto2Offline=function(){},t.saveToLocalStorage=function(){o.EventManager.instance.dispatch(w.CommonEvent.Event_UserInfoRefresh)},t.prototype.getCanShowClock=function(){var e=j.default.getItemAmount("I6004"),i=j.default.getItemAmount("I6005"),n=j.default.getItemAmount("I6008");return(e>0||i>0||n>0)&&(e>0&&(this.showGift=t.showFangyu),i>0&&(this.showGift=t.showJiNeng),n>0&&(this.showGift=t.showQungong),!0)},t.prototype.checkFangYuGift=function(){1800==j.default.getItemLeftTimeByType("I6004")&&(o.EventManager.instance.dispatch(w.CommonEvent.Event_SHOW_GIFT),this.showGift=1)},t.prototype.checkJiNengGift=function(){1800==j.default.getItemLeftTimeByType("I6005")&&(o.EventManager.instance.dispatch(w.CommonEvent.Event_SHOW_GIFT),this.showGift=2)},t.prototype.checkQunGongGift=function(){1800==j.default.getItemLeftTimeByType("I6008")&&(o.EventManager.instance.dispatch(w.CommonEvent.Event_SHOW_GIFT),this.showGift=3)},t.prototype.checkIsMyself=function(e){return t.instance.roleId==e},t.prototype.creatMineData=function(e){var i=new W.MineData;return i.mineId=e.mineId,i.roleId=parseInt(t.instance.roleId),i.configId=e.configId,i.fight=t.instance.totalFight,i.layer=e.layer,i.level=t.instance.level,i.name=t.instance.roleName,i.prof=t.instance.occupation,i.reward=e.reward,i.skin=t.instance.personalize,i},t.prototype.checkRedPoint=function(){var e=new Array,i=G.BusinessModel.instance.getIsOwnOccupation(),n=t.instance.getBagHadItemNum()>=t.instance.bagAMount&&t.instance.getIsSellEquip(i,0),o={id:k.RedPointId.Recycle_0,type:k.RedPointType.Default,show:n},a=t.instance.getBagHadItemNum()>=t.instance.bagAMount&&t.instance.getIsSellEquip(i,1),s={id:k.RedPointId.Recycle_1,type:k.RedPointType.Default,show:a},r=t.instance.getBagHadItemNum()>=t.instance.bagAMount&&t.instance.getIsSellEquip(i,2),c={id:k.RedPointId.Recycle_2,type:k.RedPointType.Default,show:r},l=t.instance.getBagHadItemNum()>=t.instance.bagAMount&&t.instance.getIsSellEquip(i,3),d={id:k.RedPointId.Recycle_3,type:k.RedPointType.Default,show:l},f=t.instance.getBagHadItemNum()>=t.instance.bagAMount&&t.instance.getIsSellEquip(i,4),g={id:k.RedPointId.Recycle_4,type:k.RedPointType.Default,show:f},h=n||a||r||l||f,u={id:k.RedPointId.Recycle,type:k.RedPointType.Default,show:h};return e.push(u),e.push(o),e.push(s),e.push(c),e.push(d),e.push(g),e},t.roleList=[],t.instance=new t,t.Neigua_Status={GuaJi:1,Play:2},t.addBagTimes=0,t.defaultLocalKey="RoleInfoModel",t.bagLocalKey="bagLocalKey",t.showFangyu=1,t.showJiNeng=2,t.showQungong=3,t}(r.default);i.default=Q,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/SafeDataModelBase":"SafeDataModelBase","../../engine/UIManager":"UIManager","../config/BaGuaEquipConfig":"BaGuaEquipConfig","../config/BagConfig":"BagConfig","../config/DefaultConfig":"DefaultConfig","../config/EquipConfig":"EquipConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/HeroConfig":"HeroConfig","../config/ITemsConfig":"ITemsConfig","../config/JingJieConfig":"JingJieConfig","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../config/SkillConfig":"SkillConfig","../config/StarAbilityConfig":"StarAbilityConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../manager/SkillEffectManager":"SkillEffectManager","../network/SocketClient":"SocketClient","../sdk/FeiYouSdkManager":"FeiYouSdkManager","../sdk/SdkHelper":"SdkHelper","../serverFight/SerSkillEffectManager":"SerSkillEffectManager","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","./AdModel":"AdModel","./BossModel":"BossModel","./BusinessModel":"BusinessModel","./CostumeModel":"CostumeModel","./EquipGridModel":"EquipGridModel","./FightModel":"FightModel","./ItemInfoModel":"ItemInfoModel","./JingJieModel":"JingJieModel","./JingLianModel":"JingLianModel","./MagicModel":"MagicModel","./MakeEquipModel":"MakeEquipModel","./MineModel":"MineModel","./PrivilegeModel":"PrivilegeModel","./RedDotModel":"RedDotModel","./SettingModel":"SettingModel","./SkillEffectModel":"SkillEffectModel","./SkillModel":"SkillModel","./SpecialRingModel":"SpecialRingModel","./StarPlanetInfoModel":"StarPlanetInfoModel"}],RoleItem:[function(e,t,i){"use strict";cc._RF.push(t,"9577f2SfshLnZxmwpeFAL2S","RoleItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ResourcesManager"),s=e("./ToStrongerItemBase"),r=cc._decorator,c=r.ccclass,l=r.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.icon=null,t.btn_go=null,t.description=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(t,i){e.prototype.init.call(this,t,i),this.title.string=t.title,this.description.string=t.desc;var n="toStrongerIcon/"+t.rolePowerIconName;a.default.instance.loadSprite(this.icon,n);var o=(new Map).set(this.btn_go,t.rolePowerJumpId);this.bindJumpAction(o)},t.prototype.start=function(){},o([l(cc.Label)],t.prototype,"title",void 0),o([l(cc.Sprite)],t.prototype,"icon",void 0),o([l(cc.Node)],t.prototype,"btn_go",void 0),o([l(cc.RichText)],t.prototype,"description",void 0),t=o([c],t)}(s.ToStrongerItemBase);i.default=d,cc._RF.pop()},{"../../../engine/ResourcesManager":"ResourcesManager","./ToStrongerItemBase":"ToStrongerItemBase"}],RolePrefabInfo:[function(e,t,i){"use strict";cc._RF.push(t,"1850d603u9FXIEZR7+ap4JR","RolePrefabInfo");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/SafeDataModelBase"),a=e("../config/StarAbilityConfig"),s=e("./StarPlanetInfoModel"),r=e("../config/BuffConfig"),c=e("../prefab/RolePrefab"),l=e("../config/MagicNameConfig"),d=e("./BuffModel"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roleName="",t.BonusDamage=0,t.DamageReduction=0,t.BonusDamage_p=0,t.ignoredef_p=0,t.DamageReduction_p=0,t.HpDrain=0,t.MpDrain=0,t.hpKey="hp",t.mpKey="mp",t.maxHpKey="maxHp",t.maxMpKey="maxMp",t.testqiegeTime=0,t.noLuckyTimes=0,t.continueLuckyTimes=0,t.youhuozhiguangDef=0,t.buffList=[],t.buffModelList=[],t}return n(t,e),t.prototype.init=function(e){this.rolePrefab=e},t.prototype.getHp=function(){return this.hp=Math.ceil(this.getNumber(this.hpKey)),this.hp},t.prototype.setHp=function(e){return this.hp=e,this.setNumber(this.hpKey,e),this.hp},t.prototype.getMp=function(){return this.mp=this.getNumber(this.mpKey),this.mp},t.prototype.setMp=function(e){this.mp=e,this.setNumber(this.mpKey,e)},t.prototype.getMaxHp=function(){return this.maxHp=this.getNumber(this.maxHpKey),this.maxHp},t.prototype.setMaxHp=function(e){return this.maxHp=e,this.setNumber(this.maxHpKey,e),this.maxHp},t.prototype.getMaxMp=function(){return this.maxMp=this.getNumber(this.maxMpKey),this.maxMp},t.prototype.setMaxMp=function(e){return this.maxMp=e,this.setNumber(this.maxMpKey,e),this.maxMp},t.prototype.getShengMingXiQu=function(e){var t=this.HpDrain,i=s.default.getStarModelById(a.default.SkillConfig.Skill_203,e),n=s.default.getStarModelById(a.default.SkillConfig.Skill_204,e);if(!i&&n){t+=this.MpDrain;var o=a.default.getConfig(n.id,n.lev);this.getHp()<=this.getMaxHp()*o.skillvalue[0]/1e4&&(t*=2)}else i&&!n&&(t=0);return t},t.prototype.getFaliXiQu=function(e){var t=this.MpDrain,i=s.default.getStarModelById(a.default.SkillConfig.Skill_203,e),n=s.default.getStarModelById(a.default.SkillConfig.Skill_204,e);if(!i&&n)t=0;else if(i&&!n){t+=this.HpDrain;var o=a.default.getConfig(i.id,i.lev);this.getMp()<=this.getMaxMp()*o.skillvalue[0]/1e4&&(t*=2)}return t},t.prototype.getXingXiuAddBonusDamage=function(e){var t=0,i=s.default.getStarModelById(a.default.SkillConfig.Skill_205,e);if(i){var n=a.default.getConfig(i.id,i.lev);t=(this.getMaxHp()+this.getMaxMp())*n.skillvalue[0]/1e4}return t},t.prototype.setDef=function(e){this.def=e},t.prototype.setBuffEffect=function(){for(var e=0;e<this.buffList.length;e++){var t=this.buffList[e];if((0!=t.pets||this.rolePrefab.nowRoleType!=c.default.RoleType.Summoned)&&(t.buffstate==r.BuffConfig.buffstate.attribute&&!t.triggers))for(var i=0;i<t.magic_value.length;i++){var n=t.magic_value[i];for(var o in n){var a=n[o],s=parseInt(o);s==l.MagicNameConfig.MagicId.Allstat_p?(this.attack*=1+a/1e4,this.spt*=1+a/1e4,this.mag*=1+a/1e4):s==l.MagicNameConfig.MagicId.atk_p?this.attack*=1+a/1e4:s==l.MagicNameConfig.MagicId.hp_p?(this.hp*=1+a/1e4,this.setHp(this.hp),this.setMaxHp(this.getMaxHp()*(1+a/1e4))):s==l.MagicNameConfig.MagicId.BonusDamagerate_p?this.BonusDamage*=1+a/1e4:s==l.MagicNameConfig.MagicId.Lucky_p?this.lucky*=1+a/1e4:s==l.MagicNameConfig.MagicId.speed_p?this.attackSpeed*=1+a/1e4:s==l.MagicNameConfig.MagicId.def_p?this.def*=1+a/1e4:s==l.MagicNameConfig.MagicId.BonusDamageeffect_p?this.DamageReduction*=1+a/1e4:s==l.MagicNameConfig.MagicId.HpDrain_p?this.HpDrain*=1+a/1e4:s==l.MagicNameConfig.MagicId.MpDrain_p?this.MpDrain*=1+a/1e4:s==l.MagicNameConfig.MagicId.mp_p&&(this.mp*=1+a/1e4,this.setMp(this.mp),this.setMaxMp(this.getMaxMp()*(1+a/1e4)))}}}},t.prototype.getAttack=function(e){void 0===e&&(e=null);var t=this.attack;if(e)for(var i=0;i<this.buffList.length;i++){var n=this.buffList[i];if((0!=n.pets||this.rolePrefab.nowRoleType!=c.default.RoleType.Summoned)&&(n.buffstate==r.BuffConfig.buffstate.attribute&&"hp"==n.triggers&&e.roleInfo.getHp()<=n.triggers_value[0]))for(var o=0;o<n.magic_value.length;o++){var a=n.magic_value[o];for(var s in a){var d=a[s];parseInt(s)==l.MagicNameConfig.MagicId.atk_p&&(t*=1+d/1e4)}}}return t},t.prototype.getBuffModel=function(e){for(var t=0;t<this.buffModelList.length;t++){var i=this.buffModelList[t];if(i.buffConfig.id==e)return i}},t.prototype.getDef=function(e){if(void 0===e&&(e=null),e&&e.nowRoleType==c.default.RoleType.Role)for(var t=0;t<this.buffList.length;t++){var i=this.buffList[t];if((0!=i.pets||this.rolePrefab.nowRoleType!=c.default.RoleType.Summoned)&&(i.buffstate==r.BuffConfig.buffstate.attribute&&"mp"==i.triggers&&e.roleInfo.getMp()<=i.triggers_value[0]))for(var n=0;n<i.magic_value.length;n++){var o=i.magic_value[n];for(var a in o){var s=o[a];if(parseInt(a)==l.MagicNameConfig.MagicId.def_p){var f=this.getBuffModel(i.id);f||((f=new d.BuffModel).buffConfig=i,this.def*=1+s/1e4,this.buffModelList.push(f))}}}}return this.def},t.prototype.canEatHp=function(){for(var e=0;e<this.buffList.length;e++){var t=this.buffList[e];if((0!=t.pets||this.rolePrefab.nowRoleType!=c.default.RoleType.Summoned)&&t.buffstate==r.BuffConfig.buffstate.hppotion_ban)return!1}return!0},t.prototype.canEatMp=function(){for(var e=0;e<this.buffList.length;e++){var t=this.buffList[e];if((0!=t.pets||this.rolePrefab.nowRoleType!=c.default.RoleType.Summoned)&&t.buffstate==r.BuffConfig.buffstate.manapotion_ban)return!1}return!0},t.prototype.checkLucky_weakness=function(e,t){for(var i=0;i<this.buffList.length;i++){var n=this.buffList[i];if((0!=n.pets||this.rolePrefab.nowRoleType!=c.default.RoleType.Summoned)&&n.buffstate==r.BuffConfig.buffstate.lucky_weakness)return e*=1+t.roleInfo.lucky*(n.magic_value[0]/1e4)/100}return e},t.prototype.checkBonusDamage_weakness=function(e,t){for(var i=0;i<this.buffList.length;i++){var n=this.buffList[i];if((0!=n.pets||this.rolePrefab.nowRoleType!=c.default.RoleType.Summoned)&&n.buffstate==r.BuffConfig.buffstate.BonusDamage_weakness)return e=n.magic_value[0]+t.roleInfoModel.level*n.magic_value[1]/1e4}return e},t}(o.default);i.default=f,cc._RF.pop()},{"../../engine/SafeDataModelBase":"SafeDataModelBase","../config/BuffConfig":"BuffConfig","../config/MagicNameConfig":"MagicNameConfig","../config/StarAbilityConfig":"StarAbilityConfig","../prefab/RolePrefab":"RolePrefab","./BuffModel":"BuffModel","./StarPlanetInfoModel":"StarPlanetInfoModel"}],RolePrefabUtil:[function(e,t,i){"use strict";cc._RF.push(t,"88b30FPnz1DppO2RF65bxpA","RolePrefabUtil");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/EventManager"),r=e("./RolePrefab"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onReuse=function(){this.node.active=!0},t.prototype.onUnuse=function(){this.node.removeComponent(r.default),this.node.stopAllActions(),this.unscheduleAllCallbacks(),s.EventManager.instance.clear(this),this.node.opacity=255,this.node.scale=1,this.node.angle=0,this.node.anchorX=.5,this.node.anchorY=.5,this.node.active=!1,this.findChiidActive(this.node),this.node.addComponent(r.default)},t.prototype.onEnable=function(){for(var e=this.node.childrenCount-1;e>=0;e--){var t=this.node.children[e];"RoleSkillEffectPrefab"!=t.name&&"RoleSkillEffectPrefabEx"!=t.name||t.destroy()}},t.prototype.findChiidActive=function(e){var t=this;e.children.forEach(function(e){e.active=!0,e.childrenCount>0&&t.findChiidActive(e)})},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/EventManager":"EventManager","./RolePrefab":"RolePrefab"}],RolePrefab:[function(e,t,i){"use strict";cc._RF.push(t,"63885YKcrNIoZKA3cW/Mf9W","RolePrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/DateUtil"),r=e("../../engine/EventManager"),c=e("../../engine/Logger"),l=e("../../engine/MathUtils"),d=e("../../engine/RandomUtil"),f=e("../../engine/ResourcesManager"),g=e("../../engine/UIManager"),h=e("../base/NodePoolManager"),u=e("../config/ColorConfig"),p=e("../config/GameConfig"),m=e("../config/GameConst"),C=e("../config/HeroConfig"),_=e("../config/MapConfig"),v=e("../config/MonsterConfig"),y=e("../config/ShenbingskillAllConfig"),b=e("../config/SkillConfig"),I=e("../config/SkinConfig"),M=e("../config/StarAbilityConfig"),w=e("../config/ViewConfig"),k=e("../config/WordConfig"),S=e("../event/CommonEvent"),P=e("../manager/MapManager"),E=e("../manager/MonsterManager"),L=e("../manager/PvpManager"),T=e("../manager/ScoreManager"),R=e("../manager/SkillEffectManager"),N=e("../manager/SkillManager"),B=e("../manager/SummonedManager"),A=e("../manager/TianGuanManager"),G=e("../model/BossModel"),x=e("../model/ChatModel"),O=e("../model/FuGuiGameModel"),V=e("../model/Grid"),j=e("../model/HurtModel"),D=e("../model/RoleInfoModel"),F=e("../model/RolePrefabInfo"),H=e("../model/ServerTime"),U=e("../model/SettingModel"),W=e("../model/ShenBinModel"),q=e("../model/ShenBinSkillModel"),z=e("../model/SkillEffectModel"),J=e("../model/SkillModel"),Y=e("../model/SpecialRingModel"),Z=e("../model/StarPlanetInfoModel"),K=e("../network/SocketClient"),X=e("../utils/MusicHelper"),Q=e("../view/shenbing/BaoshiInfoModel"),$=e("./FightFrameRes"),ee=e("./GameManager"),te=e("./QieGePrefab"),ie=cc._decorator,ne=ie.ccclass,oe=(ie.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxHpWidth=86,t.moveTime=1,t.commonAttackTime=.1,t.nowRoleType=i.RoleType.Role,t.nextAttackCd=0,t.nextMoveCd=0,t.needMove=!1,t.isMoving=!1,t.zhiYuDuration=0,t.zhiYuLastTime=0,t.shiDuDuration=0,t.shiDuLastTime=0,t.shidu_BonusDamage=0,t.shiDu_BonusDamage_p=0,t.yinShenDuration=0,t.yinShenSpeed=0,t.hutiZhenQi_addDef=0,t.hutiZhenQi_Duration=0,t.shenShengZhanJiaDuration=0,t.shenShengZhanJiaAddDef=0,t.shenShengZhanJiaAddHp=0,t.wuJiZhenQiDuration=0,t.wujiZhenSpeedBuf=0,t.huoQiangLastTime=0,t.moFaDunHadHurt=0,t.moFaDunDef=0,t.moFaDunMaxHurt=0,t.moFaDun_CDtime=0,t.yeManChongZhuangDuration=0,t.yeManChongZhuang_decDef=0,t.yeManChongZhuang_def_duration=0,t.lieHuoJianFaDuration=0,t.gongshaJianShu_Duration=0,t.fashujingtong_Duration=0,t.fashujingtong_AtSpeed=0,t.wudiCount=0,t.moveFrameTemp=0,t.icon_zhenqi=null,t.iconBanYue=null,t.totalHurtBlood=0,t.debuff_ice=!1,t.debuff_yun=!1,t.debuff_mabi=!1,t.debuff_shihua=!1,t.mabitime=0,t.isRecycle=!1,t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onEnable=function(){this.userLevelUPNode=this.getChild(this.node,"levelupNode"),this.animation=this.userLevelUPNode.getComponent(cc.Animation),this.userLevelUPNode.active=!1,r.EventManager.instance.on(S.CommonEvent.Event_refresh_starPlanetInfo,this.onStarPlanetInfo,this),r.EventManager.instance.on(S.CommonEvent.Event_Title_update,this.refreshFightFrame,this),r.EventManager.instance.on(S.CommonEvent.Event_UserInfoRefresh,this.onUserInfoRefresh,this),r.EventManager.instance.on(S.CommonEvent.Event_USER_LVVEL_RESH,this.userLevelUPFun,this),this.txtName=this.node.getChildByName("name").getComponent(cc.Label),this.mpNode=this.node.getChildByName("mp"),this.hpNode=this.node.getChildByName("hp"),this.txtHp=this.findChild(this.node,"hp/content").getComponent(cc.Label),this.txtMp=this.findChild(this.node,"mp/txtMp").getComponent(cc.Label),this.iconDu=this.findChild(this.node,"debuff/iconDu"),this.icon_pojia=this.findChild(this.node,"debuff/icon_pojia"),this.iconHuoQiang=this.findChild(this.node,"debuff/iconHuoQiang"),this.iconYinShen=this.findChild(this.node,"debuff/iconYinShen"),this.iconMoFaDun=this.findChild(this.node,"buff/iconMoFaDun"),this.iconAddHp=this.findChild(this.node,"buff/iconAddHp"),this.iconShengSheng=this.findChild(this.node,"buff/iconShengSheng"),this.icon_WujiZhenQi=this.findChild(this.node,"buff/icon_WujiZhenQi"),this.icon_WujiZhenQi.active=!1,this.icon_zhenqi=this.findChild(this.node,"buff/icon_zhenqi"),this.icon_zhenqi.active=!1,this.iconBanYue=this.findChild(this.node,"debuff/iconBanYue"),this.iconBanYue.active=!1,this.mianYiNode=this.findChild(this.node,"mianYiNode"),this.mianYiNode.active=!1,this.iconDu.active=!1,this.icon_pojia.active=!1,this.iconHuoQiang.active=!1,this.iconYinShen.active=!1,this.iconMoFaDun.active=!1,this.iconAddHp.active=!1,this.iconShengSheng.active=!1,this.moFaDun_CDtime=0,this.node.on(cc.Node.EventType.TOUCH_END,this.onClickThis.bind(this))},t.prototype.userLevelUPFun=function(){var e=this;this.roleInfoModel&&this.roleInfoModel.roleId==D.default.instance.roleId&&this.nowRoleType==i.RoleType.Role&&this.animation&&(this.userLevelUPNode.active=!0,this.animation.play("zhanliuplevel",0),this.animation.once("finished",function(){e.userLevelUPNode.active=!1},this))},t.prototype.onStarPlanetInfo=function(){Z.default.getStarModelById(M.default.SkillConfig.Skill_602,this.roleInfoModel)||this.roleInfo&&this.roleInfo.isStarPlanetSummoned&&ee.default.instance.gameView.killSummoned(this)},t.prototype.onClickThis=function(){p.GameConfig.environment!=p.EnvironmentType.Online&&(X.MusicHelper.play_click(),g.default.instance.createView(w.default.gameView.FightRoleInfo,null,this))},t.prototype.getHp=function(){return this.roleInfo?this.roleInfo.getHp():0},t.prototype.getMaxHp=function(){return this.roleInfo?this.roleInfo.getMaxHp():0},t.getFightFrame=function(e,t,n,o,a){var s;return void 0===o&&(o=!1),void 0===a&&(a=0),t==i.RoleType.Role||t==i.RoleType.PvpAttackRole||t==i.RoleType.PvpBeAttackRole?(n==m.GameConst.OCCUPATION.ZHAN_SHI?s=$.FightFrameRes.fight_frame[7]:n==m.GameConst.OCCUPATION.FA_SHI?s=$.FightFrameRes.fight_frame[6]:n==m.GameConst.OCCUPATION.DAO_SHI&&(s=$.FightFrameRes.fight_frame[5]),e>0&&(1==e?n==m.GameConst.OCCUPATION.ZHAN_SHI?s=$.FightFrameRes.fight_frame[12]:n==m.GameConst.OCCUPATION.FA_SHI?s=$.FightFrameRes.fight_frame[11]:n==m.GameConst.OCCUPATION.DAO_SHI&&(s=$.FightFrameRes.fight_frame[10]):2==e?n==m.GameConst.OCCUPATION.ZHAN_SHI?s=$.FightFrameRes.fight_frame[15]:n==m.GameConst.OCCUPATION.FA_SHI?s=$.FightFrameRes.fight_frame[14]:n==m.GameConst.OCCUPATION.DAO_SHI&&(s=$.FightFrameRes.fight_frame[13]):3==e&&(n==m.GameConst.OCCUPATION.ZHAN_SHI?s=$.FightFrameRes.fight_frame[18]:n==m.GameConst.OCCUPATION.FA_SHI?s=$.FightFrameRes.fight_frame[17]:n==m.GameConst.OCCUPATION.DAO_SHI&&(s=$.FightFrameRes.fight_frame[16])))):t==i.RoleType.Monster?o?s=$.FightFrameRes.fight_frame[0]:a==m.GameConst.QUALITY.WHITE?s=$.FightFrameRes.fight_frame[1]:a==m.GameConst.QUALITY.GREEN?s=$.FightFrameRes.fight_frame[2]:a==m.GameConst.QUALITY.BLUE?s=$.FightFrameRes.fight_frame[3]:a==m.GameConst.QUALITY.PURPLE&&(s=$.FightFrameRes.fight_frame[4]):t!=i.RoleType.Summoned&&t!=i.RoleType.PvpAttackSummoned&&t!=i.RoleType.PvpBeAttackSummoned||(s=$.FightFrameRes.fight_frame[8]),s},t.prototype.setRoleType=function(e,t,n,o,a,s){void 0===n&&(n=m.GameConst.QUALITY.WHITE),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=!1),this.roleInfo=new F.default,this.roleInfo.init(this),this.roleInfoModel=t,this.roleInfo.quality=n,this.roleInfo.monsterId=o,this.roleInfo.isBoss=s,this.nowRoleType=e,this.state=i.RoleState.Moving,this.appearMv(),this.totalHurtBlood=0,this.isDead=!1,this.nextAttackCd=0,this.nextMoveCd=0,A.TianGuanManager.instance.tianguanConfig&&(e==i.RoleType.Monster?this.roleInfo.buffList=A.TianGuanManager.instance.monster_buff:this.roleInfo.buffList=A.TianGuanManager.instance.player_buff),e==i.RoleType.Role||e==i.RoleType.PvpAttackRole||e==i.RoleType.PvpBeAttackRole?(this.roleInfo.occupation=t.occupation,this.setRoleInfo(),this.node.getComponent(cc.Sprite).spriteFrame=i.getFightFrame(this.roleInfoModel.title,this.nowRoleType,this.roleInfo.occupation,this.roleInfo.isBoss,this.roleInfo.quality)):e==i.RoleType.Monster?(this.roleInfo.monsterConfig=v.MonsterConfig.getMonsterConfigById(a),this.setMonsterInfo(),this.node.getComponent(cc.Sprite).spriteFrame=i.getFightFrame(0,this.nowRoleType,this.roleInfo.occupation,this.roleInfo.isBoss,this.roleInfo.quality)):e!=i.RoleType.Summoned&&e!=i.RoleType.PvpAttackSummoned&&e!=i.RoleType.PvpBeAttackSummoned||(this.roleInfo.occupation=t.occupation,this.node.getComponent(cc.Sprite).spriteFrame=i.getFightFrame(0,this.nowRoleType,this.roleInfo.occupation,this.roleInfo.isBoss,this.roleInfo.quality)),this.refreshFightFrame()},t.prototype.appearMv=function(){var e=this;this.node.scale=0,cc.tween(this.node).to(.5,{scale:1}).call(function(){e.state=i.RoleState.Relax}).start()},t.prototype.refreshFightFrame=function(){this.roleInfoModel&&(this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole?this.node.getComponent(cc.Sprite).spriteFrame=i.getFightFrame(this.roleInfoModel.title,this.nowRoleType,this.roleInfo.occupation,this.roleInfo.isBoss,this.roleInfo.quality):this.nowRoleType==i.RoleType.Monster?this.node.getComponent(cc.Sprite).spriteFrame=i.getFightFrame(0,this.nowRoleType,this.roleInfo.occupation,this.roleInfo.isBoss,this.roleInfo.quality):this.nowRoleType!=i.RoleType.Summoned&&this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||(this.node.getComponent(cc.Sprite).spriteFrame=i.getFightFrame(0,this.nowRoleType,this.roleInfo.occupation,this.roleInfo.isBoss,this.roleInfo.quality)))},t.prototype.onUserInfoRefresh=function(){this.roleInfoModel&&this.nowRoleType==i.RoleType.Role&&this.setRoleInfo()},t.prototype.setWudi=function(e){void 0===e&&(e=15),this.isDead=!1,this.wudiCount=s.default.now()+1e3*e,R.default.instance.playRoleWudiEffect(this,e,function(){})},t.prototype.setMonsterInfo=function(){this.roleInfo.heroConfig=C.HeroConfig.getMyHeroConfig(),this.roleInfo.roleName=this.roleInfo.monsterConfig.name,this.roleInfo.attack=this.roleInfo.monsterConfig.getAttack(this.roleInfo.quality),this.roleInfo.spt=0,this.roleInfo.mag=0;var e=Math.floor(this.roleInfo.monsterConfig.getHp(this.roleInfo.quality));if(this.roleInfo.isBoss){var t=G.BossModel.getBossHp(parseInt(this.roleInfo.monsterConfig.id),D.default.instance.mapId);this.roleInfo.setHp(Math.max(e-t,1))}else this.roleInfo.setHp(e);this.roleInfo.setMaxHp(e),this.roleInfo.setMp(0),this.roleInfo.setMaxMp(this.roleInfo.getMp()),this.roleInfo.setDef(this.roleInfo.monsterConfig.getDef(this.roleInfo.quality)),this.roleInfo.attackSpeed=this.roleInfo.monsterConfig.atSpeed,this.roleInfo.BonusDamage=this.roleInfo.monsterConfig.BonusDamage,this.roleInfo.DamageReduction=0,this.roleInfo.BonusDamage_p=0,this.roleInfo.DamageReduction_p=0,this.roleInfo.HpDrain=0,this.roleInfo.MpDrain=0,this.roleInfo.lucky=this.roleInfo.monsterConfig.lucky,this.mpNode&&(this.mpNode.active=!0),this.roleInfo.setBuffEffect(),this.refreshRoleInfo()},t.prototype.setRoleInfo=function(){var e=this.roleInfoModel.getDefend(),t=s.default.now();t<this.shenShengZhanJiaDuration&&(e+=this.shenShengZhanJiaAddDef);var i=Math.ceil(this.roleInfoModel.getAttackSpeed());if(this.gongshaJianShu_AtSpeed>0&&(i=Math.ceil(this.roleInfoModel.getAttackSpeed()+this.gongshaJianShu_AtSpeed)),this.fashujingtong_AtSpeed>0&&(i=Math.ceil(this.roleInfoModel.getAttackSpeed()+this.fashujingtong_AtSpeed)),this.yinShenSpeed>0&&(i+=this.yinShenSpeed),this.wujiZhenSpeedBuf>0&&(i+=this.wujiZhenSpeedBuf),t<this.hutiZhenQi_Duration&&(e+=this.hutiZhenQi_addDef),this.roleInfoModel.occupation==m.GameConst.OCCUPATION.FA_SHI){for(var n=null,o=J.SkillModel.getMyCanUseSkillList(this.roleInfoModel),a=0;a<o.length;a++)o[a].skillId==b.SkillConfig.SkillIdConfig.YouHuoZhiGuang&&(n=o[a]);if(n){var r=this.roleInfoModel.getMofa();if(n.skillId==b.SkillConfig.SkillIdConfig.YouHuoZhiGuang){var c=r*n.parameter[3]/1e4+n.parameter[4];this.roleInfo.youhuozhiguangDef<=0&&(this.roleInfo.youhuozhiguangDef=c)}}}this.roleInfo&&this.roleInfo.youhuozhiguangDef>0&&(e+=this.roleInfo.youhuozhiguangDef),this.roleInfo.heroConfig=C.HeroConfig.getHeroConfig(this.roleInfoModel.occupation,this.roleInfoModel.level),this.roleInfo.monsterConfig=null,this.roleInfo.roleName=this.roleInfoModel.roleName,this.roleInfo.attack=this.roleInfoModel.getAttack(),this.roleInfo.spt=this.roleInfoModel.getDaoShu(),this.roleInfo.mag=this.roleInfoModel.getMofa(),this.roleInfo.lucky=this.roleInfoModel.getLucky();var l=this.roleInfoModel.getMaxHp();this.shenShengZhanJiaAddHp>0&&(l+=this.shenShengZhanJiaAddHp),this.roleInfo.setHp(this.roleInfoModel.getHp()>l?l:this.roleInfoModel.getHp()),this.roleInfo.setMaxHp(l),this.roleInfo.setMp(this.roleInfoModel.getMp()),this.roleInfo.setMaxMp(this.roleInfoModel.getMaxMp()),this.roleInfo.setDef(Math.ceil(e)),this.roleInfo.attackSpeed=i,this.roleInfo.BonusDamage=this.roleInfoModel.getGuDingShangHai(),this.roleInfo.DamageReduction=this.roleInfoModel.getGuDingJianShang(),this.roleInfo.BonusDamage_p=this.roleInfoModel.getShangHaiZengJia(),this.roleInfo.DamageReduction_p=this.roleInfoModel.getShangHaiJianMian(),this.roleInfo.HpDrain=this.roleInfoModel.getShengMingXiQu(),this.roleInfo.MpDrain=this.roleInfoModel.getFaLiXiQu(),this.roleInfo.setBuffEffect(),this.refreshRoleInfo()},t.prototype.setSummonedInfo=function(e,t,n,o){this.roleInfo.heroConfig=C.HeroConfig.getHeroConfig(this.roleInfoModel.occupation,this.roleInfoModel.level),this.roleInfo.monsterConfig=null,this.roleInfo.roleName=e.pet_name,this.roleInfo.attack=Math.ceil(n+this.roleInfoModel.getpetdamage()),this.roleInfo.spt=this.roleInfoModel.getDaoShu(),c.Logger.log("setSummonedInfo===",n,this.roleInfoModel.getpetdamage()),this.roleInfo.mag=0,this.roleInfo.lucky=this.roleInfoModel.getLucky(),this.roleInfo.setHp(Math.ceil(t)),this.roleInfo.setMaxHp(Math.ceil(t)),this.roleInfo.setMp(0),this.roleInfo.setMaxMp(0),this.roleInfo.setDef(Math.ceil(o)+50),this.roleInfo.attackSpeed=e.speed+this.roleInfoModel.getpetspeed(),this.roleInfo.BonusDamage=this.roleInfoModel.getGuDingShangHai(),this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||(this.roleInfo.BonusDamage*=.5),this.roleInfo.DamageReduction=10+this.roleInfoModel.getGuDingJianShang(),this.roleInfo.BonusDamage_p=this.roleInfoModel.getpetdamage_p()+this.roleInfoModel.getShangHaiZengJia(),this.roleInfo.ignoredef_p=this.roleInfoModel.getignoredef_p(),this.roleInfo.DamageReduction_p=this.roleInfoModel.getShangHaiJianMian(),this.roleInfo.HpDrain=0,this.roleInfo.MpDrain=0,this.roleInfo.summonedConfig=e,this.mpNode.active=!0,this.roleInfo.setBuffEffect(),this.refreshRoleInfo()},t.prototype.setSummonedInfo2=function(e){this.roleInfo=e,this.summonedBoss=ee.default.instance.gameView.myRolePrefab,this.summonedBoss.roleInfo.youhuozhiguangDef=this.roleInfo.youhuozhiguangDef,this.summonedBoss.roleInfo.setDef(this.roleInfo.getDef()+this.roleInfo.youhuozhiguangDef),c.Logger.log("setSummonedInfo2==",this.roleInfo,this.summonedBoss),this.roleInfo.setBuffEffect(),this.refreshRoleInfo()},t.prototype.refreshRoleInfo=function(){if(this.txtName){this.txtName.string=this.roleInfo.roleName,this.txtName.node.color=u.ColorConfig.getQualityColor(this.roleInfo.quality),this.mpNode.active=this.roleInfo.getMaxMp()>0,this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole?(this.txtHp.string=this.unitNum(this.roleInfo.getHp())+"/"+this.unitNum(this.roleInfo.getMaxHp()),this.hpNode.width=this.roleInfo.getHp()/this.roleInfo.getMaxHp()*this.maxHpWidth,this.txtMp.string=Math.ceil(this.roleInfo.getMp())+"/"+Math.ceil(this.roleInfo.getMaxMp()),this.mpNode.width=this.roleInfo.getMp()/this.roleInfo.getMaxMp()*this.maxHpWidth):this.nowRoleType==i.RoleType.Summoned||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned?(this.txtHp.string=this.unitNum(this.roleInfo.getHp())+"/"+this.unitNum(this.roleInfo.getMaxHp()),this.hpNode.width=this.roleInfo.getHp()/this.roleInfo.getMaxHp()*this.maxHpWidth,this.txtMp.string=Math.ceil(this.roleInfo.getMp())+"/"+Math.ceil(this.roleInfo.getMaxMp()),this.txtMp.node.active=!1,this.mpNode.width=this.maxHpWidth):this.nowRoleType==i.RoleType.Monster&&(this.txtHp.string=this.unitNum(this.roleInfo.getHp())+"/"+this.unitNum(this.roleInfo.getMaxHp()),this.hpNode.width=this.roleInfo.getHp()/this.roleInfo.getMaxHp()*this.maxHpWidth,this.txtMp.string=Math.ceil(this.roleInfo.getMp())+"/"+Math.ceil(this.roleInfo.getMaxMp()),this.txtMp.node.active=!1,this.mpNode.width=this.maxHpWidth),this.hpNode.width>this.maxHpWidth&&(this.hpNode.width=this.maxHpWidth),this.mpNode.width>this.maxHpWidth&&(this.mpNode.width=this.maxHpWidth);var e=this.hpNode.getComponent(cc.Sprite);this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.Summoned||this.nowRoleType==i.RoleType.PvpAttackSummoned?f.default.instance.loadSprite(e,"texture/icon/lv",!0):f.default.instance.loadSprite(e,"texture/icon/hp",!0),r.EventManager.instance.dispatch(S.CommonEvent.Event_RolePrefabfresh)}},t.prototype.update=function(){this.isDead||ee.default.instance.isGuaJi||ee.default.instance.isPause||(this.checkHuTiZhenQi(),this.checkLieHuoJianFa(),this.checkYeManChongZhuang(),this.checkGongShaJianShu(),this.checkFaShuJingtongContinue(),this.checkMoFaDun(),this.checkHuoQiang(),this.checkWuJiZhenQi(),this.checkShenShengZhanJia(),this.checkYinShen(),this.checkZhiYu(),this.checkDu(),this.checkBanyueWanDao(),this.checkQieGe(),this.checkEatHp(),this.checkEatMp(),this.checkAttack(),this.checkMove())},t.prototype.getMainAttackRole=function(e){var t=[];if(this.mainAttackRole&&this.mainAttackRole.node&&!this.mainAttackRole.isDead){var i=Math.abs(this.mainAttackRole.gridRow-this.gridRow),n=Math.abs(this.mainAttackRole.gridCol-this.gridCol);i<=e&&n<=e&&t.push(this.mainAttackRole)}return t},t.prototype.getSkillAttackList=function(e){var t,i=e.int,n=s.default.now(),o=N.default.instance.getSkillModelById(e.skillId,this.roleInfoModel);if(e.skillId==b.SkillConfig.SkillIdConfig.BanYueWanDao)var a=Z.default.getStarModelById(M.default.SkillConfig.Skill_103,this.roleInfoModel);else if(e.skillId==b.SkillConfig.SkillIdConfig.CiShaJianShu){if(a=Z.default.getStarModelById(M.default.SkillConfig.Skill_104,this.roleInfoModel)){var r=M.default.getConfig(a.id,a.lev);c.Logger.log("\u6301\u7eed\u6b21\u6570+==",o.continueTimes),o.continueTimes>=r.skillvalue[0]&&(o.continueTimes=-1,i=r.skillvalue[1],a.time=n)}}else if(e.skillId==b.SkillConfig.SkillIdConfig.HuoQiang)a=Z.default.getStarModelById(M.default.SkillConfig.Skill_503,this.roleInfoModel);else if(e.skillId==b.SkillConfig.SkillIdConfig.LeiDianShu){if(a=Z.default.getStarModelById(M.default.SkillConfig.Skill_504,this.roleInfoModel))i=(r=M.default.getConfig(a.id,a.lev)).skillvalue[0]}else if(e.skillId==b.SkillConfig.SkillIdConfig.ShiDuShu)a=Z.default.getStarModelById(M.default.SkillConfig.Skill_603,this.roleInfoModel);else if(e.skillId==b.SkillConfig.SkillIdConfig.LingHunHuoFu){if(a=Z.default.getStarModelById(M.default.SkillConfig.Skill_604,this.roleInfoModel))i=(r=M.default.getConfig(a.id,a.lev)).skillvalue[0]}return t=this.getAttackList(e.range,i,e),e.skillId==b.SkillConfig.SkillIdConfig.BingPaoXiao&&c.Logger.log("\u51b0\u5486\u54eetest==",i,t),"\u8d85\u795e\u4e50\u67ab"==this.roleInfoModel.roleName&&e.skillId==b.SkillConfig.SkillIdConfig.ShiDuShu&&c.Logger.log("checkOneSkill=============22222======",i,t),!this.mainAttackRole&&t.length>0&&(this.mainAttackRole=t[0]),t},t.prototype.getAttackList=function(e,t,n){void 0===n&&(n=null);var o=[];if(this.nowRoleType==i.RoleType.PvpAttackRole)o=L.PvpManager.instance.getBeAttackList(e,t,this.gridRow,this.gridCol,!0),"\u8d85\u795e\u4e50\u67ab"==this.roleInfoModel.roleName&&n.skillId==b.SkillConfig.SkillIdConfig.ShiDuShu&&c.Logger.log("checkOneSkill=============333333======",e,t,o);else if(this.nowRoleType==i.RoleType.PvpBeAttackRole)o=L.PvpManager.instance.getAttackList(e,t,this.gridRow,this.gridCol,!0);else if(o.length<t){var a=t-o.length,s=E.default.instance.getAttackMonsterList(e,a,this.gridRow,this.gridCol,this.mainAttackRole);o=o.concat(s),this.mainAttackRole&&!this.mainAttackRole.isDead||(this.mainAttackRole=o[0])}return o},t.prototype.checkHuTiZhenQi=function(){s.default.now()<this.hutiZhenQi_Duration?this.icon_zhenqi.active=!0:(this.hutiZhenQi_addDef>0&&(this.roleInfo.setDef(this.roleInfo.getDef()-this.hutiZhenQi_addDef),this.hutiZhenQi_addDef=0),this.icon_zhenqi.active=!1)},t.prototype.checkEatHp=function(){if(this.roleInfo&&this.nowRoleType==i.RoleType.Role&&this.roleInfo.canEatHp()){var e=this.roleInfoModel.getHp()/this.roleInfoModel.getMaxHp(),t=0;U.SettingModel.hpSetPt>U.SettingModel.highHpSetPt?(e<=U.SettingModel.hpSetPt&&U.SettingModel.hpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.HP),this.addHp(t)),0==t&&e<=U.SettingModel.highHpSetPt&&U.SettingModel.highHpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.HHP),this.addHp(t))):(e<=U.SettingModel.highHpSetPt&&U.SettingModel.highHpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.HHP),this.addHp(t)),0==t&&e<=U.SettingModel.hpSetPt&&U.SettingModel.hpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.HP),this.addHp(t)))}},t.prototype.checkEatMp=function(){if(this.roleInfo&&i.RoleType.Role==this.nowRoleType&&this.roleInfo.canEatMp()){var e=this.roleInfoModel.getMp()/this.roleInfoModel.getMaxMp(),t=0;U.SettingModel.mpSetPt>U.SettingModel.highMpSetPt?(e<=U.SettingModel.mpSetPt&&U.SettingModel.mpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.MP),this.addMp(t)),0==t&&e<=U.SettingModel.highMpSetPt&&U.SettingModel.highMpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.HMP),this.addMp(t))):(e<=U.SettingModel.highMpSetPt&&U.SettingModel.highMpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.HMP),this.addMp(t)),0==t&&e<=U.SettingModel.mpSetPt&&U.SettingModel.mpSet&&(t=this.roleInfoModel.autoDrug(m.DrugCoolDown.MP),this.addMp(t)))}},t.prototype.checkLieHuoJianFa=function(){var e=H.ServerTime.getServerTime();if(e<this.lieHuoJianFaDuration){if(this.iconHuoQiang.active=!0,e-this.lieHuoJianFaLastTime>=1e3&&(this.lieHuoJianFaLastTime+=1e3,this.lieHuoRolePrefab)){var t=this.roleInfo.getDef(this.lieHuoRolePrefab),n=this.liehuoBOnusDamage,o=this.roleInfo.DamageReduction,a=this.lieHuoBonusDamage_p,s=this.roleInfo.DamageReduction_p,r=this.lieHuoRolePrefab.getSkillHurt(t,this.lieHuoJianFa_BUF,n,o,a,s,0,0,this,!1);this.decHp(r,!1,this.lieHuoRolePrefab,i.HurtType.Continue)}}else e>=this.lieHuoJianFaDuration&&0!=this.lieHuoJianFaDuration&&(this.iconHuoQiang.active=!1)},t.prototype.checkYeManChongZhuang=function(){var e=s.default.now();this.roleInfo&&this.icon_pojia.active&&e>=this.yeManChongZhuang_def_duration&&(this.icon_pojia.active=!1,this.yeManChongZhuang_decDef>0&&(this.roleInfo.setDef(this.roleInfo.getDef()+this.yeManChongZhuang_decDef),this.yeManChongZhuang_decDef=0))},t.prototype.checkMoFaDun=function(){this.moFaDun&&this.moFaDun.active?this.iconMoFaDun.active=!0:this.iconMoFaDun.active=!1},t.prototype.checkGongShaJianShu=function(){s.default.now()<this.gongshaJianShu_Duration||this.gongshaJianShu_AtSpeed>0&&(this.roleInfo.attackSpeed=Math.ceil(this.roleInfo.attackSpeed-this.gongshaJianShu_AtSpeed),this.gongshaJianShu_AtSpeed=0)},t.prototype.checkFaShuJingtongContinue=function(){s.default.now()<this.fashujingtong_Duration||this.fashujingtong_AtSpeed>0&&(this.roleInfo.attackSpeed=Math.ceil(this.roleInfo.attackSpeed-this.fashujingtong_AtSpeed),this.fashujingtong_AtSpeed=0)},t.prototype.checkBanyueWanDao=function(){var e=s.default.now();if(e<this.banyueDuration){if(this.iconBanYue.active=!0,e-this.banyueLastTime>=1e3){this.banyueLastTime+=1e3;var t=this.roleInfo.getDef(this.banyueWanDaoRole),n=this.banyueBufExt,o=this.banyueBonusDamange;this.nowRoleType!=i.RoleType.PvpAttackRole&&this.nowRoleType!=i.RoleType.PvpBeAttackRole&&this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||(o*=.5);var a=this.roleInfo.DamageReduction,r=this.roleInfo.DamageReduction_p;if(this.banyueWanDaoRole&&this.banyueWanDaoRole.roleInfoModel){var c=this.banyueWanDaoRole.roleInfoModel.getSkillModel(b.SkillConfig.SkillIdConfig.BanYueWanDao),l=this.banyueWanDaoRole.getSkillHurt(t,this.banyueBufDamage,o,a,this.banyueBonusDamage_p,r,n,0,this,!1);l.baseHurt*=c.getHurtPercent(M.default.SkillConfig.Skill_103),l.isLucky=!1,this.decHp(l,!1,this.banyueWanDaoRole,i.HurtType.Continue)}}}else this.banyueEffect3&&(h.default.Instance.put(this.banyueEffect3,"RoleSkillEffectPrefabEx"),this.banyueEffect3=null),e>=this.banyueDuration&&(this.iconBanYue.active=!1)},t.prototype.checkHuoQiang=function(){var e=s.default.now();if(e<this.huoQiangDuration){if(this.iconHuoQiang.active=!0,e-this.huoQiangLastTime>=1e3){this.huoQiangLastTime+=1e3;var t=this.roleInfo.getDef(this.huoQiangRole),n=this.huoQiangBufExt,o=this.huoQiangBonusDamange;this.nowRoleType!=i.RoleType.PvpAttackRole&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned&&this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||(o*=.5);var a=this.roleInfo.DamageReduction,r=this.roleInfo.DamageReduction_p;if(this.huoQiangRole&&this.huoQiangRole.roleInfoModel){var l=this.huoQiangRole.roleInfoModel.getSkillModel(b.SkillConfig.SkillIdConfig.HuoQiang),d=this.huoQiangRole.getSkillHurt(t,this.huoQiangBufDamage,o,a,this.huoQiangBonusDamage_p,r,n,0,this,!1);d.baseHurt*=l.getHurtPercent(M.default.SkillConfig.Skill_503),c.Logger.log("\u706b\u5899=====",d),this.decHp(d,!1,this.huoQiangRole,i.HurtType.Continue)}}}else this.huoQiangEffect2&&(h.default.Instance.put(this.huoQiangEffect2,"RoleSkillEffectPrefabEx"),this.huoQiangEffect2=null),e>=this.huoQiangDuration&&(this.iconHuoQiang.active=!1)},t.prototype.checkWuJiZhenQi=function(){s.default.now()<this.wuJiZhenQiDuration?this.icon_WujiZhenQi.active=!0:(this.wujiZhenSpeedBuf>0&&(this.roleInfo.attackSpeed=Math.floor(this.roleInfo.attackSpeed-this.wujiZhenSpeedBuf),this.wujiZhenSpeedBuf=0),this.icon_WujiZhenQi.active&&this.wujiEffect2&&(h.default.Instance.put(this.wujiEffect2,"RoleSkillEffectPrefabEx"),this.wujiEffect2=null),this.icon_WujiZhenQi.active=!1)},t.prototype.checkShenShengZhanJia=function(){if(s.default.now()<this.shenShengZhanJiaDuration)this.iconShengSheng.active=!0;else{if(this.shenShengZhanJiaAddDef>0){this.roleInfo.setDef(this.roleInfo.getDef()-this.shenShengZhanJiaAddDef),this.shenShengZhanJiaAddDef=0;var e=this.roleInfo.getMaxHp();e-=this.shenShengZhanJiaAddHp,this.shenShengZhanJiaAddHp=0,this.roleInfo.setMaxHp(e),this.roleInfo.getHp()>e&&(this.roleInfo.setHp(e),this.roleInfoModel.setHp(e)),this.refreshRoleInfo()}this.iconShengSheng.active=!1}},t.prototype.checkYinShen=function(){s.default.now()<=this.yinShenDuration?this.iconYinShen.active=!0:(this.iconYinShen.active&&(this.yinShenSpeed>0&&(this.roleInfo.attackSpeed-=this.yinShenSpeed,this.yinShenSpeed=0),this.yinshen_skillmv&&(h.default.Instance.put(this.yinshen_skillmv,"RoleSkillEffectPrefabEx"),this.yinshen_skillmv=null)),this.iconYinShen.active=!1)},t.prototype.checkDu=function(){var e=s.default.now();if(e<this.shiDuDuration){if(this.iconDu.active=!0,e-this.shiDuLastTime>=1e3&&(this.shiDuLastTime+=1e3,this.shiDuRolePrefab&&this.shiDuRolePrefab.roleInfoModel)){var t=this.shiDuRolePrefab.roleInfoModel.getSkillModel(b.SkillConfig.SkillIdConfig.ShiDuShu),n=b.SkillConfig.getSkillConfigById(t.id,t.getTotalLevel(this.shiDuRolePrefab.roleInfoModel)),o=z.default.getSkillEffectAndBonusDamage(n.skillId,this.shiDuRolePrefab.roleInfoModel).skinBonusDamage_p,a=this.roleInfo.getDef(this.shiDuRolePrefab),r=this.shidu_BonusDamage;this.nowRoleType!=i.RoleType.PvpAttackRole&&this.nowRoleType!=i.RoleType.PvpBeAttackRole||(r*=.5);var c=this.roleInfo.DamageReduction,l=this.shiDu_BonusDamage_p,d=this.roleInfo.DamageReduction_p,f=this.shiDuRolePrefab.getSkillHurt(a,(n.parameter[0]+o)/1e4,r,c,l,d,n.bonus,0,this,!1),g=this.shiDuRolePrefab.checkGetWuJieZhenQiHurt(a,r,c,l,d,0,this);f.baseHurt=f.totalHurt,f.wujiHurt=g,f.baseHurt*=t.getHurtPercent(M.default.SkillConfig.Skill_603),f.totalHurt+=g,this.decHp(f,!1,this.shiDuRolePrefab,i.HurtType.Continue)}}else this.shidushu_effect&&(h.default.Instance.put(this.shidushu_effect,"RoleSkillEffectPrefabEx"),this.shidushu_effect=null),this.iconDu.active=!1},t.prototype.checkZhiYu=function(){var e=s.default.now();if(e<this.zhiYuDuration){this.iconAddHp.active=!0;var t=1;if(e-this.zhiYuLastTime>=1e3){this.zhiYuLastTime+=1e3;var n=this.roleInfoModel.getSkillModel(b.SkillConfig.SkillIdConfig.ZhiLiaoShu);if(c.Logger.info("checkZhiYu====",this.roleInfoModel,n),n){var o=b.SkillConfig.getSkillConfigById(n.id,n.getTotalLevel(this.roleInfoModel));this.nowRoleType!=i.RoleType.PvpAttackRole&&this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackRole&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||(t=.2);var a=Math.floor((Math.round(this.roleInfo.spt*o.parameter[1]/1e4)+o.bonus)*t);this.addHp(a)}}}else this.iconAddHp.active=!1},t.getSideRole2Role=function(e,t){i.RoleSide.Left;return e.gridRow==t.gridRow?e.gridCol>t.gridCol?i.RoleSide.Left:i.RoleSide.Right:e.gridCol==t.gridCol?e.gridRow>t.gridRow?i.RoleSide.Up:i.RoleSide.Down:e.gridRow>t.gridRow?e.gridCol>t.gridCol?i.RoleSide.LeftUp:i.RoleSide.RightUp:e.gridCol>t.gridCol?i.RoleSide.LeftDown:i.RoleSide.RightDown},t.prototype.checkOneSkill=function(e){var t=this,n=!1;if(e.mana>this.roleInfo.getMp())return n;if(e.skillId==b.SkillConfig.SkillIdConfig.ShiDuShu?n=this.useSkillShiDuShu(e):e.skillId==b.SkillConfig.SkillIdConfig.LingHunHuoFu?n=this.useLingHunHuoFu(e):e.skillId==b.SkillConfig.SkillIdConfig.HuoQiuShu?n=this.useHuoQiuShu(e):e.skillId==b.SkillConfig.SkillIdConfig.LeiDianShu?n=this.useLeiDianShu(e):e.skillId==b.SkillConfig.SkillIdConfig.HuoQiang?n=this.useHuoQiangShu(e):e.skillId==b.SkillConfig.SkillIdConfig.BingPaoXiao?n=this.useBingPaoXiao(e):e.skillId==b.SkillConfig.SkillIdConfig.CiShaJianShu?n=this.useCiShaJianShu(e):e.skillId==b.SkillConfig.SkillIdConfig.BanYueWanDao?n=this.useBanYueWanDao(e):e.skillId==b.SkillConfig.SkillIdConfig.YeManChongZhuang?n=this.useYeManChongZhuang(e):e.skillId==b.SkillConfig.SkillIdConfig.LieHuoJianFa&&(n=this.useLieHuoJianFa(e)),e.skillId==b.SkillConfig.SkillIdConfig.ZhaoHuanShu){var o=1,a=!1,s=Z.default.getStarModelById(M.default.SkillConfig.Skill_602,this.roleInfoModel);if(s)(o=M.default.getConfig(s.id,s.lev).skillvalue[0])>1&&(a=!0);for(var r=0;r<o;r++){if(f=this.addSummoned(e,this.roleInfo.spt,o)){n=!0,f.roleInfo.isStarPlanetSummoned=a;var l=R.default.instance.skillConfig.zhaohuan_kulu;z.default.getIsEquipSkin(e.skillId,I.SKINID.ZHAOHUANSHU_HuanLing,D.default.instance)&&(l=R.default.instance.skillConfig.zhaohuan_kulu_pro),e.level>=10&&(l=R.default.instance.skillConfig.zhaohuan_shenshou,z.default.getIsEquipSkin(e.skillId,I.SKINID.ZHAOHUANSHU_HuanLing,D.default.instance)&&(l=R.default.instance.skillConfig.zhaohuan_shenshou_pro)),R.default.instance.useSkill(l,f,[f],function(){t.state=i.RoleState.Relax});var d=J.SkillModel.getMyWUJIZHENQIActiveSkill(this.roleInfoModel);d&&(f.roleInfo.xiazi_wujizhenqi_jilv=d.parameter[0],f.roleInfo.xiazi_wujizhenqi_beishu=d.parameter[1])}}}else if(e.skillId==b.SkillConfig.SkillIdConfig.YouHuoZhiGuang){var f;if(f=this.addSummoned(e,this.roleInfo.mag)){n=!0;l=R.default.instance.skillConfig.youHuoZhiGuang;z.default.getIsEquipSkin(e.skillId,I.SKINID.YOUHUOZHIGUANG_YueBai,D.default.instance)&&(l=R.default.instance.skillConfig.youhuozhiguang_pro),R.default.instance.useSkill(l,f,[f],function(){t.state=i.RoleState.Relax})}}else e.skillId==b.SkillConfig.SkillIdConfig.ZhiLiaoShu?n=this.useSkillZhiLiaoShu(e):e.skillId==b.SkillConfig.SkillIdConfig.ShenShengZhanJia?n=this.useShenShengZhanJia(e):e.skillId==b.SkillConfig.SkillIdConfig.WuJiZhenQi?n=this.useWuJiZhenqi(e):e.skillId==b.SkillConfig.SkillIdConfig.MoFaDun?n=this.useMoFaDun(e):e.skillId==b.SkillConfig.SkillIdConfig.DouQiHuTi&&(n=this.useDouQiHuTi(e));return n&&this.decMp(e.mana),"\u8d85\u795e\u4e50\u67ab"==this.roleInfoModel.roleName&&c.Logger.log("checkOneSkill===================",e,n),n&&this.nowRoleType==i.RoleType.Role&&305!=e.skillId&&204!=e.skillId&&N.default.instance.addSkillExp(e.skillId,1,this.roleInfoModel),n},t.prototype.addSummoned=function(e,t,n){var o=this;void 0===n&&(n=1);var a=ee.default.instance.gameView.getEmptyGridList();if(!(a.length<=0))if(B.default.instance.canAddSummoned(n)||this.nowRoleType!=i.RoleType.Role){if(!(this.nowRoleType==i.RoleType.PvpAttackRole&&L.PvpManager.instance.attackSummonedPrefabList.length>=n||this.nowRoleType==i.RoleType.PvpBeAttackRole&&L.PvpManager.instance.beAttackSummonedPrefabList.length>=n)){var s=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel).skinBonusDamage_p,r=t*(e.parameter[0]+s)/1e4,d=t*e.parameter[1]/1e4,f=t*e.parameter[2]/1e4,g=0;e.skillId==b.SkillConfig.SkillIdConfig.YouHuoZhiGuang&&(g=t*e.parameter[3]/1e4+e.parameter[4],this.roleInfo.youhuozhiguangDef>0&&this.roleInfo.setDef(this.roleInfo.getDef()-this.roleInfo.youhuozhiguangDef),this.roleInfo.youhuozhiguangDef=g,this.roleInfo.setDef(this.roleInfo.getDef()+this.roleInfo.youhuozhiguangDef)),d+=g,c.Logger.log("\u589e\u52a0\u53ec\u5524\u7269===",s,r,t,g,d,e,e.id,b.SkillConfig.SkillIdConfig.YouHuoZhiGuang),a.sort(function(e,t){return l.default.distance(e.row,e.col,o.gridRow,o.gridCol)-l.default.distance(t.row,t.col,o.gridRow,o.gridCol)});var h=a[0];this.nowRoleType==i.RoleType.PvpAttackRole?ee.default.instance.gameView.canWalk(this.gridRow+1,this.gridCol)?h=V.default.init(this.gridRow+1,this.gridCol):ee.default.instance.gameView.canWalk(this.gridRow+1,this.gridCol+1)&&(h=V.default.init(this.gridRow+1,this.gridCol+1)):this.nowRoleType==i.RoleType.PvpBeAttackRole&&(ee.default.instance.gameView.canWalk(this.gridRow-1,this.gridCol)?h=V.default.init(this.gridRow-1,this.gridCol):ee.default.instance.gameView.canWalk(this.gridRow-1,this.gridCol-1)&&(h=V.default.init(this.gridRow-1,this.gridCol-1)));var u=ee.default.instance.gameView.addSummoned(h,this.roleInfoModel);return u.roleInfo.youhuozhiguangDef=this.roleInfo.youhuozhiguangDef,u.summonedBoss=this,this.nowRoleType==i.RoleType.PvpAttackRole?(L.PvpManager.instance.attackSummonedPrefabList.push(u),u.setRoleType(i.RoleType.PvpAttackSummoned,this.roleInfoModel)):this.nowRoleType==i.RoleType.PvpBeAttackRole&&(L.PvpManager.instance.beAttackSummonedPrefabList.push(u),u.setRoleType(i.RoleType.PvpBeAttackSummoned,this.roleInfoModel)),B.default.instance.summonedList.push(u),u.setSummonedInfo(e,f,r,d),u.wuJiZhenQiDuration=this.wuJiZhenQiDuration,u}}else c.Logger.log("\u53ec\u5524=====",B.default.instance.summonedList)},t.prototype.useLieHuoJianFa=function(e){var t,n=this,o=this.getSkillAttackList(e);H.ServerTime.getServerTime();if(o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),s=a.skillEffectType,r=a.skinBonusDamage_p;R.default.instance.useSkill(s,this,o,function(){if(n.roleInfo){var t;n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));var a=-1,s=!1;n.mainAttackRole&&n.mainAttackRole.node&&!n.mainAttackRole.isDead&&-1!=(a=o.indexOf(n.mainAttackRole))&&(t=n.mainAttackRole,o.splice(a,1)),t||(t=o[0],o.shift());var l,d=H.ServerTime.getServerTime(),f=n.roleInfoModel.getSkillModel(e.skillId);if(t&&t.node&&!t.isDead&&!t.isRecycle){var g=t.roleInfo.getDef(n),h=n.roleInfo.BonusDamage,u=t.roleInfo.DamageReduction,p=n.roleInfo.BonusDamage_p,m=t.roleInfo.DamageReduction_p;(v=n.getSkillHurt(g,e.parameter[0]*(1+r/1e4)/1e4,h,u,p,m,e.bonus,0,t,!0)).baseHurt*=f.getHurtPercent(M.default.SkillConfig.Skill_102),t.decHp(v,!1,n),t.lieHuoJianFaDuration>d?t.lieHuoJianFaDuration=t.lieHuoJianFaDuration+1e3*(e.duration_time+1):t.lieHuoJianFaDuration=d+1e3*(e.duration_time+1),t.lieHuoJianFaLastTime=d,t.lieHuoJianFa_BUF=e.parameter[1]*(1+r/1e4)/1e4,t.liehuoBOnusDamage=h,t.lieHuoBonusDamage_p=n.roleInfo.BonusDamage_p,t.lieHuoRolePrefab=n,t.iconHuoQiang.active=!0,v.isLucky&&(l=!0),t.roleInfo.getHp()<=0&&(s=!0)}for(var C=0;C<o.length;C++){var _=o[C];if(_&&_.node&&!_.isDead&&!_.isRecycle){_.lieHuoJianFaDuration>d?_.lieHuoJianFaDuration=_.lieHuoJianFaDuration+1e3*(e.duration_time+1):_.lieHuoJianFaDuration=d+1e3*(e.duration_time+1);var v;g=_.roleInfo.getDef(n),h=n.roleInfo.BonusDamage,u=_.roleInfo.DamageReduction,p=n.roleInfo.BonusDamage_p,m=_.roleInfo.DamageReduction_p;(v=n.getSkillHurt(g,e.parameter[0]*(1+r/1e4)/1e4,h,u,p,m,e.bonus,0,_,!0)).baseHurt*=f.getHurtPercent(M.default.SkillConfig.Skill_102),_.decHp(v,!1,n),_.lieHuoJianFaLastTime=d,_.lieHuoJianFa_BUF=e.parameter[1]*(1+r/1e4)/1e4,_.liehuoBOnusDamage=n.roleInfo.BonusDamage,_.lieHuoBonusDamage_p=n.roleInfo.BonusDamage_p,_.lieHuoRolePrefab=n,_.iconHuoQiang.active=!0}}n.checkResetLucktyTimes(l),f.lastUseTIme=d;var y=Z.default.getStarModelById(M.default.SkillConfig.Skill_102,n.roleInfoModel);if(n.state=i.RoleState.Relax,y){var b=M.default.getConfig(y.id,y.lev);!s&&d-y.time>1e3*b.cooldown&&(y.time=d,f.lastUseTIme=0,c.Logger.log("==\u70c8\u706b\u5251\u6cd5cd\u91cd\u7f6e==="))}}}),t=!0}return t},t.prototype.useDouQiHuTi=function(e){var t,n=this,o=[this],a=B.default.instance.getSummonedListByDistance(e.range,e.int,this.gridRow,this.gridCol,this);return(o=o.concat(a)).length>0&&(this.state=i.RoleState.Attack,R.default.instance.useSkill(R.default.instance.skillConfig.zhenqihuti,this,o,function(){for(var t=0;t<o.length;t++){var a=o[t];a.hutiZhenQi_addDef>0&&a.roleInfo.setDef(a.roleInfo.getDef()-a.hutiZhenQi_addDef),a.hutiZhenQi_addDef=n.roleInfo.getDef()*(e.parameter[0]/1e4)+e.bonus,a.roleInfo.setDef(a.roleInfo.getDef()+a.hutiZhenQi_addDef),a.hutiZhenQi_Duration=s.default.now()+1e3*e.duration_time;var r=Math.round(a.roleInfo.getMaxHp()*(e.parameter[1]/1e4));a.addHp(r)}n.state=i.RoleState.Relax}),t=!0),t},t.prototype.useYeManChongZhuang=function(e){var t,n=this,o=this.getSkillAttackList(e);if(o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),r=a.skillEffectType,l=a.skinBonusDamage_p;if(this.mainAttackRole&&(this.mainAttackRole.nowRoleType==i.RoleType.PvpBeAttackRole||this.mainAttackRole.nowRoleType==i.RoleType.PvpAttackRole)&&(Math.abs(this.gridRow-this.mainAttackRole.gridRow)>1||Math.abs(this.gridCol-this.mainAttackRole.gridCol)>1)){var f=this.getYemanMoveGird(this,this.mainAttackRole);if(f){this.gridRow=f.row,this.gridCol=f.col;var g=ee.default.instance.gameView.getGridPosition(f.row,f.col);cc.tween(this.node).delay(.2).to(.3,{position:g}).call(function(){}).start()}}R.default.instance.useSkill(r,this,o,function(){if(n.roleInfo){n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));for(var t,a=Math.random(),r=0;r<o.length;r++){var f=o[r];if(f&&f.node&&!f.isDead&&!f.isRecycle){var g=f.roleInfo.getDef(n),h=n.roleInfo.BonusDamage,u=f.roleInfo.DamageReduction,p=n.roleInfo.BonusDamage_p,m=f.roleInfo.DamageReduction_p,C=n.getSkillHurt(g,(e.parameter[0]+l)/1e4,h,u,p,m,e.bonus,0,f,!0);f.decHp(C,!1,n),C.isLucky&&(t=!0);var _=e.chance;if(f.nowRoleType!=i.RoleType.PvpAttackRole&&f.nowRoleType!=i.RoleType.PvpBeAttackRole&&f.nowRoleType!=i.RoleType.PvpAttackSummoned&&f.nowRoleType!=i.RoleType.PvpBeAttackSummoned||f.roleInfoModel.totalFight<n.roleInfoModel.totalFight&&(_+=.5*_,c.Logger.log("\u6218\u529b\u52a0\u6210====",_)),a<=_/1e4){if(!n.roleInfo||!f||!f.roleInfo)return;f.yeManChongZhuang_decDef>0&&f.roleInfo.setDef(f.roleInfo.getDef()+f.yeManChongZhuang_decDef);var v=Math.floor(f.roleInfo.def*e.parameter[1]/1e4);v>f.roleInfo.getDef()&&(v=f.roleInfo.getDef()),f.nowRoleType!=i.RoleType.PvpAttackRole&&f.nowRoleType!=i.RoleType.PvpBeAttackRole&&f.nowRoleType!=i.RoleType.PvpAttackSummoned&&f.nowRoleType!=i.RoleType.PvpBeAttackSummoned||(v=0),f.yeManChongZhuang_decDef=v,f.yeManChongZhuangDuration=s.default.now()+1e3*e.duration_time,f.roleInfo.setDef(f.roleInfo.getDef()-v),f.yeManChongZhuang_def_duration=s.default.now()+1e3*e.parameter[2],d.default.nextInt(0,1e4)<=e.chance&&R.default.instance.playRoleYunEffect(f,e.duration_time,function(){})}}}n.checkResetLucktyTimes(t),n.state=i.RoleState.Relax}}),t=!0}return t},t.prototype.useBanYueWanDao=function(e){var t,n=this,o=this.getSkillAttackList(e);if(o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),r=a.skillEffectType,l=a.skinBonusDamage_p,d=this.roleInfoModel.getSkillModel(e.skillId);R.default.instance.useSkill(r,this,o,function(){if(n.roleInfo){n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));var t=-1;n.mainAttackRole&&!n.mainAttackRole.isDead&&(t=o.indexOf(n.mainAttackRole)),t<0&&(t=0);for(var i,a=s.default.now(),r=0;r<o.length;r++){var f=o[r];if(f&&f.roleInfo&&!f.isDead&&!f.isRecycle){var g=Math.ceil(n.roleInfo.BonusDamage),h=f.roleInfo.getDef(n),u=f.roleInfo.DamageReduction,p=n.roleInfo.BonusDamage_p,m=f.roleInfo.DamageReduction_p,C=void 0;C=t==r?n.getSkillHurt(h,(e.parameter[0]+l)/1e4+e.parameter[2]/1e4,g,u,p,m,0,0,f,!0,e):n.getSkillHurt(h,(e.parameter[0]+l)/1e4,g,u,p,m,0,0,f,!0,e),f.banyueDuration=a+1e3*(e.duration_time+1),f.banyueLastTime=a,f.banyueBufDamage=(e.parameter[1]+l)/1e4,f.banyueBonusDamange=g,f.banyueBonusDamage_p=p,f.banyueBufExt=e.bonus,f.banyueWanDaoRole=n,C.isLucky&&(i=!0),c.Logger.log("useBanYueWanDao======",C.baseHurt),C.baseHurt*=d.getHurtPercent(M.default.SkillConfig.Skill_103),c.Logger.log("useBanYueWanDao====2222==",C.baseHurt),f.decHp(C,!1,n)}}n.checkResetLucktyTimes(i)}}),this.state=i.RoleState.Relax,t=!0}return t},t.prototype.useCiShaJianShu=function(e){var t,n=this,o=this.getSkillAttackList(e),a=N.default.instance.getSkillModelById(e.skillId,this.roleInfoModel);if(o.length>0){this.state=i.RoleState.Attack;var s=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),r=s.skillEffectType,l=s.skinBonusDamage_p;a.continueTimes++,R.default.instance.useSkill(r,this,o,function(){if(n.roleInfo){var t;c.Logger.log("\u523a\u6740\u5251\u672f3\u6b21"),n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));for(var s=0;s<o.length;s++){var r=o[s];if(r&&r.node&&!r.isDead&&!r.isRecycle){var d=r.roleInfo.getDef(n)-r.roleInfo.getDef(n)*e.parameter[1]/1e4,f=n.roleInfo.BonusDamage,g=r.roleInfo.DamageReduction,h=n.roleInfo.BonusDamage_p,u=r.roleInfo.DamageReduction_p,p=n.getSkillHurt(d,(e.parameter[0]+l)/1e4,f,g,h,u,e.bonus,0,r,!0);p.baseHurt*=a.getHurtPercent(M.default.SkillConfig.Skill_104),r.decHp(p,!1,n),p.isLucky&&(t=!0)}}n.checkResetLucktyTimes(t),n.state=i.RoleState.Relax}}),t=!0}return t},t.prototype.useBingPaoXiao=function(e){var t,n=this,o=this.getSkillAttackList(e);if(o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),s=a.skillEffectType,r=a.skinBonusDamage_p,l=o.length,d=this.roleInfoModel.getSkillModel(e.skillId);R.default.instance.useSkill(s,this,o,function(){if(n.roleInfo){var t;n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));var a,s=-1;if(n.mainAttackRole&&n.mainAttackRole.node&&!n.mainAttackRole.isDead&&-1!=(s=o.indexOf(n.mainAttackRole))&&(t=n.mainAttackRole,o.splice(s,1)),t||(t=o[0],o.shift()),t&&t.node&&!t.isDead&&!t.isRecycle){var f=t.roleInfo.getDef(n),g=n.roleInfo.BonusDamage,h=t.roleInfo.DamageReduction,u=n.roleInfo.BonusDamage_p,p=t.roleInfo.DamageReduction_p;(_=n.getSkillHurt(f,e.parameter[0]*(1+r/1e4)/1e4+e.parameter[1]*(1+r/1e4)/1e4,g,h,u,p,e.bonus,0,t,!0)).baseHurt*=d.getHurtPercent(M.default.SkillConfig.Skill_502,l),t.decHp(_,!1,n),c.Logger.info("\u51b0\u5486\u54ee\u653b\u51fb:",o.length,t.roleInfo.roleName,"\u6263\u8840:",Math.ceil(_.totalHurt)),_.isLucky&&(a=!0)}for(var m=0;m<o.length;m++){var C=o[m];if(C&&C.node&&!C.isDead&&!C.isRecycle){var _;f=C.roleInfo.getDef(n),g=n.roleInfo.BonusDamage,h=C.roleInfo.DamageReduction,u=n.roleInfo.BonusDamage_p,p=C.roleInfo.DamageReduction_p;(_=n.getSkillHurt(f,e.parameter[0]*(1+r/1e4)/1e4,g,h,u,p,e.bonus,0,C,!0)).baseHurt*=d.getHurtPercent(M.default.SkillConfig.Skill_502,l),C.decHp(_,!1,n),_.isLucky&&(a=!0)}}n.checkResetLucktyTimes(a),n.state=i.RoleState.Relax}}),t=!0}return t},t.prototype.useMoFaDun=function(e){var t,n=this;if(this.moFaDun)return t;if(s.default.now()-this.moFaDun_CDtime<1e3*e.cd)return t;var o=[this];if(e.int-1>0){var a=B.default.instance.getSummonedListByDistance(e.range,e.int-1,this.gridRow,this.gridCol,this);o=o.concat(a)}if(o.length>=e.t_num){this.state=i.RoleState.Attack;var r=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),l=r.skillEffectType,d=r.skinBonusDamage_p;R.default.instance.useSkill(l,this,o,function(t){for(var a=0;a<o.length;a++){var s=o[a];s&&!s.isDead&&s.roleInfo&&t[a]&&(s.moFaDun&&(c.Logger.log("\u6d88\u9664\u9b54\u6cd5\u76fe"),h.default.Instance.put(s.moFaDun,"RoleSkillEffectPrefabEx"),s.moFaDun=null),s.moFaDun=t[a],s.moFaDunHadHurt=0,s.moFaDunDef=e.parameter[0]/1e4,s.moFaDunMaxHurt=s.roleInfo.mag*(e.parameter[1]+d)/1e4+e.bonus)}n.state=i.RoleState.Relax}),t=!0}return t},t.prototype.useHuoQiangShu=function(e){var t,n=this,o=this.getSkillAttackList(e);if(o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),s=a.skillEffectType,r=a.skinBonusDamage_p;R.default.instance.useSkill(s,this,o,function(){if(n.roleInfo){var t;n.state=i.RoleState.Relax,n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));var a=-1;n.mainAttackRole&&n.mainAttackRole.node&&!n.mainAttackRole.isDead&&-1!=(a=o.indexOf(n.mainAttackRole))&&(t=n.mainAttackRole,o.splice(a,1)),t||(t=o[0],o.shift());var s,c=n.roleInfoModel.getSkillModel(e.skillId),l=Date.now();if(t&&t.node&&!t.isDead&&!t.isRecycle){var d=n.roleInfo.BonusDamage,f=t.roleInfo.getDef(n),g=t.roleInfo.DamageReduction,h=n.roleInfo.BonusDamage_p,u=t.roleInfo.DamageReduction_p;(C=n.getSkillHurt(f,(e.parameter[0]+r)/1e4+e.parameter[2]/1e4,d,g,h,u,0,0,t,!0)).baseHurt*=c.getHurtPercent(M.default.SkillConfig.Skill_503),t.decHp(C,!1,n),t.huoQiangDuration=l+1e3*(e.duration_time+1),t.huoQiangLastTime=l,t.huoQiangBufDamage=(e.parameter[1]+r)/1e4,t.huoQiangBonusDamange=d,t.huoQiangBonusDamage_p=h,t.huoQiangBufExt=e.bonus,t.huoQiangRole=n,C.isLucky&&(s=!0)}for(var p=0;p<o.length;p++){var m=o[p];if(m&&m.node&&!m.isDead&&!m.isRecycle){var C;d=n.roleInfo.BonusDamage,f=m.roleInfo.getDef(n),g=m.roleInfo.DamageReduction,h=n.roleInfo.BonusDamage_p,u=m.roleInfo.DamageReduction_p;(C=n.getSkillHurt(f,(e.parameter[0]+r)/1e4,d,g,h,u,0,0,m,!0)).baseHurt*=c.getHurtPercent(M.default.SkillConfig.Skill_503),m.decHp(C,!1,n),m.huoQiangDuration=l+1e3*(e.duration_time+1),m.huoQiangLastTime=l,m.huoQiangBufDamage=(e.parameter[1]+r)/1e4,m.huoQiangBonusDamange=d,m.huoQiangBonusDamage_p=h,m.huoQiangBufExt=e.bonus,m.huoQiangRole=n,C.isLucky&&(s=!0)}}n.checkResetLucktyTimes(s)}}),t=!0}return t},t.prototype.useLeiDianShu=function(e){var t,n=this,o=this.getSkillAttackList(e);if(o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),s=a.skillEffectType,r=a.skinBonusDamage_p;R.default.instance.useSkill(s,this,o,function(){if(n.roleInfo){n.state=i.RoleState.Relax,n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));for(var t,a=n.roleInfoModel.getSkillModel(e.skillId),s=0;s<o.length;s++){var c=o[s];if(c&&c.node&&!c.isDead&&!c.isRecycle){var l=c.roleInfo.getDef(n)-c.roleInfo.getDef(n)*e.parameter[1]/1e4,d=n.roleInfo.BonusDamage,f=c.roleInfo.DamageReduction,g=n.roleInfo.BonusDamage_p,h=c.roleInfo.DamageReduction_p,u=n.getSkillHurt(l,(e.parameter[0]+r)/1e4,d,f,g,h,e.bonus,0,c,!0);u.baseHurt*=a.getHurtPercent(M.default.SkillConfig.Skill_504),c.decHp(u,!1,n),u.isLucky&&(t=!0)}}n.checkResetLucktyTimes(t)}}),t=!0}return t},t.prototype.useHuoQiuShu=function(e){var t,n=this,o=this.getSkillAttackList(e);return o.length>0&&(this.state=i.RoleState.Attack,R.default.instance.useSkill(R.default.instance.skillConfig.huoqiushu,this,o,function(){if(n.roleInfo){var t;n.state=i.RoleState.Relax,n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));for(var a=0;a<o.length;a++){var s=o[a];if(s&&s.node&&!s.isDead&&!s.isRecycle){var r=s.roleInfo.getDef(n),c=n.roleInfo.BonusDamage,l=s.roleInfo.DamageReduction,d=n.roleInfo.BonusDamage_p,f=s.roleInfo.DamageReduction_p,g=n.getSkillHurt(r,e.parameter[0]/1e4,c,l,d,f,e.bonus,0,s,!0);s.decHp(g,!1,n),g.isLucky&&(t=!0)}}n.checkResetLucktyTimes(t)}}),t=!0),t},t.prototype.useWuJiZhenqi=function(e){var t,n=this,o=this.getSkillAttackList(e);if(c.Logger.log("usewujizhenqi======",o),o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),s=a.skillEffectType,r=a.skinBonusDamage_p;t=!0,R.default.instance.useSkill(s,this,o,function(){if(n.roleInfo){n.state=i.RoleState.Relax,n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));n.roleInfoModel.getSkillModel(e.skillId);for(var t,a=0;a<o.length;a++){var s=o[a];if(s&&s.node&&!s.isDead&&!s.isRecycle){var c=s.roleInfo.getDef(n)-s.roleInfo.getDef(n),l=(s.roleInfo.getDef(n),n.roleInfo.BonusDamage),d=s.roleInfo.DamageReduction,f=n.roleInfo.BonusDamage_p,g=s.roleInfo.DamageReduction_p,h=n.getSkillHurt(c,e.parameter[2]*(1+r/1e4)/1e4,l,d,f,g,e.bonus,0,s,!0);h.isLucky&&(t=!0),h.baseHurt=h.totalHurt,s.decHp(h,!1,n)}}n.checkResetLucktyTimes(t)}})}return t},t.prototype.useShenShengZhanJia=function(e){var t=this,n=[this];if(n.length<e.int){var o=e.int-n.length,a=B.default.instance.getSummonedListByDistance(e.range,o,this.gridRow,this.gridCol,this);n=n.concat(a)}var r=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),c=r.skillEffectType,l=r.skinBonusDamage_p;R.default.instance.useSkill(c,this,n,function(){t.state=i.RoleState.Relax});for(var d=0;d<n.length;d++){var f=n[d];f.shenShengZhanJiaDuration=s.default.now()+1e3*(e.duration_time+1),f.shenShengZhanJiaAddDef>0&&f.roleInfo.setDef(f.roleInfo.getDef()-f.shenShengZhanJiaAddDef),f.shenShengZhanJiaAddDef=Math.round(this.roleInfo.spt*((e.parameter[0]+l)/1e4)+e.bonus);var g=f.roleInfo.getMaxHp();f.roleInfo.setDef(f.roleInfo.getDef()+f.shenShengZhanJiaAddDef),f.shenShengZhanJiaAddHp>0&&(g-=f.shenShengZhanJiaAddHp),f.shenShengZhanJiaAddHp=Math.round(f.roleInfo.getMaxHp()*(e.parameter[1]/1e4)),g+=f.shenShengZhanJiaAddHp,f.roleInfo.setMaxHp(g),f.refreshRoleInfo()}return!0,!0},t.prototype.useLingHunHuoFu=function(e){var t,n=this,o=this.getSkillAttackList(e);if(c.Logger.log("useLingHunHuoFu======",o),o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),s=a.skillEffectType,r=a.skinBonusDamage_p;t=!0,R.default.instance.useSkill(s,this,o,function(){if(n.roleInfo){n.state=i.RoleState.Relax,n.addHp(n.roleInfo.getShengMingXiQu(n.roleInfoModel)),n.addMp(n.roleInfo.getFaliXiQu(n.roleInfoModel));for(var t,a=n.roleInfoModel.getSkillModel(e.skillId),s=0;s<o.length;s++){var c=o[s];if(c&&c.node&&!c.isDead&&!c.isRecycle){var l=c.roleInfo.getDef(n)-c.roleInfo.getDef(n)*e.parameter[1]/1e4,d=c.roleInfo.getDef(n),f=n.roleInfo.BonusDamage,g=c.roleInfo.DamageReduction,h=n.roleInfo.BonusDamage_p,u=c.roleInfo.DamageReduction_p,p=n.getSkillHurt(l,(e.parameter[0]+r)/1e4,f,g,h,u,e.bonus,0,c,!0),m=n.checkGetWuJieZhenQiHurt(d,f,g,h,u,0,c);p.isLucky&&(t=!0),p.baseHurt=p.totalHurt,p.wujiHurt=m,p.baseHurt*=a.getHurtPercent(M.default.SkillConfig.Skill_604),p.totalHurt+=m,c.decHp(p,!1,n)}}n.checkResetLucktyTimes(t)}})}return t},t.prototype.useSkillShiDuShu=function(e){var t=this,n=!1,o=this.getSkillAttackList(e);if(o.length>0){this.state=i.RoleState.Attack;var a=z.default.getSkillEffectAndBonusDamage(e.skillId,this.roleInfoModel),r=a.skillEffectType,c=a.skinBonusDamage_p;R.default.instance.useSkill(r,this,o,function(){t.roleInfo&&(t.state=i.RoleState.Relax,t.addHp(t.roleInfo.getShengMingXiQu(t.roleInfoModel)),t.addMp(t.roleInfo.getFaliXiQu(t.roleInfoModel)))}),n=!0;for(var l=this.roleInfoModel.getSkillModel(e.skillId),d=void 0,f=0;f<o.length;f++){var g=o[f];if(g&&g.node&&!g.isDead&&!g.isRecycle){var h=g.roleInfo.getDef(this),u=this.roleInfo.BonusDamage,p=g.roleInfo.DamageReduction,m=this.roleInfo.BonusDamage_p,C=g.roleInfo.DamageReduction_p;g.shiDu_BonusDamage_p=this.roleInfo.BonusDamage_p,g.shidu_BonusDamage=u;var _=this.getSkillHurt(h,(e.parameter[0]+c)/1e4,u,p,m,C,e.bonus,0,g,!0),v=this.checkGetWuJieZhenQiHurt(h,u,p,m,C,0,g);_.baseHurt=_.totalHurt,_.wujiHurt=v,_.totalHurt+=v,_.isLucky&&(d=!0),_.baseHurt*=l.getHurtPercent(M.default.SkillConfig.Skill_603),g.decHp(_,!1,this),g.shiDuRolePrefab=this;var y=s.default.now();g.shiDuDuration=y+1e3*(e.duration_time+1),g.shiDuLastTime=y}}this.checkResetLucktyTimes(d)}return n},t.prototype.useSkillZhiLiaoShu=function(e){var t,n=this,o=[this];if(o.length<e.int){var a=B.default.instance.getSummonedListByDistance(e.range,e.int,this.gridRow,this.gridCol,this);o=o.concat(a)}for(var r=!0,c=0;c<o.length;c++){(l=o[c]).nowRoleType==i.RoleType.Role?l.roleInfo.getHp()<.8*l.roleInfo.getMaxHp()&&(r=!0):l.nowRoleType==i.RoleType.Summoned&&l.roleInfo.getHp()<.8*l.roleInfo.getMaxHp()&&(r=!0)}if(r){R.default.instance.useSkill(R.default.instance.skillConfig.zhiYuShu,this,o,function(){n.state=i.RoleState.Relax});for(c=0;c<o.length;c++){var l;(l=o[c]).zhiYuDuration=s.default.now()+1e3*e.duration_time,l.zhiYuLastTime=s.default.now();var d=Math.round(l.roleInfo.getMaxHp()*e.parameter[0]/1e4);l.addHp(d)}t=!0}return t},t.prototype.getJianShangXiShu=function(e){return Math.min(.015*e/(18+.015*e),.6)},t.prototype.checkGetWuJieZhenQiHurt=function(e,t,i,n,o,a,s){return 0},t.prototype.checkFaShuJingTong=function(e,t,n,o,a,r,l){var d=0;if((this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole)&&this.roleInfoModel.occupation==m.GameConst.OCCUPATION.FA_SHI){var f=Math.random(),g=0,h=N.default.instance.getFaShuJingTong(this.roleInfoModel);if(h){var u=h.chance;if(r=h.bonus,l&&l.nowRoleType==i.RoleType.Monster&&l.roleInfo.isBoss&&(u*=1.5),h&&f<=u/1e4){var p=h.parameter[0]/1e4;isNaN(r)&&(r=0),this.fashujingtong_AtSpeed>0&&(this.roleInfo.attackSpeed-=this.fashujingtong_AtSpeed,this.fashujingtong_AtSpeed=0),this.fashujingtong_AtSpeed=h.parameter[1],this.roleInfo.attackSpeed=Math.ceil(this.roleInfo.attackSpeed+this.fashujingtong_AtSpeed),this.fashujingtong_Duration=s.default.now()+1e3*h.duration_time,g=this.roleInfo.mag;var C=this.getJianShangXiShu(e);if(t+=this.roleInfo.getXingXiuAddBonusDamage(this.roleInfoModel),this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned)return t*=.5,this.getPvpHurt(!0,e,p,t,n,o,a,r,0,l,h);var _=t-n;_<=0&&(_=0);var v=(g*(1-C)-e/4)*p*(1+o-a)+r*(1-C);v<1&&(v=1),d=v+_,c.Logger.log("\u6cd5\u672f\u7cbe\u901a===",g,C,e,p,o,a,r,C,v,_),d<=1&&(d=1),l&&l.nowRoleType==i.RoleType.Monster&&l.roleInfo.isBoss&&(c.Logger.log("decHp===\u6cd5\u672f\u7cbe\u901a111111=",d),d*=2),d=this.getManLuckyHurt(d,this.roleInfo.lucky).totalHurt,d=Math.ceil(d),c.Logger.log("decHp====\u6cd5\u672f\u7cbe\u901a2222",d,this.fashujingtong_AtSpeed),N.default.instance.addSkillExp(h.skillId,1,this.roleInfoModel)}}}return d},t.prototype.getSkillHurt=function(e,t,n,o,a,s,r,l,d,f,g){void 0===r&&(r=0),void 0===l&&(l=0),void 0===f&&(f=!1),void 0===g&&(g=null);var h=j.HurtModel.create(0,!1);if(!this.roleInfo)return h;if(isNaN(r)&&(r=0),Math.random()<l&&(e=0),this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned)return h.baseHurt=this.getPvpHurt(!0,e,t,n,o,a,s,r,l,d,g),h.wujiHurt=this.checkGetWuJieZhenQiHurt(e,n,o,a,s,0,d),h.fashujigntongHurt=this.checkFaShuJingTong(d.roleInfo.getDef(this),n,o,a,s,r,d),h.gongshahurt=this.checkGongShaJianShu_BeUse(d.roleInfo.getDef(this),n,o,a,s,r,d),h.totalHurt=h.baseHurt,h;var u=0;this.roleInfoModel.occupation==m.GameConst.OCCUPATION.ZHAN_SHI?u=this.roleInfo.getAttack(d):this.roleInfoModel.occupation==m.GameConst.OCCUPATION.FA_SHI?u=this.roleInfo.mag:this.roleInfoModel.occupation==m.GameConst.OCCUPATION.DAO_SHI&&(u=this.roleInfo.spt),u=u;var p=this.getJianShangXiShu(e),C=(n+=this.roleInfo.getXingXiuAddBonusDamage(this.roleInfoModel))-o;C<=0&&(C=0);var _=(u*(1-p)-e/4)*t*(1+(a+=.01*Math.max(0,this.roleInfo.lucky-20))-s)+r*(1-p);c.Logger.log("fightAttack===",u,p,e,t,a,s,r,p,_,C),_<1&&(_=1);var v=(_=(h=this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.Summoned?this.getManLuckyHurt(_,this.roleInfo.lucky):this.getMonsterLuckyHurt(_,this.roleInfo.lucky)).totalHurt)+C;v<=1&&(v=1);var y=this.checkFaShuJingTong(d.roleInfo.getDef(this),n,o,a,s,r,d),b=this.checkGongShaJianShu_BeUse(d.roleInfo.getDef(this),n,o,a,s,r,d);return h.gongshahurt=b,h.fashujigntongHurt=y,v<=1&&(v=1),v=Math.ceil(v),f&&this.checkMingYunZhiRen(1,d),h.baseHurt=v,h.totalHurt=v,c.Logger.log("decHp====getSkillHurt",h.baseHurt,h.fashujigntongHurt,h.gongshahurt,h.totalHurt),h},t.prototype.getMonsterLuckyHurt=function(e,t){var i=.05*t*1e4,n=1e4*Math.random(),o=j.HurtModel.create(e,!1);if(n<i)o.isLucky=!0;else{var a=d.default.nextNumber(.8,1);e=Math.ceil(e*a)}return o.baseHurt=e,o.totalHurt=e,o},t.prototype.checkResetLucktyTimes=function(e){if(e){var t=Z.default.getStarModelById(M.default.SkillConfig.Skill_202,this.roleInfoModel);if(t){var i=M.default.getConfig(t.id,t.lev);H.ServerTime.getServerTime()-t.time>=1e3*i.cooldown&&(this.roleInfo.continueLuckyTimes++,c.Logger.log("\u51cf\u5c11cd====",this.roleInfo.continueLuckyTimes,i.cooldown,this.roleInfo.continueLuckyTimes,i.skillvalue[0]),this.roleInfo.continueLuckyTimes>=i.skillvalue[0]&&(this.roleInfo.continueLuckyTimes=0,t.time=H.ServerTime.getServerTime(),J.SkillModel.decAllSkillCd(1e3*i.skillvalue[1],this.roleInfoModel),c.Logger.log("\u89e6\u53d1\u7075\u7280===="),T.default.instance.showSpecialScoreEffect("l",T.default.ScoreType.Special,cc.v2(this.node.x,this.node.y))))}}else this.roleInfo.noLuckyTimes++},t.prototype.getManLuckyHurt=function(e,t){var i=.05*t*1e4,n=1e4*Math.random(),o=j.HurtModel.create(e,!1);if(n<i)return o.baseHurt=e,o.totalHurt=e,o.isLucky=!0,o;var a=d.default.nextNumber(.5,1),s=Z.default.getStarModelById(M.default.SkillConfig.Skill_201,this.roleInfoModel),r=1;if(s){var c=M.default.getConfig(s.id,s.lev);this.roleInfo.noLuckyTimes>=c.skillvalue[0]&&(r=c.skillvalue[1]/1e4,a=1,o.isLucky=!0,this.roleInfo.noLuckyTimes=0,T.default.instance.showSpecialScoreEffect("w",T.default.ScoreType.Special,cc.v2(this.node.x,this.node.y)))}return e=Math.ceil(e*a*r),o.baseHurt=e,o.totalHurt=e,o},t.prototype.getLuckyAttackMonster=function(e,t){var i=.05*t*1e4;if(1e4*Math.random()<i)return.95*e;var n=d.default.nextNumber(.75,.95);return Math.ceil(e*n)},t.prototype.getLuckyPercent=function(e){return 1},t.prototype.getLuckyAttack=function(e,t){return Math.ceil(this.getLuckyPercent(t)*e)},t.prototype.getPvpHurt=function(e,t,i,n,o,a,s,r,c,l,d){if(void 0===r&&(r=0),void 0===c&&(c=0),void 0===d&&(d=null),this.roleInfo){isNaN(r)&&(r=0),Math.random()<c&&(t=0);var f=this.roleInfoModel.getAttack();e&&(this.roleInfoModel.occupation==m.GameConst.OCCUPATION.ZHAN_SHI?f=this.roleInfoModel.getAttack():this.roleInfoModel.occupation==m.GameConst.OCCUPATION.FA_SHI?f=this.roleInfoModel.getMofa():this.roleInfoModel.occupation==m.GameConst.OCCUPATION.DAO_SHI&&(f=this.roleInfoModel.getDaoShu())),n+=this.roleInfo.getXingXiuAddBonusDamage(this.roleInfoModel);var g=this.getJianShangXiShu(t),h=n-o;h<=0&&(h=0);var u=1+(this.roleInfoModel.getPvpIncrease_p()-l.roleInfoModel.getPvpReduction_p()+L.PvpManager.instance.pvpIncrease_p-L.PvpManager.instance.pvpReduction_p)/1e4,p=(f*this.getLuckyPercent(this.roleInfo.lucky)*(1-g)-t/2)*i;p<1&&(p=1);var C=p*(1+(a+=.01*Math.max(0,this.roleInfo.lucky-20))-s)+h;return(C*=u)<1&&(C=1),C<=1&&(C=1),C=Math.ceil(C)}},t.prototype.getManCommonHurt=function(e,t){void 0===t&&(t=0);var n=j.HurtModel.create(0,!1);if(!(e&&e.node&&e.roleInfo&&this.roleInfo))return n;var o;o=this.roleInfo.getAttack(e);var a=this.roleInfo.BonusDamage,s=e.roleInfo.DamageReduction,r=this.roleInfo.BonusDamage_p,l=e.roleInfo.DamageReduction_p,d=this.roleInfo.ignoredef_p,f=r;r+=.01*Math.max(0,this.roleInfo.lucky-20),a+=this.roleInfo.getXingXiuAddBonusDamage(this.roleInfoModel);var g=this.getJianShangXiShu(e.roleInfo.getDef(this)),h=Math.random(),u=e.roleInfo.getDef(this);h<d&&(u=0);var p=a-s;if(p<=0&&(p=0),this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned){var m=this.getPvpHurt(!1,u,1,a,s,r,l,t,d,e),C=this.checkGetWuJieZhenQiHurt(u,a,s,f,l,0,e),_=this.checkGongShaJianShu_BeUse(u,a,s,r,l,t,e),v=this.checkFaShuJingTong(u,a,s,r,l,t,e);n.gongshahurt=_,n.fashujigntongHurt=v,n.baseHurt=m,n.wujiHurt=C,n.gongshahurt=_,n.fashujigntongHurt=v,n.totalHurt=m;var y=.05*this.roleInfo.lucky*1e4,b=1e4*Math.random();return n.isLucky=b<y,n}var I=1*(o*(1-g)-u/4)*(1+r-l)+t*(1-g);c.Logger.log("preHurt==",I,o,g,u,1,r,l,t,g),I<1&&(I=1),n=this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.Summoned?this.getManLuckyHurt(I,this.roleInfo.lucky):this.getMonsterLuckyHurt(I,this.roleInfo.lucky),c.Logger.log("preHurt==",I,n.totalHurt);var M=(I=n.totalHurt)+p;M<=1&&(M=1),M=Math.ceil(M),M+=this.checkFaShuJingTong(u,a,s,r,l,t,e);var w=this.checkGetWuJieZhenQiHurt(u,a,s,f,l,0,e),k=this.checkGongShaJianShu_BeUse(u,a,s,r,l,t,e),S=this.checkFaShuJingTong(u,a,s,r,l,t,e);return n.baseHurt=M,n.fashujigntongHurt=S,n.gongshahurt=k,n.wujiHurt=w,M+=S,M+=w,M+=k,c.Logger.log("checkGongShaJianShu_BeUse====3",M,k,S,w),n.totalHurt=M,n},t.prototype.getMonsterHurt=function(e,t){void 0===t&&(t=0);var i=j.HurtModel.create(0,!1);if(!e||!e.node||!e.roleInfo)return i;var n;n=this.getLuckyAttackMonster(this.roleInfo.getAttack(e),this.roleInfo.lucky);var o=this.roleInfo.BonusDamage,a=e.roleInfo.DamageReduction,s=this.roleInfo.BonusDamage_p,r=e.roleInfo.DamageReduction_p,c=s;s+=.01*Math.max(0,this.roleInfo.lucky-20);var l=this.getJianShangXiShu(e.roleInfo.getDef(this)),d=e.roleInfo.getDef(this),f=o-a;f<=0&&(f=0);var g=1*((n+t)*(1-l)-d/2)*(1+s-r);g<1&&(g=1);var h=g+f;h<=1&&(h=1),h=Math.ceil(h),h+=this.checkFaShuJingTong(d,o,a,s,r,t,e),i.baseHurt=h,i.wujiHurt=this.checkGetWuJieZhenQiHurt(d,o,a,c,r,0,e);var u=this.checkGongShaJianShu_BeUse(d,o,a,s,r,t,e),p=this.checkFaShuJingTong(d,o,a,s,r,t,e);return i.fashujigntongHurt=p,h+=u,i.gongshahurt=u,h+=i.wujiHurt,h+=p,i.totalHurt=h,i},t.prototype.checkGongShaJianShu_BeUse=function(e,t,n,o,a,r,c){var l=0;if(this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole){var d=N.default.instance.getGongShaJianShu(this.roleInfoModel),f=Math.random();if(d){var g=d.chance;if(d&&d.id==b.SkillConfig.SkillIdConfig.BanYueWanDao&&(g*=.2),f<=g/1e4){var h=d.parameter[0]/1e4;r=d.bonus;var u=H.ServerTime.getServerTime(),p=N.default.instance.getSkillModelById(d.skillId,this.roleInfoModel);if((u-p.lastUseTIme)/1e3>=d.cd){p.lastUseTIme=u,this.gongshaJianShu_AtSpeed>0&&(this.roleInfo.attackSpeed-=this.gongshaJianShu_AtSpeed,this.gongshaJianShu_AtSpeed=0),this.gongshaJianShu_AtSpeed=d.parameter[1],this.roleInfo.attackSpeed=Math.ceil(this.roleInfo.attackSpeed+this.gongshaJianShu_AtSpeed),this.gongshaJianShu_Duration=s.default.now()+1e3*d.duration_time,N.default.instance.addSkillExp(p.id,1,this.roleInfoModel);if(isNaN(r)&&(r=0),t+=this.roleInfo.getXingXiuAddBonusDamage(this.roleInfoModel),this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned)return t*=.5,this.getPvpHurt(!0,e,h,t,n,o,a,r,0,c,d);var m=this.roleInfo.attack,C=this.getJianShangXiShu(e),_=t-n;_<=0&&(_=0);var v=(m*(1-C)-e/4)*h*(1+o-a)+r*(1-C);v<1&&(v=1),(l=v+_)<=1&&(l=1),l*=1,l=this.getManLuckyHurt(l,this.roleInfo.lucky).totalHurt,l=Math.ceil(l)}}}}return l},t.prototype.checkSkill=function(e){for(var t,i=0;i<e.length;i++){var n=e[i];if(t=this.checkOneSkill(n)){var o=this.roleInfoModel.getSkillModel(n.skillId);n.skillId,b.SkillConfig.SkillIdConfig.LieHuoJianFa,n.skillId!=b.SkillConfig.SkillIdConfig.LieHuoJianFa&&(o.lastUseTIme=H.ServerTime.getServerTime());break}}return t},t.prototype.checkAttackCdEnd=function(){return H.ServerTime.getServerTime()>=this.nextAttackCd},t.prototype.checkMoveCdEnd=function(){return H.ServerTime.getServerTime()>=this.nextMoveCd},t.prototype.roleAttack=function(){var e=this;if(this.roleInfoModel&&this.checkAttackCdEnd())if(this.roleInfoModel.roleId==D.default.instance.roleId&&N.default.instance.addBeiDongSkillExp(this.roleInfoModel),_.MapConfig.curMapConfig.mapId==O.FuGuiGameModel.mapId){this.state=i.RoleState.Relax;var t=[];if(this.nowRoleType==i.RoleType.Role){if((t=this.mainAttackRole&&this.mainAttackRole.node&&!this.mainAttackRole.isDead&&P.default.instance.inDistance(this.gridRow,this.gridRow,this.mainAttackRole.gridRow,this.mainAttackRole.gridCol,4)?[this.mainAttackRole]:E.default.instance.getAttackMonsterList(4,1,this.gridRow,this.gridCol,this.mainAttackRole)).length>0){var n=R.default.instance.skillConfig.fireDaoShi;D.default.instance.occupation==m.GameConst.OCCUPATION.FA_SHI?n=R.default.instance.skillConfig.fireFashi1:D.default.instance.occupation==m.GameConst.OCCUPATION.ZHAN_SHI&&(n=R.default.instance.skillConfig.fireZhanshi_leftup),this.nextAttackCd=H.ServerTime.getServerTime()+1e3/this.roleInfo.attackSpeed*1e3,R.default.instance.useSkill(n,this,t,function(){for(var i=0;i<t.length;i++)t[i]&&t[i].roleInfo&&t[i].decHp(j.HurtModel.create(t[i].roleInfo.getMaxHp(),!1),!1,e)})}else this.needMove=!0}}else{var o=J.SkillModel.getMyCanUseSkillList(this.roleInfoModel);if(this.checkSkill(o))this.nextAttackCd=H.ServerTime.getServerTime()+1e3/this.roleInfo.attackSpeed*1e3,this.state=i.RoleState.Relax;else if(this.mainAttackRole&&this.mainAttackRole.node&&!this.mainAttackRole.isDead&&P.default.instance.inDistance(this.gridRow,this.gridCol,this.mainAttackRole.gridRow,this.mainAttackRole.gridCol,1))this.nextAttackCd=H.ServerTime.getServerTime()+1e3/this.roleInfo.attackSpeed*1e3,R.default.instance.useSkill(R.default.instance.skillConfig.putonggongji_leftUp,this,[this.mainAttackRole],function(){e.heroAttackHurt([e.mainAttackRole]),e.state=i.RoleState.Relax});else{var a=[];this.nowRoleType==i.RoleType.Role?a=E.default.instance.getAttackMonsterList(this.roleInfo.heroConfig.atDistance,1,this.gridRow,this.gridCol,this.mainAttackRole):this.nowRoleType==i.RoleType.PvpAttackRole?a=L.PvpManager.instance.getBeAttackList(this.roleInfo.heroConfig.atDistance,1,this.gridRow,this.gridCol,!1,this.mainAttackRole):(this.nowRoleType=i.RoleType.PvpBeAttackRole)&&(a=L.PvpManager.instance.getAttackList(this.roleInfo.heroConfig.atDistance,1,this.gridRow,this.gridCol,!1,this.mainAttackRole)),a.length>0?(this.nextAttackCd=H.ServerTime.getServerTime()+1e3/this.roleInfo.attackSpeed*1e3,R.default.instance.useSkill(R.default.instance.skillConfig.putonggongji_leftUp,this,a,function(){e.heroAttackHurt(a),e.state=i.RoleState.Relax})):this.needMove=!0}}},t.prototype.heroAttackHurt=function(e){if(this.mainAttackRole=e[0],this.roleInfoModel){this.addHp(this.roleInfo.getShengMingXiQu(this.roleInfoModel)),this.addMp(this.roleInfo.getFaliXiQu(this.roleInfoModel));for(var t=void 0,n=0;n<e.length;n++){var o=e[n];i.getSideRole2Role(this,e[n]);if(o){var a=this.getManCommonHurt(o);this.checkMingYunZhiRen(1,o),o.decHp(a,!1,this),a.isLucky&&(t=!0)}}this.checkResetLucktyTimes(t)}},t.prototype.checkAttack=function(){ee.default.instance.isPause||(this.moveFrameTemp++,this.moveFrameTemp>i.RoleType.PvpBeAttackSummoned&&(this.moveFrameTemp=i.RoleType.Role),s.default.now()<this.yeManChongZhuangDuration||this.debuff_yun||this.debuff_ice||this.debuff_mabi||this.debuff_shihua||(this.nowRoleType==i.RoleType.Role&&this.moveFrameTemp==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole&&this.moveFrameTemp==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole&&this.moveFrameTemp==i.RoleType.PvpBeAttackRole?this.roleAttack():this.nowRoleType==i.RoleType.Monster&&this.moveFrameTemp==i.RoleType.Monster?this.monsterAttackRole():(this.nowRoleType==i.RoleType.Summoned&&this.moveFrameTemp==i.RoleType.Summoned||this.nowRoleType==i.RoleType.PvpAttackSummoned&&this.moveFrameTemp==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned&&this.moveFrameTemp==i.RoleType.PvpBeAttackSummoned)&&this.summerAttack()))},t.prototype.monsterAttackRole=function(){var e=this;if(this.checkAttackCdEnd()){var t=ee.default.instance.gameView.getMonsterAttackRoleList(this.roleInfo.monsterConfig.atDistance,this.gridRow,this.gridCol);if(t.length>0){this.nextAttackCd=H.ServerTime.getServerTime()+1e3/this.roleInfo.attackSpeed*1e3;for(var i=function(i){var o=t[i],a=void 0;o&&(Math.abs(n.gridRow-o.gridRow)<=1&&Math.abs(n.gridCol-o.gridCol)<=1?(a=R.default.instance.skillConfig.putonggongji_leftUp,n.monsterAttackRoleEffect(o,t)):(a=R.default.instance.skillConfig.yuanchenggongji,R.default.instance.useSkill(a,n,[o],function(){o&&o.node&&o.roleInfo&&e.monsterAttackRoleEffect(o,t)})))},n=this,o=0;o<this.roleInfo.monsterConfig.attacknum;o++)i(o)}else this.needMove=!0}},t.prototype.checkUseYinShen=function(e,t){var n=this;if(this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackSummoned||this.nowRoleType==i.RoleType.Summoned){var o=J.SkillModel.canUseYinShen(this.roleInfoModel);if(o)if(d.default.nextInt(0,1e4)<=o.chance)if(this.roleInfo.getMp()>=o.mana)this.decMp(o.mana),N.default.instance.addSkillExp(o.skillId,1,this.roleInfoModel),this.yinShenSpeed>0&&(this.roleInfo.attackSpeed-=this.yinShenSpeed),this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole?(e-=e*(o.parameter[0]/1e4),this.yinShenSpeed=o.parameter[1]):(e-=e*(o.petvalue[0]/1e4),this.yinShenSpeed=o.petvalue[1]),this.roleInfo.attackSpeed+=this.yinShenSpeed,this.yinShenDuration=s.default.now()+1e3*o.duration_time,this.roleInfoModel.getSkillModel(o.skillId).lastUseTIme=H.ServerTime.getServerTime(),R.default.instance.useSkill(R.default.instance.skillConfig.yinshenshu,this,[this],function(e){n&&n.node&&!n.isDead&&n.roleInfo&&(n.yinshen_skillmv=e)})}return e},t.prototype.checkHadMofadun=function(e,t,n){void 0===n&&(n=i.HurtType.Once);var o=t;if(e.moFaDun&&e.moFaDun.active){var a=Math.ceil(t*e.moFaDunDef);e.moFaDunHadHurt+=a,o-=a;var r=s.default.now(),c=Z.default.getStarModelById(M.default.SkillConfig.Skill_501,this.roleInfoModel);if(c&&n==i.HurtType.Once&&this.nowRoleType!=i.RoleType.Summoned&&this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned)for(var l=M.default.getConfig(c.id,c.lev),d=1e4*Math.random(),f=l.skillvalue[0],g=l.skillvalue[1],u=e.getAttackList(f,g),p=function(e){d<=l.chance&&!u[e].roleInfo.isBoss&&r-c.time>=1e3*l.cooldown&&(c.time=r,u[e].debuff_ice=!0,R.default.instance.playRoleIceEffect(u[e],l.duration,function(){u[e]&&(u[e].debuff_ice=!1)}))},m=0;m<u.length;m++)p(m);if(e.moFaDunHadHurt>=e.moFaDunMaxHurt){h.default.Instance.put(e.moFaDun,"RoleSkillEffectPrefabEx"),e.moFaDun=null;e.roleInfoModel.getSkillModel(b.SkillConfig.SkillIdConfig.MoFaDun);if(e.moFaDun_CDtime=s.default.now(),c){l=M.default.getConfig(c.id,c.lev);var C=this.roleInfo.mag*l.skillvalue[2]/1e4;f=l.skillvalue[0];if((g=l.skillvalue[1])>0){var _=e.getAttackList(f,g);for(m=0;m<_.length;m++)_[m].decHp(j.HurtModel.create(C,!1,C),!1,this)}}}}return o},t.prototype.monsterAttackRoleEffect=function(e,t){var n=i.getSideRole2Role(this,e);this.playCommonAttackMv(n);var o=this.getMonsterHurt(e);e.decHp(o,!1,this)},t.prototype.summerAttack=function(){var e=this;if(this.checkAttackCdEnd()&&this.roleInfoModel&&this.roleInfo.summonedConfig){var t=[];if(t.length<this.roleInfo.summonedConfig.atk_num){var n=this.roleInfo.summonedConfig.atk_num;t.length>0&&(n=this.roleInfo.summonedConfig.atk_num-t.length);var o=[];this.nowRoleType==i.RoleType.Summoned?o=E.default.instance.getAttackMonsterList(this.roleInfo.summonedConfig.distance,n,this.gridRow,this.gridCol,this.mainAttackRole):this.nowRoleType==i.RoleType.PvpAttackSummoned?o=L.PvpManager.instance.getBeAttackList(this.roleInfo.summonedConfig.distance,n,this.gridRow,this.gridCol,!1,this.mainAttackRole):this.nowRoleType==i.RoleType.PvpBeAttackSummoned&&(o=L.PvpManager.instance.getAttackList(this.roleInfo.summonedConfig.distance,n,this.gridRow,this.gridCol,!1,this.mainAttackRole)),t=t.concat(o)}if(t.length>0){if(N.default.instance.addSkillExp(this.roleInfo.summonedConfig.skillId,1,this.roleInfoModel),this.mainAttackRole=t[0],this.nextAttackCd=H.ServerTime.getServerTime()+1e3/(this.roleInfo.attackSpeed+this.roleInfoModel.getpetspeed())*1e3,this.roleInfoModel)if(this.roleInfoModel.occupation==m.GameConst.OCCUPATION.DAO_SHI)if(z.default.getIsEquipSkin(b.SkillConfig.SkillIdConfig.ZhaoHuanShu,I.SKINID.ZHAOHUANSHU_HuanLing,D.default.instance)){var a=R.default.instance.skillConfig.putonggongji_leftUp;a=this.roleInfo.summonedConfig.level<10?R.default.instance.skillConfig.putonggongji_leftUp:this.roleInfo.summonedConfig.level<=19?R.default.instance.skillConfig.shenshougongji_pro:R.default.instance.skillConfig.youhuozhiguang_pg_toleft_pro,R.default.instance.useSkill(a,this,t,function(){e.state=i.RoleState.Relax})}else{a=R.default.instance.skillConfig.putonggongji_leftUp;this.roleInfo.summonedConfig.level<10||(this.roleInfo.summonedConfig.level<=19?(a=R.default.instance.skillConfig.shenshougongji,R.default.instance.useSkill(a,this,t,function(){e.state=i.RoleState.Relax})):R.default.instance.useSkill(a,this,t,function(){e.state=i.RoleState.Relax}))}else if(this.roleInfoModel.occupation==m.GameConst.OCCUPATION.FA_SHI&&z.default.getIsEquipSkin(b.SkillConfig.SkillIdConfig.YouHuoZhiGuang,I.SKINID.YOUHUOZHIGUANG_YueBai,D.default.instance)){a=R.default.instance.skillConfig.putonggongji_leftUp;20==this.roleInfo.summonedConfig.level&&(a=R.default.instance.skillConfig.youhuozhiguang_lpg_toleft_pro),R.default.instance.useSkill(a,this,t,function(){e.state=i.RoleState.Relax})}for(var s=0;s<t.length;s++){var r=t[s],l=i.getSideRole2Role(this,r),d=0;this.roleInfo.summonedConfig&&(d=this.roleInfo.summonedConfig.bonus);var f=this.getManCommonHurt(r,d);this.nowRoleType==i.RoleType.Summoned&&c.Logger.info("\u53ec\u5524\u7269\u653b\u51fb","\u6263\u8840:11111111",f,f.totalHurt,f.baseHurt,f.wujiHurt);var g=Z.default.getStarModelById(M.default.SkillConfig.Skill_602,this.roleInfoModel);if(g&&(this.nowRoleType==i.RoleType.Summoned||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned)){var h=M.default.getConfig(g.id,g.lev);f.baseHurt*=h.skillvalue[1]/1e4}this.nowRoleType==i.RoleType.Summoned&&this.roleInfo.summonedConfig.skillId==b.SkillConfig.SkillIdConfig.ZhaoHuanShu&&r&&r.roleInfo.isBoss&&(f.totalHurt*=1.5),this.roleInfo.xiazi_wujizhenqi_jilv>0&&1e4*Math.random()<=this.roleInfo.xiazi_wujizhenqi_jilv&&(f.baseHurt*=this.roleInfo.xiazi_wujizhenqi_beishu/1e4,f.totalHurt*=this.roleInfo.xiazi_wujizhenqi_beishu/1e4),r.decHp(f,!1,this),this.nowRoleType==i.RoleType.Summoned&&c.Logger.info("\u53ec\u5524\u7269\u653b\u51fb","\u6263\u8840:",f.totalHurt),this.checkMingYunZhiRen(.8,r),this.playCommonAttackMv(l)}}else this.needMove=!0}},t.prototype.decMp=function(e){e>0&&(this.roleInfoModel.decMp(e),this.roleInfo.setMp(this.roleInfoModel.getMp()),this.refreshRoleInfo())},t.prototype.checkShenShengZhanJiaHurt=function(e){var t=s.default.now();if(t<this.shenShengZhanJiaDuration){var i=Z.default.getStarModelById(M.default.SkillConfig.Skill_601,this.roleInfoModel);if(i){var n=M.default.getConfig(i.id,i.lev);if(1e4*Math.random()<=n.chance){var o=Math.floor(this.getMaxHp()*n.skillvalue[0]/1e4);this.addHp(o)}t-i.time>=1e3*n.cooldown&&1e4*Math.random()<=n.skillvalue[1]&&!e.roleInfo.isBoss&&(e.debuff_shihua=!0,i.time=t,R.default.instance.playRoleShiHuaEffect(e,n.duration,function(){e.debuff_shihua=!1}))}}},t.prototype.decHp=function(e,t,n,o){var a=this;if(void 0===o&&(o=i.HurtType.Once),this.node&&!this.isDead&&-1==D.default.instance.switchingMapId){e.totalHurt=e.getCalculationTotalHurt(),this.nowRoleType==i.RoleType.Role&&c.Logger.log("decHp====1111=",e,e.totalHurt,e.baseHurt);var r=e.totalHurt;this.checkShenShengZhanJiaHurt(n),r=this.checkHadMofadun(this,r,o),(r=this.checkUseYinShen(r,n))<=0&&(r=1),r=this.roleInfo.checkLucky_weakness(r,n);var l=Z.default.getStarModelById(M.default.SkillConfig.Skill_401,this.roleInfoModel);if(o==i.HurtType.Once&&l)(d=M.default.getConfig(l.id,l.lev))?this.addHp(this.roleInfo.DamageReduction*d.skillvalue[0]/1e4):this.addHp(this.roleInfo.DamageReduction);if(l=Z.default.getStarModelById(M.default.SkillConfig.Skill_402,this.roleInfoModel),o==i.HurtType.Once&&l){var d=M.default.getConfig(l.id,l.lev),f=Math.floor(this.roleInfo.getMaxHp()*d.skillvalue[0]/1e4),g=Math.floor(this.roleInfo.getMaxHp()*d.skillvalue[1]/1e4);r>f?r=f:r<g&&(r=g)}if(l=Z.default.getStarModelById(M.default.SkillConfig.Skill_403,this.roleInfoModel)){d=M.default.getConfig(l.id,l.lev);var h=Math.floor(r*d.skillvalue[0]/1e4);this.roleInfo.getMp()>=h&&(this.decMp(h),r-=h)}if((l=Z.default.getStarModelById(M.default.SkillConfig.SKill_302,n.roleInfoModel))&&n.nowRoleType!=i.RoleType.PvpAttackSummoned&&n.nowRoleType!=i.RoleType.PvpBeAttackSummoned&&n.nowRoleType!=i.RoleType.Summoned){d=M.default.getConfig(l.id,l.lev);r+=(n.roleInfo.getMaxHp()+n.roleInfo.getMaxMp())*d.skillvalue[0]/1e4}var u=s.default.now();if(u<this.hutiZhenQi_Duration){var p=Z.default.getStarModelById(M.default.SkillConfig.Skill_101,this.roleInfoModel);if(p){d=M.default.getConfig(p.id,p.lev);if(Math.random()<=d.chance/1e4){var m=Math.floor(r*d.skillvalue[0]/1e4);m<=0&&(m=1),n.decHp(j.HurtModel.create(m),!1,this),u-p.time>1e3*d.cooldown&&!n.roleInfo.isBoss&&1e4*Math.random()<=d.skillvalue[1]&&(n.debuff_yun=!0,p.time=u,R.default.instance.playRoleYunEffect(n,d.duration,function(){n.debuff_yun=!1}))}}}if(o==i.HurtType.Continue&&c.Logger.log("\u6301\u7eed\u4f24\u5bb3+==3333",r),r>0){if(r=Math.ceil(r),isNaN(r))return c.Logger.warn("\u6218\u6597\u6570\u636e\u51fa\u9519!"),void k.WordConfig.showWord(60294);var C=this.roleInfo.getMaxHp(),_=this.roleInfo.getHp();this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole?(C=this.roleInfoModel.getMaxHp(),_=this.roleInfoModel.getHp()):this.nowRoleType==i.RoleType.Summoned||this.nowRoleType==i.RoleType.Monster&&this.roleInfo.isBoss&&_==C&&K.default.s_req_statistics(21,parseInt(this.roleInfo.monsterConfig.id));var v=0;this.nowRoleType!=i.RoleType.PvpAttackRole&&this.nowRoleType!=i.RoleType.PvpBeAttackRole&&this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||n.roleInfoModel.totalFight>this.roleInfoModel.totalFight&&(v+=.05+(n.roleInfoModel.totalFight-this.roleInfoModel.totalFight)/(n.roleInfoModel.totalFight+2*this.roleInfoModel.totalFight));var b=Math.ceil(Math.min(_,r));if(b+=b*v,s.default.now()<this.wudiCount&&(this.mianYiNode.active||(this.mianYiNode.setPosition(0,0),this.mianYiNode.active=!0,cc.tween(this.mianYiNode).to(.3,{position:cc.v2(0,50)}).call(function(){a.mianYiNode.active=!1}).start())),b>0&&s.default.now()>=this.wudiCount){this.nowRoleType==i.RoleType.PvpBeAttackRole||(this.nowRoleType,i.RoleType.PvpAttackRole);var I=!1,w=0,S=0;this.nowRoleType==i.RoleType.Monster?S=this.roleInfo.monsterConfig.suppress:this.roleInfoModel&&(S=this.roleInfoModel.getSuppress());var P=0;n.nowRoleType==i.RoleType.Monster?P=n.roleInfo.monsterConfig.suppress:n.roleInfoModel&&(P=n.roleInfoModel.getSuppress());var E=b;if(P>S){I=!0;var N=Q.BaoshiInfoModel.getBaoShiSkillValueByType(W.ShenBinModel.SHIHUNFAZHANG);if(n.nowRoleType!=i.RoleType.Monster){var B=y.ShenbingskillAllConfig.getSkillConfigById(q.default.getModelByShenbinType(W.ShenBinModel.SHIHUNFAZHANG,n.roleInfoModel).id);this.nowRoleType==i.RoleType.Monster?w=B.parameter[1]/1e4+N[1]/1e4:this.nowRoleType!=i.RoleType.PvpBeAttackRole&&this.nowRoleType!=i.RoleType.PvpAttackRole&&this.nowRoleType!=i.RoleType.PvpAttackSummoned&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||(w=B.parameter[0]/1e4+N[0]/1e4)}}if(o==i.HurtType.Once&&n.nowRoleType!=i.RoleType.Monster&&!t){var G=Y.SpecialRingModel.checkShenLi(n);G.isON&&T.default.instance.showSpecialScoreEffect("s",T.default.ScoreType.Special,cc.v2(n.node.x,n.node.y)),b*=1+w+G.extHurt;var V=Y.SpecialRingModel.checkMabi(this,n);b*=1+V,(I||w>0||G.extHurt>0||V>0)&&c.Logger.log("\u538b\u5236====",I,"\u538b\u5236\u4f24\u5bb3\u52a0\u6210==",w,"\u795e\u529b\u6212\u6307\u4f24\u5bb3\u52a0\u6210==",G.extHurt,"\u9ebb\u75f9\u6212\u6307\u4f24\u5bb3\u52a0\u6210==",V,"\u539f\u4f24\u5bb3==",E,"\u52a0\u6210\u540e\u7684\u4f24\u5bb3===",b)}var F,H=Y.SpecialRingModel.checkHuTi(this);F=H.extDef,H.isON&&T.default.instance.showSpecialScoreEffect("h",T.default.ScoreType.Special,cc.v2(this.node.x,this.node.y)),b*=1-F,this.nowRoleType==i.RoleType.Monster&&(2==this.roleInfo.monsterConfig.m_type||3==this.roleInfo.monsterConfig.m_type?b=this.roleInfo.monsterConfig.id==O.FuGuiGameModel.BossId+""?Math.ceil(.2*this.roleInfo.getMaxHp()):Math.ceil(.01*this.roleInfo.getMaxHp()):D.default.instance.mapId==O.FuGuiGameModel.mapId&&(b=this.roleInfo.getMaxHp())),this.nowRoleType==i.RoleType.Monster&&(b=this.roleInfo.checkBonusDamage_weakness(b,n));var U=J.SkillModel.checkBaGuaShangHaiJianMian(this.roleInfoModel),z=0;if(U&&(z=U.value,1==U.first&&U.value>0&&R.default.instance.playBaguaEffect_qishou(this,U.skillDuration,function(){})),b=Math.ceil(b*(1-z/1e4)),this.totalHurtBlood+=b,_-=b,this.roleInfo.setHp(_),b>0)if(this.nowRoleType,i.RoleType.Role,this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.Summoned||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole||this.nowRoleType==i.RoleType.PvpAttackSummoned||this.nowRoleType==i.RoleType.PvpBeAttackSummoned)e.isLucky?T.default.instance.showScoreEffect("#-"+b,T.default.ScoreType.XinYun,cc.v2(this.node.x,this.node.y)):I&&n.nowRoleType!=i.RoleType.Monster?T.default.instance.showScoreEffect("#-"+b,T.default.ScoreType.YaZhi,cc.v2(this.node.x,this.node.y)):T.default.instance.showScoreEffect("-"+b,T.default.ScoreType.JueSe,cc.v2(this.node.x,this.node.y)),this.nowRoleType!=i.RoleType.PvpAttackRole&&this.nowRoleType!=i.RoleType.PvpBeAttackRole||L.PvpManager.instance.refreshBlood();else if(this.nowRoleType==i.RoleType.Monster&&(t?T.default.instance.showQieGeScoreEffect("#-"+b,T.default.ScoreType.QieGE,cc.v2(this.node.x,this.node.y),1):e.isLucky?T.default.instance.showScoreEffect("#-"+b,T.default.ScoreType.XinYun,cc.v2(this.node.x,this.node.y)):I?T.default.instance.showScoreEffect("#-"+b,T.default.ScoreType.YaZhi,cc.v2(this.node.x,this.node.y)):T.default.instance.showScoreEffect("-"+b,T.default.ScoreType.Guai,cc.v2(this.node.x,this.node.y)),this.roleInfo.isBoss)){var $=Math.max(C-_,0);c.Logger.log("hadHurtHp====",$,C,_),K.default.s_req_refresh_boss_hp(this.roleInfo.monsterConfig.id,D.default.instance.mapId,$)}if(this.nowRoleType==i.RoleType.Role||this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpBeAttackRole){if(-1!=D.default.instance.switchingMapId)return;this.roleInfoModel.decHp(b),this.checkEatHp()}this.refreshRoleInfo()}if(this.roleInfo.isBoss&&ee.default.instance.gameView.refreshBossHp(),_<=0){var te=Y.SpecialRingModel.checkFuHuo(this);if(te.isON)return this.appearMv(),R.default.instance.playRoleRebirthEffect(this,function(){}),this.addHp(Math.floor(te.resetHp*this.roleInfo.getMaxHp())),void this.setWudi(te.wudiTime);this.isDead=!0,this.mpNode.active=!1,this.node.opacity=0,D.default.instance.mapId==O.FuGuiGameModel.mapId&&this.nowRoleType==i.RoleType.Monster?R.default.instance.useSkillByPosition(R.default.instance.skillConfig.fireDead,this.node.getPosition()):R.default.instance.useSkillByPosition(R.default.instance.skillConfig.putonggongji_death,this.node.getPosition()),this.nowRoleType==i.RoleType.Monster?(K.default.kill_monster(this.roleInfo.monsterId+"",this.roleInfo.monsterConfig.id,this.roleInfo.quality,this),this.roleInfo.isBoss?K.default.s_req_statistics(22,parseInt(this.roleInfo.monsterConfig.id)):this.node.opacity=0):this.nowRoleType==i.RoleType.Role?(ee.default.instance.gameView.gotoRoleDead(this),x.ChatModel.addChat(x.ChatType.roleDead,this.roleInfoModel.roleName),X.MusicHelper.roleDead(this.roleInfoModel.occupation),A.TianGuanManager.instance.isFighting&&K.default.s_req_quit_skytower()):this.nowRoleType==i.RoleType.Summoned?(this.clearYouHuoZhiGuangBuf(),ee.default.instance.gameView.killSummoned(this)):this.nowRoleType==i.RoleType.PvpAttackRole?(X.MusicHelper.roleDead(this.roleInfoModel.occupation),L.PvpManager.instance.myDead()):this.nowRoleType==i.RoleType.PvpBeAttackRole?(X.MusicHelper.roleDead(this.roleInfoModel.occupation),L.PvpManager.instance.bePkDead()):this.nowRoleType==i.RoleType.PvpAttackSummoned?(this.clearYouHuoZhiGuangBuf(),L.PvpManager.instance.mySummonedDead(),ee.default.instance.gameView.killSummoned(this)):this.nowRoleType==i.RoleType.PvpBeAttackSummoned&&(this.clearYouHuoZhiGuangBuf(),L.PvpManager.instance.bePkSummonedDead(),ee.default.instance.gameView.killSummoned(this))}}}},t.prototype.clearYouHuoZhiGuangBuf=function(){this.summonedBoss&&this.summonedBoss.roleInfo&&this.summonedBoss.roleInfo.youhuozhiguangDef>0&&this.summonedBoss.roleInfo.setDef(this.summonedBoss.roleInfo.getDef()-this.summonedBoss.roleInfo.youhuozhiguangDef)},t.prototype.addHp=function(e){if(e>0){e=Math.ceil(e);var t=this.roleInfo.getMaxHp(),i=this.roleInfo.getHp(),n=Math.ceil(Math.min(t-i,e));n>0&&(i+=n,this.roleInfo.setHp(i),this.roleInfoModel.addHp(n,this.shenShengZhanJiaAddHp),T.default.instance.showScoreEffect("+"+n,T.default.ScoreType.Recover,cc.v2(this.node.x,this.node.y)),this.refreshRoleInfo())}},t.prototype.addMp=function(e){if(e>0){e=Math.floor(e);var t=this.roleInfo.getMp(),i=Math.min(this.roleInfo.getMaxMp()-t,e);i>0&&this.roleInfoModel.addMp(i)}},t.prototype.playCommonAttackMv=function(e){var t=this;if(this.node&&!this.isMoving){this.state=i.RoleState.Attack;var n=ee.default.instance.gameView.getGridPosition(this.gridRow,this.gridCol);this.node.setPosition(n),this.nowRoleType==i.RoleType.Role&&(this.node.zIndex=999),e==i.RoleSide.Up?cc.tween(this.node).to(.1,{position:cc.v2(this.node.x,this.node.y-10)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x,this.node.y+4)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start():e==i.RoleSide.Down?cc.tween(this.node).to(.1,{position:cc.v2(this.node.x,this.node.y+10)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x,this.node.y-4)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start():e==i.RoleSide.Left?cc.tween(this.node).to(.1,{position:cc.v2(this.node.x+10,this.node.y)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x-4,this.node.y)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start():e==i.RoleSide.Right?cc.tween(this.node).to(.1,{position:cc.v2(this.node.x-10,this.node.y)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x+4,this.node.y)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start():e==i.RoleSide.LeftDown?cc.tween(this.node).to(.1,{position:cc.v2(this.node.x+10,this.node.y+10)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x-4,this.node.y-4)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start():e==i.RoleSide.LeftUp?cc.tween(this.node).to(.1,{position:cc.v2(this.node.x+10,this.node.y-10)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x-4,this.node.y+4)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start():e==i.RoleSide.RightDown?cc.tween(this.node).to(.1,{position:cc.v2(this.node.x-10,this.node.y+10)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x+4,this.node.y-4)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start():e==i.RoleSide.RightUp&&cc.tween(this.node).to(.1,{position:cc.v2(this.node.x-10,this.node.y-10)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(this.node.x+4,this.node.y+4)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:n}).call(function(){t.state=i.RoleState.Relax}).start()}},t.prototype.mosterMoveToRole=function(){var e=this,t=ee.default.instance.gameView.getMonsterAttackList();if(t&&t.length>0)for(var i=0;i<t.length;i++){var n=t[i];P.default.instance.findPath(this.gridRow,this.gridCol,n.gridRow,n.gridCol,function(t){t&&e.checkMoveCdEnd()&&(e.moveToRowCol(t.row,t.col),e.nextMoveCd=H.ServerTime.getServerTime()+e.roleInfo.monsterConfig.moveSpeed)})}},t.prototype.moveToTaget=function(e){var t=this;e&&P.default.instance.findPath(this.gridRow,this.gridCol,e.gridRow,e.gridCol,function(e){e&&t.checkMoveCdEnd()&&(t.nextMoveCd=H.ServerTime.getServerTime()+t.roleInfo.heroConfig.moveSpeed,t.moveToRowCol(e.row,e.col))})},t.prototype.checkMove=function(){if(this.state==i.RoleState.Relax&&this.needMove)if(this.needMove=!1,this.nowRoleType==i.RoleType.Role){var e=E.default.instance.getNearlyMonster(this);this.moveToTaget(e)}else if(this.nowRoleType==i.RoleType.Monster)this.mosterMoveToRole();else if(this.nowRoleType==i.RoleType.Summoned){e=E.default.instance.getNearlyMonster(this);this.moveToTaget(e)}else this.nowRoleType==i.RoleType.PvpAttackRole||this.nowRoleType==i.RoleType.PvpAttackSummoned?this.moveToTaget(L.PvpManager.instance.beAttackRolePrefab):this.nowRoleType!=i.RoleType.PvpBeAttackRole&&this.nowRoleType!=i.RoleType.PvpBeAttackSummoned||this.moveToTaget(L.PvpManager.instance.attackRolePrefab)},t.prototype.moveToRowCol=function(e,t){var n=this;this.state=i.RoleState.Moving,this.gridRow=e,this.gridCol=t;var o=ee.default.instance.gameView.getGridPosition(e,t);this.isMoving=!0,cc.tween(this.node).to(.3,{position:o}).delay(this.moveTime).call(function(){n&&(n.state=i.RoleState.Relax,n.isMoving=!1)}).start()},t.prototype.checkMingYunZhiRen=function(e,t){if(void 0===e&&(e=1),t.nowRoleType==i.RoleType.Monster&&t.roleInfo&&1==t.roleInfo.monsterConfig.qiege&&t.roleInfo.quality>=m.GameConst.QUALITY.GREEN){var n=y.ShenbingskillAllConfig.getSkillConfigById(q.default.getModelByShenbinType(W.ShenBinModel.MINGYUNZHIREN,D.default.instance).id);if(n){var o=Q.BaoshiInfoModel.getBaoShiSkillValueByType(W.ShenBinModel.MINGYUNZHIREN),a=(n.parameter[0]/1e4+o[0]/1e4)*(1+.01*this.roleInfoModel.getLucky())*e;if(t.roleInfo.isBoss&&D.default.instance.qiegeTimes<1&&t.getHp()/t.getMaxHp()>n.bossRate[0]/1e4&&(a*=n.bossRate[1]),Math.random()<a&&D.default.instance.qiegeTimes<n.pinglv[1]){D.default.instance.qiegeTimes++,1==D.default.instance.qiegeTimes&&t.roleInfo.isBoss&&t.getHp()/t.getMaxHp()>n.bossRate[0]/1e4?K.default.s_seq_check_excision(Math.floor(1e4*a),D.default.instance.qiegeTimes,n.parameter[1],1):K.default.s_seq_check_excision(Math.floor(1e4*a),D.default.instance.qiegeTimes,n.parameter[1],-1);var s=Math.floor(t.getHp()*(n.parameter[1]/1e4+o[1]/1e4));c.Logger.log("\u547d\u8fd0\u4e4b\u5203--supHp==="+s,"\u89e6\u53d1\u76ee\u6807:",t.roleInfo.roleName,"\u54c1\u8d28:",t.roleInfo.quality,"\u89e6\u53d1\u6b21\u6570:",D.default.instance.qiegeTimes,"\u89e6\u53d1\u6982\u7387:",a),t.decHp(j.HurtModel.create(s,!1,s),!0,this);var r=cc.instantiate(te.default.prefab);r.active=!0,r.parent=t.node.parent,r.getComponent(te.default).init(t),t.node.opacity=0,r.getComponent(te.default).playEffect(function(){t.node&&(t.node.opacity=255)})}}}},t.prototype.checkQieGe=function(){if(D.default.instance){var e=y.ShenbingskillAllConfig.getSkillConfigById(q.default.getModelByShenbinType(W.ShenBinModel.MINGYUNZHIREN,D.default.instance).id);e&&Math.floor(H.ServerTime.getServerTime()/1e3-D.default.instance.qiegeRefreshTime)>=e.pinglv[0]&&(D.default.instance.qiegeRefreshTime=H.ServerTime.getServerTime()/1e3,D.default.instance.qiegeTimes=0)}},t.prototype.getYemanMoveGird=function(e,t){var n=[];switch(i.getSideRole2Role(e,t)){case i.RoleSide.Up:n=[V.default.init(t.gridRow+1,t.gridCol)];break;case i.RoleSide.Down:n=[V.default.init(t.gridRow-1,t.gridCol)];break;case i.RoleSide.Left:n=[V.default.init(t.gridRow,t.gridCol+1)];break;case i.RoleSide.Right:n=[V.default.init(t.gridRow,t.gridCol-1)]}for(var o=n.length-1;o>=0;o--)ee.default.instance.gameView.canWalk(n[o].row,n[o].col)||n.splice(o,1);c.Logger.log("gridList===",n);var a,s=Number.MAX_VALUE;for(o=0;o<n.length;o++){l.default.distance(n[o].row,n[o].col,e.gridRow,e.gridCol)<=s&&(a=n[o])}return a},t.prototype.onDisable=function(){r.EventManager.instance.off(S.CommonEvent.Event_UserInfoRefresh,this.onUserInfoRefresh,this),r.EventManager.instance.off(S.CommonEvent.Event_Title_update,this.refreshFightFrame,this),this.node.stopAllActions(),this.unscheduleAllCallbacks()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.unscheduleAllCallbacks(),this.node.stopAllActions()},t.prototype.unitNum=function(e){return e<1e4?Math.ceil(e).toString():(e/1e4).toFixed(2)+k.WordConfig.getWord(60623)},t.HurtType={Once:1,Continue:2},t.RoleType={Role:1,Monster:2,Summoned:3,PvpAttackRole:4,PvpBeAttackRole:5,PvpAttackSummoned:6,PvpBeAttackSummoned:7},t.RoleSide={Left:1,Right:2,Up:3,Down:4,LeftUp:5,RightUp:6,LeftDown:7,RightDown:8},t.RoleState={Relax:0,Moving:1,Attack:2},t=i=o([ne],t)}(a.default));i.default=oe,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/MathUtils":"MathUtils","../../engine/RandomUtil":"RandomUtil","../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../base/NodePoolManager":"NodePoolManager","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/HeroConfig":"HeroConfig","../config/MapConfig":"MapConfig","../config/MonsterConfig":"MonsterConfig","../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../config/SkillConfig":"SkillConfig","../config/SkinConfig":"SkinConfig","../config/StarAbilityConfig":"StarAbilityConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/MapManager":"MapManager","../manager/MonsterManager":"MonsterManager","../manager/PvpManager":"PvpManager","../manager/ScoreManager":"ScoreManager","../manager/SkillEffectManager":"SkillEffectManager","../manager/SkillManager":"SkillManager","../manager/SummonedManager":"SummonedManager","../manager/TianGuanManager":"TianGuanManager","../model/BossModel":"BossModel","../model/ChatModel":"ChatModel","../model/FuGuiGameModel":"FuGuiGameModel","../model/Grid":"Grid","../model/HurtModel":"HurtModel","../model/RoleInfoModel":"RoleInfoModel","../model/RolePrefabInfo":"RolePrefabInfo","../model/ServerTime":"ServerTime","../model/SettingModel":"SettingModel","../model/ShenBinModel":"ShenBinModel","../model/ShenBinSkillModel":"ShenBinSkillModel","../model/SkillEffectModel":"SkillEffectModel","../model/SkillModel":"SkillModel","../model/SpecialRingModel":"SpecialRingModel","../model/StarPlanetInfoModel":"StarPlanetInfoModel","../network/SocketClient":"SocketClient","../utils/MusicHelper":"MusicHelper","../view/shenbing/BaoshiInfoModel":"BaoshiInfoModel","./FightFrameRes":"FightFrameRes","./GameManager":"GameManager","./QieGePrefab":"QieGePrefab"}],RoleSkillEffectPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"8a311lh0vRGY6mwh85N6B3E","RoleSkillEffectPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onReuse=function(){if(this.node&&cc.isValid(this.node)&&this.node.getComponent(cc.Sprite)){var e=this.node.getComponent(cc.Sprite);if(!e)return;if(!e.spriteFrame)return;if(!e.spriteFrame.getRect())return;e.sizeMode=cc.Sprite.SizeMode.TRIMMED,e.trim=!0}},t.prototype.onUnuse=function(){this.node.scale=1,this.node.anchorX=.5,this.node.anchorY=.5,this.node.active=!1,this.node.angle=0,this.node.opacity=255,this.node.name="RoleSkillEffectPrefab"},t=o([r],t)}(a.default));i.default=c,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase"}],RuleConfig:[function(e,t,i){"use strict";cc._RF.push(t,"78ccfBnvnZCUoFJg8hZcKw3","RuleConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},t.getConfigById=function(e){return this.configMap.get(e)},t.Config_Name="RuleConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],RuneConfig:[function(e,t,i){"use strict";cc._RF.push(t,"86a89zbiYxNsb1T5QUloY6X","RuneConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.name=e.name,i.rune=e.rune,i.property=e.property,i.pro_min=e.pro_min,i.pro_max=e.pro_max,i.tpro_max=e.tpro_max,i.quality=e.quality,i.main=e.main,i.profession=e.profession,i.e_quality=e.e_quality,i.level=e.level,i.position=e.position,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getRuneById=function(e){var t;return this.configMap.forEach(function(i,n){i.id!=e||(t=i)}),t},t.getRuneByQuality=function(e){var t;return this.configMap.forEach(function(i,n){i.quality!=e||(t=i)}),t},t.getSameMainConfig=function(e){var t,i=this;return this.configMap.forEach(function(n,o){n.quality==e&&n.main==i.getRuneByQuality(e).main&&(t=n)}),t},t.fuwenConfigByConfig=function(e){var t=[];return this.configMap.forEach(function(i,n){i.quality==e&&t.push(i)}),t},t.getSameList=function(e){var t=new Map;return this.configMap.forEach(function(i,n){if(i.quality==e){var o=t.get(i.main);o||(o=[]),o.push(i),t.set(i.main,o)}}),t},t.configMap=new Map,t.Config_Name="runeconfig",t.mainList=[1001,2001,3001,4003,4005,4008,4011],t}(e("./JsonConfigBase").JsonConfigBase);i.RuneConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],STUtils:[function(e,t,i){"use strict";cc._RF.push(t,"7afa3r4PhhJW7gpAh0hduuk","STUtils");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/ShenBinModel"),a=e("./LoongCheerManager"),s=e("./SdkHandler"),r=cc._decorator,c=r.ccclass,l=(r.property,function(){function e(){}return e.stSdkInit=function(e){a.LoongCheerManager.loongCheerStatistics(e,"af_activate","af_activate","af_activate")},e.stVideo=function(e,t,i){var n,o,r=function(e){switch(t){case s.Code.ADCLICKED:o=!0,n=e+"click";break;case s.Code.ADSHOW:o=!0,n=e+"show";break;case s.Code.ADFAIL:o=!0,n=e+"adfail";break;case s.Code.ADREAWARD:o=!0,n=e+"reward"}};switch(i){case a.AdPosId.default:r("iaa_rwdall_");break;case a.AdPosId.blacksmith:r("iaa_blacksmithreroll_");break;case a.AdPosId.freegolds:r("iaa_freegolds_");break;case a.AdPosId.freeantique:r("iaa_freeantique_");break;case a.AdPosId.sellchance:r("iaa_sellchance_");break;case a.AdPosId.offlinereward:r("iaa_2xofflinereward_");break;case a.AdPosId.bagupgrade:r("iaa_bagupgrade_");break;case a.AdPosId.storageupgrade:r("iaa_storageupgrade_")}o&&a.LoongCheerManager.loongCheerStatistics(e,n,n,n)},e.stPayPurchase=function(e){a.LoongCheerManager.loongCheerStatistics(e,"af_purchase","af_purchase","af_purchase")},e.stPayPurchaseInfo=function(e,t){a.LoongCheerManager.loongCheerStatistics(e,t,t,t)},e.stGametime=function(e){a.LoongCheerManager.loongCheerStatistics(e,"act_gametime","act_gametime","act_gametime")},e.stLoginFirst=function(e){a.LoongCheerManager.loongCheerStatistics(e,"act_login_first","act_login_first","act_login_first")},e.stLoginFailed=function(e){a.LoongCheerManager.loongCheerStatistics(e,"act_login_failed","act_login_failed","act_login_failed")},e.stLoginSucceed=function(e){a.LoongCheerManager.loongCheerStatistics(e,"act_login_succeed","act_login_succeed","act_login_succeed")},e.stEnterGame=function(e){a.LoongCheerManager.loongCheerStatistics(e,"act_enter_game","act_enter_game","act_enter_game")},e.stStatistics=function(e,t){a.LoongCheerManager.loongCheerStatistics(e,t,t,t)},e.stJinjie=function(e,t,i){var n=1==t?"act_promotion_mortal_":"act_promotion_samsara_";n+=i,a.LoongCheerManager.loongCheerStatistics(e,n,n,n)},e.stShenbinLevel=function(e,t){var i;t.type==o.ShenBinModel.CHIXUEMOJIAN?i="act_bloodsword_lv":t.type==o.ShenBinModel.MINGYUNZHIREN?i="act_fateblade_lv":t.type==o.ShenBinModel.SHIHUNFAZHANG&&(i="act_soulwand_lv"),i+=t.level,a.LoongCheerManager.loongCheerStatistics(e,i,i,i)},e.stShenbinSkill=function(e,t){var i;t.type==o.ShenBinModel.CHIXUEMOJIAN?i="act_bloodsword_skill_lv":t.type==o.ShenBinModel.MINGYUNZHIREN?i="act_fateblade_skill_lv":t.type==o.ShenBinModel.SHIHUNFAZHANG&&(i="act_soulwand_skill_lv"),i+=t.level,a.LoongCheerManager.loongCheerStatistics(e,i,i,i)},e.stExchangeGold=function(e,t){var i=cc.js.formatStr("act_alchemy_%sw",t);a.LoongCheerManager.loongCheerStatistics(e,i,i,i)},e=n([c],e)}());i.default=l,window.STUtils=l,cc._RF.pop()},{"../model/ShenBinModel":"ShenBinModel","./LoongCheerManager":"LoongCheerManager","./SdkHandler":"SdkHandler"}],SafeDataModelBase:[function(e,t,i){"use strict";cc._RF.push(t,"3ebddibKO1IH5njt0t6q0BN","SafeDataModelBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RandomUtil"),o=function(){function e(){this.dataKeyMap=new Map,this.dataMap=new Map}return e.prototype.getNumber=function(e){var t=this.dataKeyMap.get(e),i=this.dataMap.get(e);return isNaN(i)&&(i=0),i+=t},e.prototype.setNumber=function(e,t){var i=n.default.nextInt(1,666666);t-=i,this.dataKeyMap.set(e,i),this.dataMap.set(e,t)},e}();i.default=o,cc._RF.pop()},{"./RandomUtil":"RandomUtil"}],SarItemListView:[function(e,t,i){"use strict";cc._RF.push(t,"fa9f92vs21KUplomrEVZBFf","SarItemListView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ViewBase"),r=e("../config/GameConst"),c=e("../config/ITemsConfig"),l=e("../event/CommonEvent"),d=e("../model/ItemInfoModel"),f=e("../model/RoleInfoModel"),g=e("../prefab/ItemPrefab"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.itemList=this.findChild(this.node,"panel/scrollView/view/content"),this.itemNode=this.findChild(this.node,"panel/scrollView/view/content/item"),this.closeBtn=this.findChild(this.node,"btnClose"),this.mask=this.findChild(this.node,"darkLayer")},t.prototype.onInitBase=function(t,i){i.sort(this.sortFun),e.prototype.onInitBase.call(this,t,i),this.configs=i;for(var n=this.itemList.childrenCount>this.configs.length?this.itemList.childrenCount:this.configs.length,o=0;o<n;o++){var a=void 0;o<this.itemList.childrenCount?a=this.itemList.children[o]:(a=cc.instantiate(this.itemNode)).parent=this.itemList,o<this.configs.length&&(a.active=!0,this.initItem(a,this.configs[o]))}this.onAddEvent(this.closeBtn,this.onBtnClose.bind(this)),this.onAddEvent(this.mask,this.onBtnClose.bind(this))},t.prototype.sortFun=function(e,t){return e.exp-t.exp},t.prototype.initItem=function(e,t){var i=this,n=this.findChild(e,"selectEffect"),o=e.getChildByName("itemPrefab").getComponent(g.default),a=c.ITemsConfig.getITemsConfigById(t.id.toString()),s=d.default.create(r.GameConst.ITEM_KIND.ITEM,a.id,null,a.quality);s.itemCnt=void 0==f.default.instance.getItemAmount(t.id)?0:f.default.instance.getItemAmount(t.id),o.init(s,!0,null,!1),n.active=!1,this.onAddEvent(e,function(){i.itemList.children.forEach(function(e){i.findChild(e,"selectEffect").active=!1}),n.active=!0,i.selectItemId=t.id,i.type=t.type})},t.prototype.onBtnClose=function(){var e={id:this.selectItemId,type:this.type};a.EventManager.instance.dispatch(l.CommonEvent.Event_Star_Select,e),this.closeView()},t=o([u],t)}(s.default));i.default=p,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../event/CommonEvent":"CommonEvent","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/ItemPrefab":"ItemPrefab"}],ScoreManager:[function(e,t,i){"use strict";cc._RF.push(t,"a922dSy3I5BoLN7OfwHfzFG","ScoreManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/RandomUtil"),o=function(){function e(){this.poolList=[]}return e.prototype.init=function(e){this.txtList=e},e.prototype.showScoreEffect=function(e,t,i,o,a){var s=this;void 0===o&&(o=.2),void 0===a&&(a=null);var r=this.getFromPool(t);r.node.parent=a||this.txtList[t].node.parent,r.string=e+"",r.node.active=!0,r.node.setPosition(i);var c=n.default.nextNumber(-30,40);r.node.setPosition(i.x,i.y+c),cc.tween(r.node).delay(o).to(.1,{scale:.7}).to(.16,{position:cc.v2(r.node.x,r.node.y+30)}).call(function(){s.releaseToPool(r,t)}).start()},e.prototype.showQieGeScoreEffect=function(e,t,i,o){var a=this;void 0===o&&(o=.2);var s=this.getFromPool(t);s.node.parent=this.txtList[t].node.parent,s.string=e+"",s.node.active=!0,s.node.setPosition(i);var r=n.default.nextNumber(-30,40);s.node.setPosition(i.x,i.y+r),cc.tween(s.node).to(.1,{scale:2,position:cc.v2(s.node.x,s.node.y+30)}).to(.1,{scale:.7}).delay(o).call(function(){a.releaseToPool(s,t)}).start()},e.prototype.showSpecialScoreEffect=function(e,t,i,n,o){var a=this;void 0===n&&(n=.1),void 0===o&&(o=null);var s=this.getFromPool(t);s.node.parent=o||this.txtList[t].node.parent,s.string=e+"",s.node.active=!0,s.node.opacity=255,s.node.setPosition(i),cc.tween(s.node).to(.15,{position:cc.v2(s.node.x,s.node.y+60)}).to(.5,{opacity:100,position:cc.v2(s.node.x,s.node.y+50)}).call(function(){a.releaseToPool(s,t)}).start()},e.prototype.getFromPool=function(t){var i;return void 0===t&&(t=e.ScoreType.Recover),this.poolList[t]||(this.poolList[t]=new cc.NodePool),(i=this.poolList[t].size()>0?this.poolList[t].get().getComponent(cc.Label):cc.instantiate(this.txtList[t].node).getComponent(cc.Label)).node.setScale(1),i},e.prototype.releaseToPool=function(t,i){void 0===i&&(i=e.ScoreType.Recover),t.node.stopAllActions(),this.poolList[i]||(this.poolList[i]=new cc.NodePool),this.poolList[i].put(t.node)},e.instance=new e,e.ScoreType={Recover:0,JueSe:1,Guai:2,QieGE:3,YaZhi:4,XinYun:5,Special:6},e}();i.default=o,cc._RF.pop()},{"../../engine/RandomUtil":"RandomUtil"}],SdkHandler:[function(e,t,i){"use strict";cc._RF.push(t,"7957dKB5/ZIC4JtJu0FNb28","SdkHandler");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o,a,s,r=e("../../engine/Logger"),c=e("../config/GameConfig"),l=e("./KoreaBNHandler"),d=e("./LongRuiHandler"),f=e("./SdkHelper"),g=e("./SdkManager"),h=e("./ZRWebSDKHandler"),u=e("./ZRWXSDKHandler");(function(e){e[e.ADFAIL=0]="ADFAIL",e[e.ADCOLSE=1]="ADCOLSE",e[e.ADCLICKED=2]="ADCLICKED",e[e.ADREAWARD=3]="ADREAWARD",e[e.ADSHOW=4]="ADSHOW",e[e.OK=200]="OK",e[e.FAIL=500]="FAIL"})(o=i.Code||(i.Code={})),function(e){e.videoAd="videoAd",e.loadVideoAd="loadVideoAd"}(a=i.AdType||(i.AdType={})),function(e){e.init="init",e.login="login",e.loginOut="fishLogin",e.onLoginRsp="onLoginRsp",e.exitGame="exitGame",e.onUploadCreateRole="onUploadCreateRole",e.onLoginRoleInfo="onLoginRoleInfo",e.onUpdateRoleInfo="onUpdateRoleInfo",e.showCafePlug="showCafePlug",e.onCustomEvent="onCustomEvent",e.sdkComment="sdkComment",e.sdkSprite="sdkSprite",e.sdkActivity="sdkActivity",e.showShareAct="showShareAct",e.enterServer="enterServer",e.createRole="createRole",e.roleLogin="roleLogin",e.upgradeRole="upgradeRole"}(i.AuthType||(i.AuthType={})),function(e){e.InitCallBack="InitCallBack",e.AuthCallBack="AuthCallBack",e.PayCallBack="PayCallBack",e.AdCallBack="AdCallBack"}(s=i.FunctionName||(i.FunctionName={}));var p=function(){return function(){}}();i.CallBackData=p;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(p);i.AuthData=m;var C=function(){function e(){}return e.callback=function(e,t){r.Logger.log("callback=====",e,t);try{var i=JSON.parse(t);switch(i.functionName){case s.InitCallBack:this.isInit=e==o.OK,f.default.isInit=!0,cc.sys.isNative&&g.default.sdkAd(a.loadVideoAd);break;case s.AuthCallBack:this.authCallback(e,i);break;case s.PayCallBack:this.payCallBack(e,i);break;case s.AdCallBack:this.adCallback(e,i)}}catch(e){r.Logger.error("callback error",e)}},e.authCallback=function(e,t){r.Logger.log("authCallback=====",e,t);try{t.sdkType==c.SdkType.LongRui?d.LongRuiHandler.Instance.authCallback(e,t):t.sdkType==c.SdkType.KoreaBingNiao?l.KoreaBNHandler.Instance.authCallback(e,t):t.sdkType==c.SdkType.FengYue?u.ZRWXSDKHandler.Instance.authCallback(e,t):t.sdkType==c.SdkType.Xiaotun&&h.ZRWebSDKHandler.Instance.authCallback(e,t)}catch(e){r.Logger.error("authCallback error",e)}},e.payCallBack=function(e,t){r.Logger.log("payCallBack=====",e,t),t.sdkType==c.SdkType.LongRui?d.LongRuiHandler.Instance.payCallBack(e,t):t.sdkType==c.SdkType.KoreaBingNiao?l.KoreaBNHandler.Instance.payCallBack(e,t):t.sdkType==c.SdkType.FengYue?d.LongRuiHandler.Instance.payCallBack(e,t):t.sdkType==c.SdkType.Xiaotun&&h.ZRWebSDKHandler.Instance.payCallBack(e,t)},e.adCallback=function(e,t){r.Logger.log("adcallback=====",e,t),t.sdkType==c.SdkType.LongRui?d.LongRuiHandler.Instance.adCallback(e,t):t.sdkType==c.SdkType.KoreaBingNiao||(t.sdkType==c.SdkType.FengYue?d.LongRuiHandler.Instance.adCallback(e,t):t.sdkType==c.SdkType.Xiaotun&&h.ZRWebSDKHandler.Instance.adCallback(e,t))},e.isInit=!1,e}();i.SdkHandler=C,window.SdkHandler=C,cc._RF.pop()},{"../../engine/Logger":"Logger","../config/GameConfig":"GameConfig","./KoreaBNHandler":"KoreaBNHandler","./LongRuiHandler":"LongRuiHandler","./SdkHelper":"SdkHelper","./SdkManager":"SdkManager","./ZRWXSDKHandler":"ZRWXSDKHandler","./ZRWebSDKHandler":"ZRWebSDKHandler"}],SdkHelper:[function(require,module,exports){"use strict";cc._RF.push(module,"12f77+rd2tN44KhDcb6KvZ3","SdkHelper"),Object.defineProperty(exports,"__esModule",{value:!0});var EventManager_1=require("../../engine/EventManager"),GlobalConfig_1=require("../../engine/GlobalConfig"),LocalStorage_1=require("../../engine/LocalStorage"),Logger_1=require("../../engine/Logger"),UIManager_1=require("../../engine/UIManager"),VersionManager_1=require("../../engine/VersionManager"),GameConfig_1=require("../config/GameConfig"),ViewConfig_1=require("../config/ViewConfig"),WordConfig_1=require("../config/WordConfig"),CommonEvent_1=require("../event/CommonEvent"),GameController_1=require("../GameController"),tttool_1=require("../miniGameTools/tttool"),RoleInfoModel_1=require("../model/RoleInfoModel"),ZoneModel_1=require("../model/ZoneModel"),SocketClient_1=require("../network/SocketClient"),UIHelper_1=require("../utils/UIHelper"),SdkHelper=function(){function SdkHelper(){}return SdkHelper.nativeToH5=function(e){if(Logger_1.Logger.log("nativeToH5=",e),GameConfig_1.GameConfig.sdkType==GameConfig_1.SdkType.FengYue)-1!=e.indexOf("RewardedVideoAdDidVisible")?UIManager_1.default.instance.closeView(ViewConfig_1.default.gameView.LoadingTipView):-1!=e.indexOf("RewardedVideoAdServerRewardDidSucceed")&&(WordConfig_1.WordConfig.showWord(60297),EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_ad_end));else{var t=JSON.parse(e).event;"RewardedVideoAdDidVisible"==t?UIManager_1.default.instance.closeView(ViewConfig_1.default.gameView.LoadingTipView):"RewardedVideoAdServerRewardDidSucceed"==t&&(WordConfig_1.WordConfig.showWord(60297),EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_ad_end))}},SdkHelper.init=function(){window.SdkHelper=SdkHelper,this.eventCallback=function(e){Logger_1.Logger.log("window.message==",e),GameConfig_1.GameConfig.sdkType==GameConfig_1.SdkType.FengYue?SdkHelper.nativeToH5(e.data.action):"nativeToH5"==e.data.action&&SdkHelper.nativeToH5(e.data.data)},window.addEventListener("message",this.eventCallback),window.nativeToH5=SdkHelper.nativeToH5,window.onCpCallback=function(callback_type,callback_data){Logger_1.Logger.log("SdkHelper.onCpCallback",callback_type,callback_data);var data=eval("("+callback_data+")"),ret=data.ret;switch(callback_type){case window.YHCPSDK.E_INIT:1==ret?(window.YHCPSDK.getSDKConfigInfo(),window.YHCPSDK.login()):Logger_1.Logger.error("\u521d\u59cb\u5316\u5931\u8d25\uff01");break;case window.YHCPSDK.E_GET_SDK_INFO:SdkHelper.gameId=data.gameID,SdkHelper.channelId=data.channelID,SdkHelper.appId=data.appID,EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkGetInfo);break;case window.YHCPSDK.E_LOGIN:case window.YHCPSDK.E_SWITCH_ACCOUNT:1==ret?(SdkHelper.sid=data.sid||"",SdkHelper.uId=data.uid||"",SocketClient_1.default.login(1)):(Logger_1.Logger.error("\u767b\u5f55\u5931\u8d25"),WordConfig_1.WordConfig.showWord(60298),setTimeout(function(){GameController_1.default.instance.restartGame()},1e3));break;case"logout":WordConfig_1.WordConfig.showWord(60299),setTimeout(function(){GameController_1.default.instance.restartGame()},1e3);break;case"login_rsp":1==ret?EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):(Logger_1.Logger.error("\u767b\u5f55\u9a8c\u8bc1\u5931\u8d25"),WordConfig_1.WordConfig.showWord(60300),setTimeout(function(){GameController_1.default.instance.restartGame()},1e3))}}},SdkHelper.isAndroid=function(){return cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX},SdkHelper.isIos=function(){return!1},SdkHelper.isSampIos=function(){return!1},SdkHelper.onSdkCallBack=function(e){try{JSON.parse(e)}catch(e){Logger_1.Logger.error("onSdkCallBack")}},SdkHelper.getBundleName=function(){var e="web";return GameConfig_1.GameConfig.sdkType==GameConfig_1.SdkType.Xiaotun?e=GlobalConfig_1.GlobalConfig.channelId:cc.sys.isNative&&(this.isSampIos()||cc.sys.os==cc.sys.OS_ANDROID&&(e=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getPackageName","()Ljava/lang/String;"))),Logger_1.Logger.info("getBundleName="+e),e},SdkHelper.getNativeVersion=function(){var e="1.0.0";return cc.sys.isNative&&(cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||(e=jsb.reflection.callStaticMethod("org/cocos2dx/lib/Cocos2dxHelper","getVersion","()Ljava/lang/String;"))),e},SdkHelper.sdkInit_Ol=function(){if(console.log("sdkInit_Ol====="),GameConfig_1.GameConfig.isWechat())EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit);else{var e={gameVersion:VersionManager_1.default.instance.nowVersion,appId:SdkHelper.appId,paysign:SdkHelper.paysign,gameId:SdkHelper.gameId,channelId:SdkHelper.channelId,direction:"0"};cc.sys.isBrowser?window.location.ancestorOrigins.length>0?window.YHCPSDK.init("onCpCallback"):EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkInit","(Ljava/lang/String;)V",JSON.stringify(e)):this.isIos()?jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkInit:",JSON.stringify(e)):EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit)}},SdkHelper.sdkInit_callback_Ol=function(e){void 0===e&&(e="");try{var t=JSON.parse(e).code;cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?64==t?(SdkHelper.sdkInit(),SdkHelper.sdkGetAppId(),SdkHelper.sdkGetChannelID(),SdkHelper.sdkGetGameId(),SdkHelper.getXmlChannel(),SdkHelper.isInit=!0):Logger_1.Logger.error("sdkInit_callback_Ol error",WordConfig_1.WordConfig.getWord(60295)):this.isIos()&&(1==t?(SdkHelper.sdkInit(),SdkHelper.sdkGetAppId(),SdkHelper.sdkGetChannelID(),SdkHelper.sdkGetGameId(),SdkHelper.isInit=!0):Logger_1.Logger.error("sdkInit_callback_Ol error",WordConfig_1.WordConfig.getWord(60295)))}catch(e){Logger_1.Logger.error("sdkInit_callback_Ol error",e)}},SdkHelper.getXmlChannel=function(){cc.sys.isNative&&(cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||(SdkHelper.xmlChannel=jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"getXmlChannel","()Ljava/lang/String;")))},SdkHelper.sdkInit=function(){var e={gameVersion:VersionManager_1.default.instance.nowVersion};cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.BnSdkAdapter,"sdkInit","(Ljava/lang/String;)V",JSON.stringify(e)):this.isIos()&&SdkHelper.sdkLogin()},SdkHelper.sdkInit_callback=function(e){void 0===e&&(e="");try{var t=JSON.parse(e);1==t.code?(SdkHelper.app_id=t.app_id,SdkHelper.sdkLogin()):Logger_1.Logger.error("sdkInit_callback_Ol error",WordConfig_1.WordConfig.getWord(60295))}catch(e){Logger_1.Logger.error("sdkInit_callback error",e)}},SdkHelper.sdkAd=function(){if(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX){var e={ad_id:SdkHelper.adConfig[SdkHelper.app_id],extra:""};SocketClient_1.default.s_seq_start_adv_status(1),jsb.reflection.callStaticMethod(this.BnSdkAdapter,"sdkAd","(Ljava/lang/String;)V",JSON.stringify(e))}else this.isIos()&&cc.sys.isBrowser?(UIManager_1.default.instance.createView(ViewConfig_1.default.gameView.LoadingTipView,null,WordConfig_1.WordConfig.getWord(60762)),window.webkit.messageHandlers.h5ToNative.postMessage("")):EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_ad_end)},SdkHelper.sdkAd_callback=function(e){void 0===e&&(e="");try{var t=JSON.parse(e),i=t.code,n=t.msg;1==i||(2==i?SocketClient_1.default.s_seq_start_adv_status(2):3==i||(4==i?EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_ad_end):0==i&&UIHelper_1.UIHelper.showTip(n)))}catch(e){Logger_1.Logger.error("sdkAd_callback error",e)}},SdkHelper.sdkLogin=function(){GameConfig_1.GameConfig.isWechat()?tttool_1.tttool.ttLogin():cc.sys.isNative&&(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkLogin","()V"):this.isIos()&&jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkLogin:",""))},SdkHelper.sdkLogin_callback_Ol=function(e){void 0===e&&(e="");try{Logger_1.Logger.error("sdkLogin_callback_Ol========11==",e);var t=JSON.parse(e),i=t.code;0==i?(SdkHelper.uId=t.uid,SdkHelper.sid=t.sid,SdkHelper.extra=t.extra,LocalStorage_1.default.setItem(this.Local_Login_Uid_Key,SdkHelper.uId),SocketClient_1.default.login(1)):1==i?WordConfig_1.WordConfig.showWord(60301):2==i?WordConfig_1.WordConfig.showWord(60302):6==i?GameController_1.default.instance.restartGame():this.isIos()&&1==i&&(SdkHelper.sid=t.session_id,SdkHelper.extra=t.extra,SocketClient_1.default.login(1))}catch(e){Logger_1.Logger.error("sdkLogin_callback_Ol error",e)}},SdkHelper.sdkGetGameId=function(){cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkGetGameId","()V"):this.isIos()&&jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkGetGameId:","")},SdkHelper.sdkGetGameId_callback_Ol=function(e){if(void 0===e&&(e=""),cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX)SdkHelper.gameId=e;else if(this.isIos()){var t=JSON.parse(e);1==t.code&&(SdkHelper.gameId=t.gameId)}},SdkHelper.sdkGetChannelID=function(){cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkGetChannelID","()V"):this.isIos()&&jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkGetChannelID:","")},SdkHelper.sdkGetChannelID_callback_Ol=function(e){if(void 0===e&&(e=""),cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX)SdkHelper.channelId=e;else if(this.isIos()){var t=JSON.parse(e);1==t.code&&(SdkHelper.channelId=t.channelId)}},SdkHelper.sdkGetAppId=function(){cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkGetAppId","()V"):this.isIos()&&jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkGetAppId:","")},SdkHelper.sdkGetAppId_callback_Ol=function(e){if(void 0===e&&(e=""),cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX)SdkHelper.appId=e;else if(this.isIos())try{var t=JSON.parse(e);1==t.code&&(SdkHelper.appId=t.appId)}catch(e){}EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkGetInfo)},SdkHelper.sdkLoginRsp=function(e){Logger_1.Logger.log("\u767b\u5f55\u4e8c\u6b21\u9a8c\u8bc1\uff08\u5fc5\u63a5\uff09sdkLoginRsp===",e),cc.sys.isBrowser?EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):GameConfig_1.GameConfig.isWechat()?EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):this.isIos()?jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkLoginRsp:",e):GameController_1.default.instance.gotoLogin()},SdkHelper.sdkLoginRsp_callback_Ol=function(e){void 0===e&&(e="");try{Logger_1.Logger.log("sdkLoginRsp_callback_Ol",e);var t=JSON.parse(e).code;cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?7==t?EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):(WordConfig_1.WordConfig.showWord(60300),setTimeout(function(){GameController_1.default.instance.restartGame()},2e3)):this.isIos()&&(1==t?EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):(WordConfig_1.WordConfig.showWord(60300),setTimeout(function(){GameController_1.default.instance.restartGame()},2e3)))}catch(e){Logger_1.Logger.error("sdkLoginRsp_callback_Ol error",e)}},SdkHelper.sdkLogout=function(){cc.sys.isBrowser?window.location.ancestorOrigins.length>0?window.YHCPSDK.logout():EventManager_1.EventManager.instance.dispatch(CommonEvent_1.CommonEvent.Event_SdkInit):cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkLogout","()V"):this.isIos()?jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkLogout:",""):GameController_1.default.instance.restartGame()},SdkHelper.sdkLogout_callback_Ol=function(e){try{var t=JSON.parse(e).code;cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?21==t?GameController_1.default.instance.restartGame():22==t&&WordConfig_1.WordConfig.showWord(60303):this.isIos()&&(1==t?GameController_1.default.instance.restartGame():WordConfig_1.WordConfig.showWord(60303))}catch(e){Logger_1.Logger.error("sdkLogout_callback_Ol error",e)}},SdkHelper.sdkCustomAction=function(e,t,i,n,o){if(void 0===t&&(t=0),void 0===i&&(i=RoleInfoModel_1.default.instance.roleId),void 0===n&&(n=RoleInfoModel_1.default.instance.roleName),void 0===o&&(o=RoleInfoModel_1.default.instance.level),!GameConfig_1.GameConfig.isWechat());},SdkHelper.sdkCustomAction_callback=function(e){},SdkHelper.sdkPay=function(e,t,i,n,o,a){if(void 0===a&&(a=null),GameConfig_1.GameConfig.environment,GameConfig_1.EnvironmentType.Online,Logger_1.Logger.log("sdkPay====",e,t,i,n,o),cc.sys.isBrowser){if(window.location.ancestorOrigins.length>0){var s={cp_order_id:e,amount:t,role_id:RoleInfoModel_1.default.instance.roleId,role_name:RoleInfoModel_1.default.instance.roleName,role_level:"",vip_level:"",server_id:ZoneModel_1.ZoneModel.nowZoneInfoModel.server_id,server_name:ZoneModel_1.ZoneModel.nowZoneInfoModel.server_name,product_count:"",product_name:i,product_type:"",product_id:n,desc:"666",rate:"10",notify_url:o};window.YHCPSDK.pay(s)}}else if(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX){s={cp_order_id:e,amount:t,role_id:RoleInfoModel_1.default.instance.roleId,role_name:RoleInfoModel_1.default.instance.roleName,role_level:"",vip_level:"",server_id:ZoneModel_1.ZoneModel.nowZoneInfoModel.server_id,server_name:ZoneModel_1.ZoneModel.nowZoneInfoModel.server_name,product_count:"",product_name:i,product_type:"",product_id:n,desc:"666",rate:"10",notify_url:o};jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkPay","(Ljava/lang/String;)V",JSON.stringify(s))}else if(this.isIos()){s={order_id:e,total_fee:t,product_count:"1",product_id:n,product_name:i,rate:"10",product_desc:"666",notify_url:o,role_id:RoleInfoModel_1.default.instance.roleId,role_name:RoleInfoModel_1.default.instance.roleName,role_level:"1",server_id:"1",server_name:"1",apple_product_id:a.product_ios,vip_level:"1"};jsb.reflection.callStaticMethod(this.Ios_Zd_Sdk,"sdkProfile:",JSON.stringify(s))}},SdkHelper.sdkPay_callback_Ol=function(e){try{var t=JSON.parse(e).code;32==t||(33==t?WordConfig_1.WordConfig.showWord(60304):34==t&&WordConfig_1.WordConfig.showWord(60305))}catch(e){Logger_1.Logger.error("sdkPay_callback_Ol error",e)}},SdkHelper.chong_callback_Ol=function(e){this.sdkPay_callback_Ol(e)},SdkHelper.sdkGetAppInfo=function(){cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?cc.sys.isNative&&jsb.reflection.callStaticMethod(this.BnOlSdkAdapter,"sdkGetAppInfo","()V"):this.isIos()},SdkHelper.sdkGetAppInfo_callback_Ol=function(e){Logger_1.Logger.log("sdkGetAppInfo_callback_Ol====",e);try{var t=JSON.parse(e);for(var i in t){var n=t[i];i.split(".");n.indexOf("Game")}}catch(e){}},SdkHelper.AppIdConfig={Ios1:"110001195",Ios2:"110001357",Ios3:"110001357",Ios6:"110001428",Ios7:"100044",Ios8:"100066"},SdkHelper.isGetAppstore_reward=!1,SdkHelper.isGetting_Appstore_reward=!1,SdkHelper.BnOlSdkAdapter="sdk/BnOlSdkAdapter",SdkHelper.BnSdkAdapter="sdk/BnSdkAdapter",SdkHelper.Ios_Zd_Sdk="CocosCenter",SdkHelper.Ios_Qd_Sdk="QDCocosCenter",SdkHelper.adConfig={q500117:"228",q500116:"227",q500112:"224",q500133:"265",q500123:"268",q500154:"276",q500155:"277",q500163:"279",q500164:"280",q500165:"281",q500166:"282",q500170:"283",q500171:"284",q500172:"285",q500173:"286",q500174:"287",q500175:"288"},SdkHelper.isInit=!1,SdkHelper.app_id="q500123",SdkHelper.sid="",SdkHelper.gameId="120000123",SdkHelper.channelId="101",SdkHelper.platformId=GameConfig_1.GameConfig.environment==GameConfig_1.EnvironmentType.Test?"999":"888",SdkHelper.appId="100044",SdkHelper.uId="",SdkHelper.gameUId="",SdkHelper.paysign="4a9c884ad01f491e73fb12aa6d2d87c9",SdkHelper.loginRsp={},SdkHelper.Local_Login_Uid_Key="Local_Login_Uid_Key",SdkHelper}();exports.default=SdkHelper,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GlobalConfig":"GlobalConfig","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/VersionManager":"VersionManager","../GameController":"GameController","../config/GameConfig":"GameConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../miniGameTools/tttool":"tttool","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper"}],SdkManager:[function(e,t,i){"use strict";cc._RF.push(t,"059fe7uyW1HEovr97tzgiKS","SdkManager");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/Logger"),a=e("../config/GameConfig"),s=e("./KoreaBNSdkManager"),r=e("./LongRuiManager"),c=e("./LoongCheerManager"),l=e("./SdkHandler"),d=e("./SdkHelper"),f=e("./ZRWebSDKManager"),g=e("./ZRWXSDKManager");(function(e){e.Pay="pay"})(i.SdkPayType||(i.SdkPayType={}));var h=function(){return function(){}}();i.PayData=h;var u=cc._decorator,p=u.ccclass,m=(u.property,function(){function e(){}return e.sdkAuth=function(e,t,i){void 0===t&&(t=""),o.Logger.log("sdkAuth--------------",e),cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?a.GameConfig.sdkType==a.SdkType.LoongCheer?c.LoongCheerManager.loongCheerAuth(e):a.GameConfig.sdkType==a.SdkType.LongRui?r.LongRuiManager.sdkAuth(e,t):a.GameConfig.sdkType==a.SdkType.KoreaBingNiao?(l.SdkHandler.isInit=s.KoreaBNSdkManager.doCommand("getInit",void 0,"()Z"),s.KoreaBNSdkManager.sdkAuth(e,t,i)):a.GameConfig.sdkType==a.SdkType.FengYue&&r.LongRuiManager.sdkAuth(e,t):d.default.isIos()?a.GameConfig.sdkType==a.SdkType.KoreaBingNiao&&(l.SdkHandler.isInit=s.KoreaBNSdkManager.doCommand("getInit",""),o.Logger.error("\u4e3b\u52a8\u83b7\u53d6\u521d\u59cb\u5316\u5e03\u5c14\u503c",l.SdkHandler.isInit),s.KoreaBNSdkManager.sdkAuth(e,t,i)):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os):cc.sys.isBrowser?a.GameConfig.sdkType==a.SdkType.FengYue?r.LongRuiManager.sdkAuth(e,t):a.GameConfig.sdkType==a.SdkType.Xiaotun&&f.ZRWebSDKManager.sdkAuth(e,t):a.GameConfig.isWechat()&&g.ZRWXSDKManager.sdkAuth(e,t)},e.sdkPay=function(e,t){cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?a.GameConfig.sdkType==a.SdkType.LongRui?r.LongRuiManager.sdkPay(e,t):a.GameConfig.sdkType==a.SdkType.LoongCheer?c.LoongCheerManager.loongCheerPay(e,t.configId,t.shopId,"",t.cpOrderNo):a.GameConfig.sdkType==a.SdkType.KoreaBingNiao?s.KoreaBNSdkManager.sdkPay(e,t):a.GameConfig.sdkType==a.SdkType.FengYue&&r.LongRuiManager.sdkPay(e,t):d.default.isIos()?a.GameConfig.sdkType==a.SdkType.KoreaBingNiao&&s.KoreaBNSdkManager.sdkPay(e,t):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os):cc.sys.isBrowser?a.GameConfig.sdkType==a.SdkType.FengYue?r.LongRuiManager.sdkPay(e,t):a.GameConfig.sdkType==a.SdkType.Xiaotun&&f.ZRWebSDKManager.sdkPay(e,t):a.GameConfig.isWechat()&&g.ZRWXSDKManager.sdkPay(e,t)},e.sdkAd=function(e,t){void 0===t&&(t=c.AdPosId.default),cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_LINUX?a.GameConfig.sdkType==a.SdkType.LongRui?r.LongRuiManager.sdkAd(e):a.GameConfig.sdkType==a.SdkType.LoongCheer?c.LoongCheerManager.loongCheerAd(e,t):a.GameConfig.sdkType==a.SdkType.KoreaBingNiao?s.KoreaBNSdkManager.sdkAd(e):a.GameConfig.sdkType==a.SdkType.FengYue?r.LongRuiManager.sdkAd(e):a.GameConfig.sdkType==a.SdkType.Xiaotun&&f.ZRWebSDKManager.sdkAd(e):d.default.isIos()?a.GameConfig.sdkType==a.SdkType.FengYue&&r.LongRuiManager.sdkAd(e):o.Logger.error("\u4e0d\u8bc6\u522b\u7cfb\u7edf",cc.sys.os):cc.sys.isBrowser?a.GameConfig.sdkType==a.SdkType.FengYue?r.LongRuiManager.sdkAd(e):a.GameConfig.sdkType==a.SdkType.Xiaotun&&f.ZRWebSDKManager.sdkAd(e):a.GameConfig.isWechat()&&g.ZRWXSDKManager.sdkAd(e)},e=n([p],e)}());i.default=m,window.SdkManager=m,cc._RF.pop()},{"../../engine/Logger":"Logger","../config/GameConfig":"GameConfig","./KoreaBNSdkManager":"KoreaBNSdkManager","./LongRuiManager":"LongRuiManager","./LoongCheerManager":"LoongCheerManager","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper","./ZRWXSDKManager":"ZRWXSDKManager","./ZRWebSDKManager":"ZRWebSDKManager"}],SerRoleInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"5a352MV/+1KiordbepUJomB","SerRoleInfoModel");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o=e("../config/MagicNameConfig"),a=e("../model/MagicModel"),s=cc._decorator,r=s.ccclass,c=(s.property,function(){function e(){this.maxHp=0,this.maxMp=0,this.attrList=[],this.quality=0,this.buffList=[],this.skinList=[],this.skillList=[],this.title=0}var t;return t=e,e.proto2Model=function(e){var i=new t;i.id=e.getId(),i.type=e.getType(),i.cid=e.getCid(),i.name=e.getName(),i.group=e.getGroup(),i.currHp=e.getHp(),i.currMp=e.getMp(),i.attrList=a.default.proto2ModelList(e.getAttrList()),i.curr_x=e.getCurrX()-1,i.curr_y=e.getCurrY()-1,i.prof=e.getProf(),i.maxHp=a.default.getMagicValueByList(o.MagicNameConfig.MagicId.hp,i.attrList),i.maxMp=a.default.getMagicValueByList(o.MagicNameConfig.MagicId.mp,i.attrList),i.quality=e.getQuality(),i.title=e.getTitle();for(var n=e.getBuffListList(),s=0;s<n.length;s++){var r=g.proto2Model(n[s]);i.buffList.push(r)}var c=e.getSkinListList();for(s=0;s<c.length;s++)i.skinList.push(c[s].getId());var l=[],d=e.getSkillListList();for(s=0;s<d.length;s++){var f=new u;f.skillId=d[s].getId(),f.skillLevel=d[s].getLevel(),l.push(f)}return i.skillList=l,i},e=t=n([r],e)}());i.default=c;var l=function(){function e(){}return e.proto2Model=function(t){var i=new e;return i.id=t.getId(),i.currX=t.getCurrX()-1,i.currY=t.getCurrY()-1,i.toX=t.getToX()-1,i.toY=t.getToY()-1,i},e}();i.SerRoleMoveModel=l;var d=function(){function e(){this.harmList=[]}return e.proto2Model=function(t){var i=new e;i.attackId=t.getAttId(),i.skillId=t.getSkillId(),i.targetId=t.getTargetId();for(var n=t.getHarmListList(),o=0;o<n.length;o++){var a=new f;a.defId=n[o].getDefId(),a.harm=n[o].getHarm(),a.is_lucky=n[o].getIsLucky(),i.harmList[o]=a}return i},e}();i.SerRoleAttackModel=d;var f=function(){return function(){}}();i.HarmModel=f;var g=function(){function e(){}return e.proto2Model=function(t){var i=new e;return i.buffId=t.getBuffId(),i.startTime=t.getStartTime(),i.duration=t.getDuration(),i.skillid=t.getSkillId(),i},e}();i.SerBuffModel=g,function(e){e[e.BLEED=1]="BLEED",e[e.DIZZY=2]="DIZZY",e[e.FREEZE=3]="FREEZE",e[e.PARALYSIS=4]="PARALYSIS",e[e.BURN=5]="BURN",e[e.SHIELD=6]="SHIELD",e[e.HP=7]="HP",e[e.POISON=8]="POISON",e[e.HURT=9]="HURT",e[e.SHIHUA=10]="SHIHUA",e[e.INVICIBLE=11]="INVICIBLE",e[e.ATTR=101]="ATTR"}(i.StatusBuffId||(i.StatusBuffId={}));var h=function(){function e(){}return e.proto2Model=function(t){var i=new e;return i.id=t.getId(),i.harm=t.getHarm(),i.buffId=t.getBuffId(),i},e}();i.SerBuffHarmModel=h;var u=function(){return function(){}}();i.SkillItemModel=u,cc._RF.pop()},{"../config/MagicNameConfig":"MagicNameConfig","../model/MagicModel":"MagicModel"}],SerRolePrefab:[function(e,t,i){"use strict";cc._RF.push(t,"8ddb4oWAMxOpbHInxUNVgNG","SerRolePrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/SpriteFrameComponent"),r=e("../config/ColorConfig"),c=e("../config/GameConst"),l=e("../config/MonsterConfig"),d=e("../config/SkillConfig"),f=e("../config/SkinConfig"),g=e("../manager/ScoreManager"),h=e("../manager/TianGuanManager"),u=e("../model/RoleInfoModel"),p=e("../model/ServerTime"),m=e("../prefab/FightFrameRes"),C=e("../prefab/GameManager"),_=e("../utils/UIHelper"),v=e("./SerRoleInfoModel"),y=e("./SerSkillEffectManager"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtName=null,t.txtHp=null,t.txtMp=null,t.hpNode=null,t.mpNode=null,t.maxHpWidth=86,t.commonAttackTime=.1,t.banyueEffect=null,t.iceEffect=null,t.dizzyEffect=null,t.paralysisEffect=null,t.petrochemicalEffect=null,t.attrEffect=null,t.shidushu_effect=null,t.wujiEffect=null,t.huoQiangEffect=null,t.mofaDunEffect=null,t.zhiliaoshuEffect=null,t.wudiEffect=null,t.isDead=!1,t.isPlayYun=!1,t.isPlayIce=!1,t.isPlayMabi=!1,t.isPlayWudi=!1,t.isPlayShiHua=!1,t.isPlayMofaDun=!1,t.summonedLevel=0,t.baguaEffect=null,t.isPlayBagua=!1,t.isPlayFuHuo=!1,t.buffList=[v.StatusBuffId.BLEED,v.StatusBuffId.DIZZY,v.StatusBuffId.FREEZE,v.StatusBuffId.PARALYSIS,v.StatusBuffId.BURN,v.StatusBuffId.SHIELD,v.StatusBuffId.HP,v.StatusBuffId.POISON,v.StatusBuffId.HURT,v.StatusBuffId.SHIHUA,v.StatusBuffId.INVICIBLE,v.StatusBuffId.ATTR],t.triggerSkillId={lingxi:414,wanjun:413,hushen:502,shenLi:501},t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onEnable=function(){},t.prototype.update=function(){this.serRoleInfoModel&&this.checkBuff()},t.prototype.checkBuff=function(){var e=this;this.findChild(this.node,"debuff/iconDu").active=!1,this.findChild(this.node,"debuff/icon_pojia").active=!1,this.findChild(this.node,"debuff/iconHuoQiang").active=!1,this.findChild(this.node,"debuff/iconYinShen").active=!1,this.findChild(this.node,"debuff/iconBanYue").active=!1,this.findChild(this.node,"debuff/iconyun").active=!1,this.findChild(this.node,"buff/iconShengSheng").active=!1,this.findChild(this.node,"buff/iconAddHp").active=!1,this.findChild(this.node,"buff/iconMoFaDun").active=!1,this.findChild(this.node,"buff/icon_zhenqi").active=!1,this.findChild(this.node,"buff/icon_WujiZhenQi").active=!1;for(var t=0;t<this.buffList.length;t++){var i=this.getBuffModelByBuffId(this.buffList[t]);switch(this.buffList[t]){case v.StatusBuffId.BLEED:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.banyueEffect&&(this.banyueEffect.destroy(),this.banyueEffect=null);break;case v.StatusBuffId.DIZZY:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.dizzyEffect&&(this.dizzyEffect.destroy(),this.dizzyEffect=null,this.isPlayYun=!1);break;case v.StatusBuffId.FREEZE:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.iceEffect&&(this.iceEffect.destroy(),this.iceEffect=null,this.isPlayIce=!1);break;case v.StatusBuffId.PARALYSIS:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.paralysisEffect&&(this.paralysisEffect.destroy(),this.paralysisEffect=null,this.isPlayMabi=!1);break;case v.StatusBuffId.BURN:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.huoQiangEffect&&(this.huoQiangEffect.destroy(),this.huoQiangEffect=null);break;case v.StatusBuffId.SHIELD:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.mofaDunEffect&&(this.isPlayMofaDun=!1,this.mofaDunEffect.destroy(),this.mofaDunEffect=null);break;case v.StatusBuffId.HP:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.zhiliaoshuEffect&&(this.zhiliaoshuEffect.destroy(),this.zhiliaoshuEffect=null);break;case v.StatusBuffId.POISON:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.shidushu_effect&&(this.shidushu_effect.destroy(),this.shidushu_effect=null);break;case v.StatusBuffId.HURT:break;case v.StatusBuffId.SHIHUA:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.petrochemicalEffect&&(this.petrochemicalEffect.destroy(),this.petrochemicalEffect=null,this.isPlayShiHua=!1);break;case v.StatusBuffId.INVICIBLE:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&this.wudiEffect&&(this.wudiEffect.destroy(),this.wudiEffect=null);break;case 0:(!i||i.startTime+i.duration-p.ServerTime.getServerTime()<0)&&i.skillid==d.SkillConfig.SkillIdConfig.FengYinZhiLi&&this.baguaEffect&&(this.baguaEffect.destroy(),this.baguaEffect=null)}}var n=function(t){var i=o.serRoleInfoModel.buffList[t];switch(o.serRoleInfoModel.buffList[t].buffId){case 0:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&i.skillid==d.SkillConfig.SkillIdConfig.FengYinZhiLi&&null==o.baguaEffect&&y.default.instance.playBaguaEffect(o,i.duration/1e3,function(){});break;case v.StatusBuffId.BLEED:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&(o.findChild(o.node,"debuff/iconBanYue").active=!0);break;case v.StatusBuffId.DIZZY:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0?(o.findChild(o.node,"debuff/iconyun").active=!0,null==o.dizzyEffect&&y.default.instance.playRoleYunEffect(o,i.duration/1e3,function(){})):o.findChild(o.node,"debuff/iconyun").active=!1;break;case v.StatusBuffId.FREEZE:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&null==o.iceEffect&&y.default.instance.playRoleIceEffect(o,i.duration/1e3,function(){});break;case v.StatusBuffId.PARALYSIS:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&null==o.paralysisEffect&&y.default.instance.playRoleMabiEffect(o,i.duration/1e3,function(){});break;case v.StatusBuffId.BURN:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&(o.findChild(o.node,"debuff/iconHuoQiang").active=!0);break;case v.StatusBuffId.SHIELD:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&(i.skillid==d.SkillConfig.SkillIdConfig.MoFaDun?(o.findChild(o.node,"buff/iconMoFaDun").active=!0,null==o.mofaDunEffect&&o.scheduleOnce(function(){y.default.instance.playMoFaDunEffect(e,i.duration/1e3,function(){})},.2)):i.skillid==d.SkillConfig.SkillIdConfig.ShenShengZhanJia&&(o.findChild(o.node,"buff/iconShengSheng").active=!0));break;case v.StatusBuffId.HP:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&(o.findChild(o.node,"buff/iconAddHp").active=!0);break;case v.StatusBuffId.POISON:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&(o.findChild(o.node,"debuff/iconDu").active=!0);break;case v.StatusBuffId.HURT:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&i.skillid==d.SkillConfig.SkillIdConfig.WuJiZhenQi&&(o.findChild(o.node,"buff/icon_WujiZhenQi").active=!0);break;case v.StatusBuffId.SHIHUA:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&null==o.petrochemicalEffect&&y.default.instance.playRoleShiHuaEffect(o,i.duration/1e3,function(){});break;case v.StatusBuffId.INVICIBLE:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&null==o.wudiEffect&&(i.skillid==d.SkillConfig.SkillIdConfig.FuHuo&&(o.isPlayFuHuo||y.default.instance.playRoleRebirthEffect(o,function(){e.isPlayFuHuo=!1})),o.scheduleOnce(function(){y.default.instance.playRoleWudiEffect(e,i.duration/1e3,function(){})},.2));break;case v.StatusBuffId.ATTR:i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0&&(i.skillid==d.SkillConfig.SkillIdConfig.YeManChongZhuang?o.findChild(o.node,"debuff/icon_pojia").active=!0:i.skillid==d.SkillConfig.SkillIdConfig.DouQiHuTi?o.findChild(o.node,"buff/icon_zhenqi").active=!0:i.skillid==d.SkillConfig.SkillIdConfig.FaShuJingTong||(i.skillid==d.SkillConfig.SkillIdConfig.YinShen?o.findChild(o.node,"debuff/iconYinShen").active=!0:i.skillid==d.SkillConfig.SkillIdConfig.ShenShengZhanJia&&(o.findChild(o.node,"buff/iconShengSheng").active=!0)))}},o=this;for(t=0;t<this.serRoleInfoModel.buffList.length;t++)n(t)},t.prototype.getBuffModelByBuffId=function(e){for(var t=0;t<this.serRoleInfoModel.buffList.length;t++)if(this.serRoleInfoModel.buffList[t].buffId==e)return this.serRoleInfoModel.buffList[t]},t.prototype.setRoleType=function(e){var t=this;if(this.serRoleInfoModel=e,this.isDead=!1,this.serRoleInfoModel.cid==c.GameConst.SPECIALBOSSID.WORLDBOSSID||this.serRoleInfoModel.cid==C.default.instance.FightBossId?this.maxHpWidth=139.8:(this.refreshFightFrame(),this.maxHpWidth=86),this.refresh(),this.appearMv(),this.serRoleInfoModel.type==i.RoleType.Summoned){var n=void 0;if(this.serRoleInfoModel.prof==c.GameConst.OCCUPATION.FA_SHI){n=this.getEffectId(d.SkillConfig.SkillIdConfig.YouHuoZhiGuang,this.serRoleInfoModel.skinList);var o=this.serverFightView.getSerRolePrefabById(this.serRoleInfoModel.cid);this.summonedLevel=o?o.getSkillLevel(d.SkillConfig.SkillIdConfig.YouHuoZhiGuang,o.serRoleInfoModel.skillList):this.getSkillLevel(d.SkillConfig.SkillIdConfig.YouHuoZhiGuang,this.serRoleInfoModel.skillList)}else if(this.serRoleInfoModel.prof==c.GameConst.OCCUPATION.DAO_SHI){o=this.serverFightView.getSerRolePrefabById(this.serRoleInfoModel.cid);this.summonedLevel=o?o.getSkillLevel(d.SkillConfig.SkillIdConfig.ZhaoHuanShu,o.serRoleInfoModel.skillList):this.getSkillLevel(d.SkillConfig.SkillIdConfig.ZhaoHuanShu,this.serRoleInfoModel.skillList),this.summonedLevel<10?n=this.getEffectId(d.SkillConfig.SkillIdConfig.ZhaoHuanShu,this.serRoleInfoModel.skinList):(n=y.default.instance.skillConfig.zhaohuan_shenshou,this.getIsEquipSkin(f.SKINID.ZHAOHUANSHU_HuanLing,this.serRoleInfoModel.skinList)&&(n=y.default.instance.skillConfig.zhaohuan_shenshou_pro))}this.serverFightView.isPlayZhaoHuan&&y.default.instance.useSkill(n,this,[],function(){t.serverFightView.isPlayZhaoHuan=!1},null)}},t.prototype.refresh=function(){this.serRoleInfoModel&&(this.txtName.string=this.serRoleInfoModel.name,this.serRoleInfoModel.cid==c.GameConst.SPECIALBOSSID.WORLDBOSSID||this.serRoleInfoModel.cid==C.default.instance.FightBossId?(this.txtHp.string=(this.serRoleInfoModel.currHp/100).toFixed(1)+"%",this.hpNode.width=this.serRoleInfoModel.currHp/1e4*this.maxHpWidth):(this.serRoleInfoModel.type==i.RoleType.Monster&&(this.txtName.node.color=r.ColorConfig.getQualityColor(this.serRoleInfoModel.quality)),this.txtHp.string=_.UIHelper.tranNumber(Math.ceil(this.serRoleInfoModel.currHp))+"/"+_.UIHelper.tranNumber(Math.ceil(this.serRoleInfoModel.maxHp)),this.hpNode.width=this.serRoleInfoModel.currHp/this.serRoleInfoModel.maxHp*this.maxHpWidth),this.txtMp.string=_.UIHelper.tranNumber(Math.ceil(this.serRoleInfoModel.currMp))+"/"+_.UIHelper.tranNumber(Math.ceil(this.serRoleInfoModel.maxMp)),this.txtMp.node.active=this.serRoleInfoModel.maxMp>0,this.mpNode.active=this.serRoleInfoModel.maxMp>0,this.mpNode.width=this.serRoleInfoModel.currMp/this.serRoleInfoModel.maxMp*this.maxHpWidth,this.hpNode.width>this.maxHpWidth&&(this.hpNode.width=this.maxHpWidth),this.mpNode.width>this.maxHpWidth&&(this.mpNode.width=this.maxHpWidth),this.serRoleInfoModel.currHp<=0&&!this.isDead&&(y.default.instance.useSkillByPosition(y.default.instance.skillConfig.putonggongji_death,this.node.getPosition()),this.clearBuff(),this.node.active=!1,this.isDead=!0,0!=this.serRoleInfoModel.group&&C.default.instance.serverFightType==c.ServerFightType.TianGuan&&(h.TianGuanManager.instance.killNum+=1)),this.serRoleInfoModel.cid==Number(u.default.instance.roleId)?this.hpNode.getComponent(cc.Sprite).spriteFrame=this.hpNode.getComponent(s.SpriteFrameComponent).spriteFrameList[1]:this.hpNode.getComponent(cc.Sprite).spriteFrame=this.hpNode.getComponent(s.SpriteFrameComponent).spriteFrameList[0])},t.prototype.refreshFightFrame=function(e){void 0===e&&(e=0);var t=!1,n=l.MonsterConfig.getMonsterConfigById(this.serRoleInfoModel.cid);n&&1==n.m_type&&(t=!0),this.node.getComponent(cc.Sprite).spriteFrame=i.getFightFrame(e,this.serRoleInfoModel.type,this.serRoleInfoModel.prof,t,this.serRoleInfoModel.quality)},t.getFightFrame=function(e,t,n,o,a){var s;return void 0===o&&(o=!1),void 0===a&&(a=0),t==i.RoleType.Role||t==i.RoleType.PvpAttackRole||t==i.RoleType.PvpBeAttackRole?(n==c.GameConst.OCCUPATION.ZHAN_SHI?s=m.FightFrameRes.fight_frame[7]:n==c.GameConst.OCCUPATION.FA_SHI?s=m.FightFrameRes.fight_frame[6]:n==c.GameConst.OCCUPATION.DAO_SHI&&(s=m.FightFrameRes.fight_frame[5]),e>0&&(1==e?n==c.GameConst.OCCUPATION.ZHAN_SHI?s=m.FightFrameRes.fight_frame[12]:n==c.GameConst.OCCUPATION.FA_SHI?s=m.FightFrameRes.fight_frame[11]:n==c.GameConst.OCCUPATION.DAO_SHI&&(s=m.FightFrameRes.fight_frame[10]):2==e?n==c.GameConst.OCCUPATION.ZHAN_SHI?s=m.FightFrameRes.fight_frame[15]:n==c.GameConst.OCCUPATION.FA_SHI?s=m.FightFrameRes.fight_frame[14]:n==c.GameConst.OCCUPATION.DAO_SHI&&(s=m.FightFrameRes.fight_frame[13]):3==e&&(n==c.GameConst.OCCUPATION.ZHAN_SHI?s=m.FightFrameRes.fight_frame[18]:n==c.GameConst.OCCUPATION.FA_SHI?s=m.FightFrameRes.fight_frame[17]:n==c.GameConst.OCCUPATION.DAO_SHI&&(s=m.FightFrameRes.fight_frame[16])))):t==i.RoleType.Monster?o||a==c.GameConst.QUALITY.ORANGE?s=m.FightFrameRes.fight_frame[0]:a==c.GameConst.QUALITY.WHITE?s=m.FightFrameRes.fight_frame[1]:a==c.GameConst.QUALITY.GREEN?s=m.FightFrameRes.fight_frame[2]:a==c.GameConst.QUALITY.BLUE?s=m.FightFrameRes.fight_frame[3]:a==c.GameConst.QUALITY.PURPLE&&(s=m.FightFrameRes.fight_frame[4]):t!=i.RoleType.Summoned&&t!=i.RoleType.PvpAttackSummoned&&t!=i.RoleType.PvpBeAttackSummoned||(s=m.FightFrameRes.fight_frame[8]),s},t.prototype.move=function(e){e&&this.moveToRowCol(e.toX,e.toY)},t.prototype.attack=function(e){var t=this;if(e)if(0==e.skillId)for(var i=function(i){var o=n.serverFightView.getSerRolePrefabById(e.harmList[i].defId);n.scheduleOnce(function(){t.normalAttack(o,e.harmList[i])},.2)},n=this,o=0;o<e.harmList.length;o++)i(o);else{var a=[],s=[],r=this.serverFightView.getSerRolePrefabById(e.targetId);for(o=0;o<e.harmList.length;o++){var c=this.serverFightView.getSerRolePrefabById(e.harmList[o].defId);a.push(c),s.push(e.harmList[o])}r||(r=a[0]),this.useSkill(e.skillId,a,s,r)}},t.prototype.normalAttack=function(e,t){if(e){var n=i.getSideRole2Role(this,e),o=!1;switch(this.serRoleInfoModel.type){case i.RoleType.Monster:o=!0;break;case i.RoleType.Summoned:if(this.serRoleInfoModel.prof==c.GameConst.OCCUPATION.DAO_SHI)if(o=!0,this.getIsEquipSkin(f.SKINID.ZHAOHUANSHU_HuanLing,this.serRoleInfoModel.skinList)){var a=y.default.instance.skillConfig.putonggongji_leftUp;this.summonedLevel<10||(a=this.summonedLevel<=19?y.default.instance.skillConfig.shenshougongji_pro:y.default.instance.skillConfig.youhuozhiguang_pg_toleft_pro),y.default.instance.useSkill(a,this,[e],function(){},e)}else{a=y.default.instance.skillConfig.putonggongji_leftUp;this.summonedLevel<10||(this.summonedLevel<=19?(a=y.default.instance.skillConfig.shenshougongji,y.default.instance.useSkill(a,this,[e],function(){},e)):y.default.instance.useSkill(a,this,[e],function(){},e))}else if(this.serRoleInfoModel.prof==c.GameConst.OCCUPATION.FA_SHI)if(o=!0,this.getIsEquipSkin(f.SKINID.YOUHUOZHIGUANG_YueBai,this.serRoleInfoModel.skinList)){a=y.default.instance.skillConfig.putonggongji_leftUp;this.summonedLevel>=20&&(a=y.default.instance.skillConfig.youhuozhiguang_lpg_toleft_pro),y.default.instance.useSkill(a,this,[e],function(){},e)}else if(this.summonedLevel>=20){o=!1;var s=y.default.instance.skillConfig.yuanchenggongji;y.default.instance.useSkill(s,this,[e],function(){},e)}break;case i.RoleType.Role:o=!0,y.default.instance.useSkill(y.default.instance.skillConfig.putonggongji_leftUp,this,[e],function(){},e)}o&&this.playCommonAttackMv(n,e,t)}},t.prototype.useSkill=function(e,t,i,n){var o=this;void 0===n&&(n=null);var a;d.SkillConfig.getSkillConfigById(e,1);e==d.SkillConfig.SkillIdConfig.HuoQiuShu?a=y.default.instance.skillConfig.huoqiushu:e==d.SkillConfig.SkillIdConfig.DouQiHuTi?a=y.default.instance.skillConfig.zhenqihuti:e==d.SkillConfig.SkillIdConfig.YouHuoZhiGuang?this.serverFightView.isPlayZhaoHuan=!0:e==d.SkillConfig.SkillIdConfig.ZhiLiaoShu?a=y.default.instance.skillConfig.zhiYuShu:e==d.SkillConfig.SkillIdConfig.ZhaoHuanShu?this.serverFightView.isPlayZhaoHuan=!0:a=e==d.SkillConfig.SkillIdConfig.YinShen?y.default.instance.skillConfig.yinshenshu:this.getEffectId(e,this.serRoleInfoModel.skinList),a&&y.default.instance.useSkill(a,this,t,function(){for(var e=0;e<t.length;e++)o.beAttack(t[e],i[e])},n)},t.prototype.beAttack=function(e,t){var i=null;if(e&&e.serRoleInfoModel&&e.serRoleInfoModel.buffList)for(var n=0;n<e.serRoleInfoModel.buffList.length;n++)e.serRoleInfoModel.buffList[n].buffId==v.StatusBuffId.INVICIBLE&&e.serRoleInfoModel.prof>0&&(i=e.serRoleInfoModel.buffList[n]);if(e&&e.node){e.refresh();var o=e.node.width*(.5-e.node.anchorX),a=e.node.height*(.5-e.node.anchorY);i&&i.startTime+i.duration-p.ServerTime.getServerTime()>0?g.default.instance.showScoreEffect("m",g.default.ScoreType.Special,cc.v2(e.node.x+o,e.node.y+e.node.parent.y+a),.2,this.serverFightView.node):2==t.is_lucky?g.default.instance.showScoreEffect("#-"+t.harm,g.default.ScoreType.YaZhi,cc.v2(e.node.x+o,e.node.y+e.node.parent.y+a),.2,this.serverFightView.node):e.serRoleInfoModel.prof>0?1==t.is_lucky?g.default.instance.showScoreEffect("#-"+t.harm,g.default.ScoreType.XinYun,cc.v2(e.node.x+o,e.node.y+e.node.parent.y+a),.2,this.serverFightView.node):g.default.instance.showScoreEffect("-"+t.harm,g.default.ScoreType.JueSe,cc.v2(e.node.x+o,e.node.y+e.node.parent.y+a),.2,this.serverFightView.node):1==t.is_lucky?g.default.instance.showScoreEffect("#-"+t.harm,g.default.ScoreType.XinYun,cc.v2(e.node.x+o,e.node.y+e.node.parent.y+a),.2,this.serverFightView.node):g.default.instance.showScoreEffect("-"+t.harm,g.default.ScoreType.Guai,cc.v2(e.node.x+o,e.node.y+e.node.parent.y+a),.2,this.serverFightView.node)}},t.prototype.buffHarm=function(e){var t=this.node.width*(.5-this.node.anchorX),i=this.node.height*(.5-this.node.anchorY);e.harm<0?g.default.instance.showScoreEffect(""+e.harm,g.default.ScoreType.Guai,cc.v2(this.node.x+t,this.node.y+this.node.parent.y+i),.2,this.serverFightView.node):e.harm>0&&g.default.instance.showScoreEffect("+"+e.harm,g.default.ScoreType.Recover,cc.v2(this.node.x+t,this.node.y+this.node.parent.y+i),.2,this.serverFightView.node)},t.prototype.moveToRowCol=function(e,t){var i=C.default.instance.gameView.getGridPosition(e,t);this.gridRow=e,this.gridCol=t,this.serRoleInfoModel.curr_x=e,this.serRoleInfoModel.curr_y=t,cc.tween(this.node).to(.3,{position:i}).call(function(){}).start()},t.getSideRole2Role=function(e,t){var n=i.RoleSide.Left;return e&&t&&(n=e.gridRow==t.gridRow?e.gridCol>t.gridCol?i.RoleSide.Left:i.RoleSide.Right:e.gridCol==t.gridCol?e.gridRow>t.gridRow?i.RoleSide.Up:i.RoleSide.Down:e.gridRow>t.gridRow?e.gridCol>t.gridCol?i.RoleSide.LeftUp:i.RoleSide.RightUp:e.gridCol>t.gridCol?i.RoleSide.LeftDown:i.RoleSide.RightDown),n},t.prototype.appearMv=function(){this.node.scale=0,cc.tween(this.node).to(.5,{scale:1}).call(function(){}).start()},t.prototype.playCommonAttackMv=function(e,t,n){var o=this;if(void 0===t&&(t=null),void 0===n&&(n=null),this.node){var a=C.default.instance.gameView.getGridPosition(this.gridRow,this.gridCol);this.node.setPosition(a),this.nowRoleType==i.RoleType.Role&&(this.node.zIndex=999);var s=this.node.x,r=this.node.x,c=this.node.y,l=this.node.y;e==i.RoleSide.Up?(c=this.node.y-10,l=this.node.y+4):e==i.RoleSide.Down?(c=this.node.y+10,l=this.node.y-4):e==i.RoleSide.Left?(s=this.node.x+10,r=this.node.x-4):e==i.RoleSide.Right?(s=this.node.x-10,r=this.node.x+4):e==i.RoleSide.LeftDown?(s=this.node.x+10,c=this.node.y+10,r=this.node.x-4,l=this.node.y-4):e==i.RoleSide.LeftUp?(s=this.node.x+10,c=this.node.y-10,r=this.node.x-4,l=this.node.y+4):e==i.RoleSide.RightDown?(s=this.node.x-10,c=this.node.y+10,r=this.node.x+4,l=this.node.y-4):e==i.RoleSide.RightUp&&(s=this.node.x-10,c=this.node.y-10,r=this.node.x+4,l=this.node.y+4),cc.tween(this.node).to(.1,{position:cc.v2(s,c)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:cc.v2(r,l)},{easing:"bounceInOut"}).to(this.commonAttackTime,{position:a}).call(function(){t&&n&&o.beAttack(t,n)}).start()}},t.prototype.playTriggerSkill=function(e){var t=this.node.width*(.5-this.node.anchorX),i=this.node.height*(.5-this.node.anchorY);switch(e){case this.triggerSkillId.lingxi:g.default.instance.showSpecialScoreEffect("l",g.default.ScoreType.Special,cc.v2(this.node.x+t,this.node.y+this.node.parent.y+i),.2,this.serverFightView.node);break;case this.triggerSkillId.wanjun:g.default.instance.showSpecialScoreEffect("w",g.default.ScoreType.Special,cc.v2(this.node.x+t,this.node.y+this.node.parent.y+i),.2,this.serverFightView.node);break;case this.triggerSkillId.shenLi:g.default.instance.showSpecialScoreEffect("s",g.default.ScoreType.Special,cc.v2(this.node.x+t,this.node.y+this.node.parent.y+i),.2,this.serverFightView.node);break;case this.triggerSkillId.hushen:g.default.instance.showSpecialScoreEffect("h",g.default.ScoreType.Special,cc.v2(this.node.x+t,this.node.y+this.node.parent.y+i),.2,this.serverFightView.node)}},t.prototype.getEffectId=function(e,t){var i,n=f.default.getDefaultSkinConfig(e);n&&(i=n.effect);for(var o=0;o<t.length;o++){var a=f.default.getConfigById(t[o]);if(a.type_value==e)return i=a.effect}return i},t.prototype.getSkillLevel=function(e,t){for(var i=0,n=0;n<t.length;n++)if(t[n].skillId==e)return i=t[n].skillLevel;return i},t.prototype.getIsEquipSkin=function(e,t){return t.indexOf(e)>=0},t.prototype.clearBuff=function(){this.banyueEffect&&this.banyueEffect.destroy(),this.iceEffect&&this.iceEffect.destroy(),this.dizzyEffect&&this.dizzyEffect.destroy(),this.paralysisEffect&&this.paralysisEffect.destroy(),this.petrochemicalEffect&&this.petrochemicalEffect.destroy(),this.attrEffect&&this.attrEffect.destroy(),this.shidushu_effect&&this.shidushu_effect.destroy(),this.wujiEffect&&this.wujiEffect.destroy(),this.huoQiangEffect&&this.huoQiangEffect.destroy(),this.mofaDunEffect&&this.mofaDunEffect.destroy(),this.zhiliaoshuEffect&&this.zhiliaoshuEffect.destroy(),this.wudiEffect&&this.wudiEffect.destroy()},t.RoleType={Role:0,Monster:1,Summoned:2,PvpAttackRole:4,PvpBeAttackRole:5,PvpAttackSummoned:6,PvpBeAttackSummoned:7},t.RoleSide={Left:1,Right:2,Up:3,Down:4,LeftUp:5,RightUp:6,LeftDown:7,RightDown:8},o([M({type:cc.Label})],t.prototype,"txtName",void 0),o([M({type:cc.Label})],t.prototype,"txtHp",void 0),o([M({type:cc.Label})],t.prototype,"txtMp",void 0),o([M({type:cc.Node})],t.prototype,"hpNode",void 0),o([M({type:cc.Node})],t.prototype,"mpNode",void 0),t=i=o([I],t)}(a.default);i.default=w,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/MonsterConfig":"MonsterConfig","../config/SkillConfig":"SkillConfig","../config/SkinConfig":"SkinConfig","../manager/ScoreManager":"ScoreManager","../manager/TianGuanManager":"TianGuanManager","../model/RoleInfoModel":"RoleInfoModel","../model/ServerTime":"ServerTime","../prefab/FightFrameRes":"FightFrameRes","../prefab/GameManager":"GameManager","../utils/UIHelper":"UIHelper","./SerRoleInfoModel":"SerRoleInfoModel","./SerSkillEffectManager":"SerSkillEffectManager"}],SerSkillClipsManager:[function(e,t,i){"use strict";cc._RF.push(t,"17fccOEpm1G+rG6o7OOld9c","SerSkillClipsManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/NodePoolManager"),o=e("../config/SkillEffConfig"),a=e("../serverFight/SerSkillEffectManager"),s=e("./SkillClipsManager"),r=function(){function e(){}return e.initClipsConfig=function(){},e.prototype.getClipByName=function(e){return s.default.instance.getClipByName(e)},e.prototype.play=function(e,t,i){if(e&&e.skillEffectNode)if(cc.isValid(e.skillEffectNode,!0)||(e.skillEffectNode=n.default.Instance.instantiateRoleSkillEffectPrefabEx()),cc.isValid(e.skillEffectNode)){var o=e.skillEffectNode.getComponent(cc.Animation);o.currentClip&&o.currentClip.name!=t.name&&(o.stop(),o.removeClip(o.currentClip)),o.addClip(t),e.clip=t,i&&i.call(a.default.instance,e)}else i&&i.call(a.default.instance,e)},e.prototype.createSkillEffectNode=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0);var i=n.default.Instance.instantiateRoleSkillEffectPrefabEx(),o=.5;if(e){var a=i.getComponent(cc.Animation);a.currentClip&&a.currentClip.name!=e.name&&(a.stop(),a.removeClip(a.currentClip)),a.addClip(e),o=e.duration+.1}return t&&cc.tween(i).delay(o).call(function(){s.default.instance.backSkillEffNodes([i])}).start(),i},e.prototype.backSkillEffNodes=function(e){for(var t=0;t<e.length;t++){e[t].destroy()}e.length=0},e.prototype.loadClip=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=o.SkillEffConfig.getConfig(e);if(r){var c=r.aniname,l=r.path,d=this.getClipByName(c);if(d)t&&t.call(a.default.instance,d,i);else{var f=l+"/"+c;cc.loader.loadRes(f,cc.AnimationClip,function(e,n){e||(s.default.instance.setClipByName(n.name,n),t&&t.call(a.default.instance,n,i))})}}else console.log("not find skillEffId="+e)},e.prototype.playClipByClipInfo=function(e,t){var i=o.SkillEffConfig.getConfig(e.skilleffId);if(i){var a=i.aniname,r=i.path,c=this.getClipByName(a),l=this;if(e.skillEffectNode||(e.skillEffectNode=n.default.Instance.instantiateRoleSkillEffectPrefabEx()),c)l.play(e,c,t);else{var d=r+"/"+a;cc.loader.loadRes(d,cc.AnimationClip,function(i,n){i||(s.default.instance.setClipByName(n.name,n),l.play(e,n,t))})}}else console.log("not find skillEffId="+e.skilleffId)},e.instance=new e,e}();i.default=r,cc._RF.pop()},{"../base/NodePoolManager":"NodePoolManager","../config/SkillEffConfig":"SkillEffConfig","../serverFight/SerSkillEffectManager":"SerSkillEffectManager","./SkillClipsManager":"SkillClipsManager"}],SerSkillEffectManager:[function(e,t,i){"use strict";cc._RF.push(t,"f1679Ist7pEZ5++Gsh0wmaw","SerSkillEffectManager");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/Logger"),a=e("../../engine/MathUtils"),s=e("../config/GameConst"),r=e("../config/SkinConfig"),c=e("../manager/SerSkillClipsManager"),l=e("../manager/SkillClipsManager"),d=e("../prefab/GameManager"),f=e("../utils/MusicHelper"),g=e("./SerRolePrefab"),h=cc._decorator,u=h.ccclass,p=(h.property,function(){function e(){this.skillConfig={putonggongji:0,banyuewandao:1,zhiYuShu:2,zhiYuShu2:3,bingPaoXiao:4,bingPaoXiao2:5,cishajianshu:6,diYuLeiGuang:7,diYuLeiGuang2:8,gongshajianshu:9,huoqiangshu:10,huoqiangshu2:11,huoqiushu:12,leidianshu:13,leidianshu2:14,liehuojianfa:15,linghunhuofu:16,mofadun:17,mofadun2:18,shenshengzhanjiashu:19,shenshougongji:20,shidushu:21,shidushu2:22,yemanchongzhuang:23,yinshenshu:25,yinshenshu2:26,zhaohuan_kulu:27,zhaohuan_shenshou:28,zhenqihuti:29,wujizhenqi:30,youHuoZhiGuang:31,yuanchenggongji:32,yuanchenggongji2:33,cishajianshu2:34,linghunhuofu2:35,huoqiushu2:36,banyuewandao_effect2:37,huoqiangshu_effect2:39,huoqiangshu_effect2_2:40,huoqiangshu_effect2_3:41,shidushu_effect2:42,shidushu_effect2_2:43,shidushu_effect2_3:44,banyuewandao_effect3_1:45,banyuewandao_effect3_2:46,banyuewandao_effect3_3:47,banyuewandao_effect3_4:48,bingpaoxiao2_1:52,bingpaoxiao2_2:53,bingpaoxiao2_3:54,wujizhenqi1:55,wujizhenqi2:56,wujizhenqi3:57,liehuojianfa3_1:58,liehuojianfa3_2:59,putonggongji_death:60,putonggongji_down:61,putonggongji_left:62,putonggongji_leftDown:63,putonggongji_leftUp:64,fireDaoShi:65,fireFashi1:66,fireFashi2:67,fireZhanshi_leftup:68,fireZhanshi_left:69,fireZhanshi_leftdown:70,fireZhanshi_down:71,fireDead:72,cishajianshu_toDown:73,cishajianshu_toLeft:74,cishajianshu_toLeftDown:75,cishajianshu_toLeftUp:76,liehuojianfa_toDown:77,liehuojianfa_toLeft:78,liehuojianfa_toLeftDown:79,liehuojianfa_toLeftUp:80,liehuojianfa_pro_toDown:81,liehuojianfa_pro_toLeft:82,liehuojianfa_pro_toLeftDown:83,liehuojianfa_pro_toLeftUp:84,yemanchongzhuang_pro_toDown:85,yemanchongzhuang_pro_toLeft:86,yemanchongzhuang_pro_toLeftDown:87,yemanchongzhuang_pro_toLeftUp:88,shenshougongji_pro:89,zhaohuan_shenshou_pro:90,zhaohuan_kulu_pro:91,youhuozhiguang_pg_toleft_pro:92,youhuozhiguang_pg_toleftDown_pro:93,youhuozhiguang_pg_toleftUp_pro:94,youhuozhiguang_pg_toup_pro:95,youhuozhiguang_lpg_hurt_pro:96,youhuozhiguang_lpg_toleft_pro:97,youhuozhiguang_lpg_toleftDown_pro:98,youhuozhiguang_lpg_toleftup_pro:99,youhuozhiguang_lpg_toup_pro:100,youhuozhiguang_pro:101,yun:102,debuff_shihua:103,debuff_ice:104,debuff_mabi:105,rebirth:106,wudi:107,baozhu:108,baozhuFire:109,banyueBuff_big:110,shiduShuBuff_big:111,huoqiangBuff_big:112,tx_cishajianshu_pro_toLeft:113,tx_cishajianshu_pro_toLeftDown:114,tx_cishajianshu_pro_toLeftUp:115,tx_cishajianshu_pro_toUp:116,tx_leidianshu_qishou:117,tx_leidianshu_luoxia:118,tx_linghunhuofu_qishou:119,tx_linghunhuofu_shouji:120,debuff_shihua_big:121,debuff_ice_big:122,debuff_mabi_big:123,skin_2_banyue_qishou:124,skin_2_banyue_shouji:125,skin_2_huoqiang_shifa:126,skin_2_huoqiang_chixu:127,skin_2_huoqiang_chixu_boss:128,skin_2_shidu_chixu:129,skin_2_shidu_chixu_boss:130,skin_2_shidu_shifa:131,skin_2_shidu_shouji:132,skin_3_cisha_up:133,skin_3_cisha_down:134,skin_3_cisha_left:135,skin_3_cisha_right:136,skin_3_cisha_leftup:137,skin_3_cisha_rightup:138,skin_3_cisha_leftDown:139,skin_3_cisha_rightDown:140,skin_3_bingPaoxiao_qishou:141,skin_3_bingPaoxiao_shouji:142,skin_3_linghunhuofu_qishou:143,skin_3_linghunhuofu_shouji:144,yamaxun_shifa:145,skin_3_liehuo_leftup:146,skin_3_liehuo_down:147,skin_3_liehuo_left:148,skin_3_liehuo_right:149,skin_3_liehuo_rightup:150,skin_3_liehuo_leftDown:151,skin_3_liehuo_rightDown:152,skin_3_liehuo_up:153,skin_2_mofadun:154,skin_2_shenshengzhanjiashu:155,bagua_qishou:156,bagua_cixu:157,bagua_jieshu:158},cc.sskmgr=this}var t;return t=e,e.prototype.init=function(e,t){this.demoEffect=e,this.serverFightView=t},e.prototype.useSkill=function(e,t,i,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.demoEffect=t.node.parent.parent.getChildByName("skill").getChildByName("effect"),e==this.skillConfig.putonggongji_leftUp?this.playPuTongGongJi(i,t,n,o):e==this.skillConfig.yuanchenggongji?this.playYuanChengGongJi(i,t,n,o):e==this.skillConfig.cishajianshu?this.playCiShaJianShu(i,t,n,o):e==this.skillConfig.tx_cishajianshu_pro_toLeft?this.playCiShaJianShu_pro(i,t,n,o):e==this.skillConfig.banyuewandao?this.playBanYueWanDao(i,t,n,o):e==this.skillConfig.banyuewandao_effect2?this.playBanyuewandao_pro_1_1(i,t,n,o):e==this.skillConfig.yemanchongzhuang?this.playYeManChongZhuang(i,t,n,o):e==this.skillConfig.yemanchongzhuang_pro_toDown?this.playYeManChongZhuang_pro(i,t,n,o):e==this.skillConfig.zhenqihuti?this.playZhenQiHuTi(i,t,n,o):e==this.skillConfig.liehuojianfa?this.playLieHuoJianFa(i,t,n,o):e==this.skillConfig.liehuojianfa3_1?this.playLieHuoJianFa_pro(i,t,n,o):e==this.skillConfig.huoqiushu?this.playHuoQiuShu(i,t,n,o):e==this.skillConfig.leidianshu?this.playLeiDianShu(i,t,n,o):e==this.skillConfig.tx_leidianshu_qishou?this.playLeiDianShu_pro(i,t,n,o):e==this.skillConfig.huoqiangshu?this.playHuoQiangShu(i,t,n,o):e==this.skillConfig.huoqiangshu_effect2?this.playHuoQiangShu_pro_1(i,t,n,o):e==this.skillConfig.youHuoZhiGuang?this.playYouHuoZhiGuang(i,t,n,o):e==this.skillConfig.youhuozhiguang_pro?this.playYouHuoZhiGuang_pro(i,t,n,o):e==this.skillConfig.youhuozhiguang_pg_toleft_pro?this.playYouhuozhiguang_pg_pro(i,t,n,o):e==this.skillConfig.youhuozhiguang_lpg_toleft_pro?this.playYouhuozhiguang_lpg_pro(i,t,n,o):e==this.skillConfig.mofadun?this.playMoFaDun(i,t,n,o):e==this.skillConfig.bingPaoXiao?this.playBingPaoXiao(i,t,n,o):e==this.skillConfig.bingpaoxiao2_1?this.playBingPaoXiao_pro_1(i,t,n,o):e==this.skillConfig.zhiYuShu?this.playZhiYuShu(i,t,n,o):e==this.skillConfig.linghunhuofu?this.playLingHunHuoFu(i,t,n,o):e==this.skillConfig.tx_linghunhuofu_qishou?this.playLingHunHuoFu_pro(i,t,n,o):e==this.skillConfig.shidushu?this.playShiDuShou(i,t,n,o):e==this.skillConfig.shidushu_effect2?this.playShiduShu_pro_1(i,t,n,o):e==this.skillConfig.zhaohuan_kulu?this.playKuLu(i,t,n,o):e==this.skillConfig.zhaohuan_kulu_pro?this.playKuLu_pro(i,t,n,o):e==this.skillConfig.zhaohuan_shenshou?this.playShenShou(i,t,n,o):e==this.skillConfig.zhaohuan_shenshou_pro?this.playShenShou_pro(i,t,n,o):e==this.skillConfig.yinshenshu?this.playYinShenShu(i,t,n,o):e==this.skillConfig.shenshengzhanjiashu?this.playShenShengZhanJiaShu(i,t,n,o):e==this.skillConfig.wujizhenqi?this.playWuJiZhenQi(i,t,n,o):e==this.skillConfig.wujizhenqi1?this.playWuJiZhenQi_pro_1(i,t,n,o):e==this.skillConfig.shenshougongji?this.playShenShouGongJi(i,t,n,o):e==this.skillConfig.shenshougongji_pro?this.playShenShouGongJi_pro(i,t,n,o):e==this.skillConfig.fireDaoShi?this.playFire_daoshi(i,t,n,o):e==this.skillConfig.fireFashi1?this.playFire_fashi(i,t,n,o):e==this.skillConfig.fireZhanshi_leftup?this.playFire_zhanshi(i,t,n,o):e==this.skillConfig.baozhu?this.playBaoZhu(i,t,n,o):e==this.skillConfig.skin_2_banyue_qishou?this.playBanYue_skin_2_qishou(i,t,n):e==this.skillConfig.skin_2_huoqiang_shifa?this.playHuoQiang_skin_2_qishou(i,t,n):e==this.skillConfig.skin_2_shidu_shifa?this.playShiDuShu_skin2_qishou(i,t,n):e==this.skillConfig.skin_3_cisha_up?this.playcisha_skin3(i,t,n):e==this.skillConfig.skin_3_bingPaoxiao_qishou?this.playbingpaoxiao_skin3_qishou(i,t,n):e==this.skillConfig.skin_3_linghunhuofu_qishou?this.playlinghunhuofu_skin3_qishou(i,t,n):e==this.skillConfig.skin_3_liehuo_leftup?this.playLieHuo_skin3(i,t,n):e==this.skillConfig.skin_2_shenshengzhanjiashu&&this.playShenShengZhanJiaShu_skin2(i,t,n)},e.prototype.useSkillByPosition=function(e,t){e==this.skillConfig.putonggongji_death?this.playPuTongGongDead(t):e==this.skillConfig.fireDead&&this.playFireDead(t)},e.prototype.playPuTongGongJi=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_attack();for(var o=0;o<e.length;o++){var a=e[o];if(a&&a.node){var s=g.default.getSideRole2Role(t,a),r=c.default.instance.createSkillEffectNode();r.setPosition(d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol)),r.parent=this.demoEffect.parent,r.active=!0;var h,u=a.node.getPosition();s==g.default.RoleSide.LeftUp&&(h=this.skillConfig.putonggongji_leftUp,u.x+=40,u.y-=40),s==g.default.RoleSide.Down&&(h=this.skillConfig.putonggongji_down,u.y+=50),s==g.default.RoleSide.Left&&(h=this.skillConfig.putonggongji_left,u.x+=50),s==g.default.RoleSide.LeftDown&&(h=this.skillConfig.putonggongji_leftDown,u.x+=40,u.y+=40),s==g.default.RoleSide.RightUp&&(h=this.skillConfig.putonggongji_leftUp,r.scaleX=-1,u.x-=40,u.y-=40),s==g.default.RoleSide.RightDown&&(h=this.skillConfig.putonggongji_leftDown,r.scaleX=-1,u.x-=40,u.y+=40),s==g.default.RoleSide.Up&&(h=this.skillConfig.putonggongji_down,r.scaleY=-1,u.y-=50),s==g.default.RoleSide.Right&&(r.scaleX=-1,u.x-=50);var p=new l.MySkillClipInfo;p.beAttackRole=a,p.attackRole=t,p.callBack=i,p.skilleffId=h,p.skillEffectNode=r,p.params=u,c.default.instance.playClipByClipInfo(p,this.playPuTongGongJi_back)}}},e.prototype.playPuTongGongJi_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode,n=e.callBack,o=e.params,a=i.getComponent(cc.Animation);setTimeout(function(){a.play(t.name,0),cc.tween(i).to(.1,{position:o}).delay(t.duration-.1).call(function(){i.destroy(),n&&n()}).start()},30)},e.prototype.playYuanChengGongJi=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.yuanchenggongji,this.playYuanChengGongJi_back,e,t,i)},e.prototype.playYuanChengGongJi_back=function(e,t){for(var i=this,n=t[0],o=t[1],s=t[2],r=e.duration,l=[],f=0;f<n.length;f++){var g=n[f];if(g&&g.node){var h=a.default.p2pRad(o.node.getPosition(),g.node.getPosition()),u=c.default.instance.createSkillEffectNode(e);l.push(u);var p=a.default.radiansToDegrees(h);u.angle=p,u.parent=this.demoEffect.parent,u.active=!0,u.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),u.getComponent(cc.Animation).play(e.name,0),cc.tween(u).to(.3,{position:g.node.getPosition()}).call(function(){i.playYuanChengGongJi2(n,o,s)}).start()}}cc.tween(o.node).delay(r).call(function(){s&&s(),c.default.instance.backSkillEffNodes(l)}).start()},e.prototype.playYuanChengGongJi2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.yuanchenggongji2,this.playYuanChengGongJi2_back,e,t,i)},e.prototype.playYuanChengGongJi2_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node){var l=c.default.instance.createSkillEffectNode(e);a.push(l),l.parent=this.demoEffect.parent,l.active=!0;var f=d.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol);l.setPosition(f.x+r.node.width*(.5-r.node.anchorX),f.y+r.node.height*(.5-r.node.anchorY)),l.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(o).call(function(){c.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playFireDead=function(e){c.default.instance.loadClip(this.skillConfig.fireDead,this.playFireDead_back,e)},e.prototype.playFireDead_back=function(e,t){var i=t[0],n=c.default.instance.createSkillEffectNode(e);n.parent=this.demoEffect.parent,n.active=!0,n.setPosition(i),n.getComponent(cc.Animation).play(e.name,0),cc.tween(n).delay(e.duration).call(function(){n.destroy()}).start()},e.prototype.playPuTongGongDead=function(e){c.default.instance.loadClip(this.skillConfig.putonggongji_death,this.playPuTongGongDead_back,e)},e.prototype.playPuTongGongDead_back=function(e,t){var i=t[0],n=c.default.instance.createSkillEffectNode(e);n.parent=this.demoEffect.parent,n.active=!0,n.setPosition(i),n.getComponent(cc.Animation).play(e.name,0),e.duration,cc.tween(n).delay(e.duration).call(function(){n.destroy()}).start()},e.prototype.playCiShaJianShu=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_cishajianshu();for(var o=g.default.getSideRole2Role(t,n),a=0;a<e.length;a++){var s=e[a];if(s&&s.node){var r=s.node.getPosition();t.playCommonAttackMv(o);var h=c.default.instance.createSkillEffectNode();h.anchorY=.5,h.anchorX=.5,o==g.default.RoleSide.LeftUp||o==g.default.RoleSide.LeftDown||o==g.default.RoleSide.Left||o==g.default.RoleSide.Down?h.scaleX=1:h.scaleX=-1,o==g.default.RoleSide.Up&&(h.scaleX=-1,h.scaleY=-1),o==g.default.RoleSide.Down&&(h.scaleX=1,h.scaleY=1),h.parent=this.demoEffect.parent,h.active=!0;var u=d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);h.x=u.x+40,h.y=u.y+40;var p=void 0;switch(o){case g.default.RoleSide.LeftUp:case g.default.RoleSide.RightUp:p=this.skillConfig.cishajianshu_toLeftUp;break;case g.default.RoleSide.LeftDown:case g.default.RoleSide.RightDown:p=this.skillConfig.cishajianshu_toLeftDown;break;case g.default.RoleSide.Down:case g.default.RoleSide.Up:p=this.skillConfig.cishajianshu_toDown,h.anchorY=.3;break;case g.default.RoleSide.Left:case g.default.RoleSide.Right:p=this.skillConfig.cishajianshu_toLeft,h.anchorX=.2}var m=new l.MySkillClipInfo;m.beAttackRole=s,m.attackRole=t,m.callBack=i,m.skilleffId=p,m.skillEffectNode=h,m.params=r,c.default.instance.playClipByClipInfo(m,this.playCiShaJianShu_back)}}cc.tween(t.node).delay(0).call(function(){i&&i()}).start()},e.prototype.playCiShaJianShu_back=function(e){var t=e.beAttackRole,i=(e.attackRole,e.clip),n=e.skillEffectNode,o=(e.callBack,n.getComponent(cc.Animation)),a=e.params;o.play(i.name,0),t&&t.node?cc.tween(n).delay(.1).to(.1,{position:a}).delay(i.duration-.2).call(function(){n.destroy()}).start():n.destroy()},e.prototype.playCiShaJianShu_pro=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_cishajianshu();for(var o=g.default.getSideRole2Role(t,n),a=0;a<e.length;a++){var s=e[a];if(s&&s.node){var r=s.node.getPosition();t.playCommonAttackMv(o);var h=c.default.instance.createSkillEffectNode();h.anchorY=.5,h.anchorX=.5,o==g.default.RoleSide.LeftUp||o==g.default.RoleSide.LeftDown||o==g.default.RoleSide.Left||o==g.default.RoleSide.Up?h.scaleX=1:h.scaleX=-1,o==g.default.RoleSide.Up&&(h.scaleY=1),o==g.default.RoleSide.Down&&(h.scaleY=-1),h.parent=this.demoEffect.parent,h.active=!0;var u=d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);h.x=u.x+40,h.y=u.y+40;var p=void 0;switch(o){case g.default.RoleSide.LeftUp:case g.default.RoleSide.RightUp:p=this.skillConfig.tx_cishajianshu_pro_toLeftUp,h.anchorX=.3,h.anchorY=.25;break;case g.default.RoleSide.LeftDown:case g.default.RoleSide.RightDown:p=this.skillConfig.tx_cishajianshu_pro_toLeftDown,h.anchorX=.65,h.anchorY=.35;break;case g.default.RoleSide.Down:case g.default.RoleSide.Up:p=this.skillConfig.tx_cishajianshu_pro_toUp,h.anchorX=.3,h.anchorY=.35;break;case g.default.RoleSide.Left:case g.default.RoleSide.Right:p=this.skillConfig.tx_cishajianshu_pro_toLeft,h.anchorY=.2}var m=new l.MySkillClipInfo;m.beAttackRole=s,m.attackRole=t,m.callBack=i,m.skilleffId=p,m.skillEffectNode=h,m.params=r,c.default.instance.playClipByClipInfo(m,this.playCiShaJianShu_pro_back)}}cc.tween(t.node).delay(0).call(function(){i&&i()}).start()},e.prototype.playCiShaJianShu_pro_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode,n=(e.callBack,e.params);i.getComponent(cc.Animation).play(t.name,0),cc.tween(i).delay(.1).to(.1,{position:n}).delay(t.duration-.2).call(function(){i.destroy()}).start()},e.prototype.playBanYueWanDao=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.banyuewandao,this.playBanYueWanDao_back,e,t,i)},e.prototype.playBanYueWanDao_back=function(e,t){var i=t[0],n=t[1],o=t[2];f.MusicHelper.play_banyuewandao();for(var a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var g=c.default.instance.createSkillEffectNode(e);s.push(g),g.parent=this.demoEffect.parent,g.active=!0;var h=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol);g.setPosition(h.x+l.node.width*(.5-l.node.anchorX),h.y+l.node.height*(.5-l.node.anchorY)),g.getComponent(cc.Animation).play(e.name,0),cc.tween(g).delay(e.duration).call(function(){}).start()}}cc.tween(n).delay(a-.1).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playBanyuewandao_pro_1_1=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.banyuewandao_effect3_1,this.playBanyuewandao_pro_1_1_back,e,t,i)},e.prototype.playBanyuewandao_pro_1_1_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_banyuewandao();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playBanyuewandao_pro_1_2(n,o,a)}).start()},e.prototype.playBanyuewandao_pro_1_2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.banyuewandao_effect3_2,this.playBanyuewandao_pro_1_2_back,e,t,i)},e.prototype.playBanyuewandao_pro_1_2_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],l=0;l<n.length;l++){var d=n[l];if(d&&d.node){var f=c.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node;var g=new cc.Vec2(0,0);f.setPosition(g.x+d.node.width*(.5-d.node.anchorX),g.y+d.node.height*(.5-d.node.anchorY)),f.active=!0,f.getComponent(cc.Animation).play(e.name,0),s=e.duration}}cc.tween(o.node).delay(s).call(function(){i.playBanyuewandao_pro_1_3(n,o,a),i.playBanyuewandao_pro_1_4(n,o,a),c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playBanyuewandao_pro_1_3=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.banyuewandao_effect3_3,this.playBanyuewandao_pro_1_3_back,e,t,i)},e.prototype.playBanyuewandao_pro_1_3_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node){var l=c.default.instance.createSkillEffectNode(e);l.parent=r.node;var d=new cc.Vec2(0,0);l.setPosition(d.x+r.node.width*(.5-r.node.anchorX),d.y+r.node.height*(.5-r.node.anchorY)),l.active=!0,l.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(o).call(function(){c.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playBanyuewandao_pro_1_4=function(e,t,i,n){void 0===n&&(n=null);for(var o=0;o<e.length;o++){var a=e[o];if(a&&a.node){a.banyueEffect&&(a.banyueEffect.destroy(),a.banyueEffect=null);var r=c.default.instance.createSkillEffectNode();r.parent=a.node;var f=new cc.Vec2(0,0);r.setPosition(f.x+a.node.width*(.5-a.node.anchorX),f.y+a.node.height*(.5-a.node.anchorY)),r.active=!0;var g;g=a.serRoleInfoModel.cid==s.GameConst.SPECIALBOSSID.WORLDBOSSID||a.serRoleInfoModel.cid==d.default.instance.FightBossId?this.skillConfig.banyueBuff_big:this.skillConfig.banyuewandao_effect3_4,a.banyueEffect=r;var h=new l.MySkillClipInfo;h.beAttackRole=a,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=r,h.params=g,c.default.instance.playClipByClipInfo(h,this.playBanyuewandao_pro_1_4_back)}}i&&i()},e.prototype.playBanyuewandao_pro_1_4_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0)},e.prototype.playBanYue_skin_2_qishou=function(e,t,i){c.default.instance.loadClip(this.skillConfig.skin_2_banyue_qishou,this.playBanYue_skin_2_qishou_back,e,t,i)},e.prototype.playBanYue_skin_2_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_banyuewandao();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playBanYue_skin_2_shouji(n,o,a)}).start()},e.prototype.playBanYue_skin_2_shouji=function(e,t,i){c.default.instance.loadClip(this.skillConfig.skin_2_banyue_shouji,this.playBanYue_skin_2_shouji_back,e,t,i)},e.prototype.playBanYue_skin_2_shouji_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],l=0;l<n.length;l++){var d=n[l];if(d&&d.node){var f=c.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node;var g=new cc.Vec2(0,0);f.setPosition(g.x+d.node.width*(.5-d.node.anchorX),g.y+d.node.height*(.5-d.node.anchorY)),f.active=!0,f.getComponent(cc.Animation).play(e.name,0),s=e.duration}}cc.tween(o.node).delay(s).call(function(){i.playBanyuewandao_pro_1_4(n,o,a),c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playYeManChongZhuang=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.yemanchongzhuang,this.playYeManChongZhuang_back,e,t,i,n)},e.prototype.playYeManChongZhuang_back=function(e,t){var i=t[0],n=t[1],a=t[2],s=t[3];f.MusicHelper.play_yemanchongzhuang(),o.Logger.log("\u91ce\u86ee\u51b2\u649e===",i);for(var r=g.default.getSideRole2Role(n,s),l=e.duration,h=[],u=0;u<i.length;u++){var p=i[u];if(o.Logger.log("\u91ce\u86ee\u51b2\u649e==11=",p,p.node),p&&p.node){var m=c.default.instance.createSkillEffectNode(e);h.push(m),m.scaleX=1,n.playCommonAttackMv(r),r==g.default.RoleSide.LeftUp?m.angle=-30:r==g.default.RoleSide.Up?m.angle=-90:r==g.default.RoleSide.RightUp?(m.scaleX=-1,m.angle=30):r==g.default.RoleSide.Down?(m.scaleX=-1,m.angle=-90):r==g.default.RoleSide.Right?m.scaleX=-1:r==g.default.RoleSide.LeftDown?m.angle=30:r==g.default.RoleSide.RightDown?(m.scaleX=-1,m.angle=-30):g.default.RoleSide.Left,m.parent=this.demoEffect.parent,m.active=!0,m.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol));var C=p.node.getPosition();r==g.default.RoleSide.LeftUp&&(C.x+=50,C.y-=40),r==g.default.RoleSide.Down&&(C.y+=50),r==g.default.RoleSide.Left&&(C.x+=50),r==g.default.RoleSide.LeftDown&&(C.x+=50,C.y+=40),r==g.default.RoleSide.RightUp&&(m.scaleX=-1,C.x-=50,C.y-=40),r==g.default.RoleSide.RightDown&&(m.scaleX=-1,C.x-=50,C.y+=40),r==g.default.RoleSide.Up&&(m.scaleY=-1,C.y-=50),r==g.default.RoleSide.Right&&(m.scaleX=-1,C.x-=50),m.getComponent(cc.Animation).play(e.name,0),l=e.duration,cc.tween(m).delay(.1).to(.1,{position:C}).delay(e.duration-.1).call(function(){}).start()}}cc.tween(n.node).delay(l).call(function(){a&&a(),c.default.instance.backSkillEffNodes(h)}).start()},e.prototype.playYeManChongZhuang_pro=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_yemanchongzhuang();for(var o=g.default.getSideRole2Role(t,n),a=0;a<e.length;a++){var s=e[a];if(s&&s.node){var r=c.default.instance.createSkillEffectNode();r.scaleX=1,t.playCommonAttackMv(o),r.parent=this.demoEffect.parent,r.active=!0,r.setPosition(d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol));var h=s.node.getPosition();o==g.default.RoleSide.LeftUp&&(h.x+=30,h.y-=20),o==g.default.RoleSide.Down&&(h.y+=30),o==g.default.RoleSide.Left&&(h.x+=30),o==g.default.RoleSide.LeftDown&&(h.x+=30,h.y+=20),o==g.default.RoleSide.RightUp&&(r.scaleX=-1,h.x-=30,h.y-=20),o==g.default.RoleSide.RightDown&&(r.scaleX=-1,h.x-=30,h.y+=20),o==g.default.RoleSide.Up&&(r.scaleY=-1,h.y-=30),o==g.default.RoleSide.Right&&(r.scaleX=-1,h.x-=30);var u=void 0;switch(o){case g.default.RoleSide.LeftUp:case g.default.RoleSide.RightUp:u=this.skillConfig.yemanchongzhuang_pro_toLeftUp;break;case g.default.RoleSide.LeftDown:case g.default.RoleSide.RightDown:u=this.skillConfig.yemanchongzhuang_pro_toLeftDown;break;case g.default.RoleSide.Down:case g.default.RoleSide.Up:u=this.skillConfig.yemanchongzhuang_pro_toDown;break;case g.default.RoleSide.Left:case g.default.RoleSide.Right:u=this.skillConfig.yemanchongzhuang_pro_toLeft}var p=new l.MySkillClipInfo;p.beAttackRole=s,p.attackRole=t,p.callBack=i,p.skilleffId=u,p.skillEffectNode=r,p.params=h,c.default.instance.playClipByClipInfo(p,this.playYeManChongZhuang_pro_back)}}cc.tween(t.node).delay(0).call(function(){i&&i()}).start()},e.prototype.playYeManChongZhuang_pro_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode,n=(e.callBack,i.getComponent(cc.Animation)),o=e.params;n.play(t.name,0),cc.tween(i).delay(.1).to(.05,{position:o}).delay(t.duration-.1).call(function(){i.destroy()}).start()},e.prototype.playZhenQiHuTi=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.zhenqihuti,this.playZhenQiHuTi_back,e,t,i)},e.prototype.playZhenQiHuTi_back=function(e,t){var i=t[0],n=t[1],a=t[2];o.Logger.log("serverFight=====\u4f7f\u7528\u6280\u80fd=== 106====",i,n);var s=e.duration,r=[],l=n;if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).to(.1,{position:l.node.getPosition()}).delay(e.duration-.1).call(function(){}).start(),cc.tween(n.node).delay(s).call(function(){a&&a(),c.default.instance.backSkillEffNodes(r)}).start()}},e.prototype.playLieHuoJianFa=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_liehuojianfa(),o.Logger.log("\u70c8\u706b\u5251\u6cd5===",e);for(var a=g.default.getSideRole2Role(t,n),s=0;s<e.length;s++){var r=e[s];if(o.Logger.log("\u70c8\u706b\u5251\u6cd5==11=",r,r.node),r&&r.node){t.playCommonAttackMv(a);var h=c.default.instance.createSkillEffectNode();a==g.default.RoleSide.LeftUp||a==g.default.RoleSide.LeftDown||a==g.default.RoleSide.Left||a==g.default.RoleSide.Down?h.scaleX=1:h.scaleX=-1,a==g.default.RoleSide.Up&&(h.scaleX=-1,h.scaleY=-1),a==g.default.RoleSide.Down&&(h.scaleX=1,h.scaleY=1),h.parent=this.demoEffect.parent,h.active=!0;var u=d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);h.x=u.x,h.y=u.y;var p=void 0;switch(g.default,a){case g.default.RoleSide.LeftUp:case g.default.RoleSide.RightUp:p=this.skillConfig.liehuojianfa_toLeftUp;break;case g.default.RoleSide.LeftDown:case g.default.RoleSide.RightDown:p=this.skillConfig.liehuojianfa_toLeftDown;break;case g.default.RoleSide.Down:case g.default.RoleSide.Up:p=this.skillConfig.liehuojianfa_toDown;break;case g.default.RoleSide.Left:case g.default.RoleSide.Right:p=this.skillConfig.liehuojianfa_toLeft}var m=new l.MySkillClipInfo;m.beAttackRole=r,m.attackRole=t,m.callBack=i,m.skilleffId=p,m.skillEffectNode=h,c.default.instance.playClipByClipInfo(m,this.playLieHuoJianFa_back)}}cc.tween(t.node).delay(0).call(function(){i&&i()}).start()},e.prototype.playLieHuoJianFa_back=function(e){var t=e.beAttackRole,i=(e.attackRole,e.clip),n=e.skillEffectNode;e.callBack;n.getComponent(cc.Animation).play(i.name,0),cc.isValid(t.node)?cc.tween(n).delay(.15).to(.1,{position:t.node.getPosition()}).delay(i.duration-.3).call(function(){n.destroy()}).start():n.destroy()},e.prototype.playLieHuoJianFa_pro=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_liehuojianfa();for(var o=g.default.getSideRole2Role(t,n),a=0;a<e.length;a++){var s=e[a];if(s){t.playCommonAttackMv(o);var r=c.default.instance.createSkillEffectNode(),h=void 0;r.scaleX=1,r.scaleY=1;var u=d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);switch(r.x=u.x,r.y=u.y,o){case g.default.RoleSide.LeftUp:h=this.skillConfig.liehuojianfa_pro_toLeftUp,r.y=u.y+70,r.x=u.x-30;break;case g.default.RoleSide.RightUp:h=this.skillConfig.liehuojianfa_pro_toLeftUp,r.scaleX=-1,r.y=u.y+70,r.x=u.x+30;break;case g.default.RoleSide.LeftDown:h=this.skillConfig.liehuojianfa_pro_toLeftDown,r.y=u.y-30,r.x=u.x-50;break;case g.default.RoleSide.RightDown:h=this.skillConfig.liehuojianfa_pro_toLeftDown,r.scaleX=-1,r.y=u.y-30,r.x=u.x+50;break;case g.default.RoleSide.Down:h=this.skillConfig.liehuojianfa_pro_toDown,r.y=u.y-50;break;case g.default.RoleSide.Up:h=this.skillConfig.liehuojianfa_pro_toDown,r.scaleY=-1,r.y=u.y+50;break;case g.default.RoleSide.Left:h=this.skillConfig.liehuojianfa_pro_toLeft,r.x=u.x-60;break;case g.default.RoleSide.Right:h=this.skillConfig.liehuojianfa_pro_toLeft,r.scaleX=-1,r.x=u.x+60}r.parent=this.demoEffect.parent,r.active=!0;var p=new l.MySkillClipInfo;p.beAttackRole=s,p.attackRole=t,p.callBack=i,p.skilleffId=h,p.skillEffectNode=r,p.params=e,c.default.instance.playClipByClipInfo(p,this.playLieHuoJianFa_pro_back)}}cc.tween(t.node).delay(0).call(function(){i&&i()}).start()},e.prototype.playLieHuoJianFa_pro_back=function(e){var t=this,i=(e.beAttackRole,e.attackRole),n=e.clip,o=e.skillEffectNode,a=e.callBack,s=e.params;o.getComponent(cc.Animation).play(n.name,0),cc.tween(o).delay(n.duration).call(function(){o.destroy(),t.playLieHuoJianFa_pro_1(s,i,a)}).start()},e.prototype.playLieHuoJianFa_pro_1=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.liehuojianfa3_2,this.playLieHuoJianFa_pro_1_back,e,t,i)},e.prototype.playLieHuoJianFa_pro_1_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node){var l=c.default.instance.createSkillEffectNode(e);a.push(l),l.parent=this.demoEffect.parent,l.active=!0;var f=d.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol),g=r.node.width*(.5-r.node.anchorX),h=r.node.height*(.5-r.node.anchorY);l.setPosition(f.x+g,f.y+h+20),l.getComponent(cc.Animation).play(e.name,0),o=e.duration}}cc.tween(n.node).delay(o).call(function(){c.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playLingHunHuoFu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.linghunhuofu,this.playLingHunHuoFu_back,e,t,i)},e.prototype.playLingHunHuoFu_back=function(e,t){var i=this,n=t[0],o=t[1],s=t[2];f.MusicHelper.play_LingHunHuoFu();for(var r=[],l=0;l<n.length;l++){var g=n[l];if(g&&g.node&&o&&o.node){var h=c.default.instance.createSkillEffectNode(e);r.push(h);var u=a.default.p2pRad(o.node.getPosition(),g.node.getPosition()),p=a.default.radiansToDegrees(u);h.angle=p-90,h.parent=this.demoEffect.parent,h.active=!0,h.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),h.getComponent(cc.Animation).play(e.name,0);var m=d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol),C=g.node.getPosition(),_=cc.v2((m.x+C.x)/2,(m.y+C.y)/2);cc.tween(h).to(.1,{position:_}).call(function(){h.anchorY=.75}).to(.1,{position:C}).delay(.1).call(function(){i.playLingHunHuoFu2(n,o,s)}).start()}}cc.tween(o.node).delay(.2).call(function(){s&&s(),c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playLingHunHuoFu2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.linghunhuofu2,this.playLingHunHuoFu2_back,e,t,i)},e.prototype.playLingHunHuoFu2_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node){var l=c.default.instance.createSkillEffectNode(e);a.push(l),l.parent=this.demoEffect.parent,l.active=!0;var f=d.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol),g=r.node.width*(.5-r.node.anchorX),h=r.node.height*(.5-r.node.anchorY);l.setPosition(f.x+g,f.y+h),l.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(o).call(function(){c.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playLingHunHuoFu_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.tx_linghunhuofu_qishou,this.playLingHunHuoFu_pro_back,e,t,i)},e.prototype.playLingHunHuoFu_pro_back=function(e,t){var i=this,n=t[0],o=t[1],s=t[2];f.MusicHelper.play_LingHunHuoFu();for(var r=e.duration,l=[],g=0;g<n.length;g++){var h=n[g];if(h&&h.node&&o&&o.node){var u=c.default.instance.createSkillEffectNode(e);l.push(u);var p=a.default.p2pRad(o.node.getPosition(),h.node.getPosition()),m=a.default.radiansToDegrees(p);u.angle=m,u.parent=this.demoEffect.parent,u.active=!0,u.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),u.getComponent(cc.Animation).play(e.name,0);var C=d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol),_=h.node.getPosition(),v=cc.v2((C.x+_.x)/2,(C.y+_.y)/2);cc.tween(u).to(.15,{position:v}).call(function(){u.anchorY=.75}).to(.1,{position:_}).delay(.1).call(function(){u.destroy(),i.playLingHunHuoFu2_pro(n,o,s)}).start()}}cc.tween(o.node).delay(r).call(function(){s&&s(),c.default.instance.backSkillEffNodes(l)}).start()},e.prototype.playLingHunHuoFu2_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.tx_linghunhuofu_shouji,this.playLingHunHuoFu2_pro_back,e,t,i)},e.prototype.playLingHunHuoFu2_pro_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node){var l=c.default.instance.createSkillEffectNode(e);a.push(l),l.parent=this.demoEffect.parent,l.active=!0;var f=d.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol),g=r.node.width*(.5-r.node.anchorX),h=r.node.height*(.5-r.node.anchorY);l.setPosition(f.x+g,f.y+h),l.getComponent(cc.Animation).play(e.name,0),o=e.duration}}cc.tween(n.node).delay(o).call(function(){c.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playZhiYuShu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.zhiYuShu,this.playZhiYuShu_back,e,t,i)},e.prototype.playZhiYuShu_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_ZhiLiao();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playZhiYuShu2(n,o,a)}).start()},e.prototype.playZhiYuShu2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.zhiYuShu2,this.playZhiYuShu2_back,e,t,i)},e.prototype.playZhiYuShu2_back=function(e,t){for(var i,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],l=function(t){var o=n[t];if(o&&o.node){i=c.default.instance.createSkillEffectNode(e),r.push(i),i.parent=f.demoEffect.parent,i.active=!0;var a=d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol),l=o.node.width*(.5-o.node.anchorX),g=o.node.height*(.5-o.node.anchorY);i.setPosition(a.x+l,a.y+g),o.zhiliaoshuEffect=i,i.getComponent(cc.Animation).play(e.name,0),s=e.duration,cc.tween(i).delay(e.duration).call(function(){o.zhiliaoshuEffect.destroy(),o.zhiliaoshuEffect=null}).start()}},f=this,g=0;g<n.length;g++)l(g);cc.tween(o).delay(s).call(function(){a&&a(),c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShiDuShou=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.shidushu,this.playShiDuShou_back,e,t,i)},e.prototype.playShiDuShou_back=function(e,t){var i=t[0],n=t[1],o=t[2];f.MusicHelper.play_ShiDu();var a=c.default.instance.createSkillEffectNode(e);a.parent=this.demoEffect.parent,a.active=!0,a.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),a.getComponent(cc.Animation).play(e.name,0),cc.tween(a).delay(e.duration).call(function(){a.destroy()}).start(),this.playShiDuShou2(i,n,o)},e.prototype.playShiDuShou2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.shidushu2,this.playShiDuShou2_back,e,t,i)},e.prototype.playShiDuShou2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playShiduShu_pro_1=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.shidushu_effect2,this.playShiduShu_pro_1_back,e,t,i)},e.prototype.playShiduShu_pro_1_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_ShiDu();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playShiduShu_pro_2(n,o,a)}).start()},e.prototype.playShiduShu_pro_2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.shidushu_effect2_2,this.playShiduShu_pro_2_back,e,t,i)},e.prototype.playShiduShu_pro_2_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],l=0;l<n.length;l++){var d=n[l];if(d&&d.node){var f=c.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node;var g=new cc.Vec2(0,0),h=d.node.width*(.5-d.node.anchorX),u=d.node.height*(.5-d.node.anchorY);f.setPosition(g.x+h,g.y+u),f.active=!0,f.getComponent(cc.Animation).play(e.name,0)}}cc.tween(f).delay(s+.5).call(function(){c.default.instance.backSkillEffNodes(r)}).start(),cc.tween(o.node).delay(s-.02).call(function(){i.playShiduShu_pro_3(n,o,a)}).start()},e.prototype.playShiduShu_pro_3=function(e,t,i,n){void 0===n&&(n=null);for(var o=0;o<e.length;o++){var a=e[o];if(a&&a.node){a.shidushu_effect&&(a.shidushu_effect.destroy(),a.shidushu_effect=null);var r=c.default.instance.createSkillEffectNode(null,!1);r.parent=a.node;var f,g=new cc.Vec2(0,0),h=a.node.width*(.5-a.node.anchorX),u=a.node.height*(.5-a.node.anchorY);r.setPosition(g.x+h,g.y+u),r.active=!0,a.shidushu_effect=r,f=a.serRoleInfoModel.cid==s.GameConst.SPECIALBOSSID.WORLDBOSSID||a.serRoleInfoModel.cid==d.default.instance.FightBossId?this.skillConfig.shiduShuBuff_big:this.skillConfig.shidushu_effect2_3;var p=new l.MySkillClipInfo;p.beAttackRole=a,p.attackRole=t,p.callBack=i,p.skilleffId=f,p.skillEffectNode=r,c.default.instance.playClipByClipInfo(p,this.playShiduShu_pro_3_back)}}cc.tween(t.node).delay(.6).call(function(){i&&i()}).start()},e.prototype.playShiduShu_pro_3_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0)},e.prototype.playShiDuShu_skin2_qishou=function(e,t,i){c.default.instance.loadClip(this.skillConfig.skin_2_shidu_shifa,this.playShiDuShu_skin2_qishou_back,e,t,i)},e.prototype.playShiDuShu_skin2_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_ShiDu();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playShiDuShu_skin2_shouji(n,o,a)}).start()},e.prototype.playShiDuShu_skin2_shouji=function(e,t,i){c.default.instance.loadClip(this.skillConfig.skin_2_shidu_shouji,this.playShiDuShu_skin2_shouji_back,e,t,i)},e.prototype.playShiDuShu_skin2_shouji_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],l=0;l<n.length;l++){var d=n[l];if(d&&d.node){var f=c.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node;var g=new cc.Vec2(0,0),h=d.node.width*(.5-d.node.anchorX),u=d.node.height*(.5-d.node.anchorY);f.setPosition(g.x+h,g.y+u),f.active=!0,f.getComponent(cc.Animation).play(e.name,0),s=e.duration}}cc.tween(o.node).delay(s-.02).call(function(){i.playShiDuShu_skin2_Chixu(n,o,a),c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShiDuShu_skin2_Chixu=function(e,t,i){for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node){o.shidushu_effect&&(o.shidushu_effect.destroy(),o.shidushu_effect=null);var a=c.default.instance.createSkillEffectNode(null,!1);a.parent=o.node;var r,f=new cc.Vec2(0,0),g=o.node.width*(.5-o.node.anchorX),h=o.node.height*(.5-o.node.anchorY);a.setPosition(f.x+g,f.y+h),a.active=!0,o.shidushu_effect=a,r=o.serRoleInfoModel.cid==s.GameConst.SPECIALBOSSID.WORLDBOSSID||o.serRoleInfoModel.cid==d.default.instance.FightBossId?this.skillConfig.skin_2_shidu_chixu_boss:this.skillConfig.skin_2_shidu_chixu;var u=new l.MySkillClipInfo;u.beAttackRole=o,u.attackRole=t,u.callBack=i,u.skilleffId=r,u.skillEffectNode=a,c.default.instance.playClipByClipInfo(u,this.playShiDuShu_skin2_Chixu_back)}}cc.tween(t.node).delay(.6).call(function(){i&&i()}).start()},e.prototype.playShiDuShu_skin2_Chixu_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0)},e.prototype.playKuLu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.zhaohuan_kulu,this.playKuLu_back,e,t,i)},e.prototype.playKuLu_back=function(e,t){t[0];var i=t[1],n=t[2];f.MusicHelper.play_call();var o=c.default.instance.createSkillEffectNode(e);o.parent=this.demoEffect.parent,o.active=!0,o.setPosition(d.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol)),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){o.destroy()}).start(),cc.tween(i.node).delay(e.duration).call(function(){n&&n()}).start()},e.prototype.playShenShou=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.zhaohuan_shenshou,this.playShenShou_back,e,t,i)},e.prototype.playShenShou_back=function(e,t){t[0];var i,n=t[1],o=t[2],a=c.default.instance.createSkillEffectNode(e);a.parent=this.demoEffect.parent,a.active=!0,a.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),a.getComponent(cc.Animation).play(e.name,0),i=e.duration,cc.tween(a).delay(e.duration).call(function(){a.destroy()}).start(),cc.tween(n.node).delay(i).call(function(){o&&o()}).start()},e.prototype.playKuLu_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.zhaohuan_kulu_pro,this.playKuLu_pro_back,e,t,i)},e.prototype.playKuLu_pro_back=function(e,t){t[0];var i=t[1],n=t[2];f.MusicHelper.play_call();var o,a=c.default.instance.createSkillEffectNode(e);a.parent=this.demoEffect.parent,a.active=!0,a.setPosition(d.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol)),a.getComponent(cc.Animation).play(e.name,0),o=e.duration,cc.tween(a).delay(e.duration).call(function(){a.destroy()}).start(),cc.tween(i.node).delay(o).call(function(){n&&n()}).start()},e.prototype.playShenShou_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.zhaohuan_shenshou_pro,this.playShenShou_pro_back,e,t,i)},e.prototype.playShenShou_pro_back=function(e,t){t[0];var i,n=t[1],o=t[2],a=c.default.instance.createSkillEffectNode(e);a.parent=this.demoEffect.parent,a.active=!0,a.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),a.getComponent(cc.Animation).play(e.name,0),i=e.duration,cc.tween(a).delay(e.duration).call(function(){a.destroy()}).start(),cc.tween(n.node).delay(i).call(function(){o&&o()}).start()},e.prototype.playYinShenShu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.yinshenshu,this.playYinShenShu_back,e,t,i)},e.prototype.playYinShenShu_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],l=0;l<n.length;l++){var f=c.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect.parent,f.active=!0,f.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){i.playYinShenShu2(n,o,a)}).start()}cc.tween(o.node).delay(s).call(function(){c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playYinShenShu2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.yinshenshu2,this.playYinShenShu2_back,e,t,i)},e.prototype.playYinShenShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node){var l=c.default.instance.createSkillEffectNode(e,!1);l.parent=r.node,l.active=!0,l.getComponent(cc.Animation).play(e.name,0),a.push(l)}}cc.tween(n.node).delay(.3).call(function(){o&&o(a)}).start()},e.prototype.playShenShengZhanJiaShu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.shenshengzhanjiashu,this.playShenShengZhanJiaShu_back,e,t,i)},e.prototype.playShenShengZhanJiaShu_back=function(e,t){t[0];var i=t[1],n=t[2];f.MusicHelper.play_shenshengzhanjia();var o=c.default.instance.createSkillEffectNode(e);o.parent=this.demoEffect.parent,o.active=!0,o.setPosition(d.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol)),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){o.destroy(),n&&n()}).start()},e.prototype.playWuJiZhenQi=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.wujizhenqi,this.playWuJiZhenQi_back,e,t,i,n)},e.prototype.playWuJiZhenQi_back=function(e,t){t[0];var i,n=t[1],o=t[2],a=t[3],s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,a?s.setPosition(d.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol)):s.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),s.getComponent(cc.Animation).play(e.name,0),i=e.duration,cc.tween(s).delay(e.duration).call(function(){s.destroy()}).start(),cc.tween(n.node).delay(i).call(o).start()},e.prototype.playWuJiZhenQi_pro_1=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.wujizhenqi1,this.playWuJiZhenQi_pro_1_back,e,t,i,n)},e.prototype.playWuJiZhenQi_pro_1_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2],s=t[3],r=c.default.instance.createSkillEffectNode(e);r.parent=this.demoEffect.parent,r.active=!0,r.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),r.getComponent(cc.Animation).play(e.name,0),cc.tween(r).delay(e.duration).call(function(){r.destroy(),i.playWuJiZhenQi_pro_2(n,o,a,s)}).start()},e.prototype.playWuJiZhenQi_pro_2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.wujizhenqi2,this.playWuJiZhenQi_pro_2_back,e,t,i,n)},e.prototype.playWuJiZhenQi_pro_2_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2],s=t[3],r=c.default.instance.createSkillEffectNode(e);r.parent=this.demoEffect.parent,r.active=!0;var l=d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol);r.setPosition(l.x-10,l.y+75),r.getComponent(cc.Animation).play(e.name,0),cc.tween(r).delay(e.duration).call(function(){r.destroy(),i.playWuJiZhenQi_pro_3(n,o,a,s)}).start()},e.prototype.playWuJiZhenQi_pro_3=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.wujizhenqi3,this.playWuJiZhenQi_pro_3_back,e,t,i,n)},e.prototype.playWuJiZhenQi_pro_3_back=function(e,t){t[0];var i=t[1],n=t[2],o=t[3];if(o&&o.node){o.wujiEffect&&(o.wujiEffect.destroy(),o.wujiEffect=null);var a=c.default.instance.createSkillEffectNode(e);a.parent=o.node,a.x=0,a.y=0,a.active=!0,o.wujiEffect=a;var s=a.getComponent(cc.Animation);s.play(e.name,0),s.once("finished",function(){o.wujiEffect&&(o.wujiEffect.destroy(),o.wujiEffect=null)},this)}cc.tween(i.node).delay(.5).call(function(){n&&n()}).start()},e.prototype.playShenShouGongJi=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.shenshougongji,this.playShenShouGongJi_back,e,t,i)},e.prototype.playShenShouGongJi_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f);var g=a.default.p2pRad(n.node.getPosition(),l.node.getPosition()),h=a.default.radiansToDegrees(g);f.angle=h,f.parent=this.demoEffect.parent,f.active=!0,f.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).to(.1,{position:l.node.getPosition()}).delay(e.duration-.1).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(.5).call(function(){c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playShenShouGongJi_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.shenshougongji_pro,this.playShenShouGongJi_pro_back,e,t,i,n)},e.prototype.playShenShouGongJi_pro_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=t[3],s=e.duration,r=[],l=g.default.getSideRole2Role(n,a),f=0;f<i.length;f++){var h=i[f];if(h&&h.node){var u=c.default.instance.createSkillEffectNode(e);r.push(u),u.scaleX=1,l==g.default.RoleSide.LeftUp?u.angle=145:l==g.default.RoleSide.Up?u.angle=90:l==g.default.RoleSide.RightUp?u.angle=35:l==g.default.RoleSide.Down?u.angle=-90:l==g.default.RoleSide.Right||(l==g.default.RoleSide.LeftDown?u.angle=-145:l==g.default.RoleSide.RightDown?u.angle=-35:l==g.default.RoleSide.Left&&(u.angle=180)),u.parent=this.demoEffect.parent,u.active=!0,u.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),u.getComponent(cc.Animation).play(e.name,0),cc.tween(u).delay(.1).to(.1,{position:h.node.getPosition()}).delay(e.duration-.1).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(s).call(function(){c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playHuoQiuShu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.huoqiushu,this.playHuoQiuShu_back,e,t,i)},e.prototype.playHuoQiuShu_back=function(e,t){var i=this,n=t[0],o=t[1],s=t[2];f.MusicHelper.play_huoqiushu();for(var r=e.duration,l=[],g=0;g<n.length;g++){var h=n[g];if(h&&h.node){var u=c.default.instance.createSkillEffectNode(e);l.push(u);var p=a.default.p2pRad(o.node.getPosition(),h.node.getPosition()),m=a.default.radiansToDegrees(p);u.angle=m-90,u.parent=this.demoEffect.parent,u.active=!0,u.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),u.getComponent(cc.Animation).play(e.name,0),cc.tween(u).to(.2,{position:h.node.getPosition()}).call(function(){i.playHuoQiuShu2(n,o,s)}).start()}}cc.tween(o.node).delay(r).call(function(){c.default.instance.backSkillEffNodes(l)}).start()},e.prototype.playHuoQiuShu2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.huoqiushu2,this.playHuoQiuShu2_back,e,t,i)},e.prototype.playHuoQiuShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playLeiDianShu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.leidianshu,this.playLeiDianShu_back,e,t,i)},e.prototype.playLeiDianShu_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_leidianshu();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playLeiDianShu2(n,o,a)}).start()},e.prototype.playLeiDianShu2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.leidianshu2,this.playLeiDianShu2_back,e,t,i)},e.prototype.playLeiDianShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u+35),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playLeiDianShu_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.tx_leidianshu_qishou,this.playLeiDianShu_pro_back,e,t,i)},e.prototype.playLeiDianShu_pro_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_leidianshu();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.name="\u96f7\u7535\u672f\u8d77\u624b",s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playLeiDianShu2_pro(n,o,a)}).start()},e.prototype.playLeiDianShu2_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.tx_leidianshu_luoxia,this.playLeiDianShu2_pro_back,e,t,i)},e.prototype.playLeiDianShu2_pro_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0,f.name="\u96f7\u7535\u672f\u843d\u4e0b";var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u+35),f.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playHuoQiangShu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.huoqiangshu,this.playHuoQiangShu_back,e,t,i)},e.prototype.playHuoQiangShu_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_huoqiang();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playHuoQiangShu2(n,o,a)}).start()},e.prototype.playHuoQiangShu2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.huoqiangshu2,this.playHuoQiangShu2_back,e,t,i)},e.prototype.playHuoQiangShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playHuoQiangShu_pro_1=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.huoqiangshu_effect2,this.playHuoQiangShu_pro_1_back,e,t,i)},e.prototype.playHuoQiangShu_pro_1_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_huoqiang();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration-.02).call(function(){s.destroy(),i.playHuoQiangShu_pro_3(n,o,a)}).start()},e.prototype.playHuoQiangShu_pro_3=function(e,t,i,n){void 0===n&&(n=null);for(var o=0;o<e.length;o++){var a=e[o];if(a&&a.node){a.huoQiangEffect&&(a.huoQiangEffect.destroy(),a.huoQiangEffect=null);var r=c.default.instance.createSkillEffectNode(null,!1);r.parent=a.node;var f,g=new cc.Vec2(0,0),h=a.node.width*(.5-a.node.anchorX),u=a.node.height*(.5-a.node.anchorY);r.setPosition(g.x+h,g.y+u),r.active=!0,f=a.serRoleInfoModel.cid==s.GameConst.SPECIALBOSSID.WORLDBOSSID||a.serRoleInfoModel.cid==d.default.instance.FightBossId?this.skillConfig.huoqiangBuff_big:this.skillConfig.huoqiangshu_effect2_3,a.huoQiangEffect=r;var p=new l.MySkillClipInfo;p.beAttackRole=a,p.attackRole=t,p.callBack=i,p.skilleffId=f,p.skillEffectNode=r,c.default.instance.playClipByClipInfo(p,this.playHuoQiangShu_pro_3_back)}}i&&i()},e.prototype.playHuoQiangShu_pro_3_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0)},e.prototype.playHuoQiang_skin_2_qishou=function(e,t,i){c.default.instance.loadClip(this.skillConfig.skin_2_huoqiang_shifa,this.playHuoQiang_skin_2_qishou_back,e,t,i)},e.prototype.playHuoQiang_skin_2_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_huoqiang();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playHuoQiang_skin_2_chixu(n,o,a)}).start()},e.prototype.playHuoQiang_skin_2_chixu=function(e,t,i){for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node){o.huoQiangEffect&&(o.huoQiangEffect.destroy(),o.huoQiangEffect=null);var a=c.default.instance.createSkillEffectNode(null,!1);a.parent=o.node;var r,f=new cc.Vec2(0,0),g=o.node.width*(.5-o.node.anchorX),h=o.node.height*(.5-o.node.anchorY);a.setPosition(f.x+g,f.y+h),a.active=!0,o.huoQiangEffect=a,r=o.serRoleInfoModel.cid==s.GameConst.SPECIALBOSSID.WORLDBOSSID||o.serRoleInfoModel.cid==d.default.instance.FightBossId?this.skillConfig.skin_2_huoqiang_chixu_boss:this.skillConfig.skin_2_huoqiang_chixu;var u=new l.MySkillClipInfo;u.beAttackRole=o,u.attackRole=t,u.callBack=i,u.skilleffId=r,u.skillEffectNode=a,c.default.instance.playClipByClipInfo(u,this.playHuoQiang_skin_2_chixu_back)}}i&&i()},e.prototype.playHuoQiang_skin_2_chixu_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0)},e.prototype.playYouHuoZhiGuang=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.youHuoZhiGuang,this.playYouHuoZhiGuang_back,e,t,i)},e.prototype.playYouHuoZhiGuang_back=function(e,t){t[0];var i,n=t[1],o=t[2],a=c.default.instance.createSkillEffectNode(e);a.parent=this.demoEffect.parent,a.active=!0,a.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),a.getComponent(cc.Animation).play(e.name,0),i=e.duration,cc.tween(a).delay(e.duration).call(function(){a.destroy()}).start(),cc.tween(n.node).delay(i).call(o).start()},e.prototype.playYouHuoZhiGuang_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.youhuozhiguang_pro,this.playYouHuoZhiGuang_pro_back,e,t,i)},e.prototype.playYouHuoZhiGuang_pro_back=function(e,t){t[0];var i,n=t[1],o=t[2],a=c.default.instance.createSkillEffectNode(e);a.parent=this.demoEffect.parent,a.active=!0,a.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),a.getComponent(cc.Animation).play(e.name,0),i=e.duration,cc.tween(a).delay(e.duration-.1).call(function(){a.destroy()}).start(),cc.tween(n.node).delay(i).call(o).start()},e.prototype.playYouhuozhiguang_pg_pro=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_attack();for(var o=0;o<e.length;o++){var a=e[o];if(a&&a.node){var s=g.default.getSideRole2Role(t,a),r=c.default.instance.createSkillEffectNode(null,!1);s==g.default.RoleSide.LeftUp||s==g.default.RoleSide.LeftDown||s==g.default.RoleSide.Left||s==g.default.RoleSide.Up?r.scaleX=1:r.scaleX=-1,s==g.default.RoleSide.Up&&(r.scaleX=1,r.scaleY=1),s==g.default.RoleSide.Down&&(r.scaleX=-1,r.scaleY=-1),r.parent=a.node,r.active=!0;var h=d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);r.x=h.x,r.y=h.y;var u=void 0;switch(s){case g.default.RoleSide.LeftUp:case g.default.RoleSide.RightUp:u=this.skillConfig.youhuozhiguang_pg_toleftUp_pro;break;case g.default.RoleSide.LeftDown:case g.default.RoleSide.RightDown:u=this.skillConfig.youhuozhiguang_pg_toleftDown_pro;break;case g.default.RoleSide.Down:case g.default.RoleSide.Up:u=this.skillConfig.youhuozhiguang_pg_toup_pro;break;case g.default.RoleSide.Left:case g.default.RoleSide.Right:u=this.skillConfig.youhuozhiguang_pg_toleft_pro}var p=new l.MySkillClipInfo;p.beAttackRole=a,p.attackRole=t,p.callBack=i,p.skilleffId=u,p.skillEffectNode=r,c.default.instance.playClipByClipInfo(p,this.playYouhuozhiguang_pg_pro_back)}}},e.prototype.playYouhuozhiguang_pg_pro_back=function(e){var t=e.beAttackRole,i=(e.attackRole,e.clip),n=e.skillEffectNode,o=e.callBack;n.getComponent(cc.Animation).play(i.name,0),cc.tween(n).to(.1,{x:t.node.getPosition().x,y:t.node.getPosition().y}).delay(i.duration-.3).call(function(){n.destroy(),o&&o()}).start()},e.prototype.playYouhuozhiguang_lpg_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.youhuozhiguang_lpg_toup_pro,this.playYouhuozhiguang_lpg_pro_back,e,t,i,n)},e.prototype.playYouhuozhiguang_lpg_pro_back=function(e,t){var i=this,n=t[0],o=t[1],s=t[2],r=t[3];f.MusicHelper.play_attack();for(var l=e.duration,h=[],u=(g.default.getSideRole2Role(o,r),0);u<n.length;u++){var p=n[u];if(p&&p.node){var m=c.default.instance.createSkillEffectNode(e);h.push(m),m.anchorY=1,m.parent=this.demoEffect.parent,m.active=!0;var C=d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol);m.x=C.x,m.y=C.y;var _=m.getComponent(cc.Animation),v=a.default.p2pRad(o.node.getPosition(),p.node.getPosition()),y=a.default.radiansToDegrees(v);m.angle=y-90,_.play(e.name,0),cc.tween(m).delay(.1).to(.2,{position:p.node.getPosition()}).call(function(){i.playYouhuozhiguang_lpg_hurt_pro(n,o,s)}).start()}}cc.tween(o.node).delay(l).call(function(){c.default.instance.backSkillEffNodes(h)}).start()},e.prototype.playYouhuozhiguang_lpg_hurt_pro=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.youhuozhiguang_lpg_hurt_pro,this.playYouhuozhiguang_lpg_hurt_pro_back,e,t,i)},e.prototype.playYouhuozhiguang_lpg_hurt_pro_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0,f.setPosition(d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(a).call(function(){c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playMoFaDun=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.mofadun,this.playMoFaDun_back,e,t,i)},e.prototype.playMoFaDun_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_mofadun();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){i.playMoFaDun2(n,o,a),s.destroy()}).start()},e.prototype.playMoFaDun2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.mofadun2,this.playMoFaDun2_back,e,t,i)},e.prototype.playMoFaDun2_back=function(e,t){var i=t[1],n=t[2],o=[],a=i;if(a&&a.node&&!a.isPlayMofaDun){var s=void 0;a.mofaDunEffect?s=a.mofaDunEffect:((s=c.default.instance.createSkillEffectNode(e,!1)).parent=a.node,a.mofaDunEffect=s,s.active=!0,s.setPosition(0,0)),s.getComponent(cc.Animation).play(e.name,0),a.isPlayMofaDun=!0,o.push(s)}cc.tween(i.node).delay(.4).call(function(){n&&n(o)}).start()},e.prototype.playBingPaoXiao=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.bingPaoXiao,this.playBingPaoXiao_back,e,t,i)},e.prototype.playBingPaoXiao_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_bingpaoxiao();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playBingPaoXiao2(n,o,a)}).start()},e.prototype.playBingPaoXiao2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.bingPaoXiao2,this.playBingPaoXiao2_back,e,t,i)},e.prototype.playBingPaoXiao2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playBingPaoXiao_pro_1=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.bingpaoxiao2_1,this.playBingPaoXiao_pro_1_back,e,t,i)},e.prototype.playBingPaoXiao_pro_1_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_bingpaoxiao();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0;var r=d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol);s.setPosition(r.x,r.y+75),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playBingPaoXiao_pro_2(n,o,a)}).start()},e.prototype.playBingPaoXiao_pro_2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.bingpaoxiao2_2,this.playBingPaoXiao_pro_2_back,e,t,i)},e.prototype.playBingPaoXiao_pro_2_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2],s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playBingPaoXiao_pro_3(n,o,a)}).start()},e.prototype.playBingPaoXiao_pro_3=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.bingpaoxiao2_3,this.playBingPaoXiao_pro_3_back,e,t,i)},e.prototype.playBingPaoXiao_pro_3_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){f.destroy()}).start()}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playFire_daoshi=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.fireDaoShi,this.playFire_daoshi_back,e,t,i)},e.prototype.playFire_daoshi_back=function(e,t){var i=t[0],n=t[1],o=t[2];f.MusicHelper.play_attack();for(var a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var g=c.default.instance.createSkillEffectNode(e);s.push(g),g.parent=this.demoEffect.parent,g.active=!0,g.setPosition(d.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),g.getComponent(cc.Animation).play(e.name,0),cc.tween(g).to(.5,{position:l.node.getPosition()}).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(a).call(function(){c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playFire_zhanshi=function(e,t,i,n){void 0===n&&(n=null),f.MusicHelper.play_attack();for(var o=g.default.getSideRole2Role(t,n),a=0;a<e.length;a++){var s=e[a];if(s&&s.node){var r=c.default.instance.createSkillEffectNode();r.setPosition(d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol)),r.parent=this.demoEffect.parent,r.active=!0;var h,u=s.node.getPosition();o==g.default.RoleSide.LeftUp&&(h=this.skillConfig.fireZhanshi_leftup),o==g.default.RoleSide.Down&&(h=this.skillConfig.fireZhanshi_down),o==g.default.RoleSide.Left&&(h=this.skillConfig.fireZhanshi_left,u.x+=50),o==g.default.RoleSide.LeftDown&&(h=this.skillConfig.fireZhanshi_leftdown,u.x+=40,u.y+=40),o==g.default.RoleSide.RightUp&&(h=this.skillConfig.fireZhanshi_leftup,r.scaleX=-1,u.x-=40,u.y-=40),o==g.default.RoleSide.RightDown&&(h=this.skillConfig.fireZhanshi_leftdown,r.scaleX=-1,u.x-=40,u.y+=40),o==g.default.RoleSide.Up&&(h=this.skillConfig.fireZhanshi_down,r.scaleY=-1,u.y-=50),o==g.default.RoleSide.Right&&(h=this.skillConfig.fireZhanshi_left,r.scaleX=-1,u.x-=50);var p=new l.MySkillClipInfo;p.beAttackRole=s,p.attackRole=t,p.callBack=i,p.skilleffId=h,p.skillEffectNode=r,p.params=u,c.default.instance.playClipByClipInfo(p,this.playFire_zhanshi_back)}}},e.prototype.playFire_zhanshi_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode,n=e.callBack,o=i.getComponent(cc.Animation),a=e.params;o.play(t.name,0),cc.tween(i).to(.1,{position:a}).delay(t.duration-.1).call(function(){i.destroy(),n&&n()}).start()},e.prototype.playFire_fashi=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.fireFashi1,this.playFire_fashi_back,e,t,i)},e.prototype.playFire_fashi_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_attack();var s=c.default.instance.createSkillEffectNode(e);s.parent=this.demoEffect.parent,s.active=!0,s.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(e.duration).call(function(){s.destroy(),i.playFire_fashi2(n,o,a)}).start()},e.prototype.playFire_fashi2=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.fireFashi2,this.playFire_fashi2_back,e,t,i)},e.prototype.playFire_fashi2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(a).call(function(){c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playBaoZhu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.baozhu,this.playBaoZhu_back,e,t,i)},e.prototype.playBaoZhu_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[];f.MusicHelper.play_attack();for(var l=0;l<n.length;l++){var g=n[l];if(g&&g.node){var h=c.default.instance.createSkillEffectNode(e);r.push(h),h.parent=this.demoEffect.parent,h.active=!0,h.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),h.getComponent(cc.Animation).play(e.name,0),cc.tween(h).to(.5,{position:g.node.getPosition()}).call(function(){i.playFire_baozhu(n,o,a)}).start()}}cc.tween(o.node).delay(s).call(function(){c.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playFire_baozhu=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.baozhuFire,this.playFire_baozhu_back,e,t,i)},e.prototype.playFire_baozhu_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol),h=l.node.width*(.5-l.node.anchorX),u=l.node.height*(.5-l.node.anchorY);f.setPosition(g.x+h,g.y+u),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(a).call(function(){c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playMoFaDunEffect=function(e,t,i){var n=this.skillConfig.mofadun2;e.getIsEquipSkin(r.SKINID.MOFADUN_BINGHUAN,e.serRoleInfoModel.skinList)&&(n=this.skillConfig.skin_2_mofadun),c.default.instance.loadClip(n,this.playMoFaDunEffect_back,e,t,i)},e.prototype.playMoFaDunEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node&&!i.isPlayMofaDun){i.isPlayMofaDun=!0;var a=c.default.instance.createSkillEffectNode(e,!1);a.parent=i.node,a.active=!0;var s=new cc.Vec2(0,0),r=i.node.width*(.5-i.node.anchorX),l=i.node.height*(.5-i.node.anchorY);a.setPosition(s.x+r,s.y+l),i.mofaDunEffect=a,a.getComponent(cc.Animation).play(e.name,0),cc.tween(a).delay(n).call(function(){a.destroy(),i.mofaDunEffect=null,o&&o()}).start()}},e.prototype.playRoleRebirthEffect=function(e,t){c.default.instance.loadClip(this.skillConfig.rebirth,this.playRoleRebirthEffect_back,e,t)},e.prototype.playRoleRebirthEffect_back=function(e,t){var i=t[0],n=t[2];if(i&&i.node){var o=c.default.instance.createSkillEffectNode(e);o.parent=i.node,o.active=!0,o.setPosition(0,0),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){o.destroy(),n&&n()}).start()}},e.prototype.playRoleWudiEffect=function(e,t,i){c.default.instance.loadClip(this.skillConfig.wudi,this.playRoleWudiEffect_back,e,t,i)},e.prototype.playRoleWudiEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node&&!i.isPlayWudi){i.isPlayWudi=!0;var a=c.default.instance.createSkillEffectNode(e);a.parent=i.node,a.active=!0,i.wudiEffect=a,a.setPosition(0,0),a.getComponent(cc.Animation).play(e.name,0),cc.tween(a).delay(n).call(function(){a.destroy(),i.wudiEffect=null,o&&o()}).start()}},e.prototype.playRoleIceEffect=function(e,t,i){if(e&&e.node&&!e.isPlayIce){var n=this.skillConfig.debuff_ice;e.serRoleInfoModel.cid!=s.GameConst.SPECIALBOSSID.WORLDBOSSID&&e.serRoleInfoModel.cid!=d.default.instance.FightBossId||(n=this.skillConfig.debuff_ice_big),c.default.instance.loadClip(n,this.playRoleIceEffect_back,e,t,i)}},e.prototype.playRoleIceEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node&&!i.isPlayIce){i.isPlayIce=!0;var a=c.default.instance.createSkillEffectNode(e);a.parent=i.node,a.active=!0;var s=new cc.Vec2(0,0);a.setPosition(s.x+i.node.width*(.5-i.node.anchorX),s.y+i.node.height*(.5-i.node.anchorY)),a.getComponent(cc.Animation).play(e.name,0),i.iceEffect=a;var r=cc.tween(i.node).to(.05,{angle:-2}).to(.05,{angle:4}).to(.05,{angle:-4}).to(.1,{angle:0}).union().repeatForever().start();setTimeout(function(){r.stop()},1e3*n),cc.tween(a).delay(n).call(function(){a.destroy(),o&&o()}).start()}},e.prototype.playRoleMabiEffect=function(e,t,i){if(e&&e.node&&!e.isPlayIce){var n=this.skillConfig.debuff_mabi;e.serRoleInfoModel.cid!=s.GameConst.SPECIALBOSSID.WORLDBOSSID&&e.serRoleInfoModel.cid!=d.default.instance.FightBossId||(n=this.skillConfig.debuff_mabi_big),c.default.instance.loadClip(n,this.playRoleMabiEffect_back,e,t,i)}},e.prototype.playRoleMabiEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node&&!i.isPlayMabi){i.isPlayMabi=!0;var a=c.default.instance.createSkillEffectNode(e);a.parent=this.demoEffect.parent,a.active=!0;var s=d.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol);a.setPosition(s.x+i.node.width*(.5-i.node.anchorX),s.y+i.node.height*(.5-i.node.anchorY)),i.paralysisEffect=a,a.getComponent(cc.Animation).play(e.name,0);var r=i.node.x,l=cc.tween(i.node).to(.05,{x:r-1}).to(.05,{x:r+2}).to(.05,{x:r-2}).to(.05,{x:r+2}).to(.05,{x:r-2}).to(.05,{x:r}).union().repeatForever().start();setTimeout(function(){l.stop()},1e3*n),cc.tween(a).delay(n).call(function(){o&&o(),a.destroy()}).start()}},e.prototype.playRoleShiHuaEffect=function(e,t,i){if(e&&e.node&&!e.isPlayIce){var n=this.skillConfig.debuff_shihua;e.serRoleInfoModel.cid!=s.GameConst.SPECIALBOSSID.WORLDBOSSID&&e.serRoleInfoModel.cid!=d.default.instance.FightBossId||(n=this.skillConfig.debuff_shihua_big),c.default.instance.loadClip(n,this.playRoleShiHuaEffect_back,e,t,i)}},e.prototype.playRoleShiHuaEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node&&!i.isPlayShiHua){i.isPlayShiHua=!0;var a=c.default.instance.createSkillEffectNode(e);a.parent=i.node,a.active=!0;var s=new cc.Vec2(0,0);a.setPosition(s.x+i.node.width*(.5-i.node.anchorX),s.y+i.node.height*(.5-i.node.anchorY)),i.petrochemicalEffect=a,a.getComponent(cc.Animation).play(e.name,0),cc.tween(a).delay(n).call(function(){a.destroy(),o&&o()}).start()}},e.prototype.playRoleYunEffect=function(e,t,i){c.default.instance.loadClip(this.skillConfig.yun,this.playRoleYunEffect_back,e,t,i)},e.prototype.playRoleYunEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node&&!i.isPlayYun){i.isPlayYun=!0;var a=c.default.instance.createSkillEffectNode(e);a.parent=i.node,a.active=!0;var s=new cc.Vec2(0,0),r=i.node.width*(.5-i.node.anchorX),l=i.node.height*(.5-i.node.anchorY);a.setPosition(s.x+r,s.y+l),i.dizzyEffect=a,a.getComponent(cc.Animation).play(e.name,0),cc.tween(a).delay(n).call(function(){a.destroy(),o&&o()}).start()}},e.prototype.playLieHuo_skin3=function(e,t,i){for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node){var a=g.default.getSideRole2Role(t,o);t.playCommonAttackMv(a);var s=c.default.instance.createSkillEffectNode();s.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,s.getComponent(cc.Sprite).trim=!1,s.parent=this.demoEffect.parent,s.active=!0;var r=d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);s.anchorX=.5,s.anchorY=.5,s.x=r.x,s.y=r.y;var f=void 0;switch(a){case g.default.RoleSide.LeftUp:s.anchorX=.55,s.anchorY=.45,f=this.skillConfig.skin_3_liehuo_leftup;break;case g.default.RoleSide.RightUp:s.anchorX=.45,s.anchorY=.45,f=this.skillConfig.skin_3_liehuo_rightup;break;case g.default.RoleSide.LeftDown:s.anchorX=.55,s.anchorY=.55,f=this.skillConfig.skin_3_liehuo_leftDown;break;case g.default.RoleSide.RightDown:s.anchorX=.45,s.anchorY=.55,f=this.skillConfig.skin_3_liehuo_rightDown;break;case g.default.RoleSide.Down:f=this.skillConfig.skin_3_liehuo_down;break;case g.default.RoleSide.Up:f=this.skillConfig.skin_3_liehuo_up;break;case g.default.RoleSide.Left:f=this.skillConfig.skin_3_liehuo_left;break;case g.default.RoleSide.Right:f=this.skillConfig.skin_3_liehuo_right}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=f,h.skillEffectNode=s,c.default.instance.playClipByClipInfo(h,this.playLieHuo_skin3_back)}cc.tween(t.node).delay(.5).call(function(){i&&i()}).start()}},e.prototype.playLieHuo_skin3_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0),cc.tween(i).delay(t.duration).call(function(){i.destroy()}).start()},e.prototype.playlinghunhuofu_skin3_qishou=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.skin_3_linghunhuofu_qishou,this.playlinghunhuofu_skin3_qishou_back,e,t,i)},e.prototype.playlinghunhuofu_skin3_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],s=t[2];f.MusicHelper.play_LingHunHuoFu(),this.playYamaXunShifa(o);for(var r,l=e.duration,g=[],h=function(t){var l=n[t];if(l&&l.node&&o&&o.node){r=c.default.instance.createSkillEffectNode(e),g.push(r),r.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,r.getComponent(cc.Sprite).trim=!1;var f=l.node.getPosition(),h=l.node.width*(.5-l.node.anchorX),p=l.node.height*(.5-l.node.anchorY),m=new cc.Vec2(f.x+h,f.y+p),C=a.default.p2pRad(o.node.getPosition(),m),_=a.default.radiansToDegrees(C);r.angle=_-90,r.parent=u.demoEffect.parent,r.active=!0,r.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),r.getComponent(cc.Animation).play(e.name,0);d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol);cc.tween(r).to(.2,{position:m}).delay(.1).call(function(){i.playlinghunhuofu_skin3_shouji([l],o,s)}).start()}},u=this,p=0;p<n.length;p++)h(p);cc.tween(o.node).delay(l).call(function(){s&&s(),c.default.instance.backSkillEffNodes(g)}).start()},e.prototype.playlinghunhuofu_skin3_shouji=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.skin_3_linghunhuofu_shouji,this.playlinghunhuofu_skin3_shouji_back,e,t,i)},e.prototype.playlinghunhuofu_skin3_shouji_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var l=i[r];if(l&&l.node){var f=c.default.instance.createSkillEffectNode(e);s.push(f),f.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,f.getComponent(cc.Sprite).trim=!1,f.parent=this.demoEffect.parent,f.active=!0;var g=d.default.instance.gameView.getGridPosition(l.gridRow,l.gridCol);f.setPosition(g.x+l.node.width*(.5-l.node.anchorX),g.y+l.node.height*(.5-l.node.anchorY)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){f.destroy()}).start()}}cc.tween(n.node).delay(a).call(function(){o&&o(),c.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playbingpaoxiao_skin3_qishou=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.skin_3_bingPaoxiao_qishou,this.playbingpaoxiao_skin3_qishou_back,e,t,i)},e.prototype.playbingpaoxiao_skin3_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];f.MusicHelper.play_bingpaoxiao();var s=0;if(o&&o.node){var r=c.default.instance.createSkillEffectNode(e);r.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,r.getComponent(cc.Sprite).trim=!1,r.parent=this.demoEffect.parent,r.active=!0,r.setPosition(d.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol));var l=r.getComponent(cc.Animation);s=e.duration,l.play(e.name,0),cc.tween(r).delay(s).call(function(){r.destroy(),i.playbingpaoxiao_skin3_shouji(n,o,a)}).start()}},e.prototype.playbingpaoxiao_skin3_shouji=function(e,t,i,n){void 0===n&&(n=null),c.default.instance.loadClip(this.skillConfig.skin_3_bingPaoxiao_shouji,this.playbingpaoxiao_skin3_shouji_back,e,t,i)},e.prototype.playbingpaoxiao_skin3_shouji_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node){var l=c.default.instance.createSkillEffectNode(e);a.push(l),l.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,l.getComponent(cc.Sprite).trim=!1,l.parent=this.demoEffect.parent,l.active=!0;var f=d.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol);l.setPosition(f.x+r.node.width*(.5-r.node.anchorX),f.y+r.node.height*(.5-r.node.anchorY)),l.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(o).call(function(){c.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playcisha_skin3=function(e,t,i){f.MusicHelper.play_cishajianshu();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node){var a=g.default.getSideRole2Role(t,o);t.playCommonAttackMv(a);var s=c.default.instance.createSkillEffectNode();s.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,s.getComponent(cc.Sprite).trim=!1,s.parent=this.demoEffect.parent,s.active=!0;var r=d.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);s.x=r.x,s.y=r.y;var h=void 0;switch(a){case g.default.RoleSide.LeftUp:h=this.skillConfig.skin_3_cisha_leftup;break;case g.default.RoleSide.RightUp:h=this.skillConfig.skin_3_cisha_rightup;break;case g.default.RoleSide.LeftDown:h=this.skillConfig.skin_3_cisha_leftDown;break;case g.default.RoleSide.RightDown:h=this.skillConfig.skin_3_cisha_rightDown;break;case g.default.RoleSide.Down:h=this.skillConfig.skin_3_cisha_down;break;case g.default.RoleSide.Up:h=this.skillConfig.skin_3_cisha_up;break;case g.default.RoleSide.Left:h=this.skillConfig.skin_3_cisha_left;break;case g.default.RoleSide.Right:h=this.skillConfig.skin_3_cisha_right}var u=new l.MySkillClipInfo;u.beAttackRole=o,u.attackRole=t,u.callBack=i,u.skilleffId=h,u.skillEffectNode=s,c.default.instance.playClipByClipInfo(u,this.playcisha_skin3_back)}cc.tween(t.node).delay(0).call(function(){i&&i()}).start()}},e.prototype.playcisha_skin3_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0),cc.tween(i).delay(t.duration).call(function(){i.destroy()}).start()},e.prototype.playYamaXunShifa=function(e,t){void 0===t&&(t=null),c.default.instance.loadClip(this.skillConfig.yamaxun_shifa,this.playYamaXunShifa_back,e,t)},e.prototype.playYamaXunShifa_back=function(e,t){var i=t[0];t[1];if(i&&i.node){var n=c.default.instance.createSkillEffectNode(e);n.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,n.getComponent(cc.Sprite).trim=!1,n.parent=i.node;var o=new cc.Vec2(0,0);n.setPosition(o.x+i.node.width*(.5-i.node.anchorX),o.y+i.node.height*(.5-i.node.anchorY)),n.active=!0,n.getComponent(cc.Animation).play(e.name,0),e.duration,cc.tween(n).delay(e.duration).call(function(){n.destroy()}).start()}},e.prototype.playShenShengZhanJiaShu_skin2=function(e,t,i){c.default.instance.loadClip(this.skillConfig.skin_2_shenshengzhanjiashu,this.playShenShengZhanJiaShu_skin2_back,e,t,i)},e.prototype.playShenShengZhanJiaShu_skin2_back=function(e,t){t[0];var i=t[1],n=t[2];f.MusicHelper.play_shenshengzhanjia();var o=c.default.instance.createSkillEffectNode(e);o.parent=this.demoEffect.parent,o.active=!0,o.setPosition(d.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol)),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){o.destroy(),n&&n()}).start()},e.prototype.playBaguaEffect=function(e,t,i){c.default.instance.loadClip(this.skillConfig.bagua_cixu,this.playBaguaEffect_back,e,t,i)},e.prototype.playBaguaEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node&&!i.isPlayBagua){i.isPlayBagua=!0;var a=c.default.instance.createSkillEffectNode(e);a.parent=i.node,a.active=!0;var s=new cc.Vec2(0,0),r=i.node.width*(.5-i.node.anchorX),l=i.node.height*(.5-i.node.anchorY);a.setPosition(s.x+r,s.y+l),i.baguaEffect=a,a.getComponent(cc.Animation).play(e.name,0),cc.tween(a).delay(n).call(function(){a.destroy(),i.baguaEffect=null,o&&o()}).start()}},e.prototype.removeAllEff=function(){cc.isValid(this.demoEffect)&&this.demoEffect.children&&this.demoEffect.children.filter(function(e){return cc.isValid(e)}).forEach(function(e){var t=e.getComponent(cc.Animation);t?(t.stop(),e.stopAllActions(),e.removeFromParent()):e.removeFromParent()})},e.instance=new t,e=t=n([u],e)}());i.default=p,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/MathUtils":"MathUtils","../config/GameConst":"GameConst","../config/SkinConfig":"SkinConfig","../manager/SerSkillClipsManager":"SerSkillClipsManager","../manager/SkillClipsManager":"SkillClipsManager","../prefab/GameManager":"GameManager","../utils/MusicHelper":"MusicHelper","./SerRolePrefab":"SerRolePrefab"}],ServerFightView:[function(e,t,i){"use strict";cc._RF.push(t,"e180bzoCBtKaYE8pRcjSFun","ServerFightView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/ProtoConfig"),c=e("../../engine/ProtoUtils"),l=e("../../engine/ViewBase"),d=e("../config/GameConst"),f=e("../event/CommonEvent"),g=e("../network/HttpHelper"),h=e("../network/SocketClient"),u=e("../prefab/GameManager"),p=e("./SerRoleInfoModel"),m=e("./SerRolePrefab"),C=e("./SerSkillEffectManager"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.serRolePrefabList=[],t.itemPrefab=null,t.worldBossPrefab=null,t.roleContainer=null,t.timehandle=null,t.isPlayZhaoHuan=!1,t.fightType=d.ServerFightType.Default,t}return n(t,e),t.prototype.setFightType=function(e){void 0===e&&(e=d.ServerFightType.Default),this.fightType=e},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.itemPrefab?(this.tempPrefabItemNode=cc.instantiate(this.itemPrefab),this.tempPrefabItemNode.active=!1):(this.tempPrefabItemNode=this.findChild(this.node,"roleContainer/item"),this.roleContainer=this.tempPrefabItemNode.parent),this.worldBossPrefab?(this.worldBossItemNode=cc.instantiate(this.worldBossPrefab),this.worldBossItemNode.active=!1):this.worldBossItemNode=this.findChild(this.node,"roleContainer/worldBoss"),C.default.instance.init(this.findChild(this.node,"skill/effect"),this)},t.prototype.onEnable=function(){a.EventManager.instance.on(f.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},t.prototype.onShow=function(){},t.prototype.onSocketRespMsg=function(e,t){if(this.fightType==u.default.instance.serverFightType){var i=!1;if(e==r.ProtoConfig.c_req_change_scene){var n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_change_scene,t);this.changeSeceneByServer(n)}else if(e==r.ProtoConfig.c_req_scene_obj_list){n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_scene_obj_list,t);this.changeSeceneObjByServer(n)}else if(e==r.ProtoConfig.c_scene_add_obj){n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_add_obj,t);this.addObj(n.getObjListList())}else if(e==r.ProtoConfig.c_scene_delete_obj){n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_delete_obj,t);this.deletObj(n.getObjListList())}else if(e==r.ProtoConfig.c_scene_obj_move){n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_obj_move,t);for(var o=p.SerRoleMoveModel.proto2Model(n),a=0;a<this.serRolePrefabList.length;a++)if(o.id==this.serRolePrefabList[a].serRoleInfoModel.id){this.serRolePrefabList[a].move(o);break}}else if(e==r.ProtoConfig.c_scene_atack){for(n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_atack,t),o=p.SerRoleAttackModel.proto2Model(n),a=0;a<this.serRolePrefabList.length;a++)if(o.attackId==this.serRolePrefabList[a].serRoleInfoModel.id){this.serRolePrefabList[a].attack(o);break}}else if(e==r.ProtoConfig.c_scene_obj_hp){i=!0;var l=(n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_obj_hp,t)).getId(),f=n.getHp();for(n.getBuffId(),a=0;a<this.serRolePrefabList.length;a++)if(l==this.serRolePrefabList[a].serRoleInfoModel.id){this.serRolePrefabList[a].serRoleInfoModel.currHp=f,this.serRolePrefabList[a].refresh(),i=!1;break}}else if(e==r.ProtoConfig.c_scene_obj_mp){l=(n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_obj_mp,t)).getId();var g=n.getMp();for(a=0;a<this.serRolePrefabList.length;a++)if(l==this.serRolePrefabList[a].serRoleInfoModel.id){this.serRolePrefabList[a].serRoleInfoModel.currMp=g,this.serRolePrefabList[a].refresh();break}}else if(e==r.ProtoConfig.c_scene_obj_state){l=(n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_obj_state,t)).getId();var m=n.getBuffListList(),C=[];for(a=0;a<m.length;a++){var _=p.SerBuffModel.proto2Model(m[a]);C.push(_)}var v=n.getMaxHp(),y=n.getMaxMp();for(a=0;a<this.serRolePrefabList.length;a++){var b=this.serRolePrefabList[a].serRoleInfoModel;if(l==b.id){if(1==C.length&&C[0].buffId==p.StatusBuffId.SHIELD&&0==C[0].duration){for(var I=C[0],M=0;M<b.buffList.length;M++)if(b.buffList[M].buffId==I.buffId){b.buffList[M].duration=0;break}}else b.buffList=C,v>0&&(b.maxHp=v),y>0&&(b.maxMp=y),this.serRolePrefabList[a].refresh();break}}}else if(e==r.ProtoConfig.c_scene_buff_harm){n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_buff_harm,t);var w=p.SerBuffHarmModel.proto2Model(n);for(a=0;a<this.serRolePrefabList.length;a++)if(w.id==this.serRolePrefabList[a].serRoleInfoModel.id){this.serRolePrefabList[a].buffHarm(w);break}}else if(e==r.ProtoConfig.c_scene_obj_trigger_skill){l=(n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_obj_trigger_skill,t)).getId();var k=n.getSkillId();for(a=0;a<this.serRolePrefabList.length;a++)if(l==this.serRolePrefabList[a].serRoleInfoModel.id){this.serRolePrefabList[a].playTriggerSkill(k);break}}i&&!this.timehandle&&this.fightType!=d.ServerFightType.GuildPVP&&(s.Logger.log("\u672a\u627e\u5230\u534f\u8bae\u5bf9\u5e94\u89e6\u53d1\u5bf9\u8c61",e),h.default.s_req_scene_obj_list(),this.timehandle=setTimeout(this.ClearTime.bind(this),3))}},t.prototype.ClearTime=function(){this.timehandle&&clearTimeout(this.timehandle),this.timehandle=null},t.prototype.changeSeceneObjByServer=function(e){for(var t=e.getObjListList(),i=function(e){var i=p.default.proto2Model(t[e]);n.roleContainer.children.find(function(e){return e.getComponent(m.default).uid===i.id})||n.addSerRolePrefab(i)},n=this,o=0;o<t.length;o++)i(o);this.ClearTime()},t.prototype.changeSeceneByServer=function(e){this.currSceneId=e.getSceneId();for(var t=e.getObjListList(),i=0;i<t.length;i++){var n=p.default.proto2Model(t[i]);0==n.type&&this.addSerRolePrefab(n)}},t.prototype.addObj=function(e){for(var t=function(t){var n=p.default.proto2Model(e[t]);i.roleContainer.children.find(function(e){return e.getComponent(m.default).uid===n.id})||i.addSerRolePrefab(n)},i=this,n=0;n<e.length;n++)t(n)},t.prototype.deletObj=function(e){for(var t=0;t<e.length;t++)for(var i=p.default.proto2Model(e[t]),n=this.serRolePrefabList.length-1;n>=0;n--)this.serRolePrefabList[n].serRoleInfoModel.id==i.id&&(this.deletSerRolePrefab(this.serRolePrefabList[n]),this.serRolePrefabList.splice(n,1))},t.prototype.getSerRolePrefabById=function(e){for(var t=0;t<this.serRolePrefabList.length;t++)if(this.serRolePrefabList[t].serRoleInfoModel.id==e)return this.serRolePrefabList[t]},t.prototype.getSerRolePrefabByCId=function(e){for(var t=0;t<this.serRolePrefabList.length;t++)if(this.serRolePrefabList[t].serRoleInfoModel.cid==e)return this.serRolePrefabList[t]},t.prototype.addSerRolePrefab=function(e){var t;try{if(e)return this.serRolePrefabList.forEach(function(t){if(t.uid==e.id){var i="addSerRolePrefab \u91cd\u590d\u6dfb\u52a0 serRoleInfoModel.id="+e.id;return s.Logger.log(i),void g.default.sendBugLog(i)}}),(t=e.cid==d.GameConst.SPECIALBOSSID.WORLDBOSSID||e.cid==u.default.instance.FightBossId?cc.instantiate(this.worldBossItemNode).getComponent(m.default):cc.instantiate(this.tempPrefabItemNode).getComponent(m.default)).uid=e.id,t.serverFightView=this,t.gridRow=e.curr_x,t.gridCol=e.curr_y,t.node.parent=this.roleContainer,t.setRoleType(e),t.node.active=!0,t.node.setPosition(u.default.instance.gameView.getGridPosition(e.curr_x,e.curr_y)),this.serRolePrefabList.push(t),e.cid!=d.GameConst.SPECIALBOSSID.WORLDBOSSID&&e.cid!=u.default.instance.FightBossId&&t.refreshFightFrame(e.title),t}catch(t){s.Logger.error("addSerRolePrefab error=",t,e)}},t.prototype.deletSerRolePrefab=function(e){e&&e.node&&setTimeout(function(){e&&cc.isValid(e.node)&&e.node.destroy()},500)},t.prototype.clearFight=function(){u.default.instance.isPause=!0;for(var e=this.serRolePrefabList.length-1;e>=0;e--)this.serRolePrefabList[e]&&this.serRolePrefabList[e].node&&(this.serRolePrefabList[e].node.destroy(),this.serRolePrefabList.splice(e,1));this.serRolePrefabList=[];var t=this.node.getChildByName("skill");for(e=t.childrenCount-1;e>0;e--)t.children[e].destroy();for(e=this.node.childrenCount-1;e>1;e--)this.node.children[e].destroy()},o([y(cc.Prefab)],t.prototype,"itemPrefab",void 0),o([y(cc.Prefab)],t.prototype,"worldBossPrefab",void 0),o([y(cc.Node)],t.prototype,"roleContainer",void 0),o([y({type:cc.Enum(d.ServerFightType),tooltip:"\u6218\u6597\u7c7b\u578b"})],t.prototype,"fightType",void 0),t=o([v],t)}(l.default);i.default=b,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../event/CommonEvent":"CommonEvent","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","./SerRoleInfoModel":"SerRoleInfoModel","./SerRolePrefab":"SerRolePrefab","./SerSkillEffectManager":"SerSkillEffectManager"}],ServerTime:[function(e,t,i){"use strict";cc._RF.push(t,"43ceau0kEZKVJDbZ+0BMmy8","ServerTime"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/GameSocket"),a=e("../../engine/UIManager"),s=e("../config/ViewConfig"),r=e("../config/WordConfig"),c=e("../prefab/GameManager"),l=e("../sdk/SdkHelper"),d=function(){function e(){}return e.init=function(){this.setServerTime(n.default.now()),clearInterval(this.timeId)},e.setServerTime=function(e){var t=n.default.now();if(0==this.preServerTime);else{var i=t-this.preClientTime,d=e-this.preServerTime;l.default.isIos()||(o.default.getInstance().isLogin&&d>0&&i>1.5*d?(this.jiasuTimes++,this.jiasuTimes>=3&&a.default.instance.createView(s.default.gameView.DialogCheck,function(){c.default.instance.isPause=!0},r.WordConfig.getWord(60600),function(e){cc.game.end()})):this.jiasuTimes=0)}this.preClientTime=t,this.preServerTime=e,this.serverTime=e},e.getServerTime=function(){var e=n.default.now();if(0==this.serverTime)return e;var t=e-this.preClientTime;return this.serverTime+t},e.serverTime=0,e.preServerTime=0,e.jiasuTimes=0,e}();i.ServerTime=d,window.ServerTime=d,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/GameSocket":"GameSocket","../../engine/UIManager":"UIManager","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../prefab/GameManager":"GameManager","../sdk/SdkHelper":"SdkHelper"}],ServerWeiHuView:[function(e,t,i){"use strict";cc._RF.push(t,"5c1b9F6wAVBnqnhA46H8Od6","ServerWeiHuView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../GameController"),r=e("../../engine/UIManager"),c=e("../config/ViewConfig"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.msg=e},t.prototype.onShow=function(){r.default.instance.setTopUI(c.default.gameView.ServerWeiHuView),this.getChild(this.node,"view/panel/content",cc.Label).string=this.msg,this.onAddEvent(this.findChild(this.node,"view/panel/back"),this.onClickCloseHandler.bind(this)),this.onAddEvent(this.findChild(this.node,"btnClose2"),this.onClickCloseHandler.bind(this))},t.prototype.onClickCloseHandler=function(){this.closeView(),s.default.instance.restartGame()},t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../GameController":"GameController","../config/ViewConfig":"ViewConfig"}],SetConBox:[function(e,t,i){"use strict";cc._RF.push(t,"85f43hkK3BKa68yp1GBUOVh","SetConBox");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ITemsConfig"),r=e("../../model/SettingModel"),c=e("../../model/ItemInfoModel"),l=e("../../model/RoleInfoModel"),d=e("../../../engine/Logger"),f=e("../../utils/MusicHelper"),g=e("../../../engine/EventManager"),h=e("../../event/CommonEvent"),u=e("../../network/SocketClient"),p=e("../../config/WordConfig"),m=e("../../utils/UIHelper"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNode=null,t.drugTypeList=["ordinaryHp","ordinaryMp","seniorHp","seniorMp"],t.dropDownBoxList=[],t.pnlHpTemplateNode=null,t.pnlMpTemplateNode=null,t}return n(t,e),t.prototype.onLoad=function(){this.initEvent(),this.init(),this.initDrugShow()},t.prototype.onEnable=function(){g.EventManager.instance.on(h.CommonEvent.Event_SettingBgClick,this.onClickOther,this),g.EventManager.instance.on(h.CommonEvent.Event_UserInfoRefresh,this.refresh,this),g.EventManager.instance.on(h.CommonEvent.Event_Auto_Medicine,this.refresh,this),g.EventManager.instance.on("GUIDE_10903",function(e){this.pnlHpTemplateNode.active=!1},this),g.EventManager.instance.on("GUIDE_10905",function(e){this.pnlMpTemplateNode.active=!1},this),this.init(),this.initDrugShow()},t.prototype.onClickOther=function(e){void 0===e&&(e=-1);for(var t=0;t<this.dropDownBoxList.length;t++){var i=this.getChild(this.dropDownBoxList[t],"Template");i.active=e==t}},t.prototype.initEvent=function(){for(var e=this,t=this.drugTypeList,i=["pnlHp","pnlMp","pnlhHp","pnlhMp"],n=function(t){var n=o.getChild(o.node,i[t]),a=o.getChild(n,"DropDownBox"),s=(m.UIHelper.printNodeAllNodeName(a),o.getChild(a,"Template"));s.active=!1,o.dropDownBoxList[t]=a,a.on("click",function(){f.MusicHelper.play_click(),s.active=!s.active,s.active&&e.onClickOther(t)},o)},o=this,a=0;a<t.length;a++)n(a)},t.prototype.init=function(){this.itemNode=this.findChild(this.node,"item"),this.itemNode.active=!1;for(var e=this.drugTypeList,t=["pnlHp","pnlMp","pnlhHp","pnlhMp"],i=0;i<e.length;i++){var n=this.getChild(this.node,t[i]);"pnlHp"==t[i]&&(this.pnlHpTemplateNode=this.getChild(n,"DropDownBox/Template")),"pnlMp"==t[i]&&(this.pnlMpTemplateNode=this.getChild(n,"DropDownBox/Template")),this.initHp(n,e[i],e.length-i)}},t.prototype.refresh=function(){this.init(),this.initDrugShow()},t.prototype.initHp=function(e,t,i){var n=e;n.zIndex=i,n.active=!0;var o=this.getChild(n,"DropDownBox"),a=this.getChild(o,"LabelCaption",cc.Label);a.string=p.WordConfig.getWord(60555);var s=this.getHpModel(t);s.sort(function(e,t){return e.level-t.level});var r=this.getChild(o,"Template/view/content"),f=r.children;for(var g in f)f[g].active=!1;var h=this.getChild(o,"Template");d.Logger.log("configs====",s);for(var u=0;u<s.length;u++)if(!(l.default.instance.level<s[u].level)){var m=c.default.getItemAmount(s[u].id),C=s[u].name+"x"+m;this.createCkeck(C,this.itemCallback.bind(this,t,u,s,a,h),r,u)}r.active=!0},t.prototype.itemCallback=function(e,t,i,n,o){f.MusicHelper.play_click(),"ordinaryHp"==e?r.SettingModel.drugHp=i[t].id:"ordinaryMp"==e?r.SettingModel.drugMp=i[t].id:"seniorHp"==e?r.SettingModel.drugHighHp=i[t].id:"seniorHp"==e&&(r.SettingModel.drugHighMp=i[t].id),n.string=i[t].name+"x"+c.default.getItemAmount(i[t].id),o.active=!1,u.default.s_seq_auto_medicine(),r.SettingModel.saveToLocalStorage()},t.prototype.initDrugShow=function(){for(var e=this.drugTypeList,t=["pnlHp","pnlMp","pnlhHp","pnlhMp"],i=[r.SettingModel.drugHp,r.SettingModel.drugMp,r.SettingModel.drugHighHp,r.SettingModel.drugHighMp],n=0;n<t.length;n++){var o=this.getHpModel(e[n]),a=this.getChild(this.node,t[n]+"/DropDownBox/LabelCaption",cc.Label),s=i[n],d=this.getConfigItemId(o,s);if(a.string=p.WordConfig.getWord(61140),d){if(l.default.instance.level<d.level)continue;a.string=d.name+"x"+c.default.getItemAmount(s)}}},t.prototype.getConfigItemId=function(e,t){for(var i,n=0;n<e.length;n++)e[n].id==t&&(i=e[n]);return i},t.prototype.getHpModel=function(e){void 0===e&&(e="ordinaryHp");var t=[];return s.ITemsConfig.configMap.forEach(function(i,n){i.position==e&&t.push(i)}),t},t.prototype.createCkeck=function(e,t,i,n){var o=this.getChild(i,n.toString());o||(o=cc.instantiate(this.itemNode)),o.active=!0,o.on("click",t),this.getChild(o,"Label",cc.Label).string=e,o.parent=i,o.x=0,o.name=n.toString();m.UIHelper.printNodeAllNodeName(o)},t=o([_],t)}(a.default));i.default=v,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ViewBase":"ViewBase","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/SettingModel":"SettingModel","../../network/SocketClient":"SocketClient","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper"}],SetSkill:[function(e,t,i){"use strict";cc._RF.push(t,"89ef71dOERM5JDg3SlMa3Oi","SetSkill");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/RoleInfoModel"),r=e("../../config/SkillConfig"),c=e("../../../engine/EventManager"),l=e("../../model/SkillModel"),d=e("../../network/SocketClient"),f=e("../../event/CommonEvent"),g=cc._decorator,h=g.ccclass,u=g.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPvP=!1,t.nowSkillNodeList=[],t.skillList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.init()},t.prototype.onEnable=function(){c.EventManager.instance.on(f.CommonEvent.Event_SkillRefresh,this.refreshSkill,this),this.refreshSkill()},t.prototype.init=function(){var e=this.getChild(this.node,"0");e.active=!1,this.getChild(e,"btn").on("click",this.onBtn.bind(this,0),this);var t=l.SkillModel.getMyZhuDongActiveSkill();this.skillList=t;for(var i=0;i<12;i++){var n=cc.instantiate(e);n.name="item-"+i,this.node.addChild(n),n.active=!0,this.nowSkillNodeList[i]=n,this.getChild(n,"btn").on("click",this.onBtn.bind(this,i),this)}this.refreshSkill()},t.prototype.refreshSkill=function(){var e=l.SkillModel.getMyZhuDongActiveSkill();this.skillList=e;for(var t=function(t){if(e[t]&&e[t].isActive){var n=i.nowSkillNodeList[t],o=e[t],a=r.SkillConfig.getSkillConfigById(o.id,o.level);if(a.type==r.SkillConfig.SkillType.ZhuDong){var s=i.getChild(n,"skillIcon",cc.Sprite),c=i.getChild(n,"btn"),l=i.getChild(n,"btn/gou");s.node.active=!0,c.active=!0,l.active=i.isPvP?o.isSelectPvP:o.isSelect,cc.loader.loadRes("skillIcon/"+a.next_level,cc.SpriteFrame,function(e,t){s.spriteFrame=t})}}},i=this,n=0;n<this.nowSkillNodeList.length;n++)t(n)},t.prototype.onBtn=function(e){var t=this.skillList[e];if(t){if(this.isPvP){t.isSelectPvP=!t.isSelectPvP;var i=t.isSelectPvP?1:2;d.default.s_req_pvp_skill_use(t.id,i)}else t.isSelect=!t.isSelect,t.isSelect?d.default.req_skill_use(t.id,1):d.default.req_skill_use(t.id,2);s.default.saveToLocalStorage()}},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),c.EventManager.instance.clear(this)},o([u(cc.Boolean)],t.prototype,"isPvP",void 0),t=o([h],t)}(a.default);i.default=p,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/SkillConfig":"SkillConfig","../../event/CommonEvent":"CommonEvent","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkillModel":"SkillModel","../../network/SocketClient":"SocketClient"}],SettingModel:[function(e,t,i){"use strict";cc._RF.push(t,"5babcBJS+lEf4tpB+IDXIzO","SettingModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/LocalStorage"),o=e("./RoleInfoModel"),a=e("../config/GameConst"),s=e("../../engine/Logger"),r=e("../../engine/EventManager"),c=e("../event/CommonEvent"),l=e("../../engine/ProtoConfig"),d=e("../../engine/ProtoUtils"),f=e("../network/SocketClient"),g=e("../config/WordConfig"),h=function(){function e(){}return e.getRuneList=function(){return this.runeList=[g.WordConfig.getWord(60601),g.WordConfig.getWord(60602),g.WordConfig.getWord(60603),g.WordConfig.getWord(60604),g.WordConfig.getWord(60605),g.WordConfig.getWord(60606)],this.runeList},e.onSeverRefresh=function(t){var i=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_recycle_options,t);e.recycle_self_equip=i.getRecycleSelfEquip(),e.recycle_white=i.getRecycleWhite(),e.recycle_green=i.getRecycleGreen(),e.recycle_blue=i.getRecycleBlue(),e.recycle_purple=i.getRecyclePurple(),e.recycle_normal_level=i.getRecycleNormalLevel(),e.recycle_skillbooks=i.getRecycleSkillbooks(),e.recycle_equip_tips=i.getRecycleEquipTips(),e.recycle_equip_illbooks=i.getRecycleEquipIllbooks(),e.recycle_normal_level<0?e.levelSelet=0:e.levelSelet=this.getLevelList().indexOf(e.recycle_normal_level),e.recycle_nirvana_ream=i.getRecycleNirvanaReam(),e.recycle_nirvana_ream<0?e.runeSelet=0:e.runeSelet=this.runeList1.indexOf(e.recycle_nirvana_ream),e.recycle_ultimate_p=i.getRecycleUltimateP(),e.recycle_ultimate_p<0?e.persentSelet=0:e.persentSelet=this.getpersentList().indexOf(e.recycle_ultimate_p),r.EventManager.instance.dispatch(c.CommonEvent.Event_Refresh_Recycle)},e.saveToLocalStorage=function(){var t={};for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);var a=this.localKey+o.default.instance.roleId;n.default.setItem(a,JSON.stringify(t))},e.initData=function(){var t=this.localKey+o.default.instance.roleId,i=n.default.getItem(""+t);if(o.default.instance.level<2&&f.default.s_seq_auto_medicine(),i)try{var a=JSON.parse(i);a?(e.soundEffects=a.soundEffects,e.guide=a.guide):e.saveToLocalStorage()}catch(e){s.Logger.error("SettingModel.initData error==",e)}r.EventManager.instance.dispatch(c.CommonEvent.Event_Setting)},e.getLevelList=function(){if(this.levelList.length<=0)for(var e=10;e<=90;e+=10)this.levelList.push(e);return this.levelList},e.getpersentList=function(){if(this.persentList.length<=0)for(var e=50;e<=100;e+=10)this.persentList.push(e);return this.persentList},e.changeLevelSelet=function(t){e.levelSelet=t,e.recycle_normal_level>0&&(e.recycle_normal_level=e.getLevelList()[e.levelSelet],f.default.s_recycle_options())},e.changeRuneSelet=function(t){e.runeSelet=t,e.recycle_nirvana_ream>0&&(e.recycle_nirvana_ream=this.runeList1[e.runeSelet],f.default.s_recycle_options())},e.changePersentSelet=function(t){e.persentSelet=t,e.recycle_ultimate_p>0&&(e.recycle_ultimate_p=e.getpersentList()[e.persentSelet],f.default.s_recycle_options())},e.notItselfEq=!1,e.ordinaryEq=!1,e.excellentEq=!1,e.excellentEqs=!1,e.soundEffects=!0,e.hpSet=!0,e.mpSet=!0,e.highHpSet=!1,e.highMpSet=!1,e.hpSetPt=.5,e.mpSetPt=.5,e.highHpSetPt=.5,e.highMpSetPt=.5,e.drugHp=a.ItemId.HP,e.drugMp=a.ItemId.MP,e.drugHighHp=a.ItemId.HHP,e.drugHighMp=a.ItemId.HMP,e.drugCdown=[0,0,0,0],e.guide=0,e.recycle_skillbooks=-1,e.recycle_self_equip=-1,e.recycle_equip_tips=-1,e.recycle_white=-1,e.recycle_green=-1,e.recycle_blue=-1,e.recycle_purple=-1,e.recycle_normal_level=-1,e.recycle_nirvana_ream=-1,e.recycle_ultimate_p=-1,e.recycle_equip_illbooks=-1,e.localKey="SettingModel",e.levelList=[],e.runeList1=[1,2,3,4,5,6],e.persentList=[],e.levelSelet=0,e.runeSelet=0,e.persentSelet=0,e.click_zhuzhan=!1,e.click_huishou=!1,e}();i.SettingModel=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GameConst":"GameConst","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","./RoleInfoModel":"RoleInfoModel"}],SettingView:[function(e,t,i){"use strict";cc._RF.push(t,"9b1c3UFNmtMP6dpLYoALcoX","SettingView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/HelloSlider"),r=e("../../../engine/LocalStorage"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/GameConfig"),f=e("../../config/ViewConfig"),g=e("../../config/WordConfig"),h=e("../../event/CommonEvent"),u=e("../../GameController"),p=e("../../model/AnnouncementModel"),m=e("../../model/PostModel"),C=e("../../model/RoleInfoModel"),_=e("../../model/SettingModel"),v=e("../../model/TaskModel"),y=e("../../network/HttpHelper"),b=e("../../network/SocketClient"),I=e("../../sdk/FeiYouSdkManager"),M=e("../../sdk/SdkHandler"),w=e("../../sdk/SdkHelper"),k=e("../../sdk/SdkManager"),S=e("../../utils/JumpActionUtils"),P=e("../../utils/MusicHelper"),E=e("../../utils/NameHelper"),L=e("./DropDownBox"),T=cc._decorator,R=T.ccclass,N=(T.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){var e=this;v.TaskModel.s_update_task_info(1034),v.TaskModel.s_update_task_info(1062),v.TaskModel.s_update_task_info(1058),a.EventManager.instance.on(h.CommonEvent.Event_Refresh_Recycle,this.refresh,this),a.EventManager.instance.on(h.CommonEvent.Event_Refresh_Post,this.refreshMailDot,this),a.EventManager.instance.on(h.CommonEvent.Event_FeiYou_BindSuc,this.onFeiYouBindSuc,this);var t=this;a.EventManager.instance.on("GUIDE_10502",function(e){t.onSkillEq(),this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/conditionSkill/auto/checkmark").active=!0}.bind(this),this),a.EventManager.instance.on("GUIDE_10503",function(e){t.onOrdinaryEq(),this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/condition2/auto/checkmark").active=!0}.bind(this),this),a.EventManager.instance.on("GUIDE_10504",function(e){t.onExcellentEq(),this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/condition3/auto/checkmark").active=!0}.bind(this),this),this.btnBindPhone=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnBindPhone"),this.btnBindPhone.active=!1,this.btnSwitchAccount=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnSwitchAccount"),this.btnSwitchAccount.active=!1,this.btnCustomer=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnCustomer"),this.btnCustomer.active=!1,this.button_fanhui=this.node.getChildByName("button_fanhui"),this.btnQuestionnaire=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnQuestionnaire"),this.btnQuestRedPoint=this.findChild(this.btnQuestionnaire,"redPoint"),this.btnDc=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnDc"),this.btnFb=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnFb"),this.btnQuestionnaire.active=d.GameConfig.isOpenQusetionnaire&&C.default.instance.level>=52,this.webView=this.findChild(this.node,"webView").getComponent(cc.WebView),this.onAddEvent(this.btnDc,function(){(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.isBrowser)&&cc.sys.openURL("https://discord.gg/fTFhX4jETf")}),this.onAddEvent(this.btnFb,function(){(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.isBrowser)&&cc.sys.openURL("https://www.facebook.com/MudLegend")}),this.onAddEvent(this.btnQuestionnaire,function(){r.default.setItem("questRedPoint","true"),e.btnQuestRedPoint.active=!1,a.EventManager.instance.dispatch(h.CommonEvent.Event_Refresh_Post),w.default.isSampIos()?e.webView.node.active=!0:(cc.sys.os==cc.sys.OS_ANDROID||cc.sys.isBrowser)&&cc.sys.openURL("https://www.wjx.cn/vj/rX5khLI.aspx")}),this.btnQuestRedPoint.active=d.GameConfig.isOpenQusetionnaire&&null==r.default.getItem("questRedPoint"),this.onAddEvent(this.button_fanhui,function(){e.closeView()});var i=this.getChild(this.node,"view/ScrollView/view/content");this.pnlPickUp=this.getChild(i,"pnlPickUp");var n=this.getChild(this.pnlPickUp,"txtCode",cc.EditBox),o=this.getChild(this.pnlPickUp,"tu");n.node.active=!0,o.active=!0,d.GameConfig.sdkType,d.SdkType.Feiyou,this.initSdk(),this.refreshMailDot()},t.prototype.initSdk=function(){this.btnDc.active=d.GameConfig.sdkType==d.SdkType.LoongCheer,this.btnFb.active=d.GameConfig.sdkType==d.SdkType.LoongCheer,d.GameConfig.sdkType==d.SdkType.Feiyou?(I.FeiYouSdkManager.hasBindPlatformAccount()?this.btnBindPhone.active=!1:(this.btnBindPhone.active=!0,this.onAddEvent(this.btnBindPhone,function(){I.FeiYouSdkManager.bindPlatformAccount()})),this.onAddEvent(this.btnSwitchAccount,function(){I.FeiYouSdkManager.sdkLogout(),u.default.instance.restartGame()}),this.btnSwitchAccount.active=!0,I.FeiYouSdkManager.isGmCenterEnable()&&(this.btnCustomer.active=!0,this.onAddEvent(this.btnCustomer,function(){I.FeiYouSdkManager.openGmCenter()}))):(this.onAddEvent(this.btnSwitchAccount,function(){k.default.sdkAuth(M.AuthType.loginOut),u.default.instance.restartGame()}),this.btnCustomer.active=d.GameConfig.sdkType==d.SdkType.KoreaBingNiao,this.onAddEvent(this.btnCustomer,function(){k.default.sdkAuth(M.AuthType.sdkSprite)})),this.btnSwitchAccount.active=d.GameConfig.sdkType==d.SdkType.LoongCheer||d.GameConfig.sdkType==d.SdkType.LongRui||d.GameConfig.sdkType==d.SdkType.KoreaBingNiao},t.prototype.onFeiYouBindSuc=function(){this.btnBindPhone.active=!1},t.prototype.refreshMailDot=function(){this.ui_hongdian=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnPost/ui_hongdian"),this.ui_hongdian.active=!1;var e=this.getChild(this.node,"view/ScrollView",cc.ScrollView);c.default.instance.isOpen(f.default.gameView.guideView)||m.default.getHadAllRead()?c.default.instance.isOpen(f.default.gameView.guideView)&&!m.default.getHadAllRead()?(this.ui_hongdian.active=!0,e.scrollToTop()):!c.default.instance.isOpen(f.default.gameView.guideView)&&m.default.getHadAllRead()?(this.ui_hongdian.active=!1,e.scrollToTop()):(e.scrollToTop(),this.ui_hongdian.active=!1):(this.ui_hongdian.active=!0,e.scrollToBottom())},t.prototype.onClickBg=function(){a.EventManager.instance.dispatch(h.CommonEvent.Event_SettingBgClick)},t.prototype.onShow=function(){this.node.getChildByName("bg");var e=this.getChild(this.node,"view/ScrollView/view/content");e.on(cc.Node.EventType.TOUCH_END,this.onClickBg.bind(this)),this.pnlSkill=this.getChild(e,"pnlSkill/skill"),this.pnlReply=this.getChild(e,"pnlReply");var t=this.getChild(this.pnlReply,"ordinaryHp"),i=this.getChild(this.pnlReply,"ordinaryMp"),n=this.getChild(this.pnlReply,"seniorHp"),o=this.getChild(this.pnlReply,"seniorMp");this.addProgressBar(t,1),this.addProgressBar(i,2),this.addProgressBar(n,3),this.addProgressBar(o,4),a.EventManager.instance.on(h.CommonEvent.Event_Auto_Medicine,this.refreshMedicineSettingBySever,this),this.pnlPickUp=this.getChild(e,"pnlPickUp");var s=this.findChild(this.pnlPickUp,"condition1/auto"),r=this.findChild(this.pnlPickUp,"condition2/auto"),l=this.findChild(this.pnlPickUp,"condition3/auto"),d=this.findChild(this.pnlPickUp,"condition4/auto"),g=this.findChild(this.pnlPickUp,"condition8/auto"),u=this.findChild(this.pnlPickUp,"conditionSkill/auto"),m=this.findChild(this.pnlPickUp,"setSound/auto"),C=this.findChild(this.pnlPickUp,"equipPowerUp/auto"),v=this.findChild(this.pnlPickUp,"conditionTuJian/auto");this.btnExchange=this.getChild(this.pnlPickUp,"txtCode/getBtn"),this.btnPost=this.getChild(this.pnlPickUp,"btnList/btnPost");var y=this.getChild(this.pnlPickUp,"Label5/privilege");y.active=!0;var b=this.getChild(this.pnlPickUp,"Label5/helpGift");b.active=!0,this.onAddEvent(y,function(){_.SettingModel.click_huishou=!0,c.default.instance.createView(f.default.gameView.topUp)}),this.onAddEvent(b,function(){_.SettingModel.click_zhuzhan=!0,c.default.instance.createView(f.default.gameView.topUp)});var I=this.findChild(this.node,"view/ScrollView/view/content/pnlPickUp/btnList/btnPaihang");this.onAddEvent(I,function(){S.default.doAction(S.FunctionIdList.Rank)}),this.spGonggaoRed=this.getChild(this.pnlPickUp,"btnList/btnGongGao/redGonggaoPoint"),this.spGonggaoRed&&(this.spGonggaoRed.active=p.default.instance.needShowRed),this.onAddEvent(this.getChild(this.pnlPickUp,"btnList/btnGongGao"),this.onShowGG.bind(this)),this.onAddEvent(this.btnPost,this.onEnterPost.bind(this)),this.onAddEvent(this.btnExchange,this.onActivationcode.bind(this)),this.onAddEvent(s,this.onNotItselfEq.bind(this)),this.onAddEvent(r,this.onOrdinaryEq.bind(this)),this.onAddEvent(l,this.onExcellentEq.bind(this)),this.onAddEvent(d,this.onExcellentSEq.bind(this)),this.onAddEvent(g,this.onPurpleEq.bind(this)),this.onAddEvent(u,this.onSkillEq.bind(this)),this.onAddEvent(m,this.onSoundEffects.bind(this)),this.onAddEvent(C,this.onEquipPowerUp.bind(this)),this.onAddEvent(v,this.onTuJian.bind(this));var M=this.findChild(this.pnlPickUp,"condition5/auto");this.onAddEvent(M,this.onLevelEq.bind(this)),this.dropBox1=this.findChild(this.pnlPickUp,"condition5/dropBox"),this.onAddEvent(this.dropBox1.getChildByName("DropDownBox"),this.ondropBox1Click.bind(this,this.dropBox1)),this.dropBox1.getComponent(L.default).init(_.SettingModel.getLevelList(),1);var w=this.findChild(this.pnlPickUp,"condition6/auto");this.onAddEvent(w,this.onRuneEq.bind(this)),this.dropBox2=this.findChild(this.pnlPickUp,"condition6/dropBox"),this.onAddEvent(this.dropBox2.getChildByName("DropDownBox"),this.ondropBox1Click.bind(this,this.dropBox2)),this.dropBox2.getComponent(L.default).init(_.SettingModel.getRuneList(),2);var k=this.findChild(this.pnlPickUp,"condition7/auto");this.onAddEvent(k,this.onJipinEq.bind(this)),this.dropBox3=this.findChild(this.pnlPickUp,"condition7/dropBox"),this.onAddEvent(this.dropBox3.getChildByName("DropDownBox"),this.ondropBox1Click.bind(this,this.dropBox3)),this.dropBox3.getComponent(L.default).init(_.SettingModel.getpersentList(),3),this.initRecycle()},t.prototype.onShowGG=function(e){var t=this;void 0===e&&(e=!0),y.default.getNotify(function(i){i&&i.data&&c.default.instance.createView(f.default.gameView.AnnouncementView,null,i.data,e);var n=JSON.stringify(i.data);p.default.instance.saveContent(n),t.spGonggaoRed&&(t.spGonggaoRed.active=!1)})},t.prototype.onEnterPost=function(){c.default.instance.createView(f.default.gameView.PostView)},t.prototype.refresh=function(){this.initRecycle(),this.dropBox1.getComponent(L.default).refresh(),this.dropBox2.getComponent(L.default).refresh(),this.dropBox3.getComponent(L.default).refresh()},t.prototype.refreshMedicineSettingBySever=function(){var e=this.getChild(this.pnlReply,"ordinaryHp"),t=this.getChild(this.pnlReply,"ordinaryMp"),i=this.getChild(this.pnlReply,"seniorHp"),n=this.getChild(this.pnlReply,"seniorMp");this.refreshMedicineItem(e,_.SettingModel.hpSetPt,_.SettingModel.hpSet),this.refreshMedicineItem(t,_.SettingModel.mpSetPt,_.SettingModel.mpSet),this.refreshMedicineItem(i,_.SettingModel.highHpSetPt,_.SettingModel.highHpSet),this.refreshMedicineItem(n,_.SettingModel.highMpSetPt,_.SettingModel.highMpSet)},t.prototype.refreshMedicineItem=function(e,t,i){},t.prototype.addProgressBar=function(e,t){var i=this.getChild(e,"check"),n=[null,_.SettingModel.hpSetPt,_.SettingModel.mpSetPt,_.SettingModel.highHpSetPt,_.SettingModel.highMpSetPt],o=[null,_.SettingModel.hpSet,_.SettingModel.mpSet,_.SettingModel.highHpSet,_.SettingModel.highMpSet];i.getComponent(cc.Toggle).isChecked=o[t];var a=this.getChild(e,"helloSlider");a.getComponent(s.default).init(n[t],function(e){var i=a.getComponent(s.default).getProGress();switch(t){case 1:_.SettingModel.hpSetPt=i;break;case 2:_.SettingModel.mpSetPt=i;break;case 3:_.SettingModel.highHpSetPt=i;break;case 4:_.SettingModel.highMpSetPt=i}},function(e){var i=.9*a.getComponent(s.default).getProGress();switch(t){case 1:_.SettingModel.hpSetPt=i;break;case 2:_.SettingModel.mpSetPt=i;break;case 3:_.SettingModel.highHpSetPt=i;break;case 4:_.SettingModel.highMpSetPt=i}b.default.s_seq_auto_medicine()}),i.on("click",function(e){switch(P.MusicHelper.play_click(),t){case 1:_.SettingModel.hpSet=!_.SettingModel.hpSet;break;case 2:_.SettingModel.mpSet=!_.SettingModel.mpSet;break;case 3:_.SettingModel.highHpSet=!_.SettingModel.highHpSet;break;case 4:_.SettingModel.highMpSet=!_.SettingModel.highMpSet}b.default.s_seq_auto_medicine()},this)},t.prototype.initRecycle=function(){for(var e=[_.SettingModel.recycle_ultimate_p,_.SettingModel.recycle_nirvana_ream,_.SettingModel.recycle_normal_level,_.SettingModel.recycle_purple,_.SettingModel.recycle_blue,_.SettingModel.recycle_green,_.SettingModel.recycle_white,_.SettingModel.recycle_skillbooks,_.SettingModel.recycle_self_equip,_.SettingModel.recycle_equip_illbooks,_.SettingModel.soundEffects,_.SettingModel.recycle_equip_tips],t=["condition7/auto","condition6/auto","condition5/auto","condition8/auto","condition4/auto","condition3/auto","condition2/auto","conditionSkill/auto","condition1/auto","conditionTuJian/auto","setSound/auto","equipPowerUp/auto"],i=0;i<t.length;i++){var n=this.findChild(this.pnlPickUp,t[i]).getComponent(cc.Toggle);n.isChecked="setSound/auto"==t[i]?_.SettingModel.soundEffects||!1:e[i]>0||!1}},t.prototype.onNotItselfEq=function(e){P.MusicHelper.play_click(),_.SettingModel.recycle_self_equip*=-1,b.default.s_recycle_options()},t.prototype.onSkillEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_skillbooks*=-1,b.default.s_recycle_options()},t.prototype.onOrdinaryEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_white*=-1,b.default.s_recycle_options()},t.prototype.onExcellentEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_green*=-1,b.default.s_recycle_options()},t.prototype.onExcellentSEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_blue*=-1,b.default.s_recycle_options()},t.prototype.onPurpleEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_purple*=-1,b.default.s_recycle_options()},t.prototype.onLevelEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_normal_level*=-1,_.SettingModel.recycle_normal_level<=-1&&(_.SettingModel.recycle_normal_level=-1),_.SettingModel.recycle_normal_level>0&&(_.SettingModel.recycle_normal_level=_.SettingModel.getLevelList()[_.SettingModel.levelSelet]),b.default.s_recycle_options()},t.prototype.onRuneEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_nirvana_ream*=-1,_.SettingModel.recycle_nirvana_ream<=-1&&(_.SettingModel.recycle_nirvana_ream=-1),_.SettingModel.recycle_nirvana_ream>0&&(_.SettingModel.recycle_nirvana_ream=_.SettingModel.runeList1[_.SettingModel.runeSelet]),b.default.s_recycle_options()},t.prototype.onJipinEq=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_ultimate_p*=-1,_.SettingModel.recycle_ultimate_p<=-1&&(_.SettingModel.recycle_ultimate_p=-1),_.SettingModel.recycle_ultimate_p>0&&(_.SettingModel.recycle_ultimate_p=_.SettingModel.getpersentList()[_.SettingModel.persentSelet]),b.default.s_recycle_options()},t.prototype.onSoundEffects=function(){this.getChild(this.pnlPickUp,"setSound/auto",cc.Toggle);_.SettingModel.soundEffects=!_.SettingModel.soundEffects,_.SettingModel.saveToLocalStorage(),P.MusicHelper.play_click()},t.prototype.onEquipPowerUp=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_equip_tips*=-1,b.default.s_recycle_options()},t.prototype.onTuJian=function(){P.MusicHelper.play_click(),_.SettingModel.recycle_equip_illbooks*=-1,b.default.s_recycle_options()},t.prototype.onActivationcode=function(){var e=this.getChild(this.pnlPickUp,"txtCode",cc.EditBox);""!=e.string&&(E.NameHelper.hadChinaWord(e.string.trim().toLowerCase())?g.WordConfig.showWord(60368):b.default.sendCode(e.string.trim().toLowerCase()))},t.prototype.ondropBox1Click=function(e){e.getComponent(L.default).showDropBox()},t=o([R],t)}(l.default));i.default=N,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/HelloSlider":"HelloSlider","../../../engine/LocalStorage":"LocalStorage","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../GameController":"GameController","../../config/GameConfig":"GameConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/AnnouncementModel":"AnnouncementModel","../../model/PostModel":"PostModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/SettingModel":"SettingModel","../../model/TaskModel":"TaskModel","../../network/HttpHelper":"HttpHelper","../../network/SocketClient":"SocketClient","../../sdk/FeiYouSdkManager":"FeiYouSdkManager","../../sdk/SdkHandler":"SdkHandler","../../sdk/SdkHelper":"SdkHelper","../../sdk/SdkManager":"SdkManager","../../utils/JumpActionUtils":"JumpActionUtils","../../utils/MusicHelper":"MusicHelper","../../utils/NameHelper":"NameHelper","./DropDownBox":"DropDownBox"}],SevenDayLoginConfig:[function(e,t,i){"use strict";cc._RF.push(t,"28fe2bZbUxAR4fhluSsqeGs","SevenDayLoginConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},e.getConfigById=function(e){return this.configMap.get(e)},e.getConfig=function(){return this.configList},e.Config_Name="sevenDayLoginConfig",e.configMap=new Map,e.configList=[],e}();i.SevenDayLoginConfig=n,cc._RF.pop()},{}],SevenDayLoginModel:[function(e,t,i){"use strict";cc._RF.push(t,"2b7f98hx6dHD7QhGEwJtwBv","SevenDayLoginModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../event/CommonEvent"),c=e("../manager/RedPointManager"),l=function(){return function(){}}();i.RewardInfo=l;var d=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[c.RedPointId.Activity_Seven_Login],this.protos=[a.ProtoConfig.c_activity_seven_login_info,a.ProtoConfig.c_activity_seven_login_reward],c.default.getInstance().addHandler(this)}return e.proto2Model=function(t){this.model=this.model?this.model:new e;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_activity_seven_login_info,t);for(var c in this.loginDays=i.getLogindays(),this.awards=new Array,i.getAwardsList())if(Object.prototype.hasOwnProperty.call(i.getAwardsList(),c)){var d=i.getAwardsList()[c],f=new l;f.index=d.getIndex(),f.state=d.getState(),this.awards.push(f)}o.Logger.log("c_activity_seven_login_info=====",i),n.EventManager.instance.dispatch(r.CommonEvent.Event_SevenDayLogin_refresh)},e.proto2Award=function(e){var t=this,i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_activity_seven_login_reward,e);if(o.Logger.log("c_activity_seven_login_reward=====",i),0==i.getRet()){var c=i.getIndex(),l=i.getState();this.awards.every(function(e,i){return e.index!=c||(t.awards[i].state=l,!1)}),n.EventManager.instance.dispatch(r.CommonEvent.Event_SevenDayLogin_refresh)}},e.getAwardById=function(e){var t;return this.awards.every(function(i,n){return i.index!=e||(t=i,!1)}),t},e.prototype.checkRedPoint=function(){var t=!1;e.awards.every(function(e){return 1!=e.state||(t=!0,!1)});var i={id:c.RedPointId.Activity_Seven_Login,type:c.RedPointType.Default,show:t};return[].push(i),i},e.awards=[],e}();i.default=d,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],SevenDayLoginView:[function(e,t,i){"use strict";cc._RF.push(t,"58318H9DI9GJJRr6GH2jhKO","SevenDayLoginView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ViewBase"),r=e("../../config/EquipConfig"),c=e("../../config/GameConst"),l=e("../../config/ITemsConfig"),d=e("../../config/SevenDayLoginConfig"),f=e("../../config/WordConfig"),g=e("../../event/CommonEvent"),h=e("../../model/ItemInfoModel"),u=e("../../model/SevenDayLoginModel"),p=e("../../network/SocketClient"),m=e("../../prefab/ItemPrefab"),C=e("../../utils/UIHelper"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){this.selcetIndex=void 0,a.EventManager.instance.on(g.CommonEvent.Event_SevenDayLogin_refresh,this.initView,this),p.default.s_activity_seven_login_info()},t.prototype.initFindNode=function(){this.taksListNode=this.findChild(this.node,"frame/info/taksList"),this.awardinfoDayLabel=this.findChild(this.node,"frame/info/awardinfo/day/num").getComponent(cc.Label),this.awardListNode=this.findChild(this.node,"frame/info/awardinfo/awardList"),this.awardNode=this.findChild(this.awardListNode,"ItemPrefab"),this.btnUnReceiveNode=this.findChild(this.node,"frame/info/stauts/btnUnReceive"),this.btnReceiveNode=this.findChild(this.node,"frame/info/stauts/btnReceive"),this.btnReceived=this.findChild(this.node,"frame/info/stauts/btnReceived")},t.prototype.initView=function(){var e=this,t=d.SevenDayLoginConfig.getConfig();this.taksListNode.children.forEach(function(i,n){e.initTaskCell(i,t[n]),e.onAddEvent(i,e.onBtnTaskClicked.bind(e,i,t[n],!0))})},t.prototype.initTaskCell=function(e,t){var i=this.findChild(e,"day").getComponent(cc.Label),n=this.findChild(e,"received"),o=this.findChild(e,"receive"),a=this.findChild(e,"mask"),s=this.findChild(e,"select"),r=u.default.getAwardById(t.id);this.selcetIndex?(s.active=this.selcetIndex==t.id,this.selcetIndex==t.id&&this.setSelectInfo(t)):(s.active=this.getInitSelectTask(t.id),this.getInitSelectTask(t.id)&&this.setSelectInfo(t)),this.getInitSelectTask(void 0)&&this.setSelectInfo(t),i.string=cc.js.formatStr(f.WordConfig.getWord(60438),t.day),n.active=r&&2==r.state,o.active=r&&1==r.state,a.active=r&&2==r.state},t.prototype.getInitSelectTask=function(e){var t;return u.default.loginDays>=d.SevenDayLoginConfig.getConfig()[0].day?(u.default.awards.every(function(e){return 1!=e.state||(t=e.index,!1)}),t=void 0==t?u.default.awards[u.default.awards.length-1].index:t):t=1,e==t},t.prototype.setSelectInfo=function(e){var t=u.default.getAwardById(e.id);this.awardinfoDayLabel.string=cc.js.formatStr(f.WordConfig.getWord(60438),e.day);var i=0;if(this.awardListNode.children.forEach(function(e){e.active=!1}),e.ress)for(var n in e.ress)if(Object.prototype.hasOwnProperty.call(e.ress,n)){var o=e.ress[n],a=void 0;i<this.awardListNode.childrenCount?a=this.awardListNode.children[i]:(a=cc.instantiate(this.awardNode)).parent=this.awardListNode,a.active=!0,a.getComponent(m.default).initResource(parseInt(n),o),i++}if(e.item)for(var n in e.item)if(Object.prototype.hasOwnProperty.call(e.item,n)){o=e.item[n],a=void 0;i<this.awardListNode.childrenCount?a=this.awardListNode.children[i]:(a=cc.instantiate(this.awardNode)).parent=this.awardListNode,a.active=!0;var s=l.ITemsConfig.getITemsConfigById(n),d=h.default.create(c.GameConst.ITEM_KIND.ITEM,s.id,o,s.quality);a.getComponent(m.default).init(d,!0),i++}if(e.equip)for(var n in e.equip)if(Object.prototype.hasOwnProperty.call(e.equip,n)){o=e.equip[n],a=void 0;i<this.awardListNode.childrenCount?a=this.awardListNode.children[i]:(a=cc.instantiate(this.awardNode)).parent=this.awardListNode,a.active=!0;d=void 0;d=(s=r.EquipConfig.getEquipConfigById(n)).dingzhi?h.default.createDingZhiEquip(n):h.default.create(c.GameConst.ITEM_KIND.EQUIP,n),a.getComponent(m.default).init(d,!0),i++}this.btnReceiveNode.active=t&&1==t.state,this.btnUnReceiveNode.active=!t||0==t.state,this.btnReceived.active=t&&2==t.state,this.onAddEvent(this.btnReceiveNode,this.onBtnReceiveClicked.bind(this,e,!0)),this.onAddEvent(this.btnUnReceiveNode,this.onBtnReceiveClicked.bind(this,e,!1))},t.prototype.onBtnTaskClicked=function(e,t){var i=this;this.taksListNode.children.forEach(function(e){i.findChild(e,"select").active=!1}),this.selcetIndex=t.id,this.initTaskCell(e,t),this.setSelectInfo(t)},t.prototype.onBtnReceiveClicked=function(e,t){if(t)p.default.s_activity_seven_login_reward(e.id);else{var i=cc.js.formatStr(f.WordConfig.getWord(60343),e.day);C.UIHelper.showTip(i)}},t=o([v],t)}(s.default));i.default=y,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/SevenDayLoginConfig":"SevenDayLoginConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/SevenDayLoginModel":"SevenDayLoginModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/UIHelper":"UIHelper"}],ShaderHelper:[function(e,t,i){"use strict";cc._RF.push(t,"e4071YuFzJJq4IbI98IBslE","ShaderHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/prefab/ShaderMaterialPrefab"),o=function(){function e(){}return e.clearAllEffect=function(e,t){void 0===t&&(t=n.default.instance.getComponent(n.default).default),e.getComponents(cc.RenderComponent).forEach(function(e){e.setMaterial(0,t)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){e.setMaterial(0,t)})})},e.setGrayEffect=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=n.default.instance.getComponent(n.default).grayMaterial),e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("grayLevel",t),e.setMaterial(0,n)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("grayLevel",t),e.setMaterial(0,n)})})},e.showGrayMv=function(t){var i=.5,n=setInterval(function(){(i+=.01)>=1&&(i=1,clearInterval(n)),t&&e.setGrayEffect(t,i)},1)},e.setOldPhotoEffect=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=n.default.instance.getComponent(n.default).oldPhoto),e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("oldLevel",t),e.setMaterial(0,n)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("oldLevel",t),e.setMaterial(0,n)})})},e.showOldPhotoMv=function(t){var i=0,n=setInterval(function(){(i+=.01)>=1&&(i=1,clearInterval(n)),t&&e.setOldPhotoEffect(t,i)},1)},e.setGlowInner=function(e,t,i){void 0===i&&(i=n.default.instance.getComponent(n.default).glowInner),e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("glowColor",t.glowColor),n.setProperty("glowColorSize",t.glowColorSize),n.setProperty("glowThreshold",t.glowThreshold),e.setMaterial(0,n)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("glowColor",t.glowColor),n.setProperty("glowColorSize",t.glowColorSize),n.setProperty("glowThreshold",t.glowThreshold),e.setMaterial(0,n)})})},e.setCommonGlowInner=function(e,t){void 0===t&&(t=cc.Color.WHITE),this.setGlowInner(e,{glowColor:t,glowColorSize:.015,glowThreshold:.1})},e.showGreenHatFlash=function(t,i,n,o){void 0===n&&(n=1),void 0===o&&(o=cc.Color.GREEN);var a=0,s=setInterval(function(){var n=.08*(a+=1)+.05;e.setGlowInner(t,{glowColor:cc.Color.GREEN,glowColorSize:n,glowThreshold:.1}),a>=12&&(clearInterval(s),i&&i())},2e3/12)},e.showFlash=function(e,t,i){var n=this;void 0===t&&(t=1),void 0===i&&(i=cc.Color.GREEN);var o=0,a=0,s=setInterval(function(){(o+=1)%50==0&&(o/50%2==0?(i.setA(100),n.setGlowInner(e,{glowColor:i,glowColorSize:.1,glowThreshold:0})):(a++,n.setGlowInner(e,{glowColor:i,glowColorSize:0,glowThreshold:0}),a>t&&clearInterval(s)))},1)},e.setMosaic=function(e,t,i){void 0===i&&(i=n.default.instance.getComponent(n.default).mosaic),e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("xBlockCount",t.xBlockCount),n.setProperty("yBlockCount",t.yBlockCount),e.setMaterial(0,n)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("xBlockCount",t.xBlockCount),n.setProperty("yBlockCount",t.yBlockCount),e.setMaterial(0,n)})})},e.showMosaicMv=function(e,t){var i=this;void 0===t&&(t=null);var n=50,o=setInterval(function(){n-=2,i.setMosaic(e,{xBlockCount:n,yBlockCount:n}),n<=0&&(clearInterval(o),t&&t())},40)},e.setRoundCornerCrop=function(e,t,i){void 0===t&&(t=.1),void 0===i&&(i=n.default.instance.getComponent(n.default).roundCornerCrop),e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("xRadius",t),n.setProperty("yRadius",t),e.setMaterial(0,n)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(i,e);n.setProperty("xRadius",t),n.setProperty("yRadius",t),e.setMaterial(0,n)})})},e.setFlashLight=function(e,t,i,o,a,s,r,c){void 0===o&&(o=0),void 0===a&&(a=!0),void 0===s&&(s=!0),void 0===r&&(r=!1),void 0===c&&(c=n.default.instance.getComponent(n.default).flashLight),e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(c,e);n.setProperty("lightColor",t),n.setProperty("lightWidth",i),n.setProperty("lightAngle",o),n.setProperty("enableGradient",a),n.setProperty("cropAlpha",s),n.setProperty("enableFog",r),e.setMaterial(0,n)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){var n=cc.MaterialVariant.create(c,e);n.setProperty("lightColor",t),n.setProperty("lightWidth",i),n.setProperty("lightAngle",o),n.setProperty("enableGradient",a),n.setProperty("cropAlpha",s),n.setProperty("enableFog",r),e.setMaterial(0,n)})})},e.showFlashLightMv=function(t,i){var n=this;void 0===i&&(i=null);var o=cc.color(0,0,0,255),a=0,s=0,r=setInterval(function(){if(0==a)o.setR(o.getR()+2),o.getR()>=255&&(a+=1);else if(1==a)o.setG(o.getG()+2),o.getG()>=255&&(a+=1);else if(o.setB(o.getB()+2),o.getB()>=255)return clearInterval(r),e.clearAllEffect(t),void(i&&i());s+=1,n.setFlashLight(t,o,1,s)},1)},e.setFlag=function(e,t){void 0===t&&(t=n.default.instance.getComponent(n.default).flag),e.getComponents(cc.RenderComponent).forEach(function(e){e.setMaterial(0,t)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){e.setMaterial(0,t)})})},e.setGaussian=function(e,t){void 0===t&&(t=n.default.instance.getComponent(n.default).gaussian),e.getComponents(cc.RenderComponent).forEach(function(e){var i=cc.MaterialVariant.create(t,e);i.setProperty("textureSize",cc.v2(e.node.width,e.node.height)),e.setMaterial(0,i)}),e.children.forEach(function(e){e.getComponents(cc.RenderComponent).forEach(function(e){var i=cc.MaterialVariant.create(t,e);i.setProperty("textureSize",cc.v2(e.node.width,e.node.height)),e.setMaterial(0,i)})})},e}();i.default=o,cc._RF.pop()},{"../game/prefab/ShaderMaterialPrefab":"ShaderMaterialPrefab"}],ShaderMaterialPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"7c56cZwawZM8aYGevYiajy2","ShaderMaterialPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.default=null,t.grayMaterial=null,t.oldPhoto=null,t.glowInner=null,t.mosaic=null,t.roundCornerCrop=null,t.flashLight=null,t.flag=null,t.gaussian=null,t}var i;return n(t,e),i=t,t.preLoad=function(){return new Promise(function(e,t){cc.loader.loadRes("game/prefab/ShaderMaterialPrefab",function(t,n){t||(i.instance=cc.instantiate(n),e())})})},o([r({type:cc.Material})],t.prototype,"default",void 0),o([r({type:cc.Material})],t.prototype,"grayMaterial",void 0),o([r({type:cc.Material})],t.prototype,"oldPhoto",void 0),o([r({type:cc.Material})],t.prototype,"glowInner",void 0),o([r({type:cc.Material})],t.prototype,"mosaic",void 0),o([r({type:cc.Material})],t.prototype,"roundCornerCrop",void 0),o([r({type:cc.Material})],t.prototype,"flashLight",void 0),o([r({type:cc.Material})],t.prototype,"flag",void 0),o([r({type:cc.Material})],t.prototype,"gaussian",void 0),t=i=o([s],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],ShenBinModel:[function(e,t,i){"use strict";cc._RF.push(t,"8955ed92HJE5KqIHjDkQF3X","ShenBinModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../event/CommonEvent"),o=e("../../engine/EventManager"),a=e("../../engine/ProtoConfig"),s=e("../manager/RedPointManager"),r=e("../config/ChiXueMoJianConfig"),c=e("./RoleInfoModel"),l=e("../config/ShenbingskillAllConfig"),d=e("./ItemInfoModel"),f=e("../config/MingYunZhiRenConfig"),g=e("../config/ShihunfazhangConfig"),h=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[s.RedPointId.shenbin,s.RedPointId.shenbin_0,s.RedPointId.shenbin_1,s.RedPointId.shenbin_2],this.protos=[a.ProtoConfig.c_seq_shenbing,a.ProtoConfig.c_update_item_info],s.default.getInstance().addHandler(this)}return e.proto2ModelList=function(t){new e;for(var i=t.getShenbingListList(),a=0;a<i.length;a++){var s=new e;s.shenbingId=i[a].getNewid(),s.shenbingType=i[a].getShenbingtype(),this.modelList[a]=s}o.EventManager.instance.dispatch(n.CommonEvent.Event_RefreshShenbin,1)},e.getShenBinModelByType=function(t){var i=new e;i.shenbingType=t,i.shenbingId=0;for(var n=0;n<this.modelList.length;n++)this.modelList[n].shenbingType==t&&(i=this.modelList[n]);return i},e.prototype.checkRedPoint=function(){var t,i,n,o=[],a=e.getShenBinModelByType(e.CHIXUEMOJIAN),h=r.ChiXueMoJianConfig.getChixuemojianConfigById(a.shenbingId),u=l.ShenbingskillAllConfig.getkeyAndValue(h.cost1),p=d.default.getItem(u[0][0]+"");p&&h&&(t=c.default.instance.level>=h.need_level&&p.itemCnt>=u[0][1]&&c.default.instance.getCoin()>=h.cost2[1]&&h.cost2[1]>0);var m=e.getShenBinModelByType(e.MINGYUNZHIREN),C=f.MingYunZhiRenConfig.getJingJieConfigById(m.shenbingId),_=l.ShenbingskillAllConfig.getkeyAndValue(C.cost1),v=d.default.getItem(_[0][0]+"");v&&C&&(i=c.default.instance.level>=C.need_level&&v.itemCnt>=_[0][1]&&c.default.instance.getCoin()>=C.cost2[1]&&C.cost2[1]>0);var y=e.getShenBinModelByType(e.SHIHUNFAZHANG),b=g.ShihunfazhangConfig.getConfigById(y.shenbingId),I=l.ShenbingskillAllConfig.getkeyAndValue(b.cost1),M=d.default.getItem(I[0][0]+"");M&&b&&(n=c.default.instance.level>=b.need_level&&M.itemCnt>=I[0][1]&&c.default.instance.getCoin()>=b.cost2[1]&&b.cost2[1]>0);var w={id:s.RedPointId.shenbin_0,type:s.RedPointType.Default,show:t};o.push(w);var k={id:s.RedPointId.shenbin_1,type:s.RedPointType.Default,show:i};o.push(k);var S={id:s.RedPointId.shenbin_2,type:s.RedPointType.Default,show:n};o.push(S);var P={id:s.RedPointId.shenbin,type:s.RedPointType.Default,show:t||i||n};return o.push(P),o},e.CHIXUEMOJIAN=1,e.MINGYUNZHIREN=2,e.SHIHUNFAZHANG=3,e.count=3,e.modelList=[],e}();i.ShenBinModel=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../config/ChiXueMoJianConfig":"ChiXueMoJianConfig","../config/MingYunZhiRenConfig":"MingYunZhiRenConfig","../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../config/ShihunfazhangConfig":"ShihunfazhangConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./ItemInfoModel":"ItemInfoModel","./RoleInfoModel":"RoleInfoModel"}],ShenBinRuleView:[function(e,t,i){"use strict";cc._RF.push(t,"34c32D0lN1PrZwChIapgom+","ShenBinRuleView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../config/ViewConfig"),r=e("../../../engine/ViewBase"),c=e("../../config/ColorConfig"),l=e("../../config/GameConst"),d=e("../../model/ShenBinModel"),f=e("../../config/RuleConfig"),g=e("../PublicTipView"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.showType=e,this.txtContent=this.findChild(this.node,"panel/txtContent")},t.prototype.onShow=function(){a.default.instance.setTopUI(s.default.gameView.ShenBinRuleView),this.showType==d.ShenBinModel.CHIXUEMOJIAN?this.txtContent.getComponent(cc.RichText).string=f.default.getConfigById(g.RuleType.TYPE_CHIXUEMOJIAN).desc:this.showType==d.ShenBinModel.MINGYUNZHIREN?this.txtContent.getComponent(cc.RichText).string=cc.js.formatStr(f.default.getConfigById(g.RuleType.TYPE_MINGYUNZHIREN).desc,c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.GREEN),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.BLUE),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.PURPLE),c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.ORANGE)):this.showType==d.ShenBinModel.SHIHUNFAZHANG&&(this.txtContent.getComponent(cc.RichText).string=cc.js.formatStr(f.default.getConfigById(g.RuleType.TYPE_SHIHUNFAZHANG).desc,c.ColorConfig.getQualityHexColor(l.GameConst.QUALITY.ORANGE)))},t=o([u],t)}(r.default));i.default=p,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/RuleConfig":"RuleConfig","../../config/ViewConfig":"ViewConfig","../../model/ShenBinModel":"ShenBinModel","../PublicTipView":"PublicTipView"}],ShenBinSkillModel:[function(e,t,i){"use strict";cc._RF.push(t,"1f037suuHpBM5M2yK87bIHf","ShenBinSkillModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/ShenbingskillAllConfig"),o=e("../event/CommonEvent"),a=e("../../engine/EventManager"),s=e("./RoleInfoModel"),r=e("./ShenBinModel"),c=e("../manager/RedPointManager"),l=e("../../engine/ProtoConfig"),d=e("../config/ChiXueMoJianConfig"),f=e("./ItemInfoModel"),g=e("../config/MingYunZhiRenConfig"),h=e("../config/ShihunfazhangConfig"),u=e("../sdk/STUtils"),p=e("../sdk/LoongCheerManager"),m=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[c.RedPointId.shenbinSkill,c.RedPointId.shenbinSkill_0,c.RedPointId.shenbinSkill_1,c.RedPointId.shenbinSkill_2],this.protos=[l.ProtoConfig.c_seq_shenbing_skill,l.ProtoConfig.c_update_item_info,l.ProtoConfig.c_seq_shenbing],c.default.getInstance().addHandler(this)}return e.proto2ModelList=function(t,i){for(var r=t.getShenbingSkillListList(),c=0;c<r.length;c++){var l=new e,d=r[c].getNewid(),f=n.ShenbingskillAllConfig.getSkillConfigById(d),g=e.getModelByShenbinType(f.type,s.default.instance);this.isFirst||g.id==d||(u.default.stShenbinSkill(p.StatisticsType.afEvent,f),u.default.stShenbinSkill(p.StatisticsType.firebaseEvent,f)),l.id=d,i.shenbinSkillList[c]=l}this.isFirst=!1,a.EventManager.instance.dispatch(o.CommonEvent.Event_RefreshShenbin,2)},e.getModelByShenbinType=function(t,i){var o=new e;t==r.ShenBinModel.CHIXUEMOJIAN?o.id=1:t==r.ShenBinModel.MINGYUNZHIREN?o.id=1001:t==r.ShenBinModel.SHIHUNFAZHANG&&(o.id=2001);for(var a=0;a<i.shenbinSkillList.length;a++){n.ShenbingskillAllConfig.getSkillConfigById(i.shenbinSkillList[a].id).shenbing==t&&(o=i.shenbinSkillList[a])}return o},e.hasOpen=function(e,t){for(var i=!1,o=0;o<t.shenbinSkillList.length;o++)n.ShenbingskillAllConfig.getSkillConfigById(t.shenbinSkillList[o].id).skill_id==e&&(i=!0);return i},e.prototype.checkRedPoint=function(){var t,i,o,a=[],l=s.default.instance.getCoin(),u=e.getModelByShenbinType(r.ShenBinModel.CHIXUEMOJIAN,s.default.instance),p=n.ShenbingskillAllConfig.getSkillConfigById(u.id),m=r.ShenBinModel.getShenBinModelByType(r.ShenBinModel.CHIXUEMOJIAN),C=d.ChiXueMoJianConfig.getChixuemojianConfigById(m.shenbingId),_=n.ShenbingskillAllConfig.getkeyAndValue(p.cost2)[0][0],v=void 0==f.default.getItem(_)?0:f.default.getItem(_).itemCnt;p&&!p.max_level&&(t=C.level>=p.shenbinglv[r.ShenBinModel.CHIXUEMOJIAN+""]&&v>=n.ShenbingskillAllConfig.getkeyAndValue(p.cost2)[0][1]&&l>=p.cost1[1]);var y=e.getModelByShenbinType(r.ShenBinModel.MINGYUNZHIREN,s.default.instance),b=n.ShenbingskillAllConfig.getSkillConfigById(y.id),I=r.ShenBinModel.getShenBinModelByType(r.ShenBinModel.MINGYUNZHIREN),M=g.MingYunZhiRenConfig.getConfigById(I.shenbingId),w=n.ShenbingskillAllConfig.getkeyAndValue(b.cost2)[0][0],k=void 0==f.default.getItem(w)?0:f.default.getItem(w).itemCnt;b&&!b.max_level&&(i=M.level>=b.shenbinglv[r.ShenBinModel.MINGYUNZHIREN+""]&&k>=n.ShenbingskillAllConfig.getkeyAndValue(b.cost2)[0][1]&&l>=b.cost1[1]);var S=e.getModelByShenbinType(r.ShenBinModel.SHIHUNFAZHANG,s.default.instance),P=n.ShenbingskillAllConfig.getSkillConfigById(S.id),E=r.ShenBinModel.getShenBinModelByType(r.ShenBinModel.SHIHUNFAZHANG),L=h.ShihunfazhangConfig.getShihunfazhangConfig(E.shenbingId),T=n.ShenbingskillAllConfig.getkeyAndValue(P.cost2)[0][0],R=void 0==f.default.getItem(T)?0:f.default.getItem(T).itemCnt;P&&!P.max_level&&(o=L.level>=P.shenbinglv[r.ShenBinModel.SHIHUNFAZHANG+""]&&R>=n.ShenbingskillAllConfig.getkeyAndValue(P.cost2)[0][1]&&l>=P.cost1[1]);var N={id:c.RedPointId.shenbinSkill_0,type:c.RedPointType.Default,show:t};a.push(N);var B={id:c.RedPointId.shenbinSkill_1,type:c.RedPointType.Default,show:i};a.push(B);var A={id:c.RedPointId.shenbinSkill_2,type:c.RedPointType.Default,show:o};a.push(A);var G={id:c.RedPointId.shenbinSkill,type:c.RedPointType.Default,show:t||i||o};return a.push(G),a},e.isFirst=!0,e}();i.default=m,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../config/ChiXueMoJianConfig":"ChiXueMoJianConfig","../config/MingYunZhiRenConfig":"MingYunZhiRenConfig","../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../config/ShihunfazhangConfig":"ShihunfazhangConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/STUtils":"STUtils","./ItemInfoModel":"ItemInfoModel","./RoleInfoModel":"RoleInfoModel","./ShenBinModel":"ShenBinModel"}],ShenCiConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9d8aeiHCcZDvIrIKpKe/JWM","ShenCiConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.stat=e.stat,i.statid=e.statid,i.pinzhi0=e.pinzhi0,i.pinzhi1=e.pinzhi1,i.pinzhi2=e.pinzhi2,i.pinzhi3=e.pinzhi3,i.pinzhi4=e.pinzhi4,i.des=e.des,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id!=e||(t=i)}),t},t.Config_Name="shenciConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ShenCiConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ShenGongModel:[function(e,t,i){"use strict";cc._RF.push(t,"6cd02/sr6RNrb493duYBuJ1","ShenGongModel"),Object.defineProperty(i,"__esModule",{value:!0});var n,o=e("../../engine/GameSocket"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/GameConfig"),c=e("../config/SuperbskillConfig"),l=e("../manager/RedPointManager"),d=e("./ItemInfoModel"),f=function(){return function(){}}();i.Superskill=f,function(e){e[e.TunTian=1]="TunTian",e[e.ZhenLong=2]="ZhenLong"}(n=i.ShenGongType||(i.ShenGongType={}));var g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[l.RedPointId.ShenGong],this.protos=[a.ProtoConfig.c_get_superskill_info,a.ProtoConfig.c_superskill_up,a.ProtoConfig.c_pvp_result],l.default.getInstance().addHandler(this)}return e.prototype.s_get_superskill_info=function(){if(r.GameConfig.connectServer&&o.default.getInstance().isLogin){var e=s.ProtoUtils.Create(a.ProtoConfig.s_get_superskill_info);o.default.getInstance().sendToSocket(e)}},e.prototype.s_superskill_up=function(e){if(r.GameConfig.connectServer&&o.default.getInstance().isLogin){var t=s.ProtoUtils.Create(a.ProtoConfig.s_superskill_up);t.setId(e),o.default.getInstance().sendToSocket(t)}},e.prototype.proto_c_get_superskill_info=function(e){var t=this,i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_superskill_info,e).getSkillListList();if(h.modelMap=new Map,[n.TunTian,n.ZhenLong].forEach(function(e){var i=t.getModelByType(e);h.modelMap.set(i.type,i)}),i)for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){var r=i[o],c=new f;c.type=r.getType(),c.id=r.getId(),h.modelMap.set(c.type,c)}},e.prototype.proto_c_superskill_up=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_superskill_up,e);if(0==t.getRet()){var i=t.getId(),n=c.default.getConfigById(i),o=h.modelMap.get(n.type);o||((o=new f).type=n.type),o.id=n.next,h.modelMap.set(n.type,o)}},e.prototype.getModelByType=function(e){var t=h.modelMap.get(e);return t||((t=new f).type=e,t.id=c.default.getInitialConfigByType(e).id),t},e.prototype.checkRedPoint=function(){var e=!1,t=new Array;h.modelMap.forEach(function(i){var n=c.default.getConfigById(i.id);if(n.cost&&n.next>0){var o=0,a=void 0;for(var s in n.cost)Object.prototype.hasOwnProperty.call(n.cost,s)&&(o=n.cost[s],a=s);var r=d.default.getItemAmount(a),f={id:"ShenGong_"+n.type,type:l.RedPointType.Default,show:r>=o};t.push(f),r>=o&&(e=!0)}});var i={id:l.RedPointId.ShenGong,type:l.RedPointType.Default,show:e};return t.push(i),t},e.prototype.onDestory=function(){},e}();i.ShenGongModelMethod=g;var h=function(){function e(){}return e.getModelMethod=function(){return this.modelMethod=this.modelMethod?this.modelMethod:new g,this.modelMethod},e.onDestory=function(){this.destoryMethod()},e.destoryMethod=function(){this.modelMethod&&this.modelMethod.onDestory(),delete this.modelMethod,this.modelMethod=null},e.modelMap=new Map,e}();i.ShenGongModel=h,cc._RF.pop()},{"../../engine/GameSocket":"GameSocket","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GameConfig":"GameConfig","../config/SuperbskillConfig":"SuperbskillConfig","../manager/RedPointManager":"RedPointManager","./ItemInfoModel":"ItemInfoModel"}],ShenGongView:[function(e,t,i){"use strict";cc._RF.push(t,"3d381V2URRH/qyh5WtU0KyN","ShenGongView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/ProtoConfig"),r=e("../../../engine/ProtoUtils"),c=e("../../../engine/ViewBase"),l=e("../../base/RadioButton"),d=e("../../config/ColorConfig"),f=e("../../config/DefaultConfig"),g=e("../../config/ITemsConfig"),h=e("../../config/MagicNameConfig"),u=e("../../config/SuperbskillConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../manager/RedPointManager"),_=e("../../model/ItemInfoModel"),v=e("../../model/MagicModel"),y=e("../../model/ShenGongModel"),b=e("../../prefab/RedPointPrefab"),I=e("../../utils/UIHelper"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentType=y.ShenGongType.TunTian,t}return n(t,e),t.prototype.onEnable=function(){this.initFindNode(),y.ShenGongModel.getModelMethod().s_get_superskill_info(),a.EventManager.instance.on(m.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_get_superskill_info)this.initView();else if(e==s.ProtoConfig.c_superskill_up){var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_superskill_up,t);if(0==i.getRet()){var n=i.getId(),o=u.default.getConfigById(n);o&&o.next&&(this.config=u.default.getConfigById(o.next));var a=this.config.floor>o.floor;this.btnUpNode.active=this.config.next>0,this.statusNode.active=!this.btnUpNode.active,this.model=y.ShenGongModel.getModelMethod().getModelByType(this.currentType),this.handlerEffect(a)}}},t.prototype.initFindNode=function(){this.statusNode=this.getChild(this.node,"frame/status"),this.btnUpNode=this.getChild(this.node,"frame/btnUp"),this.bnt1Node=this.getChild(this.node,"frame/btnList/btn1"),this.bnt2Node=this.getChild(this.node,"frame/btnList/btn2"),this.infoListNode=this.getChild(this.node,"frame/info"),this.listNode=this.getChild(this.node,"frame/propertyFrame/list"),this.descNode=this.getChild(this.listNode,"desc"),this.muchLabel=this.getChild(this.node,"frame/much/num",cc.Label),this.muchName=this.getChild(this.node,"frame/much/name",cc.Label),this.btnClose=this.getChild(this.node,"btnClose"),this.tipNode=this.getChild(this.node,"frame/propertyFrame/tip"),this.nameLabel=this.getChild(this.node,"frame/name",cc.Label),this.redNode=this.getChild(this.btnUpNode,"RedPointPrefab")},t.prototype.initView=function(){this.onAddEvent(this.bnt1Node,this.onBtnSelect.bind(this,y.ShenGongType.TunTian,this.bnt1Node)),this.onAddEvent(this.bnt2Node,this.onBtnSelect.bind(this,y.ShenGongType.ZhenLong,this.bnt2Node)),this.onAddEvent(this.btnClose,this.closeView.bind(this)),this.initShenGong()},t.prototype.initProperty=function(){this.listNode.children.forEach(function(e){e.active=!1});var e=0;if(this.config&&this.config.attr_all)for(var t in this.config.attr_all)if(Object.prototype.hasOwnProperty.call(this.config.attr_all,t)){var i=this.config.attr_all[t],n=void 0;e<this.listNode.childrenCount?n=this.listNode.children[e]:(n=cc.instantiate(this.descNode)).parent=this.listNode,n.active=!0;var o=this.getChild(n,"name",cc.Label),a=this.getChild(n,"num",cc.Label);o.string=h.MagicNameConfig.getDesc(parseInt(t))+":",a.string=v.default.formatMagicValue(parseInt(t),i),e++}this.tipNode.active=e<=0,this.listNode.width=e>=4?450:200},t.prototype.setMuch=function(){var e,t=0;if(this.config.cost)for(var i in this.config.cost)Object.prototype.hasOwnProperty.call(this.config.cost,i)&&(t=this.config.cost[i],e=i);var n=g.ITemsConfig.getITemsConfigById(e);this.muchLabel.string=n?_.default.getItemAmount(e)+"/"+t:t+"",this.muchLabel.node.active=null!=n,this.muchName.node.active=null!=n,n&&(this.muchLabel.node.color=_.default.getItemAmount(e)>=t?d.ColorConfig.GreenColor:d.ColorConfig.RedColor,this.muchName.string=cc.js.formatStr(p.WordConfig.getWord(61849),n.name))},t.prototype.initShenGong=function(){this.model=y.ShenGongModel.getModelMethod().getModelByType(this.currentType),this.config=u.default.getConfigById(this.model.id);for(var e=u.default.getConfigs(this.config.type,this.config.floor),t=0;t<this.infoListNode.childrenCount;t++){var i=1==this.config.floor?e[t+1]:e[t],n=this.infoListNode.children[t],o=this.getChild(n,"loop"),a=this.getChild(n,"effect"),s=this.getChild(n,"num",cc.Label);if(o.active=this.model.id>=i.id,a.active=!1,i.attr_add)for(var r in i.attr_add)if(Object.prototype.hasOwnProperty.call(i.attr_add,r)){var c=i.attr_add[r];s.string=h.MagicNameConfig.getDesc(parseInt(r))+"+"+v.default.formatMagicValue(parseInt(r),c)}s.node.color=this.model.id>=i.id?d.ColorConfig.WhiteColor:d.ColorConfig.GrayColor,n.data=i}this.initProperty(),this.setMuch();var l=f.DefaultConfig.getConfigById(194).value;this.nameLabel.string=cc.js.formatStr(p.WordConfig.getWord(61853),l[this.config.type],this.config.floor),this.btnUpNode.active=this.config.next>0,this.statusNode.active=!this.btnUpNode.active,this.onAddEvent(this.btnUpNode,this.onBtnUp.bind(this));var g="ShenGong_"+this.config.type;this.redNode.getComponent(b.default).setRedPointIdList([g]),C.default.getInstance().checkRedPointById(C.RedPointId.ShenGong)},t.prototype.closeView=function(){a.EventManager.instance.dispatch(m.CommonEvent.Event_ShenGong,!1)},t.prototype.onBtnUp=function(){if(this.config&&this.config.next){var e,t=0;if(this.config.cost)for(var i in this.config.cost)Object.prototype.hasOwnProperty.call(this.config.cost,i)&&(t=this.config.cost[i],e=i);var n=g.ITemsConfig.getITemsConfigById(e),o=_.default.getItemAmount(e);n&&(this.muchLabel.node.color=_.default.getItemAmount(e)>=t?d.ColorConfig.GreenColor:d.ColorConfig.RedColor,this.muchName.string=cc.js.formatStr(p.WordConfig.getWord(61849),n.name),o>=t?y.ShenGongModel.getModelMethod().s_superskill_up(this.config.id):I.UIHelper.showTip(p.WordConfig.getWord(60271)))}},t.prototype.onBtnSelect=function(e,t){e!=this.currentType&&(this.currentType=e,t.getComponent(l.default).selectOnClick(),this.initShenGong())},t.prototype.handlerEffect=function(e){var t=this;e?this.initShenGong():(this.setMuch(),this.initProperty()),this.infoListNode.children.every(function(e){if(t.config.id==e.data.id){var i=t.getChild(e,"effect",cc.Animation),n=t.getChild(e,"loop"),o=t.getChild(e,"num",cc.Label);return n.active=!1,i.node.active=!0,i.play(),i.once("finished",function(){n.active=!0,o.node.color=d.ColorConfig.WhiteColor,i.node.active=!1},t),!1}return!0})},t=o([w],t)}(c.default));i.default=k,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/ViewBase":"ViewBase","../../base/RadioButton":"RadioButton","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/SuperbskillConfig":"SuperbskillConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/ShenGongModel":"ShenGongModel","../../prefab/RedPointPrefab":"RedPointPrefab","../../utils/UIHelper":"UIHelper"}],ShenbingGemAllConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d97e6MZ7uVF0L8sDibEnmVN","ShenbingGemAllConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]),o=parseInt(i);t.configMap.set(o,n)})},t.obj2Config=function(e){var t={};return t.cost1=e.cost1,t.cost2=e.cost2,t.oshenbinglv=e.oshenbinglv,t.shenbinglv=e.shenbinglv,t.level=e.level,t.zhanli=e.zhanli,t.skillvalue=e.skillvalue,t.attribute=e.attribute,t.color=e.color,t.type=e.type,t},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ShenbingGemAllConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ShenbingskillAllConfig:[function(e,t,i){"use strict";cc._RF.push(t,"787cdxz2HRPY7NGylbqxJ92","ShenbingskillAllConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=[],t.parameter=[],t.zhanli=[],t.pinglv=[],t.bossRate=[],t}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=e[i];t.configMap.set(i,n),n.id=parseInt(i)})},t.getSkillConfigById=function(e){var t;return this.configMap.forEach(function(i,n){i.id!=e||(t=i)}),t},t.getConfigByShenbingAndSkillLevel=function(e,t){var i;return this.configMap.forEach(function(n,o){n.shenbing!=e||n.level!=t||(i=n)}),i},t.getkeyAndValue=function(e){var t=[];for(var i in e){var n=[i,e[i]];t.push(n)}return t},t.Config_Name="shenbingskillAllConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ShenbingskillAllConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ShihunfazhangConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6c9631oghhKP5VLAlVZ9Ih8","ShihunfazhangConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("../model/MagicModel"),s=e("./MagicNameConfig"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atk=0,t.mag=0,t.spt=0,t.damageReduction_p=0,t.hp=0,t.hp_p=0,t.skill=[],t.need_level=0,t.zhanli=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.type=e.type,i.level=e.level,i.cost1=e.cost1,i.cost2=e.cost2,i.curr_progress=e.curr_progress,i.all_progress=e.all_progress,i.skill=e.skill,i.need_level=e.need_level,i.zhanli=e.zhanli,i.atk=e[1],i.mag=e[3],i.spt=e[5],i.damageReduction_p=e[18],i.hp=e[10],i.hp_p=e[11],i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getShihunfazhangConfig=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getMagicModelList=function(e){var t,i=[];return e.atk>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.atk,t.magicValue=e.atk,i.push(t)),e.mag>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.mag,t.magicValue=e.mag,i.push(t)),e.spt>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.spt,t.magicValue=e.spt,i.push(t)),e.damageReduction_p>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.DamageReduction_p,t.magicValue=e.damageReduction_p,i.push(t)),e.hp>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.hp,t.magicValue=e.hp,i.push(t)),e.hp_p>=0&&((t=new a.default).magicId=s.MagicNameConfig.MagicId.hp_p,t.magicValue=e.hp_p,i.push(t)),i},t.Config_Name="shihunfazhangConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.ShihunfazhangConfig=r,cc._RF.pop()},{"../model/MagicModel":"MagicModel","./JsonConfigBase":"JsonConfigBase","./MagicNameConfig":"MagicNameConfig"}],ShopAllConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d1ef4qZSeFD85ECCfPCGeUa","ShopAllConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("./WordConfig"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="11",t.item_id="I2101",t.item_num=0,t.weight=[100,0],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.item_id=e.item_id,i.item_num=e.item_num,i.unit_price=e.unit_price,i.gem=e.gem,i.weight=e.weight,i.name=e.name,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.getConfig=function(e){var t;return this.configMap.forEach(function(i,n){e!=i.item_id||(t=i)}),t&&(t.name=a.WordConfig.getWord(60389)),t},t.configMap=new Map,t}(o.JsonConfigBase);i.ShopAllConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase","./WordConfig":"WordConfig"}],ShopConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7c0252ew9lNJ7AKOEAmPUa5","ShopConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="1",t.goods1={id:[1,6],rate:[800,200]},t.goods2={id:[2,7],rate:[800,200]},t.goods3={id:[3,8],rate:[800,200]},t.goods4={id:[3,8],rate:[800,200]},t.goods5={id:[4,9],rate:[800,200]},t.goods6={id:[4,9],rate:[800,200]},t.goods7={id:[5,10],rate:[800,200]},t.goods8={id:[5,10],rate:[800,200]},t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.goods1=e.goods1,i.goods2=e.goods2,i.goods3=e.goods3,i.goods4=e.goods4,i.goods5=e.goods5,i.goods6=e.goods6,i.goods7=e.goods7,i.goods8=e.goods8,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ShopConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ShopRecoverConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2b2d5itAA9KFLIYqsUGqSD7","ShopRecoverConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=1800,t.cost="I3003",t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.price=e.price,i.time=e.time,i.cost=e.cost,i.num=e.num,i.bag_num=e.bag_num,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.ShopRecoverConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],ShowNumView:[function(e,t,i){"use strict";cc._RF.push(t,"df0b5oiqflHA6ktpC17qeOd","ShowNumView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/UIManager"),r=e("../config/ViewConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pianYiY=-50,t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=cc.Color.WHITE),void 0===n&&(n=cc.v2(0,100)),this.tips=e,this.color=i,this.time=t,this.pos=n},t.prototype.onShow=function(){var e=this;i.tipCount++,s.default.instance.setTopUI(r.default.gameView.tip),this.node.zIndex=999,this.findChild(this.node,"panel/content").getComponent(cc.Label).string=this.tips,this.findChild(this.node,"panel/content").color=this.color,this.node.setPosition(0,i.tipCount*this.pianYiY),cc.tween(this.node).by(this.time,{position:this.pos}).to(.2,{opacity:0}).start(),this.scheduleOnce(function(){e.closeView()},this.time)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),i.tipCount--},t.tipCount=0,t=i=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ViewConfig":"ViewConfig"}],SignBoardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5a301a/gt1Da7mivuae4jvG","SignBoardConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configArr=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n),t.configArr.push(n)}),this.configArr.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){var t=this.configMap.get(e);if(t)return t},t.getAllList=function(){var e=[];return this.configMap.forEach(function(t){e.push(t)}),e},t.Config_Name="SignBoardConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.SignBoardConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],SkillBuffConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2f4acqtKdpP/YCiQjoNwdRG","SkillBuffConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configArr=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n),t.configArr.push(n)}),this.configArr.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){var t=this.configMap.get(e);if(t)return t},t.Config_Name="SkillBuffConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.SkillBuffConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],SkillClipsManager:[function(e,t,i){"use strict";cc._RF.push(t,"a00671TkC1MNLXUBJogfBbH","SkillClipsManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/NodePoolManager"),o=e("../config/SkillEffConfig"),a=e("./SkillEffectManager"),s=function(){return function(){}}();i.MySkillClipInfo=s;var r=function(){function e(){this.clipCache={}}return e.initClipsConfig=function(){},e.prototype.getClipByName=function(e){return this.clipCache[e]},e.prototype.setClipByName=function(e,t){this.clipCache[e]=t},e.prototype.play=function(e,t,i){var n=e.skillEffectNode.getComponent(cc.Animation);n.currentClip&&n.currentClip.name!=t.name&&(n.stop(),n.removeClip(n.currentClip)),n.addClip(t),e.clip=t,i&&i.call(a.default.instance,e)},e.prototype.createSkillEffectNode=function(t,i){void 0===t&&(t=null),void 0===i&&(i=!0);var o=n.default.Instance.instantiateRoleSkillEffectPrefabEx(),a=.5;if(t){var s=o.getComponent(cc.Animation);s.currentClip&&s.currentClip.name!=t.name&&(s.stop(),s.removeClip(s.currentClip)),s.addClip(t),t.duration<.5||(a=t.duration+.1)}return i&&cc.tween(o).delay(a).call(function(){e.instance.backSkillEffNodes([o])}).start(),o},e.prototype.backSkillEffNodes=function(e){for(var t=0;t<e.length;t++){var i=e[t];n.default.Instance.put(i,"RoleSkillEffectPrefabEx")}e.length=0},e.prototype.loadClip=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var s=o.SkillEffConfig.getConfig(e);if(s){var r=s.aniname,c=s.path,l=this.getClipByName(r),d=this;if(l)t&&t.call(a.default.instance,l,i);else{var f=c+"/"+r;cc.loader.loadRes(f,cc.AnimationClip,function(e,n){e||(d.clipCache[n.name]=n,t&&t.call(a.default.instance,n,i))})}}else console.log("not find skillEffId=  "+e)},e.prototype.playClipByClipInfo=function(e,t){var i=o.SkillEffConfig.getConfig(e.skilleffId);if(i){var a=i.aniname,s=i.path,r=this.getClipByName(a),c=this;if(e.skillEffectNode||(e.skillEffectNode=n.default.Instance.instantiateRoleSkillEffectPrefabEx()),r)c.play(e,r,t);else{var l=s+"/"+a;cc.loader.loadRes(l,cc.AnimationClip,function(i,n){i?console.log("not find urlAni="+l):(c.clipCache[n.name]=n,c.play(e,n,t))})}}else console.log("not find skillEffId="+e.skilleffId)},e.instance=new e,e}();i.default=r,cc._RF.pop()},{"../base/NodePoolManager":"NodePoolManager","../config/SkillEffConfig":"SkillEffConfig","./SkillEffectManager":"SkillEffectManager"}],SkillConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b3032xrQaBLR7LtJh7vqYcr","SkillConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/RoleInfoModel"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillId=0,t.next_level="dsjn_5",t.name="\u7cbe\u795e\u529b\u6218\u80dc\u6cd5",t.name2="\u7cbe\u795e\u529b\u6218\u6cd5",t.book="I5001",t.type=0,t.target=0,t.int=0,t.range=1,t.level=1,t.maxlevel=1,t.maxlevelup=1,t.chance=1e4,t.parameter=[1e4,200],t.petvalue=[],t.page={I4001:200,I5202:10},t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)i[n]=e[n];return i.skillId=e.skillid,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(i,n)})},t.getConfigById=function(e){return this.configMap.get(e)},t.getSkillConfigByOccupation=function(e){var t=this,i=[];return this.configMap.forEach(function(n,o){n.role==e&&n.level==t.getSkillLevel(n.skillId)&&i.push(n)}),i},t.getSkillLevel=function(e,t){void 0===t&&(t=o.default.instance.getSkillList());for(var i=0;i<t.length;i++){var n=t[i];if(e==n.id)return n.level}return 1},t.getSkillConfigById=function(e,t){var i;return this.configMap.forEach(function(n,o){n.skillId==e&&n.level==t&&(i=n)}),i},t.getSkillConfigByIdAll=function(e){var t=new Array;return this.configMap.forEach(function(i,n){i.skillId==e&&t.push(i)}),t},t.getSkillByOccupation=function(e){var i=new Array;return this.configMap.forEach(function(n,o){n.role==e&&n.type==t.SkillType.ZhuDong&&i.push(n)}),i},t.configMap=new Map,t.SkillType={ZhuDong:0,BeiDong:1},t.TargetType={self:0,Enemy:1},t.SkillIdConfig={JingShenLiZhanShengFa:301,ZhiLiaoShu:302,LingHunHuoFu:303,ShiDuShu:304,ZhaoHuanShu:305,YinShen:306,ShenShengZhanJia:307,WuJiZhenQi:308,HuoQiuShu:201,LeiDianShu:202,HuoQiang:203,YouHuoZhiGuang:204,MoFaDun:205,FaShuJingTong:206,BingPaoXiao:207,JiChuJianShu:101,GongShaJianShu:102,CiShaJianShu:103,BanYueWanDao:104,YeManChongZhuang:105,DouQiHuTi:106,LieHuoJianFa:107,FengYinZhiLi:700,FuHuo:504},t}(e("./JsonConfigBase").JsonConfigBase);i.SkillConfig=a,cc._RF.pop()},{"../model/RoleInfoModel":"RoleInfoModel","./JsonConfigBase":"JsonConfigBase"}],SkillEffConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fdd95JxHDlA3oXc2f851aEw","SkillEffConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configMap=new Map,Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},e.getConfig=function(e){return this.configMap.get(e)},e.Config_Name="SkillEffConfig",e}();i.SkillEffConfig=n,cc._RF.pop()},{}],SkillEffectManager:[function(e,t,i){"use strict";cc._RF.push(t,"e2d14kwJ2BNEI+AEeVTzyjb","SkillEffectManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("../../engine/MathUtils"),a=e("../base/NodePoolManager"),s=e("../prefab/GameManager"),r=e("../prefab/RolePrefab"),c=e("../utils/MusicHelper"),l=e("./SkillClipsManager"),d=function(){function e(){this.skillConfig={putonggongji:0,banyuewandao:1,zhiYuShu:2,zhiYuShu2:3,bingPaoXiao:4,bingPaoXiao2:5,cishajianshu:6,diYuLeiGuang:7,diYuLeiGuang2:8,gongshajianshu:9,huoqiangshu:10,huoqiangshu2:11,huoqiushu:12,leidianshu:13,leidianshu2:14,liehuojianfa:15,linghunhuofu:16,mofadun:17,mofadun2:18,shenshengzhanjiashu:19,shenshougongji:20,shidushu:21,shidushu2:22,yemanchongzhuang:23,yemanchongzhuang2:24,yinshenshu:25,yinshenshu2:26,zhaohuan_kulu:27,zhaohuan_shenshou:28,zhenqihuti:29,wujizhenqi:30,youHuoZhiGuang:31,yuanchenggongji:32,yuanchenggongji2:33,cishajianshu2:34,linghunhuofu2:35,huoqiushu2:36,banyuewandao_effect2:37,banyuewandao_effect2_2:38,huoqiangshu_effect2:39,huoqiangshu_effect2_2:40,huoqiangshu_effect2_3:41,shidushu_effect2:42,shidushu_effect2_2:43,shidushu_effect2_3:44,banyuewandao_effect3_1:45,banyuewandao_effect3_2:46,banyuewandao_effect3_3:47,banyuewandao_effect3_4:48,liehuojianfa2_1:49,liehuojianfa2_2:50,liehuojianfa2_3:51,bingpaoxiao2_1:52,bingpaoxiao2_2:53,bingpaoxiao2_3:54,wujizhenqi1:55,wujizhenqi2:56,wujizhenqi3:57,liehuojianfa3_1:58,liehuojianfa3_2:59,putonggongji_death:60,putonggongji_down:61,putonggongji_left:62,putonggongji_leftDown:63,putonggongji_leftUp:64,fireDaoShi:65,fireFashi1:66,fireFashi2:67,fireZhanshi_leftup:68,fireZhanshi_left:69,fireZhanshi_leftdown:70,fireZhanshi_down:71,fireDead:72,cishajianshu_toDown:73,cishajianshu_toLeft:74,cishajianshu_toLeftDown:75,cishajianshu_toLeftUp:76,liehuojianfa_toDown:77,liehuojianfa_toLeft:78,liehuojianfa_toLeftDown:79,liehuojianfa_toLeftUp:80,liehuojianfa_pro_toDown:81,liehuojianfa_pro_toLeft:82,liehuojianfa_pro_toLeftDown:83,liehuojianfa_pro_toLeftUp:84,yemanchongzhuang_pro_toDown:85,yemanchongzhuang_pro_toLeft:86,yemanchongzhuang_pro_toLeftDown:87,yemanchongzhuang_pro_toLeftUp:88,shenshougongji_pro:89,zhaohuan_shenshou_pro:90,zhaohuan_kulu_pro:91,youhuozhiguang_pg_toleft_pro:92,youhuozhiguang_pg_toleftDown_pro:93,youhuozhiguang_pg_toleftUp_pro:94,youhuozhiguang_pg_toup_pro:95,youhuozhiguang_lpg_hurt_pro:96,youhuozhiguang_lpg_toleft_pro:97,youhuozhiguang_lpg_toleftDown_pro:98,youhuozhiguang_lpg_toleftup_pro:99,youhuozhiguang_lpg_toup_pro:100,youhuozhiguang_pro:101,yun:102,debuff_shihua:103,debuff_ice:104,debuff_mabi:105,rebirth:106,wudi:107,baozhu:108,baozhuFire:109,banyueBuff_big:110,shiduShuBuff_big:111,huoqiangBuff_big:112,tx_cishajianshu_pro_toLeft:113,tx_cishajianshu_pro_toLeftDown:114,tx_cishajianshu_pro_toLeftUp:115,tx_cishajianshu_pro_toUp:116,tx_leidianshu_qishou:117,tx_leidianshu_luoxia:118,tx_linghunhuofu_qishou:119,tx_linghunhuofu_shouji:120,skin_2_banyue_qishou:124,skin_2_banyue_shouji:125,skin_2_huoqiang_shifa:126,skin_2_huoqiang_chixu:127,skin_2_huoqiang_chixu_boss:128,skin_2_shidu_chixu:129,skin_2_shidu_chixu_boss:130,skin_2_shidu_shifa:131,skin_2_shidu_shouji:132,skin_3_cisha_up:133,skin_3_cisha_down:134,skin_3_cisha_left:135,skin_3_cisha_right:136,skin_3_cisha_leftup:137,skin_3_cisha_rightup:138,skin_3_cisha_leftDown:139,skin_3_cisha_rightDown:140,skin_3_bingPaoxiao_qishou:141,skin_3_bingPaoxiao_shouji:142,skin_3_linghunhuofu_qishou:143,skin_3_linghunhuofu_shouji:144,yamaxun_shifa:145,skin_3_liehuo_leftup:146,skin_3_liehuo_down:147,skin_3_liehuo_left:148,skin_3_liehuo_right:149,skin_3_liehuo_rightup:150,skin_3_liehuo_leftDown:151,skin_3_liehuo_rightDown:152,skin_3_liehuo_up:153,skin_2_mofadun:154,skin_2_shenshengzhanjiashu:155,bagua_qishou:156,bagua_cixu:157,bagua_jieshu:158},cc.skmgr=this}return e.prototype.init=function(e){this.demoEffect=e},e.prototype.useSkill=function(e,t,i,n){void 0===n&&(n=null),e==this.skillConfig.putonggongji?this.playPuTongGongJi(i,t,n):e==this.skillConfig.banyuewandao?this.playerBanYueWanDao(i,t,n):e==this.skillConfig.zhiYuShu?this.playZhuYuShu(i,t,n):e==this.skillConfig.bingPaoXiao?this.playBingPaoXiao(i,t,n):e==this.skillConfig.cishajianshu?this.playShakeCiShaJianShu(i,t,n):e==this.skillConfig.diYuLeiGuang?this.playDiYuLeiGuang(i,t,n):e==this.skillConfig.gongshajianshu?this.playGongShaJianShu(i,t,n):e==this.skillConfig.huoqiangshu?this.playHuoQiangShu(i,t,n):e==this.skillConfig.huoqiushu?this.playHuoQiuShu(i,t,n):e==this.skillConfig.leidianshu?this.playLeiDianShu(i,t,n):e==this.skillConfig.liehuojianfa?this.playShakeLieHuoJianFa(i,t,n):e==this.skillConfig.linghunhuofu?this.playLingHunHuoFu(i,t,n):e==this.skillConfig.tx_linghunhuofu_qishou?this.playLingHunHuoFu_pro(i,t,n):e==this.skillConfig.mofadun?this.playMoFaDun(i,t,n):e==this.skillConfig.shenshengzhanjiashu?this.playShenShengZhanJiaShu(i,t,n):e==this.skillConfig.shenshougongji?this.playShenShouGongJi(i,t,n):e==this.skillConfig.shidushu?this.playShiDuShou(i,t,n):e==this.skillConfig.yemanchongzhuang?this.playYeManChongZhuang(i,t,n):e==this.skillConfig.yemanchongzhuang_pro_toDown?this.playYeManChongZhuang_pro(i,t,n):e==this.skillConfig.yemanchongzhuang2?this.playYeManChongZhuang2(i,t,n):e==this.skillConfig.yinshenshu?this.playYinShenShu(i,t,n):e==this.skillConfig.zhaohuan_kulu?this.playKuLu(i,t,n):e==this.skillConfig.zhaohuan_shenshou?this.playShenShou(i,t,n):e==this.skillConfig.wujizhenqi?this.playWuJiZhenQi(i,t,n):e==this.skillConfig.youHuoZhiGuang?this.playYouHuoZhiGuang(i,t,n):e==this.skillConfig.zhenqihuti?this.playZhenQiHuTi(i,t,n):e==this.skillConfig.yuanchenggongji?this.playYuanChengGongJi(i,t,n):e==this.skillConfig.banyuewandao_effect2?this.playBanyuewandao_effect3_1(i,t,n):e==this.skillConfig.huoqiangshu_effect2?this.playHuoQiangShu_effect2(i,t,n):e==this.skillConfig.shidushu_effect2?this.playShiduShu_effect2(i,t,n):e==this.skillConfig.banyuewandao_effect3_1?this.playBanyuewandao_effect3_1(i,t,n):e==this.skillConfig.liehuojianfa2_1?this.playLieHuoJianFa2(i,t,n):e==this.skillConfig.liehuojianfa2_2?this.playLieHuoJianFa2_1(i,t,n):e==this.skillConfig.liehuojianfa2_3?this.playLieHuoJianFa2_2(i,t,n):e==this.skillConfig.bingpaoxiao2_1?this.playBingPaoXiao2_1(i,t,n):e==this.skillConfig.bingpaoxiao2_2?this.playBingPaoXiao2_2(i,t,n):e==this.skillConfig.bingpaoxiao2_3?this.playBingPaoXiao2_3(i,t,n):e==this.skillConfig.wujizhenqi1?this.playWuJiZhenQi2_1(i,t,n):e==this.skillConfig.bingpaoxiao2_3?this.playWuJiZhenQi2_2(i,t,n):e==this.skillConfig.bingpaoxiao2_3?this.playWuJiZhenQi2_3(i,t,n):e==this.skillConfig.liehuojianfa3_1?this.playShakeLieHuoJianFa_pro(i,t,n):e==this.skillConfig.liehuojianfa3_2?this.playLieHuoJianFa3_2(i,t,n):e==this.skillConfig.putonggongji_leftUp?this.playPuTongGongJi2_1(i,t,n):e==this.skillConfig.fireDaoShi?this.playFire_daoshi(i,t,n):e==this.skillConfig.fireFashi1?this.playFire_fashi(i,t,n):e==this.skillConfig.fireZhanshi_leftup?this.playFire_zhanshi(i,t,n):e==this.skillConfig.shenshougongji_pro?this.playShenShouGongJi_pro(i,t,n):e==this.skillConfig.zhaohuan_shenshou_pro?this.playNewShenShou(i,t,n):e==this.skillConfig.zhaohuan_kulu_pro?this.playNewKuLu(i,t,n):e==this.skillConfig.youhuozhiguang_pro?this.playYouHuoZhiGuang_pro(i,t,n):e==this.skillConfig.youhuozhiguang_pg_toleft_pro?this.playYouhuozhiguang_pg_pro(i,t,n):e==this.skillConfig.youhuozhiguang_lpg_toleft_pro?this.playYouhuozhiguang_lpg_pro(i,t,n):e==this.skillConfig.baozhu?this.playBaoZhu(i,t,n):e==this.skillConfig.tx_cishajianshu_pro_toLeft?this.playCiShaJianShu_pro(i,t,n):e==this.skillConfig.tx_leidianshu_qishou?this.playLeiDianShu_pro(i,t,n):e==this.skillConfig.skin_2_banyue_qishou?this.playBanYue_skin_2_qishou(i,t,n):e==this.skillConfig.skin_2_huoqiang_shifa?this.playHuoQiang_skin_2_qishou(i,t,n):e==this.skillConfig.skin_2_shidu_shifa?this.playShiDuShu_skin2_qishou(i,t,n):e==this.skillConfig.skin_3_cisha_up?this.playcisha_skin3(i,t,n):e==this.skillConfig.skin_3_bingPaoxiao_qishou?this.playbingpaoxiao_skin3_qishou(i,t,n):e==this.skillConfig.skin_3_linghunhuofu_qishou?this.playlinghunhuofu_skin3_qishou(i,t,n):e==this.skillConfig.skin_3_liehuo_leftup?this.playLieHuo_skin3(i,t,n):e==this.skillConfig.skin_2_mofadun?this.playMoFaDun_skin2(i,t,n):e==this.skillConfig.skin_2_shenshengzhanjiashu&&this.playShenShengZhanJiaShu_skin2(i,t,n)},e.prototype.useSkillByPosition=function(e,t){e==this.skillConfig.putonggongji_death?this.playPuTongGongDead(t):e==this.skillConfig.fireDead&&this.playFireDead(t)},e.prototype.playPuTongGongJi=function(e,t,i){c.MusicHelper.play_attack();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isDead&&!o.isRecycle){var a=r.default.getSideRole2Role(t,o),d=l.default.instance.createSkillEffectNode();a==r.default.RoleSide.LeftUp||a==r.default.RoleSide.LeftDown||a==r.default.RoleSide.Left||a==r.default.RoleSide.Up?d.scaleX=-1:d.scaleX=1,d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol));var f=new l.MySkillClipInfo;f.beAttackRole=o,f.attackRole=t,f.callBack=i,f.skillEffectNode=d,f.skilleffId=this.skillConfig.putonggongji,l.default.instance.playClipByClipInfo(f,this.playPuTongGongJi_back)}}},e.prototype.playPuTongGongJi_back=function(e){var t=e.beAttackRole,i=e.clip,n=e.skillEffectNode,o=e.callBack;n.getComponent(cc.Animation).play(i.name,0),cc.tween(n).to(.1,{position:t.node.getPosition()}).delay(i.duration-.1).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx"),o&&o()}).start()},e.prototype.playPuTongGongJi2_1_back=function(e){var t=e.beAttackRole,i=e.attackRole,n=e.clip,o=e.skillEffectNode,c=e.callBack,l=o.getComponent(cc.Animation);if(t&&t.node){var d=r.default.getSideRole2Role(i,t);o.setPosition(s.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol)),o.parent=this.demoEffect,o.active=!0;var f=t.node.getPosition();d==r.default.RoleSide.LeftUp&&(f.x+=40,f.y-=40),d==r.default.RoleSide.Down&&(f.y+=50),d==r.default.RoleSide.Left&&(f.x+=50),d==r.default.RoleSide.LeftDown&&(f.x+=40,f.y+=40),d==r.default.RoleSide.RightUp&&(o.scaleX=-1,f.x-=40,f.y-=40),d==r.default.RoleSide.RightDown&&(o.scaleX=-1,f.x-=40,f.y+=40),d==r.default.RoleSide.Up&&(o.scaleY=-1,f.y-=50),d==r.default.RoleSide.Right&&(o.scaleX=-1,f.x-=50),setTimeout(function(){l.play(n.name,0),cc.tween(o).to(.1,{position:f}).delay(n.duration-.1).call(function(){a.default.Instance.put(o,"RoleSkillEffectPrefabEx"),c&&c()}).start()},30)}},e.prototype.playPuTongGongJi2_1=function(e,t,i){c.MusicHelper.play_attack();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isDead&&!o.isRecycle){var a,s=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(s),s==r.default.RoleSide.LeftUp&&(a=this.skillConfig.putonggongji_leftUp),s==r.default.RoleSide.Down&&(a=this.skillConfig.putonggongji_down),s==r.default.RoleSide.Left&&(a=this.skillConfig.putonggongji_left),s==r.default.RoleSide.LeftDown&&(a=this.skillConfig.putonggongji_leftDown),s==r.default.RoleSide.RightUp&&(a=this.skillConfig.putonggongji_leftUp),s==r.default.RoleSide.RightDown&&(a=this.skillConfig.putonggongji_leftDown),s==r.default.RoleSide.Up&&(a=this.skillConfig.putonggongji_down),s==r.default.RoleSide.Right&&(a=this.skillConfig.putonggongji_left);var d=new l.MySkillClipInfo;d.beAttackRole=o,d.attackRole=t,d.callBack=i,d.skilleffId=a,l.default.instance.playClipByClipInfo(d,this.playPuTongGongJi2_1_back)}}},e.prototype.playPuTongGongDead=function(e){l.default.instance.loadClip(this.skillConfig.putonggongji_death,this.playPuTongGongDead_Back,e)},e.prototype.playPuTongGongDead_Back=function(e,t){var i=l.default.instance.createSkillEffectNode(e);i.parent=this.demoEffect,i.active=!0,i.setPosition(t[0]),i.getComponent(cc.Animation).play(e.name,0),cc.tween(i).delay(e.duration).call(function(){a.default.Instance.put(i,"RoleSkillEffectPrefabEx")}).start()},e.prototype.playZhenQiHuTi=function(e,t,i){l.default.instance.loadClip(this.skillConfig.zhenqihuti,this.playZhenQiHuTi_back,e,t,i)},e.prototype.playZhenQiHuTi_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).to(.1,{position:d.node.getPosition()}).delay(e.duration-.1).call(function(){}).start()}}cc.tween(n.node).delay(a-.1).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playYouHuoZhiGuang=function(e,t,i){l.default.instance.loadClip(this.skillConfig.youHuoZhiGuang,this.playYouHuoZhiGuang_back,e,t,i)},e.prototype.playYouHuoZhiGuang_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration,cc.tween(f).to(.1,{position:d.node.getPosition()}).delay(e.duration-.1).call(function(){}).start()}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playWuJiZhenQi=function(e,t,i){l.default.instance.loadClip(this.skillConfig.wujizhenqi,this.playWuJiZhenQi_back,e,t,i)},e.prototype.playWuJiZhenQi_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration,cc.tween(f).to(.1,{position:d.node.getPosition()}).delay(e.duration-.1).call(function(){}).start()}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playerBanYueWanDao=function(e,t,i){l.default.instance.loadClip(this.skillConfig.banyuewandao,this.playerBanYueWanDao_back,e,t,i)},e.prototype.playerBanYueWanDao_back=function(e,t){var i=t[0],o=t[1],a=t[2],r=[];c.MusicHelper.play_banyuewandao();for(var d=0,f=0;f<i.length;f++){var g=i[f];if(g&&g.node&&!g.isRecycle){var h=l.default.instance.createSkillEffectNode(e);r.push(h),n.Logger.log("nodetest create id++"+h.uuid),h.parent=this.demoEffect,h.active=!0,h.setPosition(s.default.instance.gameView.getGridPosition(g.gridRow,g.gridCol)),h.getComponent(cc.Animation).play(e.name,0),d=e.duration}}cc.tween(o).delay(d).call(function(){a&&a(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playZhuYuShu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.zhiYuShu,this.playZhuYuShu_back,e,t,i)},e.prototype.playZhuYuShu_back=function(e,t){var i=this,n=l.default.instance.createSkillEffectNode(e),o=t[0],r=t[1],d=t[2];c.MusicHelper.play_ZhiLiao(),n.parent=this.demoEffect,n.active=!0,n.setPosition(s.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol)),n.getComponent(cc.Animation).play(e.name,0),cc.tween(n).delay(e.duration).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx"),i.playZhiYuShu2(o,r,d)}).start()},e.prototype.playZhiYuShu2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.zhiYuShu2,this.playZhiYuShu2_back,e,t,i)},e.prototype.playZhiYuShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration,cc.tween(f).delay(e.duration).call(function(){}).start()}}cc.tween(n).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playBingPaoXiao=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bingPaoXiao,this.playBingPaoXiao_back,e,t,i)},e.prototype.playBingPaoXiao_back=function(e,t){var i=this,n=l.default.instance.createSkillEffectNode(e),o=t[0],r=t[1],d=t[2];c.MusicHelper.play_bingpaoxiao(),n.parent=this.demoEffect,n.active=!0,n.setPosition(s.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol)),n.getComponent(cc.Animation).play(e.name,0),cc.tween(n).delay(e.duration).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx"),i.playBingPaoXiao2(o,r,d)}).start()},e.prototype.playBingPaoXiao2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bingPaoXiao2,this.playBingPaoXiao2_back,e,t,i)},e.prototype.playBingPaoXiao2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playBingPaoXiao2_1=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bingpaoxiao2_1,this.playBingPaoXiao2_1_back,e,t,i)},e.prototype.playBingPaoXiao2_1_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_bingpaoxiao();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0;var f=s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol);d.setPosition(f.x,f.y+75),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playBingPaoXiao2_2(n,o,r)}).start()},e.prototype.playBingPaoXiao2_2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bingpaoxiao2_2,this.playBingPaoXiao2_2_back,e,t,i)},e.prototype.playBingPaoXiao2_2_back=function(e,t){var i=this,n=l.default.instance.createSkillEffectNode(e),o=t[0],r=t[1],c=t[2];n.parent=this.demoEffect,n.active=!0,n.setPosition(s.default.instance.gameView.getGridPosition(r.gridRow,r.gridCol)),n.getComponent(cc.Animation).play(e.name,0),cc.tween(n).delay(e.duration).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx"),i.playBingPaoXiao2_3(o,r,c)}).start()},e.prototype.playBingPaoXiao2_3=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bingpaoxiao2_3,this.playBingPaoXiao2_3_back,e,t,i)},e.prototype.playBingPaoXiao2_3_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],r=0,c=[],d=0;d<i.length;d++){var f=i[d],g=l.default.instance.createSkillEffectNode(e);c.push(g),g.parent=this.demoEffect,g.active=!0,g.setPosition(s.default.instance.gameView.getGridPosition(f.gridRow,f.gridCol)),g.getComponent(cc.Animation).play(e.name,0),r=e.duration,cc.tween(g).delay(e.duration).call(function(){a.default.Instance.put(g,"RoleSkillEffectPrefabEx")}).start()}cc.tween(n.node).delay(r).call(function(){o&&o(),l.default.instance.backSkillEffNodes(c)}).start()},e.prototype.playWuJiZhenQi2_1=function(e,t,i){l.default.instance.loadClip(this.skillConfig.wujizhenqi1,this.playWuJiZhenQi2_1_back,e,t,i)},e.prototype.playWuJiZhenQi2_1_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2],c=l.default.instance.createSkillEffectNode(e);c.parent=this.demoEffect,c.active=!0,c.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),c.getComponent(cc.Animation).play(e.name,0),cc.tween(c).delay(e.duration).call(function(){a.default.Instance.put(c,"RoleSkillEffectPrefabEx"),i.playWuJiZhenQi2_2(n,o,r)}).start()},e.prototype.playWuJiZhenQi2_2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.wujizhenqi2,this.playWuJiZhenQi2_2_back,e,t,i)},e.prototype.playWuJiZhenQi2_2_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2],c=l.default.instance.createSkillEffectNode(e);c.parent=this.demoEffect,c.active=!0;var d=s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol);c.setPosition(d.x-10,d.y+75),c.getComponent(cc.Animation).play(e.name,0),cc.tween(c).delay(e.duration).call(function(){a.default.Instance.put(c,"RoleSkillEffectPrefabEx"),i.playWuJiZhenQi2_3(n,o,r)}).start()},e.prototype.playWuJiZhenQi2_3=function(e,t,i){l.default.instance.loadClip(this.skillConfig.wujizhenqi3,this.playWuJiZhenQi2_3_back,e,t,i)},e.prototype.playWuJiZhenQi2_3_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],s=[],r=0;r<i.length;r++){var c=i[r];if(c&&c.node&&!c.isRecycle){c.wujiEffect2&&(a.default.Instance.put(c.wujiEffect2,"RoleSkillEffectPrefabEx"),c.wujiEffect2=null);var d=l.default.instance.createSkillEffectNode(e);s.push(d),d.parent=c.node,d.setPosition(0,0),d.active=!0,c.wujiEffect2=d,d.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(.5).call(function(){o&&o(),l.default.instance.backSkillEffNodes(s)}).start()},e.prototype.playDiYuLeiGuang=function(e,t,i){l.default.instance.loadClip(this.skillConfig.diYuLeiGuang,this.playDiYuLeiGuang_back,e,t,i)},e.prototype.playDiYuLeiGuang_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2],c=l.default.instance.createSkillEffectNode(e);c.parent=this.demoEffect,c.active=!0,c.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),c.getComponent(cc.Animation).play(e.name,0),cc.tween(c).delay(e.duration).call(function(){a.default.Instance.put(c,"RoleSkillEffectPrefabEx"),i.playDiYuLeiGuang2(n,o,r)}).start()},e.prototype.playDiYuLeiGuang2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.diYuLeiGuang2,this.playDiYuLeiGuang2_back,e,t,i)},e.prototype.playDiYuLeiGuang2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration,cc.tween(f).delay(e.duration).call(function(){}).start()}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playGongShaJianShu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.gongshajianshu,this.playGongShaJianShu_back,e,t,i)},e.prototype.playGongShaJianShu_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=[],c=0;c<i.length;c++){var d=i[c],f=l.default.instance.createSkillEffectNode(e);a.push(f);var g=r.default.getSideRole2Role(n,d);g==r.default.RoleSide.LeftUp||g==r.default.RoleSide.LeftDown||g==r.default.RoleSide.Left||g==r.default.RoleSide.Up?f.scaleX=-1:f.scaleX=1,f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).to(.1,{position:d.node.getPosition()}).delay(e.duration-.1).call(function(){o&&o()}).start()}cc.tween(n.node).delay(.5).call(function(){l.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playHuoQiangShu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.huoqiangshu,this.playHuoQiangShu_back,e,t,i)},e.prototype.playHuoQiangShu_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_huoqiang();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playHuoQiangShu2(n,o,r)}).start()},e.prototype.playHuoQiangShu2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.huoqiangshu2,this.playHuoQiangShu2_back,e,t,i)},e.prototype.playHuoQiangShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playHuoQiangShu_effect2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.huoqiangshu_effect2,this.playHuoQiangShu_effect2_back,e,t,i)},e.prototype.playHuoQiangShu_effect2_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_huoqiang();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration-.02).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefab"),i.playHuoQiangShu_effect2_2(n,o,r)}).start()},e.prototype.playHuoQiangShu_effect2_2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.huoqiangshu_effect2_2,this.playHuoQiangShu_effect2_2_back,e,t,i)},e.prototype.playHuoQiangShu_effect2_2_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=0,r=[],c=0;c<n.length;c++){var d=n[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node,f.setPosition(0,0),f.active=!0;f.getComponent(cc.Animation).getClips();s=e.duration,cc.tween(f).delay(e.duration).call(function(){}).start()}}cc.tween(o.node).delay(s-.05).call(function(){l.default.instance.backSkillEffNodes(r),i.playHuoQiangShu_effect2_3(n,o,a)}).start()},e.prototype.playHuoQiangShu_effect2_3=function(e,t,i){l.default.instance.loadClip(this.skillConfig.huoqiangshu_effect2_3,this.playHuoQiangShu_effect2_3_back,e,t,i)},e.prototype.playHuoQiangShu_effect2_3_back=function(e,t){for(var i=t[0],n=(t[1],t[2]),o=0;o<i.length;o++){var s=i[o];if(s&&s.node&&!s.isRecycle){s.huoQiangEffect2&&(a.default.Instance.put(s.huoQiangEffect2,"RoleSkillEffectPrefabEx"),s.huoQiangEffect2=null);var r=l.default.instance.createSkillEffectNode(e,!1);r.parent=s.node,r.setPosition(0,0),r.active=!0,r.getComponent(cc.Animation).play(e.name,0),.6,s.huoQiangEffect2=r}}n&&n()},e.prototype.playBanyuewandao_effect3_1=function(e,t,i){l.default.instance.loadClip(this.skillConfig.banyuewandao_effect3_1,this.playBanyuewandao_effect3_1_back,e,t,i)},e.prototype.playBanyuewandao_effect3_1_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_banyuewandao();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playBanyuewandao_effect3_2(n,o,r)}).start()},e.prototype.playBanyuewandao_effect3_2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.banyuewandao_effect3_2,this.playBanyuewandao_effect3_2_back,e,t,i)},e.prototype.playBanyuewandao_effect3_2_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=0,r=[],c=0;c<n.length;c++){var d=n[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node,f.setPosition(0,0),f.active=!0,f.getComponent(cc.Animation).play(e.name,0),s=e.duration,cc.tween(f).delay(e.duration).call(function(){}).start()}}cc.tween(o.node).delay(s).call(function(){l.default.instance.backSkillEffNodes(r),i.playBanyuewandao_effect3_3(n,o,a),i.playBanyuewandao_effect3_4(n,o,a)}).start()},e.prototype.playBanyuewandao_effect3_3=function(e,t,i){l.default.instance.loadClip(this.skillConfig.banyuewandao_effect3_3,this.playBanyuewandao_effect3_3_back,e,t,i)},e.prototype.playBanyuewandao_effect3_3_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=[],s=.5,r=0;r<i.length;r++){var c=i[r];if(c&&c.node&&!c.isRecycle){var d=l.default.instance.createSkillEffectNode(e);a.push(d),d.parent=c.node,d.setPosition(0,0),d.active=!0,d.getComponent(cc.Animation).play(e.name,0),s=e.duration,cc.tween(d).delay(e.duration).call(function(){}).start()}}cc.tween(n.node).delay(s).call(function(){o&&o(),l.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playBanyuewandao_effect3_4=function(e,t,i){l.default.instance.loadClip(this.skillConfig.banyuewandao_effect3_4,this.playBanyuewandao_effect3_4_back,e,t,i)},e.prototype.playBanyuewandao_effect3_4_back=function(e,t){for(var i=t[0],n=(t[1],t[2]),o=0;o<i.length;o++){var s=i[o];if(s&&s.node&&!s.isRecycle){s.banyueEffect3&&(a.default.Instance.put(s.banyueEffect3,"RoleSkillEffectPrefabEx"),s.banyueEffect3=null);var r=l.default.instance.createSkillEffectNode(e,!1);r.parent=s.node,r.setPosition(0,0),r.active=!0,r.getComponent(cc.Animation).play(e.name,0),.6,s.banyueEffect3=r}}n&&n()},e.prototype.playHuoQiuShu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.huoqiushu,this.playHuoQiuShu_back,e,t,i)},e.prototype.playHuoQiuShu_back=function(e,t){var i=this,n=t[0],a=t[1],r=t[2];c.MusicHelper.play_huoqiushu();for(var d=[],f=0;f<n.length;f++){var g=n[f];if(g&&g.node&&!g.isRecycle){var h=l.default.instance.createSkillEffectNode(e);d.push(h);var u=o.default.p2pRad(a.node.getPosition(),g.node.getPosition()),p=o.default.radiansToDegrees(u);h.angle=p-90,h.parent=this.demoEffect,h.active=!0,h.setPosition(s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol)),h.getComponent(cc.Animation).play(e.name,0);var m=g.node.getPosition();cc.tween(h).to(.2,{position:m}).call(function(){i.playHuoQiuShu2(n,a,r)}).start()}}cc.tween(a.node).delay(.2).call(function(){l.default.instance.backSkillEffNodes(d)}).start()},e.prototype.playHuoQiuShu2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.huoqiushu2,this.playHuoQiuShu2_back,e,t,i)},e.prototype.playHuoQiuShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){}).start()}}cc.tween(n.node).delay(a-.1).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playLeiDianShu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.leidianshu,this.playLeiDianShu_back,e,t,i)},e.prototype.playLeiDianShu_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_leidianshu();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playLeiDianShu2(n,o,r)}).start()},e.prototype.playLeiDianShu2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.leidianshu2,this.playLeiDianShu2_back,e,t,i)},e.prototype.playLeiDianShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0;var g=s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol);f.setPosition(g.x,g.y+35),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playLeiDianShu_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.tx_leidianshu_qishou,this.playLeiDianShu_pro_back,e,t,i)},e.prototype.playLeiDianShu_pro_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_leidianshu();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playLeiDianShu2_pro(n,o,r)}).start()},e.prototype.playLeiDianShu2_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.tx_leidianshu_luoxia,this.playLeiDianShu2_pro_back,e,t,i)},e.prototype.playLeiDianShu2_pro_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0;var g=s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol);f.setPosition(g.x,g.y+15),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playLieHuoJianFa2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.liehuojianfa2_1,this.playLieHuoJianFa2_back,e,t,i)},e.prototype.playLieHuoJianFa2_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_liehuojianfa();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playLieHuoJianFa2_1(n,o,r)}).start(),cc.tween(d).delay(.3).call(function(){r&&r()}).start()},e.prototype.playLieHuoJianFa2_1=function(e,t,i){l.default.instance.loadClip(this.skillConfig.liehuojianfa2_2,this.playLieHuoJianFa2_1_back,e,t,i)},e.prototype.playLieHuoJianFa2_1_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],c=[],d=.5,f=0;f<n.length;f++){var g=n[f];if(g&&g.node&&!g.isRecycle){var h=r.default.getSideRole2Role(o,g),u=l.default.instance.createSkillEffectNode(e);c.push(u),u.scaleX=1,h==r.default.RoleSide.LeftUp?u.angle=-45:h==r.default.RoleSide.Up?u.angle=-90:h==r.default.RoleSide.RightUp?u.angle=-145:h==r.default.RoleSide.Right?u.scaleX=-1:h==r.default.RoleSide.RightDown?(u.scaleX=-1,u.angle=-45):h==r.default.RoleSide.Down?(u.scaleX=-1,u.angle=-90):h==r.default.RoleSide.LeftDown?(u.scaleX=-1,u.angle=-135):r.default.RoleSide.Right,u.parent=this.demoEffect,u.active=!0,u.setPosition(s.default.instance.gameView.getGridPosition(g.gridRow,g.gridCol)),u.getComponent(cc.Animation).play(e.name,0),d=e.duration,cc.tween(u).delay(e.duration).call(function(){i.playLieHuoJianFa2_2(n,o,a)}).start()}}cc.tween(o.node).delay(d).call(function(){l.default.instance.backSkillEffNodes(c)}).start()},e.prototype.playLieHuoJianFa2_2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.liehuojianfa2_3,this.playLieHuoJianFa2_2_back,e,t,i)},e.prototype.playLieHuoJianFa2_2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=0,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playLieHuoJianFa3_1=function(e,t,i){l.default.instance.loadClip(this.skillConfig.liehuojianfa3_1,this.playLieHuoJianFa3_1_back,e,t,i)},e.prototype.playLieHuoJianFa3_1_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];c.MusicHelper.play_liehuojianfa();for(var d=[],f=.5,g=0;g<n.length;g++){var h=n[g];if(h&&h.node&&!h.isRecycle){var u=r.default.getSideRole2Role(o,h),p=l.default.instance.createSkillEffectNode(e);d.push(p),p.scaleX=1,u==r.default.RoleSide.LeftUp?(p.scaleX=-1,p.angle=-45):u==r.default.RoleSide.Up?p.rotation=-90:u==r.default.RoleSide.RightUp?p.angle=45:u==r.default.RoleSide.Down?(p.scaleX=-1,p.angle=90):u==r.default.RoleSide.Right||(u==r.default.RoleSide.LeftDown?(p.scaleX=-1,p.angle=45):u==r.default.RoleSide.RightDown?p.angle=-45:u==r.default.RoleSide.Left&&(p.scaleX=-1)),p.parent=this.demoEffect,p.active=!0;var m=s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol);p.setPosition(m.x-20,m.y+20),p.getComponent(cc.Animation).play(e.name,0),f=e.duration,cc.tween(p).to(.1,{position:h.node.getPosition()}).delay(e.duration-.1).call(function(){i.playLieHuoJianFa3_2(n,o,a)}).start()}}cc.tween(o.node).delay(f).call(function(){l.default.instance.backSkillEffNodes(d)}).start(),cc.tween(p).delay(.3).call(function(){a&&a()}).start()},e.prototype.playLieHuoJianFa3_2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.liehuojianfa3_2,this.playLieHuoJianFa3_2_back,e,t,i)},e.prototype.playLieHuoJianFa3_2_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],[]),a=.5,r=0;r<i.length;r++){var c=i[r];if(c&&c.node&&!c.isRecycle){var d=l.default.instance.createSkillEffectNode(e);o.push(d),d.parent=this.demoEffect,d.active=!0;var f=s.default.instance.gameView.getGridPosition(c.gridRow,c.gridCol);d.setPosition(f.x,f.y+20);var g=d.getComponent(cc.Animation);a=e.duration,g.play(e.name,0)}}cc.tween(n.node).delay(a).call(function(){l.default.instance.backSkillEffNodes(o)}).start()},e.prototype.playLingHunHuoFu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.linghunhuofu,this.playLingHunHuoFu_back,e,t,i)},e.prototype.playLingHunHuoFu_back=function(e,t){var i=this,n=t[0],a=t[1],r=t[2],d=[];c.MusicHelper.play_LingHunHuoFu();for(var f=0;f<n.length;f++){var g=n[f];if(g&&g.node&&a&&a.node&&!g.isRecycle){var h=l.default.instance.createSkillEffectNode(e);d.push(h);var u=o.default.p2pRad(a.node.getPosition(),g.node.getPosition()),p=o.default.radiansToDegrees(u);h.angle=p-90,h.parent=this.demoEffect,h.active=!0;var m=s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol);h.setPosition(m),h.getComponent(cc.Animation).play(e.name,0);var C=g.node.getPosition(),_=cc.v2((m.x+C.x)/2,(m.y+C.y)/2);cc.tween(h).to(.1,{position:_}).call(function(){h.anchorY=.75}).to(.1,{position:C}).delay(.1).call(function(){i.playLingHunHuoFu2(n,a,r)}).start()}}cc.tween(a.node).delay(.2).call(function(){r&&r(),l.default.instance.backSkillEffNodes(d)}).start()},e.prototype.playLingHunHuoFu2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.linghunhuofu2,this.playLingHunHuoFu2_back,e,t,i)},e.prototype.playLingHunHuoFu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=.5,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playLingHunHuoFu_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.tx_linghunhuofu_qishou,this.playLingHunHuoFu_pro_back,e,t,i)},e.prototype.playLingHunHuoFu_pro_back=function(e,t){var i=this,n=t[0],a=t[1],r=t[2];c.MusicHelper.play_LingHunHuoFu();for(var d=.5,f=[],g=0;g<n.length;g++){var h=n[g];if(h&&h.node&&a&&a.node&&!h.isRecycle){var u=l.default.instance.createSkillEffectNode(e);f.push(u);var p=o.default.p2pRad(a.node.getPosition(),h.node.getPosition()),m=s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol),C=o.default.radiansToDegrees(p);u.angle=C,u.parent=this.demoEffect,u.active=!0,u.setPosition(s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol)),u.getComponent(cc.Animation).play(e.name,0),d=e.duration;var _=h.node.getPosition(),v=cc.v2((m.x+_.x)/2,(m.y+_.y)/2);cc.tween(u).to(.15,{position:v}).call(function(){u.anchorX=.75}).to(.1,{position:_}).delay(.1).call(function(){i.playLingHunHuoFu2_pro(n,a,r)}).start()}}cc.tween(a.node).delay(d).call(function(){r&&r(),l.default.instance.backSkillEffNodes(f)}).start()},e.prototype.playLingHunHuoFu2_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.tx_linghunhuofu_shouji,this.playLingHunHuoFu2_pro_back,e,t,i)},e.prototype.playLingHunHuoFu2_pro_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],0),a=[],r=0;r<i.length;r++){var c=i[r];if(c&&c.node&&!c.isRecycle){var d=l.default.instance.createSkillEffectNode(e);a.push(d),d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(c.gridRow,c.gridCol)),d.getComponent(cc.Animation).play(e.name,0),o=e.duration}}cc.tween(n.node).delay(o).call(function(){l.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playMoFaDun=function(e,t,i){l.default.instance.loadClip(this.skillConfig.mofadun,this.playMoFaDun_back,e,t,i)},e.prototype.playMoFaDun_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_mofadun();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){i.playMoFaDun2(n,o,r),a.default.Instance.put(d,"RoleSkillEffectPrefabEx")}).start()},e.prototype.playMoFaDun2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.mofadun2,this.playMoFaDun2_back,e,t,i)},e.prototype.playMoFaDun2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=[],s=0;s<i.length;s++){var r=i[s];if(r&&r.node&&!r.isRecycle){var c=l.default.instance.createSkillEffectNode(e,!1);c.parent=r.node,c.active=!0,c.setPosition(0,0),c.getComponent(cc.Animation).play(e.name,0),a.push(c)}}cc.tween(n.node).delay(.4).call(function(){o&&o(a)}).start()},e.prototype.playShenShengZhanJiaShu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shenshengzhanjiashu,this.playShenShengZhanJiaShu_back,e,t,i)},e.prototype.playShenShengZhanJiaShu_back=function(e,t){t[0];var i=t[1],n=t[2];c.MusicHelper.play_shenshengzhanjia();var o=l.default.instance.createSkillEffectNode(e);o.parent=this.demoEffect,o.active=!0,o.setPosition(s.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol)),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){a.default.Instance.put(o,"RoleSkillEffectPrefabEx"),n&&n()}).start()},e.prototype.playShenShouGongJi=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shenshougongji,this.playShenShouGongJi_back,e,t,i)},e.prototype.playShenShouGongJi_back=function(e,t){for(var i=t[0],n=t[1],a=t[2],r=[],c=0;c<i.length;c++){var d=i[c];if(d&&!d.isDead&&d.roleInfo&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f);var g=o.default.p2pRad(n.node.getPosition(),d.node.getPosition()),h=o.default.radiansToDegrees(g);f.angle=h,f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).to(.1,{position:d.node.getPosition()}).delay(e.duration-.1).call(function(){a&&a()}).start()}}cc.tween(n.node).delay(.5).call(function(){l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShiDuShou=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shidushu,this.playShiDuShou_back,e,t,i)},e.prototype.playShiDuShou_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_ShiDu();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playShiDuShou2(n,o,r)}).start()},e.prototype.playShiDuShou2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shidushu2,this.playShiDuShou2_back,e,t,i)},e.prototype.playShiDuShou2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=.5,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShiduShu_effect2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shidushu_effect2,this.playShiduShu_effect2_back,e,t,i)},e.prototype.playShiduShu_effect2_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_ShiDu();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playShiduShu_effect2_2(n,o,r)}).start()},e.prototype.playShiduShu_effect2_2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shidushu_effect2_2,this.playShiduShu_effect2_2_back,e,t,i)},e.prototype.playShiduShu_effect2_2_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=.5,r=[],c=0;c<n.length;c++){var d=n[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node,f.setPosition(0,0),f.active=!0,f.getComponent(cc.Animation).play(e.name,0),s=e.duration}}cc.tween(o.node).delay(s-.02).call(function(){i.playShiduShu_effect2_3(n,o,a),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShiduShu_effect2_3=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shidushu_effect2_3,this.playShiduShu_effect2_3_back,e,t,i)},e.prototype.playShiduShu_effect2_3_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],s=e.duration,r=0;r<i.length;r++){var c=i[r];if(c&&c.node&&!c.isRecycle){c.shidushu_effect&&(a.default.Instance.put(c.shidushu_effect,"RoleSkillEffectPrefab"),c.shidushu_effect=null);var d=l.default.instance.createSkillEffectNode(e,!1);d.parent=c.node,d.setPosition(0,0),d.active=!0,c.shidushu_effect=d,d.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(s).call(function(){o&&o()}).start()},e.prototype.playYeManChongZhuang=function(e,t,i){c.MusicHelper.play_yemanchongzhuang();n.Logger.log("\u91ce\u86ee\u51b2\u649e===",e);for(var o=0;o<e.length;o++){var a=e[o];if(n.Logger.log("\u91ce\u86ee\u51b2\u649e==11=",a,a.node),a&&a.node&&!a.isRecycle){var d=l.default.instance.createSkillEffectNode();d.scaleX=1;var f=r.default.getSideRole2Role(t,a);t.playCommonAttackMv(f),f==r.default.RoleSide.LeftUp?d.angle=-30:f==r.default.RoleSide.Up?d.angle=-90:f==r.default.RoleSide.RightUp?(d.scaleX=-1,d.angle=30):f==r.default.RoleSide.Down?(d.scaleX=-1,d.angle=-90):f==r.default.RoleSide.Right?d.scaleX=-1:f==r.default.RoleSide.LeftDown?d.angle=30:f==r.default.RoleSide.RightDown?(d.scaleX=-1,d.angle=-30):r.default.RoleSide.Left,d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol));var g=a.node.getPosition();f==r.default.RoleSide.LeftUp?(g.x+=50,g.y-=40):f==r.default.RoleSide.Down?g.y+=50:f==r.default.RoleSide.Left?g.x+=50:f==r.default.RoleSide.LeftDown?(g.x+=50,g.y+=40):f==r.default.RoleSide.RightUp?(d.scaleX=-1,g.x-=50,g.y-=40):f==r.default.RoleSide.RightDown?(d.scaleX=-1,g.x-=50,g.y+=40):f==r.default.RoleSide.Up?(d.scaleY=-1,g.y-=50):f==r.default.RoleSide.Right&&(d.scaleX=-1,g.x-=50);var h=new l.MySkillClipInfo;h.beAttackRole=a,h.attackRole=t,h.callBack=i,h.skilleffId=this.skillConfig.yemanchongzhuang,h.skillEffectNode=d,h.params=g,l.default.instance.playClipByClipInfo(h,this.playYeManChongZhuang_back)}}cc.tween(t.node).delay(.5).call(function(){i&&i()}).start()},e.prototype.playYeManChongZhuang_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode,n=(e.callBack,e.params);i.getComponent(cc.Animation).play(t.name,0),cc.tween(i).delay(.1).to(.1,{position:n}).delay(t.duration-.1).call(function(){a.default.Instance.put(i,"RoleSkillEffectPrefabEx")}).start()},e.prototype.playYeManChongZhuang2=function(e,t,i){for(var n=[],o=0;o<e.length;o++){var a=e[o];if(a&&a.node&&!a.isRecycle){var s=l.default.instance.createSkillEffectNode();s.parent=a.node,s.active=!0,s.setPosition(0,0),n.push(s);var r=new l.MySkillClipInfo;r.beAttackRole=a,r.attackRole=t,r.callBack=i,r.skilleffId=this.skillConfig.yemanchongzhuang2,r.skillEffectNode=s,l.default.instance.playClipByClipInfo(r,this.playYeManChongZhuang2_back)}}cc.tween(t.node).delay(.3).call(function(){i(n)}).start()},e.prototype.playYeManChongZhuang2_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0)},e.prototype.playYinShenShu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.yinshenshu2,this.playYinShenShu_back,e,t,i)},e.prototype.playYinShenShu_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],s=(e.duration,0);s<i.length;s++){n&&n.yinshen_skillmv&&a.default.Instance.put(n.yinshen_skillmv,"RoleSkillEffectPrefabEx");var r=l.default.instance.createSkillEffectNode(e,!1);r.parent=n.node,r.active=!0,r.setPosition(0,0),r.getComponent(cc.Animation).play(e.name,0),n.yinshen_skillmv=r,o&&o(r)}},e.prototype.playYinShenShu2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.yinshenshu2,this.playYinShenShu2_back,e,t,i)},e.prototype.playYinShenShu2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node,f.active=!0,f.getComponent(cc.Animation).play(e.name,0),s.push(f)}}cc.tween(n.node).delay(a).call(function(){o&&o(s),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playKuLu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.zhaohuan_kulu,this.playKuLu_back,e,t,i)},e.prototype.playKuLu_back=function(e,t){var i=t[0],n=t[1],o=t[2];c.MusicHelper.play_call();for(var a=e.duration,r=[],d=0;d<i.length;d++){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShenShou=function(e,t,i){l.default.instance.loadClip(this.skillConfig.zhaohuan_shenshou,this.playShenShou_back,e,t,i)},e.prototype.playShenShou_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,c=[],d=0;d<i.length;d++){var f=l.default.instance.createSkillEffectNode(e);c.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}cc.tween(n.node).delay(a).call(function(){n.state=r.default.RoleState.Relax,o&&o(),l.default.instance.backSkillEffNodes(c)}).start()},e.prototype.playYuanChengGongJi=function(e,t,i){l.default.instance.loadClip(this.skillConfig.yuanchenggongji,this.playYuanChengGongJi_back,e,t,i)},e.prototype.playYuanChengGongJi_back=function(e,t){for(var i=this,n=t[0],a=t[1],r=t[2],c=e.duration,d=[],f=0;f<n.length;f++){var g=n[f];if(g&&g.node&&!g.isRecycle){var h=o.default.p2pRad(a.node.getPosition(),g.node.getPosition()),u=l.default.instance.createSkillEffectNode(e);d.push(u);var p=o.default.radiansToDegrees(h);u.angle=p,u.parent=this.demoEffect,u.active=!0,u.setPosition(s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol)),u.getComponent(cc.Animation).play(e.name,0),c=e.duration,cc.tween(u).to(.3,{position:g.node.getPosition()}).call(function(){i.playYuanChengGongJi2(n,a,r)}).start()}}cc.tween(a.node).delay(c).call(function(){r&&r(),l.default.instance.backSkillEffNodes(d)}).start()},e.prototype.playYuanChengGongJi2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.yuanchenggongji2,this.playYuanChengGongJi2_back,e,t,i)},e.prototype.playYuanChengGongJi2_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){a.default.Instance.put(f,"RoleSkillEffectPrefab")}).start()}}cc.tween(n.node).delay(o).call(function(){l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShakeCiShaJianShu=function(e,t,i){c.MusicHelper.play_cishajianshu();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isRecycle){var a,d=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(d);var f=l.default.instance.createSkillEffectNode();f.anchorY=.5,f.anchorX=.5,d==r.default.RoleSide.LeftUp||d==r.default.RoleSide.LeftDown||d==r.default.RoleSide.Left||d==r.default.RoleSide.Down?f.scaleX=1:f.scaleX=-1,d==r.default.RoleSide.Up&&(f.scaleX=-1,f.scaleY=-1),d==r.default.RoleSide.Down&&(f.scaleX=1,f.scaleY=1),f.parent=this.demoEffect,f.active=!0;var g=s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);switch(f.x=g.x+40,f.y=g.y+40,d){case r.default.RoleSide.LeftUp:case r.default.RoleSide.RightUp:a=this.skillConfig.cishajianshu_toLeftUp;break;case r.default.RoleSide.LeftDown:case r.default.RoleSide.RightDown:a=this.skillConfig.cishajianshu_toLeftDown;break;case r.default.RoleSide.Down:case r.default.RoleSide.Up:a=this.skillConfig.cishajianshu_toDown,f.anchorY=.3;break;case r.default.RoleSide.Left:case r.default.RoleSide.Right:a=this.skillConfig.cishajianshu_toLeft,f.anchorX=.2}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=a,h.skillEffectNode=f,l.default.instance.playClipByClipInfo(h,this.playShakeCiShaJianShu_back)}}cc.tween(t.node).delay(.5).call(function(){i&&i()}).start()},e.prototype.playShakeCiShaJianShu_back=function(e){var t=e.beAttackRole,i=(e.attackRole,e.clip),n=e.skillEffectNode;e.callBack;if(t&&t.node){var o=t.node.getPosition();n.getComponent(cc.Animation).play(i.name,0),cc.tween(n).delay(.1).to(.1,{position:o}).delay(i.duration-.2).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx")}).start()}else n&&a.default.Instance.put(n,"RoleSkillEffectPrefabEx")},e.prototype.playCiShaJianShu_pro=function(e,t,i){c.MusicHelper.play_cishajianshu();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isRecycle){var a=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(a);var d=l.default.instance.createSkillEffectNode();d.parent=this.demoEffect,d.active=!0,a==r.default.RoleSide.LeftUp||a==r.default.RoleSide.LeftDown||a==r.default.RoleSide.Left||a==r.default.RoleSide.Up?d.scaleX=1:d.scaleX=-1,a==r.default.RoleSide.Up&&(d.scaleY=1),a==r.default.RoleSide.Down&&(d.scaleY=-1),d.anchorY=.5,d.anchorX=.5;var f=s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);d.x=f.x,d.y=f.y;var g=void 0;switch(a){case r.default.RoleSide.LeftUp:case r.default.RoleSide.RightUp:g=this.skillConfig.tx_cishajianshu_pro_toLeftUp,d.anchorX=.3,d.anchorY=.25;break;case r.default.RoleSide.LeftDown:case r.default.RoleSide.RightDown:g=this.skillConfig.tx_cishajianshu_pro_toLeftDown,d.anchorX=.65,d.anchorY=.35;break;case r.default.RoleSide.Down:case r.default.RoleSide.Up:g=this.skillConfig.tx_cishajianshu_pro_toUp,d.anchorX=.3,d.anchorY=.35;break;case r.default.RoleSide.Left:case r.default.RoleSide.Right:g=this.skillConfig.tx_cishajianshu_pro_toLeft,d.anchorY=.2}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=d,l.default.instance.playClipByClipInfo(h,this.playCiShaJianShu_pro_back)}}cc.tween(t.node).delay(.5).call(function(){i&&i()}).start()},e.prototype.playCiShaJianShu_pro_back=function(e){var t=e.beAttackRole,i=(e.attackRole,e.clip),n=e.skillEffectNode,o=(e.callBack,n.getComponent(cc.Animation));if(t&&t.node){var s=t.node.getPosition();o.play(i.name,0),cc.tween(n).delay(.1).to(.1,{position:s}).delay(i.duration-.2).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx")}).start()}},e.prototype.playFire_daoshi=function(e,t,i){l.default.instance.loadClip(this.skillConfig.fireDaoShi,this.playFire_daoshi_back,e,t,i)},e.prototype.playFire_daoshi_back=function(e,t){var i=t[0],n=t[1],o=t[2];c.MusicHelper.play_attack();for(var a=e.duration,r=[],d=0;d<i.length;d++){var f=i[d];if(f&&f.node&&!f.isRecycle){var g=l.default.instance.createSkillEffectNode(e);r.push(g),g.parent=this.demoEffect,g.active=!0,g.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),g.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(a).call(function(){l.default.instance.backSkillEffNodes(r),o&&o()}).start()},e.prototype.playShakeLieHuoJianFa=function(e,t,i){c.MusicHelper.play_liehuojianfa();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isRecycle){var a=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(a);var d=l.default.instance.createSkillEffectNode();a==r.default.RoleSide.LeftUp||a==r.default.RoleSide.LeftDown||a==r.default.RoleSide.Left||a==r.default.RoleSide.Down?d.scaleX=1:d.scaleX=-1,a==r.default.RoleSide.Up&&(d.scaleX=-1,d.scaleY=-1),a==r.default.RoleSide.Down&&(d.scaleX=1,d.scaleY=1),d.parent=this.demoEffect,d.active=!0;var f=s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);d.x=f.x,d.y=f.y;var g=void 0;switch(a){case r.default.RoleSide.LeftUp:case r.default.RoleSide.RightUp:g=this.skillConfig.liehuojianfa_toLeftUp;break;case r.default.RoleSide.LeftDown:case r.default.RoleSide.RightDown:g=this.skillConfig.liehuojianfa_toLeftDown;break;case r.default.RoleSide.Down:case r.default.RoleSide.Up:g=this.skillConfig.liehuojianfa_toDown;break;case r.default.RoleSide.Left:case r.default.RoleSide.Right:g=this.skillConfig.liehuojianfa_toLeft}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=d,l.default.instance.playClipByClipInfo(h,this.playShakeLieHuoJianFa_back)}}cc.tween(t).delay(.3).call(function(){i&&i()}).start()},e.prototype.playShakeLieHuoJianFa_back=function(e){var t=e.beAttackRole,i=e.attackRole,n=e.clip,o=e.skillEffectNode;e.callBack;if(o.getComponent(cc.Animation).play(n.name,0),t&&t.node){t.node.getPosition();cc.tween(o).delay(.15).to(.1,{position:t.node.getPosition()}).delay(n.duration-.3).call(function(){}).start(),cc.tween(i.node).delay(n.duration-.3).call(function(){a.default.Instance.put(o,"RoleSkillEffectPrefab")}).start()}},e.prototype.playFire_fashi=function(e,t,i){l.default.instance.loadClip(this.skillConfig.fireFashi1,this.playFire_fashi_back,e,t,i)},e.prototype.playFire_fashi_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_attack();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playFire_fashi2(n,o,r)}).start()},e.prototype.playFire_fashi2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.fireFashi2,this.playFire_fashi2_back,e,t,i)},e.prototype.playFire_fashi2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playBaoZhu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.baozhu,this.playBaoZhu_back,e,t,i)},e.prototype.playBaoZhu_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];c.MusicHelper.play_attack();for(var r=[],d=e.duration,f=0;f<n.length;f++){var g=n[f];if(g&&g.node&&!g.isRecycle){var h=l.default.instance.createSkillEffectNode(e);r.push(h),h.parent=this.demoEffect,h.active=!0,h.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),h.getComponent(cc.Animation).play(e.name,0),cc.tween(h).to(.5,{position:g.node.getPosition()}).call(function(){i.playFire_baozhu(n,o,a)}).start()}}cc.tween(o.node).delay(d).call(function(){l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playFire_baozhu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.baozhuFire,this.playFire_baozhu_back,e,t,i)},e.prototype.playFire_baozhu_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(a).call(function(){l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShakeLieHuoJianFa_pro=function(e,t,i){c.MusicHelper.play_liehuojianfa();for(var n=0;n<e.length;n++){var o=e[n];if(o){var a=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(a);var d=l.default.instance.createSkillEffectNode(),f=void 0;d.scaleX=1,d.scaleY=1;var g=s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);switch(d.x=g.x,d.y=g.y,a){case r.default.RoleSide.LeftUp:f=this.skillConfig.liehuojianfa_pro_toLeftUp,d.y=g.y+70,d.x=g.x-30;break;case r.default.RoleSide.RightUp:f=this.skillConfig.liehuojianfa_pro_toLeftUp,d.scaleX=-1,d.y=g.y+70,d.x=g.x+30;break;case r.default.RoleSide.LeftDown:f=this.skillConfig.liehuojianfa_pro_toLeftDown,d.y=g.y-30,d.x=g.x-50;break;case r.default.RoleSide.RightDown:f=this.skillConfig.liehuojianfa_pro_toLeftDown,d.scaleX=-1,d.y=g.y-30,d.x=g.x+50;break;case r.default.RoleSide.Down:f=this.skillConfig.liehuojianfa_pro_toDown,d.y=g.y-50;break;case r.default.RoleSide.Up:f=this.skillConfig.liehuojianfa_pro_toDown,d.scaleY=-1,d.y=g.y+50;break;case r.default.RoleSide.Left:f=this.skillConfig.liehuojianfa_pro_toLeft,d.x=g.x-60;break;case r.default.RoleSide.Right:f=this.skillConfig.liehuojianfa_pro_toLeft,d.scaleX=-1,d.x=g.x+60}d.parent=this.demoEffect,d.active=!0;var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=f,h.skillEffectNode=d,h.beAttackRoleList=e,l.default.instance.playClipByClipInfo(h,this.playShakeLieHuoJianFa_pro_back)}}cc.tween(t).delay(.3).call(function(){i&&i()}).start()},e.prototype.playShakeLieHuoJianFa_pro_back=function(e){var t=this,i=(e.beAttackRole,e.attackRole),n=e.clip,o=e.skillEffectNode,s=e.callBack,r=o.getComponent(cc.Animation),c=e.beAttackRoleList;r.play(n.name,0),cc.tween(o).delay(n.duration).call(function(){a.default.Instance.put(o,"RoleSkillEffectPrefabEx"),t.playLieHuoJianFa3_2(c,i,s)}).start()},e.prototype.playYeManChongZhuang_pro=function(e,t,i){c.MusicHelper.play_yemanchongzhuang();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isRecycle){var a=l.default.instance.createSkillEffectNode();a.scaleX=1;var d=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(d),a.parent=this.demoEffect,a.active=!0,a.setPosition(s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol));var f=o.node.getPosition();d==r.default.RoleSide.LeftUp&&(f.x+=30,f.y-=20),d==r.default.RoleSide.Down&&(f.y+=30),d==r.default.RoleSide.Left&&(f.x+=30),d==r.default.RoleSide.LeftDown&&(f.x+=30,f.y+=20),d==r.default.RoleSide.RightUp&&(a.scaleX=-1,f.x-=30,f.y-=20),d==r.default.RoleSide.RightDown&&(a.scaleX=-1,f.x-=30,f.y+=20),d==r.default.RoleSide.Up&&(a.scaleY=-1,f.y-=30),d==r.default.RoleSide.Right&&(a.scaleX=-1,f.x-=30);var g=void 0;switch(d){case r.default.RoleSide.LeftUp:case r.default.RoleSide.RightUp:g=this.skillConfig.yemanchongzhuang_pro_toLeftUp;break;case r.default.RoleSide.LeftDown:case r.default.RoleSide.RightDown:g=this.skillConfig.yemanchongzhuang_pro_toLeftDown;break;case r.default.RoleSide.Down:case r.default.RoleSide.Up:g=this.skillConfig.yemanchongzhuang_pro_toDown;break;case r.default.RoleSide.Left:case r.default.RoleSide.Right:g=this.skillConfig.yemanchongzhuang_pro_toLeft}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=a,h.params=f,l.default.instance.playClipByClipInfo(h,this.playYeManChongZhuang_pro_back)}}cc.tween(t.node).delay(.5).call(function(){i&&i()}).start()},e.prototype.playYeManChongZhuang_pro_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode,n=(e.callBack,i.getComponent(cc.Animation)),o=e.params;n.play(t.name,0),cc.tween(i).delay(.1).to(.05,{position:o}).delay(t.duration-.1).call(function(){a.default.Instance.put(i,"RoleSkillEffectPrefabEx")}).start()},e.prototype.playFire_zhanshi=function(e,t,i){c.MusicHelper.play_attack();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isRecycle){var a=r.default.getSideRole2Role(t,o),d=l.default.instance.createSkillEffectNode();d.setPosition(s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol)),d.parent=this.demoEffect,d.active=!0;var f=o.node.getPosition(),g=void 0;a==r.default.RoleSide.LeftUp&&(g=this.skillConfig.fireZhanshi_leftup),a==r.default.RoleSide.Down&&(g=this.skillConfig.fireZhanshi_down),a==r.default.RoleSide.Left&&(g=this.skillConfig.fireZhanshi_left,f.x+=50),a==r.default.RoleSide.LeftDown&&(g=this.skillConfig.fireZhanshi_leftdown,f.x+=40,f.y+=40),a==r.default.RoleSide.RightUp&&(g=this.skillConfig.fireZhanshi_leftup,d.scaleX=-1,f.x-=40,f.y-=40),a==r.default.RoleSide.RightDown&&(g=this.skillConfig.fireZhanshi_leftdown,d.scaleX=-1,f.x-=40,f.y+=40),a==r.default.RoleSide.Up&&(g=this.skillConfig.fireZhanshi_down,d.scaleY=-1,f.y-=50),a==r.default.RoleSide.Right&&(g=this.skillConfig.fireZhanshi_left,d.scaleX=-1,f.x-=50);var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=d,h.params=f,l.default.instance.playClipByClipInfo(h,this.playFire_zhanshi_back)}}},e.prototype.playFire_zhanshi_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode,n=e.callBack,o=i.getComponent(cc.Animation),s=e.params;o.play(t.name,0),cc.tween(i).to(.1,{position:s}).delay(t.duration-.1).call(function(){a.default.Instance.put(i,"RoleSkillEffectPrefabEx"),n&&n()}).start()},e.prototype.playFireDead=function(e){l.default.instance.loadClip(this.skillConfig.fireDead,this.playFireDead_back,e)},e.prototype.playFireDead_back=function(e,t){var i=t[0],n=l.default.instance.createSkillEffectNode(e);n.parent=this.demoEffect,n.active=!0,n.setPosition(i),n.getComponent(cc.Animation).play(e.name,0),e.duration,cc.tween(n).delay(e.duration).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx")}).start()},e.prototype.playShenShouGongJi_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.shenshougongji_pro,this.playShenShouGongJi_pro_back,e,t,i)},e.prototype.playShenShouGongJi_pro_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,c=[],d=0;d<i.length;d++){var f=i[d];if(f&&f.node&&!f.isRecycle){var g=r.default.getSideRole2Role(n,f),h=l.default.instance.createSkillEffectNode(e);c.push(h),h.scaleX=1,g==r.default.RoleSide.LeftUp?h.angle=145:g==r.default.RoleSide.Up?h.angle=90:g==r.default.RoleSide.RightUp?h.angle=35:g==r.default.RoleSide.Down?h.angle=-90:g==r.default.RoleSide.Right||(g==r.default.RoleSide.LeftDown?h.angle=-145:g==r.default.RoleSide.RightDown?h.angle=-35:g==r.default.RoleSide.Left&&(h.angle=180)),h.parent=this.demoEffect,h.active=!0,h.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),h.getComponent(cc.Animation).play(e.name,0),cc.tween(h).delay(.1).to(.1,{position:f.node.getPosition()}).delay(e.duration-.1).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(a).call(function(){l.default.instance.backSkillEffNodes(c)}).start()},e.prototype.playNewKuLu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.zhaohuan_kulu_pro,this.playNewKuLu_back,e,t,i)},e.prototype.playNewKuLu_back=function(e,t){var i=t[0],n=t[1],o=t[2];c.MusicHelper.play_call();for(var a=e.duration,r=[],d=0;d<i.length;d++){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol)),f.getComponent(cc.Animation).play(e.name,0),a=e.duration}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playNewShenShou=function(e,t,i){l.default.instance.loadClip(this.skillConfig.zhaohuan_shenshou_pro,this.playNewShenShou_back,e,t,i)},e.prototype.playNewShenShou_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,c=[],d=!1,f=0;f<i.length;f++){var g=l.default.instance.createSkillEffectNode(e);c.push(g),g.parent=this.demoEffect,g.active=!0,g.setPosition(s.default.instance.gameView.getGridPosition(n.gridRow,n.gridCol));var h=g.getComponent(cc.Animation);h.play(e.name,0),a=e.duration,h.once("finished",function(){d||(d=!0,n.state=r.default.RoleState.Relax,o&&o())},this)}cc.tween(n.node).delay(a).call(function(){n.state=r.default.RoleState.Relax,l.default.instance.backSkillEffNodes(c),o&&o()}).start()},e.prototype.playYouHuoZhiGuang_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.youhuozhiguang_pro,this.playYouHuoZhiGuang_pro_back,e,t,i)},e.prototype.playYouHuoZhiGuang_pro_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).to(.1,{position:d.node.getPosition()}).delay(e.duration-.1).call(function(){}).start()}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playYouhuozhiguang_pg_pro=function(e,t,i){c.MusicHelper.play_attack();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node&&!o.isRecycle){var a=r.default.getSideRole2Role(t,o),d=l.default.instance.createSkillEffectNode();a==r.default.RoleSide.LeftUp||a==r.default.RoleSide.LeftDown||a==r.default.RoleSide.Left||a==r.default.RoleSide.Up?d.scaleX=1:d.scaleX=-1,a==r.default.RoleSide.Up&&(d.scaleX=1,d.scaleY=1),a==r.default.RoleSide.Down&&(d.scaleX=-1,d.scaleY=-1),d.parent=this.demoEffect,d.active=!0;var f=s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);d.x=f.x,d.y=f.y;var g=void 0;switch(a){case r.default.RoleSide.LeftUp:case r.default.RoleSide.RightUp:g=this.skillConfig.youhuozhiguang_pg_toleftUp_pro;break;case r.default.RoleSide.LeftDown:case r.default.RoleSide.RightDown:g=this.skillConfig.youhuozhiguang_pg_toleftDown_pro;break;case r.default.RoleSide.Down:case r.default.RoleSide.Up:g=this.skillConfig.youhuozhiguang_pg_toup_pro;break;case r.default.RoleSide.Left:case r.default.RoleSide.Right:g=this.skillConfig.youhuozhiguang_pg_toleft_pro}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=d,l.default.instance.playClipByClipInfo(h,this.playYouhuozhiguang_pg_pro_back)}}},e.prototype.playYouhuozhiguang_pg_pro_back=function(e){var t=e.beAttackRole,i=(e.attackRole,e.clip),n=e.skillEffectNode,o=e.callBack;n.getComponent(cc.Animation).play(i.name,0),cc.tween(n).to(.1,{x:t.node.getPosition().x,y:t.node.getPosition().y}).delay(i.duration-.3).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx"),o&&o()}).start()},e.prototype.playYouhuozhiguang_lpg_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.youhuozhiguang_lpg_toup_pro,this.playYouhuozhiguang_lpg_pro_back,e,t,i)},e.prototype.playYouhuozhiguang_lpg_pro_back=function(e,t){var i=this,n=t[0],a=t[1],d=t[2];c.MusicHelper.play_attack();for(var f=e.duration,g=[],h=0;h<n.length;h++){var u=n[h];if(u&&u.node&&!u.isRecycle){r.default.getSideRole2Role(a,u);var p=l.default.instance.createSkillEffectNode(e);g.push(p),p.anchorY=1,p.parent=this.demoEffect,p.active=!0;var m=s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol);p.x=m.x,p.y=m.y;var C=p.getComponent(cc.Animation),_=(C.getClips(),o.default.p2pRad(a.node.getPosition(),u.node.getPosition())),v=o.default.radiansToDegrees(_);p.angle=v-90,C.play(e.name,0),cc.tween(p).delay(.1).to(.3,{position:u.node.getPosition()}).call(function(){i.playYouhuozhiguang_lpg_hurt_pro(n,a,d)}).start()}}cc.tween(a.node).delay(f).call(function(){l.default.instance.backSkillEffNodes(g)}).start()},e.prototype.playYouhuozhiguang_lpg_hurt_pro=function(e,t,i){l.default.instance.loadClip(this.skillConfig.youhuozhiguang_lpg_hurt_pro,this.playYouhuozhiguang_lpg_hurt_pro_back,e,t,i)},e.prototype.playYouhuozhiguang_lpg_hurt_pro_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol)),f.getComponent(cc.Animation).play(e.name,0),cc.tween(f).delay(e.duration).call(function(){o&&o()}).start()}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShiDuShu_skin2_qishou=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_shidu_shifa,this.playShiDuShu_skin2_qishou_back,e,t,i)},e.prototype.playShiDuShu_skin2_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_ShiDu();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playShiDuShu_skin2_shouji(n,o,r)}).start()},e.prototype.playShiDuShu_skin2_shouji=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_shidu_shouji,this.playShiDuShu_skin2_shouji_back,e,t,i)},e.prototype.playShiDuShu_skin2_shouji_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],c=0;c<n.length;c++){var d=n[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.parent=d.node,f.setPosition(0,0),f.active=!0,f.getComponent(cc.Animation).play(e.name,0),s=e.duration}}cc.tween(o.node).delay(s-.02).call(function(){i.playShiDuShu_skin2_Chixu(n,o,a),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playShiDuShu_skin2_Chixu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_shidu_chixu,this.playShiDuShu_skin2_Chixu_back,e,t,i)},e.prototype.playShiDuShu_skin2_Chixu_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],s=0;s<i.length;s++){var r=i[s];if(r&&r.node&&!r.isRecycle){r.shidushu_effect&&(a.default.Instance.put(r.shidushu_effect,"RoleSkillEffectPrefabEx"),r.shidushu_effect=null);var c=l.default.instance.createSkillEffectNode(e,!1);c.parent=r.node,c.setPosition(0,0),c.active=!0,r.shidushu_effect=c,c.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(.6).call(function(){o&&o()}).start()},e.prototype.playHuoQiang_skin_2_qishou=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_huoqiang_shifa,this.playHuoQiang_skin_2_qishou_back,e,t,i)},e.prototype.playHuoQiang_skin_2_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_huoqiang();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playHuoQiang_skin_2_chixu(n,o,r)}).start()},e.prototype.playHuoQiang_skin_2_chixu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_huoqiang_chixu,this.playHuoQiang_skin_2_chixu_back,e,t,i)},e.prototype.playHuoQiang_skin_2_chixu_back=function(e,t){for(var i=t[0],n=(t[1],t[2]),o=(e.duration,0);o<i.length;o++){var s=i[o];if(s&&s.node&&!s.isRecycle){s.huoQiangEffect2&&(a.default.Instance.put(s.huoQiangEffect2,"RoleSkillEffectPrefabEx"),s.huoQiangEffect2=null);var r=l.default.instance.createSkillEffectNode(e,!1);r.parent=s.node,r.setPosition(0,0),r.active=!0,s.huoQiangEffect2=r,r.getComponent(cc.Animation).play(e.name,0)}}n&&n()},e.prototype.playBanYue_skin_2_qishou=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_banyue_qishou,this.playBanYue_skin_2_qishou_back,e,t,i)},e.prototype.playBanYue_skin_2_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],r=t[2];c.MusicHelper.play_banyuewandao();var d=l.default.instance.createSkillEffectNode(e);d.parent=this.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol)),d.getComponent(cc.Animation).play(e.name,0),cc.tween(d).delay(e.duration).call(function(){a.default.Instance.put(d,"RoleSkillEffectPrefabEx"),i.playBanYue_skin_2_shouji(n,o,r)}).start()},e.prototype.playBanYue_skin_2_shouji=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_banyue_shouji,this.playBanYue_skin_2_shouji_back,e,t,i)},e.prototype.playBanYue_skin_2_shouji_back=function(e,t){for(var i=this,n=t[0],o=t[1],a=t[2],s=e.duration,r=[],c=0;c<n.length;c++){var d=n[c];if(d&&d.node&&!d.isRecycle){var f=l.default.instance.createSkillEffectNode(e);f.parent=d.node,f.setPosition(0,0),f.active=!0,f.getComponent(cc.Animation).play(e.name,0)}}cc.tween(o.node).delay(s).call(function(){l.default.instance.backSkillEffNodes(r),i.playBanyuewandao_effect3_4(n,o,a)}).start()},e.prototype.playLieHuo_skin3=function(e,t,i){c.MusicHelper.play_liehuojianfa();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node){var a=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(a);var d=l.default.instance.createSkillEffectNode();d.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,d.getComponent(cc.Sprite).trim=!1,d.parent=this.demoEffect,d.active=!0;var f=s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);d.anchorX=.5,d.anchorY=.5,d.x=f.x,d.y=f.y;var g=void 0;switch(a){case r.default.RoleSide.LeftUp:g=this.skillConfig.skin_3_liehuo_leftup,d.anchorX=.55,d.anchorY=.45;break;case r.default.RoleSide.RightUp:d.anchorX=.45,d.anchorY=.45,g=this.skillConfig.skin_3_liehuo_rightup;break;case r.default.RoleSide.LeftDown:g=this.skillConfig.skin_3_liehuo_leftDown,d.anchorX=.55,d.anchorY=.55;break;case r.default.RoleSide.RightDown:g=this.skillConfig.skin_3_liehuo_rightDown,d.anchorX=.45,d.anchorY=.55;break;case r.default.RoleSide.Down:g=this.skillConfig.skin_3_liehuo_down;break;case r.default.RoleSide.Up:g=this.skillConfig.skin_3_liehuo_up;break;case r.default.RoleSide.Left:g=this.skillConfig.skin_3_liehuo_left;break;case r.default.RoleSide.Right:g=this.skillConfig.skin_3_liehuo_right}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=d,l.default.instance.playClipByClipInfo(h,this.playLieHuo_skin3_back)}}cc.tween(t).delay(.3).call(function(){i&&i()}).start()},e.prototype.playLieHuo_skin3_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0),cc.tween(i).delay(t.duration).call(function(){a.default.Instance.put(i,"RoleSkillEffectPrefabEx")}).start()},e.prototype.playlinghunhuofu_skin3_qishou=function(e,t,i,n){void 0===n&&(n=null),l.default.instance.loadClip(this.skillConfig.skin_3_linghunhuofu_qishou,this.playlinghunhuofu_skin3_qishou_back,e,t,i)},e.prototype.playlinghunhuofu_skin3_qishou_back=function(e,t){var i=this,n=t[0],a=t[1],r=t[2];c.MusicHelper.play_LingHunHuoFu(),this.playYamaXunShifa(a);for(var d,f=e.duration,g=[],h=function(t){var c=n[t];if(c&&c.node&&a&&a.node){d=l.default.instance.createSkillEffectNode(e),g.push(d),d.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,d.getComponent(cc.Sprite).trim=!1;var f=c.node.getPosition(),h=c.node.width*(.5-c.node.anchorX),p=c.node.height*(.5-c.node.anchorY),m=new cc.Vec2(f.x+h,f.y+p),C=o.default.p2pRad(a.node.getPosition(),m),_=o.default.radiansToDegrees(C);d.angle=_-90,d.parent=u.demoEffect,d.active=!0,d.setPosition(s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol)),d.getComponent(cc.Animation).play(e.name,0);s.default.instance.gameView.getGridPosition(a.gridRow,a.gridCol);cc.tween(d).to(.2,{position:m}).delay(.1).call(function(){i.playlinghunhuofu_skin3_shouji([c],a,r)}).start()}},u=this,p=0;p<n.length;p++)h(p);cc.tween(a.node).delay(f).call(function(){r&&r(),l.default.instance.backSkillEffNodes(g)}).start()},e.prototype.playlinghunhuofu_skin3_shouji=function(e,t,i,n){void 0===n&&(n=null),l.default.instance.loadClip(this.skillConfig.skin_3_linghunhuofu_shouji,this.playlinghunhuofu_skin3_shouji_back,e,t,i)},e.prototype.playlinghunhuofu_skin3_shouji_back=function(e,t){for(var i=t[0],n=t[1],o=(t[2],e.duration),a=[],r=0;r<i.length;r++){var c=i[r];if(c&&c.node){var d=l.default.instance.createSkillEffectNode(e);a.push(d),d.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,d.getComponent(cc.Sprite).trim=!1,d.parent=this.demoEffect,d.active=!0;var f=s.default.instance.gameView.getGridPosition(c.gridRow,c.gridCol);d.setPosition(f.x+c.node.width*(.5-c.node.anchorX),f.y+c.node.height*(.5-c.node.anchorY)),d.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(o).call(function(){l.default.instance.backSkillEffNodes(a)}).start()},e.prototype.playbingpaoxiao_skin3_qishou=function(e,t,i,n){void 0===n&&(n=null),l.default.instance.loadClip(this.skillConfig.skin_3_bingPaoxiao_qishou,this.playbingpaoxiao_skin3_qishou_back,e,t,i)},e.prototype.playbingpaoxiao_skin3_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],a=t[2];c.MusicHelper.play_bingpaoxiao();var r=e.duration,d=[];if(o&&o.node){var f=l.default.instance.createSkillEffectNode(e);d.push(f),f.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,f.getComponent(cc.Sprite).trim=!1,f.parent=this.demoEffect,f.active=!0,f.setPosition(s.default.instance.gameView.getGridPosition(o.gridRow,o.gridCol));var g=f.getComponent(cc.Animation);r=e.duration,g.play(e.name,0),cc.tween(f).delay(r).call(function(){i.playbingpaoxiao_skin3_shouji(n,o,a)}).start()}cc.tween(o.node).delay(r).call(function(){l.default.instance.backSkillEffNodes(d)}).start()},e.prototype.playbingpaoxiao_skin3_shouji=function(e,t,i,n){void 0===n&&(n=null),l.default.instance.loadClip(this.skillConfig.skin_3_bingPaoxiao_shouji,this.playbingpaoxiao_skin3_shouji_back,e,t,i)},e.prototype.playbingpaoxiao_skin3_shouji_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,r=[],c=0;c<i.length;c++){var d=i[c];if(d&&d.node){var f=l.default.instance.createSkillEffectNode(e);r.push(f),f.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,f.getComponent(cc.Sprite).trim=!1,f.parent=this.demoEffect,f.active=!0;var g=s.default.instance.gameView.getGridPosition(d.gridRow,d.gridCol);f.setPosition(g.x+d.node.width*(.5-d.node.anchorX),g.y+d.node.height*(.5-d.node.anchorY)),f.getComponent(cc.Animation).play(e.name,0)}}cc.tween(n.node).delay(a).call(function(){o&&o(),l.default.instance.backSkillEffNodes(r)}).start()},e.prototype.playcisha_skin3=function(e,t,i){c.MusicHelper.play_cishajianshu();for(var n=0;n<e.length;n++){var o=e[n];if(o&&o.node){var a=r.default.getSideRole2Role(t,o);t.playCommonAttackMv(a);var d=l.default.instance.createSkillEffectNode();d.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,d.getComponent(cc.Sprite).trim=!1,d.parent=this.demoEffect,d.active=!0;var f=s.default.instance.gameView.getGridPosition(t.gridRow,t.gridCol);d.x=f.x,d.y=f.y;var g=void 0;switch(a){case r.default.RoleSide.LeftUp:g=this.skillConfig.skin_3_cisha_leftup;break;case r.default.RoleSide.RightUp:g=this.skillConfig.skin_3_cisha_rightup;break;case r.default.RoleSide.LeftDown:g=this.skillConfig.skin_3_cisha_leftDown;break;case r.default.RoleSide.RightDown:g=this.skillConfig.skin_3_cisha_rightDown;break;case r.default.RoleSide.Down:g=this.skillConfig.skin_3_cisha_down;break;case r.default.RoleSide.Up:g=this.skillConfig.skin_3_cisha_up;break;case r.default.RoleSide.Left:g=this.skillConfig.skin_3_cisha_left;break;case r.default.RoleSide.Right:g=this.skillConfig.skin_3_cisha_right}var h=new l.MySkillClipInfo;h.beAttackRole=o,h.attackRole=t,h.callBack=i,h.skilleffId=g,h.skillEffectNode=d,l.default.instance.playClipByClipInfo(h,this.playcisha_skin3_back)}cc.tween(t.node).delay(0).call(function(){i&&i()}).start()}},e.prototype.playcisha_skin3_back=function(e){e.beAttackRole,e.attackRole;var t=e.clip,i=e.skillEffectNode;e.callBack;i.getComponent(cc.Animation).play(t.name,0),cc.tween(i).delay(t.duration).call(function(){a.default.Instance.put(i,"RoleSkillEffectPrefabEx")}).start()},e.prototype.playYamaXunShifa=function(e,t){void 0===t&&(t=null),l.default.instance.loadClip(this.skillConfig.yamaxun_shifa,this.playYamaXunShifa_back,e,t)},e.prototype.playYamaXunShifa_back=function(e,t){var i=t[0];t[1];if(i&&i.node){var n=l.default.instance.createSkillEffectNode(e);n.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,n.getComponent(cc.Sprite).trim=!1,n.parent=i.node;var o=new cc.Vec2(0,0);n.setPosition(o.x+i.node.width*(.5-i.node.anchorX),o.y+i.node.height*(.5-i.node.anchorY)),n.active=!0,n.getComponent(cc.Animation).play(e.name,0),cc.tween(n).delay(e.duration).call(function(){a.default.Instance.put(n,"RoleSkillEffectPrefabEx")}).start()}},e.prototype.playMoFaDun_skin2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_mofadun,this.playMoFaDun_skin2_back,e,t,i)},e.prototype.playMoFaDun_skin2_back=function(e,t){for(var i=t[0],n=t[1],o=t[2],a=e.duration,s=[],r=0;r<i.length;r++){var c=i[r];if(c&&c.node&&!c.isRecycle){var d=l.default.instance.createSkillEffectNode(e,!1);d.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,d.getComponent(cc.Sprite).trim=!1,d.parent=c.node,d.active=!0,d.setPosition(0,0),d.getComponent(cc.Animation).play(e.name,0),s.push(d)}}cc.tween(n.node).delay(a).call(function(){o&&o(s)}).start()},e.prototype.playShenShengZhanJiaShu_skin2=function(e,t,i){l.default.instance.loadClip(this.skillConfig.skin_2_shenshengzhanjiashu,this.playShenShengZhanJiaShu_skin2_back,e,t,i)},e.prototype.playShenShengZhanJiaShu_skin2_back=function(e,t){t[0];var i=t[1],n=t[2];c.MusicHelper.play_shenshengzhanjia();var o=l.default.instance.createSkillEffectNode(e);o.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,o.getComponent(cc.Sprite).trim=!1,o.parent=this.demoEffect,o.active=!0,o.setPosition(s.default.instance.gameView.getGridPosition(i.gridRow,i.gridCol)),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){a.default.Instance.put(o,"RoleSkillEffectPrefabEx"),n&&n()}).start()},e.prototype.playRoleYunEffect=function(e,t,i){l.default.instance.loadClip(this.skillConfig.yun,this.playRoleYunEffect_back,e,t,i)},e.prototype.playRoleYunEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node){var s=l.default.instance.createSkillEffectNode(e,!1);s.parent=i.node,s.active=!0,s.setPosition(0,0),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(n).call(function(){a.default.Instance.put(s,"RoleSkillEffectPrefabEx"),o&&o()}).start()}},e.prototype.playRoleShiHuaEffect=function(e,t,i){l.default.instance.loadClip(this.skillConfig.debuff_shihua,this.playRoleShiHuaEffect_back,e,t,i)},e.prototype.playRoleShiHuaEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node){var s=l.default.instance.createSkillEffectNode(e,!1);s.parent=i.node,s.active=!0,s.setPosition(0,0),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(n).call(function(){a.default.Instance.put(s,"RoleSkillEffectPrefabEx"),o&&o()}).start()}},e.prototype.playRoleMabiEffect=function(e,t,i){l.default.instance.loadClip(this.skillConfig.debuff_mabi,this.playRoleMabiEffect_back,e,t,i)},e.prototype.playRoleMabiEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node){var s=l.default.instance.createSkillEffectNode(e,!1);s.parent=i.node,s.active=!0,s.setPosition(0,0),s.getComponent(cc.Animation).play(e.name,0);var r=i.node.x,c=cc.tween(i.node).to(.05,{x:r-1}).to(.05,{x:r+2}).to(.05,{x:r-2}).to(.05,{x:r+2}).to(.05,{x:r-2}).to(.05,{x:r}).union().repeatForever().start();setTimeout(function(){c.stop()},1e3*n),cc.tween(s).delay(n).call(function(){a.default.Instance.put(s,"RoleSkillEffectPrefabEx"),o&&o()}).start()}},e.prototype.playRoleIceEffect=function(e,t,i){l.default.instance.loadClip(this.skillConfig.debuff_ice,this.playRoleIceEffect_back,e,t,i)},e.prototype.playRoleIceEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node){var s=l.default.instance.createSkillEffectNode(e,!1);s.parent=i.node,s.active=!0,s.setPosition(0,0),s.getComponent(cc.Animation).play(e.name,0);var r=cc.tween(i.node).to(.05,{angle:-2}).to(.05,{angle:4}).to(.05,{angle:-4}).to(.1,{angle:0}).union().repeatForever().start();setTimeout(function(){r.stop()},1e3*n),cc.tween(s).delay(n).call(function(){a.default.Instance.put(s,"RoleSkillEffectPrefabEx"),i&&(i.node.angle=0),o&&o()}).start()}},e.prototype.playRoleWudiEffect=function(e,t,i){l.default.instance.loadClip(this.skillConfig.wudi,this.playRoleWudiEffect_back,e,t,i)},e.prototype.playRoleWudiEffect_back=function(e,t){var i=t[0],n=t[1],o=t[2];if(i&&i.node){var s=l.default.instance.createSkillEffectNode(e,!1);s.parent=i.node,s.active=!0,s.setPosition(0,0),s.getComponent(cc.Animation).play(e.name,0),cc.tween(s).delay(n).call(function(){a.default.Instance.put(s,"RoleSkillEffectPrefabEx"),o&&o()}).start()}},e.prototype.playRoleRebirthEffect=function(e,t){l.default.instance.loadClip(this.skillConfig.rebirth,this.playRoleRebirthEffect_back,e,t)},e.prototype.playRoleRebirthEffect_back=function(e,t){var i=t[0],n=t[1];if(i&&i.node){var o=l.default.instance.createSkillEffectNode(e,!1);o.parent=i.node,o.active=!0,o.setPosition(0,0),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){a.default.Instance.put(o,"RoleSkillEffectPrefabEx"),n&&n()}).start()}},e.prototype.playBaguaEffect_qishou=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bagua_qishou,this.playBaguaEffect_qishou_back,e,t,i)},e.prototype.playBaguaEffect_qishou_back=function(e,t){var i=this,n=t[0],o=t[1],s=t[2];if(n&&n.node){var r=l.default.instance.createSkillEffectNode(e,!1);r.parent=n.node,r.active=!0,r.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,r.getComponent(cc.Sprite).trim=!1,r.setPosition(0,0),r.getComponent(cc.Animation).play(e.name,0),cc.tween(r).delay(e.duration).call(function(){a.default.Instance.put(r,"RoleSkillEffectPrefabEx"),i.playBaguaEffect_cixu(n,o,s)}).start()}},e.prototype.playBaguaEffect_cixu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bagua_cixu,this.playBaguaEffect_cixu_back,e,t,i)},e.prototype.playBaguaEffect_cixu_back=function(e,t){var i=this,n=t[0],o=t[1],s=t[2];if(n&&n.node){var r=l.default.instance.createSkillEffectNode(e,!1);r.parent=n.node,r.active=!0,r.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,r.getComponent(cc.Sprite).trim=!1,r.setPosition(0,0),r.getComponent(cc.Animation).play(e.name,0),cc.tween(r).delay(o).call(function(){a.default.Instance.put(r,"RoleSkillEffectPrefabEx"),i.playBaguaEffect_jieshu(n,o,s)}).start()}},e.prototype.playBaguaEffect_jieshu=function(e,t,i){l.default.instance.loadClip(this.skillConfig.bagua_jieshu,this.playBaguaEffect_jieshu_back,e,t,i)},e.prototype.playBaguaEffect_jieshu_back=function(e,t){var i=t[0],n=(t[1],t[2]);if(i&&i.node){var o=l.default.instance.createSkillEffectNode(e,!1);o.parent=i.node,o.active=!0,o.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.RAW,o.getComponent(cc.Sprite).trim=!1,o.setPosition(0,0),o.getComponent(cc.Animation).play(e.name,0),cc.tween(o).delay(e.duration).call(function(){a.default.Instance.put(o,"RoleSkillEffectPrefabEx"),n&&n()}).start()}},e.prototype.removeAllEff=function(){cc.isValid(this.demoEffect)&&this.demoEffect.children&&this.demoEffect.children.filter(function(e){return cc.isValid(e)}).forEach(function(e){var t=e.getComponent(cc.Animation);t?(t.stop(),e.stopAllActions(),e.removeFromParent()):e.removeFromParent()})},e.instance=new e,e}();i.default=d,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/MathUtils":"MathUtils","../base/NodePoolManager":"NodePoolManager","../prefab/GameManager":"GameManager","../prefab/RolePrefab":"RolePrefab","../utils/MusicHelper":"MusicHelper","./SkillClipsManager":"SkillClipsManager"}],SkillEffectModel:[function(e,t,i){"use strict";cc._RF.push(t,"dc8e0f1FKlBipv551ht9dv/","SkillEffectModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/SkinConfig"),o=e("../../engine/Logger"),a=e("./ServerTime"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=function(){function e(){this.skinModelList=[]}return e.init=function(){},e.proto2BossModelList=function(t,i){i.skillEffectList=[];for(var a=t.getSkillSkinListList(),c=0;c<a.length;c++){var d=new e;d.skillId=a[c].getSkillid();for(var f=a[c].getSkillSinInfoList(),g=[],h=0;h<f.length;h++){var u=new l;u.skillId=f[h].getSkillid(),u.id=f[h].getSkinid(),u.isBought=f[h].getIsBought(),u.isEquipped=f[h].getIsEquipped(),u.isTryed=f[h].getIsTryed(),u.expireTime=f[h].getExpireTime(),u.tryExpireTime=f[h].getTryExpireTime(),g[h]=u}d.skinModelList=g,i.skillEffectList[c]=d}for(c=0;c<i.skillEffectList.length;c++){var p=0;for(h=0;h<i.skillEffectList[c].skinModelList.length;h++)1==i.skillEffectList[c].skinModelList[h].isEquipped&&p++;if(p>1)for(var m=n.default.getDefaultSkinConfig(i.skillEffectList[c].skillId),C=0;C<i.skillEffectList[c].skinModelList.length;C++)i.skillEffectList[c].skinModelList[C].id==m.id?i.skillEffectList[c].skinModelList[C].isEquipped=1:i.skillEffectList[c].skinModelList[C].isEquipped=-1}s.EventManager.instance.dispatch(r.CommonEvent.Event_skillIntemChange),o.Logger.log("===\u6280\u80fd\u76ae\u80a4\u5217\u8868===",i.skillEffectList),s.EventManager.instance.dispatch(r.CommonEvent.Event_SkillEffectView_Change)},e.getModelListBySever=function(t){for(var i=[],n=t.getSkillSkinListList(),o=0;o<n.length;o++){var a=new e;a.skillId=n[o].getSkillid();for(var s=n[o].getSkillSinInfoList(),r=[],c=0;c<s.length;c++){var d=new l;d.skillId=s[c].getSkillid(),d.id=s[c].getSkinid(),d.isBought=s[c].getIsBought(),d.isEquipped=s[c].getIsEquipped(),d.isTryed=s[c].getIsTryed(),d.expireTime=s[c].getExpireTime(),d.tryExpireTime=s[c].getTryExpireTime(),r[c]=d}a.skinModelList=r,i[o]=a}return i},e.getSkillModelById=function(e,t){for(var i=0;i<t.skillEffectList.length;i++)for(var n=t.skillEffectList[i],o=n.skinModelList,a=0;a<o.length;a++)if(o[i].id==e)return n},e.refreshModelById=function(e,t,i){for(var n=0;n<i.skillEffectList.length;n++)for(var o=0;o<i.skillEffectList[n].skinModelList.length;o++)if(i.skillEffectList[n].skinModelList[o].id==e){i.skillEffectList[n].skinModelList[o].isBought=t.isBought,i.skillEffectList[n].skinModelList[o].isTryed=t.isTryed,i.skillEffectList[n].skinModelList[o].isEquipped=t.isEquipped,i.skillEffectList[n].skinModelList[o].tryExpireTime=t.tryExpireTime,i.skillEffectList[n].skinModelList[o].expireTime=t.expireTime;break}s.EventManager.instance.dispatch(r.CommonEvent.Event_skillIntemChange,t.skillId)},e.getSkillModelBySkillId=function(e,t){for(var i=[],n=0;n<t.skillEffectList.length;n++){var o=t.skillEffectList[n];o.skillId==e&&i.push(o)}return i},e.getIsEquipedModelBySkillId=function(e,t){for(var i=this.getSkillModelBySkillId(e,t),n=0;n<i.length;n++)for(var o=0;o<i[n].skinModelList.length;o++)if(1==i[n].skinModelList[o].isEquipped)return i[n].skinModelList[o]},e.getSkillEffectAndBonusDamage=function(e,t){for(var i=n.default.getDefaultSkinConfig(e),s={skillEffectType:i.effect,skinBonusDamage_p:i.mag_value1[1]},r=this.getSkillModelBySkillId(e,t),c=0;c<r.length;c++)for(var l=0;l<r[c].skinModelList.length;l++){var d=r[c].skinModelList[l];if(o.Logger.log("skinmodel==",d),d&&(d.tryExpireTime>0&&a.ServerTime.getServerTime()/1e3<=d.tryExpireTime||d.isBought)){var f=n.default.getConfigById(d.id);s.skinBonusDamage_p+=f.mag_value1[1],d.isEquipped&&(s.skillEffectType=f.effect)}}return s},e.getSkillEffectModelBySkillidAndSkinId=function(e,t,i){var o=n.default.getDefaultSkinConfig(e),a=new l;a.canTry=!0,a.id=o.id,a.skillId=e,a.isBought=0,o.defaultskin==t?(a.isEquipped=1,a.isBought=1):(a.isEquipped=0,a.isBought=0),a.isTryed=0,a.expireTime=0,a.tryExpireTime=0;for(var s=this.getSkillModelBySkillId(e,i),r=0;r<s.length;r++)for(var c=0;c<s[r].skinModelList.length;c++)s[r].skinModelList[c].id==t&&(a.id=s[r].skinModelList[c].id,a.skillId=s[r].skinModelList[c].skillId,a.isBought=s[r].skinModelList[c].isBought,a.isEquipped=s[r].skinModelList[c].isEquipped,a.isTryed=s[r].skinModelList[c].isTryed,a.expireTime=s[r].skinModelList[c].expireTime,a.tryExpireTime=s[r].skinModelList[c].tryExpireTime);return a},e.getIsEquipSkin=function(e,t,i){if(i)for(var n=i.skillEffectList,o=0;o<n.length;o++)if(e==n[o].skillId)for(var a=0;a<n[o].skinModelList.length;a++)if(n[o].skinModelList[a].id==t&&1==n[o].skinModelList[a].isEquipped)return!0;return!1},e}();i.default=c;var l=function(){function e(){this.id=0,this.canTry=!0}return e.proto2ModelList=function(t){var i=new e;return i.id=t.getSkinid(),i.skillId=t.getSkillid(),i.isBought=t.getIsBought(),i.isEquipped=t.getIsEquipped(),i.isTryed=t.getIsTryed(),i.expireTime=t.getExpireTime(),i.tryExpireTime=t.getTryExpireTime(),i},e.prototype.getCanTry=function(){return this.canTry},e.prototype.getLeftTime=function(){var e=this.tryExpireTime-a.ServerTime.getServerTime()/1e3;return(e=Math.floor(e))<=0&&(e=0),e=Math.ceil(e)},e}();i.SkinModel=l,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../config/SkinConfig":"SkinConfig","../event/CommonEvent":"CommonEvent","./ServerTime":"ServerTime"}],SkillEffectSeletItem:[function(e,t,i){"use strict";cc._RF.push(t,"d1a93HedGVGYpya65jpx0Fr","SkillEffectSeletItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ComponentBase"),s=e("../../utils/MusicHelper"),r=e("../../network/SocketClient"),c=e("../../model/SkillEffectModel"),l=e("../../config/SkinConfig"),d=e("../../config/ColorConfig"),f=e("../../../engine/DateUtil"),g=e("../../event/CommonEvent"),h=e("../../../engine/EventManager"),u=e("../../model/RoleInfoModel"),p=e("../../../engine/ResourcesManager"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeOut=0,t}return n(t,e),t.prototype.init=function(e,t){this.skillId=e,this.skinId=t,this.config=l.default.getConfigById(t),this.skillEffectModel=c.default.getSkillEffectModelBySkillidAndSkinId(this.skillId,this.config.id,u.default.instance),this.node.getChildByName("effectName").getComponent(cc.Label).string=this.config.name,this.node.getChildByName("effectName").color=d.ColorConfig.getQualityColor(this.config.quality),this.node.getChildByName("effectValue").getComponent(cc.Label).string=this.config.des,p.default.instance.loadSprite(this.node.getChildByName("jntb_bg").getChildByName("skillEffectIcon").getComponent(cc.Sprite),"skinIcon/"+this.config.skinIcon),this.onAddEvent(this.node.getChildByName("btnTry"),this.onClickTry.bind(this,t)),this.onAddEvent(this.node.getChildByName("btnUse"),this.onClickUse.bind(this,t)),this.onAddEvent(this.node.getChildByName("bg1"),this.onClickUse.bind(this,t)),h.EventManager.instance.on(g.CommonEvent.Event_SkillEffectView_Change,this.refresh,this),this.tryTime=this.skillEffectModel.getLeftTime(),this.refresh()},t.prototype.refresh=function(){this.skillEffectModel=c.default.getSkillEffectModelBySkillidAndSkinId(this.skillId,this.config.id,u.default.instance),this.tryTime=this.skillEffectModel.getLeftTime(),this.node.getChildByName("hadseletbg").active=!1,this.node.getChildByName("btnTry").active=!1,this.node.getChildByName("btnUse").active=!1,this.node.getChildByName("img_shiyongzhong").active=!1,this.node.getChildByName("img_weihuode").active=!1,this.node.getChildByName("1").active=!1,this.skillEffectModel&&(0==this.skillEffectModel.isBought?this.tryTime>0?(this.node.getChildByName("1").active=!0,this.node.getChildByName("1").getChildByName("leftTime").getComponent(cc.Label).string=f.default.formatLeftTime0(1e3*this.tryTime),this.node.getChildByName("btnTry").active=!1,this.node.getChildByName("img_weihuode").active=!1,1==this.skillEffectModel.isEquipped?this.node.getChildByName("hadseletbg").active=!0:this.node.getChildByName("hadseletbg").active=!1):(this.node.getChildByName("1").active=!1,0==this.skillEffectModel.isTryed?(this.node.getChildByName("btnTry").active=!0,this.node.getChildByName("img_weihuode").active=!1):(this.node.getChildByName("btnTry").active=!1,this.node.getChildByName("img_weihuode").active=!0)):1==this.skillEffectModel.isEquipped?(this.node.getChildByName("hadseletbg").active=!0,this.node.getChildByName("img_shiyongzhong").active=!0,this.node.getChildByName("btnUse").active=!1):(this.node.getChildByName("hadseletbg").active=!1,this.node.getChildByName("img_shiyongzhong").active=!1,this.node.getChildByName("btnUse").active=!0))},t.prototype.update=function(){this.timeOut++,this.timeOut>=cc.game.getFrameRate()&&(this.timeOut=0,this.config&&(this.skillEffectModel=c.default.getSkillEffectModelBySkillidAndSkinId(this.skillId,this.config.id,u.default.instance),this.tryTime=this.skillEffectModel.getLeftTime(),this.tryTime>0?this.node.getChildByName("1").getChildByName("leftTime").getComponent(cc.Label).string=f.default.formatLeftTime0(1e3*this.tryTime):this.node.getChildByName("1").getChildByName("leftTime").getComponent(cc.Label).string="--"))},t.prototype.onClickUse=function(e){var t=c.default.getIsEquipedModelBySkillId(this.skillId,u.default.instance);if(!t||e!=t.id){var i=c.default.getSkillEffectModelBySkillidAndSkinId(this.skillId,e,u.default.instance);if(i&&(1==i.isBought||i.getLeftTime()>0))if(t)r.default.s_seq_swap_skill_sin(this.skillId,t.id,e);else{var n=l.default.getConfigById(e);r.default.s_seq_swap_skill_sin(this.skillId,n.defaultskin,e)}}},t.prototype.onClickTry=function(e){s.MusicHelper.play_click(),r.default.s_seq_try_item(e)},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e),e.on(cc.Node.EventType.TOUCH_END,function(){e.getComponent(cc.Button).enabled&&(s.MusicHelper.play_click(),t&&t())},e)},t=o([C],t)}(a.default));i.default=_,cc._RF.pop()},{"../../../engine/ComponentBase":"ComponentBase","../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ResourcesManager":"ResourcesManager","../../config/ColorConfig":"ColorConfig","../../config/SkinConfig":"SkinConfig","../../event/CommonEvent":"CommonEvent","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkillEffectModel":"SkillEffectModel","../../network/SocketClient":"SocketClient","../../utils/MusicHelper":"MusicHelper"}],SkillEffectView:[function(e,t,i){"use strict";cc._RF.push(t,"e4848svBfVI15vp+DbkoDQ1","SkillEffectView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../config/SkinConfig"),l=e("./SkillEffectSeletItem"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skinconfigList=[],t}return n(t,e),t.prototype.onInitChild=function(e){this.skillId=e,this.skinconfigList=c.default.getConfigByTypeValue(this.skillId)},t.prototype.onShow=function(){s.default.instance.setTopUI(r.default.gameView.SkillEffectView),this.scrollView=this.findChild(this.node,"scrollView"),this.findChild(this.node,"item").active=!1;for(var e=0;e<this.skinconfigList.length;e++){var t=cc.instantiate(this.findChild(this.node,"item"));t.active=!0;var i=c.default.getConfigById(this.skinconfigList[e].id);t.getComponent(l.default).init(this.skillId,i.id),this.scrollView.getComponent(cc.ScrollView).content.addChild(t)}},t=o([f],t)}(a.default));i.default=g,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/SkinConfig":"SkinConfig","../../config/ViewConfig":"ViewConfig","./SkillEffectSeletItem":"SkillEffectSeletItem"}],SkillIUp:[function(e,t,i){"use strict";cc._RF.push(t,"02f05OSz3hC8pER0QI+pAjV","SkillIUp");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/ColorConfig"),c=e("../../config/GameConfig"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../config/ViewConfig"),g=e("../../config/WordConfig"),h=e("../../model/ItemInfoModel"),u=e("../../model/RoleInfoModel"),p=e("../../prefab/ItemPrefab"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t}return n(t,e),t.prototype.onInitChild=function(e){for(var t in this.config=e,this.needList=[],this.config.page){var i={};i.key=t,i.value=this.config.page[t],this.needList.push(i)}this.initWidget()},t.prototype.initWidget=function(){this.bagItem=this.findChild(this.node,"view/pnlCost/bagItem"),this.bagItem.active=!1,this.lblDesc=this.getChild(this.node,"view/2/lblDesc",cc.Label),this.btnUp=this.getChild(this.node,"view/btnUp"),this.initData(),this.refreshData()},t.prototype.initData=function(){var e=this.config;this.lblDesc.string=cc.js.formatStr(g.WordConfig.getWord(60557),e.name2,e.level+1),this.btnUp.on("click",this.onUp,this);for(var t=0;t<this.needList.length;t++){var i=cc.instantiate(this.bagItem),n=this.needList[t];i.active=!0,i.parent=this.bagItem.parent,this.itemList[t]=i;var o=d.ITemsConfig.getITemsConfigById(n.key);i.getComponent(p.default).init(o,!0);var a=i.getChildByName("needNode"),s=a.getChildByName("txtNowNum").getComponent(cc.Label),c=a.getChildByName("txtNeedNum").getComponent(cc.Label);c.string="/"+n.value,c.node.color=r.ColorConfig.WhiteColor;var f=h.default.getItemAmount(n.key);s.string=f+"",f>=n.value?s.node.color=r.ColorConfig.GreenColor:(s.node.color=r.ColorConfig.hexToColor("#ff0000"),o.id,l.ItemId.Book)}},t.prototype.onUserInfoRefresh=function(){this.refreshData()},t.prototype.refreshData=function(){for(var e=0;e<this.itemList.length;e++){var t=this.itemList[e],i=this.needList[e],n=d.ITemsConfig.getITemsConfigById(i.key);t.getComponent(p.default).init(n,!0);var o=t.getChildByName("needNode"),a=o.getChildByName("txtNowNum").getComponent(cc.Label),s=o.getChildByName("txtNeedNum").getComponent(cc.Label);s.string="/"+i.value,s.node.color=r.ColorConfig.WhiteColor;var c=h.default.getItemAmount(i.key);a.string=c+"",c>=i.value?a.node.color=r.ColorConfig.GreenColor:(a.node.color=r.ColorConfig.hexToColor("#ff0000"),n.id,l.ItemId.Book)}},t.prototype.onUp=function(){for(var e=0;e<this.needList.length;e++){var t=this.needList[e],i=d.ITemsConfig.getITemsConfigById(t.key);if(h.default.getItemAmount(t.key)<t.value){if(i&&i.jump_id&&i.jump_id.length>0){var n=h.default.getItem(i.id);a.default.instance.createView(f.default.gameView.ItemAcquire,null,n,i)}return void this.closeView()}}for(e=0;e<this.needList.length;e++){t=this.needList[e];var o=h.default.getItem(t.key);c.GameConfig.connectServer||h.default.decItem(o.itemId,t.value)}this.closeView(),u.default.instance.upSkill(this.config.skillId)},t.prototype.onClose=function(){a.default.instance.closeView(f.default.gameView.skillUp)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.btnUp.off("click",this.onUp)},t=o([C],t)}(s.default));i.default=_,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],SkillItem:[function(e,t,i){"use strict";cc._RF.push(t,"28902+s3U5CWZiWuuZOaPVa","SkillItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/UIManager"),c=e("../../../engine/ViewBase"),l=e("../../config/ColorConfig"),d=e("../../config/GameConfig"),f=e("../../config/SkillConfig"),g=e("../../config/SkinConfig"),h=e("../../config/SpriteFrameConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../manager/RedPointManager"),_=e("../../manager/SkillManager"),v=e("../../model/RoleInfoModel"),y=e("../../model/SkillModel"),b=e("../../network/SocketClient"),I=e("../../prefab/RedPointPrefab"),M=e("../../sdk/SdkHelper"),w=e("../../utils/MusicHelper"),k=cc._decorator,S=k.ccclass,P=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.btnStudy=this.getChild(this.node,"btnStudy"),this.btnStudy.off(cc.Node.EventType.TOUCH_END,this.onStudy.bind(this)),this.btnStudy.on(cc.Node.EventType.TOUCH_END,this.onStudy.bind(this)),this.btnUp=this.getChild(this.node,"btnUp"),this.btnUp.off(cc.Node.EventType.TOUCH_END,this.onStudy.bind(this)),this.btnUp.on(cc.Node.EventType.TOUCH_END,this.onStudy.bind(this));var t=this.getChild(this.node,"btnPreview");t.off(cc.Node.EventType.TOUCH_END,this.onPreView.bind(this)),t.on(cc.Node.EventType.TOUCH_END,this.onPreView.bind(this)),this.unLearn=this.getChild(this.node,"unLearn"),this.unLearn.off(cc.Node.EventType.TOUCH_END,this.onUnLearn.bind(this)),this.unLearn.on(cc.Node.EventType.TOUCH_END,this.onUnLearn.bind(this))},t.prototype.onEnable=function(){a.EventManager.instance.on(m.CommonEvent.Event_UserInfoRefresh,this.onUserInfoRefresh,this),this.refreshPreView()},t.prototype.init=function(e,t,i){this.config=e,this.skillView=t,this.id=i,this.skillModel=v.default.instance.getSkillModel(this.config.skillId,!0),this.initWidget(),this.findChild(this.node,"RedPointPrefab").getComponent(I.default).setRedPointIdList([this.config.skillId]),C.default.getInstance().checkRedPointById(C.RedPointId.Skill)},t.prototype.initWidget=function(){this.skillIcon=this.getChild(this.node,"jntb_bg/skillIcon",cc.Sprite),this.lblName=this.getChild(this.node,"lblName",cc.Label),this.lblDesc=this.getChild(this.node,"lblDesc",cc.Label),this.lblLv=this.getChild(this.node,"lblLv",cc.Label),this.lblConsume=this.getChild(this.node,"pnlConsume/lblConsume",cc.Label),this.lblCd=this.getChild(this.node,"pnlCd/lblCd",cc.Label),this.lblExp=this.getChild(this.node,"pnlExp/lblExp",cc.Label),this.scrollPreView=this.getChild(this.node,"ScrollView/view/content"),this.scrollView=this.getChild(this.node,"ScrollView"),this.hadMaxLevel=this.findChild(this.node,"hadMaxLevel"),this.hadMaxLevel.active=!1,this.btnStudy=this.getChild(this.node,"btnStudy"),this.btnUp=this.getChild(this.node,"btnUp"),this.txtExtLevel=this.getChild(this.node,"txtExtLevel",cc.Label);var e=g.default.getConfigByTypeValue(this.config.skillId);s.Logger.log("\u6280\u80fdid===",this.config.skillId,e),this.btnSkillEffect=this.getChild(this.node,"btnSkillEffect"),this.btnSkillEffect.active=!1,this.onAddEvent(this.btnSkillEffect,this.showSkillEffectView.bind(this)),this.btnSkillEffect.active=e.length>0,this.initData(),this.initBtnSkill(),this.initPreView()},t.prototype.onUserInfoRefresh=function(){this.initData(),this.initBtnSkill(),this.refreshPreView()},t.prototype.initBtnSkill=function(){0==this.skillModel.isActive?(this.btnStudy.active=!1,this.unLearn.active=!0,this.btnUp.active=!1):(this.unLearn.active=!1,this.getChild(this.btnStudy,"btn_shenji").active=!0,this.getChild(this.btnStudy,"btn_yanxi").active=!0,this.skillModel.exp>=this.config.proficiency_total?this.getChild(this.btnStudy,"btn_yanxi").active=!1:this.getChild(this.btnStudy,"btn_shenji").active=!1)},t.prototype.initData=function(){var e=f.SkillConfig.getSkillConfigById(this.skillModel.id,this.skillModel.getTotalLevel(v.default.instance)),t=f.SkillConfig.getSkillConfigById(this.skillModel.id,this.skillModel.level);this.config=t,this.lblName.string=t.name2,this.lblDesc.string=e.desc,this.lblConsume.string=""+e.mana,this.lblCd.string=""+e.cd,this.skillModel.level>=t.maxlevelup?this.lblExp.string=p.WordConfig.getWord(60556):this.lblExp.string=this.skillModel.exp+"/"+t.proficiency_total,this.lblLv.string="Lv."+this.skillModel.level;var i=y.SkillModel.getExtLevel(v.default.instance.attrList,v.default.instance.occupation,this.skillModel.id);i>=0?(this.txtExtLevel.string="+"+i,this.txtExtLevel.node.color=l.ColorConfig.GreenColor):(this.txtExtLevel.string=""+i,this.txtExtLevel.node.color=l.ColorConfig.RedColor),0!=i&&this.skillModel.isActive?this.txtExtLevel.node.active=!0:this.txtExtLevel.node.active=!1,this.skillIcon.spriteFrame=h.SpriteFrameConfig.skill_frame.get("skillIcon/"+t.next_level),this.skillModel.level>=t.maxlevelup?(this.hadMaxLevel.active=!0,this.btnUp.active=!1,this.btnStudy.active=!1):(this.hadMaxLevel.active=!1,this.skillModel.exp>=t.proficiency_total?(this.btnUp.active=!0,this.btnStudy.active=!1):(this.btnStudy.active=!0,this.btnUp.active=!1))},t.prototype.initPreView=function(){if(this.itemList.length<=0){var e=this.getChild(this.scrollPreView,"item");e.active=!1;for(var t=f.SkillConfig.getSkillConfigByIdAll(this.skillModel.id),i=0;i<t.length;i++)if(0!=t[i].level){var n=cc.instantiate(e);n.active=!0,n.name="item"+i,this.scrollPreView.addChild(n),this.itemList[i]=n}this.onPreView(!1)}},t.prototype.disablePreview=function(){this.scrollView.active=!1,this.node.height=150},t.prototype.onPreView=function(e){void 0===e&&(e=!0),e&&w.MusicHelper.play_click(),this.scrollView.active=!this.scrollView.active,this.scrollView.active?this.node.height=420:this.node.height=150,this.refreshPreView()},t.prototype.refreshPreView=function(){if(this.skillModel)for(var e=f.SkillConfig.getSkillConfigByIdAll(this.skillModel.id),t=0;t<e.length;t++)if(0!=e[t].level){var i=this.itemList[t];i.active=!0;var n=this.getChild(i,"bg"),o=this.getChild(i,"lblDesc",cc.Label),a=this.getChild(i,"lblLevel",cc.Label);this.skillModel.getTotalLevel(v.default.instance)==e[t].level?o.node.color=a.node.color=cc.color().fromHEX("#0CFF00"):o.node.color=a.node.color=cc.color().fromHEX("#FFD87D");n.color=cc.color().fromHEX(["#292428","#201B1F"][t%2]),a.string=e[t].level+p.WordConfig.getWord(60433),o.string=e[t].desc}},t.prototype.onUnLearn=function(){w.MusicHelper.play_click();var e=y.SkillModel.getSkillISlearn(this.skillModel.id),t=y.SkillModel.getSkillISlearnItem(this.skillModel.id);if(e){if(0==v.default.instance.updateSkill(t.skillid,1,!0,0,v.default.instance,!1))return void p.WordConfig.showWord(60254);if(_.default.instance.getSkillModelById(t.skillid,v.default.instance).isActive)return void p.WordConfig.showWord(60119);d.GameConfig.connectServer&&(M.default.sdkCustomAction(34,1),p.WordConfig.showWord(60255),b.default.req_skill_lev_up(t.skillid))}else p.WordConfig.showWord(61981)},t.prototype.onStudy=function(){w.MusicHelper.play_click(),this.skillModel.exp>=this.config.proficiency_total?this.skillModel.level>=this.config.maxlevel?p.WordConfig.showWord(60118):r.default.instance.createView(u.default.gameView.skillUp,null,this.config):r.default.instance.createView(u.default.gameView.skillStudy,null,this.config)},t.prototype.showSkillEffectView=function(){for(var e=y.SkillModel.getMyActiveSkillList(),t=!1,i=0;i<e.length;i++)e[i].skillId==this.config.skillId&&(t=!0);t?r.default.instance.createView(u.default.gameView.SkillEffectView,null,this.config.skillId):p.WordConfig.showWord(60332)},t.prefabName="skill/skillitem",t=o([S],t)}(c.default));i.default=P,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConfig":"GameConfig","../../config/SkillConfig":"SkillConfig","../../config/SkinConfig":"SkinConfig","../../config/SpriteFrameConfig":"SpriteFrameConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../manager/SkillManager":"SkillManager","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkillModel":"SkillModel","../../network/SocketClient":"SocketClient","../../prefab/RedPointPrefab":"RedPointPrefab","../../sdk/SdkHelper":"SdkHelper","../../utils/MusicHelper":"MusicHelper"}],SkillManager:[function(e,t,i){"use strict";cc._RF.push(t,"e71cb3sABVDvq8pPABhhMTc","SkillManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../model/RoleInfoModel"),o=e("../config/SkillConfig"),a=e("../config/GameConst"),s=e("../../engine/EventManager"),r=e("../event/CommonEvent"),c=e("../network/SocketClient"),l=e("../../engine/ProtoUtils"),d=e("../../engine/ProtoConfig"),f=function(){function e(){this.nextUploadTime=0,this.maxUploadTime=5*cc.game.getFrameRate()}return Object.defineProperty(e,"instance",{get:function(){return this._instance?this._instance:this._instance=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.nextUploadTime=this.maxUploadTime,s.EventManager.instance.off(r.CommonEvent.Event_FrameUpdate,this.onFrameUpdate,this),s.EventManager.instance.on(r.CommonEvent.Event_FrameUpdate,this.onFrameUpdate,this)},e.prototype.protoPvp=function(e){var t=l.ProtoUtils.DeserializeBinary(d.ProtoConfig.c_req_pvp_skill,e);this.pvpSkillList=new Array;var i=t.getSkillListList();if(i)for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var o=i[n];this.pvpSkillList.push(o.getSkillId())}this.initSkillModel()},e.prototype.protoPvpUse=function(e){var t=l.ProtoUtils.DeserializeBinary(d.ProtoConfig.c_req_pvp_skill_use,e),i=t.getSkillId();if(1==t.getSet())this.pvpSkillList.push(i);else if(this.pvpSkillList.length>0)for(var n=this.pvpSkillList.length-1;n>=0;n--)if(this.pvpSkillList[n]==i){this.pvpSkillList.splice(n,1);break}this.initSkillModel()},e.prototype.initSkillModel=function(){var e=this;n.default.instance.skillModelList.forEach(function(t){t.isSelectPvP=e.pvpSkillList.includes(t.id)}),s.EventManager.instance.dispatch(r.CommonEvent.Event_SkillRefresh)},e.prototype.onFrameUpdate=function(){},e.prototype.getSkillModelById=function(e,t){for(var i=0;i<t.skillModelList.length;i++){var n=t.skillModelList[i];if(n.id==e)return n}},e.prototype.getFaShuJingTong=function(e){for(var t=0;t<e.skillModelList.length;t++){var i=e.skillModelList[t];if(i.isActive&&i.id==o.SkillConfig.SkillIdConfig.FaShuJingTong)return o.SkillConfig.getSkillConfigById(i.id,i.getTotalLevel(n.default.instance))}},e.prototype.getWuJiZhenQi=function(e){for(var t=0;t<e.skillModelList.length;t++){var i=e.skillModelList[t];if(i.isActive&&i.id==o.SkillConfig.SkillIdConfig.WuJiZhenQi)return o.SkillConfig.getSkillConfigById(i.id,i.getTotalLevel(e))}},e.prototype.getGongShaJianShu=function(e){for(var t=0;t<e.skillModelList.length;t++){var i=e.skillModelList[t];if(i.isActive&&i.id==o.SkillConfig.SkillIdConfig.GongShaJianShu)return o.SkillConfig.getSkillConfigById(i.id,i.getTotalLevel(e))}},e.prototype.addSkillExp=function(e,t,i){if(void 0===t&&(t=1),void 0===i&&(i=n.default.instance),i.roleId==n.default.instance.roleId){var o=n.default.instance.getSkillModel(e);o&&o.isActive&&(c.default.req_skill_add_exp(e,t),n.default.saveToLocalStorage())}},e.prototype.addBeiDongSkillExp=function(e){e.roleId==n.default.instance.roleId&&(n.default.instance.occupation==a.GameConst.OCCUPATION.ZHAN_SHI?this.addSkillExp(101,1,e):n.default.instance.occupation==a.GameConst.OCCUPATION.DAO_SHI?this.addSkillExp(301,1,e):n.default.instance.occupation==a.GameConst.OCCUPATION.FA_SHI&&this.addSkillExp(201,1,e))},e}();i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GameConst":"GameConst","../config/SkillConfig":"SkillConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient"}],SkillModel:[function(e,t,i){"use strict";cc._RF.push(t,"59570/F/HRGQ6bDQ7bgJZQ0","SkillModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RoleInfoModel"),o=e("../config/SkillConfig"),a=e("./ServerTime"),s=e("../manager/SkillManager"),r=e("../../engine/EventManager"),c=e("../event/CommonEvent"),l=e("../manager/SummonedManager"),d=e("../config/MagicNameConfig"),f=e("./MagicModel"),g=e("../config/GameConst"),h=e("../manager/RedPointManager"),u=e("../../engine/ProtoConfig"),p=e("./ItemInfoModel"),m=e("../config/StarAbilityConfig"),C=e("./StarPlanetInfoModel"),_=e("../../engine/Logger"),v=e("../prefab/GameManager"),y=e("../config/ITemsConfig"),b=function(){function e(){this.eventIdList=[],this.protos=[],this.id=301,this.level=1,this.exp=300,this.lastUseTIme=0,this.isActive=!1,this.isSelect=!0,this.isSelectPvP=!0,this.preExp=0,this.hurtPercent=1,this.continueTimes=0,this.eventIdList=[h.RedPointId.Skill],this.protos=[u.ProtoConfig.c_req_skill,u.ProtoConfig.c_req_lev_up,u.ProtoConfig.c_add_res_list,u.ProtoConfig.c_req_role_info,u.ProtoConfig.c_update_item_info],h.default.getInstance().addHandler(this)}return e.prototype.getHurtPercent=function(e,t){void 0===t&&(t=0),this.hurtPercent=1;var i=C.default.getStarModelById(e,n.default.instance);if(!i)return this.hurtPercent;if(e==m.default.SkillConfig.Skill_102){var o=m.default.getConfig(i.id,i.lev);return this.hurtPercent*=o.skillvalue[0]/1e4}if(e==m.default.SkillConfig.Skill_103){o=m.default.getConfig(i.id,i.lev);return this.hurtPercent*=o.skillvalue[0]/1e4}if(e==m.default.SkillConfig.Skill_104){o=m.default.getConfig(i.id,i.lev);return this.hurtPercent*=o.skillvalue[2]/1e4}if(e==m.default.SkillConfig.Skill_502){o=m.default.getConfig(i.id,i.lev);return 5==t?this.hurtPercent*=o.skillvalue[0]/1e4:4==t?this.hurtPercent*=o.skillvalue[1]/1e4:3==t?this.hurtPercent*=o.skillvalue[2]/1e4:2==t?this.hurtPercent*=o.skillvalue[3]/1e4:1==t?this.hurtPercent*=o.skillvalue[4]/1e4:this.hurtPercent}if(e==m.default.SkillConfig.Skill_503){o=m.default.getConfig(i.id,i.lev);return this.hurtPercent*=o.skillvalue[0]/1e4}if(e==m.default.SkillConfig.Skill_504){o=m.default.getConfig(i.id,i.lev);return this.hurtPercent*=o.skillvalue[1]/1e4}if(e==m.default.SkillConfig.Skill_603){o=m.default.getConfig(i.id,i.lev);return this.hurtPercent*=o.skillvalue[0]/1e4}if(e==m.default.SkillConfig.Skill_604){o=m.default.getConfig(i.id,i.lev);return this.hurtPercent*=o.skillvalue[1]/1e4}},e.getExtLevel=function(e,t,i){var n=0;return n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.skill_all,e),t==g.GameConst.OCCUPATION.ZHAN_SHI?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.skill_zhanshi,e):t==g.GameConst.OCCUPATION.FA_SHI?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.skill_fashi,e):t==g.GameConst.OCCUPATION.DAO_SHI&&(n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.skill_daoshi,e)),i==d.MagicNameConfig.MagicId.jichujianshu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.jichujianshu,e):i==d.MagicNameConfig.MagicId.gongshajianshu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.gongshajianshu,e):i==d.MagicNameConfig.MagicId.cishajianshu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.cishajianshu,e):i==d.MagicNameConfig.MagicId.banyuewandao?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.banyuewandao,e):i==d.MagicNameConfig.MagicId.yemanchongzhuang?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.yemanchongzhuang,e):i==d.MagicNameConfig.MagicId.hutizhenqi?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.hutizhenqi,e):i==d.MagicNameConfig.MagicId.liehuojianfa?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.liehuojianfa,e):i==d.MagicNameConfig.MagicId.huoqiushu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.huoqiushu,e):i==d.MagicNameConfig.MagicId.leidianshu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.leidianshu,e):i==d.MagicNameConfig.MagicId.huoqiang?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.huoqiang,e):i==d.MagicNameConfig.MagicId.youhuozhiguang?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.youhuozhiguang,e):i==d.MagicNameConfig.MagicId.mofadun?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.mofadun,e):i==d.MagicNameConfig.MagicId.fashujingtong?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.fashujingtong,e):i==d.MagicNameConfig.MagicId.bingpaoxiao?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.bingpaoxiao,e):i==d.MagicNameConfig.MagicId.jingshenlizhanfa?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.jingshenlizhanfa,e):i==d.MagicNameConfig.MagicId.zhiliaoshu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.zhiliaoshu,e):i==d.MagicNameConfig.MagicId.linghunhuofu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.linghunhuofu,e):i==d.MagicNameConfig.MagicId.shidushu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.shidushu,e):i==d.MagicNameConfig.MagicId.zhaohuanshu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.zhaohuanshu,e):i==d.MagicNameConfig.MagicId.yinshenshu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.yinshenshu,e):i==d.MagicNameConfig.MagicId.shenshengzhanjiashu?n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.shenshengzhanjiashu,e):i==d.MagicNameConfig.MagicId.wujizhenqi&&(n+=f.default.getMagicValueByList(d.MagicNameConfig.MagicId.wujizhenqi,e)),n},e.decAllSkillCd=function(e,t){for(var i=0;i<t.skillModelList.length;i++){t.skillModelList[i].lastUseTIme-=e}},e.prototype.getTotalLevel=function(t){if(this.isActive){var i=this.level,n=o.SkillConfig.getSkillConfigById(this.id,this.level);return i+=e.getExtLevel(t.attrList,t.occupation,this.id),this.level>0&&i<=0&&(i=1),i>n.maxlevel&&(i=n.maxlevel),i<=0&&(i=0),i}return this.level},e.canUseYinShen=function(t){if(t)for(var i=e.getBeiDongSkillList(t),n=0;n<i.length;n++){var a=i[n];if(a.skillId==o.SkillConfig.SkillIdConfig.YinShen)return a}},e.checkBaGuaShangHaiJianMian=function(e){var t={first:0,value:0,skillDuration:0};if(!e||!e.skillModelList)return t;for(var i=0;i<e.skillModelList.length;i++)if(e.skillModelList[i].id==o.SkillConfig.SkillIdConfig.FengYinZhiLi){var n=e.skillModelList[i];if(n.getTotalLevel(e)>0){var s=o.SkillConfig.getSkillConfigById(n.id,n.getTotalLevel(e)),r=a.ServerTime.getServerTime(),c=e.fengyinzhiliActTime;if(s){if(t.value=s.parameter[1],r-c>=1e3*s.cd)e.getHp()/e.getMaxHp()<s.parameter[0]/1e4&&(e.fengyinzhiliActTime=r,e.fengyinzhiliEndTime=r+1e3*s.duration_time,_.Logger.log(e.roleName,"\u5c01\u5370\u4e4b\u529b\u5237\u65b0\u4f24\u5bb3\u51cf\u514d===",r,c,s.cd,"\u4f24\u5bb3\u51cf\u514d\u53c2\u6570===",t),t.first=1,t.skillDuration=s.duration_time);e.fengyinzhiliEndTime<r?t.value=0:_.Logger.log(e.roleName,"\u5c01\u5370\u4e4b\u529b\u6301\u7eed\u65f6\u95f4\u5185===\u4f24\u5bb3\u51cf\u514d\u53c2\u6570===",t)}}}return t},e.getMyActiveSkillList=function(){for(var e=[],t=0;t<n.default.instance.skillModelList.length;t++){var i=n.default.instance.skillModelList[t],a=o.SkillConfig.getSkillConfigById(i.id,i.getTotalLevel(n.default.instance));i.isActive&&e.push(a)}return e},e.getBeiDongSkillList=function(e){for(var t=a.ServerTime.getServerTime(),i=[],n=0;n<e.skillModelList.length;n++){var s=e.skillModelList[n],r=o.SkillConfig.getSkillConfigById(s.id,s.getTotalLevel(e)),c=(t-s.lastUseTIme)/1e3;c<=0&&(c=0),s.isActive&&r.type==o.SkillConfig.SkillType.BeiDong&&(c>=r.cd||0==r.cd)&&i.push(r)}return i.sort(function(e,t){return e.weight-t.weight}),i},e.getMyCanUseSkillList=function(e){for(var t=a.ServerTime.getServerTime(),i=[],n=0;n<e.skillModelList.length;n++){var s=e.skillModelList[n],r=o.SkillConfig.getSkillConfigById(s.id,s.getTotalLevel(e)),c=(t-s.lastUseTIme)/1e3;(v.default.instance.BattleType==g.BattleType.PvP?s.isSelectPvP:s.isSelect)&&s.isActive&&r.type==o.SkillConfig.SkillType.ZhuDong&&c>=r.cd&&i.push(r)}return i.sort(function(e,t){return e.weight-t.weight}),i},e.getMyZhuDongActiveSkill=function(e){void 0===e&&(e=n.default.instance);for(var t=[],i=0;i<e.skillModelList.length;i++){var a=e.skillModelList[i],s=o.SkillConfig.getSkillConfigById(a.id,a.level);a.isActive&&s.type==o.SkillConfig.SkillType.ZhuDong&&t.push(a)}return t},e.getMyZhudongSkill=function(e){void 0===e&&(e=n.default.instance);for(var t=[],i=0;i<e.skillModelList.length;i++){var a=e.skillModelList[i];o.SkillConfig.getSkillConfigById(a.id,a.level).type==o.SkillConfig.SkillType.ZhuDong&&t.push(a)}return t},e.getMyWUJIZHENQIActiveSkill=function(e){void 0===e&&(e=n.default.instance);for(var t=0;t<e.skillModelList.length;t++){var i=e.skillModelList[t],a=o.SkillConfig.getSkillConfigById(i.id,i.level);if(i.isActive&&a.skillId==o.SkillConfig.SkillIdConfig.WuJiZhenQi)return a}return null},e.deserializeBinaryToModelList=function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&(t[i]=this.deserializeBinaryToModel(e[i]));return t},e.deserializeBinaryToModel=function(t){var i=new e;return i.id=t.id,i.level=t.level,i.exp=t.exp,i.lastUseTIme=t.lastUseTIme,i.isActive=t.isActive,i.isSelect=t.isSelect,i},e.proto2ModelList=function(t){for(var i=t.getSkillListList(),a=0;a<i.length;a++){var d=new e;d.id=i[a].getK();var f=s.default.instance.getSkillModelById(d.id,n.default.instance);if(f)f.id=d.id,i[a].getV()>f.level&&(f.id!=o.SkillConfig.SkillIdConfig.ZhaoHuanShu&&f.id!=o.SkillConfig.SkillIdConfig.YouHuoZhiGuang||l.default.instance.killSummond(f.id)),f.level=i[a].getV(),f.exp=i[a].getExp(),f.preExp=f.exp,f.level<=0?(f.isActive=!1,f.level=1):f.isActive=!0,1==i[a].getUse()?f.isSelect=!0:f.isSelect=!1;else d.level=i[a].getV(),d.exp=i[a].getExp(),d.preExp=d.exp,d.level<=0?(d.isActive=!1,d.level=1):d.isActive=!0,1==i[a].getUse()?d.isSelect=!0:d.isSelect=!1,n.default.instance.updateSkill(d.id,d.level,d.isActive,d.exp,n.default.instance,d.isSelect)}r.EventManager.instance.dispatch(c.CommonEvent.Event_SkillRefresh)},e.prototype.clone=function(){var t=new e;return t.id=this.id,t.exp=this.exp,t.isActive=this.isActive,t.isSelect=this.isSelect,t.isSelectPvP=this.isSelectPvP,t.lastUseTIme=this.lastUseTIme,t.level=this.level,t},e.prototype.checkRedPoint=function(){var t,i=new Array;n.default.instance.getShowSkillList().forEach(function(t){var n,a,s,r=t,c=o.SkillConfig.getSkillConfigById(r.id,r.level),l=[];for(var d in c.page){var f={};f.key=d,f.value=c.page[d],l.push(f)}n=l.length<=0,l.every(function(e){return p.default.getItemAmount(e.key)>=e.value?(n=!0,!0):(n=!1,!1)}),r&&(a=r.level<c.maxlevelup&&r.exp>=c.proficiency_total),r&&1==r.level&&!r.isActive&&(s=e.getSkillISlearn(r.id));var g={id:r.id,type:h.RedPointType.Default,show:n&&a||s};return i.push(g),!0}),i.every(function(e){return!e.show||(t=e.show,!1)});var a={id:h.RedPointId.Skill,type:h.RedPointType.Default,show:t};return i.push(a),i},e.getSkillISlearn=function(e){var t=o.SkillConfig.getSkillConfigById(e,0);for(var i in t.page){var n=i,a=t.page[i];if(p.default.getItemAmount(n)<a)return!1}return!0},e.getSkillISlearnItem=function(e){var t=o.SkillConfig.getSkillConfigById(e,0);for(var i in t.page){var n=i;return y.ITemsConfig.getITemsConfigById(n)}return null},e}();i.SkillModel=b,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MagicNameConfig":"MagicNameConfig","../config/SkillConfig":"SkillConfig","../config/StarAbilityConfig":"StarAbilityConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../manager/SkillManager":"SkillManager","../manager/SummonedManager":"SummonedManager","../prefab/GameManager":"GameManager","./ItemInfoModel":"ItemInfoModel","./MagicModel":"MagicModel","./RoleInfoModel":"RoleInfoModel","./ServerTime":"ServerTime","./StarPlanetInfoModel":"StarPlanetInfoModel"}],SkillStudy:[function(e,t,i){"use strict";cc._RF.push(t,"f7b29kfpotFkK/pILyiScre","SkillStudy");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/RoleInfoModel"),r=e("../../manager/SkillManager"),c=e("../../config/GameConfig"),l=e("../../model/ItemInfoModel"),d=e("../../config/GameConst"),f=e("../../network/SocketClient"),g=e("../../config/WordConfig"),h=e("../../config/ColorConfig"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxUseNum=1,t.oneExp=100,t}return n(t,e),t.prototype.onInitChild=function(e){this.config=e,this.initWidget()},t.prototype.onLoad=function(){},t.prototype.initWidget=function(){this.btnUse=this.getChild(this.node,"view/btnUse"),this.lblDesc=this.getChild(this.node,"view/2/lblDesc",cc.Label),this.editboxAmount=this.getChild(this.node,"view/3/amountEditBox",cc.EditBox),this.editboxAmount.string="1",this.btnAdd=this.getChild(this.node,"view/3/btn_jia"),this.btnCut=this.getChild(this.node,"view/3/btn_jian"),this.btnMax=this.getChild(this.node,"view/3/btn_max"),this.lblAmount=this.getChild(this.node,"view/lblAmount",cc.Label),this.initData()},t.prototype.initData=function(){this.skillModel=s.default.instance.getSkillModel(this.config.skillId,!0);this.config;this.maxUseNum=Math.ceil((this.config.proficiency_total-this.skillModel.exp)/this.oneExp),this.btnUse.on("click",this.onUse,this),this.btnAdd.on("click",this.onAdd,this),this.btnCut.on("click",this.onCut,this),this.btnMax.on("click",this.onMax,this),this.onEditboxAmount(),this.editboxAmount.node.on("text-changed",this.onEditboxAmount.bind(this))},t.prototype.onEditboxAmount=function(){this.formatSkilldrugAmount()},t.prototype.onAdd=function(){var e=parseInt(this.editboxAmount.string)||1;this.editboxAmount.string=""+ ++e,this.formatSkilldrugAmount()},t.prototype.onCut=function(){var e=parseInt(this.editboxAmount.string)||1;this.editboxAmount.string=""+--e,this.formatSkilldrugAmount()},t.prototype.formatSkilldrugAmount=function(){var e=parseInt(this.editboxAmount.string)||1;isNaN(e)&&(e=1),e>=this.maxUseNum&&(e=this.maxUseNum),e=e<=0?1:e;var t=s.default.instance.getSkillDrug();(e=e>t?t:e)<=1&&(e=1),this.editboxAmount.string=""+e,this.lblDesc.string=cc.js.formatStr(g.WordConfig.getWord(60558),this.config.name2,this.oneExp*parseInt(this.editboxAmount.string)),this.lblAmount.string=t+"",this.lblAmount.node.color=t>0?h.ColorConfig.GreenColor:h.ColorConfig.RedColor},t.prototype.onMax=function(){var e=s.default.instance.getSkillDrug();e<=0&&(e=1),this.editboxAmount.string=""+e,this.onEditboxAmount()},t.prototype.onUse=function(){if(""!=this.editboxAmount.string){var e=parseInt(this.editboxAmount.string);if(e<=0)g.WordConfig.showWord(60120);else if(s.default.instance.getSkillDrug()<e)g.WordConfig.showWord(60120);else if(this.closeView(),c.GameConfig.connectServer)l.default.getItem(d.ItemId.SkillDan)&&f.default.s_req_use_item_add_skill_exp(this.config.skillId,e);else r.default.instance.addSkillExp(this.config.skillId,this.oneExp*e),s.default.instance.useSkillDan(e)}else g.WordConfig.showWord(60120)},t=o([p],t)}(a.default));i.default=m,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/WordConfig":"WordConfig","../../manager/SkillManager":"SkillManager","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient"}],SkillView:[function(e,t,i){"use strict";cc._RF.push(t,"c5d08S/TTNB27khWgz/7C2A","SkillView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/SkillConfig"),r=e("../../model/RoleInfoModel"),c=e("./SkillItem"),l=e("../../../engine/EventManager"),d=e("../../event/CommonEvent"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillItemList=[],t.skillNodeList=[],t}return n(t,e),t.prototype.onEnable=function(){l.EventManager.instance.on(d.CommonEvent.Event_SkillRefresh,this.refreshSkill,this),this.refreshSkill()},t.prototype.refreshSkill=function(){for(var e=r.default.instance.getShowSkillList(),t=0;t<e.length;t++){var i=s.SkillConfig.getSkillConfigById(e[t].id,s.SkillConfig.getSkillLevel(e[t].id));if(this.skillNodeList[t])this.skillNodeList[t].getComponent(c.default).init(i,this,t);else{var n=void 0;n=cc.instantiate(c.default.prefab),this.skillContent.addChild(n),this.skillNodeList[t]=n,n.getComponent(c.default).init(i,this,t),this.skillItemList[t]=n.getComponent(c.default)}}},t.prototype.onShow=function(){this.skillView=this.getChild(this.node,"view/scrollView"),this.skillContent=this.getChild(this.skillView,"view/content")},t.prototype.initData=function(){this.skillContent.removeAllChildren();for(var e=[],t=r.default.instance.skillModelList,i=0;i<t.length;i++)e[i]=s.SkillConfig.getSkillConfigById(t[i].id,t[i].level);this.skillItemList=[],this.initOneSkill(0,e)},t.prototype.initOneSkill=function(e,t){var i=this;e>=t.length||(this.timeId=setTimeout(function(){var n;n=cc.instantiate(c.default.prefab),i.skillContent.addChild(n),i.skillNodeList[e]=n,n.getComponent(c.default).init(t[e],i,e),i.skillItemList[e]=n.getComponent(c.default),i.initOneSkill(e+1,t)},50))},t.prototype.scrollToNode=function(e){for(var t=0;t<this.skillItemList.length;t++)e.id==this.skillItemList[t].id||this.skillItemList[t].disablePreview()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),clearTimeout(this.timeId)},t=o([g],t)}(a.default));i.default=h,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/SkillConfig":"SkillConfig","../../event/CommonEvent":"CommonEvent","../../model/RoleInfoModel":"RoleInfoModel","./SkillItem":"SkillItem"}],SkinConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8af4exOBFlA0JYQcfvmrz4M","SkinConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase");(function(e){e[e.BANYUE_BiYu=2]="BANYUE_BiYu",e[e.HUOQIANG_ZhuYan=4]="HUOQIANG_ZhuYan",e[e.SHIDUSHU_ZiHuo=6]="SHIDUSHU_ZiHuo",e[e.LIEHUO_BaoYan=8]="LIEHUO_BaoYan",e[e.BINGPAOXIAO_BingJing=10]="BINGPAOXIAO_BingJing",e[e.WUJIZHENQI_ZhanLan=12]="WUJIZHENQI_ZhanLan",e[e.YEMANCHONGZHUANG_HuanYing=14]="YEMANCHONGZHUANG_HuanYing",e[e.YOUHUOZHIGUANG_YueBai=16]="YOUHUOZHIGUANG_YueBai",e[e.ZHAOHUANSHU_HuanLing=18]="ZHAOHUANSHU_HuanLing",e[e.MOFADUN_BINGHUAN=33]="MOFADUN_BINGHUAN"})(i.SKINID||(i.SKINID={}));var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quality=1,t.leftTime=0,t.skillList=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.version=e.version,i.name=e.name,i.type=e.type,i.role=e.role,i.chargeid=e.chargeid,i.type_value=e.type_value,i.mag_value1=e.mag_value1,i.des=e.des,i.zhanli=e.zhanli,i.quality=e.quality,i.defaultskin=e.defaultskin,i.effect=e.effect,i.skinIcon=e.skinIcon,i},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==n&&(t=i)}),t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getConfigByTypeValue=function(e){var t=[];return this.configMap.forEach(function(i,n){if(e==i.type_value){var o=i;t.push(o)}}),t},t.getDefaultSkinConfig=function(e){for(var t=this.getConfigByTypeValue(e),i=0;i<t.length;i++)if(t[i].id==t[i].defaultskin)return t[i]},t.Config_Name="skinConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.default=a,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],SkyPassConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3c888Hp/2NObKqY5oP5SWzZ","SkyPassConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},e.getConfigById=function(e){return this.configMap.get(e)},e.getConfigList=function(){return this.configList},e.Config_Name="skypassConfig",e.configMap=new Map,e.configList=[],e}();i.SkyPassConfig=n,cc._RF.pop()},{}],SkyPassModel:[function(e,t,i){"use strict";cc._RF.push(t,"c8144G/ab1FcYYDaSKaiLI7","SkyPassModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/UIManager"),c=e("../config/MapConfig"),l=e("../config/ViewConfig"),d=e("../config/WordConfig"),f=e("../event/CommonEvent"),g=e("../manager/RedPointManager"),h=e("./CostumeModel"),u=e("./NewFeaturesModel"),p=e("./RoleInfoModel"),m=function(){return function(){}}();i.SkyPassInfo=m;var C=function(){return function(){}}();i.SkyPassLevelInfo=C;var _=function(){return function(){}}();i.SkyPassRankInfo=_;var v=function(){return function(){}}();i.SkyPassShopInfo=v;var y=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[g.RedPointId.TianGuan],this.protos=[a.ProtoConfig.c_req_skytower_info,a.ProtoConfig.c_req_sweeep_skytower,a.ProtoConfig.c_req_buy_sweep_skytower],g.default.getInstance().addHandler(this)}return e.proto2Model=function(t){this.model=this.model?this.model:new e;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_skytower_info,t),r=new m,c=i.getInfo();r.type=c.getType(),r.top=c.getTop(),r.record=c.getRecord(),r.sweepTimes=c.getSweepTimes(),r.buyTimes=c.getBuyTimes(),this.skyPassInfo=r,o.Logger.log("c_req_skytower_info=====",i),n.EventManager.instance.dispatch(f.CommonEvent.Event_SkyPass_refresh)},e.proto2SkyPassInfo=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_skytower_record,e),i=new C;i.id=t.getId(),i.topName=t.getTopName(),i.topRecord=t.getTopRecord(),i.topProf=t.getTopProf(),i.minName=t.getMinName(),i.minRecord=t.getMinRecord(),i.minProf=t.getMinProf(),i.ownRecord=t.getOwnRecord(),i.topHeroid=t.getTopHeroid(),i.minHeroid=t.getMinHeroid(),o.Logger.log("c_req_skytower_record=====",t),n.EventManager.instance.dispatch(f.CommonEvent.Event_SkyPass_level_info,i)},e.proto2RankModel=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_skytower_rank,e),i=t.getRankListList();if(this.rankInfo=[],i)for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var c=i[r],l=new _;l.id=c.getId(),l.name=c.getName(),l.record=c.getRecord(),l.rank=c.getRank(),l.prof=c.getProf(),l.heroid=c.getHeroid(),l.personalize=h.CostumeModel.proto2Personalize(c.getPersonalize()),this.rankInfo.push(l)}this.rankInfo.sort(function(e,t){return e.rank-t.rank}),this.ownRank=t.getOwnRank(),o.Logger.log("c_req_skytower_rank=====",t),n.EventManager.instance.dispatch(f.CommonEvent.Event_SkyPass_rank_refresh)},e.proto2Shop=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_dungeon_shop,e).getShopListList();if(this.shopMap=new Map,t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i],c=new v;c.id=o.getId(),c.times=o.getTimes(),this.shopMap.set(c.id,c)}r.default.instance.isOpen(l.default.gameView.TianGuanShopView)?n.EventManager.instance.dispatch(f.CommonEvent.Event_SkyPass_shop_refresh):r.default.instance.createView(l.default.gameView.TianGuanShopView)},e.proto2SweeepResult=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_sweeep_skytower,e);this.skyPassInfo.sweepTimes+=1,o.Logger.log("c_req_sweeep_skytower=====",t),d.WordConfig.showWord(60262),n.EventManager.instance.dispatch(f.CommonEvent.Event_SkyPass_refresh)},e.proto2BuySweepTimes=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_buy_sweep_skytower,e);this.skyPassInfo.buyTimes+=1,o.Logger.log("c_req_buy_sweep_skytower=====",t),d.WordConfig.showWord(60263),n.EventManager.instance.dispatch(f.CommonEvent.Event_SkyPass_refresh)},e.getShopDataById=function(e){return this.shopMap.get(e)},e.prototype.checkRedPoint=function(){var t,i=c.MapConfig.getMapConfigByMapId(22);return t=e.skyPassInfo.sweepTimes>0&&u.NewFeaturesModel.instance.CheckBeAbleToOpen(1008)&&p.default.instance.totalFight>=i.Lv,{id:g.RedPointId.TianGuan,type:g.RedPointType.Default,show:t}},e.rankInfo=[],e}();i.default=y,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./CostumeModel":"CostumeModel","./NewFeaturesModel":"NewFeaturesModel","./RoleInfoModel":"RoleInfoModel"}],SkypassShopConfig:[function(e,t,i){"use strict";cc._RF.push(t,"86a2dAbTOhMcaMcZVt9hBH7","SkypassShopConfig"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.show=0]="show",e[e.hide=1]="hide"}(i.ShowType||(i.ShowType={}));var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;for(var n in t)"function"!=typeof t[n]&&(i[n]=t[n]);return i},e.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},e.getConfigById=function(e){return this.configMap.get(e)},e.getConfigList=function(){return this.configList},e.Config_Name="skypassShopConfig",e.configMap=new Map,e.configList=[],e}();i.SkypassShopConfig=n,cc._RF.pop()},{}],SocketClient:[function(e,t,i){"use strict";cc._RF.push(t,"8655dBJK1xEdrZo3uoCuA4A","SocketClient"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/EventManager"),a=e("../../engine/GameSocket"),s=e("../../engine/GlobalConfig"),r=e("../../engine/LocalStorage"),c=e("../../engine/Logger"),l=e("../../engine/ProtoConfig"),d=e("../../engine/ProtoUtils"),f=e("../../engine/UIManager"),g=e("../config/BagConfig"),h=e("../config/ChongZhiConfig"),u=e("../config/ChristmasterConfig"),p=e("../config/ColorConfig"),m=e("../config/DefaultConfig"),C=e("../config/EquipConfig"),_=e("../config/GameConfig"),v=e("../config/GameConst"),y=e("../config/ITemsConfig"),b=e("../config/MagicNameConfig"),I=e("../config/MapConfig"),M=e("../config/MineConfig"),w=e("../config/MineInfoConfig"),k=e("../config/MonsterConfig"),S=e("../config/SkinConfig"),P=e("../config/ViewConfig"),E=e("../config/WordConfig"),L=e("../event/CommonEvent"),T=e("../GameController"),R=e("../manager/MonsterManager"),N=e("../manager/RedPointManager"),B=e("../manager/SkillManager"),A=e("../manager/TianGuanManager"),G=e("../model/ActivityOpenModel"),x=e("../model/ActivityShopModel"),O=e("../model/AdModel"),V=e("../model/AppDownloadModel"),j=e("../model/AppraisalModel"),D=e("../model/AuctionHouseModel "),F=e("../model/AutoAppellationModel"),H=e("../model/AutoRobotChatModel"),U=e("../model/BaGuaModel"),W=e("../model/BossKillModel"),q=e("../model/BossModel"),z=e("../model/BusinessModel"),J=e("../model/CarnivalInfoModel"),Y=e("../model/ChargeGiftModel"),Z=e("../model/ChatModel"),K=e("../model/ChatRoomModel"),X=e("../model/ChengBaModel"),Q=e("../model/CollectActivityShopModel"),$=e("../model/ConsumerFeedbackMergedModel"),ee=e("../model/ConsumerFeedbackModel"),te=e("../model/ContinuousRechargeModel"),ie=e("../model/CostumeModel"),ne=e("../model/DisCountPrefabModel"),oe=e("../model/EverydayLoginModel"),ae=e("../model/ExoticExplorationModel"),se=e("../model/FangShiModel"),re=e("../model/FastKillModel"),ce=e("../model/FightModel"),le=e("../model/FuGuiGameModel"),de=e("../model/GrowFundModel"),fe=e("../model/GuideModel"),ge=e("../model/GuildModel"),he=e("../model/GuildPvPModel"),ue=e("../model/HolidayModel"),pe=e("../model/HolidayMonsterModel"),me=e("../model/HolidayRunGameModel"),Ce=e("../model/HouseModel"),_e=e("../model/InvitationModel"),ve=e("../model/ItemInfoModel"),ye=e("../model/JingJieModel"),be=e("../model/LegendTaskModel"),Ie=e("../model/LuckyPuzzleModel"),Me=e("../model/MaFaModel"),we=e("../model/MagicModel"),ke=e("../model/MakeEquipModel"),Se=e("../model/MapStatisticsModel"),Pe=e("../model/MergeLuckyDrawModel"),Ee=e("../model/MineModel"),Le=e("../model/NewFeaturesModel"),Te=e("../model/newyear/NewYearTargetModel"),Re=e("../model/NewYearGiftModel"),Ne=e("../model/OptionalGiftBagModel"),Be=e("../model/PkModel"),Ae=e("../model/PostModel"),Ge=e("../model/PrivilegeModel"),xe=e("../model/RoleInfoModel"),Oe=e("../model/SettingModel"),Ve=e("../model/SevenDayLoginModel"),je=e("../model/ShenBinModel"),De=e("../model/ShenBinSkillModel"),Fe=e("../model/ShenGongModel"),He=e("../model/SkillEffectModel"),Ue=e("../model/SkillModel"),We=e("../model/SkyPassModel"),qe=e("../model/SpecialRingModel"),ze=e("../model/SpiritsModel"),Je=e("../model/StarInfoModel"),Ye=e("../model/StarPlanetInfoModel"),Ze=e("../model/StrategyModel"),Ke=e("../model/TaskModel"),Xe=e("../model/TitleModel"),Qe=e("../model/TopUpModel"),$e=e("../model/TuJianEquipModel"),et=e("../model/UltimategiftModel"),tt=e("../model/XianshilibaoModel"),it=e("../model/ZoneModel"),nt=e("../prefab/GameManager"),ot=e("../sdk/FeiYouSdkManager"),at=e("../sdk/LoongCheerManager"),st=e("../sdk/SdkHandler"),rt=e("../sdk/SdkHelper"),ct=e("../sdk/SdkManager"),lt=e("../sdk/STUtils"),dt=e("../utils/MusicHelper"),ft=e("../utils/UIHelper"),gt=e("../view/bigboss/WorldBossModel"),ht=e("../view/Discount/DisCountModel"),ut=e("../view/Rank/EquipRankModel"),pt=e("../view/Rank/FightRankModel"),mt=e("../view/Rank/TuituModel"),Ct=e("../view/RedPacket/packetInfoModel"),_t=e("../view/RedPacket/packetModel"),vt=e("../view/RedPacket/packetRankModel"),yt=e("../view/shenbing/BaoshiInfoModel"),bt=function(){function e(){}return e.init=function(){o.EventManager.instance.on(L.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this)},e.test=function(){var e=d.ProtoUtils.Create(l.ProtoConfig.PB_MESSAGE),t=d.ProtoUtils.Create(l.ProtoConfig.c_update_item_info);t.setDeleteItemIdListList([6]),t.setAdditemlistList([]),t.setUpdateitemlistList([]),t.setUpdateEquipList([]),e.setHead(11),e.setData(t.serializeBinary())},e.onSocketRespMsg=function(t,i){c.Logger.log("SocketClient.onSocketRespMsg",t);try{if(t==l.ProtoConfig.c_feiyou_login){var u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_feiyou_login,i)).getRet();c.Logger.log("c_feiyou_login==",Se,u),a.default.getInstance().closeSocket(!1),o.EventManager.instance.dispatch(L.CommonEvent.Event_SdkInit)}if(t==l.ProtoConfig.c_user_login){u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_user_login,i)).getRet(),Se.getScuKey();var b=Se.getRsp();if(c.Logger.log("c_user_login \u767b\u5f55\u8fd4\u56de=======================",u),1==u){c.Logger.log("c_user_login \u767b\u5f55\u4e8c\u6b21\u9a8c\u8bc1=======================",b);try{ce.default.preFight=0;var k=JSON.parse(b);_.GameConfig.sdkType==_.SdkType.BingNiao?(rt.default.loginRsp=k,rt.default.gameId=k.content.data.gameId,rt.default.appId=k.content.data.appId,rt.default.channelId=k.content.data.channelId,rt.default.uId=k.content.data.userId,rt.default.sdkLoginRsp(b)):_.GameConfig.sdkType==_.SdkType.Xiaotun?rt.default.sdkLoginRsp(b):_.GameConfig.isWechat()?rt.default.sdkLoginRsp(b):(ct.default.sdkAuth(st.AuthType.onLoginRsp,b),o.EventManager.instance.dispatch(L.CommonEvent.Event_SdkInit)),a.default.getInstance().closeSocket(!1)}catch(e){c.Logger.warn("c_user_login json parse error",b,"====",e)}}else 2==u&&(s.GlobalConfig.loginTime=2,a.default.getInstance().ping(),a.default.getInstance().isReconnecting||T.default.instance.gotoLogin(),rt.default.gameUId=b,e.reqRoleList(),lt.default.stLoginSucceed(at.StatisticsType.afEvent),lt.default.stLoginSucceed(at.StatisticsType.firebaseEvent))}else if(t==l.ProtoConfig.c_req_role_list){var Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_role_list,i);c.Logger.log("c_req_role_list===",Se),xe.default.proto2BaseModelList(Se),xe.default.instance&&a.default.getInstance().isReconnecting&&e.req_start_game(xe.default.instance)}else if(t==l.ProtoConfig.c_req_start_game){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_start_game,i);c.Logger.log("\u5f00\u59cb\u6e38\u620f=",Se),(u=Se.getRet())==v.GameConst.RET.SUC?(a.default.getInstance().isLogin=!0,rt.default.sdkGetAppInfo(),e.req_role_info(xe.default.instance.roleId),e.s_seq_fangbuy_info(),e.s_seq_limitshopbuy_info(),e.s_mine_battle_report(),e.s_mine_info(1,1),this.s_req_check_property()):E.WordConfig.showWord(60274)}else if(t==l.ProtoConfig.c_req_role_info)try{Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_role_info,i);if(c.Logger.log("c_req_role_info resp====",Se),xe.default.proto2Model(Se),xe.default.instance.isFirstLogin&&(ct.default.sdkAuth(st.AuthType.onLoginRoleInfo),xe.default.instance.isFirstLogin=!1,_.GameConfig.sdkType==_.SdkType.FengYue)){var bt={server_id:it.ZoneModel.nowZoneInfoModel.server_id,server_name:it.ZoneModel.nowZoneInfoModel.server_name,role_id:xe.default.instance.roleId,role_name:xe.default.instance.roleName,role_level:xe.default.instance.level,balance:xe.default.instance.getGold()},It={eventName:st.AuthType.roleLogin,param:bt};ct.default.sdkAuth(st.AuthType.onCustomEvent,JSON.stringify(It))}}catch(e){c.Logger.warn("c_req_role_info error====",e,i)}else if(t==l.ProtoConfig.c_tell_direct){var Mt=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_tell_direct,i)).getMsg();ft.UIHelper.showTip(Mt)}else if(t==l.ProtoConfig.c_req_item_list){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_item_list,i);ve.default.req_item_listByServer(Se)}else if(t==l.ProtoConfig.c_update_item_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_update_item_info,i);ve.default.updateItemInfoByServer(Se)}else if(t==l.ProtoConfig.c_get_bag_iteminfo){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_bag_iteminfo,i);ve.default.updateItemInfoById(Se)}else if(t==l.ProtoConfig.c_kill_monster)this.onKillMonsterSuc(i);else if(t==l.ProtoConfig.c_add_res_list){var wt=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_add_res_list,i)).getReslistList();xe.default.instance.addResList(wt)}else if(t==l.ProtoConfig.c_req_charge){var kt=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_charge,i)).getProductId(),St=Se.getOrderid(),Pt=Se.getUrl();c.Logger.log("c_req_charge============",Se);var Et=h.ChongZhiConfig.getConfigById(kt);if(_.GameConfig.sdkType==_.SdkType.Feiyou)ot.FeiYouSdkManager.charge(St,Pt,Et.gp_ios,Et.product_ios+"",Et.name,Et.des,"chargeConfig");else if(_.GameConfig.sdkType==_.SdkType.BingNiao)rt.default.sdkPay(St,100*Et.money,Et.name,kt,Pt,Et);else{var Lt=_.GameConfig.sdkType==_.SdkType.LoongCheer?at.PayType.googleplayInapp:ct.SdkPayType.Pay;(It=new ct.PayData).configId=kt,It.cpOrderNo=St,It.shopId=Et.product_ios,It.extend="",It.count=1,It.notifyUrl=Pt,ct.default.sdkPay(Lt,It)}}else if(t==l.ProtoConfig.c_req_enter_scene){u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_enter_scene,i)).getRet();if(c.Logger.log("\u5ba2\u6237\u7aef\u6218\u6597====\u5207\u6362\u5730\u56fe\u6210\u529f------",Se,u),o.EventManager.instance.dispatch(L.CommonEvent.Event_CLIENT_FIGHT),u==v.GameConst.RET.SUC){var Tt=Se.getMapid();xe.default.instance.switchMap(!1,Tt)}else E.WordConfig.showWord(60275)}else if(t==l.ProtoConfig.c_req_equip){var Rt=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_equip,i)).getItemid(),Nt=Se.getGridid(),Bt=ve.default.getItemByid(Rt+"");Bt.gridId=Nt,c.Logger.log("\u7a7f\u6234\u88c5\u5907+==",Bt,xe.default.instance.itemInfoList,Rt,Nt,Se),Nt>0?(xe.default.instance.decItemToBag(Bt,1),1001!=Nt&&1002!=Nt&&1003!=Nt&&1004!=Nt||f.default.instance.createView(P.default.gameView.SpecialEquipView)):xe.default.instance.addItemToBag(Bt,1),o.EventManager.instance.dispatch(v.EVENT_NAME.BAG_CUT,Bt),xe.default.saveToLocalStorage(),o.EventManager.instance.dispatch(L.CommonEvent.Event_Equip)}else if(t==l.ProtoConfig.c_property_list_update){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_property_list_update,i);xe.default.instance.attrList=we.default.proto2ModelList(Se.getAttrListList()),ce.default.proto2ModelList(Se),xe.default.instance.specialRingModelList=qe.SpecialRingModel.proto2ModelList(Se.getSpecialeffectlistList()),xe.default.saveToLocalStorage()}else if(t==l.ProtoConfig.c_resource_list_update){var At=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_resource_list_update,i)).getUpdateResourceListList();xe.default.proto2ResList(At,xe.default.instance)}else if(t==l.ProtoConfig.c_error_code){var Gt=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_error_code,i)).getCode();c.Logger.warn("c_error_code===",Gt),E.WordConfig.showWord(Gt),60122!=Gt&&60132!=Gt&&60144!=Gt||T.default.instance.showServerFail(Gt)}else if(t==l.ProtoConfig.c_error_code_args){Gt=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_error_code_args,i)).getErrorCode();var xt=Se.getArgsList(),Ot=E.WordConfig.getWord(Gt),Vt=[];xt.forEach(function(e){var t={paramIndex:e.getParamindex(),paramValue:e.getParamvalue()};Vt.push(t)}),Vt.sort(function(e,t){return e.paramIndex-t.paramIndex}),console.log("strlist",Vt),Vt.forEach(function(e){Ot=cc.js.formatStr(Ot,e.paramValue)}),E.WordConfig.showTip(Ot)}else if(t==l.ProtoConfig.c_req_boss_fresh_time){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_boss_fresh_time,i);c.Logger.log("c_req_boss_fresh_time==",t,Se),q.BossModel.proto2BossModelList(Se)}else if(t==l.ProtoConfig.c_req_shop_fresh_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_shop_fresh_info,i);z.BusinessModel.instance.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_req_buy){u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_buy,i)).getRet();(Zt=Se.getItemListList()).forEach(function(e){"abc"==e.getType()&&(lt.default.stExchangeGold(at.StatisticsType.afEvent,e.getNum()/1e4),lt.default.stExchangeGold(at.StatisticsType.firebaseEvent,e.getNum()/1e4))}),1==u&&(E.WordConfig.showWord(60127),o.EventManager.instance.dispatch(L.CommonEvent.Event_Buy_Suc))}else if(t==l.ProtoConfig.c_req_advertisement_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_advertisement_info,i);O.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_req_skill){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_skill,i);Ue.SkillModel.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_req_realm_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_realm_info,i);ye.JingJieModel.proto2JingJieList(Se)}else if(t==l.ProtoConfig.c_req_get_vip_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_get_vip_info,i);c.Logger.log("c_req_get_vip_info=====",Se),Ge.default.proto2ModelList(Se.getVipInfoList())}else if(t==l.ProtoConfig.c_req_task){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_task,i);Ke.TaskModel.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_all_task_info)Ke.TaskModel.proto2_c_all_task_info(i);else if(t==l.ProtoConfig.c_update_task_info)Ke.TaskModel.proto2_c_update_task_info(i);else if(t==l.ProtoConfig.c_task_reward)Ke.TaskModel.proto2_c_task_reward(i);else if(t==l.ProtoConfig.c_req_make_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_make_info,i);ke.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_req_bags_add_num){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_bags_add_num,i);xe.default.addBagTimes=Se.getAddNum();var jt=g.BagConfig.getConfigById(xe.default.addBagTimes);xe.default.instance.bagAMount=jt.bag,xe.default.instance.bagRemainingnumber=xe.default.instance.bagAMount-xe.default.instance.getBagHadItemNum(),o.EventManager.instance.dispatch(v.EVENT_NAME.BAG_ADD_AMOUNT)}else if(t==l.ProtoConfig.c_off_line_reward_info){var Dt=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_off_line_reward_info,i),Ft=xe.default.instance;Ft.last_off_line_time=Dt.getLastOffLineTime();for(var Ht=Dt.getOffLineReward(),Ut=Ht.getOffLineNeedListList(),Wt=Ht.getOffLineRewardListList(),qt=0;qt<Ut.length;qt++)Ut[qt].getK()==v.GameConst.RES_TYPE.YUAN_BAO&&(Ft.off_line_need_gold=Ut[qt].getV());for(qt=0;qt<Wt.length;qt++)Wt[qt].getK()==v.GameConst.RES_TYPE.EXP?Ft.off_line_exp=Wt[qt].getV():Wt[qt].getK()==v.GameConst.RES_TYPE.CREAM?Ft.off_line_cream=Wt[qt].getV():Wt[qt].getK()==v.GameConst.RES_TYPE.COIN&&(Ft.off_line_coin=Wt[qt].getV())}else if(t==l.ProtoConfig.c_req_first_rechard_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_first_rechard_info,i);xe.default.instance.has_reward=Se.getHasReward(),1==xe.default.instance.has_reward&&rt.default.sdkCustomAction(3,1),c.Logger.log("c_req_first_rechard_info",Se),o.EventManager.instance.dispatch(L.CommonEvent.Event_has_reward)}else if(t==l.ProtoConfig.c_get_item_tip){c.Logger.log("c_get_item_tip====",i);Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_item_tip,i);c.Logger.log("c_get_item_tip====",Se);var zt=Se.getType();for(wt=Se.getReslistList(),qt=0;qt<wt.length;qt++){var Jt=wt[qt].getK(),Yt=wt[qt].getV();Jt==v.GameConst.RES_TYPE.COIN?ft.UIHelper.showTip(E.WordConfig.getWord(60276)+Yt):Jt==v.GameConst.RES_TYPE.CREAM?ft.UIHelper.showTip(E.WordConfig.getWord(60277)+Yt):Jt==v.GameConst.RES_TYPE.YUAN_BAO?ft.UIHelper.showTip(E.WordConfig.getWord(60278)+Yt):Jt==v.GameConst.RES_TYPE.EXP?ft.UIHelper.showTip(E.WordConfig.getWord(60279)+Yt):Jt==v.GameConst.RES_TYPE.power?ft.UIHelper.showTip(E.WordConfig.getWord(60280)+Yt):Jt==v.GameConst.RES_TYPE.LeiTaiCoin?ft.UIHelper.showTip(E.WordConfig.getWord(60281)+Yt):Jt==v.GameConst.RES_TYPE.TIGUANSCORE?ft.UIHelper.showTip(E.WordConfig.getWord(60282)+Yt):Jt==v.GameConst.RES_TYPE.mineSafeTime?ft.UIHelper.showTip(E.WordConfig.getWord(60283)+n.default.fomatTimeBySecond(Yt)):Jt==v.GameConst.RES_TYPE.Guild_GX?ft.UIHelper.showTip(E.WordConfig.getWord(61347)+"X"+Yt):Jt==v.GameConst.RES_TYPE.Guild_guildExploits&&ft.UIHelper.showTip(E.WordConfig.getWord(61348)+"X"+Yt)}var Zt=Se.getItemlistList();for(qt=0;qt<Zt.length;qt++){var Kt=Zt[qt].getItemkind(),Xt=Zt[qt].getItemtype(),Qt=Zt[qt].getItemcnt(),$t=Zt[qt].getQuality();if(Kt==v.GameConst.ITEM_KIND.ITEM||Kt==v.GameConst.ITEM_KIND.BaGua){var ei=y.ITemsConfig.getITemsConfigById(Xt);ft.UIHelper.showTip(ei.name+"X"+Qt,1,p.ColorConfig.getQualityColor(ei.quality))}else if(Kt==v.GameConst.ITEM_KIND.EQUIP){var ti=C.EquipConfig.getEquipConfigById(Xt);ft.UIHelper.showTip(ti.name+"X"+Qt,1,p.ColorConfig.getQualityColor($t))}}}else if(t==l.ProtoConfig.c_charge_suc){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_charge_suc,i);this.onChargeSuc(Se)}else if(t==l.ProtoConfig.c_seq_charge_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_charge_info,i);Qe.TopUpModel.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_kick){a.default.getInstance().isKick=!0;Gt=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_kick,i)).getCode();c.Logger.log("\u8e22\u73a9\u5bb6\u4e0b\u7ebf",Gt),T.default.instance.showServerFail(Gt)}else if(t==l.ProtoConfig.c_seq_act_info)Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_act_info,i);else if(t==l.ProtoConfig.c_seq_fangbuy_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_fangbuy_info,i);c.Logger.log("c_seq_fangbuy_info====",Se),se.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_seq_fangbuy){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_fangbuy,i);c.Logger.log("c_seq_fangbuy====",Se);var ii=Se.getProductid(),ni=Se.getProdrepo();se.default.updateNum(ii,ni),lt.default.stStatistics(at.StatisticsType.afEvent,"act_buy_shop_"+ii),lt.default.stStatistics(at.StatisticsType.firebaseEvent,"act_buy_shop_"+ii)}else if(t==l.ProtoConfig.c_seq_limitshop){ii=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_limitshop,i)).getProductid(),ni=Se.getProdrepo();ht.default.updateNum(ii,ni)}else if(t==l.ProtoConfig.c_seq_limitshopbuy_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_limitshopbuy_info,i);ht.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_seq_rune_gift)ht.default.proto2Model(i);else if(t==l.ProtoConfig.c_seq_compensate_info){var oi=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_compensate_info,i)).getCompResourceListList(),ai=[];E.WordConfig.getWord(60149);for(qt=0;qt<oi.length;qt++){var si=oi[qt].getActivitytype();ai.push(si)}var ri=ai.filter(function(e,t,i){return i.indexOf(e)===t}),ci=[];for(qt=0;qt<ri.length;qt++)for(var li=0;li<oi.length;li++){zt=oi[li].getResourcetype(),ni=oi[li].getResourcenum();var di=[];if((si=oi[li].getActivitytype())==ri[qt]){var fi={type:zt,num:ni};di.push(fi);var gi={activeType:ri[qt],itemlist:di};ci.push(gi)}}ci.length>0&&f.default.instance.createView(P.default.gameView.ComoensationView,null,ci)}else if(t==l.ProtoConfig.c_seq_all_skill_sin){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_all_skill_sin,i);c.Logger.log("c_seq_all_skill_sin====\u6280\u80fd\u76ae\u80a4===",Se),He.default.proto2BossModelList(Se,xe.default.instance)}else if(t==l.ProtoConfig.c_seq_swap_skill_sin){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_swap_skill_sin,i);var hi=He.SkinModel.proto2ModelList(Se);He.default.refreshModelById(hi.id,hi,xe.default.instance)}else if(t==l.ProtoConfig.c_refresh_monster)R.default.instance.onServerRefresh(i);else if(t==l.ProtoConfig.c_seq_shenbing){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_shenbing,i);c.Logger.log("c_seq_shenbing====",Se),je.ShenBinModel.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_seq_shenbing_skill){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_shenbing_skill,i);De.default.proto2ModelList(Se,xe.default.instance)}else if(t==l.ProtoConfig.c_seq_spirits){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_spirits,i);ze.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_seq_spirits);else if(t==l.ProtoConfig.c_seckill_monster)Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seckill_monster,i);else if(t==l.ProtoConfig.c_recycle_options)Oe.SettingModel.onSeverRefresh(i);else if(t==l.ProtoConfig.c_seq_get_mail){c.Logger.log("c_seq_get_mail====",i);Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_get_mail,i);Ae.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_seq_read_mail){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_read_mail,i);Ae.default.onReFreshContent(Se)}else if(t==l.ProtoConfig.c_seq_delete_mail)Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_delete_mail,i);else if(t==l.ProtoConfig.c_seq_get_all_content)Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_get_all_content,i);else if(t==l.ProtoConfig.c_seq_appstore_reward){1==(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_appstore_reward,i)).getStatus()&&(rt.default.isGetAppstore_reward=!0)}else if(t==l.ProtoConfig.c_equip_rank){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_equip_rank,i);ut.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_fight_rank){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_fight_rank,i);pt.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_seq_auto_medicine){var ui=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_seq_auto_medicine,i)).getId();for(di=Se.getAutoMedicineSettingList(),qt=0;qt<di.length;qt++)1==di[qt].getMedicineIndex()?(Oe.SettingModel.hpSet=1==di[qt].getIfselect(),di[qt].getLauchrate()>1e3?Oe.SettingModel.hpSetPt=0:Oe.SettingModel.hpSetPt=Number((di[qt].getLauchrate()/1e3).toFixed(2)),Oe.SettingModel.drugHp=di[qt].getMedtype()):2==di[qt].getMedicineIndex()?(Oe.SettingModel.mpSet=1==di[qt].getIfselect(),di[qt].getLauchrate()>1e3?Oe.SettingModel.mpSetPt=0:Oe.SettingModel.mpSetPt=Number((di[qt].getLauchrate()/1e3).toFixed(2)),Oe.SettingModel.drugMp=di[qt].getMedtype()):3==di[qt].getMedicineIndex()?(Oe.SettingModel.highHpSet=1==di[qt].getIfselect(),di[qt].getLauchrate()>1e3?Oe.SettingModel.highHpSetPt=0:Oe.SettingModel.highHpSetPt=Number((di[qt].getLauchrate()/1e3).toFixed(2)),Oe.SettingModel.drugHighHp=di[qt].getMedtype()):4==di[qt].getMedicineIndex()&&(Oe.SettingModel.highMpSet=1==di[qt].getIfselect(),di[qt].getLauchrate()>1e3?Oe.SettingModel.highMpSetPt=0:Oe.SettingModel.highMpSetPt=Number((di[qt].getLauchrate()/1e3).toFixed(2)),Oe.SettingModel.drugHighMp=di[qt].getMedtype());o.EventManager.instance.dispatch(L.CommonEvent.Event_Auto_Medicine)}else if(t==l.ProtoConfig.c_robot_fight)H.AutoRobotChatModel.getModelMethod().proto2Data(i);else if(t==l.ProtoConfig.c_robot_swith){1==(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_robot_swith,i)).getStatus()?(H.AutoRobotChatModel.getModelMethod().reInit(),nt.default.instance.isGuaJi=!0,f.default.instance.createView(P.default.gameView.autoShow)):(nt.default.instance.isGuaJi=!1,f.default.instance.closeView(P.default.gameView.autoShow),e.s_req_get_role_hp()),e.s_robot_record_get()}else if(t==l.ProtoConfig.c_robot_record_get)H.AutoRobotChatModel.getModelMethod().proto2RobotRecord(i);else if(t==l.ProtoConfig.c_mine_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_mine_info,i);c.Logger.log("c_mine_info==\u77ff\u5751\u4fe1\u606f\u8fd4\u56de====",Se),Ee.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_mine_update){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_mine_update,i);Ee.default.proto2Model(Se)}else if(t==l.ProtoConfig.c_mine_report_state){It=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_mine_report_state,i)).getData();var pi=new Ee.MineReportData;pi.reportId=It.getReportId(),pi.mineId=It.getMineId(),pi.type=It.getType(),pi.roleId=It.getId(),pi.name=It.getName(),pi.prof=It.getProf(),pi.level=It.getLevel(),pi.fight=It.getFight(),pi.state=It.getState(),pi.time=It.getTime(),pi.skin=ie.CostumeModel.proto2Personalize(It.getSkin()),o.EventManager.instance.dispatch("mine_"+pi.reportId,pi)}else if(t==l.ProtoConfig.c_challenge_start){var mi=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_challenge_start,i)).getRes();Se.getEndTime();Be.PkModel.myRole=Se.getOwnInfo(),Be.PkModel.pkRole=Se.getEnemyInfo(),1==mi||f.default.instance.closeView(P.default.gameView.pkFightView)}else if(t==l.ProtoConfig.c_do_minning){(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_do_minning,i)).getReq();var Ci=Se.getMineid(),_i=Se.getCurrpower(),vi=(Ci+"").charAt(0),yi=M.MineConfig.getConfigById(Number(vi)),bi=(Ci+"").substr(1),Ii="",Mi=w.MineInfoConfig.getConfigById(1);Number(vi)<=2?Ii+=cc.js.formatStr(E.WordConfig.getWord(60607),p.ColorConfig.ShenGreenColor,xe.default.instance.roleName,p.ColorConfig.getQualityHexColor(Number(vi)-1),yi.name,bi,yi.exploit_power,_i,Mi.max_power):Ii+=cc.js.formatStr(E.WordConfig.getWord(60608),p.ColorConfig.ShenGreenColor,xe.default.instance.roleName,p.ColorConfig.getQualityHexColor(Number(vi)-1),yi.name,bi,yi.exploit_power,_i,Mi.max_power,n.default.formatLeftTime2(1e3*Mi.protect_time)),Z.ChatModel.addChatStr(Z.ChatType.mine,Ii),e.s_mine_personal_info(),Ee.default.getMineInfoFromServer()}else if(t==l.ProtoConfig.c_do_leaving){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_do_leaving,i);e.s_mine_personal_info(),Ee.default.getMineInfoFromServer()}else if(t==l.ProtoConfig.c_mine_personal_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_mine_personal_info,i);c.Logger.log("c_mine_personal_info==\u8bf7\u6c42\u6316\u77ff\u4e2a\u4eba\u4fe1\u606f\u8fd4\u56de===",Se),Ee.MinePersonaInfoModel.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_pvp_result){u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_pvp_result,i)).getRet();switch(zt=Se.getType()){case Ee.MineType.Plunder:0==u&&(Ee.default.plunder=Ee.default.plunder-1>=0?Ee.default.plunder-1:0)}}else if(t==l.ProtoConfig.c_mine_list)Ee.default.proto2PlunderModelList(i);else if(t==l.ProtoConfig.c_mine_battle_report)Ee.default.proto2Report(i);else if(t==l.ProtoConfig.c_mine_buy_energy){if(0==(u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_mine_buy_energy,i)).getRet())){var wi=Se.getEnergy();Ee.MinePersonaInfoModel.currPower+=wi,o.EventManager.instance.dispatch(L.CommonEvent.Event_Refresh_PersonalMine)}}else if(t==l.ProtoConfig.c_mine_retake)Ee.default.proto2Retake(i);else if(t==l.ProtoConfig.c_mine_assist);else if(t==l.ProtoConfig.c_mine_plunder);else if(t==l.ProtoConfig.c_req_if_kill_boss)W.BossKillModel.proto2ModelList(i);else if(t==l.ProtoConfig.c_add_safeTime){1==(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_add_safeTime,i)).getReq()&&Ee.default.getMineInfoFromServer()}else if(t==l.ProtoConfig.c_get_mine_allow){1==(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_mine_allow,i)).getReq()&&(xe.default.instance.mineAllow=!0,void 0==r.default.getItem("mineAllow")&&(r.default.setItem("mineAllow","1"),lt.default.stStatistics(at.StatisticsType.afEvent,"act_blackmine_unlock"),lt.default.stStatistics(at.StatisticsType.firebaseEvent,"act_blackmine_unlock")))}else if(t==l.ProtoConfig.c_req_get_role_hp){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_get_role_hp,i);xe.default.instance.setHp(Se.getHp()),xe.default.instance.setMp(Se.getMp()),o.EventManager.instance.dispatch(L.CommonEvent.Event_UserInfoRefresh)}else if(t==l.ProtoConfig.c_intensify_refine){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_intensify_refine,i);c.Logger.log("======\u5f3a\u5316\u7cbe\u70bc\u8fd4\u56de======",Se),e.req_role_info(xe.default.instance.roleId)}else if(t==l.ProtoConfig.c_req_get_refeshLibao){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_get_refeshLibao,i);xe.default.instance.has_daliyReward=Se.getHasReward(),xe.default.instance.has_status=Se.getHasStatus(),c.Logger.log("c_req_get_refeshLibao",Se),o.EventManager.instance.dispatch(L.CommonEvent.Event_Refresh_DaliyReward)}else if(t==l.ProtoConfig.c_doubleegg_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_doubleegg_info,i);ue.default.onReFreshContent(i)}else if(t==l.ProtoConfig.c_get_legendtask_info)be.LegendTaskModel.proto2ModelList(i);else if(t==l.ProtoConfig.c_buy_legendtask_level)be.LegendTaskModel.proto2Buy(i);else if(t==l.ProtoConfig.c_get_holidayMonster_info)pe.HolidayMonsterModel.proto2ModelList(i);else if(t==l.ProtoConfig.c_get_legendtask_exp){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_legendtask_exp,i);if(c.Logger.log("c_get_legendtask_exp",Se.getRec()),1==Se.getRec()){e.s_get_legendtask_info(Se.getActivityId());var ki=E.WordConfig.getWord(60683)+Se.getScore();ft.UIHelper.showTip(ki)}}else if(t==l.ProtoConfig.c_christmas_discount_info)ne.DisCountPrefabModel.proto2ModelList(i);else if(t==l.ProtoConfig.c_track_tree_sign)me.HolidayRunGameModel.on_c_track_sign(i);else if(t==l.ProtoConfig.c_get_holidaytree_info)me.HolidayRunGameModel.proto2Model(i);else if(t==l.ProtoConfig.c_get_treeShopInfo)x.ActivityShopModel.proto2ModelList(i);else if(t==l.ProtoConfig.c_use_treeOrtrap)me.HolidayRunGameModel.on_c_use_ringOrtrap(i);else if(t==l.ProtoConfig.c_get_activity_info)G.default.proto2ModelList(i);else if(t==l.ProtoConfig.c_newYear_discount_info)ne.DisCountPrefabModel.protoModelList(i);else if(t==l.ProtoConfig.c_get_carnival_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_carnival_info,i);c.Logger.log("c_get_carnival_info===\u5956\u6c60\u8fd4\u56de===",Se),J.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_get_carnivalGift){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_carnivalGift,i);c.Logger.log("c_get_carnivalGift===\u7ffb\u724c\u8fd4\u56de===",Se)}else if(t==l.ProtoConfig.c_get_ultimate_gift_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_ultimate_gift_info,i);c.Logger.log("c_get_ultimate_gift_info===\u5927\u5956\u5217\u8868\u8fd4\u56de===",Se),et.default.proto2ModelList(Se)}else if(t==l.ProtoConfig.c_selet_ultimateGift){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_selet_ultimateGift,i);c.Logger.log("c_selet_ultimateGift===\u9009\u62e9\u5927\u5956\u8fd4\u56de===",Se)}else if(t==l.ProtoConfig.c_get_roast_pig_info)le.FuGuiGameModel.proto2FuGui(i);else if(t==l.ProtoConfig.c_carnival_target_info)Te.NewYearTargetModel.proto2Model(i);else if(t==l.ProtoConfig.c_get_ultimateGift)J.default.canNext=!0,J.default.canNext&&f.default.instance.createView(P.default.gameView.NextUltimateGiftWindow);else if(t==l.ProtoConfig.c_fresh_carnival){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_fresh_carnival,i);J.default.canNext=!1,o.EventManager.instance.dispatch(L.CommonEvent.Event_NextRound)}else if(t==l.ProtoConfig.c_req_buy_boss_rebtime){var Si=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_buy_boss_rebtime,i)).getLesstime();c.Logger.log("Boss\u5237\u65b0\u65f6\u95f4\u51cf\u5c11==",Se);Ii=cc.js.formatStr(E.WordConfig.getWord(60284),Si/60);ft.UIHelper.showTip(Ii)}else if(t==l.ProtoConfig.c_arena_info)Be.PkModel.proto2Model(i);else if(t==l.ProtoConfig.c_req_get_title)Xe.TitleModel.proto2Model(i);else if(t==l.ProtoConfig.c_star_info)Je.default.proto2Model(i);else if(t==l.ProtoConfig.c_star_up_level)Je.default.proto2Level(i);else if(t==l.ProtoConfig.c_star_exchange){Je.default.proto2Exchange(i);var Pi=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_star_exchange,i)).getExchangeExp();ft.UIHelper.showTip(E.WordConfig.getWord(60285)+Pi)}else if(t==l.ProtoConfig.c_star_sign_info)Ye.default.proto2Model(i,l.ProtoConfig.c_star_sign_info);else if(t==l.ProtoConfig.c_star_sign_rand)Ye.default.proto2SignRand(i);else if(t==l.ProtoConfig.c_pick_star_sign)Ye.default.proto2Model(i,l.ProtoConfig.c_pick_star_sign);else if(t==l.ProtoConfig.c_less_star_sign)Ye.default.proto2Model(i,l.ProtoConfig.c_less_star_sign);else if(t==l.ProtoConfig.c_active_astralobe)Ye.default.proto2StarSign(i,l.ProtoConfig.c_active_astralobe);else if(t==l.ProtoConfig.c_equip_star_sign)Ye.default.proto2StarSign(i,l.ProtoConfig.c_equip_star_sign);else if(t==l.ProtoConfig.c_star_sign_page)Ye.default.proto2StarSignPage(i,l.ProtoConfig.c_star_sign_page);else if(t==l.ProtoConfig.c_star_sign_switch)Ye.default.proto2StarSignSwitch(i,l.ProtoConfig.c_star_sign_switch);else if(t==l.ProtoConfig.c_star_sign_unlock)Ye.default.proto2StarSignUnlock(i,l.ProtoConfig.c_star_sign_unlock);else if(t==l.ProtoConfig.c_arena_log)Be.PkLog.proto2Model(i);else if(t==l.ProtoConfig.c_challenge_result)Be.PkModel.proto2PkResult(i);else if(t==l.ProtoConfig.c_arena_week_reward)e.s_arena_info();else if(t==l.ProtoConfig.c_req_baghouse_list)Ce.HouseModel.proto2HouseList(i);else if(t==l.ProtoConfig.c_update_baghouse_item)Ce.HouseModel.proto2_update_baghouse_item(i);else if(t==l.ProtoConfig.c_req_bug_warehouse)Ce.HouseModel.proto2_bug_warehouse(i);else if(t==l.ProtoConfig.c_get_activity_login_info)Re.NewYearGiftModel.proto2Model(i);else if(t==l.ProtoConfig.c_get_marfaking_info)X.default.proto2Model(i);else if(t==l.ProtoConfig.c_get_marfaking_reward)X.default.proto2TaskAward(i);else if(t==l.ProtoConfig.c_get_marfaking_acc_reward)X.default.proto2AccTaskAward(i);else if(t==l.ProtoConfig.c_guide_info)fe.GuideModel.proto2GuideInfo(i);else if(t==l.ProtoConfig.c_guide_trigger)fe.GuideModel.proto2GuideTrigger(i);else if(t==l.ProtoConfig.c_function_open)Le.NewFeaturesModel.proto2NewFeaturesFuntion(i);else if(t==l.ProtoConfig.c_function_open_info)Le.NewFeaturesModel.proto2NewFeaturesInfoFuntion(i);else if(t==l.ProtoConfig.c_send_world)K.ChatRoomModel.proto2_c_send_world(i);else if(t==l.ProtoConfig.c_send_world_list)K.ChatRoomModel.proto2_c_send_world_list(i);else if(t==l.ProtoConfig.c_get_iteminfo)K.ChatRoomModel.proto2_c_get_iteminfo(i);else if(t==l.ProtoConfig.c_activity_login_receive){var Ei=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_activity_login_receive,i)).getActivityId();e.s_get_activity_login_info(Ei),c.Logger.log("c_activity_login_receive")}else if(t==l.ProtoConfig.c_marfa_info)Me.default.proto2Model(i);else if(t==l.ProtoConfig.c_marfa_cumulative_task)Me.default.proto2TaskAward(i);else if(t==l.ProtoConfig.c_marfa_stalibge_reward)Me.default.proto2Award(i);else if(t==l.ProtoConfig.c_cancle_delete)o.EventManager.instance.dispatch(L.CommonEvent.Event_delect_time,2);else if(t==l.ProtoConfig.c_change_name){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_change_name,i);c.Logger.log("c_change_name")}else if(t==l.ProtoConfig.c_recharge_gift_info)Y.default.proto2Model(i);else if(t==l.ProtoConfig.c_recharge_gift_reward)c.Logger.log("s_recharge_gift_info===="),e.s_recharge_gift_info();else if(t==l.ProtoConfig.c_growup_info)de.default.proto2Model(i);else if(t==l.ProtoConfig.c_growup_get)de.default.proto2Award(i);else if(t==l.ProtoConfig.c_activity_redenvelope_receive)Ct.default.proto2ModelList(i);else if(t==l.ProtoConfig.c_activity_redenvelope_record)vt.default.proto2ModelList(i);else if(t==l.ProtoConfig.c_activity_redenvelope_state)_t.PacketModel.proto2ModelList(i);else if(t==l.ProtoConfig.c_enter_skytower)A.TianGuanManager.instance.startFightClient(i);else if(t==l.ProtoConfig.c_req_skytower_info)We.default.proto2Model(i);else if(t==l.ProtoConfig.c_challenge_skytower_result)A.TianGuanManager.instance.endFightByServer(i);else if(t==l.ProtoConfig.c_req_skytower_record)We.default.proto2SkyPassInfo(i);else if(t==l.ProtoConfig.c_req_skytower_rank)We.default.proto2RankModel(i);else if(t==l.ProtoConfig.c_req_normal_monster_rank)mt.default.proto2Model(i,t);else if(t==l.ProtoConfig.c_req_rem_monster_rank)mt.default.proto2Model(i,t);else if(t==l.ProtoConfig.c_superweapon_stone_info)yt.BaoshiInfoModel.proto2Model(i,t);else if(t==l.ProtoConfig.c_superweapon_stone_strengthen)yt.BaoshiInfoModel.protoModel(i,t);else if(t==l.ProtoConfig.c_req_sweeep_skytower)We.default.proto2SweeepResult(i);else if(t==l.ProtoConfig.c_req_dungeon_shop)We.default.proto2Shop(i);else if(t==l.ProtoConfig.c_collect_shop_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_collect_shop_info,i);Q.default.proto2Shop(Se)}else if(t==l.ProtoConfig.c_collect_shop_change){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_collect_shop_change,i);Q.default.proto2ShopItem(Se)}else if(t==l.ProtoConfig.c_activity_seven_login_info)Ve.default.proto2Model(i);else if(t==l.ProtoConfig.c_activity_seven_login_reward)Ve.default.proto2Award(i);else if(t==l.ProtoConfig.c_get_topspeed_kill_info)re.default.proto2Model(i),o.EventManager.instance.dispatch(L.CommonEvent.Event_FastKill_Refresh);else if(t==l.ProtoConfig.c_get_topspeed_kill_reward){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_topspeed_kill_reward,i);c.Logger.log("c_get_topspeed_kill_reward===jj",Se),0==Se.getRet()&&e.s_get_topspeed_kill_info()}else if(t==l.ProtoConfig.c_get_skin_tip){var Li=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_skin_tip,i)).getSkinid(),Ti=S.default.getConfigById(Li),Ri=Ti.type_value;ft.UIHelper.showTip(Ti.name+"X1",1,p.ColorConfig.getQualityColor(Ti.quality)),setTimeout(function(){var t=He.default.getIsEquipedModelBySkillId(Ri,xe.default.instance),i=He.default.getSkillEffectModelBySkillidAndSkinId(Ri,Li,xe.default.instance);c.Logger.log("currSkinEffectModel===",t,i),i&&1==i.isBought&&t&&e.s_seq_swap_skill_sin(Ri,t.id,Li)},500)}else if(t==l.ProtoConfig.c_req_change_scene){var Ni=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_change_scene,i)).getSceneId();xe.default.instance.switchMap(!1,Ni);var Bi=I.MapConfig.getMapConfigByMapId(Ni);Bi&&1==Bi.fight_type?o.EventManager.instance.dispatch(L.CommonEvent.Event_SERVER_FIGHT):o.EventManager.instance.dispatch(L.CommonEvent.Event_CLIENT_FIGHT),c.Logger.log("\u670d\u52a1\u7aef\u6218\u6597=====c_req_change_scene===",Se)}else if(t==l.ProtoConfig.c_activity_everyday_login_info)oe.default.proto2Model(i);else if(t==l.ProtoConfig.c_activity_everyday_reward)oe.default.proto2Award(i);else if(t==l.ProtoConfig.c_loongcheer_recharge){u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_loongcheer_recharge,i)).getRet();var Ai=Se.getToken();c.Logger.log("c_loongcheer_recharge===",Ai),at.LoongCheerManager.loongCheerPay(at.PayType.consumption,void 0,"",Ai,"")}else if(t==l.ProtoConfig.c_req_up_realm){ui=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_up_realm,i)).getId();var Gi=Se.getLevel();c.Logger.log("c_req_up_realm===",Se),lt.default.stJinjie(at.StatisticsType.afEvent,ui,Gi-1),lt.default.stJinjie(at.StatisticsType.firebaseEvent,ui,Gi-1)}else if(t==l.ProtoConfig.c_req_lev_up){if(1==(u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_lev_up,i)).getRet())){var xi=xe.default.instance.level;if(xi==m.DefaultConfig.getConfigById(50).value&&(lt.default.stStatistics(at.StatisticsType.afEvent,"act_starvein_unlcok"),lt.default.stStatistics(at.StatisticsType.firebaseEvent,"act_starvein_unlcok")),xi==m.DefaultConfig.getConfigById(58).value&&(lt.default.stStatistics(at.StatisticsType.afEvent,"act_skyrim_unlock"),lt.default.stStatistics(at.StatisticsType.firebaseEvent,"act_skyrim_unlock")),50==xi&&(lt.default.stStatistics(at.StatisticsType.afEvent,"act_arena_unlock"),lt.default.stStatistics(at.StatisticsType.firebaseEvent,"act_arena_unlock")),ct.default.sdkAuth(st.AuthType.onUpdateRoleInfo),_.GameConfig.sdkType==_.SdkType.FengYue){bt={server_id:it.ZoneModel.nowZoneInfoModel.server_id,server_name:it.ZoneModel.nowZoneInfoModel.server_name,role_id:xe.default.instance.roleId,role_name:xe.default.instance.roleName,role_level:xe.default.instance.level,balance:xe.default.instance.getGold()},It={eventName:st.AuthType.upgradeRole,param:bt};ct.default.sdkAuth(st.AuthType.onCustomEvent,JSON.stringify(It))}else if(_.GameConfig.sdkType==_.SdkType.Xiaotun){It={eventName:st.AuthType.upgradeRole};ct.default.sdkAuth(st.AuthType.onCustomEvent,JSON.stringify(It))}o.EventManager.instance.dispatch(L.CommonEvent.Event_RoleLevelUp,xi)}}else if(t==l.ProtoConfig.c_get_book_info)$e.default.proto2BookInfo(i);else if(t==l.ProtoConfig.c_get_book_equip)$e.default.proto2GetBookEquip(i);else if(t==l.ProtoConfig.c_add_book_equip)$e.default.proto2AddBookEquip(i);else if(t==l.ProtoConfig.c_strengthen_book)$e.default.proto2StrengthenEquip(i);else if(t==l.ProtoConfig.c_degree_elevation)$e.default.proto2DegreeElevation(i);else if(t==l.ProtoConfig.c_activity_strategy_info)Ze.default.proto2Info(i);else if(t==l.ProtoConfig.c_activity_strategy_reward)Ze.default.proto2Reward(i);else if(t==l.ProtoConfig.c_world_boss_res){var Oi=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_world_boss_res,i)).getHarm();c.Logger.log("c_world_boss_res===",Oi),f.default.instance.createView(P.default.gameView.BigBossEndView,null,Oi),e.s_req_world_boss_info(),e.s_req_world_boss_rank()}else if(t==l.ProtoConfig.c_req_world_boss_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_world_boss_info,i);gt.default.proto2Model(Se)}else if(t==l.ProtoConfig.c_req_optional_info)Ne.OptionalGiftBagModel.proto2_c_req_optional_info(i);else if(t==l.ProtoConfig.c_get_puzzle_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_puzzle_info,i);Ie.LuckyPuzzleModel.proto2Model(Se),c.Logger.log("c_get_puzzle_info===",Se)}else if(t==l.ProtoConfig.c_get_reward){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_get_reward,i);Ie.LuckyPuzzleModel.proto2Reward(Se),c.Logger.log("c_get_reward===",Se)}else if(t==l.ProtoConfig.c_send_puzzle){var Vi=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_send_puzzle,i)).getPuzzleListList();for(qt=0;qt<Vi.length;qt++){var ji=Vi[qt].getId();Ii=cc.js.formatStr(E.WordConfig.getWord(61393),ji);ft.UIHelper.showTip(Ii)}c.Logger.log("c_send_puzzle===",Se)}else if(t==l.ProtoConfig.c_req_consumer_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_consumer_info,i);ee.default.proto2Model(Se),c.Logger.log("c_req_consumer_info===",Se)}else if(t==l.ProtoConfig.c_req_consumer_reward){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_req_consumer_reward,i);ee.default.proto2Reward(Se)}else if(t==l.ProtoConfig.c_merge_consumer_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_merge_consumer_info,i);$.default.proto2Model(Se),c.Logger.log("c_merge_consumer_info===",Se)}else if(t==l.ProtoConfig.c_merge_consumer_reward){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_merge_consumer_reward,i);$.default.proto2Reward(Se),c.Logger.log("c_merge_consumer_reward===",Se)}else if(t==l.ProtoConfig.c_optional_gift){u=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_optional_gift,i)).getRet();c.Logger.log("c_optional_gift===",u)}else if(t==l.ProtoConfig.c_auction_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_auction_info,i);D.default.proto2Model(Se),c.Logger.log("c_auction_info===",Se)}else if(t==l.ProtoConfig.c_auction_log){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_auction_log,i);D.default.proto2LogModel(Se),c.Logger.log("c_auction_log===",Se)}else if(t==l.ProtoConfig.c_auction_item_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_auction_item_info,i);D.default.proto2ItemInfo(Se),c.Logger.log("c_auction_item_info===",Se)}else if(t==l.ProtoConfig.c_auction_bid){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_auction_bid,i);D.default.proto2AutionBid(Se),c.Logger.log("c_auction_bid===",Se)}else if(t==l.ProtoConfig.c_auction_buy){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_auction_buy,i);D.default.proto2AutionBuy(Se),c.Logger.log("c_auction_buy===",Se)}else if(t==l.ProtoConfig.c_auction_single_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_auction_single_info,i);D.default.proto2AutionSingleGoods(Se),c.Logger.log("c_auction_single_info===",Se)}else if(t==l.ProtoConfig.c_auction_shelves){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_auction_shelves,i);D.default.proto2AutionShelves(Se),c.Logger.log("c_auction_shelves===",Se)}else if(t==l.ProtoConfig.c_task_liveness_info){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_task_liveness_info,i);Ke.TaskModel.proto2_c_task_liveness_info(Se),c.Logger.log("c_task_liveness_info===",Se)}else if(t==l.ProtoConfig.c_task_liveness_reward){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_task_liveness_reward,i);Ke.TaskModel.proto2_c_task_liveness_reward(Se),c.Logger.log("c_task_liveness_reward===",Se)}else if(t==l.ProtoConfig.c_req_recharge_info)te.ContinuousRechargeModel.proto_c_req_recharge_info(i);else if(t==l.ProtoConfig.c_req_recharge_reward)te.ContinuousRechargeModel.proto_c_req_recharge_reward(i);else if(t==l.ProtoConfig.c_guild_info)ge.GuildModel.proto_c_guild_info(i);else if(t==l.ProtoConfig.c_guild_create)ge.GuildModel.proto_c_guild_create(i);else if(t==l.ProtoConfig.c_guild_apply)ge.GuildModel.proto_c_guild_apply(i);else if(t==l.ProtoConfig.c_guild_onekey_apply)ge.GuildModel.proto_c_guild_onekey_apply(i);else if(t==l.ProtoConfig.c_guild_apply_list)ge.GuildModel.proto_c_guild_apply_list(i);else if(t==l.ProtoConfig.c_guild_leave)ge.GuildModel.proto_c_guild_leave(i);else if(t==l.ProtoConfig.c_guild_kick)ge.GuildModel.proto_c_guild_kick(i);else if(t==l.ProtoConfig.c_guild_dismiss)ge.GuildModel.proto_c_guild_dismiss(i);else if(t==l.ProtoConfig.c_guild_donate_info)ge.GuildModel.proto_c_guild_donate_info(i);else if(t==l.ProtoConfig.c_guild_donate)ge.GuildModel.proto_c_guild_donate(i);else if(t==l.ProtoConfig.c_guild_levelup)ge.GuildModel.proto_c_guild_levelup(i);else if(t==l.ProtoConfig.c_guild_list)ge.GuildModel.proto_c_guild_list(i);else if(t==l.ProtoConfig.c_guild_setting)ge.GuildModel.proto_c_guild_setting(i);else if(t==l.ProtoConfig.c_guild_member_change)ge.GuildModel.proto_c_guild_member_change(i);else if(t==l.ProtoConfig.c_guild_announcement)ge.GuildModel.proto_c_guild_announcement(i);else if(t==l.ProtoConfig.c_guild_modify_announcement)ge.GuildModel.proto_c_guild_modify_announcement(i);else if(t==l.ProtoConfig.c_guild_store_info)ge.GuildModel.proto_c_guild_store_info(i);else if(t==l.ProtoConfig.c_guild_store_buy)ge.GuildModel.proto_c_guild_store_buy(i);else if(t==l.ProtoConfig.c_guild_store_levelup)ge.GuildModel.proto_c_guild_store_levelup(i);else if(t==l.ProtoConfig.c_guild_apply_operation)ge.GuildModel.proto_c_guild_apply_operation(i);else if(t==l.ProtoConfig.c_guild_library_info)ge.GuildModel.proto_c_guild_library_info(i);else if(t==l.ProtoConfig.c_guild_library_levelup)ge.GuildModel.proto_c_guild_library_levelup(i);else if(t==l.ProtoConfig.c_guild_treasury_info)ge.GuildModel.proto_c_guild_treasury_info(i);else if(t==l.ProtoConfig.c_guild_treasury_deposit)ge.GuildModel.proto_c_guild_treasury_deposit(i);else if(t==l.ProtoConfig.c_guild_treasury_takeout)ge.GuildModel.proto_c_guild_treasury_takeout(i);else if(t==l.ProtoConfig.c_guild_treasury_log)ge.GuildModel.proto_c_guild_treasury_log(i);else if(t==l.ProtoConfig.c_guild_single_treasury_info)ge.GuildModel.proto_c_guild_single_treasury_info(i);else if(t==l.ProtoConfig.c_guild_single_treasury_log)ge.GuildModel.proto_c_guild_single_treasury_log(i);else if(t==l.ProtoConfig.c_guild_redenvelope_buy)ge.GuildModel.proto_c_guild_redenvelope_buy(i);else if(t==l.ProtoConfig.c_guild_redenvelope_single_info)ge.GuildModel.proto_c_guild_redenvelope_single_info(i);else if(t==l.ProtoConfig.c_guild_task_list)ge.GuildModel.proto_c_guild_task_list(i);else if(t==l.ProtoConfig.c_guild_task_refresh)ge.GuildModel.proto_c_guild_task_refresh(i);else if(t==l.ProtoConfig.c_guild_task_operation)ge.GuildModel.proto_c_guild_task_operation(i);else if(t==l.ProtoConfig.c_guild_task_help)ge.GuildModel.proto_c_guild_task_help(i);else if(t==l.ProtoConfig.c_guild_task_help_info)ge.GuildModel.proto_c_guild_task_help_info(i);else if(t==l.ProtoConfig.c_guild_redenvelope_info)ge.GuildModel.proto_c_guild_redenvelope_info(i);else if(t==l.ProtoConfig.c_guild_redenvelope_details)ge.GuildModel.proto_c_guild_redenvelope_details(i);else if(t==l.ProtoConfig.c_guild_redenvelope_recv)ge.GuildModel.proto_c_guild_redenvelope_recv(i);else if(t==l.ProtoConfig.c_guild_redenvelope_rank)ge.GuildModel.proto_c_guild_redenvelope_rank(i);else if(t==l.ProtoConfig.c_guild_redenvelope_reward)ge.GuildModel.proto_c_guild_redenvelope_reward(i);else if(t==l.ProtoConfig.c_guild_skill_levelup)ge.GuildModel.proto_c_guild_skill_levelup(i);else if(t==l.ProtoConfig.c_lotterydraw_info)Pe.MergeLuckyDrawModel.proto_c_lotterydraw_info(i);else if(t==l.ProtoConfig.c_select_reward)Pe.MergeLuckyDrawModel.proto_c_select_reward(i);else if(t==l.ProtoConfig.c_lotterydraw_start)Pe.MergeLuckyDrawModel.proto_c_lotterydraw_start(i);else if(t==l.ProtoConfig.c_invitation_info)_e.InvitationModel.proto_c_invitation_info(i);else if(t==l.ProtoConfig.c_invitation_reward)_e.InvitationModel.proto_c_invitation_reward(i);else if(t==l.ProtoConfig.c_invitation_code)_e.InvitationModel.proto_c_invitation_code(i);else if(t==l.ProtoConfig.c_invitation_share)_e.InvitationModel.proto_c_invitation_share(i);else if(t==l.ProtoConfig.c_get_explore_info)ae.ExoticExplorationModel.proto_c_get_explore_info(i);else if(t==l.ProtoConfig.c_get_explore_item)ae.ExoticExplorationModel.proto_c_get_explore_item(i);else if(t==l.ProtoConfig.c_start_explore)ae.ExoticExplorationModel.proto_c_start_explore(i);else if(t==l.ProtoConfig.c_get_explore_accreward)ae.ExoticExplorationModel.proto_c_get_explore_accreward(i);else if(t==l.ProtoConfig.c_get_appellation_info)F.AutoAppellationModel.getModelMethod().proto_c_get_appellation_info(i);else if(t==l.ProtoConfig.c_appellation_up)F.AutoAppellationModel.getModelMethod().proto_c_appellation_up(i);else if(t==l.ProtoConfig.c_julin_up)F.AutoAppellationModel.getModelMethod().proto_c_julin_up(i);else if(t==l.ProtoConfig.c_scene_obj_leave){var Di=(Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_scene_obj_leave,i)).getSceneId();c.Logger.log("c_scene_obj_leave===",Di)}else if(t==l.ProtoConfig.c_scene_hero_die){Se=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_scene_hero_die,i);c.Logger.log("c_scene_hero_die===\u89d2\u8272\u6b7b\u4ea1"),dt.MusicHelper.roleDead(xe.default.instance.occupation),Z.ChatModel.addChat(Z.ChatType.roleDead,xe.default.instance.roleName),f.default.instance.createView(P.default.gameView.revive)}else t==l.ProtoConfig.c_baguatu_info?U.default.proto2Model(i):t==l.ProtoConfig.c_strengthen?U.default.protoStrengthen(i):t==l.ProtoConfig.c_refine?U.default.protoRefine(i):t==l.ProtoConfig.c_baguatu_skill_up?U.default.protoSkillUp(i):t==l.ProtoConfig.c_reback_item?U.default.protoReback(i):t==l.ProtoConfig.c_exchange_item?U.default.protoExchange(i):t==l.ProtoConfig.c_bagua_compose?U.default.protoCompose(i):t==l.ProtoConfig.c_personalize_info?ie.CostumeModel.c_personalize_info(i):t==l.ProtoConfig.c_personalize_setting?ie.CostumeModel.c_personalize_setting(i):t==l.ProtoConfig.c_req_pvp_skill?B.default.instance.protoPvp(i):t==l.ProtoConfig.c_req_pvp_skill_use?B.default.instance.protoPvpUse(i):t==l.ProtoConfig.c_appraisal_setting?j.AppraisalModel.proto_c_appraisal_setting(i):t==l.ProtoConfig.c_appraisal_start?j.AppraisalModel.proto_c_appraisal_start(i):t==l.ProtoConfig.c_get_superskill_info?Fe.ShenGongModel.getModelMethod().proto_c_get_superskill_info(i):t==l.ProtoConfig.c_superskill_up?Fe.ShenGongModel.getModelMethod().proto_c_superskill_up(i):t==l.ProtoConfig.c_guild_status?he.GuildPvPModel.getInstance().protos_c_guild_status(i):t==l.ProtoConfig.c_guild_apply_fight?he.GuildPvPModel.getInstance().protos_c_guild_apply_fight(i):t==l.ProtoConfig.c_guild_member_apply_fight?he.GuildPvPModel.getInstance().protos_c_guild_member_apply_fight(i):t==l.ProtoConfig.c_fight_group_info?he.GuildPvPModel.getInstance().protos_c_fight_group_info(i):t==l.ProtoConfig.c_fight_map_info?he.GuildPvPModel.getInstance().protos_c_fight_map_info(i):t==l.ProtoConfig.c_fight_map_node_info?he.GuildPvPModel.getInstance().protos_c_fight_map_node_info(i):t==l.ProtoConfig.c_attack_stronghold?he.GuildPvPModel.getInstance().protos_c_attack_stronghold(i):t==l.ProtoConfig.c_round_result?he.GuildPvPModel.getInstance().protos_c_round_result(i):t==l.ProtoConfig.c_guild_fight_open?he.GuildPvPModel.getInstance().protos_c_guild_fight_open(i):t==l.ProtoConfig.c_get_limit_gift_info?tt.default.proto2AllLibaoInfo(i):t==l.ProtoConfig.c_limit_gift_popup?tt.default.proto2AddLibaoInfo(i):t==l.ProtoConfig.c_get_wx_reward_info?V.AppDownloadModel.instance.proto2AppDownloadState(i):t==l.ProtoConfig.c_get_wx_reward&&V.AppDownloadModel.instance.proto2AppDownloadReward(i)}catch(e){c.Logger.error("\u53cd\u5e8f\u5217\u62a5\u9519",t,e)}N.default.getInstance().socketRespMsg(t)},e.s_feiyou_login=function(){var e=d.ProtoUtils.Create(l.ProtoConfig.s_feiyou_login);e.setUserId(ot.FeiYouSdkManager.user_id),e.setTime(ot.FeiYouSdkManager.timestamp),e.setCpSign(ot.FeiYouSdkManager.cp_sign),c.Logger.log("s_feiyou_login=============",ot.FeiYouSdkManager.user_id,ot.FeiYouSdkManager.timestamp,ot.FeiYouSdkManager.cp_sign),a.default.getInstance().sendToSocket(e)},e.onChargeSuc=function(e){var t=e.getId(),i=e.getDiamond();Qe.TopUpModel.setCharge(t),2!=t&&4!=t&&6!=t||rt.default.sdkCustomAction(1,1),3!=t&&5!=t&&6!=t||rt.default.sdkCustomAction(2,1),i>0&&rt.default.sdkCustomAction(4,i),t>=201&&t<=504?o.EventManager.instance.dispatch(L.CommonEvent.Event_ChargeActivityOk,t):f.default.instance.createView(P.default.gameView.ChargeSucView,null,t,i)},e.onKillMonsterSuc=function(t){var i=d.ProtoUtils.DeserializeBinary(l.ProtoConfig.c_kill_monster,t),n=i.getMonsterinfo(),a=n.getId(),s=n.getType();if(R.default.instance.onServerKillMonster(a),"0"!=s){var r=k.MonsterConfig.getMonsterConfigById(parseInt(s)),g=n.getQuality(),h=i.getReslistList();if(h&&h.length>0){g==v.GameConst.QUALITY.WHITE?Se.default.instance.killWhiteMonsterNum++:g==v.GameConst.QUALITY.GREEN?Se.default.instance.killGreenMonsteNum++:g==v.GameConst.QUALITY.BLUE?Se.default.instance.killBlueMonsterNum++:g==v.GameConst.QUALITY.PURPLE?Se.default.instance.killPurpleMonsterNum++:Se.default.instance.killBossMonsterNum++;for(var m=0,_=0,b=0,I=0;I<h.length;I++){var M=h[I].getK(),w=h[I].getV();M==v.GameConst.RES_TYPE.EXP?m+=w:M==v.GameConst.RES_TYPE.COIN?_+=w:M==v.GameConst.RES_TYPE.CREAM?b+=w:M==v.GameConst.RES_TYPE.YUAN_BAO&&w}var S="";if(2==r.m_type){var T=u.ChristmasterConfig.getConfigById(1);S=pe.HolidayMonsterModel.killTime<T.droptimes?cc.js.formatStr(E.WordConfig.getWord(60611),p.ColorConfig.ShenGreenColor,xe.default.instance.roleName,p.ColorConfig.getQualityHexColor(g),r.name,pe.HolidayMonsterModel.killTime,T.droptimes):cc.js.formatStr(E.WordConfig.getWord(60612),p.ColorConfig.ShenGreenColor,xe.default.instance.roleName,p.ColorConfig.getQualityHexColor(g),r.name,T.droptimes,T.droptimes)}else S=cc.js.formatStr(E.WordConfig.getWord(60613),p.ColorConfig.ShenGreenColor,xe.default.instance.roleName,p.ColorConfig.getQualityHexColor(g),r.name);var N=cc.js.formatStr(E.WordConfig.getWord(60614),p.ColorConfig.getQualityHexColor(g),r.name);m>0&&(Se.default.instance.exp+=m,S+=E.WordConfig.getWord(60615)+m,N+=E.WordConfig.getWord(60615)+m),_>0&&(S+=E.WordConfig.getWord(60616)+_,N+=E.WordConfig.getWord(60616)+_),b>0&&(S+=E.WordConfig.getWord(60617)+b,N+=E.WordConfig.getWord(60617)+b),rt.default.sdkCustomAction(14,_);var B=i.getItemlistList();B.sort(function(e,t){return e.getQuality()-t.getQuality()});var A=[],G=0,x=0;for(I=0;I<B.length;I++){0==I&&(S+=E.WordConfig.getWord(60618),N+=E.WordConfig.getWord(60618));var O=B[I].getType(),V=B[I].getNum(),j=B[I].getKind(),D=B[I].getQuality();B[I].getId();if(j==v.GameConst.ITEM_KIND.EQUIP){var F=C.EquipConfig.getEquipConfigById(O);D==v.GameConst.QUALITY.WHITE?Se.default.instance.equipWhiteNum++:D==v.GameConst.QUALITY.GREEN?Se.default.instance.equipGreenNum++:D==v.GameConst.QUALITY.BLUE?Se.default.instance.equipBlueNum++:D==v.GameConst.QUALITY.PURPLE?Se.default.instance.equipPurpleNum++:Se.default.instance.equipYellowNum++;0!=I&&(S+="\uff0c",N+="\uff0c"),V>=2?(S+="<color="+p.ColorConfig.getQualityHexColor(D)+">\u3010"+F.name+"X"+V+"\u3011</color>",N+="<color="+p.ColorConfig.getQualityHexColor(D)+">\u3010"+F.name+"X"+V+"\u3011</color>"):(S+="<color="+p.ColorConfig.getQualityHexColor(D)+">\u3010"+F.name+"\u3011</color>",N+="<color="+p.ColorConfig.getQualityHexColor(D)+">\u3010"+F.name+"\u3011</color>")}else{(F=y.ITemsConfig.getITemsConfigById(O))?(F.id==v.ItemId.Book&&G++,F.id==v.ItemId.SkillDan&&x++):c.Logger.error("\u627e\u4e0d\u5230\u7269\u54c1",O),0!=I&&(S+="\uff0c",N+="\uff0c"),V>=2?(S+="<color="+p.ColorConfig.getQualityHexColor(F.quality)+">\u3010"+F.name+"X"+V+"\u3011</color>",N+="<color="+p.ColorConfig.getQualityHexColor(F.quality)+">\u3010"+F.name+"X"+V+"\u3011</color>"):(S+="<color="+p.ColorConfig.getQualityHexColor(F.quality)+">\u3010"+F.name+"\u3011</color>",N+="<color="+p.ColorConfig.getQualityHexColor(F.quality)+">\u3010"+F.name+"\u3011</color>")}}G>0&&rt.default.sdkCustomAction(32,G),x>0&&rt.default.sdkCustomAction(35,G),A.length>0&&e.req_reback_items(A,1);var H=0,U=0,W=i.getRecycleEquipList();for(I=0;I<W.length;I++){O=W[I].getType(),W[I].getKind();var q=W[I].getQuality();(te=C.EquipConfig.getEquipConfigById(O))||c.Logger.error("\u81ea\u52a8\u56de\u6536\u7269\u54c1\u8fd4\u56de\u9519\u8bef==",O),q==v.GameConst.QUALITY.WHITE?Se.default.instance.equipWhiteNum++:q==v.GameConst.QUALITY.GREEN?Se.default.instance.equipGreenNum++:q==v.GameConst.QUALITY.BLUE?Se.default.instance.equipBlueNum++:q==v.GameConst.QUALITY.PURPLE?Se.default.instance.equipPurpleNum++:Se.default.instance.equipYellowNum++,0==I?(S+=cc.js.formatStr(E.WordConfig.getWord(60619),p.ColorConfig.getQualityHexColor(q)),N+=cc.js.formatStr(E.WordConfig.getWord(60619),p.ColorConfig.getQualityHexColor(q))):(S+="\uff0c<color="+p.ColorConfig.getQualityHexColor(q)+">",N+="\uff0c<color="+p.ColorConfig.getQualityHexColor(q)+">"),S+="\u3010"+te.name+"\u3011</color>",N+="\u3010"+te.name+"\u3011</color>"}var z=i.getRecycleListList();for(I=0;I<z.length;I++){var J=z[I].getK(),Y=z[I].getV();J==v.GameConst.RES_TYPE.COIN?H+=Y:J==v.GameConst.RES_TYPE.CREAM&&(U+=Y)}W.length>0&&(U>0&&H>0?(S+=E.WordConfig.getWord(60620)+H+","+E.WordConfig.getWord(60621)+U,N+=E.WordConfig.getWord(60620)+H+","+E.WordConfig.getWord(60621)+U):H>0?(S+=E.WordConfig.getWord(60620)+H,N+=E.WordConfig.getWord(60620)+H):U>0&&(S+=E.WordConfig.getWord(60621)+H,N+=E.WordConfig.getWord(60621)+H));var K=i.getSpirits(),X=yt.BaoshiInfoModel.getBaoShiSkillValueByType(je.ShenBinModel.CHIXUEMOJIAN),Q=ze.default.model.max_spirits+X[1],$="#ffffff";$=K>=Q?p.ColorConfig.RedHexColor:"#ffffff",K-ze.default.model.spirits>0&&(S+=cc.js.formatStr(E.WordConfig.getWord(60622),K-ze.default.model.spirits,$,K,Q));var ee=i.getRecycleItemList();for(I=0;I<ee.length;I++){var te,ie=ee[I].getType(),ne=ee[I].getNum();if((te=y.ITemsConfig.getITemsConfigById(ie))&&te.break){S+=cc.js.formatStr(E.WordConfig.getWord(60619),p.ColorConfig.getQualityHexColor(te.quality)),S+="\u3010"+te.name+"\u3011</color>";var oe=y.ITemsConfig.getITemsConfigById(te.break[0]);S=S+E.WordConfig.getWord(60618)+"\u3010"+oe.name+"\u3011+"+te.break[1]*ne}}ze.default.model.spirits=K,rt.default.sdkCustomAction(14,H),o.EventManager.instance.dispatch(L.CommonEvent.Event_MapStatistic),Z.ChatModel.addChatStr(Z.ChatType.monsterDead,S),1==i.getIfseckill()&&(nt.default.instance.isGuaJi||f.default.instance.createView(P.default.gameView.KillBossTip,null,1,N))}}},e.login=function(e,t,i,n){void 0===e&&(e=2),void 0===t&&(t=rt.default.uId),void 0===i&&(i=rt.default.sid),void 0===n&&(n=rt.default.extra),f.default.instance.showLoadingIcon(),rt.default.uId=t,cc.sys.isBrowser&&(_.GameConfig.sdkType==_.SdkType.FengYue?n="isBrowser":(_.GameConfig.sdkType,_.SdkType.Xiaotun));var o=d.ProtoUtils.Create(l.ProtoConfig.s_user_login);o.setOpenid("testopenid"),o.setPlatid(cc.sys.platform),o.setName(t),o.setGameid(rt.default.gameId),o.setChannelid(rt.default.channelId),o.setAppid(rt.default.appId),o.setSid(i),o.setExtra(n),o.setLogoinTimes(e),o.setXmlchannelinfo(rt.default.xmlChannel),o.setVersion(rt.default.getNativeVersion()),o.setWebChannelid(s.GlobalConfig.getClientType()),c.Logger.log("login=============setOpenid:testopenid,setPlatid:"+cc.sys.platform+",clientType"+s.GlobalConfig.getClientType()+",setName:"+t+",setGameid"+rt.default.gameId+",setChannelid"+rt.default.channelId+",setAppid:"+rt.default.appId+",setSid:"+i+",setExtra:"+n+",setLogoinTimes:"+e+",setXmlchannelinfo:"+rt.default.xmlChannel+e+",setVersion:"+rt.default.getNativeVersion()),it.ZoneModel.nowZoneInfoModel&&o.setServerid(it.ZoneModel.nowZoneInfoModel.server_id),c.Logger.log("login=============",o,e,rt.default.uId,rt.default.gameId,rt.default.channelId,rt.default.appId,rt.default.sid,rt.default.extra,rt.default.xmlChannel),a.default.getInstance().sendToSocket(o)},e.reqRoleList=function(){if(_.GameConfig.connectServer){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_role_list);e.setUserId(rt.default.uId),c.Logger.log("reqRoleList==",e),a.default.getInstance().sendToSocket(e)}},e.req_create_role=function(e,t,i){var n=d.ProtoUtils.Create(l.ProtoConfig.s_req_create_role);n.setOccupation(e),n.setRolename(t),n.setPos(i),it.ZoneModel.nowZoneInfoModel&&n.setServerid(it.ZoneModel.nowZoneInfoModel.server_id),c.Logger.log("req_create_role==",n,e,t,i),a.default.getInstance().sendToSocket(n)},e.req_del_role=function(e){_.GameConfig.connectServer||xe.default.deleteRole(e)},e.req_start_game=function(e){if(_.GameConfig.connectServer){f.default.instance.showLoadingIcon(),xe.default.instance=e;var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_start_game);t.setRoleid(e.roleId),c.Logger.log("req_start_game==",e,t),a.default.getInstance().sendToSocket(t)}},e.req_role_info=function(e){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_role_info);t.setRoleid(e),c.Logger.log("req_role_info==",t),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(t)},e.req_item_list=function(){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_item_list);c.Logger.log("req_item_list==",e),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(e)},e.kill_monster=function(e,t,i,n){if(_.GameConfig.connectServer){if(null==n||!n.roleInfo||null==nt.default.instance.gameView.myRolePrefab)return;var o=d.ProtoUtils.Create(l.ProtoConfig.t_monster_info);o.setId(e),o.setType(t),o.setQuality(i),o.setScene(xe.default.instance.mapId);for(var s=d.ProtoUtils.Create(l.ProtoConfig.s_kill_monster),r=Ue.SkillModel.getMyActiveSkillList(),f=[],g=0;g<r.length;g++){var h=d.ProtoUtils.Create(l.ProtoConfig.t_skill_arg),u=r[g];u||c.Logger.error("\u4e0d\u5b58\u5728\u7684\u6280\u80fd",g,r[g]),h.setSkillId(u.id);var p=u.bonus;isNaN(p)&&(p=0),h.setSkillBonus(p);var m=u.parameter;m||(m=[]),h.setParameterList(m),f[g]=h}s.setSkillArgListList(f),s.setMonsterinfo(o),xe.default.instance.bagRemainingnumber<=0?s.setRestBagNum(-1):s.setRestBagNum(xe.default.instance.bagRemainingnumber);var C=d.ProtoUtils.Create(l.ProtoConfig.t_kill_reback_info);Oe.SettingModel.notItselfEq||Oe.SettingModel.ordinaryEq||Oe.SettingModel.excellentEq||Oe.SettingModel.excellentEqs?C.setReback(1):C.setReback(2),Oe.SettingModel.notItselfEq?C.setProf(1):C.setProf(2);var y=[];Oe.SettingModel.ordinaryEq&&y.push(v.GameConst.QUALITY.WHITE),Oe.SettingModel.excellentEq&&y.push(v.GameConst.QUALITY.GREEN),Oe.SettingModel.excellentEqs&&y.push(v.GameConst.QUALITY.BLUE),C.setQualityListList(y),s.setRebackInfo(C);var I=[];for(g=0;g<xe.default.instance.attrList.length;g++){var M=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);M.setK(xe.default.instance.attrList[g].magicId),M.setV(Math.ceil(xe.default.instance.attrList[g].magicValue)),I.push(M)}var w=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);w.setK(b.MagicNameConfig.MagicId.atk),w.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.attack)),I.push(w);var k=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);k.setK(b.MagicNameConfig.MagicId.def),k.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getDef())),I.push(k);var S=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);S.setK(b.MagicNameConfig.MagicId.spt),S.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.spt)),I.push(S);var P=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);P.setK(b.MagicNameConfig.MagicId.mag),P.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.mag)),I.push(P);var E=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);E.setK(b.MagicNameConfig.MagicId.hp),E.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getHp())),I.push(E);var L=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);L.setK(b.MagicNameConfig.MagicId.maxHp),L.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getMaxHp())),I.push(L);var T=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);T.setK(b.MagicNameConfig.MagicId.mp),T.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getMp())),I.push(T);var R=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);R.setK(b.MagicNameConfig.MagicId.maxMp),R.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getMaxMp())),I.push(R);var N=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);N.setK(b.MagicNameConfig.MagicId.lucky),N.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.lucky)),I.push(N);var B=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);B.setK(b.MagicNameConfig.MagicId.BonusDamage),B.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.BonusDamage)),I.push(B);var A=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);A.setK(b.MagicNameConfig.MagicId.DamageReduction),A.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.DamageReduction)),I.push(A);var G=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);G.setK(b.MagicNameConfig.MagicId.BonusDamage_p),G.setV(Math.ceil(1e4*nt.default.instance.gameView.myRolePrefab.roleInfo.BonusDamage_p)),I.push(G);var x=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);x.setK(b.MagicNameConfig.MagicId.DamageReduction_p),x.setV(Math.ceil(1e4*nt.default.instance.gameView.myRolePrefab.roleInfo.DamageReduction_p)),I.push(x);var O=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);O.setK(b.MagicNameConfig.MagicId.HpDrain),O.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.HpDrain)),I.push(O);var V=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);V.setK(b.MagicNameConfig.MagicId.MpDrain),V.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.MpDrain)),I.push(V);var j=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);j.setK(b.MagicNameConfig.MagicId.speed),j.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.attackSpeed)),I.push(j);var D=[],F=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);F.setK(b.MagicNameConfig.MagicId.atk),F.setV(Math.ceil(n.roleInfo.attack)),D.push(F);var H=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);H.setK(b.MagicNameConfig.MagicId.def),H.setV(Math.ceil(n.roleInfo.getDef())),D.push(H);var U=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);U.setK(b.MagicNameConfig.MagicId.spt),U.setV(Math.ceil(n.roleInfo.spt)),D.push(U);var W=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);W.setK(b.MagicNameConfig.MagicId.mag),W.setV(Math.ceil(n.roleInfo.mag)),D.push(W);var q=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);q.setK(b.MagicNameConfig.MagicId.hp),q.setV(Math.ceil(n.totalHurtBlood)),D.push(q);var z=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);z.setK(b.MagicNameConfig.MagicId.maxHp),z.setV(Math.ceil(n.roleInfo.getMaxHp())),D.push(z);var J=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);J.setK(b.MagicNameConfig.MagicId.mp),J.setV(Math.ceil(n.roleInfo.getMp())),D.push(J);var Y=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);Y.setK(b.MagicNameConfig.MagicId.maxMp),Y.setV(Math.ceil(n.roleInfo.getMaxMp())),D.push(Y);var Z=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);Z.setK(b.MagicNameConfig.MagicId.lucky),Z.setV(Math.ceil(n.roleInfo.lucky)),D.push(Z);var K=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);K.setK(b.MagicNameConfig.MagicId.BonusDamage),K.setV(Math.ceil(n.roleInfo.BonusDamage)),D.push(K);var X=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);X.setK(b.MagicNameConfig.MagicId.DamageReduction),X.setV(Math.ceil(n.roleInfo.DamageReduction)),D.push(X);var Q=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);Q.setK(b.MagicNameConfig.MagicId.BonusDamage_p),Q.setV(Math.ceil(1e4*n.roleInfo.BonusDamage_p)),D.push(Q);var $=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);$.setK(b.MagicNameConfig.MagicId.DamageReduction_p),$.setV(Math.ceil(1e4*n.roleInfo.DamageReduction_p)),D.push($);var ee=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);ee.setK(b.MagicNameConfig.MagicId.HpDrain),ee.setV(Math.ceil(n.roleInfo.HpDrain)),D.push(ee);var te=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);te.setK(b.MagicNameConfig.MagicId.MpDrain),te.setV(Math.ceil(n.roleInfo.MpDrain)),D.push(te);var ie=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);ie.setK(b.MagicNameConfig.MagicId.speed),ie.setV(Math.ceil(n.roleInfo.attackSpeed)),D.push(ie),s.setHeroattrlistList(I),s.setMonsterattrlistList(D);var ne=[];for(g=0;g<xe.default.instance.skillModelList.length;g++){var oe=xe.default.instance.skillModelList[g],ae=d.ProtoUtils.Create(l.ProtoConfig.t_skill);ae.setK(oe.id),oe.isActive?ae.setV(oe.getTotalLevel(xe.default.instance)):ae.setV(0),ae.setExp(oe.exp),ae.setUse(oe.isSelect),ne[g]=ae}s.setSkillListList(ne),c.Logger.log("killMonster===",s),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(s)}},e.s_enter_delivery=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_enter_delivery);t.setId(e),a.default.getInstance().sendToSocket(t)}},e.req_switch_map=function(t){if(_.GameConfig.connectServer){var i=I.MapConfig.getMapConfigByMapId(t);if(I.MapConfig.currFightType==I.MapConfig.FIGHTTYPE.SERVER&&i.fight_type!=I.MapConfig.FIGHTTYPE.SERVER&&e.s_scene_leave(),1==i.fight_type)e.s_req_change_scene(t);else{var n=d.ProtoUtils.Create(l.ProtoConfig.s_req_enter_scene);n.setSceneId(t),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(n)}}},e.req_charge=function(e){var t=h.ChongZhiConfig.getConfigById(e),i=new Array;for(var n in t.item){var o=C.EquipConfig.getEquipConfigById(n);if(o){var s=ve.AddItemParamStruct.create(xe.default.instance,o.kind,o.id,1);i.push(s)}else{var r=y.ITemsConfig.getITemsConfigById(n);i.push(ve.AddItemParamStruct.create(xe.default.instance,r.kind,r.id,t.item[n],r.quality))}}if(xe.default.instance.tryAddItemsToBag(i)){var f=d.ProtoUtils.Create(l.ProtoConfig.s_req_charge);f.setProductId(e),c.Logger.log("req_charge==",e,f),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(f)}else E.WordConfig.showWord(60001)},e.req_equip=function(e,t,i){if(void 0===i&&(i=1),_.GameConfig.connectServer){var n=d.ProtoUtils.Create(l.ProtoConfig.s_req_equip);n.setItemid(parseInt(e)),n.setGridid(t),n.setAction(i),c.Logger.log("req_equip==",e,t,i,ve.default.getItemByid(e)),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(n)}},e.req_fresh_equip=function(e,t,i){void 0===i&&(i=-1);var n=d.ProtoUtils.Create(l.ProtoConfig.s_req_fresh_equip);n.setItemId(parseInt(e)),n.setLockIndexListList(t),n.setAutobuy(i),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(n)},e.req_save_property=function(e){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_save_property);t.setItemId(parseInt(e)),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(t)},e.req_strength=function(e){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_strength);t.setPos(e),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(t)},e.req_boss_fresh_time=function(){if(_.GameConfig.connectServer){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_boss_fresh_time);a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(e)}},e.req_buy=function(e,t,i,n,o,s,r,c){if(void 0===s&&(s=""),void 0===r&&(r=1),void 0===c&&(c=null),_.GameConfig.connectServer){this.nowbuyType=e;var f=d.ProtoUtils.Create(l.ProtoConfig.s_req_buy);f.setBuyType(e),f.setShopItemId(t),f.setShopItemNum(i),f.setResourceType(n),f.setIndex(o),f.setItemType(s),f.setMulti(r),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(f)}},e.req_advertisement_info=function(e){if(_.GameConfig.connectServer){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_advertisement_info);t.setId(e),a.default.getInstance().isLogin&&a.default.getInstance().sendToSocket(t)}},e.req_advertisement=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_advertisement);a.default.getInstance().sendToSocket(e)}},e.req_shop_fresh=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_shop_fresh);t.setIsFresh(e),a.default.getInstance().sendToSocket(t)}},e.req_shop_fresh_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_shop_fresh_info);a.default.getInstance().sendToSocket(e)}},e.req_reback_items=function(e,t){if(e.length>=150&&e.splice(150,e.length-150),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_reback_items);i.setIdListList(e),i.setType(t),a.default.getInstance().sendToSocket(i)}},e.req_reback_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_reback_info);a.default.getInstance().sendToSocket(e)}},e.resh_reback_info=function(e,t){if(void 0===t&&(t=2),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_resh_reback_info);i.setType(e),i.setIsFresh(t),a.default.getInstance().sendToSocket(i)}},e.req_skill=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_skill);a.default.getInstance().sendToSocket(e)}},e.req_skill_lev_up=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_skill_lev_up);t.setSkillId(e),a.default.getInstance().sendToSocket(t)}},e.req_skill_add_exp=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_skill_add_exp);i.setSkillId(e),i.setAddExp(t),a.default.getInstance().sendToSocket(i)}},e.req_skill_use=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_skill_use);i.setSkillId(e),i.setSet(t),a.default.getInstance().sendToSocket(i)}},e.req_use_item=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_use_item);i.setId(parseInt(e)),i.setNum(t),i.setBagcapcity(xe.default.instance.bagRemainingnumber),a.default.getInstance().sendToSocket(i)}},e.req_break_item=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_break_item);i.setId(parseInt(e)),i.setNum(t),a.default.getInstance().sendToSocket(i)}},e.req_lev_up=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_lev_up);a.default.getInstance().sendToSocket(e)}},e.req_realm_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_realm_info);a.default.getInstance().sendToSocket(e)}},e.req_up_realm=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_up_realm);t.setId(e),c.Logger.log("s_req_up_realm==",t),a.default.getInstance().sendToSocket(t)}},e.req_get_vip_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_get_vip_info);a.default.getInstance().sendToSocket(e)}},e.req_get_vip_diamond=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_get_vip_diamond);t.setType(e),rt.default.sdkCustomAction(5,100),a.default.getInstance().sendToSocket(t)}},e.req_get_offline_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_get_offline_reward);t.setType(e),a.default.getInstance().sendToSocket(t)}},e.req_task=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_task);a.default.getInstance().sendToSocket(e)}},e.req_finish_task=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_finish_task);i.setTaskId(e),i.setStep(t),a.default.getInstance().sendToSocket(i)}},e.req_make_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_make_info);a.default.getInstance().sendToSocket(e)}},e.refresh_make=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_refresh_make);t.setType(e),a.default.getInstance().sendToSocket(t)}},e.req_make_equip=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_make_equip);t.setIndex(e),a.default.getInstance().sendToSocket(t)}},e.req_first_rechard_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_first_rechard_info);a.default.getInstance().sendToSocket(e)}},e.req_get_first_rechard_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_get_first_rechard_info);a.default.getInstance().sendToSocket(e)}},e.seq_charge_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_seq_charge_info);a.default.getInstance().sendToSocket(e)}},e.s_equip_lock=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_equip_lock);i.setItemid(parseInt(e)),t?i.setIslock(1):i.setIslock(2),c.Logger.log("s_equip_lock==",i),a.default.getInstance().sendToSocket(i)}},e.sendGm=function(e,t){void 0===e&&(e="charge"),void 0===t&&(t="2");var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_gm_code);i.setCode(e),i.setArgListList(t.split(",")),a.default.getInstance().sendToSocket(i)},e.sendCode=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_code);t.setCode(e),a.default.getInstance().sendToSocket(t)}},e.sendComplex=function(e,t,i){if(void 0===i&&(i=[]),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_seq_compose);n.setComposeId(e),n.setNum(t);for(var o=[],s=0;s<i.length;s++){var r=d.ProtoUtils.Create(l.ProtoConfig.t_material);r.setEquipid(i[s]),o[s]=r}n.setMateriallistList(o),c.Logger.log("sendComplex===",n),a.default.getInstance().sendToSocket(n)}},e.s_seq_start_adv_status=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_seq_start_adv_status);t.setStatus(e),a.default.getInstance().sendToSocket(t)}},e.s_seq_embed=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_seq_embed);i.setItemid(e),i.setRuneindex(t),a.default.getInstance().sendToSocket(i),c.Logger.log("s_seq_embed",i)}},e.s_seq_unembed=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_seq_unembed);i.setItemid(e),i.setRuneindex(t),a.default.getInstance().sendToSocket(i)}},e.s_seq_quench=function(e,t,i){if(void 0===i&&(i=-1),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_seq_quench);n.setItemid(parseInt(e)),n.setLockIndexListList(t),n.setAutobuy(i),c.Logger.log("s_seq_quench",n),a.default.getInstance().sendToSocket(n)}},e.s_seq_saverune=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_seq_saverune);t.setItemid(parseInt(e)),a.default.getInstance().sendToSocket(t)}},e.s_seq_fangbuy=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_seq_fangbuy);i.setProductid(e.toString()),i.setBuynumber(t),c.Logger.log("s_seq_fangbuy",i),a.default.getInstance().sendToSocket(i)}},e.s_seq_fangbuy_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_seq_fangbuy_info);a.default.getInstance().sendToSocket(e)}},e.s_seq_limitshop=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=h.ChongZhiConfig.getConfigById(i),o=new Array;for(var s in n.item){var r=C.EquipConfig.getEquipConfigById(s);if(r){var f=ve.AddItemParamStruct.create(xe.default.instance,r.kind,r.id,1);o.push(f)}else{var g=y.ITemsConfig.getITemsConfigById(s);o.push(ve.AddItemParamStruct.create(xe.default.instance,g.kind,g.id,n.item[s],g.quality))}}if(xe.default.instance.tryAddItemsToBag(o)){var u=d.ProtoUtils.Create(l.ProtoConfig.s_seq_limitshop);u.setProductid(e.toString()),u.setBuynumber(t),u.setChargeid(i),c.Logger.log("s_seq_limitshop",u),a.default.getInstance().sendToSocket(u)}else E.WordConfig.showWord(60001)}},e.s_seq_limitshopbuy_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_seq_limitshopbuy_info);a.default.getInstance().sendToSocket(e)}},e.s_seq_xianji=function(e,t,i,n){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var o=d.ProtoUtils.Create(l.ProtoConfig.s_seq_xianji);o.setItemid1(e),o.setItemid2(t),o.setIsadvanced(i),o.setLocklist(n),a.default.getInstance().sendToSocket(o)}},e.s_seq_xianji_save=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_seq_xianji_save);i.setItemid1(e),i.setItemid2(t),a.default.getInstance().sendToSocket(i)}},e.s_seq_xianji_regret=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_seq_xianji_regret);n.setItemid(e),n.setIsadvanced(t),n.setLocklist(i),a.default.getInstance().sendToSocket(n)}},e.s_seq_rune_gift=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_seq_rune_gift);a.default.getInstance().sendToSocket(e)}},e.s_seq_all_skill_sin=function(){},e.s_seq_swap_skill_sin=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_seq_swap_skill_sin);c.Logger.log("s_seq_swap_skill_sin",n),n.setSkillid(e),n.setOldskinid(t),n.setNewskinid(i),a.default.getInstance().sendToSocket(n)}},e.s_seq_try_item=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_seq_try_item);t.setProdid(e),a.default.getInstance().sendToSocket(t)}},e.s_seq_shenbing=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_seq_shenbing);i.setCurrentid(e+1),i.setShenbingtype(t),c.Logger.log("s_seq_shenbing",i),a.default.getInstance().sendToSocket(i)}},e.s_seq_shenbing_skill=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_seq_shenbing_skill);i.setCurrentid(e),i.setShenbingtype(t),a.default.getInstance().sendToSocket(i)}},e.s_seckill_monster=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_seckill_monster),o=d.ProtoUtils.Create(l.ProtoConfig.t_monster_info);o.setId(-1),o.setType(e.toString()),o.setQuality(t),o.setScene(i),n.setMonsterinfo(o),xe.default.instance.bagRemainingnumber<=0?n.setRestBagNum(-1):n.setRestBagNum(xe.default.instance.bagRemainingnumber);var s=d.ProtoUtils.Create(l.ProtoConfig.t_kill_reback_info);Oe.SettingModel.notItselfEq||Oe.SettingModel.ordinaryEq||Oe.SettingModel.excellentEq||Oe.SettingModel.excellentEqs?s.setReback(1):s.setReback(2),Oe.SettingModel.notItselfEq?s.setProf(1):s.setProf(2);var r=[];Oe.SettingModel.ordinaryEq&&r.push(v.GameConst.QUALITY.WHITE),Oe.SettingModel.excellentEq&&r.push(v.GameConst.QUALITY.GREEN),Oe.SettingModel.excellentEqs&&r.push(v.GameConst.QUALITY.BLUE),s.setQualityListList(r),n.setRebackInfo(s),a.default.getInstance().sendToSocket(n)}},e.s_recycle_options=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_recycle_options);e.setRecycleSelfEquip(Oe.SettingModel.recycle_self_equip),e.setRecycleWhite(Oe.SettingModel.recycle_white),e.setRecycleGreen(Oe.SettingModel.recycle_green),e.setRecycleBlue(Oe.SettingModel.recycle_blue),e.setRecyclePurple(Oe.SettingModel.recycle_purple),e.setRecycleNormalLevel(Oe.SettingModel.recycle_normal_level),e.setRecycleNirvanaReam(Oe.SettingModel.recycle_nirvana_ream),e.setRecycleUltimateP(Oe.SettingModel.recycle_ultimate_p),e.setRecycleSkillbooks(Oe.SettingModel.recycle_skillbooks),e.setRecycleEquipTips(Oe.SettingModel.recycle_equip_tips),e.setRecycleEquipIllbooks(Oe.SettingModel.recycle_equip_illbooks),c.Logger.log("s_recycle_options",e),a.default.getInstance().sendToSocket(e)}},e.s_seq_get_mail=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_seq_get_mail);t.setHeroid(e),a.default.getInstance().sendToSocket(t)}},e.s_seq_read_mail=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_seq_read_mail);t.setMailid(e),a.default.getInstance().sendToSocket(t)}},e.s_req_use_item_add_skill_exp=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_use_item_add_skill_exp);i.setSkillId(e),i.setNum(t),a.default.getInstance().sendToSocket(i)}},e.s_seq_delete_mail=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_seq_delete_mail);t.setHeroid(e),a.default.getInstance().sendToSocket(t)}},e.s_seq_get_all_content=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_seq_get_all_content);t.setBagrest(e),a.default.getInstance().sendToSocket(t)}},e.s_req_check_property=function(){var e=this;if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){if(clearTimeout(this.checkTimeId),!nt.default.instance.gameView||!nt.default.instance.gameView.myRolePrefab||!nt.default.instance.gameView.myRolePrefab.roleInfo)return void setTimeout(function(){e.s_req_check_property()},6e4);for(var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_check_property),i=[],n=0;n<xe.default.instance.attrList.length;n++){var o=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);o.setK(xe.default.instance.attrList[n].magicId),o.setV(Math.ceil(xe.default.instance.attrList[n].magicValue)),i.push(o)}var s=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);s.setK(b.MagicNameConfig.MagicId.atk),s.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.attack)),i.push(s);var r=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);r.setK(b.MagicNameConfig.MagicId.def),r.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getDef())),i.push(r);var c=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);c.setK(b.MagicNameConfig.MagicId.spt),c.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.spt)),i.push(c);var f=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);f.setK(b.MagicNameConfig.MagicId.mag),f.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.mag)),i.push(f);var g=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);g.setK(b.MagicNameConfig.MagicId.hp),g.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getHp())),i.push(g);var h=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);h.setK(b.MagicNameConfig.MagicId.maxHp),h.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getMaxHp())),i.push(h);var u=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);u.setK(b.MagicNameConfig.MagicId.mp),u.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getMp())),i.push(u);var p=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);p.setK(b.MagicNameConfig.MagicId.maxMp),p.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.getMaxMp())),i.push(p);var m=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);m.setK(b.MagicNameConfig.MagicId.lucky),m.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.lucky)),i.push(m);var C=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);C.setK(b.MagicNameConfig.MagicId.BonusDamage),C.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.BonusDamage)),i.push(C);var v=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);v.setK(b.MagicNameConfig.MagicId.DamageReduction),v.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.DamageReduction)),i.push(v);var y=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);y.setK(b.MagicNameConfig.MagicId.BonusDamage_p),y.setV(Math.ceil(1e4*nt.default.instance.gameView.myRolePrefab.roleInfo.BonusDamage_p)),i.push(y);var I=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);I.setK(b.MagicNameConfig.MagicId.DamageReduction_p),I.setV(Math.ceil(1e4*nt.default.instance.gameView.myRolePrefab.roleInfo.DamageReduction_p)),i.push(I);var M=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);M.setK(b.MagicNameConfig.MagicId.HpDrain),M.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.HpDrain)),i.push(M);var w=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);w.setK(b.MagicNameConfig.MagicId.MpDrain),w.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.MpDrain)),i.push(w);var k=d.ProtoUtils.Create(l.ProtoConfig.t_property_info);k.setK(b.MagicNameConfig.MagicId.speed),k.setV(Math.ceil(nt.default.instance.gameView.myRolePrefab.roleInfo.attackSpeed)),i.push(k),t.setHeroattrlistList(i);var S=Ue.SkillModel.getMyActiveSkillList(),P=[];for(n=0;n<S.length;n++){var E=d.ProtoUtils.Create(l.ProtoConfig.t_skill_arg),L=S[n];E.setSkillId(L.id);var T=L.bonus;isNaN(T)&&(T=0),E.setSkillBonus(T);var R=L.parameter;R||(R=[]),E.setParameterList(R),P[n]=E}t.setSkillArgListList(P);var N=[];for(n=0;n<xe.default.instance.skillModelList.length;n++){var B=xe.default.instance.skillModelList[n],A=d.ProtoUtils.Create(l.ProtoConfig.t_skill);A.setK(B.id),B.isActive?A.setV(B.getTotalLevel(xe.default.instance)):A.setV(0),A.setExp(B.exp),A.setUse(B.isSelect),N[n]=A}t.setSkillListList(N),a.default.getInstance().sendToSocket(t),setTimeout(function(){e.s_req_check_property()},6e4)}},e.getAppstoneReward=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_seq_appstore_reward);a.default.getInstance().sendToSocket(e)}},e.s_robot_switch=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){f.default.instance.showLoadingIcon();var i=d.ProtoUtils.Create(l.ProtoConfig.s_robot_switch);i.setSwitch(e),i.setMyaction(t),a.default.getInstance().sendToSocket(i)}},e.s_seq_check_excision=function(e,t,i,n){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var o=d.ProtoUtils.Create(l.ProtoConfig.s_seq_check_excision);o.setLaunchrate(e),o.setLaunchtime(t),o.setDamagerate(i),o.setIsBossSpExcision(n),a.default.getInstance().sendToSocket(o)}},e.s_seq_auto_medicine=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_seq_auto_medicine);e.setId(Number(xe.default.instance.roleId));for(var t=[],i=0;i<4;i++){var n=d.ProtoUtils.Create(l.ProtoConfig.t_auto_medicine_info);if(n.setMedicineIndex(i+1),0==i){n.setIfselect(Oe.SettingModel.hpSet?1:-1);var o=0;o=Math.floor(1e3*Oe.SettingModel.hpSetPt)<=0?9999:Math.floor(1e3*Oe.SettingModel.hpSetPt),n.setLauchrate(o),n.setMedtype(Oe.SettingModel.drugHp)}else if(1==i){n.setIfselect(Oe.SettingModel.mpSet?1:-1);o=0;o=Math.floor(1e3*Oe.SettingModel.mpSetPt)<=0?9999:Math.floor(1e3*Oe.SettingModel.mpSetPt),n.setLauchrate(o),n.setMedtype(Oe.SettingModel.drugMp)}else if(2==i){n.setIfselect(Oe.SettingModel.highHpSet?1:-1);o=0;o=Math.floor(1e3*Oe.SettingModel.highHpSetPt)<=0?9999:Math.floor(1e3*Oe.SettingModel.highHpSetPt),n.setLauchrate(o),n.setMedtype(Oe.SettingModel.drugHighHp)}else if(3==i){n.setIfselect(Oe.SettingModel.highMpSet?1:-1);o=0;o=Math.floor(1e3*Oe.SettingModel.highMpSetPt)<=0?9999:Math.floor(1e3*Oe.SettingModel.highMpSetPt),n.setLauchrate(o),n.setMedtype(Oe.SettingModel.drugHighMp)}t.push(n)}e.setAutoMedicineSettingList(t),c.Logger.log("s_seq_auto_medicine",e),a.default.getInstance().sendToSocket(e)}},e.s_robot_record_get=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_robot_record_get);a.default.getInstance().sendToSocket(e)}},e.s_equip_rank=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_equip_rank);t.setEquipPos(e),a.default.getInstance().sendToSocket(t)}},e.s_fight_rank=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_fight_rank);t.setProf(e),a.default.getInstance().sendToSocket(t)}},e.s_robot_record_set=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_robot_record_set);t.setData(e),a.default.getInstance().sendToSocket(t)}},e.s_req_if_kill_boss=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_if_kill_boss);a.default.getInstance().sendToSocket(e)}},e.s_mine_personal_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_mine_personal_info);e.setId(xe.default.instance.roleId),a.default.getInstance().sendToSocket(e)}},e.s_mine_info=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_mine_info);i.setMineclass(e),i.setMinepage(t),c.Logger.log("s_mine_info==",i),a.default.getInstance().sendToSocket(i)}},e.s_mine_rob=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_mine_rob);t.setMineid(e),c.Logger.log("s_mine_rob==",t),a.default.getInstance().sendToSocket(t)}},e.s_do_minning=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_do_minning);t.setMineid(e),a.default.getInstance().sendToSocket(t)}},e.s_do_leaving=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_do_leaving);t.setMineid(e),a.default.getInstance().sendToSocket(t)}},e.s_pvp_result=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_pvp_result);i.setId(e),i.setType(t),c.Logger.log("s_pvp_result==",i),a.default.getInstance().sendToSocket(i)}},e.s_mine_list=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_mine_list);t.setPage(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_mine_list==",e)}},e.s_mine_battle_report=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_mine_battle_report);a.default.getInstance().sendToSocket(e),c.Logger.log("s_mine_battle_report==")}},e.s_mine_buy_energy=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_mine_buy_energy);t.setCount(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_mine_buy_energy==",e)}},e.s_mine_retake=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_mine_retake);t.setReportId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_mine_retake==",e)}},e.s_mine_assist=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_mine_assist);t.setReportId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_mine_assist==",e)}},e.s_mine_plunder=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_mine_plunder);t.setMineId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_mine_plunder==",e)}},e.s_mine_report_state=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_mine_report_state);t.setReportId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_mine_report_state==",e)}},e.s_mine_escape=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_mine_escape);a.default.getInstance().sendToSocket(e),c.Logger.log("s_mine_escape==")}},e.s_req_refresh_boss_hp=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_req_refresh_boss_hp);n.setType(parseInt(e)),n.setScene(t),n.setHp(i),c.Logger.log("s_req_refresh_boss_hp==",n),a.default.getInstance().sendToSocket(n)}},e.s_add_safeTime=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_add_safeTime);t.setMineid(e),a.default.getInstance().sendToSocket(t)}},e.s_get_mine_allow=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_mine_allow);a.default.getInstance().sendToSocket(e)}},e.s_req_set_role_hp=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_set_role_hp);e.setHp(xe.default.instance.getHp()),e.setMp(xe.default.instance.getMp()),a.default.getInstance().sendToSocket(e)}},e.s_req_scene_obj_list=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_scene_obj_list);a.default.getInstance().sendToSocket(e)}},e.s_req_get_role_hp=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_get_role_hp);a.default.getInstance().sendToSocket(e)}},e.s_req_statistics=function(e,t){if(void 0===t&&(t=0),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_statistics);i.setId(e),i.setRoleid(xe.default.instance.roleId),i.setLevel(xe.default.instance.level),i.setFanrenlevel(ye.JingJieModel.getMyFanrenJingLevel()),i.setLunhuilevel(ye.JingJieModel.getMyLunHuiJingLevel()),i.setFight(xe.default.instance.totalFight),i.setBoosid(t),c.Logger.log("s_req_statistics===",i),a.default.getInstance().sendToSocket(i)}},e.s_intensify_refine=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_intensify_refine);i.setRefineid(e),i.setUsednum(t),c.Logger.log("s_intensify_refine===",i),a.default.getInstance().sendToSocket(i)}},e.s_get_dailyGift=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_dailyGift);c.Logger.log("s_get_dailyGift",e),a.default.getInstance().sendToSocket(e)}},e.s_do_remode=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_do_remode);t.setItemid(e),c.Logger.log("s_do_remode",t),a.default.getInstance().sendToSocket(t)}},e.s_save_remode=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_save_remode);t.setItemid(e),c.Logger.log("s_save_remode",t),a.default.getInstance().sendToSocket(t)}},e.s_doubleegg_get=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_doubleegg_get);i.setIndex(e),i.setActivityId(t),c.Logger.log("s_doubleegg_get",i),a.default.getInstance().sendToSocket(i)}},e.s_doubleegg_info=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_doubleegg_info);t.setActivityId(e),c.Logger.log("s_doubleegg_info",t),a.default.getInstance().sendToSocket(t)}},e.s_get_activity_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_activity_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_get_activity_info",e)}},e.s_get_legendtask_info=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_legendtask_info);t.setActivityId(e),a.default.getInstance().sendToSocket(t)}},e.s_get_legendtask_gift=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_get_legendtask_gift);n.setLevel(e),n.setPos(t),n.setActivityId(i),c.Logger.log("s_get_legendtask_gift=",n),a.default.getInstance().sendToSocket(n)}},e.s_get_legendtask_exp=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_get_legendtask_exp);i.setId(e),i.setActivityId(t),c.Logger.log("s_get_legendtask_exp=",i),a.default.getInstance().sendToSocket(i)}},e.s_buy_legendtask_level=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_buy_legendtask_level);i.setLevel(e),i.setActivityId(t),c.Logger.log("s_buy_legendtask_level==",i),a.default.getInstance().sendToSocket(i)}},e.s_get_holidayMonster_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_holidayMonster_info);c.Logger.log("s_get_holidayMonster_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_track_sign=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_track_tree_sign);a.default.getInstance().sendToSocket(e)}},e.s_get_holidayRun_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_holidaytree_info);c.Logger.log("s_get_holidayRun_info====="),a.default.getInstance().sendToSocket(e)}},e.s_use_ringOrtrap=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_use_treeOrtrap);i.setTrackid(e),i.setUsenum(t),a.default.getInstance().sendToSocket(i)}},e.s_get_christmas_discount_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_christmas_discount_info);c.Logger.log("s_get_christmas_discount_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_newYear_discount_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_newYear_discount_info);c.Logger.log("s_get_newYear_discount_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_muluShopInfo=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_treeShopInfo);a.default.getInstance().sendToSocket(e)}},e.s_miluShop_buy=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_treeShop_buy);i.setShopid(e),i.setBuynum(t),c.Logger.log("s_miluShop_buy===",i),a.default.getInstance().sendToSocket(i)}},e.s_get_carnival_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_carnival_info);c.Logger.log("s_get_carnival_info====="),a.default.getInstance().sendToSocket(e)}},e.s_get_carnivalGift=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_carnivalGift);t.setGiftindex(e),c.Logger.log("s_get_carnivalGift=====",t),a.default.getInstance().sendToSocket(t)}},e.s_get_ultimate_gift_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_ultimate_gift_info);c.Logger.log("s_get_ultimate_gift_info=====",e),a.default.getInstance().sendToSocket(e)}},e.s_selet_ultimateGift=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_selet_ultimateGift);t.setGiftid(e),c.Logger.log("s_selet_ultimateGift=====",t),a.default.getInstance().sendToSocket(t)}},e.s_fresh_carnival=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_fresh_carnival);c.Logger.log("s_fresh_carnival=====",e),a.default.getInstance().sendToSocket(e)}},e.s_get_roast_pig_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_roast_pig_info);a.default.getInstance().sendToSocket(e)}},e.s_carnival_target_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_carnival_target_info);a.default.getInstance().sendToSocket(e)}},e.s_carnival_target_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_carnival_target_reward);t.setIndex(e),c.Logger.log("s_carnival_target_reward===",t),a.default.getInstance().sendToSocket(t)}},e.s_req_use_exp_ball=function(e,t,i){if(void 0===i&&(i=2),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_req_use_exp_ball);n.setItemType(e),n.setNum(t),n.setIsDouble(i),c.Logger.log("s_req_use_exp_ball===",n),a.default.getInstance().sendToSocket(n)}},e.s_req_buy_boss_rebtime=function(e,t,i,n){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var o=d.ProtoUtils.Create(l.ProtoConfig.s_req_buy_boss_rebtime);o.setBossid(e),o.setItemid(t),o.setItemnum(i),o.setScene(n),c.Logger.log("s_req_buy_boss_rebtime===",o),a.default.getInstance().sendToSocket(o)}},e.s_arena_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_arena_info);c.Logger.log("s_arena_info===",e),a.default.getInstance().sendToSocket(e)}},e.s_tuituF_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_normal_monster_rank);c.Logger.log("s_req_normal_monster_rank===",e),a.default.getInstance().sendToSocket(e)}},e.s_tuituL_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_rem_monster_rank);c.Logger.log("s_req_rem_monster_rank===",e),a.default.getInstance().sendToSocket(e)}},e.s_baoshi_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_superweapon_stone_info);c.Logger.log("s_superweapon_stone_info===",e),a.default.getInstance().sendToSocket(e)}},e.s_upBaoshi_info=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_superweapon_stone_strengthen);i.setSwid(e),i.setStoneid(t),c.Logger.log("s_superweapon_stone_strengthen===",i),a.default.getInstance().sendToSocket(i)}},e.s_challenge_start=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){xe.default.instance.gotoRebornMap();var i=d.ProtoUtils.Create(l.ProtoConfig.s_challenge_start);i.setRankid(e),i.setEnemyid(t),i.setIsSkip(0),Be.PkModel.nowPkId=e,Be.PkModel.freetime<Be.PkModel.TotalFreeTimes||ve.default.getItemAmount(Be.PkModel.Item_LeitaiLing)>0?f.default.instance.createView(P.default.gameView.pkFightView,function(){a.default.getInstance().sendToSocket(i)}):a.default.getInstance().sendToSocket(i)}},e.s_challenge_result=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_challenge_result);a.default.getInstance().sendToSocket(e)}},e.s_arena_week_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_arena_week_reward);t.setIndex(e),c.Logger.log("s_arena_week_reward==",e),a.default.getInstance().sendToSocket(t)}},e.s_req_get_title=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_get_title);c.Logger.log("s_req_get_title=="),a.default.getInstance().sendToSocket(e)}},e.s_star_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_star_info);c.Logger.log("s_star_info=="),a.default.getInstance().sendToSocket(e)}},e.s_star_exchange=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_star_exchange);n.setType(e),n.setItemType(t),n.setNum(i),c.Logger.log("s_star_exchange==",n),a.default.getInstance().sendToSocket(n)}},e.s_star_up_level=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_star_up_level);c.Logger.log("s_star_up_level=="),a.default.getInstance().sendToSocket(e)}},e.s_star_sign_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_star_sign_info);c.Logger.log("s_star_sign_info=="),a.default.getInstance().sendToSocket(e)}},e.s_star_sign_rand=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_star_sign_rand);t.setIdx(e),c.Logger.log("s_star_sign_rand=="),a.default.getInstance().sendToSocket(t)}},e.s_pick_star_sign=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_pick_star_sign);i.setId(t),i.setIdx(e),c.Logger.log("s_pick_star_sign==",t),a.default.getInstance().sendToSocket(i)}},e.s_less_star_sign=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_less_star_sign);i.setId(t),i.setIdx(e),c.Logger.log("s_less_star_sign==",t),a.default.getInstance().sendToSocket(i)}},e.s_star_sign_switch=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){c.Logger.log("s_star_sign_switch==",e);var i=d.ProtoUtils.Create(l.ProtoConfig.s_star_sign_switch);i.setIdx(e),i.setType(t),a.default.getInstance().sendToSocket(i)}},e.s_star_sign_unlock=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){c.Logger.log("s_star_sign_unlock==",e);var t=d.ProtoUtils.Create(l.ProtoConfig.s_star_sign_unlock);t.setIdx(e),a.default.getInstance().sendToSocket(t)}},e.s_star_sign_page=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_star_sign_page);c.Logger.log("s_star_sign_page==",e),a.default.getInstance().sendToSocket(e)}},e.s_active_astralobe=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_active_astralobe);i.setPos(t),i.setIdx(e),c.Logger.log("s_active_astralobe==",i),a.default.getInstance().sendToSocket(i)}},e.s_equip_star_sign=function(e,t,i,n){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var o=d.ProtoUtils.Create(l.ProtoConfig.s_equip_star_sign);o.setPos(t),o.setId(i),o.setIdx(e),o.setType(n),c.Logger.log("s_equip_star_sign==",o),a.default.getInstance().sendToSocket(o)}},e.s_star_sign_preview=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_star_sign_preview);t.setIdx(e),c.Logger.log("s_star_sign_preview==",t),a.default.getInstance().sendToSocket(t)}},e.s_arena_log=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_arena_log);c.Logger.log("s_arena_log=="),a.default.getInstance().sendToSocket(e)}},e.s_req_baghouse_list=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_baghouse_list);c.Logger.log("s_req_baghouse_list=="),a.default.getInstance().sendToSocket(e)}},e.s_update_baghouse_item=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_update_baghouse_item);n.setItemId(e),n.setChange(t),n.setType(i),c.Logger.log("s_update_baghouse_item==",n),a.default.getInstance().sendToSocket(n)}},e.s_buy_warehouse=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_buy_warehouse);i.setShopItemId(e),i.setShopItemNum(t),c.Logger.log("s_buy_warehouse==",i),a.default.getInstance().sendToSocket(i)}},e.s_get_activity_login_info=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_activity_login_info);t.setActivityId(e),c.Logger.log("s_get_activity_login_info==",t),a.default.getInstance().sendToSocket(t)}},e.s_activity_login_receive=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_activity_login_receive);i.setIndex(e),i.setActivityId(t),c.Logger.log("s_activity_login_receive==",i),a.default.getInstance().sendToSocket(i)}},e.s_activity_redenvelope_state=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_activity_redenvelope_state);c.Logger.log("s_activity_redenvelope_state==",e),a.default.getInstance().sendToSocket(e)}},e.s_activity_redenvelope_receive=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_activity_redenvelope_receive);c.Logger.log("s_activity_redenvelope_receive==",e),a.default.getInstance().sendToSocket(e)}},e.s_activity_redenvelope_record=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_activity_redenvelope_record);c.Logger.log("s_activity_redenvelope_record==",e),a.default.getInstance().sendToSocket(e)}},e.s_special_ring_compose=function(e,t){if(void 0===t&&(t=[]),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_special_ring_compose);i.setComposetype(e);for(var n=[],o=0;o<t.length;o++){var s=d.ProtoUtils.Create(l.ProtoConfig.t_material);s.setEquipid(t[o]),n[o]=s}i.setEquiplistList(n),c.Logger.log("s_special_ring_compose==",i),a.default.getInstance().sendToSocket(i)}},e.s_marfa_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_marfa_info);c.Logger.log("s_marfa_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_marfa_cumulative_task=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_marfa_cumulative_task);t.setId(e),c.Logger.log("s_marfa_cumulative_task==",t),a.default.getInstance().sendToSocket(t)}},e.s_marfa_stalibge_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_marfa_stalibge_reward);t.setId(e),c.Logger.log("s_marfa_stalibge_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_delete_hero=function(e,t){if(_.GameConfig.connectServer){var i=d.ProtoUtils.Create(l.ProtoConfig.s_delete_hero);i.setName(e),i.setHeroid(t),c.Logger.log("s_delete_hero==",i),a.default.getInstance().sendToSocket(i)}},e.s_cancle_delete=function(e,t){if(_.GameConfig.connectServer){var i=d.ProtoUtils.Create(l.ProtoConfig.s_cancle_delete);i.setName(e),i.setHeroid(t),c.Logger.log("s_cancle_delete==",i),a.default.getInstance().sendToSocket(i)}},e.s_change_name=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_change_name);t.setName(e),c.Logger.log("s_change_name==",t),a.default.getInstance().sendToSocket(t)}},e.s_recharge_gift_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_recharge_gift_info);c.Logger.log("s_recharge_gift_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_recharge_gift_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_recharge_gift_reward);t.setId(e),c.Logger.log("s_recharge_gift_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_growup_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_growup_info);c.Logger.log("s_growup_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_growup_get=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_growup_get);i.setNormalIdx(e),i.setRechargeIdx(t),c.Logger.log("s_growup_get==",i),a.default.getInstance().sendToSocket(i)}},e.s_req_skytower_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_skytower_info);c.Logger.log("s_req_skytower_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_enter_skytower=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_enter_skytower);t.setId(e),c.Logger.log("s_enter_skytower==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_skytower_record=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_skytower_record);t.setId(e),c.Logger.log("s_req_skytower_record==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_skytower_rank=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_skytower_rank);c.Logger.log("s_req_skytower_rank==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_sweeep_skytower=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_sweeep_skytower);t.setId(e),c.Logger.log("s_req_sweeep_skytower==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_buy_sweep_skytower=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_buy_sweep_skytower);c.Logger.log("s_req_buy_sweep_skytower==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_quit_skytower=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_quit_skytower);c.Logger.log("s_req_quit_skytower==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_dungeon_shop=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_dungeon_shop);c.Logger.log("s_req_dungeon_shop==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_buy_dungeon_shop=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_buy_dungeon_shop);i.setId(e),i.setBuyNum(t),c.Logger.log("s_req_buy_dungeon_shop==",i),a.default.getInstance().sendToSocket(i)}},e.s_collect_shop_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_collect_shop_info);c.Logger.log("s_collect_shop_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_collect_shop_change=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_collect_shop_change);i.setId(e),i.setCartnumber(t),c.Logger.log("s_collect_shop_change==",i),a.default.getInstance().sendToSocket(i)}},e.s_activity_seven_login_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_activity_seven_login_info);c.Logger.log("s_activity_seven_login_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_activity_seven_login_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_activity_seven_login_reward);t.setIndex(e),c.Logger.log("s_activity_seven_login_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_get_hero_info=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_hero_info);t.setId(e),c.Logger.log("s_get_hero_info==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_change_scene=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_change_scene);t.setSceneId(e),c.Logger.log("s_req_change_scene==",t),a.default.getInstance().sendToSocket(t)}},e.s_scene_leave=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_scene_leave);c.Logger.log("s_scene_leave==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_topspeed_kill_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_topspeed_kill_info);c.Logger.log("s_get_topspeed_kill_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_topspeed_kill_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_topspeed_kill_reward);t.setId(e),c.Logger.log("s_get_topspeed_kill_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_get_marfaking_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_marfaking_info);c.Logger.log("s_get_marfaking_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_marfaking_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_marfaking_reward);t.setId(e),c.Logger.log("s_get_marfaking_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_function_open_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_function_open_info);c.Logger.log("s_function_open_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_send_world_list=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_send_world_list);c.Logger.log("s_send_world_list==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_marfaking_acc_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_marfaking_acc_reward);t.setId(e),c.Logger.log("s_get_marfaking_acc_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_buy_marfaking=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_buy_marfaking);t.setId(e),c.Logger.log("s_buy_marfaking==",t),a.default.getInstance().sendToSocket(t)}},e.s_activity_everyday_login_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_activity_everyday_login_info);c.Logger.log("s_activity_everyday_login_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_challenge_fast=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_challenge_fast);c.Logger.log("s_challenge_fast==",e),a.default.getInstance().sendToSocket(e)}},e.s_activity_everyday_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_activity_everyday_reward);t.setIndex(e),c.Logger.log("s_activity_everyday_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_loongcheer_recharge=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_loongcheer_recharge);n.setProductid(e),n.setToken(t),n.setOrderid(i),c.Logger.log("s_loongcheer_recharge==",n),a.default.getInstance().sendToSocket(n)}},e.s_get_book_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_book_info);c.Logger.log("s_get_book_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_book_equip=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_get_book_equip);i.setType(e),i.setBookid(t),c.Logger.log("s_get_book_equip==",i),a.default.getInstance().sendToSocket(i)}},e.s_add_book_equip=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_add_book_equip);i.setEquipid(e),i.setBookid(t),c.Logger.log("s_add_book_equip==",i),a.default.getInstance().sendToSocket(i)}},e.s_strengthen_book=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_strengthen_book);t.setBookid(e),c.Logger.log("s_strengthen_book==",t),a.default.getInstance().sendToSocket(t)}},e.s_degree_elevation=function(e,t){if(void 0===t&&(t=1),_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_degree_elevation);i.setBookid(e),i.setFlag(t),c.Logger.log("s_degree_elevation==",i),a.default.getInstance().sendToSocket(i)}},e.s_activity_strategy_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_activity_strategy_info);c.Logger.log("s_activity_strategy_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_activity_strategy_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_activity_strategy_reward);t.setIndex(e),c.Logger.log("s_activity_strategy_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_optional_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_optional_info);c.Logger.log("s_req_optional_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_world_boss_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_world_boss_info);c.Logger.log("s_req_world_boss_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_world_boss_rank=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_world_boss_rank);c.Logger.log("s_req_world_boss_rank==",e),a.default.getInstance().sendToSocket(e)}},e.s_enter_world_boss=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_enter_world_boss);c.Logger.log("s_enter_world_boss==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_buy_world_boss_times=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_buy_world_boss_times);c.Logger.log("s_req_buy_world_boss_times==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_buy_world_boss_award=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_buy_world_boss_award);t.setId(e),c.Logger.log("s_req_buy_world_boss_award==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_quit_world_boss=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_quit_world_boss);c.Logger.log("s_req_quit_world_boss==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_gossip_boss_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_gossip_boss_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_req_gossip_boss_info==",e)}},e.s_req_gossip_boss_buy=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_gossip_boss_buy);e.setBuyTimes(1),a.default.getInstance().sendToSocket(e),c.Logger.log("s_req_gossip_boss_buy==",e)}},e.s_req_enter_gossip_boss=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_enter_gossip_boss);i.setType(e),i.setBossId(t),a.default.getInstance().sendToSocket(i),nt.default.instance.FightBossId=t,c.Logger.log("s_req_enter_gossip_boss==",e,t)}},e.s_get_puzzle_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_puzzle_info);c.Logger.log("s_get_puzzle_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_get_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_reward);t.setIndex(e),c.Logger.log("s_get_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_consumer_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_consumer_info);c.Logger.log("s_req_consumer_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_req_consumer_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_req_consumer_reward);t.setId(e),c.Logger.log("s_req_consumer_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_req_recharge_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_recharge_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_req_recharge_info==",e)}},e.s_merge_consumer_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_merge_consumer_info);c.Logger.log("s_merge_consumer_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_merge_consumer_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_merge_consumer_reward);t.setId(e),c.Logger.log("s_merge_consumer_reward==",t),a.default.getInstance().sendToSocket(t)}},e.s_auction_info=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_auction_info);t.setIdx(e),a.default.getInstance().sendToSocket(t),c.Logger.log("\u62cd\u5356\u884c ","index:",e,"s_auction_info==",t)}},e.s_auction_log=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_auction_log);a.default.getInstance().sendToSocket(e),c.Logger.log(" \u8bf7\u6c42\u62cd\u5356\u884c\u8bb0\u5f55\u6570\u636e s_auction_log==",e)}},e.s_auction_item_info=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_auction_item_info);t.setItemId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("itemId:",e,"\u62cd\u5356\u884c s_auction_item_info==",t)}},e.s_auction_bid=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_auction_bid);t.setId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("lx\u62cd\u5356\u884c \u7ade\u4ef7 s_auction_bid==",t)}},e.s_auction_buy=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_auction_buy);t.setId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("lx\u62cd\u5356\u884c \u4e00\u53e3\u4ef7 s_auction_buy==",t)}},e.s_auction_shelves=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_auction_shelves);t.setItemId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("\u62cd\u5356\u884c \u4e0a\u67b6 s_auction_shelves==",t)}},e.s_task_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_task_reward);t.setId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("\u6d3b\u8dc3\u4efb\u52a1 \u9886\u53d6\u4efb\u52a1\u5956\u52b1 s_task_reward==",t)}},e.s_task_liveness_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_task_liveness_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_task_liveness_info==",e)}},e.s_task_liveness_reward=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_task_liveness_reward);t.setId(e),a.default.getInstance().sendToSocket(t),c.Logger.log("s_task_liveness_reward==",t)}},e.s_all_task_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_all_task_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_all_task_info==",e)}},e.s_optional_gift=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_optional_gift);i.setItemType(e);for(var n=[],o=0;o<t.length;o++){var s=d.ProtoUtils.Create(l.ProtoConfig.t_select_item);s.setType(t[o].type),s.setId(t[o].id),s.setNum(t[o].num),n[o]=s}i.setSelectListList(n),c.Logger.log("s_optional_gift==",i),a.default.getInstance().sendToSocket(i)}},e.s_baguatu_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_baguatu_info);c.Logger.log("s_baguatu_info==",e),a.default.getInstance().sendToSocket(e)}},e.s_strengthen=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_strengthen);t.setIndex(e),c.Logger.log("s_strengthen==",t),a.default.getInstance().sendToSocket(t)}},e.s_refine=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_refine);t.setIndex(e),c.Logger.log("s_refine==",t),a.default.getInstance().sendToSocket(t)}},e.s_baguatu_skill_up=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_baguatu_skill_up);t.setId(e),c.Logger.log("s_baguatu_skill_up==",t),a.default.getInstance().sendToSocket(t)}},e.s_reback_item=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_reback_item),i=new Array;e.forEach(function(e){var t=d.ProtoUtils.Create(l.ProtoConfig.t_select_item);t.setId(e),i.push(t)}),t.setIdListList(i),c.Logger.log("s_reback_item==",t),a.default.getInstance().sendToSocket(t)}},e.s_exchange_item=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_exchange_item);t.setId(e),c.Logger.log("s_exchange_item==",t),a.default.getInstance().sendToSocket(t)}},e.s_bagua_compose=function(e,t,i){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var n=d.ProtoUtils.Create(l.ProtoConfig.s_bagua_compose);n.setId(e),n.setPos(i);var o=new Array;t.forEach(function(e){var t=d.ProtoUtils.Create(l.ProtoConfig.t_equipid_list);t.setId(e),o.push(t)}),n.setEquipidListList(o),a.default.getInstance().sendToSocket(n)}},e.s_get_bag_iteminfo=function(e){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var t=d.ProtoUtils.Create(l.ProtoConfig.s_get_bag_iteminfo);t.setItemid(e),a.default.getInstance().sendToSocket(t)}},e.s_req_pvp_skill=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_pvp_skill);a.default.getInstance().sendToSocket(e)}},e.s_req_pvp_skill_use=function(e,t){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var i=d.ProtoUtils.Create(l.ProtoConfig.s_req_pvp_skill_use);i.setSkillId(e),i.setSet(t),a.default.getInstance().sendToSocket(i)}},e.s_req_super_gift_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_req_super_gift_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_req_super_gift_info==",e)}},e.s_get_limit_gift_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_limit_gift_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_req_super_gift_info==",e)}},e.s_get_wx_reward_info=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_wx_reward_info);a.default.getInstance().sendToSocket(e),c.Logger.log("s_get_wx_reward_info==",e)}},e.s_get_wx_reward=function(){if(_.GameConfig.connectServer&&a.default.getInstance().isLogin){var e=d.ProtoUtils.Create(l.ProtoConfig.s_get_wx_reward);a.default.getInstance().sendToSocket(e),c.Logger.log("s_get_wx_reward==",e)}},e}();i.default=bt,window.SocketClient=bt,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/GlobalConfig":"GlobalConfig","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../GameController":"GameController","../config/BagConfig":"BagConfig","../config/ChongZhiConfig":"ChongZhiConfig","../config/ChristmasterConfig":"ChristmasterConfig","../config/ColorConfig":"ColorConfig","../config/DefaultConfig":"DefaultConfig","../config/EquipConfig":"EquipConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MagicNameConfig":"MagicNameConfig","../config/MapConfig":"MapConfig","../config/MineConfig":"MineConfig","../config/MineInfoConfig":"MineInfoConfig","../config/MonsterConfig":"MonsterConfig","../config/SkinConfig":"SkinConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/MonsterManager":"MonsterManager","../manager/RedPointManager":"RedPointManager","../manager/SkillManager":"SkillManager","../manager/TianGuanManager":"TianGuanManager","../model/ActivityOpenModel":"ActivityOpenModel","../model/ActivityShopModel":"ActivityShopModel","../model/AdModel":"AdModel","../model/AppDownloadModel":"AppDownloadModel","../model/AppraisalModel":"AppraisalModel","../model/AuctionHouseModel ":"AuctionHouseModel ","../model/AutoAppellationModel":"AutoAppellationModel","../model/AutoRobotChatModel":"AutoRobotChatModel","../model/BaGuaModel":"BaGuaModel","../model/BossKillModel":"BossKillModel","../model/BossModel":"BossModel","../model/BusinessModel":"BusinessModel","../model/CarnivalInfoModel":"CarnivalInfoModel","../model/ChargeGiftModel":"ChargeGiftModel","../model/ChatModel":"ChatModel","../model/ChatRoomModel":"ChatRoomModel","../model/ChengBaModel":"ChengBaModel","../model/CollectActivityShopModel":"CollectActivityShopModel","../model/ConsumerFeedbackMergedModel":"ConsumerFeedbackMergedModel","../model/ConsumerFeedbackModel":"ConsumerFeedbackModel","../model/ContinuousRechargeModel":"ContinuousRechargeModel","../model/CostumeModel":"CostumeModel","../model/DisCountPrefabModel":"DisCountPrefabModel","../model/EverydayLoginModel":"EverydayLoginModel","../model/ExoticExplorationModel":"ExoticExplorationModel","../model/FangShiModel":"FangShiModel","../model/FastKillModel":"FastKillModel","../model/FightModel":"FightModel","../model/FuGuiGameModel":"FuGuiGameModel","../model/GrowFundModel":"GrowFundModel","../model/GuideModel":"GuideModel","../model/GuildModel":"GuildModel","../model/GuildPvPModel":"GuildPvPModel","../model/HolidayModel":"HolidayModel","../model/HolidayMonsterModel":"HolidayMonsterModel","../model/HolidayRunGameModel":"HolidayRunGameModel","../model/HouseModel":"HouseModel","../model/InvitationModel":"InvitationModel","../model/ItemInfoModel":"ItemInfoModel","../model/JingJieModel":"JingJieModel","../model/LegendTaskModel":"LegendTaskModel","../model/LuckyPuzzleModel":"LuckyPuzzleModel","../model/MaFaModel":"MaFaModel","../model/MagicModel":"MagicModel","../model/MakeEquipModel":"MakeEquipModel","../model/MapStatisticsModel":"MapStatisticsModel","../model/MergeLuckyDrawModel":"MergeLuckyDrawModel","../model/MineModel":"MineModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/NewYearGiftModel":"NewYearGiftModel","../model/OptionalGiftBagModel":"OptionalGiftBagModel","../model/PkModel":"PkModel","../model/PostModel":"PostModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../model/SettingModel":"SettingModel","../model/SevenDayLoginModel":"SevenDayLoginModel","../model/ShenBinModel":"ShenBinModel","../model/ShenBinSkillModel":"ShenBinSkillModel","../model/ShenGongModel":"ShenGongModel","../model/SkillEffectModel":"SkillEffectModel","../model/SkillModel":"SkillModel","../model/SkyPassModel":"SkyPassModel","../model/SpecialRingModel":"SpecialRingModel","../model/SpiritsModel":"SpiritsModel","../model/StarInfoModel":"StarInfoModel","../model/StarPlanetInfoModel":"StarPlanetInfoModel","../model/StrategyModel":"StrategyModel","../model/TaskModel":"TaskModel","../model/TitleModel":"TitleModel","../model/TopUpModel":"TopUpModel","../model/TuJianEquipModel":"TuJianEquipModel","../model/UltimategiftModel":"UltimategiftModel","../model/XianshilibaoModel":"XianshilibaoModel","../model/ZoneModel":"ZoneModel","../model/newyear/NewYearTargetModel":"NewYearTargetModel","../prefab/GameManager":"GameManager","../sdk/FeiYouSdkManager":"FeiYouSdkManager","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/STUtils":"STUtils","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","../view/Discount/DisCountModel":"DisCountModel","../view/Rank/EquipRankModel":"EquipRankModel","../view/Rank/FightRankModel":"FightRankModel","../view/Rank/TuituModel":"TuituModel","../view/RedPacket/packetInfoModel":"packetInfoModel","../view/RedPacket/packetModel":"packetModel","../view/RedPacket/packetRankModel":"packetRankModel","../view/bigboss/WorldBossModel":"WorldBossModel","../view/shenbing/BaoshiInfoModel":"BaoshiInfoModel"}],SocketRequestData:[function(e,t,i){"use strict";cc._RF.push(t,"d0384L3+jRBorC55uMRHuBi","SocketRequestData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SoundPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"d262fKyivZNubHkDAhJPvoQ","SoundPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../game/config/MusicConfig"),s=e("../game/event/CommonEvent"),r=e("../game/model/SettingModel"),c=e("./ComponentBase"),l=e("./EventManager"),d=e("./LocalStorage"),f=e("./Logger"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioName="",t.audioUrl="",t}var i;return n(t,e),i=t,t.getAudioNode=function(){var e=null;return this.prefab&&(e=cc.instantiate(this.prefab)),e},t.play=function(e){var t=this;if(r.SettingModel.soundEffects){var n=a.default.musicKey2Path.get(e);n?cc.loader.loadRes(n,cc.AudioClip,function(o,a){if(o)f.Logger.warn(t,"load sound error===",o.message);else if(a){var s=t.getAudioNode();s&&(s.getComponent(cc.AudioSource).clip=a,s.getComponent(cc.AudioSource).volume=i.soundVolumn,s.getComponent(cc.AudioSource).loop=!1,s.getComponent(cc.AudioSource).rewind(),s.getComponent(cc.AudioSource).play(),s.getComponent(i).audioName=e,s.getComponent(i).audioUrl=n,t.nowAudioNodeList.push(s))}}):f.Logger.warn(this,"\u64ad\u653e\u4e0d\u5b58\u5728\u7684music=",e)}},t.changeVolumn=function(e){this.soundVolumn=e;for(var t=0;t<this.nowAudioNodeList.length;t++){var n=this.nowAudioNodeList[t].getComponent(cc.AudioSource);n.isPlaying&&(n.volume=e)}d.default.setItem(i.SOUND_VOLUMN_KEY,i.soundVolumn.toString())},t.preInit=function(e){this.prefab=e,l.EventManager.instance.on(s.CommonEvent.Event_FrameUpdate,this.updateFrame,this),i.soundVolumn=parseFloat(d.default.getItem(i.SOUND_VOLUMN_KEY)),isNaN(i.soundVolumn)&&(i.soundVolumn=1)},t.updateFrame=function(){for(var e=0;e<this.nowAudioNodeList.length;e++){this.nowAudioNodeList[e].getComponent(cc.AudioSource).isPlaying||i.nowAudioNodeList.splice(e,1)}},t.destory=function(){l.EventManager.instance.off(s.CommonEvent.Event_FrameUpdate,this.updateFrame,this);for(var e=0;e<this.nowAudioNodeList.length;e++){var t=this.nowAudioNodeList[e];t.getComponent(cc.AudioSource).stop(),t.getComponent(cc.AudioSource).destroy()}this.nowAudioNodeList=[],this.pool.clear()},t.prefab=null,t.SOUND_VOLUMN_KEY="soundVolumn",t.soundVolumn=1,t.Pool_Init_Num=30,t.pool=new cc.NodePool,t.nowAudioNodeList=[],t=i=o([h],t)}(c.default));i.default=u,cc._RF.pop()},{"../game/config/MusicConfig":"MusicConfig","../game/event/CommonEvent":"CommonEvent","../game/model/SettingModel":"SettingModel","./ComponentBase":"ComponentBase","./EventManager":"EventManager","./LocalStorage":"LocalStorage","./Logger":"Logger"}],SpecialEquipComplexView:[function(e,t,i){"use strict";cc._RF.push(t,"2f134idIBdCdbHrtfpTX+kF","SpecialEquipComplexView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/Logger"),s=e("../../../engine/ProtoConfig"),r=e("../../../engine/ProtoUtils"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/ColorConfig"),f=e("../../config/ITemsConfig"),g=e("../../config/SpecialRingConfig"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=e("../../model/ItemInfoModel"),m=e("../../model/RoleInfoModel"),C=e("../../network/HttpHelper"),_=e("../../network/SocketClient"),v=e("../../prefab/ItemPrefab"),y=e("../../utils/UIHelper"),b=cc._decorator,I=b.ccclass,M=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canSeletEquipList=[],t.currSeletEquipList=[],t}return n(t,e),t.prototype.onInitChild=function(e){this.mainEquipModel=e,this.modelId=this.mainEquipModel.itemId,this.specialRingConfig=g.SpecialRingConfig.getConfigByEquipId(this.mainEquipModel.itemType)},t.prototype.onLoad=function(){this.two=this.findChild(this.node,"bg/two"),this.two.active=!1,this.three=this.findChild(this.node,"bg/three"),this.three.active=!1,this.four=this.findChild(this.node,"bg/four"),this.four.active=!1,this.seletPanal=this.findChild(this.node,"seletPanal"),this.seletPanal.active=!1,this.itemcost=this.findChild(this.node,"bg/itemcost"),this.goldcost=this.findChild(this.node,"bg/goldcost")},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"bg/btnComplex"),this.onClickComPlex.bind(this)),this.onAddEvent(this.findChild(this.node,"bg/btn_onekey"),this.onClickOneKey.bind(this)),this.onAddEvent(this.findChild(this.node,"bg/btn_close"),this.closeView.bind(this))},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_special_ring_compose){var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_special_ring_compose,t),n=(i.getRet(),i.getEquipid());a.Logger.log("c_special_ring_compose===",i),n&&(this.modelId=n,this.mainEquipModel=p.default.getItemByid(this.modelId),this.currSeletEquipList=[],this.currSeletEquipList[0]=this.mainEquipModel,this.specialRingConfig=g.SpecialRingConfig.getConfigByEquipId(this.mainEquipModel.itemType),u.WordConfig.showWord(60362),this.refresh())}},t.prototype.onShow=function(){c.default.instance.setTopUI(h.default.gameView.SpecialEquipComplexView),this.currSeletEquipList=[],this.currSeletEquipList[0]=this.mainEquipModel,this.refresh(),this.seletPanal.active=!1,this.seletPanalScrollView=this.seletPanal.getChildByName("scrollView").getComponent(cc.ScrollView),this.seletItemPrefab=this.seletPanal.getChildByName("item"),this.seletItemPrefab.active=!1,this.onAddEvent(this.findChild(this.seletPanal,"darkLayer"),this.hideSeletPanel.bind(this)),this.onAddEvent(this.findChild(this.seletPanal,"btn_guanbi"),this.hideSeletPanel.bind(this))},t.prototype.refresh=function(){this.mainEquipModel=p.default.getItemByid(this.modelId);var e=g.SpecialRingConfig.getConfigByEquipId(this.mainEquipModel.itemType);if(-1!=Number(e.composegoal)){if(this.refreshPanel(),e.items)for(var t in this.itemcost.active=!0,e.items){var i=f.ITemsConfig.getITemsConfigById(t);this.itemcost.getChildByName("NewLabel").getComponent(cc.Label).string=i.name+u.WordConfig.getWord(60548),this.itemcost.getChildByName("value").getComponent(cc.Label).string=e.items[t],p.default.getItem(t)&&p.default.getItem(t).itemCnt>=e.items[t]?this.itemcost.getChildByName("value").color=d.ColorConfig.WhiteColor:this.itemcost.getChildByName("value").color=d.ColorConfig.RedColor}else this.itemcost.active=!1;var n=e.ress[1];this.goldcost.getChildByName("value").getComponent(cc.Label).string=y.UIHelper.tranNumber(n),n<=m.default.instance.getCoin()?this.goldcost.getChildByName("value").color=d.ColorConfig.WhiteColor:this.goldcost.getChildByName("value").color=d.ColorConfig.RedColor}else this.closeView()},t.prototype.onClickOneKey=function(){var e=0;for(var t in this.specialRingConfig.rings)e=this.specialRingConfig.rings[t];var i=this.getCanSeletEquip();if(i.length>0){for(t=1;t<e;t++)i[t-1]&&(this.currSeletEquipList[t]=i[t-1]);this.refreshPanel()}else u.WordConfig.showWord(60363);a.Logger.log("list===",i,e),a.Logger.log("this.currSeletEquipList===",this.currSeletEquipList)},t.prototype.onClickComPlex=function(){var e=0;if(this.specialRingConfig.items)for(var t in this.specialRingConfig.items)if(p.default.getItem(t)&&p.default.getItem(t).itemCnt<this.specialRingConfig.items[t])return void u.WordConfig.showWord(60188);if(this.specialRingConfig.ress[1]>m.default.instance.getCoin())u.WordConfig.showWord(60102);else{for(var t in this.specialRingConfig.rings)e=this.specialRingConfig.rings[t];if(this.currSeletEquipList.length==e&&this.currSeletEquipList.indexOf(null)<=-1){var i=[];for(t=0;t<this.currSeletEquipList.length;t++){this.currSeletEquipList[t]||C.default.sendBugLog("@SpecialEquipComplexView 1732 line  , \u6b64\u8bb0\u5f55\u8ddf\u8e2a this.currSeletEquipList["+t+"] = "+this.currSeletEquipList[t]+" \u53ef\u80fd\u5b58\u5728BUG "),i[t]=this.currSeletEquipList[t].itemId}_.default.s_special_ring_compose(this.specialRingConfig.composegoal,i)}else u.WordConfig.showWord(60363)}},t.prototype.selet=function(e,t){this.currSeletEquipList[t]=this.canSeletEquipList[e],this.hideSeletPanel(),this.refreshPanel()},t.prototype.showSeletPanel=function(e){this.seletPanalScrollView.scrollToLeft(),this.canSeletEquipList=this.getCanSeletEquip(),this.canSeletEquipList.length<=0?u.WordConfig.showWord(60363):(this.seletPanal.active=!0,this.refreshSeletPanal(e))},t.prototype.refreshSeletPanal=function(e){this.seletPanalScrollView.content.removeAllChildren();for(var t=0;t<this.canSeletEquipList.length;t++){var i=cc.instantiate(this.seletItemPrefab);i.active=!0;var n=p.default.getItemByid(this.canSeletEquipList[t].itemId);n&&(i.getChildByName("currItem").getComponent(v.default).init(n),i.on(cc.Node.EventType.TOUCH_END,this.selet.bind(this,t,e)),this.seletPanalScrollView.content.addChild(i))}this.seletPanalScrollView.scrollToLeft()},t.prototype.hideSeletPanel=function(){this.seletPanal.active=!1},t.prototype.getCanSeletEquip=function(){for(var e,t=[],i=0;i<this.currSeletEquipList.length;i++){(o=this.currSeletEquipList[i])&&t.push(o.itemId)}for(var i in this.specialRingConfig.rings)e=i;var n=[];for(i=0;i<m.default.instance.itemInfoList.length;i++){var o;(o=m.default.instance.itemInfoList[i])&&(o.itemType==e&&!o.isLock&&o.gridId<0&&t.indexOf(o.itemId)<=-1&&n.push(o))}return n},t.prototype.refreshPanel=function(){if(this.two.active=!1,this.three.active=!1,this.four.active=!1,this.specialRingConfig.items,this.specialRingConfig&&this.specialRingConfig.rings){var e=0;for(var t in this.specialRingConfig.rings)e=this.specialRingConfig.rings[t];var i=void 0;switch(e){case 2:i=this.two;break;case 3:i=this.three;break;case 4:i=this.four}i.active=!0,i.getChildByName("currEquip").getComponent(v.default).init(this.mainEquipModel,!0);var n=i.getChildByName("targetEquip"),o=p.default.createSpecialRing(this.specialRingConfig.composegoal);n.getComponent(v.default).init(o,!0);for(var a=1;a<e;a++){var s=i.getChildByName("seletPanel"+a);if(s.getChildByName("btn_jia").active=!0,this.onAddEvent(s.getChildByName("btn_jia"),this.showSeletPanel.bind(this,a)),s.getChildByName("ItemPrefab").active=!1,this.currSeletEquipList[a]){var r=p.default.getItemByid(this.currSeletEquipList[a].itemId);r&&(s.getChildByName("btn_jia").active=!1,s.getChildByName("ItemPrefab").active=!0,s.getChildByName("ItemPrefab").getComponent(v.default).init(r,!0))}}}},t=o([I],t)}(l.default));i.default=M,cc._RF.pop()},{"../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/ITemsConfig":"ITemsConfig","../../config/SpecialRingConfig":"SpecialRingConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/HttpHelper":"HttpHelper","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/UIHelper":"UIHelper"}],SpecialEquipView:[function(e,t,i){"use strict";cc._RF.push(t,"6c5c33My+RNSL8Vt2Uc3lYH","SpecialEquipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ProtoConfig"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/GameConst"),l=e("../../config/ViewConfig"),d=e("../../model/RoleInfoModel"),f=e("../../prefab/ItemPrefab"),g=e("../PublicTipView"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(){},t.prototype.onLoad=function(){this.shenliEquip=this.findChild(this.node,"shenliEquip"),this.hushenEquip=this.findChild(this.node,"hushenEquip"),this.mabiEquip=this.findChild(this.node,"mabiEquip"),this.fuhuoEquip=this.findChild(this.node,"fuhuoEquip")},t.prototype.onEnable=function(){this.onAddEvent(this.shenliEquip,this.onClickEquip.bind(this,c.TeJie.SHENLI)),this.onAddEvent(this.hushenEquip,this.onClickEquip.bind(this,c.TeJie.HUSHEN)),this.onAddEvent(this.mabiEquip,this.onClickEquip.bind(this,c.TeJie.MABI)),this.onAddEvent(this.fuhuoEquip,this.onClickEquip.bind(this,c.TeJie.FUHUO)),this.onAddEvent(this.findChild(this.node,"btn_close"),this.closeView.bind(this)),this.onAddEvent(this.findChild(this.node,"button_wenhao"),this.showRule.bind(this))},t.prototype.refresh=function(){var e=d.default.instance.getEquipModelByGrid(c.TeJie.SHENLI);e?(this.shenliEquip.active=!0,this.shenliEquip.getComponent(f.default).init(e)):this.shenliEquip.active=!1;var t=d.default.instance.getEquipModelByGrid(c.TeJie.HUSHEN);t?(this.hushenEquip.active=!0,this.hushenEquip.getComponent(f.default).init(t)):this.hushenEquip.active=!1;var i=d.default.instance.getEquipModelByGrid(c.TeJie.MABI);i?(this.mabiEquip.active=!0,this.mabiEquip.getComponent(f.default).init(i)):this.mabiEquip.active=!1;var n=d.default.instance.getEquipModelByGrid(c.TeJie.FUHUO);n?(this.fuhuoEquip.active=!0,this.fuhuoEquip.getComponent(f.default).init(n)):this.fuhuoEquip.active=!1},t.prototype.onShow=function(){this.refresh()},t.prototype.onSocketRespMsg=function(e,t){e!=a.ProtoConfig.c_req_equip&&e!=a.ProtoConfig.c_special_ring_compose||this.refresh()},t.prototype.onClickEquip=function(e){var t=d.default.instance.getEquipModelByGrid(e);t&&s.default.instance.createView(l.default.gameView.equipInfo,null,t)},t.prototype.showRule=function(){s.default.instance.createView(l.default.gameView.PublicTipView,null,g.RuleType.TYPE_TEJIE)},t=o([u],t)}(r.default));i.default=p,cc._RF.pop()},{"../../../engine/ProtoConfig":"ProtoConfig","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ViewConfig":"ViewConfig","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab","../PublicTipView":"PublicTipView"}],SpecialRingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9d120d0EA5Gp79J2KOqxC9U","SpecialRingConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/MagicModel"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)i[n]=e[n];return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getConfigByEquipId=function(e){var t;return this.configMap.forEach(function(i,n){e==i.pro_id&&(t=i)}),t},t.prototype.formatBaseValue=function(e){var t=[];for(var i in e){var n=new o.default;n.magicId=Number(i),n.magicValue=e[i],t.push(n)}return t},t.Config_Name="specialRingConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.SpecialRingConfig=a,cc._RF.pop()},{"../model/MagicModel":"MagicModel","./JsonConfigBase":"JsonConfigBase"}],SpecialRingEffectConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a1aa30RW5FEZKf4UegAXuL2","SpecialRingEffectConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skill_value=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)i[n]=e[n];return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.Config_Name="specialRingEffectConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.SpecialRingEffectConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],SpecialRingModel:[function(e,t,i){"use strict";cc._RF.push(t,"d94404VgVhKs7kw0ZFzw/n7","SpecialRingModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/DateUtil"),o=e("../../engine/Logger"),a=e("../config/GameConst"),s=e("../config/SpecialRingEffectConfig"),r=e("../manager/SkillEffectManager"),c=e("../prefab/RolePrefab"),l=function(){function e(){}return e.proto2ModelList=function(t){var i=[];o.Logger.log("SpecialRingModel===",t);for(var n=0;n<t.length;n++){var a=t[n],s=e.create(a.getPosition(),a.getSpecialeffectid());i.push(s)}return o.Logger.log("SpecialRingModel===2===",i),i},e.create=function(t,i){var n=new e;return n.position=t,n.specialId=i,n.lastTime=0,n},e.getModelByPosition=function(e,t){for(var i=0;i<t.length;i++)if(t[i].position==e)return t[i]},e.checkShenLi=function(t){var i=new d;if(t.nowRoleType!=c.default.RoleType.Monster){var r=e.getModelByPosition(a.TeJie.SHENLI,t.roleInfoModel.specialRingModelList);if(r){var l=n.default.now(),f=s.SpecialRingEffectConfig.getConfigById(r.specialId);f&&l-t.roleInfoModel.shenliTime>=1e3*f.cooldown&&Math.random()<=f.chance/1e4&&(t.roleInfoModel.shenliTime=l,i.isON=!0,i.extHurt=f.skill_value[0]/1e4,o.Logger.log("\u89e6\u53d1\u795e\u529b====","\u795e\u529b\u6212\u6307\u4f24\u5bb3\u52a0\u6210==",i.extHurt))}}return i},e.checkHuTi=function(t){var i=new f;if(t.nowRoleType!=c.default.RoleType.Monster){var r=e.getModelByPosition(a.TeJie.HUSHEN,t.roleInfoModel.specialRingModelList);if(r){var l=s.SpecialRingEffectConfig.getConfigById(r.specialId);if(l){var d=n.default.now();if(d-t.roleInfoModel.hushenTime>=1e3*l.cooldown)Math.random()<=l.chance/1e4&&(t.roleInfoModel.hushenTime=d,i.isON=!0,i.extDef=l.skill_value[0]/1e4,o.Logger.log("\u89e6\u53d1\u62a4\u8eab====","\u62a4\u8eab\u6212\u6307\u4f24\u5bb3\u964d\u4f4e==",i.extDef))}}}return i},e.checkMabi=function(t,i){var l=0;if(i.nowRoleType!=c.default.RoleType.Monster&&i.nowRoleType!=c.default.RoleType.Summoned&&i.nowRoleType!=c.default.RoleType.PvpAttackSummoned&&i.nowRoleType!=c.default.RoleType.PvpBeAttackSummoned){var d=e.getModelByPosition(a.TeJie.MABI,i.roleInfoModel.specialRingModelList);if(d){var f=s.SpecialRingEffectConfig.getConfigById(d.specialId);if(f){var g=n.default.now();Math.random()<=f.chance/1e4&&g-t.mabitime>=1e3*f.cooldown&&(t.mabitime=g,t.debuff_mabi=!0,r.default.instance.playRoleMabiEffect(t,f.durationtime,function(){t.debuff_mabi=!1}),o.Logger.log("\u89e6\u53d1\u9ebb\u75f9\u7729\u6655====")),t.debuff_mabi&&(l=f.skill_value[0]/1e4)}}}return l},e.checkFuHuo=function(t){var i=new g;if(t.nowRoleType!=c.default.RoleType.Monster){var r=e.getModelByPosition(a.TeJie.FUHUO,t.roleInfoModel.specialRingModelList);if(o.Logger.log("specialRingEffectConfig===",t.roleInfoModel.fuhuoTime,r,t.roleInfoModel.specialRingModelList),r){var l=n.default.now(),d=s.SpecialRingEffectConfig.getConfigById(r.specialId),f=t.roleInfoModel.fuhuoTime;d&&t.nowRoleType!=c.default.RoleType.Summoned&&t.nowRoleType!=c.default.RoleType.PvpAttackSummoned&&t.nowRoleType!=c.default.RoleType.PvpBeAttackSummoned&&l-f>=1e3*d.cooldown?(o.Logger.log("\u89e6\u53d1\u590d\u6d3b===",l,f,d.cooldown),t.roleInfoModel.fuhuoTime=l,i.isON=!0,i.wudiTime=d.durationtime,i.resetHp=d.skill_value[0]/1e4):i.isON=!1}}return i},e}();i.SpecialRingModel=l;var d=function(){return function(){this.isON=!1,this.extHurt=0}}();i.shenliModel=d;var f=function(){return function(){this.isON=!1,this.extDef=0}}();i.hutiModel=f;var g=function(){return function(){this.isON=!1,this.wudiTime=0,this.resetHp=0}}();i.fuhuoModel=g,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/Logger":"Logger","../config/GameConst":"GameConst","../config/SpecialRingEffectConfig":"SpecialRingEffectConfig","../manager/SkillEffectManager":"SkillEffectManager","../prefab/RolePrefab":"RolePrefab"}],SpiritsModel:[function(e,t,i){"use strict";cc._RF.push(t,"75451hHiz5Gi47sZc+yy2tS","SpiritsModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../event/CommonEvent"),a=e("../../engine/Logger"),s=function(){function e(){}return e.proto2ModelList=function(e){this.model.spirits=e.getSpirits(),this.model.spirits_eff=e.getSpiritsEff(),this.model.max_spirits=e.getMaxSpirits(),a.Logger.log("c_seq_spirits====",this.model),n.EventManager.instance.dispatch(o.CommonEvent.Event_RefreshShenbin)},e.model=new e,e}();i.default=s,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../event/CommonEvent":"CommonEvent"}],SpriteFrameComponent:[function(e,t,i){"use strict";cc._RF.push(t,"162320ZMoVHxKpwgaOBH92S","SpriteFrameComponent");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("./ComponentBase"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrameList=[],t}return n(t,e),t.prototype.changeState=function(){var e=0,t=this.node.getComponent(cc.Sprite);return t&&(t.spriteFrame=t.spriteFrame===this.spriteFrameList[0]?this.spriteFrameList[e+=1]:this.spriteFrameList[e]),e},o([c({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),t=o([r],t)}(a.default);i.SpriteFrameComponent=l,cc._RF.pop()},{"./ComponentBase":"ComponentBase"}],SpriteFrameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"050f0ZmAzFP2rHipvohV957","SpriteFrameConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.occupation_spriteframe=new Map,e.fight_frame=[],e.skill_frame=new Map,e}();i.SpriteFrameConfig=n,cc._RF.pop()},{}],StarAbilityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fcffa7tHwtNwKi9d8p9qPB2","StarAbilityConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillvalue=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.starSkillid=e.starskillid,i.quality=e.quality,i.role=e.role,i.level=e.level,i.maxLevel=e.max_level,i.des=e.des,i.name=e.name,i.ability=e.ability,i.chance=e.chance,i.cooldown=e.cooldown,i.duration=e.duration,i.skillvalue=e.skill_value,i},t.getConfig=function(e,t){var i;return this.configMap.forEach(function(n){n.starSkillid==e&&n.level==t&&(i=n)}),i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},t.SkillConfig={Skill_101:101,Skill_102:102,Skill_103:103,Skill_104:104,Skill_501:501,Skill_502:502,Skill_503:503,Skill_504:504,Skill_601:601,Skill_602:602,Skill_603:603,Skill_604:604,Skill_201:201,Skill_202:202,Skill_203:203,Skill_204:204,Skill_205:205,Skill_401:401,Skill_402:402,Skill_403:403,Skill_404:404,SKill_302:302},t.Config_Name="starAbilityConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],StarActivateView:[function(e,t,i){"use strict";cc._RF.push(t,"54d9fqu/LtP55G9mdtOc0tw","StarActivateView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ViewBase"),r=e("../config/StarAstrolabeConfig"),c=e("../config/WordConfig"),l=e("../event/CommonEvent"),d=e("../model/RoleInfoModel"),f=e("../network/SocketClient"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(l.CommonEvent.Event_refresh_pickStarSign,this.closeView,this)},t.prototype.initFindNode=function(){this.levelLabel=this.findChild(this.node,"panel/tip/level").getComponent(cc.Label),this.muchLabel=this.findChild(this.node,"panel/icon/much").getComponent(cc.Label),this.btnActivateNode=this.findChild(this.node,"panel/btnActivate")},t.prototype.onInitChild=function(e,t){var i=r.default.getConfigByPosId(e);this.levelLabel.string=i.lev.toString(),this.muchLabel.string=i.ress.toString(),this.onAddEvent(this.btnActivateNode,this.activateStarOnClicked.bind(this,i,t))},t.prototype.activateStarOnClicked=function(e,t){if(e){var i=e.ress;d.default.instance.getGold()>=i?(f.default.s_active_astralobe(t,e.pos),this.closeView()):c.WordConfig.showWord(60115)}},t=o([h],t)}(s.default));i.default=u,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/StarAstrolabeConfig":"StarAstrolabeConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient"}],StarAstrolabeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7d0f539c0BKu7VZHU15aBml","StarAstrolabeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/RoleInfoModel"),a=e("./DefaultConfig"),s=e("./GameConst"),r=e("./JsonConfigBase"),c=function(){return function(){}}();i.StarPageConfig=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.pos=e.pos,i.type=e.type,i.lev=e.lev,i.ress=e.ress,i.gem=e.gem,i.zhanShi=e.star_zhanshi,i.faShi=e.star_fashi,i.daoShi=e.star_daoshi,i},t.getConfigByPosId=function(e){return this.configMap.get(e)},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i){var n;switch(o.default.instance.occupation){case s.GameConst.OCCUPATION.ZHAN_SHI:n=i.zhanShi;break;case s.GameConst.OCCUPATION.FA_SHI:n=i.faShi;break;case s.GameConst.OCCUPATION.DAO_SHI:n=i.daoShi}e==n&&(t=i)}),t},t.getStarListByType=function(e){var t=new Array;return this.configMap.forEach(function(i){i.type===e&&t.push(i)}),t.sort(function(e,t){return e.pos-t.pos}),t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.pos=parseInt(i),t.configMap.set(o.pos,o)});var i=a.DefaultConfig.getConfigById(114).value;for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var o=i[n];(r=void 0==this.starPageMap.get(parseInt(n))?new c:this.starPageMap.get(parseInt(n))).id=parseInt(n),r.name=o,this.starPageMap.set(r.id,r)}var s=a.DefaultConfig.getConfigById(115).value;for(var n in s)if(Object.prototype.hasOwnProperty.call(s,n)){var r;o=s[n];(r=void 0==this.starPageMap.get(parseInt(n))?new c:this.starPageMap.get(parseInt(n))).id=parseInt(n),r.mush=o,this.starPageMap.set(r.id,r)}},t.getStarPageList=function(){var e=new Array;return this.starPageMap.forEach(function(t){e.push(t)}),e.sort(function(e,t){return e.id-t.id}),e},t.getStarPageConfig=function(e){return this.starPageMap.get(e)},t.Config_Name="astrolabeConfig",t.configMap=new Map,t.starPageMap=new Map,t}(r.JsonConfigBase);i.default=l,cc._RF.pop()},{"../model/RoleInfoModel":"RoleInfoModel","./DefaultConfig":"DefaultConfig","./GameConst":"GameConst","./JsonConfigBase":"JsonConfigBase"}],StarChainConfig:[function(e,t,i){"use strict";cc._RF.push(t,"497493fCvJNvoRexDmm27Q4","StarChainConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.starNum=e.star_num,i.value=e.value,i},t.getConfigByStarNum=function(e,t){var i,n;return void 0===t&&(t=!1),this.configMap.forEach(function(o){e<o.starNum?i?o.starNum<i.starNum&&(i=o):i=o:t||(n?n.starNum<o.starNum&&(n=o):n=o)}),i||(i=n),i},t.getCurrentConfigByStarNum=function(e){var t;return this.configMap.forEach(function(i){e>=i.starNum&&(t?i.starNum>=t.starNum&&(t=i):t=i)}),t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},t.Config_Name="starChainConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],StarChainView:[function(e,t,i){"use strict";cc._RF.push(t,"a4b6ddLkUxMf7TXP7a8AeHy","StarChainView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/MagicNameConfig"),r=e("../config/StarChainConfig"),c=e("../config/WordConfig"),l=e("../model/MagicModel"),d=e("../model/StarPlanetInfoModel"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.defaultLabel=c.WordConfig.getWord(60478),this.maxLrvelLabel=c.WordConfig.getWord(60479),this.initFindNode()},t.prototype.onInitChild=function(e){this.initView(e)},t.prototype.initFindNode=function(){this.infoListNode=this.findChild(this.node,"panel/infoList"),this.arrowsNode=this.findChild(this.node,"panel/arrows")},t.prototype.initView=function(e){var t=this,i=d.default.getStarUserPoint(e),n=r.default.getCurrentConfigByStarNum(i),o=r.default.getConfigByStarNum(i,!0);(this.infoListNode.children.forEach(function(e,i){var a;(a=0==i?n:o)?t.initInfo(e,a):e.active=!1}),o)||(this.findChild(this.infoListNode.children[0],"tip/level").getComponent(cc.RichText).string=cc.js.formatStr(this.maxLrvelLabel,n.starNum),this.arrowsNode.active=!1)},t.prototype.initInfo=function(e,t){e.active=!0;for(var i=this.findChild(e,"tip/level").getComponent(cc.RichText),n=this.findChild(e,"property/list"),o=this.findChild(e,"property/list/text"),a=n.childrenCount>t.value.length?n.childrenCount:t.value.length,r=0;r<a;r++){var c=void 0;if(r<n.childrenCount?c=n.children[r]:(c=cc.instantiate(o)).parent=n,r<t.value.length)for(var d in c.active=!0,t.value[r]){var f=l.default.formatMagicValue(parseInt(d),t.value[r][d]);c.getComponent(cc.Label).string=cc.js.formatStr("%s+%s",s.MagicNameConfig.getDesc(parseInt(d)),f)}else c.active=!1}i.string=cc.js.formatStr(this.defaultLabel,t.starNum)},t=o([g],t)}(a.default));i.default=h,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/MagicNameConfig":"MagicNameConfig","../config/StarChainConfig":"StarChainConfig","../config/WordConfig":"WordConfig","../model/MagicModel":"MagicModel","../model/StarPlanetInfoModel":"StarPlanetInfoModel"}],StarExchangeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"61825l6ytBKEZTm7AFc6aqd","StarExchangeConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=e.id,i.exp=e.exp,i.name=e.name,i.type=e.type,i},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfigsByType=function(e){var t=new Array;return this.configMap.forEach(function(i){i.type==e&&t.push(i)}),t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=i,t.configMap.set(n.id,n)})},t.Config_Name="starExchangeConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],StarInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"d4388BPxcpLnq+FN/1R29Ka","StarInfoModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/DefaultConfig"),c=e("../config/StarExchangeConfig"),l=e("../config/StarLevelConfig"),d=e("../event/CommonEvent"),f=e("../manager/RedPointManager"),g=e("./RoleInfoModel"),h=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[f.RedPointId.Star,f.RedPointId.Star_xingchenExp,f.RedPointId.Star_xingchendan],this.protos=[a.ProtoConfig.c_star_info,a.ProtoConfig.c_star_exchange,a.ProtoConfig.c_update_item_info],f.default.getInstance().addHandler(this)}return e.proto2Level=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_star_up_level,e);this.lev=t.getLev(),this.exp=t.getExp(),o.Logger.log("c_star_up_level=====",t),n.EventManager.instance.dispatch(d.CommonEvent.Event_Star_Level),n.EventManager.instance.dispatch(d.CommonEvent.Event_refresh_starInfo)},e.proto2Model=function(t){this.model=this.model?this.model:new e;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_star_info,t);this.lev=i.getLev(),this.exp=i.getExp(),this.exchange=i.getExchange(),o.Logger.log("c_star_info=====",i),n.EventManager.instance.dispatch(d.CommonEvent.Event_refresh_starInfo)},e.proto2Exchange=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_star_exchange,e);this.exp+=t.getExchangeExp(),o.Logger.log("c_star_exchange=====",t),n.EventManager.instance.dispatch(d.CommonEvent.Event_refresh_starInfo)},e.getExchange=function(){var e=0,t=r.DefaultConfig.getConfigById(49).value,i=g.default.instance.level,n=new Array;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=t[o],s={level:parseInt(o),num:a};n.push(s)}return n.sort(function(e,t){return e.level-t.level}),n.every(function(t,o){return i==t.level?(e=t.num,!1):o==n.length-1?(e=t.num,!1):!(i>t.level&&i<n[o+1].level)||(e=t.num,!1)}),e},e.prototype.checkRedPoint=function(){var t,i=[],n=l.default.getConfigById(e.lev+1),o=l.default.getConfigById(e.lev),a=e.getExchange(),s=n&&g.default.instance.level>=r.DefaultConfig.getConfigById(50).value&&a-e.exchange>0&&g.default.instance.getExp()>o.expExchange[0],d={id:f.RedPointId.Star_xingchenExp,type:f.RedPointType.Default,show:s};i.push(d);var h=!1;if(n&&g.default.instance.level>=r.DefaultConfig.getConfigById(50).value)for(var u=c.default.getConfigsByType("star_full"),p=0;p<u.length;p++)if(g.default.instance.getItemAmount(u[p].id)>0){h=!0;break}var m={id:f.RedPointId.Star_xingchendan,type:f.RedPointType.Default,show:h};i.push(m),t=s||h;var C={id:f.RedPointId.Star,type:f.RedPointType.Default,show:t};return i.push(C),i},e}();i.default=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/DefaultConfig":"DefaultConfig","../config/StarExchangeConfig":"StarExchangeConfig","../config/StarLevelConfig":"StarLevelConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./RoleInfoModel":"RoleInfoModel"}],StarLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9c341TqqJ1MwrR3xI9vQlis","StarLevelConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.lv=e.lv,i.exp=e.exp,i.starNum=e.star_num,i.attrList=e.attr_list,i.expExchange=e.exp_exchange,i.starAll=e.star_all,i},t.getConfigById=function(e){return this.configMap.get(e)},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.lv=parseInt(i),t.configMap.set(o.lv,o)})},t.getStarLevelConfig=function(e){return this.configMap.get(e)},t.getStarNumByLv=function(e){var t=0;return this.configMap.forEach(function(i){e>i.lv&&(t+=i.starNum)}),t},t.Config_Name="starLevelConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],StarPageView:[function(e,t,i){"use strict";cc._RF.push(t,"3b2caleUb1BfqlxTh5zI+0i","StarPageView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ResourcesManager"),r=e("../../engine/ViewBase"),c=e("../config/StarAbilityConfig"),l=e("../config/StarAstrolabeConfig"),d=e("../config/WordConfig"),f=e("../event/CommonEvent"),g=e("../model/RoleInfoModel"),h=e("../model/StarPlanetInfoModel"),u=e("../network/SocketClient"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemListNode=null,t.itemNode=null,t}return n(t,e),t.prototype.onEnable=function(){a.EventManager.instance.on(f.CommonEvent.Event_refresh_starPage,this.initView,this),u.default.s_star_sign_page(),this.initFindNode(),this.initView()},t.prototype.initFindNode=function(){this.itemListNode=this.findChild(this.node,"panel/ScrollView/view/content"),this.itemNode=this.findChild(this.node,"panel/item")},t.prototype.initView=function(){for(var e=l.default.getStarPageList(),t=this.itemListNode.childrenCount>e.length?this.itemListNode.childrenCount:e.length,i=0;i<t;i++){var n=null;i<this.itemListNode.childrenCount?n=this.itemListNode.children[i]:((n=cc.instantiate(this.itemNode)).parent=this.itemListNode,n.setPosition(0,0)),n.active=i<e.length,i<e.length&&this.initItem(n,e[i])}},t.prototype.initItem=function(e,t){var i=this,n=this.getChild(e,"name",cc.Label),o=this.getChild(e,"unlock",cc.Node),a=this.getChild(e,"lock",cc.Node),s=this.getChild(e,"btnList/btnUse",cc.Node),r=this.getChild(e,"btnList/btnUnlock",cc.Node),c=this.getChild(r,"icon/mush",cc.Label),l=this.getChild(e,"equipStarList",cc.Node),d=h.default.getStarPageById(t.id),f=this.getChild(s,"btnPve",cc.Node),g=this.getChild(s,"btnPvp",cc.Node);n.string=t.name,o.active=1==d.unlock,a.active=!o.active,r.active=1!=d.unlock,s.active=!r.active,c.string=t.mush.toString(),1==d.unlock&&l.children.forEach(function(e,n){var o=h.default.getEquipStarDataByPosId(t.id,2001+n);e.getChildByName("lock").active=void 0==o,i.initStarItem(e,o,d.id)}),s.active&&(this.setSelect(f,h.default.pveId==t.id),this.setSelect(g,h.default.pvpId==t.id),this.onAddEvent(f,this.onClickSwitch.bind(this,t.id,1)),this.onAddEvent(g,this.onClickSwitch.bind(this,t.id,2))),this.onAddEvent(r,this.onClickUnLock.bind(this,t)),this.onAddEvent(l,this.onClickPreview.bind(this,d))},t.prototype.setSelect=function(e,t){var i=this.findChild(e,"normal"),n=this.findChild(e,"select");i.active=!t,n.active=t},t.prototype.initStarItem=function(e,t,i){e.active=!0;var n=t?t.starSign:0,o=this.findChild(e,"num").getComponent(cc.Sprite),a=this.findChild(e,"level").getComponent(cc.Sprite),r=this.findChild(e,"icon").getComponent(cc.Sprite),l=this.findChild(e,"quality").getComponent(cc.Sprite);if(void 0==n||0==n)return a.node.active=!1,r.node.active=!1,l.node.active=!1,void(o.node.active=!1);a.node.active=!0,r.node.active=!0,l.node.active=!0,o.node.active=!0;var d=h.default.getStarData(i,n),f=void 0==d?0:d.lev,g=c.default.getConfig(n,f),u=cc.js.formatStr("starXiu/img_star_icon_%s",n);s.default.instance.loadSprite(r,u,!0),o.node.active=f>0,a.node.active=g.quality>0&&f>0,l.node.active=g.quality>0;var p,m=cc.js.formatStr("starXiu/img_star_level_quality_0%s",g.quality);if(g.quality>0&&s.default.instance.loadSprite(a,m,!0),f>0){var C=cc.js.formatStr("starXiu/img_star_level_0%s",f);s.default.instance.loadSprite(o,C,!0)}p=cc.js.formatStr("starXiu/img_star_small_quality_0%s",g.quality),g.quality>0&&s.default.instance.loadSprite(l,p,!0)},t.prototype.onClickSwitch=function(e,t){1==t&&h.default.pveId==e||2==t&&h.default.pvpId==e||(u.default.s_star_sign_switch(e,t),this.closeView())},t.prototype.onClickUnLock=function(e){g.default.instance.getGold()>=e.mush?u.default.s_star_sign_unlock(e.id):d.WordConfig.showWord(60115)},t.prototype.onClickPreview=function(e){1==e.unlock?(a.EventManager.instance.dispatch(f.CommonEvent.Event_refresh_starPlanetInfo,e),u.default.s_star_sign_preview(e.id),this.closeView()):d.WordConfig.showWord(61435)},t=o([m],t)}(r.default));i.default=C,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ResourcesManager":"ResourcesManager","../../engine/ViewBase":"ViewBase","../config/StarAbilityConfig":"StarAbilityConfig","../config/StarAstrolabeConfig":"StarAstrolabeConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../model/StarPlanetInfoModel":"StarPlanetInfoModel","../network/SocketClient":"SocketClient"}],StarPanel:[function(e,t,i){"use strict";cc._RF.push(t,"5080ftcFglLxLUY8DEQBamu","StarPanel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/GameConst"),d=e("../config/ITemsConfig"),f=e("../config/MagicNameConfig"),g=e("../config/StarExchangeConfig"),h=e("../config/StarLevelConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../event/CommonEvent"),C=e("../model/ItemInfoModel"),_=e("../model/MagicModel"),v=e("../model/RoleInfoModel"),y=e("../model/StarInfoModel"),b=e("../network/SocketClient"),I=e("../prefab/ItemPrefab"),M=e("../utils/UIHelper"),w=e("./PublicTipView"),k=cc._decorator,S=k.ccclass,P=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowLevel=0,t.selectItemType="1",t.currentBeadId="I3122",t.currentStarId="I3151",t}return n(t,e),t.prototype.onLoad=function(){this.itemList=this.findChild(this.node,"bottom/itemList"),this.exchangeNum=this.findChild(this.node,"layout/exchangeNum").getComponent(cc.Label),this.levelUpBtn=this.findChild(this.node,"bottom/levelUpBtn"),this.conversionBtn=this.findChild(this.node,"bottom/conversionBtn"),this.selectEffect=this.itemList.children[0].getChildByName("selectEffect"),this.btnRuleNode=this.findChild(this.node,"layout/btnRule"),this.btnRuleNode,this.initBtn()},t.prototype.onEnable=function(){a.EventManager.instance.on(m.CommonEvent.Event_Star_Level,this.handlerLevelUp,this),a.EventManager.instance.on(m.CommonEvent.Event_refresh_starInfo,this.initView,this),a.EventManager.instance.on(m.CommonEvent.Event_Star_Select,this.refreshItem,this),b.default.s_star_info()},t.prototype.initView=function(){this.nowLevel=y.default.lev;var e=y.default.getExchange(),t=e-y.default.exchange;this.exchangeNum.string=t<=0?"0/"+e:t+"/"+e,this.initPContent()},t.prototype.refreshItem=function(e){switch(e.type){case"expball_full":this.currentBeadId=e.id;break;case"star_full":this.currentStarId=e.id}this.refreshBottom()},t.prototype.initBtn=function(){var e=this;this.itemList.children.forEach(function(t,i){e.onAddEvent(t,e.onBtnItem.bind(e,t,i)),"item2"==t.name&&(t.active=!1)}),this.onAddEvent(this.conversionBtn,this.onBtnConversion.bind(this)),this.onAddEvent(this.btnRuleNode,this.onBtnRule.bind(this)),this.onAddEvent(this.levelUpBtn,function(){e.nextConfig?b.default.s_star_up_level():p.WordConfig.showWord(60266)})},t.prototype.initPContent=function(){var e=this.findChild(this.node,"top01"),t=this.findChild(this.node,"maxLevel"),i=this.findChild(this.node,"rMaxLevel"),n=this.findChild(this.node,"bottom/maxLevel"),o=this.findChild(this.node,"top/txtStarNext"),a=this.findChild(this.node,"bottom/itemList"),r=this.findChild(this.node,"top/txtStar/starNum").getComponent(cc.Label),c=this.findChild(this.node,"top/txtStarNext/starNum").getComponent(cc.Label),l=this.findChild(this.node,"top01/txtStar/starNum").getComponent(cc.Label),d=this.findChild(this.node,"top01/txtStarNext/starNum").getComponent(cc.Label),f=this.findChild(this.node,"leftShow/leftTxt"),g=this.findChild(this.node,"rightShow/rightTxt"),u=this.findChild(this.node,"rightShow"),p=this.findChild(this.node,"levelProgress/progressText").getComponent(cc.Label),m=this.findChild(this.node,"levelProgress/progressBar").getComponent(cc.ProgressBar),C=this.findChild(this.node,"leftXingchen"),_=this.findChild(this.node,"leftXingchen/xingchenLab/chenNumlab"),v=this.findChild(this.node,"rightXingchen"),b=this.findChild(this.node,"rightXingchen/xingchenLab/chenNumlab");r.string=this.nowLevel+"",c.string=this.nowLevel+1+"",l.string=this.nowLevel+"",d.string=this.nowLevel+1+"",this.curConfig=h.default.getConfigById(this.nowLevel),this.curConfig&&this.curConfig.attrList?(s.Logger.log("initPContent====",this.curConfig),this.initDesc(this.curConfig,f),C.active=!0,_.getComponent(cc.Label).string=this.curConfig.starAll.toString()):(s.Logger.log("StarLevelConfig====null"),C.active=!1),this.nextConfig=h.default.getConfigById(this.nowLevel+1),this.nextConfig&&this.nextConfig.attrList?(this.initDesc(this.nextConfig,g),v.active=!0,b.getComponent(cc.Label).string=this.nextConfig.starAll.toString()):(this.exchangeNum.string="---",s.Logger.log("Next StarLevelConfig====null"),u.children.forEach(function(e){e.active=!1}),v.active=!1),e.active=void 0!=this.nextConfig,t.active=!e.active,o.active=e.active,a.active=e.active,n.active=t.active,i.active=t.active,this.refreshBottom();var I=void 0==this.nextConfig?y.default.exp:this.curConfig.exp;p.node.active=void 0!=this.nextConfig,p.string=cc.js.formatStr("%s/%s",y.default.exp,I);var M=void 0==this.nextConfig?1:y.default.exp/this.curConfig.exp;m.progress=M,this.levelUpBtn.active=y.default.exp>=this.curConfig.exp,this.conversionBtn.active=!this.levelUpBtn.active},t.prototype.initDesc=function(e,t){for(var i=t.parent.childrenCount>e.attrList.length?t.parent.childrenCount:e.attrList.length,n=0;n<i;n++){var o=void 0;if(n<t.parent.childrenCount?o=t.parent.children[n]:(o=cc.instantiate(t)).parent=t.parent,n<e.attrList.length)for(var a in o.active=!0,e.attrList[n])o.getComponent(cc.Label).string=f.MagicNameConfig.getDesc(parseInt(a))+":",o.getChildByName("num").getComponent(cc.Label).string=_.default.formatMagicValue(parseInt(a),e.attrList[n][a]);else o.active=!1}},t.prototype.refreshBottom=function(){var e=this;this.itemList.children.forEach(function(t,i){var n,o=t.getChildByName("ItemPrefab").getComponent(I.default);if(0==i){var a=h.default.getConfigById(e.nowLevel);o.initResource(l.GameConst.RES_TYPE.EXP,a.expExchange[0],a.expExchange[0]>v.default.instance.getExp()),e.findChild(t,"rate").getComponent(cc.Label).string=cc.js.formatStr(p.WordConfig.getWord(60480),a.expExchange[1])}else n=1==i?e.currentBeadId:e.currentStarId,e.initItem(t,n)})},t.prototype.initItem=function(e,t){var i=e.getChildByName("ItemPrefab").getComponent(I.default),n=this.findChild(e,"rate").getComponent(cc.Label),o=d.ITemsConfig.getITemsConfigById(t),a=C.default.create(l.GameConst.ITEM_KIND.ITEM,o.id,null,o.quality);a.itemCnt=void 0==v.default.instance.getItemAmount(t)?0:v.default.instance.getItemAmount(t),i.init(a,!0,null,!1);var s=g.default.getConfigById(t);n.string=cc.js.formatStr(p.WordConfig.getWord(60480),s.exp)},t.prototype.onBtnItem=function(e,t){switch(t){case 0:this.selectItemType="1",this.selectEffect.parent=e,this.selectEffect.setPosition(0,0),this.selectEffect.zIndex=-1;break;case 1:if(this.selectItemType="expball_full",this.selectEffect.parent==e){var i=g.default.getConfigsByType("expball_full");r.default.instance.createView(u.default.gameView.StarItemListView,null,i)}else this.selectEffect.parent=e,this.selectEffect.setPosition(0,0);this.selectEffect.zIndex=-1;break;case 2:if(this.selectItemType="star_full",this.selectEffect.parent==e){i=g.default.getConfigsByType("star_full");r.default.instance.createView(u.default.gameView.StarItemListView,null,i)}else this.selectEffect.parent=e,this.selectEffect.setPosition(0,0);this.selectEffect.zIndex=-1}},t.prototype.onBtnRule=function(){r.default.instance.createView(u.default.gameView.PublicTipView,null,w.RuleType.TYPE_STAR_Num)},t.prototype.onBtnConversion=function(){var e,t,i,n,o,a=y.default.getExchange()-y.default.exchange;if("1"==this.selectItemType)e=1,t="0",i=0;else{e=2;var s="expball_full"==this.selectItemType?this.currentBeadId:this.currentStarId;n=d.ITemsConfig.getITemsConfigById(s),t=(o=C.default.create(l.GameConst.ITEM_KIND.ITEM,n.id,null,n.quality)).itemType,o.itemCnt=void 0==v.default.instance.getItemAmount(s)?0:v.default.instance.getItemAmount(s),i=o.itemCnt>0?1:void 0}if(i>=0){var c=h.default.getConfigById(this.nowLevel);if("1"==this.selectItemType&&a<=0)p.WordConfig.showWord(60270);else if("1"==this.selectItemType&&c.expExchange[0]>v.default.instance.getExp()){p.WordConfig.showWord(60114);var f=d.ITemsConfig.getITemsConfigById(l.GameConst.RES_TYPE.EXP.toString());f&&f.jump_id&&f.jump_id.length>0&&r.default.instance.createView(u.default.gameView.ItemAcquire,null,null,f)}else b.default.s_star_exchange(e,t,i)}else{var g=cc.js.formatStr(p.WordConfig.getWord(60242),n.name);M.UIHelper.showTip(g),n&&n.jump_id&&n.jump_id.length>0&&r.default.instance.createView(u.default.gameView.ItemAcquire,null,null,n)}},t.prototype.handlerLevelUp=function(){var e=this;this.curConfig.attrList.forEach(function(t,i){var n,o=e.nextConfig.attrList[i];for(var a in t){var s=f.MagicNameConfig.getDesc(parseInt(a)),r=t[a],c=o[a];n=cc.js.formatStr("%s+%s",s,c-r),M.UIHelper.showTip(n)}})},t=o([S],t)}(c.default));i.default=P,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/MagicNameConfig":"MagicNameConfig","../config/StarExchangeConfig":"StarExchangeConfig","../config/StarLevelConfig":"StarLevelConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ItemInfoModel":"ItemInfoModel","../model/MagicModel":"MagicModel","../model/RoleInfoModel":"RoleInfoModel","../model/StarInfoModel":"StarInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/UIHelper":"UIHelper","./PublicTipView":"PublicTipView"}],StarPlanetInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"92e6cSq5HVIz7sS2W1McLxo","StarPlanetInfoModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/WordConfig"),c=e("../event/CommonEvent"),l=e("./RoleInfoModel");(function(e){e[e.star=0]="star",e[e.starBig=1]="starBig",e[e.starEquip=2]="starEquip"})(i.StarType||(i.StarType={}));var d=function(){return function(){}}();i.StarPlanetModel=d;var f=function(){function e(){}return e.proto2Model=function(e,t){var i=s.ProtoUtils.DeserializeBinary(t,e);if(o.Logger.log(t+"===========",i),t==a.ProtoConfig.c_pick_star_sign){var r=i.getIdx();return this.signRandMap.set(r,null),void n.EventManager.instance.dispatch(c.CommonEvent.Event_refresh_pickStarSign)}t==a.ProtoConfig.c_star_sign_info&&(this.type=i.getType());var f=this.starPlanetMap.get(i.getIdx()),g=new Array,h=new Array;for(var u in i.getSignListList())if(Object.prototype.hasOwnProperty.call(i.getSignListList(),u)){var p={id:(C=i.getSignListList()[u]).getId(),lev:C.getLev(),time:0};g.push(p)}for(var m in i.getAstralobeListList())if(Object.prototype.hasOwnProperty.call(i.getAstralobeListList(),m)){var C;p={pos:(C=i.getAstralobeListList()[m]).getPos(),starSign:C.getStarSign()};h.push(p)}h.sort(function(e,t){return e.pos-t.pos}),void 0!=this.id&&f&&this.id!=i.getIdx()&&!this.isSwitchPage?(f.id=i.getIdx(),f.point=i.getPoint(),f.signList=g,f.astralobeList=h):(this.id=i.getIdx(),this.point=i.getPoint(),this.signList=g,this.astralobeList=h,(f=new d).id=this.id,f.point=this.point,f.signList=this.signList,f.astralobeList=this.astralobeList,f.unlock=1,this.isSwitchPage=!1),this.starPlanetMap.set(f.id,f),1==this.type&&(this.id=i.getIdx(),this.point=i.getPoint(),this.signList=g,this.astralobeList=h,l.default.instance.sign_list=this.getStarModel()),n.EventManager.instance.dispatch(c.CommonEvent.Event_refresh_starPlanetInfo,f)},e.proto2SignRand=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_star_sign_rand,e),i=new Array,l=t.getIsRepeated(),d=t.getIdx();t.getPickListList().forEach(function(e){i.push(e.array[0])});var f={id:d,pickList:i,isReoeated:l};f.pickList.length<=0?r.WordConfig.showWord(60626):(o.Logger.log("c_star_sign_rand=====",t),this.signRandMap.set(d,f),n.EventManager.instance.dispatch(c.CommonEvent.Event_refresh_starSignRand,f))},e.proto2StarSign=function(e,t){var i=s.ProtoUtils.DeserializeBinary(t,e),f=i.getIdx(),g=this.starPlanetMap.get(f)?this.starPlanetMap.get(f):new d,h=function(e){var t=!0;if(Object.prototype.hasOwnProperty.call(i.getAstralobeListList(),e)){var n=i.getAstralobeListList()[e],o={pos:n.getPos(),starSign:n.getStarSign()};g.astralobeList.every(function(e,i){return e.pos!=o.pos||(t=!1,g.astralobeList[i]=o,!1)}),t&&g.astralobeList.push(o),t=!0}};for(var u in i.getAstralobeListList())h(u);this.starPlanetMap.set(f,g),f==this.pveId&&(l.default.instance.sign_list=this.getStarModel()),o.Logger.log(t+"===========",i),a.ProtoConfig.c_active_astralobe==t&&r.WordConfig.showWord(60264),n.EventManager.instance.dispatch(c.CommonEvent.Event_refresh_starPlanetInfo,g)},e.proto2StarSignPage=function(e,t){var i=s.ProtoUtils.DeserializeBinary(t,e),a=i.getPageListList();for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)){var l=a[r],f=new d;for(var g in f.id=l.getIdx(),f.unlock=l.getUnlock(),f.point=l.getPoint(),f.astralobeList=new Array,l.getAstralobeListList())if(Object.prototype.hasOwnProperty.call(l.getAstralobeListList(),g)){var h=l.getAstralobeListList()[g],u={pos:h.getPos(),starSign:h.getStarSign()};f.astralobeList.push(u)}for(var p in f.astralobeList.sort(function(e,t){return e.pos-t.pos}),f.signList=new Array,l.getSignListList())if(Object.prototype.hasOwnProperty.call(l.getSignListList(),p)){var m=l.getSignListList()[p];u={id:m.getId(),lev:m.getLev(),time:0};f.signList.push(u)}this.starPlanetMap.set(f.id,f)}this.pveId=i.getPveIdx(),this.pvpId=i.getPvpIdx(),o.Logger.log(t+"===========",i),n.EventManager.instance.dispatch(c.CommonEvent.Event_refresh_starPage)},e.proto2StarSignSwitch=function(e,t){var i=s.ProtoUtils.DeserializeBinary(t,e);0==i.getRet()?(r.WordConfig.showWord(61426),this.isSwitchPage=!0):r.WordConfig.showWord(61427),o.Logger.log(t+"===========",i)},e.proto2StarSignUnlock=function(e,t){var i=s.ProtoUtils.DeserializeBinary(t,e),a=i.getRet(),l=i.getIdx();if(0==a){r.WordConfig.showWord(61428);var d=this.starPlanetMap.get(l);d&&(d.unlock=1,this.starPlanetMap.set(l,d)),n.EventManager.instance.dispatch(c.CommonEvent.Event_refresh_starPage)}else r.WordConfig.showWord(61429);o.Logger.log(t+"===========",i)},e.getStarPageById=function(e){return this.starPlanetMap.get(e)},e.getPageEquipDataByPosId=function(e,t){var i;return this.starPlanetMap.get(e).astralobeList.every(function(e){return e.pos!=t||(i=e,!1)}),i},e.getStarData=function(e,t){var i;return this.getStarPageById(e).signList.every(function(e){return e.id!=t||(i=e,!1)}),i},e.getEquipStarDataByPosId=function(e,t){var i;return this.getStarPageById(e).astralobeList.every(function(e){return e.pos!=t||(i=e,!1)}),i},e.getEquipDataById=function(e,t){var i;return this.getStarPageById(e).astralobeList.every(function(e){return e.starSign!=t||(i=e,!1)}),i},e.getStarModelById=function(e,t){if(t)for(var i=0;i<t.sign_list.length;i++)if(t.sign_list[i].id==e)return t.sign_list[i];return null},e.getStarModel=function(){var e=this,t=[];return this.astralobeList.forEach(function(i){var n=e.getStarData(e.id,i.starSign);if(n){var o={id:n.id,lev:n.lev,time:n.time};t.push(o)}}),t},e.getStarUserPoint=function(e){var t=0;return this.getStarPageById(e).signList.forEach(function(e){t+=e.lev}),t},e.getAstralobePos=function(e){var t;return this.getStarPageById(e).astralobeList.every(function(e){return 0!=e.starSign||(t=e.pos,!1)}),t},e.getAstralobePosById=function(e,t){var i;return this.getStarPageById(e).astralobeList.every(function(e){return e.starSign!=t||(i=e.pos,!1)}),i},e.getSignRandData=function(e){return this.signRandMap.get(e)},e.signList=[],e.astralobeList=[],e.signRandMap=new Map,e.starPlanetMap=new Map,e.isSwitchPage=!1,e}();i.default=f,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","./RoleInfoModel":"RoleInfoModel"}],StarPlanetPanel:[function(e,t,i){"use strict";cc._RF.push(t,"9285duobnJF2Z3pKXiIe5rC","StarPlanetPanel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ResourcesManager"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/GameConst"),d=e("../config/StarAbilityConfig"),f=e("../config/StarAstrolabeConfig"),g=e("../config/StarChainConfig"),h=e("../config/StarLevelConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../event/CommonEvent"),C=e("../model/RoleInfoModel"),_=e("../model/StarInfoModel"),v=e("../model/StarPlanetInfoModel"),y=e("../network/SocketClient"),b=e("../utils/UIHelper"),I=e("./PublicTipView"),M=cc._decorator,w=M.ccclass,k=M.property,S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(cc.Node);i.NodeEx=S;var P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bottomNode=null,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(m.CommonEvent.Event_refresh_starPlanetInfo,this.initView,this),a.EventManager.instance.on(m.CommonEvent.Event_refresh_starSignRand,this.handleStarSign,this),y.default.s_star_sign_page(),y.default.s_star_sign_info()},t.prototype.checkSelectView=function(){var e=v.default.getSignRandData(this.model.id);if(e){var t={pickList:e.pickList,iisReoeated:2,id:v.default.id};r.default.instance.createView(u.default.gameView.StarSelectView,null,t)}},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),this.selectFrameOnClose()},t.prototype.initFindNode=function(){this.defaultFrameNode=this.findChild(this.node,"defaultFrame"),this.starNumLabel=this.findChild(this.node,"defaultFrame/starNum").getComponent(cc.Label),this.levelNumLabel=this.findChild(this.node,"defaultFrame/levelNum").getComponent(cc.Label),this.starListNode=this.findChild(this.node,"starInfo/starList"),this.signRandBtnNode=this.findChild(this.node,"defaultFrame/signRandBtn"),this.bigAniListNode=this.findChild(this.node,"starInfo/bigAni"),this.equipStarListNode=this.findChild(this.node,"equipStarList"),this.bigSelectNode=this.findChild(this.node,"bigSelect"),this.smallSelectNode=this.findChild(this.node,"smallSelect"),this.selectFrameNode=this.findChild(this.node,"selectFrame"),this.levelBtnNode=this.findChild(this.node,"defaultFrame/levelBtn"),this.selectFrameBtnClose=this.findChild(this.selectFrameNode,"btnClose"),this.yulanBtn=this.findChild(this.selectFrameNode,"yulanNode"),this.btnScatteredNode=this.findChild(this.selectFrameNode,"btnScattered"),this.btnEquipNode=this.findChild(this.selectFrameNode,"btnStar"),this.btnDemountNode=this.findChild(this.selectFrameNode,"btnDemount"),this.effectListNode=this.findChild(this.node,"starInfo/effectList"),this.btnRule=this.findChild(this.node,"btnRule"),this.starEffect2=this.findChild(this.node,"starEffect2").getComponent(cc.Animation),this.starEffect2.on("finished",this.playEffect.bind(this)),this.btnPageNode=this.findChild(this.defaultFrameNode,"starPage/btnPage"),this.pageTextLabel=this.getChild(this.defaultFrameNode,"starPage/info/text",cc.Label),this.starEffect1=this.findChild(this.node,"starEffect1").getComponent(cc.Animation),this.startLoadPlayEff1()},t.prototype.startLoadPlayEff1=function(){if(this.starEffect1){var e=this.starEffect1;cc.loader.loadRes("animation-a/star-a/star-a",cc.AnimationClip,function(t,i){t||(e.addClip(i),e.play(i.name,0))})}},t.prototype.initBtn=function(){this.bottomNode.scale=1,this.selectFrameNode.active=!1,this.smallSelectNode.active=!1,this.bigSelectNode.active=!1,this.defaultFrameNode.active=!0,this.starEffect2.node.active=!1},t.prototype.initView=function(e){var t=this;this.model=e,this.checkSelectView();var i=f.default.getStarListByType(v.StarType.star),n=f.default.getStarListByType(v.StarType.starBig),o=v.default.getStarUserPoint(this.model.id),a=h.default.getStarLevelConfig(_.default.lev);this.starNumLabel.string=cc.js.formatStr("%s/%s",this.model.point,a.starAll);var s=g.default.getConfigByStarNum(o);this.levelNumLabel.string=cc.js.formatStr(p.WordConfig.getWord(60481),s.starNum,o,s.starNum);var c=f.default.getStarPageConfig(this.model.id);this.pageTextLabel.string=c.name,this.selectFrameOnClose(),this.starListNode.children.forEach(function(e,n){var o=i[n];o?t.initStarItem(e,o):e.active=!1}),this.bigAniListNode.children.forEach(function(e,i){var o=n[i];o?t.initStarItem(e,o,null,v.StarType.starBig):e.active=!1}),this.equipStarListNode.children.forEach(function(e,i){var n=v.default.getEquipStarDataByPosId(t.model.id,2001+i);e.getChildByName("lock").active=void 0==n;var o=void 0==n?void 0:n.starSign;t.initStarItem(e,null,o,v.StarType.starEquip),t.onAddEvent(e,t.activateStarOnClicked.bind(t,n,2001+i,e))}),this.onAddEvent(this.levelBtnNode,this.levelInfoOnClicked.bind(this)),this.onAddEvent(this.selectFrameBtnClose,this.selectFrameOnClose.bind(this)),this.onAddEvent(this.signRandBtnNode,this.starSignOnClicked.bind(this)),this.onAddEvent(this.btnScatteredNode,this.lessStarSignOnClicked.bind(this)),this.onAddEvent(this.btnEquipNode,this.equipOnClicked.bind(this,1)),this.onAddEvent(this.btnDemountNode,this.equipOnClicked.bind(this,2)),this.yulanBtn.off(cc.Node.EventType.TOUCH_END,this.yulanFun.bind(this)),this.yulanBtn.on(cc.Node.EventType.TOUCH_END,this.yulanFun.bind(this)),this.onAddEvent(this.btnRule,function(){r.default.instance.createView(u.default.gameView.PublicTipView,null,I.RuleType.TYPE_STAR)}),this.onAddEvent(this.btnPageNode,function(){r.default.instance.createView(u.default.gameView.StarPageView,null)})},t.prototype.initStarItem=function(e,t,i,n){var o;if(void 0===i&&(i=void 0),void 0===n&&(n=v.StarType.star),e.active=!0,t)switch(C.default.instance.occupation){case l.GameConst.OCCUPATION.ZHAN_SHI:o=t.zhanShi;break;case l.GameConst.OCCUPATION.FA_SHI:o=t.faShi;break;case l.GameConst.OCCUPATION.DAO_SHI:o=t.daoShi}else o=i;var a=this.findChild(e,"num").getComponent(cc.Sprite),r=this.findChild(e,"level").getComponent(cc.Sprite),c=this.findChild(e,"icon").getComponent(cc.Sprite),f=this.findChild(e,"quality").getComponent(cc.Sprite);if(void 0==o||0==o)return r.node.active=!1,c.node.active=!1,f.node.active=!1,void(a.node.active=!1);r.node.active=!0,c.node.active=!0,f.node.active=!0,a.node.active=!0;var g=v.default.getStarData(this.model.id,o),h=void 0==g?0:g.lev,u=d.default.getConfig(o,h);n==v.StarType.starEquip&&(c.node.active=void 0!=g);var p=cc.js.formatStr("starXiu/img_star_icon_%s",o);s.default.instance.loadSprite(c,p,!0),a.node.active=h>0,r.node.active=u.quality>0&&h>0,f.node.active=u.quality>0;var m,_=cc.js.formatStr("starXiu/img_star_level_quality_0%s",u.quality);if(u.quality>0&&s.default.instance.loadSprite(r,_,!0),h>0){var y=cc.js.formatStr("starXiu/img_star_level_0%s",h);s.default.instance.loadSprite(a,y,!0)}m=n==v.StarType.starBig?cc.js.formatStr("starXiu/img_star_big_quality_0%s",u.quality):cc.js.formatStr("starXiu/img_star_small_quality_0%s",u.quality),u.quality>0&&s.default.instance.loadSprite(f,m,!0),n!=v.StarType.starEquip&&this.onAddEvent(e,this.starOnClicked.bind(this,u,e,n,t)),e.data=o},t.prototype.initSelectFrameView=function(e,t,i){this.yulan_starConfig=e,this.yulan_starType=t,this.yulan_config=i,this.selectFrameNode.active=!0,this.defaultFrameNode.active=!1,this.bottomNode.scale=0;var n=this.findChild(this.selectFrameNode,"name/label").getComponent(cc.Label),o=this.findChild(this.selectFrameNode,"level/label").getComponent(cc.Label),a=this.findChild(this.selectFrameNode,"desc/label").getComponent(cc.Label),s=this.findChild(this.selectFrameNode,"star"),r=this.findChild(this.selectFrameNode,"unlock"),c=this.findChild(this.selectFrameNode,"unEquip"),l=this.findChild(this.selectFrameNode,"star/num").getComponent(cc.Sprite),d=this.findChild(this.selectFrameNode,"star/level").getComponent(cc.Sprite),f=t==v.StarType.starBig?-42:-21;(l.node.setPosition(0,f),d.node.setPosition(0,f),this.btnScatteredNode.active=i&&e.level>0,c.active=t==v.StarType.starBig,r.active=t!=v.StarType.starBig&&e.level<=0,i&&e.level>0)&&(this.findChild(this.selectFrameNode,"btnScattered/much").getComponent(cc.Label).string=i.gem.toString());var g=v.default.getEquipDataById(this.model.id,e.starSkillid);this.btnDemountNode.active=void 0!=g,this.btnEquipNode.active=void 0==g&&t!=v.StarType.starBig&&e.level>0,n.string=e.name,o.string=this.numberToText(e.level),a.string=e.des,this.initStarItem(s,null,e.starSkillid,t),this.selectStarId=e.starSkillid,this.selectPosId=i.pos},t.prototype.numberToText=function(e){var t;switch(e){case 0:t=p.WordConfig.getWord(60482);break;case 1:t=p.WordConfig.getWord(60483);break;case 2:t=p.WordConfig.getWord(60484);break;case 3:t=p.WordConfig.getWord(60485);break;case 4:t=p.WordConfig.getWord(60486);break;case 5:t=p.WordConfig.getWord(60487);break;case 6:t=p.WordConfig.getWord(60488);break;case 7:t=p.WordConfig.getWord(60489);break;case 8:t=p.WordConfig.getWord(60490);break;case 9:t=p.WordConfig.getWord(60491);break;case 10:t=p.WordConfig.getWord(60492)}return t+p.WordConfig.getWord(60433)},t.prototype.playEffect=function(){var e=this,t=[];this.pickList.forEach(function(i){var n;e.starListNode.children.every(function(e){return e.data!=i||(n={isBig:!1,id:i,node:e},!1)}),e.bigAniListNode.children.every(function(e){return e.data!=i||(n={isBig:!0,id:i,node:e},!1)}),t.push(n)}),t.forEach(function(t,i){var n=e.effectListNode.children[i];n.active=!0,n.scale=t.isBig?1.5:1,cc.tween(n).to(.5,{position:t.node.position}).to(.2,{opacity:100}).to(.2,{opacity:255}).to(.2,{opacity:100}).to(.2,{opacity:255}).call(function(){var t={pickList:e.pickList,iisReoeated:2,id:e.model.id};r.default.instance.createView(u.default.gameView.StarSelectView,null,t),n.active=!1}).start()})},t.prototype.activateStarOnClicked=function(e,t,i){if(e){if(e.starSign>0){var n=v.default.getStarData(this.model.id,e.starSign),o=void 0==n?0:n.lev,a=d.default.getConfig(e.starSign,o),s=f.default.getConfigById(e.starSign);this.starOnClicked(a,i,v.StarType.starEquip,s)}}else if(s=f.default.getConfigByPosId(t)){o=s.lev;if(C.default.instance.level>=o)r.default.instance.createView(u.default.gameView.StarActivateView,null,t,this.model.id);else{var c=cc.js.formatStr(p.WordConfig.getWord(60267),o);b.UIHelper.showTip(c)}}},t.prototype.lessStarSignOnClicked=function(){var e=this,t=f.default.getConfigByPosId(this.selectPosId);if(C.default.instance.getGold()>=t.gem){var i=cc.js.formatStr(p.WordConfig.getWord(60493),t.gem);r.default.instance.createView(u.default.gameView.DialogCheck,null,i,function(t){t&&y.default.s_less_star_sign(e.model.id,e.selectStarId)})}else p.WordConfig.showWord(60115)},t.prototype.selectFrameOnClose=function(){this.initBtn()},t.prototype.starOnClicked=function(e,t,i,n){var o;o=i==v.StarType.starBig?this.bigSelectNode:this.smallSelectNode,this.bigSelectNode.active=i==v.StarType.starBig,this.smallSelectNode.active=!this.bigSelectNode.active,o.parent=t,o.setPosition(0,0),this.initSelectFrameView(e,i,n)},t.prototype.levelInfoOnClicked=function(){r.default.instance.createView(u.default.gameView.StarChainView,null,this.model.id)},t.prototype.starSignOnClicked=function(){this.model.point>0?y.default.s_star_sign_rand(this.model.id):p.WordConfig.showWord(60268)},t.prototype.equipOnClicked=function(e){if(1==e){(t=v.default.getAstralobePos(this.model.id))&&t>0?y.default.s_equip_star_sign(this.model.id,t,this.selectStarId,e):p.WordConfig.showWord(60269)}else{var t=v.default.getAstralobePosById(this.model.id,this.selectStarId);y.default.s_equip_star_sign(this.model.id,t,this.selectStarId,e)}},t.prototype.yulanFun=function(){r.default.instance.createView(u.default.gameView.StarYulanView,null,this.yulan_starConfig)},t.prototype.handleStarSign=function(e){1!=e.isReoeated?(this.pickList=e.pickList,this.starEffect2.node.active=!0,this.starEffect2.play()):r.default.instance.createView(u.default.gameView.StarSelectView,null,e)},o([k(cc.Node)],t.prototype,"bottomNode",void 0),t=o([w],t)}(c.default);i.default=P,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/StarAbilityConfig":"StarAbilityConfig","../config/StarAstrolabeConfig":"StarAstrolabeConfig","../config/StarChainConfig":"StarChainConfig","../config/StarLevelConfig":"StarLevelConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../model/StarInfoModel":"StarInfoModel","../model/StarPlanetInfoModel":"StarPlanetInfoModel","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","./PublicTipView":"PublicTipView"}],StarProfessionConfig:[function(e,t,i){"use strict";cc._RF.push(t,"421ddtIUUNFaKvnci8wCLYb","StarProfessionConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.role=e.role,i.starList=e.starList,i.starWeight=e.starWeight,i},t.getConfigById=function(e){return this.configMap.get(e)},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.role=parseInt(i),t.configMap.set(o.role,o)})},t.Config_Name="starProfessionConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],StarSelectView:[function(e,t,i){"use strict";cc._RF.push(t,"a5de94gdBpEWaJ4vrVob7EW","StarSelectView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ResourcesManager"),r=e("../../engine/ViewBase"),c=e("../config/ColorConfig"),l=e("../config/DefaultConfig"),d=e("../config/ITemsConfig"),f=e("../config/StarAbilityConfig"),g=e("../config/StarAstrolabeConfig"),h=e("../event/CommonEvent"),u=e("../model/ItemInfoModel"),p=e("../model/StarPlanetInfoModel"),m=e("../network/SocketClient"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(h.CommonEvent.Event_refresh_starSignRand,this.onInitChild,this),a.EventManager.instance.on(h.CommonEvent.Event_refresh_pickStarSign,this.closeView,this)},t.prototype.initFindNode=function(){this.starListNode=this.findChild(this.node,"panel/frame/starList"),this.starNode=this.findChild(this.starListNode,"star"),this.btnSaveNode=this.findChild(this.node,"panel/btnSave"),this.bntResetNode=this.findChild(this.node,"panel/bntReset"),this.descLabel=this.findChild(this.node,"panel/frame/desc").getComponent(cc.Label),this.muchNode=this.findChild(this.node,"panel/frame/much"),this.muchLabel=this.findChild(this.node,"panel/frame/muchLabel").getComponent(cc.RichText)},t.prototype.onInitChild=function(e){this.eventData=e,this.isCanStarSignRank=!0;for(var t=e.pickList,i=t.length>this.starListNode.childrenCount?t.length:this.starListNode.childrenCount,n=0;n<i;n++){var o=void 0;n<this.starListNode.childrenCount?o=this.starListNode.children[n]:(o=cc.instantiate(this.starNode)).parent=this.starListNode,n<t.length?this.initStarItem(o,t[n]):o.active=!1}var a=p.default.getStarData(e.id,t[0]),s=void 0==a?0:a.lev,r=f.default.getConfig(t[0],s);s<r.maxLevel&&(r=f.default.getConfig(t[0],s+1),this.initSelectNode(r,this.starListNode.children[0]));var g,h,m=l.DefaultConfig.getConfigById(66);for(var C in m.value)Object.prototype.hasOwnProperty.call(m.value,C)&&(h=C,g=parseInt(m.value[C]));var _=d.ITemsConfig.getITemsConfigById(h),v=u.default.getItemAmount(h);this.muchLabel.node.active=void 0!=_&&v>=g,this.muchNode.active=!this.muchLabel.node.active,this.muchLabel.string=this.muchLabel.node.active?cc.js.formatStr("<color=%s>%sx%s</c>",c.ColorConfig.getQualityHexColor(_.quality),_.name,v):"",this.onAddEvent(this.btnSaveNode,this.saveOnClicked.bind(this)),this.onAddEvent(this.bntResetNode,this.starSignOnClicked.bind(this))},t.prototype.initStarItem=function(e,t){e.active=!0;var i=p.default.getStarData(this.eventData.id,t),n=void 0==i?0:i.lev,o=f.default.getConfig(t,n),a=g.default.getConfigById(t);n<o.maxLevel&&(n=(o=f.default.getConfig(t,n+1)).level);var r=this.findChild(e,"level").getComponent(cc.Sprite),c=this.findChild(e,"num").getComponent(cc.Sprite),l=this.findChild(e,"icon").getComponent(cc.Sprite),d=this.findChild(e,"quality").getComponent(cc.Sprite),h=this.findChild(e,"name").getComponent(cc.Label),u=e.getChildByName("normal");e.getChildByName("light").active=a.type==p.StarType.starBig;var m=cc.js.formatStr("starXiu/img_star_icon_%s",t);if(h.string=o.name,s.default.instance.loadSprite(l,m,!0),a.type==p.StarType.starBig?l.node.scale=.5:l.node.scale=1,n>0){var C=cc.js.formatStr("starXiu/img_star_level_0%s",n);s.default.instance.loadSprite(c,C,!0)}if(c.node.active=n>0,r.node.active=o.quality>0,o.quality>0){var _=cc.js.formatStr("starXiu/img_star_small_quality_0%s",o.quality);s.default.instance.loadSprite(d,_,!0);var v=cc.js.formatStr("starXiu/img_star_level_quality_0%s",o.quality);s.default.instance.loadSprite(r,v,!0)}d.node.active=o.quality>0,this.onAddEvent(e,this.starOnClicked.bind(this,o,e)),this.onAddEvent(u,this.starOnClicked.bind(this,o,e))},t.prototype.initSelectNode=function(e,t){this.starListNode.children.forEach(function(e){e.getChildByName("select").active=!1}),t.getChildByName("select").active=!0,this.descLabel.string=e.des,this.selectStarId=e.starSkillid},t.prototype.starOnClicked=function(e,t){this.initSelectNode(e,t)},t.prototype.saveOnClicked=function(){m.default.s_pick_star_sign(this.eventData.id,this.selectStarId)},t.prototype.starSignOnClicked=function(){this.isCanStarSignRank&&(this.isCanStarSignRank=!1,m.default.s_star_sign_rand(this.eventData.id))},t=o([_],t)}(r.default));i.default=v,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ResourcesManager":"ResourcesManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/DefaultConfig":"DefaultConfig","../config/ITemsConfig":"ITemsConfig","../config/StarAbilityConfig":"StarAbilityConfig","../config/StarAstrolabeConfig":"StarAstrolabeConfig","../event/CommonEvent":"CommonEvent","../model/ItemInfoModel":"ItemInfoModel","../model/StarPlanetInfoModel":"StarPlanetInfoModel","../network/SocketClient":"SocketClient"}],StarUpModel:[function(e,t,i){"use strict";cc._RF.push(t,"436e5DWRDJHbp+Jy62wjCM/","StarUpModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../event/CommonEvent"),c=function(){function e(){}return e.proto2Model=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_star_up_level,e);this.lev=t.getLev(),this.exp=t.getExp(),o.Logger.log("StarUpModel=====",t),n.EventManager.instance.dispatch(r.CommonEvent.Event_Up_Level)},e}();i.default=c,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent"}],StarView:[function(e,t,i){"use strict";cc._RF.push(t,"97301IvcCNC46t3yGC1JMYy","StarView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=cc._decorator,r=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initBtn()},t.prototype.initBtn=function(){var e=this.findChild(this.node,"star1Btn"),t=this.findChild(this.node,"star2Btn");this.onAddEvent(e,this.onBtnTabClicked.bind(this,1)),this.onAddEvent(t,this.onBtnTabClicked.bind(this,2))},t.prototype.onEnable=function(){this.onBtnTabClicked(1)},t.prototype.onBtnTabClicked=function(e){var t=this.findChild(this.node,"star1Btn/normal"),i=this.findChild(this.node,"star1Btn/select"),n=this.findChild(this.node,"star2Btn/normal"),o=this.findChild(this.node,"star2Btn/select"),a=this.findChild(this.node,"star1"),s=this.findChild(this.node,"star2");t.active=1!=e,i.active=1==e,a.active=1==e,n.active=!t.active,o.active=!i.active,s.active=!n.active},t=o([r],t)}(a.default));i.default=c,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase"}],StarYulanView:[function(e,t,i){"use strict";cc._RF.push(t,"a0b47ibCExEDrY3my4t0Wzk","StarYulanView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ColorConfig"),r=e("../../config/StarAbilityConfig"),c=e("../../config/WordConfig"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.temp_info=e},t.prototype.onShow=function(){this.cellParentNode=this.findChild(this.node,"frame/view/content"),this.cellLabNode=this.cellParentNode.getChildByName("cellName_0"),this.refresh(),this.setTopUI()},t.prototype.refresh=function(){for(var e=0;e<this.cellParentNode.children.length;e++)this.cellParentNode.children[e].active=!1;var t=this.temp_info.starSkillid;for(e=1;e<=this.temp_info.maxLevel;e++){var i=r.default.getConfig(t,e);i&&this.initaward_item(i,e)}},t.prototype.initaward_item=function(e,t){if(e){var i=this.cellParentNode.getChildByName("cellName_"+t);i||((i=cc.instantiate(this.cellLabNode)).name="cellName_"+t),i.active=!0,i.parent=this.cellParentNode;var n=i.getComponent(cc.Label);e.level<10?n.string=e.level+c.WordConfig.getWord(61352)+"    "+e.des:n.string=e.level+c.WordConfig.getWord(61352)+"   "+e.des,e.id==this.temp_info.id?i.color=s.ColorConfig.GreenColor:i.color=s.ColorConfig.WhiteColor}},t.MagicId={},t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/StarAbilityConfig":"StarAbilityConfig","../../config/WordConfig":"WordConfig"}],StartUpMgr:[function(e,t,i){"use strict";cc._RF.push(t,"0d5d703o9VIlKCR3+qq70F/","StartUpMgr");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/GlobalConfig"),r=e("../../engine/MusicPrefab"),c=e("../../engine/ResourcesManager"),l=e("../../engine/SoundPrefab"),d=e("../../engine/UIManager"),f=e("../base/NodePoolManager"),g=e("../config/GameConfig"),h=e("../config/GameConst"),u=e("../config/SpriteFrameConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../event/CommonEvent"),_=e("../network/SocketClient"),v=e("../prefab/FightFrameRes"),y=e("../prefab/QieGePrefab"),b=e("../prefab/ShaderMaterialPrefab"),I=e("../utils/MusicHelper"),M=e("../utils/MyJsonLoader"),w=e("../utils/NameHelper"),k=e("../view/Roles/BagItem"),S=e("../view/Skill/SkillItem"),P=e("./ConfigMgr"),E=e("./SkillClipsManager");(function(e){var t;(function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.ZONE=2]="ZONE",e[e.CREATE=3]="CREATE",e[e.LOGIN=4]="LOGIN",e[e.MAIN=5]="MAIN"})(t||(t={}));var i,L=t.LOADING,T=t.NONE;function R(){L=t.LOADING,T>=t.LOADING&&d.default.instance.createView(p.default.gameView.loading)}function N(){L=t.ZONE,T>=t.ZONE&&(d.default.instance.closeAllView(),d.default.instance.createView(p.default.gameView.zoneServer))}function B(){L=t.CREATE,T>=t.CREATE&&(d.default.instance.closeAllView(),d.default.instance.createView(p.default.gameView.login,function(){I.MusicHelper.play_bg(2)}))}function A(e){L=t.LOGIN,i=e,d.default.instance.isOpen(p.default.gameView.LoadingTipView)||d.default.instance.createView(p.default.gameView.LoadingTipView),T>=t.LOGIN&&_.default.req_start_game(e)}function G(){L=t.MAIN,T>=t.MAIN&&d.default.instance.createView(p.default.gameView.gameui,function(){d.default.instance.closeView(p.default.gameView.login)})}function x(){return n(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return e="view/loading/loadingBG_"+s.GlobalConfig.lodingBGIndex,[4,Promise.all([c.default.instance.loadResAsync("json/Word",cc.JsonAsset),c.default.instance.loadResAsync(e,cc.SpriteFrame),c.default.instance.loadResAsync(p.default.gameView.loading,cc.Prefab)])];case 1:return t.sent(),u.SpriteFrameConfig.loadingBG_frame=cc.loader.getRes(e,cc.SpriteFrame),m.WordConfig.json2Config(cc.loader.getRes("json/Word",cc.JsonAsset).json),[2]}})})}function O(){return n(this,void 0,void 0,function(){var e,t,i;return o(this,function(n){switch(n.label){case 0:return e="share/uicomponent/MusicPrefab",t="share/uicomponent/SoundPrefab",i=[{url:p.default.gameView.zoneServer,type:cc.Prefab},{url:"audio/button",type:cc.AudioClip},{url:e,type:cc.Prefab},{url:t,type:cc.Prefab},{url:p.default.gameView.AnnouncementView,type:cc.Prefab}],g.GameConfig.environment==g.EnvironmentType.Test&&i.push({url:p.default.gameView.TempView,type:cc.Prefab}),[4,c.default.instance.loadResListAsync(i,function(e,t){a.EventManager.instance.dispatch(C.CommonEvent.Event_LoadingProgress,e,t)})];case 1:return n.sent(),r.default.preInit(cc.loader.getRes(e,cc.Prefab)),l.default.preInit(cc.loader.getRes(t,cc.Prefab)),[2]}})})}function V(){return n(this,void 0,void 0,function(){var e,t,i,n,s,r;return o(this,function(o){switch(o.label){case 0:if(e=[{url:p.default.gameView.login,type:cc.Prefab},{url:p.default.gameView.register,type:cc.Prefab},{url:p.default.gameView.LoadingTipView,type:cc.Prefab}],t=[],P.ConfigMgr.init(),g.GameConfig.sdkType==g.SdkType.Xiaotun)i=new M.MyJsonLoader,t.push(i.loadAsync("resources/json/json.bin"));else for(n=0,s=P.ConfigMgr.getJsonList();n<s.length;n++)r=s[n],e.push({url:"json/"+r,type:cc.JsonAsset});return t.push(c.default.instance.loadResListAsync(e,function(e,t){a.EventManager.instance.dispatch(C.CommonEvent.Event_LoadingProgress,e,t)})),[4,Promise.all(t)];case 1:return o.sent(),P.ConfigMgr.parse(i),[2]}})})}function j(){return n(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return e=[{url:"prefab/roles/bagItem",type:cc.Prefab},{url:"prefab/skill/skillitem",type:cc.Prefab},{url:"prefab/qiegePrefab",type:cc.Prefab},{url:p.default.gameView.RoleSkillEffectPrefabEx,type:cc.Prefab},{url:p.default.gameView.RolePrefab,type:cc.Prefab}],g.GameConfig.atlasList.forEach(function(t){e.push({url:t,type:cc.SpriteAtlas})}),[4,c.default.instance.loadResListAsync(e,function(e,t){a.EventManager.instance.dispatch(C.CommonEvent.Event_LoadingProgress,e,t)})];case 1:return t.sent(),k.default.prefab=W(k.default.prefabName),S.default.prefab=W(S.default.prefabName),y.default.prefab=W(y.default.prefabName),f.default.Instance.RoleSkillEffectPrefabEx=cc.loader.getRes(p.default.gameView.RoleSkillEffectPrefabEx,cc.Prefab),f.default.Instance.rolePrefab=cc.loader.getRes(p.default.gameView.RolePrefab,cc.Prefab),v.FightFrameRes.init(),["fightframe/xinxi_boss","fightframe/xinxi_guaiwu_00","fightframe/xinxi_guaiwu_01","fightframe/xinxi_guaiwu_02","fightframe/xinxi_guaiwu_03","fightframe/xinxi_jues_daoshi","fightframe/xinxi_jues_fashi","fightframe/xinxi_jues_zhanshi","fightframe/xinxi_jues_kulou","fightframe/xinxi_jues_shenshou"].forEach(function(e,t){u.SpriteFrameConfig.fight_frame[t]=cc.loader.getRes(e,cc.SpriteFrame)}),H(),U(),[2]}})})}function D(){return n(this,void 0,void 0,function(){var e,t;return o(this,function(i){switch(i.label){case 0:return E.default.initClipsConfig(),e=[b.default.preLoad()],(t=g.GameConfig.prefabLoadList.map(function(e){return{url:e,type:cc.Prefab}})).push({url:"mapicon/ditu00_button",type:cc.SpriteFrame}),e.push(c.default.instance.loadResListAsync(t,function(e,t){a.EventManager.instance.dispatch(C.CommonEvent.Event_LoadingProgress,e,t)})),[4,Promise.all(e)];case 1:return i.sent(),[2]}})})}function F(){var e=g.GameConfig.preloadList.concat();for(var t in p.default.preloadList)e.push(p.default.preloadList[t]);cc.loader.loadResArray(e)}function H(){var e,t=cc.loader.getRes("markIcon/markIcon",cc.SpriteAtlas);if(t&&(e=t.getSpriteFrame("img_tongyong"),u.SpriteFrameConfig.occupation_spriteframe.set(h.GameConst.OCCUPATION.None,e),e=t.getSpriteFrame("img_zhanshitb"),u.SpriteFrameConfig.occupation_spriteframe.set(h.GameConst.OCCUPATION.ZHAN_SHI,e),e=t.getSpriteFrame("img_fashitb"),u.SpriteFrameConfig.occupation_spriteframe.set(h.GameConst.OCCUPATION.FA_SHI,e),e=t.getSpriteFrame("img_daoshitb"),u.SpriteFrameConfig.occupation_spriteframe.set(h.GameConst.OCCUPATION.DAO_SHI,e)),t=cc.loader.getRes("skillIcon/skillIcon",cc.SpriteAtlas))for(var i=t.getSpriteFrames(),n=0;n<i.length;n++){var o=i[n];u.SpriteFrameConfig.skill_frame.set("skillIcon/"+o.name,o)}}function U(){var e=cc.loader.getRes("sensitive",cc.TextAsset);e&&"sensitive"==e.name&&(w.NameHelper.sensitiveConfig=e.text.split("\n"))}function W(e){return cc.loader.getRes("prefab/"+e,cc.Prefab)}e.start=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,x()];case 1:return e.sent(),T=t.LOADING,L==t.LOADING&&R(),[4,O()];case 2:return e.sent(),T=t.ZONE,L==t.ZONE&&N(),[4,V()];case 3:return e.sent(),T=t.CREATE,L==t.CREATE&&B(),[4,j()];case 4:return e.sent(),T=t.LOGIN,L==t.LOGIN&&A(i),[4,D()];case 5:return e.sent(),T=t.MAIN,L==t.MAIN&&G(),F(),[2]}})})},e.showZone=N,e.showCreate=B,e.doLogin=A,e.showMain=G})(i.StartUpMgr||(i.StartUpMgr={})),cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GlobalConfig":"GlobalConfig","../../engine/MusicPrefab":"MusicPrefab","../../engine/ResourcesManager":"ResourcesManager","../../engine/SoundPrefab":"SoundPrefab","../../engine/UIManager":"UIManager","../base/NodePoolManager":"NodePoolManager","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/SpriteFrameConfig":"SpriteFrameConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../prefab/FightFrameRes":"FightFrameRes","../prefab/QieGePrefab":"QieGePrefab","../prefab/ShaderMaterialPrefab":"ShaderMaterialPrefab","../utils/MusicHelper":"MusicHelper","../utils/MyJsonLoader":"MyJsonLoader","../utils/NameHelper":"NameHelper","../view/Roles/BagItem":"BagItem","../view/Skill/SkillItem":"SkillItem","./ConfigMgr":"ConfigMgr","./SkillClipsManager":"SkillClipsManager"}],StatisticsManager:[function(e,t,i){"use strict";cc._RF.push(t,"cfc90y+Qp9ElLl+u8ptHbR5","StatisticsManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],StorageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1855cvlA7hBzphRDyIDxGbf","StorageConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.obj2Config=function(t){var i=new e;return i.storage=t.storage,i.gold=t.gold,i.gem=t.gem,i.ad=t.ad,i},e.getConfigById=function(e){return this.configMap.get(e)},e.getMaxNum=function(){var e=0;return this.configMap.forEach(function(t,i){t.storage>=e&&(e=t.storage)}),e},e.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o)})},e.Config_Name="storageConfig",e.configMap=new Map,e}();i.StorageConfig=n,cc._RF.pop()},{}],StrategyConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a6534tHwblJzpr29HccGttg","StrategyConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../model/RoleInfoModel"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.GetConfigsByGroup=function(e){var t=[];return this.configMap.forEach(function(i){i.group==e&&(-1==i.role&&t.push(i),o.default.instance.occupation==i.role+1&&t.push(i))}),t.sort(function(e,t){return e.subtype-t.subtype}),t},t.GetUnlocklevelByGroup=function(e,t){var i,n;return this.configMap.forEach(function(o){n=100*Math.floor(o.id/100)+1,o.group==e&&t==n&&o.id==n&&(i=o.unlocklevel)}),i},t.GetOpenlevelByGroup=function(e,t){var i,n;return this.configMap.forEach(function(o){n=100*Math.floor(o.id/100)+1,o.group==e&&t==n&&o.id==n&&(i=o.openlevel)}),i},t.GetAwardByGroup=function(e,t){var i,n=[];return this.configMap.forEach(function(o){i=100*Math.floor(o.id/100)+1,o.group==e&&t==i&&o.id==i&&(o.item?n.push(o.item):n[0]=null,o.ress?n.push(o.ress):n[1]=null,o.equip?n.push(o.equip):n[2]=null)}),n},t.GetConfigsFirstList=function(){var e,t=[],i=1;return this.configMap.forEach(function(n){e=100*Math.floor(n.id/100)+1,n.group==i&&n.id==e&&(i+=1,t.push(n))}),t},t.Config_Name="StrategyConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.StrategyConfig=a,cc._RF.pop()},{"../model/RoleInfoModel":"RoleInfoModel","./JsonConfigBase":"JsonConfigBase"}],StrategyModel:[function(e,t,i){"use strict";cc._RF.push(t,"86faaJQd9NIyIpbXEz1LfUN","StrategyModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/StrategyConfig"),c=e("../event/CommonEvent"),l=e("../manager/RedPointManager"),d=e("./RoleInfoModel"),f=function(){return function(){}}();i.AwardInfo=f;var g=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[l.RedPointId.Activity_Strategy],this.protos=[a.ProtoConfig.c_activity_strategy_info,a.ProtoConfig.c_activity_strategy_reward],l.default.getInstance().addHandler(this)}return e.proto2Info=function(t){new e;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_activity_strategy_info,t);this.awardInfoMap=new Map;var r=i.getAwardsList();if(r)for(var l in r)if(Object.prototype.hasOwnProperty.call(r,l)){var d=r[l],g=new f;g.index=d.getIndex(),g.status=d.getState(),this.awardInfoMap.set(g.index,g)}o.Logger.log("c_activity_strategy_info=====",i),n.EventManager.instance.dispatch(c.CommonEvent.Event_StrategyInfo_refresh)},e.proto2Reward=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_activity_strategy_reward,e),i=t.getRet(),r=t.getIndex(),l=t.getState(),d=this.awardInfoMap.get(r);d&&0==i&&(d.status=l),o.Logger.log("c_activity_strategy_reward=====",t),n.EventManager.instance.dispatch(c.CommonEvent.Event_StrategyInfo_refresh),n.EventManager.instance.dispatch(c.CommonEvent.Event_StrategyAward_refresh)},e.GetDataByIndex=function(e){var t;return this.awardInfoMap.get(1e3*e+1)?t=this.awardInfoMap.get(1e3*e+1):((t=new f).index=1e3*e+1,t.status=0),t},e.prototype.checkRedPoint=function(){var t=[],i=!1;if(e.awardInfoMap){e.awardInfoMap.forEach(function(e){var n=r.StrategyConfig.GetUnlocklevelByGroup(Math.floor(e.index/1e3),e.index);if(d.default.instance.level>=n){var o=!1;if(0==e.status||1==e.status){o=!0,i=!0;var a={id:"award"+e.index,type:l.RedPointType.Default,show:o};t.push(a);var s={id:"tab"+e.index,type:l.RedPointType.Default,show:o};t.push(s)}}});var n={id:l.RedPointId.Activity_Strategy,type:l.RedPointType.Default,show:i};t.push(n)}return t},e}();i.default=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/StrategyConfig":"StrategyConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./RoleInfoModel":"RoleInfoModel"}],StrategyXingXiuConfig:[function(e,t,i){"use strict";cc._RF.push(t,"dd14f+OTr5IO5yP7LodL/8C","StrategyXingXiuConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=parseInt(i),t.configMap.set(n.id,n)})},t.GetConfigsByRole=function(e){var t=[];return this.configMap.forEach(function(i){i.role==e&&t.push(i)}),t.sort(function(e,t){return e.id-t.id}),t},t.Config_Name="StrategyXingXiuConfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.StrategyXingXiuConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],StrengthenInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"b851ceaZUpDza43kqsC6hIR","StrengthenInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/WordConfig"),r=e("../utils/UIHelper"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e,t){this.nowConfig=e,this.nextConfig=t},t.prototype.onShow=function(){var e=this.getChild(this.node,"view/panel/txtNow",cc.Label),t=this.getChild(this.node,"view/panel/txtNowAdd",cc.Label),i=this.getChild(this.node,"view/panel/txtNextAdd",cc.Label),n=this.getChild(this.node,"view/panel/txtNextTarget",cc.Label);this.nowConfig?(e.string=s.WordConfig.getWord(60494)+this.nowConfig.level,t.string=cc.js.formatStr(s.WordConfig.getWord(60495),r.UIHelper.toFixStr(this.nowConfig.BonusDamage_p[1]/100,1),r.UIHelper.toFixStr(this.nowConfig.DamageReduction_p[1]/100,1),r.UIHelper.toFixStr(this.nowConfig.hp_p[1]/100,1),r.UIHelper.toFixStr(this.nowConfig.mp_p[1]/100,1))):(e.string=s.WordConfig.getWord(60496),t.string=s.WordConfig.getWord(60456)),this.nextConfig?(n.string=s.WordConfig.getWord(60494)+this.nextConfig.level,i.string=cc.js.formatStr(s.WordConfig.getWord(60495),r.UIHelper.toFixStr(this.nextConfig.BonusDamage_p[1]/100,1),r.UIHelper.toFixStr(this.nextConfig.DamageReduction_p[1]/100,1),r.UIHelper.toFixStr(this.nextConfig.hp_p[1]/100,1),r.UIHelper.toFixStr(this.nextConfig.mp_p[1]/100,1))):i.string=s.WordConfig.getWord(60456)},t.prototype.onHide=function(){},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig","../utils/UIHelper":"UIHelper"}],StrengthenView:[function(e,t,i){"use strict";cc._RF.push(t,"0d14fFOfnNCBbh1JzTNhId+","StrengthenView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/GameConfig"),f=e("../config/GameConst"),g=e("../config/IntensifyConfig"),h=e("../config/IntensifyRefineConfig"),u=e("../config/MagicNameConfig"),p=e("../config/ViewConfig"),m=e("../config/WordConfig"),C=e("../event/CommonEvent"),_=e("../manager/RedPointManager"),v=e("../model/AdModel"),y=e("../model/EquipGridModel"),b=e("../model/JingLianModel"),I=e("../model/MagicModel"),M=e("../model/RoleInfoModel"),w=e("../network/SocketClient"),k=e("../sdk/SdkHelper"),S=e("../utils/MusicHelper"),P=e("../utils/UIHelper"),E=e("./PublicTipView"),L=cc._decorator,T=L.ccclass,R=L.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.equipSpriteList=[],t.equipIndex=0,t.holdClick=!1,t.holdTimeEclipse=0,t}return n(t,e),t.prototype.onLoad=function(){this.btnStart=this.getChild(this.node,"view/panel/start"),this.btnStart.on(cc.Node.EventType.TOUCH_END,this.onClickEnd.bind(this)),this.btnStart.on(cc.Node.EventType.TOUCH_START,this.onClickStart.bind(this)),this.getChild(this.node,"view/panel/all").on(cc.Node.EventType.TOUCH_END,this.onClickAll.bind(this))},t.prototype.onEnable=function(){a.EventManager.instance.on(C.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),a.EventManager.instance.on(C.CommonEvent.Event_StrengthSwitch,this.onStrengthSwitch,this),a.EventManager.instance.on(C.CommonEvent.Event_intensifyRefine_Refresh,this.checkSelMinLvAndRefresh,this),this.equipIndex=1,this.onShow()},t.prototype.onShow=function(){this.txtAllTarget=this.getChild(this.node,"view/panel/all/txtAllTarget",cc.Label),this.icon=this.getChild(this.node,"view/panel/icon/name",cc.Sprite),this.maxLevelNode=this.getChild(this.node,"view/panel/maxLevel"),this.pan=this.getChild(this.node,"view/panel/pan"),this.txtLevel=this.getChild(this.node,"view/panel/icon/lvl",cc.Label),this.txtPro=this.getChild(this.node,"view/panel/pan/pro",cc.Label),this.txtNowInfo=this.getChild(this.node,"view/panel/pan/txtNowInfo",cc.Label),this.txNextInfo=this.getChild(this.node,"view/panel/pan/txNextInfo",cc.Label),this.txtCoin=this.getChild(this.node,"view/panel/pan/txtCoin",cc.Label),this.attackJingLian=this.findChild(this.node,"view/panel/attackJingLian"),this.onAddEvent(this.attackJingLian,this.openJingLianView.bind(this,f.GameConst.JINGLIAN.ATTACK)),this.defenseJingLian=this.findChild(this.node,"view/panel/defenseJingLian"),this.onAddEvent(this.defenseJingLian,this.openJingLianView.bind(this,f.GameConst.JINGLIAN.DEFENSE)),this.chkStrongAutoNext=this.findChild(this.node,"view/panel/chkStrongAutoNext"),this.chkStrongAutoNext.getComponent(cc.Toggle).isChecked=y.EquipGridModel.getSelAutoNext(),this.chkStrongAutoNext.on("toggle",this.onClickAutoNext,this),this.btnStrengthenIntro=this.findChild(this.node,"view/panel/btnStrengthenIntro"),this.onAddEvent(this.btnStrengthenIntro,this.onBtnStrengthenIntro),this.checkSelMinLvAndRefresh()},t.prototype.onBtnStrengthenIntro=function(){S.MusicHelper.play_click(),c.default.instance.createView(p.default.gameView.PublicTipView,null,E.RuleType.TYPE_STRENGTHEN)},t.prototype.onClickAutoNext=function(){S.MusicHelper.play_click(),y.EquipGridModel.getSelAutoNext()?(this.chkStrongAutoNext.getComponent(cc.Toggle).uncheck(),y.EquipGridModel.setSelAutoNext(!1)):(this.chkStrongAutoNext.getComponent(cc.Toggle).check(),y.EquipGridModel.setSelAutoNext(!0),this.checkSelMinLvAndRefresh())},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_req_strength){var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_req_strength,t);if(1==i.getRet()){m.WordConfig.showWord(60333);var n=i.getPos(),o=i.getLev();y.EquipGridModel.levelUpEquipGrid(n,o),this.checkSelMinLvAndRefresh(),a.EventManager.instance.dispatch(C.CommonEvent.Event_intensify_Refresh)}else m.WordConfig.showWord(60334)}},t.prototype.onStrengthSwitch=function(e){this.equipIndex=e+1,this.refresh()},t.prototype.onClickAll=function(){S.MusicHelper.play_click(),c.default.instance.createView(p.default.gameView.strengtheninfo,null,this.nowConfig,this.nextConfig)},t.prototype.checkSelMinLvAndRefresh=function(){var e=!1;y.EquipGridModel.getSelAutoNext()&&(e=this.selectMinLvEquipIndex()),e||this.refresh()},t.prototype.selectMinLvEquipIndex=function(){for(var e=M.default.instance.getEquipGridList(),t=0,i=999999,n=0;n<e.length;n++){var o=e[n];o.strengthenNum<i&&(t=n,i=o.strengthenNum)}return t+1!=this.equipIndex&&(a.EventManager.instance.dispatch(C.CommonEvent.Event_StrengthSelIndex,t),!0)},t.prototype.refresh=function(){this.icon.spriteFrame=this.equipSpriteList[this.equipIndex-1];var e=M.default.instance.getEquipGridList(),t=y.EquipGridModel.getNowIntensifyLevelConfig(),i=y.EquipGridModel.getNextIntensifyLevelConfig();this.nowConfig=t,this.nextConfig=i;var n,o,a=y.EquipGridModel.getEquipGridModel(this.equipIndex);this.txtLevel.string=a?"+"+a.strengthenNum:"",a?(n=g.IntensifyConfig.getIntensifyConfigById(a.strengthenNum),o=g.IntensifyConfig.getIntensifyConfigById(a.strengthenNum+1)):(n=g.IntensifyConfig.getIntensifyConfigById(0),o=g.IntensifyConfig.getIntensifyConfigById(1)),this.nowIntens=n,this.nextIntens=o;var s=0;if(o){var r=this.equipIndex;r==f.GridType.WEAPON?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.weapon.magicId)+"+"+I.default.formatMagicValue(n.weapon.magicId,n.weapon.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.weapon.magicId,o.weapon.magicValue)+""):r==f.GridType.CORSELET?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.corselet.magicId)+"+"+I.default.formatMagicValue(n.corselet.magicId,n.corselet.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.corselet.magicId,o.corselet.magicValue)+""):r==f.GridType.HELMET?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.helmet.magicId)+"+"+I.default.formatMagicValue(n.helmet.magicId,n.helmet.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.helmet.magicId,o.helmet.magicValue)+""):r==f.GridType.NECK_LACE?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.necklace.magicId)+"+"+I.default.formatMagicValue(n.necklace.magicId,n.necklace.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.necklace.magicId,o.necklace.magicValue)+""):r==f.GridType.BRACELET_lEFT?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.bracelet_left.magicId)+"+"+I.default.formatMagicValue(n.bracelet_left.magicId,n.bracelet_left.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.bracelet_left.magicId,o.bracelet_left.magicValue)+""):r==f.GridType.BRACELET_RIGHT?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.bracelet_right.magicId)+"+"+I.default.formatMagicValue(n.bracelet_right.magicId,n.bracelet_right.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.bracelet_right.magicId,o.bracelet_right.magicValue)+""):r==f.GridType.RING_LEFT?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.ring_left.magicId)+"+"+I.default.formatMagicValue(n.ring_left.magicId,n.ring_left.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.ring_left.magicId,o.ring_left.magicValue)+""):r==f.GridType.RING_RIGHT?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.ring_right.magicId)+"+"+I.default.formatMagicValue(n.ring_right.magicId,n.ring_right.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.ring_right.magicId,o.ring_right.magicValue)+""):r==f.GridType.BELT?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.helmet.magicId)+"+"+I.default.formatMagicValue(n.helmet.magicId,n.helmet.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.helmet.magicId,o.helmet.magicValue)+""):r==f.GridType.SHOE?(this.txtNowInfo.string=u.MagicNameConfig.getDesc(n.shoe.magicId)+"+"+I.default.formatMagicValue(n.shoe.magicId,n.shoe.magicValue),this.txNextInfo.string=I.default.formatMagicValue(o.shoe.magicId,o.shoe.magicValue)+""):f.GridType.MEDAL,this.txtCoin.string=n.getCost()+"",this.txtCoin.node.color=n.getCost()<=M.default.instance.getCoin()?cc.Color.GREEN:cc.Color.RED,this.txtPro.string=Math.floor(n.prob/100)+"%",this.btnStart.opacity=255,this.pan.active=!0,this.maxLevelNode.active=!1}else this.maxLevelNode.active=!0,this.pan.active=!1,this.btnStart.opacity=50;for(var c=0;c<e.length;c++){e[c].strengthenNum>=i.level&&s++}this.txtAllTarget.string=m.WordConfig.getWord(60494)+i.level+"\n("+s+"/10)";var l="";M.default.instance.occupation==f.GameConst.OCCUPATION.ZHAN_SHI?l=m.WordConfig.getWord(60447):M.default.instance.occupation==f.GameConst.OCCUPATION.FA_SHI?l=m.WordConfig.getWord(60448):M.default.instance.occupation==f.GameConst.OCCUPATION.DAO_SHI&&(l=m.WordConfig.getWord(60449)),this.attackJingLian.getChildByName("txtValue").getComponent(cc.Label).string=l+m.WordConfig.getWord(60497)+b.JingLianModel.getModel(f.GameConst.JINGLIAN.ATTACK).refineLevel,this.defenseJingLian.getChildByName("txtValue").getComponent(cc.Label).string=m.WordConfig.getWord(60498)+b.JingLianModel.getModel(f.GameConst.JINGLIAN.DEFENSE).refineLevel},t.prototype.startSendUp=function(){if(this.maxLevelNode.active)m.WordConfig.showWord(60321);else if(this.nextIntens.level>M.default.instance.level)m.WordConfig.showWord(60162);else{var e=!0;if(M.default.instance.getCoin()<this.nowIntens.getCost()&&(e=!1),e)if(d.GameConfig.connectServer)k.default.sdkCustomAction(17,this.nowIntens.getCost()),w.default.req_strength(this.equipIndex);else Math.random()<=this.nextIntens.prob/1e4?(e&&m.WordConfig.showWord(60333),M.default.saveToLocalStorage(),this.refresh()):m.WordConfig.showWord(60334);else d.GameConfig.isWechat()?v.default.getAdLostTimes(v.Ad_Type.Coin)>0?c.default.instance.createView(p.default.gameView.buyMoney):m.WordConfig.showWord(60102):P.UIHelper.showCoinNoEnough()}},t.prototype.onClickStart=function(){S.MusicHelper.play_click(),this.holdClick=!0,this.holdTimeEclipse=0},t.prototype.onClickEnd=function(){S.MusicHelper.play_click(),this.holdClick=!1,this.startSendUp()},t.prototype.update=function(e){this.holdClick&&(this.holdTimeEclipse++,this.holdTimeEclipse>80&&this.holdTimeEclipse%20==0&&this.startSendUp())},t.prototype.openJingLianView=function(e){e==f.GameConst.JINGLIAN.ATTACK?b.JingLianModel.attackIsShow=!0:b.JingLianModel.defenseIsShow=!0;var t=y.EquipGridModel.getNowIntensifyLevelConfig(),i=h.IntensifyRefineConfig.getConfigById(0);if(t)if(t.level>=i.limit_level)c.default.instance.createView(p.default.gameView.JingLianView,null,e);else{var n=cc.js.formatStr(m.WordConfig.getWord(60335),i.limit_level);P.UIHelper.showTip(n)}else{n=cc.js.formatStr(m.WordConfig.getWord(60335),i.limit_level);P.UIHelper.showTip(n)}_.default.getInstance().checkRedPointById(_.RedPointId.JingLian)},t.prototype.onHide=function(){},t.prototype.onDisable=function(){a.EventManager.instance.clear(this)},o([R({type:[cc.SpriteFrame]})],t.prototype,"equipSpriteList",void 0),t=o([T],t)}(l.default);i.default=N,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/IntensifyConfig":"IntensifyConfig","../config/IntensifyRefineConfig":"IntensifyRefineConfig","../config/MagicNameConfig":"MagicNameConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","../model/AdModel":"AdModel","../model/EquipGridModel":"EquipGridModel","../model/JingLianModel":"JingLianModel","../model/MagicModel":"MagicModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../sdk/SdkHelper":"SdkHelper","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper","./PublicTipView":"PublicTipView"}],SummonedManager:[function(e,t,i){"use strict";cc._RF.push(t,"d361fcW47tAVYR3z929F2qc","SummonedManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/MapConfig"),o=e("../prefab/RolePrefab"),a=e("../prefab/GameManager"),s=e("../../engine/MathUtils"),r=e("../model/RoleInfoModel"),c=function(){function e(){this.isAlive=!1,this.summonedList=[],this.summonedInfoList=[]}return e.prototype.enterMap=function(t){if(this.gameView=t,this.clear(),this.summonedList=[],n.MapConfig.curMapConfig.type==n.MapConfig.MAP_TYPE.City);else{this.isAlive=!0;var i=a.default.instance.gameView.getEmptyGridList();if(i.length<=0)return;i.sort(function(e,t){return s.default.distance(e.row,e.col,a.default.instance.gameView.myRolePrefab.gridRow,a.default.instance.gameView.myRolePrefab.gridCol)-s.default.distance(t.row,t.col,a.default.instance.gameView.myRolePrefab.gridRow,a.default.instance.gameView.myRolePrefab.gridCol)});for(var o=0;o<this.summonedInfoList.length;o++){var c=i.shift(),l=a.default.instance.gameView.addSummoned(c,r.default.instance);l.setSummonedInfo2(this.summonedInfoList[o]),e.instance.summonedList.push(l)}}this.summonedInfoList=[]},e.prototype.clear=function(){for(var e=this.summonedList.length-1;e>=0;e--){var t=this.summonedList[e];t&&t.node&&t.node.destroy()}this.summonedList=[]},e.prototype.killSummond=function(e){for(var t=this.summonedList.length-1;t>=0;t--){var i=this.summonedList[t];i&&i.node&&i.roleInfo.summonedConfig.skillId==e&&a.default.instance.gameView.killSummoned(i)}},e.prototype.getSummonedListByDistance=function(e,t,i,n,a){for(var s=[],r=this.summonedList.length-1;r>=0;r--){var c=this.summonedList[r];if(c&&c.node){var l=Math.abs(c.gridRow-i),d=Math.abs(c.gridCol-n);if(l<=e&&d<=e){if(!(s.length<t))break;a.nowRoleType==o.default.RoleType.Role?s.push(c):a.nowRoleType==o.default.RoleType.PvpAttackRole&&c.nowRoleType==o.default.RoleType.PvpAttackSummoned?s.push(c):a.nowRoleType==o.default.RoleType.PvpBeAttackRole&&c.nowRoleType==o.default.RoleType.PvpBeAttackSummoned&&s.push(c)}}}return s},e.prototype.leaveMap=function(){this.clear(),this.isAlive=!1},e.prototype.canAddSummoned=function(e){return!(this.summonedList.length>=e)},e.prototype.gotoDead=function(e){for(var t=this.summonedList.length-1;t>=0;t--){var i=this.summonedList[t];if(e.gridRow==i.gridRow&&e.gridCol==i.gridCol){this.summonedList.splice(t,1);break}}},e.instance=new e,e}();i.default=c,cc._RF.pop()},{"../../engine/MathUtils":"MathUtils","../config/MapConfig":"MapConfig","../model/RoleInfoModel":"RoleInfoModel","../prefab/GameManager":"GameManager","../prefab/RolePrefab":"RolePrefab"}],SuperbskillConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d07b4xtD6hFPZkuLAxiiTrt","SuperbskillConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configMap=new Map,this.configList=new Map,Object.keys(e).forEach(function(i,n){var o=t.obj2Config(e[i]);o.id=parseInt(i),t.configMap.set(o.id,o);var a=t.configList.get(o.type);a||(a=new Map);var s=a.get(o.floor);s||(s=new Array),s.push(o),s.sort(function(e,t){return e.id-t.id}),a.set(o.floor,s),t.configList.set(o.type,a)})},t.getConfigById=function(e){return this.configMap.get(e)},t.getConfigs=function(e,t){var i=new Array,n=this.configList.get(e);return n&&(i=n.get(t)),i},t.getInitialConfigByType=function(e){var t,i=this.configList.get(e);return i&&(t=i.get(1)[0]),t},t.Config_Name="superbskillConfig",t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],SyncHelper:[function(e,t,i){"use strict";var n;cc._RF.push(t,"1014f1GMYRMCo8y2lCOqwsc","SyncHelper"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.Position=0]="Position",e[e.Width=1]="Width",e[e.Height=2]="Height",e[e.Active=3]="Active",e[e.Size=4]="Size",e[e.PosAndActive=5]="PosAndActive"}(n=i.SyncType||(i.SyncType={}));var o=function(){function e(){}return e.init=function(){e.syncFun=function(e){},e.syncFun[n.Position]=e.syncPositon,e.syncFun[n.Width]=e.syncWidth,e.syncFun[n.Height]=e.syncHeight,e.syncFun[n.Active]=e.syncActive,e.syncFun[n.PosAndActive]=e.syncPosAndActive,e.syncFun[n.Size]=e.syncSize},e.syncSize=function(e,t){this.syncWidth(e,t),this.syncHeight(e,t)},e.syncPosAndActive=function(e,t){this.syncActive(e,t),this.syncPositon(e,t)},e.syncActive=function(e,t){e.active!=t.active&&(e.active=t.active)},e.syncPositon=function(e,t){var i=e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v2(0,0)));e.y==i.y&&e.x==i.x||(e.y=i.y,e.x=i.x)},e.syncWidth=function(e,t){e.width!=t.width&&(e.width=t.width)},e.syncHeight=function(e,t){e.height!=t.height&&(e.height=t.height)},e}();i.SyncHelper=o,cc._RF.pop()},{}],TaskConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b7938p9v2tKp72CQCdoz1CO","TaskConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){this.name=null,this.award_res=null,this.award_item=null,this.award_equip=null,this.award_item1=null,this.award_equip1=null,this.jump=null,this.limit=null,this.change=null,this.next_id=null,this.type=null,this.condition=null,this.desc=null,this.Active=null,this.jump_id=null,this.desc2=null,this.sort=null}}();i.TaskItem=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n)})},t.getTaskConfig=function(e){return this.configMap.get(e)},t.Config_Name="taskConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.TaskConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],TaskModel:[function(e,t,i){"use strict";cc._RF.push(t,"944d9nAOo5JLIcSrGCqBQYX","TaskModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("../../engine/UIManager"),a=e("../config/ViewConfig"),s=e("../config/TaskConfig"),r=e("../../engine/EventManager"),c=e("../../engine/ProtoConfig"),l=e("../../engine/ProtoUtils"),d=e("../../engine/GameSocket"),f=e("../event/CommonEvent"),g=e("../manager/RedPointManager"),h=function(){return function(){}}();i.ActiveTaskInfo=h;var u=function(){return function(){}}();i.ActiveTaskBoxInfo=u;var p,m=function(){return function(){this.boxInfoArr=[]}}();i.LivenessInfo=m,function(e){e[e.ordinary=1]="ordinary",e[e.day=2]="day",e[e.week=3]="week"}(p=i.ActiveTaskType||(i.ActiveTaskType={}));var C=function(){return function(){}}();i.TaskModelInfo=C;var _=function(){function e(){this.taskid=null,this.tasklist=[],this.eventIdList=[],this.protos=[],this.initRedPoint()}return e.prototype.initRedPoint=function(){this.eventIdList=[g.RedPointId.ActiveTask,g.RedPointId.ActiveTaskDay,g.RedPointId.ActiveTaskWeek],this.protos=[c.ProtoConfig.c_all_task_info,c.ProtoConfig.c_update_task_info,c.ProtoConfig.c_task_liveness_info,c.ProtoConfig.c_task_liveness_reward],g.default.getInstance().addHandler(this)},e.prototype.checkRedPoint=function(){var t,i=[],n=!1,o=!1;e.activeTaskModel.forEach(function(e,t){t!==p.ordinary&&e.forEach(function(e){2===e.state&&(e.type===p.day?n=!0:e.type===p.week&&(o=!0))})}),e.livenessInfoMap.forEach(function(e,t){for(var i=0,a=e.boxInfoArr.length;i<a;i++){1===e.boxInfoArr[i].state&&(t===p.day?n=!0:t===p.week&&(o=!0))}}),t=n||o;var a={id:g.RedPointId.ActiveTask,type:g.RedPointType.Default,show:t};i.push(a);var s={id:g.RedPointId.ActiveTaskDay,type:g.RedPointType.Default,show:n};i.push(s);var r={id:g.RedPointId.ActiveTaskWeek,type:g.RedPointType.Default,show:o};return i.push(r),i},e.proto2ModelList=function(e){var t=e.getTaskListList();this.modelList=[];for(var i=0;i<t.length;i++){var n=new C;n.id=t[i].getTaskId(),n.step=t[i].getStep(),this.modelList[i]=n}},e.proto2_c_all_task_info=function(t){var i=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_all_task_info,t),o=i.getTasklistList(),a=i.getCurTaskid();this.activeTaskModel=new Map;for(var d=0,g=o.length;d<g;d++){var u=o[d];if(u.getType()===p.ordinary){var m={};m.id=u.getId(),m.cur=u.getCur(),m.total=u.getTotal(),m.state=u.getState(),e.instance.tasklist[m.id]=m,e.instance.taskid=a}else{var C=new h;C.cur=u.getCur(),C.id=u.getId(),C.total=u.getTotal(),C.state=u.getState(),C.type=u.getType(),C.sort=s.TaskConfig.getTaskConfig(C.id.toString()).sort;var _=this.activeTaskModel.get(C.type);_||(_=new Map,this.activeTaskModel.set(C.type,_)),_.set(C.id,C)}}n.Logger.log("proto2_c_all_task_info",a,e.instance.tasklist),e.instance.dispatchUpGameTask(),n.Logger.log("c_all_task_info ",this.activeTaskModel,o),r.EventManager.instance.dispatch(f.CommonEvent.Event_c_all_task_info)},e.proto2_c_task_liveness_info=function(t){var i=t.getDailyBoxList(),o=t.getWeeklyBoxList(),a=new m;e.livenessInfoMap.set(p.day,a),a.liveness=t.getDailyLiveness(),a.boxInfoArr=[];for(var s=0,c=i.length;s<c;s++){var l=(h=i[s]).getIndex(),d=h.getState();a.boxInfoArr.push({id:l,state:d})}a.boxInfoArr.sort(function(e,t){return e.id-t.id});var g=new m;e.livenessInfoMap.set(p.week,g),g.liveness=t.getWeeklyLiveness(),g.boxInfoArr=[];for(s=0,c=o.length;s<c;s++){var h;l=(h=o[s]).getIndex(),d=h.getState();g.boxInfoArr.push({id:l,state:d})}g.boxInfoArr.sort(function(e,t){return e.id-t.id}),n.Logger.log("c_task_liveness_info, ",e.livenessInfoMap),r.EventManager.instance.dispatch(f.CommonEvent.Event_c_task_liveness_info)},e.proto2_c_task_liveness_reward=function(t){var i=t.getRet(),n=t.getId();if(0===i){var o=e.getBoxInfoById(n);o&&(o.state=2,r.EventManager.instance.dispatch(f.CommonEvent.Event_c_task_liveness_reward,n))}},e.getLivenessInfoMap=function(){return e.livenessInfoMap},e.getBoxInfoById=function(t){var i;return e.livenessInfoMap.forEach(function(e){for(var n=0,o=e.boxInfoArr.length;n<o;n++){var a=e.boxInfoArr[n];a.id===t&&(i=a)}}),i},e.getBoxStateById=function(t){var i;return e.livenessInfoMap.forEach(function(e){for(var n=0,o=e.boxInfoArr.length;n<o;n++){var a=e.boxInfoArr[n];if(a.id===t){i=a.state;break}}}),i},e.getOderlyActiveTaskArrByTaskType=function(t){var i=e.activeTaskModel.get(t);if(!i)return[];var n=[],o=[],a=[];return i.forEach(function(e,t){var i=e.state;2===i?n.push(e):1===i?o.push(e):3===i&&a.push(e)}),n.sort(function(e,t){return e.sort-t.sort}),o.sort(function(e,t){return e.sort-t.sort}),a.sort(function(e,t){return e.sort-t.sort}),n.concat(o,a)},e.getActiveTaskInfoById=function(t){var i;return e.activeTaskModel.forEach(function(e){var n=e.get(t);n&&(i=n)}),i||n.Logger.log(t,e.activeTaskModel),i},e.proto2_c_update_task_info=function(t){var i=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_update_task_info,t).getTasklist();if(i.getType()===p.ordinary){var o={};o.id=i.getId(),o.cur=i.getCur(),o.total=i.getTotal(),o.state=i.getState(),e.instance.taskid=o.id,e.instance.tasklist[o.id]=o,e.instance.dispatchUpGameTask(),this.is_autoopen&&(this.is_autoopen=!1)}n.Logger.log("proto2_c_update_task_info",e.instance.tasklist);var a=i.getId(),s=e.getActiveTaskInfoById(a);s&&(s.cur=i.getCur(),s.id=i.getId(),s.total=i.getTotal(),s.state=i.getState(),s.type=i.getType())},e.proto2_c_task_reward=function(t){var i=l.ProtoUtils.DeserializeBinary(c.ProtoConfig.c_task_reward,t),o=i.getRet(),a=i.getId(),s=i.getState();if(0==o){void 0!==e.instance.tasklist[a]&&(e.instance.taskid=null,e.instance.dispatchUpGameTask()),this.is_autoopen=!0;var d=e.getActiveTaskInfoById(a);d&&(d.state=s,r.EventManager.instance.dispatch(f.CommonEvent.Event_c_task_reward_success,d.type))}n.Logger.log("proto2_c_task_reward",o,a,s)},e.s_update_task_info=function(t){if(t==e.instance.taskid){var i=l.ProtoUtils.Create(c.ProtoConfig.s_update_task_info);i.setId(t),i.setType(1),d.default.getInstance().sendToSocket(i)}},e.s_task_reward=function(){n.Logger.log("s_task_reward",e.instance.taskid);var t=l.ProtoUtils.Create(c.ProtoConfig.s_task_reward);t.setId(e.instance.taskid),d.default.getInstance().sendToSocket(t)},e.s_all_task_info=function(){var e=l.ProtoUtils.Create(c.ProtoConfig.s_all_task_info);d.default.getInstance().sendToSocket(e)},e.hadFinishTask=function(e){for(var t=0;t<this.modelList.length;t++){var i=this.modelList[t];if(i&&i.id==e&&i.step>=1)return!0}},e.prototype.ShowTaskView=function(){var e=s.TaskConfig.getTaskConfig(this.taskid.toString());e&&this.tasklist[this.taskid]&&o.default.instance.createView(a.default.gameView.taskView,null,this.taskid,this.tasklist[this.taskid],e)},e.prototype.dispatchUpGameTask=function(){if(this.taskid&&this.tasklist[this.taskid]){var e=s.TaskConfig.getTaskConfig(this.taskid.toString());if(e){var t=this.tasklist[this.taskid].cur,i=this.tasklist[this.taskid].total,n=this.tasklist[this.taskid].state,o=2==n?"<color=#1FFF00>":"<color=#FF0000>",a=e.name+o+"\uff08"+t+"/"+i+"\uff09</c>";return void r.EventManager.instance.dispatch(f.CommonEvent.Event_Task_UP,a,n)}}r.EventManager.instance.dispatch(f.CommonEvent.Event_Task_UP)},e.prototype.isShow=function(){return!(!this.taskid||!this.tasklist[this.taskid])},e.modelList=[],e.activeTaskModel=new Map,e.livenessInfoMap=new Map,e.instance=new e,e.is_autoopen=!1,e}();i.TaskModel=_,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/GameSocket":"GameSocket","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/TaskConfig":"TaskConfig","../config/ViewConfig":"ViewConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],TaskView:[function(e,t,i){"use strict";cc._RF.push(t,"32618f9a89MYbdYJXjpvuI1","TaskView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../model/TaskModel"),r=e("../config/ITemsConfig"),c=e("../config/EquipConfig"),l=e("../prefab/ItemPrefab"),d=e("../../engine/EventManager"),f=e("../model/RoleInfoModel"),g=cc._decorator,h=g.ccclass,u=g.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ItemPrefab=null,t.taskid=null,t.config=null,t.taskconfig=null,t}return n(t,e),t.prototype.onInitChild=function(e,t,i){this.taskid=e,this.taskconfig=t,this.config=i},t.prototype.onShow=function(){var e=this;this.setTopUI();var t=this.findChild(this.node,"view/panel");t.getChildByName("title0").getComponent(cc.RichText).string=this.config.name,t.getChildByName("routelabel").getComponent(cc.RichText).string=this.config.desc;var i=t.getChildByName("progresslabel");i.getComponent(cc.Label).string=this.taskconfig.cur+"/"+this.taskconfig.total,i.getComponent(cc.Label).node.color=2==this.taskconfig.state?cc.Color.GREEN:cc.Color.RED,t.getChildByName("btnClose").on(cc.Node.EventType.TOUCH_END,this.closeView.bind(this));var n=t.getChildByName("tijiaobtn");n.active=2==this.taskconfig.state,n.on(cc.Node.EventType.TOUCH_END,function(){s.TaskModel.s_task_reward(),e.closeView()});var o=t.getChildByName("jixvbtn");o.active=1==this.taskconfig.state;var a=this.config;o.on(cc.Node.EventType.TOUCH_END,function(t){if(e.closeView(),a.jump){var i=a.jump;i>=1001&&i<=1006||1024==i?d.EventManager.instance.dispatch("FEATURE_ROLE",t):i>=1007&&i<=1008?d.EventManager.instance.dispatch("FEATURE_WF",t):1018==i?d.EventManager.instance.dispatch("FEATURE_BATTLE",t):1009==i?d.EventManager.instance.dispatch("FEATURE_WF",t):1010==i&&d.EventManager.instance.dispatch("FEATURE_FANGSHI",t),d.EventManager.instance.dispatch("FEATURE_"+i,t)}});var r=0;for(var c in this.config.award_res)this.initaward_res(Number(c),this.config.award_res[c],t,r++);for(var c in this.config.award_item)this.initaward_item(c,this.config.award_item[c],t,r++);for(var c in this.config.award_equip)this.initaward_eauip(c,this.config.award_equip[c],t,r++);for(var c in this.config.award_item1){(l=this.config.award_item1[c]).prof==f.default.instance.occupation&&this.initaward_item(l.id,l.count,t,r++)}for(var c in this.config.award_equip1){var l;(l=this.config.award_equip1[c]).prof==f.default.instance.occupation&&this.initaward_eauip(l.id,l.count,t,r++,parseInt(l.quality))}},t.prototype.initaward_res=function(e,t,i,n){var o=cc.instantiate(this.ItemPrefab);o.y=-72,o.x=80*n-160,o.active=!0,o.parent=i,o.getComponent(l.default).initResource(e,t)},t.prototype.initaward_item=function(e,t,i,n){var o=r.ITemsConfig.getITemsConfigById(e);if(o){var a=cc.instantiate(this.ItemPrefab);a.y=-72,a.x=80*n-160,a.active=!0,a.parent=i,a.getComponent(l.default).init(o,!0),a.getComponent(l.default).setNumTxt(t)}},t.prototype.initaward_eauip=function(e,t,i,n,o){void 0===o&&(o=-1);var a=c.EquipConfig.getEquipConfigById(e);if(o>=0&&(a.quality=o),a){var s=cc.instantiate(this.ItemPrefab);s.y=-72,s.x=80*n-160,s.active=!0,s.parent=i,s.getComponent(l.default).init(a,!0),s.getComponent(l.default).setNumTxt(t)}},o([u(cc.Prefab)],t.prototype,"ItemPrefab",void 0),t=o([h],t)}(a.default);i.default=p,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/EquipConfig":"EquipConfig","../config/ITemsConfig":"ITemsConfig","../model/RoleInfoModel":"RoleInfoModel","../model/TaskModel":"TaskModel","../prefab/ItemPrefab":"ItemPrefab"}],Task_boxConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4bbecetxCJLRIuB46+qedij","Task_boxConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=String(e.id),i.type=e.type,i.awardRes=e.award_res,i},t.json2Config=function(e){var i=this;Object.keys(e).forEach(function(n){var o=i.obj2Config(e[n]);t.configMap.set(n,o)})},t.getAwardResById=function(e){return this.configMap.get(e).awardRes},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.Task_boxConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],TempView:[function(e,t,i){"use strict";cc._RF.push(t,"b8347gKs5xKEagOwkl2dPRJ","TempView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/LocalStorage"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/GameConfig"),l=e("../config/WordConfig"),d=e("../manager/StartUpMgr"),f=e("../network/HttpHelper"),g=e("../sdk/SdkHelper"),h=cc._decorator,u=h.ccclass,p=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return n(t,e),i=t,t.prototype.getLocalAccount=function(){var e=a.default.getItem(i.LOGIN_ACCOUNT_KEY);return e||""},t.prototype.setLocalAccount=function(e){a.default.setItem(i.LOGIN_ACCOUNT_KEY,e)},t.prototype.checkPwd=function(e){return c.GameConfig.sdkType==c.SdkType.Xiaotun?"cq9527"==e:"cq9527"==e||c.GameConfig.environment==c.EnvironmentType.Test||c.GameConfig.environment==c.EnvironmentType.Local},t.prototype.onShow=function(){var e=this;this.txtCode=this.getChild(this.node,"txtCode",cc.EditBox),this.txtCode.string=this.getLocalAccount(),this.txtPassword=this.getChild(this.node,"txtPassword",cc.EditBox);var t=this.getChild(this.node,"txtUrl",cc.EditBox);t.string=c.GameConfig.socketUrl,this.setTopUI(),this.onAddEvent(this.findChild(this.node,"btnLogin"),function(){g.default.uId=e.txtCode.string,c.GameConfig.socketUrl=t.string,e.setLocalAccount(e.txtCode.string),e.checkPwd(e.txtPassword.string)?f.default.getDomainList(function(){s.default.instance.closeAllView(),d.StartUpMgr.showZone()}):l.WordConfig.showWord(60336)})},t.LOGIN_ACCOUNT_KEY="LOGIN_ACCOUNT_KEY",t=i=o([u],t)}(r.default));i.default=p,cc._RF.pop()},{"../../engine/LocalStorage":"LocalStorage","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConfig":"GameConfig","../config/WordConfig":"WordConfig","../manager/StartUpMgr":"StartUpMgr","../network/HttpHelper":"HttpHelper","../sdk/SdkHelper":"SdkHelper"}],TianGuanCell:[function(e,t,i){"use strict";cc._RF.push(t,"1ca67BDTjBOyqP+5tsj2Wcu","TianGuanCell");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../base/ListViewItemBase"),r=e("../../config/WordConfig"),c=e("../../model/SkyPassModel"),l=e("../../utils/MusicHelper"),d=cc._decorator,f=d.ccclass,g=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelLabel=null,t.passNode=null,t.sweepNode=null,t.challengeNode=null,t}return n(t,e),t.prototype.init=function(t,i,n){e.prototype.init.call(this,t,i),this.cb=n;var o=c.default.skyPassInfo;this.config=i,this.levelLabel.string=cc.js.formatStr(r.WordConfig.getWord(60227),i.id),this.challengeNode.active=this.config.id==o.top+1,this.sweepNode.active=this.config.id==o.top,this.passNode.active=this.config.id<=o.top-1,this.onAddEvent(this.node,this.onBtnOpenView.bind(this,i.id,t))},t.prototype.onBtnOpenView=function(e,t){this.cb&&this.cb(e,t)},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e);var n=0;e.on(cc.Node.EventType.TOUCH_START,function(){n=a.default.now()}),e.on(cc.Node.EventType.TOUCH_END,function(){if(e.getComponent(cc.Button).enabled){l.MusicHelper.play_click();var i=a.default.now();t(0!=n&&i-n>=400?1:0)}},e)},o([g(cc.Label)],t.prototype,"levelLabel",void 0),o([g(cc.Node)],t.prototype,"passNode",void 0),o([g(cc.Node)],t.prototype,"sweepNode",void 0),o([g(cc.Node)],t.prototype,"challengeNode",void 0),t=o([f],t)}(s.default);i.default=h,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../base/ListViewItemBase":"ListViewItemBase","../../config/WordConfig":"WordConfig","../../model/SkyPassModel":"SkyPassModel","../../utils/MusicHelper":"MusicHelper"}],TianGuanInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"e7b66IbywVDVZlruUOwsIE3","TianGuanInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ResourcesManager"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/ColorConfig"),f=e("../../config/DefaultConfig"),g=e("../../config/GameConst"),h=e("../../config/ITemsConfig"),u=e("../../config/SkyPassConfig"),p=e("../../config/ViewConfig"),m=e("../../config/WordConfig"),C=e("../../event/CommonEvent"),_=e("../../manager/TianGuanManager"),v=e("../../model/ItemInfoModel"),y=e("../../model/RoleInfoModel"),b=e("../../model/SkyPassModel"),I=e("../../network/SocketClient"),M=e("../../prefab/ItemPrefab"),w=e("../../utils/UIHelper"),k=cc._decorator,S=k.ccclass,P=k.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){s.EventManager.instance.on(C.CommonEvent.Event_SkyPass_level_info,this.initView,this)},t.prototype.onInitChild=function(e){I.default.s_req_skytower_record(e)},t.prototype.initFindNode=function(){this.LevelLabel=this.findChild(this.node,"frame/name").getComponent(cc.Label),this.powerLabel=this.findChild(this.node,"frame/power/num").getComponent(cc.Label),this.myStauts=this.findChild(this.node,"frame/myPass/num").getComponent(cc.Label),this.fPPlayerNode=this.findChild(this.node,"frame/fastestPass/player"),this.fPNameLabel=this.findChild(this.node,"frame/fastestPass/player/name").getComponent(cc.Label),this.fPTimeLabel=this.findChild(this.node,"frame/fastestPass/player/time").getComponent(cc.Label),this.fPProfNode=this.findChild(this.node,"frame/fastestPass/player/icon"),this.fastestStautsNode=this.findChild(this.node,"frame/fastestPass/stauts"),this.mPPlayerNode=this.findChild(this.node,"frame/minPower/player"),this.mPNameLabel=this.findChild(this.node,"frame/minPower/player/name").getComponent(cc.Label),this.mPNUmLabel=this.findChild(this.node,"frame/minPower/player/num").getComponent(cc.Label),this.mPProfNode=this.findChild(this.node,"frame/minPower/player/icon"),this.minStautsNode=this.findChild(this.node,"frame/minPower/stauts"),this.awardList=this.findChild(this.node,"frame/awardFrame/awardList"),this.btnRuleNode=this.findChild(this.node,"frame/power/btnRule"),this.btnSweepNode=this.findChild(this.node,"frame/btnList/btnSweep"),this.bntChallengeNode=this.findChild(this.node,"frame/btnList/bntChallenge"),this.firstPassNode=this.findChild(this.node,"frame/awardFrame/firstPass"),this.sweepPassNode=this.findChild(this.node,"frame/awardFrame/sweepPass")},t.prototype.initView=function(e){var t=u.SkyPassConfig.getConfigById(e.id);this.powerLabel.string=t.zhanli.toString(),this.myStauts.string=e.ownRecord>0?a.default.formatLeftTime6(e.ownRecord):m.WordConfig.getWord(60229),this.fPPlayerNode.active=e.topRecord>0,this.fastestStautsNode.active=!this.fPPlayerNode.active,this.mPPlayerNode.active=e.minRecord>0,this.minStautsNode.active=!this.mPPlayerNode.active,this.LevelLabel.string=cc.js.formatStr(m.WordConfig.getWord(60227),t.id);var i=cc.js.formatStr("texture/tianguan/icon_zhiye_%s",e.topProf),n=cc.js.formatStr("texture/tianguan/icon_zhiye_%s",e.minProf);e.topProf>0&&r.default.instance.loadSprite(this.fPProfNode.getComponent(cc.Sprite),i,!1),e.minProf>0&&r.default.instance.loadSprite(this.mPProfNode.getComponent(cc.Sprite),n,!1),e.topName&&(this.fPNameLabel.string=e.topName,this.fPTimeLabel.string=a.default.formatLeftTime6(e.topRecord),this.onAddEvent(this.fPNameLabel.node,w.UIHelper.showPlayerDetail.bind(this,e.topHeroid))),e.minName&&(this.mPNameLabel.string=e.minName,this.mPNUmLabel.string=e.minRecord.toString(),this.onAddEvent(this.mPNameLabel.node,w.UIHelper.showPlayerDetail.bind(this,e.minHeroid))),this.powerLabel.node.color=y.default.instance.totalFight>=t.zhanli?d.ColorConfig.GreenColor:d.ColorConfig.RedColor,this.myStauts.node.color=e.ownRecord>0?d.ColorConfig.GreenColor:d.ColorConfig.RedColor,this.sweepPassNode.active=e.ownRecord>0,this.firstPassNode.active=!this.sweepPassNode.active,this.btnSweepNode.active=e.ownRecord>0,this.btnRuleNode.active=void 0!=t.strategy;var o,s;e.ownRecord>0?(o=t.sweep_score,s=t.items):(o=t.first_ress,s=t.first_item),this.initItem(o,s,0),this.onAddEvent(this.btnSweepNode,this.onBtnSweep.bind(this,t)),this.onAddEvent(this.bntChallengeNode,this.onBtnChallenge.bind(this,t)),this.onAddEvent(this.btnRuleNode,function(){c.default.instance.createView(p.default.gameView.MethodView,null,t)})},t.prototype.initItem=function(e,t,i){if(this.awardList.children.forEach(function(e){e.active=!1}),e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=e[n],a=void 0;i<this.awardList.childrenCount?a=this.awardList.children[i]:(a=cc.instantiate(this.itemPrefab)).parent=this.awardList,a.active=!0,a.getComponent(M.default).initResource(parseInt(n),o),i++}if(t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){o=t[n],a=void 0;i<this.awardList.childrenCount?a=this.awardList.children[i]:(a=cc.instantiate(this.itemPrefab)).parent=this.awardList,a.active=!0;var s=h.ITemsConfig.getITemsConfigById(n),r=v.default.create(g.GameConst.ITEM_KIND.ITEM,s.id,o,s.quality);a.getComponent(M.default).init(r,!0),i++}},t.prototype.onBtnSweep=function(e){var t=b.default.skyPassInfo;if(t.sweepTimes>0)I.default.s_req_sweeep_skytower(e.id);else{var i=f.DefaultConfig.getConfigById(57),n=f.DefaultConfig.getConfigById(56).value;if(t.sweepTimes<=0&&n-b.default.skyPassInfo.buyTimes>0){var o=void 0;for(var a in i.value)if(Object.prototype.hasOwnProperty.call(i.value,a)){var s=i.value[a];if(b.default.skyPassInfo.buyTimes+1==parseInt(a)){o=s;break}}var r=cc.js.formatStr(m.WordConfig.getWord(60228),o);c.default.instance.createView(p.default.gameView.DialogCheck,null,r,function(e){e&&I.default.s_req_buy_sweep_skytower()})}else m.WordConfig.showWord(60222)}},t.prototype.onBtnChallenge=function(e){var t=b.default.skyPassInfo.top+1;if(e.id<=t)_.TianGuanManager.instance.startFightServer(e.id,y.default.instance),this.closeView();else{var i=cc.js.formatStr(m.WordConfig.getWord(60231),t);w.UIHelper.showTip(i)}},o([P(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=o([S],t)}(l.default);i.default=E,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/SkyPassConfig":"SkyPassConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/TianGuanManager":"TianGuanManager","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkyPassModel":"SkyPassModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/UIHelper":"UIHelper"}],TianGuanListView:[function(e,t,i){"use strict";cc._RF.push(t,"904cdZl3hdLHoBoZqHm+uHN","TianGuanListView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../base/ListViewBase"),r=e("../../base/ListViewItemBase"),c=e("../../config/ViewConfig"),l=e("./TianGuanCell"),d=cc._decorator,f=d.ccclass,g=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgSprie=[],t}return n(t,e),t.prototype.initItem=function(e,t){var i=this,n=e.getComponent(r.default),o=this._dataSource[t];n.init(t,o,function(e,t){i.onBtnTianGuanClick(e,t)}),this.curSelectIndex==t?e.getComponent(cc.Sprite).spriteFrame=this.bgSprie[1]:e.getComponent(cc.Sprite).spriteFrame=this.bgSprie[0]},t.prototype.setCurSlectIndex=function(e){var t=this;this._scrollView.content.children.forEach(function(i){i.getComponent(cc.Sprite).spriteFrame=t.bgSprie[0],i.getComponent(l.default).curSelectIndex=void 0,i.getComponent(l.default).index==e&&(i.getComponent(cc.Sprite).spriteFrame=t.bgSprie[1])}),this.curSelectIndex=e},t.prototype.onBtnTianGuanClick=function(e,t){this.setCurSlectIndex(t),a.default.instance.createView(c.default.gameView.TianGuanInfoView,null,e)},o([g({type:[cc.SpriteFrame]})],t.prototype,"bgSprie",void 0),t=o([f],t)}(s.default);i.default=h,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../base/ListViewBase":"ListViewBase","../../base/ListViewItemBase":"ListViewItemBase","../../config/ViewConfig":"ViewConfig","./TianGuanCell":"TianGuanCell"}],TianGuanManager:[function(e,t,i){"use strict";cc._RF.push(t,"19fd790/TtBxKLdXh4djKP0","TianGuanManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../../engine/UIManager"),c=e("../config/GameConst"),l=e("../config/MapConfig"),d=e("../config/SkyPassConfig"),f=e("../config/ViewConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../model/RoleInfoModel"),p=e("../network/HttpHelper"),m=e("../network/SocketClient"),C=e("../prefab/GameManager"),_=e("./PvpManager"),v=function(){function e(){this.end_tick=60,this.player_buff=[],this.monster_buff=[],this.monsterNum=0,this.killNum=0}return e.prototype.init=function(e){this.gameView=e},e.prototype.startFightServer=function(t,i){if(void 0===t&&(t=1),_.PvpManager.instance.isFighting||e.instance.isFighting)g.WordConfig.showWord(60246);else{if(this.level=t,this.attackRole=i,this.isFighting)return g.WordConfig.showWord(60246),-1;setTimeout(function(){m.default.s_enter_skytower(t)},200)}},e.prototype.startFightClient=function(e,t){void 0===t&&(t=null);var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_enter_skytower,e);if(o.Logger.log("startFightClient",i),1==i.getRet()){var r=i.getEndTick();this.end_tick=1e3*r,this.startFight(this.level),this.monsterNum=i.getMonNum(),n.EventManager.instance.dispatch(h.CommonEvent.Event_SkyPass_fight_start)}},e.prototype.startFight=function(e){if(C.default.instance.BattleType=c.BattleType.PvE,C.default.instance.serverFightType=c.ServerFightType.TianGuan,this.level=e,this.attackRole=u.default.instance,this.tianguanConfig=d.SkyPassConfig.getConfigById(this.level),this.killNum=0,!this.tianguanConfig)return p.default.sendBugLog("\u5929\u5173\u5173\u5361\u914d\u7f6e\u9519\u8bef"+this.level),void o.Logger.error("\u5929\u5173\u5173\u5361\u914d\u7f6e\u9519\u8bef",this.level);o.Logger.log("startFight==",this.level,this.tianguanConfig,this.player_buff,this.monster_buff),this.gameView.cityView.node.active=!1,r.default.instance.createView(f.default.gameView.TianGuanFightView),this.isFighting=!0},e.prototype.endFightByServer=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_challenge_skytower_result,e),i=t.getRet(),n=t.getDuration(),c=1==t.getIsfirst();this.tianguanConfig=null,o.Logger.log("endFightByServer",t),this.gameView.reInitGridPosition(l.MapConfig.MAP_TYPE.Field),r.default.instance.closeView(f.default.gameView.TianGuanFightView),this.isFighting=!1;var d=r.default.instance.getViewByPath(f.default.gameView.game);d&&r.default.instance.createViewByParent(f.default.gameView.TianGuanPrefab,d.node),1==i?r.default.instance.createView(f.default.gameView.TianguanEndingView,null,i,this.level,c,n):r.default.instance.createView(f.default.gameView.TianguanEndingView,null,i,this.level)},e.instance=new e,e}();i.TianGuanManager=v,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/SkyPassConfig":"SkyPassConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/RoleInfoModel":"RoleInfoModel","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","./PvpManager":"PvpManager"}],TianGuanRankCell:[function(e,t,i){"use strict";cc._RF.push(t,"2b30cD0jMlPAo2mY/dH5kLJ","TianGuanRankCell");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/ResourcesManager"),r=e("../../base/ListViewItemBase"),c=e("../../config/WordConfig"),l=e("../../utils/MusicHelper"),d=e("../../utils/UIHelper"),f=e("../../model/CostumeModel"),g=cc._decorator,h=g.ccclass,u=g.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelLabel=null,t.timeLabel=null,t.nameLabel=null,t.rankSprite=null,t.touxiang=null,t.touxiangkuang=null,t.rankLabel=null,t.profSprite=null,t.rankIconSprite=[],t}return n(t,e),t.prototype.init=function(t,i){if(e.prototype.init.call(this,t,i),this.params=i,this.levelLabel.string=cc.js.formatStr(c.WordConfig.getWord(60227),this.params.id),this.timeLabel.string=c.WordConfig.getWord(61665)+a.default.formatLeftTime5(this.params.record),this.nameLabel.string=this.params.name,this.rankSprite.node.active=this.params.rank<=3,this.rankLabel.node.active=this.params.rank>3,this.rankLabel.string=this.params.rank.toString(),f.CostumeModel.setCostSF(this.touxiang,f.CostumeType.Head,this.params.personalize.portrait),f.CostumeModel.setCostSF(this.touxiangkuang,f.CostumeType.HeadFM,this.params.personalize.portrait_skin),this.params.prof>0){var n=cc.js.formatStr("texture/tianguan/icon_zhiye_%s",this.params.prof);s.default.instance.loadSprite(this.profSprite.getComponent(cc.Sprite),n,!0)}this.params.rank<=3&&(this.rankSprite.spriteFrame=this.rankIconSprite[this.params.rank-1]),this.onAddEvent(this.nameLabel.node,d.UIHelper.showPlayerDetail.bind(this,this.params.heroid))},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e);var n=0;e.on(cc.Node.EventType.TOUCH_START,function(){n=a.default.now()}),e.on(cc.Node.EventType.TOUCH_END,function(){if(e.getComponent(cc.Button).enabled){l.MusicHelper.play_click();var i=a.default.now();t(0!=n&&i-n>=400?1:0)}},e)},o([u(cc.Label)],t.prototype,"levelLabel",void 0),o([u(cc.Label)],t.prototype,"timeLabel",void 0),o([u(cc.Label)],t.prototype,"nameLabel",void 0),o([u(cc.Sprite)],t.prototype,"rankSprite",void 0),o([u(cc.Sprite)],t.prototype,"touxiang",void 0),o([u(cc.Sprite)],t.prototype,"touxiangkuang",void 0),o([u(cc.Label)],t.prototype,"rankLabel",void 0),o([u(cc.Sprite)],t.prototype,"profSprite",void 0),o([u({type:[cc.SpriteFrame]})],t.prototype,"rankIconSprite",void 0),t=o([h],t)}(r.default);i.default=p,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/ResourcesManager":"ResourcesManager","../../base/ListViewItemBase":"ListViewItemBase","../../config/WordConfig":"WordConfig","../../model/CostumeModel":"CostumeModel","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper"}],TianGuanRankPanel:[function(e,t,i){"use strict";cc._RF.push(t,"ac7c1UUr0JBeZUUnQAB6MHk","TianGuanRankPanel");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../base/ListViewBase"),l=e("../../config/ViewConfig"),d=e("../../config/WordConfig"),f=e("../../model/RoleInfoModel"),g=e("../../model/CostumeModel"),h=e("../../model/SkyPassModel"),u=e("../PublicTipView"),p=e("../../network/SocketClient"),m=e("../../event/CommonEvent"),C=e("../../../engine/EventManager"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onInitChild=function(){this.onAddEvent(this.btnRuleNode,this.onBtnRule.bind(this)),C.EventManager.instance.on(m.CommonEvent.Event_SkyPass_refresh,this.refreshRankByServer,this),p.default.s_req_skytower_info()},t.prototype.refreshRankByServer=function(){var e=h.default.rankInfo,t=h.default.skyPassInfo;this.nameLabel.string=f.default.instance.roleName,this.levelLabel.string=cc.js.formatStr(d.WordConfig.getWord(60227),t.top),this.timeLabel.string=d.WordConfig.getWord(61665)+a.default.formatLeftTime5(t.record);var i=h.default.ownRank;this.rankLabel.string=i.toString(),this.rankLabel.node.active=i>0,this.unRankLabel.active=i<=0,g.CostumeModel.setCostSF(this.touxiang,g.CostumeType.Head),g.CostumeModel.setCostSF(this.touxiangkuang,g.CostumeType.HeadFM),this.scrollView.reloadData(e)},t.prototype.initFindNode=function(){this.rankLabel=this.findChild(this.node,"frame/myRank/rank").getComponent(cc.Label),this.unRankLabel=this.findChild(this.node,"frame/myRank/unRank"),this.nameLabel=this.findChild(this.node,"frame/myRank/name").getComponent(cc.Label),this.levelLabel=this.findChild(this.node,"frame/myRank/level").getComponent(cc.Label),this.timeLabel=this.findChild(this.node,"frame/myRank/time").getComponent(cc.Label),this.scrollView=this.findChild(this.node,"frame/middle/scrollView").getComponent(c.default),this.btnRuleNode=this.findChild(this.node,"frame/top/btnRule"),this.touxiang=this.findChild(this.node,"frame/myRank/touxiang").getComponent(cc.Sprite),this.touxiangkuang=this.findChild(this.node,"frame/myRank/touxiangkuang").getComponent(cc.Sprite)},t.prototype.onBtnRule=function(){s.default.instance.createView(l.default.gameView.PublicTipView,null,u.RuleType.TYPE_TIANGUAN_RNAK)},t=o([v],t)}(r.default));i.default=y,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../base/ListViewBase":"ListViewBase","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkyPassModel":"SkyPassModel","../../network/SocketClient":"SocketClient","../PublicTipView":"PublicTipView"}],TianGuanShopView:[function(e,t,i){"use strict";cc._RF.push(t,"523a9Jfo09Myoa0H2V2zMXP","TianGuanShopView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/ITemsConfig"),l=e("../../config/SkypassShopConfig"),d=e("../../config/ViewConfig"),f=e("../../config/WordConfig"),g=e("../../event/CommonEvent"),h=e("../../model/RoleInfoModel"),u=e("../../model/SkyPassModel"),p=e("../../prefab/ItemPrefab"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(g.CommonEvent.Event_SkyPass_shop_refresh,this.initView,this),this.initView()},t.prototype.initFindNode=function(){this.scoreLabel=this.findChild(this.node,"frame/score").getComponent(cc.Label),this.shopListNode=this.findChild(this.node,"frame/scrollView/view/content"),this.shopItemNode=this.findChild(this.shopListNode,"item")},t.prototype.initView=function(){var e=l.SkypassShopConfig.getConfigList();this.scoreLabel.string=h.default.instance.tianGuanScore.toString();for(var t=this.shopListNode.childrenCount>e.length?this.shopListNode.childrenCount:e.length,i=0;i<t;i++){var n=void 0;i<this.shopListNode.childrenCount?n=this.shopListNode.children[i]:(n=cc.instantiate(this.shopItemNode)).parent=this.shopListNode,i<e.length?this.initShopItem(n,e[i]):n.active=!1}},t.prototype.initShopItem=function(e,t){e.active=!((h.default.instance.level<t.level||u.default.skyPassInfo.top<t.stage)&&1==t.show);var i=u.default.getShopDataById(t.id),n=this.findChild(e,"cost/num").getComponent(cc.Label),o=this.findChild(e,"xiangou/count").getComponent(cc.Label),a=this.findChild(e,"btnBuy"),s=this.findChild(e,"stop"),r=this.findChild(e,"itemPrefab"),l=this.findChild(e,"lock").getComponent(cc.Label);for(var d in o.string=void 0==i?t.maxnum.toString():(t.maxnum-i.times).toString(),l.node.active=h.default.instance.level<t.level||u.default.skyPassInfo.top<t.stage,a.active=!l.node.active&&(void 0==i||t.maxnum-i.times>0),s.active=!l.node.active&&!a.active,h.default.instance.level<t.level?l.string=cc.js.formatStr(f.WordConfig.getWord(60424),t.level):u.default.skyPassInfo.top<t.stage&&(l.string=cc.js.formatStr(f.WordConfig.getWord(60559),t.stage)),t.unit_price)if(Object.prototype.hasOwnProperty.call(t.unit_price,d)){var g=t.unit_price[d];n.string=g}var m=c.ITemsConfig.getITemsConfigById(t.item_id);r.getComponent(p.default).init(m,!0),this.onAddEvent(a,this.onBtnBuy.bind(this,t))},t.prototype.onBtnBuy=function(e){var t;for(var i in e.unit_price)Object.prototype.hasOwnProperty.call(e.unit_price,i)&&(t=e.unit_price[i]);h.default.instance.tianGuanScore>=t?s.default.instance.createView(d.default.gameView.TianguanShopBuyView,null,e):f.WordConfig.showWord(60265)},t=o([C],t)}(r.default));i.default=_,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ITemsConfig":"ITemsConfig","../../config/SkypassShopConfig":"SkypassShopConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkyPassModel":"SkyPassModel","../../prefab/ItemPrefab":"ItemPrefab"}],TianGuanView:[function(e,t,i){"use strict";cc._RF.push(t,"e6360fk981Hpa+C259N2ZyE","TianGuanView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../base/ListViewBase"),l=e("../../config/DefaultConfig"),d=e("../../config/SkyPassConfig"),f=e("../../config/ViewConfig"),g=e("../../config/WordConfig"),h=e("../../event/CommonEvent"),u=e("../../model/RoleInfoModel"),p=e("../../model/SkyPassModel"),m=e("../../network/SocketClient"),C=e("../../utils/UIHelper"),_=e("../PublicTipView"),v=e("./TianGuanListView"),y=cc._decorator,b=y.ccclass,I=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){a.EventManager.instance.on(h.CommonEvent.Event_SkyPass_rank_refresh,this.initRankInfo,this),a.EventManager.instance.on(h.CommonEvent.Event_SkyPass_refresh,this.initView,this),a.EventManager.instance.on(h.CommonEvent.Event_SkyPass_score_refresh,this.handlerRefreshScore,this),a.EventManager.instance.on(h.CommonEvent.Event_SkyPass_fight_start,this.closeView,this),m.default.s_req_skytower_info(),m.default.s_req_skytower_rank()},t.prototype.initView=function(){var e=d.SkyPassConfig.getConfigList(),t=p.default.skyPassInfo,i=p.default.skyPassInfo.top-1>=0?p.default.skyPassInfo.top-1:0;this.scrollViewNode.getComponent(c.default).reloadData(e,i),this.scrollViewNode.getComponent(v.default).setCurSlectIndex(p.default.skyPassInfo.top);var n=l.DefaultConfig.getConfigById(55).value;this.sweepTimesLabel.string=t.sweepTimes+"/"+n,this.sweepBuyLabel.string=(l.DefaultConfig.getConfigById(56).value-t.buyTimes).toString(),this.resourceLabel.string=u.default.instance.tianGuanScore.toString(),this.onAddEvent(this.btnRuleNode,this.onBtnRule.bind(this)),this.onAddEvent(this.btnRankNode,this.onBtnRank.bind(this)),this.onAddEvent(this.btnShopNode,this.onBtnShop.bind(this)),this.onAddEvent(this.btnAddNode,this.onBtnBuy.bind(this)),this.onAddEvent(this.btnSettingNode,this.onBtnSetting.bind(this))},t.prototype.initFindNode=function(){this.defaultRankText="<color=#CAA10E>%s.</color><color=#00bee1><u>%s</u></color> <color=#ffffff>"+g.WordConfig.getWord(60227),this.rankNode=this.findChild(this.node,"rank"),this.rankInfoNode=this.findChild(this.rankNode,"rankInfo"),this.btnRuleNode=this.findChild(this.node,"btnRule"),this.btnRankNode=this.findChild(this.node,"btnRank"),this.btnShopNode=this.findChild(this.node,"btnShop"),this.btnSettingNode=this.findChild(this.node,"btnSetting"),this.resourceLabel=this.findChild(this.node,"resource/num").getComponent(cc.Label),this.sweepTimesLabel=this.findChild(this.node,"sweep/times").getComponent(cc.Label),this.btnAddNode=this.findChild(this.node,"sweep/btnAdd"),this.sweepBuyLabel=this.findChild(this.node,"sweepBuy/times").getComponent(cc.Label),this.scrollViewNode=this.findChild(this.node,"scrollView")},t.prototype.initRankInfo=function(){for(var e=p.default.rankInfo,t=e.length>3?3:e.length,i=0;i<t;i++){var n=void 0;i<this.rankNode.childrenCount?n=this.rankNode.children[i]:(n=cc.instantiate(this.rankInfoNode)).parent=this.rankNode;var o=e[i];o?(n.active=!0,n.getComponent(cc.RichText).string=cc.js.formatStr(this.defaultRankText,o.rank,o.name,o.id),this.onAddEvent(n,C.UIHelper.showPlayerDetail.bind(this,o.heroid))):n.active=!1}},t.prototype.handlerRefreshScore=function(){this.resourceLabel.string=u.default.instance.tianGuanScore.toString()},t.prototype.onBtnRule=function(){s.default.instance.createView(f.default.gameView.PublicTipView,null,_.RuleType.TYPE_TIANGUAN)},t.prototype.onBtnRank=function(){s.default.instance.createView(f.default.gameView.TianGuanRankPanel)},t.prototype.onBtnShop=function(){m.default.s_req_dungeon_shop()},t.prototype.onBtnSetting=function(){s.default.instance.createView(f.default.gameView.setting)},t.prototype.onBtnBuy=function(){var e=l.DefaultConfig.getConfigById(57),t=l.DefaultConfig.getConfigById(56).value;if(p.default.skyPassInfo.buyTimes+1<=parseInt(t)){var i=void 0;for(var n in e.value)if(Object.prototype.hasOwnProperty.call(e.value,n)){var o=e.value[n];if(p.default.skyPassInfo.buyTimes+1==parseInt(n)){i=o;break}}var a=cc.js.formatStr(g.WordConfig.getWord(60228),i);s.default.instance.createView(f.default.gameView.DialogCheck,null,a,function(e){e&&m.default.s_req_buy_sweep_skytower()})}else g.WordConfig.showWord(60223)},t=o([b],t)}(r.default));i.default=I,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../base/ListViewBase":"ListViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/SkyPassConfig":"SkyPassConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkyPassModel":"SkyPassModel","../../network/SocketClient":"SocketClient","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView","./TianGuanListView":"TianGuanListView"}],TianguanEndingView:[function(e,t,i){"use strict";cc._RF.push(t,"031b1Sp4G5OJIkoVpvpEDLI","TianguanEndingView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/GameConst"),c=e("../../config/ITemsConfig"),l=e("../../config/SkyPassConfig"),d=e("../../config/ViewConfig"),f=e("../../manager/TianGuanManager"),g=e("../../model/ItemInfoModel"),h=e("../../model/RoleInfoModel"),u=e("../../prefab/ItemPrefab"),p=cc._decorator,m=p.ccclass,C=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isfirst=!1,t}return n(t,e),t.prototype.onLoad=function(){this.victoryBg=this.findChild(this.node,"victoryBg"),this.defeatedBg=this.findChild(this.node,"defeatedBg"),this.btnNext=this.findChild(this.victoryBg,"btnList/btnNext")},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"victoryBg/btnList/makeSure"),this.closeView.bind(this))},t.prototype.onInitChild=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=999),this.result=e,this.config=l.SkyPassConfig.getConfigById(t),this.isfirst=i,this.duration=n},t.prototype.onShow=function(){this.refresh()},t.prototype.refresh=function(){var e=this;if(1==this.result){this.victoryBg.active=!0,this.defeatedBg.active=!1,this.findChild(this.victoryBg,"costTIme").getComponent(cc.Label).string=this.duration+"\u79d2";var t=l.SkyPassConfig.getConfigById(this.config.id+1);if(this.btnNext.active=t&&this.isfirst,this.isfirst){this.findChild(this.victoryBg,"firstFinish").active=!0,this.findChild(this.victoryBg,"otherFinish").active=!1;var i=this.findChild(this.victoryBg,"firstFinish/itemNode"),n=this.findChild(this.victoryBg,"firstFinish/ItemPrefab");if(n.active=!1,i.removeAllChildren(),this.config){if(this.config.first_ress)for(var o in this.config.first_ress){(a=cc.instantiate(n)).active=!0,a.getComponent(u.default).initResource(Number(o),this.config.first_ress[o]),i.addChild(a)}if(this.config.first_item)for(var o in this.config.first_item){var a;(a=cc.instantiate(n)).active=!0;var s=c.ITemsConfig.getITemsConfigById(o),d=g.default.create(r.GameConst.ITEM_KIND.ITEM,o,this.config.first_item[o],s.quality);a.getComponent(u.default).init(d,!0),i.addChild(a)}if(t){this.onAddEvent(this.btnNext,function(){f.TianGuanManager.instance.startFightServer(t.id,h.default.instance),e.closeView()});var p=this.getChild(this.btnNext,"costTIme",cc.Label),m=3;p.string="("+m+"s)",this.timeCount=function(){m--,p.string="("+m+"s)",m<0&&(f.TianGuanManager.instance.startFightServer(t.id,h.default.instance),e.closeView())},this.schedule(this.timeCount,1)}}}else this.findChild(this.victoryBg,"firstFinish").active=!1,this.findChild(this.victoryBg,"otherFinish").active=!0}else this.defeatedBg.active=!0,this.victoryBg.active=!1,this.onAddEvent(this.findChild(this.node,"darkLayer1"),this.closeView.bind(this))},t.prototype.closeView=function(){e.prototype.closeView.call(this),1==this.result||a.default.instance.createView(d.default.gameView.TianGuanInfoView,null,this.config.id),this.unschedule(this.timeCount)},t=o([m],t)}(s.default));i.default=C,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/SkyPassConfig":"SkyPassConfig","../../config/ViewConfig":"ViewConfig","../../manager/TianGuanManager":"TianGuanManager","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../prefab/ItemPrefab":"ItemPrefab"}],TianguanEntrance:[function(e,t,i){"use strict";cc._RF.push(t,"92163VOFCJGbqhnjeatDHdW","TianguanEntrance");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/NewFuncitonConfig"),c=e("../../config/ViewConfig"),l=e("../../config/WordConfig"),d=e("../../model/NewFeaturesModel"),f=e("../../utils/UIHelper"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.btn_close=this.getChild(this.node,"btn_close"),this.btnStart=this.getChild(this.node,"btnStart"),this.onAddEvent(this.btn_close,function(){t.city.onClickNpcDialog(),t.node.active=!1}),this.onAddEvent(this.btnStart,function(){if(d.NewFeaturesModel.instance.CheckBeAbleToOpen(1008)){var e=a.default.instance.getViewByPath(c.default.gameView.game);e&&a.default.instance.createViewByParent(c.default.gameView.TianGuanPrefab,e.node)}else{var t=cc.js.formatStr(l.WordConfig.getWord(60314),r.NewFuncitonConfig.getFunctionConfig("1008").open_limit);f.UIHelper.showTip(t)}})},t.prototype.init=function(e){this.city=e},t=o([h],t)}(s.default));i.default=u,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/NewFuncitonConfig":"NewFuncitonConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/NewFeaturesModel":"NewFeaturesModel","../../utils/UIHelper":"UIHelper"}],TianguanFightView:[function(e,t,i){"use strict";cc._RF.push(t,"8e871Mpe9ZAvIRpvMgTfgEK","TianguanFightView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/UIManager"),s=e("../../engine/ViewBase"),r=e("../config/GameConst"),c=e("../config/ViewConfig"),l=e("../config/WordConfig"),d=e("../manager/TianGuanManager"),f=e("../model/ServerTime"),g=e("../network/SocketClient"),h=e("../serverFight/ServerFightView"),u=cc._decorator,p=u.ccclass,m=u.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtFloor=null,t.btnHelp=null,t.btnGiveUp=null,t.txtLeftTime=null,t.txtLeftMonster=null,t.serverFightPrefab=null,t.serverFightViewNode=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.serverFightView=cc.instantiate(this.serverFightPrefab),this.serverFightView.getComponent(h.default).setFightType(r.ServerFightType.TianGuan),this.serverFightViewNode.addChild(this.serverFightView)},t.prototype.onDisable=function(){this.serverFightView.getComponent(h.default).clearFight(),this.unschedule(this.timeCount)},t.prototype.onEnable=function(){this.setTopUI(),this.txtFloor.string=cc.js.formatStr(l.WordConfig.getWord(60227),d.TianGuanManager.instance.level),this.onAddEvent(this.btnGiveUp,function(){a.default.instance.createView(c.default.gameView.DialogCheck,null,l.WordConfig.getWord(60499),function(e){e&&g.default.s_req_quit_skytower()})});var e=d.TianGuanManager.instance.tianguanConfig;e&&(this.btnHelp.active=void 0!=e.strategy,this.onAddEvent(this.btnHelp,function(){a.default.instance.createView(c.default.gameView.MethodView,null,e)})),this.refreshTime()},t.prototype.init=function(){},t.prototype.update=function(){this.txtLeftMonster.string=d.TianGuanManager.instance.monsterNum-d.TianGuanManager.instance.killNum+""},t.prototype.refreshTime=function(){var e=this,t=d.TianGuanManager.instance.end_tick-f.ServerTime.getServerTime();t<0&&(t=0);var i=Math.floor(t/1e3);this.txtLeftTime.string=i+l.WordConfig.getWord(60500),this.timeCount=function(){(i=Math.floor((d.TianGuanManager.instance.end_tick-f.ServerTime.getServerTime())/1e3))<0&&(i=0),e.txtLeftTime.string=i+l.WordConfig.getWord(60500)},this.schedule(this.timeCount,1)},o([m({type:cc.Label})],t.prototype,"txtFloor",void 0),o([m({type:cc.Node})],t.prototype,"btnHelp",void 0),o([m({type:cc.Node})],t.prototype,"btnGiveUp",void 0),o([m({type:cc.Label})],t.prototype,"txtLeftTime",void 0),o([m({type:cc.Label})],t.prototype,"txtLeftMonster",void 0),o([m({type:cc.Prefab})],t.prototype,"serverFightPrefab",void 0),o([m({type:cc.Node})],t.prototype,"serverFightViewNode",void 0),t=o([p],t)}(s.default);i.default=C,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../manager/TianGuanManager":"TianGuanManager","../model/ServerTime":"ServerTime","../network/SocketClient":"SocketClient","../serverFight/ServerFightView":"ServerFightView"}],TianguanShopBuyView:[function(e,t,i){"use strict";cc._RF.push(t,"94543BbYSBMjpfmnv0FIZLT","TianguanShopBuyView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ITemsConfig"),r=e("../../config/WordConfig"),c=e("../../model/RoleInfoModel"),l=e("../../model/SkyPassModel"),d=e("../../network/SocketClient"),f=e("../../prefab/ItemPrefab"),g=cc._decorator,h=g.ccclass,u=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentIndex=1,t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onInitChild=function(e){this.config=e,this.data=l.default.getShopDataById(this.config.id);var t=void 0==this.data?this.config.maxnum:this.config.maxnum-this.data.times;for(var i in this.countLabel.string=t.toString(),this.amountEditBox.string=this.currentIndex>t?t.toString():this.currentIndex.toString(),this.config.unit_price)Object.prototype.hasOwnProperty.call(this.config.unit_price,i)&&(this.unitPrice=this.config.unit_price[i],this.moneyLabel.string=(this.unitPrice*this.currentIndex).toString());var n=s.ITemsConfig.getITemsConfigById(this.config.item_id);this.itemNode.getComponent(f.default).init(n,!0),this.onAddEvent(this.reduceBtn,this.onBtnClickReduce.bind(this,!1)),this.onAddEvent(this.addBtn,this.onBtnClickReduce.bind(this,!0)),this.onAddEvent(this.buyBtn,this.onBtnBuy.bind(this)),this.onAddEvent(this.maxBtn,this.onBtnClickMax.bind(this))},t.prototype.initFindNode=function(){this.itemNode=this.findChild(this.node,"frame/ItemPrefab"),this.countLabel=this.findChild(this.node,"frame/xiangou/count").getComponent(cc.Label),this.moneyLabel=this.findChild(this.node,"frame/cost/money").getComponent(cc.Label),this.reduceBtn=this.findChild(this.node,"frame/btnRed"),this.addBtn=this.findChild(this.node,"frame/btnAdd"),this.maxBtn=this.findChild(this.node,"frame/btnMax"),this.buyBtn=this.findChild(this.node,"frame/btnDuihuan"),this.amountEditBox=this.findChild(this.node,"frame/amountEditBox").getComponent(cc.EditBox)},t.prototype.setLabelString=function(){var e=this.unitPrice*this.currentIndex;this.amountEditBox.string=this.currentIndex.toString(),this.moneyLabel.string=e.toString()},t.prototype.onEventMathFloor=function(e){e.string;var t=void 0==this.data?this.config.maxnum:this.config.maxnum-this.data.times,i=c.default.instance.tianGuanScore/this.unitPrice>t?t:Math.floor(c.default.instance.tianGuanScore/this.unitPrice),n=parseInt(e.string);n=isNaN(n)?1:n,this.currentIndex=n>i?i:n,this.setLabelString()},t.prototype.onBtnClickReduce=function(e){if(e){var t=void 0==this.data?this.config.maxnum:this.config.maxnum-this.data.times,i=c.default.instance.tianGuanScore/this.unitPrice>t?t:Math.floor(c.default.instance.tianGuanScore/this.unitPrice);this.currentIndex=this.currentIndex+1>i?i:this.currentIndex+1}else this.currentIndex=this.currentIndex-1>0?this.currentIndex-1:1;this.setLabelString()},t.prototype.onBtnClickMax=function(){var e=void 0==this.data?this.config.maxnum:this.config.maxnum-this.data.times;this.currentIndex=c.default.instance.tianGuanScore/this.unitPrice>e?e:Math.floor(c.default.instance.tianGuanScore/this.unitPrice),this.setLabelString()},t.prototype.onBtnBuy=function(){c.default.instance.tianGuanScore>=this.currentIndex*this.unitPrice?(d.default.s_req_buy_dungeon_shop(this.config.id,this.currentIndex),this.closeView()):r.WordConfig.showWord(60265)},t=o([h],t)}(a.default));i.default=u,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../model/RoleInfoModel":"RoleInfoModel","../../model/SkyPassModel":"SkyPassModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],TipView:[function(e,t,i){"use strict";cc._RF.push(t,"4c1e11ELbFEv5lHVilGHYji","TipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../../engine/UIManager"),r=e("../config/ViewConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pianYiY=-50,t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=cc.Color.WHITE),void 0===n&&(n=cc.v2(0,100)),this.tips=e,this.color=i,this.time=t,this.pos=n},t.prototype.onShow=function(){var e=this;i.tipCount++,s.default.instance.setTopUI(r.default.gameView.tip),this.node.zIndex=999,this.findChild(this.node,"panel/content").getComponent(cc.Label).string=this.tips,this.findChild(this.node,"panel/content").color=this.color,this.node.setPosition(0,i.tipCount*this.pianYiY),cc.tween(this.node).by(this.time,{position:this.pos}).to(.2,{opacity:0}).start(),this.scheduleOnce(function(){e.closeView()},this.time)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),i.tipCount--},t.tipCount=0,t=i=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ViewConfig":"ViewConfig"}],TitleModel:[function(e,t,i){"use strict";cc._RF.push(t,"c8750jN2ZtB9KK218LJQhgm","TitleModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../event/CommonEvent"),c=e("./RoleInfoModel"),l=function(){function e(){this.title=0,this.limit=0}return e.proto2Model=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_get_title,t);this.nowTitle.title=i.getCurTitle().getTitle(),this.nowTitle.limit=i.getCurTitle().getLimit(),c.default.instance.title=this.nowTitle.title,o.Logger.log("TitleModel=",i),this.modelList=[];for(var l=i.getTitleListList(),d=0;d<l.length;d++){var f=new e;f.title=l[d].getTitle(),f.limit=l[d].getLimit(),this.modelList[d]=f}n.EventManager.instance.dispatch(r.CommonEvent.Event_Title_update)},e.nowTitle=new e,e.modelList=[],e}();i.TitleModel=l,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../event/CommonEvent":"CommonEvent","./RoleInfoModel":"RoleInfoModel"}],ToStrongerItemBase:[function(e,t,i){"use strict";cc._RF.push(t,"60e01U2sdBPfrvwYb67lVJB","ToStrongerItemBase");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../../engine/ViewBase"),a=e("../../utils/JumpActionUtils");(function(e){e[e.ResourceItem=0]="ResourceItem",e[e.QuestionItem=1]="QuestionItem"})(i.ToStrongerItemTye||(i.ToStrongerItemTye={}));var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(e,t){this.toStrongerView=t},t.prototype.initUnfoldContent=function(){},t.prototype.foldContentCallback=function(){},t.changeList=function(e,t){var i=this.lastContextMap.get(e);i&&i.node&&i.foldContentCallback(),this.lastContextMap.set(e,t)},t.prototype.bindJumpAction=function(e){var t=this;e.forEach(function(e,i){t.onAddEvent(i,t.onClickJump.bind(t,e))})},t.prototype.onClickJump=function(e){a.default.doAction(e),this.toStrongerView.closeView()},t.lastContextMap=new Map,t}(o.default);i.ToStrongerItemBase=s,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../utils/JumpActionUtils":"JumpActionUtils"}],ToStrongerManager:[function(e,t,i){"use strict";cc._RF.push(t,"dd8f8PFIG5L9pNfvIxtpgah","ToStrongerManager");cc._RF.pop()},{}],ToStrongerView:[function(e,t,i){"use strict";cc._RF.push(t,"a06fahBA2RKbJuHDjB/Hyxw","ToStrongerView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/BestrongernConfig"),r=e("../../model/NewFeaturesModel"),c=e("./ToStrongerItemBase"),l=cc._decorator,d=l.ccclass,f=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.top=null,t.rolePower=[],t.FAQ=[],t.gainResource=[],t.topTagArr=[],t.inittype=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.onAddEvent(this.btn_close,this.closeView.bind(this)),this.onAddEvent(this.rolePower[0],this.rolePower0Click.bind(this)),this.onAddEvent(this.gainResource[0],this.gainResourceClick.bind(this)),this.onAddEvent(this.FAQ[0],this.FAQ_click.bind(this)),this.topTagArr.push(this.rolePower),this.topTagArr.push(this.FAQ),this.topTagArr.push(this.gainResource),this._roleItem=this.findChild(this.node,"items/roleItem"),this.resourceItem=this.findChild(this.node,"items/resourceItem"),this.questionItem=this.findChild(this.node,"items/questionItem"),this.content=this.findChild(this.node,"bg/ScrollView/view/content")},t.prototype.onInitChild=function(e){void 0===e&&(e=null),this.inittype=e},t.prototype.onShow=function(){this.inittype>200?this.gainResourceClick():this.inittype>300?this.FAQ_click():this.rolePower0Click()},t.prototype.rolePower0Click=function(){this.clickTag(this.rolePower),this.loadContent(s.ToStrongerType.RolePower,this._roleItem)},t.prototype.gainResourceClick=function(){this.clickTag(this.gainResource),this.loadContent(s.ToStrongerType.GainResource,this.resourceItem)},t.prototype.FAQ_click=function(){this.clickTag(this.FAQ),this.loadContent(s.ToStrongerType.FAQ,this.questionItem)},t.prototype.loadContent=function(e,t){var i=this;s.BestrongernConfig.getConfigMapByType(e).forEach(function(n,o){if(e===s.ToStrongerType.RolePower){var a=n.rolePowerJumpId;if(!0!==r.NewFeaturesModel.instance.CheckBeAbleToOpen(a))return}var l=cc.instantiate(t);l.parent=i.content,l.active=!0;var d=l.getComponent(c.ToStrongerItemBase);d&&d.init&&d.init(n,i),i.inittype&&i.inittype==o&&(d.initUnfoldContent(),i.inittype=null)})},t.prototype.clickTag=function(e){for(var t=0;t<this.topTagArr.length;t++){var i=this.topTagArr[t];e[0]===i[0]?(i[0].active=!1,i[1].active=!0):(i[0].active=!0,i[1].active=!1)}this.content.removeAllChildren()},t.prototype.start=function(){},o([f(cc.Node)],t.prototype,"btn_close",void 0),o([f(cc.Node)],t.prototype,"top",void 0),o([f([cc.Node])],t.prototype,"rolePower",void 0),o([f([cc.Node])],t.prototype,"FAQ",void 0),o([f([cc.Node])],t.prototype,"gainResource",void 0),t=o([d],t)}(a.default);i.default=g,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/BestrongernConfig":"BestrongernConfig","../../model/NewFeaturesModel":"NewFeaturesModel","./ToStrongerItemBase":"ToStrongerItemBase"}],TopResources:[function(e,t,i){"use strict";cc._RF.push(t,"0cf0bk81j1IHYUYYSaX4VpT","TopResources");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/SpriteFrameComponent"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/DefaultConfig"),d=e("../config/GameConfig"),f=e("../config/GameConst"),g=e("../config/MapConfig"),h=e("../config/ViewConfig"),u=e("../config/WordConfig"),p=e("../event/CommonEvent"),m=e("../model/ChargeGiftModel"),C=e("../model/CostumeModel"),_=e("../model/FightModel"),v=e("../model/RedDotModel"),y=e("../model/RoleInfoModel"),b=e("../utils/UIHelper"),I=cc._decorator,M=I.ccclass,w=(I.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topBgList=[],t}return n(t,e),t.prototype.onLoad=function(){this.initFindNode()},t.prototype.onEnable=function(){this.initView(),a.EventManager.instance.on(p.CommonEvent.Event_TopUp_Redot,this.hadRewardRefresh,this),a.EventManager.instance.on(p.CommonEvent.Event_has_reward,this.hadRewardRefresh,this),a.EventManager.instance.on(p.CommonEvent.Event_Refresh_DaliyReward,this.hadRewardRefresh,this),a.EventManager.instance.on(p.CommonEvent.Event_Gift_refresh,this.updateRed,this),a.EventManager.instance.on(p.CommonEvent.Event_SwitchMapSuc,this.switchMapSuc,this),a.EventManager.instance.on(p.CommonEvent.Event_UserInfoRefresh,this.onUserInfoRefresh,this)},t.prototype.initView=function(){for(var e=0;e<g.MapConfig.Max_World;e++)this.topBgList[e]=this.findChild(this.node,"topBg"+e),this.topBgList[e].active=!1;this.setResourceTop(),this.hadRewardRefresh(),this.refreshTopBg()},t.prototype.initFindNode=function(){this.hadRewardRedNode=this.node.getChildByName("spRed"),this.userName=this.node.getChildByName("name").getComponent(cc.Label),this.level=this.node.getChildByName("level").getComponent(cc.Label),this.val_1=this.node.getChildByName("val_1").getComponent(cc.Label),this.val_2=this.node.getChildByName("val_2").getComponent(cc.Label),this.val_3=this.node.getChildByName("val_3").getComponent(cc.Label),this.nodeRecharge=this.node.getChildByName("val_4"),this.val_4=this.nodeRecharge.getComponent(cc.Label),this.icon1=this.node.getChildByName("val_3").getChildByName("icon1"),this.icon2=this.nodeRecharge.getChildByName("icon2"),this.Recharge=this.node.getChildByName("Recharge"),this.touxiang=this.node.getChildByName("touxiang"),this.touxiangkuang=this.node.getChildByName("touxiangkuang"),this.zhiye=this.node.getChildByName("icon_zhiye")},t.prototype.switchMapSuc=function(){this.refreshTopBg()},t.prototype.refreshTopBg=function(){for(var e=0;e<this.topBgList.length;e++)e==g.MapConfig.curMapConfig.world-1?this.topBgList[e].active=!0:this.topBgList[e].active=!1},t.prototype.setResourceTop=function(){this.onAddEvent(this.Recharge,this.onClickCharge.bind(this)),this.onAddEvent(this.icon1,this.onClickBuy.bind(this)),this.onAddEvent(this.icon2,this.onClickCharge.bind(this)),this.onAddEvent(this.nodeRecharge,this.onClickCharge.bind(this)),cc.tween(this.Recharge).repeatForever(cc.tween().to(.3,{scaleX:1,scaleY:1}).to(.3,{scaleX:.8,scaleY:.8})).start(),this.onUpdateInfo()},t.prototype.hadRewardRefresh=function(e){void 0===e&&(e=!1),0==f.GameConst.isFirstInit&&0==v.default.isXianShi&&0==v.default.isShowRedDot&&2==y.default.instance.has_daliyReward?this.hadRewardRedNode.active=!1:1==y.default.instance.has_reward||e?this.hadRewardRedNode.active=!0:v.default.isXianShi||v.default.isShowRedDot?this.hadRewardRedNode.active=!0:1==y.default.instance.has_daliyReward||1==y.default.instance.has_reward?this.hadRewardRedNode.active=!0:this.hadRewardRedNode.active=!1,d.GameConfig.isWechat()&&(this.hadRewardRedNode.active=!1)},t.prototype.onUserInfoRefresh=function(){this.onUpdateInfo()},t.prototype.onUpdateInfo=function(){this.zhiye.getComponent(cc.Sprite).spriteFrame=this.zhiye.getComponent(s.SpriteFrameComponent).spriteFrameList[y.default.instance.occupation-1],this.userName.string=y.default.instance.roleName,this.level.string=y.default.instance.level+u.WordConfig.getWord(60433),this.val_1.string=_.default.totalFight+"",this.val_2.string=b.UIHelper.tranNumber(y.default.instance.getCream())+"",this.val_3.string=b.UIHelper.tranNumber(y.default.instance.getCoin())+"",this.val_4.string=b.UIHelper.tranNumber(y.default.instance.getGold())+"",C.CostumeModel.setCostSF(this.touxiang.getComponent(cc.Sprite),C.CostumeType.Head),C.CostumeModel.setCostSF(this.touxiangkuang.getComponent(cc.Sprite),C.CostumeType.HeadFM)},t.prototype.updateRed=function(){1==m.default.silverstatus&&m.default.total>=l.DefaultConfig.getConfigById(51).money||1==m.default.goldstatus&&m.default.total>=l.DefaultConfig.getConfigById(52).money||1==y.default.instance.has_reward?this.hadRewardRedNode.active=!0:this.hadRewardRedNode.active=!1},t.prototype.onClickCharge=function(){r.default.instance.createView(h.default.gameView.topUp)},t.prototype.onClickBuy=function(){b.UIHelper.showCoinNoEnough()},t=o([M],t)}(c.default));i.default=w,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ChargeGiftModel":"ChargeGiftModel","../model/CostumeModel":"CostumeModel","../model/FightModel":"FightModel","../model/RedDotModel":"RedDotModel","../model/RoleInfoModel":"RoleInfoModel","../utils/UIHelper":"UIHelper"}],TopUpModel:[function(e,t,i){"use strict";cc._RF.push(t,"c3ed6Zu6VJBsYXZGwDchkN+","TopUpModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/LocalStorage"),o=e("./RoleInfoModel"),a=e("./PrivilegeModel"),s=function(){function e(){}return e.saveToLocalStorage=function(){var t={};for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);var a=e.name+o.default.instance.roleId;n.default.setItem(""+a,JSON.stringify(t)),this.initData()},e.initData=function(){var t=e.name+o.default.instance.roleId,i=JSON.parse(n.default.getItem(""+t));for(var a in i||(this.saveToLocalStorage(),i=n.default.getItem(""+t)),e)"function"!=typeof e[a]&&(e[a]=i[a])},e.getLostTimeRecycle=function(){return a.default.getRecoveryLeftDay()},e.getLostTimeBattle=function(){return a.default.getFightLeftDay()},e.getLostFreeAdv=function(){return a.default.getFreeLeftDay()},e.getGameHelperDay=function(){return a.default.getGameHelperLeftDay()},e.proto2ModelList=function(e){var t=e.getShopIdListList();this.chargeIdList=[];for(var i=0;i<t.length;i++)this.chargeIdList[i]=t[i].getShopId()},e.hadCharge=function(e){return-1!=this.chargeIdList.indexOf(e)},e.setCharge=function(e){-1==this.chargeIdList.indexOf(e)&&this.chargeIdList.push(e)},e.chargeIdList=[],e}();i.TopUpModel=s,cc._RF.pop()},{"../../engine/LocalStorage":"LocalStorage","./PrivilegeModel":"PrivilegeModel","./RoleInfoModel":"RoleInfoModel"}],TopUpView:[function(e,t,i){"use strict";cc._RF.push(t,"48cd51w58pLfomOspgD6zf2","TopUpView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/LocalStorage"),c=e("../../../engine/Logger"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/ChargegiftConfig"),g=e("../../config/ChongZhiConfig"),h=e("../../config/ColorConfig"),u=e("../../config/DefaultConfig"),p=e("../../config/GameConfig"),m=e("../../config/GameConst"),C=e("../../config/ITemsConfig"),_=e("../../config/ViewConfig"),v=e("../../config/WordConfig"),y=e("../../event/CommonEvent"),b=e("../../manager/RedPointManager"),I=e("../../model/ChargeGiftModel"),M=e("../../model/ItemInfoModel"),w=e("../../model/PrivilegeModel"),k=e("../../model/RedDotModel"),S=e("../../model/RoleInfoModel"),P=e("../../model/SettingModel"),E=e("../../model/TopUpModel"),L=e("../../network/SocketClient"),T=e("../../prefab/ItemPrefab"),R=e("../../sdk/LoongCheerManager"),N=e("../../sdk/SdkHelper"),B=e("../../sdk/STUtils"),A=e("../../utils/MusicHelper"),G=e("../Discount/DisCountModel"),x=e("./lngotsItem"),O=cc._decorator,V=O.ccclass,j=O.property,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrameList=[],t.spriteFrameList1=[],t.config=[],t.nowDisplay=0,t.hadGetFirstGiftNode=null,t.spRed=null,t.spRed1=null,t.spRed2=null,t.redPoint=null,t.redPoint1=null,t.redPoint2=null,t.btnFirst=null,t.clickStatus=1,t.itemList=[],t.sameDay=!1,t.lngots=null,t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e){this.nowDisplay=e||0},t.prototype.onEnable=function(){B.default.stStatistics(R.StatisticsType.afEvent,"act_access_topup"),B.default.stStatistics(R.StatisticsType.firebaseEvent,"act_access_topup")},t.prototype.onShow=function(){var e=this;l.default.instance.setTopUI(_.default.gameView.topUp),this.view=this.getChild(this.node,"panel/ScrollView/view/content"),this.initData(),this.refreshSta(),this.pnlLngots=this.getChild(this.view,"content0/lngotsView"),this.firstPunch=this.findChild(this.view,"content0/firstPunch"),this.hadGetFirstGiftNode=this.findChild(this.firstPunch,"node1/hadGetFirstGiftNode"),this.hadGetFirstGiftNode.active=!1,this.spRed=this.findChild(this.firstPunch,"node1/spRed"),this.spRed1=this.findChild(this.firstPunch,"silverPoint/spRed"),this.spRed2=this.findChild(this.firstPunch,"goldPoint/spRed"),this.redPoint=this.findChild(this.firstPunch,"firstPoint/redPoint"),this.redPoint1=this.findChild(this.firstPunch,"silverPoint/redPoint"),this.redPoint2=this.findChild(this.firstPunch,"goldPoint/redPoint"),this.btnFirst=this.getChild(this.firstPunch,"node1/btnFirst"),this.btnFirst.on(cc.Node.EventType.TOUCH_END,this.onClickReward.bind(this)),this.xianshiRedDot=this.findChild(this.node,"ui_hongdian"),this.xianshiRedDot.active=k.default.isXianShi,this.zhuzhanConfig=g.ChongZhiConfig.getConfigById(7),this.btnBuy1=this.getChild(this.view,"content2/helpGift/btnBuy"),this.onAddEvent(this.btnBuy1.getChildByName("btn_goumaitequan"),this.onBuyFree.bind(this)),this.refreshReward(),this.initLngots(),this.registerEvent(),this.refreshDailyReward();var t=this.getChild(this.node,"panel/ScrollView",cc.ScrollView);s.EventManager.instance.on(y.CommonEvent.Event_ChargeActivity,this.onChargeActivity,this),s.EventManager.instance.on(y.CommonEvent.Event_has_reward,this.refreshReward,this),s.EventManager.instance.on(y.CommonEvent.Event_Refresh_DaliyReward,this.refreshDailyReward,this),s.EventManager.instance.on(m.EVENT_NAME.REFRESH_PRIVILEGE,this.onEventRefreshPrivilege,this),s.EventManager.instance.on(y.CommonEvent.Event_Gift_refresh,this.refreshShow,this),this.changeDisplay(this.nowDisplay),this.scheduleOnce(function(){P.SettingModel.click_huishou&&(P.SettingModel.click_huishou=!1,e.nowDisplay=2,e.changeDisplay(e.nowDisplay)),P.SettingModel.click_zhuzhan&&(P.SettingModel.click_zhuzhan=!1,e.nowDisplay=2,e.changeDisplay(e.nowDisplay),t.scrollToBottom())},.09),L.default.s_recharge_gift_info(),this.clickTab()},t.prototype.checkDay=function(e){var t="redPointTime"+e,i=r.default.getInt(t);return!!(i>0&&a.default.isToday(i))},t.prototype.checkPoint=function(){this.redPoint.active=0==S.default.instance.has_reward&&!this.checkDay(i.FirstGift.FirstCharge),this.redPoint1.active=1==I.default.silverstatus&&I.default.total<u.DefaultConfig.getConfigById(51).money&&!this.checkDay(i.FirstGift.SilverCharge),this.redPoint2.active=1==I.default.goldstatus&&I.default.total<u.DefaultConfig.getConfigById(52).money&&!this.checkDay(i.FirstGift.GoldCharge)},t.prototype.refreshHongDian=function(){var e=this.getChild(this.node,"ui_hongdian1");e.active=!1,1!=S.default.instance.has_daliyReward&&1!=S.default.instance.has_reward||(e.active=!0)},t.prototype.refreshDailyReward=function(){var e=this.getChild(this.view,"content0/dayGift"),t=this.getChild(e,"btnLingQu"),i=this.getChild(e,"btnLingQu1"),n=this.getChild(e,"hadGetFirstGiftNode"),o=this.getChild(e,"spRed");e.active=!1,t.active=!1,i.active=!1,n.active=!1,o.active=!1,1==S.default.instance.has_status&&(e.active=!0,0==S.default.instance.has_daliyReward&&(i.active=!0),1==S.default.instance.has_daliyReward&&(t.active=!0,o.active=!0,k.default.isShowRedDot=!0),2==S.default.instance.has_daliyReward&&(n.active=!0),this.onAddEvent(i,function(){v.WordConfig.showWord(60369)}),this.onAddEvent(t,function(){L.default.s_get_dailyGift(),c.Logger.log("refreshDailyReward===="),k.default.isShowRedDot=!1})),this.refreshHongDian()},t.prototype.clickTab=function(){for(var e=this,t=function(t){var n=i.firstPunch.getChildByName("tabNode").getChildByName("tab"+(t+1));i.onAddEvent(n,function(){c.Logger.log("clickTab",t+1),e.clickStatus=t+1,e.chooseGift()})},i=this,n=0;n<3;n++)t(n)},t.prototype.refreshShow=function(){var e=this.getChild(this.view,"content0/firstPunch"),t=this.getChild(this.view,"content0/labelNode");b.default.getInstance().checkRedPointById(b.RedPointId.ChargeGift),2==S.default.instance.has_reward&&2==I.default.goldstatus&&2==I.default.silverstatus&&(e.zIndex=995,t.zIndex=999),this.firstShow(),this.chooseGift(),this.updateRed(),this.checkPoint()},t.prototype.chooseGift=function(){this.refreshPoint(),this.firstPunch.getChildByName("img_btshouchonglibao").getComponent(cc.Sprite).spriteFrame=this.spriteFrameList1[this.clickStatus-1];for(var e=0;e<3;e++){var t=this.firstPunch.getChildByName("chooseNode").getChildByName("bg"+(e+1));this.firstPunch.getChildByName("node"+(e+1)).active=!1,t.active=!1}var n=this.firstPunch.getChildByName("chooseNode").getChildByName("bg"+this.clickStatus),o=this.firstPunch.getChildByName("node"+this.clickStatus);if(n.active=!0,o.active=!0,this.clickStatus==i.FirstGift.FirstCharge){var s="redPointTime"+i.FirstGift.FirstCharge;r.default.setInt(s,cc.sys.now())}else this.clickStatus!=i.FirstGift.GoldCharge&&this.clickStatus!=i.FirstGift.SilverCharge||(c.Logger.log("chooseGift===",this.clickStatus,i.FirstGift.FirstCharge),this.refreshGift());var l="redPointTime"+this.clickStatus;r.default.setInt(l,a.default.now()),this.checkPoint()},t.prototype.refreshPoint=function(){c.Logger.log("refreshPoint",I.default.silverstatus,I.default.goldstatus,I.default.total,u.DefaultConfig.getConfigById(51).money),1==I.default.silverstatus&&I.default.total>=u.DefaultConfig.getConfigById(51).money?this.spRed1.active=!0:this.spRed1.active=!1,1==I.default.goldstatus&&I.default.total>=u.DefaultConfig.getConfigById(52).money?this.spRed2.active=!0:this.spRed2.active=!1},t.prototype.refreshGift=function(){var e;this.refreshPoint();var t=this.firstPunch.getChildByName("node"+this.clickStatus),n=t.getChildByName("pnlSp").getChildByName("ItemPrefab"),o=t.getChildByName("pnlSp").getChildByName("resourceNode"),a=t.getChildByName("chargeNum").getComponent(cc.Label),s=t.getChildByName("btn_lingqujiangli"),r=t.getChildByName("btnLingQu1"),l=t.getChildByName("hadGetFirstGiftNode");n.active=!1,o.active=!1,r.active=!1,s.active=!1,l.active=!1,this.onAddEvent(s,this.clickGet.bind(this));var d=1;if(p.GameConfig.sdkType==p.SdkType.LoongCheer&&(d=100),this.clickStatus==i.FirstGift.GoldCharge){S.default.instance.occupation==m.GameConst.OCCUPATION.ZHAN_SHI?e=62:S.default.instance.occupation==m.GameConst.OCCUPATION.FA_SHI?e=63:S.default.instance.occupation==m.GameConst.OCCUPATION.DAO_SHI&&(e=64);var f=t.getChildByName("lbl5").getComponent(cc.RichText),g=u.DefaultConfig.getConfigById(e),_=p.GameConfig.sdkType==p.SdkType.LoongCheer?"$"+g.money/100:cc.js.formatStr(v.WordConfig.getWord(60374),g.money);f.string=cc.js.formatStr(v.WordConfig.getWord(60561),_)+'<img src="img_yuanbao" />)',c.Logger.log("lj===",I.default.total,g,g.money),I.default.total>=g.money/d?(a.string=g.money/d+"/"+g.money/d,a.node.color=h.ColorConfig.GreenColor):(a.string=I.default.total+"/"+g.money/d,a.node.color=h.ColorConfig.RedColor),2==I.default.goldstatus?l.active=!0:I.default.total>=g.money/d&&1==I.default.goldstatus?(s.active=!0,this.onAddEvent(s,this.clickGet.bind(this))):r.active=!0}else if(this.clickStatus==i.FirstGift.SilverCharge){S.default.instance.occupation==m.GameConst.OCCUPATION.ZHAN_SHI?e=59:S.default.instance.occupation==m.GameConst.OCCUPATION.FA_SHI?e=60:S.default.instance.occupation==m.GameConst.OCCUPATION.DAO_SHI&&(e=61);f=t.getChildByName("lbl5").getComponent(cc.RichText);var y=u.DefaultConfig.getConfigById(e);_=p.GameConfig.sdkType==p.SdkType.LoongCheer?"$"+y.money/100:cc.js.formatStr(v.WordConfig.getWord(60374),y.money);f.string=cc.js.formatStr(v.WordConfig.getWord(60562),_)+'<img src="img_yuanbao" />)',I.default.total>=y.money/d?(a.string=y.money/d+"/"+y.money/d,a.node.color=h.ColorConfig.GreenColor):(a.string=I.default.total+"/"+y.money/d,a.node.color=h.ColorConfig.RedColor),2==I.default.silverstatus?l.active=!0:I.default.total>=y.money/d&&1==I.default.silverstatus?(s.active=!0,this.onAddEvent(s,this.clickGet.bind(this))):r.active=!0}for(var b=u.DefaultConfig.getConfigById(e),w=0;w<this.itemList.length;w++)this.itemList[w].destroy();if(this.itemList=[],b&&b.item)for(var k=0;k<b.item.length;k++)for(var P in b.item[k]){var E=void 0;(E=cc.instantiate(n)).parent=n.parent,E.active=!0,this.itemList.push(E);var L=C.ITemsConfig.getITemsConfigById(P);c.Logger.log("refreshGift====",L,P,b.item[k][P],b.item);var R=M.default.create(m.GameConst.ITEM_KIND.ITEM,P,b.item[k][P],L.quality);E.getComponent(T.default).init(R,!0)}if(b&&b.ress)for(var N=0;N<b.ress.length;N++)for(var P in b.ress[N]){var B=void 0;(B=cc.instantiate(o)).parent=o.parent,B.active=!0,this.itemList.push(B),B.getComponent(cc.RichText).string="<img src="+P+"/><color=#FFD87D>x"+b.ress[N][P]+"</color>"}},t.prototype.clickGet=function(){this.clickStatus==i.FirstGift.GoldCharge?L.default.s_recharge_gift_reward(2):this.clickStatus==i.FirstGift.SilverCharge&&L.default.s_recharge_gift_reward(1)},t.prototype.firstShow=function(){2==S.default.instance.has_reward?(1==I.default.goldstatus&&(this.clickStatus=i.FirstGift.GoldCharge),1==I.default.silverstatus&&(this.clickStatus=i.FirstGift.SilverCharge),2==I.default.goldstatus&&2==I.default.silverstatus&&(this.clickStatus=i.FirstGift.FirstCharge)):this.clickStatus=i.FirstGift.FirstCharge,c.Logger.log("firstShow==",S.default.instance.has_reward)},t.prototype.refreshSta=function(){for(var e=this,t=this.getChild(this.node,"panel/ScrollView",cc.ScrollView),i=function(i){n.node.getChildByName("czbtn_bg"+i).active=!1,n.view.getChildByName("content"+i).active=!1;var o=n.node.getChildByName("czbtn"+i);o.active=!0,n.onAddEvent(o,function(){var n;t.scrollToTop(),e.nowDisplay=i,e.changeDisplay(i),1==i?n="act_access_dailypack":2==i&&(n="act_access_privilege"),B.default.stStatistics(R.StatisticsType.afEvent,n),B.default.stStatistics(R.StatisticsType.firebaseEvent,n)})},n=this,o=0;o<3;o++)i(o)},t.prototype.changeDisplay=function(e){this.refreshSta(),this.node.getChildByName("czbtn_bg"+e).active=!0,this.view.getChildByName("content"+e).active=!0,0==e&&(this.refreshDailyReward(),this.initDaliyGift(),c.Logger.log("initData====4")),1==e&&(this.onClickXianShi(),c.Logger.log("initData====5")),2==e&&(this.onClickDisplay2(),this.initZhuZhan(),c.Logger.log("initData====6"))},t.prototype.initDaliyGift=function(){var e=0,t=f.default.getConfigById(1),i=this.findChild(this.view,"content0/dayGift/pnlSp/img_yuanbao/lbl2").getComponent(cc.Label);for(var n in i.string=t.resource[1],t.item){var o=this.view.getChildByName("content0").getChildByName("dayGift").getChildByName("pnlSp").getChildByName("ItemPrefab"+e);e++;var a=C.ITemsConfig.getITemsConfigById(n),s=M.default.create(m.GameConst.ITEM_KIND.ITEM,n,t.item[n],a.quality);o.getComponent(T.default).init(s,!0)}},t.prototype.initZhuZhan=function(){var e=0;for(var t in this.zhuzhanConfig.item){var i=this.view.getChildByName("content2").getChildByName("helpGift").getChildByName("ItemPrefab"+e);e++;var n=C.ITemsConfig.getITemsConfigById(t),o=M.default.create(m.GameConst.ITEM_KIND.ITEM,t,this.zhuzhanConfig.item[t],n.quality);i.getComponent(T.default).init(o,!0),this.onAddEvent(i,this.onClickTip.bind(this,o))}this.getChild(this.view,"content2/helpGift/pnlLbl/lbl3",cc.Label).string=this.zhuzhanConfig.resource[2],this.getChild(this.view,"content2/helpGift/btnBuy/btn_goumaitequan/lblPrice",cc.Label).string=this.zhuzhanConfig.getMoneyStr()},t.prototype.onClickTip=function(e){l.default.instance.createView(_.default.gameView.ItemInfo,null,e,-1,!1)},t.prototype.onBuyFree=function(){L.default.req_charge(this.zhuzhanConfig.id)},t.prototype.onChargeActivity=function(){this.xianshiView.active=!1},t.prototype.onClickXianShi=function(){k.default.isXianShi=!1,this.xianshiRedDot.active=k.default.isXianShi;var e=this.findChild(this.node,"panel/ScrollView").getComponent(cc.ScrollView);this.view.getChildByName("content1").getComponent("DiscountView").onShow(),1==G.default.firstShow&&(e.scrollToOffset(cc.v2(0,855)),G.default.firstShow=!1),c.Logger.log("onClickXianShi==",G.default.firstShow),s.EventManager.instance.dispatch(y.CommonEvent.Event_TopUp_Redot)},t.prototype.freshStatus=function(){return!!k.default.isXianShi},t.prototype.onClickReward=function(){L.default.req_get_first_rechard_info()},t.prototype.refreshReward=function(){var e=this.firstPunch.getChildByName("firstPoint").getChildByName("spRed");e.active=!1,this.spRed.active=!1,this.btnFirst.active=!1,this.btnFirst.color=h.ColorConfig.WhiteColor,this.hadGetFirstGiftNode.active=!1,1==S.default.instance.has_reward?(this.spRed.active=!0,e.active=!0,this.btnFirst.active=!0):0==S.default.instance.has_reward?(this.btnFirst.color=(new cc.Color).fromHEX("#717171"),this.btnFirst.active=!0):2==S.default.instance.has_reward&&(this.hadGetFirstGiftNode.active=!0),this.refreshHongDian(),this.refreshShow()},t.prototype.updateRed=function(){var e=this.getChild(this.node,"ui_hongdian1");1==I.default.silverstatus&&I.default.total>=u.DefaultConfig.getConfigById(51).money||1==I.default.goldstatus&&I.default.total>=u.DefaultConfig.getConfigById(52).money?e.active=!0:this.refreshHongDian()},t.prototype.onClickSpEquip=function(){A.MusicHelper.play_click();var e=new M.default,t="";S.default.instance.occupation==m.GameConst.OCCUPATION.FA_SHI?t="D000002":S.default.instance.occupation==m.GameConst.OCCUPATION.ZHAN_SHI?t="D000001":S.default.instance.occupation==m.GameConst.OCCUPATION.DAO_SHI&&(t="D000003"),e=M.default.createDingZhiEquip(t),l.default.instance.createView(_.default.gameView.equipInfo,null,e)},t.prototype.initData=function(){var e=this;this.config.length=0,g.ChongZhiConfig.configMap.forEach(function(t,i){(t.id>=101&&t.id<=107||t.id>=1101&&t.id<=1107||t.id>=2101&&t.id<=2118)&&e.config.push(t)});var t,i=this.getChild(this.view,"content0/firstPunch"),n=this.getChild(i,"node1/pnlSp/img_equip"),o=this.getChild(i,"node1/pnlSp/ItemPrefab"),a=this.getChild(i,"node1/resourceNode/ItemPrefab"),s=this.getChild(i,"node1/resourceNode/ItemPrefab1"),r=this.getChild(i,"node1/resourceNode/ItemPrefab2");n.on(cc.Node.EventType.TOUCH_END,this.onClickSpEquip.bind(this)),S.default.instance.occupation==m.GameConst.OCCUPATION.ZHAN_SHI?t="D000001":S.default.instance.occupation==m.GameConst.OCCUPATION.FA_SHI?t="D000002":S.default.instance.occupation==m.GameConst.OCCUPATION.DAO_SHI&&(t="D000003");var c=M.default.createDingZhiEquip(t);o.getComponent(T.default).init(c,!0);var l=u.DefaultConfig.getConfigById(13).value[S.default.instance.occupation+""];a.getComponent(T.default).initResource(m.GameConst.RES_TYPE.YUAN_BAO,l.gem),s.getComponent(T.default).initResource(m.GameConst.RES_TYPE.COIN,l.gold),r.getComponent(T.default).initResource(m.GameConst.RES_TYPE.CREAM,l.recov_cream)},t.prototype.onClickDisplay2=function(){var e=this.view.getChildByName("content2").getChildByName("helpGift"),t=this.getChild(e,"btnBuy"),i=this.getChild(e,"pnlSp");e.getChildByName("pnlLbl").getChildByName("lbl2").getComponent(cc.RichText).string=v.WordConfig.getWord(60564),w.default.hadFreePrivilege()?(t.getChildByName("btn_goumaitequan").active=!1,t.getChildByName("img_yigoumai").active=!0,i.getChildByName("img_bimai").active=!1,i.getChildByName("img_jihuo").active=!0,e.zIndex=1):(t.getChildByName("btn_goumaitequan").active=!0,t.getChildByName("img_yigoumai").active=!1,i.getChildByName("img_bimai").active=!0,i.getChildByName("img_jihuo").active=!1);var n=this.getChild(this.view,"content2/recycle"),o=this.getChild(n,"btnBuy"),a=this.getChild(n,"pnlSp"),s=this.getChild(n,"pnlLbl/lblDay",cc.RichText);w.default.hadRecoveryPrivilege()?(o.getChildByName("btn_goumaitequan").active=!1,o.getChildByName("btn_xufeitequan").active=!0,a.getChildByName("img_bimai").active=!1,a.getChildByName("img_jihuo").active=!0,s.node.active=!0,s.string=cc.js.formatStr(v.WordConfig.getWord(60565),E.TopUpModel.getLostTimeRecycle())):(o.getChildByName("btn_goumaitequan").active=!0,o.getChildByName("btn_xufeitequan").active=!1,a.getChildByName("img_bimai").active=!0,a.getChildByName("img_jihuo").active=!1,s.node.active=!1);var r=this.getChild(this.view,"content2/battle"),c=this.getChild(r,"btnBuy"),l=this.getChild(r,"pnlSp"),d=this.getChild(r,"pnlLbl/lblDay",cc.RichText);w.default.hadFightGodPrivilege()?(c.getChildByName("btn_goumaitequan").active=!1,c.getChildByName("btn_xufeitequan").active=!0,l.getChildByName("img_bimai").active=!1,l.getChildByName("img_jihuo").active=!0,d.node.active=!0,d.string=cc.js.formatStr(v.WordConfig.getWord(60566),E.TopUpModel.getLostTimeBattle())):(c.getChildByName("btn_goumaitequan").active=!0,c.getChildByName("btn_xufeitequan").active=!1,l.getChildByName("img_bimai").active=!0,l.getChildByName("img_jihuo").active=!1,d.node.active=!1);var f=this.getChild(this.view,"content2/pulgGift"),g=this.getChild(f,"btnBuy"),u=this.getChild(f,"pnlSp"),p=this.getChild(f,"pnlLbl/lblDay",cc.RichText);w.default.hadGameHelperPrivilege()?(u.getChildByName("img_bimai").active=!1,u.getChildByName("img_jihuo").active=!0,p.node.active=!0,-1==E.TopUpModel.getGameHelperDay()?(p.string=v.WordConfig.getWord(60567),g.getChildByName("btn_goumaitequan").color=h.ColorConfig.hexToColor("#7D7D7D")):(g.getChildByName("btn_goumaitequan").color=h.ColorConfig.hexToColor("#FFFFFF"),p.string=cc.js.formatStr(v.WordConfig.getWord(60566),E.TopUpModel.getGameHelperDay()))):(u.getChildByName("img_bimai").active=!0,u.getChildByName("img_jihuo").active=!1,p.node.active=!1)},t.prototype.initLngots=function(){this.lngotsPrefab=cc.instantiate(this.lngots),this.pnlLngots.removeAllChildren();var e=this.config;c.Logger.log("initLngots===",e);var t=0;N.default.isIos()&&(p.GameConfig.sdkType==p.SdkType.LoongCheer||(t=7));for(var i=t;i<=t+6;i++){var n=cc.instantiate(this.lngotsPrefab);e[i].needShow&&(n.name=""+this.lngotsPrefab.name+i,this.pnlLngots.addChild(n),n.getComponent(x.default).init(this,e[i],i))}},t.prototype.registerEvent=function(){var e=this.getChild(this.view,"content2/recycle/btnBuy"),t=this.getChild(this.view,"content2/battle/btnBuy"),i=this.getChild(this.view,"content2/pulgGift/btnBuy");this.onAddEvent(e,this.onBuyrecycle.bind(this)),this.onAddEvent(t,this.onBuybattle.bind(this)),this.onAddEvent(i,this.onBuyGameHelper.bind(this))},t.prototype.onEventRefreshPrivilege=function(){this.initData()},t.prototype.onFirst=function(){A.MusicHelper.play_click()},t.prototype.onBuyrecycle=function(){A.MusicHelper.play_click(),l.default.instance.createView(_.default.gameView.GamePrivilege,null,w.default.Privilege_Type.recovery)},t.prototype.onBuybattle=function(){A.MusicHelper.play_click(),l.default.instance.createView(_.default.gameView.GamePrivilege,null,w.default.Privilege_Type.FightGod)},t.prototype.onBuyGameHelper=function(){-1!=E.TopUpModel.getGameHelperDay()&&(A.MusicHelper.play_click(),l.default.instance.createView(_.default.gameView.GamePrivilege,null,w.default.Privilege_Type.GameHelper))},t.prototype.onClose=function(){l.default.instance.closeView(_.default.gameView.topUp)},t.redStatus=!1,t.FirstGift={FirstCharge:1,SilverCharge:2,GoldCharge:3},o([j({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),o([j({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList1",void 0),o([j(cc.Prefab)],t.prototype,"lngots",void 0),t=i=o([V],t)}(d.default);i.default=D,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/LocalStorage":"LocalStorage","../../../engine/Logger":"Logger","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChargegiftConfig":"ChargegiftConfig","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/ChargeGiftModel":"ChargeGiftModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/PrivilegeModel":"PrivilegeModel","../../model/RedDotModel":"RedDotModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/SettingModel":"SettingModel","../../model/TopUpModel":"TopUpModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../sdk/LoongCheerManager":"LoongCheerManager","../../sdk/STUtils":"STUtils","../../sdk/SdkHelper":"SdkHelper","../../utils/MusicHelper":"MusicHelper","../Discount/DisCountModel":"DisCountModel","./lngotsItem":"lngotsItem"}],TradingRecordView:[function(e,t,i){"use strict";cc._RF.push(t,"148c84PAjVL7LryPrkRSaKa","TradingRecordView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../event/CommonEvent"),r=e("../../model/AuctionHouseModel "),c=e("../../network/SocketClient"),l=e("./AuctionHouseView"),d=e("./AuctionLogGoodsItem"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.auctionLogGoodsItem=null,t}return n(t,e),t.prototype.onLoad=function(){a.EventManager.instance.on(s.CommonEvent.Event_auction_log,this.init,this),l.default.fitContont(this.content,this.auctionLogGoodsItem)},t.prototype.onEnable=function(){c.default.s_auction_log()},t.prototype.init=function(){this.content.removeAllChildren();for(var e=r.default.getOrderlyAuctionHouseLogGoodsArr(),t=0,i=e.length;t<i;t++){var n=e[t],o=cc.instantiate(this.auctionLogGoodsItem);this.content.addChild(o),o.getComponent(d.default).init(n)}},t.prototype.start=function(){},t.prototype.onDestroy=function(){a.EventManager.instance.clear(this)},o([h(cc.Node)],t.prototype,"content",void 0),o([h(cc.Prefab)],t.prototype,"auctionLogGoodsItem",void 0),t=o([g],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../event/CommonEvent":"CommonEvent","../../model/AuctionHouseModel ":"AuctionHouseModel ","../../network/SocketClient":"SocketClient","./AuctionHouseView":"AuctionHouseView","./AuctionLogGoodsItem":"AuctionLogGoodsItem"}],TuJianCellOpen:[function(e,t,i){"use strict";cc._RF.push(t,"dfcb8bqROxGS59o4wni3z5p","TuJianCellOpen");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/WordConfig"),r=e("../model/ItemInfoModel"),c=e("../network/SocketClient"),l=e("../prefab/ItemPrefab"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.initNode()},t.prototype.initNode=function(){this.btnCancelNode=this.findChild(this.node,"frame/btnCancel"),this.btnConfirmNode=this.findChild(this.node,"frame/btnConfirm"),this.itemIconNode=this.findChild(this.node,"frame/ItemPrefab"),this.tipNode=this.findChild(this.node,"frame/tip"),this.tipLabel=this.tipNode.getComponent(cc.RichText),this.tipLabel.string=s.WordConfig.getWord(61984)},t.prototype.onEnable=function(){this.onAddEvent(this.btnCancelNode,this.onBtnCancel.bind(this)),this.onAddEvent(this.btnConfirmNode,this.onBtnAdd.bind(this))},t.prototype.onInitChild=function(e,t){this.bookId=e.booksid,this.temp_config=t,this.initItemList()},t.prototype.initItemList=function(){this.temp_temInfoModel=r.default.getItem(this.temp_config.item_cost[0]),this.temp_temInfoModel&&this.itemIconNode.getComponent(l.default).init(this.temp_temInfoModel)},t.prototype.onBtnAdd=function(){c.default.s_degree_elevation(this.bookId,2),this.closeView()},t.prototype.onBtnCancel=function(){this.closeView()},t=o([f],t)}(a.default));i.default=g,cc._RF.pop()},{"../../engine/ViewBase":"ViewBase","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],TuJianCell:[function(e,t,i){"use strict";cc._RF.push(t,"0422dSIDTVJd6QH20Q2jsw7","TuJianCell");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ComponentBase"),s=e("../../engine/DateUtil"),r=e("../../engine/UIManager"),c=e("../config/ColorConfig"),l=e("../config/EquipConfig"),d=e("../config/GameConst"),f=e("../config/IllustratedBooksConfig"),g=e("../config/IllustratedBooksenhanceConfig"),h=e("../config/MagicNameConfig"),u=e("../config/ViewConfig"),p=e("../config/WordConfig"),m=e("../model/ItemInfoModel"),C=e("../model/MagicModel"),_=e("../model/RoleInfoModel"),v=e("../model/TuJianEquipModel"),y=e("../network/SocketClient"),b=e("../prefab/ItemPrefab"),I=e("../utils/MusicHelper"),M=cc._decorator,w=M.ccclass,k=M.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameSpiteList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode()},t.prototype.init=function(e){this.config=e.config,this.selectedTab=e.selectedTab,this.selectedBtn=e.selectedBtn,this.initTuJianInfo(this.config)},t.prototype.initFindNode=function(){this.nameSprite=this.findChild(this.node,"title/name").getComponent(cc.Sprite),this.infoNode=this.findChild(this.node,"info"),this.levelLabel=this.findChild(this.infoNode,"level").getComponent(cc.Label),this.additionBgNode=this.findChild(this.infoNode,"additionBg"),this.btnListNode=this.findChild(this.node,"btn"),this.btnActive=this.findChild(this.btnListNode,"btnActive"),this.btnStrengthen=this.findChild(this.btnListNode,"btnStrengthen"),this.bntUplevel=this.findChild(this.btnListNode,"bntUplevel"),this.itemListNode=this.findChild(this.node,"itemList"),this.resumeNode=this.findChild(this.node,"resume"),this.resumeNumLabel=this.findChild(this.resumeNode,"resumeNum").getComponent(cc.Label),this.unlockLabel=this.findChild(this.node,"unlock").getComponent(cc.Label),this.itemNode=this.findChild(this.node,"itemList/itemNode"),this.jihuoBtn=this.findChild(this.node,"jihuoBtn")},t.prototype.initTuJianInfo=function(e){var t,i,n=this,o=e.configs[0].cost;e.configs.every(function(e){return!v.default.getEquipDataById(e.id)||(t=v.default.getEquipDataById(e.id),i=e,!0)}),i||(i=e.configs[0]);var a=i.item_cost;t||((t=new v.BooksEquip).booksid=i.id,t.level=0,t.equipArr=[]);var s=void 0!=i.nextid?f.IllustratedBooksConfig.getConfigById(i.nextid):void 0,r=g.IllustratedBooksenhanceConfig.getConfigByCid(i.cid,t.level);if(this.nameSprite.spriteFrame=this.nameSpiteList[i.nameId],this.nameSprite.node.color=c.ColorConfig.getQualityColor(i.colorName),this.infoNode.active=_.default.instance.level>=i.level,this.unlockLabel.node.active=!this.infoNode.active,this.btnListNode.active=this.infoNode.active,this.resumeNode.active=this.infoNode.active,this.jihuoBtn.active=!1,_.default.instance.level>=i.level){if(this.levelLabel.string="Lv."+t.level,this.additionBgNode.getChildByName("layout").active=!1,i.attribute&&i.attribute.forEach(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=e[t];n.initProperty(parseInt(t),parseInt(i),n.additionBgNode,!0),n.additionBgNode.getChildByName("layout").active=!0}}),r){var l=void 0;l=i.pro==d.GameConst.OCCUPATION.ZHAN_SHI?r.warrior_value:i.pro==d.GameConst.OCCUPATION.FA_SHI?r.wizard_value:i.pro==d.GameConst.OCCUPATION.DAO_SHI?r.taoist_value:r.special_value;for(var h=0;h<2;++h)this.additionBgNode.getChildByName("layout"+h).active=!1;var u=0;l&&t.level>0&&l.forEach(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=e[t],o=n.additionBgNode.getChildByName("layout"+u);o&&n.initProperty2(parseInt(t),parseInt(i),o,!0),u++}})}if(void 0!=s&&a){var C=m.default.getItemAmount(a[0])>=parseInt(a[1]),y=!1;if(C&&t.equipArr.length>=o.length)for(var b in t.equipArr){if(t.equipArr[b].quality!=d.GameConst.QUALITY.ORANGE){y=!0;break}}else y=!0;this.jihuoBtn.active=C&&y}this.btnListNode.active=!(void 0==s&&t.level>=i.taolevel),this.btnActive.active=0==i.taolevel&&t.equipArr.length==o.length,this.btnStrengthen.active=!this.btnActive.active&&t.level<i.taolevel,this.bntUplevel.active=void 0!=s&&i.taolevel>0&&t.level>=i.taolevel,this.resumeNode.active=void 0!=r&&this.btnListNode.active&&this.btnStrengthen.active;var I=void 0!=r?r.cost[3]:0;this.resumeNumLabel.string=I.toString(),this.resumeNumLabel.node.color=parseInt(this.resumeNumLabel.string)>_.default.instance.getCream()?c.ColorConfig.RedColor:c.ColorConfig.WhiteColor,this.onAddEvent(this.btnActive,this.onBtnElevation.bind(this,t,o,i)),this.onAddEvent(this.bntUplevel,this.onBtnElevation.bind(this,t,o,i)),this.onAddEvent(this.btnStrengthen,this.onBtnIntensify.bind(this,t,I)),this.onAddEvent(this.jihuoBtn,this.jihuoFun.bind(this,t,i)),this.btnStrengthen.getChildByName("RedPointPrefab").active=_.default.instance.getCream()>=I;var M=!0;if(s&&t.equipArr.length>=o.length)for(var b in t.equipArr){t.equipArr[b].quality<i.jielevel&&(M=!1)}this.bntUplevel.getChildByName("RedPointPrefab").active=M}else this.unlockLabel.string=cc.js.formatStr(p.WordConfig.getWord(60424),i.level);var w=this.itemListNode.childrenCount>o.length?this.itemListNode.childrenCount:o.length;for(h=0;h<w;h++){var k=void 0;h<this.itemListNode.childrenCount?k=this.itemListNode.children[h]:(k=cc.instantiate(this.itemNode)).parent=this.itemListNode,h<o.length?this.initEquipItem(k,o[h],t,i):k.active=!1}this.node.data={config:this.config,bookId:i.id}},t.prototype.initEquipItem=function(e,t,i,n){e.active=!0;var o,a,s=l.EquipConfig.getEquipConfigById(t),r=v.default.getEquipDataInArr(i.equipArr,t),c=n.jielevel;if(r&&(c=r.quality),s.dingzhi){var f=0!=n.taolevel||v.default.getEquipDataIncludes(i.equipArr,t)?void 0:d.GameConst.QUALITY.GRAY;o=m.default.createDingZhiEquip(t,f)}else a=0==n.taolevel?v.default.getEquipDataIncludes(i.equipArr,t)?c:d.GameConst.QUALITY.GRAY:void 0!=n.nextid?c-1:d.GameConst.QUALITY.ORANGE,void 0!=n.nextid&&(a=v.default.getEquipDataIncludes(i.equipArr,t)?c:a),o=m.default.create(d.GameConst.ITEM_KIND.EQUIP,t,0,a);e.getChildByName("ItemPrefab").getComponent(b.default).init(o,!1,null,!0,!1,!1);var g=!1;if(_.default.instance.level>=n.level){var h=_.default.instance.getEquipById(t,n.jielevel),u=!1;for(var p in h)if(r){if(h[p].quality>r.quality){u=!0;break}}else if(h[p].quality>c-1){u=!0;break}void 0!=n.nextid&&u&&h.length>0&&(g=!0)}e.getChildByName("RedPointPrefab").getChildByName("icon").active=g;var C=e.getChildByName("btnAdd");C.active=void 0!=n.nextid&&_.default.instance.level>=n.level&&g,this.onAddEvent(e,this.onBtnSelectEquip.bind(this,c,n.id,i,C.active,t,r))},t.prototype.initProperty=function(e,t,i,n){void 0===n&&(n=!1);var o="";n&&(o="layout/");var a=this.findChild(i,o+"additionNum").getComponent(cc.Label),s=this.findChild(i,o+"additionLabel").getComponent(cc.Label),r=[0,h.MagicNameConfig.MagicId.atk,h.MagicNameConfig.MagicId.mag,h.MagicNameConfig.MagicId.spt];7!=e&&38!=e||_.default.instance.occupation;s.string=h.MagicNameConfig.getDesc(e),a.string=C.default.formatMagicValue(e,t)},t.prototype.initProperty2=function(e,t,i,n){void 0===n&&(n=!1);i.active=!0;var o=this.findChild(i,"additionNum").getComponent(cc.Label);this.findChild(i,"additionLabel").getComponent(cc.Label).string=h.MagicNameConfig.getDesc(e),o.string=C.default.formatMagicValue(e,t)},t.prototype.onBtnSelectEquip=function(e,t,i,n,o,a){void 0===a&&(a=null);var s=_.default.instance.getEquipById(o,e),c=e;a?c=a.quality:c-=1;var l=[];for(var d in s)s[d].quality>c&&l.push(s[d]);l.length>0&&n?r.default.instance.createView(u.default.gameView.TuJianSelectedEquipView,null,l,t):n&&l.length<=0&&!v.default.getEquipDataIncludes(i.equipArr,o)&&p.WordConfig.showWord(61230)},t.prototype.onUseItemFun=function(){r.default.instance.createView(u.default.gameView.TuJianCellOpen,null,this.config)},t.prototype.onBtnElevation=function(e,t,i){e.equipArr.length>=t.length&&e.level>=i.taolevel?y.default.s_degree_elevation(e.booksid):p.WordConfig.showWord(61232)},t.prototype.onBtnIntensify=function(e,t){_.default.instance.getCream()>=t?y.default.s_strengthen_book(e.booksid):p.WordConfig.showWord(60138)},t.prototype.jihuoFun=function(e,t){r.default.instance.createView(u.default.gameView.TuJianCellOpen,null,e,t)},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e);var n=0;e.on(cc.Node.EventType.TOUCH_START,function(){n=s.default.now()}),e.on(cc.Node.EventType.TOUCH_END,function(){if(e.getComponent(cc.Button).enabled){I.MusicHelper.play_click();var i=s.default.now();t(0!=n&&i-n>=400?1:0)}},e)},o([k({type:[cc.SpriteFrame]})],t.prototype,"nameSpiteList",void 0),t=o([w],t)}(a.default);i.default=S,cc._RF.pop()},{"../../engine/ComponentBase":"ComponentBase","../../engine/DateUtil":"DateUtil","../../engine/UIManager":"UIManager","../config/ColorConfig":"ColorConfig","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/IllustratedBooksConfig":"IllustratedBooksConfig","../config/IllustratedBooksenhanceConfig":"IllustratedBooksenhanceConfig","../config/MagicNameConfig":"MagicNameConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/ItemInfoModel":"ItemInfoModel","../model/MagicModel":"MagicModel","../model/RoleInfoModel":"RoleInfoModel","../model/TuJianEquipModel":"TuJianEquipModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/MusicHelper":"MusicHelper"}],TuJianEquipModel:[function(e,t,i){"use strict";cc._RF.push(t,"fa4e8wj7w9Cw5sY56tWJQg/","TuJianEquipModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../../engine/ProtoConfig"),s=e("../../engine/ProtoUtils"),r=e("../config/GameConst"),c=e("../config/IllustratedBooksConfig"),l=e("../config/IllustratedBooksenhanceConfig"),d=e("../config/MapConfig"),f=e("../config/WordConfig"),g=e("../event/CommonEvent"),h=e("../manager/RedPointManager"),u=e("./ItemInfoModel"),p=e("./RoleInfoModel"),m=function(){return function(){}}();i.BooksProperty=m;var C=function(){return function(){}}();i.BooksEquip=C;var _=function(){return function(){}}();i.BooksEquip_cell=_;var v=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[h.RedPointId.Tujian],this.protos=[a.ProtoConfig.c_get_book_info,a.ProtoConfig.c_add_book_equip,a.ProtoConfig.c_strengthen_book,a.ProtoConfig.c_degree_elevation,a.ProtoConfig.c_update_item_info],h.default.getInstance().addHandler(this)}return e.proto2BookInfo=function(t){this.model=this.model?this.model:new e;var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_get_book_info,t);this.booksPropertyMap=new Map,this.booksEquipMap=new Map;var r=i.getPropertyList(),c=i.getEquipListList();if(c)for(var l in c)if(Object.prototype.hasOwnProperty.call(c,l)){var d=c[l],f=new C;f.booksid=d.getBookid(),f.equipArr=[];var h=d.getEquipList();if(h&&h.length>0)for(var u in h){var p=new _;p.type=h[u].getType(),p.quality=h[u].getQuality(),f.equipArr.push(p)}f.level=d.getLevel(),this.booksEquipMap.set(f.booksid,f)}if(r)for(var l in r)if(Object.prototype.hasOwnProperty.call(r,l)){d=r[l];var v=new m;v.id=d.getBookid(),v.value=d.getValue(),this.booksPropertyMap.set(v.id,v)}o.Logger.log("c_get_book_info====",i),n.EventManager.instance.dispatch(g.CommonEvent.Event_GetBookInfo_refresh)},e.proto2GetBookEquip=function(e){console.log("proto2GetBookEquip")},e.proto2AddBookEquip=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_add_book_equip,t),r=i.getType(),c=i.getBookid(),l=i.getQuality(),d=this.booksEquipMap.get(c),f=new _;(f.type=r,f.quality=l,d)?e.getEquipDataIncludes(d.equipArr,r)?e.getEquipDataInArr(d.equipArr,r).quality=l:d.equipArr.push(f):((d=new C).level=0,d.booksid=c,d.equipArr=new Array,d.equipArr.push(f));this.booksEquipMap.set(c,d),o.Logger.log("c_add_book_equip====",i),n.EventManager.instance.dispatch(g.CommonEvent.Event_GetBookCell_refresh,c)},e.proto2StrengthenEquip=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_strengthen_book,e),i=t.getLevel(),r=t.getBookid(),c=this.booksEquipMap.get(r);c.level=i,this.booksEquipMap.set(r,c),o.Logger.log("c_strengthen_book====",t),f.WordConfig.showWord(60333),n.EventManager.instance.dispatch(g.CommonEvent.Event_GetBookCell_refresh,r)},e.proto2DegreeElevation=function(e){var t=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_degree_elevation,e),i=t.getOldid(),r=t.getBookid(),c=this.booksEquipMap.get(i);if(c){var l=new C;l.level=c.level,l.booksid=r,l.equipArr=[].concat(c.equipArr),this.booksEquipMap.set(r,l),this.booksEquipMap.delete(i)}o.Logger.log("c_degree_elevation====",t),f.WordConfig.showWord(61231),n.EventManager.instance.dispatch(g.CommonEvent.Event_GetBookInfo_refresh)},e.getEquipDataById=function(e){return this.booksEquipMap?this.booksEquipMap.get(e):null},e.getBooksPropertyList=function(){var e=new Array;return this.booksPropertyMap.forEach(function(t){e.push(t)}),e.sort(function(e,t){return e.id-t.id}),e},e.getBooksPropertyById=function(e){if(!this.booksPropertyMap)return null;var t=this.booksPropertyMap.get(e);return t||((t=new m).id=e,t.value=0),t},e.getEquipDataIncludes=function(e,t){for(var i=0;i<e.length;i++){if(e[i].type==t)return!0}return!1},e.getEquipDataInArr=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.type==t)return n}return null},e.prototype.checkRedPoint=function(){var t=[],i=!1,n=c.IllustratedBooksConfig.getOccupationArr(),o=d.MapConfig.WORLD;n.forEach(function(n){var a=!1,s=function(s){var d=!1;if(Object.prototype.hasOwnProperty.call(o,s)){var f=o[s],g=c.IllustratedBooksConfig.getConfigs(n,f);g&&g.forEach(function(o){var s=o.configs[0],g=new C;g.booksid=s.id,g.level=0,g.equipArr=new Array;var m=o.configs[0].cost;o.configs.every(function(t){return!e.getEquipDataById(t.id)||(g=e.getEquipDataById(t.id),s=t,!1)});var _=0;if(p.default.instance&&(_=p.default.instance.level),_>=s.level){var v=!1;if(void 0!=s.nextid&&s.item_cost){var y=!1;if((v=u.default.getItemAmount(s.item_cost[0])>=parseInt(s.item_cost[1]))&&g.equipArr.length>=m.length)for(var b in g.equipArr){if(g.equipArr[b].quality!=r.GameConst.QUALITY.ORANGE){y=!0;break}}else y=!0;v&&y&&(d=!0,a=!0,i=!0)}if(g.level>=s.taolevel)m.forEach(function(o){var r,c=p.default.instance.getEquipById(o,s.jielevel),l=e.getEquipDataInArr(g.equipArr,o),u=!1;for(var m in c)if(l){if(c[m].quality>l.quality){u=!0;break}}else if(c[m].quality>s.jielevel-1){u=!0;break}void 0!=s.nextid&&u&&c.length>0&&(r=!0,d=!0,a=!0,i=!0);var C={id:"tujian_item_"+n+"_"+f+"_"+s.id+"_"+o,type:h.RedPointType.Default,show:r};t.push(C)});else{var I=l.IllustratedBooksenhanceConfig.getConfigByCid(s.cid,g.level),M=void 0!=s.nextid?c.IllustratedBooksConfig.getConfigById(s.nextid):void 0;0==s.taolevel?(d=!0,a=!0,i=!0):(I&&p.default.instance.getCream()>=I.cost[3]||M&&g.level>=M.taolevel)&&(d=!0,a=!0,i=!0)}}});var m={id:"tujian_Word_"+n+"_"+f,type:h.RedPointType.Default,show:d};t.push(m)}};for(var d in o)s(d);var f={id:"tujian_occupation_"+n,type:h.RedPointType.Default,show:a};t.push(f)});var a={id:h.RedPointId.Tujian,type:h.RedPointType.Default,show:i};return t.push(a),t},e}();i.default=v,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../config/GameConst":"GameConst","../config/IllustratedBooksConfig":"IllustratedBooksConfig","../config/IllustratedBooksenhanceConfig":"IllustratedBooksenhanceConfig","../config/MapConfig":"MapConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager","./ItemInfoModel":"ItemInfoModel","./RoleInfoModel":"RoleInfoModel"}],TuJianSelectedEquipView:[function(e,t,i){"use strict";cc._RF.push(t,"0fd2aXklAJADJ4uhSgoCJtO","TuJianSelectedEquipView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/EquipConfig"),l=e("../config/GameConst"),d=e("../config/MapConfig"),f=e("../config/ViewConfig"),g=e("../model/ItemInfoModel"),h=e("../model/RoleInfoModel"),u=e("../network/SocketClient"),p=e("../prefab/ItemPrefab"),m=e("../utils/MusicHelper"),C=cc._decorator,_=C.ccclass,v=(C.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=2,t.isClick=!0,t}return n(t,e),t.prototype.onLoad=function(){this.initNode()},t.prototype.onEnable=function(){this.onAddEvent(this.btnCancelNode,this.onBtnCancel.bind(this)),this.onAddEvent(this.btnConfirmNode,this.onBtnAdd.bind(this))},t.prototype.onInitChild=function(e,t){this.bookId=t,this.initItemList(e)},t.prototype.initItemList=function(e){this.equipItemListNode=e.length>5?this.scrollView.content:this.itemListNode,this.scrollView.node.active=e.length>5,this.itemListNode.active=!this.scrollView.node.active;for(var t=this.equipItemListNode.childrenCount>e.length?this.equipItemListNode.childrenCount:e.length,i=0;i<t;i++){var n=void 0;if(i<this.equipItemListNode.childrenCount?n=this.equipItemListNode.children[i]:(n=cc.instantiate(this.itemNode)).parent=this.equipItemListNode,n.active=i<e.length,i<e.length){var o=e[i],a=c.EquipConfig.getEquipConfigById(o.itemType);n.getChildByName("ItemPrefab").getComponent(p.default).init(o),this.onAddEventEx(n,this.onBtnSelect.bind(this,n,o),cc.Button.Transition.NONE,a,o)}}this.selectedNode.active=!1,this.btnCancelNode.active=!1,this.btnConfirmNode.active=!1},t.prototype.initNode=function(){this.btnCancelNode=this.findChild(this.node,"frame/btnCancel"),this.btnConfirmNode=this.findChild(this.node,"frame/btnConfirm"),this.txtTimeLabel=this.findChild(this.node,"frame/btnConfirm/txtTime").getComponent(cc.Label),this.itemListNode=this.findChild(this.node,"frame/itemList"),this.itemNode=this.findChild(this.node,"frame/itemList/item"),this.scrollView=this.findChild(this.node,"frame/scrollView").getComponent(cc.ScrollView),this.selectedNode=this.findChild(this.node,"frame/selected"),this.tipNode=this.findChild(this.node,"frame/tip")},t.prototype.onAddEventEx=function(e,t,i,n,o){var s=this;void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e);var r=0,c=function(){s.onClickThis(n,o)};e.on(cc.Node.EventType.TOUCH_START,function(){r=a.default.now(),s.scheduleOnce(c,.5)}),e.on(cc.Node.EventType.TOUCH_END,function(){if(e.getComponent(cc.Button).enabled){m.MusicHelper.play_click();var i=a.default.now();s.unschedule(c),t(0!=r&&i-r>=400?1:0)}},e)},t.prototype.onClickThis=function(e,t){var i;e&&(i=1==e.dingzhi?e.world==d.MapConfig.WORLD.FanRen?g.default.createDingZhiEquip(e.id):g.default.createFuWenEquip(e.id):t||g.default.create(e.kind,e.id,0,t.quality),s.default.instance.createView(f.default.gameView.equipInfo,null,i,2))},t.prototype.onBtnSelect=function(e,t){var i=this;this.downTime&&this.unschedule(this.downTime),this.isClick=!0,this.btnConfirmNode.color=cc.color(255,255,255),this.equipId=t.itemId,this.selectedNode.active=!0,this.btnCancelNode.active=!0,this.btnConfirmNode.active=!0,this.selectedNode.parent=e,this.selectedNode.setPosition(0,0);var n=c.EquipConfig.getEquipConfigById(t.itemType);if(t.quality>=l.GameConst.QUALITY.PURPLE&&n&&n.pro==h.default.instance.occupation){this.tipNode.active=!0,this.txtTimeLabel.node.active=!0,this.txtTimeLabel.string="("+this.time+"s)",this.btnConfirmNode.color=cc.color(122,122,122),this.isClick=!1;var o=this.time;this.downTime=function(){0==(o-=1)&&(i.isClick=!0,i.tipNode.active=!1,i.txtTimeLabel.node.active=!1,i.btnConfirmNode.color=cc.color(255,255,255),i.unschedule(i.downTime)),i.txtTimeLabel.string="("+o+"s)"},this.schedule(this.downTime,1)}else this.tipNode.active=!1,this.txtTimeLabel.node.active=!1},t.prototype.onBtnAdd=function(){this.isClick&&(u.default.s_add_book_equip(parseInt(this.equipId),this.bookId),this.closeView())},t.prototype.onBtnCancel=function(){this.unschedule(this.downTime),this.equipId=void 0,this.selectedNode.active=!1,this.btnCancelNode.active=!1,this.btnConfirmNode.active=!1,this.tipNode.active=!1,this.txtTimeLabel.node.active=!1},t=o([_],t)}(r.default));i.default=v,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/EquipConfig":"EquipConfig","../config/GameConst":"GameConst","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../model/ItemInfoModel":"ItemInfoModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/MusicHelper":"MusicHelper"}],TuJianView:[function(e,t,i){"use strict";cc._RF.push(t,"54e14vHlqNNYJD6qheU5LOQ","TuJianView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/UIManager"),s=e("../../engine/ViewBase"),r=e("../config/ColorConfig"),c=e("../config/GameConst"),l=e("../config/MagicNameConfig"),d=e("../config/RuneConfig"),f=e("../config/WordConfig"),g=e("../model/MagicModel"),h=e("../model/SettingModel"),u=e("../utils/UIHelper"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteFrameList=[],t.spriteFrameList1=[],t.btn_fenyeList=[],t.button_fenyeList=[],t.extraNodeList=[],t.scrollviewlist=[],t.nowChoose=[],t}return n(t,e),t.prototype.onLoad=function(){a.default.instance.setTopUI(this.viewPath),this.initStatus(),this.refreshShow(),this.onClickShow(0)},t.prototype.initStatus=function(){for(var e=0;e<3;e++){var t=e+2;this.scrollviewlist[e]=this.findChild(this.node,"view/ScrollView"+(e+1)),this.btn_fenyeList[e]=this.node.getChildByName("view").getChildByName("btn_fenye"+t),this.button_fenyeList[e]=this.node.getChildByName("view").getChildByName("button_fenye"+t),this.btn_fenyeList[e].active=!0,this.button_fenyeList[e].active=!1,this.onAddEvent(this.btn_fenyeList[e],this.onClickShow.bind(this,e))}},t.prototype.onClickShow=function(e){if(e!=this.nowClick){this.nowClick=e;for(var t=0;t<this.btn_fenyeList.length;t++)this.nowClick==t?(this.button_fenyeList[t].active=!0,this.scrollviewlist[t].active=!0,this.scrollviewlist[t].getComponent(cc.ScrollView).scrollToTop()):(this.button_fenyeList[t].active=!1,this.scrollviewlist[t].active=!1)}},t.prototype.refreshShow=function(){var e=this,t=this.findChild(this.node,"view/ScrollView1/view/content/showNode");t.active=!1;for(var i=function(i){var o=i+2,a=d.RuneConfig.getSameList(o),s=Array.from(a.values()),r=n.scrollviewlist[i].getChildByName("view").getChildByName("content");4==o&&s.length--,n.nowChoose[i]=[];for(var c=function(o){if(0==i&&o<6){var a=s[o],c=cc.instantiate(t);c.parent=r,n.nowChoose[i][o]=a.length-1,n.onClickLevel(c,a,i,o),n.initShow(c,a,i,o),c.active=!0}else n.scheduleOnce(function(){var n=s[o],a=cc.instantiate(t);a.parent=r,e.nowChoose[i][o]=n.length-1,e.onClickLevel(a,n,i,o),e.initShow(a,n,i,o),a.active=!0},1/60*(i+o+1))},l=0;l<s.length;l++)c(l)},n=this,o=0;o<3;o++)i(o)},t.prototype.onClickLevel=function(e,t,i,n){var o=this,a=e.getChildByName("but_you"),s=e.getChildByName("but_zuo");this.onAddEvent(a,function(){o.nowChoose[i][n]==t.length-1?o.nowChoose[i][n]=0:o.nowChoose[i][n]++,o.chooseOne(e,t,i,n)}),this.onAddEvent(s,function(){0==o.nowChoose[i][n]?o.nowChoose[i][n]=t.length-1:o.nowChoose[i][n]--,o.chooseOne(e,t,i,n)})},t.prototype.initShow=function(e,t,i,n){this.chooseOne(e,t,i,n)},t.prototype.chooseOne=function(e,t,i,n){var o=e.getChildByName("img_ui_mingzidi").getChildByName("fuWenName").getComponent(cc.Label),a=e.getChildByName("label2").getChildByName("node").getChildByName("richText").getComponent(cc.RichText),s=e.getChildByName("label2").getChildByName("node").getChildByName("zhiYeSp").getComponent(cc.Sprite),d=e.getChildByName("label1").getChildByName("richText").getComponent(cc.RichText),p=e.getChildByName("label3").getChildByName("richText").getComponent(cc.RichText),m=e.getChildByName("label0").getChildByName("richText").getComponent(cc.RichText),C=t[this.nowChoose[i][n]];o.string=C.name,o.node.color=r.ColorConfig.getFuWenColor(C.quality),a.string=c.GameConst.OccupationNameMap(C.profession),m.string=C.position,a.node.color=r.ColorConfig.getOccupationColor(C.profession),0==C.profession?s.node.active=!1:(s.node.active=!0,s.spriteFrame=this.spriteFrameList1[C.profession-1]),C.level<0?(d.string=f.WordConfig.getWord(60501),d.node.color=r.ColorConfig.WhiteColor):d.string=h.SettingModel.getRuneList()[C.level],C.e_quality<0?(p.string=f.WordConfig.getWord(60501),p.node.color=r.ColorConfig.WhiteColor):u.UIHelper.formatQuality1(p,C.e_quality);var _=C.property;this.extraNodeList[i]||(this.extraNodeList[i]=[]),this.extraNodeList[i][n]||(this.extraNodeList[i][n]=[]);for(var v=0;v<this.extraNodeList[i][n].length;v++)this.extraNodeList[i][n][v].active=!1;for(var y=0;y<_.length;y++){var b=e.getChildByName("fuwenNode").getChildByName("txtFuWen");b.active=!1;var I=void 0;this.extraNodeList[i][n][y]?I=this.extraNodeList[i][n][y]:((I=cc.instantiate(b)).parent=b.parent,this.extraNodeList[i][n][y]=I),I.active=!0;var M=I.getChildByName("txtExtra").getComponent(cc.Label),w=I.getChildByName("itemNode").getChildByName("txtName").getComponent(cc.Label),k=I.getChildByName("itemNode").getChildByName("txtStatus").getComponent(cc.Label);w.string=l.MagicNameConfig.getDesc(C.property[y])+":",k.string=g.default.formatMagicValue(C.property[y],C.tpro_max[y])+"",M.string=cc.js.formatStr(f.WordConfig.getWord(60423),g.default.formatMagicValue(C.property[y],C.tpro_max[y]))}},o([C({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList",void 0),o([C({type:[cc.SpriteFrame]})],t.prototype,"spriteFrameList1",void 0),t=o([m],t)}(s.default);i.default=_,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/MagicNameConfig":"MagicNameConfig","../config/RuneConfig":"RuneConfig","../config/WordConfig":"WordConfig","../model/MagicModel":"MagicModel","../model/SettingModel":"SettingModel","../utils/UIHelper":"UIHelper"}],TuituItem:[function(e,t,i){"use strict";cc._RF.push(t,"702984QYPJGBJNWvwQZUG42","TuituItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/MonsterConfig"),r=e("../../utils/MusicHelper"),c=e("../../utils/UIHelper"),l=e("../../model/CostumeModel"),d=cc._decorator,f=d.ccclass,g=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankingIconArr=[],t.zhiyeIconArr=[],t.rankingLabel=null,t.rankIcon=null,t.touxiang=null,t.touxiangkuang=null,t.profession_icon=null,t.roleName=null,t.rolePower=null,t.monsterName=null,t}return n(t,e),t.prototype.init=function(e,t){var i=t.name,n=t.prof,o=t.fight,a=t.monsterid,r=t.heroId;e<3?(this.rankingLabel.node.active=!1,this.rankIcon.spriteFrame=this.rankingIconArr[e]):(this.rankingLabel.node.active=!0,this.rankingLabel.string=e+1+""),this.profession_icon.spriteFrame=this.zhiyeIconArr[n-1],this.roleName.string=i,this.rolePower.string=String(o);var d=s.MonsterConfig.getMonsterConfigById(a);d?this.monsterName.string=d.name:cc.log("monster = ",d),this.onAddEvent(this.roleName.node,c.UIHelper.showPlayerDetail.bind(this,r)),l.CostumeModel.setCostSF(this.touxiang,l.CostumeType.Head,t.personalize.portrait),l.CostumeModel.setCostSF(this.touxiangkuang,l.CostumeType.HeadFM,t.personalize.portrait_skin)},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e),e.on(cc.Node.EventType.TOUCH_END,function(){e.getComponent(cc.Button).enabled&&(r.MusicHelper.play_click(),t&&t())},e)},t.prototype.start=function(){},o([g([cc.SpriteFrame])],t.prototype,"rankingIconArr",void 0),o([g([cc.SpriteFrame])],t.prototype,"zhiyeIconArr",void 0),o([g(cc.Label)],t.prototype,"rankingLabel",void 0),o([g(cc.Sprite)],t.prototype,"rankIcon",void 0),o([g(cc.Sprite)],t.prototype,"touxiang",void 0),o([g(cc.Sprite)],t.prototype,"touxiangkuang",void 0),o([g(cc.Sprite)],t.prototype,"profession_icon",void 0),o([g(cc.Label)],t.prototype,"roleName",void 0),o([g(cc.Label)],t.prototype,"rolePower",void 0),o([g(cc.Label)],t.prototype,"monsterName",void 0),t=o([f],t)}(a.default);i.default=h,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/MonsterConfig":"MonsterConfig","../../model/CostumeModel":"CostumeModel","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper"}],TuituModel:[function(e,t,i){"use strict";cc._RF.push(t,"8542fzJ+XREt5odKGZC0HpX","TuituModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../engine/EventManager"),o=e("../../../engine/ProtoUtils"),a=e("../../event/CommonEvent"),s=e("../../model/CostumeModel"),r=function(){return function(){}}();i.FanrenRankInfo=r;var c=function(){function e(){}return e.getModelList=function(){return this._modelList},e.clean=function(){this._modelList=[]},e.proto2Model=function(e,t){this._modelList=[];for(var i=o.ProtoUtils.DeserializeBinary(t,e),c=i.getRankListList(),l=0;l<c.length;l++){var d=new r,f=c[l];d.monsterid=f.getMonsterid(),d.name=f.getName(),d.prof=f.getProf(),d.rank=f.getRank(),d.fight=f.getFight(),d.heroId=f.getHeroid(),d.personalize=s.CostumeModel.proto2Personalize(f.getPersonalize());var g=d.rank-1;this._modelList[g]=d}this.ownrank=i.getOwnRank(),this.monsterid=i.getMonsterid(),n.EventManager.instance.dispatch(a.CommonEvent.Event_Tuitu_refresh),cc.log(t," protoPack: ",i)},e._modelList=[],e}();i.default=c,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoUtils":"ProtoUtils","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel"}],TuituRank:[function(e,t,i){"use strict";cc._RF.push(t,"55b4cXKcgpFqI8po04KJeR7","TuituRank");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/MonsterConfig"),l=e("../../config/ViewConfig"),d=e("../../config/WordConfig"),f=e("../../event/CommonEvent"),g=e("../../model/FightModel"),h=e("../../model/RoleInfoModel"),u=e("../../network/SocketClient"),p=e("../PublicTipView"),m=e("./TuituItem"),C=e("./TuituModel"),_=e("../../model/CostumeModel"),v=cc._decorator,y=v.ccclass,b=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TuituItemPrefab=null,t}return n(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.roleName=this.findChild(this.node,"bg/myRank/roleName"),this.rolePower=this.findChild(this.node,"bg/myRank/rolePower"),this.roleName.getComponent(cc.Label).string=h.default.instance.roleName,this.rolePower.getComponent(cc.Label).string=g.default.totalFight+"",this.notOnTheList=this.findChild(this.node,"bg/myRank/notOnTheList"),this.order=this.findChild(this.node,"bg/myRank/order"),this.myMonsterName=this.findChild(this.node,"bg/myRank/myMonsterName"),this.touxiang=this.findChild(this.node,"bg/myRank/touxiang").getComponent(cc.Sprite),this.touxiangkuang=this.findChild(this.node,"bg/myRank/touxiangkuang").getComponent(cc.Sprite),this.ItemsContect=this.findChild(this.node,"bg/middle/scrollView/view/content");var i=this.findChild(this.node,"bg/middle/scrollView");this.scroCp=i.getComponent(cc.ScrollView);var n=cc.instantiate(this.TuituItemPrefab).height;i.on("scrolling",function(){var e=t.scroCp.getScrollOffset().y;e-t.maxOffY>n&&(t.creatItem(5),t.maxOffY=e)},this)},t.prototype.initScrollviewData=function(){this.maxOffY=0,this.totalCount=0,this.scroCp.stopAutoScroll(),this.scroCp.scrollToOffset(cc.v2(0,0))},t.prototype.onInitChild=function(){a.EventManager.instance.on(f.CommonEvent.Event_Tuitu_refresh,this.refreshItems,this),this.btn_help=this.findChild(this.node,"bg/top/btn_help"),this.btn_close=this.findChild(this.node,"bg/top/btn_close"),this.tab_fanren=this.findChild(this.node,"bg/top/tabBg/tab_fanren"),this.tab_lunhui=this.findChild(this.node,"bg/top/tabBg/tab_lunhui"),this.onAddEvent(this.btn_close,this.closeView.bind(this)),this.onAddEvent(this.btn_help,this.onClickHelp.bind(this)),this.onAddEvent(this.tab_fanren,this.onClickFanRen.bind(this)),this.onAddEvent(this.tab_lunhui,this.onClickLuanHui.bind(this)),this.onClickFanRen()},t.prototype.onClickHelp=function(){s.default.instance.createView(l.default.gameView.RankRuleView,null,p.RuleType.TYPE_TUITU)},t.prototype.onClickFanRen=function(){u.default.s_tuituF_info(),this.changeTab(0)},t.prototype.onClickLuanHui=function(){u.default.s_tuituL_info(),this.changeTab(1)},t.prototype.changeTab=function(e){this.findChild(this.tab_lunhui,"0").active=this.findChild(this.tab_fanren,"1").active=!Boolean(e),this.findChild(this.tab_lunhui,"1").active=this.findChild(this.tab_fanren,"0").active=Boolean(e),this.refreshItems()},t.prototype.creatItem=function(e){if(!(this.totalCount+e>this.modelList.length&&(e=this.modelList.length-this.totalCount)<=0)){for(var t=0;t<e;t++){var i=this.totalCount+t,n=this.modelList[i],o=cc.instantiate(this.TuituItemPrefab);o.getComponent(m.default).init(i,n),this.ItemsContect.addChild(o)}this.totalCount+=e}},t.prototype.refreshItems=function(){if(this.ItemsContect.removeAllChildren(),this.modelList=C.default.getModelList(),this.refresSelf(),cc.log("tuitu itemNum: ",this.modelList.length),0!==this.modelList.length){if(this.initScrollviewData(),this.modelList.length>100){var e=this.modelList.length;this.modelList.splice(100,e-100)}var t=Math.ceil(this.ItemsContect.parent.height/(cc.instantiate(this.TuituItemPrefab).height+this.ItemsContect.getComponent(cc.Layout).spacingY))+5;this.creatItem(t)}},t.prototype.refresSelf=function(){if(C.default.ownrank>0)this.order.getComponent(cc.Label).string=String(C.default.ownrank),this.notOnTheList.active=!1;else{var e=d.WordConfig.getWord(60460);this.notOnTheList.active=!0,this.notOnTheList.getComponent(cc.Label).string=e,this.order.getComponent(cc.Label).string=""}if(C.default.monsterid>0){var t=c.MonsterConfig.getMonsterConfigById(C.default.monsterid);t?this.myMonsterName.getComponent(cc.Label).string=t.name:cc.log("monster = ",t)}else this.myMonsterName.getComponent(cc.Label).string=d.WordConfig.getWord(60456);_.CostumeModel.setCostSF(this.touxiang,_.CostumeType.Head),_.CostumeModel.setCostSF(this.touxiangkuang,_.CostumeType.HeadFM)},t.prototype.onHide=function(){C.default.clean()},t.prototype.start=function(){},o([b(cc.Prefab)],t.prototype,"TuituItemPrefab",void 0),t=o([y],t)}(r.default);i.default=I,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/MonsterConfig":"MonsterConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/FightModel":"FightModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../PublicTipView":"PublicTipView","./TuituItem":"TuituItem","./TuituModel":"TuituModel"}],UIHelper:[function(e,t,i){"use strict";cc._RF.push(t,"bf86e8InPZGZYyCrxNyW1JT","UIHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/UIManager"),o=e("../config/ColorConfig"),a=e("../config/GameConst"),s=e("../config/ViewConfig"),r=e("../model/RoleInfoModel"),c=e("../config/MapConfig"),l=e("../config/JingJieConfig"),d=e("../model/JingJieModel"),f=e("../model/ItemInfoModel"),g=e("../../engine/EventManager"),h=e("../event/CommonEvent"),u=e("../config/WordConfig"),p=e("../../engine/Logger"),m=function(){function e(){this.name="",this.count=0,this.quality=0}return e.create=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=new e;return o.name=t,o.count=i,o.quality=n,o},e}();i.TipsItem=m;var C=function(){function e(){}return e.showCoinNoEnough=function(){n.default.instance.createView(s.default.gameView.buyMoney)},e.showNum=function(e,t,i,o){void 0===t&&(t=1),void 0===i&&(i=cc.Color.GREEN),void 0===o&&(o=cc.v2(0,100)),n.default.instance.createView(s.default.gameView.showNum,null,e,t,i,o)},e.showTip=function(e,t,i,o){void 0===t&&(t=1),void 0===i&&(i=cc.Color.WHITE),void 0===o&&(o=cc.v2(0,100)),n.default.instance.createView(s.default.gameView.tip,null,e,t,i,o)},e.tranNumber=function(e){var t=e.toString();if(t.length<6)return t;if(t.length<9){var i,n;n=(n=4-(i=Math.floor(e/1e4)).toString().length)>0?n:0;var o=t.substring(t.length-4,t.length-4+n);return parseFloat(i+"."+o)+u.WordConfig.getWord(60623)}n=(n=4-(i=Math.floor(e/1e8)).toString().length)>0?n:0;o=t.substring(t.length-8,t.length-8+n);return parseFloat(i+"."+o)+u.WordConfig.getWord(60624)},e.toFixStr=function(e,t){void 0===t&&(t=2);var i="",n=e.toFixed(t).split(".");i=n[0];for(var o=n[1],a=o.length-1;a>=0;a--)a==o.length-1&&"0"==o[a]&&(o=o.substr(0,o.length-1));return o.length>0&&(i=i+"."+o),i},e.formatName=function(e,t){if(void 0===t&&(t=!1),t)return e;switch(e.length){case 1:case 2:case 3:return e;case 4:case 5:return e.slice(0,2)+"\n"+e.slice(2);default:return e.slice(0,3)+"\n"+e.slice(3)}},e.showGetItemsTips=function(e,t){void 0===t&&(t=null),this.showTip(t,2,cc.Color.WHITE,cc.v2(0,300));for(var i=0;i<e.length;i++){var n=e[i].name+"x"+e[i].count;this.showTip(n,2,o.ColorConfig.getQualityColor(e[i].quality),cc.v2(0,300))}},e.formatPart=function(e,t){e.string=a.GameConst.getEquipPositionName(t)},e.formatRoleLevel=function(e,t){t.world==c.MapConfig.WORLD.FanRen||1003==t.cid?e.string=t.level+u.WordConfig.getWord(60433):t.world==c.MapConfig.WORLD.LunHui&&(e.string=l.JingJieConfig.JingJieNameConfig[t.world-1][t.reborn]),(t.world==c.MapConfig.WORLD.FanRen||1003==t.cid)&&r.default.instance.level>=t.level?e.node.color=cc.Color.WHITE:t.world==c.MapConfig.WORLD.LunHui&&d.JingJieModel.getMyLunHuiJingLevel()>=t.reborn?e.node.color=cc.Color.WHITE:e.node.color=o.ColorConfig.RedColor},e.formatRoleOccupation=function(e,t){t==r.default.instance.occupation||t==a.GameConst.OCCUPATION.None?e.node.color=cc.Color.WHITE:e.node.color=o.ColorConfig.RedColor,e.string=a.GameConst.OccupationNameMap(t)},e.formatQuality=function(e,t){e.string=a.GameConst.qualityNameArr(t),e.node.color=o.ColorConfig.getQualityColor(t)},e.formatQuality1=function(e,t){e.string=a.GameConst.qualityNameArr(t),e.node.color=o.ColorConfig.getQualityColor(t)},e.formatHighestGrade=function(e,t){t?(e.string=t.getCurrBaseAddAttrValue()+"("+t.getJiPinPersent()+"%)",e.node.color=o.ColorConfig.getQualityColor(t.quality)):(e.string="0",e.node.color=cc.Color.GRAY)},e.showQuickItemBuy=function(e){var t=f.default.getConfigById(e),i=Math.floor(r.default.instance.getGold()/t.gem);n.default.instance.createView(s.default.gameView.BuyShopView,null,3,1,e,t.gem,t.gem,1,i)},e.gotoFangshi=function(e){g.EventManager.instance.dispatch(h.CommonEvent.Event_JumpToFangshi,e)},e.gotoPaiHangBang=function(e){n.default.instance.createView(s.default.gameView.RankView,null,e)},e.gotoButtomTab=function(e){g.EventManager.instance.dispatch(h.CommonEvent.Event_GameUIVIew_Tab_Switch,e)},e.showPlayerDetail=function(e){p.Logger.log("\u67e5\u770b\u4e2a\u4eba\u4fe1\u606f===",e),e&&n.default.instance.createView(s.default.gameView.PlayerInfoPreView,null,e)},e.printNodeAllNodeName=function(e){for(var t=e.name,i=0,n=e;i<100;++i){var o=n.parent;if(!o||!o.parent)return t;t=o.name+"/"+t,n=o}return t},e}();i.UIHelper=C,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/JingJieConfig":"JingJieConfig","../config/MapConfig":"MapConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ItemInfoModel":"ItemInfoModel","../model/JingJieModel":"JingJieModel","../model/RoleInfoModel":"RoleInfoModel"}],UIManager:[function(e,t,i){"use strict";cc._RF.push(t,"776f2wi01VJrasOpoc4E/mH","UIManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/config/ViewConfig"),o=e("./DateUtil"),a=e("./Logger"),s=e("./ResourcesManager"),r=e("./ViewBase"),c=function(){function e(){this.uiList=new Map,this.assignParentList=new Map,this.cdList=new Map}return Object.defineProperty(e,"instance",{get:function(){return this._instance?this._instance:this._instance=new e},enumerable:!0,configurable:!0}),e.prototype.init=function(e){this.baseRoot=e.getChildByName("baseRoot"),this.topRoot=e.getChildByName("topRoot"),this.loadingIcon=e.getChildByName("loadingIcon"),setInterval(this.checkCd.bind(this),6e4)},e.prototype.getTopRoot=function(){return this.topRoot},e.prototype.showLoadingIcon=function(e){void 0===e&&(e=!0),this.loadingIcon.active=!0,this.loadingIcon.getChildByName("icon").active=e},e.prototype.hideLoadingIcon=function(){this.loadingIcon.active=!1},e.prototype.checkCd=function(e){var t=o.default.now(),i=this.cdList.get(e);i&&t-i>=15e3&&this.uiList.delete(e)},e.prototype.createView=function(e,t){for(var i=this,c=[],l=2;l<arguments.length;l++)c[l-2]=arguments[l];this.checkCd(e),this.uiList.has(e)&&e!=n.default.gameView.tip?a.Logger.log("createView=================================",e):(e!=n.default.gameView.tip&&(this.uiList.set(e,new r.default),this.cdList.set(e,o.default.now())),s.default.instance.addTaskPrefab(e,function(n){var o=cc.instantiate(n),a=o.getComponent(r.default);i.cdList.delete(e),a?(console.log("createView suc",e),i.uiList.set(e,a),a.viewPath=e,o.parent=i.baseRoot,o.setPosition(0,0),a.onInitBase.apply(a,[e].concat(c)),a.onShow(),t&&t(),i.hideLoadingIcon()):console.warn(e,"\u6ca1\u6709\u6dfb\u52a0ViewBase\u7ec4\u4ef6")},this))},e.prototype.createViewByParent=function(e,t,i,c,l){var d=this;void 0===i&&(i=!0);for(var f=[],g=5;g<arguments.length;g++)f[g-5]=arguments[g];if(this.checkCd(e),this.uiList.has(e)&&e!=n.default.gameView.tip){if(a.Logger.log("createView=================================",e),i){var h=this.uiList.get(e);h.onInitBase.apply(h,[e].concat(f)),h.onShow(),l&&l()}}else e!=n.default.gameView.tip&&(this.uiList.set(e,new r.default),this.cdList.set(e,o.default.now())),s.default.instance.addTaskPrefab(e,function(i){var n=cc.instantiate(i),o=n.getComponent(r.default);d.cdList.delete(e),o?(console.log("createView suc",e),d.uiList.set(e,o),t&&d.assignParentList.set(e,o),c=c>=0?c:t.childrenCount,o.viewPath=e,n.parent=t||d.baseRoot,n.setPosition(0,0),n.setSiblingIndex(c),o.onInitBase.apply(o,[e].concat(f)),o.onShow(),l&&l(),d.hideLoadingIcon()):console.warn(e,"\u6ca1\u6709\u6dfb\u52a0ViewBase\u7ec4\u4ef6")},this)},e.prototype.getViewByPath=function(e){return this.uiList.get(e)},e.prototype.setTopUI=function(e){if(this.uiList.has(e)){var t=this.uiList.get(e).node;this.uiList.get(e).node.parent=this.topRoot,t.setSiblingIndex(t.parent.childrenCount-1)}},e.prototype.isOpen=function(e){return this.uiList.has(e)},e.prototype.closeView=function(e,t){(void 0===t&&(t=null),this.uiList.has(e))&&this.uiList.get(e).closeView(t)},e.prototype.onCloseView=function(e,t){(void 0===t&&(t=null),this.uiList.has(e))&&(this.uiList.get(e).onHide(),this.uiList.delete(e),this.assignParentList.delete(e),t&&"function"==typeof t&&t())},e.prototype.closeAllView=function(){this.baseRoot.removeAllChildren(),this.topRoot.removeAllChildren(),this.cdList.clear(),this.uiList.clear(),this.assignParentList.forEach(function(e){e.node.removeFromParent()}),this.assignParentList.clear()},e}();i.default=c,cc._RF.pop()},{"../game/config/ViewConfig":"ViewConfig","./DateUtil":"DateUtil","./Logger":"Logger","./ResourcesManager":"ResourcesManager","./ViewBase":"ViewBase"}],Uint8ArrayHelper:[function(e,t,i){"use strict";cc._RF.push(t,"a6e1fgU9x1H14GZOMd68h+V","Uint8ArrayHelper"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.intToUint8Array=function(e){var t=new ArrayBuffer(4);return new DataView(t).setInt32(0,e,!0),new Uint8Array(t)},e.boolToUint8Array=function(e){var t=new ArrayBuffer(1),i=new DataView(t);return e?i.setInt8(0,1):i.setInt8(0,0),new Uint8Array(t)},e.floatToUint8Array=function(e){var t=new ArrayBuffer(4);return new DataView(t).setFloat32(0,e,!0),new Uint8Array(t)},e.doubleToUint8Array=function(e){var t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!0),new Uint8Array(t)},e.uint8ArrayToInt=function(e){var t=new Uint32Array(1);return t[0]=(255&e[3])<<24,t[0]=t[0]|(255&e[2])<<16,t[0]=t[0]|(255&e[1])<<8,t[0]=t[0]|255&e[0],t[0]},e.uint8ArrayToBool=function(e){return 1==this.uint8ArrayToInt(e)},e.longFrom8Bytes=function(e){for(var t=0,i=0;i<8;++i){var n=i;t|=255<<n&e[i]<<n}return t},e.arrayBufferToBigInt64=function(e){},e.arrayBufferToFloat=function(e){return new DataView(e).getFloat32(0,!0)},e.arrayBufferToDouble=function(e){return new DataView(e).getFloat64(0,!0)},e.stringToUint8Array=function(e){for(var t=2*e.length,i=new Uint8Array(t),n=0;n<e.length;n++){var o=e.charCodeAt(n),a=this.intToUint8Array(o);i.set(a.subarray(0,2),2*n)}return i},e.uint8ArrayToString=function(e,t){void 0===t&&(t=!1);for(var i="",n=0;n<e.length;){var o=this.uint8ArrayToInt(e.subarray(n,n+2)),a=String.fromCharCode(o);0!=o&&(i+=a),n+=2}return i},e}();i.default=n,cc._RF.pop()},{}],UltimateGiftPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"f5e56cHxgBGNIH+TNJrFKXQ","UltimateGiftPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/CarnivalConfig"),d=e("../config/CarvinalSurpriceConfig"),f=e("../config/GameConst"),g=e("../config/ITemsConfig"),h=e("../config/ViewConfig"),u=e("../config/WordConfig"),p=e("../event/CommonEvent"),m=e("../model/ActivityOpenModel"),C=e("../model/CarnivalInfoModel"),_=e("../model/ItemInfoModel"),v=e("../network/SocketClient"),y=e("../prefab/ItemPrefab"),b=e("../utils/UIHelper"),I=e("../view/PublicTipView"),M=e("../config/DefaultConfig"),w=cc._decorator,k=w.ccclass,S=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNodeList=[],t.isEffect=!1,t.XinYunCoinID=f.ItemId.XinYunCoin,t.XinYunCoinNum=1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.item=this.findChild(this.node,"scrollView/view/content/item"),this.item.active=!1,this.btn_nextRound=this.findChild(this.node,"btn_jinruxiayilun"),this.btn_nextRound.active=!1;var t=M.DefaultConfig.getConfigById(143).value;for(var i in t)this.XinYunCoinID=i,this.XinYunCoinNum=t[i]},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"btn_help"),this.onclickHelp.bind(this)),this.onAddEvent(this.findChild(this.node,"btn_change"),this.onClickChangeUltimateGift.bind(this)),this.onAddEvent(this.findChild(this.node,"havePanel/btn_add"),this.onClickAdd.bind(this)),this.onAddEvent(this.btn_nextRound,this.onClickNextRound.bind(this)),s.EventManager.instance.on(p.CommonEvent.Event_CarnivalInfoChange,this.refresh,this),s.EventManager.instance.on(p.CommonEvent.Event_Item_update,this.refresh,this),s.EventManager.instance.on(p.CommonEvent.Event_NextRound,this.allCloseEffect,this),v.default.s_get_carnival_info(),this.refresh()},t.prototype.refresh=function(){if(this.findChild(this.node,"leftTime").getComponent(cc.Label).string=u.WordConfig.getWord(60371),C.default.model){var e=m.default.getStarTimeByActivityId(7),t=m.default.getEndTimeByActivityId(7);this.findChild(this.node,"leftTime").getComponent(cc.Label).string=a.default.formatDateStr7(1e3*e)+"-"+a.default.formatDateStr7(1e3*t)}if(!this.isEffect){this.findChild(this.node,"havePanel/have").getComponent(cc.Label).string=_.default.getItemAmount(this.XinYunCoinID)+"",this.findChild(this.node,"round").getComponent(cc.Label).string=cc.js.formatStr(u.WordConfig.getWord(60372),C.default.model.roundNum);var i=l.default.getAllConfigList();if(this.findChild(this.node,"ItemPrefab").active=!1,this.findChild(this.node,"btn_tianjia").active=!0,this.btn_nextRound.active=!1,C.default.model&&C.default.model.currSelet>0){var n=d.default.getConfigById(C.default.model.currSelet);if(n){var o=void 0,s=0;for(var r in n.items)o=g.ITemsConfig.getITemsConfigById(r),s=n.items[r];this.findChild(this.node,"ItemPrefab").active=!0,this.findChild(this.node,"ItemPrefab").getComponent(y.default).init(_.default.create(f.GameConst.ITEM_KIND.ITEM,o.id,s,o.quality)),this.findChild(this.node,"btn_tianjia").active=!1}else this.findChild(this.node,"ItemPrefab").active=!1}for(var c=0;c<i.length;c++){var h=void 0;if(this.itemNodeList[c]?h=this.itemNodeList[c]:((h=cc.instantiate(this.item)).parent=this.item.parent,this.itemNodeList[c]=h),h.active=!0,C.default.model&&C.default.model.currSelet>0){C.default.getIsGetUltimateGift()&&(this.btn_nextRound.active=!0),h.getChildByName("ItemPrefab").active=!1,h.getChildByName("ultimateGift").active=!1,h.getChildByName("1").active=!0,this.onAddEvent(h.getChildByName("1"),this.onClickItem.bind(this,c));for(var p=0;p<C.default.model.giftList.length;p++){var v=C.default.model.giftList[p];if(v.index==c+1)if(h.getChildByName("ItemPrefab").active=!0,h.getChildByName("1").active=!1,1==(I=l.default.getConfigById(v.giftId)).suprice){var b=d.default.getConfigById(C.default.model.currSelet);for(var r in b.items){o=g.ITemsConfig.getITemsConfigById(r),s=b.items[r];h.getChildByName("ItemPrefab").getComponent(y.default).init(_.default.create(f.GameConst.ITEM_KIND.ITEM,o.id,s,o.quality),!0)}}else for(var r in I.items){o=g.ITemsConfig.getITemsConfigById(r),s=I.items[r];h.getChildByName("ItemPrefab").getComponent(y.default).init(_.default.create(f.GameConst.ITEM_KIND.ITEM,o.id,s,o.quality),!0)}}}else{var I=i[c];for(var r in I.items){o=g.ITemsConfig.getITemsConfigById(r),s=I.items[r];h.getChildByName("ItemPrefab").getComponent(y.default).init(_.default.create(f.GameConst.ITEM_KIND.ITEM,o.id,s,o.quality),!0),h.getChildByName("ItemPrefab").active=!0,h.getChildByName("1").active=!1,1==I.suprice?(h.getChildByName("ultimateGift").active=!0,h.getChildByName("ItemPrefab").active=!1):h.getChildByName("ultimateGift").active=!1}}}}},t.prototype.onClickItem=function(e){if(_.default.getItemAmount(this.XinYunCoinID)<=0){var t=g.ITemsConfig.getITemsConfigById(this.XinYunCoinID),i=cc.js.formatStr(u.WordConfig.getWord(60242),t.name);b.UIHelper.showTip(i)}else v.default.s_get_carnivalGift(e+1),this.openEffect(this.itemNodeList[e])},t.prototype.onclickHelp=function(){r.default.instance.createView(h.default.gameView.PublicTipView,null,I.RuleType.TYPE_UltimateGift)},t.prototype.onClickChangeUltimateGift=function(){C.default.getIsGetUltimateGift()||r.default.instance.createView(h.default.gameView.UltimateSeletWindow)},t.prototype.allCloseEffect=function(){for(var e=0;e<this.itemNodeList.length;e++)this.openEffect(this.itemNodeList[e])},t.prototype.openEffect=function(e){var t=this;this.isEffect=!0;var i=e.getChildByName("animationNode"),n=e.getChildByName("ItemPrefab");e.getChildByName("ultimateGift").active=!1,e.getChildByName("1").active=!1,n.active=!1,i.active=!0;var o,a=i.getComponent(cc.Animation);o=a.getClips()[0],a.play(o.name,0),cc.tween(a).delay(o.duration).call(function(){i.active=!1,n.active=!0,t.isEffect=!1,t.refresh()}).start()},t.prototype.closeEffect=function(e){},t.prototype.onClickAdd=function(){b.UIHelper.showQuickItemBuy(this.XinYunCoinID)},t.prototype.onClickNextRound=function(){v.default.s_fresh_carnival(),s.EventManager.instance.dispatch(p.CommonEvent.Event_NextRound)},t=o([k],t)}(c.default));i.default=S,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/CarnivalConfig":"CarnivalConfig","../config/CarvinalSurpriceConfig":"CarvinalSurpriceConfig","../config/DefaultConfig":"DefaultConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/CarnivalInfoModel":"CarnivalInfoModel","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/UIHelper":"UIHelper","../view/PublicTipView":"PublicTipView"}],UltimateSeletWindow:[function(e,t,i){"use strict";cc._RF.push(t,"b8946DHUoZGTJlMT1ButmSA","UltimateSeletWindow");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ViewBase"),r=e("../config/CarvinalSurpriceConfig"),c=e("../config/ColorConfig"),l=e("../config/GameConst"),d=e("../config/ITemsConfig"),f=e("../config/WordConfig"),g=e("../event/CommonEvent"),h=e("../model/CarnivalInfoModel"),u=e("../model/ItemInfoModel"),p=e("../model/UltimategiftModel"),m=e("../network/SocketClient"),C=e("../prefab/ItemPrefab"),_=e("../utils/UIHelper"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNodeList=[],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.item=this.findChild(this.node,"scrollView/view/content/ItemPrefab"),this.item.active=!1},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"btn_queding"),this.onClickSure.bind(this)),this.onAddEvent(this.findChild(this.node,"btn_quxiao"),this.onClickCanel.bind(this)),a.EventManager.instance.on(g.CommonEvent.Event_UltimateGiftChange,this.refresh,this),m.default.s_get_ultimate_gift_info(),this.refresh()},t.prototype.refresh=function(){var e=r.default.getAllConfigList();this.currSelet=h.default.model.currSelet;for(var t=0;t<e.length;t++){var i=void 0;this.itemNodeList[t]?i=this.itemNodeList[t]:((i=cc.instantiate(this.item)).parent=this.item.parent,this.itemNodeList[t]=i),i.active=!0;var n=e[t];for(var o in n.items){var a=d.ITemsConfig.getITemsConfigById(o),s=n.items[o];i.getComponent(C.default).init(u.default.create(l.GameConst.ITEM_KIND.ITEM,a.id,s,a.quality)),this.onAddEvent(i,this.onClickSelet.bind(this,i,e[t].id))}if(i.getChildByName("img_yihuode").active=!1,i.getChildByName("img_yixuanzhe").active=!1,i.getChildByName("xiangou").active=!0,i.getChildByName("xiangou").getComponent(cc.Label).string=n.times+"/"+n.times,i.getChildByName("xiangou").color=c.ColorConfig.GreenColor,i.getChildByName("img_ui_baye_suo").active=!0,i.getChildByName("img_ui_baye_suo").getChildByName("value").getComponent(cc.Label).string=cc.js.formatStr(f.WordConfig.getWord(60709),e[t].groupid),n.groupid<=h.default.model.roundNum&&(i.getChildByName("img_ui_baye_suo").active=!1),p.default.model&&p.default.model.giftList)for(var g=0;g<p.default.model.giftList.length;g++){var m=p.default.model.giftList[g];m.giftId==e[t].id&&(m.isUnLock?i.getChildByName("img_ui_baye_suo").active=!1:i.getChildByName("img_ui_baye_suo").active=!0,i.getChildByName("xiangou").getComponent(cc.Label).string=(n.times-m.getTimes>=0?n.times-m.getTimes:0)+"/"+n.times,i.getChildByName("img_yihuode").active=!1,n.times-m.getTimes<=0&&(i.getChildByName("xiangou").color=c.ColorConfig.RedColor,i.getChildByName("img_yihuode").active=!0),this.currSelet==m.giftId?i.getChildByName("img_yixuanzhe").active=!0:i.getChildByName("img_yixuanzhe").active=!1)}}},t.prototype.onClickSure=function(){m.default.s_selet_ultimateGift(this.currSelet),this.closeView()},t.prototype.onClickCanel=function(){this.closeView()},t.prototype.onClickSelet=function(e,t,i){if(1!=i){if(this.currSelet!=t){var n=r.default.getConfigById(t);if(e.getChildByName("img_ui_baye_suo").active){var o=cc.js.formatStr(f.WordConfig.getWord(60243),n.groupid);_.UIHelper.showTip(o)}else{if(p.default.model&&p.default.model.giftList)for(var a=0;a<p.default.model.giftList.length;a++){var s=p.default.model.giftList[a];if(s.giftId==t&&n.times-s.getTimes<=0)return void f.WordConfig.showWord(60244)}this.currSelet=t;for(var c=r.default.getAllConfigList(),l=0;l<c.length;l++)c[l].id==this.currSelet?this.itemNodeList[l].getChildByName("img_yixuanzhe").active=!0:this.itemNodeList[l].getChildByName("img_yixuanzhe").active=!1}}}else e.getComponent(C.default).onClickThis()},t=o([y],t)}(s.default));i.default=b,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ViewBase":"ViewBase","../config/CarvinalSurpriceConfig":"CarvinalSurpriceConfig","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/ITemsConfig":"ITemsConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/CarnivalInfoModel":"CarnivalInfoModel","../model/ItemInfoModel":"ItemInfoModel","../model/UltimategiftModel":"UltimategiftModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab","../utils/UIHelper":"UIHelper"}],UltimategiftModel:[function(e,t,i){"use strict";cc._RF.push(t,"4abfaDWmLJOE79mm2qiCZhY","UltimategiftModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/Logger"),a=e("../event/CommonEvent"),s=function(){function e(){this.giftList=[]}return e.proto2ModelList=function(e){var t=e.getGiftlistList();this.model.giftList=[];for(var i=0;i<t.length;i++){var s=new r;s.giftId=t[i].getGiftid(),s.isUnLock=1==t[i].getIsunlock(),s.getTimes=t[i].getGettimes(),this.model.giftList[i]=s}o.Logger.log("c_get_ultimate_gift_info====",this.model),n.EventManager.instance.dispatch(a.CommonEvent.Event_UltimateGiftChange)},e.model=new e,e}();i.default=s;var r=function(){return function(){this.isUnLock=!1,this.getTimes=0}}();i.UltimategiftItemModel=r,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../event/CommonEvent":"CommonEvent"}],UserInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"f28a1ptV+ZJBZQm2d3zwfN8","UserInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/SpriteFrameComponent"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/ActivityConfig"),f=e("../config/GameConfig"),g=e("../config/GameConst"),h=e("../config/HeroConfig"),u=e("../config/MapConfig"),p=e("../config/MineInfoConfig"),m=e("../config/ViewConfig"),C=e("../config/WordConfig"),_=e("../event/CommonEvent"),v=e("../model/AutoAppellationModel"),y=e("../model/EquipGridModel"),b=e("../model/FightModel"),I=e("../model/JingJieModel"),M=e("../model/MineModel"),w=e("../model/NewFeaturesModel"),k=e("../model/RoleInfoModel"),S=e("../prefab/ItemPrefab"),P=e("../utils/JumpActionUtils"),E=e("../utils/MusicHelper"),L=e("../utils/UIHelper"),T=cc._decorator,R=T.ccclass,N=(T.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtExp=null,t.gridNodeList=[],t.curSelect=0,t.btnJingJieList=[],t.gridOffest=100,t.maxPower=0,t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.roleNode=this.getChild(this.node,"role"),this.infoNode=this.getChild(this.node,"info"),this.btnGm=this.roleNode.getChildByName("btnGm"),f.GameConfig.environment!=f.EnvironmentType.Online&&f.GameConfig.environment!=f.EnvironmentType.TiYan?(this.btnGm.active=!0,this.btnGm.on(cc.Node.EventType.TOUCH_END,this.onClickGm.bind(this))):this.btnGm.active=!1,this.checkAndSetIsOpen(),this.getChild(this.node,"role/btnInfo").off(cc.Node.EventType.TOUCH_END,this.onShowInfo.bind(this)),this.getChild(this.node,"role/btnInfo").on(cc.Node.EventType.TOUCH_END,this.onShowInfo.bind(this)),this.getChild(this.node,"info/btnRole").off(cc.Node.EventType.TOUCH_END,this.onShowRole.bind(this)),this.getChild(this.node,"info/btnRole").on(cc.Node.EventType.TOUCH_END,this.onShowRole.bind(this)),this.getChild(this.node,"info/scrollview/view/content/baseNode/btn_addPower").off(cc.Node.EventType.TOUCH_END,this.onClickAddPower.bind(this)),this.getChild(this.node,"info/scrollview/view/content/baseNode/btn_addPower").on(cc.Node.EventType.TOUCH_END,this.onClickAddPower.bind(this)),this.getChild(this.node,"exp/btnUpLevel").off(cc.Node.EventType.TOUCH_END,this.onClickLevelUp.bind(this)),this.getChild(this.node,"exp/btnUpLevel").on(cc.Node.EventType.TOUCH_END,this.onClickLevelUp.bind(this)),this.getChild(this.node,"verticle_layout/btn_tejie").off(cc.Node.EventType.TOUCH_END,this.onClickShowRingEquip.bind(this)),this.getChild(this.node,"verticle_layout/btn_tejie").on(cc.Node.EventType.TOUCH_END,this.onClickShowRingEquip.bind(this)),this.getChild(this.node,"btn_tujian").off(cc.Node.EventType.TOUCH_END,this.onClickShowHandbook.bind(this)),this.getChild(this.node,"btn_tujian").on(cc.Node.EventType.TOUCH_END,this.onClickShowHandbook.bind(this)),this.userLevelUPNode=this.getChild(this.node,"zhanliuplevel"),this.animation=this.userLevelUPNode.getComponent(cc.Animation),this.userLevelUPNode.active=!1;var i=this.getChild(this.node,"verticle_layout/btn_waiguan");this.onAddEvent(i,w.NewFeaturesModel.instance.pushFeaturesNode(1034,i,this.onClickWaiGuan.bind(this)));var n=this.getChild(this.node,"verticle_layout/btn_chengwei");this.onAddEvent(n,w.NewFeaturesModel.instance.pushFeaturesNode(1042,n,this.onClickChengWei.bind(this))),this.txtExp=this.getChild(this.node,"exp/txtExp",cc.Label),this.txtLevel=this.getChild(this.node,"info/scrollview/view/content/baseNode/txtLevel",cc.Label),this.txtRoleType=this.getChild(this.node,"info/scrollview/view/content/baseNode/txtRoleType",cc.RichText),this.txtTotalFight=this.getChild(this.node,"info/scrollview/view/content/baseNode/txtTotalFight",cc.Label),this.txtJingJie=this.getChild(this.node,"info/scrollview/view/content/baseNode/txtJingJie",cc.Label),this.txtFanRenZhiLi=this.getChild(this.node,"info/scrollview/view/content/baseNode/txtFanRenZhiLi",cc.Label),this.txtLunHuiZhiLi=this.getChild(this.node,"info/scrollview/view/content/baseNode/txtLunHuiZhiLi",cc.Label),this.txtLife=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtLife",cc.Label),this.txtFaLi=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtFaLi",cc.Label),this.txtAttack=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtAttack",cc.Label),this.txtMoFa=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtMoFa",cc.Label),this.txtDaoShu=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtDaoShu",cc.Label),this.txtDefend=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtDefend",cc.Label),this.txtSpeed=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtSpeed",cc.Label),this.txtLucky=this.getChild(this.node,"info/scrollview/view/content/fightNode/txtLucky",cc.Label),this.txtGuDingShangHai=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtGuDingShangHai/txtGuDingShangHai",cc.Label),this.txtGuDingJianShang=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtGuDingJianShang/txtGuDingJianShang",cc.Label),this.txtShangHaiZengJia=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtShangHaiZengJia/txtShangHaiZengJia",cc.Label),this.txtShangHaiJianMian=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtShangHaiJianMian/txtShangHaiJianMian",cc.Label),this.txtShengMingXiQu=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtShengMingXiQu/txtShengMingXiQu",cc.Label),this.txtFaLiXiQu=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtFaLiXiQu/txtFaLiXiQu",cc.Label),this.txtJiPinGaiLv=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtJiPinGaiLv/txtJiPinGaiLv",cc.Label),this.txtZhuangBeiDiaoLv=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtZhuangBeiDiaoLv/txtZhuangBeiDiaoLv",cc.Label),this.txtPvPShangHaiZengFu=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtPvPShangHaiZengFu/txtPvPShangHaiZengFu",cc.Label),this.txtExpJiaCheng=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtExpJiaCheng/txtExpJiaCheng",cc.Label),this.txtPvPShangHaiJianMian=this.getChild(this.node,"info/scrollview/view/content/specialNode/txtPvPShangHaiJianMian/txtPvPShangHaiJianMian",cc.Label),this.txtpetspeed=this.findChild(this.node,"info/scrollview/view/content/specialNode/txtpetspeed/txtpetspeed"),this.txtpetdamage=this.findChild(this.node,"info/scrollview/view/content/specialNode/txtpetdamage/txtpetdamage"),this.txtpetdamage_p=this.findChild(this.node,"info/scrollview/view/content/specialNode/txtpetdamage_p/txtpetdamage_p"),this.txtignoredef_p=this.findChild(this.node,"info/scrollview/view/content/specialNode/txtignoredef_p/txtignoredef_p"),this.gridNodeList=[];for(var o=0;o<11;o++)this.gridNodeList[o]=this.node.getChildByName(""+o),this.gridNodeList[o].on(cc.Node.EventType.TOUCH_END,this.onSelectGrid.bind(this,o));for(o=0;o<2;o++)this.btnJingJieList[o]=this.node.getChildByName("btnJingJie"+o),this.btnJingJieList[o].on(cc.Node.EventType.TOUCH_END,this.onClickJingJie.bind(this,o));this.infoNode.getChildByName("btnIntro").on(cc.Node.EventType.TOUCH_END,this.onClickIntro.bind(this)),u.MapConfig.curJingJieIndex=u.MapConfig.curMapConfig.world==u.MapConfig.WORLD.FanRen?0:1,this.maxPower=p.MineInfoConfig.getConfigById(1).max_power;var a=this.findChild(this.node,"btnActivity");this.onAddEvent(a,this.onClickActivity.bind(this)),this.activityContainer=this.findChild(this.node,"activityContainer"),this.onAddEvent(this.activityContainer,this.onClickActivity.bind(this)),this.activityContainer.active=!1,this.activityMvNode=this.findChild(this.node,"btnActivity/activityMvNode"),this.activityMvNode.active=!0,this.initActivity(),this.activityContainer.getChildByName("clickActivityNode").on(cc.Node.EventType.TOUCH_END,function(){t.activityContainer.active=!1}),this.node.on(cc.Node.EventType.TOUCH_END,function(){t.activityContainer.active=!1})},t.prototype.checkAndSetIsOpen=function(){var e=this.getChild(this.node,"verticle_layout/btn_tejie");e.active=!1,w.NewFeaturesModel.instance.pushFeaturesNode(P.FunctionIdList.TeiJie,e)},t.prototype.initActivity=function(){var e=this.findChild(this.node,"activityContainer/activityLayout/activityItem");e.active=!1,d.ActivityConfig.configMap.forEach(function(t,i){var n=cc.instantiate(e);n.active=!0,n.parent=e.parent;var o=n.getChildByName("icon");t.icon>0?(o.active=!0,o.getComponent(cc.Sprite).spriteFrame=e.getComponent(r.SpriteFrameComponent).spriteFrameList[t.icon]):o.active=!1,n.getChildByName("txtInfo").getComponent(cc.Label).string=t.dec+""})},t.prototype.onClickActivity=function(){this.activityMvNode.active=!1,this.activityMvNode.getComponent(cc.Animation).stop(),this.activityContainer.active=!this.activityContainer.active},t.prototype.onClickIntro=function(){this.activityContainer.active=!1,E.MusicHelper.play_click(),c.default.instance.createView(m.default.gameView.introduce)},t.prototype.onEnable=function(){var e=this;a.EventManager.instance.on(_.CommonEvent.Event_JingJie_Change,function(t){u.MapConfig.curJingJieIndex=t-1,e.refreshJingJie()},this),a.EventManager.instance.on(_.CommonEvent.Event_userinfoViewSwitch,this.onSwitchTab,this),a.EventManager.instance.on(_.CommonEvent.Event_UserInfoRefresh,this.refreshProperty,this),a.EventManager.instance.on(_.CommonEvent.Event_Refresh_PersonalMine,this.refreshKPower,this),a.EventManager.instance.on(_.CommonEvent.Event_Equip,this.refreshEquip,this),a.EventManager.instance.on(_.CommonEvent.Event_intensify_Refresh,this.refreshEquip,this),a.EventManager.instance.on(_.CommonEvent.Event_StrengthSelIndex,this.onStrengthenSelPos,this),a.EventManager.instance.on(_.CommonEvent.Event_USER_LVVEL_RESH,this.userLevelUPFun,this),v.AutoAppellationModel.getModelMethod().s_get_appellation_info(),this.refreshInfo(),this.refreshSelect(),this.onShowInfo(),this.refreshJingJie()},t.prototype.userLevelUPFun=function(){var e=this;this.animation&&(this.userLevelUPNode.active=!0,this.animation.play("zhanliuplevel",0),this.animation.once("finished",function(){e.userLevelUPNode.active=!1},this))},t.prototype.onShow=function(){},t.prototype.onClickJingJie=function(e){this.activityContainer.active=!1,E.MusicHelper.play_click(),I.JingJieModel.hadOpenJingJie(e+1)?(u.MapConfig.curJingJieIndex=e,this.refreshJingJie(),this.refreshInfo()):C.WordConfig.showWord(60337)},t.prototype.refreshJingJie=function(){for(var e=0;e<this.btnJingJieList.length;e++){var t=this.btnJingJieList[e].getChildByName("selectNode"),i=this.btnJingJieList[e].getChildByName("noSelectNode");u.MapConfig.curJingJieIndex==e?(t.active=!0,i.active=!1):(t.active=!1,i.active=!0)}},t.prototype.onClickGm=function(){c.default.instance.createView(m.default.gameView.GmView)},t.prototype.onShowInfo=function(){this.roleNode.active=!1,this.infoNode.active=!0},t.prototype.onClickShowRingEquip=function(){E.MusicHelper.play_click(),P.default.doAction(P.FunctionIdList.TeiJie)},t.prototype.onClickShowHandbook=function(){E.MusicHelper.play_click(),k.default.instance.level>=1?(s.Logger.log("\u70b9\u51fb\u56fe\u9274===1"),c.default.instance.createView(m.default.gameView.HandbookView)):s.Logger.log("\u70b9\u51fb\u56fe\u9274===0")},t.prototype.onClickWaiGuan=function(){c.default.instance.createView(m.default.gameView.CostumeView)},t.prototype.onClickChengWei=function(){P.default.doAction(P.FunctionIdList.Appellation)},t.prototype.onShowRole=function(){this.roleNode.active=!0,this.infoNode.active=!1},t.prototype.onClickAddPower=function(){c.default.instance.createView(m.default.gameView.MineBuyPowerView)},t.prototype.onClickLevelUp=function(){this.activityContainer.active=!1,E.MusicHelper.play_click(),h.HeroConfig.getMaxExp(k.default.instance.occupation,k.default.instance.level)>0?k.default.instance.levelUp():C.WordConfig.showWord(60148)},t.prototype.onSwitchTab=function(){this.curSelect=0,this.refreshInfo()},t.prototype.refreshInfo=function(){this.refreshProperty(),this.refreshEquip(),this.refreshSelect(),this.refreshKPower()},t.prototype.refreshProperty=function(){var e=h.HeroConfig.getMaxExp(k.default.instance.occupation,k.default.instance.level);this.txtExp.string=L.UIHelper.tranNumber(k.default.instance.getExp())+"/"+L.UIHelper.tranNumber(e),this.txtRoleType.string='<img src="'+k.default.instance.occupation+'"/>'+g.GameConst.OccupationNameMap(k.default.instance.occupation),this.txtLevel.string=k.default.instance.level+"",this.txtTotalFight.string=b.default.totalFight+"",this.txtJingJie.string=I.JingJieModel.getJingJieName(),this.txtFanRenZhiLi.string=b.default.getFanRenZhiLi()+"",this.txtLunHuiZhiLi.string=b.default.getLunHuiZhiLi()+"",this.txtPvPShangHaiZengFu.string=k.default.instance.getPvpIncrease_p()/100+"%",this.txtPvPShangHaiJianMian.string=k.default.instance.getPvpReduction_p()/100+"%",this.txtExpJiaCheng.string=k.default.instance.getEXP_p()/100+"%",this.txtLife.string=k.default.instance.getMaxHp()+"",this.txtFaLi.string=k.default.instance.getMaxMp()+"",this.txtAttack.string=k.default.instance.getAttack()+"",this.txtMoFa.string=k.default.instance.getMofa()+"",this.txtDaoShu.string=k.default.instance.getDaoShu()+"",this.txtDefend.string=k.default.instance.getDefend()+"",this.txtSpeed.string=L.UIHelper.toFixStr(k.default.instance.getAttackSpeed()/1e3)+"/s",this.txtLucky.string=k.default.instance.getLucky()+"",this.txtGuDingShangHai.string=Math.ceil(k.default.instance.getGuDingShangHai())+"",this.txtGuDingJianShang.string=Math.ceil(k.default.instance.getGuDingJianShang())+"",this.txtShangHaiZengJia.string=L.UIHelper.toFixStr(100*k.default.instance.getShangHaiZengJia())+"%",this.txtShangHaiJianMian.string=L.UIHelper.toFixStr(100*k.default.instance.getShangHaiJianMian())+"%",this.txtShengMingXiQu.string=k.default.instance.getShengMingXiQu()+"",this.txtFaLiXiQu.string=k.default.instance.getFaLiXiQu()+"",this.txtJiPinGaiLv.string=L.UIHelper.toFixStr(100*k.default.instance.getJinPiGaiLv())+"%",this.txtZhuangBeiDiaoLv.string=L.UIHelper.toFixStr(100*k.default.instance.getZhuangBeiDiaoLv())+"%",this.txtpetspeed.getComponent(cc.Label).string=1+k.default.instance.getpetspeed()/1e3+"/s",this.txtpetdamage.getComponent(cc.Label).string=L.UIHelper.toFixStr(k.default.instance.getpetdamage()),this.txtpetdamage_p.getComponent(cc.Label).string=L.UIHelper.toFixStr(100*k.default.instance.getpetdamage_p())+"%",this.txtignoredef_p.getComponent(cc.Label).string=L.UIHelper.toFixStr(100*k.default.instance.getignoredef_p())+"%"},t.prototype.refreshEquip=function(){for(var e=0;e<this.gridNodeList.length;e++){var t=this.gridNodeList[e],i=t.getChildByName("add").getComponent(cc.Label),n=t.getChildByName("contetn"),o=t.getChildByName("no"),a=this.gridOffest*u.MapConfig.curJingJieIndex+e+1;10==e&&(a=g.Position.RING_XUNZHANG);var s=k.default.instance.getEquipModelByGrid(a),r=y.EquipGridModel.getEquipGridModel(e+1);r&&r.strengthenNum>0?(i.node.active=!0,i.string="+"+r.strengthenNum):i.node.active=!1,s?(n.active=!0,o.active=!1,n.getComponent(S.default).init(s)):(n.active=!1,o.active=!0)}},t.prototype.onStrengthenSelPos=function(e){this.setSelectGrid(e)},t.prototype.onSelectGrid=function(e){this.setSelectGrid(e)},t.prototype.setSelectGrid=function(e){if(this.activityContainer.active=!1,this.curSelect=parseInt(e),E.MusicHelper.play_click(),this.refreshSelect(),0==i.panelIndex){var t=this.gridOffest*u.MapConfig.curJingJieIndex+e+1;10==e&&(t=g.Position.RING_XUNZHANG);var n=k.default.instance.getEquipModelByGrid(t);n&&c.default.instance.createView(m.default.gameView.equipInfo,null,n)}else 1==i.panelIndex&&a.EventManager.instance.dispatch(_.CommonEvent.Event_StrengthSwitch,e)},t.prototype.refreshSelect=function(){for(var e=0;e<this.gridNodeList.length;e++){var t=this.gridNodeList[e].getChildByName("select");this.curSelect==e&&1==i.panelIndex?t.active=!0:t.active=!1}},t.prototype.refreshKPower=function(){this.findChild(this.node,"info/scrollview/view/content/baseNode/txtKPower").getComponent(cc.Label).string=M.MinePersonaInfoModel.getCurrPower()+"/"+this.maxPower},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.panelIndex=0,t=i=o([R],t)}(l.default));i.default=N,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ActivityConfig":"ActivityConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/HeroConfig":"HeroConfig","../config/MapConfig":"MapConfig","../config/MineInfoConfig":"MineInfoConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/AutoAppellationModel":"AutoAppellationModel","../model/EquipGridModel":"EquipGridModel","../model/FightModel":"FightModel","../model/JingJieModel":"JingJieModel","../model/MineModel":"MineModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/RoleInfoModel":"RoleInfoModel","../prefab/ItemPrefab":"ItemPrefab","../utils/JumpActionUtils":"JumpActionUtils","../utils/MusicHelper":"MusicHelper","../utils/UIHelper":"UIHelper"}],VersionManager:[function(e,t,i){"use strict";cc._RF.push(t,"247d9eJfahODpTboAQai8HW","VersionManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../game/config/GameConfig"),o=e("../game/sdk/SdkHelper"),a=e("./DateUtil"),s=e("./EventManager"),r=e("./HotUpdate"),c=e("./ManifestConfig"),l=function(){function e(){this.iosStoreUrl="",this.apkStoreUrl="",this.nowVersion="1.0.288",this.targetVersion="1.0.0",this.isOpenHotUpdate=!1,this.hotUpdateList=[],this.writablePath="",this.noUpdateIndex=-1}return e.prototype.init=function(){this.reInitAll()},e.prototype.reInitAll=function(){this.releaseAll();for(var t=0;t<e.Config_Key.length;t++)this.reInit(t)},e.prototype.releaseAll=function(){for(var t=0;t<e.Config_Key.length;t++)this.hotUpdateList[t]&&this.hotUpdateList[t].disposeUpdate()},e.prototype.reInit=function(t){this.hotUpdateList[t]||(this.hotUpdateList[t]=new r.default),this.hotUpdateList[t].init(t,e.Config_Key[t],e.Config_ManifestName),this.isOpenHotUpdate||(this.hotUpdateList[t].isCheck=!0,this.hotUpdateList[t].isFinishUpdate=!0)},e.prototype.reSetHotUpdateUrl=function(t){if(void 0===t&&(t=!0),cc.sys.isNative){for(var i=0;i<e.Config_Key.length;i++){var n;this.writablePath=jsb.fileUtils.getWritablePath();var o=this.writablePath+""+e.Config_Key[i]+"/";jsb.fileUtils.isDirectoryExist(o)||jsb.fileUtils.createDirectory(o),n=o+"project.manifest";var a,l={};if(jsb.fileUtils.isFileExist(n)){var d=jsb.fileUtils.getStringFromFile(n);try{l=JSON.parse(d)}catch(e){(l={}).version="1.0.0"}}else{var f=e.Config_Url_Key[i],g=(d=c.default.getManifestStr(f),(l=JSON.parse(d)).version);l.version=g}a=JSON.stringify(l),jsb.fileUtils.writeStringToFile(a,n),jsb.fileUtils.isFileExist(n)}t&&(this.reInitAll(),s.EventManager.instance.dispatch(r.default.Event_CheckUpdate))}},e.prototype.checkUpdate=function(t){if(n.GameConfig.isWechat())s.EventManager.instance.dispatch(r.default.Event_On_ALREADY_UP_TO_DATE,e.Config_Key[t]);else{if(o.default.isIos()){var i=new Date(1990,1,1),c=new Date(2020,6,5);a.default.getLeftDay(c.getTime());if(a.default.betweenTime(i.getTime(),c.getTime()))return void s.EventManager.instance.dispatch(r.default.Event_On_ALREADY_UP_TO_DATE,e.Config_Key[t])}if(t<this.hotUpdateList.length){var l=this.hotUpdateList[t];cc.sys.isNative?t==this.noUpdateIndex?(l.isCheck=!0,l.isFinishUpdate=!0,s.EventManager.instance.dispatch(r.default.Event_On_ALREADY_UP_TO_DATE,e.Config_Key[t])):l.checkUpdate():(l.isCheck=!0,l.isFinishUpdate=!0,s.EventManager.instance.dispatch(r.default.Event_On_ALREADY_UP_TO_DATE,e.Config_Key[t]))}else s.EventManager.instance.dispatch(r.default.Event_On_ALREADY_UP_TO_DATE,e.Config_Key[t])}},e.prototype.startUpdate=function(e){this.hotUpdateList[e].startUpdate()},e.prototype.isCheck=function(e){if(e<this.hotUpdateList.length){var t=this.hotUpdateList[e];return e==this.noUpdateIndex||t.isCheck}return!0},e.prototype.needUpdate=function(e){if(e<this.hotUpdateList.length){var t=this.hotUpdateList[e];return e!=this.noUpdateIndex&&t.needUpdate}return!1},e.prototype.isUpdating=function(e){return e<this.hotUpdateList.length&&this.hotUpdateList[e].isUpdating},e.prototype.isFinishUpdate=function(e){if(e<this.hotUpdateList.length){var t=this.hotUpdateList[e];return e==this.noUpdateIndex||t.isFinishUpdate}return!0},e.instance=new e,e.Config_Game_Name=["\u6e38\u620f"],e.Config_Key=["main-remote-asset"],e.Config_ManifestName="project.manifest",e.Config_Url_Key=["main"],e}();i.default=l,cc._RF.pop()},{"../game/config/GameConfig":"GameConfig","../game/sdk/SdkHelper":"SdkHelper","./DateUtil":"DateUtil","./EventManager":"EventManager","./HotUpdate":"HotUpdate","./ManifestConfig":"ManifestConfig"}],ViewBase:[function(e,t,i){"use strict";cc._RF.push(t,"8e7e7rUYe5L1YJ326tz/SLE","ViewBase");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a,s=e("../game/event/CommonEvent"),r=e("../game/utils/MusicHelper"),c=e("./ComponentBase"),l=e("./DateUtil"),d=e("./EventManager"),f=e("./UIManager");(function(e){e[e.none=0]="none",e[e.fadeIn=1]="fadeIn",e[e.scaleX=2]="scaleX",e[e.scaleY=3]="scaleY",e[e.top=4]="top",e[e.scale=5]="scale"})(a||(a={}));var g=cc._decorator,h=g.ccclass,u=g.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aniType=a.none,t.viewPath=null,t}return n(t,e),t.prototype.onInitBase=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(this.viewUrl=e,this.showAni(),d.EventManager.instance.on(s.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),d.EventManager.instance.on(s.CommonEvent.Event_UserInfoRefresh,this.onUserInfoRefresh,this),this.node){var o=this.node.getChildByName("darkLayer");o&&o.on(cc.Node.EventType.TOUCH_END,function(){t.onDarkLayerClick(),r.MusicHelper.play_click(),t.closeView()});var a=this.node.getChildByName("btnClose");a&&a.on(cc.Node.EventType.TOUCH_END,function(){r.MusicHelper.play_click(),t.closeView()})}this.onInitChild.apply(this,i)},t.prototype.onDarkLayerClick=function(){},t.prototype.onInitChild=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onShow=function(){},t.prototype.onHide=function(){},t.prototype.onSocketRespMsg=function(e,t){},t.prototype.onUserInfoRefresh=function(){},t.prototype.setTopUI=function(){f.default.instance.setTopUI(this.viewPath)},t.prototype.showAni=function(){if(this.node)switch(this.aniType){case a.fadeIn:this.fadeIn();break;case a.scaleX:this.scaleAni(cc.v2(0,1));break;case a.scaleY:this.scaleAni(cc.v2(1,0));break;case a.top:this.topShow();break;case a.scale:this.scaleShowAni()}},t.prototype.hideAni=function(e){if(this.node)switch(this.aniType){case a.fadeIn:this.fadeOut(e);break;case a.scaleX:this.hideScaleAni(cc.v2(0,1),e);break;case a.scaleY:this.hideScaleAni(cc.v2(1,0),e);break;case a.top:this.topHide(e);break;case a.scale:this.hideScaleShowAni();default:e()}else e()},t.prototype.fadeIn=function(e){this.node.stopAllActions(),this.node.opacity=0,cc.tween(this.node).to(.2,{opacity:255}).call(function(){e&&e()}).start()},t.prototype.fadeOut=function(e){this.node.stopAllActions(),this.node.opacity=255,cc.tween(this.node).to(.2,{opacity:0}).call(function(){e&&e()}).start()},t.prototype.scaleAni=function(e,t){this.node.stopAllActions(),this.node.setScale(e.x,e.y),cc.tween(this.node).to(.2,{scale:1}).call(function(){t&&t()}).start()},t.prototype.hideScaleAni=function(e,t){this.node.stopAllActions(),this.node.setScale(1),cc.tween(this.node).to(.2,{scale:e}).call(function(){t&&t()}).start()},t.prototype.scaleShowAni=function(e){this.node.stopAllActions(),this.node.setScale(.1),cc.tween(this.node).to(.2,{scale:1.2},{easing:"quintIn"}).to(.1,{scale:1}).call(function(){e&&e()}).start()},t.prototype.hideScaleShowAni=function(e){this.node.stopAllActions(),cc.tween(this.node).to(.2,{scale:.2},{easing:"quintOut"}).to(.05,{scale:.1}).call(function(){e&&e()}).start()},t.prototype.topShow=function(e){this.node.stopAllActions(),this.node.y=cc.winSize.height,cc.tween(this.node).to(.2,{position:cc.v2(0,0)}).call(function(){e&&e()}).start()},t.prototype.topHide=function(e){this.node.stopAllActions(),this.node.y=0,cc.tween(this.node).to(.2,{position:cc.v2(0,cc.winSize.height)}).call(function(){e&&e()}).start()},t.prototype.closeView=function(e){var t=this;void 0===e&&(e=null),this.isMving||(this.isMving=!0,this.hideAni(function(){t.node&&t.node.destroy(),f.default.instance.onCloseView(t.viewUrl,e)}))},t.prototype.onAddEvent=function(e,t,i){void 0===i&&(i=cc.Button.Transition.NONE),e.getComponent(cc.Button)||e.addComponent(cc.Button),e.getComponent(cc.Button).transition=i,e.targetOff(e);var n=0;e.on(cc.Node.EventType.TOUCH_START,function(){n=l.default.now()}),e.on(cc.Node.EventType.TOUCH_END,function(){if(e.getComponent(cc.Button).enabled){r.MusicHelper.play_click();var i=l.default.now();t(0!=n&&i-n>=400?1:0)}},e)},o([u({type:cc.Enum(a),displayName:"\u52a8\u753b\u7c7b\u578b"})],t.prototype,"aniType",void 0),t=o([h],t)}(c.default);i.default=p,cc._RF.pop()},{"../game/event/CommonEvent":"CommonEvent","../game/utils/MusicHelper":"MusicHelper","./ComponentBase":"ComponentBase","./DateUtil":"DateUtil","./EventManager":"EventManager","./UIManager":"UIManager"}],ViewConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fa985gpHJNBI4aacQiYa8fq","ViewConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.preloadList={guideView:"prefab/newguideTips"},e.gameView={loading:"prefab/loading",login:"prefab/login",register:"prefab/register",game:"prefab/game",gameui:"prefab/gameui",RoleSkillEffectPrefab:"prefab/RoleSkillEffectPrefab",RoleSkillEffectPrefabEx:"prefab/RoleSkillEffectPrefabEx",zoneServer:"prefab/zoneServer",ResourcePrefab:"prefab/ResourcePrefab",msgInfo:"prefab/msgInfo",city:"prefab/city",tip:"prefab/tip",revive:"prefab/revive",strengtheninfo:"prefab/strengtheninfo",RolePrefab:"prefab/RolePrefab",notity:"prefab/notity",setting:"prefab/setting",toStrongerPanel:"prefab/toStrongerPanel",map:"prefab/map",mapInfo:"prefab/mapInfo",skillStudy:"prefab/skill/skillStudy",skillUp:"prefab/skill/skillUp",bag:"prefab/roles/bag",bagAdd:"prefab/roles/bagAdd",ItemInfo:"prefab/roles/ItemInfo",equipInfo:"prefab/roles/equipInfo",business:"prefab/business",buyItem:"prefab/buyItem",buyMoney:"prefab/buyMoney",FightRoleInfo:"prefab/FightRoleInfo",BuyShopView:"prefab/BuyShopView",EquipMakeView:"prefab/EquipMakeView",equipContrastView:"prefab/equipContrastView",topUp:"prefab/topUp/topUp",refine:"prefab/refine/refine",RefineHelp:"prefab/refine/RefineHelp",RefineRule:"prefab/refine/RefineRule",CheckDeleteRoleView:"prefab/CheckDeleteRoleView",CommonAlertView:"prefab/auctionHouse/commonAlert",guideView:"prefab/newguideTips",newfeaturesView:"prefab/newfeaturesTip",taskView:"prefab/taskview",NoBossPrivilege:"prefab/NoBossPrivilege",GmView:"prefab/GmView",MiniGmView:"prefab/MiniGmView",PrivilegeRecovery:"prefab/privilege/PrivilegeRecovery",PrivilegeFightGodView:"prefab/privilege/PrivilegeFightGodView",GamePrivilege:"prefab/privilege/gamePrivilege",TempView:"prefab/TempView",OfflineView:"prefab/OfflineView",OfflineGiftView:"prefab/OfflineGiftView",FightChangeView:"prefab/FightChangeView",ChargeSucView:"prefab/ChargeSucView",XianShiGoldView:"prefab/xianshi/XianShi_Gold",XianShi_XiLianShi:"prefab/xianshi/XianShi_XiLianShi",XianShiActivityView:"prefab/xianshi/XianShiActivityView",ZuiQiangFangYuGiftView:"prefab/xianshi/ZuiQiangFangYuGiftView",ServerWeiHuView:"prefab/ServerWeiHuView",introduce:"prefab/introduce",BossDropIntroduce:"prefab/BossDropIntroduce",complex:"prefab/complex",complexView:"prefab/complexView ",cuilian:"prefab/refine/cuilian",cuilianHelpView:"prefab/refine/cuilianHelp",cuilianRuleView:"prefab/refine/cuilianRule",DialogCheck:"prefab/DialogCheck",Explain:"prefab/Explain",DiscountView:"prefab/discount/DiscountView",ChangeWorldGiftView:"prefab/ChangeWorldGiftView",ZuiQiangJiNengGiftView:"prefab/xianshi/ZuiQiangJiNengGiftView",ComoensationView:"prefab/CompensationView",SkillEffectView:"prefab/skill/skillEffectView",ZhenBaoDes:"prefab/zhenBaoDes",LoadingTipView:"prefab/LoadingTipView",PostView:"prefab/postView",ShenBinRuleView:"prefab/roles/shenbinRule",KillBossTip:"prefab/roles/killBossTipView",ChatRoomView:"prefab/ChatRoomView",AppstoneView:"prefab/AppstoneView",AutoRobotSettingView:"prefab/autoRobotSettingView",autoTip:"prefab/autoTip",autoShow:"prefab/autoShow",RecycleTip:"prefab/refine/RecycleTip",RankView:"prefab/rank/RankView",PowerRankPanel:"prefab/rank/PowerRankPanel",EquipRankPanel:"prefab/rank/EquipRankPanel",TuituRankPanel:"prefab/rank/TuituRankPanel",TuituItem:"prefab/rank/TuituItem",LeiTaiRankPanel:"prefab/rank/LeiTaiRankPanel",RankRuleView:"prefab/rankRulePanel",MineTipView:"prefab/MineTipView",ExchangeShopView:"prefab/ExchangeShopView",PublicTipView:"prefab/publicTipView",GiftClockTip:"prefab/GiftClockTip",FanshiGiftView:"prefab/FanshiGiftView",tujianInfo:"prefab/roles/tujianInfo",JingLianView:"prefab/roles/JingLianView",RemolePreView:"prefab/refine/remolePreView",ActivityView:"prefab/ActivityView",Holiday:"prefab/activity/Holiday",Holiday2:"prefab/activity/Holiday2",InvitationTip:"prefab/activity/InvitationTip",InvitationView:"prefab/activity/InvitationView",BaYeBuyView:"prefab/activity/BaYeBuyView",SevenDayLoginView:"prefab/activity/SevenDayLoginView",BossSpeedUpView:"prefab/BossSpeedUpView",DisCountPrefab:"prefab/DisCountPrefab",HolidayMonster:"prefab/activity/HolidayMonster",BaYePrefab:"prefab/activity/BaYePrefab",BaYePrefab2:"prefab/activity/BaYePrefab2",LuckyBingoView:"prefab/activity/LuckyBingoView",JiaoZhuRunGame:"prefab/activity/jiaozhushaipao/JiaoZhuRunGame",HolidayRunGame:"prefab/activity/HolidayRunGame",HolidaySelectPetView:"prefab/activity/HolidySelectPetView",HolidayToolView:"prefab/activity/HolidayToolView",HolidayShopWindow:"prefab/activity/HolidayShopWindow",YuandanPrefab:"prefab/YuandanPrefab",UltimateSeletWindow:"prefab/ultimateGift/ultimateSeletWindow",ultimateGift:"prefab/ultimateGift/ultimateGift",NextUltimateGiftWindow:"prefab/ultimateGift/nextUltimateGiftWindow",NewYearTargetPrefab:"prefab/NewYearTargetPrefab",firePigView:"prefab/firePigView",ComEquipView:"prefab/complexEquipView ",gamePlayView:"prefab/gamePlayView",PkView:"prefab/PkView",ExpBallView:"prefab/roles/ItemInfo_expBall",PkRecordView:"prefab/pkRecordView",showNum:"prefab/showNum",PkResultView:"prefab/pkResultView",StarItemListView:"prefab/StarItemListView",HouseAddView:"prefab/roles/HouseAddView",NewYearGift:"prefab/NewYearGift",NewYearGift2:"prefab/NewYearGift2",StarChainView:"prefab/StarChainView",StarSelectView:"prefab/StarSelectView",StarActivateView:"prefab/StarActivateView",TianGuanPrefab:"prefab/tianguan/TianGuanView",TianGuanInfoView:"prefab/tianguan/TianGuanInfoView",TianGuanRankPanel:"prefab/rank/TianGuanRankPanel",SpecialEquipComplexView:"prefab/roles/SpecialEquipComplexView",SpecialEquipView:"prefab/roles/SpecialEquipView",RedPacket:"prefab/redpacket/RedBag",PacketRank:"prefab/redpacket/RedBagRank",MaFaMiLingView:"prefab/activity/MaFaMiLingView",MaFaMiLingAwardView:"prefab/activity/MaFaMiLingAwardView",ReNameView:"prefab/reNameView",GrowFundView:"prefab/activity/GrowFundView",ZuiQiangQunGongGiftView:"prefab/xianshi/ZuiQiangQunGongGiftView",MethodView:"prefab/tianguan/MethodView",TianguanEndingView:"prefab/tianguan/TianguanEnding",TianguanShopBuyView:"prefab/tianguan/TianguanShopBuyView",TianGuanShopView:"prefab/tianguan/TianGuanShopView",TianGuanFightView:"prefab/tianguan/TianGuanFightView",DoubleAdView:"prefab/activity/DoubleAdView",DoubleGetView:"prefab/activity/DoubleGetView",CollectShopEnterView:"prefab/xianshi/CollectShopEnterView",CollectActivityBuyView:"prefab/xianshi/CollectActivityBuyView",CollectActivityShopView:"prefab/xianshi/CollectActivityShopView",PlayerInfoPreView:"prefab/roles/PlayerInfoPreView",FastKillView:"prefab/activity/FastKillView",ChengBaView:"prefab/activity/ChengBaView",EverydaySignatureTip:"prefab/activity/EverydaySignatureTip",EverydaySignatureView:"prefab/activity/EverydaySignatureView",ExoticExplorationShop:"prefab/activity/ExoticExplorationShop",ExoticExploration:"prefab/activity/ExoticExploration",HandbookView:"prefab/tujian/TuJianView",CostumeView:"prefab/CostumeView/CostumeView",AppellationView:"prefab/appellation/AppellationView",CostDetails:"prefab/CostumeView/costdetails",TuJianSelectedEquipView:"prefab/tujian/TuJianSelectedEquipView",TuJianCellOpen:"prefab/tujian/TuJianCellOpen",GongLueView:"prefab/activity/GongLueView",BigBossRewardPreView:"prefab/bigboss/bigBossRewardPreView",BigBossView:"prefab/bigboss/bigBossView",WorldBossFightView:"prefab/bigboss/worldBossFightView",devilSealFightView:"prefab/DevilSeal/devilSealFightView",MineFightView:"prefab/mine/MineFightView",pkFightView:"prefab/pkFightView",BigBossEndView:"prefab/bigboss/bigBossEndView",BigBossBuyTimeTipView:"prefab/bigboss/bigBossBuyTimeTipView",devilSealPreview:"prefab/DevilSeal/devilSealPreview",devilSealBuyTip:"prefab/DevilSeal/devilSealBuyTip",devilSealEndView:"prefab/DevilSeal/devilSealEndView",ItemAcquire:"prefab/roles/ItemAcquire",BaoShiInfoView:"prefab/shenBing/baoshiInfoView",GuildShopTip:"prefab/guild/guildShopTip",guildhongbaoTip:"prefab/guild/guildhongbaoTip",guildHongBao:"prefab/guild/guildhongbao",guildtask:"prefab/guild/guildtask",guildShopView:"prefab/guild/guildshop",GuildstoreroomTip:"prefab/guild/guildstoreroomTip",OptionalGiftBagTip:"prefab/activity/OptionalGiftBagTip",OptionalGiftBagView:"prefab/activity/OptionalGiftBagView",MergeLuckyDrawTip:"prefab/activity/MergeLuckyDrawTip",MergeLuckyDrawView:"prefab/activity/MergeLuckyDrawView",ConsumerFeedbackView:"prefab/activity/ConsumerFeedbackView",ContinuousRechargeView:"prefab/activity/ContinuousRechargeView",ConsumerFeedbackMergedView:"prefab/activity/ConsumerFeedbackMergedView",JiaoZhuSelectView:"prefab/activity/jiaozhushaipao/JiaoZhuSelectView",OptionalView:"prefab/roles/OptionalView",StarPageView:"prefab/StarPageView",auctionedGoodInfoView:"prefab/auctionHouse/auctionedGoodInfoView",auctionHouseView:"prefab/auctionHouse/auctionHouseView",auctionItemsTip:"prefab/auctionHouse/auctionItemsTip",auctionCostTip:"prefab/auctionHouse/costTip",BaZhenPanel:"prefab/bagua/BaZhenPanel",BaGuaView:"prefab/bagua/BaGuaView",BaGuaCompoundSuccessView:"prefab/bagua/BaGuaCompoundSuccessView",BaGuaEquipContrastView:"prefab/bagua/BaGuaEquipContrastView",BaGuaEquipInfoView:"prefab/bagua/BaGuaEquipInfoView",BaGuaStrengthenView:"prefab/bagua/BaGuaStrengthenView",BaGuaLevelView:"prefab/bagua/BaGuaLevelView",BaGuaSelectView:"prefab/bagua/BaGuaSelectView",DevilSeal:"prefab/DevilSeal/DevilSeal",activeTaskView:"prefab/activeTaskView",MineBuyPowerView:"prefab/mine/MineBuyPowerView",MinePlunderCell:"prefab/mine/MinePlunderCell",MinePlunderView:"prefab/mine/MinePlunderView",MineReportCell:"prefab/mine/MineReportCell",MineReportView:"prefab/mine/MineReportView",MineResultView:"prefab/mine/MineResultView",AnnouncementView:"prefab/announcementView",HorseracelampView:"prefab/horseracelampView",AppraisalTip:"prefab/AppraisalTip",ShenGongView:"prefab/shengong/ShenGongView",GuildPvPAwardView:"prefab/guild/GuildPvPAwardView",GuildPvPCityInfoView:"prefab/guild/GuildPvPCityInfoView",GuildPvPCityListView:"prefab/guild/GuildPvPCityListView",GuildPvPEndTip:"prefab/guild/GuildPvPEndTip",GuildPvPMainView:"prefab/guild/GuildPvPMainView",GuildPvPMapView:"prefab/guild/GuildPvPMapView",GuildPvPResultView:"prefab/guild/GuildPvPResultView",GuildPvPStrongholdInfoView:"prefab/guild/GuildPvPStrongholdInfoView",GuildPvPStayingListView:"prefab/guild/GuildPvPStayingListView",GuildPvPFightView:"prefab/guild/GuildPvPFightView",LuckyPuzzle:"prefab/luckyPuzzle/LuckyPuzzle",XianshiLibaoView:"prefab/libao/XianshiLibaoView",XianshilibaoInfoView:"prefab/libao/xianshilibaoInfoView",StarYulanView:"prefab/roles/yulanVIiew",ZhuanDuanRemindDialog:"prefab/zhuanduan/RemindDialog",WeiDuanFuli:"prefab/zhuanduan/WeiDuanFuli",ZhuanDuaJiangli:"prefab/zhuanduan/ZhuanDuanJiangli"},e}();i.default=n,cc._RF.pop()},{}],WeaponView:[function(e,t,i){"use strict";cc._RF.push(t,"583810KPexPNLpFdTo6AVM2","WeaponView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ComponentBase"),s=e("../../../engine/EventManager"),r=e("../../utils/MusicHelper"),c=e("../../model/MagicModel"),l=e("../../config/MagicNameConfig"),d=e("../../config/ShenbingskillAllConfig"),f=e("../../model/RoleInfoModel"),g=e("../../model/FightModel"),h=e("../../../engine/UIManager"),u=e("../../config/ViewConfig"),p=e("../../config/ColorConfig"),m=e("../../config/ChiXueMoJianConfig"),C=e("../../config/ITemsConfig"),_=e("../../network/SocketClient"),v=e("../../model/ShenBinSkillModel"),y=e("../../event/CommonEvent"),b=e("../../model/SpiritsModel"),I=e("../../model/ItemInfoModel"),M=e("../../config/MingYunZhiRenConfig"),w=e("../../utils/UIHelper"),k=e("../../config/GameConst"),S=e("../../config/ShihunfazhangConfig"),P=e("../../manager/RedPointManager"),E=e("../../prefab/RedPointPrefab"),L=e("../../model/ShenBinModel"),T=e("../../config/WordConfig"),R=e("../../sdk/STUtils"),N=e("../../sdk/LoongCheerManager"),B=e("../shenbing/BaoshiInfoModel"),A=e("../../config/ShenbingGemAllConfig"),G=e("../../../engine/Logger"),x=cc._decorator,O=x.ccclass,V=x.property,j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curTabIndex=0,t.attributeNodeList=[],t.skillNodeList=[],t.currShenBinType=0,t.IconList=[],t.shenbinNameList=[],t.shenbinSkillNameList=[],t.baoshiIconArr=[],t.shenbingEffectArr=[],t.baoshi=null,t.baoshiBoxArr=[],t.preModelList=[],t.currAttrbuteArr=[],t.currProGress=0,t.currgress=0,t.boxIsLockMap=new Map,t}var i;return n(t,e),i=t,t.prototype.onLoad=function(){this.btnupLevel=this.findChild(this.node,"btnupLevel"),this.maxTip=this.findChild(this.node,"maxTip"),this.btnHelp=this.findChild(this.node,"btnHelp"),this.btnNext=this.findChild(this.node,"btnNext"),this.btnLast=this.findChild(this.node,"btnLast"),this.btnLast=this.findChild(this.node,"btnLast"),this.upLeveltap=this.findChild(this.node,"upLeveltap"),this.skilltap=this.findChild(this.node,"skilltap"),this.weaponLevelAndName=this.findChild(this.node,"weaponLevelAndName"),this.skillLevelAndName=this.findChild(this.node,"skillLevelAndName"),this.weaponIcon=this.findChild(this.node,"weaponIcon"),this.skillDes=this.findChild(this.node,"skillDes"),this.attributeDes=this.findChild(this.node,"attributeDes"),this.expBar=this.findChild(this.node,"expBar"),this.exp=this.findChild(this.node,"exp"),this.goldCost=this.findChild(this.node,"goldCost"),this.cost1=this.findChild(this.node,"cost1"),this.levelLimit=this.findChild(this.node,"levelLimit"),this.attributeItem=this.findChild(this.attributeDes,"scrollView/view/content/attributeDes/attributeItem"),this.attributeItem.active=!1,this.skillItem=this.findChild(this.skillDes,"scrollView/view/content/skillDes/skillItem"),this.skillItem.active=!1,this.addevent(),this.initBaoshi()},t.prototype.addevent=function(){this.btnupLevel.on(cc.Node.EventType.TOUCH_END,this.onClickUplevel.bind(this)),this.skilltap.on(cc.Node.EventType.TOUCH_END,this.onClickTab.bind(this,i.SKILL_TYPE)),this.upLeveltap.on(cc.Node.EventType.TOUCH_END,this.onClickTab.bind(this,i.UPLEVEL_TYPE)),this.btnHelp.on(cc.Node.EventType.TOUCH_END,this.onClickHelp.bind(this,this.currShenBinType)),this.btnLast.on(cc.Node.EventType.TOUCH_END,this.onClickLast.bind(this)),this.btnNext.on(cc.Node.EventType.TOUCH_END,this.onClickNext.bind(this))},t.prototype.onEnable=function(){this.curTabIndex=i.UPLEVEL_TYPE,this.currShenBinType=L.ShenBinModel.CHIXUEMOJIAN,s.EventManager.instance.on(y.CommonEvent.Event_RefreshShenbin,this.onServerRefresh,this),s.EventManager.instance.on(y.CommonEvent.Event_baoshi_refresh,this.refreshBaoshi,this),s.EventManager.instance.on(y.CommonEvent.Event_baoshi_jnglian_refresh,this.refreshPage,this),this.refreshPage(),this.initRedPoint(),_.default.s_baoshi_info()},t.prototype.onServerRefresh=function(e){var t=this;void 0===e&&(e=0);var n,o=L.ShenBinModel.getShenBinModelByType(this.currShenBinType);this.currShenBinType==L.ShenBinModel.CHIXUEMOJIAN?n=m.ChiXueMoJianConfig.getChixuemojianConfigById(o.shenbingId):this.currShenBinType==L.ShenBinModel.MINGYUNZHIREN?n=M.MingYunZhiRenConfig.getConfigById(o.shenbingId):this.currShenBinType==L.ShenBinModel.SHIHUNFAZHANG&&(n=S.ShihunfazhangConfig.getConfigById(o.shenbingId)),this.curTabIndex==i.UPLEVEL_TYPE?(cc.tween(this.expBar.getComponent(cc.ProgressBar)).to(this.currProGress,{progress:n.curr_progress/n.all_progress}).start(),n.curr_progress/n.all_progress!=0&&T.WordConfig.showWord(60364),n.curr_progress/n.all_progress==0&&(R.default.stShenbinLevel(N.StatisticsType.afEvent,n),R.default.stShenbinLevel(N.StatisticsType.firebaseEvent,n),T.WordConfig.showWord(60365)),n.curr_progress>this.currgress&&(this.exp.getChildByName("addexp").active=!0,this.exp.getChildByName("addexp").getComponent(cc.Label).string="+"+(n.curr_progress-this.currgress),cc.tween(this.exp.getChildByName("addexp")).to(1,{y:30}).call(function(){t.exp.getChildByName("addexp").active=!1,t.exp.getChildByName("addexp").y=0}).start())):this.curTabIndex==i.SKILL_TYPE&&2==e&&T.WordConfig.showWord(60366);var a=[];this.currShenBinType==L.ShenBinModel.CHIXUEMOJIAN?a=m.ChiXueMoJianConfig.getMagicModelList(n):this.currShenBinType==L.ShenBinModel.MINGYUNZHIREN?a=M.MingYunZhiRenConfig.getMagicModelList(n):this.currShenBinType==L.ShenBinModel.SHIHUNFAZHANG&&(a=S.ShihunfazhangConfig.getMagicModelList(n)),this.flyFont(this.preModelList,a),this.refreshPage(),this.refreshBaoshi()},t.prototype.initBaoshi=function(){var e=this;this.baoshiBox1=this.baoshiBoxArr[0],this.baoshiBox2=this.baoshiBoxArr[1],this.baoshiBox3=this.baoshiBoxArr[2],this.baoshiBox1.on(cc.Node.EventType.TOUCH_END,function(){e.baoshishow(e.baoshiBox1)},this),this.baoshiBox2.on(cc.Node.EventType.TOUCH_END,function(){e.baoshishow(e.baoshiBox2)},this),this.baoshiBox3.on(cc.Node.EventType.TOUCH_END,function(){e.baoshishow(e.baoshiBox3)},this)},t.prototype.baoshishow=function(e){var t=this.boxIsLockMap.get(e);if(void 0!==t){var i=t.islock,n=this.boxIsLockMap.get(e).baoshiId,o=A.ShenbingGemAllConfig.configMap.get(n).shenbinglv;if(!1===i){var a="\u795e\u5175\u7b49\u7ea7\u8fbe\u5230"+o+"\u7ea7\u540e\u89e3\u9501";w.UIHelper.showTip(a)}else if(!0===i){var s={baoshiId:n,swid:this.currShenBinType,skillmodelId:this.skillmodelId,baoshiType:this.boxIsLockMap.get(e).baoshiType};h.default.instance.createView(u.default.gameView.BaoShiInfoView,null,s)}}},t.prototype.refreshBaoshi=function(){this.findChild(this.weaponIcon,"shenBing_effect").getComponent(cc.Sprite).spriteFrame=null;var e=B.BaoshiInfoModel.getModelList(this.currShenBinType);if(void 0!==e)if(0!==e.length){var t=e[0].id,i=A.ShenbingGemAllConfig.configMap.get(t).oshenbinglv;if(isNaN(Number(this.shenbinglevel))||this.shenbinglevel<i)this.baoshi.active=!1;else{for(var n=[],o=0;o<e.length;o++){var a=e[o],s=a.id,r=a.type-1;if(0!==r&&1!==r&&2!==r)return G.Logger.error("\u5b9d\u77f3\u62c9\u53d6\u5f97\u670d\u52a1\u5668\u6570\u636e\u6709\uff0c\u5b9d\u77f3\u7c7b\u578b\u9519\u8bef\uff1a",a.type),void(this.baoshi.active=!1);var c=this.baoshiBoxArr[r],l=this.findChild(c,"lock"),d=this.findChild(c,"unLock"),f=this.findChild(c,"baoshiIcon");if(0!==a.unlock)if(l.active=!1,d.active=!1,this.boxIsLockMap.set(c,{islock:!0,baoshiId:s,baoshiType:a.type}),this.findChild(c,"RedPointPrefab").active=B.BaoshiInfoModel.getBaoshiHongdianStateByBaoshiId(a),a.quality>0){n[o]=a.quality,f.active=!0;var g=this.baoshiIconArr[a.quality-1];f.getComponent(cc.Sprite).spriteFrame=g}else f.active=!1,d.active=!0;else f.getComponent(cc.Sprite).spriteFrame=null,l.active=!0,d.active=!1,this.findChild(c,"RedPointPrefab").active=!1,this.boxIsLockMap.set(c,{islock:!1,baoshiId:s,baoshiType:a.type})}if(n.length>0&&n.length===e.length){var h=n[0];for(o=0;o<n.length;o++){var u=n[o];h>u&&(h=u)}this.reFreshShenbingEffect(h)}this.baoshi.active=!0}}else this.baoshi.active=!1;else this.baoshi.active=!1},t.prototype.reFreshShenbingEffect=function(e){var t=e-1;this.findChild(this.weaponIcon,"shenBing_effect").getComponent(cc.Sprite).spriteFrame=this.shenbingEffectArr[t]},t.prototype.baoshiRefres=function(){var e=B.BaoshiInfoModel._model,t=e.type-1;if(0===t||1===t||2===t){var i=this.baoshiBoxArr[t],n=i.getChildByName("baoshiIcon"),o=e.quality,a=this.baoshiIconArr[o-1];n.getComponent(cc.Sprite).spriteFrame=a;var s=e.id;this.boxIsLockMap.set(i,{islock:!0,baoshiId:s,baoshiType:e.type})}},t.prototype.requestShenbingBaoshiInfo=function(){_.default.s_baoshi_info()},t.prototype.refreshPage=function(){this.currProGress=this.expBar.getComponent(cc.ProgressBar).progress;var e,t=L.ShenBinModel.getShenBinModelByType(this.currShenBinType),n=v.default.getModelByShenbinType(this.currShenBinType,f.default.instance);this.skillmodelId=n.id,this.weaponIcon.getComponent(cc.Sprite).spriteFrame=this.IconList[this.currShenBinType-1],this.weaponLevelAndName.getChildByName("shenbin1").getComponent(cc.Sprite).spriteFrame=this.shenbinNameList[this.currShenBinType-1],this.currShenBinType==L.ShenBinModel.CHIXUEMOJIAN?e=m.ChiXueMoJianConfig.getChixuemojianConfigById(t.shenbingId):this.currShenBinType==L.ShenBinModel.MINGYUNZHIREN?e=M.MingYunZhiRenConfig.getConfigById(t.shenbingId):this.currShenBinType==L.ShenBinModel.SHIHUNFAZHANG&&(e=S.ShihunfazhangConfig.getConfigById(t.shenbingId)),this.shenbinglevel=e.level,this.skillmodelId=n.id,this.currgress=e.curr_progress,this.weaponLevelAndName.getChildByName("shenbinlevel").getComponent(cc.Label).string=e.level+"";var o=d.ShenbingskillAllConfig.getSkillConfigById(n.id);if(this.skillLevelAndName.getChildByName("skill1").getComponent(cc.Sprite).spriteFrame=this.shenbinSkillNameList[this.currShenBinType-1],this.skillLevelAndName.getChildByName("shenbinSkilllevel").getComponent(cc.Label).string=o.level+"",this.levelLimit.getChildByName("value").color=p.ColorConfig.WhiteColor,this.cost1.getChildByName("value").color=p.ColorConfig.WhiteColor,this.goldCost.getChildByName("value").color=p.ColorConfig.WhiteColor,this.curTabIndex==i.UPLEVEL_TYPE){this.findChild(this.upLeveltap,"1").active=!1,this.findChild(this.upLeveltap,"2").active=!0,this.findChild(this.skilltap,"1").active=!0,this.findChild(this.skilltap,"2").active=!1,this.skillDes.active=!1,this.attributeDes.active=!0,this.exp.active=!0,this.expBar.active=!0,this.refreshAttributeDes(e),this.levelLimit.getComponent(cc.Label).string=T.WordConfig.getWord(60549);var a=d.ShenbingskillAllConfig.getkeyAndValue(e.cost1),s=0;(r=I.default.getItem(a[0][0]+""))&&(s=r.itemCnt),this.cost1.getChildByName("NewLabel").getComponent(cc.Label).string=C.ITemsConfig.getITemsConfigById(a[0][0]).name+T.WordConfig.getWord(60548),this.exp.getComponent(cc.Label).string=e.curr_progress+"/"+e.all_progress,this.expBar.getComponent(cc.ProgressBar).progress=e.curr_progress/e.all_progress,e.curr_progress==e.all_progress?(this.exp.getComponent(cc.Label).string="MAX",this.btnupLevel.active=!1,this.levelLimit.getChildByName("value").getComponent(cc.Label).string="--",this.cost1.getChildByName("value").getComponent(cc.Label).string="--",this.goldCost.getChildByName("value").getComponent(cc.Label).string="--",this.maxTip.active=!0):(this.btnupLevel.active=!0,this.maxTip.active=!1,this.formatLabel(this.levelLimit.getChildByName("value"),f.default.instance.level,e.need_level,0),this.formatLabel(this.cost1.getChildByName("value"),s,a[0][1]),this.formatLabel(this.goldCost.getChildByName("value"),f.default.instance.getCoin(),e.cost2[1],0))}else if(this.curTabIndex==i.SKILL_TYPE){this.findChild(this.upLeveltap,"1").active=!0,this.findChild(this.upLeveltap,"2").active=!1,this.findChild(this.skilltap,"1").active=!1,this.findChild(this.skilltap,"2").active=!0,this.skillDes.active=!0,this.attributeDes.active=!1,this.exp.active=!1,this.expBar.active=!1,this.refreshSkillDes(n.id),this.levelLimit.getComponent(cc.Label).string=T.WordConfig.getWord(60550),this.cost1.getChildByName("NewLabel").getComponent(cc.Label).string=C.ITemsConfig.getITemsConfigById(d.ShenbingskillAllConfig.getkeyAndValue(o.cost2)[0][0]).name+T.WordConfig.getWord(60548);var r;s=0;(r=I.default.getItem(d.ShenbingskillAllConfig.getkeyAndValue(o.cost2)[0][0]))&&(s=r.itemCnt),1==o.max_level?(this.maxTip.active=!0,this.btnupLevel.active=!1,this.levelLimit.getChildByName("value").getComponent(cc.Label).string="--",this.cost1.getChildByName("value").getComponent(cc.Label).string="--",this.goldCost.getChildByName("value").getComponent(cc.Label).string="--"):(this.maxTip.active=!1,this.btnupLevel.active=!0,this.formatLabel(this.levelLimit.getChildByName("value"),e.level,o.shenbinglv[this.currShenBinType+""],0),this.formatLabel(this.cost1.getChildByName("value"),s,d.ShenbingskillAllConfig.getkeyAndValue(o.cost2)[0][1]),this.formatLabel(this.goldCost.getChildByName("value"),f.default.instance.getCoin(),o.cost1[1],0))}this.initRedPoint(),this.refreshBaoshi()},t.prototype.onClickTab=function(e){r.MusicHelper.play_click(),this.curTabIndex!=e&&(this.curTabIndex=e,this.refreshPage())},t.prototype.refreshAttributeDes=function(e){var t=[];if(this.currShenBinType==L.ShenBinModel.CHIXUEMOJIAN?t=m.ChiXueMoJianConfig.getMagicModelList(e):this.currShenBinType==L.ShenBinModel.MINGYUNZHIREN?t=M.MingYunZhiRenConfig.getMagicModelList(e):this.currShenBinType==L.ShenBinModel.SHIHUNFAZHANG&&(t=S.ShihunfazhangConfig.getMagicModelList(e)),this.preModelList=t,this.attributeNodeList.length==t.length);else for(var i=0;i<t.length;i++){var n=void 0;(n=cc.instantiate(this.attributeItem)).parent=this.attributeItem.parent,n.active=!0,this.attributeNodeList.push(n)}for(i=0;i<this.attributeNodeList.length;i++){var o=this.attributeNodeList[i].getChildByName("attributeName").getComponent(cc.Label),a=t[i];o.string=l.MagicNameConfig.getDesc(a.magicId)+":";var s=this.attributeNodeList[i].getChildByName("attributeValue").getComponent(cc.RichText),r=B.BaoshiInfoModel.getAtrrById(this.currShenBinType,a.magicId),d=[0,l.MagicNameConfig.MagicId.atk,l.MagicNameConfig.MagicId.mag,l.MagicNameConfig.MagicId.spt];a.magicId==d[f.default.instance.occupation]&&(r+=B.BaoshiInfoModel.getAtrrById(this.currShenBinType,l.MagicNameConfig.MagicId.Allstat));var g=c.default.formatMagicValue(a.magicId,r);s.string=0!=r?c.default.formatMagicValue(a.magicId,a.magicValue)+"<color=#00ff00>+"+g+"</c>":c.default.formatMagicValue(a.magicId,a.magicValue)}},t.prototype.refreshSkillDes=function(e){for(var t=B.BaoshiInfoModel.getModelList(this.currShenBinType),i=[0,0,0],n=0;n<t.length;n++)for(var o=t[n].skillList,a=0;a<o.length;a++){0!==(r=o[a])&&void 0!==r&&(i[a]=r)}if(void 0!==i&&void 0!==this.skillmodelId){var s=d.ShenbingskillAllConfig.getSkillConfigById(e);if(this.skillNodeList.length!=s.name.length){for(n=0;n<this.skillNodeList.length;n++)this.skillNodeList[n].destroy();this.skillNodeList=[];for(n=0;n<s.name.length;n++){var r=void 0;(r=cc.instantiate(this.skillItem)).parent=this.skillItem.parent,r.active=!0,this.skillNodeList.push(r)}}if(100001==s.skill_id){var c=b.default.model.spirits||0,l=b.default.model.spirits_eff||0,f=b.default.model.max_spirits||0,h="",u=s.parameter[2]/100,m=Math.floor(g.default.totalFight*s.parameter[2]/1e4);i&&(l=l+"+"+i[0],f=f+"+"+i[1],u=u+"%+"+i[2]/100,m=Math.floor(g.default.totalFight*(s.parameter[2]+i[2])/1e4));var C=p.ColorConfig.GreenHexColor;c>=f&&(C=p.ColorConfig.RedHexColor);for(n=0;n<this.skillNodeList.length;n++){this.skillNodeList[n].getChildByName("skillName").getComponent(cc.Label).string=s.name[n]+":";var _=this.skillNodeList[n].getChildByName("skillDes").getComponent(cc.RichText);0==n?_.string=cc.js.formatStr(T.WordConfig.getWord(61267),l,C,c,f):1==n&&(_.string=cc.js.formatStr(T.WordConfig.getWord(60552),p.ColorConfig.GreenHexColor,u,m)),_.lineHeight+_.node.parent.parent.getComponent(cc.Layout).spacingY}}else if(200001==s.skill_id)for(n=0;n<this.skillNodeList.length;n++){this.skillNodeList[n].getChildByName("skillName").getComponent(cc.Label).string=s.name[n]+":";_=this.skillNodeList[n].getChildByName("skillDes").getComponent(cc.RichText),h="",u="";i&&(h="+"+i[0]/100+"%",u="+"+i[1]/100+"%"),_.string=cc.js.formatStr(T.WordConfig.getWord(61269),p.ColorConfig.GreenHexColor,s.parameter[0]/100,h,p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.GREEN),p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.BLUE),p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.PURPLE),p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.ORANGE),p.ColorConfig.GreenHexColor,s.parameter[1]/100,u),_.node.height+_.node.parent.parent.getComponent(cc.Layout).spacingY}else if(300001==s.skill_id){var v=B.BaoshiInfoModel.getBaoShiAttListByShenbinType(L.ShenBinModel.SHIHUNFAZHANG),y="";for(n=0;n<v.length;n++){var I=v[n];if(41==I.id){y="+"+I.vaule;break}}for(n=0;n<this.skillNodeList.length;n++){this.skillNodeList[n].getChildByName("skillName").getComponent(cc.Label).string=s.name[n]+":";_=this.skillNodeList[n].getChildByName("skillDes").getComponent(cc.RichText),h="",u="";i&&(h="+"+i[0]/100+"%",u="+"+i[1]/100+"%"),_.string=cc.js.formatStr(T.WordConfig.getWord(61270),p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.GREEN),s.level+y,p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.ORANGE),p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.ORANGE),p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.ORANGE),p.ColorConfig.GreenHexColor,s.parameter[0]/100,h,p.ColorConfig.getQualityHexColor(k.GameConst.QUALITY.ORANGE),p.ColorConfig.GreenHexColor,s.parameter[1]/100,u),_.node.height+_.node.parent.parent.getComponent(cc.Layout).spacingY}}}},t.prototype.checkFun=function(e,t){var i=!0;if(t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=I.default.getItem(n),a=t[n];if(!o||o.itemCnt<a){i=!1;var s=o?o.getConfig():C.ITemsConfig.getITemsConfigById(n),r=cc.js.formatStr(T.WordConfig.getWord(60242),s.name);if(w.UIHelper.showTip(r),s&&s.jump_id&&s.jump_id.length>0){h.default.instance.createView(u.default.gameView.ItemAcquire,null,o,s);break}}}if(e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var c=f.default.instance.getCoin(),l=e[n];s=C.ITemsConfig.getITemsConfigById(k.GameConst.RES_TYPE.COIN.toString());if(c<l&&(i=!1,s&&s.jump_id&&s.jump_id.length>0)){r=cc.js.formatStr(T.WordConfig.getWord(60242),s.name);w.UIHelper.showTip(r),h.default.instance.createView(u.default.gameView.ItemAcquire,null,null,s);break}}return i},t.prototype.checkShenBingLv=function(e){var t=!0;if(e instanceof v.default){var i=d.ShenbingskillAllConfig.getSkillConfigById(e.id);if(!(t=this.checkFun(i.cost1,i.cost2)))return t}else if(e instanceof L.ShenBinModel){var n=void 0;if(this.currShenBinType==L.ShenBinModel.CHIXUEMOJIAN?n=m.ChiXueMoJianConfig.getChixuemojianConfigById(e.shenbingId):this.currShenBinType==L.ShenBinModel.MINGYUNZHIREN?n=M.MingYunZhiRenConfig.getConfigById(e.shenbingId):this.currShenBinType==L.ShenBinModel.SHIHUNFAZHANG&&(n=S.ShihunfazhangConfig.getConfigById(e.shenbingId)),!(t=this.checkFun(n.cost2,n.cost1)))return t}return t},t.prototype.onClickUplevel=function(){if(r.MusicHelper.play_click(),this.curTabIndex==i.SKILL_TYPE){var e=v.default.getModelByShenbinType(this.currShenBinType,f.default.instance);if(!this.checkShenBingLv(e))return;_.default.s_seq_shenbing_skill(e.id,this.currShenBinType)}else if(this.curTabIndex==i.UPLEVEL_TYPE){e=L.ShenBinModel.getShenBinModelByType(this.currShenBinType);if(!this.checkShenBingLv(e))return;_.default.s_seq_shenbing(e.shenbingId,e.shenbingType)}},t.prototype.formatLabel=function(e,t,i,n){void 0===n&&(n=1),t<i?0==n?(e.getComponent(cc.Label).string=w.UIHelper.tranNumber(i)+"",e.color=p.ColorConfig.RedColor):(e.getComponent(cc.Label).string=t+"/"+i,e.color=p.ColorConfig.RedColor):0==n?(e.getComponent(cc.Label).string=w.UIHelper.tranNumber(i)+"",e.color=p.ColorConfig.GreenColor):(e.getComponent(cc.Label).string=t+"/"+i,e.color=p.ColorConfig.GreenColor)},t.prototype.onClickHelp=function(){r.MusicHelper.play_click(),h.default.instance.createView(u.default.gameView.ShenBinRuleView,null,this.currShenBinType)},t.prototype.onDisable=function(){s.EventManager.instance.clear(this)},t.prototype.onClickNext=function(){r.MusicHelper.play_click(),this.currShenBinType<L.ShenBinModel.count&&(this.currShenBinType+=1,this.refreshPage())},t.prototype.onClickLast=function(){r.MusicHelper.play_click(),this.currShenBinType>1&&(this.currShenBinType--,this.refreshPage())},t.prototype.initRedPoint=function(e){void 0===e&&(e=!1);var t=[],n=[],o=[];if(this.curTabIndex==i.UPLEVEL_TYPE)switch(this.currShenBinType){case 1:n=[],t=[P.RedPointId.shenbin_1,P.RedPointId.shenbin_2],o=[P.RedPointId.shenbin_0];break;case 2:t=[P.RedPointId.shenbin_2],n=[P.RedPointId.shenbin_0],o=[P.RedPointId.shenbin_1];break;case 3:t=[],n=[P.RedPointId.shenbin_0,P.RedPointId.shenbin_1],o=[P.RedPointId.shenbin_2]}else switch(this.currShenBinType){case 1:n=[],t=[P.RedPointId.shenbinSkill_1,P.RedPointId.shenbinSkill_2],o=[P.RedPointId.shenbinSkill_0];break;case 2:t=[P.RedPointId.shenbinSkill_2],n=[P.RedPointId.shenbinSkill_0],o=[P.RedPointId.shenbinSkill_1];break;case 3:t=[],n=[P.RedPointId.shenbinSkill_0,P.RedPointId.shenbinSkill_1],o=[P.RedPointId.shenbinSkill_2]}this.findChild(this.node,"btnLast/RedPointPrefab").getComponent(E.default).setRedPointIdList(n),this.findChild(this.node,"btnNext/RedPointPrefab").getComponent(E.default).setRedPointIdList(t),this.findChild(this.node,"btnupLevel/RedPointPrefab").getComponent(E.default).setRedPointIdList(o),this.findChild(this.node,"upLeveltap/RedPointPrefab").getComponent(E.default).setRedPointIdList(o);var a=[],s=[];switch(this.currShenBinType){case 1:s=[],a=[P.RedPointId.shenbin_1_1,P.RedPointId.shenbin_2_1];break;case 2:a=[P.RedPointId.shenbin_2_1],s=[P.RedPointId.shenbin_0_1];break;case 3:a=[],s=[P.RedPointId.shenbin_0_1,P.RedPointId.shenbin_1_1]}this.findChild(this.node,"btnLast/RedPointPrefab1").getComponent(E.default).setRedPointIdList(s),this.findChild(this.node,"btnNext/RedPointPrefab1").getComponent(E.default).setRedPointIdList(a)},t.prototype.flyFont=function(e,t){for(var i=this,n=function(n){e[n].magicId==t[n].magicId&&e[n].magicValue<t[n].magicValue&&(o.attributeNodeList[n].getChildByName("addValue").active=!0,o.attributeNodeList[n].getChildByName("addValue").getComponent(cc.Label).string="+"+c.default.formatMagicValue(t[n].magicId,t[n].magicValue-e[n].magicValue),cc.tween(o.attributeNodeList[n].getChildByName("addValue")).to(1,{y:0}).call(function(){i.attributeNodeList[n].getChildByName("addValue").active=!1,i.attributeNodeList[n].getChildByName("addValue").y=0}).start())},o=this,a=0;a<e.length;a++)n(a)},t.UPLEVEL_TYPE=0,t.SKILL_TYPE=1,o([V({type:[cc.SpriteFrame]})],t.prototype,"IconList",void 0),o([V({type:[cc.SpriteFrame]})],t.prototype,"shenbinNameList",void 0),o([V({type:[cc.SpriteFrame]})],t.prototype,"shenbinSkillNameList",void 0),o([V({type:[cc.SpriteFrame]})],t.prototype,"baoshiIconArr",void 0),o([V({type:[cc.SpriteFrame]})],t.prototype,"shenbingEffectArr",void 0),o([V(cc.Node)],t.prototype,"baoshi",void 0),o([V([cc.Node])],t.prototype,"baoshiBoxArr",void 0),t=i=o([O],t)}(a.default);i.default=j,cc._RF.pop()},{"../../../engine/ComponentBase":"ComponentBase","../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/UIManager":"UIManager","../../config/ChiXueMoJianConfig":"ChiXueMoJianConfig","../../config/ColorConfig":"ColorConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/MingYunZhiRenConfig":"MingYunZhiRenConfig","../../config/ShenbingGemAllConfig":"ShenbingGemAllConfig","../../config/ShenbingskillAllConfig":"ShenbingskillAllConfig","../../config/ShihunfazhangConfig":"ShihunfazhangConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager","../../model/FightModel":"FightModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ShenBinModel":"ShenBinModel","../../model/ShenBinSkillModel":"ShenBinSkillModel","../../model/SpiritsModel":"SpiritsModel","../../network/SocketClient":"SocketClient","../../prefab/RedPointPrefab":"RedPointPrefab","../../sdk/LoongCheerManager":"LoongCheerManager","../../sdk/STUtils":"STUtils","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","../shenbing/BaoshiInfoModel":"BaoshiInfoModel"}],WeiDuanFuli:[function(e,t,i){"use strict";cc._RF.push(t,"db4d0Sru/pAo6s7s1JV9RN4","WeiDuanFuli");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../engine/ResourcesManager"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/EquipGatherConfig"),f=e("../../config/GameConst"),g=e("../../config/ITemsConfig"),h=e("../../config/ViewConfig"),u=e("../../config/WordConfig"),p=e("../../model/ItemInfoModel"),m=e("../../view/PublicTipView"),C=e("../ItemPrefab"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.details=null,t.itemLayout=null,t.itemNode=null,t}return n(t,e),t.prototype.start=function(){this.itemNode.active=!1,this.details.string=u.WordConfig.getWord(61989);for(var e=d.EquipGatherConfig.getEquipGatherConfigById(63),t=0;t<e.item_id.length;t++){var i=g.ITemsConfig.getITemsConfigById(e.item_id[t]),n=p.default.create(f.GameConst.ITEM_KIND.ITEM,i.id,e.drop_num[t],i.quality),o=cc.instantiate(this.itemNode);o.getComponent(C.default).init(n,!0),this.itemLayout.node.addChild(o),o.active=!0}},t.prototype.loadLoading=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Promise.all([r.default.instance.loadResAsync("json/Word",cc.JsonAsset),r.default.instance.loadResAsync("json/EquipGatherConfig",cc.JsonAsset),r.default.instance.loadResAsync("json/iTemsConfig",cc.JsonAsset)])];case 1:return e.sent(),u.WordConfig.json2Config(cc.loader.getRes("json/Word",cc.JsonAsset).json),d.EquipGatherConfig.json2Config(cc.loader.getRes("json/EquipGatherConfig",cc.JsonAsset).json),g.ITemsConfig.json2Config(cc.loader.getRes("json/iTemsConfig",cc.JsonAsset).json),[2]}})})},t.prototype.pay=function(){c.default.instance.createView(h.default.gameView.topUp,null),this.close()},t.prototype.instruction=function(){c.default.instance.createView(h.default.gameView.PublicTipView,null,m.RuleType.TYPE_WEIDUANFULI)},t.prototype.close=function(){c.default.instance.closeView(h.default.gameView.WeiDuanFuli,null),this.node.destroy()},o([y(cc.RichText)],t.prototype,"details",void 0),o([y(cc.Layout)],t.prototype,"itemLayout",void 0),o([y(cc.Node)],t.prototype,"itemNode",void 0),t=o([v],t)}(l.default);i.default=b,cc._RF.pop()},{"../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/EquipGatherConfig":"EquipGatherConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/ItemInfoModel":"ItemInfoModel","../../view/PublicTipView":"PublicTipView","../ItemPrefab":"ItemPrefab"}],WordConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8268cxXdBRNQ64VgcUgA/sR","WordConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../engine/UIManager"),a=e("../model/ChatModel"),s=e("./JsonConfigBase"),r=e("./ViewConfig"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.id=parseInt(e.id),i.idStr=e.id,i.ch=e.ch,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(n.id,n),n.id=parseInt(i),t.configMap.set(n.id,n)})},t.getWordConfig=function(e){var t;return this.configMap.forEach(function(i,n){i.id!=n&&i.idStr!=e.toString()||(t=i)}),60517==e&&cc.log("1"),t},t.getWord=function(e){var t="";return this.configMap.forEach(function(i,n){i.id!=e&&i.idStr!=e.toString()||(t=i.ch)}),""==t&&(t=e+""),t},t.showWord=function(e){var t=this.getWord(e);""==t&&(t=e+""),60001==e&&a.ChatModel.addBagFull(),this.showTip(t)},t.showTip=function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=cc.Color.WHITE),void 0===n&&(n=cc.v2(0,100)),o.default.instance.createView(r.default.gameView.tip,null,e,t,i,n)},t.Config_Name="Word",t.configMap=new Map,t}(s.JsonConfigBase);i.WordConfig=c,cc._RF.pop()},{"../../engine/UIManager":"UIManager","../model/ChatModel":"ChatModel","./JsonConfigBase":"JsonConfigBase","./ViewConfig":"ViewConfig"}],WorldBossFightView:[function(e,t,i){"use strict";cc._RF.push(t,"f9993bAGhBCwYVqzY2pRjz/","WorldBossFightView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/DefaultConfig"),g=e("../../config/GameConst"),h=e("../../config/MonsterConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../model/ServerTime"),_=e("../../network/SocketClient"),v=e("../../prefab/GameManager"),y=e("../../serverFight/ServerFightView"),b=cc._decorator,I=b.ccclass,M=b.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeOut=0,t.endTime=0,t.maxHpWight=165,t.bossHp=null,t.bossName=null,t.serverFightView=null,t.isFightting=!1,t.serverFightPrefab=null,t.serverFightViewNode=null,t}return n(t,e),t.prototype.onLoad=function(){this.serverFightView=cc.instantiate(this.serverFightPrefab),this.serverFightView.getComponent(y.default).setFightType(g.ServerFightType.WorldBoss),this.serverFightViewNode.addChild(this.serverFightView)},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"button_fangqi"),this.onClickGiveup.bind(this)),v.default.instance.serverFightType=g.ServerFightType.WorldBoss,v.default.instance.BattleType=g.BattleType.PvE,this.isFightting=!0},t.prototype.onInitChild=function(e,t){this.endTime=t,this.bossHp.width=e/1e4*this.maxHpWight;var i=f.DefaultConfig.getConfigById(g.GameConst.SPECIALBOSSID.WORLDBOSS).value,n=h.MonsterConfig.getMonsterConfigById(i);this.bossName.string=n.name},t.prototype.onSocketRespMsg=function(e,t){if(e==r.ProtoConfig.c_scene_obj_hp)for(var i=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_scene_obj_hp,t),n=i.getId(),o=i.getHp(),a=(i.getBuffId(),this.serverFightView.getComponent(y.default).serRolePrefabList),s=0;s<a.length;s++)if(n==a[s].serRoleInfoModel.id&&a[s].serRoleInfoModel.cid==g.GameConst.SPECIALBOSSID.WORLDBOSSID){this.bossHp.width=o/1e4*this.maxHpWight;break}e==r.ProtoConfig.c_user_login&&l.default.instance.closeView(u.default.gameView.WorldBossFightView)},t.prototype.onClickGiveup=function(){var e=this;l.default.instance.createView(u.default.gameView.DialogCheck,null,p.WordConfig.getWord(60499),function(t){t&&(e.isFightting=!1,_.default.s_req_quit_world_boss())})},t.prototype.update=function(){if(this.isFightting){if(this.timeOut++,this.timeOut>=cc.game.getFrameRate()){this.timeOut=0;var e=this.endTime-C.ServerTime.getServerTime()/1e3;(e=Math.floor(e))<=0&&(e=0),e=Math.ceil(e),this.node.getChildByName("leftTime").getComponent(cc.Label).string=e>0?a.default.formatLeftTime0(1e3*e):"--"}}else this.node.getChildByName("leftTime").getComponent(cc.Label).string="--"},t.prototype.closeView=function(){e.prototype.closeView.call(this),v.default.instance.serverFightType=g.ServerFightType.Default,s.EventManager.instance.dispatch(m.CommonEvent.Event_Battlefield_End)},o([M(cc.Node)],t.prototype,"bossHp",void 0),o([M(cc.Label)],t.prototype,"bossName",void 0),o([M({type:cc.Prefab})],t.prototype,"serverFightPrefab",void 0),o([M({type:cc.Node})],t.prototype,"serverFightViewNode",void 0),t=o([I],t)}(d.default);i.default=w,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/MonsterConfig":"MonsterConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../prefab/GameManager":"GameManager","../../serverFight/ServerFightView":"ServerFightView"}],WorldBossModel:[function(e,t,i){"use strict";cc._RF.push(t,"8da20F2x+dC4IARCYqMj09K","WorldBossModel");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o=e("../../../engine/EventManager"),a=e("../../../engine/Logger"),s=e("../../../engine/ProtoConfig"),r=e("../../config/GameConst"),c=e("../../event/CommonEvent"),l=e("../../manager/RedPointManager"),d=cc._decorator,f=d.ccclass,g=(d.property,function(){function e(){this.eventIdList=[],this.protos=[],this.leftTimes=0,this.accHarm=0,this.bossHp=1e4,this.awardList=[],this.buyTimes=0,this.eventIdList=[l.RedPointId.worldBoss],this.protos=[s.ProtoConfig.c_req_world_boss_info],l.default.getInstance().addHandler(this)}var t;return t=e,e.proto2Model=function(e){this.model.leftTimes=e.getTimes(),this.model.accHarm=e.getAccHarm(),this.model.bossHp=e.getBossHp();var t=e.getAwardListList();this.model.awardList=[];for(var i=0;i<t.length;i++){var n=new h;n.id=t[i].getId(),this.model.awardList[i]=n}this.model.awardList.length>0&&this.model.awardList.sort(function(e,t){return e.id-t.id}),this.model.buyTimes=e.getLeftbuytimes(),a.Logger.log("c_req_world_boss_info====",this.model),o.EventManager.instance.dispatch(c.CommonEvent.Event_WorldBoss_Refresh)},e.prototype.checkRedPoint=function(){var e=t.model.leftTimes>0,i={id:l.RedPointId.worldBoss,type:l.RedPointType.Default,show:e};return a.Logger.log("worldBoss===checkRedPoint",i,t.model.leftTimes),i},e.model=new t,e=t=n([f],e)}());i.default=g;var h=function(){return function(){}}();i.BossAwardModel=h;var u=function(){function e(){}return e.proto2Model=function(t){e.zhanshiRankModelList=[],e.fashiRankModelList=[],e.daoshiRankModelList=[];for(var i=t.getRankListList(),n=0;n<i.length;n++){var s=new e;switch(s.heroId=i[n].getHeroId(),s.harm=i[n].getHarm(),s.prof=i[n].getProf(),s.rank=i[n].getRank(),s.roleName=i[n].getRoleName(),s.prof){case r.GameConst.OCCUPATION.ZHAN_SHI:e.zhanshiRankModelList.push(s);break;case r.GameConst.OCCUPATION.FA_SHI:e.fashiRankModelList.push(s);break;case r.GameConst.OCCUPATION.DAO_SHI:e.daoshiRankModelList.push(s)}}e.zhanshiRankModelList.sort(function(e,t){return t.harm-e.harm}),e.fashiRankModelList.sort(function(e,t){return t.harm-e.harm}),e.daoshiRankModelList.sort(function(e,t){return t.harm-e.harm}),a.Logger.log("c_req_world_boss_rank===\u6218\u58eb",e.zhanshiRankModelList,"===\u6cd5\u5e08====",e.fashiRankModelList,"===\u9053\u58eb===",e.daoshiRankModelList),o.EventManager.instance.dispatch(c.CommonEvent.Event_WorldBossRank_Refresh)},e.zhanshiRankModelList=[],e.fashiRankModelList=[],e.daoshiRankModelList=[],e}();i.WorldBossRankModel=u,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../config/GameConst":"GameConst","../../event/CommonEvent":"CommonEvent","../../manager/RedPointManager":"RedPointManager"}],WorldbossawardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d460cpwK7xMjLWb4x9WJdLy","WorldbossawardConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rank=[],t}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=Number(i),t.configMap.set(i,n),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getConfigList=function(){return this.configList},t.configMap=new Map,t.configList=[],t.Config_Name="worldbossawardConfig",t}(e("./JsonConfigBase").JsonConfigBase);i.WorldbossawardConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],WorldbosstaskConfig:[function(e,t,i){"use strict";cc._RF.push(t,"da0c0zlig1CjrNABT/50EwX","WorldbosstaskConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;for(var n in e)"function"!=typeof e[n]&&(i[n]=e[n]);return i},t.json2Config=function(e){var t=this;this.configList=[],Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=Number(i),t.configMap.set(i,n),t.configList.push(n)}),this.configList.sort(function(e,t){return e.id-t.id})},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.id&&(t=i)}),t},t.getConfigList=function(){return this.configList},t.configMap=new Map,t.configList=[],t.Config_Name="worldbosstaskConfig",t}(e("./JsonConfigBase").JsonConfigBase);i.WorldbosstaskConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],XianJiConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2f1f929R7hMfIV7K5wBfEOK","XianJiConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.level=e.level,i.gem=e.gem,i},t.getConfigById=function(e){var t;return this.configMap.forEach(function(i,n){e==i.level&&(t=i)}),t},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.level=parseInt(i),t.configMap.set(n.level,n)})},t.Config_Name="Gaojixianjiconfig",t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],XianShiActivityView:[function(e,t,i){"use strict";cc._RF.push(t,"c8445x4hKhFpq2kyi/L4IxJ","XianShiActivityView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/ChargeActivityModel"),r=e("../../../engine/UIManager"),c=e("../../config/ViewConfig"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){r.default.instance.setTopUI(c.default.gameView.XianShiActivityView),this.goldView=this.findChild(this.node,"scrollView/view/content/xianshi_gold"),this.coinModel=s.default.getCoinChargeModel(),this.coinModel&&this.coinModel.gift_id>=1?this.goldView.active=!0:this.goldView.active=!1,this.xilianshiView=this.findChild(this.node,"scrollView/view/content/xianshi_xilianshi"),this.xilianshiModel=s.default.getXiLianShiModel(),this.xilianshiModel&&this.xilianshiModel.gift_id>0?this.xilianshiView.active=!0:this.xilianshiView.active=!1,this.xianshi_shuye=this.findChild(this.node,"scrollView/view/content/xianshi_shuye"),this.shuyeModel=s.default.getShuYeModel(),this.shuyeModel&&this.shuyeModel.gift_id>0?this.xianshi_shuye.active=!0:this.xianshi_shuye.active=!1},t.prototype.onHide=function(){},t=o([d],t)}(a.default));i.default=f,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../model/ChargeActivityModel":"ChargeActivityModel"}],XianShiGoldView:[function(e,t,i){"use strict";cc._RF.push(t,"01281e9nYxGMpF1ob4gNp7n","XianShiGoldView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ChongZhiConfig"),r=e("../../../engine/DateUtil"),c=e("../../model/ChargeActivityModel"),l=e("../../sdk/SdkHelper"),d=e("../../network/SocketClient"),f=e("../../../engine/EventManager"),g=e("../../event/CommonEvent"),h=e("../../model/RedDotModel"),u=e("../../../engine/UIManager"),p=e("../../config/ViewConfig"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=10,t.btnCharge=null,t}return n(t,e),t.prototype.onInitChild=function(){},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),f.EventManager.instance.on(g.CommonEvent.Event_ChargeActivityOk,this.onChargeOk,this),this.initView()},t.prototype.onShow=function(){this.isShowDialog=!0},t.prototype.initView=function(){var e=this;u.default.instance.setTopUI(p.default.gameView.XianShiGoldView);var t=this.node.getChildByName("btnCloseTest");if(t&&this.onAddEvent(t,this.onClickCloseTest.bind(this)),this.model=c.default.getCoinChargeModel(),this.leftTime=c.default.getCoinLeftTime(),this.model&&!(this.model.gift_id<=0)){l.default.isAndroid()?this.id=201+this.model.gift_id-1:this.id=1201+this.model.gift_id-1,this.chongzhiConfig=s.ChongZhiConfig.getConfigById(this.id),this.txtGold=this.getChild(this.node,"txtGold",cc.Label);var i=this.node.getChildByName("btnCharge");this.txtCost=this.getChild(this.node,"btnCharge/txtCost",cc.Label),this.txtDefault=this.getChild(this.node,"txtDefault",cc.Label),this.txtLeftTime=this.getChild(this.node,"txtLeftTime",cc.Label),this.btnCharge=i,this.hadBuy=this.node.getChildByName("hadBuy"),this.hadBuy&&(this.hadBuy.active=!1),this.onAddEvent(i,this.onClickCharge.bind(this)),this.schedule(function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&e.closeView()),e.refresh()},1),this.refresh()}},t.prototype.onClickCloseTest=function(){var e=this;this.isShowDialog&&(this.hadBuy.active?this.closeView():cc.tween(this.node).to(.2,{scale:.1,position:cc.v2(285,531)}).call(function(){e.closeView(),h.default.isXianShiRedDot=!0,f.EventManager.instance.dispatch(g.CommonEvent.Event_has_reward,!0)}).start())},t.prototype.onClickCharge=function(){d.default.req_charge(this.chongzhiConfig.id)},t.prototype.onChargeOk=function(e){this.id==e&&(this.leftTime=0,this.hadBuy.active=!0,this.btnCharge.active=!1)},t.prototype.refresh=function(){this.txtCost.string=this.chongzhiConfig.money+"",this.txtDefault.string=this.chongzhiConfig.o_price+"",this.txtGold.string="X"+this.chongzhiConfig.resource[1],this.leftTime<=0?this.txtLeftTime.string="--":this.txtLeftTime.string=r.default.formatLeftTime2(1e3*this.leftTime)},t=o([C],t)}(a.default));i.default=_,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/ChargeActivityModel":"ChargeActivityModel","../../model/RedDotModel":"RedDotModel","../../network/SocketClient":"SocketClient","../../sdk/SdkHelper":"SdkHelper"}],XianShi_XiLianShi:[function(e,t,i){"use strict";cc._RF.push(t,"fdffeuusipJnZSsAl0a0TiJ","XianShi_XiLianShi");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ChongZhiConfig"),r=e("../../../engine/DateUtil"),c=e("../../prefab/ItemPrefab"),l=e("../../model/ItemInfoModel"),d=e("../../config/GameConst"),f=e("../../config/ITemsConfig"),g=e("../../model/ChargeActivityModel"),h=e("../../network/SocketClient"),u=e("../../../engine/EventManager"),p=e("../../event/CommonEvent"),m=e("../../../engine/UIManager"),C=e("../../config/ViewConfig"),_=e("../../model/RedDotModel"),v=e("../../sdk/SdkHelper"),y=cc._decorator,b=y.ccclass,I=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=20,t.itemType="I3001",t.buyIds=[],t}return n(t,e),t.prototype.onInitChild=function(){},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onShow=function(){this.isShowDialog=!0},t.prototype.onEnable=function(){u.EventManager.instance.on(p.CommonEvent.Event_ChargeActivity,this.onChargeActivity,this),m.default.instance.setTopUI(C.default.gameView.XianShi_XiLianShi),u.EventManager.instance.on(p.CommonEvent.Event_ChargeActivityOk,this.onChargeOk,this),this.model=g.default.getXiLianShiModel();var e=this.node.getChildByName("btnCloseXianShi");e&&this.onAddEvent(e,this.onClickCloseXianShi.bind(this)),!this.model||this.model.gift_id<=0||this.initView()},t.prototype.initView=function(){var e=this;this.schedule(function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&e.closeView()),e.refresh()},1),this.model=g.default.getXiLianShiModel();var t=this.node.getChildByName("btnCloseXianShi");if(t&&this.onAddEvent(t,this.onClickCloseXianShi.bind(this)),this.model&&!(this.model.gift_id<=0)){var i,n=f.ITemsConfig.getITemsConfigById(this.itemType);this.txtLeftTime=this.getChild(this.node,"txtLeftTime",cc.Label);for(var o=0;o<2;o++){var a=this.node.getChildByName("btnBuy"+o);i=v.default.isAndroid()?s.ChongZhiConfig.getConfigById(301+o):s.ChongZhiConfig.getConfigById(1301+o),this.buyIds[o]=i.id,a.getChildByName("txtCost").getComponent(cc.Label).string=i.money+"",this.node.getChildByName("txtDefault"+o).getComponent(cc.Label).string=i.o_price+"";var r=this.node.getChildByName("ItemPrefab"+o).getComponent(c.default),h=l.default.create(d.GameConst.ITEM_KIND.ITEM,this.itemType,i.item[this.itemType],n.quality);r.init(h,!0),this.onAddEvent(a,this.onClickBuy.bind(this,i)),this.node.getChildByName("hadBuy"+o).active=!1}this.leftTime=g.default.getXiLianShiLeftTime(),this.refresh()}},t.prototype.onChargeActivity=function(){this.initView()},t.prototype.onChargeOk=function(e){var t=this.buyIds.indexOf(e);if(-1!=t){this.leftTime=0,this.refresh(),this.unscheduleAllCallbacks();for(var i=0;i<2;i++){var n=this.node.getChildByName("btnBuy"+i),o=this.node.getChildByName("hadBuy"+i);n.active=!1,o.active=!1,i==t&&(o.active=!0,this.isHadBuy=!0)}}},t.prototype.onClickBuy=function(e){h.default.req_charge(e.id)},t.prototype.refresh=function(){this.txtLeftTime.string=r.default.formatLeftTime2(1e3*this.leftTime)},t.prototype.onClickCloseXianShi=function(){var e=this;this.isShowDialog&&(this.isHadBuy?this.closeView():cc.tween(this.node).to(.2,{scale:.1,position:cc.v2(285,531)}).call(function(){e.closeView(),_.default.isXianShiRedDot=!0,u.EventManager.instance.dispatch(p.CommonEvent.Event_has_reward,!0)}).start())},t=o([b],t)}(a.default));i.default=I,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/ChargeActivityModel":"ChargeActivityModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RedDotModel":"RedDotModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../sdk/SdkHelper":"SdkHelper"}],XianshiLibaoConfig:[function(e,t,i){"use strict";cc._RF.push(t,"42beaQtd89GUo6bNQSB27VG","XianshiLibaoConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=function(){return function(){this.limit=[],this.player_lev=[],this.item=[],this.resource=[]}}();i.XianshiLibaoConfigInfo=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.id=i,t.configMap.set(Number(i),n)})},t.obj2Config=function(e){var t=new a;for(var i in e)"function"!=typeof e[i]&&(t[i]=e[i]);return t},t.getConfigById=function(e){return this.configMap.get(e)},t.Config_Name="pushgiftConfig",t.configMap=new Map,t}(o.JsonConfigBase);i.XianshiLibaoConfig=s,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],XianshiLibaoView:[function(e,t,i){"use strict";cc._RF.push(t,"5b238Bdd09AJpqvIDwakuHU","XianshiLibaoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/UIManager"),r=e("../../../engine/ViewBase"),c=e("../../config/ViewConfig"),l=e("../../event/CommonEvent"),d=e("../../model/ItemInfoModel"),f=e("../../model/XianshilibaoModel"),g=e("../../utils/MusicHelper"),h=cc._decorator,u=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xianshilibaoAtals=null,t.topResourcePrefab=null,t.xianshiInfoArr=[],t.zuiqiang_arr=[],t}return n(t,e),t.prototype.onInitChild=function(e){},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.button_fanhui=this.node.getChildByName("button_fanhui"),this.item_node=this.getChild(this.node,"mainBg/mainView/view/content/xianshilibaoCell_0"),this.item_parent_node=this.getChild(this.node,"mainBg/mainView/view/content"),this.top=this.findChild(this.node,"top")},t.prototype.onShow=function(){(this.rushFun(),this.top.childrenCount<=0)&&(cc.instantiate(this.topResourcePrefab).parent=this.top)},t.prototype.onEnable=function(){var e=this;a.EventManager.instance.on(l.CommonEvent.Event_XIANSHI_LIBAO_RUSH,this.rushFun,this),this.onAddEvent(this.button_fanhui,function(){e.closeView()})},t.prototype.rushFun=function(){this.item_parent_node.children.forEach(function(e,t){e.active=!1}),this.zuiqiang_arr=[],this.getZuiqiangInfo("I6004"),this.getZuiqiangInfo("I6005"),this.getZuiqiangInfo("I6008");for(var e=0,t=0;t<this.zuiqiang_arr.length;t++)this.initItem(this.findChild(this.item_node,"xianshilibaoCell_"+t),this.zuiqiang_arr[t],e),e++;this.xianshiInfoArr=f.default.libaoInfoAllArr;for(t=0;t<this.xianshiInfoArr.length;t++)this.initItem(this.findChild(this.item_node,"xianshilibaoCell_"+t),this.xianshiInfoArr[t],e)},t.prototype.getZuiqiangInfo=function(e){if(d.default.getItemAmount(e)<=0)return null;var t=d.default.getItem(e);if(!t)return null;var i=new f.XianshiGiftInfo;i.id=-1,i.status=f.XianshiGiftType.nohave,i.endtime=t.end_time,i.config=null,i.zuiqiang=e,this.zuiqiang_arr.push(i)},t.prototype.initItem=function(e,t,i){t.config;e||((e=cc.instantiate(this.item_node)).name="xianshilibaoCell_"+i,this.item_parent_node.addChild(e)),e.active=!0,this.onAddEvent(e,this.onClickItem.bind(this,t,this.xianshiInfoArr)),e.getComponent("XianshilibaoCell").onInitChild(t)},t.prototype.onClickItem=function(e,t){if(-1==e.id){var i=d.default.getItem(e.zuiqiang);if(!i)return;g.MusicHelper.play_click(),"I6004"==e.zuiqiang?s.default.instance.createView(c.default.gameView.ZuiQiangFangYuGiftView,null,i):"I6005"==e.zuiqiang?s.default.instance.createView(c.default.gameView.ZuiQiangJiNengGiftView,null,i):"I6008"==e.zuiqiang&&s.default.instance.createView(c.default.gameView.ZuiQiangQunGongGiftView,null,i)}else g.MusicHelper.play_click(),s.default.instance.createView(c.default.gameView.XianshilibaoInfoView,null,t,e)},o([p(cc.SpriteAtlas)],t.prototype,"xianshilibaoAtals",void 0),o([p(cc.Prefab)],t.prototype,"topResourcePrefab",void 0),t=o([u],t)}(r.default);i.default=m,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/XianshilibaoModel":"XianshilibaoModel","../../utils/MusicHelper":"MusicHelper"}],Xianshi_ShuyeView:[function(e,t,i){"use strict";cc._RF.push(t,"3f0c3y2hGNLFr0EKxohwJbA","Xianshi_ShuyeView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ChongZhiConfig"),r=e("../../../engine/DateUtil"),c=e("../../prefab/ItemPrefab"),l=e("../../model/ItemInfoModel"),d=e("../../config/GameConst"),f=e("../../config/ITemsConfig"),g=e("../../model/ChargeActivityModel"),h=e("../../network/SocketClient"),u=e("../../../engine/EventManager"),p=e("../../event/CommonEvent"),m=e("../../model/RedDotModel"),C=e("../../sdk/SdkHelper"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=15,t.itemType="I4001",t.buyIds=[],t}return n(t,e),t.prototype.onInitChild=function(){},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onEnable=function(){this.initXianShi(),u.EventManager.instance.on(p.CommonEvent.Event_ChargeActivityOk,this.onChargeOk,this)},t.prototype.initShow=function(){this.isShowDialog=!0},t.prototype.initXianShi=function(){var e=this;if(this.model=g.default.getShuYeModel(),this.model&&!(this.model.gift_id<=0)){var t,i=this.node.getChildByName("btnCloseXianShi");i&&this.onAddEvent(i,this.onClickCloseXianShi.bind(this));for(var n=0;n<3;n++){var o=this.node.getChildByName("btnBuy"+n);t=C.default.isAndroid()?s.ChongZhiConfig.getConfigById(401+n):s.ChongZhiConfig.getConfigById(1401+n),this.onAddEvent(o,this.onClickBuyXianShi.bind(this,t)),this.buyIds[n]=t.id}this.leftTime=g.default.getShuYeLeftTime(),this.schedule(function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&e.closeView()),e.refreshXianShi()},1),this.refreshXianShi()}},t.prototype.onChargeOk=function(e){var t=this.buyIds.indexOf(e);this.leftTime=0,this.unscheduleAllCallbacks();for(var i=0;i<3;i++){var n=this.node.getChildByName("btnBuy"+i),o=this.node.getChildByName("hadBuy"+i);n.active=!1,o.active=!1,i==t&&(o.active=!0,this.isHadBuy=!0)}this.refreshXianShi()},t.prototype.onClickCloseXianShi=function(){var e=this;this.isShowDialog&&(this.isHadBuy?this.closeView():cc.tween(this.node).to(.2,{scale:.1,position:cc.v2(285,531)}).call(function(){m.default.isXianShiRedDot=!0,e.closeView(),u.EventManager.instance.dispatch(p.CommonEvent.Event_has_reward,!0)}).start())},t.prototype.onClickBuyXianShi=function(e){h.default.req_charge(e.id)},t.prototype.onDisable=function(){this.isShowDialog&&(this.isHadBuy||(m.default.isXianShiRedDot=!0,u.EventManager.instance.dispatch(p.CommonEvent.Event_has_reward,!0)))},t.prototype.refreshXianShi=function(){var e=this.node.getChildByName("txtLeftTime").getComponent(cc.Label);if(this.leftTime>0){this.leftTime<=0?e.string="--":e.string=r.default.formatLeftTime2(1e3*this.leftTime);for(var t=f.ITemsConfig.getITemsConfigById("I4001"),i=0;i<3;i++){var n=this.node.getChildByName("ItemPrefab"+i).getComponent(c.default),o=s.ChongZhiConfig.getConfigById(401+i),a=o.item.I4001,g=l.default.create(d.GameConst.ITEM_KIND.ITEM,"I4001",a,t.quality);n.init(g,!0),this.node.getChildByName("txtDefault"+i).getComponent(cc.Label).string=o.o_price+"",this.getChild(this.node,"btnBuy"+i+"/txtCost",cc.Label).string=o.money+"";this.node.getChildByName("btnBuy"+i);this.node.getChildByName("hadBuy"+i).active=!1}}else this.leftTime<=0?e.string="--":e.string=r.default.formatLeftTime2(1e3*this.leftTime)},t.prototype.onClickBuy=function(e){},t=o([v],t)}(a.default));i.default=y,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../event/CommonEvent":"CommonEvent","../../model/ChargeActivityModel":"ChargeActivityModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RedDotModel":"RedDotModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../sdk/SdkHelper":"SdkHelper"}],XianshilibaoCell:[function(e,t,i){"use strict";cc._RF.push(t,"5aad4qMzbpHDJlrIVmYjcpI","XianshilibaoCell");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/ViewBase"),r=e("../../config/ColorConfig"),c=e("../../model/ServerTime"),l=e("../../model/XianshilibaoModel"),d=e("../../network/SocketClient"),f=cc._decorator,g=f.ccclass,h=f.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteAtlas=null,t.leftTime=20,t}return n(t,e),t.prototype.onInitChild=function(e){this.info_obj=e,this.onShow()},t.prototype.onShow=function(){var e=this;this.temp_info=this.info_obj.config;var t=this.node.getChildByName("cellTitle").getComponent(cc.Sprite);if(this.lab_node=this.node.getChildByName("cellName"),this.lab_name=this.lab_node.getComponent(cc.Label),this.lab_time_node=this.node.getChildByName("cellTime"),this.lab_time=this.lab_time_node.getComponent(cc.Label),-1==this.info_obj.id)if("I6004"==this.info_obj.zuiqiang)t.spriteFrame=this.spriteAtlas.getSpriteFrame("Equipmentgiftbag01"),this.lab_name.string="\u6700\u5f3a\u795e\u88c5";else if("I6005"==this.info_obj.zuiqiang)t.spriteFrame=this.spriteAtlas.getSpriteFrame("Equipmentgiftbag01"),this.lab_name.string="\u6700\u5f3a\u6280\u80fd";else{if("I6008"!=this.info_obj.zuiqiang)return void(this.node.active=!1);t.spriteFrame=this.spriteAtlas.getSpriteFrame("Skillbookgiftbag01"),this.lab_name.string="\u6700\u5f3a\u7fa4\u653b"}else t.spriteFrame=this.spriteAtlas.getSpriteFrame(this.temp_info.icon),this.lab_name.string=this.temp_info.giftname;this.info_obj.status==l.XianshiGiftType.nohave?this.node.active=!0:this.node.active=!1,-1==this.info_obj.id?this.leftTime=(this.info_obj.endtime-c.ServerTime.getServerTime())/1e3:this.leftTime=(1e3*this.info_obj.endtime-c.ServerTime.getServerTime())/1e3;var i=function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&(e.lab_time_node.active=!1,e.unschedule(i),d.default.s_get_limit_gift_info())),e.refresh(e.leftTime)};this.leftTime<=0?(this.lab_time_node.active=!1,d.default.s_get_limit_gift_info()):(this.refresh(this.leftTime),this.schedule(i,1))},t.prototype.refresh=function(e){this.lab_time.string=e<=0?"--":e>86400?a.default.formatLeftTime(1e3*e):a.default.formatLeftTime1(1e3*e),this.lab_time_node.color=e<3600?r.ColorConfig.RedColor:r.ColorConfig.GreenColor},t.MagicId={},o([h({type:cc.SpriteAtlas})],t.prototype,"spriteAtlas",void 0),t=o([g],t)}(s.default);i.default=u,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../model/ServerTime":"ServerTime","../../model/XianshilibaoModel":"XianshilibaoModel","../../network/SocketClient":"SocketClient"}],XianshilibaoInfoView:[function(e,t,i){"use strict";cc._RF.push(t,"9c276bzD4tD9rXQBUjKIVeG","XianshilibaoInfoView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/Logger"),r=e("../../../engine/ViewBase"),c=e("../../config/ChongZhiConfig"),l=e("../../config/ColorConfig"),d=e("../../config/EquipConfig"),f=e("../../config/ITemsConfig"),g=e("../../config/WordConfig"),h=e("../../model/ServerTime"),u=e("../../network/SocketClient"),p=e("../../utils/MusicHelper"),m=cc._decorator,C=m.ccclass,_=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteAtlas=null,t.ItemPrefab=null,t.leftTime=20,t.curIndex=0,t.curMaxIndex=0,t.xianshiInfoArr=[],t}return n(t,e),t.prototype.onInitChild=function(e,t){this.xianshiInfoArr=e,this.info_obj=t},t.prototype.onShow=function(){var e=this;this.temp_info=this.info_obj.config;var t=c.ChongZhiConfig.getConfigById(this.temp_info.charge_id);if(this.temp_info&&t){this.setTopUI(),this.node.active=!0;var i=this.node.getChildByName("xiaobiaoti").getComponent(cc.Sprite),n=this.node.getChildByName("gouamaiNode").getChildByName("libaoLabel_0").getComponent(cc.Label),o=this.node.getChildByName("libaoLabel_name").getComponent(cc.Label),a=this.node.getChildByName("btnCharge"),s=a.getChildByName("txtCost").getComponent(cc.Label);this.onAddEvent(a,this.buyGift.bind(this,t));var r=this.node.getChildByName("timeNode"),l=r.getChildByName("timeLabel");l.getComponent(cc.Label);this.left_node=this.node.getChildByName("leftNode"),this.right_node=this.node.getChildByName("rightNode"),this.onAddEvent(this.left_node,this.rightClickFun.bind(this,!0)),this.onAddEvent(this.right_node,this.rightClickFun.bind(this,!1));var d=this.node.getChildByName("itemALL");this.node.getChildByName("introLabel").getComponent(cc.RichText).string=this.temp_info.slogan,i.spriteFrame=this.spriteAtlas.getSpriteFrame(this.temp_info.word),n.string=this.temp_info.yield.toString()+"%",o.string=this.temp_info.giftname,s.string=cc.js.formatStr(g.WordConfig.getWord(60374),t.money.toString()),r.active=!0,this.leftTime=(1e3*this.info_obj.endtime-h.ServerTime.getServerTime())/1e3;var f=function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&(r.active=!1,e.unschedule(f),e.closeView())),e.refresh(e.leftTime,l)};this.leftTime<=0?(r.active=!1,this.closeView()):(this.refresh(this.leftTime,l),this.schedule(f,1),this.callbackFun=f);for(var u=0;u<d.children.length;u++)d.children[u].active=!1;var p=0;for(var m in this.temp_info.resource){var C=this.temp_info.resource[m];for(var _ in C)this.initaward_res(Number(_),C[_],d,p),p++}for(var m in p=0,this.temp_info.item){C=this.temp_info.item[m];for(var _ in C)this.initaward_item(_,C[_],d,p),p++}this.initSelectFun()}},t.prototype.initSelectFun=function(){this.curIndex=this.getCurIndexFun(),this.curMaxIndex=this.xianshiInfoArr.length-1,this.curMaxIndex<=1&&(this.left_node.active=this.right_node.active=!1),this.curIndex<this.curMaxIndex?this.right_node.active=!0:this.right_node.active=!1,this.curIndex>0?this.left_node.active=!0:this.left_node.active=!1},t.prototype.rightClickFun=function(e){var t;(t=e?this.xianshiInfoArr[this.curIndex-1]:this.xianshiInfoArr[this.curIndex+1])&&(this.info_obj=t,this.callbackFun&&this.unschedule(this.callbackFun),this.onShow())},t.prototype.getCurIndexFun=function(){for(var e=0;e<this.xianshiInfoArr.length;e++){if(this.xianshiInfoArr[e].id==this.info_obj.id)return e}},t.prototype.refresh=function(e,t){var i=t.getComponent(cc.Label);i.string=e<=0?"--":e>86400?a.default.formatLeftTime(1e3*e)+"\u540e\u6d88\u5931":a.default.formatLeftTime1(1e3*e)+"\u540e\u6d88\u5931",t.color=e<3600?l.ColorConfig.RedColor:l.ColorConfig.GreenColor},t.prototype.initaward_res=function(e,t,i,n){var o=i.getChildByName("ResourceCell"+n);o||((o=cc.instantiate(this.ItemPrefab)).name="ResourceCell"+n),o.active=!0,o.parent=i,o.getComponent("ItemPrefab").initResource(e,t)},t.prototype.initaward_item=function(e,t,i,n){var o=f.ITemsConfig.getITemsConfigById(e);if(o){var a=i.getChildByName("awardCell"+n);a||((a=cc.instantiate(this.ItemPrefab)).name="awardCell"+n),a.active=!0,a.parent=i,a.getComponent("ItemPrefab").init(o,!0),a.getComponent("ItemPrefab").setNumTxt(t)}},t.prototype.initaward_eauip=function(e,t,i,n,o){void 0===o&&(o=-1);var a=d.EquipConfig.getEquipConfigById(e);if(o>=0&&(a.quality=o),a){var s=cc.instantiate(this.ItemPrefab);s.y=-72,s.x=80*n-160,s.active=!0,s.parent=i,s.getComponent("ItemPrefab").init(a,!0),s.getComponent("ItemPrefab").setNumTxt(t)}},t.prototype.buyGift=function(e){s.Logger.log("buyGift==",e),p.MusicHelper.play_click(),u.default.req_charge(e.id),this.closeView()},t.MagicId={},o([_({type:cc.SpriteAtlas})],t.prototype,"spriteAtlas",void 0),o([_(cc.Prefab)],t.prototype,"ItemPrefab",void 0),t=o([C],t)}(r.default);i.default=v,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/Logger":"Logger","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../utils/MusicHelper":"MusicHelper"}],XianshilibaoModel:[function(e,t,i){"use strict";cc._RF.push(t,"600b7Ybd8hG853hlVZH85ke","XianshilibaoModel");var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var o,a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/UIManager"),l=e("../config/ViewConfig"),d=e("../config/XianshiLibaoConfig"),f=e("../event/CommonEvent"),g=e("../manager/RedPointManager"),h=cc._decorator,u=h.ccclass;h.property;(function(e){e[e.nohave=1]="nohave",e[e.have=2]="have"})(i.XianshiGiftType||(i.XianshiGiftType={})),function(e){e[e.tanchu0=0]="tanchu0",e[e.tanchu1=1]="tanchu1",e[e.tanchu2=2]="tanchu2"}(o=i.XianshiGiftChushihua||(i.XianshiGiftChushihua={}));var p=function(){return function(){}}();i.XianshiGiftInfo=p;var m=function(){function e(){this.eventIdList=[],this.protos=[],this.eventIdList=[g.RedPointId.XIANSHI_LIBAO],this.protos=[s.ProtoConfig.c_get_limit_gift_info,s.ProtoConfig.c_limit_gift_popup]}var t;return t=e,e.proto2AllLibaoInfo=function(e){this.model=this.model?this.model:new t,this.libaoInfoAllArr=[];var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_get_limit_gift_info,e).getGiftListList();if(i){for(var n in i){var o=i[n],c=new p;c.id=o.getId(),c.status=o.getStatus(),c.endtime=o.getEndtime(),c.config=d.XianshiLibaoConfig.getConfigById(c.id),this.libaoInfoPropertyMap.set(c.id,c),this.libaoInfoAllArr.push(c)}this.libaoInfoAddArr.sort(this.sortTimeFun)}a.EventManager.instance.dispatch(f.CommonEvent.Event_XIANSHI_LIBAO_RUSH)},e.proto2AddLibaoInfo=function(e){this.model=this.model?this.model:new t,this.libaoInfoAddArr=[];var i=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_limit_gift_popup,e).getGiftListList();if(i){for(var n in i){var g=i[n],h=new p;h.id=g.getId(),h.status=g.getStatus(),h.endtime=g.getEndtime(),h.config=d.XianshiLibaoConfig.getConfigById(h.id),this.libaoInfoPropertyMap.set(h.id,h),this.libaoInfoAddArr.push(h),this.libaoInfoAllArr.push(h)}this.libaoInfoAllArr.sort(this.sortTimeFun)}a.EventManager.instance.dispatch(f.CommonEvent.Event_XIANSHI_LIBAO_RUSH),a.EventManager.instance.dispatch(f.CommonEvent.Event_XIANSHI_ADD_LIBAO_RUSH),c.default.instance.isOpen(l.default.gameView.XianshilibaoInfoView)&&c.default.instance.closeView(l.default.gameView.XianshilibaoInfoView),c.default.instance.isOpen(l.default.gameView.gameui)||t.is_open==o.tanchu2?(c.default.instance.createView(l.default.gameView.XianshilibaoInfoView,null,this.libaoInfoAddArr,this.libaoInfoAddArr[0]),t.is_open=o.tanchu2):t.is_open=o.tanchu1},e.sortTimeFun=function(e,t){return e.endtime-t.endtime},e.prototype.start=function(){},e.prototype.checkRedPoint=function(){var e=[],i=!1;t.libaoInfoAllArr.length>0&&(i=!0);var n={id:g.RedPointId.XIANSHI_LIBAO,type:g.RedPointType.Default,show:i};return e.push(n),e},e.libaoInfoPropertyMap=new Map,e.libaoInfoAllArr=[],e.libaoInfoAddArr=[],e.is_open=o.tanchu0,e=t=n([u],e)}();i.default=m,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../config/ViewConfig":"ViewConfig","../config/XianshiLibaoConfig":"XianshiLibaoConfig","../event/CommonEvent":"CommonEvent","../manager/RedPointManager":"RedPointManager"}],Xiaofeihuikuiconfig:[function(e,t,i){"use strict";cc._RF.push(t,"fdb28SuVyJBcpUGkO1tOdqC","Xiaofeihuikuiconfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propInfo=new Map,t.ressInfo=new Map,t}return n(t,e),t.obj2Config=function(e,i){var n=new t;n.desc=e.docs,n.goalCount=e.goal;var o=e.items;for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)){var s=o[a];n.propInfo.set(a,s)}var r=e.ress;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){s=r[a];n.ressInfo.set(a,s)}return n},t.json2Config=function(e){var i=this;Object.keys(e).forEach(function(n){var o=i.obj2Config(e[n],n),a=Number(n);t.configMap.set(a,o)})},t.getConfigMapById=function(e){return t.configMap.get(e)},t.getDecById=function(e){return t.getConfigMapById(e).desc},t.getNeedCountById=function(e){return t.getConfigMapById(e).goalCount},t.getPropInfoById=function(e){return t.getConfigMapById(e).propInfo},t.getRessInfoById=function(e){return t.getConfigMapById(e).ressInfo},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],Xiaofeimubiaoconfig:[function(e,t,i){"use strict";cc._RF.push(t,"89b07q3IqlCK5Xl9Q1xkLS4","Xiaofeimubiaoconfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propInfo=new Map,t.ressInfo=new Map,t}return n(t,e),t.obj2Config=function(e,i){var n=new t;n.desc=e.docs,n.goalCount=e.goal;var o=e.items;for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)){var s=o[a];n.propInfo.set(a,s)}var r=e.ress;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){s=r[a];n.ressInfo.set(a,s)}return n},t.json2Config=function(e){var i=this;Object.keys(e).forEach(function(n){var o=i.obj2Config(e[n],n),a=Number(n);t.configMap.set(a,o)})},t.getConfigMapById=function(e){return t.configMap.get(e)},t.getDecById=function(e){return t.getConfigMapById(e).desc},t.getNeedCountById=function(e){return t.getConfigMapById(e).goalCount},t.getPropInfoById=function(e){return t.getConfigMapById(e).propInfo},t.getRessInfoById=function(e){return t.getConfigMapById(e).ressInfo},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.default=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],Xilianexpendconfig:[function(e,t,i){"use strict";cc._RF.push(t,"52c15M73upAb4EuW+p92CxJ","Xilianexpendconfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=e("./JsonConfigBase"),a=e("./GameConst"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.obj2Config=function(e){var i=new t;return i.quality2=e.quality2,i.quality3=e.quality3,i.quality4=e.quality4,i.quality5=e.quality5,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);n.level=parseInt(i),t.configMap.set(n.level,n)})},t.getConfigByLevel=function(e){var t;return this.configMap.forEach(function(i,n){i.level!=e||(t=i)}),t},t.getNeedConfig=function(e,t){var i=this.getConfigByLevel(e);return t==a.GameConst.QUALITY.GREEN?i.quality2:t==a.GameConst.QUALITY.BLUE?i.quality3:t==a.GameConst.QUALITY.PURPLE?i.quality4:t==a.GameConst.QUALITY.ORANGE?i.quality5:void 0},t.configMap=new Map,t}(o.JsonConfigBase);i.Xilianexpendconfig=s,cc._RF.pop()},{"./GameConst":"GameConst","./JsonConfigBase":"JsonConfigBase"}],YaoShopConfig:[function(e,t,i){"use strict";cc._RF.push(t,"15a9aRluJ5GtLeoWrk7n/7F","YaoShopConfig");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=1,t.city=1,t.item_id="I1001",t}return n(t,e),t.obj2Config=function(e){var i=new t;return i.city=e.city,i.item_id=e.item_id,i.unit_price=e.unit_price,i.name=e.name,i},t.json2Config=function(e){var t=this;Object.keys(e).forEach(function(i){var n=t.obj2Config(e[i]);t.configMap.set(i,n),n.id=parseInt(i)})},t.getShopConfigByCity=function(e){var t=[];return this.configMap.forEach(function(i,n){e==i.city&&t.push(i)}),t},t.configMap=new Map,t}(e("./JsonConfigBase").JsonConfigBase);i.YaoShopConfig=o,cc._RF.pop()},{"./JsonConfigBase":"JsonConfigBase"}],YuandanView:[function(e,t,i){"use strict";cc._RF.push(t,"cc5c0R9ATND8IGNxGL/mp6X","YuandanView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/DateUtil"),s=e("../../engine/EventManager"),r=e("../../engine/Logger"),c=e("../../engine/ViewBase"),l=e("../config/ActivitygiftConfig"),d=e("../config/ChongZhiConfig"),f=e("../config/GameConst"),g=e("../event/CommonEvent"),h=e("../model/ActivityOpenModel"),u=e("../model/DisCountPrefabModel"),p=e("../model/ItemInfoModel"),m=e("../network/SocketClient"),C=e("../prefab/ItemPrefab"),_=cc._decorator,v=_.ccclass,y=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startId=101,t.itemList=[],t}return n(t,e),t.prototype.onEnable=function(){s.EventManager.instance.on(g.CommonEvent.Event_YuandanDiscount,this.onfresh,this),m.default.s_get_newYear_discount_info(),this.onfresh()},t.prototype.onfresh=function(){for(var e=this,t=0;t<this.itemList.length;t++)this.itemList[t].active=!1;var i=l.default.getConfigsByActId(6);if(i){for(var n=function(t){var n=o.findChild(o.node,"fundPanel/img_ui_shuangdan_kuang/scrollView/view/content/panel"),a=void 0;o.itemList[t]?a=o.itemList[t]:(a=cc.instantiate(n),o.itemList.push(a),a.parent=n.parent),n.active=!1,a.active=!0;var s=l.default.getConfigById(o.startId+t);s&&(o.startLevel=s.chargeid[0]);var r=d.ChongZhiConfig.getConfigById(o.startLevel),c=a.getChildByName("txtDefault0").getComponent(cc.Label),g=a.getChildByName("txtLeft").getComponent(cc.Label);c.string=r.getDefaultMoneyStr(),a.getChildByName("btnCharge1").getChildByName("txtCost").getComponent(cc.Label).string=r.getMoneyStr();var h=a.getChildByName("panel_bg").getChildByName("ItemPrefab");if(r.item){var m=[];for(var _ in r.item)m.push(_);if(m.sort(),m)for(var v=0;v<m.length;v++){var y=void 0;y=cc.instantiate(h);var b=r.item[m[v]];y.getComponent(C.default).init(p.default.create(f.GameConst.ITEM_KIND.ITEM,m[v],b),!0),y.parent=h.parent}}if(r.resource)for(var I in r.resource){var M=void 0;M=cc.instantiate(h);var w=r.resource[I];M.getComponent(C.default).initResource(parseInt(I),w),M.parent=h.parent}h.active=!1;var k=a.getChildByName("btnCharge1"),S=a.getChildByName("fontclib_shouqing");k.active=!0,S.active=!1;var P=i[t];if(0!=u.DisCountPrefabModel.modelList1.length)for(var E=0;E<u.DisCountPrefabModel.modelList1.length;E++)t+101==u.DisCountPrefabModel.modelList1[E].shopId&&(P.times-u.DisCountPrefabModel.modelList1[E].shopNum<=0&&(k.active=!1,S.active=!0),g.string=P.times-u.DisCountPrefabModel.modelList1[E].shopNum+"",g.string<"0"&&(g.string="0"));else g.string=P.times+"";o.onAddEvent(k,function(){e.buyGift(t)})},o=this,s=0;s<i.length;s++)n(s);var r=this.node.getChildByName("fundPanel").getChildByName("continueTime").getComponent(cc.Label),c=h.default.getStarTimeByActivityId(6),g=h.default.getEndTimeByActivityId(6);r.string=a.default.formatDateStr7(1e3*c)+"-"+a.default.formatDateStr7(1e3*g)}},t.prototype.buyGift=function(e){var t,i=l.default.getConfigById(this.startId+e);i&&(t=d.ChongZhiConfig.getChongZhiByIdAndPlatform(i.chargeid[0])),r.Logger.log("buyGift==",t),m.default.req_charge(t.id)},t=o([v],t)}(c.default));i.default=y,cc._RF.pop()},{"../../engine/DateUtil":"DateUtil","../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/ActivitygiftConfig":"ActivitygiftConfig","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConst":"GameConst","../event/CommonEvent":"CommonEvent","../model/ActivityOpenModel":"ActivityOpenModel","../model/DisCountPrefabModel":"DisCountPrefabModel","../model/ItemInfoModel":"ItemInfoModel","../network/SocketClient":"SocketClient","../prefab/ItemPrefab":"ItemPrefab"}],ZRWXSDKHandler:[function(e,t,i){"use strict";cc._RF.push(t,"9f455M3GKlBgbUWkuFue2ob","ZRWXSDKHandler"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/LocalStorage"),a=e("../../engine/Logger"),s=e("../event/CommonEvent"),r=e("../GameController"),c=e("../network/SocketClient"),l=e("../utils/UIHelper"),d=e("./SdkHandler"),f=e("./SdkHelper"),g=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance?this._instance:new e},enumerable:!0,configurable:!0}),e.prototype.authCallback=function(e,t){if(a.Logger.log("authCallback=====",e,t),e==d.Code.OK)try{t.authType==d.AuthType.login?(f.default.appId=t.appId?t.appId:f.default.appId,f.default.uId=t.openId,f.default.extra=t.authCode,o.default.setItem(f.default.Local_Login_Uid_Key,f.default.uId),c.default.login(1)):t.authType==d.AuthType.loginOut&&r.default.instance.restartGame()}catch(e){a.Logger.error("authCallback error",e)}},e.prototype.payCallBack=function(e,t){a.Logger.log("payCallBack=====",e,t)},e.prototype.adCallback=function(e,t){if(a.Logger.log("adCallback=====",e,t),e==d.Code.ADFAIL){var i=t.msg;l.UIHelper.showTip(i)}else if(e==d.Code.ADREAWARD){n.EventManager.instance.dispatch(s.CommonEvent.Event_ad_end);var o=t.msg;l.UIHelper.showTip(o)}else e==d.Code.ADCOLSE?c.default.s_seq_start_adv_status(2):d.Code.ADSHOW},e}();i.ZRWXSDKHandler=g,window.ZRWXSDKHandler=g,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../GameController":"GameController","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper"}],ZRWXSDKManager:[function(e,t,i){"use strict";cc._RF.push(t,"fc5c1KgBgZP34DF0NLm73ZO","ZRWXSDKManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/Logger"),o=e("../../engine/VersionManager"),a=e("../config/ChongZhiConfig"),s=e("../config/GameConfig"),r=e("../model/RoleInfoModel"),c=e("../model/ZoneModel"),l=e("./SdkHandler"),d=function(){function e(){}return e.sdkAuth=function(e,t){if(void 0===t&&(t=""),e==l.AuthType.init)return n.Logger.log("wx\u521d\u59cb\u5316"),void this.init();if(n.Logger.log("sdkAuth--------------",l.SdkHandler.isInit),l.SdkHandler.isInit)if(e==l.AuthType.login)this.loginOK();else if(e==l.AuthType.onCustomEvent){var i=JSON.parse(t),o=i.eventName;this.repotRoleData(o,i)}else l.AuthType.loginOut;else n.Logger.warn("sdk\u521d\u59cb\u5316\u5931\u8d25\uff0c\u6388\u6743\u5931\u8d25")},e.sdkPay=function(t,i){var o=a.ChongZhiConfig.getConfigById(i.configId),s=i.configId,l=o.name,d=void 0==o.des?"":o.des,f=void 0!=i.configId?o.money:"",g=r.default.instance.roleId;g=g.toString();var h=r.default.instance.roleName,u=r.default.instance.level,p=i.cpOrderNo,m=i.extend,C=c.ZoneModel.nowZoneInfoModel.server_id,_=c.ZoneModel.nowZoneInfoModel.server_name;if(e.QCSDK){var v={};v.cpbill=p,v.productid=s,v.productname=l,v.productdesc=d,v.serverid=C,v.servername=_,v.roleid=g,v.rolename=h,v.rolelevel=u,v.price=f,v.extension=m,e.QCSDK.pay(v,function(e,t){n.Logger.log("status="+e)})}n.Logger.log("sdkPay,cp_bill="+p),n.Logger.log("role_id="+g)},e.sdkAd=function(e){n.Logger.log("sdkAd",e)},e.adCallBack=function(t){var i=t.advert_type;n.Logger.log("advert_type="+i+",status="+o);var o=t.status,a=-1,r=e.createAuthData();if(r.functionName=l.FunctionName.AdCallBack,r.sdkType=s.SdkType.Xiaotun,"adLoadFail"==o?(a=l.Code.ADFAIL,r.msg="\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"):"adClose"==o?a=l.Code.ADCOLSE:"adReWord"==o?(a=l.Code.ADREAWARD,r.msg="\u89c2\u770b\u6210\u529f"):"adClick"==o?a=l.Code.ADCLICKED:"adShow"==o&&(a=l.Code.ADSHOW),-1!=a){var c=JSON.stringify(r);l.SdkHandler.callback(a,c)}},e.createAuthData=function(){var e=new l.AuthData;return e.sdkType=s.SdkType.FengYue,e},e.initOK=function(){var e=this.createAuthData();e.functionName=l.FunctionName.InitCallBack;var t=JSON.stringify(e);l.SdkHandler.callback(l.Code.OK,t)},e.loginOK=function(){console.log("loginOK");var e=this.createAuthData();e.functionName=l.FunctionName.AuthCallBack,e.authType=l.AuthType.login,e.authCode=this.token,e.openId=this.userId;var t=JSON.stringify(e);l.SdkHandler.callback(l.Code.OK,t)},e.repotRoleData=function(t,i){if(e.QCSDK){var n=i.param,o="",a="",s=1,d=1,f="";n?(o=n.role_id,a=n.role_name,s=n.role_level,d=n.server_id,f=n.server_name):(o=r.default.instance.roleId,a=r.default.instance.roleName,s=r.default.instance.level,d=c.ZoneModel.nowZoneInfoModel.server_id,f=c.ZoneModel.nowZoneInfoModel.server_name),o=o.toString();t==l.AuthType.createRole?e.QCSDK.logCreateRole(d,f,o,a,s):t==l.AuthType.upgradeRole?e.QCSDK.logRoleUpLevel(d,f,o,a,s):t==l.AuthType.enterServer&&e.QCSDK.logEnterGame(d,f,o,a,s)}},Object.defineProperty(e,"QCSDK",{get:function(){return window.cwan},enumerable:!0,configurable:!0}),e.init=function(){console.log("ZRWXSDKManager.init");var t={game_ver:o.default.instance.nowVersion};console.log("version="+JSON.stringify(t)),e.QCSDK.init(t,function(t){t.develop,console.log("restData.develop="+t.develop),e.QCSDK.login(function(t,i){0==t?(e.userId=i.userid,e.token=i.token,e.initOK()):console.log("QCSDK\u767b\u5f55\uff0f\u6ce8\u518c\u5931\u8d25\uff1a"+i.errMsg)})})},e.userId="",e.token="",e}();i.ZRWXSDKManager=d,window.ZRWXSDKManager=d,cc._RF.pop()},{"../../engine/Logger":"Logger","../../engine/VersionManager":"VersionManager","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConfig":"GameConfig","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","./SdkHandler":"SdkHandler"}],ZRWebSDKHandler:[function(e,t,i){"use strict";cc._RF.push(t,"5877bchJU9CDK3+5rhtrs9y","ZRWebSDKHandler"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/EventManager"),o=e("../../engine/LocalStorage"),a=e("../../engine/Logger"),s=e("../event/CommonEvent"),r=e("../GameController"),c=e("../network/SocketClient"),l=e("../utils/UIHelper"),d=e("./SdkHandler"),f=e("./SdkHelper"),g=e("./ZRWebSDKManager"),h=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance?this._instance:new e},enumerable:!0,configurable:!0}),e.prototype.authCallback=function(e,t){if(a.Logger.log("authCallback=====",e,t),e==d.Code.OK)try{t.authType==d.AuthType.login?(f.default.appId=t.appId?t.appId:f.default.appId,f.default.uId=t.openId,f.default.extra=t.authCode,g.ZRWebSDKManager.userId=t.openId,g.ZRWebSDKManager.token=t.authCode,o.default.setItem(f.default.Local_Login_Uid_Key,f.default.uId),c.default.login(1)):t.authType==d.AuthType.loginOut&&r.default.instance.restartGame()}catch(e){a.Logger.error("authCallback error",e)}},e.prototype.payCallBack=function(e,t){a.Logger.log("payCallBack=====",e,t)},e.prototype.adCallback=function(e,t){if(a.Logger.log("adCallback=====",e,t),e==d.Code.ADFAIL){var i=t.msg;l.UIHelper.showTip(i)}else if(e==d.Code.ADREAWARD){n.EventManager.instance.dispatch(s.CommonEvent.Event_ad_end);var o=t.msg;l.UIHelper.showTip(o)}else e==d.Code.ADCOLSE?c.default.s_seq_start_adv_status(2):d.Code.ADSHOW},e}();i.ZRWebSDKHandler=h,window.ZRWebSDKHandler=h,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/LocalStorage":"LocalStorage","../../engine/Logger":"Logger","../GameController":"GameController","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper","./ZRWebSDKManager":"ZRWebSDKManager"}],ZRWebSDKManager:[function(e,t,i){"use strict";cc._RF.push(t,"70b219i1f1FL4HXEXdCWc3e","ZRWebSDKManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../engine/GlobalConfig"),o=e("../../engine/Logger"),a=e("../config/ChongZhiConfig"),s=e("../config/GameConfig"),r=e("../model/RoleInfoModel"),c=e("../model/ZoneModel"),l=e("./SdkHandler"),d=e("./SdkHelper"),f=function(){function e(){}return e.doCommand=function(e,t,i){void 0===i&&(i="(Ljava/lang/String;)V");var n=void 0==t?void 0:JSON.stringify(t),o=this.androidNativeClassName,a=e;if(void 0==n)return jsb.reflection.callStaticMethod(o,a,i);jsb.reflection.callStaticMethod(o,a,i,n)},e.sdkAuth=function(e,t){if(void 0===t&&(t=""),cc.sys.isBrowser){if(e==l.AuthType.init)return o.Logger.log("websdk\u521d\u59cb\u5316"),void this.init();if(o.Logger.log("sdkAuth--------------",l.SdkHandler.isInit),l.SdkHandler.isInit){if(e==l.AuthType.login)this.loginOK();else if(e==l.AuthType.onCustomEvent){var i=(n=JSON.parse(t)).eventName;this.repotRoleData(i,n)}else if(e==l.AuthType.loginOut)window.H5SDK_7CWAN.logout();else if(e==l.AuthType.onLoginRsp){var n=JSON.parse(t);d.default.uId=n.content.unionid;var a=n.content.access_token;o.Logger.log("loginRsp--\u767b\u5f55\u4e8c\u6b21\u9a8c\u8bc1\uff1a",a),window.H5SDK_7CWAN.loginRsp(a)}}else o.Logger.warn("sdk\u521d\u59cb\u5316\u5931\u8d25\uff0c\u6388\u6743\u5931\u8d25")}else if(cc.sys.isNative)if(l.SdkHandler.isInit=this.doCommand("getInit",void 0,"()Z"),l.SdkHandler.isInit){var s=void 0;if(e==l.AuthType.onLoginRsp){n=JSON.parse(t);d.default.uId=n.content.unionid,s={function:e,token:n.content.access_token}}else if(e==l.AuthType.onCustomEvent){s={function:e,eventName:(n=JSON.parse(t)).eventName,param:n.param}}else s={function:e};this.doCommand("sdkAuth",s)}else o.Logger.warn("sdk\u521d\u59cb\u5316\u5931\u8d25\uff0c\u6388\u6743\u5931\u8d25")},e.sdkPay=function(e,t){var i=a.ChongZhiConfig.getConfigById(t.configId),n=t.configId,s=i.name,l=void 0==i.des?"":i.des,d=void 0!=t.configId?i.money:"",f=r.default.instance.roleId;f=f.toString();var g=r.default.instance.roleName,h=r.default.instance.level,u=t.cpOrderNo,p=t.extend,m=c.ZoneModel.nowZoneInfoModel.server_id,C=c.ZoneModel.nowZoneInfoModel.server_name;cc.sys.isBrowser&&window.H5SDK_7CWAN&&(o.Logger.log("H5SDK_7CWAN.pay"),window.H5SDK_7CWAN.pay(n,s,l,d,f,g,h,u,p,m,C)),o.Logger.log("sdkPay,cp_bill="+u),o.Logger.log("role_id="+f)},e.sdkAd=function(t){o.Logger.log("sdkAd",t);window.H5SDK_7CWAN&&window.H5SDK_7CWAN.advert(3,e.adCallBack)},e.adCallBack=function(t){var i=t.advert_type;o.Logger.log("advert_type="+i+",status="+n);var n=t.status,a=-1,r=e.createAuthData();if(r.functionName=l.FunctionName.AdCallBack,r.sdkType=s.SdkType.Xiaotun,"adLoadFail"==n?(a=l.Code.ADFAIL,r.msg="\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"):"adClose"==n?a=l.Code.ADCOLSE:"adReWord"==n?(a=l.Code.ADREAWARD,r.msg="\u89c2\u770b\u6210\u529f"):"adClick"==n?a=l.Code.ADCLICKED:"adShow"==n&&(a=l.Code.ADSHOW),-1!=a){var c=JSON.stringify(r);l.SdkHandler.callback(a,c)}},e.createAuthData=function(){var e=new l.AuthData;return e.sdkType=s.SdkType.Xiaotun,e},e.initOK=function(){var e=this.createAuthData();e.functionName=l.FunctionName.InitCallBack;var t=JSON.stringify(e);l.SdkHandler.callback(l.Code.OK,t)},e.loginOK=function(){if(o.Logger.log("GlobalConfig.browserParam="),o.Logger.log(n.GlobalConfig.browserParam),o.Logger.log("window.location.ancestorOrigins=="),o.Logger.log(window.location.ancestorOrigins),n.GlobalConfig.browserParam){var e=this.createAuthData();e.functionName=l.FunctionName.AuthCallBack,e.authType=l.AuthType.login;var t=n.GlobalConfig.browserParam["7cwan_param"],i=JSON.parse(t);e.authCode=i.token||"",e.openId=i.user_id||"";var a=JSON.stringify(e);l.SdkHandler.callback(l.Code.OK,a)}else o.Logger.log("GlobalConfig.browserParam\u4e3a\u7a7a")},e.repotRoleData=function(e,t){if(window.H5SDK_7CWAN){var i=t.param,n="",o="",a=1,s=1,d="";i?(n=i.role_id,o=i.role_name,a=i.role_level,s=i.server_id,d=i.server_name):(n=r.default.instance.roleId,o=r.default.instance.roleName,a=r.default.instance.level,s=c.ZoneModel.nowZoneInfoModel.server_id,d=c.ZoneModel.nowZoneInfoModel.server_name),n=n.toString();var f="";e==l.AuthType.createRole?f="create":e==l.AuthType.upgradeRole?f="level":e==l.AuthType.enterServer&&(f="enter"),window.H5SDK_7CWAN.eventReport(n,o,a,s,d,f)}},e.init=function(){this.initOK()},e.androidNativeClassName="sdk/SdkManager",e.androidAdMobVideoId="R1",e.userId="",e.token="",e}();i.ZRWebSDKManager=f,window.ZRManager=f,cc._RF.pop()},{"../../engine/GlobalConfig":"GlobalConfig","../../engine/Logger":"Logger","../config/ChongZhiConfig":"ChongZhiConfig","../config/GameConfig":"GameConfig","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","./SdkHandler":"SdkHandler","./SdkHelper":"SdkHelper"}],ZhenBaoDes:[function(e,t,i){"use strict";cc._RF.push(t,"7f7c8mLarxC/aGQHzz9mV6M","ZhenBaoDes");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/ViewBase"),s=e("../config/ViewConfig"),r=e("../../engine/UIManager"),c=e("../config/FangShopConfig"),l=e("../config/SkillConfig"),d=e("../config/SkinConfig"),f=e("../config/ColorConfig"),g=e("../model/FangShiModel"),h=e("../network/SocketClient"),u=e("../../engine/EventManager"),p=e("../event/CommonEvent"),m=e("../model/SkillModel"),C=e("../config/ChongZhiConfig"),_=e("../config/WordConfig"),v=cc._decorator,y=v.ccclass,b=(v.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e){this.proNameList=[_.WordConfig.getWord(60502),_.WordConfig.getWord(60503),_.WordConfig.getWord(60504),_.WordConfig.getWord(60505)],this.config=c.default.getConfigById(e),this.shopId=e,u.EventManager.instance.on(p.CommonEvent.Event_ZHENBAOFangShi_Change,this.refreshView,this)},t.prototype.onShow=function(){r.default.instance.setTopUI(s.default.gameView.ZhenBaoDes),this.node.getChildByName("btnKnow").on(cc.Node.EventType.TOUCH_END,this.closeView.bind(this)),this.node.getChildByName("btnTry").on(cc.Node.EventType.TOUCH_END,this.onClickTry.bind(this)),this.node.getChildByName("btnBuy").on(cc.Node.EventType.TOUCH_END,this.onClickBuy.bind(this)),this.refreshView()},t.prototype.refreshView=function(){if(this.config.type==c.default.TYPE_SKILLEFFECT){var e=g.default.getNumById(this.shopId),t=d.default.getConfigById(Number(this.config.item_id)),i=l.SkillConfig.getSkillConfigById(t.type_value,1);this.findChild(this.node,"thingName").getComponent(cc.Label).string=t.name,this.findChild(this.node,"thingName").color=f.ColorConfig.getQualityColor(t.quality),this.findChild(this.node,"thingType").getComponent(cc.Label).string=_.WordConfig.getWord(60506),this.findChild(this.node,"thingType").color=f.ColorConfig.getQualityColor(t.quality),this.findChild(this.node,"btnTry").active=!(e>0),this.findChild(this.node,"btnBuy").active=e>0;var n=cc.js.formatStr(_.WordConfig.getWord(60507),this.proNameList[this.config.zhiye],i.name,t.des);this.findChild(this.node,"thingDes").getComponent(cc.Label).string=n;var o=C.ChongZhiConfig.getChongZhiByIdAndPlatform(this.config.charge);this.findChild(this.node,"btnBuy/money").getComponent(cc.Label).string=o.getMoneyStr()+""}},t.prototype.onClickTry=function(){this.closeView();var e=d.default.getConfigById(Number(this.config.item_id)),t=l.SkillConfig.getSkillConfigById(e.type_value,1);u.EventManager.instance.dispatch(p.CommonEvent.Event_JumpToSkillEffectView,t.skillId)},t.prototype.onClickBuy=function(){if(g.default.getNumById(this.shopId)>0&&this.config.type==c.default.TYPE_SKILLEFFECT){for(var e=m.SkillModel.getMyActiveSkillList(),t=!1,i=0;i<e.length;i++)e[i].skillId==d.default.getConfigById(Number(this.config.item_id)).type_value&&(t=!0);t?h.default.s_seq_fangbuy(this.shopId,1):_.WordConfig.showWord(60332)}},t=o([y],t)}(a.default));i.default=b,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/ColorConfig":"ColorConfig","../config/FangShopConfig":"FangShopConfig","../config/SkillConfig":"SkillConfig","../config/SkinConfig":"SkinConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/FangShiModel":"FangShiModel","../model/SkillModel":"SkillModel","../network/SocketClient":"SocketClient"}],ZhuanDuanButton:[function(e,t,i){"use strict";cc._RF.push(t,"93786nQxB1HvqMFzcO91xTa","ZhuanDuanButton");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/UIManager"),s=e("../../../engine/ViewBase"),r=e("../../config/ViewConfig"),c=e("../../model/AppDownloadModel"),l=cc._decorator,d=l.ccclass,f=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.start=function(){},t.prototype.openZhuanDuan=function(){c.AppDownloadModel.instance.getShowType()==c.AppDownloadShow_type.download?a.default.instance.createView(r.default.gameView.ZhuanDuanRemindDialog,null):c.AppDownloadModel.instance.getShowType()!=c.AppDownloadShow_type.reward&&c.AppDownloadModel.instance.getShowType()!=c.AppDownloadShow_type.rewardOK||a.default.instance.createView(r.default.gameView.WeiDuanFuli,null)},t.prototype.openWeiDuanFuLi=function(){a.default.instance.createView(r.default.gameView.WeiDuanFuli,null)},t.prototype.openZhuanDuanJiangli=function(){a.default.instance.createView(r.default.gameView.ZhuanDuaJiangli,null)},t=o([d],t)}(s.default));i.default=f,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../model/AppDownloadModel":"AppDownloadModel"}],ZhuanDuanJiangli:[function(e,t,i){"use strict";cc._RF.push(t,"2c449Kjnp9GhI+vDAJgJZl/","ZhuanDuanJiangli");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function r(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(s,r)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return c([e,t])}}function c(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=e("../../../engine/ResourcesManager"),c=e("../../../engine/UIManager"),l=e("../../../engine/ViewBase"),d=e("../../config/DefaultConfig"),f=e("../../config/GameConst"),g=e("../../config/ITemsConfig"),h=e("../../config/ViewConfig"),u=e("../../model/AppDownloadModel"),p=e("../../model/ItemInfoModel"),m=e("../../utils/UIHelper"),C=e("../ItemPrefab"),_=cc._decorator,v=_.ccclass,y=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemLayout=null,t.itemNode=null,t}return n(t,e),t.prototype.start=function(){this.itemNode.active=!1;var e=d.DefaultConfig.getConfigById(228);for(var t in e.value){var i=g.ITemsConfig.getITemsConfigById(t),n=p.default.create(f.GameConst.ITEM_KIND.ITEM,i.id,e.value[t],i.quality),o=cc.instantiate(this.itemNode);o.getComponent(C.default).init(n,!0),this.itemLayout.node.addChild(o),o.active=!0}},t.prototype.loadLoading=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Promise.all([r.default.instance.loadResAsync("json/DefaultConfig",cc.JsonAsset),r.default.instance.loadResAsync("json/iTemsConfig",cc.JsonAsset)])];case 1:return e.sent(),d.DefaultConfig.json2Config(cc.loader.getRes("json/DefaultConfig",cc.JsonAsset).json),g.ITemsConfig.json2Config(cc.loader.getRes("json/iTemsConfig",cc.JsonAsset).json),[2]}})})},t.prototype.receive=function(){u.AppDownloadModel.instance.startRewardItems(),c.default.instance.closeView(h.default.gameView.ZhuanDuaJiangli,null),this.node.destroy(),m.UIHelper.showTip("\u5956\u52b1\u5df2\u53d1\u653e\uff0c\u8bf7\u7559\u610f\u60a8\u7684\u90ae\u4ef6",2)},o([y(cc.Layout)],t.prototype,"itemLayout",void 0),o([y(cc.Node)],t.prototype,"itemNode",void 0),t=o([v],t)}(l.default);i.default=b,cc._RF.pop()},{"../../../engine/ResourcesManager":"ResourcesManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../model/AppDownloadModel":"AppDownloadModel","../../model/ItemInfoModel":"ItemInfoModel","../../utils/UIHelper":"UIHelper","../ItemPrefab":"ItemPrefab"}],ZoneModel:[function(e,t,i){"use strict";cc._RF.push(t,"2c10eQxwmtN97c7eII1I5Zw","ZoneModel"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.tuijian=1]="tuijian",e[e.huobao=2]="huobao",e[e.baoman=3]="baoman",e[e.weihu=4]="weihu",e[e.guanfu=5]="guanfu"}(i.ZoneStatus||(i.ZoneStatus={}));var n=function(){function e(){this.index=0,this.isRecommend=!1,this.isLast=!1}return e.json2ZoneModel=function(t){this.zoneModelList=[],this.my_server=[];for(var i=t.server_list,n=t.my_server,o=0;o<n.length;o++){var a=new e;a.server_id=n[o].server_id,a.create_time=1e3*n[o].create_time,a.server_ip=n[o].server_ip,a.server_name=n[o].server_name,a.server_port=n[o].server_port,a.server_status=n[o].server_status,a.unique_id=n[o].unique_id,a.android_switch=n[o].android_switch,a.ios_switch=n[o].ios_switch,a.isRecommend=Boolean(n[o].recommend),a.recommend=n[o].recommend,this.my_server.push(a)}this.my_server.reverse();for(var s=0;s<i.length;s++){var r=new e;r.server_id=i[s].server_id,r.create_time=1e3*i[s].create_time,r.server_ip=i[s].server_ip,r.server_name=i[s].server_name,r.server_port=i[s].server_port,r.server_status=i[s].server_status,r.unique_id=i[s].unique_id,r.android_switch=i[s].android_switch,r.ios_switch=i[s].ios_switch,r.isRecommend=Boolean(i[s].recommend),r.recommend=i[s].recommend,this.zoneModelList.push(r)}this.zoneModelList.sort(function(e,t){return e.server_id>1e7&&t.server_id>1e7?e.server_id-t.server_id:e.server_id<1e7&&t.server_id<1e7?e.server_id-t.server_id:t.server_id-e.server_id}),this.zoneModelList.length>0&&(this.zoneModelList[this.zoneModelList.length-1].isLast=!0),this.zoneOffestList=[];for(o=0;o<this.zoneModelList.length;o++){this.zoneModelList[o].index=o+1;var c=Math.floor(o/this.zone_offest);c<0&&(c=0),this.zoneOffestList[c]||(this.zoneOffestList[c]=[]),this.zoneOffestList[c].push(this.zoneModelList[o])}this.zoneOffestList.reverse();for(o=0;o<this.zoneOffestList.length;o++)this.zoneOffestList[o].reverse()},e.getZoneListByTab=function(e,t){for(var i=[],n=0;n<this.zoneModelList.length;n++){var o=this.zoneModelList[n];o.server_id>=e&&o.server_id<=t&&i.push(o)}return i},e.zone_offest=10,e.zoneModelList=[],e.my_server=[],e.zoneOffestList=[],e}();i.ZoneModel=n,cc._RF.pop()},{}],ZoneServerView:[function(e,t,i){"use strict";cc._RF.push(t,"887fa3POT5NV6S5wKZ3cuek","ZoneServerView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/GlobalConfig"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/ColorConfig"),l=e("../config/GameConfig"),d=e("../config/ViewConfig"),f=e("../config/WordConfig"),g=e("../GameController"),h=e("../model/AnnouncementModel"),u=e("../model/RoleInfoModel"),p=e("../model/ZoneModel"),m=e("../network/HttpHelper"),C=e("../network/SocketClient"),_=e("../sdk/FeiYouSdkManager"),v=e("../sdk/LongRuiManager"),y=e("../sdk/LoongCheerManager"),b=e("../sdk/SdkHelper"),I=e("../utils/MusicHelper"),M=e("./PublicTipView"),w=cc._decorator,k=w.ccclass,S=w.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zoneViewSpriteList=[],t}return n(t,e),t.prototype.onShow=function(){this.btnSwitchAccount=this.findChild(this.node,"btnSwitchAccount"),this.btnSwitchAccount&&(this.btnSwitchAccount.active=!1),this.but_shilingtishi=this.findChild(this.node,"but_shilingtishi"),this.onAddEvent(this.but_shilingtishi,this.onShowShilingtishi),this.onAddEvent(this.findChild(this.node,"but_gonggao"),this.onShowGG.bind(this,!0)),this.view=this.findChild(this.node,"view"),this.myList=this.findChild(this.view,"line/view/content/my"),this.listItem=this.findChild(this.view,"line/view/content/item"),this.listItem.active=!1,this.serverItem=this.findChild(this.view,"server/view/content/item"),this.serverItem.active=!1,this.serverList=[],this.listNode=[],this.myList.on(cc.Node.EventType.TOUCH_END,this.onClickMyList,this),this.currIndex=0,this.initList(),l.GameConfig.sdkType==l.SdkType.Xiaotun&&this.onShowGG()},t.prototype.onHide=function(){},t.prototype.onShowShilingtishi=function(){I.MusicHelper.play_click(),s.default.instance.createView(d.default.gameView.PublicTipView,null,M.RuleType.TYPE_SHILINGNIANLING)},t.prototype.onShowGG=function(e){void 0===e&&(e=!0),m.default.getNotify(function(t){if(t&&t.data){s.default.instance.createView(d.default.gameView.AnnouncementView,null,t.data,e);var i=JSON.stringify(t.data);h.default.instance.checkContent(i)}})},t.prototype.initList=function(){for(var e=0;e<p.ZoneModel.zoneOffestList.length;e++){var t=cc.instantiate(this.listItem);t.parent=this.listItem.parent,t.name=e+"",t.active=!0,t.on(cc.Node.EventType.TOUCH_END,this.onSelectList.bind(this,e),this);p.ZoneModel.zoneOffestList[e];var i=p.ZoneModel.zoneOffestList.length-e-1;t.getChildByName("name").getComponent(cc.Label).string=i*p.ZoneModel.zone_offest+1+"-"+(i+1)*p.ZoneModel.zone_offest+" \u670d",t.getChildByName("name").color=c.ColorConfig.commonTabSelectNo,this.listNode.push(t)}p.ZoneModel.my_server.length>0?(this.myList.active=!0,this.myList.getChildByName("name").color=c.ColorConfig.CommonTabSelected,this.initServerList(!0)):(this.myList.active=!1,this.onSelectOneZoneList(0))},t.prototype.initServerList=function(e){var t;if(p.ZoneModel.my_server.length>0?this.myList.active=!0:this.myList.active=!1,t=e?p.ZoneModel.my_server:p.ZoneModel.zoneOffestList[this.currIndex],this.serverList){for(var i=0;i<this.serverList.length;i++)this.serverList[i].destroy();this.serverList=[]}if(t)for(i=0;i<t.length;i++){var n=t[i],o=cc.instantiate(this.serverItem);o.parent=this.serverItem.parent,o.active=!0,this.onAddEvent(o,this.onSelectServerList.bind(this,n)),this.serverList.push(o),o.getChildByName("name").getComponent(cc.Label).string=n.server_name,n.server_status==p.ZoneStatus.tuijian?(o.getChildByName("typ").getComponent(cc.Label).string=f.WordConfig.getWord(60510),o.getChildByName("typ").color=c.ColorConfig.hexToColor("#24e71b"),o.getChildByName("name").color=c.ColorConfig.hexToColor("#24e71b"),o.getChildByName("fenggexian").getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[2]):n.server_status==p.ZoneStatus.huobao?(o.getChildByName("typ").getComponent(cc.Label).string=f.WordConfig.getWord(60511),o.getChildByName("name").color=cc.Color.RED,o.getChildByName("typ").color=cc.Color.RED,o.getChildByName("fenggexian").getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[3]):n.server_status==p.ZoneStatus.baoman?(o.getChildByName("typ").getComponent(cc.Label).string=f.WordConfig.getWord(61993),o.getChildByName("name").color=cc.Color.RED,o.getChildByName("typ").color=cc.Color.RED,o.getChildByName("fenggexian").getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[3]):n.server_status==p.ZoneStatus.weihu?(o.getChildByName("typ").getComponent(cc.Label).string=f.WordConfig.getWord(60508),o.getChildByName("typ").color=cc.Color.RED,o.getChildByName("name").color=cc.Color.GRAY,o.getChildByName("fenggexian").getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[3]):o.active=!1}else s.default.instance.createView(d.default.gameView.DialogCheck,null,f.WordConfig.getWord(60512),function(){g.default.instance.restartGame()})},t.prototype.onSelectList=function(e){I.MusicHelper.play_click(),this.onSelectOneZoneList(e)},t.prototype.onSelectOneZoneList=function(e){this.myList.getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[1],this.currIndex=e;for(var t=0;t<this.listNode.length;t++)t==this.currIndex?(this.listNode[t].getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[0],this.listNode[t].getChildByName("name").color=c.ColorConfig.CommonTabSelected):(this.listNode[t].getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[1],this.listNode[t].getChildByName("name").color=c.ColorConfig.commonTabSelectNo);this.myList.getChildByName("name").color=c.ColorConfig.commonTabSelectNo,this.initServerList(!1)},t.prototype.onClickMyList=function(){I.MusicHelper.play_click(),this.myList.getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[0];for(var e=0;e<this.listNode.length;e++)this.listNode[e].getComponent(cc.Sprite).spriteFrame=this.zoneViewSpriteList[1],this.listNode[e].getChildByName("name").color=c.ColorConfig.commonTabSelectNo;this.myList.getChildByName("name").color=c.ColorConfig.CommonTabSelected,this.initServerList(!0)},t.prototype.onSelectServerList=function(e){var t=this;I.MusicHelper.play_click(),p.ZoneModel.nowZoneInfoModel=e;var i=!1;i=l.GameConfig.sdkType==l.SdkType.Xiaotun&&l.GameConfig.environment==l.EnvironmentType.Online||!a.GlobalConfig.isIPAddress(e.server_ip),l.GameConfig.socketUrl=i?"wss://"+e.server_ip+":"+e.server_port:"ws://"+e.server_ip+":"+e.server_port,u.default.initRoleInfoByLocalStorage(),l.GameConfig.connectServer?this.isClickLogin||(this.isClickLogin=!0,this.scheduleOnce(function(){t.isClickLogin=!1},3),cc.sys.isNative?b.default.isAndroid()?l.GameConfig.sdkType==l.SdkType.Feiyou?C.default.login(2,_.FeiYouSdkManager.user_id):l.GameConfig.sdkType==l.SdkType.LoongCheer?C.default.login(2,y.LoongCheerManager.userId):l.GameConfig.sdkType==l.SdkType.LongRui?C.default.login(2,v.LongRuiManager.userId):C.default.login(2):b.default.isIos()?l.GameConfig.sdkType==l.SdkType.Feiyou?C.default.login(2,_.FeiYouSdkManager.user_id):C.default.login(2):s.default.instance.createView(d.default.gameView.TempView):cc.sys.isBrowser?(window.location.ancestorOrigins.length,C.default.login(2)):C.default.login(2)):g.default.instance.gotoLogin()},o([S({type:[cc.SpriteFrame]})],t.prototype,"zoneViewSpriteList",void 0),t=o([k],t)}(r.default);i.default=P,cc._RF.pop()},{"../../engine/GlobalConfig":"GlobalConfig","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../GameController":"GameController","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/AnnouncementModel":"AnnouncementModel","../model/RoleInfoModel":"RoleInfoModel","../model/ZoneModel":"ZoneModel","../network/HttpHelper":"HttpHelper","../network/SocketClient":"SocketClient","../sdk/FeiYouSdkManager":"FeiYouSdkManager","../sdk/LongRuiManager":"LongRuiManager","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/SdkHelper":"SdkHelper","../utils/MusicHelper":"MusicHelper","./PublicTipView":"PublicTipView"}],ZuiQiangFangYuGiftView:[function(e,t,i){"use strict";cc._RF.push(t,"dacb2kW3stPBKLY/f/gmYco","ZuiQiangFangYuGiftView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ChongZhiConfig"),r=e("../../prefab/ItemPrefab"),c=e("../../model/ItemInfoModel"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../../engine/DateUtil"),g=e("../../config/EquipConfig"),h=e("../../../engine/UIManager"),u=e("../../config/ViewConfig"),p=e("../../network/SocketClient"),m=e("../../../engine/EventManager"),C=e("../../event/CommonEvent"),_=e("../../model/ServerTime"),v=e("../../model/RoleInfoModel"),y=e("../../config/WordConfig"),b=e("../../model/FangShiModel"),I=e("../../config/FangShopConfig"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=20,t.getItemTypeList=["D000004","I3905","I3906","I4001"],t.shopId=0,t.isClicked=!1,t.zhanshi=0,t}return n(t,e),t.prototype.onInitChild=function(e){e instanceof c.default?(this.model=e,this.zhanshi=e.isExhibition?e.isExhibition:0):this.shopId=e},t.prototype.onShow=function(){var e=this,t=this.node.getChildByName("btnBuy");this.btnBuy=t,this.hadBuy=this.node.getChildByName("hadBuy"),this.hadBuy.active=!1,this.onAddEvent(t,this.onClickBuy.bind(this)),this.txtLeftTime=this.node.getChildByName("txtLeftTime").getComponent(cc.Label),this.findChild(this.node,"img_shenyushjian").active=!0,this.txtLeftTime.node.active=!0,this.findChild(this.node,"yuanjia").active=!0,this.findChild(this.node,"zhe").active=!0,0==this.shopId?(m.EventManager.instance.on(C.CommonEvent.Event_ChargeActivityOk,this.onChargeOk,this),this.chongzhiConfig=s.ChongZhiConfig.getConfigById(501),this.leftTime=(this.model.end_time-_.ServerTime.getServerTime())/1e3,this.leftTime<=0&&(this.leftTime=0),this.schedule(function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&e.closeView()),e.refresh()},1),this.refresh(),this.findChild(this.node,"yuanjia/2/value").getComponent(cc.Label).string=this.chongzhiConfig.getDefaultMoneyStr()+"",this.findChild(this.node,"zhe/sellCut").getComponent(cc.Label).string=Math.floor(this.chongzhiConfig.money/this.chongzhiConfig.o_price*10)+""):(this.findChild(this.node,"yuanjia").active=!1,this.findChild(this.node,"zhe").active=!1,m.EventManager.instance.on(C.CommonEvent.Event_ChargeActivityOk,this.refreshByServer,this),this.findChild(this.node,"img_shenyushjian").active=!1,this.txtLeftTime.node.active=!1,I.default.getConfigById(this.shopId),this.chongzhiConfig=s.ChongZhiConfig.getConfigById(I.default.getConfigById(this.shopId).charge),this.refreshByServer());for(var i=0;i<this.getItemTypeList.length;i++){var n=this.node.getChildByName("ItemPrefab"+i),o=this.getItemTypeList[i],a=void 0;if(0==i)a=c.default.create(l.GameConst.ITEM_KIND.EQUIP,o,1,l.GameConst.QUALITY.ORANGE),this.onAddEvent(n,this.onClickItemPrefab.bind(this,a));else{var f=d.ITemsConfig.getITemsConfigById(o);a=c.default.create(l.GameConst.ITEM_KIND.ITEM,o,this.chongzhiConfig.item[o],f.quality)}n.getComponent(r.default).init(a,!0)}this.findChild(this.node,"btnBuy/txtCost").getComponent(cc.Label).string=this.chongzhiConfig.getMoneyStr()+y.WordConfig.getWord(60569),this.btnBuy.active=0==this.zhanshi;var g=this.getChild(this.node,"btnZhanShi");g.active=1==this.zhanshi,g.on(cc.Node.EventType.TOUCH_END,function(){e.model.itemname=y.WordConfig.getWord(61281),m.EventManager.instance.dispatch(C.CommonEvent.Event_ADD_ZHANSHI,e.model),e.closeView()})},t.prototype.onClickItemPrefab=function(e){e=c.default.createDingZhiEquip(e.itemType),h.default.instance.createView(u.default.gameView.equipInfo,null,e)},t.prototype.onChargeOk=function(e){e==this.chongzhiConfig.id&&(this.hadBuy.active=!0,this.btnBuy.active=!1,this.leftTime=0,this.refresh())},t.prototype.onClickBuy=function(){var e=this;if(!this.isClicked){this.isClicked=!0,this.scheduleOnce(function(){e.isClicked=!1},2);var t=new Array;for(var i in this.chongzhiConfig.item){var n=g.EquipConfig.getEquipConfigById(i);if(n){var o=c.AddItemParamStruct.create(v.default.instance,n.kind,n.id,1);t.push(o)}else{var a=d.ITemsConfig.getITemsConfigById(i);t.push(c.AddItemParamStruct.create(v.default.instance,a.kind,a.id,this.chongzhiConfig.item[i],a.quality))}}v.default.instance.tryAddItemsToBag(t)?(0==this.shopId?p.default.req_charge(this.chongzhiConfig.id):p.default.s_seq_fangbuy(this.shopId,1),this.closeView()):y.WordConfig.showWord(60001)}},t.prototype.refreshByServer=function(){b.default.getNumById(this.shopId)>0?(this.hadBuy.active=!1,this.btnBuy.active=!0):(this.hadBuy.active=!0,this.btnBuy.active=!1)},t.prototype.refresh=function(){this.leftTime<=0?this.txtLeftTime.string="--":this.txtLeftTime.string=f.default.formatLeftTime2(1e3*this.leftTime)},t=o([w],t)}(a.default));i.default=k,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/EquipConfig":"EquipConfig","../../config/FangShopConfig":"FangShopConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/FangShiModel":"FangShiModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],ZuiQiangJiNengGiftView:[function(e,t,i){"use strict";cc._RF.push(t,"06ddcNMXApBrL0er5/6jkFu","ZuiQiangJiNengGiftView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ChongZhiConfig"),r=e("../../prefab/ItemPrefab"),c=e("../../model/ItemInfoModel"),l=e("../../config/GameConst"),d=e("../../config/ITemsConfig"),f=e("../../../engine/DateUtil"),g=e("../../config/EquipConfig"),h=e("../../../engine/UIManager"),u=e("../../config/ViewConfig"),p=e("../../network/SocketClient"),m=e("../../../engine/EventManager"),C=e("../../event/CommonEvent"),_=e("../../model/ServerTime"),v=e("../../model/RoleInfoModel"),y=e("../../config/WordConfig"),b=e("../../model/FangShiModel"),I=e("../../config/FangShopConfig"),M=cc._decorator,w=M.ccclass,k=(M.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=20,t.zhanshi=0,t.getItemTypeList=["D000005","I3903","I3007","I8001","I8002","I8005","I8009","I8012"],t.shopId=0,t.isClicked=!1,t}return n(t,e),t.prototype.onInitChild=function(e){e instanceof c.default?(this.model=e,this.zhanshi=e.isExhibition?e.isExhibition:0):this.shopId=e,this.scrollView=this.findChild(this.node,"ScrollView").getComponent(cc.ScrollView),this.itemPrefab=this.findChild(this.node,"ItemPrefab0")},t.prototype.onShow=function(){var e=this;this.chongzhiConfig=s.ChongZhiConfig.getConfigById(502),this.txtLeftTime=this.node.getChildByName("txtLeftTime").getComponent(cc.Label),this.findChild(this.node,"img_shenyushjian").active=!0,this.txtLeftTime.node.active=!0,this.findChild(this.node,"yuanjia").active=!0,this.findChild(this.node,"zhe").active=!0;var t=this.node.getChildByName("btnBuy");this.btnBuy=t,this.btnBuy.getChildByName("txtCost").getComponent(cc.Label).string=this.chongzhiConfig.money+"",this.hadBuy=this.node.getChildByName("hadBuy"),this.hadBuy.active=!1,this.onAddEvent(t,this.onClickBuy.bind(this)),0==this.shopId?(m.EventManager.instance.on(C.CommonEvent.Event_ChargeActivityOk,this.onChargeOk,this),this.leftTime=(this.model.end_time-_.ServerTime.getServerTime())/1e3,this.leftTime<=0&&(this.leftTime=0),this.schedule(function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&e.closeView()),e.refresh()},1),this.refresh(),this.findChild(this.node,"yuanjia/2/value").getComponent(cc.Label).string=this.chongzhiConfig.getDefaultMoneyStr()+"",this.findChild(this.node,"zhe/sellCut").getComponent(cc.Label).string=Math.floor(this.chongzhiConfig.money/this.chongzhiConfig.o_price*10)+""):(this.findChild(this.node,"yuanjia").active=!1,this.findChild(this.node,"zhe").active=!1,m.EventManager.instance.on(C.CommonEvent.Event_ChargeActivityOk,this.refreshByServer,this),this.findChild(this.node,"img_shenyushjian").active=!1,this.txtLeftTime.node.active=!1,I.default.getConfigById(this.shopId),this.chongzhiConfig=s.ChongZhiConfig.getConfigById(I.default.getConfigById(this.shopId).charge),this.refreshByServer()),this.scrollView.content.removeAllChildren();for(var i=0;i<this.getItemTypeList.length;i++){var n=cc.instantiate(this.itemPrefab);n.active=!0;var o=this.getItemTypeList[i],a=void 0;if(0==i)a=c.default.createFuWenEquip(o),this.onAddEvent(n,this.onClickItemPrefab.bind(this,a)),n.getChildByName("fontclib_shenzhuang_biaoshi").active=!0;else{var f=d.ITemsConfig.getITemsConfigById(o);a=c.default.create(l.GameConst.ITEM_KIND.ITEM,o,this.chongzhiConfig.item[o],f.quality),n.getChildByName("fontclib_shenzhuang_biaoshi").active=!1}n.getComponent(r.default).init(a,!0),this.scrollView.content.addChild(n)}this.findChild(this.node,"btnBuy/txtCost").getComponent(cc.Label).string=this.chongzhiConfig.getMoneyStr()+y.WordConfig.getWord(60569),this.btnBuy.active=0==this.zhanshi;var g=this.getChild(this.node,"btnZhanShi");g.active=1==this.zhanshi,g.on(cc.Node.EventType.TOUCH_END,function(){e.model.itemname=y.WordConfig.getWord(61280),m.EventManager.instance.dispatch(C.CommonEvent.Event_ADD_ZHANSHI,e.model),e.closeView()})},t.prototype.onClickItemPrefab=function(e){h.default.instance.createView(u.default.gameView.equipInfo,null,e)},t.prototype.onChargeOk=function(e){e==this.chongzhiConfig.id&&(this.hadBuy.active=!0,this.btnBuy.active=!1,this.leftTime=0,this.refresh())},t.prototype.onClickBuy=function(){var e=this;if(!this.isClicked){this.isClicked=!0,this.scheduleOnce(function(){e.isClicked=!1},2);var t=new Array;for(var i in this.chongzhiConfig.item){var n=g.EquipConfig.getEquipConfigById(i);if(n){var o=c.AddItemParamStruct.create(v.default.instance,n.kind,n.id,1);t.push(o)}else{var a=d.ITemsConfig.getITemsConfigById(i);t.push(c.AddItemParamStruct.create(v.default.instance,a.kind,a.id,this.chongzhiConfig.item[i],a.quality))}}v.default.instance.tryAddItemsToBag(t)?(0==this.shopId?p.default.req_charge(this.chongzhiConfig.id):p.default.s_seq_fangbuy(this.shopId,1),this.closeView()):y.WordConfig.showWord(60001)}},t.prototype.refreshByServer=function(){b.default.getNumById(this.shopId)>0?(this.hadBuy.active=!1,this.btnBuy.active=!0):(this.hadBuy.active=!0,this.btnBuy.active=!1)},t.prototype.refresh=function(){this.leftTime<=0?this.txtLeftTime.string="--":this.txtLeftTime.string=f.default.formatLeftTime(1e3*this.leftTime)},t=o([w],t)}(a.default));i.default=k,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/EquipConfig":"EquipConfig","../../config/FangShopConfig":"FangShopConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/FangShiModel":"FangShiModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],ZuiQiangQunGongGiftView:[function(e,t,i){"use strict";cc._RF.push(t,"1ebb8fx/VNJaqznugfqCGMb","ZuiQiangQunGongGiftView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/UIManager"),c=e("../../../engine/ViewBase"),l=e("../../config/ChongZhiConfig"),d=e("../../config/EquipConfig"),f=e("../../config/FangShopConfig"),g=e("../../config/GameConst"),h=e("../../config/ITemsConfig"),u=e("../../config/ViewConfig"),p=e("../../config/WordConfig"),m=e("../../event/CommonEvent"),C=e("../../model/FangShiModel"),_=e("../../model/ItemInfoModel"),v=e("../../model/RoleInfoModel"),y=e("../../model/ServerTime"),b=e("../../network/HttpHelper"),I=e("../../network/SocketClient"),M=e("../../prefab/ItemPrefab"),w=cc._decorator,k=w.ccclass,S=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftTime=20,t.shopId=0,t.zhanshi=0,t.isClicked=!1,t}return n(t,e),t.prototype.onInitChild=function(e){if(e instanceof _.default){this.model=e;var t=h.ITemsConfig.getITemsConfigById(this.model.itemType).magic_value,i=void 0;if(t)for(var n=0;n<t.length;n++)for(var o in t[n])Number(o)==v.default.instance.occupation&&(i=t[n][o]);this.chongzhiConfig=l.ChongZhiConfig.getConfigById(i),this.zhanshi=e.isExhibition?e.isExhibition:0}else{this.shopId=e;var a=f.default.getConfigById(this.shopId);a?this.chongzhiConfig=l.ChongZhiConfig.getConfigById(a.charge):b.default.sendBugLog("ZuiQiangQunGongGiftView.onInitChild error this.shopId="+this.shopId)}this.content=this.findChild(this.node,"content"),this.itemPrefab=this.findChild(this.node,"ItemPrefab0")},t.prototype.onShow=function(){var e=this;this.txtLeftTime=this.node.getChildByName("txtLeftTime").getComponent(cc.Label),this.findChild(this.node,"img_shenyushjian").active=!0,this.txtLeftTime.node.active=!0,this.findChild(this.node,"yuanjia").active=!0,this.findChild(this.node,"zhe").active=!0;var t=this.node.getChildByName("btnBuy");this.btnBuy=t;var i=this.chongzhiConfig?this.chongzhiConfig.money:"";this.btnBuy.getChildByName("txtCost").getComponent(cc.Label).string=i+"",this.hadBuy=this.node.getChildByName("hadBuy"),this.hadBuy.active=!1,this.onAddEvent(t,this.onClickBuy.bind(this)),0==this.shopId?(s.EventManager.instance.on(m.CommonEvent.Event_ChargeActivityOk,this.onChargeOk,this),this.leftTime=(this.model.end_time-y.ServerTime.getServerTime())/1e3,this.leftTime<=0&&(this.leftTime=0),this.schedule(function(){e.leftTime>0&&(e.leftTime--,e.leftTime<=0&&e.closeView()),e.refresh()},1),this.refresh(),this.findChild(this.node,"yuanjia/2/value").getComponent(cc.Label).string=this.chongzhiConfig.getDefaultMoneyStr()+"",this.findChild(this.node,"zhe/sellCut").getComponent(cc.Label).string=Math.floor(this.chongzhiConfig.money/this.chongzhiConfig.o_price*10)+""):(this.findChild(this.node,"yuanjia").active=!1,this.findChild(this.node,"zhe").active=!1,s.EventManager.instance.on(m.CommonEvent.Event_ChargeActivityOk,this.refreshByServer,this),this.findChild(this.node,"img_shenyushjian").active=!1,this.txtLeftTime.node.active=!1,f.default.getConfigById(this.shopId),this.refreshByServer()),this.content.removeAllChildren();var n=[];for(var o in this.chongzhiConfig.item)n.push(o);for(o=0;o<n.length;o++){(l=cc.instantiate(this.itemPrefab)).active=!0;var a=n[o],r=void 0;if(d.EquipConfig.getEquipConfigById(a))r=_.default.createFuWenEquip(a),this.onAddEvent(l,this.onClickItemPrefab.bind(this,r)),l.getChildByName("fontclib_shenzhuang_biaoshi").active=!0;else{var c=h.ITemsConfig.getITemsConfigById(a);r=_.default.create(g.GameConst.ITEM_KIND.ITEM,a,this.chongzhiConfig.item[a],c.quality),l.getChildByName("fontclib_shenzhuang_biaoshi").active=!1}l.getComponent(M.default).init(r,!0),this.content.addChild(l)}for(var o in this.chongzhiConfig.resource){var l;(l=cc.instantiate(this.itemPrefab)).active=!0,l.getComponent(M.default).initResource(parseInt(o),this.chongzhiConfig.resource[o]),l.getChildByName("fontclib_shenzhuang_biaoshi").active=!1,this.content.addChild(l)}this.findChild(this.node,"btnBuy/txtCost").getComponent(cc.Label).string=this.chongzhiConfig.getMoneyStr()+p.WordConfig.getWord(60569),this.btnBuy.active=0==this.zhanshi;var u=this.getChild(this.node,"btnZhanShi");u.active=1==this.zhanshi,u.on(cc.Node.EventType.TOUCH_END,function(){e.model.itemname=p.WordConfig.getWord(61279),s.EventManager.instance.dispatch(m.CommonEvent.Event_ADD_ZHANSHI,e.model),e.closeView()})},t.prototype.onClickItemPrefab=function(e){r.default.instance.createView(u.default.gameView.equipInfo,null,e)},t.prototype.onChargeOk=function(e){e==this.chongzhiConfig.id&&(this.hadBuy.active=!0,this.btnBuy.active=!1,this.leftTime=0,this.refresh())},t.prototype.onClickBuy=function(){var e=this;if(!this.isClicked){this.isClicked=!0,this.scheduleOnce(function(){e.isClicked=!1},2);var t=new Array;for(var i in this.chongzhiConfig.item){var n=d.EquipConfig.getEquipConfigById(i);if(n){var o=_.AddItemParamStruct.create(v.default.instance,n.kind,n.id,1);t.push(o)}else{var a=h.ITemsConfig.getITemsConfigById(i);t.push(_.AddItemParamStruct.create(v.default.instance,a.kind,a.id,this.chongzhiConfig.item[i],a.quality))}}v.default.instance.tryAddItemsToBag(t)?(0==this.shopId?I.default.req_charge(this.chongzhiConfig.id):I.default.s_seq_fangbuy(this.shopId,1),this.closeView()):p.WordConfig.showWord(60001)}},t.prototype.refreshByServer=function(){C.default.getNumById(this.shopId)>0?(this.hadBuy.active=!1,this.btnBuy.active=!0):(this.hadBuy.active=!0,this.btnBuy.active=!1)},t.prototype.refresh=function(){this.leftTime<=0?this.txtLeftTime.string="--":this.txtLeftTime.string=a.default.formatLeftTime2(1e3*this.leftTime)},t=o([k],t)}(c.default));i.default=S,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ChongZhiConfig":"ChongZhiConfig","../../config/EquipConfig":"EquipConfig","../../config/FangShopConfig":"FangShopConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/FangShiModel":"FangShiModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ServerTime":"ServerTime","../../network/HttpHelper":"HttpHelper","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],buyItem:[function(e,t,i){"use strict";cc._RF.push(t,"b7d7bcONDhJs4SneRGHVTW6","buyItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/UIManager"),r=e("../../engine/ViewBase"),c=e("../config/ColorConfig"),l=e("../config/GameConfig"),d=e("../config/GameConst"),f=e("../config/ViewConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../miniGameTools/tttool"),p=e("../model/AdModel"),m=e("../model/ItemInfoModel"),C=e("../model/PrivilegeModel"),_=e("../model/RoleInfoModel"),v=e("../network/SocketClient"),y=e("../sdk/LoongCheerManager"),b=e("../sdk/SdkHandler"),I=e("../sdk/SdkHelper"),M=e("../sdk/SdkManager"),w=function(){return function(){this.amount=3,this.type=1}}();i.buyItemParams=w;var k=cc._decorator,S=k.ccclass,P=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={itemId:"",desc:"",amount:3,type:1},t}return n(t,e),t.prototype.onInitChild=function(e){this.params=e},t.prototype.onShow=function(){a.EventManager.instance.on(h.CommonEvent.Event_ad_end,this.onAdEnd,this),this.setTopUI(),this.btnFree=this.findChild(this.node,"btnNode/btnFree"),this.btnBuy=this.findChild(this.node,"btnNode/btnBuy");var e=this.getChild(this.node,"btnClose");this.onAddEvent(this.btnFree,this.onAd.bind(this)),this.onAddEvent(this.btnBuy,this.onGold.bind(this)),this.onAddEvent(e,this.onClose.bind(this)),this.params.itemId==d.ItemId.ANTIQUE?this.getChild(this.node,"btnNode/btnFree/nums",cc.Label).string=p.default.getAdLostTimes(p.Ad_Type.Antique)+"":(this.btnFree.active=!1,this.btnBuy.x=0),l.GameConfig.isOpenAd||(this.btnFree.active=!1,this.btnBuy.x=0),this.initLbl(),this.refreshInfo()},t.prototype.refreshInfo=function(){C.default.hadFreePrivilege()&&(this.btnFree.getChildByName("button_mianfeihuoqu_gkgg").active=!1)},t.prototype.initLbl=function(){var e=this.getChild(this.node,"btnNode/btnBuy/nums",cc.Label),t=this.getChild(this.node,"pnlItem"),i=this.getChild(this.node,"pnlItem/itemName",cc.Label),n=this.getChild(this.node,"pnlItem/itemAmount",cc.Label),o=m.default.getConfigById(this.params.itemId),a=this.getChild(this.node,"itemDesc",cc.Label);this.config=o,this.gold=o.gem*this.params.amount,t.color=i.node.color=c.ColorConfig.getQualityColor(o.quality),i.string=""+o.name,n.string="+"+this.params.amount,a.string=""+this.params.desc,e.string=""+this.gold},t.prototype.onAd=function(){_.default.instance.getAddItemMaxNum(m.AddItemParamStruct.create(_.default.instance,this.config.kind,this.config.id,3,this.config.quality,!0))<3?g.WordConfig.showWord(60001):p.default.getAdLostTimes(p.Ad_Type.Antique)>0?C.default.hadFreePrivilege()?this.onAdEnd():l.GameConfig.isWechat()?u.tttool.OpenAD():l.GameConfig.sdkType==l.SdkType.BingNiao?I.default.sdkAd():M.default.sdkAd(b.AdType.videoAd,y.AdPosId.freeantique):g.WordConfig.showWord(60308)},t.prototype.onAdEnd=function(){p.default.getAdLostTimes(p.Ad_Type.Antique)>0&&l.GameConfig.connectServer&&(I.default.sdkCustomAction(26,this.params.amount),v.default.req_advertisement_info(p.Ad_Type.Antique),this.closeView())},t.prototype.onGold=function(){_.default.instance.getAddItemMaxNum(m.AddItemParamStruct.create(_.default.instance,this.config.kind,this.config.id,this.params.amount,this.config.quality,!0))<this.params.amount?g.WordConfig.showWord(60001):_.default.instance.getGold()>=this.gold?l.GameConfig.connectServer&&(1==this.params.type?I.default.sdkCustomAction(7,this.params.amount):I.default.sdkCustomAction(8,this.params.amount),I.default.sdkCustomAction(25,this.params.amount),v.default.req_buy(3,1,this.params.amount,2,1,this.params.itemId),this.onClose()):g.WordConfig.showWord(60115)},t.prototype.onClose=function(){a.EventManager.instance.dispatch(d.EVENT_NAME.REFRESH_REFINE),s.default.instance.closeView(f.default.gameView.buyItem)},t=o([S],t)}(r.default));i.default=P,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ColorConfig":"ColorConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../miniGameTools/tttool":"tttool","../model/AdModel":"AdModel","../model/ItemInfoModel":"ItemInfoModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager"}],buyMoney:[function(e,t,i){"use strict";cc._RF.push(t,"50958xB4K5OQLuGF9CptpwM","buyMoney");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/ViewBase"),c=e("../config/DefaultConfig"),l=e("../config/GameConfig"),d=e("../config/GameConst"),f=e("../config/GoldsConfig"),g=e("../config/WordConfig"),h=e("../event/CommonEvent"),u=e("../miniGameTools/tttool"),p=e("../model/AdModel"),m=e("../model/PrivilegeModel"),C=e("../model/RoleInfoModel"),_=e("../network/SocketClient"),v=e("../sdk/LoongCheerManager"),y=e("../sdk/SdkHandler"),b=e("../sdk/SdkHelper"),I=e("../sdk/SdkManager"),M=e("../utils/UIHelper"),w=cc._decorator,k=w.ccclass,S=(w.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.multiNum=10,t}return n(t,e),t.prototype.onShow=function(){a.EventManager.instance.on(h.CommonEvent.Event_ad_end,this.onAdEnd,this),a.EventManager.instance.on(h.CommonEvent.Event_AdInfoUpdate,this.refreshInfo,this),this.setTopUI();var e=this.getChild(this.node,"pnlBtn/btnFree"),t=this.getChild(this.node,"pnlBtn/btnBuy"),i=this.getChild(this.node,"pnlBtn/btnBuyMulti");this.onAddEvent(e,this.onAd.bind(this)),this.onAddEvent(t,this.onGold.bind(this)),this.onAddEvent(i,this.onClickMultiGold.bind(this)),l.GameConfig.isOpenAd||(e.active=!1),this.refreshInfo()},t.prototype.refreshInfo=function(){(this.getChild(this.node,"pnlBtn/btnFree/nums",cc.Label).string=p.default.getAdLostTimes(p.Ad_Type.Coin)+"",m.default.hadFreePrivilege())&&(this.node.getChildByName("pnlBtn").getChildByName("btnFree").getChildByName("button_mianfeihuoqu_gkgg").active=!1);this.initData();this.getChild(this.node,"pnlBtn/btnFree/nums",cc.Label);var e=this.getChild(this.node,"pnlBtn/btnBuy/nums",cc.Label),t=this.getChild(this.node,"pnlBtn/btnBuyMulti/nums",cc.Label),i=this.getChild(this.node,"pnlBtn/btnFree/icon/lblCoin",cc.Label);this.getChild(this.node,"pnlBtn/btnFree/nums",cc.Label).string=p.default.getAdLostTimes(p.Ad_Type.Coin)+"",e.string=""+this.gold,t.string=this.gold*this.multiNum+"",i.string=""+this.coin,this.getChild(this.node,"pnlBtn/btnBuy/icon/txtYuanBaoGet",cc.Label).string=this.coin+"",this.getChild(this.node,"pnlBtn/btnBuyMulti/icon/txtYuanBaoGetMulti",cc.Label).string=M.UIHelper.tranNumber(this.coin*this.multiNum)+""},t.prototype.initData=function(){var e=c.DefaultConfig.getConfigById(15),t=f.GoldsConfig.getConfigById(C.default.instance.level);t?this.coin=t.gold:s.Logger.error("\u6ca1\u6709",C.default.instance.level,"\u7b49\u7ea7\u5bf9\u5e94\u7684\u91d1\u5e01\u914d\u7f6e"),this.gold=this.coin/(1e4/e.value.gem_p)||5,this.times=e.value.times||5},t.prototype.onAd=function(){p.default.getAdLostTimes(p.Ad_Type.Coin)>0?m.default.hadFreePrivilege()?this.onAdEnd():l.GameConfig.isWechat()?u.tttool.OpenAD():l.GameConfig.sdkType==l.SdkType.BingNiao?b.default.sdkAd():I.default.sdkAd(y.AdType.videoAd,v.AdPosId.freegolds):g.WordConfig.showWord(60308)},t.prototype.onAdEnd=function(){p.default.getAdLostTimes(p.Ad_Type.Coin)>0&&(b.default.sdkCustomAction(16,this.coin),_.default.req_advertisement_info(p.Ad_Type.Coin))},t.prototype.onGold=function(){C.default.instance.getGold()>=this.gold?(b.default.sdkCustomAction(10,this.gold),b.default.sdkCustomAction(15,this.coin),l.GameConfig.connectServer?_.default.req_buy(4,d.GameConst.RES_TYPE.COIN,this.coin,2,1,"abc"):(C.default.instance.decGold(this.gold),C.default.instance.addCoin(this.coin)),this.onClose()):M.UIHelper.showTip(g.WordConfig.getWord(60115))},t.prototype.onClickMultiGold=function(){C.default.instance.getGold()>=this.gold*this.multiNum?(b.default.sdkCustomAction(10,this.gold*this.multiNum),b.default.sdkCustomAction(15,this.coin*this.multiNum),l.GameConfig.connectServer?_.default.req_buy(4,d.GameConst.RES_TYPE.COIN,this.coin*this.multiNum,2,1,"abc",this.multiNum):(C.default.instance.decGold(this.gold),C.default.instance.addCoin(this.coin)),this.onClose()):M.UIHelper.showTip(g.WordConfig.getWord(60115))},t.prototype.onClose=function(){},t=o([k],t)}(r.default));i.default=S,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/GameConfig":"GameConfig","../config/GameConst":"GameConst","../config/GoldsConfig":"GoldsConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../miniGameTools/tttool":"tttool","../model/AdModel":"AdModel","../model/PrivilegeModel":"PrivilegeModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../sdk/LoongCheerManager":"LoongCheerManager","../sdk/SdkHandler":"SdkHandler","../sdk/SdkHelper":"SdkHelper","../sdk/SdkManager":"SdkManager","../utils/UIHelper":"UIHelper"}],chatitem:[function(e,t,i){"use strict";cc._RF.push(t,"d8e3b0x28dBT7L2NxV0xi69","chatitem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../model/ItemInfoModel"),s=e("../../engine/UIManager"),r=e("../config/ViewConfig"),c=e("../config/GuildConfig"),l=e("../config/ColorConfig"),d=e("../model/ChatRoomModel"),f=e("../model/GuildModel"),g=e("../config/WordConfig"),h=e("../config/BaGuaEquipConfig"),u=e("../config/GameConst"),p=e("../../engine/EventManager"),m=e("../model/RoleInfoModel"),C=e("../model/MineModel"),_=e("../network/SocketClient"),v=e("../config/AiringConfig"),y=e("../utils/JumpActionUtils"),b=cc._decorator,I=b.ccclass,M=(b.property,function(){function e(){}return e.DEFAULT="default",e.GUILD_TASK="guildtask",e.MINE="mine",e.BROADCAST="broadcast",e}());i.ChatType=M;var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startx=0,t.endx=0,t.heroid=0,t}return n(t,e),t.prototype.start=function(){},t.prototype.init=function(e,t,i){if(void 0===t&&(t=600),void 0===i&&(i=0),this.model=e,this.heroid=i,this.onCloseEvent(),this.max=t,this.model.type==M.GUILD_TASK){p.EventManager.instance.on(this.model.data.id+"_"+this.heroid+"_"+this.model.data.startTime,this.onRefresh,this);var n=c.GuildConfig.GuildTaskConfigMap.get(this.model.data.id),o=this.model.richstr+cc.js.formatStr(g.WordConfig.getWord(61658),n.name)+"  ";this.model.startnum=o.length,this.model.endnum=o.length+g.WordConfig.getWord(61659).length,this.string=o+g.WordConfig.getWord(61659)}else if(this.model.type==M.MINE){p.EventManager.instance.on("mine_"+this.model.data.id,this.onRefreshItem,this,!0),p.EventManager.instance.on("mine_retake_"+this.model.data.id,this.handerMine,this,!0),_.default.s_mine_report_state(this.model.data.id),this.model.startnum=this.model.richstr.length;var a=C.default.getReportById(this.model.data.id);a&&1==a.state?(this.model.endnum=this.model.startnum+g.WordConfig.getWord(61743).length,this.string=this.model.richstr+g.WordConfig.getWord(61743)):(this.model.endnum=this.model.startnum+g.WordConfig.getWord(61744).length,this.string=this.model.richstr+g.WordConfig.getWord(61744))}else if(this.model.type==M.BROADCAST){for(var s=v.AiringConfig.configMap.get(this.model.data.id),r=s.desc,d=0;d<this.model.data.param.length;d++){var f=this.model.data.param[d],h=f[1]>=0?"<color="+l.ColorConfig.getQualityHexColor(f[1])+">"+f[0]+"</color>":f[0];r=r.replace("[#"+(d+1)+"]",h)}var u=(this.model.richstr+r).indexOf("[#0]");u>=0?(this.model.startnum=u,this.model.endnum=u+s.jump_desc.length,this.string=this.model.richstr+r.replace("[#0]",s.jump_desc)):this.string=this.model.richstr+r}this.initPos(),this.onRefresh()},t.prototype.initPos=function(){if(this.model.startnum!=this.model.endnum&&(this.model.startnum>0||this.model.endnum>0)){var e=new cc.Node;e.addComponent(cc.RichText),e.getComponent(cc.RichText).fontSize=18,e.getComponent(cc.RichText).useSystemFont=!0,e.getComponent(cc.RichText).string=this.string.substring(0,this.model.startnum),e._activeInHierarchy=!0,e.getComponent(cc.RichText)._updateRichText(),this.startx=e.width,this.startx>this.max&&(this.startx=this.startx%this.max),e.getComponent(cc.RichText).string=this.string.substring(0,this.model.endnum),e.getComponent(cc.RichText)._updateRichText(),this.endx=e.width,this.endx>this.max&&(this.endx=this.endx%this.max),this.node.on(cc.Node.EventType.TOUCH_END,this.ChatItemClick,this),e.destroy()}},t.prototype.onCloseEvent=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.ChatItemClick,this),p.EventManager.instance.clear(this)},t.prototype.onRefreshItem=function(e){this.mineReportData=e,1==this.mineReportData.state?(this.model.endnum=this.model.startnum+g.WordConfig.getWord(61743).length,this.string=this.model.richstr+g.WordConfig.getWord(61743)):(this.model.endnum=this.model.startnum+g.WordConfig.getWord(61744).length,this.string=this.model.richstr+g.WordConfig.getWord(61744)),this.initPos()},t.prototype.onRefresh=function(){if(this.model.type==M.GUILD_TASK){var e=d.ChatRoomModel.TaskTypeList(this.model.data.id+"_"+this.heroid+"_"+this.model.data.startTime),t=c.GuildConfig.GuildTaskConfigMap.get(this.model.data.id),i=t.type,n=i>6?i-4:Math.ceil(i/2)-1,o=this.model.richstr+cc.js.formatStr(g.WordConfig.getWord(61658),"<color="+f.GuildModel.instance.GuildTaskColor[n]+">"+t.name+"</color>")+"  ";0==e&&f.GuildModel.s_guild_task_help_info(this.model.data.id,this.heroid,this.model.data.startTime),this.string=1==e?o+"<color=#0CFF00><u>"+g.WordConfig.getWord(61659)+"</u></color>":2==e?o+"<color=#0CFF00><u>"+g.WordConfig.getWord(61675)+"</u></color>":o+"<color=#9B9B9B><u>"+g.WordConfig.getWord(61660)+"</u></color>"}},t.prototype.ChatItemClick=function(e){var t=e.touch.getLocation(),i=cc.winSize,n=cc.view.getDesignResolutionSize(),o=(i.width-n.width)/2;t.x-=o;var c=this.node.convertToNodeSpaceAR(t);if(!(this.startx<this.endx&&(c.x<this.startx||c.x>this.endx)||this.startx>this.endx&&c.x<this.startx&&c.x>this.endx))if(this.model.type==M.DEFAULT){var l=this.model.itemId;if(!l||"0"==l)return;var p=a.default.getItemByid(l);if(p||(p=d.ChatRoomModel.getItemByid(l)),!p||"I3011"==p.itemType)return void g.WordConfig.showWord(61283);if(p.isExhibition=2,"expball"==p.getConfig().position||"expball_full"==p.getConfig().position)return void s.default.instance.createView(r.default.gameView.ExpBallView,null,p);if("I6004"==p.itemType)s.default.instance.createView(r.default.gameView.ZuiQiangFangYuGiftView,null,p);else if("I6005"==p.itemType)s.default.instance.createView(r.default.gameView.ZuiQiangJiNengGiftView,null,p);else if("I6008"==p.itemType)s.default.instance.createView(r.default.gameView.ZuiQiangQunGongGiftView,null,p);else if(2==p.itemKind)s.default.instance.createView(r.default.gameView.equipInfo,null,p);else if("sell"==p.getConfig().position)s.default.instance.createView(r.default.gameView.auctionedGoodInfoView,null,p);else if(p.itemKind==u.GameConst.ITEM_KIND.BaGua){var C=h.default.getConfigById(p.itemType);s.default.instance.createView(r.default.gameView.BaGuaEquipInfoView,null,C,p,!0)}else"box"==p.getConfig().position?s.default.instance.createView(r.default.gameView.OptionalView,null,p,!1):s.default.instance.createView(r.default.gameView.ItemInfo,null,p)}else if(this.model.type==M.GUILD_TASK){var v=d.ChatRoomModel.TaskTypeList(this.model.data.id+"_"+this.heroid+"_"+this.model.data.startTime);f.GuildModel.instance.guildinfo&&f.GuildModel.instance.guildinfo.gid>0?0==v?f.GuildModel.s_guild_task_help_info(this.model.data.id,this.heroid,this.model.data.startTime):1==v&&(this.heroid==Number(m.default.instance.roleId)?g.WordConfig.showWord(61671):f.GuildModel.s_guild_task_help(this.model.data.id,2,this.heroid,this.model.data.startTime)):1==v&&g.WordConfig.showWord(61750)}else this.model.type==M.MINE?(_.default.s_mine_report_state(this.model.data.id),this.mineReportData&&1==this.mineReportData.state?this.model.data.roleId==Number(m.default.instance.roleId)?g.WordConfig.showWord(61734):this.model.data.beRoleId==Number(m.default.instance.roleId)?g.WordConfig.showWord(61736):_.default.s_mine_retake(this.mineReportData.reportId):g.WordConfig.showWord(61735)):this.model.type==M.BROADCAST&&y.default.doAction(this.model.data.jump)},t.prototype.handerMine=function(){var e=new C.MineData;e.mineId=this.mineReportData.mineId,e.roleId=this.mineReportData.roleId,e.name=this.mineReportData.name,e.prof=this.mineReportData.prof,e.level=this.mineReportData.level,e.fight=this.mineReportData.fight,e.skin=this.mineReportData.skin,e.reportId=this.mineReportData.reportId,s.default.instance.createView(r.default.gameView.MineFightView,null,e,C.MineReportType.AssistRetake)},t=o([I],t)}(cc.RichText);i.ChatItem=w,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/UIManager":"UIManager","../config/AiringConfig":"AiringConfig","../config/BaGuaEquipConfig":"BaGuaEquipConfig","../config/ColorConfig":"ColorConfig","../config/GameConst":"GameConst","../config/GuildConfig":"GuildConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../model/ChatRoomModel":"ChatRoomModel","../model/GuildModel":"GuildModel","../model/ItemInfoModel":"ItemInfoModel","../model/MineModel":"MineModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../utils/JumpActionUtils":"JumpActionUtils"}],costdetails:[function(e,t,i){"use strict";cc._RF.push(t,"64166bq8DtKdo1dg5pW6ZU0","costdetails");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../model/CostumeModel"),r=e("../../model/RoleInfoModel"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onInitChild=function(e,t){this.data=t,this.type=e},t.prototype.onShow=function(){var e=s.CostumeModel.instance;s.CostumeModel.setCostSF(this.node.getChildByName("touxiang").getComponent(cc.Sprite),s.CostumeType.Head,this.type==s.CostumeType.Head?this.data.id:e.portrait),s.CostumeModel.setCostSF(this.node.getChildByName("touxiangkuang").getComponent(cc.Sprite),s.CostumeType.HeadFM,this.type==s.CostumeType.HeadFM?this.data.id:e.portrait_skin);var t=this.node.getChildByName("liaotiankuang");s.CostumeModel.setCostSF(t.getComponent(cc.Sprite),s.CostumeType.Bubble,this.type==s.CostumeType.Bubble?this.data.id:e.chat_skin);var i=this.node.getChildByName("chenghao");i.active=!1,s.CostumeModel.setCostSF(i.getComponent(cc.Sprite),s.CostumeType.Title,this.type==s.CostumeType.Title?this.data.id:e.title);var n=this.node.getChildByName("name");n.getComponent(cc.Label).string=r.default.instance.roleName,n.getComponent(cc.Label)._forceUpdateRenderData(!0),this.node.getChildByName("attribute").getComponent(cc.Label).string=this.data.view_value,this.node.getChildByName("obtain").getComponent(cc.Label).string=this.data.gain,this.node.getChildByName("liangtiankuangname").getComponent(cc.Label).string=this.data.name,i.active&&(i.x=n.x+n.width+i.width/2*i.scaleX-10)},t=o([l],t)}(a.default));i.CostDetails=d,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../model/CostumeModel":"CostumeModel","../../model/RoleInfoModel":"RoleInfoModel"}],costitemsf:[function(e,t,i){"use strict";cc._RF.push(t,"3d7d1ZlmHpCGbb32HqgmB6g","costitemsf");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../../engine/UIManager"),r=e("../../config/ViewConfig"),c=e("../../model/CostumeModel"),l=e("../../model/RoleInfoModel"),d=e("../../network/SocketClient"),f=e("../../config/WordConfig"),g=e("../../model/ServerTime"),h=e("../../../engine/DateUtil"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.peidai=null,t.xiexia=null,t.btnJiHuo=null,t.icon=null,t.touxiang=null,t.touxiangkuang=null,t.liaotiankuang=null,t.chenghao=null,t.des=null,t.endtimeNode=null,t.endtime=null,t.mask=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(){this.peidai=this.node.getChildByName("btnpeidai"),this.xiexia=this.node.getChildByName("btnxiexia"),this.btnJiHuo=this.node.getChildByName("btnJiHuo"),this.icon=this.node.getChildByName("icon"),this.touxiang=this.node.getChildByName("touxiang"),this.touxiangkuang=this.node.getChildByName("touxiangkuang"),this.liaotiankuang=this.node.getChildByName("liaotiankuang"),this.chenghao=this.node.getChildByName("chenghao"),this.des=this.node.getChildByName("des"),this.endtimeNode=this.node.getChildByName("endtime"),this.mask=this.node.getChildByName("mask"),this.peidai.on(cc.Node.EventType.TOUCH_END,this.onPeidai,this),this.icon.on(cc.Node.EventType.TOUCH_END,this.onIcon,this),this.btnJiHuo.on(cc.Node.EventType.TOUCH_END,this.onJiHuo,this),this.xiexia.on(cc.Node.EventType.TOUCH_END,this.onXieXia,this)},t.prototype.onRefresh=function(e,t){this.data=t,this.type=e,this.touxiang.active=!1,this.touxiangkuang.active=!1,this.liaotiankuang.active=!1,this.chenghao.active=!1,this.des.active=!1,e==c.CostumeType.Head?(this.touxiang.active=!0,c.CostumeModel.setCostSF(this.touxiang.getComponent(cc.Sprite),e,t.id)):e==c.CostumeType.HeadFM?(this.touxiangkuang.active=!0,c.CostumeModel.setCostSF(this.touxiangkuang.getComponent(cc.Sprite),e,t.id)):e==c.CostumeType.Bubble?(this.liaotiankuang.active=!0,c.CostumeModel.setCostSF(this.liaotiankuang.getComponent(cc.Sprite),e,t.id)):e==c.CostumeType.Title&&c.CostumeModel.setCostSF(this.chenghao.getComponent(cc.Sprite),e,t.id),e!=c.CostumeType.Head&&e!=c.CostumeType.HeadFM||(this.des.active=!0,this.des.getComponent(cc.Label).string=t.text)},t.prototype.setItemTime=function(e){var t=g.ServerTime.getServerTime()/1e3;e&&e>0&&e>t?(this.endtime=e,this.endtimeNode.active=!0):(this.endtime=null,this.endtimeNode.active=!1)},t.prototype.update=function(){if(this.endtime&&this.endtime>0){var e=g.ServerTime.getServerTime()/1e3;this.endtime<e?(this.endtime=null,this.endtimeNode.active=!1):this.endtimeNode.getComponent(cc.Label).string=f.WordConfig.getWord(60875)+h.default.fomatTimeBySecond2(this.endtime-e)}},t.prototype.setItemType=function(e){this.peidai.active=3==e,this.xiexia.active=2==e,this.btnJiHuo.active=1==e,this.mask.active=0==e},t.prototype.getitemid=function(){return this.data.id},t.prototype.onPeidai=function(){c.CostumeModel.s_personalize_setting(this.type,this.data.id,2)},t.prototype.onJiHuo=function(){var e=this,t=cc.js.formatStr(f.WordConfig.getWord(61642),c.CostumeModel.getTypeName(this.type),this.data.name);s.default.instance.createView(r.default.gameView.DialogCheck,null,t,function(t){t&&(1==e.data.condition&&d.default.req_use_item(l.default.instance.getBaGuaEquipListById(e.data.itemid)[0].itemId,1),c.CostumeModel.s_personalize_setting(e.type,e.data.id,3))})},t.prototype.onXieXia=function(){c.CostumeModel.s_personalize_setting(this.type,this.data.id,3)},t.prototype.onIcon=function(){s.default.instance.createView(r.default.gameView.CostDetails,null,this.type,this.data)},t=o([p],t)}(a.default));i.CostItemSf=m,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/CostumeModel":"CostumeModel","../../model/RoleInfoModel":"RoleInfoModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient"}],cuilianHelpView:[function(e,t,i){"use strict";cc._RF.push(t,"3c640ghBANFsZzW7xzbDfft","cuilianHelpView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/MagicNameConfig"),r=e("../../../engine/UIManager"),c=e("../../config/ViewConfig"),l=e("../../model/MagicModel"),d=cc._decorator,f=d.ccclass,g=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t}return n(t,e),t.prototype.onInitChild=function(e){this.init(e)},t.prototype.init=function(e){r.default.instance.setTopUI(c.default.gameView.cuilianHelpView),this.onAddEvent(this.findChild(this.node,"btnClose"),this.onClickClose.bind(this)),this.node.x=0,this.node.active=!0,this.scrollContent=this.getChild(this.node,"ScrollView/view/content");for(var t="",i="",n="",o=0,a=0;a<this.itemList.length;a++)this.itemList[a].destroy();this.itemList=[];var d=e.fuwenAtriList;for(a=0;a<d.length;a++)i=s.MagicNameConfig.getDesc(d[a].magicId),t=l.default.formatMagicValue(d[a].magicId,d[a].max),n=l.default.formatMagicValue(d[a].magicId,d[a].min),this.initItem(i,t,n,o++)},t.prototype.initItem=function(e,t,i,n){var o=this.getChild(this.node,"ScrollView/view/content/item");o.active=!1;var a=cc.instantiate(o);a.active=!0;var s=this.getChild(a,"bg"),r=this.getChild(a,"lblAttName",cc.Label),c=this.getChild(a,"lblMax",cc.Label),l=this.getChild(a,"lblMin",cc.Label);r.string=e,c.string=t+"",l.string=i+"",n%2==0&&(s.active=!1),this.scrollContent.addChild(a),this.itemList.push(a)},t.prototype.onClickClose=function(){this.node.active=!1},t=o([f],t)}(a.default));i.default=g,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/MagicNameConfig":"MagicNameConfig","../../config/ViewConfig":"ViewConfig","../../model/MagicModel":"MagicModel"}],cuilianRuleView:[function(e,t,i){"use strict";cc._RF.push(t,"c509cHD98JE8pYG/vq3jN29","cuilianRuleView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ViewConfig"),r=e("../../../engine/UIManager"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onShow=function(){r.default.instance.setTopUI(s.default.gameView.cuilianRuleView)},t=o([l],t)}(a.default));i.default=d,cc._RF.pop()},{"../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ViewConfig":"ViewConfig"}],cuilianView:[function(e,t,i){"use strict";cc._RF.push(t,"5cd68k+MR5Ik6Ebtl2jo19h","cuilianView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/EventManager"),s=e("../../../engine/Logger"),r=e("../../../engine/ProtoConfig"),c=e("../../../engine/ProtoUtils"),l=e("../../../engine/UIManager"),d=e("../../../engine/ViewBase"),f=e("../../config/ColorConfig"),g=e("../../config/EquipConfig"),h=e("../../config/GameConfig"),u=e("../../config/GameConst"),p=e("../../config/ITemsConfig"),m=e("../../config/MagicNameConfig"),C=e("../../config/MapConfig"),_=e("../../config/QuenchingCostConfig"),v=e("../../config/RuneConfig"),y=e("../../config/ViewConfig"),b=e("../../config/WordConfig"),I=e("../../model/AdModel"),M=e("../../model/ItemInfoModel"),w=e("../../model/MagicModel"),k=e("../../model/RoleInfoModel"),S=e("../../network/SocketClient"),P=e("../../prefab/ItemPrefab"),E=e("../../utils/MusicHelper"),L=e("../../utils/UIHelper"),T=e("../PublicTipView"),R=e("./RemoleView"),N=e("./xianjiPrefab"),B=cc._decorator,A=B.ccclass,G=(B.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isNotTips=!1,t.isSave=!0,t.refineRan=[],t.stoneAmount=0,t.coin=0,t.useGold=!1,t.canLockNum=0,t.lockList=[],t.lockNodeList=[],t.suoNodeList=[],t.showId=0,t.wantList=[],t.txtNowFight=null,t.txtWantFight=null,t.clickingRefine=!1,t.pageType=0,t}var i;return n(t,e),i=t,t.prototype.onInitChild=function(e){this.model=e,this.modelId=this.model.itemId,this.canLockNum=this.model.fuwenAtriList.length-1,this.config=g.EquipConfig.getEquipConfigById(this.model.itemType),this.quenchingCostConfig=_.QuenchingCostConfig.getConfigByLevel(this.config.level),this.model.quality>=u.GameConst.QUALITY.PURPLE?this.findChild(this.node,"tab/btnTab2").active=!0:this.findChild(this.node,"tab/btnTab2").active=!1},t.prototype.onShow=function(){l.default.instance.setTopUI(this.viewPath),this.cuilianPanel=this.getChild(this.node,"panel/cuilianPanel"),this.xianjiPanel=this.getChild(this.node,"panel/xianjiPanel"),this.remolePanel=this.getChild(this.node,"panel/remolePanel"),this.txtTip=this.getChild(this.node,"panel/cuilianPanel/pnlPanel/txtTip",cc.Label),this.txtTip1=this.getChild(this.node,"panel/cuilianPanel/pnlPanel/txtTip1",cc.Label),this.jindutiaoNum=this.findChild(this.cuilianPanel,"pnlPanel/jindutiao/jindutiaoNum").getComponent(cc.Label),this.txtTip.node.active=!1,this.txtTip1.node.active=!1,this.xingyunTip=this.node.getChildByName("xingyunTip"),this.xingyunTip.active=!1,this.initData(),this.onEvent(),this.refreshLbl(),h.GameConfig.isWechat()&&(this.findChild(this.cuilianPanel,"pnlPanel/pnlLbl/pnlGold").active=!1,this.findChild(this.node,"panel/cuilianPanel/pnlBtn/btnUseGold").active=!1),this.btnTab0=this.findChild(this.node,"tab/btnTab0"),this.btnTab1=this.findChild(this.node,"tab/btnTab1"),this.btnTab2=this.findChild(this.node,"tab/btnTab2"),this.btnTab1.active=this.config.is_xianji==g.XIANJI_TYPE.OK,this.pageType=i.TYPE_REFINE,this.changePage(),this.refreshLucky(),i.RemoleIsSave=!0,i.XianJiIsSave=!0,i.CuiLianIsSave=!0},t.prototype.refreshLucky=function(){this.model=M.default.getItemByid(this.model.itemId);var e=g.EquipConfig.getEquipConfigById(this.model.itemType);this.jindutiaoNum.string=this.model.luckyValue+"/"+e.xilian_lucky;var t=this.node.getChildByName("xilian").getComponent(cc.Animation);if(this.model.luckyValue==e.xilian_lucky?(t.play(),t.node.active=!0):t.node.active=!1,this.findChild(this.cuilianPanel,"pnlPanel/jindutiao/img_xilian_ui_jindu").getComponent(cc.ProgressBar).progress=this.model.luckyValue/e.xilian_lucky,this.model.quality==u.GameConst.QUALITY.PURPLE||this.model.quality==u.GameConst.QUALITY.ORANGE){this.model.isCanEquipAnimation()?(this.txtTip.node.active=!0,this.txtTip.string=cc.js.formatStr(b.WordConfig.getWord(60526),this.model.xilianCost),this.txtTip1.node.active=!1):(this.txtTip1.node.active=!0,this.txtTip1.string=cc.js.formatStr(b.WordConfig.getWord(60527),this.model.xilianCost),this.txtTip.node.active=!1)}else this.txtTip1.node.active=!1,this.txtTip.node.active=!1},t.prototype.onUserInfoRefresh=function(){this.refreshLbl()},t.prototype.onSocketRespMsg=function(e,t){if(e==r.ProtoConfig.c_seq_quench){this.clickingRefine=!1;for(var n=c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_seq_quench,t).getTruneinfo().getPropertyListList(),o=[],a=0;a<n.length;a++){var s=new w.default;s.pos=n[a].getPos(),s.magicId=n[a].getK(),s.magicValue=n[a].getV(),s.min=n[a].getMinV(),s.max=n[a].getMaxV(),s.color=n[a].getColor(),o.push(s)}o.sort(function(e,t){return e.pos-t.pos}),this.wantList=o,i.CuiLianIsSave=!1,this.refreshWantAttri(),this.refreshLbl()}else if(e==r.ProtoConfig.c_seq_saverune){1==c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_seq_saverune,t).getRet()&&(this.model.fuwenAtriList=this.wantList,this.initLeftRandomAttr(),this.wantList=[],this.scrollViewRight.content.removeAllChildren(),this.refreshLbl(),i.CuiLianIsSave=!0)}else if(e==r.ProtoConfig.c_req_buy){1==c.ProtoUtils.DeserializeBinary(r.ProtoConfig.c_req_buy,t).getRet()&&this.useGold}else e==r.ProtoConfig.c_update_item_info&&this.refreshLucky();this.model=M.default.getItemByid(this.model.itemId),this.findChild(this.cuilianPanel,"pnlPanel/pnlName").getComponent(P.default).init(this.model)},t.prototype.onEvent=function(){var e=this;this.onAddEventOnly(this.node,"panel/btnDisplay",this.onDisplay.bind(this)),this.onAddEventOnly(this.node,"panel/btnClose",this.onClose.bind(this)),this.findChild(this.node,"bg").on(cc.Node.EventType.TOUCH_END,this.onClose.bind(this)),this.onAddEvent(this.findChild(this.node,"xianjiRule/darkLayer"),function(){e.findChild(e.node,"xianjiRule").active=!1}),this.onAddEventOnly(this.node,"panel/cuilianPanel/pnlBtn/btnRefine",this.onClickRefine.bind(this)),this.onAddEventOnly(this.node,"panel/cuilianPanel/pnlBtn/btnSave",this.onSave.bind(this)),this.onAddEventOnly(this.node,"panel/cuilianPanel/pnlBtn/btnUseGold",this.onUseGold.bind(this)),this.onAddEventOnly(this.node,"tab/btnTab0",this.changePageType.bind(this,"btnTab0")),this.onAddEventOnly(this.node,"tab/btnTab1",this.changePageType.bind(this,"btnTab1")),this.onAddEventOnly(this.node,"tab/btnTab2",this.changePageType.bind(this,"btnTab2")),a.EventManager.instance.on(u.EVENT_NAME.REFRESH_REFINE,this.refreshLbl,this),this.onAddEvent(this.findChild(this.node,"panel/cuilianPanel/pnlPanel/btnEye"),function(){l.default.instance.createView(y.default.gameView.cuilianHelpView,null,e.model)}),this.initTipFrame()},t.prototype.changePageType=function(e){var t=this;"btnTab0"==e?this.pageType==i.TYPE_REMOLE?i.RemoleIsSave?(this.pageType=i.TYPE_REFINE,this.changePage()):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60528),function(e){e&&(t.pageType=i.TYPE_REFINE,i.RemoleIsSave=!0,t.remolePanel.getComponent(R.default).clearRight(),t.changePage())}):this.pageType==i.TYPE_XIANJI&&(i.XianJiIsSave?(this.pageType=i.TYPE_REFINE,this.changePage()):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60529),function(e){e&&(t.pageType=i.TYPE_REFINE,t.changePage(),i.XianJiIsSave=!0,t.xianjiPanel.getComponent(N.default).initNoSeletModel())})):"btnTab1"==e?this.pageType==i.TYPE_REMOLE?i.RemoleIsSave?(this.pageType=i.TYPE_XIANJI,this.changePage()):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60528),function(e){e&&(t.pageType=i.TYPE_XIANJI,i.RemoleIsSave=!0,t.remolePanel.getComponent(R.default).clearRight(),t.changePage())}):this.pageType==i.TYPE_REFINE&&(i.CuiLianIsSave?(this.pageType=i.TYPE_XIANJI,this.changePage()):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60530),function(e){e&&(t.pageType=i.TYPE_XIANJI,i.CuiLianIsSave=!0,t.wantList=[],t.scrollViewRight.content.removeAllChildren(),t.changePage())})):"btnTab2"==e&&(this.remolePanel.getComponent(R.default).refreshLeft(),this.pageType==i.TYPE_XIANJI?i.XianJiIsSave?(this.pageType=i.TYPE_REMOLE,this.changePage()):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60529),function(e){e&&(t.pageType=i.TYPE_REMOLE,i.XianJiIsSave=!0,t.xianjiPanel.getComponent(N.default).initNoSeletModel(),t.changePage())}):this.pageType==i.TYPE_REFINE&&(i.CuiLianIsSave?(this.pageType=i.TYPE_REMOLE,this.changePage()):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60530),function(e){e&&(t.pageType=i.TYPE_REMOLE,i.CuiLianIsSave=!0,t.wantList=[],t.scrollViewRight.content.removeAllChildren(),t.changePage())})))},t.prototype.changePage=function(){if(this.model=M.default.getItemByid(this.modelId),this.canLockNum=this.model.fuwenAtriList.length-1,this.findChild(this.cuilianPanel,"pnlPanel/pnlName").getComponent(P.default).init(this.model),this.findChild(this.cuilianPanel,"pnlPanel/fuwenName").getComponent(cc.Label).string=v.RuneConfig.getRuneById(this.model.fuwenId).name,this.findChild(this.cuilianPanel,"pnlPanel/fuwenName").color=f.ColorConfig.getFuWenColor(v.RuneConfig.getRuneById(this.model.fuwenId).quality),this.pageType==i.TYPE_REFINE)this.cuilianPanel.active=!0,this.xianjiPanel.active=!1,this.remolePanel.active=!1,this.initLeftRandomAttr(),this.refreshLbl(),this.findChild(this.btnTab0,"isSelet").active=!0,this.findChild(this.btnTab0,"noSelet").active=!1,this.findChild(this.btnTab1,"isSelet").active=!1,this.findChild(this.btnTab1,"noSelet").active=!0,this.findChild(this.btnTab2,"isSelet").active=!1,this.findChild(this.btnTab2,"noSelet").active=!0,this.xianjiPanel.getComponent(N.default).initNoSeletModel(),this.refreshLucky();else if(this.pageType==i.TYPE_XIANJI){this.cuilianPanel.active=!1,this.xianjiPanel.active=!0,this.remolePanel.active=!1,this.node.getChildByName("xilian").getComponent(cc.Animation).node.active=!1,this.findChild(this.btnTab0,"isSelet").active=!1,this.findChild(this.btnTab0,"noSelet").active=!0,this.findChild(this.btnTab1,"isSelet").active=!0,this.findChild(this.btnTab1,"noSelet").active=!1,this.findChild(this.btnTab2,"isSelet").active=!1,this.findChild(this.btnTab2,"noSelet").active=!0,this.wantList=[],this.scrollViewRight.content.removeAllChildren(),this.isSave=!0,this.refreshLbl()}else if(this.pageType==i.TYPE_REMOLE){this.cuilianPanel.active=!1,this.xianjiPanel.active=!1,this.remolePanel.active=!0,this.node.getChildByName("xilian").getComponent(cc.Animation).node.active=!1,this.findChild(this.btnTab0,"isSelet").active=!1,this.findChild(this.btnTab0,"noSelet").active=!0,this.findChild(this.btnTab1,"isSelet").active=!1,this.findChild(this.btnTab1,"noSelet").active=!0,this.findChild(this.btnTab2,"isSelet").active=!0,this.findChild(this.btnTab2,"noSelet").active=!1}},t.prototype.initData=function(){this.findChild(this.cuilianPanel,"pnlPanel/pnlName").getComponent(P.default).init(this.model),this.findChild(this.cuilianPanel,"pnlPanel/fuwenName").getComponent(cc.Label).string=v.RuneConfig.getRuneById(this.model.fuwenId).name,this.findChild(this.cuilianPanel,"pnlPanel/fuwenName").color=f.ColorConfig.getFuWenColor(v.RuneConfig.getRuneById(this.model.fuwenId).quality),this.scrollViewLeft=this.getChild(this.cuilianPanel,"pnlPanel/scrollViewLeft",cc.ScrollView),this.scrollViewRight=this.getChild(this.cuilianPanel,"pnlPanel/scrollViewRight",cc.ScrollView),this.scrollViewLeft.content.removeAllChildren(),this.scrollViewRight.content.removeAllChildren(),this.itemNode=this.findChild(this.cuilianPanel,"pnlPanel/item"),this.itemNode.active=!1,this.txtNowFight=this.getChild(this.cuilianPanel,"pnlPanel/pnlLbl/txtNowFight",cc.Label),this.txtWantFight=this.getChild(this.cuilianPanel,"pnlPanel/pnlLbl/txtWantFight",cc.Label),this.initLeftRandomAttr(),this.xianjiPanel.getComponent("xianjiPrefab").init(this.model),this.remolePanel.getComponent("RemoleView").init(this.model),this.useGold=!1,this.getChild(this.node,"panel/cuilianPanel/pnlBtn/btnUseGold/btn_gou").active=this.useGold},t.prototype.initLeftRandomAttr=function(){this.lockNodeList=[],this.suoNodeList=[],this.scrollViewLeft.content.removeAllChildren();for(var e=0;e<this.model.fuwenAtriList.length;e++){var t=cc.instantiate(this.itemNode);t.active=!0,this.scrollViewLeft.content.addChild(t);var i=t.getChildByName("lockItem").getChildByName("lockNode");this.canLockNum>0?i.active=!0:i.active=!1,this.lockNodeList[e]=i;var n=this.lockNodeList[e].getChildByName("suoNode");n.active=!1,this.suoNodeList[e]=n,t.setPosition(0,0),i.on(cc.Node.EventType.TOUCH_END,this.onClickLock.bind(this,e));var o=this.model.fuwenAtriList[e],a=t.getChildByName("txtDesc").getComponent(cc.Label);a.string=m.MagicNameConfig.getDesc(o.magicId)+":"+w.default.formatMagicValue(o.magicId,o.magicValue),a.node.color=g.EquipConfig.getColorByCurrAndMax(o.magicValue,o.max)}for(e=0;e<this.lockList.length;e++)this.suoNodeList[this.lockList[e]].active=!0;if(this.lockList.length>=this.canLockNum)for(e=0;e<this.lockNodeList.length;e++){-1==this.lockList.indexOf(e)&&(this.lockNodeList[e].active=!1)}},t.prototype.onClickLock=function(e){var t=this.lockList.indexOf(e);if(-1==t){if(this.lockList.push(e),this.suoNodeList[e].active=!0,this.lockList.length>=this.canLockNum)for(var i=0;i<this.lockNodeList.length;i++){-1==this.lockList.indexOf(i)?this.lockNodeList[i].active=!1:(this.lockNodeList[i].active=!0,this.suoNodeList[i].active=!0)}}else if(this.suoNodeList[e].active=!1,this.lockList.splice(t,1),this.lockList.length<this.canLockNum)for(i=0;i<this.lockNodeList.length;i++)this.lockNodeList[i].active=!0;this.refreshLbl()},t.prototype.refreshWantAttri=function(){this.scrollViewRight.content.removeAllChildren();for(var e=0;e<this.wantList.length;e++){var t=cc.instantiate(this.itemNode);t.active=!0,this.scrollViewRight.content.addChild(t);var i=t.getChildByName("lockItem").getChildByName("lockNode");i.active=!0;var n=i.getChildByName("suoNode");-1!=this.lockList.indexOf(e)?n.active=!0:(n.active=!1,i.active=!1),t.setPosition(0,0);var o=this.wantList[e],a=t.getChildByName("txtDesc").getComponent(cc.Label);a.string=m.MagicNameConfig.getDesc(o.magicId)+":"+w.default.formatMagicValue(o.magicId,o.magicValue),a.node.color=g.EquipConfig.getColorByCurrAndMax(o.magicValue,o.max)}},t.prototype.onAddEventOnly=function(e,t,i,n){void 0===n&&(n=!1);var o=this.getChild(e,""+t);n&&o.off("click"),o.on("click",function(){i(),E.MusicHelper.play_click()}.bind(this),this)},t.prototype.refreshLbl=function(){this.stoneAmount=this.getStoneAmount(),this.coin=this.getCoin();var e=k.default.instance.getChuiLianStoneAmount(),t=this.getChild(this.cuilianPanel,"pnlPanel/pnlLbl/pnlCoin/lblCoin",cc.Label);t.string=this.coin+"",k.default.instance.getCoin()>=this.coin?t.node.color=f.ColorConfig.GreenColor:t.node.color=f.ColorConfig.RedColor;var i=this.getChild(this.cuilianPanel,"pnlPanel/pnlLbl/pnlStone/lblStone",cc.RichText);e>=this.stoneAmount?i.string="<color=#00ff00>"+e+"</color><color=#ffffff>/"+this.stoneAmount+"</color>":i.string="<color=#FF0000>"+e+"</color><color=#ffffff>/"+this.stoneAmount+"</color>",this.config.world==C.MapConfig.WORLD.FanRen?this.txtNowFight.string=g.EquipConfig.getFanRenZhiLi(this.model.itemType,this.model.baseAddAttrList,this.model.randAttrList)+"":this.config.world==C.MapConfig.WORLD.LunHui&&(this.txtNowFight.string=g.EquipConfig.getLunHuiZhiLi(this.model.itemType,this.model.baseAddAttrList,this.model.fuwenAtriList)+""),this.wantList.length>0?this.config.world==C.MapConfig.WORLD.FanRen?this.txtWantFight.string=g.EquipConfig.getFanRenZhiLi(this.model.itemType,this.model.baseAddAttrList,this.model.randAttrList)+"":this.config.world==C.MapConfig.WORLD.LunHui&&(this.txtWantFight.string=g.EquipConfig.getLunHuiZhiLi(this.model.itemType,this.model.baseAddAttrList,this.wantList)+""):this.txtWantFight.string="0"},t.prototype.getStoneAmount=function(){var e=Math.pow(2,this.lockList.length);return this.model.fuwenAtriList.length<=2?this.quenchingCostConfig.quality2[1]*e:this.model.fuwenAtriList.length<=3?this.quenchingCostConfig.quality3[1]*e:this.model.fuwenAtriList.length<=4?this.quenchingCostConfig.quality4[1]*e:this.model.fuwenAtriList.length<=5?this.quenchingCostConfig.quality5[1]*e:(this.model.fuwenAtriList.length,this.quenchingCostConfig.quality6[1]*e)},t.prototype.getCoin=function(){return this.model.fuwenAtriList.length<=2?this.quenchingCostConfig.quality2[0]:this.model.fuwenAtriList.length<=3?this.quenchingCostConfig.quality3[0]:this.model.fuwenAtriList.length<=4?this.quenchingCostConfig.quality4[0]:this.model.fuwenAtriList.length<=5?this.quenchingCostConfig.quality5[0]:(this.model.fuwenAtriList.length,this.quenchingCostConfig.quality6[0])},t.prototype.onDisplay=function(){this.pageType==i.TYPE_REFINE?l.default.instance.createView(y.default.gameView.PublicTipView,null,T.RuleType.TYPE_CUILIAN):this.pageType==i.TYPE_XIANJI?l.default.instance.createView(y.default.gameView.PublicTipView,null,T.RuleType.TYPE_XIANJI):this.pageType==i.TYPE_REMOLE&&l.default.instance.createView(y.default.gameView.PublicTipView,null,T.RuleType.TYPE_REMOLE)},t.prototype.onClickRefine=function(){!this.isSave&&!this.isNotTips&&this.wantList.length>0?this.showTips(1):this.clickingRefine||this.onRefine()},t.prototype.checkGold=function(){var e=!0,t=p.ITemsConfig.getITemsConfigById(u.GameConst.RES_TYPE.COIN.toString());return k.default.instance.getCoin()<this.coin?(e=!1,this.clickingRefine=!1,void(I.default.getAdLostTimes(I.Ad_Type.Coin)>0?t&&t.jump_id&&t.jump_id.length>0?l.default.instance.createView(y.default.gameView.ItemAcquire,null,null,t,y.default.gameView.cuilian):l.default.instance.createView(y.default.gameView.buyMoney):t&&t.jump_id&&t.jump_id.length>0?l.default.instance.createView(y.default.gameView.ItemAcquire,null,null,t,y.default.gameView.cuilian):L.UIHelper.showCoinNoEnough())):e},t.prototype.onRefine=function(){var e=0,t=k.default.instance.getChuiLianStoneAmount(),i=this.stoneAmount,n=p.ITemsConfig.getITemsConfigById("I3903"),o=M.default.getItem("I3903");if(this.checkGold()){if(t<this.stoneAmount){if(h.GameConfig.isWechat())return void b.WordConfig.showWord(60344);if(e=(this.stoneAmount-t)*n.gem,this.useGold){if(i=t,k.default.instance.getGold()<e){L.UIHelper.showTip(b.WordConfig.getWord(60115));var a=M.default.getConfigById(u.GameConst.RES_TYPE.YUAN_BAO);return this.clickingRefine=!1,void(a&&a.jump_id&&a.jump_id.length>0&&l.default.instance.createView(y.default.gameView.ItemAcquire,null,null,a,y.default.gameView.cuilian))}return this.isSave=!1,this.refine(1),void this.refreshLbl()}return s.Logger.log("demandGold=================",e,n.gem),this.clickingRefine=!1,void(n&&n.jump_id&&n.jump_id.length>0&&l.default.instance.createView(y.default.gameView.ItemAcquire,null,o,n,y.default.gameView.cuilian))}if(!h.GameConfig.connectServer){var r=M.default.getItem("I3903");e>0&&k.default.instance.decGold(e),r&&r.useArticle(i),k.default.instance.decCoin(this.coin)}this.isSave=!1,this.refine(),this.refreshLbl()}},t.prototype.refine=function(e){var t=this;if(void 0===e&&(e=-1),h.GameConfig.connectServer){for(var i=0;i<this.lockList.length;i++)this.lockList[i]++;this.clickingRefine=!0,S.default.s_seq_quench(this.model.itemId,this.lockList,e);for(i=0;i<this.lockList.length;i++)this.lockList[i]--;this.scheduleOnce(function(){t.clickingRefine&&(t.clickingRefine=!1)},1)}else{this.wantList=[];var n=[],o=[m.MagicNameConfig.MagicId.atk,m.MagicNameConfig.MagicId.mag,m.MagicNameConfig.MagicId.spt,m.MagicNameConfig.MagicId.def,m.MagicNameConfig.MagicId.speed,m.MagicNameConfig.MagicId.DamageReduction,m.MagicNameConfig.MagicId.BonusDamage,m.MagicNameConfig.MagicId.HpDrain,m.MagicNameConfig.MagicId.MpDrain,m.MagicNameConfig.MagicId.magic_find1,m.MagicNameConfig.MagicId.equip_times,m.MagicNameConfig.MagicId.lucky,m.MagicNameConfig.MagicId.hp,m.MagicNameConfig.MagicId.mp,m.MagicNameConfig.MagicId.atk_p,m.MagicNameConfig.MagicId.mag_p,m.MagicNameConfig.MagicId.spt_p,m.MagicNameConfig.MagicId.hp_p,m.MagicNameConfig.MagicId.mp_p];for(i=0;i<o.length;i++)n[i]=0;var a=this.model.fuwenAtriList;for(i=0;i<a.length;i++){if(-1!=this.lockList.indexOf(i)){var s=a[i];this.wantList[i]=s,n[o.indexOf(s.magicId)]+=1}}var r=g.EquipConfig.randomAddAttrList(this.model.randAttrList.length-this.lockList.length,this.model.getConfig(),n);for(i=0;i<this.wantList.length;i++)this.wantList[i]||(this.wantList[i]=r.shift());this.wantList=this.wantList.concat(r),this.refreshWantAttri()}},t.prototype.onSave=function(){0!=this.wantList.length&&S.default.s_seq_saverune(this.model.itemId)},t.prototype.onUseGold=function(e){var t=this.getChild(this.cuilianPanel,"pnlBtn/btnUseGold"),i=this.getChild(this.node,"panel/cuilianPanel/pnlBtn/btnUseGold/btn_gou");this.useGold=!this.useGold,h.GameConfig.isWechat()&&(t.active=!1),i.active=this.useGold,s.Logger.log("this.useGold==",this.useGold)},t.prototype.initTipFrame=function(){var e=this,t=this.getChild(this.node,"pnlTips"),n=this.getChild(t,"pnlBtn");this.findChild(n,"btnAgree").on(cc.Node.EventType.TOUCH_END,function(){if(0==e.showId)l.default.instance.closeView(y.default.gameView.cuilian);else if(1==e.showId){e.onRefine();var n=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);e.isNotTips=n.isChecked,t.active=!1}else if(2==e.showId){n=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);e.isNotTips=n.isChecked,t.active=!1,e.pageType=i.TYPE_XIANJI,e.changePage()}else if(3==e.showId){n=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);t.active=!1,e.pageType=i.TYPE_REFINE,e.changePage()}else if(4==e.showId)l.default.instance.closeView(y.default.gameView.cuilian);else if(5==e.showId){n=e.getChild(t,"pnlBtn/tipsCheck",cc.Toggle);t.active=!1,e.pageType=i.TYPE_REMOLE,e.changePage()}}),this.findChild(n,"btnCancel").on(cc.Node.EventType.TOUCH_END,function(){t.active=!1})},t.prototype.showTips=function(e){if(void 0===e&&(e=1),this.pageType==i.TYPE_REFINE){if(1==e&&this.isNotTips)return;this.showId=e,(o=this.getChild(this.node,"pnlTips")).active=!0,o.x=0;var t=this.getChild(o,"pnlLbl/content",cc.Label),n=[b.WordConfig.getWord(60531),b.WordConfig.getWord(60532),b.WordConfig.getWord(60531),,,b.WordConfig.getWord(60531)];t.string=""+n[e];this.getChild(o,"pnlBtn");this.getChild(o,"pnlBtn/tipsCheck",cc.Toggle).node.active=0!=e&&3!=e}else if(this.pageType==i.TYPE_XIANJI){var o;this.showId=e,(o=this.getChild(this.node,"pnlTips")).active=!0,o.x=0,(t=this.getChild(o,"pnlLbl/content",cc.Label)).string=b.WordConfig.getWord(60348);this.getChild(o,"pnlBtn");this.getChild(o,"pnlBtn/tipsCheck",cc.Toggle).node.active=!1}},t.prototype.onClose=function(){this.pageType==i.TYPE_REFINE?i.CuiLianIsSave?l.default.instance.closeView(y.default.gameView.cuilian):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60530),function(e){e&&l.default.instance.closeView(y.default.gameView.cuilian)}):this.pageType==i.TYPE_XIANJI?i.XianJiIsSave?l.default.instance.closeView(y.default.gameView.cuilian):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60529),function(e){e&&l.default.instance.closeView(y.default.gameView.cuilian)}):this.pageType==i.TYPE_REMOLE&&(i.RemoleIsSave?l.default.instance.closeView(y.default.gameView.cuilian):l.default.instance.createView(y.default.gameView.DialogCheck,null,b.WordConfig.getWord(60528),function(e){e&&l.default.instance.closeView(y.default.gameView.cuilian)}))},t.TYPE_REFINE=0,t.TYPE_XIANJI=1,t.TYPE_REMOLE=2,t.CuiLianIsSave=!0,t.XianJiIsSave=!0,t.RemoleIsSave=!0,t=i=o([A],t)}(d.default));i.default=G,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConfig":"GameConfig","../../config/GameConst":"GameConst","../../config/ITemsConfig":"ITemsConfig","../../config/MagicNameConfig":"MagicNameConfig","../../config/MapConfig":"MapConfig","../../config/QuenchingCostConfig":"QuenchingCostConfig","../../config/RuneConfig":"RuneConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../model/AdModel":"AdModel","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","../../utils/UIHelper":"UIHelper","../PublicTipView":"PublicTipView","./RemoleView":"RemoleView","./xianjiPrefab":"xianjiPrefab"}],devilSealBuyTip:[function(e,t,i){"use strict";cc._RF.push(t,"ac1b1/e8gpBpYwEvc7fgDf6","devilSealBuyTip");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ITemsConfig"),r=e("../../prefab/ItemPrefab"),c=e("../../model/RoleInfoModel"),l=e("../../config/DefaultConfig"),d=e("../../config/WordConfig"),f=e("../../network/SocketClient"),g=cc._decorator,h=g.ccclass,u=g.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.buystr="B1008",t.buytimes=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(e){this.buytimes=e},t.prototype.onEnable=function(){},t.prototype.onShow=function(){this.setTopUI();var e=l.DefaultConfig.getConfigById(122).value,t=0,i=0;for(var n in e)(this.buytimes+1).toString()==n&&(t=e[n]),++i;0==t&&(t=e[i]),this.findChild(this.node,"costTip").getComponent(cc.RichText).string=cc.js.formatStr(d.WordConfig.getWord(61547),t),this.findChild(this.node,"timeTip").getComponent(cc.RichText).string=cc.js.formatStr(d.WordConfig.getWord(61255),i-this.buytimes);var o=this.findChild(this.node,"numTip");o.getComponent(cc.Label).string=this.getMyTuNum()+"/1",o.color=this.getMyTuNum()>0?cc.Color.GREEN:cc.Color.RED,this.findChild(this.node,"btn_quxiao").on(cc.Node.EventType.TOUCH_END,this.closeView,this),this.findChild(this.node,"but_tianguan_queding").on(cc.Node.EventType.TOUCH_END,this.onBuy,this),this.findChild(this.node,"ItemPrefab").getComponent(r.default).init(s.ITemsConfig.getITemsConfigById(this.buystr),!0)},t.prototype.onBuy=function(){f.default.s_req_gossip_boss_buy(),this.closeView()},t.prototype.getMyTuNum=function(){for(var e=0,t=0;t<c.default.instance.itemInfoList.length;t++){var i=c.default.instance.itemInfoList[t];i.itemType==this.buystr&&(e+=i.itemCnt)}return e},o([u(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=o([h],t)}(a.default);i.devilSealBuyTip=p,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab"}],devilSealEndView:[function(e,t,i){"use strict";cc._RF.push(t,"c7c87t7jG1FvKdNlGHhxvAw","devilSealEndView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ITemsConfig"),r=e("../../prefab/ItemPrefab"),c=e("../../config/WordConfig"),l=e("../../../engine/UIManager"),d=e("../../config/ViewConfig"),f=e("../../../game/config/MonsterConfig"),g=e("../../prefab/GameManager"),h=e("../../../engine/SpriteFrameComponent"),u=e("../../network/SocketClient"),p=cc._decorator,m=p.ccclass,C=p.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.res=0,t.ownerName="",t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(e,t,i){this.res=e,this.list=t,this.ownerName=i},t.prototype.onEnable=function(){},t.prototype.onShow=function(){var e=this;this.setTopUI(),this.findChild(this.node,"layout/but_tianguan_queding").on(cc.Node.EventType.TOUCH_END,function(){l.default.instance.closeView(d.default.gameView.devilSealFightView),e.closeView()}),this.node.getChildByName("bossName").getComponent(cc.Label).string=f.MonsterConfig.getMonsterConfigById(g.default.instance.FightBossId).name;var t=this.node.getChildByName("layout");t.getChildByName("title").active=2==this.res,t.getChildByName("xian").getChildByName("title").getComponent(cc.Label).string=1==this.res?c.WordConfig.getWord(61551):c.WordConfig.getWord(61550);var i=t.getChildByName("hurtValue");i.active=2==this.res,i.getComponent(cc.Label).string=this.ownerName;var n=t.getChildByName("content");n.active=1==this.res;var o=this.findChild(this.node,"bosstx");o.getComponent(cc.Sprite).spriteFrame=o.getComponent(h.SpriteFrameComponent).spriteFrameList[g.default.instance.FightBossId-61001];var a=1;1==this.res&&this.list.length>0&&this.list.forEach(function(t){var i=t.getNum(),o=t.getItemtype(),c=cc.instantiate(e.itemPrefab),l=s.ITemsConfig.getITemsConfigById(o);c.active=!0,c.parent=n,c.getComponent(r.default).init(l,!0),c.getComponent(r.default).setNumTxt(i,!0),c.y=42-80*Math.ceil(a/4);var d=a%4==0?4:a%4;e.list.length>=4?c.x=80*d-200:1==e.list.length?c.x=0:2==e.list.length?c.x=80*d-120:c.x=80*d-160,++a}),1==this.res?this.node.getChildByName("bg").height=350+80*Math.ceil(this.list.length/4):this.node.getChildByName("bg").height=450,setTimeout(function(){},10),u.default.s_req_enter_gossip_boss(2,g.default.instance.FightBossId)},o([C(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=o([m],t)}(a.default);i.devilSealEndView=_,cc._RF.pop()},{"../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../../game/config/MonsterConfig":"MonsterConfig","../../config/ITemsConfig":"ITemsConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../network/SocketClient":"SocketClient","../../prefab/GameManager":"GameManager","../../prefab/ItemPrefab":"ItemPrefab"}],devilSealFightView:[function(e,t,i){"use strict";cc._RF.push(t,"bae37aabb1HV6t4Z5fAgAMw","devilSealFightView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ProtoConfig"),s=e("../../../engine/ProtoUtils"),r=e("../../../engine/UIManager"),c=e("../../../engine/ViewBase"),l=e("../../config/DefaultConfig"),d=e("../../config/GameConst"),f=e("../../config/MonsterConfig"),g=e("../../config/ViewConfig"),h=e("../../config/WordConfig"),u=e("../../network/SocketClient"),p=e("../../prefab/GameManager"),m=e("../../serverFight/ServerFightView"),C=e("../../../engine/SpriteFrameComponent"),_=e("../../model/RoleInfoModel"),v=e("../../../engine/EventManager"),y=e("../../event/CommonEvent"),b=cc._decorator,I=b.ccclass,M=b.property,w=(function(){}(),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bossHp=null,t.bossName=null,t.timeOut=0,t.maxHpWight=165,t.bossid=0,t.rankItem=null,t.rankItemList=[],t.serverFightPrefab=null,t.serverFightView=null,t.serverFightViewNode=null,t}return n(t,e),t.prototype.onLoad=function(){this.rankItem=this.findChild(this.node,"rank/scrollView/view/content/item"),this.rankItem.active=!1,this.serverFightView=cc.instantiate(this.serverFightPrefab),this.serverFightView.getComponent(m.default).setFightType(d.ServerFightType.WorldBoss),this.serverFightViewNode.addChild(this.serverFightView)},t.prototype.onEnable=function(){this.onAddEvent(this.findChild(this.node,"button_fangqi"),this.onClickGiveup.bind(this)),p.default.instance.serverFightType=d.ServerFightType.WorldBoss,p.default.instance.BattleType=d.BattleType.PvE},t.prototype.onInitChild=function(e){this.bossHp.width=e/1e4*this.maxHpWight;var t=l.DefaultConfig.getConfigById(d.GameConst.SPECIALBOSSID.WORLDBOSS).value;f.MonsterConfig.getMonsterConfigById(t);this.bossName.string=f.MonsterConfig.getMonsterConfigById(p.default.instance.FightBossId).name,this.setTopUI()},t.prototype.onSocketRespMsg=function(e,t){var i=this;if(e==a.ProtoConfig.c_scene_obj_hp){for(var n=(f=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_scene_obj_hp,t)).getId(),o=f.getHp(),c=(f.getBuffId(),this.serverFightView.getComponent(m.default).serRolePrefabList),l=0;l<c.length;l++)if(n==c[l].serRoleInfoModel.id&&c[l].serRoleInfoModel.cid==p.default.instance.FightBossId){this.bossHp.width=o/1e4*this.maxHpWight;break}}else if(e==a.ProtoConfig.c_req_single_gossip_boss_rank){var d=(f=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_req_single_gossip_boss_rank,t)).getListList();this.rankItemList.forEach(function(e){e.active=!1}),d.forEach(function(e){var t=e.getHeroId(),n=e.getHarm(),o=e.getName(),a=e.getRank(),s=e.getProf();i.refreshRank(t,n,o,a,s)})}else if(e==a.ProtoConfig.c_gossip_boss_res_info){var f,h=(f=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_gossip_boss_res_info,t)).getRes(),u=(d=f.getListList(),f.getOwnerName());r.default.instance.createView(g.default.gameView.devilSealEndView,null,h,d,u)}e==a.ProtoConfig.c_user_login&&r.default.instance.closeView(g.default.gameView.devilSealFightView)},t.prototype.onClickGiveup=function(){r.default.instance.createView(g.default.gameView.DialogCheck,null,h.WordConfig.getWord(60499),function(e){e&&u.default.s_req_enter_gossip_boss(2,p.default.instance.FightBossId)})},t.prototype.update=function(){},t.prototype.closeView=function(){e.prototype.closeView.call(this)},t.prototype.refreshRank=function(e,t,i,n,o){if(e.toString()==_.default.instance.roleId){var a=this.findChild(this.node,"rank/myrank");a.getChildByName("weishangban").getComponent(cc.Label).string=0==n?"\u672a\u4e0a\u699c":n+"",a.getChildByName("roleName").getComponent(cc.Label).string=i,a.getChildByName("rolePower").getComponent(cc.Label).string=t+"",this.findChild(a,"zhiyeicon").getComponent(cc.Sprite).spriteFrame=this.findChild(a,"zhiyeicon").getComponent(C.SpriteFrameComponent).spriteFrameList[o-1]}if(0!=n){var s=void 0;if(this.rankItemList[n])s=this.rankItemList[n];else{var r=cc.instantiate(this.rankItem);r.parent=this.rankItem.parent,r.zIndex=n,this.rankItemList[n]=r,s=r}s.active=!0,s.getChildByName("fontclip_biaoti_guishu").active=1==n,s.getChildByName("order").getComponent(cc.Label).string=n+"",s.getChildByName("roleName").getComponent(cc.Label).string=i,s.getChildByName("rolePower").getComponent(cc.Label).string=t+"",this.findChild(s,"zhiyeicon").getComponent(cc.Sprite).spriteFrame=this.findChild(s,"zhiyeicon").getComponent(C.SpriteFrameComponent).spriteFrameList[o-1]}},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),u.default.s_req_gossip_boss_info(),p.default.instance.serverFightType=d.ServerFightType.Default,p.default.instance.FightBossId=null,v.EventManager.instance.dispatch(y.CommonEvent.Event_Battlefield_End)},o([M(cc.Node)],t.prototype,"bossHp",void 0),o([M(cc.Label)],t.prototype,"bossName",void 0),o([M({type:cc.Prefab})],t.prototype,"serverFightPrefab",void 0),o([M({type:cc.Node})],t.prototype,"serverFightViewNode",void 0),t=o([I],t)}(c.default));i.default=w,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/SpriteFrameComponent":"SpriteFrameComponent","../../../engine/UIManager":"UIManager","../../../engine/ViewBase":"ViewBase","../../config/DefaultConfig":"DefaultConfig","../../config/GameConst":"GameConst","../../config/MonsterConfig":"MonsterConfig","../../config/ViewConfig":"ViewConfig","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/GameManager":"GameManager","../../serverFight/ServerFightView":"ServerFightView"}],devilSealPreview:[function(e,t,i){"use strict";cc._RF.push(t,"b0d9bzkcFBB3IlJFHrBYUMz","devilSealPreview");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../config/ITemsConfig"),r=e("../../prefab/ItemPrefab"),c=e("../../config/WordConfig"),l=cc._decorator,d=l.ccclass,f=l.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.title=61553,t.shownum=!1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.onInitChild=function(e,t,i){void 0===t&&(t=61553),void 0===i&&(i=!1),this.model=e,this.title=t,this.shownum=i},t.prototype.onEnable=function(){},t.prototype.onShow=function(){this.setTopUI(),this.findChild(this.node,"bag/label").getComponent(cc.Label).string=c.WordConfig.getWord(this.title);var e=this.findChild(this.node,"bag/panel/view/content");if(this.shownum)for(var t=0;t<this.model.length;t++)for(var i in this.model[t]){var n=s.ITemsConfig.getITemsConfigById(i);(o=cc.instantiate(this.itemPrefab)).getComponent(r.default).init(n,!0),o.getComponent(r.default).setNumTxt(this.model[t][i],!0),e.addChild(o)}else for(t=0;t<this.model.length;t++){var o;n=s.ITemsConfig.getITemsConfigById(this.model[t]);(o=cc.instantiate(this.itemPrefab)).getComponent(r.default).init(n,!0),e.addChild(o)}},o([f(cc.Prefab)],t.prototype,"itemPrefab",void 0),t=o([d],t)}(a.default);i.devilSealPreview=g,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../config/ITemsConfig":"ITemsConfig","../../config/WordConfig":"WordConfig","../../prefab/ItemPrefab":"ItemPrefab"}],gamePlayView:[function(e,t,i){"use strict";cc._RF.push(t,"c7467CBE4pIMYCJlCCUj1jX","gamePlayView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/Logger"),r=e("../../engine/UIManager"),c=e("../../engine/ViewBase"),l=e("../config/MapConfig"),d=e("../config/ViewConfig"),f=e("../config/WordConfig"),g=e("../event/CommonEvent"),h=e("../manager/PvpManager"),u=e("../manager/TianGuanManager"),p=e("../model/RoleInfoModel"),m=e("../network/SocketClient"),C=e("../utils/UIHelper"),_=e("../model/NewFeaturesModel"),v=e("../model/GuideModel"),y=e("../config/NewFuncitonConfig"),b=cc._decorator,I=b.ccclass,M=(b.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.activityNode=this.findChild(this.node,"wanfa_bg/content/activityNode"),this.onAddEvent(this.activityNode,_.NewFeaturesModel.instance.pushFeaturesNode(1007,this.activityNode,function(){p.default.instance.level<50?f.WordConfig.showWord(60313):u.TianGuanManager.instance.isFighting||h.PvpManager.instance.isFighting?f.WordConfig.showWord(60246):(v.GuideModel.instance.checkGuide(20401),r.default.instance.createView(d.default.gameView.PkView),r.default.instance.closeView(d.default.gameView.TianGuanPrefab))})),this.activityNode1=this.findChild(this.node,"wanfa_bg/content/activityNode1"),this.onAddEvent(this.activityNode1,_.NewFeaturesModel.instance.pushFeaturesNode(1008,this.activityNode1,function(){if(_.NewFeaturesModel.instance.CheckBeAbleToOpen(1008))s.Logger.log("checkstartTianguan",u.TianGuanManager.instance.isFighting,h.PvpManager.instance.isFighting),u.TianGuanManager.instance.isFighting||h.PvpManager.instance.isFighting?f.WordConfig.showWord(60246):r.default.instance.createView(d.default.gameView.DialogCheck,null,f.WordConfig.getWord(60315),function(e){if(e){var t=l.MapConfig.getMapConfigByMapId(22);if(p.default.instance.totalFight>=t.Lv)m.default.req_switch_map(22),a.EventManager.instance.dispatch(g.CommonEvent.Event_JumpSettingView);else{var i=cc.js.formatStr(f.WordConfig.getWord(60316),t.Lv);C.UIHelper.showTip(i),r.default.instance.createView(d.default.gameView.toStrongerPanel)}}});else{var e=cc.js.formatStr(f.WordConfig.getWord(60314),y.NewFuncitonConfig.getFunctionConfig("1008").open_limit);C.UIHelper.showTip(e)}}))},t=o([I],t)}(c.default));i.default=M,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/MapConfig":"MapConfig","../config/NewFuncitonConfig":"NewFuncitonConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../manager/PvpManager":"PvpManager","../manager/TianGuanManager":"TianGuanManager","../model/GuideModel":"GuideModel","../model/NewFeaturesModel":"NewFeaturesModel","../model/RoleInfoModel":"RoleInfoModel","../network/SocketClient":"SocketClient","../utils/UIHelper":"UIHelper"}],gamecp:[function(e,t,i){"use strict";cc._RF.push(t,"59f70iC4TNGDavSQGDm+qrs","gamecp"),cc._RF.pop()},{}],lngotsItem:[function(e,t,i){"use strict";cc._RF.push(t,"7c7d9jprRRAu4KyZGVf6Ffl","lngotsItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../model/TopUpModel"),s=e("../../../engine/ComponentBase"),r=e("../../../engine/Logger"),c=e("../../network/SocketClient"),l=e("../../config/WordConfig"),d=e("../../config/GameConfig"),f=cc._decorator,g=f.ccclass,h=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.xConfig=[-84.681,-75.681,-75.681,-75.681,-69.681,-69.681,-69.681],t.idsConfig=[101,102,103,104,105,106,107],t.img_shouchong=null,t}return n(t,e),t.prototype.init=function(e,t,i){this.bossView=e,this.config=t,this.index=i,this.initWidget()},t.prototype.initWidget=function(){this.img_shouchong=this.findChild(this.node,"img_shouchong"),this.img_shouchong.active=!1,this.iconYuanbao=this.findChild(this.node,"pnlSp/iconYuanbao2");var e=this.getChild(this.node,"pnlLbl/lblAmount",cc.RichText);r.Logger.log("initWidget",this.config),d.GameConfig.sdkType==d.SdkType.LoongCheer||d.GameConfig.sdkType==d.SdkType.KoreaBingNiao?e.string=this.config.gem+'<img src="img_yuanbao" />':e.string=this.config.name+'<img src="img_yuanbao" />';var t=this.getChild(this.node,"pnlLbl/lblDesc",cc.RichText);t.string=this.config.des+' <img src="img_yuanbao" />';var i=this.config.id;a.TopUpModel.hadCharge(i)||(this.img_shouchong.active=!0,t.string+=cc.js.formatStr(l.WordConfig.getWord(60560),this.config.gem*this.config.rate-this.config.gem));var n=this.getChild(this.node,"pnlLbl/lblPrice",cc.Label);r.Logger.log("initWidget==",this.config.name),n.string=this.config.getMoneyStr(),this.getChild(this.node,"btnBuy").on("click",this.onBuy,this),this.iconYuanbao.x=this.xConfig[this.index-6]},t.prototype.onBuy=function(){this.bossView.closeView(),c.default.req_charge(this.config.id)},t=o([g],t)}(s.default));i.default=h,cc._RF.pop()},{"../../../engine/ComponentBase":"ComponentBase","../../../engine/Logger":"Logger","../../config/GameConfig":"GameConfig","../../config/WordConfig":"WordConfig","../../model/TopUpModel":"TopUpModel","../../network/SocketClient":"SocketClient"}],md5:[function(e,t,i){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"2760a7v39hIG7yWrrs1cUpG","md5"),function(e){function i(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function o(e,t){return e<<t|e>>>32-t}function a(e,t,n,a,s,r){return i(o(i(i(t,e),i(a,r)),s),n)}function s(e,t,i,n,o,s,r){return a(t&i|~t&n,e,t,o,s,r)}function r(e,t,i,n,o,s,r){return a(t&n|i&~n,e,t,o,s,r)}function c(e,t,i,n,o,s,r){return a(t^i^n,e,t,o,s,r)}function l(e,t,i,n,o,s,r){return a(i^(t|~n),e,t,o,s,r)}function d(e,t){var n,o,a,d,f;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var g=1732584193,h=-271733879,u=-1732584194,p=271733878;for(n=0;n<e.length;n+=16)o=g,a=h,d=u,f=p,h=l(h=l(h=l(h=l(h=c(h=c(h=c(h=c(h=r(h=r(h=r(h=r(h=s(h=s(h=s(h=s(h,u=s(u,p=s(p,g=s(g,h,u,p,e[n],7,-680876936),h,u,e[n+1],12,-389564586),g,h,e[n+2],17,606105819),p,g,e[n+3],22,-1044525330),u=s(u,p=s(p,g=s(g,h,u,p,e[n+4],7,-176418897),h,u,e[n+5],12,1200080426),g,h,e[n+6],17,-1473231341),p,g,e[n+7],22,-45705983),u=s(u,p=s(p,g=s(g,h,u,p,e[n+8],7,1770035416),h,u,e[n+9],12,-1958414417),g,h,e[n+10],17,-42063),p,g,e[n+11],22,-1990404162),u=s(u,p=s(p,g=s(g,h,u,p,e[n+12],7,1804603682),h,u,e[n+13],12,-40341101),g,h,e[n+14],17,-1502002290),p,g,e[n+15],22,1236535329),u=r(u,p=r(p,g=r(g,h,u,p,e[n+1],5,-165796510),h,u,e[n+6],9,-1069501632),g,h,e[n+11],14,643717713),p,g,e[n],20,-373897302),u=r(u,p=r(p,g=r(g,h,u,p,e[n+5],5,-701558691),h,u,e[n+10],9,38016083),g,h,e[n+15],14,-660478335),p,g,e[n+4],20,-405537848),u=r(u,p=r(p,g=r(g,h,u,p,e[n+9],5,568446438),h,u,e[n+14],9,-1019803690),g,h,e[n+3],14,-187363961),p,g,e[n+8],20,1163531501),u=r(u,p=r(p,g=r(g,h,u,p,e[n+13],5,-1444681467),h,u,e[n+2],9,-51403784),g,h,e[n+7],14,1735328473),p,g,e[n+12],20,-1926607734),u=c(u,p=c(p,g=c(g,h,u,p,e[n+5],4,-378558),h,u,e[n+8],11,-2022574463),g,h,e[n+11],16,1839030562),p,g,e[n+14],23,-35309556),u=c(u,p=c(p,g=c(g,h,u,p,e[n+1],4,-1530992060),h,u,e[n+4],11,1272893353),g,h,e[n+7],16,-155497632),p,g,e[n+10],23,-1094730640),u=c(u,p=c(p,g=c(g,h,u,p,e[n+13],4,681279174),h,u,e[n],11,-358537222),g,h,e[n+3],16,-722521979),p,g,e[n+6],23,76029189),u=c(u,p=c(p,g=c(g,h,u,p,e[n+9],4,-640364487),h,u,e[n+12],11,-421815835),g,h,e[n+15],16,530742520),p,g,e[n+2],23,-995338651),u=l(u,p=l(p,g=l(g,h,u,p,e[n],6,-198630844),h,u,e[n+7],10,1126891415),g,h,e[n+14],15,-1416354905),p,g,e[n+5],21,-57434055),u=l(u,p=l(p,g=l(g,h,u,p,e[n+12],6,1700485571),h,u,e[n+3],10,-1894986606),g,h,e[n+10],15,-1051523),p,g,e[n+1],21,-2054922799),u=l(u,p=l(p,g=l(g,h,u,p,e[n+8],6,1873313359),h,u,e[n+15],10,-30611744),g,h,e[n+6],15,-1560198380),p,g,e[n+13],21,1309151649),u=l(u,p=l(p,g=l(g,h,u,p,e[n+4],6,-145523070),h,u,e[n+11],10,-1120210379),g,h,e[n+2],15,718787259),p,g,e[n+9],21,-343485551),g=i(g,o),h=i(h,a),u=i(u,d),p=i(p,f);return[g,h,u,p]}function f(e){var t,i="",n=32*e.length;for(t=0;t<n;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function g(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function h(e){return f(d(g(e),8*e.length))}function u(e,t){var i,n,o=g(e),a=[],s=[];for(a[15]=s[15]=void 0,o.length>16&&(o=d(o,8*e.length)),i=0;i<16;i+=1)a[i]=909522486^o[i],s[i]=1549556828^o[i];return n=d(a.concat(g(t)),512+8*t.length),f(d(s.concat(n),640))}function p(e){var t,i,n="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function m(e){return unescape(encodeURIComponent(e))}function C(e){return h(m(e))}function _(e){return p(C(e))}function v(e,t){return u(m(e),m(t))}function y(e,t){return p(v(e,t))}function b(e,t,i){return t?i?v(t,e):y(t,e):i?C(e):_(e)}"function"==typeof define&&define.amd?define(function(){return b}):"object"===(void 0===t?"undefined":n(t))&&t.exports?t.exports=b:(void 0).md5=b}(),cc._RF.pop()},{}],packItemModel:[function(e,t,i){"use strict";cc._RF.push(t,"c8ad5CmFBVLK52B2F0HPxRs","packItemModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../model/CostumeModel"),o=function(){function e(e,t,i,n,o,a){void 0===e&&(e=0),void 0===t&&(t=""),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),this.heroId=e,this.heroName=t,this.heroCareer=i,this.heroLv=n,this.giftTime=o,this.giftCoin=a}return e.getModel=function(t){var i=new e;return i.heroId=t.getId(),i.heroName=t.getName(),i.heroCareer=t.getOccupation(),i.heroLv=t.getLev(),i.pos=t.getPos(),i.giftTime=t.getRecvtime(),i.giftCoin=t.getCurrecv(),i.lucky=t.getLucky(),i.personalize=n.CostumeModel.proto2Personalize(t.getPersonalize()),i},e}();i.default=o,cc._RF.pop()},{"../../model/CostumeModel":"CostumeModel"}],packetInfoModel:[function(e,t,i){"use strict";cc._RF.push(t,"22c66MiHfdAPIk9yVOc7Mim","packetInfoModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../engine/EventManager"),o=e("../../../engine/Logger"),a=e("../../../engine/ProtoConfig"),s=e("../../../engine/ProtoUtils"),r=e("../../../engine/UIManager"),c=e("../../config/ViewConfig"),l=e("../../event/CommonEvent"),d=e("./packetModel"),f=e("./packetRankModel"),g=e("./packItemModel"),h=function(){function e(){}return e.proto2ModelList=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_activity_redenvelope_receive,t);e.state=i.getRet(),e.index=i.getIndex(),d.PacketModel.totalRecv=i.getTotalrecv(),f.default.curRecv=i.getCurrecv();for(var h=i.getDataList(),u=0;u<h.length;u++){var p=g.default.getModel(h[u]);this.modelList.push(p)}o.Logger.log("PacketInfoModel==",i),0!=e.state&&1!=e.state||r.default.instance.createView(c.default.gameView.PacketRank),n.EventManager.instance.dispatch(l.CommonEvent.Event_Redenvelope_Receive),o.Logger.log("PacketInfoModel???????",t)},e.modelList=[],e}();i.default=h,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/UIManager":"UIManager","../../config/ViewConfig":"ViewConfig","../../event/CommonEvent":"CommonEvent","./packItemModel":"packItemModel","./packetModel":"packetModel","./packetRankModel":"packetRankModel"}],packetModel:[function(e,t,i){"use strict";cc._RF.push(t,"944d8InUbFA/bMnmzajUzub","packetModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../engine/EventManager"),o=e("../../../engine/Logger"),a=e("../../../engine/ProtoConfig"),s=e("../../../engine/ProtoUtils"),r=e("../../config/ActivitytimeConfig"),c=e("../../event/CommonEvent"),l=e("../../model/ActivityOpenModel"),d=function(){function e(){}return e.proto2ModelList=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_activity_redenvelope_state,t);e.index=i.getIndex()||0,e.nextTime=i.getNexttime(),e.endTime=i.getEndtime(),e.state=i.getState(),e.totalRecv=i.getTotalrecv()||0,o.Logger.log("shuju ______________",i),n.EventManager.instance.dispatch(c.CommonEvent.Event_Redenvelope_State)},e.getNextTime=function(){var t=r.ActivitytimeConfig.getConfigById(e.ActivityId);return e.nextTime=t.loopendtime[e.index],e.nextTime},e.isInActTime=function(){var e=l.default.getOpenActivityModel(this.ActivityId);if(e&&1==e.status)return!0},e.ActivityId=11,e}();i.PacketModel=d,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../config/ActivitytimeConfig":"ActivitytimeConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel"}],packetRankModel:[function(e,t,i){"use strict";cc._RF.push(t,"4c1a6wFKKJGUb3B2kIWkAoa","packetRankModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../engine/EventManager"),o=e("../../../engine/Logger"),a=e("../../../engine/ProtoConfig"),s=e("../../../engine/ProtoUtils"),r=e("../../event/CommonEvent"),c=e("../../model/ServerTime"),l=e("./packItemModel"),d=function(){function e(){}return e.proto2ModelList=function(t){var i=s.ProtoUtils.DeserializeBinary(a.ProtoConfig.c_activity_redenvelope_record,t);e.state=i.getRet(),e.index=i.getIndex(),e.curRecv=i.getCurrecv()||0,this.rankList=[];for(var d=i.getDataList(),f=0;f<d.length;f++){var g=l.default.getModel(d[f]);this.rankList.push(g)}e.refreshTime=1e3*c.ServerTime.getServerTime(),o.Logger.log("rank_________________",i),n.EventManager.instance.dispatch(r.CommonEvent.Event_Redenvelope_Record)},e.getLimitTime=function(){},e.getRoleModel=function(){for(var e=new l.default,t=[],i=0;i<this.rankList.length;i++)t.push(this.rankList[i]);for(i=0;i<t.length;i++)e=t[i];return e},e.refreshTime=0,e.rankList=[],e}();i.default=d,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../event/CommonEvent":"CommonEvent","../../model/ServerTime":"ServerTime","./packItemModel":"packItemModel"}],pkFightView:[function(e,t,i){"use strict";cc._RF.push(t,"501820YVBhEhKlZSj2YhfUt","pkFightView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../engine/EventManager"),s=e("../../engine/ProtoConfig"),r=e("../../engine/ProtoUtils"),c=e("../../engine/UIManager"),l=e("../../engine/ViewBase"),d=e("../config/DefaultConfig"),f=e("../config/GameConst"),g=e("../config/ViewConfig"),h=e("../config/WordConfig"),u=e("../event/CommonEvent"),p=e("../model/CostumeModel"),m=e("../model/PkModel"),C=e("../network/SocketClient"),_=e("../prefab/GameManager"),v=e("../serverFight/ServerFightView"),y=cc._decorator,b=y.ccclass,I=y.property,M=function(){return function(){}}(),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isPlunder=!1,t.serverFightView=null,t.serverFightPrefab=null,t.serverFightViewNode=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.initFindNode(),this.serverFightView=cc.instantiate(this.serverFightPrefab),this.serverFightView.getComponent(v.default).setFightType(f.ServerFightType.pkPVP),this.serverFightViewNode.addChild(this.serverFightView)},t.prototype.onEnable=function(){_.default.instance.serverFightType=f.ServerFightType.pkPVP,_.default.instance.BattleType=f.BattleType.PvP},t.prototype.onInitChild=function(){},t.prototype.initData=function(){var e=this;this.myData=this.getData(m.PkModel.myRole),this.Data=this.getData(m.PkModel.pkRole),this.setPlayerInfo(this.myInfo,this.myData),this.setPlayerInfo(this.pkInfo,this.Data),this.startTime.node.active=!0;var t=3;this.startTime.string=t+"";var i=d.DefaultConfig.getConfigById(175).value;this.downTime.string=i+"",this.downFunction=function(){t--,e.startTime.string=t>0?t+"":"s",t<0&&(e.unschedule(e.downFunction),e.startTime.node.active=!1,e.downFunction1=function(){i--,e.downTime.string=i+"",i<=0&&e.unschedule(e.downFunction1)},e.schedule(e.downFunction1,1))},this.schedule(this.downFunction,1),this.getChild(this.node,"show").active=!0},t.prototype.getData=function(e){var t=new M;return t.id=e.getId(),t.name=e.getName(),t.occupation=e.getOccupation(),t.lev=e.getLev(),t.personalize=e.getPersonalize(),t},t.prototype.onSocketRespMsg=function(e,t){if(e==s.ProtoConfig.c_req_change_scene)this.initData();else if(e==s.ProtoConfig.c_scene_obj_hp){var i,n=r.ProtoUtils.DeserializeBinary(s.ProtoConfig.c_scene_obj_hp,t),o=n.getId(),a=n.getHp();this.serverFightView.getComponent(v.default).serRolePrefabList.every(function(e){var t=e.serRoleInfoModel;return o!=t.id||(i=t,!1)}),i&&(o==this.myData.id?this.refreshHp(this.myInfo,i.maxHp,a):o==this.Data.id&&this.refreshHp(this.pkInfo,i.maxHp,a))}else e!=s.ProtoConfig.c_user_login&&e!=s.ProtoConfig.c_challenge_result||c.default.instance.closeView(g.default.gameView.pkFightView)},t.prototype.initFindNode=function(){this.myInfo=this.getChild(this.node,"show/myInfo"),this.pkInfo=this.getChild(this.node,"show/pkInfo"),this.downTime=this.getChild(this.node,"show/downTime",cc.Label),this.startTime=this.getChild(this.node,"show/start",cc.Label),this.hpWidth=this.getChild(this.node,"show/myInfo/hp").width},t.prototype.onShow=function(){var e=this;this.getChild(this.node,"show").active=!1,this.downTime.string="0",this.onAddEvent(this.getChild(this.node,"show/btnGiveUp"),function(){c.default.instance.createView(g.default.gameView.DialogCheck,null,h.WordConfig.getWord(60247),function(t){t&&(C.default.s_challenge_result(),e.closeView())})})},t.prototype.setPlayerInfo=function(e,t){var i=this.getChild(e,"headFrame",cc.Sprite),n=this.getChild(e,"headFrame/icon",cc.Sprite);this.getChild(e,"name",cc.Label).string="Lv"+t.lev+" "+t.name,p.CostumeModel.setCostSF(n,p.CostumeType.Head,t.personalize.getPortrait()),p.CostumeModel.setCostSF(i,p.CostumeType.HeadFM,t.personalize.getPortraitSkin()),this.refreshHp(e,this.hpWidth,this.hpWidth)},t.prototype.refreshHp=function(e,t,i){this.getChild(e,"hp").width=this.hpWidth*(i/t)>0?this.hpWidth*(i/t):0},t.prototype.closeView=function(){this.unschedule(this.downFunction),this.unschedule(this.downFunction1),_.default.instance.serverFightType=f.ServerFightType.Default,a.EventManager.instance.dispatch(u.CommonEvent.Event_Battlefield_End),e.prototype.closeView.call(this)},o([I({type:cc.Prefab})],t.prototype,"serverFightPrefab",void 0),o([I({type:cc.Node})],t.prototype,"serverFightViewNode",void 0),t=o([b],t)}(l.default);i.default=w,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/ProtoConfig":"ProtoConfig","../../engine/ProtoUtils":"ProtoUtils","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/DefaultConfig":"DefaultConfig","../config/GameConst":"GameConst","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/CostumeModel":"CostumeModel","../model/PkModel":"PkModel","../network/SocketClient":"SocketClient","../prefab/GameManager":"GameManager","../serverFight/ServerFightView":"ServerFightView"}],redPacketPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"cf8e0lEfTpFyZlzzmyshf3b","redPacketPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/ViewBase"),s=e("../../network/SocketClient"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.btn_packet=this.findChild(this.node,"BagIcon")},t.prototype.onEnable=function(){this.onAddEvent(this.btn_packet,this.getRedPacket.bind(this))},t.prototype.getRedPacket=function(){s.default.s_activity_redenvelope_receive(),this.onClickClose()},t.prototype.onClickClose=function(){this.closeView()},t=o([c],t)}(a.default));i.default=l,cc._RF.pop()},{"../../../engine/ViewBase":"ViewBase","../../network/SocketClient":"SocketClient"}],redPacketRank:[function(e,t,i){"use strict";cc._RF.push(t,"3d8dboycZ9E6bOzyOTkDchv","redPacketRank");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/Logger"),c=e("../../../engine/ViewBase"),l=e("../../config/WordConfig"),d=e("../../event/CommonEvent"),f=e("../../model/CostumeModel"),g=e("../../model/ServerTime"),h=e("../../network/SocketClient"),u=e("./packetModel"),p=e("./packetRankModel"),m=cc._decorator,C=m.ccclass,_=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemList=[],t}return n(t,e),t.prototype.onLoad=function(){if(e.prototype.onLoad.call(this),this.giftLabel=this.getChild(this.node,"content/timeShow/giftLabel",cc.Label),this.nextTimeLabel=this.getChild(this.node,"content/timeShow/timeLabel",cc.RichText),this.btn_close=this.findChild(this.node,"content/btn_close"),this.packetRank=this.findChild(this.node,"content/scrollView/view/content"),this.firstItem=this.findChild(this.packetRank,"first_kuang"),this.firstItem.active=!1,this.normalItem=this.findChild(this.packetRank,"basekuang"),this.normalItem.active=!1,this.itemList.length<=0)for(var t=0;t<99;t++){var i=cc.instantiate(this.normalItem);i.parent=this.packetRank,this.itemList.push(i)}this.onAddEvent(this.btn_close,this.onClickClose.bind(this))},t.prototype.onEnable=function(){s.EventManager.instance.on(d.CommonEvent.Event_Redenvelope_Record,this.refreshRankByServer,this),h.default.s_activity_redenvelope_record(),this.refreshRank()},t.prototype.refreshRank=function(){var e=p.default.rankList,t=[];0==u.PacketModel.nextTime?this.nextTimeLabel.string="---":this.nextTimeLabel.string=cc.js.formatStr(l.WordConfig.getWord(60523),a.default.formatHourMinStr(1e3*u.PacketModel.nextTime));Math.floor(g.ServerTime.getServerTime()/1e3-p.default.refreshTime);for(var i=0;i<e.length;i++){var n=new p.default;t[i]=n}this.refreshRankByServer()},t.prototype.onClickClose=function(){this.closeView()},t.prototype.refreshRankByServer=function(){for(var e=0;e<this.itemList.length;e++)this.itemList[e].active=!1;this.giftLabel.string=p.default.curRecv+"";var t=p.default.rankList;this.firstItem.active=!1,r.Logger.log("refreshRankByServer==",t);for(var i=0;i<t.length;i++)1==t[i].lucky?(this.firstItem.active=!0,this.firstItem.getChildByName("nameLabel").getComponent(cc.Label).string=t[i].heroName,this.firstItem.getChildByName("timeLabel").getComponent(cc.Label).string=a.default.formatHourMinStr(1e3*t[i].giftTime)+"",this.firstItem.getChildByName("coinLabel").getComponent(cc.Label).string=t[i].giftCoin+"",f.CostumeModel.setCostSF(this.firstItem.getChildByName("touxiangkuang").getComponent(cc.Sprite),f.CostumeType.HeadFM,t[i].personalize.portrait_skin),f.CostumeModel.setCostSF(this.firstItem.getChildByName("touxiang").getComponent(cc.Sprite),f.CostumeType.Head,t[i].personalize.portrait)):(this.itemList[i].active=!0,this.itemList[i].getChildByName("nameLabel").getComponent(cc.Label).string=t[i].heroName,this.itemList[i].getChildByName("timeLabel").getComponent(cc.Label).string=a.default.formatHourMinStr(1e3*t[i].giftTime)+"",this.itemList[i].getChildByName("coinLabel").getComponent(cc.Label).string=t[i].giftCoin+"",f.CostumeModel.setCostSF(this.itemList[i].getChildByName("touxiangkuang").getComponent(cc.Sprite),f.CostumeType.HeadFM,t[i].personalize.portrait_skin),f.CostumeModel.setCostSF(this.itemList[i].getChildByName("touxiang").getComponent(cc.Sprite),f.CostumeType.Head,t[i].personalize.portrait))},t=o([C],t)}(c.default));i.default=_,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/CostumeModel":"CostumeModel","../../model/ServerTime":"ServerTime","../../network/SocketClient":"SocketClient","./packetModel":"packetModel","./packetRankModel":"packetRankModel"}],redPacketView:[function(e,t,i){"use strict";cc._RF.push(t,"f0c745KIf5MgJMs2//gpx12","redPacketView");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../../engine/DateUtil"),s=e("../../../engine/EventManager"),r=e("../../../engine/Logger"),c=e("../../../engine/ViewBase"),l=e("../../config/WordConfig"),d=e("../../event/CommonEvent"),f=e("../../model/ActivityOpenModel"),g=e("../../model/ServerTime"),h=e("./packetModel"),u=cc._decorator,p=u.ccclass,m=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.activityTime=this.getChild(this.node,"activitytime/continueTime").getComponent(cc.Label),this.nextTime=this.getChild(this.node,"contentNode/timeLabel").getComponent(cc.Label),this.coinLabel=this.getChild(this.node,"contentNode/coinLabel").getComponent(cc.Label)},t.prototype.onEnable=function(){s.EventManager.instance.on(d.CommonEvent.Event_Redenvelope_State,this.refresh,this),this.refresh()},t.prototype.refresh=function(){var e=f.default.getOpenActivityModel(h.PacketModel.ActivityId),t=g.ServerTime.getServerTime()/1e3;r.Logger.log("RedPacketView====",h.PacketModel.ActivityId,e,h.PacketModel.nextTime),e&&(this.activityTime.string=a.default.formatDateStr7(1e3*e.actStartTime)+"-"+a.default.formatDateStr7(1e3*e.actEndTimes),t<e.actStartTime?this.nextTime.string=l.WordConfig.getWord(60524):t>e.actEndTimes?this.nextTime.string=l.WordConfig.getWord(60525):0==h.PacketModel.nextTime?this.nextTime.string="---":this.nextTime.string=a.default.formatHourMinStr(1e3*h.PacketModel.nextTime)),this.coinLabel.string=h.PacketModel.totalRecv+l.WordConfig.getWord(60517)},t=o([p],t)}(c.default));i.default=m,cc._RF.pop()},{"../../../engine/DateUtil":"DateUtil","../../../engine/EventManager":"EventManager","../../../engine/Logger":"Logger","../../../engine/ViewBase":"ViewBase","../../config/WordConfig":"WordConfig","../../event/CommonEvent":"CommonEvent","../../model/ActivityOpenModel":"ActivityOpenModel","../../model/ServerTime":"ServerTime","./packetModel":"packetModel"}],skillEffectItem:[function(e,t,i){"use strict";cc._RF.push(t,"5f072tqr4xP/YBNGuXwYHwA","skillEffectItem");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../utils/MusicHelper"),s=e("../config/SkinConfig"),r=e("../../engine/Logger"),c=e("../network/SocketClient"),l=e("../config/FangShopConfig"),d=e("../config/ColorConfig"),f=e("../../engine/UIManager"),g=e("../config/ViewConfig"),h=e("../model/FangShiModel"),u=e("../model/SkillModel"),p=e("../../engine/ViewBase"),m=e("../model/RedDotModel"),C=e("../../engine/EventManager"),_=e("../event/CommonEvent"),v=e("../config/ChongZhiConfig"),y=e("../config/WordConfig"),b=e("../../engine/ResourcesManager"),I=cc._decorator,M=I.ccclass,w=I.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.giftSpriteFrameList=[],t}return n(t,e),t.prototype.init=function(e){this.shopId=e;var t=l.default.getConfigById(this.shopId);if(l.default.getConfigById(this.shopId).type==l.default.TYPE_SKILLEFFECT){this.skinId=Number(l.default.getConfigById(this.shopId).item_id),this.config=s.default.getConfigById(this.skinId);s.default.getConfigById(this.skinId),this.skinId;b.default.instance.loadSprite(this.findChild(this.node,"icon").getComponent(cc.Sprite),"skinIcon/"+this.config.skinIcon),this.findChild(this.node,"effectName").getComponent(cc.Label).string=this.config.name,this.findChild(this.node,"effectName").color=d.ColorConfig.getQualityColor(this.config.quality),this.findChild(this.node,"effectValue").getComponent(cc.Label).string=this.config.des}else l.default.getConfigById(this.shopId).type==l.default.TYPE_EQUIPGIFT?(this.giftSpriteFrameList[t.zhenbao_icon]&&(this.findChild(this.node,"icon").getComponent(cc.Sprite).spriteFrame=this.giftSpriteFrameList[t.zhenbao_icon]),this.findChild(this.node,"effectName").getComponent(cc.Label).string=l.default.getConfigById(this.shopId).name,this.findChild(this.node,"effectName").color=d.ColorConfig.getQualityColor(4),this.findChild(this.node,"effectValue").getComponent(cc.Label).string=t.zhenbao_des):l.default.getConfigById(this.shopId).type==l.default.TYPE_SKILLGIFT||l.default.getConfigById(this.shopId).type==l.default.TYPE_QUNGONGGIFT?(this.giftSpriteFrameList[t.zhenbao_icon]&&(this.findChild(this.node,"icon").getComponent(cc.Sprite).spriteFrame=this.giftSpriteFrameList[t.zhenbao_icon]),this.findChild(this.node,"effectName").getComponent(cc.Label).string=l.default.getConfigById(this.shopId).name,this.findChild(this.node,"effectName").color=d.ColorConfig.getQualityColor(4),this.findChild(this.node,"effectValue").getComponent(cc.Label).string=t.zhenbao_des):l.default.getConfigById(this.shopId).type==l.default.TYPE_WEAPONUPGIFT&&(this.findChild(this.node,"effectName").getComponent(cc.Label).string=l.default.getConfigById(this.shopId).name,this.findChild(this.node,"effectName").color=d.ColorConfig.getQualityColor(4),this.findChild(this.node,"effectValue").getComponent(cc.Label).string=t.zhenbao_des,this.giftSpriteFrameList[t.zhenbao_icon]&&(this.findChild(this.node,"icon").getComponent(cc.Sprite).spriteFrame=this.giftSpriteFrameList[t.zhenbao_icon]));var i=v.ChongZhiConfig.getChongZhiByIdAndPlatform(t.charge);r.Logger.log("fangshopConfig==",t,i),this.findChild(this.node,"buyBtn/money").getComponent(cc.Label).string=i.getMoneyStr()+"",h.default.getNumById(this.shopId)>0?(this.findChild(this.node,"buyBtn").active=!0,this.findChild(this.node,"fontclib_shouqing").active=!1,this.node.active=!0,l.default.getConfigById(this.shopId).type==l.default.TYPE_EQUIPGIFT?(this.findChild(this.node,"showDescBtn/ui_hongdian").active=m.default.getModelByKey(m.default.fangshiFangyuDot).isShow,m.default.getModelByKey(m.default.fangshiFangyuDot).isShow&&C.EventManager.instance.dispatch(_.CommonEvent.Event_Show_Fangshi_Gift_RedDot)):l.default.getConfigById(this.shopId).type==l.default.TYPE_SKILLGIFT?(this.findChild(this.node,"showDescBtn/ui_hongdian").active=m.default.getModelByKey(m.default.fangshiJinengDot).isShow,m.default.getModelByKey(m.default.fangshiJinengDot).isShow&&C.EventManager.instance.dispatch(_.CommonEvent.Event_Show_Fangshi_Gift_RedDot)):l.default.getConfigById(this.shopId).type==l.default.TYPE_QUNGONGGIFT?(this.findChild(this.node,"showDescBtn/ui_hongdian").active=m.default.getModelByKey(m.default.fangshiqungongDot).isShow,m.default.getModelByKey(m.default.fangshiqungongDot).isShow&&C.EventManager.instance.dispatch(_.CommonEvent.Event_Show_Fangshi_Gift_RedDot)):this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1):(this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1,this.findChild(this.node,"buyBtn").active=!1,this.findChild(this.node,"fontclib_shouqing").active=!0,l.default.getConfigById(this.shopId).type!=l.default.TYPE_EQUIPGIFT&&l.default.getConfigById(this.shopId).type!=l.default.TYPE_SKILLGIFT&&l.default.getConfigById(this.shopId).type!=l.default.TYPE_QUNGONGGIFT||(this.node.active=!1));var n=this.findChild(this.node,"img_biaoshi_xianshi");1==t.limit?n.active=!0:n.active=!1;var o=this.findChild(this.node,"img_biaoshi_shaungshiertehui");o.active=!1,this.findChild(this.node,"effectValue").active=!0,2==t.tehui_des&&(o.active=!0,this.findChild(this.node,"effectValue").active=!1),this.onAddEvent(this.findChild(this.node,"buyBtn"),this.clickBuy.bind(this)),this.onAddEvent(this.findChild(this.node,"showDescBtn"),this.showDesc.bind(this))},t.prototype.onAddEventOnly=function(e,t,i,n){void 0===n&&(n=!1);var o=this.getChild(e,""+t);n&&o.off("click"),o.on("click",function(){i(),a.MusicHelper.play_click()}.bind(this),this)},t.prototype.clickBuy=function(){if(l.default.getConfigById(this.shopId).price_type==l.default.PRICE_RMB)if(l.default.getConfigById(this.shopId).type==l.default.TYPE_SKILLEFFECT){for(var e=u.SkillModel.getMyActiveSkillList(),t=!1,i=0;i<e.length;i++)e[i].skillId==this.config.type_value&&(t=!0);t?c.default.s_seq_fangbuy(this.shopId,1):y.WordConfig.showWord(60332)}else l.default.getConfigById(this.shopId).type==l.default.TYPE_EQUIPGIFT?(c.default.s_seq_fangbuy(this.shopId,1),this.findChild(this.node,"showDescBtn/ui_hongdian").active&&(this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1,m.default.setRedDotIsShowByKey(m.default.fangshiFangyuDot,!1),C.EventManager.instance.dispatch(_.CommonEvent.Event_Hide_Fangshi_Gift_RedDot))):l.default.getConfigById(this.shopId).type==l.default.TYPE_SKILLGIFT?(c.default.s_seq_fangbuy(this.shopId,1),this.findChild(this.node,"showDescBtn/ui_hongdian").active&&(this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1,m.default.setRedDotIsShowByKey(m.default.fangshiJinengDot,!1),C.EventManager.instance.dispatch(_.CommonEvent.Event_Hide_Fangshi_Gift_RedDot))):l.default.getConfigById(this.shopId).type==l.default.TYPE_QUNGONGGIFT?(c.default.s_seq_fangbuy(this.shopId,1),this.findChild(this.node,"showDescBtn/ui_hongdian").active&&(this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1,m.default.setRedDotIsShowByKey(m.default.fangshiqungongDot,!1),C.EventManager.instance.dispatch(_.CommonEvent.Event_Hide_Fangshi_Gift_RedDot))):c.default.s_seq_fangbuy(this.shopId,1)},t.prototype.showDesc=function(){r.Logger.log("showDesc===",this.shopId,l.default.getConfigById(this.shopId).type),l.default.getConfigById(this.shopId).type==l.default.TYPE_SKILLEFFECT?f.default.instance.createView(g.default.gameView.ZhenBaoDes,null,this.shopId):l.default.getConfigById(this.shopId).type==l.default.TYPE_EQUIPGIFT?(f.default.instance.createView(g.default.gameView.ZuiQiangFangYuGiftView,null,this.shopId),this.findChild(this.node,"showDescBtn/ui_hongdian").active&&(this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1,m.default.setRedDotIsShowByKey(m.default.fangshiFangyuDot,!1),C.EventManager.instance.dispatch(_.CommonEvent.Event_Hide_Fangshi_Gift_RedDot))):l.default.getConfigById(this.shopId).type==l.default.TYPE_SKILLGIFT?(f.default.instance.createView(g.default.gameView.ZuiQiangJiNengGiftView,null,this.shopId),this.findChild(this.node,"showDescBtn/ui_hongdian").active&&(this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1,m.default.setRedDotIsShowByKey(m.default.fangshiJinengDot,!1),C.EventManager.instance.dispatch(_.CommonEvent.Event_Hide_Fangshi_Gift_RedDot))):l.default.getConfigById(this.shopId).type==l.default.TYPE_WEAPONUPGIFT?f.default.instance.createView(g.default.gameView.FanshiGiftView,null,this.shopId):l.default.getConfigById(this.shopId).type==l.default.TYPE_QUNGONGGIFT&&(f.default.instance.createView(g.default.gameView.ZuiQiangQunGongGiftView,null,this.shopId),this.findChild(this.node,"showDescBtn/ui_hongdian").active&&(this.findChild(this.node,"showDescBtn/ui_hongdian").active=!1,m.default.setRedDotIsShowByKey(m.default.fangshiqungongDot,!1),C.EventManager.instance.dispatch(_.CommonEvent.Event_Hide_Fangshi_Gift_RedDot)))},o([w({type:[cc.SpriteFrame]})],t.prototype,"giftSpriteFrameList",void 0),t=o([M],t)}(p.default);i.default=k,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/Logger":"Logger","../../engine/ResourcesManager":"ResourcesManager","../../engine/UIManager":"UIManager","../../engine/ViewBase":"ViewBase","../config/ChongZhiConfig":"ChongZhiConfig","../config/ColorConfig":"ColorConfig","../config/FangShopConfig":"FangShopConfig","../config/SkinConfig":"SkinConfig","../config/ViewConfig":"ViewConfig","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../model/FangShiModel":"FangShiModel","../model/RedDotModel":"RedDotModel","../model/SkillModel":"SkillModel","../network/SocketClient":"SocketClient","../utils/MusicHelper":"MusicHelper"}],textureRenderUtils:[function(e,t,i){"use strict";cc._RF.push(t,"99f13zLHu5EoI1Z9wFbqcjZ","textureRenderUtils");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){this.label.string="";var e=new cc.RenderTexture;e.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.gfx.RB_FMT_S8),this.camera.targetTexture=e,this.texture=e},t.prototype.createImg=function(){var e=this._canvas.toDataURL("image/png"),t=document.createElement("img");return t.src=e,t},t.prototype.createCanvas=function(){var e=this.texture.width,t=this.texture.height;this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=t);var i=this._canvas.getContext("2d");this.camera.render();for(var n=this.texture.readPixels(),o=4*e,a=0;a<t;a++){for(var s=t-1-a,r=i.createImageData(e,1),c=s*e*4,l=0;l<o;l++)r.data[l]=n[c+l];i.putImageData(r,0,a)}return this._canvas},t.prototype.showImage=function(e){var t=this,i=new cc.Texture2D;i.initWithElement(e);var n=new cc.SpriteFrame;n.setTexture(i);var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=n,o.zIndex=cc.macro.MAX_ZINDEX,o.parent=cc.director.getScene();var a=cc.winSize.width,s=cc.winSize.height;o.x=a/2,o.y=s/2,o.on(cc.Node.EventType.TOUCH_START,function(){o.parent=null,t.label.string="",o.destroy()}),this.captureAction(o,a,s)},t.prototype.captureAction=function(e,t,i){var n=cc.scaleTo(1,.3),o=cc.v2(t-t/6,i/4),a=cc.moveTo(1,o),s=cc.spawn(n,a);e.runAction(s);var r=cc.blink(.1,1);this.node.runAction(r)},t.prototype.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},t=o([s],t)}(cc.Component));i.default=r,cc._RF.pop()},{}],toStrongerMa:[function(e,t,i){"use strict";cc._RF.push(t,"89d9cqbjHVD5LVkr2SpuVzl","toStrongerMa"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.ToStrongerManager=n,cc._RF.pop()},{}],tttool:[function(e,t,i){"use strict";cc._RF.push(t,"c79fapOkBRCK7eO1KvUIKZB","tttool"),Object.defineProperty(i,"__esModule",{value:!0});e("../../engine/EventManager"),e("../event/CommonEvent");var n=e("../network/SocketClient"),o=e("../sdk/SdkHelper"),a=e("../../engine/HttpUtil"),s=e("../config/WordConfig"),r=function(){function e(){}return e.ttLogin=function(){tt.login({force:!0,success:e.loginSuccess,complete:e.loginComplete,fail:e.loginFail})},e.loginSuccess=function(e){var t=new a.default;t.setMethod(a.default.methodTypeOption.GET),t.requestByForm("https://developer.toutiao.com/api/apps/jscode2session?appid=ttadd3db6e32e980fe&secret=44a4124b5c8beb8148301d4c17993b90d06f8492&code="+e.code,function(e,t){e&&t.openid&&(o.default.uId=t.openid,n.default.login(2))})},e.loginComplete=function(){},e.loginFail=function(){},e.getUserInfoSuccess=function(e){},e.getUserInfoComplete=function(){},e.getUserInfoFail=function(){},e.OpenAD=function(e){void 0===e&&(e=1),s.WordConfig.showWord(60252)},e.OpenBanner=function(e){var t=tt.createBannerAd({adUnitId:e,adIntervals:30,style:{left:10,top:76,width:320}});t.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.style.width=400,t.show()}),t.onError(function(e){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+e)})},e.gameRecorderManager=function(){var t=tt.getGameRecorderManager();return t.onStart(function(){console.log("\u5f00\u59cb\u5f55\u5c4f")}),t.onResume(function(){console.log("\u7ee7\u7eed\u5f55\u5c4f")}),t.onPause(function(){console.log("\u6682\u505c\u5f55\u5c4f")}),t.onStop(function(t){console.log("\u5f55\u5c4f\u7ed3\u675f"+t.videoPath),e.videoPath=t.videoPath}),t.onError(function(e){console.log("\u5f55\u5c4f\u51fa\u9519"+e)}),t},e.startRecorder=function(){this.gameRecorderManager().start({duration:30})},e.stopRecorder=function(){this.gameRecorderManager().stop()},e.prototype.share=function(){e.videoPath&&tt.shareAppMessage({channel:"video",title:s.WordConfig.getWord(60731),extra:{videoPath:e.videoPath},success:function(t){console.log("\u89c6\u9891\u5206\u4eab\u6210\u529f",t),e.videoPath=null},fail:function(e){console.log("\u89c6\u9891\u5206\u4eab\u5931\u8d25",e)},complete:function(e){console.log("\u89c6\u9891\u5206\u4eab\u5b8c\u6210",e)}})},e.videoPath=null,e}();i.tttool=r,cc._RF.pop()},{"../../engine/EventManager":"EventManager","../../engine/HttpUtil":"HttpUtil","../config/WordConfig":"WordConfig","../event/CommonEvent":"CommonEvent","../network/SocketClient":"SocketClient","../sdk/SdkHelper":"SdkHelper"}],tt:[function(e,t,i){"use strict";cc._RF.push(t,"4b995sGY9pBf7hc6nLZ3p3G","tt"),cc._RF.pop()},{}],xianjiPrefab:[function(e,t,i){"use strict";cc._RF.push(t,"f15b66pz5tE6bBgXHzqwuu7","xianjiPrefab");var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var a=e("../../model/ItemInfoModel"),s=e("../../config/EquipConfig"),r=e("../../config/MagicNameConfig"),c=e("../../config/GameConst"),l=e("../../prefab/ItemPrefab"),d=e("../../utils/MusicHelper"),f=e("../../model/RoleInfoModel"),g=e("../../config/ColorConfig"),h=e("../../model/MagicModel"),u=e("../../network/SocketClient"),p=e("../../../engine/ProtoConfig"),m=e("../../../engine/ProtoUtils"),C=e("../../../engine/ViewBase"),_=e("../../../engine/EventManager"),v=e("../../event/CommonEvent"),y=e("../../config/DefaultConfig"),b=e("../../config/WordConfig"),I=e("../../config/XianJiConfig"),M=e("./cuilianView"),w=e("../../config/MapConfig"),k=cc._decorator,S=k.ccclass,P=(k.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseNodeList=[],t.wantList=[],t.resetCost=0,t.shengYu=6,t.xianjistate=0,t.canLockNum=0,t.mode=i.Mode_Type.Normal,t.lockNodeList=[],t.suoNodeList=[],t.lockList=[],t.rightItemList=[],t}var i;return n(t,e),i=t,t.prototype.init=function(e){this.parent=this.node.parent.parent,this.model=e,this.itemId=this.model.itemId,this.scrollViewLeft=this.getChild(this.node,"scrollViewLeft",cc.ScrollView),this.scrollViewRight=this.getChild(this.node,"scrollViewRight",cc.ScrollView),this.currItem=this.findChild(this.node,"currItem").getComponent(l.default),this.seletItem=this.findChild(this.node,"seletItem"),this.seletItem.active=!1,this.giveUpTip=this.parent.getChildByName("giveUpTip"),this.giveUpTip.active=!1,this.leftItemNode=this.findChild(this.node,"scrollViewLeft/view/content/itemInfo"),this.leftItemNode.active=!1,this.rightItemNode=this.findChild(this.node,"scrollViewRight/view/content/itemInfo"),this.rightItemNode.active=!1,this.seletPanal=this.parent.getChildByName("seletPanal"),this.xianjiRule=this.parent.getChildByName("xianjiRule"),this.xianjiRule.active=!1,this.seletPanalScrollView=this.seletPanal.getChildByName("scrollView").getComponent(cc.ScrollView),this.seletItemPrefab=this.seletPanal.getChildByName("item"),this.seletItemPrefab.active=!1,this.seletPanal.active=!1,this.jipin1=this.findChild(this.node,"jipin1"),this.jipin2=this.findChild(this.node,"jipin2"),this.jipin3=this.findChild(this.node,"jipin3"),this.btn_selet=this.getChild(this.node,"btn_selet"),this.findChild(this.node,"2").active=!this.btn_selet.active,this.jipin2.active=!this.btn_selet.active,this.jipin3.active=!0,this.findChild(this.node,"3").active=!0,this.btn_xianji=this.getChild(this.node,"btn_xianji"),this.btn_xianji_high=this.findChild(this.node,"btn_xianji_high"),this.btn_xianji_high.active=!1,this.btn_damo=this.getChild(this.node,"xianjiBtnPanal/btn_damo"),this.btn_damo.active=!1,this.findChild(this.node,"xianjiFinish").active=!1,this.findChild(this.node,"xianjiBtnPanal").active=!1,this.xianjiCost=this.findChild(this.node,"xianjiBtnPanal/btn_busuan/xianjiCost"),this.xianjiCost1=this.findChild(this.node,"xianjiBtnPanal/btn_damo/xianjiCost"),this.xianjiCost2=this.findChild(this.node,"btn_xianji_high/xianjiCost"),this.btn_xianji.active=!0,this.txtTimes=this.getChild(this.node,"xianjiBtnPanal/btn_damo/txtTimes",cc.Label),this.txtTimes.node.active=!1,this.button_xianji_gaojixianji=this.getChild(this.node,"img_xianji_gaojigezi01/button_xianji_gaojixianji"),this.button_xianji_putongxianji=this.getChild(this.node,"img_xianji_putonggezi01/button_xianji_putongxianji"),this.button_xianji_gaojixianji.active=!0,this.getChild(this.node,"txtWantFight",cc.Label).string="0",this.jipin3.getComponent(cc.Label).string=this.model.getCurrBaseAddAttrValue()+"("+this.model.getJiPinPersent()+"%)",this.jipin3.color=g.ColorConfig.getQualityColor(this.model.quality),this.refreshLeft(),this.onEvent(),this.initNoSeletModel(),this.refreshMode()},t.prototype.onEnable=function(){_.EventManager.instance.on(v.CommonEvent.Event_SocketRespMsg,this.onSocketRespMsg,this),this.txtTimes&&this.initNoSeletModel()},t.prototype.onEvent=function(){var e=this;this.onAddEventOnly(this.node,"btn_selet",function(){e.wantMode=i.Mode_Type.Normal,e.showSeletPanal()}),this.onAddEvent(this.findChild(this.node,"btn_select_high"),function(){e.wantMode=i.Mode_Type.High,e.showSeletPanal()}),this.onAddEventOnly(this.node,"seletItem",function(){e.wantMode=e.mode,e.showSeletPanal()}),this.onAddEventOnly(this.parent,"seletPanal/btn_guanbi",this.hideSeletPanal.bind(this)),this.onAddEventOnly(this.parent,"seletPanal/darkLayer",this.hideSeletPanal.bind(this)),this.onAddEvent(this.findChild(this.parent,"xianjiRule/btnClose"),this.hideXianjiRule.bind(this)),this.onAddEventOnly(this.node,"btn_xianji",this.commonXianji.bind(this)),this.onAddEvent(this.findChild(this.node,"btn_xianji_high"),this.onClickXianji.bind(this)),this.onAddEvent(this.findChild(this.node,"xianjiBtnPanal/btn_baocun"),this.onClickSave.bind(this)),this.onAddEventOnly(this.node,"xianjiBtnPanal/btn_fanqi",this.showGiveUpTip.bind(this)),this.onAddEvent(this.findChild(this.node,"xianjiBtnPanal/btn_busuan"),this.onClickReSet.bind(this)),this.onAddEvent(this.findChild(this.node,"xianjiBtnPanal/btn_damo"),this.onClickReSet.bind(this)),this.onAddEventOnly(this.giveUpTip,"btnAgree",this.onClickGiveUp.bind(this)),this.onAddEventOnly(this.giveUpTip,"btnCancel",this.hideGiveUpTip.bind(this))},t.prototype.onAddEventOnly=function(e,t,i,n){void 0===n&&(n=!1);var o=this.getChild(e,""+t);n&&o.off("click"),o.on("click",function(){i(),d.MusicHelper.play_click()}.bind(this),this)},t.prototype.refreshMode=function(){this.btn_xianji.active=!1,this.btn_xianji_high.active=!1,this.node.getChildByName("img_xianji_jindu02").active=!1,this.node.getChildByName("img_xianji_jindu01").active=!1,this.node.getChildByName("jipin2").active=!1,this.node.getChildByName("2").active=!1,this.button_xianji_putongxianji.active=!0,this.node.getChildByName("jipin1").active=!1,this.node.getChildByName("1").active=!1,this.node.getChildByName("btn_selet").active=!0,this.node.getChildByName("btn_select_high").active=!0,this.node.getChildByName("jipin1").active=!1,this.node.getChildByName("1").active=!1,this.node.getChildByName("jipin2").active=!1,this.node.getChildByName("2").active=!1,this.findChild(this.node,"img_xianji_putonggezi01").active=!0,this.button_xianji_gaojixianji.active=!0,this.btn_xianji.active=!1,this.findChild(this.node,"img_xianji_putonggezi02").active=!1,this.mode==i.Mode_Type.High&&(this.node.getChildByName("img_xianji_jindu01").active=!0,this.seletItem.setPosition(116.76,58.135),this.xianjiCost1.getComponent(cc.Label).string=this.resetCost+"",this.seletModel&&(this.btn_xianji_high.active=!0,this.button_xianji_gaojixianji.active=!1,this.node.getChildByName("jipin2").active=!0,this.node.getChildByName("2").active=!0,this.node.getChildByName("btn_select_high").active=!1),this.wantList.length>0&&(this.btn_xianji_high.active=!1,this.node.getChildByName("btn_selet").active=!1,this.findChild(this.node,"img_xianji_putonggezi02").active=!0,this.findChild(this.node,"img_xianji_putonggezi01").active=!1)),this.mode==i.Mode_Type.Normal&&(this.node.getChildByName("img_xianji_jindu02").active=!0,this.seletItem.setPosition(-128.874,58.134),this.xianjiCost.getComponent(cc.Label).string=this.resetCost+"",this.seletModel&&(this.btn_xianji.active=!0,this.node.getChildByName("jipin1").active=!0,this.node.getChildByName("1").active=!0,this.button_xianji_putongxianji.active=!1,this.node.getChildByName("btn_selet").active=!1),this.wantList.length>0&&(this.btn_xianji.active=!1,this.node.getChildByName("btn_select_high").active=!1)),this.refreshLeft()},t.prototype.refreshTxtTimes=function(){this.txtTimes.node.active=!0;var e=s.EquipConfig.getEquipConfigById(this.model.itemType).xianji_num-1;this.txtTimes.string=this.shengYu+"/"+e},t.prototype.onClickXianji=function(){0==this.lockList.length?b.WordConfig.showWord(60354):this.xianji()},t.prototype.onClickSave=function(){u.default.s_seq_xianji_save(this.model.itemId,this.seletModel.itemId),this.initStatus()},t.prototype.showGiveUpTip=function(){this.giveUpTip.active=!0,this.initStatus()},t.prototype.hideGiveUpTip=function(){this.giveUpTip.active=!1},t.prototype.onClickGiveUp=function(){this.initNoSeletModel(),this.giveUpTip.active&&(this.giveUpTip.active=!1)},t.prototype.onClickReSet=function(){for(var e=[r.MagicNameConfig.MagicId.atk,r.MagicNameConfig.MagicId.mag,r.MagicNameConfig.MagicId.spt,r.MagicNameConfig.MagicId.def,r.MagicNameConfig.MagicId.hp],t="",n=0;n<this.lockList.length;n++)t=0!=n?t+"|"+e[this.lockList[n]]:e[this.lockList[n]]+"";this.mode==i.Mode_Type.High&&(this.shengYu<=0?b.WordConfig.showWord(60355):u.default.s_seq_xianji_regret(this.model.itemId,1,t)),this.mode==i.Mode_Type.Normal&&u.default.s_seq_xianji_regret(this.model.itemId,-1,""),this.refreshMode()},t.prototype.xianji=function(){if(this.seletModel){for(var e=[r.MagicNameConfig.MagicId.atk,r.MagicNameConfig.MagicId.mag,r.MagicNameConfig.MagicId.spt,r.MagicNameConfig.MagicId.def,r.MagicNameConfig.MagicId.hp],t="",n=0;n<this.lockList.length;n++)t=0!=n?t+"|"+e[this.lockList[n]]:e[this.lockList[n]]+"";u.default.s_seq_xianji(this.model.itemId,this.seletModel.itemId,1,t),this.xianjistate=i.xianji_START}else b.WordConfig.showWord(60356)},t.prototype.commonXianji=function(){this.seletModel?(u.default.s_seq_xianji(this.model.itemId,this.seletModel.itemId,-1,""),this.xianjistate=i.xianji_START):b.WordConfig.showWord(60356)},t.prototype.xianjiFinish=function(){this.findChild(this.node,"xianjiBtnPanal").active=!0,this.findChild(this.node,"xianjiFinish").active=!1,this.findChild(this.node,"xianjiFinish1").active=!1,this.mode==i.Mode_Type.High?(this.findChild(this.node,"xianjiBtnPanal/btn_busuan").active=!1,this.btn_damo.active=!0,this.findChild(this.node,"xianjiFinish").active=!0):(this.findChild(this.node,"xianjiBtnPanal/btn_busuan").active=!0,this.btn_damo.active=!1,this.findChild(this.node,"xianjiFinish1").active=!0,this.findChild(this.node,"img_xianji_gaojigezi01").active=!1,this.findChild(this.node,"img_xianji_gaojigezi02").active=!0),this.xianjistate=i.xianji_FINISH,f.default.instance.getGold()<this.resetCost?this.xianjiCost.color=g.ColorConfig.RedColor:this.xianjiCost.color=g.ColorConfig.YellowColor,this.xianjiCost.getComponent(cc.Label).string=this.resetCost+"",this.btn_xianji.active=!1},t.prototype.onSocketRespMsg=function(e,t){if(e==p.ProtoConfig.c_seq_xianji){M.default.XianJiIsSave=!1;var i=m.ProtoUtils.DeserializeBinary(p.ProtoConfig.c_seq_xianji,t),n=(i.getItemid1(),i.getDiamond()),o=i.getBaseaddattrlistList(),a=i.getRegrettime();this.wantList=[];for(var r=0;r<o.length;r++){var c=new h.default;c.magicId=o[r].getK(),c.magicValue=o[r].getV(),this.wantList[r]=c}this.resetCost=n;var l=s.EquipConfig.getEquipConfigById(this.model.itemType).xianji_num-1;this.shengYu=l-a+1,this.refreshMode(),this.xianjiFinish(),this.refreshRight(),this.refreshTxtTimes()}else e==p.ProtoConfig.c_seq_xianji_save?(M.default.XianJiIsSave=!0,this.wantList.length>0&&(this.getChild(this.node,"txtWantFight",cc.Label).string="0",this.model.baseAddAttrList=this.wantList,this.wantList=[],this.refreshLeft(),this.initNoSeletModel(),this.initStatus(),this.jipin3.getComponent(cc.Label).string=this.model.getCurrBaseAddAttrValue()+"("+this.model.getJiPinPersent()+"%)",this.jipin3.color=g.ColorConfig.getQualityColor(this.model.quality))):e==p.ProtoConfig.c_update_item_info||e==p.ProtoConfig.c_seq_xianji_regret||p.ProtoConfig.s_seq_xianji},t.prototype.initNoSeletModel=function(){this.resetCost=y.DefaultConfig.getConfigById(45).value[1],this.wantList=[],this.refreshRight(),this.refreshLeftIcon(),this.seletModel=null,this.findChild(this.node,"xianjiFinish").active=!1,this.findChild(this.node,"xianjiFinish1").active=!1,this.findChild(this.node,"xianjiBtnPanal").active=!1,this.btn_xianji.active=!0,this.xianjistate=i.xianji_IDLE,this.jipin1.getComponent(cc.Label).string=this.model.getCurrBaseAddAttrValue()+"("+this.model.getJiPinPersent()+"%)",this.jipin1.color=g.ColorConfig.getQualityColor(this.model.quality),this.refreshMode()},t.prototype.getGaoJieXianJieLockNum=function(e){var t=0;return e.world==w.MapConfig.WORLD.FanRen&&e.position==c.Position.WEAPON||e.world==w.MapConfig.WORLD.LunHui?t=1:e.world==w.MapConfig.WORLD.FanRen&&e.position!=c.Position.WEAPON&&(t=2),t},t.prototype.refreshLeft=function(){this.currItem.init(this.model),this.model=a.default.getItemByid(this.itemId);var e=s.EquipConfig.getEquipConfigById(this.model.itemType),t=[r.MagicNameConfig.MagicId.atk,r.MagicNameConfig.MagicId.mag,r.MagicNameConfig.MagicId.spt,r.MagicNameConfig.MagicId.def,r.MagicNameConfig.MagicId.hp];this.canLockNum=this.getGaoJieXianJieLockNum(e),this.lockNodeList=[],this.suoNodeList=[];for(var n=0;n<this.baseNodeList.length;n++)this.baseNodeList[n]&&this.baseNodeList[n].destroy();this.baseNodeList=[];for(n=0;n<t.length;n++){var o=this.model.getBaseAddValue(t[n]),c=o;if(t[n]==r.MagicNameConfig.MagicId.atk?c+=e.atk:t[n]==r.MagicNameConfig.MagicId.mag?c+=e.mag:t[n]==r.MagicNameConfig.MagicId.spt?c+=e.spt:t[n]==r.MagicNameConfig.MagicId.def?c+=e.def:t[n]==r.MagicNameConfig.MagicId.hp&&(c+=e.hp),c>0){var l=void 0;this.baseNodeList[n]?l=this.baseNodeList[n]:(l=cc.instantiate(this.leftItemNode),this.baseNodeList[n]=l,l.parent=this.scrollViewLeft.content),l.active=!0,l.getChildByName("txtDesc").getComponent(cc.Label).string=r.MagicNameConfig.getDesc(t[n])+":",l.getChildByName("txtDefaultValue").getComponent(cc.Label).string=""+c;var d=l.getChildByName("txtExtra").getComponent(cc.RichText),f=l.getChildByName("lockNode");f.opacity=0,this.lockNodeList[n]=f;var g=this.lockNodeList[n].getChildByName("suoNode"),h=this.lockList.indexOf(n);g.active=-1!=h,this.suoNodeList[n]=g,this.mode==i.Mode_Type.Normal?f.opacity=0:t[n]!=r.MagicNameConfig.MagicId.hp?(f.opacity=255,this.onAddEvent(f,this.onClickLock.bind(this,f,n))):f.opacity=0,d.string="("+o+")",d.node.active=o>0}}e.world==w.MapConfig.WORLD.FanRen?this.getChild(this.node,"txtNowFight",cc.Label).string=s.EquipConfig.getFanRenZhiLi(this.model.itemType,this.model.baseAddAttrList,this.model.randAttrList)+"":e.world==w.MapConfig.WORLD.LunHui&&(this.getChild(this.node,"txtNowFight",cc.Label).string=s.EquipConfig.getLunHuiZhiLi(this.model.itemType,this.model.baseAddAttrList,this.model.fuwenAtriList)+""),this.refreshLock()},t.prototype.refreshLock=function(){var e=s.EquipConfig.getEquipConfigById(this.model.itemType),t=[r.MagicNameConfig.MagicId.atk,r.MagicNameConfig.MagicId.mag,r.MagicNameConfig.MagicId.spt,r.MagicNameConfig.MagicId.def,r.MagicNameConfig.MagicId.hp];this.canLockNum=this.getGaoJieXianJieLockNum(e);for(var n=0;n<this.lockNodeList.length;n++){if(this.lockNodeList[n])if(this.mode==i.Mode_Type.High)-1==this.lockList.indexOf(n)?(this.lockList.length>=this.canLockNum?this.lockNodeList[n].opacity=0:t[n]!=r.MagicNameConfig.MagicId.hp&&(this.lockNodeList[n].opacity=255),this.suoNodeList[n].active=!1):(t[n]!=r.MagicNameConfig.MagicId.hp&&(this.lockNodeList[n].opacity=255),this.suoNodeList[n].active=!0);else this.lockNodeList[n].opacity=0}},t.prototype.onClickLock=function(e,t){if(0!=e.opacity){var i=this.lockList.indexOf(t);-1==i?this.lockList.push(t):this.lockList.splice(i,1),this.refreshLock()}},t.prototype.initStatus=function(){this.findChild(this.node,"img_xianji_gaojigezi01").active=!0,this.findChild(this.node,"img_xianji_jindu01").active=!0,this.findChild(this.node,"img_xianji_jindu02").active=!1,this.findChild(this.node,"img_xianji_gaojigezi02").active=!1,this.findChild(this.node,"xianjiFinish1").active=!1,this.node.getChildByName("2").active=!1,this.node.getChildByName("1").active=!1,this.node.getChildByName("jipin1").active=!1,this.node.getChildByName("jipin2").active=!1,this.refreshMode()},t.prototype.refreshRight=function(){this.model=a.default.getItemByid(this.itemId);for(var e=0;e<this.rightItemList.length;e++)this.rightItemList[e]&&this.rightItemList[e].destroy();if(this.rightItemList=[],this.wantList.length>0){var t=[r.MagicNameConfig.MagicId.atk,r.MagicNameConfig.MagicId.mag,r.MagicNameConfig.MagicId.spt,r.MagicNameConfig.MagicId.def,r.MagicNameConfig.MagicId.hp],n=s.EquipConfig.getEquipConfigById(this.model.itemType);n.world==w.MapConfig.WORLD.FanRen?this.getChild(this.node,"txtWantFight",cc.Label).string=s.EquipConfig.getFanRenZhiLi(this.model.itemType,this.wantList,this.model.randAttrList)+"":n.world==w.MapConfig.WORLD.LunHui&&(this.getChild(this.node,"txtWantFight",cc.Label).string=s.EquipConfig.getLunHuiZhiLi(this.model.itemType,this.wantList,this.model.fuwenAtriList)+"");for(e=0;e<t.length;e++){var o=this.getXianjiBaseAddValue(t[e],this.wantList),c=this.model.getBaseAddValue(t[e]),l=o;if(t[e]==r.MagicNameConfig.MagicId.atk?l+=n.atk:t[e]==r.MagicNameConfig.MagicId.mag?l+=n.mag:t[e]==r.MagicNameConfig.MagicId.spt?l+=n.spt:t[e]==r.MagicNameConfig.MagicId.def?l+=n.def:t[e]==r.MagicNameConfig.MagicId.hp&&(l+=n.hp),l>0){var d=void 0;this.rightItemList[e]?d=this.rightItemList[e]:(d=cc.instantiate(this.rightItemNode),this.rightItemList[e]=d,d.parent=this.scrollViewRight.content),d.active=!0;var f=d.getChildByName("txtExtra").getComponent(cc.RichText),g=o-c;f.node.active=o>0,d.getChildByName("txtDesc").getComponent(cc.Label).string=r.MagicNameConfig.getDesc(t[e])+":";var h=d.getChildByName("txtDefaultValue").getComponent(cc.Label);h.string=""+l,f.string=g>0?"("+c+"+"+g+")":"("+c+")";var u=d.getChildByName("lockNode");if(u.opacity=0,this.mode==i.Mode_Type.High){t[e]!=r.MagicNameConfig.MagicId.hp&&(u.opacity=255);var p=u.getChildByName("suoNode");p.active=!1,-1!=this.lockList.indexOf(e)?p.active=!0:g>0?(h.string=""+(l-g),f.string="("+c+"+<color=#FC0C0C>"+g+"</color>)"):f.string="("+c+")"}}}}},t.prototype.refreshLeftIcon=function(e){if(void 0===e&&(e=null),null!=e){this.refreshMode(),this.seletItem.getComponent(l.default).init(e),this.seletItem.active=!0,this.jipin2.getComponent(cc.Label).string=e.getCurrBaseAddAttrValue()+"("+e.getJiPinPersent()+"%)",this.jipin2.color=g.ColorConfig.getQualityColor(e.quality),this.jipin1.getComponent(cc.Label).string=e.getCurrBaseAddAttrValue()+"("+e.getJiPinPersent()+"%)",this.jipin1.color=g.ColorConfig.getQualityColor(e.quality);var t=parseInt(this.jipin2.getComponent(cc.Label).string)-parseInt(this.jipin3.getComponent(cc.Label).string),i=I.default.getConfigById(t);this.xianjiCost2.getComponent(cc.Label).string=i.gem+""}else this.seletItem.active=!1;this.findChild(this.node,"2").active=!this.btn_selet.active,this.jipin2.active=!this.btn_selet.active},t.prototype.showSeletPanal=function(){if(this.seletPanalScrollView.scrollToLeft(),this.xianjistate!=i.xianji_FINISH&&this.xianjistate!=i.xianji_START){if(this.canSeletEquipList=this.getCanSeletEquip(),this.canSeletEquipList.length<=0)return void b.WordConfig.showWord(60357);this.seletPanal.active=!0,this.refreshSeletPanal()}},t.prototype.refreshSeletPanal=function(){this.findChild(this.node,"img_xianji_jindu01").active=!0,this.refreshMode(),this.button_xianji_gaojixianji.active=!1,this.node.getChildByName("img_xianji_jindu02").active=!1,this.node.getChildByName("img_xianji_jindu01").active=!1,this.findChild(this.node,"img_xianji_gaojigezi01/button_xianji_gaojixianji").active=!1,this.node.getChildByName("jipin2").active=!1,this.node.getChildByName("2").active=!1,this.node.getChildByName("jipin1").active=!1,this.node.getChildByName("1").active=!1,this.seletPanalScrollView.content.removeAllChildren();for(var e=0;e<this.canSeletEquipList.length;e++){var t=cc.instantiate(this.seletItemPrefab);t.active=!0,t.getChildByName("currItem").getComponent(l.default).init(this.canSeletEquipList[e]),t.on(cc.Node.EventType.TOUCH_END,this.selet.bind(this,e)),t.getChildByName("value").getComponent(cc.Label).string=this.canSeletEquipList[e].getCurrBaseAddAttrValue()+"("+this.canSeletEquipList[e].getJiPinPersent()+"%)",t.getChildByName("value").color=g.ColorConfig.getQualityColor(this.canSeletEquipList[e].quality),this.seletPanalScrollView.content.addChild(t)}this.seletPanalScrollView.scrollToLeft()},t.prototype.selet=function(e){this.mode=this.wantMode,this.xianjistate!=i.xianji_FINISH&&this.xianjistate!=i.xianji_START&&(this.hideSeletPanal(),this.xianjistate=i.xianji_SELET,this.seletModel=this.canSeletEquipList[e],this.lockList=[],this.refreshLeftIcon(this.canSeletEquipList[e]),this.refreshMode(),this.refreshLock())},t.prototype.hideSeletPanal=function(){this.seletPanal.active=!1},t.prototype.getCanSeletEquip=function(){for(var e=[],t=0;t<f.default.instance.itemInfoList.length;t++){var i=f.default.instance.itemInfoList[t];i&&(i.itemType==this.model.itemType&&i.quality==this.model.quality&&i.getCurrBaseAddAttrValue()>this.model.getCurrBaseAddAttrValue()&&!i.isLock&&i.gridId<0&&Number(i.getJiPinPersent())<=100&&e.push(i))}return e.sort(function(e,t){return e.getCurrBaseAddAttrValue()-t.getCurrBaseAddAttrValue()}),e},t.prototype.showXianjiRule=function(){this.xianjiRule.active=!0},t.prototype.hideXianjiRule=function(){this.xianjiRule.active=!1},t.prototype.getXianjiBaseAddValue=function(e,t){for(var i=0,n=0;n<t.length;n++){var o=t[n];if(o.magicId==e){i=o.magicValue;break}}return i},t.xianji_IDLE=0,t.xianji_SELET=1,t.xianji_START=2,t.xianji_FINISH=3,t.Mode_Type={Normal:0,High:1},t=i=o([S],t)}(C.default));i.default=P,cc._RF.pop()},{"../../../engine/EventManager":"EventManager","../../../engine/ProtoConfig":"ProtoConfig","../../../engine/ProtoUtils":"ProtoUtils","../../../engine/ViewBase":"ViewBase","../../config/ColorConfig":"ColorConfig","../../config/DefaultConfig":"DefaultConfig","../../config/EquipConfig":"EquipConfig","../../config/GameConst":"GameConst","../../config/MagicNameConfig":"MagicNameConfig","../../config/MapConfig":"MapConfig","../../config/WordConfig":"WordConfig","../../config/XianJiConfig":"XianJiConfig","../../event/CommonEvent":"CommonEvent","../../model/ItemInfoModel":"ItemInfoModel","../../model/MagicModel":"MagicModel","../../model/RoleInfoModel":"RoleInfoModel","../../network/SocketClient":"SocketClient","../../prefab/ItemPrefab":"ItemPrefab","../../utils/MusicHelper":"MusicHelper","./cuilianView":"cuilianView"}]},{},["Main","Hacker","AdapterHelper","Astar","ComponentBase","DateUtil","DropDownPrefab","EventManager","GameSocket","GameWebSocket","GlobalConfig","HaoEncrypt","HelloSlider","HotUpdate","HttpUtil","LanguageComponent","LocalStorage","Logger","ManifestConfig","MathUtils","Md5Helper","MusicPrefab","ProtoConfig","ProtoUtils","RandomUtil","ResourcesManager","SafeDataModelBase","ShaderHelper","SocketRequestData","SoundPrefab","SpriteFrameComponent","UIManager","Uint8ArrayHelper","VersionManager","ViewBase","md5","textureRenderUtils","GameController","AutoRobotSettingView","AutoShowView","AutoTipView","BossAttackModel","BossSettingItem","AnimationEx","GesturesToZoom","ListView","ListViewBase","ListViewItemBase","NodeEx","NodePoolManager","NodeSync","RadioButton","SyncHelper","NextUltimateGiftWindow","UltimateGiftPrefab","UltimateSeletWindow","ActivityCodeConfig","ActivityConfig","ActivityRankConfig","ActivityShopConfig","ActivitygiftConfig","ActivitytimeConfig","AiringConfig","AppellationConfig","AppraisalConfig","ArenaRankRewardConfig","ArenaWeekRewardConfig","BaGuaComposeConfig","BaGuaEquipConfig","BaGuaExchangeConfig","BaGuaRefineConfig","BaGuaSkillConfig","BaGuaStrongConfig","BaGuaSuitConfig","BagConfig","BestrongernConfig","BuffConfig","CarnivalConfig","CarvinalRewardConfig","CarvinalSurpriceConfig","ChaozhigiftConfig","ChaozhigifttypeConfig","ChargegiftConfig","ChiXueMoJianConfig","ChongZhiConfig","ChristmasterConfig","CollectActivityConfig","ColorConfig","ComplexConfig","ContinuousRechargeConfig","CostumeConfig","DefaultConfig","DevilSealConfig","ElkRunConfig","EquipConfig","EquipGatherConfig","ExoticExplorationConfig","FailedJumpConfig","FangShopConfig","GameConfig","GameConst","GoldsConfig","GrowFundConfig","GuideConfig","GuildConfig","GuildfightCityConfig","GuildfightLvlConfig","GuildfightRewardConfig","GuildfightTimeConfig","HeroConfig","HolidayConfig","ITemsConfig","IllustratedBooksConfig","IllustratedBooksenhanceConfig","IllustratedBooksshowConfig","IntensifyBuffConfig","IntensifyConfig","IntensifyRefineConfig","InvitationConfig","ItemGiftConfig","ItemgoodsConfig","JingJieConfig","JsonConfigBase","LegendaryThinkRewardConfig","LegendaryThinkTaskConfig","MadelzhulingConfig","MagicNameConfig","MapConfig","MaprecommendConfig","MarfaGoalConfig","MarfaKingConfig","MarfaKingProConfig","MarfaOrderConfig","MedalConfig","MedalmakeConfig","MergeLuckyDrawConfig","MineConfig","MineInfoConfig","MingYunZhiRenConfig","MonsterConfig","MonsterHunterConfig","MusicConfig","NameConfig","NewFuncitonConfig","NewYearGiftConfig","OptionalgiftConfig","PlayerNameConfig","PostConfig","PuzzleConfig","QuenchingCostConfig","RandomFuMoConfig","RandomFuMoEntryConfig","RebirthConfig","RedPaperConfig","RuleConfig","RuneConfig","SevenDayLoginConfig","ShenCiConfig","ShenbingGemAllConfig","ShenbingskillAllConfig","ShihunfazhangConfig","ShopAllConfig","ShopConfig","ShopRecoverConfig","SignBoardConfig","SkillBuffConfig","SkillConfig","SkillEffConfig","SkinConfig","SkyPassConfig","SkypassShopConfig","SpecialRingConfig","SpecialRingEffectConfig","SpriteFrameConfig","StarAbilityConfig","StarAstrolabeConfig","StarChainConfig","StarExchangeConfig","StarLevelConfig","StarProfessionConfig","StorageConfig","StrategyConfig","StrategyXingXiuConfig","SuperbskillConfig","TaskConfig","Task_boxConfig","ViewConfig","WordConfig","WorldbossawardConfig","WorldbosstaskConfig","XianJiConfig","XianshiLibaoConfig","Xiaofeihuikuiconfig","Xiaofeimubiaoconfig","Xilianexpendconfig","YaoShopConfig","CommonEvent","LanguageHelper","ConfigMgr","MapManager","MonsterManager","PvpManager","RedPointManager","ScoreManager","SerSkillClipsManager","SkillClipsManager","SkillEffectManager","SkillManager","StartUpMgr","StatisticsManager","SummonedManager","TianGuanManager","ActivityManager","MineBuyPowerView","MineFightView","MineMapItem","MinePanel","MinePlunderCell","MinePlunderView","MineReportCell","MineReportView","MineResultView","MineTipView","tt","tttool","ActivityOpenModel","ActivityShopModel","AdModel","AnnouncementModel","AppDownloadModel","AppraisalModel","AuctionHouseModel ","AutoAppellationModel","AutoRobotChatModel","BaGuaModel","BlessModel","BossKillModel","BossModel","BuffModel","BusinessModel","CarnivalInfoModel","ChargeActivityModel","ChargeGiftModel","ChatModel","ChatRoomModel","ChengBaModel","CollectActivityShopModel","ConsumerFeedbackMergedModel","ConsumerFeedbackModel","ContinuousRechargeModel","CostumeModel","DisCountPrefabModel","EquipGridModel","EverydayLoginModel","ExoticExplorationModel","FangShiModel","FastKillModel","FightModel","FuGuiGameModel","Grid","GrowFundModel","GuideModel","GuildModel","GuildPvPModel","HelpGiftModel","HolidayModel","HolidayMonsterModel","HolidayRunGameModel","HouseModel","HurtModel","InvitationModel","ItemInfoModel","JingJieModel","JingLianModel","LegendTaskModel","LuckyPuzzleModel","MaFaModel","MagicModel","MakeEquipModel","MapStatisticsModel","MergeLuckyDrawModel","MineModel","NewFeaturesModel","NewYearGiftModel","NotifyModel","OneMineModel","OptionalGiftBagModel","PkModel","PostModel","PrivilegeModel","PvpRoleModel","RedDotModel","ResModel","RoleInfoModel","RolePrefabInfo","ServerTime","SettingModel","SevenDayLoginModel","ShenBinModel","ShenBinSkillModel","ShenGongModel","SkillEffectModel","SkillModel","SkyPassModel","SpecialRingModel","SpiritsModel","StarInfoModel","StarPlanetInfoModel","StarUpModel","StrategyModel","TaskModel","TitleModel","TopUpModel","TuJianEquipModel","UltimategiftModel","XianshilibaoModel","ZoneModel","NewYearTargetModel","HttpHelper","SocketClient","AudioPrefab","ChatPrefab","ChatRoomItem","FightFrameRes","GainItemConsumerFeedback","GainItemConsumerFeedbackMerged","GameManager","GuildApplyItemPrefab","GuildRecordItemPrefab","GuildinfoitemPrefab","GuilditemPrefab","GuildshopitemPrefab","HolidayMonsterPrefab","HolidayRunGame","ItemPrefab","MiniMapPrefab","MonsterIcon","MoveEffectPrefab","PostPrefab","QieGePrefab","RedPointPrefab","RolePrefab","RolePrefabUtil","ShaderMaterialPrefab","chatitem","NewYearGiftView","NewYearGiftView2","NewYearTargetPrefab","RemindDialog","WeiDuanFuli","ZhuanDuanJiangli","FeiYouSdkManager","KoreaBNHandler","KoreaBNSdkManager","LongRuiHandler","LongRuiManager","LoongCheerHandle","LoongCheerManager","STUtils","SdkHandler","SdkHelper","SdkManager","ZRWXSDKHandler","ZRWXSDKManager","ZRWebSDKHandler","ZRWebSDKManager","SerRoleInfoModel","SerRolePrefab","SerSkillEffectManager","ServerFightView","ByteArray","CollideUtil","JumpActionUtils","MenuIconRedPointIdMapping","MusicHelper","MyJsonLoader","NameHelper","UIHelper","ActiveTaskItem","ActiveTaskView","ActivityView","AnnouncementView","AppearanceSystemSkillItem","AppellationView","AppraisalTip","AppraisalView","AppstoneView","BossSpeedUpView","BusinessView","BuyShopView","ChangeWorldGiftView","ChargeSucView","ChatRoomView","CheckDeleteRoleView","CityView","CollectActivityBuyView","CollectActivityShopView","CollectShopEnterView","ComEquipView","ComoensationView","ComplexView","CompoundView","ConsumerFeedbackMergedView","ConsumerFeedbackView","ContinuousRechargeItem","ContinuousRechargeView","CostumeView","costdetails","costitemsf","DevilSealItem","DevilSealView","devilSealBuyTip","devilSealEndView","devilSealFightView","devilSealPreview","DialogCheckView","DisCountPrefabView","DisCountConfig","DisCountModel","DiscountChongZhiItem","DiscountView","DoubleAdView","DoubleGetView","EquipContrastView","EquipMakeView","ExchangeShopView","FangShopView","FanshiGiftView","FastKillView","FightChangeView","FightRoleInfoView","FirePigView","GamePrivilegeView","GameUIView","GameView","GiftClockTip","GmView","HandbookView","HolidaySelectPetView","HolidayShopWindow","HolidayToolView","HolidayView","HolidayView2","HorseracelampView","ItemIfoLimitTtime","ItemInfoExpBallView","JiaoZhuSelectView","JingJieView","JingLianView","LoadingView","LoginView","LuckyBingoView","GainItemView","LuckyPuzzleView","MapInfoView","MapView","MergeLuckyDrawTip","MergeLuckyDrawView","MethodView","MoreMenuView","MsginfoView","NewFeaturesView","NewGuideView","NoBossPrivilegeView","NotityView","OfflineGiftView","OfflineView","PkChallenge","PkDailyGift","PkRecordView","PkResultView","PkView","PostView","PrivilegeFightGodView","PrivilegeRecoveryView","PublicTipView","EquipRank","EquipRankItemModel","EquipRankModel","FightRankItemModel","FightRankModel","LeiTaiRank","LeiTaiRankModel","PowerRank","RankModel","RankRuleView","RankView","TuituItem","TuituModel","TuituRank","packItemModel","packetInfoModel","packetModel","packetRankModel","redPacketPrefab","redPacketRank","redPacketView","RefineRuleView","RecycleTipView","RefineHelpView","RefineView","RemolePreView","RemoleView","cuilianHelpView","cuilianRuleView","cuilianView","xianjiPrefab","RegisterView","RenameView","ReviveView","RoleSkillEffectPrefab","BagAddView","BagEqItemInfo","BagItem","BagItemInfo","BagView","ButtomView","HouseAddView","HouseView","ItemAcquire","KillBossTip","OptionalView","PlayerInfoPreView","ShenBinRuleView","SpecialEquipComplexView","SpecialEquipView","StarYulanView","WeaponView","SarItemListView","ServerWeiHuView","DropDownBox","SetConBox","SetSkill","SettingView","ShowNumView","SkillEffectSeletItem","SkillEffectView","SkillIUp","SkillItem","SkillStudy","SkillView","StarActivateView","StarChainView","StarPageView","StarPanel","StarPlanetPanel","StarSelectView","StarView","StrengthenInfoView","StrengthenView","TaskView","TempView","TianguanFightView","TipView","TopResources","TopUpView","lngotsItem","TuJianCell","TuJianCellOpen","TuJianSelectedEquipView","TuJianView","UserInfoView","YuandanView","ZhenBaoDes","ZoneServerView","BaYeBuyView","BaYePrefab","BaYePrefab2","ChengBaView","EverydaySignatureTip","EverydaySignatureView","ExoticExploration","ExoticExplorationShop","GongLueJobPrefab","GongLueView","GrowFundView","InvitationTip","InvitationView","JiaoZhuRunGame","MaFaMiLingAwardView","MaFaMiLingView","OptionalGiftBagItem","OptionalGiftBagTip","OptionalGiftBagView","SevenDayLoginView","CommonAlertView","AuctionGoodsItem","AuctionHouseView","AuctionItemsTip","AuctionLogGoodsItem","AuctionedGoodInfoView","GuildAuctionView","TradingRecordView","BaGuaCompoundSuccessView","BaGuaCompoundView","BaGuaConversionView","BaGuaEquipContrastView","BaGuaEquipInfoView","BaGuaEquipView","BaGuaIntensifyView","BaGuaLevelView","BaGuaResolveView","BaGuaSelectView","BaGuaStrengthenView","BaGuaView","BaZhenPanel","BigBossBuyTimeTipView","BigBossEndView","BigBossRewardPreView","BigBossView","WorldBossFightView","WorldBossModel","buyItem","buyMoney","TianguanEntrance","gamePlayView","GuildFunctionView","GuildHongBao","GuildHongBaoItem","GuildHongBaoTip","GuildInfomationView","GuildListView","GuildPvPAwardView","GuildPvPCityInfoView","GuildPvPCityListView","GuildPvPCityMainView","GuildPvPEndTip","GuildPvPFightView","GuildPvPMainView","GuildPvPMapPanel","GuildPvPMapView","GuildPvPResultView","GuildPvPStayingListView","GuildPvPStrongholdInfoView","GuildShopTip","GuildShopView","GuildSkillView","GuildStoreRoomItem","GuildStoreRoomTip","GuildStoreRoomView","GuildTask","GuildView","LibaoCellPrefab","LibaoView","XianshiLibaoView","XianshilibaoCell","XianshilibaoInfoView","pkFightView","BaoshiInfoModel","BaoshiInfoView","ShenGongView","skillEffectItem","TianGuanCell","TianGuanInfoView","TianGuanListView","TianGuanRankCell","TianGuanRankPanel","TianGuanShopView","TianGuanView","TianguanEndingView","TianguanShopBuyView","QuestionItem","ResourceItem","RoleItem","ToStrongerItemBase","ToStrongerManager","ToStrongerView","toStrongerMa","LoadingTipView","XianShiActivityView","XianShiGoldView","XianShi_XiLianShi","Xianshi_ShuyeView","ZuiQiangFangYuGiftView","ZuiQiangJiNengGiftView","ZuiQiangQunGongGiftView","ZhuanDuanButton","gamecp"]);