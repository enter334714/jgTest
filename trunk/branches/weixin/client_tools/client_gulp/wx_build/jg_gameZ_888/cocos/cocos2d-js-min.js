!function(C$99s,C$99o,C$99t){function C$99a(C$99t,C$99e){if(!(C$99r=C$99o[C$99t])){var C$99i=C$99s[C$99t];if(!C$99i)return;var C$99n={},C$99r=C$99o[C$99t]={exports:C$99n};C$99i[0](function(C$99t){return C$99a(C$99i[1][C$99t]||C$99t)},C$99r,C$99n)}return C$99r.exports}for(var C$99e=0;C$99e<C$99t.length;C$99e++)C$99a(C$99t[C$99e])}({1:[function(C$99t,C$99e,C$99i){C$99e.exports={1001:"cocos2d: removeAction: Target not found",1002:"cc.ActionManager.removeActionByTag(): an invalid tag",1003:"cc.ActionManager.removeActionByTag(): target must be non-null",1004:"cc.ActionManager.getActionByTag(): an invalid tag",1005:"cocos2d : getActionByTag(tag = %s): Action not found",1006:"[Action step]. override me",1007:"[Action update]. override me",1008:"cocos2d: FiniteTimeAction#reverse: Implement me",1009:"cc.EaseElastic.reverse(): it should be overridden in subclass.",1010:"cc.IntervalAction: reverse not implemented.",1011:"cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.",1012:"cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass.",1013:"The speed parameter error",1014:"The repeat parameter error",1015:"parameters should not be ending with null in Javascript",1016:"cc.RotateTo.reverse(): it should be overridden in subclass.",1019:"Failed to construct, Sequence construction needs two or more actions.",1020:"Failed to construct, Spawn construction needs two or more actions.",1021:"cc.Speed.initWithAction(): action must be non nil",1022:"cc.Follow.initWithAction(): followedNode must be non nil",1023:"cc.ActionEase.initWithAction(): action must be non nil",1024:"Invalid configuration. It must at least have one control point",1025:"cc.Sequence.initWithTwoActions(): arguments must all be non nil",1026:"cc.RepeatForever.initWithAction(): action must be non null",1027:"cc.Spawn.initWithTwoActions(): arguments must all be non null",1028:"cc.ReverseTime.initWithAction(): action must be non null",1029:"cc.ReverseTime.initWithAction(): the action was already passed in.",1030:"cc.Animate.initWithAnimation(): animation must be non-NULL",1031:"Illegal parameter get passed in cc.tween: %s.",1100:"Expected 'data' dict, but not found. Config file: %s",1101:"Please load the resource first : %s",1200:"cocos2d: Director: Error in gettimeofday",1201:"cocos2d: Director: unrecognized projection",1203:"cocos2d: Director: Error in gettimeofday",1204:"running scene should not null",1205:"the scene should not null",1206:"loadScene: The scene index to load (%s) is out of range.",1207:"loadScene: Unknown name type to load: '%s'",1208:"loadScene: Failed to load scene '%s' because '%s' is already being loaded.",1209:"loadScene: Can not load the scene '%s' because it was not in the build settings before playing.",1210:"Failed to preload '%s', %s",1211:"loadScene: The scene index to load (%s) is out of range.",1212:"loadScene: Unknown name type to load: '%s'",1213:"loadScene: Failed to load scene '%s' because '%s' is already loading",1214:"loadScene: Can not load the scene '%s' because it was not in the build settings before playing.",1215:"Failed to preload '%s', %s",1216:"Director.runSceneImmediate: scene is not valid",1300:"element type is wrong!",1400:"'%s' is deprecated, please use '%s' instead.",1404:"cc.spriteFrameCache is removed, please use cc.loader to load and cache sprite frames of atlas format.",1405:"The '%s' has been removed, please use '%s' instead.",1406:"'%s.%s' is removed",1408:"'%s' is not support in the '%s', please use '%s' instead.",1502:"cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",1503:"cc.Scheduler.pauseTarget():target should be non-null",1504:"cc.Scheduler.resumeTarget():target should be non-null",1505:"cc.Scheduler.isTargetPaused():target should be non-null",1506:"warning: you CANNOT change update priority in scheduled function",1507:'CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: %s to %s"',1508:"Argument callback must not be empty",1509:"Argument target must be non-nullptr",1510:"cc.Scheduler: Illegal target which doesn't have uuid or instanceId.",1511:"cc.Scheduler: pause state of the scheduled task doesn't match the element pause state in Scheduler, the given paused state will be ignored.",1513:"cc.Scheduler: scheduler stopped using `__instanceId` as id since v2.0, you should do scheduler.enableForTarget(target) before all scheduler API usage on target",1605:"child already added. It can't be added again",1606:"child must be non-null",1610:"cocos2d: removeChildByTag(tag = %s): child not found!",1612:"cc.Node.stopActionBy(): argument tag an invalid tag",1613:"cc.Node.getActionByTag(): argument tag is an invalid tag",1617:"child must be non-null",1618:"cc.Node.runAction(): action must be non-null",1619:"callback function must be non-null",1620:"interval must be positive",1623:"Set '%s' to normal node (not persist root node).",1624:"Replacing with the same sgNode",1625:"The replacement sgNode should not contain any child.",1626:"Should not set alpha via 'color', set 'opacity' please.",1627:"Not support for asynchronous creating node in SG",1632:"Node name can not include '/'.",1633:"Internal error, should not remove unknown node from parent.",1634:"addChild: The child to add must be instance of cc.Node, not %s.",1635:"reorderChild: this child is not in children list.",1636:"Node's zIndex value can't be greater than cc.macro.MAX_ZINDEX, setting to the maximum value",1637:"Node's zIndex value can't be smaller than cc.macro.MIN_ZINDEX, setting to the minimum value",1638:"Private node's zIndex can't be set, it will keep cc.macro.MIN_ZINDEX as its value",1639:"cc.Action is deprecated now, please use cc.TweenAction instead",1800:"cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",1801:"cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",1802:"cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",1803:"cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",1900:"Invalid parameter.",2e3:"Don't call this method if the event is for touch.",2200:"Resolution not valid",2201:"should set resolutionPolicy",2300:"The touches is more than MAX_TOUCHES, nUnusedIndex = %s",2400:"WebGL error %s",2602:"cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",2603:"cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",2606:"cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",2607:"cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",2608:"%s is null, please check.",2609:"cc.Sprite.initWithFile(): filename should be non-null",2610:"cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",2614:"cc.Sprite.addChild(): child should be non-null",2616:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",2617:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",2618:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",2619:"cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",2623:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",2625:"too many tiles, only 16384 tiles will be show",2626:"Unrecognized fill type in bar fill",2627:"Can not generate quad",2628:"%s does not exist",2712:"Invalid spriteFrameName",3005:"cocos2d: '%s' id=%s %s x %s",3006:"cocos2d: '%s' id= HTMLCanvasElement %s x %s",3007:"cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",3103:"cc.Texture.addImage(): path should be non-null",3112:"cc.Texture.addImage(): path should be non-null",3113:"NSInternalInconsistencyException",3116:"WebGLRenderingContext.CLAMP_TO_EDGE should be used in NPOT textures",3117:"Mimpap texture only works in POT textures",3119:"Lazy init texture with image element failed due to image loading failure: %s",3120:"Loading texture from '%s' with unsupported type: '%s'. Add '%s' into 'cc.macro.SUPPORT_TEXTURE_FORMATS' please.",3300:"Rect width exceeds maximum margin: %s",3400:"Rect height exceeds maximum margin: %s",3500:"0 priority is forbidden for fixed priority since it's used for scene graph based priority.",3501:"Invalid listener type!",3502:"Can't set fixed priority with scene graph based listener.",3503:"Invalid parameters.",3504:"listener must be a cc.EventListener object when adding a fixed priority listener",3505:"The listener has been registered, please don't register it again.",3506:"Unsupported listener target.",3507:"Invalid scene graph priority!",3508:"If program goes here, there should be event in dispatch.",3509:"_inDispatch should be 1 here.",3510:"%s's scene graph node not contains in the parent's children",3511:"event is undefined",3600:"cc.Class will automatically call super constructor of %s, you should not call it manually.",3601:"The editor property 'playOnFocus' should be used with 'executeInEditMode' in class '%s'",3602:"Unknown editor property '%s' in class '%s'.",3603:"Use 'cc.Float' or 'cc.Integer' instead of 'cc.Number' please.",3604:"Can only indicate one type attribute for %s.",3605:"The default value of %s is not instance of %s.",3606:"No needs to indicate the '%s' attribute for %s, which its default value is type of %s.",3607:"The default value of %s must be an empty string.",3608:"The type of %s must be cc.String, not String.",3609:"The type of %s must be cc.Boolean, not Boolean.",3610:"The type of %s must be cc.Float or cc.Integer, not Number.",3611:"Can not indicate the '%s' attribute for %s, which its default value is type of %s.",3612:"%s Just set the default value to 'new %s()' and it will be handled properly.",3613:"'No need to use 'serializable: false' or 'editorOnly: true' for the getter of '%s.%s', every getter is actually non-serialized.",3614:"Should not define constructor for cc.Component %s.",3615:"Each script can have at most one Component.",3616:"Should not specify class name %s for Component which defines in project.",3617:"Can not instantiate CCClass '%s' with arguments.",3618:"ctor of '%s' can not be another CCClass",3619:"ctor of '%s' must be function type",3620:"this._super declared in '%s.%s' but no super method defined",3621:"Unknown type of %s.%s, maybe you want is '%s'.",3622:"Unknown type of %s.%s, property should be defined in 'properties' or 'ctor'",3623:"Can not use 'editor' attribute, '%s' not inherits from Components.",3624:"'%s' overrided '%s' but '%s' is defined as 'false' so the super method will not be called. You can set '%s' to null to disable this warning.",3625:"[isChildClassOf] superclass should be function type, not",3626:"Can't remove '%s' because '%s' depends on it.",3627:"Should not add renderer component (%s) to a Canvas node.",3628:"Should not add %s to a node which size is already used by its other component.",3633:"Properties function of '%s' should return an object!",3634:"Disallow to use '.' in property name",3635:"Default array must be empty, set default value of %s.%s to [], and initialize in 'onLoad' or 'ctor' please. (just like 'this.%s = [...];')",3636:"Do not set default value to non-empty object, unless the object defines its own 'clone' function. Set default value of %s.%s to null or {}, and initialize in 'onLoad' or 'ctor' please. (just like 'this.%s = {foo: bar};')",3637:"Can not declare %s.%s, it is already defined in the prototype of %s",3638:"'%s': the getter of '%s' is already defined!",3639:"Can not apply the specified attribute to the getter of '%s.%s', attribute index: %s",3640:"'%s': the setter of '%s' is already defined!",3641:"Can not construct %s because it contains object property.",3642:"Cannot define %s.%s because static member name can not be '%s'.",3643:"Can not define a member called 'constructor' in the class '%s', please use 'ctor' instead.",3644:"Please define 'type' parameter of %s.%s as the actual constructor.",3645:"Please define 'type' parameter of %s.%s as the constructor of %s.",3646:"Unknown 'type' parameter of %s.%sï¼š%s",3647:"The length of range array must be equal or greater than 2",3648:"Can not declare %s.%s method, it is already defined in the properties of %s.",3649:"CCClass %s have conflict between its ctor and __ctor__.",3651:'Can not call `_super` or `prototype.ctor` in ES6 Classes "%s", use `super` instead please.',3652:"Failed to `new %s()` under the hood, %s\nIt is used for getting default values declared in TypeScript in the first place.\nPlease ensure the constructor can be called during the script's initialization.",3653:'Please do not specifiy "default" attribute in decorator of "%s" property in "%s" class.  \nDefault value must be initialized at their declaration:\n \n// Before:\n@property({\n  type: cc.Integer\n  default: 0  // <--\n})\nmyProp;\n// After:\n@property({\n  type: cc.Integer\n})\nmyProp = 0;   // <--',3654:'Please specifiy a default value for "%s.%s" at its declaration:\n \n// Before:\n@property(...)\nmyProp;\n// After:\n@property(...)\nmyProp = 0;',3655:'Can not specifiy "get" or "set"  attribute in decorator for "%s" property in "%s" class.  \nPlease use:\n \n@property(...)\nget %s () {\n    ...\n}\n@property\nset %s (value) {\n    ...\n}',3656:"The default value of %s.%s must be an empty string.",3700:"internal error: _prefab is undefined",3701:"Failed to load prefab asset for node '%s'",3800:"The target can not be made persist because it's not a cc.Node or it doesn't have _id property.",3801:"The node can not be made persist because it's not under root node.",3802:"The node can not be made persist because it's not in current scene.",3803:"The target can not be made persist because it's not a cc.Node or it doesn't have _id property.",3804:"getComponent: Type must be non-nil",3805:"Can't add component '%s' because %s already contains the same component.",3806:"Can't add component '%s' to %s because it conflicts with the existing '%s' derived component.",3807:"addComponent: Failed to get class '%s'",3808:"addComponent: Should not add component ('%s') when the scripts are still loading.",3809:"addComponent: The component to add must be a constructor",3810:"addComponent: The component to add must be child class of cc.Component",3811:"_addComponentAt: The component to add must be a constructor",3812:"_addComponentAt: Index out of range",3813:"removeComponent: Component must be non-nil",3814:"Argument must be non-nil",3815:"Component not owned by this entity",3816:"Node '%s' is already activating",3817:"Sorry, the component of '%s' which with an index of %s is corrupted! It has been removed.",3818:"Failed to read or parse project.json",3819:"Warning: target element is not a DIV or CANVAS",3820:"The renderer doesn't support the renderMode %s",3821:"Cannot change hierarchy while activating or deactivating the parent.",3900:"Invalid clip to add",3901:"Invalid clip to remove",3902:"clip is defaultClip, set force to true to force remove clip and animation state",3903:"animation state is playing, set force to true to force stop and remove clip and animation state",3904:"motion path of target [%s] in prop [%s] frame [%s] is not valid",3905:"sprite frames must be an Array.",3906:"Can't find easing type [%s]",3907:"animator not added or already removed",3912:"already-playing",4e3:"Sorry, the cc.Font has been modified from Raw Asset to Asset. Please load the font asset before using.",4003:"Label font size can't be shirnked less than 0!",4004:"force notify all fonts loaded!",4011:"Property spriteFrame of Font '%s' is invalid. Using system font instead.",4012:"The texture of Font '%s' must be already loaded on JSB. Using system font instead.",4013:"Sorry, lineHeight of system font not supported on JSB.",4200:"MaskType: IMAGE_STENCIL only support WebGL mode.",4201:"The alphaThreshold invalid in Canvas Mode.",4202:"The inverted invalid in Canvas Mode.",4300:"can not found the %s page.",4400:"Invalid RichText img tag! The sprite frame name can't be found in the ImageAtlas!",4600:"Script attached to '%s' is missing or invalid.",4700:"The dom control is not created!",4800:"unknown asset type",4901:"loadRes: should not specify the extname in %s %s",4902:"No need to release non-cached asset.",4903:"Can not get class '%s'",4914:"Resources url '%s' does not exist.",4915:"Pack indices and data do not match in size",4916:"Failed to download package for %s",4920:"Sorry, you shouldn't use id as item identity any more, please use url or uuid instead, the current id is being set as url: (%s)",4921:"Invalid pipe or invalid index provided!",4922:"The pipe to be inserted is already in the pipeline!",4923:"Uuid Loader: Parse asset [ %s ] failed : %s",4924:"JSON Loader: Input item doesn't contain string content",4925:"Uuid Loader: Deserialize asset [ %s ] failed : %s",4926:"Audio Downloader: no web audio context.",4927:"Audio Downloader: audio not supported on this browser!",4928:"Load %s failed!",4929:"Load Webp ( %s ) failed",4930:"Load image ( %s ) failed",4931:"Download Uuid: can not find type of raw asset[ %s ]: %s",4932:'Since v1.10, for any atlas ("%s") in the "resources" directory, it is not possible to find the contained SpriteFrames via `loadRes`, `getRes` or `releaseRes`. Load the SpriteAtlas first and then use `spriteAtlas.getSpriteFrame(name)` instead please.',4933:"Download Font [ %s ] failed, using Arial or system default font instead",5e3:"object already destroyed",5001:"object not yet destroyed",5100:"Not a plist file!",5200:"Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option",5201:"browser don't support web audio",5202:"This feature supports WebGL render mode only.",5300:"Type of target to deserialize not matched with data: target is %s, data is %s",5301:"Can not find script '%s'",5302:"Can not find class '%s'",5402:"cc.js.addon called on non-object:",5403:"cc.js.mixin: arguments must be type object:",5404:"The base class to extend from must be non-nil",5405:"The class to extend must be non-nil",5406:"Class should be extended before assigning any prototype members.",5500:"'notify' can not be used in 'get/set' !",5501:"'notify' must be used with 'default' !",5502:"Invalid url of %s.%s",5503:"The 'url' attribute of '%s.%s' is undefined when loading script.",5504:"The 'url' type of '%s.%s' must be child class of cc.RawAsset.",5505:"The 'url' type of '%s.%s' must not be child class of cc.Asset, otherwise you should use 'type: %s' instead.",5506:"Can not specify 'type' attribute for '%s.%s', because its 'url' is already defined.",5507:"The 'default' attribute of '%s.%s' must be an array",5508:"Invalid type of %s.%s",5509:"The 'type' attribute of '%s.%s' must be child class of cc.Asset, otherwise you should use 'url: %s' instead",5510:"The 'type' attribute of '%s.%s' can not be 'Number', use cc.Float or cc.Integer instead please.",5511:"The 'type' attribute of '%s.%s' is undefined when loading script",5512:"Can not serialize '%s.%s' because the specified type is anonymous, please provide a class name or set the 'serializable' attribute of '%s.%s' to 'false'.",5513:"The 'default' value of '%s.%s' should not be used with a 'get' function.",5514:"The 'default' value of '%s.%s' should not be used with a 'set' function.",5515:"The 'default' value of '%s.%s' can not be an constructor. Set default to null please.",5516:"Property '%s.%s' must define at least one of 'default', 'get' or 'set'.",5517:"'%s.%s' hides inherited property '%s.%s'. To make the current property override that implementation, add the `override: true` attribute please.",5601:"Can not get current scene.",5602:"Scene is destroyed",5603:"reference node is destroyed",5700:"no %s or %s on %s",5800:"%s.lerp not yet implemented.",5801:"%s.clone not yet implemented.",5802:"%s.equals not yet implemented.",5900:"MotionStreak only support WebGL mode.",5901:"cc.MotionStreak.getOpacity has not been supported.",5902:"cc.MotionStreak.setOpacity has not been supported.",6e3:"Custom should not be false if file is not specified.",6001:"The new %s must not be NaN",6017:"Incomplete or corrupt PNG file",6018:"Invalid filter algorithm: %s",6019:"Invalid byte order value.",6020:"You forgot your towel!",6021:"Unknown Field Tag: %s",6022:"Too many bits requested",6023:"No bits requested",6024:"Cannot recover from missing StripByteCounts",6025:"Cannot handle sub-byte bits per sample",6026:"Cannot handle sub-byte bits per pixel",6027:"Palette image missing color map",6028:"Unknown Photometric Interpretation: %s",6029:"Unkown error",6030:"cc.ParticleSystem: error decoding or ungzipping textureImageData",6031:"cc.ParticleSystem: unknown image format with Data",6032:"cc.ParticleSystem.initWithDictionary() : error loading the texture",6400:"asset.url is not usable in core process",6402:"AssetLibrary has already been initialized!",6500:"Widget target must be one of the parent nodes of it",6600:"collider not added or already removed",6601:"Can't find testFunc for (%s, $s).",6700:"Can't init canvas '%s' because it conflicts with the existing '%s', the scene should only have one active canvas at the same time.",6800:"Callback of event must be non-nil",6801:"The message must be provided",6900:"The thing you want to instantiate must be an object",6901:"The thing you want to instantiate is nil",6902:"The thing you want to instantiate is destroyed",6903:"The instantiate method for given asset do not implemented",6904:"Can not instantiate array",6905:"Can not instantiate DOM element",7e3:"Failed to init asset's raw path.",7001:"Should not load '%s' from script dynamically, unless it is placed in the 'resources' folder.",7002:"Sorry can not load '%s' because it is not placed in the 'resources' folder.",7003:"Failed to init builtin asset's raw path.",7100:"%s already defined in Enum.",7101:"Sorry, 'cc.Enum' not available on this platform, please report this error here: https://github.com/cocos-creator/engine/issues/new",7200:"Method 'initWithTMXFile' is no effect now, please set property 'tmxAsset' instead.",7201:"Method 'initWithXML' is no effect now, please set property 'tmxAsset' instead.",7202:"Add component TiledLayer into node failed.",7203:"Property 'mapLoaded' is unused now. Please write the logic to the callback 'start'.",7210:"TMX Hexa zOrder not supported",7211:"TMX invalid value",7215:"cocos2d: Warning: TMX Layer %s has no tiles",7216:"cocos2d: TMXFormat: Unsupported TMX version: %s",7217:"cocos2d: TMXFomat: Unsupported orientation: %s",7218:"cc.TMXMapInfo.parseXMLFile(): unsupported compression method",7219:"cc.TMXMapInfo.parseXMLFile(): Only base64 and/or gzip/zlib maps are supported",7221:"cc.TMXMapInfo.parseXMLFile(): Texture '%s' not found.",7222:"Parse %s failed.",7236:"cc.TMXLayer.getTileAt(): TMXLayer: the tiles map has been released",7237:"cc.TMXLayer.getTileGIDAt(): TMXLayer: the tiles map has been released",7238:"cc.TMXLayer.setTileGID(): TMXLayer: the tiles map has been released",7239:"cc.TMXLayer.setTileGID(): invalid gid: %s",7240:"cc.TMXLayer.getTileFlagsAt(): TMXLayer: the tiles map has been released",7241:"cc.TiledMap.initWithXML(): Map not found. Please check the filename.",7401:"Failed to set _defaultArmatureIndex for '%s' because the index is out of range.",7402:"Failed to set _animationIndex for '%s' because the index is out of range.",7501:"Failed to set _defaultSkinIndex for '%s' because the index is out of range.",7502:"Failed to set _animationIndex for '%s' because its skeletonData is invalid.",7503:"Failed to set _animationIndex for '%s' because the index is out of range.",7504:"Can not render dynamic created SkeletonData",7505:"Invalid type of atlasFile, atlas should be registered as raw asset.",7506:"Failed to load spine atlas '$s'",7507:"Please re-import '%s' because its textures is not initialized! (This workflow will be improved in the future.)",7508:"The atlas asset of '%s' is not exists!",7509:"Spine: Animation not found: %s",7510:"Spine: Animation not found: %s",7600:"The context of RenderTexture is invalid.",7601:"cc.RenderTexture._initWithWidthAndHeightForWebGL() : only RGB and RGBA formats are valid for a render texture;",7602:"Could not attach texture to the framebuffer",7603:"clearDepth isn't supported on Cocos2d-Html5",7604:"saveToFile isn't supported on Cocos2d-Html5",7605:"newCCImage isn't supported on Cocos2d-Html5",7700:"On the web is always keep the aspect ratio",7701:"Can't know status",7702:"Video player's duration is not ready to get now!",7800:"Web does not support loading",7801:"Web does not support query history",7802:"Web does not support query history",7803:"The current browser does not support the GoBack",7804:"The current browser does not support the GoForward",7805:"Web does not support zoom",7900:"cc.math.Matrix3.assign(): current matrix equals matIn",7901:"cc.math.mat4Assign(): pOut equals pIn",7902:"cc.mat.Matrix4.assignFrom(): mat4 equals current matrix",7903:"cc.math.Matrix4 equal: pMat1 and pMat2 are same object.",7904:"cc.math.Matrix4.extractPlane: Invalid plane index",7905:"cc.math.mat4Assign(): pOut equals pIn",7906:"cc.mat.Matrix4.assignFrom(): mat4 equals current matrix",7907:"cc.math.Matrix4 equals: pMat1 and pMat2 are same object.",7908:"Invalid matrix mode specified",7909:"current quaternion is an invalid value",8e3:"Can't handle this field type or size",8001:"No bytes requested",8002:"Too many bytes requested",8003:"Missing StripByteCounts!",8103:"cc.GLProgram.link(): Cannot link invalid program",8104:"cocos2d: ERROR: Failed to link program: %s",8105:"cocos2d: cc.shaderCache._loadDefaultShader, error shader type",8106:"Please load the resource firset : %s",8107:"cc.GLProgram.getUniformLocationForName(): uniform name should be non-null",8108:"cc.GLProgram.getUniformLocationForName(): Invalid operation. Cannot get uniform location when program is not initialized",8109:"modelView matrix is undefined.",8200:"Please set node's active instead of rigidbody's enabled.",8300:"Should only one camera exists, please check your project.",8301:"Camera does not support Canvas Mode.",8400:"Wrong type arguments, 'filePath' must be a String.",8401:"Since 1.10, `%s` accept %s instance directly, not a URL string. Please directly reference the %s object in your script, or load %s by loader first. Don't use %s's URL anymore.",9e3:"Stencil manager does not support level bigger than %d in this device.",9001:"Stencil manager is already empty, cannot pop any mask.",9100:"LabelAtlas '%s' cannot be loaded, raw texture does not exist.",9101:"LabelAtlas '%s' cannot be loaded, fnt data does not exist.",9102:"Program not support highp precision, will change to mediump.",9103:"%s : Failed to set property [%s], property not found.",9104:"%s : Failed to define [%s], define not found.",9105:"%s : Failed to set property [%s], property length not correct.",9106:"%s : Set property [%s] warning : should transform object to ArrayBuffer.",9107:"%s : illegal property: [%s], myabe defined an unused property;",9200:"cc.view.enableAntiAlias is deprecated now, please use cc.Texture2D.setFilters instead","0100":"%s not yet implemented."}},{}],2:[function(C$99t,C$99e,C$99i){"use strict";C$99t("../core/platform/CCClass");var C$99n=C$99t("../core/utils/misc");cc.Action=cc.Class({name:"cc.Action",ctor:function(){this.originalTarget=null,this.target=null,this.tag=cc.Action.TAG_INVALID},clone:function(){var C$99t=new cc.Action;return C$99t.originalTarget=null,C$99t.target=null,C$99t.tag=this.tag,C$99t},isDone:function(){return!0},startWithTarget:function(C$99t){this.originalTarget=C$99t,this.target=C$99t},stop:function(){this.target=null},step:function(C$99t){cc.logID(1006)},update:function(C$99t){cc.logID(1007)},getTarget:function(){return this.target},setTarget:function(C$99t){this.target=C$99t},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(C$99t){this.originalTarget=C$99t},getTag:function(){return this.tag},setTag:function(C$99t){this.tag=C$99t},retain:function(){},release:function(){}}),cc.Action.TAG_INVALID=-1,cc.FiniteTimeAction=cc.Class({name:"cc.FiniteTimeAction",extends:cc.Action,ctor:function(){this._duration=0},getDuration:function(){return this._duration*(this._timesForRepeat||1)},setDuration:function(C$99t){this._duration=C$99t},reverse:function(){return cc.logID(1008),null},clone:function(){return new cc.FiniteTimeAction}}),cc.Speed=cc.Class({name:"cc.Speed",extends:cc.Action,ctor:function(C$99t,C$99e){this._speed=0,this._innerAction=null,C$99t&&this.initWithAction(C$99t,C$99e)},getSpeed:function(){return this._speed},setSpeed:function(C$99t){this._speed=C$99t},initWithAction:function(C$99t,C$99e){return C$99t?(this._innerAction=C$99t,this._speed=C$99e,!0):(cc.errorID(1021),!1)},clone:function(){var C$99t=new cc.Speed;return C$99t.initWithAction(this._innerAction.clone(),this._speed),C$99t},startWithTarget:function(C$99t){cc.Action.prototype.startWithTarget.call(this,C$99t),this._innerAction.startWithTarget(C$99t)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},step:function(C$99t){this._innerAction.step(C$99t*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return new cc.Speed(this._innerAction.reverse(),this._speed)},setInnerAction:function(C$99t){this._innerAction!==C$99t&&(this._innerAction=C$99t)},getInnerAction:function(){return this._innerAction}}),cc.speed=function(C$99t,C$99e){return new cc.Speed(C$99t,C$99e)},cc.Follow=cc.Class({name:"cc.Follow",extends:cc.Action,ctor:function(C$99t,C$99e){this._followedNode=null,this._boundarySet=!1,this._boundaryFullyCovered=!1,this._halfScreenSize=null,this._fullScreenSize=null,this.leftBoundary=0,this.rightBoundary=0,this.topBoundary=0,this.bottomBoundary=0,this._worldRect=cc.rect(0,0,0,0),C$99t&&(C$99e?this.initWithTarget(C$99t,C$99e):this.initWithTarget(C$99t))},clone:function(){var C$99t=new cc.Follow,C$99e=this._worldRect,C$99e=new cc.Rect(C$99e.x,C$99e.y,C$99e.width,C$99e.height);return C$99t.initWithTarget(this._followedNode,C$99e),C$99t},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(C$99t){this._boundarySet=C$99t},initWithTarget:function(C$99t,C$99e){if(!C$99t)return cc.errorID(1022),!1;C$99e=C$99e||cc.rect(0,0,0,0),this._followedNode=C$99t,this._worldRect=C$99e,this._boundarySet=!(0===C$99e.width&&0===C$99e.height),this._boundaryFullyCovered=!1;C$99t=cc.winSize;return this._fullScreenSize=cc.v2(C$99t.width,C$99t.height),this._halfScreenSize=this._fullScreenSize.mul(.5),this._boundarySet&&(this.leftBoundary=-(C$99e.x+C$99e.width-this._fullScreenSize.x),this.rightBoundary=-C$99e.x,this.topBoundary=-C$99e.y,this.bottomBoundary=-(C$99e.y+C$99e.height-this._fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=(this.topBoundary+this.bottomBoundary)/2),this.topBoundary===this.bottomBoundary&&this.leftBoundary===this.rightBoundary&&(this._boundaryFullyCovered=!0)),!0},step:function(C$99t){var C$99e=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO),C$99i=this._followedNode.convertToWorldSpaceAR(cc.Vec2.ZERO),C$99e=C$99e.sub(C$99i),C$99i=this.target.parent.convertToNodeSpaceAR(C$99e.add(this._halfScreenSize));this._boundarySet?this._boundaryFullyCovered||this.target.setPosition(C$99n.clampf(C$99i.x,this.leftBoundary,this.rightBoundary),C$99n.clampf(C$99i.y,this.bottomBoundary,this.topBoundary)):this.target.setPosition(C$99i.x,C$99i.y)},isDone:function(){return!this._followedNode.activeInHierarchy},stop:function(){this.target=null,cc.Action.prototype.stop.call(this)}}),cc.follow=function(C$99t,C$99e){return new cc.Follow(C$99t,C$99e)}},{"../core/platform/CCClass":189,"../core/utils/misc":264}],3:[function(C$99t,C$99e,C$99i){"use strict";function C$99h(C$99t,C$99e){return C$99t[Math.min(C$99t.length-1,Math.max(C$99e,0))]}function C$99s(C$99t){for(var C$99e=[],C$99i=C$99t.length-1;0<=C$99i;C$99i--)C$99e.push(cc.v2(C$99t[C$99i].x,C$99t[C$99i].y));return C$99e}function C$99n(C$99t){for(var C$99e=[],C$99i=0;C$99i<C$99t.length;C$99i++)C$99e.push(cc.v2(C$99t[C$99i].x,C$99t[C$99i].y));return C$99e}cc.CardinalSplineTo=cc.Class({name:"cc.CardinalSplineTo",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i){this._points=[],this._deltaT=0,this._tension=0,this._previousPosition=null,this._accumulatedDiff=null,void 0!==C$99i&&cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i)},initWithDuration:function(C$99t,C$99e,C$99i){return C$99e&&0!==C$99e.length?!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this.setPoints(C$99e),this._tension=C$99i,!0):(cc.errorID(1024),!1)},clone:function(){var C$99t=new cc.CardinalSplineTo;return C$99t.initWithDuration(this._duration,C$99n(this._points),this._tension),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._deltaT=1/(this._points.length-1),this._previousPosition=cc.v2(this.target.x,this.target.y),this._accumulatedDiff=cc.v2(0,0)},update:function(C$99t){C$99t=this._computeEaseTime(C$99t);var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c=this._points,C$99l=(C$99t=1===C$99t?(C$99i=C$99c.length-1,1):(C$99t-(C$99e=this._deltaT)*(C$99i=0|C$99t/C$99e))/C$99e,C$99e=C$99h(C$99c,C$99i-1),C$99o=C$99h(C$99c,+C$99i),C$99s=C$99h(C$99c,C$99i+1),C$99c=C$99h(C$99c,C$99i+2),C$99i=this._tension,C$99l=(C$99i=(1-C$99i)/2)*(2*(C$99r=(C$99t=C$99t)*C$99t)-(C$99n=C$99r*C$99t)-C$99t),C$99a=C$99i*(C$99r-C$99n)+(2*C$99n-3*C$99r+1),C$99t=C$99i*(C$99n-2*C$99r+C$99t)+(-2*C$99n+3*C$99r),C$99i*=C$99n-C$99r,C$99n=C$99e.x*C$99l+C$99o.x*C$99a+C$99s.x*C$99t+C$99c.x*C$99i,C$99r=C$99e.y*C$99l+C$99o.y*C$99a+C$99s.y*C$99t+C$99c.y*C$99i,cc.v2(C$99n,C$99r));cc.macro.ENABLE_STACKABLE_ACTIONS&&(C$99o=this.target.x-this._previousPosition.x,C$99a=this.target.y-this._previousPosition.y,0==C$99o&&0===C$99a||(C$99o=(C$99s=this._accumulatedDiff).x+C$99o,C$99a=C$99s.y+C$99a,C$99s.x=C$99o,C$99s.y=C$99a,C$99l.x+=C$99o,C$99l.y+=C$99a)),this.updatePosition(C$99l)},reverse:function(){var C$99t=C$99s(this._points);return cc.cardinalSplineTo(this._duration,C$99t,this._tension)},updatePosition:function(C$99t){this.target.setPosition(C$99t),this._previousPosition=C$99t},getPoints:function(){return this._points},setPoints:function(C$99t){this._points=C$99t}}),cc.cardinalSplineTo=function(C$99t,C$99e,C$99i){return new cc.CardinalSplineTo(C$99t,C$99e,C$99i)},cc.CardinalSplineBy=cc.Class({name:"cc.CardinalSplineBy",extends:cc.CardinalSplineTo,ctor:function(C$99t,C$99e,C$99i){this._startPosition=cc.v2(0,0),void 0!==C$99i&&this.initWithDuration(C$99t,C$99e,C$99i)},startWithTarget:function(C$99t){cc.CardinalSplineTo.prototype.startWithTarget.call(this,C$99t),this._startPosition.x=C$99t.x,this._startPosition.y=C$99t.y},reverse:function(){for(var C$99t,C$99e=this._points.slice(),C$99i=C$99e[0],C$99n=1;C$99n<C$99e.length;++C$99n)C$99t=C$99e[C$99n],C$99e[C$99n]=C$99t.sub(C$99i),C$99i=C$99t;var C$99r=C$99s(C$99e),C$99i=C$99r[C$99r.length-1];C$99r.pop(),C$99i.x=-C$99i.x,C$99i.y=-C$99i.y,C$99r.unshift(C$99i);for(C$99n=1;C$99n<C$99r.length;++C$99n)(C$99t=C$99r[C$99n]).x=-C$99t.x,C$99t.y=-C$99t.y,C$99t.x+=C$99i.x,C$99t.y+=C$99i.y,C$99i=C$99r[C$99n]=C$99t;return cc.cardinalSplineBy(this._duration,C$99r,this._tension)},updatePosition:function(C$99t){var C$99e=this._startPosition,C$99i=C$99t.x+C$99e.x,C$99t=C$99t.y+C$99e.y;this._previousPosition.x=C$99i,this._previousPosition.y=C$99t,this.target.setPosition(C$99i,C$99t)},clone:function(){var C$99t=new cc.CardinalSplineBy;return C$99t.initWithDuration(this._duration,C$99n(this._points),this._tension),C$99t}}),cc.cardinalSplineBy=function(C$99t,C$99e,C$99i){return new cc.CardinalSplineBy(C$99t,C$99e,C$99i)},cc.CatmullRomTo=cc.Class({name:"cc.CatmullRomTo",extends:cc.CardinalSplineTo,ctor:function(C$99t,C$99e){C$99e&&this.initWithDuration(C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$99t,C$99e,.5)},clone:function(){var C$99t=new cc.CatmullRomTo;return C$99t.initWithDuration(this._duration,C$99n(this._points)),C$99t}}),cc.catmullRomTo=function(C$99t,C$99e){return new cc.CatmullRomTo(C$99t,C$99e)},cc.CatmullRomBy=cc.Class({name:"cc.CatmullRomBy",extends:cc.CardinalSplineBy,ctor:function(C$99t,C$99e){C$99e&&this.initWithDuration(C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,C$99t,C$99e,.5)},clone:function(){var C$99t=new cc.CatmullRomBy;return C$99t.initWithDuration(this._duration,C$99n(this._points)),C$99t}}),cc.catmullRomBy=function(C$99t,C$99e){return new cc.CatmullRomBy(C$99t,C$99e)}},{}],4:[function(C$99h,C$99u,C$99_){"use strict";cc.easeIn=function(C$99t){return{_rate:C$99t,easing:function(C$99t){return Math.pow(C$99t,this._rate)},reverse:function(){return cc.easeIn(1/this._rate)}}},cc.easeOut=function(C$99t){return{_rate:C$99t,easing:function(C$99t){return Math.pow(C$99t,1/this._rate)},reverse:function(){return cc.easeOut(1/this._rate)}}},cc.easeInOut=function(C$99t){return{_rate:C$99t,easing:function(C$99t){return(C$99t*=2)<1?.5*Math.pow(C$99t,this._rate):1-.5*Math.pow(2-C$99t,this._rate)},reverse:function(){return cc.easeInOut(this._rate)}}};var C$99t={easing:function(C$99t){return 0===C$99t?0:Math.pow(2,10*(C$99t-1))},reverse:function(){return C$99e}},C$99e=(cc.easeExponentialIn=function(){return C$99t},{easing:function(C$99t){return 1===C$99t?1:1-Math.pow(2,-10*C$99t)},reverse:function(){return C$99t}}),C$99i=(cc.easeExponentialOut=function(){return C$99e},{easing:function(C$99t){return 1!==C$99t&&0!==C$99t?(C$99t*=2)<1?.5*Math.pow(2,10*(C$99t-1)):.5*(2-Math.pow(2,-10*(C$99t-1))):C$99t},reverse:function(){return C$99i}}),C$99n=(cc.easeExponentialInOut=function(){return C$99i},{easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:-1*Math.cos(C$99t*Math.PI/2)+1},reverse:function(){return C$99r}}),C$99r=(cc.easeSineIn=function(){return C$99n},{easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:Math.sin(C$99t*Math.PI/2)},reverse:function(){return C$99n}}),C$99s=(cc.easeSineOut=function(){return C$99r},{easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:-.5*(Math.cos(Math.PI*C$99t)-1)},reverse:function(){return C$99s}}),C$99o=(cc.easeSineInOut=function(){return C$99s},{easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:(--C$99t,-Math.pow(2,10*C$99t)*Math.sin((C$99t-.075)*Math.PI*2/.3))},reverse:function(){return C$99a}}),C$99a=(cc.easeElasticIn=function(C$99t){return C$99t&&.3!==C$99t?{_period:C$99t,easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:(--C$99t,-Math.pow(2,10*C$99t)*Math.sin((C$99t-this._period/4)*Math.PI*2/this._period))},reverse:function(){return cc.easeElasticOut(this._period)}}:C$99o},{easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:Math.pow(2,-10*C$99t)*Math.sin((C$99t-.075)*Math.PI*2/.3)+1},reverse:function(){return C$99o}});function C$99c(C$99t){return C$99t<1/2.75?7.5625*C$99t*C$99t:C$99t<2/2.75?7.5625*(C$99t-=1.5/2.75)*C$99t+.75:C$99t<2.5/2.75?7.5625*(C$99t-=2.25/2.75)*C$99t+.9375:7.5625*(C$99t-=2.625/2.75)*C$99t+.984375}cc.easeElasticOut=function(C$99t){return C$99t&&.3!==C$99t?{_period:C$99t,easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:Math.pow(2,-10*C$99t)*Math.sin((C$99t-this._period/4)*Math.PI*2/this._period)+1},reverse:function(){return cc.easeElasticIn(this._period)}}:C$99a},cc.easeElasticInOut=function(C$99t){return{_period:C$99t=C$99t||.3,easing:function(C$99t){var C$99e,C$99i=this._period;return 0===C$99t||1===C$99t?C$99t:(C$99t*=2,C$99e=(C$99i=C$99i||(this._period=.3*1.5))/4,--C$99t<0?-.5*Math.pow(2,10*C$99t)*Math.sin((C$99t-C$99e)*Math.PI*2/C$99i):Math.pow(2,-10*C$99t)*Math.sin((C$99t-C$99e)*Math.PI*2/C$99i)*.5+1)},reverse:function(){return cc.easeElasticInOut(this._period)}}};var C$99l={easing:function(C$99t){return 1-C$99c(1-C$99t)},reverse:function(){return C$99d}},C$99d=(cc.easeBounceIn=function(){return C$99l},{easing:C$99c,reverse:function(){return C$99l}}),C$99f=(cc.easeBounceOut=function(){return C$99d},{easing:function(C$99t){C$99t=C$99t<.5?.5*(1-C$99c(1-(C$99t*=2))):.5*C$99c(2*C$99t-1)+.5;return C$99t},reverse:function(){return C$99f}}),C$99p=(cc.easeBounceInOut=function(){return C$99f},{easing:function(C$99t){return 0===C$99t||1===C$99t?C$99t:C$99t*C$99t*(2.70158*C$99t-1.70158)},reverse:function(){return C$99m}}),C$99m=(cc.easeBackIn=function(){return C$99p},{easing:function(C$99t){return--C$99t*C$99t*(2.70158*C$99t+1.70158)+1},reverse:function(){return C$99p}}),C$99y=(cc.easeBackOut=function(){return C$99m},{easing:function(C$99t){return(C$99t*=2)<1?C$99t*C$99t*(3.5949095*C$99t-2.5949095)/2:(C$99t-=2)*C$99t*(3.5949095*C$99t+2.5949095)/2+1},reverse:function(){return C$99y}}),C$99g=(cc.easeBackInOut=function(){return C$99y},cc.easeBezierAction=function(C$99e,C$99i,C$99n,C$99r){return{easing:function(C$99t){return Math.pow(1-C$99t,3)*C$99e+3*C$99t*Math.pow(1-C$99t,2)*C$99i+3*Math.pow(C$99t,2)*(1-C$99t)*C$99n+Math.pow(C$99t,3)*C$99r},reverse:function(){return cc.easeBezierAction(C$99r,C$99n,C$99i,C$99e)}}},{easing:function(C$99t){return Math.pow(C$99t,2)},reverse:function(){return C$99g}}),C$99v=(cc.easeQuadraticActionIn=function(){return C$99g},{easing:function(C$99t){return-C$99t*(C$99t-2)},reverse:function(){return C$99v}}),C$99x=(cc.easeQuadraticActionOut=function(){return C$99v},{easing:function(C$99t){return(C$99t*=2)<1?C$99t*C$99t*.5:-.5*(--C$99t*(C$99t-2)-1)},reverse:function(){return C$99x}}),C$99b=(cc.easeQuadraticActionInOut=function(){return C$99x},{easing:function(C$99t){return C$99t*C$99t*C$99t*C$99t},reverse:function(){return C$99b}}),C$99A=(cc.easeQuarticActionIn=function(){return C$99b},{easing:function(C$99t){return-(--C$99t*C$99t*C$99t*C$99t-1)},reverse:function(){return C$99A}}),C$99C=(cc.easeQuarticActionOut=function(){return C$99A},{easing:function(C$99t){return(C$99t*=2)<1?.5*C$99t*C$99t*C$99t*C$99t:-.5*((C$99t-=2)*C$99t*C$99t*C$99t-2)},reverse:function(){return C$99C}}),C$99S=(cc.easeQuarticActionInOut=function(){return C$99C},{easing:function(C$99t){return C$99t*C$99t*C$99t*C$99t*C$99t},reverse:function(){return C$99S}}),C$99T=(cc.easeQuinticActionIn=function(){return C$99S},{easing:function(C$99t){return--C$99t*C$99t*C$99t*C$99t*C$99t+1},reverse:function(){return C$99T}}),C$99w=(cc.easeQuinticActionOut=function(){return C$99T},{easing:function(C$99t){return(C$99t*=2)<1?.5*C$99t*C$99t*C$99t*C$99t*C$99t:.5*((C$99t-=2)*C$99t*C$99t*C$99t*C$99t+2)},reverse:function(){return C$99w}}),C$99E=(cc.easeQuinticActionInOut=function(){return C$99w},{easing:function(C$99t){return-1*(Math.sqrt(1-C$99t*C$99t)-1)},reverse:function(){return C$99E}}),C$99M=(cc.easeCircleActionIn=function(){return C$99E},{easing:function(C$99t){return--C$99t,Math.sqrt(1-C$99t*C$99t)},reverse:function(){return C$99M}}),C$99I=(cc.easeCircleActionOut=function(){return C$99M},{easing:function(C$99t){return(C$99t*=2)<1?-.5*(Math.sqrt(1-C$99t*C$99t)-1):(C$99t-=2,.5*(Math.sqrt(1-C$99t*C$99t)+1))},reverse:function(){return C$99I}}),C$99B=(cc.easeCircleActionInOut=function(){return C$99I},{easing:function(C$99t){return C$99t*C$99t*C$99t},reverse:function(){return C$99B}}),C$99R=(cc.easeCubicActionIn=function(){return C$99B},{easing:function(C$99t){return--C$99t*C$99t*C$99t+1},reverse:function(){return C$99R}}),C$99P=(cc.easeCubicActionOut=function(){return C$99R},{easing:function(C$99t){return(C$99t*=2)<1?.5*C$99t*C$99t*C$99t:.5*((C$99t-=2)*C$99t*C$99t+2)},reverse:function(){return C$99P}});cc.easeCubicActionInOut=function(){return C$99P}},{}],5:[function(C$99t,C$99e,C$99i){"use strict";cc.ActionInstant=cc.Class({name:"cc.ActionInstant",extends:cc.FiniteTimeAction,isDone:function(){return!0},step:function(C$99t){this.update(1)},update:function(C$99t){},reverse:function(){return this.clone()},clone:function(){return new cc.ActionInstant}}),cc.Show=cc.Class({name:"cc.Show",extends:cc.ActionInstant,update:function(C$99t){for(var C$99e=this.target.getComponentsInChildren(cc.RenderComponent),C$99i=0;C$99i<C$99e.length;++C$99i)C$99e[C$99i].enabled=!0},reverse:function(){return new cc.Hide},clone:function(){return new cc.Show}}),cc.show=function(){return new cc.Show},cc.Hide=cc.Class({name:"cc.Hide",extends:cc.ActionInstant,update:function(C$99t){for(var C$99e=this.target.getComponentsInChildren(cc.RenderComponent),C$99i=0;C$99i<C$99e.length;++C$99i)C$99e[C$99i].enabled=!1},reverse:function(){return new cc.Show},clone:function(){return new cc.Hide}}),cc.hide=function(){return new cc.Hide},cc.ToggleVisibility=cc.Class({name:"cc.ToggleVisibility",extends:cc.ActionInstant,update:function(C$99t){for(var C$99e=this.target.getComponentsInChildren(cc.RenderComponent),C$99i=0;C$99i<C$99e.length;++C$99i){var C$99n=C$99e[C$99i];C$99n.enabled=!C$99n.enabled}},reverse:function(){return new cc.ToggleVisibility},clone:function(){return new cc.ToggleVisibility}}),cc.toggleVisibility=function(){return new cc.ToggleVisibility},cc.RemoveSelf=cc.Class({name:"cc.RemoveSelf",extends:cc.ActionInstant,ctor:function(C$99t){this._isNeedCleanUp=!0,void 0!==C$99t&&this.init(C$99t)},update:function(C$99t){this.target.removeFromParent(this._isNeedCleanUp)},init:function(C$99t){return this._isNeedCleanUp=C$99t,!0},reverse:function(){return new cc.RemoveSelf(this._isNeedCleanUp)},clone:function(){return new cc.RemoveSelf(this._isNeedCleanUp)}}),cc.removeSelf=function(C$99t){return new cc.RemoveSelf(C$99t)},cc.DestroySelf=cc.Class({name:"cc.DestroySelf",extends:cc.ActionInstant,update:function(){this.target.destroy()},reverse:function(){return new cc.DestroySelf},clone:function(){return new cc.DestroySelf}}),cc.destroySelf=function(){return new cc.DestroySelf},cc.FlipX=cc.Class({name:"cc.FlipX",extends:cc.ActionInstant,ctor:function(C$99t){this._flippedX=!1,void 0!==C$99t&&this.initWithFlipX(C$99t)},initWithFlipX:function(C$99t){return this._flippedX=C$99t,!0},update:function(C$99t){this.target.scaleX=Math.abs(this.target.scaleX)*(this._flippedX?-1:1)},reverse:function(){return new cc.FlipX(!this._flippedX)},clone:function(){var C$99t=new cc.FlipX;return C$99t.initWithFlipX(this._flippedX),C$99t}}),cc.flipX=function(C$99t){return new cc.FlipX(C$99t)},cc.FlipY=cc.Class({name:"cc.FlipY",extends:cc.ActionInstant,ctor:function(C$99t){this._flippedY=!1,void 0!==C$99t&&this.initWithFlipY(C$99t)},initWithFlipY:function(C$99t){return this._flippedY=C$99t,!0},update:function(C$99t){this.target.scaleY=Math.abs(this.target.scaleY)*(this._flippedY?-1:1)},reverse:function(){return new cc.FlipY(!this._flippedY)},clone:function(){var C$99t=new cc.FlipY;return C$99t.initWithFlipY(this._flippedY),C$99t}}),cc.flipY=function(C$99t){return new cc.FlipY(C$99t)},cc.Place=cc.Class({name:"cc.Place",extends:cc.ActionInstant,ctor:function(C$99t,C$99e){this._x=0,void(this._y=0)!==C$99t&&(void 0!==C$99t.x&&(C$99e=C$99t.y,C$99t=C$99t.x),this.initWithPosition(C$99t,C$99e))},initWithPosition:function(C$99t,C$99e){return this._x=C$99t,this._y=C$99e,!0},update:function(C$99t){this.target.setPosition(this._x,this._y)},clone:function(){var C$99t=new cc.Place;return C$99t.initWithPosition(this._x,this._y),C$99t}}),cc.place=function(C$99t,C$99e){return new cc.Place(C$99t,C$99e)},cc.CallFunc=cc.Class({name:"cc.CallFunc",extends:cc.ActionInstant,ctor:function(C$99t,C$99e,C$99i){this._selectorTarget=null,this._function=null,this._data=null,this.initWithFunction(C$99t,C$99e,C$99i)},initWithFunction:function(C$99t,C$99e,C$99i){return C$99t&&(this._function=C$99t),C$99e&&(this._selectorTarget=C$99e),void 0!==C$99i&&(this._data=C$99i),!0},execute:function(){this._function&&this._function.call(this._selectorTarget,this.target,this._data)},update:function(C$99t){this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(C$99t){C$99t!==this._selectorTarget&&(this._selectorTarget&&(this._selectorTarget=null),this._selectorTarget=C$99t)},clone:function(){var C$99t=new cc.CallFunc;return C$99t.initWithFunction(this._function,this._selectorTarget,this._data),C$99t}}),cc.callFunc=function(C$99t,C$99e,C$99i){return new cc.CallFunc(C$99t,C$99e,C$99i)}},{}],6:[function(C$99t,C$99e,C$99i){"use strict";function C$99a(C$99t,C$99e,C$99i,C$99n,C$99r){return Math.pow(1-C$99r,3)*C$99t+3*C$99r*Math.pow(1-C$99r,2)*C$99e+3*Math.pow(C$99r,2)*(1-C$99r)*C$99i+Math.pow(C$99r,3)*C$99n}cc.ActionInterval=cc.Class({name:"cc.ActionInterval",extends:cc.FiniteTimeAction,ctor:function(C$99t){this.MAX_VALUE=2,this._elapsed=0,this._firstTick=!1,this._easeList=null,this._speed=1,this._timesForRepeat=1,this._repeatForever=!1,this._repeatMethod=!1,this._speedMethod=!1,void 0!==C$99t&&cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)},getElapsed:function(){return this._elapsed},initWithDuration:function(C$99t){return this._duration=0===C$99t?cc.macro.FLT_EPSILON:C$99t,this._elapsed=0,this._firstTick=!0},isDone:function(){return this._elapsed>=this._duration},_cloneDecoration:function(C$99t){C$99t._repeatForever=this._repeatForever,C$99t._speed=this._speed,C$99t._timesForRepeat=this._timesForRepeat,C$99t._easeList=this._easeList,C$99t._speedMethod=this._speedMethod,C$99t._repeatMethod=this._repeatMethod},_reverseEaseList:function(C$99t){if(this._easeList){C$99t._easeList=[];for(var C$99e=0;C$99e<this._easeList.length;C$99e++)C$99t._easeList.push(this._easeList[C$99e].reverse())}},clone:function(){var C$99t=new cc.ActionInterval(this._duration);return this._cloneDecoration(C$99t),C$99t},easing:function(C$99t){this._easeList?this._easeList.length=0:this._easeList=[];for(var C$99e=0;C$99e<arguments.length;C$99e++)this._easeList.push(arguments[C$99e]);return this},_computeEaseTime:function(C$99t){var C$99e=this._easeList;if(!C$99e||0===C$99e.length)return C$99t;for(var C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)C$99t=C$99e[C$99i].easing(C$99t);return C$99t},step:function(C$99t){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=C$99t;C$99t=(C$99t=this._elapsed/(1.192092896e-7<this._duration?this._duration:1.192092896e-7))<1?C$99t:1;this.update(0<C$99t?C$99t:0),this._repeatMethod&&1<this._timesForRepeat&&this.isDone()&&(this._repeatForever||this._timesForRepeat--,this.startWithTarget(this.target),this.step(this._elapsed-this._duration))},startWithTarget:function(C$99t){cc.Action.prototype.startWithTarget.call(this,C$99t),this._elapsed=0,this._firstTick=!0},reverse:function(){return cc.logID(1010),null},setAmplitudeRate:function(C$99t){cc.logID(1011)},getAmplitudeRate:function(){return cc.logID(1012),0},speed:function(C$99t){return C$99t<=0?cc.logID(1013):(this._speedMethod=!0,this._speed*=C$99t),this},getSpeed:function(){return this._speed},setSpeed:function(C$99t){return this._speed=C$99t,this},repeat:function(C$99t){return C$99t=Math.round(C$99t),isNaN(C$99t)||C$99t<1?cc.logID(1014):(this._repeatMethod=!0,this._timesForRepeat*=C$99t),this},repeatForever:function(){return this._repeatMethod=!0,this._timesForRepeat=this.MAX_VALUE,this._repeatForever=!0,this}}),cc.actionInterval=function(C$99t){return new cc.ActionInterval(C$99t)},cc.Sequence=cc.Class({name:"cc.Sequence",extends:cc.ActionInterval,ctor:function(C$99t){this._actions=[],this._split=null,this._last=0,this._reversed=!1;var C$99e=C$99t instanceof Array?C$99t:arguments;if(1!==C$99e.length){var C$99i=C$99e.length-1;if(0<=C$99i&&null==C$99e[C$99i]&&cc.logID(1015),0<=C$99i){for(var C$99n,C$99r=C$99e[0],C$99s=1;C$99s<C$99i;C$99s++)C$99e[C$99s]&&(C$99n=C$99r,C$99r=cc.Sequence._actionOneTwo(C$99n,C$99e[C$99s]));this.initWithTwoActions(C$99r,C$99e[C$99i])}}else cc.errorID(1019)},initWithTwoActions:function(C$99t,C$99e){if(!C$99t||!C$99e)return cc.errorID(1025),!1;var C$99i=C$99t._duration,C$99n=C$99e._duration,C$99i=(C$99i*=C$99t._repeatMethod?C$99t._timesForRepeat:1)+(C$99n*=C$99e._repeatMethod?C$99e._timesForRepeat:1);return this.initWithDuration(C$99i),this._actions[0]=C$99t,this._actions[1]=C$99e,!0},clone:function(){var C$99t=new cc.Sequence;return this._cloneDecoration(C$99t),C$99t.initWithTwoActions(this._actions[0].clone(),this._actions[1].clone()),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._split=this._actions[0]._duration/this._duration,this._split*=this._actions[0]._repeatMethod?this._actions[0]._timesForRepeat:1,this._last=-1},stop:function(){-1!==this._last&&this._actions[this._last].stop(),cc.Action.prototype.stop.call(this)},update:function(C$99t){var C$99e,C$99i=0,C$99n=this._split,C$99r=this._actions,C$99s=this._last;(C$99t=this._computeEaseTime(C$99t))<C$99n?(C$99e=0!==C$99n?C$99t/C$99n:1,0===C$99i&&1===C$99s&&this._reversed&&(C$99r[1].update(0),C$99r[1].stop())):(C$99e=(C$99i=1)===C$99n?1:(C$99t-C$99n)/(1-C$99n),-1===C$99s&&(C$99r[0].startWithTarget(this.target),C$99r[0].update(1),C$99r[0].stop()),0===C$99s&&(C$99r[0].update(1),C$99r[0].stop())),C$99t=C$99r[C$99i],C$99s===C$99i&&C$99t.isDone()||(C$99s!==C$99i&&C$99t.startWithTarget(this.target),C$99e*=C$99t._timesForRepeat,C$99t.update(1<C$99e?C$99e%1:C$99e),this._last=C$99i)},reverse:function(){var C$99t=cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse());return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t._reversed=!0,C$99t}}),cc.sequence=function(C$99t){var C$99e=C$99t instanceof Array?C$99t:arguments;if(1===C$99e.length)return cc.errorID(1019),null;var C$99i=C$99e.length-1,C$99n=(0<=C$99i&&null==C$99e[C$99i]&&cc.logID(1015),null);if(0<=C$99i)for(var C$99n=C$99e[0],C$99r=1;C$99r<=C$99i;C$99r++)C$99e[C$99r]&&(C$99n=cc.Sequence._actionOneTwo(C$99n,C$99e[C$99r]));return C$99n},cc.Sequence._actionOneTwo=function(C$99t,C$99e){var C$99i=new cc.Sequence;return C$99i.initWithTwoActions(C$99t,C$99e),C$99i},cc.Repeat=cc.Class({name:"cc.Repeat",extends:cc.ActionInterval,ctor:function(C$99t,C$99e){this._times=0,this._total=0,this._nextDt=0,this._actionInstant=!1,this._innerAction=null,void 0!==C$99e&&this.initWithAction(C$99t,C$99e)},initWithAction:function(C$99t,C$99e){var C$99i=C$99t._duration*C$99e;return!!this.initWithDuration(C$99i)&&(this._times=C$99e,(this._innerAction=C$99t)instanceof cc.ActionInstant&&(this._actionInstant=!0,--this._times),!(this._total=0))},clone:function(){var C$99t=new cc.Repeat;return this._cloneDecoration(C$99t),C$99t.initWithAction(this._innerAction.clone(),this._times),C$99t},startWithTarget:function(C$99t){this._total=0,this._nextDt=this._innerAction._duration/this._duration,cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._innerAction.startWithTarget(C$99t)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},update:function(C$99t){C$99t=this._computeEaseTime(C$99t);var C$99e=this._innerAction,C$99i=this._duration,C$99n=this._times,C$99r=this._nextDt;if(C$99r<=C$99t){for(;C$99r<C$99t&&this._total<C$99n;)C$99e.update(1),this._total++,C$99e.stop(),C$99e.startWithTarget(this.target),C$99r+=C$99e._duration/C$99i,this._nextDt=1<C$99r?1:C$99r;1<=C$99t&&this._total<C$99n&&(C$99e.update(1),this._total++),this._actionInstant||(this._total===C$99n?C$99e.stop():C$99e.update(C$99t-(C$99r-C$99e._duration/C$99i)))}else C$99e.update(C$99t*C$99n%1)},isDone:function(){return this._total===this._times},reverse:function(){var C$99t=new cc.Repeat(this._innerAction.reverse(),this._times);return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t},setInnerAction:function(C$99t){this._innerAction!==C$99t&&(this._innerAction=C$99t)},getInnerAction:function(){return this._innerAction}}),cc.repeat=function(C$99t,C$99e){return new cc.Repeat(C$99t,C$99e)},cc.RepeatForever=cc.Class({name:"cc.RepeatForever",extends:cc.ActionInterval,ctor:function(C$99t){this._innerAction=null,C$99t&&this.initWithAction(C$99t)},initWithAction:function(C$99t){return C$99t?(this._innerAction=C$99t,!0):(cc.errorID(1026),!1)},clone:function(){var C$99t=new cc.RepeatForever;return this._cloneDecoration(C$99t),C$99t.initWithAction(this._innerAction.clone()),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._innerAction.startWithTarget(C$99t)},step:function(C$99t){var C$99e=this._innerAction;C$99e.step(C$99t),C$99e.isDone()&&(C$99e.startWithTarget(this.target),C$99e.step(C$99e.getElapsed()-C$99e._duration))},isDone:function(){return!1},reverse:function(){var C$99t=new cc.RepeatForever(this._innerAction.reverse());return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t},setInnerAction:function(C$99t){this._innerAction!==C$99t&&(this._innerAction=C$99t)},getInnerAction:function(){return this._innerAction}}),cc.repeatForever=function(C$99t){return new cc.RepeatForever(C$99t)},cc.Spawn=cc.Class({name:"cc.Spawn",extends:cc.ActionInterval,ctor:function(C$99t){this._one=null,this._two=null;var C$99e=C$99t instanceof Array?C$99t:arguments;if(1!==C$99e.length){var C$99i=C$99e.length-1;if(0<=C$99i&&null==C$99e[C$99i]&&cc.logID(1015),0<=C$99i){for(var C$99n,C$99r=C$99e[0],C$99s=1;C$99s<C$99i;C$99s++)C$99e[C$99s]&&(C$99n=C$99r,C$99r=cc.Spawn._actionOneTwo(C$99n,C$99e[C$99s]));this.initWithTwoActions(C$99r,C$99e[C$99i])}}else cc.errorID(1020)},initWithTwoActions:function(C$99t,C$99e){if(!C$99t||!C$99e)return cc.errorID(1027),!1;var C$99i=!1,C$99n=C$99t._duration,C$99r=C$99e._duration;return this.initWithDuration(Math.max(C$99n,C$99r))&&(this._one=C$99t,this._two=C$99e,C$99r<C$99n?this._two=cc.Sequence._actionOneTwo(C$99e,cc.delayTime(C$99n-C$99r)):C$99n<C$99r&&(this._one=cc.Sequence._actionOneTwo(C$99t,cc.delayTime(C$99r-C$99n))),C$99i=!0),C$99i},clone:function(){var C$99t=new cc.Spawn;return this._cloneDecoration(C$99t),C$99t.initWithTwoActions(this._one.clone(),this._two.clone()),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._one.startWithTarget(C$99t),this._two.startWithTarget(C$99t)},stop:function(){this._one.stop(),this._two.stop(),cc.Action.prototype.stop.call(this)},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this._one&&this._one.update(C$99t),this._two&&this._two.update(C$99t)},reverse:function(){var C$99t=cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse());return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t}}),cc.spawn=function(C$99t){var C$99e=C$99t instanceof Array?C$99t:arguments;if(1===C$99e.length)return cc.errorID(1020),null;0<C$99e.length&&null==C$99e[C$99e.length-1]&&cc.logID(1015);for(var C$99i=C$99e[0],C$99n=1;C$99n<C$99e.length;C$99n++)null!=C$99e[C$99n]&&(C$99i=cc.Spawn._actionOneTwo(C$99i,C$99e[C$99n]));return C$99i},cc.Spawn._actionOneTwo=function(C$99t,C$99e){var C$99i=new cc.Spawn;return C$99i.initWithTwoActions(C$99t,C$99e),C$99i},cc.RotateTo=cc.Class({name:"cc.RotateTo",extends:cc.ActionInterval,statics:{_reverse:!1},ctor:function(C$99t,C$99e){this._startAngle=0,this._dstAngle=0,void(this._angle=0)!==C$99e&&this.initWithDuration(C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._dstAngle=C$99e,!0)},clone:function(){var C$99t=new cc.RotateTo;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._dstAngle),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t);var C$99t=C$99t.angle%360,C$99e=cc.RotateTo._reverse?this._dstAngle-C$99t:this._dstAngle+C$99t;180<C$99e&&(C$99e-=360),C$99e<-180&&(C$99e+=360),this._startAngle=C$99t,this._angle=cc.RotateTo._reverse?C$99e:-C$99e},reverse:function(){cc.logID(1016)},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this.target&&(this.target.angle=this._startAngle+this._angle*C$99t)}}),cc.rotateTo=function(C$99t,C$99e){return new cc.RotateTo(C$99t,C$99e)},cc.RotateBy=cc.Class({name:"cc.RotateBy",extends:cc.ActionInterval,statics:{_reverse:!1},ctor:function(C$99t,C$99e){C$99e*=cc.RotateBy._reverse?1:-1,this._deltaAngle=0,void(this._startAngle=0)!==C$99e&&this.initWithDuration(C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._deltaAngle=C$99e,!0)},clone:function(){var C$99t=new cc.RotateBy;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._deltaAngle),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._startAngle=C$99t.angle},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this.target&&(this.target.angle=this._startAngle+this._deltaAngle*C$99t)},reverse:function(){var C$99t=new cc.RotateBy;return C$99t.initWithDuration(this._duration,-this._deltaAngle),this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t}}),cc.rotateBy=function(C$99t,C$99e){return new cc.RotateBy(C$99t,C$99e)},cc.MoveBy=cc.Class({name:"cc.MoveBy",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i){this._positionDelta=cc.v2(0,0),this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),void 0!==C$99e&&cc.MoveBy.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i)},initWithDuration:function(C$99t,C$99e,C$99i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(void 0!==C$99e.x&&(C$99i=C$99e.y,C$99e=C$99e.x),this._positionDelta.x=C$99e,this._positionDelta.y=C$99i,!0)},clone:function(){var C$99t=new cc.MoveBy;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._positionDelta),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t);var C$99e=C$99t.x,C$99t=C$99t.y;this._previousPosition.x=C$99e,this._previousPosition.y=C$99t,this._startPosition.x=C$99e,this._startPosition.y=C$99t},update:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s;C$99t=this._computeEaseTime(C$99t),this.target&&(C$99e=this._positionDelta.x*C$99t,C$99t=this._positionDelta.y*C$99t,C$99i=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$99n=this.target.x,C$99r=this.target.y,C$99s=this._previousPosition,C$99i.x=C$99i.x+C$99n-C$99s.x,C$99i.y=C$99i.y+C$99r-C$99s.y,C$99e+=C$99i.x,C$99t+=C$99i.y,C$99s.x=C$99e,C$99s.y=C$99t,this.target.setPosition(C$99e,C$99t)):this.target.setPosition(C$99i.x+C$99e,C$99i.y+C$99t))},reverse:function(){var C$99t=new cc.MoveBy(this._duration,cc.v2(-this._positionDelta.x,-this._positionDelta.y));return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t}}),cc.moveBy=function(C$99t,C$99e,C$99i){return new cc.MoveBy(C$99t,C$99e,C$99i)},cc.MoveTo=cc.Class({name:"cc.MoveTo",extends:cc.MoveBy,ctor:function(C$99t,C$99e,C$99i){this._endPosition=cc.v2(0,0),void 0!==C$99e&&this.initWithDuration(C$99t,C$99e,C$99i)},initWithDuration:function(C$99t,C$99e,C$99i){return!!cc.MoveBy.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i)&&(void 0!==C$99e.x&&(C$99i=C$99e.y,C$99e=C$99e.x),this._endPosition.x=C$99e,this._endPosition.y=C$99i,!0)},clone:function(){var C$99t=new cc.MoveTo;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._endPosition),C$99t},startWithTarget:function(C$99t){cc.MoveBy.prototype.startWithTarget.call(this,C$99t),this._positionDelta.x=this._endPosition.x-C$99t.x,this._positionDelta.y=this._endPosition.y-C$99t.y}}),cc.moveTo=function(C$99t,C$99e,C$99i){return new cc.MoveTo(C$99t,C$99e,C$99i)},cc.SkewTo=cc.Class({name:"cc.SkewTo",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i){this._skewX=0,this._skewY=0,this._startSkewX=0,this._startSkewY=0,this._endSkewX=0,this._endSkewY=0,this._deltaX=0,void(this._deltaY=0)!==C$99i&&cc.SkewTo.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i)},initWithDuration:function(C$99t,C$99e,C$99i){var C$99n=!1;return cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._endSkewX=C$99e,this._endSkewY=C$99i,C$99n=!0),C$99n},clone:function(){var C$99t=new cc.SkewTo;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._endSkewX,this._endSkewY),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._startSkewX=C$99t.skewX%180,this._deltaX=this._endSkewX-this._startSkewX,180<this._deltaX&&(this._deltaX-=360),this._deltaX<-180&&(this._deltaX+=360),this._startSkewY=C$99t.skewY%360,this._deltaY=this._endSkewY-this._startSkewY,180<this._deltaY&&(this._deltaY-=360),this._deltaY<-180&&(this._deltaY+=360)},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this.target.skewX=this._startSkewX+this._deltaX*C$99t,this.target.skewY=this._startSkewY+this._deltaY*C$99t}}),cc.skewTo=function(C$99t,C$99e,C$99i){return new cc.SkewTo(C$99t,C$99e,C$99i)},cc.SkewBy=cc.Class({name:"cc.SkewBy",extends:cc.SkewTo,ctor:function(C$99t,C$99e,C$99i){void 0!==C$99i&&this.initWithDuration(C$99t,C$99e,C$99i)},initWithDuration:function(C$99t,C$99e,C$99i){var C$99n=!1;return cc.SkewTo.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i)&&(this._skewX=C$99e,this._skewY=C$99i,C$99n=!0),C$99n},clone:function(){var C$99t=new cc.SkewBy;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._skewX,this._skewY),C$99t},startWithTarget:function(C$99t){cc.SkewTo.prototype.startWithTarget.call(this,C$99t),this._deltaX=this._skewX,this._deltaY=this._skewY,this._endSkewX=this._startSkewX+this._deltaX,this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){var C$99t=new cc.SkewBy(this._duration,-this._skewX,-this._skewY);return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t}}),cc.skewBy=function(C$99t,C$99e,C$99i){return new cc.SkewBy(C$99t,C$99e,C$99i)},cc.JumpBy=cc.Class({name:"cc.JumpBy",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i,C$99n,C$99r){this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),this._delta=cc.v2(0,0),this._height=0,void(this._jumps=0)!==C$99n&&cc.JumpBy.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i,C$99n,C$99r)},initWithDuration:function(C$99t,C$99e,C$99i,C$99n,C$99r){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(void 0===C$99r&&(C$99r=C$99n,C$99n=C$99i,C$99i=C$99e.y,C$99e=C$99e.x),this._delta.x=C$99e,this._delta.y=C$99i,this._height=C$99n,this._jumps=C$99r,!0)},clone:function(){var C$99t=new cc.JumpBy;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._delta,this._height,this._jumps),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t);var C$99e=C$99t.x,C$99t=C$99t.y;this._previousPosition.x=C$99e,this._previousPosition.y=C$99t,this._startPosition.x=C$99e,this._startPosition.y=C$99t},update:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s;C$99t=this._computeEaseTime(C$99t),this.target&&(C$99e=C$99t*this._jumps%1,C$99e=4*this._height*C$99e*(1-C$99e),C$99e+=this._delta.y*C$99t,C$99t=this._delta.x*C$99t,C$99i=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$99n=this.target.x,C$99r=this.target.y,C$99s=this._previousPosition,C$99i.x=C$99i.x+C$99n-C$99s.x,C$99i.y=C$99i.y+C$99r-C$99s.y,C$99t+=C$99i.x,C$99e+=C$99i.y,C$99s.x=C$99t,C$99s.y=C$99e,this.target.setPosition(C$99t,C$99e)):this.target.setPosition(C$99i.x+C$99t,C$99i.y+C$99e))},reverse:function(){var C$99t=new cc.JumpBy(this._duration,cc.v2(-this._delta.x,-this._delta.y),this._height,this._jumps);return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t}}),cc.jumpBy=function(C$99t,C$99e,C$99i,C$99n,C$99r){return new cc.JumpBy(C$99t,C$99e,C$99i,C$99n,C$99r)},cc.JumpTo=cc.Class({name:"cc.JumpTo",extends:cc.JumpBy,ctor:function(C$99t,C$99e,C$99i,C$99n,C$99r){this._endPosition=cc.v2(0,0),void 0!==C$99n&&this.initWithDuration(C$99t,C$99e,C$99i,C$99n,C$99r)},initWithDuration:function(C$99t,C$99e,C$99i,C$99n,C$99r){return!!cc.JumpBy.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i,C$99n,C$99r)&&(void 0===C$99r&&(C$99i=C$99e.y,C$99e=C$99e.x),this._endPosition.x=C$99e,this._endPosition.y=C$99i,!0)},startWithTarget:function(C$99t){cc.JumpBy.prototype.startWithTarget.call(this,C$99t),this._delta.x=this._endPosition.x-this._startPosition.x,this._delta.y=this._endPosition.y-this._startPosition.y},clone:function(){var C$99t=new cc.JumpTo;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._endPosition,this._height,this._jumps),C$99t}}),cc.jumpTo=function(C$99t,C$99e,C$99i,C$99n,C$99r){return new cc.JumpTo(C$99t,C$99e,C$99i,C$99n,C$99r)},cc.BezierBy=cc.Class({name:"cc.BezierBy",extends:cc.ActionInterval,ctor:function(C$99t,C$99e){this._config=[],this._startPosition=cc.v2(0,0),this._previousPosition=cc.v2(0,0),C$99e&&cc.BezierBy.prototype.initWithDuration.call(this,C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._config=C$99e,!0)},clone:function(){for(var C$99t=new cc.BezierBy,C$99e=(this._cloneDecoration(C$99t),[]),C$99i=0;C$99i<this._config.length;C$99i++){var C$99n=this._config[C$99i];C$99e.push(cc.v2(C$99n.x,C$99n.y))}return C$99t.initWithDuration(this._duration,C$99e),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t);var C$99e=C$99t.x,C$99t=C$99t.y;this._previousPosition.x=C$99e,this._previousPosition.y=C$99t,this._startPosition.x=C$99e,this._startPosition.y=C$99t},update:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o;C$99t=this._computeEaseTime(C$99t),this.target&&(C$99e=(C$99o=this._config)[0].x,C$99i=C$99o[1].x,C$99n=C$99o[2].x,C$99r=C$99o[0].y,C$99s=C$99o[1].y,C$99o=C$99o[2].y,C$99e=C$99a(0,C$99e,C$99i,C$99n,C$99t),C$99i=C$99a(0,C$99r,C$99s,C$99o,C$99t),C$99n=this._startPosition,cc.macro.ENABLE_STACKABLE_ACTIONS?(C$99r=this.target.x,C$99s=this.target.y,C$99o=this._previousPosition,C$99n.x=C$99n.x+C$99r-C$99o.x,C$99n.y=C$99n.y+C$99s-C$99o.y,C$99e+=C$99n.x,C$99i+=C$99n.y,C$99o.x=C$99e,C$99o.y=C$99i,this.target.setPosition(C$99e,C$99i)):this.target.setPosition(C$99n.x+C$99e,C$99n.y+C$99i))},reverse:function(){var C$99t=this._config,C$99e=C$99t[0].x,C$99i=C$99t[0].y,C$99n=C$99t[1].x,C$99r=C$99t[1].y,C$99s=C$99t[2].x,C$99t=C$99t[2].y,C$99n=[cc.v2(C$99n-C$99s,C$99r-C$99t),cc.v2(C$99e-C$99s,C$99i-C$99t),cc.v2(-C$99s,-C$99t)],C$99r=new cc.BezierBy(this._duration,C$99n);return this._cloneDecoration(C$99r),this._reverseEaseList(C$99r),C$99r}}),cc.bezierBy=function(C$99t,C$99e){return new cc.BezierBy(C$99t,C$99e)},cc.BezierTo=cc.Class({name:"cc.BezierTo",extends:cc.BezierBy,ctor:function(C$99t,C$99e){this._toConfig=[],C$99e&&this.initWithDuration(C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._toConfig=C$99e,!0)},clone:function(){var C$99t=new cc.BezierTo;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._toConfig),C$99t},startWithTarget:function(C$99t){cc.BezierBy.prototype.startWithTarget.call(this,C$99t);var C$99t=this._startPosition,C$99e=this._toConfig,C$99i=this._config;C$99i[0]=C$99e[0].sub(C$99t),C$99i[1]=C$99e[1].sub(C$99t),C$99i[2]=C$99e[2].sub(C$99t)}}),cc.bezierTo=function(C$99t,C$99e){return new cc.BezierTo(C$99t,C$99e)},cc.ScaleTo=cc.Class({name:"cc.ScaleTo",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i){this._scaleX=1,this._scaleY=1,this._startScaleX=1,this._startScaleY=1,this._endScaleX=0,this._endScaleY=0,this._deltaX=0,void(this._deltaY=0)!==C$99e&&cc.ScaleTo.prototype.initWithDuration.call(this,C$99t,C$99e,C$99i)},initWithDuration:function(C$99t,C$99e,C$99i){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._endScaleX=C$99e,this._endScaleY=null!=C$99i?C$99i:C$99e,!0)},clone:function(){var C$99t=new cc.ScaleTo;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._endScaleX,this._endScaleY),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._startScaleX=C$99t.scaleX,this._startScaleY=C$99t.scaleY,this._deltaX=this._endScaleX-this._startScaleX,this._deltaY=this._endScaleY-this._startScaleY},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this.target&&(this.target.scaleX=this._startScaleX+this._deltaX*C$99t,this.target.scaleY=this._startScaleY+this._deltaY*C$99t)}}),cc.scaleTo=function(C$99t,C$99e,C$99i){return new cc.ScaleTo(C$99t,C$99e,C$99i)},cc.ScaleBy=cc.Class({name:"cc.ScaleBy",extends:cc.ScaleTo,startWithTarget:function(C$99t){cc.ScaleTo.prototype.startWithTarget.call(this,C$99t),this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX,this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){var C$99t=new cc.ScaleBy(this._duration,1/this._endScaleX,1/this._endScaleY);return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t},clone:function(){var C$99t=new cc.ScaleBy;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._endScaleX,this._endScaleY),C$99t}}),cc.scaleBy=function(C$99t,C$99e,C$99i){return new cc.ScaleBy(C$99t,C$99e,C$99i)},cc.Blink=cc.Class({name:"cc.Blink",extends:cc.ActionInterval,ctor:function(C$99t,C$99e){this._times=0,this._originalState=!1,void 0!==C$99e&&this.initWithDuration(C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._times=C$99e,!0)},clone:function(){var C$99t=new cc.Blink;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._times),C$99t},update:function(C$99t){var C$99e;C$99t=this._computeEaseTime(C$99t),this.target&&!this.isDone()&&(C$99e=1/this._times,this.target.opacity=C$99e/2<C$99t%C$99e?255:0)},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._originalState=C$99t.opacity},stop:function(){this.target.opacity=this._originalState,cc.ActionInterval.prototype.stop.call(this)},reverse:function(){var C$99t=new cc.Blink(this._duration,this._times);return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t}}),cc.blink=function(C$99t,C$99e){return new cc.Blink(C$99t,C$99e)},cc.FadeTo=cc.Class({name:"cc.FadeTo",extends:cc.ActionInterval,ctor:function(C$99t,C$99e){this._toOpacity=0,void(this._fromOpacity=0)!==C$99e&&cc.FadeTo.prototype.initWithDuration.call(this,C$99t,C$99e)},initWithDuration:function(C$99t,C$99e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._toOpacity=C$99e,!0)},clone:function(){var C$99t=new cc.FadeTo;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._toOpacity),C$99t},update:function(C$99t){C$99t=this._computeEaseTime(C$99t);var C$99e=void 0!==this._fromOpacity?this._fromOpacity:255;this.target.opacity=C$99e+(this._toOpacity-C$99e)*C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._fromOpacity=C$99t.opacity}}),cc.fadeTo=function(C$99t,C$99e){return new cc.FadeTo(C$99t,C$99e)},cc.FadeIn=cc.Class({name:"cc.FadeIn",extends:cc.FadeTo,ctor:function(C$99t){null==C$99t&&(C$99t=0),this._reverseAction=null,this.initWithDuration(C$99t,255)},reverse:function(){var C$99t=new cc.FadeOut;return C$99t.initWithDuration(this._duration,0),this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t},clone:function(){var C$99t=new cc.FadeIn;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._toOpacity),C$99t},startWithTarget:function(C$99t){this._reverseAction&&(this._toOpacity=this._reverseAction._fromOpacity),cc.FadeTo.prototype.startWithTarget.call(this,C$99t)}}),cc.fadeIn=function(C$99t){return new cc.FadeIn(C$99t)},cc.FadeOut=cc.Class({name:"cc.FadeOut",extends:cc.FadeTo,ctor:function(C$99t){null==C$99t&&(C$99t=0),this._reverseAction=null,this.initWithDuration(C$99t,0)},reverse:function(){var C$99t=new cc.FadeIn;return C$99t._reverseAction=this,C$99t.initWithDuration(this._duration,255),this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t},clone:function(){var C$99t=new cc.FadeOut;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._toOpacity),C$99t}}),cc.fadeOut=function(C$99t){return new cc.FadeOut(C$99t)},cc.TintTo=cc.Class({name:"cc.TintTo",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i,C$99n){this._to=cc.color(0,0,0),this._from=cc.color(0,0,0),C$99e instanceof cc.Color&&(C$99n=C$99e.b,C$99i=C$99e.g,C$99e=C$99e.r),void 0!==C$99n&&this.initWithDuration(C$99t,C$99e,C$99i,C$99n)},initWithDuration:function(C$99t,C$99e,C$99i,C$99n){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._to=cc.color(C$99e,C$99i,C$99n),!0)},clone:function(){var C$99t=new cc.TintTo,C$99e=(this._cloneDecoration(C$99t),this._to);return C$99t.initWithDuration(this._duration,C$99e.r,C$99e.g,C$99e.b),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._from=this.target.color},update:function(C$99t){C$99t=this._computeEaseTime(C$99t);var C$99e=this._from,C$99i=this._to;C$99e&&(this.target.color=cc.color(C$99e.r+(C$99i.r-C$99e.r)*C$99t,C$99e.g+(C$99i.g-C$99e.g)*C$99t,C$99e.b+(C$99i.b-C$99e.b)*C$99t))}}),cc.tintTo=function(C$99t,C$99e,C$99i,C$99n){return new cc.TintTo(C$99t,C$99e,C$99i,C$99n)},cc.TintBy=cc.Class({name:"cc.TintBy",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i,C$99n){this._deltaR=0,this._deltaG=0,this._deltaB=0,this._fromR=0,this._fromG=0,void(this._fromB=0)!==C$99n&&this.initWithDuration(C$99t,C$99e,C$99i,C$99n)},initWithDuration:function(C$99t,C$99e,C$99i,C$99n){return!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t)&&(this._deltaR=C$99e,this._deltaG=C$99i,this._deltaB=C$99n,!0)},clone:function(){var C$99t=new cc.TintBy;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration,this._deltaR,this._deltaG,this._deltaB),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t);C$99t=C$99t.color;this._fromR=C$99t.r,this._fromG=C$99t.g,this._fromB=C$99t.b},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this.target.color=cc.color(this._fromR+this._deltaR*C$99t,this._fromG+this._deltaG*C$99t,this._fromB+this._deltaB*C$99t)},reverse:function(){var C$99t=new cc.TintBy(this._duration,-this._deltaR,-this._deltaG,-this._deltaB);return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t}}),cc.tintBy=function(C$99t,C$99e,C$99i,C$99n){return new cc.TintBy(C$99t,C$99e,C$99i,C$99n)},cc.DelayTime=cc.Class({name:"cc.DelayTime",extends:cc.ActionInterval,update:function(C$99t){},reverse:function(){var C$99t=new cc.DelayTime(this._duration);return this._cloneDecoration(C$99t),this._reverseEaseList(C$99t),C$99t},clone:function(){var C$99t=new cc.DelayTime;return this._cloneDecoration(C$99t),C$99t.initWithDuration(this._duration),C$99t}}),cc.delayTime=function(C$99t){return new cc.DelayTime(C$99t)},cc.ReverseTime=cc.Class({name:"cc.ReverseTime",extends:cc.ActionInterval,ctor:function(C$99t){this._other=null,C$99t&&this.initWithAction(C$99t)},initWithAction:function(C$99t){return C$99t?C$99t===this._other?(cc.errorID(1029),!1):!!cc.ActionInterval.prototype.initWithDuration.call(this,C$99t._duration)&&(this._other=C$99t,!0):(cc.errorID(1028),!1)},clone:function(){var C$99t=new cc.ReverseTime;return this._cloneDecoration(C$99t),C$99t.initWithAction(this._other.clone()),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._other.startWithTarget(C$99t)},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this._other&&this._other.update(1-C$99t)},reverse:function(){return this._other.clone()},stop:function(){this._other.stop(),cc.Action.prototype.stop.call(this)}}),cc.reverseTime=function(C$99t){return new cc.ReverseTime(C$99t)},cc.TargetedAction=cc.Class({name:"cc.TargetedAction",extends:cc.ActionInterval,ctor:function(C$99t,C$99e){this._action=null,this._forcedTarget=null,C$99e&&this.initWithTarget(C$99t,C$99e)},initWithTarget:function(C$99t,C$99e){return!!this.initWithDuration(C$99e._duration)&&(this._forcedTarget=C$99t,this._action=C$99e,!0)},clone:function(){var C$99t=new cc.TargetedAction;return this._cloneDecoration(C$99t),C$99t.initWithTarget(this._forcedTarget,this._action.clone()),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t),this._action.startWithTarget(this._forcedTarget)},stop:function(){this._action.stop()},update:function(C$99t){C$99t=this._computeEaseTime(C$99t),this._action.update(C$99t)},getForcedTarget:function(){return this._forcedTarget},setForcedTarget:function(C$99t){this._forcedTarget!==C$99t&&(this._forcedTarget=C$99t)}}),cc.targetedAction=function(C$99t,C$99e){return new cc.TargetedAction(C$99t,C$99e)}},{}],7:[function(C$99t,C$99e,C$99i){"use strict";C$99t("../core/platform/CCClass");function C$99n(){this.actions=[],this.target=null,this.actionIndex=0,this.currentAction=null,this.paused=!1,this.lock=!1}var C$99r=C$99t("../core/platform/js");cc.ActionManager=function(){this._hashTargets=C$99r.createMap(!0),this._arrayTargets=[],this._currentTarget=null,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},cc.ActionManager.prototype={constructor:cc.ActionManager,_elementPool:[],_searchElementByTarget:function(C$99t,C$99e){for(var C$99i=0;C$99i<C$99t.length;C$99i++)if(C$99e===C$99t[C$99i].target)return C$99t[C$99i];return null},_getElement:function(C$99t,C$99e){var C$99i=this._elementPool.pop();return(C$99i=C$99i||new C$99n).target=C$99t,C$99i.paused=!!C$99e,C$99i},_putElement:function(C$99t){C$99t.actions.length=0,C$99t.actionIndex=0,C$99t.currentAction=null,C$99t.paused=!1,C$99t.target=null,C$99t.lock=!1,this._elementPool.push(C$99t)},addAction:function(C$99t,C$99e,C$99i){var C$99n;C$99t&&C$99e?((C$99n=this._hashTargets[C$99e._id])?C$99n.actions||(C$99n.actions=[]):(C$99n=this._getElement(C$99e,C$99i),this._hashTargets[C$99e._id]=C$99n,this._arrayTargets.push(C$99n)),C$99n.actions.push(C$99t),C$99t.startWithTarget(C$99e)):cc.errorID(1e3)},removeAllActions:function(){for(var C$99t=this._arrayTargets,C$99e=0;C$99e<C$99t.length;C$99e++){var C$99i=C$99t[C$99e];C$99i&&this._putElement(C$99i)}this._arrayTargets.length=0,this._hashTargets=C$99r.createMap(!0)},removeAllActionsFromTarget:function(C$99t,C$99e){null==C$99t||(C$99t=this._hashTargets[C$99t._id])&&(C$99t.actions.length=0,this._deleteHashElement(C$99t))},removeAction:function(C$99t){if(null!=C$99t){var C$99e=C$99t.getOriginalTarget(),C$99i=this._hashTargets[C$99e._id];if(C$99i){for(var C$99n=0;C$99n<C$99i.actions.length;C$99n++)if(C$99i.actions[C$99n]===C$99t){C$99i.actions.splice(C$99n,1),C$99i.actionIndex>=C$99n&&C$99i.actionIndex--;break}}else cc.logID(1001)}},_removeActionByTag:function(C$99t,C$99e,C$99i){for(var C$99n=0,C$99r=C$99e.actions.length;C$99n<C$99r;++C$99n){var C$99s=C$99e.actions[C$99n];if(C$99s&&C$99s.getTag()===C$99t&&(!C$99i||C$99s.getOriginalTarget()===C$99i)){this._removeActionAtIndex(C$99n,C$99e);break}}},removeActionByTag:function(C$99t,C$99e){C$99t===cc.Action.TAG_INVALID&&cc.logID(1002);var C$99i=this._hashTargets;if(C$99e){var C$99n=C$99i[C$99e._id];C$99n&&this._removeActionByTag(C$99t,C$99n,C$99e)}else for(var C$99r in C$99i){C$99r=C$99i[C$99r];this._removeActionByTag(C$99t,C$99r)}},getActionByTag:function(C$99t,C$99e){C$99t===cc.Action.TAG_INVALID&&cc.logID(1004);var C$99i=this._hashTargets[C$99e._id];if(C$99i){if(null!=C$99i.actions)for(var C$99n=0;C$99n<C$99i.actions.length;++C$99n){var C$99r=C$99i.actions[C$99n];if(C$99r&&C$99r.getTag()===C$99t)return C$99r}cc.logID(1005,C$99t)}return null},getNumberOfRunningActionsInTarget:function(C$99t){C$99t=this._hashTargets[C$99t._id];return C$99t&&C$99t.actions?C$99t.actions.length:0},pauseTarget:function(C$99t){C$99t=this._hashTargets[C$99t._id];C$99t&&(C$99t.paused=!0)},resumeTarget:function(C$99t){C$99t=this._hashTargets[C$99t._id];C$99t&&(C$99t.paused=!1)},pauseAllRunningActions:function(){for(var C$99t=[],C$99e=this._arrayTargets,C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n&&!C$99n.paused&&(C$99n.paused=!0,C$99t.push(C$99n.target))}return C$99t},resumeTargets:function(C$99t){if(C$99t)for(var C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e]&&this.resumeTarget(C$99t[C$99e])},pauseTargets:function(C$99t){if(C$99t)for(var C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e]&&this.pauseTarget(C$99t[C$99e])},purgeSharedManager:function(){cc.director.getScheduler().unscheduleUpdate(this)},_removeActionAtIndex:function(C$99t,C$99e){C$99e.actions[C$99t];C$99e.actions.splice(C$99t,1),C$99e.actionIndex>=C$99t&&C$99e.actionIndex--,0===C$99e.actions.length&&this._deleteHashElement(C$99e)},_deleteHashElement:function(C$99t){var C$99e=!1;if(C$99t&&!C$99t.lock&&this._hashTargets[C$99t.target._id]){delete this._hashTargets[C$99t.target._id];for(var C$99i=this._arrayTargets,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++)if(C$99i[C$99n]===C$99t){C$99i.splice(C$99n,1);break}this._putElement(C$99t),C$99e=!0}return C$99e},update:function(C$99t){for(var C$99e,C$99i,C$99n=this._arrayTargets,C$99r=0;C$99r<C$99n.length;C$99r++){if(this._currentTarget=C$99n[C$99r],!(C$99e=this._currentTarget).paused&&C$99e.actions){for(C$99e.lock=!0,C$99e.actionIndex=0;C$99e.actionIndex<C$99e.actions.length;C$99e.actionIndex++)C$99e.currentAction=C$99e.actions[C$99e.actionIndex],C$99e.currentAction&&(C$99e.currentAction.step(C$99t*(C$99e.currentAction._speedMethod?C$99e.currentAction._speed:1)),C$99e.currentAction&&C$99e.currentAction.isDone()&&(C$99e.currentAction.stop(),C$99i=C$99e.currentAction,C$99e.currentAction=null,this.removeAction(C$99i)),C$99e.currentAction=null);C$99e.lock=!1}0===C$99e.actions.length&&this._deleteHashElement(C$99e)&&C$99r--}}}},{"../core/platform/CCClass":189,"../core/platform/js":209}],8:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCActionManager"),C$99t("./CCAction"),C$99t("./CCActionInterval"),C$99t("./CCActionInstant"),C$99t("./CCActionEase"),C$99t("./CCActionCatmullRom"),C$99t("./tween")},{"./CCAction":2,"./CCActionCatmullRom":3,"./CCActionEase":4,"./CCActionInstant":5,"./CCActionInterval":6,"./CCActionManager":7,"./tween":9}],9:[function(C$99h,C$99u,C$99_){"use strict";var C$99l=C$99h("../animation/bezier"),C$99d=0,C$99n=cc.Class({name:"cc.TweenAction",extends:cc.ActionInterval,ctor:function(C$99t,C$99e,C$99i){this._opts=C$99i=C$99i||Object.create(null),this._props=Object.create(null),C$99i.progress=C$99i.progress||this.progress,C$99i.easing&&"string"==typeof C$99i.easing&&(C$99n=C$99i.easing,C$99i.easing=cc.easing[C$99n],C$99i.easing||cc.warnID(1031,C$99n));var C$99n,C$99r,C$99s=this._opts.relative;for(C$99r in C$99e){var C$99o,C$99a=C$99e[C$99r],C$99c=void 0,C$99l=void 0;void 0!==C$99a.value&&(C$99a.easing||C$99a.progress)&&("string"==typeof C$99a.easing?(C$99c=cc.easing[C$99a.easing])||cc.warnID(1031,C$99a.easing):C$99c=C$99a.easing,C$99l=C$99a.progress,C$99a=C$99a.value),"number"==typeof C$99a||C$99a.lerp&&(!C$99s||C$99a.add||C$99a.mul)&&C$99a.clone?((C$99o=Object.create(null)).value=C$99a,C$99o.easing=C$99c,C$99o.progress=C$99l,this._props[C$99r]=C$99o):cc.warn("Can not animate "+C$99r+" property, because it do not have [lerp, (add|mul), clone] function.")}this._originProps=C$99e,this.initWithDuration(C$99t)},clone:function(){var C$99t=new C$99n(this._duration,this._originProps,this._opts);return this._cloneDecoration(C$99t),C$99t},startWithTarget:function(C$99t){cc.ActionInterval.prototype.startWithTarget.call(this,C$99t);var C$99e,C$99i=!!this._opts.relative,C$99n=this._props;for(C$99e in C$99n){var C$99r=C$99t[C$99e],C$99s=C$99n[C$99e];"number"==typeof C$99r?(C$99s.start=C$99r,C$99s.current=C$99r,C$99s.end=C$99i?C$99r+C$99s.value:C$99s.value):(C$99s.start=C$99r.clone(),C$99s.current=C$99r.clone(),C$99s.end=C$99i?(C$99r.add||C$99r.mul).call(C$99r,C$99s.value):C$99s.value)}},update:function(C$99t){var C$99e=this._opts,C$99i=C$99t,C$99n=(C$99e.easing&&(C$99i=C$99e.easing(C$99t)),this.target);if(C$99n){var C$99r,C$99s=this._props,C$99o=this._opts.progress;for(C$99r in C$99s){var C$99a=C$99s[C$99r],C$99c=C$99a.easing?C$99a.easing(C$99t):C$99i,C$99a=C$99a.current=(C$99a.progress||C$99o)(C$99a.start,C$99a.end,C$99a.current,C$99c);C$99n[C$99r]=C$99a}}},progress:function(C$99t,C$99e,C$99i,C$99n){return"number"==typeof C$99t?C$99i=C$99t+(C$99e-C$99t)*C$99n:C$99t.lerp(C$99e,C$99n,C$99i),C$99i}}),C$99e=cc.Class({name:"cc.SetAction",extends:cc.ActionInstant,ctor:function(C$99t){this._props={},void 0!==C$99t&&this.init(C$99t)},init:function(C$99t){for(var C$99e in C$99t)this._props[C$99e]=C$99t[C$99e];return!0},update:function(){var C$99t,C$99e=this._props,C$99i=this.target;for(C$99t in C$99e)C$99i[C$99t]=C$99e[C$99t]},clone:function(){var C$99t=new C$99e;return C$99t.init(this._props),C$99t}});function C$99r(C$99t){this._actions=[],this._finalAction=null,this._target=C$99t,this._tag=cc.Action.TAG_INVALID}C$99r.stopAll=function(){cc.director.getActionManager().removeAllActions()},C$99r.stopAllByTag=function(C$99t){cc.director.getActionManager().removeActionByTag(C$99t)},C$99r.stopAllByTarget=function(C$99t){cc.director.getActionManager().removeAllActionsFromTarget(C$99t)},C$99r.prototype.then=function(C$99t){return C$99t instanceof cc.Action?this._actions.push(C$99t.clone()):this._actions.push(C$99t._union()),this},C$99r.prototype.target=function(C$99t){return this._target=C$99t,this},C$99r.prototype.start=function(){var C$99t=this._target;return C$99t?C$99t instanceof cc.Object&&!C$99t.isValid?void 0:(this._finalAction&&cc.director.getActionManager().removeAction(this._finalAction),this._finalAction=this._union(),void 0===C$99t._id&&(C$99t._id=++C$99d),this._finalAction.setTag(this._tag),cc.director.getActionManager().addAction(this._finalAction,C$99t,!1),this):(cc.warn("Please set target to tween first"),this)},C$99r.prototype.stop=function(){return this._finalAction&&cc.director.getActionManager().removeAction(this._finalAction),this},C$99r.prototype.tag=function(C$99t){return this._tag=C$99t,this},C$99r.prototype.clone=function(C$99t){var C$99e=this._union();return cc.tween(C$99t).then(C$99e.clone())},C$99r.prototype.union=function(){var C$99t=this._union();return this._actions.length=0,this._actions.push(C$99t),this},C$99r.prototype._union=function(){var C$99t=this._actions;return C$99t=1===C$99t.length?C$99t[0]:cc.sequence(C$99t)},Object.assign(C$99r.prototype,{bezierTo:function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99e.x,C$99o=C$99e.y,C$99a=C$99i.x,C$99c=C$99i.y;return(C$99r=C$99r||Object.create(null)).progress=function(C$99t,C$99e,C$99i,C$99n){return C$99i.x=(0,C$99l.bezier)(C$99t.x,C$99s,C$99a,C$99e.x,C$99n),C$99i.y=(0,C$99l.bezier)(C$99t.y,C$99o,C$99c,C$99e.y,C$99n),C$99i},this.to(C$99t,{position:C$99n},C$99r)},bezierBy:function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99e.x,C$99o=C$99e.y,C$99a=C$99i.x,C$99c=C$99i.y;return(C$99r=C$99r||Object.create(null)).progress=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99t.x,C$99t=C$99t.y;return C$99i.x=(0,C$99l.bezier)(C$99r,C$99s+C$99r,C$99a+C$99r,C$99e.x,C$99n),C$99i.y=(0,C$99l.bezier)(C$99t,C$99o+C$99t,C$99c+C$99t,C$99e.y,C$99n),C$99i},this.by(C$99t,{position:C$99n},C$99r)},flipX:function(){var C$99t=this;return this.call(function(){C$99t._target.scaleX*=-1},this)},flipY:function(){var C$99t=this;return this.call(function(){C$99t._target.scaleY*=-1},this)},blink:function(C$99t,C$99e,C$99i){var C$99r=1/C$99e;return(C$99i=C$99i||Object.create(null)).progress=function(C$99t,C$99e,C$99i,C$99n){return 1<=C$99n?C$99t:C$99r/2<C$99n%C$99r?255:0},this.to(C$99t,{opacity:1},C$99i)}});var C$99s=[];function C$99t(C$99n){return function(){C$99s.length=0;for(var C$99t=arguments.length,C$99e=0;C$99e<C$99t;C$99e++){var C$99i=C$99s[C$99e]=arguments[C$99e];C$99i instanceof C$99r&&(C$99s[C$99e]=C$99i._union())}return C$99n.apply(this,C$99s)}}for(var C$99i={to:function(C$99t,C$99e,C$99i){return(C$99i=C$99i||Object.create(null)).relative=!1,new C$99n(C$99t,C$99e,C$99i)},by:function(C$99t,C$99e,C$99i){return(C$99i=C$99i||Object.create(null)).relative=!0,new C$99n(C$99t,C$99e,C$99i)},set:function(C$99t){return new C$99e(C$99t)},delay:cc.delayTime,call:cc.callFunc,hide:cc.hide,show:cc.show,removeSelf:cc.removeSelf,sequence:C$99t(cc.sequence),parallel:C$99t(cc.spawn)},C$99f={repeat:cc.repeat,repeatForever:function(C$99t){return cc.repeat(C$99t,1e9)},reverseTime:cc.reverseTime},C$99o=Object.keys(C$99i),C$99a=0;C$99a<C$99o.length;C$99a++)!function(C$99t){var C$99e=C$99o[C$99t];C$99r.prototype[C$99e]=function(){var C$99t=C$99i[C$99e].apply(this,arguments);return this._actions.push(C$99t),this}}(C$99a);for(var C$99o=Object.keys(C$99f),C$99c=0;C$99c<C$99o.length;C$99c++)!function(C$99t){var C$99s=C$99o[C$99t];C$99r.prototype[C$99s]=function(){for(var C$99t=this._actions,C$99e=arguments[arguments.length-1],C$99i=arguments.length-1,C$99n=(C$99e instanceof cc.Tween?C$99e=C$99e._union():C$99e instanceof cc.Action||(C$99e=C$99t[C$99t.length-1],--C$99t.length,C$99i+=1),[C$99e]),C$99r=0;C$99r<C$99i;C$99r++)C$99n.push(arguments[C$99r]);return C$99e=C$99f[C$99s].apply(this,C$99n),C$99t.push(C$99e),this}}(C$99c);cc.tween=function(C$99t){return new C$99r(C$99t)},cc.Tween=C$99r},{"../animation/bezier":15}],10:[function(C$99t,C$99e,C$99a){"use strict";var C$99i=cc.js,C$99n=C$99t("./playable"),C$99r=C$99t("./animation-curves"),C$99_=C$99r.EventAnimCurve,C$99d=C$99r.EventInfo,C$99f=C$99t("./types").WrapModeMask,C$99p=C$99t("../core/utils/binary-search").binarySearchEpsilon;function C$99s(C$99t,C$99e){C$99n.call(this),this.target=C$99t,this.animation=C$99e,this._anims=new C$99i.array.MutableForwardIterator([])}C$99i.extend(C$99s,C$99n);C$99r=C$99s.prototype;function C$99o(C$99t,C$99e){var C$99i=C$99e.clip,C$99h=(C$99e.duration=C$99i.duration,C$99e.speed=C$99i.speed,C$99e.wrapMode=C$99i.wrapMode,C$99e.frameRate=C$99i.sample,(C$99e.wrapMode&C$99f.Loop)===C$99f.Loop?C$99e.repeatCount=1/0:C$99e.repeatCount=1,C$99e.curves=C$99i.createCurves(C$99e,C$99t)),C$99n=C$99i.events;if(C$99n)for(var C$99r,C$99s=0,C$99u=C$99n.length;C$99s<C$99u;C$99s++){C$99r||((C$99r=new C$99_).target=C$99t,C$99h.push(C$99r));var C$99o=C$99n[C$99s],C$99a=C$99o.frame/C$99e.duration,C$99c=void 0,C$99l=C$99p(C$99r.ratios,C$99a);0<=C$99l?C$99c=C$99r.events[C$99l]:(C$99c=new C$99d,C$99r.ratios.push(C$99a),C$99r.events.push(C$99c)),C$99c.add(C$99o.func,C$99o.params)}}C$99r.playState=function(C$99t,C$99e){C$99t.clip&&(C$99t.curveLoaded||C$99o(this.target,C$99t),C$99t.animator=this,C$99t.play(),"number"==typeof C$99e&&C$99t.setTime(C$99e),this.play())},C$99r.stopStatesExcept=function(C$99t){var C$99e=this._anims,C$99i=C$99e.array;for(C$99e.i=0;C$99e.i<C$99i.length;++C$99e.i){var C$99n=C$99i[C$99e.i];C$99n!==C$99t&&this.stopState(C$99n)}},C$99r.addAnimation=function(C$99t){-1===this._anims.array.indexOf(C$99t)&&this._anims.push(C$99t),C$99t._setEventTarget(this.animation)},C$99r.removeAnimation=function(C$99t){var C$99e=this._anims.array.indexOf(C$99t);0<=C$99e?(this._anims.fastRemoveAt(C$99e),0===this._anims.array.length&&this.stop()):cc.errorID(3907),C$99t.animator=null},C$99r.sample=function(){var C$99t=this._anims,C$99e=C$99t.array;for(C$99t.i=0;C$99t.i<C$99e.length;++C$99t.i)C$99e[C$99t.i].sample()},C$99r.stopState=function(C$99t){C$99t&&C$99t.stop()},C$99r.pauseState=function(C$99t){C$99t&&C$99t.pause()},C$99r.resumeState=function(C$99t){C$99t&&C$99t.resume(),this.isPaused&&this.resume()},C$99r.setStateTime=function(C$99t,C$99e){if(void 0!==C$99e)C$99t&&(C$99t.setTime(C$99e),C$99t.sample());else{C$99e=C$99t;for(var C$99i=this._anims.array,C$99n=0;C$99n<C$99i.length;++C$99n){var C$99r=C$99i[C$99n];C$99r.setTime(C$99e),C$99r.sample()}}},C$99r.onStop=function(){var C$99t=this._anims,C$99e=C$99t.array;for(C$99t.i=0;C$99t.i<C$99e.length;++C$99t.i)C$99e[C$99t.i].stop()},C$99r.onPause=function(){for(var C$99t=this._anims.array,C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e];C$99i.pause(),C$99i.animator=null}},C$99r.onResume=function(){for(var C$99t=this._anims.array,C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e];C$99i.animator=this,C$99i.resume()}},C$99r._reloadClip=function(C$99t){C$99o(this.target,C$99t)},C$99e.exports=C$99s},{"../core/utils/binary-search":256,"./animation-curves":12,"./playable":19,"./types":20}],11:[function(C$99t,C$99e,C$99r){"use strict";var C$99i=C$99t("./types").WrapMode,C$99n=C$99t("./animation-curves"),C$99m=C$99n.DynamicAnimCurve,C$99y=C$99n.quickFindIndex,C$99g=C$99t("./motion-path-helper").sampleMotionPaths,C$99v=C$99t("../core/utils/binary-search").binarySearchEpsilon,C$99a=cc.Class({name:"cc.AnimationClip",extends:cc.Asset,properties:{_duration:{default:0,type:cc.Float},duration:{get:function(){return this._duration}},sample:{default:60},speed:{default:1},wrapMode:{default:C$99i.Normal},curveData:{default:{},visible:!1},events:{default:[],visible:!1}},statics:{createWithSpriteFrames:function(C$99t,C$99e){if(!Array.isArray(C$99t))return cc.errorID(3905),null;for(var C$99i=new C$99a,C$99n=(C$99i.sample=C$99e||C$99i.sample,C$99i._duration=C$99t.length/C$99i.sample,[]),C$99r=1/C$99i.sample,C$99s=0,C$99o=C$99t.length;C$99s<C$99o;C$99s++)C$99n[C$99s]={frame:C$99s*C$99r,value:C$99t[C$99s]};return C$99i.curveData={comps:{"cc.Sprite":{spriteFrame:C$99n}}},C$99i}},onLoad:function(){this._duration=Number.parseFloat(this.duration),this.speed=Number.parseFloat(this.speed),this.wrapMode=Number.parseInt(this.wrapMode),this.frameRate=Number.parseFloat(this.sample)},createPropCurve:function(C$99t,C$99e,C$99i){var C$99h=[],C$99u=C$99t instanceof cc.Node&&"position"===C$99e,C$99n=new C$99m;C$99n.target=C$99t,C$99n.prop=C$99e;for(var C$99r=0,C$99_=C$99i.length;C$99r<C$99_;C$99r++){var C$99s=C$99i[C$99r],C$99o=C$99s.frame/this.duration,C$99o=(C$99n.ratios.push(C$99o),C$99u&&C$99h.push(C$99s.motionPath),C$99s.value),C$99o=(C$99n.values.push(C$99o),C$99s.curve);if(C$99o){if("string"==typeof C$99o){C$99n.types.push(C$99o);continue}if(Array.isArray(C$99o)){C$99o[0]===C$99o[1]&&C$99o[2]===C$99o[3]?C$99n.types.push(C$99m.Linear):C$99n.types.push(C$99m.Bezier(C$99o));continue}}C$99n.types.push(C$99m.Linear)}C$99u&&C$99g(C$99h,C$99n,this.duration,this.sample,C$99t);for(var C$99a,C$99d,C$99c=C$99n.ratios,C$99f=!0,C$99l=1,C$99p=C$99c.length;C$99l<C$99p;C$99l++)if(C$99a=C$99c[C$99l]-C$99c[C$99l-1],1===C$99l)C$99d=C$99a;else if(1e-6<Math.abs(C$99a-C$99d)){C$99f=!1;break}C$99n._findFrameIndex=C$99f?C$99y:C$99v;C$99e=C$99n.values[0];return null==C$99e||C$99n._lerp||("number"==typeof C$99e?C$99n._lerp=C$99m.prototype._lerpNumber:C$99e instanceof cc.Quat?C$99n._lerp=C$99m.prototype._lerpQuat:C$99e instanceof cc.Vec2||C$99e instanceof cc.Vec3?C$99n._lerp=C$99m.prototype._lerpVector:C$99e.lerp&&(C$99n._lerp=C$99m.prototype._lerpObject)),C$99n},createTargetCurves:function(C$99t,C$99e,C$99i){var C$99n=C$99e.props,C$99r=C$99e.comps;if(C$99n)for(var C$99s in C$99n){var C$99h=C$99n[C$99s],C$99s=this.createPropCurve(C$99t,C$99s,C$99h);C$99i.push(C$99s)}if(C$99r)for(var C$99o in C$99r){var C$99a=C$99t.getComponent(C$99o);if(C$99a){var C$99c,C$99l=C$99r[C$99o];for(C$99c in C$99l){var C$99u=C$99l[C$99c],C$99u=this.createPropCurve(C$99a,C$99c,C$99u);C$99i.push(C$99u)}}}},createCurves:function(C$99t,C$99e){var C$99i,C$99n=this.curveData,C$99r=C$99n.paths,C$99s=[];for(C$99i in this.createTargetCurves(C$99e,C$99n,C$99s),C$99r){var C$99o,C$99a=cc.find(C$99i,C$99e);C$99a&&(C$99o=C$99r[C$99i],this.createTargetCurves(C$99a,C$99o,C$99s))}return C$99s}});cc.AnimationClip=C$99e.exports=C$99a},{"../core/utils/binary-search":256,"./animation-curves":12,"./motion-path-helper":18,"./types":20}],12:[function(C$99t,C$99e,C$99o){"use strict";var C$99a=C$99t("./bezier").bezierByTime,C$99_=C$99t("../core/utils/binary-search").binarySearchEpsilon,C$99d=C$99t("./types").WrapModeMask,C$99f=C$99t("./types").WrappedInfo;function C$99l(C$99t,C$99e){var C$99i;return"string"==typeof C$99e?(C$99i=cc.easing[C$99e])?C$99t=C$99i(C$99t):cc.errorID(3906,C$99e):Array.isArray(C$99e)&&(C$99t=C$99a(C$99e,C$99t)),C$99t}C$99t=cc.Class({name:"cc.AnimCurve",sample:function(C$99t,C$99e,C$99i){},onTimeChangedManually:void 0});function C$99i(){this.events=[]}var C$99n,C$99r,C$99s=cc.Class({name:"cc.DynamicAnimCurve",extends:C$99t,ctor:function(){this._cachedIndex=0},properties:{target:null,prop:"",values:[],ratios:[],types:[]},_findFrameIndex:C$99_,_lerp:void 0,_lerpNumber:function(C$99t,C$99e,C$99i){return C$99t+(C$99e-C$99t)*C$99i},_lerpObject:function(C$99t,C$99e,C$99i){return C$99t.lerp(C$99e,C$99i)},_lerpQuat:(C$99r=cc.quat(),function(C$99t,C$99e,C$99i){return C$99t.lerp(C$99e,C$99i,C$99r)}),_lerpVector:(C$99n=cc.v3(),function(C$99t,C$99e,C$99i){return C$99t.lerp(C$99e,C$99i,C$99n)}),sample:function(C$99t,C$99e,C$99i){var C$99n,C$99r,C$99s,C$99o=this.values,C$99a=this.ratios,C$99c=C$99a.length;0!==C$99c&&(C$99r=!0,(C$99n=this._cachedIndex)<0&&0<(C$99n=~C$99n)&&C$99n<C$99a.length&&(C$99s=C$99a[C$99n-1],C$99n=C$99a[C$99n],C$99s<C$99e&&C$99e<C$99n&&(C$99r=!1)),C$99r&&(this._cachedIndex=this._findFrameIndex(C$99a,C$99e)),C$99r=(C$99s=this._cachedIndex)<0?(C$99s=~C$99s)<=0?C$99o[0]:C$99c<=C$99s?C$99o[C$99c-1]:(C$99n=C$99o[C$99s-1],this._lerp?(C$99c=(C$99e-(C$99r=C$99a[C$99s-1]))/(C$99a[C$99s]-C$99r),(C$99e=this.types[C$99s-1])&&(C$99c=C$99l(C$99c,C$99e)),C$99a=C$99o[C$99s],this._lerp(C$99n,C$99a,C$99c)):C$99n):C$99o[C$99s],this.target[this.prop]=C$99r)}}),C$99c=(C$99s.Linear=null,C$99s.Bezier=function(C$99t){return C$99t},C$99i.prototype.add=function(C$99t,C$99e){this.events.push({func:C$99t||"",params:C$99e||[]})},cc.Class({name:"cc.EventAnimCurve",extends:C$99t,properties:{target:null,ratios:[],events:[],_wrappedInfo:{default:function(){return new C$99f}},_lastWrappedInfo:null,_ignoreIndex:NaN},_wrapIterations:function(C$99t){return C$99t-(0|C$99t)==0&&--C$99t,0|C$99t},sample:function(C$99h,C$99u,C$99t){var C$99e=this.ratios.length,C$99i=C$99t.getWrappedInfo(C$99t.time,this._wrappedInfo),C$99n=C$99i.direction,C$99r=C$99_(this.ratios,C$99i.ratio);if(C$99r<0&&(C$99r=~C$99r-1,C$99n<0&&(C$99r+=1)),this._ignoreIndex!==C$99r&&(this._ignoreIndex=NaN),C$99i.frameIndex=C$99r,!this._lastWrappedInfo)return this._fireEvent(C$99r),void(this._lastWrappedInfo=new C$99f(C$99i));var C$99s=C$99t.wrapMode,C$99o=this._wrapIterations(C$99i.iterations),C$99t=this._lastWrappedInfo,C$99a=this._wrapIterations(C$99t.iterations),C$99c=C$99t.frameIndex,C$99t=C$99t.direction,C$99l=-1!==C$99a&&C$99o!==C$99a;if(C$99c===C$99r&&C$99l&&1===C$99e)this._fireEvent(0);else if(C$99c!==C$99r||C$99l){C$99n=C$99t;do{if(C$99c!==C$99r){if(-1===C$99n&&0===C$99c&&0<C$99r?((C$99s&C$99d.PingPong)===C$99d.PingPong?C$99n*=-1:C$99c=C$99e,C$99a++):1===C$99n&&C$99c===C$99e-1&&C$99r<C$99e-1&&((C$99s&C$99d.PingPong)===C$99d.PingPong?C$99n*=-1:C$99c=-1,C$99a++),C$99c===C$99r)break;if(C$99o<C$99a)break}}while(C$99c+=C$99n,cc.director.getAnimationManager().pushDelayEvent(this,"_fireEvent",[C$99c]),C$99c!==C$99r&&-1<C$99c&&C$99c<C$99e)}this._lastWrappedInfo.set(C$99i)},_fireEvent:function(C$99t){if(!(C$99t<0||C$99t>=this.events.length||this._ignoreIndex===C$99t)){var C$99e=this.events[C$99t].events;if(this.target.isValid)for(var C$99i=this.target._components,C$99n=0;C$99n<C$99e.length;C$99n++)for(var C$99r=C$99e[C$99n],C$99s=C$99r.func,C$99o=0;C$99o<C$99i.length;C$99o++){var C$99a=C$99i[C$99o],C$99c=C$99a[C$99s];C$99c&&C$99c.apply(C$99a,C$99r.params)}}},onTimeChangedManually:function(C$99t,C$99e){this._lastWrappedInfo=null,this._ignoreIndex=NaN;C$99e=C$99e.getWrappedInfo(C$99t,this._wrappedInfo),C$99t=C$99e.direction,C$99e=C$99_(this.ratios,C$99e.ratio);C$99e<0&&(C$99e=~C$99e-1,C$99t<0&&(C$99e+=1),this._ignoreIndex=C$99e)}}));C$99e.exports={AnimCurve:C$99t,DynamicAnimCurve:C$99s,EventAnimCurve:C$99c,EventInfo:C$99i,computeRatioByType:C$99l,quickFindIndex:function(C$99t,C$99e){var C$99i=C$99t.length-1;if(0==C$99i)return 0;var C$99n=C$99t[0];if(C$99e<C$99n)return 0;var C$99r=C$99t[C$99i];return C$99r<C$99e?~C$99t.length:(C$99t=(C$99e=(C$99e-C$99n)/(C$99r-C$99n))/(1/C$99i))-(C$99r=0|C$99t)<1e-6?C$99r:1+C$99r-C$99t<1e-6?1+C$99r:~(1+C$99r)}}},{"../core/utils/binary-search":256,"./bezier":15,"./types":20}],13:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.js,C$99r=cc.Class({ctor:function(){this._anims=new C$99n.array.MutableForwardIterator([]),this._delayEvents=[],cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},update:function(C$99t){var C$99e=this._anims,C$99i=C$99e.array;for(C$99e.i=0;C$99e.i<C$99i.length;++C$99e.i){var C$99n=C$99i[C$99e.i];C$99n._isPlaying&&!C$99n._isPaused&&C$99n.update(C$99t)}for(var C$99r=this._delayEvents,C$99s=0;C$99s<C$99r.length;C$99s++){var C$99o=C$99r[C$99s];C$99o.target[C$99o.func].apply(C$99o.target,C$99o.args)}C$99r.length=0},destruct:function(){},addAnimation:function(C$99t){-1===this._anims.array.indexOf(C$99t)&&this._anims.push(C$99t)},removeAnimation:function(C$99t){C$99t=this._anims.array.indexOf(C$99t);0<=C$99t?this._anims.fastRemoveAt(C$99t):cc.errorID(3907)},pushDelayEvent:function(C$99t,C$99e,C$99i){this._delayEvents.push({target:C$99t,func:C$99e,args:C$99i})}});cc.AnimationManager=C$99e.exports=C$99r},{}],14:[function(C$99t,C$99e,C$99h){"use strict";var C$99i=cc.js,C$99n=C$99t("./playable"),C$99t=C$99t("./types"),C$99c=C$99t.WrappedInfo,C$99r=C$99t.WrapMode,C$99l=C$99t.WrapModeMask;function C$99s(C$99t,C$99e){C$99n.call(this),this._currentFramePlayed=!1,this._delay=0,this._delayTime=0,this._wrappedInfo=new C$99c,this._lastWrappedInfo=null,this._process=C$99o,this._clip=C$99t,this._name=C$99e||C$99t&&C$99t.name,this.animator=null,this.curves=[],this.delay=0,this.repeatCount=1,this.duration=1,this.speed=1,this.wrapMode=C$99r.Normal,this.time=0,this._target=null,this._lastframeEventOn=!1,this.emit=function(){for(var C$99t=new Array(arguments.length),C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)C$99t[C$99e]=arguments[C$99e];cc.director.getAnimationManager().pushDelayEvent(this,"_emit",C$99t)}}C$99i.extend(C$99s,C$99n);C$99t=C$99s.prototype;function C$99o(){var C$99t,C$99e=this.sample();this._lastframeEventOn&&(C$99t=this._lastWrappedInfo||(this._lastWrappedInfo=new C$99c(C$99e)),1<this.repeatCount&&(0|C$99e.iterations)>(0|C$99t.iterations)&&this.emit("lastframe",this),C$99t.set(C$99e)),C$99e.stopped&&(this.stop(),this.emit("finished",this))}function C$99a(){for(var C$99t=this.time,C$99e=this.duration,C$99i=(C$99e<C$99t?0===(C$99t%=C$99e)&&(C$99t=C$99e):C$99t<0&&0!==(C$99t%=C$99e)&&(C$99t+=C$99e),C$99t/C$99e),C$99n=this.curves,C$99r=0,C$99s=C$99n.length;C$99r<C$99s;C$99r++)C$99n[C$99r].sample(C$99t,C$99i,this);this._lastframeEventOn&&(void 0===this._lastIterations&&(this._lastIterations=C$99i),(0<this.time&&this._lastIterations>C$99i||this.time<0&&this._lastIterations<C$99i)&&this.emit("lastframe",this),this._lastIterations=C$99i)}C$99t._emit=function(C$99t,C$99e){this._target&&this._target.isValid&&this._target.emit(C$99t,C$99t,C$99e)},C$99t.on=function(C$99t,C$99e,C$99i){return this._target&&this._target.isValid?("lastframe"===C$99t&&(this._lastframeEventOn=!0),this._target.on(C$99t,C$99e,C$99i)):null},C$99t.once=function(C$99t,C$99e,C$99i){var C$99n;return this._target&&this._target.isValid?("lastframe"===C$99t&&(this._lastframeEventOn=!0),(C$99n=this)._target.once(C$99t,function(C$99t){C$99e.call(C$99i,C$99t),C$99n._lastframeEventOn=!1})):null},C$99t.off=function(C$99t,C$99e,C$99i){this._target&&this._target.isValid&&("lastframe"===C$99t&&(this._target.hasEventListener(C$99t)||(this._lastframeEventOn=!1)),this._target.off(C$99t,C$99e,C$99i))},C$99t._setEventTarget=function(C$99t){this._target=C$99t},C$99t.onPlay=function(){this.setTime(0),this._delayTime=this._delay,cc.director.getAnimationManager().addAnimation(this),this.animator&&this.animator.addAnimation(this),this.emit("play",this)},C$99t.onStop=function(){this.isPaused||cc.director.getAnimationManager().removeAnimation(this),this.animator&&this.animator.removeAnimation(this),this.emit("stop",this)},C$99t.onResume=function(){cc.director.getAnimationManager().addAnimation(this),this.emit("resume",this)},C$99t.onPause=function(){cc.director.getAnimationManager().removeAnimation(this),this.emit("pause",this)},C$99t.setTime=function(C$99t){this._currentFramePlayed=!1,this.time=C$99t||0;for(var C$99e=this.curves,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];C$99r.onTimeChangedManually&&C$99r.onTimeChangedManually(C$99t,this)}},C$99t.update=function(C$99t){0<this._delayTime&&(this._delayTime-=C$99t,0<this._delayTime)||(this._currentFramePlayed?this.time+=C$99t*this.speed:this._currentFramePlayed=!0,this._process())},C$99t._needRevers=function(C$99t){var C$99e=this.wrapMode,C$99i=!1;return(C$99e&C$99l.PingPong)===C$99l.PingPong&&(C$99t-(0|C$99t)==0&&0<C$99t&&--C$99t,1&C$99t&&(C$99i=!C$99i)),C$99i=(C$99e&C$99l.Reverse)===C$99l.Reverse?!C$99i:C$99i},C$99t.getWrappedInfo=function(C$99t,C$99e){C$99e=C$99e||new C$99c;var C$99i=!1,C$99n=this.duration,C$99r=this.repeatCount,C$99s=0<C$99t?C$99t/C$99n:-C$99t/C$99n,C$99r=(C$99r<=C$99s&&(C$99i=!0,C$99t=(C$99r=0===(C$99r=(C$99s=C$99r)-(0|C$99r))?1:C$99r)*C$99n*(0<C$99t?1:-1)),C$99n<C$99t?C$99t=0==(C$99r=C$99t%C$99n)?C$99n:C$99r:C$99t<0&&0!==(C$99t%=C$99n)&&(C$99t+=C$99n),!1),C$99o=this._wrapMode&C$99l.ShouldWrap,C$99a=(C$99r=C$99o?this._needRevers(C$99s):C$99r)?-1:1;return this.speed<0&&(C$99a*=-1),C$99e.ratio=(C$99t=C$99o&&C$99r?C$99n-C$99t:C$99t)/C$99n,C$99e.time=C$99t,C$99e.direction=C$99a,C$99e.stopped=C$99i,C$99e.iterations=C$99s,C$99e},C$99t.sample=function(){for(var C$99t=this.getWrappedInfo(this.time,this._wrappedInfo),C$99e=this.curves,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)C$99e[C$99i].sample(C$99t.time,C$99t.ratio,this);return C$99t},C$99i.get(C$99t,"clip",function(){return this._clip}),C$99i.get(C$99t,"name",function(){return this._name}),C$99i.obsolete(C$99t,"AnimationState.length","duration"),C$99i.getset(C$99t,"curveLoaded",function(){return 0<this.curves.length},function(){this.curves.length=0}),C$99i.getset(C$99t,"wrapMode",function(){return this._wrapMode},function(C$99t){this._wrapMode=C$99t,this.time=0,C$99t&C$99l.Loop?this.repeatCount=1/0:this.repeatCount=1}),C$99i.getset(C$99t,"repeatCount",function(){return this._repeatCount},function(C$99t){this._repeatCount=C$99t;var C$99e=this._wrapMode&C$99l.ShouldWrap,C$99i=(this.wrapMode&C$99l.Reverse)===C$99l.Reverse;this._process=1/0!==C$99t||C$99e||C$99i?C$99o:C$99a}),C$99i.getset(C$99t,"delay",function(){return this._delay},function(C$99t){this._delayTime=this._delay=C$99t}),cc.AnimationState=C$99e.exports=C$99s},{"./playable":19,"./types":20}],15:[function(C$99t,C$99e,C$99i){"use strict";var C$99h=Math.cos,C$99u=Math.acos,C$99_=Math.max,C$99d=2*Math.PI,C$99f=Math.sqrt;function C$99p(C$99t){return C$99t<0?-Math.pow(-C$99t,1/3):Math.pow(C$99t,1/3)}C$99e.exports={bezier:function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=1-C$99r;return C$99s*(C$99s*(C$99t+(3*C$99e-C$99t)*C$99r)+3*C$99i*C$99r*C$99r)+C$99n*C$99r*C$99r*C$99r},bezierByTime:function(C$99t,C$99e){var C$99e=function(C$99t,C$99e){var C$99i,C$99n,C$99r=+C$99e,C$99s=C$99e-C$99t[0],C$99o=3*C$99r,C$99a=3*C$99s,C$99t=3*(C$99e-C$99t[2]),C$99t=1/3*(C$99s=(C$99o-6*C$99s+C$99t)*(C$99e=1/(C$99a-C$99r-C$99t+(C$99e-1)))),C$99o=1/3*(3*(C$99a=(C$99a-C$99o)*C$99e)-C$99s*C$99s);if((C$99r=(C$99a=(C$99s=(2*C$99s*C$99s*C$99s-9*C$99s*C$99a+27*(C$99r*C$99e))/27)/2)*C$99a+(C$99l=1/3*C$99o)*C$99l*C$99l)<0)return C$99l=C$99f((C$99e=1/3*-C$99o)*C$99e*C$99e),C$99e=C$99u((C$99o=-C$99s/(2*C$99l))<-1?-1:1<C$99o?1:C$99o),C$99i=(C$99s=2*C$99p(C$99l))*C$99h(C$99e*(1/3))-C$99t,C$99n=C$99s*C$99h((C$99e+C$99d)*(1/3))-C$99t,C$99o=C$99s*C$99h((C$99e+2*C$99d)*(1/3))-C$99t,0<=C$99i&&C$99i<=1?0<=C$99n&&C$99n<=1?0<=C$99o&&C$99o<=1?C$99_(C$99i,C$99n,C$99o):C$99_(C$99i,C$99n):0<=C$99o&&C$99o<=1?C$99_(C$99i,C$99o):C$99i:0<=C$99n&&C$99n<=1?0<=C$99o&&C$99o<=1?C$99_(C$99n,C$99o):C$99n:C$99o;if(0==C$99r)return C$99n=-(C$99c=C$99a<0?C$99p(-C$99a):-C$99p(C$99a))-C$99t,0<=(C$99i=2*C$99c-C$99t)&&C$99i<=1?0<=C$99n&&C$99n<=1?C$99_(C$99i,C$99n):C$99i:C$99n;var C$99c,C$99l=C$99f(C$99r);return C$99i=(C$99c=C$99p(-C$99a+C$99l))-C$99p(C$99a+C$99l)-C$99t}(C$99t,C$99e),C$99i=C$99t[1];return((1-C$99e)*(C$99i+(C$99t[3]-C$99i)*C$99e)*3+C$99e*C$99e)*C$99e}}},{}],16:[function(C$99t,C$99e,C$99i){"use strict";var C$99n={constant:function(){return 0},linear:function(C$99t){return C$99t},quadIn:function(C$99t){return C$99t*C$99t},quadOut:function(C$99t){return C$99t*(2-C$99t)},quadInOut:function(C$99t){return(C$99t*=2)<1?.5*C$99t*C$99t:-.5*(--C$99t*(C$99t-2)-1)},cubicIn:function(C$99t){return C$99t*C$99t*C$99t},cubicOut:function(C$99t){return--C$99t*C$99t*C$99t+1},cubicInOut:function(C$99t){return(C$99t*=2)<1?.5*C$99t*C$99t*C$99t:.5*((C$99t-=2)*C$99t*C$99t+2)},quartIn:function(C$99t){return C$99t*C$99t*C$99t*C$99t},quartOut:function(C$99t){return 1- --C$99t*C$99t*C$99t*C$99t},quartInOut:function(C$99t){return(C$99t*=2)<1?.5*C$99t*C$99t*C$99t*C$99t:-.5*((C$99t-=2)*C$99t*C$99t*C$99t-2)},quintIn:function(C$99t){return C$99t*C$99t*C$99t*C$99t*C$99t},quintOut:function(C$99t){return--C$99t*C$99t*C$99t*C$99t*C$99t+1},quintInOut:function(C$99t){return(C$99t*=2)<1?.5*C$99t*C$99t*C$99t*C$99t*C$99t:.5*((C$99t-=2)*C$99t*C$99t*C$99t*C$99t+2)},sineIn:function(C$99t){return 1-Math.cos(C$99t*Math.PI/2)},sineOut:function(C$99t){return Math.sin(C$99t*Math.PI/2)},sineInOut:function(C$99t){return.5*(1-Math.cos(Math.PI*C$99t))},expoIn:function(C$99t){return 0===C$99t?0:Math.pow(1024,C$99t-1)},expoOut:function(C$99t){return 1===C$99t?1:1-Math.pow(2,-10*C$99t)},expoInOut:function(C$99t){return 0===C$99t?0:1===C$99t?1:(C$99t*=2)<1?.5*Math.pow(1024,C$99t-1):.5*(2-Math.pow(2,-10*(C$99t-1)))},circIn:function(C$99t){return 1-Math.sqrt(1-C$99t*C$99t)},circOut:function(C$99t){return Math.sqrt(1- --C$99t*C$99t)},circInOut:function(C$99t){return(C$99t*=2)<1?-.5*(Math.sqrt(1-C$99t*C$99t)-1):.5*(Math.sqrt(1-(C$99t-=2)*C$99t)+1)},elasticIn:function(C$99t){var C$99e,C$99i=.1;return 0===C$99t?0:1===C$99t?1:(C$99e=!C$99i||C$99i<1?(C$99i=1,.1):.4*Math.asin(1/C$99i)/(2*Math.PI),-C$99i*Math.pow(2,10*--C$99t)*Math.sin((C$99t-C$99e)*(2*Math.PI)/.4))},elasticOut:function(C$99t){var C$99e,C$99i=.1;return 0===C$99t?0:1===C$99t?1:(C$99e=!C$99i||C$99i<1?(C$99i=1,.1):.4*Math.asin(1/C$99i)/(2*Math.PI),C$99i*Math.pow(2,-10*C$99t)*Math.sin((C$99t-C$99e)*(2*Math.PI)/.4)+1)},elasticInOut:function(C$99t){var C$99e,C$99i=.1;return 0===C$99t?0:1===C$99t?1:(C$99e=!C$99i||C$99i<1?(C$99i=1,.1):.4*Math.asin(1/C$99i)/(2*Math.PI),(C$99t*=2)<1?C$99i*Math.pow(2,10*--C$99t)*Math.sin((C$99t-C$99e)*(2*Math.PI)/.4)*-.5:C$99i*Math.pow(2,-10*--C$99t)*Math.sin((C$99t-C$99e)*(2*Math.PI)/.4)*.5+1)},backIn:function(C$99t){return C$99t*C$99t*(2.70158*C$99t-1.70158)},backOut:function(C$99t){return--C$99t*C$99t*(2.70158*C$99t+1.70158)+1},backInOut:function(C$99t){return(C$99t*=2)<1?C$99t*C$99t*(3.5949095*C$99t-2.5949095)*.5:.5*((C$99t-=2)*C$99t*(3.5949095*C$99t+2.5949095)+2)},bounceIn:function(C$99t){return 1-C$99n.bounceOut(1-C$99t)},bounceOut:function(C$99t){return C$99t<1/2.75?7.5625*C$99t*C$99t:C$99t<2/2.75?7.5625*(C$99t-=1.5/2.75)*C$99t+.75:C$99t<2.5/2.75?7.5625*(C$99t-=2.25/2.75)*C$99t+.9375:7.5625*(C$99t-=2.625/2.75)*C$99t+.984375},bounceInOut:function(C$99t){return C$99t<.5?.5*C$99n.bounceIn(2*C$99t):.5*C$99n.bounceOut(2*C$99t-1)+.5},smooth:function(C$99t){return C$99t<=0?0:1<=C$99t?1:C$99t*C$99t*(3-2*C$99t)},fade:function(C$99t){return C$99t<=0?0:1<=C$99t?1:C$99t*C$99t*C$99t*(C$99t*(6*C$99t-15)+10)}};function C$99r(C$99e,C$99i){return function(C$99t){return C$99t<.5?C$99i(2*C$99t)/2:C$99e(2*C$99t-1)/2+.5}}C$99n.quadOutIn=C$99r(C$99n.quadIn,C$99n.quadOut),C$99n.cubicOutIn=C$99r(C$99n.cubicIn,C$99n.cubicOut),C$99n.quartOutIn=C$99r(C$99n.quartIn,C$99n.quartOut),C$99n.quintOutIn=C$99r(C$99n.quintIn,C$99n.quintOut),C$99n.sineOutIn=C$99r(C$99n.sineIn,C$99n.sineOut),C$99n.expoOutIn=C$99r(C$99n.expoIn,C$99n.expoOut),C$99n.circOutIn=C$99r(C$99n.circIn,C$99n.circOut),C$99n.backOutIn=C$99r(C$99n.backIn,C$99n.backOut),C$99n.bounceIn=function(C$99t){return 1-C$99n.bounceOut(1-C$99t)},C$99n.bounceInOut=function(C$99t){return C$99t<.5?.5*C$99n.bounceIn(2*C$99t):.5*C$99n.bounceOut(2*C$99t-1)+.5},C$99n.bounceOutIn=C$99r(C$99n.bounceIn,C$99n.bounceOut),cc.easing=C$99e.exports=C$99n},{}],17:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./bezier"),C$99t("./easing"),C$99t("./types"),C$99t("./motion-path-helper"),C$99t("./animation-curves"),C$99t("./animation-clip"),C$99t("./animation-manager"),C$99t("./animation-state"),C$99t("./animation-animator")},{"./animation-animator":10,"./animation-clip":11,"./animation-curves":12,"./animation-manager":13,"./animation-state":14,"./bezier":15,"./easing":16,"./motion-path-helper":18,"./types":20}],18:[function(C$99t,C$99e,C$99n){"use strict";var C$99G=C$99t("./animation-curves").DynamicAnimCurve,C$99z=C$99t("./animation-curves").computeRatioByType,C$99i=C$99t("./bezier").bezier,C$99U=C$99t("../core/utils/binary-search").binarySearchEpsilon,C$99W=cc.v2;function C$99H(C$99t){this.points=C$99t||[],this.beziers=[],this.ratios=[],this.progresses=[],this.length=0,this.computeBeziers()}function C$99s(){this.start=C$99W(),this.end=C$99W(),this.startCtrlPoint=C$99W(),this.endCtrlPoint=C$99W()}C$99H.prototype.computeBeziers=function(){this.beziers.length=0,this.ratios.length=0,this.progresses.length=0,this.length=0;for(var C$99t=1;C$99t<this.points.length;C$99t++){var C$99e,C$99i=this.points[C$99t-1],C$99n=this.points[C$99t];(C$99e=new C$99s).start=C$99i.pos,C$99e.startCtrlPoint=C$99i.out,C$99e.end=C$99n.pos,C$99e.endCtrlPoint=C$99n.in,this.beziers.push(C$99e),this.length+=C$99e.getLength()}for(var C$99r=0,C$99t=0;C$99t<this.beziers.length;C$99t++)C$99e=this.beziers[C$99t],this.ratios[C$99t]=C$99e.getLength()/this.length,this.progresses[C$99t]=C$99r+=this.ratios[C$99t];return this.beziers},C$99s.prototype.getPointAt=function(C$99t){C$99t=this.getUtoTmapping(C$99t);return this.getPoint(C$99t)},C$99s.prototype.getPoint=function(C$99t){var C$99e=C$99i(this.start.x,this.startCtrlPoint.x,this.endCtrlPoint.x,this.end.x,C$99t),C$99t=C$99i(this.start.y,this.startCtrlPoint.y,this.endCtrlPoint.y,this.end.y,C$99t);return new C$99W(C$99e,C$99t)},C$99s.prototype.getLength=function(){var C$99t=this.getLengths();return C$99t[C$99t.length-1]},C$99s.prototype.getLengths=function(C$99t){if(C$99t=C$99t||(this.__arcLengthDivisions||200),this.cacheArcLengths&&this.cacheArcLengths.length===C$99t+1)return this.cacheArcLengths;var C$99e,C$99i,C$99n=[],C$99r=this.getPoint(0),C$99s=C$99W(),C$99o=0;for(C$99n.push(0),C$99i=1;C$99i<=C$99t;C$99i++)C$99e=this.getPoint(C$99i/C$99t),C$99s.x=C$99r.x-C$99e.x,C$99s.y=C$99r.y-C$99e.y,C$99o+=C$99s.mag(),C$99n.push(C$99o),C$99r=C$99e;return this.cacheArcLengths=C$99n},C$99s.prototype.getUtoTmapping=function(C$99t,C$99e){for(var C$99i,C$99n=this.getLengths(),C$99r=0,C$99s=C$99n.length,C$99o=C$99e||C$99t*C$99n[C$99s-1],C$99a=0,C$99c=C$99s-1;C$99a<=C$99c;)if((C$99i=C$99n[C$99r=Math.floor(C$99a+(C$99c-C$99a)/2)]-C$99o)<0)C$99a=C$99r+1;else{if(!(0<C$99i)){C$99c=C$99r;break}C$99c=C$99r-1}if(C$99n[C$99r=C$99c]===C$99o)return C$99r/(C$99s-1);C$99e=C$99n[C$99r];return(C$99r+(C$99o-C$99e)/(C$99n[C$99r+1]-C$99e))/(C$99s-1)},C$99e.exports={sampleMotionPaths:function(C$99h,C$99t,C$99u,C$99_,C$99d){function C$99f(C$99t){return C$99t instanceof cc.Vec2?{in:C$99t,pos:C$99t,out:C$99t}:Array.isArray(C$99t)&&6===C$99t.length?{in:C$99W(C$99t[2],C$99t[3]),pos:C$99W(C$99t[0],C$99t[1]),out:C$99W(C$99t[4],C$99t[5])}:{in:cc.Vec2.ZERO,pos:cc.Vec2.ZERO,out:cc.Vec2.ZERO}}var C$99e=C$99t.values=C$99t.values.map(function(C$99t){return C$99t=Array.isArray(C$99t)?2===C$99t.length?cc.v2(C$99t[0],C$99t[1]):cc.v3(C$99t[0],C$99t[1],C$99t[2]):C$99t});if(0!==C$99h.length&&0!==C$99e.length){for(var C$99p=!1,C$99m=0;C$99m<C$99h.length;C$99m++){var C$99y=C$99h[C$99m];if(C$99y&&!function(C$99t){if(Array.isArray(C$99t)){for(var C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e];if(!Array.isArray(C$99n)||6!==C$99n.length)return}return 1}}(C$99y)&&(cc.errorID(3904,C$99d?C$99d.name:"","position",C$99m),C$99y=null),C$99y&&0<C$99y.length){C$99p=!0;break}}if(C$99p&&1!==C$99e.length){for(var C$99g=C$99t.types,C$99i=C$99t.ratios,C$99v=C$99t.values=[],C$99x=C$99t.types=[],C$99b=C$99t.ratios=[],C$99A=0,C$99C=C$99G.Linear,C$99n=0,C$99S=C$99h.length;C$99n<C$99S-1;C$99n++){var C$99T=C$99h[C$99n],C$99w=C$99i[C$99n],C$99E=C$99i[C$99n+1]-C$99w,C$99M=C$99e[C$99n],C$99I=C$99e[C$99n+1],C$99B=C$99g[C$99n],C$99R=[],C$99r=C$99A/C$99E,C$99P=1/(C$99E*C$99u*C$99_);if(C$99T&&0<C$99T.length){var C$99D=[];C$99D.push(C$99f(C$99M));for(var C$99s=0,C$99L=C$99T.length;C$99s<C$99L;C$99s++){var C$99V=C$99f(C$99T[C$99s]);C$99D.push(C$99V)}C$99D.push(C$99f(C$99I));for(var C$99o,C$99O,C$99F,C$99a,C$99c,C$99l=new C$99H(C$99D),C$99N=(C$99l.computeBeziers(),C$99l.progresses);1e-6<1-C$99r;)C$99c=(C$99a=C$99z(C$99a=C$99r,C$99B))<0?(C$99F=(0-C$99a)*(C$99o=C$99l.beziers[0]).getLength(),C$99O=C$99o.start.sub(C$99o.endCtrlPoint).normalize(),C$99o.start.add(C$99O.mul(C$99F))):1<C$99a?(C$99F=(C$99a-1)*(C$99o=C$99l.beziers[C$99l.beziers.length-1]).getLength(),C$99O=C$99o.end.sub(C$99o.startCtrlPoint).normalize(),C$99o.end.add(C$99O.mul(C$99F))):(C$99a=(C$99a-=0<(C$99c=(C$99c=C$99U(C$99N,C$99a))<0?~C$99c:C$99c)?C$99N[C$99c-1]:0)/C$99l.ratios[C$99c],C$99l.beziers[C$99c].getPointAt(C$99a)),C$99R.push(C$99c),C$99r+=C$99P}else for(;1e-6<1-C$99r;)C$99a=C$99z(C$99a=C$99r,C$99B),C$99R.push(C$99M.lerp(C$99I,C$99a)),C$99r+=C$99P;for(C$99C="constant"===C$99B?C$99B:C$99G.Linear,C$99s=0,C$99L=C$99R.length;C$99s<C$99L;C$99s++)C$99k(C$99R[C$99s],C$99C,C$99w+C$99A+C$99P*C$99s*C$99E);C$99A=1e-6<Math.abs(C$99r-1)?(C$99r-1)*C$99E:0}C$99i[C$99i.length-1]!==C$99b[C$99b.length-1]&&C$99k(C$99e[C$99e.length-1],C$99C,C$99i[C$99i.length-1])}}function C$99k(C$99t,C$99e,C$99i){C$99v.push(C$99t),C$99x.push(C$99e),C$99b.push(C$99i)}},Curve:C$99H,Bezier:C$99s}},{"../core/utils/binary-search":256,"./animation-curves":12,"./bezier":15}],19:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.js,C$99r=C$99t("../core/CCDebug");function C$99s(){this._isPlaying=!1,this._isPaused=!1,this._stepOnce=!1}function C$99o(){}C$99t=C$99s.prototype;C$99n.get(C$99t,"isPlaying",function(){return this._isPlaying},!0),C$99n.get(C$99t,"isPaused",function(){return this._isPaused},!0);C$99t.onPlay=C$99o,C$99t.onPause=C$99o,C$99t.onResume=C$99o,C$99t.onStop=C$99o,C$99t.onError=C$99o,C$99t.play=function(){this._isPlaying?this._isPaused?(this._isPaused=!1,this.onResume()):this.onError(C$99r.getError(3912)):(this._isPlaying=!0,this.onPlay())},C$99t.stop=function(){this._isPlaying&&(this._isPlaying=!1,this.onStop(),this._isPaused=!1)},C$99t.pause=function(){this._isPlaying&&!this._isPaused&&(this._isPaused=!0,this.onPause())},C$99t.resume=function(){this._isPlaying&&this._isPaused&&(this._isPaused=!1,this.onResume())},C$99t.step=function(){this.pause(),this._stepOnce=!0,this._isPlaying||this.play()},C$99e.exports=C$99s},{"../core/CCDebug":27}],20:[function(C$99t,C$99e,C$99i){"use strict";var C$99n={Loop:2,ShouldWrap:4,PingPong:22,Reverse:36},C$99r=cc.Enum({Default:0,Normal:1,Reverse:C$99n.Reverse,Loop:C$99n.Loop,LoopReverse:C$99n.Loop|C$99n.Reverse,PingPong:C$99n.PingPong,PingPongReverse:C$99n.PingPong|C$99n.Reverse});function C$99s(C$99t){C$99t?this.set(C$99t):(this.ratio=0,this.time=0,this.direction=1,this.stopped=!0,this.iterations=0,this.frameIndex=void 0)}cc.WrapMode=C$99r,C$99s.prototype.set=function(C$99t){this.ratio=C$99t.ratio,this.time=C$99t.time,this.direction=C$99t.direction,this.stopped=C$99t.stopped,this.iterations=C$99t.iterations,this.frameIndex=C$99t.frameIndex},C$99e.exports={WrapModeMask:C$99n,WrapMode:C$99r,WrappedInfo:C$99s}},{}],21:[function(C$99t,C$99e,C$99h){"use strict";function C$99n(C$99t){C$99r.call(this),this._shouldRecycleOnEnded=!1,this._src=C$99t,this._element=null,this.id=0,this._volume=1,this._loop=!1,this._nextTime=0,this._state=C$99n.State.INITIALZING,this._onended=function(){this._state=C$99n.State.STOPPED,this.emit("ended")}.bind(this)}var C$99i,C$99r=C$99t("../core/event/event-target"),C$99s=C$99t("../core/platform/CCSys"),C$99o=C$99t("../core/assets/CCAudioClip").LoadMode,C$99a=!1,C$99c=[],C$99l=(cc.js.extend(C$99n,C$99r),C$99n.State={ERROR:-1,INITIALZING:0,PLAYING:1,PAUSED:2,STOPPED:3},(C$99t=C$99n.prototype)._bindEnded=function(C$99t){C$99t=C$99t||this._onended;var C$99e=this._element;this._src&&C$99e instanceof HTMLAudioElement?C$99e.addEventListener("ended",C$99t):C$99e.onended=C$99t},C$99t._unbindEnded=function(){var C$99t=this._element;C$99t instanceof HTMLAudioElement?C$99t.removeEventListener("ended",this._onended):C$99t&&(C$99t.onended=null)},C$99t._onLoaded=function(){this._createElement(),this.setVolume(this._volume),this.setLoop(this._loop),0!==this._nextTime&&this.setCurrentTime(this._nextTime),this.getState(!1)===C$99n.State.PLAYING?this.play():this._state=C$99n.State.INITIALZING},C$99t._createElement=function(){var C$99t=this._src._nativeAsset;C$99t instanceof HTMLAudioElement?(this._element||(this._element=document.createElement("audio")),this._element.src=C$99t.src):this._element=new C$99l(C$99t,this)},C$99t.play=function(){this._state=C$99n.State.PLAYING,this._element&&(this._bindEnded(),this._element.play(),this._touchToPlay())},C$99t._touchToPlay=function(){var C$99t;this._src&&this._src.loadMode===C$99o.DOM_AUDIO&&this._element.paused&&C$99c.push({instance:this,offset:0,audio:this._element}),C$99a||(C$99a=!0,C$99t="ontouchend"in window?"touchend":"mousedown",cc.game.canvas.addEventListener(C$99t,function(){for(var C$99t;C$99t=C$99c.pop();)C$99t.audio.play(C$99t.offset)}))},C$99t.destroy=function(){this._element=null},C$99t.pause=function(){this._element&&this.getState()===C$99n.State.PLAYING&&(this._unbindEnded(),this._element.pause(),this._state=C$99n.State.PAUSED)},C$99t.resume=function(){this._element&&this.getState()===C$99n.State.PAUSED&&(this._bindEnded(),this._element.play(),this._state=C$99n.State.PLAYING)},C$99t.stop=function(){if(this._element){this._element.pause();try{this._element.currentTime=0}catch(C$99t){}for(var C$99t=0;C$99t<C$99c.length;C$99t++)if(C$99c[C$99t].instance===this){C$99c.splice(C$99t,1);break}this._unbindEnded(),this.emit("stop"),this._state=C$99n.State.STOPPED}},C$99t.setLoop=function(C$99t){this._loop=C$99t,this._element&&(this._element.loop=C$99t)},C$99t.getLoop=function(){return this._loop},C$99t.setVolume=function(C$99t){this._volume=C$99t,this._element&&(this._element.volume=C$99t)},C$99t.getVolume=function(){return this._volume},C$99t.setCurrentTime=function(C$99e){if(this._element){this._nextTime=0,this._unbindEnded(),this._bindEnded(function(){this._bindEnded()}.bind(this));try{this._element.currentTime=C$99e}catch(C$99t){var C$99i=this._element;C$99i.addEventListener&&C$99i.addEventListener("loadedmetadata",function C$99t(){C$99i.removeEventListener("loadedmetadata",C$99t),C$99i.currentTime=C$99e})}}else this._nextTime=C$99e},C$99t.getCurrentTime=function(){return this._element?this._element.currentTime:0},C$99t.getDuration=function(){return this._element?this._element.duration:0},C$99t.getState=function(C$99t){return(C$99t=void 0===C$99t?!0:C$99t)&&this._forceUpdatingState(),this._state},C$99t._forceUpdatingState=function(){var C$99t=this._element;C$99t&&(C$99n.State.PLAYING===this._state&&C$99t.paused?this._state=C$99n.State.STOPPED:C$99n.State.STOPPED!==this._state||C$99t.paused||(this._state=C$99n.State.PLAYING))},Object.defineProperty(C$99t,"src",{get:function(){return this._src},set:function(C$99i){var C$99t;return this._unbindEnded(),C$99i?(this._src=C$99i).loaded?this._onLoaded():(C$99t=this,C$99i.once("load",function(){C$99i===C$99t._src&&C$99t._onLoaded()}),cc.loader.load({url:C$99i.nativeUrl,skips:["Loader"]},function(C$99t,C$99e){C$99t?cc.error(C$99t):C$99i.loaded||(C$99i._nativeAsset=C$99e)})):(this._src=null,this._element instanceof C$99l?this._element=null:this._element&&(this._element.src=""),this._state=C$99n.State.INITIALZING),C$99i},enumerable:!0,configurable:!0}),Object.defineProperty(C$99t,"paused",{get:function(){return!this._element||this._element.paused},enumerable:!0,configurable:!0}),C$99i=cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE||cc.sys.browserType===cc.sys.BROWSER_TYPE_BAIDU||cc.sys.browserType===cc.sys.BROWSER_TYPE_UC?.01:0,function(C$99t,C$99e){this._audio=C$99e,this._context=C$99s.__audioSupport.context,this._buffer=C$99t,this._gainObj=this._context.createGain(),this.volume=1,this._gainObj.connect(this._context.destination),this._loop=!1,this._startTime=-1,this._currentSource=null,this.playedLength=0,this._currentTimer=null,this._endCallback=function(){this.onended&&this.onended(this)}.bind(this)});(C$99t=C$99l.prototype).play=function(C$99t){this._currentSource&&!this.paused&&(this._currentSource.onended=null,this._currentSource.stop(0),this.playedLength=0);var C$99e,C$99i=this._context.createBufferSource(),C$99n=(C$99i.buffer=this._buffer,C$99i.connect(this._gainObj),C$99i.loop=this._loop,this._startTime=this._context.currentTime,(C$99t=C$99t||this.playedLength)&&(this._startTime-=C$99t),this._buffer.duration),C$99r=C$99t;this._loop?C$99i.start?C$99i.start(0,C$99r):C$99i.notoGrainOn?C$99i.noteGrainOn(0,C$99r):C$99i.noteOn(0,C$99r):(C$99n=C$99n-C$99t,C$99i.start?C$99i.start(0,C$99r,C$99n):C$99i.noteGrainOn?C$99i.noteGrainOn(0,C$99r,C$99n):C$99i.noteOn(0,C$99r,C$99n)),(this._currentSource=C$99i).onended=this._endCallback,C$99i.context.state&&"suspended"!==C$99i.context.state||0!==this._context.currentTime||(C$99e=this,clearTimeout(this._currentTimer),this._currentTimer=setTimeout(function(){0===C$99e._context.currentTime&&C$99c.push({instance:C$99e._audio,offset:C$99t,audio:C$99e})},10)),cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI&&cc.sys.isMobile&&"interrupted"===C$99i.context.state&&C$99i.context.resume()},C$99t.pause=function(){var C$99t;clearTimeout(this._currentTimer),this.paused||(this.playedLength=this._context.currentTime-this._startTime,this.playedLength%=this._buffer.duration,C$99t=this._currentSource,this._currentSource=null,this._startTime=-1,C$99t&&C$99t.stop(0))},Object.defineProperty(C$99t,"paused",{get:function(){return(!this._currentSource||!this._currentSource.loop)&&(-1===this._startTime||this._context.currentTime-this._startTime>this._buffer.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(C$99t,"loop",{get:function(){return this._loop},set:function(C$99t){return this._currentSource&&(this._currentSource.loop=C$99t),this._loop=C$99t},enumerable:!0,configurable:!0}),Object.defineProperty(C$99t,"volume",{get:function(){return this._volume},set:function(C$99e){if(this._volume=C$99e,this._gainObj.gain.setTargetAtTime)try{this._gainObj.gain.setTargetAtTime(C$99e,this._context.currentTime,C$99i)}catch(C$99t){this._gainObj.gain.setTargetAtTime(C$99e,this._context.currentTime,.01)}else this._gainObj.gain.value=C$99e;C$99s.os===C$99s.OS_IOS&&!this.paused&&this._currentSource&&(this._currentSource.onended=null,this.pause(),this.play())},enumerable:!0,configurable:!0}),Object.defineProperty(C$99t,"currentTime",{get:function(){return this.paused||(this.playedLength=this._context.currentTime-this._startTime,this.playedLength%=this._buffer.duration),this.playedLength},set:function(C$99t){return this.paused?this.playedLength=C$99t:(this.pause(),this.playedLength=C$99t,this.play()),C$99t},enumerable:!0,configurable:!0}),Object.defineProperty(C$99t,"duration",{get:function(){return this._buffer.duration},enumerable:!0,configurable:!0}),C$99e.exports=cc.Audio=C$99n},{"../core/assets/CCAudioClip":35,"../core/event/event-target":115,"../core/platform/CCSys":198}],22:[function(C$99t,C$99e,C$99n){"use strict";function C$99s(C$99t){function C$99e(){var C$99t;C$99r(this.id)&&(delete C$99c[this.id],C$99t=C$99n.indexOf(this.id),cc.js.array.fastRemoveAt(C$99n,C$99t)),(C$99t=this)._shouldRecycleOnEnded&&(C$99t._finishCallback=null,C$99t.off("ended"),C$99t.off("stop"),C$99t.src=null,C$99h.includes(C$99t)||(C$99h.length<32?C$99h.push(C$99t):C$99t.destroy()),C$99t._shouldRecycleOnEnded=!1)}var C$99i=C$99d++,C$99n=(C$99n=C$99l[C$99t])||(C$99l[C$99t]=[]);return C$99u._maxAudioInstance<=C$99n.length&&(C$99t=C$99n.shift(),C$99r(C$99t).stop()),(C$99t=C$99h.pop()||new C$99a).on("ended",function(){this._finishCallback&&this._finishCallback(),C$99e.call(this)},C$99t),C$99t.on("stop",C$99e,C$99t),C$99t.id=C$99i,C$99c[C$99i]=C$99t,C$99n.push(C$99i),C$99t}function C$99r(C$99t){return C$99c[C$99t]}function C$99o(C$99t){return void 0===C$99t?C$99t=1:"string"==typeof C$99t&&(C$99t=Number.parseFloat(C$99t)),C$99t}var C$99a=C$99t("./CCAudio"),C$99_=C$99t("../core/assets/CCAudioClip"),C$99i=cc.js,C$99d=0,C$99c=C$99i.createMap(!0),C$99l={},C$99h=[],C$99u={AudioState:C$99a.State,_maxWebAudioSize:2097152,_maxAudioInstance:24,_id2audio:C$99c,play:function(C$99t,C$99e,C$99i){var C$99n,C$99r=C$99t;if("string"==typeof C$99t)cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$99n=C$99s(C$99r=C$99t),C$99_._loadByUrl(C$99r,function(C$99t,C$99e){C$99e&&(C$99n.src=C$99e)});else{if(!C$99t)return;C$99r=C$99t.nativeUrl,(C$99n=C$99s(C$99r)).src=C$99t}return C$99n._shouldRecycleOnEnded=!0,C$99n.setLoop(C$99e||!1),C$99i=C$99o(C$99i),C$99n.setVolume(C$99i),C$99n.play(),C$99n.id},setLoop:function(C$99t,C$99e){C$99t=C$99r(C$99t);C$99t&&C$99t.setLoop&&C$99t.setLoop(C$99e)},isLoop:function(C$99t){C$99t=C$99r(C$99t);return!(!C$99t||!C$99t.getLoop)&&C$99t.getLoop()},setVolume:function(C$99t,C$99e){C$99t=C$99r(C$99t);C$99t&&C$99t.setVolume(C$99e)},getVolume:function(C$99t){C$99t=C$99r(C$99t);return C$99t?C$99t.getVolume():1},setCurrentTime:function(C$99t,C$99e){C$99t=C$99r(C$99t);return!!C$99t&&(C$99t.setCurrentTime(C$99e),!0)},getCurrentTime:function(C$99t){C$99t=C$99r(C$99t);return C$99t?C$99t.getCurrentTime():0},getDuration:function(C$99t){C$99t=C$99r(C$99t);return C$99t?C$99t.getDuration():0},getState:function(C$99t){C$99t=C$99r(C$99t);return C$99t?C$99t.getState():this.AudioState.ERROR},setFinishCallback:function(C$99t,C$99e){C$99t=C$99r(C$99t);C$99t&&(C$99t._finishCallback=C$99e)},pause:function(C$99t){C$99t=C$99r(C$99t);return!!C$99t&&(C$99t.pause(),!0)},_pauseIDCache:[],pauseAll:function(){for(var C$99t in C$99c){var C$99e=C$99c[C$99t];C$99e.getState()===C$99a.State.PLAYING&&(this._pauseIDCache.push(C$99t),C$99e.pause())}},resume:function(C$99t){C$99t=C$99r(C$99t);C$99t&&C$99t.resume()},resumeAll:function(){for(var C$99t=0;C$99t<this._pauseIDCache.length;++C$99t){var C$99e=this._pauseIDCache[C$99t],C$99e=C$99r(C$99e);C$99e&&C$99e.resume()}this._pauseIDCache.length=0},stop:function(C$99t){C$99t=C$99r(C$99t);return!!C$99t&&(C$99t.stop(),!0)},stopAll:function(){for(var C$99t in C$99c){C$99t=C$99c[C$99t];C$99t&&C$99t.stop()}},setMaxAudioInstance:function(C$99t){this._maxAudioInstance=C$99t},getMaxAudioInstance:function(){return this._maxAudioInstance},uncache:function(C$99t){var C$99e=C$99t;if("string"==typeof C$99t)cc.warnID(8401,"cc.audioEngine","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$99e=C$99t;else{if(!C$99t)return;C$99e=C$99t.nativeUrl}var C$99i=C$99l[C$99e];if(C$99i)for(;0<C$99i.length;){var C$99n=C$99i.pop(),C$99r=C$99c[C$99n];C$99r&&(C$99r.stop(),delete C$99c[C$99n])}},uncacheAll:function(){var C$99t,C$99e;for(C$99e in this.stopAll(),C$99c)(C$99t=C$99c[C$99e])&&C$99t.destroy();for(;C$99t=C$99h.pop();)C$99t.destroy();C$99c=C$99i.createMap(!0),C$99l={}},getProfile:function(C$99t){},preload:function(C$99t,C$99e){cc.warn("`cc.audioEngine.preload` is deprecated, use `cc.loader.loadRes(url, cc.AudioClip)` instead please."),cc.loader.load(C$99t,C$99e&&function(C$99t){C$99t||C$99e()})},setMaxWebAudioSize:function(C$99t){this._maxWebAudioSize=1024*C$99t},_breakCache:null,_break:function(){for(var C$99t in this._breakCache=[],C$99c){var C$99e=C$99c[C$99t];C$99e.getState()===C$99a.State.PLAYING&&(this._breakCache.push(C$99t),C$99e.pause())}},_restore:function(){if(this._breakCache){for(;0<this._breakCache.length;){var C$99t=this._breakCache.pop(),C$99t=C$99r(C$99t);C$99t&&C$99t.resume&&C$99t.resume()}this._breakCache=null}},_music:{id:-1,loop:!1,volume:1},_effect:{volume:1,pauseCache:[]},playMusic:function(C$99t,C$99e){var C$99i=this._music;return this.stop(C$99i.id),C$99i.id=this.play(C$99t,C$99e,C$99i.volume),C$99i.loop=C$99e,C$99i.id},stopMusic:function(){this.stop(this._music.id)},pauseMusic:function(){return this.pause(this._music.id),this._music.id},resumeMusic:function(){return this.resume(this._music.id),this._music.id},getMusicVolume:function(){return this._music.volume},setMusicVolume:function(C$99t){C$99t=C$99o(C$99t);var C$99e=this._music;return C$99e.volume=C$99t,this.setVolume(C$99e.id,C$99e.volume),C$99e.volume},isMusicPlaying:function(){return this.getState(this._music.id)===this.AudioState.PLAYING},playEffect:function(C$99t,C$99e){return this.play(C$99t,C$99e||!1,this._effect.volume)},setEffectsVolume:function(C$99t){C$99t=C$99o(C$99t);var C$99e,C$99i=this._music.id;for(C$99e in this._effect.volume=C$99t,C$99c){var C$99n=C$99c[C$99e];C$99n&&C$99n.id!==C$99i&&C$99u.setVolume(C$99e,C$99t)}},getEffectsVolume:function(){return this._effect.volume},pauseEffect:function(C$99t){return this.pause(C$99t)},pauseAllEffects:function(){var C$99t,C$99e=this._music.id,C$99i=this._effect;for(C$99t in C$99i.pauseCache.length=0,C$99c){var C$99n=C$99c[C$99t];C$99n&&C$99n.id!==C$99e&&C$99n.getState()===this.AudioState.PLAYING&&(C$99i.pauseCache.push(C$99t),C$99n.pause())}},resumeEffect:function(C$99t){this.resume(C$99t)},resumeAllEffects:function(){for(var C$99t=this._effect.pauseCache,C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e],C$99i=C$99c[C$99i];C$99i&&C$99i.resume()}},stopEffect:function(C$99t){return this.stop(C$99t)},stopAllEffects:function(){var C$99t,C$99e=this._music.id;for(C$99t in C$99c){var C$99i=C$99c[C$99t];C$99i&&C$99i.id!==C$99e&&C$99i.getState()===C$99u.AudioState.PLAYING&&C$99i.stop()}}};C$99e.exports=cc.audioEngine=C$99u},{"../core/assets/CCAudioClip":35,"./CCAudio":21}],23:[function(C$99t,C$99e,C$99i){"use strict";var C$99n={name:"Jacob__Codec"};C$99n.Base64=C$99t("./base64"),C$99n.GZip=C$99t("./gzip"),C$99n.unzip=function(){return C$99n.GZip.gunzip.apply(C$99n.GZip,arguments)},C$99n.unzipBase64=function(){var C$99e=C$99n.Base64.decode.apply(C$99n.Base64,arguments);try{return C$99n.GZip.gunzip.call(C$99n.GZip,C$99e)}catch(C$99t){return C$99e.slice(7)}},C$99n.unzipBase64AsArray=function(C$99t,C$99e){C$99e=C$99e||1;for(var C$99i,C$99n=this.unzipBase64(C$99t),C$99r=[],C$99s=0,C$99o=C$99n.length/C$99e;C$99s<C$99o;C$99s++)for(C$99r[C$99s]=0,C$99i=C$99e-1;0<=C$99i;--C$99i)C$99r[C$99s]+=C$99n.charCodeAt(C$99s*C$99e+C$99i)<<8*C$99i;return C$99r},C$99n.unzipAsArray=function(C$99t,C$99e){C$99e=C$99e||1;for(var C$99i,C$99n=this.unzip(C$99t),C$99r=[],C$99s=0,C$99o=C$99n.length/C$99e;C$99s<C$99o;C$99s++)for(C$99r[C$99s]=0,C$99i=C$99e-1;0<=C$99i;--C$99i)C$99r[C$99s]+=C$99n.charCodeAt(C$99s*C$99e+C$99i)<<8*C$99i;return C$99r},cc.codec=C$99e.exports=C$99n},{"./base64":24,"./gzip":25}],24:[function(C$99t,C$99e,C$99i){"use strict";var C$99l=C$99t("../core/utils/misc").BASE64_VALUES,C$99t={name:"Jacob__Codec__Base64",decode:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a=[],C$99c=0;for(C$99t=C$99t.replace(/[^A-Za-z0-9\+\/\=]/g,"");C$99c<C$99t.length;)C$99n=C$99l[C$99t.charCodeAt(C$99c++)],C$99e=(15&(C$99r=C$99l[C$99t.charCodeAt(C$99c++)]))<<4|(C$99s=C$99l[C$99t.charCodeAt(C$99c++)])>>2,C$99i=(3&C$99s)<<6|(C$99o=C$99l[C$99t.charCodeAt(C$99c++)]),C$99a.push(String.fromCharCode(C$99n<<2|C$99r>>4)),64!==C$99s&&C$99a.push(String.fromCharCode(C$99e)),64!==C$99o&&C$99a.push(String.fromCharCode(C$99i));return C$99a=C$99a.join("")},decodeAsArray:function(C$99t,C$99e){for(var C$99i,C$99n=this.decode(C$99t),C$99r=[],C$99s=0,C$99o=C$99n.length/C$99e;C$99s<C$99o;C$99s++)for(C$99r[C$99s]=0,C$99i=C$99e-1;0<=C$99i;--C$99i)C$99r[C$99s]+=C$99n.charCodeAt(C$99s*C$99e+C$99i)<<8*C$99i;return C$99r}};C$99e.exports=C$99t},{"../core/utils/misc":264}],25:[function(C$99t,C$99e,C$99i){"use strict";function C$99p(C$99t){this.data=C$99t,this.debug=!1,this.gpflags=void 0,this.files=0,this.unzipped=[],this.buf32k=new Array(32768),this.bIdx=0,this.modeZIP=!1,this.bytepos=0,this.bb=1,this.bits=0,this.nameBuf=[],this.fileout=void 0,this.literalTree=new Array(C$99p.LITERALS),this.distanceTree=new Array(32),this.treepos=0,this.Places=null,this.len=0,this.fpos=new Array(17),this.fpos[0]=0,this.flens=void 0,this.fmax=void 0}C$99p.gunzip=function(C$99t){return C$99t.constructor===Array||(C$99t.constructor,String),new C$99p(C$99t).gunzip()[0][0]},C$99p.HufNode=function(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1},C$99p.LITERALS=288,C$99p.NAMEMAX=256,C$99p.bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],C$99p.cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C$99p.cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],C$99p.cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C$99p.cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C$99p.border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C$99p.prototype.gunzip=function(){return this.outputArr=[],this.nextFile(),this.unzipped},C$99p.prototype.readByte=function(){return this.bits+=8,this.bytepos<this.data.length?this.data.charCodeAt(this.bytepos++):-1},C$99p.prototype.byteAlign=function(){this.bb=1},C$99p.prototype.readBit=function(){var C$99t;return this.bits++,C$99t=1&this.bb,this.bb>>=1,0===this.bb&&(this.bb=this.readByte(),C$99t=1&this.bb,this.bb=this.bb>>1|128),C$99t},C$99p.prototype.readBits=function(C$99t){for(var C$99e=0,C$99i=C$99t;C$99i--;)C$99e=C$99e<<1|this.readBit();return C$99e=C$99t?C$99p.bitReverse[C$99e]>>8-C$99t:C$99e},C$99p.prototype.flushBuffer=function(){this.bIdx=0},C$99p.prototype.addBuffer=function(C$99t){this.buf32k[this.bIdx++]=C$99t,this.outputArr.push(String.fromCharCode(C$99t)),32768===this.bIdx&&(this.bIdx=0)},C$99p.prototype.IsPat=function(){for(;;){if(this.fpos[this.len]>=this.fmax)return-1;if(this.flens[this.fpos[this.len]]===this.len)return this.fpos[this.len]++;this.fpos[this.len]++}},C$99p.prototype.Rec=function(){var C$99t,C$99e=this.Places[this.treepos];if(17===this.len)return-1;if(this.treepos++,this.len++,0<=(C$99t=this.IsPat()))C$99e.b0=C$99t;else if(C$99e.b0=32768,this.Rec())return-1;if(0<=(C$99t=this.IsPat()))C$99e.b1=C$99t,C$99e.jump=null;else if(C$99e.b1=32768,C$99e.jump=this.Places[this.treepos],C$99e.jumppos=this.treepos,this.Rec())return-1;return this.len--,0},C$99p.prototype.CreateTree=function(C$99t,C$99e,C$99i,C$99n){var C$99r;for(this.Places=C$99t,this.treepos=0,this.flens=C$99i,this.fmax=C$99e,C$99r=0;C$99r<17;C$99r++)this.fpos[C$99r]=0;return this.len=0,this.Rec()?-1:0},C$99p.prototype.DecodeValue=function(C$99t){for(var C$99e,C$99i,C$99n=0,C$99r=C$99t[C$99n];;)if(this.readBit()){if(!(32768&C$99r.b1))return C$99r.b1;for(C$99r=C$99r.jump,C$99e=C$99t.length,C$99i=0;C$99i<C$99e;C$99i++)if(C$99t[C$99i]===C$99r){C$99n=C$99i;break}}else{if(!(32768&C$99r.b0))return C$99r.b0;C$99r=C$99t[++C$99n]}return-1},C$99p.prototype.DeflateLoop=function(){do{var C$99t,C$99h=this.readBit(),C$99e=this.readBits(2);if(0===C$99e)for(this.byteAlign(),C$99t=this.readByte(),C$99t|=this.readByte()<<8,C$99o=this.readByte(),65535&(C$99t^~(C$99o|=this.readByte()<<8))&&document.write("BlockLen checksum mismatch\n");C$99t--;)C$99i=this.readByte(),this.addBuffer(C$99i);else if(1===C$99e)for(;;)if(23<(C$99n=C$99p.bitReverse[this.readBits(7)]>>1)?199<(C$99n=C$99n<<1|this.readBit())?C$99n=(C$99n-=128)<<1|this.readBit():143<(C$99n-=48)&&(C$99n+=136):C$99n+=256,C$99n<256)this.addBuffer(C$99n);else{if(256===C$99n)break;for(C$99n-=257,C$99c=this.readBits(C$99p.cplext[C$99n])+C$99p.cplens[C$99n],C$99n=C$99p.bitReverse[this.readBits(5)]>>3,8<C$99p.cpdext[C$99n]?(C$99l=this.readBits(8),C$99l|=this.readBits(C$99p.cpdext[C$99n]-8)<<8):C$99l=this.readBits(C$99p.cpdext[C$99n]),C$99l+=C$99p.cpdist[C$99n],C$99n=0;C$99n<C$99c;C$99n++){var C$99i=this.buf32k[this.bIdx-C$99l&32767];this.addBuffer(C$99i)}}else if(2===C$99e){var C$99n,C$99r=new Array(320),C$99s=257+this.readBits(5),C$99o=1+this.readBits(5),C$99u=4+this.readBits(4);for(C$99n=0;C$99n<19;C$99n++)C$99r[C$99n]=0;for(C$99n=0;C$99n<C$99u;C$99n++)C$99r[C$99p.border[C$99n]]=this.readBits(3);for(C$99c=this.distanceTree.length,C$99a=0;C$99a<C$99c;C$99a++)this.distanceTree[C$99a]=new C$99p.HufNode;if(this.CreateTree(this.distanceTree,19,C$99r,0))return this.flushBuffer(),1;for(var C$99_,C$99d=C$99s+C$99o,C$99a=0;C$99a<C$99d;)if((C$99n=this.DecodeValue(this.distanceTree))<16)C$99r[C$99a++]=C$99n;else if(16===C$99n){if(C$99d<C$99a+(C$99n=3+this.readBits(2)))return this.flushBuffer(),1;for(C$99_=C$99a?C$99r[C$99a-1]:0;C$99n--;)C$99r[C$99a++]=C$99_}else{if(C$99d<C$99a+(C$99n=17===C$99n?3+this.readBits(3):11+this.readBits(7)))return this.flushBuffer(),1;for(;C$99n--;)C$99r[C$99a++]=0}for(C$99c=this.literalTree.length,C$99a=0;C$99a<C$99c;C$99a++)this.literalTree[C$99a]=new C$99p.HufNode;if(this.CreateTree(this.literalTree,C$99s,C$99r,0))return this.flushBuffer(),1;for(C$99c=this.literalTree.length,C$99a=0;C$99a<C$99c;C$99a++)this.distanceTree[C$99a]=new C$99p.HufNode;var C$99c,C$99l,C$99f=new Array;for(C$99a=C$99s;C$99a<C$99r.length;C$99a++)C$99f[C$99a-C$99s]=C$99r[C$99a];if(this.CreateTree(this.distanceTree,C$99o,C$99f,0))return this.flushBuffer(),1;for(;;)if(256<=(C$99n=this.DecodeValue(this.literalTree))){if(0===(C$99n-=256))break;for(C$99n--,C$99c=this.readBits(C$99p.cplext[C$99n])+C$99p.cplens[C$99n],C$99n=this.DecodeValue(this.distanceTree),8<C$99p.cpdext[C$99n]?(C$99l=this.readBits(8),C$99l|=this.readBits(C$99p.cpdext[C$99n]-8)<<8):C$99l=this.readBits(C$99p.cpdext[C$99n]),C$99l+=C$99p.cpdist[C$99n];C$99c--;){C$99i=this.buf32k[this.bIdx-C$99l&32767];this.addBuffer(C$99i)}}else this.addBuffer(C$99n)}}while(!C$99h);return this.flushBuffer(),this.byteAlign(),0},C$99p.prototype.unzipFile=function(C$99t){var C$99e;for(this.gunzip(),C$99e=0;C$99e<this.unzipped.length;C$99e++)if(this.unzipped[C$99e][1]===C$99t)return this.unzipped[C$99e][0]},C$99p.prototype.nextFile=function(){this.outputArr=[],this.modeZIP=!1;var C$99t=[];if(C$99t[0]=this.readByte(),C$99t[1]=this.readByte(),120===C$99t[0]&&218===C$99t[1]&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),"geonext.gxt"],this.files++),31===C$99t[0]&&139===C$99t[1]&&(this.skipdir(),this.unzipped[this.files]=[this.outputArr.join(""),"file"],this.files++),80===C$99t[0]&&75===C$99t[1]&&(this.modeZIP=!0,C$99t[2]=this.readByte(),C$99t[3]=this.readByte(),3===C$99t[2]&&4===C$99t[3])){C$99t[0]=this.readByte(),C$99t[1]=this.readByte(),this.gpflags=this.readByte(),this.gpflags|=this.readByte()<<8;var C$99t=this.readByte(),C$99e=(C$99t|=this.readByte()<<8,this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte()),C$99e=((C$99e|=this.readByte()<<8)|this.readByte()<<16|this.readByte()<<24,this.readByte()),C$99i=((C$99e|=this.readByte()<<8)|this.readByte()<<16|this.readByte()<<24,this.readByte()),C$99n=(C$99i|=this.readByte()<<8,this.readByte());for(C$99n|=this.readByte()<<8,C$99s=0,this.nameBuf=[];C$99i--;){var C$99r=this.readByte();"/"===C$99r|":"===C$99r?C$99s=0:C$99s<C$99p.NAMEMAX-1&&(this.nameBuf[C$99s++]=String.fromCharCode(C$99r))}this.fileout||(this.fileout=this.nameBuf);for(var C$99s=0;C$99s<C$99n;)C$99r=this.readByte(),C$99s++;8==C$99t&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),this.nameBuf.join("")],this.files++),this.skipdir()}},C$99p.prototype.skipdir=function(){var C$99t,C$99e,C$99i,C$99n=[];if(8&this.gpflags&&(C$99n[0]=this.readByte(),C$99n[1]=this.readByte(),C$99n[2]=this.readByte(),C$99n[3]=this.readByte(),C$99t=this.readByte(),C$99t|=this.readByte()<<8,this.readByte(),this.readByte(),C$99t=this.readByte(),C$99t=(C$99t=(C$99t|=this.readByte()<<8)|this.readByte()<<16)|this.readByte()<<24),this.modeZIP&&this.nextFile(),C$99n[0]=this.readByte(),8!==C$99n[0])return 0;if(this.gpflags=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),4&this.gpflags)for(C$99n[0]=this.readByte(),C$99n[2]=this.readByte(),this.len=C$99n[0]+256*C$99n[1],C$99e=0;C$99e<this.len;C$99e++)this.readByte();if(8&this.gpflags)for(C$99e=0,this.nameBuf=[];C$99i=this.readByte();)(C$99e="7"!==C$99i&&":"!==C$99i?C$99e:0)<C$99p.NAMEMAX-1&&(this.nameBuf[C$99e++]=C$99i);if(16&this.gpflags)for(;C$99i=this.readByte(););2&this.gpflags&&(this.readByte(),this.readByte()),this.DeflateLoop(),C$99t=this.readByte(),C$99t=(C$99t=(C$99t|=this.readByte()<<8)|this.readByte()<<16)|this.readByte()<<24,this.modeZIP&&this.nextFile()},C$99e.exports=C$99p},{}],26:[function(C$99t,C$99e,C$99i){"use strict";!function(){function C$99Q(C$99t){throw C$99t}var C$99$=void 0,C$99tt=!0,C$99o=this;function C$99t(C$99t,C$99e){var C$99i,C$99n=C$99t.split("."),C$99r=C$99o;C$99n[0]in C$99r||!C$99r.execScript||C$99r.execScript("var "+C$99n[0]);for(;C$99n.length&&(C$99i=C$99n.shift());)C$99n.length||C$99e===C$99$?C$99r=C$99r[C$99i]||(C$99r[C$99i]={}):C$99r[C$99i]=C$99e}var C$99et="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;function C$99a(C$99t){if("string"==typeof C$99t){for(var C$99e=C$99t.split(""),C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)C$99e[C$99i]=(255&C$99e[C$99i].charCodeAt(0))>>>0;C$99t=C$99e}for(var C$99r,C$99s=1,C$99o=0,C$99a=C$99t.length,C$99c=0;0<C$99a;){for(C$99a-=C$99r=1024<C$99a?1024:C$99a;C$99o+=C$99s+=C$99t[C$99c++],--C$99r;);C$99s%=65521,C$99o%=65521}return(C$99o<<16|C$99s)>>>0}function C$99it(C$99t,C$99e){this.index="number"==typeof C$99e?C$99e:0,this.i=0,this.buffer=C$99t instanceof(C$99et?Uint8Array:Array)?C$99t:new(C$99et?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&C$99Q(Error("invalid index")),this.buffer.length<=this.index&&this.f()}C$99it.prototype.f=function(){var C$99t,C$99e=this.buffer,C$99i=C$99e.length,C$99n=new(C$99et?Uint8Array:Array)(C$99i<<1);if(C$99et)C$99n.set(C$99e);else for(C$99t=0;C$99t<C$99i;++C$99t)C$99n[C$99t]=C$99e[C$99t];return this.buffer=C$99n},C$99it.prototype.d=function(C$99t,C$99e,C$99i){var C$99n,C$99r=this.buffer,C$99s=this.index,C$99o=this.i,C$99a=C$99r[C$99s];if(C$99i&&1<C$99e&&(C$99t=8<C$99e?(C$99_[255&C$99t]<<24|C$99_[C$99t>>>8&255]<<16|C$99_[C$99t>>>16&255]<<8|C$99_[C$99t>>>24&255])>>32-C$99e:C$99_[C$99t]>>8-C$99e),C$99e+C$99o<8)C$99a=C$99a<<C$99e|C$99t,C$99o+=C$99e;else for(C$99n=0;C$99n<C$99e;++C$99n)C$99a=C$99a<<1|C$99t>>C$99e-C$99n-1&1,8==++C$99o&&(C$99o=0,C$99r[C$99s++]=C$99_[C$99a],C$99a=0,C$99s===C$99r.length&&(C$99r=this.f()));C$99r[C$99s]=C$99a,this.buffer=C$99r,this.i=C$99o,this.index=C$99s},C$99it.prototype.finish=function(){var C$99t=this.buffer,C$99e=this.index;return 0<this.i&&(C$99t[C$99e]<<=8-this.i,C$99t[C$99e]=C$99_[C$99t[C$99e]],C$99e++),C$99et?C$99t.subarray(0,C$99e):(C$99t.length=C$99e,C$99t)};for(var C$99n=new(C$99et?Uint8Array:Array)(256),C$99c=0;C$99c<256;++C$99c){for(var C$99l=C$99u=C$99c,C$99h=7,C$99u=C$99u>>>1;C$99u;C$99u>>>=1)C$99l=C$99l<<1|1&C$99u,--C$99h;C$99n[C$99c]=(C$99l<<C$99h&255)>>>0}var C$99_=C$99n;function C$99S(C$99t){this.buffer=new(C$99et?Uint16Array:Array)(2*C$99t),this.length=0}function C$99v(C$99t){for(var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99h,C$99a,C$99u=C$99t.length,C$99c=0,C$99_=Number.POSITIVE_INFINITY,C$99l=0;C$99l<C$99u;++C$99l)C$99t[C$99l]>C$99c&&(C$99c=C$99t[C$99l]),C$99t[C$99l]<C$99_&&(C$99_=C$99t[C$99l]);for(C$99e=1<<C$99c,C$99i=new(C$99et?Uint32Array:Array)(C$99e),C$99n=1,C$99r=0,C$99s=2;C$99n<=C$99c;){for(C$99l=0;C$99l<C$99u;++C$99l)if(C$99t[C$99l]===C$99n){for(C$99h=C$99r,C$99a=C$99o=0;C$99a<C$99n;++C$99a)C$99o=C$99o<<1|1&C$99h,C$99h>>=1;for(C$99a=C$99o;C$99a<C$99e;C$99a+=C$99s)C$99i[C$99a]=C$99n<<16|C$99l;++C$99r}++C$99n,C$99r<<=1,C$99s<<=1}return[C$99i,C$99c,C$99_]}function C$99d(C$99t,C$99e){this.h=C$99nt,this.w=0,this.input=C$99t,this.b=0,C$99e&&(C$99e.lazy&&(this.w=C$99e.lazy),"number"==typeof C$99e.compressionType&&(this.h=C$99e.compressionType),C$99e.outputBuffer&&(this.a=C$99et&&C$99e.outputBuffer instanceof Array?new Uint8Array(C$99e.outputBuffer):C$99e.outputBuffer),"number"==typeof C$99e.outputIndex&&(this.b=C$99e.outputIndex)),this.a||(this.a=new(C$99et?Uint8Array:Array)(32768))}C$99et&&new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),C$99S.prototype.getParent=function(C$99t){return 2*((C$99t-2)/4|0)},C$99S.prototype.push=function(C$99t,C$99e){var C$99i,C$99n,C$99r=this.buffer,C$99s=this.length;for(C$99r[this.length++]=C$99e,C$99r[this.length++]=C$99t;0<C$99s&&(C$99i=this.getParent(C$99s),C$99r[C$99s]>C$99r[C$99i]);)C$99n=C$99r[C$99s],C$99r[C$99s]=C$99r[C$99i],C$99r[C$99i]=C$99n,C$99n=C$99r[C$99s+1],C$99r[C$99s+1]=C$99r[C$99i+1],C$99r[C$99i+1]=C$99n,C$99s=C$99i;return this.length},C$99S.prototype.pop=function(){var C$99t,C$99e,C$99i,C$99n=this.buffer,C$99r=C$99n[0],C$99s=C$99n[1];for(this.length-=2,C$99n[0]=C$99n[this.length],C$99n[1]=C$99n[this.length+1],C$99i=0;!((C$99e=2*C$99i+2)>=this.length)&&(C$99e+2<this.length&&C$99n[C$99e+2]>C$99n[C$99e]&&(C$99e+=2),C$99n[C$99e]>C$99n[C$99i]);)C$99t=C$99n[C$99i],C$99n[C$99i]=C$99n[C$99e],C$99n[C$99e]=C$99t,C$99t=C$99n[C$99i+1],C$99n[C$99i+1]=C$99n[C$99e+1],C$99n[C$99e+1]=C$99t,C$99i=C$99e;return{index:C$99s,value:C$99r,length:this.length}};for(var C$99nt=2,C$99f={NONE:0,r:1,j:C$99nt,N:3},C$99rt=[],C$99e=0;C$99e<288;C$99e++)switch(C$99tt){case C$99e<=143:C$99rt.push([C$99e+48,8]);break;case C$99e<=255:C$99rt.push([C$99e-144+400,9]);break;case C$99e<=279:C$99rt.push([C$99e-256,7]);break;case C$99e<=287:C$99rt.push([C$99e-280+192,8]);break;default:C$99Q("invalid literal: "+C$99e)}function C$99E(C$99t,C$99e){this.length=C$99t,this.G=C$99e}C$99d.prototype.n=function(){var C$99h,C$99u,C$99_,C$99d=this.input;switch(this.h){case 0:for(C$99u=0,C$99_=C$99d.length;C$99u<C$99_;){var C$99f,C$99p,C$99m=C$99y=C$99et?C$99d.subarray(C$99u,C$99u+65535):C$99d.slice(C$99u,C$99u+65535),C$99y=(C$99u+=C$99y.length)===C$99_,C$99g=C$99$,C$99t=this.a,C$99e=this.b;if(C$99et){for(C$99t=new Uint8Array(this.a.buffer);C$99t.length<=C$99e+C$99m.length+5;)C$99t=new Uint8Array(C$99t.length<<1);C$99t.set(this.a)}if(C$99t[C$99e++]=0|(C$99y?1:0),C$99f=65536+~(C$99y=C$99m.length)&65535,C$99t[C$99e++]=255&C$99y,C$99t[C$99e++]=C$99y>>>8&255,C$99t[C$99e++]=255&C$99f,C$99t[C$99e++]=C$99f>>>8&255,C$99et)C$99t.set(C$99m,C$99e),C$99e+=C$99m.length,C$99t=C$99t.subarray(0,C$99e);else{for(C$99g=0,C$99p=C$99m.length;C$99g<C$99p;++C$99g)C$99t[C$99e++]=C$99m[C$99g];C$99t.length=C$99e}this.b=C$99e,this.a=C$99t}break;case 1:for(var C$99v,C$99x=new C$99it(new Uint8Array(this.a.buffer),this.b),C$99b=(C$99x.d(1,1,C$99tt),C$99x.d(1,2,C$99tt),C$99st(this,C$99d)),C$99A=0,C$99C=C$99b.length;C$99A<C$99C;C$99A++)if(C$99v=C$99b[C$99A],C$99it.prototype.d.apply(C$99x,C$99rt[C$99v]),256<C$99v)C$99x.d(C$99b[++C$99A],C$99b[++C$99A],C$99tt),C$99x.d(C$99b[++C$99A],5),C$99x.d(C$99b[++C$99A],C$99b[++C$99A],C$99tt);else if(256===C$99v)break;this.a=C$99x.finish(),this.b=this.a.length;break;case C$99nt:var C$99S,C$99T,C$99w,C$99E,C$99M,C$99I,C$99B,C$99R,C$99P,C$99D,C$99i,C$99L,C$99n=new C$99it(new Uint8Array(this.a),this.b),C$99V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C$99O=Array(19),C$99F=C$99nt;for(C$99n.d(1,1,C$99tt),C$99n.d(C$99F,2,C$99tt),C$99S=C$99st(this,C$99d),C$99F=C$99at(C$99M=C$99ot(this.L,15)),C$99j=C$99at(C$99I=C$99ot(this.K,7)),C$99T=286;257<C$99T&&0===C$99M[C$99T-1];C$99T--);for(C$99w=30;1<C$99w&&0===C$99I[C$99w-1];C$99w--);for(var C$99N,C$99r,C$99k,C$99s,C$99o,C$99G=C$99T,C$99z=C$99w,C$99a=new(C$99et?Uint32Array:Array)(C$99G+C$99z),C$99c=new(C$99et?Uint32Array:Array)(316),C$99U=new(C$99et?Uint8Array:Array)(19),C$99l=C$99N=0;C$99l<C$99G;C$99l++)C$99a[C$99N++]=C$99M[C$99l];for(C$99l=0;C$99l<C$99z;C$99l++)C$99a[C$99N++]=C$99I[C$99l];if(!C$99et)for(C$99l=0,C$99k=C$99U.length;C$99l<C$99k;++C$99l)C$99U[C$99l]=0;for(C$99l=C$99s=0,C$99k=C$99a.length;C$99l<C$99k;C$99l+=C$99N){for(C$99N=1;C$99l+C$99N<C$99k&&C$99a[C$99l+C$99N]===C$99a[C$99l];++C$99N);if(C$99r=C$99N,0===C$99a[C$99l])if(C$99r<3)for(;0<C$99r--;)C$99U[C$99c[C$99s++]=0]++;else for(;0<C$99r;)(C$99o=C$99r-3<(C$99o=C$99r<138?C$99r:138)&&C$99o<C$99r?C$99r-3:C$99o)<=10?(C$99c[C$99s++]=17,C$99c[C$99s++]=C$99o-3,C$99U[17]++):(C$99c[C$99s++]=18,C$99c[C$99s++]=C$99o-11,C$99U[18]++),C$99r-=C$99o;else if(C$99c[C$99s++]=C$99a[C$99l],C$99U[C$99a[C$99l]]++,--C$99r<3)for(;0<C$99r--;)C$99c[C$99s++]=C$99a[C$99l],C$99U[C$99a[C$99l]]++;else for(;0<C$99r;)C$99r-3<(C$99o=C$99r<6?C$99r:6)&&C$99o<C$99r&&(C$99o=C$99r-3),C$99c[C$99s++]=16,C$99c[C$99s++]=C$99o-3,C$99U[16]++,C$99r-=C$99o}for(C$99h=C$99et?C$99c.subarray(0,C$99s):C$99c.slice(0,C$99s),C$99B=C$99ot(C$99U,7),C$99i=0;C$99i<19;C$99i++)C$99O[C$99i]=C$99B[C$99V[C$99i]];for(C$99E=19;4<C$99E&&0===C$99O[C$99E-1];C$99E--);for(C$99R=C$99at(C$99B),C$99n.d(C$99T-257,5,C$99tt),C$99n.d(C$99w-1,5,C$99tt),C$99n.d(C$99E-4,4,C$99tt),C$99i=0;C$99i<C$99E;C$99i++)C$99n.d(C$99O[C$99i],3,C$99tt);for(C$99i=0,C$99L=C$99h.length;C$99i<C$99L;C$99i++)if(C$99P=C$99h[C$99i],C$99n.d(C$99R[C$99P],C$99B[C$99P],C$99tt),16<=C$99P){switch(C$99i++,C$99P){case 16:C$99D=2;break;case 17:C$99D=3;break;case 18:C$99D=7;break;default:C$99Q("invalid code: "+C$99P)}C$99n.d(C$99h[C$99i],C$99D,C$99tt)}for(var C$99W,C$99H,C$99F=[C$99F,C$99M],C$99j=[C$99j,C$99I],C$99X=C$99F[0],C$99Y=C$99F[1],C$99q=C$99j[0],C$99J=C$99j[1],C$99Z=0,C$99K=C$99S.length;C$99Z<C$99K;++C$99Z)if(C$99W=C$99S[C$99Z],C$99n.d(C$99X[C$99W],C$99Y[C$99W],C$99tt),256<C$99W)C$99n.d(C$99S[++C$99Z],C$99S[++C$99Z],C$99tt),C$99H=C$99S[++C$99Z],C$99n.d(C$99q[C$99H],C$99J[C$99H],C$99tt),C$99n.d(C$99S[++C$99Z],C$99S[++C$99Z],C$99tt);else if(256===C$99W)break;this.a=C$99n.finish(),this.b=this.a.length;break;default:C$99Q("invalid compression type")}return this.a};for(var C$99p,C$99m=[],C$99y=3;C$99y<=258;C$99y++)C$99p=function(){var C$99t=C$99y;switch(C$99tt){case 3===C$99t:return[257,C$99t-3,0];case 4===C$99t:return[258,C$99t-4,0];case 5===C$99t:return[259,C$99t-5,0];case 6===C$99t:return[260,C$99t-6,0];case 7===C$99t:return[261,C$99t-7,0];case 8===C$99t:return[262,C$99t-8,0];case 9===C$99t:return[263,C$99t-9,0];case 10===C$99t:return[264,C$99t-10,0];case C$99t<=12:return[265,C$99t-11,1];case C$99t<=14:return[266,C$99t-13,1];case C$99t<=16:return[267,C$99t-15,1];case C$99t<=18:return[268,C$99t-17,1];case C$99t<=22:return[269,C$99t-19,2];case C$99t<=26:return[270,C$99t-23,2];case C$99t<=30:return[271,C$99t-27,2];case C$99t<=34:return[272,C$99t-31,2];case C$99t<=42:return[273,C$99t-35,3];case C$99t<=50:return[274,C$99t-43,3];case C$99t<=58:return[275,C$99t-51,3];case C$99t<=66:return[276,C$99t-59,3];case C$99t<=82:return[277,C$99t-67,4];case C$99t<=98:return[278,C$99t-83,4];case C$99t<=114:return[279,C$99t-99,4];case C$99t<=130:return[280,C$99t-115,4];case C$99t<=162:return[281,C$99t-131,5];case C$99t<=194:return[282,C$99t-163,5];case C$99t<=226:return[283,C$99t-195,5];case C$99t<=257:return[284,C$99t-227,5];case 258===C$99t:return[285,C$99t-258,0];default:C$99Q("invalid length: "+C$99t)}}(),C$99m[C$99y]=C$99p[2]<<24|C$99p[1]<<16|C$99p[0];var C$99M=C$99et?new Uint32Array(C$99m):C$99m;function C$99st(C$99a,C$99t){function C$99c(C$99t,C$99e){var C$99i,C$99n,C$99r,C$99s=C$99t.G,C$99o=[],C$99a=0,C$99c=C$99M[C$99t.length];switch(C$99o[C$99a++]=65535&C$99c,C$99o[C$99a++]=C$99c>>16&255,C$99o[C$99a++]=C$99c>>24,C$99tt){case 1===C$99s:C$99i=[0,C$99s-1,0];break;case 2===C$99s:C$99i=[1,C$99s-2,0];break;case 3===C$99s:C$99i=[2,C$99s-3,0];break;case 4===C$99s:C$99i=[3,C$99s-4,0];break;case C$99s<=6:C$99i=[4,C$99s-5,1];break;case C$99s<=8:C$99i=[5,C$99s-7,1];break;case C$99s<=12:C$99i=[6,C$99s-9,2];break;case C$99s<=16:C$99i=[7,C$99s-13,2];break;case C$99s<=24:C$99i=[8,C$99s-17,3];break;case C$99s<=32:C$99i=[9,C$99s-25,3];break;case C$99s<=48:C$99i=[10,C$99s-33,4];break;case C$99s<=64:C$99i=[11,C$99s-49,4];break;case C$99s<=96:C$99i=[12,C$99s-65,5];break;case C$99s<=128:C$99i=[13,C$99s-97,5];break;case C$99s<=192:C$99i=[14,C$99s-129,6];break;case C$99s<=256:C$99i=[15,C$99s-193,6];break;case C$99s<=384:C$99i=[16,C$99s-257,7];break;case C$99s<=512:C$99i=[17,C$99s-385,7];break;case C$99s<=768:C$99i=[18,C$99s-513,8];break;case C$99s<=1024:C$99i=[19,C$99s-769,8];break;case C$99s<=1536:C$99i=[20,C$99s-1025,9];break;case C$99s<=2048:C$99i=[21,C$99s-1537,9];break;case C$99s<=3072:C$99i=[22,C$99s-2049,10];break;case C$99s<=4096:C$99i=[23,C$99s-3073,10];break;case C$99s<=6144:C$99i=[24,C$99s-4097,11];break;case C$99s<=8192:C$99i=[25,C$99s-6145,11];break;case C$99s<=12288:C$99i=[26,C$99s-8193,12];break;case C$99s<=16384:C$99i=[27,C$99s-12289,12];break;case C$99s<=24576:C$99i=[28,C$99s-16385,13];break;case C$99s<=32768:C$99i=[29,C$99s-24577,13];break;default:C$99Q("invalid distance")}for(C$99c=C$99i,C$99o[C$99a++]=C$99c[0],C$99o[+C$99a]=C$99c[1],C$99o[5]=C$99c[2],C$99n=0,C$99r=C$99o.length;C$99n<C$99r;++C$99n)C$99h[C$99m++]=C$99o[C$99n];C$99u[C$99o[0]]++,C$99g[C$99o[3]]++,C$99y=C$99t.length+C$99e-1,C$99l=null}var C$99e,C$99_,C$99i,C$99d,C$99n,C$99r,C$99f,C$99l,C$99s,C$99p={},C$99h=C$99et?new Uint16Array(2*C$99t.length):[],C$99m=0,C$99y=0,C$99u=new(C$99et?Uint32Array:Array)(286),C$99g=new(C$99et?Uint32Array:Array)(30),C$99v=C$99a.w;if(!C$99et){for(C$99i=0;C$99i<=285;)C$99u[C$99i++]=0;for(C$99i=0;C$99i<=29;)C$99g[C$99i++]=0}for(C$99u[256]=1,C$99e=0,C$99_=C$99t.length;C$99e<C$99_;++C$99e){for(C$99i=C$99n=0,C$99d=3;C$99i<C$99d&&C$99e+C$99i!==C$99_;++C$99i)C$99n=C$99n<<8|C$99t[C$99e+C$99i];if(C$99p[C$99n]===C$99$&&(C$99p[C$99n]=[]),C$99r=C$99p[C$99n],!(0<C$99y--)){for(;0<C$99r.length&&32768<C$99e-C$99r[0];)C$99r.shift();if(C$99_<=C$99e+3){for(C$99l&&C$99c(C$99l,-1),C$99i=0,C$99d=C$99_-C$99e;C$99i<C$99d;++C$99i)C$99s=C$99t[C$99e+C$99i],C$99h[C$99m++]=C$99s,++C$99u[C$99s];break}if(0<C$99r.length){var C$99x,C$99b=C$99$,C$99A=0,C$99o=C$99$,C$99C=C$99$,C$99S=C$99$,C$99T=C$99t.length,C$99C=0,C$99w=C$99r.length;C$99t:for(;C$99C<C$99w;C$99C++){if(C$99x=C$99r[C$99w-C$99C-1],(C$99o=3)<C$99A){for(C$99S=C$99A;3<C$99S;C$99S--)if(C$99t[C$99x+C$99S-1]!==C$99t[C$99e+C$99S-1])continue C$99t;C$99o=C$99A}for(;C$99o<258&&C$99e+C$99o<C$99T&&C$99t[C$99x+C$99o]===C$99t[C$99e+C$99o];)++C$99o;if(C$99A<C$99o&&(C$99b=C$99x,C$99A=C$99o),258===C$99o)break}C$99f=new C$99E(C$99A,C$99e-C$99b),C$99l?C$99l.length<C$99f.length?(C$99s=C$99t[C$99e-1],C$99h[C$99m++]=C$99s,++C$99u[C$99s],C$99c(C$99f,0)):C$99c(C$99l,-1):C$99f.length<C$99v?C$99l=C$99f:C$99c(C$99f,0)}else C$99l?C$99c(C$99l,-1):(C$99s=C$99t[C$99e],C$99h[C$99m++]=C$99s,++C$99u[C$99s])}C$99r.push(C$99e)}return C$99h[C$99m++]=256,C$99u[256]++,C$99a.L=C$99u,C$99a.K=C$99g,C$99et?C$99h.subarray(0,C$99m):C$99h}function C$99ot(C$99h,C$99t){var C$99e,C$99u,C$99_,C$99i,C$99d,C$99f=C$99h.length,C$99p=new C$99S(572),C$99m=new(C$99et?Uint8Array:Array)(C$99f);if(!C$99et)for(C$99i=0;C$99i<C$99f;C$99i++)C$99m[C$99i]=0;for(C$99i=0;C$99i<C$99f;++C$99i)0<C$99h[C$99i]&&C$99p.push(C$99i,C$99h[C$99i]);if(C$99e=Array(C$99p.length/2),C$99u=new(C$99et?Uint32Array:Array)(C$99p.length/2),1===C$99e.length)return C$99m[C$99p.pop().index]=1,C$99m;for(C$99i=0,C$99d=C$99p.length/2;C$99i<C$99d;++C$99i)C$99e[C$99i]=C$99p.pop(),C$99u[C$99i]=C$99e[C$99i].value;var C$99n,C$99r,C$99s,C$99y,C$99g,C$99o=C$99u.length,C$99a=new(C$99et?Uint16Array:Array)(C$99t),C$99c=new(C$99et?Uint8Array:Array)(C$99t),C$99v=new(C$99et?Uint8Array:Array)(C$99o),C$99l=Array(C$99t),C$99x=Array(C$99t),C$99b=Array(C$99t),C$99A=(1<<C$99t)-C$99o,C$99C=1<<C$99t-1;for(C$99a[C$99t-1]=C$99o,C$99r=0;C$99r<C$99t;++C$99r)C$99A<C$99C?C$99c[C$99r]=0:(C$99c[C$99r]=1,C$99A-=C$99C),C$99A<<=1,C$99a[C$99t-2-C$99r]=(C$99a[C$99t-1-C$99r]/2|0)+C$99o;for(C$99a[0]=C$99c[0],C$99l[0]=Array(C$99a[0]),C$99x[0]=Array(C$99a[0]),C$99r=1;C$99r<C$99t;++C$99r)C$99a[C$99r]>2*C$99a[C$99r-1]+C$99c[C$99r]&&(C$99a[C$99r]=2*C$99a[C$99r-1]+C$99c[C$99r]),C$99l[C$99r]=Array(C$99a[C$99r]),C$99x[C$99r]=Array(C$99a[C$99r]);for(C$99n=0;C$99n<C$99o;++C$99n)C$99v[C$99n]=C$99t;for(C$99s=0;C$99s<C$99a[C$99t-1];++C$99s)C$99l[C$99t-1][C$99s]=C$99u[C$99s],C$99x[C$99t-1][C$99s]=C$99s;for(C$99n=0;C$99n<C$99t;++C$99n)C$99b[C$99n]=0;for(1===C$99c[C$99t-1]&&(--C$99v[0],++C$99b[C$99t-1]),C$99r=C$99t-2;0<=C$99r;--C$99r){for(C$99n=0,C$99g=C$99b[C$99r+1],C$99s=0;C$99s<C$99a[C$99r];C$99s++)(C$99y=C$99l[C$99r+1][C$99g]+C$99l[C$99r+1][C$99g+1])>C$99u[C$99n]?(C$99l[C$99r][C$99s]=C$99y,C$99x[C$99r][C$99s]=C$99o,C$99g+=2):(C$99l[C$99r][C$99s]=C$99u[C$99n],C$99x[C$99r][C$99s]=C$99n,++C$99n);C$99b[C$99r]=0,1===C$99c[C$99r]&&function C$99t(C$99e){var C$99i=C$99x[C$99e][C$99b[C$99e]];C$99i===C$99o?(C$99t(C$99e+1),C$99t(C$99e+1)):--C$99v[C$99i],++C$99b[C$99e]}(C$99r)}for(C$99_=C$99v,C$99i=0,C$99d=C$99e.length;C$99i<C$99d;++C$99i)C$99m[C$99e[C$99i].index]=C$99_[C$99i];return C$99m}function C$99at(C$99t){for(var C$99e,C$99i,C$99n=new(C$99et?Uint16Array:Array)(C$99t.length),C$99r=[],C$99s=[],C$99o=0,C$99a=0,C$99c=C$99t.length;C$99a<C$99c;C$99a++)C$99r[C$99t[C$99a]]=1+(0|C$99r[C$99t[C$99a]]);for(C$99a=1,C$99c=16;C$99a<=C$99c;C$99a++)C$99s[C$99a]=C$99o,1<<C$99a<(C$99o+=0|C$99r[C$99a])&&C$99Q("overcommitted"),C$99o<<=1;for(C$99o<65536&&C$99Q("undercommitted"),C$99a=0,C$99c=C$99t.length;C$99a<C$99c;C$99a++)for(C$99o=C$99s[C$99t[C$99a]],C$99s[C$99t[C$99a]]+=1,C$99e=C$99n[C$99a]=0,C$99i=C$99t[C$99a];C$99e<C$99i;C$99e++)C$99n[C$99a]=C$99n[C$99a]<<1|1&C$99o,C$99o>>>=1;return C$99n}function C$99x(C$99t,C$99e){this.input=C$99t,this.a=new(C$99et?Uint8Array:Array)(32768),this.h=C$99s.j;var C$99i,C$99n={};for(C$99i in(C$99e?"number"!=typeof C$99e.compressionType:C$99e={})||(this.h=C$99e.compressionType),C$99e)C$99n[C$99i]=C$99e[C$99i];C$99n.outputBuffer=this.a,this.z=new C$99d(this.input,C$99n)}var C$99s=C$99f;function C$99r(C$99t,C$99e){switch(this.k=[],this.l=32768,this.e=this.g=this.c=this.q=0,this.input=C$99et?new Uint8Array(C$99t):C$99t,this.s=!1,this.m=C$99A,this.B=!1,C$99e?(C$99e.index&&(this.c=C$99e.index),C$99e.bufferSize&&(this.l=C$99e.bufferSize),C$99e.bufferType&&(this.m=C$99e.bufferType),C$99e.resize&&(this.B=C$99e.resize)):C$99e={},this.m){case C$99b:this.b=32768,this.a=new(C$99et?Uint8Array:Array)(32768+this.l+258);break;case C$99A:this.b=0,this.a=new(C$99et?Uint8Array:Array)(this.l),this.f=this.J,this.t=this.H,this.o=this.I;break;default:C$99Q(Error("invalid inflate mode"))}}C$99x.prototype.n=function(){var C$99t,C$99e,C$99i=0,C$99n=this.a,C$99r=C$99Y;if(C$99r===C$99Y?C$99e=Math.LOG2E*Math.log(32768)-8:C$99Q(Error("invalid compression method")),C$99n[C$99i++]=C$99e=C$99e<<4|C$99r,C$99r===C$99Y)switch(this.h){case C$99s.NONE:C$99t=0;break;case C$99s.r:C$99t=1;break;case C$99s.j:C$99t=2;break;default:C$99Q(Error("unsupported compression type"))}else C$99Q(Error("invalid compression method"));return C$99n[C$99i++]=(C$99r=C$99t<<6|0)|31-(256*C$99e+C$99r)%31,C$99e=C$99a(this.input),this.z.b=C$99i,C$99i=(C$99n=this.z.n()).length,C$99et&&((C$99n=new Uint8Array(C$99n.buffer)).length<=C$99i+4&&(this.a=new Uint8Array(C$99n.length+4),this.a.set(C$99n),C$99n=this.a),C$99n=C$99n.subarray(0,C$99i+4)),C$99n[C$99i++]=C$99e>>24&255,C$99n[C$99i++]=C$99e>>16&255,C$99n[C$99i++]=C$99e>>8&255,C$99n[C$99i++]=255&C$99e,C$99n},C$99t("Zlib.Deflate",C$99x),C$99t("Zlib.Deflate.compress",function(C$99t,C$99e){return new C$99x(C$99t,C$99e).n()}),C$99t("Zlib.Deflate.CompressionType",C$99s),C$99t("Zlib.Deflate.CompressionType.NONE",C$99s.NONE),C$99t("Zlib.Deflate.CompressionType.FIXED",C$99s.r),C$99t("Zlib.Deflate.CompressionType.DYNAMIC",C$99s.j);for(var C$99b=0,C$99A=1,C$99f={D:C$99b,C:C$99A},C$99i=(C$99r.prototype.p=function(){for(;!this.s;){var C$99h=C$99g(this,3);switch(1&C$99h&&(this.s=C$99tt),C$99h>>>=1){case 0:var C$99t=this.input,C$99e=this.c,C$99i=this.a,C$99n=this.b,C$99r=C$99$,C$99u=C$99i.length,C$99s=C$99$;switch(this.e=this.g=0,(C$99c=C$99t[C$99e++])===C$99$&&C$99Q(Error("invalid uncompressed block header: LEN (first byte)")),C$99r=C$99c,(C$99c=C$99t[C$99e++])===C$99$&&C$99Q(Error("invalid uncompressed block header: LEN (second byte)")),C$99r|=C$99c<<8,(C$99c=C$99t[C$99e++])===C$99$&&C$99Q(Error("invalid uncompressed block header: NLEN (first byte)")),C$99l=C$99c,(C$99c=C$99t[C$99e++])===C$99$&&C$99Q(Error("invalid uncompressed block header: NLEN (second byte)")),C$99r===~(C$99l|=C$99c<<8)&&C$99Q(Error("invalid uncompressed block header: length verify")),C$99e+C$99r>C$99t.length&&C$99Q(Error("input buffer is broken")),this.m){case C$99b:for(;C$99n+C$99r>C$99i.length;){if(C$99r-=C$99s=C$99u-C$99n,C$99et)C$99i.set(C$99t.subarray(C$99e,C$99e+C$99s),C$99n),C$99n+=C$99s,C$99e+=C$99s;else for(;C$99s--;)C$99i[C$99n++]=C$99t[C$99e++];this.b=C$99n,C$99i=this.f(),C$99n=this.b}break;case C$99A:for(;C$99n+C$99r>C$99i.length;)C$99i=this.f({v:2});break;default:C$99Q(Error("invalid inflate mode"))}if(C$99et)C$99i.set(C$99t.subarray(C$99e,C$99e+C$99r),C$99n),C$99n+=C$99r,C$99e+=C$99r;else for(;C$99r--;)C$99i[C$99n++]=C$99t[C$99e++];this.c=C$99e,this.b=C$99n,this.a=C$99i;break;case 1:this.o(C$99L,C$99N);break;case 2:C$99o=C$99f=C$99d=C$99_=C$99y=C$99m=C$99l=C$99c=C$99a=void 0;var C$99_,C$99d,C$99f,C$99o,C$99a=this,C$99p=function(C$99t,C$99e,C$99i){for(var C$99n,C$99r,C$99s,C$99o=0;C$99o<C$99t;)switch(C$99n=C$99k(this,C$99e),C$99n){case 16:for(C$99s=3+C$99g(this,2);C$99s--;)C$99i[C$99o++]=C$99r;break;case 17:for(C$99s=3+C$99g(this,3);C$99s--;)C$99i[C$99o++]=0;C$99r=0;break;case 18:for(C$99s=11+C$99g(this,7);C$99s--;)C$99i[C$99o++]=0;C$99r=0;break;default:C$99r=C$99i[C$99o++]=C$99n}return C$99i},C$99c=C$99g(C$99a,5)+257,C$99l=C$99g(C$99a,5)+1,C$99m=C$99g(C$99a,4)+4,C$99y=new(C$99et?Uint8Array:Array)(C$99C.length);for(C$99o=0;C$99o<C$99m;++C$99o)C$99y[C$99C[C$99o]]=C$99g(C$99a,3);C$99_=C$99v(C$99y),C$99d=new(C$99et?Uint8Array:Array)(C$99c),C$99f=new(C$99et?Uint8Array:Array)(C$99l),C$99a.o(C$99v(C$99p.call(C$99a,C$99c,C$99_,C$99d)),C$99v(C$99p.call(C$99a,C$99l,C$99_,C$99f)));break;default:C$99Q(Error("unknown BTYPE: "+C$99h))}}return this.t()},[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C$99C=C$99et?new Uint16Array(C$99i):C$99i,C$99i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],C$99T=C$99et?new Uint16Array(C$99i):C$99i,C$99i=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],C$99w=C$99et?new Uint8Array(C$99i):C$99i,C$99i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C$99I=C$99et?new Uint16Array(C$99i):C$99i,C$99i=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C$99B=C$99et?new Uint8Array(C$99i):C$99i,C$99R=new(C$99et?Uint8Array:Array)(288),C$99P=0,C$99D=C$99R.length;C$99P<C$99D;++C$99P)C$99R[C$99P]=C$99P<=143?8:C$99P<=255?9:C$99P<=279?7:8;for(var C$99L=C$99v(C$99R),C$99V=new(C$99et?Uint8Array:Array)(30),C$99O=0,C$99F=C$99V.length;C$99O<C$99F;++C$99O)C$99V[C$99O]=5;var C$99N=C$99v(C$99V);function C$99g(C$99t,C$99e){for(var C$99i,C$99n=C$99t.g,C$99r=C$99t.e,C$99s=C$99t.input,C$99o=C$99t.c;C$99r<C$99e;)(C$99i=C$99s[C$99o++])===C$99$&&C$99Q(Error("input buffer is broken")),C$99n|=C$99i<<C$99r,C$99r+=8;return C$99i=C$99n&(1<<C$99e)-1,C$99t.g=C$99n>>>C$99e,C$99t.e=C$99r-C$99e,C$99t.c=C$99o,C$99i}function C$99k(C$99t,C$99e){for(var C$99i,C$99n=C$99t.g,C$99r=C$99t.e,C$99s=C$99t.input,C$99o=C$99t.c,C$99a=C$99e[0],C$99c=C$99e[1];C$99r<C$99c;)(C$99i=C$99s[C$99o++])===C$99$&&C$99Q(Error("input buffer is broken")),C$99n|=C$99i<<C$99r,C$99r+=8;return C$99e=C$99a[C$99n&(1<<C$99c)-1],C$99t.g=C$99n>>(C$99a=C$99e>>>16),C$99t.e=C$99r-C$99a,C$99t.c=C$99o,65535&C$99e}function C$99G(C$99t,C$99e){var C$99i,C$99n;this.input=C$99t,this.c=0,C$99e?(C$99e.index&&(this.c=C$99e.index),C$99e.verify&&(this.M=C$99e.verify)):C$99e={},C$99i=C$99t[this.c++],C$99n=C$99t[this.c++],(15&C$99i)===C$99Y?this.method=C$99Y:C$99Q(Error("unsupported compression method")),0!=((C$99i<<8)+C$99n)%31&&C$99Q(Error("invalid fcheck flag:"+((C$99i<<8)+C$99n)%31)),32&C$99n&&C$99Q(Error("fdict flag is not supported")),this.A=new C$99r(C$99t,{index:this.c,bufferSize:C$99e.bufferSize,bufferType:C$99e.bufferType,resize:C$99e.resize})}C$99r.prototype.o=function(C$99t,C$99e){var C$99i=this.a,C$99n=this.b;this.u=C$99t;for(var C$99r,C$99s,C$99o,C$99a,C$99c=C$99i.length-258;256!==(C$99r=C$99k(this,C$99t));)if(C$99r<256)C$99c<=C$99n&&(this.b=C$99n,C$99i=this.f(),C$99n=this.b),C$99i[C$99n++]=C$99r;else for(C$99a=C$99T[C$99s=C$99r-257],0<C$99w[C$99s]&&(C$99a+=C$99g(this,C$99w[C$99s])),C$99r=C$99k(this,C$99e),C$99o=C$99I[C$99r],0<C$99B[C$99r]&&(C$99o+=C$99g(this,C$99B[C$99r])),C$99c<=C$99n&&(this.b=C$99n,C$99i=this.f(),C$99n=this.b);C$99a--;)C$99i[C$99n]=C$99i[C$99n++-C$99o];for(;8<=this.e;)this.e-=8,this.c--;this.b=C$99n},C$99r.prototype.I=function(C$99t,C$99e){var C$99i=this.a,C$99n=this.b;this.u=C$99t;for(var C$99r,C$99s,C$99o,C$99a,C$99c=C$99i.length;256!==(C$99r=C$99k(this,C$99t));)if(C$99r<256)C$99c<=C$99n&&(C$99c=(C$99i=this.f()).length),C$99i[C$99n++]=C$99r;else for(C$99a=C$99T[C$99s=C$99r-257],0<C$99w[C$99s]&&(C$99a+=C$99g(this,C$99w[C$99s])),C$99r=C$99k(this,C$99e),C$99o=C$99I[C$99r],0<C$99B[C$99r]&&(C$99o+=C$99g(this,C$99B[C$99r])),C$99c<C$99n+C$99a&&(C$99c=(C$99i=this.f()).length);C$99a--;)C$99i[C$99n]=C$99i[C$99n++-C$99o];for(;8<=this.e;)this.e-=8,this.c--;this.b=C$99n},C$99r.prototype.f=function(){var C$99t,C$99e,C$99i=new(C$99et?Uint8Array:Array)(this.b-32768),C$99n=this.b-32768,C$99r=this.a;if(C$99et)C$99i.set(C$99r.subarray(32768,C$99i.length));else for(C$99t=0,C$99e=C$99i.length;C$99t<C$99e;++C$99t)C$99i[C$99t]=C$99r[C$99t+32768];if(this.k.push(C$99i),this.q+=C$99i.length,C$99et)C$99r.set(C$99r.subarray(C$99n,32768+C$99n));else for(C$99t=0;C$99t<32768;++C$99t)C$99r[C$99t]=C$99r[C$99n+C$99t];return this.b=32768,C$99r},C$99r.prototype.J=function(C$99t){var C$99e,C$99i=this.input.length/this.c+1|0,C$99n=this.input,C$99r=this.a;return C$99t&&("number"==typeof C$99t.v&&(C$99i=C$99t.v),"number"==typeof C$99t.F&&(C$99i+=C$99t.F)),C$99n=C$99i<2?(C$99t=(C$99n.length-this.c)/this.u[2]/2*258|0)<C$99r.length?C$99r.length+C$99t:C$99r.length<<1:C$99r.length*C$99i,C$99et?(C$99e=new Uint8Array(C$99n)).set(C$99r):C$99e=C$99r,this.a=C$99e},C$99r.prototype.t=function(){var C$99t,C$99e,C$99i,C$99n,C$99r,C$99s=0,C$99o=this.a,C$99a=this.k,C$99c=new(C$99et?Uint8Array:Array)(this.q+(this.b-32768));if(0===C$99a.length)return C$99et?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(C$99e=0,C$99i=C$99a.length;C$99e<C$99i;++C$99e)for(C$99n=0,C$99r=(C$99t=C$99a[C$99e]).length;C$99n<C$99r;++C$99n)C$99c[C$99s++]=C$99t[C$99n];for(C$99e=32768,C$99i=this.b;C$99e<C$99i;++C$99e)C$99c[C$99s++]=C$99o[C$99e];return this.k=[],this.buffer=C$99c},C$99r.prototype.H=function(){var C$99t,C$99e=this.b;return C$99et?this.B?(C$99t=new Uint8Array(C$99e)).set(this.a.subarray(0,C$99e)):C$99t=this.a.subarray(0,C$99e):(this.a.length>C$99e&&(this.a.length=C$99e),C$99t=this.a),this.buffer=C$99t},C$99G.prototype.p=function(){var C$99t=this.input,C$99e=this.A.p();return this.c=this.A.c,this.M&&((C$99t[this.c++]<<24|C$99t[this.c++]<<16|C$99t[this.c++]<<8|C$99t[this.c++])>>>0!==C$99a(C$99e)&&C$99Q(Error("invalid adler-32 checksum"))),C$99e},C$99t("Zlib.Inflate",C$99G),C$99t("Zlib.Inflate.BufferType",C$99f),C$99f.ADAPTIVE=C$99f.C,C$99f.BLOCK=C$99f.D,C$99t("Zlib.Inflate.prototype.decompress",C$99G.prototype.p);C$99et&&new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C$99et&&new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),C$99et&&new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),C$99et&&new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);C$99et&&new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);for(var C$99z=new(C$99et?Uint8Array:Array)(288),C$99U=0,C$99W=C$99z.length;C$99U<C$99W;++C$99U)C$99z[C$99U]=C$99U<=143?8:C$99U<=255?9:C$99U<=279?7:8;C$99v(C$99z);for(var C$99H=new(C$99et?Uint8Array:Array)(30),C$99j=0,C$99X=C$99H.length;C$99j<C$99X;++C$99j)C$99H[C$99j]=5;C$99v(C$99H);var C$99Y=8}.call(window);var C$99n=window.Zlib;C$99n.Deflate=C$99n.Deflate,C$99n.Deflate.compress=C$99n.Deflate.compress,C$99n.Inflate=C$99n.Inflate,C$99n.Inflate.BufferType=C$99n.Inflate.BufferType,C$99n.Inflate.prototype.decompress=C$99n.Inflate.prototype.decompress,C$99e.exports=C$99n},{}],27:[function(C$99t,C$99e,C$99h){"use strict";var C$99n,C$99i=C$99t("./platform/utils"),C$99r=C$99t("../../DebugInfos")||{};cc.log=cc.warn=cc.error=cc.assert=console.log.bind?console.log.bind(console):console.log;function C$99s(){return function(){var C$99t=C$99r[arguments[0]]||"unknown id";if(1===arguments.length)return C$99t;if(2===arguments.length)return cc.js.formatStr(C$99t,arguments[1]);var C$99e=cc.js.shiftArguments.apply(null,arguments);return cc.js.formatStr.apply(null,[C$99t].concat(C$99e))}}cc._throw=function(C$99t){C$99i.callInNextTick(function(){throw C$99t})};var C$99o=C$99s(),C$99a=(cc.logID=function(){cc.log(C$99o.apply(null,arguments))},C$99s()),C$99c=(cc.warnID=function(){cc.warn(C$99a.apply(null,arguments))},C$99s()),C$99u=(cc.errorID=function(){cc.error(C$99c.apply(null,arguments))},C$99s()),C$99l=(cc.assertID=function(C$99t){C$99t||cc.assert(!1,C$99u.apply(null,cc.js.shiftArguments.apply(null,arguments)))},cc.Enum({NONE:0,INFO:1,WARN:2,ERROR:3,INFO_FOR_WEB_PAGE:4,WARN_FOR_WEB_PAGE:5,ERROR_FOR_WEB_PAGE:6}));C$99e.exports=cc.debug={DebugMode:C$99l,_resetDebugSetting:function(C$99t){var C$99i;cc.log=cc.warn=cc.error=cc.assert=function(){},C$99t!==C$99l.NONE&&(C$99t>C$99l.ERROR?(C$99i=function(C$99t){var C$99e,C$99i;cc.game.canvas&&(C$99n||((C$99e=document.createElement("Div")).setAttribute("id","logInfoDiv"),C$99e.setAttribute("width","200"),C$99e.setAttribute("height",cc.game.canvas.height),(C$99i=C$99e.style).zIndex="99999",C$99i.position="absolute",C$99i.top=C$99i.left="0",(C$99n=document.createElement("textarea")).setAttribute("rows","20"),C$99n.setAttribute("cols","30"),C$99n.setAttribute("disabled","true"),(C$99i=C$99n.style).backgroundColor="transparent",C$99i.borderBottom="1px solid #cccccc",C$99i.borderTopWidth=C$99i.borderLeftWidth=C$99i.borderRightWidth="0px",C$99i.borderTopStyle=C$99i.borderLeftStyle=C$99i.borderRightStyle="none",C$99i.padding="0px",C$99i.margin=0,C$99e.appendChild(C$99n),cc.game.canvas.parentNode.appendChild(C$99e)),C$99n.value=C$99n.value+C$99t+"\r\n",C$99n.scrollTop=C$99n.scrollHeight)},cc.error=function(){C$99i("ERROR :  "+cc.js.formatStr.apply(null,arguments))},cc.assert=function(C$99t,C$99e){!C$99t&&C$99e&&(C$99e=cc.js.formatStr.apply(null,cc.js.shiftArguments.apply(null,arguments)),C$99i("ASSERT: "+C$99e))},C$99t!==C$99l.ERROR_FOR_WEB_PAGE&&(cc.warn=function(){C$99i("WARN :  "+cc.js.formatStr.apply(null,arguments))}),C$99t===C$99l.INFO_FOR_WEB_PAGE&&(cc.log=function(){C$99i(cc.js.formatStr.apply(null,arguments))})):console&&console.log.apply&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),console.error.bind?cc.error=console.error.bind(console):cc.error=function(){return console.error.apply(console,arguments)},cc.assert=function(C$99t,C$99e){if(!C$99t)throw C$99e=C$99e&&cc.js.formatStr.apply(null,cc.js.shiftArguments.apply(null,arguments)),new Error(C$99e)}),C$99t!==C$99l.ERROR&&(console.warn.bind?cc.warn=console.warn.bind(console):cc.warn=function(){return console.warn.apply(console,arguments)}),C$99t===C$99l.INFO&&(console.log.bind?cc.log=console.log.bind(console):cc.log=function(){return console.log.apply(console,arguments)}))},getError:C$99s(),isDisplayStats:function(){return!!cc.profiler&&cc.profiler.isShowingStats()},setDisplayStats:function(C$99t){cc.profiler&&cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&(C$99t?cc.profiler.showStats():cc.profiler.hideStats(),cc.game.config.showFPS=!!C$99t)}}},{"../../DebugInfos":1,"./platform/utils":213}],28:[function(C$99t,C$99e,C$99a){"use strict";var C$99i=C$99t("./event/event-target"),C$99h=C$99t("./load-pipeline/auto-release-utils"),C$99n=C$99t("./component-scheduler"),C$99r=C$99t("./node-activator"),C$99u=C$99t("./platform/CCObject"),C$99_=C$99t("./CCGame"),C$99c=C$99t("./renderer"),C$99s=C$99t("./event-manager"),C$99o=C$99t("./CCScheduler");cc.Director=function(){C$99i.call(this),this._paused=!1,this._purgeDirectorInNextLoop=!1,this._winSizeInPoints=null,this._loadingScene="",this._scene=null,this._totalFrames=0,this._lastUpdate=0,this._deltaTime=0,this._startTime=0,this._maxParticleDeltaTime=0,this._scheduler=null,this._compScheduler=null,this._nodeActivator=null,this._actionManager=null;var C$99t=this;C$99_.on(C$99_.EVENT_SHOW,function(){C$99t._lastUpdate=performance.now()}),C$99_.once(C$99_.EVENT_ENGINE_INITED,this.init,this)},cc.Director.prototype={constructor:cc.Director,init:function(){return this._totalFrames=0,this._lastUpdate=performance.now(),this._startTime=this._lastUpdate,this._paused=!1,this._purgeDirectorInNextLoop=!1,this._winSizeInPoints=cc.size(0,0),this._scheduler=new C$99o,cc.ActionManager?(this._actionManager=new cc.ActionManager,this._scheduler.scheduleUpdate(this._actionManager,C$99o.PRIORITY_SYSTEM,!1)):this._actionManager=null,this.sharedInit(),!0},sharedInit:function(){this._compScheduler=new C$99n,this._nodeActivator=new C$99r,C$99s&&C$99s.setEnabled(!0),cc.AnimationManager?(this._animationManager=new cc.AnimationManager,this._scheduler.scheduleUpdate(this._animationManager,C$99o.PRIORITY_SYSTEM,!1)):this._animationManager=null,cc.CollisionManager?(this._collisionManager=new cc.CollisionManager,this._scheduler.scheduleUpdate(this._collisionManager,C$99o.PRIORITY_SYSTEM,!1)):this._collisionManager=null,cc.PhysicsManager?(this._physicsManager=new cc.PhysicsManager,this._scheduler.scheduleUpdate(this._physicsManager,C$99o.PRIORITY_SYSTEM,!1)):this._physicsManager=null,cc.Physics3DManager?(this._physics3DManager=new cc.Physics3DManager,this._scheduler.scheduleUpdate(this._physics3DManager,C$99o.PRIORITY_SYSTEM,!1)):this._physics3DManager=null,cc._widgetManager&&cc._widgetManager.init(this),cc.loader.init(this)},calculateDeltaTime:function(C$99t){C$99t=C$99t||performance.now(),this._deltaTime=C$99t>this._lastUpdate?(C$99t-this._lastUpdate)/1e3:0,1<this._deltaTime&&(this._deltaTime=1/60),this._lastUpdate=C$99t},convertToGL:function(C$99t){var C$99e=C$99_.container,C$99i=cc.view,C$99n=C$99e.getBoundingClientRect(),C$99r=C$99n.left+window.pageXOffset-C$99e.clientLeft,C$99e=C$99n.top+window.pageYOffset-C$99e.clientTop,C$99r=C$99i._devicePixelRatio*(C$99t.x-C$99r),C$99e=C$99i._devicePixelRatio*(C$99e+C$99n.height-C$99t.y);return C$99i._isRotated?cc.v2(C$99i._viewportRect.width-C$99e,C$99r):cc.v2(C$99r,C$99e)},convertToUI:function(C$99t){var C$99e=C$99_.container,C$99i=cc.view,C$99n=C$99e.getBoundingClientRect(),C$99r=C$99n.left+window.pageXOffset-C$99e.clientLeft,C$99e=C$99n.top+window.pageYOffset-C$99e.clientTop,C$99s=cc.v2(0,0);return C$99i._isRotated?(C$99s.x=C$99r+C$99t.y/C$99i._devicePixelRatio,C$99s.y=C$99e+C$99n.height-(C$99i._viewportRect.width-C$99t.x)/C$99i._devicePixelRatio):(C$99s.x=C$99r+C$99t.x*C$99i._devicePixelRatio,C$99s.y=C$99e+C$99n.height-C$99t.y*C$99i._devicePixelRatio),C$99s},end:function(){this._purgeDirectorInNextLoop=!0},getWinSize:function(){return cc.size(cc.winSize)},getWinSizeInPixels:function(){return cc.size(cc.winSize)},pause:function(){this._paused||(this._paused=!0)},purgeCachedData:function(){cc.loader.releaseAll()},purgeDirector:function(){this._scheduler.unscheduleAll(),this._compScheduler.unscheduleAll(),this._nodeActivator.reset(),C$99s&&C$99s.setEnabled(!1),cc.isValid(this._scene)&&this._scene.destroy(),this._scene=null,cc.renderer.clear(),cc.AssetLibrary.resetBuiltins(),cc.game.pause(),cc.loader.releaseAll()},reset:function(){this.purgeDirector(),C$99s&&C$99s.setEnabled(!0),this._actionManager&&this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._animationManager&&this._scheduler.scheduleUpdate(this._animationManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._collisionManager&&this._scheduler.scheduleUpdate(this._collisionManager,cc.Scheduler.PRIORITY_SYSTEM,!1),this._physicsManager&&this._scheduler.scheduleUpdate(this._physicsManager,cc.Scheduler.PRIORITY_SYSTEM,!1),cc.game.resume()},runSceneImmediate:function(C$99t,C$99e,C$99i){cc.assertID(C$99t instanceof cc.Scene,1216),console.time("InitScene"),C$99t._load(),console.timeEnd("InitScene"),console.time("AttachPersist");for(var C$99n=Object.keys(C$99_._persistRootNodes).map(function(C$99t){return C$99_._persistRootNodes[C$99t]}),C$99r=0;C$99r<C$99n.length;C$99r++){var C$99s,C$99o=C$99n[C$99r],C$99a=C$99t.getChildByUuid(C$99o.uuid);C$99a?(C$99s=C$99a.getSiblingIndex(),C$99a._destroyImmediate(),C$99t.insertChild(C$99o,C$99s)):C$99o.parent=C$99t}console.timeEnd("AttachPersist");var C$99c=this._scene,C$99l=(console.time("AutoRelease"),C$99c&&C$99c.autoReleaseAssets&&C$99c.dependAssets);C$99h.autoRelease(C$99l,C$99t.dependAssets,C$99n),console.timeEnd("AutoRelease"),console.time("Destroy"),cc.isValid(C$99c)&&C$99c.destroy(),this._scene=null,C$99u._deferredDestroy(),console.timeEnd("Destroy"),C$99e&&C$99e(),this.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,C$99t),this._scene=C$99t,console.time("Activate"),C$99t._activate(),console.timeEnd("Activate"),cc.game.resume(),C$99i&&C$99i(null,C$99t),this.emit(cc.Director.EVENT_AFTER_SCENE_LAUNCH,C$99t)},runScene:function(C$99t,C$99e,C$99i){cc.assertID(C$99t,1205),cc.assertID(C$99t instanceof cc.Scene,1216),C$99t._load(),this.once(cc.Director.EVENT_AFTER_UPDATE,function(){this.runSceneImmediate(C$99t,C$99e,C$99i)},this)},_getSceneUuid:function(C$99t){var C$99e=C$99_._sceneInfos;if("string"==typeof C$99t){C$99t.endsWith(".fire")||(C$99t+=".fire"),"/"===C$99t[0]||C$99t.startsWith("db://")||(C$99t="/"+C$99t);for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];if(C$99n.url.endsWith(C$99t))return C$99n}}else if("number"==typeof C$99t){if(0<=C$99t&&C$99t<C$99e.length)return C$99e[C$99t];cc.errorID(1206,C$99t)}else cc.errorID(1207,C$99t);return null},loadScene:function(C$99t,C$99e,C$99i){if(this._loadingScene)return cc.warnID(1208,C$99t,this._loadingScene),!1;var C$99n=this._getSceneUuid(C$99t);return C$99n?(C$99n=C$99n.uuid,this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,C$99t),this._loadingScene=C$99t,this._loadSceneByUuid(C$99n,C$99e,C$99i),!0):(cc.errorID(1209,C$99t),!1)},preloadScene:function(C$99i,C$99t,C$99n){void 0===C$99n&&(C$99n=C$99t,C$99t=null);var C$99e=this._getSceneUuid(C$99i);C$99e?(this.emit(cc.Director.EVENT_BEFORE_SCENE_LOADING,C$99i),cc.loader.load({uuid:C$99e.uuid,type:"uuid"},C$99t,function(C$99t,C$99e){C$99t&&cc.errorID(1210,C$99i,C$99t.message),C$99n&&C$99n(C$99t,C$99e)})):(C$99e='Can not preload the scene "'+C$99i+'" because it is not in the build settings.',C$99n(new Error(C$99e)),cc.error("preloadScene: "+C$99e))},_loadSceneByUuid:function(C$99r,C$99s,C$99o,C$99t){console.time("LoadScene "+C$99r),cc.AssetLibrary.loadAsset(C$99r,function(C$99t,C$99e){console.timeEnd("LoadScene "+C$99r);var C$99i,C$99n=cc.director;if(C$99n._loadingScene="",C$99t)C$99t="Failed to load scene: "+C$99t,cc.error(C$99t);else{if(C$99e instanceof cc.SceneAsset)return(C$99i=C$99e.scene)._id=C$99e._uuid,C$99i._name=C$99e._name,void C$99n.runSceneImmediate(C$99i,C$99o,C$99s);C$99t="The asset "+C$99r+" is not a scene",cc.error(C$99t)}C$99s&&C$99s(C$99t)})},resume:function(){this._paused&&(this._lastUpdate=performance.now(),this._lastUpdate||cc.logID(1200),this._paused=!1,this._deltaTime=0)},setDepthTest:function(C$99t){cc.Camera.main&&(cc.Camera.main.depth=!!C$99t)},setClearColor:function(C$99t){cc.Camera.main&&(cc.Camera.main.backgroundColor=C$99t)},getRunningScene:function(){return this._scene},getScene:function(){return this._scene},getAnimationInterval:function(){return 1e3/C$99_.getFrameRate()},setAnimationInterval:function(C$99t){C$99_.setFrameRate(Math.round(1e3/C$99t))},getDeltaTime:function(){return this._deltaTime},getTotalTime:function(){return performance.now()-this._startTime},getTotalFrames:function(){return this._totalFrames},isPaused:function(){return this._paused},getScheduler:function(){return this._scheduler},setScheduler:function(C$99t){this._scheduler!==C$99t&&(this._scheduler=C$99t)},getActionManager:function(){return this._actionManager},setActionManager:function(C$99t){this._actionManager!==C$99t&&(this._actionManager&&this._scheduler.unscheduleUpdate(this._actionManager),this._actionManager=C$99t,this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1))},getAnimationManager:function(){return this._animationManager},getCollisionManager:function(){return this._collisionManager},getPhysicsManager:function(){return this._physicsManager},getPhysics3DManager:function(){return this._physics3DManager},startAnimation:function(){cc.game.resume()},stopAnimation:function(){cc.game.pause()},_resetDeltaTime:function(){this._lastUpdate=performance.now(),this._deltaTime=0},mainLoop:function(C$99t){this._purgeDirectorInNextLoop?(this._purgeDirectorInNextLoop=!1,this.purgeDirector()):(this.calculateDeltaTime(C$99t),this._paused||(this.emit(cc.Director.EVENT_BEFORE_UPDATE),this._compScheduler.startPhase(),this._compScheduler.updatePhase(this._deltaTime),this._scheduler.update(this._deltaTime),this._compScheduler.lateUpdatePhase(this._deltaTime),this._compScheduler.clearup(),this.emit(cc.Director.EVENT_AFTER_UPDATE),C$99u._deferredDestroy()),this.emit(cc.Director.EVENT_BEFORE_DRAW),C$99c.render(this._scene,this._deltaTime),this.emit(cc.Director.EVENT_AFTER_DRAW),C$99s.frameUpdateListeners(),this._totalFrames++)},__fastOn:function(C$99t,C$99e,C$99i){this.on(C$99t,C$99e,C$99i)},__fastOff:function(C$99t,C$99e,C$99i){this.off(C$99t,C$99e,C$99i)}},cc.js.addon(cc.Director.prototype,C$99i.prototype),cc.Director.EVENT_PROJECTION_CHANGED="director_projection_changed",cc.Director.EVENT_BEFORE_SCENE_LOADING="director_before_scene_loading",cc.Director.EVENT_BEFORE_SCENE_LAUNCH="director_before_scene_launch",cc.Director.EVENT_AFTER_SCENE_LAUNCH="director_after_scene_launch",cc.Director.EVENT_BEFORE_UPDATE="director_before_update",cc.Director.EVENT_AFTER_UPDATE="director_after_update",cc.Director.EVENT_BEFORE_VISIT="director_before_draw",cc.Director.EVENT_AFTER_VISIT="director_before_draw",cc.Director.EVENT_BEFORE_DRAW="director_before_draw",cc.Director.EVENT_AFTER_DRAW="director_after_draw",cc.Director.PROJECTION_2D=0,cc.Director.PROJECTION_3D=1,cc.Director.PROJECTION_CUSTOM=3,cc.Director.PROJECTION_DEFAULT=cc.Director.PROJECTION_2D,cc.Director.EVENT_BEFORE_PHYSICS="director_before_physics",cc.Director.EVENT_AFTER_PHYSICS="director_after_physics",cc.director=new cc.Director,C$99e.exports=cc.director},{"./CCGame":29,"./CCScheduler":33,"./component-scheduler":72,"./event-manager":113,"./event/event-target":115,"./load-pipeline/auto-release-utils":140,"./node-activator":161,"./platform/CCObject":195,"./renderer":220}],29:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./event/event-target"),C$99o=(C$99t("../audio/CCAudioEngine"),C$99t("./CCDebug")),C$99s=C$99t("./renderer/index.js"),C$99a=C$99t("../core/renderer/utils/dynamic-atlas/manager"),C$99c={EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",EVENT_RESTART:"game_on_restart",EVENT_GAME_INITED:"game_inited",EVENT_ENGINE_INITED:"engine_inited",EVENT_RENDERER_INITED:"engine_inited",RENDER_TYPE_CANVAS:0,RENDER_TYPE_WEBGL:1,RENDER_TYPE_OPENGL:2,_persistRootNodes:{},_paused:!0,_configLoaded:!1,_isCloning:!1,_prepared:!1,_rendererInitialized:!1,_renderContext:null,_intervalId:null,_lastTime:null,_frameTime:null,_sceneInfos:[],frame:null,container:null,canvas:null,renderType:-1,config:null,onStart:null,setFrameRate:function(C$99t){this.config.frameRate=C$99t,this._intervalId&&window.cancelAnimFrame(this._intervalId),this._intervalId=0,this._paused=!0,this._setAnimFrame(),this._runMainLoop()},getFrameRate:function(){return this.config.frameRate},step:function(){cc.director.mainLoop()},pause:function(){this._paused||(this._paused=!0,cc.audioEngine&&cc.audioEngine._break(),this._intervalId&&window.cancelAnimFrame(this._intervalId),this._intervalId=0)},resume:function(){this._paused&&(this._paused=!1,cc.audioEngine&&cc.audioEngine._restore(),cc.director._resetDeltaTime(),this._runMainLoop())},isPaused:function(){return this._paused},restart:function(){cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){for(var C$99t in C$99c._persistRootNodes)C$99c.removePersistRootNode(C$99c._persistRootNodes[C$99t]);cc.director.getScene().destroy(),cc.Object._deferredDestroy(),cc.audioEngine&&cc.audioEngine.uncacheAll(),cc.director.reset(),C$99c.pause(),cc.AssetLibrary._loadBuiltins(function(){C$99c.onStart(),C$99c.emit(C$99c.EVENT_RESTART)})})},end:function(){close()},_initEngine:function(){this._rendererInitialized||(this._initRenderer(),this._initEvents(),this.emit(this.EVENT_ENGINE_INITED))},_loadPreviewScript:function(C$99t){C$99t()},_prepareFinished:function(C$99t){var C$99e=this;this._initEngine(),this._setAnimFrame(),cc.AssetLibrary._loadBuiltins(function(){console.log("Cocos Creator v"+cc.ENGINE_VERSION),C$99e._prepared=!0,C$99e._runMainLoop(),C$99e.emit(C$99e.EVENT_GAME_INITED),C$99t&&C$99t()})},eventTargetOn:C$99n.prototype.on,eventTargetOnce:C$99n.prototype.once,on:function(C$99t,C$99e,C$99i,C$99n){this._prepared&&C$99t===this.EVENT_ENGINE_INITED||!this._paused&&C$99t===this.EVENT_GAME_INITED?C$99e.call(C$99i):this.eventTargetOn(C$99t,C$99e,C$99i,C$99n)},once:function(C$99t,C$99e,C$99i){this._prepared&&C$99t===this.EVENT_ENGINE_INITED||!this._paused&&C$99t===this.EVENT_GAME_INITED?C$99e.call(C$99i):this.eventTargetOnce(C$99t,C$99e,C$99i)},prepare:function(C$99e){var C$99t,C$99i=this;this._prepared?C$99e&&C$99e():(C$99t=this.config.jsList)&&0<C$99t.length?cc.loader.load(C$99t,function(C$99t){if(C$99t)throw new Error(JSON.stringify(C$99t));C$99i._loadPreviewScript(function(){C$99i._prepareFinished(C$99e)})}):this._loadPreviewScript(function(){C$99i._prepareFinished(C$99e)})},run:function(C$99t,C$99e){this._initConfig(C$99t),this.onStart=C$99e,this.prepare(C$99c.onStart&&C$99c.onStart.bind(C$99c))},addPersistRootNode:function(C$99t){if(cc.Node.isNode(C$99t)&&C$99t.uuid){var C$99e=C$99t.uuid;if(!this._persistRootNodes[C$99e]){var C$99i=cc.director._scene;if(cc.isValid(C$99i))if(C$99t.parent){if(!(C$99t.parent instanceof cc.Scene))return void cc.warnID(3801);if(C$99t.parent!==C$99i)return void cc.warnID(3802)}else C$99t.parent=C$99i;(this._persistRootNodes[C$99e]=C$99t)._persistNode=!0}}else cc.warnID(3800)},removePersistRootNode:function(C$99t){var C$99e=C$99t.uuid||"";C$99t===this._persistRootNodes[C$99e]&&(delete this._persistRootNodes[C$99e],C$99t._persistNode=!1)},isPersistRootNode:function(C$99t){return C$99t._persistNode},_setAnimFrame:function(){this._lastTime=performance.now();var C$99t=C$99c.config.frameRate;this._frameTime=1e3/C$99t,cc.director._maxParticleDeltaTime=this._frameTime/1e3*2,60!==C$99t&&30!==C$99t?(window.requestAnimFrame=this._stTime,window.cancelAnimFrame=this._ctTime):(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||this._stTime,window.cancelAnimFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||this._ctTime)},_stTime:function(C$99t){var C$99e=performance.now(),C$99i=Math.max(0,C$99c._frameTime-(C$99e-C$99c._lastTime)),C$99n=window.setTimeout(function(){C$99t()},C$99i);return C$99c._lastTime=C$99e+C$99i,C$99n},_ctTime:function(C$99t){window.clearTimeout(C$99t)},_runMainLoop:function(){var C$99e,C$99i,C$99t,C$99n,C$99r,C$99s;this._prepared&&(C$99t=(C$99e=this).config,C$99n=cc.director,C$99r=!0,C$99s=C$99t.frameRate,C$99o.setDisplayStats(C$99t.showFPS),C$99i=function(C$99t){C$99e._paused||(C$99e._intervalId=window.requestAnimFrame(C$99i),30===C$99s&&(C$99r=!C$99r)||C$99n.mainLoop(C$99t))},C$99e._intervalId=window.requestAnimFrame(C$99i),C$99e._paused=!1)},_initConfig:function(C$99t){"number"!=typeof C$99t.debugMode&&(C$99t.debugMode=0),C$99t.exposeClassName=!!C$99t.exposeClassName,"number"!=typeof C$99t.frameRate&&(C$99t.frameRate=60);var C$99e=C$99t.renderMode;("number"!=typeof C$99e||2<C$99e||C$99e<0)&&(C$99t.renderMode=0),"boolean"!=typeof C$99t.registerSystemEvent&&(C$99t.registerSystemEvent=!0),C$99t.showFPS=1!==C$99e&&!!C$99t.showFPS,this._sceneInfos=C$99t.scenes||[],this.collisionMatrix=C$99t.collisionMatrix||[],this.groupList=C$99t.groupList||[],C$99o._resetDebugSetting(C$99t.debugMode),this.config=C$99t,this._configLoaded=!0},_determineRenderType:function(){var C$99t=this.config,C$99t=parseInt(C$99t.renderMode)||0,C$99e=(this.renderType=this.RENDER_TYPE_CANVAS,!1);if(0===C$99t?cc.sys.capabilities.opengl?(this.renderType=this.RENDER_TYPE_WEBGL,C$99e=!0):cc.sys.capabilities.canvas&&(this.renderType=this.RENDER_TYPE_CANVAS,C$99e=!0):1===C$99t&&cc.sys.capabilities.canvas?(this.renderType=this.RENDER_TYPE_CANVAS,C$99e=!0):2===C$99t&&cc.sys.capabilities.opengl&&(this.renderType=this.RENDER_TYPE_WEBGL,C$99e=!0),!C$99e)throw new Error(C$99o.getError(3820,C$99t))},_initRenderer:function(){var C$99t,C$99e,C$99i,C$99n,C$99r;this._rendererInitialized||("CANVAS"===(C$99r=(C$99r=this.config.id)instanceof HTMLElement?C$99r:document.querySelector(C$99r)||document.querySelector("#"+C$99r)).tagName?(C$99t=C$99r.width,C$99e=C$99r.height,this.canvas=C$99i=C$99r,this.container=C$99n=document.createElement("DIV"),C$99i.parentNode&&C$99i.parentNode.insertBefore(C$99n,C$99i)):("DIV"!==C$99r.tagName&&cc.warnID(3819),C$99t=C$99r.clientWidth,C$99e=C$99r.clientHeight,this.canvas=C$99i=document.createElement("CANVAS"),this.container=C$99n=document.createElement("DIV"),C$99r.appendChild(C$99n)),C$99n.setAttribute("id","Cocos2dGameContainer"),C$99n.appendChild(C$99i),this.frame=C$99n.parentNode===document.body?document.documentElement:C$99n.parentNode,C$99r="gameCanvas",-1<(" "+(C$99n=C$99i).className+" ").indexOf(" "+C$99r+" ")||(C$99n.className&&(C$99n.className+=" "),C$99n.className+=C$99r),C$99i.setAttribute("width",C$99t||480),C$99i.setAttribute("height",C$99e||320),C$99i.setAttribute("tabindex",99),this._determineRenderType(),this.renderType===this.RENDER_TYPE_WEBGL&&(C$99r={stencil:!0,antialias:cc.macro.ENABLE_WEBGL_ANTIALIAS,alpha:cc.macro.ENABLE_TRANSPARENT_CANVAS},C$99s.initWebGL(C$99i,C$99r),this._renderContext=C$99s.device._gl,!cc.macro.CLEANUP_IMAGE_CACHE&&C$99a&&(C$99a.enabled=!0)),this._renderContext||(this.renderType=this.RENDER_TYPE_CANVAS,C$99s.initCanvas(C$99i),this._renderContext=C$99s.device._ctx),this.canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return!1},this._rendererInitialized=!0)},_initEvents:function(){var C$99e,C$99t=window,C$99s=(this.config.registerSystemEvent&&cc.internal.inputManager.registerSystemEvent(this.canvas),void 0!==document.hidden?C$99e="hidden":void 0!==document.mozHidden?C$99e="mozHidden":void 0!==document.msHidden?C$99e="msHidden":void 0!==document.webkitHidden&&(C$99e="webkitHidden"),!1);function C$99i(){C$99s||(C$99s=!0,C$99c.emit(C$99c.EVENT_HIDE))}function C$99n(C$99t,C$99e,C$99i,C$99n,C$99r){C$99s&&(C$99s=!1,C$99c.emit(C$99c.EVENT_SHOW,C$99t,C$99e,C$99i,C$99n,C$99r))}if(C$99e)for(var C$99r=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],C$99o=0;C$99o<C$99r.length;C$99o++)document.addEventListener(C$99r[C$99o],function(C$99t){(document[C$99e]||C$99t.hidden?C$99i:C$99n)()});else C$99t.addEventListener("blur",C$99i),C$99t.addEventListener("focus",C$99n);-1<navigator.userAgent.indexOf("MicroMessenger")&&(C$99t.onfocus=C$99n),"onpageshow"in window&&"onpagehide"in window&&(C$99t.addEventListener("pagehide",C$99i),C$99t.addEventListener("pageshow",C$99n),document.addEventListener("pagehide",C$99i),document.addEventListener("pageshow",C$99n)),this.on(C$99c.EVENT_HIDE,function(){C$99c.pause()}),this.on(C$99c.EVENT_SHOW,function(){C$99c.resume()})}};C$99n.call(C$99c),cc.js.addon(C$99c,C$99n.prototype),cc.game=C$99e.exports=C$99c},{"../audio/CCAudioEngine":22,"../core/renderer/utils/dynamic-atlas/manager":223,"./CCDebug":27,"./event/event-target":115,"./renderer/index.js":220}],30:[function(C$99t,C$99e,C$99n){"use strict";function C$99l(){}function C$99u(C$99t,C$99e){0!==C$99t&&(C$99tt&&cc.warn("`cc.Node.skewX/Y` is deprecated since v2.2.1, please use 3D node instead.",""),C$99tt=!1)}function C$99_(C$99t,C$99e){var C$99i=C$99t.getLocation(),C$99n=this.owner;return!!C$99n._hitTest(C$99i,this)&&(C$99e.type=C$99c.TOUCH_START,C$99e.touch=C$99t,C$99e.bubbles=!0,C$99n.dispatchEvent(C$99e),!0)}function C$99d(C$99t,C$99e){var C$99i=this.owner;C$99e.type=C$99c.TOUCH_MOVE,C$99e.touch=C$99t,C$99e.bubbles=!0,C$99i.dispatchEvent(C$99e)}function C$99f(C$99t,C$99e){var C$99i=C$99t.getLocation(),C$99n=this.owner;C$99n._hitTest(C$99i,this)?C$99e.type=C$99c.TOUCH_END:C$99e.type=C$99c.TOUCH_CANCEL,C$99e.touch=C$99t,C$99e.bubbles=!0,C$99n.dispatchEvent(C$99e)}function C$99y(C$99t,C$99e){C$99t.getLocation();var C$99i=this.owner;C$99e.type=C$99c.TOUCH_CANCEL,C$99e.touch=C$99t,C$99e.bubbles=!0,C$99i.dispatchEvent(C$99e)}function C$99g(C$99t){var C$99e=C$99t.getLocation(),C$99i=this.owner;C$99i._hitTest(C$99e,this)&&(C$99t.type=C$99c.MOUSE_DOWN,C$99t.bubbles=!0,C$99i.dispatchEvent(C$99t))}function C$99v(C$99t){var C$99e=C$99t.getLocation(),C$99i=this.owner;if(C$99i._hitTest(C$99e,this))this._previousIn||(C$99et&&C$99et._mouseListener&&(C$99t.type=C$99c.MOUSE_LEAVE,C$99et.dispatchEvent(C$99t),C$99et._mouseListener._previousIn=!1),C$99et=this.owner,C$99t.type=C$99c.MOUSE_ENTER,C$99i.dispatchEvent(C$99t),this._previousIn=!0),C$99t.type=C$99c.MOUSE_MOVE,C$99t.bubbles=!0,C$99i.dispatchEvent(C$99t);else{if(!this._previousIn)return;C$99t.type=C$99c.MOUSE_LEAVE,C$99i.dispatchEvent(C$99t),this._previousIn=!1,C$99et=null}C$99t.stopPropagation()}function C$99x(C$99t){var C$99e=C$99t.getLocation(),C$99i=this.owner;C$99i._hitTest(C$99e,this)&&(C$99t.type=C$99c.MOUSE_UP,C$99t.bubbles=!0,C$99i.dispatchEvent(C$99t),C$99t.stopPropagation())}function C$99b(C$99t){var C$99e=C$99t.getLocation(),C$99i=this.owner;C$99i._hitTest(C$99e,this)&&(C$99t.type=C$99c.MOUSE_WHEEL,C$99t.bubbles=!0,C$99i.dispatchEvent(C$99t),C$99t.stopPropagation())}var C$99p=C$99t("./value-types"),C$99A=C$99t("./utils/base-node"),C$99C=C$99t("./utils/prefab-helper"),C$99S=C$99t("./utils/trans-pool").NodeMemPool,C$99i=C$99t("./utils/affine-transform"),C$99a=C$99t("./event-manager"),C$99T=C$99t("./platform/CCMacro"),C$99w=C$99t("./platform/js"),C$99E=(C$99t("./event/event"),C$99t("./event/event-target")),C$99r=C$99t("./renderer/render-flow"),C$99M=cc.Object.Flags.Destroying,C$99I=Math.PI/180,C$99s=!!cc.ActionManager,C$99B=new C$99p.Vec3,C$99R=new C$99p.Quat,C$99P=new C$99p.Vec3,C$99D=new C$99p.Vec3,C$99L=new C$99p.Quat,C$99V=new C$99p.Quat,C$99O=new C$99p.Vec3,C$99F=new C$99p.Vec3,C$99N=new C$99p.Vec3,C$99k=new C$99p.Vec3,C$99G=new C$99p.Vec3,C$99z=new C$99p.Quat,C$99U=new C$99p.Quat,C$99W=new C$99p.Vec3,C$99H=new C$99p.Quat,C$99j=new C$99p.Vec3,C$99X=new C$99p.Quat,C$99Y=new C$99p.Vec3,C$99q=new C$99p.Vec3,C$99J=new C$99p.Quat,C$99Z=new C$99p.Quat,C$99m=(new C$99p.Quat,cc.mat4()),C$99K=new C$99p.Vec3,C$99o=new Array(16),C$99t=(C$99o.length=0,cc.Enum({DEBUG:31})),C$99h=cc.Enum({POSITION:1,SCALE:2,ROTATION:4,SKEW:8,TRS:7,RS:6,TRSS:15,PHYSICS_POSITION:16,PHYSICS_SCALE:32,PHYSICS_ROTATION:64,PHYSICS_TRS:112,PHYSICS_RS:96,ALL_POSITION:17,ALL_SCALE:34,ALL_ROTATION:68,ALL_TRS:119,ALL:65535}),C$99c=cc.Enum({TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_WHEEL:"mousewheel",POSITION_CHANGED:"position-changed",ROTATION_CHANGED:"rotation-changed",SCALE_CHANGED:"scale-changed",SIZE_CHANGED:"size-changed",ANCHOR_CHANGED:"anchor-changed",COLOR_CHANGED:"color-changed",CHILD_ADDED:"child-added",CHILD_REMOVED:"child-removed",CHILD_REORDER:"child-reorder",GROUP_CHANGED:"group-changed",SIBLING_ORDER_CHANGED:"sibling-order-changed"}),C$99Q=[C$99c.TOUCH_START,C$99c.TOUCH_MOVE,C$99c.TOUCH_END,C$99c.TOUCH_CANCEL],C$99$=[C$99c.MOUSE_DOWN,C$99c.MOUSE_ENTER,C$99c.MOUSE_MOVE,C$99c.MOUSE_LEAVE,C$99c.MOUSE_UP,C$99c.MOUSE_WHEEL],C$99tt=!0,C$99et=null;function C$99it(C$99t,C$99e){if(C$99e){for(var C$99i,C$99n=0,C$99r=null,C$99s=C$99t;C$99s&&cc.Node.isNode(C$99s);C$99s=C$99s._parent,++C$99n)C$99s.getComponent(C$99e)&&(C$99i={index:C$99n,node:C$99s},C$99r?C$99r.push(C$99i):C$99r=[C$99i]);return C$99r}return null}function C$99nt(C$99t,C$99e){if(C$99t._objFlags&C$99M)return 1;var C$99i=0;if(C$99t._bubblingListeners)for(;C$99i<C$99e.length;++C$99i)if(C$99t._bubblingListeners.hasEventListener(C$99e[C$99i]))return 1;if(C$99t._capturingListeners)for(;C$99i<C$99e.length;++C$99i)if(C$99t._capturingListeners.hasEventListener(C$99e[C$99i]))return 1}function C$99rt(C$99t){var C$99e=C$99t.groupIndex;return C$99e=0===C$99e&&C$99t.parent?C$99rt(C$99t.parent):C$99e}function C$99st(C$99t){var C$99e=C$99rt(C$99t);C$99t._cullingMask=1<<C$99e;for(var C$99i=0;C$99i<C$99t._children.length;C$99i++)C$99st(C$99t._children[C$99i])}function C$99ot(){var C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o;this._localMatDirty&C$99h.TRSS&&(C$99t=(C$99e=this._matrix).m,C$99p.Trs.toMat4(C$99e,this._trs),(this._skewX||this._skewY)&&(C$99e=C$99t[0],C$99i=C$99t[1],C$99n=C$99t[4],C$99r=C$99t[5],C$99s=Math.tan(this._skewX*C$99I),C$99o=Math.tan(this._skewY*C$99I),1/0===C$99s&&(C$99s=99999999),C$99t[0]=C$99e+C$99n*(C$99o=1/0===C$99o?99999999:C$99o),C$99t[1]=C$99i+C$99r*C$99o,C$99t[4]=C$99n+C$99e*C$99s,C$99t[5]=C$99r+C$99i*C$99s),this._localMatDirty&=~C$99h.TRSS,this._worldMatDirty=!0)}function C$99at(){var C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l=this._localMatDirty;C$99l&C$99h.TRSS&&(C$99t=this._matrix.m,C$99e=this._trs,C$99l&(C$99h.RS|C$99h.SKEW)&&(C$99l=-this._eulerAngles.z,C$99c=this._skewX||this._skewY,C$99i=C$99e[7],C$99n=C$99e[8],C$99l||C$99c?(C$99o=C$99s=0,C$99a=C$99r=1,C$99l&&(C$99l=C$99l*C$99I,C$99o=Math.sin(C$99l),C$99r=C$99a=Math.cos(C$99l),C$99s=-C$99o),C$99t[0]=C$99r*=C$99i,C$99t[1]=C$99s*=C$99i,C$99t[4]=C$99o*=C$99n,C$99t[5]=C$99a*=C$99n,C$99c&&(C$99l=C$99t[0],C$99r=C$99t[1],C$99s=C$99t[4],C$99o=C$99t[5],C$99a=Math.tan(this._skewX*C$99I),C$99c=Math.tan(this._skewY*C$99I),1/0===C$99a&&(C$99a=99999999),C$99t[0]=C$99l+C$99s*(C$99c=1/0===C$99c?99999999:C$99c),C$99t[1]=C$99r+C$99o*C$99c,C$99t[4]=C$99s+C$99l*C$99a,C$99t[5]=C$99o+C$99r*C$99a)):(C$99t[0]=C$99i,C$99t[1]=0,C$99t[4]=0,C$99t[5]=C$99n)),C$99t[12]=C$99e[0],C$99t[13]=C$99e[1],this._localMatDirty&=~C$99h.TRSS,this._worldMatDirty=!0)}function C$99ct(){var C$99t;this._localMatDirty&C$99h.TRSS&&this._updateLocalMatrix(),this._parent?(C$99t=this._parent._worldMatrix,C$99p.Mat4.mul(this._worldMatrix,C$99t,this._matrix)):C$99p.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1}function C$99lt(){this._localMatDirty&C$99h.TRSS&&this._updateLocalMatrix();var C$99t=this._parent;C$99t?this._mulMat(this._worldMatrix,C$99t._worldMatrix,this._matrix):C$99p.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1}function C$99ht(C$99t,C$99e,C$99i){var C$99e=C$99e.m,C$99i=C$99i.m,C$99t=C$99t.m,C$99n=C$99e[0],C$99r=C$99e[1],C$99s=C$99e[4],C$99o=C$99e[5],C$99h=C$99e[12],C$99e=C$99e[13],C$99a=C$99i[0],C$99c=C$99i[1],C$99l=C$99i[4],C$99u=C$99i[5],C$99_=C$99i[12],C$99i=C$99i[13];0!==C$99r||0!==C$99s?(C$99t[0]=C$99a*C$99n+C$99c*C$99s,C$99t[1]=C$99a*C$99r+C$99c*C$99o,C$99t[4]=C$99l*C$99n+C$99u*C$99s,C$99t[5]=C$99l*C$99r+C$99u*C$99o,C$99t[12]=C$99n*C$99_+C$99s*C$99i+C$99h,C$99t[13]=C$99r*C$99_+C$99o*C$99i+C$99e):(C$99t[0]=C$99a*C$99n,C$99t[1]=C$99c*C$99o,C$99t[4]=C$99l*C$99n,C$99t[5]=C$99u*C$99o,C$99t[12]=C$99n*C$99_+C$99h,C$99t[13]=C$99o*C$99i+C$99e)}var C$99ut=C$99p.Mat4.mul,C$99A={name:"cc.Node",extends:C$99A,properties:{_opacity:255,_color:cc.Color.WHITE,_contentSize:cc.Size,_anchorPoint:cc.v2(.5,.5),_position:void 0,_scale:void 0,_trs:null,_eulerAngles:cc.Vec3,_skewX:0,_skewY:0,_zIndex:{default:void 0,type:cc.Integer},_localZOrder:{default:0,serializable:!1},_is3DNode:!1,_groupIndex:{default:0,formerlySerializedAs:"groupIndex"},groupIndex:{get:function(){return this._groupIndex},set:function(C$99t){this._groupIndex=C$99t,C$99st(this),this.emit(C$99c.GROUP_CHANGED,this)}},group:{get:function(){return cc.game.groupList[this.groupIndex]||""},set:function(C$99t){this.groupIndex=cc.game.groupList.indexOf(C$99t)}},x:{get:function(){return this._trs[0]},set:function(C$99t){var C$99e=this._trs;C$99t!==C$99e[0]&&(C$99e[0]=C$99t,this.setLocalDirty(C$99h.ALL_POSITION),1&this._eventMask&&this.emit(C$99c.POSITION_CHANGED))}},y:{get:function(){return this._trs[1]},set:function(C$99t){var C$99e=this._trs;C$99t!==C$99e[1]&&(C$99e[1]=C$99t,this.setLocalDirty(C$99h.ALL_POSITION),1&this._eventMask&&this.emit(C$99c.POSITION_CHANGED))}},z:{get:function(){return this._trs[2]},set:function(C$99t){var C$99e=this._trs;C$99t!==C$99e[2]&&(C$99e[2]=C$99t,this.setLocalDirty(C$99h.ALL_POSITION),this._renderFlag|=C$99r.FLAG_WORLD_TRANSFORM,1&this._eventMask&&this.emit(C$99c.POSITION_CHANGED))}},rotation:{get:function(){return cc.warn("`cc.Node.rotation` is deprecated since v2.1.0, please use `-angle` instead. (`this.node.rotation` -> `-this.node.angle`)"),-this.angle},set:function(C$99t){cc.warn("`cc.Node.rotation` is deprecated since v2.1.0, please set `-angle` instead. (`this.node.rotation = x` -> `this.node.angle = -x`)"),this.angle=-C$99t}},angle:{get:function(){return this._eulerAngles.z},set:function(C$99t){C$99p.Vec3.set(this._eulerAngles,0,0,C$99t),C$99p.Trs.fromAngleZ(this._trs,C$99t),this.setLocalDirty(C$99h.ALL_ROTATION),4&this._eventMask&&this.emit(C$99c.ROTATION_CHANGED)}},rotationX:{get:function(){return cc.warn("`cc.Node.rotationX` is deprecated since v2.1.0, please use `eulerAngles.x` instead. (`this.node.rotationX` -> `this.node.eulerAngles.x`)"),this._eulerAngles.x},set:function(C$99t){cc.warn("`cc.Node.rotationX` is deprecated since v2.1.0, please set `eulerAngles` instead. (`this.node.rotationX = x` -> `this.node.is3DNode = true; this.node.eulerAngles = cc.v3(x, 0, 0)`"),this._eulerAngles.x!==C$99t&&(this._eulerAngles.x=C$99t,this._eulerAngles.x===this._eulerAngles.y?C$99p.Trs.fromAngleZ(this._trs,-C$99t):C$99p.Trs.fromEulerNumber(this._trs,C$99t,this._eulerAngles.y,0),this.setLocalDirty(C$99h.ALL_ROTATION),4&this._eventMask&&this.emit(C$99c.ROTATION_CHANGED))}},rotationY:{get:function(){return cc.warn("`cc.Node.rotationY` is deprecated since v2.1.0, please use `eulerAngles.y` instead. (`this.node.rotationY` -> `this.node.eulerAngles.y`)"),this._eulerAngles.y},set:function(C$99t){cc.warn("`cc.Node.rotationY` is deprecated since v2.1.0, please set `eulerAngles` instead. (`this.node.rotationY = y` -> `this.node.is3DNode = true; this.node.eulerAngles = cc.v3(0, y, 0)`"),this._eulerAngles.y!==C$99t&&(this._eulerAngles.y=C$99t,this._eulerAngles.x===this._eulerAngles.y?C$99p.Trs.fromAngleZ(this._trs,-C$99t):C$99p.Trs.fromEulerNumber(this._trs,this._eulerAngles.x,C$99t,0),this.setLocalDirty(C$99h.ALL_ROTATION),4&this._eventMask&&this.emit(C$99c.ROTATION_CHANGED))}},eulerAngles:{get:function(){return C$99p.Trs.toEuler(this._eulerAngles,this._trs)},set:function(C$99t){C$99p.Trs.fromEuler(this._trs,C$99t),this.setLocalDirty(C$99h.ALL_ROTATION),this._renderFlag|=C$99r.FLAG_TRANSFORM,4&this._eventMask&&this.emit(C$99c.ROTATION_CHANGED)}},quat:{get:function(){var C$99t=this._trs;return new C$99p.Quat(C$99t[3],C$99t[4],C$99t[5],C$99t[6])},set:function(C$99t){this.setRotation(C$99t)}},scale:{get:function(){return this._trs[7]},set:function(C$99t){this.setScale(C$99t)}},scaleX:{get:function(){return this._trs[7]},set:function(C$99t){this._trs[7]!==C$99t&&(this._trs[7]=C$99t,this.setLocalDirty(C$99h.ALL_SCALE),2&this._eventMask&&this.emit(C$99c.SCALE_CHANGED))}},scaleY:{get:function(){return this._trs[8]},set:function(C$99t){this._trs[8]!==C$99t&&(this._trs[8]=C$99t,this.setLocalDirty(C$99h.ALL_SCALE),2&this._eventMask&&this.emit(C$99c.SCALE_CHANGED))}},scaleZ:{get:function(){return this._trs[9]},set:function(C$99t){this._trs[9]!==C$99t&&(this._trs[9]=C$99t,this.setLocalDirty(C$99h.ALL_SCALE),this._renderFlag|=C$99r.FLAG_TRANSFORM,2&this._eventMask&&this.emit(C$99c.SCALE_CHANGED))}},skewX:{get:function(){return this._skewX},set:function(C$99t){C$99u(C$99t),this._skewX=C$99t,this.setLocalDirty(C$99h.SKEW)}},skewY:{get:function(){return this._skewY},set:function(C$99t){C$99u(C$99t),this._skewY=C$99t,this.setLocalDirty(C$99h.SKEW)}},opacity:{get:function(){return this._opacity},set:function(C$99t){C$99t=cc.misc.clampf(C$99t,0,255),this._opacity!==C$99t&&(this._opacity=C$99t,this._renderFlag|=C$99r.FLAG_OPACITY_COLOR)},range:[0,255]},color:{get:function(){return this._color.clone()},set:function(C$99t){this._color.equals(C$99t)||(this._color.set(C$99t),this._renderFlag|=C$99r.FLAG_COLOR,32&this._eventMask&&this.emit(C$99c.COLOR_CHANGED,C$99t))}},anchorX:{get:function(){return this._anchorPoint.x},set:function(C$99t){var C$99e=this._anchorPoint;C$99e.x!==C$99t&&(C$99e.x=C$99t,16&this._eventMask&&this.emit(C$99c.ANCHOR_CHANGED))}},anchorY:{get:function(){return this._anchorPoint.y},set:function(C$99t){var C$99e=this._anchorPoint;C$99e.y!==C$99t&&(C$99e.y=C$99t,16&this._eventMask&&this.emit(C$99c.ANCHOR_CHANGED))}},width:{get:function(){return this._contentSize.width},set:function(C$99t){C$99t!==this._contentSize.width&&(this._contentSize.width=C$99t,8&this._eventMask&&this.emit(C$99c.SIZE_CHANGED))}},height:{get:function(){return this._contentSize.height},set:function(C$99t){C$99t!==this._contentSize.height&&(this._contentSize.height=C$99t,8&this._eventMask&&this.emit(C$99c.SIZE_CHANGED))}},zIndex:{get:function(){return this._localZOrder>>16},set:function(C$99t){C$99t>C$99T.MAX_ZINDEX?(cc.warnID(1636),C$99t=C$99T.MAX_ZINDEX):C$99t<C$99T.MIN_ZINDEX&&(cc.warnID(1637),C$99t=C$99T.MIN_ZINDEX),this.zIndex!==C$99t&&(this._localZOrder=65535&this._localZOrder|C$99t<<16,this.emit(C$99c.SIBLING_ORDER_CHANGED),this._onSiblingIndexChanged())}},is3DNode:{get:function(){return this._is3DNode},set:function(C$99t){this._is3DNode=C$99t,this._update3DFunction()}},up:{get:function(){return C$99p.Vec3.transformQuat(C$99j,C$99p.Vec3.UP,this.getWorldRotation(C$99X)).clone()}},right:{get:function(){return C$99p.Vec3.transformQuat(C$99j,C$99p.Vec3.RIGHT,this.getWorldRotation(C$99X)).clone()}},forward:{get:function(){return C$99p.Vec3.transformQuat(C$99j,C$99p.Vec3.FORWARD,this.getWorldRotation(C$99X)).clone()}}},ctor:function(){this._reorderChildDirty=!1,this._widget=null,this._renderComponent=null,this._capturingListeners=null,this._bubblingListeners=null,this._touchListener=null,this._mouseListener=null,this._initDataFromPool(),this._eventMask=0,this._cullingMask=1,this._childArrivalOrder=1,this._renderFlag=C$99r.FLAG_TRANSFORM|C$99r.FLAG_OPACITY_COLOR},statics:{EventType:C$99c,_LocalDirtyFlag:C$99h,isNode:function(C$99t){return C$99t instanceof C$99_t&&(C$99t.constructor===C$99_t||!(C$99t instanceof cc.Scene))},BuiltinGroupIndex:C$99t},_onSiblingIndexChanged:function(){this._parent&&this._parent._delaySort()},_onPreDestroy:function(){this._onPreDestroyBase();C$99s&&cc.director.getActionManager().removeAllActionsFromTarget(this),C$99et===this&&(C$99et=null),(this._touchListener||this._mouseListener)&&(C$99a.removeListeners(this),this._touchListener&&(this._touchListener.owner=null,this._touchListener.mask=null,this._touchListener=null),this._mouseListener&&(this._mouseListener.owner=null,this._mouseListener.mask=null,this._mouseListener=null)),this._backDataIntoPool(),this._reorderChildDirty&&cc.director.__fastOff(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this)},_onPostActivated:function(C$99t){var C$99e=C$99s?cc.director.getActionManager():null;C$99t?(this._renderFlag|=C$99r.FLAG_WORLD_TRANSFORM,C$99e&&C$99e.resumeTarget(this),C$99a.resumeTarget(this),this._checkListenerMask()):(C$99e&&C$99e.pauseTarget(this),C$99a.pauseTarget(this))},_onHierarchyChanged:function(C$99t){this._updateOrderOfArrival(),C$99st(this),this._parent&&this._parent._delaySort(),this._renderFlag|=C$99r.FLAG_WORLD_TRANSFORM,this._onHierarchyChangedBase(C$99t),cc._widgetManager&&(cc._widgetManager._nodesOrderDirty=!0),C$99t&&this._activeInHierarchy&&this._checkListenerMask()},_update3DFunction:function(){this._is3DNode?(this._updateLocalMatrix=C$99ot,this._calculWorldMatrix=C$99ct,this._mulMat=C$99ut):(this._updateLocalMatrix=C$99at,this._calculWorldMatrix=C$99lt,this._mulMat=C$99ht),this._renderComponent&&this._renderComponent._on3DNodeChanged&&this._renderComponent._on3DNodeChanged(),this._renderFlag|=C$99r.FLAG_TRANSFORM,this._localMatDirty=C$99h.ALL},_initDataFromPool:function(){this._spaceInfo||(this._spaceInfo=C$99S.pop());var C$99t=this._spaceInfo,C$99t=(this._matrix=cc.mat4(C$99t.localMat),C$99p.Mat4.identity(this._matrix),this._worldMatrix=cc.mat4(C$99t.worldMat),C$99p.Mat4.identity(this._worldMatrix),this._localMatDirty=C$99h.ALL,this._worldMatDirty=!0,this._trs=this._spaceInfo.trs);C$99t[0]=0,C$99t[1]=0,C$99t[2]=0,C$99t[3]=0,C$99t[4]=0,C$99t[5]=0,C$99t[6]=1,C$99t[7]=1,C$99t[8]=1,C$99t[9]=1},_backDataIntoPool:function(){C$99S.push(this._spaceInfo),this._matrix=null,this._worldMatrix=null,this._trs=null,this._spaceInfo=null},_toEuler:function(){var C$99t;this.is3DNode?C$99p.Trs.toEuler(this._eulerAngles,this._trs):(C$99t=Math.asin(this._trs[5])/C$99I*2,C$99p.Vec3.set(this._eulerAngles,0,0,C$99t))},_fromEuler:function(){this.is3DNode?C$99p.Trs.fromEuler(this._trs,this._eulerAngles):C$99p.Trs.fromAngleZ(this._trs,this._eulerAngles.z)},_upgrade_1x_to_2x:function(){this._is3DNode&&this._update3DFunction();var C$99t,C$99e=this._trs;C$99e?(C$99t=C$99e,C$99e=this._trs=this._spaceInfo.trs,11===C$99t.length?C$99e.set(C$99t.subarray(1)):C$99e.set(C$99t)):C$99e=this._trs=this._spaceInfo.trs,void 0!==this._zIndex&&(this._localZOrder=this._zIndex<<16,this._zIndex=void 0),this._fromEuler(),0!==this._localZOrder&&(this._zIndex=(4294901760&this._localZOrder)>>16),this._color.a<255&&255===this._opacity&&(this._opacity=this._color.a,this._color.a=255)},_onBatchCreated:function(){for(var C$99t=this._prefab,C$99e=(C$99t&&C$99t.sync&&C$99t.root===this&&C$99C.syncWithPrefab(this),this._upgrade_1x_to_2x(),this._updateOrderOfArrival(),this._cullingMask=1<<C$99rt(this),this._activeInHierarchy||(C$99s&&cc.director.getActionManager().pauseTarget(this),C$99a.pauseTarget(this)),this._children),C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)C$99e[C$99i]._onBatchCreated();0<C$99e.length&&(this._renderFlag|=C$99r.FLAG_CHILDREN)},_onBatchRestored:function(){this._upgrade_1x_to_2x(),this._cullingMask=1<<C$99rt(this),this._activeInHierarchy||((C$99t=cc.director.getActionManager())&&C$99t.pauseTarget(this),C$99a.pauseTarget(this));for(var C$99t,C$99e=this._children,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)C$99e[C$99i]._onBatchRestored();0<C$99e.length&&(this._renderFlag|=C$99r.FLAG_CHILDREN)},_checkListenerMask:function(){var C$99t;this._touchListener?(C$99t=this._touchListener.mask=C$99it(this,cc.Mask),this._mouseListener&&(this._mouseListener.mask=C$99t)):this._mouseListener&&(this._mouseListener.mask=C$99it(this,cc.Mask))},_checknSetupSysEvent:function(C$99t){var C$99e=!1,C$99i=!1;return-1!==C$99Q.indexOf(C$99t)?(this._touchListener||(this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,owner:this,mask:C$99it(this,cc.Mask),onTouchBegan:C$99_,onTouchMoved:C$99d,onTouchEnded:C$99f,onTouchCancelled:C$99y}),C$99a.addListener(this._touchListener,this),C$99e=!0),C$99i=!0):-1!==C$99$.indexOf(C$99t)&&(this._mouseListener||(this._mouseListener=cc.EventListener.create({event:cc.EventListener.MOUSE,_previousIn:!1,owner:this,mask:C$99it(this,cc.Mask),onMouseDown:C$99g,onMouseMove:C$99v,onMouseUp:C$99x,onMouseScroll:C$99b}),C$99a.addListener(this._mouseListener,this),C$99e=!0),C$99i=!0),C$99e&&!this._activeInHierarchy&&cc.director.getScheduler().schedule(function(){this._activeInHierarchy||C$99a.pauseTarget(this)},this,0,0,0,!1),C$99i},on:function(C$99t,C$99e,C$99i,C$99n){if(this._checknSetupSysEvent(C$99t))return this._onDispatch(C$99t,C$99e,C$99i,C$99n);switch(C$99t){case C$99c.POSITION_CHANGED:this._eventMask|=1;break;case C$99c.SCALE_CHANGED:this._eventMask|=2;break;case C$99c.ROTATION_CHANGED:this._eventMask|=4;break;case C$99c.SIZE_CHANGED:this._eventMask|=8;break;case C$99c.ANCHOR_CHANGED:this._eventMask|=16;break;case C$99c.COLOR_CHANGED:this._eventMask|=32}return this._bubblingListeners||(this._bubblingListeners=new C$99E),this._bubblingListeners.on(C$99t,C$99e,C$99i)},once:function(C$99t,C$99e,C$99i,C$99n){(this._checknSetupSysEvent(C$99t)&&C$99n?this._capturingListeners=this._capturingListeners||new C$99E:this._bubblingListeners=this._bubblingListeners||new C$99E).once(C$99t,C$99e,C$99i)},_onDispatch:function(C$99t,C$99e,C$99i,C$99n){var C$99r;{if("boolean"==typeof C$99i?(C$99n=C$99i,C$99i=void 0):C$99n=!!C$99n,C$99e)return C$99r=null,(C$99r=C$99n?this._capturingListeners=this._capturingListeners||new C$99E:this._bubblingListeners=this._bubblingListeners||new C$99E).hasEventListener(C$99t,C$99e,C$99i)||(C$99r.on(C$99t,C$99e,C$99i),C$99i&&C$99i.__eventTargets&&C$99i.__eventTargets.push(this)),C$99e;cc.errorID(6800)}},off:function(C$99t,C$99e,C$99i,C$99n){var C$99r=-1!==C$99Q.indexOf(C$99t),C$99s=!C$99r&&-1!==C$99$.indexOf(C$99t);if(C$99r||C$99s)this._offDispatch(C$99t,C$99e,C$99i,C$99n),C$99r?this._touchListener&&!C$99nt(this,C$99Q)&&(C$99a.removeListener(this._touchListener),this._touchListener=null):C$99s&&this._mouseListener&&!C$99nt(this,C$99$)&&(C$99a.removeListener(this._mouseListener),this._mouseListener=null);else if(this._bubblingListeners)if(this._bubblingListeners.off(C$99t,C$99e,C$99i),!this._bubblingListeners.hasEventListener(C$99t))switch(C$99t){case C$99c.POSITION_CHANGED:this._eventMask&=-2;break;case C$99c.SCALE_CHANGED:this._eventMask&=-3;break;case C$99c.ROTATION_CHANGED:this._eventMask&=-5;break;case C$99c.SIZE_CHANGED:this._eventMask&=-9;break;case C$99c.ANCHOR_CHANGED:this._eventMask&=-17;break;case C$99c.COLOR_CHANGED:this._eventMask&=-33}},_offDispatch:function(C$99t,C$99e,C$99i,C$99n){"boolean"==typeof C$99i?(C$99n=C$99i,C$99i=void 0):C$99n=!!C$99n,C$99e?(C$99n=C$99n?this._capturingListeners:this._bubblingListeners)&&(C$99n.off(C$99t,C$99e,C$99i),C$99i&&C$99i.__eventTargets&&C$99w.array.fastRemove(C$99i.__eventTargets,this)):(this._capturingListeners&&this._capturingListeners.removeAll(C$99t),this._bubblingListeners&&this._bubblingListeners.removeAll(C$99t))},targetOff:function(C$99t){var C$99e=this._bubblingListeners;C$99e&&(C$99e.targetOff(C$99t),1&this._eventMask&&!C$99e.hasEventListener(C$99c.POSITION_CHANGED)&&(this._eventMask&=-2),2&this._eventMask&&!C$99e.hasEventListener(C$99c.SCALE_CHANGED)&&(this._eventMask&=-3),4&this._eventMask&&!C$99e.hasEventListener(C$99c.ROTATION_CHANGED)&&(this._eventMask&=-5),8&this._eventMask&&!C$99e.hasEventListener(C$99c.SIZE_CHANGED)&&(this._eventMask&=-9),16&this._eventMask&&!C$99e.hasEventListener(C$99c.ANCHOR_CHANGED)&&(this._eventMask&=-17),32&this._eventMask&&!C$99e.hasEventListener(C$99c.COLOR_CHANGED)&&(this._eventMask&=-33)),this._capturingListeners&&this._capturingListeners.targetOff(C$99t),C$99t&&C$99t.__eventTargets&&C$99w.array.fastRemove(C$99t.__eventTargets,this),this._touchListener&&!C$99nt(this,C$99Q)&&(C$99a.removeListener(this._touchListener),this._touchListener=null),this._mouseListener&&!C$99nt(this,C$99$)&&(C$99a.removeListener(this._mouseListener),this._mouseListener=null)},hasEventListener:function(C$99t){var C$99e=!1;return C$99e=!(C$99e=this._bubblingListeners?this._bubblingListeners.hasEventListener(C$99t):C$99e)&&this._capturingListeners?this._capturingListeners.hasEventListener(C$99t):C$99e},emit:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this._bubblingListeners&&this._bubblingListeners.emit(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s)},dispatchEvent:function(C$99t){!function(C$99t,C$99e){var C$99i,C$99n;for(C$99e.target=C$99t,C$99o.length=0,C$99t._getCapturingTargets(C$99e.type,C$99o),C$99e.eventPhase=1,C$99n=C$99o.length-1;0<=C$99n;--C$99n)if((C$99i=C$99o[C$99n])._capturingListeners&&((C$99e.currentTarget=C$99i)._capturingListeners.emit(C$99e.type,C$99e,C$99o),C$99e._propagationStopped))return C$99o.length=0;if(C$99o.length=0,C$99e.eventPhase=2,(C$99e.currentTarget=C$99t)._capturingListeners&&C$99t._capturingListeners.emit(C$99e.type,C$99e),!C$99e._propagationImmediateStopped&&C$99t._bubblingListeners&&C$99t._bubblingListeners.emit(C$99e.type,C$99e),!C$99e._propagationStopped&&C$99e.bubbles)for(C$99t._getBubblingTargets(C$99e.type,C$99o),C$99e.eventPhase=3,C$99n=0;C$99n<C$99o.length;++C$99n)if((C$99i=C$99o[C$99n])._bubblingListeners&&((C$99e.currentTarget=C$99i)._bubblingListeners.emit(C$99e.type,C$99e),C$99e._propagationStopped))return C$99o.length=0;C$99o.length=0}(this,C$99t),C$99o.length=0},pauseSystemEvents:function(C$99t){C$99a.pauseTarget(this,C$99t)},resumeSystemEvents:function(C$99t){C$99a.resumeTarget(this,C$99t)},_hitTest:function(C$99h,C$99t){var C$99u=this._contentSize.width,C$99_=this._contentSize.height,C$99e=C$99Y,C$99i=C$99q,C$99d=cc.Camera.findCamera(this);if(C$99d?C$99d.getScreenToWorldPoint(C$99h,C$99e):C$99e.set(C$99h),this._updateWorldMatrix(),!C$99p.Mat4.invert(C$99m,this._worldMatrix))return!1;C$99p.Vec2.transformMat4(C$99i,C$99e,C$99m),C$99i.x+=this._anchorPoint.x*C$99u,C$99i.y+=this._anchorPoint.y*C$99_;var C$99n=!1;if(0<=C$99i.x&&0<=C$99i.y&&C$99i.x<=C$99u&&C$99i.y<=C$99_&&(C$99n=!0,C$99t&&C$99t.mask))for(var C$99r=C$99t.mask,C$99s=this,C$99f=C$99r?C$99r.length:0,C$99o=0,C$99a=0;C$99s&&C$99a<C$99f;++C$99o,C$99s=C$99s.parent){var C$99c=C$99r[C$99a];if(C$99o===C$99c.index){if(C$99s!==C$99c.node){C$99r.length=C$99a;break}var C$99l=C$99s.getComponent(cc.Mask);if(C$99l&&C$99l._enabled&&!C$99l._hitTest(C$99e)){C$99n=!1;break}C$99a++}else if(C$99o>C$99c.index){C$99r.length=C$99a;break}}return C$99n},_getCapturingTargets:function(C$99t,C$99e){for(var C$99i=this.parent;C$99i;)C$99i._capturingListeners&&C$99i._capturingListeners.hasEventListener(C$99t)&&C$99e.push(C$99i),C$99i=C$99i.parent},_getBubblingTargets:function(C$99t,C$99e){for(var C$99i=this.parent;C$99i;)C$99i._bubblingListeners&&C$99i._bubblingListeners.hasEventListener(C$99t)&&C$99e.push(C$99i),C$99i=C$99i.parent},runAction:C$99s?function(C$99t){var C$99e;if(this.active)return cc.assertID(C$99t,1618),C$99e=cc.director.getActionManager(),C$99e._suppressDeprecation||(C$99e._suppressDeprecation=!0,cc.warnID(1639)),C$99e.addAction(C$99t,this,!1),C$99t}:C$99l,pauseAllActions:C$99s?function(){cc.director.getActionManager().pauseTarget(this)}:C$99l,resumeAllActions:C$99s?function(){cc.director.getActionManager().resumeTarget(this)}:C$99l,stopAllActions:C$99s?function(){cc.director.getActionManager().removeAllActionsFromTarget(this)}:C$99l,stopAction:C$99s?function(C$99t){cc.director.getActionManager().removeAction(C$99t)}:C$99l,stopActionByTag:C$99s?function(C$99t){C$99t!==cc.Action.TAG_INVALID?cc.director.getActionManager().removeActionByTag(C$99t,this):cc.logID(1612)}:C$99l,getActionByTag:C$99s?function(C$99t){return C$99t===cc.Action.TAG_INVALID?(cc.logID(1613),null):cc.director.getActionManager().getActionByTag(C$99t,this)}:function(){return null},getNumberOfRunningActions:C$99s?function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this)}:function(){return 0},getPosition:function(C$99t){return C$99t=C$99t||new C$99p.Vec3,C$99p.Trs.toPosition(C$99t,this._trs)},setPosition:function(C$99t,C$99e,C$99i){C$99i=void 0===C$99e?(C$99n=C$99t.x,C$99e=C$99t.y,C$99t.z||0):(C$99n=C$99t,C$99i||0);var C$99n,C$99t=this._trs;C$99t[0]===C$99n&&C$99t[1]===C$99e&&C$99t[2]===C$99i||(C$99t[0]=C$99n,C$99t[1]=C$99e,C$99t[2]=C$99i,this.setLocalDirty(C$99h.ALL_POSITION),this._renderFlag|=C$99r.FLAG_WORLD_TRANSFORM,1&this._eventMask&&this.emit(C$99c.POSITION_CHANGED))},getScale:function(C$99t){return void 0!==C$99t?C$99p.Trs.toScale(C$99t,this._trs):(cc.errorID(1400,"cc.Node.getScale","cc.Node.scale or cc.Node.getScale(cc.Vec3)"),this._trs[7])},setScale:function(C$99t,C$99e,C$99i){C$99t&&"number"!=typeof C$99t?(C$99e=C$99t.y,C$99i=void 0===C$99t.z?1:C$99t.z,C$99t=C$99t.x):void 0!==C$99t&&void 0===C$99e?C$99i=C$99e=C$99t:void 0===C$99i&&(C$99i=1);var C$99n=this._trs;C$99n[7]===C$99t&&C$99n[8]===C$99e&&C$99n[9]===C$99i||(C$99n[7]=C$99t,C$99n[8]=C$99e,C$99n[9]=C$99i,this.setLocalDirty(C$99h.ALL_SCALE),this._renderFlag|=C$99r.FLAG_TRANSFORM,2&this._eventMask&&this.emit(C$99c.SCALE_CHANGED))},getRotation:function(C$99t){return C$99t instanceof C$99p.Quat?C$99p.Trs.toRotation(C$99t,this._trs):(cc.warn("`cc.Node.getRotation()` is deprecated since v2.1.0, please use `-cc.Node.angle` instead. (`this.node.getRotation()` -> `-this.node.angle`)"),-this.angle)},setRotation:function(C$99t,C$99e,C$99i,C$99n){var C$99r;"number"==typeof C$99t&&void 0===C$99e?(cc.warn("`cc.Node.setRotation(degree)` is deprecated since v2.1.0, please set `-cc.Node.angle` instead. (`this.node.setRotation(x)` -> `this.node.angle = -x`)"),this.angle=-C$99t):(C$99r=C$99t,void 0===C$99e&&(C$99r=C$99t.x,C$99e=C$99t.y,C$99i=C$99t.z,C$99n=C$99t.w),(C$99t=this._trs)[3]===C$99r&&C$99t[4]===C$99e&&C$99t[5]===C$99i&&C$99t[6]===C$99n||(C$99t[3]=C$99r,C$99t[4]=C$99e,C$99t[5]=C$99i,C$99t[6]=C$99n,this.setLocalDirty(C$99h.ALL_ROTATION),4&this._eventMask&&this.emit(C$99c.ROTATION_CHANGED)))},getContentSize:function(){return cc.size(this._contentSize.width,this._contentSize.height)},setContentSize:function(C$99t,C$99e){var C$99i=this._contentSize;if(void 0===C$99e){if(C$99t.width===C$99i.width&&C$99t.height===C$99i.height)return;C$99i.width=C$99t.width,C$99i.height=C$99t.height}else{if(C$99t===C$99i.width&&C$99e===C$99i.height)return;C$99i.width=C$99t,C$99i.height=C$99e}8&this._eventMask&&this.emit(C$99c.SIZE_CHANGED)},getAnchorPoint:function(){return cc.v2(this._anchorPoint)},setAnchorPoint:function(C$99t,C$99e){var C$99i=this._anchorPoint;if(void 0===C$99e){if(C$99t.x===C$99i.x&&C$99t.y===C$99i.y)return;C$99i.x=C$99t.x,C$99i.y=C$99t.y}else{if(C$99t===C$99i.x&&C$99e===C$99i.y)return;C$99i.x=C$99t,C$99i.y=C$99e}this.setLocalDirty(C$99h.ALL_POSITION),16&this._eventMask&&this.emit(C$99c.ANCHOR_CHANGED)},_invTransformPoint:function(C$99t,C$99e){this._parent?this._parent._invTransformPoint(C$99t,C$99e):C$99p.Vec3.copy(C$99t,C$99e);C$99e=this._trs;return C$99p.Trs.toPosition(C$99P,C$99e),C$99p.Vec3.sub(C$99t,C$99t,C$99P),C$99p.Trs.toRotation(C$99L,C$99e),C$99p.Quat.conjugate(C$99V,C$99L),C$99p.Vec3.transformQuat(C$99t,C$99t,C$99V),C$99p.Trs.toScale(C$99P,C$99e),C$99p.Vec3.inverseSafe(C$99D,C$99P),C$99p.Vec3.mul(C$99t,C$99t,C$99D),C$99t},getWorldPosition:function(C$99t){C$99p.Trs.toPosition(C$99t,this._trs);for(var C$99e,C$99i=this._parent;C$99i;)C$99e=C$99i._trs,C$99p.Trs.toScale(C$99B,C$99e),C$99p.Vec3.mul(C$99t,C$99t,C$99B),C$99p.Trs.toRotation(C$99R,C$99e),C$99p.Vec3.transformQuat(C$99t,C$99t,C$99R),C$99p.Trs.toPosition(C$99B,C$99e),C$99p.Vec3.add(C$99t,C$99t,C$99B),C$99i=C$99i._parent;return C$99t},setWorldPosition:function(C$99t){var C$99e=this._trs;this._parent?this._parent._invTransformPoint(C$99O,C$99t):C$99p.Vec3.copy(C$99O,C$99t),C$99p.Trs.fromPosition(C$99e,C$99O),this.setLocalDirty(C$99h.ALL_POSITION),1&this._eventMask&&this.emit(C$99c.POSITION_CHANGED)},getWorldRotation:function(C$99t){C$99p.Trs.toRotation(C$99J,this._trs),C$99p.Quat.copy(C$99t,C$99J);for(var C$99e=this._parent;C$99e;)C$99p.Trs.toRotation(C$99J,C$99e._trs),C$99p.Quat.mul(C$99t,C$99J,C$99t),C$99e=C$99e._parent;return C$99t},setWorldRotation:function(C$99t){this._parent?(this._parent.getWorldRotation(C$99Z),C$99p.Quat.conjugate(C$99Z,C$99Z),C$99p.Quat.mul(C$99Z,C$99Z,C$99t)):C$99p.Quat.copy(C$99Z,C$99t),C$99p.Trs.fromRotation(this._trs,C$99Z),this.setLocalDirty(C$99h.ALL_ROTATION)},getWorldScale:function(C$99t){C$99p.Trs.toScale(C$99F,this._trs),C$99p.Vec3.copy(C$99t,C$99F);for(var C$99e=this._parent;C$99e;)C$99p.Trs.toScale(C$99F,C$99e._trs),C$99p.Vec3.mul(C$99t,C$99t,C$99F),C$99e=C$99e._parent;return C$99t},setWorldScale:function(C$99t){this._parent?(this._parent.getWorldScale(C$99N),C$99p.Vec3.div(C$99N,C$99t,C$99N)):C$99p.Vec3.copy(C$99N,C$99t),C$99p.Trs.fromScale(this._trs,C$99N),this.setLocalDirty(C$99h.ALL_SCALE)},getWorldRT:function(C$99t){for(var C$99e=C$99k,C$99i=C$99z,C$99n=this._trs,C$99r=(C$99p.Trs.toPosition(C$99e,C$99n),C$99p.Trs.toRotation(C$99i,C$99n),this._parent);C$99r;)C$99n=C$99r._trs,C$99p.Trs.toScale(C$99G,C$99n),C$99p.Vec3.mul(C$99e,C$99e,C$99G),C$99p.Trs.toRotation(C$99U,C$99n),C$99p.Vec3.transformQuat(C$99e,C$99e,C$99U),C$99p.Trs.toPosition(C$99G,C$99n),C$99p.Vec3.add(C$99e,C$99e,C$99G),C$99p.Quat.mul(C$99i,C$99U,C$99i),C$99r=C$99r._parent;return C$99p.Mat4.fromRT(C$99t,C$99i,C$99e),C$99t},lookAt:function(C$99t,C$99e){this.getWorldPosition(C$99W),C$99p.Vec3.sub(C$99W,C$99W,C$99t),C$99p.Vec3.normalize(C$99W,C$99W),C$99p.Quat.fromViewUp(C$99H,C$99W,C$99e),this.setWorldRotation(C$99H)},_updateLocalMatrix:C$99at,_calculWorldMatrix:function(){this._localMatDirty&C$99h.TRSS&&this._updateLocalMatrix();var C$99t=this._parent;C$99t?this._mulMat(this._worldMatrix,C$99t._worldMatrix,this._matrix):C$99p.Mat4.copy(this._worldMatrix,this._matrix),this._worldMatDirty=!1},_mulMat:C$99ht,_updateWorldMatrix:function(){if(this._parent&&this._parent._updateWorldMatrix(),this._worldMatDirty){this._calculWorldMatrix();for(var C$99t=this._children,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)C$99t[C$99e]._worldMatDirty=!0}},setLocalDirty:function(C$99t){this._localMatDirty|=C$99t,this._worldMatDirty=!0,C$99t===C$99h.ALL_POSITION||C$99t===C$99h.POSITION?this._renderFlag|=C$99r.FLAG_WORLD_TRANSFORM:this._renderFlag|=C$99r.FLAG_TRANSFORM},setWorldDirty:function(){this._worldMatDirty=!0},getLocalMatrix:function(C$99t){return this._updateLocalMatrix(),C$99p.Mat4.copy(C$99t,this._matrix)},getWorldMatrix:function(C$99t){return this._updateWorldMatrix(),C$99p.Mat4.copy(C$99t,this._worldMatrix)},convertToNodeSpaceAR:function(C$99t,C$99e){return this._updateWorldMatrix(),C$99p.Mat4.invert(C$99m,this._worldMatrix),C$99t instanceof cc.Vec2?(C$99e=C$99e||new cc.Vec2,C$99p.Vec2.transformMat4(C$99e,C$99t,C$99m)):(C$99e=C$99e||new cc.Vec3,C$99p.Vec3.transformMat4(C$99e,C$99t,C$99m))},convertToWorldSpaceAR:function(C$99t,C$99e){return this._updateWorldMatrix(),C$99t instanceof cc.Vec2?(C$99e=C$99e||new cc.Vec2,C$99p.Vec2.transformMat4(C$99e,C$99t,this._worldMatrix)):(C$99e=C$99e||new cc.Vec3,C$99p.Vec3.transformMat4(C$99e,C$99t,this._worldMatrix))},convertToNodeSpace:function(C$99t){this._updateWorldMatrix(),C$99p.Mat4.invert(C$99m,this._worldMatrix);var C$99e=new cc.Vec2;return C$99p.Vec2.transformMat4(C$99e,C$99t,C$99m),C$99e.x+=this._anchorPoint.x*this._contentSize.width,C$99e.y+=this._anchorPoint.y*this._contentSize.height,C$99e},convertToWorldSpace:function(C$99t){this._updateWorldMatrix();C$99t=new cc.Vec2(C$99t.x-this._anchorPoint.x*this._contentSize.width,C$99t.y-this._anchorPoint.y*this._contentSize.height);return C$99p.Vec2.transformMat4(C$99t,C$99t,this._worldMatrix)},getNodeToParentTransform:function(C$99t){C$99t=C$99t||C$99i.identity(),this._updateLocalMatrix();var C$99e=this._contentSize;return C$99K.x=-this._anchorPoint.x*C$99e.width,C$99K.y=-this._anchorPoint.y*C$99e.height,C$99p.Mat4.copy(C$99m,this._matrix),C$99p.Mat4.transform(C$99m,C$99m,C$99K),C$99i.fromMat4(C$99t,C$99m)},getNodeToParentTransformAR:function(C$99t){return C$99t=C$99t||C$99i.identity(),this._updateLocalMatrix(),C$99i.fromMat4(C$99t,this._matrix)},getNodeToWorldTransform:function(C$99t){C$99t=C$99t||C$99i.identity(),this._updateWorldMatrix();var C$99e=this._contentSize;return C$99K.x=-this._anchorPoint.x*C$99e.width,C$99K.y=-this._anchorPoint.y*C$99e.height,C$99p.Mat4.copy(C$99m,this._worldMatrix),C$99p.Mat4.transform(C$99m,C$99m,C$99K),C$99i.fromMat4(C$99t,C$99m)},getNodeToWorldTransformAR:function(C$99t){return C$99t=C$99t||C$99i.identity(),this._updateWorldMatrix(),C$99i.fromMat4(C$99t,this._worldMatrix)},getParentToNodeTransform:function(C$99t){return C$99t=C$99t||C$99i.identity(),this._updateLocalMatrix(),C$99p.Mat4.invert(C$99m,this._matrix),C$99i.fromMat4(C$99t,C$99m)},getWorldToNodeTransform:function(C$99t){return C$99t=C$99t||C$99i.identity(),this._updateWorldMatrix(),C$99p.Mat4.invert(C$99m,this._worldMatrix),C$99i.fromMat4(C$99t,C$99m)},convertTouchToNodeSpace:function(C$99t){return this.convertToNodeSpace(C$99t.getLocation())},convertTouchToNodeSpaceAR:function(C$99t){return this.convertToNodeSpaceAR(C$99t.getLocation())},getBoundingBox:function(){this._updateLocalMatrix();var C$99t=this._contentSize.width,C$99e=this._contentSize.height,C$99t=cc.rect(-this._anchorPoint.x*C$99t,-this._anchorPoint.y*C$99e,C$99t,C$99e);return C$99t.transformMat4(C$99t,this._matrix)},getBoundingBoxToWorld:function(){return this._parent?(this._parent._updateWorldMatrix(),this._getBoundingBoxTo()):this.getBoundingBox()},_getBoundingBoxTo:function(){var C$99t=this._contentSize.width,C$99e=this._contentSize.height,C$99i=cc.rect(-this._anchorPoint.x*C$99t,-this._anchorPoint.y*C$99e,C$99t,C$99e);if(this._calculWorldMatrix(),C$99i.transformMat4(C$99i,this._worldMatrix),!this._children)return C$99i;for(var C$99n=this._children,C$99r=0;C$99r<C$99n.length;C$99r++){var C$99s=C$99n[C$99r];C$99s&&C$99s.active&&((C$99s=C$99s._getBoundingBoxTo())&&C$99i.union(C$99i,C$99s))}return C$99i},_updateOrderOfArrival:function(){var C$99t=this._parent?++this._parent._childArrivalOrder:0;this._localZOrder=4294901760&this._localZOrder|C$99t,this.emit(C$99c.SIBLING_ORDER_CHANGED)},addChild:function(C$99t,C$99e,C$99i){cc.assertID(C$99t,1606),cc.assertID(null===C$99t._parent,1605),C$99t.parent=this,void 0!==C$99e&&(C$99t.zIndex=C$99e),void 0!==C$99i&&(C$99t.name=C$99i)},cleanup:function(){C$99s&&cc.director.getActionManager().removeAllActionsFromTarget(this),C$99a.removeListeners(this);for(var C$99t,C$99e=this._children.length,C$99i=0;C$99i<C$99e;++C$99i)(C$99t=this._children[C$99i])&&C$99t.cleanup()},sortAllChildren:function(){if(this._reorderChildDirty){this._reorderChildDirty=!1;var C$99t=this._children;this._childArrivalOrder=1;for(var C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)(C$99r=C$99t[C$99e])._updateOrderOfArrival();if(C$99a._setDirtyForNode(this),1<C$99t.length){for(var C$99n,C$99r,C$99s=1,C$99o=C$99t.length;C$99s<C$99o;C$99s++){for(C$99r=C$99t[C$99s],C$99n=C$99s-1;0<=C$99n&&C$99r._localZOrder<C$99t[C$99n]._localZOrder;)C$99t[C$99n+1]=C$99t[C$99n],C$99n--;C$99t[C$99n+1]=C$99r}this.emit(C$99c.CHILD_REORDER,this)}cc.director.__fastOff(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this)}},_delaySort:function(){this._reorderChildDirty||(this._reorderChildDirty=!0,cc.director.__fastOn(cc.Director.EVENT_AFTER_UPDATE,this.sortAllChildren,this))},_restoreProperties:!1,onRestore:!1},C$99_t=cc.Class(C$99A),C$99t=C$99_t.prototype;C$99w.getset(C$99t,"position",C$99t.getPosition,C$99t.setPosition,!1,!0),cc.Node=C$99e.exports=C$99_t},{"./event-manager":113,"./event/event":116,"./event/event-target":115,"./platform/CCMacro":194,"./platform/js":209,"./renderer/render-flow":221,"./utils/affine-transform":254,"./utils/base-node":255,"./utils/prefab-helper":267,"./utils/trans-pool":273,"./value-types":279}],31:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./CCNode"),C$99r=C$99t("./renderer/render-flow"),C$99s=(cc.Object.Flags.HideInHierarchy,C$99n._LocalDirtyFlag),C$99t=cc.Class({name:"cc.PrivateNode",extends:C$99n,properties:{x:{get:function(){return this._originPos.x},set:function(C$99t){var C$99e=this._originPos;C$99t!==C$99e.x&&(C$99e.x=C$99t,this._posDirty(!0))},override:!0},y:{get:function(){return this._originPos.y},set:function(C$99t){var C$99e=this._originPos;C$99t!==C$99e.y&&(C$99e.y=C$99t,this._posDirty(!0))},override:!0},zIndex:{get:function(){return cc.macro.MIN_ZINDEX},set:function(){cc.warnID(1638)},override:!0},showInEditor:{default:!1,editorOnly:!0,override:!0}},ctor:function(C$99t){this._localZOrder=cc.macro.MIN_ZINDEX<<16,this._originPos=cc.v2()},_posDirty:function(C$99t){this.setLocalDirty(C$99s.POSITION),this._renderFlag|=C$99r.FLAG_TRANSFORM,!0===C$99t&&1&this._eventMask&&this.emit(C$99n.EventType.POSITION_CHANGED)},_updateLocalMatrix:function(){var C$99t;this._localMatDirty&&((C$99t=this.parent)&&(this._trs[0]=this._originPos.x-(C$99t._anchorPoint.x-.5)*C$99t._contentSize.width,this._trs[1]=this._originPos.y-(C$99t._anchorPoint.y-.5)*C$99t._contentSize.height),this._super())},getPosition:function(){return new cc.Vec2(this._originPos)},setPosition:function(C$99t,C$99e){void 0===C$99e&&(C$99e=(C$99t=C$99t.x).y);var C$99i=this._originPos;C$99i.x===C$99t&&C$99i.y===C$99e||(C$99i.x=C$99t,C$99i.y=C$99e,this._posDirty(!0))},setParent:function(C$99t){var C$99e=this._parent;this._super(C$99t),C$99e!==C$99t&&(C$99e&&C$99e.off(C$99n.EventType.ANCHOR_CHANGED,this._posDirty,this),C$99t&&C$99t.on(C$99n.EventType.ANCHOR_CHANGED,this._posDirty,this))},_updateOrderOfArrival:function(){}});cc.js.getset(C$99t.prototype,"parent",C$99t.prototype.getParent,C$99t.prototype.setParent),cc.js.getset(C$99t.prototype,"position",C$99t.prototype.getPosition,C$99t.prototype.setPosition),cc.PrivateNode=C$99e.exports=C$99t},{"./CCNode":30,"./renderer/render-flow":221}],32:[function(C$99t,C$99e,C$99i){"use strict";cc.Scene=cc.Class({name:"cc.Scene",extends:C$99t("./CCNode"),properties:{_is3DNode:{default:!0,override:!0},autoReleaseAssets:{default:void 0,type:cc.Boolean}},ctor:function(){this._anchorPoint.x=0,this._anchorPoint.y=0,this._activeInHierarchy=!1,this._inited=!cc.game._isCloning,this.dependAssets=null},destroy:function(){if(cc.Object.prototype.destroy.call(this))for(var C$99t=this._children,C$99e=0;C$99e<C$99t.length;++C$99e)C$99t[C$99e].active=!1;this._active=!1,this._activeInHierarchy=!1},_onHierarchyChanged:function(){},_instantiate:null,_load:function(){this._inited||(this._onBatchCreated(),this._inited=!0)},_activate:function(C$99t){C$99t=!1!==C$99t,cc.director._nodeActivator.activateNode(this,C$99t)}}),C$99e.exports=cc.Scene},{"./CCNode":30}],33:[function(C$99t,C$99n,C$99r){"use strict";function C$99o(C$99t,C$99e,C$99i,C$99n){this.target=C$99t,this.priority=C$99e,this.paused=C$99i,this.markedForDeletion=C$99n}function C$99a(C$99t,C$99e,C$99i,C$99n){this.list=C$99t,this.entry=C$99e,this.target=C$99i,this.callback=C$99n}function C$99h(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this.timers=C$99t,this.target=C$99e,this.timerIndex=C$99i,this.currentTimer=C$99n,this.currentTimerSalvaged=C$99r,this.paused=C$99s}var C$99e=C$99t("./platform/js"),C$99t=C$99t("./platform/id-generater"),C$99_=new C$99t("Scheduler"),C$99s=[],C$99c=(C$99o.get=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99s.pop();return C$99r?(C$99r.target=C$99t,C$99r.priority=C$99e,C$99r.paused=C$99i,C$99r.markedForDeletion=C$99n):C$99r=new C$99o(C$99t,C$99e,C$99i,C$99n),C$99r},C$99o.put=function(C$99t){C$99s.length<20&&(C$99t.target=null,C$99s.push(C$99t))},[]),C$99l=(C$99a.get=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99c.pop();return C$99r?(C$99r.list=C$99t,C$99r.entry=C$99e,C$99r.target=C$99i,C$99r.callback=C$99n):C$99r=new C$99a(C$99t,C$99e,C$99i,C$99n),C$99r},C$99a.put=function(C$99t){C$99c.length<20&&(C$99t.list=C$99t.entry=C$99t.target=C$99t.callback=null,C$99c.push(C$99t))},[]);function C$99u(){this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null,this._callback=null}C$99h.get=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=C$99l.pop();return C$99o?(C$99o.timers=C$99t,C$99o.target=C$99e,C$99o.timerIndex=C$99i,C$99o.currentTimer=C$99n,C$99o.currentTimerSalvaged=C$99r,C$99o.paused=C$99s):C$99o=new C$99h(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s),C$99o},C$99h.put=function(C$99t){C$99l.length<20&&(C$99t.timers=C$99t.target=C$99t.currentTimer=null,C$99l.push(C$99t))};var C$99t=C$99u.prototype,C$99i=(C$99t.initWithCallback=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){return this._lock=!1,this._scheduler=C$99t,this._target=C$99i,this._callback=C$99e,this._elapsed=-1,this._interval=C$99n,this._delay=C$99s,this._useDelay=0<this._delay,this._repeat=C$99r,this._runForever=this._repeat===cc.macro.REPEAT_FOREVER,!0},C$99t.getInterval=function(){return this._interval},C$99t.setInterval=function(C$99t){this._interval=C$99t},C$99t.update=function(C$99t){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=C$99t,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},C$99t.getCallback=function(){return this._callback},C$99t.trigger=function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)},C$99t.cancel=function(){this._scheduler.unschedule(this._callback,this._target)},[]);C$99u.get=function(){return C$99i.pop()||new C$99u},C$99u.put=function(C$99t){C$99i.length<20&&!C$99t._lock&&(C$99t._scheduler=C$99t._target=C$99t._callback=null,C$99i.push(C$99t))},cc.Scheduler=function(){this._timeScale=1,this._updatesNegList=[],this._updates0List=[],this._updatesPosList=[],this._hashForUpdates=C$99e.createMap(!0),this._hashForTimers=C$99e.createMap(!0),this._currentTarget=null,this._currentTargetSalvaged=!1,this._updateHashLocked=!1,this._arrayForTimers=[]},cc.Scheduler.prototype={constructor:cc.Scheduler,_removeHashElement:function(C$99t){delete this._hashForTimers[C$99t.target._id];for(var C$99e=this._arrayForTimers,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i]===C$99t){C$99e.splice(C$99i,1);break}C$99h.put(C$99t)},_removeUpdateFromHash:function(C$99t){var C$99t=C$99t.target._id,C$99e=this._hashForUpdates[C$99t];if(C$99e){for(var C$99i=C$99e.list,C$99n=C$99e.entry,C$99r=0,C$99s=C$99i.length;C$99r<C$99s;C$99r++)if(C$99i[C$99r]===C$99n){C$99i.splice(C$99r,1);break}delete this._hashForUpdates[C$99t],C$99o.put(C$99n),C$99a.put(C$99e)}},_priorityIn:function(C$99t,C$99e,C$99i){for(var C$99n=0;C$99n<C$99t.length;C$99n++)if(C$99i<C$99t[C$99n].priority)return void C$99t.splice(C$99n,0,C$99e);C$99t.push(C$99e)},_appendIn:function(C$99t,C$99e){C$99t.push(C$99e)},enableForTarget:function(C$99t){C$99t._id||(C$99t.__instanceId?cc.warnID(1513):C$99t._id=C$99_.getNewId())},setTimeScale:function(C$99t){this._timeScale=C$99t},getTimeScale:function(){return this._timeScale},update:function(C$99t){var C$99e,C$99i,C$99n;for(this._updateHashLocked=!0,1!==this._timeScale&&(C$99t*=this._timeScale),C$99o=0,C$99i=(C$99e=this._updatesNegList).length;C$99o<C$99i;C$99o++)(C$99n=C$99e[C$99o]).paused||C$99n.markedForDeletion||C$99n.target.update(C$99t);for(C$99o=0,C$99i=(C$99e=this._updates0List).length;C$99o<C$99i;C$99o++)(C$99n=C$99e[C$99o]).paused||C$99n.markedForDeletion||C$99n.target.update(C$99t);for(C$99o=0,C$99i=(C$99e=this._updatesPosList).length;C$99o<C$99i;C$99o++)(C$99n=C$99e[C$99o]).paused||C$99n.markedForDeletion||C$99n.target.update(C$99t);for(var C$99r,C$99s=this._arrayForTimers,C$99o=0;C$99o<C$99s.length;C$99o++){if(C$99r=C$99s[C$99o],this._currentTarget=C$99r,this._currentTargetSalvaged=!1,!C$99r.paused)for(C$99r.timerIndex=0;C$99r.timerIndex<C$99r.timers.length;++C$99r.timerIndex)C$99r.currentTimer=C$99r.timers[C$99r.timerIndex],C$99r.currentTimerSalvaged=!1,C$99r.currentTimer.update(C$99t),C$99r.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&(this._removeHashElement(this._currentTarget),--C$99o)}for(C$99o=0,C$99e=this._updatesNegList;C$99o<C$99e.length;)(C$99n=C$99e[C$99o]).markedForDeletion?this._removeUpdateFromHash(C$99n):C$99o++;for(C$99o=0,C$99e=this._updates0List;C$99o<C$99e.length;)(C$99n=C$99e[C$99o]).markedForDeletion?this._removeUpdateFromHash(C$99n):C$99o++;for(C$99o=0,C$99e=this._updatesPosList;C$99o<C$99e.length;)(C$99n=C$99e[C$99o]).markedForDeletion?this._removeUpdateFromHash(C$99n):C$99o++;this._updateHashLocked=!1,this._currentTarget=null},schedule:function(C$99t,C$99e,C$99i,C$99n,C$99l,C$99r){"function"!=typeof C$99t&&(C$99a=C$99t,C$99t=C$99e,C$99e=C$99a),4!==arguments.length&&5!==arguments.length||(C$99r=!!C$99n,C$99n=cc.macro.REPEAT_FOREVER,C$99l=0),cc.assertID(C$99e,1502);var C$99s,C$99o,C$99a=C$99e._id,C$99c=(C$99a||(C$99e.__instanceId?(cc.warnID(1513),C$99a=C$99e._id=C$99e.__instanceId):cc.errorID(1510)),this._hashForTimers[C$99a]);if(C$99c?C$99c.paused!==C$99r&&cc.warnID(1511):(C$99c=C$99h.get(null,C$99e,0,null,null,C$99r),this._arrayForTimers.push(C$99c),this._hashForTimers[C$99a]=C$99c),null==C$99c.timers)C$99c.timers=[];else for(C$99o=0;C$99o<C$99c.timers.length;++C$99o)if((C$99s=C$99c.timers[C$99o])&&C$99t===C$99s._callback)return cc.logID(1507,C$99s.getInterval(),C$99i),void(C$99s._interval=C$99i);(C$99s=C$99u.get()).initWithCallback(this,C$99t,C$99e,C$99i,C$99n,C$99l),C$99c.timers.push(C$99s),this._currentTarget===C$99c&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)},scheduleUpdate:function(C$99t,C$99e,C$99i){var C$99n=C$99t._id,C$99r=(C$99n||(C$99t.__instanceId?(cc.warnID(1513),C$99n=C$99t._id=C$99t.__instanceId):cc.errorID(1510)),this._hashForUpdates[C$99n]);if(C$99r&&C$99r.entry){if(C$99r.entry.priority===C$99e)return C$99r.entry.markedForDeletion=!1,void(C$99r.entry.paused=C$99i);if(this._updateHashLocked)return cc.logID(1506),C$99r.entry.markedForDeletion=!1,void(C$99r.entry.paused=C$99i);this.unscheduleUpdate(C$99t)}var C$99s,C$99r=C$99o.get(C$99t,C$99e,C$99i,!1);0===C$99e?(C$99s=this._updates0List,this._appendIn(C$99s,C$99r)):(C$99s=C$99e<0?this._updatesNegList:this._updatesPosList,this._priorityIn(C$99s,C$99r,C$99e)),this._hashForUpdates[C$99n]=C$99a.get(C$99s,C$99r,C$99t,null)},unschedule:function(C$99t,C$99e){if(C$99e&&C$99t){var C$99i=C$99e._id,C$99n=(C$99i||(C$99e.__instanceId?(cc.warnID(1513),C$99i=C$99e._id=C$99e.__instanceId):cc.errorID(1510)),this._hashForTimers[C$99i]);if(C$99n)for(var C$99r=C$99n.timers,C$99s=0,C$99o=C$99r.length;C$99s<C$99o;C$99s++){var C$99a=C$99r[C$99s];if(C$99t===C$99a._callback)return C$99a!==C$99n.currentTimer||C$99n.currentTimerSalvaged||(C$99n.currentTimerSalvaged=!0),C$99r.splice(C$99s,1),C$99u.put(C$99a),C$99n.timerIndex>=C$99s&&C$99n.timerIndex--,void(0===C$99r.length&&(this._currentTarget===C$99n?this._currentTargetSalvaged=!0:this._removeHashElement(C$99n)))}}},unscheduleUpdate:function(C$99t){var C$99e;C$99t&&((C$99e=C$99t._id)||(C$99t.__instanceId?(cc.warnID(1513),C$99e=C$99t._id=C$99t.__instanceId):cc.errorID(1510)),(C$99t=this._hashForUpdates[C$99e])&&(this._updateHashLocked?C$99t.entry.markedForDeletion=!0:this._removeUpdateFromHash(C$99t.entry)))},unscheduleAllForTarget:function(C$99t){if(C$99t){var C$99e=C$99t._id,C$99e=(C$99e||(C$99t.__instanceId?(cc.warnID(1513),C$99e=C$99t._id=C$99t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$99e]);if(C$99e){var C$99i=C$99e.timers;-1<C$99i.indexOf(C$99e.currentTimer)&&!C$99e.currentTimerSalvaged&&(C$99e.currentTimerSalvaged=!0);for(var C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++)C$99u.put(C$99i[C$99n]);C$99i.length=0,this._currentTarget===C$99e?this._currentTargetSalvaged=!0:this._removeHashElement(C$99e)}this.unscheduleUpdate(C$99t)}},unscheduleAll:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllWithMinPriority:function(C$99t){for(var C$99e,C$99i,C$99n=this._arrayForTimers,C$99r=C$99n.length-1;0<=C$99r;C$99r--)C$99e=C$99n[C$99r],this.unscheduleAllForTarget(C$99e.target);var C$99s=0;if(C$99t<0)for(C$99r=0;C$99r<this._updatesNegList.length;)C$99s=this._updatesNegList.length,(C$99i=this._updatesNegList[C$99r])&&C$99i.priority>=C$99t&&this.unscheduleUpdate(C$99i.target),C$99s==this._updatesNegList.length&&C$99r++;if(C$99t<=0)for(C$99r=0;C$99r<this._updates0List.length;)C$99s=this._updates0List.length,(C$99i=this._updates0List[C$99r])&&this.unscheduleUpdate(C$99i.target),C$99s==this._updates0List.length&&C$99r++;for(C$99r=0;C$99r<this._updatesPosList.length;)C$99s=this._updatesPosList.length,(C$99i=this._updatesPosList[C$99r])&&C$99i.priority>=C$99t&&this.unscheduleUpdate(C$99i.target),C$99s==this._updatesPosList.length&&C$99r++},isScheduled:function(C$99t,C$99e){cc.assertID(C$99t,1508),cc.assertID(C$99e,1509);var C$99i=C$99e._id,C$99e=(C$99i||(C$99e.__instanceId?(cc.warnID(1513),C$99i=C$99e._id=C$99e.__instanceId):cc.errorID(1510)),this._hashForTimers[C$99i]);if(!C$99e)return!1;if(null==C$99e.timers)return!1;for(var C$99n=C$99e.timers,C$99r=0;C$99r<C$99n.length;++C$99r)if(C$99t===C$99n[C$99r]._callback)return!0;return!1},pauseAllTargets:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},pauseAllTargetsWithMinPriority:function(C$99t){for(var C$99e,C$99i,C$99n=[],C$99r=this._arrayForTimers,C$99s=0,C$99o=C$99r.length;C$99s<C$99o;C$99s++)(C$99e=C$99r[C$99s])&&(C$99e.paused=!0,C$99n.push(C$99e.target));if(C$99t<0)for(C$99s=0;C$99s<this._updatesNegList.length;C$99s++)(C$99i=this._updatesNegList[C$99s])&&C$99i.priority>=C$99t&&(C$99i.paused=!0,C$99n.push(C$99i.target));if(C$99t<=0)for(C$99s=0;C$99s<this._updates0List.length;C$99s++)(C$99i=this._updates0List[C$99s])&&(C$99i.paused=!0,C$99n.push(C$99i.target));for(C$99s=0;C$99s<this._updatesPosList.length;C$99s++)(C$99i=this._updatesPosList[C$99s])&&C$99i.priority>=C$99t&&(C$99i.paused=!0,C$99n.push(C$99i.target));return C$99n},resumeTargets:function(C$99t){if(C$99t)for(var C$99e=0;C$99e<C$99t.length;C$99e++)this.resumeTarget(C$99t[C$99e])},pauseTarget:function(C$99t){cc.assertID(C$99t,1503);var C$99e=C$99t._id,C$99t=(C$99e||(C$99t.__instanceId?(cc.warnID(1513),C$99e=C$99t._id=C$99t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$99e]),C$99t=(C$99t&&(C$99t.paused=!0),this._hashForUpdates[C$99e]);C$99t&&(C$99t.entry.paused=!0)},resumeTarget:function(C$99t){cc.assertID(C$99t,1504);var C$99e=C$99t._id,C$99t=(C$99e||(C$99t.__instanceId?(cc.warnID(1513),C$99e=C$99t._id=C$99t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$99e]),C$99t=(C$99t&&(C$99t.paused=!1),this._hashForUpdates[C$99e]);C$99t&&(C$99t.entry.paused=!1)},isTargetPaused:function(C$99t){cc.assertID(C$99t,1505);var C$99e=C$99t._id,C$99t=(C$99e||(C$99t.__instanceId?(cc.warnID(1513),C$99e=C$99t._id=C$99t.__instanceId):cc.errorID(1510)),this._hashForTimers[C$99e]);if(C$99t)return C$99t.paused;C$99t=this._hashForUpdates[C$99e];return!!C$99t&&C$99t.entry.paused}},cc.Scheduler.PRIORITY_SYSTEM=1<<31,cc.Scheduler.PRIORITY_NON_SYSTEM=cc.Scheduler.PRIORITY_SYSTEM+1,C$99n.exports=cc.Scheduler},{"./platform/id-generater":205,"./platform/js":209}],34:[function(C$99t,C$99e,C$99i){"use strict";C$99t=C$99t("./CCRawAsset");cc.Asset=cc.Class({name:"cc.Asset",extends:C$99t,ctor:function(){this.loaded=!0,this.url=""},properties:{nativeUrl:{get:function(){if(this._native){var C$99t,C$99e=this._native;if(47===C$99e.charCodeAt(0))return C$99e.slice(1);if(cc.AssetLibrary)return C$99t=cc.AssetLibrary.getLibUrlNoExt(this._uuid,!0),46===C$99e.charCodeAt(0)?C$99t+C$99e:C$99t+"/"+C$99e;cc.errorID(6400)}return""},visible:!1},_native:"",_nativeAsset:{get:function(){return this._$nativeAsset},set:function(C$99t){this._$nativeAsset=C$99t}}},statics:{deserialize:!1,preventDeferredLoadDependents:!1,preventPreloadNativeObject:!1},toString:function(){return this.nativeUrl},serialize:!1,createNode:null,_setRawAsset:function(C$99t,C$99e){this._native=!1!==C$99e?C$99t||void 0:"/"+C$99t}}),C$99e.exports=cc.Asset},{"./CCRawAsset":42}],35:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./CCAsset"),C$99t=C$99t("../event/event-target"),C$99r=cc.Enum({WEB_AUDIO:0,DOM_AUDIO:1}),C$99s=cc.Class({name:"cc.AudioClip",extends:C$99n,mixins:[C$99t],ctor:function(){this.loaded=!1,this._audio=null},properties:{loadMode:{default:C$99r.WEB_AUDIO,type:C$99r},_nativeAsset:{get:function(){return this._audio},set:function(C$99t){C$99t instanceof cc.AudioClip?this._audio=C$99t._nativeAsset:this._audio=C$99t,this._audio&&(this.loaded=!0,this.emit("load"))},override:!0}},statics:{LoadMode:C$99r,_loadByUrl:function(C$99i,C$99n){var C$99r=cc.loader.getItem(C$99i)||cc.loader.getItem(C$99i+"?useDom=1");C$99r&&C$99r.complete?C$99r._owner instanceof C$99s?C$99n(null,C$99r._owner):C$99n(null,C$99r.content):cc.loader.load(C$99i,function(C$99t,C$99e){if(C$99t)return C$99n(C$99t);C$99r=cc.loader.getItem(C$99i)||cc.loader.getItem(C$99i+"?useDom=1"),C$99n(null,C$99r.content)})}},destroy:function(){cc.audioEngine.uncache(this),this._super()}});cc.AudioClip=C$99s,C$99e.exports=C$99s},{"../event/event-target":115,"./CCAsset":34}],36:[function(C$99t,C$99e,C$99i){"use strict";function C$99s(){this.u=0,this.v=0,this.w=0,this.h=0,this.offsetX=0,this.offsetY=0,this.textureID=0,this.valid=!1,this.xAdvance=0}function C$99o(C$99t){this._letterDefinitions={},this._texture=C$99t}C$99o.prototype={constructor:C$99o,addLetterDefinitions:function(C$99t,C$99e){this._letterDefinitions[C$99t]=C$99e},cloneLetterDefinition:function(){var C$99t,C$99e={};for(C$99t in this._letterDefinitions){var C$99i=new C$99s;cc.js.mixin(C$99i,this._letterDefinitions[C$99t]),C$99e[C$99t]=C$99i}return C$99e},getTexture:function(){return this._texture},getLetter:function(C$99t){return this._letterDefinitions[C$99t]},getLetterDefinitionForChar:function(C$99t){C$99t=C$99t.charCodeAt(0);return this._letterDefinitions.hasOwnProperty(C$99t)?this._letterDefinitions[C$99t]:null},clear:function(){this._letterDefinitions={}}};var C$99n=cc.Class({name:"cc.BitmapFont",extends:cc.Font,properties:{fntDataStr:{default:""},spriteFrame:{default:null,type:cc.SpriteFrame},fontSize:{default:-1},_fntConfig:null,_fontDefDictionary:null},onLoad:function(){var C$99t=this.spriteFrame,C$99t=(!this._fontDefDictionary&&C$99t&&(this._fontDefDictionary=new C$99o(C$99t._texture)),this._fntConfig);if(C$99t){var C$99e,C$99i=C$99t.fontDefDictionary;for(C$99e in C$99i){var C$99n=new C$99s,C$99r=C$99i[C$99e].rect;C$99n.offsetX=C$99i[C$99e].xOffset,C$99n.offsetY=C$99i[C$99e].yOffset,C$99n.w=C$99r.width,C$99n.h=C$99r.height,C$99n.u=C$99r.x,C$99n.v=C$99r.y,C$99n.textureID=0,C$99n.valid=!0,C$99n.xAdvance=C$99i[C$99e].xAdvance,this._fontDefDictionary.addLetterDefinitions(C$99e,C$99n)}}}});cc.BitmapFont=C$99n,cc.BitmapFont.FontLetterDefinition=C$99s,cc.BitmapFont.FontAtlas=C$99o,C$99e.exports=C$99n},{}],37:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.BufferAsset",extends:cc.Asset,ctor:function(){this._buffer=null},properties:{_nativeAsset:{get:function(){return this._buffer},set:function(C$99t){this._buffer=C$99t.buffer||C$99t},override:!0},buffer:function(){return this._buffer}}});cc.BufferAsset=C$99e.exports=C$99n},{}],38:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.Font",extends:cc.Asset});cc.Font=C$99e.exports=C$99n},{}],39:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.JsonAsset",extends:cc.Asset,properties:{json:null}});C$99e.exports=cc.JsonAsset=C$99n},{}],40:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.LabelAtlas",extends:cc.BitmapFont,onLoad:function(){this.spriteFrame?this._fntConfig?this._super():cc.warnID(9101,this.name):cc.warnID(9100,this.name)}});cc.LabelAtlas=C$99n,C$99e.exports=C$99n},{}],41:[function(C$99e,C$99t,C$99i){"use strict";var C$99n=cc.Enum({AUTO:0,SINGLE_INSTANCE:1,MULTI_INSTANCE:2}),C$99n=cc.Class({name:"cc.Prefab",extends:cc.Asset,ctor:function(){this._createFunction=null,this._instantiatedTimes=0},properties:{data:null,optimizationPolicy:C$99n.AUTO,asyncLoadAssets:!1,readonly:{default:!1,editorOnly:!0}},statics:{OptimizationPolicy:C$99n,OptimizationPolicyThreshold:3},createNode:!1,compileCreateFunction:function(){var C$99t=C$99e("../platform/instantiate-jit");this._createFunction=C$99t.compile(this.data)},_doInstantiate:function(C$99t){return this.data._prefab?this.data._prefab._synced=!0:cc.warnID(3700),this._createFunction||this.compileCreateFunction(),this._createFunction(C$99t)},_instantiate:function(){var C$99t;return this.data._prefab._synced=!0,C$99t=this.data._instantiate(),++this._instantiatedTimes,C$99t},destroy:function(){this.data&&this.data.destroy(),this._super()}});cc.Prefab=C$99t.exports=C$99n,cc.js.obsolete(cc,"cc._Prefab","Prefab")},{"../platform/instantiate-jit":207}],42:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../platform/CCObject"),C$99r=C$99t("../platform/js");cc.RawAsset=cc.Class({name:"cc.RawAsset",extends:C$99n,ctor:function(){Object.defineProperty(this,"_uuid",{value:"",writable:!0})}}),C$99r.value(cc.RawAsset,"isRawAssetType",function(C$99t){return C$99r.isChildClassOf(C$99t,cc.RawAsset)&&!C$99r.isChildClassOf(C$99t,cc.Asset)}),C$99r.value(cc.RawAsset,"wasRawAssetType",function(C$99t){return C$99t===cc.Texture2D||C$99t===cc.AudioClip||C$99t===cc.ParticleAsset||C$99t===cc.Asset}),C$99e.exports=cc.RawAsset},{"../platform/CCObject":195,"../platform/js":209}],43:[function(C$99t,C$99e,C$99i){"use strict";var C$99s=(C$99n=C$99t("../../renderer/gfx"))&&C$99n.__esModule?C$99n:{default:C$99n};var C$99o=C$99t("../renderer"),C$99n=C$99t("./CCTexture2D"),C$99t=cc.Enum({RB_FMT_D24S8:C$99s.default.RB_FMT_D24S8,RB_FMT_S8:C$99s.default.RB_FMT_S8,RB_FMT_D16:C$99s.default.RB_FMT_D16}),C$99n=cc.Class({name:"cc.RenderTexture",extends:C$99n,statics:{DepthStencilFormat:C$99t},ctor:function(){this._framebuffer=null},initWithSize:function(C$99t,C$99e,C$99i){this.width=Math.floor(C$99t||cc.visibleRect.width),this.height=Math.floor(C$99e||cc.visibleRect.height),this._resetUnderlyingMipmaps();var C$99n,C$99r={colors:[this._texture]};this._depthStencilBuffer&&this._depthStencilBuffer.destroy(),C$99i&&(C$99n=new C$99s.default.RenderBuffer(C$99o.device,C$99i,C$99t,C$99e),C$99i===C$99s.default.RB_FMT_D24S8?C$99r.depthStencil=C$99n:C$99i===C$99s.default.RB_FMT_S8?C$99r.stencil=C$99n:C$99i===C$99s.default.RB_FMT_D16&&(C$99r.depth=C$99n)),this._depthStencilBuffer=C$99n,this._framebuffer&&this._framebuffer.destroy(),this._framebuffer=new C$99s.default.FrameBuffer(C$99o.device,C$99t,C$99e,C$99r),this._packable=!1,this.loaded=!0,this.emit("load")},updateSize:function(C$99t,C$99e){this.width=Math.floor(C$99t||cc.visibleRect.width),this.height=Math.floor(C$99e||cc.visibleRect.height),this._resetUnderlyingMipmaps();var C$99i=this._depthStencilBuffer;C$99i&&C$99i.update(this.width,this.height),this._framebuffer._width=C$99t,this._framebuffer._height=C$99e},drawTextureAt:function(C$99t,C$99e,C$99i){C$99t._image&&0!==C$99t._image.width&&this._texture.updateSubImage({x:C$99e,y:C$99i,image:C$99t._image,width:C$99t.width,height:C$99t.height,level:0,flipY:!1,premultiplyAlpha:C$99t._premultiplyAlpha})},readPixels:function(C$99t,C$99e,C$99i,C$99n,C$99r){if(!this._framebuffer||!this._texture)return C$99t;C$99e=C$99e||0,C$99i=C$99i||0;var C$99n=C$99n||this.width,C$99r=C$99r||this.height,C$99s=(C$99t=C$99t||new Uint8Array(C$99n*C$99r*4),cc.game._renderContext),C$99o=C$99s.getParameter(C$99s.FRAMEBUFFER_BINDING);return C$99s.bindFramebuffer(C$99s.FRAMEBUFFER,this._framebuffer.getHandle()),C$99s.readPixels(C$99e,C$99i,C$99n,C$99r,C$99s.RGBA,C$99s.UNSIGNED_BYTE,C$99t),C$99s.bindFramebuffer(C$99s.FRAMEBUFFER,C$99o),C$99t},destroy:function(){this._super(),this._framebuffer&&(this._framebuffer.destroy(),this._framebuffer=null)}});cc.RenderTexture=C$99e.exports=C$99n},{"../../renderer/gfx":312,"../renderer":220,"./CCTexture2D":50}],44:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.SceneAsset",extends:cc.Asset,properties:{scene:null,asyncLoadAssets:void 0}});cc.SceneAsset=C$99n,C$99e.exports=C$99n},{}],45:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.Script",extends:cc.Asset}),C$99r=(cc._Script=C$99n,cc.Class({name:"cc.JavaScript",extends:C$99n})),C$99r=(cc._JavaScript=C$99r,cc.Class({name:"cc.CoffeeScript",extends:C$99n})),C$99r=(cc._CoffeeScript=C$99r,cc.Class({name:"cc.TypeScript",extends:C$99n}));cc._TypeScript=C$99r},{}],46:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.SpriteAtlas",extends:cc.Asset,properties:{_spriteFrames:{default:{}}},getTexture:function(){var C$99t=Object.keys(this._spriteFrames);return 0<C$99t.length&&(C$99t=this._spriteFrames[C$99t[0]])?C$99t.getTexture():null},getSpriteFrame:function(C$99t){var C$99e=this._spriteFrames[C$99t];return C$99e?(C$99e.name||(C$99e.name=C$99t),C$99e):null},getSpriteFrames:function(){var C$99t,C$99e=[];for(C$99t in this._spriteFrames)C$99e.push(this.getSpriteFrame(C$99t));return C$99e}});cc.SpriteAtlas=C$99n,C$99e.exports=C$99n},{}],47:[function(C$99t,C$99e,C$99i){"use strict";var C$99s=C$99t("../event/event-target"),C$99n=C$99t("../utils/texture-util"),C$99y=[{u:0,v:0},{u:0,v:0},{u:0,v:0},{u:0,v:0}],C$99r=cc.Class({name:"cc.SpriteFrame",extends:C$99t("../assets/CCAsset"),mixins:[C$99s],properties:{_textureSetter:{set:function(C$99t){C$99t&&(this._texture!==C$99t&&this._refreshTexture(C$99t),this._textureFilename=C$99t.url)}},insetTop:{get:function(){return this._capInsets[1]},set:function(C$99t){this._capInsets[1]=C$99t,this._texture&&this._calculateSlicedUV()}},insetBottom:{get:function(){return this._capInsets[3]},set:function(C$99t){this._capInsets[3]=C$99t,this._texture&&this._calculateSlicedUV()}},insetLeft:{get:function(){return this._capInsets[0]},set:function(C$99t){this._capInsets[0]=C$99t,this._texture&&this._calculateSlicedUV()}},insetRight:{get:function(){return this._capInsets[2]},set:function(C$99t){this._capInsets[2]=C$99t,this._texture&&this._calculateSlicedUV()}}},ctor:function(){C$99s.call(this);var C$99t=arguments[0],C$99e=arguments[1],C$99i=arguments[2],C$99n=arguments[3],C$99r=arguments[4];this._rect=null,this.uv=[],this._texture=null,this._original=null,this._offset=null,this._originalSize=null,this._rotated=!1,this._flipX=!1,this._flipY=!1,this.vertices=null,this._capInsets=[0,0,0,0],this.uvSliced=[],this._textureFilename="",void 0!==C$99t&&this.setTexture(C$99t,C$99e,C$99i,C$99n,C$99r)},textureLoaded:function(){return this._texture&&this._texture.loaded},onTextureLoaded:function(C$99t,C$99e){return this.textureLoaded()?(C$99t.call(C$99e),!0):(this.once("load",C$99t,C$99e),this.ensureLoadTexture(),!1)},isRotated:function(){return this._rotated},setRotated:function(C$99t){this._rotated=C$99t,this._texture&&this._calculateUV()},isFlipX:function(){return this._flipX},isFlipY:function(){return this._flipY},setFlipX:function(C$99t){this._flipX=C$99t,this._texture&&this._calculateUV()},setFlipY:function(C$99t){this._flipY=C$99t,this._texture&&this._calculateUV()},getRect:function(){return cc.rect(this._rect)},setRect:function(C$99t){this._rect=C$99t,this._texture&&this._calculateUV()},getOriginalSize:function(){return cc.size(this._originalSize)},setOriginalSize:function(C$99t){this._originalSize?(this._originalSize.width=C$99t.width,this._originalSize.height=C$99t.height):this._originalSize=cc.size(C$99t)},getTexture:function(){return this._texture},_textureLoadedCallback:function(){var C$99t,C$99e=this._texture;C$99e&&(C$99t=C$99e.width,C$99e=C$99e.height,this._rect?this._checkRect(this._texture):this._rect=cc.rect(0,0,C$99t,C$99e),this._originalSize||this.setOriginalSize(cc.size(C$99t,C$99e)),this._offset||this.setOffset(cc.v2(0,0)),this._calculateUV(),this.emit("load"))},_refreshTexture:function(C$99t){(this._texture=C$99t).loaded?this._textureLoadedCallback():C$99t.once("load",this._textureLoadedCallback,this)},getOffset:function(){return cc.v2(this._offset)},setOffset:function(C$99t){this._offset=cc.v2(C$99t)},clone:function(){return new C$99r(this._texture||this._textureFilename,this._rect,this._rotated,this._offset,this._originalSize)},setTexture:function(C$99t,C$99e,C$99i,C$99n,C$99r){this._rect=C$99e||null,C$99n?this.setOffset(C$99n):this._offset=null,C$99r?this.setOriginalSize(C$99r):this._originalSize=null,this._rotated=C$99i||!1;C$99e=C$99t;return"string"==typeof C$99e&&C$99e&&(this._textureFilename=C$99e,this._loadTexture()),C$99e instanceof cc.Texture2D&&this._texture!==C$99e&&this._refreshTexture(C$99e),!0},_loadTexture:function(){var C$99t;this._textureFilename&&(C$99t=C$99n.loadImage(this._textureFilename),this._refreshTexture(C$99t))},ensureLoadTexture:function(){this._texture?this._texture.loaded||(this._refreshTexture(this._texture),C$99n.postLoadTexture(this._texture)):this._textureFilename&&this._loadTexture()},_checkRect:function(C$99t){var C$99e=this._rect,C$99i=C$99e.x,C$99n=C$99e.y;this._rotated?(C$99i+=C$99e.height,C$99n+=C$99e.width):(C$99i+=C$99e.width,C$99n+=C$99e.height),C$99i>C$99t.width&&cc.errorID(3300,C$99t.url+"/"+this.name,C$99i,C$99t.width),C$99n>C$99t.height&&cc.errorID(3400,C$99t.url+"/"+this.name,C$99n,C$99t.height)},_flipXY:function(C$99t){var C$99e;this._flipX&&(C$99e=C$99t[0],C$99t[0]=C$99t[1],C$99t[1]=C$99e,C$99e=C$99t[2],C$99t[2]=C$99t[3],C$99t[3]=C$99e),this._flipY&&(C$99e=C$99t[0],C$99t[0]=C$99t[2],C$99t[2]=C$99e,C$99e=C$99t[1],C$99t[1]=C$99t[3],C$99t[3]=C$99e)},_calculateSlicedUV:function(){var C$99t=this._rect,C$99e=this._texture.width,C$99i=this._texture.height,C$99n=this._capInsets[0],C$99r=this._capInsets[2],C$99r=C$99t.width-C$99n-C$99r,C$99s=this._capInsets[1],C$99o=this._capInsets[3],C$99h=C$99t.height-C$99s-C$99o,C$99a=this.uvSliced;if(C$99a.length=0,this._rotated){C$99y[0].u=C$99t.x/C$99e,C$99y[1].u=(C$99t.x+C$99o)/C$99e,C$99y[2].u=(C$99t.x+C$99o+C$99h)/C$99e,C$99y[3].u=(C$99t.x+C$99t.height)/C$99e,C$99y[3].v=C$99t.y/C$99i,C$99y[2].v=(C$99t.y+C$99n)/C$99i,C$99y[1].v=(C$99t.y+C$99n+C$99r)/C$99i,C$99y[0].v=(C$99t.y+C$99t.width)/C$99i,this._flipXY(C$99y);for(var C$99c=0;C$99c<4;++C$99c)for(var C$99u=C$99y[C$99c],C$99l=0;C$99l<4;++C$99l){var C$99_=C$99y[3-C$99l];C$99a.push({u:C$99u.u,v:C$99_.v})}}else{C$99y[0].u=C$99t.x/C$99e,C$99y[1].u=(C$99t.x+C$99n)/C$99e,C$99y[2].u=(C$99t.x+C$99n+C$99r)/C$99e,C$99y[3].u=(C$99t.x+C$99t.width)/C$99e,C$99y[3].v=C$99t.y/C$99i,C$99y[2].v=(C$99t.y+C$99s)/C$99i,C$99y[1].v=(C$99t.y+C$99s+C$99h)/C$99i,C$99y[0].v=(C$99t.y+C$99t.height)/C$99i,this._flipXY(C$99y);for(var C$99d=0;C$99d<4;++C$99d)for(var C$99f=C$99y[C$99d],C$99p=0;C$99p<4;++C$99p){var C$99m=C$99y[C$99p];C$99a.push({u:C$99m.u,v:C$99f.v})}}},_setDynamicAtlasFrame:function(C$99t){C$99t&&(this._original={_texture:this._texture,_x:this._rect.x,_y:this._rect.y},this._texture=C$99t.texture,this._rect.x=C$99t.x,this._rect.y=C$99t.y,this._calculateUV())},_resetDynamicAtlasFrame:function(){this._original&&(this._rect.x=this._original._x,this._rect.y=this._original._y,this._texture=this._original._texture,this._original=null,this._calculateUV())},_calculateUV:function(){var C$99t,C$99e,C$99i,C$99n=this._rect,C$99r=this._texture,C$99s=this.uv,C$99o=C$99r.width,C$99a=C$99r.height,C$99c=(this._rotated?(C$99r=0===C$99o?0:C$99n.x/C$99o,C$99i=0===C$99o?0:(C$99n.x+C$99n.height)/C$99o,C$99e=0===C$99a?0:(C$99n.y+C$99n.width)/C$99a,C$99t=0===C$99a?0:C$99n.y/C$99a,C$99s[0]=C$99r,C$99s[1]=C$99t,C$99s[2]=C$99r,C$99s[3]=C$99e,C$99s[4]=C$99i,C$99s[5]=C$99t,C$99s[6]=C$99i,C$99s[7]=C$99e):(C$99r=0===C$99o?0:C$99n.x/C$99o,C$99t=0===C$99o?0:(C$99n.x+C$99n.width)/C$99o,C$99i=0===C$99a?0:(C$99n.y+C$99n.height)/C$99a,C$99e=0===C$99a?0:C$99n.y/C$99a,C$99s[0]=C$99r,C$99s[1]=C$99i,C$99s[2]=C$99t,C$99s[3]=C$99i,C$99s[4]=C$99r,C$99s[5]=C$99e,C$99s[6]=C$99t,C$99s[7]=C$99e),this._flipX&&(C$99n=C$99s[0],C$99s[0]=C$99s[2],C$99s[2]=C$99n,C$99n=C$99s[1],C$99s[1]=C$99s[3],C$99s[3]=C$99n,C$99n=C$99s[4],C$99s[4]=C$99s[6],C$99s[6]=C$99n,C$99n=C$99s[5],C$99s[5]=C$99s[7],C$99s[7]=C$99n),this._flipY&&(C$99i=C$99s[0],C$99s[0]=C$99s[4],C$99s[4]=C$99i,C$99i=C$99s[1],C$99s[1]=C$99s[5],C$99s[5]=C$99i,C$99i=C$99s[2],C$99s[2]=C$99s[6],C$99s[6]=C$99i,C$99i=C$99s[3],C$99s[3]=C$99s[7],C$99s[7]=C$99i),this.vertices);if(C$99c){C$99c.nu.length=0;for(var C$99l=C$99c.nv.length=0;C$99l<C$99c.u.length;C$99l++)C$99c.nu[C$99l]=C$99c.u[C$99l]/C$99o,C$99c.nv[C$99l]=C$99c.v[C$99l]/C$99a}this._calculateSlicedUV()},_serialize:!1,_deserialize:function(C$99t,C$99e){var C$99i=C$99t.rect,C$99i=(C$99i&&(this._rect=new cc.Rect(C$99i[0],C$99i[1],C$99i[2],C$99i[3])),C$99t.offset&&this.setOffset(new cc.Vec2(C$99t.offset[0],C$99t.offset[1])),C$99t.originalSize&&this.setOriginalSize(new cc.Size(C$99t.originalSize[0],C$99t.originalSize[1])),this._rotated=1===C$99t.rotated,this._name=C$99t.name,C$99t.capInsets),C$99i=(C$99i&&(this._capInsets[0]=C$99i[0],this._capInsets[1]=C$99i[1],this._capInsets[2]=C$99i[2],this._capInsets[3]=C$99i[3]),this.vertices=C$99t.vertices,this.vertices&&(this.vertices.nu=[],this.vertices.nv=[]),C$99t.texture);C$99i&&C$99e.result.push(this,"_textureSetter",C$99i)}}),C$99t=C$99r.prototype;C$99t.copyWithZone=C$99t.clone,C$99t.copy=C$99t.clone,C$99t.initWithTexture=C$99t.setTexture,cc.SpriteFrame=C$99r,C$99e.exports=C$99r},{"../assets/CCAsset":34,"../event/event-target":115,"../utils/texture-util":272}],48:[function(C$99t,C$99e,C$99i){"use strict";C$99t=C$99t("./CCFont"),C$99t=cc.Class({name:"cc.TTFFont",extends:C$99t,properties:{_fontFamily:null,_nativeAsset:{type:cc.String,get:function(){return this._fontFamily},set:function(C$99t){this._fontFamily=C$99t||"Arial"},override:!0}}});cc.TTFFont=C$99e.exports=C$99t},{"./CCFont":38}],49:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.TextAsset",extends:cc.Asset,properties:{text:""},toString:function(){return this.text}});C$99e.exports=cc.TextAsset=C$99n},{}],50:[function(C$99t,C$99r,C$99h){"use strict";var C$99e=(C$99e=C$99t("../../renderer/gfx"))&&C$99e.__esModule?C$99e:{default:C$99e};var C$99u=C$99t("../event/event-target"),C$99s=C$99t("../renderer"),C$99_=(C$99t("../platform/CCClass"),new(C$99t("../platform/id-generater"))("Tex")),C$99d=1024,C$99f=cc.Enum({RGB565:C$99e.default.TEXTURE_FMT_R5_G6_B5,RGB5A1:C$99e.default.TEXTURE_FMT_R5_G5_B5_A1,RGBA4444:C$99e.default.TEXTURE_FMT_R4_G4_B4_A4,RGB888:C$99e.default.TEXTURE_FMT_RGB8,RGBA8888:C$99e.default.TEXTURE_FMT_RGBA8,RGBA32F:C$99e.default.TEXTURE_FMT_RGBA32F,A8:C$99e.default.TEXTURE_FMT_A8,I8:C$99e.default.TEXTURE_FMT_L8,AI8:C$99e.default.TEXTURE_FMT_L8_A8,RGB_PVRTC_2BPPV1:C$99e.default.TEXTURE_FMT_RGB_PVRTC_2BPPV1,RGBA_PVRTC_2BPPV1:C$99e.default.TEXTURE_FMT_RGBA_PVRTC_2BPPV1,RGB_A_PVRTC_2BPPV1:C$99d++,RGB_PVRTC_4BPPV1:C$99e.default.TEXTURE_FMT_RGB_PVRTC_4BPPV1,RGBA_PVRTC_4BPPV1:C$99e.default.TEXTURE_FMT_RGBA_PVRTC_4BPPV1,RGB_A_PVRTC_4BPPV1:+C$99d,RGB_ETC1:C$99e.default.TEXTURE_FMT_RGB_ETC1,RGBA_ETC1:1026,RGB_ETC2:C$99e.default.TEXTURE_FMT_RGB_ETC2,RGBA_ETC2:C$99e.default.TEXTURE_FMT_RGBA_ETC2}),C$99c=cc.Enum({REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648}),C$99l=cc.Enum({LINEAR:9729,NEAREST:9728}),C$99o={9728:0,9729:1},C$99i=[],C$99n={width:void 0,height:void 0,minFilter:void 0,magFilter:void 0,wrapS:void 0,wrapT:void 0,format:void 0,genMipmaps:void 0,images:void 0,image:void 0,flipY:void 0,premultiplyAlpha:void 0};function C$99a(){for(var C$99t in C$99n)C$99n[C$99t]=void 0;return C$99i.length=0,C$99n.images=C$99i,C$99n}var C$99p=cc.Class({name:"cc.Texture2D",extends:C$99t("../assets/CCAsset"),mixins:[C$99u],properties:{_nativeAsset:{get:function(){return this._image},set:function(C$99t){C$99t._compressed&&C$99t._data?this.initWithData(C$99t._data,this._format,C$99t.width,C$99t.height):this.initWithElement(C$99t)},override:!0},_format:C$99f.RGBA8888,_premultiplyAlpha:!1,_flipY:!1,_minFilter:C$99l.LINEAR,_magFilter:C$99l.LINEAR,_mipFilter:C$99l.LINEAR,_wrapS:C$99c.CLAMP_TO_EDGE,_wrapT:C$99c.CLAMP_TO_EDGE,_genMipmaps:!1,genMipmaps:{get:function(){return this._genMipmaps},set:function(C$99t){var C$99e;this._genMipmaps!==C$99t&&((C$99e=C$99a()).genMipmaps=C$99t,this.update(C$99e))}},_packable:!0,packable:{get:function(){return this._packable},set:function(C$99t){this._packable=C$99t}}},statics:{PixelFormat:C$99f,WrapMode:C$99c,Filter:C$99l,_FilterIndex:C$99o,extnames:[".png",".jpg",".jpeg",".bmp",".webp",".pvr",".pkm"]},ctor:function(){this._id=C$99_.getNewId(),this.loaded=!1,this.width=0,this.height=0,this._hashDirty=!0,this._hash=0,this._texture=null},getImpl:function(){return this._texture},getId:function(){return this._id},toString:function(){return this.url||""},update:function(C$99t){var C$99e;C$99t&&(C$99e=!1,void 0!==C$99t.width&&(this.width=C$99t.width),void 0!==C$99t.height&&(this.height=C$99t.height),void 0!==C$99t.minFilter&&(this._minFilter=C$99t.minFilter,C$99t.minFilter=C$99o[C$99t.minFilter]),void 0!==C$99t.magFilter&&(this._magFilter=C$99t.magFilter,C$99t.magFilter=C$99o[C$99t.magFilter]),void 0!==C$99t.mipFilter&&(this._mipFilter=C$99t.mipFilter,C$99t.mipFilter=C$99o[C$99t.mipFilter]),void 0!==C$99t.wrapS&&(this._wrapS=C$99t.wrapS),void 0!==C$99t.wrapT&&(this._wrapT=C$99t.wrapT),void 0!==C$99t.format&&(this._format=C$99t.format),void 0!==C$99t.flipY&&(this._flipY=C$99t.flipY,C$99e=!0),void 0!==C$99t.premultiplyAlpha&&(this._premultiplyAlpha=C$99t.premultiplyAlpha,C$99e=!0),void 0!==C$99t.genMipmaps&&(this._genMipmaps=C$99t.genMipmaps),C$99e&&this._image&&(C$99t.image=this._image),C$99t.images&&0<C$99t.images.length?this._image=C$99t.images[0]:void 0!==C$99t.image&&(this._image=C$99t.image,C$99t.images||(C$99i.length=0,C$99t.images=C$99i),C$99t.images.push(C$99t.image)),this._texture&&this._texture.update(C$99t),this._hashDirty=!0)},initWithElement:function(C$99t){var C$99e;C$99t&&((this._image=C$99t).complete||C$99t instanceof HTMLCanvasElement?this.handleLoadedTexture():(C$99e=this,C$99t.addEventListener("load",function(){C$99e.handleLoadedTexture()}),C$99t.addEventListener("error",function(C$99t){cc.warnID(3119,C$99t.message)})))},initWithData:function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99a();return C$99r.image=C$99t,C$99r.images=[C$99r.image],C$99r.genMipmaps=this._genMipmaps,C$99r.premultiplyAlpha=this._premultiplyAlpha,C$99r.flipY=this._flipY,C$99r.minFilter=C$99o[this._minFilter],C$99r.magFilter=C$99o[this._magFilter],C$99r.wrapS=this._wrapS,C$99r.wrapT=this._wrapT,C$99r.format=this._getGFXPixelFormat(C$99e),C$99r.width=C$99i,C$99r.height=C$99n,this._texture?this._texture.update(C$99r):this._texture=new C$99s.Texture2D(C$99s.device,C$99r),this.width=C$99i,this.height=C$99n,this._checkPackable(),this.loaded=!0,this.emit("load"),!0},getHtmlElementObj:function(){return this._image},destroy:function(){this._packable&&cc.dynamicAtlasManager&&cc.dynamicAtlasManager.deleteAtlasTexture(this),this._image=null,this._texture&&this._texture.destroy(),this._super()},getPixelFormat:function(){return this._format},hasPremultipliedAlpha:function(){return this._premultiplyAlpha||!1},handleLoadedTexture:function(){var C$99t;this._image&&this._image.width&&this._image.height&&(this.width=this._image.width,this.height=this._image.height,(C$99t=C$99a()).image=this._image,C$99t.images=[C$99t.image],C$99t.width=this.width,C$99t.height=this.height,C$99t.genMipmaps=this._genMipmaps,C$99t.format=this._getGFXPixelFormat(this._format),C$99t.premultiplyAlpha=this._premultiplyAlpha,C$99t.flipY=this._flipY,C$99t.minFilter=C$99o[this._minFilter],C$99t.magFilter=C$99o[this._magFilter],C$99t.wrapS=this._wrapS,C$99t.wrapT=this._wrapT,this._texture?this._texture.update(C$99t):this._texture=new C$99s.Texture2D(C$99s.device,C$99t),this._checkPackable(),this.loaded=!0,this.emit("load"),cc.macro.CLEANUP_IMAGE_CACHE&&this._image instanceof HTMLImageElement&&this._clearImage())},description:function(){return"<cc.Texture2D | Name = "+this.url+" | Dimensions = "+this.width+" x "+this.height+">"},releaseTexture:function(){this._image=null,this._texture&&this._texture.destroy()},setWrapMode:function(C$99t,C$99e){var C$99i;this._wrapS===C$99t&&this._wrapT===C$99e||((C$99i=C$99a()).wrapS=C$99t,C$99i.wrapT=C$99e,this.update(C$99i))},setFilters:function(C$99t,C$99e){var C$99i;this._minFilter===C$99t&&this._magFilter===C$99e||((C$99i=C$99a()).minFilter=C$99t,C$99i.magFilter=C$99e,this.update(C$99i))},setFlipY:function(C$99t){var C$99e;this._flipY!==C$99t&&((C$99e=C$99a()).flipY=C$99t,this.update(C$99e))},setPremultiplyAlpha:function(C$99t){var C$99e;this._premultiplyAlpha!==C$99t&&((C$99e=C$99a()).premultiplyAlpha=C$99t,this.update(C$99e))},_checkPackable:function(){var C$99t,C$99e,C$99i=cc.dynamicAtlasManager;C$99i&&(this._isCompressed()?this._packable=!1:(C$99t=this.width,C$99e=this.height,!this._image||C$99t>C$99i.maxFrameSize||C$99e>C$99i.maxFrameSize||this._getHash()!==C$99i.Atlas.DEFAULT_HASH?this._packable=!1:this._image&&this._image instanceof HTMLCanvasElement&&(this._packable=!0)))},_getOpts:function(){var C$99t=C$99a();return C$99t.width=this.width,C$99t.height=this.height,C$99t.genMipmaps=this._genMipmaps,C$99t.format=this._format,C$99t.premultiplyAlpha=this._premultiplyAlpha,C$99t.anisotropy=this._anisotropy,C$99t.flipY=this._flipY,C$99t.minFilter=C$99o[this._minFilter],C$99t.magFilter=C$99o[this._magFilter],C$99t.mipFilter=C$99o[this._mipFilter],C$99t.wrapS=this._wrapS,C$99t.wrapT=this._wrapT,C$99t},_getGFXPixelFormat:function(C$99t){return C$99t===C$99f.RGBA_ETC1?C$99t=C$99f.RGB_ETC1:C$99t===C$99f.RGB_A_PVRTC_4BPPV1?C$99t=C$99f.RGB_PVRTC_4BPPV1:C$99t===C$99f.RGB_A_PVRTC_2BPPV1&&(C$99t=C$99f.RGB_PVRTC_2BPPV1),C$99t},_resetUnderlyingMipmaps:function(C$99t){var C$99e=this._getOpts();C$99e.images=C$99t||[null],this._texture?this._texture.update(C$99e):this._texture=new C$99s.Texture2D(C$99s.device,C$99e)},_serialize:!1,_deserialize:function(C$99t,C$99h){var C$99e=cc.renderer.device,C$99t=C$99t.split(","),C$99i=C$99t[0];if(C$99i){for(var C$99n=C$99i.split("_"),C$99r="",C$99s="",C$99u=999,C$99_=this._format,C$99d=cc.macro.SUPPORT_TEXTURE_FORMATS,C$99o=0;C$99o<C$99n.length;C$99o++){var C$99a=C$99n[C$99o].split("@"),C$99c=C$99a[0],C$99c=C$99p.extnames[C$99c.charCodeAt(0)-48]||C$99c,C$99l=C$99d.indexOf(C$99c);-1!==C$99l&&C$99l<C$99u?(C$99a=C$99a[1]?parseInt(C$99a[1]):this._format,(".pvr"!==C$99c||C$99e.ext("WEBGL_compressed_texture_pvrtc"))&&(C$99a!==C$99f.RGB_ETC1&&C$99a!==C$99f.RGBA_ETC1||C$99e.ext("WEBGL_compressed_texture_etc1"))&&(C$99a!==C$99f.RGB_ETC2&&C$99a!==C$99f.RGBA_ETC2||C$99e.ext("WEBGL_compressed_texture_etc"))&&(".webp"===C$99c&&!cc.sys.capabilities.webp||(C$99u=C$99l,C$99s=C$99c,C$99_=C$99a))):C$99r=C$99r||C$99c}C$99s?(this._setRawAsset(C$99s),this._format=C$99_):(this._setRawAsset(C$99r),cc.warnID(3120,C$99h.customEnv.url,C$99r,C$99r))}8===C$99t.length&&(this._minFilter=parseInt(C$99t[1]),this._magFilter=parseInt(C$99t[2]),this._wrapS=parseInt(C$99t[3]),this._wrapT=parseInt(C$99t[4]),this._premultiplyAlpha=49===C$99t[5].charCodeAt(0),this._genMipmaps=49===C$99t[6].charCodeAt(0),this._packable=49===C$99t[7].charCodeAt(0))},_getHash:function(){if(!this._hashDirty)return this._hash;var C$99t=this._genMipmaps?1:0,C$99e=this._premultiplyAlpha?1:0,C$99i=this._flipY?1:0,C$99n=this._minFilter===C$99l.LINEAR?1:2,C$99r=this._magFilter===C$99l.LINEAR?1:2,C$99s=this._wrapS===C$99c.REPEAT?1:this._wrapS===C$99c.CLAMP_TO_EDGE?2:3,C$99o=this._wrapT===C$99c.REPEAT?1:this._wrapT===C$99c.CLAMP_TO_EDGE?2:3,C$99a=this._format;this._image;return this._hash=Number(""+C$99n+C$99r+C$99a+C$99s+C$99o+C$99t+C$99e+C$99i),this._hashDirty=!1,this._hash},_isCompressed:function(){return this._format<C$99f.A8||this._format>C$99f.RGBA32F},_clearImage:function(){cc.loader.removeItem(this._image.id||this._image.src),this._image.src=""}});cc.Texture2D=C$99r.exports=C$99p},{"../../renderer/gfx":312,"../assets/CCAsset":34,"../event/event-target":115,"../platform/CCClass":189,"../platform/id-generater":205,"../renderer":220}],51:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCRawAsset"),C$99t("./CCAsset"),C$99t("./CCFont"),C$99t("./CCPrefab"),C$99t("./CCAudioClip"),C$99t("./CCScripts"),C$99t("./CCSceneAsset"),C$99t("./CCSpriteFrame"),C$99t("./CCTexture2D"),C$99t("./CCRenderTexture"),C$99t("./CCTTFFont"),C$99t("./CCSpriteAtlas"),C$99t("./CCBitmapFont"),C$99t("./CCLabelAtlas"),C$99t("./CCTextAsset"),C$99t("./CCJsonAsset"),C$99t("./CCBufferAsset"),C$99t("./material")},{"./CCAsset":34,"./CCAudioClip":35,"./CCBitmapFont":36,"./CCBufferAsset":37,"./CCFont":38,"./CCJsonAsset":39,"./CCLabelAtlas":40,"./CCPrefab":41,"./CCRawAsset":42,"./CCRenderTexture":43,"./CCSceneAsset":44,"./CCScripts":45,"./CCSpriteAtlas":46,"./CCSpriteFrame":47,"./CCTTFFont":48,"./CCTextAsset":49,"./CCTexture2D":50,"./material":58}],52:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=(C$99n=C$99t("../CCAsset"))&&C$99n.__esModule?C$99n:{default:C$99n},C$99r=C$99t("./effect-parser");C$99t=cc.Class({name:"cc.EffectAsset",extends:C$99n.default,ctor:function(){this._effect=null},properties:{properties:Object,techniques:[],shaders:[]},onLoad:function(){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){for(var C$99t=cc.renderer._forward._programLib,C$99e=0;C$99e<this.shaders.length;C$99e++)C$99t.define(this.shaders[C$99e]);this._initEffect()}},_initEffect:function(){this._effect||(this._effect=(0,C$99r.parseEffect)(this),Object.freeze(this._effect))},getInstantiatedEffect:function(){return this._initEffect(),this._effect.clone()},getEffect:function(){return this._initEffect(),this._effect}});C$99e.exports=cc.EffectAsset=C$99t},{"../CCAsset":34,"./effect-parser":55}],53:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99t("../CCAsset"),C$99a=C$99t("../CCTexture2D"),C$99c=C$99a.PixelFormat,C$99r=C$99t("./CCEffectAsset"),C$99l=C$99t("../../utils/texture-util"),C$99h=cc.gfx,C$99t=cc.Enum({SPRITE:"2d-sprite",GRAY_SPRITE:"2d-gray-sprite",UNLIT:"unlit"}),C$99s=cc.Class({name:"cc.Material",extends:C$99n,ctor:function(){this._manualHash=!1,this._dirty=!0,this._effect=null},properties:{_defines:{default:void 0,type:Object},_props:{default:void 0,type:Object},_effectAsset:{type:C$99r,default:null},_techniqueIndex:0,_techniqueData:Object,effectName:void 0,effectAsset:{get:function(){return this._effectAsset},set:function(C$99t){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&((this._effectAsset=C$99t)?this._effect=this._effectAsset.getInstantiatedEffect():cc.error("Can not set an empty effect asset."))}},effect:{get:function(){return this._effect}},techniqueIndex:{get:function(){return this._techniqueIndex},set:function(C$99t){this._techniqueIndex=C$99t,this._effect.switchTechnique(C$99t)}}},statics:{getBuiltinMaterial:function(C$99t){return cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Material:cc.AssetLibrary.getBuiltin("material","builtin-"+C$99t)},BUILTIN_NAME:C$99t,createWithBuiltin:function(C$99t,C$99e){void 0===C$99e&&(C$99e=0);C$99t=cc.AssetLibrary.getBuiltin("effect","builtin-"+C$99t);return C$99s.create(C$99t,C$99e)},create:function(C$99t,C$99e){if(void 0===C$99e&&(C$99e=0),!C$99t)return null;var C$99i=new C$99s;return C$99i.effectAsset=C$99t,C$99i.techniqueIndex=C$99e,C$99i}},setProperty:function(C$99t,C$99e,C$99i,C$99n){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){if("string"==typeof C$99i&&(C$99i=parseInt(C$99i)),C$99e instanceof C$99a){var C$99r=C$99e.getPixelFormat(),C$99r=C$99r===C$99c.RGBA_ETC1||C$99r===C$99c.RGB_A_PVRTC_4BPPV1||C$99r===C$99c.RGB_A_PVRTC_2BPPV1,C$99s="CC_USE_ALPHA_ATLAS_"+C$99t,C$99o=this.getDefine(C$99s,C$99i);if((C$99r||C$99o)&&this.define(C$99s,C$99r),!C$99e.loaded)return C$99e.once("load",function(){this._effect.setProperty(C$99t,C$99e,C$99i)},this),void C$99l.postLoadTexture(C$99e)}this._effect.setProperty(C$99t,C$99e,C$99i,C$99n)}},getProperty:function(C$99t,C$99e){return"string"==typeof C$99e&&(C$99e=parseInt(C$99e)),this._effect.getProperty(C$99t,C$99e)},define:function(C$99t,C$99e,C$99i,C$99n){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&("string"==typeof C$99i&&(C$99i=parseInt(C$99i)),this._effect.define(C$99t,C$99e,C$99i,C$99n))},getDefine:function(C$99t,C$99e){return"string"==typeof C$99e&&(C$99e=parseInt(C$99e)),this._effect.getDefine(C$99t,C$99e)},setCullMode:function(C$99t,C$99e){void 0===C$99t&&(C$99t=C$99h.CULL_BACK),this._effect.setCullMode(C$99t,C$99e)},setDepth:function(C$99t,C$99e,C$99i,C$99n){void 0===C$99i&&(C$99i=C$99h.DS_FUNC_LESS),this._effect.setDepth(C$99t=void 0===C$99t?!1:C$99t,C$99e=void 0===C$99e?!1:C$99e,C$99i,C$99n)},setBlend:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){void 0===C$99e&&(C$99e=C$99h.BLEND_FUNC_ADD),void 0===C$99i&&(C$99i=C$99h.BLEND_SRC_ALPHA),void 0===C$99n&&(C$99n=C$99h.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$99r&&(C$99r=C$99h.BLEND_FUNC_ADD),void 0===C$99s&&(C$99s=C$99h.BLEND_SRC_ALPHA),void 0===C$99o&&(C$99o=C$99h.BLEND_ONE_MINUS_SRC_ALPHA),this._effect.setBlend(C$99t=void 0===C$99t?!1:C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a=void 0===C$99a?4294967295:C$99a,C$99c)},setStencilEnabled:function(C$99t,C$99e){void 0===C$99t&&(C$99t=C$99h.STENCIL_INHERIT),this._effect.setStencilEnabled(C$99t,C$99e)},setStencil:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){void 0===C$99t&&(C$99t=C$99h.STENCIL_INHERIT),void 0===C$99e&&(C$99e=C$99h.DS_FUNC_ALWAYS),void 0===C$99r&&(C$99r=C$99h.STENCIL_OP_KEEP),void 0===C$99s&&(C$99s=C$99h.STENCIL_OP_KEEP),void 0===C$99o&&(C$99o=C$99h.STENCIL_OP_KEEP),this._effect.setStencil(C$99t,C$99e,C$99i=void 0===C$99i?0:C$99i,C$99n=void 0===C$99n?255:C$99n,C$99r,C$99s,C$99o,C$99a=void 0===C$99a?255:C$99a,C$99c)},updateHash:function(C$99t){this._manualHash=C$99t,this._effect&&this._effect.updateHash(C$99t)},getHash:function(){return this._manualHash||this._effect&&this._effect.getHash()},onLoad:function(){if(this.effectAsset=this._effectAsset,this._effect){this._techniqueIndex&&this._effect.switchTechnique(this._techniqueIndex),this._techniqueData=this._techniqueData||{};var C$99t=this._techniqueData;for(C$99e in C$99t){var C$99e,C$99i=C$99t[C$99e=parseInt(C$99e)];if(C$99i){for(var C$99n in C$99i.defines)this.define(C$99n,C$99i.defines[C$99n],C$99e);for(var C$99r in C$99i.props)this.setProperty(C$99r,C$99i.props[C$99r],C$99e)}}}}});C$99i.default=C$99s,cc.Material=C$99s,C$99e.exports=C$99i.default},{"../../utils/texture-util":272,"../CCAsset":34,"../CCTexture2D":50,"./CCEffectAsset":52}],54:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99s=(C$99t=C$99t("../../../renderer/core/pass"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}var C$99r,C$99o=cc.gfx,C$99a=((C$99t=C$99c.prototype)._createPassProp=function(C$99t,C$99e){var C$99i,C$99n=C$99e._properties[C$99t];if(C$99n)return C$99i=Object.create(null),C$99i.name=C$99t,C$99i.type=C$99n.type,C$99n.value instanceof Float32Array?C$99i.value=new Float32Array(C$99n.value):C$99i.value=C$99n.value,C$99e._properties[C$99t]=C$99i},C$99t._setPassProperty=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99i._properties.hasOwnProperty(C$99t);if(C$99r){if(C$99r.value===C$99e)return}else C$99r=this._createPassProp(C$99t,C$99i);return this._dirty=!0,C$99s.default.prototype.setProperty.call(C$99i,C$99t,C$99e,C$99n)},C$99t.setProperty=function(C$99t,C$99e,C$99i,C$99n){var C$99r=!1,C$99s=this.passes,C$99o=0,C$99a=C$99s.length;void 0!==C$99i&&(C$99a=(C$99o=C$99i)+1);for(var C$99c=C$99o;C$99c<C$99a;C$99c++)this._setPassProperty(C$99t,C$99e,C$99s[C$99c],C$99n)&&(C$99r=!0);C$99r||cc.warnID(9103,this.name,C$99t)},C$99t.getProperty=function(C$99t,C$99e){var C$99i=this.passes;if(!(C$99e>=C$99i.length)){var C$99n=0,C$99r=C$99i.length;void 0!==C$99e&&(C$99r=(C$99n=C$99e)+1);for(var C$99s=C$99n;C$99s<C$99r;C$99s++){var C$99o=C$99i[C$99s].getProperty(C$99t);if(void 0!==C$99o)return C$99o}}},C$99t.define=function(C$99t,C$99e,C$99i,C$99n){var C$99r=!1,C$99s=this.passes,C$99o=0,C$99a=C$99s.length;void 0!==C$99i&&(C$99a=(C$99o=C$99i)+1);for(var C$99c=C$99o;C$99c<C$99a;C$99c++)C$99s[C$99c].define(C$99t,C$99e,C$99n)&&(C$99r=!0);C$99r||cc.warnID(9104,this.name,C$99t)},C$99t.getDefine=function(C$99t,C$99e){var C$99i=this.passes;if(!(C$99e>=C$99i.length)){var C$99n=0,C$99r=C$99i.length;void 0!==C$99e&&(C$99r=(C$99n=C$99e)+1);for(var C$99s=C$99n;C$99s<C$99r;C$99s++){var C$99o=C$99i[C$99s].getDefine(C$99t);if(void 0!==C$99o)return C$99o}}},C$99t.setCullMode=function(C$99t,C$99e){void 0===C$99t&&(C$99t=C$99o.CULL_BACK);var C$99i=this.passes,C$99n=0,C$99r=C$99i.length;void 0!==C$99e&&(C$99r=(C$99n=C$99e)+1);for(var C$99s=C$99n;C$99s<C$99r;C$99s++)C$99i[C$99s].setCullMode(C$99t);this._dirty=!0},C$99t.setDepth=function(C$99t,C$99e,C$99i,C$99n){var C$99r=this.passes,C$99s=0,C$99o=C$99r.length;void 0!==C$99n&&(C$99o=(C$99s=C$99n)+1);for(var C$99a=C$99s;C$99a<C$99o;C$99a++)C$99r[C$99a].setDepth(C$99t,C$99e,C$99i);this._dirty=!0},C$99t.setBlend=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99h,C$99u,C$99_,C$99s){var C$99o=this.passes,C$99a=0,C$99c=C$99o.length;void 0!==C$99s&&(C$99c=(C$99a=C$99s)+1);for(var C$99l=C$99a;C$99l<C$99c;C$99l++)C$99o[C$99l].setBlend(C$99t,C$99e,C$99i,C$99n,C$99r,C$99h,C$99u,C$99_);this._dirty=!0},C$99t.setStencilEnabled=function(C$99t,C$99e){void 0===C$99t&&(C$99t=C$99o.STENCIL_INHERIT);var C$99i=this.passes,C$99n=0,C$99r=C$99i.length;void 0!==C$99e&&(C$99r=(C$99n=C$99e)+1);for(var C$99s=C$99n;C$99s<C$99r;C$99s++)C$99i[C$99s].setStencilEnabled(C$99t);this._dirty=!0},C$99t.setStencil=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){var C$99h=this.passes,C$99u=0,C$99_=C$99h.length;void 0!==C$99c&&(C$99_=(C$99u=C$99c)+1);for(var C$99l=C$99u;C$99l<C$99_;C$99l++){var C$99d=C$99h[C$99l];C$99d.setStencilFront(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a),C$99d.setStencilBack(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a)}this._dirty=!0},C$99t=C$99c,(C$99a=[{key:"name",get:function(){return this._name}},{key:"technique",get:function(){return this._technique}},{key:"passes",get:function(){return[]}}])&&C$99n(C$99t.prototype,C$99a),C$99r&&C$99n(C$99t,C$99r),C$99c);function C$99c(){this._dirty=!0,this._name="",this._technique=null}C$99i.default=C$99a,cc.EffectBase=C$99a,C$99e.exports=C$99i.default},{"../../../renderer/core/pass":303}],55:[function(C$99t,C$99r,C$99e){"use strict";C$99e.__esModule=!0,C$99e.parseEffect=function(C$99t){var C$99e=function(C$99t){for(var C$99e=C$99t.techniques.length,C$99i=new Array(C$99e),C$99n=0;C$99n<C$99e;++C$99n){for(var C$99r=C$99t.techniques[C$99n],C$99h=C$99r.name||C$99n,C$99u=C$99r.passes.length,C$99_=new Array(C$99u),C$99s=0;C$99s<C$99u;++C$99s){var C$99o=C$99r.passes[C$99s],C$99a=C$99o.name||C$99s,C$99c=C$99t.name+"-"+C$99h+"-"+C$99a,C$99l=C$99o.stage||"opaque",C$99d=function(C$99t,C$99e){var C$99i,C$99n=C$99e.properties||{},C$99r=C$99v(C$99e.program);for(C$99i in C$99n)(function(C$99e){if(!C$99r.uniforms.find(function(C$99t){return C$99t.name===C$99e}))cc.warnID(9107,C$99t.name,C$99e)})(C$99i);var C$99s={};return C$99r.uniforms.forEach(function(C$99t){var C$99e=C$99t.name,C$99i=C$99s[C$99e]=Object.assign({},C$99t),C$99e=C$99n[C$99e],C$99e=(C$99m.enums2default[C$99t.type],C$99e?C$99e.type===C$99y.default.PARAM_TEXTURE_2D?null:C$99e.type===C$99y.default.PARAM_INT||C$99e.type===C$99y.default.PARAM_FLOAT?Array.isArray(C$99e.value)?C$99e.value[0]:C$99e.value:new Float32Array(C$99e.value):C$99m.enums2default[C$99t.type]);C$99i.value=C$99e}),C$99s}(C$99t,C$99o),C$99f=function(C$99t){var C$99e={};return C$99v(C$99t.program).defines.forEach(function(C$99t){C$99e[C$99t.name]=C$99m.enums2default[C$99t.type]}),C$99e}(C$99o),C$99a=C$99_[C$99s]=new C$99p.default(C$99a,C$99c,C$99o.program,C$99l,C$99d,C$99f),C$99c=(C$99o.rasterizerState&&C$99a.setCullMode(C$99o.rasterizerState.cullMode),C$99o.blendState&&C$99o.blendState.targets[0]),C$99l=(C$99c&&C$99a.setBlend(C$99c.blend,C$99c.blendEq,C$99c.blendSrc,C$99c.blendDst,C$99c.blendAlphaEq,C$99c.blendSrcAlpha,C$99c.blendDstAlpha,C$99c.blendColor),C$99o.depthStencilState);C$99l&&(C$99a.setDepth(C$99l.depthTest,C$99l.depthWrite,C$99l.depthFunc),C$99a.setStencilFront(C$99l.stencilTest,C$99l.stencilFuncFront,C$99l.stencilRefFront,C$99l.stencilMaskFront,C$99l.stencilFailOpFront,C$99l.stencilZFailOpFront,C$99l.stencilZPassOpFront,C$99l.stencilWriteMaskFront),C$99a.setStencilBack(C$99l.stencilTest,C$99l.stencilFuncBack,C$99l.stencilRefBack,C$99l.stencilMaskBack,C$99l.stencilFailOpBack,C$99l.stencilZFailOpBack,C$99l.stencilZPassOpBack,C$99l.stencilWriteMaskBack))}C$99i[C$99n]=new C$99g.default(C$99h,C$99_)}return C$99i}(C$99t);return new C$99i.default(C$99t.name,C$99e,0,C$99t)};var C$99p=C$99n(C$99t("../../../renderer/core/pass")),C$99m=C$99t("../../../renderer/types"),C$99y=C$99n(C$99t("../../../renderer/enums")),C$99i=C$99n(C$99t("./effect")),C$99g=C$99n(C$99t("../../../renderer/core/technique"));function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99v(C$99t){return cc.renderer._forward._programLib.getTemplate(C$99t)}},{"../../../renderer/core/pass":303,"../../../renderer/core/technique":305,"../../../renderer/enums":307,"../../../renderer/types":335,"./effect":57}],56:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99r=C$99n(C$99t("../../../renderer/murmurhash2_gc")),C$99s=C$99n(C$99t("./utils")),C$99t=C$99n(C$99t("./effect-base"));function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99a(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99c(C$99i){return function(){var C$99t,C$99e=C$99o(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99o(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99o(C$99t){return(C$99o=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}cc.gfx;C$99t=function(C$99i){var C$99t,C$99e;C$99n=C$99i,(C$99t=C$99o).prototype=Object.create(C$99n.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99n,C$99c(C$99o);function C$99o(C$99t){var C$99e=C$99i.call(this)||this;return C$99e._effect=void 0,C$99e._passes=[],C$99e._stagePasses={},C$99e._hash=0,C$99e.init(C$99t),C$99e}C$99t=C$99o,(C$99n=[{key:"effect",get:function(){return this._effect}},{key:"name",get:function(){return this._effect&&this._effect.name+" (variant)"}},{key:"passes",get:function(){return this._passes}},{key:"stagePasses",get:function(){return this._stagePasses}}])&&C$99a(C$99t.prototype,C$99n),C$99e&&C$99a(C$99t,C$99e);var C$99n=C$99o.prototype;return C$99n._onEffectChanged=function(){},C$99n.init=function(C$99t){if(C$99t instanceof C$99o&&(C$99t=C$99t.effect),this._effect=C$99t,this._dirty=!0,C$99t)for(var C$99e=C$99t.passes,C$99i=this._passes,C$99n=(C$99i.length=0,this._stagePasses={}),C$99r=0;C$99r<C$99e.length;C$99r++){var C$99s=C$99i[C$99r]=Object.setPrototypeOf({},C$99e[C$99r]);C$99s._properties=Object.setPrototypeOf({},C$99e[C$99r]._properties),C$99s._defines=Object.setPrototypeOf({},C$99e[C$99r]._defines),C$99n[C$99s._stage]||(C$99n[C$99s._stage]=[]),C$99n[C$99s._stage].push(C$99s)}},C$99n.updateHash=function(C$99t){},C$99n.getHash=function(){if(!this._dirty)return this._hash;this._dirty=!1;var C$99t="",C$99e=(C$99t+=C$99s.default.serializePasses(this._passes),this._effect);return C$99e&&(C$99t+=C$99s.default.serializePasses(C$99e.passes)),this._hash=(0,C$99r.default)(C$99t,666),this.updateHash(this._hash),this._hash},C$99o}(C$99t.default);C$99i.default=C$99t,cc.EffectVariant=C$99t,C$99e.exports=C$99i.default},{"../../../renderer/murmurhash2_gc":330,"./effect-base":54,"./utils":61}],57:[function(C$99t,C$99e,C$99i){"use strict";function C$99r(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99o(C$99i){return function(){var C$99t,C$99e=C$99n(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99n(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99n(C$99t){return(C$99n=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99i.__esModule=!0,C$99i.default=void 0;C$99t=function(C$99s){var C$99t,C$99e;C$99i=C$99s,(C$99t=C$99n).prototype=Object.create(C$99i.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99i,C$99o(C$99n);function C$99n(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99s.call(this)||this;return C$99r._techniques=[],C$99r._asset=null,C$99r.init(C$99t,C$99e,C$99i,C$99n,!0),C$99r}C$99t=C$99n,(C$99i=[{key:"technique",get:function(){return this._technique}},{key:"passes",get:function(){return this._technique.passes}}])&&C$99r(C$99t.prototype,C$99i),C$99e&&C$99r(C$99t,C$99e);var C$99i=C$99n.prototype;return C$99i.init=function(C$99t,C$99e,C$99i,C$99n,C$99r){this._name=C$99t,this._techniques=C$99e,this._technique=C$99e[C$99i],this._asset=C$99n},C$99i.switchTechnique=function(C$99t){C$99t>=this._techniques.length?cc.warn("Can not switch to technique with index ["+C$99t+"]"):this._technique=this._techniques[C$99t]},C$99i.clear=function(){this._techniques=[]},C$99i.clone=function(){for(var C$99t=[],C$99e=0;C$99e<this._techniques.length;C$99e++)C$99t.push(this._techniques[C$99e].clone());var C$99i=this._techniques.indexOf(this._technique);return new C$99n(this._name,C$99t,C$99i,this._asset)},C$99n}(((C$99t=C$99t("./effect-base"))&&C$99t.__esModule?C$99t:{default:C$99t}).default);C$99i.default=C$99t,cc.Effect=C$99t,C$99e.exports=C$99i.default},{"./effect-base":54}],58:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCEffectAsset"),C$99t("./CCMaterial"),C$99t("./material-variant")},{"./CCEffectAsset":52,"./CCMaterial":53,"./material-variant":60}],59:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99r,C$99n,C$99s=C$99o(C$99t("./utils")),C$99t=C$99o(C$99t("../../utils/pool"));function C$99o(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99h(C$99i){return function(){var C$99t,C$99e=C$99a(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99a(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99a(C$99t){return(C$99a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}function C$99c(){for(var C$99t,C$99e=arguments.length,C$99i=new Array(C$99e),C$99n=0;C$99n<C$99e;C$99n++)C$99i[C$99n]=arguments[C$99n];return(C$99t=C$99r.call.apply(C$99r,[this].concat(C$99i))||this).enabled=!1,C$99t._pool={},C$99t}C$99r=C$99t.default,C$99l=C$99r,(C$99n=C$99c).prototype=Object.create(C$99l.prototype),(C$99n.prototype.constructor=C$99n).__proto__=C$99l,C$99h(C$99c),(C$99n=C$99c.prototype).get=function(C$99t,C$99e){var C$99i,C$99n,C$99r=this._pool;if(C$99t instanceof cc.MaterialVariant){if(!C$99t._owner)return C$99t._owner=C$99e,C$99t;if(C$99t._owner===C$99e)return C$99t;C$99t=C$99t.material}return!this.enabled||C$99r[C$99i=C$99t.effectAsset._uuid]&&(C$99n=C$99s.default.serializeDefines(C$99t._effect._defines)+C$99s.default.serializeTechniques(C$99t._effect._techniques),C$99n=C$99r[C$99i][C$99n]&&C$99r[C$99i][C$99n].pop()),C$99n?this.count--:((C$99n=new cc.MaterialVariant(C$99t))._name=C$99t._name+" (Instance)",C$99n._uuid=C$99t._uuid),C$99n._owner=C$99e,C$99n},C$99n.put=function(C$99t){var C$99e,C$99i,C$99n;this.enabled&&C$99t._owner&&((C$99e=this._pool)[C$99i=C$99t.effectAsset._uuid]||(C$99e[C$99i]={}),C$99n=C$99s.default.serializeDefines(C$99t._effect._defines)+C$99s.default.serializeTechniques(C$99t._effect._techniques),C$99e[C$99i][C$99n]||(C$99e[C$99i][C$99n]=[]),this.count>this.maxSize||(this._clean(C$99t),C$99e[C$99i][C$99n].push(C$99t),this.count++))},C$99n.clear=function(){this._pool={},this.count=0},C$99n._clean=function(C$99t){C$99t._owner=null};var C$99l=new C$99c;C$99t.default.register("material",C$99l),C$99i.default=C$99l,C$99e.exports=C$99i.default},{"../../utils/pool":266,"./utils":61}],60:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99s=C$99n(C$99t("./CCMaterial")),C$99o=C$99n(C$99t("./effect-variant")),C$99a=C$99n(C$99t("./material-pool"));function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99c(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99l(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99t=(0,cc._decorator.ccclass)("cc.MaterialVariant")(C$99t=function(C$99i){var C$99t,C$99e,C$99n;C$99e=C$99i,(C$99t=C$99r).prototype=Object.create(C$99e.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99e,C$99l(C$99r);function C$99r(C$99t){var C$99e=C$99i.call(this)||this;return C$99e._owner=null,C$99e._material=null,C$99e.init(C$99t),C$99e}return C$99r.createWithBuiltin=function(C$99t,C$99e){return C$99r.create(C$99s.default.getBuiltinMaterial(C$99t),C$99e)},C$99r.create=function(C$99t,C$99e){return C$99t?C$99a.default.get(C$99t,C$99e):null},C$99t=C$99r,(C$99e=[{key:"uuid",get:function(){return this._material.uuid}},{key:"owner",get:function(){return this._owner}},{key:"material",get:function(){return this._material}}])&&C$99c(C$99t.prototype,C$99e),C$99n&&C$99c(C$99t,C$99n),C$99r.prototype.init=function(C$99t){this._effect=new C$99o.default(C$99t.effect),this._effectAsset=C$99t._effectAsset,this._material=C$99t},C$99r}(C$99s.default))||C$99t;C$99i.default=C$99t,cc.MaterialVariant=C$99t,C$99e.exports=C$99i.default},{"./CCMaterial":53,"./effect-variant":56,"./material-pool":59}],61:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99s=(C$99t=C$99t("../../../renderer/enums"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99o(C$99t){var C$99e,C$99i="";for(C$99e in C$99t)C$99i+=C$99e+C$99t[C$99e];return C$99i}function C$99a(C$99t){var C$99e,C$99i="";for(C$99e in C$99t){var C$99n=C$99t[C$99e],C$99r=C$99n.value;C$99r&&(C$99n.type===C$99s.default.PARAM_TEXTURE_2D||C$99n.type===C$99s.default.PARAM_TEXTURE_CUBE?C$99i+=C$99r._id+";":C$99i+=C$99r.toString()+";")}return C$99i}C$99i.default={serializeDefines:C$99o,serializePasses:function(C$99t){for(var C$99e,C$99i,C$99n,C$99r="",C$99s=0;C$99s<C$99t.length;C$99s++)C$99r+=(C$99e=C$99t[C$99s],C$99n=C$99i=void 0,C$99n=C$99e._programName+C$99e._cullMode,C$99e._blend&&(C$99n+=C$99e._blendEq+C$99e._blendAlphaEq+C$99e._blendSrc+C$99e._blendDst+C$99e._blendSrcAlpha+C$99e._blendDstAlpha+C$99e._blendColor),C$99e._depthTest&&(C$99n+=C$99e._depthWrite+C$99e._depthFunc),C$99e._stencilTest&&(C$99n+=C$99e._stencilFuncFront+C$99e._stencilRefFront+C$99e._stencilMaskFront+C$99e._stencilFailOpFront+C$99e._stencilZFailOpFront+C$99e._stencilZPassOpFront+C$99e._stencilWriteMaskFront+C$99e._stencilFuncBack+C$99e._stencilRefBack+C$99e._stencilMaskBack+C$99e._stencilFailOpBack+C$99e._stencilZFailOpBack+C$99e._stencilZPassOpBack+C$99e._stencilWriteMaskBack),C$99i||(C$99n+=C$99a(C$99e._properties)),C$99n+=C$99o(C$99e._defines));return C$99r},serializeUniforms:C$99a},C$99e.exports=C$99i.default},{"../../../renderer/enums":307}],62:[function(C$99t,C$99e,C$99i){"use strict";C$99t("../CCNode").EventType;var C$99x=56,C$99b=7,C$99o=cc.Enum({ONCE:0,ON_WINDOW_RESIZE:1,ALWAYS:2});var C$99A=cc.Vec2.ZERO,C$99C=cc.Vec2.ONE;function C$99a(C$99t,C$99e){var C$99h,C$99u,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99_,C$99d=C$99e._target,C$99f=(C$99d?function(C$99t,C$99h,C$99e,C$99i){for(var C$99n=C$99t._parent.scaleX,C$99r=C$99t._parent.scaleY,C$99s=0,C$99o=0,C$99a=C$99t._parent;;){if(C$99s+=C$99a.x,C$99o+=C$99a.y,!(C$99a=C$99a._parent))return C$99e.x=C$99e.y=0,C$99i.x=C$99i.y=1;if(C$99a===C$99h)break;var C$99c=C$99a.scaleX,C$99l=C$99a.scaleY;C$99s*=C$99c,C$99o*=C$99l,C$99n*=C$99c,C$99r*=C$99l}C$99i.x=0!==C$99n?1/C$99n:1,C$99i.y=0!==C$99r?1/C$99r:1,C$99e.x=-C$99s,C$99e.y=-C$99o}(C$99t,C$99h=C$99d,C$99u=C$99A,C$99i=C$99C):C$99h=C$99t._parent,(C$99f=C$99h)instanceof cc.Scene?cc.visibleRect:C$99f._contentSize),C$99p=C$99h._anchorPoint,C$99m=C$99h instanceof cc.Scene,C$99y=C$99t.x,C$99g=C$99t.y,C$99v=C$99t._anchorPoint;C$99e._alignFlags&C$99x&&(C$99r=C$99f.width,C$99a=C$99m?(C$99o=cc.visibleRect.left.x,cc.visibleRect.right.x):(C$99o=-C$99p.x*C$99r)+C$99r,C$99o+=C$99e._isAbsLeft?C$99e._left:C$99e._left*C$99r,C$99a-=C$99e._isAbsRight?C$99e._right:C$99e._right*C$99r,C$99d&&(C$99o=(C$99o+=C$99u.x)*C$99i.x,C$99a=(C$99a+=C$99u.x)*C$99i.x),C$99c=C$99v.x,(C$99s=C$99t.scaleX)<0&&(C$99c=1-C$99c,C$99s=-C$99s),C$99y=C$99e.isStretchWidth?(C$99l=C$99a-C$99o,0!==C$99s&&(C$99t.width=C$99l/C$99s),C$99o+C$99c*C$99l):(C$99l=C$99t.width*C$99s,C$99e.isAlignHorizontalCenter?(C$99s=C$99e._isAbsHorizontalCenter?C$99e._horizontalCenter:C$99e._horizontalCenter*C$99r,C$99r=(.5-C$99p.x)*C$99f.width,C$99d&&(C$99s*=C$99i.x,C$99r=(C$99r+=C$99u.x)*C$99i.x),C$99r+(C$99c-.5)*C$99l+C$99s):C$99e.isAlignLeft?C$99o+C$99c*C$99l:C$99a+(C$99c-1)*C$99l)),C$99e._alignFlags&C$99b&&(C$99r=C$99f.height,C$99s=C$99m?(C$99n=cc.visibleRect.bottom.y,cc.visibleRect.top.y):(C$99n=-C$99p.y*C$99r)+C$99r,C$99n+=C$99e._isAbsBottom?C$99e._bottom:C$99e._bottom*C$99r,C$99s-=C$99e._isAbsTop?C$99e._top:C$99e._top*C$99r,C$99d&&(C$99n=(C$99n+=C$99u.y)*C$99i.y,C$99s=(C$99s+=C$99u.y)*C$99i.y),C$99o=C$99v.y,(C$99a=C$99t.scaleY)<0&&(C$99o=1-C$99o,C$99a=-C$99a),C$99g=C$99e.isStretchHeight?(C$99_=C$99s-C$99n,0!==C$99a&&(C$99t.height=C$99_/C$99a),C$99n+C$99o*C$99_):(C$99_=C$99t.height*C$99a,C$99e.isAlignVerticalCenter?(C$99c=C$99e._isAbsVerticalCenter?C$99e._verticalCenter:C$99e._verticalCenter*C$99r,C$99l=(.5-C$99p.y)*C$99f.height,C$99d&&(C$99c*=C$99i.y,C$99l=(C$99l+=C$99u.y)*C$99i.y),C$99l+(C$99o-.5)*C$99_+C$99c):C$99e.isAlignBottom?C$99n+C$99o*C$99_:C$99s+(C$99o-1)*C$99_)),C$99t.setPosition(C$99y,C$99g)}function C$99r(){var C$99t=cc.director.getScene();if(C$99t){if(C$99n.isAligning=!0,C$99n._nodesOrderDirty)C$99c.length=0,function C$99t(C$99e){for(var C$99i=C$99e._widget,C$99n=(C$99i&&(C$99a(C$99e,C$99i),C$99i.alignMode!==C$99o.ALWAYS?C$99i.enabled=!1:C$99c.push(C$99i)),C$99e._children),C$99r=0;C$99r<C$99n.length;C$99r++){var C$99s=C$99n[C$99r];C$99s._active&&C$99t(C$99s)}}(C$99t),C$99n._nodesOrderDirty=!1;else{var C$99e,C$99i=C$99n._activeWidgetsIterator;for(C$99i.i=0;C$99i.i<C$99c.length;++C$99i.i)C$99a((C$99e=C$99c[C$99i.i]).node,C$99e)}C$99n.isAligning=!1}}var C$99c=[];var C$99n=cc._widgetManager=C$99e.exports={_AlignFlags:{TOP:1,MID:2,BOT:4,LEFT:8,CENTER:16,RIGHT:32},isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new cc.js.array.MutableForwardIterator(C$99c),init:function(C$99t){C$99t.on(cc.Director.EVENT_AFTER_UPDATE,C$99r);C$99t=this.onResized.bind(this);window.addEventListener("resize",C$99t),window.addEventListener("orientationchange",C$99t)},add:function(C$99t){C$99t.node._widget=C$99t,this._nodesOrderDirty=!0},remove:function(C$99t){C$99t.node._widget=null,this._activeWidgetsIterator.remove(C$99t)},onResized:function(){var C$99t=cc.director.getScene();C$99t&&this.refreshWidgetOnResized(C$99t)},refreshWidgetOnResized:function(C$99t){for(var C$99e=cc.Node.isNode(C$99t)&&C$99t.getComponent(cc.Widget),C$99i=(C$99e&&C$99e.alignMode===C$99o.ON_WINDOW_RESIZE&&(C$99e.enabled=!0),C$99t._children),C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n];this.refreshWidgetOnResized(C$99r)}},updateAlignment:function C$99t(C$99e){var C$99i=C$99e._parent,C$99n=(cc.Node.isNode(C$99i)&&C$99t(C$99i),C$99e._widget||C$99e.getComponent(cc.Widget));C$99n&&C$99i&&C$99a(C$99e,C$99n)},AlignMode:C$99o}},{"../CCNode":30}],63:[function(C$99t,C$99h,C$99u){"use strict";var C$99s=C$99t("../value-types"),C$99_=C$99t("../geom-utils"),C$99d=C$99t("../utils/affine-transform"),C$99n=C$99t("../renderer/index"),C$99f=C$99t("../renderer/render-flow"),C$99i=C$99t("../CCGame"),C$99p=null,C$99p=C$99t("../../renderer/scene/camera"),C$99o=cc.mat4(),C$99r=cc.mat4(),C$99e=cc.v3(),C$99m=cc.v3(),C$99a=cc.v3(),C$99c=[],C$99l=null;function C$99y(){var C$99t,C$99e;C$99l&&(C$99t=C$99l.getNode(),C$99e=cc.game.canvas,C$99t.z=C$99e.height/1.1566,C$99t.x=C$99e.width/2,C$99t.y=C$99e.height/2)}var C$99t=cc.Enum({COLOR:1,DEPTH:2,STENCIL:4}),C$99g=cc.Enum({OPAQUE:1,TRANSPARENT:2}),C$99t=cc.Class({name:"cc.Camera",extends:cc.Component,ctor:function(){var C$99t;C$99i.renderType!==C$99i.RENDER_TYPE_CANVAS?((C$99t=new C$99p).setStages(["opaque"]),C$99t.dirty=!0,this._inited=!1,this._camera=C$99t):this._inited=!0},editor:!1,properties:{_cullingMask:4294967295,_clearFlags:C$99t.DEPTH|C$99t.STENCIL,_backgroundColor:cc.color(0,0,0,255),_depth:0,_zoomRatio:1,_targetTexture:null,_fov:60,_orthoSize:10,_nearClip:1,_farClip:4096,_ortho:!0,_rect:cc.rect(0,0,1,1),_renderStages:1,_alignWithScreen:!0,zoomRatio:{get:function(){return this._zoomRatio},set:function(C$99t){this._zoomRatio=C$99t},tooltip:!1},fov:{get:function(){return this._fov},set:function(C$99t){this._fov=C$99t},tooltip:!1},orthoSize:{get:function(){return this._orthoSize},set:function(C$99t){this._orthoSize=C$99t},tooltip:!1},nearClip:{get:function(){return this._nearClip},set:function(C$99t){this._nearClip=C$99t,this._updateClippingpPlanes()},tooltip:!1},farClip:{get:function(){return this._farClip},set:function(C$99t){this._farClip=C$99t,this._updateClippingpPlanes()},tooltip:!1},ortho:{get:function(){return this._ortho},set:function(C$99t){this._ortho=C$99t,this._updateProjection()},tooltip:!1},rect:{get:function(){return this._rect},set:function(C$99t){this._rect=C$99t,this._updateRect()},tooltip:!1},cullingMask:{get:function(){return this._cullingMask},set:function(C$99t){this._cullingMask=C$99t,this._updateCameraMask()},tooltip:!1},clearFlags:{get:function(){return this._clearFlags},set:function(C$99t){this._clearFlags=C$99t,this._camera&&this._camera.setClearFlags(C$99t)},tooltip:!1},backgroundColor:{get:function(){return this._backgroundColor},set:function(C$99t){this._backgroundColor.equals(C$99t)||(this._backgroundColor.set(C$99t),this._updateBackgroundColor())},tooltip:!1},depth:{get:function(){return this._depth},set:function(C$99t){this._depth=C$99t,this._camera&&this._camera.setPriority(C$99t)},tooltip:!1},targetTexture:{get:function(){return this._targetTexture},set:function(C$99t){this._targetTexture=C$99t,this._updateTargetTexture()},tooltip:!1},renderStages:{get:function(){return this._renderStages},set:function(C$99t){this._renderStages=C$99t,this._updateStages()},tooltip:!1},alignWithScreen:{get:function(){return this._alignWithScreen},set:function(C$99t){this._alignWithScreen=C$99t}},_is3D:{get:function(){return this.node&&this.node._is3DNode}}},statics:{main:null,cameras:C$99c,ClearFlags:C$99t,findCamera:function(C$99t){for(var C$99e=0,C$99i=C$99c.length;C$99e<C$99i;C$99e++){var C$99n=C$99c[C$99e];if(C$99n.containsNode(C$99t))return C$99n}return null},_findRendererCamera:function(C$99t){for(var C$99e=C$99n.scene._cameras,C$99i=0;C$99i<C$99e._count;C$99i++)if(C$99e._data[C$99i]._cullingMask&C$99t._cullingMask)return C$99e._data[C$99i];return null},_setupDebugCamera:function(){var C$99t,C$99e;C$99l||C$99i.renderType!==C$99i.RENDER_TYPE_CANVAS&&(C$99t=new C$99p,(C$99l=C$99t).setStages(["opaque"]),C$99t.setFov(60*Math.PI/180),C$99t.setNear(.1),C$99t.setFar(4096),C$99t.dirty=!0,C$99t.cullingMask=1<<cc.Node.BuiltinGroupIndex.DEBUG,C$99t.setPriority(cc.macro.MAX_ZINDEX),C$99t.setClearFlags(0),C$99t.setColor(0,0,0,0),C$99e=new cc.Node,C$99t.setNode(C$99e),C$99y(),cc.view.on("design-resolution-changed",C$99y),C$99n.scene.addCamera(C$99t))}},_updateCameraMask:function(){var C$99t;this._camera&&(C$99t=this._cullingMask&~(1<<cc.Node.BuiltinGroupIndex.DEBUG),this._camera.cullingMask=C$99t)},_updateBackgroundColor:function(){var C$99t;this._camera&&(C$99t=this._backgroundColor,this._camera.setColor(C$99t.r/255,C$99t.g/255,C$99t.b/255,C$99t.a/255))},_updateTargetTexture:function(){var C$99t;this._camera&&(C$99t=this._targetTexture,this._camera.setFrameBuffer(C$99t?C$99t._framebuffer:null))},_updateClippingpPlanes:function(){this._camera&&(this._camera.setNear(this._nearClip),this._camera.setFar(this._farClip))},_updateProjection:function(){var C$99t;this._camera&&(C$99t=this._ortho?1:0,this._camera.setType(C$99t))},_updateRect:function(){var C$99t;this._camera&&(C$99t=this._rect,this._camera.setRect(C$99t.x,C$99t.y,C$99t.width,C$99t.height))},_updateStages:function(){var C$99t=this._renderStages,C$99e=[];C$99t&C$99g.OPAQUE&&C$99e.push("opaque"),C$99t&C$99g.TRANSPARENT&&C$99e.push("transparent"),this._camera.setStages(C$99e)},_init:function(){var C$99t;this._inited||(this._inited=!0,(C$99t=this._camera)&&(C$99t.setNode(this.node),C$99t.setClearFlags(this._clearFlags),C$99t.setPriority(this._depth),this._updateBackgroundColor(),this._updateCameraMask(),this._updateTargetTexture(),this._updateClippingpPlanes(),this._updateProjection(),this._updateStages(),this._updateRect(),this.beforeDraw()))},onLoad:function(){this._init()},onEnable:function(){C$99i.renderType!==C$99i.RENDER_TYPE_CANVAS&&(cc.director.on(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),C$99n.scene.addCamera(this._camera)),C$99c.push(this)},onDisable:function(){C$99i.renderType!==C$99i.RENDER_TYPE_CANVAS&&(cc.director.off(cc.Director.EVENT_BEFORE_DRAW,this.beforeDraw,this),C$99n.scene.removeCamera(this._camera)),cc.js.array.remove(C$99c,this)},getScreenToWorldMatrix2D:function(C$99t){return this.getWorldToScreenMatrix2D(C$99t),C$99s.Mat4.invert(C$99t,C$99t),C$99t},getWorldToScreenMatrix2D:function(C$99t){this.node.getWorldRT(C$99o);var C$99e=this.zoomRatio,C$99i=C$99o.m,C$99e=(C$99i[0]*=C$99e,C$99i[1]*=C$99e,C$99i[4]*=C$99e,C$99i[5]*=C$99e,C$99i[12]),C$99n=C$99i[13],C$99r=cc.visibleRect.center;return C$99i[12]=C$99r.x-(C$99i[0]*C$99e+C$99i[4]*C$99n),C$99i[13]=C$99r.y-(C$99i[1]*C$99e+C$99i[5]*C$99n),C$99t!==C$99o&&C$99s.Mat4.copy(C$99t,C$99o),C$99t},getScreenToWorldPoint:function(C$99t,C$99e){return this.node.is3DNode?(C$99e=C$99e||new cc.Vec3,this._camera.screenToWorld(C$99e,C$99t,cc.visibleRect.width,cc.visibleRect.height)):(C$99e=C$99e||new cc.Vec2,this.getScreenToWorldMatrix2D(C$99o),C$99s.Vec2.transformMat4(C$99e,C$99t,C$99o)),C$99e},getWorldToScreenPoint:function(C$99t,C$99e){return this.node.is3DNode?(C$99e=C$99e||new cc.Vec3,this._camera.worldToScreen(C$99e,C$99t,cc.visibleRect.width,cc.visibleRect.height)):(C$99e=C$99e||new cc.Vec2,this.getWorldToScreenMatrix2D(C$99o),C$99s.Vec2.transformMat4(C$99e,C$99t,C$99o)),C$99e},getRay:function(C$99t){return cc.geomUtils?(C$99s.Vec3.set(C$99a,C$99t.x,C$99t.y,1),this._camera.screenToWorld(C$99m,C$99a,cc.visibleRect.width,cc.visibleRect.height),this.ortho?(C$99s.Vec3.set(C$99a,C$99t.x,C$99t.y,-1),this._camera.screenToWorld(C$99e,C$99a,cc.visibleRect.width,cc.visibleRect.height)):this.node.getWorldPosition(C$99e),C$99_.Ray.fromPoints(new C$99_.Ray,C$99e,C$99m)):C$99t},containsNode:function(C$99t){return C$99t._cullingMask&this.cullingMask},render:function(C$99t){if(!(C$99t=C$99t||cc.director.getScene()))return null;this.node.getWorldMatrix(C$99o),this.beforeDraw(),C$99f.render(C$99t),C$99n._forward.renderCamera(this._camera,C$99n.scene)},_onAlignWithScreen:function(){var C$99t=cc.game.canvas.height/cc.view._scaleY,C$99e=(this._targetTexture&&(C$99t=cc.visibleRect.height),this._fov*cc.macro.RAD);this.node.z=C$99t/(2*Math.tan(C$99e/2)),C$99e=2*Math.atan(Math.tan(C$99e/2)/this.zoomRatio),this._camera.setFov(C$99e),this._camera.setOrthoHeight(C$99t/2/this.zoomRatio),this.node.setRotation(0,0,0,1)},beforeDraw:function(){var C$99t;this._camera&&(this._alignWithScreen?this._onAlignWithScreen():(C$99t=this._fov*cc.macro.RAD,C$99t=2*Math.atan(Math.tan(C$99t/2)/this.zoomRatio),this._camera.setFov(C$99t),this._camera.setOrthoHeight(this._orthoSize/this.zoomRatio)),this._camera.dirty=!0)}});cc.js.mixin(C$99t.prototype,{getNodeToCameraTransform:function(C$99t){var C$99e=C$99d.identity();return C$99t.getWorldMatrix(C$99r),this.containsNode(C$99t)&&(this.getWorldToCameraMatrix(C$99o),C$99s.Mat4.mul(C$99r,C$99r,C$99o)),C$99d.fromMat4(C$99e,C$99r),C$99e},getCameraToWorldPoint:function(C$99t,C$99e){return this.getScreenToWorldPoint(C$99t,C$99e)},getWorldToCameraPoint:function(C$99t,C$99e){return this.getWorldToScreenPoint(C$99t,C$99e)},getCameraToWorldMatrix:function(C$99t){return this.getScreenToWorldMatrix2D(C$99t)},getWorldToCameraMatrix:function(C$99t){return this.getWorldToScreenMatrix2D(C$99t)}}),C$99h.exports=cc.Camera=C$99t},{"../../renderer/scene/camera":332,"../CCGame":29,"../geom-utils":123,"../renderer/index":220,"../renderer/render-flow":221,"../utils/affine-transform":254,"../value-types":279}],64:[function(C$99t,C$99e,C$99i){"use strict";cc.Collider.Box=cc.Class({properties:{_offset:cc.v2(0,0),_size:cc.size(100,100),offset:{tooltip:!1,get:function(){return this._offset},set:function(C$99t){this._offset=C$99t},type:cc.Vec2},size:{tooltip:!1,get:function(){return this._size},set:function(C$99t){this._size.width=C$99t.width<0?0:C$99t.width,this._size.height=C$99t.height<0?0:C$99t.height},type:cc.Size}},resetInEditor:!1});var C$99n=cc.Class({name:"cc.BoxCollider",extends:cc.Collider,mixins:[cc.Collider.Box],editor:!1});cc.BoxCollider=C$99e.exports=C$99n},{}],65:[function(C$99t,C$99e,C$99i){"use strict";cc.Collider.Circle=cc.Class({properties:{_offset:cc.v2(0,0),_radius:50,offset:{get:function(){return this._offset},set:function(C$99t){this._offset=C$99t},type:cc.Vec2},radius:{tooltip:!1,get:function(){return this._radius},set:function(C$99t){this._radius=C$99t<0?0:C$99t}}},resetInEditor:!1});var C$99n=cc.Class({name:"cc.CircleCollider",extends:cc.Collider,mixins:[cc.Collider.Circle],editor:!1});cc.CircleCollider=C$99e.exports=C$99n},{}],66:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.Collider",extends:cc.Component,properties:{editing:{default:!1,serializable:!1,tooltip:!1},tag:{tooltip:!1,default:0,range:[0,1e7],type:cc.Integer}},onDisable:function(){cc.director.getCollisionManager().removeCollider(this)},onEnable:function(){cc.director.getCollisionManager().addCollider(this)}});cc.Collider=C$99e.exports=C$99n},{}],67:[function(C$99t,C$99e,C$99i){"use strict";var C$99D=(C$99n=C$99t("../value-types/vec2"))&&C$99n.__esModule?C$99n:{default:C$99n};var C$99s=C$99t("./CCContact"),C$99h=C$99s.CollisionType,C$99o=C$99t("../CCNode").EventType,C$99L=new C$99D.default;var C$99n=cc.Class({mixins:[cc.EventTarget],properties:{enabled:!1,enabledDrawBoundingBox:!1},ctor:function(){this._contacts=[],this._colliders=[],this._debugDrawer=null,this._enabledDebugDraw=!1,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this)},update:function(C$99t){if(this.enabled){for(var C$99e=this._colliders,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)this.updateCollider(C$99e[C$99i]);var C$99r=this._contacts,C$99s=[];for(C$99i=0,C$99n=C$99r.length;C$99i<C$99n;C$99i++){var C$99o=C$99r[C$99i].updateState();C$99o!==C$99h.None&&C$99s.push([C$99o,C$99r[C$99i]])}for(C$99i=0,C$99n=C$99s.length;C$99i<C$99n;C$99i++){var C$99a=C$99s[C$99i];this._doCollide(C$99a[0],C$99a[1])}this.drawColliders()}},_doCollide:function(C$99t,C$99e){var C$99i;switch(C$99t){case C$99h.CollisionEnter:C$99i="onCollisionEnter";break;case C$99h.CollisionStay:C$99i="onCollisionStay";break;case C$99h.CollisionExit:C$99i="onCollisionExit"}for(var C$99n,C$99r=C$99e.collider1,C$99s=C$99e.collider2,C$99o=C$99r.node._components,C$99a=C$99s.node._components,C$99c=0,C$99l=C$99o.length;C$99c<C$99l;C$99c++)(C$99n=C$99o[C$99c])[C$99i]&&C$99n[C$99i](C$99s,C$99r);for(C$99c=0,C$99l=C$99a.length;C$99c<C$99l;C$99c++)(C$99n=C$99a[C$99c])[C$99i]&&C$99n[C$99i](C$99r,C$99s)},shouldCollide:function(C$99t,C$99e){var C$99t=C$99t.node,C$99e=C$99e.node,C$99i=cc.game.collisionMatrix;return C$99t!==C$99e&&C$99i[C$99t.groupIndex][C$99e.groupIndex]},initCollider:function(C$99t){var C$99e;C$99t.world||((C$99e=C$99t.world={}).aabb=cc.rect(),C$99e.preAabb=cc.rect(),C$99e.matrix=cc.mat4(),C$99e.radius=0,C$99t instanceof cc.BoxCollider?(C$99e.position=null,C$99e.points=[cc.v2(),cc.v2(),cc.v2(),cc.v2()]):C$99t instanceof cc.PolygonCollider?(C$99e.position=null,C$99e.points=C$99t.points.map(function(C$99t){return cc.v2(C$99t.x,C$99t.y)})):C$99t instanceof cc.CircleCollider&&(C$99e.position=cc.v2(),C$99e.points=null))},updateCollider:function(C$99t){var C$99e,C$99h,C$99i,C$99u,C$99_,C$99d,C$99f=C$99t.offset,C$99n=C$99t.world,C$99r=C$99n.aabb,C$99p=C$99n.matrix,C$99s=(C$99t.node.getWorldMatrix(C$99p),C$99n.preAabb);if(C$99s.x=C$99r.x,C$99s.y=C$99r.y,C$99s.width=C$99r.width,C$99s.height=C$99r.height,C$99t instanceof cc.BoxCollider){var C$99s=C$99t.size,C$99s=(C$99r.x=C$99f.x-C$99s.width/2,C$99r.y=C$99f.y-C$99s.height/2,C$99r.width=C$99s.width,C$99r.height=C$99s.height,C$99n.points),C$99m=C$99s[0],C$99y=C$99s[1],C$99g=C$99s[2],C$99s=C$99s[3],C$99v=(C$99e=C$99p,C$99C=C$99m,C$99a=C$99y,C$99A=C$99g,C$99h=C$99s,C$99i=(C$99o=C$99r).x,C$99c=C$99o.y,C$99v=C$99o.width,C$99o=C$99o.height,C$99u=(C$99e=C$99e.m)[0],C$99_=C$99e[1],C$99x=C$99e[4],C$99b=C$99e[5],C$99d=C$99u*C$99i+C$99x*C$99c+C$99e[12],C$99i=C$99_*C$99i+C$99b*C$99c+C$99e[13],C$99c=C$99u*C$99v,C$99e=C$99_*C$99v,C$99u=C$99x*C$99o,C$99_=C$99b*C$99o,C$99a.x=C$99d,C$99a.y=C$99i,C$99A.x=C$99c+C$99d,C$99A.y=C$99e+C$99i,C$99C.x=C$99u+C$99d,C$99C.y=C$99_+C$99i,C$99h.x=C$99c+C$99u+C$99d,C$99h.y=C$99e+C$99_+C$99i,Math.min(C$99m.x,C$99y.x,C$99g.x,C$99s.x)),C$99x=Math.min(C$99m.y,C$99y.y,C$99g.y,C$99s.y),C$99b=Math.max(C$99m.x,C$99y.x,C$99g.x,C$99s.x),C$99o=Math.max(C$99m.y,C$99y.y,C$99g.y,C$99s.y);C$99r.x=C$99v,C$99r.y=C$99x,C$99r.width=C$99b-C$99v,C$99r.height=C$99o-C$99x}else if(C$99t instanceof cc.CircleCollider){C$99D.default.transformMat4(C$99L,C$99t.offset,C$99p),C$99n.position.x=C$99L.x,C$99n.position.y=C$99L.y;var C$99a=C$99p.m,C$99A=C$99a[12],C$99C=C$99a[13],C$99c=(C$99a[12]=C$99a[13]=0,C$99L.x=C$99t.radius,C$99L.y=0,C$99D.default.transformMat4(C$99L,C$99L,C$99p),Math.sqrt(C$99L.x*C$99L.x+C$99L.y*C$99L.y));C$99n.radius=C$99c,C$99r.x=C$99n.position.x-C$99c,C$99r.y=C$99n.position.y-C$99c,C$99r.width=2*C$99c,C$99r.height=2*C$99c,C$99a[12]=C$99A,C$99a[13]=C$99C}else if(C$99t instanceof cc.PolygonCollider){for(var C$99S=C$99t.points,C$99T=C$99n.points,C$99w=(C$99T.length=C$99S.length,1e6),C$99E=1e6,C$99M=-1e6,C$99I=-1e6,C$99l=0,C$99B=C$99S.length;C$99l<C$99B;C$99l++){C$99T[C$99l]||(C$99T[C$99l]=cc.v2()),C$99L.x=C$99S[C$99l].x+C$99f.x,C$99L.y=C$99S[C$99l].y+C$99f.y,C$99D.default.transformMat4(C$99L,C$99L,C$99p);var C$99R=C$99L.x,C$99P=C$99L.y;C$99M<(C$99T[C$99l].x=C$99R)&&(C$99M=C$99R),C$99R<C$99w&&(C$99w=C$99R),C$99I<(C$99T[C$99l].y=C$99P)&&(C$99I=C$99P),C$99P<C$99E&&(C$99E=C$99P)}C$99r.x=C$99w,C$99r.y=C$99E,C$99r.width=C$99M-C$99w,C$99r.height=C$99I-C$99E}},addCollider:function(C$99t){var C$99e=this._colliders;if(-1===C$99e.indexOf(C$99t)){for(var C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];this.shouldCollide(C$99t,C$99r)&&(C$99r=new C$99s(C$99t,C$99r),this._contacts.push(C$99r))}C$99e.push(C$99t),this.initCollider(C$99t)}C$99t.node.on(C$99o.GROUP_CHANGED,this.onNodeGroupChanged,this)},removeCollider:function(C$99t){var C$99e=this._colliders,C$99i=C$99e.indexOf(C$99t);if(0<=C$99i){C$99e.splice(C$99i,1);for(var C$99n=this._contacts,C$99r=C$99n.length-1;0<=C$99r;C$99r--){var C$99s=C$99n[C$99r];C$99s.collider1!==C$99t&&C$99s.collider2!==C$99t||(C$99s.touching&&this._doCollide(C$99h.CollisionExit,C$99s),C$99n.splice(C$99r,1))}C$99t.node.off(C$99o.GROUP_CHANGED,this.onNodeGroupChanged,this)}else cc.errorID(6600)},onNodeGroupChanged:function(C$99t){for(var C$99e=C$99t.getComponents(cc.Collider),C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];cc.PhysicsCollider&&C$99r instanceof cc.PhysicsCollider||(this.removeCollider(C$99r),this.addCollider(C$99r))}},drawColliders:function(){if(this._enabledDebugDraw){this._checkDebugDrawValid();for(var C$99t=this._debugDrawer,C$99e=(C$99t.clear(),this._colliders),C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99t.strokeColor=cc.Color.WHITE,C$99r instanceof cc.BoxCollider||C$99r instanceof cc.PolygonCollider){var C$99s=C$99r.world.points;if(0<C$99s.length){C$99t.moveTo(C$99s[0].x,C$99s[0].y);for(var C$99o=1;C$99o<C$99s.length;C$99o++)C$99t.lineTo(C$99s[C$99o].x,C$99s[C$99o].y);C$99t.close(),C$99t.stroke()}}else C$99r instanceof cc.CircleCollider&&(C$99t.circle(C$99r.world.position.x,C$99r.world.position.y,C$99r.world.radius),C$99t.stroke());this.enabledDrawBoundingBox&&(C$99r=C$99r.world.aabb,C$99t.strokeColor=cc.Color.BLUE,C$99t.moveTo(C$99r.xMin,C$99r.yMin),C$99t.lineTo(C$99r.xMin,C$99r.yMax),C$99t.lineTo(C$99r.xMax,C$99r.yMax),C$99t.lineTo(C$99r.xMax,C$99r.yMin),C$99t.close(),C$99t.stroke())}}},_checkDebugDrawValid:function(){var C$99t;this._debugDrawer&&this._debugDrawer.isValid||((C$99t=new cc.Node("COLLISION_MANAGER_DEBUG_DRAW")).zIndex=cc.macro.MAX_ZINDEX,cc.game.addPersistRootNode(C$99t),this._debugDrawer=C$99t.addComponent(cc.Graphics))}});cc.js.getset(C$99n.prototype,"enabledDebugDraw",function(){return this._enabledDebugDraw},function(C$99t){C$99t&&!this._enabledDebugDraw?(this._checkDebugDrawValid(),this._debugDrawer.node.active=!0):!C$99t&&this._enabledDebugDraw&&(this._debugDrawer.clear(!0),this._debugDrawer.node.active=!1),this._enabledDebugDraw=C$99t}),cc.CollisionManager=C$99e.exports=C$99n},{"../CCNode":30,"../value-types/vec2":288,"./CCContact":68}],68:[function(C$99t,C$99e,C$99i){"use strict";var C$99o=C$99t("./CCIntersection"),C$99n=cc.Enum({None:0,CollisionEnter:1,CollisionStay:2,CollisionExit:3});function C$99r(C$99t,C$99e){this.collider1=C$99t,this.collider2=C$99e,this.touching=!1;var C$99i=C$99t instanceof cc.BoxCollider||C$99t instanceof cc.PolygonCollider,C$99n=C$99e instanceof cc.BoxCollider||C$99e instanceof cc.PolygonCollider,C$99r=C$99t instanceof cc.CircleCollider,C$99s=C$99e instanceof cc.CircleCollider;C$99i&&C$99n?this.testFunc=C$99o.polygonPolygon:C$99r&&C$99s?this.testFunc=C$99o.circleCircle:C$99i&&C$99s?this.testFunc=C$99o.polygonCircle:C$99r&&C$99n?(this.testFunc=C$99o.polygonCircle,this.collider1=C$99e,this.collider2=C$99t):cc.errorID(6601,cc.js.getClassName(C$99t),cc.js.getClassName(C$99e))}C$99r.prototype.test=function(){var C$99t=this.collider1.world,C$99e=this.collider2.world;return!!C$99t.aabb.intersects(C$99e.aabb)&&(this.testFunc===C$99o.polygonPolygon?this.testFunc(C$99t.points,C$99e.points):this.testFunc===C$99o.circleCircle?this.testFunc(C$99t,C$99e):this.testFunc===C$99o.polygonCircle&&this.testFunc(C$99t.points,C$99e))},C$99r.prototype.updateState=function(){var C$99t=this.test(),C$99e=C$99n.None;return C$99t&&!this.touching?(this.touching=!0,C$99e=C$99n.CollisionEnter):C$99t&&this.touching?C$99e=C$99n.CollisionStay:!C$99t&&this.touching&&(this.touching=!1,C$99e=C$99n.CollisionExit),C$99e},C$99r.CollisionType=C$99n,C$99e.exports=C$99r},{"./CCIntersection":69}],69:[function(C$99t,C$99e,C$99i){"use strict";var C$99n={};function C$99o(C$99t,C$99e,C$99i,C$99n){var C$99r=(C$99n.x-C$99i.x)*(C$99t.y-C$99i.y)-(C$99n.y-C$99i.y)*(C$99t.x-C$99i.x),C$99s=(C$99e.x-C$99t.x)*(C$99t.y-C$99i.y)-(C$99e.y-C$99t.y)*(C$99t.x-C$99i.x),C$99n=(C$99n.y-C$99i.y)*(C$99e.x-C$99t.x)-(C$99n.x-C$99i.x)*(C$99e.y-C$99t.y);if(0!=C$99n){C$99i=C$99r/C$99n,C$99e=C$99s/C$99n;if(0<=C$99i&&C$99i<=1&&0<=C$99e&&C$99e<=1)return!0}return!1}function C$99c(C$99t,C$99e,C$99i){for(var C$99n=C$99i.length,C$99r=0;C$99r<C$99n;++C$99r)if(C$99o(C$99t,C$99e,C$99i[C$99r],C$99i[(C$99r+1)%C$99n]))return!0;return!1}function C$99l(C$99t,C$99e){for(var C$99i=!1,C$99h=C$99t.x,C$99n=C$99t.y,C$99r=C$99e.length,C$99s=0,C$99o=C$99r-1;C$99s<C$99r;C$99o=C$99s++){var C$99a=C$99e[C$99s].x,C$99c=C$99e[C$99s].y,C$99u=C$99e[C$99o].x,C$99l=C$99e[C$99o].y;C$99n<C$99c!=C$99n<C$99l&&C$99h<(C$99u-C$99a)*(C$99n-C$99c)/(C$99l-C$99c)+C$99a&&(C$99i=!C$99i)}return C$99i}function C$99s(C$99t,C$99e,C$99i,C$99n){var C$99r=(C$99o=C$99i.x-C$99e.x)*C$99o+(C$99a=C$99i.y-C$99e.y)*C$99a,C$99s=((C$99t.x-C$99e.x)*C$99o+(C$99t.y-C$99e.y)*C$99a)/C$99r,C$99n=C$99n?!C$99r||C$99s<0?C$99e:1<C$99s?C$99i:cc.v2(C$99e.x+C$99s*C$99o,C$99e.y+C$99s*C$99a):cc.v2(C$99e.x+C$99s*C$99o,C$99e.y+C$99s*C$99a),C$99o=C$99t.x-C$99n.x,C$99a=C$99t.y-C$99n.y;return Math.sqrt(C$99o*C$99o+C$99a*C$99a)}C$99n.lineLine=C$99o,C$99n.lineRect=function(C$99t,C$99e,C$99i){var C$99n=new cc.Vec2(C$99i.x,C$99i.y),C$99r=new cc.Vec2(C$99i.x,C$99i.yMax),C$99s=new cc.Vec2(C$99i.xMax,C$99i.yMax),C$99i=new cc.Vec2(C$99i.xMax,C$99i.y);return!!C$99o(C$99t,C$99e,C$99n,C$99r)||(!!C$99o(C$99t,C$99e,C$99r,C$99s)||(!!C$99o(C$99t,C$99e,C$99s,C$99i)||!!C$99o(C$99t,C$99e,C$99i,C$99n)))},C$99n.linePolygon=C$99c,C$99n.rectRect=function(C$99t,C$99e){var C$99i=C$99t.x,C$99n=C$99t.y,C$99r=C$99t.x+C$99t.width,C$99t=C$99t.y+C$99t.height,C$99s=C$99e.x,C$99o=C$99e.y,C$99a=C$99e.x+C$99e.width,C$99e=C$99e.y+C$99e.height;return C$99i<=C$99a&&C$99s<=C$99r&&C$99n<=C$99e&&C$99o<=C$99t},C$99n.rectPolygon=function(C$99t,C$99e){var C$99i,C$99n,C$99r=new cc.Vec2(C$99t.x,C$99t.y),C$99s=new cc.Vec2(C$99t.x,C$99t.yMax),C$99o=new cc.Vec2(C$99t.xMax,C$99t.yMax),C$99a=new cc.Vec2(C$99t.xMax,C$99t.y);if(C$99c(C$99r,C$99s,C$99e))return!0;if(C$99c(C$99s,C$99o,C$99e))return!0;if(C$99c(C$99o,C$99a,C$99e))return!0;if(C$99c(C$99a,C$99r,C$99e))return!0;for(C$99i=0,C$99n=C$99e.length;C$99i<C$99n;++C$99i)if(C$99l(C$99e[C$99i],C$99t))return!0;return!!C$99l(C$99r,C$99e)||(!!C$99l(C$99s,C$99e)||(!!C$99l(C$99o,C$99e)||!!C$99l(C$99a,C$99e)))},C$99n.polygonPolygon=function(C$99t,C$99e){for(var C$99i=0,C$99n=C$99t.length;C$99i<C$99n;++C$99i)if(C$99c(C$99t[C$99i],C$99t[(C$99i+1)%C$99n],C$99e))return!0;for(C$99i=0,C$99n=C$99e.length;C$99i<C$99n;++C$99i)if(C$99l(C$99e[C$99i],C$99t))return!0;for(C$99i=0,C$99n=C$99t.length;C$99i<C$99n;++C$99i)if(C$99l(C$99t[C$99i],C$99e))return!0;return!1},C$99n.circleCircle=function(C$99t,C$99e){return C$99t.position.sub(C$99e.position).mag()<C$99t.radius+C$99e.radius},C$99n.polygonCircle=function(C$99t,C$99e){var C$99i=C$99e.position;if(C$99l(C$99i,C$99t))return!0;for(var C$99n=0,C$99r=C$99t.length;C$99n<C$99r;C$99n++)if(C$99s(C$99i,0===C$99n?C$99t[C$99t.length-1]:C$99t[C$99n-1],C$99t[C$99n],!0)<C$99e.radius)return!0;return!1},C$99n.pointInPolygon=C$99l,C$99n.pointLineDistance=C$99s,cc.Intersection=C$99e.exports=C$99n},{}],70:[function(C$99t,C$99e,C$99i){"use strict";cc.Collider.Polygon=cc.Class({properties:{threshold:{default:1,serializable:!1,visible:!1},_offset:cc.v2(0,0),offset:{get:function(){return this._offset},set:function(C$99t){this._offset=C$99t},type:cc.Vec2},points:{tooltip:!1,default:function(){return[cc.v2(-50,-50),cc.v2(50,-50),cc.v2(50,50),cc.v2(-50,50)]},type:[cc.Vec2]}},resetPointsByContour:!1});var C$99n=cc.Class({name:"cc.PolygonCollider",extends:cc.Collider,mixins:[cc.Collider.Polygon],editor:!1});cc.PolygonCollider=C$99e.exports=C$99n},{}],71:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCCollisionManager"),C$99t("./CCCollider"),C$99t("./CCBoxCollider"),C$99t("./CCCircleCollider"),C$99t("./CCPolygonCollider")},{"./CCBoxCollider":64,"./CCCircleCollider":65,"./CCCollider":66,"./CCCollisionManager":67,"./CCPolygonCollider":70}],72:[function(C$99t,C$99h,C$99u){"use strict";C$99t("./platform/CCClass");var C$99e=C$99t("./platform/CCObject").Flags,C$99i=C$99t("./platform/js").array,C$99n=C$99e.IsStartCalled,C$99r=C$99e.IsOnEnableCalled;C$99e.IsEditorOnEnableCalled;function C$99s(C$99t,C$99e){for(var C$99i=C$99e.constructor._executionOrder,C$99n=C$99e._id,C$99r=0,C$99s=C$99t.length-1,C$99o=C$99s>>>1;C$99r<=C$99s;C$99o=C$99r+C$99s>>>1){var C$99a=C$99t[C$99o],C$99c=C$99a.constructor._executionOrder;if(C$99i<C$99c)C$99s=C$99o-1;else if(C$99c<C$99i)C$99r=C$99o+1;else{C$99c=C$99a._id;if(C$99n<C$99c)C$99s=C$99o-1;else{if(!(C$99c<C$99n))return C$99o;C$99r=C$99o+1}}}return~C$99r}function C$99o(C$99t,C$99e){for(var C$99i=C$99t.array,C$99n=C$99t.i+1;C$99n<C$99i.length;){var C$99r=C$99i[C$99n];C$99r._enabled&&C$99r.node._activeInHierarchy?++C$99n:(C$99t.removeAt(C$99n),C$99e&&(C$99r._objFlags&=~C$99e))}}C$99t=cc.Class({__ctor__:function(C$99t){var C$99e=C$99i.MutableForwardIterator;this._zero=new C$99e([]),this._neg=new C$99e([]),this._pos=new C$99e([]),this._invoke=C$99t},statics:{stableRemoveInactive:C$99o},add:null,remove:null,invoke:null});function C$99a(C$99t,C$99e){return C$99t.constructor._executionOrder-C$99e.constructor._executionOrder}var C$99c=cc.Class({extends:C$99t,add:function(C$99t){var C$99e=C$99t.constructor._executionOrder;(0===C$99e?this._zero:C$99e<0?this._neg:this._pos).array.push(C$99t)},remove:function(C$99t){var C$99e=C$99t.constructor._executionOrder;(0===C$99e?this._zero:C$99e<0?this._neg:this._pos).fastRemove(C$99t)},cancelInactive:function(C$99t){C$99o(this._zero,C$99t),C$99o(this._neg,C$99t),C$99o(this._pos,C$99t)},invoke:function(){var C$99t=this._neg,C$99t=(0<C$99t.array.length&&(C$99t.array.sort(C$99a),this._invoke(C$99t),C$99t.array.length=0),this._invoke(this._zero),this._zero.array.length=0,this._pos);0<C$99t.array.length&&(C$99t.array.sort(C$99a),this._invoke(C$99t),C$99t.array.length=0)}}),C$99_=cc.Class({extends:C$99t,add:function(C$99t){var C$99e,C$99i=C$99t.constructor._executionOrder;0===C$99i?this._zero.array.push(C$99t):(C$99e=C$99s(C$99i=(C$99i<0?this._neg:this._pos).array,C$99t))<0&&C$99i.splice(~C$99e,0,C$99t)},remove:function(C$99t){var C$99e=C$99t.constructor._executionOrder;0===C$99e?this._zero.fastRemove(C$99t):0<=(C$99t=C$99s((C$99e=C$99e<0?this._neg:this._pos).array,C$99t))&&C$99e.removeAt(C$99t)},invoke:function(C$99t){0<this._neg.array.length&&this._invoke(this._neg,C$99t),this._invoke(this._zero,C$99t),0<this._pos.array.length&&this._invoke(this._pos,C$99t)}});function C$99l(C$99r,C$99t,C$99s,C$99o){return function(C$99e,C$99i){try{C$99o(C$99e,C$99i)}catch(C$99t){cc._throw(C$99t);var C$99n=C$99e.array;for(C$99s&&(C$99n[C$99e.i]._objFlags|=C$99s),++C$99e.i;C$99e.i<C$99n.length;++C$99e.i)try{C$99r(C$99n[C$99e.i],C$99i)}catch(C$99t){cc._throw(C$99t),C$99s&&(C$99n[C$99e.i]._objFlags|=C$99s)}}}}var C$99d=C$99l(function(C$99t){C$99t.start(),C$99t._objFlags|=C$99n},0,C$99n,function(C$99t){var C$99e=C$99t.array;for(C$99t.i=0;C$99t.i<C$99e.length;++C$99t.i){var C$99i=C$99e[C$99t.i];C$99i.start(),C$99i._objFlags|=C$99n}}),C$99f=C$99l(function(C$99t,C$99e){C$99t.update(C$99e)},0,void 0,function(C$99t,C$99e){var C$99i=C$99t.array;for(C$99t.i=0;C$99t.i<C$99i.length;++C$99t.i)C$99i[C$99t.i].update(C$99e)}),C$99p=C$99l(function(C$99t,C$99e){C$99t.lateUpdate(C$99e)},0,void 0,function(C$99t,C$99e){var C$99i=C$99t.array;for(C$99t.i=0;C$99t.i<C$99i.length;++C$99t.i)C$99i[C$99t.i].lateUpdate(C$99e)});function C$99m(){this.startInvoker=new C$99c(C$99d),this.updateInvoker=new C$99_(C$99f),this.lateUpdateInvoker=new C$99_(C$99p),this.scheduleInNextFrame=[],this._updating=!1}C$99e=cc.Class({ctor:C$99m,unscheduleAll:C$99m,statics:{LifeCycleInvoker:C$99t,OneOffInvoker:C$99c,createInvokeImpl:C$99l,invokeOnEnable:function(C$99t){var C$99e=cc.director._compScheduler,C$99i=C$99t.array;for(C$99t.i=0;C$99t.i<C$99i.length;++C$99t.i){var C$99n=C$99i[C$99t.i];C$99n._enabled&&(C$99n.onEnable(),C$99n.node._activeInHierarchy&&C$99e._onEnabled(C$99n))}}},_onEnabled:function(C$99t){cc.director.getScheduler().resumeTarget(C$99t),C$99t._objFlags|=C$99r,this._updating?this.scheduleInNextFrame.push(C$99t):this._scheduleImmediate(C$99t)},_onDisabled:function(C$99t){cc.director.getScheduler().pauseTarget(C$99t),C$99t._objFlags&=~C$99r;var C$99e=this.scheduleInNextFrame.indexOf(C$99t);0<=C$99e?C$99i.fastRemoveAt(this.scheduleInNextFrame,C$99e):(!C$99t.start||C$99t._objFlags&C$99n||this.startInvoker.remove(C$99t),C$99t.update&&this.updateInvoker.remove(C$99t),C$99t.lateUpdate&&this.lateUpdateInvoker.remove(C$99t))},enableComp:function(C$99t,C$99e){if(!(C$99t._objFlags&C$99r)){if(C$99t.onEnable){if(C$99e)return void C$99e.add(C$99t);if(C$99t.onEnable(),!C$99t.node._activeInHierarchy)return}this._onEnabled(C$99t)}},disableComp:function(C$99t){C$99t._objFlags&C$99r&&(C$99t.onDisable&&C$99t.onDisable(),this._onDisabled(C$99t))},_scheduleImmediate:function(C$99t){!C$99t.start||C$99t._objFlags&C$99n||this.startInvoker.add(C$99t),C$99t.update&&this.updateInvoker.add(C$99t),C$99t.lateUpdate&&this.lateUpdateInvoker.add(C$99t)},_deferredSchedule:function(){for(var C$99t=this.scheduleInNextFrame,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e];this._scheduleImmediate(C$99n)}C$99t.length=0},_earlyStartForNewComps:function(){0<this.scheduleInNextFrame.length&&(this._deferredSchedule(),this.startInvoker.invoke())},startPhase:function(){this._updating=!0,0<this.scheduleInNextFrame.length&&this._deferredSchedule(),this.startInvoker.invoke(),this._earlyStartForNewComps()},updatePhase:function(C$99t){this.updateInvoker.invoke(C$99t)},lateUpdatePhase:function(C$99t){this.lateUpdateInvoker.invoke(C$99t),this._updating=!1},clearup:function(){this._earlyStartForNewComps()}});C$99h.exports=C$99e},{"./platform/CCClass":189,"./platform/CCObject":195,"./platform/js":209,"./utils/misc":264}],73:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../../animation/animation-animator"),C$99r=C$99t("../../animation/animation-clip"),C$99s=C$99t("../event/event-target"),C$99o=C$99t("../platform/js"),C$99a=cc.Enum({PLAY:"play",STOP:"stop",PAUSE:"pause",RESUME:"resume",LASTFRAME:"lastframe",FINISHED:"finished"}),C$99t=cc.Class({name:"cc.Animation",extends:C$99t("./CCComponent"),mixins:[C$99s],editor:!1,statics:{EventType:C$99a},ctor:function(){cc.EventTarget.call(this),this._animator=null,this._nameToState=C$99o.createMap(!0),this._didInit=!1,this._currentClip=null},properties:{_defaultClip:{default:null,type:C$99r},defaultClip:{type:C$99r,get:function(){return this._defaultClip},set:function(C$99t){},tooltip:!1},currentClip:{get:function(){return this._currentClip},set:function(C$99t){this._currentClip=C$99t},type:C$99r,visible:!1},_writableClips:{get:function(){return this._clips},set:function(C$99t){this._didInit=!1,this._clips=C$99t,this._init()},type:[C$99r]},_clips:{default:[],type:[C$99r],tooltip:!1,visible:!0},playOnLoad:{default:!1,tooltip:!1}},start:function(){var C$99t;this.playOnLoad&&this._defaultClip&&(this._animator&&this._animator.isPlaying||(C$99t=this.getAnimationState(this._defaultClip.name),this._animator.playState(C$99t)))},onEnable:function(){this._animator&&this._animator.resume()},onDisable:function(){this._animator&&this._animator.pause()},onDestroy:function(){this.stop()},getClips:function(){return this._clips},play:function(C$99t,C$99e){C$99t=this.playAdditive(C$99t,C$99e);return this._animator.stopStatesExcept(C$99t),C$99t},playAdditive:function(C$99t,C$99e){this._init();var C$99i,C$99t=this.getAnimationState(C$99t||this._defaultClip&&this._defaultClip.name);return C$99t&&(this.enabled=!0,(C$99i=this._animator).isPlaying&&C$99t.isPlaying?C$99t.isPaused?C$99i.resumeState(C$99t):(C$99i.stopState(C$99t),C$99i.playState(C$99t,C$99e)):C$99i.playState(C$99t,C$99e),this.enabledInHierarchy||C$99i.pause(),this.currentClip=C$99t.clip),C$99t},stop:function(C$99t){this._didInit&&(C$99t?(C$99t=this._nameToState[C$99t])&&this._animator.stopState(C$99t):this._animator.stop())},pause:function(C$99t){this._didInit&&(C$99t?(C$99t=this._nameToState[C$99t])&&this._animator.pauseState(C$99t):this.enabled=!1)},resume:function(C$99t){this._didInit&&(C$99t?(C$99t=this._nameToState[C$99t])&&this._animator.resumeState(C$99t):this.enabled=!0)},setCurrentTime:function(C$99t,C$99e){this._init(),C$99e?(C$99e=this._nameToState[C$99e])&&this._animator.setStateTime(C$99e,C$99t):this._animator.setStateTime(C$99t)},getAnimationState:function(C$99t){this._init();C$99t=this._nameToState[C$99t];return C$99t&&!C$99t.curveLoaded&&this._animator._reloadClip(C$99t),C$99t||null},addClip:function(C$99t,C$99e){if(C$99t){this._init(),cc.js.array.contains(this._clips,C$99t)||this._clips.push(C$99t),C$99e=C$99e||C$99t.name;var C$99i=this._nameToState[C$99e];if(C$99i){if(C$99i.clip===C$99t)return C$99i;C$99i=this._clips.indexOf(C$99i.clip);-1!==C$99i&&this._clips.splice(C$99i,1)}C$99i=new cc.AnimationState(C$99t,C$99e);return this._nameToState[C$99e]=C$99i}cc.warnID(3900)},removeClip:function(C$99e,C$99t){if(C$99e){var C$99i,C$99n;for(C$99n in this._init(),this._nameToState)if((C$99i=this._nameToState[C$99n]).clip===C$99e)break;if(C$99e===this._defaultClip){if(!C$99t)return void cc.warnID(3902);this._defaultClip=null}if(C$99i&&C$99i.isPlaying){if(!C$99t)return void cc.warnID(3903);this.stop(C$99i.name)}this._clips=this._clips.filter(function(C$99t){return!(C$99t===C$99e)}),C$99i&&delete this._nameToState[C$99i.name]}else cc.warnID(3901)},sample:function(C$99t){this._init(),C$99t?(C$99t=this._nameToState[C$99t])&&C$99t.sample():this._animator.sample()},on:function(C$99t,C$99e,C$99i,C$99n){this._init();C$99e=this._EventTargetOn(C$99t,C$99e,C$99i,C$99n);if("lastframe"===C$99t){var C$99r,C$99s=this._nameToState;for(C$99r in C$99s)C$99s[C$99r]._lastframeEventOn=!0}return C$99e},off:function(C$99t,C$99e,C$99i,C$99n){if(this._init(),"lastframe"===C$99t){var C$99r,C$99s=this._nameToState;for(C$99r in C$99s)C$99s[C$99r]._lastframeEventOn=!1}this._EventTargetOff(C$99t,C$99e,C$99i,C$99n)},_init:function(){this._didInit||(this._didInit=!0,this._animator=new C$99n(this.node,this),this._createStates())},_createStates:function(){this._nameToState=C$99o.createMap(!0);for(var C$99t=null,C$99e=!1,C$99i=0;C$99i<this._clips.length;++C$99i){var C$99n=this._clips[C$99i];C$99n&&(C$99t=new cc.AnimationState(C$99n),this._nameToState[C$99t.name]=C$99t,this._defaultClip===C$99n&&(C$99e=C$99t))}this._defaultClip&&!C$99e&&(C$99t=new cc.AnimationState(this._defaultClip),this._nameToState[C$99t.name]=C$99t)}});C$99t.prototype._EventTargetOn=C$99s.prototype.on,C$99t.prototype._EventTargetOff=C$99s.prototype.off,cc.Animation=C$99e.exports=C$99t},{"../../animation/animation-animator":10,"../../animation/animation-clip":11,"../event/event-target":115,"../platform/js":209,"./CCComponent":78}],74:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../utils/misc"),C$99r=C$99t("./CCComponent"),C$99s=C$99t("../assets/CCAudioClip"),C$99t=cc.Class({name:"cc.AudioSource",extends:C$99r,editor:!1,ctor:function(){this.audio=new cc.Audio},properties:{_clip:{default:null,type:C$99s},_volume:1,_mute:!1,_loop:!1,_pausedFlag:{default:!1,serializable:!1},isPlaying:{get:function(){return this.audio.getState()===cc.Audio.State.PLAYING},visible:!1},clip:{get:function(){return this._clip},set:function(C$99t){var C$99i;if("string"==typeof C$99t)return cc.warnID(8401,"cc.AudioSource","cc.AudioClip","AudioClip","cc.AudioClip","audio"),C$99i=this,void C$99s._loadByUrl(C$99t,function(C$99t,C$99e){C$99e&&(C$99i.clip=C$99e)});C$99t!==this._clip&&(this._clip=C$99t,this.audio.stop(),this.preload&&(this.audio.src=this._clip))},type:C$99s,tooltip:!1,animatable:!1},volume:{get:function(){return this._volume},set:function(C$99t){return C$99t=C$99n.clamp01(C$99t),this._volume=C$99t,this._mute||this.audio.setVolume(C$99t),C$99t},tooltip:!1},mute:{get:function(){return this._mute},set:function(C$99t){return this._mute=C$99t,this.audio.setVolume(C$99t?0:this._volume),C$99t},animatable:!1,tooltip:!1},loop:{get:function(){return this._loop},set:function(C$99t){return this._loop=C$99t,this.audio.setLoop(C$99t),C$99t},animatable:!1,tooltip:!1},playOnLoad:{default:!1,tooltip:!1,animatable:!1},preload:{default:!1,animatable:!1}},_ensureDataLoaded:function(){this.audio.src!==this._clip&&(this.audio.src=this._clip)},_pausedCallback:function(){this.audio.getState()===cc.Audio.State.PLAYING&&(this.audio.pause(),this._pausedFlag=!0)},_restoreCallback:function(){this._pausedFlag&&this.audio.resume(),this._pausedFlag=!1},onLoad:function(){this.audio.setVolume(this._mute?0:this._volume),this.audio.setLoop(this._loop)},onEnable:function(){this.preload&&(this.audio.src=this._clip),this.playOnLoad&&this.play(),cc.game.on(cc.game.EVENT_HIDE,this._pausedCallback,this),cc.game.on(cc.game.EVENT_SHOW,this._restoreCallback,this)},onDisable:function(){this.stop(),cc.game.off(cc.game.EVENT_HIDE,this._pausedCallback,this),cc.game.off(cc.game.EVENT_SHOW,this._restoreCallback,this)},onDestroy:function(){this.stop(),this.audio.destroy(),cc.audioEngine.uncache(this._clip)},play:function(){var C$99t;this._clip&&(C$99t=this.audio,this._clip.loaded&&C$99t.stop(),this._ensureDataLoaded(),C$99t.setCurrentTime(0),C$99t.play())},stop:function(){this.audio.stop()},pause:function(){this.audio.pause()},resume:function(){this._ensureDataLoaded(),this.audio.resume()},rewind:function(){this.audio.setCurrentTime(0)},getCurrentTime:function(){return this.audio.getCurrentTime()},setCurrentTime:function(C$99t){return this.audio.setCurrentTime(C$99t),C$99t},getDuration:function(){return this.audio.getDuration()}});cc.AudioSource=C$99e.exports=C$99t},{"../assets/CCAudioClip":35,"../utils/misc":264,"./CCComponent":78}],75:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=["touchstart","touchmove","touchend","mousedown","mousemove","mouseup","mouseenter","mouseleave","mousewheel"];function C$99r(C$99t){C$99t.stopPropagation()}C$99t=cc.Class({name:"cc.BlockInputEvents",extends:C$99t("./CCComponent"),editor:{menu:"i18n:MAIN_MENU.component.ui/Block Input Events",inspector:"packages://inspector/inspectors/comps/block-input-events.js",help:"i18n:COMPONENT.help_url.block_input_events"},onEnable:function(){for(var C$99t=0;C$99t<C$99n.length;C$99t++)this.node.on(C$99n[C$99t],C$99r,this)},onDisable:function(){for(var C$99t=0;C$99t<C$99n.length;C$99t++)this.node.off(C$99n[C$99t],C$99r,this)}});cc.BlockInputEvents=C$99e.exports=C$99t},{"./CCComponent":78}],76:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./CCComponent"),C$99t=C$99t("../utils/gray-sprite-state"),C$99r=cc.Enum({NONE:0,COLOR:1,SPRITE:2,SCALE:3}),C$99s=cc.Enum({NORMAL:0,HOVER:1,PRESSED:2,DISABLED:3}),C$99n=cc.Class({name:"cc.Button",extends:C$99n,mixins:[C$99t],ctor:function(){this._pressed=!1,this._hovered=!1,this._fromColor=null,this._toColor=null,this._time=0,this._transitionFinished=!0,this._fromScale=cc.Vec2.ZERO,this._toScale=cc.Vec2.ZERO,this._originalScale=null,this._graySpriteMaterial=null,this._spriteMaterial=null,this._sprite=null},editor:!1,properties:{interactable:{default:!0,tooltip:!1,notify:function(){this._updateState(),this.interactable||this._resetState()},animatable:!1},_resizeToTarget:{animatable:!1,set:function(C$99t){C$99t&&this._resizeNodeToTargetNode()}},enableAutoGrayEffect:{default:!1,tooltip:!1,notify:function(){this._updateDisabledState()}},transition:{default:C$99r.NONE,tooltip:!1,type:C$99r,animatable:!1,notify:function(C$99t){this._updateTransition(C$99t)},formerlySerializedAs:"transition"},normalColor:{default:cc.Color.WHITE,displayName:"Normal",tooltip:!1,notify:function(){this.transition===C$99r.Color&&this._getButtonState()===C$99s.NORMAL&&(this._getTarget().opacity=this.normalColor.a),this._updateState()}},pressedColor:{default:cc.color(211,211,211),displayName:"Pressed",tooltip:!1,notify:function(){this.transition===C$99r.Color&&this._getButtonState()===C$99s.PRESSED&&(this._getTarget().opacity=this.pressedColor.a),this._updateState()},formerlySerializedAs:"pressedColor"},hoverColor:{default:cc.Color.WHITE,displayName:"Hover",tooltip:!1,notify:function(){this.transition===C$99r.Color&&this._getButtonState()===C$99s.HOVER&&(this._getTarget().opacity=this.hoverColor.a),this._updateState()},formerlySerializedAs:"hoverColor"},disabledColor:{default:cc.color(124,124,124),displayName:"Disabled",tooltip:!1,notify:function(){this.transition===C$99r.Color&&this._getButtonState()===C$99s.DISABLED&&(this._getTarget().opacity=this.disabledColor.a),this._updateState()}},duration:{default:.1,range:[0,10],tooltip:!1},zoomScale:{default:1.2,tooltip:!1},normalSprite:{default:null,type:cc.SpriteFrame,displayName:"Normal",tooltip:!1,notify:function(){this._updateState()}},pressedSprite:{default:null,type:cc.SpriteFrame,displayName:"Pressed",tooltip:!1,formerlySerializedAs:"pressedSprite",notify:function(){this._updateState()}},hoverSprite:{default:null,type:cc.SpriteFrame,displayName:"Hover",tooltip:!1,formerlySerializedAs:"hoverSprite",notify:function(){this._updateState()}},disabledSprite:{default:null,type:cc.SpriteFrame,displayName:"Disabled",tooltip:!1,notify:function(){this._updateState()}},target:{default:null,type:cc.Node,tooltip:!1,notify:function(C$99t){this._applyTarget(),C$99t&&this.target!==C$99t&&this._unregisterTargetEvent(C$99t)}},clickEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{Transition:C$99r},__preload:function(){this._applyTarget(),this._resetState()},_resetState:function(){this._pressed=!1,this._hovered=!1;var C$99t=this._getTarget(),C$99e=this.transition,C$99i=this._originalScale;C$99e===C$99r.COLOR&&this.interactable?this._setTargetColor(this.normalColor):C$99e===C$99r.SCALE&&C$99i&&C$99t.setScale(C$99i.x,C$99i.y),this._transitionFinished=!0},onEnable:function(){this.normalSprite&&this.normalSprite.ensureLoadTexture(),this.hoverSprite&&this.hoverSprite.ensureLoadTexture(),this.pressedSprite&&this.pressedSprite.ensureLoadTexture(),this.disabledSprite&&this.disabledSprite.ensureLoadTexture(),this._registerNodeEvent()},onDisable:function(){this._resetState(),this._unregisterNodeEvent()},_getTarget:function(){return this.target||this.node},_onTargetSpriteFrameChanged:function(C$99t){this.transition===C$99r.SPRITE&&this._setCurrentStateSprite(C$99t.spriteFrame)},_onTargetColorChanged:function(C$99t){this.transition===C$99r.COLOR&&this._setCurrentStateColor(C$99t)},_onTargetScaleChanged:function(){var C$99t=this._getTarget();this._originalScale&&(this.transition!==C$99r.SCALE||this._transitionFinished)&&(this._originalScale.x=C$99t.scaleX,this._originalScale.y=C$99t.scaleY)},_setTargetColor:function(C$99t){var C$99e=this._getTarget();C$99e.color=C$99t,C$99e.opacity=C$99t.a},_getStateColor:function(C$99t){switch(C$99t){case C$99s.NORMAL:return this.normalColor;case C$99s.HOVER:return this.hoverColor;case C$99s.PRESSED:return this.pressedColor;case C$99s.DISABLED:return this.disabledColor}},_getStateSprite:function(C$99t){switch(C$99t){case C$99s.NORMAL:return this.normalSprite;case C$99s.HOVER:return this.hoverSprite;case C$99s.PRESSED:return this.pressedSprite;case C$99s.DISABLED:return this.disabledSprite}},_setCurrentStateColor:function(C$99t){switch(this._getButtonState()){case C$99s.NORMAL:this.normalColor=C$99t;break;case C$99s.HOVER:this.hoverColor=C$99t;break;case C$99s.PRESSED:this.pressedColor=C$99t;break;case C$99s.DISABLED:this.disabledColor=C$99t}},_setCurrentStateSprite:function(C$99t){switch(this._getButtonState()){case C$99s.NORMAL:this.normalSprite=C$99t;break;case C$99s.HOVER:this.hoverSprite=C$99t;break;case C$99s.PRESSED:this.pressedSprite=C$99t;break;case C$99s.DISABLED:this.disabledSprite=C$99t}},update:function(C$99t){var C$99e,C$99i=this._getTarget();this._transitionFinished||this.transition!==C$99r.COLOR&&this.transition!==C$99r.SCALE||(this.time+=C$99t,(C$99t=1)<=(C$99t=0<this.duration?this.time/this.duration:C$99t)&&(C$99t=1),this.transition===C$99r.COLOR?(C$99e=this._fromColor.lerp(this._toColor,C$99t),this._setTargetColor(C$99e)):this.transition===C$99r.SCALE&&this._originalScale&&(C$99i.scale=this._fromScale.lerp(this._toScale,C$99t)),1===C$99t&&(this._transitionFinished=!0))},_registerNodeEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},_unregisterNodeEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},_registerTargetEvent:function(C$99t){C$99t.on(cc.Node.EventType.SCALE_CHANGED,this._onTargetScaleChanged,this)},_unregisterTargetEvent:function(C$99t){C$99t.off(cc.Node.EventType.SCALE_CHANGED,this._onTargetScaleChanged,this)},_getTargetSprite:function(C$99t){var C$99e=null;return C$99e=C$99t?C$99t.getComponent(cc.Sprite):C$99e},_applyTarget:function(){var C$99t=this._getTarget();this._sprite=this._getTargetSprite(C$99t),this._originalScale||(this._originalScale=cc.Vec2.ZERO),this._originalScale.x=C$99t.scaleX,this._originalScale.y=C$99t.scaleY,this._registerTargetEvent(C$99t)},_onTouchBegan:function(C$99t){this.interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),C$99t.stopPropagation())},_onTouchMove:function(C$99t){var C$99e,C$99i,C$99n;this.interactable&&this.enabledInHierarchy&&this._pressed&&(C$99e=C$99t.touch,C$99e=this.node._hitTest(C$99e.getLocation()),C$99n=this._getTarget(),C$99i=this._originalScale,this.transition===C$99r.SCALE&&C$99i?C$99e?(this._fromScale.x=C$99i.x,this._fromScale.y=C$99i.y,this._toScale.x=C$99i.x*this.zoomScale,this._toScale.y=C$99i.y*this.zoomScale,this._transitionFinished=!1):(this.time=0,this._transitionFinished=!0,C$99n.setScale(C$99i.x,C$99i.y)):(C$99n=C$99e?C$99s.PRESSED:C$99s.NORMAL,this._applyTransition(C$99n)),C$99t.stopPropagation())},_onTouchEnded:function(C$99t){this.interactable&&this.enabledInHierarchy&&(this._pressed&&(cc.Component.EventHandler.emitEvents(this.clickEvents,C$99t),this.node.emit("click",this)),this._pressed=!1,this._updateState(),C$99t.stopPropagation())},_onTouchCancel:function(){this.interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},_onMouseMoveIn:function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this.transition===C$99r.SPRITE&&!this.hoverSprite||this._hovered||(this._hovered=!0,this._updateState()))},_onMouseMoveOut:function(){this._hovered&&(this._hovered=!1,this._updateState())},_updateState:function(){var C$99t=this._getButtonState();this._applyTransition(C$99t),this._updateDisabledState()},_getButtonState:function(){return this.interactable?this._pressed?C$99s.PRESSED:this._hovered?C$99s.HOVER:C$99s.NORMAL:C$99s.DISABLED},_updateColorTransitionImmediately:function(C$99t){C$99t=this._getStateColor(C$99t);this._setTargetColor(C$99t),this._fromColor=C$99t.clone(),this._toColor=C$99t},_updateColorTransition:function(C$99t){var C$99e;C$99t===C$99s.DISABLED?this._updateColorTransitionImmediately(C$99t):(C$99e=this._getTarget(),C$99t=this._getStateColor(C$99t),this._fromColor=C$99e.color.clone(),this._toColor=C$99t,this.time=0,this._transitionFinished=!1)},_updateSpriteTransition:function(C$99t){C$99t=this._getStateSprite(C$99t);this._sprite&&C$99t&&(this._sprite.spriteFrame=C$99t)},_updateScaleTransition:function(C$99t){C$99t===C$99s.PRESSED?this._zoomUp():this._zoomBack()},_zoomUp:function(){this._originalScale&&(this._fromScale.x=this._originalScale.x,this._fromScale.y=this._originalScale.y,this._toScale.x=this._originalScale.x*this.zoomScale,this._toScale.y=this._originalScale.y*this.zoomScale,this.time=0,this._transitionFinished=!1)},_zoomBack:function(){var C$99t;this._originalScale&&(C$99t=this._getTarget(),this._fromScale.x=C$99t.scaleX,this._fromScale.y=C$99t.scaleY,this._toScale.x=this._originalScale.x,this._toScale.y=this._originalScale.y,this.time=0,this._transitionFinished=!1)},_updateTransition:function(C$99t){C$99t===C$99r.COLOR?this._updateColorTransitionImmediately(C$99s.NORMAL):C$99t===C$99r.SPRITE&&this._updateSpriteTransition(C$99s.NORMAL),this._updateState()},_applyTransition:function(C$99t){var C$99e=this.transition;C$99e===C$99r.COLOR?this._updateColorTransition(C$99t):C$99e===C$99r.SPRITE?this._updateSpriteTransition(C$99t):C$99e===C$99r.SCALE&&this._updateScaleTransition(C$99t)},_resizeNodeToTargetNode:!1,_updateDisabledState:function(){var C$99t;this._sprite&&(C$99t=!1,this.enableAutoGrayEffect&&(this.transition===C$99r.SPRITE&&this.disabledSprite||this.interactable||(C$99t=!0)),this._switchGrayMaterial(C$99t,this._sprite))}});cc.Button=C$99e.exports=C$99n},{"../utils/gray-sprite-state":260,"./CCComponent":78}],77:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../camera/CCCamera"),C$99t=C$99t("./CCComponent");var C$99r=cc.Class({name:"cc.Canvas",extends:C$99t,editor:!1,resetInEditor:!1,statics:{instance:null},properties:{_designResolution:cc.size(960,640),designResolution:{get:function(){return cc.size(this._designResolution)},set:function(C$99t){this._designResolution.width=C$99t.width,this._designResolution.height=C$99t.height,this.applySettings()},tooltip:!1},_fitWidth:!1,_fitHeight:!0,fitHeight:{get:function(){return this._fitHeight},set:function(C$99t){this._fitHeight!==C$99t&&(this._fitHeight=C$99t,this.applySettings())},tooltip:!1},fitWidth:{get:function(){return this._fitWidth},set:function(C$99t){this._fitWidth!==C$99t&&(this._fitWidth=C$99t,this.applySettings())},tooltip:!1}},_fitDesignResolution:!1,__preload:function(){if(C$99r.instance)return cc.warnID(6700,this.node.name,C$99r.instance.node.name);(C$99r.instance=this).applySettings();var C$99t=this.getComponent(cc.Widget),C$99t=(C$99t&&C$99t.updateAlignment(),cc.find("Main Camera",this.node)),C$99e=(C$99t||((C$99t=new cc.Node("Main Camera")).parent=this.node,C$99t.setSiblingIndex(0)),C$99t.getComponent(C$99n));C$99e||(C$99e=C$99t.addComponent(C$99n),C$99t=C$99n.ClearFlags,C$99e.clearFlags=C$99t.COLOR|C$99t.DEPTH|C$99t.STENCIL,C$99e.depth=-1),C$99n.main=C$99e},onDestroy:function(){C$99r.instance===this&&(C$99r.instance=null)},applySettings:function(){var C$99t=cc.ResolutionPolicy,C$99t=this.fitHeight&&this.fitWidth?C$99t.SHOW_ALL:this.fitHeight||this.fitWidth?this.fitWidth?C$99t.FIXED_WIDTH:C$99t.FIXED_HEIGHT:C$99t.NO_BORDER,C$99e=this._designResolution;cc.view.setDesignResolutionSize(C$99e.width,C$99e.height,C$99t)}});cc.Canvas=C$99e.exports=C$99r},{"../camera/CCCamera":63,"./CCComponent":78}],78:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../platform/CCObject"),C$99r=C$99t("../platform/js"),C$99s=new(C$99t("../platform/id-generater"))("Comp"),C$99o=(C$99n.Flags.IsOnEnableCalled,C$99n.Flags.IsOnLoadCalled),C$99a=!!cc.ActionManager,C$99t=cc.Class({name:"cc.Component",extends:C$99n,ctor:function(){this._id=C$99s.getNewId(),this.__eventTargets=[]},properties:{node:{default:null,visible:!1},name:{get:function(){if(this._name)return this._name;var C$99t=cc.js.getClassName(this),C$99e=C$99t.lastIndexOf(".");return 0<=C$99e&&(C$99t=C$99t.slice(C$99e+1)),this.node.name+"<"+C$99t+">"},set:function(C$99t){this._name=C$99t},visible:!1},uuid:{get:function(){return this._id},visible:!1},__scriptAsset:!1,_enabled:!0,enabled:{get:function(){return this._enabled},set:function(C$99t){var C$99e;this._enabled!==C$99t&&(this._enabled=C$99t,this.node._activeInHierarchy&&(C$99e=cc.director._compScheduler,C$99t?C$99e.enableComp(this):C$99e.disableComp(this)))},visible:!1,animatable:!0},enabledInHierarchy:{get:function(){return this._enabled&&this.node._activeInHierarchy},visible:!1},_isOnLoadCalled:{get:function(){return this._objFlags&C$99o}}},update:null,lateUpdate:null,__preload:null,onLoad:null,start:null,onEnable:null,onDisable:null,onDestroy:null,onFocusInEditor:null,onLostFocusInEditor:null,resetInEditor:null,addComponent:function(C$99t){return this.node.addComponent(C$99t)},getComponent:function(C$99t){return this.node.getComponent(C$99t)},getComponents:function(C$99t){return this.node.getComponents(C$99t)},getComponentInChildren:function(C$99t){return this.node.getComponentInChildren(C$99t)},getComponentsInChildren:function(C$99t){return this.node.getComponentsInChildren(C$99t)},_getLocalBounds:null,onRestore:null,destroy:function(){this._super()&&this._enabled&&this.node._activeInHierarchy&&cc.director._compScheduler.disableComp(this)},_onPreDestroy:function(){C$99a&&cc.director.getActionManager().removeAllActionsFromTarget(this),this.unscheduleAllCallbacks();for(var C$99t=this.__eventTargets,C$99e=C$99t.length-1;0<=C$99e;--C$99e){var C$99i=C$99t[C$99e];C$99i&&C$99i.targetOff(this)}C$99t.length=0,cc.director._nodeActivator.destroyComp(this),this.node._removeComponent(this)},_instantiate:function(C$99t){return(C$99t=C$99t||cc.instantiate._clone(this,this)).node=null,C$99t},schedule:function(C$99t,C$99e,C$99i,C$99n){cc.assertID(C$99t,1619),C$99e=C$99e||0,cc.assertID(0<=C$99e,1620),C$99i=isNaN(C$99i)?cc.macro.REPEAT_FOREVER:C$99i,C$99n=C$99n||0;var C$99r=cc.director.getScheduler(),C$99s=C$99r.isTargetPaused(this);C$99r.schedule(C$99t,this,C$99e,C$99i,C$99n,C$99s)},scheduleOnce:function(C$99t,C$99e){this.schedule(C$99t,0,0,C$99e)},unschedule:function(C$99t){C$99t&&cc.director.getScheduler().unschedule(C$99t,this)},unscheduleAllCallbacks:function(){cc.director.getScheduler().unscheduleAllForTarget(this)}});C$99t._requireComponent=null,C$99t._executionOrder=0,C$99r.value(C$99t,"_registerEditorProps",function(C$99t,C$99e){var C$99i=C$99e.requireComponent,C$99i=(C$99i&&(C$99t._requireComponent=C$99i),C$99e.executionOrder);C$99i&&"number"==typeof C$99i&&(C$99t._executionOrder=C$99i)}),C$99t.prototype.__scriptUuid="",cc.Component=C$99e.exports=C$99t},{"../platform/CCObject":195,"../platform/id-generater":205,"../platform/js":209}],79:[function(C$99t,C$99e,C$99i){"use strict";cc.Component.EventHandler=cc.Class({name:"cc.ClickEvent",properties:{target:{default:null,type:cc.Node},component:"",_componentId:"",_componentName:{get:function(){return this._genCompIdIfNeeded(),this._compId2Name(this._componentId)},set:function(C$99t){this._componentId=this._compName2Id(C$99t)}},handler:{default:""},customEventData:{default:""}},statics:{emitEvents:function(C$99t){if(0<arguments.length)for(var C$99e,C$99i=0,C$99n=(C$99e=new Array(arguments.length-1)).length;C$99i<C$99n;C$99i++)C$99e[C$99i]=arguments[C$99i+1];for(var C$99r=0,C$99s=C$99t.length;C$99r<C$99s;C$99r++){var C$99o=C$99t[C$99r];C$99o instanceof cc.Component.EventHandler&&C$99o.emit(C$99e)}}},emit:function(C$99t){var C$99e,C$99i=this.target;cc.isValid(C$99i)&&(this._genCompIdIfNeeded(),C$99e=cc.js._getClassById(this._componentId),C$99i=C$99i.getComponent(C$99e),!cc.isValid(C$99i)||"function"==typeof(C$99e=C$99i[this.handler])&&(null!=this.customEventData&&""!==this.customEventData&&(C$99t=C$99t.slice()).push(this.customEventData),C$99e.apply(C$99i,C$99t)))},_compName2Id:function(C$99t){C$99t=cc.js.getClassByName(C$99t);return cc.js._getClassId(C$99t)},_compId2Name:function(C$99t){C$99t=cc.js._getClassById(C$99t);return cc.js.getClassName(C$99t)},_genCompIdIfNeeded:function(){this._componentId||(this._componentName=this.component,this.component="")}})},{}],80:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../platform/CCMacro"),C$99r=C$99t("./CCRenderComponent"),C$99s=(C$99t("../assets/material/CCMaterial"),C$99t("../renderer/utils/label/label-frame")),C$99t=C$99n.TextAlignment,C$99n=C$99n.VerticalTextAlignment,C$99o=cc.Enum({NONE:0,CLAMP:1,SHRINK:2,RESIZE_HEIGHT:3}),C$99a=cc.Enum({NONE:0,BITMAP:1,CHAR:2}),C$99c=cc.Class({name:"cc.Label",extends:C$99r,ctor:function(){this._actualFontSize=0,this._assemblerData=null,this._frame=null,this._ttfTexture=null,this._letterTexture=null,cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?this._updateMaterial=this._updateMaterialCanvas:this._updateMaterial=this._updateMaterialWebgl},editor:!1,properties:{_useOriginalSize:!0,_string:{default:"",formerlySerializedAs:"_N$string"},string:{get:function(){return this._string},set:function(C$99t){var C$99e=this._string;this._string=""+C$99t,this.string!==C$99e&&this.setVertsDirty(),this._checkStringEmpty()},multiline:!0,tooltip:!1},horizontalAlign:{default:C$99t.LEFT,type:C$99t,tooltip:!1,notify:function(C$99t){this.horizontalAlign!==C$99t&&this.setVertsDirty()},animatable:!1},verticalAlign:{default:C$99n.TOP,type:C$99n,tooltip:!1,notify:function(C$99t){this.verticalAlign!==C$99t&&this.setVertsDirty()},animatable:!1},actualFontSize:{displayName:"Actual Font Size",animatable:!1,readonly:!0,get:function(){return this._actualFontSize},tooltip:!1},_fontSize:40,fontSize:{get:function(){return this._fontSize},set:function(C$99t){this._fontSize!==C$99t&&(this._fontSize=C$99t,this.setVertsDirty())},range:[0,512],tooltip:!1},fontFamily:{default:"Arial",tooltip:!1,notify:function(C$99t){this.fontFamily!==C$99t&&this.setVertsDirty()},animatable:!1},_lineHeight:40,lineHeight:{get:function(){return this._lineHeight},set:function(C$99t){this._lineHeight!==C$99t&&(this._lineHeight=C$99t,this.setVertsDirty())},tooltip:!1},overflow:{default:C$99o.NONE,type:C$99o,tooltip:!1,notify:function(C$99t){this.overflow!==C$99t&&this.setVertsDirty()},animatable:!1},_enableWrapText:!0,enableWrapText:{get:function(){return this._enableWrapText},set:function(C$99t){this._enableWrapText!==C$99t&&(this._enableWrapText=C$99t,this.setVertsDirty())},animatable:!1,tooltip:!1},_N$file:null,font:{get:function(){return this._N$file},set:function(C$99t){this.font!==C$99t&&(C$99t||(this._isSystemFontUsed=!0),(this._N$file=C$99t)&&this._isSystemFontUsed&&(this._isSystemFontUsed=!1),"string"==typeof C$99t&&cc.warnID(4e3),this.enabledInHierarchy&&this._forceUpdateRenderData())},type:cc.Font,tooltip:!1,animatable:!1},_isSystemFontUsed:!0,useSystemFont:{get:function(){return this._isSystemFontUsed},set:function(C$99t){if(this._isSystemFontUsed!==C$99t){if(this._isSystemFontUsed=!!C$99t,C$99t){if(this.font=null,!this.enabledInHierarchy)return;this._forceUpdateRenderData()}this.markForValidate()}},animatable:!1,tooltip:!1},_bmFontOriginalSize:{displayName:"BMFont Original Size",get:function(){return this._N$file instanceof cc.BitmapFont?this._N$file.fontSize:-1},visible:!0,animatable:!1},_spacingX:0,spacingX:{get:function(){return this._spacingX},set:function(C$99t){this._spacingX=C$99t,this.setVertsDirty()},tooltip:!1},_batchAsBitmap:!1,cacheMode:{default:C$99a.NONE,type:C$99a,tooltip:!1,notify:function(C$99t){this.cacheMode!==C$99t&&(C$99t!==C$99a.BITMAP||this.font instanceof cc.BitmapFont||this._frame&&this._frame._resetDynamicAtlasFrame(),C$99t===C$99a.CHAR&&(this._ttfTexture=null),this.enabledInHierarchy&&this._forceUpdateRenderData())},animatable:!1},_styleFlags:0,enableBold:{get:function(){return!!(1&this._styleFlags)},set:function(C$99t){C$99t?this._styleFlags|=1:this._styleFlags&=-2,this.setVertsDirty()},animatable:!1,tooltip:!1},enableItalic:{get:function(){return!!(2&this._styleFlags)},set:function(C$99t){C$99t?this._styleFlags|=2:this._styleFlags&=-3,this.setVertsDirty()},animatable:!1,tooltip:!1},enableUnderline:{get:function(){return!!(4&this._styleFlags)},set:function(C$99t){C$99t?this._styleFlags|=4:this._styleFlags&=-5,this.setVertsDirty()},animatable:!1,tooltip:!1},_underlineHeight:0,underlineHeight:{get:function(){return this._underlineHeight},set:function(C$99t){this._underlineHeight!==C$99t&&(this._underlineHeight=C$99t,this.setVertsDirty())},tooltip:!1}},statics:{HorizontalAlign:C$99t,VerticalAlign:C$99n,Overflow:C$99o,CacheMode:C$99a,_shareAtlas:null,clearCharCache:function(){C$99c._shareAtlas&&C$99c._shareAtlas.clearAllCache()}},onLoad:function(){this._batchAsBitmap&&this.cacheMode===C$99a.NONE&&(this.cacheMode=C$99a.BITMAP,this._batchAsBitmap=!1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(this.cacheMode=C$99a.NONE)},onEnable:function(){this._super(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._nodeSizeChanged,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this),this._forceUpdateRenderData()},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._nodeSizeChanged,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},onDestroy:function(){this._assembler&&this._assembler._resetAssemblerData&&this._assembler._resetAssemblerData(this._assemblerData),this._assemblerData=null,this._letterTexture=null,this._ttfTexture&&(this._ttfTexture.destroy(),this._ttfTexture=null),this._super()},_nodeSizeChanged:function(){this.overflow!==C$99o.NONE&&this.setVertsDirty()},_updateColor:function(){this.font instanceof cc.BitmapFont||this.setVertsDirty(),C$99r.prototype._updateColor.call(this)},_validateRender:function(){if(this.string){if(this._materials[0]){var C$99t=this.font;if(!(C$99t instanceof cc.BitmapFont))return;var C$99e=C$99t.spriteFrame;if(C$99e&&C$99e.textureLoaded()&&C$99t._fntConfig)return}this.disableRender()}else this.disableRender()},_resetAssembler:function(){this._frame=null,C$99r.prototype._resetAssembler.call(this)},_checkStringEmpty:function(){this.markForRender(!!this.string)},_on3DNodeChanged:function(){this._resetAssembler(),this._applyFontTexture()},_onBMFontTextureLoaded:function(){this._frame._texture=this.font.spriteFrame._texture,this.markForRender(!0),this._updateMaterial(),this._assembler&&this._assembler.updateRenderData(this)},_applyFontTexture:function(){var C$99t=this.font;C$99t instanceof cc.BitmapFont?(C$99t=C$99t.spriteFrame,(this._frame=C$99t)&&C$99t.onTextureLoaded(this._onBMFontTextureLoaded,this)):(this._frame||(this._frame=new C$99s),this.cacheMode===C$99a.CHAR?(this._letterTexture=this._assembler._getAssemblerData(),this._frame._refreshTexture(this._letterTexture)):this._ttfTexture||(this._ttfTexture=new cc.Texture2D,this._assemblerData=this._assembler._getAssemblerData(),this._ttfTexture.initWithElement(this._assemblerData.canvas)),this.cacheMode!==C$99a.CHAR&&(this._frame._resetDynamicAtlasFrame(),this._frame._refreshTexture(this._ttfTexture)),this._updateMaterial(),this._assembler&&this._assembler.updateRenderData(this)),this.markForValidate()},_updateMaterialCanvas:function(){this._frame&&(this._frame._texture.url=this.uuid+"_texture")},_updateMaterialWebgl:function(){var C$99t;!this._frame||(C$99t=this.getMaterial(0))&&C$99t.setProperty("texture",this._frame._texture)},_forceUpdateRenderData:function(){this.setVertsDirty(),this._resetAssembler(),this._applyFontTexture()},_enableBold:function(C$99t){cc.warn("`label._enableBold` is deprecated, use `label.enableBold = true` instead please"),this.enableBold=!!C$99t},_enableItalics:function(C$99t){cc.warn("`label._enableItalics` is deprecated, use `label.enableItalics = true` instead please"),this.enableItalic=!!C$99t},_enableUnderline:function(C$99t){cc.warn("`label._enableUnderline` is deprecated, use `label.enableUnderline = true` instead please"),this.enableUnderline=!!C$99t}});cc.Label=C$99e.exports=C$99c},{"../assets/material/CCMaterial":53,"../platform/CCMacro":194,"../renderer/utils/label/label-frame":225,"./CCRenderComponent":89}],81:[function(C$99t,C$99e,C$99i){"use strict";C$99t=cc.Class({name:"cc.LabelOutline",extends:C$99t("./CCComponent"),editor:!1,properties:{_color:cc.Color.WHITE,_width:1,color:{tooltip:!1,get:function(){return this._color},set:function(C$99t){this._color=C$99t,this._updateRenderData()}},width:{tooltip:!1,get:function(){return this._width},set:function(C$99t){this._width!==C$99t&&(this._width=C$99t,this._updateRenderData())},range:[0,512]}},onEnable:function(){this._updateRenderData()},onDisable:function(){this._updateRenderData()},_updateRenderData:function(){var C$99t=this.node.getComponent(cc.Label);C$99t&&C$99t.setVertsDirty()}});cc.LabelOutline=C$99e.exports=C$99t},{"./CCComponent":78}],82:[function(C$99t,C$99e,C$99i){"use strict";C$99t=cc.Class({name:"cc.LabelShadow",extends:C$99t("./CCComponent"),editor:!1,properties:{_color:cc.Color.WHITE,_offset:cc.v2(2,2),_blur:2,color:{tooltip:!1,get:function(){return this._color},set:function(C$99t){this._color=C$99t,this._updateRenderData()}},offset:{tooltip:!1,get:function(){return this._offset},set:function(C$99t){this._offset=C$99t,this._updateRenderData()}},blur:{tooltip:!1,get:function(){return this._blur},set:function(C$99t){this._blur=C$99t,this._updateRenderData()},range:[0,1024]}},onEnable:function(){this._updateRenderData()},onDisable:function(){this._updateRenderData()},_updateRenderData:function(){var C$99t=this.node.getComponent(cc.Label);C$99t&&C$99t.markForRender(!0)}});cc.LabelShadow=C$99e.exports=C$99t},{"./CCComponent":78}],83:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCNode").EventType,C$99E=cc.Enum({NONE:0,HORIZONTAL:1,VERTICAL:2,GRID:3}),C$99M=cc.Enum({NONE:0,CONTAINER:1,CHILDREN:2}),C$99r=cc.Enum({HORIZONTAL:0,VERTICAL:1}),C$99I=cc.Enum({BOTTOM_TO_TOP:0,TOP_TO_BOTTOM:1}),C$99B=cc.Enum({LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1}),C$99t=cc.Class({name:"cc.Layout",extends:C$99t("./CCComponent"),editor:!1,properties:{_layoutSize:cc.size(300,200),_layoutDirty:{default:!0,serializable:!1},_resize:C$99M.NONE,_N$layoutType:C$99E.NONE,type:{type:C$99E,get:function(){return this._N$layoutType},set:function(C$99t){this._N$layoutType=C$99t,this._doLayoutDirty()},tooltip:!1,animatable:!1},resizeMode:{type:C$99M,tooltip:!1,animatable:!1,get:function(){return this._resize},set:function(C$99t){this.type===C$99E.NONE&&C$99t===C$99M.CHILDREN||(this._resize=C$99t,this._doLayoutDirty())}},cellSize:{default:cc.size(40,40),tooltip:!1,type:cc.Size,notify:function(){this._doLayoutDirty()}},startAxis:{default:C$99r.HORIZONTAL,tooltip:!1,type:C$99r,notify:function(){this._doLayoutDirty()},animatable:!1},paddingLeft:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingRight:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingTop:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},paddingBottom:{default:0,tooltip:!1,notify:function(){this._doLayoutDirty()}},spacingX:{default:0,notify:function(){this._doLayoutDirty()},tooltip:!1},spacingY:{default:0,notify:function(){this._doLayoutDirty()},tooltip:!1},verticalDirection:{default:C$99I.TOP_TO_BOTTOM,type:C$99I,notify:function(){this._doLayoutDirty()},tooltip:!1,animatable:!1},horizontalDirection:{default:C$99B.LEFT_TO_RIGHT,type:C$99B,notify:function(){this._doLayoutDirty()},tooltip:!1,animatable:!1},affectedByScale:{default:!1,notify:function(){this._doLayoutDirty()},animatable:!1,tooltip:!1}},statics:{Type:C$99E,VerticalDirection:C$99I,HorizontalDirection:C$99B,ResizeMode:C$99M,AxisDirection:C$99r},onEnable:function(){this._addEventListeners(),this.node.getContentSize().equals(cc.size(0,0))&&this.node.setContentSize(this._layoutSize),this._doLayoutDirty()},onDisable:function(){this._removeEventListeners()},_doLayoutDirty:function(){this._layoutDirty=!0},_doScaleDirty:function(){this._layoutDirty=this._layoutDirty||this.affectedByScale},_addEventListeners:function(){cc.director.on(cc.Director.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(C$99n.SIZE_CHANGED,this._resized,this),this.node.on(C$99n.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(C$99n.CHILD_ADDED,this._childAdded,this),this.node.on(C$99n.CHILD_REMOVED,this._childRemoved,this),this.node.on(C$99n.CHILD_REORDER,this._doLayoutDirty,this),this._addChildrenEventListeners()},_removeEventListeners:function(){cc.director.off(cc.Director.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(C$99n.SIZE_CHANGED,this._resized,this),this.node.off(C$99n.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(C$99n.CHILD_ADDED,this._childAdded,this),this.node.off(C$99n.CHILD_REMOVED,this._childRemoved,this),this.node.off(C$99n.CHILD_REORDER,this._doLayoutDirty,this),this._removeChildrenEventListeners()},_addChildrenEventListeners:function(){for(var C$99t=this.node.children,C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e];C$99i.on(C$99n.SCALE_CHANGED,this._doScaleDirty,this),C$99i.on(C$99n.SIZE_CHANGED,this._doLayoutDirty,this),C$99i.on(C$99n.POSITION_CHANGED,this._doLayoutDirty,this),C$99i.on(C$99n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$99i.on("active-in-hierarchy-changed",this._doLayoutDirty,this)}},_removeChildrenEventListeners:function(){for(var C$99t=this.node.children,C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e];C$99i.off(C$99n.SCALE_CHANGED,this._doScaleDirty,this),C$99i.off(C$99n.SIZE_CHANGED,this._doLayoutDirty,this),C$99i.off(C$99n.POSITION_CHANGED,this._doLayoutDirty,this),C$99i.off(C$99n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$99i.off("active-in-hierarchy-changed",this._doLayoutDirty,this)}},_childAdded:function(C$99t){C$99t.on(C$99n.SCALE_CHANGED,this._doScaleDirty,this),C$99t.on(C$99n.SIZE_CHANGED,this._doLayoutDirty,this),C$99t.on(C$99n.POSITION_CHANGED,this._doLayoutDirty,this),C$99t.on(C$99n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$99t.on("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()},_childRemoved:function(C$99t){C$99t.off(C$99n.SCALE_CHANGED,this._doScaleDirty,this),C$99t.off(C$99n.SIZE_CHANGED,this._doLayoutDirty,this),C$99t.off(C$99n.POSITION_CHANGED,this._doLayoutDirty,this),C$99t.off(C$99n.ANCHOR_CHANGED,this._doLayoutDirty,this),C$99t.off("active-in-hierarchy-changed",this._doLayoutDirty,this),this._doLayoutDirty()},_resized:function(){this._layoutSize=this.node.getContentSize(),this._doLayoutDirty()},_doLayoutHorizontally:function(C$99h,C$99u,C$99_,C$99d){for(var C$99f=this.node.getAnchorPoint(),C$99p=this.node.children,C$99t=1,C$99m=this.paddingLeft,C$99y=-C$99f.x*C$99h,C$99g=(this.horizontalDirection===C$99B.RIGHT_TO_LEFT&&(C$99t=-1,C$99y=(1-C$99f.x)*C$99h,C$99m=this.paddingRight),C$99y+C$99t*C$99m-C$99t*this.spacingX),C$99v=0,C$99e=0,C$99i=0,C$99x=0,C$99n=0,C$99b=0,C$99A=0,C$99r=0;C$99r<C$99p.length;++C$99r)(C$99a=C$99p[C$99r]).activeInHierarchy&&C$99A++;var C$99C=this.cellSize.width;this.type!==C$99E.GRID&&this.resizeMode===C$99M.CHILDREN&&(C$99C=(C$99h-(this.paddingLeft+this.paddingRight)-(C$99A-1)*this.spacingX)/C$99A);for(C$99r=0;C$99r<C$99p.length;++C$99r){var C$99S,C$99T,C$99s,C$99w,C$99o,C$99a=C$99p[C$99r],C$99c=this._getUsedScaleValue(C$99a.scaleX),C$99l=this._getUsedScaleValue(C$99a.scaleY);C$99a.activeInHierarchy&&(this._resize===C$99M.CHILDREN&&(C$99a.width=C$99C/C$99c,this.type===C$99E.GRID&&(C$99a.height=this.cellSize.height/C$99l)),C$99o=C$99a.anchorX,C$99c=C$99a.width*C$99c,(C$99e=C$99e<C$99i?C$99i:C$99e)<=(C$99l=C$99a.height*C$99l)&&(C$99i=C$99e,C$99e=C$99l,C$99b=C$99a.getAnchorPoint().y),C$99g=C$99g+C$99t*(C$99o=this.horizontalDirection===C$99B.RIGHT_TO_LEFT?1-C$99a.anchorX:C$99o)*C$99c+C$99t*this.spacingX,C$99S=C$99t*(1-C$99o)*C$99c,C$99u&&(C$99s=C$99g+C$99S+C$99t*(0<C$99t?this.paddingRight:this.paddingLeft),C$99T=this.horizontalDirection===C$99B.LEFT_TO_RIGHT&&C$99s>(1-C$99f.x)*C$99h,C$99s=this.horizontalDirection===C$99B.RIGHT_TO_LEFT&&C$99s<-C$99f.x*C$99h,(C$99T||C$99s)&&(C$99e<=C$99l?(C$99v+=C$99i=0===C$99i?C$99e:C$99i,C$99i=C$99e):(C$99v+=C$99e,C$99i=C$99l,C$99e=0),C$99g=C$99y+C$99t*(C$99m+C$99o*C$99c),C$99x++)),C$99T=C$99_(C$99a,C$99v,C$99x),C$99h>=C$99c+this.paddingLeft+this.paddingRight&&C$99d&&C$99a.setPosition(cc.v2(C$99g,C$99T)),C$99s=1,C$99o=0===C$99e?C$99l:C$99e,this.verticalDirection===C$99I.TOP_TO_BOTTOM?(C$99n=C$99n||this.node._contentSize.height,(C$99w=C$99T+(C$99s=-1)*(C$99o*C$99b+this.paddingBottom))<C$99n&&(C$99n=C$99w)):(C$99n=C$99n||-this.node._contentSize.height)<(C$99w=C$99T+C$99s*(C$99o*C$99b+this.paddingTop))&&(C$99n=C$99w),C$99g+=C$99S)}return C$99n},_getVerticalBaseHeight:function(C$99t){var C$99e=0,C$99i=0;if(this.resizeMode===C$99M.CONTAINER){for(var C$99n=0;C$99n<C$99t.length;++C$99n){var C$99r=C$99t[C$99n];C$99r.activeInHierarchy&&(C$99i++,C$99e+=C$99r.height*this._getUsedScaleValue(C$99r.scaleY))}C$99e+=(C$99i-1)*this.spacingY+this.paddingBottom+this.paddingTop}else C$99e=this.node.getContentSize().height;return C$99e},_doLayoutVertically:function(C$99h,C$99u,C$99_,C$99d){for(var C$99f=this.node.getAnchorPoint(),C$99p=this.node.children,C$99t=1,C$99m=this.paddingBottom,C$99y=-C$99f.y*C$99h,C$99g=(this.verticalDirection===C$99I.TOP_TO_BOTTOM&&(C$99t=-1,C$99y=(1-C$99f.y)*C$99h,C$99m=this.paddingTop),C$99y+C$99t*C$99m-C$99t*this.spacingY),C$99v=0,C$99e=0,C$99i=0,C$99x=0,C$99n=0,C$99b=0,C$99A=0,C$99r=0;C$99r<C$99p.length;++C$99r)(C$99a=C$99p[C$99r]).activeInHierarchy&&C$99A++;var C$99C=this.cellSize.height;this.type!==C$99E.GRID&&this.resizeMode===C$99M.CHILDREN&&(C$99C=(C$99h-(this.paddingTop+this.paddingBottom)-(C$99A-1)*this.spacingY)/C$99A);for(C$99r=0;C$99r<C$99p.length;++C$99r){var C$99S,C$99T,C$99s,C$99w,C$99o,C$99a=C$99p[C$99r],C$99c=this._getUsedScaleValue(C$99a.scaleX),C$99l=this._getUsedScaleValue(C$99a.scaleY);C$99a.activeInHierarchy&&(this.resizeMode===C$99M.CHILDREN&&(C$99a.height=C$99C/C$99l,this.type===C$99E.GRID&&(C$99a.width=this.cellSize.width/C$99c)),C$99o=C$99a.anchorY,C$99c=C$99a.width*C$99c,C$99l=C$99a.height*C$99l,(C$99e=C$99e<C$99i?C$99i:C$99e)<=C$99c&&(C$99i=C$99e,C$99e=C$99c,C$99b=C$99a.getAnchorPoint().x),C$99g=C$99g+C$99t*(C$99o=this.verticalDirection===C$99I.TOP_TO_BOTTOM?1-C$99a.anchorY:C$99o)*C$99l+C$99t*this.spacingY,C$99S=C$99t*(1-C$99o)*C$99l,C$99u&&(C$99s=C$99g+C$99S+C$99t*(0<C$99t?this.paddingTop:this.paddingBottom),C$99T=this.verticalDirection===C$99I.BOTTOM_TO_TOP&&C$99s>(1-C$99f.y)*C$99h,C$99s=this.verticalDirection===C$99I.TOP_TO_BOTTOM&&C$99s<-C$99f.y*C$99h,(C$99T||C$99s)&&(C$99e<=C$99c?(C$99v+=C$99i=0===C$99i?C$99e:C$99i,C$99i=C$99e):(C$99v+=C$99e,C$99i=C$99c,C$99e=0),C$99g=C$99y+C$99t*(C$99m+C$99o*C$99l),C$99x++)),C$99T=C$99_(C$99a,C$99v,C$99x),C$99h>=C$99l+(this.paddingTop+this.paddingBottom)&&C$99d&&C$99a.setPosition(cc.v2(C$99T,C$99g)),C$99s=1,C$99o=0===C$99e?C$99c:C$99e,this.horizontalDirection===C$99B.RIGHT_TO_LEFT?(C$99n=C$99n||this.node._contentSize.width,(C$99w=C$99T+(C$99s=-1)*(C$99o*C$99b+this.paddingLeft))<C$99n&&(C$99n=C$99w)):(C$99n=C$99n||-this.node._contentSize.width)<(C$99w=C$99T+C$99s*(C$99o*C$99b+this.paddingRight))&&(C$99n=C$99w),C$99g+=C$99S)}return C$99n},_doLayoutBasic:function(){for(var C$99t,C$99e,C$99i,C$99n=this.node.children,C$99r=null,C$99s=0;C$99s<C$99n.length;++C$99s){var C$99o=C$99n[C$99s];C$99o.activeInHierarchy&&(C$99r?C$99r.union(C$99r,C$99o.getBoundingBoxToWorld()):C$99r=C$99o.getBoundingBoxToWorld())}C$99r&&(C$99t=this.node.convertToNodeSpaceAR(cc.v2(C$99r.x,C$99r.y)),C$99t=cc.v2(C$99t.x-this.paddingLeft,C$99t.y-this.paddingBottom),C$99i=this.node.convertToNodeSpaceAR(cc.v2(C$99r.xMax,C$99r.yMax)),C$99i=(C$99i=cc.v2(C$99i.x+this.paddingRight,C$99i.y+this.paddingTop)).sub(C$99t),0!==(C$99i=cc.size(parseFloat(C$99i.x.toFixed(2)),parseFloat(C$99i.y.toFixed(2)))).width&&(C$99e=-C$99t.x/C$99i.width,this.node.anchorX=parseFloat(C$99e.toFixed(2))),0!==C$99i.height&&(C$99e=-C$99t.y/C$99i.height,this.node.anchorY=parseFloat(C$99e.toFixed(2))),this.node.setContentSize(C$99i))},_doLayoutGridAxisHorizontal:function(C$99t,C$99e){var C$99i,C$99n=C$99e.width,C$99r=1,C$99s=-C$99t.y*C$99e.height,C$99o=this.paddingBottom,C$99e=(this.verticalDirection===C$99I.TOP_TO_BOTTOM&&(C$99r=-1,C$99s=(1-C$99t.y)*C$99e.height,C$99o=this.paddingTop),function(C$99t,C$99e,C$99i){return C$99s+C$99r*(C$99e+C$99t.anchorY*C$99t.height*this._getUsedScaleValue(C$99t.scaleY)+C$99o+C$99i*this.spacingY)}.bind(this)),C$99a=0;this.resizeMode===C$99M.CONTAINER&&(C$99i=this._doLayoutHorizontally(C$99n,!0,C$99e,!1),(C$99a=C$99s-C$99i)<0&&(C$99a*=-1),C$99s=-C$99t.y*C$99a,this.verticalDirection===C$99I.TOP_TO_BOTTOM&&(C$99r=-1,C$99s=(1-C$99t.y)*C$99a)),this._doLayoutHorizontally(C$99n,!0,C$99e,!0),this.resizeMode===C$99M.CONTAINER&&this.node.setContentSize(C$99n,C$99a)},_doLayoutGridAxisVertical:function(C$99t,C$99e){var C$99i,C$99n=C$99e.height,C$99r=1,C$99s=-C$99t.x*C$99e.width,C$99o=this.paddingLeft,C$99e=(this.horizontalDirection===C$99B.RIGHT_TO_LEFT&&(C$99r=-1,C$99s=(1-C$99t.x)*C$99e.width,C$99o=this.paddingRight),function(C$99t,C$99e,C$99i){return C$99s+C$99r*(C$99e+C$99t.anchorX*C$99t.width*this._getUsedScaleValue(C$99t.scaleX)+C$99o+C$99i*this.spacingX)}.bind(this)),C$99a=0;this.resizeMode===C$99M.CONTAINER&&(C$99i=this._doLayoutVertically(C$99n,!0,C$99e,!1),(C$99a=C$99s-C$99i)<0&&(C$99a*=-1),C$99s=-C$99t.x*C$99a,this.horizontalDirection===C$99B.RIGHT_TO_LEFT&&(C$99r=-1,C$99s=(1-C$99t.x)*C$99a)),this._doLayoutVertically(C$99n,!0,C$99e,!0),this.resizeMode===C$99M.CONTAINER&&this.node.setContentSize(C$99a,C$99n)},_doLayoutGrid:function(){var C$99t=this.node.getAnchorPoint(),C$99e=this.node.getContentSize();this.startAxis===C$99r.HORIZONTAL?this._doLayoutGridAxisHorizontal(C$99t,C$99e):this.startAxis===C$99r.VERTICAL&&this._doLayoutGridAxisVertical(C$99t,C$99e)},_getHorizontalBaseWidth:function(C$99t){var C$99e=0,C$99i=0;if(this.resizeMode===C$99M.CONTAINER){for(var C$99n=0;C$99n<C$99t.length;++C$99n){var C$99r=C$99t[C$99n];C$99r.activeInHierarchy&&(C$99i++,C$99e+=C$99r.width*this._getUsedScaleValue(C$99r.scaleX))}C$99e+=(C$99i-1)*this.spacingX+this.paddingLeft+this.paddingRight}else C$99e=this.node.getContentSize().width;return C$99e},_doLayout:function(){var C$99t;this.type===C$99E.HORIZONTAL?(C$99t=this._getHorizontalBaseWidth(this.node.children),this._doLayoutHorizontally(C$99t,!1,function(C$99t){return C$99t.y},!0),this.node.width=C$99t):this.type===C$99E.VERTICAL?(C$99t=this._getVerticalBaseHeight(this.node.children),this._doLayoutVertically(C$99t,!1,function(C$99t){return C$99t.x},!0),this.node.height=C$99t):this.type===C$99E.NONE?this.resizeMode===C$99M.CONTAINER&&this._doLayoutBasic():this.type===C$99E.GRID&&this._doLayoutGrid()},_getUsedScaleValue:function(C$99t){return this.affectedByScale?Math.abs(C$99t):1},updateLayout:function(){this._layoutDirty&&0<this.node.children.length&&(this._doLayout(),this._layoutDirty=!1)}});cc.Layout=C$99e.exports=C$99t},{"../CCNode":30,"./CCComponent":78}],84:[function(C$99t,C$99e,C$99h){"use strict";var C$99u=C$99n(C$99t("../../renderer/gfx")),C$99s=C$99n(C$99t("../value-types/mat4")),C$99o=C$99n(C$99t("../value-types/vec2")),C$99i=C$99n(C$99t("../assets/material/material-variant"));function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}var C$99_=C$99t("../utils/misc"),C$99d=C$99t("./CCRenderComponent"),C$99r=C$99t("../renderer/render-flow"),C$99f=C$99t("../graphics/graphics"),C$99p=new C$99o.default,C$99a=new C$99s.default,C$99c=[];var C$99l=cc.Enum({RECT:0,ELLIPSE:1,IMAGE_STENCIL:2}),C$99t=cc.Class({name:"cc.Mask",extends:C$99d,editor:!1,ctor:function(){this._graphics=null,this._enableMaterial=null,this._exitMaterial=null,this._clearMaterial=null},properties:{_spriteFrame:{default:null,type:cc.SpriteFrame},_type:C$99l.RECT,type:{get:function(){return this._type},set:function(C$99t){this._type!==C$99t&&this._resetAssembler(),this._type=C$99t,this._type!==C$99l.IMAGE_STENCIL&&(this.spriteFrame=null,this.alphaThreshold=0,this._updateGraphics()),this._activateMaterial()},type:C$99l,tooltip:!1},spriteFrame:{type:cc.SpriteFrame,tooltip:!1,get:function(){return this._spriteFrame},set:function(C$99t){this._spriteFrame!==C$99t&&(this._spriteFrame=C$99t,this.setVertsDirty(),this._updateMaterial())}},alphaThreshold:{default:.1,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS?this._updateMaterial():cc.warnID(4201)}},inverted:{default:!1,type:cc.Boolean,tooltip:!1,notify:function(){cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&cc.warnID(4202)}},_segments:64,segements:{get:function(){return this._segments},set:function(C$99t){this._segments=C$99_.clampf(C$99t,3,1e4),this._updateGraphics()},type:cc.Integer,tooltip:!1},_resizeToTarget:{animatable:!1,set:function(C$99t){C$99t&&this._resizeNodeToTargetNode()}}},statics:{Type:C$99l},onRestore:function(){this._activateMaterial()},onEnable:function(){this._super(),this._type!==C$99l.IMAGE_STENCIL&&this._updateGraphics(),this.node.on(cc.Node.EventType.POSITION_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.ROTATION_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.SCALE_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._updateGraphics,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._updateGraphics,this)},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.POSITION_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.ROTATION_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.SCALE_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._updateGraphics,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._updateGraphics,this),this.node._renderFlag&=~C$99r.FLAG_POST_RENDER},onDestroy:function(){this._super(),this._removeGraphics()},_resizeNodeToTargetNode:!1,_validateRender:function(){var C$99t;this._type===C$99l.IMAGE_STENCIL&&((C$99t=this._spriteFrame)&&C$99t.textureLoaded()||this.disableRender())},_activateMaterial:function(){this._createGraphics();var C$99t=this._materials[0];(C$99t=C$99t?C$99i.default.create(C$99t,this):C$99i.default.createWithBuiltin("2d-sprite",this)).define("USE_ALPHA_TEST",!0),this._type===C$99l.IMAGE_STENCIL?(C$99t.define("CC_USE_MODEL",!1),C$99t.define("USE_TEXTURE",!0)):(C$99t.define("CC_USE_MODEL",!0),C$99t.define("USE_TEXTURE",!1)),this._enableMaterial||(this._enableMaterial=C$99i.default.createWithBuiltin("2d-sprite",this)),this._exitMaterial||(this._exitMaterial=C$99i.default.createWithBuiltin("2d-sprite",this),this._exitMaterial.setStencilEnabled(C$99u.default.STENCIL_DISABLE)),this._clearMaterial||(this._clearMaterial=C$99i.default.createWithBuiltin("clear-stencil",this)),this.setMaterial(0,C$99t),this._graphics._materials[0]=C$99t,this._updateMaterial()},_updateMaterial:function(){var C$99t,C$99e=this._materials[0];C$99e&&(this._type===C$99l.IMAGE_STENCIL&&this.spriteFrame&&(C$99t=this.spriteFrame.getTexture(),C$99e.setProperty("texture",C$99t)),C$99e.setProperty("alphaThreshold",this.alphaThreshold))},_createGraphics:function(){this._graphics||(this._graphics=new C$99f,cc.Assembler.init(this._graphics),this._graphics.node=this.node,this._graphics.lineWidth=0,this._graphics.strokeColor=cc.color(0,0,0,0))},_updateGraphics:function(){var C$99t=this.node,C$99e=this._graphics,C$99i=(C$99e.clear(!1),C$99t._contentSize.width),C$99n=C$99t._contentSize.height,C$99r=-C$99i*C$99t._anchorPoint.x,C$99t=-C$99n*C$99t._anchorPoint.y;if(this._type===C$99l.RECT)C$99e.rect(C$99r,C$99t,C$99i,C$99n);else if(this._type===C$99l.ELLIPSE){for(var C$99s=function(C$99t,C$99e,C$99i){C$99c.length=0;for(var C$99n=2*Math.PI/C$99i,C$99r=0;C$99r<C$99i;++C$99r)C$99c.push(cc.v2(C$99e.x*Math.cos(C$99n*C$99r)+C$99t.x,C$99e.y*Math.sin(C$99n*C$99r)+C$99t.y));return C$99c}(cc.v2(C$99r+C$99i/2,C$99t+C$99n/2),{x:C$99i/2,y:C$99n/2},this._segments),C$99o=0;C$99o<C$99s.length;++C$99o){var C$99a=C$99s[C$99o];0===C$99o?C$99e.moveTo(C$99a.x,C$99a.y):C$99e.lineTo(C$99a.x,C$99a.y)}C$99e.close()}cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?C$99e.stroke():C$99e.fill()},_removeGraphics:function(){this._graphics&&(this._graphics.destroy(),this._graphics._destroyImmediate(),this._graphics=null)},_hitTest:function(C$99t){var C$99e=this.node,C$99i=C$99e.getContentSize(),C$99n=C$99i.width,C$99i=C$99i.height,C$99r=C$99p;if(C$99e._updateWorldMatrix(),!C$99s.default.invert(C$99a,C$99e._worldMatrix))return!1;C$99o.default.transformMat4(C$99r,C$99t,C$99a),C$99r.x+=C$99e._anchorPoint.x*C$99n,C$99r.y+=C$99e._anchorPoint.y*C$99i;C$99t=!1;return this.type===C$99l.RECT||this.type===C$99l.IMAGE_STENCIL?C$99t=0<=C$99r.x&&0<=C$99r.y&&C$99r.x<=C$99n&&C$99r.y<=C$99i:this.type===C$99l.ELLIPSE&&(C$99t=(C$99e=C$99r.x-.5*C$99n)*C$99e/((C$99e=C$99n/2)*C$99e)+(C$99n=C$99r.y-.5*C$99i)*C$99n/((C$99e=C$99i/2)*C$99e)<1),C$99t=this.inverted?!C$99t:C$99t},markForRender:function(C$99t){var C$99e=C$99r.FLAG_RENDER|C$99r.FLAG_UPDATE_RENDER_DATA|C$99r.FLAG_POST_RENDER;C$99t?(this.node._renderFlag|=C$99e,this.markForValidate()):this.node._renderFlag&=~C$99e},disableRender:function(){this.node._renderFlag&=~(C$99r.FLAG_RENDER|C$99r.FLAG_UPDATE_RENDER_DATA|C$99r.FLAG_POST_RENDER)}});cc.Mask=C$99e.exports=C$99t},{"../../renderer/gfx":312,"../assets/material/material-variant":60,"../graphics/graphics":131,"../renderer/render-flow":221,"../utils/misc":264,"../value-types/mat4":281,"../value-types/vec2":288,"./CCRenderComponent":89}],85:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../components/CCRenderComponent"),C$99r=C$99t("../../core/utils/blend-func"),C$99t=cc.Class({name:"cc.MotionStreak",extends:C$99n,mixins:[C$99r],editor:!1,ctor:function(){this._points=[]},properties:{preview:{default:!1,editorOnly:!0,notify:!1,animatable:!1},_fadeTime:1,fadeTime:{get:function(){return this._fadeTime},set:function(C$99t){this._fadeTime=C$99t,this.reset()},animatable:!1,tooltip:!1},_minSeg:1,minSeg:{get:function(){return this._minSeg},set:function(C$99t){this._minSeg=C$99t},animatable:!1,tooltip:!1},_stroke:64,stroke:{get:function(){return this._stroke},set:function(C$99t){this._stroke=C$99t},animatable:!1,tooltip:!1},_texture:{default:null,type:cc.Texture2D},texture:{get:function(){return this._texture},set:function(C$99t){this._texture!==C$99t&&(this._texture=C$99t,this._updateMaterial())},type:cc.Texture2D,animatable:!1,tooltip:!1},_color:cc.Color.WHITE,color:{get:function(){return this._color},set:function(C$99t){this._color=C$99t},type:cc.Color,tooltip:!1},_fastMode:!1,fastMode:{get:function(){return this._fastMode},set:function(C$99t){this._fastMode=C$99t},animatable:!1,tooltip:!1}},onEnable:function(){this._super(),this.reset()},_updateMaterial:function(){var C$99t=this.getMaterial(0);C$99t&&C$99t.setProperty("texture",this._texture),C$99r.prototype._updateMaterial.call(this)},onFocusInEditor:!1,onLostFocusInEditor:!1,reset:function(){this._points.length=0,this._assembler&&this._assembler._renderData.clear()},lateUpdate:function(C$99t){this._assembler&&this._assembler.update(this,C$99t)}});cc.MotionStreak=C$99e.exports=C$99t},{"../../core/utils/blend-func":257,"../components/CCRenderComponent":89}],86:[function(C$99t,C$99e,C$99i){"use strict";var C$99s=cc.Enum({Unified:0,Free:1}),C$99o=cc.Enum({Horizontal:0,Vertical:1}),C$99n=cc.Enum({PAGE_TURNING:0}),C$99r=cc.Class({name:"cc.PageView",extends:cc.ScrollView,editor:!1,ctor:function(){this._curPageIdx=0,this._lastPageIdx=0,this._pages=[],this._initContentPos=cc.v2(),this._scrollCenterOffsetX=[],this._scrollCenterOffsetY=[]},properties:{sizeMode:{default:C$99s.Unified,type:C$99s,tooltip:!1,notify:function(){this._syncSizeMode()}},direction:{default:C$99o.Horizontal,type:C$99o,tooltip:!1,notify:function(){this._syncScrollDirection()}},scrollThreshold:{default:.5,type:cc.Float,slide:!0,range:[0,1,.01],tooltip:!1},autoPageTurningThreshold:{default:100,type:cc.Float,tooltip:!1},pageTurningEventTiming:{default:.1,type:cc.Float,range:[0,1,.01],tooltip:!1},indicator:{default:null,type:cc.PageViewIndicator,tooltip:!1,notify:function(){this.indicator&&this.indicator.setPageView(this)}},pageTurningSpeed:{default:.3,type:cc.Float,tooltip:!1},pageEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{SizeMode:C$99s,Direction:C$99o,EventType:C$99n},__preload:function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this._updateAllPagesSize,this)},onEnable:function(){this._super(),this.node.on("scroll-ended-with-threshold",this._dispatchPageTurningEvent,this)},onDisable:function(){this._super(),this.node.off("scroll-ended-with-threshold",this._dispatchPageTurningEvent,this)},onLoad:function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)},onDestroy:function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._updateAllPagesSize,this)},getCurrentPageIndex:function(){return this._curPageIdx},setCurrentPageIndex:function(C$99t){this.scrollToPage(C$99t,!0)},getPages:function(){return this._pages},addPage:function(C$99t){C$99t&&-1===this._pages.indexOf(C$99t)&&this.content&&(this.content.addChild(C$99t),this._pages.push(C$99t),this._updatePageView())},insertPage:function(C$99t,C$99e){C$99e<0||!C$99t||-1!==this._pages.indexOf(C$99t)||!this.content||(this._pages.length<=C$99e?this.addPage(C$99t):(this._pages.splice(C$99e,0,C$99t),this.content.addChild(C$99t),this._updatePageView()))},removePage:function(C$99t){var C$99e;C$99t&&this.content&&(-1!==(C$99e=this._pages.indexOf(C$99t))?this.removePageAtIndex(C$99e):cc.warnID(4300,C$99t.name))},removePageAtIndex:function(C$99t){var C$99e,C$99i=this._pages;C$99t<0||C$99t>=C$99i.length||(C$99e=C$99i[C$99t])&&(this.content.removeChild(C$99e),C$99i.splice(C$99t,1),this._updatePageView())},removeAllPages:function(){if(this.content){for(var C$99t=this._pages,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)this.content.removeChild(C$99t[C$99e]);this._pages.length=0,this._updatePageView()}},scrollToPage:function(C$99t,C$99e){C$99t<0||C$99t>=this._pages.length||(C$99e=void 0!==C$99e?C$99e:.3,this._curPageIdx=C$99t,this.scrollToOffset(this._moveOffsetValue(C$99t),C$99e,!0),this.indicator&&this.indicator._changedState())},getScrollEndedEventTiming:function(){return this.pageTurningEventTiming},_syncScrollDirection:function(){this.horizontal=this.direction===C$99o.Horizontal,this.vertical=this.direction===C$99o.Vertical},_syncSizeMode:function(){var C$99t,C$99e;!this.content||(C$99t=this.content.getComponent(cc.Layout))&&(this.sizeMode===C$99s.Free&&0<this._pages.length&&(C$99e=this._pages[this._pages.length-1],this.direction===C$99o.Horizontal?(C$99t.paddingLeft=(this._view.width-this._pages[0].width)/2,C$99t.paddingRight=(this._view.width-C$99e.width)/2):this.direction===C$99o.Vertical&&(C$99t.paddingTop=(this._view.height-this._pages[0].height)/2,C$99t.paddingBottom=(this._view.height-C$99e.height)/2)),C$99t.updateLayout())},_updatePageView:function(){for(var C$99t=this.content.getComponent(cc.Layout),C$99e=(C$99t&&C$99t.enabled&&C$99t.updateLayout(),this._pages.length),C$99i=(this._curPageIdx>=C$99e&&(this._curPageIdx=0===C$99e?0:C$99e-1,this._lastPageIdx=this._curPageIdx),this._initContentPos),C$99n=0;C$99n<C$99e;++C$99n){var C$99r=this._pages[C$99n];C$99r.setSiblingIndex(C$99n),this.direction===C$99o.Horizontal?this._scrollCenterOffsetX[C$99n]=Math.abs(C$99i.x+C$99r.x):this._scrollCenterOffsetY[C$99n]=Math.abs(C$99i.y+C$99r.y)}this.indicator&&this.indicator._refresh()},_updateAllPagesSize:function(){if(this.sizeMode===C$99s.Unified)for(var C$99t=this._pages,C$99e=this._view.getContentSize(),C$99i=0,C$99n=C$99t.length;C$99i<C$99n;C$99i++)C$99t[C$99i].setContentSize(C$99e)},_initPages:function(){if(this.content){this._initContentPos=this.content.position;for(var C$99t=this.content.children,C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e];0<=this._pages.indexOf(C$99i)||this._pages.push(C$99i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}},_dispatchPageTurningEvent:function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,cc.Component.EventHandler.emitEvents(this.pageEvents,this,C$99n.PAGE_TURNING),this.node.emit("page-turning",this))},_isScrollable:function(C$99t,C$99e,C$99i){return this.sizeMode!==C$99s.Free?this.direction===C$99o.Horizontal?Math.abs(C$99t.x)>=this._view.width*this.scrollThreshold:this.direction===C$99o.Vertical?Math.abs(C$99t.y)>=this._view.height*this.scrollThreshold:void 0:this.direction===C$99o.Horizontal?(C$99n=this._scrollCenterOffsetX[C$99e],C$99r=this._scrollCenterOffsetX[C$99i],Math.abs(C$99t.x)>=Math.abs(C$99n-C$99r)*this.scrollThreshold):this.direction===C$99o.Vertical?(C$99n=this._scrollCenterOffsetY[C$99e],C$99r=this._scrollCenterOffsetY[C$99i],Math.abs(C$99t.y)>=Math.abs(C$99n-C$99r)*this.scrollThreshold):void 0;var C$99n,C$99r},_isQuicklyScrollable:function(C$99t){if(this.direction===C$99o.Horizontal){if(Math.abs(C$99t.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===C$99o.Vertical&&Math.abs(C$99t.y)>this.autoPageTurningThreshold)return!0;return!1},_moveOffsetValue:function(C$99t){var C$99e=cc.v2(0,0);return this.sizeMode===C$99s.Free?this.direction===C$99o.Horizontal?C$99e.x=this._scrollCenterOffsetX[C$99t]:this.direction===C$99o.Vertical&&(C$99e.y=this._scrollCenterOffsetY[C$99t]):this.direction===C$99o.Horizontal?C$99e.x=C$99t*this._view.width:this.direction===C$99o.Vertical&&(C$99e.y=C$99t*this._view.height),C$99e},_getDragDirection:function(C$99t){return this.direction===C$99o.Horizontal?0===C$99t.x?0:0<C$99t.x?1:-1:this.direction===C$99o.Vertical?0===C$99t.y?0:C$99t.y<0?1:-1:void 0},_handleReleaseLogic:function(C$99t){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent("scroll-ended"))},_autoScrollToPage:function(){if(this._startBounceBackIfNeeded()){var C$99t=this._getHowMuchOutOfBoundary();(0<(C$99t=this._clampDelta(C$99t)).x||C$99t.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(C$99t.x<0||0<C$99t.y)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{var C$99t=this._touchBeganPosition.sub(this._touchEndPosition),C$99e=this._curPageIdx,C$99i=C$99e+this._getDragDirection(C$99t),C$99n=this.pageTurningSpeed*Math.abs(C$99e-C$99i);if(C$99i<this._pages.length){if(this._isScrollable(C$99t,C$99e,C$99i))return void this.scrollToPage(C$99i,C$99n);C$99t=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(C$99t))return void this.scrollToPage(C$99i,C$99n)}this.scrollToPage(C$99e,C$99n)}},_onTouchBegan:function(C$99t,C$99e){this._touchBeganPosition=C$99t.touch.getLocation(),this._super(C$99t,C$99e)},_onTouchMoved:function(C$99t,C$99e){this._super(C$99t,C$99e)},_onTouchEnded:function(C$99t,C$99e){this._touchEndPosition=C$99t.touch.getLocation(),this._super(C$99t,C$99e)},_onTouchCancelled:function(C$99t,C$99e){this._touchEndPosition=C$99t.touch.getLocation(),this._super(C$99t,C$99e)},_onMouseWheel:function(){}});cc.PageView=C$99e.exports=C$99r},{}],87:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Enum({HORIZONTAL:0,VERTICAL:1}),C$99t=cc.Class({name:"cc.PageViewIndicator",extends:C$99t("./CCComponent"),editor:!1,properties:{_layout:null,_pageView:null,_indicators:[],spriteFrame:{default:null,type:cc.SpriteFrame,tooltip:!1},direction:{default:C$99n.HORIZONTAL,type:C$99n,tooltip:!1},cellSize:{default:cc.size(20,20),tooltip:!1},spacing:{default:0,tooltip:!1}},statics:{Direction:C$99n},onLoad:function(){this._updateLayout()},setPageView:function(C$99t){this._pageView=C$99t,this._refresh()},_updateLayout:function(){this._layout=this.getComponent(cc.Layout),this._layout||(this._layout=this.addComponent(cc.Layout)),this.direction===C$99n.HORIZONTAL?(this._layout.type=cc.Layout.Type.HORIZONTAL,this._layout.spacingX=this.spacing):this.direction===C$99n.VERTICAL&&(this._layout.type=cc.Layout.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=cc.Layout.ResizeMode.CONTAINER},_createIndicator:function(){var C$99t=new cc.Node,C$99e=C$99t.addComponent(cc.Sprite);return C$99e.spriteFrame=this.spriteFrame,C$99e.sizeMode=cc.Sprite.SizeMode.CUSTOM,C$99t.parent=this.node,C$99t.width=this.cellSize.width,C$99t.height=this.cellSize.height,C$99t},_changedState:function(){var C$99t=this._indicators;if(0!==C$99t.length){var C$99e=this._pageView._curPageIdx;if(!(C$99e>=C$99t.length)){for(var C$99i=0;C$99i<C$99t.length;++C$99i)C$99t[C$99i].opacity=127.5;C$99t[C$99e].opacity=255}}},_refresh:function(){if(this._pageView){var C$99t=this._indicators,C$99e=this._pageView.getPages();if(C$99e.length!==C$99t.length){var C$99i=0;if(C$99e.length>C$99t.length)for(C$99i=0;C$99i<C$99e.length;++C$99i)C$99t[C$99i]||(C$99t[C$99i]=this._createIndicator());else for(C$99i=C$99t.length-C$99e.length;0<C$99i;--C$99i){var C$99n=C$99t[C$99i-1];this.node.removeChild(C$99n),C$99t.splice(C$99i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}}});cc.PageViewIndicator=C$99e.exports=C$99t},{"./CCComponent":78}],88:[function(C$99t,C$99e,C$99i){"use strict";var C$99h=C$99t("../utils/misc"),C$99t=C$99t("./CCComponent"),C$99u=cc.Enum({HORIZONTAL:0,VERTICAL:1,FILLED:2}),C$99t=cc.Class({name:"cc.ProgressBar",extends:C$99t,editor:!1,_initBarSprite:function(){var C$99t,C$99e,C$99i,C$99n;!this.barSprite||(C$99t=this.barSprite.node)&&(C$99e=this.node.getContentSize(),C$99i=this.node.getAnchorPoint(),C$99n=C$99t.getContentSize(),C$99t.parent===this.node&&this.node.setContentSize(C$99n),this.barSprite.fillType===cc.Sprite.FillType.RADIAL&&(this.mode=C$99u.FILLED),C$99n=C$99t.getContentSize(),this.mode===C$99u.HORIZONTAL?this.totalLength=C$99n.width:this.mode===C$99u.VERTICAL?this.totalLength=C$99n.height:this.totalLength=this.barSprite.fillRange,C$99t.parent===this.node&&(C$99n=-C$99e.width*C$99i.x,C$99t.setPosition(cc.v2(C$99n,0))))},_updateBarStatus:function(){if(this.barSprite){var C$99t=this.barSprite.node;if(C$99t){var C$99e,C$99i,C$99n,C$99r=C$99t.getAnchorPoint(),C$99s=C$99t.getContentSize(),C$99o=C$99t.getPosition(),C$99a=cc.v2(0,.5),C$99c=C$99h.clamp01(this.progress),C$99l=this.totalLength*C$99c;switch(this.mode){case C$99u.HORIZONTAL:this.reverse&&(C$99a=cc.v2(1,.5)),C$99e=cc.size(C$99l,C$99s.height),C$99i=this.totalLength,C$99n=C$99s.height;break;case C$99u.VERTICAL:C$99a=this.reverse?cc.v2(.5,1):cc.v2(.5,0),C$99e=cc.size(C$99s.width,C$99l),C$99i=C$99s.width,C$99n=this.totalLength}this.mode===C$99u.FILLED?this.barSprite.type!==cc.Sprite.Type.FILLED?cc.warn("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this.reverse&&(C$99l*=-1),this.barSprite.fillRange=C$99l):this.barSprite.type!==cc.Sprite.Type.FILLED?(C$99c=C$99a.x-C$99r.x,C$99r=C$99a.y-C$99r.y,C$99c=cc.v2(C$99i*C$99c,C$99n*C$99r),C$99t.setPosition(C$99o.x+C$99c.x,C$99o.y+C$99c.y),C$99t.setAnchorPoint(C$99a),C$99t.setContentSize(C$99e)):cc.warn("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}}},properties:{barSprite:{default:null,type:cc.Sprite,tooltip:!1,notify:function(){this._initBarSprite()},animatable:!1},mode:{default:C$99u.HORIZONTAL,type:C$99u,tooltip:!1,notify:function(){var C$99t;!this.barSprite||(C$99t=this.barSprite.node)&&(C$99t=C$99t.getContentSize(),this.mode===C$99u.HORIZONTAL?this.totalLength=C$99t.width:this.mode===C$99u.VERTICAL?this.totalLength=C$99t.height:this.mode===C$99u.FILLED&&(this.totalLength=this.barSprite.fillRange))},animatable:!1},_N$totalLength:1,totalLength:{range:[0,Number.MAX_VALUE],tooltip:!1,get:function(){return this._N$totalLength},set:function(C$99t){this.mode===C$99u.FILLED&&(C$99t=C$99h.clamp01(C$99t)),this._N$totalLength=C$99t,this._updateBarStatus()}},progress:{default:1,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){this._updateBarStatus()}},reverse:{default:!1,tooltip:!1,notify:function(){this.barSprite&&(this.barSprite.fillStart=1-this.barSprite.fillStart),this._updateBarStatus()},animatable:!1}},statics:{Mode:C$99u}});cc.ProgressBar=C$99e.exports=C$99t},{"../utils/misc":264,"./CCComponent":78}],89:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99s(C$99t("../renderer/assembler")),C$99r=C$99s(C$99t("../assets/material/material-variant"));function C$99s(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}var C$99o=C$99t("./CCComponent"),C$99a=C$99t("../renderer/render-flow"),C$99c=C$99t("../assets/material/CCMaterial"),C$99t=cc.Class({name:"RenderComponent",extends:C$99o,editor:!1,properties:{_materials:{default:[],type:C$99c},materials:{get:function(){return this._materials},set:function(C$99t){this._materials=C$99t,this._activateMaterial()},type:[C$99c],displayName:"Materials",animatable:!1}},ctor:function(){this._vertsDirty=!0,this._assembler=null},_resetAssembler:function(){C$99n.default.init(this),this._updateColor(),this.setVertsDirty()},__preload:function(){this._resetAssembler(),this._activateMaterial()},onEnable:function(){this.node._renderComponent&&(this.node._renderComponent.enabled=!1),(this.node._renderComponent=this).node._renderFlag|=C$99a.FLAG_OPACITY_COLOR,this.setVertsDirty()},onDisable:function(){this.node._renderComponent=null,this.disableRender()},onDestroy:function(){for(var C$99t=this._materials,C$99e=0;C$99e<C$99t.length;C$99e++)cc.pool.material.put(C$99t[C$99e]);C$99t.length=0,cc.pool.assembler.put(this._assembler)},setVertsDirty:function(){this._vertsDirty=!0,this.markForRender(!0)},_on3DNodeChanged:function(){this._resetAssembler()},_validateRender:function(){},markForValidate:function(){cc.RenderFlow.registerValidate(this)},markForRender:function(C$99t){var C$99e=C$99a.FLAG_RENDER|C$99a.FLAG_UPDATE_RENDER_DATA;C$99t?(this.node._renderFlag|=C$99e,this.markForValidate()):this.node._renderFlag&=~C$99e},disableRender:function(){this.node._renderFlag&=~(C$99a.FLAG_RENDER|C$99a.FLAG_UPDATE_RENDER_DATA)},getMaterial:function(C$99t){if(C$99t<0||C$99t>=this._materials.length)return null;var C$99e=this._materials[C$99t];if(!C$99e)return null;var C$99i=C$99r.default.create(C$99e,this);return C$99i!==C$99e&&this.setMaterial(C$99t,C$99i),C$99i},getMaterials:function(){for(var C$99t=this._materials,C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e]=C$99r.default.create(C$99t[C$99e],this);return C$99t},setMaterial:function(C$99t,C$99e){return C$99e!==this._materials[C$99t]&&(C$99e=C$99r.default.create(C$99e,this),this._materials[C$99t]=C$99e),this._updateMaterial(),this.markForRender(!0),C$99e},_getDefaultMaterial:function(){return C$99c.getBuiltinMaterial("2d-sprite")},_activateMaterial:function(){var C$99t,C$99e=this._materials;C$99e[0]||(C$99t=this._getDefaultMaterial(),C$99e[0]=C$99t);for(var C$99i=0;C$99i<C$99e.length;C$99i++)C$99e[C$99i]=C$99r.default.create(C$99e[C$99i],this);this._updateMaterial()},_updateMaterial:function(){},_updateColor:function(){this._assembler.updateColor&&this._assembler.updateColor(this)},_checkBacth:function(C$99t,C$99e){var C$99i=this._materials[0];(C$99i&&C$99i.getHash()!==C$99t.material.getHash()||C$99t.cullingMask!==C$99e)&&(C$99t._flush(),C$99t.node=C$99i.getDefine("CC_USE_MODEL")?this.node:C$99t._dummyNode,C$99t.material=C$99i,C$99t.cullingMask=C$99e)}});cc.RenderComponent=C$99e.exports=C$99t},{"../assets/material/CCMaterial":53,"../assets/material/material-variant":60,"../renderer/assembler":217,"../renderer/render-flow":221,"./CCComponent":78}],90:[function(C$99t,C$99e,C$99a){"use strict";var C$99i=C$99t("../platform/js"),C$99n=C$99t("../platform/CCMacro"),C$99u=C$99t("../utils/text-utils"),C$99h=new(C$99t("../utils/html-text-parser")),C$99_=C$99n.TextAlignment,C$99r=C$99n.VerticalTextAlignment,C$99s="RICHTEXT_CHILD",C$99l="RICHTEXT_Image_CHILD",C$99t=cc.Label.CacheMode;var C$99o=new C$99i.Pool(function(C$99t){if(!cc.isValid(C$99t))return!1;C$99t=C$99t.getComponent(cc.LabelOutline);return C$99t&&(C$99t.width=0),!0},20),C$99n=(C$99o.get=function(C$99t,C$99e){var C$99i=this._get(),C$99n=((C$99i=C$99i||new cc.PrivateNode(C$99s)).setPosition(0,0),C$99i.setAnchorPoint(.5,.5),C$99i.skewX=0,C$99i.getComponent(cc.Label));return(C$99n=C$99n||C$99i.addComponent(cc.Label)).string="",C$99n.horizontalAlign=C$99_.LEFT,C$99n.verticalAlign=C$99r.CENTER,C$99i},cc.Class({name:"cc.RichText",extends:cc.Component,ctor:function(){this._textArray=null,this._labelSegments=[],this._labelSegmentsCache=[],this._linesWidth=[],this._updateRichTextStatus=this._updateRichText},editor:!1,properties:{string:{default:"<color=#00ff00>Rich</c><color=#0fffff>Text</color>",multiline:!0,tooltip:!1,notify:function(){this._updateRichTextStatus()}},horizontalAlign:{default:C$99_.LEFT,type:C$99_,tooltip:!1,animatable:!1,notify:function(C$99t){this.horizontalAlign!==C$99t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},fontSize:{default:40,tooltip:!1,notify:function(C$99t){this.fontSize!==C$99t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},_fontFamily:"Arial",fontFamily:{tooltip:!1,get:function(){return this._fontFamily},set:function(C$99t){this._fontFamily!==C$99t&&(this._fontFamily=C$99t,this._layoutDirty=!0,this._updateRichTextStatus())},animatable:!1},font:{default:null,type:cc.TTFFont,tooltip:!1,notify:function(C$99t){this.font!==C$99t&&(this._layoutDirty=!0,this.font?(this.useSystemFont=!1,this._onTTFLoaded()):this.useSystemFont=!0,this._updateRichTextStatus())}},_isSystemFontUsed:!0,useSystemFont:{get:function(){return this._isSystemFontUsed},set:function(C$99t){this._isSystemFontUsed!==C$99t&&(this._isSystemFontUsed=C$99t,this._layoutDirty=!0,this._updateRichTextStatus())},animatable:!1,tooltip:!1},cacheMode:{default:C$99t.NONE,type:C$99t,tooltip:!1,notify:function(C$99t){this.cacheMode!==C$99t&&this._updateRichTextStatus()},animatable:!1},maxWidth:{default:0,tooltip:!1,notify:function(C$99t){this.maxWidth!==C$99t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},lineHeight:{default:40,tooltip:!1,notify:function(C$99t){this.lineHeight!==C$99t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},imageAtlas:{default:null,type:cc.SpriteAtlas,tooltip:!1,notify:function(C$99t){this.imageAtlas!==C$99t&&(this._layoutDirty=!0,this._updateRichTextStatus())}},handleTouchEvent:{default:!0,tooltip:!1,notify:function(C$99t){this.handleTouchEvent!==C$99t&&this.enabledInHierarchy&&(this.handleTouchEvent?this._addEventListeners():this._removeEventListeners())}}},statics:{HorizontalAlign:C$99_,VerticalAlign:C$99r},onEnable:function(){this.handleTouchEvent&&this._addEventListeners(),this._updateRichText(),this._activateChildren(!0)},onDisable:function(){this.handleTouchEvent&&this._removeEventListeners(),this._activateChildren(!1)},start:function(){this._onTTFLoaded()},_onColorChanged:function(C$99e){this.node.children.forEach(function(C$99t){C$99t.color=C$99e})},_addEventListeners:function(){this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.COLOR_CHANGED,this._onColorChanged,this)},_removeEventListeners:function(){this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.COLOR_CHANGED,this._onColorChanged,this)},_updateLabelSegmentTextAttributes:function(){this._labelSegments.forEach(function(C$99t){this._applyTextAttribute(C$99t,null,!0)}.bind(this))},_createFontLabel:function(C$99t){return C$99o.get(C$99t,this)},_onTTFLoaded:function(){var C$99i;!(this.font instanceof cc.TTFFont)||this.font._nativeAsset?(this._layoutDirty=!0,this._updateRichText()):(C$99i=this,cc.loader.load(this.font.nativeUrl,function(C$99t,C$99e){C$99i._layoutDirty=!0,C$99i._updateRichText()}))},_measureText:function(C$99i,C$99t){function C$99e(C$99t){var C$99e;return 0===C$99n._labelSegmentsCache.length?(C$99e=C$99n._createFontLabel(C$99t),C$99n._labelSegmentsCache.push(C$99e)):C$99e=C$99n._labelSegmentsCache[0],C$99e._styleIndex=C$99i,C$99n._applyTextAttribute(C$99e,C$99t,!0),C$99e.getContentSize().width}var C$99n=this;return C$99t?C$99e(C$99t):C$99e},_onTouchEnded:function(C$99n){for(var C$99r=this,C$99s=this.node.getComponents(cc.Component),C$99t=0;C$99t<this._labelSegments.length;++C$99t)!function(C$99t){var C$99t=C$99r._labelSegments[C$99t],C$99e=C$99t._clickHandler,C$99i=C$99t._clickParam;C$99e&&C$99r._containsTouchLocation(C$99t,C$99n.touch.getLocation())&&(C$99s.forEach(function(C$99t){C$99t.enabledInHierarchy&&C$99t[C$99e]&&C$99t[C$99e](C$99n,C$99i)}),C$99n.stopPropagation())}(C$99t)},_containsTouchLocation:function(C$99t,C$99e){return C$99t.getBoundingBoxToWorld().contains(C$99e)},_resetState:function(){for(var C$99t=this.node.children,C$99e=C$99t.length-1;0<=C$99e;C$99e--){var C$99i=C$99t[C$99e];C$99i.name!==C$99s&&C$99i.name!==C$99l||(C$99i.parent===this.node?C$99i.parent=null:C$99t.splice(C$99e,1),C$99i.name===C$99s&&C$99o.put(C$99i))}this._labelSegments.length=0,this._labelSegmentsCache.length=0,this._linesWidth.length=0,this._lineOffsetX=0,this._lineCount=1,this._labelWidth=0,this._labelHeight=0,this._layoutDirty=!0},onRestore:!1,_activateChildren:function(C$99t){for(var C$99e=this.node.children.length-1;0<=C$99e;C$99e--){var C$99i=this.node.children[C$99e];C$99i.name!==C$99s&&C$99i.name!==C$99l||(C$99i.active=C$99t)}},_addLabelSegment:function(C$99t,C$99e){var C$99i=0===this._labelSegmentsCache.length?this._createFontLabel(C$99t):this._labelSegmentsCache.pop();return C$99i._styleIndex=C$99e,C$99i._lineCount=this._lineCount,C$99i.active=this.node.active,C$99i.setAnchorPoint(0,0),this._applyTextAttribute(C$99i,C$99t),this.node.addChild(C$99i),this._labelSegments.push(C$99i),C$99i},_updateRichTextWithMaxWidth:function(C$99t,C$99h,C$99e){var C$99i=C$99h;if(0<this._lineOffsetX&&C$99i+this._lineOffsetX>this.maxWidth)for(var C$99n=0;this._lineOffsetX<=this.maxWidth;){var C$99r,C$99s=this._getFirstWordLen(C$99t,C$99n,C$99t.length),C$99o=C$99t.substr(C$99n,C$99s),C$99o=this._measureText(C$99e,C$99o);if(!(this._lineOffsetX+C$99o<=this.maxWidth)){0<C$99n&&(C$99r=C$99t.substr(0,C$99n),this._addLabelSegment(C$99r,C$99e),C$99t=C$99t.substr(C$99n,C$99t.length),C$99i=this._measureText(C$99e,C$99t)),this._updateLineInfo();break}this._lineOffsetX+=C$99o,C$99n+=C$99s}if(C$99i>this.maxWidth)for(var C$99a=C$99u.fragmentText(C$99t,C$99i,this.maxWidth,this._measureText(C$99e)),C$99c=0;C$99c<C$99a.length;++C$99c){var C$99l=C$99a[C$99c],C$99l=this._addLabelSegment(C$99l,C$99e).getContentSize();this._lineOffsetX+=C$99l.width,1<C$99a.length&&C$99c<C$99a.length-1&&this._updateLineInfo()}else this._lineOffsetX+=C$99i,this._addLabelSegment(C$99t,C$99e)},_isLastComponentCR:function(C$99t){return C$99t.length-1===C$99t.lastIndexOf("\n")},_updateLineInfo:function(){this._linesWidth.push(this._lineOffsetX),this._lineOffsetX=0,this._lineCount++},_needsUpdateTextLayout:function(C$99t){if(this._layoutDirty||!this._textArray||!C$99t)return!0;if(this._textArray.length!==C$99t.length)return!0;for(var C$99e=0;C$99e<this._textArray.length;++C$99e){var C$99i=this._textArray[C$99e],C$99n=C$99t[C$99e];if(C$99i.text!==C$99n.text)return!0;C$99i=C$99i.style,C$99n=C$99n.style;if(C$99i){if(C$99n){if(!C$99i.outline!=!C$99n.outline)return!0;if(C$99i.size!==C$99n.size||!C$99i.italic!=!C$99n.italic||C$99i.isImage!==C$99n.isImage)return!0;if(C$99i.src!==C$99n.src||C$99i.imageAlign!==C$99n.imageAlign||C$99i.imageHeight!==C$99n.imageHeight||C$99i.imageWidth!==C$99n.imageWidth||C$99i.imageOffset!==C$99n.imageOffset)return!0}else if(C$99i.size||C$99i.italic||C$99i.isImage||C$99i.outline)return!0}else if(C$99n&&(C$99n.size||C$99n.italic||C$99n.isImage||C$99n.outline))return!0}return!1},_addRichTextImageElement:function(C$99t){var C$99e=C$99t.style.src,C$99e=this.imageAtlas.getSpriteFrame(C$99e);if(C$99e){var C$99i=new cc.PrivateNode(C$99l),C$99n=C$99i.addComponent(cc.Sprite);switch(C$99t.style.imageAlign){case"top":C$99i.setAnchorPoint(0,1);break;case"center":C$99i.setAnchorPoint(0,.5);break;default:C$99i.setAnchorPoint(0,0)}C$99t.style.imageOffset&&(C$99i._imageOffset=C$99t.style.imageOffset),C$99n.type=cc.Sprite.Type.SLICED,C$99n.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.node.addChild(C$99i),this._labelSegments.push(C$99i);var C$99r=C$99e.getRect(),C$99s=1,C$99o=C$99r.width,C$99r=C$99r.height,C$99a=C$99t.style.imageWidth,C$99c=C$99t.style.imageHeight;C$99o*=C$99s=0<C$99c?C$99c/C$99r:this.lineHeight/C$99r,C$99r*=C$99s,0<C$99a&&(C$99o=C$99a),0<this.maxWidth?(this._lineOffsetX+C$99o>this.maxWidth&&this._updateLineInfo(),this._lineOffsetX+=C$99o):(this._lineOffsetX+=C$99o,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),C$99n.spriteFrame=C$99e,C$99i.setContentSize(C$99o,C$99r),C$99i._lineCount=this._lineCount,C$99t.style.event?(C$99t.style.event.click&&(C$99i._clickHandler=C$99t.style.event.click),C$99t.style.event.param?C$99i._clickParam=C$99t.style.event.param:C$99i._clickParam=""):C$99i._clickHandler=null}else cc.warnID(4400)},_updateRichText:function(){if(this.enabledInHierarchy){var C$99t=C$99h.parse(this.string);if(!this._needsUpdateTextLayout(C$99t))return this._textArray=C$99t,void this._updateLabelSegmentTextAttributes();this._textArray=C$99t,this._resetState();for(var C$99e=!1,C$99i=0;C$99i<this._textArray.length;++C$99i){var C$99n=this._textArray[C$99i],C$99r=C$99n.text;if(""===C$99r){if(C$99n.style&&C$99n.style.newline){this._updateLineInfo();continue}if(C$99n.style&&C$99n.style.isImage&&this.imageAtlas){this._addRichTextImageElement(C$99n);continue}}for(var C$99s=C$99r.split("\n"),C$99o=0;C$99o<C$99s.length;++C$99o){var C$99a,C$99c=C$99s[C$99o];""!==C$99c?(C$99e=!1,0<this.maxWidth?(C$99a=this._measureText(C$99i,C$99c),this._updateRichTextWithMaxWidth(C$99c,C$99a,C$99i)):(C$99a=this._addLabelSegment(C$99c,C$99i).getContentSize(),this._lineOffsetX+=C$99a.width,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),1<C$99s.length&&C$99o<C$99s.length-1&&this._updateLineInfo()):this._isLastComponentCR(C$99r)&&C$99o===C$99s.length-1||(this._updateLineInfo(),C$99e=!0)}}C$99e||this._linesWidth.push(this._lineOffsetX),0<this.maxWidth&&(this._labelWidth=this.maxWidth),this._labelHeight=(this._lineCount+C$99u.BASELINE_RATIO)*this.lineHeight,this.node.setContentSize(this._labelWidth,this._labelHeight),this._updateRichTextPosition(),this._layoutDirty=!1}},_getFirstWordLen:function(C$99t,C$99e,C$99i){var C$99n=C$99t.charAt(C$99e);if(C$99u.isUnicodeCJK(C$99n)||C$99u.isUnicodeSpace(C$99n))return 1;for(var C$99r=1,C$99s=C$99e+1;C$99s<C$99i&&(C$99n=C$99t.charAt(C$99s),!C$99u.isUnicodeSpace(C$99n)&&!C$99u.isUnicodeCJK(C$99n));++C$99s)C$99r++;return C$99r},_updateRichTextPosition:function(){for(var C$99t=0,C$99e=1,C$99h=this._lineCount,C$99i=0;C$99i<this._labelSegments.length;++C$99i){var C$99n=this._labelSegments[C$99i],C$99r=C$99n._lineCount,C$99s=(C$99e<C$99r&&(C$99t=0,C$99e=C$99r),0);switch(this.horizontalAlign){case C$99_.LEFT:C$99s=-this._labelWidth/2;break;case C$99_.CENTER:C$99s=-this._linesWidth[C$99r-1]/2;break;case C$99_.RIGHT:C$99s=this._labelWidth/2-this._linesWidth[C$99r-1]}C$99n.x=C$99t+C$99s;var C$99o=C$99n.getContentSize();if(C$99n.y=this.lineHeight*(C$99h-C$99r)-this._labelHeight/2,C$99r===C$99e&&(C$99t+=C$99o.width),C$99n.getComponent(cc.Sprite)){var C$99a,C$99c=this.lineHeight,C$99l=this.lineHeight*(1+C$99u.BASELINE_RATIO);switch(C$99n.anchorY){case 1:C$99n.y+=C$99c+(C$99l-C$99c)/2;break;case.5:C$99n.y+=C$99l/2;break;default:C$99n.y+=(C$99l-C$99c)/2}C$99n._imageOffset&&(1===(C$99o=C$99n._imageOffset.split(",")).length&&C$99o[0]?(C$99a=parseFloat(C$99o[0]),Number.isInteger(C$99a)&&(C$99n.y+=C$99a)):2===C$99o.length&&(C$99a=parseFloat(C$99o[0]),C$99o=parseFloat(C$99o[1]),Number.isInteger(C$99a)&&(C$99n.x+=C$99a),Number.isInteger(C$99o)&&(C$99n.y+=C$99o)))}C$99o=C$99n.getComponent(cc.LabelOutline);C$99o&&C$99o.width&&(C$99n.y=C$99n.y-C$99o.width)}},_convertLiteralColorValue:function(C$99t){var C$99e=C$99t.toUpperCase();return cc.Color[C$99e]||cc.color().fromHEX(C$99t)},_applyTextAttribute:function(C$99t,C$99e,C$99i){var C$99n,C$99r,C$99s=C$99t.getComponent(cc.Label);C$99s&&(C$99r=C$99t._styleIndex,C$99n=null,(C$99n=this._textArray[C$99r]?this._textArray[C$99r].style:C$99n)&&C$99n.color?C$99t.color=this._convertLiteralColorValue(C$99n.color):C$99t.color=this.node.color,C$99s.cacheMode=this.cacheMode,this.font instanceof cc.Font&&!this._isSystemFontUsed?C$99s.font=this.font:C$99s.fontFamily=this.fontFamily,C$99s.useSystemFont=this._isSystemFontUsed,C$99s.lineHeight=this.lineHeight,C$99s.enableBold=C$99n&&C$99n.bold,C$99s.enableItalics=C$99n&&C$99n.italic,C$99n&&C$99n.italic&&(C$99t.skewX=12),C$99s.enableUnderline=C$99n&&C$99n.underline,C$99n&&C$99n.outline&&((C$99r=(C$99r=C$99t.getComponent(cc.LabelOutline))||C$99t.addComponent(cc.LabelOutline)).color=this._convertLiteralColorValue(C$99n.outline.color),C$99r.width=C$99n.outline.width),C$99n&&C$99n.size?C$99s.fontSize=C$99n.size:C$99s.fontSize=this.fontSize,null!==C$99e&&(C$99s.string=C$99e="string"!=typeof C$99e?""+C$99e:C$99e),C$99i&&C$99s._forceUpdateRenderData(),C$99n&&C$99n.event?(C$99n.event.click&&(C$99t._clickHandler=C$99n.event.click),C$99n.event.param?C$99t._clickParam=C$99n.event.param:C$99t._clickParam=""):C$99t._clickHandler=null)},onDestroy:function(){for(var C$99t=0;C$99t<this._labelSegments.length;++C$99t)this._labelSegments[C$99t].removeFromParent(),C$99o.put(this._labelSegments[C$99t])}}));cc.RichText=C$99e.exports=C$99n},{"../platform/CCMacro":194,"../platform/js":209,"../utils/html-text-parser":261,"../utils/text-utils":271}],91:[function(C$99t,C$99e,C$99i){"use strict";var C$99o=C$99t("../utils/misc"),C$99h=(C$99t("./CCComponent"),cc.Enum({HORIZONTAL:0,VERTICAL:1})),C$99t=cc.Class({name:"cc.Scrollbar",extends:C$99t("./CCComponent"),editor:!1,properties:{_scrollView:null,_touching:!1,_autoHideRemainingTime:{default:0,serializable:!1},_opacity:255,handle:{default:null,type:cc.Sprite,tooltip:!1,notify:function(){this._onScroll(cc.v2(0,0))},animatable:!1},direction:{default:C$99h.HORIZONTAL,type:C$99h,tooltip:!1,notify:function(){this._onScroll(cc.v2(0,0))},animatable:!1},enableAutoHide:{default:!0,animatable:!1,tooltip:!1},autoHideTime:{default:1,animatable:!1,tooltip:!1}},statics:{Direction:C$99h},setTargetScrollView:function(C$99t){this._scrollView=C$99t},_convertToScrollViewSpace:function(C$99t){var C$99e=this._scrollView.node,C$99t=C$99t.convertToWorldSpaceAR(cc.v2(-C$99t.anchorX*C$99t.width,-C$99t.anchorY*C$99t.height)),C$99t=C$99e.convertToNodeSpaceAR(C$99t);return C$99t.x+=C$99e.anchorX*C$99e.width,C$99t.y+=C$99e.anchorY*C$99e.height,C$99t},_setOpacity:function(C$99t){this.handle&&(this.node.opacity=C$99t,this.handle.node.opacity=C$99t)},_onScroll:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l;!this._scrollView||(C$99e=this._scrollView.content)&&(C$99c=C$99e.getContentSize(),C$99l=this._scrollView.node.getContentSize(),C$99i=this.node.getContentSize(),this._conditionalDisableScrollBar(C$99c,C$99l)||(this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)),C$99a=C$99o=C$99s=C$99r=C$99n=0,this.direction===C$99h.HORIZONTAL?(C$99n=C$99c.width,C$99r=C$99l.width,C$99a=C$99i.width,C$99s=C$99t.x,C$99o=-this._convertToScrollViewSpace(C$99e).x):this.direction===C$99h.VERTICAL&&(C$99n=C$99c.height,C$99r=C$99l.height,C$99a=C$99i.height,C$99s=C$99t.y,C$99o=-this._convertToScrollViewSpace(C$99e).y),C$99c=this._calculateLength(C$99n,C$99r,C$99a,C$99s),C$99l=this._calculatePosition(C$99n,C$99r,C$99a,C$99o,C$99s,C$99c),this._updateLength(C$99c),this._updateHanlderPosition(C$99l)))},_updateHanlderPosition:function(C$99t){var C$99e;this.handle&&(C$99e=this._fixupHandlerPosition(),this.handle.node.setPosition(C$99t.x+C$99e.x,C$99t.y+C$99e.y))},_fixupHandlerPosition:function(){var C$99t=this.node.getContentSize(),C$99e=this.node.getAnchorPoint(),C$99i=this.handle.node.getContentSize(),C$99n=this.handle.node.parent,C$99e=this.node.convertToWorldSpaceAR(cc.v2(-C$99t.width*C$99e.x,-C$99t.height*C$99e.y)),C$99n=C$99n.convertToNodeSpaceAR(C$99e);return this.direction===C$99h.HORIZONTAL?C$99n=cc.v2(C$99n.x,C$99n.y+(C$99t.height-C$99i.height)/2):this.direction===C$99h.VERTICAL&&(C$99n=cc.v2(C$99n.x+(C$99t.width-C$99i.width)/2,C$99n.y)),this.handle.node.setPosition(C$99n),C$99n},_onTouchBegan:function(){this.enableAutoHide&&(this._touching=!0)},_conditionalDisableScrollBar:function(C$99t,C$99e){return C$99t.width<=C$99e.width&&this.direction===C$99h.HORIZONTAL||C$99t.height<=C$99e.height&&this.direction===C$99h.VERTICAL},_onTouchEnded:function(){if(this.enableAutoHide&&(this._touching=!1,!(this.autoHideTime<=0))){if(this._scrollView){var C$99t=this._scrollView.content;if(C$99t){var C$99t=C$99t.getContentSize(),C$99e=this._scrollView.node.getContentSize();if(this._conditionalDisableScrollBar(C$99t,C$99e))return}}this._autoHideRemainingTime=this.autoHideTime}},_calculateLength:function(C$99t,C$99e,C$99i,C$99n){return C$99n&&(C$99t+=20*(0<C$99n?C$99n:-C$99n)),C$99i*(C$99e/C$99t)},_calculatePosition:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){C$99t-=C$99e,C$99r&&(C$99t+=Math.abs(C$99r)),C$99e=0,C$99r=(C$99i-C$99s)*(C$99e=C$99t?C$99o.clamp01(C$99e=C$99n/C$99t):C$99e);return this.direction===C$99h.VERTICAL?cc.v2(0,C$99r):cc.v2(C$99r,0)},_updateLength:function(C$99t){var C$99e,C$99i;this.handle&&(C$99i=(C$99e=this.handle.node).getContentSize(),C$99e.setAnchorPoint(cc.v2(0,0)),this.direction===C$99h.HORIZONTAL?C$99e.setContentSize(C$99t,C$99i.height):C$99e.setContentSize(C$99i.width,C$99t))},_processAutoHide:function(C$99t){!this.enableAutoHide||this._autoHideRemainingTime<=0||this._touching||(this._autoHideRemainingTime-=C$99t,this._autoHideRemainingTime<=this.autoHideTime&&(this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime),C$99t=this._opacity*(this._autoHideRemainingTime/this.autoHideTime),this._setOpacity(C$99t)))},start:function(){this.enableAutoHide&&this._setOpacity(0)},hide:function(){this._autoHideRemainingTime=0,this._setOpacity(0)},show:function(){this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},update:function(C$99t){this._processAutoHide(C$99t)}});cc.Scrollbar=C$99e.exports=C$99t},{"../utils/misc":264,"./CCComponent":78}],92:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){return(new Date).getMilliseconds()}var C$99r=C$99t("../CCNode").EventType,C$99s=cc.v2(),C$99o=cc.v2(),C$99a=cc.Enum({SCROLL_TO_TOP:0,SCROLL_TO_BOTTOM:1,SCROLL_TO_LEFT:2,SCROLL_TO_RIGHT:3,SCROLLING:4,BOUNCE_TOP:5,BOUNCE_BOTTOM:6,BOUNCE_LEFT:7,BOUNCE_RIGHT:8,SCROLL_ENDED:9,TOUCH_UP:10,AUTOSCROLL_ENDED_WITH_THRESHOLD:11,SCROLL_BEGAN:12}),C$99c={"scroll-to-top":C$99a.SCROLL_TO_TOP,"scroll-to-bottom":C$99a.SCROLL_TO_BOTTOM,"scroll-to-left":C$99a.SCROLL_TO_LEFT,"scroll-to-right":C$99a.SCROLL_TO_RIGHT,scrolling:C$99a.SCROLLING,"bounce-bottom":C$99a.BOUNCE_BOTTOM,"bounce-left":C$99a.BOUNCE_LEFT,"bounce-right":C$99a.BOUNCE_RIGHT,"bounce-top":C$99a.BOUNCE_TOP,"scroll-ended":C$99a.SCROLL_ENDED,"touch-up":C$99a.TOUCH_UP,"scroll-ended-with-threshold":C$99a.AUTOSCROLL_ENDED_WITH_THRESHOLD,"scroll-began":C$99a.SCROLL_BEGAN},C$99t=cc.Class({name:"cc.ScrollView",extends:C$99t("./CCViewGroup"),editor:!1,ctor:function(){this._topBoundary=0,this._bottomBoundary=0,this._leftBoundary=0,this._rightBoundary=0,this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[],this._touchMovePreviousTimestamp=0,this._touchMoved=!1,this._autoScrolling=!1,this._autoScrollAttenuate=!1,this._autoScrollStartPosition=cc.v2(0,0),this._autoScrollTargetDelta=cc.v2(0,0),this._autoScrollTotalTime=0,this._autoScrollAccumulatedTime=0,this._autoScrollCurrentlyOutOfBoundary=!1,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.v2(0,0),this._outOfBoundaryAmount=cc.v2(0,0),this._outOfBoundaryAmountDirty=!0,this._stopMouseWheel=!1,this._mouseWheelEventElapsedTime=0,this._isScrollEndedWithThresholdEventFired=!1,this._scrollEventEmitMask=0,this._isBouncing=!1,this._scrolling=!1},properties:{content:{default:void 0,type:cc.Node,tooltip:!1,formerlySerializedAs:"content",notify:function(C$99t){this._calculateBoundary()}},horizontal:{default:!0,animatable:!1,tooltip:!1},vertical:{default:!0,animatable:!1,tooltip:!1},inertia:{default:!0,tooltip:!1},brake:{default:.5,type:cc.Float,range:[0,1,.1],tooltip:!1},elastic:{default:!0,animatable:!1,tooltip:!1},bounceDuration:{default:1,range:[0,10],tooltip:!1},horizontalScrollBar:{default:void 0,type:cc.Scrollbar,tooltip:!1,notify:function(){this.horizontalScrollBar&&(this.horizontalScrollBar.setTargetScrollView(this),this._updateScrollBar(0))},animatable:!1},verticalScrollBar:{default:void 0,type:cc.Scrollbar,tooltip:!1,notify:function(){this.verticalScrollBar&&(this.verticalScrollBar.setTargetScrollView(this),this._updateScrollBar(0))},animatable:!1},scrollEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1},cancelInnerEvents:{default:!0,animatable:!1,tooltip:!1},_view:{get:function(){if(this.content)return this.content.parent}}},statics:{EventType:C$99a},scrollToBottom:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!1,applyToVertical:!0});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i,!0)},scrollToTop:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(0,1),applyToHorizontal:!1,applyToVertical:!0});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i)},scrollToLeft:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!0,applyToVertical:!1});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i)},scrollToRight:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(1,0),applyToHorizontal:!0,applyToVertical:!1});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i)},scrollToTopLeft:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(0,1),applyToHorizontal:!0,applyToVertical:!0});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i)},scrollToTopRight:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(1,1),applyToHorizontal:!0,applyToVertical:!0});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i)},scrollToBottomLeft:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(0,0),applyToHorizontal:!0,applyToVertical:!0});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i)},scrollToBottomRight:function(C$99t,C$99e){var C$99i=this._calculateMovePercentDelta({anchor:cc.v2(1,0),applyToHorizontal:!0,applyToVertical:!0});C$99t?this._startAutoScroll(C$99i,C$99t,!1!==C$99e):this._moveContent(C$99i)},scrollToOffset:function(C$99t,C$99e,C$99i){var C$99n=this.getMaxScrollOffset(),C$99r=cc.v2(0,0);0===C$99n.x?C$99r.x=0:C$99r.x=C$99t.x/C$99n.x,0===C$99n.y?C$99r.y=1:C$99r.y=(C$99n.y-C$99t.y)/C$99n.y,this.scrollTo(C$99r,C$99e,C$99i)},getScrollOffset:function(){var C$99t=this._getContentTopBoundary()-this._topBoundary,C$99e=this._getContentLeftBoundary()-this._leftBoundary;return cc.v2(C$99e,C$99t)},getMaxScrollOffset:function(){var C$99t=this._view.getContentSize(),C$99e=this.content.getContentSize(),C$99i=0<=(C$99i=C$99e.width-C$99t.width)?C$99i:0,C$99e=0<=(C$99e=C$99e.height-C$99t.height)?C$99e:0;return cc.v2(C$99i,C$99e)},scrollToPercentHorizontal:function(C$99t,C$99e,C$99i){C$99t=this._calculateMovePercentDelta({anchor:cc.v2(C$99t,0),applyToHorizontal:!0,applyToVertical:!1});C$99e?this._startAutoScroll(C$99t,C$99e,!1!==C$99i):this._moveContent(C$99t)},scrollTo:function(C$99t,C$99e,C$99i){C$99t=this._calculateMovePercentDelta({anchor:cc.v2(C$99t),applyToHorizontal:!0,applyToVertical:!0});C$99e?this._startAutoScroll(C$99t,C$99e,!1!==C$99i):this._moveContent(C$99t)},scrollToPercentVertical:function(C$99t,C$99e,C$99i){C$99t=this._calculateMovePercentDelta({anchor:cc.v2(0,C$99t),applyToHorizontal:!1,applyToVertical:!0});C$99e?this._startAutoScroll(C$99t,C$99e,!1!==C$99i):this._moveContent(C$99t)},stopAutoScroll:function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime},setContentPosition:function(C$99t){C$99t.fuzzyEquals(this.getContentPosition(),1e-4)||(this.content.setPosition(C$99t),this._outOfBoundaryAmountDirty=!0)},getContentPosition:function(){return this.content.getPosition()},isScrolling:function(){return this._scrolling},isAutoScrolling:function(){return this._autoScrolling},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},_onMouseWheel:function(C$99t,C$99e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$99t,C$99e)||(C$99e=cc.v2(0,0),this.vertical?C$99e=cc.v2(0,-.1*C$99t.getScrollY()):this.horizontal&&(C$99e=cc.v2(-.1*C$99t.getScrollY(),0)),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(C$99e),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(C$99t)))},_checkMouseWheel:function(C$99t){if(!this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent("scroll-ended"),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=C$99t,.1<this._mouseWheelEventElapsedTime&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent("scroll-ended"),this._stopMouseWheel=!1)},_calculateMovePercentDelta:function(C$99t){var C$99e=C$99t.anchor,C$99i=C$99t.applyToHorizontal,C$99t=C$99t.applyToVertical,C$99n=(this._calculateBoundary(),C$99e=C$99e.clampf(cc.v2(0,0),cc.v2(1,1)),this._view.getContentSize()),C$99r=this.content.getContentSize(),C$99s=-(this._getContentBottomBoundary()-this._bottomBoundary),C$99o=-(this._getContentLeftBoundary()-this._leftBoundary),C$99a=cc.v2(0,0),C$99c=0;return C$99i&&(C$99c=C$99r.width-C$99n.width,C$99a.x=C$99o-C$99c*C$99e.x),C$99t&&(C$99c=C$99r.height-C$99n.height,C$99a.y=C$99s-C$99c*C$99e.y),C$99a},_moveContentToTopLeft:function(C$99t){var C$99e=this.content.getContentSize(),C$99i=-(this._getContentBottomBoundary()-this._bottomBoundary),C$99n=cc.v2(0,0),C$99r=0,C$99s=-(this._getContentLeftBoundary()-this._leftBoundary);C$99e.height<C$99t.height&&(C$99r=C$99e.height-C$99t.height,C$99n.y=C$99i-C$99r),C$99e.width<C$99t.width&&(C$99r=C$99e.width-C$99t.width,C$99n.x=C$99s),this._updateScrollBarState(),this._moveContent(C$99n),this._adjustContentOutOfBoundary()},_calculateBoundary:function(){var C$99t,C$99e,C$99i;this.content&&((C$99t=this.content.getComponent(cc.Layout))&&C$99t.enabledInHierarchy&&C$99t.updateLayout(),C$99e=(C$99t=this._view.getContentSize()).width*this._view.anchorX,C$99i=C$99t.height*this._view.anchorY,this._leftBoundary=-C$99e,this._bottomBoundary=-C$99i,this._rightBoundary=this._leftBoundary+C$99t.width,this._topBoundary=this._bottomBoundary+C$99t.height,this._moveContentToTopLeft(C$99t))},_hasNestedViewGroup:function(C$99t,C$99e){if(C$99t.eventPhase===cc.Event.CAPTURING_PHASE){if(C$99e)for(var C$99i=0;C$99i<C$99e.length;++C$99i){var C$99n=C$99e[C$99i];if(this.node===C$99n)return!!C$99t.target.getComponent(cc.ViewGroup);if(C$99n.getComponent(cc.ViewGroup))return!0}return!1}},_stopPropagationIfTargetIsMe:function(C$99t){C$99t.eventPhase===cc.Event.AT_TARGET&&C$99t.target===this.node&&C$99t.stopPropagation()},_onTouchBegan:function(C$99t,C$99e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$99t,C$99e)||(C$99e=C$99t.touch,this.content&&this._handlePressLogic(C$99e),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(C$99t)))},_onTouchMoved:function(C$99t,C$99e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$99t,C$99e)||(C$99e=C$99t.touch,this.content&&this._handleMoveLogic(C$99e),this.cancelInnerEvents&&(7<C$99e.getLocation().sub(C$99e.getStartLocation()).mag()&&!this._touchMoved&&C$99t.target!==this.node&&((C$99e=new cc.Event.EventTouch(C$99t.getTouches(),C$99t.bubbles)).type=cc.Node.EventType.TOUCH_CANCEL,C$99e.touch=C$99t.touch,C$99e.simulate=!0,C$99t.target.dispatchEvent(C$99e),this._touchMoved=!0),this._stopPropagationIfTargetIsMe(C$99t))))},_onTouchEnded:function(C$99t,C$99e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$99t,C$99e)||(this._dispatchEvent("touch-up"),C$99e=C$99t.touch,this.content&&this._handleReleaseLogic(C$99e),this._touchMoved?C$99t.stopPropagation():this._stopPropagationIfTargetIsMe(C$99t)))},_onTouchCancelled:function(C$99t,C$99e){this.enabledInHierarchy&&(this._hasNestedViewGroup(C$99t,C$99e)||(C$99t.simulate||(C$99e=C$99t.touch,this.content&&this._handleReleaseLogic(C$99e)),this._stopPropagationIfTargetIsMe(C$99t)))},_processDeltaMove:function(C$99t){this._scrollChildren(C$99t),this._gatherTouchMove(C$99t)},_getLocalAxisAlignDelta:function(C$99t){return this.node.convertToNodeSpaceAR(C$99t.getLocation(),C$99s),this.node.convertToNodeSpaceAR(C$99t.getPreviousLocation(),C$99o),C$99s.sub(C$99o)},_handleMoveLogic:function(C$99t){C$99t=this._getLocalAxisAlignDelta(C$99t);this._processDeltaMove(C$99t)},_scrollChildren:function(C$99t){var C$99t=C$99t=this._clampDelta(C$99t),C$99e=(this.elastic&&(C$99e=this._getHowMuchOutOfBoundary(),C$99t.x*=0===C$99e.x?1:.5,C$99t.y*=0===C$99e.y?1:.5),this.elastic||(C$99e=this._getHowMuchOutOfBoundary(C$99t),C$99t=C$99t.add(C$99e)),-1);0<C$99t.y?this.content.y-this.content.anchorY*this.content.height+C$99t.y>=this._bottomBoundary&&(C$99e="scroll-to-bottom"):C$99t.y<0&&this.content.y-this.content.anchorY*this.content.height+this.content.height+C$99t.y<=this._topBoundary&&(C$99e="scroll-to-top"),C$99t.x<0?this.content.x-this.content.anchorX*this.content.width+this.content.width+C$99t.x<=this._rightBoundary&&(C$99e="scroll-to-right"):0<C$99t.x&&this.content.x-this.content.anchorX*this.content.width+C$99t.x>=this._leftBoundary&&(C$99e="scroll-to-left"),this._moveContent(C$99t,!1),0===C$99t.x&&0===C$99t.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent("scroll-began")),this._dispatchEvent("scrolling")),-1!==C$99e&&this._dispatchEvent(C$99e)},_handlePressLogic:function(){this._autoScrolling&&this._dispatchEvent("scroll-ended"),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=C$99n(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()},_clampDelta:function(C$99t){var C$99e=this.content.getContentSize(),C$99i=this._view.getContentSize();return C$99e.width<C$99i.width&&(C$99t.x=0),C$99e.height<C$99i.height&&(C$99t.y=0),C$99t},_gatherTouchMove:function(C$99t){for(C$99t=this._clampDelta(C$99t);5<=this._touchMoveDisplacements.length;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(C$99t);C$99t=C$99n();this._touchMoveTimeDeltas.push((C$99t-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=C$99t},_startBounceBackIfNeeded:function(){if(!this.elastic)return!1;var C$99t=this._getHowMuchOutOfBoundary();if((C$99t=this._clampDelta(C$99t)).fuzzyEquals(cc.v2(0,0),1e-4))return!1;var C$99e=Math.max(this.bounceDuration,0);return this._startAutoScroll(C$99t,C$99e,!0),this._isBouncing||(0<C$99t.y&&this._dispatchEvent("bounce-top"),C$99t.y<0&&this._dispatchEvent("bounce-bottom"),0<C$99t.x&&this._dispatchEvent("bounce-right"),C$99t.x<0&&this._dispatchEvent("bounce-left"),this._isBouncing=!0),!0},_processInertiaScroll:function(){var C$99t;this._startBounceBackIfNeeded()||!this.inertia||!(C$99t=this._calculateTouchMoveVelocity()).fuzzyEquals(cc.v2(0,0),1e-4)&&this.brake<1&&this._startInertiaScroll(C$99t),this._onScrollBarTouchEnded()},_handleReleaseLogic:function(C$99t){C$99t=this._getLocalAxisAlignDelta(C$99t);this._gatherTouchMove(C$99t),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent("scroll-ended"))},_isOutOfBoundary:function(){return!this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)},_isNecessaryAutoScrollBrake:function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},getScrollEndedEventTiming:function(){return 1e-4},_processAutoScrolling:function(C$99t){var C$99e=this._isNecessaryAutoScrollBrake(),C$99i=C$99e?.05:1,C$99t=(this._autoScrollAccumulatedTime+=C$99t*(1/C$99i),Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime)),C$99n=(this._autoScrollAttenuate&&(C$99n=C$99t,C$99t=--C$99n*C$99n*C$99n*C$99n*C$99n+1),this._autoScrollStartPosition.add(this._autoScrollTargetDelta.mul(C$99t))),C$99r=Math.abs(C$99t-1)<=1e-4,C$99t=(Math.abs(C$99t-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent("scroll-ended-with-threshold"),this._isScrollEndedWithThresholdEventFired=!0),this.elastic?(C$99t=C$99n.sub(this._autoScrollBrakingStartPosition),C$99e&&(C$99t=C$99t.mul(C$99i)),C$99n=this._autoScrollBrakingStartPosition.add(C$99t)):(C$99e=C$99n.sub(this.getContentPosition()),(C$99i=this._getHowMuchOutOfBoundary(C$99e)).fuzzyEquals(cc.v2(0,0),1e-4)||(C$99n=C$99n.add(C$99i),C$99r=!0)),C$99r&&(this._autoScrolling=!1),C$99n.sub(this.getContentPosition()));this._moveContent(this._clampDelta(C$99t),C$99r),this._dispatchEvent("scrolling"),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent("scroll-ended"))},_startInertiaScroll:function(C$99t){var C$99e=C$99t.mul(.7);this._startAttenuatingAutoScroll(C$99e,C$99t)},_calculateAttenuatedFactor:function(C$99t){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*C$99t+C$99t*C$99t*8e-9))},_startAttenuatingAutoScroll:function(C$99t,C$99e){var C$99e=this._calculateAutoScrollTimeByInitalSpeed(C$99e.mag()),C$99i=C$99t.normalize(),C$99n=this.content.getContentSize(),C$99r=this._view.getContentSize(),C$99s=C$99n.width-C$99r.width,C$99n=C$99n.height-C$99r.height,C$99r=this._calculateAttenuatedFactor(C$99s),C$99o=this._calculateAttenuatedFactor(C$99n),C$99i=cc.v2(C$99i.x*C$99s*(1-this.brake)*C$99r,C$99i.y*C$99n*C$99o*(1-this.brake)),C$99s=C$99t.mag(),C$99r=C$99i.mag()/C$99s;C$99i=C$99i.add(C$99t),0<this.brake&&7<C$99r&&(C$99r=Math.sqrt(C$99r),C$99i=C$99t.mul(C$99r).add(C$99t)),0<this.brake&&3<C$99r&&(C$99e*=C$99r=3),0===this.brake&&1<C$99r&&(C$99e*=C$99r),this._startAutoScroll(C$99i,C$99e,!0)},_calculateAutoScrollTimeByInitalSpeed:function(C$99t){return Math.sqrt(Math.sqrt(C$99t/5))},_startAutoScroll:function(C$99t,C$99e,C$99i){C$99t=this._flattenVectorByDirection(C$99t);this._autoScrolling=!0,this._autoScrollTargetDelta=C$99t,this._autoScrollAttenuate=C$99i,this._autoScrollStartPosition=this.getContentPosition(),this._autoScrollTotalTime=C$99e,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition=cc.v2(0,0),this._getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)||(this._autoScrollCurrentlyOutOfBoundary=!0)},_calculateTouchMoveVelocity:function(){var C$99t;if((C$99t=this._touchMoveTimeDeltas.reduce(function(C$99t,C$99e){return C$99t+C$99e},0))<=0||.5<=C$99t)return cc.v2(0,0);var C$99e=cc.v2(0,0),C$99e=this._touchMoveDisplacements.reduce(function(C$99t,C$99e){return C$99t.add(C$99e)},C$99e);return cc.v2(C$99e.x*(1-this.brake)/C$99t,C$99e.y*(1-this.brake)/C$99t)},_flattenVectorByDirection:function(C$99t){return C$99t.x=this.horizontal?C$99t.x:0,C$99t.y=this.vertical?C$99t.y:0,C$99t},_moveContent:function(C$99t,C$99e){C$99t=this._flattenVectorByDirection(C$99t),C$99t=this.getContentPosition().add(C$99t),this.setContentPosition(C$99t),C$99t=this._getHowMuchOutOfBoundary();this._updateScrollBar(C$99t),this.elastic&&C$99e&&this._startBounceBackIfNeeded()},_getContentLeftBoundary:function(){return this.getContentPosition().x-this.content.getAnchorPoint().x*this.content.getContentSize().width},_getContentRightBoundary:function(){var C$99t=this.content.getContentSize();return this._getContentLeftBoundary()+C$99t.width},_getContentTopBoundary:function(){var C$99t=this.content.getContentSize();return this._getContentBottomBoundary()+C$99t.height},_getContentBottomBoundary:function(){return this.getContentPosition().y-this.content.getAnchorPoint().y*this.content.getContentSize().height},_getHowMuchOutOfBoundary:function(C$99t){if((C$99t=C$99t||cc.v2(0,0)).fuzzyEquals(cc.v2(0,0),1e-4)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var C$99e=cc.v2(0,0);return this._getContentLeftBoundary()+C$99t.x>this._leftBoundary?C$99e.x=this._leftBoundary-(this._getContentLeftBoundary()+C$99t.x):this._getContentRightBoundary()+C$99t.x<this._rightBoundary&&(C$99e.x=this._rightBoundary-(this._getContentRightBoundary()+C$99t.x)),this._getContentTopBoundary()+C$99t.y<this._topBoundary?C$99e.y=this._topBoundary-(this._getContentTopBoundary()+C$99t.y):this._getContentBottomBoundary()+C$99t.y>this._bottomBoundary&&(C$99e.y=this._bottomBoundary-(this._getContentBottomBoundary()+C$99t.y)),C$99t.fuzzyEquals(cc.v2(0,0),1e-4)&&(this._outOfBoundaryAmount=C$99e,this._outOfBoundaryAmountDirty=!1),C$99e=this._clampDelta(C$99e)},_updateScrollBarState:function(){var C$99t,C$99e;this.content&&(C$99t=this.content.getContentSize(),C$99e=this._view.getContentSize(),this.verticalScrollBar&&(C$99t.height<C$99e.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(C$99t.width<C$99e.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show()))},_updateScrollBar:function(C$99t){this.horizontalScrollBar&&this.horizontalScrollBar._onScroll(C$99t),this.verticalScrollBar&&this.verticalScrollBar._onScroll(C$99t)},_onScrollBarTouchBegan:function(){this.horizontalScrollBar&&this.horizontalScrollBar._onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar._onTouchBegan()},_onScrollBarTouchEnded:function(){this.horizontalScrollBar&&this.horizontalScrollBar._onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar._onTouchEnded()},_dispatchEvent:function(C$99t){if("scroll-ended"===C$99t)this._scrollEventEmitMask=0;else if("scroll-to-top"===C$99t||"scroll-to-bottom"===C$99t||"scroll-to-left"===C$99t||"scroll-to-right"===C$99t){var C$99e=1<<C$99c[C$99t];if(this._scrollEventEmitMask&C$99e)return;this._scrollEventEmitMask|=C$99e}cc.Component.EventHandler.emitEvents(this.scrollEvents,this,C$99c[C$99t]),this.node.emit(C$99t,this)},_adjustContentOutOfBoundary:function(){var C$99t;this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary()&&(C$99t=this._getHowMuchOutOfBoundary(cc.v2(0,0)),C$99t=this.getContentPosition().add(C$99t),this.content&&(this.content.setPosition(C$99t),this._updateScrollBar(0)))},start:function(){this._calculateBoundary(),this.content&&cc.director.once(cc.Director.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)},_hideScrollbar:function(){this.horizontalScrollBar&&this.horizontalScrollBar.hide(),this.verticalScrollBar&&this.verticalScrollBar.hide()},onDisable:function(){this._unregisterEvent(),this.content&&(this.content.off(C$99r.SIZE_CHANGED,this._calculateBoundary,this),this.content.off(C$99r.SCALE_CHANGED,this._calculateBoundary,this),this._view&&(this._view.off(C$99r.POSITION_CHANGED,this._calculateBoundary,this),this._view.off(C$99r.SCALE_CHANGED,this._calculateBoundary,this),this._view.off(C$99r.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollbar(),this.stopAutoScroll()},onEnable:function(){this._registerEvent(),this.content&&(this.content.on(C$99r.SIZE_CHANGED,this._calculateBoundary,this),this.content.on(C$99r.SCALE_CHANGED,this._calculateBoundary,this),this._view&&(this._view.on(C$99r.POSITION_CHANGED,this._calculateBoundary,this),this._view.on(C$99r.SCALE_CHANGED,this._calculateBoundary,this),this._view.on(C$99r.SIZE_CHANGED,this._calculateBoundary,this))),this._updateScrollBarState()},update:function(C$99t){this._autoScrolling&&this._processAutoScrolling(C$99t)}});cc.ScrollView=C$99e.exports=C$99t},{"../CCNode":30,"./CCViewGroup":99}],93:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../utils/misc"),C$99t=C$99t("./CCComponent"),C$99r=cc.Enum({Horizontal:0,Vertical:1}),C$99t=cc.Class({name:"cc.Slider",extends:C$99t,editor:!1,ctor:function(){this._offset=cc.v2(),this._touchHandle=!1,this._dragging=!1},properties:{handle:{default:null,type:cc.Button,tooltip:!1,notify:function(){}},direction:{default:C$99r.Horizontal,type:C$99r,tooltip:!1},progress:{default:.5,type:cc.Float,range:[0,1,.1],slide:!0,tooltip:!1,notify:function(){this._updateHandlePosition()}},slideEvents:{default:[],type:cc.Component.EventHandler,tooltip:!1}},statics:{Direction:C$99r},__preload:function(){this._updateHandlePosition()},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.on(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this))},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.off(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this))},_onHandleDragStart:function(C$99t){this._dragging=!0,this._touchHandle=!0,this._offset=this.handle.node.convertToNodeSpaceAR(C$99t.touch.getLocation()),C$99t.stopPropagation()},_onTouchBegan:function(C$99t){this.handle&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(C$99t.touch),C$99t.stopPropagation())},_onTouchMoved:function(C$99t){this._dragging&&(this._handleSliderLogic(C$99t.touch),C$99t.stopPropagation())},_onTouchEnded:function(C$99t){this._dragging=!1,this._touchHandle=!1,this._offset=cc.v2(),C$99t.stopPropagation()},_onTouchCancelled:function(C$99t){this._dragging=!1,C$99t.stopPropagation()},_handleSliderLogic:function(C$99t){this._updateProgress(C$99t),this._emitSlideEvent()},_emitSlideEvent:function(){cc.Component.EventHandler.emitEvents(this.slideEvents,this),this.node.emit("slide",this)},_updateProgress:function(C$99t){var C$99e;this.handle&&(C$99t=(C$99e=this.node).convertToNodeSpaceAR(C$99t.getLocation()),this.direction===C$99r.Horizontal?this.progress=C$99n.clamp01((C$99t.x-this._offset.x+C$99e.anchorX*C$99e.width)/C$99e.width):this.progress=C$99n.clamp01((C$99t.y-this._offset.y+C$99e.anchorY*C$99e.height)/C$99e.height))},_updateHandlePosition:function(){var C$99t;this.handle&&(C$99t=this.direction===C$99r.Horizontal?cc.v2(-this.node.width*this.node.anchorX+this.progress*this.node.width,0):cc.v2(0,-this.node.height*this.node.anchorY+this.progress*this.node.height),C$99t=this.node.convertToWorldSpaceAR(C$99t),this.handle.node.position=this.handle.node.parent.convertToNodeSpaceAR(C$99t))}});cc.Slider=C$99e.exports=C$99t},{"../utils/misc":264,"./CCComponent":78}],94:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../utils/misc"),C$99r=(C$99t("../CCNode").EventType,C$99t("./CCRenderComponent")),C$99s=C$99t("../utils/blend-func"),C$99o=cc.Enum({SIMPLE:0,SLICED:1,TILED:2,FILLED:3,MESH:4}),C$99t=cc.Enum({HORIZONTAL:0,VERTICAL:1,RADIAL:2}),C$99a=cc.Enum({CUSTOM:0,TRIMMED:1,RAW:2}),C$99c=cc.Enum({NORMAL:0,GRAY:1}),C$99r=cc.Class({name:"cc.Sprite",extends:C$99r,mixins:[C$99s],editor:!1,properties:{_spriteFrame:{default:null,type:cc.SpriteFrame},_type:C$99o.SIMPLE,_sizeMode:C$99a.TRIMMED,_fillType:0,_fillCenter:cc.v2(0,0),_fillStart:0,_fillRange:0,_isTrimmedMode:!0,_atlas:{default:null,type:cc.SpriteAtlas,tooltip:!1,editorOnly:!0,visible:!0,animatable:!1},spriteFrame:{get:function(){return this._spriteFrame},set:function(C$99t,C$99e){var C$99i=this._spriteFrame;C$99i!==C$99t&&(this._spriteFrame=C$99t,this._applySpriteFrame(C$99i))},type:cc.SpriteFrame},type:{get:function(){return this._type},set:function(C$99t){this._type!==C$99t&&(this._type=C$99t,this.setVertsDirty(),this._resetAssembler())},type:C$99o,animatable:!1,tooltip:!1},fillType:{get:function(){return this._fillType},set:function(C$99t){C$99t!==this._fillType&&(this._fillType=C$99t,this.setVertsDirty(),this._resetAssembler())},type:C$99t,tooltip:!1},fillCenter:{get:function(){return this._fillCenter},set:function(C$99t){this._fillCenter.x=C$99t.x,this._fillCenter.y=C$99t.y,this._type===C$99o.FILLED&&this.setVertsDirty()},tooltip:!1},fillStart:{get:function(){return this._fillStart},set:function(C$99t){this._fillStart=C$99n.clampf(C$99t,-1,1),this._type===C$99o.FILLED&&this.setVertsDirty()},tooltip:!1},fillRange:{get:function(){return this._fillRange},set:function(C$99t){this._fillRange=C$99n.clampf(C$99t,-1,1),this._type===C$99o.FILLED&&this.setVertsDirty()},tooltip:!1},trim:{get:function(){return this._isTrimmedMode},set:function(C$99t){this._isTrimmedMode!==C$99t&&(this._isTrimmedMode=C$99t,this._type!==C$99o.SIMPLE&&this._type!==C$99o.MESH||this.setVertsDirty())},animatable:!1,tooltip:!1},sizeMode:{get:function(){return this._sizeMode},set:function(C$99t){(this._sizeMode=C$99t)!==C$99a.CUSTOM&&this._applySpriteSize()},animatable:!1,type:C$99a,tooltip:!1}},statics:{FillType:C$99t,Type:C$99o,SizeMode:C$99a,State:C$99c},setVisible:function(C$99t){this.enabled=C$99t},setState:function(){},getState:function(){},onEnable:function(){this._super(),this._applySpriteFrame(),this.node.on(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.SIZE_CHANGED,this.setVertsDirty,this),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this.setVertsDirty,this)},_updateMaterial:function(){var C$99t=this._spriteFrame&&this._spriteFrame.getTexture(),C$99e=this.getMaterial(0);C$99e&&C$99e.setProperty("texture",C$99t),C$99s.prototype._updateMaterial.call(this)},_applyAtlas:!1,_validateRender:function(){var C$99t=this._spriteFrame;this._materials[0]&&C$99t&&C$99t.textureLoaded()||this.disableRender()},_applySpriteSize:function(){var C$99t;this._spriteFrame&&this.isValid&&(C$99a.RAW===this._sizeMode?(C$99t=this._spriteFrame._originalSize,this.node.setContentSize(C$99t)):C$99a.TRIMMED===this._sizeMode&&(C$99t=this._spriteFrame._rect,this.node.setContentSize(C$99t.width,C$99t.height)),this.setVertsDirty())},_applySpriteFrame:function(C$99t){var C$99e=C$99t&&C$99t.getTexture(),C$99t=(C$99e&&!C$99e.loaded&&C$99t.off("load",this._applySpriteSize,this),this._spriteFrame);C$99t?(this._updateMaterial(),C$99e===(C$99e=C$99t.getTexture())&&C$99e&&C$99e.loaded?this._applySpriteSize():(this.disableRender(),C$99t.onTextureLoaded(this._applySpriteSize,this))):this.disableRender()}});cc.Sprite=C$99e.exports=C$99r},{"../CCNode":30,"../utils/blend-func":257,"../utils/misc":264,"./CCRenderComponent":89}],95:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Enum({NONE:0,CHECKBOX:1,TEXT_ATLAS:2,SLIDER_BAR:3,LIST_VIEW:4,PAGE_VIEW:5}),C$99r=cc.Enum({VERTICAL:0,HORIZONTAL:1}),C$99s=cc.Enum({TOP:0,CENTER:1,BOTTOM:2}),C$99o=cc.Enum({LEFT:0,CENTER:1,RIGHT:2}),C$99n=cc.Class({name:"cc.StudioComponent",extends:cc.Component,editor:!1,properties:!1,statics:{ComponentType:C$99n,ListDirection:C$99r,VerticalAlign:C$99s,HorizontalAlign:C$99o}}),C$99a=C$99t("../utils/prefab-helper"),C$99r=(C$99n.PlaceHolder=cc.Class({name:"cc.StudioComponent.PlaceHolder",extends:cc.Component,properties:{_baseUrl:"",nestedPrefab:cc.Prefab},onLoad:function(){this.nestedPrefab&&this._replaceWithNestedPrefab()},_replaceWithNestedPrefab:function(){var C$99t=this.node,C$99e=C$99t._prefab;C$99e.root=C$99t,C$99e.asset=this.nestedPrefab,C$99a.syncWithPrefab(C$99t)}}),cc.StudioComponent=C$99e.exports=C$99n,cc.Class({name:"cc.StudioWidget",extends:cc.Widget,editor:!1,_validateTargetInDEV:function(){}}));cc.StudioWidget=C$99e.exports=C$99r},{"../utils/prefab-helper":267}],96:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../utils/gray-sprite-state"),C$99n=cc.Class({name:"cc.Toggle",extends:C$99t("./CCButton"),mixins:[C$99n],editor:!1,properties:{_N$isChecked:!0,isChecked:{get:function(){return this._N$isChecked},set:function(C$99t){var C$99e;C$99t!==this._N$isChecked&&((C$99e=this.toggleGroup||this._toggleContainer)&&C$99e.enabled&&this._N$isChecked&&!C$99e.allowSwitchOff||(this._N$isChecked=C$99t,this._updateCheckMark(),C$99e&&C$99e.enabled&&C$99e.updateToggles(this),cc.Toggle._triggerEventInScript_isChecked&&this._emitToggleEvents()))},tooltip:!1},toggleGroup:{default:null,tooltip:!1,type:C$99t("./CCToggleGroup")},checkMark:{default:null,type:cc.Sprite,tooltip:!1},checkEvents:{default:[],type:cc.Component.EventHandler},_resizeToTarget:{animatable:!1,set:function(C$99t){C$99t&&this._resizeNodeToTargetNode()}}},statics:{_triggerEventInScript_check:!1,_triggerEventInScript_isChecked:!1},onEnable:function(){this._super(),this._registerToggleEvent(),this.toggleGroup&&this.toggleGroup.enabledInHierarchy&&this.toggleGroup.addToggle(this)},onDisable:function(){this._super(),this._unregisterToggleEvent(),this.toggleGroup&&this.toggleGroup.enabledInHierarchy&&this.toggleGroup.removeToggle(this)},_hideCheckMark:function(){this._N$isChecked=!1,this._updateCheckMark()},toggle:function(C$99t){this.isChecked=!this.isChecked,cc.Toggle._triggerEventInScript_isChecked||!cc.Toggle._triggerEventInScript_check&&!C$99t||this._emitToggleEvents()},check:function(){this.isChecked=!0,!cc.Toggle._triggerEventInScript_isChecked&&cc.Toggle._triggerEventInScript_check&&this._emitToggleEvents()},uncheck:function(){this.isChecked=!1,!cc.Toggle._triggerEventInScript_isChecked&&cc.Toggle._triggerEventInScript_check&&this._emitToggleEvents()},_updateCheckMark:function(){this.checkMark&&(this.checkMark.node.active=!!this.isChecked)},_updateDisabledState:function(){var C$99t;this._super(),this.enableAutoGrayEffect&&this.checkMark&&(C$99t=!this.interactable,this._switchGrayMaterial(C$99t,this.checkMark))},_registerToggleEvent:function(){this.node.on("click",this.toggle,this)},_unregisterToggleEvent:function(){this.node.off("click",this.toggle,this)},_emitToggleEvents:function(){this.node.emit("toggle",this),this.checkEvents&&cc.Component.EventHandler.emitEvents(this.checkEvents,this)}});cc.Toggle=C$99e.exports=C$99n,C$99t("../platform/js").get(C$99n.prototype,"_toggleContainer",function(){var C$99t=this.node.parent;return cc.Node.isNode(C$99t)?C$99t.getComponent(cc.ToggleContainer):null})},{"../platform/js":209,"../utils/gray-sprite-state":260,"./CCButton":76,"./CCToggleGroup":98}],97:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.ToggleContainer",extends:cc.Component,editor:!1,properties:{allowSwitchOff:{tooltip:!1,default:!1},checkEvents:{default:[],type:cc.Component.EventHandler}},updateToggles:function(C$99e){this.enabledInHierarchy&&C$99e.isChecked&&(this.toggleItems.forEach(function(C$99t){C$99t!==C$99e&&C$99t.isChecked&&C$99t.enabled&&C$99t._hideCheckMark()}),this.checkEvents&&cc.Component.EventHandler.emitEvents(this.checkEvents,C$99e))},_allowOnlyOneToggleChecked:function(){var C$99e=!1;return this.toggleItems.forEach(function(C$99t){C$99e?C$99t._hideCheckMark():C$99t.isChecked&&(C$99e=!0)}),C$99e},_makeAtLeastOneToggleChecked:function(){var C$99t;this._allowOnlyOneToggleChecked()||this.allowSwitchOff||0<(C$99t=this.toggleItems).length&&C$99t[0].check()},onEnable:function(){this.node.on("child-added",this._allowOnlyOneToggleChecked,this),this.node.on("child-removed",this._makeAtLeastOneToggleChecked,this)},onDisable:function(){this.node.off("child-added",this._allowOnlyOneToggleChecked,this),this.node.off("child-removed",this._makeAtLeastOneToggleChecked,this)},start:function(){this._makeAtLeastOneToggleChecked()}});C$99t("../platform/js").get(C$99n.prototype,"toggleItems",function(){return this.node.getComponentsInChildren(cc.Toggle)}),cc.ToggleContainer=C$99e.exports=C$99n},{"../platform/js":209}],98:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.ToggleGroup",extends:cc.Component,ctor:function(){this._toggleItems=[]},editor:!1,properties:{allowSwitchOff:{tooltip:!1,default:!1},toggleItems:{get:function(){return this._toggleItems}}},updateToggles:function(C$99e){this.enabledInHierarchy&&this._toggleItems.forEach(function(C$99t){C$99e.isChecked&&C$99t!==C$99e&&C$99t.isChecked&&C$99t.enabled&&C$99t._hideCheckMark()})},addToggle:function(C$99t){-1===this._toggleItems.indexOf(C$99t)&&this._toggleItems.push(C$99t),this._allowOnlyOneToggleChecked()},removeToggle:function(C$99t){C$99t=this._toggleItems.indexOf(C$99t);-1<C$99t&&this._toggleItems.splice(C$99t,1),this._makeAtLeastOneToggleChecked()},_allowOnlyOneToggleChecked:function(){var C$99e=!1;return this._toggleItems.forEach(function(C$99t){C$99e&&C$99t.enabled&&C$99t._hideCheckMark(),C$99t.isChecked&&C$99t.enabled&&(C$99e=!0)}),C$99e},_makeAtLeastOneToggleChecked:function(){this._allowOnlyOneToggleChecked()||this.allowSwitchOff||0<this._toggleItems.length&&(this._toggleItems[0].isChecked=!0)},start:function(){this._makeAtLeastOneToggleChecked()}}),C$99t=C$99t("../platform/js"),C$99r=!1;C$99t.get(cc,"ToggleGroup",function(){return C$99r||(cc.errorID(1405,"cc.ToggleGroup","cc.ToggleContainer"),C$99r=!0),C$99n}),C$99e.exports=C$99n},{"../platform/js":209}],99:[function(C$99t,C$99e,C$99i){"use strict";C$99t=cc.Class({name:"cc.ViewGroup",extends:C$99t("./CCComponent")});cc.ViewGroup=C$99e.exports=C$99t},{"./CCComponent":78}],100:[function(C$99h,C$99u,C$99_){"use strict";var C$99t=C$99h("../base-ui/CCWidgetManager"),C$99e=C$99t.AlignMode,C$99i=C$99t._AlignFlags,C$99n=C$99i.TOP,C$99r=C$99i.MID,C$99s=C$99i.BOT,C$99o=C$99i.LEFT,C$99a=C$99i.CENTER,C$99c=C$99i.RIGHT,C$99d=C$99n|C$99s,C$99l=C$99o|C$99c,C$99i=cc.Class({name:"cc.Widget",extends:C$99h("./CCComponent"),editor:!1,properties:{target:{get:function(){return this._target},set:function(C$99t){this._target=C$99t},type:cc.Node,tooltip:!1},isAlignTop:{get:function(){return 0<(this._alignFlags&C$99n)},set:function(C$99t){this._setAlign(C$99n,C$99t)},animatable:!1,tooltip:!1},isAlignVerticalCenter:{get:function(){return 0<(this._alignFlags&C$99r)},set:function(C$99t){C$99t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=C$99r):this._alignFlags&=~C$99r},animatable:!1,tooltip:!1},isAlignBottom:{get:function(){return 0<(this._alignFlags&C$99s)},set:function(C$99t){this._setAlign(C$99s,C$99t)},animatable:!1,tooltip:!1},isAlignLeft:{get:function(){return 0<(this._alignFlags&C$99o)},set:function(C$99t){this._setAlign(C$99o,C$99t)},animatable:!1,tooltip:!1},isAlignHorizontalCenter:{get:function(){return 0<(this._alignFlags&C$99a)},set:function(C$99t){C$99t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=C$99a):this._alignFlags&=~C$99a},animatable:!1,tooltip:!1},isAlignRight:{get:function(){return 0<(this._alignFlags&C$99c)},set:function(C$99t){this._setAlign(C$99c,C$99t)},animatable:!1,tooltip:!1},isStretchWidth:{get:function(){return(this._alignFlags&C$99l)==C$99l},visible:!1},isStretchHeight:{get:function(){return(this._alignFlags&C$99d)==C$99d},visible:!1},top:{get:function(){return this._top},set:function(C$99t){this._top=C$99t},tooltip:!1},bottom:{get:function(){return this._bottom},set:function(C$99t){this._bottom=C$99t},tooltip:!1},left:{get:function(){return this._left},set:function(C$99t){this._left=C$99t},tooltip:!1},right:{get:function(){return this._right},set:function(C$99t){this._right=C$99t},tooltip:!1},horizontalCenter:{get:function(){return this._horizontalCenter},set:function(C$99t){this._horizontalCenter=C$99t},tooltip:!1},verticalCenter:{get:function(){return this._verticalCenter},set:function(C$99t){this._verticalCenter=C$99t},tooltip:!1},isAbsoluteHorizontalCenter:{get:function(){return this._isAbsHorizontalCenter},set:function(C$99t){this._isAbsHorizontalCenter=C$99t},animatable:!1},isAbsoluteVerticalCenter:{get:function(){return this._isAbsVerticalCenter},set:function(C$99t){this._isAbsVerticalCenter=C$99t},animatable:!1},isAbsoluteTop:{get:function(){return this._isAbsTop},set:function(C$99t){this._isAbsTop=C$99t},animatable:!1},isAbsoluteBottom:{get:function(){return this._isAbsBottom},set:function(C$99t){this._isAbsBottom=C$99t},animatable:!1},isAbsoluteLeft:{get:function(){return this._isAbsLeft},set:function(C$99t){this._isAbsLeft=C$99t},animatable:!1},isAbsoluteRight:{get:function(){return this._isAbsRight},set:function(C$99t){this._isAbsRight=C$99t},animatable:!1},alignMode:{default:C$99e.ON_WINDOW_RESIZE,type:C$99e,tooltip:!1},_wasAlignOnce:{default:void 0,formerlySerializedAs:"isAlignOnce"},_target:null,_alignFlags:0,_left:0,_right:0,_top:0,_bottom:0,_verticalCenter:0,_horizontalCenter:0,_isAbsLeft:!0,_isAbsRight:!0,_isAbsTop:!0,_isAbsBottom:!0,_isAbsHorizontalCenter:!0,_isAbsVerticalCenter:!0,_originalWidth:0,_originalHeight:0},statics:{AlignMode:C$99e},onLoad:function(){void 0!==this._wasAlignOnce&&(this.alignMode=this._wasAlignOnce?C$99e.ONCE:C$99e.ALWAYS,this._wasAlignOnce=void 0)},onEnable:function(){C$99t.add(this)},onDisable:function(){C$99t.remove(this)},_validateTargetInDEV:!1,_setAlign:function(C$99t,C$99e){var C$99i;C$99e!==0<(this._alignFlags&C$99t)&&(C$99i=0<(C$99t&C$99l),C$99e?(this._alignFlags|=C$99t,C$99i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=this.node.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=this.node.height))):(C$99i?this.isStretchWidth&&(this.node.width=this._originalWidth):this.isStretchHeight&&(this.node.height=this._originalHeight),this._alignFlags&=~C$99t))},updateAlignment:function(){C$99t.updateAlignment(this.node)}});Object.defineProperty(C$99i.prototype,"isAlignOnce",{get:function(){return cc.warn("`widget.isAlignOnce` is deprecated, use `widget.alignMode === cc.Widget.AlignMode.ONCE` instead please."),this.alignMode===C$99e.ONCE},set:function(C$99t){cc.warn("`widget.isAlignOnce` is deprecated, use `widget.alignMode = cc.Widget.AlignMode.*` instead please."),this.alignMode=C$99t?C$99e.ONCE:C$99e.ALWAYS}}),cc.Widget=C$99u.exports=C$99i},{"../base-ui/CCWidgetManager":62,"./CCComponent":78}],101:[function(C$99t,C$99e,C$99i){"use strict";C$99t=C$99t("./CCComponent"),C$99t=cc.Class({name:"cc.WXSubContextView",extends:C$99t,editor:!1,properties:{_fps:60,fps:{get:function(){return this._fps},set:function(C$99t){this._fps!==C$99t&&(this._fps=C$99t,this._updateInterval=1/C$99t,this._updateSubContextFrameRate())},tooltip:!1}},ctor:function(){this._sprite=null,this._tex=new cc.Texture2D,this._context=null,this._updatedTime=performance.now(),this._updateInterval=0},onLoad:function(){wx.getOpenDataContext?(this._updateInterval=1e3/this._fps,this._context=wx.getOpenDataContext(),this.reset(),this._tex.setPremultiplyAlpha(!0),this._tex.initWithElement(sharedCanvas),this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite),this._sprite.srcBlendFactor=cc.macro.BlendFactor.ONE),this._sprite.spriteFrame=new cc.SpriteFrame(this._tex)):this.enabled=!1},reset:function(){var C$99t;this._context&&(this.updateSubContextViewport(),(C$99t=this._context.canvas)&&(C$99t.width=this.node.width,C$99t.height=this.node.height))},onEnable:function(){this._runSubContextMainLoop(),this._registerNodeEvent(),this._updateSubContextFrameRate(),this.updateSubContextViewport()},onDisable:function(){this._unregisterNodeEvent(),this._stopSubContextMainLoop()},update:function(C$99t){if(void 0===C$99t)return this._context&&this._context.postMessage({fromEngine:!0,event:"step"}),void this._updateSubContextTexture();performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())},_updateSubContextTexture:function(){this._tex&&this._context&&(this._tex.initWithElement(this._context.canvas),this._sprite._activateMaterial())},updateSubContextViewport:function(){var C$99t,C$99e,C$99i;this._context&&(C$99t=this.node.getBoundingBoxToWorld(),C$99e=cc.view._scaleX,C$99i=cc.view._scaleY,this._context.postMessage({fromEngine:!0,event:"viewport",x:C$99t.x*C$99e+cc.view._viewportRect.x,y:C$99t.y*C$99i+cc.view._viewportRect.y,width:C$99t.width*C$99e,height:C$99t.height*C$99i}))},_registerNodeEvent:function(){this.node.on("position-changed",this.updateSubContextViewport,this),this.node.on("scale-changed",this.updateSubContextViewport,this),this.node.on("size-changed",this.updateSubContextViewport,this)},_unregisterNodeEvent:function(){this.node.off("position-changed",this.updateSubContextViewport,this),this.node.off("scale-changed",this.updateSubContextViewport,this),this.node.off("size-changed",this.updateSubContextViewport,this)},_runSubContextMainLoop:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!0})},_stopSubContextMainLoop:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"mainLoop",value:!1})},_updateSubContextFrameRate:function(){this._context&&this._context.postMessage({fromEngine:!0,event:"frameRate",value:this._fps})}});cc.WXSubContextView=C$99e.exports=C$99t},{"./CCComponent":78}],102:[function(C$99t,C$99e,C$99l){"use strict";var C$99i=C$99t("../../platform/CCMacro"),C$99n=C$99t("../editbox/EditBoxImplBase"),C$99r=C$99t("../CCLabel"),C$99s=C$99t("./types"),C$99o=C$99s.InputMode,C$99a=C$99s.InputFlag,C$99s=C$99s.KeyboardReturnType;var C$99c=cc.Class({name:"cc.EditBox",extends:cc.Component,editor:!1,properties:{_useOriginalSize:!0,_string:"",string:{tooltip:!1,get:function(){return this._string},set:function(C$99t){C$99t=""+C$99t,0<=this.maxLength&&C$99t.length>=this.maxLength&&(C$99t=C$99t.slice(0,this.maxLength)),this._string=C$99t,this._updateString(C$99t)}},textLabel:{tooltip:!1,default:null,type:C$99r,notify:function(C$99t){this.textLabel&&this.textLabel!==C$99t&&(this._updateTextLabel(),this._updateLabels())}},placeholderLabel:{tooltip:!1,default:null,type:C$99r,notify:function(C$99t){this.placeholderLabel&&this.placeholderLabel!==C$99t&&(this._updatePlaceholderLabel(),this._updateLabels())}},background:{tooltip:!1,default:null,type:cc.Sprite,notify:function(C$99t){this.background&&this.background!==C$99t&&this._updateBackgroundSprite()}},_N$backgroundImage:{default:void 0,type:cc.SpriteFrame},backgroundImage:{get:function(){return this.background?this.background.spriteFrame:null},set:function(C$99t){this.background&&(this.background.spriteFrame=C$99t)}},returnType:{default:C$99s.DEFAULT,tooltip:!1,displayName:"KeyboardReturnType",type:C$99s},_N$returnType:{default:void 0,type:cc.Float},inputFlag:{tooltip:!1,default:C$99a.DEFAULT,type:C$99a,notify:function(){this._updateString(this._string)}},inputMode:{tooltip:!1,default:C$99o.ANY,type:C$99o,notify:function(C$99t){this.inputMode!==C$99t&&(this._updateTextLabel(),this._updatePlaceholderLabel())}},fontSize:{get:function(){return this.textLabel?this.textLabel.fontSize:0},set:function(C$99t){this.textLabel&&(this.textLabel.fontSize=C$99t)}},_N$fontSize:{default:void 0,type:cc.Float},lineHeight:{get:function(){return this.textLabel?this.textLabel.lineHeight:0},set:function(C$99t){this.textLabel&&(this.textLabel.lineHeight=C$99t)}},_N$lineHeight:{default:void 0,type:cc.Float},fontColor:{get:function(){return this.textLabel?this.textLabel.node.color:cc.Color.BLACK},set:function(C$99t){this.textLabel&&(this.textLabel.node.color=C$99t,this.textLabel.node.opacity=C$99t.a)}},_N$fontColor:void 0,placeholder:{tooltip:!1,get:function(){return this.placeholderLabel?this.placeholderLabel.string:""},set:function(C$99t){this.placeholderLabel&&(this.placeholderLabel.string=C$99t)}},_N$placeholder:{default:void 0,type:cc.String},placeholderFontSize:{get:function(){return this.placeholderLabel?this.placeholderLabel.fontSize:0},set:function(C$99t){this.placeholderLabel&&(this.placeholderLabel.fontSize=C$99t)}},_N$placeholderFontSize:{default:void 0,type:cc.Float},placeholderFontColor:{get:function(){return this.placeholderLabel?this.placeholderLabel.node.color:cc.Color.BLACK},set:function(C$99t){this.placeholderLabel&&(this.placeholderLabel.node.color=C$99t,this.placeholderLabel.node.opacity=C$99t.a)}},_N$placeholderFontColor:void 0,maxLength:{tooltip:!1,default:20},_N$maxLength:{default:void 0,type:cc.Float},stayOnTop:{default:!1,notify:function(){cc.warn("editBox.stayOnTop is removed since v2.1.")}},_tabIndex:0,tabIndex:{tooltip:!1,get:function(){return this._tabIndex},set:function(C$99t){this._tabIndex!==C$99t&&(this._tabIndex=C$99t,this._impl&&this._impl.setTabIndex(C$99t))}},editingDidBegan:{default:[],type:cc.Component.EventHandler},textChanged:{default:[],type:cc.Component.EventHandler},editingDidEnded:{default:[],type:cc.Component.EventHandler},editingReturn:{default:[],type:cc.Component.EventHandler}},statics:{_ImplClass:C$99n,KeyboardReturnType:C$99s,InputFlag:C$99a,InputMode:C$99o},_init:function(){this._upgradeComp(),this._isLabelVisible=!0,this.node.on(cc.Node.EventType.SIZE_CHANGED,this._syncSize,this),(this._impl=new C$99c._ImplClass).init(this),this._updateString(this._string),this._syncSize()},_updateBackgroundSprite:function(){var C$99t,C$99e=this.background;C$99e||(C$99e=(C$99e=(C$99t=(C$99t=this.node.getChildByName("BACKGROUND_SPRITE"))||new cc.Node("BACKGROUND_SPRITE")).getComponent(cc.Sprite))||C$99t.addComponent(cc.Sprite),C$99t.parent=this.node,this.background=C$99e),C$99e.type=cc.Sprite.Type.SLICED,void 0!==this._N$backgroundImage&&(C$99e.spriteFrame=this._N$backgroundImage,this._N$backgroundImage=void 0)},_updateTextLabel:function(){var C$99t,C$99e=this.textLabel;C$99e||(C$99e=(C$99e=(C$99t=(C$99t=this.node.getChildByName("TEXT_LABEL"))||new cc.Node("TEXT_LABEL")).getComponent(C$99r))||C$99t.addComponent(C$99r),C$99t.parent=this.node,this.textLabel=C$99e),C$99e.node.setAnchorPoint(0,1),C$99e.overflow=C$99r.Overflow.CLAMP,this.inputMode===C$99o.ANY?(C$99e.verticalAlign=C$99i.VerticalTextAlignment.TOP,C$99e.enableWrapText=!0):(C$99e.verticalAlign=C$99i.VerticalTextAlignment.CENTER,C$99e.enableWrapText=!1),C$99e.string=this._updateLabelStringStyle(this._string),void 0!==this._N$fontColor&&(C$99e.node.color=this._N$fontColor,C$99e.node.opacity=this._N$fontColor.a,this._N$fontColor=void 0),void 0!==this._N$fontSize&&(C$99e.fontSize=this._N$fontSize,this._N$fontSize=void 0),void 0!==this._N$lineHeight&&(C$99e.lineHeight=this._N$lineHeight,this._N$lineHeight=void 0)},_updatePlaceholderLabel:function(){var C$99t,C$99e=this.placeholderLabel;C$99e||(C$99e=(C$99e=(C$99t=(C$99t=this.node.getChildByName("PLACEHOLDER_LABEL"))||new cc.Node("PLACEHOLDER_LABEL")).getComponent(C$99r))||C$99t.addComponent(C$99r),C$99t.parent=this.node,this.placeholderLabel=C$99e),C$99e.node.setAnchorPoint(0,1),C$99e.overflow=C$99r.Overflow.CLAMP,this.inputMode===C$99o.ANY?(C$99e.verticalAlign=C$99i.VerticalTextAlignment.TOP,C$99e.enableWrapText=!0):(C$99e.verticalAlign=C$99i.VerticalTextAlignment.CENTER,C$99e.enableWrapText=!1),C$99e.string=this.placeholder,void 0!==this._N$placeholderFontColor&&(C$99e.node.color=this._N$placeholderFontColor,C$99e.node.opacity=this._N$placeholderFontColor.a,this._N$placeholderFontColor=void 0),void 0!==this._N$placeholderFontSize&&(C$99e.fontSize=this._N$placeholderFontSize,this._N$placeholderFontSize=void 0)},_upgradeComp:function(){void 0!==this._N$returnType&&(this.returnType=this._N$returnType,this._N$returnType=void 0),void 0!==this._N$maxLength&&(this.maxLength=this._N$maxLength,this._N$maxLength=void 0),void 0!==this._N$backgroundImage&&this._updateBackgroundSprite(),void 0===this._N$fontColor&&void 0===this._N$fontSize&&void 0===this._N$lineHeight||this._updateTextLabel(),void 0===this._N$placeholderFontColor&&void 0===this._N$placeholderFontSize||this._updatePlaceholderLabel(),void 0!==this._N$placeholder&&(this.placeholder=this._N$placeholder,this._N$placeholder=void 0)},_syncSize:function(){var C$99t;this._impl&&(C$99t=this.node.getContentSize(),this._impl.setSize(C$99t.width,C$99t.height))},_showLabels:function(){this._isLabelVisible=!0,this._updateLabels()},_hideLabels:function(){this._isLabelVisible=!1,this.textLabel&&(this.textLabel.node.active=!1),this.placeholderLabel&&(this.placeholderLabel.node.active=!1)},_updateLabels:function(){var C$99t;this._isLabelVisible&&(C$99t=this._string,this.textLabel&&(this.textLabel.node.active=""!==C$99t),this.placeholderLabel&&(this.placeholderLabel.node.active=""===C$99t))},_updateString:function(C$99t){var C$99e=this.textLabel;C$99e&&(C$99t=(C$99t=C$99t)&&this._updateLabelStringStyle(C$99t),C$99e.string=C$99t,this._updateLabels())},_updateLabelStringStyle:function(C$99t,C$99e){var C$99i=this.inputFlag;if(C$99e||C$99i!==C$99a.PASSWORD)C$99i===C$99a.INITIAL_CAPS_ALL_CHARACTERS?C$99t=C$99t.toUpperCase():C$99i===C$99a.INITIAL_CAPS_WORD?C$99t=C$99t.replace(/(?:^|\s)\S/g,function(C$99t){return C$99t.toUpperCase()}):C$99i===C$99a.INITIAL_CAPS_SENTENCE&&(C$99t=(C$99e=C$99t).charAt(0).toUpperCase()+C$99e.slice(1));else{for(var C$99n="",C$99r=C$99t.length,C$99s=0;C$99s<C$99r;++C$99s)C$99n+="â—";C$99t=C$99n}return C$99t},editBoxEditingDidBegan:function(){cc.Component.EventHandler.emitEvents(this.editingDidBegan,this),this.node.emit("editing-did-began",this)},editBoxEditingDidEnded:function(){cc.Component.EventHandler.emitEvents(this.editingDidEnded,this),this.node.emit("editing-did-ended",this)},editBoxTextChanged:function(C$99t){C$99t=this._updateLabelStringStyle(C$99t,!0),this.string=C$99t,cc.Component.EventHandler.emitEvents(this.textChanged,C$99t,this),this.node.emit("text-changed",this)},editBoxEditingReturn:function(){cc.Component.EventHandler.emitEvents(this.editingReturn,this),this.node.emit("editing-return",this)},onEnable:function(){this._registerEvent(),this._impl&&this._impl.enable()},onDisable:function(){this._unregisterEvent(),this._impl&&this._impl.disable()},onDestroy:function(){this._impl&&this._impl.clear()},__preload:function(){this._init()},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)},_onTouchBegan:function(C$99t){C$99t.stopPropagation()},_onTouchCancel:function(C$99t){C$99t.stopPropagation()},_onTouchEnded:function(C$99t){this._impl&&this._impl.beginEditing(),C$99t.stopPropagation()},setFocus:function(){cc.errorID(1400,"setFocus()","focus()"),this._impl&&this._impl.setFocus(!0)},focus:function(){this._impl&&this._impl.setFocus(!0)},blur:function(){this._impl&&this._impl.setFocus(!1)},isFocused:function(){return!!this._impl&&this._impl.isFocused()},update:function(){this._impl&&this._impl.update()}});cc.EditBox=C$99e.exports=C$99c,cc.sys.isBrowser&&C$99t("./WebEditBoxImpl")},{"../../platform/CCMacro":194,"../CCLabel":80,"../editbox/EditBoxImplBase":103,"./WebEditBoxImpl":104,"./types":106}],103:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({ctor:function(){this._delegate=null,this._editing=!1},init:function(C$99t){},enable:function(){},disable:function(){this._editing&&this.endEditing()},clear:function(){},update:function(){},setTabIndex:function(C$99t){},setSize:function(C$99t,C$99e){},setFocus:function(C$99t){C$99t?this.beginEditing():this.endEditing()},isFocused:function(){return this._editing},beginEditing:function(){},endEditing:function(){}});C$99e.exports=C$99n},{}],104:[function(C$99t,C$99n,C$99l){"use strict";var C$99_=(C$99e=C$99t("../../value-types/mat4"))&&C$99e.__esModule?C$99e:{default:C$99e};var C$99h=C$99t("../../platform/utils"),C$99u=C$99t("../../platform/CCMacro"),C$99e=C$99t("./types"),C$99a=C$99t("../CCLabel"),C$99r=C$99t("./tabIndexUtil"),C$99t=cc.EditBox,C$99f=cc.js,C$99s=C$99e.InputMode,C$99o=C$99e.InputFlag,C$99p=C$99e.KeyboardReturnType,C$99m={zoomInvalid:!1},C$99y=(cc.sys.OS_ANDROID!==cc.sys.os||cc.sys.browserType!==cc.sys.BROWSER_TYPE_SOUGOU&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_360||(C$99m.zoomInvalid=!0),0),C$99d=cc.v3(),C$99c=null,C$99i=!1,C$99g=!1,C$99v=C$99t._ImplClass;function C$99x(){C$99v.call(this),this._domId="EditBoxId_"+ ++C$99y,this._placeholderStyleSheet=null,this._elem=null,this._isTextArea=!1,this._worldMat=new C$99_.default,this._cameraMat=new C$99_.default,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this._cacheViewportRect=cc.rect(0,0,0,0),this._inputMode=null,this._inputFlag=null,this._returnType=null,this._eventListeners={},this._textLabelFont=null,this._textLabelFontSize=null,this._textLabelFontColor=null,this._textLabelAlign=null,this._placeholderLabelFont=null,this._placeholderLabelFontSize=null,this._placeholderLabelFontColor=null,this._placeholderLabelAlign=null,this._placeholderLineHeight=null}C$99f.extend(C$99x,C$99v),C$99t._ImplClass=C$99x,Object.assign(C$99x.prototype,{init:function(C$99t){C$99t&&((this._delegate=C$99t).inputMode===C$99s.ANY?this._createTextArea():this._createInput(),C$99r.add(this),this.setTabIndex(C$99t.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),C$99i=cc.view.isAutoFullScreenEnabled(),C$99g=cc.view._resizeWithBrowserSize)},clear:function(){this._removeEventListeners(),this._removeDomFromGameContainer(),C$99r.remove(this),C$99c===this&&(C$99c=null)},update:function(){},setTabIndex:function(C$99t){this._elem.tabIndex=C$99t,C$99r.resort()},setSize:function(C$99t,C$99e){var C$99i=this._elem;C$99i.style.width=C$99t+"px",C$99i.style.height=C$99e+"px"},beginEditing:function(){C$99c&&C$99c!==this&&C$99c.setFocus(!1),this._editing=!0,(C$99c=this)._delegate.editBoxEditingDidBegan(),this._showDom(),this._elem.focus()},endEditing:function(){this._elem&&this._elem.blur()},_createInput:function(){this._isTextArea=!1,this._elem=document.createElement("input")},_createTextArea:function(){this._isTextArea=!0,this._elem=document.createElement("textarea")},_addDomToGameContainer:function(){cc.game.container.appendChild(this._elem),document.head.appendChild(this._placeholderStyleSheet)},_removeDomFromGameContainer:function(){C$99h.contains(cc.game.container,this._elem)&&cc.game.container.removeChild(this._elem),C$99h.contains(document.head,this._placeholderStyleSheet)&&document.head.removeChild(this._placeholderStyleSheet),delete this._elem,delete this._placeholderStyleSheet},_showDom:function(){this._updateMatrix(),this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._elem.style.display="",this._delegate._hideLabels(),cc.sys.isMobile&&this._showDomOnMobile()},_hideDom:function(){this._elem.style.display="none",this._delegate._showLabels(),cc.sys.isMobile&&this._hideDomOnMobile()},_showDomOnMobile:function(){cc.sys.os===cc.sys.OS_ANDROID&&(C$99i&&(cc.view.enableAutoFullScreen(!1),cc.screen.exitFullScreen()),C$99g&&cc.view.resizeWithBrowserSize(!1),this._adjustWindowScroll())},_hideDomOnMobile:function(){cc.sys.os===cc.sys.OS_ANDROID&&(C$99g&&cc.view.resizeWithBrowserSize(!0),setTimeout(function(){C$99c||C$99i&&cc.view.enableAutoFullScreen(!0)},800)),this._scrollBackWindow()},_adjustWindowScroll:function(){var C$99t=this;setTimeout(function(){window.scrollY<100&&C$99t._elem.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})},800)},_scrollBackWindow:function(){setTimeout(function(){var C$99t=cc.sys;C$99t.browserType!==C$99t.BROWSER_TYPE_WECHAT||C$99t.os!==C$99t.OS_IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)},800)},_updateMatrix:function(){var C$99t,C$99e,C$99i,C$99h,C$99u,C$99n,C$99r,C$99s,C$99o=this._delegate.node,C$99a=(C$99o.getWorldMatrix(this._worldMat),this._worldMat),C$99c=C$99a.m,C$99l=cc.view;this._m00===C$99c[0]&&this._m01===C$99c[1]&&this._m04===C$99c[4]&&this._m05===C$99c[5]&&this._m12===C$99c[12]&&this._m13===C$99c[13]&&this._w===C$99o._contentSize.width&&this._h===C$99o._contentSize.height&&this._cacheViewportRect.equals(C$99l._viewportRect)||(this._m00=C$99c[0],this._m01=C$99c[1],this._m04=C$99c[4],this._m05=C$99c[5],this._m12=C$99c[12],this._m13=C$99c[13],this._w=C$99o._contentSize.width,this._h=C$99o._contentSize.height,this._cacheViewportRect.set(C$99l._viewportRect),C$99c=C$99l._scaleX,C$99t=C$99l._scaleY,C$99r=C$99l._viewportRect,C$99l=C$99l._devicePixelRatio,C$99d.x=-C$99o._anchorPoint.x*this._w,C$99d.y=-C$99o._anchorPoint.y*this._h,C$99_.default.transform(C$99a,C$99a,C$99d),cc.Camera.findCamera(C$99o).getWorldToScreenMatrix2D(this._cameraMat),C$99e=this._cameraMat,C$99_.default.mul(C$99e,C$99e,C$99a),C$99c/=C$99l,C$99t/=C$99l,C$99a=cc.game.container,C$99i=(C$99e=C$99e.m)[0]*C$99c,C$99h=C$99e[1],C$99u=C$99e[4],C$99n=C$99e[5]*C$99t,C$99s=C$99a&&C$99a.style.paddingLeft&&parseInt(C$99a.style.paddingLeft),C$99s+=C$99r.x/C$99l,C$99a=C$99a&&C$99a.style.paddingBottom&&parseInt(C$99a.style.paddingBottom),C$99a+=C$99r.y/C$99l,C$99r=C$99e[12]*C$99c+C$99s,C$99l=C$99e[13]*C$99t+C$99a,C$99m.zoomInvalid&&(this.setSize(C$99o.width*C$99i,C$99o.height*C$99n),C$99n=C$99i=1),(C$99c=this._elem).style.transform=C$99s="matrix("+C$99i+","+-C$99h+","+-C$99u+","+C$99n+","+C$99r+","+-C$99l+")",C$99c.style["-webkit-transform"]=C$99s,C$99c.style["transform-origin"]="0px 100% 0px",C$99c.style["-webkit-transform-origin"]="0px 100% 0px")},_updateInputType:function(){var C$99t,C$99e=this._delegate,C$99i=C$99e.inputMode,C$99n=C$99e.inputFlag,C$99e=C$99e.returnType,C$99r=this._elem;if(this._inputMode!==C$99i||this._inputFlag!==C$99n||this._returnType!==C$99e){if(this._inputMode=C$99i,this._inputFlag=C$99n,this._returnType=C$99e,this._isTextArea)return C$99t="none",C$99n===C$99o.INITIAL_CAPS_ALL_CHARACTERS?C$99t="uppercase":C$99n===C$99o.INITIAL_CAPS_WORD&&(C$99t="capitalize"),void(C$99r.style.textTransform=C$99t);C$99n!==C$99o.PASSWORD?(C$99t=C$99r.type,C$99i===C$99s.EMAIL_ADDR?C$99t="email":C$99i===C$99s.NUMERIC||C$99i===C$99s.DECIMAL?C$99t="number":C$99i===C$99s.PHONE_NUMBER?(C$99t="number",C$99r.pattern="[0-9]*"):C$99i===C$99s.URL?C$99t="url":(C$99t="text",C$99e===C$99p.SEARCH&&(C$99t="search")),C$99r.type=C$99t,C$99i="none",C$99n===C$99o.INITIAL_CAPS_ALL_CHARACTERS?C$99i="uppercase":C$99n===C$99o.INITIAL_CAPS_WORD&&(C$99i="capitalize"),C$99r.style.textTransform=C$99i):C$99r.type="password"}},_updateMaxLength:function(){var C$99t=this._delegate.maxLength;this._elem.maxLength=C$99t=C$99t<0?65535:C$99t},_initStyleSheet:function(){var C$99t=this._elem;C$99t.style.display="none",C$99t.style.border=0,C$99t.style.background="transparent",C$99t.style.width="100%",C$99t.style.height="100%",C$99t.style.active=0,C$99t.style.outline="medium",C$99t.style.padding="0",C$99t.style.textTransform="uppercase",C$99t.style.position="absolute",C$99t.style.bottom="0px",C$99t.style.left="2px",C$99t.className="cocosEditBox",C$99t.id=this._domId,this._isTextArea?(C$99t.style.resize="none",C$99t.style.overflow_y="scroll"):(C$99t.type="text",C$99t.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")},_updateStyleSheet:function(){var C$99t=this._delegate,C$99e=this._elem;C$99e.value=C$99t.string,C$99e.placeholder=C$99t.placeholder,this._updateTextLabel(C$99t.textLabel),this._updatePlaceholderLabel(C$99t.placeholderLabel)},_updateTextLabel:function(C$99t){if(C$99t){var C$99e=!(C$99e=C$99t.font)||C$99e instanceof cc.BitmapFont?C$99t.fontFamily:C$99e._fontFamily,C$99i=C$99t.fontSize*C$99t.node.scaleY;if(this._textLabelFont!==C$99e||this._textLabelFontSize!==C$99i||this._textLabelFontColor!==C$99t.fontColor||this._textLabelAlign!==C$99t.horizontalAlign){this._textLabelFont=C$99e,this._textLabelFontSize=C$99i,this._textLabelFontColor=C$99t.fontColor,this._textLabelAlign=C$99t.horizontalAlign;var C$99n=this._elem;switch(C$99n.style.fontSize=C$99i+"px",C$99n.style.color=C$99t.node.color.toCSS(),C$99n.style.fontFamily=C$99e,C$99t.horizontalAlign){case C$99a.HorizontalAlign.LEFT:C$99n.style.textAlign="left";break;case C$99a.HorizontalAlign.CENTER:C$99n.style.textAlign="center";break;case C$99a.HorizontalAlign.RIGHT:C$99n.style.textAlign="right"}}}},_updatePlaceholderLabel:function(C$99t){if(C$99t){var C$99e=!(C$99e=C$99t.font)||C$99e instanceof cc.BitmapFont?C$99t.fontFamily:C$99t.font._fontFamily,C$99i=C$99t.fontSize*C$99t.node.scaleY;if(this._placeholderLabelFont!==C$99e||this._placeholderLabelFontSize!==C$99i||this._placeholderLabelFontColor!==C$99t.fontColor||this._placeholderLabelAlign!==C$99t.horizontalAlign||this._placeholderLineHeight!==C$99t.fontSize){this._placeholderLabelFont=C$99e,this._placeholderLabelFontSize=C$99i,this._placeholderLabelFontColor=C$99t.fontColor,this._placeholderLabelAlign=C$99t.horizontalAlign,this._placeholderLineHeight=C$99t.fontSize;var C$99n,C$99r=this._placeholderStyleSheet,C$99s=C$99t.node.color.toCSS(),C$99o=C$99t.fontSize;switch(C$99t.horizontalAlign){case C$99a.HorizontalAlign.LEFT:C$99n="left";break;case C$99a.HorizontalAlign.CENTER:C$99n="center";break;case C$99a.HorizontalAlign.RIGHT:C$99n="right"}C$99r.innerHTML="#"+this._domId+"::-webkit-input-placeholder,#"+this._domId+"::-moz-placeholder,#"+this._domId+":-ms-input-placeholder{text-transform: initial; font-family: "+C$99e+"; font-size: "+C$99i+"px; color: "+C$99s+"; line-height: "+C$99o+"px; text-align: "+C$99n+";}",cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE&&(C$99r.innerHTML+="#"+this._domId+"::-ms-clear{display: none;}")}}},_registerEventListeners:function(){var C$99e=this,C$99i=this._elem,C$99t=!1,C$99n=this._eventListeners;C$99n.compositionStart=function(){C$99t=!0},C$99n.compositionEnd=function(){C$99t=!1,C$99e._delegate.editBoxTextChanged(C$99i.value)},C$99n.onInput=function(){C$99t||C$99e._delegate.editBoxTextChanged(C$99i.value)},C$99n.onClick=function(C$99t){C$99e._editing&&cc.sys.isMobile&&C$99e._adjustWindowScroll()},C$99n.onKeydown=function(C$99t){C$99t.keyCode===C$99u.KEY.enter?(C$99t.stopPropagation(),C$99e._delegate.editBoxEditingReturn(),C$99e._isTextArea||C$99i.blur()):C$99t.keyCode===C$99u.KEY.tab&&(C$99t.stopPropagation(),C$99t.preventDefault(),C$99r.next(C$99e))},C$99n.onBlur=function(){C$99e._editing=!1,C$99c=null,C$99e._hideDom(),C$99e._delegate.editBoxEditingDidEnded()},C$99n.onResize=function(){C$99e._updateMatrix()},C$99i.addEventListener("compositionstart",C$99n.compositionStart),C$99i.addEventListener("compositionend",C$99n.compositionEnd),C$99i.addEventListener("input",C$99n.onInput),C$99i.addEventListener("keydown",C$99n.onKeydown),C$99i.addEventListener("blur",C$99n.onBlur),C$99i.addEventListener("touchstart",C$99n.onClick),window.addEventListener("resize",C$99n.onResize),window.addEventListener("orientationchange",C$99n.onResize)},_removeEventListeners:function(){var C$99t=this._elem,C$99e=this._eventListeners;C$99t.removeEventListener("compositionstart",C$99e.compositionStart),C$99t.removeEventListener("compositionend",C$99e.compositionEnd),C$99t.removeEventListener("input",C$99e.onInput),C$99t.removeEventListener("keydown",C$99e.onKeydown),C$99t.removeEventListener("blur",C$99e.onBlur),C$99t.removeEventListener("touchstart",C$99e.onClick),window.removeEventListener("resize",C$99e.onResize),window.removeEventListener("orientationchange",C$99e.onResize),C$99e.compositionStart=null,C$99e.compositionEnd=null,C$99e.onInput=null,C$99e.onKeydown=null,C$99e.onBlur=null,C$99e.onClick=null,C$99e.onResize=null}})},{"../../platform/CCMacro":194,"../../platform/utils":213,"../../value-types/mat4":281,"../CCLabel":80,"./tabIndexUtil":105,"./types":106}],105:[function(C$99t,C$99e,C$99i){"use strict";C$99e.exports={_tabIndexList:[],add:function(C$99t){var C$99e=this._tabIndexList;-1===C$99e.indexOf(C$99t)&&C$99e.push(C$99t)},remove:function(C$99t){var C$99e=this._tabIndexList,C$99t=C$99e.indexOf(C$99t);-1!==C$99t&&C$99e.splice(C$99t,1)},resort:function(){this._tabIndexList.sort(function(C$99t,C$99e){return C$99t._delegate._tabIndex-C$99e._delegate._tabIndex})},next:function(C$99t){var C$99e=this._tabIndexList,C$99i=C$99e.indexOf(C$99t);C$99t.setFocus(!1),-1===C$99i||(C$99t=C$99e[C$99i+1])&&0<=C$99t._delegate._tabIndex&&C$99t.setFocus(!0)}}},{}],106:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Enum({DEFAULT:0,DONE:1,SEND:2,SEARCH:3,GO:4,NEXT:5}),C$99r=cc.Enum({ANY:0,EMAIL_ADDR:1,NUMERIC:2,PHONE_NUMBER:3,URL:4,DECIMAL:5,SINGLE_LINE:6}),C$99s=cc.Enum({PASSWORD:0,SENSITIVE:1,INITIAL_CAPS_WORD:2,INITIAL_CAPS_SENTENCE:3,INITIAL_CAPS_ALL_CHARACTERS:4,DEFAULT:5});C$99e.exports={KeyboardReturnType:C$99n,InputMode:C$99r,InputFlag:C$99s}},{}],107:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCComponent"),C$99t("./CCComponentEventHandler"),C$99t("./missing-script");var C$99n=C$99t("./WXSubContextView"),C$99r=C$99t("./SwanSubContextView"),C$99n=C$99n||cc.Class({name:"cc.WXSubContextView",extends:cc.Component}),C$99r=C$99r||cc.Class({name:"cc.SwanSubContextView",extends:cc.Component}),C$99t=[C$99t("./CCSprite"),C$99t("./CCWidget"),C$99t("./CCCanvas"),C$99t("./CCAudioSource"),C$99t("./CCAnimation"),C$99t("./CCButton"),C$99t("./CCLabel"),C$99t("./CCProgressBar"),C$99t("./CCMask"),C$99t("./CCScrollBar"),C$99t("./CCScrollView"),C$99t("./CCPageViewIndicator"),C$99t("./CCPageView"),C$99t("./CCSlider"),C$99t("./CCLayout"),C$99t("./editbox/CCEditBox"),C$99t("./CCLabelOutline"),C$99t("./CCLabelShadow"),C$99t("./CCRichText"),C$99t("./CCToggleContainer"),C$99t("./CCToggleGroup"),C$99t("./CCToggle"),C$99t("./CCBlockInputEvents"),C$99t("./CCMotionStreak"),C$99n,C$99r];C$99e.exports=C$99t},{"./CCAnimation":73,"./CCAudioSource":74,"./CCBlockInputEvents":75,"./CCButton":76,"./CCCanvas":77,"./CCComponent":78,"./CCComponentEventHandler":79,"./CCLabel":80,"./CCLabelOutline":81,"./CCLabelShadow":82,"./CCLayout":83,"./CCMask":84,"./CCMotionStreak":85,"./CCPageView":86,"./CCPageViewIndicator":87,"./CCProgressBar":88,"./CCRichText":90,"./CCScrollBar":91,"./CCScrollView":92,"./CCSlider":93,"./CCSprite":94,"./CCToggle":96,"./CCToggleContainer":97,"./CCToggleGroup":98,"./CCWidget":100,"./SwanSubContextView":void 0,"./WXSubContextView":101,"./editbox/CCEditBox":102,"./missing-script":108}],108:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.js,C$99r=C$99t("../utils/misc").BUILTIN_CLASSID_RE,C$99s=cc.Class({name:"cc.MissingClass",properties:{_$erialized:{default:null,visible:!1,editorOnly:!0}}}),C$99o=cc.Class({name:"cc.MissingScript",extends:cc.Component,editor:{inspector:"packages://inspector/inspectors/comps/missing-script.js"},properties:{compiled:{default:!1,serializable:!1},_$erialized:{default:null,visible:!1,editorOnly:!0}},ctor:!1,statics:{safeFindClass:function(C$99t,C$99e){var C$99i=C$99n._getClassById(C$99t);return C$99i||(C$99t?(cc.deserialize.reportMissingClass(C$99t),C$99o.getMissingWrapper(C$99t,C$99e)):null)},getMissingWrapper:function(C$99t,C$99e){return C$99e.node&&(/^[0-9a-zA-Z+/]{23}$/.test(C$99t)||C$99r.test(C$99t))?C$99o:C$99s}},onLoad:function(){cc.warnID(4600,this.node.name)}});cc._MissingScript=C$99e.exports=C$99o},{"../utils/misc":264}],109:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e){cc.Event.call(this,cc.Event.MOUSE,C$99e),this._eventType=C$99t,this._button=0,this._x=0,this._y=0,this._prevX=0,this._prevY=0,this._scrollX=0,this._scrollY=0}function C$99r(C$99t,C$99e){cc.Event.call(this,cc.Event.TOUCH,C$99e),this._eventCode=0,this._touches=C$99t||[],this.touch=null,this.currentTouch=null}function C$99s(C$99t,C$99e){cc.Event.call(this,cc.Event.ACCELERATION,C$99e),this.acc=C$99t}function C$99o(C$99t,C$99e,C$99i){cc.Event.call(this,cc.Event.KEYBOARD,C$99i),this.keyCode=C$99t,this.isPressed=C$99e}var C$99a=cc.js,C$99t=(C$99t("../event/event"),C$99a.extend(C$99n,cc.Event),C$99n.prototype);C$99t.setScrollData=function(C$99t,C$99e){this._scrollX=C$99t,this._scrollY=C$99e},C$99t.getScrollX=function(){return this._scrollX},C$99t.getScrollY=function(){return this._scrollY},C$99t.setLocation=function(C$99t,C$99e){this._x=C$99t,this._y=C$99e},C$99t.getLocation=function(){return cc.v2(this._x,this._y)},C$99t.getLocationInView=function(){return cc.v2(this._x,cc.view._designResolutionSize.height-this._y)},C$99t._setPrevCursor=function(C$99t,C$99e){this._prevX=C$99t,this._prevY=C$99e},C$99t.getPreviousLocation=function(){return cc.v2(this._prevX,this._prevY)},C$99t.getDelta=function(){return cc.v2(this._x-this._prevX,this._y-this._prevY)},C$99t.getDeltaX=function(){return this._x-this._prevX},C$99t.getDeltaY=function(){return this._y-this._prevY},C$99t.setButton=function(C$99t){this._button=C$99t},C$99t.getButton=function(){return this._button},C$99t.getLocationX=function(){return this._x},C$99t.getLocationY=function(){return this._y},C$99n.NONE=0,C$99n.DOWN=1,C$99n.UP=2,C$99n.MOVE=3,C$99n.SCROLL=4,C$99n.BUTTON_LEFT=0,C$99n.BUTTON_RIGHT=2,C$99n.BUTTON_MIDDLE=1,C$99n.BUTTON_4=3,C$99n.BUTTON_5=4,C$99n.BUTTON_6=5,C$99n.BUTTON_7=6,C$99n.BUTTON_8=7,C$99a.extend(C$99r,cc.Event),(C$99t=C$99r.prototype).getEventCode=function(){return this._eventCode},C$99t.getTouches=function(){return this._touches},C$99t._setEventCode=function(C$99t){this._eventCode=C$99t},C$99t._setTouches=function(C$99t){this._touches=C$99t},C$99t.setLocation=function(C$99t,C$99e){this.touch&&this.touch.setTouchInfo(this.touch.getID(),C$99t,C$99e)},C$99t.getLocation=function(){return this.touch?this.touch.getLocation():cc.v2()},C$99t.getLocationInView=function(){return this.touch?this.touch.getLocationInView():cc.v2()},C$99t.getPreviousLocation=function(){return this.touch?this.touch.getPreviousLocation():cc.v2()},C$99t.getStartLocation=function(){return this.touch?this.touch.getStartLocation():cc.v2()},C$99t.getID=function(){return this.touch?this.touch.getID():null},C$99t.getDelta=function(){return this.touch?this.touch.getDelta():cc.v2()},C$99t.getDeltaX=function(){return this.touch?this.touch.getDelta().x:0},C$99t.getDeltaY=function(){return this.touch?this.touch.getDelta().y:0},C$99t.getLocationX=function(){return this.touch?this.touch.getLocationX():0},C$99t.getLocationY=function(){return this.touch?this.touch.getLocationY():0},C$99r.MAX_TOUCHES=5,C$99r.BEGAN=0,C$99r.MOVED=1,C$99r.ENDED=2,C$99r.CANCELED=3,C$99a.extend(C$99s,cc.Event);C$99a.extend(C$99o,cc.Event),cc.Event.EventMouse=C$99n,cc.Event.EventTouch=C$99r,cc.Event.EventAcceleration=C$99s,cc.Event.EventKeyboard=C$99o,C$99e.exports=cc.Event},{"../event/event":116}],110:[function(C$99t,C$99e,C$99n){"use strict";function C$99r(C$99t,C$99e){this._onCustomEvent=C$99e,cc.EventListener.call(this,cc.EventListener.CUSTOM,C$99t,this._callback)}function C$99s(){cc.EventListener.call(this,cc.EventListener.MOUSE,C$99i.MOUSE,this._callback)}function C$99o(){cc.EventListener.call(this,cc.EventListener.TOUCH_ONE_BY_ONE,C$99i.TOUCH_ONE_BY_ONE,null),this._claimedTouches=[]}function C$99a(){cc.EventListener.call(this,cc.EventListener.TOUCH_ALL_AT_ONCE,C$99i.TOUCH_ALL_AT_ONCE,null)}function C$99c(C$99t){this._onAccelerationEvent=C$99t,cc.EventListener.call(this,cc.EventListener.ACCELERATION,C$99i.ACCELERATION,this._callback)}function C$99l(){cc.EventListener.call(this,cc.EventListener.KEYBOARD,C$99i.KEYBOARD,this._callback)}var C$99t=C$99t("../platform/js"),C$99i=(cc.EventListener=function(C$99t,C$99e,C$99i){this._onEvent=C$99i,this._type=C$99t||0,this._listenerID=C$99e||"",this._registered=!1,this._fixedPriority=0,this._node=null,this._target=null,this._paused=!0,this._isEnabled=!0},cc.EventListener.prototype={constructor:cc.EventListener,_setPaused:function(C$99t){this._paused=C$99t},_isPaused:function(){return this._paused},_setRegistered:function(C$99t){this._registered=C$99t},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_getListenerID:function(){return this._listenerID},_setFixedPriority:function(C$99t){this._fixedPriority=C$99t},_getFixedPriority:function(){return this._fixedPriority},_setSceneGraphPriority:function(C$99t){this._target=C$99t,this._node=C$99t},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return null!==this._onEvent},clone:function(){return null},setEnabled:function(C$99t){this._isEnabled=C$99t},isEnabled:function(){return this._isEnabled},retain:function(){},release:function(){}},cc.EventListener.UNKNOWN=0,cc.EventListener.TOUCH_ONE_BY_ONE=1,cc.EventListener.TOUCH_ALL_AT_ONCE=2,cc.EventListener.KEYBOARD=3,cc.EventListener.MOUSE=4,cc.EventListener.ACCELERATION=6,cc.EventListener.CUSTOM=8,cc.EventListener.ListenerID={MOUSE:"__cc_mouse",TOUCH_ONE_BY_ONE:"__cc_touch_one_by_one",TOUCH_ALL_AT_ONCE:"__cc_touch_all_at_once",KEYBOARD:"__cc_keyboard",ACCELERATION:"__cc_acceleration"});C$99t.extend(C$99r,cc.EventListener),C$99t.mixin(C$99r.prototype,{_onCustomEvent:null,_callback:function(C$99t){null!==this._onCustomEvent&&this._onCustomEvent(C$99t)},checkAvailable:function(){return cc.EventListener.prototype.checkAvailable.call(this)&&null!==this._onCustomEvent},clone:function(){return new C$99r(this._listenerID,this._onCustomEvent)}}),C$99t.extend(C$99s,cc.EventListener),C$99t.mixin(C$99s.prototype,{onMouseDown:null,onMouseUp:null,onMouseMove:null,onMouseScroll:null,_callback:function(C$99t){var C$99e=cc.Event.EventMouse;switch(C$99t._eventType){case C$99e.DOWN:this.onMouseDown&&this.onMouseDown(C$99t);break;case C$99e.UP:this.onMouseUp&&this.onMouseUp(C$99t);break;case C$99e.MOVE:this.onMouseMove&&this.onMouseMove(C$99t);break;case C$99e.SCROLL:this.onMouseScroll&&this.onMouseScroll(C$99t)}},clone:function(){var C$99t=new C$99s;return C$99t.onMouseDown=this.onMouseDown,C$99t.onMouseUp=this.onMouseUp,C$99t.onMouseMove=this.onMouseMove,C$99t.onMouseScroll=this.onMouseScroll,C$99t},checkAvailable:function(){return!0}}),C$99t.extend(C$99o,cc.EventListener),C$99t.mixin(C$99o.prototype,{constructor:C$99o,_claimedTouches:null,swallowTouches:!1,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,onTouchCancelled:null,setSwallowTouches:function(C$99t){this.swallowTouches=C$99t},isSwallowTouches:function(){return this.swallowTouches},clone:function(){var C$99t=new C$99o;return C$99t.onTouchBegan=this.onTouchBegan,C$99t.onTouchMoved=this.onTouchMoved,C$99t.onTouchEnded=this.onTouchEnded,C$99t.onTouchCancelled=this.onTouchCancelled,C$99t.swallowTouches=this.swallowTouches,C$99t},checkAvailable:function(){return!!this.onTouchBegan||(cc.logID(1801),!1)}}),C$99t.extend(C$99a,cc.EventListener),C$99t.mixin(C$99a.prototype,{constructor:C$99a,onTouchesBegan:null,onTouchesMoved:null,onTouchesEnded:null,onTouchesCancelled:null,clone:function(){var C$99t=new C$99a;return C$99t.onTouchesBegan=this.onTouchesBegan,C$99t.onTouchesMoved=this.onTouchesMoved,C$99t.onTouchesEnded=this.onTouchesEnded,C$99t.onTouchesCancelled=this.onTouchesCancelled,C$99t},checkAvailable:function(){return null!==this.onTouchesBegan||null!==this.onTouchesMoved||null!==this.onTouchesEnded||null!==this.onTouchesCancelled||(cc.logID(1802),!1)}}),C$99t.extend(C$99c,cc.EventListener),C$99t.mixin(C$99c.prototype,{constructor:C$99c,_onAccelerationEvent:null,_callback:function(C$99t){this._onAccelerationEvent(C$99t.acc,C$99t)},checkAvailable:function(){return cc.assertID(this._onAccelerationEvent,1803),!0},clone:function(){return new C$99c(this._onAccelerationEvent)}});C$99t.extend(C$99l,cc.EventListener),C$99t.mixin(C$99l.prototype,{constructor:C$99l,onKeyPressed:null,onKeyReleased:null,_callback:function(C$99t){C$99t.isPressed?this.onKeyPressed&&this.onKeyPressed(C$99t.keyCode,C$99t):this.onKeyReleased&&this.onKeyReleased(C$99t.keyCode,C$99t)},clone:function(){var C$99t=new C$99l;return C$99t.onKeyPressed=this.onKeyPressed,C$99t.onKeyReleased=this.onKeyReleased,C$99t},checkAvailable:function(){return null!==this.onKeyPressed||null!==this.onKeyReleased||(cc.logID(1800),!1)}}),cc.EventListener.create=function(C$99t){cc.assertID(C$99t&&C$99t.event,1900);var C$99e,C$99i=C$99t.event,C$99n=(delete C$99t.event,null);for(C$99e in C$99i===cc.EventListener.TOUCH_ONE_BY_ONE?C$99n=new C$99o:C$99i===cc.EventListener.TOUCH_ALL_AT_ONCE?C$99n=new C$99a:C$99i===cc.EventListener.MOUSE?C$99n=new C$99s:C$99i===cc.EventListener.CUSTOM?(C$99n=new C$99r(C$99t.eventName,C$99t.callback),delete C$99t.eventName,delete C$99t.callback):C$99i===cc.EventListener.KEYBOARD?C$99n=new C$99l:C$99i===cc.EventListener.ACCELERATION&&(C$99n=new C$99c(C$99t.callback),delete C$99t.callback),C$99t)C$99n[C$99e]=C$99t[C$99e];return C$99n},C$99e.exports=cc.EventListener},{"../platform/js":209}],111:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){this._fixedListeners=[],this._sceneGraphListeners=[],this.gt0Index=0}var C$99r=C$99t("../platform/js"),C$99l=(C$99t("./CCEventListener"),cc.EventListener.ListenerID),C$99h={DIRTY_NONE:0,DIRTY_FIXED_PRIORITY:1,DIRTY_SCENE_GRAPH_PRIORITY:2,DIRTY_ALL:3,_listenersMap:{},_priorityDirtyFlagMap:{},_nodeListenersMap:{},_toAddedListeners:[],_toRemovedListeners:[],_dirtyListeners:{},_inDispatch:0,_isEnabled:!(C$99n.prototype={constructor:C$99n,size:function(){return this._fixedListeners.length+this._sceneGraphListeners.length},empty:function(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length},push:function(C$99t){(0===C$99t._getFixedPriority()?this._sceneGraphListeners:this._fixedListeners).push(C$99t)},clearSceneGraphListeners:function(){this._sceneGraphListeners.length=0},clearFixedListeners:function(){this._fixedListeners.length=0},clear:function(){this._sceneGraphListeners.length=0,this._fixedListeners.length=0},getFixedPriorityListeners:function(){return this._fixedListeners},getSceneGraphPriorityListeners:function(){return this._sceneGraphListeners}}),_currentTouch:null,_currentTouchListener:null,_internalCustomListenerIDs:[],_setDirtyForNode:function(C$99t){var C$99e=this._nodeListenersMap[C$99t._id];if(void 0!==C$99e)for(var C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i]._getListenerID();null==this._dirtyListeners[C$99r]&&(this._dirtyListeners[C$99r]=!0)}if(0<C$99t.childrenCount)for(var C$99s=C$99t._children,C$99o=0,C$99a=C$99s.length;C$99o<C$99a;C$99o++)this._setDirtyForNode(C$99s[C$99o])},pauseTarget:function(C$99t,C$99e){if(C$99t instanceof cc._BaseNode){var C$99i=this._nodeListenersMap[C$99t._id];if(C$99i)for(C$99r=0,C$99s=C$99i.length;C$99r<C$99s;C$99r++)C$99i[C$99r]._setPaused(!0);if(!0===C$99e)for(var C$99n=C$99t._children,C$99r=0,C$99s=C$99n?C$99n.length:0;C$99r<C$99s;C$99r++)this.pauseTarget(C$99n[C$99r],!0)}else cc.warnID(3506)},resumeTarget:function(C$99t,C$99e){if(C$99t instanceof cc._BaseNode){var C$99i=this._nodeListenersMap[C$99t._id];if(C$99i)for(C$99r=0,C$99s=C$99i.length;C$99r<C$99s;C$99r++)C$99i[C$99r]._setPaused(!1);if(this._setDirtyForNode(C$99t),!0===C$99e)for(var C$99n=C$99t._children,C$99r=0,C$99s=C$99n?C$99n.length:0;C$99r<C$99s;C$99r++)this.resumeTarget(C$99n[C$99r],!0)}else cc.warnID(3506)},_addListener:function(C$99t){0===this._inDispatch?this._forceAddEventListener(C$99t):this._toAddedListeners.push(C$99t)},_forceAddEventListener:function(C$99t){var C$99e=C$99t._getListenerID(),C$99i=this._listenersMap[C$99e];C$99i||(C$99i=new C$99n,this._listenersMap[C$99e]=C$99i),C$99i.push(C$99t),0===C$99t._getFixedPriority()?(this._setDirty(C$99e,this.DIRTY_SCENE_GRAPH_PRIORITY),null===(C$99i=C$99t._getSceneGraphPriority())&&cc.logID(3507),this._associateNodeAndEventListener(C$99i,C$99t),C$99i.activeInHierarchy&&this.resumeTarget(C$99i)):this._setDirty(C$99e,this.DIRTY_FIXED_PRIORITY)},_getListeners:function(C$99t){return this._listenersMap[C$99t]},_updateDirtyFlagForSceneGraph:function(){for(var C$99t in this._dirtyListeners)this._setDirty(C$99t,this.DIRTY_SCENE_GRAPH_PRIORITY);this._dirtyListeners={}},_removeAllListenersInVector:function(C$99t){if(C$99t)for(var C$99e,C$99i=C$99t.length-1;0<=C$99i;C$99i--)(C$99e=C$99t[C$99i])._setRegistered(!1),null!=C$99e._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$99e._getSceneGraphPriority(),C$99e),C$99e._setSceneGraphPriority(null)),0===this._inDispatch&&cc.js.array.removeAt(C$99t,C$99i)},_removeListenersForListenerID:function(C$99t){for(var C$99e,C$99i,C$99n,C$99r=this._listenersMap[C$99t],C$99s=(C$99r&&(C$99e=C$99r.getFixedPriorityListeners(),C$99i=C$99r.getSceneGraphPriorityListeners(),this._removeAllListenersInVector(C$99i),this._removeAllListenersInVector(C$99e),delete this._priorityDirtyFlagMap[C$99t],this._inDispatch||(C$99r.clear(),delete this._listenersMap[C$99t])),this._toAddedListeners),C$99o=C$99s.length-1;0<=C$99o;C$99o--)(C$99n=C$99s[C$99o])&&C$99n._getListenerID()===C$99t&&cc.js.array.removeAt(C$99s,C$99o)},_sortEventListeners:function(C$99t){var C$99e=this.DIRTY_NONE,C$99i=this._priorityDirtyFlagMap;(C$99e=C$99i[C$99t]?C$99i[C$99t]:C$99e)!==this.DIRTY_NONE&&(C$99i[C$99t]=this.DIRTY_NONE,C$99e&this.DIRTY_FIXED_PRIORITY&&this._sortListenersOfFixedPriority(C$99t),C$99e&this.DIRTY_SCENE_GRAPH_PRIORITY&&cc.director.getScene()&&this._sortListenersOfSceneGraphPriority(C$99t))},_sortListenersOfSceneGraphPriority:function(C$99t){var C$99e,C$99t=this._getListeners(C$99t);!C$99t||(C$99e=C$99t.getSceneGraphPriorityListeners())&&0!==C$99e.length&&C$99t.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes)},_sortEventListenersOfSceneGraphPriorityDes:function(C$99t,C$99e){var C$99i=C$99t._getSceneGraphPriority(),C$99n=C$99e._getSceneGraphPriority();if(!(C$99e&&C$99n&&C$99n._activeInHierarchy&&null!==C$99n._parent))return-1;if(!C$99t||!C$99i||!C$99i._activeInHierarchy||null===C$99i._parent)return 1;for(var C$99r=C$99i,C$99s=C$99n,C$99o=!1;C$99r._parent._id!==C$99s._parent._id;)C$99r=null===C$99r._parent._parent?(C$99o=!0,C$99n):C$99r._parent,C$99s=null===C$99s._parent._parent?(C$99o=!0,C$99i):C$99s._parent;if(C$99r._id===C$99s._id){if(C$99r._id===C$99n._id)return-1;if(C$99r._id===C$99i._id)return 1}return C$99o?C$99r._localZOrder-C$99s._localZOrder:C$99s._localZOrder-C$99r._localZOrder},_sortListenersOfFixedPriority:function(C$99t){C$99t=this._listenersMap[C$99t];if(C$99t){var C$99e=C$99t.getFixedPriorityListeners();if(C$99e&&0!==C$99e.length){C$99e.sort(this._sortListenersOfFixedPriorityAsc);for(var C$99i=0,C$99n=C$99e.length;C$99i<C$99n&&!(0<=C$99e[C$99i]._getFixedPriority());)++C$99i;C$99t.gt0Index=C$99i}}},_sortListenersOfFixedPriorityAsc:function(C$99t,C$99e){return C$99t._getFixedPriority()-C$99e._getFixedPriority()},_onUpdateListeners:function(C$99t){var C$99e,C$99i,C$99n,C$99r=C$99t.getFixedPriorityListeners(),C$99s=C$99t.getSceneGraphPriorityListeners(),C$99o=this._toRemovedListeners;if(C$99s)for(C$99e=C$99s.length-1;0<=C$99e;C$99e--)(C$99i=C$99s[C$99e])._isRegistered()||(cc.js.array.removeAt(C$99s,C$99e),-1!==(C$99n=C$99o.indexOf(C$99i))&&C$99o.splice(C$99n,1));if(C$99r)for(C$99e=C$99r.length-1;0<=C$99e;C$99e--)(C$99i=C$99r[C$99e])._isRegistered()||(cc.js.array.removeAt(C$99r,C$99e),-1!==(C$99n=C$99o.indexOf(C$99i))&&C$99o.splice(C$99n,1));C$99s&&0===C$99s.length&&C$99t.clearSceneGraphListeners(),C$99r&&0===C$99r.length&&C$99t.clearFixedListeners()},frameUpdateListeners:function(){var C$99t,C$99e=this._listenersMap,C$99i=this._priorityDirtyFlagMap;for(C$99t in C$99e)C$99e[C$99t].empty()&&(delete C$99i[C$99t],delete C$99e[C$99t]);var C$99n=this._toAddedListeners;if(0!==C$99n.length){for(var C$99r=0,C$99s=C$99n.length;C$99r<C$99s;C$99r++)this._forceAddEventListener(C$99n[C$99r]);C$99n.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()},_updateTouchListeners:function(C$99t){var C$99e=this._inDispatch;if(cc.assertID(0<C$99e,3508),!(1<C$99e)){var C$99i=this._listenersMap[C$99l.TOUCH_ONE_BY_ONE],C$99n=(C$99i&&this._onUpdateListeners(C$99i),(C$99i=this._listenersMap[C$99l.TOUCH_ALL_AT_ONCE])&&this._onUpdateListeners(C$99i),cc.assertID(1===C$99e,3509),this._toAddedListeners);if(0!==C$99n.length){for(var C$99r=0,C$99s=C$99n.length;C$99r<C$99s;C$99r++)this._forceAddEventListener(C$99n[C$99r]);this._toAddedListeners.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}},_cleanToRemovedListeners:function(){for(var C$99t=this._toRemovedListeners,C$99e=0;C$99e<C$99t.length;C$99e++){var C$99i,C$99n,C$99r=C$99t[C$99e],C$99s=this._listenersMap[C$99r._getListenerID()];C$99s&&(C$99n=C$99s.getFixedPriorityListeners(),(C$99s=C$99s.getSceneGraphPriorityListeners())&&-1!==(C$99i=C$99s.indexOf(C$99r))&&C$99s.splice(C$99i,1),C$99n&&-1!==(C$99i=C$99n.indexOf(C$99r))&&C$99n.splice(C$99i,1))}C$99t.length=0},_onTouchEventCallback:function(C$99t,C$99e){if(!C$99t._isRegistered())return!1;var C$99i,C$99n=C$99e.event,C$99r=C$99n.currentTouch,C$99s=(C$99n.currentTarget=C$99t._node,!1),C$99o=C$99n.getEventCode(),C$99a=cc.Event.EventTouch;if(C$99o===C$99a.BEGAN){if(!cc.macro.ENABLE_MULTI_TOUCH&&C$99h._currentTouch){var C$99c=C$99h._currentTouchListener._node;if(C$99c&&C$99c.activeInHierarchy)return!1}C$99t.onTouchBegan&&(C$99s=C$99t.onTouchBegan(C$99r,C$99n))&&C$99t._registered&&(C$99t._claimedTouches.push(C$99r),C$99h._currentTouchListener=C$99t,C$99h._currentTouch=C$99r)}else if(0<C$99t._claimedTouches.length&&-1!==(C$99i=C$99t._claimedTouches.indexOf(C$99r))){if(C$99s=!0,!cc.macro.ENABLE_MULTI_TOUCH&&C$99h._currentTouch&&C$99h._currentTouch!==C$99r)return!1;C$99o===C$99a.MOVED&&C$99t.onTouchMoved?C$99t.onTouchMoved(C$99r,C$99n):C$99o===C$99a.ENDED?(C$99t.onTouchEnded&&C$99t.onTouchEnded(C$99r,C$99n),C$99t._registered&&C$99t._claimedTouches.splice(C$99i,1),C$99h._clearCurTouch()):C$99o===C$99a.CANCELED&&(C$99t.onTouchCancelled&&C$99t.onTouchCancelled(C$99r,C$99n),C$99t._registered&&C$99t._claimedTouches.splice(C$99i,1),C$99h._clearCurTouch())}return C$99n.isStopped()?(C$99h._updateTouchListeners(C$99n),!0):!(!C$99s||!C$99t.swallowTouches)&&(C$99e.needsMutableSet&&C$99e.touches.splice(C$99r,1),!0)},_dispatchTouchEvent:function(C$99t){this._sortEventListeners(C$99l.TOUCH_ONE_BY_ONE),this._sortEventListeners(C$99l.TOUCH_ALL_AT_ONCE);var C$99e=this._getListeners(C$99l.TOUCH_ONE_BY_ONE),C$99i=this._getListeners(C$99l.TOUCH_ALL_AT_ONCE);if(null!==C$99e||null!==C$99i){var C$99n=C$99t.getTouches(),C$99r=cc.js.array.copy(C$99n),C$99s={event:C$99t,needsMutableSet:C$99e&&C$99i,touches:C$99r,selTouch:null};if(C$99e)for(var C$99o=0;C$99o<C$99n.length;C$99o++)C$99t.currentTouch=C$99n[C$99o],C$99t._propagationStopped=C$99t._propagationImmediateStopped=!1,this._dispatchEventToListeners(C$99e,this._onTouchEventCallback,C$99s);C$99i&&0<C$99r.length&&(this._dispatchEventToListeners(C$99i,this._onTouchesEventCallback,{event:C$99t,touches:C$99r}),C$99t.isStopped())||this._updateTouchListeners(C$99t)}},_onTouchesEventCallback:function(C$99t,C$99e){if(!C$99t._registered)return!1;var C$99i=cc.Event.EventTouch,C$99n=C$99e.event,C$99e=C$99e.touches,C$99r=C$99n.getEventCode();return C$99n.currentTarget=C$99t._node,C$99r===C$99i.BEGAN&&C$99t.onTouchesBegan?C$99t.onTouchesBegan(C$99e,C$99n):C$99r===C$99i.MOVED&&C$99t.onTouchesMoved?C$99t.onTouchesMoved(C$99e,C$99n):C$99r===C$99i.ENDED&&C$99t.onTouchesEnded?C$99t.onTouchesEnded(C$99e,C$99n):C$99r===C$99i.CANCELED&&C$99t.onTouchesCancelled&&C$99t.onTouchesCancelled(C$99e,C$99n),!!C$99n.isStopped()&&(C$99h._updateTouchListeners(C$99n),!0)},_associateNodeAndEventListener:function(C$99t,C$99e){var C$99i=this._nodeListenersMap[C$99t._id];C$99i||(this._nodeListenersMap[C$99t._id]=C$99i=[]),C$99i.push(C$99e)},_dissociateNodeAndEventListener:function(C$99t,C$99e){var C$99i=this._nodeListenersMap[C$99t._id];C$99i&&(cc.js.array.remove(C$99i,C$99e),0===C$99i.length&&delete this._nodeListenersMap[C$99t._id])},_dispatchEventToListeners:function(C$99t,C$99e,C$99i){var C$99n,C$99r,C$99s=!1,C$99o=C$99t.getFixedPriorityListeners(),C$99a=C$99t.getSceneGraphPriorityListeners(),C$99c=0;if(C$99o&&0!==C$99o.length)for(;C$99c<C$99t.gt0Index;++C$99c)if((C$99r=C$99o[C$99c]).isEnabled()&&!C$99r._isPaused()&&C$99r._isRegistered()&&C$99e(C$99r,C$99i)){C$99s=!0;break}if(C$99a&&!C$99s)for(C$99n=0;C$99n<C$99a.length;C$99n++)if((C$99r=C$99a[C$99n]).isEnabled()&&!C$99r._isPaused()&&C$99r._isRegistered()&&C$99e(C$99r,C$99i)){C$99s=!0;break}if(C$99o&&!C$99s)for(;C$99c<C$99o.length;++C$99c)if((C$99r=C$99o[C$99c]).isEnabled()&&!C$99r._isPaused()&&C$99r._isRegistered()&&C$99e(C$99r,C$99i)){C$99s=!0;break}},_setDirty:function(C$99t,C$99e){var C$99i=this._priorityDirtyFlagMap;null==C$99i[C$99t]?C$99i[C$99t]=C$99e:C$99i[C$99t]=C$99e|C$99i[C$99t]},_sortNumberAsc:function(C$99t,C$99e){return C$99t-C$99e},hasEventListener:function(C$99t){return!!this._getListeners(C$99t)},addListener:function(C$99t,C$99e){if(cc.assertID(C$99t&&C$99e,3503),cc.js.isNumber(C$99e)||C$99e instanceof cc._BaseNode){if(C$99t instanceof cc.EventListener){if(C$99t._isRegistered())return void cc.logID(3505)}else cc.assertID(!cc.js.isNumber(C$99e),3504),C$99t=cc.EventListener.create(C$99t);if(C$99t.checkAvailable()){if(cc.js.isNumber(C$99e)){if(0===C$99e)return void cc.logID(3500);C$99t._setSceneGraphPriority(null),C$99t._setFixedPriority(C$99e),C$99t._setRegistered(!0),C$99t._setPaused(!1),this._addListener(C$99t)}else C$99t._setSceneGraphPriority(C$99e),C$99t._setFixedPriority(0),C$99t._setRegistered(!0),this._addListener(C$99t);return C$99t}}else cc.warnID(3506)},addCustomListener:function(C$99t,C$99e){C$99t=new cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:C$99t,callback:C$99e});return this.addListener(C$99t,1),C$99t},removeListener:function(C$99t){if(null!=C$99t){var C$99e,C$99i=this._listenersMap;for(C$99e in C$99i){var C$99n,C$99r=C$99i[C$99e],C$99s=C$99r.getFixedPriorityListeners(),C$99o=C$99r.getSceneGraphPriorityListeners();if((C$99n=this._removeListenerInVector(C$99o,C$99t))?this._setDirty(C$99t._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY):(C$99n=this._removeListenerInVector(C$99s,C$99t))&&this._setDirty(C$99t._getListenerID(),this.DIRTY_FIXED_PRIORITY),C$99r.empty()&&(delete this._priorityDirtyFlagMap[C$99t._getListenerID()],delete C$99i[C$99e]),C$99n)break}if(!C$99n)for(var C$99a=this._toAddedListeners,C$99c=C$99a.length-1;0<=C$99c;C$99c--){var C$99l=C$99a[C$99c];if(C$99l===C$99t){cc.js.array.removeAt(C$99a,C$99c),C$99l._setRegistered(!1);break}}this._currentTouchListener===C$99t&&this._clearCurTouch()}},_clearCurTouch:function(){this._currentTouchListener=null,this._currentTouch=null},_removeListenerInCallback:function(C$99t,C$99e){if(null==C$99t)return!1;for(var C$99i=C$99t.length-1;0<=C$99i;C$99i--){var C$99n=C$99t[C$99i];if(C$99n._onCustomEvent===C$99e||C$99n._onEvent===C$99e)return C$99n._setRegistered(!1),null!=C$99n._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$99n._getSceneGraphPriority(),C$99n),C$99n._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(C$99t,C$99i):this._toRemovedListeners.push(C$99n),!0}return!1},_removeListenerInVector:function(C$99t,C$99e){if(null==C$99t)return!1;for(var C$99i=C$99t.length-1;0<=C$99i;C$99i--){var C$99n=C$99t[C$99i];if(C$99n===C$99e)return C$99n._setRegistered(!1),null!=C$99n._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(C$99n._getSceneGraphPriority(),C$99n),C$99n._setSceneGraphPriority(null)),0===this._inDispatch?cc.js.array.removeAt(C$99t,C$99i):this._toRemovedListeners.push(C$99n),!0}return!1},removeListeners:function(C$99t,C$99e){if(cc.js.isNumber(C$99t)||C$99t instanceof cc._BaseNode)if(void 0!==C$99t._id){var C$99i,C$99n=this._nodeListenersMap[C$99t._id];if(C$99n){var C$99r=cc.js.array.copy(C$99n);for(C$99i=0;C$99i<C$99r.length;C$99i++)this.removeListener(C$99r[C$99i]);delete this._nodeListenersMap[C$99t._id]}var C$99s=this._toAddedListeners;for(C$99i=0;C$99i<C$99s.length;){var C$99o=C$99s[C$99i];C$99o._getSceneGraphPriority()===C$99t?(C$99o._setSceneGraphPriority(null),C$99o._setRegistered(!1),C$99s.splice(C$99i,1)):++C$99i}if(!0===C$99e){var C$99a,C$99c=C$99t.children;for(C$99i=0,C$99a=C$99c.length;C$99i<C$99a;C$99i++)this.removeListeners(C$99c[C$99i],!0)}}else C$99t===cc.EventListener.TOUCH_ONE_BY_ONE?this._removeListenersForListenerID(C$99l.TOUCH_ONE_BY_ONE):C$99t===cc.EventListener.TOUCH_ALL_AT_ONCE?this._removeListenersForListenerID(C$99l.TOUCH_ALL_AT_ONCE):C$99t===cc.EventListener.MOUSE?this._removeListenersForListenerID(C$99l.MOUSE):C$99t===cc.EventListener.ACCELERATION?this._removeListenersForListenerID(C$99l.ACCELERATION):C$99t===cc.EventListener.KEYBOARD?this._removeListenersForListenerID(C$99l.KEYBOARD):cc.logID(3501);else cc.warnID(3506)},removeCustomListeners:function(C$99t){this._removeListenersForListenerID(C$99t)},removeAllListeners:function(){var C$99t,C$99e=this._listenersMap,C$99i=this._internalCustomListenerIDs;for(C$99t in C$99e)-1===C$99i.indexOf(C$99t)&&this._removeListenersForListenerID(C$99t)},setPriority:function(C$99t,C$99e){if(null!=C$99t){var C$99i,C$99n=this._listenersMap;for(C$99i in C$99n){var C$99r=C$99n[C$99i].getFixedPriorityListeners();if(C$99r)if(-1!==C$99r.indexOf(C$99t))return null!=C$99t._getSceneGraphPriority()&&cc.logID(3502),void(C$99t._getFixedPriority()!==C$99e&&(C$99t._setFixedPriority(C$99e),this._setDirty(C$99t._getListenerID(),this.DIRTY_FIXED_PRIORITY)))}}},setEnabled:function(C$99t){this._isEnabled=C$99t},isEnabled:function(){return this._isEnabled},dispatchEvent:function(C$99t){if(this._isEnabled)if(this._updateDirtyFlagForSceneGraph(),this._inDispatch++,C$99t&&C$99t.getType){if(C$99t.getType().startsWith(cc.Event.TOUCH))return this._dispatchTouchEvent(C$99t),void this._inDispatch--;C$99e=C$99t,C$99i=cc.Event;var C$99e=(C$99e=C$99e.type)===C$99i.ACCELERATION?C$99l.ACCELERATION:C$99e===C$99i.KEYBOARD?C$99l.KEYBOARD:C$99e.startsWith(C$99i.MOUSE)?C$99l.MOUSE:(C$99e.startsWith(C$99i.TOUCH)&&cc.logID(2e3),""),C$99i=(this._sortEventListeners(C$99e),this._listenersMap[C$99e]);null!=C$99i&&(this._dispatchEventToListeners(C$99i,this._onListenerCallback,C$99t),this._onUpdateListeners(C$99i)),this._inDispatch--}else cc.errorID(3511)},_onListenerCallback:function(C$99t,C$99e){return C$99e.currentTarget=C$99t._target,C$99t._onEvent(C$99e),C$99e.isStopped()},dispatchCustomEvent:function(C$99t,C$99e){C$99t=new cc.Event.EventCustom(C$99t);C$99t.setUserData(C$99e),this.dispatchEvent(C$99t)}};C$99r.get(cc,"eventManager",function(){return cc.errorID(1405,"cc.eventManager","cc.EventTarget or cc.systemEvent"),C$99h}),C$99e.exports=cc.internal.eventManager=C$99h},{"../platform/js":209,"./CCEventListener":110}],112:[function(C$99t,C$99e,C$99i){"use strict";cc.Touch=function(C$99t,C$99e,C$99i){this._lastModified=0,this.setTouchInfo(C$99i,C$99t,C$99e)},cc.Touch.prototype={constructor:cc.Touch,getLocation:function(){return cc.v2(this._point.x,this._point.y)},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return cc.v2(this._prevPoint.x,this._prevPoint.y)},getStartLocation:function(){return cc.v2(this._startPoint.x,this._startPoint.y)},getDelta:function(){return this._point.sub(this._prevPoint)},getLocationInView:function(){return cc.v2(this._point.x,cc.view._designResolutionSize.height-this._point.y)},getPreviousLocationInView:function(){return cc.v2(this._prevPoint.x,cc.view._designResolutionSize.height-this._prevPoint.y)},getStartLocationInView:function(){return cc.v2(this._startPoint.x,cc.view._designResolutionSize.height-this._startPoint.y)},getID:function(){return this._id},setTouchInfo:function(C$99t,C$99e,C$99i){this._prevPoint=this._point,this._point=cc.v2(C$99e||0,C$99i||0),this._id=C$99t,this._startPointCaptured||(this._startPoint=cc.v2(this._point),cc.view._convertPointWithScale(this._startPoint),this._startPointCaptured=!0)},_setPoint:function(C$99t,C$99e){void 0===C$99e?(this._point.x=C$99t.x,this._point.y=C$99t.y):(this._point.x=C$99t,this._point.y=C$99e)},_setPrevPoint:function(C$99t,C$99e){this._prevPoint=void 0===C$99e?cc.v2(C$99t.x,C$99t.y):cc.v2(C$99t||0,C$99e||0)}}},{}],113:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCEvent"),C$99t("./CCTouch"),C$99t("./CCEventListener");C$99t=C$99t("./CCEventManager");C$99e.exports=C$99t},{"./CCEvent":109,"./CCEventListener":110,"./CCEventManager":111,"./CCTouch":112}],114:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.js,C$99r=C$99t("../platform/callbacks-invoker");function C$99s(){C$99r.call(this)}C$99n.extend(C$99s,C$99r),C$99s.prototype.emit=function(C$99t,C$99e){var C$99i=C$99t.type,C$99i=this._callbackTable[C$99i];if(C$99i){for(var C$99n=!C$99i.isInvoking,C$99r=(C$99i.isInvoking=!0,C$99i.callbackInfos),C$99s=0,C$99o=C$99r.length;C$99s<C$99o;++C$99s){var C$99a=C$99r[C$99s];if(C$99a&&C$99a.callback&&(C$99a.callback.call(C$99a.target,C$99t,C$99e),C$99t._propagationImmediateStopped))break}C$99n&&(C$99i.isInvoking=!1,C$99i.containCanceled&&C$99i.purgeCanceled())}},C$99e.exports=C$99s},{"../platform/callbacks-invoker":202}],115:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../platform/js"),C$99r=C$99t("../platform/callbacks-invoker"),C$99o=C$99n.array.fastRemove;function C$99s(){C$99r.call(this)}C$99n.extend(C$99s,C$99r);C$99t=C$99s.prototype;C$99t.__on=C$99t.on,C$99t.on=function(C$99t,C$99e,C$99i,C$99n){if(C$99e)return this.hasEventListener(C$99t,C$99e,C$99i)||(this.__on(C$99t,C$99e,C$99i,C$99n),C$99i&&C$99i.__eventTargets&&C$99i.__eventTargets.push(this)),C$99e;cc.errorID(6800)},C$99t.__off=C$99t.off,C$99t.off=function(C$99t,C$99e,C$99i){if(C$99e)this.__off(C$99t,C$99e,C$99i),C$99i&&C$99i.__eventTargets&&C$99o(C$99i.__eventTargets,this);else{C$99e=this._callbackTable[C$99t];if(C$99e){for(var C$99n=C$99e.callbackInfos,C$99r=0;C$99r<C$99n.length;++C$99r){var C$99s=C$99n[C$99r]&&C$99n[C$99r].target;C$99s&&C$99s.__eventTargets&&C$99o(C$99s.__eventTargets,this)}this.removeAll(C$99t)}}},C$99t.targetOff=function(C$99t){this.removeAll(C$99t),C$99t&&C$99t.__eventTargets&&C$99o(C$99t.__eventTargets,this)},C$99t.once=function(C$99t,C$99e,C$99i){this.on(C$99t,C$99e,C$99i,!0)},C$99t.dispatchEvent=function(C$99t){this.emit(C$99t.type,C$99t)},cc.EventTarget=C$99e.exports=C$99s},{"../platform/callbacks-invoker":202,"../platform/js":209}],116:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e){cc.Event.call(this,C$99t,C$99e),this.detail=null}var C$99t=C$99t("../platform/js"),C$99r=(cc.Event=function(C$99t,C$99e){this.type=C$99t,this.bubbles=!!C$99e,this.target=null,this.currentTarget=null,this.eventPhase=0,this._propagationStopped=!1,this._propagationImmediateStopped=!1},cc.Event.prototype={constructor:cc.Event,unuse:function(){this.type=cc.Event.NO_TYPE,this.target=null,this.currentTarget=null,this.eventPhase=cc.Event.NONE,this._propagationStopped=!1,this._propagationImmediateStopped=!1},reuse:function(C$99t,C$99e){this.type=C$99t,this.bubbles=C$99e||!1},stopPropagation:function(){this._propagationStopped=!0},stopPropagationImmediate:function(){this._propagationImmediateStopped=!0},isStopped:function(){return this._propagationStopped||this._propagationImmediateStopped},getCurrentTarget:function(){return this.currentTarget},getType:function(){return this.type}},cc.Event.NO_TYPE="no_type",cc.Event.TOUCH="touch",cc.Event.MOUSE="mouse",cc.Event.KEYBOARD="keyboard",cc.Event.ACCELERATION="acceleration",cc.Event.NONE=0,cc.Event.CAPTURING_PHASE=1,cc.Event.AT_TARGET=2,cc.Event.BUBBLING_PHASE=3,C$99t.extend(C$99n,cc.Event),(C$99n.prototype.reset=C$99n).prototype.setUserData=function(C$99t){this.detail=C$99t},C$99n.prototype.getUserData=function(){return this.detail},C$99n.prototype.getEventName=cc.Event.prototype.getType,new C$99t.Pool(10));C$99n.put=function(C$99t){C$99r.put(C$99t)},C$99n.get=function(C$99t,C$99e){var C$99i=C$99r._get();return C$99i?C$99i.reset(C$99t,C$99e):C$99i=new C$99n(C$99t,C$99e),C$99i},cc.Event.EventCustom=C$99n,C$99e.exports=cc.Event},{"../platform/js":209}],117:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./event"),C$99t("./event-listeners"),C$99t("./event-target"),C$99t("./system-event")},{"./event":116,"./event-listeners":114,"./event-target":115,"./system-event":118}],118:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../event/event-target"),C$99r=C$99t("../event-manager"),C$99s=C$99t("../platform/CCInputManager"),C$99o=cc.Enum({KEY_DOWN:"keydown",KEY_UP:"keyup",DEVICEMOTION:"devicemotion"}),C$99a=null,C$99c=null,C$99t=cc.Class({name:"SystemEvent",extends:C$99n,statics:{EventType:C$99o},setAccelerometerEnabled:function(C$99t){C$99t&&window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then(function(C$99t){console.log("Device Motion Event request permission: "+C$99t),C$99s.setAccelerometerEnabled("granted"===C$99t)}):C$99s.setAccelerometerEnabled(C$99t)},setAccelerometerInterval:function(C$99t){C$99s.setAccelerometerInterval(C$99t)},on:function(C$99t,C$99e,C$99i,C$99n){this._super(C$99t,C$99e,C$99i,C$99n),C$99t!==C$99o.KEY_DOWN&&C$99t!==C$99o.KEY_UP||(C$99a=C$99a||cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyPressed:function(C$99t,C$99e){C$99e.type=C$99o.KEY_DOWN,cc.systemEvent.dispatchEvent(C$99e)},onKeyReleased:function(C$99t,C$99e){C$99e.type=C$99o.KEY_UP,cc.systemEvent.dispatchEvent(C$99e)}}),C$99r.hasEventListener(cc.EventListener.ListenerID.KEYBOARD)||C$99r.addListener(C$99a,1)),C$99t===C$99o.DEVICEMOTION&&(C$99c=C$99c||cc.EventListener.create({event:cc.EventListener.ACCELERATION,callback:function(C$99t,C$99e){C$99e.type=C$99o.DEVICEMOTION,cc.systemEvent.dispatchEvent(C$99e)}}),C$99r.hasEventListener(cc.EventListener.ListenerID.ACCELERATION)||C$99r.addListener(C$99c,1))},off:function(C$99t,C$99e,C$99i){this._super(C$99t,C$99e,C$99i),!C$99a||C$99t!==C$99o.KEY_DOWN&&C$99t!==C$99o.KEY_UP||(C$99e=this.hasEventListener(C$99o.KEY_DOWN),C$99i=this.hasEventListener(C$99o.KEY_UP),C$99e||C$99i||C$99r.removeListener(C$99a)),C$99c&&C$99t===C$99o.DEVICEMOTION&&C$99r.removeListener(C$99c)}});cc.SystemEvent=C$99e.exports=C$99t,cc.systemEvent=new cc.SystemEvent},{"../event-manager":113,"../event/event-target":115,"../platform/CCInputManager":193}],119:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99a=C$99r(C$99t("../value-types/vec3")),C$99n=C$99r(C$99t("../value-types/mat3")),C$99o=C$99r(C$99t("./enums"));function C$99r(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}var C$99s=new C$99a.default,C$99h=new C$99a.default,C$99c=new C$99n.default;function C$99l(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=C$99o.default.SHAPE_AABB,this.center=new C$99a.default(C$99t,C$99e,C$99i),this.halfExtents=new C$99a.default(C$99n,C$99r,C$99s)}C$99l.create=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){return new C$99l(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s)},C$99l.clone=function(C$99t){return new C$99l(C$99t.center.x,C$99t.center.y,C$99t.center.z,C$99t.halfExtents.x,C$99t.halfExtents.y,C$99t.halfExtents.z)},C$99l.copy=function(C$99t,C$99e){return C$99a.default.copy(C$99t.center,C$99e.center),C$99a.default.copy(C$99t.halfExtents,C$99e.halfExtents),C$99t},C$99l.fromPoints=function(C$99t,C$99e,C$99i){return C$99a.default.scale(C$99t.center,C$99a.default.add(C$99s,C$99e,C$99i),.5),C$99a.default.scale(C$99t.halfExtents,C$99a.default.sub(C$99h,C$99i,C$99e),.5),C$99t},C$99l.set=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){return C$99a.default.set(C$99t.center,C$99e,C$99i,C$99n),C$99a.default.set(C$99t.halfExtents,C$99r,C$99s,C$99o),C$99t},(C$99t=C$99l.prototype).getBoundary=function(C$99t,C$99e){C$99a.default.sub(C$99t,this.center,this.halfExtents),C$99a.default.add(C$99e,this.center,this.halfExtents)},C$99t.transform=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s,C$99o;C$99a.default.transformMat4((C$99r=C$99r||this).center,this.center,C$99t),C$99r=C$99r.halfExtents,C$99s=this.halfExtents,C$99t=C$99t,C$99o=C$99c.m,C$99t=C$99t.m,C$99o[0]=Math.abs(C$99t[0]),C$99o[1]=Math.abs(C$99t[1]),C$99o[2]=Math.abs(C$99t[2]),C$99o[3]=Math.abs(C$99t[4]),C$99o[4]=Math.abs(C$99t[5]),C$99o[5]=Math.abs(C$99t[6]),C$99o[6]=Math.abs(C$99t[8]),C$99o[7]=Math.abs(C$99t[9]),C$99o[8]=Math.abs(C$99t[10]),C$99a.default.transformMat3(C$99r,C$99s,C$99c)},C$99i.default=C$99l,C$99e.exports=C$99i.default},{"../value-types/mat3":280,"../value-types/vec3":289,"./enums":121}],120:[function(C$99e,C$99i,C$99t){"use strict";C$99t.__esModule=!0,C$99t.point_plane=C$99s,C$99t.pt_point_plane=function(C$99t,C$99e,C$99i){var C$99n=C$99s(C$99e,C$99i);return C$99o.Vec3.subtract(C$99t,C$99e,C$99o.Vec3.multiplyScalar(C$99t,C$99i.n,C$99n))},C$99t.pt_point_aabb=function(C$99t,C$99e,C$99i){return C$99o.Vec3.copy(C$99t,C$99e),C$99o.Vec3.subtract(C$99n,C$99i.center,C$99i.halfExtents),C$99o.Vec3.add(C$99r,C$99i.center,C$99i.halfExtents),C$99t.x=(C$99t.x<C$99n.x?C$99n:C$99t).x,C$99t.y=(C$99t.y<C$99n.x?C$99n:C$99t).y,C$99t.z=(C$99t.z<C$99n.x?C$99n:C$99t).z,C$99t.x=(C$99t.x>C$99r.x?C$99r:C$99t).x,C$99t.y=(C$99t.y>C$99r.x?C$99r:C$99t).y,C$99t.z=(C$99t.z>C$99r.x?C$99r:C$99t).z,C$99t},C$99t.pt_point_obb=function(C$99t,C$99e,C$99i){var C$99n=C$99i.orientation.m;C$99o.Vec3.set(C$99a,C$99n[0],C$99n[1],C$99n[2]),C$99o.Vec3.set(C$99c,C$99n[3],C$99n[4],C$99n[5]),C$99o.Vec3.set(C$99l,C$99n[6],C$99n[7],C$99n[8]),C$99u[0]=C$99a,C$99u[1]=C$99c,C$99u[2]=C$99l,C$99_[0]=C$99i.halfExtents.x,C$99_[1]=C$99i.halfExtents.y,C$99_[2]=C$99i.halfExtents.z,C$99o.Vec3.subtract(C$99h,C$99e,C$99i.center),C$99o.Vec3.set(C$99t,C$99i.center.x,C$99i.center.y,C$99i.center.z);for(var C$99r=0;C$99r<3;C$99r++){var C$99s=C$99o.Vec3.dot(C$99h,C$99u[C$99r]);(C$99s=C$99s>C$99_[C$99r]?C$99_[C$99r]:C$99s)<-C$99_[C$99r]&&(C$99s=-C$99_[C$99r]),C$99t.x+=C$99s*C$99u[C$99r].x,C$99t.y+=C$99s*C$99u[C$99r].y,C$99t.z+=C$99s*C$99u[C$99r].z}return C$99t};var C$99o=C$99e("../value-types"),C$99a=new C$99o.Vec3,C$99c=new C$99o.Vec3,C$99l=new C$99o.Vec3,C$99h=new C$99o.Vec3,C$99n=new C$99o.Vec3,C$99r=new C$99o.Vec3,C$99u=new Array(3),C$99_=new Array(3);function C$99s(C$99t,C$99e){return C$99o.Vec3.dot(C$99e.n,C$99t)-C$99e.d}},{"../value-types":279}],121:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99i.default={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256},C$99e.exports=C$99i.default},{}],122:[function(C$99t,C$99s,C$99e){"use strict";C$99e.__esModule=!0,C$99e.frustum=void 0;var C$99o=C$99t("../value-types"),C$99a=C$99i(C$99t("./enums")),C$99c=C$99i(C$99t("./plane"));function C$99i(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99u(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}var C$99_,C$99n,C$99l,C$99h=new Array(8),C$99t=(C$99h[0]=new C$99o.Vec3(1,1,1),C$99h[1]=new C$99o.Vec3(-1,1,1),C$99h[2]=new C$99o.Vec3(-1,-1,1),C$99h[3]=new C$99o.Vec3(1,-1,1),C$99h[4]=new C$99o.Vec3(1,1,-1),C$99h[5]=new C$99o.Vec3(-1,1,-1),C$99h[6]=new C$99o.Vec3(-1,-1,-1),C$99h[7]=new C$99o.Vec3(1,-1,-1),C$99r.create=function(){return new C$99r},C$99r.clone=function(C$99t){return C$99r.copy(new C$99r,C$99t)},C$99r.copy=function(C$99t,C$99e){C$99t._type=C$99e._type;for(var C$99i=0;C$99i<6;++C$99i)C$99c.default.copy(C$99t.planes[C$99i],C$99e.planes[C$99i]);for(var C$99n=0;C$99n<8;++C$99n)C$99o.Vec3.copy(C$99t.vertices[C$99n],C$99e.vertices[C$99n]);return C$99t},C$99t=C$99r,(C$99n=[{key:"accurate",set:function(C$99t){this._type=C$99t?C$99a.default.SHAPE_FRUSTUM_ACCURATE:C$99a.default.SHAPE_FRUSTUM}}])&&C$99u(C$99t.prototype,C$99n),C$99_&&C$99u(C$99t,C$99_),(C$99n=C$99r.prototype).update=function(C$99t,C$99e){C$99t=C$99t.m;if(C$99o.Vec3.set(this.planes[0].n,C$99t[3]+C$99t[0],C$99t[7]+C$99t[4],C$99t[11]+C$99t[8]),this.planes[0].d=-(C$99t[15]+C$99t[12]),C$99o.Vec3.set(this.planes[1].n,C$99t[3]-C$99t[0],C$99t[7]-C$99t[4],C$99t[11]-C$99t[8]),this.planes[1].d=-(C$99t[15]-C$99t[12]),C$99o.Vec3.set(this.planes[2].n,C$99t[3]+C$99t[1],C$99t[7]+C$99t[5],C$99t[11]+C$99t[9]),this.planes[2].d=-(C$99t[15]+C$99t[13]),C$99o.Vec3.set(this.planes[3].n,C$99t[3]-C$99t[1],C$99t[7]-C$99t[5],C$99t[11]-C$99t[9]),this.planes[3].d=-(C$99t[15]-C$99t[13]),C$99o.Vec3.set(this.planes[4].n,C$99t[3]+C$99t[2],C$99t[7]+C$99t[6],C$99t[11]+C$99t[10]),this.planes[4].d=-(C$99t[15]+C$99t[14]),C$99o.Vec3.set(this.planes[5].n,C$99t[3]-C$99t[2],C$99t[7]-C$99t[6],C$99t[11]-C$99t[10]),this.planes[5].d=-(C$99t[15]-C$99t[14]),this._type===C$99a.default.SHAPE_FRUSTUM_ACCURATE){for(var C$99i=0;C$99i<6;C$99i++){var C$99n=this.planes[C$99i],C$99r=1/C$99n.n.length();C$99o.Vec3.multiplyScalar(C$99n.n,C$99n.n,C$99r),C$99n.d*=C$99r}for(var C$99s=0;C$99s<8;C$99s++)C$99o.Vec3.transformMat4(this.vertices[C$99s],C$99h[C$99s],C$99e)}},C$99n.transform=function(C$99t){if(this._type===C$99a.default.SHAPE_FRUSTUM_ACCURATE){for(var C$99e=0;C$99e<8;C$99e++)C$99o.Vec3.transformMat4(this.vertices[C$99e],this.vertices[C$99e],C$99t);C$99c.default.fromPoints(this.planes[0],this.vertices[1],this.vertices[5],this.vertices[6]),C$99c.default.fromPoints(this.planes[1],this.vertices[3],this.vertices[7],this.vertices[4]),C$99c.default.fromPoints(this.planes[2],this.vertices[6],this.vertices[7],this.vertices[3]),C$99c.default.fromPoints(this.planes[3],this.vertices[0],this.vertices[4],this.vertices[5]),C$99c.default.fromPoints(this.planes[4],this.vertices[2],this.vertices[3],this.vertices[0]),C$99c.default.fromPoints(this.planes[0],this.vertices[7],this.vertices[6],this.vertices[5])}},C$99r);function C$99r(){this.planes=void 0,this.vertices=void 0,this._type=void 0,this._type=C$99a.default.SHAPE_FRUSTUM,this.planes=new Array(6);for(var C$99t=0;C$99t<6;++C$99t)this.planes[C$99t]=C$99c.default.create(0,0,0,0);this.vertices=new Array(8);for(var C$99e=0;C$99e<8;++C$99e)this.vertices[C$99e]=new C$99o.Vec3}(C$99e.frustum=C$99t).createOrtho=(C$99l=new C$99o.Vec3,function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){C$99e/=2,C$99i/=2;C$99o.Vec3.set(C$99l,C$99e,C$99i,C$99n),C$99o.Vec3.transformMat4(C$99t.vertices[0],C$99l,C$99s),C$99o.Vec3.set(C$99l,-C$99e,C$99i,C$99n),C$99o.Vec3.transformMat4(C$99t.vertices[1],C$99l,C$99s),C$99o.Vec3.set(C$99l,-C$99e,-C$99i,C$99n),C$99o.Vec3.transformMat4(C$99t.vertices[2],C$99l,C$99s),C$99o.Vec3.set(C$99l,C$99e,-C$99i,C$99n),C$99o.Vec3.transformMat4(C$99t.vertices[3],C$99l,C$99s),C$99o.Vec3.set(C$99l,C$99e,C$99i,C$99r),C$99o.Vec3.transformMat4(C$99t.vertices[4],C$99l,C$99s),C$99o.Vec3.set(C$99l,-C$99e,C$99i,C$99r),C$99o.Vec3.transformMat4(C$99t.vertices[5],C$99l,C$99s),C$99o.Vec3.set(C$99l,-C$99e,-C$99i,C$99r),C$99o.Vec3.transformMat4(C$99t.vertices[6],C$99l,C$99s),C$99o.Vec3.set(C$99l,C$99e,-C$99i,C$99r),C$99o.Vec3.transformMat4(C$99t.vertices[7],C$99l,C$99s),C$99c.default.fromPoints(C$99t.planes[0],C$99t.vertices[1],C$99t.vertices[6],C$99t.vertices[5]),C$99c.default.fromPoints(C$99t.planes[1],C$99t.vertices[3],C$99t.vertices[4],C$99t.vertices[7]),C$99c.default.fromPoints(C$99t.planes[2],C$99t.vertices[6],C$99t.vertices[3],C$99t.vertices[7]),C$99c.default.fromPoints(C$99t.planes[3],C$99t.vertices[0],C$99t.vertices[5],C$99t.vertices[4]),C$99c.default.fromPoints(C$99t.planes[4],C$99t.vertices[2],C$99t.vertices[0],C$99t.vertices[3]),C$99c.default.fromPoints(C$99t.planes[0],C$99t.vertices[7],C$99t.vertices[5],C$99t.vertices[6])})},{"../value-types":279,"./enums":121,"./plane":127}],123:[function(C$99t,C$99e,C$99i){"use strict";var C$99n={enums:C$99i.__esModule=!0,Triangle:!0,Aabb:!0,Ray:!0,intersect:!0,Sphere:!0,Obb:!0,Frustum:!0,Line:!0,Plane:!0},C$99r=(C$99i.Plane=C$99i.Line=C$99i.Frustum=C$99i.Obb=C$99i.Sphere=C$99i.intersect=C$99i.Ray=C$99i.Aabb=C$99i.Triangle=C$99i.enums=void 0,C$99o(C$99t("./enums"))),C$99r=(C$99i.enums=C$99r.default,C$99o(C$99t("./triangle"))),C$99r=(C$99i.Triangle=C$99r.default,C$99o(C$99t("./aabb"))),C$99r=(C$99i.Aabb=C$99r.default,C$99o(C$99t("./ray"))),C$99r=(C$99i.Ray=C$99r.default,C$99o(C$99t("./intersect"))),C$99r=(C$99i.intersect=C$99r.default,C$99o(C$99t("./sphere"))),C$99r=(C$99i.Sphere=C$99r.default,C$99o(C$99t("./obb"))),C$99r=(C$99i.Obb=C$99r.default,C$99o(C$99t("./frustum"))),C$99r=(C$99i.Frustum=C$99r.default,C$99o(C$99t("./line"))),C$99r=(C$99i.Line=C$99r.default,C$99o(C$99t("./plane"))),C$99s=(C$99i.Plane=C$99r.default,C$99t("./distance"));function C$99o(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}Object.keys(C$99s).forEach(function(C$99t){"default"!==C$99t&&"__esModule"!==C$99t&&(Object.prototype.hasOwnProperty.call(C$99n,C$99t)||(C$99i[C$99t]=C$99s[C$99t]))}),cc.geomUtils=C$99e.exports},{"./aabb":119,"./distance":120,"./enums":121,"./frustum":122,"./intersect":124,"./line":125,"./obb":126,"./plane":127,"./ray":128,"./sphere":129,"./triangle":130}],124:[function(C$99t,C$99l,C$99h){"use strict";C$99h.__esModule=!0,C$99h.default=void 0;var C$99u,C$99_,C$99d=C$99n(C$99t("../../renderer/gfx")),C$99e=C$99n(C$99t("../../renderer/memop/recycle-pool")),C$99p=C$99t("../value-types"),C$99f=C$99n(C$99t("./aabb")),C$99m=function(C$99t){if(C$99t&&C$99t.__esModule)return C$99t;if(null===C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t)return{default:C$99t};var C$99e=C$99g();if(C$99e&&C$99e.has(C$99t))return C$99e.get(C$99t);var C$99i,C$99n={},C$99r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C$99i in C$99t){var C$99s;Object.prototype.hasOwnProperty.call(C$99t,C$99i)&&((C$99s=C$99r?Object.getOwnPropertyDescriptor(C$99t,C$99i):null)&&(C$99s.get||C$99s.set)?Object.defineProperty(C$99n,C$99i,C$99s):C$99n[C$99i]=C$99t[C$99i])}return C$99n.default=C$99t,C$99e&&C$99e.set(C$99t,C$99n),C$99n}(C$99t("./distance")),C$99i=C$99n(C$99t("./enums")),C$99y=C$99n(C$99t("./ray")),C$99t=C$99n(C$99t("./triangle"));function C$99g(){if("function"!=typeof WeakMap)return null;var C$99t=new WeakMap;return C$99g=function(){return C$99t},C$99t}function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99v(C$99t,C$99e,C$99i,C$99n){C$99p.Vec3.set(C$99t,C$99e[C$99i*C$99n],C$99e[C$99i*C$99n+1],C$99e[C$99i*C$99n+2])}C$99u=C$99t.default.create(),C$99_=1/0;function C$99x(C$99t,C$99e){C$99_=1/0;for(var C$99i=C$99e._subMeshes,C$99n=0;C$99n<C$99i.length;C$99n++)if(C$99i[C$99n]._primitiveType===C$99d.default.PT_TRIANGLES)for(var C$99r=C$99e._subDatas[C$99n]||C$99e._subDatas[0],C$99s=C$99e._getAttrMeshData(C$99n,C$99d.default.ATTR_POSITION),C$99o=C$99r.getIData(Uint16Array),C$99a=C$99r.vfm.element(C$99d.default.ATTR_POSITION).num,C$99c=0;C$99c<C$99o.length;C$99c+=3){C$99v(C$99u.a,C$99s,C$99o[C$99c],C$99a),C$99v(C$99u.b,C$99s,C$99o[C$99c+1],C$99a),C$99v(C$99u.c,C$99s,C$99o[C$99c+2],C$99a);var C$99l=C$99xt(C$99t,C$99u);0<C$99l&&C$99l<C$99_&&(C$99_=C$99l)}return C$99_}var C$99b,C$99A,C$99C,C$99S,C$99T,C$99o,C$99w,C$99E,C$99M;function C$99I(C$99t,C$99e){return C$99t.distance-C$99e.distance}function C$99B(C$99t,C$99e,C$99i){var C$99i=C$99i.m,C$99n=C$99e.x,C$99r=C$99e.y,C$99e=C$99e.z,C$99s=(C$99s=C$99i[3]*C$99n+C$99i[7]*C$99r+C$99i[11]*C$99e)?1/C$99s:1;return C$99t.x=(C$99i[0]*C$99n+C$99i[4]*C$99r+C$99i[8]*C$99e)*C$99s,C$99t.y=(C$99i[1]*C$99n+C$99i[5]*C$99r+C$99i[9]*C$99e)*C$99s,C$99t.z=(C$99i[2]*C$99n+C$99i[6]*C$99r+C$99i[10]*C$99e)*C$99s,C$99t}function C$99R(C$99t){return 0<C$99t&&C$99t<1/0}C$99b=new C$99e.default(function(){return{distance:0,node:null}},1),C$99A=[],C$99C=C$99f.default.create(),C$99S=new C$99p.Vec3,C$99T=new C$99p.Vec3,C$99o=new C$99y.default,C$99w=cc.mat4(),C$99E=cc.mat4(),C$99M=new C$99p.Vec3;function C$99P(C$99t,C$99n,C$99r,C$99s){return C$99b.reset(),C$99A.length=0,function C$99t(C$99e,C$99i){for(var C$99n=C$99e.children,C$99r=C$99n.length-1;0<=C$99r;C$99r--)C$99t(C$99n[C$99r],C$99i);C$99i(C$99e)}(C$99t=C$99t||cc.director.getScene(),function(C$99t){var C$99e,C$99i;C$99s&&!C$99s(C$99t)||(C$99p.Mat4.invert(C$99E,C$99t.getWorldMatrix(C$99w)),C$99p.Vec3.transformMat4(C$99o.o,C$99n.o,C$99E),C$99p.Vec3.normalize(C$99o.d,C$99B(C$99o.d,C$99n.d,C$99E)),C$99e=1/0,(C$99i=C$99t._renderComponent)instanceof cc.MeshRenderer?C$99e=C$99bt(C$99o,C$99i._boundingBox):C$99t.width&&C$99t.height&&(C$99p.Vec3.set(C$99S,-C$99t.width*C$99t.anchorX,-C$99t.height*C$99t.anchorY,C$99t.z),C$99p.Vec3.set(C$99T,C$99t.width*(1-C$99t.anchorX),C$99t.height*(1-C$99t.anchorY),C$99t.z),C$99f.default.fromPoints(C$99C,C$99S,C$99T),C$99e=C$99bt(C$99o,C$99C)),C$99R(C$99e)&&C$99R(C$99e=C$99r?C$99r(C$99o,C$99t,C$99e):C$99e)&&(C$99p.Vec3.scale(C$99M,C$99o.d,C$99e),C$99B(C$99M,C$99M,C$99w),(C$99i=C$99b.add()).node=C$99t,C$99i.distance=C$99p.Vec3.mag(C$99M),C$99A.push(C$99i)))}),C$99A.sort(C$99I),C$99A}function C$99D(C$99t,C$99e){var C$99i=C$99p.Vec3.dot(C$99t.d,C$99e.n);return Math.abs(C$99i)<Number.EPSILON?0:(C$99p.Vec3.multiplyScalar(C$99G,C$99e.n,C$99e.d),(C$99t=C$99p.Vec3.dot(C$99p.Vec3.subtract(C$99G,C$99G,C$99t.o),C$99e.n)/C$99i)<0?0:C$99t)}function C$99L(C$99t,C$99e){return C$99p.Vec3.subtract(C$99z,C$99t.e,C$99t.s),(C$99t=(C$99e.d-C$99p.Vec3.dot(C$99t.s,C$99e.n))/C$99p.Vec3.dot(C$99z,C$99e.n))<0||1<C$99t?0:C$99t}C$99G=new C$99p.Vec3(0,0,0),C$99z=new C$99p.Vec3(0,0,0);function C$99V(C$99t,C$99e,C$99i){C$99p.Vec3.subtract(C$99Y,C$99e.b,C$99e.a),C$99p.Vec3.subtract(C$99q,C$99e.c,C$99e.a),C$99p.Vec3.subtract(C$99J,C$99t.s,C$99t.e),C$99p.Vec3.cross(C$99K,C$99Y,C$99q);var C$99n=C$99p.Vec3.dot(C$99J,C$99K);if(C$99n<=0)return 0;if(C$99p.Vec3.subtract(C$99Z,C$99t.s,C$99e.a),(C$99t=C$99p.Vec3.dot(C$99Z,C$99K))<0||C$99n<C$99t)return 0;if(C$99p.Vec3.cross(C$99Q,C$99J,C$99Z),(C$99t=C$99p.Vec3.dot(C$99q,C$99Q))<0||C$99n<C$99t)return 0;var C$99r=-C$99p.Vec3.dot(C$99Y,C$99Q);return C$99r<0||C$99n<C$99t+C$99r?0:(C$99i&&(C$99n=1-(C$99t*=C$99n=1/C$99n)-(C$99r*=C$99n),C$99p.Vec3.set(C$99i,C$99e.a.x*C$99n+C$99e.b.x*C$99t+C$99e.c.x*C$99r,C$99e.a.y*C$99n+C$99e.b.y*C$99t+C$99e.c.y*C$99r,C$99e.a.z*C$99n+C$99e.b.z*C$99t+C$99e.c.z*C$99r)),1)}function C$99O(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){if(C$99p.Vec3.subtract(C$99$,C$99e,C$99t),C$99p.Vec3.subtract(C$99tt,C$99i,C$99t),C$99p.Vec3.subtract(C$99et,C$99n,C$99t),C$99p.Vec3.subtract(C$99it,C$99r,C$99t),C$99p.Vec3.cross(C$99rt,C$99it,C$99$),0<=(C$99e=C$99p.Vec3.dot(C$99tt,C$99rt))){var C$99a=-C$99p.Vec3.dot(C$99et,C$99rt);if(C$99a<0)return 0;var C$99c=C$99p.Vec3.dot(C$99p.Vec3.cross(C$99st,C$99$,C$99et),C$99tt);if(C$99c<0)return 0;C$99o&&C$99p.Vec3.set(C$99o,C$99i.x*(C$99a*=C$99l=1/(C$99a+C$99e+C$99c))+C$99n.x*(C$99e*=C$99l)+C$99r.x*(C$99c*=C$99l),C$99i.y*C$99a+C$99n.y*C$99e+C$99r.y*C$99c,C$99i.z*C$99a+C$99n.z*C$99e+C$99r.z*C$99c)}else{C$99p.Vec3.subtract(C$99nt,C$99s,C$99t);var C$99l=C$99p.Vec3.dot(C$99nt,C$99rt);if(C$99l<0)return 0;C$99a=C$99p.Vec3.dot(C$99p.Vec3.cross(C$99st,C$99$,C$99tt),C$99nt);if(C$99a<0)return 0;C$99o&&(C$99n=1/(C$99l+(C$99e=-C$99e)+C$99a),C$99p.Vec3.set(C$99o,C$99i.x*(C$99l*=C$99n)+C$99s.x*(C$99e*=C$99n)+C$99r.x*(C$99a*=C$99n),C$99i.y*C$99l+C$99s.y*C$99e+C$99r.y*C$99a,C$99i.z*C$99l+C$99s.z*C$99e+C$99r.z*C$99a))}return 1}function C$99F(C$99t,C$99e){var C$99i=C$99e.radius,C$99e=C$99e.center,C$99n=C$99t.o,C$99t=C$99t.d,C$99i=C$99i*C$99i,C$99e=(C$99p.Vec3.subtract(C$99ot,C$99e,C$99n),C$99ot.lengthSqr()),C$99n=C$99p.Vec3.dot(C$99ot,C$99t);return(C$99t=C$99i-(C$99e-C$99n*C$99n))<0?0:(C$99t=Math.sqrt(C$99t),(C$99e=C$99e<C$99i?C$99n+C$99t:C$99n-C$99t)<0?0:C$99e)}function C$99N(C$99t,C$99e){C$99r[0]=C$99e.halfExtents.x,C$99r[1]=C$99e.halfExtents.y,C$99r[2]=C$99e.halfExtents.z,C$99lt=C$99e.center,C$99ht=C$99t.o,C$99ut=C$99t.d,C$99t=C$99e.orientation.m,C$99p.Vec3.set(C$99_t,C$99t[0],C$99t[1],C$99t[2]),C$99p.Vec3.set(C$99dt,C$99t[3],C$99t[4],C$99t[5]),C$99p.Vec3.set(C$99ft,C$99t[6],C$99t[7],C$99t[8]),C$99p.Vec3.subtract(C$99pt,C$99lt,C$99ht),C$99s[0]=C$99p.Vec3.dot(C$99_t,C$99ut),C$99s[1]=C$99p.Vec3.dot(C$99dt,C$99ut),C$99s[2]=C$99p.Vec3.dot(C$99ft,C$99ut),C$99a[0]=C$99p.Vec3.dot(C$99_t,C$99pt),C$99a[1]=C$99p.Vec3.dot(C$99dt,C$99pt),C$99a[2]=C$99p.Vec3.dot(C$99ft,C$99pt);for(var C$99i=0;C$99i<3;++C$99i){if(0===C$99s[C$99i]){if(0<-C$99a[C$99i]-C$99r[C$99i]||-C$99a[C$99i]+C$99r[C$99i]<0)return 0;C$99s[C$99i]=1e-7}C$99c[2*C$99i+0]=(C$99a[C$99i]+C$99r[C$99i])/C$99s[C$99i],C$99c[2*C$99i+1]=(C$99a[C$99i]-C$99r[C$99i])/C$99s[C$99i]}return C$99e=Math.max(Math.max(Math.min(C$99c[0],C$99c[1]),Math.min(C$99c[2],C$99c[3])),Math.min(C$99c[4],C$99c[5])),(C$99t=Math.min(Math.min(Math.max(C$99c[0],C$99c[1]),Math.max(C$99c[2],C$99c[3])),Math.max(C$99c[4],C$99c[5])))<0||C$99t<C$99e||C$99e<0?0:C$99e}function C$99k(C$99t,C$99e){return C$99p.Vec3.subtract(C$99mt,C$99t.center,C$99t.halfExtents),C$99p.Vec3.add(C$99yt,C$99t.center,C$99t.halfExtents),C$99p.Vec3.subtract(C$99gt,C$99e.center,C$99e.halfExtents),C$99p.Vec3.add(C$99vt,C$99e.center,C$99e.halfExtents),C$99mt.x<=C$99vt.x&&C$99yt.x>=C$99gt.x&&C$99mt.y<=C$99vt.y&&C$99yt.y>=C$99gt.y&&C$99mt.z<=C$99vt.z&&C$99yt.z>=C$99gt.z}C$99U=new C$99p.Vec3(0,0,0),C$99W=new C$99p.Vec3(0,0,0),C$99H=new C$99p.Vec3(0,0,0),C$99j=new C$99p.Vec3(0,0,0),C$99X=new C$99p.Vec3(0,0,0);var C$99G,C$99z,C$99U,C$99W,C$99H,C$99j,C$99X,C$99Y,C$99q,C$99J,C$99Z,C$99K,C$99Q,C$99$,C$99tt,C$99et,C$99it,C$99nt,C$99rt,C$99st,C$99ot,C$99at,C$99ct,C$99lt,C$99ht,C$99ut,C$99_t,C$99dt,C$99ft,C$99pt,C$99r,C$99s,C$99a,C$99c,C$99mt,C$99yt,C$99gt,C$99vt,C$99xt=function(C$99t,C$99e,C$99i){C$99p.Vec3.subtract(C$99U,C$99e.b,C$99e.a),C$99p.Vec3.subtract(C$99W,C$99e.c,C$99e.a),C$99p.Vec3.cross(C$99H,C$99t.d,C$99W);var C$99n=C$99p.Vec3.dot(C$99U,C$99H);if(C$99n<Number.EPSILON&&(!C$99i||C$99n>-Number.EPSILON))return 0;C$99i=1/C$99n,C$99p.Vec3.subtract(C$99j,C$99t.o,C$99e.a),C$99n=C$99p.Vec3.dot(C$99j,C$99H)*C$99i;if(C$99n<0||1<C$99n)return 0;C$99p.Vec3.cross(C$99X,C$99j,C$99U);C$99e=C$99p.Vec3.dot(C$99t.d,C$99X)*C$99i;if(C$99e<0||1<C$99n+C$99e)return 0;C$99t=C$99p.Vec3.dot(C$99W,C$99X)*C$99i;return C$99t<0?0:C$99t},C$99t=C$99xt,C$99bt=(C$99Y=new C$99p.Vec3(0,0,0),C$99q=new C$99p.Vec3(0,0,0),C$99J=new C$99p.Vec3(0,0,0),C$99Z=new C$99p.Vec3(0,0,0),C$99K=new C$99p.Vec3(0,0,0),C$99Q=new C$99p.Vec3(0,0,0),C$99$=new C$99p.Vec3(0,0,0),C$99tt=new C$99p.Vec3(0,0,0),C$99et=new C$99p.Vec3(0,0,0),C$99it=new C$99p.Vec3(0,0,0),C$99nt=new C$99p.Vec3(0,0,0),C$99rt=new C$99p.Vec3(0,0,0),C$99st=new C$99p.Vec3(0,0,0),C$99ot=new C$99p.Vec3(0,0,0),C$99at=new C$99p.Vec3,C$99ct=new C$99p.Vec3,function(C$99t,C$99e){var C$99i=C$99t.o,C$99t=C$99t.d,C$99n=1/C$99t.x,C$99r=1/C$99t.y,C$99t=1/C$99t.z,C$99e=(C$99p.Vec3.subtract(C$99at,C$99e.center,C$99e.halfExtents),C$99p.Vec3.add(C$99ct,C$99e.center,C$99e.halfExtents),(C$99at.x-C$99i.x)*C$99n),C$99n=(C$99ct.x-C$99i.x)*C$99n,C$99s=(C$99at.y-C$99i.y)*C$99r,C$99r=(C$99ct.y-C$99i.y)*C$99r,C$99o=(C$99at.z-C$99i.z)*C$99t,C$99i=(C$99ct.z-C$99i.z)*C$99t,C$99t=Math.max(Math.max(Math.min(C$99e,C$99n),Math.min(C$99s,C$99r)),Math.min(C$99o,C$99i)),C$99e=Math.min(Math.min(Math.max(C$99e,C$99n),Math.max(C$99s,C$99r)),Math.max(C$99o,C$99i));return C$99e<0||C$99e<C$99t?0:C$99t}),C$99e=C$99bt;new C$99p.Vec3,new C$99p.Vec3,new C$99p.Vec3,C$99_t=new C$99p.Vec3,C$99dt=new C$99p.Vec3,C$99ft=new C$99p.Vec3,C$99pt=new C$99p.Vec3,C$99r=new Array(3),C$99s=new Array(3),C$99a=new Array(3),C$99c=new Array(6),C$99mt=new C$99p.Vec3,C$99yt=new C$99p.Vec3,C$99gt=new C$99p.Vec3,C$99vt=new C$99p.Vec3;function C$99At(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){C$99p.Vec3.set(C$99s[0],C$99t.x+C$99i.x*C$99e.x+C$99n.x*C$99e.y+C$99r.x*C$99e.z,C$99t.y+C$99i.y*C$99e.x+C$99n.y*C$99e.y+C$99r.y*C$99e.z,C$99t.z+C$99i.z*C$99e.x+C$99n.z*C$99e.y+C$99r.z*C$99e.z),C$99p.Vec3.set(C$99s[1],C$99t.x-C$99i.x*C$99e.x+C$99n.x*C$99e.y+C$99r.x*C$99e.z,C$99t.y-C$99i.y*C$99e.x+C$99n.y*C$99e.y+C$99r.y*C$99e.z,C$99t.z-C$99i.z*C$99e.x+C$99n.z*C$99e.y+C$99r.z*C$99e.z),C$99p.Vec3.set(C$99s[2],C$99t.x+C$99i.x*C$99e.x-C$99n.x*C$99e.y+C$99r.x*C$99e.z,C$99t.y+C$99i.y*C$99e.x-C$99n.y*C$99e.y+C$99r.y*C$99e.z,C$99t.z+C$99i.z*C$99e.x-C$99n.z*C$99e.y+C$99r.z*C$99e.z),C$99p.Vec3.set(C$99s[3],C$99t.x+C$99i.x*C$99e.x+C$99n.x*C$99e.y-C$99r.x*C$99e.z,C$99t.y+C$99i.y*C$99e.x+C$99n.y*C$99e.y-C$99r.y*C$99e.z,C$99t.z+C$99i.z*C$99e.x+C$99n.z*C$99e.y-C$99r.z*C$99e.z),C$99p.Vec3.set(C$99s[4],C$99t.x-C$99i.x*C$99e.x-C$99n.x*C$99e.y-C$99r.x*C$99e.z,C$99t.y-C$99i.y*C$99e.x-C$99n.y*C$99e.y-C$99r.y*C$99e.z,C$99t.z-C$99i.z*C$99e.x-C$99n.z*C$99e.y-C$99r.z*C$99e.z),C$99p.Vec3.set(C$99s[5],C$99t.x+C$99i.x*C$99e.x-C$99n.x*C$99e.y-C$99r.x*C$99e.z,C$99t.y+C$99i.y*C$99e.x-C$99n.y*C$99e.y-C$99r.y*C$99e.z,C$99t.z+C$99i.z*C$99e.x-C$99n.z*C$99e.y-C$99r.z*C$99e.z),C$99p.Vec3.set(C$99s[6],C$99t.x-C$99i.x*C$99e.x+C$99n.x*C$99e.y-C$99r.x*C$99e.z,C$99t.y-C$99i.y*C$99e.x+C$99n.y*C$99e.y-C$99r.y*C$99e.z,C$99t.z-C$99i.z*C$99e.x+C$99n.z*C$99e.y-C$99r.z*C$99e.z),C$99p.Vec3.set(C$99s[7],C$99t.x-C$99i.x*C$99e.x-C$99n.x*C$99e.y+C$99r.x*C$99e.z,C$99t.y-C$99i.y*C$99e.x-C$99n.y*C$99e.y+C$99r.y*C$99e.z,C$99t.z-C$99i.z*C$99e.x-C$99n.z*C$99e.y+C$99r.z*C$99e.z)}function C$99Ct(C$99t,C$99e){for(var C$99i=C$99s=C$99p.Vec3.dot(C$99e,C$99t[0]),C$99n=1;C$99n<8;++C$99n)var C$99r=C$99p.Vec3.dot(C$99e,C$99t[C$99n]),C$99s=C$99r<C$99s?C$99r:C$99s,C$99i=C$99i<C$99r?C$99r:C$99i;return[C$99s,C$99i]}function C$99St(C$99t,C$99e){var C$99i=C$99t.halfExtents.x*Math.abs(C$99e.n.x)+C$99t.halfExtents.y*Math.abs(C$99e.n.y)+C$99t.halfExtents.z*Math.abs(C$99e.n.z);return(C$99t=C$99p.Vec3.dot(C$99e.n,C$99t.center))+C$99i<C$99e.d?-1:C$99t-C$99i>C$99e.d?0:1}function C$99Tt(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.planes.length;C$99i++)if(-1===C$99St(C$99t,C$99e.planes[C$99i]))return 0;return 1}function C$99wt(C$99t,C$99e){return C$99p.Vec3.subtract(C$99Et,C$99e,C$99t.center),C$99p.Vec3.transformMat3(C$99Et,C$99Et,C$99p.Mat3.transpose(C$99Mt,C$99t.orientation)),C$99e=C$99Et,C$99t=C$99t.halfExtents,Math.abs(C$99e.x)<C$99t.x&&Math.abs(C$99e.y)<C$99t.y&&Math.abs(C$99e.z)<C$99t.z}var C$99Et,C$99Mt,C$99y=function(){for(var C$99c=new Array(15),C$99t=0;C$99t<15;C$99t++)C$99c[C$99t]=new C$99p.Vec3(0,0,0);for(var C$99l=new Array(8),C$99h=new Array(8),C$99e=0;C$99e<8;C$99e++)C$99l[C$99e]=new C$99p.Vec3(0,0,0),C$99h[C$99e]=new C$99p.Vec3(0,0,0);var C$99u=new C$99p.Vec3,C$99_=new C$99p.Vec3;return function(C$99t,C$99e){var C$99i=C$99e.orientation.m;C$99p.Vec3.set(C$99c[0],1,0,0),C$99p.Vec3.set(C$99c[1],0,1,0),C$99p.Vec3.set(C$99c[2],0,0,1),C$99p.Vec3.set(C$99c[3],C$99i[0],C$99i[1],C$99i[2]),C$99p.Vec3.set(C$99c[4],C$99i[3],C$99i[4],C$99i[5]),C$99p.Vec3.set(C$99c[5],C$99i[6],C$99i[7],C$99i[8]);for(var C$99n,C$99r=0;C$99r<3;++C$99r)C$99p.Vec3.cross(C$99c[6+3*C$99r],C$99c[C$99r],C$99c[0]),C$99p.Vec3.cross(C$99c[6+3*C$99r+1],C$99c[C$99r],C$99c[1]),C$99p.Vec3.cross(C$99c[6+3*C$99r+1],C$99c[C$99r],C$99c[2]);C$99p.Vec3.subtract(C$99u,C$99t.center,C$99t.halfExtents),C$99p.Vec3.add(C$99_,C$99t.center,C$99t.halfExtents),C$99i=C$99u,C$99t=C$99_,C$99n=C$99l,C$99p.Vec3.set(C$99n[0],C$99i.x,C$99t.y,C$99t.z),C$99p.Vec3.set(C$99n[1],C$99i.x,C$99t.y,C$99i.z),C$99p.Vec3.set(C$99n[2],C$99i.x,C$99i.y,C$99t.z),C$99p.Vec3.set(C$99n[3],C$99i.x,C$99i.y,C$99i.z),C$99p.Vec3.set(C$99n[4],C$99t.x,C$99t.y,C$99t.z),C$99p.Vec3.set(C$99n[5],C$99t.x,C$99t.y,C$99i.z),C$99p.Vec3.set(C$99n[6],C$99t.x,C$99i.y,C$99t.z),C$99p.Vec3.set(C$99n[7],C$99t.x,C$99i.y,C$99i.z),C$99At(C$99e.center,C$99e.halfExtents,C$99c[3],C$99c[4],C$99c[5],C$99h);for(var C$99s=0;C$99s<15;++C$99s){var C$99o=C$99Ct(C$99l,C$99c[C$99s]),C$99a=C$99Ct(C$99h,C$99c[C$99s]);if(C$99a[0]>C$99o[1]||C$99o[0]>C$99a[1])return 0}return 1}}(),C$99It=function(){for(var C$99l=new Array(8),C$99h=0,C$99u=0,C$99t=0;C$99t<C$99l.length;C$99t++)C$99l[C$99t]=new C$99p.Vec3(0,0,0);return function(C$99t,C$99e){for(var C$99i,C$99n=!1,C$99r=0;C$99r<C$99e.planes.length;C$99r++){if(-1===(C$99i=C$99St(C$99t,C$99e.planes[C$99r])))return 0;1===C$99i&&(C$99n=!0)}if(!C$99n)return 1;for(var C$99s=0;C$99s<C$99e.vertices.length;C$99s++)C$99p.Vec3.subtract(C$99l[C$99s],C$99e.vertices[C$99s],C$99t.center);for(var C$99o=C$99u=C$99h=0;C$99o<C$99e.vertices.length;C$99o++)C$99l[C$99o].x>C$99t.halfExtents.x?C$99h++:C$99l[C$99o].x<-C$99t.halfExtents.x&&C$99u++;if(C$99h===C$99e.vertices.length||C$99u===C$99e.vertices.length)return 0;for(var C$99a=C$99u=C$99h=0;C$99a<C$99e.vertices.length;C$99a++)C$99l[C$99a].y>C$99t.halfExtents.y?C$99h++:C$99l[C$99a].y<-C$99t.halfExtents.y&&C$99u++;if(C$99h===C$99e.vertices.length||C$99u===C$99e.vertices.length)return 0;for(var C$99c=C$99u=C$99h=0;C$99c<C$99e.vertices.length;C$99c++)C$99l[C$99c].z>C$99t.halfExtents.z?C$99h++:C$99l[C$99c].z<-C$99t.halfExtents.z&&C$99u++;return C$99h===C$99e.vertices.length||C$99u===C$99e.vertices.length?0:1}}(),C$99Bt=(C$99Et=new C$99p.Vec3(0,0,0),C$99Mt=new C$99p.Mat3,function(C$99t,C$99e){var C$99i=C$99t.orientation.m,C$99i=C$99t.halfExtents.x*C$99Rt(C$99e.n,C$99i[0],C$99i[1],C$99i[2])+C$99t.halfExtents.y*C$99Rt(C$99e.n,C$99i[3],C$99i[4],C$99i[5])+C$99t.halfExtents.z*C$99Rt(C$99e.n,C$99i[6],C$99i[7],C$99i[8]),C$99t=C$99p.Vec3.dot(C$99e.n,C$99t.center);return C$99t+C$99i<C$99e.d?-1:C$99t-C$99i>C$99e.d?0:1});function C$99Rt(C$99t,C$99e,C$99i,C$99n){return Math.abs(C$99t.x*C$99e+C$99t.y*C$99i+C$99t.z*C$99n)}function C$99Pt(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.planes.length;C$99i++)if(-1===C$99Bt(C$99t,C$99e.planes[C$99i]))return 0;return 1}function C$99Dt(C$99t,C$99e){var C$99i=C$99p.Vec3.dot(C$99e.n,C$99t.center),C$99t=C$99t.radius*C$99e.n.length();return C$99i+C$99t<C$99e.d?-1:C$99i-C$99t>C$99e.d?0:1}function C$99Lt(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.planes.length;C$99i++)if(-1===C$99Dt(C$99t,C$99e.planes[C$99i]))return 0;return 1}function C$99Vt(C$99t,C$99e){for(var C$99i=0;C$99i<6;C$99i++){var C$99n=C$99e.planes[C$99i],C$99r=C$99t.radius,C$99s=C$99t.center,C$99o=C$99n.n,C$99n=C$99n.d,C$99a=C$99p.Vec3.dot(C$99o,C$99s);if(C$99a+C$99r<C$99n)return 0;if(!(C$99n<C$99a-C$99r)){C$99p.Vec3.add(C$99kt,C$99s,C$99p.Vec3.multiplyScalar(C$99kt,C$99o,C$99r));for(var C$99c=0;C$99c<6;C$99c++)if(C$99c!==C$99i&&C$99c!==C$99i+C$99Gt[C$99i]){var C$99l=C$99e.planes[C$99c];if(C$99p.Vec3.dot(C$99l.n,C$99kt)<C$99l.d)return 0}}}return 1}function C$99Ot(C$99t,C$99e){var C$99i=C$99t.radius+C$99e.radius;return C$99p.Vec3.squaredDistance(C$99t.center,C$99e.center)<C$99i*C$99i}function C$99Ft(C$99t,C$99e){return C$99m.pt_point_aabb(C$99zt,C$99t.center,C$99e),C$99p.Vec3.squaredDistance(C$99t.center,C$99zt)<C$99t.radius*C$99t.radius}function C$99Nt(C$99t,C$99e){return C$99m.pt_point_obb(C$99Ut,C$99t.center,C$99e),C$99p.Vec3.squaredDistance(C$99t.center,C$99Ut)<C$99t.radius*C$99t.radius}var C$99kt,C$99Gt,C$99zt,C$99Ut,C$99Wt=function(){for(var C$99h=new Array(8),C$99u=0,C$99_=0,C$99d=0,C$99t=0;C$99t<C$99h.length;C$99t++)C$99h[C$99t]=new C$99p.Vec3(0,0,0);function C$99f(C$99t,C$99e,C$99i,C$99n){return C$99t.x*C$99e+C$99t.y*C$99i+C$99t.z*C$99n}return function(C$99t,C$99e){for(var C$99i,C$99n=!1,C$99r=0;C$99r<C$99e.planes.length;C$99r++){if(-1===(C$99i=C$99Bt(C$99t,C$99e.planes[C$99r])))return 0;1===C$99i&&(C$99n=!0)}if(!C$99n)return 1;for(var C$99s=0;C$99s<C$99e.vertices.length;C$99s++)C$99p.Vec3.subtract(C$99h[C$99s],C$99e.vertices[C$99s],C$99t.center);C$99d=C$99_=0;for(var C$99o=C$99t.orientation.m,C$99a=0;C$99a<C$99e.vertices.length;C$99a++)(C$99u=C$99f(C$99h[C$99a],C$99o[0],C$99o[1],C$99o[2]))>C$99t.halfExtents.x?C$99_++:C$99u<-C$99t.halfExtents.x&&C$99d++;if(C$99_===C$99e.vertices.length||C$99d===C$99e.vertices.length)return 0;for(var C$99c=C$99d=C$99_=0;C$99c<C$99e.vertices.length;C$99c++)(C$99u=C$99f(C$99h[C$99c],C$99o[3],C$99o[4],C$99o[5]))>C$99t.halfExtents.y?C$99_++:C$99u<-C$99t.halfExtents.y&&C$99d++;if(C$99_===C$99e.vertices.length||C$99d===C$99e.vertices.length)return 0;for(var C$99l=C$99d=C$99_=0;C$99l<C$99e.vertices.length;C$99l++)(C$99u=C$99f(C$99h[C$99l],C$99o[6],C$99o[7],C$99o[8]))>C$99t.halfExtents.z?C$99_++:C$99u<-C$99t.halfExtents.z&&C$99d++;return C$99_===C$99e.vertices.length||C$99d===C$99e.vertices.length?0:1}}(),C$99Ht=function(){for(var C$99c=new Array(15),C$99t=0;C$99t<15;C$99t++)C$99c[C$99t]=new C$99p.Vec3(0,0,0);for(var C$99l=new Array(8),C$99h=new Array(8),C$99e=0;C$99e<8;C$99e++)C$99l[C$99e]=new C$99p.Vec3(0,0,0),C$99h[C$99e]=new C$99p.Vec3(0,0,0);return function(C$99t,C$99e){var C$99i=C$99t.orientation.m,C$99n=C$99e.orientation.m;C$99p.Vec3.set(C$99c[0],C$99i[0],C$99i[1],C$99i[2]),C$99p.Vec3.set(C$99c[1],C$99i[3],C$99i[4],C$99i[5]),C$99p.Vec3.set(C$99c[2],C$99i[6],C$99i[7],C$99i[8]),C$99p.Vec3.set(C$99c[3],C$99n[0],C$99n[1],C$99n[2]),C$99p.Vec3.set(C$99c[4],C$99n[3],C$99n[4],C$99n[5]),C$99p.Vec3.set(C$99c[5],C$99n[6],C$99n[7],C$99n[8]);for(var C$99r=0;C$99r<3;++C$99r)C$99p.Vec3.cross(C$99c[6+3*C$99r],C$99c[C$99r],C$99c[0]),C$99p.Vec3.cross(C$99c[6+3*C$99r+1],C$99c[C$99r],C$99c[1]),C$99p.Vec3.cross(C$99c[6+3*C$99r+1],C$99c[C$99r],C$99c[2]);C$99At(C$99t.center,C$99t.halfExtents,C$99c[0],C$99c[1],C$99c[2],C$99l),C$99At(C$99e.center,C$99e.halfExtents,C$99c[3],C$99c[4],C$99c[5],C$99h);for(var C$99s=0;C$99s<15;++C$99s){var C$99o=C$99Ct(C$99l,C$99c[C$99s]),C$99a=C$99Ct(C$99h,C$99c[C$99s]);if(C$99a[0]>C$99o[1]||C$99o[0]>C$99a[1])return 0}return 1}}(),C$99e=(C$99kt=new C$99p.Vec3(0,0,0),C$99Gt=[1,-1,1,-1,1,-1],C$99zt=new C$99p.Vec3,C$99Ut=new C$99p.Vec3,{rayAabb:C$99e,rayMesh:C$99x,raycast:C$99P,rayTriangle:C$99t,ray_sphere:C$99F,ray_aabb:C$99bt,ray_obb:C$99N,ray_plane:C$99D,ray_triangle:C$99xt,line_plane:C$99L,line_triangle:C$99V,line_quad:C$99O,sphere_sphere:C$99Ot,sphere_aabb:C$99Ft,sphere_obb:C$99Nt,sphere_plane:C$99Dt,sphere_frustum:C$99Lt,sphere_frustum_accurate:C$99Vt,aabb_aabb:C$99k,aabb_obb:C$99y,aabb_plane:C$99St,aabb_frustum:C$99Tt,aabb_frustum_accurate:C$99It,obb_obb:C$99Ht,obb_plane:C$99Bt,obb_frustum:C$99Pt,obb_frustum_accurate:C$99Wt,obb_point:C$99wt,resolve:function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=null);var C$99n=C$99t._type,C$99r=C$99e._type,C$99s=this[C$99n|C$99r];return C$99n<C$99r?C$99s(C$99t,C$99e,C$99i):C$99s(C$99e,C$99t,C$99i)}});C$99e[C$99i.default.SHAPE_RAY|C$99i.default.SHAPE_SPHERE]=C$99F,C$99e[C$99i.default.SHAPE_RAY|C$99i.default.SHAPE_AABB]=C$99bt,C$99e[C$99i.default.SHAPE_RAY|C$99i.default.SHAPE_OBB]=C$99N,C$99e[C$99i.default.SHAPE_RAY|C$99i.default.SHAPE_PLANE]=C$99D,C$99e[C$99i.default.SHAPE_RAY|C$99i.default.SHAPE_TRIANGLE]=C$99xt,C$99e[C$99i.default.SHAPE_LINE|C$99i.default.SHAPE_PLANE]=C$99L,C$99e[C$99i.default.SHAPE_LINE|C$99i.default.SHAPE_TRIANGLE]=C$99V,C$99e[C$99i.default.SHAPE_SPHERE]=C$99Ot,C$99e[C$99i.default.SHAPE_SPHERE|C$99i.default.SHAPE_AABB]=C$99Ft,C$99e[C$99i.default.SHAPE_SPHERE|C$99i.default.SHAPE_OBB]=C$99Nt,C$99e[C$99i.default.SHAPE_SPHERE|C$99i.default.SHAPE_PLANE]=C$99Dt,C$99e[C$99i.default.SHAPE_SPHERE|C$99i.default.SHAPE_FRUSTUM]=C$99Lt,C$99e[C$99i.default.SHAPE_SPHERE|C$99i.default.SHAPE_FRUSTUM_ACCURATE]=C$99Vt,C$99e[C$99i.default.SHAPE_AABB]=C$99k,C$99e[C$99i.default.SHAPE_AABB|C$99i.default.SHAPE_OBB]=C$99y,C$99e[C$99i.default.SHAPE_AABB|C$99i.default.SHAPE_PLANE]=C$99St,C$99e[C$99i.default.SHAPE_AABB|C$99i.default.SHAPE_FRUSTUM]=C$99Tt,C$99e[C$99i.default.SHAPE_AABB|C$99i.default.SHAPE_FRUSTUM_ACCURATE]=C$99It,C$99e[C$99i.default.SHAPE_OBB]=C$99Ht,C$99e[C$99i.default.SHAPE_OBB|C$99i.default.SHAPE_PLANE]=C$99Bt,C$99e[C$99i.default.SHAPE_OBB|C$99i.default.SHAPE_FRUSTUM]=C$99Pt,C$99e[C$99i.default.SHAPE_OBB|C$99i.default.SHAPE_FRUSTUM_ACCURATE]=C$99Wt,C$99h.default=C$99e,C$99l.exports=C$99h.default},{"../../renderer/gfx":312,"../../renderer/memop/recycle-pool":327,"../value-types":279,"./aabb":119,"./distance":120,"./enums":121,"./ray":128,"./triangle":130}],125:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99o=C$99t("../value-types"),C$99a=(C$99t=C$99t("./enums"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99c(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),void 0===C$99r&&(C$99r=0),void 0===C$99s&&(C$99s=-1),this.s=void 0,this.e=void 0,this._type=void 0,this._type=C$99a.default.SHAPE_LINE,this.s=new C$99o.Vec3(C$99t,C$99e,C$99i),this.e=new C$99o.Vec3(C$99n,C$99r,C$99s)}C$99c.create=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){return new C$99c(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s)},C$99c.clone=function(C$99t){return new C$99c(C$99t.s.x,C$99t.s.y,C$99t.s.z,C$99t.e.x,C$99t.e.y,C$99t.e.z)},C$99c.copy=function(C$99t,C$99e){return C$99o.Vec3.copy(C$99t.s,C$99e.s),C$99o.Vec3.copy(C$99t.e,C$99e.e),C$99t},C$99c.fromPoints=function(C$99t,C$99e,C$99i){return C$99o.Vec3.copy(C$99t.s,C$99e),C$99o.Vec3.copy(C$99t.e,C$99i),C$99t},C$99c.set=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){return C$99t.s.x=C$99e,C$99t.s.y=C$99i,C$99t.s.z=C$99n,C$99t.e.x=C$99r,C$99t.e.y=C$99s,C$99t.e.z=C$99o,C$99t},C$99c.len=function(C$99t){return C$99o.Vec3.distance(C$99t.s,C$99t.e)},C$99c.prototype.length=function(){return C$99o.Vec3.distance(this.s,this.e)},C$99i.default=C$99c,C$99e.exports=C$99i.default},{"../value-types":279,"./enums":121}],126:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99m=C$99t("../value-types"),C$99y=(C$99t=C$99t("./enums"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}var C$99r,C$99s,C$99o=new C$99m.Vec3,C$99c=new C$99m.Vec3,C$99a=new C$99m.Mat3,C$99t=(C$99p.create=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f){return new C$99p(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f)},C$99p.clone=function(C$99t){var C$99e=C$99t.orientation.m;return new C$99p(C$99t.center.x,C$99t.center.y,C$99t.center.z,C$99t.halfExtents.x,C$99t.halfExtents.y,C$99t.halfExtents.z,C$99e[0],C$99e[1],C$99e[2],C$99e[3],C$99e[4],C$99e[5],C$99e[6],C$99e[7],C$99e[8])},C$99p.copy=function(C$99t,C$99e){return C$99m.Vec3.copy(C$99t.center,C$99e.center),C$99m.Vec3.copy(C$99t.halfExtents,C$99e.halfExtents),C$99m.Mat3.copy(C$99t.orientation,C$99e.orientation),C$99t},C$99p.fromPoints=function(C$99t,C$99e,C$99i){return C$99m.Vec3.multiplyScalar(C$99t.center,C$99m.Vec3.add(C$99o,C$99e,C$99i),.5),C$99m.Vec3.multiplyScalar(C$99t.halfExtents,C$99m.Vec3.subtract(C$99c,C$99i,C$99e),.5),C$99m.Mat3.identity(C$99t.orientation),C$99t},C$99p.set=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f,C$99p){return C$99m.Vec3.set(C$99t.center,C$99e,C$99i,C$99n),C$99m.Vec3.set(C$99t.halfExtents,C$99r,C$99s,C$99o),C$99m.Mat3.set(C$99t.orientation,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f,C$99p),C$99t},C$99t=C$99p,(C$99s=[{key:"type",get:function(){return this._type}}])&&C$99n(C$99t.prototype,C$99s),C$99r&&C$99n(C$99t,C$99r),(C$99s=C$99p.prototype).getBoundary=function(C$99t,C$99e){var C$99i,C$99n,C$99r,C$99s;C$99i=C$99o,C$99n=this.halfExtents,C$99r=this.orientation,C$99s=C$99a.m,C$99r=C$99r.m,C$99s[0]=Math.abs(C$99r[0]),C$99s[1]=Math.abs(C$99r[1]),C$99s[2]=Math.abs(C$99r[2]),C$99s[3]=Math.abs(C$99r[3]),C$99s[4]=Math.abs(C$99r[4]),C$99s[5]=Math.abs(C$99r[5]),C$99s[6]=Math.abs(C$99r[6]),C$99s[7]=Math.abs(C$99r[7]),C$99s[8]=Math.abs(C$99r[8]),C$99m.Vec3.transformMat3(C$99i,C$99n,C$99a),C$99m.Vec3.subtract(C$99t,this.center,C$99o),C$99m.Vec3.add(C$99e,this.center,C$99o)},C$99s.transform=function(C$99t,C$99e,C$99i,C$99n,C$99r){C$99m.Vec3.transformMat4(C$99r.center,this.center,C$99t),C$99m.Mat3.fromQuat(C$99r.orientation,C$99i),C$99m.Vec3.multiply(C$99r.halfExtents,this.halfExtents,C$99n)},C$99s.translateAndRotate=function(C$99t,C$99e,C$99i){C$99m.Vec3.transformMat4(C$99i.center,this.center,C$99t),C$99m.Mat3.fromQuat(C$99i.orientation,C$99e)},C$99s.setScale=function(C$99t,C$99e){C$99m.Vec3.multiply(C$99e.halfExtents,this.halfExtents,C$99t)},C$99p);function C$99p(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f){void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=1),void 0===C$99r&&(C$99r=1),void 0===C$99s&&(C$99s=1),void 0===C$99o&&(C$99o=1),void 0===C$99a&&(C$99a=0),void 0===C$99c&&(C$99c=0),void 0===C$99l&&(C$99l=0),void 0===C$99h&&(C$99h=1),void 0===C$99u&&(C$99u=0),void 0===C$99_&&(C$99_=0),void 0===C$99d&&(C$99d=0),void 0===C$99f&&(C$99f=1),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=C$99y.default.SHAPE_OBB,this.center=new C$99m.Vec3(C$99t,C$99e,C$99i),this.halfExtents=new C$99m.Vec3(C$99n,C$99r,C$99s),this.orientation=new C$99m.Mat3(C$99o,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f)}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../value-types":279,"./enums":121}],127:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99r=C$99t("../value-types"),C$99s=(C$99t=C$99t("./enums"))&&C$99t.__esModule?C$99t:{default:C$99t};var C$99o=new C$99r.Vec3(0,0,0),C$99a=new C$99r.Vec3(0,0,0),C$99n=cc.mat4(),C$99c=cc.v4();function C$99l(C$99t,C$99e,C$99i,C$99n){void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=1),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),this.n=void 0,this.d=void 0,this._type=void 0,this._type=C$99s.default.SHAPE_PLANE,this.n=new C$99r.Vec3(C$99t,C$99e,C$99i),this.d=C$99n}C$99l.create=function(C$99t,C$99e,C$99i,C$99n){return new C$99l(C$99t,C$99e,C$99i,C$99n)},C$99l.clone=function(C$99t){return new C$99l(C$99t.n.x,C$99t.n.y,C$99t.n.z,C$99t.d)},C$99l.copy=function(C$99t,C$99e){return C$99r.Vec3.copy(C$99t.n,C$99e.n),C$99t.d=C$99e.d,C$99t},C$99l.fromPoints=function(C$99t,C$99e,C$99i,C$99n){return C$99r.Vec3.subtract(C$99o,C$99i,C$99e),C$99r.Vec3.subtract(C$99a,C$99n,C$99e),C$99r.Vec3.normalize(C$99t.n,C$99r.Vec3.cross(C$99t.n,C$99o,C$99a)),C$99t.d=C$99r.Vec3.dot(C$99t.n,C$99e),C$99t},C$99l.set=function(C$99t,C$99e,C$99i,C$99n,C$99r){return C$99t.n.x=C$99e,C$99t.n.y=C$99i,C$99t.n.z=C$99n,C$99t.d=C$99r,C$99t},C$99l.fromNormalAndPoint=function(C$99t,C$99e,C$99i){return C$99r.Vec3.copy(C$99t.n,C$99e),C$99t.d=C$99r.Vec3.dot(C$99e,C$99i),C$99t},C$99l.normalize=function(C$99t,C$99e){var C$99i=C$99e.n.len();return C$99r.Vec3.normalize(C$99t.n,C$99e.n),0<C$99i&&(C$99t.d=C$99e.d/C$99i),C$99t},C$99l.prototype.transform=function(C$99t){C$99r.Mat4.invert(C$99n,C$99t),C$99r.Mat4.transpose(C$99n,C$99n),C$99r.Vec4.set(C$99c,this.n.x,this.n.y,this.n.z,this.d),C$99r.Vec4.transformMat4(C$99c,C$99c,C$99n),C$99r.Vec3.set(this.n,C$99c.x,C$99c.y,C$99c.z),this.d=C$99c.w},C$99i.default=C$99l,C$99e.exports=C$99i.default},{"../value-types":279,"./enums":121}],128:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99o=C$99t("../value-types"),C$99a=(C$99t=C$99t("./enums"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99c(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),void 0===C$99r&&(C$99r=0),void 0===C$99s&&(C$99s=-1),this.o=void 0,this.d=void 0,this._type=void 0,this._type=C$99a.default.SHAPE_RAY,this.o=new C$99o.Vec3(C$99t,C$99e,C$99i),this.d=new C$99o.Vec3(C$99n,C$99r,C$99s)}C$99c.create=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){return new C$99c(C$99t=void 0===C$99t?0:C$99t,C$99e=void 0===C$99e?0:C$99e,C$99i=void 0===C$99i?0:C$99i,C$99n=void 0===C$99n?0:C$99n,C$99r=void 0===C$99r?0:C$99r,C$99s=void 0===C$99s?1:C$99s)},C$99c.clone=function(C$99t){return new C$99c(C$99t.o.x,C$99t.o.y,C$99t.o.z,C$99t.d.x,C$99t.d.y,C$99t.d.z)},C$99c.copy=function(C$99t,C$99e){return C$99o.Vec3.copy(C$99t.o,C$99e.o),C$99o.Vec3.copy(C$99t.d,C$99e.d),C$99t},C$99c.fromPoints=function(C$99t,C$99e,C$99i){return C$99o.Vec3.copy(C$99t.o,C$99e),C$99o.Vec3.normalize(C$99t.d,C$99o.Vec3.subtract(C$99t.d,C$99i,C$99e)),C$99t},C$99c.set=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){return C$99t.o.x=C$99e,C$99t.o.y=C$99i,C$99t.o.z=C$99n,C$99t.d.x=C$99r,C$99t.d.y=C$99s,C$99t.d.z=C$99o,C$99t},C$99c.prototype.computeHit=function(C$99t,C$99e){C$99o.Vec3.normalize(C$99t,this.d),C$99o.Vec3.scaleAndAdd(C$99t,this.o,C$99t,C$99e)},C$99i.default=C$99c,C$99e.exports=C$99i.default},{"../value-types":279,"./enums":121}],129:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99s=C$99t("../value-types"),C$99r=(C$99t=C$99t("./enums"))&&C$99t.__esModule?C$99t:{default:C$99t};var C$99n=new C$99s.Vec3;function C$99o(C$99t,C$99e,C$99i,C$99n){void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=1),this.center=void 0,this.radius=void 0,this._type=void 0,this._type=C$99r.default.SHAPE_SPHERE,this.center=new C$99s.Vec3(C$99t,C$99e,C$99i),this.radius=C$99n}C$99o.create=function(C$99t,C$99e,C$99i,C$99n){return new C$99o(C$99t,C$99e,C$99i,C$99n)},C$99o.clone=function(C$99t){return new C$99o(C$99t.center.x,C$99t.center.y,C$99t.center.z,C$99t.radius)},C$99o.copy=function(C$99t,C$99e){return C$99s.Vec3.copy(C$99t.center,C$99e.center),C$99t.radius=C$99e.radius,C$99t},C$99o.fromPoints=function(C$99t,C$99e,C$99i){return C$99s.Vec3.multiplyScalar(C$99t.center,C$99s.Vec3.add(C$99n,C$99e,C$99i),.5),C$99t.radius=.5*C$99s.Vec3.subtract(C$99n,C$99i,C$99e).len(),C$99t},C$99o.set=function(C$99t,C$99e,C$99i,C$99n,C$99r){return C$99t.center.x=C$99e,C$99t.center.y=C$99i,C$99t.center.z=C$99n,C$99t.radius=C$99r,C$99t},(C$99t=C$99o.prototype).clone=function(){return C$99o.clone(this)},C$99t.copy=function(C$99t){return C$99o.copy(this,C$99t)},C$99t.getBoundary=function(C$99t,C$99e){C$99s.Vec3.set(C$99t,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),C$99s.Vec3.set(C$99e,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)},C$99t.transform=function(C$99t,C$99e,C$99i,C$99n,C$99r){C$99s.Vec3.transformMat4(C$99r.center,this.center,C$99t),C$99r.radius=this.radius*C$99n.maxAxis()},C$99t.translateAndRotate=function(C$99t,C$99e,C$99i){C$99s.Vec3.transformMat4(C$99i.center,this.center,C$99t)},C$99t.setScale=function(C$99t,C$99e){C$99e.radius=this.radius*C$99t.maxAxis()},C$99i.default=C$99o,C$99e.exports=C$99i.default},{"../value-types":279,"./enums":121}],130:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99l=C$99n(C$99t("../value-types/vec3")),C$99h=C$99n(C$99t("./enums"));function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99u(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this.a=new C$99l.default(C$99t,C$99e,C$99i),this.b=new C$99l.default(C$99n,C$99r,C$99s),this.c=new C$99l.default(C$99o,C$99a,C$99c),this._type=C$99h.default.SHAPE_TRIANGLE}C$99u.create=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){return new C$99u(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c)},C$99u.clone=function(C$99t){return new C$99u(C$99t.a.x,C$99t.a.y,C$99t.a.z,C$99t.b.x,C$99t.b.y,C$99t.b.z,C$99t.c.x,C$99t.c.y,C$99t.c.z)},C$99u.copy=function(C$99t,C$99e){return C$99l.default.copy(C$99t.a,C$99e.a),C$99l.default.copy(C$99t.b,C$99e.b),C$99l.default.copy(C$99t.c,C$99e.c),C$99t},C$99u.fromPoints=function(C$99t,C$99e,C$99i,C$99n){return C$99l.default.copy(C$99t.a,C$99e),C$99l.default.copy(C$99t.b,C$99i),C$99l.default.copy(C$99t.c,C$99n),C$99t},C$99u.set=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l){return C$99t.a.x=C$99e,C$99t.a.y=C$99i,C$99t.a.z=C$99n,C$99t.b.x=C$99r,C$99t.b.y=C$99s,C$99t.b.z=C$99o,C$99t.c.x=C$99a,C$99t.c.y=C$99c,C$99t.c.z=C$99l,C$99t},C$99i.default=C$99u,C$99e.exports=C$99i.default},{"../value-types/vec3":289,"./enums":121}],131:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../components/CCRenderComponent"),C$99r=C$99t("../assets/material/CCMaterial"),C$99s=C$99t("./types"),C$99o=C$99s.LineCap,C$99a=C$99s.LineJoin,C$99c=cc.Class({name:"cc.Graphics",extends:C$99n,editor:!1,ctor:function(){this._impl=new C$99c._Impl(this)},properties:{_lineWidth:1,_strokeColor:cc.Color.BLACK,_lineJoin:C$99a.MITER,_lineCap:C$99o.BUTT,_fillColor:cc.Color.WHITE,_miterLimit:10,lineWidth:{get:function(){return this._lineWidth},set:function(C$99t){this._lineWidth=C$99t,this._impl.lineWidth=C$99t}},lineJoin:{get:function(){return this._lineJoin},set:function(C$99t){this._lineJoin=C$99t,this._impl.lineJoin=C$99t},type:C$99a},lineCap:{get:function(){return this._lineCap},set:function(C$99t){this._lineCap=C$99t,this._impl.lineCap=C$99t},type:C$99o},strokeColor:{get:function(){return this._strokeColor},set:function(C$99t){this._impl.strokeColor=this._strokeColor=cc.color(C$99t)}},fillColor:{get:function(){return this._fillColor},set:function(C$99t){this._impl.fillColor=this._fillColor=cc.color(C$99t)}},miterLimit:{get:function(){return this._miterLimit},set:function(C$99t){this._miterLimit=C$99t,this._impl.miterLimit=C$99t}}},statics:{LineJoin:C$99a,LineCap:C$99o},onRestore:function(){this._impl||(this._impl=new C$99c._Impl(this))},onDestroy:function(){this.clear(!0),this._super(),this._impl=null},_getDefaultMaterial:function(){return C$99r.getBuiltinMaterial("2d-base")},_updateMaterial:function(){var C$99t=this._materials[0];C$99t&&C$99t.define("CC_USE_MODEL",!0)},moveTo:function(C$99t,C$99e){C$99t instanceof cc.Vec2?cc.warn("[moveTo] : Can not pass Vec2 as [x, y] value, please check it."):this._impl.moveTo(C$99t,C$99e)},lineTo:function(C$99t,C$99e){C$99t instanceof cc.Vec2?cc.warn("[moveTo] : Can not pass Vec2 as [x, y] value, please check it."):this._impl.lineTo(C$99t,C$99e)},bezierCurveTo:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this._impl.bezierCurveTo(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s)},quadraticCurveTo:function(C$99t,C$99e,C$99i,C$99n){this._impl.quadraticCurveTo(C$99t,C$99e,C$99i,C$99n)},arc:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this._impl.arc(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s)},ellipse:function(C$99t,C$99e,C$99i,C$99n){this._impl.ellipse(C$99t,C$99e,C$99i,C$99n)},circle:function(C$99t,C$99e,C$99i){this._impl.circle(C$99t,C$99e,C$99i)},rect:function(C$99t,C$99e,C$99i,C$99n){this._impl.rect(C$99t,C$99e,C$99i,C$99n)},roundRect:function(C$99t,C$99e,C$99i,C$99n,C$99r){this._impl.roundRect(C$99t,C$99e,C$99i,C$99n,C$99r)},fillRect:function(C$99t,C$99e,C$99i,C$99n){this.rect(C$99t,C$99e,C$99i,C$99n),this.fill()},clear:function(C$99t){this._impl.clear(C$99t),this._assembler&&this._assembler.clear(C$99t)},close:function(){this._impl.close()},stroke:function(){this._assembler||this._resetAssembler(),this._assembler.stroke(this)},fill:function(){this._assembler||this._resetAssembler(),this._assembler.fill(this)}});cc.Graphics=C$99e.exports=C$99c,cc.Graphics.Types=C$99s,cc.Graphics.Helper=C$99t("./helper")},{"../assets/material/CCMaterial":53,"../components/CCRenderComponent":89,"./helper":132,"./types":134}],132:[function(C$99t,C$99e,C$99i){"use strict";var C$99b=C$99t("./types").PointFlags,C$99v=Math.PI,C$99x=Math.min,C$99T=Math.max,C$99A=Math.cos,C$99C=Math.sin,C$99S=Math.abs,C$99a=Math.sign,C$99c=.5522847493;C$99e.exports={arc:function(C$99h,C$99u,C$99_,C$99t,C$99d,C$99e,C$99f){var C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c=0,C$99l=0,C$99p=0,C$99m=0,C$99y=0,C$99g=0,C$99c=C$99e-C$99d;if(C$99f=C$99f||!1)if(C$99S(C$99c)>=2*C$99v)C$99c=2*C$99v;else for(;C$99c<0;)C$99c+=2*C$99v;else if(C$99S(C$99c)>=2*C$99v)C$99c=2*-C$99v;else for(;0<C$99c;)C$99c-=2*C$99v;for(C$99a=0|C$99T(1,C$99x(C$99S(C$99c)/(.5*C$99v)+.5,5)),C$99l=C$99S(4/3*(1-C$99A(C$99e=C$99c/C$99a/2))/C$99C(C$99e)),C$99f||(C$99l=-C$99l),C$99o=0;C$99o<=C$99a;C$99o++)C$99i=C$99u+(C$99s=C$99A(C$99r=C$99d+C$99c*(C$99o/C$99a)))*C$99t,C$99n=C$99_+(C$99r=C$99C(C$99r))*C$99t,C$99r=-C$99r*C$99t*C$99l,C$99s=C$99s*C$99t*C$99l,0===C$99o?C$99h.moveTo(C$99i,C$99n):C$99h.bezierCurveTo(C$99p+C$99y,C$99m+C$99g,C$99i-C$99r,C$99n-C$99s,C$99i,C$99n),C$99p=C$99i,C$99m=C$99n,C$99y=C$99r,C$99g=C$99s},ellipse:function(C$99t,C$99e,C$99i,C$99n,C$99r){C$99t.moveTo(C$99e-C$99n,C$99i),C$99t.bezierCurveTo(C$99e-C$99n,C$99i+C$99r*C$99c,C$99e-C$99n*C$99c,C$99i+C$99r,C$99e,C$99i+C$99r),C$99t.bezierCurveTo(C$99e+C$99n*C$99c,C$99i+C$99r,C$99e+C$99n,C$99i+C$99r*C$99c,C$99e+C$99n,C$99i),C$99t.bezierCurveTo(C$99e+C$99n,C$99i-C$99r*C$99c,C$99e+C$99n*C$99c,C$99i-C$99r,C$99e,C$99i-C$99r),C$99t.bezierCurveTo(C$99e-C$99n*C$99c,C$99i-C$99r,C$99e-C$99n,C$99i-C$99r*C$99c,C$99e-C$99n,C$99i),C$99t.close()},roundRect:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o;C$99s<.1?C$99t.rect(C$99e,C$99i,C$99n,C$99r):(C$99o=C$99x(C$99s,.5*C$99S(C$99n))*C$99a(C$99n),C$99s=C$99x(C$99s,.5*C$99S(C$99r))*C$99a(C$99r),C$99t.moveTo(C$99e,C$99i+C$99s),C$99t.lineTo(C$99e,C$99i+C$99r-C$99s),C$99t.bezierCurveTo(C$99e,C$99i+C$99r-C$99s*(1-C$99c),C$99e+C$99o*(1-C$99c),C$99i+C$99r,C$99e+C$99o,C$99i+C$99r),C$99t.lineTo(C$99e+C$99n-C$99o,C$99i+C$99r),C$99t.bezierCurveTo(C$99e+C$99n-C$99o*(1-C$99c),C$99i+C$99r,C$99e+C$99n,C$99i+C$99r-C$99s*(1-C$99c),C$99e+C$99n,C$99i+C$99r-C$99s),C$99t.lineTo(C$99e+C$99n,C$99i+C$99s),C$99t.bezierCurveTo(C$99e+C$99n,C$99i+C$99s*(1-C$99c),C$99e+C$99n-C$99o*(1-C$99c),C$99i,C$99e+C$99n-C$99o,C$99i),C$99t.lineTo(C$99e+C$99o,C$99i),C$99t.bezierCurveTo(C$99e+C$99o*(1-C$99c),C$99i,C$99e,C$99i+C$99s*(1-C$99c),C$99e,C$99i+C$99s),C$99t.close())},tesselateBezier:function C$99h(C$99t,C$99e,C$99u,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99_,C$99c){var C$99d,C$99f,C$99p,C$99m,C$99y,C$99g,C$99v,C$99x,C$99l;10<C$99_||(C$99y=.5*(C$99r+C$99o),C$99g=.5*(C$99s+C$99a),C$99v=.5*((C$99d=.5*(C$99e+C$99i))+(C$99p=.5*(C$99i+C$99r))),C$99x=.5*((C$99f=.5*(C$99u+C$99n))+(C$99m=.5*(C$99n+C$99s))),((C$99l=C$99S((C$99i-C$99o)*(C$99i=C$99a-C$99u)-(C$99n-C$99a)*(C$99n=C$99o-C$99e)))+(C$99r=C$99S((C$99r-C$99o)*C$99i-(C$99s-C$99a)*C$99n)))*(C$99l+C$99r)<C$99t._tessTol*(C$99n*C$99n+C$99i*C$99i)?C$99t._addPoint(C$99o,C$99a,0===C$99c?C$99c|C$99b.PT_BEVEL:C$99c):(C$99h(C$99t,C$99e,C$99u,C$99d,C$99f,C$99v,C$99x,C$99l=.5*(C$99v+(C$99s=.5*(C$99p+C$99y))),C$99n=.5*(C$99x+(C$99r=.5*(C$99m+C$99g))),C$99_+1,0),C$99h(C$99t,C$99l,C$99n,C$99s,C$99r,C$99y,C$99g,C$99o,C$99a,C$99_+1,C$99c)))}}},{"./types":134}],133:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./graphics")},{"./graphics":131}],134:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Enum({BUTT:0,ROUND:1,SQUARE:2}),C$99r=cc.Enum({BEVEL:0,ROUND:1,MITER:2}),C$99s=cc.Enum({PT_CORNER:1,PT_LEFT:2,PT_BEVEL:4,PT_INNERBEVEL:8});C$99e.exports={LineCap:C$99n,LineJoin:C$99r,PointFlags:C$99s}},{}],135:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./platform"),C$99t("./assets"),C$99t("./CCNode"),C$99t("./CCPrivateNode"),C$99t("./CCScene"),C$99t("./components"),C$99t("./graphics"),C$99t("./collider"),C$99t("./collider/CCIntersection"),C$99t("./physics"),C$99t("./camera/CCCamera"),C$99t("./geom-utils"),C$99t("./mesh"),C$99t("./3d"),C$99t("./base-ui/CCWidgetManager")},{"./3d":void 0,"./CCNode":30,"./CCPrivateNode":31,"./CCScene":32,"./assets":51,"./base-ui/CCWidgetManager":62,"./camera/CCCamera":63,"./collider":71,"./collider/CCIntersection":69,"./components":107,"./geom-utils":123,"./graphics":133,"./mesh":158,"./physics":173,"./platform":206}],136:[function(C$99t,C$99i,C$99a){"use strict";var C$99r=C$99t("../platform/js"),C$99n=C$99t("./pipeline"),C$99c=C$99t("./loading-items"),C$99_=C$99t("./asset-loader"),C$99d=C$99t("./downloader"),C$99f=C$99t("./loader"),C$99p=C$99t("./asset-table"),C$99u=C$99t("../platform/utils").callInNextTick,C$99m=C$99t("./auto-release-utils"),C$99y=C$99t("./released-asset-checker"),C$99o=Object.create(null);C$99o.assets=new C$99p,C$99o.internal=new C$99p;var C$99s={url:null,raw:!1};function C$99g(C$99t){var C$99e,C$99i;if("object"==typeof C$99t){if((C$99i=C$99t).url)return C$99i;C$99e=C$99t.uuid}else C$99i={},C$99e=C$99t;return C$99t=C$99i.type?"uuid"===C$99i.type:cc.AssetLibrary._uuidInSettings(C$99e),cc.AssetLibrary._getAssetInfoInRuntime(C$99e,C$99s),C$99i.url=C$99t?C$99s.url:C$99e,C$99s.url&&"uuid"===C$99i.type&&C$99s.raw?(C$99i.type=null,C$99i.isRawAsset=!0):C$99t||(C$99i.isRawAsset=!0),C$99i}var C$99l=[],C$99h=[];function C$99e(){var C$99t=new C$99_,C$99e=new C$99d,C$99i=new C$99f;C$99n.call(this,[C$99t,C$99e,C$99i]),this.assetLoader=C$99t,this.md5Pipe=null,this.downloader=C$99e,this.loader=C$99i,this.onProgress=null,this._autoReleaseSetting=C$99r.createMap(!0),this._releasedAssetChecker_DEBUG=new C$99y}C$99r.extend(C$99e,C$99n);C$99t=C$99e.prototype;C$99t.init=function(C$99t){var C$99e=this;C$99t.on(cc.Director.EVENT_AFTER_UPDATE,function(){C$99e._releasedAssetChecker_DEBUG.checkCouldRelease(C$99e._cache)})},C$99t.getXMLHttpRequest=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},C$99t.addDownloadHandlers=function(C$99t){this.downloader.addHandlers(C$99t)},C$99t.addLoadHandlers=function(C$99t){this.loader.addHandlers(C$99t)},C$99t.load=function(C$99t,C$99e,C$99n){void 0===C$99n&&(C$99n=C$99e,C$99e=this.onProgress||null);var C$99r,C$99s=this,C$99o=!1;C$99t instanceof Array||(C$99t=C$99t?(C$99o=!0,[C$99t]):[]);for(var C$99i=C$99l.length=0;C$99i<C$99t.length;++C$99i){var C$99a=C$99t[C$99i];C$99a&&C$99a.id&&(cc.warnID(4920,C$99a.id),C$99a.uuid||C$99a.url||(C$99a.url=C$99a.id)),((C$99r=C$99g(C$99a)).url||C$99r.uuid)&&(C$99a=this._cache[C$99r.url],C$99l.push(C$99a||C$99r))}C$99e=C$99c.create(this,C$99e,function(C$99e,C$99i){C$99u(function(){var C$99t;C$99n&&(C$99o?(C$99t=C$99r.url,C$99n.call(C$99s,C$99e,C$99i.getContent(C$99t))):C$99n.call(C$99s,C$99e,C$99i),C$99n=null),C$99i.destroy()})});C$99c.initQueueDeps(C$99e),C$99e.append(C$99l),C$99l.length=0},C$99t.flowInDeps=function(C$99i,C$99t,C$99n){for(var C$99e=C$99h.length=0;C$99e<C$99t.length;++C$99e){var C$99r,C$99s=C$99g(C$99t[C$99e]);(C$99s.url||C$99s.uuid)&&((C$99r=this._cache[C$99s.url])?C$99h.push(C$99r):C$99h.push(C$99s))}var C$99o=C$99c.create(this,C$99i?function(C$99t,C$99e,C$99i){this._ownerQueue&&this._ownerQueue.onProgress&&this._ownerQueue._childOnProgress(C$99i)}:null,function(C$99t,C$99e){C$99n(C$99t,C$99e),C$99i&&C$99i.deps&&(C$99i.deps.length=0),C$99e.destroy()}),C$99a=(C$99i&&(C$99a=C$99c.getQueue(C$99i),C$99o._ownerQueue=C$99a._ownerQueue||C$99a),C$99o.append(C$99h,C$99i));return C$99h.length=0,C$99a},C$99t._assetTables=C$99o,C$99t._getResUuid=function(C$99t,C$99e,C$99i,C$99n){C$99i=C$99o[C$99i=C$99i||"assets"];if(!C$99t||!C$99i)return null;var C$99r,C$99s=C$99t.indexOf("?"),C$99s=(-1!==C$99s&&(C$99t=C$99t.substr(0,C$99s)),C$99i.getUuid(C$99t,C$99e));return C$99s||(C$99r=cc.path.extname(C$99t))&&(C$99t=C$99t.slice(0,-C$99r.length),(C$99s=C$99i.getUuid(C$99t,C$99e))&&!C$99n&&cc.warnID(4901,C$99t,C$99r)),C$99s},C$99t._getReferenceKey=function(C$99t){var C$99e;return"object"==typeof C$99t?C$99e=C$99t._uuid||null:"string"==typeof C$99t&&(C$99e=this._getResUuid(C$99t,null,null,!0)||C$99t),C$99e?(cc.AssetLibrary._getAssetInfoInRuntime(C$99e,C$99s),this._cache[C$99s.url]?C$99s.url:C$99e):(cc.warnID(4800,C$99t),C$99e)},C$99t._urlNotFound=function(C$99e,C$99i,C$99n){C$99u(function(){C$99e=cc.url.normalize(C$99e);var C$99t=(C$99i?C$99r.getClassName(C$99i):"Asset")+' in "resources/'+C$99e+'" does not exist.';C$99n&&C$99n(new Error(C$99t),[])})},C$99t._parseLoadResArgs=function(C$99t,C$99e,C$99i){var C$99n;return void 0===C$99i&&(C$99n=C$99t instanceof Array||C$99r.isChildClassOf(C$99t,cc.RawAsset),C$99e?(C$99i=C$99e,C$99n&&(C$99e=this.onProgress||null)):void 0!==C$99e||C$99n||(C$99i=C$99t,C$99e=this.onProgress||null,C$99t=null),void 0===C$99e||C$99n||(C$99e=C$99t,C$99t=null)),{type:C$99t,onProgress:C$99e,onComplete:C$99i}},C$99t.loadRes=function(C$99t,C$99e,C$99i,C$99n,C$99r){5!==arguments.length&&(C$99r=C$99n,C$99n=C$99i,C$99i="assets");var C$99s=this._parseLoadResArgs(C$99e,C$99n,C$99r),C$99o=(C$99e=C$99s.type,C$99n=C$99s.onProgress,C$99r=C$99s.onComplete,this),C$99a=C$99o._getResUuid(C$99t,C$99e,C$99i);C$99a?this.load({type:"uuid",uuid:C$99a},C$99n,function(C$99t,C$99e){C$99e&&C$99o.setAutoReleaseRecursively(C$99a,!1),C$99r&&C$99r(C$99t,C$99e)}):C$99o._urlNotFound(C$99t,C$99e,C$99r)},C$99t._loadResUuids=function(C$99t,C$99e,C$99a,C$99c){var C$99l,C$99h;0<C$99t.length?(C$99l=this,C$99h=C$99t.map(function(C$99t){return{type:"uuid",uuid:C$99t}}),this.load(C$99h,C$99e,function(C$99t,C$99e){if(C$99a){for(var C$99i=[],C$99n=C$99c&&[],C$99r=0;C$99r<C$99h.length;++C$99r){var C$99s=C$99h[C$99r].uuid,C$99o=this._getReferenceKey(C$99s),C$99o=C$99e.getContent(C$99o);C$99o&&(C$99l.setAutoReleaseRecursively(C$99s,!1),C$99i.push(C$99o),C$99n&&C$99n.push(C$99c[C$99r]))}C$99c?C$99a(C$99t,C$99i,C$99n):C$99a(C$99t,C$99i)}})):C$99a&&C$99u(function(){C$99c?C$99a(null,[],[]):C$99a(null,[])})},C$99t.loadResArray=function(C$99t,C$99e,C$99i,C$99n,C$99r){5!==arguments.length&&(C$99r=C$99n,C$99n=C$99i,C$99i="assets");for(var C$99s=this._parseLoadResArgs(C$99e,C$99n,C$99r),C$99o=(C$99e=C$99s.type,C$99n=C$99s.onProgress,C$99r=C$99s.onComplete,[]),C$99h=C$99e instanceof Array,C$99a=0;C$99a<C$99t.length;C$99a++){var C$99c=C$99t[C$99a],C$99l=C$99h?C$99e[C$99a]:C$99e,C$99u=this._getResUuid(C$99c,C$99l,C$99i);if(!C$99u)return void this._urlNotFound(C$99c,C$99l,C$99r);C$99o.push(C$99u)}this._loadResUuids(C$99o,C$99n,C$99r)},C$99t.loadResDir=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s;5!==arguments.length&&(C$99r=C$99n,C$99n=C$99i,C$99i="assets"),C$99o[C$99i]&&(C$99e=(C$99s=this._parseLoadResArgs(C$99e,C$99n,C$99r)).type,C$99n=C$99s.onProgress,C$99r=C$99s.onComplete,C$99i=C$99o[C$99i].getUuidArray(C$99t,C$99e,C$99s=[]),this._loadResUuids(C$99i,C$99n,C$99r,C$99s))},C$99t.getRes=function(C$99t,C$99e){if(!(C$99i=this._cache[C$99t])){C$99t=this._getResUuid(C$99t,C$99e,null,!0);if(!C$99t)return null;var C$99e=this._getReferenceKey(C$99t),C$99i=this._cache[C$99e]}return(C$99i=C$99i&&C$99i.alias?C$99i.alias:C$99i)&&C$99i.complete?C$99i.content:null},C$99t.getResCount=function(){return Object.keys(this._cache).length},C$99t.getDependsRecursively=function(C$99t){var C$99e;return C$99t?(C$99t=this._getReferenceKey(C$99t),(C$99e=C$99m.getDependsRecursively(C$99t)).push(C$99t),C$99e):[]},C$99t.release=function(C$99t){var C$99e,C$99i,C$99n;if(Array.isArray(C$99t))for(var C$99r=0;C$99r<C$99t.length;C$99r++){var C$99s=C$99t[C$99r];this.release(C$99s)}else C$99t&&((C$99e=this._getReferenceKey(C$99t))&&C$99e in cc.AssetLibrary.getBuiltinDeps()||((C$99i=this.getItem(C$99e))&&(C$99n=this.removeItem(C$99e),C$99t=C$99i.content,C$99n&&this._releasedAssetChecker_DEBUG.setReleased(C$99i,C$99e)),C$99t instanceof cc.Asset&&((C$99n=C$99t.nativeUrl)&&this.release(C$99n),C$99t.destroy())))},C$99t.releaseAsset=function(C$99t){C$99t=C$99t._uuid;C$99t&&this.release(C$99t)},C$99t.releaseRes=function(C$99t,C$99e,C$99i){C$99e=this._getResUuid(C$99t,C$99e,C$99i);C$99e?this.release(C$99e):cc.errorID(4914,C$99t)},C$99t.releaseResDir=function(C$99t,C$99e,C$99i){if(C$99o[C$99i=C$99i||"assets"])for(var C$99n=C$99o[C$99i].getUuidArray(C$99t,C$99e),C$99r=0;C$99r<C$99n.length;C$99r++){var C$99s=C$99n[C$99r];this.release(C$99s)}},C$99t.releaseAll=function(){for(var C$99t in this._cache)this.release(C$99t)},C$99t.removeItem=function(C$99t){var C$99e=C$99n.prototype.removeItem.call(this,C$99t);return delete this._autoReleaseSetting[C$99t],C$99e},C$99t.setAutoRelease=function(C$99t,C$99e){C$99t=this._getReferenceKey(C$99t);C$99t&&(this._autoReleaseSetting[C$99t]=!!C$99e)},C$99t.setAutoReleaseRecursively=function(C$99t,C$99e){C$99e=!!C$99e;C$99t=this._getReferenceKey(C$99t);if(C$99t){this._autoReleaseSetting[C$99t]=C$99e;for(var C$99i=C$99m.getDependsRecursively(C$99t),C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n];this._autoReleaseSetting[C$99r]=C$99e}}},C$99t.isAutoRelease=function(C$99t){C$99t=this._getReferenceKey(C$99t);return!!C$99t&&!!this._autoReleaseSetting[C$99t]},cc.loader=new C$99e,C$99i.exports=cc.loader},{"../platform/js":209,"../platform/utils":213,"./asset-loader":137,"./asset-table":138,"./auto-release-utils":140,"./downloader":142,"./loader":145,"./loading-items":146,"./pipeline":149,"./released-asset-checker":150}],137:[function(C$99t,C$99e,C$99i){"use strict";C$99t("../utils/CCPath");function C$99n(C$99t){this.id="AssetLoader",this.async=!0,this.pipeline=null}var C$99o=C$99t("../CCDebug"),C$99r=C$99t("./pipeline"),C$99a=C$99t("./loading-items"),C$99c=(C$99n.ID="AssetLoader",[]);C$99n.prototype.handle=function(C$99n,C$99r){var C$99s=C$99n.uuid;if(!C$99s)return C$99n.content||null;cc.AssetLibrary.queryAssetInfo(C$99s,function(C$99t,C$99e,C$99i){C$99t?C$99r(C$99t):(C$99n.url=C$99n.rawUrl=C$99e,(C$99n.isRawAsset=C$99i)?(C$99t=cc.path.extname(C$99e).toLowerCase())?(C$99t=C$99t.substr(1),C$99i=C$99a.getQueue(C$99n),C$99c[0]={queueId:C$99n.queueId,id:C$99e,url:C$99e,type:C$99t,error:null,alias:C$99n,complete:!0},C$99i.append(C$99c),C$99n.type=C$99t,C$99r(null,C$99n.content)):C$99r(new Error(C$99o.getError(4931,C$99s,C$99e))):(C$99n.type="uuid",C$99r(null,C$99n.content)))})},C$99r.AssetLoader=C$99e.exports=C$99n},{"../CCDebug":27,"../utils/CCPath":253,"./loading-items":146,"./pipeline":149}],138:[function(C$99t,C$99e,C$99i){"use strict";var C$99r=C$99t("../utils/misc").pushToMap,C$99d=C$99t("../platform/js");function C$99s(C$99t,C$99e){this.uuid=C$99t,this.type=C$99e}function C$99n(){this._pathToUuid=C$99d.createMap(!0)}C$99t=C$99n.prototype;C$99t.getUuid=function(C$99t,C$99e){C$99t=cc.url.normalize(C$99t);var C$99i=this._pathToUuid[C$99t];if(C$99i)if(Array.isArray(C$99i)){if(!C$99e)return C$99i[0].uuid;for(var C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n];if(C$99d.isChildClassOf(C$99r.type,C$99e))return C$99r.uuid}if(C$99d.isChildClassOf(C$99e,cc.SpriteFrame))for(var C$99s=0;C$99s<C$99i.length;C$99s++){var C$99o=C$99i[C$99s];if(C$99d.isChildClassOf(C$99o.type,cc.SpriteAtlas)){cc.errorID(4932,C$99t);break}}}else{if(!C$99e||C$99d.isChildClassOf(C$99i.type,C$99e))return C$99i.uuid;C$99d.isChildClassOf(C$99e,cc.SpriteFrame)&&C$99d.isChildClassOf(C$99i.type,cc.SpriteAtlas)&&cc.errorID(4932,C$99t)}return""},C$99t.getUuidArray=function(C$99t,C$99e,C$99i){"/"===(C$99t=cc.url.normalize(C$99t))[C$99t.length-1]&&(C$99t=C$99t.slice(0,-1));var C$99n,C$99r,C$99s,C$99o,C$99h=this._pathToUuid,C$99a=[],C$99u=C$99d.isChildClassOf;for(C$99r in C$99h)if(C$99r.startsWith(C$99t)&&(C$99s=C$99r,C$99o=C$99t,!(C$99s.length>C$99o.length)||(46===(C$99s=C$99s.charCodeAt(C$99o.length))||47===C$99s))||!C$99t){var C$99c=C$99h[C$99r];if(Array.isArray(C$99c))for(var C$99l=0;C$99l<C$99c.length;C$99l++){var C$99_=C$99c[C$99l];!C$99e||C$99u(C$99_.type,C$99e)?(C$99a.push(C$99_.uuid),C$99i&&C$99i.push(C$99r)):C$99_.type===cc.SpriteAtlas&&(C$99n=C$99r)}else!C$99e||C$99u(C$99c.type,C$99e)?(C$99a.push(C$99c.uuid),C$99i&&C$99i.push(C$99r)):C$99c.type===cc.SpriteAtlas&&(C$99n=C$99r)}return 0===C$99a.length&&C$99n&&C$99d.isChildClassOf(C$99e,cc.SpriteFrame)&&cc.errorID(4932,C$99n),C$99a},C$99t.add=function(C$99t,C$99e,C$99i,C$99n){C$99t=C$99t.substring(0,C$99t.length-cc.path.extname(C$99t).length);C$99e=new C$99s(C$99e,C$99i);C$99r(this._pathToUuid,C$99t,C$99e,C$99n)},C$99t._getInfo_DEBUG=function(C$99t,C$99e){for(var C$99i=this._pathToUuid,C$99n=Object.keys(C$99i),C$99r=0;C$99r<C$99n.length;++C$99r){var C$99s=C$99n[C$99r],C$99o=C$99i[C$99s];if(Array.isArray(C$99o))for(var C$99a=0;C$99a<C$99o.length;C$99a++){var C$99c=C$99o[C$99a];if(C$99c.uuid===C$99t)return C$99e.path=C$99s,C$99e.type=C$99c.type,!0}else if(C$99o.uuid===C$99t)return C$99e.path=C$99s,C$99e.type=C$99o.type,!0}return!1},C$99t.reset=function(){this._pathToUuid=C$99d.createMap(!0)},C$99e.exports=C$99n},{"../platform/js":209,"../utils/misc":264}],139:[function(C$99t,C$99e,C$99l){"use strict";var C$99i=C$99t("../platform/CCSys"),C$99n=C$99t("../CCDebug"),C$99a=C$99i.__audioSupport,C$99r=C$99a.format,C$99s=C$99a.context;function C$99o(C$99e,C$99i){function C$99n(){clearTimeout(C$99r),C$99t.removeEventListener("canplaythrough",C$99s,!1),C$99t.removeEventListener("error",C$99o,!1),C$99a.USE_LOADER_EVENT&&C$99t.removeEventListener(C$99a.USE_LOADER_EVENT,C$99s,!1)}var C$99t=document.createElement("audio"),C$99r=(C$99t.src=C$99e.url,setTimeout(function(){(0===C$99t.readyState?C$99o:C$99s)()},8e3)),C$99s=function(){C$99n(),C$99i(null,C$99t)},C$99o=function(){C$99n();var C$99t="load audio failure - "+C$99e.url;cc.log(C$99t),C$99i(C$99t)};C$99t.addEventListener("canplaythrough",C$99s,!1),C$99t.addEventListener("error",C$99o,!1),C$99a.USE_LOADER_EVENT&&C$99t.addEventListener(C$99a.USE_LOADER_EVENT,C$99s,!1)}function C$99c(C$99t,C$99e){C$99s||C$99e(new Error(C$99n.getError(4926)));var C$99i=cc.loader.getXMLHttpRequest();C$99i.open("GET",C$99t.url,!0),C$99i.responseType="arraybuffer",C$99i.onload=function(){C$99s.decodeAudioData(C$99i.response,function(C$99t){C$99e(null,C$99t)},function(){C$99e("decode error - "+C$99t.id,null)})},C$99i.onerror=function(){C$99e("request error - "+C$99t.id,null)},C$99i.send()}C$99e.exports=function(C$99t,C$99e){if(0===C$99r.length)return new Error(C$99n.getError(4927));(C$99a.WEB_AUDIO?C$99t._owner instanceof cc.AudioClip?C$99t._owner.loadMode===cc.AudioClip.LoadMode.WEB_AUDIO?C$99c:C$99o:C$99t.urlParam&&C$99t.urlParam.useDom?C$99o:C$99c:C$99o)(C$99t,C$99e)}},{"../CCDebug":27,"../platform/CCSys":198}],140:[function(C$99t,C$99e,C$99i){"use strict";var C$99_=C$99t("../platform/js");function C$99s(C$99t,C$99e){C$99t=cc.loader.getItem(C$99t);if(C$99t){var C$99i=C$99t.dependKeys;if(C$99i)for(var C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n];C$99e[C$99r]||(C$99e[C$99r]=!0,C$99s(C$99r,C$99e))}}}function C$99f(C$99t,C$99e){C$99t._uuid&&(C$99e[C$99t=cc.loader._getReferenceKey(C$99t)]||(C$99e[C$99t]=!0,C$99s(C$99t,C$99e)))}function C$99p(C$99t,C$99h){for(var C$99e=0;C$99e<C$99t._components.length;C$99e++){C$99i=void 0;C$99n=void 0;C$99r=void 0;C$99s=void 0;C$99o=void 0;C$99a=void 0;C$99c=void 0;C$99u=void 0;C$99l=void 0;C$99_=void 0;var C$99i=C$99t._components[C$99e];var C$99n=C$99h;for(var C$99r=Object.getOwnPropertyNames(C$99i),C$99s=0;C$99s<C$99r.length;C$99s++){var C$99o=C$99i[C$99r[C$99s]];if("object"==typeof C$99o&&C$99o)if(Array.isArray(C$99o))for(var C$99a=0;C$99a<C$99o.length;C$99a++){var C$99c=C$99o[C$99a];C$99c instanceof cc.RawAsset&&C$99f(C$99c,C$99n)}else if(C$99o.constructor&&C$99o.constructor!==Object)C$99o instanceof cc.RawAsset&&C$99f(C$99o,C$99n);else for(var C$99u=Object.getOwnPropertyNames(C$99o),C$99l=0;C$99l<C$99u.length;C$99l++){var C$99_=C$99o[C$99u[C$99l]];C$99_ instanceof cc.RawAsset&&C$99f(C$99_,C$99n)}}}for(var C$99d=0;C$99d<C$99t._children.length;C$99d++)C$99p(C$99t._children[C$99d],C$99h)}C$99e.exports={autoRelease:function(C$99t,C$99e,C$99h){var C$99i=cc.loader._autoReleaseSetting,C$99n=C$99_.createMap();if(C$99e)for(var C$99r=0;C$99r<C$99e.length;C$99r++)C$99n[C$99e[C$99r]]=!0;for(var C$99s=0;C$99s<C$99h.length;C$99s++)C$99p(C$99h[C$99s],C$99n);if(C$99t)for(var C$99o=0;C$99o<C$99t.length;C$99o++){var C$99a=C$99t[C$99o];!1===C$99i[C$99a]||C$99n[C$99a]||cc.loader.release(C$99a)}for(var C$99u=Object.keys(C$99i),C$99c=0;C$99c<C$99u.length;C$99c++){var C$99l=C$99u[C$99c];!0!==C$99i[C$99l]||C$99n[C$99l]||cc.loader.release(C$99l)}},getDependsRecursively:function(C$99t){var C$99e={};return C$99s(C$99t,C$99e),Object.keys(C$99e)}}},{"../platform/js":209}],141:[function(C$99t,C$99e,C$99i){"use strict";C$99e.exports=function(C$99t,C$99e){var C$99t=C$99t.url,C$99i=cc.loader.getXMLHttpRequest(),C$99n="Load binary data failed: "+C$99t;C$99i.open("GET",C$99t,!0),C$99i.responseType="arraybuffer",C$99i.onload=function(){var C$99t=C$99i.response;C$99t?(C$99t=new Uint8Array(C$99t),C$99e(null,C$99t)):C$99e({status:C$99i.status,errorMessage:C$99n+"(no response)"})},C$99i.onerror=function(){C$99e({status:C$99i.status,errorMessage:C$99n+"(error)"})},C$99i.ontimeout=function(){C$99e({status:C$99i.status,errorMessage:C$99n+"(time out)"})},C$99i.send(null)}},{}],142:[function(C$99t,C$99h,C$99u){"use strict";var C$99e=C$99t("../platform/js"),C$99a=C$99t("../CCDebug"),C$99_=(C$99t("../utils/CCPath"),C$99t("./pipeline")),C$99n=C$99t("./pack-downloader"),C$99i=C$99t("./binary-downloader"),C$99r=C$99t("./text-downloader"),C$99d=C$99t("./utils").urlAppendTimestamp;function C$99s(){return null}function C$99f(C$99t,C$99e,C$99i){var C$99n=C$99t.url,C$99t=document,C$99r=document.createElement("script");function C$99s(){C$99r.parentNode.removeChild(C$99r),C$99r.removeEventListener("load",C$99s,!1),C$99r.removeEventListener("error",C$99o,!1),C$99e(null,C$99n)}function C$99o(){C$99r.parentNode.removeChild(C$99r),C$99r.removeEventListener("load",C$99s,!1),C$99r.removeEventListener("error",C$99o,!1),C$99e(new Error(C$99a.getError(4928,C$99n)))}"file:"!==window.location.protocol&&(C$99r.crossOrigin="anonymous"),C$99r.async=C$99i,C$99r.src=C$99d(C$99n),C$99r.addEventListener("load",C$99s,!1),C$99r.addEventListener("error",C$99o,!1),C$99t.body.appendChild(C$99r)}function C$99c(C$99e,C$99i,C$99t,C$99n){void 0===C$99t&&(C$99t=!0);var C$99r=C$99d(C$99e.url);if(C$99n=C$99n||new Image,C$99t&&"file:"!==window.location.protocol?C$99n.crossOrigin="anonymous":C$99n.crossOrigin=null,C$99n.complete&&0<C$99n.naturalWidth&&C$99n.src===C$99r)return C$99n;function C$99s(){C$99n.removeEventListener("load",C$99o),C$99n.removeEventListener("error",C$99s),"https:"!==window.location.protocol&&C$99n.crossOrigin&&"anonymous"===C$99n.crossOrigin.toLowerCase()?C$99c(C$99e,C$99i,!1,C$99n):C$99i(new Error(C$99a.getError(4930,C$99r)))}var C$99o=function C$99t(){C$99n.removeEventListener("load",C$99t),C$99n.removeEventListener("error",C$99s),C$99n.id=C$99e.id,C$99i(null,C$99n)};C$99n.addEventListener("load",C$99o),C$99n.addEventListener("error",C$99s),C$99n.src=C$99r}function C$99o(C$99t,C$99e){C$99e(null,C$99t.url)}function C$99l(C$99t){this.id="Downloader",this.async=!0,this.pipeline=null,this._curConcurrent=0,this._loadQueue=[],this._subpackages={},this.extMap=C$99e.mixin(C$99t,C$99p)}var C$99p={js:C$99f,png:C$99c,jpg:C$99c,bmp:C$99c,jpeg:C$99c,gif:C$99c,ico:C$99c,tiff:C$99c,webp:C$99c,image:C$99c,pvr:C$99i,pkm:C$99i,mp3:C$99t=C$99t("./audio-downloader"),ogg:C$99t,wav:C$99t,m4a:C$99t,txt:C$99r,xml:C$99r,vsh:C$99r,fsh:C$99r,atlas:C$99r,tmx:C$99r,tsx:C$99r,json:C$99r,ExportJson:C$99r,plist:C$99r,fnt:C$99r,font:C$99s,eot:C$99s,ttf:C$99s,woff:C$99s,svg:C$99s,ttc:C$99s,uuid:function(C$99t,C$99e){var C$99i=C$99n.load(C$99t,C$99e);return void 0===C$99i?this.extMap.json(C$99t,C$99e):C$99i||void 0},binary:C$99i,bin:C$99i,dbbin:C$99i,skel:C$99i,mp4:C$99o,avi:C$99o,mov:C$99o,mpg:C$99o,mpeg:C$99o,rm:C$99o,rmvb:C$99o,default:C$99r};C$99l.ID="Downloader",C$99l.PackDownloader=C$99n,C$99l.prototype.addHandlers=function(C$99t){C$99e.mixin(this.extMap,C$99t)},C$99l.prototype._handleLoadQueue=function(){for(;this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT;){var C$99t=this._loadQueue.shift();if(!C$99t)break;var C$99e=this.handle(C$99t.item,C$99t.callback);void 0!==C$99e&&(C$99e instanceof Error?C$99t.callback(C$99e):C$99t.callback(null,C$99e))}},C$99l.prototype.handle=function(C$99t,C$99i){var C$99n=this,C$99e=this.extMap[C$99t.type]||this.extMap.default,C$99r=void 0;if(this._curConcurrent<cc.macro.DOWNLOAD_MAX_CONCURRENT){if(this._curConcurrent++,void 0!==(C$99r=C$99e.call(this,C$99t,function(C$99t,C$99e){C$99n._curConcurrent=Math.max(0,C$99n._curConcurrent-1),C$99n._handleLoadQueue(),C$99i&&C$99i(C$99t,C$99e)})))return this._curConcurrent=Math.max(0,this._curConcurrent-1),this._handleLoadQueue(),C$99r}else if(C$99t.ignoreMaxConcurrency){if(void 0!==(C$99r=C$99e.call(this,C$99t,C$99i)))return C$99r}else this._loadQueue.push({item:C$99t,callback:C$99i})},C$99l.prototype.loadSubpackage=function(C$99t,C$99e,C$99i){!C$99i&&C$99e&&(C$99i=C$99e,C$99e=null);var C$99n=this._subpackages[C$99t];C$99n?C$99n.loaded?C$99i&&C$99i():C$99f({url:C$99n.path+"index.js"},function(C$99t){C$99t||(C$99n.loaded=!0),C$99i&&C$99i(C$99t)}):C$99i&&C$99i(new Error("Can't find subpackage "+C$99t))},C$99_.Downloader=C$99h.exports=C$99l},{"../CCDebug":27,"../platform/js":209,"../utils/CCPath":253,"./audio-downloader":139,"./binary-downloader":141,"./pack-downloader":148,"./pipeline":149,"./text-downloader":152,"./utils":154}],143:[function(C$99t,C$99e,C$99n){"use strict";var C$99i,C$99h=C$99t("../utils/text-utils"),C$99u=null,C$99_={},C$99d=-1,C$99f=[],C$99p=(C$99i=void 0,function(){var C$99t,C$99e;return C$99i=void 0===C$99i?!!window.FontFace&&(C$99t=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),C$99e=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor),C$99t?42<parseInt(C$99t[1],10):!C$99e):C$99i});function C$99y(){for(var C$99t=!0,C$99e=Date.now(),C$99i=C$99f.length-1;0<=C$99i;C$99i--){var C$99n,C$99r,C$99s=C$99f[C$99i],C$99o=C$99s.fontFamilyName;3e3<C$99e-C$99s.startTime?(cc.warnID(4933,C$99o),C$99s.callback(null,C$99o),C$99f.splice(C$99i,1)):(C$99n=C$99s.refWidth,C$99u.font=C$99r="40px "+C$99o,C$99n!==C$99h.safeMeasureText(C$99u,"BES bswy:->@123ä¸ãá„",C$99r)?(C$99f.splice(C$99i,1),C$99s.callback(null,C$99o)):C$99t=!1)}C$99t&&(clearInterval(C$99d),C$99d=-1)}var C$99m={loadFont:function(C$99t,C$99e){var C$99t=C$99t.url,C$99i=C$99m._getFontFamily(C$99t);if(C$99_[C$99i])return C$99i;C$99u||((C$99a=document.createElement("canvas")).width=100,C$99a.height=100,C$99u=C$99a.getContext("2d"));var C$99n,C$99r,C$99s,C$99o,C$99a="40px "+C$99i,C$99a=(C$99u.font=C$99a,C$99h.safeMeasureText(C$99u,"BES bswy:->@123ä¸ãá„",C$99a)),C$99c=document.createElement("style"),C$99l=(C$99c.type="text/css",""),C$99t=(isNaN(+C$99i)?C$99l+="@font-face { font-family:"+C$99i+"; src:":C$99l+="@font-face { font-family:'"+C$99i+"'; src:",C$99c.textContent=(C$99l+="url('"+C$99t+"');")+"}",document.body.appendChild(C$99c),document.createElement("div")),C$99l=C$99t.style;C$99l.fontFamily=C$99i,C$99t.innerHTML=".",C$99l.position="absolute",C$99l.left="-100px",C$99l.top="-100px",document.body.appendChild(C$99t),C$99p()?(C$99n=Date.now(),C$99r=C$99i,C$99s=C$99e,C$99l=new Promise(function(C$99i,C$99t){(function C$99e(){3e3<=Date.now()-C$99n?C$99t():document.fonts.load("40px "+C$99r).then(function(C$99t){1<=C$99t.length?C$99i():setTimeout(C$99e,100)},function(){C$99t()})})()}),C$99o=null,C$99t=new Promise(function(C$99t,C$99e){C$99o=setTimeout(C$99e,3e3)}),Promise.race([C$99t,C$99l]).then(function(){C$99o&&(clearTimeout(C$99o),C$99o=null),C$99s(null,C$99r)},function(){cc.warnID(4933,C$99r),C$99s(null,C$99r)})):(C$99t={fontFamilyName:C$99i,refWidth:C$99a,callback:C$99e,startTime:Date.now()},C$99f.push(C$99t),-1===C$99d&&(C$99d=setInterval(C$99y,100))),C$99_[C$99i]=C$99c},_getFontFamily:function(C$99t){var C$99e=C$99t.lastIndexOf(".ttf");if(-1===C$99e)return C$99t;var C$99i=C$99t.lastIndexOf("/"),C$99t=-1===C$99i?C$99t.substring(0,C$99e)+"_LABEL":C$99t.substring(C$99i+1,C$99e)+"_LABEL";return C$99t=-1!==C$99t.indexOf(" ")?'"'+C$99t+'"':C$99t}};C$99e.exports=C$99m},{"../utils/text-utils":271}],144:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./downloader"),C$99t("./loader"),C$99t("./loading-items"),C$99t("./pipeline"),C$99t("./CCLoader")},{"./CCLoader":136,"./downloader":142,"./loader":145,"./loading-items":146,"./pipeline":149}],145:[function(C$99t,C$99e,C$99h){"use strict";var C$99i=C$99t("../platform/js"),C$99u=C$99t("../platform/CCSAXParser").plistParser,C$99_=C$99t("./pipeline"),C$99d=C$99t("../assets/CCTexture2D"),C$99n=C$99t("./uuid-loader"),C$99t=C$99t("./font-loader");function C$99r(C$99e){if("string"!=typeof C$99e.content)return new Error("JSON Loader: Input item doesn't contain string content");try{return JSON.parse(C$99e.content)}catch(C$99t){return new Error("JSON Loader: Parse json ["+C$99e.id+"] failed : "+C$99t)}}function C$99s(C$99t){if(C$99t._owner instanceof cc.Asset)return null;var C$99e=C$99t.content;if(cc.sys.platform!==cc.sys.FB_PLAYABLE_ADS&&!(C$99e instanceof Image))return new Error("Image Loader: Input item doesn't contain Image content");var C$99i=C$99t.texture||new C$99d;return C$99i._uuid=C$99t.uuid,C$99i.url=C$99t.url,C$99i._setRawAsset(C$99t.rawUrl,!1),C$99i._nativeAsset=C$99e,C$99i}function C$99o(C$99t,C$99e){if(C$99t._owner instanceof cc.Asset)return null;var C$99i=new cc.AudioClip;return C$99i._setRawAsset(C$99t.rawUrl,!1),C$99i._nativeAsset=C$99t.content,C$99i.url=C$99t.url,C$99i}function C$99a(C$99t){return C$99t.load?C$99t.load(C$99t.content):null}function C$99c(C$99t,C$99e){return C$99t[C$99e]<<8|C$99t[C$99e+1]}function C$99l(C$99t){this.id="Loader",this.async=!0,this.pipeline=null,this.extMap=C$99i.mixin(C$99t,C$99f)}var C$99f={png:C$99s,jpg:C$99s,bmp:C$99s,jpeg:C$99s,gif:C$99s,ico:C$99s,tiff:C$99s,webp:C$99s,image:C$99s,pvr:function(C$99t){C$99t=C$99t.content instanceof ArrayBuffer?C$99t.content:C$99t.content.buffer;if(55727696!=(C$99n=new Int32Array(C$99t,0,13))[0])return new Error("Invalid magic number in PVR header");var C$99e=C$99n[7],C$99i=C$99n[6],C$99n=C$99n[12]+52;return{_data:new Uint8Array(C$99t,C$99n),_compressed:!0,width:C$99e,height:C$99i}},pkm:function(C$99t){var C$99t=C$99t.content instanceof ArrayBuffer?C$99t.content:C$99t.content.buffer,C$99e=new Uint8Array(C$99t);if(0!==(C$99i=C$99c(C$99e,6))&&1!==C$99i&&3!==C$99i)return new Error("Invalid magic number in ETC header");var C$99i=C$99c(C$99e,12),C$99n=C$99c(C$99e,14);return C$99c(C$99e,8),C$99c(C$99e,10),{_data:new Uint8Array(C$99t,16),_compressed:!0,width:C$99i,height:C$99n}},mp3:C$99o,ogg:C$99o,wav:C$99o,m4a:C$99o,json:C$99r,ExportJson:C$99r,plist:function(C$99t){return"string"!=typeof C$99t.content?new Error("Plist Loader: Input item doesn't contain string content"):C$99u.parse(C$99t.content)||new Error("Plist Loader: Parse ["+C$99t.id+"] failed")},uuid:C$99n,prefab:C$99n,fire:C$99n,scene:C$99n,binary:C$99a,dbbin:C$99a,bin:C$99a,skel:C$99a,font:C$99t.loadFont,eot:C$99t.loadFont,ttf:C$99t.loadFont,woff:C$99t.loadFont,svg:C$99t.loadFont,ttc:C$99t.loadFont,default:function(){return null}};C$99l.ID="Loader",C$99l.prototype.addHandlers=function(C$99t){this.extMap=C$99i.mixin(this.extMap,C$99t)},C$99l.prototype.handle=function(C$99t,C$99e){return(this.extMap[C$99t.type]||this.extMap.default).call(this,C$99t,C$99e)},C$99_.Loader=C$99e.exports=C$99l},{"../assets/CCTexture2D":50,"../platform/CCSAXParser":196,"../platform/js":209,"./font-loader":143,"./pipeline":149,"./uuid-loader":155}],146:[function(C$99t,C$99e,C$99i){"use strict";var C$99r=C$99t("../platform/callbacks-invoker"),C$99o=(C$99t("../utils/CCPath"),C$99t("../platform/js")),C$99_=0|998*Math.random(),C$99c=C$99o.createMap(!0),C$99s=[],C$99a={WORKING:1,COMPLETE:2,ERROR:3},C$99l=C$99o.createMap(!0);function C$99d(C$99t,C$99e){var C$99i="object"==typeof C$99t?C$99t.url:C$99t,C$99n={queueId:C$99e,id:C$99i,url:C$99i,rawUrl:void 0,urlParam:function(C$99t){if(C$99t){var C$99e,C$99t=C$99t.split("?");if(C$99t&&C$99t[0]&&C$99t[1])return C$99e={},C$99t[1].split("&").forEach(function(C$99t){C$99t=C$99t.split("=");C$99e[C$99t[0]]=C$99t[1]}),C$99e}}(C$99i),type:"",error:null,content:null,complete:!1,states:{},deps:null};if("object"==typeof C$99t&&(C$99o.mixin(C$99n,C$99t),C$99t.skips))for(var C$99r=0;C$99r<C$99t.skips.length;C$99r++){var C$99s=C$99t.skips[C$99r];C$99n.states[C$99s]=C$99a.COMPLETE}return C$99n.rawUrl=C$99n.url,C$99i&&!C$99n.type&&(C$99n.type=cc.path.extname(C$99i).toLowerCase().substr(1)),C$99n}var C$99h=[];function C$99u(C$99t,C$99e,C$99i,C$99n){C$99r.call(this),this._id=++C$99_,(C$99c[this._id]=this)._pipeline=C$99t,this._errorUrls=C$99o.createMap(!0),this._appending=!1,this._ownerQueue=null,this.onProgress=C$99i,this.onComplete=C$99n,this.map=C$99o.createMap(!0),this.completed={},this.totalCount=0,this.completedCount=0,this._pipeline?this.active=!0:this.active=!1,C$99e&&(0<C$99e.length?this.append(C$99e):this.allComplete())}C$99u.ItemState=new cc.Enum(C$99a),C$99u.create=function(C$99t,C$99e,C$99i,C$99n){void 0===C$99i?"function"==typeof C$99e&&(C$99n=C$99e,C$99e=C$99i=null):void 0===C$99n&&("function"==typeof C$99e?(C$99n=C$99i,C$99i=C$99e,C$99e=null):(C$99n=C$99i,C$99i=null));var C$99r=C$99s.pop();return C$99r?(C$99r._pipeline=C$99t,C$99r.onProgress=C$99i,C$99r.onComplete=C$99n,(C$99c[C$99r._id]=C$99r)._pipeline&&(C$99r.active=!0),C$99e&&C$99r.append(C$99e)):C$99r=new C$99u(C$99t,C$99e,C$99i,C$99n),C$99r},C$99u.getQueue=function(C$99t){return C$99t.queueId?C$99c[C$99t.queueId]:null},C$99u.itemComplete=function(C$99t){var C$99e=C$99c[C$99t.queueId];C$99e&&C$99e.itemComplete(C$99t.id)},C$99u.initQueueDeps=function(C$99t){var C$99e=C$99l[C$99t._id];C$99e?(C$99e.completed.length=0,C$99e.deps.length=0):C$99l[C$99t._id]={completed:[],deps:[]}},C$99u.registerQueueDep=function(C$99t,C$99e){var C$99i=C$99t.queueId||C$99t;if(!C$99i)return!1;C$99i=C$99l[C$99i];if(C$99i)-1===C$99i.deps.indexOf(C$99e)&&C$99i.deps.push(C$99e);else if(C$99t.id)for(var C$99n in C$99l){C$99n=C$99l[C$99n];-1!==C$99n.deps.indexOf(C$99t.id)&&-1===C$99n.deps.indexOf(C$99e)&&C$99n.deps.push(C$99e)}},C$99u.finishDep=function(C$99t){for(var C$99e in C$99l){C$99e=C$99l[C$99e];-1!==C$99e.deps.indexOf(C$99t)&&-1===C$99e.completed.indexOf(C$99t)&&C$99e.completed.push(C$99t)}};C$99t=C$99u.prototype;C$99o.mixin(C$99t,C$99r.prototype),C$99t.append=function(C$99t,C$99e){if(!this.active)return[];C$99e&&!C$99e.deps&&(C$99e.deps=[]),this._appending=!0;for(var C$99i,C$99n,C$99r,C$99s,C$99o=[],C$99a=0;C$99a<C$99t.length;++C$99a)!(C$99r=C$99t[C$99a]).queueId||this.map[C$99r.id]?"string"==typeof((C$99s=C$99r).url||C$99s)&&(C$99n=(C$99s=C$99d(C$99r,this._id)).id,this.map[C$99n]||(this.map[C$99n]=C$99s,this.totalCount++,C$99e&&C$99e.deps.push(C$99s),C$99u.registerQueueDep(C$99e||this._id,C$99n),C$99o.push(C$99s))):(this.map[C$99r.id]=C$99r,C$99e&&C$99e.deps.push(C$99r),C$99r.complete||function C$99t(C$99e,C$99i,C$99n){if(C$99e&&C$99i){var C$99r=!1;if(C$99h.push(C$99i.id),C$99i.deps)for(var C$99s,C$99o=C$99i.deps,C$99a=0;C$99a<C$99o.length;C$99a++){if((C$99s=C$99o[C$99a]).id===C$99e.id){C$99r=!0;break}if(!(0<=C$99h.indexOf(C$99s.id))&&C$99s.deps&&C$99t(C$99e,C$99s,!0)){C$99r=!0;break}}return C$99n||(C$99h.length=0),C$99r}}(C$99e,C$99r)?(this.totalCount++,this.itemComplete(C$99r.id)):(C$99i=this,(C$99n=C$99c[C$99r.queueId])&&(this.totalCount++,C$99u.registerQueueDep(C$99e||this._id,C$99r.id),C$99n.addListener(C$99r.id,function(C$99t){C$99i.itemComplete(C$99t.id)}))));return this._appending=!1,this.completedCount===this.totalCount?this.allComplete():this._pipeline.flowIn(C$99o),C$99o},C$99t._childOnProgress=function(C$99t){var C$99e;this.onProgress&&(C$99e=C$99l[this._id],this.onProgress(C$99e?C$99e.completed.length:this.completedCount,C$99e?C$99e.deps.length:this.totalCount,C$99t))},C$99t.allComplete=function(){var C$99t=C$99o.isEmptyObject(this._errorUrls)?null:this._errorUrls;this.onComplete&&this.onComplete(C$99t,this)},C$99t.isCompleted=function(){return this.completedCount>=this.totalCount},C$99t.isItemCompleted=function(C$99t){return!!this.completed[C$99t]},C$99t.exists=function(C$99t){return!!this.map[C$99t]},C$99t.getContent=function(C$99t){var C$99t=this.map[C$99t],C$99e=null;return C$99t&&(C$99t.content?C$99e=C$99t.content:C$99t.alias&&(C$99e=C$99t.alias.content)),C$99e},C$99t.getError=function(C$99t){var C$99t=this.map[C$99t],C$99e=null;return C$99t&&(C$99t.error?C$99e=C$99t.error:C$99t.alias&&(C$99e=C$99t.alias.error)),C$99e},C$99t.addListener=C$99r.prototype.on,C$99t.hasListener=C$99r.prototype.hasEventListener,C$99t.removeListener=C$99r.prototype.off,C$99t.removeAllListeners=C$99r.prototype.removeAll,C$99t.removeItem=function(C$99t){var C$99e=this.map[C$99t];C$99e&&this.completed[C$99e.alias||C$99t]&&(delete this.completed[C$99t],delete this.map[C$99t],C$99e.alias&&(delete this.completed[C$99e.alias.id],delete this.map[C$99e.alias.id]),this.completedCount--,this.totalCount--)},C$99t.itemComplete=function(C$99t){var C$99e,C$99i=this.map[C$99t];C$99i&&(C$99e=C$99t in this._errorUrls,C$99i.error instanceof Error||C$99o.isString(C$99i.error)?this._errorUrls[C$99t]=C$99i.error:C$99i.error?C$99o.mixin(this._errorUrls,C$99i.error):!C$99i.error&&C$99e&&delete this._errorUrls[C$99t],this.completed[C$99t]=C$99i,this.completedCount++,C$99u.finishDep(C$99i.id),this.onProgress&&(C$99e=C$99l[this._id],this.onProgress(C$99e?C$99e.completed.length:this.completedCount,C$99e?C$99e.deps.length:this.totalCount,C$99i)),this.emit(C$99t,C$99i),this.removeAll(C$99t),!this._appending&&this.completedCount>=this.totalCount&&this.allComplete())},C$99t.destroy=function(){this.active=!1,this._appending=!1,this._pipeline=null,this._ownerQueue=null,C$99o.clear(this._errorUrls),this.onProgress=null,this.onComplete=null,this.map=C$99o.createMap(!0),this.completed={},this.totalCount=0,this.completedCount=0,C$99r.call(this),C$99l[this._id]&&(C$99l[this._id].completed.length=0,C$99l[this._id].deps.length=0),delete C$99c[this._id],delete C$99l[this._id],-1===C$99s.indexOf(this)&&C$99s.length<10&&C$99s.push(this)},cc.LoadingItems=C$99e.exports=C$99u},{"../platform/callbacks-invoker":202,"../platform/js":209,"../utils/CCPath":253}],147:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e,C$99i){this.id="MD5Pipe",this.async=!1,this.pipeline=null,this.md5AssetsMap=C$99t,this.md5NativeAssetsMap=C$99e,this.libraryBase=C$99i}var C$99t=C$99t("./pipeline"),C$99r=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-]{8,})/;C$99n.ID="MD5Pipe",C$99n.prototype.handle=function(C$99t){return C$99t.url=this.transformURL(C$99t.url),null},C$99n.prototype.transformURL=function(C$99t){var C$99i=!C$99t.startsWith(this.libraryBase)?this.md5NativeAssetsMap:this.md5AssetsMap;return C$99t=C$99t.replace(C$99r,function(C$99t,C$99e){C$99e=C$99i[C$99e];return C$99e?C$99t+"."+C$99e:C$99t})},C$99t.MD5Pipe=C$99e.exports=C$99n},{"./pipeline":149}],148:[function(C$99t,C$99e,C$99i){"use strict";var C$99s=C$99t("./unpackers"),C$99d=C$99t("../utils/misc").pushToMap,C$99o=0,C$99r=2,C$99a=3;function C$99f(){this.unpacker=null,this.state=C$99o,this.duration=0}var C$99c={},C$99l={},C$99h={},C$99u=[],C$99_=null;function C$99p(C$99t,C$99e){return new Error("Can not retrieve "+C$99t+" from packer "+C$99e)}C$99e.exports={msToRelease:12e4,initPacks:function(C$99t){for(var C$99e in C$99c={},C$99l=C$99t)for(var C$99i=C$99t[C$99e],C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n],C$99s=1===C$99i.length;C$99d(C$99c,C$99r,C$99e,C$99s)}},_loadNewPack:function(C$99i,C$99n,C$99r){var C$99s=this,C$99o=cc.AssetLibrary.getLibUrlNoExt(C$99n)+".json";cc.loader.load({url:C$99o,ignoreMaxConcurrency:!0},function(C$99t,C$99e){if(C$99t)return cc.errorID(4916,C$99i),C$99r(C$99t);C$99h[C$99n].url=C$99o;C$99t=C$99s._doLoadNewPack(C$99i,C$99n,C$99e);C$99t?C$99r(null,C$99t):C$99r(C$99p(C$99i,C$99n))})},_doPreload:function(C$99t,C$99e){var C$99i=C$99h[C$99t];C$99i||((C$99i=C$99h[C$99t]=new C$99f).state=C$99r),C$99i.state!==C$99a&&(C$99i.unpacker=new C$99s.JsonUnpacker,C$99i.unpacker.load(C$99l[C$99t],C$99e),C$99i.state=C$99a)},_doLoadNewPack:function(C$99t,C$99e,C$99i){var C$99n,C$99r=C$99h[C$99e];return C$99r.state!==C$99a&&("string"==typeof C$99i&&(C$99i=JSON.parse(C$99i)),Array.isArray(C$99i)?C$99r.unpacker=new C$99s.JsonUnpacker:C$99i.type===C$99s.TextureUnpacker.ID&&(C$99r.unpacker=new C$99s.TextureUnpacker),C$99r.unpacker.load(C$99l[C$99e],C$99i),C$99r.state=C$99a,C$99r.duration=0,C$99u.push(C$99e),C$99n=this,C$99_=C$99_||setInterval(function(){for(var C$99t=C$99n.msToRelease/5e3,C$99e=C$99u.length-1;0<=C$99e;C$99e--){var C$99i=C$99u[C$99e];++C$99h[C$99i].duration>C$99t&&C$99n.release(C$99i)}0===C$99u.length&&(clearInterval(C$99_),C$99_=null)},5e3)),C$99r.unpacker.retrieve(C$99t)},_selectLoadedPack:function(C$99t){for(var C$99e=C$99o,C$99i="",C$99n=0;C$99n<C$99t.length;C$99n++){var C$99r=C$99t[C$99n],C$99s=C$99h[C$99r];if(C$99s){C$99s=C$99s.state;if(C$99s===C$99a)return C$99r;C$99e<C$99s&&(C$99e=C$99s,C$99i=C$99r)}}return C$99e!==C$99o?C$99i:C$99t[0]},load:function(C$99t,C$99e){var C$99i,C$99t=C$99t.uuid,C$99n=C$99c[C$99t];if(C$99n)return Array.isArray(C$99n)&&(C$99n=this._selectLoadedPack(C$99n)),C$99i=C$99h[C$99n],C$99i&&C$99i.state===C$99a?(C$99i.duration=0,C$99i.unpacker.retrieve(C$99t)||C$99p(C$99t,C$99n)):(C$99i||(console.log("Create unpacker %s for %s",C$99n,C$99t),(C$99i=C$99h[C$99n]=new C$99f).state=C$99r),this._loadNewPack(C$99t,C$99n,C$99e),null)},release:function(C$99t){var C$99e=C$99h[C$99t];C$99e&&(cc.loader.release(C$99e.url),delete C$99h[C$99t],cc.js.array.fastRemove(C$99u,C$99t))}}},{"../utils/misc":264,"./unpackers":153}],149:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../platform/js"),C$99r=C$99t("./loading-items"),C$99a=C$99r.ItemState;function C$99s(C$99t){this._pipes=C$99t,this._cache=C$99n.createMap(!0);for(var C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e];C$99i.handle&&C$99i.id&&(C$99i.pipeline=this,C$99i.next=C$99e<C$99t.length-1?C$99t[C$99e+1]:null)}}C$99s.ItemState=C$99a;C$99t=C$99s.prototype;C$99t.insertPipe=function(C$99t,C$99e){var C$99i,C$99n;!C$99t.handle||!C$99t.id||C$99e>this._pipes.length?cc.warnID(4921):0<this._pipes.indexOf(C$99t)?cc.warnID(4922):(C$99i=null,C$99e<(C$99t.pipeline=this)._pipes.length&&(C$99i=this._pipes[C$99e]),C$99n=null,(C$99n=0<C$99e?this._pipes[C$99e-1]:C$99n)&&(C$99n.next=C$99t),C$99t.next=C$99i,this._pipes.splice(C$99e,0,C$99t))},C$99t.insertPipeAfter=function(C$99t,C$99e){C$99t=this._pipes.indexOf(C$99t);C$99t<0||this.insertPipe(C$99e,C$99t+1)},C$99t.appendPipe=function(C$99t){C$99t.handle&&C$99t.id&&(C$99t.pipeline=this,C$99t.next=null,0<this._pipes.length&&(this._pipes[this._pipes.length-1].next=C$99t),this._pipes.push(C$99t))},C$99t.flowIn=function(C$99t){var C$99e,C$99i,C$99n=this._pipes[0];if(C$99n){for(C$99e=0;C$99e<C$99t.length;C$99e++)C$99i=C$99t[C$99e],this._cache[C$99i.id]=C$99i;for(C$99e=0;C$99e<C$99t.length;C$99e++)(function C$99i(C$99t,C$99n){var C$99r=C$99t.id,C$99e=C$99n.states[C$99r],C$99s=C$99t.next,C$99o=C$99t.pipeline;C$99n.error||C$99e===C$99a.WORKING||C$99e===C$99a.ERROR||(C$99e===C$99a.COMPLETE?C$99s?C$99i(C$99s,C$99n):C$99o.flowOut(C$99n):(C$99n.states[C$99r]=C$99a.WORKING,(C$99e=C$99t.handle(C$99n,function(C$99t,C$99e){C$99t?(C$99n.error=C$99t,C$99n.states[C$99r]=C$99a.ERROR,C$99o.flowOut(C$99n)):(C$99e&&(C$99n.content=C$99e),C$99n.states[C$99r]=C$99a.COMPLETE,C$99s?C$99i(C$99s,C$99n):C$99o.flowOut(C$99n))}))instanceof Error?(C$99n.error=C$99e,C$99n.states[C$99r]=C$99a.ERROR,C$99o.flowOut(C$99n)):void 0!==C$99e&&(null!==C$99e&&(C$99n.content=C$99e),C$99n.states[C$99r]=C$99a.COMPLETE,C$99s?C$99i(C$99s,C$99n):C$99o.flowOut(C$99n))))})(C$99n,C$99i=C$99t[C$99e])}else for(C$99e=0;C$99e<C$99t.length;C$99e++)this.flowOut(C$99t[C$99e])},C$99t.flowInDeps=function(C$99t,C$99e,C$99i){return C$99r.create(this,function(C$99t,C$99e){C$99i(C$99t,C$99e),C$99e.destroy()}).append(C$99e,C$99t)},C$99t.flowOut=function(C$99t){C$99t.error?delete this._cache[C$99t.id]:this._cache[C$99t.id]||(this._cache[C$99t.id]=C$99t),C$99t.complete=!0,C$99r.itemComplete(C$99t)},C$99t.copyItemStates=function(C$99t,C$99e){if(C$99e instanceof Array)for(var C$99i=0;C$99i<C$99e.length;++C$99i)C$99e[C$99i].states=C$99t.states;else C$99e.states=C$99t.states},C$99t.getItem=function(C$99t){C$99t=this._cache[C$99t];return C$99t&&(C$99t.alias||C$99t)},C$99t.removeItem=function(C$99t){var C$99e=this._cache[C$99t];return C$99e&&C$99e.complete&&delete this._cache[C$99t],C$99e},C$99t.clear=function(){for(var C$99t in this._cache){var C$99e=this._cache[C$99t];delete this._cache[C$99t],C$99e.complete||(C$99e.error=new Error("Canceled manually"),this.flowOut(C$99e))}},cc.Pipeline=C$99e.exports=C$99s},{"../platform/js":209,"./loading-items":146}],150:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){this._releasedKeys=C$99c.createMap(!0),this._dirty=!1}function C$99a(C$99t,C$99e,C$99i){C$99i[C$99t]||cc.log('"'+C$99t+'" was released but maybe still referenced by '+((C$99i=C$99e).uuid?(C$99r=C$99r||{path:"",type:null},cc.loader._assetTables.assets._getInfo_DEBUG(C$99i.uuid,C$99r)?(C$99r.path="resources/"+C$99r.path,'"'+C$99r.path+'" (type: '+C$99c.getClassName(C$99r.type)+", uuid: "+C$99i.uuid+")"):'"'+C$99i.rawUrl+'" ('+C$99i.uuid+")"):'"'+C$99i.rawUrl+'"'))}var C$99c=C$99t("../platform/js"),C$99r=(C$99n.prototype.setReleased=function(C$99t,C$99e){this._releasedKeys[C$99e]=!0,this._dirty=!0},null);C$99n.prototype.checkCouldRelease=function(C$99t){if(this._dirty){this._dirty=!1;var C$99e,C$99i=this._releasedKeys;for(C$99e in C$99t){var C$99n=C$99t[C$99e],C$99r=(C$99n=C$99n.alias?C$99n.alias:C$99n).dependKeys;if(C$99r)for(var C$99s=0;C$99s<C$99r.length;++C$99s){var C$99o=C$99r[C$99s];C$99i[C$99o]&&(C$99a(C$99o,C$99n,C$99t),delete C$99i[C$99o])}}C$99c.clear(C$99i)}},C$99e.exports=C$99n},{"../platform/js":209}],151:[function(C$99t,C$99e,C$99i){"use strict";var C$99t=C$99t("./pipeline"),C$99n=/.*[/\\][0-9a-fA-F]{2}[/\\]([0-9a-fA-F-]{8,})/;function C$99r(C$99t){for(var C$99e in this.id="SubPackPipe",this.async=!1,this.pipeline=null,C$99t){var C$99i=C$99t[C$99e];C$99i.uuids&&C$99i.uuids.forEach(function(C$99t){C$99s[C$99t]=C$99i.path})}}var C$99s=Object.create(null);C$99r.ID="SubPackPipe",C$99r.prototype.handle=function(C$99t){return C$99t.url=this.transformURL(C$99t.url),null},C$99r.prototype.transformURL=function(C$99t){var C$99e=(C$99e=(C$99e=C$99t).match(C$99n))?C$99e[1]:"";if(C$99e){C$99e=C$99s[C$99e];if(C$99e)return C$99t.replace("res/raw-assets/",C$99e+"raw-assets/")}return C$99t},C$99t.SubPackPipe=C$99e.exports=C$99r},{"./pipeline":149}],152:[function(C$99t,C$99e,C$99i){"use strict";var C$99r=C$99t("./utils").urlAppendTimestamp;C$99e.exports=function(C$99t,C$99e){var C$99t=C$99t.url,C$99t=C$99r(C$99t),C$99i=cc.loader.getXMLHttpRequest(),C$99n="Load text file failed: "+C$99t;C$99i.open("GET",C$99t,!0),C$99i.overrideMimeType&&C$99i.overrideMimeType("text/plain; charset=utf-8"),C$99i.onload=function(){4===C$99i.readyState?200===C$99i.status||0===C$99i.status?C$99e(null,C$99i.responseText):C$99e({status:C$99i.status,errorMessage:C$99n+"(wrong status)"}):C$99e({status:C$99i.status,errorMessage:C$99n+"(wrong readyState)"})},C$99i.onerror=function(){C$99e({status:C$99i.status,errorMessage:C$99n+"(error)"})},C$99i.ontimeout=function(){C$99e({status:C$99i.status,errorMessage:C$99n+"(time out)"})},C$99i.send(null)}},{"./utils":154}],153:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../assets/CCTexture2D"),C$99t=C$99t("../platform/js");function C$99r(){this.jsons={}}function C$99s(){this.contents={}}C$99r.prototype.load=function(C$99t,C$99e){C$99e.length!==C$99t.length&&cc.errorID(4915);for(var C$99i=0;C$99i<C$99t.length;C$99i++){var C$99n=C$99t[C$99i],C$99r=C$99e[C$99i];this.jsons[C$99n]=C$99r}},C$99r.prototype.retrieve=function(C$99t){return this.jsons[C$99t]||null},C$99s.ID=C$99t._getClassId(C$99n),C$99s.prototype.load=function(C$99t,C$99e){var C$99i=C$99e.data.split("|");C$99i.length!==C$99t.length&&cc.errorID(4915);for(var C$99n=0;C$99n<C$99t.length;C$99n++)this.contents[C$99t[C$99n]]=C$99i[C$99n]},C$99s.prototype.retrieve=function(C$99t){C$99t=this.contents[C$99t];return C$99t?{__type__:C$99s.ID,content:C$99t}:null},C$99e.exports={JsonUnpacker:C$99r,TextureUnpacker:C$99s}},{"../assets/CCTexture2D":50,"../platform/js":209}],154:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=/\?/;C$99e.exports={urlAppendTimestamp:function(C$99t){return cc.game.config.noCache&&"string"==typeof C$99t&&(C$99n.test(C$99t)?C$99t+="&_t="+ +new Date:C$99t+="?_t="+ +new Date),C$99t}}},{}],155:[function(C$99t,C$99e,C$99i){"use strict";var C$99a=C$99t("../platform/js"),C$99c=C$99t("../CCDebug"),C$99p=(C$99t("../platform/deserialize"),C$99t("./loading-items"));function C$99l(C$99t){return C$99t&&(C$99t[0]&&"cc.Scene"===C$99t[0].__type__||C$99t[1]&&"cc.Scene"===C$99t[1].__type__||C$99t[0]&&"cc.Prefab"===C$99t[0].__type__)}function C$99n(C$99e,C$99t){if("string"==typeof C$99e.content)try{C$99o=JSON.parse(C$99e.content)}catch(C$99t){return new Error(C$99c.getError(4923,C$99e.id,C$99t.stack))}else{if("object"!=typeof C$99e.content)return new Error(C$99c.getError(4924));C$99o=C$99e.content}var C$99i,C$99n=C$99l(C$99o),C$99r=C$99n?cc._MissingScript.safeFindClass:function(C$99t){var C$99e=C$99a._getClassById(C$99t);return C$99e||(cc.warnID(4903,C$99t),Object)},C$99s=cc.deserialize.Details.pool.get();try{C$99i=cc.deserialize(C$99o,C$99s,{classFinder:C$99r,target:C$99e.existingAsset,customEnv:C$99e})}catch(C$99t){cc.deserialize.Details.pool.put(C$99s);var C$99o=C$99t.stack;return new Error(C$99c.getError(4925,C$99e.id,C$99o))}C$99i._uuid=C$99e.uuid,C$99i.url=C$99i.nativeUrl,C$99r=C$99i,C$99o=C$99n,(C$99n=(C$99n=C$99e).deferredLoadRaw)?C$99r instanceof cc.Asset&&C$99r.constructor.preventDeferredLoadDependents&&(C$99n=!1):C$99o&&(C$99r instanceof cc.SceneAsset||C$99r instanceof cc.Prefab)&&(C$99n=C$99r.asyncLoadAssets);var C$99u,C$99_,C$99f,C$99d,C$99r=function(C$99h,C$99t,C$99e,C$99u){var C$99i,C$99n,C$99r=C$99e.uuidList,C$99s=C$99e.uuidObjList,C$99o=C$99e.uuidPropList,C$99a=C$99e._stillUseUrl,C$99_=C$99h.dependKeys=[];if(C$99u)for(C$99i=[],C$99n=0;C$99n<C$99r.length;C$99n++){var C$99c=C$99r[C$99n],C$99d=C$99s[C$99n],C$99f=C$99o[C$99n],C$99l=cc.AssetLibrary._getAssetInfoInRuntime(C$99c);C$99l.raw?(C$99l=C$99l.url,C$99d[C$99f]=C$99l,C$99_.push(C$99l)):C$99i.push({type:"uuid",uuid:C$99c,deferredLoadRaw:!0,_owner:C$99d,_ownerProp:C$99f,_stillUseUrl:C$99a[C$99n]})}else{for(C$99i=new Array(C$99r.length),C$99n=0;C$99n<C$99r.length;C$99n++)C$99c=C$99r[C$99n],C$99i[C$99n]={type:"uuid",uuid:C$99c,_owner:C$99s[C$99n],_ownerProp:C$99o[C$99n],_stillUseUrl:C$99a[C$99n]};C$99t._native&&!C$99t.constructor.preventPreloadNativeObject&&C$99i.push({url:C$99t.nativeUrl,_owner:C$99t,_ownerProp:"_nativeAsset"})}return C$99i}(C$99e,C$99i,C$99s,C$99n);if(cc.deserialize.Details.pool.put(C$99s),0===C$99r.length)return C$99i.onLoad&&C$99i.onLoad(),C$99t(null,C$99i);C$99n=this.pipeline,C$99u=C$99i,C$99_=C$99r,C$99f=C$99t,(C$99s=C$99e).content=C$99u,C$99d=C$99s.dependKeys,C$99n.flowInDeps(C$99s,C$99_,function(C$99t,C$99h){var C$99e,C$99i=C$99h.map;for(C$99e in C$99i)(C$99s=C$99i[C$99e]).uuid&&C$99s.content&&(C$99s.content._uuid=C$99s.uuid);function C$99n(C$99t){var C$99e=C$99t.content;this._stillUseUrl&&(C$99e=C$99e&&cc.RawAsset.wasRawAssetType(C$99e.constructor)?C$99e.nativeUrl:C$99t.rawUrl),"_nativeAsset"===this._ownerProp&&(this._owner.url=C$99t.url),this._owner[this._ownerProp]=C$99e,C$99t.uuid!==C$99u._uuid&&C$99d.indexOf(C$99t.id)<0&&C$99d.push(C$99t.id)}for(var C$99r=0;C$99r<C$99_.length;C$99r++){var C$99s,C$99o,C$99a=C$99_[C$99r],C$99c=C$99a.uuid,C$99l=C$99a.url;C$99a._owner,C$99a._ownerProp;(C$99s=C$99i[C$99l])&&(C$99l=C$99a,C$99s.complete||C$99s.content?C$99s.error?cc._throw(C$99s.error.message||C$99s.error.errorMessage||C$99s.error):C$99n.call(C$99l,C$99s):(C$99o=(C$99a=C$99p.getQueue(C$99s))._callbackTable[C$99c])?C$99o.unshift(C$99n,C$99l):C$99a.addListener(C$99c,C$99n,C$99l))}if(!C$99t&&C$99u.onLoad)try{C$99u.onLoad()}catch(C$99t){cc._throw(C$99t)}C$99f(C$99t,C$99u)})}(C$99e.exports=C$99n).isSceneObj=C$99l},{"../CCDebug":27,"../platform/deserialize":204,"../platform/js":209,"./loading-items":146}],156:[function(C$99t,C$99e,C$99r){"use strict";var C$99l=C$99i(C$99t("../../renderer/core/input-assembler")),C$99g=C$99i(C$99t("../../renderer/gfx")),C$99h=C$99t("./mesh-data");function C$99i(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}var C$99u=C$99t("../renderer"),C$99t=C$99t("../event/event-target");function C$99x(C$99t,C$99e,C$99i){C$99t[C$99e]=C$99i._val}function C$99b(C$99t,C$99e,C$99i){C$99t[C$99e]=C$99i.x,C$99t[C$99e+1]=C$99i.y}function C$99A(C$99t,C$99e,C$99i){C$99t[C$99e]=C$99i.x,C$99t[C$99e+1]=C$99i.y,C$99t[C$99e+2]=C$99i.z}var C$99y={5120:"getInt8",5121:"getUint8",5122:"getInt16",5123:"getUint16",5124:"getInt32",5125:"getUint32",5126:"getFloat32"},C$99C={5120:"setInt8",5121:"setUint8",5122:"setInt16",5123:"setUint16",5124:"setInt32",5125:"setUint32",5126:"setFloat32"},C$99v=(C$99n=new ArrayBuffer(2),new DataView(C$99n).setInt16(0,256,!0),256===new Int16Array(C$99n)[0]),C$99n=cc.Class({name:"cc.Mesh",extends:cc.Asset,mixins:[C$99t],properties:{_nativeAsset:{override:!0,get:function(){return this._buffer},set:function(C$99t){this._buffer=ArrayBuffer.isView(C$99t)?C$99t.buffer:C$99t,this.initWithBuffer()}},_vertexBundles:{default:null,type:C$99h.VertexBundle},_primitives:{default:null,Primitive:C$99h.Primitive},_minPos:cc.v3(),_maxPos:cc.v3(),subMeshes:{get:function(){return this._subMeshes},set:function(C$99t){this._subMeshes=C$99t}},subDatas:{get:function(){return this._subDatas}}},ctor:function(){this._subMeshes=[],this.loaded=!1,this._subDatas=[]},initWithBuffer:function(){this._subMeshes.length=0;for(var C$99t=this._primitives,C$99e=0;C$99e<C$99t.length;C$99e++){var C$99i=C$99t[C$99e],C$99n=C$99i.data,C$99n=new Uint8Array(this._buffer,C$99n.offset,C$99n.length),C$99r=this._vertexBundles[C$99i.vertexBundleIndices[0]],C$99s=C$99r.data,C$99r=new C$99g.default.VertexFormat(C$99r.formats),C$99o=new Uint8Array(this._buffer,C$99s.offset,C$99s.length),C$99a=this._canVertexFormatBatch(C$99r),C$99c=new C$99h.MeshData,C$99s=(C$99c.vData=C$99o,C$99c.iData=C$99n,C$99c.vfm=C$99r,C$99c.offset=C$99s.offset,C$99c.canBatch=C$99a,this._subDatas.push(C$99c),new C$99g.default.VertexBuffer(C$99u.device,C$99r,C$99g.default.USAGE_STATIC,C$99o)),C$99a=new C$99g.default.IndexBuffer(C$99u.device,C$99i.indexUnit,C$99g.default.USAGE_STATIC,C$99n);this._subMeshes.push(new C$99l.default(C$99s,C$99a))}this.loaded=!0,this.emit("load")},_canVertexFormatBatch:function(C$99t){var C$99e=C$99t._attr2el[C$99g.default.ATTR_POSITION];return!C$99e||C$99e.type===C$99g.default.ATTR_TYPE_FLOAT32&&C$99t._bytes%4==0},init:function(C$99t,C$99e,C$99i,C$99n){void 0===C$99i&&(C$99i=!1),void 0===C$99n&&(C$99n=0);var C$99e=new Uint8Array(C$99t._bytes*C$99e),C$99r=new C$99h.MeshData,C$99t=(C$99r.vData=C$99e,C$99r.vfm=C$99t,C$99r.vDirty=!0,C$99r.canBatch=this._canVertexFormatBatch(C$99t),new C$99g.default.VertexBuffer(C$99u.device,C$99t,C$99i?C$99g.default.USAGE_DYNAMIC:C$99g.default.USAGE_STATIC,C$99e)),C$99i=(C$99r.vb=C$99t,this._subMeshes[C$99n]=new C$99l.default(C$99r.vb),this._subDatas[C$99n]);C$99i&&(C$99i.vb&&C$99i.vb.destroy(),C$99i.ib&&C$99i.ib.destroy()),this._subDatas[C$99n]=C$99r,this.loaded=!0,this.emit("load"),this.emit("init-format")},setVertices:function(C$99t,C$99e,C$99i){var C$99i=this._subDatas[C$99i=C$99i||0],C$99n=C$99i.vfm.element(C$99t);if(!C$99n)return cc.warn("Cannot find "+C$99t+" attribute in vertex defines.");var C$99r,C$99h="number"==typeof C$99e[0],C$99s=C$99n.num,C$99o=C$99h?C$99e.length/C$99s|0:C$99e.length,C$99o=(C$99i.vData.byteLength<C$99o*C$99n.stride&&C$99i.setVData(new Uint8Array(C$99o*C$99i.vfm._bytes)),4),C$99u=(C$99t===C$99g.default.ATTR_COLOR?C$99h?(C$99r=C$99i.getVData(),C$99o=1):C$99r=C$99i.getVData(Uint32Array):C$99r=C$99i.getVData(Float32Array),C$99n.stride/C$99o),C$99_=C$99n.offset/C$99o;if(C$99h)for(var C$99a=0,C$99d=C$99e.length/C$99s;C$99a<C$99d;C$99a++)for(var C$99f=C$99a*C$99s,C$99p=C$99a*C$99u+C$99_,C$99c=0;C$99c<C$99s;C$99c++)C$99r[C$99p+C$99c]=C$99e[C$99f+C$99c];else for(var C$99m=C$99t===C$99g.default.ATTR_COLOR?C$99x:2===C$99s?C$99b:C$99A,C$99l=0,C$99y=C$99e.length;C$99l<C$99y;C$99l++)C$99m(C$99r,C$99l*C$99u+C$99_,C$99e[C$99l]);C$99i.vDirty=!0},setIndices:function(C$99t,C$99e,C$99i){C$99e=C$99e||0;var C$99n=C$99t,C$99t=(C$99t instanceof Uint16Array?C$99n=new Uint8Array(C$99t.buffer,C$99t.byteOffset,C$99t.byteLength):Array.isArray(C$99t)&&(C$99n=new Uint16Array(C$99t),C$99n=new Uint8Array(C$99n.buffer,C$99n.byteOffset,C$99n.byteLength)),C$99i?C$99g.default.USAGE_DYNAMIC:C$99g.default.USAGE_STATIC),C$99i=this._subDatas[C$99e];C$99i.ib?(C$99i.iData=C$99n,C$99i.iDirty=!0):(C$99i.iData=C$99n,C$99t=new C$99g.default.IndexBuffer(C$99u.device,C$99g.default.INDEX_FMT_UINT16,C$99t,C$99n,C$99n.byteLength/C$99g.default.IndexBuffer.BYTES_PER_INDEX[C$99g.default.INDEX_FMT_UINT16]),C$99i.ib=C$99t,this._subMeshes[C$99e]._indexBuffer=C$99i.ib)},setPrimitiveType:function(C$99t,C$99e){this._subMeshes[C$99e=C$99e||0]?this._subMeshes[C$99e]._primitiveType=C$99t:cc.warn("Do not have sub mesh at index "+C$99e)},clear:function(){this._subMeshes.length=0;for(var C$99t=this._subDatas,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e].vb,C$99n=(C$99n&&C$99n.destroy(),C$99t[C$99e].ib);C$99n&&C$99n.destroy()}C$99t.length=0},setBoundingBox:function(C$99t,C$99e){this._minPos=C$99t,this._maxPos=C$99e},destroy:function(){this.clear()},_uploadData:function(){for(var C$99t=this._subDatas,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n,C$99r,C$99s=C$99t[C$99e];C$99s.vDirty&&(C$99n=C$99s.vb,C$99r=C$99s.vData,C$99n.update(0,C$99r),C$99s.vDirty=!1),C$99s.iDirty&&(C$99n=C$99s.ib,C$99r=C$99s.iData,C$99n.update(0,C$99r),C$99s.iDirty=!1)}},_getAttrMeshData:function(C$99t,C$99e){C$99t=this._subDatas[C$99t];if(!C$99t)return[];var C$99i=C$99t.vfm,C$99n=C$99i.element(C$99e);if(!C$99n)return[];C$99t.attrDatas||(C$99t.attrDatas={});var C$99r=C$99t.attrDatas;if(C$99s=C$99r[C$99e])return C$99s;for(var C$99s=C$99r[C$99e]=[],C$99r=C$99t.vData,C$99o=new DataView(C$99r.buffer,C$99r.byteOffset,C$99r.byteLength),C$99h=C$99n.stride,C$99u=C$99n.offset,C$99a=C$99n.num,C$99_=C$99n.bytes/C$99a,C$99d=C$99y[C$99n.type],C$99f=C$99r.byteLength/C$99i._bytes,C$99c=0;C$99c<C$99f;C$99c++)for(var C$99p=C$99c*C$99h+C$99u,C$99l=0;C$99l<C$99a;C$99l++){var C$99m=C$99o[C$99d](C$99p+C$99l*C$99_,C$99v);C$99s.push(C$99m)}return C$99s},copyAttribute:function(C$99t,C$99e,C$99h,C$99u,C$99_){var C$99i=!1,C$99n=this._subDatas[C$99t];if(!C$99n)return C$99i;var C$99r=C$99n.vfm,C$99s=C$99r.element(C$99e);if(!C$99s)return C$99i;var C$99o=C$99C[C$99s.type];if(!C$99o)return C$99i;var C$99a=this._getAttrMeshData(C$99t,C$99e),C$99d=C$99n.vData.byteLength/C$99r._bytes,C$99f=C$99s.bytes/C$99s.num;if(0<C$99a.length){for(var C$99p=new DataView(C$99h,C$99_),C$99m=C$99u,C$99y=C$99s.num,C$99c=0;C$99c<C$99d;++C$99c)for(var C$99g=C$99c*C$99y,C$99l=0;C$99l<C$99y;++C$99l)C$99p[C$99o](C$99m*C$99c+C$99f*C$99l,C$99a[C$99g+C$99l],C$99v);C$99i=!0}return C$99i},copyIndices:function(C$99t,C$99e){C$99t=this._subDatas[C$99t];if(!C$99t)return!1;for(var C$99t=C$99t.iData,C$99i=C$99t.length/2,C$99n=new DataView(C$99t.buffer,C$99t.byteOffset,C$99t.byteLength),C$99r=C$99y[C$99g.default.INDEX_FMT_UINT8],C$99s=0;C$99s<C$99i;++C$99s)C$99e[C$99s]=C$99n[C$99r](2*C$99s);return!0}});cc.Mesh=C$99e.exports=C$99n},{"../../renderer/core/input-assembler":302,"../../renderer/gfx":312,"../event/event-target":115,"../renderer":220,"./mesh-data":159}],157:[function(C$99t,C$99r,C$99s){"use strict";var C$99S=C$99i(C$99t("../../renderer/gfx")),C$99T=C$99i(C$99t("../../renderer/core/input-assembler")),C$99e=C$99i(C$99t("../geom-utils/aabb")),C$99o=C$99t("../utils/mesh-util"),C$99w=C$99i(C$99t("../value-types/vec3")),C$99B=C$99i(C$99t("../value-types/mat4")),C$99E=C$99i(C$99t("../assets/material/material-variant"));function C$99i(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}var C$99a=C$99t("../components/CCRenderComponent"),C$99c=C$99t("./CCMesh"),C$99l=C$99t("../renderer/render-flow"),C$99M=C$99t("../renderer"),C$99h=C$99t("../assets/material/CCMaterial"),C$99n=cc.Enum({OFF:0,ON:1}),C$99t=cc.Class({name:"cc.MeshRenderer",extends:C$99a,editor:!1,properties:{_mesh:{default:null,type:C$99c},_receiveShadows:!1,_shadowCastingMode:C$99n.OFF,_enableAutoBatch:!1,mesh:{get:function(){return this._mesh},set:function(C$99t){this._mesh!==C$99t&&(this._setMesh(C$99t),C$99t?(this.markForRender(!0),this.node._renderFlag|=C$99l.FLAG_TRANSFORM):this.disableRender())},type:C$99c,animatable:!1},textures:{default:[],type:cc.Texture2D,visible:!1},receiveShadows:{get:function(){return this._receiveShadows},set:function(C$99t){this._receiveShadows=C$99t,this._updateReceiveShadow()},animatable:!1},shadowCastingMode:{get:function(){return this._shadowCastingMode},set:function(C$99t){this._shadowCastingMode=C$99t,this._updateCastShadow()},type:C$99n,animatable:!1},enableAutoBatch:{get:function(){return this._enableAutoBatch},set:function(C$99t){this._enableAutoBatch=C$99t}}},statics:{ShadowCastingMode:C$99n},ctor:function(){this._boundingBox=cc.geomUtils&&new C$99e.default,this._debugDatas={wireFrame:[],normal:[]}},onEnable:function(){var C$99t=this;this._super(),this._mesh&&!this._mesh.loaded?(this.disableRender(),this._mesh.once("load",function(){C$99t.isValid&&(C$99t._setMesh(C$99t._mesh),C$99t.markForRender(!0))}),(0,C$99o.postLoadMesh)(this._mesh)):this._setMesh(this._mesh),this._updateRenderNode(),this._updateMaterial()},onDestroy:function(){this._setMesh(null),cc.pool.assembler.put(this._assembler)},_updateRenderNode:function(){this._assembler.setRenderNode(this.node)},_setMesh:function(C$99t){cc.geomUtils&&C$99t&&C$99e.default.fromPoints(this._boundingBox,C$99t._minPos,C$99t._maxPos),this._mesh&&this._mesh.off("init-format",this._updateMeshAttribute,this),C$99t&&C$99t.on("init-format",this._updateMeshAttribute,this),this._mesh=C$99t,this._updateMeshAttribute()},_getDefaultMaterial:function(){return C$99h.getBuiltinMaterial("unlit")},_validateRender:function(){var C$99t=this._mesh;C$99t&&0<C$99t._subDatas.length||this.disableRender()},_updateMaterial:function(){var C$99t=this.textures;if(C$99t&&0<C$99t.length)for(var C$99e=this._getDefaultMaterial(),C$99i=0;C$99i<C$99t.length;C$99i++){var C$99n=this._materials[C$99i];C$99n&&C$99n._uuid!==C$99e._uuid||(C$99n||(C$99n=C$99E.default.create(C$99e,this),this.setMaterial(C$99i,C$99n)),C$99n.setProperty("diffuseTexture",C$99t[C$99i]))}this._updateReceiveShadow(),this._updateCastShadow(),this._updateMeshAttribute()},_updateReceiveShadow:function(){for(var C$99t=this.getMaterials(),C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e].define("CC_USE_SHADOW_MAP",this._receiveShadows,void 0,!0)},_updateCastShadow:function(){for(var C$99t=this.getMaterials(),C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e].define("CC_CASTING_SHADOW",this._shadowCastingMode===C$99n.ON,void 0,!0)},_updateMeshAttribute:function(){var C$99t=this._mesh&&this._mesh.subDatas;if(C$99t){for(var C$99e,C$99i=this.getMaterials(),C$99n=0;C$99n<C$99i.length&&C$99t[C$99n];C$99n++){var C$99r=C$99t[C$99n].vfm,C$99s=C$99i[C$99n];C$99s.define("CC_USE_ATTRIBUTE_COLOR",!!C$99r.element(C$99S.default.ATTR_COLOR),void 0,!0),C$99s.define("CC_USE_ATTRIBUTE_UV0",!!C$99r.element(C$99S.default.ATTR_UV0),void 0,!0),C$99s.define("CC_USE_ATTRIBUTE_NORMAL",!!C$99r.element(C$99S.default.ATTR_NORMAL),void 0,!0),C$99s.define("CC_USE_ATTRIBUTE_TANGENT",!!C$99r.element(C$99S.default.ATTR_TANGENT),void 0,!0)}for(C$99e in this._debugDatas)this._debugDatas[C$99e].length=0}},_checkBacth:function(){}}),C$99u=cc.Color.BLACK,C$99R=cc.Color.RED,C$99I=[cc.v3(),cc.v3()],C$99P=cc.mat4(),C$99_={normal:function(C$99t,C$99h,C$99e,C$99i){var C$99e=C$99e.vfm,C$99u=C$99e.element(C$99S.default.ATTR_NORMAL),C$99n=C$99e.element(C$99S.default.ATTR_POSITION),C$99r=C$99e.element(C$99S.default.ATTR_JOINTS),C$99s=C$99e.element(C$99S.default.ATTR_WEIGHTS);if(C$99u&&C$99n){for(var C$99_,C$99d=[],C$99o=[],C$99e=(C$99w.default.set(C$99I[0],5,0,0),C$99B.default.invert(C$99P,C$99t.node._worldMatrix),C$99w.default.transformMat4Normal(C$99I[0],C$99I[0],C$99P),C$99_=C$99I[0].mag(),C$99t.mesh),C$99a=C$99e._getAttrMeshData(C$99i,C$99S.default.ATTR_POSITION),C$99f=C$99e._getAttrMeshData(C$99i,C$99S.default.ATTR_NORMAL),C$99p=C$99e._getAttrMeshData(C$99i,C$99S.default.ATTR_JOINTS),C$99m=C$99e._getAttrMeshData(C$99i,C$99S.default.ATTR_WEIGHTS),C$99y=C$99a.length/C$99n.num,C$99c=0;C$99c<C$99y;C$99c++){var C$99g=C$99c*C$99u.num,C$99v=C$99c*C$99n.num;C$99w.default.set(C$99I[0],C$99f[C$99g],C$99f[1+C$99g],C$99f[2+C$99g]),C$99w.default.set(C$99I[1],C$99a[C$99v],C$99a[1+C$99v],C$99a[2+C$99v]),C$99w.default.scaleAndAdd(C$99I[0],C$99I[1],C$99I[0],C$99_);for(var C$99l=0;C$99l<2;C$99l++){if(C$99o.push(C$99I[C$99l].x,C$99I[C$99l].y,C$99I[C$99l].z),C$99r)for(var C$99x=C$99c*C$99r.num,C$99b=0;C$99b<C$99r.num;C$99b++)C$99o.push(C$99p[C$99x+C$99b]);if(C$99s)for(var C$99A=C$99c*C$99s.num,C$99C=0;C$99C<C$99s.num;C$99C++)C$99o.push(C$99m[C$99A+C$99C])}C$99d.push(2*C$99c,2*C$99c+1)}C$99t=[{name:C$99S.default.ATTR_POSITION,type:C$99S.default.ATTR_TYPE_FLOAT32,num:3}],C$99e=(C$99r&&C$99t.push({name:C$99S.default.ATTR_JOINTS,type:C$99S.default.ATTR_TYPE_FLOAT32,num:C$99r.num}),C$99s&&C$99t.push({name:C$99S.default.ATTR_WEIGHTS,type:C$99S.default.ATTR_TYPE_FLOAT32,num:C$99s.num}),new C$99S.default.VertexFormat(C$99t)),C$99i=new C$99S.default.VertexBuffer(C$99M.device,C$99e,C$99S.default.USAGE_STATIC,new Float32Array(C$99o)),C$99t=new Uint16Array(C$99d),C$99e=new C$99S.default.IndexBuffer(C$99M.device,C$99S.default.INDEX_FMT_UINT16,C$99S.default.USAGE_STATIC,C$99t,C$99t.length),C$99t=C$99E.default.createWithBuiltin("unlit");return C$99t.setProperty("diffuseColor",C$99R),{material:C$99t,ia:new C$99T.default(C$99i,C$99e,C$99S.default.PT_LINES)}}},wireFrame:function(C$99l,C$99t,C$99e){for(var C$99i=C$99e.getIData(Uint16Array),C$99e=C$99E.default.createWithBuiltin("unlit"),C$99n=(C$99e.setProperty("diffuseColor",C$99u),[]),C$99r=0;C$99r<C$99i.length;C$99r+=3){var C$99s=C$99i[C$99r+0],C$99o=C$99i[C$99r+1],C$99a=C$99i[C$99r+2];C$99n.push(C$99s,C$99o,C$99o,C$99a,C$99a,C$99s)}var C$99c=new Uint16Array(C$99n),C$99c=new C$99S.default.IndexBuffer(C$99M.device,C$99S.default.INDEX_FMT_UINT16,C$99S.default.USAGE_STATIC,C$99c,C$99c.length);return{material:C$99e,ia:new C$99T.default(C$99t._vertexBuffer,C$99c,C$99S.default.PT_LINES)}}};C$99t.prototype._updateDebugDatas=function(){var C$99t,C$99e=this._debugDatas,C$99i=this._mesh.subMeshes,C$99n=this._mesh._subDatas;for(C$99t in C$99e){var C$99r=C$99e[C$99t];if(C$99r.length!==C$99i.length&&cc.macro["SHOW_MESH_"+C$99t.toUpperCase()]){C$99r.length=C$99i.length;for(var C$99s=0;C$99s<C$99i.length;C$99s++)C$99r[C$99s]=C$99_[C$99t](this,C$99i[C$99s],C$99n[C$99s],C$99s)}}},cc.MeshRenderer=C$99r.exports=C$99t},{"../../renderer/core/input-assembler":302,"../../renderer/gfx":312,"../assets/material/CCMaterial":53,"../assets/material/material-variant":60,"../components/CCRenderComponent":89,"../geom-utils/aabb":119,"../renderer":220,"../renderer/render-flow":221,"../utils/mesh-util":263,"../value-types/mat4":281,"../value-types/vec3":289,"./CCMesh":156}],158:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCMesh"),C$99t("./CCMeshRenderer"),C$99t("./mesh-renderer")},{"./CCMesh":156,"./CCMeshRenderer":157,"./mesh-renderer":160}],159:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.MeshData=C$99s,C$99i.Primitive=C$99i.VertexBundle=C$99i.VertexFormat=C$99i.BufferRange=void 0;C$99t=(C$99t=C$99t("../../renderer/gfx"))&&C$99t.__esModule?C$99t:{default:C$99t};var C$99n=cc.Class({name:"cc.BufferRange",properties:{offset:0,length:0}}),C$99r=(C$99i.BufferRange=C$99n,cc.Class({name:"cc.mesh.VertexFormat",properties:{name:"",type:-1,num:-1,normalize:!1}})),C$99r=(C$99i.VertexFormat=C$99r,cc.Class({name:"cc.mesh.VertexBundle",properties:{data:{default:null,type:C$99n},formats:{default:[],type:C$99r},verticesCount:0}})),C$99r=(C$99i.VertexBundle=C$99r,cc.Class({name:"cc.mesh.Primitive",properties:{vertexBundleIndices:{default:[],type:cc.Float},data:{default:null,type:C$99n},indexUnit:C$99t.default.INDEX_FMT_UINT16,topology:C$99t.default.PT_TRIANGLES}}));function C$99s(){this.vData=null,this.float32VData=null,this.uint32VData=null,this.iData=null,this.uint16IData=null,this.vfm=null,this.offset=0,this.vb=null,this.ib=null,this.vDirty=!1,this.iDirty=!1,this.enable=!0}C$99i.Primitive=C$99r,C$99s.prototype.setVData=function(C$99t){this.vData=C$99t,this.float32VData=null,this.uint32VData=null},C$99s.prototype.getVData=function(C$99t){return C$99t===Float32Array?(this.float32VData||(this.float32VData=new Float32Array(this.vData.buffer,this.vData.byteOffset,this.vData.byteLength/4)),this.float32VData):C$99t===Uint32Array?(this.uint32VData||(this.uint32VData=new Uint32Array(this.vData.buffer,this.vData.byteOffset,this.vData.byteLength/4)),this.uint32VData):this.vData},C$99s.prototype.getIData=function(C$99t){return C$99t===Uint16Array?(this.uint16IData||(this.uint16IData=new Uint16Array(this.iData.buffer,this.iData.byteOffset,this.iData.byteLength/2)),this.uint16IData):this.iData}},{"../../renderer/gfx":312}],160:[function(C$99t,C$99a,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99c=C$99i(C$99t("../renderer/assembler")),C$99p=C$99i(C$99t("../../renderer/gfx")),C$99m=C$99i(C$99t("../value-types/vec3"));function C$99i(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99l(C$99i){return function(){var C$99t,C$99e=C$99h(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99h(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99h(C$99t){return(C$99h=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99n,C$99r,C$99t=C$99t("./CCMeshRenderer"),C$99y=new C$99m.default,C$99s=(C$99n=C$99c.default,C$99s=C$99n,(C$99r=C$99o).prototype=Object.create(C$99s.prototype),(C$99r.prototype.constructor=C$99r).__proto__=C$99s,C$99l(C$99o),(C$99r=C$99o.prototype).init=function(C$99t){C$99n.prototype.init.call(this,C$99t),this._worldDatas={},this._renderNode=null},C$99r.setRenderNode=function(C$99t){this._renderNode=C$99t},C$99r.fillBuffers=function(C$99t,C$99e){if(C$99t.mesh){C$99t.mesh._uploadData();for(var C$99i=C$99e.cullingMask===C$99t.node._cullingMask,C$99n=C$99t.enableAutoBatch,C$99r=C$99t._materials,C$99s=C$99t.mesh._subMeshes,C$99h=C$99t.mesh.subDatas,C$99o=0;C$99o<C$99s.length;C$99o++){var C$99a=C$99s[C$99o],C$99c=C$99h[C$99o],C$99l=C$99r[C$99o]||C$99r[0];C$99n&&C$99c.canBatch&&C$99a._primitiveType===C$99p.default.PT_TRIANGLES?(C$99i&&C$99l.getHash()===C$99e.material.getHash()||C$99e._flush(),C$99e.material=C$99l,C$99e.cullingMask=C$99t.node._cullingMask,C$99e.node=C$99e._dummyNode,this._fillBuffer(C$99t,C$99c,C$99e,C$99o)):(C$99e._flush(),C$99e.material=C$99l,C$99e.cullingMask=C$99t.node._cullingMask,C$99e.node=this._renderNode,C$99e._flushIA(C$99a))}!cc.macro.SHOW_MESH_WIREFRAME&&!cc.macro.SHOW_MESH_NORMAL||C$99t.node._cullingMask&1<<cc.Node.BuiltinGroupIndex.DEBUG||(C$99e._flush(),C$99e.node=this._renderNode,C$99t._updateDebugDatas(),cc.macro.SHOW_MESH_WIREFRAME&&this._drawDebugDatas(C$99t,C$99e,"wireFrame"),cc.macro.SHOW_MESH_NORMAL&&this._drawDebugDatas(C$99t,C$99e,"normal"))}},C$99r._fillBuffer=function(C$99h,C$99t,C$99e,C$99i){var C$99n=C$99t.getVData(Float32Array),C$99r=C$99t.vfm,C$99s=C$99n.byteLength/C$99r._bytes|0,C$99o=C$99t.getIData(Uint16Array),C$99a=C$99o.length,C$99t=C$99e.getBuffer("mesh",C$99r),C$99c=C$99t.request(C$99s,C$99a),C$99u=C$99c.indiceOffset,C$99_=C$99c.byteOffset>>2,C$99d=C$99c.vertexOffset,C$99c=C$99t._vData,C$99f=C$99t._iData;!C$99e.worldMatDirty&&this._worldDatas[C$99i]||this._updateWorldVertices(C$99i,C$99s,C$99n,C$99r,C$99h.node._worldMatrix),C$99c.set(this._worldDatas[C$99i],C$99_);for(var C$99l=0;C$99l<C$99a;C$99l++)C$99f[C$99u+C$99l]=C$99d+C$99o[C$99l]},C$99r._updateWorldVertices=function(C$99t,C$99e,C$99i,C$99n,C$99h){for(var C$99r=this._worldDatas[C$99t],C$99u=(C$99r||(C$99r=this._worldDatas[C$99t]=new Float32Array(C$99i.length)).set(C$99i),C$99n._bytes/4),C$99s=C$99n._elements,C$99o=0,C$99_=C$99s.length;C$99o<C$99_;C$99o++){var C$99a=C$99s[C$99o],C$99d=C$99a.offset/4;if(C$99a.name===C$99p.default.ATTR_POSITION||C$99a.name===C$99p.default.ATTR_NORMAL)for(var C$99f=C$99a.name===C$99p.default.ATTR_NORMAL?C$99m.default.transformMat4Normal:C$99m.default.transformMat4,C$99c=0;C$99c<C$99e;C$99c++){var C$99l=C$99c*C$99u+C$99d;C$99y.x=C$99i[C$99l],C$99y.y=C$99i[1+C$99l],C$99y.z=C$99i[2+C$99l],C$99f(C$99y,C$99y,C$99h),C$99r[C$99l]=C$99y.x,C$99r[1+C$99l]=C$99y.y,C$99r[2+C$99l]=C$99y.z}}},C$99r._drawDebugDatas=function(C$99t,C$99e,C$99i){var C$99n=C$99t._debugDatas[C$99i];if(C$99n)for(var C$99r=0;C$99r<C$99n.length;C$99r++){var C$99s,C$99o=C$99n[C$99r];C$99o&&(C$99s=C$99o.material,C$99e.material=C$99s,C$99e._flushIA(C$99o.ia))}},C$99o);function C$99o(){return C$99n.apply(this,arguments)||this}C$99e.default=C$99s,C$99c.default.register(C$99t,C$99s),C$99a.exports=C$99e.default},{"../../renderer/gfx":312,"../renderer/assembler":217,"../value-types/vec3":289,"./CCMeshRenderer":157}],161:[function(C$99t,C$99c,C$99l){"use strict";var C$99i=C$99t("./component-scheduler"),C$99e=C$99t("./platform/CCObject").Flags,C$99_=C$99t("./platform/js"),C$99s=C$99e.IsPreloadStarted,C$99o=C$99e.IsOnLoadStarted,C$99r=C$99e.IsOnLoadCalled,C$99d=C$99e.Deactivating,C$99h=cc.Class({extends:C$99i.LifeCycleInvoker,add:function(C$99t){this._zero.array.push(C$99t)},remove:function(C$99t){this._zero.fastRemove(C$99t)},cancelInactive:function(C$99t){C$99i.LifeCycleInvoker.stableRemoveInactive(this._zero,C$99t)},invoke:function(){this._invoke(this._zero),this._zero.array.length=0}}),C$99u=C$99i.createInvokeImpl(function(C$99t){C$99t.__preload()},!1,void 0,function(C$99t){var C$99e=C$99t.array;for(C$99t.i=0;C$99t.i<C$99e.length;++C$99t.i)C$99e[C$99t.i].__preload()}),C$99f=C$99i.createInvokeImpl(function(C$99t){C$99t.onLoad(),C$99t._objFlags|=C$99r},!1,C$99r,function(C$99t){var C$99e=C$99t.array;for(C$99t.i=0;C$99t.i<C$99e.length;++C$99t.i){var C$99i=C$99e[C$99t.i];C$99i.onLoad(),C$99i._objFlags|=C$99r}}),C$99a=new C$99_.Pool(4);function C$99n(){this._activatingStack=[]}C$99a.get=function(){var C$99t=this._get()||{preload:new C$99h(C$99u),onLoad:new C$99i.OneOffInvoker(C$99f),onEnable:new C$99i.OneOffInvoker(C$99i.invokeOnEnable)},C$99e=(C$99t.preload._zero.i=-1,C$99t.onLoad);return C$99e._zero.i=-1,C$99e._neg.i=-1,C$99e._pos.i=-1,(C$99e=C$99t.onEnable)._zero.i=-1,C$99e._neg.i=-1,C$99e._pos.i=-1,C$99t};C$99t=cc.Class({ctor:C$99n,reset:C$99n,_activateNodeRecursively:function(C$99t,C$99e,C$99i,C$99n){if(C$99t._objFlags&C$99d)cc.errorID(3816,C$99t.name);else{C$99t._activeInHierarchy=!0;for(var C$99r,C$99s,C$99h=C$99t._components.length,C$99o=0;C$99o<C$99h;++C$99o){var C$99a=C$99t._components[C$99o];C$99a instanceof cc.Component?this.activateComp(C$99a,C$99e,C$99i,C$99n):(C$99r=C$99t,C$99s=C$99o,(C$99a=C$99a)?C$99r._removeComponent(C$99a):C$99_.array.removeAt(C$99r._components,C$99s),--C$99o,--C$99h)}C$99t._childArrivalOrder=C$99t._children.length;for(var C$99c=0,C$99u=C$99t._children.length;C$99c<C$99u;++C$99c){var C$99l=C$99t._children[C$99c];C$99l._localZOrder=4294901760&C$99l._localZOrder|C$99c+1,C$99l._active&&this._activateNodeRecursively(C$99l,C$99e,C$99i,C$99n)}C$99t._onPostActivated(!0)}},_deactivateNodeRecursively:function(C$99t){C$99t._objFlags|=C$99d,C$99t._activeInHierarchy=!1;for(var C$99e=C$99t._components.length,C$99i=0;C$99i<C$99e;++C$99i){var C$99n=C$99t._components[C$99i];if(C$99n._enabled&&(cc.director._compScheduler.disableComp(C$99n),C$99t._activeInHierarchy))return void(C$99t._objFlags&=~C$99d)}for(var C$99r=0,C$99s=C$99t._children.length;C$99r<C$99s;++C$99r){var C$99o=C$99t._children[C$99r];if(C$99o._activeInHierarchy&&(this._deactivateNodeRecursively(C$99o),C$99t._activeInHierarchy))return void(C$99t._objFlags&=~C$99d)}C$99t._onPostActivated(!1),C$99t._objFlags&=~C$99d},activateNode:function(C$99t,C$99e){if(C$99e){C$99e=C$99a.get();this._activatingStack.push(C$99e),this._activateNodeRecursively(C$99t,C$99e.preload,C$99e.onLoad,C$99e.onEnable),C$99e.preload.invoke(),C$99e.onLoad.invoke(),C$99e.onEnable.invoke(),this._activatingStack.pop(),C$99a.put(C$99e)}else{this._deactivateNodeRecursively(C$99t);for(var C$99i=this._activatingStack,C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n];C$99r.preload.cancelInactive(C$99s),C$99r.onLoad.cancelInactive(C$99o),C$99r.onEnable.cancelInactive()}}C$99t.emit("active-in-hierarchy-changed",C$99t)},activateComp:function(C$99t,C$99e,C$99i,C$99n){cc.isValid(C$99t,!0)&&(C$99t._objFlags&C$99s||(C$99t._objFlags|=C$99s,C$99t.__preload&&(C$99e?C$99e.add(C$99t):C$99t.__preload())),C$99t._objFlags&C$99o||(C$99t._objFlags|=C$99o,C$99t.onLoad?C$99i?C$99i.add(C$99t):(C$99t.onLoad(),C$99t._objFlags|=C$99r):C$99t._objFlags|=C$99r),!C$99t._enabled||C$99t.node._activeInHierarchy&&cc.director._compScheduler.enableComp(C$99t,C$99n))},destroyComp:function(C$99t){cc.director._compScheduler.disableComp(C$99t),C$99t.onDestroy&&C$99t._objFlags&C$99r&&C$99t.onDestroy()},resetComp:!1});C$99c.exports=C$99t},{"./component-scheduler":72,"./platform/CCObject":195,"./platform/js":209,"./utils/misc":264}],162:[function(C$99t,C$99r,C$99o){"use strict";var C$99l=C$99t("./CCPhysicsTypes").PTM_RATIO,C$99h=C$99t("./CCPhysicsTypes").ContactType,C$99i=[],C$99d=[cc.v2(),cc.v2()],C$99c=new b2.WorldManifold,C$99u={points:[],separations:[],normal:cc.v2()};function C$99e(){this.localPoint=cc.v2(),this.normalImpulse=0,this.tangentImpulse=0}var C$99f=[new C$99e,new C$99e],C$99_=(new b2.Manifold,{type:0,localPoint:cc.v2(),localNormal:cc.v2(),points:[]}),C$99s={normalImpulses:[],tangentImpulses:[]};function C$99n(){}C$99n.prototype.init=function(C$99t){this.colliderA=C$99t.GetFixtureA().collider,this.colliderB=C$99t.GetFixtureB().collider,this.disabled=!1,this.disabledOnce=!1,this._impulse=null,this._inverted=!1,(this._b2contact=C$99t)._contact=this},C$99n.prototype.reset=function(){this.setTangentSpeed(0),this.resetFriction(),this.resetRestitution(),this.colliderA=null,this.colliderB=null,this.disabled=!1,this._impulse=null,this._b2contact._contact=null,this._b2contact=null},C$99n.prototype.getWorldManifold=function(){var C$99t=C$99u.points,C$99e=C$99u.separations,C$99i=C$99u.normal,C$99n=(this._b2contact.GetWorldManifold(C$99c),C$99c.points),C$99r=C$99c.separations,C$99s=this._b2contact.GetManifold().pointCount;C$99t.length=C$99e.length=C$99s;for(var C$99o=0;C$99o<C$99s;C$99o++){var C$99a=C$99d[C$99o];C$99a.x=C$99n[C$99o].x*C$99l,C$99a.y=C$99n[C$99o].y*C$99l,C$99t[C$99o]=C$99a,C$99e[C$99o]=C$99r[C$99o]*C$99l}return C$99i.x=C$99c.normal.x,C$99i.y=C$99c.normal.y,this._inverted&&(C$99i.x*=-1,C$99i.y*=-1),C$99u},C$99n.prototype.getManifold=function(){for(var C$99t=C$99_.points,C$99e=C$99_.localNormal,C$99i=C$99_.localPoint,C$99n=this._b2contact.GetManifold(),C$99r=C$99n.points,C$99s=C$99t.length=C$99n.pointCount,C$99o=0;C$99o<C$99s;C$99o++){var C$99a=C$99f[C$99o],C$99c=C$99r[C$99o];C$99a.localPoint.x=C$99c.localPoint.x*C$99l,C$99a.localPoint.Y=C$99c.localPoint.Y*C$99l,C$99a.normalImpulse=C$99c.normalImpulse*C$99l,C$99a.tangentImpulse=C$99c.tangentImpulse,C$99t[C$99o]=C$99a}return C$99i.x=C$99n.localPoint.x*C$99l,C$99i.y=C$99n.localPoint.y*C$99l,C$99e.x=C$99n.localNormal.x,C$99e.y=C$99n.localNormal.y,C$99_.type=C$99n.type,this._inverted&&(C$99e.x*=-1,C$99e.y*=-1),C$99_},C$99n.prototype.getImpulse=function(){var C$99t=this._impulse;if(!C$99t)return null;for(var C$99e=C$99s.normalImpulses,C$99i=C$99s.tangentImpulses,C$99n=C$99t.count,C$99r=0;C$99r<C$99n;C$99r++)C$99e[C$99r]=C$99t.normalImpulses[C$99r]*C$99l,C$99i[C$99r]=C$99t.tangentImpulses[C$99r];return C$99i.length=C$99e.length=C$99n,C$99s},C$99n.prototype.emit=function(C$99t){var C$99e;switch(C$99t){case C$99h.BEGIN_CONTACT:C$99e="onBeginContact";break;case C$99h.END_CONTACT:C$99e="onEndContact";break;case C$99h.PRE_SOLVE:C$99e="onPreSolve";break;case C$99h.POST_SOLVE:C$99e="onPostSolve"}var C$99i,C$99n,C$99r,C$99s,C$99o=this.colliderA,C$99a=this.colliderB,C$99t=C$99o.body,C$99c=C$99a.body;if(C$99t.enabledContactListener)for(C$99i=C$99t.node._components,this._inverted=!1,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++)(C$99s=C$99i[C$99n])[C$99e]&&C$99s[C$99e](this,C$99o,C$99a);if(C$99c.enabledContactListener)for(C$99i=C$99c.node._components,this._inverted=!0,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++)(C$99s=C$99i[C$99n])[C$99e]&&C$99s[C$99e](this,C$99a,C$99o);(this.disabled||this.disabledOnce)&&(this.setEnabled(!1),this.disabledOnce=!1)},C$99n.get=function(C$99t){var C$99e=0===C$99i.length?new cc.PhysicsContact:C$99i.pop();return C$99e.init(C$99t),C$99e},C$99n.put=function(C$99t){C$99t=C$99t._contact;C$99t&&(C$99i.push(C$99t),C$99t.reset())};C$99t=C$99n.prototype;C$99t.setEnabled=function(C$99t){this._b2contact.SetEnabled(C$99t)},C$99t.isTouching=function(){return this._b2contact.IsTouching()},C$99t.setTangentSpeed=function(C$99t){this._b2contact.SetTangentSpeed(C$99t/C$99l)},C$99t.getTangentSpeed=function(){return this._b2contact.GetTangentSpeed()*C$99l},C$99t.setFriction=function(C$99t){this._b2contact.SetFriction(C$99t)},C$99t.getFriction=function(){return this._b2contact.GetFriction()},C$99t.resetFriction=function(){return this._b2contact.ResetFriction()},C$99t.setRestitution=function(C$99t){this._b2contact.SetRestitution(C$99t)},C$99t.getRestitution=function(){return this._b2contact.GetRestitution()},C$99t.resetRestitution=function(){return this._b2contact.ResetRestitution()},C$99n.ContactType=C$99h,cc.PhysicsContact=C$99r.exports=C$99n},{"./CCPhysicsTypes":164}],163:[function(C$99t,C$99r,C$99s){"use strict";var C$99e=C$99t("./CCPhysicsTypes"),C$99i=C$99e.ContactType,C$99c=C$99e.BodyType,C$99d=C$99e.RayCastType,C$99o=C$99e.DrawBits,C$99f=C$99e.PTM_RATIO,C$99h=(C$99e.ANGLE_TO_PHYSICS_ANGLE,C$99e.PHYSICS_ANGLE_TO_ANGLE),C$99u=C$99t("./utils").convertToNodeRotation,C$99_=C$99t("./platform/CCPhysicsDebugDraw"),C$99n=new b2.AABB,C$99p=new b2.Vec2,C$99m=new b2.Vec2,C$99a=cc.v2(),C$99l=cc.Class({mixins:[cc.EventTarget],statics:{DrawBits:C$99o,PTM_RATIO:C$99f,VELOCITY_ITERATIONS:10,POSITION_ITERATIONS:10,FIXED_TIME_STEP:1/60,MAX_ACCUMULATOR:.2},ctor:function(){this._debugDrawFlags=0,this._debugDrawer=null,this._world=null,this._bodies=[],this._joints=[],this._contactMap={},this._contactID=0,this._delayEvents=[],this._accumulator=0,cc.director._scheduler&&cc.director._scheduler.enableForTarget(this),this.enabledAccumulator=!1},pushDelayEvent:function(C$99t,C$99e,C$99i){this._steping?this._delayEvents.push({target:C$99t,func:C$99e,args:C$99i}):C$99t[C$99e].apply(C$99t,C$99i)},update:function(C$99t){var C$99e=this._world;if(C$99e&&this.enabled){this.emit("before-step"),this._steping=!0;var C$99i=C$99l.VELOCITY_ITERATIONS,C$99n=C$99l.POSITION_ITERATIONS;if(this.enabledAccumulator){this._accumulator+=C$99t;var C$99r=C$99l.FIXED_TIME_STEP,C$99t=C$99l.MAX_ACCUMULATOR;for(this._accumulator>C$99t&&(this._accumulator=C$99t);this._accumulator>C$99r;)C$99e.Step(C$99r,C$99i,C$99n),this._accumulator-=C$99r}else{C$99t=1/cc.game.config.frameRate;C$99e.Step(C$99t,C$99i,C$99n)}this.debugDrawFlags&&(this._checkDebugDrawValid(),this._debugDrawer.clear(),C$99e.DrawDebugData()),this._steping=!1;for(var C$99s=this._delayEvents,C$99o=0,C$99a=C$99s.length;C$99o<C$99a;C$99o++){var C$99c=C$99s[C$99o];C$99c.target[C$99c.func].apply(C$99c.target,C$99c.args)}C$99s.length=0,this._syncNode()}},testPoint:function(C$99t){var C$99e=C$99p.x=C$99t.x/C$99f,C$99t=C$99p.y=C$99t.y/C$99f,C$99i=.2/C$99f,C$99e=(C$99n.lowerBound.x=C$99e-C$99i,C$99n.lowerBound.y=C$99t-C$99i,C$99n.upperBound.x=C$99e+C$99i,C$99n.upperBound.y=C$99t+C$99i,this._aabbQueryCallback),C$99t=(C$99e.init(C$99p),this._world.QueryAABB(C$99e,C$99n),C$99e.getFixture());return C$99t?C$99t.collider:null},testAABB:function(C$99t){C$99n.lowerBound.x=C$99t.xMin/C$99f,C$99n.lowerBound.y=C$99t.yMin/C$99f,C$99n.upperBound.x=C$99t.xMax/C$99f,C$99n.upperBound.y=C$99t.yMax/C$99f;C$99t=this._aabbQueryCallback;return C$99t.init(),this._world.QueryAABB(C$99t,C$99n),C$99t.getFixtures().map(function(C$99t){return C$99t.collider})},rayCast:function(C$99t,C$99e,C$99i){if(C$99t.equals(C$99e))return[];C$99i=C$99i||C$99d.Closest,C$99p.x=C$99t.x/C$99f,C$99p.y=C$99t.y/C$99f,C$99m.x=C$99e.x/C$99f,C$99m.y=C$99e.y/C$99f;var C$99t=this._raycastQueryCallback,C$99n=(C$99t.init(C$99i),this._world.RayCast(C$99t,C$99p,C$99m),C$99t.getFixtures());if(0<C$99n.length){for(var C$99r=C$99t.getPoints(),C$99s=C$99t.getNormals(),C$99o=C$99t.getFractions(),C$99h=[],C$99a=0,C$99u=C$99n.length;C$99a<C$99u;C$99a++){var C$99_=C$99n[C$99a],C$99c=C$99_.collider;if(C$99i===C$99d.AllClosest){var C$99l=C$99h.find(function(C$99t){return C$99t.collider===C$99c});if(C$99l){C$99o[C$99a]<C$99l.fraction&&(C$99l.fixtureIndex=C$99c._getFixtureIndex(C$99_),C$99l.point.x=C$99r[C$99a].x*C$99f,C$99l.point.y=C$99r[C$99a].y*C$99f,C$99l.normal.x=C$99s[C$99a].x,C$99l.normal.y=C$99s[C$99a].y,C$99l.fraction=C$99o[C$99a]);continue}}C$99h.push({collider:C$99c,fixtureIndex:C$99c._getFixtureIndex(C$99_),point:cc.v2(C$99r[C$99a].x*C$99f,C$99r[C$99a].y*C$99f),normal:cc.v2(C$99s[C$99a]),fraction:C$99o[C$99a]})}return C$99h}return[]},syncPosition:function(){for(var C$99t=this._bodies,C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e].syncPosition()},syncRotation:function(){for(var C$99t=this._bodies,C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e].syncRotation()},_registerContactFixture:function(C$99t){this._contactListener.registerContactFixture(C$99t)},_unregisterContactFixture:function(C$99t){this._contactListener.unregisterContactFixture(C$99t)},_addBody:function(C$99t,C$99e){var C$99i=this._world,C$99n=C$99t.node;C$99i&&C$99n&&(C$99t._b2Body=C$99i.CreateBody(C$99e),C$99t._b2Body.body=C$99t,this._bodies.push(C$99t))},_removeBody:function(C$99t){var C$99e=this._world;C$99e&&(C$99t._b2Body.body=null,C$99e.DestroyBody(C$99t._b2Body),C$99t._b2Body=null,cc.js.array.remove(this._bodies,C$99t))},_addJoint:function(C$99t,C$99e){C$99e=this._world.CreateJoint(C$99e);C$99e&&((C$99e._joint=C$99t)._joint=C$99e,this._joints.push(C$99t))},_removeJoint:function(C$99t){C$99t._isValid()&&this._world.DestroyJoint(C$99t._joint),C$99t._joint&&(C$99t._joint._joint=null),cc.js.array.remove(this._joints,C$99t)},_initCallback:function(){var C$99t;this._world?this._contactListener||((C$99t=new cc.PhysicsContactListener).setBeginContact(this._onBeginContact),C$99t.setEndContact(this._onEndContact),C$99t.setPreSolve(this._onPreSolve),C$99t.setPostSolve(this._onPostSolve),this._world.SetContactListener(C$99t),this._contactListener=C$99t,this._aabbQueryCallback=new cc.PhysicsAABBQueryCallback,this._raycastQueryCallback=new cc.PhysicsRayCastCallback):cc.warn("Please init PhysicsManager first")},_init:function(){this.enabled=!0,this.debugDrawFlags=C$99o.e_shapeBit},_getWorld:function(){return this._world},_syncNode:function(){for(var C$99t=this._bodies,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e],C$99r=C$99n.node,C$99s=C$99n._b2Body,C$99o=C$99s.GetPosition(),C$99o=(C$99a.x=C$99o.x*C$99f,C$99a.y=C$99o.y*C$99f,C$99s.GetAngle()*C$99h),C$99s=(null!==C$99r.parent.parent&&(C$99a=C$99r.parent.convertToNodeSpaceAR(C$99a),C$99o=C$99u(C$99r.parent,C$99o)),C$99r._eventMask);C$99r._eventMask=0,C$99r.position=C$99a,C$99r.angle=-C$99o,C$99r._eventMask=C$99s,C$99n.type===C$99c.Animated&&C$99n.resetVelocity()}},_onBeginContact:function(C$99t){cc.PhysicsContact.get(C$99t).emit(C$99i.BEGIN_CONTACT)},_onEndContact:function(C$99t){var C$99e=C$99t._contact;C$99e&&(C$99e.emit(C$99i.END_CONTACT),cc.PhysicsContact.put(C$99t))},_onPreSolve:function(C$99t){C$99t=C$99t._contact;C$99t&&C$99t.emit(C$99i.PRE_SOLVE)},_onPostSolve:function(C$99t,C$99e){C$99t=C$99t._contact;C$99t&&(C$99t._impulse=C$99e,C$99t.emit(C$99i.POST_SOLVE),C$99t._impulse=null)},_checkDebugDrawValid:function(){var C$99t;this._debugDrawer&&this._debugDrawer.isValid||((C$99t=new cc.Node("PHYSICS_MANAGER_DEBUG_DRAW")).zIndex=cc.macro.MAX_ZINDEX,cc.game.addPersistRootNode(C$99t),this._debugDrawer=C$99t.addComponent(cc.Graphics),(C$99t=new C$99_(this._debugDrawer)).SetFlags(this.debugDrawFlags),this._world.SetDebugDraw(C$99t))}});cc.js.getset(C$99l.prototype,"enabled",function(){return this._enabled},function(C$99t){var C$99e;C$99t&&!this._world&&((C$99e=new b2.World(new b2.Vec2(0,-10))).SetAllowSleeping(!0),this._world=C$99e,this._initCallback()),this._enabled=C$99t}),cc.js.getset(C$99l.prototype,"debugDrawFlags",function(){return this._debugDrawFlags},function(C$99t){C$99t&&!this._debugDrawFlags?this._debugDrawer&&this._debugDrawer.node&&(this._debugDrawer.node.active=!0):!C$99t&&this._debugDrawFlags&&this._debugDrawer&&this._debugDrawer.node&&(this._debugDrawer.node.active=!1),C$99t&&(this._checkDebugDrawValid(),this._world.m_debugDraw.SetFlags(C$99t)),(this._debugDrawFlags=C$99t)&&(this._checkDebugDrawValid(),this._world.m_debugDraw.SetFlags(C$99t))}),cc.js.getset(C$99l.prototype,"gravity",function(){var C$99t;return this._world?(C$99t=this._world.GetGravity(),cc.v2(C$99t.x*C$99f,C$99t.y*C$99f)):cc.v2()},function(C$99t){this._world&&this._world.SetGravity(new b2.Vec2(C$99t.x/C$99f,C$99t.y/C$99f))}),cc.PhysicsManager=C$99r.exports=C$99l},{"./CCPhysicsTypes":164,"./platform/CCPhysicsDebugDraw":185,"./utils":187}],164:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Enum({Static:0,Kinematic:1,Dynamic:2,Animated:3}),C$99r=(cc.RigidBodyType=C$99n,cc.Enum({Closest:0,Any:1,AllClosest:2,All:3}));cc.RayCastType=C$99r,C$99e.exports={BodyType:C$99n,ContactType:{BEGIN_CONTACT:"begin-contact",END_CONTACT:"end-contact",PRE_SOLVE:"pre-solve",POST_SOLVE:"post-solve"},RayCastType:C$99r,DrawBits:b2.DrawFlags,PTM_RATIO:32,ANGLE_TO_PHYSICS_ANGLE:-Math.PI/180,PHYSICS_ANGLE_TO_ANGLE:-180/Math.PI}},{}],165:[function(C$99t,C$99e,C$99i){"use strict";function C$99v(C$99t,C$99e){var C$99i=C$99e.length;return C$99e[C$99t<0?C$99i- -C$99t%C$99i:C$99t%C$99i]}function C$99x(C$99t,C$99e,C$99i){for(var C$99n=[];C$99e<C$99t;)C$99e+=C$99i.length;for(;C$99t<=C$99e;++C$99t)C$99n.push(C$99v(C$99t,C$99i));return C$99n}function C$99b(C$99t,C$99e){return C$99A(C$99t,C$99e)}function C$99A(C$99t,C$99e,C$99i){var C$99n,C$99r;return void 0===C$99i&&(C$99t=C$99v((C$99n=C$99t)-1,C$99r=C$99e),C$99e=C$99v(C$99n,C$99r),C$99i=C$99v(C$99n+1,C$99r)),C$99s(C$99t,C$99e,C$99i)<0}function C$99C(C$99t,C$99e,C$99i){return 0<C$99s(C$99t,C$99e,C$99i)}function C$99S(C$99t,C$99e,C$99i){return 0<=C$99s(C$99t,C$99e,C$99i)}function C$99T(C$99t,C$99e,C$99i){return C$99s(C$99t,C$99e,C$99i)<=0}function C$99w(C$99t,C$99e){var C$99i=C$99e.x-C$99t.x,C$99e=C$99e.y-C$99t.y;return C$99i*C$99i+C$99e*C$99e}function C$99E(C$99t){C$99n(C$99t)||C$99t.reverse()}function C$99n(C$99t){return C$99t.length<3||0<function(C$99t){var C$99e,C$99i=0;for(C$99e=0;C$99e<C$99t.length;C$99e++){var C$99n=(C$99e+1)%C$99t.length;C$99i=(C$99i+=C$99t[C$99e].x*C$99t[C$99n].y)-C$99t[C$99e].y*C$99t[C$99n].x}return C$99i/=2}(C$99t)}function C$99M(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s=cc.v2(),C$99o=C$99e.y-C$99t.y,C$99e=C$99t.x-C$99e.x,C$99t=C$99o*C$99t.x+C$99e*C$99t.y,C$99a=C$99n.y-C$99i.y,C$99n=C$99i.x-C$99n.x,C$99i=C$99a*C$99i.x+C$99n*C$99i.y,C$99c=C$99o*C$99n-C$99a*C$99e;return C$99r=0,Math.abs(C$99c-C$99r)<=1e-6||(C$99s.x=(C$99n*C$99t-C$99e*C$99i)/C$99c,C$99s.y=(C$99o*C$99i-C$99a*C$99t)/C$99c),C$99s}function C$99s(C$99t,C$99e,C$99i){return C$99t.x*(C$99e.y-C$99i.y)+C$99e.x*(C$99i.y-C$99t.y)+C$99i.x*(C$99t.y-C$99e.y)}C$99e.exports={ConvexPartition:function C$99h(C$99t){C$99E(C$99t);for(var C$99e,C$99i,C$99n,C$99u,C$99r=[],C$99_=cc.v2(),C$99d=cc.v2(),C$99s=0,C$99o=0,C$99a=0;C$99a<C$99t.length;++C$99a)if(C$99b(C$99a,C$99t)){for(var C$99f=C$99i=1e8,C$99c=0;C$99c<C$99t.length;++C$99c)C$99C(C$99v(C$99a-1,C$99t),C$99v(C$99a,C$99t),C$99v(C$99c,C$99t))&&C$99T(C$99v(C$99a-1,C$99t),C$99v(C$99a,C$99t),C$99v(C$99c-1,C$99t))&&(C$99n=C$99M(C$99v(C$99a-1,C$99t),C$99v(C$99a,C$99t),C$99v(C$99c,C$99t),C$99v(C$99c-1,C$99t)),C$99A(C$99v(C$99a+1,C$99t),C$99v(C$99a,C$99t),C$99n)&&(C$99e=C$99w(C$99v(C$99a,C$99t),C$99n))<C$99f&&(C$99f=C$99e,C$99_=C$99n,C$99s=C$99c)),C$99C(C$99v(C$99a+1,C$99t),C$99v(C$99a,C$99t),C$99v(C$99c+1,C$99t))&&C$99T(C$99v(C$99a+1,C$99t),C$99v(C$99a,C$99t),C$99v(C$99c,C$99t))&&(C$99n=C$99M(C$99v(C$99a+1,C$99t),C$99v(C$99a,C$99t),C$99v(C$99c,C$99t),C$99v(C$99c+1,C$99t)),C$99C(C$99v(C$99a-1,C$99t),C$99v(C$99a,C$99t),C$99n)&&(C$99e=C$99w(C$99v(C$99a,C$99t),C$99n))<C$99i&&(C$99i=C$99e,C$99o=C$99c,C$99d=C$99n));if(C$99s==(C$99o+1)%C$99t.length){var C$99p,C$99m=C$99_.add(C$99d).div(2);(C$99p=C$99x(C$99a,C$99o,C$99t)).push(C$99m),(C$99u=C$99x(C$99s,C$99a,C$99t)).push(C$99m)}else{for(var C$99y=0,C$99g=C$99s;C$99o<C$99s;)C$99o+=C$99t.length;for(var C$99l,C$99c=C$99s;C$99c<=C$99o;++C$99c)!function(C$99t,C$99e,C$99i){if(C$99b(C$99t,C$99i)){if(C$99S(C$99v(C$99t,C$99i),C$99v(C$99t-1,C$99i),C$99v(C$99e,C$99i))&&C$99T(C$99v(C$99t,C$99i),C$99v(C$99t+1,C$99i),C$99v(C$99e,C$99i)))return}else if(C$99T(C$99v(C$99t,C$99i),C$99v(C$99t+1,C$99i),C$99v(C$99e,C$99i))||C$99S(C$99v(C$99t,C$99i),C$99v(C$99t-1,C$99i),C$99v(C$99e,C$99i)))return;if(C$99b(C$99e,C$99i)){if(C$99S(C$99v(C$99e,C$99i),C$99v(C$99e-1,C$99i),C$99v(C$99t,C$99i))&&C$99T(C$99v(C$99e,C$99i),C$99v(C$99e+1,C$99i),C$99v(C$99t,C$99i)))return}else if(C$99T(C$99v(C$99e,C$99i),C$99v(C$99e+1,C$99i),C$99v(C$99t,C$99i))||C$99S(C$99v(C$99e,C$99i),C$99v(C$99e-1,C$99i),C$99v(C$99t,C$99i)))return;for(var C$99n=0;C$99n<C$99i.length;++C$99n)if((C$99n+1)%C$99i.length!=C$99t&&C$99n!=C$99t&&(C$99n+1)%C$99i.length!=C$99e&&C$99n!=C$99e){var C$99r=cc.v2();if(function(C$99t,C$99e,C$99i,C$99n,C$99h){if(C$99t!=C$99i&&C$99t!=C$99n&&C$99e!=C$99i&&C$99e!=C$99n){var C$99r,C$99s,C$99o=C$99t.x,C$99t=C$99t.y,C$99a=C$99e.x,C$99e=C$99e.y,C$99c=C$99i.x,C$99i=C$99i.y,C$99l=C$99n.x,C$99n=C$99n.y;if(!(Math.max(C$99o,C$99a)<Math.min(C$99c,C$99l)||Math.max(C$99c,C$99l)<Math.min(C$99o,C$99a)))if(!(Math.max(C$99t,C$99e)<Math.min(C$99i,C$99n)||Math.max(C$99i,C$99n)<Math.min(C$99t,C$99e)))return C$99r=(C$99l-C$99c)*(C$99t-C$99i)-(C$99n-C$99i)*(C$99o-C$99c),C$99s=(C$99a-C$99o)*(C$99t-C$99i)-(C$99e-C$99t)*(C$99o-C$99c),C$99n=(C$99n-C$99i)*(C$99a-C$99o)-(C$99l-C$99c)*(C$99e-C$99t),Math.abs(C$99n)<1e-6?void 0:(C$99s/=C$99n,0<(C$99r/=C$99n)&&C$99r<1&&0<C$99s&&C$99s<1&&(C$99h.x=C$99o+C$99r*(C$99a-C$99o),C$99h.y=C$99t+C$99r*(C$99e-C$99t),1))}}(C$99v(C$99t,C$99i),C$99v(C$99e,C$99i),C$99v(C$99n,C$99i),C$99v(C$99n+1,C$99i),C$99r))return}return 1}(C$99a,C$99c,C$99t)||(C$99l=1/(C$99w(C$99v(C$99a,C$99t),C$99v(C$99c,C$99t))+1),C$99b(C$99c,C$99t)?C$99T(C$99v(C$99c-1,C$99t),C$99v(C$99c,C$99t),C$99v(C$99a,C$99t))&&C$99S(C$99v(C$99c+1,C$99t),C$99v(C$99c,C$99t),C$99v(C$99a,C$99t))?C$99l+=3:C$99l+=2:C$99l+=1,C$99y<C$99l&&(C$99g=C$99c,C$99y=C$99l));C$99p=C$99x(C$99a,C$99g,C$99t),C$99u=C$99x(C$99g,C$99a,C$99t)}return C$99r=(C$99r=C$99r.concat(C$99h(C$99p))).concat(C$99h(C$99u))}C$99r.push(C$99t);for(C$99a=C$99r.length-1;0<=C$99a;C$99a--)0==C$99r[C$99a].length&&C$99r.splice(C$99a,0);return C$99r},ForceCounterClockWise:C$99E,IsCounterClockWise:C$99n}},{}],166:[function(C$99t,C$99h,C$99u){"use strict";var C$99e=C$99t("../CCNode").EventType,C$99r=C$99t("./CCPhysicsTypes").PTM_RATIO,C$99s=C$99t("./CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$99i=C$99t("./CCPhysicsTypes").PHYSICS_ANGLE_TO_ANGLE,C$99o=C$99t("./utils").getWorldRotation,C$99a=C$99t("./CCPhysicsTypes").BodyType,C$99n=new b2.Vec2,C$99c=new b2.Vec2,C$99l=cc.Vec2.ZERO,C$99t=cc.Class({name:"cc.RigidBody",extends:cc.Component,editor:!1,properties:{_type:C$99a.Dynamic,_allowSleep:!0,_gravityScale:1,_linearDamping:0,_angularDamping:0,_linearVelocity:cc.v2(0,0),_angularVelocity:0,_fixedRotation:!1,enabled:{get:function(){return this._enabled},set:function(){cc.warnID(8200)},visible:!1,override:!0},enabledContactListener:{default:!1,tooltip:!1},bullet:{default:!1,tooltip:!1},type:{type:C$99a,tooltip:!1,get:function(){return this._type},set:function(C$99t){this._type=C$99t,this._b2Body&&(C$99t===C$99a.Animated?this._b2Body.SetType(C$99a.Kinematic):this._b2Body.SetType(C$99t))}},allowSleep:{tooltip:!1,get:function(){return this._b2Body?this._b2Body.IsSleepingAllowed():this._allowSleep},set:function(C$99t){this._allowSleep=C$99t,this._b2Body&&this._b2Body.SetSleepingAllowed(C$99t)}},gravityScale:{tooltip:!1,get:function(){return this._gravityScale},set:function(C$99t){this._gravityScale=C$99t,this._b2Body&&this._b2Body.SetGravityScale(C$99t)}},linearDamping:{tooltip:!1,get:function(){return this._linearDamping},set:function(C$99t){this._linearDamping=C$99t,this._b2Body&&this._b2Body.SetLinearDamping(this._linearDamping)}},angularDamping:{tooltip:!1,get:function(){return this._angularDamping},set:function(C$99t){this._angularDamping=C$99t,this._b2Body&&this._b2Body.SetAngularDamping(C$99t)}},linearVelocity:{tooltip:!1,type:cc.Vec2,get:function(){var C$99t,C$99e=this._linearVelocity;return this._b2Body&&(C$99t=this._b2Body.GetLinearVelocity(),C$99e.x=C$99t.x*C$99r,C$99e.y=C$99t.y*C$99r),C$99e},set:function(C$99t){this._linearVelocity=C$99t;var C$99e,C$99i=this._b2Body;C$99i&&((C$99e=C$99i.m_linearVelocity).Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99i.SetLinearVelocity(C$99e))}},angularVelocity:{tooltip:!1,get:function(){return this._b2Body?this._b2Body.GetAngularVelocity()*C$99i:this._angularVelocity},set:function(C$99t){this._angularVelocity=C$99t,this._b2Body&&this._b2Body.SetAngularVelocity(C$99t*C$99s)}},fixedRotation:{tooltip:!1,get:function(){return this._fixedRotation},set:function(C$99t){this._fixedRotation=C$99t,this._b2Body&&this._b2Body.SetFixedRotation(C$99t)}},awake:{visible:!1,tooltip:!1,get:function(){return!!this._b2Body&&this._b2Body.IsAwake()},set:function(C$99t){this._b2Body&&this._b2Body.SetAwake(C$99t)}},awakeOnLoad:{default:!0,tooltip:!1,animatable:!1},active:{visible:!1,get:function(){return!!this._b2Body&&this._b2Body.IsActive()},set:function(C$99t){this._b2Body&&this._b2Body.SetActive(C$99t)}}},getLocalPoint:function(C$99t,C$99e){return C$99e=C$99e||cc.v2(),this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99t=this._b2Body.GetLocalPoint(C$99n,C$99e),C$99e.x=C$99t.x*C$99r,C$99e.y=C$99t.y*C$99r),C$99e},getWorldPoint:function(C$99t,C$99e){return C$99e=C$99e||cc.v2(),this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99t=this._b2Body.GetWorldPoint(C$99n,C$99e),C$99e.x=C$99t.x*C$99r,C$99e.y=C$99t.y*C$99r),C$99e},getWorldVector:function(C$99t,C$99e){return C$99e=C$99e||cc.v2(),this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99t=this._b2Body.GetWorldVector(C$99n,C$99e),C$99e.x=C$99t.x*C$99r,C$99e.y=C$99t.y*C$99r),C$99e},getLocalVector:function(C$99t,C$99e){return C$99e=C$99e||cc.v2(),this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99t=this._b2Body.GetLocalVector(C$99n,C$99e),C$99e.x=C$99t.x*C$99r,C$99e.y=C$99t.y*C$99r),C$99e},getWorldPosition:function(C$99t){var C$99e;return C$99t=C$99t||cc.v2(),this._b2Body&&(C$99e=this._b2Body.GetPosition(),C$99t.x=C$99e.x*C$99r,C$99t.y=C$99e.y*C$99r),C$99t},getWorldRotation:function(){return this._b2Body?this._b2Body.GetAngle()*C$99i:0},getLocalCenter:function(C$99t){var C$99e;return C$99t=C$99t||cc.v2(),this._b2Body&&(C$99e=this._b2Body.GetLocalCenter(),C$99t.x=C$99e.x*C$99r,C$99t.y=C$99e.y*C$99r),C$99t},getWorldCenter:function(C$99t){var C$99e;return C$99t=C$99t||cc.v2(),this._b2Body&&(C$99e=this._b2Body.GetWorldCenter(),C$99t.x=C$99e.x*C$99r,C$99t.y=C$99e.y*C$99r),C$99t},getLinearVelocityFromWorldPoint:function(C$99t,C$99e){return C$99e=C$99e||cc.v2(),this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99t=this._b2Body.GetLinearVelocityFromWorldPoint(C$99n,C$99e),C$99e.x=C$99t.x*C$99r,C$99e.y=C$99t.y*C$99r),C$99e},getMass:function(){return this._b2Body?this._b2Body.GetMass():0},getInertia:function(){return this._b2Body?this._b2Body.GetInertia()*C$99r*C$99r:0},getJointList:function(){if(!this._b2Body)return[];var C$99t=[],C$99e=this._b2Body.GetJointList();if(!C$99e)return[];C$99t.push(C$99e.joint._joint);for(var C$99i=C$99e.prev;C$99i;)C$99t.push(C$99i.joint._joint),C$99i=C$99i.prev;for(var C$99n=C$99e.next;C$99n;)C$99t.push(C$99n.joint._joint),C$99n=C$99n.next;return C$99t},applyForce:function(C$99t,C$99e,C$99i){this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99c.Set(C$99e.x/C$99r,C$99e.y/C$99r),this._b2Body.ApplyForce(C$99n,C$99c,C$99i))},applyForceToCenter:function(C$99t,C$99e){this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),this._b2Body.ApplyForceToCenter(C$99n,C$99e))},applyTorque:function(C$99t,C$99e){this._b2Body&&this._b2Body.ApplyTorque(C$99t/C$99r,C$99e)},applyLinearImpulse:function(C$99t,C$99e,C$99i){this._b2Body&&(C$99n.Set(C$99t.x/C$99r,C$99t.y/C$99r),C$99c.Set(C$99e.x/C$99r,C$99e.y/C$99r),this._b2Body.ApplyLinearImpulse(C$99n,C$99c,C$99i))},applyAngularImpulse:function(C$99t,C$99e){this._b2Body&&this._b2Body.ApplyAngularImpulse(C$99t/C$99r/C$99r,C$99e)},syncPosition:function(C$99t){var C$99e,C$99i,C$99n=this._b2Body;C$99n&&(C$99e=this.node.convertToWorldSpaceAR(C$99l),(C$99i=this.type===C$99a.Animated?C$99n.GetLinearVelocity():C$99n.GetPosition()).x=C$99e.x/C$99r,C$99i.y=C$99e.y/C$99r,this.type===C$99a.Animated&&C$99t?(C$99e=C$99n.GetPosition(),C$99t=cc.game.config.frameRate,C$99i.x=(C$99i.x-C$99e.x)*C$99t,C$99i.y=(C$99i.y-C$99e.y)*C$99t,C$99n.SetAwake(!0),C$99n.SetLinearVelocity(C$99i)):C$99n.SetTransformVec(C$99i,C$99n.GetAngle()))},syncRotation:function(C$99t){var C$99e,C$99i,C$99n=this._b2Body;C$99n&&(C$99e=C$99s*C$99o(this.node),this.type===C$99a.Animated&&C$99t?(C$99t=C$99n.GetAngle(),C$99i=cc.game.config.frameRate,C$99n.SetAwake(!0),C$99n.SetAngularVelocity((C$99e-C$99t)*C$99i)):C$99n.SetTransformVec(C$99n.GetPosition(),C$99e))},resetVelocity:function(){var C$99t,C$99e=this._b2Body;C$99e&&((C$99t=C$99e.m_linearVelocity).Set(0,0),C$99e.SetLinearVelocity(C$99t),C$99e.SetAngularVelocity(0))},onEnable:function(){this._init()},onDisable:function(){this._destroy()},_registerNodeEvents:function(){var C$99t=this.node;C$99t.on(C$99e.POSITION_CHANGED,this._onNodePositionChanged,this),C$99t.on(C$99e.ROTATION_CHANGED,this._onNodeRotationChanged,this),C$99t.on(C$99e.SCALE_CHANGED,this._onNodeScaleChanged,this)},_unregisterNodeEvents:function(){var C$99t=this.node;C$99t.off(C$99e.POSITION_CHANGED,this._onNodePositionChanged,this),C$99t.off(C$99e.ROTATION_CHANGED,this._onNodeRotationChanged,this),C$99t.off(C$99e.SCALE_CHANGED,this._onNodeScaleChanged,this)},_onNodePositionChanged:function(){this.syncPosition(!0)},_onNodeRotationChanged:function(C$99t){this.syncRotation(!0)},_onNodeScaleChanged:function(C$99t){if(this._b2Body)for(var C$99e=this.getComponents(cc.PhysicsCollider),C$99i=0;C$99i<C$99e.length;C$99i++)C$99e[C$99i].apply()},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){var C$99t,C$99e,C$99i;this._inited||(this._registerNodeEvents(),C$99t=new b2.BodyDef,this.type===C$99a.Animated?C$99t.type=C$99a.Kinematic:C$99t.type=this.type,C$99t.allowSleep=this.allowSleep,C$99t.gravityScale=this.gravityScale,C$99t.linearDamping=this.linearDamping,C$99t.angularDamping=this.angularDamping,C$99e=this.linearVelocity,C$99t.linearVelocity=new b2.Vec2(C$99e.x/C$99r,C$99e.y/C$99r),C$99t.angularVelocity=this.angularVelocity*C$99s,C$99t.fixedRotation=this.fixedRotation,C$99t.bullet=this.bullet,C$99i=(C$99e=this.node).convertToWorldSpaceAR(C$99l),C$99t.position=new b2.Vec2(C$99i.x/C$99r,C$99i.y/C$99r),C$99t.angle=-Math.PI/180*C$99o(C$99e),C$99t.awake=this.awakeOnLoad,cc.director.getPhysicsManager()._addBody(this,C$99t),this._inited=!0)},__destroy:function(){this._inited&&(cc.director.getPhysicsManager()._removeBody(this),this._unregisterNodeEvents(),this._inited=!1)},_getBody:function(){return this._b2Body}});cc.RigidBody=C$99h.exports=C$99t},{"../CCNode":30,"./CCPhysicsTypes":164,"./utils":187}],167:[function(C$99t,C$99e,C$99i){"use strict";var C$99n,C$99r,C$99s=C$99t("../../../external/box2d/box2d");for(C$99n in window.b2={},C$99s)-1===C$99n.indexOf("b2_")&&(C$99r=C$99n.replace("b2",""),b2[C$99r]=C$99s[C$99n]);b2.maxPolygonVertices=8},{"../../../external/box2d/box2d":362}],168:[function(C$99t,C$99e,C$99i){"use strict";var C$99s=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99t=cc.Class({name:"cc.PhysicsBoxCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Box],editor:{menu:!1,requireComponent:cc.RigidBody},_createShape:function(C$99t){var C$99e=Math.abs(C$99t.x),C$99t=Math.abs(C$99t.y),C$99i=this.size.width/2/C$99s*C$99e,C$99n=this.size.height/2/C$99s*C$99t,C$99e=this.offset.x/C$99s*C$99e,C$99t=this.offset.y/C$99s*C$99t,C$99r=new b2.PolygonShape;return C$99r.SetAsBox(C$99i,C$99n,new b2.Vec2(C$99e,C$99t),0),C$99r}});cc.PhysicsBoxCollider=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],169:[function(C$99t,C$99e,C$99i){"use strict";var C$99o=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99t=cc.Class({name:"cc.PhysicsChainCollider",extends:cc.PhysicsCollider,editor:{menu:!1,inspector:!1,requireComponent:cc.RigidBody},properties:{loop:!1,points:{default:function(){return[cc.v2(-50,0),cc.v2(50,0)]},type:[cc.Vec2]},threshold:{default:1,serializable:!1,visible:!1}},_createShape:function(C$99t){for(var C$99e=new b2.ChainShape,C$99i=this.points,C$99n=[],C$99r=0;C$99r<C$99i.length;C$99r++){var C$99s=C$99i[C$99r];C$99n.push(new b2.Vec2(C$99s.x/C$99o*C$99t.x,C$99s.y/C$99o*C$99t.y))}return this.loop?C$99e.CreateLoop(C$99n,C$99n.length):C$99e.CreateChain(C$99n,C$99n.length),C$99e},resetInEditor:!1,resetPointsByContour:!1});cc.PhysicsChainCollider=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],170:[function(C$99t,C$99e,C$99i){"use strict";var C$99r=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99t=cc.Class({name:"cc.PhysicsCircleCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Circle],editor:{menu:!1,requireComponent:cc.RigidBody},_createShape:function(C$99t){var C$99e=Math.abs(C$99t.x),C$99t=Math.abs(C$99t.y),C$99i=this.offset.x/C$99r*C$99e,C$99t=this.offset.y/C$99r*C$99t,C$99n=new b2.CircleShape;return C$99n.m_radius=this.radius/C$99r*C$99e,C$99n.m_p=new b2.Vec2(C$99i,C$99t),C$99n}});cc.PhysicsCircleCollider=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],171:[function(C$99t,C$99e,C$99i){"use strict";var C$99u=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99d=C$99t("../utils").getWorldScale,C$99t=cc.Class({name:"cc.PhysicsCollider",extends:cc.Collider,ctor:function(){this._fixtures=[],this._shapes=[],this._inited=!1,this._rect=cc.rect()},properties:{_density:1,_sensor:!1,_friction:.2,_restitution:0,density:{tooltip:!1,get:function(){return this._density},set:function(C$99t){this._density=C$99t}},sensor:{tooltip:!1,get:function(){return this._sensor},set:function(C$99t){this._sensor=C$99t}},friction:{tooltip:!1,get:function(){return this._friction},set:function(C$99t){this._friction=C$99t}},restitution:{tooltip:!1,get:function(){return this._restitution},set:function(C$99t){this._restitution=C$99t}},body:{default:null,type:cc.RigidBody,visible:!1}},onDisable:function(){this._destroy()},onEnable:function(){this._init()},start:function(){this._init()},_getFixtureIndex:function(C$99t){return this._fixtures.indexOf(C$99t)},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){if(!this._inited){var C$99t=this.body||this.getComponent(cc.RigidBody);if(C$99t){var C$99e=C$99t._getBody();if(C$99e){for(var C$99i=C$99t.node,C$99n=C$99d(C$99i),C$99r=0===(this._scale=C$99n).x&&0===C$99n.y?[]:this._createShape(C$99n),C$99n=(C$99r instanceof Array||(C$99r=[C$99r]),1<<C$99i.groupIndex),C$99s=0,C$99o=cc.game.collisionMatrix[C$99i.groupIndex],C$99a=0;C$99a<C$99o.length;C$99a++)C$99o[C$99a]&&(C$99s|=1<<C$99a);for(var C$99h={categoryBits:C$99n,maskBits:C$99s,groupIndex:0},C$99u=cc.director.getPhysicsManager(),C$99c=0;C$99c<C$99r.length;C$99c++){var C$99_=C$99r[C$99c],C$99l=new b2.FixtureDef,C$99l=(C$99l.density=this.density,C$99l.isSensor=this.sensor,C$99l.friction=this.friction,C$99l.restitution=this.restitution,C$99l.shape=C$99_,C$99l.filter=C$99h,C$99e.CreateFixture(C$99l));C$99l.collider=this,C$99t.enabledContactListener&&C$99u._registerContactFixture(C$99l),this._shapes.push(C$99_),this._fixtures.push(C$99l)}this.body=C$99t,this._inited=!0}}}},__destroy:function(){if(this._inited){for(var C$99t=this._fixtures,C$99e=this.body._getBody(),C$99i=cc.director.getPhysicsManager(),C$99n=C$99t.length-1;0<=C$99n;C$99n--){var C$99r=C$99t[C$99n];C$99r.collider=null,C$99i._unregisterContactFixture(C$99r),C$99e&&C$99e.DestroyFixture(C$99r)}this.body=null,this._fixtures.length=0,this._shapes.length=0,this._inited=!1}},_createShape:function(){},apply:function(){this._destroy(),this._init()},getAABB:function(){for(var C$99t=1e7,C$99e=1e7,C$99i=-1e7,C$99n=-1e7,C$99r=this._fixtures,C$99s=0;C$99s<C$99r.length;C$99s++)for(var C$99o=C$99r[C$99s],C$99h=C$99o.GetShape().GetChildCount(),C$99a=0;C$99a<C$99h;C$99a++){var C$99c=C$99o.GetAABB(C$99a);C$99c.lowerBound.x<C$99t&&(C$99t=C$99c.lowerBound.x),C$99c.lowerBound.y<C$99e&&(C$99e=C$99c.lowerBound.y),C$99c.upperBound.x>C$99i&&(C$99i=C$99c.upperBound.x),C$99c.upperBound.y>C$99n&&(C$99n=C$99c.upperBound.y)}C$99e*=C$99u,C$99i*=C$99u,C$99n*=C$99u;var C$99l=this._rect;return C$99l.x=C$99t*=C$99u,C$99l.y=C$99e,C$99l.width=C$99i-C$99t,C$99l.height=C$99n-C$99e,C$99l}});cc.PhysicsCollider=C$99e.exports=C$99t},{"../CCPhysicsTypes":164,"../utils":187}],172:[function(C$99t,C$99e,C$99i){"use strict";var C$99f=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99p=C$99t("../CCPolygonSeparator"),C$99t=cc.Class({name:"cc.PhysicsPolygonCollider",extends:cc.PhysicsCollider,mixins:[cc.Collider.Polygon],editor:{menu:!1,inspector:!1,requireComponent:cc.RigidBody},_createShape:function(C$99t){for(var C$99e=[],C$99i=this.points,C$99h=(0<C$99i.length&&C$99i[0].equals(C$99i[C$99i.length-1])&&--C$99i.length,C$99p.ConvexPartition(C$99i)),C$99u=this.offset,C$99n=0;C$99n<C$99h.length;C$99n++){for(var C$99_=C$99h[C$99n],C$99r=null,C$99s=[],C$99o=null,C$99a=0,C$99d=C$99_.length;C$99a<C$99d;C$99a++){var C$99r=C$99r||new b2.PolygonShape,C$99c=C$99_[C$99a],C$99l=(C$99c.x+C$99u.x)/C$99f*C$99t.x,C$99c=(C$99c.y+C$99u.y)/C$99f*C$99t.y,C$99l=new b2.Vec2(C$99l,C$99c);C$99s.push(C$99l),C$99o=C$99o||C$99l,C$99s.length===b2.maxPolygonVertices&&(C$99r.Set(C$99s,C$99s.length),C$99e.push(C$99r),C$99r=null,C$99a<C$99d-1&&(C$99s=[C$99o,C$99s[C$99s.length-1]]))}C$99r&&(C$99r.Set(C$99s,C$99s.length),C$99e.push(C$99r))}return C$99e}});cc.PhysicsPolygonCollider=C$99e.exports=C$99t},{"../CCPhysicsTypes":164,"../CCPolygonSeparator":165}],173:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./box2d-adapter"),C$99t("./CCPhysicsManager"),C$99t("./CCRigidBody"),C$99t("./CCPhysicsContact"),C$99t("./collider/CCPhysicsCollider"),C$99t("./collider/CCPhysicsChainCollider"),C$99t("./collider/CCPhysicsCircleCollider"),C$99t("./collider/CCPhysicsBoxCollider"),C$99t("./collider/CCPhysicsPolygonCollider"),C$99t("./joint/CCJoint"),C$99t("./joint/CCDistanceJoint"),C$99t("./joint/CCRevoluteJoint"),C$99t("./joint/CCMouseJoint"),C$99t("./joint/CCMotorJoint"),C$99t("./joint/CCPrismaticJoint"),C$99t("./joint/CCWeldJoint"),C$99t("./joint/CCWheelJoint"),C$99t("./joint/CCRopeJoint"),C$99t("./platform/CCPhysicsContactListner"),C$99t("./platform/CCPhysicsAABBQueryCallback"),C$99t("./platform/CCPhysicsRayCastCallback")},{"./CCPhysicsContact":162,"./CCPhysicsManager":163,"./CCRigidBody":166,"./box2d-adapter":167,"./collider/CCPhysicsBoxCollider":168,"./collider/CCPhysicsChainCollider":169,"./collider/CCPhysicsCircleCollider":170,"./collider/CCPhysicsCollider":171,"./collider/CCPhysicsPolygonCollider":172,"./joint/CCDistanceJoint":174,"./joint/CCJoint":175,"./joint/CCMotorJoint":176,"./joint/CCMouseJoint":177,"./joint/CCPrismaticJoint":178,"./joint/CCRevoluteJoint":179,"./joint/CCRopeJoint":180,"./joint/CCWeldJoint":181,"./joint/CCWheelJoint":182,"./platform/CCPhysicsAABBQueryCallback":183,"./platform/CCPhysicsContactListner":184,"./platform/CCPhysicsRayCastCallback":186}],174:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99t=cc.Class({name:"cc.DistanceJoint",extends:cc.Joint,editor:!1,properties:{_distance:1,_frequency:0,_dampingRatio:0,distance:{tooltip:!1,get:function(){return this._distance},set:function(C$99t){this._distance=C$99t,this._joint&&this._joint.SetLength(C$99t)}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$99t){this._frequency=C$99t,this._joint&&this._joint.SetFrequency(C$99t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$99t){this._dampingRatio=C$99t,this._joint&&this._joint.SetDampingRatio(C$99t)}}},_createJointDef:function(){var C$99t=new b2.DistanceJointDef;return C$99t.localAnchorA=new b2.Vec2(this.anchor.x/C$99n,this.anchor.y/C$99n),C$99t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$99n,this.connectedAnchor.y/C$99n),C$99t.length=this.distance/C$99n,C$99t.dampingRatio=this.dampingRatio,C$99t.frequencyHz=this.frequency,C$99t}});cc.DistanceJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],175:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99t=cc.Class({name:"cc.Joint",extends:cc.Component,editor:{requireComponent:cc.RigidBody},properties:{anchor:{default:cc.v2(0,0),tooltip:!1},connectedAnchor:{default:cc.v2(0,0),tooltip:!1},connectedBody:{default:null,type:cc.RigidBody,tooltip:!1},collideConnected:{default:!1,tooltip:!1}},onDisable:function(){this._destroy()},onEnable:function(){this._init()},start:function(){this._init()},apply:function(){this._destroy(),this._init()},getWorldAnchor:function(){var C$99t;return this._joint?(C$99t=this._joint.GetAnchorA(),cc.v2(C$99t.x*C$99n,C$99t.y*C$99n)):cc.Vec2.ZERO},getWorldConnectedAnchor:function(){var C$99t;return this._joint?(C$99t=this._joint.GetAnchorB(),cc.v2(C$99t.x*C$99n,C$99t.y*C$99n)):cc.Vec2.ZERO},getReactionForce:function(C$99t){var C$99e=cc.v2();return this._joint?this._joint.GetReactionForce(C$99t,C$99e):C$99e},getReactionTorque:function(C$99t){return this._joint?this._joint.GetReactionTorque(C$99t):0},_init:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__init",[])},_destroy:function(){cc.director.getPhysicsManager().pushDelayEvent(this,"__destroy",[])},__init:function(){var C$99t;this._inited||(this.body=this.getComponent(cc.RigidBody),!this._isValid()||(C$99t=this._createJointDef())&&(C$99t.bodyA=this.body._getBody(),C$99t.bodyB=this.connectedBody._getBody(),C$99t.collideConnected=this.collideConnected,cc.director.getPhysicsManager()._addJoint(this,C$99t),this._inited=!0))},__destroy:function(){this._inited&&(cc.director.getPhysicsManager()._removeJoint(this),this._joint=null,this._inited=!1)},_createJointDef:function(){return null},_isValid:function(){return this.body&&this.body._getBody()&&this.connectedBody&&this.connectedBody._getBody()}});cc.Joint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],176:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99r=C$99t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$99t=cc.Class({name:"cc.MotorJoint",extends:cc.Joint,editor:!1,properties:{_linearOffset:cc.v2(0,0),_angularOffset:0,_maxForce:1,_maxTorque:1,_correctionFactor:.3,anchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},connectedAnchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},linearOffset:{tooltip:!1,get:function(){return this._linearOffset},set:function(C$99t){this._linearOffset=C$99t,this._joint&&this._joint.SetLinearOffset(new b2.Vec2(C$99t.x/C$99n,C$99t.y/C$99n))}},angularOffset:{tooltip:!1,get:function(){return this._angularOffset},set:function(C$99t){this._angularOffset=C$99t,this._joint&&this._joint.SetAngularOffset(C$99t)}},maxForce:{tooltip:!1,get:function(){return this._maxForce},set:function(C$99t){this._maxForce=C$99t,this._joint&&this._joint.SetMaxForce(C$99t)}},maxTorque:{tooltip:!1,get:function(){return this._maxTorque},set:function(C$99t){this._maxTorque=C$99t,this._joint&&this._joint.SetMaxTorque(C$99t)}},correctionFactor:{tooltip:!1,get:function(){return this._correctionFactor},set:function(C$99t){this._correctionFactor=C$99t,this._joint&&this._joint.SetCorrectionFactor(C$99t)}}},_createJointDef:function(){var C$99t=new b2.MotorJointDef;return C$99t.linearOffset=new b2.Vec2(this.linearOffset.x/C$99n,this.linearOffset.y/C$99n),C$99t.angularOffset=this.angularOffset*C$99r,C$99t.maxForce=this.maxForce,C$99t.maxTorque=this.maxTorque,C$99t.correctionFactor=this.correctionFactor,C$99t}});cc.MotorJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],177:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99r=new b2.Vec2,C$99t=cc.Class({name:"cc.MouseJoint",extends:cc.Joint,editor:!1,properties:{_target:1,_frequency:5,_dampingRatio:.7,_maxForce:0,connectedBody:{default:null,type:cc.RigidBody,visible:!1,override:!0},collideConnected:{default:!0,visible:!1,override:!0},anchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},connectedAnchor:{tooltip:!1,default:cc.v2(0,0),override:!0,visible:!1},mouseRegion:{tooltip:!1,default:null,type:cc.Node},target:{tooltip:!1,visible:!1,get:function(){return this._target},set:function(C$99t){this._target=C$99t,this._joint&&(C$99r.x=C$99t.x/C$99n,C$99r.y=C$99t.y/C$99n,this._joint.SetTarget(C$99r))}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$99t){this._frequency=C$99t,this._joint&&this._joint.SetFrequency(C$99t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$99t){this._dampingRatio=C$99t,this._joint&&this._joint.SetDampingRatio(C$99t)}},maxForce:{tooltip:!1,visible:!1,get:function(){return this._maxForce},set:function(C$99t){this._maxForce=C$99t,this._joint&&this._joint.SetMaxForce(C$99t)}}},onLoad:function(){var C$99t=this.mouseRegion||this.node;C$99t.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),C$99t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),C$99t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),C$99t.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onEnable:function(){},start:function(){},onTouchBegan:function(C$99t){var C$99e=cc.director.getPhysicsManager(),C$99t=this._pressPoint=C$99t.touch.getLocation(),C$99e=(cc.Camera&&cc.Camera.main&&(C$99t=cc.Camera.main.getScreenToWorldPoint(C$99t)),C$99e.testPoint(C$99t));C$99e&&((this.connectedBody=C$99e.body).awake=!0,this.maxForce=1e3*this.connectedBody.getMass(),this.target=C$99t,this._init())},onTouchMove:function(C$99t){this._pressPoint=C$99t.touch.getLocation()},onTouchEnd:function(C$99t){this._destroy(),this._pressPoint=null},_createJointDef:function(){var C$99t=new b2.MouseJointDef;return C$99r.x=this.target.x/C$99n,C$99r.y=this.target.y/C$99n,C$99t.target=C$99r,C$99t.maxForce=this.maxForce,C$99t.dampingRatio=this.dampingRatio,C$99t.frequencyHz=this.frequency,C$99t},update:function(){var C$99t;this._pressPoint&&this._isValid()&&(C$99t=cc.Camera.findCamera(this.node),this.target=C$99t?C$99t.getScreenToWorldPoint(this._pressPoint):this._pressPoint)}});cc.MouseJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],178:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99r=C$99t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$99t=cc.Class({name:"cc.PrismaticJoint",extends:cc.Joint,editor:!1,properties:{localAxisA:{default:cc.v2(1,0),tooltip:!1},referenceAngle:{default:0,tooltip:!1},enableLimit:{default:!1,tooltip:!1},enableMotor:{default:!1,tooltip:!1},lowerLimit:{default:0,tooltip:!1},upperLimit:{default:0,tooltip:!1},_maxMotorForce:0,_motorSpeed:0,maxMotorForce:{tooltip:!1,get:function(){return this._maxMotorForce},set:function(C$99t){this._maxMotorForce=C$99t,this._joint&&this._joint.SetMaxMotorForce(C$99t)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$99t){this._motorSpeed=C$99t,this._joint&&this._joint.SetMotorSpeed(C$99t)}}},_createJointDef:function(){var C$99t=new b2.PrismaticJointDef;return C$99t.localAnchorA=new b2.Vec2(this.anchor.x/C$99n,this.anchor.y/C$99n),C$99t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$99n,this.connectedAnchor.y/C$99n),C$99t.localAxisA=new b2.Vec2(this.localAxisA.x,this.localAxisA.y),C$99t.referenceAngle=this.referenceAngle*C$99r,C$99t.enableLimit=this.enableLimit,C$99t.lowerTranslation=this.lowerLimit/C$99n,C$99t.upperTranslation=this.upperLimit/C$99n,C$99t.enableMotor=this.enableMotor,C$99t.maxMotorForce=this.maxMotorForce,C$99t.motorSpeed=this.motorSpeed,C$99t}});cc.PrismaticJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],179:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99r=C$99t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$99s=C$99t("../CCPhysicsTypes").PHYSICS_ANGLE_TO_ANGLE,C$99t=cc.Class({name:"cc.RevoluteJoint",extends:cc.Joint,editor:!1,properties:{_maxMotorTorque:0,_motorSpeed:0,_enableLimit:!1,_enableMotor:!1,referenceAngle:{default:0,tooltip:!1},lowerAngle:{default:0,tooltip:!1},upperAngle:{default:0,tooltip:!1},maxMotorTorque:{tooltip:!1,get:function(){return this._maxMotorTorque},set:function(C$99t){this._maxMotorTorque=C$99t,this._joint&&this._joint.SetMaxMotorTorque(C$99t)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$99t){this._motorSpeed=C$99t,this._joint&&this._joint.SetMotorSpeed(C$99t*C$99r)}},enableLimit:{tooltip:!1,get:function(){return this._enableLimit},set:function(C$99t){this._enableLimit=C$99t,this._joint&&this._joint.EnableLimit(C$99t)}},enableMotor:{tooltip:!1,get:function(){return this._enableMotor},set:function(C$99t){this._enableMotor=C$99t,this._joint&&this._joint.EnableMotor(C$99t)}}},getJointAngle:function(){return this._joint?this._joint.GetJointAngle()*C$99s:0},setLimits:function(C$99t,C$99e){if(this._joint)return this._joint.SetLimits(C$99t*C$99r,C$99e*C$99r)},_createJointDef:function(){var C$99t=new b2.RevoluteJointDef;return C$99t.localAnchorA=new b2.Vec2(this.anchor.x/C$99n,this.anchor.y/C$99n),C$99t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$99n,this.connectedAnchor.y/C$99n),C$99t.lowerAngle=this.upperAngle*C$99r,C$99t.upperAngle=this.lowerAngle*C$99r,C$99t.maxMotorTorque=this.maxMotorTorque,C$99t.motorSpeed=this.motorSpeed*C$99r,C$99t.enableLimit=this.enableLimit,C$99t.enableMotor=this.enableMotor,C$99t.referenceAngle=this.referenceAngle*C$99r,C$99t}});cc.RevoluteJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],180:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99t=cc.Class({name:"cc.RopeJoint",extends:cc.Joint,editor:!1,properties:{_maxLength:1,maxLength:{tooltip:!1,get:function(){return this._maxLength},set:function(C$99t){this._maxLength=C$99t,this._joint&&this._joint.SetMaxLength(C$99t)}}},_createJointDef:function(){var C$99t=new b2.RopeJointDef;return C$99t.localAnchorA=new b2.Vec2(this.anchor.x/C$99n,this.anchor.y/C$99n),C$99t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$99n,this.connectedAnchor.y/C$99n),C$99t.maxLength=this.maxLength/C$99n,C$99t}});cc.RopeJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],181:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99r=C$99t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$99t=cc.Class({name:"cc.WeldJoint",extends:cc.Joint,editor:!1,properties:{referenceAngle:{default:0,tooltip:!1},_frequency:0,_dampingRatio:0,frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$99t){this._frequency=C$99t,this._joint&&this._joint.SetFrequency(C$99t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$99t){this._dampingRatio=C$99t,this._joint&&this._joint.SetDampingRatio(C$99t)}}},_createJointDef:function(){var C$99t=new b2.WeldJointDef;return C$99t.localAnchorA=new b2.Vec2(this.anchor.x/C$99n,this.anchor.y/C$99n),C$99t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$99n,this.connectedAnchor.y/C$99n),C$99t.referenceAngle=this.referenceAngle*C$99r,C$99t.frequencyHz=this.frequency,C$99t.dampingRatio=this.dampingRatio,C$99t}});cc.WeldJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],182:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99r=C$99t("../CCPhysicsTypes").ANGLE_TO_PHYSICS_ANGLE,C$99t=cc.Class({name:"cc.WheelJoint",extends:cc.Joint,editor:!1,properties:{_maxMotorTorque:0,_motorSpeed:0,_enableMotor:!1,_frequency:2,_dampingRatio:.7,localAxisA:{default:cc.v2(1,0),tooltip:!1},maxMotorTorque:{tooltip:!1,get:function(){return this._maxMotorTorque},set:function(C$99t){this._maxMotorTorque=C$99t,this._joint&&this._joint.SetMaxMotorTorque(C$99t)}},motorSpeed:{tooltip:!1,get:function(){return this._motorSpeed},set:function(C$99t){this._motorSpeed=C$99t,this._joint&&this._joint.SetMotorSpeed(C$99t*C$99r)}},enableMotor:{tooltip:!1,get:function(){return this._enableMotor},set:function(C$99t){this._enableMotor=C$99t,this._joint&&this._joint.EnableMotor(C$99t)}},frequency:{tooltip:!1,get:function(){return this._frequency},set:function(C$99t){this._frequency=C$99t,this._joint&&this._joint.SetSpringFrequencyHz(C$99t)}},dampingRatio:{tooltip:!1,get:function(){return this._dampingRatio},set:function(C$99t){this._dampingRatio=C$99t,this._joint&&this._joint.SetDampingRatio(C$99t)}}},_createJointDef:function(){var C$99t=new b2.WheelJointDef;return C$99t.localAnchorA=new b2.Vec2(this.anchor.x/C$99n,this.anchor.y/C$99n),C$99t.localAnchorB=new b2.Vec2(this.connectedAnchor.x/C$99n,this.connectedAnchor.y/C$99n),C$99t.localAxisA=new b2.Vec2(this.localAxisA.x,this.localAxisA.y),C$99t.maxMotorTorque=this.maxMotorTorque,C$99t.motorSpeed=this.motorSpeed*C$99r,C$99t.enableMotor=this.enableMotor,C$99t.dampingRatio=this.dampingRatio,C$99t.frequencyHz=this.frequency,C$99t}});cc.WheelJoint=C$99e.exports=C$99t},{"../CCPhysicsTypes":164}],183:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../CCPhysicsTypes").BodyType;function C$99r(){this._point=new b2.Vec2,this._isPoint=!1,this._fixtures=[]}C$99r.prototype.init=function(C$99t){C$99t?(this._isPoint=!0,this._point.x=C$99t.x,this._point.y=C$99t.y):this._isPoint=!1,this._fixtures.length=0},C$99r.prototype.ReportFixture=function(C$99t){if(C$99t.GetBody().GetType()===C$99n.Dynamic)if(this._isPoint){if(C$99t.TestPoint(this._point))return this._fixtures.push(C$99t),!1}else this._fixtures.push(C$99t);return!0},C$99r.prototype.getFixture=function(){return this._fixtures[0]},C$99r.prototype.getFixtures=function(){return this._fixtures},cc.PhysicsAABBQueryCallback=C$99e.exports=C$99r},{"../CCPhysicsTypes":164}],184:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){this._contactFixtures=[]}C$99n.prototype.setBeginContact=function(C$99t){this._BeginContact=C$99t},C$99n.prototype.setEndContact=function(C$99t){this._EndContact=C$99t},C$99n.prototype.setPreSolve=function(C$99t){this._PreSolve=C$99t},C$99n.prototype.setPostSolve=function(C$99t){this._PostSolve=C$99t},C$99n.prototype.BeginContact=function(C$99t){var C$99e,C$99i,C$99n;this._BeginContact&&(C$99e=C$99t.GetFixtureA(),C$99i=C$99t.GetFixtureB(),C$99n=this._contactFixtures,C$99t._shouldReport=!1,-1===C$99n.indexOf(C$99e)&&-1===C$99n.indexOf(C$99i)||(C$99t._shouldReport=!0,this._BeginContact(C$99t)))},C$99n.prototype.EndContact=function(C$99t){this._EndContact&&C$99t._shouldReport&&(C$99t._shouldReport=!1,this._EndContact(C$99t))},C$99n.prototype.PreSolve=function(C$99t,C$99e){this._PreSolve&&C$99t._shouldReport&&this._PreSolve(C$99t,C$99e)},C$99n.prototype.PostSolve=function(C$99t,C$99e){this._PostSolve&&C$99t._shouldReport&&this._PostSolve(C$99t,C$99e)},C$99n.prototype.registerContactFixture=function(C$99t){this._contactFixtures.push(C$99t)},C$99n.prototype.unregisterContactFixture=function(C$99t){cc.js.array.remove(this._contactFixtures,C$99t)},cc.PhysicsContactListener=C$99e.exports=C$99n},{}],185:[function(C$99t,C$99e,C$99i){"use strict";var C$99o=C$99t("../CCPhysicsTypes").PTM_RATIO,C$99a=cc.v2(),C$99n=cc.Color.GREEN,C$99r=cc.Color.RED;function C$99s(C$99t){b2.Draw.call(this),this._drawer=C$99t,this._xf=this._dxf=new b2.Transform}cc.js.extend(C$99s,b2.Draw),cc.js.mixin(C$99s.prototype,{_DrawPolygon:function(C$99t,C$99e){for(var C$99i=this._drawer,C$99n=0;C$99n<C$99e;C$99n++){b2.Transform.MulXV(this._xf,C$99t[C$99n],C$99a);var C$99r=C$99a.x*C$99o,C$99s=C$99a.y*C$99o;0===C$99n?C$99i.moveTo(C$99r,C$99s):C$99i.lineTo(C$99r,C$99s)}C$99i.close()},DrawPolygon:function(C$99t,C$99e,C$99i){this._applyStrokeColor(C$99i),this._DrawPolygon(C$99t,C$99e),this._drawer.stroke()},DrawSolidPolygon:function(C$99t,C$99e,C$99i){this._applyFillColor(C$99i),this._DrawPolygon(C$99t,C$99e),this._drawer.fill(),this._drawer.stroke()},_DrawCircle:function(C$99t,C$99e){var C$99i=this._xf.p;this._drawer.circle((C$99t.x+C$99i.x)*C$99o,(C$99t.y+C$99i.y)*C$99o,C$99e*C$99o)},DrawCircle:function(C$99t,C$99e,C$99i){this._applyStrokeColor(C$99i),this._DrawCircle(C$99t,C$99e),this._drawer.stroke()},DrawSolidCircle:function(C$99t,C$99e,C$99i,C$99n){this._applyFillColor(C$99n),this._DrawCircle(C$99t,C$99e),this._drawer.fill()},DrawSegment:function(C$99t,C$99e,C$99i){var C$99n=this._drawer;if(C$99t.x===C$99e.x&&C$99t.y===C$99e.y)return this._applyFillColor(C$99i),this._DrawCircle(C$99t,2/C$99o),void C$99n.fill();this._applyStrokeColor(C$99i),b2.Transform.MulXV(this._xf,C$99t,C$99a),C$99n.moveTo(C$99a.x*C$99o,C$99a.y*C$99o),b2.Transform.MulXV(this._xf,C$99e,C$99a),C$99n.lineTo(C$99a.x*C$99o,C$99a.y*C$99o),C$99n.stroke()},DrawTransform:function(C$99t){var C$99e=this._drawer;C$99e.strokeColor=C$99r,C$99a.x=C$99a.y=0,b2.Transform.MulXV(C$99t,C$99a,C$99a),C$99e.moveTo(C$99a.x*C$99o,C$99a.y*C$99o),C$99a.x=1,C$99a.y=0,b2.Transform.MulXV(C$99t,C$99a,C$99a),C$99e.lineTo(C$99a.x*C$99o,C$99a.y*C$99o),C$99e.stroke(),C$99e.strokeColor=C$99n,C$99a.x=C$99a.y=0,b2.Transform.MulXV(C$99t,C$99a,C$99a),C$99e.moveTo(C$99a.x*C$99o,C$99a.y*C$99o),C$99a.x=0,C$99a.y=1,b2.Transform.MulXV(C$99t,C$99a,C$99a),C$99e.lineTo(C$99a.x*C$99o,C$99a.y*C$99o),C$99e.stroke()},DrawPoint:function(C$99t,C$99e,C$99i){},_applyStrokeColor:function(C$99t){var C$99e=this._drawer.strokeColor;C$99e.r=255*C$99t.r,C$99e.g=255*C$99t.g,C$99e.b=255*C$99t.b,C$99e.a=150,this._drawer.strokeColor=C$99e},_applyFillColor:function(C$99t){var C$99e=this._drawer.fillColor;C$99e.r=255*C$99t.r,C$99e.g=255*C$99t.g,C$99e.b=255*C$99t.b,C$99e.a=150,this._drawer.fillColor=C$99e},PushTransform:function(C$99t){this._xf=C$99t},PopTransform:function(){this._xf=this._dxf}}),C$99e.exports=C$99s},{"../CCPhysicsTypes":164}],186:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){this._type=0,this._fixtures=[],this._points=[],this._normals=[],this._fractions=[]}C$99n.prototype.init=function(C$99t){this._type=C$99t,this._fixtures.length=0,this._points.length=0,this._normals.length=0,this._fractions.length=0},C$99n.prototype.ReportFixture=function(C$99t,C$99e,C$99i,C$99n){return 0===this._type?(this._fixtures[0]=C$99t,this._points[0]=C$99e,this._normals[0]=C$99i,this._fractions[0]=C$99n):(this._fixtures.push(C$99t),this._points.push(cc.v2(C$99e)),this._normals.push(cc.v2(C$99i)),this._fractions.push(C$99n),1===this._type?0:2<=this._type?1:C$99n)},C$99n.prototype.getFixtures=function(){return this._fixtures},C$99n.prototype.getPoints=function(){return this._points},C$99n.prototype.getNormals=function(){return this._normals},C$99n.prototype.getFractions=function(){return this._fractions},cc.PhysicsRayCastCallback=C$99e.exports=C$99n},{}],187:[function(C$99t,C$99e,C$99i){"use strict";C$99e.exports={getWorldRotation:function(C$99t){for(var C$99e=C$99t.angle,C$99i=C$99t.parent;C$99i.parent;)C$99e+=C$99i.angle,C$99i=C$99i.parent;return-C$99e},getWorldScale:function(C$99t){for(var C$99e=C$99t.scaleX,C$99i=C$99t.scaleY,C$99n=C$99t.parent;C$99n.parent;)C$99e*=C$99n.scaleX,C$99i*=C$99n.scaleY,C$99n=C$99n.parent;return cc.v2(C$99e,C$99i)},convertToNodeRotation:function(C$99t,C$99e){C$99e-=-C$99t.angle;for(var C$99i=C$99t.parent;C$99i.parent;)C$99e-=-C$99i.angle,C$99i=C$99i.parent;return C$99e}}},{}],188:[function(C$99t,C$99i,C$99r){"use strict";C$99t("../assets/CCAsset");var C$99s=C$99t("./utils").callInNextTick,C$99y=C$99t("../load-pipeline/CCLoader"),C$99C=C$99t("../load-pipeline/asset-table"),C$99S=C$99t("../load-pipeline/pack-downloader"),C$99a=C$99t("../load-pipeline/auto-release-utils"),C$99g=C$99t("../utils/decode-uuid"),C$99T=C$99t("../load-pipeline/md5-pipe"),C$99w=C$99t("../load-pipeline/subpackage-pipe"),C$99v=C$99t("./js"),C$99x="",C$99b="",C$99A=C$99v.createMap(!0);function C$99c(C$99t){return C$99t&&(C$99t.constructor===cc.SceneAsset||C$99t instanceof cc.Scene)}function C$99E(C$99t,C$99e){this.url=C$99t,this.type=C$99e}var C$99e={loadAsset:function(C$99n,C$99r,C$99t){if("string"!=typeof C$99n)return C$99s(C$99r,new Error("[AssetLibrary] uuid must be string"),null);var C$99e={uuid:C$99n,type:"uuid"};C$99t&&C$99t.existingAsset&&(C$99e.existingAsset=C$99t.existingAsset),C$99y.load(C$99e,function(C$99t,C$99e){var C$99i;C$99t||!C$99e?(C$99i="string"==typeof C$99t?C$99t:C$99t?C$99t.message||C$99t.errorMessage||JSON.stringify(C$99t):"Unknown error",C$99t=new Error("[AssetLibrary] loading JSON or dependencies failed:"+C$99i)):(C$99e.constructor===cc.SceneAsset&&(C$99i=cc.loader._getReferenceKey(C$99n),C$99e.scene.dependAssets=C$99a.getDependsRecursively(C$99i)),C$99c(C$99e)&&(C$99i=cc.loader._getReferenceKey(C$99n),C$99y.removeItem(C$99i))),C$99r&&C$99r(C$99t,C$99e)})},getLibUrlNoExt:function(C$99t,C$99e){return C$99t=C$99g(C$99t),(C$99e?C$99b+"assets/":C$99x)+C$99t.slice(0,2)+"/"+C$99t},_queryAssetInfoInEditor:function(C$99t,C$99e){},_getAssetInfoInRuntime:function(C$99t,C$99e){C$99e=C$99e||{url:null,raw:!1};var C$99i=C$99A[C$99t];return C$99i&&!C$99v.isChildClassOf(C$99i.type,cc.Asset)?(C$99e.url=C$99b+C$99i.url,C$99e.raw=!0):(C$99e.url=this.getLibUrlNoExt(C$99t)+".json",C$99e.raw=!1),C$99e},_uuidInSettings:function(C$99t){return C$99t in C$99A},queryAssetInfo:function(C$99t,C$99e){C$99t=this._getAssetInfoInRuntime(C$99t);C$99e(null,C$99t.url,C$99t.raw)},parseUuidInEditor:function(C$99t){},loadJson:function(C$99t,C$99n){var C$99r=""+((new Date).getTime()+Math.random()),C$99t={uuid:C$99r,type:"uuid",content:C$99t,skips:[C$99y.assetLoader.id,C$99y.downloader.id]};C$99y.load(C$99t,function(C$99t,C$99e){var C$99i;C$99t?C$99t=new Error("[AssetLibrary] loading JSON or dependencies failed: "+C$99t.message):(C$99e.constructor===cc.SceneAsset&&(C$99i=cc.loader._getReferenceKey(C$99r),C$99e.scene.dependAssets=C$99a.getDependsRecursively(C$99i)),C$99c(C$99e)&&(C$99i=cc.loader._getReferenceKey(C$99r),C$99y.removeItem(C$99i))),C$99e._uuid="",C$99n&&C$99n(C$99t,C$99e)})},getAssetByUuid:function(C$99t){return C$99e._uuidToAsset[C$99t]||null},init:function(C$99t){var C$99e=(C$99e=C$99t.libraryPath).replace(/\\/g,"/"),C$99e=(C$99x=cc.path.stripSep(C$99e)+"/",C$99b=C$99t.rawAssetsBase,C$99t.subpackages&&(C$99e=new C$99w(C$99t.subpackages),cc.loader.insertPipeAfter(cc.loader.assetLoader,C$99e),cc.loader.subPackPipe=C$99e),C$99t.md5AssetsMap);if(C$99e&&C$99e.import){for(var C$99i=0,C$99n=0,C$99h=C$99v.createMap(!0),C$99r=C$99e.import,C$99i=0;C$99i<C$99r.length;C$99i+=2)C$99h[C$99n=C$99g(C$99r[C$99i])]=C$99r[C$99i+1];var C$99u=C$99v.createMap(!0),C$99r=C$99e["raw-assets"];for(C$99i=0;C$99i<C$99r.length;C$99i+=2)C$99u[C$99n=C$99g(C$99r[C$99i])]=C$99r[C$99i+1];C$99e=new C$99T(C$99h,C$99u,C$99x);cc.loader.insertPipeAfter(cc.loader.assetLoader,C$99e),cc.loader.md5Pipe=C$99e}var C$99_,C$99s=C$99y._assetTables;for(C$99_ in C$99s)C$99s[C$99_].reset();var C$99o=C$99t.rawAssets;if(C$99o)for(var C$99a in C$99o){var C$99d=C$99o[C$99a];for(C$99n in C$99d){var C$99c,C$99f=C$99d[C$99n],C$99l=C$99f[0],C$99p=C$99f[1],C$99m=cc.js._getClassById(C$99p);C$99m?(C$99A[C$99n]=new C$99E(C$99a+"/"+C$99l,C$99m),C$99c=((C$99c=cc.path.extname(C$99l))&&(C$99l=C$99l.slice(0,-C$99c.length)),1===C$99f[2]),C$99s[C$99a]||(C$99s[C$99a]=new C$99C),C$99s[C$99a].add(C$99l,C$99n,C$99m,!C$99c)):cc.error("Cannot get",C$99p)}}C$99t.packedAssets&&C$99S.initPacks(C$99t.packedAssets),cc.url._init(C$99t.mountPaths&&C$99t.mountPaths.assets||C$99b+"assets")},_uuidToAsset:{}},C$99n={effect:{},material:{}},C$99o={};function C$99l(C$99t,C$99e,C$99r){var C$99i=C$99t+"s",C$99s=C$99n[C$99t]={};cc.loader.loadResDir(C$99i,C$99e,"internal",function(){},function(C$99t,C$99e){if(C$99t)cc.error(C$99t);else for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];cc.loader.getDependsRecursively(C$99n).forEach(function(C$99t){return C$99o[C$99t]=!0}),C$99s[""+C$99n.name]=C$99n}C$99r()})}C$99e._loadBuiltins=function(C$99t){if(cc.game.renderType===cc.game.RENDER_TYPE_CANVAS)return C$99t&&C$99t();C$99l("effect",cc.EffectAsset,function(){C$99l("material",cc.Material,C$99t)})},C$99e.getBuiltin=function(C$99t,C$99e){return C$99n[C$99t][C$99e]},C$99e.getBuiltins=function(C$99t){return C$99t?C$99n[C$99t]:C$99n},C$99e.resetBuiltins=function(){C$99n={effect:{},material:{}},C$99o={}},C$99e.getBuiltinDeps=function(){return C$99o},C$99i.exports=cc.AssetLibrary=C$99e},{"../assets/CCAsset":34,"../load-pipeline/CCLoader":136,"../load-pipeline/asset-table":138,"../load-pipeline/auto-release-utils":140,"../load-pipeline/md5-pipe":147,"../load-pipeline/pack-downloader":148,"../load-pipeline/subpackage-pipe":151,"../utils/decode-uuid":258,"./js":209,"./utils":213}],189:[function(C$99t,C$99i,C$99n){"use strict";var C$99g=C$99t("./js"),C$99l=C$99t("./CCEnum"),C$99e=C$99t("./utils"),C$99v=(C$99e.isPlainEmptyObj_DEV,C$99e.cloneable_DEV,C$99t("./attribute")),C$99x=C$99v.DELIMETER,C$99b=C$99t("./preprocess-class"),C$99h=(C$99t("./requiring-frame"),["name","extends","mixins","ctor","__ctor__","properties","statics","editor","__ES6__"]);function C$99f(C$99t,C$99e){C$99t.indexOf(C$99e)<0&&C$99t.push(C$99e)}var C$99u={datas:null,push:function(C$99t){var C$99e;this.datas?this.datas.push(C$99t):(this.datas=[C$99t],C$99e=this,setTimeout(function(){C$99e.init()},0))},init:function(){var C$99t=this.datas;if(C$99t){for(var C$99e=0;C$99e<C$99t.length;++C$99e){var C$99i=C$99t[C$99e],C$99n=C$99i.cls,C$99r=C$99i.props,C$99s=("function"==typeof C$99r&&(C$99r=C$99r()),C$99g.getClassName(C$99n));C$99r?C$99C(C$99n,C$99s,C$99r,C$99n.$super,C$99i.mixins):cc.errorID(3633,C$99s)}this.datas=null}}};function C$99A(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99n.default;C$99v.setClassAttr(C$99t,C$99i,"default",C$99r),C$99f(C$99t.__props__,C$99i),C$99T(C$99t,C$99n,0,C$99i)}function C$99r(C$99t){return"function"==typeof C$99t?C$99t():C$99t}function C$99_(C$99t,C$99e,C$99i){for(var C$99n in C$99e)C$99t.hasOwnProperty(C$99n)||C$99i&&!C$99i(C$99n)||Object.defineProperty(C$99t,C$99n,C$99g.getPropertyDescriptor(C$99e,C$99n))}function C$99p(C$99h,C$99t,C$99e,C$99i){var C$99n,C$99r,C$99s=C$99i.__ctor__,C$99u=C$99i.ctor,C$99o=C$99i.__ES6__,C$99a=(C$99o?(C$99n=[C$99u],C$99r=C$99u):(C$99n=C$99s?[C$99s]:function(C$99t,C$99e,C$99i){for(var C$99n=[],C$99r=[C$99t].concat(C$99e),C$99s=0;C$99s<C$99r.length;C$99s++){var C$99o=C$99r[C$99s];if(C$99o)for(var C$99a=function(C$99t){return C$99d._isCCClass(C$99t)?C$99t.__ctors__||[]:[C$99t]}(C$99o),C$99c=0;C$99c<C$99a.length;C$99c++)C$99f(C$99n,C$99a[C$99c])}C$99t=C$99i.ctor;return C$99t&&C$99n.push(C$99t),C$99n}(C$99t,C$99e,C$99i),C$99r=C$99y(C$99n,C$99t,0,C$99i),C$99g.value(C$99r,"extend",function(C$99t){return C$99t.extends=this,C$99d(C$99t)},!0)),C$99g.value(C$99r,"__ctors__",0<C$99n.length?C$99n:null,!0),C$99r.prototype);if(C$99t&&(C$99o||(C$99g.extend(C$99r,C$99t),C$99a=C$99r.prototype),C$99r.$super=C$99t),C$99e){for(var C$99c=C$99e.length-1;0<=C$99c;C$99c--){var C$99l=C$99e[C$99c];C$99_(C$99a,C$99l.prototype),C$99_(C$99r,C$99l,function(C$99t){return C$99l.hasOwnProperty(C$99t)&&!0}),C$99d._isCCClass(C$99l)&&C$99_(C$99v.getClassAttrs(C$99r),C$99v.getClassAttrs(C$99l))}C$99a.constructor=C$99r}return C$99o||(C$99a.__initProps__=C$99m),C$99g.setClassName(C$99h,C$99r),C$99r}function C$99s(C$99t){return JSON.stringify(C$99t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}C$99e=/^[A-Za-z_$][0-9A-Za-z_$]*$/;function C$99m(C$99t){var C$99e=C$99v.getClassAttrs(C$99t),C$99i=C$99t.__props__,C$99e=(null===C$99i&&(C$99u.init(),C$99i=C$99t.__props__),function(C$99t,C$99e){for(var C$99r=[],C$99s=[],C$99o=[],C$99a=[],C$99i=0;C$99i<C$99e.length;++C$99i){var C$99n=C$99e[C$99i],C$99c=C$99n+C$99x+"default";C$99c in C$99t&&("object"==typeof(C$99c=C$99t[C$99c])&&C$99c||"function"==typeof C$99c?(C$99r.push(C$99n),C$99s.push(C$99c)):(C$99o.push(C$99n),C$99a.push(C$99c)))}return function(){for(var C$99t=0;C$99t<C$99o.length;++C$99t)this[C$99o[C$99t]]=C$99a[C$99t];for(var C$99e=0;C$99e<C$99r.length;C$99e++){var C$99i=C$99r[C$99e],C$99n=C$99s[C$99e],C$99n="object"==typeof C$99n?C$99n instanceof cc.ValueType?C$99n.clone():Array.isArray(C$99n)?[]:{}:C$99n();this[C$99i]=C$99n}}}(C$99e,C$99i));(C$99t.prototype.__initProps__=C$99e).call(this)}function C$99y(C$99e,C$99t,C$99i,C$99n){var C$99r=C$99t&&function(C$99t,C$99e){var C$99i,C$99n=!1;for(C$99i in C$99e)if(!(0<=C$99h.indexOf(C$99i))){var C$99r=C$99e[C$99i];if("function"==typeof C$99r){var C$99s=C$99g.getPropertyDescriptor(C$99t.prototype,C$99i);if(C$99s){C$99s=C$99s.value;if("function"==typeof C$99s){C$99o.test(C$99r)&&(C$99n=!0,C$99e[C$99i]=function(C$99i,C$99n){return function(){var C$99t=this._super,C$99e=(this._super=C$99i,C$99n.apply(this,arguments));return this._super=C$99t,C$99e}}(C$99s,C$99r));continue}}}}return C$99n}(C$99t,C$99n),C$99s=0<(C$99t=C$99e.length)?C$99r?2===C$99t?function(){this._super=null,this.__initProps__(C$99s),C$99e[0].apply(this,arguments),C$99e[1].apply(this,arguments)}:function(){this._super=null,this.__initProps__(C$99s);for(var C$99t=0;C$99t<C$99e.length;++C$99t)C$99e[C$99t].apply(this,arguments)}:3===C$99t?function(){this.__initProps__(C$99s),C$99e[0].apply(this,arguments),C$99e[1].apply(this,arguments),C$99e[2].apply(this,arguments)}:function(){this.__initProps__(C$99s);for(var C$99t=C$99s.__ctors__,C$99e=0;C$99e<C$99t.length;++C$99e)C$99t[C$99e].apply(this,arguments)}:function(){C$99r&&(this._super=null),this.__initProps__(C$99s)};return C$99s}var C$99o=/xyz/.test(function(){xyz})?/\b\._super\b/:/.*/;/xyz/.test(function(){xyz});function C$99C(C$99e,C$99h,C$99t,C$99i,C$99u,C$99_){if(C$99e.__props__=[],C$99i&&C$99i.__props__&&(C$99e.__props__=C$99i.__props__.slice()),C$99u)for(var C$99d=0;C$99d<C$99u.length;++C$99d){var C$99f=C$99u[C$99d];C$99f.__props__&&(C$99e.__props__=C$99e.__props__.concat(C$99f.__props__.filter(function(C$99t){return C$99e.__props__.indexOf(C$99t)<0})))}if(C$99t)for(var C$99n in C$99b.preprocessAttrs(C$99t,C$99h,C$99e,C$99_),C$99t){var C$99r=C$99t[C$99n];"default"in C$99r?C$99A(C$99e,0,C$99n,C$99r):(C$99s=C$99e,C$99p=C$99h,C$99n=C$99n,C$99m=C$99_,C$99l=C$99c=C$99a=C$99o=void 0,C$99o=(C$99r=C$99r).get,C$99a=C$99r.set,C$99c=C$99s.prototype,C$99l=!Object.getOwnPropertyDescriptor(C$99c,C$99n),C$99o&&(C$99T(C$99s,C$99r,0,C$99n),C$99v.setClassAttr(C$99s,C$99n,"serializable",!1),C$99m||C$99g.get(C$99c,C$99n,C$99o,C$99l,C$99l)),C$99a&&(C$99m||C$99g.set(C$99c,C$99n,C$99a,C$99l,C$99l)))}var C$99s,C$99p,C$99m,C$99o,C$99a,C$99c,C$99l,C$99y=C$99v.getClassAttrs(C$99e);C$99e.__values__=C$99e.__props__.filter(function(C$99t){return!1!==C$99y[C$99t+C$99x+"serializable"]})}function C$99d(C$99t){var C$99e,C$99i,C$99n,C$99r=(C$99t=C$99t||{}).name,C$99s=C$99t.extends,C$99o=C$99t.mixins,C$99a=function(C$99t,C$99e,C$99i,C$99n){var C$99r=cc.Component,C$99s=cc._RF.peek();if(C$99s&&C$99g.isChildClassOf(C$99e,C$99r)){if(C$99g.isChildClassOf(C$99s.cls,C$99r))return cc.errorID(3615),null;C$99t=C$99t||C$99s.script}return C$99t=C$99p(C$99t,C$99e,C$99i,C$99n),C$99s&&(C$99g.isChildClassOf(C$99e,C$99r)?((C$99i=C$99s.uuid)&&C$99g._setClassId(C$99i,C$99t),C$99s.cls=C$99t):C$99g.isChildClassOf(C$99s.cls,C$99r)||(C$99s.cls=C$99t)),C$99t}(C$99r,C$99s,C$99o,C$99t),C$99r=C$99r||cc.js.getClassName(C$99a),C$99c=(C$99a._sealed=!0,C$99s&&(C$99s._sealed=!1),C$99t.properties),C$99l=("function"==typeof C$99c||C$99s&&null===C$99s.__props__||C$99o&&C$99o.some(function(C$99t){return null===C$99t.__props__})?(C$99u.push({cls:C$99a,props:C$99c,mixins:C$99o}),C$99a.__props__=C$99a.__values__=null):C$99C(C$99a,C$99r,C$99c,C$99s,C$99t.mixins,C$99t.__ES6__),C$99t.statics);if(C$99l)for(C$99e in C$99l)C$99a[C$99e]=C$99l[C$99e];for(C$99i in C$99t)0<=C$99h.indexOf(C$99i)||(C$99n=C$99t[C$99i],C$99b.validateMethodWithProps(C$99n,C$99i,C$99r,C$99a,C$99s)&&C$99g.value(C$99a.prototype,C$99i,C$99n,!0,!0));C$99o=C$99t.editor;return C$99o&&C$99g.isChildClassOf(C$99s,cc.Component)&&cc.Component._registerEditorProps(C$99a,C$99o),C$99a}C$99d._isCCClass=function(C$99t){return C$99t&&C$99t.hasOwnProperty("__ctors__")},C$99d._fastDefine=function(C$99t,C$99e,C$99i){C$99g.setClassName(C$99t,C$99e);for(var C$99n=C$99e.__props__=C$99e.__values__=Object.keys(C$99i),C$99r=C$99v.getClassAttrs(C$99e),C$99s=0;C$99s<C$99n.length;C$99s++){var C$99o=C$99n[C$99s];C$99r[C$99o+C$99x+"visible"]=!1,C$99r[C$99o+C$99x+"default"]=C$99i[C$99o]}},C$99d.Attr=C$99v,C$99d.attr=C$99v.attr,C$99d.getInheritanceChain=function(C$99t){for(var C$99e=[];C$99t=C$99g.getSuper(C$99t);)C$99t!==Object&&C$99e.push(C$99t);return C$99e};var C$99S={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"};function C$99T(C$99t,C$99n,C$99e,C$99i){var C$99r=null,C$99s="";function C$99o(){return C$99s=C$99i+C$99x,C$99r=C$99v.getClassAttrs(C$99t)}var C$99a=C$99n.type;function C$99c(C$99t,C$99e){var C$99i;C$99t in C$99n&&(typeof(C$99i=C$99n[C$99t])===C$99e&&((C$99r||C$99o())[C$99s+C$99t]=C$99i))}C$99a&&(C$99S[C$99a]?(C$99r||C$99o())[C$99s+"type"]=C$99a:"Object"===C$99a||(C$99a===C$99v.ScriptUuid?((C$99r||C$99o())[C$99s+"type"]="Script",C$99r[C$99s+"ctor"]=cc.ScriptAsset):"object"==typeof C$99a?C$99l.isEnum(C$99a)&&((C$99r||C$99o())[C$99s+"type"]="Enum",C$99r[C$99s+"enumList"]=C$99l.getList(C$99a)):"function"==typeof C$99a&&((C$99r||C$99o())[C$99s+"type"]="Object",C$99r[C$99s+"ctor"]=C$99a))),C$99n.editorOnly&&((C$99r||C$99o())[C$99s+"editorOnly"]=!0),C$99n.url&&((C$99r||C$99o())[C$99s+"saveUrlAsAsset"]=!0),!1===C$99n.serializable&&((C$99r||C$99o())[C$99s+"serializable"]=!1),C$99c("formerlySerializedAs","string");C$99a=C$99n.range;C$99a&&Array.isArray(C$99a)&&2<=C$99a.length&&((C$99r||C$99o())[C$99s+"min"]=C$99a[0],C$99r[C$99s+"max"]=C$99a[1],2<C$99a.length&&(C$99r[C$99s+"step"]=C$99a[2])),C$99c("min","number"),C$99c("max","number"),C$99c("step","number")}cc.Class=C$99d,C$99i.exports={isArray:function(C$99t){return C$99t=C$99r(C$99t),Array.isArray(C$99t)},fastDefine:C$99d._fastDefine,getNewValueTypeCode:!1,IDENTIFIER_RE:C$99e,escapeForJS:C$99s,getDefault:C$99r}},{"./CCEnum":191,"./attribute":201,"./js":209,"./preprocess-class":210,"./requiring-frame":211,"./utils":213}],190:[function(C$99t,C$99h,C$99u){"use strict";C$99t("./CCClass");var C$99_=C$99t("./preprocess-class"),C$99l=C$99t("./js"),C$99n="__ccclassCache__";function C$99d(C$99t){return C$99t}function C$99o(C$99t,C$99e){return C$99t[C$99e]||(C$99t[C$99e]={})}function C$99e(C$99i){return function(C$99e){return"function"==typeof C$99e?C$99i(C$99e):function(C$99t){return C$99i(C$99t,C$99e)}}}function C$99i(C$99t,C$99i,C$99e){return function(C$99e){return function(C$99t){return C$99i(C$99t,C$99e)}}}C$99t=C$99i.bind(null,!1);function C$99r(){return C$99i.bind(null,!1)}var C$99s=C$99r(),C$99f=C$99r();function C$99a(C$99t){return C$99o(C$99t,C$99n)}function C$99p(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o,C$99a=C$99r&&(C$99r.get||C$99r.set),C$99c=(C$99n&&(C$99o=C$99_.getFullFormOfProperty(C$99n,C$99a)),C$99e[C$99i]),C$99c=C$99l.mixin(C$99c||{},C$99o||C$99n||{});C$99a?(C$99r.get&&(C$99c.get=C$99r.get),C$99r.set&&(C$99c.set=C$99r.set)):(C$99o=void 0,C$99r?C$99r.initializer&&(C$99o=function(C$99e){var C$99t;try{C$99t=C$99e()}catch(C$99t){return C$99e}return"object"!=typeof C$99t||null===C$99t?C$99t:C$99e}(C$99r.initializer)):(C$99n=C$99s.default||(C$99s.default=function(C$99t){var C$99e;try{C$99e=new C$99t}catch(C$99t){return{}}return C$99e}(C$99t))).hasOwnProperty(C$99i)&&(C$99o=C$99n[C$99i]),C$99c.default=C$99o),C$99e[C$99i]=C$99c}var C$99m=C$99e(function(C$99t,C$99e){var C$99i=C$99l.getSuper(C$99t),C$99e={name:C$99e,extends:C$99i=C$99i===Object?null:C$99i,ctor:C$99t,__ES6__:!0},C$99i=C$99t[C$99n];return C$99i&&((C$99i=C$99i.proto)&&C$99l.mixin(C$99e,C$99i),C$99t[C$99n]=void 0),cc.Class(C$99e)});function C$99y(C$99t,C$99i,C$99n){return C$99t(function(C$99t,C$99e){var C$99t=C$99a(C$99t);C$99t&&(C$99e=void 0!==C$99n?C$99n:C$99e,C$99t=C$99o(C$99t,"proto"),C$99o(C$99t,"editor")[C$99i]=C$99e)},C$99i)}function C$99c(C$99t){return C$99t(C$99d)}var C$99g=C$99c(C$99e),C$99t=C$99y(C$99t,"requireComponent"),C$99v=C$99c(C$99s),C$99f=C$99y(C$99f,"executionOrder"),C$99x=C$99c(C$99e),C$99b=C$99c(C$99e),C$99A=C$99c(C$99s),C$99C=C$99c(C$99s),C$99s=C$99c(C$99s);cc._decorator=C$99h.exports={ccclass:C$99m,property:function(C$99t,C$99e,C$99i){var C$99s=null;function C$99n(C$99t,C$99e,C$99i){var C$99n,C$99r=C$99a(C$99t.constructor);C$99r&&(C$99n=C$99o(C$99r,"proto"),C$99n=C$99o(C$99n,"properties"),C$99p(C$99t.constructor,C$99n,C$99e,C$99s,C$99i,C$99r))}if(void 0===C$99e)return C$99s=C$99t,C$99n;C$99n(C$99t,C$99e,C$99i)},executeInEditMode:C$99g,requireComponent:C$99t,menu:C$99v,executionOrder:C$99f,disallowMultiple:C$99x,playOnFocus:C$99b,inspector:C$99A,icon:C$99C,help:C$99s,mixins:function(){for(var C$99e=[],C$99t=0;C$99t<arguments.length;C$99t++)C$99e[C$99t]=arguments[C$99t];return function(C$99t){C$99t=C$99a(C$99t);C$99t&&(C$99o(C$99t,"proto").mixins=C$99e)}}}},{"./CCClass":189,"./js":209,"./preprocess-class":210,"./utils":213}],191:[function(C$99t,C$99e,C$99i){"use strict";var C$99o=C$99t("./js");function C$99n(C$99t){if("__enums__"in C$99t)return C$99t;C$99o.value(C$99t,"__enums__",null,!0);for(var C$99e=-1,C$99i=Object.keys(C$99t),C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n],C$99s=C$99t[C$99r];if(-1===C$99s)C$99s=++C$99e,C$99t[C$99r]=C$99s;else if("number"==typeof C$99s)C$99e=C$99s;else if("string"==typeof C$99s&&Number.isInteger(parseFloat(C$99r)))continue;C$99s=""+C$99s;C$99r!==C$99s&&C$99o.value(C$99t,C$99s,C$99r)}return C$99t}C$99n.isEnum=function(C$99t){return C$99t&&C$99t.hasOwnProperty("__enums__")},C$99n.getList=function(C$99t){if(C$99t.__enums__)return C$99t.__enums__;var C$99e,C$99i=C$99t.__enums__=[];for(C$99e in C$99t){var C$99n=C$99t[C$99e];Number.isInteger(C$99n)&&C$99i.push({name:C$99e,value:C$99n})}return C$99i.sort(function(C$99t,C$99e){return C$99t.value-C$99e.value}),C$99i},C$99e.exports=cc.Enum=C$99n},{"./js":209}],192:[function(C$99t,C$99e,C$99i){"use strict";var C$99n,C$99r=C$99t("../event-manager"),C$99t=C$99t("./CCInputManager");cc.Acceleration=function(C$99t,C$99e,C$99i,C$99n){this.x=C$99t||0,this.y=C$99e||0,this.z=C$99i||0,this.timestamp=C$99n||0},C$99t.setAccelerometerEnabled=function(C$99t){this._accelEnabled!==C$99t&&(this._accelEnabled=C$99t,(C$99t=cc.director.getScheduler()).enableForTarget(this),this._accelEnabled?(this._registerAccelerometerEvent(),this._accelCurTime=0,C$99t.scheduleUpdate(this)):(this._unregisterAccelerometerEvent(),this._accelCurTime=0,C$99t.unscheduleUpdate(this)))},C$99t.setAccelerometerInterval=function(C$99t){this._accelInterval!==C$99t&&(this._accelInterval=C$99t)},C$99t._registerKeyboardEvent=function(){cc.game.canvas.addEventListener("keydown",function(C$99t){C$99r.dispatchEvent(new cc.Event.EventKeyboard(C$99t.keyCode,!0)),C$99t.stopPropagation(),C$99t.preventDefault()},!1),cc.game.canvas.addEventListener("keyup",function(C$99t){C$99r.dispatchEvent(new cc.Event.EventKeyboard(C$99t.keyCode,!1)),C$99t.stopPropagation(),C$99t.preventDefault()},!1)},C$99t._registerAccelerometerEvent=function(){var C$99t=window,C$99e=(this._acceleration=new cc.Acceleration,this._accelDeviceEvent=C$99t.DeviceMotionEvent||C$99t.DeviceOrientationEvent,cc.sys.browserType===cc.sys.BROWSER_TYPE_MOBILE_QQ&&(this._accelDeviceEvent=window.DeviceOrientationEvent),this._accelDeviceEvent===C$99t.DeviceMotionEvent?"devicemotion":"deviceorientation"),C$99i=navigator.userAgent;(/Android/.test(C$99i)||/Adr/.test(C$99i)&&cc.sys.browserType===cc.BROWSER_TYPE_UC)&&(this._minus=-1),C$99n=this.didAccelerate.bind(this),C$99t.addEventListener(C$99e,C$99n,!1)},C$99t._unregisterAccelerometerEvent=function(){var C$99t=window,C$99e=this._accelDeviceEvent===C$99t.DeviceMotionEvent?"devicemotion":"deviceorientation";C$99n&&C$99t.removeEventListener(C$99e,C$99n,!1)},C$99t.didAccelerate=function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o=window;this._accelEnabled&&(C$99e=this._acceleration,C$99r=this._accelDeviceEvent===window.DeviceMotionEvent?(C$99r=C$99t.accelerationIncludingGravity,C$99i=this._accelMinus*C$99r.x*.1,C$99n=this._accelMinus*C$99r.y*.1,.1*C$99r.z):(C$99i=C$99t.gamma/90*.981,C$99n=-C$99t.beta/90*.981,C$99t.alpha/90*.981),cc.view._isRotated&&(C$99s=C$99i,C$99i=-C$99n,C$99n=C$99s),C$99e.x=C$99i,C$99e.y=C$99n,C$99e.z=C$99r,C$99e.timestamp=C$99t.timeStamp||Date.now(),C$99s=C$99e.x,90===C$99o.orientation?(C$99e.x=-C$99e.y,C$99e.y=C$99s):-90===C$99o.orientation?(C$99e.x=C$99e.y,C$99e.y=-C$99s):180===C$99o.orientation&&(C$99e.x=-C$99e.x,C$99e.y=-C$99e.y),cc.sys.os===cc.sys.OS_ANDROID&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_MOBILE_QQ&&(C$99e.x=-C$99e.x,C$99e.y=-C$99e.y))}},{"../event-manager":113,"./CCInputManager":193}],193:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./CCMacro"),C$99d=C$99t("./CCSys"),C$99f=C$99t("../event-manager"),C$99r=C$99n.TOUCH_TIMEOUT,C$99h=cc.v2(),C$99t={_mousePressed:!1,_isRegisterEvent:!1,_preTouchPoint:cc.v2(0,0),_prevMousePoint:cc.v2(0,0),_preTouchPool:[],_preTouchPoolPointer:0,_touches:[],_touchesIntegerDict:{},_indexBitsUsed:0,_maxTouches:8,_accelEnabled:!1,_accelInterval:.2,_accelMinus:1,_accelCurTime:0,_acceleration:null,_accelDeviceEvent:null,_canvasBoundingRect:{left:0,top:0,adjustedLeft:0,adjustedTop:0,width:0,height:0},_getUnUsedIndex:function(){for(var C$99t=this._indexBitsUsed,C$99e=cc.sys.now(),C$99i=0;C$99i<this._maxTouches;C$99i++){if(!(1&C$99t))return this._indexBitsUsed|=1<<C$99i,C$99i;var C$99n=this._touches[C$99i];if(C$99e-C$99n._lastModified>C$99r)return this._removeUsedIndexBit(C$99i),delete this._touchesIntegerDict[C$99n.getID()],C$99i;C$99t>>=1}return-1},_removeUsedIndexBit:function(C$99t){C$99t<0||C$99t>=this._maxTouches||(this._indexBitsUsed&=~(1<<C$99t))},_glView:null,_updateCanvasBoundingRect:function(){var C$99t,C$99e=cc.game.canvas,C$99i=this._canvasBoundingRect,C$99n=document.documentElement,C$99r=window.pageXOffset-C$99n.clientLeft,C$99n=window.pageYOffset-C$99n.clientTop;C$99e.getBoundingClientRect?(C$99t=C$99e.getBoundingClientRect(),C$99i.left=C$99t.left+C$99r,C$99i.top=C$99t.top+C$99n,C$99i.width=C$99t.width,C$99i.height=C$99t.height):C$99e instanceof HTMLCanvasElement?(C$99i.left=C$99r,C$99i.top=C$99n,C$99i.width=C$99e.width,C$99i.height=C$99e.height):(C$99i.left=C$99r,C$99i.top=C$99n,C$99i.width=parseInt(C$99e.style.width),C$99i.height=parseInt(C$99e.style.height))},handleTouchesBegin:function(C$99t){for(var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o=[],C$99a=this._touchesIntegerDict,C$99c=C$99d.now(),C$99l=0,C$99h=C$99t.length;C$99l<C$99h;C$99l++)null==C$99a[C$99r=(C$99n=C$99t[C$99l]).getID()]&&(-1!==(C$99i=this._getUnUsedIndex())?((C$99e=this._touches[C$99i]=new cc.Touch(C$99n._point.x,C$99n._point.y,C$99n.getID()))._lastModified=C$99c,C$99e._setPrevPoint(C$99n._prevPoint),C$99a[C$99r]=C$99i,C$99o.push(C$99e)):cc.logID(2300,C$99i));0<C$99o.length&&(this._glView._convertTouchesWithScale(C$99o),(C$99s=new cc.Event.EventTouch(C$99o))._eventCode=cc.Event.EventTouch.BEGAN,C$99f.dispatchEvent(C$99s))},handleTouchesMove:function(C$99t){for(var C$99e,C$99i,C$99n,C$99r=[],C$99s=this._touches,C$99o=C$99d.now(),C$99a=0,C$99c=C$99t.length;C$99a<C$99c;C$99a++)C$99i=(C$99e=C$99t[C$99a]).getID(),null!=(C$99i=this._touchesIntegerDict[C$99i])&&C$99s[C$99i]&&(C$99s[C$99i]._setPoint(C$99e._point),C$99s[C$99i]._setPrevPoint(C$99e._prevPoint),C$99s[C$99i]._lastModified=C$99o,C$99r.push(C$99s[C$99i]));0<C$99r.length&&(this._glView._convertTouchesWithScale(C$99r),(C$99n=new cc.Event.EventTouch(C$99r))._eventCode=cc.Event.EventTouch.MOVED,C$99f.dispatchEvent(C$99n))},handleTouchesEnd:function(C$99t){var C$99t=this.getSetOfTouchesEndOrCancel(C$99t);0<C$99t.length&&(this._glView._convertTouchesWithScale(C$99t),(C$99t=new cc.Event.EventTouch(C$99t))._eventCode=cc.Event.EventTouch.ENDED,C$99f.dispatchEvent(C$99t)),this._preTouchPool.length=0},handleTouchesCancel:function(C$99t){var C$99t=this.getSetOfTouchesEndOrCancel(C$99t);0<C$99t.length&&(this._glView._convertTouchesWithScale(C$99t),(C$99t=new cc.Event.EventTouch(C$99t))._eventCode=cc.Event.EventTouch.CANCELED,C$99f.dispatchEvent(C$99t)),this._preTouchPool.length=0},getSetOfTouchesEndOrCancel:function(C$99t){for(var C$99e,C$99i,C$99n,C$99r=[],C$99s=this._touches,C$99o=this._touchesIntegerDict,C$99a=0,C$99c=C$99t.length;C$99a<C$99c;C$99a++)null!=(C$99i=C$99o[C$99n=(C$99e=C$99t[C$99a]).getID()])&&C$99s[C$99i]&&(C$99s[C$99i]._setPoint(C$99e._point),C$99s[C$99i]._setPrevPoint(C$99e._prevPoint),C$99r.push(C$99s[C$99i]),this._removeUsedIndexBit(C$99i),delete C$99o[C$99n]);return C$99r},getPreTouch:function(C$99t){for(var C$99e=null,C$99i=this._preTouchPool,C$99n=C$99t.getID(),C$99r=C$99i.length-1;0<=C$99r;C$99r--)if(C$99i[C$99r].getID()===C$99n){C$99e=C$99i[C$99r];break}return C$99e=C$99e||C$99t},setPreTouch:function(C$99t){for(var C$99e=!1,C$99i=this._preTouchPool,C$99n=C$99t.getID(),C$99r=C$99i.length-1;0<=C$99r;C$99r--)if(C$99i[C$99r].getID()===C$99n){C$99i[C$99r]=C$99t,C$99e=!0;break}C$99e||(C$99i.length<=50?C$99i.push(C$99t):(C$99i[this._preTouchPoolPointer]=C$99t,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))},getTouchByXY:function(C$99t,C$99e,C$99i){var C$99n=this._preTouchPoint,C$99t=this._glView.convertToLocationInView(C$99t,C$99e,C$99i),C$99e=new cc.Touch(C$99t.x,C$99t.y,0);return C$99e._setPrevPoint(C$99n.x,C$99n.y),C$99n.x=C$99t.x,C$99n.y=C$99t.y,C$99e},getMouseEvent:function(C$99t,C$99e,C$99i){var C$99n=this._prevMousePoint,C$99i=new cc.Event.EventMouse(C$99i);return C$99i._setPrevCursor(C$99n.x,C$99n.y),C$99n.x=C$99t.x,C$99n.y=C$99t.y,this._glView._convertMouseToLocationInView(C$99n,C$99e),C$99i.setLocation(C$99n.x,C$99n.y),C$99i},getPointByEvent:function(C$99t,C$99e){return cc.sys.browserType!==cc.sys.BROWSER_TYPE_QQ&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_UC&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_SAFARI||this._updateCanvasBoundingRect(),null!=C$99t.pageX?{x:C$99t.pageX,y:C$99t.pageY}:(C$99e.left-=document.body.scrollLeft,C$99e.top-=document.body.scrollTop,{x:C$99t.clientX,y:C$99t.clientY})},getTouchesByEvent:function(C$99t,C$99e){for(var C$99i,C$99n,C$99r,C$99s=[],C$99o=this._glView,C$99a=this._preTouchPoint,C$99c=C$99t.changedTouches.length,C$99l=0;C$99l<C$99c;C$99l++)(C$99r=C$99t.changedTouches[C$99l])&&(C$99n=void 0,C$99n=C$99d.BROWSER_TYPE_FIREFOX===C$99d.browserType?C$99o.convertToLocationInView(C$99r.pageX,C$99r.pageY,C$99e,C$99h):C$99o.convertToLocationInView(C$99r.clientX,C$99r.clientY,C$99e,C$99h),null!=C$99r.identifier?(C$99i=new cc.Touch(C$99n.x,C$99n.y,C$99r.identifier),C$99r=this.getPreTouch(C$99i).getLocation(),C$99i._setPrevPoint(C$99r.x,C$99r.y),this.setPreTouch(C$99i)):(C$99i=new cc.Touch(C$99n.x,C$99n.y))._setPrevPoint(C$99a.x,C$99a.y),C$99a.x=C$99n.x,C$99a.y=C$99n.y,C$99s.push(C$99i));return C$99s},registerSystemEvent:function(C$99s){if(!this._isRegisterEvent){this._glView=cc.view;var C$99o=this,C$99a=this._canvasBoundingRect,C$99t=(window.addEventListener("resize",this._updateCanvasBoundingRect.bind(this)),C$99d.isMobile),C$99e="mouse"in C$99d.capabilities,C$99h="touches"in C$99d.capabilities;if(C$99e){C$99t||(window.addEventListener("mousedown",function(){C$99o._mousePressed=!0},!1),window.addEventListener("mouseup",function(C$99t){var C$99e;C$99o._mousePressed&&(C$99o._mousePressed=!1,C$99e=C$99o.getPointByEvent(C$99t,C$99a),cc.rect(C$99a.left,C$99a.top,C$99a.width,C$99a.height).contains(C$99e)||(C$99o.handleTouchesEnd([C$99o.getTouchByXY(C$99e.x,C$99e.y,C$99a)]),(C$99e=C$99o.getMouseEvent(C$99e,C$99a,cc.Event.EventMouse.UP)).setButton(C$99t.button),C$99f.dispatchEvent(C$99e)))},!1));for(var C$99e=cc.Event.EventMouse,C$99i=[!C$99t&&["mousedown",C$99e.DOWN,function(C$99t,C$99e,C$99i,C$99n){C$99o._mousePressed=!0,C$99o.handleTouchesBegin([C$99o.getTouchByXY(C$99i.x,C$99i.y,C$99n)]),C$99s.focus()}],!C$99t&&["mouseup",C$99e.UP,function(C$99t,C$99e,C$99i,C$99n){C$99o._mousePressed=!1,C$99o.handleTouchesEnd([C$99o.getTouchByXY(C$99i.x,C$99i.y,C$99n)])}],!C$99t&&["mousemove",C$99e.MOVE,function(C$99t,C$99e,C$99i,C$99n){C$99o.handleTouchesMove([C$99o.getTouchByXY(C$99i.x,C$99i.y,C$99n)]),C$99o._mousePressed||C$99e.setButton(null)}],["mousewheel",C$99e.SCROLL,function(C$99t,C$99e){C$99e.setScrollData(0,C$99t.wheelDelta)}],["DOMMouseScroll",C$99e.SCROLL,function(C$99t,C$99e){C$99e.setScrollData(0,-120*C$99t.detail)}]],C$99n=0;C$99n<C$99i.length;++C$99n){var C$99c=C$99i[C$99n];C$99c&&function(){var C$99t=C$99c[0],C$99n=C$99c[1],C$99r=C$99c[2];C$99s.addEventListener(C$99t,function(C$99t){var C$99e=C$99o.getPointByEvent(C$99t,C$99a),C$99i=C$99o.getMouseEvent(C$99e,C$99a,C$99n);C$99i.setButton(C$99t.button),C$99r(C$99t,C$99i,C$99e,C$99a),C$99f.dispatchEvent(C$99i),C$99t.stopPropagation(),C$99t.preventDefault()},!1)}()}}if(window.navigator.msPointerEnabled){var C$99r,C$99l={MSPointerDown:C$99o.handleTouchesBegin,MSPointerMove:C$99o.handleTouchesMove,MSPointerUp:C$99o.handleTouchesEnd,MSPointerCancel:C$99o.handleTouchesCancel};for(C$99r in C$99l)!function(C$99t){var C$99i=C$99l[C$99t];C$99s.addEventListener(C$99t,function(C$99t){var C$99e=document.documentElement;C$99a.adjustedLeft=C$99a.left-C$99e.scrollLeft,C$99a.adjustedTop=C$99a.top-C$99e.scrollTop,C$99i.call(C$99o,[C$99o.getTouchByXY(C$99t.clientX,C$99t.clientY,C$99a)]),C$99t.stopPropagation()},!1)}(C$99r)}if(C$99h){var C$99u,C$99_={touchstart:function(C$99t){C$99o.handleTouchesBegin(C$99t),C$99s.focus()},touchmove:function(C$99t){C$99o.handleTouchesMove(C$99t)},touchend:function(C$99t){C$99o.handleTouchesEnd(C$99t)},touchcancel:function(C$99t){C$99o.handleTouchesCancel(C$99t)}};for(C$99u in C$99_)!function(C$99t){var C$99i=C$99_[C$99t];C$99s.addEventListener(C$99t,function(C$99t){var C$99e;C$99t.changedTouches&&(C$99e=document.body,C$99a.adjustedLeft=C$99a.left-(C$99e.scrollLeft||window.scrollX||0),C$99a.adjustedTop=C$99a.top-(C$99e.scrollTop||window.scrollY||0),C$99i(C$99o.getTouchesByEvent(C$99t,C$99a)),C$99t.stopPropagation(),C$99t.preventDefault())},!1)}(C$99u)}this._registerKeyboardEvent(),this._isRegisterEvent=!0}},_registerKeyboardEvent:function(){},_registerAccelerometerEvent:function(){},update:function(C$99t){this._accelCurTime>this._accelInterval&&(this._accelCurTime-=this._accelInterval,C$99f.dispatchEvent(new cc.Event.EventAcceleration(this._acceleration))),this._accelCurTime+=C$99t}};C$99e.exports=cc.internal.inputManager=C$99t},{"../event-manager":113,"./CCMacro":194,"./CCSys":198}],194:[function(C$99t,C$99e,C$99i){"use strict";cc.macro={RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,MIN_ZINDEX:-Math.pow(2,15),MAX_ZINDEX:Math.pow(2,15)-1,ONE:1,ZERO:0,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,DST_ALPHA:772,DST_COLOR:774,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ORIENTATION_PORTRAIT:1,ORIENTATION_LANDSCAPE:2,ORIENTATION_AUTO:3,DENSITYDPI_DEVICE:"device-dpi",DENSITYDPI_HIGH:"high-dpi",DENSITYDPI_MEDIUM:"medium-dpi",DENSITYDPI_LOW:"low-dpi",FIX_ARTIFACTS_BY_STRECHING_TEXEL_TMX:!0,DIRECTOR_STATS_POSITION:cc.v2(0,0),ENABLE_STACKABLE_ACTIONS:!0,TOUCH_TIMEOUT:5e3,BATCH_VERTEX_COUNT:2e4,ENABLE_TILEDMAP_CULLING:!0,DOWNLOAD_MAX_CONCURRENT:64,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!1,ENABLE_CULLING:!1,CLEANUP_IMAGE_CACHE:!1,SHOW_MESH_WIREFRAME:!1,SHOW_MESH_NORMAL:!1,ENABLE_MULTI_TOUCH:!0},Object.defineProperty(cc.macro,"ROTATE_ACTION_CCW",{set:function(C$99t){cc.RotateTo&&cc.RotateBy&&(cc.RotateTo._reverse=cc.RotateBy._reverse=C$99t)}});cc.macro.SUPPORT_TEXTURE_FORMATS=[".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],cc.macro.KEY={none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},cc.macro.ImageFormat=cc.Enum({JPG:0,PNG:1,TIFF:2,WEBP:3,PVR:4,ETC:5,S3TC:6,ATITC:7,TGA:8,RAWDATA:9,UNKNOWN:10}),cc.macro.BlendFactor=cc.Enum({ONE:1,ZERO:0,SRC_ALPHA:770,SRC_COLOR:768,DST_ALPHA:772,DST_COLOR:774,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775}),cc.macro.TextAlignment=cc.Enum({LEFT:0,CENTER:1,RIGHT:2}),cc.macro.VerticalTextAlignment=cc.Enum({TOP:0,CENTER:1,BOTTOM:2}),C$99e.exports=cc.macro},{}],195:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./js"),C$99t=C$99t("./CCClass");function C$99r(){this._name="",this._objFlags=0}C$99t.fastDefine("cc.Object",C$99r,{_name:"",_objFlags:0}),C$99n.value(C$99r,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20});var C$99s=[];C$99n.value(C$99r,"_deferredDestroy",function(){for(var C$99t=C$99s.length,C$99e=0;C$99e<C$99t;++C$99e){var C$99i=C$99s[C$99e];1&C$99i._objFlags||C$99i._destroyImmediate()}C$99t===C$99s.length?C$99s.length=0:C$99s.splice(0,C$99t)});C$99t=C$99r.prototype;C$99n.getset(C$99t,"name",function(){return this._name},function(C$99t){this._name=C$99t},!0),C$99n.get(C$99t,"isValid",function(){return!(1&this._objFlags)},!0);C$99t.destroy=function(){return 1&this._objFlags?(cc.warnID(5e3),!1):!(4&this._objFlags)&&(this._objFlags|=4,C$99s.push(this),!0)},C$99t._destruct=function(){var C$99t=this.constructor,C$99e=C$99t.__destruct__;C$99e||(C$99e=function(C$99t,C$99e){var C$99i=C$99t instanceof cc._BaseNode||C$99t instanceof cc.Component,C$99n=C$99i?"_id":null,C$99r={};for(C$99c in C$99t)if(C$99t.hasOwnProperty(C$99c)){if(C$99c===C$99n)continue;switch(typeof C$99t[C$99c]){case"string":C$99r[C$99c]="";break;case"object":case"function":C$99r[C$99c]=null}}if(cc.Class._isCCClass(C$99e))for(var C$99s=cc.Class.Attr.getClassAttrs(C$99e),C$99o=C$99e.__props__,C$99a=0;C$99a<C$99o.length;C$99a++){var C$99c,C$99l=(C$99c=C$99o[C$99a])+cc.Class.Attr.DELIMETER+"default";if(C$99l in C$99s&&(!C$99i||"_id"!==C$99c))switch(typeof C$99s[C$99l]){case"string":C$99r[C$99c]="";break;case"object":case"function":C$99r[C$99c]=null;break;case"undefined":C$99r[C$99c]=void 0}}return function(C$99t){for(var C$99e in C$99r)C$99t[C$99e]=C$99r[C$99e]}}(this,C$99t),C$99n.value(C$99t,"__destruct__",C$99e,!0)),C$99e(this)},C$99t._onPreDestroy=null,C$99t._destroyImmediate=function(){1&this._objFlags?cc.errorID(5e3):(this._onPreDestroy&&this._onPreDestroy(),this._destruct(),this._objFlags|=1)},C$99t._deserialize=null,cc.isValid=function(C$99t,C$99e){return"object"==typeof C$99t?!(!C$99t||C$99t._objFlags&(C$99e?5:1)):void 0!==C$99t},cc.Object=C$99e.exports=C$99r},{"./CCClass":189,"./js":209}],196:[function(C$99t,C$99e,C$99i){"use strict";C$99t=C$99t("../platform/js");cc.SAXParser=function(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):(this._isSupportDOMParser=!1,this._parser=null)},cc.SAXParser.prototype={constructor:cc.SAXParser,parse:function(C$99t){return this._parseXML(C$99t)},_parseXML:function(C$99t){var C$99e;return this._isSupportDOMParser?C$99e=this._parser.parseFromString(C$99t,"text/xml"):((C$99e=new ActiveXObject("Microsoft.XMLDOM")).async="false",C$99e.loadXML(C$99t)),C$99e}},cc.PlistParser=function(){cc.SAXParser.call(this)},C$99t.extend(cc.PlistParser,cc.SAXParser),C$99t.mixin(cc.PlistParser.prototype,{parse:function(C$99t){var C$99e=this._parseXML(C$99t).documentElement;if("plist"!==C$99e.tagName)return cc.warnID(5100),{};for(var C$99i=null,C$99n=0,C$99r=C$99e.childNodes.length;C$99n<C$99r&&1!==(C$99i=C$99e.childNodes[C$99n]).nodeType;C$99n++);return this._parseNode(C$99i)},_parseNode:function(C$99t){var C$99e=null,C$99i=C$99t.tagName;if("dict"===C$99i)C$99e=this._parseDict(C$99t);else if("array"===C$99i)C$99e=this._parseArray(C$99t);else if("string"===C$99i)if(1===C$99t.childNodes.length)C$99e=C$99t.firstChild.nodeValue;else for(var C$99e="",C$99n=0;C$99n<C$99t.childNodes.length;C$99n++)C$99e+=C$99t.childNodes[C$99n].nodeValue;else"false"===C$99i?C$99e=!1:"true"===C$99i?C$99e=!0:"real"===C$99i?C$99e=parseFloat(C$99t.firstChild.nodeValue):"integer"===C$99i&&(C$99e=parseInt(C$99t.firstChild.nodeValue,10));return C$99e},_parseArray:function(C$99t){for(var C$99e=[],C$99i=0,C$99n=C$99t.childNodes.length;C$99i<C$99n;C$99i++){var C$99r=C$99t.childNodes[C$99i];1===C$99r.nodeType&&C$99e.push(this._parseNode(C$99r))}return C$99e},_parseDict:function(C$99t){for(var C$99e={},C$99i=null,C$99n=0,C$99r=C$99t.childNodes.length;C$99n<C$99r;C$99n++){var C$99s=C$99t.childNodes[C$99n];1===C$99s.nodeType&&("key"===C$99s.tagName?C$99i=C$99s.firstChild.nodeValue:C$99e[C$99i]=this._parseNode(C$99s))}return C$99e}}),cc.saxParser=new cc.SAXParser,cc.plistParser=new cc.PlistParser,C$99e.exports={saxParser:cc.saxParser,plistParser:cc.plistParser}},{"../platform/js":209}],197:[function(C$99t,C$99e,C$99i){"use strict";cc.screen={_supportsFullScreen:!1,_onfullscreenchange:null,_onfullscreenerror:null,_preOnFullScreenChange:null,_preOnFullScreenError:null,_preOnTouch:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement","fullscreenerror"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement","fullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement","msfullscreenerror"]],init:function(){this._fn={};for(var C$99t,C$99e,C$99i=this._fnMap,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++)if((C$99t=C$99i[C$99n])&&void 0!==document[C$99t[1]]){for(C$99n=0,C$99e=C$99t.length;C$99n<C$99e;C$99n++)this._fn[C$99i[0][C$99n]]=C$99t[C$99n];break}this._supportsFullScreen=void 0!==this._fn.requestFullscreen,this._touchEvent="ontouchend"in window?"touchend":"mousedown"},fullScreen:function(){return!!this._supportsFullScreen&&!!(document[this._fn.fullscreenElement]||document[this._fn.webkitFullscreenElement]||document[this._fn.mozFullScreenElement])},requestFullScreen:function(C$99t,C$99e,C$99i){if(C$99t&&"video"===C$99t.tagName.toLowerCase()){if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&0<C$99t.readyState)return void(C$99t.webkitEnterFullscreen&&C$99t.webkitEnterFullscreen());C$99t.setAttribute("x5-video-player-fullscreen","true")}var C$99n;this._supportsFullScreen&&(C$99t=C$99t||document.documentElement,C$99e&&(C$99n=this._fn.fullscreenchange,this._onfullscreenchange&&document.removeEventListener(C$99n,this._onfullscreenchange),this._onfullscreenchange=C$99e,document.addEventListener(C$99n,C$99e,!1)),C$99i&&(C$99n=this._fn.fullscreenerror,this._onfullscreenerror&&document.removeEventListener(C$99n,this._onfullscreenerror),this._onfullscreenerror=C$99i,document.addEventListener(C$99n,C$99i,{once:!0})),C$99t[this._fn.requestFullscreen]())},exitFullScreen:function(C$99t){if(C$99t&&"video"===C$99t.tagName.toLowerCase()){if(cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser)return void(C$99t.webkitExitFullscreen&&C$99t.webkitExitFullscreen());C$99t.setAttribute("x5-video-player-fullscreen","false")}return!this._supportsFullScreen||document[this._fn.exitFullscreen]()},autoFullScreen:function(C$99t,C$99e){C$99t=C$99t||document.body,this._ensureFullScreen(C$99t,C$99e),this.requestFullScreen(C$99t,C$99e)},disableAutoFullScreen:function(C$99t){var C$99t=cc.game.canvas||C$99t,C$99e=this._touchEvent;this._preOnTouch&&(C$99t.removeEventListener(C$99e,this._preOnTouch),this._preOnTouch=null)},_ensureFullScreen:function(C$99t,C$99e){var C$99i,C$99n=this,C$99r=cc.game.canvas||C$99t,C$99s=this._fn.fullscreenerror;function C$99o(){C$99n._preOnFullScreenError=null,C$99n._preOnTouch&&C$99r.removeEventListener(C$99i,C$99n._preOnTouch),C$99n._preOnTouch=function(){C$99n._preOnTouch=null,C$99n.requestFullScreen(C$99t,C$99e)},C$99r.addEventListener(C$99i,C$99n._preOnTouch,{once:!0})}void 0!==document[C$99s]&&(C$99i=this._touchEvent,this._preOnFullScreenError&&C$99t.removeEventListener(C$99s,this._preOnFullScreenError),this._preOnFullScreenError=C$99o,C$99t.addEventListener(C$99s,C$99o,{once:!0}))}},cc.screen.init()},{}],198:[function(C$99t,C$99e,C$99i){"use strict";window._CCSettings&&_CCSettings.platform;var C$99d="undefined"==typeof window?global:window;var C$99n=cc&&cc.sys?cc.sys:function(){cc.sys={};var C$99e=cc.sys;if(C$99e.LANGUAGE_ENGLISH="en",C$99e.LANGUAGE_CHINESE="zh",C$99e.LANGUAGE_FRENCH="fr",C$99e.LANGUAGE_ITALIAN="it",C$99e.LANGUAGE_GERMAN="de",C$99e.LANGUAGE_SPANISH="es",C$99e.LANGUAGE_DUTCH="du",C$99e.LANGUAGE_RUSSIAN="ru",C$99e.LANGUAGE_KOREAN="ko",C$99e.LANGUAGE_JAPANESE="ja",C$99e.LANGUAGE_HUNGARIAN="hu",C$99e.LANGUAGE_PORTUGUESE="pt",C$99e.LANGUAGE_ARABIC="ar",C$99e.LANGUAGE_NORWEGIAN="no",C$99e.LANGUAGE_POLISH="pl",C$99e.LANGUAGE_TURKISH="tr",C$99e.LANGUAGE_UKRAINIAN="uk",C$99e.LANGUAGE_ROMANIAN="ro",C$99e.LANGUAGE_BULGARIAN="bg",C$99e.LANGUAGE_UNKNOWN="unknown",C$99e.OS_IOS="iOS",C$99e.OS_ANDROID="Android",C$99e.OS_WINDOWS="Windows",C$99e.OS_MARMALADE="Marmalade",C$99e.OS_LINUX="Linux",C$99e.OS_BADA="Bada",C$99e.OS_BLACKBERRY="Blackberry",C$99e.OS_OSX="OS X",C$99e.OS_WP8="WP8",C$99e.OS_WINRT="WINRT",C$99e.OS_UNKNOWN="Unknown",C$99e.UNKNOWN=-1,C$99e.WIN32=0,C$99e.LINUX=1,C$99e.MACOS=2,C$99e.ANDROID=3,C$99e.IPHONE=4,C$99e.IPAD=5,C$99e.BLACKBERRY=6,C$99e.NACL=7,C$99e.EMSCRIPTEN=8,C$99e.TIZEN=9,C$99e.WINRT=10,C$99e.WP8=11,C$99e.MOBILE_BROWSER=100,C$99e.DESKTOP_BROWSER=101,C$99e.EDITOR_PAGE=102,C$99e.EDITOR_CORE=103,C$99e.WECHAT_GAME=104,C$99e.QQ_PLAY=105,C$99e.FB_PLAYABLE_ADS=106,C$99e.BAIDU_GAME=107,C$99e.VIVO_GAME=108,C$99e.OPPO_GAME=109,C$99e.HUAWEI_GAME=110,C$99e.XIAOMI_GAME=111,C$99e.JKW_GAME=112,C$99e.ALIPAY_GAME=113,C$99e.WECHAT_GAME_SUB=114,C$99e.BAIDU_GAME_SUB=115,C$99e.QTT_GAME=116,C$99e.BROWSER_TYPE_WECHAT="wechat",C$99e.BROWSER_TYPE_WECHAT_GAME="wechatgame",C$99e.BROWSER_TYPE_WECHAT_GAME_SUB="wechatgamesub",C$99e.BROWSER_TYPE_BAIDU_GAME="baidugame",C$99e.BROWSER_TYPE_BAIDU_GAME_SUB="baidugamesub",C$99e.BROWSER_TYPE_XIAOMI_GAME="xiaomigame",C$99e.BROWSER_TYPE_ALIPAY_GAME="alipaygame",C$99e.BROWSER_TYPE_QQ_PLAY="qqplay",C$99e.BROWSER_TYPE_ANDROID="androidbrowser",C$99e.BROWSER_TYPE_IE="ie",C$99e.BROWSER_TYPE_EDGE="edge",C$99e.BROWSER_TYPE_QQ="qqbrowser",C$99e.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",C$99e.BROWSER_TYPE_UC="ucbrowser",C$99e.BROWSER_TYPE_UCBS="ucbs",C$99e.BROWSER_TYPE_360="360browser",C$99e.BROWSER_TYPE_BAIDU_APP="baiduboxapp",C$99e.BROWSER_TYPE_BAIDU="baidubrowser",C$99e.BROWSER_TYPE_MAXTHON="maxthon",C$99e.BROWSER_TYPE_OPERA="opera",C$99e.BROWSER_TYPE_OUPENG="oupeng",C$99e.BROWSER_TYPE_MIUI="miuibrowser",C$99e.BROWSER_TYPE_FIREFOX="firefox",C$99e.BROWSER_TYPE_SAFARI="safari",C$99e.BROWSER_TYPE_CHROME="chrome",C$99e.BROWSER_TYPE_LIEBAO="liebao",C$99e.BROWSER_TYPE_QZONE="qzone",C$99e.BROWSER_TYPE_SOUGOU="sogou",C$99e.BROWSER_TYPE_UNKNOWN="unknown",C$99e.isNative=!1,C$99e.isBrowser="object"==typeof window&&"object"==typeof document&&!0,C$99e.glExtension=function(C$99t){return!!cc.renderer.device.ext(C$99t)},C$99e.getMaxJointMatrixSize=function(){var C$99t;return C$99e._maxJointMatrixSize||(C$99t=cc.game._renderContext,C$99t=Math.floor(C$99t.getParameter(C$99t.MAX_VERTEX_UNIFORM_VECTORS)/4)-10,C$99e._maxJointMatrixSize=C$99t<50?0:50),C$99e._maxJointMatrixSize},C$99d.__globalAdapter&&C$99d.__globalAdapter.adaptSys)C$99d.__globalAdapter.adaptSys(C$99e);else{var C$99t=window,C$99i=C$99t.navigator,C$99h=document,C$99u=C$99h.documentElement,C$99n=C$99i.userAgent.toLowerCase();C$99e.isMobile=/mobile|android|iphone|ipad/.test(C$99n),"undefined"!=typeof FbPlayableAd?C$99e.platform=C$99e.FB_PLAYABLE_ADS:C$99e.platform=C$99e.isMobile?C$99e.MOBILE_BROWSER:C$99e.DESKTOP_BROWSER;var C$99r=(C$99r=C$99i.language)||C$99i.browserLanguage,C$99r=(C$99e.languageCode=C$99r.toLowerCase(),C$99r=C$99r?C$99r.split("-")[0]:C$99e.LANGUAGE_ENGLISH,C$99e.language=C$99r,!1),C$99s=!1,C$99o="",C$99a=0,C$99c=/android (\d+(?:\.\d+)*)/i.exec(C$99n)||/android (\d+(?:\.\d+)*)/i.exec(C$99i.platform),C$99c=(C$99c&&(C$99r=!0,C$99o=C$99c[1]||"",C$99a=parseInt(C$99o)||0),(C$99c=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(C$99n))?(C$99s=!0,C$99o=C$99c[2]||"",C$99a=parseInt(C$99o)||0):(/(iPhone|iPad|iPod)/.exec(C$99i.platform)||"MacIntel"===C$99i.platform&&C$99i.maxTouchPoints&&1<C$99i.maxTouchPoints)&&(C$99s=!0,C$99o="",C$99a=0),C$99e.OS_UNKNOWN),C$99a=(-1!==C$99i.appVersion.indexOf("Win")?C$99c=C$99e.OS_WINDOWS:C$99s?C$99c=C$99e.OS_IOS:-1!==C$99i.appVersion.indexOf("Mac")?C$99c=C$99e.OS_OSX:-1!==C$99i.appVersion.indexOf("X11")&&-1===C$99i.appVersion.indexOf("Linux")?C$99c=C$99e.OS_UNIX:C$99r?C$99c=C$99e.OS_ANDROID:-1===C$99i.appVersion.indexOf("Linux")&&-1===C$99n.indexOf("ubuntu")||(C$99c=C$99e.OS_LINUX),C$99e.os=C$99c,C$99e.osVersion=C$99o,C$99e.osMainVersion=C$99a,C$99e.browserType=C$99e.BROWSER_TYPE_UNKNOWN,("safari"===(C$99s=(C$99s=/mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|ucbs|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|miuibrowser/i.exec(C$99n)||/qq|ucbrowser|ubrowser|edge/i.exec(C$99n)||/chrome|safari|firefox|trident|opera|opr\/|oupeng/i.exec(C$99n))?C$99s[0].toLowerCase():C$99e.BROWSER_TYPE_UNKNOWN)&&C$99r||"qq"===C$99s&&C$99n.match(/android.*applewebkit/i))&&(C$99s=C$99e.BROWSER_TYPE_ANDROID),C$99c={micromessenger:C$99e.BROWSER_TYPE_WECHAT,trident:C$99e.BROWSER_TYPE_IE,edge:C$99e.BROWSER_TYPE_EDGE,"360 aphone":C$99e.BROWSER_TYPE_360,mxbrowser:C$99e.BROWSER_TYPE_MAXTHON,"opr/":C$99e.BROWSER_TYPE_OPERA,ubrowser:C$99e.BROWSER_TYPE_UC},C$99e.browserType=C$99c[C$99s]||C$99s,C$99e.browserVersion="",C$99o=(C$99o=C$99n.match(/(mqqbrowser|micromessenger|qqbrowser|sogou|qzone|liebao|maxthon|uc|ucbs|360 aphone|360|baiduboxapp|baidu|maxthon|mxbrowser|miui(?:.hybrid)?)(mobile)?(browser)?\/?([\d.]+)/i))||C$99n.match(/(qq|chrome|safari|firefox|trident|opera|opr\/|oupeng)(mobile)?(browser)?\/?([\d.]+)/i),C$99e.browserVersion=C$99o?C$99o[4]:"",window.innerWidth||document.documentElement.clientWidth),C$99r=window.innerHeight||document.documentElement.clientHeight,C$99c=window.devicePixelRatio||1,C$99s=(C$99e.windowPixelResolution={width:C$99c*C$99a,height:C$99c*C$99r},C$99e._checkWebGLRenderMode=function(){if(cc.game.renderType!==cc.game.RENDER_TYPE_WEBGL)throw new Error("This feature supports WebGL render mode only.")},document.createElement("canvas"));try{var C$99_=C$99e.localStorage=C$99t.localStorage;C$99_.setItem("storage",""),C$99_.removeItem("storage"),C$99_=null}catch(C$99t){C$99n=function(){cc.warnID(5200)};C$99e.localStorage={getItem:C$99n,setItem:C$99n,removeItem:C$99n,clear:C$99n}}var C$99l,C$99o=C$99s.toDataURL("image/webp").startsWith("data:image/webp"),C$99a=!!C$99s.getContext("2d"),C$99c=!1,C$99r=(C$99t.WebGLRenderingContext&&(C$99c=!0),C$99e.capabilities={canvas:C$99a,opengl:C$99c,webp:C$99o});void 0===C$99u.ontouchstart&&void 0===C$99h.ontouchstart&&!C$99i.msPointerEnabled||(C$99r.touches=!0),void 0!==C$99u.onmouseup&&(C$99r.mouse=!0),void 0!==C$99u.onkeyup&&(C$99r.keyboard=!0),(C$99t.DeviceMotionEvent||C$99t.DeviceOrientationEvent)&&(C$99r.accelerometer=!0),C$99e.browserVersion,C$99_=!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),C$99l={ONLY_ONE:!1,WEB_AUDIO:C$99_,DELAY_CREATE_CTX:!1},C$99e.os===C$99e.OS_IOS&&(C$99l.USE_LOADER_EVENT="loadedmetadata"),C$99e.browserType===C$99e.BROWSER_TYPE_FIREFOX&&(C$99l.DELAY_CREATE_CTX=!0,C$99l.USE_LOADER_EVENT="canplay"),C$99e.os===C$99e.OS_ANDROID&&C$99e.browserType===C$99e.BROWSER_TYPE_UC&&(C$99l.ONE_SOURCE=!0);try{C$99l.WEB_AUDIO&&(C$99l.context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),C$99l.DELAY_CREATE_CTX&&setTimeout(function(){C$99l.context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext)},0))}catch(C$99t){C$99l.WEB_AUDIO=!1,cc.logID(5201)}C$99n=[];(C$99s=document.createElement("audio")).canPlayType&&(C$99s.canPlayType('audio/ogg; codecs="vorbis"')&&C$99n.push(".ogg"),C$99s.canPlayType("audio/mpeg")&&C$99n.push(".mp3"),C$99s.canPlayType('audio/wav; codecs="1"')&&C$99n.push(".wav"),C$99s.canPlayType("audio/mp4")&&C$99n.push(".mp4"),C$99s.canPlayType("audio/x-m4a")&&C$99n.push(".m4a")),C$99l.format=C$99n,C$99e.__audioSupport=C$99l}return C$99e.NetworkType={NONE:0,LAN:1,WWAN:2},C$99e.getNetworkType=function(){return C$99e.NetworkType.LAN},C$99e.getBatteryLevel=function(){return 1},C$99e.garbageCollect=function(){},C$99e.restartVM=function(){},C$99e.getSafeAreaRect=function(){var C$99t=cc.view.getVisibleSize();return cc.rect(0,0,C$99t.width,C$99t.height)},C$99e.isObjectValid=function(C$99t){return!!C$99t},C$99e.dump=function(){var C$99t="",C$99t=(C$99t=(C$99t=(C$99t=(C$99t=(C$99t=(C$99t=(C$99t=(C$99t+="isMobile : "+this.isMobile+"\r\n")+("language : "+this.language+"\r\n"))+("browserType : "+this.browserType+"\r\n"))+("browserVersion : "+this.browserVersion+"\r\n"))+("capabilities : "+JSON.stringify(this.capabilities)+"\r\n"))+("os : "+this.os+"\r\n"))+("osVersion : "+this.osVersion+"\r\n"))+("platform : "+this.platform+"\r\n"))+("Using "+(cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n");cc.log(C$99t)},C$99e.openURL=function(C$99t){window.open(C$99t)},C$99e.now=function(){return Date.now?Date.now():+new Date},C$99e}();C$99e.exports=C$99n},{}],199:[function(C$99t,C$99e,C$99h){"use strict";var C$99i=C$99t("../event/event-target"),C$99u=C$99t("../platform/js"),C$99_=C$99t("../renderer"),C$99r=(C$99t("../platform/CCClass"),{init:function(){this.html=document.getElementsByTagName("html")[0]},availWidth:function(C$99t){return C$99t&&C$99t!==this.html?C$99t.clientWidth:window.innerWidth},availHeight:function(C$99t){return C$99t&&C$99t!==this.html?C$99t.clientHeight:window.innerHeight},meta:{width:"device-width"},adaptationType:cc.sys.browserType});switch(cc.sys.os===cc.sys.OS_IOS&&(C$99r.adaptationType=cc.sys.BROWSER_TYPE_SAFARI),C$99r.adaptationType){case cc.sys.BROWSER_TYPE_SAFARI:C$99r.meta["minimal-ui"]="true",C$99r.availWidth=cc.sys.isMobile?function(C$99t){return window.innerWidth}:function(C$99t){return C$99t.clientWidth},C$99r.availHeight=cc.sys.isMobile?function(C$99t){return window.innerHeight}:function(C$99t){return C$99t.clientHeight};break;case cc.sys.BROWSER_TYPE_SOUGOU:case cc.sys.BROWSER_TYPE_UC:C$99r.meta["minimal-ui"]="true",C$99r.availWidth=function(C$99t){return C$99t.clientWidth},C$99r.availHeight=function(C$99t){return C$99t.clientHeight}}function C$99n(){C$99i.call(this);var C$99t=cc.ContainerStrategy,C$99e=cc.ContentStrategy;C$99r.init(this),this._frameSize=cc.size(0,0),this._designResolutionSize=cc.size(0,0),this._originalDesignResolutionSize=cc.size(0,0),this._scaleX=1,this._scaleY=1,this._viewportRect=cc.rect(0,0,0,0),this._visibleRect=cc.rect(0,0,0,0),this._autoFullScreen=!1,this._devicePixelRatio=1,this._maxPixelRatio=2,this._retinaEnabled=!1,this._resizeCallback=null,this._resizing=!1,this._resizeWithBrowserSize=!1,this._orientationChanging=!0,this._isRotated=!1,this._orientation=cc.macro.ORIENTATION_AUTO,this._isAdjustViewport=!0,this._antiAliasEnabled=!1,this._resolutionPolicy=null,this._rpExactFit=new cc.ResolutionPolicy(C$99t.EQUAL_TO_FRAME,C$99e.EXACT_FIT),this._rpShowAll=new cc.ResolutionPolicy(C$99t.EQUAL_TO_FRAME,C$99e.SHOW_ALL),this._rpNoBorder=new cc.ResolutionPolicy(C$99t.EQUAL_TO_FRAME,C$99e.NO_BORDER),this._rpFixedHeight=new cc.ResolutionPolicy(C$99t.EQUAL_TO_FRAME,C$99e.FIXED_HEIGHT),this._rpFixedWidth=new cc.ResolutionPolicy(C$99t.EQUAL_TO_FRAME,C$99e.FIXED_WIDTH),cc.game.once(cc.game.EVENT_ENGINE_INITED,this.init,this)}var C$99s,C$99o,C$99a,C$99c,C$99l=null;cc.js.extend(C$99n,C$99i),cc.js.mixin(C$99n.prototype,{init:function(){this._initFrameSize();var C$99t=cc.game.canvas.width,C$99e=cc.game.canvas.height;this._designResolutionSize.width=C$99t,this._designResolutionSize.height=C$99e,this._originalDesignResolutionSize.width=C$99t,this._originalDesignResolutionSize.height=C$99e,this._viewportRect.width=C$99t,this._viewportRect.height=C$99e,this._visibleRect.width=C$99t,this._visibleRect.height=C$99e,cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,cc.visibleRect&&cc.visibleRect.init(this._visibleRect)},_resizeEvent:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s=this.setDesignResolutionSize?this:cc.view,C$99o=cc.sys;C$99o.browserType!==C$99o.BROWSER_TYPE_UC||C$99o.os!==C$99o.OS_IOS?(C$99o=C$99s._frameSize.width,C$99e=C$99s._frameSize.height,C$99i=C$99s._isRotated,cc.sys.isMobile?(C$99n=(C$99r=cc.game.container.style).margin,C$99r.margin="0",C$99r.display="none",C$99s._initFrameSize(),C$99r.margin=C$99n,C$99r.display="block"):C$99s._initFrameSize(),!0!==C$99t&&C$99s._isRotated===C$99i&&C$99s._frameSize.width===C$99o&&C$99s._frameSize.height===C$99e||(C$99n=C$99s._originalDesignResolutionSize.width,C$99r=C$99s._originalDesignResolutionSize.height,C$99s._resizing=!0,0<C$99n&&C$99s.setDesignResolutionSize(C$99n,C$99r,C$99s._resolutionPolicy),C$99s._resizing=!1,C$99s.emit("canvas-resize"),C$99s._resizeCallback&&C$99s._resizeCallback.call())):setTimeout(function(){C$99s._resizeEvent(C$99t)},0)},_orientationChange:function(){cc.view._orientationChanging=!0,cc.view._resizeEvent(),cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI&&cc.sys.isMobile&&setTimeout(function(){window.innerHeight>window.innerWidth&&window.scrollTo(0,1)},500)},resizeWithBrowserSize:function(C$99t){C$99t?this._resizeWithBrowserSize||(this._resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent),window.addEventListener("orientationchange",this._orientationChange)):this._resizeWithBrowserSize&&(this._resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent),window.removeEventListener("orientationchange",this._orientationChange))},setResizeCallback:function(C$99t){"function"!=typeof C$99t&&null!=C$99t||(this._resizeCallback=C$99t)},setOrientation:function(C$99t){var C$99e;(C$99t&=cc.macro.ORIENTATION_AUTO)&&this._orientation!==C$99t&&(this._orientation=C$99t,C$99t=this._originalDesignResolutionSize.width,C$99e=this._originalDesignResolutionSize.height,this.setDesignResolutionSize(C$99t,C$99e,this._resolutionPolicy))},_initFrameSize:function(){var C$99t=this._frameSize,C$99e=C$99r.availWidth(cc.game.frame),C$99i=C$99r.availHeight(cc.game.frame),C$99n=C$99i<=C$99e;!cc.sys.isMobile||C$99n&&this._orientation&cc.macro.ORIENTATION_LANDSCAPE||!C$99n&&this._orientation&cc.macro.ORIENTATION_PORTRAIT?(C$99t.width=C$99e,C$99t.height=C$99i,cc.game.container.style["-webkit-transform"]="rotate(0deg)",cc.game.container.style.transform="rotate(0deg)",this._isRotated=!1):(C$99t.width=C$99i,C$99t.height=C$99e,cc.game.container.style["-webkit-transform"]="rotate(90deg)",cc.game.container.style.transform="rotate(90deg)",cc.game.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.game.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0),this._orientationChanging&&setTimeout(function(){cc.view._orientationChanging=!1},1e3)},_setViewportMeta:function(C$99t,C$99e){var C$99i,C$99n,C$99r=document.getElementById("cocosMetaElement"),C$99s=(C$99r&&C$99e&&document.head.removeChild(C$99r),document.getElementsByName("viewport")),C$99s=C$99s?C$99s[0]:null,C$99o=C$99s?C$99s.content:"";for(C$99i in(C$99r=C$99r||document.createElement("meta")).id="cocosMetaElement",C$99r.name="viewport",C$99r.content="",C$99t)-1==C$99o.indexOf(C$99i)?C$99o+=","+C$99i+"="+C$99t[C$99i]:C$99e&&(C$99n=new RegExp(C$99i+"s*=s*[^,]+"),C$99o.replace(C$99n,C$99i+"="+C$99t[C$99i]));/^,/.test(C$99o)&&(C$99o=C$99o.substr(1)),C$99r.content=C$99o,C$99s&&(C$99s.content=C$99o),document.head.appendChild(C$99r)},_adjustViewportMeta:function(){this._isAdjustViewport&&(this._setViewportMeta(C$99r.meta,!1),this._isAdjustViewport=!1)},adjustViewportMeta:function(C$99t){this._isAdjustViewport=C$99t},enableRetina:function(C$99t){this._retinaEnabled=!!C$99t},isRetinaEnabled:function(){return this._retinaEnabled},enableAntiAlias:function(C$99t){if(cc.warnID(9200),this._antiAliasEnabled!==C$99t)if(this._antiAliasEnabled=C$99t,cc.game.renderType===cc.game.RENDER_TYPE_WEBGL){var C$99e,C$99i=cc.loader._cache;for(C$99e in C$99i){var C$99n,C$99r=C$99i[C$99e],C$99r=C$99r&&C$99r.content instanceof cc.Texture2D?C$99r.content:null;C$99r&&(C$99n=cc.Texture2D.Filter,C$99t?C$99r.setFilters(C$99n.LINEAR,C$99n.LINEAR):C$99r.setFilters(C$99n.NEAREST,C$99n.NEAREST))}}else{var C$99s;cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&((C$99s=cc.game.canvas.getContext("2d")).imageSmoothingEnabled=C$99t,C$99s.mozImageSmoothingEnabled=C$99t)}},isAntiAliasEnabled:function(){return this._antiAliasEnabled},enableAutoFullScreen:function(C$99t){C$99t&&C$99t!==this._autoFullScreen&&cc.sys.isMobile?(this._autoFullScreen=!0,cc.screen.autoFullScreen(cc.game.frame)):(this._autoFullScreen=!1,cc.screen.disableAutoFullScreen(cc.game.frame))},isAutoFullScreenEnabled:function(){return this._autoFullScreen},setCanvasSize:function(C$99t,C$99e){var C$99i=cc.game.canvas,C$99n=cc.game.container;C$99i.width=C$99t*this._devicePixelRatio,C$99i.height=C$99e*this._devicePixelRatio,C$99i.style.width=C$99t+"px",C$99i.style.height=C$99e+"px",C$99n.style.width=C$99t+"px",C$99n.style.height=C$99e+"px",this._resizeEvent()},getCanvasSize:function(){return cc.size(cc.game.canvas.width,cc.game.canvas.height)},getFrameSize:function(){return cc.size(this._frameSize.width,this._frameSize.height)},setFrameSize:function(C$99t,C$99e){this._frameSize.width=C$99t,this._frameSize.height=C$99e,cc.game.frame.style.width=C$99t+"px",cc.game.frame.style.height=C$99e+"px",this._resizeEvent(!0)},getVisibleSize:function(){return cc.size(this._visibleRect.width,this._visibleRect.height)},getVisibleSizeInPixel:function(){return cc.size(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)},getVisibleOrigin:function(){return cc.v2(this._visibleRect.x,this._visibleRect.y)},getVisibleOriginInPixel:function(){return cc.v2(this._visibleRect.x*this._scaleX,this._visibleRect.y*this._scaleY)},getResolutionPolicy:function(){return this._resolutionPolicy},setResolutionPolicy:function(C$99t){var C$99e;C$99t instanceof cc.ResolutionPolicy?this._resolutionPolicy=C$99t:(C$99t===(C$99e=cc.ResolutionPolicy).EXACT_FIT&&(this._resolutionPolicy=this._rpExactFit),C$99t===C$99e.SHOW_ALL&&(this._resolutionPolicy=this._rpShowAll),C$99t===C$99e.NO_BORDER&&(this._resolutionPolicy=this._rpNoBorder),C$99t===C$99e.FIXED_HEIGHT&&(this._resolutionPolicy=this._rpFixedHeight),C$99t===C$99e.FIXED_WIDTH&&(this._resolutionPolicy=this._rpFixedWidth))},setDesignResolutionSize:function(C$99t,C$99e,C$99i){var C$99n;0<C$99t||0<C$99e?(this.setResolutionPolicy(C$99i),(C$99i=this._resolutionPolicy)&&C$99i.preApply(this),cc.sys.isMobile&&this._adjustViewportMeta(),this._orientationChanging=!0,this._resizing||this._initFrameSize(),C$99i?(this._originalDesignResolutionSize.width=this._designResolutionSize.width=C$99t,this._originalDesignResolutionSize.height=this._designResolutionSize.height=C$99e,(C$99t=C$99i.apply(this,this._designResolutionSize)).scale&&2===C$99t.scale.length&&(this._scaleX=C$99t.scale[0],this._scaleY=C$99t.scale[1]),C$99t.viewport&&(C$99e=this._viewportRect,C$99n=this._visibleRect,C$99t=C$99t.viewport,C$99e.x=C$99t.x,C$99e.y=C$99t.y,C$99e.width=C$99t.width,C$99e.height=C$99t.height,C$99n.x=0,C$99n.y=0,C$99n.width=C$99t.width/this._scaleX,C$99n.height=C$99t.height/this._scaleY),C$99i.postApply(this),cc.winSize.width=this._visibleRect.width,cc.winSize.height=this._visibleRect.height,cc.visibleRect&&cc.visibleRect.init(this._visibleRect),C$99_.updateCameraViewport(),cc.internal.inputManager._updateCanvasBoundingRect(),this.emit("design-resolution-changed")):cc.logID(2201)):cc.logID(2200)},getDesignResolutionSize:function(){return cc.size(this._designResolutionSize.width,this._designResolutionSize.height)},setRealPixelResolution:function(C$99t,C$99e,C$99i){this._setViewportMeta({width:C$99t},!0),document.documentElement.style.width=C$99t+"px",document.body.style.width=C$99t+"px",document.body.style.left="0px",document.body.style.top="0px",this.setDesignResolutionSize(C$99t,C$99e,C$99i)},setViewportInPoints:function(C$99t,C$99e,C$99i,C$99n){var C$99r=this._scaleX,C$99s=this._scaleY;cc.game._renderContext.viewport(C$99t*C$99r+this._viewportRect.x,C$99e*C$99s+this._viewportRect.y,C$99i*C$99r,C$99n*C$99s)},setScissorInPoints:function(C$99t,C$99e,C$99i,C$99n){var C$99r=this._scaleX,C$99s=this._scaleY,C$99t=Math.ceil(C$99t*C$99r+this._viewportRect.x),C$99e=Math.ceil(C$99e*C$99s+this._viewportRect.y),C$99i=Math.ceil(C$99i*C$99r),C$99r=Math.ceil(C$99n*C$99s),C$99n=cc.game._renderContext;C$99l||(C$99s=C$99n.getParameter(C$99n.SCISSOR_BOX),C$99l=cc.rect(C$99s[0],C$99s[1],C$99s[2],C$99s[3])),C$99l.x===C$99t&&C$99l.y===C$99e&&C$99l.width===C$99i&&C$99l.height===C$99r||(C$99l.x=C$99t,C$99l.y=C$99e,C$99l.width=C$99i,C$99l.height=C$99r,C$99n.scissor(C$99t,C$99e,C$99i,C$99r))},isScissorEnabled:function(){return cc.game._renderContext.isEnabled(gl.SCISSOR_TEST)},getScissorRect:function(){C$99l||(C$99t=gl.getParameter(gl.SCISSOR_BOX),C$99l=cc.rect(C$99t[0],C$99t[1],C$99t[2],C$99t[3]));var C$99t=1/this._scaleX,C$99e=1/this._scaleY;return cc.rect((C$99l.x-this._viewportRect.x)*C$99t,(C$99l.y-this._viewportRect.y)*C$99e,C$99l.width*C$99t,C$99l.height*C$99e)},getViewportRect:function(){return this._viewportRect},getScaleX:function(){return this._scaleX},getScaleY:function(){return this._scaleY},getDevicePixelRatio:function(){return this._devicePixelRatio},convertToLocationInView:function(C$99t,C$99e,C$99i,C$99n){var C$99n=C$99n||cc.v2(),C$99r=C$99i.adjustedLeft||C$99i.left,C$99s=C$99i.adjustedTop||C$99i.top,C$99t=this._devicePixelRatio*(C$99t-C$99r),C$99r=this._devicePixelRatio*(C$99s+C$99i.height-C$99e);return this._isRotated?(C$99n.x=cc.game.canvas.width-C$99r,C$99n.y=C$99t):(C$99n.x=C$99t,C$99n.y=C$99r),C$99n},_convertMouseToLocationInView:function(C$99t,C$99e){var C$99i=this._viewportRect;C$99t.x=(this._devicePixelRatio*(C$99t.x-C$99e.left)-C$99i.x)/this._scaleX,C$99t.y=(this._devicePixelRatio*(C$99e.top+C$99e.height-C$99t.y)-C$99i.y)/this._scaleY},_convertPointWithScale:function(C$99t){var C$99e=this._viewportRect;C$99t.x=(C$99t.x-C$99e.x)/this._scaleX,C$99t.y=(C$99t.y-C$99e.y)/this._scaleY},_convertTouchesWithScale:function(C$99t){for(var C$99e,C$99i,C$99n=this._viewportRect,C$99r=this._scaleX,C$99s=this._scaleY,C$99o=0;C$99o<C$99t.length;C$99o++)C$99e=(C$99i=C$99t[C$99o])._point,C$99i=C$99i._prevPoint,C$99e.x=(C$99e.x-C$99n.x)/C$99r,C$99e.y=(C$99e.y-C$99n.y)/C$99s,C$99i.x=(C$99i.x-C$99n.x)/C$99r,C$99i.y=(C$99i.y-C$99n.y)/C$99s}}),cc.ContainerStrategy=cc.Class({name:"ContainerStrategy",preApply:function(C$99t){},apply:function(C$99t,C$99e){},postApply:function(C$99t){},_setupContainer:function(C$99t,C$99e,C$99i){var C$99n=cc.game.canvas,C$99r=(this._setupStyle(C$99t,C$99e,C$99i),C$99t._devicePixelRatio=1);C$99t.isRetinaEnabled()&&(C$99r=C$99t._devicePixelRatio=Math.min(C$99t._maxPixelRatio,window.devicePixelRatio||1)),C$99n.width=C$99e*C$99r,C$99n.height=C$99i*C$99r},_setupStyle:function(C$99t,C$99e,C$99i){var C$99n=cc.game.canvas,C$99r=cc.game.container;cc.sys.os===cc.sys.OS_ANDROID&&(document.body.style.width=(C$99t._isRotated?C$99i:C$99e)+"px",document.body.style.height=(C$99t._isRotated?C$99e:C$99i)+"px"),C$99r.style.width=C$99n.style.width=C$99e+"px",C$99r.style.height=C$99n.style.height=C$99i+"px"},_fixContainer:function(){document.body.insertBefore(cc.game.container,document.body.firstChild);var C$99t=document.body.style,C$99t=(C$99t.width=window.innerWidth+"px",C$99t.height=window.innerHeight+"px",C$99t.overflow="hidden",cc.game.container.style);C$99t.position="fixed",C$99t.left=C$99t.top="0px",document.body.scrollTop=0}}),cc.ContentStrategy=cc.Class({name:"ContentStrategy",ctor:function(){this._result={scale:[1,1],viewport:null}},_buildResult:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){Math.abs(C$99t-C$99i)<2&&(C$99i=C$99t),Math.abs(C$99e-C$99n)<2&&(C$99n=C$99e);C$99t=cc.rect((C$99t-C$99i)/2,(C$99e-C$99n)/2,C$99i,C$99n);return cc.game.renderType,cc.game.RENDER_TYPE_CANVAS,this._result.scale=[C$99r,C$99s],this._result.viewport=C$99t,this._result},preApply:function(C$99t){},apply:function(C$99t,C$99e){return{scale:[1,1]}},postApply:function(C$99t){}}),C$99t=cc.Class({name:"EqualToFrame",extends:cc.ContainerStrategy,apply:function(C$99t){var C$99e=C$99t._frameSize.height,C$99i=cc.game.container.style;this._setupContainer(C$99t,C$99t._frameSize.width,C$99t._frameSize.height),C$99t._isRotated?C$99i.margin="0 0 0 "+C$99e+"px":C$99i.margin="0px",C$99i.padding="0px"}}),C$99s=cc.Class({name:"ProportionalToFrame",extends:cc.ContainerStrategy,apply:function(C$99t,C$99e){var C$99i=C$99t._frameSize.width,C$99n=C$99t._frameSize.height,C$99r=cc.game.container.style,C$99s=C$99e.width,C$99e=C$99e.height,C$99o=C$99i/C$99s,C$99a=C$99n/C$99e,C$99e=C$99o<C$99a?(C$99c=C$99i,C$99e*C$99o):(C$99c=C$99s*C$99a,C$99n),C$99o=Math.round((C$99i-C$99c)/2),C$99s=Math.round((C$99n-C$99e)/2),C$99c=C$99i-2*C$99o;this._setupContainer(C$99t,C$99c,C$99e=C$99n-2*C$99s),C$99t._isRotated?C$99r.margin="0 0 0 "+C$99n+"px":C$99r.margin="0px",C$99r.paddingLeft=C$99o+"px",C$99r.paddingRight=C$99o+"px",C$99r.paddingTop=C$99s+"px",C$99r.paddingBottom=C$99s+"px"}}),cc.Class({name:"EqualToWindow",extends:C$99t,preApply:function(C$99t){this._super(C$99t),cc.game.frame=document.documentElement},apply:function(C$99t){this._super(C$99t),this._fixContainer()}}),cc.Class({name:"ProportionalToWindow",extends:C$99s,preApply:function(C$99t){this._super(C$99t),cc.game.frame=document.documentElement},apply:function(C$99t,C$99e){this._super(C$99t,C$99e),this._fixContainer()}}),C$99o=cc.Class({name:"OriginalContainer",extends:cc.ContainerStrategy,apply:function(C$99t){this._setupContainer(C$99t,cc.game.canvas.width,cc.game.canvas.height)}}),(C$99a=("undefined"==typeof window?global:window).__globalAdapter)&&(C$99a.adaptContainerStrategy&&C$99a.adaptContainerStrategy(cc.ContainerStrategy.prototype),C$99a.adaptView&&C$99a.adaptView(C$99n.prototype)),cc.ContainerStrategy.EQUAL_TO_FRAME=new C$99t,cc.ContainerStrategy.PROPORTION_TO_FRAME=new C$99s,cc.ContainerStrategy.ORIGINAL_CONTAINER=new C$99o,C$99a=cc.Class({name:"ExactFit",extends:cc.ContentStrategy,apply:function(C$99t,C$99e){var C$99i=cc.game.canvas.width,C$99n=cc.game.canvas.height,C$99r=C$99i/C$99e.width,C$99e=C$99n/C$99e.height;return this._buildResult(C$99i,C$99n,C$99i,C$99n,C$99r,C$99e)}}),C$99t=cc.Class({name:"ShowAll",extends:cc.ContentStrategy,apply:function(C$99t,C$99e){var C$99i,C$99n=cc.game.canvas.width,C$99r=cc.game.canvas.height,C$99s=C$99e.width,C$99e=C$99e.height,C$99o=C$99n/C$99s,C$99a=C$99r/C$99e,C$99c=0,C$99e=C$99o<C$99a?(C$99i=C$99n,C$99e*(C$99c=C$99o)):(C$99i=C$99s*(C$99c=C$99a),C$99r);return this._buildResult(C$99n,C$99r,C$99i,C$99e,C$99c,C$99c)}}),C$99s=cc.Class({name:"NoBorder",extends:cc.ContentStrategy,apply:function(C$99t,C$99e){var C$99i,C$99n,C$99r=cc.game.canvas.width,C$99s=cc.game.canvas.height,C$99o=C$99e.width,C$99e=C$99e.height,C$99a=C$99r/C$99o,C$99c=C$99s/C$99e,C$99o=C$99a<C$99c?(C$99n=C$99o*(C$99i=C$99c),C$99s):(C$99n=C$99r,C$99e*(C$99i=C$99a));return this._buildResult(C$99r,C$99s,C$99n,C$99o,C$99i,C$99i)}}),C$99o=cc.Class({name:"FixedHeight",extends:cc.ContentStrategy,apply:function(C$99t,C$99e){var C$99i=cc.game.canvas.width,C$99n=cc.game.canvas.height,C$99e=C$99n/C$99e.height;return this._buildResult(C$99i,C$99n,C$99i,C$99n,C$99e,C$99e)}}),C$99c=cc.Class({name:"FixedWidth",extends:cc.ContentStrategy,apply:function(C$99t,C$99e){var C$99i=cc.game.canvas.width,C$99n=cc.game.canvas.height,C$99e=C$99i/C$99e.width;return this._buildResult(C$99i,C$99n,C$99i,C$99n,C$99e,C$99e)}}),cc.ContentStrategy.EXACT_FIT=new C$99a,cc.ContentStrategy.SHOW_ALL=new C$99t,cc.ContentStrategy.NO_BORDER=new C$99s,cc.ContentStrategy.FIXED_HEIGHT=new C$99o,cc.ContentStrategy.FIXED_WIDTH=new C$99c,cc.ResolutionPolicy=cc.Class({name:"cc.ResolutionPolicy",ctor:function(C$99t,C$99e){this._containerStrategy=null,this._contentStrategy=null,this.setContainerStrategy(C$99t),this.setContentStrategy(C$99e)},preApply:function(C$99t){this._containerStrategy.preApply(C$99t),this._contentStrategy.preApply(C$99t)},apply:function(C$99t,C$99e){return this._containerStrategy.apply(C$99t,C$99e),this._contentStrategy.apply(C$99t,C$99e)},postApply:function(C$99t){this._containerStrategy.postApply(C$99t),this._contentStrategy.postApply(C$99t)},setContainerStrategy:function(C$99t){C$99t instanceof cc.ContainerStrategy&&(this._containerStrategy=C$99t)},setContentStrategy:function(C$99t){C$99t instanceof cc.ContentStrategy&&(this._contentStrategy=C$99t)}}),C$99u.get(cc.ResolutionPolicy.prototype,"canvasSize",function(){return cc.v2(cc.game.canvas.width,cc.game.canvas.height)}),cc.ResolutionPolicy.EXACT_FIT=0,cc.ResolutionPolicy.NO_BORDER=1,cc.ResolutionPolicy.SHOW_ALL=2,cc.ResolutionPolicy.FIXED_HEIGHT=3,cc.ResolutionPolicy.FIXED_WIDTH=4,cc.ResolutionPolicy.UNKNOWN=5,cc.view=new C$99n,cc.winSize=cc.size(),C$99e.exports=cc.view},{"../event/event-target":115,"../platform/CCClass":189,"../platform/js":209,"../renderer":220}],200:[function(C$99t,C$99e,C$99i){"use strict";cc.visibleRect={topLeft:cc.v2(0,0),topRight:cc.v2(0,0),top:cc.v2(0,0),bottomLeft:cc.v2(0,0),bottomRight:cc.v2(0,0),bottom:cc.v2(0,0),center:cc.v2(0,0),left:cc.v2(0,0),right:cc.v2(0,0),width:0,height:0,init:function(C$99t){var C$99e=this.width=C$99t.width,C$99i=this.height=C$99t.height,C$99n=C$99t.x,C$99t=C$99t.y,C$99r=C$99t+C$99i,C$99s=C$99n+C$99e;this.topLeft.x=C$99n,this.topLeft.y=C$99r,this.topRight.x=C$99s,this.topRight.y=C$99r,this.top.x=C$99n+C$99e/2,this.top.y=C$99r,this.bottomLeft.x=C$99n,this.bottomLeft.y=C$99t,this.bottomRight.x=C$99s,this.bottomRight.y=C$99t,this.bottom.x=C$99n+C$99e/2,this.bottom.y=C$99t,this.center.x=C$99n+C$99e/2,this.center.y=C$99t+C$99i/2,this.left.x=C$99n,this.left.y=C$99t+C$99i/2,this.right.x=C$99s,this.right.y=C$99t+C$99i/2}}},{}],201:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./js");C$99t("./utils").isPlainEmptyObj_DEV;function C$99s(C$99t,C$99e){C$99e=C$99e?Object.create(C$99e):{};return C$99n.value(C$99t,"__attrs__",C$99e),C$99e}function C$99r(C$99t,C$99e,C$99i){var C$99n,C$99r=C$99a(C$99t),C$99s=C$99e+"$_$",C$99o={};for(C$99n in C$99r)C$99n.startsWith(C$99s)&&(C$99o[C$99n.slice(C$99s.length)]=C$99r[C$99n]);return C$99o}function C$99a(C$99t){return C$99t.hasOwnProperty("__attrs__")&&C$99t.__attrs__||function(C$99t){var C$99e;if("function"!=typeof C$99t)return C$99s(C$99t,C$99a(C$99t.constructor));for(var C$99i=cc.Class.getInheritanceChain(C$99t),C$99n=C$99i.length-1;0<=C$99n;C$99n--){var C$99r=C$99i[C$99n];C$99r.hasOwnProperty("__attrs__")&&C$99r.__attrs__||C$99s(C$99r,(C$99e=C$99i[C$99n+1])&&C$99e.__attrs__)}return C$99s(C$99t,(C$99e=C$99i[0])&&C$99e.__attrs__),C$99t.__attrs__}(C$99t)}function C$99o(C$99t,C$99e){this.name=C$99t,this.default=C$99e}C$99o.prototype.toString=function(){return this.name},cc.Integer=new C$99o("Integer",0),cc.Float=new C$99o("Float",0),cc.Boolean=new C$99o("Boolean",!1),cc.String=new C$99o("String",""),C$99e.exports={PrimitiveType:C$99o,attr:C$99r,getClassAttrs:C$99a,setClassAttr:function(C$99t,C$99e,C$99i,C$99n){C$99a(C$99t)[C$99e+"$_$"+C$99i]=C$99n},DELIMETER:"$_$",getTypeChecker_ET:!1,getObjTypeChecker_ET:!1,ScriptUuid:{}}},{"./CCClass":189,"./js":209,"./utils":213}],202:[function(C$99t,C$99e,C$99h){"use strict";var C$99i=C$99t("./js"),C$99a=C$99i.array.fastRemoveAt;function C$99n(){}function C$99r(){this.callback=C$99n,this.target=void 0,this.once=!1}C$99r.prototype.set=function(C$99t,C$99e,C$99i){this.callback=C$99t,this.target=C$99e,this.once=!!C$99i};var C$99c=new C$99i.Pool(function(C$99t){return C$99t.callback=C$99n,C$99t.target=void 0,!(C$99t.once=!1)},32);function C$99s(){this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}C$99c.get=function(){return this._get()||new C$99r};var C$99t=C$99s.prototype,C$99l=(C$99t.removeByCallback=function(C$99t){for(var C$99e=0;C$99e<this.callbackInfos.length;++C$99e){var C$99i=this.callbackInfos[C$99e];C$99i&&C$99i.callback===C$99t&&(C$99c.put(C$99i),C$99a(this.callbackInfos,C$99e),--C$99e)}},C$99t.removeByTarget=function(C$99t){for(var C$99e=0;C$99e<this.callbackInfos.length;++C$99e){var C$99i=this.callbackInfos[C$99e];C$99i&&C$99i.target===C$99t&&(C$99c.put(C$99i),C$99a(this.callbackInfos,C$99e),--C$99e)}},C$99t.cancel=function(C$99t){var C$99e=this.callbackInfos[C$99t];C$99e&&(C$99c.put(C$99e),this.callbackInfos[C$99t]=null),this.containCanceled=!0},C$99t.cancelAll=function(){for(var C$99t=0;C$99t<this.callbackInfos.length;C$99t++){var C$99e=this.callbackInfos[C$99t];C$99e&&(C$99c.put(C$99e),this.callbackInfos[C$99t]=null)}this.containCanceled=!0},C$99t.purgeCanceled=function(){for(var C$99t=this.callbackInfos.length-1;0<=C$99t;--C$99t)this.callbackInfos[C$99t]||C$99a(this.callbackInfos,C$99t);this.containCanceled=!1},C$99t.clear=function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1},new C$99i.Pool(function(C$99t){return C$99t.callbackInfos=[],C$99t.isInvoking=!1,!(C$99t.containCanceled=!1)},16));function C$99o(){this._callbackTable=C$99i.createMap(!0)}C$99l.get=function(){return this._get()||new C$99s},(C$99t=C$99o.prototype).on=function(C$99t,C$99e,C$99i,C$99n){var C$99r=(C$99r=this._callbackTable[C$99t])||(this._callbackTable[C$99t]=C$99l.get()),C$99t=C$99c.get();C$99t.set(C$99e,C$99i,C$99n),C$99r.callbackInfos.push(C$99t)},C$99t.hasEventListener=function(C$99t,C$99e,C$99i){C$99t=this._callbackTable[C$99t];if(!C$99t)return!1;var C$99n=C$99t.callbackInfos;if(!C$99e){if(C$99t.isInvoking){for(var C$99r=0;C$99r<C$99n.length;++C$99r)if(C$99n[C$99r])return!0;return!1}return 0<C$99n.length}for(var C$99s=0;C$99s<C$99n.length;++C$99s){var C$99o=C$99n[C$99s];if(C$99o&&C$99o.callback===C$99e&&C$99o.target===C$99i)return!0}return!1},C$99t.removeAll=function(C$99t){if("string"==typeof C$99t){var C$99e=this._callbackTable[C$99t];C$99e&&(C$99e.isInvoking?C$99e.cancelAll():(C$99e.clear(),C$99l.put(C$99e),delete this._callbackTable[C$99t]))}else if(C$99t)for(var C$99i in this._callbackTable){var C$99n=this._callbackTable[C$99i];if(C$99n.isInvoking)for(var C$99r=C$99n.callbackInfos,C$99s=0;C$99s<C$99r.length;++C$99s){var C$99o=C$99r[C$99s];C$99o&&C$99o.target===C$99t&&C$99n.cancel(C$99s)}else C$99n.removeByTarget(C$99t)}},C$99t.off=function(C$99t,C$99e,C$99i){var C$99n=this._callbackTable[C$99t];if(C$99n)for(var C$99r=C$99n.callbackInfos,C$99s=0;C$99s<C$99r.length;++C$99s){var C$99o=C$99r[C$99s];if(C$99o&&C$99o.callback===C$99e&&C$99o.target===C$99i){C$99n.isInvoking?C$99n.cancel(C$99s):(C$99a(C$99r,C$99s),C$99c.put(C$99o));break}}},C$99t.emit=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99h){var C$99s=this._callbackTable[C$99t];if(C$99s){for(var C$99u=!C$99s.isInvoking,C$99_=(C$99s.isInvoking=!0,C$99s.callbackInfos),C$99o=0,C$99d=C$99_.length;C$99o<C$99d;++C$99o){var C$99a,C$99c,C$99l=C$99_[C$99o];C$99l&&(C$99a=C$99l.target,C$99c=C$99l.callback,C$99l.once&&this.off(C$99t,C$99c,C$99a),C$99a?C$99c.call(C$99a,C$99e,C$99i,C$99n,C$99r,C$99h):C$99c(C$99e,C$99i,C$99n,C$99r,C$99h))}C$99u&&(C$99s.isInvoking=!1,C$99s.containCanceled&&C$99s.purgeCanceled())}},C$99e.exports=C$99o},{"./js":209}],203:[function(C$99t,C$99e,C$99i){"use strict";C$99e.exports={flattenCodeArray:function(C$99t){var C$99e=[];return function C$99t(C$99e,C$99i){for(var C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n];Array.isArray(C$99r)?C$99t(C$99e,C$99r):C$99e.push(C$99r)}}(C$99e,C$99t),C$99e.join("")}}},{}],204:[function(C$99t,C$99e,C$99i){"use strict";function C$99a(){this.uuidList=[],this.uuidObjList=[],this.uuidPropList=[],this._stillUseUrl=C$99S.createMap(!0)}var C$99f,C$99S=C$99t("./js"),C$99T=C$99t("./attribute"),C$99w=C$99t("./CCClass"),C$99E=C$99t("../utils/misc"),C$99c=(C$99a.prototype.reset=function(){this.uuidList.length=0,this.uuidObjList.length=0,this.uuidPropList.length=0,C$99S.clear(this._stillUseUrl)},C$99a.prototype.push=function(C$99t,C$99e,C$99i,C$99n){C$99n&&(this._stillUseUrl[this.uuidList.length]=!0),this.uuidList.push(C$99i),this.uuidObjList.push(C$99t),this.uuidPropList.push(C$99e)},(C$99a.pool=new C$99S.Pool(function(C$99t){C$99t.reset()},10)).get=function(){return this._get()||new C$99a},(C$99t=C$99o.prototype).deserialize=function(C$99t){if(Array.isArray(C$99t)){var C$99e=C$99t,C$99i=C$99e.length;this.deserializedList.length=C$99i;for(var C$99n=0;C$99n<C$99i;C$99n++)C$99e[C$99n]&&(this.deserializedList[C$99n]=this._deserializeObject(C$99e[C$99n],!1));this.deserializedData=0<C$99i?this.deserializedList[0]:[]}else this.deserializedList.length=1,this.deserializedData=C$99t?this._deserializeObject(C$99t,!1):null,this.deserializedList[0]=this.deserializedData;for(var C$99r,C$99s,C$99t=this,C$99o=C$99t.deserializedList,C$99a=C$99t._idPropList,C$99c=C$99t._idList,C$99h=C$99t._idObjList,C$99l=(C$99t._classFinder&&C$99t._classFinder.onDereferenced,0);C$99l<C$99c.length;C$99l++)C$99r=C$99a[C$99l],C$99s=C$99c[C$99l],C$99h[C$99l][C$99r]=C$99o[C$99s];return this.deserializedData},C$99t._deserializeObject=function(C$99t,C$99h,C$99u,C$99e,C$99_){var C$99i,C$99n=null,C$99r=null,C$99s=C$99t.__type__;if("TypedArray"===C$99s){for(var C$99d=C$99t.array,C$99n=new window[C$99t.ctor](C$99d.length),C$99o=0;C$99o<C$99d.length;++C$99o)C$99n[C$99o]=C$99d[C$99o];return C$99n}if(C$99s){var C$99a,C$99r=this._classFinder(C$99s,C$99t,C$99e,C$99_);if(!C$99r)return this._classFinder===C$99S._getClassById&&cc.deserialize.reportMissingClass(C$99s),null;if((C$99n=new C$99r)._deserialize)return C$99n._deserialize(C$99t.content,this),C$99n;if(cc.Class._isCCClass(C$99r)){C$99e=this;C$99_=C$99n;C$99s=C$99t;var C$99c=C$99r;C$99c.hasOwnProperty("__deserialize__")?C$99a=C$99c.__deserialize__:(C$99a=C$99f(C$99e,C$99c),C$99S.value(C$99c,"__deserialize__",C$99a,!0));C$99a(C$99e,C$99_,C$99s,C$99c,C$99u)}else this._deserializeTypedObject(C$99n,C$99t,C$99r)}else if(Array.isArray(C$99t)){C$99n=new Array(C$99t.length);for(var C$99l=0;C$99l<C$99t.length;C$99l++)"object"==typeof(C$99i=C$99t[C$99l])&&C$99i?this._deserializeObjField(C$99n,C$99i,""+C$99l,null,C$99h):C$99n[C$99l]=C$99i}else this._deserializePrimitiveObject(C$99n={},C$99t);return C$99n},C$99t._deserializeObjField=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s,C$99o=C$99e.__id__;void 0===C$99o?(C$99s=C$99e.__uuid__)?this.result.push(C$99t,C$99i,C$99s,C$99r):C$99t[C$99i]=this._deserializeObject(C$99e,C$99r):(C$99s=this.deserializedList[C$99o])?C$99t[C$99i]=C$99s:(this._idList.push(C$99o),this._idObjList.push(C$99t),this._idPropList.push(C$99i))},C$99t._deserializePrimitiveObject=function(C$99t,C$99e){var C$99i,C$99n;for(C$99i in C$99e)C$99e.hasOwnProperty(C$99i)&&("object"!=typeof(C$99n=C$99e[C$99i])?"__type__"!==C$99i&&(C$99t[C$99i]=C$99n):C$99n?this._deserializeObjField(C$99t,C$99n,C$99i):C$99t[C$99i]=null)},C$99t._deserializeTypedObject=function(C$99t,C$99e,C$99i){if(C$99i===cc.Vec2)return C$99t.x=C$99e.x||0,void(C$99t.y=C$99e.y||0);if(C$99i===cc.Vec3)return C$99t.x=C$99e.x||0,C$99t.y=C$99e.y||0,void(C$99t.z=C$99e.z||0);var C$99n;if(C$99i===cc.Color)return C$99t.r=C$99e.r||0,C$99t.g=C$99e.g||0,C$99t.b=C$99e.b||0,C$99n=C$99e.a,void(C$99t.a=void 0===C$99n?255:C$99n);if(C$99i===cc.Size)return C$99t.width=C$99e.width||0,void(C$99t.height=C$99e.height||0);for(var C$99r=C$99T.DELIMETER+"default",C$99s=C$99T.getClassAttrs(C$99i),C$99o=C$99i.__props__||Object.keys(C$99t),C$99a=0;C$99a<C$99o.length;C$99a++){var C$99c=C$99o[C$99a],C$99l=C$99e[C$99c];"object"!=typeof(C$99l=void 0!==C$99l&&C$99e.hasOwnProperty(C$99c)?C$99l:C$99w.getDefault(C$99s[C$99c+C$99r]))?C$99t[C$99c]=C$99l:C$99l?this._deserializeObjField(C$99t,C$99l,C$99c):C$99t[C$99c]=null}},C$99f=function(C$99s,C$99t){for(var C$99m,C$99u=C$99E.BUILTIN_CLASSID_RE.test(C$99S._getClassId(C$99t)),C$99y=cc.js.isChildClassOf(C$99t,cc._BaseNode)||cc.js.isChildClassOf(C$99t,cc.Component),C$99_=[],C$99d=C$99_,C$99f=[],C$99p=C$99f,C$99g=[],C$99v=[],C$99o=C$99t.__values__,C$99e=(C$99m="_$erialized"===C$99o[C$99o.length-1],C$99T.getClassAttrs(C$99t)),C$99a=C$99T.DELIMETER+"type",C$99c=C$99T.DELIMETER+"default",C$99l=C$99T.DELIMETER+"saveUrlAsAsset",C$99h=C$99T.DELIMETER+"formerlySerializedAs",C$99x=0;C$99x<C$99o.length;C$99x++){var C$99i,C$99n=C$99o[C$99x],C$99r=C$99n,C$99b=(C$99e[C$99n+C$99h]&&(C$99r=C$99e[C$99n+C$99h]),C$99e[C$99n+C$99l]),C$99A=C$99w.getDefault(C$99e[C$99n+C$99c]),C$99C=!1;C$99u&&(C$99i=C$99e[C$99n+C$99a],C$99C=void 0===C$99A&&C$99i?C$99i instanceof C$99T.PrimitiveType:"string"==(C$99i=typeof C$99A)&&!C$99b||"number"==C$99i||"boolean"==C$99i),C$99u&&C$99C?(C$99r!==C$99n&&C$99d===C$99_&&(C$99d=C$99_.slice()),C$99_.push(C$99n),C$99d!==C$99_&&C$99d.push(C$99r)):(C$99r!==C$99n&&C$99p===C$99f&&(C$99p=C$99f.slice()),C$99f.push(C$99n),C$99p!==C$99f&&C$99p.push(C$99r),C$99g.push(C$99b),C$99v.push(C$99A instanceof cc.ValueType&&C$99A.constructor))}return function(C$99t,C$99e,C$99i,C$99l,C$99h){for(var C$99n=0;C$99n<C$99_.length;++C$99n){var C$99r=C$99i[C$99d[C$99n]];void 0!==C$99r&&(C$99e[C$99_[C$99n]]=C$99r)}for(var C$99s=0;C$99s<C$99f.length;++C$99s){var C$99o,C$99a=C$99f[C$99s],C$99c=C$99i[C$99p[C$99s]];void 0!==C$99c&&(C$99u||"object"==typeof C$99c?(C$99o=C$99v[C$99s])?C$99u||C$99c?C$99t._deserializeTypedObject(C$99e[C$99a],C$99c,C$99o):C$99e[C$99a]=null:C$99c?C$99t._deserializeObjField(C$99e,C$99c,C$99a,null,C$99g[C$99s]):C$99e[C$99a]=null:C$99e[C$99a]=C$99c)}C$99y&&C$99i._id&&(C$99e._id=C$99i._id),C$99m&&(C$99e._$erialized=JSON.parse(JSON.stringify(C$99i)),C$99t._deserializePrimitiveObject(C$99e._$erialized,C$99i))}},(C$99o.pool=new C$99S.Pool(function(C$99t){C$99t.result=null,C$99t.customEnv=null,C$99t.deserializedList.length=0,C$99t.deserializedData=null,C$99t._classFinder=null,C$99t._idList.length=0,C$99t._idObjList.length=0,C$99t._idPropList.length=0},1)).get=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=this._get();return C$99s?(C$99s.result=C$99t,C$99s.customEnv=C$99n,C$99s._classFinder=C$99i,C$99s):new C$99o(C$99t,0,C$99i,C$99n)},C$99o);function C$99o(C$99t,C$99e,C$99i,C$99n,C$99r){this.result=C$99t,this.customEnv=C$99n,this.deserializedList=[],this.deserializedData=null,this._classFinder=C$99i,this._idList=[],this._idObjList=[],this._idPropList=[]}cc.deserialize=function(C$99t,C$99e,C$99i){var C$99n=(C$99i=C$99i||{}).classFinder||C$99S._getClassById,C$99r=C$99i.createAssetRefs||cc.sys.platform===cc.sys.EDITOR_CORE,C$99s=C$99i.customEnv,C$99i=C$99i.ignoreEditorOnly,C$99o=("string"==typeof C$99t&&(C$99t=JSON.parse(C$99t)),!C$99e),C$99n=(C$99e=C$99e||C$99a.pool.get(),C$99c.pool.get(C$99e,!1,C$99n,C$99s,C$99i)),C$99s=(cc.game._isCloning=!0,C$99n.deserialize(C$99t));return cc.game._isCloning=!1,C$99c.pool.put(C$99n),C$99r&&C$99e.assignAssetsBy(Editor.serialize.asAsset),C$99o&&C$99a.pool.put(C$99e),C$99s},cc.deserialize.Details=C$99a,cc.deserialize.reportMissingClass=function(C$99t){cc.warnID(5302,C$99t)}},{"../utils/misc":264,"./CCClass":189,"./attribute":201,"./js":209}],205:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t){this.id=0|998*Math.random(),this.prefix=C$99t?C$99t+".":""}C$99n.prototype.getNewId=function(){return this.prefix+ ++this.id},C$99n.global=new C$99n("global"),C$99e.exports=C$99n},{}],206:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./js"),C$99t("./CCClass"),C$99t("./CCClassDecorator"),C$99t("./CCEnum"),C$99t("./CCObject"),C$99t("./callbacks-invoker"),C$99t("./url"),C$99t("./deserialize"),C$99t("./instantiate"),C$99t("./instantiate-jit"),C$99t("./requiring-frame"),C$99t("./CCSys"),C$99t("./CCMacro"),C$99t("./CCAssetLibrary"),C$99t("./CCVisibleRect")},{"./CCAssetLibrary":188,"./CCClass":189,"./CCClassDecorator":190,"./CCEnum":191,"./CCMacro":194,"./CCObject":195,"./CCSys":198,"./CCVisibleRect":200,"./callbacks-invoker":202,"./deserialize":204,"./instantiate":208,"./instantiate-jit":207,"./js":209,"./requiring-frame":211,"./url":212}],207:[function(C$99t,C$99e,C$99i){"use strict";var C$99o=C$99t("./CCObject"),C$99n=C$99o.Flags.Destroyed,C$99f=C$99o.Flags.PersistentMask,C$99h=C$99t("./attribute"),C$99s=C$99t("./js"),C$99u=C$99t("./CCClass"),C$99p=C$99t("./compiler"),C$99m=C$99h.DELIMETER+"default",C$99r=C$99u.IDENTIFIER_RE,C$99y=C$99u.escapeForJS,C$99g={"cc.Node":"cc.Node","cc.Sprite":"cc.Sprite","cc.Label":"cc.Label","cc.Button":"cc.Button","cc.Widget":"cc.Widget","cc.Animation":"cc.Animation","cc.ClickEvent":!1,"cc.PrefabInfo":!1};try{Float32Array.name||(Float32Array.name="Float32Array"),Float64Array.name||(Float64Array.name="Float64Array"),Int8Array.name||(Int8Array.name="Int8Array"),Int16Array.name||(Int16Array.name="Int16Array"),Int32Array.name||(Int32Array.name="Int32Array"),Uint8Array.name||(Uint8Array.name="Uint8Array"),Uint16Array.name||(Uint16Array.name="Uint16Array"),Uint32Array.name||(Uint32Array.name="Uint32Array")}catch(C$99t){}function C$99a(C$99t,C$99e){this.varName=C$99t,this.expression=C$99e}function C$99c(C$99t,C$99e){return C$99e instanceof C$99a?new C$99a(C$99e.varName,C$99t+C$99e.expression):C$99t+C$99e}function C$99l(C$99t,C$99e,C$99i){Array.isArray(C$99i)?(C$99i[0]=C$99c(C$99e,C$99i[0]),C$99t.push(C$99i)):C$99t.push(C$99c(C$99e,C$99i)+";")}function C$99_(C$99t){this._exps=[],this._targetExp=C$99t}function C$99v(C$99t,C$99e){if("function"==typeof C$99t)try{C$99t=C$99t()}catch(C$99t){return!1}if(C$99t===C$99e)return!0;if(C$99t&&C$99e){if(C$99t instanceof cc.ValueType&&C$99t.equals(C$99e))return!0;if(Array.isArray(C$99t)&&Array.isArray(C$99e)||C$99t.constructor===Object&&C$99e.constructor===Object)try{return Array.isArray(C$99t)&&Array.isArray(C$99e)&&0===C$99t.length&&0===C$99e.length}catch(C$99t){}}return!1}function C$99d(C$99t){return C$99r.test(C$99t)?"."+C$99t:"["+C$99y(C$99t)+"]"}function C$99x(C$99t,C$99e){this.parent=C$99e,this.objsToClear_iN$t=[],this.codeArray=[],this.objs=[],this.funcs=[],this.funcModuleCache=C$99s.createMap(),C$99s.mixin(this.funcModuleCache,C$99g),this.globalVariables=[],this.globalVariableId=0,this.localVariableId=0,this.codeArray.push("var o,t;","if(R){","o=R;","}else{","o=R=new "+this.getFuncModule(C$99t.constructor,!0)+"();","}"),C$99s.value(C$99t,"_iN$t",{globalVar:"R"},!0),this.objsToClear_iN$t.push(C$99t),this.enumerateObject(this.codeArray,C$99t),0<this.globalVariables.length&&(C$99i="var "+this.globalVariables.join(",")+";");var C$99i,C$99e=C$99p.flattenCodeArray(["return (function(R){",C$99i||[],this.codeArray,"return o;","})"]);this.result=Function("O","F",C$99e)(this.objs,this.funcs);for(var C$99n=0,C$99r=this.objsToClear_iN$t.length;C$99n<C$99r;++C$99n)this.objsToClear_iN$t[C$99n]._iN$t=null;this.objsToClear_iN$t.length=0}C$99a.prototype.toString=function(){return"var "+this.varName+"="+this.expression+";"},C$99_.prototype.append=function(C$99t,C$99e){this._exps.push([C$99t,C$99e])},C$99_.prototype.writeCode=function(C$99t){var C$99e;if(1<this._exps.length)C$99t.push("t="+this._targetExp+";"),C$99e="t";else{if(1!==this._exps.length)return;C$99e=this._targetExp}for(var C$99i=0;C$99i<this._exps.length;C$99i++){var C$99n=this._exps[C$99i];C$99l(C$99t,C$99e+C$99d(C$99n[0])+"=",C$99n[1])}},(C$99_.pool=new C$99s.Pool(function(C$99t){C$99t._exps.length=0,C$99t._targetExp=null},1)).get=function(C$99t){var C$99e=this._get()||new C$99_;return C$99e._targetExp=C$99t,C$99e};C$99t=C$99x.prototype;C$99t.getFuncModule=function(C$99t,C$99e){var C$99i=C$99s.getClassName(C$99t);if(C$99i){var C$99n=this.funcModuleCache[C$99i];if(C$99n)return C$99n;if(void 0===C$99n)if(-1!==C$99i.indexOf("."))try{if(C$99t===Function("return "+C$99i)())return this.funcModuleCache[C$99i]=C$99i}catch(C$99t){}}C$99n=this.funcs.indexOf(C$99t),C$99n<0&&(C$99n=this.funcs.length,this.funcs.push(C$99t)),C$99t="F["+C$99n+"]";return this.funcModuleCache[C$99i]=C$99t=C$99e?"("+C$99t+")":C$99t},C$99t.getObjRef=function(C$99t){var C$99e=this.objs.indexOf(C$99t);return C$99e<0&&(C$99e=this.objs.length,this.objs.push(C$99t)),"O["+C$99e+"]"},C$99t.setValueType=function(C$99t,C$99e,C$99i,C$99n){for(var C$99r=C$99_.pool.get(C$99n),C$99s=(C$99s=C$99e.constructor.__props__)||Object.keys(C$99e),C$99o=0;C$99o<C$99s.length;C$99o++){var C$99a=C$99s[C$99o],C$99c=C$99i[C$99a];C$99e[C$99a]!==C$99c&&(C$99c=this.enumerateField(C$99i,C$99a,C$99c),C$99r.append(C$99a,C$99c))}C$99r.writeCode(C$99t),C$99_.pool.put(C$99r)},C$99t.enumerateCCClass=function(C$99t,C$99e,C$99i){for(var C$99n=C$99i.__values__,C$99r=C$99h.getClassAttrs(C$99i),C$99s=0;C$99s<C$99n.length;C$99s++){var C$99o,C$99a=C$99n[C$99s],C$99c=C$99e[C$99a],C$99l=C$99r[C$99a+C$99m];C$99v(C$99l,C$99c)||("object"==typeof C$99c&&C$99c instanceof cc.ValueType&&(C$99l=C$99u.getDefault(C$99l))&&C$99l.constructor===C$99c.constructor?(C$99o="o"+C$99d(C$99a),this.setValueType(C$99t,C$99l,C$99c,C$99o)):this.setObjProp(C$99t,C$99e,C$99a,C$99c))}},C$99t.instantiateArray=function(C$99t){if(0===C$99t.length)return"[]";var C$99e="a"+ ++this.localVariableId,C$99i=[new C$99a(C$99e,"new Array("+C$99t.length+")")];C$99s.value(C$99t,"_iN$t",{globalVar:"",source:C$99i},!0),this.objsToClear_iN$t.push(C$99t);for(var C$99n=0;C$99n<C$99t.length;++C$99n)C$99l(C$99i,C$99e+"["+C$99n+"]=",this.enumerateField(C$99t,C$99n,C$99t[C$99n]));return C$99i},C$99t.instantiateTypedArray=function(C$99t){var C$99e=C$99t.constructor.name||function(C$99t){if(C$99t===Float32Array)return"Float32Array";if(C$99t===Float64Array)return"Float64Array";if(C$99t===Int8Array)return"Int8Array";if(C$99t===Int16Array)return"Int16Array";if(C$99t===Int32Array)return"Int32Array";if(C$99t===Uint8Array)return"Uint8Array";if(C$99t===Uint16Array)return"Uint16Array";if(C$99t===Uint32Array)return"Uint32Array";throw new Error("Unknown TypedArray could not be instantiated: "+C$99t)}(C$99t.constructor);if(0===C$99t.length)return"new "+C$99e;var C$99i="a"+ ++this.localVariableId,C$99n=[new C$99a(C$99i,"new "+C$99e+"("+C$99t.length+")")];C$99t._iN$t={globalVar:"",source:C$99n},this.objsToClear_iN$t.push(C$99t);for(var C$99r=0;C$99r<C$99t.length;++C$99r)0!==C$99t[C$99r]&&C$99l(C$99n,C$99i+"["+C$99r+"]=",C$99t[C$99r]);return C$99n},C$99t.enumerateField=function(C$99t,C$99e,C$99i){var C$99n,C$99r,C$99s;return"object"==typeof C$99i&&C$99i?(C$99n=C$99i._iN$t)?((C$99r=C$99n.globalVar)||(C$99r=C$99n.globalVar="v"+ ++this.globalVariableId,this.globalVariables.push(C$99r),C$99s=C$99n.source[0],C$99n.source[0]=C$99c(C$99r+"=",C$99s)),C$99r):ArrayBuffer.isView(C$99i)?this.instantiateTypedArray(C$99i):Array.isArray(C$99i)?this.instantiateArray(C$99i):this.instantiateObj(C$99i):"function"==typeof C$99i?this.getFuncModule(C$99i):"string"==typeof C$99i?C$99y(C$99i):("_objFlags"===C$99e&&C$99t instanceof C$99o&&(C$99i&=C$99f),C$99i)},C$99t.setObjProp=function(C$99t,C$99e,C$99i,C$99n){C$99l(C$99t,"o"+C$99d(C$99i)+"=",this.enumerateField(C$99e,C$99i,C$99n))},C$99t.enumerateObject=function(C$99t,C$99e){var C$99i,C$99n=C$99e.constructor;if(cc.Class._isCCClass(C$99n))this.enumerateCCClass(C$99t,C$99e,C$99n);else for(var C$99r in C$99e)!C$99e.hasOwnProperty(C$99r)||95===C$99r.charCodeAt(0)&&95===C$99r.charCodeAt(1)&&"__type__"!==C$99r||("object"==typeof(C$99i=C$99e[C$99r])&&C$99i&&C$99i===C$99e._iN$t||this.setObjProp(C$99t,C$99e,C$99r,C$99i))},C$99t.instantiateObj=function(C$99t){if(C$99t instanceof cc.ValueType)return C$99u.getNewValueTypeCode(C$99t);if(C$99t instanceof cc.Asset)return this.getObjRef(C$99t);if(C$99t._objFlags&C$99n)return null;var C$99e,C$99i=C$99t.constructor;if(cc.Class._isCCClass(C$99i)){if(this.parent)if(this.parent instanceof cc.Component){if(C$99t instanceof cc._BaseNode||C$99t instanceof cc.Component)return this.getObjRef(C$99t)}else if(this.parent instanceof cc._BaseNode)if(C$99t instanceof cc._BaseNode){if(!C$99t.isChildOf(this.parent))return this.getObjRef(C$99t)}else if(C$99t instanceof cc.Component&&!C$99t.node.isChildOf(this.parent))return this.getObjRef(C$99t);C$99e=new C$99a("o","new "+this.getFuncModule(C$99i,!0)+"()")}else if(C$99i===Object)C$99e=new C$99a("o","{}");else{if(C$99i)return this.getObjRef(C$99t);C$99e=new C$99a("o","Object.create(null)")}C$99i=[C$99e];return C$99s.value(C$99t,"_iN$t",{globalVar:"",source:C$99i},!0),this.objsToClear_iN$t.push(C$99t),this.enumerateObject(C$99i,C$99t),["(function(){",C$99i,"return o;})();"]},C$99e.exports={compile:function(C$99t){return new C$99x(C$99t,C$99t instanceof cc._BaseNode&&C$99t).result},equalsToDefault:C$99v}},{"./CCClass":189,"./CCObject":195,"./attribute":201,"./compiler":203,"./js":209}],208:[function(C$99t,C$99i,C$99r){"use strict";var C$99f=C$99t("./CCObject"),C$99p=C$99t("../value-types/value-type"),C$99h=C$99f.Flags.Destroyed,C$99v=C$99f.Flags.PersistentMask,C$99s=C$99t("./utils").isDomNode,C$99m=C$99t("./js");function C$99e(C$99t,C$99e){if(!C$99e){if("object"!=typeof C$99t||Array.isArray(C$99t))return null;if(!C$99t)return null;if(!cc.isValid(C$99t))return null}var C$99i;if(C$99t instanceof C$99f){if(C$99t._instantiate)return cc.game._isCloning=!0,C$99i=C$99t._instantiate(),cc.game._isCloning=!1,C$99i;if(C$99t instanceof cc.Asset)return null}return cc.game._isCloning=!0,C$99i=C$99n(C$99t),cc.game._isCloning=!1,C$99i}var C$99y=[];function C$99n(C$99t,C$99e){if(Array.isArray(C$99t))return null;if(C$99s&&C$99s(C$99t))return null;var C$99i;C$99i=C$99t._iN$t||(C$99t.constructor?new C$99t.constructor:Object.create(null)),C$99l(C$99t,C$99i,C$99e);for(var C$99n=0,C$99r=C$99y.length;C$99n<C$99r;++C$99n)C$99y[C$99n]._iN$t=null;return C$99y.length=0,C$99i}function C$99l(C$99t,C$99e,C$99i){C$99m.value(C$99t,"_iN$t",C$99e,!0),C$99y.push(C$99t);var C$99n,C$99h=C$99t.constructor;if(cc.Class._isCCClass(C$99h)){var C$99u=C$99t;var C$99r=C$99e;var C$99_=C$99i;for(var C$99d=C$99h.__values__,C$99s=0;C$99s<C$99d.length;C$99s++){var C$99o,C$99a=C$99d[C$99s],C$99c=C$99u[C$99a];"object"==typeof C$99c&&C$99c?(C$99o=C$99r[C$99a])instanceof C$99p&&C$99o.constructor===C$99c.constructor?C$99o.set(C$99c):C$99r[C$99a]=C$99c._iN$t||C$99g(C$99c,C$99_):C$99r[C$99a]=C$99c}}else for(var C$99l in C$99t)!C$99t.hasOwnProperty(C$99l)||95===C$99l.charCodeAt(0)&&95===C$99l.charCodeAt(1)&&"__type__"!==C$99l||("object"==typeof(C$99n=C$99t[C$99l])&&C$99n?C$99n!==C$99e&&(C$99e[C$99l]=C$99n._iN$t||C$99g(C$99n,C$99i)):C$99e[C$99l]=C$99n);C$99t instanceof C$99f&&(C$99e._objFlags&=C$99v)}function C$99g(C$99t,C$99e){if(C$99t instanceof C$99p)return C$99t.clone();if(C$99t instanceof cc.Asset)return C$99t;if(ArrayBuffer.isView(C$99t)){var C$99i=C$99t.length,C$99n=new C$99t.constructor(C$99i);C$99t._iN$t=C$99n,C$99y.push(C$99t);for(var C$99r=0;C$99r<C$99i;++C$99r)C$99n[C$99r]=C$99t[C$99r];return C$99n}if(Array.isArray(C$99t)){var C$99s=C$99t.length;C$99n=new Array(C$99s),C$99m.value(C$99t,"_iN$t",C$99n,!0),C$99y.push(C$99t);for(var C$99o=0;C$99o<C$99s;++C$99o){var C$99a=C$99t[C$99o];C$99n[C$99o]="object"==typeof C$99a&&C$99a?C$99a._iN$t||C$99g(C$99a,C$99e):C$99a}return C$99n}if(C$99t._objFlags&C$99h)return null;var C$99c=C$99t.constructor;if(cc.Class._isCCClass(C$99c)){if(C$99e)if(C$99e instanceof cc.Component){if(C$99t instanceof cc._BaseNode||C$99t instanceof cc.Component)return C$99t}else if(C$99e instanceof cc._BaseNode)if(C$99t instanceof cc._BaseNode){if(!C$99t.isChildOf(C$99e))return C$99t}else if(C$99t instanceof cc.Component&&!C$99t.node.isChildOf(C$99e))return C$99t;C$99n=new C$99c}else if(C$99c===Object)C$99n={};else{if(C$99c)return C$99t;C$99n=Object.create(null)}return C$99l(C$99t,C$99n,C$99e),C$99n}C$99e._clone=C$99n,cc.instantiate=C$99e,C$99i.exports=C$99e},{"../value-types/value-type":287,"./CCObject":195,"./js":209,"./utils":213}],209:[function(C$99t,C$99i,C$99u){"use strict";var C$99_=new(C$99t("./id-generater"))("TmpCId.");function C$99n(C$99t,C$99e){for(;C$99t;){var C$99i=Object.getOwnPropertyDescriptor(C$99t,C$99e);if(C$99i)return C$99i;C$99t=Object.getPrototypeOf(C$99t)}return null}function C$99d(C$99t,C$99e,C$99i){C$99e=C$99n(C$99e,C$99t);Object.defineProperty(C$99i,C$99t,C$99e)}var C$99r,C$99s,C$99f,C$99a={isNumber:function(C$99t){return"number"==typeof C$99t||C$99t instanceof Number},isString:function(C$99t){return"string"==typeof C$99t||C$99t instanceof String},addon:function(C$99t){C$99t=C$99t||{};for(var C$99e=1,C$99i=arguments.length;C$99e<C$99i;C$99e++){var C$99n=arguments[C$99e];if(C$99n)if("object"==typeof C$99n)for(var C$99r in C$99n)C$99r in C$99t||C$99d(C$99r,C$99n,C$99t);else cc.errorID(5402,C$99n)}return C$99t},mixin:function(C$99t){C$99t=C$99t||{};for(var C$99e=1,C$99i=arguments.length;C$99e<C$99i;C$99e++){var C$99n=arguments[C$99e];if(C$99n)if("object"==typeof C$99n)for(var C$99r in C$99n)C$99d(C$99r,C$99n,C$99t);else cc.errorID(5403,C$99n)}return C$99t},extend:function(C$99t,C$99e){for(var C$99i in C$99e)C$99e.hasOwnProperty(C$99i)&&(C$99t[C$99i]=C$99e[C$99i]);return C$99t.prototype=Object.create(C$99e.prototype,{constructor:{value:C$99t,writable:!0,configurable:!0}}),C$99t},getSuper:function(C$99t){C$99t=C$99t.prototype,C$99t=C$99t&&Object.getPrototypeOf(C$99t);return C$99t&&C$99t.constructor},isChildClassOf:function(C$99t,C$99e){if(C$99t&&C$99e){if("function"!=typeof C$99t)return!1;if("function"!=typeof C$99e)return!1;if(C$99t===C$99e)return!0;for(;;){if(!(C$99t=C$99a.getSuper(C$99t)))return!1;if(C$99t===C$99e)return!0}}return!1},clear:function(C$99t){for(var C$99e=Object.keys(C$99t),C$99i=0;C$99i<C$99e.length;C$99i++)delete C$99t[C$99e[C$99i]]},isEmptyObject:function(C$99t){for(var C$99e in C$99t)return!1;return!0},getPropertyDescriptor:C$99n},C$99o={value:void 0,enumerable:!1,writable:!1,configurable:!0},C$99c={get:null,set:null,enumerable:!(C$99a.value=function(C$99t,C$99e,C$99i,C$99n,C$99r){C$99o.value=C$99i,C$99o.writable=C$99n,C$99o.enumerable=C$99r,Object.defineProperty(C$99t,C$99e,C$99o),C$99o.value=void 0})},C$99l={get:null,enumerable:!(C$99a.getset=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){"function"!=typeof C$99n&&(C$99r=C$99n,C$99n=void 0),C$99c.get=C$99i,C$99c.set=C$99n,C$99c.enumerable=C$99r,C$99c.configurable=C$99s,Object.defineProperty(C$99t,C$99e,C$99c),C$99c.get=null,C$99c.set=null}),configurable:!1},C$99h={set:null,enumerable:!(C$99a.get=function(C$99t,C$99e,C$99i,C$99n,C$99r){C$99l.get=C$99i,C$99l.enumerable=C$99n,C$99l.configurable=C$99r,Object.defineProperty(C$99t,C$99e,C$99l),C$99l.get=null}),configurable:!1};function C$99p(C$99n,C$99t,C$99r){return C$99a.getset(C$99a,C$99t,function(){return Object.assign({},C$99r)},function(C$99t){C$99a.clear(C$99r),Object.assign(C$99r,C$99t)}),function(C$99t,C$99e){var C$99i;C$99e.prototype.hasOwnProperty(C$99n)&&delete C$99r[C$99e.prototype[C$99n]],C$99a.value(C$99e.prototype,C$99n,C$99t),C$99t&&((C$99i=C$99r[C$99t])&&C$99i!==C$99e?cc.error("A Class already exists with the same "+C$99n+' : "'+C$99t+'".'):C$99r[C$99t]=C$99e)}}C$99a.set=function(C$99t,C$99e,C$99i,C$99n,C$99r){C$99h.set=C$99i,C$99h.enumerable=C$99n,C$99h.configurable=C$99r,Object.defineProperty(C$99t,C$99e,C$99h),C$99h.set=null},C$99a.getClassName=function(C$99t){if("function"!=typeof C$99t)return C$99t&&C$99t.constructor?C$99a.getClassName(C$99t.constructor):"";var C$99e=C$99t.prototype;if(C$99e&&C$99e.hasOwnProperty("__classname__")&&C$99e.__classname__)return C$99e.__classname__;C$99e="";return C$99t.name&&(C$99e=C$99t.name),!C$99t.toString||(C$99t="["===(C$99t=C$99t.toString()).charAt(0)?C$99t.match(/\[\w+\s*(\w+)\]/):C$99t.match(/function\s*(\w+)/))&&2===C$99t.length&&(C$99e=C$99t[1]),"Object"!==C$99e?C$99e:""},C$99r={},C$99s={},C$99a._setClassId=C$99p("__cid__","_registeredClassIds",C$99r),C$99f=C$99p("__classname__","_registeredClassNames",C$99s),C$99a.setClassName=function(C$99t,C$99e){C$99f(C$99t,C$99e),C$99e.prototype.hasOwnProperty("__cid__")||(C$99t=C$99t||C$99_.getNewId())&&C$99a._setClassId(C$99t,C$99e)},C$99a.unregisterClass=function(){for(var C$99t=0;C$99t<arguments.length;C$99t++){var C$99e=arguments[C$99t].prototype,C$99i=C$99e.__cid__,C$99i=(C$99i&&delete C$99r[C$99i],C$99e.__classname__);C$99i&&delete C$99s[C$99i]}},C$99a._getClassById=function(C$99t){return C$99r[C$99t]},C$99a.getClassByName=function(C$99t){return C$99s[C$99t]},C$99a._getClassId=function(C$99t,C$99e){if("function"==typeof C$99t&&C$99t.prototype.hasOwnProperty("__cid__"))return C$99t.prototype.__cid__;if(C$99t&&C$99t.constructor){var C$99i=C$99t.constructor.prototype;if(C$99i&&C$99i.hasOwnProperty("__cid__"))return C$99t.__cid__}return""},C$99a.obsolete=function(C$99t,C$99e,C$99i,C$99n){var C$99r=/([^.]+)$/,C$99e=C$99r.exec(C$99e)[0],C$99s=C$99r.exec(C$99i)[0];function C$99o(){return this[C$99s]}C$99n?C$99a.getset(C$99t,C$99e,C$99o,function(C$99t){this[C$99s]=C$99t}):C$99a.get(C$99t,C$99e,C$99o)},C$99a.obsoletes=function(C$99t,C$99e,C$99i,C$99n){for(var C$99r in C$99i){var C$99s=C$99i[C$99r];C$99a.obsolete(C$99t,C$99e+"."+C$99r,C$99s,C$99n)}};var C$99m=/(%d)|(%s)/,C$99y=/%s/;function C$99g(C$99t,C$99e){C$99t.splice(C$99e,1)}function C$99v(C$99t,C$99e){C$99e=C$99t.indexOf(C$99e);return 0<=C$99e&&(C$99g(C$99t,C$99e),!0)}C$99a.formatStr=function(){var C$99t=arguments.length;if(0===C$99t)return"";var C$99e=arguments[0];if(1===C$99t)return""+C$99e;if("string"==typeof C$99e&&C$99m.test(C$99e))for(var C$99i=1;C$99i<C$99t;++C$99i){var C$99n=arguments[C$99i],C$99r="number"==typeof C$99n?C$99m:C$99y;C$99r.test(C$99e)?C$99e=C$99e.replace(C$99r,C$99n):C$99e+=" "+C$99n}else for(var C$99s=1;C$99s<C$99t;++C$99s)C$99e+=" "+arguments[C$99s];return C$99e},C$99a.shiftArguments=function(){for(var C$99t=arguments.length-1,C$99e=new Array(C$99t),C$99i=0;C$99i<C$99t;++C$99i)C$99e[C$99i]=arguments[C$99i+1];return C$99e},C$99a.createMap=function(C$99t){var C$99e=Object.create(null);return C$99t&&(C$99e["."]=!0,C$99e["/"]=!0,delete C$99e["."],delete C$99e["/"]),C$99e};var C$99x=Array.prototype.indexOf;function C$99e(C$99t,C$99e){void 0===C$99e&&(C$99e=C$99t,C$99t=null),this.get=null,this.count=0,this._pool=new Array(C$99e),this._cleanup=C$99t}C$99a.array={remove:C$99v,fastRemove:function(C$99t,C$99e){0<=(C$99e=C$99t.indexOf(C$99e))&&(C$99t[C$99e]=C$99t[C$99t.length-1],--C$99t.length)},removeAt:C$99g,fastRemoveAt:function(C$99t,C$99e){var C$99i=C$99t.length;C$99e<0||C$99i<=C$99e||(C$99t[C$99e]=C$99t[C$99i-1],C$99t.length=C$99i-1)},contains:function(C$99t,C$99e){return 0<=C$99t.indexOf(C$99e)},verifyType:function(C$99t,C$99e){if(C$99t&&0<C$99t.length)for(var C$99i=0;C$99i<C$99t.length;C$99i++)if(!(C$99t[C$99i]instanceof C$99e))return cc.logID(1300),!1;return!0},removeArray:function(C$99t,C$99e){for(var C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)C$99v(C$99t,C$99e[C$99i])},appendObjectsAt:function(C$99t,C$99e,C$99i){return C$99t.splice.apply(C$99t,[C$99i,0].concat(C$99e)),C$99t},copy:function(C$99t){for(var C$99e=C$99t.length,C$99i=new Array(C$99e),C$99n=0;C$99n<C$99e;C$99n+=1)C$99i[C$99n]=C$99t[C$99n];return C$99i},indexOf:C$99x,MutableForwardIterator:C$99t("../utils/mutable-forward-iterator")},C$99e.prototype._get=function(){var C$99t;return 0<this.count?(--this.count,C$99t=this._pool[this.count],this._pool[this.count]=null,C$99t):null},C$99e.prototype.put=function(C$99t){var C$99e=this._pool;this.count<C$99e.length&&(this._cleanup&&!1===this._cleanup(C$99t)||(C$99e[this.count]=C$99t,++this.count))},C$99e.prototype.resize=function(C$99t){0<=C$99t&&(this._pool.length=C$99t,this.count>C$99t&&(this.count=C$99t))},C$99a.Pool=C$99e,cc.js=C$99a,C$99i.exports=C$99a},{"../utils/mutable-forward-iterator":265,"./id-generater":205}],210:[function(C$99t,C$99e,C$99a){"use strict";var C$99s=C$99t("./js"),C$99o=C$99t("./attribute"),C$99c={url:{canUsedInGet:!0},default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function C$99l(C$99t,C$99e,C$99i,C$99n){C$99t=C$99t?{_short:!0}:{_short:!0,default:C$99e};return C$99i&&(C$99n?C$99t.url=C$99i:C$99t.type=C$99i),C$99t}C$99a.getFullFormOfProperty=function(C$99t,C$99e,C$99i,C$99n){var C$99r;return C$99t&&C$99t.constructor===Object?null:Array.isArray(C$99t)&&0<C$99t.length?(C$99t[0],C$99l(C$99e,[],C$99t)):"function"==typeof C$99t?(C$99r=C$99t,cc.RawAsset.isRawAssetType(C$99r)||cc.RawAsset.wasRawAssetType(C$99r)?C$99l(C$99e,"",C$99r,!0):C$99l(C$99e,C$99s.isChildClassOf(C$99r,cc.ValueType)?new C$99r:null,C$99r)):C$99t instanceof C$99o.PrimitiveType?C$99l(C$99e,C$99t.default):C$99l(C$99e,C$99t)},C$99a.preprocessAttrs=function(C$99t,C$99e,C$99i,C$99n){for(var C$99r in C$99t){var C$99s=C$99t[C$99r],C$99o=C$99a.getFullFormOfProperty(C$99s,!1,C$99r,C$99e);(C$99s=C$99o?C$99t[C$99r]=C$99o:C$99s)&&((C$99o=C$99s.notify)&&function(C$99t,C$99e,C$99i,C$99n){if(!C$99t.get&&!C$99t.set&&C$99t.hasOwnProperty("default")){var C$99r,C$99s="_N$"+C$99e,C$99o=(C$99t.get=function(){return this[C$99s]},C$99t.set=function(C$99t){var C$99e=this[C$99s];this[C$99s]=C$99t,C$99i.call(this,C$99e)},{});for(C$99r in C$99n[C$99s]=C$99o,C$99c){var C$99a=C$99c[C$99r];C$99t.hasOwnProperty(C$99r)&&(C$99o[C$99r]=C$99t[C$99r],C$99a.canUsedInGet||delete C$99t[C$99r])}}}(C$99s,C$99r,C$99o,C$99t),"type"in C$99s&&function(C$99t,C$99e,C$99i,C$99n){if(Array.isArray(C$99e)){if(!(0<C$99e.length))return cc.errorID(5508,C$99i,C$99n);if(cc.RawAsset.isRawAssetType(C$99e[0]))return C$99t.url=C$99e[0],delete C$99t.type;C$99t.type=C$99e=C$99e[0]}"function"==typeof C$99e&&(C$99e===String?C$99t.type=cc.String:C$99e===Boolean?C$99t.type=cc.Boolean:C$99e===Number&&(C$99t.type=cc.Float))}(C$99s,C$99s.type,C$99e,C$99r),"url"in C$99s&&(C$99r=(C$99o=C$99s).url,Array.isArray(C$99r)&&0<C$99r.length&&(C$99r=C$99r[0]),C$99o.type=C$99r),"type"in C$99s&&C$99s.type)}},C$99a.validateMethodWithProps=function(C$99t,C$99e,C$99i,C$99n,C$99r){return"function"==typeof C$99t||null===C$99t}},{"./CCClass":189,"./attribute":201,"./js":209}],211:[function(C$99t,C$99e,C$99i){"use strict";var C$99r=[];cc._RF={push:function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=C$99e,C$99e=""),C$99r.push({uuid:C$99e,script:C$99i,module:C$99t,exports:C$99t.exports,beh:null})},pop:function(){var C$99t=C$99r.pop(),C$99e=C$99t.module,C$99i=C$99e.exports;if(C$99i===C$99t.exports){for(var C$99n in C$99i)return;C$99e.exports=C$99t.cls}},peek:function(){return C$99r[C$99r.length-1]}}},{}],212:[function(C$99t,C$99e,C$99i){"use strict";cc.url={_rawAssets:"",normalize:function(C$99t){return C$99t&&(46===C$99t.charCodeAt(0)&&47===C$99t.charCodeAt(1)?C$99t=C$99t.slice(2):47===C$99t.charCodeAt(0)&&(C$99t=C$99t.slice(1))),C$99t},raw:function(C$99t){if((C$99t=this.normalize(C$99t)).startsWith("resources/")){var C$99e=cc.loader._getResUuid(C$99t.slice(10),cc.Asset,null,!0);if(C$99e)return cc.AssetLibrary.getLibUrlNoExt(C$99e,!0)+cc.path.extname(C$99t)}else cc.errorID(7002,C$99t);return this._rawAssets+C$99t},_init:function(C$99t){this._rawAssets=cc.path.stripSep(C$99t)+"/"}},C$99e.exports=cc.url},{}],213:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./js");C$99e.exports={contains:function(C$99t,C$99e){if("function"==typeof C$99t.contains)return C$99t.contains(C$99e);if("function"==typeof C$99t.compareDocumentPosition)return!!(16&C$99t.compareDocumentPosition(C$99e));var C$99i=C$99e.parentNode;if(C$99i)do{if(C$99i===C$99t)return!0}while(null!==(C$99i=C$99i.parentNode));return!1},isDomNode:"object"==typeof window&&("function"==typeof Node?function(C$99t){return C$99t instanceof Node}:function(C$99t){return C$99t&&"object"==typeof C$99t&&"number"==typeof C$99t.nodeType&&"string"==typeof C$99t.nodeName}),callInNextTick:function(C$99t,C$99e,C$99i){C$99t&&setTimeout(function(){C$99t(C$99e,C$99i)},0)}}},{"./js":209}],214:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./platform/js"),C$99t("./value-types"),C$99t("./utils"),C$99t("./platform/CCInputManager"),C$99t("./platform/CCInputExtension"),C$99t("./event"),C$99t("./platform/CCSys"),C$99t("./platform/CCMacro"),C$99t("./load-pipeline"),C$99t("./CCDirector"),C$99t("./renderer"),C$99t("./platform/CCView"),C$99t("./platform/CCScreen"),C$99t("./CCScheduler"),C$99t("./event-manager")},{"./CCDirector":28,"./CCScheduler":33,"./event":117,"./event-manager":113,"./load-pipeline":144,"./platform/CCInputExtension":192,"./platform/CCInputManager":193,"./platform/CCMacro":194,"./platform/CCScreen":197,"./platform/CCSys":198,"./platform/CCView":199,"./platform/js":209,"./renderer":220,"./utils":262,"./value-types":279}],215:[function(C$99t,C$99h,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99i=C$99r(C$99t("./assembler")),C$99n=C$99r(C$99t("./utils/dynamic-atlas/manager")),C$99u=C$99r(C$99t("./webgl/render-data"));function C$99r(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99s(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99_(C$99n){return function(){var C$99t,C$99e,C$99i=C$99a(C$99n);return C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99a(this).constructor,Reflect.construct(C$99i,arguments,C$99t)):C$99i.apply(this,arguments),C$99i=this,!(C$99e=C$99t)||"object"!=typeof C$99e&&"function"!=typeof C$99e?C$99o(C$99i):C$99e}}function C$99o(C$99t){if(void 0===C$99t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99t}function C$99a(C$99t){return(C$99a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99c=C$99i.default,C$99t=C$99c,(C$99i=C$99l).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99_(C$99l),(C$99i=C$99l.prototype).initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount)},C$99i.initLocal=function(){this._local=[],this._local.length=4},C$99i.updateColor=function(C$99t,C$99e){var C$99i=this._renderData.uintVDatas[0];if(C$99i){C$99e=C$99e||C$99t.node.color._val;for(var C$99n=this.floatsPerVert,C$99r=this.colorOffset,C$99s=C$99i.length;C$99r<C$99s;C$99r+=C$99n)C$99i[C$99r]=C$99e}},C$99i.getBuffer=function(){return cc.renderer._handle._meshBuffer},C$99i.updateWorldVerts=function(C$99t){var C$99h,C$99u,C$99_,C$99e=this._local,C$99i=this._renderData.vDatas[0],C$99t=C$99t.node._worldMatrix.m,C$99n=C$99t[0],C$99r=C$99t[1],C$99d=C$99t[4],C$99s=C$99t[5],C$99o=C$99t[12],C$99t=C$99t[13],C$99a=C$99e[0],C$99c=C$99e[2],C$99l=C$99e[1],C$99e=C$99e[3];1===C$99n&&0===C$99r&&0===C$99d&&1===C$99s?(C$99i[0]=C$99a+C$99o,C$99i[1]=C$99l+C$99t,C$99i[5]=C$99c+C$99o,C$99i[6]=C$99l+C$99t,C$99i[10]=C$99a+C$99o,C$99i[11]=C$99e+C$99t,C$99i[15]=C$99c+C$99o,C$99i[16]=C$99e+C$99t):(C$99h=C$99n*C$99c,C$99u=C$99r*C$99a,C$99r=C$99r*C$99c,C$99c=C$99d*C$99e,C$99_=C$99s*C$99l,C$99s=C$99s*C$99e,C$99i[0]=(C$99e=C$99n*C$99a)+(C$99n=C$99d*C$99l)+C$99o,C$99i[1]=C$99u+C$99_+C$99t,C$99i[5]=C$99h+C$99n+C$99o,C$99i[6]=C$99r+C$99_+C$99t,C$99i[10]=C$99e+C$99c+C$99o,C$99i[11]=C$99u+C$99s+C$99t,C$99i[15]=C$99h+C$99c+C$99o,C$99i[16]=C$99r+C$99s+C$99t)},C$99i.fillBuffers=function(C$99t,C$99e){C$99e.worldMatDirty&&this.updateWorldVerts(C$99t);for(var C$99t=this._renderData,C$99i=C$99t.vDatas[0],C$99n=C$99t.iDatas[0],C$99t=this.getBuffer(C$99e),C$99e=C$99t.request(this.verticesCount,this.indicesCount),C$99r=C$99e.byteOffset>>2,C$99s=C$99t._vData,C$99o=(C$99i.length+C$99r>C$99s.length?C$99s.set(C$99i.subarray(0,C$99s.length-C$99r),C$99r):C$99s.set(C$99i,C$99r),C$99t._iData),C$99a=C$99e.indiceOffset,C$99c=C$99e.vertexOffset,C$99l=0,C$99h=C$99n.length;C$99l<C$99h;C$99l++)C$99o[C$99a++]=C$99c+C$99n[C$99l]},C$99i.packToDynamicAtlas=function(C$99t,C$99e){C$99e._original||!C$99n.default||!C$99e._texture.packable||(C$99i=C$99n.default.insertSpriteFrame(C$99e))&&C$99e._setDynamicAtlasFrame(C$99i);var C$99i=C$99t._materials[0];C$99i&&C$99i.getProperty("texture")!==C$99e._texture&&(C$99t._vertsDirty=!0,C$99t._updateMaterial())},C$99t=C$99l,(C$99i=[{key:"verticesFloats",get:function(){return this.verticesCount*this.floatsPerVert}}])&&C$99s(C$99t.prototype,C$99i),C$99d&&C$99s(C$99t,C$99d);var C$99c,C$99d,C$99i=C$99l;function C$99l(){var C$99t=C$99c.call(this)||this;return C$99t._renderData=new C$99u.default,C$99t._renderData.init(C$99o(C$99t)),C$99t.initData(),C$99t.initLocal(),C$99t}C$99e.default=C$99i,cc.js.addon(C$99i.prototype,{floatsPerVert:5,verticesCount:4,indicesCount:6,uvOffset:2,colorOffset:4}),cc.Assembler2D=C$99i,C$99h.exports=C$99e.default},{"./assembler":217,"./utils/dynamic-atlas/manager":223,"./webgl/render-data":250}],216:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=(C$99t=C$99t("../utils/pool"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99s,C$99o,C$99h=0;function C$99a(C$99t){return Object.getOwnPropertyDescriptor(C$99t,"__assemblerId__")||(C$99t.__assemblerId__=++C$99h),C$99t.__assemblerId__}function C$99c(){for(var C$99t,C$99e=arguments.length,C$99i=new Array(C$99e),C$99n=0;C$99n<C$99e;C$99n++)C$99i[C$99n]=arguments[C$99n];return(C$99t=C$99s.call.apply(C$99s,[this].concat(C$99i))||this)._pool={},C$99t}C$99s=C$99t.default,C$99l=C$99s,(C$99o=C$99c).prototype=Object.create(C$99l.prototype),(C$99o.prototype.constructor=C$99o).__proto__=C$99l,C$99n(C$99c),(C$99o=C$99c.prototype).put=function(C$99t){var C$99e,C$99i;C$99t&&this.enabled&&(C$99e=C$99a(C$99t.constructor),(C$99i=this._pool)[C$99e]||(C$99i[C$99e]=[]),this.count>this.maxSize||(this._clean(C$99t),C$99i[C$99e].push(C$99t),this.count++))},C$99o.get=function(C$99t){var C$99e,C$99i,C$99n;return(C$99n=this.enabled?(C$99e=this._pool)[C$99i=C$99a(C$99t)]&&C$99e[C$99i].pop():C$99n)?this.count--:C$99n=new C$99t,C$99n},C$99o.clear=function(){this._pool={},this.count=0},C$99o._clean=function(C$99t){C$99t._renderComp=null};var C$99l=new C$99c;C$99t.default.register("assembler",C$99l),C$99i.default=C$99l,C$99e.exports=C$99i.default},{"../utils/pool":266}],217:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99t("./webgl/vertex-format"),C$99r=(C$99t=C$99t("./assembler-pool"))&&C$99t.__esModule?C$99t:{default:C$99t};(C$99t=C$99s.prototype).init=function(C$99t){this._renderComp=C$99t},C$99t.updateRenderData=function(C$99t){},C$99t.fillBuffers=function(C$99t,C$99e){},C$99t.getVfmt=function(){return C$99n.vfmtPosUvColor};C$99t=C$99s;function C$99s(){this._extendNative&&this._extendNative()}(C$99i.default=C$99t).register=function(C$99t,C$99e){C$99t.__assembler__=C$99e},C$99t.init=function(C$99t){for(var C$99e,C$99i=C$99t.constructor,C$99n=C$99i.__assembler__;!C$99n;){if(!(C$99i=C$99i.$super))return void cc.warn("Can not find assembler for render component : ["+cc.js.getClassName(C$99t)+"]");C$99n=C$99i.__assembler__}C$99n.getConstructor&&(C$99n=C$99n.getConstructor(C$99t)),C$99t._assembler&&C$99t._assembler.constructor===C$99n||((C$99e=C$99r.default.get(C$99n)).init(C$99t),C$99t._assembler=C$99e)},cc.Assembler=C$99t,C$99e.exports=C$99i.default},{"./assembler-pool":216,"./webgl/vertex-format":252}],218:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t){var C$99e;try{C$99e=C$99t.getContext("2d")}catch(C$99t){return void console.error(C$99t)}this._canvas=C$99t,this._ctx=C$99e,this._caps={},this._stats={drawcalls:0},this._vx=this._vy=this._vw=this._vh=0,this._sx=this._sy=this._sw=this._sh=0}C$99n.prototype._restoreTexture=function(C$99t){},C$99n.prototype.setViewport=function(C$99t,C$99e,C$99i,C$99n){this._vx===C$99t&&this._vy===C$99e&&this._vw===C$99i&&this._vh===C$99n||(this._vx=C$99t,this._vy=C$99e,this._vw=C$99i,this._vh=C$99n)},C$99n.prototype.setScissor=function(C$99t,C$99e,C$99i,C$99n){this._sx===C$99t&&this._sy===C$99e&&this._sw===C$99i&&this._sh===C$99n||(this._sx=C$99t,this._sy=C$99e,this._sw=C$99i,this._sh=C$99n)},C$99n.prototype.clear=function(C$99t){var C$99e=this._ctx;C$99e.clearRect(this._vx,this._vy,this._vw,this._vh),!C$99t||0===C$99t[0]&&0===C$99t[1]&&0===C$99t[2]||(C$99e.fillStyle="rgb("+C$99t[0]+","+C$99t[1]+","+C$99t[2]+")",C$99e.globalAlpha=C$99t[3],C$99e.fillRect(this._vx,this._vy,this._vw,this._vh))},C$99n.prototype.resetDrawCalls=function(){this._stats.drawcalls=0},C$99n.prototype.getDrawCalls=function(){return this._stats.drawcalls},C$99e.exports=C$99n},{}],219:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e){this._device=C$99t,this._width=4,this._height=4,this._image=null,C$99e&&(void 0!==C$99e.width&&(this._width=C$99e.width),void 0!==C$99e.height&&(this._height=C$99e.height),this.updateImage(C$99e))}C$99n.prototype.update=function(C$99t){this.updateImage(C$99t)},C$99n.prototype.updateImage=function(C$99t){C$99t.images&&C$99t.images[0]&&((C$99t=C$99t.images[0])&&C$99t!==this._image&&(this._image=C$99t))},C$99n.prototype.destroy=function(){this._image=null},C$99e.exports=C$99n},{}],220:[function(C$99s,C$99t,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99o=C$99r(C$99s("../../renderer/gfx")),C$99i=C$99r(C$99s("../../renderer/core/input-assembler")),C$99n=C$99r(C$99s("../../renderer/core/pass"));function C$99r(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}C$99i=cc.renderer={Texture2D:null,InputAssembler:C$99i.default,Pass:C$99n.default,renderEngine:null,canvas:null,device:null,scene:null,drawCalls:0,_handle:null,_cameraNode:null,_camera:null,_forward:null,_flow:null,initWebGL:function(C$99t,C$99e){C$99s("./webgl/assemblers");var C$99i=C$99s("./webgl/model-batcher"),C$99n=(this.Texture2D=C$99o.default.Texture2D,this.canvas=C$99t,this._flow=cc.RenderFlow,C$99s("../../renderer/scene/scene")),C$99r=C$99s("../../renderer/renderers/forward-renderer"),C$99e=(this.device=new C$99o.default.Device(C$99t,C$99e),this.scene=new C$99n,C$99t=this.device,{defaultTexture:new C$99o.default.Texture2D(C$99t,{images:[],width:128,height:128,wrapS:C$99o.default.WRAP_REPEAT,wrapT:C$99o.default.WRAP_REPEAT,format:C$99o.default.TEXTURE_FMT_RGB8,mipmap:!1}),programTemplates:[],programChunks:{}});this._forward=new C$99r(this.device,C$99e),this._handle=new C$99i(this.device,this.scene),this._flow.init(this._handle,this._forward)},initCanvas:function(C$99t){var C$99e=C$99s("./canvas"),C$99i=C$99s("./canvas/Texture2D"),C$99n=C$99s("./canvas/Device");this.Device=C$99n,this.Texture2D=C$99i,this.canvas=C$99t,this.device=new C$99n(C$99t),this._camera={a:1,b:0,c:0,d:1,tx:0,ty:0},this._handle=new C$99e.RenderComponentHandle(this.device,this._camera),this._forward=new C$99e.ForwardRenderer,this._flow=cc.RenderFlow,this._flow.init(this._handle,this._forward)},updateCameraViewport:function(){var C$99t;!cc.director||(C$99t=cc.director.getScene())&&C$99t.setScale(1,1,1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(C$99t=cc.view.getViewportRect(),this.device.setViewport(C$99t.x,C$99t.y,C$99t.width,C$99t.height),this._camera.a=cc.view.getScaleX(),this._camera.d=cc.view.getScaleY(),this._camera.tx=C$99t.x,this._camera.ty=C$99t.y+C$99t.height)},render:function(C$99t,C$99e){this.device.resetDrawCalls(),C$99t&&(this._flow.render(C$99t,C$99e),this.drawCalls=this.device.getDrawCalls())},clear:function(){this._handle.reset(),this._forward.clear()}};C$99e.default=C$99i,C$99t.exports=C$99e.default},{"../../renderer/core/input-assembler":302,"../../renderer/core/pass":303,"../../renderer/gfx":312,"../../renderer/renderers/forward-renderer":331,"../../renderer/scene/scene":334,"./canvas":void 0,"./canvas/Device":218,"./canvas/Texture2D":219,"./webgl/assemblers":232,"./webgl/model-batcher":248}],221:[function(C$99e,C$99i,C$99l){"use strict";var C$99u,C$99n,C$99t=0,C$99r=(C$99t++,C$99t++,C$99t++,C$99t++,C$99t++,C$99t++,C$99t++,C$99t++,C$99t++,1024),C$99_=0;function C$99s(){this._func=C$99h,this._next=null}var C$99t=C$99s.prototype,C$99o=(C$99t._doNothing=function(){},C$99t._localTransform=function(C$99t){C$99t._updateLocalMatrix(),C$99t._renderFlag&=-5,this._next._func(C$99t)},C$99t._worldTransform=function(C$99t){C$99u.worldMatDirty++;var C$99e=C$99t._matrix,C$99i=C$99t._trs,C$99n=C$99e.m;C$99n[12]=C$99i[0],C$99n[13]=C$99i[1],C$99n[14]=C$99i[2],C$99t._mulMat(C$99t._worldMatrix,C$99t._parent._worldMatrix,C$99e),C$99t._renderFlag&=-9,this._next._func(C$99t),C$99u.worldMatDirty--},C$99t._opacity=function(C$99t){C$99u.parentOpacityDirty++,C$99t._renderFlag&=-33,this._next._func(C$99t),C$99u.parentOpacityDirty--},C$99t._color=function(C$99t){var C$99e=C$99t._renderComponent;C$99e&&C$99e._updateColor(),C$99t._renderFlag&=-65,this._next._func(C$99t)},C$99t._updateRenderData=function(C$99t){var C$99e=C$99t._renderComponent;C$99e._assembler.updateRenderData(C$99e),C$99t._renderFlag&=-17,this._next._func(C$99t)},C$99t._render=function(C$99t){var C$99e=C$99t._renderComponent;C$99e._checkBacth(C$99u,C$99t._cullingMask),C$99e._assembler.fillBuffers(C$99e,C$99u),this._next._func(C$99t)},C$99t._children=function(C$99t){for(var C$99e=C$99_,C$99i=C$99u,C$99n=C$99i.parentOpacity,C$99r=C$99i.parentOpacity*=C$99t._opacity/255,C$99s=(C$99i.worldMatDirty?8:0)|(C$99i.parentOpacityDirty?96:0),C$99o=C$99t._children,C$99a=0,C$99h=C$99o.length;C$99a<C$99h;C$99a++){var C$99c,C$99l=C$99o[C$99a];C$99l._renderFlag|=C$99s,C$99l._activeInHierarchy&&0!==C$99l._opacity&&(C$99_=C$99l._cullingMask=0===C$99l.groupIndex?C$99e:1<<C$99l.groupIndex,C$99c=C$99l._color._val,C$99l._color._fastSetA(C$99l._opacity*C$99r),C$99d[C$99l._renderFlag]._func(C$99l),C$99l._color._val=C$99c)}C$99i.parentOpacity=C$99n,this._next._func(C$99t)},C$99t._postRender=function(C$99t){var C$99e=C$99t._renderComponent;C$99e._checkBacth(C$99u,C$99t._cullingMask),C$99e._assembler.postFillBuffers(C$99e,C$99u),this._next._func(C$99t)},new C$99s),C$99d=(C$99o._func=C$99o._doNothing,C$99o._next=C$99o,{});function C$99a(C$99t,C$99e){var C$99i=new C$99s;switch(C$99i._next=C$99e||C$99o,C$99t){case 1:case 2:C$99i._func=C$99i._doNothing;break;case 4:C$99i._func=C$99i._localTransform;break;case 8:C$99i._func=C$99i._worldTransform;break;case 32:C$99i._func=C$99i._opacity;break;case 64:C$99i._func=C$99i._color;break;case 16:C$99i._func=C$99i._updateRenderData;break;case 128:C$99i._func=C$99i._render;break;case 256:C$99i._func=C$99i._children;break;case 512:C$99i._func=C$99i._postRender}return C$99i}function C$99h(C$99t){var C$99e=C$99t._renderFlag;(C$99d[C$99e]=function(C$99t){for(var C$99e=null,C$99i=C$99r;0<C$99i;)C$99i&C$99t&&(C$99e=C$99a(C$99i,C$99e)),C$99i>>=1;return C$99e}(C$99e))._func(C$99t)}C$99s.flows=C$99d,C$99s.createFlow=C$99a;var C$99c=[];C$99s.registerValidate=function(C$99t){C$99t._inValidateList||(C$99c.push(C$99t),C$99t._inValidateList=!0)},C$99s.validateRenderers=function(){for(var C$99t=0,C$99e=C$99c.length;C$99t<C$99e;C$99t++){var C$99i=C$99c[C$99t];C$99i.isValid&&(C$99i.enabledInHierarchy?C$99i._validateRender():C$99i.disableRender(),C$99i._inValidateList=!1)}C$99c.length=0},C$99s.visitRootNode=function(C$99t){C$99s.validateRenderers(),C$99_=1<<C$99t.groupIndex,8&C$99t._renderFlag?(C$99u.worldMatDirty++,C$99t._calculWorldMatrix(),C$99t._renderFlag&=-9,C$99d[C$99t._renderFlag]._func(C$99t),C$99u.worldMatDirty--):C$99d[C$99t._renderFlag]._func(C$99t)},C$99s.render=function(C$99t,C$99e){C$99u.reset(),C$99u.walking=!0,C$99s.visitRootNode(C$99t),C$99u.terminate(),C$99u.walking=!1,C$99n.render(C$99u._renderScene,C$99e)},C$99s.init=function(C$99t,C$99e){C$99u=C$99t,C$99n=C$99e,C$99d[0]=C$99o;for(var C$99i=1;C$99i<C$99r;C$99i++)C$99d[C$99i]=new C$99s},C$99s.getBachther=function(){return C$99u},C$99s.FLAG_DONOTHING=1,C$99s.FLAG_BREAK_FLOW=2,C$99s.FLAG_LOCAL_TRANSFORM=4,C$99s.FLAG_WORLD_TRANSFORM=8,C$99s.FLAG_TRANSFORM=12,C$99s.FLAG_OPACITY=32,C$99s.FLAG_COLOR=64,C$99s.FLAG_OPACITY_COLOR=96,C$99s.FLAG_UPDATE_RENDER_DATA=16,C$99s.FLAG_RENDER=128,C$99s.FLAG_CHILDREN=256,C$99s.FLAG_POST_RENDER=512,C$99s.FLAG_FINAL=C$99r,C$99i.exports=cc.RenderFlow=C$99s},{}],222:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../../../assets/CCRenderTexture");function C$99r(C$99t,C$99e){var C$99i=new C$99n;C$99i.initWithSize(C$99t,C$99e),C$99i.update(),this._texture=C$99i,this._x=2,this._y=2,this._nexty=2,this._width=C$99t,this._height=C$99e,this._innerTextureInfos={},this._innerSpriteFrames=[],this._count=0}C$99r.DEFAULT_HASH=(new C$99n)._getHash(),cc.js.mixin(C$99r.prototype,{insertSpriteFrame:function(C$99t){var C$99e=C$99t._rect,C$99i=C$99t._texture,C$99n=this._innerTextureInfos[C$99i._id],C$99r=C$99e.x,C$99e=C$99e.y;if(C$99n)C$99r+=C$99n.x,C$99e+=C$99n.y;else{var C$99n=C$99i.width,C$99s=C$99i.height;if(this._x+C$99n+2>this._width&&(this._x=2,this._y=this._nexty),this._y+C$99s+2>this._nexty&&(this._nexty=this._y+C$99s+2),this._nexty>this._height)return null;cc.dynamicAtlasManager.textureBleeding&&((C$99n<=8||C$99s<=8)&&(this._texture.drawTextureAt(C$99i,this._x-1,this._y-1),this._texture.drawTextureAt(C$99i,this._x-1,this._y+1),this._texture.drawTextureAt(C$99i,this._x+1,this._y-1),this._texture.drawTextureAt(C$99i,this._x+1,this._y+1)),this._texture.drawTextureAt(C$99i,this._x-1,this._y),this._texture.drawTextureAt(C$99i,this._x+1,this._y),this._texture.drawTextureAt(C$99i,this._x,this._y-1),this._texture.drawTextureAt(C$99i,this._x,this._y+1)),this._texture.drawTextureAt(C$99i,this._x,this._y),this._innerTextureInfos[C$99i._id]={x:this._x,y:this._y,texture:C$99i},this._count++,C$99r+=this._x,C$99e+=this._y,this._x+=C$99n+2,this._dirty=!0}C$99s={x:C$99r,y:C$99e,texture:this._texture};return this._innerSpriteFrames.push(C$99t),C$99s},update:function(){this._dirty&&(this._texture.update(),this._dirty=!1)},deleteInnerTexture:function(C$99t){C$99t&&this._innerTextureInfos[C$99t._id]&&(delete this._innerTextureInfos[C$99t._id],this._count--)},isEmpty:function(){return this._count<=0},reset:function(){this._x=2,this._y=2,this._nexty=2;for(var C$99t=this._innerSpriteFrames,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e];C$99n.isValid&&C$99n._resetDynamicAtlasFrame()}this._innerSpriteFrames.length=0,this._innerTextureInfos={}},destroy:function(){this.reset(),this._texture.destroy()}}),C$99e.exports=C$99r},{"../../../assets/CCRenderTexture":43}],223:[function(C$99t,C$99u,C$99_){"use strict";var C$99e=C$99t("./atlas"),C$99n=[],C$99r=-1,C$99s=5,C$99i=2048,C$99o=512,C$99a=!0;function C$99c(){var C$99t=C$99n[++C$99r];return C$99t||(C$99t=new C$99e(C$99i,C$99i),C$99n.push(C$99t)),C$99t}function C$99l(){C$99d.reset()}var C$99h=!1,C$99d={Atlas:C$99e,get enabled(){return C$99h},set enabled(C$99t){C$99h!==C$99t&&(C$99t?(this.reset(),cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,C$99l)):cc.director.off(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,C$99l),C$99h=C$99t)},get maxAtlasCount(){return C$99s},set maxAtlasCount(C$99t){C$99s=C$99t},get textureBleeding(){return C$99a},set textureBleeding(C$99t){C$99a=C$99t},get textureSize(){return C$99i},set textureSize(C$99t){C$99i=C$99t},get maxFrameSize(){return C$99o},set maxFrameSize(C$99t){C$99o=C$99t},insertSpriteFrame:function(C$99t){if(!C$99h||C$99r===C$99s||!C$99t||C$99t._original)return null;if(!C$99t._texture.packable)return null;var C$99e=C$99n[C$99r],C$99i=(C$99e=C$99e||C$99c()).insertSpriteFrame(C$99t);return C$99i||C$99r===C$99s?C$99i:(C$99e=C$99c()).insertSpriteFrame(C$99t)},reset:function(){for(var C$99t=0,C$99e=C$99n.length;C$99t<C$99e;C$99t++)C$99n[C$99t].destroy();C$99n.length=0,C$99r=-1},deleteAtlasSpriteFrame:function(C$99t){C$99t._original&&(C$99t=C$99t._original._texture,this.deleteAtlasTexture(C$99t))},deleteAtlasTexture:function(C$99t){if(C$99t)for(var C$99e=C$99n.length-1;0<=C$99e;C$99e--)C$99n[C$99e].deleteInnerTexture(C$99t),C$99n[C$99e].isEmpty()&&(C$99n[C$99e].destroy(),C$99n.splice(C$99e,1),C$99r--)},showDebug:!1,update:function(){if(this.enabled)for(var C$99t=0;C$99t<=C$99r;C$99t++)C$99n[C$99t].update()}};C$99u.exports=cc.dynamicAtlasManager=C$99d},{"./atlas":222}],224:[function(C$99t,C$99i,C$99n){"use strict";C$99n.__esModule=!0,C$99n.default=void 0;var C$99e=(C$99e=C$99t("../../assembler-2d"))&&C$99e.__esModule?C$99e:{default:C$99e};function C$99r(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}function C$99o(){this.char="",this.valid=!0,this.x=0,this.y=0,this.line=0,this.hash=""}var C$99a,C$99M=C$99t("../../../utils/text-utils"),C$99c=C$99t("../../../platform/CCMacro"),C$99A=C$99t("../../../components/CCLabel").Overflow,C$99C=C$99t("../utils").shareLabelInfo,C$99d=cc.rect(),C$99p=null,C$99I=[],C$99f=[],C$99S=[],C$99m=[],C$99B=null,C$99R=0,C$99P=0,C$99y=0,C$99D=0,C$99L=0,C$99T=1,C$99g=null,C$99w=cc.size(),C$99V="",C$99l=0,C$99h=0,C$99u=0,C$99_=0,C$99O=0,C$99F=0,C$99E=0,C$99N=!1,C$99k=0,C$99G=0,C$99z=0,C$99t=(C$99a=C$99e.default,C$99t=C$99a,(C$99e=C$99v).prototype=Object.create(C$99t.prototype),(C$99e.prototype.constructor=C$99e).__proto__=C$99t,C$99r(C$99v),(C$99e=C$99v.prototype).updateRenderData=function(C$99t){C$99t._vertsDirty&&C$99p!==C$99t&&(C$99p=C$99t,this._reserveQuads(C$99t,C$99t.string.toString().length),this._updateFontFamily(C$99t),this._updateProperties(C$99t),this._updateLabelInfo(C$99t),this._updateContent(),this.updateWorldVerts(C$99t),C$99p._actualFontSize=C$99l,C$99p.node.setContentSize(C$99w),C$99p._vertsDirty=!1,C$99p=null,this._resetProperties())},C$99e._updateFontScale=function(){C$99T=C$99l/C$99h},C$99e._updateFontFamily=function(C$99t){var C$99e=C$99t.font;C$99g=C$99e.spriteFrame,C$99B=C$99e._fntConfig,C$99C.fontAtlas=C$99e._fontDefDictionary,this.packToDynamicAtlas(C$99t,C$99g)},C$99e._updateLabelInfo=function(){C$99C.hash="",C$99C.margin=0},C$99e._updateProperties=function(C$99t){C$99V=C$99t.string.toString(),C$99l=C$99t.fontSize,C$99h=(C$99B||C$99t).fontSize,C$99u=C$99t.horizontalAlign,C$99_=C$99t.verticalAlign,C$99O=C$99t.spacingX,C$99E=C$99t.overflow,C$99F=C$99t._lineHeight,C$99w.width=C$99t.node.width,C$99w.height=C$99t.node.height,C$99E===C$99A.NONE?(C$99N=!1,C$99w.width+=2*C$99C.margin,C$99w.height+=2*C$99C.margin):C$99E===C$99A.RESIZE_HEIGHT?(C$99N=!0,C$99w.height+=2*C$99C.margin):C$99N=C$99t.enableWrapText,C$99C.lineHeight=C$99F,C$99C.fontSize=C$99l,this._setupBMFontOverflowMetrics()},C$99e._resetProperties=function(){C$99g=C$99B=null,C$99C.hash="",C$99C.margin=0},C$99e._updateContent=function(){this._updateFontScale(),this._computeHorizontalKerningForText(),this._alignText()},C$99e._computeHorizontalKerningForText=function(){for(var C$99t=C$99V,C$99e=C$99t.length,C$99i=C$99B.kerningDict,C$99n=C$99I,C$99r=-1,C$99s=0;C$99s<C$99e;++C$99s){var C$99o=C$99t.charCodeAt(C$99s),C$99a=C$99i[C$99r<<16|65535&C$99o]||0;C$99n[C$99s]=C$99s<C$99e-1?C$99a:0,C$99r=C$99o}},C$99e._multilineTextWrap=function(C$99h){for(var C$99t,C$99u=C$99V.length,C$99e=0,C$99i=0,C$99_=0,C$99d=0,C$99n=0,C$99r=0,C$99s=0,C$99o=cc.v2(0,0),C$99a=0;C$99a<C$99u;)if("\n"!==(C$99c=C$99V.charAt(C$99a))){for(var C$99f=C$99h(C$99V,C$99a,C$99u),C$99p=C$99r,C$99m=C$99s,C$99y=C$99n,C$99g=C$99i,C$99v=!1,C$99x=0;C$99x<C$99f;++C$99x){var C$99c,C$99l=C$99a+C$99x;if("\r"!==(C$99c=C$99V.charAt(C$99l)))if(C$99t=C$99C.fontAtlas.getLetterDefinitionForChar(C$99c,C$99C)){var C$99b=C$99g+C$99t.offsetX*C$99T-C$99C.margin;if(C$99N&&0<C$99z&&0<C$99i&&C$99b+C$99t.w*C$99T>C$99z&&!C$99M.isUnicodeSpace(C$99c)){C$99S.push(C$99n),C$99e++,C$99i=C$99n=0,C$99_-=C$99F*this._getFontScale()+0,C$99v=!0;break}C$99o.x=C$99b,C$99o.y=C$99_-C$99t.offsetY*C$99T+C$99C.margin,this._recordLetterInfo(C$99o,C$99c,C$99l,C$99e),C$99l+1<C$99I.length&&C$99l<C$99u-1&&(C$99g+=C$99I[C$99l+1]),C$99g+=C$99t.xAdvance*C$99T+C$99O-2*C$99C.margin,C$99y=C$99o.x+C$99t.w*C$99T-C$99C.margin,C$99p<C$99o.y&&(C$99p=C$99o.y),C$99m>C$99o.y-C$99t.h*C$99T&&(C$99m=C$99o.y-C$99t.h*C$99T)}else this._recordPlaceholderInfo(C$99l,C$99c),console.log("Can't find letter definition in texture atlas "+C$99B.atlasName+" for letter:"+C$99c);else this._recordPlaceholderInfo(C$99l,C$99c)}C$99v||(C$99i=C$99g,C$99r<C$99p&&(C$99r=C$99p),C$99m<C$99s&&(C$99s=C$99m),C$99d<(C$99n=C$99y)&&(C$99d=C$99n),C$99a+=C$99f)}else C$99S.push(C$99n),C$99e++,C$99i=C$99n=0,C$99_-=C$99F*this._getFontScale()+0,this._recordPlaceholderInfo(C$99a,C$99c),C$99a++;return C$99S.push(C$99n),C$99P=(C$99R=C$99e+1)*C$99F*this._getFontScale(),1<C$99R&&(C$99P+=0*(C$99R-1)),C$99w.width=C$99k,C$99w.height=C$99G,C$99k<=0&&(C$99w.width=parseFloat(C$99d.toFixed(2))+2*C$99C.margin),C$99G<=0&&(C$99w.height=parseFloat(C$99P.toFixed(2))+2*C$99C.margin),C$99D=C$99w.height,C$99L=0,C$99E!==C$99A.CLAMP&&(0<C$99r&&(C$99D=C$99w.height+C$99r),C$99s<-C$99P&&(C$99L=C$99P+C$99s)),!0},C$99e._getFirstCharLen=function(){return 1},C$99e._getFontScale=function(){return C$99E===C$99A.SHRINK?C$99T:1},C$99e._getFirstWordLen=function(C$99t,C$99e,C$99i){var C$99n=C$99t.charAt(C$99e);if(C$99M.isUnicodeCJK(C$99n)||"\n"===C$99n||C$99M.isUnicodeSpace(C$99n))return 1;var C$99r=1,C$99s=C$99C.fontAtlas.getLetterDefinitionForChar(C$99n,C$99C);if(!C$99s)return C$99r;for(var C$99o=C$99s.xAdvance*C$99T+C$99O,C$99a=C$99e+1;C$99a<C$99i&&(C$99n=C$99t.charAt(C$99a),C$99s=C$99C.fontAtlas.getLetterDefinitionForChar(C$99n,C$99C));++C$99a){if(C$99o+C$99s.offsetX*C$99T+C$99s.w*C$99T>C$99z&&!C$99M.isUnicodeSpace(C$99n)&&0<C$99z)return C$99r;if(C$99o+=C$99s.xAdvance*C$99T+C$99O,"\n"===C$99n||C$99M.isUnicodeSpace(C$99n)||C$99M.isUnicodeCJK(C$99n))break;C$99r++}return C$99r},C$99e._multilineTextWrapByWord=function(){return this._multilineTextWrap(this._getFirstWordLen)},C$99e._multilineTextWrapByChar=function(){return this._multilineTextWrap(this._getFirstCharLen)},C$99e._recordPlaceholderInfo=function(C$99t,C$99e){var C$99i;C$99t>=C$99f.length&&(C$99i=new C$99o,C$99f.push(C$99i)),C$99f[C$99t].char=C$99e,C$99f[C$99t].hash=C$99e.charCodeAt(0)+C$99C.hash,C$99f[C$99t].valid=!1},C$99e._recordLetterInfo=function(C$99t,C$99e,C$99i,C$99n){C$99i>=C$99f.length&&(C$99r=new C$99o,C$99f.push(C$99r));var C$99r=C$99e.charCodeAt(0)+C$99C.hash;C$99f[C$99i].line=C$99n,C$99f[C$99i].char=C$99e,C$99f[C$99i].hash=C$99r,C$99f[C$99i].valid=C$99C.fontAtlas.getLetter(C$99r).valid,C$99f[C$99i].x=C$99t.x,C$99f[C$99i].y=C$99t.y},C$99e._alignText=function(){C$99P=0,C$99S.length=0,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),C$99E===C$99A.SHRINK&&0<C$99l&&this._isVerticalClamp()&&this._shrinkLabelToContentSize(this._isVerticalClamp),this._updateQuads()||C$99E===C$99A.SHRINK&&this._shrinkLabelToContentSize(this._isHorizontalClamp)},C$99e._scaleFontSizeDown=function(C$99t){var C$99e=!0;C$99t||(C$99e=!(C$99t=.1)),C$99l=C$99t,C$99e&&this._updateContent()},C$99e._shrinkLabelToContentSize=function(C$99t){for(var C$99e=0,C$99i=0|C$99l;C$99e<C$99i;){var C$99n,C$99r=C$99n=C$99e+C$99i+1>>1;if(C$99r<=0)break;C$99T=C$99r/C$99h,this._multilineTextWrapByWord(),this._computeAlignmentOffset(),C$99t()?C$99i=C$99n-1:C$99e=C$99n}var C$99s=C$99e;0<=C$99s&&this._scaleFontSizeDown(C$99s)},C$99e._isVerticalClamp=function(){return C$99P>C$99w.height},C$99e._isHorizontalClamp=function(){for(var C$99t=!1,C$99e=0,C$99i=C$99V.length;C$99e<C$99i;++C$99e){var C$99n=C$99f[C$99e];if(C$99n.valid){var C$99r=C$99C.fontAtlas.getLetter(C$99n.hash),C$99r=C$99n.x+C$99r.w*C$99T,C$99n=C$99n.line;if(0<C$99k)if(C$99N){if(C$99S[C$99n]>C$99w.width&&(C$99r>C$99w.width||C$99r<0)){C$99t=!0;break}}else if(C$99r>C$99w.width){C$99t=!0;break}}}return C$99t},C$99e._isHorizontalClamped=function(C$99t,C$99e){C$99e=C$99S[C$99e],C$99t=C$99t>C$99w.width||C$99t<0;return(!C$99N||C$99e>C$99w.width)&&C$99t},C$99e._updateQuads=function(){for(var C$99t=C$99g?C$99g._texture:C$99C.fontAtlas.getTexture(),C$99e=C$99p.node,C$99i=(this.verticesCount=this.indicesCount=0,this._renderData&&(this._renderData.dataLength=0),C$99w),C$99h=C$99e._anchorPoint.x*C$99i.width,C$99u=C$99e._anchorPoint.y*C$99i.height,C$99n=!0,C$99r=0,C$99_=C$99V.length;C$99r<C$99_;++C$99r){var C$99s=C$99f[C$99r];if(C$99s.valid){var C$99o=C$99C.fontAtlas.getLetter(C$99s.hash),C$99a=(C$99d.height=C$99o.h,C$99d.width=C$99o.w,C$99d.x=C$99o.u,C$99d.y=C$99o.v,C$99s.y+C$99y),C$99c=(0<C$99G&&(C$99D<C$99a&&(C$99c=C$99a-C$99D,C$99d.y+=C$99c,C$99d.height-=C$99c,C$99a-=C$99c),C$99a-C$99o.h*C$99T<C$99L&&C$99E===C$99A.CLAMP&&(C$99d.height=C$99a<C$99L?0:(C$99a-C$99L)/C$99T)),C$99s.line),C$99l=C$99s.x+C$99o.w/2*C$99T+C$99m[C$99c];if(0<C$99k&&this._isHorizontalClamped(C$99l,C$99c))if(C$99E===C$99A.CLAMP)C$99d.width=0;else if(C$99E===C$99A.SHRINK){if(C$99w.width>C$99o.w){C$99n=!1;break}C$99d.width=0}0<C$99d.height&&0<C$99d.width&&(C$99l=this._determineRect(C$99d),C$99o=C$99s.x+C$99m[C$99s.line],this.appendQuad(C$99p,C$99t,C$99d,C$99l,C$99o-C$99h,C$99a-C$99u,C$99T))}}return this._quadsUpdated(C$99p),C$99n},C$99e._determineRect=function(C$99t){var C$99e=C$99g.isRotated(),C$99i=C$99g._originalSize,C$99n=C$99g._rect,C$99r=C$99g._offset,C$99s=C$99r.x+(C$99i.width-C$99n.width)/2,C$99r=C$99r.y-(C$99i.height-C$99n.height)/2;return C$99e?(C$99i=C$99t.x,C$99t.x=C$99n.x+C$99n.height-C$99t.y-C$99t.height-C$99r,C$99t.y=C$99i+C$99n.y-C$99s,C$99t.y<0&&(C$99t.height=C$99t.height+C$99r)):(C$99t.x+=C$99n.x-C$99s,C$99t.y+=C$99n.y+C$99r),C$99e},C$99e._computeAlignmentOffset=function(){switch(C$99m.length=0,C$99u){case C$99c.TextAlignment.LEFT:for(var C$99t=0;C$99t<C$99R;++C$99t)C$99m.push(0);break;case C$99c.TextAlignment.CENTER:for(var C$99e=0,C$99i=C$99S.length;C$99e<C$99i;C$99e++)C$99m.push((C$99w.width-C$99S[C$99e])/2);break;case C$99c.TextAlignment.RIGHT:for(var C$99n=0,C$99r=C$99S.length;C$99n<C$99r;C$99n++)C$99m.push(C$99w.width-C$99S[C$99n])}var C$99s;C$99y=C$99w.height,C$99_!==C$99c.VerticalTextAlignment.TOP&&(C$99s=C$99w.height-C$99P+C$99F*this._getFontScale()-C$99h*C$99T,C$99_===C$99c.VerticalTextAlignment.BOTTOM?C$99y-=C$99s:C$99y-=C$99s/2)},C$99e._setupBMFontOverflowMetrics=function(){var C$99t=C$99w.width,C$99e=C$99w.height;C$99E===C$99A.RESIZE_HEIGHT&&(C$99e=0),C$99E===C$99A.NONE&&(C$99e=C$99t=0),C$99G=C$99e,C$99z=C$99k=C$99t},C$99e.updateWorldVerts=function(){},C$99e.appendQuad=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){},C$99e._quadsUpdated=function(C$99t){},C$99e._reserveQuads=function(){},C$99v);function C$99v(){return C$99a.apply(this,arguments)||this}C$99n.default=C$99t,C$99i.exports=C$99n.default},{"../../../components/CCLabel":80,"../../../platform/CCMacro":194,"../../../utils/text-utils":271,"../../assembler-2d":215,"../utils":228}],225:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){this._rect=null,this.uv=[],this._texture=null,this._original=null}C$99n.prototype={constructor:C$99n,getRect:function(){return cc.rect(this._rect)},setRect:function(C$99t){this._rect=C$99t,this._texture&&this._calculateUV()},_setDynamicAtlasFrame:function(C$99t){C$99t&&(this._original={_texture:this._texture,_x:this._rect.x,_y:this._rect.y},this._texture=C$99t.texture,this._rect.x=C$99t.x,this._rect.y=C$99t.y,this._calculateUV())},_resetDynamicAtlasFrame:function(){this._original&&(this._rect.x=this._original._x,this._rect.y=this._original._y,this._texture=this._original._texture,this._original=null,this._calculateUV())},_refreshTexture:function(C$99t){this._texture=C$99t,this._rect=cc.rect(0,0,C$99t.width,C$99t.height),this._calculateUV()},_calculateUV:function(){var C$99t=this._rect,C$99e=this._texture,C$99i=this.uv,C$99n=C$99e.width,C$99e=C$99e.height,C$99r=0===C$99n?0:C$99t.x/C$99n,C$99n=0===C$99n?0:(C$99t.x+C$99t.width)/C$99n,C$99s=0===C$99e?0:(C$99t.y+C$99t.height)/C$99e,C$99t=0===C$99e?0:C$99t.y/C$99e;C$99i[0]=C$99r,C$99i[1]=C$99s,C$99i[2]=C$99n,C$99i[3]=C$99s,C$99i[4]=C$99r,C$99i[5]=C$99t,C$99i[6]=C$99n,C$99i[7]=C$99t}},C$99e.exports=C$99n},{}],226:[function(C$99t,C$99h,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99i=(C$99i=C$99t("../../webgl/assemblers/label/2d/bmfont"))&&C$99i.__esModule?C$99i:{default:C$99i};function C$99u(C$99i){return function(){var C$99t,C$99e=C$99n(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99n(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99n(C$99t){return(C$99n=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99_=C$99t("../../../components/CCLabel"),C$99d=C$99t("../../../components/CCLabelOutline"),C$99a=C$99t("../../../utils/text-utils"),C$99r=C$99t("../../../components/CCComponent"),C$99f=C$99t("../../../assets/CCRenderTexture"),C$99p=cc.js.isChildClassOf(C$99d,C$99r),C$99m=C$99t("../utils").getFontFamily,C$99s=C$99t("../utils").shareLabelInfo,C$99y=cc.BitmapFont.FontLetterDefinition,C$99g=cc.BitmapFont.FontAtlas,C$99v=cc.Color.WHITE,C$99x=(1/255).toFixed(3);function C$99o(C$99t,C$99e){this._texture=null,this._labelInfo=C$99e,this._char=C$99t,this._hash=null,this._data=null,this._canvas=null,this._context=null,this._width=0,this._height=0,this._offsetY=0,this._hash=C$99t.charCodeAt(0)+C$99e.hash}function C$99b(C$99t,C$99e){var C$99i=new C$99f;C$99i.initWithSize(C$99t,C$99e),C$99i.update(),this._fontDefDictionary=new C$99g(C$99i),this._x=0,this._y=0,this._nexty=0,this._width=C$99t,this._height=C$99e,cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,this.beforeSceneLoad,this)}C$99o.prototype={constructor:C$99o,updateRenderData:function(){this._updateProperties(),this._updateTexture()},_updateProperties:function(){this._texture=new cc.Texture2D,this._data=C$99_._canvasPool.get(),this._canvas=this._data.canvas,this._context=this._data.context,this._context.font=this._labelInfo.fontDesc;var C$99t=C$99a.safeMeasureText(this._context,this._char,this._labelInfo.fontDesc),C$99e=2*this._labelInfo.margin+2;this._width=parseFloat(C$99t.toFixed(2))+C$99e,this._height=(1+C$99a.BASELINE_RATIO)*this._labelInfo.fontSize+C$99e,this._offsetY=-this._labelInfo.fontSize*C$99a.BASELINE_RATIO/2,this._canvas.width!==this._width&&(this._canvas.width=this._width),this._canvas.height!==this._height&&(this._canvas.height=this._height),this._texture.initWithElement(this._canvas)},_updateTexture:function(){var C$99t=this._context,C$99e=this._labelInfo,C$99i=this._canvas.width,C$99n=this._canvas.height,C$99r=C$99i/2,C$99s=C$99n/2+this._labelInfo.fontSize*C$99a.MIDDLE_RATIO,C$99o=C$99e.color;C$99t.textAlign="center",C$99t.textBaseline="alphabetic",C$99t.clearRect(0,0,C$99i,C$99n),C$99t.fillStyle="rgba("+C$99o.r+", "+C$99o.g+", "+C$99o.b+", "+C$99x+")",C$99t.fillRect(0,0,C$99i,C$99n),C$99t.font=C$99e.fontDesc,C$99t.lineJoin="round",C$99t.fillStyle="rgba("+C$99o.r+", "+C$99o.g+", "+C$99o.b+", 1)",C$99e.isOutlined&&0<C$99e.margin&&(C$99i=C$99e.out||C$99v,C$99t.strokeStyle="rgba("+C$99i.r+", "+C$99i.g+", "+C$99i.b+", "+C$99i.a/255+")",C$99t.lineWidth=2*C$99e.margin,C$99t.strokeText(this._char,C$99r,C$99s)),C$99t.fillText(this._char,C$99r,C$99s),this._texture.handleLoadedTexture()},destroy:function(){this._texture.destroy(),this._texture=null,C$99_._canvasPool.put(this._data)}},cc.js.mixin(C$99b.prototype,{insertLetterTexture:function(C$99t){var C$99e=C$99t._texture,C$99i=C$99e.width,C$99n=C$99e.height;if(this._x+C$99i+0>this._width&&(this._x=0,this._y=this._nexty),this._y+C$99n>this._nexty&&(this._nexty=this._y+C$99n+0),this._nexty>this._height)return null;this._fontDefDictionary._texture.drawTextureAt(C$99e,this._x,this._y),this._dirty=!0;C$99n=new C$99y;return C$99n.u=this._x+1,C$99n.v=this._y+1,C$99n.texture=this._fontDefDictionary._texture,C$99n.valid=!0,C$99n.w=C$99t._width-2,C$99n.h=C$99t._height-2,C$99n.xAdvance=C$99n.w,C$99n.offsetY=C$99t._offsetY,this._x+=C$99i+0,this._fontDefDictionary.addLetterDefinitions(C$99t._hash,C$99n),C$99n},update:function(){this._dirty&&(this._fontDefDictionary._texture.update(),this._dirty=!1)},reset:function(){this._x=0,this._y=0,this._nexty=0;for(var C$99t=this._fontDefDictionary._letterDefinitions,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e];C$99n.isValid&&C$99n.destroy()}this._fontDefDictionary.clear()},destroy:function(){this.reset(),this._fontDefDictionary._texture.destroy(),this._fontDefDictionary._texture=null},beforeSceneLoad:function(){this.clearAllCache()},clearAllCache:function(){this.destroy();var C$99t=new C$99f;C$99t.initWithSize(this._width,this._height),C$99t.update(),this._fontDefDictionary._texture=C$99t},getLetter:function(C$99t){return this._fontDefDictionary._letterDefinitions[C$99t]},getTexture:function(){return this._fontDefDictionary.getTexture()},getLetterDefinitionForChar:function(C$99t,C$99e){var C$99i=C$99t.charCodeAt(0)+C$99e.hash,C$99i=this._fontDefDictionary._letterDefinitions[C$99i];return C$99i||((C$99t=new C$99o(C$99t,C$99e)).updateRenderData(),C$99i=this.insertLetterTexture(C$99t),C$99t.destroy()),C$99i}});var C$99A,C$99c=null,C$99i=(C$99A=C$99i.default,C$99r=C$99A,(C$99t=C$99l).prototype=Object.create(C$99r.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99r,C$99u(C$99l),(C$99t=C$99l.prototype)._getAssemblerData=function(){return C$99c||(C$99c=new C$99b(2048,2048),cc.Label._shareAtlas=C$99c),C$99c.getTexture()},C$99t._updateFontFamily=function(C$99t){C$99s.fontAtlas=C$99c,C$99s.fontFamily=C$99m(C$99t);var C$99e=C$99p&&C$99t.getComponent(C$99d);C$99e&&C$99e.enabled?(C$99s.isOutlined=!0,C$99s.margin=C$99e.width,C$99s.out=C$99e.color.clone(),C$99s.out.a=C$99e.color.a*C$99t.node.color.a/255):(C$99s.isOutlined=!1,C$99s.margin=0)},C$99t._updateLabelInfo=function(C$99t){var C$99e,C$99i;C$99s.fontDesc=this._getFontDesc(),C$99s.color=C$99t.node.color,C$99s.hash=(C$99e=(C$99t=C$99s).color.toHEX("#rrggbb"),C$99i="",C$99t.isOutlined&&0<C$99t.margin&&(C$99i=C$99i+C$99t.margin+C$99t.out.toHEX("#rrggbb")),""+C$99t.fontSize+C$99t.fontFamily+C$99e+C$99i)},C$99t._getFontDesc=function(){var C$99t=C$99s.fontSize.toString()+"px ";return C$99t+=C$99s.fontFamily},C$99t._computeHorizontalKerningForText=function(){},C$99t._determineRect=function(C$99t){return!1},C$99l);function C$99l(){return C$99A.apply(this,arguments)||this}C$99e.default=C$99i,C$99h.exports=C$99e.default},{"../../../assets/CCRenderTexture":43,"../../../components/CCComponent":78,"../../../components/CCLabel":80,"../../../components/CCLabelOutline":81,"../../../utils/text-utils":271,"../../webgl/assemblers/label/2d/bmfont":233,"../utils":228}],227:[function(C$99e,C$99i,C$99n){"use strict";C$99n.__esModule=!0,C$99n.default=void 0;var C$99t=(C$99t=C$99e("../../assembler-2d"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99r(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99_,C$99o,C$99a,C$99p=C$99e("../../../utils/text-utils"),C$99d=C$99e("../../../platform/CCMacro"),C$99c=C$99e("../../../components/CCLabel"),C$99f=C$99e("../../../components/CCLabelOutline"),C$99b=C$99e("../../../components/CCLabelShadow"),C$99A=C$99c.Overflow,C$99C=C$99e("../utils").deleteFromDynamicAtlas,C$99S=C$99e("../utils").getFontFamily,C$99T=(1/255).toFixed(3),C$99m=null,C$99w=null,C$99E=null,C$99y="",C$99M="",C$99g=0,C$99I=0,C$99l=[],C$99v=cc.Size.ZERO,C$99B=0,C$99R=0,C$99P=0,C$99D=null,C$99L="",C$99V=C$99A.NONE,C$99O=!1,C$99h=null,C$99F=cc.Color.WHITE,C$99u=null,C$99N=cc.Color.BLACK,C$99x=cc.rect(),C$99k=cc.Size.ZERO,C$99G=cc.Size.ZERO,C$99z=!1,C$99U=!1,C$99W=!1,C$99H=0,C$99j=cc.Vec2.ZERO,C$99e=(C$99a=C$99t.default,C$99e=C$99a,(C$99t=C$99X).prototype=Object.create(C$99e.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99e,C$99r(C$99X),(C$99t=C$99X.prototype)._getAssemblerData=function(){return(C$99o=C$99c._canvasPool.get()).canvas.width=C$99o.canvas.height=1,C$99o},C$99t._resetAssemblerData=function(C$99t){C$99t&&C$99c._canvasPool.put(C$99t)},C$99t.updateRenderData=function(C$99t){C$99a.prototype.updateRenderData.call(this,C$99t),C$99t._vertsDirty&&(this._updateFontFamily(C$99t),this._updateProperties(C$99t),this._calculateLabelFont(),this._calculateSplitedStrings(),this._updateLabelDimensions(),this._calculateTextBaseline(),this._updateTexture(C$99t),this._calDynamicAtlas(C$99t),C$99t._actualFontSize=C$99g,C$99t.node.setContentSize(C$99G),this.updateVerts(C$99t),C$99t._vertsDirty=!1,C$99E=C$99w=C$99m=null)},C$99t.updateVerts=function(){},C$99t._updatePaddingRect=function(){var C$99t=0,C$99e=0,C$99i=0,C$99n=0,C$99r=0;C$99k.width=C$99k.height=0,C$99h&&(C$99t=C$99e=C$99i=C$99n=C$99r=C$99h.width,C$99k.width=C$99k.height=2*C$99r),C$99u&&(C$99r=C$99u.blur+C$99r,C$99i=Math.max(C$99i,-C$99u._offset.x+C$99r),C$99n=Math.max(C$99n,C$99u._offset.x+C$99r),C$99t=Math.max(C$99t,C$99u._offset.y+C$99r),C$99e=Math.max(C$99e,-C$99u._offset.y+C$99r)),C$99U&&(C$99n+=C$99r=C$99I*Math.tan(.20943951),C$99k.width+=C$99r),C$99x.x=C$99i,C$99x.y=C$99t,C$99x.width=C$99i+C$99n,C$99x.height=C$99t+C$99e},C$99t._updateFontFamily=function(C$99t){C$99L=C$99S(C$99t)},C$99t._updateProperties=function(C$99t){var C$99e=C$99t._assemblerData;C$99m=C$99e.context,C$99w=C$99e.canvas,C$99E=(C$99t._frame._original||C$99t._frame)._texture,C$99M=C$99t.string.toString(),C$99g=C$99t._fontSize,C$99I=C$99g,C$99H=C$99t.underlineHeight||C$99I/8,C$99V=C$99t.overflow,C$99v.width=C$99t.node.width,C$99v.height=C$99t.node.height,C$99G=C$99t.node.getContentSize(),C$99B=C$99t._lineHeight,C$99R=C$99t.horizontalAlign,C$99P=C$99t.verticalAlign,C$99D=C$99t.node.color,C$99z=C$99t.enableBold,C$99U=C$99t.enableItalic,C$99W=C$99t.enableUnderline,C$99O=C$99V!==C$99A.NONE&&(C$99V===C$99A.RESIZE_HEIGHT||C$99t.enableWrapText),(C$99h=(C$99h=C$99f&&C$99t.getComponent(C$99f))&&C$99h.enabled&&0<C$99h.width?C$99h:null)&&C$99F.set(C$99h.color),(C$99u=(C$99u=C$99b&&C$99t.getComponent(C$99b))&&C$99u.enabled?C$99u:null)&&(C$99N.set(C$99u.color),C$99N.a=C$99N.a*C$99t.node.color.a/255),this._updatePaddingRect()},C$99t._calculateFillTextStartPosition=function(){var C$99t=0;C$99R===C$99d.TextAlignment.RIGHT?C$99t=C$99v.width-C$99x.width:C$99R===C$99d.TextAlignment.CENTER&&(C$99t=(C$99v.width-C$99x.width)/2);var C$99e=this._getLineHeight()*(C$99l.length-1),C$99i=C$99g*(1-C$99p.BASELINE_RATIO/2);return C$99P!==C$99d.VerticalTextAlignment.TOP&&(C$99e=C$99e+C$99x.height+C$99g-C$99v.height,C$99P===C$99d.VerticalTextAlignment.BOTTOM?C$99i-=C$99e+=C$99p.BASELINE_RATIO/2*C$99g:C$99i-=C$99e/2),C$99i+=C$99p.BASELINE_OFFSET*C$99g,cc.v2(C$99t+C$99x.x,C$99i+C$99x.y)},C$99t._setupOutline=function(){C$99m.strokeStyle="rgba("+C$99F.r+", "+C$99F.g+", "+C$99F.b+", "+C$99F.a/255+")",C$99m.lineWidth=2*C$99h.width},C$99t._setupShadow=function(){C$99m.shadowColor="rgba("+C$99N.r+", "+C$99N.g+", "+C$99N.b+", "+C$99N.a/255+")",C$99m.shadowBlur=C$99u.blur,C$99m.shadowOffsetX=C$99u.offset.x,C$99m.shadowOffsetY=-C$99u.offset.y},C$99t._drawUnderline=function(C$99t){C$99h&&(this._setupOutline(),C$99m.strokeRect(C$99j.x,C$99j.y,C$99t,C$99H)),C$99m.lineWidth=C$99H,C$99m.fillStyle="rgba("+C$99D.r+", "+C$99D.g+", "+C$99D.b+", "+C$99D.a/255+")",C$99m.fillRect(C$99j.x,C$99j.y,C$99t,C$99H)},C$99t._updateTexture=function(){C$99m.clearRect(0,0,C$99w.width,C$99w.height);var C$99t=C$99h?C$99F:C$99D,C$99e=(C$99m.fillStyle="rgba("+C$99t.r+", "+C$99t.g+", "+C$99t.b+", "+C$99T+")",C$99m.fillRect(0,0,C$99w.width,C$99w.height),C$99m.font=C$99y,this._calculateFillTextStartPosition()),C$99i=this._getLineHeight(),C$99n=(C$99m.lineJoin="round",C$99m.fillStyle="rgba("+C$99D.r+", "+C$99D.g+", "+C$99D.b+", 1)",1<C$99l.length),C$99r=this._measureText(C$99m,C$99y),C$99s=0,C$99o=0;C$99u&&this._setupShadow(),C$99h&&0<C$99h.width&&this._setupOutline();for(var C$99a=0;C$99a<C$99l.length;++C$99a)C$99s=C$99e.x,C$99o=C$99e.y+C$99a*C$99i,C$99u&&C$99n&&(C$99h&&0<C$99h.width&&C$99m.strokeText(C$99l[C$99a],C$99s,C$99o),C$99m.fillText(C$99l[C$99a],C$99s,C$99o)),C$99W&&(C$99_=C$99r(C$99l[C$99a]),C$99R===C$99d.TextAlignment.RIGHT?C$99j.x=C$99e.x-C$99_:C$99R===C$99d.TextAlignment.CENTER?C$99j.x=C$99e.x-C$99_/2:C$99j.x=C$99e.x,C$99j.y=C$99o+C$99I/8,this._drawUnderline(C$99_));C$99u&&C$99n&&(C$99m.shadowColor="transparent");for(var C$99c=0;C$99c<C$99l.length;++C$99c)C$99s=C$99e.x,C$99o=C$99e.y+C$99c*C$99i,C$99h&&0<C$99h.width&&C$99m.strokeText(C$99l[C$99c],C$99s,C$99o),C$99m.fillText(C$99l[C$99c],C$99s,C$99o);C$99u&&(C$99m.shadowColor="transparent"),C$99E.handleLoadedTexture()},C$99t._calDynamicAtlas=function(C$99t){var C$99e;C$99t.cacheMode===C$99c.CacheMode.BITMAP&&(C$99e=C$99t._frame,C$99C(C$99t,C$99e),C$99e._original||C$99e.setRect(cc.rect(0,0,C$99w.width,C$99w.height)),this.packToDynamicAtlas(C$99t,C$99e))},C$99t._updateLabelDimensions=function(){var C$99t=C$99M.split("\n");if(C$99V===C$99A.RESIZE_HEIGHT){var C$99e=(C$99l.length+C$99p.BASELINE_RATIO)*this._getLineHeight();C$99v.height=C$99e+C$99x.height,C$99G.height=C$99e+C$99k.height}else if(C$99V===C$99A.NONE){C$99l=C$99t;for(var C$99i=0,C$99e=0,C$99n=0;C$99n<C$99t.length;++C$99n)var C$99r=C$99p.safeMeasureText(C$99m,C$99t[C$99n],C$99y),C$99i=C$99r<C$99i?C$99i:C$99r;var C$99e=(C$99l.length+C$99p.BASELINE_RATIO)*this._getLineHeight(),C$99s=parseFloat(C$99i.toFixed(2)),C$99e=parseFloat(C$99e.toFixed(2));C$99v.width=C$99s+C$99x.width,C$99v.height=C$99e+C$99x.height,C$99G.width=C$99s+C$99k.width,C$99G.height=C$99e+C$99k.height}C$99v.width=Math.min(C$99v.width,2048),C$99v.height=Math.min(C$99v.height,2048),C$99w.width!==C$99v.width&&(C$99w.width=C$99v.width),C$99w.height!==C$99v.height&&(C$99w.height=C$99v.height)},C$99t._calculateTextBaseline=function(){var C$99t=C$99R===C$99d.TextAlignment.RIGHT?"right":C$99R===C$99d.TextAlignment.CENTER?"center":"left";C$99m.textAlign=C$99t,C$99m.textBaseline="alphabetic"},C$99t._calculateSplitedStrings=function(){var C$99t=C$99M.split("\n");if(C$99O){C$99l=[];for(var C$99e=C$99G.width,C$99i=0;C$99i<C$99t.length;++C$99i){var C$99n=C$99p.safeMeasureText(C$99m,C$99t[C$99i],C$99y),C$99n=C$99p.fragmentText(C$99t[C$99i],C$99n,C$99e,this._measureText(C$99m,C$99y));C$99l=C$99l.concat(C$99n)}}else C$99l=C$99t},C$99t._getFontDesc=function(){var C$99t=C$99g.toString()+"px ";return C$99t+=C$99L,C$99z&&(C$99t="bold "+C$99t),C$99t=C$99U?"italic "+C$99t:C$99t},C$99t._getLineHeight=function(){return 0|(0===C$99B?C$99g:C$99B*C$99g/C$99I)},C$99t._calculateParagraphLength=function(C$99t,C$99e){for(var C$99i=[],C$99n=0;C$99n<C$99t.length;++C$99n){var C$99r=C$99p.safeMeasureText(C$99e,C$99t[C$99n],C$99y);C$99i.push(C$99r)}return C$99i},C$99t._measureText=function(C$99e,C$99i){return function(C$99t){return C$99p.safeMeasureText(C$99e,C$99t,C$99i)}},C$99t._calculateLabelFont=function(){if(C$99y=this._getFontDesc(),C$99m.font=C$99y,C$99V===C$99A.SHRINK){var C$99t=C$99M.split("\n"),C$99h=this._calculateParagraphLength(C$99t,C$99m),C$99e=0,C$99i=0,C$99n=0;if(C$99O){var C$99r=C$99G.width,C$99s=C$99G.height;if(C$99r<0||C$99s<0)return C$99y=this._getFontDesc(),void(C$99m.font=C$99y);for(var C$99o,C$99i=C$99s+1,C$99n=C$99r+1,C$99a=0,C$99c=0|C$99g+1;C$99a<C$99c;){if((C$99o=C$99a+C$99c+1>>1)<=0){cc.logID(4003);break}for(C$99g=C$99o,C$99y=this._getFontDesc(),C$99m.font=C$99y,C$99e=C$99i=0;C$99e<C$99t.length;++C$99e)for(var C$99l=0,C$99u=C$99p.safeMeasureText(C$99m,C$99t[C$99e],C$99y),C$99_=C$99p.fragmentText(C$99t[C$99e],C$99u,C$99r,this._measureText(C$99m,C$99y));C$99l<C$99_.length;)C$99n=C$99p.safeMeasureText(C$99m,C$99_[C$99l],C$99y),C$99i+=this._getLineHeight(),++C$99l;C$99s<C$99i?C$99c=C$99o-1:C$99a=C$99o}0===C$99a?cc.logID(4003):(C$99g=C$99a,C$99y=this._getFontDesc(),C$99m.font=C$99y)}else{for(C$99i=C$99t.length*this._getLineHeight(),C$99e=0;C$99e<C$99t.length;++C$99e)C$99n<C$99h[C$99e]&&(C$99n=C$99h[C$99e]);var C$99d=(C$99v.width-C$99x.width)/C$99n,C$99f=C$99v.height/C$99i;C$99g=C$99I*Math.min(1,C$99d,C$99f)|0,C$99y=this._getFontDesc(),C$99m.font=C$99y}}},C$99X);function C$99X(){return C$99a.apply(this,arguments)||this}C$99n.default=C$99e,C$99i.exports=C$99n.default},{"../../../components/CCLabel":80,"../../../components/CCLabelOutline":81,"../../../components/CCLabelShadow":82,"../../../platform/CCMacro":194,"../../../utils/text-utils":271,"../../assembler-2d":215,"../utils":228}],228:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./dynamic-atlas/manager"),C$99t=cc.Color.WHITE;C$99e.exports={deleteFromDynamicAtlas:function(C$99t,C$99e){C$99e&&C$99e._original&&C$99n&&(C$99n.deleteAtlasSpriteFrame(C$99e),C$99e._resetDynamicAtlasFrame())},getFontFamily:function(C$99i){return C$99i.useSystemFont?C$99i.fontFamily||"Arial":C$99i.font?C$99i.font._nativeAsset||(cc.loader.load(C$99i.font.nativeUrl,function(C$99t,C$99e){C$99i.font._nativeAsset=C$99e,C$99i.setVertsDirty()}),"Arial"):"Arial"},shareLabelInfo:{fontAtlas:null,fontSize:0,lineHeight:0,hAlign:0,vAlign:0,hash:"",fontFamily:"",fontDesc:"Arial",color:C$99t,isOutlined:!1,out:C$99t,margin:0}}},{"./dynamic-atlas/manager":223}],229:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e,C$99i){C$99i=C$99i||2;var C$99n,C$99r,C$99s,C$99o,C$99h,C$99u=C$99e&&C$99e.length,C$99_=C$99u?C$99e[0]*C$99i:C$99t.length,C$99a=C$99S(C$99t,0,C$99_,C$99i,!0),C$99d=[];if(!C$99a)return C$99d;if(C$99u&&(C$99a=function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s,C$99o,C$99a,C$99c=[];for(C$99r=0,C$99s=C$99e.length;C$99r<C$99s;C$99r++)C$99a=C$99e[C$99r]*C$99n,C$99o=C$99r<C$99s-1?C$99e[C$99r+1]*C$99n:C$99t.length,(C$99a=C$99S(C$99t,C$99a,C$99o,C$99n,!1))===C$99a.next&&(C$99a.steiner=!0),C$99c.push(function(C$99t){var C$99e=C$99t,C$99i=C$99t;for(;C$99e.x<C$99i.x&&(C$99i=C$99e),C$99e=C$99e.next,C$99e!==C$99t;);return C$99i}(C$99a));for(C$99c.sort(C$99T),C$99r=0;C$99r<C$99c.length;C$99r++)!function(C$99t,C$99e){(C$99e=function(C$99t,C$99h){var C$99e,C$99i=C$99h,C$99n=C$99t.x,C$99r=C$99t.y,C$99s=-1/0;do{if(C$99r<=C$99i.y&&C$99r>=C$99i.next.y){var C$99o=C$99i.x+(C$99r-C$99i.y)*(C$99i.next.x-C$99i.x)/(C$99i.next.y-C$99i.y);if(C$99o<=C$99n&&C$99s<C$99o){if((C$99s=C$99o)===C$99n){if(C$99r===C$99i.y)return C$99i;if(C$99r===C$99i.next.y)return C$99i.next}C$99e=C$99i.x<C$99i.next.x?C$99i:C$99i.next}}}while(C$99i=C$99i.next,C$99i!==C$99h);if(!C$99e)return null;if(C$99n===C$99s)return C$99e.prev;var C$99a,C$99u=C$99e,C$99_=C$99e.x,C$99c=C$99e.y,C$99l=1/0;C$99i=C$99e.next;for(;C$99i!==C$99u;)C$99n>=C$99i.x&&C$99i.x>=C$99_&&C$99g(C$99r<C$99c?C$99n:C$99s,C$99r,C$99_,C$99c,C$99r<C$99c?C$99s:C$99n,C$99r,C$99i.x,C$99i.y)&&((C$99a=Math.abs(C$99r-C$99i.y)/(C$99n-C$99i.x))<C$99l||C$99a===C$99l&&C$99i.x>C$99e.x)&&C$99b(C$99i,C$99t)&&(C$99e=C$99i,C$99l=C$99a),C$99i=C$99i.next;return C$99e}(C$99t,C$99e))&&C$99p(C$99e=C$99E(C$99e,C$99t),C$99e.next)}(C$99c[C$99r],C$99i),C$99i=C$99p(C$99i,C$99i.next);return C$99i}(C$99t,C$99e,C$99a,C$99i)),C$99t.length>80*C$99i){for(var C$99c=C$99n=C$99t[0],C$99l=C$99r=C$99t[1],C$99f=C$99i;C$99f<C$99_;C$99f+=C$99i)(C$99s=C$99t[C$99f])<C$99c&&(C$99c=C$99s),(C$99o=C$99t[C$99f+1])<C$99l&&(C$99l=C$99o),C$99n<C$99s&&(C$99n=C$99s),C$99r<C$99o&&(C$99r=C$99o);C$99h=Math.max(C$99n-C$99c,C$99r-C$99l)}return C$99m(C$99a,C$99d,C$99i,C$99c,C$99l,C$99h),C$99d}function C$99S(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s,C$99o;if(C$99r===0<C$99C(C$99t,C$99e,C$99i,C$99n))for(C$99s=C$99e;C$99s<C$99i;C$99s+=C$99n)C$99o=C$99a(C$99s,C$99t[C$99s],C$99t[C$99s+1],C$99o);else for(C$99s=C$99i-C$99n;C$99e<=C$99s;C$99s-=C$99n)C$99o=C$99a(C$99s,C$99t[C$99s],C$99t[C$99s+1],C$99o);return C$99o&&C$99x(C$99o,C$99o.next)&&(C$99A(C$99o),C$99o=C$99o.next),C$99o}function C$99p(C$99t,C$99e){if(!C$99t)return C$99t;C$99e=C$99e||C$99t;var C$99i,C$99n=C$99t;do{if(C$99i=!1,C$99n.steiner||!C$99x(C$99n,C$99n.next)&&0!==C$99v(C$99n.prev,C$99n,C$99n.next))C$99n=C$99n.next;else{if(C$99A(C$99n),(C$99n=C$99e=C$99n.prev)===C$99n.next)return null;C$99i=!0}}while(C$99i||C$99n!==C$99e);return C$99e}function C$99m(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){if(C$99t){if(!C$99o&&C$99s){var C$99a=C$99t;var C$99h=C$99n;var C$99u=C$99r;var C$99_=C$99s;var C$99c=C$99a;for(;null===C$99c.z&&(C$99c.z=C$99y(C$99c.x,C$99c.y,C$99h,C$99u,C$99_)),C$99c.prevZ=C$99c.prev,C$99c.nextZ=C$99c.next,C$99c=C$99c.next,C$99c!==C$99a;);C$99c.prevZ.nextZ=null,C$99c.prevZ=null,function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l=1;do{for(C$99i=C$99t,C$99s=C$99t=null,C$99o=0;C$99i;){for(C$99o++,C$99n=C$99i,C$99e=C$99a=0;C$99e<C$99l&&(C$99a++,C$99n=C$99n.nextZ);C$99e++);for(C$99c=C$99l;0<C$99a||0<C$99c&&C$99n;)0!==C$99a&&(0===C$99c||!C$99n||C$99i.z<=C$99n.z)?(C$99i=(C$99r=C$99i).nextZ,C$99a--):(C$99n=(C$99r=C$99n).nextZ,C$99c--),C$99s?C$99s.nextZ=C$99r:C$99t=C$99r,C$99r.prevZ=C$99s,C$99s=C$99r;C$99i=C$99n}}while(C$99s.nextZ=null,C$99l*=2,1<C$99o)}(C$99c)}for(var C$99d,C$99l,C$99f=C$99t;C$99t.prev!==C$99t.next;)if(C$99d=C$99t.prev,C$99l=C$99t.next,C$99s?function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99t.prev,C$99s=C$99t,C$99o=C$99t.next;if(0<=C$99v(C$99r,C$99s,C$99o))return!1;var C$99a=(C$99r.x<C$99s.x?C$99r.x<C$99o.x?C$99r:C$99o:C$99s.x<C$99o.x?C$99s:C$99o).x,C$99c=(C$99r.y<C$99s.y?C$99r.y<C$99o.y?C$99r:C$99o:C$99s.y<C$99o.y?C$99s:C$99o).y,C$99h=(C$99r.x>C$99s.x?C$99r.x>C$99o.x?C$99r:C$99o:C$99s.x>C$99o.x?C$99s:C$99o).x,C$99u=(C$99r.y>C$99s.y?C$99r.y>C$99o.y?C$99r:C$99o:C$99s.y>C$99o.y?C$99s:C$99o).y,C$99_=C$99y(C$99a,C$99c,C$99e,C$99i,C$99n),C$99d=C$99y(C$99h,C$99u,C$99e,C$99i,C$99n),C$99l=C$99t.nextZ;for(;C$99l&&C$99l.z<=C$99d;){if(C$99l!==C$99t.prev&&C$99l!==C$99t.next&&C$99g(C$99r.x,C$99r.y,C$99s.x,C$99s.y,C$99o.x,C$99o.y,C$99l.x,C$99l.y)&&0<=C$99v(C$99l.prev,C$99l,C$99l.next))return!1;C$99l=C$99l.nextZ}C$99l=C$99t.prevZ;for(;C$99l&&C$99l.z>=C$99_;){if(C$99l!==C$99t.prev&&C$99l!==C$99t.next&&C$99g(C$99r.x,C$99r.y,C$99s.x,C$99s.y,C$99o.x,C$99o.y,C$99l.x,C$99l.y)&&0<=C$99v(C$99l.prev,C$99l,C$99l.next))return!1;C$99l=C$99l.prevZ}return!0}(C$99t,C$99n,C$99r,C$99s):function(C$99t){var C$99e=C$99t.prev,C$99i=C$99t,C$99n=C$99t.next;if(0<=C$99v(C$99e,C$99i,C$99n))return!1;var C$99r=C$99t.next.next;for(;C$99r!==C$99t.prev;){if(C$99g(C$99e.x,C$99e.y,C$99i.x,C$99i.y,C$99n.x,C$99n.y,C$99r.x,C$99r.y)&&0<=C$99v(C$99r.prev,C$99r,C$99r.next))return!1;C$99r=C$99r.next}return!0}(C$99t))C$99e.push(C$99d.i/C$99i),C$99e.push(C$99t.i/C$99i),C$99e.push(C$99l.i/C$99i),C$99A(C$99t),C$99t=C$99l.next,C$99f=C$99l.next;else if((C$99t=C$99l)===C$99f){C$99o?1===C$99o?C$99m(C$99t=function(C$99t,C$99e,C$99i){var C$99n=C$99t;do{var C$99r=C$99n.prev,C$99s=C$99n.next.next}while(!C$99x(C$99r,C$99s)&&C$99w(C$99r,C$99n,C$99n.next,C$99s)&&C$99b(C$99r,C$99s)&&C$99b(C$99s,C$99r)&&(C$99e.push(C$99r.i/C$99i),C$99e.push(C$99n.i/C$99i),C$99e.push(C$99s.i/C$99i),C$99A(C$99n),C$99A(C$99n.next),C$99n=C$99t=C$99s),C$99n=C$99n.next,C$99n!==C$99t);return C$99n}(C$99t,C$99e,C$99i),C$99e,C$99i,C$99n,C$99r,C$99s,2):2===C$99o&&function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=C$99t;do{for(var C$99a,C$99c=C$99o.next.next;C$99c!==C$99o.prev;){if(C$99o.i!==C$99c.i&&function(C$99t,C$99e){return C$99t.next.i!==C$99e.i&&C$99t.prev.i!==C$99e.i&&!function(C$99t,C$99e){var C$99i=C$99t;do{if(C$99i.i!==C$99t.i&&C$99i.next.i!==C$99t.i&&C$99i.i!==C$99e.i&&C$99i.next.i!==C$99e.i&&C$99w(C$99i,C$99i.next,C$99t,C$99e))return!0}while(C$99i=C$99i.next,C$99i!==C$99t);return!1}(C$99t,C$99e)&&C$99b(C$99t,C$99e)&&C$99b(C$99e,C$99t)&&function(C$99t,C$99e){var C$99i=C$99t,C$99n=!1,C$99r=(C$99t.x+C$99e.x)/2,C$99s=(C$99t.y+C$99e.y)/2;for(;C$99i.y>C$99s!=C$99i.next.y>C$99s&&C$99r<(C$99i.next.x-C$99i.x)*(C$99s-C$99i.y)/(C$99i.next.y-C$99i.y)+C$99i.x&&(C$99n=!C$99n),C$99i=C$99i.next,C$99i!==C$99t;);return C$99n}(C$99t,C$99e)}(C$99o,C$99c))return C$99a=C$99E(C$99o,C$99c),C$99o=C$99p(C$99o,C$99o.next),C$99a=C$99p(C$99a,C$99a.next),C$99m(C$99o,C$99e,C$99i,C$99n,C$99r,C$99s),C$99m(C$99a,C$99e,C$99i,C$99n,C$99r,C$99s);C$99c=C$99c.next}}while(C$99o=C$99o.next,C$99o!==C$99t)}(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s):C$99m(C$99p(C$99t),C$99e,C$99i,C$99n,C$99r,C$99s,1);break}}}function C$99T(C$99t,C$99e){return C$99t.x-C$99e.x}function C$99y(C$99t,C$99e,C$99i,C$99n,C$99r){return(C$99t=1431655765&((C$99t=858993459&((C$99t=252645135&((C$99t=16711935&((C$99t=32767*(C$99t-C$99i)/C$99r)|C$99t<<8))|C$99t<<4))|C$99t<<2))|C$99t<<1))|(C$99e=1431655765&((C$99e=858993459&((C$99e=252645135&((C$99e=16711935&((C$99e=32767*(C$99e-C$99n)/C$99r)|C$99e<<8))|C$99e<<4))|C$99e<<2))|C$99e<<1))<<1}function C$99g(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){return 0<=(C$99r-C$99o)*(C$99e-C$99a)-(C$99t-C$99o)*(C$99s-C$99a)&&0<=(C$99t-C$99o)*(C$99n-C$99a)-(C$99i-C$99o)*(C$99e-C$99a)&&0<=(C$99i-C$99o)*(C$99s-C$99a)-(C$99r-C$99o)*(C$99n-C$99a)}function C$99v(C$99t,C$99e,C$99i){return(C$99e.y-C$99t.y)*(C$99i.x-C$99e.x)-(C$99e.x-C$99t.x)*(C$99i.y-C$99e.y)}function C$99x(C$99t,C$99e){return C$99t.x===C$99e.x&&C$99t.y===C$99e.y}function C$99w(C$99t,C$99e,C$99i,C$99n){return C$99x(C$99t,C$99e)&&C$99x(C$99i,C$99n)||C$99x(C$99t,C$99n)&&C$99x(C$99i,C$99e)||0<C$99v(C$99t,C$99e,C$99i)!=0<C$99v(C$99t,C$99e,C$99n)&&0<C$99v(C$99i,C$99n,C$99t)!=0<C$99v(C$99i,C$99n,C$99e)}function C$99b(C$99t,C$99e){return C$99v(C$99t.prev,C$99t,C$99t.next)<0?0<=C$99v(C$99t,C$99e,C$99t.next)&&0<=C$99v(C$99t,C$99t.prev,C$99e):C$99v(C$99t,C$99e,C$99t.prev)<0||C$99v(C$99t,C$99t.next,C$99e)<0}function C$99E(C$99t,C$99e){var C$99i=new C$99o(C$99t.i,C$99t.x,C$99t.y),C$99n=new C$99o(C$99e.i,C$99e.x,C$99e.y),C$99r=C$99t.next,C$99s=C$99e.prev;return(C$99t.next=C$99e).prev=C$99t,(C$99i.next=C$99r).prev=C$99i,(C$99n.next=C$99i).prev=C$99n,(C$99s.next=C$99n).prev=C$99s,C$99n}function C$99a(C$99t,C$99e,C$99i,C$99n){C$99t=new C$99o(C$99t,C$99e,C$99i);return C$99n?(C$99t.next=C$99n.next,(C$99t.prev=C$99n).next.prev=C$99t,C$99n.next=C$99t):(C$99t.prev=C$99t).next=C$99t,C$99t}function C$99A(C$99t){C$99t.next.prev=C$99t.prev,C$99t.prev.next=C$99t.next,C$99t.prevZ&&(C$99t.prevZ.nextZ=C$99t.nextZ),C$99t.nextZ&&(C$99t.nextZ.prevZ=C$99t.prevZ)}function C$99o(C$99t,C$99e,C$99i){this.i=C$99t,this.x=C$99e,this.y=C$99i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C$99C(C$99t,C$99e,C$99i,C$99n){for(var C$99r=0,C$99s=C$99e,C$99o=C$99i-C$99n;C$99s<C$99i;C$99s+=C$99n)C$99r+=(C$99t[C$99o]-C$99t[C$99s])*(C$99t[C$99s+1]+C$99t[C$99o+1]),C$99o=C$99s;return C$99r}(cc.Graphics.earcut=C$99e.exports=C$99n).deviation=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99e&&C$99e.length,C$99h=C$99r?C$99e[0]*C$99i:C$99t.length,C$99s=Math.abs(C$99C(C$99t,0,C$99h,C$99i));if(C$99r)for(var C$99o=0,C$99a=C$99e.length;C$99o<C$99a;C$99o++){var C$99u=C$99e[C$99o]*C$99i,C$99_=C$99o<C$99a-1?C$99e[C$99o+1]*C$99i:C$99t.length;C$99s-=Math.abs(C$99C(C$99t,C$99u,C$99_,C$99i))}for(var C$99c=0,C$99o=0;C$99o<C$99n.length;C$99o+=3){var C$99l=C$99n[C$99o]*C$99i,C$99d=C$99n[C$99o+1]*C$99i,C$99f=C$99n[C$99o+2]*C$99i;C$99c+=Math.abs((C$99t[C$99l]-C$99t[C$99f])*(C$99t[1+C$99d]-C$99t[1+C$99l])-(C$99t[C$99l]-C$99t[C$99d])*(C$99t[1+C$99f]-C$99t[1+C$99l]))}return 0===C$99s&&0===C$99c?0:Math.abs((C$99c-C$99s)/C$99s)},C$99n.flatten=function(C$99t){for(var C$99e=C$99t[0][0].length,C$99i={vertices:[],holes:[],dimensions:C$99e},C$99n=0,C$99r=0;C$99r<C$99t.length;C$99r++){for(var C$99s=0;C$99s<C$99t[C$99r].length;C$99s++)for(var C$99o=0;C$99o<C$99e;C$99o++)C$99i.vertices.push(C$99t[C$99r][C$99s][C$99o]);0<C$99r&&(C$99n+=C$99t[C$99r-1].length,C$99i.holes.push(C$99n))}return C$99i}},{}],230:[function(C$99t,C$99e,C$99i){"use strict";var C$99a=C$99t("../../../../graphics/helper"),C$99c=C$99t("../../../../graphics/types").PointFlags,C$99o=cc.Graphics.Point=cc.Class({name:"cc.GraphicsPoint",extends:cc.Vec2,ctor:function(C$99t,C$99e){this.reset()},reset:function(){this.dx=0,this.dy=0,this.dmx=0,this.dmy=0,this.flags=0,this.len=0}});function C$99n(){this.reset()}function C$99r(C$99t){this._tessTol=.25,this._distTol=.01,this._updatePathOffset=!1,this._paths=null,this._pathLength=0,this._pathOffset=0,this._points=null,this._pointsOffset=0,this._commandx=0,this._commandy=0,this._paths=[],this._points=[]}cc.js.mixin(C$99n.prototype,{reset:function(){this.closed=!1,this.nbevel=0,this.complex=!0,this.points?this.points.length=0:this.points=[]}}),cc.js.mixin(C$99r.prototype,{moveTo:function(C$99t,C$99e){this._updatePathOffset&&(this._pathOffset=this._pathLength,this._updatePathOffset=!1),this._addPath(),this._addPoint(C$99t,C$99e,C$99c.PT_CORNER),this._commandx=C$99t,this._commandy=C$99e},lineTo:function(C$99t,C$99e){this._addPoint(C$99t,C$99e,C$99c.PT_CORNER),this._commandx=C$99t,this._commandy=C$99e},bezierCurveTo:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=this._curPath,C$99o=C$99o.points[C$99o.points.length-1];C$99o.x!==C$99t||C$99o.y!==C$99e||C$99i!==C$99r||C$99n!==C$99s?(C$99a.tesselateBezier(this,C$99o.x,C$99o.y,C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,0,C$99c.PT_CORNER),this._commandx=C$99r,this._commandy=C$99s):this.lineTo(C$99r,C$99s)},quadraticCurveTo:function(C$99t,C$99e,C$99i,C$99n){var C$99r=this._commandx,C$99s=this._commandy;this.bezierCurveTo(C$99r+2/3*(C$99t-C$99r),C$99s+2/3*(C$99e-C$99s),C$99i+2/3*(C$99t-C$99i),C$99n+2/3*(C$99e-C$99n),C$99i,C$99n)},arc:function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){C$99a.arc(this,C$99t,C$99e,C$99i,C$99n,C$99r,C$99s)},ellipse:function(C$99t,C$99e,C$99i,C$99n){C$99a.ellipse(this,C$99t,C$99e,C$99i,C$99n),this._curPath.complex=!1},circle:function(C$99t,C$99e,C$99i){C$99a.ellipse(this,C$99t,C$99e,C$99i,C$99i),this._curPath.complex=!1},rect:function(C$99t,C$99e,C$99i,C$99n){this.moveTo(C$99t,C$99e),this.lineTo(C$99t,C$99e+C$99n),this.lineTo(C$99t+C$99i,C$99e+C$99n),this.lineTo(C$99t+C$99i,C$99e),this.close(),this._curPath.complex=!1},roundRect:function(C$99t,C$99e,C$99i,C$99n,C$99r){C$99a.roundRect(this,C$99t,C$99e,C$99i,C$99n,C$99r),this._curPath.complex=!1},clear:function(C$99t){this._pathLength=0,this._pathOffset=0,this._pointsOffset=0,this._curPath=null,C$99t&&(this._paths.length=0,this._points.length=0)},close:function(){this._curPath.closed=!0},_addPath:function(){var C$99t=this._pathLength,C$99t=this._paths[C$99t];return C$99t?C$99t.reset():(C$99t=new C$99n,this._paths.push(C$99t)),this._pathLength++,this._curPath=C$99t},_addPoint:function(C$99t,C$99e,C$99i){var C$99n,C$99r,C$99s=this._curPath;C$99s&&(C$99n=this._points,C$99s=C$99s.points,(C$99r=C$99n[this._pointsOffset++])?(C$99r.x=C$99t,C$99r.y=C$99e):(C$99r=new C$99o(C$99t,C$99e),C$99n.push(C$99r)),C$99r.flags=C$99i,C$99s.push(C$99r))}}),cc.Graphics._Impl=C$99r,C$99e.exports=C$99r},{"../../../../graphics/helper":132,"../../../../graphics/types":134}],231:[function(C$99t,C$99n,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99r=C$99o(C$99t("../../../assembler")),C$99s=C$99o(C$99t("../../../../../renderer/core/input-assembler"));function C$99o(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99a(C$99i){return function(){var C$99t,C$99e=C$99c(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99c(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99c(C$99t){return(C$99c=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99l=C$99t("../../mesh-buffer"),C$99h=C$99t("../../vertex-format").vfmtPosColor,C$99u=C$99t("../../../index"),C$99i=C$99t("../../../../graphics/graphics"),C$99L=C$99t("../../../../graphics/types").PointFlags,C$99V=C$99i.LineJoin,C$99O=C$99i.LineCap,C$99B=C$99t("./earcut"),C$99F=(C$99t("./impl"),Math.PI),C$99g=Math.min,C$99N=Math.max,C$99k=Math.ceil,C$99G=Math.acos,C$99E=Math.cos,C$99M=Math.sin,C$99I=Math.atan2;function C$99R(C$99t,C$99e,C$99i){return C$99t<C$99e?C$99e:C$99i<C$99t?C$99i:C$99t}C$99_=C$99r.default,C$99i=C$99_,(C$99t=C$99d).prototype=Object.create(C$99i.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99i,C$99a(C$99d),(C$99t=C$99d.prototype).getVfmt=function(){return C$99h},C$99t.requestBuffer=function(){var C$99t={indiceStart:0,vertexStart:0},C$99e=new C$99l(C$99u._handle,C$99h),C$99e=(C$99t.meshbuffer=C$99e,new C$99s.default(C$99e._vb,C$99e._ib));return C$99t.ia=C$99e,this._buffers.push(C$99t),C$99t},C$99t.getBuffers=function(){return 0===this._buffers.length&&this.requestBuffer(),this._buffers},C$99t.clear=function(C$99t){this._bufferOffset=0;var C$99e=this._buffers;if(C$99t){for(var C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];C$99r.meshbuffer.destroy(),C$99r.meshbuffer=null}C$99e.length=0}else for(var C$99s=0,C$99o=C$99e.length;C$99s<C$99o;C$99s++){var C$99a=C$99e[C$99s];C$99a.indiceStart=0,C$99a.vertexStart=0,C$99a.meshbuffer.reset()}},C$99t.fillBuffers=function(C$99t,C$99e){C$99e._flush(),C$99e.node=C$99t.node,C$99e.material=C$99t._materials[0];for(var C$99i=this.getBuffers(),C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++){var C$99s=C$99i[C$99n],C$99o=C$99s.meshbuffer;C$99s.ia._count=C$99s.indiceStart,C$99e._flushIA(C$99s.ia),C$99o.uploadData()}},C$99t.genBuffer=function(C$99t,C$99e){var C$99i=this.getBuffers(),C$99n=C$99i[this._bufferOffset],C$99r=C$99n.meshbuffer,C$99s=C$99n.vertexStart+C$99e;return(65535<C$99s||131070<3*C$99s)&&(++this._bufferOffset,C$99s=C$99e,this._bufferOffset<C$99i.length?C$99n=C$99i[this._bufferOffset]:(C$99n=this.requestBuffer(C$99t),C$99i[this._bufferOffset]=C$99n),C$99r=C$99n.meshbuffer),C$99s>C$99r.vertexOffset&&C$99r.requestStatic(C$99e,3*C$99e),this._buffer=C$99n},C$99t.stroke=function(C$99t){this._curColor=C$99t._strokeColor._val,this._flattenPaths(C$99t._impl),this._expandStroke(C$99t),C$99t._impl._updatePathOffset=!0},C$99t.fill=function(C$99t){this._curColor=C$99t._fillColor._val,this._expandFill(C$99t),C$99t._impl._updatePathOffset=!0},C$99t._expandStroke=function(C$99t){for(var C$99h,C$99u,C$99e=.5*C$99t.lineWidth,C$99i=C$99t.lineCap,C$99_=C$99t.lineJoin,C$99d=C$99t.miterLimit,C$99n=C$99t._impl,C$99f=(C$99h=C$99e,C$99u=C$99F,C$99A=C$99n._tessTol,C$99h=2*C$99G(C$99e/(C$99e+C$99A)),C$99N(2,C$99k(C$99u/C$99h))),C$99p=(this._calculateJoins(C$99n,C$99e,C$99_,C$99d),C$99n._paths),C$99m=0,C$99y=C$99n._pathOffset,C$99g=C$99n._pathLength;C$99y<C$99g;C$99y++){var C$99v=C$99p[C$99y],C$99x=C$99v.points.length;C$99_===C$99V.ROUND?C$99m+=2*(C$99x+C$99v.nbevel*(C$99f+2)+1):C$99m+=2*(C$99x+5*C$99v.nbevel+1),C$99v.closed||(C$99i===C$99O.ROUND?C$99m+=2*(2*C$99f+2):C$99m+=12)}for(var C$99b=this.genBuffer(C$99t,C$99m),C$99A=C$99b.meshbuffer,C$99C=C$99A._vData,C$99S=C$99A._iData,C$99T=C$99n._pathOffset,C$99w=C$99n._pathLength;C$99T<C$99w;C$99T++){var C$99r=C$99p[C$99T],C$99E=C$99r.points,C$99s=C$99E.length,C$99M=C$99b.vertexStart,C$99o=void 0,C$99a=void 0,C$99c=void 0,C$99I=void 0,C$99I=(C$99r=C$99r.closed)?(C$99o=C$99E[C$99s-1],C$99a=C$99E[0],C$99c=0,C$99s):(C$99o=C$99E[0],C$99a=C$99E[1],C$99s-(C$99c=1)),C$99a=C$99a||C$99o;C$99r||((C$99s=C$99a.sub(C$99o)).normalizeSelf(),C$99l=C$99s.x,C$99s=C$99s.y,C$99i===C$99O.BUTT?this._buttCapStart(C$99o,C$99l,C$99s,C$99e,0):C$99i===C$99O.SQUARE?this._buttCapStart(C$99o,C$99l,C$99s,C$99e,C$99e):C$99i===C$99O.ROUND&&this._roundCapStart(C$99o,C$99l,C$99s,C$99e,C$99f));for(var C$99l,C$99B=C$99c;C$99B<C$99I;++C$99B)C$99_===C$99V.ROUND?this._roundJoin(C$99o,C$99a,C$99e,C$99e,C$99f):0!=(C$99a.flags&(C$99L.PT_BEVEL|C$99L.PT_INNERBEVEL))?this._bevelJoin(C$99o,C$99a,C$99e,C$99e):(this._vset(C$99a.x+C$99a.dmx*C$99e,C$99a.y+C$99a.dmy*C$99e),this._vset(C$99a.x-C$99a.dmx*C$99e,C$99a.y-C$99a.dmy*C$99e)),C$99o=C$99a,C$99a=C$99E[C$99B+1];C$99r?(this._vset(C$99C[C$99l=3*C$99M],C$99C[1+C$99l]),this._vset(C$99C[3+C$99l],C$99C[4+C$99l])):((C$99s=C$99a.sub(C$99o)).normalizeSelf(),C$99c=C$99s.x,C$99r=C$99s.y,C$99i===C$99O.BUTT?this._buttCapEnd(C$99a,C$99c,C$99r,C$99e,0):C$99i===C$99O.SQUARE?this._buttCapEnd(C$99a,C$99c,C$99r,C$99e,C$99e):C$99i===C$99O.ROUND&&this._roundCapEnd(C$99a,C$99c,C$99r,C$99e,C$99f));for(var C$99R=C$99b.indiceStart,C$99P=C$99M+2,C$99D=C$99b.vertexStart;C$99P<C$99D;C$99P++)C$99S[C$99R++]=C$99P-2,C$99S[C$99R++]=C$99P-1,C$99S[C$99R++]=C$99P;C$99b.indiceStart=C$99R}},C$99t._expandFill=function(C$99t){for(var C$99e=C$99t._impl,C$99h=C$99e._paths,C$99u=0,C$99i=C$99e._pathOffset,C$99_=C$99e._pathLength;C$99i<C$99_;C$99i++)C$99u+=C$99h[C$99i].points.length;for(var C$99n=this.genBuffer(C$99t,C$99u),C$99t=C$99n.meshbuffer,C$99d=C$99t._vData,C$99r=C$99t._iData,C$99f=C$99e._pathOffset,C$99p=C$99e._pathLength;C$99f<C$99p;C$99f++){var C$99m=C$99h[C$99f],C$99y=C$99m.points,C$99g=C$99y.length;if(0!==C$99g){for(var C$99s=C$99n.vertexStart,C$99o=0;C$99o<C$99g;++C$99o)this._vset(C$99y[C$99o].x,C$99y[C$99o].y);var C$99a=C$99n.indiceStart;if(C$99m.complex){for(var C$99v=[],C$99x=C$99s,C$99b=C$99n.vertexStart;C$99x<C$99b;C$99x++){var C$99A=3*C$99x;C$99v.push(C$99d[C$99A]),C$99v.push(C$99d[1+C$99A])}var C$99c=C$99B(C$99v,null,2);if(!C$99c||0===C$99c.length)continue;for(var C$99C=0,C$99S=C$99c.length;C$99C<C$99S;C$99C++)C$99r[C$99a++]=C$99c[C$99C]+C$99s}else for(var C$99T=C$99s,C$99l=C$99s+2,C$99w=C$99n.vertexStart;C$99l<C$99w;C$99l++)C$99r[C$99a++]=C$99T,C$99r[C$99a++]=C$99l-1,C$99r[C$99a++]=C$99l;C$99n.indiceStart=C$99a}}},C$99t._calculateJoins=function(C$99t,C$99h,C$99u,C$99_){for(var C$99d=0,C$99f=(0<C$99h&&(C$99d=1/C$99h),C$99t._paths),C$99e=C$99t._pathOffset,C$99p=C$99t._pathLength;C$99e<C$99p;C$99e++)for(var C$99i=C$99f[C$99e],C$99n=C$99i.points,C$99m=C$99n.length,C$99r=C$99n[C$99m-1],C$99s=C$99n[0],C$99o=C$99i.nbevel=0;C$99o<C$99m;C$99o++){var C$99a=C$99r.dy,C$99c=-C$99r.dx,C$99l=C$99s.dy,C$99y=-C$99s.dx;C$99s.dmx=.5*(C$99a+C$99l),C$99s.dmy=.5*(C$99c+C$99y),1e-6<(C$99a=C$99s.dmx*C$99s.dmx+C$99s.dmy*C$99s.dmy)&&(600<(C$99l=1/C$99a)&&(C$99l=600),C$99s.dmx*=C$99l,C$99s.dmy*=C$99l),0<C$99s.dx*C$99r.dy-C$99r.dx*C$99s.dy&&(C$99s.flags|=C$99L.PT_LEFT),C$99a*(C$99c=C$99N(11,C$99g(C$99r.len,C$99s.len)*C$99d))*C$99c<1&&(C$99s.flags|=C$99L.PT_INNERBEVEL),C$99s.flags&C$99L.PT_CORNER&&(C$99a*C$99_*C$99_<1||C$99u===C$99V.BEVEL||C$99u===C$99V.ROUND)&&(C$99s.flags|=C$99L.PT_BEVEL),0!=(C$99s.flags&(C$99L.PT_BEVEL|C$99L.PT_INNERBEVEL))&&C$99i.nbevel++,C$99r=C$99s,C$99s=C$99n[C$99o+1]}},C$99t._flattenPaths=function(C$99t){for(var C$99e=C$99t._paths,C$99i=C$99t._pathOffset,C$99n=C$99t._pathLength;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i],C$99s=C$99r.points,C$99o=C$99s[C$99s.length-1],C$99a=C$99s[0];2<C$99s.length&&C$99o.equals(C$99a)&&(C$99r.closed=!0,C$99s.pop(),C$99o=C$99s[C$99s.length-1]);for(var C$99c=0,C$99h=C$99s.length;C$99c<C$99h;C$99c++){var C$99l=C$99a.sub(C$99o);C$99o.len=C$99l.mag(),(C$99l.x||C$99l.y)&&C$99l.normalizeSelf(),C$99o.dx=C$99l.x,C$99o.dy=C$99l.y,C$99o=C$99a,C$99a=C$99s[C$99c+1]}}},C$99t._chooseBevel=function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s,C$99o,C$99a,C$99c=C$99i.x,C$99l=C$99i.y;return 0!==C$99t?(C$99r=C$99c+C$99e.dy*C$99n,C$99s=C$99l-C$99e.dx*C$99n,C$99o=C$99c+C$99i.dy*C$99n,C$99a=C$99l-C$99i.dx*C$99n):(C$99r=C$99o=C$99c+C$99i.dmx*C$99n,C$99s=C$99a=C$99l+C$99i.dmy*C$99n),[C$99r,C$99s,C$99o,C$99a]},C$99t._buttCapStart=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99t.x-C$99e*C$99r,C$99t=C$99t.y-C$99i*C$99r,C$99r=C$99i,C$99i=-C$99e;this._vset(C$99s+C$99r*C$99n,C$99t+C$99i*C$99n),this._vset(C$99s-C$99r*C$99n,C$99t-C$99i*C$99n)},C$99t._buttCapEnd=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99t.x+C$99e*C$99r,C$99t=C$99t.y+C$99i*C$99r,C$99r=C$99i,C$99i=-C$99e;this._vset(C$99s+C$99r*C$99n,C$99t+C$99i*C$99n),this._vset(C$99s-C$99r*C$99n,C$99t-C$99i*C$99n)},C$99t._roundCapStart=function(C$99t,C$99e,C$99i,C$99n,C$99h){for(var C$99r=C$99t.x,C$99s=C$99t.y,C$99o=C$99i,C$99a=-C$99e,C$99c=0;C$99c<C$99h;C$99c++){var C$99l=C$99c/(C$99h-1)*C$99F,C$99u=C$99E(C$99l)*C$99n,C$99l=C$99M(C$99l)*C$99n;this._vset(C$99r-C$99o*C$99u-C$99e*C$99l,C$99s-C$99a*C$99u-C$99i*C$99l),this._vset(C$99r,C$99s)}this._vset(C$99r+C$99o*C$99n,C$99s+C$99a*C$99n),this._vset(C$99r-C$99o*C$99n,C$99s-C$99a*C$99n)},C$99t._roundCapEnd=function(C$99t,C$99e,C$99i,C$99n,C$99h){var C$99r=C$99t.x,C$99s=C$99t.y,C$99o=C$99i,C$99a=-C$99e;this._vset(C$99r+C$99o*C$99n,C$99s+C$99a*C$99n),this._vset(C$99r-C$99o*C$99n,C$99s-C$99a*C$99n);for(var C$99c=0;C$99c<C$99h;C$99c++){var C$99l=C$99c/(C$99h-1)*C$99F,C$99u=C$99E(C$99l)*C$99n,C$99l=C$99M(C$99l)*C$99n;this._vset(C$99r,C$99s),this._vset(C$99r-C$99o*C$99u+C$99e*C$99l,C$99s-C$99a*C$99u+C$99i*C$99l)}},C$99t._roundJoin=function(C$99t,C$99e,C$99h,C$99i,C$99n){var C$99r=C$99t.dy,C$99s=-C$99t.dx,C$99u=C$99e.dy,C$99_=-C$99e.dx,C$99o=C$99e.x,C$99a=C$99e.y;if(0!=(C$99e.flags&C$99L.PT_LEFT)){for(var C$99c=this._chooseBevel(C$99e.flags&C$99L.PT_INNERBEVEL,C$99t,C$99e,C$99h),C$99l=C$99c[0],C$99d=C$99c[1],C$99f=C$99c[2],C$99c=C$99c[3],C$99p=C$99I(-C$99s,-C$99r),C$99m=C$99I(-C$99_,-C$99u),C$99y=(C$99p<C$99m&&(C$99m-=2*C$99F),this._vset(C$99l,C$99d),this._vset(C$99o-C$99r*C$99i,C$99e.y-C$99s*C$99i),C$99R(C$99k((C$99p-C$99m)/C$99F)*C$99n,2,C$99n)),C$99g=0;C$99g<C$99y;C$99g++){var C$99v=C$99p+C$99g/(C$99y-1)*(C$99m-C$99p),C$99x=C$99o+C$99E(C$99v)*C$99i,C$99v=C$99a+C$99M(C$99v)*C$99i;this._vset(C$99o,C$99a),this._vset(C$99x,C$99v)}this._vset(C$99f,C$99c),this._vset(C$99o-C$99u*C$99i,C$99a-C$99_*C$99i)}else{for(var C$99l=this._chooseBevel(C$99e.flags&C$99L.PT_INNERBEVEL,C$99t,C$99e,-C$99i),C$99d=C$99l[0],C$99f=C$99l[1],C$99c=C$99l[2],C$99t=C$99l[3],C$99b=C$99I(C$99s,C$99r),C$99A=C$99I(C$99_,C$99u),C$99C=(C$99A<C$99b&&(C$99A+=2*C$99F),this._vset(C$99o+C$99r*C$99i,C$99a+C$99s*C$99i),this._vset(C$99d,C$99f),C$99R(C$99k((C$99A-C$99b)/C$99F)*C$99n,2,C$99n)),C$99S=0;C$99S<C$99C;C$99S++){var C$99T=C$99b+C$99S/(C$99C-1)*(C$99A-C$99b),C$99w=C$99o+C$99E(C$99T)*C$99h,C$99T=C$99a+C$99M(C$99T)*C$99h;this._vset(C$99w,C$99T),this._vset(C$99o,C$99a)}this._vset(C$99o+C$99u*C$99i,C$99a+C$99_*C$99i),this._vset(C$99c,C$99t)}},C$99t._bevelJoin=function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s,C$99o,C$99a,C$99c=C$99t.dy,C$99l=-C$99t.dx,C$99h=C$99e.dy,C$99u=-C$99e.dx;C$99e.flags&C$99L.PT_LEFT?(C$99r=(C$99a=this._chooseBevel(C$99e.flags&C$99L.PT_INNERBEVEL,C$99t,C$99e,C$99i))[0],C$99s=C$99a[1],C$99o=C$99a[2],C$99a=C$99a[3],this._vset(C$99r,C$99s),this._vset(C$99e.x-C$99c*C$99n,C$99e.y-C$99l*C$99n),this._vset(C$99o,C$99a),this._vset(C$99e.x-C$99h*C$99n,C$99e.y-C$99u*C$99n)):(C$99s=(C$99r=this._chooseBevel(C$99e.flags&C$99L.PT_INNERBEVEL,C$99t,C$99e,-C$99n))[0],C$99o=C$99r[1],C$99a=C$99r[2],C$99t=C$99r[3],this._vset(C$99e.x+C$99c*C$99i,C$99e.y+C$99l*C$99i),this._vset(C$99s,C$99o),this._vset(C$99e.x+C$99h*C$99i,C$99e.y+C$99u*C$99i),this._vset(C$99a,C$99t))},C$99t._vset=function(C$99t,C$99e){var C$99i=this._buffer,C$99n=C$99i.meshbuffer,C$99r=3*C$99i.vertexStart,C$99s=C$99n._vData,C$99o=C$99n._uintVData;C$99s[C$99r]=C$99t,C$99s[1+C$99r]=C$99e,C$99o[2+C$99r]=this._curColor,C$99i.vertexStart++,C$99n._dirty=!0};var C$99_,C$99i=C$99d;function C$99d(C$99t){C$99t=C$99_.call(this,C$99t)||this;return C$99t._buffer=null,C$99t._buffers=[],C$99t._bufferOffset=0,C$99t}C$99e.default=C$99i,C$99r.default.register(cc.Graphics,C$99i),C$99n.exports=C$99e.default},{"../../../../../renderer/core/input-assembler":302,"../../../../graphics/graphics":131,"../../../../graphics/types":134,"../../../assembler":217,"../../../index":220,"../../mesh-buffer":247,"../../vertex-format":252,"./earcut":229,"./impl":230}],232:[function(C$99t,C$99e,C$99i){"use strict";cc.assemblers={},C$99t("./sprite"),C$99t("./mask-assembler"),C$99t("./graphics"),C$99t("./label"),C$99t("./motion-streak")},{"./graphics":231,"./label":236,"./mask-assembler":237,"./motion-streak":238,"./sprite":245}],233:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=(C$99t=C$99t("../../../../utils/label/bmfont"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99s,C$99o,C$99b=0,C$99t=(C$99s=C$99t.default,C$99t=C$99s,(C$99o=C$99a).prototype=Object.create(C$99t.prototype),(C$99o.prototype.constructor=C$99o).__proto__=C$99t,C$99n(C$99a),(C$99o=C$99a.prototype).initData=function(){this._renderData.createFlexData(0,4,6,this.getVfmt())},C$99o._reserveQuads=function(C$99t,C$99e){for(var C$99i=4*C$99e,C$99e=6*C$99e,C$99n=this._renderData._flexBuffer,C$99r=(C$99n.reserve(C$99i,C$99e),C$99n.used(C$99i,C$99e),this._renderData.iDatas[0]),C$99s=0,C$99o=0,C$99a=C$99e;C$99s<C$99a;C$99s+=6,C$99o+=4)C$99r[C$99s]=C$99o,C$99r[C$99s+1]=C$99o+1,C$99r[C$99s+2]=C$99o+2,C$99r[C$99s+3]=C$99o+1,C$99r[C$99s+4]=C$99o+3,C$99r[C$99s+5]=C$99o+2;C$99b=0},C$99o._quadsUpdated=function(C$99t){C$99b=0,this._renderData._flexBuffer.used(this.verticesCount,this.indicesCount)},C$99o._getColor=function(C$99t){return C$99t.node._color._val},C$99o.appendQuad=function(C$99h,C$99t,C$99e,C$99u,C$99_,C$99d,C$99f){for(var C$99i,C$99n,C$99r,C$99s,C$99o=this._renderData,C$99a=C$99o.vDatas[0],C$99p=C$99o.uintVDatas[0],C$99o=(this.verticesCount+=4,this.indicesCount=this.verticesCount/2*3,C$99t.width),C$99t=C$99t.height,C$99m=C$99e.width,C$99y=C$99e.height,C$99g=this._getColor(C$99h),C$99c=this.floatsPerVert,C$99l=C$99b+this.uvOffset,C$99v=(C$99u?(C$99i=C$99e.x/C$99o,C$99r=(C$99e.x+C$99y)/C$99o,C$99n=(C$99e.y+C$99m)/C$99t,C$99s=C$99e.y/C$99t,C$99a[C$99l]=C$99i,C$99a[C$99l+1]=C$99s,C$99a[C$99l+=C$99c]=C$99i,C$99a[C$99l+1]=C$99n,C$99a[C$99l+=C$99c]=C$99r,C$99a[C$99l+1]=C$99s,C$99a[C$99l+=C$99c]=C$99r,C$99a[C$99l+1]=C$99n):(C$99i=C$99e.x/C$99o,C$99r=(C$99e.x+C$99m)/C$99o,C$99n=(C$99e.y+C$99y)/C$99t,C$99s=C$99e.y/C$99t,C$99a[C$99l]=C$99i,C$99a[C$99l+1]=C$99n,C$99a[C$99l+=C$99c]=C$99r,C$99a[C$99l+1]=C$99n,C$99a[C$99l+=C$99c]=C$99i,C$99a[C$99l+1]=C$99s,C$99a[C$99l+=C$99c]=C$99r,C$99a[C$99l+1]=C$99s),this.appendVerts(C$99h,C$99b,C$99i=C$99_,C$99r=C$99_+C$99m*C$99f,C$99n=C$99d-C$99y*C$99f,C$99s=C$99d),C$99b+this.colorOffset),C$99x=0;C$99x<4;C$99x++)C$99p[C$99v]=C$99g,C$99v+=C$99c;C$99b+=4*this.floatsPerVert},C$99o.appendVerts=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=this._local,C$99a=this.floatsPerVert;C$99o[C$99e]=C$99i,C$99o[C$99e+1]=C$99r,C$99o[C$99e+=C$99a]=C$99n,C$99o[C$99e+1]=C$99r,C$99o[C$99e+=C$99a]=C$99i,C$99o[C$99e+1]=C$99s,C$99o[C$99e+=C$99a]=C$99n,C$99o[C$99e+1]=C$99s},C$99o.updateWorldVerts=function(C$99t){for(var C$99t=C$99t.node._worldMatrix.m,C$99e=C$99t[0],C$99i=C$99t[1],C$99n=C$99t[4],C$99r=C$99t[5],C$99h=C$99t[12],C$99u=C$99t[13],C$99s=this._local,C$99o=this._renderData.vDatas[0],C$99_=this.floatsPerVert,C$99a=0;C$99a<C$99s.length;C$99a+=C$99_){var C$99c=C$99s[C$99a],C$99l=C$99s[C$99a+1];C$99o[C$99a]=C$99c*C$99e+C$99l*C$99n+C$99h,C$99o[C$99a+1]=C$99c*C$99i+C$99l*C$99r+C$99u}},C$99a);function C$99a(){return C$99s.apply(this,arguments)||this}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../../../../utils/label/bmfont":224}],234:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99i.__esModule=!0,C$99i.default=void 0;C$99t("../../../../../platform/js"),C$99t("./bmfont");var C$99s,C$99o,C$99t=C$99t("../../../../utils/label/letter-font"),C$99a=cc.color(255,255,255,255),C$99t=(C$99t=C$99s=C$99t,(C$99o=C$99c).prototype=Object.create(C$99t.prototype),(C$99o.prototype.constructor=C$99o).__proto__=C$99t,C$99n(C$99c),(C$99o=C$99c.prototype).createData=function(C$99t){return C$99t.requestRenderData()},C$99o._getColor=function(C$99t){return C$99a._fastSetA(C$99t.node._color.a),C$99a._val},C$99o.updateColor=function(C$99t){var C$99e=this._getColor(C$99t);C$99s.prototype.updateColor.call(this,C$99t,C$99e)},C$99c);function C$99c(){return C$99s.apply(this,arguments)||this}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../../../../../platform/js":209,"../../../../utils/label/letter-font":226,"./bmfont":233}],235:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99n=C$99t("../../../../utils/label/ttf"))&&C$99n.__esModule?C$99n:{default:C$99n};function C$99r(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99o,C$99l=C$99t("../../../../../components/CCLabelShadow"),C$99a=cc.color(255,255,255,255),C$99t=(C$99o=C$99n.default,C$99t=C$99o,(C$99n=C$99c).prototype=Object.create(C$99t.prototype),(C$99n.prototype.constructor=C$99n).__proto__=C$99t,C$99r(C$99c),(C$99n=C$99c.prototype).updateUVs=function(C$99t){for(var C$99e=this._renderData.vDatas[0],C$99i=C$99t._frame.uv,C$99n=this.uvOffset,C$99r=this.floatsPerVert,C$99s=0;C$99s<4;C$99s++){var C$99o=2*C$99s,C$99a=C$99r*C$99s+C$99n;C$99e[C$99a]=C$99i[C$99o],C$99e[C$99a+1]=C$99i[1+C$99o]}},C$99n.updateColor=function(C$99t){C$99a._fastSetA(C$99t.node._color.a);var C$99e=C$99a._val;C$99o.prototype.updateColor.call(this,C$99t,C$99e)},C$99n.updateVerts=function(C$99t){var C$99e,C$99i=C$99t.node,C$99n=C$99t._ttfTexture.width,C$99r=C$99t._ttfTexture.height,C$99s=C$99i.anchorX*C$99i.width,C$99o=C$99i.anchorY*C$99i.height,C$99a=C$99l&&C$99t.getComponent(C$99l),C$99c=(C$99a&&C$99a._enabled&&(C$99c=(C$99n-C$99i.width)/2,C$99e=(C$99r-C$99i.height)/2,-(C$99a=C$99a.offset).x>C$99c?C$99s+=C$99n-C$99i.width:C$99c>C$99a.x&&(C$99s+=C$99c-C$99a.x),-C$99a.y>C$99e?C$99o+=C$99r-C$99i.height:C$99e>C$99a.y&&(C$99o+=C$99e-C$99a.y)),this._local);C$99c[0]=-C$99s,C$99c[1]=-C$99o,C$99c[2]=C$99n-C$99s,C$99c[3]=C$99r-C$99o,this.updateUVs(C$99t),this.updateWorldVerts(C$99t)},C$99c);function C$99c(){return C$99o.apply(this,arguments)||this}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../../../../../components/CCLabelShadow":82,"../../../../utils/label/ttf":227}],236:[function(C$99t,C$99h,C$99u){"use strict";var C$99e=C$99i(C$99t("../../../assembler")),C$99n=C$99i(C$99t("../../../../components/CCLabel")),C$99r=C$99i(C$99t("./2d/ttf")),C$99s=C$99i(C$99t("./2d/bmfont")),C$99o=C$99i(C$99t("./2d/letter")),C$99a=C$99i(C$99t("./3d/ttf")),C$99c=C$99i(C$99t("./3d/bmfont")),C$99l=C$99i(C$99t("./3d/letter"));function C$99i(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}C$99n.default._canvasPool={pool:[],get:function(){var C$99t,C$99e,C$99i=this.pool.pop();return C$99i||(C$99e=(C$99t=document.createElement("canvas")).getContext("2d"),C$99i={canvas:C$99t,context:C$99e}),C$99i},put:function(C$99t){32<=this.pool.length||this.pool.push(C$99t)}},C$99e.default.register(cc.Label,{getConstructor:function(C$99t){var C$99e=C$99t.node.is3DNode,C$99i=(C$99e?C$99a:C$99r).default;return C$99t.font instanceof cc.BitmapFont?C$99i=(C$99e?C$99c:C$99s).default:C$99t.cacheMode===C$99n.default.CacheMode.CHAR&&(cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB?cc.warn("sorry, subdomain does not support CHAR mode currently!"):C$99i=(C$99e?C$99l:C$99o).default),C$99i},TTF:C$99r.default,Bmfont:C$99s.default,Letter:C$99o.default,TTF3D:C$99a.default,Bmfont3D:C$99c.default,Letter3D:C$99l.default})},{"../../../../components/CCLabel":80,"../../../assembler":217,"./2d/bmfont":233,"./2d/letter":234,"./2d/ttf":235,"./3d/bmfont":void 0,"./3d/letter":void 0,"./3d/ttf":void 0}],237:[function(C$99t,C$99o,C$99e){"use strict";C$99e.__esModule=!0,C$99e.MaskAssembler=void 0;var C$99i=(C$99i=C$99t("../../assembler"))&&C$99i.__esModule?C$99i:{default:C$99i};function C$99a(C$99i){return function(){var C$99t,C$99e=C$99n(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99n(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99n(C$99t){return(C$99n=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99l=C$99t("../../../components/CCMask"),C$99d=C$99t("../../render-flow"),C$99h=C$99t("./sprite/2d/simple"),C$99f=C$99t("./graphics"),C$99u=C$99t("../../../../renderer/gfx"),C$99p=C$99t("../vertex-format").vfmtPos,C$99_=[];function C$99m(){return 1<<C$99_.length-1}function C$99y(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99t=C$99t.effect,C$99o=C$99u.STENCIL_OP_KEEP,C$99a=C$99u.STENCIL_OP_KEEP;C$99t.setStencil(C$99u.STENCIL_ENABLE,C$99e,C$99n,C$99r,C$99i,C$99o,C$99a,C$99s)}function C$99g(C$99t){var C$99e=C$99u.DS_FUNC_EQUAL,C$99i=C$99u.STENCIL_OP_KEEP,C$99n=function(){for(var C$99t=0,C$99e=0;C$99e<C$99_.length;++C$99e)C$99t+=1<<C$99e;return C$99t}(),C$99r=C$99m(),C$99s=C$99_[C$99_.length-1];C$99y(C$99s._enableMaterial,C$99e,C$99i,C$99n,C$99n,C$99r),C$99t._flushMaterial(C$99s._enableMaterial)}C$99t=C$99c=C$99h,(C$99r=C$99s).prototype=Object.create(C$99t.prototype),(C$99r.prototype.constructor=C$99r).__proto__=C$99t,C$99a(C$99s),(C$99r=C$99s.prototype).updateRenderData=function(C$99t){C$99t._type===C$99l.Type.IMAGE_STENCIL?C$99t.spriteFrame?C$99h.prototype.updateRenderData.call(this,C$99t):C$99t.setMaterial(0,null):(C$99t._graphics.setMaterial(0,C$99t._materials[0]),C$99f.prototype.updateRenderData.call(C$99t._graphics._assembler,C$99t._graphics,C$99t._graphics))},C$99r.fillBuffers=function(C$99t,C$99e){var C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c;C$99t._type===C$99l.Type.IMAGE_STENCIL&&!C$99t.spriteFrame||(C$99c=C$99t,8<C$99_.length+1&&cc.errorID(9e3,8),C$99_.push(C$99c),C$99c=C$99t,C$99i=C$99e,C$99n=C$99u.DS_FUNC_NEVER,C$99r=C$99m(),C$99s=C$99c.inverted?C$99u.STENCIL_OP_REPLACE:C$99u.STENCIL_OP_ZERO,C$99y(C$99c._clearMaterial,C$99n,C$99s,C$99r,C$99r,C$99r),C$99n=C$99i.getBuffer("mesh",C$99p),C$99r=(C$99s=C$99n.request(4,6)).indiceOffset,C$99o=C$99s.byteOffset>>2,C$99s=C$99s.vertexOffset,C$99a=C$99n._vData,C$99n=C$99n._iData,C$99a[C$99o++]=-1,C$99a[C$99o++]=-1,C$99a[C$99o++]=-1,C$99a[C$99o++]=1,C$99a[C$99o++]=1,C$99a[C$99o++]=1,C$99a[C$99o++]=1,C$99a[+C$99o]=-1,C$99n[C$99r++]=C$99s,C$99n[C$99r++]=C$99s+3,C$99n[C$99r++]=C$99s+1,C$99n[C$99r++]=C$99s+1,C$99n[C$99r++]=C$99s+3,C$99n[+C$99r]=C$99s+2,C$99i.node=C$99i._dummyNode,C$99i.material=C$99c._clearMaterial,C$99i._flush(),C$99a=C$99t,C$99o=C$99e,C$99n=C$99u.DS_FUNC_NEVER,C$99r=C$99m(),C$99s=C$99a.inverted?C$99u.STENCIL_OP_ZERO:C$99u.STENCIL_OP_REPLACE,C$99y(C$99a._materials[0],C$99n,C$99s,C$99r,C$99r,C$99r),C$99o.material=C$99a._materials[0],C$99a._type===C$99l.Type.IMAGE_STENCIL?(C$99o.node=C$99o._dummyNode,C$99h.prototype.fillBuffers.call(C$99a._assembler,C$99a,C$99o),C$99o._flush()):(C$99o.node=C$99a.node,C$99f.prototype.fillBuffers.call(C$99a._graphics._assembler,C$99a._graphics,C$99o)),C$99g(C$99e)),C$99t.node._renderFlag|=C$99d.FLAG_UPDATE_RENDER_DATA},C$99r.postFillBuffers=function(C$99t,C$99e){var C$99i;C$99t._type===C$99l.Type.IMAGE_STENCIL&&!C$99t.spriteFrame||(C$99i=C$99t,C$99e=C$99e,0===C$99_.length&&cc.errorID(9001),C$99_.pop(),0===C$99_.length?C$99e._flushMaterial(C$99i._exitMaterial):C$99g(C$99e)),C$99t.node._renderFlag|=C$99d.FLAG_UPDATE_RENDER_DATA};var C$99c,C$99r,C$99t=C$99s;function C$99s(){return C$99c.apply(this,arguments)||this}C$99e.MaskAssembler=C$99t,C$99i.default.register(C$99l,C$99t)},{"../../../../renderer/gfx":312,"../../../components/CCMask":84,"../../assembler":217,"../../render-flow":221,"../vertex-format":252,"./graphics":231,"./sprite/2d/simple":242}],238:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99n=C$99t("../../assembler-2d"))&&C$99n.__esModule?C$99n:{default:C$99n};function C$99a(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99c=C$99t("../../../components/CCMotionStreak"),C$99f=C$99t("../../render-flow");function C$99A(C$99t,C$99e){this.point=C$99t||cc.v2(),this.dir=C$99e||cc.v2(),this.distance=0,this.time=0}C$99A.prototype.setPoint=function(C$99t,C$99e){this.point.x=C$99t,this.point.y=C$99e},C$99A.prototype.setDir=function(C$99t,C$99e){this.dir.x=C$99t,this.dir.y=C$99e};cc.v2(),cc.v2();var C$99C=cc.v2(),C$99S=cc.v2();C$99s=C$99n.default,C$99t=C$99s,(C$99n=C$99o).prototype=Object.create(C$99t.prototype),(C$99n.prototype.constructor=C$99n).__proto__=C$99t,C$99a(C$99o),(C$99n=C$99o.prototype).initData=function(){this._renderData.createFlexData(0,16,42)},C$99n.update=function(C$99t,C$99h){var C$99e,C$99u=C$99t._stroke/2,C$99i=C$99t.node._worldMatrix.m,C$99_=C$99i[12],C$99i=C$99i[13],C$99n=C$99t._points,C$99d=(1<C$99n.length&&((C$99r=C$99n[0].point.x-C$99_)*C$99r+(C$99r=C$99n[0].point.y-C$99i)*C$99r<C$99t.minSeg&&(C$99e=C$99n[0])),C$99e||(C$99e=new C$99A,C$99n.splice(0,0,C$99e)),C$99e.setPoint(C$99_,C$99i),C$99e.time=C$99t._fadeTime+C$99h,0);if(!(C$99n.length<2)){for(var C$99r=C$99t._color,C$99f=C$99r.r,C$99p=C$99r.g,C$99m=C$99r.b,C$99y=C$99r.a,C$99_=C$99n[1],C$99i=(C$99_.distance=C$99e.point.sub(C$99_.point,C$99S).mag(),C$99S.normalizeSelf(),C$99_.setDir(C$99S.x,C$99S.y),C$99e.setDir(C$99S.x,C$99S.y),this._renderData._flexBuffer),C$99s=(C$99i.reserve(2*C$99n.length,6*(C$99n.length-1)),C$99i.vData),C$99g=C$99i.uintVData,C$99v=C$99t._fadeTime,C$99x=!1,C$99o=C$99n.length-1;0<=C$99o;C$99o--){var C$99a=C$99n[C$99o],C$99b=C$99a.point,C$99c=C$99a.dir;if(C$99a.time-=C$99h,C$99a.time<0)C$99n.splice(C$99o,1);else{var C$99a=C$99a.time/C$99v,C$99l=C$99n[C$99o-1];if(!C$99x){if(!C$99l){C$99n.splice(C$99o,1);continue}C$99b.x=C$99l.point.x-C$99c.x*C$99a,C$99b.y=C$99l.point.y-C$99c.y*C$99a}C$99x=!0,C$99l=C$99c,(C$99c=C$99C).x=-C$99l.y,C$99c.y=C$99l.x;C$99c=(C$99a*C$99y<<24>>>0)+(C$99m<<16)+(C$99p<<8)+C$99f,C$99l=5*C$99d;C$99s[C$99l]=C$99b.x+C$99C.x*C$99u,C$99s[1+C$99l]=C$99b.y+C$99C.y*C$99u,C$99s[2+C$99l]=1,C$99s[3+C$99l]=C$99a,C$99g[4+C$99l]=C$99c,C$99s[C$99l+=5]=C$99b.x-C$99C.x*C$99u,C$99s[1+C$99l]=C$99b.y-C$99C.y*C$99u,C$99s[2+C$99l]=0,C$99s[3+C$99l]=C$99a,C$99g[4+C$99l]=C$99c,C$99d+=2}}C$99i.used(C$99d,C$99d<=2?0:3*(C$99d-2))}},C$99n.fillBuffers=function(C$99h,C$99t){for(var C$99e=this._renderData._flexBuffer,C$99i=C$99e.vData,C$99u=C$99e.usedVertices,C$99n=C$99e.usedIndices,C$99e=C$99e.usedVerticesFloats,C$99t=C$99t._meshBuffer,C$99n=C$99t.request(C$99u,C$99n),C$99r=C$99n.byteOffset>>2,C$99s=C$99t._vData,C$99o=(C$99i.length+C$99r>C$99s.length?C$99s.set(C$99i.subarray(0,C$99e),C$99r):C$99s.set(C$99i,C$99r),C$99t._iData),C$99a=C$99n.indiceOffset,C$99_=C$99n.vertexOffset,C$99c=0,C$99d=C$99u;C$99c<C$99d;C$99c+=2){var C$99l=C$99_+C$99c;C$99o[C$99a++]=C$99l,C$99o[C$99a++]=C$99l+2,C$99o[C$99a++]=C$99l+1,C$99o[C$99a++]=C$99l+1,C$99o[C$99a++]=C$99l+2,C$99o[C$99a++]=C$99l+3}C$99h.node._renderFlag|=C$99f.FLAG_UPDATE_RENDER_DATA};var C$99s,C$99t=C$99o;function C$99o(){return C$99s.apply(this,arguments)||this}(C$99i.default=C$99t).register(C$99c,C$99t),C$99e.exports=C$99i.default},{"../../../components/CCMotionStreak":85,"../../assembler-2d":215,"../../render-flow":221}],239:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99n=C$99t("../../../../assembler-2d"))&&C$99n.__esModule?C$99n:{default:C$99n};function C$99r(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99o,C$99x=C$99t("../../../../../components/CCSprite").FillType,C$99t=(C$99o=C$99n.default,C$99t=C$99o,(C$99n=C$99a).prototype=Object.create(C$99t.prototype),(C$99n.prototype.constructor=C$99n).__proto__=C$99t,C$99r(C$99a),(C$99n=C$99a.prototype).updateRenderData=function(C$99t){var C$99e,C$99i=C$99t._spriteFrame;this.packToDynamicAtlas(C$99t,C$99i),C$99t._vertsDirty&&(C$99i=C$99t._fillStart,(C$99e=C$99t._fillRange)<0&&(C$99i+=C$99e,C$99e=-C$99e),C$99e=(C$99e=1<(C$99e=C$99i+C$99e)?1:C$99e)<0?0:C$99e,C$99e=1<(C$99e=(C$99i=(C$99i=1<C$99i?1:C$99i)<0?0:C$99i)+(C$99e=(C$99e-=C$99i)<0?0:C$99e))?1:C$99e,this.updateUVs(C$99t,C$99i,C$99e),this.updateVerts(C$99t,C$99i,C$99e),C$99t._vertsDirty=!1)},C$99n.updateUVs=function(C$99h,C$99t,C$99e){var C$99u,C$99_,C$99i,C$99n,C$99r,C$99s,C$99d,C$99f,C$99p,C$99m,C$99y=C$99h._spriteFrame,C$99g=C$99y._texture.width,C$99v=C$99y._texture.height,C$99o=C$99y._rect,C$99a=(C$99y._rotated?(C$99u=C$99o.x/C$99g,C$99_=(C$99o.y+C$99o.width)/C$99v,C$99i=C$99r=C$99u,C$99d=C$99p=(C$99o.x+C$99o.height)/C$99g,C$99s=C$99m=C$99_,C$99n=C$99f=C$99o.y/C$99v):(C$99u=C$99o.x/C$99g,C$99_=(C$99o.y+C$99o.height)/C$99v,C$99i=C$99d=C$99u,C$99r=C$99p=(C$99o.x+C$99o.width)/C$99g,C$99n=C$99s=C$99_,C$99f=C$99m=C$99o.y/C$99v),this._renderData.vDatas[0]),C$99c=this.uvOffset,C$99l=this.floatsPerVert;switch(C$99h._fillType){case C$99x.HORIZONTAL:C$99a[C$99c]=C$99i+(C$99r-C$99i)*C$99t,C$99a[C$99c+1]=C$99n+(C$99s-C$99n)*C$99t,C$99a[C$99c+C$99l]=C$99i+(C$99r-C$99i)*C$99e,C$99a[C$99c+C$99l+1]=C$99n+(C$99s-C$99n)*C$99e,C$99a[C$99c+2*C$99l]=C$99d+(C$99p-C$99d)*C$99t,C$99a[C$99c+2*C$99l+1]=C$99f+(C$99m-C$99f)*C$99t,C$99a[C$99c+3*C$99l]=C$99d+(C$99p-C$99d)*C$99e,C$99a[C$99c+3*C$99l+1]=C$99f+(C$99m-C$99f)*C$99e;break;case C$99x.VERTICAL:C$99a[C$99c]=C$99i+(C$99d-C$99i)*C$99t,C$99a[C$99c+1]=C$99n+(C$99f-C$99n)*C$99t,C$99a[C$99c+C$99l]=C$99r+(C$99p-C$99r)*C$99t,C$99a[C$99c+C$99l+1]=C$99s+(C$99m-C$99s)*C$99t,C$99a[C$99c+2*C$99l]=C$99i+(C$99d-C$99i)*C$99e,C$99a[C$99c+2*C$99l+1]=C$99n+(C$99f-C$99n)*C$99e,C$99a[C$99c+3*C$99l]=C$99r+(C$99p-C$99r)*C$99e,C$99a[C$99c+3*C$99l+1]=C$99s+(C$99m-C$99s)*C$99e;break;default:cc.errorID(2626)}},C$99n.updateVerts=function(C$99t,C$99e,C$99i){var C$99n,C$99r=C$99t.node,C$99s=C$99r.width,C$99h=C$99r.height,C$99u=C$99r.anchorX*C$99s,C$99r=C$99r.anchorY*C$99h,C$99o=-C$99u,C$99a=-C$99r,C$99c=C$99s-C$99u,C$99l=C$99h-C$99r;switch(C$99t._fillType){case C$99x.HORIZONTAL:C$99n=C$99o+(C$99c-C$99o)*C$99i,C$99o=C$99o+(C$99c-C$99o)*C$99e,C$99c=C$99n;break;case C$99x.VERTICAL:C$99n=C$99a+(C$99l-C$99a)*C$99i,C$99a=C$99a+(C$99l-C$99a)*C$99e,C$99l=C$99n;break;default:cc.errorID(2626)}C$99s=this._local;C$99s[0]=C$99o,C$99s[1]=C$99a,C$99s[2]=C$99c,C$99s[3]=C$99l,this.updateWorldVerts(C$99t)},C$99a);function C$99a(){return C$99o.apply(this,arguments)||this}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../../../../../components/CCSprite":94,"../../../../assembler-2d":215}],240:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=(C$99t=C$99t("../../../../assembler-2d"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99s=C$99t.default,C$99t=C$99s,(C$99o=C$99a).prototype=Object.create(C$99t.prototype),(C$99o.prototype.constructor=C$99o).__proto__=C$99t,C$99n(C$99a),(C$99o=C$99a.prototype).initData=function(C$99t){this._renderData.createFlexData(0,4,6,this.getVfmt())},C$99o.updateRenderData=function(C$99t){this.packToDynamicAtlas(C$99t,C$99t._spriteFrame);var C$99e,C$99i=C$99t.spriteFrame;!C$99i||(C$99i=C$99i.vertices)&&(this.verticesCount=C$99i.x.length,this.indicesCount=C$99i.triangles.length,(C$99e=this._renderData._flexBuffer).reserve(this.verticesCount,this.indicesCount)&&(this.updateColor(C$99t),C$99t._vertsDirty=!0),C$99e.used(this.verticesCount,this.indicesCount),this.updateIndices(C$99i.triangles),C$99t._vertsDirty&&(this.updateUVs(C$99t),this.updateVerts(C$99t),this.updateWorldVerts(C$99t),C$99t._vertsDirty=!1))},C$99o.updateIndices=function(C$99t){this._renderData.iDatas[0].set(C$99t)},C$99o.updateUVs=function(C$99t){for(var C$99t=C$99t.spriteFrame.vertices,C$99e=C$99t.nu,C$99i=C$99t.nv,C$99n=this.uvOffset,C$99r=this.floatsPerVert,C$99s=this._renderData.vDatas[0],C$99o=0;C$99o<C$99e.length;C$99o++){var C$99a=C$99r*C$99o+C$99n;C$99s[C$99a]=C$99e[C$99o],C$99s[C$99a+1]=C$99i[C$99o]}},C$99o.updateVerts=function(C$99t){var C$99e=C$99t.node,C$99i=Math.abs(C$99e.width),C$99n=Math.abs(C$99e.height),C$99h=C$99e.anchorX*C$99i,C$99u=C$99e.anchorY*C$99n,C$99e=C$99t.spriteFrame,C$99r=C$99e.vertices,C$99s=C$99r.x,C$99_=C$99r.y,C$99r=C$99e._originalSize.width,C$99o=C$99e._originalSize.height,C$99d=C$99e._rect.width,C$99f=C$99e._rect.height,C$99p=C$99e._offset.x+(C$99r-C$99d)/2,C$99m=C$99e._offset.y+(C$99o-C$99f)/2,C$99y=C$99i/(C$99t.trim?C$99d:C$99r),C$99g=C$99n/(C$99t.trim?C$99f:C$99o),C$99a=this._local;if(C$99t.trim)for(var C$99c=0,C$99v=C$99s.length;C$99c<C$99v;C$99c++){var C$99x=2*C$99c;C$99a[C$99x]=(C$99s[C$99c]-C$99p)*C$99y-C$99h,C$99a[1+C$99x]=(C$99o-C$99_[C$99c]-C$99m)*C$99g-C$99u}else for(var C$99l=0,C$99b=C$99s.length;C$99l<C$99b;C$99l++){var C$99A=2*C$99l;C$99a[C$99A]=C$99s[C$99l]*C$99y-C$99h,C$99a[1+C$99A]=(C$99o-C$99_[C$99l])*C$99g-C$99u}},C$99o.updateWorldVerts=function(C$99t){for(var C$99t=C$99t.node._worldMatrix.m,C$99e=C$99t[0],C$99i=C$99t[1],C$99n=C$99t[4],C$99h=C$99t[5],C$99u=C$99t[12],C$99_=C$99t[13],C$99r=this._local,C$99s=this._renderData.vDatas[0],C$99o=this.floatsPerVert,C$99a=0,C$99d=this.verticesCount;C$99a<C$99d;C$99a++){var C$99c=C$99r[2*C$99a],C$99l=C$99r[2*C$99a+1];C$99s[C$99o*C$99a]=C$99c*C$99e+C$99l*C$99n+C$99u,C$99s[C$99o*C$99a+1]=C$99c*C$99i+C$99l*C$99h+C$99_}};var C$99s,C$99o,C$99t=C$99a;function C$99a(){return C$99s.apply(this,arguments)||this}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../../../../assembler-2d":215}],241:[function(C$99t,C$99n,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;C$99t=(C$99t=C$99t("../../../../assembler-2d"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99r(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99p=2*Math.PI,C$99m=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],C$99y=[0,0,0,0],C$99g=[0,0,0,0,0,0,0,0],C$99A=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],C$99C=[cc.v2(0,0),cc.v2(0,0),cc.v2(0,0),cc.v2(0,0)],C$99v=cc.v2(0,0),C$99x=[];function C$99S(C$99t,C$99e,C$99i,C$99h,C$99n,C$99r,C$99s){var C$99o,C$99a,C$99c=Math.sin(C$99r),C$99l=Math.cos(C$99r);0!==Math.cos(C$99r)&&(C$99o=C$99c/C$99l,0<(C$99t-C$99n.x)*C$99l&&(C$99a=C$99n.y+C$99o*(C$99t-C$99n.x),C$99s[0].x=C$99t,C$99s[0].y=C$99a),0<(C$99e-C$99n.x)*C$99l&&(C$99t=C$99n.y+C$99o*(C$99e-C$99n.x),C$99s[2].x=C$99e,C$99s[2].y=C$99t)),0!==Math.sin(C$99r)&&(C$99a=C$99l/C$99c,0<(C$99h-C$99n.y)*C$99c&&(C$99o=C$99n.x+C$99a*(C$99h-C$99n.y),C$99s[3].x=C$99o,C$99s[3].y=C$99h),0<(C$99i-C$99n.y)*C$99c&&(C$99e=C$99n.x+C$99a*(C$99i-C$99n.y),C$99s[1].x=C$99e,C$99s[1].y=C$99i))}function C$99_(C$99t,C$99e){var C$99i=C$99e.x-C$99t.x,C$99e=C$99e.y-C$99t.y;if(0!=C$99i||0!=C$99e){if(0==C$99i)return 0<C$99e?.5*Math.PI:1.5*Math.PI;C$99t=Math.atan(C$99e/C$99i);return C$99i<0&&(C$99t+=Math.PI),C$99t}}C$99b=C$99t.default,C$99t=C$99b,(C$99i=C$99o).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99r(C$99o),(C$99i=C$99o.prototype).initData=function(C$99t){this._renderData.createFlexData(0,4,6,this.getVfmt()),this.updateIndices()},C$99i.updateRenderData=function(C$99t){C$99b.prototype.updateRenderData.call(this,C$99t);var C$99h,C$99u,C$99_,C$99d,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99f=C$99t.spriteFrame;if(this.packToDynamicAtlas(C$99t,C$99f),C$99t._vertsDirty){var C$99c=C$99t._fillStart,C$99l=C$99t._fillRange;for(C$99l<0&&(C$99c+=C$99l,C$99l=-C$99l);1<=C$99c;)--C$99c;for(;C$99c<0;)C$99c+=1;C$99c*=C$99p,C$99l*=C$99p,C$99i=(C$99s=(C$99e=C$99t).node).width,C$99n=C$99s.height,C$99r=C$99s.anchorX*C$99i,C$99s=C$99s.anchorY*C$99n,C$99o=-C$99r,C$99a=-C$99s,C$99i-=C$99r,C$99r=C$99n-C$99s,(C$99n=C$99y)[0]=C$99o,C$99n[1]=C$99a,C$99n[2]=C$99i,C$99n[3]=C$99r,C$99s=C$99e._fillCenter,C$99e=C$99v.x=Math.min(Math.max(0,C$99s.x),1)*(C$99i-C$99o)+C$99o,C$99s=C$99v.y=Math.min(Math.max(0,C$99s.y),1)*(C$99r-C$99a)+C$99a,C$99m[0].x=C$99m[3].x=C$99o,C$99m[1].x=C$99m[2].x=C$99i,C$99m[0].y=C$99m[1].y=C$99a,C$99m[2].y=C$99m[3].y=C$99r,C$99e!==C$99n[C$99x.length=0]&&(C$99x[0]=[3,0]),C$99e!==C$99n[2]&&(C$99x[2]=[1,2]),C$99s!==C$99n[1]&&(C$99x[1]=[0,1]),C$99s!==C$99n[3]&&(C$99x[3]=[2,3]),C$99o=C$99f._texture.width,C$99i=C$99f._texture.height,C$99a=C$99f._rect,C$99r=C$99g,C$99f._rotated?(C$99h=C$99a.x/C$99o,C$99u=(C$99a.x+C$99a.height)/C$99o,C$99_=C$99a.y/C$99i,C$99d=(C$99a.y+C$99a.width)/C$99i,C$99r[0]=C$99r[2]=C$99h,C$99r[4]=C$99r[6]=C$99u,C$99r[3]=C$99r[7]=C$99d,C$99r[1]=C$99r[5]=C$99_):(C$99h=C$99a.x/C$99o,C$99u=(C$99a.x+C$99a.width)/C$99o,C$99_=C$99a.y/C$99i,C$99d=(C$99a.y+C$99a.height)/C$99i,C$99r[0]=C$99r[4]=C$99h,C$99r[2]=C$99r[6]=C$99u,C$99r[1]=C$99r[3]=C$99d,C$99r[5]=C$99r[7]=C$99_),C$99S(C$99y[0],C$99y[2],C$99y[1],C$99y[3],C$99v,C$99c,C$99A),C$99S(C$99y[0],C$99y[2],C$99y[1],C$99y[3],C$99v,C$99c+C$99l,C$99C),this.updateVerts(C$99t,C$99c,C$99l),C$99t._vertsDirty=!1}},C$99i.updateVerts=function(C$99t,C$99e,C$99h){for(var C$99i=C$99e+C$99h,C$99n=this._local,C$99r=C$99n.length=0,C$99s=3*this.floatsPerVert,C$99o=0;C$99o<4;++C$99o){var C$99a=C$99x[C$99o];if(C$99a)if(C$99p<=C$99h)C$99n.length=C$99r+C$99s,this._generateTriangle(C$99n,C$99r,C$99v,C$99m[C$99a[0]],C$99m[C$99a[1]]),C$99r+=C$99s;else{var C$99c=C$99_(C$99v,C$99m[C$99a[0]]),C$99l=C$99_(C$99v,C$99m[C$99a[1]]);C$99l<C$99c&&(C$99l+=C$99p),C$99c-=C$99p,C$99l-=C$99p;for(var C$99u=0;C$99u<3;++C$99u)C$99i<=C$99c||(C$99e<=C$99c?(C$99n.length=C$99r+C$99s,C$99i<=C$99l?this._generateTriangle(C$99n,C$99r,C$99v,C$99m[C$99a[0]],C$99C[C$99o]):this._generateTriangle(C$99n,C$99r,C$99v,C$99m[C$99a[0]],C$99m[C$99a[1]]),C$99r+=C$99s):C$99l<=C$99e||(C$99l<=C$99i?(C$99n.length=C$99r+C$99s,this._generateTriangle(C$99n,C$99r,C$99v,C$99A[C$99o],C$99m[C$99a[1]])):(C$99n.length=C$99r+C$99s,this._generateTriangle(C$99n,C$99r,C$99v,C$99A[C$99o],C$99C[C$99o])),C$99r+=C$99s)),C$99c+=C$99p,C$99l+=C$99p}}this.allocWorldVerts(C$99t),this.updateWorldVerts(C$99t)},C$99i.allocWorldVerts=function(C$99t){for(var C$99e=C$99t.node._color._val,C$99t=this._renderData,C$99i=this.floatsPerVert,C$99n=this._local,C$99r=C$99n.length/C$99i,C$99s=(this.verticesCount=this.indicesCount=C$99r,C$99t._flexBuffer),C$99o=(C$99s.reserve(C$99r,C$99r)&&this.updateIndices(),C$99s.used(this.verticesCount,this.indicesCount),C$99t.vDatas[0]),C$99a=C$99t.uintVDatas[0],C$99h=this.uvOffset,C$99c=0;C$99c<C$99n.length;C$99c+=C$99i){var C$99l=C$99c+C$99h;C$99o[C$99l]=C$99n[C$99l],C$99o[C$99l+1]=C$99n[C$99l+1],C$99a[C$99l+2]=C$99e}},C$99i.updateIndices=function(){for(var C$99t=this._renderData.iDatas[0],C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e]=C$99e},C$99i.updateWorldVerts=function(C$99t){for(var C$99t=C$99t.node._worldMatrix.m,C$99e=C$99t[0],C$99i=C$99t[1],C$99n=C$99t[4],C$99r=C$99t[5],C$99h=C$99t[12],C$99u=C$99t[13],C$99s=this._local,C$99o=this._renderData.vDatas[0],C$99_=this.floatsPerVert,C$99a=0;C$99a<C$99s.length;C$99a+=C$99_){var C$99c=C$99s[C$99a],C$99l=C$99s[C$99a+1];C$99o[C$99a]=C$99c*C$99e+C$99l*C$99n+C$99h,C$99o[C$99a+1]=C$99c*C$99i+C$99l*C$99r+C$99u}},C$99i._generateTriangle=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99y[0],C$99o=C$99y[1],C$99a=C$99y[2],C$99h=C$99y[3],C$99c=this.floatsPerVert,C$99u=(C$99t[C$99e]=C$99i.x,C$99t[C$99e+1]=C$99i.y,C$99t[C$99e+C$99c]=C$99n.x,C$99t[C$99e+C$99c+1]=C$99n.y,C$99t[C$99e+2*C$99c]=C$99r.x,C$99t[C$99e+2*C$99c+1]=C$99r.y,this.uvOffset),C$99l=(C$99i.x-C$99s)/(C$99a-C$99s),C$99i=(C$99i.y-C$99o)/(C$99h-C$99o);this._generateUV(C$99l,C$99i,C$99t,C$99e+C$99u),C$99l=(C$99n.x-C$99s)/(C$99a-C$99s),C$99i=(C$99n.y-C$99o)/(C$99h-C$99o),this._generateUV(C$99l,C$99i,C$99t,C$99e+C$99c+C$99u),C$99l=(C$99r.x-C$99s)/(C$99a-C$99s),C$99i=(C$99r.y-C$99o)/(C$99h-C$99o),this._generateUV(C$99l,C$99i,C$99t,C$99e+2*C$99c+C$99u)},C$99i._generateUV=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99g[0]+(C$99g[2]-C$99g[0])*C$99t,C$99s=C$99g[1]+(C$99g[3]-C$99g[1])*C$99t,C$99o=C$99g[5]+(C$99g[7]-C$99g[5])*C$99t;C$99i[C$99n]=C$99r+(C$99g[4]+(C$99g[6]-C$99g[4])*C$99t-C$99r)*C$99e,C$99i[C$99n+1]=C$99s+(C$99o-C$99s)*C$99e};var C$99b,C$99i,C$99t=C$99o;function C$99o(){return C$99b.apply(this,arguments)||this}C$99e.default=C$99t,C$99n.exports=C$99e.default},{"../../../../assembler-2d":215}],242:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=(C$99t=C$99t("../../../../assembler-2d"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99s=C$99t.default,C$99t=C$99s,(C$99o=C$99a).prototype=Object.create(C$99t.prototype),(C$99o.prototype.constructor=C$99o).__proto__=C$99t,C$99n(C$99a),(C$99o=C$99a.prototype).updateRenderData=function(C$99t){this.packToDynamicAtlas(C$99t,C$99t._spriteFrame),C$99t._vertsDirty&&(this.updateUVs(C$99t),this.updateVerts(C$99t),C$99t._vertsDirty=!1)},C$99o.updateUVs=function(C$99t){for(var C$99e=C$99t._spriteFrame.uv,C$99i=this.uvOffset,C$99n=this.floatsPerVert,C$99r=this._renderData.vDatas[0],C$99s=0;C$99s<4;C$99s++){var C$99o=2*C$99s,C$99a=C$99n*C$99s+C$99i;C$99r[C$99a]=C$99e[C$99o],C$99r[C$99a+1]=C$99e[1+C$99o]}},C$99o.updateVerts=function(C$99t){var C$99e,C$99h,C$99i,C$99n,C$99r,C$99u,C$99_,C$99d,C$99s=C$99t.node,C$99o=C$99s.width,C$99a=C$99s.height,C$99c=C$99s.anchorX*C$99o,C$99s=C$99s.anchorY*C$99a,C$99l=(C$99o=C$99t.trim?(C$99u=-C$99c,C$99_=-C$99s,C$99d=C$99o-C$99c,C$99a-C$99s):(C$99n=(C$99i=C$99t.spriteFrame)._originalSize.width,C$99e=C$99i._originalSize.height,C$99l=C$99i._rect.width,C$99h=C$99i._rect.height,C$99r=(C$99i=C$99i._offset).x+(C$99n-C$99l)/2,C$99l=C$99i.x-(C$99n-C$99l)/2,C$99u=C$99r*(C$99r=C$99o/C$99n)-C$99c,C$99_=(C$99i.y+(C$99e-C$99h)/2)*(C$99n=C$99a/C$99e)-C$99s,C$99d=C$99o+C$99l*C$99r-C$99c,C$99a+(C$99i.y-(C$99e-C$99h)/2)*C$99n-C$99s),this._local);C$99l[0]=C$99u,C$99l[1]=C$99_,C$99l[2]=C$99d,C$99l[3]=C$99o,this.updateWorldVerts(C$99t)};var C$99s,C$99o,C$99t=C$99a;function C$99a(){return C$99s.apply(this,arguments)||this}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../../../../assembler-2d":215}],243:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=(C$99t=C$99t("../../../../assembler-2d"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99s=C$99t.default,C$99t=C$99s,(C$99o=C$99a).prototype=Object.create(C$99t.prototype),(C$99o.prototype.constructor=C$99o).__proto__=C$99t,C$99n(C$99a),(C$99o=C$99a.prototype).initData=function(C$99t){if(!(0<this._renderData.meshCount)){this._renderData.createData(0,this.verticesFloats,this.indicesCount);for(var C$99e=this._renderData.iDatas[0],C$99i=0,C$99n=0;C$99n<3;++C$99n)for(var C$99r=0;C$99r<3;++C$99r){var C$99s=4*C$99n+C$99r;C$99e[C$99i++]=C$99s,C$99e[C$99i++]=C$99s+1,C$99e[C$99i++]=C$99s+4,C$99e[C$99i++]=C$99s+1,C$99e[C$99i++]=C$99s+5,C$99e[C$99i++]=C$99s+4}}},C$99o.initLocal=function(){this._local=[],this._local.length=8},C$99o.updateRenderData=function(C$99t){var C$99e=C$99t._spriteFrame;this.packToDynamicAtlas(C$99t,C$99e),C$99t._vertsDirty&&(this.updateUVs(C$99t),this.updateVerts(C$99t),C$99t._vertsDirty=!1)},C$99o.updateVerts=function(C$99t){var C$99e=C$99t.node,C$99i=C$99e.width,C$99n=C$99e.height,C$99r=C$99e.anchorX*C$99i,C$99e=C$99e.anchorY*C$99n,C$99s=C$99t.spriteFrame,C$99o=C$99s.insetLeft,C$99a=C$99s.insetRight,C$99c=C$99s.insetTop,C$99s=C$99s.insetBottom,C$99h=C$99i-C$99o-C$99a,C$99u=C$99n-C$99c-C$99s,C$99a=C$99i/(C$99o+C$99a),C$99c=C$99n/(C$99c+C$99s),C$99a=isNaN(C$99a)||1<C$99a?1:C$99a,C$99c=isNaN(C$99c)||1<C$99c?1:C$99c,C$99h=C$99h<0?0:C$99h,C$99u=C$99u<0?0:C$99u,C$99l=this._local;C$99l[0]=-C$99r,C$99l[1]=-C$99e,C$99l[2]=C$99o*C$99a-C$99r,C$99l[3]=C$99s*C$99c-C$99e,C$99l[4]=C$99l[2]+C$99h,C$99l[5]=C$99l[3]+C$99u,C$99l[6]=C$99i-C$99r,C$99l[7]=C$99n-C$99e,this.updateWorldVerts(C$99t)},C$99o.updateUVs=function(C$99t){for(var C$99e=this._renderData.vDatas[0],C$99i=C$99t.spriteFrame.uvSliced,C$99n=this.uvOffset,C$99r=this.floatsPerVert,C$99s=0;C$99s<4;++C$99s)for(var C$99o=0;C$99o<4;++C$99o){var C$99a=4*C$99s+C$99o,C$99c=C$99i[C$99a],C$99a=C$99a*C$99r;C$99e[C$99a+C$99n]=C$99c.u,C$99e[C$99a+C$99n+1]=C$99c.v}},C$99o.updateWorldVerts=function(C$99t){for(var C$99t=C$99t.node._worldMatrix.m,C$99e=C$99t[0],C$99i=C$99t[1],C$99h=C$99t[4],C$99u=C$99t[5],C$99_=C$99t[12],C$99d=C$99t[13],C$99n=this._local,C$99r=this._renderData.vDatas[0],C$99f=this.floatsPerVert,C$99s=0;C$99s<4;++C$99s)for(var C$99o=C$99n[2*C$99s+1],C$99a=0;C$99a<4;++C$99a){var C$99c=C$99n[2*C$99a],C$99l=(4*C$99s+C$99a)*C$99f;C$99r[C$99l]=C$99c*C$99e+C$99o*C$99h+C$99_,C$99r[1+C$99l]=C$99c*C$99i+C$99o*C$99u+C$99d}};var C$99s,C$99o,C$99t=C$99a;function C$99a(){return C$99s.apply(this,arguments)||this}C$99i.default=C$99t,Object.assign(C$99t.prototype,{verticesCount:16,indicesCount:54}),C$99e.exports=C$99i.default},{"../../../../assembler-2d":215}],244:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=(C$99t=C$99t("../../../../assembler-2d"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99i){return function(){var C$99t,C$99e=C$99r(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99r(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99r(C$99t){return(C$99r=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99s=C$99t.default,C$99t=C$99s,(C$99o=C$99a).prototype=Object.create(C$99t.prototype),(C$99o.prototype.constructor=C$99o).__proto__=C$99t,C$99n(C$99a),(C$99o=C$99a.prototype).initData=function(C$99t){this.verticesCount=0,this.contentWidth=0,this.contentHeight=0,this.rectWidth=0,this.rectHeight=0,this.hRepeat=0,this.vRepeat=0,this.row=0,this.col=0,this._renderData.createFlexData(0,4,6,this.getVfmt()),this._updateIndices()},C$99o.initLocal=function(){this._local={x:[],y:[]}},C$99o._updateIndices=function(){for(var C$99t=this._renderData.iDatas[0],C$99e=0,C$99i=0,C$99n=C$99t.length;C$99e<C$99n;C$99e+=6,C$99i+=4)C$99t[C$99e]=C$99i,C$99t[C$99e+1]=C$99i+1,C$99t[C$99e+2]=C$99i+2,C$99t[C$99e+3]=C$99i+1,C$99t[C$99e+4]=C$99i+3,C$99t[C$99e+5]=C$99i+2},C$99o.updateRenderData=function(C$99t){var C$99e=C$99t._spriteFrame,C$99i=(this.packToDynamicAtlas(C$99t,C$99e),C$99t.node),C$99n=this.contentWidth=Math.abs(C$99i.width),C$99i=this.contentHeight=Math.abs(C$99i.height),C$99r=C$99e._rect,C$99s=C$99e.insetLeft,C$99o=C$99e.insetRight,C$99a=C$99r.width-C$99s-C$99o,C$99c=C$99e.insetTop,C$99e=C$99e.insetBottom,C$99r=C$99r.height-C$99c-C$99e,C$99n=(this.sizableWidth=C$99n-C$99s-C$99o,this.sizableHeight=C$99i-C$99c-C$99e,this.sizableWidth=0<this.sizableWidth?this.sizableWidth:0,this.sizableHeight=0<this.sizableHeight?this.sizableHeight:0,this.hRepeat=0==C$99a?this.sizableWidth:this.sizableWidth/C$99a),C$99s=this.vRepeat=0==C$99r?this.sizableHeight:this.sizableHeight/C$99r,C$99o=(this.row=Math.ceil(C$99s+2))*(this.col=Math.ceil(C$99n+2));this.verticesCount=4*C$99o,this.indicesCount=6*C$99o;C$99i=this._renderData._flexBuffer;C$99i.reserve(this.verticesCount,this.indicesCount)&&(this._updateIndices(),this.updateColor(C$99t)),C$99i.used(this.verticesCount,this.indicesCount),C$99t._vertsDirty&&(this.updateUVs(C$99t),this.updateVerts(C$99t),C$99t._vertsDirty=!1)},C$99o.updateVerts=function(C$99h){for(var C$99t=C$99h._spriteFrame,C$99u=C$99t._rect,C$99e=C$99h.node,C$99i=C$99e.anchorX*C$99e.width,C$99n=C$99e.anchorY*C$99e.height,C$99_=this.row,C$99d=this.col,C$99f=this.contentWidth,C$99p=this.contentHeight,C$99m=this._local,C$99y=C$99m.x,C$99g=C$99m.y,C$99r=(C$99y.length=C$99g.length=0,C$99t.insetLeft),C$99v=C$99t.insetRight,C$99s=C$99u.width-C$99r-C$99v,C$99x=C$99t.insetTop,C$99o=C$99t.insetBottom,C$99a=C$99u.height-C$99x-C$99o,C$99b=1<C$99e.width/(C$99r+C$99v)?1:C$99e.width/(C$99r+C$99v),C$99A=1<C$99e.height/(C$99x+C$99o)?1:C$99e.height/(C$99x+C$99o),C$99C=0<C$99s?Math.floor(1e3*this.sizableWidth)/1e3%C$99s==0?C$99s:this.sizableWidth%C$99s:this.sizableWidth,C$99S=0<C$99a?Math.floor(1e3*this.sizableHeight)/1e3%C$99a==0?C$99a:this.sizableHeight%C$99a:this.sizableHeight,C$99c=0;C$99c<=C$99d;C$99c++)0===C$99c?C$99y[C$99c]=-C$99i:0<C$99c&&C$99c<C$99d?C$99y[C$99c]=1===C$99c?C$99r*C$99b+Math.min(C$99s,this.sizableWidth)-C$99i:0<C$99s?C$99c===C$99d-1?C$99r+C$99C+C$99s*(C$99c-2)-C$99i:C$99r+Math.min(C$99s,this.sizableWidth)+C$99s*(C$99c-2)-C$99i:C$99r+this.sizableWidth-C$99i:C$99c===C$99d&&(C$99y[C$99c]=Math.min(C$99r+this.sizableWidth+C$99v,C$99f)-C$99i);for(var C$99l=0;C$99l<=C$99_;C$99l++)0===C$99l?C$99g[C$99l]=-C$99n:0<C$99l&&C$99l<C$99_?C$99g[C$99l]=1===C$99l?C$99o*C$99A+Math.min(C$99a,this.sizableHeight)-C$99n:0<C$99a?C$99l===C$99_-1?C$99o+C$99S+(C$99l-2)*C$99a-C$99n:C$99o+Math.min(C$99a,this.sizableHeight)+(C$99l-2)*C$99a-C$99n:C$99o+this.sizableHeight-C$99n:C$99l===C$99_&&(C$99g[C$99l]=Math.min(C$99o+this.sizableHeight+C$99x,C$99p)-C$99n);this.updateWorldVerts(C$99h)},C$99o.updateWorldVerts=function(C$99h){for(var C$99t,C$99e,C$99i=this._renderData,C$99u=this._local,C$99_=C$99u.x,C$99d=C$99u.y,C$99n=C$99i.vDatas[0],C$99u=this.row,C$99f=this.col,C$99i=C$99h.node._worldMatrix.m,C$99r=C$99i[0],C$99s=C$99i[1],C$99o=C$99i[4],C$99a=C$99i[5],C$99c=C$99i[12],C$99p=C$99i[13],C$99m=this.floatsPerVert,C$99l=0,C$99y=0,C$99g=C$99u;C$99y<C$99g;++C$99y)for(var C$99v=C$99d[C$99y],C$99x=C$99d[C$99y+1],C$99b=0,C$99A=C$99f;C$99b<C$99A;++C$99b)C$99t=C$99_[C$99b],C$99e=C$99_[C$99b+1],C$99n[C$99l]=C$99t*C$99r+C$99v*C$99o+C$99c,C$99n[C$99l+1]=C$99t*C$99s+C$99v*C$99a+C$99p,C$99n[C$99l+=C$99m]=C$99e*C$99r+C$99v*C$99o+C$99c,C$99n[C$99l+1]=C$99e*C$99s+C$99v*C$99a+C$99p,C$99n[C$99l+=C$99m]=C$99t*C$99r+C$99x*C$99o+C$99c,C$99n[C$99l+1]=C$99t*C$99s+C$99x*C$99a+C$99p,C$99n[C$99l+=C$99m]=C$99e*C$99r+C$99x*C$99o+C$99c,C$99n[C$99l+1]=C$99e*C$99s+C$99x*C$99a+C$99p,C$99l+=C$99m},C$99o.updateUVs=function(C$99h){var C$99t=this._renderData.vDatas[0];if(C$99t)for(var C$99u,C$99e=C$99h._spriteFrame,C$99_=C$99e._rect,C$99d=C$99e.insetLeft,C$99f=C$99e.insetRight,C$99p=C$99_.width-C$99d-C$99f,C$99d=C$99e.insetTop,C$99f=C$99e.insetBottom,C$99m=C$99_.height-C$99d-C$99f,C$99i=this.row,C$99n=this.col,C$99y=this.hRepeat,C$99g=this.vRepeat,C$99r=C$99h.spriteFrame.uv,C$99s=C$99h.spriteFrame.uvSliced,C$99v=C$99h.spriteFrame._rotated,C$99o=this.floatsPerVert,C$99a=this.uvOffset,C$99c=0,C$99x=C$99i;C$99c<C$99x;++C$99c)for(var C$99b=this.sizableHeight>C$99m?this.sizableHeight>=C$99c*C$99m?1:C$99g%1:C$99g,C$99l=0,C$99A=C$99n;C$99l<C$99A;++C$99l)C$99u=this.sizableWidth>C$99p?this.sizableWidth>=C$99l*C$99p?1:C$99y%1:C$99y,C$99v?(C$99t[C$99a]=C$99r[0],C$99t[C$99a+1]=C$99r[1],C$99t[C$99a+=C$99o]=C$99r[0],C$99t[C$99a+1]=C$99r[1]+(C$99r[7]-C$99r[1])*C$99u,C$99t[C$99a+=C$99o]=C$99r[0]+(C$99r[6]-C$99r[0])*C$99b,C$99t[C$99a+1]=C$99r[1],C$99t[C$99a+=C$99o]=C$99t[C$99a-C$99o],C$99t[C$99a+1]=C$99t[C$99a+1-2*C$99o]):(0===C$99l?C$99t[C$99a]=C$99r[0]:0<C$99l&&C$99l<C$99n-1?C$99t[C$99a]=C$99s[1].u:C$99l===C$99n-1&&(C$99t[C$99a]=C$99s[2].u),0===C$99c?C$99t[C$99a+1]=C$99s[0].v:0<C$99c&&C$99c<C$99i-1?C$99t[C$99a+1]=C$99s[4].v:C$99c===C$99i-1&&(C$99t[C$99a+1]=C$99s[8].v),C$99a+=C$99o,0===C$99l||0<C$99l&&C$99l<C$99n-1?C$99t[C$99a]=C$99s[1].u+(C$99s[2].u-C$99s[1].u)*C$99u:C$99l===C$99n-1&&(C$99t[C$99a]=C$99s[3].u),0===C$99c?C$99t[C$99a+1]=C$99s[0].v:0<C$99c&&C$99c<C$99i-1?C$99t[C$99a+1]=C$99s[4].v:C$99c===C$99i-1&&(C$99t[C$99a+1]=C$99s[8].v),C$99a+=C$99o,0===C$99l?C$99t[C$99a]=C$99r[0]:0<C$99l&&C$99l<C$99n-1?C$99t[C$99a]=C$99s[1].u:C$99l===C$99n-1&&(C$99t[C$99a]=C$99s[2].u),0===C$99c||0<C$99c&&C$99c<C$99i-1?C$99t[C$99a+1]=C$99s[4].v+(C$99s[8].v-C$99s[4].v)*C$99b:C$99c===C$99i-1&&(C$99t[C$99a+1]=C$99s[12].v),C$99t[C$99a+=C$99o]=C$99t[C$99a-2*C$99o],C$99t[C$99a+1]=C$99t[C$99a+1-C$99o]),C$99a+=C$99o};var C$99s,C$99o,C$99t=C$99a;function C$99a(){return C$99s.apply(this,arguments)||this}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"../../../../assembler-2d":215}],245:[function(C$99t,C$99i,C$99u){"use strict";var C$99_=C$99e(C$99t("../../../assembler")),C$99n=C$99t("../../../../components/CCSprite"),C$99r=C$99e(C$99t("./2d/simple")),C$99s=C$99e(C$99t("./2d/sliced")),C$99o=C$99e(C$99t("./2d/tiled")),C$99a=C$99e(C$99t("./2d/radial-filled")),C$99c=C$99e(C$99t("./2d/bar-filled")),C$99l=C$99e(C$99t("./2d/mesh")),C$99h=C$99e(C$99t("./3d/simple")),C$99d=C$99e(C$99t("./3d/sliced")),C$99f=C$99e(C$99t("./3d/tiled")),C$99p=C$99e(C$99t("./3d/radial-filled")),C$99m=C$99e(C$99t("./3d/bar-filled")),C$99y=C$99e(C$99t("./3d/mesh"));function C$99e(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}C$99t={getConstructor:function(C$99t){var C$99e=C$99t.node.is3DNode,C$99i=(C$99e?C$99h:C$99r).default;switch(C$99t.type){case C$99n.Type.SLICED:C$99i=(C$99e?C$99d:C$99s).default;break;case C$99n.Type.TILED:C$99i=(C$99e?C$99f:C$99o).default;break;case C$99n.Type.FILLED:C$99i=(C$99t._fillType===C$99n.FillType.RADIAL?C$99e?C$99p:C$99a:C$99e?C$99m:C$99c).default;break;case C$99n.Type.MESH:C$99i=(C$99e?C$99y:C$99l).default}return C$99i},Simple:C$99r.default,Sliced:C$99s.default,Tiled:C$99o.default,RadialFilled:C$99a.default,BarFilled:C$99c.default,Mesh:C$99l.default,Simple3D:C$99h.default,Sliced3D:C$99d.default,Tiled3D:C$99f.default,RadialFilled3D:C$99p.default,BarFilled3D:C$99m.default,Mesh3D:C$99y.default};C$99_.default.register(cc.Sprite,C$99t)},{"../../../../components/CCSprite":94,"../../../assembler":217,"./2d/bar-filled":239,"./2d/mesh":240,"./2d/radial-filled":241,"./2d/simple":242,"./2d/sliced":243,"./2d/tiled":244,"./3d/bar-filled":void 0,"./3d/mesh":void 0,"./3d/radial-filled":void 0,"./3d/simple":void 0,"./3d/sliced":void 0,"./3d/tiled":void 0}],246:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;(C$99n=C$99r.prototype)._reallocVData=function(C$99t,C$99e){this.vData=new Float32Array(C$99t),this.uintVData=new Uint32Array(this.vData.buffer),C$99e&&this.vData.set(C$99e),this._handler.updateMesh(this._index,this.vData,this.iData)},C$99n._reallocIData=function(C$99t,C$99e){this.iData=new Uint16Array(C$99t),C$99e&&this.iData.set(C$99e),this._handler.updateMesh(this._index,this.vData,this.iData)},C$99n.reserve=function(C$99t,C$99e){var C$99i=C$99t*this._verticesBytes>>2,C$99n=this.vData.length,C$99t=!1;if(C$99n<C$99i){for(;C$99n<C$99i;)C$99n*=2;this._reallocVData(C$99n,this.vData),C$99t=!0}var C$99r=this.iData.length;if(C$99r<C$99e){for(;C$99r<C$99e;)C$99r*=2;this._reallocIData(C$99e,this.iData),C$99t=!0}return C$99t},C$99n.used=function(C$99t,C$99e){this.usedVertices=C$99t,this.usedIndices=C$99e,this.usedVerticesFloats=C$99t*this._verticesBytes>>2,this._handler.updateMeshRange(C$99t,C$99e)},C$99n.reset=function(){var C$99t=this._initVerticesCount*this._verticesBytes>>2;this._reallocVData(C$99t),this._reallocIData(this._initIndicesCount),this.usedVertices=0,this.usedVerticesFloats=0,this.usedIndices=0};var C$99n=C$99r;function C$99r(C$99t,C$99e,C$99i,C$99n,C$99r){this._handler=C$99t,this._index=C$99e,this._vfmt=C$99r,this._verticesBytes=C$99r._bytes,this._initVerticesCount=C$99i,this._initIndicesCount=C$99n,this.reset()}C$99i.default=C$99n,cc.FlexBuffer=C$99n,C$99e.exports=C$99i.default},{}],247:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=(C$99t=C$99t("../../../renderer/gfx"))&&C$99t.__esModule?C$99t:{default:C$99t};C$99t=cc.Class({name:"cc.MeshBuffer",ctor:function(C$99t,C$99e){this.init(C$99t,C$99e)},init:function(C$99t,C$99e){this.byteOffset=0,this.indiceOffset=0,this.vertexOffset=0,this.indiceStart=0,this._dirty=!1,this._vertexFormat=C$99e,this._vertexBytes=this._vertexFormat._bytes,this._arrOffset=0,this._vbArr=[],this._vb=new C$99n.default.VertexBuffer(C$99t._device,C$99e,C$99n.default.USAGE_DYNAMIC,new ArrayBuffer,0),this._vbArr[0]=this._vb,this._ibArr=[],this._ib=new C$99n.default.IndexBuffer(C$99t._device,C$99n.default.INDEX_FMT_UINT16,C$99n.default.USAGE_STATIC,new ArrayBuffer,0),this._ibArr[0]=this._ib,this._vData=null,this._uintVData=null,this._iData=null,this._batcher=C$99t,this._initVDataCount=256*C$99e._bytes,this._initIDataCount=1536,this._offsetInfo={byteOffset:0,vertexOffset:0,indiceOffset:0},this._reallocBuffer()},uploadData:function(){var C$99t,C$99e;0!==this.byteOffset&&this._dirty&&(C$99t=new Float32Array(this._vData.buffer,0,this.byteOffset>>2),C$99e=new Uint16Array(this._iData.buffer,0,this.indiceOffset),this._vb.update(0,C$99t),this._ib.update(0,C$99e),this._dirty=!1)},switchBuffer:function(){var C$99t=++this._arrOffset;this.byteOffset=0,this.vertexOffset=0,this.indiceOffset=0,this.indiceStart=0,C$99t<this._vbArr.length?(this._vb=this._vbArr[C$99t],this._ib=this._ibArr[C$99t]):(this._vb=new C$99n.default.VertexBuffer(this._batcher._device,this._vertexFormat,C$99n.default.USAGE_DYNAMIC,new ArrayBuffer,0),this._vbArr[C$99t]=this._vb,this._ib=new C$99n.default.IndexBuffer(this._batcher._device,C$99n.default.INDEX_FMT_UINT16,C$99n.default.USAGE_STATIC,new ArrayBuffer,0),this._ibArr[C$99t]=this._ib)},checkAndSwitchBuffer:function(C$99t){65535<this.vertexOffset+C$99t&&(this.uploadData(),this._batcher._flush(),this.switchBuffer())},requestStatic:function(C$99t,C$99e){this.checkAndSwitchBuffer(C$99t);var C$99i=this.byteOffset+C$99t*this._vertexBytes,C$99n=this.indiceOffset+C$99e,C$99r=this._vData.byteLength,C$99s=this._iData.length;if(C$99r<C$99i||C$99s<C$99n){for(;C$99r<C$99i||C$99s<C$99n;)this._initVDataCount*=2,this._initIDataCount*=2,C$99r=4*this._initVDataCount,C$99s=this._initIDataCount;this._reallocBuffer()}this._updateOffset(C$99t,C$99e,C$99i)},_updateOffset:function(C$99t,C$99e,C$99i){var C$99n=this._offsetInfo;C$99n.vertexOffset=this.vertexOffset,this.vertexOffset+=C$99t,C$99n.indiceOffset=this.indiceOffset,this.indiceOffset+=C$99e,C$99n.byteOffset=this.byteOffset,this.byteOffset=C$99i,this._dirty=!0},request:function(C$99t,C$99e){return this._batcher._buffer!==this&&(this._batcher._flush(),this._batcher._buffer=this),this.requestStatic(C$99t,C$99e),this._offsetInfo},_reallocBuffer:function(){this._reallocVData(!0),this._reallocIData(!0)},_reallocVData:function(C$99t){this._vData&&(C$99e=new Uint8Array(this._vData.buffer)),this._vData=new Float32Array(this._initVDataCount),this._uintVData=new Uint32Array(this._vData.buffer);var C$99e,C$99i=new Uint8Array(this._uintVData.buffer);if(C$99e&&C$99t)for(var C$99n=0,C$99r=C$99e.length;C$99n<C$99r;C$99n++)C$99i[C$99n]=C$99e[C$99n]},_reallocIData:function(C$99t){var C$99e=this._iData;if(this._iData=new Uint16Array(this._initIDataCount),C$99e&&C$99t)for(var C$99i=this._iData,C$99n=0,C$99r=C$99e.length;C$99n<C$99r;C$99n++)C$99i[C$99n]=C$99e[C$99n]},reset:function(){this._arrOffset=0,this._vb=this._vbArr[0],this._ib=this._ibArr[0],this.byteOffset=0,this.indiceOffset=0,this.vertexOffset=0,this.indiceStart=0,this._dirty=!1},destroy:function(){this.reset();for(var C$99t=0;C$99t<this._vbArr.length;C$99t++)this._vbArr[C$99t].destroy();this._vbArr=null;for(var C$99e=0;C$99e<this._ibArr.length;C$99e++)this._ibArr[C$99e].destroy();this._ibArr=null,this._ib=null,this._vb=null},forwardIndiceStartToOffset:function(){this.indiceStart=this.indiceOffset}});cc.MeshBuffer=C$99e.exports=C$99t},{"../../../renderer/gfx":312}],248:[function(C$99t,C$99h,C$99u){"use strict";var C$99i=C$99e(C$99t("../../../renderer/core/input-assembler")),C$99n=C$99e(C$99t("../../../renderer/memop/recycle-pool")),C$99_=C$99e(C$99t("../../../renderer/scene/model"));function C$99e(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99r(C$99t,C$99e){this._renderScene=C$99e,this._device=C$99t,this.walking=!1,this.material=C$99l,this.cullingMask=1,this._iaPool=new C$99n.default(function(){return new C$99i.default},16),this._modelPool=new C$99n.default(function(){return new C$99_.default},16),this._quadBuffer=this.getBuffer("quad",C$99o),this._meshBuffer=this.getBuffer("mesh",C$99o),this._quadBuffer3D=this.getBuffer("quad",C$99a),this._meshBuffer3D=this.getBuffer("mesh",C$99a),this._buffer=this._meshBuffer,this._batchedModels=[],this._dummyNode=new cc.Node,this._sortKey=0,this.node=this._dummyNode,this.parentOpacity=1,this.parentOpacityDirty=0,this.worldMatDirty=0}var C$99s=C$99t("./vertex-format"),C$99o=C$99s.vfmtPosUvColor,C$99a=C$99s.vfmt3D,C$99d=C$99t("./quad-buffer"),C$99f=C$99t("./mesh-buffer"),C$99p=C$99t("./spine-buffer"),C$99s=C$99t("../../assets/material/CCMaterial"),C$99c=(new(C$99t("../../platform/id-generater"))("VertextFormat"),{}),C$99l=new C$99s,C$99m=new C$99i.default;C$99m._count=0;C$99r.prototype={constructor:C$99r,reset:function(){this._iaPool.reset();for(var C$99t,C$99e=this._renderScene,C$99i=this._batchedModels,C$99n=0;C$99n<C$99i.length;++C$99n)C$99i[C$99n].setInputAssembler(null),C$99i[C$99n].setEffect(null),C$99e.removeModel(C$99i[C$99n]);for(C$99t in this._modelPool.reset(),C$99i.length=0,this._sortKey=0,C$99c)C$99c[C$99t].reset();this._buffer=this._meshBuffer,this.node=this._dummyNode,this.material=C$99l,this.cullingMask=1,this.parentOpacity=1,this.parentOpacityDirty=0,this.worldMatDirty=0},_flushMaterial:function(C$99t){var C$99e;!C$99t||(C$99t=(this.material=C$99t).effect)&&(C$99e=this._modelPool.add(),this._batchedModels.push(C$99e),C$99e.sortKey=this._sortKey++,C$99e._cullingMask=this.cullingMask,C$99e.setNode(this.node),C$99e.setEffect(C$99t,null),C$99e.setInputAssembler(C$99m),this._renderScene.addModel(C$99e))},_flush:function(){var C$99t,C$99e=this.material,C$99i=this._buffer,C$99n=C$99i.indiceOffset-C$99i.indiceStart;!this.walking||!C$99e||C$99n<=0||(C$99e=C$99e.effect)&&((C$99t=this._iaPool.add())._vertexBuffer=C$99i._vb,C$99t._indexBuffer=C$99i._ib,C$99t._start=C$99i.indiceStart,C$99t._count=C$99n,C$99n=this._modelPool.add(),this._batchedModels.push(C$99n),C$99n.sortKey=this._sortKey++,C$99n._cullingMask=this.cullingMask,C$99n.setNode(this.node),C$99n.setEffect(C$99e),C$99n.setInputAssembler(C$99t),this._renderScene.addModel(C$99n),C$99i.forwardIndiceStartToOffset())},_flushIA:function(C$99t){var C$99e,C$99i;!C$99t||(C$99e=this.material.effect)&&(C$99i=this._modelPool.add(),this._batchedModels.push(C$99i),C$99i.sortKey=this._sortKey++,C$99i._cullingMask=this.cullingMask,C$99i.setNode(this.node),C$99i.setEffect(C$99e),C$99i.setInputAssembler(C$99t),this._renderScene.addModel(C$99i))},terminate:function(){for(var C$99t in cc.dynamicAtlasManager&&cc.dynamicAtlasManager.enabled&&cc.dynamicAtlasManager.update(),this._flush(),C$99c)C$99c[C$99t].uploadData();this.walking=!1},getBuffer:function(C$99t,C$99e){var C$99i=C$99t+C$99e.getHash(),C$99n=C$99c[C$99i];if(!C$99n){if("mesh"===C$99t)C$99n=new C$99f(this,C$99e);else if("quad"===C$99t)C$99n=new C$99d(this,C$99e);else{if("spine"!==C$99t)return cc.error("Not support buffer type ["+C$99t+"]"),null;C$99n=new C$99p(this,C$99e)}C$99c[C$99i]=C$99n}return C$99n}},C$99h.exports=C$99r},{"../../../renderer/core/input-assembler":302,"../../../renderer/memop/recycle-pool":327,"../../../renderer/scene/model":333,"../../assets/material/CCMaterial":53,"../../platform/id-generater":205,"./mesh-buffer":247,"./quad-buffer":249,"./spine-buffer":251,"./vertex-format":252}],249:[function(C$99t,C$99e,C$99i){"use strict";C$99t=C$99t("./mesh-buffer"),C$99t=cc.Class({name:"cc.QuadBuffer",extends:C$99t,_fillQuadBuffer:function(){for(var C$99t=this._initIDataCount/6,C$99e=this._iData,C$99i=0,C$99n=0;C$99i<C$99t;C$99i++){var C$99r=4*C$99i;C$99e[C$99n++]=C$99r,C$99e[C$99n++]=1+C$99r,C$99e[C$99n++]=2+C$99r,C$99e[C$99n++]=1+C$99r,C$99e[C$99n++]=3+C$99r,C$99e[C$99n++]=2+C$99r}var C$99s=new Uint16Array(this._iData.buffer,0,6*C$99t);this._ib.update(0,C$99s)},uploadData:function(){var C$99t;0!==this.byteOffset&&this._dirty&&(C$99t=new Float32Array(this._vData.buffer,0,this.byteOffset>>2),this._vb.update(0,C$99t),this._dirty=!1)},switchBuffer:function(){this._super();var C$99t=new Uint16Array(this._iData.buffer,0,this._initIDataCount);this._ib.update(0,C$99t)},_reallocBuffer:function(){this._reallocVData(!0),this._reallocIData(),this._fillQuadBuffer()}});cc.QuadBuffer=C$99e.exports=C$99t},{"./mesh-buffer":247}],250:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=C$99o;var C$99n,C$99r=(C$99n=C$99t("./flex-buffer"))&&C$99n.__esModule?C$99n:{default:C$99n},C$99s=C$99t("./vertex-format");function C$99o(){this.vDatas=[],this.uintVDatas=[],this.iDatas=[],this.meshCount=0,this._infos=null,this._flexBuffer=null}cc.js.mixin(C$99o.prototype,{init:function(C$99t){},clear:function(){this.vDatas.length=0,this.iDatas.length=0,this.uintVDatas.length=0,this.meshCount=0,this._infos=null,this._flexBuffer&&this._flexBuffer.reset()},updateMesh:function(C$99t,C$99e,C$99i){this.vDatas[C$99t]=C$99e,this.uintVDatas[C$99t]=new Uint32Array(C$99e.buffer,0,C$99e.length),this.iDatas[C$99t]=C$99i,this.meshCount=this.vDatas.length},updateMeshRange:function(C$99t,C$99e){},createData:function(C$99t,C$99e,C$99i){C$99e=new Float32Array(C$99e),C$99i=new Uint16Array(C$99i);this.updateMesh(C$99t,C$99e,C$99i)},createQuadData:function(C$99t,C$99e,C$99i){this.createData(C$99t,C$99e,C$99i),this.initQuadIndices(this.iDatas[C$99t])},createFlexData:function(C$99t,C$99e,C$99i,C$99n){C$99n=C$99n||C$99s.vfmtPosUvColor,this._flexBuffer=new C$99r.default(this,C$99t,C$99e,C$99i,C$99n)},initQuadIndices:function(C$99t){for(var C$99e=C$99t.length/6,C$99i=0,C$99n=0;C$99i<C$99e;C$99i++){var C$99r=4*C$99i;C$99t[C$99n++]=C$99r,C$99t[C$99n++]=1+C$99r,C$99t[C$99n++]=2+C$99r,C$99t[C$99n++]=1+C$99r,C$99t[C$99n++]=3+C$99r,C$99t[C$99n++]=2+C$99r}}}),cc.RenderData=C$99o,C$99e.exports=C$99i.default},{"./flex-buffer":246,"./vertex-format":252}],251:[function(C$99t,C$99e,C$99i){"use strict";C$99t=cc.Class({name:"cc.SpineBuffer",extends:C$99t("./mesh-buffer"),requestStatic:function(C$99t,C$99e){this.checkAndSwitchBuffer(C$99t);var C$99i=this.byteOffset+C$99t*this._vertexBytes,C$99n=this.indiceOffset+C$99e,C$99r=this._vData.byteLength,C$99s=this._iData.length;if(C$99r<C$99i||C$99s<C$99n){for(;C$99r<C$99i||C$99s<C$99n;)this._initVDataCount*=2,this._initIDataCount*=2,C$99r=4*this._initVDataCount,C$99s=this._initIDataCount;this._reallocBuffer()}C$99t=this._offsetInfo;C$99t.vertexOffset=this.vertexOffset,C$99t.indiceOffset=this.indiceOffset,C$99t.byteOffset=this.byteOffset},adjust:function(C$99t,C$99e){this.vertexOffset+=C$99t,this.indiceOffset+=C$99e,this.byteOffset=this.byteOffset+C$99t*this._vertexBytes,this._dirty=!0}});cc.SpineBuffer=C$99e.exports=C$99t},{"./mesh-buffer":247}],252:[function(C$99t,C$99e,C$99i){"use strict";C$99t=(C$99t=C$99t("../../../renderer/gfx"))&&C$99t.__esModule?C$99t:{default:C$99t};var C$99n=new C$99t.default.VertexFormat([{name:C$99t.default.ATTR_POSITION,type:C$99t.default.ATTR_TYPE_FLOAT32,num:3},{name:C$99t.default.ATTR_UV0,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$99t.default.ATTR_COLOR,type:C$99t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}]),C$99r=(C$99n.name="vfmt3D",C$99t.default.VertexFormat.XYZ_UV_Color=C$99n,new C$99t.default.VertexFormat([{name:C$99t.default.ATTR_POSITION,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$99t.default.ATTR_UV0,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$99t.default.ATTR_COLOR,type:C$99t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}])),C$99s=(C$99r.name="vfmtPosUvColor",C$99t.default.VertexFormat.XY_UV_Color=C$99r,new C$99t.default.VertexFormat([{name:C$99t.default.ATTR_POSITION,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$99t.default.ATTR_UV0,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$99t.default.ATTR_COLOR,type:C$99t.default.ATTR_TYPE_UINT8,num:4,normalize:!0},{name:C$99t.default.ATTR_COLOR0,type:C$99t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}])),C$99o=(C$99s.name="vfmtPosUvTwoColor",C$99t.default.VertexFormat.XY_UV_Two_Color=C$99s,new C$99t.default.VertexFormat([{name:C$99t.default.ATTR_POSITION,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$99t.default.ATTR_UV0,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2}])),C$99a=(C$99o.name="vfmtPosUv",C$99t.default.VertexFormat.XY_UV=C$99o,new C$99t.default.VertexFormat([{name:C$99t.default.ATTR_POSITION,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2},{name:C$99t.default.ATTR_COLOR,type:C$99t.default.ATTR_TYPE_UINT8,num:4,normalize:!0}])),C$99c=(C$99a.name="vfmtPosColor",C$99t.default.VertexFormat.XY_Color=C$99a,new C$99t.default.VertexFormat([{name:C$99t.default.ATTR_POSITION,type:C$99t.default.ATTR_TYPE_FLOAT32,num:2}]));C$99c.name="vfmtPos",C$99t.default.VertexFormat.XY=C$99c,C$99e.exports={vfmt3D:C$99n,vfmtPosUvColor:C$99r,vfmtPosUvTwoColor:C$99s,vfmtPosUv:C$99o,vfmtPosColor:C$99a,vfmtPos:C$99c}},{"../../../renderer/gfx":312}],253:[function(C$99t,C$99e,C$99i){"use strict";C$99t("../platform/CCSys");var C$99n=/(\.[^\.\/\?\\]*)(\?.*)?$/,C$99r=/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,C$99s=/[^\.\/]+\/\.\.\//;cc.path={join:function(){for(var C$99t=arguments.length,C$99e="",C$99i=0;C$99i<C$99t;C$99i++)C$99e=(C$99e+(""===C$99e?"":"/")+arguments[C$99i]).replace(/(\/|\\\\)$/,"");return C$99e},extname:function(C$99t){C$99t=C$99n.exec(C$99t);return C$99t?C$99t[1]:""},mainFileName:function(C$99t){if(C$99t){var C$99e=C$99t.lastIndexOf(".");if(-1!==C$99e)return C$99t.substring(0,C$99e)}return C$99t},basename:function(C$99t,C$99e){var C$99i=C$99t.indexOf("?"),C$99i=(0<C$99i&&(C$99t=C$99t.substring(0,C$99i)),/(\/|\\)([^\/\\]+)$/g.exec(C$99t.replace(/(\/|\\)$/,"")));if(!C$99i)return null;C$99i=C$99i[2];return C$99e&&C$99t.substring(C$99t.length-C$99e.length).toLowerCase()===C$99e.toLowerCase()?C$99i.substring(0,C$99i.length-C$99e.length):C$99i},dirname:function(C$99t){C$99t=C$99r.exec(C$99t);return C$99t?C$99t[2]:""},changeExtname:function(C$99t,C$99e){C$99e=C$99e||"";var C$99i=C$99t.indexOf("?"),C$99n="";return 0<C$99i&&(C$99n=C$99t.substring(C$99i),C$99t=C$99t.substring(0,C$99i)),(C$99i=C$99t.lastIndexOf("."))<0?C$99t+C$99e+C$99n:C$99t.substring(0,C$99i)+C$99e+C$99n},changeBasename:function(C$99t,C$99e,C$99i){if(0===C$99e.indexOf("."))return this.changeExtname(C$99t,C$99e);var C$99n=C$99t.indexOf("?"),C$99r="",C$99i=C$99i?this.extname(C$99t):"";return 0<C$99n&&(C$99r=C$99t.substring(C$99n),C$99t=C$99t.substring(0,C$99n)),C$99n=C$99t.lastIndexOf("/"),C$99t.substring(0,C$99n=C$99n<=0?0:C$99n+1)+C$99e+C$99i+C$99r},_normalize:function(C$99t){var C$99e;for(C$99t=String(C$99t);C$99t=(C$99e=C$99t).replace(C$99s,""),C$99e.length!==C$99t.length;);return C$99t},sep:cc.sys.os===cc.sys.OS_WINDOWS?"\\":"/",stripSep:function(C$99t){return C$99t.replace(/[\/\\]$/,"")}},C$99e.exports=cc.path},{"../platform/CCSys":198}],254:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this.a=C$99t,this.b=C$99e,this.c=C$99i,this.d=C$99n,this.tx=C$99r,this.ty=C$99s}C$99n.create=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){return{a:C$99t,b:C$99e,c:C$99i,d:C$99n,tx:C$99r,ty:C$99s}},C$99n.identity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},C$99n.clone=function(C$99t){return{a:C$99t.a,b:C$99t.b,c:C$99t.c,d:C$99t.d,tx:C$99t.tx,ty:C$99t.ty}},C$99n.concat=function(C$99t,C$99e,C$99i){var C$99n=C$99e.a,C$99r=C$99e.b,C$99s=C$99e.c,C$99o=C$99e.d,C$99a=C$99e.tx,C$99e=C$99e.ty;return C$99t.a=C$99n*C$99i.a+C$99r*C$99i.c,C$99t.b=C$99n*C$99i.b+C$99r*C$99i.d,C$99t.c=C$99s*C$99i.a+C$99o*C$99i.c,C$99t.d=C$99s*C$99i.b+C$99o*C$99i.d,C$99t.tx=C$99a*C$99i.a+C$99e*C$99i.c+C$99i.tx,C$99t.ty=C$99a*C$99i.b+C$99e*C$99i.d+C$99i.ty,C$99t},C$99n.invert=function(C$99t,C$99e){var C$99i=C$99e.a,C$99n=C$99e.b,C$99r=C$99e.c,C$99s=C$99e.d,C$99o=1/(C$99i*C$99s-C$99n*C$99r),C$99a=C$99e.tx,C$99e=C$99e.ty;return C$99t.a=C$99o*C$99s,C$99t.b=-C$99o*C$99n,C$99t.c=-C$99o*C$99r,C$99t.d=C$99o*C$99i,C$99t.tx=C$99o*(C$99r*C$99e-C$99s*C$99a),C$99t.ty=C$99o*(C$99n*C$99a-C$99i*C$99e),C$99t},C$99n.fromMat4=function(C$99t,C$99e){C$99e=C$99e.m;return C$99t.a=C$99e[0],C$99t.b=C$99e[1],C$99t.c=C$99e[4],C$99t.d=C$99e[5],C$99t.tx=C$99e[12],C$99t.ty=C$99e[13],C$99t},C$99n.transformVec2=function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99e=void 0===C$99n?(C$99n=C$99i,C$99r=C$99e.x,C$99e.y):(C$99r=C$99e,C$99i);return C$99t.x=C$99n.a*C$99r+C$99n.c*C$99e+C$99n.tx,C$99t.y=C$99n.b*C$99r+C$99n.d*C$99e+C$99n.ty,C$99t},C$99n.transformSize=function(C$99t,C$99e,C$99i){return C$99t.width=C$99i.a*C$99e.width+C$99i.c*C$99e.height,C$99t.height=C$99i.b*C$99e.width+C$99i.d*C$99e.height,C$99t},C$99n.transformRect=function(C$99t,C$99e,C$99i){var C$99n=C$99e.x,C$99r=C$99e.y,C$99s=C$99n+C$99e.width,C$99e=C$99r+C$99e.height,C$99o=C$99i.a*C$99n+C$99i.c*C$99r+C$99i.tx,C$99a=C$99i.b*C$99n+C$99i.d*C$99r+C$99i.ty,C$99c=C$99i.a*C$99s+C$99i.c*C$99r+C$99i.tx,C$99r=C$99i.b*C$99s+C$99i.d*C$99r+C$99i.ty,C$99l=C$99i.a*C$99n+C$99i.c*C$99e+C$99i.tx,C$99n=C$99i.b*C$99n+C$99i.d*C$99e+C$99i.ty,C$99h=C$99i.a*C$99s+C$99i.c*C$99e+C$99i.tx,C$99s=C$99i.b*C$99s+C$99i.d*C$99e+C$99i.ty,C$99e=Math.min(C$99o,C$99c,C$99l,C$99h),C$99i=Math.max(C$99o,C$99c,C$99l,C$99h),C$99o=Math.min(C$99a,C$99r,C$99n,C$99s),C$99c=Math.max(C$99a,C$99r,C$99n,C$99s);return C$99t.x=C$99e,C$99t.y=C$99o,C$99t.width=C$99i-C$99e,C$99t.height=C$99c-C$99o,C$99t},C$99n.transformObb=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=C$99r.x,C$99a=C$99r.y,C$99c=C$99r.width,C$99r=C$99r.height,C$99l=C$99s.a*C$99o+C$99s.c*C$99a+C$99s.tx,C$99o=C$99s.b*C$99o+C$99s.d*C$99a+C$99s.ty,C$99a=C$99s.a*C$99c,C$99c=C$99s.b*C$99c,C$99h=C$99s.c*C$99r,C$99s=C$99s.d*C$99r;C$99e.x=C$99l,C$99e.y=C$99o,C$99i.x=C$99a+C$99l,C$99i.y=C$99c+C$99o,C$99t.x=C$99h+C$99l,C$99t.y=C$99s+C$99o,C$99n.x=C$99a+C$99h+C$99l,C$99n.y=C$99c+C$99s+C$99o},cc.AffineTransform=C$99e.exports=C$99n},{}],255:[function(C$99t,C$99h,C$99u){"use strict";var C$99e=C$99t("../platform/CCObject").Flags,C$99_=C$99t("./misc"),C$99i=C$99t("../platform/js"),C$99d=C$99t("../platform/id-generater"),C$99f=C$99t("../event-manager"),C$99n=C$99t("../renderer/render-flow"),C$99c=C$99e.Destroying,C$99r=C$99e.DontDestroy,C$99s=C$99e.Deactivating,C$99o=new C$99d("Node");function C$99a(C$99t){return C$99t?"string"==typeof C$99t?C$99i.getClassByName(C$99t):C$99t:(cc.errorID(3804),null)}function C$99p(C$99t,C$99e){if(C$99e._sealed)for(var C$99i=0;C$99i<C$99t._components.length;++C$99i){var C$99n=C$99t._components[C$99i];if(C$99n.constructor===C$99e)return C$99n}else for(var C$99r=0;C$99r<C$99t._components.length;++C$99r){var C$99s=C$99t._components[C$99r];if(C$99s instanceof C$99e)return C$99s}return null}function C$99l(C$99t,C$99e,C$99i){if(C$99e._sealed)for(var C$99n=0;C$99n<C$99t._components.length;++C$99n){var C$99r=C$99t._components[C$99n];C$99r.constructor===C$99e&&C$99i.push(C$99r)}else for(var C$99s=0;C$99s<C$99t._components.length;++C$99s){var C$99o=C$99t._components[C$99s];C$99o instanceof C$99e&&C$99i.push(C$99o)}}C$99t=cc.Class({name:"cc._BaseNode",extends:cc.Object,properties:{_parent:null,_children:[],_active:!0,_components:[],_prefab:null,_persistNode:{get:function(){return 0<(this._objFlags&C$99r)},set:function(C$99t){C$99t?this._objFlags|=C$99r:this._objFlags&=~C$99r}},name:{get:function(){return this._name},set:function(C$99t){this._name=C$99t}},uuid:{get:function(){return this._id}},children:{get:function(){return this._children}},childrenCount:{get:function(){return this._children.length}},active:{get:function(){return this._active},set:function(C$99t){var C$99e;this._active!==(C$99t=!!C$99t)&&(this._active=C$99t,(C$99e=this._parent)&&C$99e._activeInHierarchy&&cc.director._nodeActivator.activateNode(this,C$99t))}},activeInHierarchy:{get:function(){return this._activeInHierarchy}}},ctor:function(C$99t){this._name=void 0!==C$99t?C$99t:"New Node",this._activeInHierarchy=!1,this._id=C$99o.getNewId(),cc.director._scheduler&&cc.director._scheduler.enableForTarget(this),this.__eventTargets=[]},getParent:function(){return this._parent},setParent:function(C$99t){var C$99e,C$99i;this._parent!==C$99t&&((C$99e=this._parent)&&C$99e._objFlags&C$99s&&cc.errorID(3821),this._parent=C$99t||null,this._onSetParent(C$99t),C$99t&&(C$99t._objFlags&C$99s&&cc.errorID(3821),C$99f._setDirtyForNode(this),C$99t._children.push(this),C$99t.emit&&C$99t.emit("child-added",this),C$99t._renderFlag|=C$99n.FLAG_CHILDREN),C$99e?C$99e._objFlags&C$99c||(C$99i=C$99e._children.indexOf(this),C$99e._children.splice(C$99i,1),C$99e.emit&&C$99e.emit("child-removed",this),this._onHierarchyChanged(C$99e),0===C$99e._children.length&&(C$99e._renderFlag&=~C$99n.FLAG_CHILDREN)):C$99t&&this._onHierarchyChanged(null))},attr:function(C$99t){C$99i.mixin(this,C$99t)},getChildByUuid:function(C$99t){if(!C$99t)return cc.log("Invalid uuid"),null;for(var C$99e=this._children,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i]._id===C$99t)return C$99e[C$99i];return null},getChildByName:function(C$99t){if(!C$99t)return cc.log("Invalid name"),null;for(var C$99e=this._children,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i]._name===C$99t)return C$99e[C$99i];return null},addChild:function(C$99t){cc.assertID(C$99t,1606),cc.assertID(null===C$99t._parent,1605),C$99t.setParent(this)},insertChild:function(C$99t,C$99e){C$99t.parent=this,C$99t.setSiblingIndex(C$99e)},getSiblingIndex:function(){return this._parent?this._parent._children.indexOf(this):0},setSiblingIndex:function(C$99t){var C$99e,C$99i;this._parent&&(this._parent._objFlags&C$99s?cc.errorID(3821):(C$99e=this._parent._children,(C$99t=-1!==C$99t?C$99t:C$99e.length-1)!==(C$99i=C$99e.indexOf(this))&&(C$99e.splice(C$99i,1),C$99t<C$99e.length?C$99e.splice(C$99t,0,this):C$99e.push(this),this._onSiblingIndexChanged&&this._onSiblingIndexChanged(C$99t))))},walk:function(C$99t,C$99e){for(var C$99i,C$99n,C$99r,C$99s=cc._BaseNode,C$99o=1,C$99a=C$99s._stacks[C$99s._stackId],C$99c=(C$99a||C$99s._stacks.push(C$99a=[]),C$99s._stackId++,C$99a.length=0,C$99a[0]=this,null),C$99l=!1;C$99o;)if(C$99n=C$99a[--C$99o])if(!C$99l&&C$99t?C$99t(C$99n):C$99l&&C$99e&&C$99e(C$99n),C$99a[C$99o]=null,C$99l){if(C$99l=!1,C$99i)if(C$99i[++C$99r])C$99a[C$99o]=C$99i[C$99r],C$99o++;else if(C$99c&&(C$99a[C$99o]=C$99c,C$99o++,C$99l=!0,C$99c._parent?(C$99r=(C$99i=C$99c._parent._children).indexOf(C$99c),C$99c=C$99c._parent):C$99i=C$99c=null,C$99r<0))break}else 0<C$99n._children.length?(C$99i=(C$99c=C$99n)._children,C$99a[C$99o]=C$99i[C$99r=0],C$99o++):(C$99a[C$99o]=C$99n,C$99o++,C$99l=!0);C$99a.length=0,C$99s._stackId--},cleanup:function(){},removeFromParent:function(C$99t){this._parent&&this._parent.removeChild(this,C$99t=void 0===C$99t?!0:C$99t)},removeChild:function(C$99t,C$99e){-1<this._children.indexOf(C$99t)&&(!C$99e&&void 0!==C$99e||C$99t.cleanup(),C$99t.parent=null)},removeAllChildren:function(C$99t){var C$99e=this._children;void 0===C$99t&&(C$99t=!0);for(var C$99i=C$99e.length-1;0<=C$99i;C$99i--){var C$99n=C$99e[C$99i];C$99n&&(C$99t&&C$99n.cleanup(),C$99n.parent=null)}this._children.length=0},isChildOf:function(C$99t){var C$99e=this;do{if(C$99e===C$99t)return!0}while(C$99e=C$99e._parent);return!1},getComponent:function(C$99t){C$99t=C$99a(C$99t);return C$99t?C$99p(this,C$99t):null},getComponents:function(C$99t){var C$99t=C$99a(C$99t),C$99e=[];return C$99t&&C$99l(this,C$99t,C$99e),C$99e},getComponentInChildren:function(C$99t){C$99t=C$99a(C$99t);return C$99t?function C$99t(C$99e,C$99i){for(var C$99n=0;C$99n<C$99e.length;++C$99n){var C$99r=C$99e[C$99n],C$99s=C$99p(C$99r,C$99i);if(C$99s)return C$99s;if(0<C$99r._children.length&&(C$99s=C$99t(C$99r._children,C$99i)))return C$99s}return null}(this._children,C$99t):null},getComponentsInChildren:function(C$99t){var C$99t=C$99a(C$99t),C$99e=[];return C$99t&&(C$99l(this,C$99t,C$99e),function C$99t(C$99e,C$99i,C$99n){for(var C$99r=0;C$99r<C$99e.length;++C$99r){var C$99s=C$99e[C$99r];C$99l(C$99s,C$99i,C$99n),0<C$99s._children.length&&C$99t(C$99s._children,C$99i,C$99n)}}(this._children,C$99t,C$99e)),C$99e},_checkMultipleComp:!1,addComponent:function(C$99t){var C$99e;if("string"==typeof C$99t){if(!(C$99e=C$99i.getClassByName(C$99t)))return cc.errorID(3807,C$99t),cc._RFpeek()&&cc.errorID(3808,C$99t),null}else{if(!C$99t)return cc.errorID(3804),null;C$99e=C$99t}if("function"!=typeof C$99e)return cc.errorID(3809),null;if(!C$99i.isChildClassOf(C$99e,cc.Component))return cc.errorID(3810),null;C$99t=C$99e._requireComponent;if(C$99t&&!this.getComponent(C$99t)&&!this.addComponent(C$99t))return null;C$99t=new C$99e;return(C$99t.node=this)._components.push(C$99t),this._activeInHierarchy&&cc.director._nodeActivator.activateComp(C$99t),C$99t},_addComponentAt:!1,removeComponent:function(C$99t){C$99t?(C$99t=C$99t instanceof cc.Component?C$99t:this.getComponent(C$99t))&&C$99t.destroy():cc.errorID(3813)},_getDependComponent:!1,_removeComponent:function(C$99t){var C$99e;C$99t?this._objFlags&C$99c||(-1!==(C$99e=this._components.indexOf(C$99t))?this._components.splice(C$99e,1):C$99t.node!==this&&cc.errorID(3815)):cc.errorID(3814)},destroy:function(){cc.Object.prototype.destroy.call(this)&&(this.active=!1)},destroyAllChildren:function(){for(var C$99t=this._children,C$99e=0;C$99e<C$99t.length;++C$99e)C$99t[C$99e].destroy()},_onSetParent:function(C$99t){},_onPostActivated:function(){},_onBatchRestored:function(){},_onBatchCreated:function(){},_onHierarchyChanged:function(C$99t){var C$99e=this._parent,C$99e=(!this._persistNode||C$99e instanceof cc.Scene||cc.game.removePersistRootNode(this),this._active&&!(!C$99e||!C$99e._activeInHierarchy));this._activeInHierarchy!==C$99e&&cc.director._nodeActivator.activateNode(this,C$99e)},_instantiate:function(C$99t){C$99t=C$99t||cc.instantiate._clone(this,this);var C$99e=this._prefab;C$99e&&this===C$99e.root&&C$99e.sync;return C$99t._parent=null,C$99t._onBatchRestored(),C$99t},_registerIfAttached:!1,_onPreDestroy:function(){this._objFlags|=C$99c;for(var C$99t=this._parent,C$99e=C$99t&&C$99t._objFlags&C$99c,C$99i=this._children,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;++C$99n)C$99i[C$99n]._destroyImmediate();for(C$99n=0,C$99r=this._components.length;C$99n<C$99r;++C$99n)this._components[C$99n]._destroyImmediate();var C$99s,C$99o=this.__eventTargets;for(C$99n=0,C$99r=C$99o.length;C$99n<C$99r;++C$99n){var C$99a=C$99o[C$99n];C$99a&&C$99a.targetOff(this)}return C$99o.length=0,this._persistNode&&cc.game.removePersistRootNode(this),!C$99e&&C$99t&&(C$99s=C$99t._children.indexOf(this),C$99t._children.splice(C$99s,1),C$99t.emit&&C$99t.emit("child-removed",this)),C$99e},onRestore:!1});C$99t.idGenerater=C$99o,C$99t._stacks=[[]],C$99t._stackId=0,C$99t.prototype._onPreDestroyBase=C$99t.prototype._onPreDestroy,C$99t.prototype._onHierarchyChangedBase=C$99t.prototype._onHierarchyChanged;C$99_.propertyDefine(C$99t,["parent","name","children","childrenCount"],{}),cc._BaseNode=C$99h.exports=C$99t},{"../event-manager":113,"../platform/CCObject":195,"../platform/id-generater":205,"../platform/js":209,"../renderer/render-flow":221,"./misc":264}],256:[function(C$99t,C$99e,C$99i){"use strict";C$99e.exports={binarySearchEpsilon:function(C$99t,C$99e){for(var C$99i=0,C$99n=C$99t.length-1,C$99r=C$99n>>>1;C$99i<=C$99n;C$99r=C$99i+C$99n>>>1){var C$99s=C$99t[C$99r];if(C$99e+1e-6<C$99s)C$99n=C$99r-1;else{if(!(C$99s<C$99e-1e-6))return C$99r;C$99i=C$99r+1}}return~C$99i}}},{}],257:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../components/CCRenderComponent"),C$99r=C$99t("../platform/CCMacro").BlendFactor,C$99s=C$99t("../../renderer/gfx"),C$99t=cc.Class({properties:{_srcBlendFactor:C$99r.SRC_ALPHA,_dstBlendFactor:C$99r.ONE_MINUS_SRC_ALPHA,srcBlendFactor:{get:function(){return this._srcBlendFactor},set:function(C$99t){this._srcBlendFactor!==C$99t&&(this._srcBlendFactor=C$99t,this._updateBlendFunc())},animatable:!1,type:C$99r,tooltip:!1,visible:!0},dstBlendFactor:{get:function(){return this._dstBlendFactor},set:function(C$99t){this._dstBlendFactor!==C$99t&&(this._dstBlendFactor=C$99t,this._updateBlendFunc())},animatable:!1,type:C$99r,tooltip:!1,visible:!0}},setMaterial:function(C$99t,C$99e){C$99t=C$99n.prototype.setMaterial.call(this,C$99t,C$99e);return this._srcBlendFactor===C$99r.SRC_ALPHA&&this._dstBlendFactor===C$99r.ONE_MINUS_SRC_ALPHA||this._updateMaterialBlendFunc(C$99t),C$99t},_updateMaterial:function(){this._updateBlendFunc()},_updateBlendFunc:function(){if(this._srcBlendFactor!==C$99r.SRC_ALPHA||this._dstBlendFactor!==C$99r.ONE_MINUS_SRC_ALPHA)for(var C$99t=this.getMaterials(),C$99e=0;C$99e<C$99t.length;C$99e++){var C$99i=C$99t[C$99e];this._updateMaterialBlendFunc(C$99i)}},_updateMaterialBlendFunc:function(C$99t){C$99t.setBlend(!0,C$99s.BLEND_FUNC_ADD,this._srcBlendFactor,this._dstBlendFactor,C$99s.BLEND_FUNC_ADD,this._srcBlendFactor,this._dstBlendFactor)}});C$99e.exports=cc.BlendFunc=C$99t},{"../../renderer/gfx":312,"../components/CCRenderComponent":89,"../platform/CCMacro":194}],258:[function(C$99t,C$99e,C$99i){"use strict";var C$99s=C$99t("./misc").BASE64_VALUES,C$99o="0123456789abcdef".split(""),C$99t=["","","",""],C$99a=C$99t.concat(C$99t,"-",C$99t,"-",C$99t,"-",C$99t,"-",C$99t,C$99t,C$99t),C$99c=C$99a.map(function(C$99t,C$99e){return"-"===C$99t?NaN:C$99e}).filter(isFinite);C$99e.exports=function(C$99t){if(22!==C$99t.length)return C$99t;C$99a[0]=C$99t[0],C$99a[1]=C$99t[1];for(var C$99e=2,C$99i=2;C$99e<22;C$99e+=2){var C$99n=C$99s[C$99t.charCodeAt(C$99e)],C$99r=C$99s[C$99t.charCodeAt(C$99e+1)];C$99a[C$99c[C$99i++]]=C$99o[C$99n>>2],C$99a[C$99c[C$99i++]]=C$99o[(3&C$99n)<<2|C$99r>>4],C$99a[C$99c[C$99i++]]=C$99o[15&C$99r]}return C$99a.join("")}},{"./misc":264}],259:[function(C$99t,C$99e,C$99i){"use strict";cc.find=C$99e.exports=function(C$99t,C$99e){if(null==C$99t)return cc.errorID(3814),null;if(!C$99e){var C$99i=cc.director.getScene();if(!C$99i)return null;C$99e=C$99i}for(var C$99n=C$99e,C$99i="/"!==C$99t[0]?0:1,C$99r=C$99t.split("/"),C$99s=C$99i;C$99s<C$99r.length;C$99s++){for(var C$99o=C$99r[C$99s],C$99a=C$99n._children,C$99n=null,C$99c=0,C$99h=C$99a.length;C$99c<C$99h;++C$99c){var C$99l=C$99a[C$99c];if(C$99l.name===C$99o){C$99n=C$99l;break}}if(!C$99n)return null}return C$99n}},{}],260:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=(C$99s=C$99t("../assets/material/material-variant"))&&C$99s.__esModule?C$99s:{default:C$99s};var C$99r=C$99t("../assets/material/CCMaterial"),C$99s=cc.Class({properties:{_normalMaterial:null,normalMaterial:{get:function(){return this._normalMaterial},set:function(C$99t){this._normalMaterial=C$99t,this._updateDisabledState&&this._updateDisabledState()},type:C$99r,tooltip:!1,animatable:!1},_grayMaterial:null,grayMaterial:{get:function(){return this._grayMaterial},set:function(C$99t){this._grayMaterial=C$99t,this._updateDisabledState&&this._updateDisabledState()},type:C$99r,tooltip:!1,animatable:!1}},_switchGrayMaterial:function(C$99t,C$99e){var C$99i=C$99t?(C$99i=(C$99i=this._grayMaterial)||C$99r.getBuiltinMaterial("2d-gray-sprite"),this._grayMaterial=C$99n.default.create(C$99i,C$99e)):(C$99i=(C$99i=this._normalMaterial)||C$99r.getBuiltinMaterial("2d-sprite",C$99e),this._normalMaterial=C$99n.default.create(C$99i,C$99e));C$99e.setMaterial(0,C$99i)}});C$99e.exports=C$99s},{"../assets/material/CCMaterial":53,"../assets/material/material-variant":60}],261:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){this._parsedObject={},this._specialSymbolArray=[],this._specialSymbolArray.push([/&lt;/g,"<"]),this._specialSymbolArray.push([/&gt;/g,">"]),this._specialSymbolArray.push([/&amp;/g,"&"]),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,"'"]),this._specialSymbolArray.push([/&nbsp;/g," "])}var C$99c=/^(click)(\s)*=|(param)(\s)*=/,C$99u=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*align(\s)*=|(\s)*offset(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;C$99n.prototype={constructor:C$99n,parse:function(C$99t){this._resultObjectArray=[],this._stack=[];for(var C$99e=0,C$99i=C$99t.length;C$99e<C$99i;){var C$99n,C$99r,C$99s=C$99t.indexOf(">",C$99e),C$99o=-1;0<=C$99s&&(C$99o=C$99t.lastIndexOf("<",C$99s))<C$99e-1&&(C$99o=C$99t.indexOf("<",C$99s+1),C$99s=C$99t.indexOf(">",C$99o+1)),C$99e=C$99o<0?(this._stack.pop(),this._processResult(C$99t.substring(C$99e)),C$99i):(C$99n=C$99t.substring(C$99e,C$99o),""===(C$99r=C$99t.substring(C$99o+1,C$99s))&&(C$99n=C$99t.substring(C$99e,C$99s+1)),this._processResult(C$99n),-1===C$99s?C$99s=C$99o:"/"===C$99t.charAt(C$99o+1)?this._stack.pop():this._addToStack(C$99r),C$99s+1)}return this._resultObjectArray},_attributeToObject:function(C$99t){var C$99e,C$99i,C$99n,C$99r={};if(C$99o=(C$99t=C$99t.trim()).match(/^(color|size)(\s)*=/)){if(C$99e=C$99o[0],""===(C$99t=C$99t.substring(C$99e.length).trim()))return C$99r;switch(C$99i=C$99t.indexOf(" "),C$99e[0]){case"c":C$99r.color=-1<C$99i?C$99t.substring(0,C$99i).trim():C$99t;break;case"s":C$99r.size=parseInt(C$99t)}return-1<C$99i&&(C$99n=C$99t.substring(C$99i+1).trim(),C$99n=this._processEventHandler(C$99n),C$99r.event=C$99n),C$99r}if((C$99o=C$99t.match(/^(br(\s)*\/)/))&&0<C$99o[0].length&&(C$99e=C$99o[0].trim()).startsWith("br")&&"/"===C$99e[C$99e.length-1])return C$99r.isNewLine=!0,this._resultObjectArray.push({text:"",style:{newline:!0}}),C$99r;if((C$99o=C$99t.match(/^(img(\s)*src(\s)*=[^>]+\/)/))&&0<C$99o[0].length&&(C$99e=C$99o[0].trim()).startsWith("img")&&"/"===C$99e[C$99e.length-1]){for(var C$99s,C$99o=C$99t.match(C$99u),C$99a=!1;C$99o;){if(C$99e=(C$99t=C$99t.substring(C$99t.indexOf(C$99o[0]))).substr(0,C$99o[0].length),C$99l=-1<(C$99i=(C$99s=C$99t.substring(C$99e.length).trim()).indexOf(" "))?C$99s.substr(0,C$99i):C$99s,C$99e=(C$99e=C$99e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),C$99t=C$99s.substring(C$99i).trim(),C$99l.endsWith("/")&&(C$99l=C$99l.slice(0,-1)),"src"===C$99e){switch(C$99l.charCodeAt(0)){case 34:case 39:C$99a=!0,C$99l=C$99l.slice(1,-1)}C$99r.isImage=!0,C$99r.src=C$99l}else if("height"===C$99e)C$99r.imageHeight=parseInt(C$99l);else if("width"===C$99e)C$99r.imageWidth=parseInt(C$99l);else if("align"===C$99e){switch(C$99l.charCodeAt(0)){case 34:case 39:C$99l=C$99l.slice(1,-1)}C$99r.imageAlign=C$99l.toLocaleLowerCase()}else"offset"===C$99e?C$99r.imageOffset=C$99l:"click"===C$99e&&(C$99r.event=this._processEventHandler(C$99e+"="+C$99l));C$99r.event&&"param"===C$99e&&(C$99r.event.param=C$99l.replace(/^\"|\"$/g,"")),C$99o=C$99t.match(C$99u)}return C$99a&&C$99r.isImage&&this._resultObjectArray.push({text:"",style:C$99r}),{}}if(C$99o=C$99t.match(/^(outline(\s)*[^>]*)/)){var C$99c={color:"#ffffff",width:1};if(C$99t=C$99o[0].substring("outline".length).trim()){var C$99l,C$99h=/(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(C$99o=C$99t.match(C$99h);C$99o;)C$99e=(C$99t=C$99t.substring(C$99t.indexOf(C$99o[0]))).substr(0,C$99o[0].length),C$99l=-1<(C$99i=(C$99s=C$99t.substring(C$99e.length).trim()).indexOf(" "))?C$99s.substr(0,C$99i):C$99s,C$99e=(C$99e=C$99e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),C$99t=C$99s.substring(C$99i).trim(),"click"===C$99e?C$99r.event=this._processEventHandler(C$99e+"="+C$99l):"color"===C$99e?C$99c.color=C$99l:"width"===C$99e&&(C$99c.width=parseInt(C$99l)),C$99r.event&&"param"===C$99e&&(C$99r.event.param=C$99l.replace(/^\"|\"$/g,"")),C$99o=C$99t.match(C$99h)}C$99r.outline=C$99c}if((C$99o=C$99t.match(/^(on|u|b|i)(\s)*/))&&0<C$99o[0].length){switch(C$99e=C$99o[0],C$99t=C$99t.substring(C$99e.length).trim(),C$99e[0]){case"u":C$99r.underline=!0;break;case"i":C$99r.italic=!0;break;case"b":C$99r.bold=!0}if(""===C$99t)return C$99r;C$99n=this._processEventHandler(C$99t),C$99r.event=C$99n}return C$99r},_processEventHandler:function(C$99t){for(var C$99e=0,C$99i={},C$99n=C$99t.match(C$99c),C$99r=!1;C$99n;){var C$99s,C$99o=C$99n[0],C$99a="",C$99r=!1;'"'===(C$99t=C$99t.substring(C$99o.length).trim()).charAt(0)?(-1<(C$99e=C$99t.indexOf('"',1))&&(C$99a=C$99t.substring(1,C$99e).trim(),C$99r=!0),C$99e++):"'"===C$99t.charAt(0)?(-1<(C$99e=C$99t.indexOf("'",1))&&(C$99a=C$99t.substring(1,C$99e).trim(),C$99r=!0),C$99e++):C$99e=(C$99a=(C$99s=C$99t.match(/(\S)+/))?C$99s[0]:"").length,C$99r&&(C$99i[C$99o=C$99o.substring(0,C$99o.length-1).trim()]=C$99a),C$99n=(C$99t=C$99t.substring(C$99e).trim()).match(C$99c)}return C$99i},_addToStack:function(C$99t){var C$99e=this._attributeToObject(C$99t);if(0===this._stack.length)this._stack.push(C$99e);else if(!C$99e.isNewLine&&!C$99e.isImage){var C$99i,C$99n=this._stack[this._stack.length-1];for(C$99i in C$99n)C$99e[C$99i]||(C$99e[C$99i]=C$99n[C$99i]);this._stack.push(C$99e)}},_processResult:function(C$99t){""!==C$99t&&(C$99t=this._escapeSpecialSymbol(C$99t),0<this._stack.length?this._resultObjectArray.push({text:C$99t,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:C$99t}))},_escapeSpecialSymbol:function(C$99t){for(var C$99e=0;C$99e<this._specialSymbolArray.length;++C$99e){var C$99i=this._specialSymbolArray[C$99e][0],C$99n=this._specialSymbolArray[C$99e][1];C$99t=C$99t.replace(C$99i,C$99n)}return C$99t}},C$99e.exports=C$99n},{}],262:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCPath"),C$99t("./profiler/CCProfiler"),C$99t("./find"),C$99t("./mutable-forward-iterator")},{"./CCPath":253,"./find":259,"./mutable-forward-iterator":265,"./profiler/CCProfiler":268}],263:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.postLoadMesh=function(C$99i,C$99n){!C$99i.loaded&&C$99i.nativeUrl?cc.loader.load(C$99i.nativeUrl,function(C$99t,C$99e){C$99e&&(C$99i._nativeAsset=C$99e),C$99n&&C$99n(C$99t)}):C$99n&&C$99n()}},{}],264:[function(C$99t,C$99e,C$99i){"use strict";for(var C$99l=C$99t("../platform/js"),C$99t={propertyDefine:function(C$99t,C$99e,C$99i){function C$99n(C$99t,C$99e,C$99i,C$99n){var C$99r=Object.getOwnPropertyDescriptor(C$99t,C$99e);C$99r?(C$99r.get&&(C$99t[C$99i]=C$99r.get),C$99r.set&&C$99n&&(C$99t[C$99n]=C$99r.set)):(C$99r=C$99t[C$99i],C$99l.getset(C$99t,C$99e,C$99r,C$99t[C$99n]))}for(var C$99r=C$99t.prototype,C$99s=0;C$99s<C$99e.length;C$99s++){var C$99o,C$99a=(C$99o=C$99e[C$99s])[0].toUpperCase()+C$99o.slice(1);C$99n(C$99r,C$99o,"get"+C$99a,"set"+C$99a)}for(C$99o in C$99i){var C$99c=C$99i[C$99o];C$99n(C$99r,C$99o,C$99c[0],C$99c[1])}},NextPOT:function(C$99t){return--C$99t,(C$99t=(C$99t=(C$99t=(C$99t=(C$99t|=C$99t>>1)|C$99t>>2)|C$99t>>4)|C$99t>>8)|C$99t>>16)+1},BUILTIN_CLASSID_RE:/^(?:cc|dragonBones|sp|ccsg)\..+/},C$99n=new Array(123),C$99r=0;C$99r<123;++C$99r)C$99n[C$99r]=64;for(var C$99s=0;C$99s<64;++C$99s)C$99n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(C$99s)]=C$99s;C$99t.BASE64_VALUES=C$99n,C$99t.pushToMap=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99t[C$99e];C$99r?Array.isArray(C$99r)?C$99n?(C$99r.push(C$99r[0]),C$99r[0]=C$99i):C$99r.push(C$99i):C$99t[C$99e]=C$99n?[C$99i,C$99r]:[C$99r,C$99i]:C$99t[C$99e]=C$99i},C$99t.clampf=function(C$99t,C$99e,C$99i){var C$99n;return C$99i<C$99e&&(C$99n=C$99e,C$99e=C$99i,C$99i=C$99n),C$99t<C$99e?C$99e:C$99t<C$99i?C$99t:C$99i},C$99t.clamp01=function(C$99t){return C$99t<0?0:C$99t<1?C$99t:1},C$99t.lerp=function(C$99t,C$99e,C$99i){return C$99t+(C$99e-C$99t)*C$99i},C$99t.degreesToRadians=function(C$99t){return C$99t*cc.macro.RAD},C$99t.radiansToDegrees=function(C$99t){return C$99t*cc.macro.DEG},cc.misc=C$99e.exports=C$99t},{"../platform/js":209}],265:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t){this.i=0,this.array=C$99t}var C$99r=C$99n.prototype;C$99r.remove=function(C$99t){C$99t=this.array.indexOf(C$99t);0<=C$99t&&this.removeAt(C$99t)},C$99r.removeAt=function(C$99t){this.array.splice(C$99t,1),C$99t<=this.i&&--this.i},C$99r.fastRemove=function(C$99t){C$99t=this.array.indexOf(C$99t);0<=C$99t&&this.fastRemoveAt(C$99t)},C$99r.fastRemoveAt=function(C$99t){var C$99e=this.array;C$99e[C$99t]=C$99e[C$99e.length-1],--C$99e.length,C$99t<=this.i&&--this.i},C$99r.push=function(C$99t){this.array.push(C$99t)},C$99e.exports=C$99n},{}],266:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;(C$99n=C$99r.prototype).get=function(){},C$99n.put=function(){},C$99n.clear=function(){};var C$99n=C$99r;function C$99r(){this.enabled=!1,this.count=0,this.maxSize=1024}C$99i.default=C$99n,cc.pool={},C$99n.register=function(C$99t,C$99e){cc.pool[C$99t]=C$99e},C$99e.exports=C$99i.default},{}],267:[function(C$99t,C$99e,C$99i){"use strict";cc._PrefabInfo=cc.Class({name:"cc.PrefabInfo",properties:{root:null,asset:null,fileId:"",sync:!1,_synced:{default:!1,serializable:!1}}}),C$99e.exports={syncWithPrefab:function(C$99t){var C$99e=C$99t._prefab;if(C$99e._synced=!0,!C$99e.asset)return cc.errorID(3701,C$99t.name),void(C$99t._prefab=null);var C$99i=C$99t._objFlags,C$99n=C$99t._parent,C$99r=C$99t._id,C$99s=C$99t._name,C$99o=C$99t._active,C$99a=C$99t._eulerAngles.x,C$99h=C$99t._eulerAngles.y,C$99u=C$99t._eulerAngles.z,C$99_=C$99t._localZOrder,C$99d=C$99t._globalZOrder,C$99c=C$99t._trs,C$99f=C$99c[0],C$99p=C$99c[1],C$99m=C$99c[2],C$99l=(cc.game._isCloning=!0,C$99e.asset.data);C$99l._prefab._synced=!0,C$99l._iN$t=C$99t,cc.instantiate._clone(C$99l,C$99l),cc.game._isCloning=!1,C$99t._objFlags=C$99i,C$99t._parent=C$99n,C$99t._id=C$99r,C$99t._prefab=C$99e,C$99t._name=C$99s,C$99t._active=C$99o,C$99t._localZOrder=C$99_,C$99t._globalZOrder=C$99d,(C$99c=C$99t._trs)[0]=C$99f,C$99c[1]=C$99p,C$99c[2]=C$99m,C$99t._eulerAngles.x=C$99a,C$99t._eulerAngles.y=C$99h,C$99t._eulerAngles.z=C$99u}}},{}],268:[function(C$99t,C$99e,C$99h){"use strict";var C$99u=C$99t("../../platform/CCMacro"),C$99_=C$99t("./perf-counter"),C$99i=!1,C$99n=15,C$99s=null,C$99r=null,C$99o=null;function C$99a(){C$99r&&C$99r.isValid||((C$99r=new cc.Node("PROFILER-NODE")).x=C$99r.y=10,C$99r.groupIndex=cc.Node.BuiltinGroupIndex.DEBUG,cc.Camera._setupDebugCamera(),C$99r.zIndex=C$99u.MAX_ZINDEX,cc.game.addPersistRootNode(C$99r),(C$99i=new cc.Node("LEFT-PANEL")).anchorX=C$99i.anchorY=0,(C$99t=C$99i.addComponent(cc.Label)).fontSize=C$99n,C$99t.lineHeight=C$99n,C$99i.parent=C$99r,(C$99i=new cc.Node("RIGHT-PANEL")).anchorX=1,C$99i.anchorY=0,C$99i.x=200,(C$99e=C$99i.addComponent(cc.Label)).horizontalAlign=cc.Label.HorizontalAlign.RIGHT,C$99e.fontSize=C$99n,C$99e.lineHeight=C$99n,C$99i.parent=C$99r,cc.sys.browserType!==cc.sys.BROWSER_TYPE_BAIDU_GAME_SUB&&cc.sys.browserType!==cc.sys.BROWSER_TYPE_WECHAT_GAME_SUB&&(C$99t.cacheMode=cc.Label.CacheMode.CHAR,C$99e.cacheMode=cc.Label.CacheMode.CHAR),C$99o={left:C$99t,right:C$99e});var C$99t,C$99e,C$99i=cc.director._lastUpdate;C$99s.frame._counter.start(C$99i),C$99s.logic._counter.start(C$99i)}function C$99c(){var C$99t=performance.now();cc.director.isPaused()?C$99s.frame._counter.start(C$99t):C$99s.logic._counter.end(C$99t),C$99s.render._counter.start(C$99t)}function C$99l(){var C$99t,C$99e=performance.now(),C$99i=(C$99s.render._counter.end(C$99e),C$99s.draws._counter.value=cc.renderer.drawCalls,C$99s.frame._counter.end(C$99e),C$99s.fps._counter.frame(C$99e),""),C$99n="";for(C$99t in C$99s){var C$99r=C$99s[C$99t];C$99r._counter.sample(C$99e),C$99i+=C$99r.desc+"\n",C$99n+=C$99r._counter.human()+"\n"}C$99o&&(C$99o.left.string=C$99i,C$99o.right.string=C$99n)}cc.profiler=C$99e.exports={isShowingStats:function(){return C$99i},hideStats:function(){C$99i&&(C$99r&&(C$99r.active=!1),cc.director.off(cc.Director.EVENT_BEFORE_UPDATE,C$99a),cc.director.off(cc.Director.EVENT_AFTER_UPDATE,C$99c),cc.director.off(cc.Director.EVENT_AFTER_DRAW,C$99l),C$99i=!1)},showStats:function(){if(!C$99i){if(!C$99s){C$99s={frame:{desc:"Frame time (ms)",min:0,max:50,average:500},fps:{desc:"Framerate (FPS)",below:30,average:500},draws:{desc:"Draw call"},logic:{desc:"Game Logic (ms)",min:0,max:50,average:500,color:"#080"},render:{desc:"Renderer (ms)",min:0,max:50,average:500,color:"#f90"},mode:{desc:cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WebGL":"Canvas",min:1}};var C$99t,C$99e=performance.now();for(C$99t in C$99s)C$99s[C$99t]._counter=new C$99_(C$99t,C$99s[C$99t],C$99e)}C$99r&&(C$99r.active=!0),cc.director.on(cc.Director.EVENT_BEFORE_UPDATE,C$99a),cc.director.on(cc.Director.EVENT_AFTER_UPDATE,C$99c),cc.director.on(cc.Director.EVENT_AFTER_DRAW,C$99l),C$99i=!0}}}},{"../../platform/CCMacro":194,"./perf-counter":270}],269:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.Counter",ctor:function(C$99t,C$99e,C$99i){this._id=C$99t,this._opts=C$99e||{},this._value=0,this._total=0,this._averageValue=0,this._accumValue=0,this._accumSamples=0,this._accumStart=C$99i},properties:{value:{get:function(){return this._value},set:function(C$99t){this._value=C$99t}}},_average:function(C$99t,C$99e){this._opts.average&&(this._accumValue+=C$99t,++this._accumSamples,(C$99t=C$99e)-this._accumStart>=this._opts.average&&(this._averageValue=this._accumValue/this._accumSamples,this._accumValue=0,this._accumStart=C$99t,this._accumSamples=0))},sample:function(C$99t){this._average(this._value,C$99t)},human:function(){var C$99t=this._opts.average?this._averageValue:this._value;return Math.round(100*C$99t)/100},alarm:function(){return this._opts.below&&this._value<this._opts.below||this._opts.over&&this._value>this._opts.over}});C$99e.exports=C$99n},{}],270:[function(C$99t,C$99e,C$99i){"use strict";C$99t=C$99t("./counter"),C$99t=cc.Class({name:"cc.PerfCounter",extends:C$99t,ctor:function(C$99t,C$99e,C$99i){this._time=C$99i},start:function(C$99t){this._time=C$99t},end:function(C$99t){this._value=C$99t-this._time,this._average(this._value)},tick:function(){this.end(),this.start()},frame:function(C$99t){var C$99e=C$99t-this._time;this._total++,(this._opts.average||1e3)<C$99e&&(this._value=1e3*this._total/C$99e,this._total=0,this._time=C$99t,this._average(this._value))}});C$99e.exports=C$99t},{"./counter":269}],271:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=new((C$99t=C$99t("../platform/js"))&&C$99t.__esModule?C$99t:{default:C$99t}).default.Pool(2);function C$99r(C$99t){this.count=0,this.limit=C$99t,this.datas={},this.head=null,this.tail=null}C$99n.get=function(){return this._get()||{key:null,value:null,prev:null,next:null}},C$99r.prototype.moveToHead=function(C$99t){C$99t.next=this.head,(C$99t.prev=null)!==this.head&&(this.head.prev=C$99t),this.head=C$99t,null===this.tail&&(this.tail=C$99t),this.count++,this.datas[C$99t.key]=C$99t},C$99r.prototype.put=function(C$99t,C$99e){var C$99i=C$99n.get();C$99i.key=C$99t,C$99i.value=C$99e,this.count>=this.limit&&(C$99t=this.tail,delete this.datas[C$99t.key],this.count--,this.tail=C$99t.prev,this.tail.next=null,C$99t.prev=null,C$99t.next=null,C$99n.put(C$99t)),this.moveToHead(C$99i)},C$99r.prototype.remove=function(C$99t){null!==C$99t.prev?C$99t.prev.next=C$99t.next:this.head=C$99t.next,null!==C$99t.next?C$99t.next.prev=C$99t.prev:this.tail=C$99t.prev,delete this.datas[C$99t.key],this.count--},C$99r.prototype.get=function(C$99t){C$99t=this.datas[C$99t];return C$99t?(this.remove(C$99t),this.moveToHead(C$99t),C$99t.value):null},C$99r.prototype.clear=function(){this.count=0,this.datas={},this.head=null,this.tail=null},C$99r.prototype.has=function(C$99t){return!!this.datas[C$99t]},C$99r.prototype.delete=function(C$99t){C$99t=this.datas[C$99t];this.remove(C$99t)};var C$99s=new C$99r(100);cc.textUtils=C$99e.exports={BASELINE_RATIO:.26,MIDDLE_RATIO:.37,BASELINE_OFFSET:0,label_wordRex:/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430-\u044f\u0410-\u042f\u0401\u0451]+|\S)/,label_symbolRex:/^[!,.:;'}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/,label_lastWordRex:/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+|\S)$/,label_lastEnglish:/[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+$/,label_firstEnglish:/^[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]/,highSurrogateRex:/[\uD800-\uDBFF]/,lowSurrogateRex:/[\uDC00-\uDFFF]/,label_wrapinspection:!0,__CHINESE_REG:/^[\u4E00-\u9FFF\u3400-\u4DFF]+$/,__JAPANESE_REG:/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g,__KOREAN_REG:/^[\u1100-\u11FF]|[\u3130-\u318F]|[\uA960-\uA97F]|[\uAC00-\uD7AF]|[\uD7B0-\uD7FF]+$/,isUnicodeCJK:function(C$99t){return this.__CHINESE_REG.test(C$99t)||this.__JAPANESE_REG.test(C$99t)||this.__KOREAN_REG.test(C$99t)},isUnicodeSpace:function(C$99t){return 9<=(C$99t=C$99t.charCodeAt(0))&&C$99t<=13||32===C$99t||133===C$99t||160===C$99t||5760===C$99t||8192<=C$99t&&C$99t<=8202||8232===C$99t||8233===C$99t||8239===C$99t||8287===C$99t||12288===C$99t},safeMeasureText:function(C$99t,C$99e,C$99i){var C$99i=(C$99i||C$99t.font)+"ðŸŽ®"+C$99e,C$99n=C$99s.get(C$99i);if(null!==C$99n)return C$99n;C$99n=C$99t.measureText(C$99e),C$99t=C$99n&&C$99n.width||0;return C$99s.put(C$99i,C$99t),C$99t},_safeSubstring:function(C$99t,C$99e,C$99i){var C$99n=C$99e,C$99r=C$99i,C$99s=C$99t[C$99e];return this.lowSurrogateRex.test(C$99s)&&C$99n--,void 0!==C$99i&&(C$99i-1!==C$99e?(C$99e=C$99t[C$99i-1],this.highSurrogateRex.test(C$99e)&&C$99r--):this.highSurrogateRex.test(C$99s)&&C$99r++),C$99t.substring(C$99n,C$99r)},fragmentText:function(C$99h,C$99t,C$99e,C$99u){var C$99i=[];if(0===C$99h.length||C$99e<0)return C$99i.push(""),C$99i;for(var C$99n=C$99h;C$99e<C$99t&&1<C$99n.length;){for(var C$99_,C$99r=C$99n.length*(C$99e/C$99t)|0,C$99s=this._safeSubstring(C$99n,C$99r),C$99o=C$99t-C$99u(C$99s),C$99a=C$99s,C$99d=0,C$99f=0;C$99e<C$99o&&C$99f++<10;)C$99o=C$99t-C$99u(C$99s=this._safeSubstring(C$99n,C$99r=C$99r*(C$99e/C$99o)|0));for(C$99f=0;C$99o<=C$99e&&C$99f++<10;)C$99s&&(C$99d=(C$99_=this.label_wordRex.exec(C$99s))?C$99_[0].length:1,C$99a=C$99s),C$99r+=C$99d,C$99o=C$99t-C$99u(C$99s=this._safeSubstring(C$99n,C$99r));0===(C$99r-=C$99d)?C$99a=this._safeSubstring(C$99n,C$99r=1):1===C$99r&&this.highSurrogateRex.test(C$99n[0])&&(C$99a=this._safeSubstring(C$99n,C$99r=2));var C$99c,C$99l=this._safeSubstring(C$99n,0,C$99r);this.label_wrapinspection&&this.label_symbolRex.test(C$99a||C$99s)&&(0===(C$99r-=(C$99c=this.label_lastWordRex.exec(C$99l))?C$99c[0].length:0)&&(C$99r=1),C$99a=this._safeSubstring(C$99n,C$99r),C$99l=this._safeSubstring(C$99n,0,C$99r)),this.label_firstEnglish.test(C$99a)&&(C$99c=this.label_lastEnglish.exec(C$99l))&&C$99l!==C$99c[0]&&(C$99r-=C$99c[0].length,C$99a=this._safeSubstring(C$99n,C$99r),C$99l=this._safeSubstring(C$99n,0,C$99r)),(0===C$99i.length||0<(C$99l=C$99l.trimLeft()).length)&&C$99i.push(C$99l),C$99t=C$99u(C$99n=C$99a||C$99s)}return(0===C$99i.length||0<(C$99n=C$99n.trimLeft()).length)&&C$99i.push(C$99n),C$99i}}},{"../platform/js":209}],272:[function(C$99t,C$99e,C$99i){"use strict";var C$99r=C$99t("../assets/CCTexture2D");cc.textureUtil=C$99e.exports={loadImage:function(C$99t,C$99i,C$99n){cc.assertID(C$99t,3103);var C$99e=cc.loader.getRes(C$99t);return C$99e?C$99e.loaded?C$99i&&C$99i.call(C$99n,null,C$99e):C$99e.once("load",function(){C$99i&&C$99i.call(C$99n,null,C$99e)},C$99n):((C$99e=new C$99r).url=C$99t,cc.loader.load({url:C$99t,texture:C$99e},function(C$99t,C$99e){if(C$99t)return C$99i&&C$99i.call(C$99n,C$99t||new Error("Unknown error"));C$99e.handleLoadedTexture(),C$99i&&C$99i.call(C$99n,null,C$99e)})),C$99e},cacheImage:function(C$99t,C$99e){var C$99i;if(C$99t&&C$99e)return(C$99i=new C$99r).initWithElement(C$99e),cc.loader.flowOut({id:C$99t,url:C$99t,error:null,content:C$99i,complete:!1}),C$99i},postLoadTexture:function(C$99i,C$99n){!C$99i.loaded&&C$99i.url?cc.loader.load({url:C$99i.url,skips:C$99i._isCompressed()?void 0:["Loader"]},function(C$99t,C$99e){if(C$99e){if(C$99e instanceof cc.Texture2D)return cc.error("internal error: loader handle pipe must be skipped");C$99i.loaded||(C$99i._nativeAsset=C$99e)}C$99n&&C$99n(C$99t)}):C$99n&&C$99n()}}},{"../assets/CCTexture2D":50}],273:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./node-unit"),C$99t=C$99t("./node-mem-pool");C$99e.exports={NodeMemPool:new C$99t(C$99n)}},{"./node-mem-pool":275,"./node-unit":276}],274:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t){this._unitClass=C$99t,this._pool=[],this._findOrder=[]}var C$99r=C$99n.prototype;C$99r._initNative=function(){this._nativeMemPool=new renderer.MemPool},C$99r._buildUnit=function(C$99t){return new this._unitClass(C$99t,this)},C$99r._destroyUnit=function(C$99t){this._pool[C$99t]=null;for(var C$99e=0,C$99i=this._findOrder.length;C$99e<C$99i;C$99e++){var C$99n=this._findOrder[C$99e];if(C$99n&&C$99n.unitID==C$99t){this._findOrder.splice(C$99e,1);break}}},C$99r._findUnitID=function(){for(var C$99t=0,C$99e=this._pool;C$99e[C$99t];)C$99t++;return C$99t},C$99r.pop=function(){for(var C$99t,C$99e=null,C$99i=0,C$99n=this._findOrder,C$99r=this._pool,C$99s=C$99n.length;C$99i<C$99s;C$99i++){var C$99o=C$99n[C$99i];if(C$99o&&C$99o.hasSpace()){C$99e=C$99o;break}}C$99e||(C$99t=this._findUnitID(),C$99e=this._buildUnit(C$99t),C$99r[C$99t]=C$99e,C$99n.push(C$99e),C$99i=C$99n.length-1);C$99r=C$99n[0];return C$99r!==C$99e&&(C$99n[0]=C$99e,C$99n[C$99i]=C$99r),C$99e.pop()},C$99r.push=function(C$99t){var C$99e=this._pool[C$99t.unitID];return C$99e.push(C$99t.index),1<this._findOrder.length&&C$99e.isAllFree()&&this._destroyUnit(C$99t.unitID),C$99e},C$99e.exports=C$99n},{}],275:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t){C$99r.call(this,C$99t)}var C$99r=C$99t("./mem-pool");function C$99s(){}C$99s.prototype=C$99r.prototype;C$99t=C$99n.prototype=new C$99s;C$99t._initNative=function(){this._nativeMemPool=new renderer.NodeMemPool},C$99t._destroyUnit=function(C$99t){C$99r.prototype._destroyUnit.call(this,C$99t)},C$99e.exports=C$99n},{"./mem-pool":274}],276:[function(C$99t,C$99e,C$99r){"use strict";function C$99i(C$99t,C$99e){C$99l.call(this,C$99t,C$99e);var C$99i=this._contentNum;this.trsList=new C$99s.FLOAT_ARRAY_TYPE(10*C$99i),this.localMatList=new C$99s.FLOAT_ARRAY_TYPE(16*C$99i),this.worldMatList=new C$99s.FLOAT_ARRAY_TYPE(16*C$99i);for(var C$99n=0;C$99n<C$99i;C$99n++){var C$99r=this._spacesData[C$99n];C$99r.trs=new C$99s.FLOAT_ARRAY_TYPE(this.trsList.buffer,C$99n*C$99o,10),C$99r.localMat=new C$99s.FLOAT_ARRAY_TYPE(this.localMatList.buffer,C$99n*C$99a,16),C$99r.worldMat=new C$99s.FLOAT_ARRAY_TYPE(this.worldMatList.buffer,C$99n*C$99c,16)}}var C$99s=C$99t("../../value-types/utils"),C$99o=(Uint32Array,10*C$99s.FLOAT_BYTES),C$99a=16*C$99s.FLOAT_BYTES,C$99c=16*C$99s.FLOAT_BYTES,C$99l=(Uint32Array,Uint32Array,Int32Array,Uint8Array,Uint8Array,Uint32Array,C$99s.FLOAT_BYTES,C$99t("./unit-base"));function C$99n(){}C$99n.prototype=C$99l.prototype,C$99i.prototype=new C$99n,C$99e.exports=C$99i},{"../../value-types/utils":286,"./unit-base":277}],277:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e,C$99i){C$99i=C$99i||128,this.unitID=C$99t,this._memPool=C$99e,this._data=new Uint16Array(2),this._data[0]=0,this._data[1]=0,this._contentNum=C$99i,this._signData=new Uint16Array(2*this._contentNum),this._spacesData=[];for(var C$99n=0;C$99n<C$99i;C$99n++){var C$99r=2*C$99n;this._signData[0+C$99r]=C$99n+1,this._signData[1+C$99r]=0,this._spacesData[C$99n]={index:C$99n,unitID:C$99t}}this._signData[2*(C$99i-1)]=65535}var C$99r=C$99n.prototype;C$99r.hasSpace=function(){return 65535!==this._data[0]},C$99r.isAllFree=function(){return 0==this._data[1]},C$99r.pop=function(){var C$99t=this._data[0];if(65535===C$99t)return null;var C$99e=2*C$99t,C$99t=this._spacesData[C$99t];return this._signData[1+C$99e]=1,this._data[0]=this._signData[0+C$99e],this._data[1]++,C$99t},C$99r.push=function(C$99t){var C$99e=2*C$99t;this._signData[1+C$99e]=0,this._signData[0+C$99e]=this._data[0],this._data[0]=C$99t,this._data[1]--},C$99r.dump=function(){for(var C$99t=0,C$99e=this._data[0],C$99i="";65535!=C$99e;)C$99t++,C$99i+=C$99e+"->",C$99e=this._signData[2*C$99e+0];for(var C$99n=0,C$99r="",C$99s=this._contentNum,C$99o=0;C$99o<C$99s;C$99o++)1==this._signData[2*C$99o+1]&&(C$99n++,C$99r+=C$99o+"->");var C$99a=C$99t+C$99n;console.log("unitID:",this.unitID,"spaceNum:",C$99t,"calc using num:",C$99n,"store using num:",this._data[1],"calc total num:",C$99a,"actually total num:",this._contentNum),console.log("free info:",C$99i),console.log("using info:",C$99r),C$99n!=this._data[1]&&cc.error("using num error","calc using num:",C$99n,"store using num:",this._data[1]),C$99t+C$99n!=this._contentNum&&cc.error("total num error","calc total num:",C$99a,"actually total num:",this._contentNum)},C$99e.exports=C$99n},{}],278:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99s(C$99t("./value-type")),C$99h=C$99s(C$99t("../platform/CCClass")),C$99r=C$99s(C$99t("../utils/misc"));function C$99s(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99o(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99c(C$99t,C$99e,C$99i){return C$99e&&C$99o(C$99t.prototype,C$99e),C$99i&&C$99o(C$99t,C$99i),C$99t}function C$99u(C$99i){return function(){var C$99t,C$99e=C$99a(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99a(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99a(C$99t){return(C$99a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99l=function(C$99s){var C$99t;C$99t=C$99s,(C$99e=C$99a).prototype=Object.create(C$99t.prototype),(C$99e.prototype.constructor=C$99e).__proto__=C$99t,C$99u(C$99a);function C$99a(C$99t,C$99e,C$99i,C$99n){var C$99r;return void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=255),(C$99r=C$99s.call(this)||this)._val=0,"object"==typeof C$99t&&(C$99e=C$99t.g,C$99i=C$99t.b,C$99n=C$99t.a,C$99t=C$99t.r),C$99r._val=(C$99n<<24>>>0)+(C$99i<<16)+(C$99e<<8)+C$99t,C$99r}C$99a.copy=function(C$99t,C$99e){return C$99t.r=C$99e.r,C$99t.g=C$99e.g,C$99t.b=C$99e.b,C$99t.a=C$99e.a,C$99t},C$99a.clone=function(C$99t){return new C$99a(C$99t.r,C$99t.g,C$99t.b,C$99t.a)},C$99a.set=function(C$99t,C$99e,C$99i,C$99n,C$99r){return void 0===C$99i&&(C$99i=255),void 0===C$99n&&(C$99n=255),void 0===C$99r&&(C$99r=255),C$99t.r=C$99e=void 0===C$99e?255:C$99e,C$99t.g=C$99i,C$99t.b=C$99n,C$99t.a=C$99r,C$99t},C$99a.fromHex=function(C$99t,C$99e){var C$99i=(C$99e>>16&255)/255,C$99n=(C$99e>>8&255)/255,C$99r=(255&C$99e)/255;return C$99t.r=(C$99e>>24)/255,C$99t.g=C$99i,C$99t.b=C$99n,C$99t.a=C$99r,C$99t},C$99a.add=function(C$99t,C$99e,C$99i){return C$99t.r=C$99e.r+C$99i.r,C$99t.g=C$99e.g+C$99i.g,C$99t.b=C$99e.b+C$99i.b,C$99t.a=C$99e.a+C$99i.a,C$99t},C$99a.subtract=function(C$99t,C$99e,C$99i){return C$99t.r=C$99e.r-C$99i.r,C$99t.g=C$99e.g-C$99i.g,C$99t.b=C$99e.b-C$99i.b,C$99t.a=C$99e.a-C$99i.a,C$99t},C$99a.multiply=function(C$99t,C$99e,C$99i){return C$99t.r=C$99e.r*C$99i.r,C$99t.g=C$99e.g*C$99i.g,C$99t.b=C$99e.b*C$99i.b,C$99t.a=C$99e.a*C$99i.a,C$99t},C$99a.divide=function(C$99t,C$99e,C$99i){return C$99t.r=C$99e.r/C$99i.r,C$99t.g=C$99e.g/C$99i.g,C$99t.b=C$99e.b/C$99i.b,C$99t.a=C$99e.a/C$99i.a,C$99t},C$99a.scale=function(C$99t,C$99e,C$99i){return C$99t.r=C$99e.r*C$99i,C$99t.g=C$99e.g*C$99i,C$99t.b=C$99e.b*C$99i,C$99t.a=C$99e.a*C$99i,C$99t},C$99a.lerp=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99e.r,C$99s=C$99e.g,C$99o=C$99e.b,C$99e=C$99e.a;return C$99t.r=C$99r+C$99n*(C$99i.r-C$99r),C$99t.g=C$99s+C$99n*(C$99i.g-C$99s),C$99t.b=C$99o+C$99n*(C$99i.b-C$99o),C$99t.a=C$99e+C$99n*(C$99i.a-C$99e),C$99t},C$99a.toArray=function(C$99t,C$99e,C$99i){var C$99n=C$99e instanceof C$99a||1<C$99e.a?1/255:1;return C$99t[(C$99i=void 0===C$99i?0:C$99i)+0]=C$99e.r*C$99n,C$99t[C$99i+1]=C$99e.g*C$99n,C$99t[C$99i+2]=C$99e.b*C$99n,C$99t[C$99i+3]=C$99e.a*C$99n,C$99t},C$99a.fromArray=function(C$99t,C$99e,C$99i){return C$99e.r=255*C$99t[(C$99i=void 0===C$99i?0:C$99i)+0],C$99e.g=255*C$99t[C$99i+1],C$99e.b=255*C$99t[C$99i+2],C$99e.a=255*C$99t[C$99i+3],C$99e},C$99c(C$99a,null,[{key:"WHITE",get:function(){return new C$99a(255,255,255,255)}},{key:"BLACK",get:function(){return new C$99a(0,0,0,255)}},{key:"TRANSPARENT",get:function(){return new C$99a(0,0,0,0)}},{key:"GRAY",get:function(){return new C$99a(127.5,127.5,127.5)}},{key:"RED",get:function(){return new C$99a(255,0,0)}},{key:"GREEN",get:function(){return new C$99a(0,255,0)}},{key:"BLUE",get:function(){return new C$99a(0,0,255)}},{key:"YELLOW",get:function(){return new C$99a(255,235,4)}},{key:"ORANGE",get:function(){return new C$99a(255,127,0)}},{key:"CYAN",get:function(){return new C$99a(0,255,255)}},{key:"MAGENTA",get:function(){return new C$99a(255,0,255)}}]);var C$99e=C$99a.prototype;return C$99e.clone=function(){var C$99t=new C$99a;return C$99t._val=this._val,C$99t},C$99e.equals=function(C$99t){return C$99t&&this._val===C$99t._val},C$99e.lerp=function(C$99t,C$99e,C$99i){C$99i=C$99i||new C$99a;var C$99n=this.r,C$99r=this.g,C$99s=this.b,C$99o=this.a;return C$99i.r=C$99n+(C$99t.r-C$99n)*C$99e,C$99i.g=C$99r+(C$99t.g-C$99r)*C$99e,C$99i.b=C$99s+(C$99t.b-C$99s)*C$99e,C$99i.a=C$99o+(C$99t.a-C$99o)*C$99e,C$99i},C$99e.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},C$99e.getR=function(){return 255&this._val},C$99e.setR=function(C$99t){return C$99t=~~C$99r.default.clampf(C$99t,0,255),this._val=(4294967040&this._val|C$99t)>>>0,this},C$99e.getG=function(){return(65280&this._val)>>8},C$99e.setG=function(C$99t){return C$99t=~~C$99r.default.clampf(C$99t,0,255),this._val=(4294902015&this._val|C$99t<<8)>>>0,this},C$99e.getB=function(){return(16711680&this._val)>>16},C$99e.setB=function(C$99t){return C$99t=~~C$99r.default.clampf(C$99t,0,255),this._val=(4278255615&this._val|C$99t<<16)>>>0,this},C$99e.getA=function(){return(4278190080&this._val)>>>24},C$99e.setA=function(C$99t){return C$99t=~~C$99r.default.clampf(C$99t,0,255),this._val=(16777215&this._val|C$99t<<24)>>>0,this},C$99e.toCSS=function(C$99t){return C$99t&&"rgba"!==C$99t?"rgb"===C$99t?"rgb("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+")":"#"+this.toHEX(C$99t):"rgba("+(0|this.r)+","+(0|this.g)+","+(0|this.b)+","+(this.a/255).toFixed(2)+")"},C$99e.fromHEX=function(C$99t){C$99t=0===C$99t.indexOf("#")?C$99t.substring(1):C$99t;var C$99e=parseInt(C$99t.substr(0,2),16)||0,C$99i=parseInt(C$99t.substr(2,2),16)||0,C$99n=parseInt(C$99t.substr(4,2),16)||0,C$99t=parseInt(C$99t.substr(6,2),16)||255;return this._val=(C$99t<<24>>>0)+(C$99n<<16)+(C$99i<<8)+C$99e,this},C$99e.toHEX=function(C$99t){var C$99e=[(this.r<16?"0":"")+(0|this.r).toString(16),(this.g<16?"0":"")+(0|this.g).toString(16),(this.b<16?"0":"")+(0|this.b).toString(16)],C$99i=-1;if("#rgb"===C$99t)for(C$99i=0;C$99i<C$99e.length;++C$99i)1<C$99e[C$99i].length&&(C$99e[C$99i]=C$99e[C$99i][0]);else if("#rrggbb"===C$99t)for(C$99i=0;C$99i<C$99e.length;++C$99i)1===C$99e[C$99i].length&&(C$99e[C$99i]="0"+C$99e[C$99i]);else"#rrggbbaa"===C$99t&&C$99e.push((this.a<16?"0":"")+(0|this.a).toString(16));return C$99e.join("")},C$99e.toRGBValue=function(){return 16777215&this._val},C$99e.fromHSV=function(C$99t,C$99e,C$99i){var C$99n,C$99r,C$99s;if(0===C$99e)C$99n=C$99r=C$99s=C$99i;else if(0===C$99i)C$99n=C$99r=C$99s=0;else{1===C$99t&&(C$99t=0),C$99t*=6;var C$99o=Math.floor(C$99t),C$99t=C$99t-C$99o,C$99a=C$99i*(1-C$99e),C$99c=C$99i*(1-C$99e*C$99t),C$99l=C$99i*(1-C$99e*(1-C$99t));switch(C$99o){case 0:C$99n=C$99i,C$99r=C$99l,C$99s=C$99a;break;case 1:C$99n=C$99c,C$99r=C$99i,C$99s=C$99a;break;case 2:C$99n=C$99a,C$99r=C$99i,C$99s=C$99l;break;case 3:C$99n=C$99a,C$99r=C$99c,C$99s=C$99i;break;case 4:C$99n=C$99l,C$99r=C$99a,C$99s=C$99i;break;case 5:C$99n=C$99i,C$99r=C$99a,C$99s=C$99c}}return this._val=(this.a<<24>>>0)+((C$99s*=255)<<16)+((C$99r*=255)<<8)+(C$99n*=255),this},C$99e.toHSV=function(){var C$99t=this.r/255,C$99e=this.g/255,C$99i=this.b/255,C$99n={h:0,s:0,v:0},C$99r=Math.max(C$99t,C$99e,C$99i),C$99s=Math.min(C$99t,C$99e,C$99i);return C$99n.v=C$99r,C$99n.s=C$99r?(C$99r-C$99s)/C$99r:0,C$99n.s?(C$99s=C$99r-C$99s,C$99n.h=C$99t===C$99r?(C$99e-C$99i)/C$99s:C$99e===C$99r?2+(C$99i-C$99t)/C$99s:4+(C$99t-C$99e)/C$99s,C$99n.h/=6,C$99n.h<0&&(C$99n.h+=1)):C$99n.h=0,C$99n},C$99e.set=function(C$99t){return C$99t._val?this._val=C$99t._val:(this.r=C$99t.r,this.g=C$99t.g,this.b=C$99t.b,this.a=C$99t.a),this},C$99e._fastSetA=function(C$99t){this._val=(16777215&this._val|C$99t<<24)>>>0},C$99e.multiply=function(C$99t){var C$99e=(255&this._val)*C$99t.r>>8,C$99i=(65280&this._val)*C$99t.g>>8,C$99n=(16711680&this._val)*C$99t.b>>8,C$99t=((4278190080&this._val)>>>8)*C$99t.a;return this._val=4278190080&C$99t|16711680&C$99n|65280&C$99i|255&C$99e,this},C$99c(C$99a,[{key:"r",get:function(){return this.getR()},set:function(C$99t){this.setR(C$99t)}},{key:"g",get:function(){return this.getG()},set:function(C$99t){this.setG(C$99t)}},{key:"b",get:function(){return this.getB()},set:function(C$99t){this.setB(C$99t)}},{key:"a",get:function(){return this.getA()},set:function(C$99t){this.setA(C$99t)}}]),C$99a}(C$99n.default);(C$99i.default=C$99l).div=C$99l.divide,C$99l.sub=C$99l.subtract,C$99l.mul=C$99l.multiply,C$99l.WHITE_R=C$99l.WHITE,C$99l.BLACK_R=C$99l.BLACK,C$99l.TRANSPARENT_R=C$99l.TRANSPARENT,C$99l.GRAY_R=C$99l.GRAY,C$99l.RED_R=C$99l.RED,C$99l.GREEN_R=C$99l.GREEN,C$99l.BLUE_R=C$99l.BLUE,C$99l.YELLOW_R=C$99l.YELLOW,C$99l.ORANGE_R=C$99l.ORANGE,C$99l.CYAN_R=C$99l.CYAN,C$99l.MAGENTA_R=C$99l.MAGENTA,C$99h.default.fastDefine("cc.Color",C$99l,{r:0,g:0,b:0,a:255}),cc.Color=C$99l,cc.color=function(C$99t,C$99e,C$99i,C$99n){return"string"!=typeof C$99t?"object"==typeof C$99t?new C$99l(C$99t.r,C$99t.g,C$99t.b,C$99t.a):new C$99l(C$99t,C$99e,C$99i,C$99n):(new C$99l).fromHEX(C$99t)},C$99e.exports=C$99i.default},{"../platform/CCClass":189,"../utils/misc":264,"./value-type":287}],279:[function(C$99t,C$99e,C$99i){"use strict";var C$99n={Vec2:C$99i.__esModule=!0,Vec3:!0,Vec4:!0,Mat4:!0,Mat3:!0,Rect:!0,Size:!0,Color:!0,Quat:!0,Trs:!0},C$99r=(C$99i.Trs=C$99i.Quat=C$99i.Color=C$99i.Size=C$99i.Rect=C$99i.Mat3=C$99i.Mat4=C$99i.Vec4=C$99i.Vec3=C$99i.Vec2=void 0,C$99o(C$99t("./vec2"))),C$99r=(C$99i.Vec2=C$99r.default,C$99o(C$99t("./vec3"))),C$99r=(C$99i.Vec3=C$99r.default,C$99o(C$99t("./vec4"))),C$99r=(C$99i.Vec4=C$99r.default,C$99o(C$99t("./mat4"))),C$99r=(C$99i.Mat4=C$99r.default,C$99o(C$99t("./mat3"))),C$99r=(C$99i.Mat3=C$99r.default,C$99o(C$99t("./rect"))),C$99r=(C$99i.Rect=C$99r.default,C$99o(C$99t("./size"))),C$99r=(C$99i.Size=C$99r.default,C$99o(C$99t("./color"))),C$99r=(C$99i.Color=C$99r.default,C$99o(C$99t("./quat"))),C$99r=(C$99i.Quat=C$99r.default,C$99o(C$99t("./trs"))),C$99s=(C$99i.Trs=C$99r.default,C$99t("./utils"));function C$99o(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}Object.keys(C$99s).forEach(function(C$99t){"default"!==C$99t&&"__esModule"!==C$99t&&(Object.prototype.hasOwnProperty.call(C$99n,C$99t)||(C$99i[C$99t]=C$99s[C$99t]))}),cc.math=C$99e.exports},{"./color":278,"./mat3":280,"./mat4":281,"./quat":282,"./rect":283,"./size":284,"./trs":285,"./utils":286,"./vec2":288,"./vec3":289,"./vec4":290}],280:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99g=C$99t("../value-types/utils"),C$99o=(C$99t=C$99t("./vec3"))&&C$99t.__esModule?C$99t:{default:C$99t};C$99l.create=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){return new C$99l(C$99t=void 0===C$99t?1:C$99t,C$99e=void 0===C$99e?0:C$99e,C$99i=void 0===C$99i?0:C$99i,C$99n=void 0===C$99n?0:C$99n,C$99r=void 0===C$99r?1:C$99r,C$99s=void 0===C$99s?0:C$99s,C$99o=void 0===C$99o?0:C$99o,C$99a=void 0===C$99a?0:C$99a,C$99c=void 0===C$99c?1:C$99c)},C$99l.clone=function(C$99t){C$99t=C$99t.m;return new C$99l(C$99t[0],C$99t[1],C$99t[2],C$99t[3],C$99t[4],C$99t[5],C$99t[6],C$99t[7],C$99t[8])},C$99l.copy=function(C$99t,C$99e){return C$99t.m.set(C$99e.m),C$99t},C$99l.set=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99h){var C$99l=C$99t.m;return C$99l[0]=C$99e,C$99l[1]=C$99i,C$99l[2]=C$99n,C$99l[3]=C$99r,C$99l[4]=C$99s,C$99l[5]=C$99o,C$99l[6]=C$99a,C$99l[7]=C$99c,C$99l[8]=C$99h,C$99t},C$99l.identity=function(C$99t){var C$99e=C$99t.m;return C$99e[0]=1,C$99e[1]=0,C$99e[2]=0,C$99e[3]=0,C$99e[4]=1,C$99e[5]=0,C$99e[6]=0,C$99e[7]=0,C$99e[8]=1,C$99t},C$99l.transpose=function(C$99t,C$99e){var C$99i,C$99n,C$99r=C$99e.m,C$99s=C$99t.m;return C$99t===C$99e?(C$99e=C$99r[1],C$99i=C$99r[2],C$99n=C$99r[5],C$99s[1]=C$99r[3],C$99s[2]=C$99r[6],C$99s[3]=C$99e,C$99s[5]=C$99r[7],C$99s[6]=C$99i,C$99s[7]=C$99n):(C$99s[0]=C$99r[0],C$99s[1]=C$99r[3],C$99s[2]=C$99r[6],C$99s[3]=C$99r[1],C$99s[4]=C$99r[4],C$99s[5]=C$99r[7],C$99s[6]=C$99r[2],C$99s[7]=C$99r[5],C$99s[8]=C$99r[8]),C$99t},C$99l.invert=function(C$99h,C$99t){var C$99t=C$99t.m,C$99e=C$99h.m,C$99i=C$99t[0],C$99n=C$99t[1],C$99r=C$99t[2],C$99s=C$99t[3],C$99o=C$99t[4],C$99a=C$99t[5],C$99c=C$99t[6],C$99u=C$99t[7],C$99t=C$99t[8],C$99_=C$99t*C$99o-C$99a*C$99u,C$99d=-C$99t*C$99s+C$99a*C$99c,C$99f=C$99u*C$99s-C$99o*C$99c,C$99l=C$99i*C$99_+C$99n*C$99d+C$99r*C$99f;return C$99l&&(C$99e[0]=C$99_*(C$99l=1/C$99l),C$99e[1]=(-C$99t*C$99n+C$99r*C$99u)*C$99l,C$99e[2]=(C$99a*C$99n-C$99r*C$99o)*C$99l,C$99e[3]=C$99d*C$99l,C$99e[4]=(C$99t*C$99i-C$99r*C$99c)*C$99l,C$99e[5]=(-C$99a*C$99i+C$99r*C$99s)*C$99l,C$99e[6]=C$99f*C$99l,C$99e[7]=(-C$99u*C$99i+C$99n*C$99c)*C$99l,C$99e[8]=(C$99o*C$99i-C$99n*C$99s)*C$99l),C$99h},C$99l.adjoint=function(C$99h,C$99t){var C$99t=C$99t.m,C$99e=C$99h.m,C$99i=C$99t[0],C$99n=C$99t[1],C$99r=C$99t[2],C$99s=C$99t[3],C$99o=C$99t[4],C$99a=C$99t[5],C$99c=C$99t[6],C$99l=C$99t[7],C$99t=C$99t[8];return C$99e[0]=C$99o*C$99t-C$99a*C$99l,C$99e[1]=C$99r*C$99l-C$99n*C$99t,C$99e[2]=C$99n*C$99a-C$99r*C$99o,C$99e[3]=C$99a*C$99c-C$99s*C$99t,C$99e[4]=C$99i*C$99t-C$99r*C$99c,C$99e[5]=C$99r*C$99s-C$99i*C$99a,C$99e[6]=C$99s*C$99l-C$99o*C$99c,C$99e[7]=C$99n*C$99c-C$99i*C$99l,C$99e[8]=C$99i*C$99o-C$99n*C$99s,C$99h},C$99l.determinant=function(C$99t){var C$99t=C$99t.m,C$99e=C$99t[0],C$99i=C$99t[1],C$99n=C$99t[2],C$99r=C$99t[3],C$99s=C$99t[4],C$99o=C$99t[5],C$99a=C$99t[6],C$99c=C$99t[7],C$99t=C$99t[8];return C$99e*(C$99t*C$99s-C$99o*C$99c)+C$99i*(-C$99t*C$99r+C$99o*C$99a)+C$99n*(C$99c*C$99r-C$99s*C$99a)},C$99l.multiply=function(C$99h,C$99t,C$99e){var C$99t=C$99t.m,C$99e=C$99e.m,C$99i=C$99h.m,C$99n=C$99t[0],C$99r=C$99t[1],C$99s=C$99t[2],C$99o=C$99t[3],C$99a=C$99t[4],C$99c=C$99t[5],C$99l=C$99t[6],C$99u=C$99t[7],C$99t=C$99t[8],C$99_=C$99e[0],C$99d=C$99e[1],C$99f=C$99e[2],C$99p=C$99e[3],C$99m=C$99e[4],C$99y=C$99e[5],C$99g=C$99e[6],C$99v=C$99e[7],C$99e=C$99e[8];return C$99i[0]=C$99_*C$99n+C$99d*C$99o+C$99f*C$99l,C$99i[1]=C$99_*C$99r+C$99d*C$99a+C$99f*C$99u,C$99i[2]=C$99_*C$99s+C$99d*C$99c+C$99f*C$99t,C$99i[3]=C$99p*C$99n+C$99m*C$99o+C$99y*C$99l,C$99i[4]=C$99p*C$99r+C$99m*C$99a+C$99y*C$99u,C$99i[5]=C$99p*C$99s+C$99m*C$99c+C$99y*C$99t,C$99i[6]=C$99g*C$99n+C$99v*C$99o+C$99e*C$99l,C$99i[7]=C$99g*C$99r+C$99v*C$99a+C$99e*C$99u,C$99i[8]=C$99g*C$99s+C$99v*C$99c+C$99e*C$99t,C$99h},C$99l.multiplyMat4=function(C$99h,C$99t,C$99e){var C$99t=C$99t.m,C$99e=C$99e.m,C$99i=C$99h.m,C$99n=C$99t[0],C$99r=C$99t[1],C$99s=C$99t[2],C$99o=C$99t[3],C$99a=C$99t[4],C$99c=C$99t[5],C$99l=C$99t[6],C$99u=C$99t[7],C$99t=C$99t[8],C$99_=C$99e[0],C$99d=C$99e[1],C$99f=C$99e[2],C$99p=C$99e[4],C$99m=C$99e[5],C$99y=C$99e[6],C$99g=C$99e[8],C$99v=C$99e[9],C$99e=C$99e[10];return C$99i[0]=C$99_*C$99n+C$99d*C$99o+C$99f*C$99l,C$99i[1]=C$99_*C$99r+C$99d*C$99a+C$99f*C$99u,C$99i[2]=C$99_*C$99s+C$99d*C$99c+C$99f*C$99t,C$99i[3]=C$99p*C$99n+C$99m*C$99o+C$99y*C$99l,C$99i[4]=C$99p*C$99r+C$99m*C$99a+C$99y*C$99u,C$99i[5]=C$99p*C$99s+C$99m*C$99c+C$99y*C$99t,C$99i[6]=C$99g*C$99n+C$99v*C$99o+C$99e*C$99l,C$99i[7]=C$99g*C$99r+C$99v*C$99a+C$99e*C$99u,C$99i[8]=C$99g*C$99s+C$99v*C$99c+C$99e*C$99t,C$99h},C$99l.translate=function(C$99t,C$99e,C$99i){var C$99e=C$99e.m,C$99n=C$99t.m,C$99r=C$99e[0],C$99s=C$99e[1],C$99o=C$99e[2],C$99a=C$99e[3],C$99c=C$99e[4],C$99h=C$99e[5],C$99u=C$99e[6],C$99_=C$99e[7],C$99e=C$99e[8],C$99l=C$99i.x,C$99i=C$99i.y;return C$99n[0]=C$99r,C$99n[1]=C$99s,C$99n[2]=C$99o,C$99n[3]=C$99a,C$99n[4]=C$99c,C$99n[5]=C$99h,C$99n[6]=C$99l*C$99r+C$99i*C$99a+C$99u,C$99n[7]=C$99l*C$99s+C$99i*C$99c+C$99_,C$99n[8]=C$99l*C$99o+C$99i*C$99h+C$99e,C$99t},C$99l.rotate=function(C$99t,C$99e,C$99i){var C$99e=C$99e.m,C$99n=C$99t.m,C$99r=C$99e[0],C$99s=C$99e[1],C$99o=C$99e[2],C$99a=C$99e[3],C$99c=C$99e[4],C$99h=C$99e[5],C$99u=C$99e[6],C$99_=C$99e[7],C$99e=C$99e[8],C$99l=Math.sin(C$99i),C$99i=Math.cos(C$99i);return C$99n[0]=C$99i*C$99r+C$99l*C$99a,C$99n[1]=C$99i*C$99s+C$99l*C$99c,C$99n[2]=C$99i*C$99o+C$99l*C$99h,C$99n[3]=C$99i*C$99a-C$99l*C$99r,C$99n[4]=C$99i*C$99c-C$99l*C$99s,C$99n[5]=C$99i*C$99h-C$99l*C$99o,C$99n[6]=C$99u,C$99n[7]=C$99_,C$99n[8]=C$99e,C$99t},C$99l.scale=function(C$99t,C$99e,C$99i){var C$99n=C$99i.x,C$99i=C$99i.y,C$99e=C$99e.m,C$99r=C$99t.m;return C$99r[0]=C$99n*C$99e[0],C$99r[1]=C$99n*C$99e[1],C$99r[2]=C$99n*C$99e[2],C$99r[3]=C$99i*C$99e[3],C$99r[4]=C$99i*C$99e[4],C$99r[5]=C$99i*C$99e[5],C$99r[6]=C$99e[6],C$99r[7]=C$99e[7],C$99r[8]=C$99e[8],C$99t},C$99l.fromMat4=function(C$99t,C$99e){var C$99e=C$99e.m,C$99i=C$99t.m;return C$99i[0]=C$99e[0],C$99i[1]=C$99e[1],C$99i[2]=C$99e[2],C$99i[3]=C$99e[4],C$99i[4]=C$99e[5],C$99i[5]=C$99e[6],C$99i[6]=C$99e[8],C$99i[7]=C$99e[9],C$99i[8]=C$99e[10],C$99t},C$99l.fromTranslation=function(C$99t,C$99e){var C$99i=C$99t.m;return C$99i[0]=1,C$99i[1]=0,C$99i[2]=0,C$99i[3]=0,C$99i[4]=1,C$99i[5]=0,C$99i[6]=C$99e.x,C$99i[7]=C$99e.y,C$99i[8]=1,C$99t},C$99l.fromRotation=function(C$99t,C$99e){var C$99i=Math.sin(C$99e),C$99e=Math.cos(C$99e),C$99n=C$99t.m;return C$99n[0]=C$99e,C$99n[1]=C$99i,C$99n[2]=0,C$99n[3]=-C$99i,C$99n[4]=C$99e,C$99n[5]=0,C$99n[6]=0,C$99n[7]=0,C$99n[8]=1,C$99t},C$99l.fromScaling=function(C$99t,C$99e){var C$99i=C$99t.m;return C$99i[0]=C$99e.x,C$99i[1]=0,C$99i[2]=0,C$99i[3]=0,C$99i[4]=C$99e.y,C$99i[5]=0,C$99i[6]=0,C$99i[7]=0,C$99i[8]=1,C$99t},C$99l.fromQuat=function(C$99t,C$99e){var C$99i=C$99t.m,C$99n=C$99e.x,C$99r=C$99e.y,C$99s=C$99e.z,C$99e=C$99e.w,C$99o=C$99n+C$99n,C$99a=C$99r+C$99r,C$99c=C$99s+C$99s,C$99n=C$99n*C$99o,C$99l=C$99r*C$99o,C$99r=C$99r*C$99a,C$99h=C$99s*C$99o,C$99u=C$99s*C$99a,C$99s=C$99s*C$99c,C$99o=C$99e*C$99o,C$99a=C$99e*C$99a,C$99e=C$99e*C$99c;return C$99i[0]=1-C$99r-C$99s,C$99i[3]=C$99l-C$99e,C$99i[6]=C$99h+C$99a,C$99i[1]=C$99l+C$99e,C$99i[4]=1-C$99n-C$99s,C$99i[7]=C$99u-C$99o,C$99i[2]=C$99h-C$99a,C$99i[5]=C$99u+C$99o,C$99i[8]=1-C$99n-C$99r,C$99t},C$99l.fromViewUp=function(C$99t,C$99e,C$99i){C$99n=new C$99o.default(0,1,0),C$99r=new C$99o.default,C$99s=new C$99o.default;var C$99n,C$99r,C$99s;return C$99o.default.lengthSqr(C$99e)<C$99g.EPSILON*C$99g.EPSILON?(C$99l.identity(C$99t),C$99t):(C$99o.default.normalize(C$99r,C$99o.default.cross(C$99r,C$99i=C$99i||C$99n,C$99e)),C$99o.default.lengthSqr(C$99r)<C$99g.EPSILON*C$99g.EPSILON?C$99l.identity(C$99t):(C$99o.default.cross(C$99s,C$99e,C$99r),C$99l.set(C$99t,C$99r.x,C$99r.y,C$99r.z,C$99s.x,C$99s.y,C$99s.z,C$99e.x,C$99e.y,C$99e.z)),C$99t)},C$99l.normalFromMat4=function(C$99h,C$99t){var C$99t=C$99t.m,C$99e=C$99h.m,C$99i=C$99t[0],C$99n=C$99t[1],C$99u=C$99t[2],C$99r=C$99t[3],C$99_=C$99t[4],C$99d=C$99t[5],C$99f=C$99t[6],C$99s=C$99t[7],C$99o=C$99t[8],C$99a=C$99t[9],C$99c=C$99t[10],C$99l=C$99t[11],C$99p=C$99t[12],C$99m=C$99t[13],C$99y=C$99t[14],C$99t=C$99t[15],C$99g=C$99i*C$99d-C$99n*C$99_,C$99v=C$99i*C$99f-C$99u*C$99_,C$99x=C$99i*C$99s-C$99r*C$99_,C$99b=C$99n*C$99f-C$99u*C$99d,C$99A=C$99n*C$99s-C$99r*C$99d,C$99C=C$99u*C$99s-C$99r*C$99f,C$99S=C$99o*C$99m-C$99a*C$99p,C$99T=C$99o*C$99y-C$99c*C$99p,C$99o=C$99o*C$99t-C$99l*C$99p,C$99w=C$99a*C$99y-C$99c*C$99m,C$99a=C$99a*C$99t-C$99l*C$99m,C$99c=C$99c*C$99t-C$99l*C$99y,C$99l=C$99g*C$99c-C$99v*C$99a+C$99x*C$99w+C$99b*C$99o-C$99A*C$99T+C$99C*C$99S;return C$99l&&(C$99e[0]=(C$99d*C$99c-C$99f*C$99a+C$99s*C$99w)*(C$99l=1/C$99l),C$99e[1]=(C$99f*C$99o-C$99_*C$99c-C$99s*C$99T)*C$99l,C$99e[2]=(C$99_*C$99a-C$99d*C$99o+C$99s*C$99S)*C$99l,C$99e[3]=(C$99u*C$99a-C$99n*C$99c-C$99r*C$99w)*C$99l,C$99e[4]=(C$99i*C$99c-C$99u*C$99o+C$99r*C$99T)*C$99l,C$99e[5]=(C$99n*C$99o-C$99i*C$99a-C$99r*C$99S)*C$99l,C$99e[6]=(C$99m*C$99C-C$99y*C$99A+C$99t*C$99b)*C$99l,C$99e[7]=(C$99y*C$99x-C$99p*C$99C-C$99t*C$99v)*C$99l,C$99e[8]=(C$99p*C$99A-C$99m*C$99x+C$99t*C$99g)*C$99l),C$99h},C$99l.frob=function(C$99t){C$99t=C$99t.m;return Math.sqrt(Math.pow(C$99t[0],2)+Math.pow(C$99t[1],2)+Math.pow(C$99t[2],2)+Math.pow(C$99t[3],2)+Math.pow(C$99t[4],2)+Math.pow(C$99t[5],2)+Math.pow(C$99t[6],2)+Math.pow(C$99t[7],2)+Math.pow(C$99t[8],2))},C$99l.add=function(C$99t,C$99e,C$99i){var C$99e=C$99e.m,C$99i=C$99i.m,C$99n=C$99t.m;return C$99n[0]=C$99e[0]+C$99i[0],C$99n[1]=C$99e[1]+C$99i[1],C$99n[2]=C$99e[2]+C$99i[2],C$99n[3]=C$99e[3]+C$99i[3],C$99n[4]=C$99e[4]+C$99i[4],C$99n[5]=C$99e[5]+C$99i[5],C$99n[6]=C$99e[6]+C$99i[6],C$99n[7]=C$99e[7]+C$99i[7],C$99n[8]=C$99e[8]+C$99i[8],C$99t},C$99l.subtract=function(C$99t,C$99e,C$99i){var C$99e=C$99e.m,C$99i=C$99i.m,C$99n=C$99t.m;return C$99n[0]=C$99e[0]-C$99i[0],C$99n[1]=C$99e[1]-C$99i[1],C$99n[2]=C$99e[2]-C$99i[2],C$99n[3]=C$99e[3]-C$99i[3],C$99n[4]=C$99e[4]-C$99i[4],C$99n[5]=C$99e[5]-C$99i[5],C$99n[6]=C$99e[6]-C$99i[6],C$99n[7]=C$99e[7]-C$99i[7],C$99n[8]=C$99e[8]-C$99i[8],C$99t},C$99l.multiplyScalar=function(C$99t,C$99e,C$99i){var C$99e=C$99e.m,C$99n=C$99t.m;return C$99n[0]=C$99e[0]*C$99i,C$99n[1]=C$99e[1]*C$99i,C$99n[2]=C$99e[2]*C$99i,C$99n[3]=C$99e[3]*C$99i,C$99n[4]=C$99e[4]*C$99i,C$99n[5]=C$99e[5]*C$99i,C$99n[6]=C$99e[6]*C$99i,C$99n[7]=C$99e[7]*C$99i,C$99n[8]=C$99e[8]*C$99i,C$99t},C$99l.multiplyScalarAndAdd=function(C$99t,C$99e,C$99i,C$99n){var C$99e=C$99e.m,C$99i=C$99i.m,C$99r=C$99t.m;return C$99r[0]=C$99e[0]+C$99i[0]*C$99n,C$99r[1]=C$99e[1]+C$99i[1]*C$99n,C$99r[2]=C$99e[2]+C$99i[2]*C$99n,C$99r[3]=C$99e[3]+C$99i[3]*C$99n,C$99r[4]=C$99e[4]+C$99i[4]*C$99n,C$99r[5]=C$99e[5]+C$99i[5]*C$99n,C$99r[6]=C$99e[6]+C$99i[6]*C$99n,C$99r[7]=C$99e[7]+C$99i[7]*C$99n,C$99r[8]=C$99e[8]+C$99i[8]*C$99n,C$99t},C$99l.exactEquals=function(C$99t,C$99e){C$99t=C$99t.m,C$99e=C$99e.m;return C$99t[0]===C$99e[0]&&C$99t[1]===C$99e[1]&&C$99t[2]===C$99e[2]&&C$99t[3]===C$99e[3]&&C$99t[4]===C$99e[4]&&C$99t[5]===C$99e[5]&&C$99t[6]===C$99e[6]&&C$99t[7]===C$99e[7]&&C$99t[8]===C$99e[8]},C$99l.equals=function(C$99t,C$99e){var C$99t=C$99t.m,C$99e=C$99e.m,C$99i=C$99t[0],C$99n=C$99t[1],C$99r=C$99t[2],C$99s=C$99t[3],C$99o=C$99t[4],C$99a=C$99t[5],C$99c=C$99t[6],C$99l=C$99t[7],C$99t=C$99t[8],C$99h=C$99e[0],C$99u=C$99e[1],C$99_=C$99e[2],C$99d=C$99e[3],C$99f=C$99e[4],C$99p=C$99e[5],C$99m=C$99e[6],C$99y=C$99e[7],C$99e=C$99e[8];return Math.abs(C$99i-C$99h)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99i),Math.abs(C$99h))&&Math.abs(C$99n-C$99u)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99n),Math.abs(C$99u))&&Math.abs(C$99r-C$99_)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99r),Math.abs(C$99_))&&Math.abs(C$99s-C$99d)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99s),Math.abs(C$99d))&&Math.abs(C$99o-C$99f)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99o),Math.abs(C$99f))&&Math.abs(C$99a-C$99p)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99a),Math.abs(C$99p))&&Math.abs(C$99c-C$99m)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99c),Math.abs(C$99m))&&Math.abs(C$99l-C$99y)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99l),Math.abs(C$99y))&&Math.abs(C$99t-C$99e)<=C$99g.EPSILON*Math.max(1,Math.abs(C$99t),Math.abs(C$99e))},C$99l.toArray=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=0);for(var C$99n=C$99e.m,C$99r=0;C$99r<9;C$99r++)C$99t[C$99i+C$99r]=C$99n[C$99r];return C$99t},C$99l.fromArray=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=0);for(var C$99n=C$99t.m,C$99r=0;C$99r<9;C$99r++)C$99n[C$99r]=C$99e[C$99i+C$99r];return C$99t},C$99l.prototype.toString=function(){var C$99t=this.m;return"mat3("+C$99t[0]+", "+C$99t[1]+", "+C$99t[2]+", "+C$99t[3]+", "+C$99t[4]+", "+C$99t[5]+", "+C$99t[6]+", "+C$99t[7]+", "+C$99t[8]+")"};C$99t=C$99l;function C$99l(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){var C$99l;void 0===C$99t&&(C$99t=1),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),void 0===C$99r&&(C$99r=1),void 0===C$99s&&(C$99s=0),void 0===C$99o&&(C$99o=0),void 0===C$99a&&(C$99a=0),void 0===C$99c&&(C$99c=1),this.m=void 0,C$99t instanceof C$99g.FLOAT_ARRAY_TYPE?this.m=C$99t:(this.m=new C$99g.FLOAT_ARRAY_TYPE(9),(C$99l=this.m)[0]=C$99t,C$99l[1]=C$99e,C$99l[2]=C$99i,C$99l[3]=C$99n,C$99l[4]=C$99r,C$99l[5]=C$99s,C$99l[6]=C$99o,C$99l[7]=C$99a,C$99l[8]=C$99c)}(C$99i.default=C$99t).sub=C$99t.subtract,C$99t.mul=C$99t.multiply,C$99t.IDENTITY=Object.freeze(new C$99t),cc.Mat3=C$99t,C$99e.exports=C$99i.default},{"../value-types/utils":286,"./vec3":289}],281:[function(C$99e,C$99i,C$99r){"use strict";C$99r.__esModule=!0,C$99r.default=void 0;var C$99t=C$99c(C$99e("./value-type")),C$99s=C$99c(C$99e("../platform/CCClass")),C$99o=C$99c(C$99e("./vec3")),C$99a=C$99c(C$99e("./quat")),C$99S=C$99e("./utils"),C$99u=C$99c(C$99e("./mat3"));function C$99c(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99l(C$99i){return function(){var C$99t,C$99e=C$99h(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99h(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99h(C$99t){return(C$99h=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99T,C$99m=0,C$99y=0,C$99g=0,C$99v=0,C$99x=0,C$99b=0,C$99A=0,C$99C=0,C$99w=0,C$99E=0,C$99M=0,C$99I=0,C$99p=0,C$99B=0,C$99R=0,C$99P=0,C$99D=(C$99T=C$99t.default,C$99e=C$99T,(C$99t=C$99n).prototype=Object.create(C$99e.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99e,C$99l(C$99n),(C$99t=C$99n.prototype).mul=function(C$99t,C$99e){return C$99n.multiply(C$99e||new C$99n,this,C$99t)},C$99t.mulScalar=function(C$99t,C$99e){C$99n.multiplyScalar(C$99e||new C$99n,this,C$99t)},C$99t.sub=function(C$99t,C$99e){C$99n.subtract(C$99e||new C$99n,this,C$99t)},C$99n.clone=function(C$99t){C$99t=C$99t.m;return new C$99n(C$99t[0],C$99t[1],C$99t[2],C$99t[3],C$99t[4],C$99t[5],C$99t[6],C$99t[7],C$99t[8],C$99t[9],C$99t[10],C$99t[11],C$99t[12],C$99t[13],C$99t[14],C$99t[15])},C$99n.copy=function(C$99t,C$99e){var C$99i=C$99t.m,C$99e=C$99e.m;return C$99i[0]=C$99e[0],C$99i[1]=C$99e[1],C$99i[2]=C$99e[2],C$99i[3]=C$99e[3],C$99i[4]=C$99e[4],C$99i[5]=C$99e[5],C$99i[6]=C$99e[6],C$99i[7]=C$99e[7],C$99i[8]=C$99e[8],C$99i[9]=C$99e[9],C$99i[10]=C$99e[10],C$99i[11]=C$99e[11],C$99i[12]=C$99e[12],C$99i[13]=C$99e[13],C$99i[14]=C$99e[14],C$99i[15]=C$99e[15],C$99t},C$99n.set=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99h,C$99u,C$99_,C$99d,C$99f,C$99p,C$99m,C$99y){var C$99l=C$99t.m;return C$99l[0]=C$99e,C$99l[1]=C$99i,C$99l[2]=C$99n,C$99l[3]=C$99r,C$99l[4]=C$99s,C$99l[5]=C$99o,C$99l[6]=C$99a,C$99l[7]=C$99c,C$99l[8]=C$99h,C$99l[9]=C$99u,C$99l[10]=C$99_,C$99l[11]=C$99d,C$99l[12]=C$99f,C$99l[13]=C$99p,C$99l[14]=C$99m,C$99l[15]=C$99y,C$99t},C$99n.identity=function(C$99t){var C$99e=C$99t.m;return C$99e[0]=1,C$99e[1]=0,C$99e[2]=0,C$99e[3]=0,C$99e[4]=0,C$99e[5]=1,C$99e[6]=0,C$99e[7]=0,C$99e[8]=0,C$99e[9]=0,C$99e[10]=1,C$99e[11]=0,C$99e[12]=0,C$99e[13]=0,C$99e[14]=0,C$99e[15]=1,C$99t},C$99n.transpose=function(C$99t,C$99e){var C$99i,C$99n,C$99r,C$99s,C$99o,C$99a=C$99t.m,C$99c=C$99e.m;return C$99t===C$99e?(C$99e=C$99c[1],C$99i=C$99c[2],C$99n=C$99c[3],C$99r=C$99c[6],C$99s=C$99c[7],C$99o=C$99c[11],C$99a[1]=C$99c[4],C$99a[2]=C$99c[8],C$99a[3]=C$99c[12],C$99a[4]=C$99e,C$99a[6]=C$99c[9],C$99a[7]=C$99c[13],C$99a[8]=C$99i,C$99a[9]=C$99r,C$99a[11]=C$99c[14],C$99a[12]=C$99n,C$99a[13]=C$99s,C$99a[14]=C$99o):(C$99a[0]=C$99c[0],C$99a[1]=C$99c[4],C$99a[2]=C$99c[8],C$99a[3]=C$99c[12],C$99a[4]=C$99c[1],C$99a[5]=C$99c[5],C$99a[6]=C$99c[9],C$99a[7]=C$99c[13],C$99a[8]=C$99c[2],C$99a[9]=C$99c[6],C$99a[10]=C$99c[10],C$99a[11]=C$99c[14],C$99a[12]=C$99c[3],C$99a[13]=C$99c[7],C$99a[14]=C$99c[11],C$99a[15]=C$99c[15]),C$99t},C$99n.invert=function(C$99h,C$99t){var C$99t=C$99t.m,C$99t=(C$99m=C$99t[0],C$99y=C$99t[1],C$99g=C$99t[2],C$99v=C$99t[3],C$99x=C$99t[4],C$99b=C$99t[5],C$99A=C$99t[6],C$99C=C$99t[7],C$99w=C$99t[8],C$99E=C$99t[9],C$99M=C$99t[10],C$99I=C$99t[11],C$99p=C$99t[12],C$99B=C$99t[13],C$99R=C$99t[14],C$99P=C$99t[15],C$99m*C$99b-C$99y*C$99x),C$99e=C$99m*C$99A-C$99g*C$99x,C$99i=C$99m*C$99C-C$99v*C$99x,C$99n=C$99y*C$99A-C$99g*C$99b,C$99r=C$99y*C$99C-C$99v*C$99b,C$99s=C$99g*C$99C-C$99v*C$99A,C$99o=C$99w*C$99B-C$99E*C$99p,C$99a=C$99w*C$99R-C$99M*C$99p,C$99u=C$99w*C$99P-C$99I*C$99p,C$99_=C$99E*C$99R-C$99M*C$99B,C$99d=C$99E*C$99P-C$99I*C$99B,C$99f=C$99M*C$99P-C$99I*C$99R,C$99c=C$99t*C$99f-C$99e*C$99d+C$99i*C$99_+C$99n*C$99u-C$99r*C$99a+C$99s*C$99o;if(0==C$99c)return null;var C$99l=C$99h.m;return C$99l[0]=(C$99b*C$99f-C$99A*C$99d+C$99C*C$99_)*(C$99c=1/C$99c),C$99l[1]=(C$99g*C$99d-C$99y*C$99f-C$99v*C$99_)*C$99c,C$99l[2]=(C$99B*C$99s-C$99R*C$99r+C$99P*C$99n)*C$99c,C$99l[3]=(C$99M*C$99r-C$99E*C$99s-C$99I*C$99n)*C$99c,C$99l[4]=(C$99A*C$99u-C$99x*C$99f-C$99C*C$99a)*C$99c,C$99l[5]=(C$99m*C$99f-C$99g*C$99u+C$99v*C$99a)*C$99c,C$99l[6]=(C$99R*C$99i-C$99p*C$99s-C$99P*C$99e)*C$99c,C$99l[7]=(C$99w*C$99s-C$99M*C$99i+C$99I*C$99e)*C$99c,C$99l[8]=(C$99x*C$99d-C$99b*C$99u+C$99C*C$99o)*C$99c,C$99l[9]=(C$99y*C$99u-C$99m*C$99d-C$99v*C$99o)*C$99c,C$99l[10]=(C$99p*C$99r-C$99B*C$99i+C$99P*C$99t)*C$99c,C$99l[11]=(C$99E*C$99i-C$99w*C$99r-C$99I*C$99t)*C$99c,C$99l[12]=(C$99b*C$99a-C$99x*C$99_-C$99A*C$99o)*C$99c,C$99l[13]=(C$99m*C$99_-C$99y*C$99a+C$99g*C$99o)*C$99c,C$99l[14]=(C$99B*C$99e-C$99p*C$99n-C$99R*C$99t)*C$99c,C$99l[15]=(C$99w*C$99n-C$99E*C$99e+C$99M*C$99t)*C$99c,C$99h},C$99n.determinant=function(C$99t){C$99t=C$99t.m;return C$99m=C$99t[0],C$99y=C$99t[1],C$99g=C$99t[2],C$99v=C$99t[3],C$99x=C$99t[4],C$99b=C$99t[5],C$99A=C$99t[6],C$99C=C$99t[7],C$99w=C$99t[8],C$99E=C$99t[9],C$99M=C$99t[10],C$99I=C$99t[11],C$99p=C$99t[12],C$99B=C$99t[13],C$99R=C$99t[14],C$99P=C$99t[15],(C$99m*C$99b-C$99y*C$99x)*(C$99M*C$99P-C$99I*C$99R)-(C$99m*C$99A-C$99g*C$99x)*(C$99E*C$99P-C$99I*C$99B)+(C$99m*C$99C-C$99v*C$99x)*(C$99E*C$99R-C$99M*C$99B)+(C$99y*C$99A-C$99g*C$99b)*(C$99w*C$99P-C$99I*C$99p)-(C$99y*C$99C-C$99v*C$99b)*(C$99w*C$99R-C$99M*C$99p)+(C$99g*C$99C-C$99v*C$99A)*(C$99w*C$99B-C$99E*C$99p)},C$99n.multiply=function(C$99t,C$99e,C$99i){var C$99n=C$99t.m,C$99e=C$99e.m,C$99i=C$99i.m,C$99e=(C$99m=C$99e[0],C$99y=C$99e[1],C$99g=C$99e[2],C$99v=C$99e[3],C$99x=C$99e[4],C$99b=C$99e[5],C$99A=C$99e[6],C$99C=C$99e[7],C$99w=C$99e[8],C$99E=C$99e[9],C$99M=C$99e[10],C$99I=C$99e[11],C$99p=C$99e[12],C$99B=C$99e[13],C$99R=C$99e[14],C$99P=C$99e[15],C$99i[0]),C$99r=C$99i[1],C$99s=C$99i[2],C$99o=C$99i[3];return C$99n[0]=C$99e*C$99m+C$99r*C$99x+C$99s*C$99w+C$99o*C$99p,C$99n[1]=C$99e*C$99y+C$99r*C$99b+C$99s*C$99E+C$99o*C$99B,C$99n[2]=C$99e*C$99g+C$99r*C$99A+C$99s*C$99M+C$99o*C$99R,C$99n[3]=C$99e*C$99v+C$99r*C$99C+C$99s*C$99I+C$99o*C$99P,C$99e=C$99i[4],C$99r=C$99i[5],C$99s=C$99i[6],C$99o=C$99i[7],C$99n[4]=C$99e*C$99m+C$99r*C$99x+C$99s*C$99w+C$99o*C$99p,C$99n[5]=C$99e*C$99y+C$99r*C$99b+C$99s*C$99E+C$99o*C$99B,C$99n[6]=C$99e*C$99g+C$99r*C$99A+C$99s*C$99M+C$99o*C$99R,C$99n[7]=C$99e*C$99v+C$99r*C$99C+C$99s*C$99I+C$99o*C$99P,C$99e=C$99i[8],C$99r=C$99i[9],C$99s=C$99i[10],C$99o=C$99i[11],C$99n[8]=C$99e*C$99m+C$99r*C$99x+C$99s*C$99w+C$99o*C$99p,C$99n[9]=C$99e*C$99y+C$99r*C$99b+C$99s*C$99E+C$99o*C$99B,C$99n[10]=C$99e*C$99g+C$99r*C$99A+C$99s*C$99M+C$99o*C$99R,C$99n[11]=C$99e*C$99v+C$99r*C$99C+C$99s*C$99I+C$99o*C$99P,C$99e=C$99i[12],C$99r=C$99i[13],C$99s=C$99i[14],C$99o=C$99i[15],C$99n[12]=C$99e*C$99m+C$99r*C$99x+C$99s*C$99w+C$99o*C$99p,C$99n[13]=C$99e*C$99y+C$99r*C$99b+C$99s*C$99E+C$99o*C$99B,C$99n[14]=C$99e*C$99g+C$99r*C$99A+C$99s*C$99M+C$99o*C$99R,C$99n[15]=C$99e*C$99v+C$99r*C$99C+C$99s*C$99I+C$99o*C$99P,C$99t},C$99n.transform=function(C$99t,C$99e,C$99i){var C$99n=C$99i.x,C$99r=C$99i.y,C$99i=C$99i.z,C$99s=C$99t.m,C$99o=C$99e.m;return C$99e===C$99t?(C$99s[12]=C$99o[0]*C$99n+C$99o[4]*C$99r+C$99o[8]*C$99i+C$99o[12],C$99s[13]=C$99o[1]*C$99n+C$99o[5]*C$99r+C$99o[9]*C$99i+C$99o[13],C$99s[14]=C$99o[2]*C$99n+C$99o[6]*C$99r+C$99o[10]*C$99i+C$99o[14],C$99s[15]=C$99o[3]*C$99n+C$99o[7]*C$99r+C$99o[11]*C$99i+C$99o[15]):(C$99m=C$99o[0],C$99y=C$99o[1],C$99g=C$99o[2],C$99v=C$99o[3],C$99x=C$99o[4],C$99b=C$99o[5],C$99A=C$99o[6],C$99C=C$99o[7],C$99w=C$99o[8],C$99E=C$99o[9],C$99M=C$99o[10],C$99I=C$99o[11],C$99p=C$99o[12],C$99B=C$99o[13],C$99R=C$99o[14],C$99P=C$99o[15],C$99s[0]=C$99m,C$99s[1]=C$99y,C$99s[2]=C$99g,C$99s[3]=C$99v,C$99s[4]=C$99x,C$99s[5]=C$99b,C$99s[6]=C$99A,C$99s[7]=C$99C,C$99s[8]=C$99w,C$99s[9]=C$99E,C$99s[10]=C$99M,C$99s[11]=C$99I,C$99s[12]=C$99m*C$99n+C$99x*C$99r+C$99w*C$99i+C$99o[12],C$99s[13]=C$99y*C$99n+C$99b*C$99r+C$99E*C$99i+C$99o[13],C$99s[14]=C$99g*C$99n+C$99A*C$99r+C$99M*C$99i+C$99o[14],C$99s[15]=C$99v*C$99n+C$99C*C$99r+C$99I*C$99i+C$99o[15]),C$99t},C$99n.translate=function(C$99t,C$99e,C$99i){var C$99n=C$99t.m,C$99r=C$99e.m;return C$99e===C$99t?(C$99n[12]+=C$99i.x,C$99n[13]+=C$99i.y,C$99n[14]+=C$99i.z):(C$99n[0]=C$99r[0],C$99n[1]=C$99r[1],C$99n[2]=C$99r[2],C$99n[3]=C$99r[3],C$99n[4]=C$99r[4],C$99n[5]=C$99r[5],C$99n[6]=C$99r[6],C$99n[7]=C$99r[7],C$99n[8]=C$99r[8],C$99n[9]=C$99r[9],C$99n[10]=C$99r[10],C$99n[11]=C$99r[11],C$99n[12]+=C$99i.x,C$99n[13]+=C$99i.y,C$99n[14]+=C$99i.z,C$99n[15]=C$99r[15]),C$99t},C$99n.scale=function(C$99t,C$99e,C$99i){var C$99n=C$99i.x,C$99r=C$99i.y,C$99i=C$99i.z,C$99s=C$99t.m,C$99e=C$99e.m;return C$99s[0]=C$99e[0]*C$99n,C$99s[1]=C$99e[1]*C$99n,C$99s[2]=C$99e[2]*C$99n,C$99s[3]=C$99e[3]*C$99n,C$99s[4]=C$99e[4]*C$99r,C$99s[5]=C$99e[5]*C$99r,C$99s[6]=C$99e[6]*C$99r,C$99s[7]=C$99e[7]*C$99r,C$99s[8]=C$99e[8]*C$99i,C$99s[9]=C$99e[9]*C$99i,C$99s[10]=C$99e[10]*C$99i,C$99s[11]=C$99e[11]*C$99i,C$99s[12]=C$99e[12],C$99s[13]=C$99e[13],C$99s[14]=C$99e[14],C$99s[15]=C$99e[15],C$99t},C$99n.rotate=function(C$99h,C$99u,C$99t,C$99e){var C$99i=C$99e.x,C$99n=C$99e.y,C$99e=C$99e.z,C$99r=Math.sqrt(C$99i*C$99i+C$99n*C$99n+C$99e*C$99e);if(Math.abs(C$99r)<C$99S.EPSILON)return null;C$99i*=C$99r=1/C$99r,C$99n*=C$99r,C$99e*=C$99r;var C$99r=Math.sin(C$99t),C$99t=Math.cos(C$99t),C$99s=1-C$99t,C$99o=C$99u.m,C$99a=(C$99m=C$99o[0],C$99y=C$99o[1],C$99g=C$99o[2],C$99v=C$99o[3],C$99x=C$99o[4],C$99b=C$99o[5],C$99A=C$99o[6],C$99C=C$99o[7],C$99w=C$99o[8],C$99E=C$99o[9],C$99M=C$99o[10],C$99I=C$99o[11],C$99i*C$99i*C$99s+C$99t),C$99c=C$99n*C$99i*C$99s+C$99e*C$99r,C$99l=C$99e*C$99i*C$99s-C$99n*C$99r,C$99_=C$99i*C$99n*C$99s-C$99e*C$99r,C$99d=C$99n*C$99n*C$99s+C$99t,C$99f=C$99e*C$99n*C$99s+C$99i*C$99r,C$99p=C$99i*C$99e*C$99s+C$99n*C$99r,C$99n=C$99n*C$99e*C$99s-C$99i*C$99r,C$99i=C$99e*C$99e*C$99s+C$99t,C$99r=C$99h.m;return C$99r[0]=C$99m*C$99a+C$99x*C$99c+C$99w*C$99l,C$99r[1]=C$99y*C$99a+C$99b*C$99c+C$99E*C$99l,C$99r[2]=C$99g*C$99a+C$99A*C$99c+C$99M*C$99l,C$99r[3]=C$99v*C$99a+C$99C*C$99c+C$99I*C$99l,C$99r[4]=C$99m*C$99_+C$99x*C$99d+C$99w*C$99f,C$99r[5]=C$99y*C$99_+C$99b*C$99d+C$99E*C$99f,C$99r[6]=C$99g*C$99_+C$99A*C$99d+C$99M*C$99f,C$99r[7]=C$99v*C$99_+C$99C*C$99d+C$99I*C$99f,C$99r[8]=C$99m*C$99p+C$99x*C$99n+C$99w*C$99i,C$99r[9]=C$99y*C$99p+C$99b*C$99n+C$99E*C$99i,C$99r[10]=C$99g*C$99p+C$99A*C$99n+C$99M*C$99i,C$99r[11]=C$99v*C$99p+C$99C*C$99n+C$99I*C$99i,C$99u!==C$99h&&(C$99r[12]=C$99o[12],C$99r[13]=C$99o[13],C$99r[14]=C$99o[14],C$99r[15]=C$99o[15]),C$99h},C$99n.rotateX=function(C$99t,C$99e,C$99i){var C$99n=C$99t.m,C$99r=C$99e.m,C$99s=Math.sin(C$99i),C$99i=Math.cos(C$99i),C$99o=C$99r[4],C$99a=C$99r[5],C$99c=C$99r[6],C$99l=C$99r[7],C$99h=C$99r[8],C$99u=C$99r[9],C$99_=C$99r[10],C$99d=C$99r[11];return C$99e!==C$99t&&(C$99n[0]=C$99r[0],C$99n[1]=C$99r[1],C$99n[2]=C$99r[2],C$99n[3]=C$99r[3],C$99n[12]=C$99r[12],C$99n[13]=C$99r[13],C$99n[14]=C$99r[14],C$99n[15]=C$99r[15]),C$99n[4]=C$99o*C$99i+C$99h*C$99s,C$99n[5]=C$99a*C$99i+C$99u*C$99s,C$99n[6]=C$99c*C$99i+C$99_*C$99s,C$99n[7]=C$99l*C$99i+C$99d*C$99s,C$99n[8]=C$99h*C$99i-C$99o*C$99s,C$99n[9]=C$99u*C$99i-C$99a*C$99s,C$99n[10]=C$99_*C$99i-C$99c*C$99s,C$99n[11]=C$99d*C$99i-C$99l*C$99s,C$99t},C$99n.rotateY=function(C$99t,C$99e,C$99i){var C$99n=C$99t.m,C$99r=C$99e.m,C$99s=Math.sin(C$99i),C$99i=Math.cos(C$99i),C$99o=C$99r[0],C$99a=C$99r[1],C$99c=C$99r[2],C$99l=C$99r[3],C$99h=C$99r[8],C$99u=C$99r[9],C$99_=C$99r[10],C$99d=C$99r[11];return C$99e!==C$99t&&(C$99n[4]=C$99r[4],C$99n[5]=C$99r[5],C$99n[6]=C$99r[6],C$99n[7]=C$99r[7],C$99n[12]=C$99r[12],C$99n[13]=C$99r[13],C$99n[14]=C$99r[14],C$99n[15]=C$99r[15]),C$99n[0]=C$99o*C$99i-C$99h*C$99s,C$99n[1]=C$99a*C$99i-C$99u*C$99s,C$99n[2]=C$99c*C$99i-C$99_*C$99s,C$99n[3]=C$99l*C$99i-C$99d*C$99s,C$99n[8]=C$99o*C$99s+C$99h*C$99i,C$99n[9]=C$99a*C$99s+C$99u*C$99i,C$99n[10]=C$99c*C$99s+C$99_*C$99i,C$99n[11]=C$99l*C$99s+C$99d*C$99i,C$99t},C$99n.rotateZ=function(C$99t,C$99e,C$99i){var C$99n=C$99e.m,C$99r=C$99t.m,C$99s=Math.sin(C$99i),C$99i=Math.cos(C$99i),C$99o=C$99e.m[0],C$99a=C$99e.m[1],C$99c=C$99e.m[2],C$99l=C$99e.m[3],C$99h=C$99e.m[4],C$99u=C$99e.m[5],C$99_=C$99e.m[6],C$99d=C$99e.m[7];return C$99e!==C$99t&&(C$99r[8]=C$99n[8],C$99r[9]=C$99n[9],C$99r[10]=C$99n[10],C$99r[11]=C$99n[11],C$99r[12]=C$99n[12],C$99r[13]=C$99n[13],C$99r[14]=C$99n[14],C$99r[15]=C$99n[15]),C$99r[0]=C$99o*C$99i+C$99h*C$99s,C$99r[1]=C$99a*C$99i+C$99u*C$99s,C$99r[2]=C$99c*C$99i+C$99_*C$99s,C$99r[3]=C$99l*C$99i+C$99d*C$99s,C$99r[4]=C$99h*C$99i-C$99o*C$99s,C$99r[5]=C$99u*C$99i-C$99a*C$99s,C$99r[6]=C$99_*C$99i-C$99c*C$99s,C$99r[7]=C$99d*C$99i-C$99l*C$99s,C$99t},C$99n.fromTranslation=function(C$99t,C$99e){var C$99i=C$99t.m;return C$99i[0]=1,C$99i[1]=0,C$99i[2]=0,C$99i[3]=0,C$99i[4]=0,C$99i[5]=1,C$99i[6]=0,C$99i[7]=0,C$99i[8]=0,C$99i[9]=0,C$99i[10]=1,C$99i[11]=0,C$99i[12]=C$99e.x,C$99i[13]=C$99e.y,C$99i[14]=C$99e.z,C$99i[15]=1,C$99t},C$99n.fromScaling=function(C$99t,C$99e){var C$99i=C$99t.m;return C$99i[0]=C$99e.x,C$99i[1]=0,C$99i[2]=0,C$99i[3]=0,C$99i[4]=0,C$99i[5]=C$99e.y,C$99i[6]=0,C$99i[7]=0,C$99i[8]=0,C$99i[9]=0,C$99i[10]=C$99e.z,C$99i[11]=0,C$99i[12]=0,C$99i[13]=0,C$99i[14]=0,C$99i[15]=1,C$99t},C$99n.fromRotation=function(C$99t,C$99e,C$99i){var C$99n=C$99i.x,C$99r=C$99i.y,C$99i=C$99i.z,C$99s=Math.sqrt(C$99n*C$99n+C$99r*C$99r+C$99i*C$99i);if(Math.abs(C$99s)<C$99S.EPSILON)return null;C$99n*=C$99s=1/C$99s,C$99r*=C$99s,C$99i*=C$99s;var C$99s=Math.sin(C$99e),C$99e=Math.cos(C$99e),C$99o=1-C$99e,C$99a=C$99t.m;return C$99a[0]=C$99n*C$99n*C$99o+C$99e,C$99a[1]=C$99r*C$99n*C$99o+C$99i*C$99s,C$99a[2]=C$99i*C$99n*C$99o-C$99r*C$99s,C$99a[3]=0,C$99a[4]=C$99n*C$99r*C$99o-C$99i*C$99s,C$99a[5]=C$99r*C$99r*C$99o+C$99e,C$99a[6]=C$99i*C$99r*C$99o+C$99n*C$99s,C$99a[7]=0,C$99a[8]=C$99n*C$99i*C$99o+C$99r*C$99s,C$99a[9]=C$99r*C$99i*C$99o-C$99n*C$99s,C$99a[10]=C$99i*C$99i*C$99o+C$99e,C$99a[11]=0,C$99a[12]=0,C$99a[13]=0,C$99a[14]=0,C$99a[15]=1,C$99t},C$99n.fromXRotation=function(C$99t,C$99e){var C$99i=Math.sin(C$99e),C$99e=Math.cos(C$99e),C$99n=C$99t.m;return C$99n[0]=1,C$99n[1]=0,C$99n[2]=0,C$99n[3]=0,C$99n[4]=0,C$99n[5]=C$99e,C$99n[6]=C$99i,C$99n[7]=0,C$99n[8]=0,C$99n[9]=-C$99i,C$99n[10]=C$99e,C$99n[11]=0,C$99n[12]=0,C$99n[13]=0,C$99n[14]=0,C$99n[15]=1,C$99t},C$99n.fromYRotation=function(C$99t,C$99e){var C$99i=Math.sin(C$99e),C$99e=Math.cos(C$99e),C$99n=C$99t.m;return C$99n[0]=C$99e,C$99n[1]=0,C$99n[2]=-C$99i,C$99n[3]=0,C$99n[4]=0,C$99n[5]=1,C$99n[6]=0,C$99n[7]=0,C$99n[8]=C$99i,C$99n[9]=0,C$99n[10]=C$99e,C$99n[11]=0,C$99n[12]=0,C$99n[13]=0,C$99n[14]=0,C$99n[15]=1,C$99t},C$99n.fromZRotation=function(C$99t,C$99e){var C$99i=Math.sin(C$99e),C$99e=Math.cos(C$99e),C$99n=C$99t.m;return C$99n[0]=C$99e,C$99n[1]=C$99i,C$99n[2]=0,C$99n[3]=0,C$99n[4]=-C$99i,C$99n[5]=C$99e,C$99n[6]=0,C$99n[7]=0,C$99n[8]=0,C$99n[9]=0,C$99n[10]=1,C$99n[11]=0,C$99n[12]=0,C$99n[13]=0,C$99n[14]=0,C$99n[15]=1,C$99t},C$99n.fromRT=function(C$99t,C$99e,C$99i){var C$99n=C$99e.x,C$99r=C$99e.y,C$99s=C$99e.z,C$99e=C$99e.w,C$99o=C$99n+C$99n,C$99a=C$99r+C$99r,C$99c=C$99s+C$99s,C$99l=C$99n*C$99o,C$99h=C$99n*C$99a,C$99n=C$99n*C$99c,C$99u=C$99r*C$99a,C$99r=C$99r*C$99c,C$99s=C$99s*C$99c,C$99o=C$99e*C$99o,C$99a=C$99e*C$99a,C$99e=C$99e*C$99c,C$99c=C$99t.m;return C$99c[0]=1-(C$99u+C$99s),C$99c[1]=C$99h+C$99e,C$99c[2]=C$99n-C$99a,C$99c[3]=0,C$99c[4]=C$99h-C$99e,C$99c[5]=1-(C$99l+C$99s),C$99c[6]=C$99r+C$99o,C$99c[7]=0,C$99c[8]=C$99n+C$99a,C$99c[9]=C$99r-C$99o,C$99c[10]=1-(C$99l+C$99u),C$99c[11]=0,C$99c[12]=C$99i.x,C$99c[13]=C$99i.y,C$99c[14]=C$99i.z,C$99c[15]=1,C$99t},C$99n.getTranslation=function(C$99t,C$99e){C$99e=C$99e.m;return C$99t.x=C$99e[12],C$99t.y=C$99e[13],C$99t.z=C$99e[14],C$99t},C$99n.getScaling=function(C$99t,C$99e){var C$99e=C$99e.m,C$99i=C$99d.m,C$99n=C$99i[0]=C$99e[0],C$99r=C$99i[1]=C$99e[1],C$99s=C$99i[2]=C$99e[2],C$99o=C$99i[3]=C$99e[4],C$99a=C$99i[4]=C$99e[5],C$99c=C$99i[5]=C$99e[6],C$99l=C$99i[6]=C$99e[8],C$99h=C$99i[7]=C$99e[9],C$99i=C$99i[8]=C$99e[10];return C$99t.x=Math.sqrt(C$99n*C$99n+C$99r*C$99r+C$99s*C$99s),C$99t.y=Math.sqrt(C$99o*C$99o+C$99a*C$99a+C$99c*C$99c),C$99t.z=Math.sqrt(C$99l*C$99l+C$99h*C$99h+C$99i*C$99i),C$99u.default.determinant(C$99d)<0&&(C$99t.x*=-1),C$99t},C$99n.getRotation=function(C$99t,C$99e){var C$99e=C$99e.m,C$99i=C$99e[0]+C$99e[5]+C$99e[10],C$99n=0;return 0<C$99i?(C$99n=2*Math.sqrt(C$99i+1),C$99t.w=.25*C$99n,C$99t.x=(C$99e[6]-C$99e[9])/C$99n,C$99t.y=(C$99e[8]-C$99e[2])/C$99n,C$99t.z=(C$99e[1]-C$99e[4])/C$99n):C$99e[0]>C$99e[5]&&C$99e[0]>C$99e[10]?(C$99n=2*Math.sqrt(1+C$99e[0]-C$99e[5]-C$99e[10]),C$99t.w=(C$99e[6]-C$99e[9])/C$99n,C$99t.x=.25*C$99n,C$99t.y=(C$99e[1]+C$99e[4])/C$99n,C$99t.z=(C$99e[8]+C$99e[2])/C$99n):C$99e[5]>C$99e[10]?(C$99n=2*Math.sqrt(1+C$99e[5]-C$99e[0]-C$99e[10]),C$99t.w=(C$99e[8]-C$99e[2])/C$99n,C$99t.x=(C$99e[1]+C$99e[4])/C$99n,C$99t.y=.25*C$99n,C$99t.z=(C$99e[6]+C$99e[9])/C$99n):(C$99n=2*Math.sqrt(1+C$99e[10]-C$99e[0]-C$99e[5]),C$99t.w=(C$99e[1]-C$99e[4])/C$99n,C$99t.x=(C$99e[8]+C$99e[2])/C$99n,C$99t.y=(C$99e[6]+C$99e[9])/C$99n,C$99t.z=.25*C$99n),C$99t},C$99n.toRTS=function(C$99t,C$99e,C$99i,C$99n){var C$99t=C$99t.m,C$99r=C$99d.m;C$99n.x=C$99o.default.set(C$99_,C$99t[0],C$99t[1],C$99t[2]).mag(),C$99r[0]=C$99t[0]/C$99n.x,C$99r[1]=C$99t[1]/C$99n.x,C$99r[2]=C$99t[2]/C$99n.x,C$99n.y=C$99o.default.set(C$99_,C$99t[4],C$99t[5],C$99t[6]).mag(),C$99r[3]=C$99t[4]/C$99n.y,C$99r[4]=C$99t[5]/C$99n.y,C$99r[5]=C$99t[6]/C$99n.y,C$99n.z=C$99o.default.set(C$99_,C$99t[8],C$99t[9],C$99t[10]).mag(),C$99r[6]=C$99t[8]/C$99n.z,C$99r[7]=C$99t[9]/C$99n.z,C$99r[8]=C$99t[10]/C$99n.z,C$99u.default.determinant(C$99d)<0&&(C$99n.x*=-1,C$99r[0]*=-1,C$99r[1]*=-1,C$99r[2]*=-1),C$99a.default.fromMat3(C$99e,C$99d),C$99o.default.set(C$99i,C$99t[12],C$99t[13],C$99t[14])},C$99n.fromRTS=function(C$99h,C$99t,C$99e,C$99i){var C$99n=C$99t.x,C$99r=C$99t.y,C$99s=C$99t.z,C$99t=C$99t.w,C$99o=C$99n+C$99n,C$99a=C$99r+C$99r,C$99c=C$99s+C$99s,C$99u=C$99n*C$99o,C$99_=C$99n*C$99a,C$99n=C$99n*C$99c,C$99d=C$99r*C$99a,C$99r=C$99r*C$99c,C$99s=C$99s*C$99c,C$99o=C$99t*C$99o,C$99a=C$99t*C$99a,C$99t=C$99t*C$99c,C$99c=C$99i.x,C$99f=C$99i.y,C$99i=C$99i.z,C$99l=C$99h.m;return C$99l[0]=(1-(C$99d+C$99s))*C$99c,C$99l[1]=(C$99_+C$99t)*C$99c,C$99l[2]=(C$99n-C$99a)*C$99c,C$99l[3]=0,C$99l[4]=(C$99_-C$99t)*C$99f,C$99l[5]=(1-(C$99u+C$99s))*C$99f,C$99l[6]=(C$99r+C$99o)*C$99f,C$99l[7]=0,C$99l[8]=(C$99n+C$99a)*C$99i,C$99l[9]=(C$99r-C$99o)*C$99i,C$99l[10]=(1-(C$99u+C$99d))*C$99i,C$99l[11]=0,C$99l[12]=C$99e.x,C$99l[13]=C$99e.y,C$99l[14]=C$99e.z,C$99l[15]=1,C$99h},C$99n.fromRTSOrigin=function(C$99h,C$99t,C$99u,C$99e,C$99i){var C$99n=C$99t.x,C$99r=C$99t.y,C$99s=C$99t.z,C$99t=C$99t.w,C$99o=C$99n+C$99n,C$99a=C$99r+C$99r,C$99c=C$99s+C$99s,C$99_=C$99n*C$99o,C$99d=C$99n*C$99a,C$99n=C$99n*C$99c,C$99f=C$99r*C$99a,C$99r=C$99r*C$99c,C$99s=C$99s*C$99c,C$99o=C$99t*C$99o,C$99a=C$99t*C$99a,C$99t=C$99t*C$99c,C$99c=C$99e.x,C$99p=C$99e.y,C$99e=C$99e.z,C$99m=C$99i.x,C$99y=C$99i.y,C$99i=C$99i.z,C$99l=C$99h.m;return C$99l[0]=(1-(C$99f+C$99s))*C$99c,C$99l[1]=(C$99d+C$99t)*C$99c,C$99l[2]=(C$99n-C$99a)*C$99c,C$99l[3]=0,C$99l[4]=(C$99d-C$99t)*C$99p,C$99l[5]=(1-(C$99_+C$99s))*C$99p,C$99l[6]=(C$99r+C$99o)*C$99p,C$99l[7]=0,C$99l[8]=(C$99n+C$99a)*C$99e,C$99l[9]=(C$99r-C$99o)*C$99e,C$99l[10]=(1-(C$99_+C$99f))*C$99e,C$99l[11]=0,C$99l[12]=C$99u.x+C$99m-(C$99l[0]*C$99m+C$99l[4]*C$99y+C$99l[8]*C$99i),C$99l[13]=C$99u.y+C$99y-(C$99l[1]*C$99m+C$99l[5]*C$99y+C$99l[9]*C$99i),C$99l[14]=C$99u.z+C$99i-(C$99l[2]*C$99m+C$99l[6]*C$99y+C$99l[10]*C$99i),C$99l[15]=1,C$99h},C$99n.fromQuat=function(C$99t,C$99e){var C$99i=C$99e.x,C$99n=C$99e.y,C$99r=C$99e.z,C$99e=C$99e.w,C$99s=C$99i+C$99i,C$99o=C$99n+C$99n,C$99a=C$99r+C$99r,C$99i=C$99i*C$99s,C$99c=C$99n*C$99s,C$99n=C$99n*C$99o,C$99l=C$99r*C$99s,C$99h=C$99r*C$99o,C$99r=C$99r*C$99a,C$99s=C$99e*C$99s,C$99o=C$99e*C$99o,C$99e=C$99e*C$99a,C$99a=C$99t.m;return C$99a[0]=1-C$99n-C$99r,C$99a[1]=C$99c+C$99e,C$99a[2]=C$99l-C$99o,C$99a[3]=0,C$99a[4]=C$99c-C$99e,C$99a[5]=1-C$99i-C$99r,C$99a[6]=C$99h+C$99s,C$99a[7]=0,C$99a[8]=C$99l+C$99o,C$99a[9]=C$99h-C$99s,C$99a[10]=1-C$99i-C$99n,C$99a[11]=0,C$99a[12]=0,C$99a[13]=0,C$99a[14]=0,C$99a[15]=1,C$99t},C$99n.frustum=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){var C$99a=1/(C$99i-C$99e),C$99c=1/(C$99r-C$99n),C$99h=1/(C$99s-C$99o),C$99l=C$99t.m;return C$99l[0]=2*C$99s*C$99a,C$99l[1]=0,C$99l[2]=0,C$99l[3]=0,C$99l[4]=0,C$99l[5]=2*C$99s*C$99c,C$99l[6]=0,C$99l[7]=0,C$99l[8]=(C$99i+C$99e)*C$99a,C$99l[9]=(C$99r+C$99n)*C$99c,C$99l[10]=(C$99o+C$99s)*C$99h,C$99l[11]=-1,C$99l[12]=0,C$99l[13]=0,C$99l[14]=C$99o*C$99s*2*C$99h,C$99l[15]=0,C$99t},C$99n.perspective=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99e=1/Math.tan(C$99e/2),C$99s=1/(C$99n-C$99r),C$99o=C$99t.m;return C$99o[0]=C$99e/C$99i,C$99o[1]=0,C$99o[2]=0,C$99o[3]=0,C$99o[4]=0,C$99o[5]=C$99e,C$99o[6]=0,C$99o[7]=0,C$99o[8]=0,C$99o[9]=0,C$99o[10]=(C$99r+C$99n)*C$99s,C$99o[11]=-1,C$99o[12]=0,C$99o[13]=0,C$99o[14]=2*C$99r*C$99n*C$99s,C$99o[15]=0,C$99t},C$99n.ortho=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){var C$99a=1/(C$99e-C$99i),C$99c=1/(C$99n-C$99r),C$99h=1/(C$99s-C$99o),C$99l=C$99t.m;return C$99l[0]=-2*C$99a,C$99l[1]=0,C$99l[2]=0,C$99l[3]=0,C$99l[4]=0,C$99l[5]=-2*C$99c,C$99l[6]=0,C$99l[7]=0,C$99l[8]=0,C$99l[9]=0,C$99l[10]=2*C$99h,C$99l[11]=0,C$99l[12]=(C$99e+C$99i)*C$99a,C$99l[13]=(C$99r+C$99n)*C$99c,C$99l[14]=(C$99o+C$99s)*C$99h,C$99l[15]=1,C$99t},C$99n.lookAt=function(C$99h,C$99t,C$99e,C$99i){var C$99n=C$99t.x,C$99u=C$99t.y,C$99t=C$99t.z,C$99r=C$99i.x,C$99_=C$99i.y,C$99i=C$99i.z,C$99s=C$99n-C$99e.x,C$99o=C$99u-C$99e.y,C$99e=C$99t-C$99e.z,C$99a=1/Math.sqrt(C$99s*C$99s+C$99o*C$99o+C$99e*C$99e),C$99c=C$99_*(C$99e*=C$99a)-C$99i*(C$99o*=C$99a),C$99i=C$99i*(C$99s*=C$99a)-C$99r*C$99e,C$99r=C$99r*C$99o-C$99_*C$99s,C$99_=(C$99c*=C$99a=1/Math.sqrt(C$99c*C$99c+C$99i*C$99i+C$99r*C$99r),C$99o*(C$99r*=C$99a)-C$99e*(C$99i*=C$99a)),C$99a=C$99e*C$99c-C$99s*C$99r,C$99d=C$99s*C$99i-C$99o*C$99c,C$99l=C$99h.m;return C$99l[0]=C$99c,C$99l[1]=C$99_,C$99l[2]=C$99s,C$99l[3]=0,C$99l[4]=C$99i,C$99l[5]=C$99a,C$99l[6]=C$99o,C$99l[7]=0,C$99l[8]=C$99r,C$99l[9]=C$99d,C$99l[10]=C$99e,C$99l[11]=0,C$99l[12]=-(C$99c*C$99n+C$99i*C$99u+C$99r*C$99t),C$99l[13]=-(C$99_*C$99n+C$99a*C$99u+C$99d*C$99t),C$99l[14]=-(C$99s*C$99n+C$99o*C$99u+C$99e*C$99t),C$99l[15]=1,C$99h},C$99n.inverseTranspose=function(C$99h,C$99t){var C$99t=C$99t.m,C$99u=(C$99m=C$99t[0],C$99y=C$99t[1],C$99g=C$99t[2],C$99v=C$99t[3],C$99x=C$99t[4],C$99b=C$99t[5],C$99A=C$99t[6],C$99C=C$99t[7],C$99w=C$99t[8],C$99E=C$99t[9],C$99M=C$99t[10],C$99I=C$99t[11],C$99p=C$99t[12],C$99B=C$99t[13],C$99R=C$99t[14],C$99P=C$99t[15],C$99m*C$99b-C$99y*C$99x),C$99_=C$99m*C$99A-C$99g*C$99x,C$99e=C$99m*C$99C-C$99v*C$99x,C$99d=C$99y*C$99A-C$99g*C$99b,C$99i=C$99y*C$99C-C$99v*C$99b,C$99n=C$99g*C$99C-C$99v*C$99A,C$99r=C$99w*C$99B-C$99E*C$99p,C$99s=C$99w*C$99R-C$99M*C$99p,C$99o=C$99w*C$99P-C$99I*C$99p,C$99f=C$99E*C$99R-C$99M*C$99B,C$99a=C$99E*C$99P-C$99I*C$99B,C$99c=C$99M*C$99P-C$99I*C$99R,C$99l=C$99u*C$99c-C$99_*C$99a+C$99e*C$99f+C$99d*C$99o-C$99i*C$99s+C$99n*C$99r;return C$99l?((C$99t=C$99h.m)[0]=(C$99b*C$99c-C$99A*C$99a+C$99C*C$99f)*(C$99l=1/C$99l),C$99t[1]=(C$99A*C$99o-C$99x*C$99c-C$99C*C$99s)*C$99l,C$99t[2]=(C$99x*C$99a-C$99b*C$99o+C$99C*C$99r)*C$99l,C$99t[3]=0,C$99t[4]=(C$99g*C$99a-C$99y*C$99c-C$99v*C$99f)*C$99l,C$99t[5]=(C$99m*C$99c-C$99g*C$99o+C$99v*C$99s)*C$99l,C$99t[6]=(C$99y*C$99o-C$99m*C$99a-C$99v*C$99r)*C$99l,C$99t[7]=0,C$99t[8]=(C$99B*C$99n-C$99R*C$99i+C$99P*C$99d)*C$99l,C$99t[9]=(C$99R*C$99e-C$99p*C$99n-C$99P*C$99_)*C$99l,C$99t[10]=(C$99p*C$99i-C$99B*C$99e+C$99P*C$99u)*C$99l,C$99t[11]=0,C$99t[12]=0,C$99t[13]=0,C$99t[14]=0,C$99t[15]=1,C$99h):null},C$99n.add=function(C$99t,C$99e,C$99i){var C$99n=C$99t.m,C$99e=C$99e.m,C$99i=C$99i.m;return C$99n[0]=C$99e[0]+C$99i[0],C$99n[1]=C$99e[1]+C$99i[1],C$99n[2]=C$99e[2]+C$99i[2],C$99n[3]=C$99e[3]+C$99i[3],C$99n[4]=C$99e[4]+C$99i[4],C$99n[5]=C$99e[5]+C$99i[5],C$99n[6]=C$99e[6]+C$99i[6],C$99n[7]=C$99e[7]+C$99i[7],C$99n[8]=C$99e[8]+C$99i[8],C$99n[9]=C$99e[9]+C$99i[9],C$99n[10]=C$99e[10]+C$99i[10],C$99n[11]=C$99e[11]+C$99i[11],C$99n[12]=C$99e[12]+C$99i[12],C$99n[13]=C$99e[13]+C$99i[13],C$99n[14]=C$99e[14]+C$99i[14],C$99n[15]=C$99e[15]+C$99i[15],C$99t},C$99n.subtract=function(C$99t,C$99e,C$99i){var C$99n=C$99t.m,C$99e=C$99e.m,C$99i=C$99i.m;return C$99n[0]=C$99e[0]-C$99i[0],C$99n[1]=C$99e[1]-C$99i[1],C$99n[2]=C$99e[2]-C$99i[2],C$99n[3]=C$99e[3]-C$99i[3],C$99n[4]=C$99e[4]-C$99i[4],C$99n[5]=C$99e[5]-C$99i[5],C$99n[6]=C$99e[6]-C$99i[6],C$99n[7]=C$99e[7]-C$99i[7],C$99n[8]=C$99e[8]-C$99i[8],C$99n[9]=C$99e[9]-C$99i[9],C$99n[10]=C$99e[10]-C$99i[10],C$99n[11]=C$99e[11]-C$99i[11],C$99n[12]=C$99e[12]-C$99i[12],C$99n[13]=C$99e[13]-C$99i[13],C$99n[14]=C$99e[14]-C$99i[14],C$99n[15]=C$99e[15]-C$99i[15],C$99t},C$99n.multiplyScalar=function(C$99t,C$99e,C$99i){var C$99n=C$99t.m,C$99e=C$99e.m;return C$99n[0]=C$99e[0]*C$99i,C$99n[1]=C$99e[1]*C$99i,C$99n[2]=C$99e[2]*C$99i,C$99n[3]=C$99e[3]*C$99i,C$99n[4]=C$99e[4]*C$99i,C$99n[5]=C$99e[5]*C$99i,C$99n[6]=C$99e[6]*C$99i,C$99n[7]=C$99e[7]*C$99i,C$99n[8]=C$99e[8]*C$99i,C$99n[9]=C$99e[9]*C$99i,C$99n[10]=C$99e[10]*C$99i,C$99n[11]=C$99e[11]*C$99i,C$99n[12]=C$99e[12]*C$99i,C$99n[13]=C$99e[13]*C$99i,C$99n[14]=C$99e[14]*C$99i,C$99n[15]=C$99e[15]*C$99i,C$99t},C$99n.multiplyScalarAndAdd=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99t.m,C$99e=C$99e.m,C$99i=C$99i.m;return C$99r[0]=C$99e[0]+C$99i[0]*C$99n,C$99r[1]=C$99e[1]+C$99i[1]*C$99n,C$99r[2]=C$99e[2]+C$99i[2]*C$99n,C$99r[3]=C$99e[3]+C$99i[3]*C$99n,C$99r[4]=C$99e[4]+C$99i[4]*C$99n,C$99r[5]=C$99e[5]+C$99i[5]*C$99n,C$99r[6]=C$99e[6]+C$99i[6]*C$99n,C$99r[7]=C$99e[7]+C$99i[7]*C$99n,C$99r[8]=C$99e[8]+C$99i[8]*C$99n,C$99r[9]=C$99e[9]+C$99i[9]*C$99n,C$99r[10]=C$99e[10]+C$99i[10]*C$99n,C$99r[11]=C$99e[11]+C$99i[11]*C$99n,C$99r[12]=C$99e[12]+C$99i[12]*C$99n,C$99r[13]=C$99e[13]+C$99i[13]*C$99n,C$99r[14]=C$99e[14]+C$99i[14]*C$99n,C$99r[15]=C$99e[15]+C$99i[15]*C$99n,C$99t},C$99n.strictEquals=function(C$99t,C$99e){C$99t=C$99t.m,C$99e=C$99e.m;return C$99t[0]===C$99e[0]&&C$99t[1]===C$99e[1]&&C$99t[2]===C$99e[2]&&C$99t[3]===C$99e[3]&&C$99t[4]===C$99e[4]&&C$99t[5]===C$99e[5]&&C$99t[6]===C$99e[6]&&C$99t[7]===C$99e[7]&&C$99t[8]===C$99e[8]&&C$99t[9]===C$99e[9]&&C$99t[10]===C$99e[10]&&C$99t[11]===C$99e[11]&&C$99t[12]===C$99e[12]&&C$99t[13]===C$99e[13]&&C$99t[14]===C$99e[14]&&C$99t[15]===C$99e[15]},C$99n.equals=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=C$99S.EPSILON);C$99t=C$99t.m,C$99e=C$99e.m;return Math.abs(C$99t[0]-C$99e[0])<=C$99i*Math.max(1,Math.abs(C$99t[0]),Math.abs(C$99e[0]))&&Math.abs(C$99t[1]-C$99e[1])<=C$99i*Math.max(1,Math.abs(C$99t[1]),Math.abs(C$99e[1]))&&Math.abs(C$99t[2]-C$99e[2])<=C$99i*Math.max(1,Math.abs(C$99t[2]),Math.abs(C$99e[2]))&&Math.abs(C$99t[3]-C$99e[3])<=C$99i*Math.max(1,Math.abs(C$99t[3]),Math.abs(C$99e[3]))&&Math.abs(C$99t[4]-C$99e[4])<=C$99i*Math.max(1,Math.abs(C$99t[4]),Math.abs(C$99e[4]))&&Math.abs(C$99t[5]-C$99e[5])<=C$99i*Math.max(1,Math.abs(C$99t[5]),Math.abs(C$99e[5]))&&Math.abs(C$99t[6]-C$99e[6])<=C$99i*Math.max(1,Math.abs(C$99t[6]),Math.abs(C$99e[6]))&&Math.abs(C$99t[7]-C$99e[7])<=C$99i*Math.max(1,Math.abs(C$99t[7]),Math.abs(C$99e[7]))&&Math.abs(C$99t[8]-C$99e[8])<=C$99i*Math.max(1,Math.abs(C$99t[8]),Math.abs(C$99e[8]))&&Math.abs(C$99t[9]-C$99e[9])<=C$99i*Math.max(1,Math.abs(C$99t[9]),Math.abs(C$99e[9]))&&Math.abs(C$99t[10]-C$99e[10])<=C$99i*Math.max(1,Math.abs(C$99t[10]),Math.abs(C$99e[10]))&&Math.abs(C$99t[11]-C$99e[11])<=C$99i*Math.max(1,Math.abs(C$99t[11]),Math.abs(C$99e[11]))&&Math.abs(C$99t[12]-C$99e[12])<=C$99i*Math.max(1,Math.abs(C$99t[12]),Math.abs(C$99e[12]))&&Math.abs(C$99t[13]-C$99e[13])<=C$99i*Math.max(1,Math.abs(C$99t[13]),Math.abs(C$99e[13]))&&Math.abs(C$99t[14]-C$99e[14])<=C$99i*Math.max(1,Math.abs(C$99t[14]),Math.abs(C$99e[14]))&&Math.abs(C$99t[15]-C$99e[15])<=C$99i*Math.max(1,Math.abs(C$99t[15]),Math.abs(C$99e[15]))},C$99n.adjoint=function(C$99h,C$99t){var C$99t=C$99t.m,C$99e=C$99h.m,C$99u=C$99t[0],C$99i=C$99t[1],C$99n=C$99t[2],C$99r=C$99t[3],C$99_=C$99t[4],C$99d=C$99t[5],C$99s=C$99t[6],C$99o=C$99t[7],C$99f=C$99t[8],C$99p=C$99t[9],C$99a=C$99t[10],C$99c=C$99t[11],C$99m=C$99t[12],C$99y=C$99t[13],C$99l=C$99t[14],C$99t=C$99t[15];return C$99e[0]=C$99d*(C$99a*C$99t-C$99c*C$99l)-C$99p*(C$99s*C$99t-C$99o*C$99l)+C$99y*(C$99s*C$99c-C$99o*C$99a),C$99e[1]=-(C$99i*(C$99a*C$99t-C$99c*C$99l)-C$99p*(C$99n*C$99t-C$99r*C$99l)+C$99y*(C$99n*C$99c-C$99r*C$99a)),C$99e[2]=C$99i*(C$99s*C$99t-C$99o*C$99l)-C$99d*(C$99n*C$99t-C$99r*C$99l)+C$99y*(C$99n*C$99o-C$99r*C$99s),C$99e[3]=-(C$99i*(C$99s*C$99c-C$99o*C$99a)-C$99d*(C$99n*C$99c-C$99r*C$99a)+C$99p*(C$99n*C$99o-C$99r*C$99s)),C$99e[4]=-(C$99_*(C$99a*C$99t-C$99c*C$99l)-C$99f*(C$99s*C$99t-C$99o*C$99l)+C$99m*(C$99s*C$99c-C$99o*C$99a)),C$99e[5]=C$99u*(C$99a*C$99t-C$99c*C$99l)-C$99f*(C$99n*C$99t-C$99r*C$99l)+C$99m*(C$99n*C$99c-C$99r*C$99a),C$99e[6]=-(C$99u*(C$99s*C$99t-C$99o*C$99l)-C$99_*(C$99n*C$99t-C$99r*C$99l)+C$99m*(C$99n*C$99o-C$99r*C$99s)),C$99e[7]=C$99u*(C$99s*C$99c-C$99o*C$99a)-C$99_*(C$99n*C$99c-C$99r*C$99a)+C$99f*(C$99n*C$99o-C$99r*C$99s),C$99e[8]=C$99_*(C$99p*C$99t-C$99c*C$99y)-C$99f*(C$99d*C$99t-C$99o*C$99y)+C$99m*(C$99d*C$99c-C$99o*C$99p),C$99e[9]=-(C$99u*(C$99p*C$99t-C$99c*C$99y)-C$99f*(C$99i*C$99t-C$99r*C$99y)+C$99m*(C$99i*C$99c-C$99r*C$99p)),C$99e[10]=C$99u*(C$99d*C$99t-C$99o*C$99y)-C$99_*(C$99i*C$99t-C$99r*C$99y)+C$99m*(C$99i*C$99o-C$99r*C$99d),C$99e[11]=-(C$99u*(C$99d*C$99c-C$99o*C$99p)-C$99_*(C$99i*C$99c-C$99r*C$99p)+C$99f*(C$99i*C$99o-C$99r*C$99d)),C$99e[12]=-(C$99_*(C$99p*C$99l-C$99a*C$99y)-C$99f*(C$99d*C$99l-C$99s*C$99y)+C$99m*(C$99d*C$99a-C$99s*C$99p)),C$99e[13]=C$99u*(C$99p*C$99l-C$99a*C$99y)-C$99f*(C$99i*C$99l-C$99n*C$99y)+C$99m*(C$99i*C$99a-C$99n*C$99p),C$99e[14]=-(C$99u*(C$99d*C$99l-C$99s*C$99y)-C$99_*(C$99i*C$99l-C$99n*C$99y)+C$99m*(C$99i*C$99s-C$99n*C$99d)),C$99e[15]=C$99u*(C$99d*C$99a-C$99s*C$99p)-C$99_*(C$99i*C$99a-C$99n*C$99p)+C$99f*(C$99i*C$99s-C$99n*C$99d),C$99h},C$99n.toArray=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=0);for(var C$99n=C$99e.m,C$99r=0;C$99r<16;C$99r++)C$99t[C$99i+C$99r]=C$99n[C$99r];return C$99t},C$99n.fromArray=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=0);for(var C$99n=C$99t.m,C$99r=0;C$99r<16;C$99r++)C$99n[C$99r]=C$99e[C$99i+C$99r];return C$99t},C$99t.clone=function(){var C$99t=this.m;return new C$99n(C$99t[0],C$99t[1],C$99t[2],C$99t[3],C$99t[4],C$99t[5],C$99t[6],C$99t[7],C$99t[8],C$99t[9],C$99t[10],C$99t[11],C$99t[12],C$99t[13],C$99t[14],C$99t[15])},C$99t.set=function(C$99t){var C$99e=this.m,C$99t=C$99t.m;return C$99e[0]=C$99t[0],C$99e[1]=C$99t[1],C$99e[2]=C$99t[2],C$99e[3]=C$99t[3],C$99e[4]=C$99t[4],C$99e[5]=C$99t[5],C$99e[6]=C$99t[6],C$99e[7]=C$99t[7],C$99e[8]=C$99t[8],C$99e[9]=C$99t[9],C$99e[10]=C$99t[10],C$99e[11]=C$99t[11],C$99e[12]=C$99t[12],C$99e[13]=C$99t[13],C$99e[14]=C$99t[14],C$99e[15]=C$99t[15],this},C$99t.equals=function(C$99t){return C$99n.strictEquals(this,C$99t)},C$99t.fuzzyEquals=function(C$99t){return C$99n.equals(this,C$99t)},C$99t.toString=function(){var C$99t=this.m;return C$99t?"[\n"+C$99t[0]+", "+C$99t[1]+", "+C$99t[2]+", "+C$99t[3]+",\n"+C$99t[4]+", "+C$99t[5]+", "+C$99t[6]+", "+C$99t[7]+",\n"+C$99t[8]+", "+C$99t[9]+", "+C$99t[10]+", "+C$99t[11]+",\n"+C$99t[12]+", "+C$99t[13]+", "+C$99t[14]+", "+C$99t[15]+"\n]":"[\n1, 0, 0, 0\n0, 1, 0, 0\n0, 0, 1, 0\n0, 0, 0, 1\n]"},C$99t.identity=function(){return C$99n.identity(this)},C$99t.transpose=function(C$99t){return C$99t=C$99t||new C$99n,C$99n.transpose(C$99t,this)},C$99t.invert=function(C$99t){return C$99t=C$99t||new C$99n,C$99n.invert(C$99t,this)},C$99t.adjoint=function(C$99t){return C$99t=C$99t||new C$99n,C$99n.adjoint(C$99t,this)},C$99t.determinant=function(){return C$99n.determinant(this)},C$99t.add=function(C$99t,C$99e){return C$99e=C$99e||new C$99n,C$99n.add(C$99e,this,C$99t)},C$99t.subtract=function(C$99t){return C$99n.subtract(this,this,C$99t)},C$99t.multiply=function(C$99t){return C$99n.multiply(this,this,C$99t)},C$99t.multiplyScalar=function(C$99t){return C$99n.multiplyScalar(this,this,C$99t)},C$99t.translate=function(C$99t,C$99e){return C$99e=C$99e||new C$99n,C$99n.translate(C$99e,this,C$99t)},C$99t.scale=function(C$99t,C$99e){return C$99e=C$99e||new C$99n,C$99n.scale(C$99e,this,C$99t)},C$99t.rotate=function(C$99t,C$99e,C$99i){return C$99i=C$99i||new C$99n,C$99n.rotate(C$99i,this,C$99t,C$99e)},C$99t.getTranslation=function(C$99t){return C$99t=C$99t||new C$99o.default,C$99n.getTranslation(C$99t,this)},C$99t.getScale=function(C$99t){return C$99t=C$99t||new C$99o.default,C$99n.getScaling(C$99t,this)},C$99t.getRotation=function(C$99t){return C$99t=C$99t||new C$99a.default,C$99n.getRotation(C$99t,this)},C$99t.fromRTS=function(C$99t,C$99e,C$99i){return C$99n.fromRTS(this,C$99t,C$99e,C$99i)},C$99t.fromQuat=function(C$99t){return C$99n.fromQuat(this,C$99t)},C$99n);function C$99n(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99h,C$99u,C$99_,C$99d,C$99f,C$99p,C$99m,C$99y){var C$99c,C$99l;return void 0===C$99t&&(C$99t=1),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),void 0===C$99r&&(C$99r=0),void 0===C$99s&&(C$99s=1),void 0===C$99o&&(C$99o=0),void 0===C$99a&&(C$99a=0),void 0===C$99h&&(C$99h=0),void 0===C$99u&&(C$99u=0),void 0===C$99_&&(C$99_=1),void 0===C$99d&&(C$99d=0),void 0===C$99f&&(C$99f=0),void 0===C$99p&&(C$99p=0),void 0===C$99m&&(C$99m=0),void 0===C$99y&&(C$99y=1),(C$99c=C$99T.call(this)||this).m=void 0,C$99t instanceof C$99S.FLOAT_ARRAY_TYPE?C$99c.m=C$99t:(C$99c.m=new C$99S.FLOAT_ARRAY_TYPE(16),(C$99l=C$99c.m)[0]=C$99t,C$99l[1]=C$99e,C$99l[2]=C$99i,C$99l[3]=C$99n,C$99l[4]=C$99r,C$99l[5]=C$99s,C$99l[6]=C$99o,C$99l[7]=C$99a,C$99l[8]=C$99h,C$99l[9]=C$99u,C$99l[10]=C$99_,C$99l[11]=C$99d,C$99l[12]=C$99f,C$99l[13]=C$99p,C$99l[14]=C$99m,C$99l[15]=C$99y),C$99c}(C$99r.default=C$99D).mul=C$99D.multiply,C$99D.sub=C$99D.subtract,C$99D.IDENTITY=Object.freeze(new C$99D);for(var C$99_=new C$99o.default,C$99d=new C$99u.default,C$99f=(C$99s.default.fastDefine("cc.Mat4",C$99D,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),0);C$99f<16;C$99f++)!function(C$99e){Object.defineProperty(C$99D.prototype,"m"+C$99e,{get:function(){return this.m[C$99e]},set:function(C$99t){this.m[C$99e]=C$99t}})}(C$99f);cc.mat4=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f,C$99p){C$99e=new C$99D(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99f,C$99p);return void 0===C$99t&&C$99D.identity(C$99e),C$99e},cc.Mat4=C$99D,C$99i.exports=C$99r.default},{"../platform/CCClass":189,"./mat3":280,"./quat":282,"./utils":286,"./value-type":287,"./vec3":289}],282:[function(C$99t,C$99l,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99i=C$99n(C$99t("./value-type")),C$99h=C$99n(C$99t("../platform/CCClass")),C$99r=C$99n(C$99t("./vec3")),C$99u=C$99n(C$99t("./mat3")),C$99_=C$99t("./utils");function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99d(C$99i){return function(){var C$99t,C$99e=C$99f(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99f(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99f(C$99t){return(C$99f=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99v=C$99i.default,C$99t=C$99v,(C$99i=C$99o).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99d(C$99o),(C$99i=C$99o.prototype).mul=function(C$99t,C$99e){return C$99o.multiply(C$99e||new C$99o,this,C$99t)},C$99o.clone=function(C$99t){return new C$99o(C$99t.x,C$99t.y,C$99t.z,C$99t.w)},C$99o.copy=function(C$99t,C$99e){return C$99t.x=C$99e.x,C$99t.y=C$99e.y,C$99t.z=C$99e.z,C$99t.w=C$99e.w,C$99t},C$99o.set=function(C$99t,C$99e,C$99i,C$99n,C$99r){return C$99t.x=C$99e,C$99t.y=C$99i,C$99t.z=C$99n,C$99t.w=C$99r,C$99t},C$99o.identity=function(C$99t){return C$99t.x=0,C$99t.y=0,C$99t.z=0,C$99t.w=1,C$99t},C$99o.rotationTo=function(C$99t,C$99e,C$99i){var C$99n=C$99r.default.dot(C$99e,C$99i);return C$99n<-.999999?(C$99r.default.cross(C$99c,C$99r.default.RIGHT,C$99e),C$99c.mag()<1e-6&&C$99r.default.cross(C$99c,C$99r.default.UP,C$99e),C$99r.default.normalize(C$99c,C$99c),C$99o.fromAxisAngle(C$99t,C$99c,Math.PI),C$99t):.999999<C$99n?(C$99t.x=0,C$99t.y=0,C$99t.z=0,C$99t.w=1,C$99t):(C$99r.default.cross(C$99c,C$99e,C$99i),C$99t.x=C$99c.x,C$99t.y=C$99c.y,C$99t.z=C$99c.z,C$99t.w=1+C$99n,C$99o.normalize(C$99t,C$99t))},C$99o.getAxisAngle=function(C$99t,C$99e){var C$99i=2*Math.acos(C$99e.w),C$99n=Math.sin(C$99i/2);return 0!==C$99n?(C$99t.x=C$99e.x/C$99n,C$99t.y=C$99e.y/C$99n,C$99t.z=C$99e.z/C$99n):(C$99t.x=1,C$99t.y=0,C$99t.z=0),C$99i},C$99o.multiply=function(C$99t,C$99e,C$99i){return C$99p=C$99e.x*C$99i.w+C$99e.w*C$99i.x+C$99e.y*C$99i.z-C$99e.z*C$99i.y,C$99m=C$99e.y*C$99i.w+C$99e.w*C$99i.y+C$99e.z*C$99i.x-C$99e.x*C$99i.z,C$99y=C$99e.z*C$99i.w+C$99e.w*C$99i.z+C$99e.x*C$99i.y-C$99e.y*C$99i.x,C$99g=C$99e.w*C$99i.w-C$99e.x*C$99i.x-C$99e.y*C$99i.y-C$99e.z*C$99i.z,C$99t.x=C$99p,C$99t.y=C$99m,C$99t.z=C$99y,C$99t.w=C$99g,C$99t},C$99o.multiplyScalar=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x*C$99i,C$99t.y=C$99e.y*C$99i,C$99t.z=C$99e.z*C$99i,C$99t.w=C$99e.w*C$99i,C$99t},C$99o.scaleAndAdd=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e.x+C$99i.x*C$99n,C$99t.y=C$99e.y+C$99i.y*C$99n,C$99t.z=C$99e.z+C$99i.z*C$99n,C$99t.w=C$99e.w+C$99i.w*C$99n,C$99t},C$99o.rotateX=function(C$99t,C$99e,C$99i){C$99i*=.5;var C$99n=Math.sin(C$99i),C$99i=Math.cos(C$99i);return C$99t.x=C$99e.x*C$99i+C$99e.w*C$99n,C$99t.y=C$99e.y*C$99i+C$99e.z*C$99n,C$99t.z=C$99e.z*C$99i-C$99e.y*C$99n,C$99t.w=C$99e.w*C$99i-C$99e.x*C$99n,C$99t},C$99o.rotateY=function(C$99t,C$99e,C$99i){C$99i*=.5;var C$99n=Math.sin(C$99i),C$99i=Math.cos(C$99i);return C$99t.x=C$99e.x*C$99i-C$99e.z*C$99n,C$99t.y=C$99e.y*C$99i+C$99e.w*C$99n,C$99t.z=C$99e.z*C$99i+C$99e.x*C$99n,C$99t.w=C$99e.w*C$99i-C$99e.y*C$99n,C$99t},C$99o.rotateZ=function(C$99t,C$99e,C$99i){C$99i*=.5;var C$99n=Math.sin(C$99i),C$99i=Math.cos(C$99i);return C$99t.x=C$99e.x*C$99i+C$99e.y*C$99n,C$99t.y=C$99e.y*C$99i-C$99e.x*C$99n,C$99t.z=C$99e.z*C$99i+C$99e.w*C$99n,C$99t.w=C$99e.w*C$99i-C$99e.z*C$99n,C$99t},C$99o.rotateAround=function(C$99t,C$99e,C$99i,C$99n){return C$99o.invert(C$99a,C$99e),C$99r.default.transformQuat(C$99c,C$99i,C$99a),C$99o.fromAxisAngle(C$99a,C$99c,C$99n),C$99o.multiply(C$99t,C$99e,C$99a),C$99t},C$99o.rotateAroundLocal=function(C$99t,C$99e,C$99i,C$99n){return C$99o.fromAxisAngle(C$99a,C$99i,C$99n),C$99o.multiply(C$99t,C$99e,C$99a),C$99t},C$99o.calculateW=function(C$99t,C$99e){return C$99t.x=C$99e.x,C$99t.y=C$99e.y,C$99t.z=C$99e.z,C$99t.w=Math.sqrt(Math.abs(1-C$99e.x*C$99e.x-C$99e.y*C$99e.y-C$99e.z*C$99e.z)),C$99t},C$99o.dot=function(C$99t,C$99e){return C$99t.x*C$99e.x+C$99t.y*C$99e.y+C$99t.z*C$99e.z+C$99t.w*C$99e.w},C$99o.lerp=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e.x+C$99n*(C$99i.x-C$99e.x),C$99t.y=C$99e.y+C$99n*(C$99i.y-C$99e.y),C$99t.z=C$99e.z+C$99n*(C$99i.z-C$99e.z),C$99t.w=C$99e.w+C$99n*(C$99i.w-C$99e.w),C$99t},C$99o.slerp=function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s=0,C$99o=0,C$99a=C$99e.x*C$99i.x+C$99e.y*C$99i.y+C$99e.z*C$99i.z+C$99e.w*C$99i.w;return C$99a<0&&(C$99a=-C$99a,C$99i.x=-C$99i.x,C$99i.y=-C$99i.y,C$99i.z=-C$99i.z,C$99i.w=-C$99i.w),C$99o=1e-6<1-C$99a?(C$99a=Math.acos(C$99a),C$99r=Math.sin(C$99a),C$99s=Math.sin((1-C$99n)*C$99a)/C$99r,Math.sin(C$99n*C$99a)/C$99r):(C$99s=1-C$99n,C$99n),C$99t.x=C$99s*C$99e.x+C$99o*C$99i.x,C$99t.y=C$99s*C$99e.y+C$99o*C$99i.y,C$99t.z=C$99s*C$99e.z+C$99o*C$99i.z,C$99t.w=C$99s*C$99e.w+C$99o*C$99i.w,C$99t},C$99o.sqlerp=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){return C$99o.slerp(C$99a,C$99e,C$99r,C$99s),C$99o.slerp(C$99x,C$99i,C$99n,C$99s),C$99o.slerp(C$99t,C$99a,C$99x,2*C$99s*(1-C$99s)),C$99t},C$99o.invert=function(C$99t,C$99e){var C$99i=C$99e.x*C$99e.x+C$99e.y*C$99e.y+C$99e.z*C$99e.z+C$99e.w*C$99e.w,C$99i=C$99i?1/C$99i:0;return C$99t.x=-C$99e.x*C$99i,C$99t.y=-C$99e.y*C$99i,C$99t.z=-C$99e.z*C$99i,C$99t.w=C$99e.w*C$99i,C$99t},C$99o.conjugate=function(C$99t,C$99e){return C$99t.x=-C$99e.x,C$99t.y=-C$99e.y,C$99t.z=-C$99e.z,C$99t.w=C$99e.w,C$99t},C$99o.len=function(C$99t){return Math.sqrt(C$99t.x*C$99t.x+C$99t.y*C$99t.y+C$99t.z*C$99t.z+C$99t.w*C$99t.w)},C$99o.lengthSqr=function(C$99t){return C$99t.x*C$99t.x+C$99t.y*C$99t.y+C$99t.z*C$99t.z+C$99t.w*C$99t.w},C$99o.normalize=function(C$99t,C$99e){var C$99i=C$99e.x*C$99e.x+C$99e.y*C$99e.y+C$99e.z*C$99e.z+C$99e.w*C$99e.w;return 0<C$99i&&(C$99i=1/Math.sqrt(C$99i),C$99t.x=C$99e.x*C$99i,C$99t.y=C$99e.y*C$99i,C$99t.z=C$99e.z*C$99i,C$99t.w=C$99e.w*C$99i),C$99t},C$99o.fromAxes=function(C$99t,C$99e,C$99i,C$99n){return C$99u.default.set(C$99b,C$99e.x,C$99e.y,C$99e.z,C$99i.x,C$99i.y,C$99i.z,C$99n.x,C$99n.y,C$99n.z),C$99o.normalize(C$99t,C$99o.fromMat3(C$99t,C$99b))},C$99o.fromViewUp=function(C$99t,C$99e,C$99i){return C$99u.default.fromViewUp(C$99b,C$99e,C$99i),C$99o.normalize(C$99t,C$99o.fromMat3(C$99t,C$99b))},C$99o.fromAxisAngle=function(C$99t,C$99e,C$99i){C$99i*=.5;var C$99n=Math.sin(C$99i);return C$99t.x=C$99n*C$99e.x,C$99t.y=C$99n*C$99e.y,C$99t.z=C$99n*C$99e.z,C$99t.w=Math.cos(C$99i),C$99t},C$99o.fromAngleZ=function(C$99t,C$99e){return C$99e*=C$99A,C$99t.x=C$99t.y=0,C$99t.z=Math.sin(C$99e),C$99t.w=Math.cos(C$99e),C$99t},C$99o.fromMat3=function(C$99t,C$99e){var C$99e=C$99e.m,C$99i=C$99e[0],C$99n=C$99e[1],C$99r=C$99e[2],C$99s=C$99e[3],C$99o=C$99e[4],C$99a=C$99e[5],C$99c=C$99e[6],C$99h=C$99e[7],C$99e=C$99e[8],C$99l=C$99i+C$99o+C$99e;return 0<C$99l?(C$99l=.5/Math.sqrt(C$99l+1),C$99t.w=.25/C$99l,C$99t.x=(C$99a-C$99h)*C$99l,C$99t.y=(C$99c-C$99r)*C$99l,C$99t.z=(C$99n-C$99s)*C$99l):C$99o<C$99i&&C$99e<C$99i?(C$99l=2*Math.sqrt(1+C$99i-C$99o-C$99e),C$99t.w=(C$99a-C$99h)/C$99l,C$99t.x=.25*C$99l,C$99t.y=(C$99s+C$99n)/C$99l,C$99t.z=(C$99c+C$99r)/C$99l):C$99e<C$99o?(C$99l=2*Math.sqrt(1+C$99o-C$99i-C$99e),C$99t.w=(C$99c-C$99r)/C$99l,C$99t.x=(C$99s+C$99n)/C$99l,C$99t.y=.25*C$99l,C$99t.z=(C$99h+C$99a)/C$99l):(C$99l=2*Math.sqrt(1+C$99e-C$99i-C$99o),C$99t.w=(C$99n-C$99s)/C$99l,C$99t.x=(C$99c+C$99r)/C$99l,C$99t.y=(C$99h+C$99a)/C$99l,C$99t.z=.25*C$99l),C$99t},C$99o.fromEuler=function(C$99t,C$99e,C$99i,C$99n){C$99e*=C$99A,C$99i*=C$99A,C$99n*=C$99A;var C$99r=Math.sin(C$99e),C$99e=Math.cos(C$99e),C$99s=Math.sin(C$99i),C$99i=Math.cos(C$99i),C$99o=Math.sin(C$99n),C$99n=Math.cos(C$99n);return C$99t.x=C$99r*C$99i*C$99n+C$99e*C$99s*C$99o,C$99t.y=C$99e*C$99s*C$99n+C$99r*C$99i*C$99o,C$99t.z=C$99e*C$99i*C$99o-C$99r*C$99s*C$99n,C$99t.w=C$99e*C$99i*C$99n-C$99r*C$99s*C$99o,C$99t},C$99o.toAxisX=function(C$99t,C$99e){var C$99i=2*C$99e.y,C$99n=2*C$99e.z;return C$99t.x=1-C$99i*C$99e.y-C$99n*C$99e.z,C$99t.y=C$99i*C$99e.x+C$99n*C$99e.w,C$99t.z=C$99n*C$99e.x+C$99i*C$99e.w,C$99t},C$99o.toAxisY=function(C$99t,C$99e){var C$99i=2*C$99e.x,C$99n=2*C$99e.y,C$99r=2*C$99e.z;return C$99t.x=C$99n*C$99e.x-C$99r*C$99e.w,C$99t.y=1-C$99i*C$99e.x-C$99r*C$99e.z,C$99t.z=C$99r*C$99e.y+C$99i*C$99e.w,C$99t},C$99o.toAxisZ=function(C$99t,C$99e){var C$99i=2*C$99e.x,C$99n=2*C$99e.y,C$99r=2*C$99e.z;return C$99t.x=C$99r*C$99e.x-C$99n*C$99e.w,C$99t.y=C$99r*C$99e.y-C$99i*C$99e.w,C$99t.z=1-C$99i*C$99e.x-C$99n*C$99e.y,C$99t},C$99o.toEuler=function(C$99t,C$99e,C$99h){var C$99u,C$99i,C$99n=C$99e.x,C$99r=C$99e.y,C$99s=C$99e.z,C$99e=C$99e.w,C$99o=0,C$99a=0,C$99c=0,C$99l=C$99n*C$99r+C$99s*C$99e;return.499999<C$99l?(C$99a=(C$99o=0,C$99_.toDegree)(2*Math.atan2(C$99n,C$99e)),C$99c=90):C$99l<-.499999?(C$99a=-(C$99o=0,C$99_.toDegree)(2*Math.atan2(C$99n,C$99e)),C$99c=-90):(C$99u=C$99r*C$99r,C$99i=C$99s*C$99s,C$99o=(0,C$99_.toDegree)(Math.atan2(2*C$99n*C$99e-2*C$99r*C$99s,1-2*(C$99n*C$99n)-2*C$99i)),C$99a=(0,C$99_.toDegree)(Math.atan2(2*C$99r*C$99e-2*C$99n*C$99s,1-2*C$99u-2*C$99i)),C$99c=(0,C$99_.toDegree)(Math.asin(2*C$99l)),C$99h&&(C$99o=-180*Math.sign(C$99o+1e-6)+C$99o,C$99a=-180*Math.sign(C$99a+1e-6)+C$99a,C$99c=180*Math.sign(C$99c+1e-6)-C$99c)),C$99t.x=C$99o,C$99t.y=C$99a,C$99t.z=C$99c,C$99t},C$99o.strictEquals=function(C$99t,C$99e){return C$99t.x===C$99e.x&&C$99t.y===C$99e.y&&C$99t.z===C$99e.z&&C$99t.w===C$99e.w},C$99o.equals=function(C$99t,C$99e,C$99i){return void 0===C$99i&&(C$99i=C$99_.EPSILON),Math.abs(C$99t.x-C$99e.x)<=C$99i*Math.max(1,Math.abs(C$99t.x),Math.abs(C$99e.x))&&Math.abs(C$99t.y-C$99e.y)<=C$99i*Math.max(1,Math.abs(C$99t.y),Math.abs(C$99e.y))&&Math.abs(C$99t.z-C$99e.z)<=C$99i*Math.max(1,Math.abs(C$99t.z),Math.abs(C$99e.z))&&Math.abs(C$99t.w-C$99e.w)<=C$99i*Math.max(1,Math.abs(C$99t.w),Math.abs(C$99e.w))},C$99o.toArray=function(C$99t,C$99e,C$99i){return C$99t[(C$99i=void 0===C$99i?0:C$99i)+0]=C$99e.x,C$99t[C$99i+1]=C$99e.y,C$99t[C$99i+2]=C$99e.z,C$99t[C$99i+3]=C$99e.w,C$99t},C$99o.fromArray=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e[(C$99i=void 0===C$99i?0:C$99i)+0],C$99t.y=C$99e[C$99i+1],C$99t.z=C$99e[C$99i+2],C$99t.w=C$99e[C$99i+3],C$99t},C$99i.clone=function(){return new C$99o(this.x,this.y,this.z,this.w)},C$99i.set=function(C$99t){return this.x=C$99t.x,this.y=C$99t.y,this.z=C$99t.z,this.w=C$99t.w,this},C$99i.equals=function(C$99t){return C$99t&&this.x===C$99t.x&&this.y===C$99t.y&&this.z===C$99t.z&&this.w===C$99t.w},C$99i.toEuler=function(C$99t){return C$99o.toEuler(C$99t,this)},C$99i.fromEuler=function(C$99t){return C$99o.fromEuler(this,C$99t.x,C$99t.y,C$99t.z)},C$99i.lerp=function(C$99t,C$99e,C$99i){return C$99i=C$99i||new C$99o,C$99o.slerp(C$99i,this,C$99t,C$99e),C$99i},C$99i.multiply=function(C$99t){return C$99o.multiply(this,this,C$99t)},C$99i.rotateAround=function(C$99t,C$99e,C$99i,C$99n){return C$99n=C$99n||new C$99o,C$99o.rotateAround(C$99n,C$99t,C$99e,C$99i)};var C$99p,C$99m,C$99y,C$99g,C$99v,C$99s=C$99o;function C$99o(C$99t,C$99e,C$99i,C$99n){var C$99r;return void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=1),(C$99r=C$99v.call(this)||this).x=void 0,C$99r.y=void 0,C$99r.z=void 0,C$99r.w=void 0,C$99t&&"object"==typeof C$99t?(C$99r.z=C$99t.z,C$99r.y=C$99t.y,C$99r.w=C$99t.w,C$99r.x=C$99t.x):(C$99r.x=C$99t,C$99r.y=C$99e,C$99r.z=C$99i,C$99r.w=C$99n),C$99r}(C$99e.default=C$99s).mul=C$99s.multiply,C$99s.scale=C$99s.multiplyScalar,C$99s.mag=C$99s.len,C$99s.IDENTITY=Object.freeze(new C$99s);var C$99a=new C$99s,C$99x=new C$99s,C$99c=new C$99r.default,C$99b=new C$99u.default,C$99A=.5*Math.PI/180;C$99h.default.fastDefine("cc.Quat",C$99s,{x:0,y:0,z:0,w:1}),cc.quat=function(C$99t,C$99e,C$99i,C$99n){return new C$99s(C$99t,C$99e,C$99i,C$99n)},cc.Quat=C$99s,C$99l.exports=C$99e.default},{"../platform/CCClass":189,"./mat3":280,"./utils":286,"./value-type":287,"./vec3":289}],283:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99s(C$99t("./value-type")),C$99r=C$99s(C$99t("../platform/CCClass")),C$99o=C$99s(C$99t("./vec2")),C$99h=C$99s(C$99t("./size"));function C$99s(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99c(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99u(C$99i){return function(){var C$99t,C$99e=C$99a(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99a(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99a(C$99t){return(C$99a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99l=function(C$99s){C$99t=C$99s,(C$99i=C$99a).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99u(C$99a);function C$99a(C$99t,C$99e,C$99i,C$99n){var C$99r;return void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),(C$99r=C$99s.call(this)||this).x=void 0,C$99r.y=void 0,C$99r.width=void 0,C$99r.height=void 0,C$99t&&"object"==typeof C$99t&&(C$99e=C$99t.y,C$99i=C$99t.width,C$99n=C$99t.height,C$99t=C$99t.x),C$99r.x=C$99t||0,C$99r.y=C$99e||0,C$99r.width=C$99i||0,C$99r.height=C$99n||0,C$99r}C$99a.fromMinMax=function(C$99t,C$99e){var C$99i=Math.min(C$99t.x,C$99e.x),C$99n=Math.min(C$99t.y,C$99e.y);return new C$99a(C$99i,C$99n,Math.max(C$99t.x,C$99e.x)-C$99i,Math.max(C$99t.y,C$99e.y)-C$99n)};var C$99t,C$99e,C$99i=C$99a.prototype;return C$99i.clone=function(){return new C$99a(this.x,this.y,this.width,this.height)},C$99i.equals=function(C$99t){return C$99t&&this.x===C$99t.x&&this.y===C$99t.y&&this.width===C$99t.width&&this.height===C$99t.height},C$99i.lerp=function(C$99t,C$99e,C$99i){C$99i=C$99i||new C$99a;var C$99n=this.x,C$99r=this.y,C$99s=this.width,C$99o=this.height;return C$99i.x=C$99n+(C$99t.x-C$99n)*C$99e,C$99i.y=C$99r+(C$99t.y-C$99r)*C$99e,C$99i.width=C$99s+(C$99t.width-C$99s)*C$99e,C$99i.height=C$99o+(C$99t.height-C$99o)*C$99e,C$99i},C$99i.set=function(C$99t){return this.x=C$99t.x,this.y=C$99t.y,this.width=C$99t.width,this.height=C$99t.height,this},C$99i.intersects=function(C$99t){var C$99e=this.x+this.width,C$99i=this.y+this.height,C$99n=C$99t.x+C$99t.width,C$99r=C$99t.y+C$99t.height;return!(C$99e<C$99t.x||C$99n<this.x||C$99i<C$99t.y||C$99r<this.y)},C$99i.intersection=function(C$99t,C$99e){var C$99i=this.x,C$99n=this.y,C$99r=this.x+this.width,C$99s=this.y+this.height,C$99o=C$99e.x,C$99a=C$99e.y,C$99c=C$99e.x+C$99e.width,C$99e=C$99e.y+C$99e.height;return C$99t.x=Math.max(C$99i,C$99o),C$99t.y=Math.max(C$99n,C$99a),C$99t.width=Math.min(C$99r,C$99c)-C$99t.x,C$99t.height=Math.min(C$99s,C$99e)-C$99t.y,C$99t},C$99i.contains=function(C$99t){return this.x<=C$99t.x&&this.x+this.width>=C$99t.x&&this.y<=C$99t.y&&this.y+this.height>=C$99t.y},C$99i.containsRect=function(C$99t){return this.x<=C$99t.x&&this.x+this.width>=C$99t.x+C$99t.width&&this.y<=C$99t.y&&this.y+this.height>=C$99t.y+C$99t.height},C$99i.union=function(C$99t,C$99e){var C$99i=this.x,C$99n=this.y,C$99r=this.width,C$99s=this.height,C$99o=C$99e.x,C$99a=C$99e.y,C$99c=C$99e.width,C$99e=C$99e.height;return C$99t.x=Math.min(C$99i,C$99o),C$99t.y=Math.min(C$99n,C$99a),C$99t.width=Math.max(C$99i+C$99r,C$99o+C$99c)-C$99t.x,C$99t.height=Math.max(C$99n+C$99s,C$99a+C$99e)-C$99t.y,C$99t},C$99i.transformMat4=function(C$99t,C$99e){var C$99i=this.x,C$99n=this.y,C$99r=C$99i+this.width,C$99s=C$99n+this.height,C$99e=C$99e.m,C$99o=C$99e[0]*C$99i+C$99e[4]*C$99n+C$99e[12],C$99a=C$99e[1]*C$99i+C$99e[5]*C$99n+C$99e[13],C$99c=C$99e[0]*C$99r+C$99e[4]*C$99n+C$99e[12],C$99n=C$99e[1]*C$99r+C$99e[5]*C$99n+C$99e[13],C$99l=C$99e[0]*C$99i+C$99e[4]*C$99s+C$99e[12],C$99i=C$99e[1]*C$99i+C$99e[5]*C$99s+C$99e[13],C$99h=C$99e[0]*C$99r+C$99e[4]*C$99s+C$99e[12],C$99r=C$99e[1]*C$99r+C$99e[5]*C$99s+C$99e[13],C$99s=Math.min(C$99o,C$99c,C$99l,C$99h),C$99e=Math.max(C$99o,C$99c,C$99l,C$99h),C$99o=Math.min(C$99a,C$99n,C$99i,C$99r),C$99c=Math.max(C$99a,C$99n,C$99i,C$99r);return C$99t.x=C$99s,C$99t.y=C$99o,C$99t.width=C$99e-C$99s,C$99t.height=C$99c-C$99o,C$99t},C$99i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},C$99t=C$99a,(C$99i=[{key:"xMin",get:function(){return this.x},set:function(C$99t){this.width+=this.x-C$99t,this.x=C$99t}},{key:"yMin",get:function(){return this.y},set:function(C$99t){this.height+=this.y-C$99t,this.y=C$99t}},{key:"xMax",get:function(){return this.x+this.width},set:function(C$99t){this.width=C$99t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(C$99t){this.height=C$99t-this.y}},{key:"center",get:function(){return new C$99o.default(this.x+.5*this.width,this.y+.5*this.height)},set:function(C$99t){this.x=C$99t.x-.5*this.width,this.y=C$99t.y-.5*this.height}},{key:"origin",get:function(){return new C$99o.default(this.x,this.y)},set:function(C$99t){this.x=C$99t.x,this.y=C$99t.y}},{key:"size",get:function(){return new C$99h.default(this.width,this.height)},set:function(C$99t){this.width=C$99t.width,this.height=C$99t.height}}])&&C$99c(C$99t.prototype,C$99i),C$99e&&C$99c(C$99t,C$99e),C$99a}(C$99n.default);C$99i.default=C$99l,C$99r.default.fastDefine("cc.Rect",C$99l,{x:0,y:0,width:0,height:0}),cc.Rect=C$99l,cc.rect=function(C$99t,C$99e,C$99i,C$99n){return new C$99l(C$99t,C$99e,C$99i,C$99n)},C$99e.exports=C$99i.default},{"../platform/CCClass":189,"./size":284,"./value-type":287,"./vec2":288}],284:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99r(C$99t("./value-type")),C$99t=C$99r(C$99t("../platform/CCClass"));function C$99r(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99o(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99a(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99c=function(C$99n){var C$99t,C$99e;C$99e=C$99n,(C$99t=C$99s).prototype=Object.create(C$99e.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99e,C$99a(C$99s);function C$99s(C$99t,C$99e){var C$99i;return void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),(C$99i=C$99n.call(this)||this).width=void 0,C$99i.height=void 0,C$99t&&"object"==typeof C$99t?(C$99i.height=C$99t.height,C$99i.width=C$99t.width):(C$99i.width=C$99t||0,C$99i.height=C$99e||0),C$99i}C$99t=C$99s,C$99e=[{key:"ZERO",get:function(){return new C$99s}}],(C$99i=null)&&C$99o(C$99t.prototype,C$99i),C$99e&&C$99o(C$99t,C$99e);var C$99i=C$99s.prototype;return C$99i.clone=function(){return new C$99s(this.width,this.height)},C$99i.equals=function(C$99t){return C$99t&&this.width===C$99t.width&&this.height===C$99t.height},C$99i.lerp=function(C$99t,C$99e,C$99i){C$99i=C$99i||new C$99s;var C$99n=this.width,C$99r=this.height;return C$99i.width=C$99n+(C$99t.width-C$99n)*C$99e,C$99i.height=C$99r+(C$99t.height-C$99r)*C$99e,C$99i},C$99i.set=function(C$99t){return this.width=C$99t.width,this.height=C$99t.height,this},C$99i.toString=function(){return"("+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},C$99s}(C$99n.default);(C$99i.default=C$99c).ZERO_R=C$99c.ZERO,C$99t.default.fastDefine("cc.Size",C$99c,{width:0,height:0}),cc.size=function(C$99t,C$99e){return new C$99c(C$99t,C$99e)},cc.Size=C$99c,C$99e.exports=C$99i.default},{"../platform/CCClass":189,"./value-type":287}],285:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99r=(C$99t=C$99t("./quat"))&&C$99t.__esModule?C$99t:{default:C$99t};var C$99s=new C$99r.default,C$99t=(C$99o.toRotation=function(C$99t,C$99e){return C$99t.x=C$99e[3],C$99t.y=C$99e[4],C$99t.z=C$99e[5],C$99t.w=C$99e[6],C$99t},C$99o.fromRotation=function(C$99t,C$99e){return C$99t[3]=C$99e.x,C$99t[4]=C$99e.y,C$99t[5]=C$99e.z,C$99t[6]=C$99e.w,C$99t},C$99o.toEuler=function(C$99t,C$99e){return C$99o.toRotation(C$99s,C$99e),C$99r.default.toEuler(C$99t,C$99s),C$99t},C$99o.fromEuler=function(C$99t,C$99e){return C$99r.default.fromEuler(C$99s,C$99e.x,C$99e.y,C$99e.z),C$99o.fromRotation(C$99t,C$99s),C$99t},C$99o.fromEulerNumber=function(C$99t,C$99e,C$99i,C$99n){return C$99r.default.fromEuler(C$99s,C$99e,C$99i,C$99n),C$99o.fromRotation(C$99t,C$99s),C$99t},C$99o.toScale=function(C$99t,C$99e){return C$99t.x=C$99e[7],C$99t.y=C$99e[8],C$99t.z=C$99e[9],C$99t},C$99o.fromScale=function(C$99t,C$99e){return C$99t[7]=C$99e.x,C$99t[8]=C$99e.y,C$99t[9]=C$99e.z,C$99t},C$99o.toPosition=function(C$99t,C$99e){return C$99t.x=C$99e[0],C$99t.y=C$99e[1],C$99t.z=C$99e[2],C$99t},C$99o.fromPosition=function(C$99t,C$99e){return C$99t[0]=C$99e.x,C$99t[1]=C$99e.y,C$99t[2]=C$99e.z,C$99t},C$99o.fromAngleZ=function(C$99t,C$99e){return C$99r.default.fromAngleZ(C$99s,C$99e),C$99o.fromRotation(C$99t,C$99s),C$99t},C$99o.toMat4=function(C$99h,C$99t){var C$99e=C$99t[3],C$99i=C$99t[4],C$99n=C$99t[5],C$99r=C$99t[6],C$99s=C$99e+C$99e,C$99o=C$99i+C$99i,C$99a=C$99n+C$99n,C$99u=C$99e*C$99s,C$99_=C$99e*C$99o,C$99e=C$99e*C$99a,C$99d=C$99i*C$99o,C$99i=C$99i*C$99a,C$99n=C$99n*C$99a,C$99s=C$99r*C$99s,C$99o=C$99r*C$99o,C$99r=C$99r*C$99a,C$99a=C$99t[7],C$99c=C$99t[8],C$99f=C$99t[9],C$99l=C$99h.m;return C$99l[0]=(1-(C$99d+C$99n))*C$99a,C$99l[1]=(C$99_+C$99r)*C$99a,C$99l[2]=(C$99e-C$99o)*C$99a,C$99l[3]=0,C$99l[4]=(C$99_-C$99r)*C$99c,C$99l[5]=(1-(C$99u+C$99n))*C$99c,C$99l[6]=(C$99i+C$99s)*C$99c,C$99l[7]=0,C$99l[8]=(C$99e+C$99o)*C$99f,C$99l[9]=(C$99i-C$99s)*C$99f,C$99l[10]=(1-(C$99u+C$99d))*C$99f,C$99l[11]=0,C$99l[12]=C$99t[0],C$99l[13]=C$99t[1],C$99l[14]=C$99t[2],C$99l[15]=1,C$99h},C$99o);function C$99o(){}C$99i.default=C$99t,cc.Trs=C$99t,C$99e.exports=C$99i.default},{"./quat":282}],286:[function(C$99l,C$99h,C$99t){"use strict";C$99t.__esModule=!0,C$99t.equals=function(C$99t,C$99e){return Math.abs(C$99t-C$99e)<=C$99n*Math.max(1,Math.abs(C$99t),Math.abs(C$99e))},C$99t.approx=function(C$99t,C$99e,C$99i){return C$99i=C$99i||C$99n,Math.abs(C$99t-C$99e)<=C$99i},C$99t.clamp=function(C$99t,C$99e,C$99i){return C$99t<C$99e?C$99e:C$99i<C$99t?C$99i:C$99t},C$99t.clamp01=function(C$99t){return C$99t<0?0:1<C$99t?1:C$99t},C$99t.lerp=function(C$99t,C$99e,C$99i){return C$99t+(C$99e-C$99t)*C$99i},C$99t.toRadian=function(C$99t){return C$99t*C$99e},C$99t.toDegree=function(C$99t){return C$99t*C$99i},C$99t.randomRange=C$99s,C$99t.randomRangeInt=function(C$99t,C$99e){return Math.floor(C$99s(C$99t,C$99e))},C$99t.pseudoRandom=C$99o,C$99t.pseudoRandomRange=C$99a,C$99t.pseudoRandomRangeInt=function(C$99t,C$99e,C$99i){return Math.floor(C$99a(C$99t,C$99e,C$99i))},C$99t.nextPow2=function(C$99t){return--C$99t,C$99t=(C$99t=(C$99t=(C$99t=(C$99t|=C$99t>>1)|C$99t>>2)|C$99t>>4)|C$99t>>8)|C$99t>>16,++C$99t},C$99t.repeat=C$99c,C$99t.pingPong=function(C$99t,C$99e){return C$99t=C$99c(C$99t,2*C$99e),C$99t=C$99e-Math.abs(C$99t-C$99e)},C$99t.inverseLerp=function(C$99t,C$99e,C$99i){return(C$99i-C$99t)/(C$99e-C$99t)},C$99t.sign=function(C$99t){return(0<C$99t)-(C$99t<0)},C$99t.random=C$99t.FLOAT_BYTES=C$99t.FLOAT_ARRAY_TYPE=C$99t.INT_MIN=C$99t.INT_MAX=C$99t.INT_BITS=C$99t.EPSILON=void 0;var C$99e=Math.PI/180,C$99i=180/Math.PI,C$99n=1e-6,C$99r=(C$99t.EPSILON=C$99n,C$99t.INT_BITS=32,C$99t.INT_MAX=2147483647,C$99t.INT_MIN=-1<<31,Float64Array);C$99t.FLOAT_ARRAY_TYPE=C$99r;C$99t.FLOAT_BYTES=8;C$99r=Math.random;function C$99s(C$99t,C$99e){return Math.random()*(C$99e-C$99t)+C$99t}function C$99o(C$99t){return(C$99t=(9301*C$99t+49297)%233280)/233280}function C$99a(C$99t,C$99e,C$99i){return C$99o(C$99t)*(C$99i-C$99e)+C$99e}function C$99c(C$99t,C$99e){return C$99t-Math.floor(C$99t/C$99e)*C$99e}C$99t.random=C$99r},{}],287:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99t=C$99t("../platform/js"))&&C$99t.__esModule?C$99t:{default:C$99t};(C$99t=C$99r.prototype).clone=function(){return cc.errorID("0100",C$99n.default.getClassName(this)+".clone"),null},C$99t.equals=function(C$99t){return cc.errorID("0100",C$99n.default.getClassName(this)+".equals"),!1},C$99t.lerp=function(C$99t,C$99e){return cc.errorID("0100",C$99n.default.getClassName(this)+".lerp"),this.clone()},C$99t.set=function(C$99t){cc.errorID("0100",C$99n.default.getClassName(this)+".set")},C$99t.toString=function(){return""+{}};C$99t=C$99r;function C$99r(){}C$99i.default=C$99t,C$99n.default.setClassName("cc.ValueType",C$99t),cc.ValueType=C$99t,C$99e.exports=C$99i.default},{"../platform/js":209}],288:[function(C$99t,C$99h,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99i=C$99s(C$99t("./value-type")),C$99u=C$99s(C$99t("../platform/CCClass")),C$99n=C$99s(C$99t("../utils/misc")),C$99r=C$99t("./utils");function C$99s(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99_(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99d(C$99i){return function(){var C$99t,C$99e=C$99f(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99f(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99f(C$99t){return(C$99f=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99p,C$99m,C$99y,C$99o=0,C$99a=0,C$99c=(C$99p=C$99i.default,C$99t=C$99p,(C$99i=C$99l).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99d(C$99l),(C$99i=C$99l.prototype).sub=function(C$99t,C$99e){return C$99l.subtract(C$99e||new C$99l,this,C$99t)},C$99i.mul=function(C$99t,C$99e){return C$99l.multiplyScalar(C$99e||new C$99l,this,C$99t)},C$99i.div=function(C$99t,C$99e){return C$99l.multiplyScalar(C$99e||new C$99l,this,1/C$99t)},C$99i.scale=function(C$99t,C$99e){return C$99l.multiply(C$99e||new C$99l,this,C$99t)},C$99i.neg=function(C$99t){return C$99l.negate(C$99t||new C$99l,this)},C$99l.clone=function(C$99t){return new C$99l(C$99t.x,C$99t.y)},C$99l.copy=function(C$99t,C$99e){return C$99t.x=C$99e.x,C$99t.y=C$99e.y,C$99t},C$99l.set=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e,C$99t.y=C$99i,C$99t},C$99l.add=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x+C$99i.x,C$99t.y=C$99e.y+C$99i.y,C$99t},C$99l.subtract=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x-C$99i.x,C$99t.y=C$99e.y-C$99i.y,C$99t},C$99l.multiply=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x*C$99i.x,C$99t.y=C$99e.y*C$99i.y,C$99t},C$99l.divide=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x/C$99i.x,C$99t.y=C$99e.y/C$99i.y,C$99t},C$99l.ceil=function(C$99t,C$99e){return C$99t.x=Math.ceil(C$99e.x),C$99t.y=Math.ceil(C$99e.y),C$99t},C$99l.floor=function(C$99t,C$99e){return C$99t.x=Math.floor(C$99e.x),C$99t.y=Math.floor(C$99e.y),C$99t},C$99l.min=function(C$99t,C$99e,C$99i){return C$99t.x=Math.min(C$99e.x,C$99i.x),C$99t.y=Math.min(C$99e.y,C$99i.y),C$99t},C$99l.max=function(C$99t,C$99e,C$99i){return C$99t.x=Math.max(C$99e.x,C$99i.x),C$99t.y=Math.max(C$99e.y,C$99i.y),C$99t},C$99l.round=function(C$99t,C$99e){return C$99t.x=Math.round(C$99e.x),C$99t.y=Math.round(C$99e.y),C$99t},C$99l.multiplyScalar=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x*C$99i,C$99t.y=C$99e.y*C$99i,C$99t},C$99l.scaleAndAdd=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e.x+C$99i.x*C$99n,C$99t.y=C$99e.y+C$99i.y*C$99n,C$99t},C$99l.distance=function(C$99t,C$99e){return C$99o=C$99e.x-C$99t.x,C$99a=C$99e.y-C$99t.y,Math.sqrt(C$99o*C$99o+C$99a*C$99a)},C$99l.squaredDistance=function(C$99t,C$99e){return C$99o=C$99e.x-C$99t.x,C$99a=C$99e.y-C$99t.y,C$99o*C$99o+C$99a*C$99a},C$99l.len=function(C$99t){return C$99o=C$99t.x,C$99a=C$99t.y,Math.sqrt(C$99o*C$99o+C$99a*C$99a)},C$99l.lengthSqr=function(C$99t){return C$99o=C$99t.x,C$99a=C$99t.y,C$99o*C$99o+C$99a*C$99a},C$99l.negate=function(C$99t,C$99e){return C$99t.x=-C$99e.x,C$99t.y=-C$99e.y,C$99t},C$99l.inverse=function(C$99t,C$99e){return C$99t.x=1/C$99e.x,C$99t.y=1/C$99e.y,C$99t},C$99l.inverseSafe=function(C$99t,C$99e){return C$99o=C$99e.x,C$99a=C$99e.y,Math.abs(C$99o)<C$99r.EPSILON?C$99t.x=0:C$99t.x=1/C$99o,Math.abs(C$99a)<C$99r.EPSILON?C$99t.y=0:C$99t.y=1/C$99a,C$99t},C$99l.normalize=function(C$99t,C$99e){C$99o=C$99e.x,C$99a=C$99e.y;C$99e=C$99o*C$99o+C$99a*C$99a;return 0<C$99e&&(C$99e=1/Math.sqrt(C$99e),C$99t.x=C$99o*C$99e,C$99t.y=C$99a*C$99e),C$99t},C$99l.dot=function(C$99t,C$99e){return C$99t.x*C$99e.x+C$99t.y*C$99e.y},C$99l.cross=function(C$99t,C$99e,C$99i){return C$99t.x=C$99t.y=0,C$99t.z=C$99e.x*C$99i.y-C$99e.y*C$99i.x,C$99t},C$99l.lerp=function(C$99t,C$99e,C$99i,C$99n){return C$99o=C$99e.x,C$99a=C$99e.y,C$99t.x=C$99o+C$99n*(C$99i.x-C$99o),C$99t.y=C$99a+C$99n*(C$99i.y-C$99a),C$99t},C$99l.random=function(C$99t,C$99e){C$99e=C$99e||1;var C$99i=2*(0,C$99r.random)()*Math.PI;return C$99t.x=Math.cos(C$99i)*C$99e,C$99t.y=Math.sin(C$99i)*C$99e,C$99t},C$99l.transformMat3=function(C$99t,C$99e,C$99i){C$99o=C$99e.x,C$99a=C$99e.y;C$99e=C$99i.m;return C$99t.x=C$99e[0]*C$99o+C$99e[3]*C$99a+C$99e[6],C$99t.y=C$99e[1]*C$99o+C$99e[4]*C$99a+C$99e[7],C$99t},C$99l.transformMat4=function(C$99t,C$99e,C$99i){C$99o=C$99e.x,C$99a=C$99e.y;C$99e=C$99i.m;return C$99t.x=C$99e[0]*C$99o+C$99e[4]*C$99a+C$99e[12],C$99t.y=C$99e[1]*C$99o+C$99e[5]*C$99a+C$99e[13],C$99t},C$99l.strictEquals=function(C$99t,C$99e){return C$99t.x===C$99e.x&&C$99t.y===C$99e.y},C$99l.equals=function(C$99t,C$99e,C$99i){return void 0===C$99i&&(C$99i=C$99r.EPSILON),Math.abs(C$99t.x-C$99e.x)<=C$99i*Math.max(1,Math.abs(C$99t.x),Math.abs(C$99e.x))&&Math.abs(C$99t.y-C$99e.y)<=C$99i*Math.max(1,Math.abs(C$99t.y),Math.abs(C$99e.y))},C$99l.angle=function(C$99t,C$99e){C$99l.normalize(C$99g,C$99t),C$99l.normalize(C$99v,C$99e);C$99t=C$99l.dot(C$99g,C$99v);return 1<C$99t?0:C$99t<-1?Math.PI:Math.acos(C$99t)},C$99l.toArray=function(C$99t,C$99e,C$99i){return C$99t[(C$99i=void 0===C$99i?0:C$99i)+0]=C$99e.x,C$99t[C$99i+1]=C$99e.y,C$99t},C$99l.fromArray=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e[(C$99i=void 0===C$99i?0:C$99i)+0],C$99t.y=C$99e[C$99i+1],C$99t},C$99t=C$99l,C$99y=[{key:"ONE",get:function(){return new C$99l(1,1)}},{key:"ZERO",get:function(){return new C$99l(0,0)}},{key:"UP",get:function(){return new C$99l(0,1)}},{key:"RIGHT",get:function(){return new C$99l(1,0)}}],(C$99m=null)&&C$99_(C$99t.prototype,C$99m),C$99y&&C$99_(C$99t,C$99y),C$99i.clone=function(){return new C$99l(this.x,this.y)},C$99i.set=function(C$99t){return this.x=C$99t.x,this.y=C$99t.y,this},C$99i.equals=function(C$99t){return C$99t&&this.x===C$99t.x&&this.y===C$99t.y},C$99i.fuzzyEquals=function(C$99t,C$99e){return this.x-C$99e<=C$99t.x&&C$99t.x<=this.x+C$99e&&this.y-C$99e<=C$99t.y&&C$99t.y<=this.y+C$99e},C$99i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},C$99i.lerp=function(C$99t,C$99e,C$99i){C$99i=C$99i||new C$99l;var C$99n=this.x,C$99r=this.y;return C$99i.x=C$99n+(C$99t.x-C$99n)*C$99e,C$99i.y=C$99r+(C$99t.y-C$99r)*C$99e,C$99i},C$99i.clampf=function(C$99t,C$99e){return this.x=C$99n.default.clampf(this.x,C$99t.x,C$99e.x),this.y=C$99n.default.clampf(this.y,C$99t.y,C$99e.y),this},C$99i.add=function(C$99t,C$99e){return(C$99e=C$99e||new C$99l).x=this.x+C$99t.x,C$99e.y=this.y+C$99t.y,C$99e},C$99i.addSelf=function(C$99t){return this.x+=C$99t.x,this.y+=C$99t.y,this},C$99i.subtract=function(C$99t){return this.x-=C$99t.x,this.y-=C$99t.y,this},C$99i.multiplyScalar=function(C$99t){return this.x*=C$99t,this.y*=C$99t,this},C$99i.multiply=function(C$99t){return this.x*=C$99t.x,this.y*=C$99t.y,this},C$99i.divide=function(C$99t){return this.x/=C$99t,this.y/=C$99t,this},C$99i.negate=function(){return this.x=-this.x,this.y=-this.y,this},C$99i.dot=function(C$99t){return this.x*C$99t.x+this.y*C$99t.y},C$99i.cross=function(C$99t){return this.x*C$99t.y-this.y*C$99t.x},C$99i.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},C$99i.lengthSqr=function(){return this.x*this.x+this.y*this.y},C$99i.normalizeSelf=function(){var C$99t=this.x*this.x+this.y*this.y;if(1==C$99t)return this;if(0==C$99t)return this;C$99t=1/Math.sqrt(C$99t);return this.x*=C$99t,this.y*=C$99t,this},C$99i.normalize=function(C$99t){return(C$99t=C$99t||new C$99l).x=this.x,C$99t.y=this.y,C$99t.normalizeSelf(),C$99t},C$99i.angle=function(C$99t){var C$99e=this.magSqr(),C$99i=C$99t.magSqr();if(0===C$99e||0===C$99i)return console.warn("Can't get angle between zero vector"),0;C$99t=this.dot(C$99t)/Math.sqrt(C$99e*C$99i),C$99t=C$99n.default.clampf(C$99t,-1,1);return Math.acos(C$99t)},C$99i.signAngle=function(C$99t){var C$99e=this.angle(C$99t);return this.cross(C$99t)<0?-C$99e:C$99e},C$99i.rotate=function(C$99t,C$99e){return(C$99e=C$99e||new C$99l).x=this.x,C$99e.y=this.y,C$99e.rotateSelf(C$99t)},C$99i.rotateSelf=function(C$99t){var C$99e=Math.sin(C$99t),C$99t=Math.cos(C$99t),C$99i=this.x;return this.x=C$99t*C$99i-C$99e*this.y,this.y=C$99e*C$99i+C$99t*this.y,this},C$99i.project=function(C$99t){return C$99t.multiplyScalar(this.dot(C$99t)/C$99t.dot(C$99t))},C$99i.transformMat4=function(C$99t,C$99e){return C$99e=C$99e||new C$99l,C$99l.transformMat4(C$99e,this,C$99t),C$99e},C$99i.maxAxis=function(){return Math.max(this.x,this.y)},C$99l);function C$99l(C$99t,C$99e){var C$99i;return void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),(C$99i=C$99p.call(this)||this).mag=C$99l.prototype.len,C$99i.magSqr=C$99l.prototype.lengthSqr,C$99i.subSelf=C$99l.prototype.subtract,C$99i.mulSelf=C$99l.prototype.multiplyScalar,C$99i.divSelf=C$99l.prototype.divide,C$99i.scaleSelf=C$99l.prototype.multiply,C$99i.negSelf=C$99l.prototype.negate,C$99i.x=void 0,C$99i.y=void 0,C$99i.z=0,C$99t&&"object"==typeof C$99t?(C$99i.y=C$99t.y||0,C$99i.x=C$99t.x||0):(C$99i.x=C$99t||0,C$99i.y=C$99e||0),C$99i}(C$99e.default=C$99c).sub=C$99c.subtract,C$99c.mul=C$99c.multiply,C$99c.scale=C$99c.multiplyScalar,C$99c.mag=C$99c.len,C$99c.squaredMagnitude=C$99c.lengthSqr,C$99c.div=C$99c.divide,C$99c.ONE_R=C$99c.ONE,C$99c.ZERO_R=C$99c.ZERO,C$99c.UP_R=C$99c.UP,C$99c.RIGHT_R=C$99c.RIGHT;var C$99g=new C$99c,C$99v=new C$99c;C$99u.default.fastDefine("cc.Vec2",C$99c,{x:0,y:0}),cc.v2=function(C$99t,C$99e){return new C$99c(C$99t,C$99e)},cc.Vec2=C$99c,C$99h.exports=C$99e.default},{"../platform/CCClass":189,"../utils/misc":264,"./utils":286,"./value-type":287}],289:[function(C$99t,C$99h,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99i=C$99d(C$99t("./value-type")),C$99u=C$99d(C$99t("../platform/CCClass")),C$99_=C$99d(C$99t("../utils/misc")),C$99r=C$99d(C$99t("./vec2")),C$99a=C$99t("./utils");function C$99d(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99f(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99p(C$99i){return function(){var C$99t,C$99e=C$99m(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99m(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99m(C$99t){return(C$99m=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99y,C$99g,C$99v,C$99o=0,C$99c=0,C$99l=0,C$99n=(C$99y=C$99i.default,C$99t=C$99y,(C$99i=C$99s).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99p(C$99s),(C$99i=C$99s.prototype).sub=function(C$99t,C$99e){return C$99s.subtract(C$99e||new C$99s,this,C$99t)},C$99i.mul=function(C$99t,C$99e){return C$99s.multiplyScalar(C$99e||new C$99s,this,C$99t)},C$99i.div=function(C$99t,C$99e){return C$99s.multiplyScalar(C$99e||new C$99s,this,1/C$99t)},C$99i.scale=function(C$99t,C$99e){return C$99s.multiply(C$99e||new C$99s,this,C$99t)},C$99i.neg=function(C$99t){return C$99s.negate(C$99t||new C$99s,this)},C$99s.zero=function(C$99t){return C$99t.x=0,C$99t.y=0,C$99t.z=0,C$99t},C$99s.clone=function(C$99t){return new C$99s(C$99t.x,C$99t.y,C$99t.z)},C$99s.copy=function(C$99t,C$99e){return C$99t.x=C$99e.x,C$99t.y=C$99e.y,C$99t.z=C$99e.z,C$99t},C$99s.set=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e,C$99t.y=C$99i,C$99t.z=C$99n,C$99t},C$99s.add=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x+C$99i.x,C$99t.y=C$99e.y+C$99i.y,C$99t.z=C$99e.z+C$99i.z,C$99t},C$99s.subtract=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x-C$99i.x,C$99t.y=C$99e.y-C$99i.y,C$99t.z=C$99e.z-C$99i.z,C$99t},C$99s.multiply=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x*C$99i.x,C$99t.y=C$99e.y*C$99i.y,C$99t.z=C$99e.z*C$99i.z,C$99t},C$99s.divide=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x/C$99i.x,C$99t.y=C$99e.y/C$99i.y,C$99t.z=C$99e.z/C$99i.z,C$99t},C$99s.ceil=function(C$99t,C$99e){return C$99t.x=Math.ceil(C$99e.x),C$99t.y=Math.ceil(C$99e.y),C$99t.z=Math.ceil(C$99e.z),C$99t},C$99s.floor=function(C$99t,C$99e){return C$99t.x=Math.floor(C$99e.x),C$99t.y=Math.floor(C$99e.y),C$99t.z=Math.floor(C$99e.z),C$99t},C$99s.min=function(C$99t,C$99e,C$99i){return C$99t.x=Math.min(C$99e.x,C$99i.x),C$99t.y=Math.min(C$99e.y,C$99i.y),C$99t.z=Math.min(C$99e.z,C$99i.z),C$99t},C$99s.max=function(C$99t,C$99e,C$99i){return C$99t.x=Math.max(C$99e.x,C$99i.x),C$99t.y=Math.max(C$99e.y,C$99i.y),C$99t.z=Math.max(C$99e.z,C$99i.z),C$99t},C$99s.round=function(C$99t,C$99e){return C$99t.x=Math.round(C$99e.x),C$99t.y=Math.round(C$99e.y),C$99t.z=Math.round(C$99e.z),C$99t},C$99s.multiplyScalar=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x*C$99i,C$99t.y=C$99e.y*C$99i,C$99t.z=C$99e.z*C$99i,C$99t},C$99s.scaleAndAdd=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e.x+C$99i.x*C$99n,C$99t.y=C$99e.y+C$99i.y*C$99n,C$99t.z=C$99e.z+C$99i.z*C$99n,C$99t},C$99s.distance=function(C$99t,C$99e){return C$99o=C$99e.x-C$99t.x,C$99c=C$99e.y-C$99t.y,C$99l=C$99e.z-C$99t.z,Math.sqrt(C$99o*C$99o+C$99c*C$99c+C$99l*C$99l)},C$99s.squaredDistance=function(C$99t,C$99e){return C$99o=C$99e.x-C$99t.x,C$99c=C$99e.y-C$99t.y,C$99l=C$99e.z-C$99t.z,C$99o*C$99o+C$99c*C$99c+C$99l*C$99l},C$99s.len=function(C$99t){return C$99o=C$99t.x,C$99c=C$99t.y,C$99l=C$99t.z,Math.sqrt(C$99o*C$99o+C$99c*C$99c+C$99l*C$99l)},C$99s.lengthSqr=function(C$99t){return C$99o=C$99t.x,C$99c=C$99t.y,C$99l=C$99t.z,C$99o*C$99o+C$99c*C$99c+C$99l*C$99l},C$99s.negate=function(C$99t,C$99e){return C$99t.x=-C$99e.x,C$99t.y=-C$99e.y,C$99t.z=-C$99e.z,C$99t},C$99s.inverse=function(C$99t,C$99e){return C$99t.x=1/C$99e.x,C$99t.y=1/C$99e.y,C$99t.z=1/C$99e.z,C$99t},C$99s.inverseSafe=function(C$99t,C$99e){return C$99o=C$99e.x,C$99c=C$99e.y,C$99l=C$99e.z,Math.abs(C$99o)<C$99a.EPSILON?C$99t.x=0:C$99t.x=1/C$99o,Math.abs(C$99c)<C$99a.EPSILON?C$99t.y=0:C$99t.y=1/C$99c,Math.abs(C$99l)<C$99a.EPSILON?C$99t.z=0:C$99t.z=1/C$99l,C$99t},C$99s.normalize=function(C$99t,C$99e){C$99o=C$99e.x,C$99c=C$99e.y,C$99l=C$99e.z;C$99e=C$99o*C$99o+C$99c*C$99c+C$99l*C$99l;return 0<C$99e&&(C$99e=1/Math.sqrt(C$99e),C$99t.x=C$99o*C$99e,C$99t.y=C$99c*C$99e,C$99t.z=C$99l*C$99e),C$99t},C$99s.dot=function(C$99t,C$99e){return C$99t.x*C$99e.x+C$99t.y*C$99e.y+C$99t.z*C$99e.z},C$99s.cross=function(C$99t,C$99e,C$99i){var C$99n=C$99e.x,C$99r=C$99e.y,C$99e=C$99e.z,C$99s=C$99i.x,C$99o=C$99i.y,C$99i=C$99i.z;return C$99t.x=C$99r*C$99i-C$99e*C$99o,C$99t.y=C$99e*C$99s-C$99n*C$99i,C$99t.z=C$99n*C$99o-C$99r*C$99s,C$99t},C$99s.lerp=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e.x+C$99n*(C$99i.x-C$99e.x),C$99t.y=C$99e.y+C$99n*(C$99i.y-C$99e.y),C$99t.z=C$99e.z+C$99n*(C$99i.z-C$99e.z),C$99t},C$99s.random=function(C$99t,C$99e){C$99e=C$99e||1;var C$99i=2*(0,C$99a.random)()*Math.PI,C$99n=2*(0,C$99a.random)()-1,C$99r=Math.sqrt(1-C$99n*C$99n);return C$99t.x=C$99r*Math.cos(C$99i)*C$99e,C$99t.y=C$99r*Math.sin(C$99i)*C$99e,C$99t.z=C$99n*C$99e,C$99t},C$99s.transformMat4=function(C$99t,C$99e,C$99i){C$99o=C$99e.x,C$99c=C$99e.y,C$99l=C$99e.z;C$99e=C$99i.m,C$99i=(C$99i=C$99e[3]*C$99o+C$99e[7]*C$99c+C$99e[11]*C$99l+C$99e[15])?1/C$99i:1;return C$99t.x=(C$99e[0]*C$99o+C$99e[4]*C$99c+C$99e[8]*C$99l+C$99e[12])*C$99i,C$99t.y=(C$99e[1]*C$99o+C$99e[5]*C$99c+C$99e[9]*C$99l+C$99e[13])*C$99i,C$99t.z=(C$99e[2]*C$99o+C$99e[6]*C$99c+C$99e[10]*C$99l+C$99e[14])*C$99i,C$99t},C$99s.transformMat4Normal=function(C$99t,C$99e,C$99i){C$99o=C$99e.x,C$99c=C$99e.y,C$99l=C$99e.z;C$99e=C$99i.m,C$99i=(C$99i=C$99e[3]*C$99o+C$99e[7]*C$99c+C$99e[11]*C$99l)?1/C$99i:1;return C$99t.x=(C$99e[0]*C$99o+C$99e[4]*C$99c+C$99e[8]*C$99l)*C$99i,C$99t.y=(C$99e[1]*C$99o+C$99e[5]*C$99c+C$99e[9]*C$99l)*C$99i,C$99t.z=(C$99e[2]*C$99o+C$99e[6]*C$99c+C$99e[10]*C$99l)*C$99i,C$99t},C$99s.transformMat3=function(C$99t,C$99e,C$99i){C$99o=C$99e.x,C$99c=C$99e.y,C$99l=C$99e.z;C$99e=C$99i.m;return C$99t.x=C$99o*C$99e[0]+C$99c*C$99e[3]+C$99l*C$99e[6],C$99t.y=C$99o*C$99e[1]+C$99c*C$99e[4]+C$99l*C$99e[7],C$99t.z=C$99o*C$99e[2]+C$99c*C$99e[5]+C$99l*C$99e[8],C$99t},C$99s.transformAffine=function(C$99t,C$99e,C$99i){C$99o=C$99e.x,C$99c=C$99e.y,C$99l=C$99e.z;C$99e=C$99i.m;return C$99t.x=C$99e[0]*C$99o+C$99e[1]*C$99c+C$99e[2]*C$99l+C$99e[3],C$99t.y=C$99e[4]*C$99o+C$99e[5]*C$99c+C$99e[6]*C$99l+C$99e[7],C$99t.x=C$99e[8]*C$99o+C$99e[9]*C$99c+C$99e[10]*C$99l+C$99e[11],C$99t},C$99s.transformQuat=function(C$99t,C$99e,C$99i){var C$99n=C$99i.w*C$99e.x+C$99i.y*C$99e.z-C$99i.z*C$99e.y,C$99r=C$99i.w*C$99e.y+C$99i.z*C$99e.x-C$99i.x*C$99e.z,C$99s=C$99i.w*C$99e.z+C$99i.x*C$99e.y-C$99i.y*C$99e.x,C$99e=-C$99i.x*C$99e.x-C$99i.y*C$99e.y-C$99i.z*C$99e.z;return C$99t.x=C$99n*C$99i.w+C$99e*-C$99i.x+C$99r*-C$99i.z-C$99s*-C$99i.y,C$99t.y=C$99r*C$99i.w+C$99e*-C$99i.y+C$99s*-C$99i.x-C$99n*-C$99i.z,C$99t.z=C$99s*C$99i.w+C$99e*-C$99i.z+C$99n*-C$99i.y-C$99r*-C$99i.x,C$99t},C$99s.transformRTS=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99e.x*C$99r.x,C$99o=C$99e.y*C$99r.y,C$99e=C$99e.z*C$99r.z,C$99r=C$99i.w*C$99s+C$99i.y*C$99e-C$99i.z*C$99o,C$99a=C$99i.w*C$99o+C$99i.z*C$99s-C$99i.x*C$99e,C$99c=C$99i.w*C$99e+C$99i.x*C$99o-C$99i.y*C$99s,C$99s=-C$99i.x*C$99s-C$99i.y*C$99o-C$99i.z*C$99e;return C$99t.x=C$99r*C$99i.w+C$99s*-C$99i.x+C$99a*-C$99i.z-C$99c*-C$99i.y+C$99n.x,C$99t.y=C$99a*C$99i.w+C$99s*-C$99i.y+C$99c*-C$99i.x-C$99r*-C$99i.z+C$99n.y,C$99t.z=C$99c*C$99i.w+C$99s*-C$99i.z+C$99r*-C$99i.y-C$99a*-C$99i.x+C$99n.z,C$99t},C$99s.transformInverseRTS=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99e.x-C$99n.x,C$99o=C$99e.y-C$99n.y,C$99e=C$99e.z-C$99n.z,C$99n=C$99i.w*C$99s-C$99i.y*C$99e+C$99i.z*C$99o,C$99a=C$99i.w*C$99o-C$99i.z*C$99s+C$99i.x*C$99e,C$99c=C$99i.w*C$99e-C$99i.x*C$99o+C$99i.y*C$99s,C$99s=C$99i.x*C$99s+C$99i.y*C$99o+C$99i.z*C$99e;return C$99t.x=(C$99n*C$99i.w+C$99s*C$99i.x+C$99a*C$99i.z-C$99c*C$99i.y)/C$99r.x,C$99t.y=(C$99a*C$99i.w+C$99s*C$99i.y+C$99c*C$99i.x-C$99n*C$99i.z)/C$99r.y,C$99t.z=(C$99c*C$99i.w+C$99s*C$99i.z+C$99n*C$99i.y-C$99a*C$99i.x)/C$99r.z,C$99t},C$99s.rotateX=function(C$99t,C$99e,C$99i,C$99n){C$99o=C$99e.x-C$99i.x,C$99c=C$99e.y-C$99i.y,C$99l=C$99e.z-C$99i.z;var C$99e=Math.cos(C$99n),C$99n=Math.sin(C$99n),C$99r=C$99o,C$99s=C$99c*C$99e-C$99l*C$99n,C$99n=C$99c*C$99n+C$99l*C$99e;return C$99t.x=C$99r+C$99i.x,C$99t.y=C$99s+C$99i.y,C$99t.z=C$99n+C$99i.z,C$99t},C$99s.rotateY=function(C$99t,C$99e,C$99i,C$99n){C$99o=C$99e.x-C$99i.x,C$99c=C$99e.y-C$99i.y,C$99l=C$99e.z-C$99i.z;var C$99e=Math.cos(C$99n),C$99n=Math.sin(C$99n),C$99r=C$99l*C$99n+C$99o*C$99e,C$99s=C$99c,C$99e=C$99l*C$99e-C$99o*C$99n;return C$99t.x=C$99r+C$99i.x,C$99t.y=C$99s+C$99i.y,C$99t.z=C$99e+C$99i.z,C$99t},C$99s.rotateZ=function(C$99t,C$99e,C$99i,C$99n){C$99o=C$99e.x-C$99i.x,C$99c=C$99e.y-C$99i.y,C$99l=C$99e.z-C$99i.z;var C$99e=Math.cos(C$99n),C$99n=Math.sin(C$99n),C$99r=C$99o*C$99e-C$99c*C$99n,C$99n=C$99o*C$99n+C$99c*C$99e,C$99e=C$99l;return C$99t.x=C$99r+C$99i.x,C$99t.y=C$99n+C$99i.y,C$99t.z=C$99e+C$99i.z,C$99t},C$99s.strictEquals=function(C$99t,C$99e){return C$99t.x===C$99e.x&&C$99t.y===C$99e.y&&C$99t.z===C$99e.z},C$99s.equals=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=C$99a.EPSILON);var C$99n=C$99t.x,C$99r=C$99t.y,C$99t=C$99t.z,C$99s=C$99e.x,C$99o=C$99e.y,C$99e=C$99e.z;return Math.abs(C$99n-C$99s)<=C$99i*Math.max(1,Math.abs(C$99n),Math.abs(C$99s))&&Math.abs(C$99r-C$99o)<=C$99i*Math.max(1,Math.abs(C$99r),Math.abs(C$99o))&&Math.abs(C$99t-C$99e)<=C$99i*Math.max(1,Math.abs(C$99t),Math.abs(C$99e))},C$99s.angle=function(C$99t,C$99e){C$99s.normalize(C$99x,C$99t),C$99s.normalize(C$99b,C$99e);C$99t=C$99s.dot(C$99x,C$99b);return 1<C$99t?0:C$99t<-1?Math.PI:Math.acos(C$99t)},C$99s.projectOnPlane=function(C$99t,C$99e,C$99i){return C$99s.subtract(C$99t,C$99e,C$99s.project(C$99t,C$99e,C$99i))},C$99s.project=function(C$99t,C$99e,C$99i){var C$99n=C$99s.lengthSqr(C$99i);return C$99n<1e-6?C$99s.set(C$99t,0,0,0):C$99s.multiplyScalar(C$99t,C$99i,C$99s.dot(C$99e,C$99i)/C$99n)},C$99s.toArray=function(C$99t,C$99e,C$99i){return C$99t[(C$99i=void 0===C$99i?0:C$99i)+0]=C$99e.x,C$99t[C$99i+1]=C$99e.y,C$99t[C$99i+2]=C$99e.z,C$99t},C$99s.fromArray=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e[(C$99i=void 0===C$99i?0:C$99i)+0],C$99t.y=C$99e[C$99i+1],C$99t.z=C$99e[C$99i+2],C$99t},C$99t=C$99s,C$99v=[{key:"ONE",get:function(){return new C$99s(1,1,1)}},{key:"ZERO",get:function(){return new C$99s}},{key:"UP",get:function(){return new C$99s(0,1,0)}},{key:"RIGHT",get:function(){return new C$99s(1,0,0)}},{key:"FORWARD",get:function(){return new C$99s(0,0,1)}}],(C$99g=null)&&C$99f(C$99t.prototype,C$99g),C$99v&&C$99f(C$99t,C$99v),C$99i.clone=function(){return new C$99s(this.x,this.y,this.z)},C$99i.set=function(C$99t){return this.x=C$99t.x,this.y=C$99t.y,this.z=C$99t.z,this},C$99i.equals=function(C$99t){return C$99t&&this.x===C$99t.x&&this.y===C$99t.y&&this.z===C$99t.z},C$99i.fuzzyEquals=function(C$99t,C$99e){return this.x-C$99e<=C$99t.x&&C$99t.x<=this.x+C$99e&&this.y-C$99e<=C$99t.y&&C$99t.y<=this.y+C$99e&&this.z-C$99e<=C$99t.z&&C$99t.z<=this.z+C$99e},C$99i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},C$99i.lerp=function(C$99t,C$99e,C$99i){return C$99i=C$99i||new C$99s,C$99s.lerp(C$99i,this,C$99t,C$99e),C$99i},C$99i.clampf=function(C$99t,C$99e){return this.x=C$99_.default.clampf(this.x,C$99t.x,C$99e.x),this.y=C$99_.default.clampf(this.y,C$99t.y,C$99e.y),this.z=C$99_.default.clampf(this.z,C$99t.z,C$99e.z),this},C$99i.addSelf=function(C$99t){return this.x+=C$99t.x,this.y+=C$99t.y,this.z+=C$99t.z,this},C$99i.add=function(C$99t,C$99e){return(C$99e=C$99e||new C$99s).x=this.x+C$99t.x,C$99e.y=this.y+C$99t.y,C$99e.z=this.z+C$99t.z,C$99e},C$99i.subtract=function(C$99t){return this.x-=C$99t.x,this.y-=C$99t.y,this.z-=C$99t.z,this},C$99i.multiplyScalar=function(C$99t){return this.x*=C$99t,this.y*=C$99t,this.z*=C$99t,this},C$99i.multiply=function(C$99t){return this.x*=C$99t.x,this.y*=C$99t.y,this.z*=C$99t.z,this},C$99i.divide=function(C$99t){return this.x/=C$99t,this.y/=C$99t,this.z/=C$99t,this},C$99i.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},C$99i.dot=function(C$99t){return this.x*C$99t.x+this.y*C$99t.y+this.z*C$99t.z},C$99i.cross=function(C$99t,C$99e){return C$99e=C$99e||new C$99s,C$99s.cross(C$99e,this,C$99t),C$99e},C$99i.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},C$99i.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z},C$99i.normalizeSelf=function(){return C$99s.normalize(this,this),this},C$99i.normalize=function(C$99t){return C$99t=C$99t||new C$99s,C$99s.normalize(C$99t,this),C$99t},C$99i.transformMat4=function(C$99t,C$99e){return C$99e=C$99e||new C$99s,C$99s.transformMat4(C$99e,this,C$99t),C$99e},C$99i.maxAxis=function(){return Math.max(this.x,this.y,this.z)},C$99i.signAngle=function(C$99t){cc.warnID(1408,"vec3.signAngle","v2.1","cc.v2(selfVector).signAngle(vector)");var C$99e=new C$99r.default(this.x,this.y),C$99t=new C$99r.default(C$99t.x,C$99t.y);return C$99e.signAngle(C$99t)},C$99i.rotate=function(C$99t,C$99e){return cc.warnID(1408,"vec3.rotate","v2.1","cc.v2(selfVector).rotate(radians, out)"),C$99r.default.prototype.rotate.call(this,C$99t,C$99e)},C$99i.rotateSelf=function(C$99t){return cc.warnID(1408,"vec3.rotateSelf","v2.1","cc.v2(selfVector).rotateSelf(radians)"),C$99r.default.prototype.rotateSelf.call(this,C$99t)},C$99s);function C$99s(C$99t,C$99e,C$99i){var C$99n;return void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),(C$99n=C$99y.call(this)||this).mag=C$99s.prototype.len,C$99n.magSqr=C$99s.prototype.lengthSqr,C$99n.subSelf=C$99s.prototype.subtract,C$99n.mulSelf=C$99s.prototype.multiplyScalar,C$99n.divSelf=C$99s.prototype.divide,C$99n.scaleSelf=C$99s.prototype.multiply,C$99n.negSelf=C$99s.prototype.negate,C$99n.x=void 0,C$99n.y=void 0,C$99n.z=void 0,C$99n.angle=C$99r.default.prototype.angle,C$99n.project=C$99r.default.prototype.project,C$99t&&"object"==typeof C$99t?(C$99n.z=C$99t.z,C$99n.y=C$99t.y,C$99n.x=C$99t.x):(C$99n.x=C$99t,C$99n.y=C$99e,C$99n.z=C$99i),C$99n}(C$99e.default=C$99n).sub=C$99n.subtract,C$99n.mul=C$99n.multiply,C$99n.scale=C$99n.multiplyScalar,C$99n.mag=C$99n.len,C$99n.squaredMagnitude=C$99n.lengthSqr,C$99n.div=C$99n.divide,C$99n.ONE_R=C$99n.ONE,C$99n.ZERO_R=C$99n.ZERO,C$99n.UP_R=C$99n.UP,C$99n.RIGHT_R=C$99n.RIGHT,C$99n.FRONT_R=C$99n.FORWARD;var C$99x=new C$99n,C$99b=new C$99n;C$99u.default.fastDefine("cc.Vec3",C$99n,{x:0,y:0,z:0}),cc.v3=function(C$99t,C$99e,C$99i){return new C$99n(C$99t,C$99e,C$99i)},cc.Vec3=C$99n,C$99h.exports=C$99e.default},{"../platform/CCClass":189,"../utils/misc":264,"./utils":286,"./value-type":287,"./vec2":288}],290:[function(C$99t,C$99n,C$99e){"use strict";C$99e.__esModule=!0,C$99e.v4=C$99v,C$99e.default=void 0;var C$99o=C$99_(C$99t("../platform/CCClass")),C$99i=C$99_(C$99t("./value-type")),C$99s=C$99t("./utils");function C$99_(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99d(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}function C$99f(C$99i){return function(){var C$99t,C$99e=C$99p(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99p(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99p(C$99t){return(C$99p=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99m,C$99y,C$99g,C$99c=0,C$99l=0,C$99h=0,C$99u=0,C$99r=(C$99m=C$99i.default,C$99t=C$99m,(C$99i=C$99a).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99f(C$99a),(C$99i=C$99a.prototype).sub=function(C$99t,C$99e){return C$99a.subtract(C$99e||new C$99a,this,C$99t)},C$99i.mul=function(C$99t,C$99e){return C$99a.multiplyScalar(C$99e||new C$99a,this,C$99t)},C$99i.div=function(C$99t,C$99e){return C$99a.multiplyScalar(C$99e||new C$99a,this,1/C$99t)},C$99i.scale=function(C$99t,C$99e){return C$99a.multiply(C$99e||new C$99a,this,C$99t)},C$99i.neg=function(C$99t){return C$99a.negate(C$99t||new C$99a,this)},C$99a.clone=function(C$99t){return new C$99a(C$99t.x,C$99t.y,C$99t.z,C$99t.w)},C$99a.copy=function(C$99t,C$99e){return C$99t.x=C$99e.x,C$99t.y=C$99e.y,C$99t.z=C$99e.z,C$99t.w=C$99e.w,C$99t},C$99a.set=function(C$99t,C$99e,C$99i,C$99n,C$99r){return C$99t.x=C$99e,C$99t.y=C$99i,C$99t.z=C$99n,C$99t.w=C$99r,C$99t},C$99a.add=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x+C$99i.x,C$99t.y=C$99e.y+C$99i.y,C$99t.z=C$99e.z+C$99i.z,C$99t.w=C$99e.w+C$99i.w,C$99t},C$99a.subtract=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x-C$99i.x,C$99t.y=C$99e.y-C$99i.y,C$99t.z=C$99e.z-C$99i.z,C$99t.w=C$99e.w-C$99i.w,C$99t},C$99a.multiply=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x*C$99i.x,C$99t.y=C$99e.y*C$99i.y,C$99t.z=C$99e.z*C$99i.z,C$99t.w=C$99e.w*C$99i.w,C$99t},C$99a.divide=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x/C$99i.x,C$99t.y=C$99e.y/C$99i.y,C$99t.z=C$99e.z/C$99i.z,C$99t.w=C$99e.w/C$99i.w,C$99t},C$99a.ceil=function(C$99t,C$99e){return C$99t.x=Math.ceil(C$99e.x),C$99t.y=Math.ceil(C$99e.y),C$99t.z=Math.ceil(C$99e.z),C$99t.w=Math.ceil(C$99e.w),C$99t},C$99a.floor=function(C$99t,C$99e){return C$99t.x=Math.floor(C$99e.x),C$99t.y=Math.floor(C$99e.y),C$99t.z=Math.floor(C$99e.z),C$99t.w=Math.floor(C$99e.w),C$99t},C$99a.min=function(C$99t,C$99e,C$99i){return C$99t.x=Math.min(C$99e.x,C$99i.x),C$99t.y=Math.min(C$99e.y,C$99i.y),C$99t.z=Math.min(C$99e.z,C$99i.z),C$99t.w=Math.min(C$99e.w,C$99i.w),C$99t},C$99a.max=function(C$99t,C$99e,C$99i){return C$99t.x=Math.max(C$99e.x,C$99i.x),C$99t.y=Math.max(C$99e.y,C$99i.y),C$99t.z=Math.max(C$99e.z,C$99i.z),C$99t.w=Math.max(C$99e.w,C$99i.w),C$99t},C$99a.round=function(C$99t,C$99e){return C$99t.x=Math.round(C$99e.x),C$99t.y=Math.round(C$99e.y),C$99t.z=Math.round(C$99e.z),C$99t.w=Math.round(C$99e.w),C$99t},C$99a.multiplyScalar=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e.x*C$99i,C$99t.y=C$99e.y*C$99i,C$99t.z=C$99e.z*C$99i,C$99t.w=C$99e.w*C$99i,C$99t},C$99a.scaleAndAdd=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e.x+C$99i.x*C$99n,C$99t.y=C$99e.y+C$99i.y*C$99n,C$99t.z=C$99e.z+C$99i.z*C$99n,C$99t.w=C$99e.w+C$99i.w*C$99n,C$99t},C$99a.distance=function(C$99t,C$99e){var C$99i=C$99e.x-C$99t.x,C$99n=C$99e.y-C$99t.y,C$99r=C$99e.z-C$99t.z,C$99e=C$99e.w-C$99t.w;return Math.sqrt(C$99i*C$99i+C$99n*C$99n+C$99r*C$99r+C$99e*C$99e)},C$99a.squaredDistance=function(C$99t,C$99e){var C$99i=C$99e.x-C$99t.x,C$99n=C$99e.y-C$99t.y,C$99r=C$99e.z-C$99t.z,C$99e=C$99e.w-C$99t.w;return C$99i*C$99i+C$99n*C$99n+C$99r*C$99r+C$99e*C$99e},C$99a.len=function(C$99t){return C$99c=C$99t.x,C$99l=C$99t.y,C$99h=C$99t.z,C$99u=C$99t.w,Math.sqrt(C$99c*C$99c+C$99l*C$99l+C$99h*C$99h+C$99u*C$99u)},C$99a.lengthSqr=function(C$99t){return C$99c=C$99t.x,C$99l=C$99t.y,C$99h=C$99t.z,C$99u=C$99t.w,C$99c*C$99c+C$99l*C$99l+C$99h*C$99h+C$99u*C$99u},C$99a.negate=function(C$99t,C$99e){return C$99t.x=-C$99e.x,C$99t.y=-C$99e.y,C$99t.z=-C$99e.z,C$99t.w=-C$99e.w,C$99t},C$99a.inverse=function(C$99t,C$99e){return C$99t.x=1/C$99e.x,C$99t.y=1/C$99e.y,C$99t.z=1/C$99e.z,C$99t.w=1/C$99e.w,C$99t},C$99a.inverseSafe=function(C$99t,C$99e){return C$99c=C$99e.x,C$99l=C$99e.y,C$99h=C$99e.z,C$99u=C$99e.w,Math.abs(C$99c)<C$99s.EPSILON?C$99t.x=0:C$99t.x=1/C$99c,Math.abs(C$99l)<C$99s.EPSILON?C$99t.y=0:C$99t.y=1/C$99l,Math.abs(C$99h)<C$99s.EPSILON?C$99t.z=0:C$99t.z=1/C$99h,Math.abs(C$99u)<C$99s.EPSILON?C$99t.w=0:C$99t.w=1/C$99u,C$99t},C$99a.normalize=function(C$99t,C$99e){C$99c=C$99e.x,C$99l=C$99e.y,C$99h=C$99e.z,C$99u=C$99e.w;C$99e=C$99c*C$99c+C$99l*C$99l+C$99h*C$99h+C$99u*C$99u;return 0<C$99e&&(C$99e=1/Math.sqrt(C$99e),C$99t.x=C$99c*C$99e,C$99t.y=C$99l*C$99e,C$99t.z=C$99h*C$99e,C$99t.w=C$99u*C$99e),C$99t},C$99a.dot=function(C$99t,C$99e){return C$99t.x*C$99e.x+C$99t.y*C$99e.y+C$99t.z*C$99e.z+C$99t.w*C$99e.w},C$99a.lerp=function(C$99t,C$99e,C$99i,C$99n){return C$99t.x=C$99e.x+C$99n*(C$99i.x-C$99e.x),C$99t.y=C$99e.y+C$99n*(C$99i.y-C$99e.y),C$99t.z=C$99e.z+C$99n*(C$99i.z-C$99e.z),C$99t.w=C$99e.w+C$99n*(C$99i.w-C$99e.w),C$99t},C$99a.random=function(C$99t,C$99e){C$99e=C$99e||1;var C$99i=2*(0,C$99s.random)()*Math.PI,C$99n=2*(0,C$99s.random)()-1,C$99r=Math.sqrt(1-C$99n*C$99n);return C$99t.x=C$99r*Math.cos(C$99i)*C$99e,C$99t.y=C$99r*Math.sin(C$99i)*C$99e,C$99t.z=C$99n*C$99e,C$99t.w=0,C$99t},C$99a.transformMat4=function(C$99t,C$99e,C$99i){C$99c=C$99e.x,C$99l=C$99e.y,C$99h=C$99e.z,C$99u=C$99e.w;C$99e=C$99i.m;return C$99t.x=C$99e[0]*C$99c+C$99e[4]*C$99l+C$99e[8]*C$99h+C$99e[12]*C$99u,C$99t.y=C$99e[1]*C$99c+C$99e[5]*C$99l+C$99e[9]*C$99h+C$99e[13]*C$99u,C$99t.z=C$99e[2]*C$99c+C$99e[6]*C$99l+C$99e[10]*C$99h+C$99e[14]*C$99u,C$99t.w=C$99e[3]*C$99c+C$99e[7]*C$99l+C$99e[11]*C$99h+C$99e[15]*C$99u,C$99t},C$99a.transformAffine=function(C$99t,C$99e,C$99i){C$99c=C$99e.x,C$99l=C$99e.y,C$99h=C$99e.z,C$99u=C$99e.w;C$99i=C$99i.m;return C$99t.x=C$99i[0]*C$99c+C$99i[1]*C$99l+C$99i[2]*C$99h+C$99i[3]*C$99u,C$99t.y=C$99i[4]*C$99c+C$99i[5]*C$99l+C$99i[6]*C$99h+C$99i[7]*C$99u,C$99t.x=C$99i[8]*C$99c+C$99i[9]*C$99l+C$99i[10]*C$99h+C$99i[11]*C$99u,C$99t.w=C$99e.w,C$99t},C$99a.transformQuat=function(C$99t,C$99e,C$99i){var C$99n=C$99e.x,C$99r=C$99e.y,C$99s=C$99e.z,C$99i=(C$99c=C$99i.x,C$99l=C$99i.y,C$99h=C$99i.z,(C$99u=C$99i.w)*C$99n+C$99l*C$99s-C$99h*C$99r),C$99o=C$99u*C$99r+C$99h*C$99n-C$99c*C$99s,C$99a=C$99u*C$99s+C$99c*C$99r-C$99l*C$99n,C$99n=-C$99c*C$99n-C$99l*C$99r-C$99h*C$99s;return C$99t.x=C$99i*C$99u+C$99n*-C$99c+C$99o*-C$99h-C$99a*-C$99l,C$99t.y=C$99o*C$99u+C$99n*-C$99l+C$99a*-C$99c-C$99i*-C$99h,C$99t.z=C$99a*C$99u+C$99n*-C$99h+C$99i*-C$99l-C$99o*-C$99c,C$99t.w=C$99e.w,C$99t},C$99a.strictEquals=function(C$99t,C$99e){return C$99t.x===C$99e.x&&C$99t.y===C$99e.y&&C$99t.z===C$99e.z&&C$99t.w===C$99e.w},C$99a.equals=function(C$99t,C$99e,C$99i){return void 0===C$99i&&(C$99i=C$99s.EPSILON),Math.abs(C$99t.x-C$99e.x)<=C$99i*Math.max(1,Math.abs(C$99t.x),Math.abs(C$99e.x))&&Math.abs(C$99t.y-C$99e.y)<=C$99i*Math.max(1,Math.abs(C$99t.y),Math.abs(C$99e.y))&&Math.abs(C$99t.z-C$99e.z)<=C$99i*Math.max(1,Math.abs(C$99t.z),Math.abs(C$99e.z))&&Math.abs(C$99t.w-C$99e.w)<=C$99i*Math.max(1,Math.abs(C$99t.w),Math.abs(C$99e.w))},C$99a.toArray=function(C$99t,C$99e,C$99i){return C$99t[(C$99i=void 0===C$99i?0:C$99i)+0]=C$99e.x,C$99t[C$99i+1]=C$99e.y,C$99t[C$99i+2]=C$99e.z,C$99t[C$99i+3]=C$99e.w,C$99t},C$99a.fromArray=function(C$99t,C$99e,C$99i){return C$99t.x=C$99e[(C$99i=void 0===C$99i?0:C$99i)+0],C$99t.y=C$99e[C$99i+1],C$99t.z=C$99e[C$99i+2],C$99t.w=C$99e[C$99i+3],C$99t},C$99t=C$99a,C$99g=[{key:"ZERO",get:function(){return new C$99a(0,0,0,0)}},{key:"ONE",get:function(){return new C$99a(1,1,1,1)}},{key:"NEG_ONE",get:function(){return new C$99a(-1,-1,-1,-1)}}],(C$99y=null)&&C$99d(C$99t.prototype,C$99y),C$99g&&C$99d(C$99t,C$99g),C$99i.clone=function(){return new C$99a(this.x,this.y,this.z,this.w)},C$99i.set=function(C$99t,C$99e,C$99i,C$99n){return C$99t&&"object"==typeof C$99t?(this.x=C$99t.x,this.y=C$99t.y,this.z=C$99t.z,this.w=C$99t.w):(this.x=C$99t||0,this.y=C$99e||0,this.z=C$99i||0,this.w=C$99n||0),this},C$99i.equals=function(C$99t,C$99e){return void 0===C$99e&&(C$99e=C$99s.EPSILON),Math.abs(this.x-C$99t.x)<=C$99e*Math.max(1,Math.abs(this.x),Math.abs(C$99t.x))&&Math.abs(this.y-C$99t.y)<=C$99e*Math.max(1,Math.abs(this.y),Math.abs(C$99t.y))&&Math.abs(this.z-C$99t.z)<=C$99e*Math.max(1,Math.abs(this.z),Math.abs(C$99t.z))&&Math.abs(this.w-C$99t.w)<=C$99e*Math.max(1,Math.abs(this.w),Math.abs(C$99t.w))},C$99i.equals4f=function(C$99t,C$99e,C$99i,C$99n,C$99r){return void 0===C$99r&&(C$99r=C$99s.EPSILON),Math.abs(this.x-C$99t)<=C$99r*Math.max(1,Math.abs(this.x),Math.abs(C$99t))&&Math.abs(this.y-C$99e)<=C$99r*Math.max(1,Math.abs(this.y),Math.abs(C$99e))&&Math.abs(this.z-C$99i)<=C$99r*Math.max(1,Math.abs(this.z),Math.abs(C$99i))&&Math.abs(this.w-C$99n)<=C$99r*Math.max(1,Math.abs(this.w),Math.abs(C$99n))},C$99i.strictEquals=function(C$99t){return this.x===C$99t.x&&this.y===C$99t.y&&this.z===C$99t.z&&this.w===C$99t.w},C$99i.strictEquals4f=function(C$99t,C$99e,C$99i,C$99n){return this.x===C$99t&&this.y===C$99e&&this.z===C$99i&&this.w===C$99n},C$99i.lerp=function(C$99t,C$99e){return C$99c=this.x,C$99l=this.y,C$99h=this.z,C$99u=this.w,this.x=C$99c+C$99e*(C$99t.x-C$99c),this.y=C$99l+C$99e*(C$99t.y-C$99l),this.z=C$99h+C$99e*(C$99t.z-C$99h),this.w=C$99u+C$99e*(C$99t.w-C$99u),this},C$99i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+", "+this.w.toFixed(2)+")"},C$99i.clampf=function(C$99t,C$99e){return this.x=(0,C$99s.clamp)(this.x,C$99t.x,C$99e.x),this.y=(0,C$99s.clamp)(this.y,C$99t.y,C$99e.y),this.z=(0,C$99s.clamp)(this.z,C$99t.z,C$99e.z),this.w=(0,C$99s.clamp)(this.w,C$99t.w,C$99e.w),this},C$99i.addSelf=function(C$99t){return this.x+=C$99t.x,this.y+=C$99t.y,this.z+=C$99t.z,this.w+=C$99t.w,this},C$99i.add=function(C$99t,C$99e){return(C$99e=C$99e||new C$99a).x=this.x+C$99t.x,C$99e.y=this.y+C$99t.y,C$99e.z=this.z+C$99t.z,C$99e.w=this.w+C$99t.w,C$99e},C$99i.subtract=function(C$99t,C$99e){return(C$99e=C$99e||new C$99a).x=this.x-C$99t.x,C$99e.y=this.y-C$99t.y,C$99e.z=this.z-C$99t.z,C$99e.w=this.w-C$99t.w,C$99e},C$99i.multiplyScalar=function(C$99t){return this.x*=C$99t,this.y*=C$99t,this.z*=C$99t,this.w*=C$99t,this},C$99i.multiply=function(C$99t){return this.x*=C$99t.x,this.y*=C$99t.y,this.z*=C$99t.z,this.w*=C$99t.w,this},C$99i.divide=function(C$99t){return this.x/=C$99t,this.y/=C$99t,this.z/=C$99t,this.w/=C$99t,this},C$99i.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},C$99i.dot=function(C$99t){return this.x*C$99t.x+this.y*C$99t.y+this.z*C$99t.z+this.w*C$99t.w},C$99i.cross=function(C$99t,C$99e){C$99e=C$99e||new C$99a;var C$99i=this.x,C$99n=this.y,C$99r=this.z,C$99s=C$99t.x,C$99o=C$99t.y,C$99t=C$99t.z;return C$99e.x=C$99n*C$99t-C$99r*C$99o,C$99e.y=C$99r*C$99s-C$99i*C$99t,C$99e.z=C$99i*C$99o-C$99n*C$99s,C$99e},C$99i.len=function(){var C$99t=this.x,C$99e=this.y,C$99i=this.z,C$99n=this.w;return Math.sqrt(C$99t*C$99t+C$99e*C$99e+C$99i*C$99i+C$99n*C$99n)},C$99i.lengthSqr=function(){var C$99t=this.x,C$99e=this.y,C$99i=this.z,C$99n=this.w;return C$99t*C$99t+C$99e*C$99e+C$99i*C$99i+C$99n*C$99n},C$99i.normalizeSelf=function(){return this.normalize(this),this},C$99i.normalize=function(C$99t){C$99t=C$99t||new C$99a,C$99c=this.x,C$99l=this.y,C$99h=this.z,C$99u=this.w;var C$99e=C$99c*C$99c+C$99l*C$99l+C$99h*C$99h+C$99u*C$99u;return 0<C$99e&&(C$99e=1/Math.sqrt(C$99e),C$99t.x=C$99c*C$99e,C$99t.y=C$99l*C$99e,C$99t.z=C$99h*C$99e,C$99t.w=C$99u*C$99e),C$99t},C$99i.transformMat4=function(C$99t,C$99e){C$99e=C$99e||new C$99a,C$99c=this.x,C$99l=this.y,C$99h=this.z,C$99u=this.w;C$99t=C$99t.m;return C$99e.x=C$99t[0]*C$99c+C$99t[4]*C$99l+C$99t[8]*C$99h+C$99t[12]*C$99u,C$99e.y=C$99t[1]*C$99c+C$99t[5]*C$99l+C$99t[9]*C$99h+C$99t[13]*C$99u,C$99e.z=C$99t[2]*C$99c+C$99t[6]*C$99l+C$99t[10]*C$99h+C$99t[14]*C$99u,C$99e.w=C$99t[3]*C$99c+C$99t[7]*C$99l+C$99t[11]*C$99h+C$99t[15]*C$99u,C$99e},C$99i.maxAxis=function(){return Math.max(this.x,this.y,this.z,this.w)},C$99a);function C$99a(C$99t,C$99e,C$99i,C$99n){var C$99r;return void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),(C$99r=C$99m.call(this)||this).mag=C$99a.prototype.len,C$99r.magSqr=C$99a.prototype.lengthSqr,C$99r.subSelf=C$99a.prototype.subtract,C$99r.mulSelf=C$99a.prototype.multiplyScalar,C$99r.divSelf=C$99a.prototype.divide,C$99r.scaleSelf=C$99a.prototype.multiply,C$99r.negSelf=C$99a.prototype.negate,C$99r.x=void 0,C$99r.y=void 0,C$99r.z=void 0,C$99r.w=void 0,C$99t&&"object"==typeof C$99t?(C$99r.w=C$99t.w,C$99r.z=C$99t.z,C$99r.y=C$99t.y,C$99r.x=C$99t.x):(C$99r.x=C$99t,C$99r.y=C$99e,C$99r.z=C$99i,C$99r.w=C$99n),C$99r}function C$99v(C$99t,C$99e,C$99i,C$99n){return new C$99r(C$99t,C$99e,C$99i,C$99n)}(C$99e.default=C$99r).sub=C$99r.subtract,C$99r.mul=C$99r.multiply,C$99r.div=C$99r.divide,C$99r.scale=C$99r.multiplyScalar,C$99r.mag=C$99r.len,C$99r.squaredMagnitude=C$99r.lengthSqr,C$99r.ZERO_R=C$99r.ZERO,C$99r.ONE_R=C$99r.ONE,C$99r.NEG_ONE_R=C$99r.NEG_ONE,C$99o.default.fastDefine("cc.Vec4",C$99r,{x:0,y:0,z:0,w:0}),cc.v4=C$99v,cc.Vec4=C$99r},{"../platform/CCClass":189,"./utils":286,"./value-type":287}],291:[function(C$99t,C$99e,C$99l){"use strict";function C$99i(C$99i,C$99t,C$99n){C$99i&&(C$99n=C$99n||C$99a.getClassName(C$99i),C$99t.forEach(function(C$99t){function C$99e(){cc.errorID(1406,C$99n,C$99t)}C$99a.getset(C$99i.prototype,C$99t,C$99e,C$99e)}))}function C$99n(C$99e,C$99t,C$99i){C$99e&&C$99t.forEach(function(C$99t){C$99a.getset(C$99e,C$99t,function(){cc.errorID(1406,C$99i,C$99t)})})}function C$99r(C$99n,C$99t,C$99e){if(C$99n){var C$99i,C$99r,C$99s,C$99o="Sorry, "+(C$99e||cc.js.getClassName(C$99n))+".%s is removed, please use %s instead.";for(C$99i in C$99t)!function(){function C$99e(C$99e,C$99t){function C$99i(C$99t){cc.error(C$99o,C$99e,C$99t)}Array.isArray(C$99t)||(C$99t=C$99t.split(",").map(function(C$99t){return C$99t.trim()}));try{C$99a.getset(C$99n,C$99e,C$99i.bind(null,C$99t[0]),C$99t[1]&&C$99i.bind(null,C$99t[1]))}catch(C$99t){}}C$99r=C$99t[C$99i],"*"===C$99i[0]?(C$99e("g"+(C$99s=C$99i.slice(1)),C$99r),C$99e("s"+C$99s,C$99r)):C$99i.split(",").map(function(C$99t){return C$99t.trim()}).forEach(function(C$99t){C$99e(C$99t,C$99r)})}()}}function C$99s(C$99i,C$99n,C$99r){if(C$99i)for(var C$99s in C$99r=C$99r||C$99a.getClassName(C$99i),C$99n)!function(){var C$99t=C$99s,C$99e=C$99i[C$99t];C$99e&&(C$99i[C$99t]=function(){return cc.warn("Sorry, %s.%s is deprecated. Please use %s instead",C$99r,C$99t,C$99n[C$99t]),C$99e.apply(this,arguments)})}()}var C$99a=cc.js,C$99o=(C$99a.get(cc,"info",function(){return cc.errorID(1400,"cc.info","cc.log"),cc.log}),C$99a.get(cc,"spriteFrameCache",function(){cc.errorID(1404)}),C$99a.get(cc,"vmath",function(){return cc.warnID(1400,"cc.vmath","cc.math"),cc.math}),C$99a.get(cc.math,"vec2",function(){return cc.warnID(1400,"cc.vmath.vec2","cc.Vec2"),cc.Vec2}),C$99a.get(cc.math,"vec3",function(){return cc.warnID(1400,"cc.vmath.vec3","cc.Vec3"),cc.Vec3}),C$99a.get(cc.math,"vec4",function(){return cc.warnID(1400,"cc.vmath.vec4","cc.Vec4"),cc.Vec4}),C$99a.get(cc.math,"mat4",function(){return cc.warnID(1400,"cc.vmath.mat4","cc.Mat4"),cc.Mat4}),C$99a.get(cc.math,"mat3",function(){return cc.warnID(1400,"cc.vmath.mat3","cc.Mat3"),cc.Mat3}),C$99a.get(cc.math,"quat",function(){return cc.warnID(1400,"cc.vmath.quat","cc.Quat"),cc.Quat}),C$99a.get(cc.SpriteFrame.prototype,"_textureLoaded",function(){return cc.errorID(1400,"spriteFrame._textureLoaded","spriteFrame.textureLoaded()"),this.textureLoaded()}),C$99i(cc.SpriteFrame,["addLoadedEventListener"]),C$99s(cc.Sprite.prototype,{setState:"cc.Sprite.setMaterial",getState:"cc.Sprite.getMaterial"},"cc.Sprite"),C$99a.get(cc.SpriteFrame.prototype,"clearTexture",function(){return cc.errorID(1406,"cc.SpriteFrame","clearTexture"),function(){}}),C$99a.get(cc,"textureCache",function(){cc.errorID(1406,"cc","textureCache")}),cc.Texture2D),C$99c=(C$99a.get(C$99o.prototype,"releaseTexture",function(){return cc.errorID(1400,"texture.releaseTexture()","texture.destroy()"),this.destroy}),C$99a.get(C$99o.prototype,"getName",function(){return cc.errorID(1400,"texture.getName()","texture._glID"),function(){return this._glID||null}}),C$99a.get(C$99o.prototype,"isLoaded",function(){return cc.errorID(1400,"texture.isLoaded function","texture.loaded property"),function(){return this.loaded}}),C$99a.get(C$99o.prototype,"setAntiAliasTexParameters",function(){return cc.errorID(1400,"texture.setAntiAliasTexParameters()","texture.setFilters(cc.Texture2D.Filter.LINEAR, cc.Texture2D.Filter.LINEAR)"),function(){this.setFilters(C$99o.Filter.LINEAR,C$99o.Filter.LINEAR)}}),C$99a.get(C$99o.prototype,"setAliasTexParameters",function(){return cc.errorID(1400,"texture.setAntiAliasTexParameters()","texture.setFilters(cc.Texture2D.Filter.NEAREST, cc.Texture2D.Filter.NEAREST)"),function(){this.setFilters(C$99o.Filter.NEAREST,C$99o.Filter.NEAREST)}}),C$99n(cc.macro,["ENABLE_GL_STATE_CACHE","FIX_ARTIFACTS_BY_STRECHING_TEXEL"],"cc.macro"),C$99r(cc.macro,{PI:"Math.PI",PI2:"Math.PI * 2",FLT_MAX:"Number.MAX_VALUE",FLT_MIN:"Number.MIN_VALUE",UINT_MAX:"Number.MAX_SAFE_INTEGER"},"cc.macro"),C$99n(cc.game,["CONFIG_KEY"],"cc.game"),C$99n(cc.sys,["dumpRoot","cleanScript"],"cc.sys"),C$99r(cc.Director,{EVENT_PROJECTION_CHANGED:"",EVENT_BEFORE_VISIT:"EVENT_AFTER_UPDATE",EVENT_AFTER_VISIT:"EVENT_BEFORE_DRAW"},"cc.Director"),C$99s(cc.Director.prototype,{convertToGL:"cc.view.convertToLocationInView",convertToUI:"",getWinSize:"cc.winSize",getWinSizeInPixels:"cc.winSize",getVisibleSize:"cc.view.getVisibleSize",getVisibleOrigin:"cc.view.getVisibleOrigin",purgeCachedData:"cc.loader.releaseAll",setDepthTest:"cc.Camera.main.depth",setClearColor:"cc.Camera.main.backgroundColor",getRunningScene:"cc.director.getScene",getAnimationInterval:"cc.game.getFrameRate",setAnimationInterval:"cc.game.setFrameRate",isDisplayStats:"cc.debug.isDisplayStats",setDisplayStats:"cc.debug.setDisplayStats",stopAnimation:"cc.game.pause",startAnimation:"cc.game.resume"},"cc.Director"),C$99i(cc.Director,["pushScene","popScene","popToRootScene","popToSceneStackLevel","setProjection","getProjection"],"cc.Director"),C$99r(cc.Scheduler,{scheduleCallbackForTarget:"schedule",scheduleUpdateForTarget:"scheduleUpdate",unscheduleCallbackForTarget:"unschedule",unscheduleUpdateForTarget:"unscheduleUpdate",unscheduleAllCallbacksForTarget:"unscheduleAllForTarget",unscheduleAllCallbacks:"unscheduleAll",unscheduleAllCallbacksWithMinPriority:"unscheduleAllWithMinPriority"},"cc.Scheduler"),C$99r(cc.view,{adjustViewPort:"adjustViewportMeta",setViewPortInPoints:"setViewportInPoints",getViewPortRect:"getViewportRect"},"cc.view"),C$99n(cc.view,["isViewReady","setTargetDensityDPI","getTargetDensityDPI","setFrameZoomFactor","canSetContentScaleFactor","setContentTranslateLeftTop","getContentTranslateLeftTop","setViewName","getViewName"],"cc.view"),C$99i(cc.Pipeline,["flowInDeps","getItems"],"cc.loader"),C$99i(cc.PhysicsManager,["attachDebugDrawToCamera","detachDebugDrawFromCamera"]),C$99i(cc.CollisionManager,["attachDebugDrawToCamera","detachDebugDrawFromCamera"]),C$99r(cc._BaseNode.prototype,{tag:"name",getTag:"name",setTag:"name",getChildByTag:"getChildByName",removeChildByTag:"getChildByName(name).destroy()"}),C$99i(cc.Node,["_cascadeColorEnabled","cascadeColor","isCascadeColorEnabled","setCascadeColorEnabled","_cascadeOpacityEnabled","cascadeOpacity","isCascadeOpacityEnabled","setCascadeOpacityEnabled","opacityModifyRGB","isOpacityModifyRGB","setOpacityModifyRGB","ignoreAnchor","isIgnoreAnchorPointForPosition","ignoreAnchorPointForPosition","isRunning","_sgNode"]),C$99s(cc.Node.prototype,{getNodeToParentTransform:"getLocalMatrix",getNodeToParentTransformAR:"getLocalMatrix",getNodeToWorldTransform:"getWorldMatrix",getNodeToWorldTransformAR:"getWorldMatrix",getParentToNodeTransform:"getLocalMatrix",getWorldToNodeTransform:"getWorldMatrix",convertTouchToNodeSpace:"convertToNodeSpaceAR",convertTouchToNodeSpaceAR:"convertToNodeSpaceAR",convertToWorldSpace:"convertToWorldSpaceAR",convertToNodeSpace:"convertToNodeSpaceAR"}),C$99r(cc.Node.prototype,{getRotationX:"rotationX",setRotationX:"rotationX",getRotationY:"rotationY",setRotationY:"rotationY",getPositionX:"x",setPositionX:"x",getPositionY:"y",setPositionY:"y",getSkewX:"skewX",setSkewX:"skewX",getSkewY:"skewY",setSkewY:"skewY",getScaleX:"scaleX",setScaleX:"scaleX",getScaleY:"scaleY",setScaleY:"scaleY",getOpacity:"opacity",setOpacity:"opacity",getColor:"color",setColor:"color",getLocalZOrder:"zIndex",setLocalZOrder:"zIndex"}),C$99r(cc.Sprite.prototype,{setInsetLeft:"cc.SpriteFrame insetLeft",setInsetRight:"cc.SpriteFrame insetRight",setInsetTop:"cc.SpriteFrame insetTop",setInsetBottom:"cc.SpriteFrame insetBottom"}),cc.Material.getInstantiatedBuiltinMaterial=cc.MaterialVariant.createWithBuiltin,cc.Material.getInstantiatedMaterial=cc.MaterialVariant.create,C$99s(cc.Material,{getInstantiatedBuiltinMaterial:"cc.MaterialVariant.createWithBuiltin",getInstantiatedMaterial:"cc.MaterialVariant.create"}),cc.js.getset(cc.RenderComponent.prototype,"sharedMaterials",function(){return cc.warnID(1400,"sharedMaterials","getMaterials"),this.materials},function(C$99t){cc.warnID(1400,"sharedMaterials","setMaterial"),this.materials=C$99t}),C$99s(cc.Camera.prototype,{getNodeToCameraTransform:"getWorldToScreenMatrix2D",getCameraToWorldPoint:"getScreenToWorldPoint",getWorldToCameraPoint:"getWorldToScreenPoint",getCameraToWorldMatrix:"getScreenToWorldMatrix2D",getWorldToCameraMatrix:"getWorldToScreenMatrix2D"}),C$99i(cc.Camera,["addTarget","removeTarget","getTargets"]),'"%s" is not defined in the Scene, it is only defined in normal nodes.');Object.defineProperties(cc.Scene.prototype,{active:{get:function(){return cc.error(C$99c,"active"),!0},set:function(){cc.error(C$99c,"active")}},activeInHierarchy:{get:function(){return cc.error(C$99c,"activeInHierarchy"),!0}},getComponent:{get:function(){return cc.error(C$99c,"getComponent"),function(){return null}}},addComponent:{get:function(){return cc.error(C$99c,"addComponent"),function(){return null}}}}),C$99n(cc.dynamicAtlasManager,["minFrameSize"],"cc.dynamicAtlasManager"),cc.Light&&C$99n(cc.Light.prototype,["shadowDepthScale"],"cc.Light.prototype"),C$99r(cc,{affineTransformMake:"cc.AffineTransform.create",affineTransformMakeIdentity:"cc.AffineTransform.identity",affineTransformClone:"cc.AffineTransform.clone",affineTransformConcat:"cc.AffineTransform.concat",affineTransformConcatIn:"cc.AffineTransform.concat",affineTransformInvert:"cc.AffineTransform.invert",affineTransformInvertIn:"cc.AffineTransform.invert",affineTransformInvertOut:"cc.AffineTransform.invert",affineTransformEqualToTransform:"cc.AffineTransform.equal",pointApplyAffineTransform:"cc.AffineTransform.transformVec2",sizeApplyAffineTransform:"cc.AffineTransform.transformSize",rectApplyAffineTransform:"cc.AffineTransform.transformRect",obbApplyAffineTransform:"cc.AffineTransform.transformObb",pointEqualToPoint:"cc.Vec2 equals",sizeEqualToSize:"cc.Size equals",rectEqualToRect:"rectA.equals(rectB)",rectContainsRect:"rectA.containsRect(rectB)",rectContainsPoint:"rect.contains(vec2)",rectOverlapsRect:"rectA.intersects(rectB)",rectIntersectsRect:"rectA.intersects(rectB)",rectIntersection:"rectA.intersection(intersection, rectB)",rectUnion:"rectA.union(union, rectB)",rectGetMaxX:"rect.xMax",rectGetMidX:"rect.center.x",rectGetMinX:"rect.xMin",rectGetMaxY:"rect.yMax",rectGetMidY:"rect.center.y",rectGetMinY:"rect.yMin",colorEqual:"colorA.equals(colorB)",hexToColor:"color.fromHEX(hexColor)",colorToHex:"color.toHEX()",TextAlignment:"cc.macro.TextAlignment",VerticalTextAlignment:"cc.macro.VerticalTextAlignment",pNeg:"p.neg()",pAdd:"p1.add(p2)",pSub:"p1.sub(p2)",pMult:"p.mul(factor)",pMidpoint:"p1.add(p2).mul(0.5)",pDot:"p1.dot(p2)",pCross:"p1.cross(p2)",pPerp:"p.rotate(-90 * Math.PI / 180)",pRPerp:"p.rotate(90 * Math.PI / 180)",pProject:"p1.project(p2)",pLengthSQ:"p.magSqr()",pDistanceSQ:"p1.sub(p2).magSqr()",pLength:"p.mag()",pDistance:"p1.sub(p2).mag()",pNormalize:"p.normalize()",pForAngle:"cc.v2(Math.cos(a), Math.sin(a))",pToAngle:"Math.atan2(v.y, v.x)",pZeroIn:"p.x = p.y = 0",pIn:"p1.set(p2)",pMultIn:"p.mulSelf(factor)",pSubIn:"p1.subSelf(p2)",pAddIn:"p1.addSelf(p2)",pNormalizeIn:"p.normalizeSelf()",pSameAs:"p1.equals(p2)",pAngle:"v1.angle(v2)",pAngleSigned:"v1.signAngle(v2)",pRotateByAngle:"p.rotate(radians)",pCompMult:"v1.dot(v2)",pFuzzyEqual:"v1.fuzzyEquals(v2, tolerance)",pLerp:"p.lerp(endPoint, ratio)",pClamp:"p.clampf(min_inclusive, max_inclusive)",rand:"Math.random() * 0xffffff",randomMinus1To1:"(Math.random() - 0.5) * 2",container:"cc.game.container",_canvas:"cc.game.canvas",_renderType:"cc.game.renderType",_getError:"cc.debug.getError",_initDebugSetting:"cc.debug._resetDebugSetting",DebugMode:"cc.debug.DebugMode"},"cc"),C$99n(cc,["blendFuncDisable","pFromSize","pCompOp","pIntersectPoint","pSegmentIntersect","pLineIntersect","obbApplyMatrix","getImageFormatByData","initEngine"],"cc"),C$99s(cc,{p:"cc.v2"},"cc"),C$99r(cc.Rect,{contain:"rectA.contains(rectB)",transformMat4:"rect.transformMat4(out, mat4)"}),C$99r(cc.Color,{rgb2hsv:"color.toHSV()",hsv2rgb:"color.fromHSV(h, s, v)"}),C$99a.get(cc,"lerp",function(){return cc.errorID(1400,"cc.lerp","cc.misc.lerp"),cc.misc.lerp}),C$99a.get(cc,"random0To1",function(){return cc.errorID(1400,"cc.random0To1","Math.random"),Math.random}),C$99a.get(cc,"degreesToRadians",function(){return cc.errorID(1400,"cc.degreesToRadians","cc.misc.degreesToRadians"),cc.misc.degreesToRadians}),C$99a.get(cc,"radiansToDegrees",function(){return cc.errorID(1400,"cc.radiansToDegrees","cc.misc.radiansToDegrees"),cc.misc.radiansToDegrees}),C$99a.get(cc,"clampf",function(){return cc.errorID(1400,"cc.clampf","cc.misc.clampf"),cc.misc.clampf}),C$99a.get(cc,"clamp01",function(){return cc.errorID(1400,"cc.clamp01","cc.misc.clamp01"),cc.misc.clamp01}),C$99a.get(cc,"ImageFormat",function(){return cc.errorID(1400,"cc.ImageFormat","cc.macro.ImageFormat"),cc.macro.ImageFormat}),C$99a.get(cc,"KEY",function(){return cc.errorID(1400,"cc.KEY","cc.macro.KEY"),cc.macro.KEY}),C$99a.get(cc,"Easing",function(){return cc.errorID(1400,"cc.Easing","cc.easing"),cc.easing}),C$99a.get(cc,"isChildClassOf",function(){return cc.errorID(1400,"cc.isChildClassOf","cc.js.isChildClassOf"),cc.js.isChildClassOf}),"undefined"!=typeof dragonBones&&C$99a.get(dragonBones.CCFactory,"getFactory",function(){return cc.errorID(1400,"dragonBones.CCFactory.getFactory","dragonBones.CCFactory.getInstance"),dragonBones.CCFactory.getInstance}),cc.renderer.renderEngine={get gfx(){return cc.warnID(1400,"cc.renderer.renderEngine.gfx","cc.gfx"),cc.gfx},get math(){return cc.warnID(1400,"cc.renderer.renderEngine.math","cc.math"),cc.vmath},get InputAssembler(){return cc.warnID(1400,"cc.renderer.renderEngine.InputAssembler","cc.renderer.InputAssembler"),cc.renderer.InputAssembler}}},{}],292:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./core/CCGame"),C$99t("./actions")},{"./actions":8,"./core/CCGame":29}],293:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99h,C$99s,C$99o,C$99a,C$99c,C$99l;for(this.data=C$99t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C$99n=null;;){switch(C$99e=this.readUInt32(),C$99h=function(){var C$99t,C$99e=[];for(C$99t=0;C$99t<4;++C$99t)C$99e.push(String.fromCharCode(this.data[this.pos++]));return C$99e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(C$99e);break;case"fcTL":C$99n&&this.animation.frames.push(C$99n),this.pos+=4,C$99n={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},C$99o=this.readUInt16(),C$99r=this.readUInt16()||100,C$99n.delay=1e3*C$99o/C$99r,C$99n.disposeOp=this.data[this.pos++],C$99n.blendOp=this.data[this.pos++],C$99n.data=[];break;case"IDAT":case"fdAT":for("fdAT"===C$99h&&(this.pos+=4,C$99e-=4),C$99t=(null!=C$99n?C$99n.data:void 0)||this.imgData,C$99a=0;0<=C$99e?C$99a<C$99e:C$99e<C$99a;0<=C$99e?++C$99a:--C$99a)C$99t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(C$99e),0<(C$99s=255-this.transparency.indexed.length))for(C$99c=0;0<=C$99s?C$99c<C$99s:C$99s<C$99c;0<=C$99s?++C$99c:--C$99c)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(C$99e)[0];break;case 2:this.transparency.rgb=this.read(C$99e)}break;case"tEXt":C$99r=(C$99o=this.read(C$99e)).indexOf(0),C$99l=String.fromCharCode.apply(String,C$99o.slice(0,C$99r)),this.text[C$99l]=String.fromCharCode.apply(String,C$99o.slice(C$99r+1));break;case"IEND":return C$99n&&this.animation.frames.push(C$99n),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(C$99l=this.colorType)||6===C$99l,C$99i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*C$99i,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(Uint8Array!=Array&&(this.imgData=new Uint8Array(this.imgData)));default:this.pos+=C$99e}if(this.pos+=4,this.pos>this.data.length)throw new Error(C$99C.getError(6017))}}var C$99A=C$99t("../compression/zlib.min"),C$99C=C$99t("../core/CCDebug");C$99n.prototype={constructor:C$99n,read:function(C$99t){var C$99e,C$99i=[];for(C$99e=0;0<=C$99t?C$99e<C$99t:C$99t<C$99e;0<=C$99t?++C$99e:--C$99e)C$99i.push(this.data[this.pos++]);return C$99i},readUInt32:function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},readUInt16:function(){return this.data[this.pos++]<<8|this.data[this.pos++]},decodePixels:function(C$99t){var C$99e,C$99i,C$99h,C$99n,C$99u,C$99_,C$99d,C$99f,C$99p,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99m,C$99y,C$99g,C$99v,C$99x,C$99b;if(0===(C$99t=null==C$99t?this.imgData:C$99t).length)return new Uint8Array(0);for(C$99t=new C$99A.Inflate(C$99t,{index:0,verify:!1}).decompress(),C$99c=(C$99r=this.pixelBitlength/8)*this.width,C$99s=new Uint8Array(C$99c*this.height),C$99_=C$99t.length,C$99i=C$99o=C$99a=0;C$99o<C$99_;){switch(C$99t[C$99o++]){case 0:for(C$99n=C$99y=0;C$99y<C$99c;C$99n=C$99y+=1)C$99s[C$99i++]=C$99t[C$99o++];break;case 1:for(C$99n=C$99g=0;C$99g<C$99c;C$99n=C$99g+=1)C$99e=C$99t[C$99o++],C$99u=C$99n<C$99r?0:C$99s[C$99i-C$99r],C$99s[C$99i++]=(C$99e+C$99u)%256;break;case 2:for(C$99n=C$99v=0;C$99v<C$99c;C$99n=C$99v+=1)C$99e=C$99t[C$99o++],C$99h=(C$99n-C$99n%C$99r)/C$99r,C$99l=C$99a&&C$99s[(C$99a-1)*C$99c+C$99h*C$99r+C$99n%C$99r],C$99s[C$99i++]=(C$99l+C$99e)%256;break;case 3:for(C$99n=C$99x=0;C$99x<C$99c;C$99n=C$99x+=1)C$99e=C$99t[C$99o++],C$99h=(C$99n-C$99n%C$99r)/C$99r,C$99u=C$99n<C$99r?0:C$99s[C$99i-C$99r],C$99l=C$99a&&C$99s[(C$99a-1)*C$99c+C$99h*C$99r+C$99n%C$99r],C$99s[C$99i++]=(C$99e+Math.floor((C$99u+C$99l)/2))%256;break;case 4:for(C$99n=C$99b=0;C$99b<C$99c;C$99n=C$99b+=1)C$99e=C$99t[C$99o++],C$99h=(C$99n-C$99n%C$99r)/C$99r,C$99u=C$99n<C$99r?0:C$99s[C$99i-C$99r],0===C$99a?C$99l=C$99m=0:(C$99l=C$99s[(C$99a-1)*C$99c+C$99h*C$99r+C$99n%C$99r],C$99m=C$99h&&C$99s[(C$99a-1)*C$99c+(C$99h-1)*C$99r+C$99n%C$99r]),C$99p=C$99u+C$99l-C$99m,C$99d=Math.abs(C$99p-C$99u),C$99f=Math.abs(C$99p-C$99l),C$99p=Math.abs(C$99p-C$99m),C$99s[C$99i++]=(C$99e+(C$99d<=C$99f&&C$99d<=C$99p?C$99u:C$99f<=C$99p?C$99l:C$99m))%256;break;default:throw new Error(C$99C.getError(6018,C$99t[C$99o-1]))}C$99a++}return C$99s},copyToImageData:function(C$99h,C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99u,C$99_=this.colors,C$99c=null,C$99l=this.hasAlphaChannel;if(this.palette.length&&(C$99c=null!=(C$99u=this._decodedPalette)?C$99u:this._decodedPalette=this.decodePalette(),C$99_=4,C$99l=!0),C$99o=(C$99e=C$99h.data||C$99h).length,C$99n=C$99c||C$99t,C$99i=C$99r=0,1===C$99_)for(;C$99i<C$99o;)C$99s=C$99c?4*C$99t[C$99i/4]:C$99r,C$99a=C$99n[C$99s++],C$99e[C$99i++]=C$99a,C$99e[C$99i++]=C$99a,C$99e[C$99i++]=C$99a,C$99e[C$99i++]=C$99l?C$99n[C$99s++]:255,C$99r=C$99s;else for(;C$99i<C$99o;)C$99s=C$99c?4*C$99t[C$99i/4]:C$99r,C$99e[C$99i++]=C$99n[C$99s++],C$99e[C$99i++]=C$99n[C$99s++],C$99e[C$99i++]=C$99n[C$99s++],C$99e[C$99i++]=C$99l?C$99n[C$99s++]:255,C$99r=C$99s},decodePalette:function(){for(var C$99t,C$99e,C$99i=this.palette,C$99n=this.transparency.indexed||[],C$99r=new Uint8Array((C$99n.length||0)+C$99i.length),C$99s=0,C$99o=0,C$99a=C$99t=0,C$99c=C$99i.length;C$99t<C$99c;C$99a=C$99t+=3)C$99r[C$99s++]=C$99i[C$99a],C$99r[C$99s++]=C$99i[C$99a+1],C$99r[C$99s++]=C$99i[C$99a+2],C$99r[C$99s++]=null!=(C$99e=C$99n[C$99o++])?C$99e:255;return C$99r},render:function(C$99t){var C$99e;return C$99t.width=this.width,C$99t.height=this.height,C$99e=(C$99t=C$99t.getContext("2d")).createImageData(this.width,this.height),this.copyToImageData(C$99e,this.decodePixels()),C$99t.putImageData(C$99e,0,0)}},C$99e.exports=C$99n},{"../compression/zlib.min":26,"../core/CCDebug":27}],294:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../core/assets/CCAsset"),C$99t=C$99t("../core/assets/CCSpriteFrame"),C$99n=cc.Class({name:"cc.ParticleAsset",extends:C$99n,properties:{spriteFrame:{default:null,type:C$99t}}});cc.ParticleAsset=C$99e.exports=C$99n},{"../core/assets/CCAsset":34,"../core/assets/CCSpriteFrame":47}],295:[function(C$99t,C$99e,C$99h){"use strict";var C$99o=C$99t("../core/platform/CCMacro"),C$99i=C$99t("./CCParticleAsset"),C$99u=C$99t("../core/components/CCRenderComponent"),C$99_=C$99t("../compression/ZipUtils"),C$99a=C$99t("./CCPNGReader"),C$99c=C$99t("./CCTIFFReader"),C$99l=C$99t("../core/utils/texture-util"),C$99d=(C$99t("../core/renderer/render-flow"),C$99t("./particle-simulator")),C$99n=(C$99t("../core/assets/material/CCMaterial"),C$99t("../core/utils/blend-func"));var C$99r=cc.Enum({GRAVITY:0,RADIUS:1}),C$99s=cc.Enum({FREE:0,RELATIVE:1,GROUPED:2}),C$99t={preview:{default:!0,editorOnly:!0,notify:!1,animatable:!1,tooltip:!1},_custom:!1,custom:{get:function(){return this._custom},set:function(C$99t){this._custom!==C$99t&&(this._custom=C$99t,this._applyFile())},animatable:!1,tooltip:!1},_file:{default:null,type:C$99i},file:{get:function(){return this._file},set:function(C$99t,C$99e){this._file!==C$99t&&((this._file=C$99t)?this._applyFile():this.custom=!0)},animatable:!1,type:C$99i,tooltip:!1},_spriteFrame:{default:null,type:cc.SpriteFrame},spriteFrame:{get:function(){return this._spriteFrame},set:function(C$99t,C$99e){var C$99i=this._renderSpriteFrame;C$99i!==C$99t&&((this._renderSpriteFrame=C$99t)&&!C$99t._uuid||(this._spriteFrame=C$99t),(C$99i&&C$99i.getTexture())!==(C$99t&&C$99t.getTexture())&&this._applySpriteFrame(C$99i))},type:cc.SpriteFrame,tooltip:!1},_texture:{default:null,type:cc.Texture2D,editorOnly:!0},texture:{get:function(){return this._getTexture()},set:function(C$99t){C$99t&&cc.warnID(6017)},type:cc.Texture2D,tooltip:!1,readonly:!0,visible:!1,animatable:!1},particleCount:{visible:!1,get:function(){return this._simulator.particles.length},readonly:!0},_stopped:!0,stopped:{get:function(){return this._stopped},animatable:!1,visible:!1},playOnLoad:!0,autoRemoveOnFinish:{default:!1,animatable:!1,tooltip:!1},active:{get:function(){return this._simulator.active},visible:!1},totalParticles:150,duration:-1,emissionRate:10,life:1,lifeVar:0,_startColor:null,startColor:{type:cc.Color,get:function(){return this._startColor},set:function(C$99t){this._startColor.r=C$99t.r,this._startColor.g=C$99t.g,this._startColor.b=C$99t.b,this._startColor.a=C$99t.a}},_startColorVar:null,startColorVar:{type:cc.Color,get:function(){return this._startColorVar},set:function(C$99t){this._startColorVar.r=C$99t.r,this._startColorVar.g=C$99t.g,this._startColorVar.b=C$99t.b,this._startColorVar.a=C$99t.a}},_endColor:null,endColor:{type:cc.Color,get:function(){return this._endColor},set:function(C$99t){this._endColor.r=C$99t.r,this._endColor.g=C$99t.g,this._endColor.b=C$99t.b,this._endColor.a=C$99t.a}},_endColorVar:null,endColorVar:{type:cc.Color,get:function(){return this._endColorVar},set:function(C$99t){this._endColorVar.r=C$99t.r,this._endColorVar.g=C$99t.g,this._endColorVar.b=C$99t.b,this._endColorVar.a=C$99t.a}},angle:90,angleVar:20,startSize:50,startSizeVar:0,endSize:0,endSizeVar:0,startSpin:0,startSpinVar:0,endSpin:0,endSpinVar:0,sourcePos:cc.Vec2.ZERO,posVar:cc.Vec2.ZERO,_positionType:{default:C$99s.FREE,formerlySerializedAs:"positionType"},positionType:{type:C$99s,get:function(){return this._positionType},set:function(C$99t){this._positionType=C$99t,this._updateMaterial()}},emitterMode:{default:C$99r.GRAVITY,type:C$99r},gravity:cc.Vec2.ZERO,speed:180,speedVar:50,tangentialAccel:80,tangentialAccelVar:0,radialAccel:0,radialAccelVar:0,rotationIsDir:!1,startRadius:0,startRadiusVar:0,endRadius:0,endRadiusVar:0,rotatePerS:0,rotatePerSVar:0},C$99i=cc.Class({name:"cc.ParticleSystem",extends:C$99u,mixins:[C$99n],editor:!1,ctor:function(){this.initProperties()},initProperties:function(){this._previewTimer=null,this._focused=!1,this._aspectRatio=1,this._simulator=new C$99d(this),this._startColor=cc.color(255,255,255,255),this._startColorVar=cc.color(0,0,0,0),this._endColor=cc.color(255,255,255,0),this._endColorVar=cc.color(0,0,0,0),this._renderSpriteFrame=null},properties:C$99t,statics:{DURATION_INFINITY:-1,START_SIZE_EQUAL_TO_END_SIZE:-1,START_RADIUS_EQUAL_TO_END_RADIUS:-1,EmitterMode:C$99r,PositionType:C$99s,_PNGReader:C$99a,_TIFFReader:C$99c},onFocusInEditor:!1,onLostFocusInEditor:!1,_startPreview:!1,_stopPreview:!1,_convertTextureToSpriteFrame:!1,__preload:function(){this._super(),this._custom&&this.spriteFrame&&!this._renderSpriteFrame?this._applySpriteFrame(this.spriteFrame):this._file&&(this._custom&&this._getTexture()||this._applyFile()),this.playOnLoad&&this.resetSystem()},onDestroy:function(){this.autoRemoveOnFinish&&(this.autoRemoveOnFinish=!1),this._buffer&&(this._buffer.destroy(),this._buffer=null),this._simulator._uvFilled=0,this._super()},lateUpdate:function(C$99t){this._simulator.finished||this._simulator.step(C$99t)},addParticle:function(){},stopSystem:function(){this._stopped=!0,this._simulator.stop()},resetSystem:function(){this._stopped=!1,this._simulator.reset(),this.markForRender(!0)},isFull:function(){return this.particleCount>=this.totalParticles},setTextureWithRect:function(C$99t,C$99e){C$99t instanceof cc.Texture2D&&(this.spriteFrame=new cc.SpriteFrame(C$99t,C$99e))},_applyFile:function(){var C$99i,C$99n=this._file;C$99n&&(C$99i=this,cc.loader.load(C$99n.nativeUrl,function(C$99t,C$99e){!C$99t&&C$99e?C$99i.isValid&&(C$99i._plistFile=C$99n.nativeUrl,C$99i._custom||C$99i._initWithDictionary(C$99e),C$99i._spriteFrame?!C$99i._renderSpriteFrame&&C$99i._spriteFrame&&C$99i._applySpriteFrame(C$99i.spriteFrame):C$99n.spriteFrame?C$99i.spriteFrame=C$99n.spriteFrame:C$99i._custom&&C$99i._initTextureWithDictionary(C$99e)):cc.errorID(6029)}))},_initTextureWithDictionary:function(C$99i){var C$99t=cc.path.changeBasename(this._plistFile,C$99i.textureFileName||"");if(C$99i.textureFileName)C$99l.loadImage(C$99t,function(C$99t,C$99e){C$99t?(C$99i.textureFileName=void 0,this._initTextureWithDictionary(C$99i)):this.spriteFrame=new cc.SpriteFrame(C$99e)},this);else if(C$99i.textureImageData){var C$99e=C$99i.textureImageData;if(!(C$99e&&0<C$99e.length))return!1;var C$99n=cc.loader.getRes(C$99t);if(!C$99n){C$99e=C$99_.unzipBase64AsArray(C$99e,1);if(!C$99e)return cc.logID(6030),!1;var C$99r=8<(C$99r=C$99e).length&&137===C$99r[0]&&80===C$99r[1]&&78===C$99r[2]&&71===C$99r[3]&&13===C$99r[4]&&10===C$99r[5]&&26===C$99r[6]&&10===C$99r[7]?C$99o.ImageFormat.PNG:2<C$99r.length&&(73===C$99r[0]&&73===C$99r[1]||77===C$99r[0]&&77===C$99r[1]||255===C$99r[0]&&216===C$99r[1])?C$99o.ImageFormat.TIFF:C$99o.ImageFormat.UNKNOWN;if(C$99r!==C$99o.ImageFormat.TIFF&&C$99r!==C$99o.ImageFormat.PNG)return cc.logID(6031),!1;var C$99s=document.createElement("canvas");C$99r===C$99o.ImageFormat.PNG?new C$99a(C$99e).render(C$99s):C$99c.parseTIFF(C$99e,C$99s),C$99n=C$99l.cacheImage(C$99t,C$99s)}C$99n||cc.logID(6032),this.spriteFrame=new cc.SpriteFrame(C$99n)}return!0},_initWithDictionary:function(C$99t){this.totalParticles=parseInt(C$99t.maxParticles||0),this.life=parseFloat(C$99t.particleLifespan||0),this.lifeVar=parseFloat(C$99t.particleLifespanVariance||0);var C$99e=C$99t.emissionRate,C$99e=(this.emissionRate=C$99e||Math.min(this.totalParticles/this.life,Number.MAX_VALUE),this.duration=parseFloat(C$99t.duration||0),this.srcBlendFactor=parseInt(C$99t.blendFuncSource||C$99o.SRC_ALPHA),this.dstBlendFactor=parseInt(C$99t.blendFuncDestination||C$99o.ONE_MINUS_SRC_ALPHA),this._startColor),C$99e=(C$99e.r=255*parseFloat(C$99t.startColorRed||0),C$99e.g=255*parseFloat(C$99t.startColorGreen||0),C$99e.b=255*parseFloat(C$99t.startColorBlue||0),C$99e.a=255*parseFloat(C$99t.startColorAlpha||0),this._startColorVar),C$99e=(C$99e.r=255*parseFloat(C$99t.startColorVarianceRed||0),C$99e.g=255*parseFloat(C$99t.startColorVarianceGreen||0),C$99e.b=255*parseFloat(C$99t.startColorVarianceBlue||0),C$99e.a=255*parseFloat(C$99t.startColorVarianceAlpha||0),this._endColor),C$99e=(C$99e.r=255*parseFloat(C$99t.finishColorRed||0),C$99e.g=255*parseFloat(C$99t.finishColorGreen||0),C$99e.b=255*parseFloat(C$99t.finishColorBlue||0),C$99e.a=255*parseFloat(C$99t.finishColorAlpha||0),this._endColorVar);if(C$99e.r=255*parseFloat(C$99t.finishColorVarianceRed||0),C$99e.g=255*parseFloat(C$99t.finishColorVarianceGreen||0),C$99e.b=255*parseFloat(C$99t.finishColorVarianceBlue||0),C$99e.a=255*parseFloat(C$99t.finishColorVarianceAlpha||0),this.startSize=parseFloat(C$99t.startParticleSize||0),this.startSizeVar=parseFloat(C$99t.startParticleSizeVariance||0),this.endSize=parseFloat(C$99t.finishParticleSize||0),this.endSizeVar=parseFloat(C$99t.finishParticleSizeVariance||0),this.positionType=parseFloat(void 0!==C$99t.positionType?C$99t.positionType:C$99s.RELATIVE),this.sourcePos.x=0,this.sourcePos.y=0,this.posVar.x=parseFloat(C$99t.sourcePositionVariancex||0),this.posVar.y=parseFloat(C$99t.sourcePositionVariancey||0),this.angle=parseFloat(C$99t.angle||0),this.angleVar=parseFloat(C$99t.angleVariance||0),this.startSpin=parseFloat(C$99t.rotationStart||0),this.startSpinVar=parseFloat(C$99t.rotationStartVariance||0),this.endSpin=parseFloat(C$99t.rotationEnd||0),this.endSpinVar=parseFloat(C$99t.rotationEndVariance||0),this.emitterMode=parseInt(C$99t.emitterType||C$99r.GRAVITY),this.emitterMode===C$99r.GRAVITY){this.gravity.x=parseFloat(C$99t.gravityx||0),this.gravity.y=parseFloat(C$99t.gravityy||0),this.speed=parseFloat(C$99t.speed||0),this.speedVar=parseFloat(C$99t.speedVariance||0),this.radialAccel=parseFloat(C$99t.radialAcceleration||0),this.radialAccelVar=parseFloat(C$99t.radialAccelVariance||0),this.tangentialAccel=parseFloat(C$99t.tangentialAcceleration||0),this.tangentialAccelVar=parseFloat(C$99t.tangentialAccelVariance||0);C$99e=C$99t.rotationIsDir||"";null!==C$99e?(C$99e=C$99e.toString().toLowerCase(),this.rotationIsDir="true"===C$99e||"1"===C$99e):this.rotationIsDir=!1}else{if(this.emitterMode!==C$99r.RADIUS)return cc.warnID(6009),!1;this.startRadius=parseFloat(C$99t.maxRadius||0),this.startRadiusVar=parseFloat(C$99t.maxRadiusVariance||0),this.endRadius=parseFloat(C$99t.minRadius||0),this.endRadiusVar=parseFloat(C$99t.minRadiusVariance||0),this.rotatePerS=parseFloat(C$99t.rotatePerSecond||0),this.rotatePerSVar=parseFloat(C$99t.rotatePerSecondVariance||0)}return this._initTextureWithDictionary(C$99t),!0},_validateRender:function(){var C$99t=this._getTexture();C$99t&&C$99t.loaded?this._super():this.disableRender()},_onTextureLoaded:function(){this._simulator.updateUVs(!0),this._syncAspect(),this._updateMaterial(),this.markForRender(!0)},_syncAspect:function(){var C$99t=this._renderSpriteFrame._rect;this._aspectRatio=C$99t.width/C$99t.height},_applySpriteFrame:function(){this._renderSpriteFrame=this._renderSpriteFrame||this._spriteFrame,this._renderSpriteFrame&&(this._renderSpriteFrame.textureLoaded()?this._onTextureLoaded():this._renderSpriteFrame.onTextureLoaded(this._onTextureLoaded,this))},_getTexture:function(){return this._renderSpriteFrame&&this._renderSpriteFrame.getTexture()||this._texture},_updateMaterial:function(){var C$99t=this.getMaterial(0);C$99t&&(C$99t.define("CC_USE_MODEL",this._positionType!==C$99s.FREE),C$99t.setProperty("texture",this._getTexture()),C$99n.prototype._updateMaterial.call(this))},_finishedSimulation:function(){this.resetSystem(),this.stopSystem(),this.disableRender(),this.autoRemoveOnFinish&&this._stopped&&this.node.destroy()}});cc.ParticleSystem=C$99e.exports=C$99i},{"../compression/ZipUtils":23,"../core/assets/material/CCMaterial":53,"../core/components/CCRenderComponent":89,"../core/platform/CCMacro":194,"../core/renderer/render-flow":221,"../core/utils/blend-func":257,"../core/utils/texture-util":272,"./CCPNGReader":293,"./CCParticleAsset":294,"./CCTIFFReader":296,"./particle-simulator":298,"fire-url":void 0}],296:[function(C$99t,C$99e,C$99i){"use strict";var C$99tt=C$99t("../core/CCDebug");C$99e.exports={_littleEndian:!1,_tiffData:null,_fileDirectories:[],getUint8:function(C$99t){return this._tiffData[C$99t]},getUint16:function(C$99t){return this._littleEndian?this._tiffData[C$99t+1]<<8|this._tiffData[C$99t]:this._tiffData[C$99t]<<8|this._tiffData[C$99t+1]},getUint32:function(C$99t){var C$99e=this._tiffData;return this._littleEndian?C$99e[C$99t+3]<<24|C$99e[C$99t+2]<<16|C$99e[C$99t+1]<<8|C$99e[C$99t]:C$99e[C$99t]<<24|C$99e[C$99t+1]<<16|C$99e[C$99t+2]<<8|C$99e[C$99t+3]},checkLittleEndian:function(){var C$99t=this.getUint16(0);if(18761===C$99t)this.littleEndian=!0;else{if(19789!==C$99t)throw console.log(C$99t),TypeError(C$99tt.getError(6019));this.littleEndian=!1}return this.littleEndian},hasTowel:function(){if(42!==this.getUint16(2))throw RangeError(C$99tt.getError(6020));return!0},getFieldTypeName:function(C$99t){var C$99e=this.fieldTypeNames;return C$99t in C$99e?C$99e[C$99t]:null},getFieldTagName:function(C$99t){var C$99e=this.fieldTagNames;return C$99t in C$99e?C$99e[C$99t]:(cc.logID(6021,C$99t),"Tag"+C$99t)},getFieldTypeLength:function(C$99t){return-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(C$99t)?1:-1!==["SHORT","SSHORT"].indexOf(C$99t)?2:-1!==["LONG","SLONG","FLOAT"].indexOf(C$99t)?4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(C$99t)?8:null},getFieldValues:function(C$99t,C$99e,C$99i,C$99n){var C$99r=[],C$99s=this.getFieldTypeLength(C$99e);if(C$99s*C$99i<=4)!1===this.littleEndian?C$99r.push(C$99n>>>8*(4-C$99s)):C$99r.push(C$99n);else for(var C$99o=0;C$99o<C$99i;C$99o++){var C$99a=C$99s*C$99o;8<=C$99s?-1!==["RATIONAL","SRATIONAL"].indexOf(C$99e)?(C$99r.push(this.getUint32(C$99n+C$99a)),C$99r.push(this.getUint32(C$99n+C$99a+4))):cc.logID(8e3):C$99r.push(this.getBytes(C$99s,C$99n+C$99a))}return"ASCII"===C$99e&&C$99r.forEach(function(C$99t,C$99e,C$99i){C$99i[C$99e]=String.fromCharCode(C$99t)}),C$99r},getBytes:function(C$99t,C$99e){if(!(C$99t<=0))return C$99t<=1?this.getUint8(C$99e):C$99t<=2?this.getUint16(C$99e):C$99t<=3?this.getUint32(C$99e)>>>8:C$99t<=4?this.getUint32(C$99e):void cc.logID(8002);cc.logID(8001)},getBits:function(C$99t,C$99e,C$99i){C$99i=C$99i||0;var C$99n,C$99r,C$99e=C$99e+Math.floor(C$99i/8),C$99s=C$99i+C$99t,C$99t=32-C$99t;return C$99s<=0?cc.logID(6023):C$99s<=8?(C$99n=24+C$99i,C$99r=this.getUint8(C$99e)):C$99s<=16?(C$99n=16+C$99i,C$99r=this.getUint16(C$99e)):C$99s<=32?(C$99n=C$99i,C$99r=this.getUint32(C$99e)):cc.logID(6022),{bits:C$99r<<C$99n>>>C$99t,byteOffset:C$99e+Math.floor(C$99s/8),bitOffset:C$99s%8}},parseFileDirectory:function(C$99t){for(var C$99e=this.getUint16(C$99t),C$99i=[],C$99n=C$99t+2,C$99r=0;C$99r<C$99e;C$99n+=12,C$99r++){var C$99s=this.getUint16(C$99n),C$99o=this.getUint16(C$99n+2),C$99a=this.getUint32(C$99n+4),C$99c=this.getUint32(C$99n+8),C$99s=this.getFieldTagName(C$99s),C$99o=this.getFieldTypeName(C$99o),C$99a=this.getFieldValues(C$99s,C$99o,C$99a,C$99c);C$99i[C$99s]={type:C$99o,values:C$99a}}this._fileDirectories.push(C$99i);C$99t=this.getUint32(C$99n);0!==C$99t&&this.parseFileDirectory(C$99t)},clampColorSample:function(C$99t,C$99e){C$99e=Math.pow(2,8-C$99e);return Math.floor(C$99t*C$99e+(C$99e-1))},parseTIFF:function(C$99t,C$99e){if(C$99e=C$99e||document.createElement("canvas"),this._tiffData=C$99t,this.canvas=C$99e,this.checkLittleEndian(),this.hasTowel()){var C$99h,C$99t=this.getUint32(4),C$99t=(this._fileDirectories.length=0,this.parseFileDirectory(C$99t),this._fileDirectories[0]),C$99u=C$99t.ImageWidth.values[0],C$99i=C$99t.ImageLength.values[0],C$99n=(this.canvas.width=C$99u,this.canvas.height=C$99i,[]),C$99_=C$99t.Compression?C$99t.Compression.values[0]:1,C$99d=C$99t.SamplesPerPixel.values[0],C$99r=[],C$99f=0,C$99p=!1,C$99m=(C$99t.BitsPerSample.values.forEach(function(C$99t,C$99e,C$99i){C$99r[C$99e]={bitsPerSample:C$99t,hasBytesPerSample:!1,bytesPerSample:void 0},C$99t%8==0&&(C$99r[C$99e].hasBytesPerSample=!0,C$99r[C$99e].bytesPerSample=C$99t/8),C$99f+=C$99t},this),C$99f%8==0&&(C$99p=!0,C$99h=C$99f/8),C$99t.StripOffsets.values),C$99y=C$99m.length;if(C$99t.StripByteCounts)var C$99g=C$99t.StripByteCounts.values;else{if(cc.logID(8003),1!==C$99y)throw Error(C$99tt.getError(6024));C$99g=[Math.ceil(C$99u*C$99i*C$99f/8)]}for(var C$99s=0;C$99s<C$99y;C$99s++)for(var C$99v=C$99m[C$99s],C$99x=(C$99n[C$99s]=[],C$99g[C$99s]),C$99o=0,C$99b=0,C$99A=1,C$99C=!0,C$99a=[],C$99S=0,C$99T=0,C$99w=0;C$99o<C$99x;C$99o+=C$99A)switch(C$99_){case 1:for(var C$99c=0,C$99a=[];C$99c<C$99d;C$99c++){if(!C$99r[C$99c].hasBytesPerSample)throw C$99E=this.getBits(C$99r[C$99c].bitsPerSample,C$99v+C$99o,C$99b),C$99a.push(C$99E.bits),C$99o=C$99E.byteOffset-C$99v,C$99b=C$99E.bitOffset,RangeError(C$99tt.getError(6025));var C$99E=C$99r[C$99c].bytesPerSample*C$99c;C$99a.push(this.getBytes(C$99r[C$99c].bytesPerSample,C$99v+C$99o+C$99E))}if(C$99n[C$99s].push(C$99a),!C$99p)throw C$99A=0,RangeError(C$99tt.getError(6026));C$99A=C$99h;break;case 2:case 3:case 4:case 5:case 6:case 7:break;case 32773:if(C$99C){var C$99C=!1,C$99M=1,C$99I=1,C$99B=this.getInt8(C$99v+C$99o);0<=C$99B&&C$99B<=127?C$99M=C$99B+1:-127<=C$99B&&C$99B<=-1?C$99I=1-C$99B:C$99C=!0}else{for(var C$99R=this.getUint8(C$99v+C$99o),C$99c=0;C$99c<C$99I;C$99c++){if(!C$99r[C$99T].hasBytesPerSample)throw RangeError(C$99tt.getError(6025));C$99w=C$99w<<8*C$99S|C$99R,++C$99S===C$99r[C$99T].bytesPerSample&&(C$99a.push(C$99w),C$99w=C$99S=0,C$99T++),C$99T===C$99d&&(C$99n[C$99s].push(C$99a),C$99a=[],C$99T=0)}0===--C$99M&&(C$99C=!0)}C$99A=1}if(C$99e.getContext){var C$99P,C$99D,C$99L=this.canvas.getContext("2d"),C$99e=(C$99L.fillStyle="rgba(255, 255, 255, 0)",C$99t.RowsPerStrip?C$99t.RowsPerStrip.values[0]:C$99i),C$99V=C$99n.length,C$99i=C$99i%C$99e,C$99O=0==C$99i?C$99e:C$99i,C$99F=C$99e,C$99N=0,C$99k=C$99t.PhotometricInterpretation.values[0],C$99G=[],C$99z=0;C$99t.ExtraSamples&&(C$99z=(C$99G=C$99t.ExtraSamples.values).length),C$99t.ColorMap&&(C$99P=C$99t.ColorMap.values,C$99D=Math.pow(2,C$99r[0].bitsPerSample));for(C$99s=0;C$99s<C$99V;C$99s++){C$99s+1===C$99V&&(C$99F=C$99O);for(var C$99U=C$99n[C$99s].length,C$99W=C$99N*C$99s,C$99H=0,C$99j=0;C$99j<C$99U;C$99H++)for(var C$99X=0;C$99X<C$99u;C$99X++,C$99j++){var C$99Y,C$99l=C$99n[C$99s][C$99j],C$99q=0,C$99J=0,C$99Z=0,C$99K=1;if(0<C$99z)for(var C$99Q=0;C$99Q<C$99z;C$99Q++)if(1===C$99G[C$99Q]||2===C$99G[C$99Q]){C$99K=C$99l[3+C$99Q]/256;break}switch(C$99k){case 0:C$99r[0].hasBytesPerSample&&(C$99Y=Math.pow(16,2*C$99r[0].bytesPerSample)),C$99l.forEach(function(C$99t,C$99e,C$99i){C$99i[C$99e]=C$99Y-C$99t});case 1:C$99q=C$99J=C$99Z=this.clampColorSample(C$99l[0],C$99r[0].bitsPerSample);break;case 2:C$99q=this.clampColorSample(C$99l[0],C$99r[0].bitsPerSample),C$99J=this.clampColorSample(C$99l[1],C$99r[1].bitsPerSample),C$99Z=this.clampColorSample(C$99l[2],C$99r[2].bitsPerSample);break;case 3:if(void 0===C$99P)throw Error(C$99tt.getError(6027));var C$99$=C$99l[0],C$99q=this.clampColorSample(C$99P[C$99$],16),C$99J=this.clampColorSample(C$99P[C$99D+C$99$],16),C$99Z=this.clampColorSample(C$99P[2*C$99D+C$99$],16);break;default:throw RangeError(C$99tt.getError(6028,C$99k))}C$99L.fillStyle="rgba("+C$99q+", "+C$99J+", "+C$99Z+", "+C$99K+")",C$99L.fillRect(C$99X,C$99W+C$99H,1,1)}C$99N=C$99F}}return this.canvas}},fieldTagNames:{315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},fieldTypeNames:{1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"}}},{"../core/CCDebug":27}],297:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCParticleAsset"),C$99t("./CCParticleSystem"),C$99t("./particle-simulator"),C$99t("./particle-system-assembler")},{"./CCParticleAsset":294,"./CCParticleSystem":295,"./particle-simulator":298,"./particle-system-assembler":299}],298:[function(C$99e,C$99i,C$99n){"use strict";function C$99r(){this.pos=cc.v2(0,0),this.startPos=cc.v2(0,0),this.color=cc.color(0,0,0,255),this.deltaColor={r:0,g:0,b:0,a:255},this.size=0,this.deltaSize=0,this.rotation=0,this.deltaRotation=0,this.timeToLive=0,this.drawPos=cc.v2(0,0),this.aspectRatio=1,this.dir=cc.v2(0,0),this.radialAccel=0,this.tangentialAccel=0,this.angle=0,this.degreesPerSecond=0,this.radius=0,this.deltaRadius=0}function C$99t(C$99t){this.sys=C$99t,this.particles=[],this.active=!1,this.readyToPlay=!0,this.finished=!1,this.elapsed=0,this.emitCounter=0,this._uvFilled=0}var C$99m=C$99e("../core/utils/affine-transform"),C$99s=C$99e("../core/platform/js"),C$99y=C$99e("../core/utils/misc"),C$99g=cc.v2(0,0),C$99v=C$99m.create(),C$99x=cc.v2(),C$99b=cc.v2(),C$99A=cc.v2(),C$99C=cc.v2(),C$99S=new C$99s.Pool(function(C$99t){C$99t.pos.set(C$99g),C$99t.startPos.set(C$99g),C$99t.color._val=4278190080,C$99t.deltaColor.r=C$99t.deltaColor.g=C$99t.deltaColor.b=0,C$99t.deltaColor.a=255,C$99t.size=0,C$99t.deltaSize=0,C$99t.rotation=0,C$99t.deltaRotation=0,C$99t.timeToLive=0,C$99t.drawPos.set(C$99g),C$99t.aspectRatio=1,C$99t.dir.set(C$99g),C$99t.radialAccel=0,C$99t.tangentialAccel=0,C$99t.angle=0,C$99t.degreesPerSecond=0,C$99t.radius=0,C$99t.deltaRadius=0},1024);C$99S.get=function(){return this._get()||new C$99r};C$99t.prototype.stop=function(){this.active=!1,this.readyToPlay=!1,this.elapsed=this.sys.duration,this.emitCounter=0},C$99t.prototype.reset=function(){this.active=!0,this.readyToPlay=!0,this.elapsed=0,this.emitCounter=0,this.finished=!1;for(var C$99t=this.particles,C$99e=0;C$99e<C$99t.length;++C$99e)C$99S.put(C$99t[C$99e]);C$99t.length=0},C$99t.prototype.emitParticle=function(C$99h){var C$99t,C$99e=this.sys,C$99i=C$99y.clampf,C$99n=C$99S.get(),C$99r=(this.particles.push(C$99n),C$99n.timeToLive=C$99e.life+C$99e.lifeVar*(Math.random()-.5)*2,C$99n.timeToLive=Math.max(0,C$99n.timeToLive)),C$99s=(C$99n.pos.x=C$99e.sourcePos.x+C$99e.posVar.x*(Math.random()-.5)*2,C$99n.pos.y=C$99e.sourcePos.y+C$99e.posVar.y*(Math.random()-.5)*2,C$99e._startColor),C$99o=C$99e._startColorVar,C$99a=C$99e._endColor,C$99c=C$99e._endColorVar,C$99o=(C$99n.color.r=C$99t=C$99i(C$99s.r+C$99o.r*(Math.random()-.5)*2,0,255),C$99n.color.g=C$99l=C$99i(C$99s.g+C$99o.g*(Math.random()-.5)*2,0,255),C$99n.color.b=C$99u=C$99i(C$99s.b+C$99o.b*(Math.random()-.5)*2,0,255),C$99n.color.a=C$99s=C$99i(C$99s.a+C$99o.a*(Math.random()-.5)*2,0,255),C$99n.deltaColor.r=(C$99i(C$99a.r+C$99c.r*(Math.random()-.5)*2,0,255)-C$99t)/C$99r,C$99n.deltaColor.g=(C$99i(C$99a.g+C$99c.g*(Math.random()-.5)*2,0,255)-C$99l)/C$99r,C$99n.deltaColor.b=(C$99i(C$99a.b+C$99c.b*(Math.random()-.5)*2,0,255)-C$99u)/C$99r,C$99n.deltaColor.a=(C$99i(C$99a.a+C$99c.a*(Math.random()-.5)*2,0,255)-C$99s)/C$99r,C$99e.startSize+C$99e.startSizeVar*(Math.random()-.5)*2),C$99o=Math.max(0,C$99o),C$99l=(C$99n.size=C$99o,C$99e.endSize===cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE?C$99n.deltaSize=0:(C$99t=C$99e.endSize+C$99e.endSizeVar*(Math.random()-.5)*2,C$99t=Math.max(0,C$99t),C$99n.deltaSize=(C$99t-C$99o)/C$99r),C$99e.startSpin+C$99e.startSpinVar*(Math.random()-.5)*2),C$99u=C$99e.endSpin+C$99e.endSpinVar*(Math.random()-.5)*2,C$99i=(C$99n.rotation=C$99l,C$99n.deltaRotation=(C$99u-C$99l)/C$99r,C$99n.startPos.x=C$99h.x,C$99n.startPos.y=C$99h.y,C$99n.aspectRatio=C$99e._aspectRatio||1,function(C$99t){var C$99e=0,C$99i=C$99t;for(;C$99i;)C$99e+=C$99i.angle,C$99i=C$99i.parent;return C$99e}(C$99e.node)),C$99a=C$99e.positionType===cc.ParticleSystem.PositionType.FREE?C$99e.angle+C$99i:C$99e.angle,C$99c=C$99y.degreesToRadians(C$99a+C$99e.angleVar*(Math.random()-.5)*2);C$99e.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY?(C$99s=C$99e.speed+C$99e.speedVar*(Math.random()-.5)*2,C$99n.dir.x=Math.cos(C$99c),C$99n.dir.y=Math.sin(C$99c),C$99n.dir.mulSelf(C$99s),C$99n.radialAccel=C$99e.radialAccel+C$99e.radialAccelVar*(Math.random()-.5)*2,C$99n.tangentialAccel=C$99e.tangentialAccel+C$99e.tangentialAccelVar*(Math.random()-.5)*2,C$99e.rotationIsDir&&(C$99n.rotation=-C$99y.radiansToDegrees(Math.atan2(C$99n.dir.y,C$99n.dir.x)))):(C$99t=C$99e.startRadius+C$99e.startRadiusVar*(Math.random()-.5)*2,C$99o=C$99e.endRadius+C$99e.endRadiusVar*(Math.random()-.5)*2,C$99n.radius=C$99t,C$99n.deltaRadius=C$99e.endRadius===cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS?0:(C$99o-C$99t)/C$99r,C$99n.angle=C$99c,C$99n.degreesPerSecond=C$99y.degreesToRadians(C$99e.rotatePerS+C$99e.rotatePerSVar*(Math.random()-.5)*2))},C$99t.prototype.updateUVs=function(C$99t){var C$99e=this.sys._assembler;if(C$99e){var C$99i=C$99e.getBuffer();if(C$99i&&this.sys._renderSpriteFrame){for(var C$99n=4*C$99e._vfmt._bytes/4,C$99r=C$99i._vData,C$99s=this.sys._renderSpriteFrame.uv,C$99e=C$99t?0:this._uvFilled,C$99o=this.particles.length,C$99a=C$99e;C$99a<C$99o;C$99a++){var C$99c=C$99a*C$99n;C$99r[2+C$99c]=C$99s[0],C$99r[3+C$99c]=C$99s[1],C$99r[7+C$99c]=C$99s[2],C$99r[8+C$99c]=C$99s[3],C$99r[12+C$99c]=C$99s[4],C$99r[13+C$99c]=C$99s[5],C$99r[17+C$99c]=C$99s[6],C$99r[18+C$99c]=C$99s[7]}this._uvFilled=C$99o}}},C$99t.prototype.updateParticleBuffer=function(C$99t,C$99e,C$99h,C$99i){var C$99u,C$99_,C$99d,C$99n,C$99r,C$99s=C$99h._vData,C$99h=C$99h._uintVData,C$99o=C$99e.x,C$99e=C$99e.y,C$99a=C$99t.size,C$99c=C$99a,C$99l=C$99t.aspectRatio,C$99l=(1<C$99l?C$99c=C$99a/C$99l:C$99a=C$99c*C$99l,C$99a/2),C$99a=C$99c/2;C$99t.rotation?(C$99c=-C$99l,C$99u=-C$99a,C$99_=C$99l,C$99d=C$99a,C$99r=-C$99y.degreesToRadians(C$99t.rotation),C$99n=Math.cos(C$99r),C$99r=Math.sin(C$99r),C$99s[C$99i]=C$99c*C$99n-C$99u*C$99r+C$99o,C$99s[C$99i+1]=C$99c*C$99r+C$99u*C$99n+C$99e,C$99s[C$99i+5]=C$99_*C$99n-C$99u*C$99r+C$99o,C$99s[C$99i+6]=C$99_*C$99r+C$99u*C$99n+C$99e,C$99s[C$99i+10]=C$99c*C$99n-C$99d*C$99r+C$99o,C$99s[C$99i+11]=C$99c*C$99r+C$99d*C$99n+C$99e,C$99s[C$99i+15]=C$99_*C$99n-C$99d*C$99r+C$99o,C$99s[C$99i+16]=C$99_*C$99r+C$99d*C$99n+C$99e):(C$99s[C$99i]=C$99o-C$99l,C$99s[C$99i+1]=C$99e-C$99a,C$99s[C$99i+5]=C$99o+C$99l,C$99s[C$99i+6]=C$99e-C$99a,C$99s[C$99i+10]=C$99o-C$99l,C$99s[C$99i+11]=C$99e+C$99a,C$99s[C$99i+15]=C$99o+C$99l,C$99s[C$99i+16]=C$99e+C$99a),C$99h[C$99i+4]=C$99t.color._val,C$99h[C$99i+9]=C$99t.color._val,C$99h[C$99i+14]=C$99t.color._val,C$99h[C$99i+19]=C$99t.color._val},C$99t.prototype.step=function(C$99t){C$99t=C$99t>cc.director._maxParticleDeltaTime?cc.director._maxParticleDeltaTime:C$99t;var C$99h,C$99e=this.sys,C$99u=C$99e.node,C$99i=this.particles,C$99_=4*this.sys._assembler._vfmt._bytes/4,C$99d=(C$99u._updateWorldMatrix(),C$99v=C$99m.identity(),C$99e.positionType===cc.ParticleSystem.PositionType.FREE?(C$99n=C$99u._worldMatrix.m,C$99v.tx=C$99n[12],C$99v.ty=C$99n[13],C$99m.transformVec2(C$99x,C$99g,C$99v)):C$99e.positionType===cc.ParticleSystem.PositionType.RELATIVE&&(C$99n=C$99y.degreesToRadians(-C$99u.angle),C$99h=Math.cos(C$99n),C$99n=Math.sin(C$99n),C$99v=C$99m.create(C$99h,-C$99n,C$99n,C$99h,0,0),C$99x.x=C$99u.x,C$99x.y=C$99u.y),C$99m.invert(C$99v,C$99v),C$99v);if(this.active&&C$99e.emissionRate){var C$99f=1/C$99e.emissionRate;for(C$99i.length<C$99e.totalParticles&&(this.emitCounter+=C$99t);C$99i.length<C$99e.totalParticles&&this.emitCounter>C$99f;)this.emitParticle(C$99x),this.emitCounter-=C$99f;this.elapsed+=C$99t,-1!==C$99e.duration&&C$99e.duration<this.elapsed&&C$99e.stopSystem()}for(var C$99p=C$99e._assembler.getBuffer(),C$99n=C$99i.length,C$99r=(C$99p.reset(),C$99p.request(4*C$99n,6*C$99n),C$99n>this._uvFilled&&this.updateUVs(),0);C$99r<C$99i.length;){C$99b.x=C$99b.y=C$99A.x=C$99A.y=C$99C.x=C$99C.y=0;var C$99s,C$99o,C$99a,C$99c,C$99l=C$99i[C$99r];C$99l.timeToLive-=C$99t,0<C$99l.timeToLive?(C$99e.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY?(C$99c=C$99C,C$99o=C$99b,C$99a=C$99A,(C$99l.pos.x||C$99l.pos.y)&&(C$99o.set(C$99l.pos),C$99o.normalizeSelf()),C$99a.set(C$99o),C$99o.mulSelf(C$99l.radialAccel),C$99s=C$99a.x,C$99a.x=-C$99a.y,C$99a.y=C$99s,C$99a.mulSelf(C$99l.tangentialAccel),C$99c.set(C$99o),C$99c.addSelf(C$99a),C$99c.addSelf(C$99e.gravity),C$99c.mulSelf(C$99t),C$99l.dir.addSelf(C$99c),C$99c.set(C$99l.dir),C$99c.mulSelf(C$99t),C$99l.pos.addSelf(C$99c)):(C$99l.angle+=C$99l.degreesPerSecond*C$99t,C$99l.radius+=C$99l.deltaRadius*C$99t,C$99l.pos.x=-Math.cos(C$99l.angle)*C$99l.radius,C$99l.pos.y=-Math.sin(C$99l.angle)*C$99l.radius),C$99l.color.r+=C$99l.deltaColor.r*C$99t,C$99l.color.g+=C$99l.deltaColor.g*C$99t,C$99l.color.b+=C$99l.deltaColor.b*C$99t,C$99l.color.a+=C$99l.deltaColor.a*C$99t,C$99l.size+=C$99l.deltaSize*C$99t,C$99l.size<0&&(C$99l.size=0),C$99l.rotation+=C$99l.deltaRotation*C$99t,C$99s=C$99b,C$99o=C$99A,C$99e.positionType===cc.ParticleSystem.PositionType.FREE?(C$99o.set(C$99l.startPos),C$99o.negSelf(),C$99s.set(C$99l.pos),C$99s.subSelf(C$99o)):C$99e.positionType===cc.ParticleSystem.PositionType.RELATIVE?(C$99a=C$99C,C$99m.transformVec2(C$99o,C$99x,C$99d),C$99m.transformVec2(C$99a,C$99l.startPos,C$99d),C$99o.subSelf(C$99a),C$99s.set(C$99l.pos),C$99s.subSelf(C$99o)):C$99s.set(C$99l.pos),this.updateParticleBuffer(C$99l,C$99s,C$99p,C$99_*C$99r),++C$99r):(C$99c=C$99i[C$99r],C$99r!==C$99i.length-1&&(C$99i[C$99r]=C$99i[C$99i.length-1]),C$99S.put(C$99c),C$99i.length--)}0<C$99i.length?(C$99p.uploadData(),C$99e._assembler._ia._count=6*C$99i.length):this.active||this.readyToPlay||(this.finished=!0,C$99e._finishedSimulation())},C$99i.exports=C$99t},{"../core/platform/js":209,"../core/utils/affine-transform":254,"../core/utils/misc":264}],299:[function(C$99t,C$99e,C$99h){"use strict";var C$99i=C$99r(C$99t("../core/renderer/assembler")),C$99n=C$99r(C$99t("../renderer/core/input-assembler"));function C$99r(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99u(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99o,C$99a,C$99_=C$99t("./CCParticleSystem"),C$99d=C$99t("../core/renderer/"),C$99f=C$99t("../core/renderer/webgl/quad-buffer"),C$99c=C$99t("../core/renderer/webgl/vertex-format").vfmtPosUvColor,C$99t=(C$99o=C$99i.default,C$99t=C$99o,(C$99a=C$99l).prototype=Object.create(C$99t.prototype),(C$99a.prototype.constructor=C$99a).__proto__=C$99t,C$99u(C$99l),(C$99a=C$99l.prototype).getBuffer=function(){return this._buffer||(this._buffer=new C$99f(C$99d._handle,C$99c),this._ia=new C$99n.default,this._ia._vertexBuffer=this._buffer._vb,this._ia._indexBuffer=this._buffer._ib,this._ia._start=0,this._ia._count=0),this._buffer},C$99a.fillBuffers=function(C$99t,C$99e){this._ia&&(C$99e.node=C$99t.node,C$99e.material=C$99t._materials[0],C$99e._flushIA(this._ia))},C$99l);function C$99l(C$99t){C$99t=C$99o.call(this,C$99t)||this;return C$99t._buffer=null,C$99t._ia=null,C$99t._vfmt=C$99c,C$99t}C$99i.default.register(C$99_,C$99t),C$99e.exports=C$99t},{"../core/renderer/":220,"../core/renderer/assembler":217,"../core/renderer/webgl/quad-buffer":249,"../core/renderer/webgl/vertex-format":252,"../renderer/core/input-assembler":302,"./CCParticleSystem":295}],300:[function(C$99h,C$99u,C$99_){"use strict";var C$99e,C$99i,C$99d=512,C$99f=513,C$99p=514,C$99m=515,C$99y=516,C$99g=517,C$99v=518,C$99x=519,C$99b=32774,C$99A=32778,C$99C=32779,C$99S=0,C$99T=1,C$99w=768,C$99E=769,C$99M=774,C$99I=775,C$99B=770,C$99R=771,C$99P=772,C$99D=773,C$99L=32769,C$99V=32770,C$99O=32771,C$99F=32772,C$99N=776,C$99k=7680,C$99G=7681,C$99z=7682,C$99U=34055,C$99W=7683,C$99H=34056,C$99j=5386,C$99X=0,C$99Y=1028,C$99q=1029;(C$99a=C$99e=C$99e||{})[C$99a.UNKNOWN=0]="UNKNOWN",C$99a[C$99a.BUFFER=1]="BUFFER",C$99a[C$99a.TEXTURE=2]="TEXTURE",C$99a[C$99a.TEXTURE_VIEW=3]="TEXTURE_VIEW",C$99a[C$99a.RENDER_PASS=4]="RENDER_PASS",C$99a[C$99a.FRAMEBUFFER=5]="FRAMEBUFFER",C$99a[C$99a.SAMPLER=6]="SAMPLER",C$99a[C$99a.SHADER=7]="SHADER",C$99a[C$99a.PIPELINE_LAYOUT=8]="PIPELINE_LAYOUT",C$99a[C$99a.PIPELINE_STATE=9]="PIPELINE_STATE",C$99a[C$99a.BINDING_LAYOUT=10]="BINDING_LAYOUT",C$99a[C$99a.INPUT_ASSEMBLER=11]="INPUT_ASSEMBLER",C$99a[C$99a.COMMAND_ALLOCATOR=12]="COMMAND_ALLOCATOR",C$99a[C$99a.COMMAND_BUFFER=13]="COMMAND_BUFFER",C$99a[C$99a.QUEUE=14]="QUEUE",C$99a[C$99a.WINDOW=15]="WINDOW",(C$99a=C$99i=C$99i||{})[C$99a.UNREADY=0]="UNREADY",C$99a[C$99a.FAILED=1]="FAILED",C$99a[C$99a.SUCCESS=2]="SUCCESS";var C$99n,C$99t,C$99r;Object.defineProperty(C$99J.prototype,"gfxType",{get:function(){return this._gfxType},enumerable:!0,configurable:!0}),Object.defineProperty(C$99J.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});function C$99J(C$99t){this._gfxType=C$99e.UNKNOWN,this._status=C$99i.UNREADY,this._gfxType=C$99t}(C$99a=C$99n=C$99n||{})[C$99a.UNKNOWN=0]="UNKNOWN",C$99a[C$99a.BOOL=1]="BOOL",C$99a[C$99a.BOOL2=2]="BOOL2",C$99a[C$99a.BOOL3=3]="BOOL3",C$99a[C$99a.BOOL4=4]="BOOL4",C$99a[C$99a.INT=5]="INT",C$99a[C$99a.INT2=6]="INT2",C$99a[C$99a.INT3=7]="INT3",C$99a[C$99a.INT4=8]="INT4",C$99a[C$99a.UINT=9]="UINT",C$99a[C$99a.UINT2=10]="UINT2",C$99a[C$99a.UINT3=11]="UINT3",C$99a[C$99a.UINT4=12]="UINT4",C$99a[C$99a.FLOAT=13]="FLOAT",C$99a[C$99a.FLOAT2=14]="FLOAT2",C$99a[C$99a.FLOAT3=15]="FLOAT3",C$99a[C$99a.FLOAT4=16]="FLOAT4",C$99a[C$99a.COLOR4=17]="COLOR4",C$99a[C$99a.MAT2=18]="MAT2",C$99a[C$99a.MAT2X3=19]="MAT2X3",C$99a[C$99a.MAT2X4=20]="MAT2X4",C$99a[C$99a.MAT3X2=21]="MAT3X2",C$99a[C$99a.MAT3=22]="MAT3",C$99a[C$99a.MAT3X4=23]="MAT3X4",C$99a[C$99a.MAT4X2=24]="MAT4X2",C$99a[C$99a.MAT4X3=25]="MAT4X3",C$99a[C$99a.MAT4=26]="MAT4",C$99a[C$99a.SAMPLER1D=27]="SAMPLER1D",C$99a[C$99a.SAMPLER1D_ARRAY=28]="SAMPLER1D_ARRAY",C$99a[C$99a.SAMPLER2D=29]="SAMPLER2D",C$99a[C$99a.SAMPLER2D_ARRAY=30]="SAMPLER2D_ARRAY",C$99a[C$99a.SAMPLER3D=31]="SAMPLER3D",C$99a[C$99a.SAMPLER_CUBE=32]="SAMPLER_CUBE",C$99a[C$99a.COUNT=33]="COUNT",(C$99a=C$99c=C$99c||{})[C$99a.UNKNOWN=0]="UNKNOWN",C$99a[C$99a.A8=1]="A8",C$99a[C$99a.L8=2]="L8",C$99a[C$99a.LA8=3]="LA8",C$99a[C$99a.R8=4]="R8",C$99a[C$99a.R8SN=5]="R8SN",C$99a[C$99a.R8UI=6]="R8UI",C$99a[C$99a.R8I=7]="R8I",C$99a[C$99a.R16F=8]="R16F",C$99a[C$99a.R16UI=9]="R16UI",C$99a[C$99a.R16I=10]="R16I",C$99a[C$99a.R32F=11]="R32F",C$99a[C$99a.R32UI=12]="R32UI",C$99a[C$99a.R32I=13]="R32I",C$99a[C$99a.RG8=14]="RG8",C$99a[C$99a.RG8SN=15]="RG8SN",C$99a[C$99a.RG8UI=16]="RG8UI",C$99a[C$99a.RG8I=17]="RG8I",C$99a[C$99a.RG16F=18]="RG16F",C$99a[C$99a.RG16UI=19]="RG16UI",C$99a[C$99a.RG16I=20]="RG16I",C$99a[C$99a.RG32F=21]="RG32F",C$99a[C$99a.RG32UI=22]="RG32UI",C$99a[C$99a.RG32I=23]="RG32I",C$99a[C$99a.RGB8=24]="RGB8",C$99a[C$99a.SRGB8=25]="SRGB8",C$99a[C$99a.RGB8SN=26]="RGB8SN",C$99a[C$99a.RGB8UI=27]="RGB8UI",C$99a[C$99a.RGB8I=28]="RGB8I",C$99a[C$99a.RGB16F=29]="RGB16F",C$99a[C$99a.RGB16UI=30]="RGB16UI",C$99a[C$99a.RGB16I=31]="RGB16I",C$99a[C$99a.RGB32F=32]="RGB32F",C$99a[C$99a.RGB32UI=33]="RGB32UI",C$99a[C$99a.RGB32I=34]="RGB32I",C$99a[C$99a.RGBA8=35]="RGBA8",C$99a[C$99a.SRGB8_A8=36]="SRGB8_A8",C$99a[C$99a.RGBA8SN=37]="RGBA8SN",C$99a[C$99a.RGBA8UI=38]="RGBA8UI",C$99a[C$99a.RGBA8I=39]="RGBA8I",C$99a[C$99a.RGBA16F=40]="RGBA16F",C$99a[C$99a.RGBA16UI=41]="RGBA16UI",C$99a[C$99a.RGBA16I=42]="RGBA16I",C$99a[C$99a.RGBA32F=43]="RGBA32F",C$99a[C$99a.RGBA32UI=44]="RGBA32UI",C$99a[C$99a.RGBA32I=45]="RGBA32I",C$99a[C$99a.R5G6B5=46]="R5G6B5",C$99a[C$99a.R11G11B10F=47]="R11G11B10F",C$99a[C$99a.RGB5A1=48]="RGB5A1",C$99a[C$99a.RGBA4=49]="RGBA4",C$99a[C$99a.RGB10A2=50]="RGB10A2",C$99a[C$99a.RGB10A2UI=51]="RGB10A2UI",C$99a[C$99a.RGB9E5=52]="RGB9E5",C$99a[C$99a.D16=53]="D16",C$99a[C$99a.D16S8=54]="D16S8",C$99a[C$99a.D24=55]="D24",C$99a[C$99a.D24S8=56]="D24S8",C$99a[C$99a.D32F=57]="D32F",C$99a[C$99a.D32F_S8=58]="D32F_S8",C$99a[C$99a.BC1=59]="BC1",C$99a[C$99a.BC1_ALPHA=60]="BC1_ALPHA",C$99a[C$99a.BC1_SRGB=61]="BC1_SRGB",C$99a[C$99a.BC1_SRGB_ALPHA=62]="BC1_SRGB_ALPHA",C$99a[C$99a.BC2=63]="BC2",C$99a[C$99a.BC2_SRGB=64]="BC2_SRGB",C$99a[C$99a.BC3=65]="BC3",C$99a[C$99a.BC3_SRGB=66]="BC3_SRGB",C$99a[C$99a.BC4=67]="BC4",C$99a[C$99a.BC4_SNORM=68]="BC4_SNORM",C$99a[C$99a.BC5=69]="BC5",C$99a[C$99a.BC5_SNORM=70]="BC5_SNORM",C$99a[C$99a.BC6H_UF16=71]="BC6H_UF16",C$99a[C$99a.BC6H_SF16=72]="BC6H_SF16",C$99a[C$99a.BC7=73]="BC7",C$99a[C$99a.BC7_SRGB=74]="BC7_SRGB",C$99a[C$99a.ETC_RGB8=75]="ETC_RGB8",C$99a[C$99a.ETC2_RGB8=76]="ETC2_RGB8",C$99a[C$99a.ETC2_SRGB8=77]="ETC2_SRGB8",C$99a[C$99a.ETC2_RGB8_A1=78]="ETC2_RGB8_A1",C$99a[C$99a.ETC2_SRGB8_A1=79]="ETC2_SRGB8_A1",C$99a[C$99a.ETC2_RGBA8=80]="ETC2_RGBA8",C$99a[C$99a.ETC2_SRGB8_A8=81]="ETC2_SRGB8_A8",C$99a[C$99a.EAC_R11=82]="EAC_R11",C$99a[C$99a.EAC_R11SN=83]="EAC_R11SN",C$99a[C$99a.EAC_RG11=84]="EAC_RG11",C$99a[C$99a.EAC_RG11SN=85]="EAC_RG11SN",C$99a[C$99a.PVRTC_RGB2=86]="PVRTC_RGB2",C$99a[C$99a.PVRTC_RGBA2=87]="PVRTC_RGBA2",C$99a[C$99a.PVRTC_RGB4=88]="PVRTC_RGB4",C$99a[C$99a.PVRTC_RGBA4=89]="PVRTC_RGBA4",C$99a[C$99a.PVRTC2_2BPP=90]="PVRTC2_2BPP",C$99a[C$99a.PVRTC2_4BPP=91]="PVRTC2_4BPP",C$99t=C$99t||{},C$99t[C$99t.DEFAULT=100]="DEFAULT",(C$99a=C$99r=C$99r||{})[C$99a.MIN=0]="MIN",C$99a[C$99a.MAX=255]="MAX",C$99a[C$99a.DEFAULT=128]="DEFAULT";(C$99a=C$99s=C$99s||{})[C$99a.UBO_GLOBAL=23]="UBO_GLOBAL",C$99a[C$99a.UBO_SHADOW=22]="UBO_SHADOW",C$99a[C$99a.UBO_LOCAL=21]="UBO_LOCAL",C$99a[C$99a.UBO_FORWARD_LIGHTS=20]="UBO_FORWARD_LIGHTS",C$99a[C$99a.UBO_SKINNING=19]="UBO_SKINNING",C$99a[C$99a.UBO_SKINNING_TEXTURE=18]="UBO_SKINNING_TEXTURE",C$99a[C$99a.UBO_UI=17]="UBO_UI",C$99a[C$99a.SAMPLER_JOINTS=25]="SAMPLER_JOINTS",C$99a[C$99a.SAMPLER_ENVIRONMENT=26]="SAMPLER_ENVIRONMENT",C$99a[C$99a.CUSTUM_UBO_BINDING_END_POINT=17]="CUSTUM_UBO_BINDING_END_POINT",C$99a[C$99a.CUSTOM_SAMPLER_BINDING_START_POINT=30]="CUSTOM_SAMPLER_BINDING_START_POINT",(C$99a=C$99Z=C$99Z||{})[C$99a.minFilter=0]="minFilter",C$99a[C$99a.magFilter=1]="magFilter",C$99a[C$99a.mipFilter=2]="mipFilter",C$99a[C$99a.addressU=3]="addressU",C$99a[C$99a.addressV=4]="addressV",C$99a[C$99a.addressW=5]="addressW",C$99a[C$99a.maxAnisotropy=6]="maxAnisotropy",C$99a[C$99a.cmpFunc=7]="cmpFunc",C$99a[C$99a.minLOD=8]="minLOD",C$99a[C$99a.maxLOD=9]="maxLOD",C$99a[C$99a.mipLODBias=10]="mipLODBias",C$99a[C$99a.borderColor=11]="borderColor",C$99a[C$99a.total=15]="total";var C$99s,C$99Z,C$99o,C$99a={},C$99c=(C$99a[C$99a.bool=C$99n.BOOL]="bool",C$99a[C$99a.int=C$99n.INT]="int",C$99a[C$99a.ivec2=C$99n.INT2]="ivec2invTypeParams",C$99a[C$99a.ivec3=C$99n.INT3]="ivec3",C$99a[C$99a.ivec4=C$99n.INT4]="ivec4",C$99a[C$99a.float=C$99n.FLOAT]="float",C$99a[C$99a.vec2=C$99n.FLOAT2]="vec2",C$99a[C$99a.vec3=C$99n.FLOAT3]="vec3",C$99a[C$99a.vec4=C$99n.FLOAT4]="vec4",C$99a[C$99a.mat2=C$99n.MAT2]="mat2",C$99a[C$99a.mat3=C$99n.MAT3]="mat3",C$99a[C$99a.mat4=C$99n.MAT4]="mat4",C$99a[C$99a.sampler2D=C$99n.SAMPLER2D]="sampler2D",C$99a[C$99a.samplerCube=C$99n.SAMPLER_CUBE]="samplerCube",(C$99o={})[C$99n.BOOL]=4,C$99o[C$99n.INT]=4,C$99o[C$99n.INT2]=8,C$99o[C$99n.INT3]=12,C$99o[C$99n.INT4]=16,C$99o[C$99n.FLOAT]=4,C$99o[C$99n.FLOAT2]=8,C$99o[C$99n.FLOAT3]=12,C$99o[C$99n.FLOAT4]=16,C$99o[C$99n.MAT2]=16,C$99o[C$99n.MAT3]=36,C$99o[C$99n.MAT4]=64,C$99o[C$99n.SAMPLER2D]=4,C$99o[C$99n.SAMPLER_CUBE]=4,(C$99l={})[C$99n.BOOL]=C$99c.R32I,C$99l[C$99n.INT]=C$99c.R32I,C$99l[C$99n.INT2]=C$99c.RG32I,C$99l[C$99n.INT3]=C$99c.RGB32I,C$99l[C$99n.INT4]=C$99c.RGBA32I,C$99l[C$99n.FLOAT]=C$99c.R32F,C$99l[C$99n.FLOAT2]=C$99c.RG32F,C$99l[C$99n.FLOAT3]=C$99c.RGB32F,C$99l[C$99n.FLOAT4]=C$99c.RGBA32F,C$99l),C$99l={BACK:C$99q,FRONT:C$99Y,NONE:C$99X,ADD:C$99b,SUB:C$99A,REV_SUB:C$99C,ZERO:C$99S,ONE:C$99T,SRC_COLOR:C$99w,ONE_MINUS_SRC_COLOR:C$99E,DST_COLOR:C$99M,ONE_MINUS_DST_COLOR:C$99I,SRC_ALPHA:C$99B,ONE_MINUS_SRC_ALPHA:C$99R,DST_ALPHA:C$99P,ONE_MINUS_DST_ALPHA:C$99D,CONSTANT_COLOR:C$99L,ONE_MINUS_CONSTANT_COLOR:C$99V,CONSTANT_ALPHA:C$99O,ONE_MINUS_CONSTANT_ALPHA:C$99F,SRC_ALPHA_SATURATE:C$99N,NEVER:C$99d,LESS:C$99f,EQUAL:C$99p,LEQUAL:C$99m,GREATER:C$99y,NOTEQUAL:C$99g,GEQUAL:C$99v,ALWAYS:C$99x,KEEP:C$99k,REPLACE:C$99G,INCR:C$99z,INCR_WRAP:C$99U,DECR:C$99W,DECR_WRAP:C$99H,INVERT:C$99j};Object.assign(C$99l,C$99t);C$99u.exports={murmurhash2_32_gc:function(C$99t,C$99e){for(var C$99i,C$99n=C$99t.length,C$99r=C$99e^C$99n,C$99s=0;4<=C$99n;)C$99i=1540483477*(65535&(C$99i=255&C$99t.charCodeAt(C$99s)|(255&C$99t.charCodeAt(++C$99s))<<8|(255&C$99t.charCodeAt(++C$99s))<<16|(255&C$99t.charCodeAt(++C$99s))<<24))+((1540483477*(C$99i>>>16)&65535)<<16),C$99r=1540483477*(65535&C$99r)+((1540483477*(C$99r>>>16)&65535)<<16)^1540483477*(65535&(C$99i^=C$99i>>>24))+((1540483477*(C$99i>>>16)&65535)<<16),C$99n-=4,++C$99s;switch(C$99n){case 3:C$99r^=(255&C$99t.charCodeAt(C$99s+2))<<16;case 2:C$99r^=(255&C$99t.charCodeAt(C$99s+1))<<8;case 1:C$99r=1540483477*(65535&(C$99r^=255&C$99t.charCodeAt(C$99s)))+((1540483477*(C$99r>>>16)&65535)<<16)}return C$99r=1540483477*(65535&(C$99r^=C$99r>>>13))+((1540483477*(C$99r>>>16)&65535)<<16),(C$99r^=C$99r>>>15)>>>0},SamplerInfoIndex:C$99Z,effectStructure:{$techniques:[{$passes:[{depthStencilState:{},rasterizerState:{},blendState:{targets:[{}]},properties:{any:{sampler:{},inspector:{}}}}]}]},typeMap:C$99a,sizeMap:C$99o,formatMap:C$99c,passParams:C$99l,RenderQueue:{OPAQUE:0,TRANSPARENT:1,OVERLAY:2},RenderPriority:C$99r,GFXGetTypeSize:function(C$99t){switch(C$99t){case C$99n.BOOL:case C$99n.INT:case C$99n.UINT:case C$99n.FLOAT:return 4;case C$99n.BOOL2:case C$99n.INT2:case C$99n.UINT2:case C$99n.FLOAT2:return 8;case C$99n.BOOL3:case C$99n.INT3:case C$99n.UINT3:case C$99n.FLOAT3:return 12;case C$99n.BOOL4:case C$99n.INT4:case C$99n.UINT4:case C$99n.FLOAT4:case C$99n.MAT2:return 16;case C$99n.MAT2X3:return 24;case C$99n.MAT2X4:return 32;case C$99n.MAT3X2:return 24;case C$99n.MAT3:return 36;case C$99n.MAT3X4:return 48;case C$99n.MAT4X2:case C$99n.MAT4X2:return 32;case C$99n.MAT4:return 64;case C$99n.SAMPLER1D:case C$99n.SAMPLER1D_ARRAY:case C$99n.SAMPLER2D:case C$99n.SAMPLER2D_ARRAY:case C$99n.SAMPLER3D:case C$99n.SAMPLER_CUBE:return 4;default:return 0}},UniformBinding:C$99s}},{}],301:[function(C$99t,C$99r,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99i=C$99t("../memop"),C$99y=C$99n(C$99t("../enums")),C$99g=C$99t("../../core/value-types"),C$99s=C$99n(C$99t("./program-lib")),C$99o=C$99n(C$99t("./view")),C$99A=C$99n(C$99t("../gfx"));function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}var C$99m=new C$99g.Mat4,C$99v=new C$99i.RecyclePool(function(){return{stage:null,items:null}},8),C$99C=new C$99i.RecyclePool(function(){return new Float32Array(2)},8),C$99S=new C$99i.RecyclePool(function(){return new Float32Array(3)},8),C$99T=new C$99i.RecyclePool(function(){return new Float32Array(4)},8),C$99w=new C$99i.RecyclePool(function(){return new Float32Array(9)},8),C$99x=new C$99i.RecyclePool(function(){return new Float32Array(16)},8),C$99E=new C$99i.RecyclePool(function(){return new Float32Array(64)},8),C$99M=new C$99i.RecyclePool(function(){return new Int32Array(2)},8),C$99I=new C$99i.RecyclePool(function(){return new Int32Array(3)},8),C$99B=new C$99i.RecyclePool(function(){return new Int32Array(4)},8),C$99b=new C$99i.RecyclePool(function(){return new Int32Array(64)},8);function C$99a(C$99t,C$99e){this._device=C$99t,this._programLib=new C$99s.default(C$99t),this._opts=C$99e,this._type2defaultValue=((C$99t={})[C$99y.default.PARAM_INT]=0,C$99t[C$99y.default.PARAM_INT2]=new C$99g.Vec2(0,0),C$99t[C$99y.default.PARAM_INT3]=new C$99g.Vec3(0,0,0),C$99t[C$99y.default.PARAM_INT4]=new C$99g.Vec4(0,0,0,0),C$99t[C$99y.default.PARAM_FLOAT]=0,C$99t[C$99y.default.PARAM_FLOAT2]=new C$99g.Vec2(0,0),C$99t[C$99y.default.PARAM_FLOAT3]=new C$99g.Vec3(0,0,0),C$99t[C$99y.default.PARAM_FLOAT4]=new C$99g.Vec4(0,0,0,0),C$99t[C$99y.default.PARAM_COLOR4]=new C$99g.Color(0,0,0,1),C$99t[C$99y.default.PARAM_MAT3]=new C$99g.Mat3,C$99t[C$99y.default.PARAM_MAT4]=new C$99g.Mat4,C$99t[C$99y.default.PARAM_TEXTURE_2D]=C$99e.defaultTexture,C$99t[C$99y.default.PARAM_TEXTURE_CUBE]=C$99e.defaultTextureCube,C$99t),this._stage2fn={},this._usedTextureUnits=0,this._viewPools=new C$99i.RecyclePool(function(){return new C$99o.default},8),this._drawItemsPools=new C$99i.RecyclePool(function(){return{model:null,node:null,ia:null,effect:null,defines:null,uniforms:null}},100),this._stageItemsPools=new C$99i.RecyclePool(function(){return new C$99i.RecyclePool(function(){return{model:null,node:null,ia:null,effect:null,defines:null,passes:[],sortKey:-1,uniforms:null}},100)},16)}(C$99t=C$99a.prototype)._resetTextuerUnit=function(){this._usedTextureUnits=0},C$99t._allocTextureUnit=function(){var C$99t=this._device,C$99e=this._usedTextureUnits;return C$99e>=C$99t._caps.maxTextureUnits&&console.warn("Trying to use "+C$99e+" texture units while this GPU supports only "+C$99t._caps.maxTextureUnits),this._usedTextureUnits+=1,C$99e},C$99t._registerStage=function(C$99t,C$99e){this._stage2fn[C$99t]=C$99e},C$99t.clear=function(){this._programLib.clear(),this.reset()},C$99t.reset=function(){this._viewPools.reset(),this._stageItemsPools.reset()},C$99t._requestView=function(){return this._viewPools.add()},C$99t._render=function(C$99t,C$99h){var C$99e=this._device,C$99i=(C$99e.setFrameBuffer(C$99t._framebuffer),C$99e.setViewport(C$99t._rect.x,C$99t._rect.y,C$99t._rect.w,C$99t._rect.h),{});C$99t._clearFlags&C$99y.default.CLEAR_COLOR&&(C$99i.color=C$99g.Vec4.toArray([],C$99t._color)),C$99t._clearFlags&C$99y.default.CLEAR_DEPTH&&(C$99i.depth=C$99t._depth),C$99t._clearFlags&C$99y.default.CLEAR_STENCIL&&(C$99i.stencil=C$99t._stencil),C$99e.clear(C$99i),this._drawItemsPools.reset();for(var C$99n=0;C$99n<C$99h._models.length;++C$99n){var C$99u,C$99_=C$99h._models.data[C$99n];0!=(C$99_._cullingMask&C$99t._cullingMask)&&(C$99u=this._drawItemsPools.add(),C$99_.extractDrawItem(C$99u))}C$99v.reset();for(var C$99r=0;C$99r<C$99t._stages.length;++C$99r){var C$99d=C$99t._stages[C$99r],C$99s=this._stageItemsPools.add();C$99s.reset();for(var C$99o=0;C$99o<this._drawItemsPools.length;++C$99o){var C$99a,C$99c=this._drawItemsPools.data[C$99o],C$99l=C$99c.effect.stagePasses[C$99d];C$99l&&0!==C$99l.length&&((C$99a=C$99s.add()).passes=C$99l,C$99a.model=C$99c.model,C$99a.node=C$99c.node,C$99a.ia=C$99c.ia,C$99a.effect=C$99c.effect,C$99a.defines=C$99c.defines,C$99a.sortKey=-1,C$99a.uniforms=C$99c.uniforms)}var C$99f=C$99v.add();C$99f.stage=C$99d,C$99f.items=C$99s}for(var C$99p=0;C$99p<C$99v.length;++C$99p){var C$99m=C$99v.data[C$99p];(0,this._stage2fn[C$99m.stage])(C$99t,C$99m.items)}},C$99t._setProperty=function(C$99t){var C$99e=this._device,C$99i=C$99t.value;if(void 0!==(C$99i=void 0===(C$99i=void 0===C$99i?C$99t.val:C$99i)?this._type2defaultValue[C$99t.type]:C$99i))if(C$99t.type===C$99y.default.PARAM_TEXTURE_2D||C$99t.type===C$99y.default.PARAM_TEXTURE_CUBE)if(Array.isArray(C$99i))if(C$99i.length>C$99t.count)console.error("Failed to set property ["+C$99t.name+"] : The length of texture array ["+C$99i.length+"] is bigger than ["+C$99t.count+"].");else{for(var C$99n=C$99b.add(),C$99r=0;C$99r<C$99i.length;++C$99r)C$99n[C$99r]=this._allocTextureUnit();C$99e.setTextureArray(C$99t.name,C$99i,C$99n)}else C$99e.setTexture(C$99t.name,C$99i,this._allocTextureUnit());else C$99t.directly?C$99e.setUniformDirectly(C$99t.name,C$99i):C$99e.setUniform(C$99t.name,C$99i);else console.warn("Failed to set technique property "+C$99t.name+", value not found.")},C$99t._draw=function(C$99t){for(var C$99e=this._device,C$99h=this._programLib,C$99u=C$99t.node,C$99i=C$99t.ia,C$99n=C$99t.passes,C$99_=C$99t.effect,C$99r=(C$99C.reset(),C$99S.reset(),C$99T.reset(),C$99w.reset(),C$99x.reset(),C$99E.reset(),C$99M.reset(),C$99I.reset(),C$99B.reset(),C$99b.reset(),C$99u.getWorldMatrix(C$99m),C$99e.setUniform("cc_matWorld",C$99g.Mat4.toArray(C$99x.add(),C$99m)),C$99g.Mat4.invert(C$99m,C$99m),C$99g.Mat4.transpose(C$99m,C$99m),C$99e.setUniform("cc_matWorldIT",C$99g.Mat4.toArray(C$99x.add(),C$99m)),this._defines),C$99s=0;C$99s<C$99n.length;++C$99s){for(var C$99o=C$99n[C$99s],C$99d=C$99i.count,C$99a=(C$99i._vertexBuffer&&C$99e.setVertexBuffer(0,C$99i._vertexBuffer),C$99i._indexBuffer&&C$99e.setIndexBuffer(C$99i._indexBuffer),C$99e.setPrimitiveType(C$99i._primitiveType),Object.setPrototypeOf(C$99r,C$99o._defines),C$99h.getProgram(C$99o._programName,C$99r,C$99_.name)),C$99c=(C$99e.setProgram(C$99a),C$99a._uniforms),C$99f=C$99o._properties,C$99l=0;C$99l<C$99c.length;C$99l++){var C$99p=C$99f[C$99c[C$99l].name];void 0!==C$99p&&this._setProperty(C$99p)}C$99e.setCullMode(C$99o._cullMode),C$99o._blend&&(C$99e.enableBlend(),C$99e.setBlendFuncSep(C$99o._blendSrc,C$99o._blendDst,C$99o._blendSrcAlpha,C$99o._blendDstAlpha),C$99e.setBlendEqSep(C$99o._blendEq,C$99o._blendAlphaEq),C$99e.setBlendColor32(C$99o._blendColor)),C$99o._depthTest&&(C$99e.enableDepthTest(),C$99e.setDepthFunc(C$99o._depthFunc)),C$99o._depthWrite&&C$99e.enableDepthWrite(),C$99e.setStencilTest(C$99o._stencilTest),C$99o._stencilTest===C$99A.default.STENCIL_ENABLE&&(C$99e.setStencilFuncFront(C$99o._stencilFuncFront,C$99o._stencilRefFront,C$99o._stencilMaskFront),C$99e.setStencilOpFront(C$99o._stencilFailOpFront,C$99o._stencilZFailOpFront,C$99o._stencilZPassOpFront,C$99o._stencilWriteMaskFront),C$99e.setStencilFuncBack(C$99o._stencilFuncBack,C$99o._stencilRefBack,C$99o._stencilMaskBack),C$99e.setStencilOpBack(C$99o._stencilFailOpBack,C$99o._stencilZFailOpBack,C$99o._stencilZPassOpBack,C$99o._stencilWriteMaskBack)),C$99e.draw(C$99i._start,C$99d),this._resetTextuerUnit()}},C$99e.default=C$99a,C$99r.exports=C$99e.default},{"../../core/value-types":279,"../enums":307,"../gfx":312,"../memop":324,"./program-lib":304,"./view":306}],302:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99t=C$99t("../gfx"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99r(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}C$99t=C$99a,(C$99o=[{key:"count",get:function(){return-1!==this._count?this._count:this._indexBuffer?this._indexBuffer.count:this._vertexBuffer?this._vertexBuffer.count:0}}])&&C$99r(C$99t.prototype,C$99o),C$99s&&C$99r(C$99t,C$99s);var C$99s,C$99o=C$99a;function C$99a(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=C$99n.default.PT_TRIANGLES),this._vertexBuffer=C$99t,this._indexBuffer=C$99e,this._primitiveType=C$99i,this._start=0,this._count=-1}C$99i.default=C$99o,C$99e.exports=C$99i.default},{"../gfx":312}],303:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99c=C$99n(C$99t("../gfx")),C$99o=C$99n(C$99t("../enums")),C$99a=C$99n(C$99t("../../core/value-types/value-type"));function C$99n(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99l(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){void 0===C$99r&&(C$99r={}),void 0===C$99s&&(C$99s={}),this._name=C$99t,this._detailName=C$99e,this._programName=C$99i,this._stage=C$99n,this._properties=C$99r,this._defines=C$99s,this._cullMode=C$99c.default.CULL_BACK,this._blend=!1,this._blendEq=C$99c.default.BLEND_FUNC_ADD,this._blendAlphaEq=C$99c.default.BLEND_FUNC_ADD,this._blendSrc=C$99c.default.BLEND_SRC_ALPHA,this._blendDst=C$99c.default.BLEND_ONE_MINUS_SRC_ALPHA,this._blendSrcAlpha=C$99c.default.BLEND_SRC_ALPHA,this._blendDstAlpha=C$99c.default.BLEND_ONE_MINUS_SRC_ALPHA,this._blendColor=4294967295,this._depthTest=!1,this._depthWrite=!1,this._depthFunc=C$99c.default.DS_FUNC_LESS,this._stencilTest=C$99c.default.STENCIL_INHERIT,this._stencilFuncFront=C$99c.default.DS_FUNC_ALWAYS,this._stencilRefFront=0,this._stencilMaskFront=255,this._stencilFailOpFront=C$99c.default.STENCIL_OP_KEEP,this._stencilZFailOpFront=C$99c.default.STENCIL_OP_KEEP,this._stencilZPassOpFront=C$99c.default.STENCIL_OP_KEEP,this._stencilWriteMaskFront=255,this._stencilFuncBack=C$99c.default.DS_FUNC_ALWAYS,this._stencilRefBack=0,this._stencilMaskBack=255,this._stencilFailOpBack=C$99c.default.STENCIL_OP_KEEP,this._stencilZFailOpBack=C$99c.default.STENCIL_OP_KEEP,this._stencilZPassOpBack=C$99c.default.STENCIL_OP_KEEP,this._stencilWriteMaskBack=255}(C$99t=C$99l.prototype).setCullMode=function(C$99t){void 0===C$99t&&(C$99t=C$99c.default.CULL_BACK),this._cullMode=C$99t},C$99t.setBlend=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){void 0===C$99e&&(C$99e=C$99c.default.BLEND_FUNC_ADD),void 0===C$99i&&(C$99i=C$99c.default.BLEND_SRC_ALPHA),void 0===C$99n&&(C$99n=C$99c.default.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$99r&&(C$99r=C$99c.default.BLEND_FUNC_ADD),void 0===C$99s&&(C$99s=C$99c.default.BLEND_SRC_ALPHA),void 0===C$99o&&(C$99o=C$99c.default.BLEND_ONE_MINUS_SRC_ALPHA),void 0===C$99a&&(C$99a=4294967295),this._blend=C$99t=void 0===C$99t?!1:C$99t,this._blendEq=C$99e,this._blendSrc=C$99i,this._blendDst=C$99n,this._blendAlphaEq=C$99r,this._blendSrcAlpha=C$99s,this._blendDstAlpha=C$99o,this._blendColor=C$99a},C$99t.setDepth=function(C$99t,C$99e,C$99i){void 0===C$99e&&(C$99e=!1),void 0===C$99i&&(C$99i=C$99c.default.DS_FUNC_LESS),this._depthTest=C$99t=void 0===C$99t?!1:C$99t,this._depthWrite=C$99e,this._depthFunc=C$99i},C$99t.setStencilFront=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){void 0===C$99t&&(C$99t=C$99c.default.STENCIL_INHERIT),void 0===C$99e&&(C$99e=C$99c.default.DS_FUNC_ALWAYS),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=255),void 0===C$99r&&(C$99r=C$99c.default.STENCIL_OP_KEEP),void 0===C$99s&&(C$99s=C$99c.default.STENCIL_OP_KEEP),void 0===C$99o&&(C$99o=C$99c.default.STENCIL_OP_KEEP),void 0===C$99a&&(C$99a=255),this._stencilTest=C$99t,this._stencilFuncFront=C$99e,this._stencilRefFront=C$99i,this._stencilMaskFront=C$99n,this._stencilFailOpFront=C$99r,this._stencilZFailOpFront=C$99s,this._stencilZPassOpFront=C$99o,this._stencilWriteMaskFront=C$99a},C$99t.setStencilEnabled=function(C$99t){void 0===C$99t&&(C$99t=C$99c.default.STENCIL_INHERIT),this._stencilTest=C$99t},C$99t.setStencilBack=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){void 0===C$99t&&(C$99t=C$99c.default.STENCIL_INHERIT),void 0===C$99e&&(C$99e=C$99c.default.DS_FUNC_ALWAYS),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=255),void 0===C$99r&&(C$99r=C$99c.default.STENCIL_OP_KEEP),void 0===C$99s&&(C$99s=C$99c.default.STENCIL_OP_KEEP),void 0===C$99o&&(C$99o=C$99c.default.STENCIL_OP_KEEP),void 0===C$99a&&(C$99a=255),this._stencilTest=C$99t,this._stencilFuncBack=C$99e,this._stencilRefBack=C$99i,this._stencilMaskBack=C$99n,this._stencilFailOpBack=C$99r,this._stencilZFailOpBack=C$99s,this._stencilZPassOpBack=C$99o,this._stencilWriteMaskBack=C$99a},C$99t.setStage=function(C$99t){this._stage=C$99t},C$99t.setProperties=function(C$99t){this._properties=C$99t},C$99t.getProperty=function(C$99t){if(this._properties[C$99t])return this._properties[C$99t].value},C$99t.setProperty=function(C$99t,C$99e,C$99i){var C$99n=this._properties[C$99t];if(!C$99n)return!1;if(C$99n.directly=C$99i,Array.isArray(C$99e)){var C$99r=C$99n.value;if(C$99r.length!==C$99e.length)return void cc.warnID(9105,this._name,C$99t);for(var C$99s=0;C$99s<C$99e.length;C$99s++)C$99r[C$99s]=C$99e[C$99s]}else C$99e&&!ArrayBuffer.isView(C$99e)?C$99n.type===C$99o.default.PARAM_TEXTURE_2D?C$99n.value=C$99e.getImpl():C$99e instanceof C$99a.default?C$99e.constructor.toArray(C$99n.value,C$99e):("object"==typeof C$99e&&cc.warnID(9106,this._name,C$99t),C$99n.value=C$99e):C$99n.value=C$99e;return!0},C$99t.getDefine=function(C$99t){return this._defines[C$99t]},C$99t.define=function(C$99t,C$99e,C$99i){if(!C$99i&&void 0===this._defines[C$99t])return!1;return this._defines[C$99t]=C$99e,!0},C$99t.clone=function(){var C$99t,C$99e=new C$99l(this._programName),C$99i=(Object.assign(C$99e,this),{}),C$99n=this._properties;for(C$99t in C$99n){var C$99r,C$99s=C$99n[C$99t],C$99o=C$99i[C$99t]={},C$99a=C$99s.value;for(C$99r in Array.isArray(C$99a)?C$99o.value=C$99a.concat():ArrayBuffer.isView(C$99a)?C$99o.value=new C$99a.__proto__.constructor(C$99a):C$99o.value=C$99a,C$99s)"value"!==C$99r&&(C$99o[C$99r]=C$99s[C$99r])}return C$99e._properties=C$99i,C$99e._defines=Object.assign({},this._defines),C$99e},C$99i.default=C$99l,C$99e.exports=C$99i.default},{"../../core/value-types/value-type":287,"../enums":307,"../gfx":312}],304:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99h=(C$99t=C$99t("../gfx"))&&C$99t.__esModule?C$99t:{default:C$99t};var C$99y=0;function C$99u(C$99t,C$99e,C$99i){for(var C$99n=C$99t,C$99r=0;C$99r<C$99e.length;C$99r++){var C$99s=C$99e[C$99r].name,C$99o=C$99i[C$99s];Number.isInteger(C$99o)&&(C$99s=new RegExp(C$99s,"g"),C$99n=C$99n.replace(C$99s,C$99o))}return C$99n}function C$99_(C$99t){return C$99t.replace(/#pragma for (\w+) in range\(\s*(\d+)\s*,\s*(\d+)\s*\)([\s\S]+?)#pragma endFor/g,function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s="",C$99i=parseInt(C$99i),C$99o=parseInt(C$99n);(C$99i.isNaN||C$99o.isNaN)&&console.error("Unroll For Loops Error: begin and end of range must be an int num.");for(var C$99a=C$99i;C$99a<C$99o;++C$99a)C$99s+=C$99r.replace(new RegExp("{"+C$99e+"}","g"),C$99a);return C$99s})}function C$99d(C$99t){return C$99t.replace(/\bhighp\b/g,"mediump")}function C$99n(C$99t){this._device=C$99t,this._templates={},this._cache={},this._checkPrecision()}(C$99t=C$99n.prototype).clear=function(){this._templates={},this._cache={}},C$99t.define=function(C$99t){var C$99e=C$99t.name,C$99i=C$99t.defines,C$99n=C$99t.glsl1||C$99t,C$99h=C$99n.vert,C$99n=C$99n.frag;if(!this._templates[C$99e]){for(var C$99u=++C$99y,C$99_=0,C$99r=0;C$99r<C$99i.length;++C$99r){var C$99s,C$99o=C$99i[C$99r],C$99d=1;"number"===C$99o.type?(C$99s=C$99o.range||[],C$99o.min=C$99s[0]||0,C$99o.max=C$99s[1]||4,C$99d=Math.ceil(Math.log2(C$99o.max-C$99o.min)),C$99o._map=function(C$99t){return C$99t-this.min<<this._offset}.bind(C$99o)):C$99o._map=function(C$99t){return C$99t?1<<this._offset:0}.bind(C$99o),C$99o._offset=C$99_,C$99_+=C$99d}var C$99a=C$99t.uniforms||[];if(C$99t.samplers)for(var C$99f=0;C$99f<C$99t.samplers.length;C$99f++)C$99a.push(C$99t.samplers[C$99f]);if(C$99t.blocks)for(var C$99c=0;C$99c<C$99t.blocks.length;C$99c++)for(var C$99p=C$99t.blocks[C$99c].defines,C$99m=C$99t.blocks[C$99c].members,C$99l=0;C$99l<C$99m.length;C$99l++)C$99a.push({defines:C$99p,name:C$99m[C$99l].name,type:C$99m[C$99l].type});this._templates[C$99e]={id:C$99u,name:C$99e,vert:C$99h,frag:C$99n,defines:C$99i,attributes:C$99t.attributes,uniforms:C$99a,extensions:C$99t.extensions}}},C$99t.getTemplate=function(C$99t){return this._templates[C$99t]},C$99t.hasProgram=function(C$99t){return void 0!==this._templates[C$99t]},C$99t.getKey=function(C$99t,C$99e){for(var C$99i=this._templates[C$99t],C$99n=0,C$99r=0;C$99r<C$99i.defines.length;++C$99r){var C$99s=C$99i.defines[C$99r],C$99o=C$99e[C$99s.name];void 0!==C$99o&&(C$99n|=C$99s._map(C$99o))}return C$99i.id+":"+C$99n},C$99t.getProgram=function(C$99t,C$99e,C$99n){var C$99i=this.getKey(C$99t,C$99e),C$99r=this._cache[C$99i];if(C$99r)return C$99r;var C$99t=this._templates[C$99t],C$99s=function(C$99t,C$99e){for(var C$99i=[],C$99n=0;C$99n<C$99t.length;C$99n++){var C$99r=C$99t[C$99n].name,C$99s=C$99e[C$99r];"number"!=typeof C$99s&&(C$99s=C$99s?1:0),C$99i.push("#define "+C$99r+" "+C$99s)}return C$99i.join("\n")+"\n"}(C$99t.defines,C$99e),C$99o=C$99s+C$99_(C$99o=C$99u(C$99t.vert,C$99t.defines,C$99e));this._highpSupported||(C$99o=C$99d(C$99o));C$99s+=C$99_(C$99s=C$99u(C$99t.frag,C$99t.defines,C$99e));this._highpSupported||(C$99s=C$99d(C$99s));var C$99a,C$99c,C$99l,C$99e=(C$99r=new C$99h.default.Program(this._device,{vert:C$99o,frag:C$99s})).link();return C$99e&&(C$99a=C$99o.split("\n"),C$99c=C$99s.split("\n"),C$99l=C$99t.defines.length,C$99e.forEach(function(C$99t){var C$99e=C$99t.line-1,C$99i=C$99t.line-C$99l,C$99e=("vs"===C$99t.type?C$99a:C$99c)[C$99e],C$99i=C$99t.info||"Failed to compile "+C$99t.type+" "+C$99t.fileID+" (ln "+C$99i+"): \n "+C$99t.message+": \n  "+C$99e;cc.error(C$99n+" : "+C$99i)})),this._cache[C$99i]=C$99r},C$99t._checkPrecision=function(){var C$99t,C$99e=this._device._gl,C$99i=!1;C$99e.getShaderPrecisionFormat&&(C$99t=C$99e.getShaderPrecisionFormat(C$99e.VERTEX_SHADER,C$99e.HIGH_FLOAT),C$99e=C$99e.getShaderPrecisionFormat(C$99e.FRAGMENT_SHADER,C$99e.HIGH_FLOAT),C$99i=C$99t&&0<C$99t.precision&&C$99e&&0<C$99e.precision),C$99i||cc.warnID(9102),this._highpSupported=C$99i},C$99i.default=C$99n,C$99e.exports=C$99i.default},{"../gfx":312}],305:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}C$99i.__esModule=!0,C$99i.default=void 0;C$99a.prototype.clone=function(){for(var C$99t=[],C$99e=0;C$99e<this._passes.length;C$99e++)C$99t.push(this._passes[C$99e].clone());return new C$99a(this._name,C$99t)},C$99r=C$99a,(C$99o=[{key:"name",get:function(){return this._name}},{key:"passes",get:function(){return this._passes}}])&&C$99n(C$99r.prototype,C$99o),C$99s&&C$99n(C$99r,C$99s);var C$99r,C$99s,C$99o=C$99a;function C$99a(C$99t,C$99e){this._name=C$99t,this._passes=C$99e}C$99i.default=C$99o,C$99e.exports=C$99i.default},{}],306:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99t("../../core/value-types"),C$99r=(C$99t=C$99t("../enums"))&&C$99t.__esModule?C$99t:{default:C$99t};var C$99s=new C$99n.Mat4,C$99o=0;function C$99a(){this._id=C$99o++,this._priority=0,this._rect={x:0,y:0,w:1,h:1},this._color=new C$99n.Vec4(.3,.3,.3,1),this._depth=1,this._stencil=0,this._clearFlags=C$99r.default.CLEAR_COLOR|C$99r.default.CLEAR_DEPTH,this._clearModel=null,this._matView=cc.mat4(),this._matViewInv=cc.mat4(),this._matProj=cc.mat4(),this._matViewProj=cc.mat4(),this._matInvViewProj=cc.mat4(),this._stages=[],this._cullingByID=!1,this._framebuffer=null,this._shadowLight=null,this._cullingMask=4294967295}(C$99t=C$99a.prototype).getForward=function(C$99t){var C$99e=this._matView.m;return C$99n.Vec3.set(C$99t,-C$99e[2],-C$99e[6],-C$99e[10])},C$99t.getPosition=function(C$99t){return C$99n.Mat4.invert(C$99s,this._matView),C$99n.Mat4.getTranslation(C$99t,C$99s)},C$99i.default=C$99a,C$99e.exports=C$99i.default},{"../../core/value-types":279,"../enums":307}],307:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=C$99t("./build/mappings"),C$99t={PROJ_PERSPECTIVE:0,PROJ_ORTHO:1,LIGHT_DIRECTIONAL:0,LIGHT_POINT:1,LIGHT_SPOT:2,LIGHT_AMBIENT:3,SHADOW_NONE:0,SHADOW_HARD:1,SHADOW_SOFT:2,PARAM_INT:C$99t.typeMap.int,PARAM_INT2:C$99t.typeMap.ivec2,PARAM_INT3:C$99t.typeMap.ivec3,PARAM_INT4:C$99t.typeMap.ivec4,PARAM_FLOAT:C$99t.typeMap.float,PARAM_FLOAT2:C$99t.typeMap.vec2,PARAM_FLOAT3:C$99t.typeMap.vec3,PARAM_FLOAT4:C$99t.typeMap.vec4,PARAM_MAT2:C$99t.typeMap.mat2,PARAM_MAT3:C$99t.typeMap.mat3,PARAM_MAT4:C$99t.typeMap.mat4,PARAM_TEXTURE_2D:C$99t.typeMap.sampler2D,PARAM_TEXTURE_CUBE:C$99t.typeMap.samplerCube,CLEAR_COLOR:1,CLEAR_DEPTH:2,CLEAR_STENCIL:4,CLEAR_SKYBOX:8,BUFFER_VIEW_INT8:0,BUFFER_VIEW_UINT8:1,BUFFER_VIEW_INT16:2,BUFFER_VIEW_UINT16:3,BUFFER_VIEW_INT32:4,BUFFER_VIEW_UINT32:5,BUFFER_VIEW_FLOAT32:6};C$99i.default=C$99t,C$99e.exports=C$99i.default},{"./build/mappings":300}],308:[function(C$99t,C$99l,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99r=C$99i(C$99t("./state")),C$99P=C$99t("./enums"),C$99h=C$99i(C$99t("./texture-2d")),C$99u=C$99i(C$99t("./texture-cube"));function C$99i(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99n(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}(C$99t={})[5124]=function(C$99t,C$99e,C$99i){C$99t.uniform1i(C$99e,C$99i)},C$99t[5126]=function(C$99t,C$99e,C$99i){C$99t.uniform1f(C$99e,C$99i)},C$99t[35664]=function(C$99t,C$99e,C$99i){C$99t.uniform2fv(C$99e,C$99i)},C$99t[35665]=function(C$99t,C$99e,C$99i){C$99t.uniform3fv(C$99e,C$99i)},C$99t[35666]=function(C$99t,C$99e,C$99i){C$99t.uniform4fv(C$99e,C$99i)},C$99t[35667]=function(C$99t,C$99e,C$99i){C$99t.uniform2iv(C$99e,C$99i)},C$99t[35668]=function(C$99t,C$99e,C$99i){C$99t.uniform3iv(C$99e,C$99i)},C$99t[35669]=function(C$99t,C$99e,C$99i){C$99t.uniform4iv(C$99e,C$99i)},C$99t[35670]=function(C$99t,C$99e,C$99i){C$99t.uniform1i(C$99e,C$99i)},C$99t[35671]=function(C$99t,C$99e,C$99i){C$99t.uniform2iv(C$99e,C$99i)},C$99t[35672]=function(C$99t,C$99e,C$99i){C$99t.uniform3iv(C$99e,C$99i)},C$99t[35673]=function(C$99t,C$99e,C$99i){C$99t.uniform4iv(C$99e,C$99i)},C$99t[35674]=function(C$99t,C$99e,C$99i){C$99t.uniformMatrix2fv(C$99e,!1,C$99i)},C$99t[35675]=function(C$99t,C$99e,C$99i){C$99t.uniformMatrix3fv(C$99e,!1,C$99i)},C$99t[35676]=function(C$99t,C$99e,C$99i){C$99t.uniformMatrix4fv(C$99e,!1,C$99i)},C$99t[35678]=function(C$99t,C$99e,C$99i){C$99t.uniform1i(C$99e,C$99i)},C$99t[35680]=function(C$99t,C$99e,C$99i){C$99t.uniform1i(C$99e,C$99i)};var C$99D=C$99t,C$99L=((C$99t={})[5124]=function(C$99t,C$99e,C$99i){C$99t.uniform1iv(C$99e,C$99i)},C$99t[5126]=function(C$99t,C$99e,C$99i){C$99t.uniform1fv(C$99e,C$99i)},C$99t[35664]=function(C$99t,C$99e,C$99i){C$99t.uniform2fv(C$99e,C$99i)},C$99t[35665]=function(C$99t,C$99e,C$99i){C$99t.uniform3fv(C$99e,C$99i)},C$99t[35666]=function(C$99t,C$99e,C$99i){C$99t.uniform4fv(C$99e,C$99i)},C$99t[35667]=function(C$99t,C$99e,C$99i){C$99t.uniform2iv(C$99e,C$99i)},C$99t[35668]=function(C$99t,C$99e,C$99i){C$99t.uniform3iv(C$99e,C$99i)},C$99t[35669]=function(C$99t,C$99e,C$99i){C$99t.uniform4iv(C$99e,C$99i)},C$99t[35670]=function(C$99t,C$99e,C$99i){C$99t.uniform1iv(C$99e,C$99i)},C$99t[35671]=function(C$99t,C$99e,C$99i){C$99t.uniform2iv(C$99e,C$99i)},C$99t[35672]=function(C$99t,C$99e,C$99i){C$99t.uniform3iv(C$99e,C$99i)},C$99t[35673]=function(C$99t,C$99e,C$99i){C$99t.uniform4iv(C$99e,C$99i)},C$99t[35674]=function(C$99t,C$99e,C$99i){C$99t.uniformMatrix2fv(C$99e,!1,C$99i)},C$99t[35675]=function(C$99t,C$99e,C$99i){C$99t.uniformMatrix3fv(C$99e,!1,C$99i)},C$99t[35676]=function(C$99t,C$99e,C$99i){C$99t.uniformMatrix4fv(C$99e,!1,C$99i)},C$99t[35678]=function(C$99t,C$99e,C$99i){C$99t.uniform1iv(C$99e,C$99i)},C$99t[35680]=function(C$99t,C$99e,C$99i){C$99t.uniform1iv(C$99e,C$99i)},C$99t);function C$99o(C$99t,C$99e,C$99i,C$99n){void 0===C$99n&&(C$99n=0),C$99i instanceof C$99h.default?C$99t.framebufferTexture2D(C$99t.FRAMEBUFFER,C$99e,C$99t.TEXTURE_2D,C$99i._glID,0):C$99i instanceof C$99u.default?C$99t.framebufferTexture2D(C$99t.FRAMEBUFFER,C$99e,C$99t.TEXTURE_CUBE_MAP_POSITIVE_X+C$99n,C$99i._glID,0):C$99t.framebufferRenderbuffer(C$99t.FRAMEBUFFER,C$99e,C$99t.RENDERBUFFER,C$99i._glID)}C$99t=C$99c,(C$99a=[{key:"caps",get:function(){return this._caps}}])&&C$99n(C$99t.prototype,C$99a),C$99s&&C$99n(C$99t,C$99s),(C$99a=C$99c.prototype)._initExtensions=function(C$99t){for(var C$99e=this._gl,C$99i=0;C$99i<C$99t.length;++C$99i)for(var C$99n=C$99t[C$99i],C$99r=["","WEBKIT_","MOZ_"],C$99s=0;C$99s<C$99r.length;C$99s++)try{var C$99o=C$99e.getExtension(C$99r[C$99s]+C$99n);if(C$99o){this._extensions[C$99n]=C$99o;break}}catch(C$99t){console.error(C$99t)}},C$99a._initCaps=function(){var C$99t=this._gl,C$99e=this.ext("WEBGL_draw_buffers");this._caps.maxVertexStreams=4,this._caps.maxVertexTextures=C$99t.getParameter(C$99t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._caps.maxFragUniforms=C$99t.getParameter(C$99t.MAX_FRAGMENT_UNIFORM_VECTORS),this._caps.maxTextureUnits=C$99t.getParameter(C$99t.MAX_TEXTURE_IMAGE_UNITS),this._caps.maxVertexAttribs=C$99t.getParameter(C$99t.MAX_VERTEX_ATTRIBS),this._caps.maxTextureSize=C$99t.getParameter(C$99t.MAX_TEXTURE_SIZE),this._caps.maxDrawBuffers=C$99e?C$99t.getParameter(C$99e.MAX_DRAW_BUFFERS_WEBGL):1,this._caps.maxColorAttachments=C$99e?C$99t.getParameter(C$99e.MAX_COLOR_ATTACHMENTS_WEBGL):1},C$99a._initStates=function(){var C$99t=this._gl;C$99t.disable(C$99t.BLEND),C$99t.blendFunc(C$99t.ONE,C$99t.ZERO),C$99t.blendEquation(C$99t.FUNC_ADD),C$99t.blendColor(1,1,1,1),C$99t.colorMask(!0,!0,!0,!0),C$99t.enable(C$99t.CULL_FACE),C$99t.cullFace(C$99t.BACK),C$99t.disable(C$99t.DEPTH_TEST),C$99t.depthFunc(C$99t.LESS),C$99t.depthMask(!1),C$99t.disable(C$99t.POLYGON_OFFSET_FILL),C$99t.depthRange(0,1),C$99t.disable(C$99t.STENCIL_TEST),C$99t.stencilFunc(C$99t.ALWAYS,0,255),C$99t.stencilMask(255),C$99t.stencilOp(C$99t.KEEP,C$99t.KEEP,C$99t.KEEP),C$99t.clearDepth(1),C$99t.clearColor(0,0,0,0),C$99t.clearStencil(0),C$99t.disable(C$99t.SCISSOR_TEST)},C$99a._restoreTexture=function(C$99t){var C$99e=this._gl,C$99t=this._current.textureUnits[C$99t];C$99t&&-1!==C$99t._glID?C$99e.bindTexture(C$99t._target,C$99t._glID):C$99e.bindTexture(C$99e.TEXTURE_2D,null)},C$99a._restoreIndexBuffer=function(){var C$99t=this._gl,C$99e=this._current.indexBuffer;C$99e&&-1!==C$99e._glID?C$99t.bindBuffer(C$99t.ELEMENT_ARRAY_BUFFER,C$99e._glID):C$99t.bindBuffer(C$99t.ELEMENT_ARRAY_BUFFER,null)},C$99a.ext=function(C$99t){return this._extensions[C$99t]},C$99a.allowFloatTexture=function(){return null!=this.ext("OES_texture_float")},C$99a.setFrameBuffer=function(C$99t){if(this._framebuffer!==C$99t){this._framebuffer=C$99t;var C$99e=this._gl;if(C$99t){C$99e.bindFramebuffer(C$99e.FRAMEBUFFER,C$99t._glID);for(var C$99i=C$99t._colors.length,C$99n=0;C$99n<C$99i;++C$99n){var C$99r=C$99t._colors[C$99n];C$99o(C$99e,C$99e.COLOR_ATTACHMENT0+C$99n,C$99r)}for(var C$99s=C$99i;C$99s<this._caps.maxColorAttachments;++C$99s)C$99e.framebufferTexture2D(C$99e.FRAMEBUFFER,C$99e.COLOR_ATTACHMENT0+C$99s,C$99e.TEXTURE_2D,null,0);C$99t._depth&&C$99o(C$99e,C$99e.DEPTH_ATTACHMENT,C$99t._depth),C$99t._stencil&&C$99o(C$99e,C$99e.STENCIL_ATTACHMENT,C$99t._stencil),C$99t._depthStencil&&C$99o(C$99e,C$99e.DEPTH_STENCIL_ATTACHMENT,C$99t._depthStencil)}else C$99e.bindFramebuffer(C$99e.FRAMEBUFFER,null)}},C$99a.setViewport=function(C$99t,C$99e,C$99i,C$99n){this._vx===C$99t&&this._vy===C$99e&&this._vw===C$99i&&this._vh===C$99n||(this._gl.viewport(C$99t,C$99e,C$99i,C$99n),this._vx=C$99t,this._vy=C$99e,this._vw=C$99i,this._vh=C$99n)},C$99a.setScissor=function(C$99t,C$99e,C$99i,C$99n){this._sx===C$99t&&this._sy===C$99e&&this._sw===C$99i&&this._sh===C$99n||(this._gl.scissor(C$99t,C$99e,C$99i,C$99n),this._sx=C$99t,this._sy=C$99e,this._sw=C$99i,this._sh=C$99n)},C$99a.clear=function(C$99t){var C$99e,C$99i;void 0===C$99t.color&&void 0===C$99t.depth&&void 0===C$99t.stencil||(C$99e=this._gl,void(C$99i=0)!==C$99t.color&&(C$99i|=C$99e.COLOR_BUFFER_BIT,C$99e.clearColor(C$99t.color[0],C$99t.color[1],C$99t.color[2],C$99t.color[3])),void 0!==C$99t.depth&&(C$99i|=C$99e.DEPTH_BUFFER_BIT,C$99e.clearDepth(C$99t.depth),C$99e.enable(C$99e.DEPTH_TEST),C$99e.depthMask(!0),C$99e.depthFunc(C$99e.ALWAYS)),void 0!==C$99t.stencil&&(C$99i|=C$99e.STENCIL_BUFFER_BIT,C$99e.clearStencil(C$99t.stencil)),C$99e.clear(C$99i),void 0!==C$99t.depth&&(!1===this._current.depthTest?C$99e.disable(C$99e.DEPTH_TEST):(!1===this._current.depthWrite&&C$99e.depthMask(!1),this._current.depthFunc!==C$99P.enums.DS_FUNC_ALWAYS&&C$99e.depthFunc(this._current.depthFunc))))},C$99a.enableBlend=function(){this._next.blend=!0},C$99a.enableDepthTest=function(){this._next.depthTest=!0},C$99a.enableDepthWrite=function(){this._next.depthWrite=!0},C$99a.setStencilTest=function(C$99t){this._next.stencilTest=C$99t},C$99a.setStencilFunc=function(C$99t,C$99e,C$99i){this._next.stencilSep=!1,this._next.stencilFuncFront=this._next.stencilFuncBack=C$99t,this._next.stencilRefFront=this._next.stencilRefBack=C$99e,this._next.stencilMaskFront=this._next.stencilMaskBack=C$99i},C$99a.setStencilFuncFront=function(C$99t,C$99e,C$99i){this._next.stencilSep=!0,this._next.stencilFuncFront=C$99t,this._next.stencilRefFront=C$99e,this._next.stencilMaskFront=C$99i},C$99a.setStencilFuncBack=function(C$99t,C$99e,C$99i){this._next.stencilSep=!0,this._next.stencilFuncBack=C$99t,this._next.stencilRefBack=C$99e,this._next.stencilMaskBack=C$99i},C$99a.setStencilOp=function(C$99t,C$99e,C$99i,C$99n){this._next.stencilFailOpFront=this._next.stencilFailOpBack=C$99t,this._next.stencilZFailOpFront=this._next.stencilZFailOpBack=C$99e,this._next.stencilZPassOpFront=this._next.stencilZPassOpBack=C$99i,this._next.stencilWriteMaskFront=this._next.stencilWriteMaskBack=C$99n},C$99a.setStencilOpFront=function(C$99t,C$99e,C$99i,C$99n){this._next.stencilSep=!0,this._next.stencilFailOpFront=C$99t,this._next.stencilZFailOpFront=C$99e,this._next.stencilZPassOpFront=C$99i,this._next.stencilWriteMaskFront=C$99n},C$99a.setStencilOpBack=function(C$99t,C$99e,C$99i,C$99n){this._next.stencilSep=!0,this._next.stencilFailOpBack=C$99t,this._next.stencilZFailOpBack=C$99e,this._next.stencilZPassOpBack=C$99i,this._next.stencilWriteMaskBack=C$99n},C$99a.setDepthFunc=function(C$99t){this._next.depthFunc=C$99t},C$99a.setBlendColor32=function(C$99t){this._next.blendColor=C$99t},C$99a.setBlendColor=function(C$99t,C$99e,C$99i,C$99n){this._next.blendColor=(255*C$99t<<24|255*C$99e<<16|255*C$99i<<8|255*C$99n)>>>0},C$99a.setBlendFunc=function(C$99t,C$99e){this._next.blendSep=!1,this._next.blendSrc=C$99t,this._next.blendDst=C$99e},C$99a.setBlendFuncSep=function(C$99t,C$99e,C$99i,C$99n){this._next.blendSep=!0,this._next.blendSrc=C$99t,this._next.blendDst=C$99e,this._next.blendSrcAlpha=C$99i,this._next.blendDstAlpha=C$99n},C$99a.setBlendEq=function(C$99t){this._next.blendSep=!1,this._next.blendEq=C$99t},C$99a.setBlendEqSep=function(C$99t,C$99e){this._next.blendSep=!0,this._next.blendEq=C$99t,this._next.blendAlphaEq=C$99e},C$99a.setCullMode=function(C$99t){this._next.cullMode=C$99t},C$99a.setVertexBuffer=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=0),this._next.vertexBuffers[C$99t]=C$99e,this._next.vertexBufferOffsets[C$99t]=C$99i,this._next.maxStream<C$99t&&(this._next.maxStream=C$99t)},C$99a.setIndexBuffer=function(C$99t){this._next.indexBuffer=C$99t},C$99a.setProgram=function(C$99t){this._next.program=C$99t},C$99a.setTexture=function(C$99t,C$99e,C$99i){C$99i>=this._caps.maxTextureUnits?console.warn("Can not set texture "+C$99t+" at stage "+C$99i+", max texture exceed: "+this._caps.maxTextureUnits):(this._next.textureUnits[C$99i]=C$99e,this.setUniform(C$99t,C$99i),this._next.maxTextureSlot<C$99i&&(this._next.maxTextureSlot=C$99i))},C$99a.setTextureArray=function(C$99t,C$99e,C$99i){var C$99n=C$99e.length;if(C$99n>=this._caps.maxTextureUnits)console.warn("Can not set "+C$99n+" textures for "+C$99t+", max texture exceed: "+this._caps.maxTextureUnits);else{for(var C$99r=0;C$99r<C$99n;++C$99r){var C$99s=C$99i[C$99r];this._next.textureUnits[C$99s]=C$99e[C$99r],this._next.maxTextureSlot<C$99s&&(this._next.maxTextureSlot=C$99s)}this.setUniform(C$99t,C$99i)}},C$99a.setUniform=function(C$99t,C$99e){for(var C$99i=this._uniforms[C$99t],C$99n=!1,C$99h=!1,C$99r=!1,C$99s=!1;C$99i&&(C$99r=Array.isArray(C$99e)||C$99e instanceof Float32Array,C$99s=C$99e instanceof Int32Array,C$99i.isArray===(C$99h=C$99r||C$99s)&&(!C$99i.isArray||C$99i.value.length===C$99e.length)&&(C$99n=!0,0)););if(C$99n){var C$99o=C$99i.value,C$99a=!1;if(C$99i.isArray)for(var C$99c=0,C$99u=C$99o.length;C$99c<C$99u;C$99c++)C$99o[C$99c]!==C$99e[C$99c]&&(C$99a=!0,C$99o[C$99c]=C$99e[C$99c]);else C$99o!==C$99e&&(C$99a=!0,C$99i.value=C$99e);C$99a&&(C$99i.dirty=!0)}else{var C$99l=C$99e;C$99r?C$99l=new Float32Array(C$99e):C$99s&&(C$99l=new Int32Array(C$99e)),C$99i={dirty:!0,value:C$99l,isArray:C$99h}}this._uniforms[C$99t]=C$99i},C$99a.setUniformDirectly=function(C$99t,C$99e){var C$99i=this._uniforms[C$99t];C$99i||(this._uniforms[C$99t]=C$99i={}),C$99i.dirty=!0,C$99i.value=C$99e},C$99a.setPrimitiveType=function(C$99t){this._next.primitiveType=C$99t},C$99a.resetDrawCalls=function(){this._stats.drawcalls=0},C$99a.getDrawCalls=function(){return this._stats.drawcalls},C$99a.draw=function(C$99h,C$99u){var C$99t,C$99e,C$99i,C$99n=this._gl,C$99r=this._current,C$99s=this._next,C$99o=(!function(C$99t,C$99e,C$99i){if(C$99e.blend!==C$99i.blend)return C$99i.blend?(C$99t.enable(C$99t.BLEND),C$99i.blendSrc!==C$99P.enums.BLEND_CONSTANT_COLOR&&C$99i.blendSrc!==C$99P.enums.BLEND_ONE_MINUS_CONSTANT_COLOR&&C$99i.blendDst!==C$99P.enums.BLEND_CONSTANT_COLOR&&C$99i.blendDst!==C$99P.enums.BLEND_ONE_MINUS_CONSTANT_COLOR||C$99t.blendColor((C$99i.blendColor>>24)/255,(C$99i.blendColor>>16&255)/255,(C$99i.blendColor>>8&255)/255,(255&C$99i.blendColor)/255),C$99i.blendSep?(C$99t.blendFuncSeparate(C$99i.blendSrc,C$99i.blendDst,C$99i.blendSrcAlpha,C$99i.blendDstAlpha),C$99t.blendEquationSeparate(C$99i.blendEq,C$99i.blendAlphaEq)):(C$99t.blendFunc(C$99i.blendSrc,C$99i.blendDst),C$99t.blendEquation(C$99i.blendEq))):C$99t.disable(C$99t.BLEND);!1!==C$99i.blend&&(C$99e.blendColor!==C$99i.blendColor&&C$99t.blendColor((C$99i.blendColor>>24)/255,(C$99i.blendColor>>16&255)/255,(C$99i.blendColor>>8&255)/255,(255&C$99i.blendColor)/255),C$99e.blendSep===C$99i.blendSep?C$99i.blendSep?(C$99e.blendSrc===C$99i.blendSrc&&C$99e.blendDst===C$99i.blendDst&&C$99e.blendSrcAlpha===C$99i.blendSrcAlpha&&C$99e.blendDstAlpha===C$99i.blendDstAlpha||C$99t.blendFuncSeparate(C$99i.blendSrc,C$99i.blendDst,C$99i.blendSrcAlpha,C$99i.blendDstAlpha),C$99e.blendEq===C$99i.blendEq&&C$99e.blendAlphaEq===C$99i.blendAlphaEq||C$99t.blendEquationSeparate(C$99i.blendEq,C$99i.blendAlphaEq)):(C$99e.blendSrc===C$99i.blendSrc&&C$99e.blendDst===C$99i.blendDst||C$99t.blendFunc(C$99i.blendSrc,C$99i.blendDst),C$99e.blendEq!==C$99i.blendEq&&C$99t.blendEquation(C$99i.blendEq)):C$99i.blendSep?(C$99t.blendFuncSeparate(C$99i.blendSrc,C$99i.blendDst,C$99i.blendSrcAlpha,C$99i.blendDstAlpha),C$99t.blendEquationSeparate(C$99i.blendEq,C$99i.blendAlphaEq)):(C$99t.blendFunc(C$99i.blendSrc,C$99i.blendDst),C$99t.blendEquation(C$99i.blendEq)))}(C$99n,C$99r,C$99s),function(C$99t,C$99e,C$99i){if(C$99e.depthTest!==C$99i.depthTest)return C$99i.depthTest?(C$99t.enable(C$99t.DEPTH_TEST),C$99t.depthFunc(C$99i.depthFunc),C$99t.depthMask(C$99i.depthWrite)):C$99t.disable(C$99t.DEPTH_TEST);C$99e.depthWrite!==C$99i.depthWrite&&C$99t.depthMask(C$99i.depthWrite),!1!==C$99i.depthTest?C$99e.depthFunc!==C$99i.depthFunc&&C$99t.depthFunc(C$99i.depthFunc):C$99i.depthWrite&&(C$99i.depthTest=!0,C$99i.depthFunc=C$99P.enums.DS_FUNC_ALWAYS,C$99t.enable(C$99t.DEPTH_TEST),C$99t.depthFunc(C$99i.depthFunc))}(C$99n,C$99r,C$99s),C$99i=C$99n,C$99e=C$99r,(C$99t=C$99s).stencilTest!==C$99P.enums.STENCIL_INHERIT&&(C$99t.stencilTest!==C$99e.stencilTest?C$99t.stencilTest===C$99P.enums.STENCIL_DISABLE?C$99i.disable(C$99i.STENCIL_TEST):(C$99i.enable(C$99i.STENCIL_TEST),C$99t.stencilSep?(C$99i.stencilFuncSeparate(C$99i.FRONT,C$99t.stencilFuncFront,C$99t.stencilRefFront,C$99t.stencilMaskFront),C$99i.stencilMaskSeparate(C$99i.FRONT,C$99t.stencilWriteMaskFront),C$99i.stencilOpSeparate(C$99i.FRONT,C$99t.stencilFailOpFront,C$99t.stencilZFailOpFront,C$99t.stencilZPassOpFront),C$99i.stencilFuncSeparate(C$99i.BACK,C$99t.stencilFuncBack,C$99t.stencilRefBack,C$99t.stencilMaskBack),C$99i.stencilMaskSeparate(C$99i.BACK,C$99t.stencilWriteMaskBack),C$99i.stencilOpSeparate(C$99i.BACK,C$99t.stencilFailOpBack,C$99t.stencilZFailOpBack,C$99t.stencilZPassOpBack)):(C$99i.stencilFunc(C$99t.stencilFuncFront,C$99t.stencilRefFront,C$99t.stencilMaskFront),C$99i.stencilMask(C$99t.stencilWriteMaskFront),C$99i.stencilOp(C$99t.stencilFailOpFront,C$99t.stencilZFailOpFront,C$99t.stencilZPassOpFront))):C$99t.stencilTest!==C$99P.enums.STENCIL_DISABLE&&(C$99e.stencilSep===C$99t.stencilSep?C$99t.stencilSep?(C$99e.stencilFuncFront===C$99t.stencilFuncFront&&C$99e.stencilRefFront===C$99t.stencilRefFront&&C$99e.stencilMaskFront===C$99t.stencilMaskFront||C$99i.stencilFuncSeparate(C$99i.FRONT,C$99t.stencilFuncFront,C$99t.stencilRefFront,C$99t.stencilMaskFront),C$99e.stencilWriteMaskFront!==C$99t.stencilWriteMaskFront&&C$99i.stencilMaskSeparate(C$99i.FRONT,C$99t.stencilWriteMaskFront),C$99e.stencilFailOpFront===C$99t.stencilFailOpFront&&C$99e.stencilZFailOpFront===C$99t.stencilZFailOpFront&&C$99e.stencilZPassOpFront===C$99t.stencilZPassOpFront||C$99i.stencilOpSeparate(C$99i.FRONT,C$99t.stencilFailOpFront,C$99t.stencilZFailOpFront,C$99t.stencilZPassOpFront),C$99e.stencilFuncBack===C$99t.stencilFuncBack&&C$99e.stencilRefBack===C$99t.stencilRefBack&&C$99e.stencilMaskBack===C$99t.stencilMaskBack||C$99i.stencilFuncSeparate(C$99i.BACK,C$99t.stencilFuncBack,C$99t.stencilRefBack,C$99t.stencilMaskBack),C$99e.stencilWriteMaskBack!==C$99t.stencilWriteMaskBack&&C$99i.stencilMaskSeparate(C$99i.BACK,C$99t.stencilWriteMaskBack),C$99e.stencilFailOpBack===C$99t.stencilFailOpBack&&C$99e.stencilZFailOpBack===C$99t.stencilZFailOpBack&&C$99e.stencilZPassOpBack===C$99t.stencilZPassOpBack||C$99i.stencilOpSeparate(C$99i.BACK,C$99t.stencilFailOpBack,C$99t.stencilZFailOpBack,C$99t.stencilZPassOpBack)):(C$99e.stencilFuncFront===C$99t.stencilFuncFront&&C$99e.stencilRefFront===C$99t.stencilRefFront&&C$99e.stencilMaskFront===C$99t.stencilMaskFront||C$99i.stencilFunc(C$99t.stencilFuncFront,C$99t.stencilRefFront,C$99t.stencilMaskFront),C$99e.stencilWriteMaskFront!==C$99t.stencilWriteMaskFront&&C$99i.stencilMask(C$99t.stencilWriteMaskFront),C$99e.stencilFailOpFront===C$99t.stencilFailOpFront&&C$99e.stencilZFailOpFront===C$99t.stencilZFailOpFront&&C$99e.stencilZPassOpFront===C$99t.stencilZPassOpFront||C$99i.stencilOp(C$99t.stencilFailOpFront,C$99t.stencilZFailOpFront,C$99t.stencilZPassOpFront)):C$99t.stencilSep?(C$99i.stencilFuncSeparate(C$99i.FRONT,C$99t.stencilFuncFront,C$99t.stencilRefFront,C$99t.stencilMaskFront),C$99i.stencilMaskSeparate(C$99i.FRONT,C$99t.stencilWriteMaskFront),C$99i.stencilOpSeparate(C$99i.FRONT,C$99t.stencilFailOpFront,C$99t.stencilZFailOpFront,C$99t.stencilZPassOpFront),C$99i.stencilFuncSeparate(C$99i.BACK,C$99t.stencilFuncBack,C$99t.stencilRefBack,C$99t.stencilMaskBack),C$99i.stencilMaskSeparate(C$99i.BACK,C$99t.stencilWriteMaskBack),C$99i.stencilOpSeparate(C$99i.BACK,C$99t.stencilFailOpBack,C$99t.stencilZFailOpBack,C$99t.stencilZPassOpBack)):(C$99i.stencilFunc(C$99t.stencilFuncFront,C$99t.stencilRefFront,C$99t.stencilMaskFront),C$99i.stencilMask(C$99t.stencilWriteMaskFront),C$99i.stencilOp(C$99t.stencilFailOpFront,C$99t.stencilZFailOpFront,C$99t.stencilZPassOpFront)))),C$99e=C$99n,C$99i=C$99s,C$99r.cullMode!==C$99i.cullMode&&(C$99i.cullMode!==C$99P.enums.CULL_NONE?(C$99e.enable(C$99e.CULL_FACE),C$99e.cullFace(C$99i.cullMode)):C$99e.disable(C$99e.CULL_FACE)),this),C$99_=C$99n,C$99d=C$99r,C$99a=C$99s,C$99f=!1;if(-1!==C$99a.maxStream){if(C$99d.maxStream!==C$99a.maxStream)C$99f=!0;else if(C$99d.program!==C$99a.program)C$99f=!0;else for(var C$99p=0;C$99p<C$99a.maxStream+1;++C$99p)if(C$99d.vertexBuffers[C$99p]!==C$99a.vertexBuffers[C$99p]||C$99d.vertexBufferOffsets[C$99p]!==C$99a.vertexBufferOffsets[C$99p]){C$99f=!0;break}if(C$99f){for(var C$99m=0;C$99m<C$99o._caps.maxVertexAttribs;++C$99m)C$99o._newAttributes[C$99m]=0;for(var C$99y=0;C$99y<C$99a.maxStream+1;++C$99y){var C$99g=C$99a.vertexBuffers[C$99y],C$99v=C$99a.vertexBufferOffsets[C$99y];if(C$99g&&-1!==C$99g._glID){C$99_.bindBuffer(C$99_.ARRAY_BUFFER,C$99g._glID);for(var C$99x=0;C$99x<C$99a.program._attributes.length;++C$99x){var C$99c=C$99a.program._attributes[C$99x],C$99l=C$99g._format.element(C$99c.name);C$99l?(0===C$99o._enabledAttributes[C$99c.location]&&(C$99_.enableVertexAttribArray(C$99c.location),C$99o._enabledAttributes[C$99c.location]=1),C$99o._newAttributes[C$99c.location]=1,C$99_.vertexAttribPointer(C$99c.location,C$99l.num,C$99l.type,C$99l.normalize,C$99l.stride,C$99l.offset+C$99v*C$99l.stride)):console.warn("Can not find vertex attribute: "+C$99c.name)}}}for(var C$99b=0;C$99b<C$99o._caps.maxVertexAttribs;++C$99b)C$99o._enabledAttributes[C$99b]!==C$99o._newAttributes[C$99b]&&(C$99_.disableVertexAttribArray(C$99b),C$99o._enabledAttributes[C$99b]=0)}}C$99r.indexBuffer!==C$99s.indexBuffer&&C$99n.bindBuffer(C$99n.ELEMENT_ARRAY_BUFFER,C$99s.indexBuffer&&-1!==C$99s.indexBuffer._glID?C$99s.indexBuffer._glID:null);for(var C$99A,C$99C=!1,C$99S=(C$99r.program!==C$99s.program&&(C$99s.program._linked?C$99n.useProgram(C$99s.program._glID):console.warn("Failed to use program: has not linked yet."),C$99C=!0),C$99n),C$99T=C$99r,C$99w=C$99s,C$99E=0;C$99E<C$99w.maxTextureSlot+1;++C$99E)C$99T.textureUnits[C$99E]===C$99w.textureUnits[C$99E]||(C$99A=C$99w.textureUnits[C$99E])&&-1!==C$99A._glID&&(C$99S.activeTexture(C$99S.TEXTURE0+C$99E),C$99S.bindTexture(C$99A._target,C$99A._glID));for(var C$99M=0;C$99M<C$99s.program._uniforms.length;++C$99M){var C$99I,C$99B=C$99s.program._uniforms[C$99M],C$99R=this._uniforms[C$99B.name];C$99R&&(C$99C||C$99R.dirty)&&(C$99R.dirty=!1,(C$99I=(void 0===C$99B.size?C$99D:C$99L)[C$99B.type])?C$99I(C$99n,C$99B.location,C$99R.value):console.warn("Can not find commit function for uniform "+C$99B.name))}C$99u&&(C$99s.indexBuffer?C$99n.drawElements(this._next.primitiveType,C$99u,C$99s.indexBuffer._format,C$99h*C$99s.indexBuffer._bytesPerIndex):C$99n.drawArrays(this._next.primitiveType,C$99h,C$99u),this._stats.drawcalls++),C$99r.set(C$99s),C$99s.reset()};var C$99s,C$99a,C$99t=C$99c;function C$99c(C$99t,C$99e){var C$99i;void 0===(C$99e=C$99e||{}).alpha&&(C$99e.alpha=!1),void 0===C$99e.stencil&&(C$99e.stencil=!0),void 0===C$99e.depth&&(C$99e.depth=!0),void 0===C$99e.antialias&&(C$99e.antialias=!1),void 0===C$99e.preserveDrawingBuffer&&(C$99e.preserveDrawingBuffer=!1);try{C$99i=C$99t.getContext("webgl",C$99e)||C$99t.getContext("experimental-webgl",C$99e)||C$99t.getContext("webkit-3d",C$99e)||C$99t.getContext("moz-webgl",C$99e)}catch(C$99t){return void console.error(C$99t)}C$99i||console.error("This device does not support webgl"),this._gl=C$99i,this._extensions={},this._caps={},this._stats={texture:0,vb:0,ib:0,drawcalls:0},this._initExtensions(["EXT_texture_filter_anisotropic","EXT_shader_texture_lod","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","WEBGL_draw_buffers"]),this._initCaps(),this._initStates(),C$99r.default.initDefault(this),this._current=new C$99r.default(this),this._next=new C$99r.default(this),this._uniforms={},this._vx=this._vy=this._vw=this._vh=0,this._sx=this._sy=this._sw=this._sh=0,this._framebuffer=null,this._enabledAttributes=new Array(this._caps.maxVertexAttribs),this._newAttributes=new Array(this._caps.maxVertexAttribs);for(var C$99n=0;C$99n<this._caps.maxVertexAttribs;++C$99n)this._enabledAttributes[C$99n]=0,this._newAttributes[C$99n]=0}C$99e.default=C$99t,C$99l.exports=C$99e.default},{"./enums":309,"./state":316,"./texture-2d":317,"./texture-cube":318}],309:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.attrTypeBytes=function(C$99t){return C$99t===C$99s.ATTR_TYPE_INT8||C$99t===C$99s.ATTR_TYPE_UINT8?1:C$99t===C$99s.ATTR_TYPE_INT16||C$99t===C$99s.ATTR_TYPE_UINT16?2:C$99t===C$99s.ATTR_TYPE_INT32||C$99t===C$99s.ATTR_TYPE_UINT32||C$99t===C$99s.ATTR_TYPE_FLOAT32?4:(console.warn("Unknown ATTR_TYPE: "+C$99t),0)},C$99i.glFilter=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=-1);var C$99n=C$99r[C$99e][C$99i+1];return void 0!==C$99n?C$99n:(console.warn("Unknown FILTER: "+C$99e),-1===C$99i?C$99t.LINEAR:C$99t.LINEAR_MIPMAP_LINEAR)},C$99i.glTextureFmt=function(C$99t){var C$99e=C$99n[C$99t];return void 0!==C$99e?C$99e:(console.warn("Unknown TEXTURE_FMT: "+C$99t),C$99n[C$99s.TEXTURE_FMT_RGBA8])},C$99i.enums=void 0;var C$99r=[[9728,9984,9986],[9729,9985,9987]],C$99n=[{format:6407,internalFormat:33776,pixelType:null},{format:6408,internalFormat:33777,pixelType:null},{format:6408,internalFormat:33778,pixelType:null},{format:6408,internalFormat:33779,pixelType:null},{format:6407,internalFormat:36196,pixelType:null},{format:6407,internalFormat:35841,pixelType:null},{format:6408,internalFormat:35843,pixelType:null},{format:6407,internalFormat:35840,pixelType:null},{format:6408,internalFormat:35842,pixelType:null},{format:6406,internalFormat:6406,pixelType:5121},{format:6409,internalFormat:6409,pixelType:5121},{format:6410,internalFormat:6410,pixelType:5121},{format:6407,internalFormat:6407,pixelType:33635},{format:6408,internalFormat:6408,pixelType:32820},{format:6408,internalFormat:6408,pixelType:32819},{format:6407,internalFormat:6407,pixelType:5121},{format:6408,internalFormat:6408,pixelType:5121},{format:6407,internalFormat:6407,pixelType:36193},{format:6408,internalFormat:6408,pixelType:36193},{format:6407,internalFormat:6407,pixelType:5126},{format:6408,internalFormat:6408,pixelType:5126},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:null,internalFormat:null,pixelType:null},{format:6402,internalFormat:6402,pixelType:5123},{format:6402,internalFormat:6402,pixelType:5125},{format:6402,internalFormat:6402,pixelType:5125},{format:6407,internalFormat:37492,pixelType:null},{format:6408,internalFormat:37496,pixelType:null}],C$99s={USAGE_STATIC:35044,USAGE_DYNAMIC:35048,USAGE_STREAM:35040,INDEX_FMT_UINT8:5121,INDEX_FMT_UINT16:5123,INDEX_FMT_UINT32:5125,ATTR_POSITION:"a_position",ATTR_NORMAL:"a_normal",ATTR_TANGENT:"a_tangent",ATTR_BITANGENT:"a_bitangent",ATTR_WEIGHTS:"a_weights",ATTR_JOINTS:"a_joints",ATTR_COLOR:"a_color",ATTR_COLOR0:"a_color0",ATTR_COLOR1:"a_color1",ATTR_UV:"a_uv",ATTR_UV0:"a_uv0",ATTR_UV1:"a_uv1",ATTR_UV2:"a_uv2",ATTR_UV3:"a_uv3",ATTR_UV4:"a_uv4",ATTR_UV5:"a_uv5",ATTR_UV6:"a_uv6",ATTR_UV7:"a_uv7",ATTR_TEX_COORD:"a_texCoord",ATTR_TEX_COORD1:"a_texCoord1",ATTR_TEX_COORD2:"a_texCoord2",ATTR_TEX_COORD3:"a_texCoord3",ATTR_TEX_COORD4:"a_texCoord4",ATTR_TEX_COORD5:"a_texCoord5",ATTR_TEX_COORD6:"a_texCoord6",ATTR_TEX_COORD7:"a_texCoord7",ATTR_TEX_COORD8:"a_texCoord8",ATTR_TYPE_INT8:5120,ATTR_TYPE_UINT8:5121,ATTR_TYPE_INT16:5122,ATTR_TYPE_UINT16:5123,ATTR_TYPE_INT32:5124,ATTR_TYPE_UINT32:5125,ATTR_TYPE_FLOAT32:5126,FILTER_NEAREST:0,FILTER_LINEAR:1,WRAP_REPEAT:10497,WRAP_CLAMP:33071,WRAP_MIRROR:33648,TEXTURE_FMT_RGB_DXT1:0,TEXTURE_FMT_RGBA_DXT1:1,TEXTURE_FMT_RGBA_DXT3:2,TEXTURE_FMT_RGBA_DXT5:3,TEXTURE_FMT_RGB_ETC1:4,TEXTURE_FMT_RGB_PVRTC_2BPPV1:5,TEXTURE_FMT_RGBA_PVRTC_2BPPV1:6,TEXTURE_FMT_RGB_PVRTC_4BPPV1:7,TEXTURE_FMT_RGBA_PVRTC_4BPPV1:8,TEXTURE_FMT_A8:9,TEXTURE_FMT_L8:10,TEXTURE_FMT_L8_A8:11,TEXTURE_FMT_R5_G6_B5:12,TEXTURE_FMT_R5_G5_B5_A1:13,TEXTURE_FMT_R4_G4_B4_A4:14,TEXTURE_FMT_RGB8:15,TEXTURE_FMT_RGBA8:16,TEXTURE_FMT_RGB16F:17,TEXTURE_FMT_RGBA16F:18,TEXTURE_FMT_RGB32F:19,TEXTURE_FMT_RGBA32F:20,TEXTURE_FMT_R32F:21,TEXTURE_FMT_111110F:22,TEXTURE_FMT_SRGB:23,TEXTURE_FMT_SRGBA:24,TEXTURE_FMT_D16:25,TEXTURE_FMT_D32:26,TEXTURE_FMT_D24S8:27,TEXTURE_FMT_RGB_ETC2:28,TEXTURE_FMT_RGBA_ETC2:29,DS_FUNC_NEVER:512,DS_FUNC_LESS:513,DS_FUNC_EQUAL:514,DS_FUNC_LEQUAL:515,DS_FUNC_GREATER:516,DS_FUNC_NOTEQUAL:517,DS_FUNC_GEQUAL:518,DS_FUNC_ALWAYS:519,RB_FMT_RGBA4:32854,RB_FMT_RGB5_A1:32855,RB_FMT_RGB565:36194,RB_FMT_D16:33189,RB_FMT_S8:36168,RB_FMT_D24S8:34041,BLEND_FUNC_ADD:32774,BLEND_FUNC_SUBTRACT:32778,BLEND_FUNC_REVERSE_SUBTRACT:32779,BLEND_ZERO:0,BLEND_ONE:1,BLEND_SRC_COLOR:768,BLEND_ONE_MINUS_SRC_COLOR:769,BLEND_DST_COLOR:774,BLEND_ONE_MINUS_DST_COLOR:775,BLEND_SRC_ALPHA:770,BLEND_ONE_MINUS_SRC_ALPHA:771,BLEND_DST_ALPHA:772,BLEND_ONE_MINUS_DST_ALPHA:773,BLEND_CONSTANT_COLOR:32769,BLEND_ONE_MINUS_CONSTANT_COLOR:32770,BLEND_CONSTANT_ALPHA:32771,BLEND_ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_SRC_ALPHA_SATURATE:776,STENCIL_DISABLE:0,STENCIL_ENABLE:1,STENCIL_INHERIT:2,STENCIL_OP_KEEP:7680,STENCIL_OP_ZERO:0,STENCIL_OP_REPLACE:7681,STENCIL_OP_INCR:7682,STENCIL_OP_INCR_WRAP:34055,STENCIL_OP_DECR:7683,STENCIL_OP_DECR_WRAP:34056,STENCIL_OP_INVERT:5386,CULL_NONE:0,CULL_FRONT:1028,CULL_BACK:1029,CULL_FRONT_AND_BACK:1032,PT_POINTS:0,PT_LINES:1,PT_LINE_LOOP:2,PT_LINE_STRIP:3,PT_TRIANGLES:4,PT_TRIANGLE_STRIP:5,PT_TRIANGLE_FAN:6};C$99i.enums=C$99s},{}],310:[function(C$99t,C$99e,C$99i){"use strict";var C$99n;function C$99r(C$99t,C$99e,C$99i,C$99n){this._device=C$99t,this._width=C$99e,this._height=C$99i,this._colors=C$99n.colors||[],this._depth=C$99n.depth||null,this._stencil=C$99n.stencil||null,this._depthStencil=C$99n.depthStencil||null,this._glID=C$99t._gl.createFramebuffer()}C$99i.__esModule=!0,C$99i.default=void 0,(C$99n=C$99r.prototype).destroy=function(){null!==this._glID?(this._device._gl.deleteFramebuffer(this._glID),this._glID=null):console.error("The frame-buffer already destroyed")},C$99n.getHandle=function(){return this._glID},C$99i.default=C$99r,C$99e.exports=C$99i.default},{}],311:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t=C$99t("./enums");function C$99n(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}(C$99o={})[C$99t.enums.INDEX_FMT_UINT8]=1,C$99o[C$99t.enums.INDEX_FMT_UINT16]=2,C$99o[C$99t.enums.INDEX_FMT_UINT32]=4;var C$99r,C$99s=C$99o,C$99o=((C$99t=C$99a.prototype).destroy=function(){-1!==this._glID?(this._device._gl.deleteBuffer(this._glID),this._device._stats.ib-=this.bytes,this._glID=-1):console.error("The buffer already destroyed")},C$99t.update=function(C$99t,C$99e){if(-1!==this._glID){if(0!==C$99e.byteLength){if(C$99t+C$99e.byteLength>this._bytes){if(C$99t)return void console.error("Failed to update data, bytes exceed.");this._needExpandDataStore=!0,this._bytes=C$99t+C$99e.byteLength,this._numIndices=this._bytes/this._bytesPerIndex}var C$99i=this._device._gl,C$99n=this._usage;C$99i.bindBuffer(C$99i.ELEMENT_ARRAY_BUFFER,this._glID),this._needExpandDataStore?(C$99i.bufferData(C$99i.ELEMENT_ARRAY_BUFFER,C$99e,C$99n),this._needExpandDataStore=!1):C$99i.bufferSubData(C$99i.ELEMENT_ARRAY_BUFFER,C$99t,C$99e),this._device._restoreIndexBuffer()}}else console.error("The buffer is destroyed")},C$99t.setUsage=function(C$99t){this._usage=C$99t},C$99t=C$99a,(C$99o=[{key:"count",get:function(){return this._numIndices}}])&&C$99n(C$99t.prototype,C$99o),C$99r&&C$99n(C$99t,C$99r),C$99a);function C$99a(C$99t,C$99e,C$99i,C$99n){this._device=C$99t,this._format=C$99e,this._usage=C$99i,this._bytesPerIndex=C$99s[C$99e],this._bytes=C$99n.byteLength,this._numIndices=this._bytes/this._bytesPerIndex,this._needExpandDataStore=!0,this._glID=C$99t._gl.createBuffer(),this.update(0,C$99n),C$99t._stats.ib+=this._bytes}C$99o.BYTES_PER_INDEX=C$99s,C$99i.default=C$99o,C$99e.exports=C$99i.default},{"./enums":309}],312:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99t("./enums"),C$99t={VertexFormat:C$99t("./vertex-format"),IndexBuffer:C$99t("./index-buffer"),VertexBuffer:C$99t("./vertex-buffer"),Program:C$99t("./program"),Texture:C$99t("./texture"),Texture2D:C$99t("./texture-2d"),TextureCube:C$99t("./texture-cube"),RenderBuffer:C$99t("./render-buffer"),FrameBuffer:C$99t("./frame-buffer"),Device:C$99t("./device"),attrTypeBytes:C$99n.attrTypeBytes,glFilter:C$99n.glFilter,glTextureFmt:C$99n.glTextureFmt};Object.assign(C$99t,C$99n.enums),C$99i.default=C$99t,cc.gfx=C$99t,C$99e.exports=C$99i.default},{"./device":308,"./enums":309,"./frame-buffer":310,"./index-buffer":311,"./program":314,"./render-buffer":315,"./texture":319,"./texture-2d":317,"./texture-cube":318,"./vertex-buffer":320,"./vertex-format":321}],313:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.isPow2=function(C$99t){return!(C$99t&C$99t-1||!C$99t)}},{}],314:[function(C$99c,C$99t,C$99e){"use strict";function C$99i(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}C$99e.__esModule=!0,C$99e.default=void 0;var C$99n=0;function C$99m(C$99i,C$99n,C$99t){C$99t.split("\n").forEach(function(C$99t){var C$99e;C$99t.length<5||((C$99e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(C$99t))?C$99i.push({type:C$99n,fileID:0|C$99e[1],line:0|C$99e[2],message:C$99e[3].trim()}):0<C$99t.length&&C$99i.push({type:C$99n,fileID:-1,line:0,message:C$99t}))})}(C$99s=C$99a.prototype).link=function(){if(!this._linked){var C$99t=this._device._gl,C$99e=C$99y(C$99t,C$99t.VERTEX_SHADER,this._vertSource),C$99i=C$99y(C$99t,C$99t.FRAGMENT_SHADER,this._fragSource),C$99n=C$99t.createProgram(),C$99r=(C$99t.attachShader(C$99n,C$99e),C$99t.attachShader(C$99n,C$99i),C$99t.linkProgram(C$99n),!1),C$99s=this._errors;if(C$99t.getShaderParameter(C$99e,C$99t.COMPILE_STATUS)||(C$99m(C$99s,"vs",C$99t.getShaderInfoLog(C$99e)),C$99r=!0),C$99t.getShaderParameter(C$99i,C$99t.COMPILE_STATUS)||(C$99m(C$99s,"fs",C$99t.getShaderInfoLog(C$99i)),C$99r=!0),C$99t.deleteShader(C$99e),C$99t.deleteShader(C$99i),C$99r)return C$99s;if(!C$99t.getProgramParameter(C$99n,C$99t.LINK_STATUS))return C$99s.push({info:"Failed to link shader program: "+C$99t.getProgramInfoLog(C$99n)}),C$99s;this._glID=C$99n;for(var C$99h=C$99t.getProgramParameter(C$99n,C$99t.ACTIVE_ATTRIBUTES),C$99o=0;C$99o<C$99h;++C$99o){var C$99a=C$99t.getActiveAttrib(C$99n,C$99o),C$99u=C$99t.getAttribLocation(C$99n,C$99a.name);this._attributes.push({name:C$99a.name,location:C$99u,type:C$99a.type})}for(var C$99_=C$99t.getProgramParameter(C$99n,C$99t.ACTIVE_UNIFORMS),C$99c=0;C$99c<C$99_;++C$99c){var C$99d=C$99t.getActiveUniform(C$99n,C$99c),C$99l=C$99d.name,C$99f=C$99t.getUniformLocation(C$99n,C$99l),C$99p="[0]"===C$99l.substr(C$99l.length-3),C$99l={name:C$99l=C$99p?C$99l.substr(0,C$99l.length-3):C$99l,location:C$99f,type:C$99d.type,size:C$99p?C$99d.size:void 0};this._uniforms.push(C$99l)}this._linked=!0}},C$99s.destroy=function(){this._device._gl.deleteProgram(this._glID),this._linked=!1,this._glID=null,this._attributes=[],this._uniforms=[],this._samplers=[]},C$99s=C$99a,(C$99o=[{key:"id",get:function(){return this._id}}])&&C$99i(C$99s.prototype,C$99o),C$99r&&C$99i(C$99s,C$99r);var C$99r,C$99s,C$99o=C$99a;function C$99a(C$99t,C$99e){this._device=C$99t,this._attributes=[],this._uniforms=[],this._samplers=[],this._errors=[],this._linked=!1,this._vertSource=C$99e.vert,this._fragSource=C$99e.frag,this._glID=null,this._id=C$99n++}function C$99y(C$99t,C$99e,C$99i){C$99e=C$99t.createShader(C$99e);return C$99t.shaderSource(C$99e,C$99i),C$99t.compileShader(C$99e),C$99e}C$99e.default=C$99o,C$99t.exports=C$99e.default},{}],315:[function(C$99t,C$99e,C$99i){"use strict";var C$99n;function C$99r(C$99t,C$99e,C$99i,C$99n){this._device=C$99t,this._format=C$99e,this._glID=C$99t._gl.createRenderbuffer(),this.update(C$99i,C$99n)}C$99i.__esModule=!0,C$99i.default=void 0,(C$99n=C$99r.prototype).update=function(C$99t,C$99e){this._width=C$99t,this._height=C$99e;var C$99i=this._device._gl;C$99i.bindRenderbuffer(C$99i.RENDERBUFFER,this._glID),C$99i.renderbufferStorage(C$99i.RENDERBUFFER,this._format,C$99t,C$99e),C$99i.bindRenderbuffer(C$99i.RENDERBUFFER,null)},C$99n.destroy=function(){var C$99t;null!==this._glID?((C$99t=this._device._gl).bindRenderbuffer(C$99t.RENDERBUFFER,null),C$99t.deleteRenderbuffer(this._glID),this._glID=null):console.error("The render-buffer already destroyed")},C$99i.default=C$99r,C$99e.exports=C$99i.default},{}],316:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99t=C$99t("./enums"),C$99n={blend:!1,blendSep:!1,blendColor:4294967295,blendEq:C$99t.enums.BLEND_FUNC_ADD,blendAlphaEq:C$99t.enums.BLEND_FUNC_ADD,blendSrc:C$99t.enums.BLEND_ONE,blendDst:C$99t.enums.BLEND_ZERO,blendSrcAlpha:C$99t.enums.BLEND_ONE,blendDstAlpha:C$99t.enums.BLEND_ZERO,depthTest:!1,depthWrite:!1,depthFunc:C$99t.enums.DS_FUNC_LESS,stencilTest:!1,stencilSep:!1,stencilFuncFront:C$99t.enums.DS_FUNC_ALWAYS,stencilRefFront:0,stencilMaskFront:255,stencilFailOpFront:C$99t.enums.STENCIL_OP_KEEP,stencilZFailOpFront:C$99t.enums.STENCIL_OP_KEEP,stencilZPassOpFront:C$99t.enums.STENCIL_OP_KEEP,stencilWriteMaskFront:255,stencilFuncBack:C$99t.enums.DS_FUNC_ALWAYS,stencilRefBack:0,stencilMaskBack:255,stencilFailOpBack:C$99t.enums.STENCIL_OP_KEEP,stencilZFailOpBack:C$99t.enums.STENCIL_OP_KEEP,stencilZPassOpBack:C$99t.enums.STENCIL_OP_KEEP,stencilWriteMaskBack:255,cullMode:C$99t.enums.CULL_BACK,primitiveType:C$99t.enums.PT_TRIANGLES,maxStream:-1,vertexBuffers:[],vertexBufferOffsets:[],indexBuffer:null,maxTextureSlot:-1,textureUnits:[],program:null};function C$99r(C$99t){this.vertexBuffers=new Array(C$99t._caps.maxVertexStreams),this.vertexBufferOffsets=new Array(C$99t._caps.maxVertexStreams),this.textureUnits=new Array(C$99t._caps.maxTextureUnits),this.set(C$99n)}C$99r.initDefault=function(C$99t){C$99n.vertexBuffers=new Array(C$99t._caps.maxVertexStreams),C$99n.vertexBufferOffsets=new Array(C$99t._caps.maxVertexStreams),C$99n.textureUnits=new Array(C$99t._caps.maxTextureUnits)},(C$99t=C$99r.prototype).reset=function(){this.set(C$99n)},C$99t.set=function(C$99t){this.blend=C$99t.blend,this.blendSep=C$99t.blendSep,this.blendColor=C$99t.blendColor,this.blendEq=C$99t.blendEq,this.blendAlphaEq=C$99t.blendAlphaEq,this.blendSrc=C$99t.blendSrc,this.blendDst=C$99t.blendDst,this.blendSrcAlpha=C$99t.blendSrcAlpha,this.blendDstAlpha=C$99t.blendDstAlpha,this.depthTest=C$99t.depthTest,this.depthWrite=C$99t.depthWrite,this.depthFunc=C$99t.depthFunc,this.stencilTest=C$99t.stencilTest,this.stencilSep=C$99t.stencilSep,this.stencilFuncFront=C$99t.stencilFuncFront,this.stencilRefFront=C$99t.stencilRefFront,this.stencilMaskFront=C$99t.stencilMaskFront,this.stencilFailOpFront=C$99t.stencilFailOpFront,this.stencilZFailOpFront=C$99t.stencilZFailOpFront,this.stencilZPassOpFront=C$99t.stencilZPassOpFront,this.stencilWriteMaskFront=C$99t.stencilWriteMaskFront,this.stencilFuncBack=C$99t.stencilFuncBack,this.stencilRefBack=C$99t.stencilRefBack,this.stencilMaskBack=C$99t.stencilMaskBack,this.stencilFailOpBack=C$99t.stencilFailOpBack,this.stencilZFailOpBack=C$99t.stencilZFailOpBack,this.stencilZPassOpBack=C$99t.stencilZPassOpBack,this.stencilWriteMaskBack=C$99t.stencilWriteMaskBack,this.cullMode=C$99t.cullMode,this.primitiveType=C$99t.primitiveType,this.maxStream=C$99t.maxStream;for(var C$99e=0;C$99e<C$99t.vertexBuffers.length;++C$99e)this.vertexBuffers[C$99e]=C$99t.vertexBuffers[C$99e];for(var C$99i=0;C$99i<C$99t.vertexBufferOffsets.length;++C$99i)this.vertexBufferOffsets[C$99i]=C$99t.vertexBufferOffsets[C$99i];this.indexBuffer=C$99t.indexBuffer,this.maxTextureSlot=C$99t.maxTextureSlot;for(var C$99n=0;C$99n<C$99t.textureUnits.length;++C$99n)this.textureUnits[C$99n]=C$99t.textureUnits[C$99n];this.program=C$99t.program},C$99i.default=C$99r,C$99e.exports=C$99i.default},{"./enums":309}],317:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99n=C$99t("./texture"))&&C$99n.__esModule?C$99n:{default:C$99n},C$99o=C$99t("./enums"),C$99s=C$99t("./misc");function C$99r(C$99i){return function(){var C$99t,C$99e=C$99a(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99a(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99a(C$99t){return(C$99a=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99c=C$99n.default,C$99t=C$99c,(C$99n=C$99l).prototype=Object.create(C$99t.prototype),(C$99n.prototype.constructor=C$99n).__proto__=C$99t,C$99r(C$99l),(C$99n=C$99l.prototype).update=function(C$99t){var C$99e,C$99i,C$99n=this._device._gl,C$99r=this._genMipmap;C$99t&&(void 0!==C$99t.width&&(this._width=C$99t.width),void 0!==C$99t.height&&(this._height=C$99t.height),void 0!==C$99t.anisotropy&&(this._anisotropy=C$99t.anisotropy),void 0!==C$99t.minFilter&&(this._minFilter=C$99t.minFilter),void 0!==C$99t.magFilter&&(this._magFilter=C$99t.magFilter),void 0!==C$99t.mipFilter&&(this._mipFilter=C$99t.mipFilter),void 0!==C$99t.wrapS&&(this._wrapS=C$99t.wrapS),void 0!==C$99t.wrapT&&(this._wrapT=C$99t.wrapT),void 0!==C$99t.format&&(this._format=C$99t.format,this._compressed=this._format>=C$99o.enums.TEXTURE_FMT_RGB_DXT1&&this._format<=C$99o.enums.TEXTURE_FMT_RGBA_PVRTC_4BPPV1||this._format>=C$99o.enums.TEXTURE_FMT_RGB_ETC2&&this._format<=C$99o.enums.TEXTURE_FMT_RGBA_ETC2),void 0!==C$99t.genMipmaps&&(this._genMipmap=C$99t.genMipmaps,C$99r=C$99t.genMipmaps),(C$99e=this._device.caps.maxTextureSize||Number.MAX_VALUE)<(C$99i=Math.max(C$99t.width||0,C$99t.height||0))&&console.warn("The current texture size "+C$99i+" exceeds the maximum size ["+C$99e+"] supported on the device."),void 0!==C$99t.images&&1<C$99t.images.length&&(C$99r=!1,(C$99t.width>C$99t.height?C$99t.width:C$99t.height)>>C$99t.images.length-1!=1&&console.error("texture-2d mipmap is invalid, should have a 1x1 mipmap."))),(0,C$99s.isPow2)(this._width)&&(0,C$99s.isPow2)(this._height)||(C$99r=!1),C$99n.activeTexture(C$99n.TEXTURE0),C$99n.bindTexture(C$99n.TEXTURE_2D,this._glID),void 0!==C$99t.images&&0<C$99t.images.length&&(this._setMipmap(C$99t.images,C$99t.flipY,C$99t.premultiplyAlpha),1<C$99t.images.length&&(this._genMipmap=!0)),C$99r&&(C$99n.hint(C$99n.GENERATE_MIPMAP_HINT,C$99n.NICEST),C$99n.generateMipmap(C$99n.TEXTURE_2D),this._genMipmap=!0),this._setTexInfo(),this._device._restoreTexture(0)},C$99n.updateSubImage=function(C$99t){var C$99e=this._device._gl,C$99i=(0,C$99o.glTextureFmt)(this._format);C$99e.activeTexture(C$99e.TEXTURE0),C$99e.bindTexture(C$99e.TEXTURE_2D,this._glID),this._setSubImage(C$99i,C$99t),this._device._restoreTexture(0)},C$99n.updateImage=function(C$99t){var C$99e=this._device._gl,C$99i=(0,C$99o.glTextureFmt)(this._format);C$99e.activeTexture(C$99e.TEXTURE0),C$99e.bindTexture(C$99e.TEXTURE_2D,this._glID),this._setImage(C$99i,C$99t),this._device._restoreTexture(0)},C$99n._setSubImage=function(C$99t,C$99e){var C$99i=this._device._gl,C$99n=C$99e.flipY,C$99r=C$99e.premultiplyAlpha,C$99s=C$99e.image;!C$99s||ArrayBuffer.isView(C$99s)||C$99s instanceof ArrayBuffer?(void 0===C$99n?C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,C$99n),void 0===C$99r?C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$99r),this._compressed?C$99i.compressedTexSubImage2D(C$99i.TEXTURE_2D,C$99e.level,C$99e.x,C$99e.y,C$99e.width,C$99e.height,C$99t.format,C$99s):C$99i.texSubImage2D(C$99i.TEXTURE_2D,C$99e.level,C$99e.x,C$99e.y,C$99e.width,C$99e.height,C$99t.format,C$99t.pixelType,C$99s)):(void 0===C$99n?C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,!0):C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,C$99n),void 0===C$99r?C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$99r),C$99i.texSubImage2D(C$99i.TEXTURE_2D,C$99e.level,C$99e.x,C$99e.y,C$99t.format,C$99t.pixelType,C$99s))},C$99n._setImage=function(C$99t,C$99e){var C$99i=this._device._gl,C$99n=C$99e.flipY,C$99r=C$99e.premultiplyAlpha,C$99s=C$99e.image;!C$99s||ArrayBuffer.isView(C$99s)||C$99s instanceof ArrayBuffer?(void 0===C$99n?C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,C$99n),void 0===C$99r?C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$99r),this._compressed?C$99i.compressedTexImage2D(C$99i.TEXTURE_2D,C$99e.level,C$99t.internalFormat,C$99e.width,C$99e.height,0,C$99s):C$99i.texImage2D(C$99i.TEXTURE_2D,C$99e.level,C$99t.internalFormat,C$99e.width,C$99e.height,0,C$99t.format,C$99t.pixelType,C$99s)):(void 0===C$99n?C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,!0):C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,C$99n),void 0===C$99r?C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$99r),C$99i.texImage2D(C$99i.TEXTURE_2D,C$99e.level,C$99t.internalFormat,C$99t.format,C$99t.pixelType,C$99s))},C$99n._setMipmap=function(C$99t,C$99e,C$99i){for(var C$99n=(0,C$99o.glTextureFmt)(this._format),C$99r={width:this._width,height:this._height,flipY:C$99e,premultiplyAlpha:C$99i,level:0,image:null},C$99s=0;C$99s<C$99t.length;++C$99s)C$99r.level=C$99s,C$99r.width=this._width>>C$99s,C$99r.height=this._height>>C$99s,C$99r.image=C$99t[C$99s],this._setImage(C$99n,C$99r)},C$99n._setTexInfo=function(){var C$99t=this._device._gl,C$99e=(0,C$99s.isPow2)(this._width)&&(0,C$99s.isPow2)(this._height),C$99i=(C$99e||this._wrapS===C$99o.enums.WRAP_CLAMP&&this._wrapT===C$99o.enums.WRAP_CLAMP||(console.warn("WebGL1 doesn't support all wrap modes with NPOT textures"),this._wrapS=C$99o.enums.WRAP_CLAMP,this._wrapT=C$99o.enums.WRAP_CLAMP),this._genMipmap?this._mipFilter:-1),C$99e=(C$99e||-1===C$99i||(console.warn("NPOT textures do not support mipmap filter"),C$99i=-1),C$99t.texParameteri(C$99t.TEXTURE_2D,C$99t.TEXTURE_MIN_FILTER,(0,C$99o.glFilter)(C$99t,this._minFilter,C$99i)),C$99t.texParameteri(C$99t.TEXTURE_2D,C$99t.TEXTURE_MAG_FILTER,(0,C$99o.glFilter)(C$99t,this._magFilter,-1)),C$99t.texParameteri(C$99t.TEXTURE_2D,C$99t.TEXTURE_WRAP_S,this._wrapS),C$99t.texParameteri(C$99t.TEXTURE_2D,C$99t.TEXTURE_WRAP_T,this._wrapT),this._device.ext("EXT_texture_filter_anisotropic"));C$99e&&C$99t.texParameteri(C$99t.TEXTURE_2D,C$99e.TEXTURE_MAX_ANISOTROPY_EXT,this._anisotropy)};var C$99c,C$99t=C$99l;function C$99l(C$99t,C$99e){var C$99t=C$99c.call(this,C$99t)||this,C$99i=C$99t._device._gl;return C$99t._target=C$99i.TEXTURE_2D,C$99t._glID=C$99i.createTexture(),C$99e.images=C$99e.images||[null],C$99t.update(C$99e),C$99t}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"./enums":309,"./misc":313,"./texture":319}],318:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99n=C$99t("./texture"))&&C$99n.__esModule?C$99n:{default:C$99n},C$99c=C$99t("./enums"),C$99r=C$99t("./misc");function C$99s(C$99i){return function(){var C$99t,C$99e=C$99o(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99o(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99o(C$99t){return(C$99o=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}C$99a=C$99n.default,C$99t=C$99a,(C$99n=C$99l).prototype=Object.create(C$99t.prototype),(C$99n.prototype.constructor=C$99n).__proto__=C$99t,C$99s(C$99l),(C$99n=C$99l.prototype).update=function(C$99t){var C$99e=this._device._gl,C$99i=this._genMipmaps;C$99t&&(void 0!==C$99t.width&&(this._width=C$99t.width),void 0!==C$99t.height&&(this._height=C$99t.height),void 0!==C$99t.anisotropy&&(this._anisotropy=C$99t.anisotropy),void 0!==C$99t.minFilter&&(this._minFilter=C$99t.minFilter),void 0!==C$99t.magFilter&&(this._magFilter=C$99t.magFilter),void 0!==C$99t.mipFilter&&(this._mipFilter=C$99t.mipFilter),void 0!==C$99t.wrapS&&(this._wrapS=C$99t.wrapS),void 0!==C$99t.wrapT&&(this._wrapT=C$99t.wrapT),void 0!==C$99t.format&&(this._format=C$99t.format,this._compressed=this._format>=C$99c.enums.TEXTURE_FMT_RGB_DXT1&&this._format<=C$99c.enums.TEXTURE_FMT_RGBA_PVRTC_4BPPV1||this._format>=C$99c.enums.TEXTURE_FMT_RGB_ETC2&&this._format<=C$99c.enums.TEXTURE_FMT_RGBA_ETC2),void 0!==C$99t.genMipmaps&&(this._genMipmaps=C$99t.genMipmaps,C$99i=C$99t.genMipmaps),void 0!==C$99t.images&&1<C$99t.images.length&&(C$99i=!1,C$99t.width!==C$99t.height&&console.warn("texture-cube width and height should be identical."),C$99t.width>>C$99t.images.length-1!=1&&console.error("texture-cube mipmap is invalid. please set mipmap as 1x1, 2x2, 4x4 ... nxn"))),(0,C$99r.isPow2)(this._width)&&(0,C$99r.isPow2)(this._height)||(C$99i=!1),C$99e.activeTexture(C$99e.TEXTURE0),C$99e.bindTexture(C$99e.TEXTURE_CUBE_MAP,this._glID),void 0!==C$99t.images&&0<C$99t.images.length&&(this._setMipmap(C$99t.images,C$99t.flipY,C$99t.premultiplyAlpha),1<C$99t.images.length&&(this._genMipmaps=!0)),C$99i&&(C$99e.hint(C$99e.GENERATE_MIPMAP_HINT,C$99e.NICEST),C$99e.generateMipmap(C$99e.TEXTURE_CUBE_MAP),this._genMipmaps=!0),this._setTexInfo(),this._device._restoreTexture(0)},C$99n.updateSubImage=function(C$99t){var C$99e=this._device._gl,C$99i=(0,C$99c.glTextureFmt)(this._format);C$99e.activeTexture(C$99e.TEXTURE0),C$99e.bindTexture(C$99e.TEXTURE_CUBE_MAP,this._glID),this._setSubImage(C$99i,C$99t),this._device._restoreTexture(0)},C$99n.updateImage=function(C$99t){var C$99e=this._device._gl,C$99i=(0,C$99c.glTextureFmt)(this._format);C$99e.activeTexture(C$99e.TEXTURE0),C$99e.bindTexture(C$99e.TEXTURE_CUBE_MAP,this._glID),this._setImage(C$99i,C$99t),this._device._restoreTexture(0)},C$99n._setSubImage=function(C$99t,C$99e){var C$99i=this._device._gl,C$99n=C$99e.flipY,C$99r=C$99e.premultiplyAlpha,C$99s=C$99e.faceIndex,C$99o=C$99e.image;void 0===C$99n?C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,C$99n),void 0===C$99r?C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$99r),!C$99o||ArrayBuffer.isView(C$99o)||C$99o instanceof ArrayBuffer?this._compressed?C$99i.compressedTexSubImage2D(C$99i.TEXTURE_CUBE_MAP_POSITIVE_X+C$99s,C$99e.level,C$99e.x,C$99e.y,C$99e.width,C$99e.height,C$99t.format,C$99o):C$99i.texSubImage2D(C$99i.TEXTURE_CUBE_MAP_POSITIVE_X+C$99s,C$99e.level,C$99e.x,C$99e.y,C$99e.width,C$99e.height,C$99t.format,C$99t.pixelType,C$99o):C$99i.texSubImage2D(C$99i.TEXTURE_CUBE_MAP_POSITIVE_X+C$99s,C$99e.level,C$99e.x,C$99e.y,C$99t.format,C$99t.pixelType,C$99o)},C$99n._setImage=function(C$99t,C$99e){var C$99i=this._device._gl,C$99n=C$99e.flipY,C$99r=C$99e.premultiplyAlpha,C$99s=C$99e.faceIndex,C$99o=C$99e.image;void 0===C$99n?C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_FLIP_Y_WEBGL,C$99n),void 0===C$99r?C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1):C$99i.pixelStorei(C$99i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C$99r),!C$99o||ArrayBuffer.isView(C$99o)||C$99o instanceof ArrayBuffer?this._compressed?C$99i.compressedTexImage2D(C$99i.TEXTURE_CUBE_MAP_POSITIVE_X+C$99s,C$99e.level,C$99t.internalFormat,C$99e.width,C$99e.height,0,C$99o):C$99i.texImage2D(C$99i.TEXTURE_CUBE_MAP_POSITIVE_X+C$99s,C$99e.level,C$99t.internalFormat,C$99e.width,C$99e.height,0,C$99t.format,C$99t.pixelType,C$99o):C$99i.texImage2D(C$99i.TEXTURE_CUBE_MAP_POSITIVE_X+C$99s,C$99e.level,C$99t.internalFormat,C$99t.format,C$99t.pixelType,C$99o)},C$99n._setMipmap=function(C$99t,C$99e,C$99i){for(var C$99n=(0,C$99c.glTextureFmt)(this._format),C$99r={width:this._width,height:this._height,faceIndex:0,flipY:C$99e,premultiplyAlpha:C$99i,level:0,image:null},C$99s=0;C$99s<C$99t.length;++C$99s){var C$99o=C$99t[C$99s];C$99r.level=C$99s,C$99r.width=this._width>>C$99s,C$99r.height=this._height>>C$99s;for(var C$99a=0;C$99a<6;++C$99a)C$99r.faceIndex=C$99a,C$99r.image=C$99o[C$99a],this._setImage(C$99n,C$99r)}},C$99n._setTexInfo=function(){var C$99t=this._device._gl,C$99e=(0,C$99r.isPow2)(this._width)&&(0,C$99r.isPow2)(this._height),C$99i=(C$99e||this._wrapS===C$99c.enums.WRAP_CLAMP&&this._wrapT===C$99c.enums.WRAP_CLAMP||(console.warn("WebGL1 doesn't support all wrap modes with NPOT textures"),this._wrapS=C$99c.enums.WRAP_CLAMP,this._wrapT=C$99c.enums.WRAP_CLAMP),this._genMipmaps?this._mipFilter:-1),C$99e=(C$99e||-1===C$99i||(console.warn("NPOT textures do not support mipmap filter"),C$99i=-1),C$99t.texParameteri(C$99t.TEXTURE_CUBE_MAP,C$99t.TEXTURE_MIN_FILTER,(0,C$99c.glFilter)(C$99t,this._minFilter,C$99i)),C$99t.texParameteri(C$99t.TEXTURE_CUBE_MAP,C$99t.TEXTURE_MAG_FILTER,(0,C$99c.glFilter)(C$99t,this._magFilter,-1)),C$99t.texParameteri(C$99t.TEXTURE_CUBE_MAP,C$99t.TEXTURE_WRAP_S,this._wrapS),C$99t.texParameteri(C$99t.TEXTURE_CUBE_MAP,C$99t.TEXTURE_WRAP_T,this._wrapT),this._device.ext("EXT_texture_filter_anisotropic"));C$99e&&C$99t.texParameteri(C$99t.TEXTURE_CUBE_MAP,C$99e.TEXTURE_MAX_ANISOTROPY_EXT,this._anisotropy)};var C$99a,C$99t=C$99l;function C$99l(C$99t,C$99e){var C$99t=C$99a.call(this,C$99t)||this,C$99i=C$99t._device._gl;return C$99t._target=C$99i.TEXTURE_CUBE_MAP,C$99t._glID=C$99i.createTexture(),C$99t.update(C$99e),C$99t}C$99i.default=C$99t,C$99e.exports=C$99i.default},{"./enums":309,"./misc":313,"./texture":319}],319:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99t("./enums"),C$99r=0;function C$99s(C$99t){this._device=C$99t,this._width=4,this._height=4,this._genMipmaps=!1,this._compressed=!1,this._anisotropy=1,this._minFilter=C$99n.enums.FILTER_LINEAR,this._magFilter=C$99n.enums.FILTER_LINEAR,this._mipFilter=C$99n.enums.FILTER_LINEAR,this._wrapS=C$99n.enums.WRAP_REPEAT,this._wrapT=C$99n.enums.WRAP_REPEAT,this._format=C$99n.enums.TEXTURE_FMT_RGBA8,this._target=-1,this._id=C$99r++}C$99s.prototype.destroy=function(){null!==this._glID?(this._device._gl.deleteTexture(this._glID),this._device._stats.tex-=this.bytes,this._glID=null):console.error("The texture already destroyed")},C$99i.default=C$99s,C$99e.exports=C$99i.default},{"./enums":309}],320:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;C$99t("./enums");function C$99n(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}(C$99t=C$99o.prototype).destroy=function(){-1!==this._glID?(this._device._gl.deleteBuffer(this._glID),this._device._stats.vb-=this.bytes,this._glID=-1):console.error("The buffer already destroyed")},C$99t.update=function(C$99t,C$99e){if(-1!==this._glID){if(0!==C$99e.byteLength){if(C$99t+C$99e.byteLength>this._bytes){if(C$99t)return void console.error("Failed to update data, bytes exceed.");this._needExpandDataStore=!0,this._bytes=C$99t+C$99e.byteLength,this._numVertices=this._bytes/this._bytesPerVertex}var C$99i=this._device._gl,C$99n=this._usage;C$99i.bindBuffer(C$99i.ARRAY_BUFFER,this._glID),this._needExpandDataStore?(C$99i.bufferData(C$99i.ARRAY_BUFFER,C$99e,C$99n),this._needExpandDataStore=!1):C$99i.bufferSubData(C$99i.ARRAY_BUFFER,C$99t,C$99e),C$99i.bindBuffer(C$99i.ARRAY_BUFFER,null)}}else console.error("The buffer is destroyed")},C$99t.getFormat=function(C$99t){return this._format.element(C$99t)},C$99t.setUsage=function(C$99t){this._usage=C$99t},C$99t=C$99o,(C$99s=[{key:"count",get:function(){return this._numVertices}}])&&C$99n(C$99t.prototype,C$99s),C$99r&&C$99n(C$99t,C$99r);var C$99r,C$99s=C$99o;function C$99o(C$99t,C$99e,C$99i,C$99n){this._device=C$99t,this._format=C$99e,this._usage=C$99i,this._bytesPerVertex=this._format._bytes,this._bytes=C$99n.byteLength,this._numVertices=this._bytes/this._bytesPerVertex,this._needExpandDataStore=!0,this._glID=C$99t._gl.createBuffer(),this.update(0,C$99n),C$99t._stats.vb+=this._bytes}C$99i.default=C$99s,C$99e.exports=C$99i.default},{"./enums":309}],321:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99a=C$99t("./enums"),C$99c=(C$99t=C$99t("../murmurhash2_gc"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99n(C$99t){this._attr2el={},this._elements=[];for(var C$99e="",C$99i=this._bytes=0,C$99n=C$99t.length;C$99i<C$99n;++C$99i){var C$99r=C$99t[C$99i],C$99r={name:C$99r.name,offset:this._bytes,stride:0,stream:-1,type:C$99r.type,num:C$99r.num,normalize:void 0!==C$99r.normalize&&C$99r.normalize,bytes:C$99r.num*(0,C$99a.attrTypeBytes)(C$99r.type)};this._attr2el[C$99r.name]=C$99r,this._elements.push(C$99r),this._bytes+=C$99r.bytes,C$99e+=C$99r.name+":"+C$99r.num+":"+C$99r.type+":"+C$99r.normalize}for(var C$99s=0,C$99o=this._elements.length;C$99s<C$99o;++C$99s)this._elements[C$99s].stride=this._bytes;this._hash=(0,C$99c.default)(C$99e,666)}(C$99t=C$99n.prototype).element=function(C$99t){return this._attr2el[C$99t]},C$99t.getHash=function(){return this._hash},C$99i.default=C$99n,C$99e.exports=C$99i.default},{"../murmurhash2_gc":330,"./enums":309}],322:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(C$99t,C$99e){this._cursor=0,this._data=new Array(C$99e);for(var C$99i=0;C$99i<C$99e;++C$99i)this._data[C$99i]=C$99t()}C$99i.__esModule=!0,C$99i.default=void 0,C$99n.prototype.request=function(){var C$99t=this._data[this._cursor];return this._cursor=(this._cursor+1)%this._data.length,C$99t},C$99i.default=C$99n,C$99e.exports=C$99i.default},{}],323:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99t=C$99t("./timsort"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99r(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}(C$99t=C$99a.prototype)._resize=function(C$99t){if(C$99t>this._data.length)for(var C$99e=this._data.length;C$99e<C$99t;++C$99e)this._data[C$99e]=void 0},C$99t.reset=function(){for(var C$99t=0;C$99t<this._count;++C$99t)this._data[C$99t]=void 0;this._count=0},C$99t.push=function(C$99t){this._count>=this._data.length&&this._resize(2*this._data.length),this._data[this._count]=C$99t,++this._count},C$99t.pop=function(){--this._count,this._count<0&&(this._count=0);var C$99t=this._data[this._count];return this._data[this._count]=void 0,C$99t},C$99t.fastRemove=function(C$99t){var C$99e;C$99t>=this._count||C$99t<0||(C$99e=this._count-1,this._data[C$99t]=this._data[C$99e],this._data[C$99e]=void 0,--this._count)},C$99t.indexOf=function(C$99t){return this._data.indexOf(C$99t)},C$99t.sort=function(C$99t){return(0,C$99n.default)(this._data,0,this._count,C$99t)},C$99t=C$99a,(C$99o=[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}])&&C$99r(C$99t.prototype,C$99o),C$99s&&C$99r(C$99t,C$99s);var C$99s,C$99o=C$99a;function C$99a(C$99t){this._count=0,this._data=new Array(C$99t)}C$99i.default=C$99o,C$99e.exports=C$99i.default},{"./timsort":328}],324:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.TypedArrayPool=C$99i.RecyclePool=C$99i.Pool=C$99i.LinkedArray=C$99i.FixedArray=C$99i.CircularPool=void 0;var C$99n=C$99r(C$99t("./circular-pool")),C$99n=(C$99i.CircularPool=C$99n.default,C$99r(C$99t("./fixed-array"))),C$99n=(C$99i.FixedArray=C$99n.default,C$99r(C$99t("./linked-array"))),C$99n=(C$99i.LinkedArray=C$99n.default,C$99r(C$99t("./pool"))),C$99n=(C$99i.Pool=C$99n.default,C$99r(C$99t("./recycle-pool"))),C$99n=(C$99i.RecyclePool=C$99n.default,C$99r(C$99t("./typed-array-pool")));function C$99r(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}C$99i.TypedArrayPool=C$99n.default},{"./circular-pool":322,"./fixed-array":323,"./linked-array":325,"./pool":326,"./recycle-pool":327,"./typed-array-pool":329}],325:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99t=C$99t("./pool"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99r(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}(C$99t=C$99a.prototype).add=function(){var C$99t=this._pool.alloc();return this._tail?(this._tail._next=C$99t)._prev=this._tail:this._head=C$99t,this._tail=C$99t,this._count+=1,C$99t},C$99t.remove=function(C$99t){C$99t._prev?C$99t._prev._next=C$99t._next:this._head=C$99t._next,C$99t._next?C$99t._next._prev=C$99t._prev:this._tail=C$99t._prev,C$99t._next=null,C$99t._prev=null,this._pool.free(C$99t),--this._count},C$99t.forEach=function(C$99t,C$99e){var C$99i=this._head;if(C$99i){C$99e&&(C$99t=C$99t.bind(C$99e));for(var C$99n,C$99r=0;C$99i;)C$99n=C$99i._next,C$99t(C$99i,C$99r,this),C$99i=C$99n,++C$99r}},C$99t=C$99a,(C$99o=[{key:"head",get:function(){return this._head}},{key:"tail",get:function(){return this._tail}},{key:"length",get:function(){return this._count}}])&&C$99r(C$99t.prototype,C$99o),C$99s&&C$99r(C$99t,C$99s);var C$99s,C$99o=C$99a;function C$99a(C$99t,C$99e){this._fn=C$99t,this._count=0,this._head=null,this._tail=null,this._pool=new C$99n.default(C$99t,C$99e)}C$99i.default=C$99o,C$99e.exports=C$99i.default},{"./pool":326}],326:[function(C$99t,C$99e,C$99i){"use strict";var C$99n;function C$99r(C$99t,C$99e){this._fn=C$99t,this._idx=C$99e-1,this._frees=new Array(C$99e);for(var C$99i=0;C$99i<C$99e;++C$99i)this._frees[C$99i]=C$99t()}C$99i.__esModule=!0,C$99i.default=void 0,(C$99n=C$99r.prototype)._expand=function(C$99t){for(var C$99e=this._frees,C$99i=(this._frees=new Array(C$99t),C$99t-C$99e.length),C$99n=0;C$99n<C$99i;++C$99n)this._frees[C$99n]=this._fn();for(var C$99r=C$99i,C$99s=0;C$99r<C$99t;++C$99r,++C$99s)this._frees[C$99r]=C$99e[C$99s];this._idx+=C$99i},C$99n.alloc=function(){this._idx<0&&this._expand(Math.round(1.2*this._frees.length)+1);var C$99t=this._frees[this._idx];return this._frees[this._idx]=null,--this._idx,C$99t},C$99n.free=function(C$99t){++this._idx,this._frees[this._idx]=C$99t},C$99n.clear=function(C$99t){for(var C$99e=0;C$99e<=this._idx;C$99e++)C$99t&&C$99t(this._frees[C$99e]);this._frees.length=0,this._idx=-1},C$99i.default=C$99r,C$99e.exports=C$99i.default},{}],327:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99t=C$99t("./timsort"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99r(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}(C$99t=C$99a.prototype).reset=function(){this._count=0},C$99t.resize=function(C$99t){if(C$99t>this._data.length)for(var C$99e=this._data.length;C$99e<C$99t;++C$99e)this._data[C$99e]=this._fn()},C$99t.add=function(){return this._count>=this._data.length&&this.resize(2*this._data.length),this._data[this._count++]},C$99t.remove=function(C$99t){var C$99e,C$99i;C$99t>=this._count||(C$99e=this._count-1,C$99i=this._data[C$99t],this._data[C$99t]=this._data[C$99e],this._data[C$99e]=C$99i,--this._count)},C$99t.sort=function(C$99t){return(0,C$99n.default)(this._data,0,this._count,C$99t)},C$99t=C$99a,(C$99o=[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}])&&C$99r(C$99t.prototype,C$99o),C$99s&&C$99r(C$99t,C$99s);var C$99s,C$99o=C$99a;function C$99a(C$99t,C$99e){this._fn=C$99t,this._count=0,this._data=new Array(C$99e);for(var C$99i=0;C$99i<C$99e;++C$99i)this._data[C$99i]=C$99t()}C$99i.default=C$99o,cc.RecyclePool=C$99o,C$99e.exports=C$99i.default},{"./timsort":328}],328:[function(C$99n,C$99r,C$99t){"use strict";C$99t.__esModule=!0,C$99t.default=function(C$99t,C$99e,C$99i,C$99n){if(!Array.isArray(C$99t))throw new TypeError("Can only sort arrays");void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=C$99t.length),void 0===C$99n&&(C$99n=C$99_);var C$99r=C$99i-C$99e;if(!(C$99r<2)){var C$99s=0;if(C$99r<C$99l)C$99s=C$99h(C$99t,C$99e,C$99i,C$99n),C$99u(C$99t,C$99e,C$99i,C$99e+C$99s,C$99n);else{var C$99o,C$99a=new C$99d(C$99t,C$99n),C$99c=function(C$99t){var C$99e=0;for(;C$99l<=C$99t;)C$99e|=1&C$99t,C$99t>>=1;return C$99t+C$99e}(C$99r);do{}while((C$99s=C$99h(C$99t,C$99e,C$99i,C$99n))<C$99c&&(C$99u(C$99t,C$99e,C$99e+(C$99o=C$99c<(C$99o=C$99r)?C$99c:C$99o),C$99e+C$99s,C$99n),C$99s=C$99o),C$99a.pushRun(C$99e,C$99s),C$99a.mergeRuns(),C$99e+=C$99s,0!==(C$99r-=C$99s));C$99a.forceMergeRuns()}}};var C$99l=32,C$99s=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function C$99o(C$99t){return C$99t<1e5?C$99t<100?C$99t<10?0:1:C$99t<1e4?C$99t<1e3?2:3:4:C$99t<1e7?C$99t<1e6?5:6:C$99t<1e9?C$99t<1e8?7:8:9}function C$99_(C$99t,C$99e){if(C$99t===C$99e)return 0;if(~~C$99t===C$99t&&~~C$99e===C$99e){if(0===C$99t||0===C$99e)return C$99t<C$99e?-1:1;if(C$99t<0||C$99e<0){if(0<=C$99e)return-1;if(0<=C$99t)return 1;C$99t=-C$99t,C$99e=-C$99e}var C$99i=C$99o(C$99t),C$99n=C$99o(C$99e),C$99r=0;return C$99i<C$99n?(C$99t*=C$99s[C$99n-C$99i-1],C$99e/=10,C$99r=-1):C$99n<C$99i&&(C$99e*=C$99s[C$99i-C$99n-1],C$99t/=10,C$99r=1),C$99t===C$99e?C$99r:C$99t<C$99e?-1:1}C$99i=String(C$99t),C$99n=String(C$99e);return C$99i===C$99n?0:C$99i<C$99n?-1:1}function C$99h(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99e+1;if(C$99r===C$99i)return 1;if(C$99n(C$99t[C$99r++],C$99t[C$99e])<0){for(;C$99r<C$99i&&C$99n(C$99t[C$99r],C$99t[C$99r-1])<0;)C$99r++;var C$99s=C$99t,C$99o=C$99e,C$99a=C$99r;for(C$99a--;C$99o<C$99a;){var C$99c=C$99s[C$99o];C$99s[C$99o++]=C$99s[C$99a],C$99s[C$99a--]=C$99c}}else for(;C$99r<C$99i&&0<=C$99n(C$99t[C$99r],C$99t[C$99r-1]);)C$99r++;return C$99r-C$99e}function C$99u(C$99t,C$99e,C$99i,C$99n,C$99r){for(C$99n===C$99e&&C$99n++;C$99n<C$99i;C$99n++){for(var C$99s=C$99t[C$99n],C$99o=C$99e,C$99a=C$99n;C$99o<C$99a;){var C$99c=C$99o+C$99a>>>1;C$99r(C$99s,C$99t[C$99c])<0?C$99a=C$99c:C$99o=1+C$99c}var C$99l=C$99n-C$99o;switch(C$99l){case 3:C$99t[C$99o+3]=C$99t[C$99o+2];case 2:C$99t[C$99o+2]=C$99t[C$99o+1];case 1:C$99t[C$99o+1]=C$99t[C$99o];break;default:for(;0<C$99l;)C$99t[C$99o+C$99l]=C$99t[C$99o+C$99l-1],C$99l--}C$99t[C$99o]=C$99s}}function C$99y(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=0,C$99a=0,C$99c=1;if(0<C$99s(C$99t,C$99e[C$99i+C$99r])){for(C$99a=C$99n-C$99r;C$99c<C$99a&&0<C$99s(C$99t,C$99e[C$99i+C$99r+C$99c]);)(C$99c=1+((C$99o=C$99c)<<1))<=0&&(C$99c=C$99a);C$99a<C$99c&&(C$99c=C$99a),C$99o+=C$99r,C$99c+=C$99r}else{for(C$99a=C$99r+1;C$99c<C$99a&&C$99s(C$99t,C$99e[C$99i+C$99r-C$99c])<=0;)(C$99c=1+((C$99o=C$99c)<<1))<=0&&(C$99c=C$99a);C$99n=C$99o,C$99o=C$99r-(C$99c=C$99a<C$99c?C$99a:C$99c),C$99c=C$99r-C$99n}for(C$99o++;C$99o<C$99c;){var C$99l=C$99o+(C$99c-C$99o>>>1);0<C$99s(C$99t,C$99e[C$99i+C$99l])?C$99o=C$99l+1:C$99c=C$99l}return C$99c}function C$99g(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=0,C$99a=0,C$99c=1;if(C$99s(C$99t,C$99e[C$99i+C$99r])<0){for(C$99a=C$99r+1;C$99c<C$99a&&C$99s(C$99t,C$99e[C$99i+C$99r-C$99c])<0;)(C$99c=1+((C$99o=C$99c)<<1))<=0&&(C$99c=C$99a);var C$99h=C$99o,C$99o=C$99r-(C$99c=C$99a<C$99c?C$99a:C$99c),C$99c=C$99r-C$99h}else{for(C$99a=C$99n-C$99r;C$99c<C$99a&&0<=C$99s(C$99t,C$99e[C$99i+C$99r+C$99c]);)(C$99c=1+((C$99o=C$99c)<<1))<=0&&(C$99c=C$99a);C$99a<C$99c&&(C$99c=C$99a),C$99o+=C$99r,C$99c+=C$99r}for(C$99o++;C$99o<C$99c;){var C$99l=C$99o+(C$99c-C$99o>>>1);C$99s(C$99t,C$99e[C$99i+C$99l])<0?C$99c=C$99l:C$99o=C$99l+1}return C$99c}(C$99e=C$99i.prototype).pushRun=function(C$99t,C$99e){this.runStart[this.stackSize]=C$99t,this.runLength[this.stackSize]=C$99e,this.stackSize+=1},C$99e.mergeRuns=function(){for(;1<this.stackSize;){var C$99t=this.stackSize-2;if(1<=C$99t&&this.runLength[C$99t-1]<=this.runLength[C$99t]+this.runLength[C$99t+1]||2<=C$99t&&this.runLength[C$99t-2]<=this.runLength[C$99t]+this.runLength[C$99t-1])this.runLength[C$99t-1]<this.runLength[C$99t+1]&&C$99t--;else if(this.runLength[C$99t]>this.runLength[C$99t+1])break;this.mergeAt(C$99t)}},C$99e.forceMergeRuns=function(){for(;1<this.stackSize;){var C$99t=this.stackSize-2;0<C$99t&&this.runLength[C$99t-1]<this.runLength[C$99t+1]&&C$99t--,this.mergeAt(C$99t)}},C$99e.mergeAt=function(C$99t){var C$99e=this.compare,C$99i=this.array,C$99n=this.runStart[C$99t],C$99r=this.runLength[C$99t],C$99s=this.runStart[C$99t+1],C$99o=this.runLength[C$99t+1],C$99t=(this.runLength[C$99t]=C$99r+C$99o,C$99t===this.stackSize-3&&(this.runStart[C$99t+1]=this.runStart[C$99t+2],this.runLength[C$99t+1]=this.runLength[C$99t+2]),this.stackSize--,C$99g(C$99i[C$99s],C$99i,C$99n,C$99r,0,C$99e));C$99n+=C$99t,0!=(C$99r-=C$99t)&&0!==(C$99o=C$99y(C$99i[C$99n+C$99r-1],C$99i,C$99s,C$99o,C$99o-1,C$99e))&&(C$99r<=C$99o?this.mergeLow(C$99n,C$99r,C$99s,C$99o):this.mergeHigh(C$99n,C$99r,C$99s,C$99o))},C$99e.mergeLow=function(C$99h,C$99t,C$99u,C$99e){for(var C$99_=this.compare,C$99i=this.array,C$99n=this.tmp,C$99r=0,C$99r=0;C$99r<C$99t;C$99r++)C$99n[C$99r]=C$99i[C$99h+C$99r];var C$99s=0,C$99o=C$99u,C$99a=C$99h;if(C$99i[C$99a++]=C$99i[C$99o++],0!=--C$99e)if(1!==C$99t){for(var C$99d=this.minGallop;;){var C$99c=0,C$99l=0,C$99f=!1;do{if(C$99_(C$99i[C$99o],C$99n[C$99s])<0){if(C$99i[C$99a++]=C$99i[C$99o++],C$99l++,(C$99c=0)==--C$99e){C$99f=!0;break}}else if(C$99i[C$99a++]=C$99n[C$99s++],C$99c++,C$99l=0,1==--C$99t){C$99f=!0;break}}while((C$99c|C$99l)<C$99d);if(C$99f)break;do{if(0!==(C$99c=C$99g(C$99i[C$99o],C$99n,C$99s,C$99t,0,C$99_))){for(C$99r=0;C$99r<C$99c;C$99r++)C$99i[C$99a+C$99r]=C$99n[C$99s+C$99r];if(C$99a+=C$99c,C$99s+=C$99c,(C$99t-=C$99c)<=1){C$99f=!0;break}}if(C$99i[C$99a++]=C$99i[C$99o++],0==--C$99e){C$99f=!0;break}if(0!==(C$99l=C$99y(C$99n[C$99s],C$99i,C$99o,C$99e,0,C$99_))){for(C$99r=0;C$99r<C$99l;C$99r++)C$99i[C$99a+C$99r]=C$99i[C$99o+C$99r];if(C$99a+=C$99l,C$99o+=C$99l,0===(C$99e-=C$99l)){C$99f=!0;break}}if(C$99i[C$99a++]=C$99n[C$99s++],1==--C$99t){C$99f=!0;break}}while(C$99d--,7<=C$99c||7<=C$99l);if(C$99f)break;C$99d<0&&(C$99d=0),C$99d+=2}if((this.minGallop=C$99d)<1&&(this.minGallop=1),1===C$99t){for(C$99r=0;C$99r<C$99e;C$99r++)C$99i[C$99a+C$99r]=C$99i[C$99o+C$99r];C$99i[C$99a+C$99e]=C$99n[C$99s]}else{if(0===C$99t)throw new Error("mergeLow preconditions were not respected");for(C$99r=0;C$99r<C$99t;C$99r++)C$99i[C$99a+C$99r]=C$99n[C$99s+C$99r]}}else{for(C$99r=0;C$99r<C$99e;C$99r++)C$99i[C$99a+C$99r]=C$99i[C$99o+C$99r];C$99i[C$99a+C$99e]=C$99n[C$99s]}else for(C$99r=0;C$99r<C$99t;C$99r++)C$99i[C$99a+C$99r]=C$99n[C$99s+C$99r]},C$99e.mergeHigh=function(C$99h,C$99t,C$99u,C$99e){for(var C$99_=this.compare,C$99i=this.array,C$99n=this.tmp,C$99r=0,C$99r=0;C$99r<C$99e;C$99r++)C$99n[C$99r]=C$99i[C$99u+C$99r];var C$99s=C$99h+C$99t-1,C$99d=C$99e-1,C$99o=C$99u+C$99e-1,C$99a=0,C$99f=0;if(C$99i[C$99o--]=C$99i[C$99s--],0!=--C$99t)if(1!==C$99e){for(var C$99p=this.minGallop;;){var C$99c=0,C$99l=0,C$99m=!1;do{if(C$99_(C$99n[C$99d],C$99i[C$99s])<0){if(C$99i[C$99o--]=C$99i[C$99s--],C$99c++,(C$99l=0)==--C$99t){C$99m=!0;break}}else if(C$99i[C$99o--]=C$99n[C$99d--],C$99l++,C$99c=0,1==--C$99e){C$99m=!0;break}}while((C$99c|C$99l)<C$99p);if(C$99m)break;do{if(0!==(C$99c=C$99t-C$99g(C$99n[C$99d],C$99i,C$99h,C$99t,C$99t-1,C$99_))){for(C$99t-=C$99c,C$99f=(C$99o-=C$99c)+1,C$99a=(C$99s-=C$99c)+1,C$99r=C$99c-1;0<=C$99r;C$99r--)C$99i[C$99f+C$99r]=C$99i[C$99a+C$99r];if(0===C$99t){C$99m=!0;break}}if(C$99i[C$99o--]=C$99n[C$99d--],1==--C$99e){C$99m=!0;break}if(0!==(C$99l=C$99e-C$99y(C$99i[C$99s],C$99n,0,C$99e,C$99e-1,C$99_))){for(C$99e-=C$99l,C$99f=(C$99o-=C$99l)+1,C$99a=(C$99d-=C$99l)+1,C$99r=0;C$99r<C$99l;C$99r++)C$99i[C$99f+C$99r]=C$99n[C$99a+C$99r];if(C$99e<=1){C$99m=!0;break}}if(C$99i[C$99o--]=C$99i[C$99s--],0==--C$99t){C$99m=!0;break}}while(C$99p--,7<=C$99c||7<=C$99l);if(C$99m)break;C$99p<0&&(C$99p=0),C$99p+=2}if((this.minGallop=C$99p)<1&&(this.minGallop=1),1===C$99e){for(C$99f=(C$99o-=C$99t)+1,C$99a=(C$99s-=C$99t)+1,C$99r=C$99t-1;0<=C$99r;C$99r--)C$99i[C$99f+C$99r]=C$99i[C$99a+C$99r];C$99i[C$99o]=C$99n[C$99d]}else{if(0===C$99e)throw new Error("mergeHigh preconditions were not respected");for(C$99a=C$99o-(C$99e-1),C$99r=0;C$99r<C$99e;C$99r++)C$99i[C$99a+C$99r]=C$99n[C$99r]}}else{for(C$99f=(C$99o-=C$99t)+1,C$99a=(C$99s-=C$99t)+1,C$99r=C$99t-1;0<=C$99r;C$99r--)C$99i[C$99f+C$99r]=C$99i[C$99a+C$99r];C$99i[C$99o]=C$99n[C$99d]}else for(C$99a=C$99o-(C$99e-1),C$99r=0;C$99r<C$99e;C$99r++)C$99i[C$99a+C$99r]=C$99n[C$99r]};var C$99e,C$99d=C$99i;function C$99i(C$99t,C$99e){this.array=C$99t,this.compare=C$99e,this.minGallop=7,this.length=C$99t.length,this.tmpStorageLength=256,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength),this.stackSize=0}C$99r.exports=C$99t.default},{}],329:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;for(var C$99n=Array(8),C$99r=0;C$99r<8;++C$99r)C$99n[C$99r]=[];function C$99s(C$99t){var C$99e,C$99i=(65535<C$99t)<<4;return(C$99i=(C$99i|=C$99e=(255<(C$99t>>>=C$99i))<<3)|(C$99e=(15<(C$99t>>>=C$99e))<<2)|(C$99e=(3<(C$99t>>>=C$99e))<<1))|(C$99t>>>=C$99e)>>1}function C$99o(C$99t){var C$99t=function(C$99t){for(var C$99e=16;C$99e<=1<<28;C$99e*=16)if(C$99t<=C$99e)return C$99e;return 0}(C$99t),C$99e=C$99n[C$99s(C$99t)>>2];return 0<C$99e.length?C$99e.pop():new ArrayBuffer(C$99t)}C$99i.default={alloc_int8:function(C$99t){var C$99e=new Int8Array(C$99o(C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_uint8:function(C$99t){var C$99e=new Uint8Array(C$99o(C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_int16:function(C$99t){var C$99e=new Int16Array(C$99o(2*C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_uint16:function(C$99t){var C$99e=new Uint16Array(C$99o(2*C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_int32:function(C$99t){var C$99e=new Int32Array(C$99o(4*C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_uint32:function(C$99t){var C$99e=new Uint32Array(C$99o(4*C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_float32:function(C$99t){var C$99e=new Float32Array(C$99o(4*C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_float64:function(C$99t){var C$99e=new Float64Array(C$99o(8*C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},alloc_dataview:function(C$99t){var C$99e=new DataView(C$99o(C$99t),0,C$99t);return C$99e.length!==C$99t?C$99e.subarray(0,C$99t):C$99e},free:function(C$99t){C$99t=C$99t.buffer,C$99n[C$99s(C$99t.byteLength)>>2].push(C$99t)},reset:function(){for(var C$99t=Array(8),C$99e=0;C$99e<8;++C$99e)C$99t[C$99e]=[]}},C$99e.exports=C$99i.default},{}],330:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=function(C$99t,C$99e){var C$99i,C$99n=C$99t.length,C$99r=C$99e^C$99n,C$99s=0;for(;4<=C$99n;)C$99i=1540483477*(65535&(C$99i=255&C$99t.charCodeAt(C$99s)|(255&C$99t.charCodeAt(++C$99s))<<8|(255&C$99t.charCodeAt(++C$99s))<<16|(255&C$99t.charCodeAt(++C$99s))<<24))+((1540483477*(C$99i>>>16)&65535)<<16),C$99r=1540483477*(65535&C$99r)+((1540483477*(C$99r>>>16)&65535)<<16)^(C$99i=1540483477*(65535&(C$99i^=C$99i>>>24))+((1540483477*(C$99i>>>16)&65535)<<16)),C$99n-=4,++C$99s;switch(C$99n){case 3:C$99r^=(255&C$99t.charCodeAt(C$99s+2))<<16;case 2:C$99r^=(255&C$99t.charCodeAt(C$99s+1))<<8;case 1:C$99r=1540483477*(65535&(C$99r^=255&C$99t.charCodeAt(C$99s)))+((1540483477*(C$99r>>>16)&65535)<<16)}return C$99r=1540483477*(65535&(C$99r^=C$99r>>>13))+((1540483477*(C$99r>>>16)&65535)<<16),(C$99r^=C$99r>>>15)>>>0},C$99e.exports=C$99i.default},{}],331:[function(C$99t,C$99h,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99r=C$99t("../../core/value-types"),C$99i=C$99_(C$99t("../core/base-renderer")),C$99u=C$99_(C$99t("../enums")),C$99t=C$99t("../memop");function C$99_(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}function C$99d(C$99n){return function(){var C$99t,C$99e,C$99i=C$99f(C$99n);return C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99f(this).constructor,Reflect.construct(C$99i,arguments,C$99t)):C$99i.apply(this,arguments),C$99i=this,!(C$99e=C$99t)||"object"!=typeof C$99e&&"function"!=typeof C$99e?C$99s(C$99i):C$99e}}function C$99s(C$99t){if(void 0===C$99t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99t}function C$99f(C$99t){return(C$99f=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99n,C$99p=new Float32Array(16),C$99m=new Float32Array(16),C$99y=new Float32Array(16),C$99g=new Float32Array(16),C$99v=new Float32Array(4),C$99x=new Float32Array(64),C$99b=[],C$99A=new Float32Array(4),C$99o=new C$99r.Vec4(0,0,0,0),C$99C=new C$99r.Vec3(0,0,0),C$99a=new C$99r.Vec3(0,0,0),C$99c=new C$99t.RecyclePool(function(){return new Float32Array(16)},8),C$99t=(C$99n=C$99i.default,C$99t=C$99n,(C$99i=C$99l).prototype=Object.create(C$99t.prototype),(C$99i.prototype.constructor=C$99i).__proto__=C$99t,C$99d(C$99l),(C$99i=C$99l.prototype).reset=function(){C$99c.reset(),C$99n.prototype.reset.call(this)},C$99i.render=function(C$99t,C$99e){this.reset(),this._time[0]+=C$99e,this._device.setUniform("cc_time",this._time),this._updateLights(C$99t);for(var C$99i=this._device._gl.canvas,C$99n=0;C$99n<C$99t._cameras.length;++C$99n){var C$99r=this._requestView(),C$99s=C$99i.width,C$99o=C$99i.height;C$99t._cameras.data[C$99n].extractView(C$99r,C$99s,C$99o)}this._viewPools.sort(function(C$99t,C$99e){return C$99t._priority-C$99e._priority});for(var C$99a=0;C$99a<this._viewPools.length;++C$99a){var C$99c=this._viewPools.data[C$99a];this._render(C$99c,C$99t)}},C$99i.renderCamera=function(C$99t,C$99e){this.reset();var C$99i=this._device._gl.canvas,C$99n=C$99i.width,C$99i=C$99i.height,C$99r=this._requestView();C$99t.extractView(C$99r,C$99n,C$99i),this._render(C$99r,C$99e)},C$99i._updateLights=function(C$99t){this._lights.length=0,this._shadowLights.length=0;for(var C$99e=C$99t._lights,C$99i=0;C$99i<C$99e.length;++C$99i){var C$99n,C$99r=C$99e.data[C$99i];C$99r.update(this._device),C$99r.shadowType!==C$99u.default.SHADOW_NONE?(this._shadowLights.length<2&&this._shadowLights.splice(0,0,C$99r),C$99n=this._requestView(),C$99r.extractView(C$99n,["shadowcast"]),this._lights.splice(0,0,C$99r)):this._lights.push(C$99r)}this._updateLightDefines(),this._numLights=C$99e._count},C$99i._updateLightDefines=function(){for(var C$99t=this._defines,C$99e=0;C$99e<this._lights.length;++C$99e){var C$99i=this._lights[C$99e];C$99t["CC_LIGHT_"+C$99e+"_TYPE"]=C$99i._type,C$99t["CC_SHADOW_"+C$99e+"_TYPE"]=C$99i._shadowType}C$99t.CC_NUM_LIGHTS=Math.min(4,this._lights.length),C$99t.CC_NUM_SHADOW_LIGHTS=Math.min(4,this._shadowLights.length)},C$99i._submitLightsUniforms=function(){var C$99t=this._device;if(0<this._lights.length){for(var C$99e=C$99c.add(),C$99i=C$99c.add(),C$99n=C$99c.add(),C$99r=Math.min(4,this._lights.length),C$99s=0;C$99s<C$99r;++C$99s){var C$99o=this._lights[C$99s],C$99a=4*C$99s;C$99n.set(C$99o._colorUniform,C$99a),C$99i.set(C$99o._directionUniform,C$99a),C$99e.set(C$99o._positionUniform,C$99a),C$99e[3+C$99a]=C$99o._range,C$99o._type===C$99u.default.LIGHT_SPOT?(C$99i[3+C$99a]=C$99o._spotUniform[0],C$99n[3+C$99a]=C$99o._spotUniform[1]):(C$99i[3+C$99a]=0,C$99n[3+C$99a]=0)}C$99t.setUniform("cc_lightDirection",C$99i),C$99t.setUniform("cc_lightColor",C$99n),C$99t.setUniform("cc_lightPositionAndRange",C$99e)}},C$99i._submitShadowStageUniforms=function(C$99t){var C$99e=C$99t._shadowLight,C$99i=C$99A;C$99i[0]=C$99e.shadowMinDepth,C$99i[1]=C$99e.shadowMaxDepth,C$99i[2]=C$99e.shadowDepthScale,C$99i[3]=C$99e.shadowDarkness,this._device.setUniform("cc_shadow_map_lightViewProjMatrix",C$99r.Mat4.toArray(C$99g,C$99t._matViewProj)),this._device.setUniform("cc_shadow_map_info",C$99i),this._device.setUniform("cc_shadow_map_bias",C$99e.shadowBias),this._defines.CC_SHADOW_TYPE=C$99e._shadowType},C$99i._submitOtherStagesUniforms=function(){for(var C$99t=C$99c.add(),C$99e=0;C$99e<this._shadowLights.length;++C$99e){var C$99i=this._shadowLights[C$99e],C$99n=(C$99n=C$99b[C$99e])||(C$99b[C$99e]=new Float32Array(C$99x.buffer,64*C$99e,16)),C$99n=(C$99r.Mat4.toArray(C$99n,C$99i.viewProjMatrix),4*C$99e);C$99t[C$99n]=C$99i.shadowMinDepth,C$99t[1+C$99n]=C$99i.shadowMaxDepth,C$99t[2+C$99n]=C$99i._shadowResolution,C$99t[3+C$99n]=C$99i.shadowDarkness}this._device.setUniform("cc_shadow_lightViewProjMatrix",C$99x),this._device.setUniform("cc_shadow_info",C$99t)},C$99i._sortItems=function(C$99t){C$99t.sort(function(C$99t,C$99e){return C$99t.passes.length!==C$99e.passes.length?C$99t.passes.length-C$99e.passes.length:C$99t.sortKey-C$99e.sortKey})},C$99i._shadowStage=function(C$99t,C$99e){this._submitShadowStageUniforms(C$99t);for(var C$99i=0;C$99i<C$99e.length;++C$99i){var C$99n=C$99e.data[C$99i];C$99n.effect.getDefine("CC_CASTING_SHADOW")&&this._draw(C$99n)}},C$99i._drawItems=function(C$99t,C$99e){var C$99i=this._shadowLights;if(0===C$99i.length&&0===this._numLights)for(var C$99n=0;C$99n<C$99e.length;++C$99n){var C$99r=C$99e.data[C$99n];this._draw(C$99r)}else for(var C$99s=0;C$99s<C$99e.length;++C$99s){for(var C$99o=C$99e.data[C$99s],C$99a=0;C$99a<C$99i.length;++C$99a)this._device.setTexture("cc_shadow_map_"+C$99a,C$99i[C$99a].shadowMap,this._allocTextureUnit());this._draw(C$99o)}},C$99i._opaqueStage=function(C$99t,C$99e){C$99t.getPosition(C$99o),this._device.setUniform("cc_matView",C$99r.Mat4.toArray(C$99p,C$99t._matView)),this._device.setUniform("cc_matViewInv",C$99r.Mat4.toArray(C$99m,C$99t._matViewInv)),this._device.setUniform("cc_matpProj",C$99r.Mat4.toArray(C$99y,C$99t._matProj)),this._device.setUniform("cc_matViewProj",C$99r.Mat4.toArray(C$99g,C$99t._matViewProj)),this._device.setUniform("cc_cameraPos",C$99r.Vec4.toArray(C$99v,C$99o)),this._submitLightsUniforms(),this._submitOtherStagesUniforms(),this._drawItems(C$99t,C$99e)},C$99i._transparentStage=function(C$99t,C$99e){C$99t.getPosition(C$99o),C$99t.getForward(C$99C),this._device.setUniform("cc_matView",C$99r.Mat4.toArray(C$99p,C$99t._matView)),this._device.setUniform("cc_matViewInv",C$99r.Mat4.toArray(C$99m,C$99t._matViewInv)),this._device.setUniform("cc_matpProj",C$99r.Mat4.toArray(C$99y,C$99t._matProj)),this._device.setUniform("cc_matViewProj",C$99r.Mat4.toArray(C$99g,C$99t._matViewProj)),this._device.setUniform("cc_cameraPos",C$99r.Vec4.toArray(C$99v,C$99o)),this._submitLightsUniforms(),this._submitOtherStagesUniforms();for(var C$99i=0;C$99i<C$99e.length;++C$99i){var C$99n=C$99e.data[C$99i];C$99n.node.getWorldPosition(C$99a),C$99r.Vec3.sub(C$99a,C$99a,C$99o),C$99n.sortKey=-C$99r.Vec3.dot(C$99a,C$99C)}this._sortItems(C$99e),this._drawItems(C$99t,C$99e)},C$99l);function C$99l(C$99t,C$99e){C$99t=C$99n.call(this,C$99t,C$99e)||this;return C$99t._time=new Float32Array(4),C$99t._lights=[],C$99t._shadowLights=[],C$99t._numLights=0,C$99t._defines={},C$99t._registerStage("shadowcast",C$99t._shadowStage.bind(C$99s(C$99t))),C$99t._registerStage("opaque",C$99t._opaqueStage.bind(C$99s(C$99t))),C$99t._registerStage("transparent",C$99t._transparentStage.bind(C$99s(C$99t))),C$99t}C$99e.default=C$99t,C$99h.exports=C$99e.default},{"../../core/value-types":279,"../core/base-renderer":301,"../enums":307,"../memop":324}],332:[function(C$99t,C$99i,C$99e){"use strict";C$99e.__esModule=!0,C$99e.default=void 0;var C$99a=C$99t("../../core/value-types"),C$99_=C$99t("../../core/geom-utils"),C$99c=(C$99t=C$99t("../enums"))&&C$99t.__esModule?C$99t:{default:C$99t};function C$99s(C$99t,C$99e){for(var C$99i=0;C$99i<C$99e.length;C$99i++){var C$99n=C$99e[C$99i];C$99n.enumerable=C$99n.enumerable||!1,C$99n.configurable=!0,"value"in C$99n&&(C$99n.writable=!0),Object.defineProperty(C$99t,C$99n.key,C$99n)}}var C$99d,C$99r=new C$99a.Mat4,C$99f=new C$99a.Mat4,C$99p=new C$99a.Mat4,C$99n=new C$99a.Mat4,C$99o=new C$99a.Mat4,C$99l=new C$99a.Mat4,C$99h=new C$99a.Vec3,C$99u=new C$99a.Vec3,C$99m=((C$99t=C$99y.prototype).setCullingMask=function(C$99t){this._cullingMask=C$99t},C$99t.getNode=function(){return this._node},C$99t.setNode=function(C$99t){this._node=C$99t},C$99t.getType=function(){return this._projection},C$99t.setType=function(C$99t){this._projection=C$99t},C$99t.getPriority=function(){return this._priority},C$99t.setPriority=function(C$99t){this._priority=C$99t},C$99t.getOrthoHeight=function(){return this._orthoHeight},C$99t.setOrthoHeight=function(C$99t){this._orthoHeight=C$99t},C$99t.getFov=function(){return this._fov},C$99t.setFov=function(C$99t){this._fov=C$99t},C$99t.getNear=function(){return this._near},C$99t.setNear=function(C$99t){this._near=C$99t},C$99t.getFar=function(){return this._far},C$99t.setFar=function(C$99t){this._far=C$99t},C$99t.getColor=function(C$99t){return C$99a.Vec4.copy(C$99t,this._color)},C$99t.setColor=function(C$99t,C$99e,C$99i,C$99n){C$99a.Vec4.set(this._color,C$99t,C$99e,C$99i,C$99n)},C$99t.getDepth=function(){return this._depth},C$99t.setDepth=function(C$99t){this._depth=C$99t},C$99t.getStencil=function(){return this._stencil},C$99t.setStencil=function(C$99t){this._stencil=C$99t},C$99t.getClearFlags=function(){return this._clearFlags},C$99t.setClearFlags=function(C$99t){this._clearFlags=C$99t},C$99t.getRect=function(C$99t){return C$99t.x=this._rect.x,C$99t.y=this._rect.y,C$99t.w=this._rect.w,C$99t.h=this._rect.h,C$99t},C$99t.setRect=function(C$99t,C$99e,C$99i,C$99n){this._rect.x=C$99t,this._rect.y=C$99e,this._rect.w=C$99i,this._rect.h=C$99n},C$99t.getStages=function(){return this._stages},C$99t.setStages=function(C$99t){this._stages=C$99t},C$99t.getFramebuffer=function(){return this._framebuffer},C$99t.setFrameBuffer=function(C$99t){this._framebuffer=C$99t},C$99t._calcMatrices=function(C$99t,C$99e){this._node.getWorldRT(C$99p),C$99a.Mat4.invert(C$99f,C$99p);var C$99t=C$99t/C$99e;this._projection===C$99c.default.PROJ_PERSPECTIVE?C$99a.Mat4.perspective(C$99n,this._fov,C$99t,this._near,this._far):(C$99e=this._orthoHeight*C$99t,C$99t=this._orthoHeight,C$99a.Mat4.ortho(C$99n,-C$99e,C$99e,-C$99t,C$99t,this._near,this._far)),C$99a.Mat4.mul(C$99o,C$99n,C$99f),C$99a.Mat4.invert(C$99l,C$99o)},C$99t.extractView=function(C$99t,C$99e,C$99i){this._framebuffer&&(C$99e=this._framebuffer._width,C$99i=this._framebuffer._height),C$99t._priority=this._priority,C$99t._rect.x=this._rect.x*C$99e,C$99t._rect.y=this._rect.y*C$99i,C$99t._rect.w=this._rect.w*C$99e,C$99t._rect.h=this._rect.h*C$99i,this.getColor(C$99t._color),C$99t._depth=this._depth,C$99t._stencil=this._stencil,C$99t._clearFlags=this._clearFlags,C$99t._clearModel=this._clearModel,C$99t._stages=this._stages,C$99t._framebuffer=this._framebuffer,this._calcMatrices(C$99e,C$99i),C$99a.Mat4.copy(C$99t._matView,C$99f),C$99a.Mat4.copy(C$99t._matViewInv,C$99p),C$99a.Mat4.copy(C$99t._matProj,C$99n),C$99a.Mat4.copy(C$99t._matViewProj,C$99o),C$99a.Mat4.copy(C$99t._matInvViewProj,C$99l),C$99t._cullingMask=this._cullingMask},C$99t.screenPointToRay=function(C$99t,C$99e,C$99i,C$99n,C$99r){if(!cc.geomUtils)return C$99r;C$99r=C$99r||new C$99_.Ray,this._calcMatrices(C$99i,C$99n);var C$99s=this._rect.x*C$99i,C$99o=this._rect.y*C$99n,C$99i=this._rect.w*C$99i,C$99n=this._rect.h*C$99n;return C$99a.Vec3.set(C$99u,(C$99t-C$99s)/C$99i*2-1,(C$99e-C$99o)/C$99n*2-1,1),C$99a.Vec3.transformMat4(C$99u,C$99u,C$99l),this._projection===C$99c.default.PROJ_PERSPECTIVE?this._node.getWorldPosition(C$99h):(C$99a.Vec3.set(C$99h,(C$99t-C$99s)/C$99i*2-1,(C$99e-C$99o)/C$99n*2-1,-1),C$99a.Vec3.transformMat4(C$99h,C$99h,C$99l)),C$99_.Ray.fromPoints(C$99r,C$99h,C$99u)},C$99t.screenToWorld=function(C$99t,C$99e,C$99i,C$99n){this._calcMatrices(C$99i,C$99n);var C$99r=this._rect.x*C$99i,C$99s=this._rect.y*C$99n,C$99i=this._rect.w*C$99i,C$99n=this._rect.h*C$99n;return this._projection===C$99c.default.PROJ_PERSPECTIVE?(C$99a.Vec3.set(C$99t,(C$99e.x-C$99r)/C$99i*2-1,(C$99e.y-C$99s)/C$99n*2-1,.9999),C$99a.Vec3.transformMat4(C$99t,C$99t,C$99l),this._node.getWorldPosition(C$99h),C$99a.Vec3.lerp(C$99t,C$99h,C$99t,(0,C$99a.lerp)(this._near/this._far,1,C$99e.z))):(C$99a.Vec3.set(C$99t,(C$99e.x-C$99r)/C$99i*2-1,(C$99e.y-C$99s)/C$99n*2-1,2*C$99e.z-1),C$99a.Vec3.transformMat4(C$99t,C$99t,C$99l)),C$99t},C$99t.worldToScreen=function(C$99t,C$99e,C$99i,C$99n){this._calcMatrices(C$99i,C$99n);var C$99r=this._rect.x*C$99i,C$99s=this._rect.y*C$99n,C$99i=this._rect.w*C$99i,C$99n=this._rect.h*C$99n;return C$99a.Vec3.transformMat4(C$99t,C$99e,C$99o),C$99t.x=C$99r+.5*(C$99t.x+1)*C$99i,C$99t.y=C$99s+.5*(C$99t.y+1)*C$99n,C$99t.z=.5*C$99t.z+.5,C$99t},C$99t.worldMatrixToScreen=function(C$99t,C$99e,C$99i,C$99n){this._calcMatrices(C$99i,C$99n),C$99a.Mat4.mul(C$99t,C$99o,C$99e);C$99e=C$99i/2,C$99i=C$99n/2;return C$99a.Mat4.identity(C$99r),C$99a.Mat4.transform(C$99r,C$99r,C$99a.Vec3.set(C$99h,C$99e,C$99i,0)),C$99a.Mat4.scale(C$99r,C$99r,C$99a.Vec3.set(C$99h,C$99e,C$99i,1)),C$99a.Mat4.mul(C$99t,C$99r,C$99t),C$99t},C$99t=C$99y,(C$99m=[{key:"cullingMask",get:function(){return this._cullingMask},set:function(C$99t){this._cullingMask=C$99t}}])&&C$99s(C$99t.prototype,C$99m),C$99d&&C$99s(C$99t,C$99d),C$99y);function C$99y(){this._poolID=-1,this._node=null,this._projection=C$99c.default.PROJ_PERSPECTIVE,this._priority=0,this._color=new C$99a.Vec4(.2,.3,.47,1),this._depth=1,this._stencil=0,this._clearFlags=C$99c.default.CLEAR_COLOR|C$99c.default.CLEAR_DEPTH,this._clearModel=null,this._stages=[],this._framebuffer=null,this._near=.01,this._far=1e3,this._fov=Math.PI/4,this._rect={x:0,y:0,w:1,h:1},this._orthoHeight=10,this._cullingMask=4294967295}C$99e.default=C$99m,C$99i.exports=C$99e.default},{"../../core/geom-utils":123,"../../core/value-types":279,"../enums":307}],333:[function(C$99t,C$99e,C$99i){"use strict";var C$99n;function C$99r(){this._type="default",this._poolID=-1,this._node=null,this._inputAssembler=null,this._effect=null,this._viewID=-1,this._cameraID=-1,this._userKey=-1,this._castShadow=!1,this._boundingShape=null}C$99i.__esModule=!0,C$99i.default=void 0,(C$99n=C$99r.prototype).setNode=function(C$99t){this._node=C$99t},C$99n.setInputAssembler=function(C$99t){this._inputAssembler=C$99t},C$99n.setEffect=function(C$99t){this._effect=C$99t},C$99n.setUserKey=function(C$99t){this._userKey=C$99t},C$99n.extractDrawItem=function(C$99t){C$99t.model=this,C$99t.node=this._node,C$99t.ia=this._inputAssembler,C$99t.effect=this._effect},C$99i.default=C$99r,C$99e.exports=C$99i.default},{}],334:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=C$99t("../memop");function C$99r(C$99t){this._lights=new C$99n.FixedArray(16),this._models=new C$99n.FixedArray(16),this._cameras=new C$99n.FixedArray(16),this._debugCamera=null,this._app=C$99t,this._views=[]}(C$99t=C$99r.prototype)._add=function(C$99t,C$99e){-1===C$99e._poolID&&(C$99t.push(C$99e),C$99e._poolID=C$99t.length-1)},C$99t._remove=function(C$99t,C$99e){-1!==C$99e._poolID&&(C$99t.data[C$99t.length-1]._poolID=C$99e._poolID,C$99t.fastRemove(C$99e._poolID),C$99e._poolID=-1)},C$99t.reset=function(){for(var C$99t=0;C$99t<this._models.length;++C$99t)this._models.data[C$99t]._viewID=-1},C$99t.setDebugCamera=function(C$99t){this._debugCamera=C$99t},C$99t.getCameraCount=function(){return this._cameras.length},C$99t.getCamera=function(C$99t){return this._cameras.data[C$99t]},C$99t.addCamera=function(C$99t){this._add(this._cameras,C$99t)},C$99t.removeCamera=function(C$99t){this._remove(this._cameras,C$99t)},C$99t.getModelCount=function(){return this._models.length},C$99t.getModel=function(C$99t){return this._models.data[C$99t]},C$99t.addModel=function(C$99t){this._add(this._models,C$99t)},C$99t.removeModel=function(C$99t){this._remove(this._models,C$99t)},C$99t.getLightCount=function(){return this._lights.length},C$99t.getLight=function(C$99t){return this._lights.data[C$99t]},C$99t.addLight=function(C$99t){this._add(this._lights,C$99t)},C$99t.removeLight=function(C$99t){this._remove(this._lights,C$99t)},C$99t.addView=function(C$99t){-1===this._views.indexOf(C$99t)&&this._views.push(C$99t)},C$99t.removeView=function(C$99t){C$99t=this._views.indexOf(C$99t);-1!==C$99t&&this._views.splice(C$99t,1)},C$99i.default=C$99r,C$99e.exports=C$99i.default},{"../memop":324}],335:[function(C$99t,C$99h,C$99e){"use strict";C$99e.__esModule=!0,C$99e.getInspectorProps=function(C$99t){var C$99e={type:C$99t.type},C$99t=(Object.assign(C$99e,C$99t.editor||C$99t.inspector),C$99e.defines=C$99t.defines,C$99e.value=C$99_(C$99e.type)(C$99t.value),C$99d(C$99e.type));C$99e.typeName=C$99f[C$99t]||C$99t,C$99e.valueCtor=C$99c[C$99e.type],"cc.Texture2D"==C$99e.typeName&&(C$99e.typeName="cc.Asset",C$99e.assetType="cc.Texture2D");return C$99e},C$99e.getClassName=C$99e.getInstanceCtor=C$99e.getInstanceType=C$99e.enums2default=C$99e.ctor2enums=void 0;var C$99i,C$99n=C$99o(C$99t("./enums")),C$99r=C$99t("../core/value-types"),C$99s=C$99o(C$99t("../core/assets/CCTexture2D"));function C$99o(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}var C$99t=C$99t("./gfx/texture-2d"),C$99a=cc.Object,C$99u=((C$99i={})[Boolean]=function(C$99t){return C$99t||!1},C$99i[Number]=function(C$99t){return C$99t?ArrayBuffer.isView(C$99t)?C$99t[0]:C$99t:0},C$99i[C$99r.Vec2]=function(C$99t){return C$99t?cc.v2(C$99t[0],C$99t[1]):cc.v2()},C$99i[C$99r.Vec3]=function(C$99t){return C$99t?cc.v3(C$99t[0],C$99t[1],C$99t[2]):cc.v3()},C$99i[C$99r.Vec4]=function(C$99t){return C$99t?cc.v4(C$99t[0],C$99t[1],C$99t[2],C$99t[3]):cc.v4()},C$99i[C$99r.Color]=function(C$99t){return C$99t?cc.color(255*C$99t[0],255*C$99t[1],255*C$99t[2],255*(C$99t[3]||1)):cc.color()},C$99i[C$99r.Mat4]=function(C$99t){return C$99t?cc.mat4(C$99t[0],C$99t[1],C$99t[2],C$99t[3],C$99t[4],C$99t[5],C$99t[6],C$99t[7],C$99t[8],C$99t[9],C$99t[10],C$99t[11],C$99t[12],C$99t[13],C$99t[14],C$99t[15]):cc.mat4()},C$99i[C$99s.default]=function(){return null},C$99i[C$99a]=function(){return null},C$99i),C$99c=((C$99i={})[C$99n.default.PARAM_INT]=Number,C$99i[C$99n.default.PARAM_INT2]=C$99r.Vec2,C$99i[C$99n.default.PARAM_INT3]=C$99r.Vec3,C$99i[C$99n.default.PARAM_INT4]=C$99r.Vec4,C$99i[C$99n.default.PARAM_FLOAT]=Number,C$99i[C$99n.default.PARAM_FLOAT2]=C$99r.Vec2,C$99i[C$99n.default.PARAM_FLOAT3]=C$99r.Vec3,C$99i[C$99n.default.PARAM_FLOAT4]=C$99r.Vec4,C$99i[C$99n.default.PARAM_MAT4]=C$99r.Mat4,C$99i[C$99n.default.PARAM_TEXTURE_2D]=C$99s.default,C$99i.color=C$99r.Color,C$99i.number=Number,C$99i.boolean=Boolean,C$99i.default=C$99a,C$99i);(C$99a={})[Number]=C$99n.default.PARAM_FLOAT,C$99a[C$99r.Vec2]=C$99n.default.PARAM_FLOAT2,C$99a[C$99r.Vec3]=C$99n.default.PARAM_FLOAT3,C$99a[C$99r.Vec4]=C$99n.default.PARAM_FLOAT4,C$99a[C$99r.Color]=C$99n.default.PARAM_COLOR3,C$99a[C$99r.Color]=C$99n.default.PARAM_COLOR4,C$99a[C$99r.Mat4]=C$99n.default.PARAM_MAT4,C$99a[C$99s.default]=C$99n.default.PARAM_TEXTURE_2D,C$99a[C$99t]=C$99n.default.PARAM_TEXTURE_2D;function C$99l(C$99t){return C$99c[C$99t]||C$99c.default}C$99e.ctor2enums=C$99a,(C$99i={})[C$99n.default.PARAM_INT]=new Uint32Array([0]),C$99i[C$99n.default.PARAM_INT2]=new Uint32Array([0,0]),C$99i[C$99n.default.PARAM_INT3]=new Uint32Array([0,0,0]),C$99i[C$99n.default.PARAM_INT4]=new Uint32Array([0,0,0,0]),C$99i[C$99n.default.PARAM_FLOAT]=new Float32Array([0]),C$99i[C$99n.default.PARAM_FLOAT2]=new Float32Array([0,0]),C$99i[C$99n.default.PARAM_FLOAT3]=new Float32Array([0,0,0]),C$99i[C$99n.default.PARAM_FLOAT4]=new Float32Array([0,0,0,0]),C$99i[C$99n.default.PARAM_MAT4]=cc.mat4().m,C$99i[C$99n.default.PARAM_TEXTURE_2D]=null,C$99i.number=0,C$99i.boolean=!1;var C$99r=C$99i,C$99_=(C$99e.enums2default=C$99r,C$99e.getInstanceType=C$99l,function(C$99t){return C$99u[C$99l(C$99t)]}),C$99d=(C$99e.getInstanceCtor=C$99_,function(C$99t){return cc.js.getClassName(C$99l(C$99t))}),C$99f=(C$99e.getClassName=C$99d,{Number:"number",Boolean:"boolean"})},{"../core/assets/CCTexture2D":50,"../core/value-types":279,"./enums":307,"./gfx/texture-2d":317}],336:[function(C$99t,C$99e,C$99i){"use strict";var C$99_=C$99t("../compression/ZipUtils"),C$99d=C$99t("../compression/zlib.min"),C$99n=C$99t("../core/platform/js");function C$99u(C$99t){if(!C$99t)return cc.color(0,0,0,255);var C$99e;if(8===(C$99t=-1!==C$99t.indexOf("#")?C$99t.substring(1):C$99t).length)return C$99e=parseInt(C$99t.substr(0,2),16)||255,C$99i=parseInt(C$99t.substr(2,2),16)||0,C$99n=parseInt(C$99t.substr(4,2),16)||0,C$99r=parseInt(C$99t.substr(6,2),16)||0,cc.color(C$99i,C$99n,C$99r,C$99e);var C$99i=parseInt(C$99t.substr(0,2),16)||0,C$99n=parseInt(C$99t.substr(2,2),16)||0,C$99r=parseInt(C$99t.substr(4,2),16)||0;return cc.color(C$99i,C$99n,C$99r,255)}function C$99G(C$99t,C$99e){for(var C$99i=[],C$99n=C$99t.getElementsByTagName("properties"),C$99r=0;C$99r<C$99n.length;++C$99r)for(var C$99s=C$99n[C$99r].getElementsByTagName("property"),C$99o=0;C$99o<C$99s.length;++C$99o)C$99i.push(C$99s[C$99o]);C$99e=C$99e||{};for(var C$99a=0;C$99a<C$99i.length;C$99a++){var C$99c=C$99i[C$99a],C$99h=C$99c.getAttribute("name"),C$99l=C$99c.getAttribute("type")||"string",C$99c=C$99c.getAttribute("value");"int"===C$99l?C$99c=parseInt(C$99c):"float"===C$99l?C$99c=parseFloat(C$99c):"bool"===C$99l?C$99c="true"===C$99c:"color"===C$99l&&(C$99c=C$99u(C$99c)),C$99e[C$99h]=C$99c}return C$99e}C$99t("../core/platform/CCSAXParser"),cc.TMXLayerInfo=function(){this.properties={},this.name="",this._layerSize=null,this._tiles=[],this.visible=!0,this._opacity=0,this.ownTiles=!0,this._minGID=1e5,this._maxGID=0,this.offset=cc.v2(0,0)},cc.TMXLayerInfo.prototype={constructor:cc.TMXLayerInfo,getProperties:function(){return this.properties},setProperties:function(C$99t){this.properties=C$99t}},cc.TMXImageLayerInfo=function(){this.name="",this.visible=!0,this.width=0,this.height=0,this.offset=cc.v2(0,0),this._opacity=0,this._trans=new cc.Color(255,255,255,255),this.sourceImage=null},cc.TMXObjectGroupInfo=function(){this.properties={},this.name="",this._objects=[],this.visible=!0,this._opacity=0,this._color=new cc.Color(255,255,255,255),this.offset=cc.v2(0,0),this._draworder="topdown"},cc.TMXObjectGroupInfo.prototype={constructor:cc.TMXObjectGroupInfo,getProperties:function(){return this.properties},setProperties:function(C$99t){this.properties=C$99t}},cc.TMXTilesetInfo=function(){this.name="",this.firstGid=0,this.spacing=0,this.margin=0,this.sourceImage=null,this.imageSize=cc.size(0,0),this.tileOffset=cc.v2(0,0),this._tileSize=cc.size(0,0)},cc.TMXTilesetInfo.prototype={constructor:cc.TMXTilesetInfo,rectForGID:function(C$99t,C$99e){var C$99e=C$99e||cc.rect(0,0,0,0),C$99i=(C$99e.width=this._tileSize.width,C$99e.height=this._tileSize.height,C$99t=(C$99t&=cc.TiledMap.TileFlag.FLIPPED_MASK)-parseInt(this.firstGid,10),parseInt((this.imageSize.width-2*this.margin+this.spacing)/(this._tileSize.width+this.spacing),10));return C$99e.x=parseInt(C$99t%C$99i*(this._tileSize.width+this.spacing)+this.margin,10),C$99e.y=parseInt(parseInt(C$99t/C$99i,10)*(this._tileSize.height+this.spacing)+this.margin,10),C$99e}},cc.TMXMapInfo=function(C$99t,C$99e,C$99i,C$99n,C$99r){this.properties=[],this.orientation=null,this.parentElement=null,this.parentGID=null,this.layerAttrs=0,this.storingCharacters=!1,this.currentString=null,this.renderOrder=cc.TiledMap.RenderOrder.RightDown,this._supportVersion=[1,2,0],this._parser=new cc.SAXParser,this._objectGroups=[],this._allChildren=[],this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0),this._layers=[],this._tilesets=[],this._imageLayers=[],this._tileProperties={},this._tileAnimations={},this._tsxMap=null,this._textures=null,this._staggerAxis=null,this._staggerIndex=null,this._hexSideLength=0,this._imageLayerTextures=null,this.initWithXML(C$99t,C$99e,C$99i,C$99n,C$99r)},cc.TMXMapInfo.prototype={constructor:cc.TMXMapInfo,getOrientation:function(){return this.orientation},setOrientation:function(C$99t){this.orientation=C$99t},getStaggerAxis:function(){return this._staggerAxis},setStaggerAxis:function(C$99t){this._staggerAxis=C$99t},getStaggerIndex:function(){return this._staggerIndex},setStaggerIndex:function(C$99t){this._staggerIndex=C$99t},getHexSideLength:function(){return this._hexSideLength},setHexSideLength:function(C$99t){this._hexSideLength=C$99t},getMapSize:function(){return cc.size(this._mapSize.width,this._mapSize.height)},setMapSize:function(C$99t){this._mapSize.width=C$99t.width,this._mapSize.height=C$99t.height},_getMapWidth:function(){return this._mapSize.width},_setMapWidth:function(C$99t){this._mapSize.width=C$99t},_getMapHeight:function(){return this._mapSize.height},_setMapHeight:function(C$99t){this._mapSize.height=C$99t},getTileSize:function(){return cc.size(this._tileSize.width,this._tileSize.height)},setTileSize:function(C$99t){this._tileSize.width=C$99t.width,this._tileSize.height=C$99t.height},_getTileWidth:function(){return this._tileSize.width},_setTileWidth:function(C$99t){this._tileSize.width=C$99t},_getTileHeight:function(){return this._tileSize.height},_setTileHeight:function(C$99t){this._tileSize.height=C$99t},getLayers:function(){return this._layers},setLayers:function(C$99t){this._allChildren.push(C$99t),this._layers.push(C$99t)},getImageLayers:function(){return this._imageLayers},setImageLayers:function(C$99t){this._allChildren.push(C$99t),this._imageLayers.push(C$99t)},getTilesets:function(){return this._tilesets},setTilesets:function(C$99t){this._tilesets.push(C$99t)},getObjectGroups:function(){return this._objectGroups},setObjectGroups:function(C$99t){this._allChildren.push(C$99t),this._objectGroups.push(C$99t)},getAllChildren:function(){return this._allChildren},getParentElement:function(){return this.parentElement},setParentElement:function(C$99t){this.parentElement=C$99t},getParentGID:function(){return this.parentGID},setParentGID:function(C$99t){this.parentGID=C$99t},getLayerAttribs:function(){return this.layerAttrs},setLayerAttribs:function(C$99t){this.layerAttrs=C$99t},getStoringCharacters:function(){return this.storingCharacters},setStoringCharacters:function(C$99t){this.storingCharacters=C$99t},getProperties:function(){return this.properties},setProperties:function(C$99t){this.properties=C$99t},initWithXML:function(C$99t,C$99e,C$99i,C$99n,C$99r){return this._tilesets.length=0,this._layers.length=0,this._imageLayers.length=0,this._tsxMap=C$99e,this._textures=C$99i,this._imageLayerTextures=C$99r,this._textureSizes=C$99n,this._objectGroups.length=0,this._allChildren.length=0,this.properties.length=0,this._tileProperties={},this._tileAnimations={},this.currentString="",this.storingCharacters=!1,this.layerAttrs=cc.TMXLayerInfo.ATTRIB_NONE,this.parentElement=cc.TiledMap.NONE,this.parseXMLString(C$99t)},parseXMLString:function(C$99t,C$99h){var C$99t=this._parser._parseXML(C$99t).documentElement,C$99e=C$99t.getAttribute("orientation"),C$99u=C$99t.getAttribute("staggeraxis"),C$99_=C$99t.getAttribute("staggerindex"),C$99d=C$99t.getAttribute("hexsidelength"),C$99f=C$99t.getAttribute("renderorder"),C$99p=C$99t.getAttribute("version")||"1.0.0";if("map"===C$99t.nodeName){for(var C$99m=C$99p.split("."),C$99y=this._supportVersion,C$99i=0;C$99i<C$99y.length;C$99i++){var C$99g=parseInt(C$99m[C$99i])||0;if(C$99y[C$99i]<C$99g){cc.logID(7216,C$99p);break}}"orthogonal"===C$99e?this.orientation=cc.TiledMap.Orientation.ORTHO:"isometric"===C$99e?this.orientation=cc.TiledMap.Orientation.ISO:"hexagonal"===C$99e?this.orientation=cc.TiledMap.Orientation.HEX:null!==C$99e&&cc.logID(7217,C$99e),this.renderOrder="right-up"===C$99f?cc.TiledMap.RenderOrder.RightUp:"left-up"===C$99f?cc.TiledMap.RenderOrder.LeftUp:"left-down"===C$99f?cc.TiledMap.RenderOrder.LeftDown:cc.TiledMap.RenderOrder.RightDown,"x"===C$99u?this.setStaggerAxis(cc.TiledMap.StaggerAxis.STAGGERAXIS_X):"y"===C$99u&&this.setStaggerAxis(cc.TiledMap.StaggerAxis.STAGGERAXIS_Y),"odd"===C$99_?this.setStaggerIndex(cc.TiledMap.StaggerIndex.STAGGERINDEX_ODD):"even"===C$99_&&this.setStaggerIndex(cc.TiledMap.StaggerIndex.STAGGERINDEX_EVEN),C$99d&&this.setHexSideLength(parseFloat(C$99d));C$99e=cc.size(0,0);C$99e.width=parseFloat(C$99t.getAttribute("width")),C$99e.height=parseFloat(C$99t.getAttribute("height")),this.setMapSize(C$99e),(C$99e=cc.size(0,0)).width=parseFloat(C$99t.getAttribute("tilewidth")),C$99e.height=parseFloat(C$99t.getAttribute("tileheight")),this.setTileSize(C$99e),this.properties=C$99G(C$99t)}var C$99v=C$99t.getElementsByTagName("tileset");for("map"!==C$99t.nodeName&&(C$99v=[]).push(C$99t),C$99c=0;C$99c<C$99v.length;C$99c++){var C$99n=C$99v[C$99c],C$99r=C$99n.getAttribute("source");if(C$99r){var C$99x=parseInt(C$99n.getAttribute("firstgid")),C$99r=this._tsxMap[C$99r];C$99r&&this.parseXMLString(C$99r,C$99x)}else for(var C$99r=C$99n.getElementsByTagName("image"),C$99b=1<C$99r.length,C$99A=(C$99P=C$99r[0]).getAttribute("source"),C$99C=(C$99A.replace(/\\/g,"/"),C$99n.getElementsByTagName("tile")),C$99S=C$99C&&C$99C.length||1,C$99s=null,C$99T=C$99n.getAttribute("name")||"",C$99w=parseInt(C$99n.getAttribute("spacing"))||0,C$99E=parseInt(C$99n.getAttribute("margin"))||0,C$99M=(C$99M=parseInt(C$99h))||(parseInt(C$99n.getAttribute("firstgid"))||0),C$99I=cc.size(0,0),C$99x=(C$99I.width=parseFloat(C$99n.getAttribute("tilewidth")),C$99I.height=parseFloat(C$99n.getAttribute("tileheight")),C$99n.getElementsByTagName("tileoffset")[0]),C$99B=cc.v2(0,0),C$99o=(C$99x&&(C$99B.x=parseFloat(C$99x.getAttribute("x")),C$99B.y=parseFloat(C$99x.getAttribute("y"))),null),C$99R=0;C$99R<C$99S;C$99R++)if(C$99o&&!C$99b||((C$99o=new cc.TMXTilesetInfo).name=C$99T,C$99o.firstGid=C$99M,C$99o.spacing=C$99w,C$99o.margin=C$99E,C$99o._tileSize=C$99I,C$99o.tileOffset=C$99B,C$99o.sourceImage=this._textures[C$99A],C$99o.imageSize=this._textureSizes[C$99A]||C$99o.imageSize,C$99o.sourceImage||cc.errorID(7221,C$99A),this.setTilesets(C$99o)),C$99s=C$99C&&C$99C[C$99R]){this.parentGID=parseInt(C$99M)+parseInt(C$99s.getAttribute("id")||0);var C$99P,C$99a=C$99s.getElementsByTagName("image"),C$99a=(C$99a&&0<C$99a.length&&((C$99a=(C$99P=C$99a[0]).getAttribute("source")).replace(/\\/g,"/"),C$99o.sourceImage=this._textures[C$99a],C$99o.sourceImage||cc.errorID(7221,C$99a),(C$99a=cc.size(0,0)).width=parseFloat(C$99P.getAttribute("width")),C$99a.height=parseFloat(C$99P.getAttribute("height")),C$99o._tileSize=C$99a,C$99o.firstGid=this.parentGID),this._tileProperties[this.parentGID]=C$99G(C$99s),C$99s.getElementsByTagName("animation"));if(C$99a&&0<C$99a.length)for(var C$99D=C$99a[0].getElementsByTagName("frame"),C$99a={frames:[],dt:0,frameIdx:0},C$99L=(this._tileAnimations[this.parentGID]=C$99a).frames,C$99V=0;C$99V<C$99D.length;C$99V++){var C$99O=C$99D[C$99V],C$99F=parseInt(C$99M)+parseInt(C$99O.getAttribute("tileid")),C$99O=parseFloat(C$99O.getAttribute("duration"));C$99L.push({tileid:C$99F,duration:C$99O/1e3,grid:null})}}}for(var C$99N=C$99t.childNodes,C$99c=0;C$99c<C$99N.length;C$99c++){var C$99k,C$99l=C$99N[C$99c];this._shouldIgnoreNode(C$99l)||("imagelayer"!==C$99l.nodeName||(C$99k=this._parseImageLayer(C$99l))&&this.setImageLayers(C$99k),"layer"===C$99l.nodeName&&(C$99k=this._parseLayer(C$99l),this.setLayers(C$99k)),"objectgroup"===C$99l.nodeName&&(C$99l=this._parseObjectGroup(C$99l),this.setObjectGroups(C$99l)))}return C$99t},_shouldIgnoreNode:function(C$99t){return 3===C$99t.nodeType||8===C$99t.nodeType||4===C$99t.nodeType},_parseImageLayer:function(C$99t){var C$99e=C$99t.getElementsByTagName("image");if(!C$99e||0==C$99e.length)return null;var C$99i=new cc.TMXImageLayerInfo,C$99n=(C$99i.name=C$99t.getAttribute("name"),C$99i.offset.x=parseFloat(C$99t.getAttribute("offsetx"))||0,C$99i.offset.y=parseFloat(C$99t.getAttribute("offsety"))||0,C$99t.getAttribute("visible")),C$99n=(C$99i.visible=!("0"===C$99n),C$99t.getAttribute("opacity")||1),C$99t=(C$99i.opacity=parseInt(255*parseFloat(C$99n))||255,C$99e[0]),C$99n=C$99t.getAttribute("source");return C$99i.sourceImage=this._imageLayerTextures[C$99n],C$99i.width=parseInt(C$99t.getAttribute("width"))||0,C$99i.height=parseInt(C$99t.getAttribute("height"))||0,C$99i.trans=C$99u(C$99t.getAttribute("trans")),C$99i.sourceImage?C$99i:(cc.errorID(7221,C$99n),null)},_parseLayer:function(C$99t){for(var C$99e=C$99t.getElementsByTagName("data")[0],C$99i=new cc.TMXLayerInfo,C$99n=(C$99i.name=C$99t.getAttribute("name"),cc.size(0,0)),C$99n=(C$99n.width=parseFloat(C$99t.getAttribute("width")),C$99n.height=parseFloat(C$99t.getAttribute("height")),C$99i._layerSize=C$99n,C$99t.getAttribute("visible")),C$99n=(C$99i.visible=!("0"===C$99n),C$99t.getAttribute("opacity")||1),C$99r=(C$99i._opacity=C$99n?parseInt(255*parseFloat(C$99n)):255,C$99i.offset=cc.v2(parseFloat(C$99t.getAttribute("offsetx"))||0,parseFloat(C$99t.getAttribute("offsety"))||0),""),C$99s=0;C$99s<C$99e.childNodes.length;C$99s++)C$99r+=C$99e.childNodes[C$99s].nodeValue;var C$99r=C$99r.trim(),C$99n=C$99e.getAttribute("compression"),C$99o=C$99e.getAttribute("encoding");if(C$99n&&"gzip"!==C$99n&&"zlib"!==C$99n)return cc.logID(7218),null;switch(C$99n){case"gzip":C$99a=C$99_.unzipBase64AsArray(C$99r,4);break;case"zlib":var C$99a=function(C$99t){if(C$99t.length%4!=0)return null;for(var C$99e=C$99t.length/4,C$99i=window.Uint32Array?new Uint32Array(C$99e):[],C$99n=0;C$99n<C$99e;C$99n++){var C$99r=4*C$99n;C$99i[C$99n]=C$99t[C$99r]+256*C$99t[1+C$99r]+65536*C$99t[2+C$99r]+C$99t[3+C$99r]*(1<<24)}return C$99i}(new C$99d.Inflate(C$99_.Base64.decodeAsArray(C$99r,1)).decompress());break;case null:case"":if("base64"===C$99o)C$99a=C$99_.Base64.decodeAsArray(C$99r,4);else if("csv"===C$99o){C$99a=[];for(var C$99h=C$99r.split(","),C$99c=0;C$99c<C$99h.length;C$99c++)C$99a.push(parseInt(C$99h[C$99c]))}else{var C$99u=C$99e.getElementsByTagName("tile");C$99a=[];for(var C$99l=0;C$99l<C$99u.length;C$99l++)C$99a.push(parseInt(C$99u[C$99l].getAttribute("gid")))}break;default:this.layerAttrs===cc.TMXLayerInfo.ATTRIB_NONE&&cc.logID(7219)}return C$99a&&(C$99i._tiles=new Uint32Array(C$99a)),C$99i.properties=C$99G(C$99t),C$99i},_parseObjectGroup:function(C$99t){var C$99e=new cc.TMXObjectGroupInfo,C$99i=(C$99e.name=C$99t.getAttribute("name")||"",C$99e.offset=cc.v2(parseFloat(C$99t.getAttribute("offsetx")),parseFloat(C$99t.getAttribute("offsety"))),C$99t.getAttribute("opacity")||1),C$99i=(C$99e._opacity=C$99i?parseInt(255*parseFloat(C$99i)):255,C$99t.getAttribute("visible")),C$99i=(C$99i&&0===parseInt(C$99i)&&(C$99e.visible=!1),C$99t.getAttribute("color")),C$99i=(C$99i&&C$99e._color.fromHEX(C$99i),C$99t.getAttribute("draworder")),C$99n=(C$99i&&(C$99e._draworder=C$99i),C$99e.setProperties(C$99G(C$99t)),C$99t.getElementsByTagName("object"));if(C$99n){for(var C$99r=0;C$99r<C$99n.length;C$99r++){var C$99s=C$99n[C$99r],C$99o={},C$99a=(C$99o.id=C$99s.getAttribute("id")||C$99r,C$99o.name=C$99s.getAttribute("name")||"",C$99o.width=parseFloat(C$99s.getAttribute("width"))||0,C$99o.height=parseFloat(C$99s.getAttribute("height"))||0,C$99o.x=parseFloat(C$99s.getAttribute("x"))||0,C$99o.y=parseFloat(C$99s.getAttribute("y"))||0,C$99o.rotation=parseFloat(C$99s.getAttribute("rotation"))||0,C$99G(C$99s,C$99o),C$99s.getAttribute("visible")),C$99a=(C$99o.visible=!(C$99a&&0===parseInt(C$99a)),C$99s.getElementsByTagName("text")),C$99a=(C$99a&&0<C$99a.length&&(C$99a=C$99a[0],C$99o.type=cc.TiledMap.TMXObjectType.TEXT,C$99o.wrap="1"==C$99a.getAttribute("wrap"),C$99o.color=C$99u(C$99a.getAttribute("color")),C$99o.halign=function(C$99t){var C$99e=cc.Label.HorizontalAlign;switch(C$99t){case"center":return C$99e.CENTER;case"right":return C$99e.RIGHT;default:return C$99e.LEFT}}(C$99a.getAttribute("halign")),C$99o.valign=function(C$99t){var C$99e=cc.Label.VerticalAlign;switch(C$99t){case"center":return C$99e.CENTER;case"bottom":return C$99e.BOTTOM;default:return C$99e.TOP}}(C$99a.getAttribute("valign")),C$99o.pixelsize=parseInt(C$99a.getAttribute("pixelsize"))||16,C$99o.text=C$99a.childNodes[0].nodeValue),C$99s.getAttribute("gid")),C$99a=(C$99a&&(C$99o.gid=parseInt(C$99a),C$99o.type=cc.TiledMap.TMXObjectType.IMAGE),C$99s.getElementsByTagName("ellipse")),C$99a=(C$99a&&0<C$99a.length&&(C$99o.type=cc.TiledMap.TMXObjectType.ELLIPSE),C$99s.getElementsByTagName("polygon")),C$99a=(C$99a&&0<C$99a.length&&(C$99o.type=cc.TiledMap.TMXObjectType.POLYGON,(C$99a=C$99a[0].getAttribute("points"))&&(C$99o.points=this._parsePointsString(C$99a))),C$99s.getElementsByTagName("polyline"));C$99a&&0<C$99a.length&&(C$99o.type=cc.TiledMap.TMXObjectType.POLYLINE,(C$99s=C$99a[0].getAttribute("points"))&&(C$99o.polylinePoints=this._parsePointsString(C$99s))),C$99o.type||(C$99o.type=cc.TiledMap.TMXObjectType.RECT),C$99e._objects.push(C$99o)}"index"!==C$99i&&C$99e._objects.sort(function(C$99t,C$99e){return C$99t.y-C$99e.y})}return C$99e},_parsePointsString:function(C$99t){if(!C$99t)return null;for(var C$99e=[],C$99i=C$99t.split(" "),C$99n=0;C$99n<C$99i.length;C$99n++){var C$99r=C$99i[C$99n].split(",");C$99e.push({x:parseFloat(C$99r[0]),y:parseFloat(C$99r[1])})}return C$99e},setTileAnimations:function(C$99t){this._tileAnimations=C$99t},getTileAnimations:function(){return this._tileAnimations},getTileProperties:function(){return this._tileProperties},setTileProperties:function(C$99t){this._tileProperties=C$99t},getCurrentString:function(){return this.currentString},setCurrentString:function(C$99t){this.currentString=C$99t}};C$99t=cc.TMXMapInfo.prototype;C$99n.getset(C$99t,"mapWidth",C$99t._getMapWidth,C$99t._setMapWidth),C$99n.getset(C$99t,"mapHeight",C$99t._getMapHeight,C$99t._setMapHeight),C$99n.getset(C$99t,"tileWidth",C$99t._getTileWidth,C$99t._setTileWidth),C$99n.getset(C$99t,"tileHeight",C$99t._getTileHeight,C$99t._setTileHeight),cc.TMXLayerInfo.ATTRIB_NONE=1,cc.TMXLayerInfo.ATTRIB_BASE64=2,cc.TMXLayerInfo.ATTRIB_GZIP=4,cc.TMXLayerInfo.ATTRIB_ZLIB=8},{"../compression/ZipUtils":23,"../compression/zlib.min":26,"../core/platform/CCSAXParser":196,"../core/platform/js":209}],337:[function(C$99t,C$99e,C$99h){"use strict";var C$99i=C$99t("../core/value-types"),C$99u=(C$99n=C$99t("../core/assets/material/material-variant"))&&C$99n.__esModule?C$99n:{default:C$99n};var C$99n=C$99t("../core/components/CCRenderComponent"),C$99_=C$99t("../core/assets/material/CCMaterial"),C$99r=C$99t("../core/renderer/render-flow"),C$99s=cc.mat4(),C$99o=cc.v2(),C$99a=cc.v2(),C$99c={row:0,col:0},C$99l=cc.Class({name:"cc.TiledUserNodeData",extends:cc.Component,ctor:function(){this._index=-1,this._row=-1,this._col=-1,this._tiledLayer=null}}),C$99t=cc.Class({name:"cc.TiledLayer",extends:C$99n,editor:{inspector:"packages://inspector/inspectors/comps/tiled-layer.js"},ctor:function(){this._userNodeGrid={},this._userNodeMap={},this._userNodeDirty=!1,this._tiledTiles=[],this._tilesetIndexArr=[],this._texIdToMatIndex={},this._viewPort={x:-1,y:-1,width:-1,height:-1},this._cullingRect={leftDown:{row:-1,col:-1},rightTop:{row:-1,col:-1}},this._cullingDirty=!0,this._rightTop={row:-1,col:-1},this._layerInfo=null,this._mapInfo=null,this._topOffset=0,this._downOffset=0,this._leftOffset=0,this._rightOffset=0,this._tiles=[],this._vertices=[],this._verticesDirty=!0,this._layerName="",this._layerOrientation=null,this._texGrids=null,this._textures=null,this._tilesets=null,this._leftDownToCenterX=0,this._leftDownToCenterY=0,this._hasTiledNodeGrid=!1,this._hasAniGrid=!1,this._animations=null,this._enableCulling=cc.macro.ENABLE_TILEDMAP_CULLING},_hasTiledNode:function(){return this._hasTiledNodeGrid},_hasAnimation:function(){return this._hasAniGrid},enableCulling:function(C$99t){this._enableCulling!=C$99t&&(this._enableCulling=C$99t,this._cullingDirty=!0)},addUserNode:function(C$99t){var C$99e=C$99t.getComponent(C$99l);return C$99e?(cc.warn("CCTiledLayer:addUserNode node has been added"),!1):(C$99e=C$99t.addComponent(C$99l),C$99t.parent=this.node,C$99t._renderFlag|=C$99r.FLAG_BREAK_FLOW,(this._userNodeMap[C$99t._id]=C$99e)._row=-1,C$99e._col=-1,(C$99e._tiledLayer=this)._nodeLocalPosToLayerPos(C$99t,C$99o),this._positionToRowCol(C$99o.x,C$99o.y,C$99c),this._addUserNodeToGrid(C$99e,C$99c),this._updateCullingOffsetByUserNode(C$99t),C$99t.on(cc.Node.EventType.POSITION_CHANGED,this._userNodePosChange,C$99e),C$99t.on(cc.Node.EventType.SIZE_CHANGED,this._userNodeSizeChange,C$99e),!0)},removeUserNode:function(C$99t){var C$99e=C$99t.getComponent(C$99l);return C$99e?(C$99t.off(cc.Node.EventType.POSITION_CHANGED,this._userNodePosChange,C$99e),C$99t.off(cc.Node.EventType.SIZE_CHANGED,this._userNodeSizeChange,C$99e),this._removeUserNodeFromGrid(C$99e),delete this._userNodeMap[C$99t._id],C$99t._removeComponent(C$99e),C$99e.destroy(),C$99t.removeFromParent(!0),C$99t._renderFlag&=~C$99r.FLAG_BREAK_FLOW,!0):(cc.warn("CCTiledLayer:removeUserNode node is not exist"),!1)},destroyUserNode:function(C$99t){this.removeUserNode(C$99t),C$99t.destroy()},_nodeLocalPosToLayerPos:function(C$99t,C$99e){C$99e.x=C$99t.x+this._leftDownToCenterX,C$99e.y=C$99t.y+this._leftDownToCenterY},_getNodesByRowCol:function(C$99t,C$99e){C$99t=this._userNodeGrid[C$99t];return C$99t?C$99t[C$99e]:null},_getNodesCountByRow:function(C$99t){C$99t=this._userNodeGrid[C$99t];return C$99t?C$99t.count:0},_updateAllUserNode:function(){for(var C$99t in this._userNodeGrid={},this._userNodeMap){C$99t=this._userNodeMap[C$99t];this._nodeLocalPosToLayerPos(C$99t.node,C$99o),this._positionToRowCol(C$99o.x,C$99o.y,C$99c),this._addUserNodeToGrid(C$99t,C$99c),this._updateCullingOffsetByUserNode(C$99t.node)}},_updateCullingOffsetByUserNode:function(C$99t){this._topOffset<C$99t.height&&(this._topOffset=C$99t.height),this._downOffset<C$99t.height&&(this._downOffset=C$99t.height),this._leftOffset<C$99t.width&&(this._leftOffset=C$99t.width),this._rightOffset<C$99t.width&&(this._rightOffset=C$99t.width)},_userNodeSizeChange:function(){var C$99t=this.node;this._tiledLayer._updateCullingOffsetByUserNode(C$99t)},_userNodePosChange:function(){var C$99t=this.node,C$99e=this._tiledLayer;C$99e._nodeLocalPosToLayerPos(C$99t,C$99o),C$99e._positionToRowCol(C$99o.x,C$99o.y,C$99c),C$99e._limitInLayer(C$99c),C$99c.row===this._row&&C$99c.col===this._col||(C$99e._removeUserNodeFromGrid(this),C$99e._addUserNodeToGrid(this,C$99c))},_removeUserNodeFromGrid:function(C$99t){var C$99e=C$99t._row,C$99i=C$99t._col,C$99n=C$99t._index,C$99e=this._userNodeGrid[C$99e],C$99i=C$99e&&C$99e[C$99i];C$99i&&(C$99e.count--,C$99i.count--,C$99i.list[C$99n]=null,C$99i.count<=0&&(C$99i.list.length=0,C$99i.count=0)),C$99t._row=-1,C$99t._col=-1,C$99t._index=-1,this._userNodeDirty=!0},_limitInLayer:function(C$99t){var C$99e=C$99t.row,C$99i=C$99t.col;C$99e<0&&(C$99t.row=0),C$99e>this._rightTop.row&&(C$99t.row=this._rightTop.row),C$99i<0&&(C$99t.col=0),C$99i>this._rightTop.col&&(C$99t.col=this._rightTop.col)},_addUserNodeToGrid:function(C$99t,C$99e){var C$99i=C$99e.row,C$99e=C$99e.col,C$99n=this._userNodeGrid[C$99i]=this._userNodeGrid[C$99i]||{count:0},C$99r=C$99n[C$99e]=C$99n[C$99e]||{count:0,list:[]};C$99t._row=C$99i,C$99t._col=C$99e,C$99t._index=C$99r.list.length,C$99n.count++,C$99r.count++,C$99r.list.push(C$99t),this._userNodeDirty=!0},_isUserNodeDirty:function(){return this._userNodeDirty},_setUserNodeDirty:function(C$99t){this._userNodeDirty=C$99t},onEnable:function(){this._super(),this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this),this._activateMaterial()},onDisable:function(){this._super(),this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},_syncAnchorPoint:function(){var C$99t=this.node;this._leftDownToCenterX=C$99t.width*C$99t.anchorX*C$99t.scaleX,this._leftDownToCenterY=C$99t.height*C$99t.anchorY*C$99t.scaleY,this._cullingDirty=!0},onDestroy:function(){this._super(),this._buffer&&(this._buffer.destroy(),this._buffer=null),this._renderDataList=null},getLayerName:function(){return this._layerName},setLayerName:function(C$99t){this._layerName=C$99t},getProperty:function(C$99t){return this._properties[C$99t]},getPositionAt:function(C$99t,C$99e){var C$99i,C$99n;switch(C$99e=void 0!==C$99e?(C$99i=Math.floor(C$99t),Math.floor(C$99e)):(C$99i=Math.floor(C$99t.x),Math.floor(C$99t.y)),this._layerOrientation){case cc.TiledMap.Orientation.ORTHO:C$99n=this._positionForOrthoAt(C$99i,C$99e);break;case cc.TiledMap.Orientation.ISO:C$99n=this._positionForIsoAt(C$99i,C$99e);break;case cc.TiledMap.Orientation.HEX:C$99n=this._positionForHexAt(C$99i,C$99e)}return C$99n},_isInvalidPosition:function(C$99t,C$99e){var C$99i;return C$99t&&"object"==typeof C$99t&&(C$99e=(C$99i=C$99t).y,C$99t=C$99i.x),C$99t>=this._layerSize.width||C$99e>=this._layerSize.height||C$99t<0||C$99e<0},_positionForIsoAt:function(C$99t,C$99e){var C$99i=0,C$99n=0,C$99r=Math.floor(C$99t)+Math.floor(C$99e)*this._layerSize.width,C$99r=this._tiles[C$99r];return C$99r&&(C$99i=(C$99r=this._texGrids[C$99r].tileset.tileOffset).x,C$99n=C$99r.y),cc.v2(.5*this._mapTileSize.width*(this._layerSize.height+C$99t-C$99e-1)+C$99i,.5*this._mapTileSize.height*(this._layerSize.width-C$99t+this._layerSize.height-C$99e-2)-C$99n)},_positionForOrthoAt:function(C$99t,C$99e){var C$99i=0,C$99n=0,C$99r=Math.floor(C$99t)+Math.floor(C$99e)*this._layerSize.width,C$99r=this._tiles[C$99r];return C$99r&&(C$99i=(C$99r=this._texGrids[C$99r].tileset.tileOffset).x,C$99n=C$99r.y),cc.v2(C$99t*this._mapTileSize.width+C$99i,(this._layerSize.height-C$99e-1)*this._mapTileSize.height-C$99n)},_positionForHexAt:function(C$99t,C$99e){var C$99i=this._mapTileSize.width,C$99n=this._mapTileSize.height,C$99r=this._layerSize.height,C$99h=Math.floor(C$99t)+Math.floor(C$99e)*this._layerSize.width,C$99h=this._tiles[C$99h],C$99s=this._texGrids[C$99h].tileset.tileOffset,C$99u=this._staggerIndex===cc.TiledMap.StaggerIndex.STAGGERINDEX_ODD?1:-1,C$99o=0,C$99a=0,C$99c=0,C$99l=0;switch(this._staggerAxis){case cc.TiledMap.StaggerAxis.STAGGERAXIS_Y:C$99c=0,C$99o=C$99t*C$99i+(C$99c=C$99e%2==1?C$99i/2*C$99u:C$99c)+C$99s.x,C$99a=(C$99r-C$99e-1)*(C$99n-(C$99n-this._hexSideLength)/2)-C$99s.y;break;case cc.TiledMap.StaggerAxis.STAGGERAXIS_X:C$99l=0,C$99o=C$99t*(C$99i-(C$99i-this._hexSideLength)/2)+C$99s.x,C$99a=(C$99r-C$99e-1)*C$99n+(C$99l=C$99t%2==1?C$99n/2*-C$99u:C$99l)-C$99s.y}return cc.v2(C$99o,C$99a)},setTileGIDAt:function(C$99t,C$99e,C$99i,C$99n){if(void 0===C$99e)throw new Error("cc.TiledLayer.setTileGIDAt(): pos should be non-null");var C$99r;if(void 0===C$99n&&C$99e instanceof cc.Vec2?(C$99r=C$99e,C$99n=C$99i):C$99r=cc.v2(C$99e,C$99i),C$99r.x=Math.floor(C$99r.x),C$99r.y=Math.floor(C$99r.y),this._isInvalidPosition(C$99r))throw new Error("cc.TiledLayer.setTileGIDAt(): invalid position");this._tiles&&this._tilesets&&0!=this._tilesets.length?0!==C$99t&&C$99t<this._tilesets[0].firstGid?cc.logID(7239,C$99t):(C$99n=C$99n||0,C$99e=this.getTileFlagsAt(C$99r),this.getTileGIDAt(C$99r)===C$99t&&C$99e===C$99n||this._updateTileForGID((C$99t|C$99n)>>>0,C$99r)):cc.logID(7238)},_updateTileForGID:function(C$99t,C$99e){0!==C$99t&&!this._texGrids[C$99t]||(C$99e=0|C$99e.x+C$99e.y*this._layerSize.width)<this._tiles.length&&(this._tiles[C$99e]=C$99t,this._cullingDirty=!0)},getTileGIDAt:function(C$99t,C$99e){if(void 0===C$99t)throw new Error("cc.TiledLayer.getTileGIDAt(): pos should be non-null");var C$99i=C$99t;if(void 0===C$99e&&(C$99i=C$99t.x,C$99e=C$99t.y),this._isInvalidPosition(C$99i,C$99e))throw new Error("cc.TiledLayer.getTileGIDAt(): invalid position");if(!this._tiles)return cc.logID(7237),null;C$99t=Math.floor(C$99i)+Math.floor(C$99e)*this._layerSize.width;return(this._tiles[C$99t]&cc.TiledMap.TileFlag.FLIPPED_MASK)>>>0},getTileFlagsAt:function(C$99t,C$99e){if(!C$99t)throw new Error("TiledLayer.getTileFlagsAt: pos should be non-null");if(void 0!==C$99e&&(C$99t=cc.v2(C$99t,C$99e)),this._isInvalidPosition(C$99t))throw new Error("TiledLayer.getTileFlagsAt: invalid position");if(!this._tiles)return cc.logID(7240),null;C$99e=Math.floor(C$99t.x)+Math.floor(C$99t.y)*this._layerSize.width;return(this._tiles[C$99e]&cc.TiledMap.TileFlag.FLIPPED_ALL)>>>0},_setCullingDirty:function(C$99t){this._cullingDirty=C$99t},_isCullingDirty:function(){return this._cullingDirty},_updateViewPort:function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s,C$99o;this._viewPort.width===C$99i&&this._viewPort.height===C$99n&&this._viewPort.x===C$99t&&this._viewPort.y===C$99e||(this._viewPort.x=C$99t,this._viewPort.y=C$99e,this._viewPort.width=C$99i,this._viewPort.height=C$99n,C$99t=1,this._layerOrientation===cc.TiledMap.Orientation.ISO&&(C$99t=2),C$99e=this._viewPort.x-this._offset.x+this._leftDownToCenterX,C$99o=this._viewPort.y-this._offset.y+this._leftDownToCenterY,C$99r=C$99e-this._leftOffset,C$99s=C$99o-this._downOffset,C$99e=C$99e+C$99i+this._rightOffset,C$99i=C$99o+C$99n+this._topOffset,C$99o=this._cullingRect.leftDown,C$99n=this._cullingRect.rightTop,this._positionToRowCol(C$99r=C$99r<0?0:C$99r,C$99s=C$99s<0?0:C$99s,C$99c),C$99c.row-=C$99t,C$99c.col-=C$99t,C$99c.row=0<C$99c.row?C$99c.row:0,C$99c.col=0<C$99c.col?C$99c.col:0,C$99c.row===C$99o.row&&C$99c.col===C$99o.col||(C$99o.row=C$99c.row,C$99o.col=C$99c.col,this._cullingDirty=!0),C$99e<0||C$99i<0?(C$99c.row=-1,C$99c.col=-1):(this._positionToRowCol(C$99e,C$99i,C$99c),C$99c.row++,C$99c.col++),C$99c.row>this._rightTop.row&&(C$99c.row=this._rightTop.row),C$99c.col>this._rightTop.col&&(C$99c.col=this._rightTop.col),C$99c.row===C$99n.row&&C$99c.col===C$99n.col||(C$99n.row=C$99c.row,C$99n.col=C$99c.col,this._cullingDirty=!0))},_positionToRowCol:function(C$99t,C$99e,C$99i){var C$99n,C$99r=cc.TiledMap,C$99s=C$99r.Orientation,C$99h=C$99r.StaggerAxis,C$99o=this._mapTileSize.width,C$99a=this._mapTileSize.height,C$99u=.5*C$99o,C$99_=.5*C$99a,C$99c=0,C$99l=0,C$99d=this._staggerAxis;this._layerSize.width;switch(this._layerOrientation){case C$99s.ORTHO:C$99l=Math.floor(C$99t/C$99o),C$99c=Math.floor(C$99e/C$99a);break;case C$99s.ISO:C$99l=Math.floor(C$99t/C$99u),C$99c=Math.floor(C$99e/C$99_);break;case C$99s.HEX:C$99d===C$99h.STAGGERAXIS_Y?(C$99n=(C$99c=Math.floor(C$99e/(C$99a-this._diffY1)))%2==1?C$99u*this._odd_even:0,C$99l=Math.floor((C$99t-C$99n)/C$99o)):(C$99n=(C$99l=Math.floor(C$99t/(C$99o-this._diffX1)))%2==1?C$99_*-this._odd_even:0,C$99c=Math.floor((C$99e-C$99n)/C$99a))}return C$99i.row=C$99c,C$99i.col=C$99l,C$99i},_updateCulling:function(){var C$99t,C$99e;this._enableCulling&&(this.node._updateWorldMatrix(),C$99i.Mat4.invert(C$99s,this.node._worldMatrix),C$99t=cc.visibleRect,(C$99e=cc.Camera.findCamera(this.node))&&(C$99o.x=0,C$99o.y=0,C$99a.x=C$99o.x+C$99t.width,C$99a.y=C$99o.y+C$99t.height,C$99e.getScreenToWorldPoint(C$99o,C$99o),C$99e.getScreenToWorldPoint(C$99a,C$99a),C$99i.Vec2.transformMat4(C$99o,C$99o,C$99s),C$99i.Vec2.transformMat4(C$99a,C$99a,C$99s),this._updateViewPort(C$99o.x,C$99o.y,C$99a.x-C$99o.x,C$99a.y-C$99o.y)))},getLayerOrientation:function(){return this._layerOrientation},getProperties:function(){return this._properties},_updateVertices:function(){var C$99h=cc.TiledMap,C$99u=C$99h.TileFlag.FLIPPED_MASK,C$99_=C$99h.StaggerAxis,C$99d=C$99h.Orientation,C$99f=this._vertices,C$99p=(C$99f.length=0,this._layerOrientation),C$99m=this._tiles;if(C$99m){for(var C$99t,C$99e,C$99y,C$99g,C$99v,C$99x,C$99b,C$99A,C$99i=this._rightTop,C$99C=(C$99i.row=-1,C$99i.col=-1,this._mapTileSize.width),C$99S=this._mapTileSize.height,C$99T=.5*C$99C,C$99w=.5*C$99S,C$99n=this._layerSize.height,C$99E=this._layerSize.width,C$99M=this._texGrids,C$99I=0,C$99r=(C$99p===C$99d.HEX&&(C$99y=this._staggerAxis,C$99g=this._diffX1,C$99v=this._diffY1,C$99x=this._odd_even),0),C$99s=0,C$99o=(this._topOffset=0,this._downOffset=0,this._leftOffset=0,this._rightOffset=0,this._hasAniGrid=!1,0),C$99B=0,C$99a=0;C$99a<C$99n;++C$99a){for(var C$99c=0;C$99c<C$99E;++C$99c){var C$99R=C$99I+C$99c,C$99P=C$99M[C$99l=(C$99m[C$99R]&C$99u)>>>0];if(this._animations[C$99l]&&(this._hasAniGrid=!0),C$99P){switch(C$99p){case C$99d.ORTHO:C$99t=(C$99r=C$99c)*C$99C,C$99e=(C$99s=C$99n-C$99a-1)*C$99S;break;case C$99d.ISO:C$99t=C$99T*(C$99r=C$99n+C$99c-C$99a-1),C$99e=C$99w*(C$99s=C$99n+C$99E-C$99c-C$99a-2);break;case C$99d.HEX:C$99t=C$99c*(C$99C-C$99g)+(C$99y===C$99_.STAGGERAXIS_Y&&C$99a%2==1?C$99T*C$99x:0),C$99e=(C$99n-C$99a-1)*(C$99S-C$99v)+(C$99y===C$99_.STAGGERAXIS_X&&C$99c%2==1?C$99w*-C$99x:0),C$99r=C$99c,C$99s=C$99n-C$99a-1}var C$99l=C$99f[C$99s]=C$99f[C$99s]||{minCol:0,maxCol:0},C$99D=C$99l[C$99r]=C$99l[C$99r]||{};C$99l.minCol>C$99r&&(C$99l.minCol=C$99r),C$99l.maxCol<C$99r&&(C$99l.maxCol=C$99r),C$99i.row<C$99s&&(C$99i.row=C$99s),C$99i.col<C$99r&&(C$99i.col=C$99r),C$99l=C$99P.tileset.tileOffset,C$99t+=this._offset.x+C$99l.x,C$99e+=this._offset.y-C$99l.y,C$99o=(C$99o=-C$99l.y+C$99P.tileset._tileSize.height-C$99S)<0?0:C$99o,C$99b=C$99l.y<0?0:C$99l.y,C$99A=-C$99l.x<0?0:-C$99l.x,C$99B=(C$99B=C$99l.x+C$99P.tileset._tileSize.width-C$99C)<0?0:C$99B,this._rightOffset<C$99A&&(this._rightOffset=C$99A),this._leftOffset<C$99B&&(this._leftOffset=C$99B),this._topOffset<C$99b&&(this._topOffset=C$99b),this._downOffset<C$99o&&(this._downOffset=C$99o),C$99D.left=C$99t,C$99D.bottom=C$99e,C$99D.index=C$99R}}C$99I+=C$99E}this._verticesDirty=!1}},getTiledTileAt:function(C$99t,C$99e,C$99i){if(this._isInvalidPosition(C$99t,C$99e))throw new Error("TiledLayer.getTiledTileAt: invalid position");if(!this._tiles)return cc.logID(7236),null;var C$99n=Math.floor(C$99t)+Math.floor(C$99e)*this._layerSize.width,C$99n=this._tiledTiles[C$99n];return!C$99n&&C$99i&&((C$99n=(C$99i=new cc.Node).addComponent(cc.TiledTile))._x=C$99t,C$99n._y=C$99e,C$99n._layer=this,C$99n._updateInfo(),C$99i.parent=this.node),C$99n},setTiledTileAt:function(C$99t,C$99e,C$99i){if(this._isInvalidPosition(C$99t,C$99e))throw new Error("TiledLayer.setTiledTileAt: invalid position");if(!this._tiles)return cc.logID(7236),null;C$99t=Math.floor(C$99t)+Math.floor(C$99e)*this._layerSize.width;return this._tiledTiles[C$99t]=C$99i,this._cullingDirty=!0,this._hasTiledNodeGrid=!!C$99i||this._tiledTiles.some(function(C$99t,C$99e){return!!C$99t}),C$99i},getTexture:function(C$99t){return C$99t=C$99t||0,this._textures&&0<=C$99t&&this._textures.length>C$99t?this._textures[C$99t]:null},getTextures:function(){return this._textures},setTexture:function(C$99t){this.setTextures([C$99t])},setTextures:function(C$99t){this._textures=C$99t,this._activateMaterial()},getLayerSize:function(){return this._layerSize},getMapTileSize:function(){return this._mapTileSize},getTileSet:function(C$99t){return C$99t=C$99t||0,this._tilesets&&0<=C$99t&&this._tilesets.length>C$99t?this._tilesets[C$99t]:null},getTileSets:function(){return this._tilesets},setTileSet:function(C$99t){this.setTileSets([C$99t])},setTileSets:function(C$99n){this._tilesets=C$99n;for(var C$99t=this._textures=[],C$99r=this._texGrids=[],C$99e=0;C$99e<C$99n.length;C$99e++){var C$99i=C$99n[C$99e];C$99i&&(C$99t[C$99e]=C$99i.sourceImage)}cc.TiledMap.loadAllTextures(C$99t,function(){for(var C$99t=0,C$99e=C$99n.length;C$99t<C$99e;++C$99t){var C$99i=C$99n[C$99t];C$99i&&cc.TiledMap.fillTextureGrids(C$99i,C$99r,C$99t)}this._prepareToRender()}.bind(this))},_traverseAllGrid:function(){for(var C$99t=this._tiles,C$99e=this._texGrids,C$99i=this._tilesetIndexArr,C$99n={},C$99r=cc.TiledMap.TileFlag.FLIPPED_MASK,C$99s=C$99i.length=0;C$99s<C$99t.length;C$99s++){var C$99o,C$99a=C$99t[C$99s];0!==C$99a&&((C$99o=C$99e[C$99a=(C$99a&C$99r)>>>0])?C$99n[C$99o=C$99o.texId]||(C$99n[C$99o]=!0,C$99i.push(C$99o)):cc.error("CCTiledLayer:_traverseAllGrid grid is null, gid is:",C$99a))}},_init:function(C$99t,C$99e,C$99i,C$99n,C$99r){this._cullingDirty=!0,this._layerInfo=C$99t,this._mapInfo=C$99e;var C$99s,C$99o,C$99a,C$99c=C$99t._layerSize,C$99c=(this._layerName=C$99t.name,this._tiles=C$99t._tiles,this._properties=C$99t.properties,this._layerSize=C$99c,this._minGID=C$99t._minGID,this._maxGID=C$99t._maxGID,this._opacity=C$99t._opacity,this._renderOrder=C$99e.renderOrder,this._staggerAxis=C$99e.getStaggerAxis(),this._staggerIndex=C$99e.getStaggerIndex(),this._hexSideLength=C$99e.getHexSideLength(),this._animations=C$99e.getTileAnimations(),this._tilesets=C$99i,this._textures=C$99n,this._texGrids=C$99r,this._layerOrientation=C$99e.orientation,this._mapTileSize=C$99e.getTileSize(),this._mapTileSize.width),C$99i=this._mapTileSize.height,C$99n=this._layerSize.width,C$99r=this._layerSize.height;this._layerOrientation===cc.TiledMap.Orientation.HEX?(C$99s=(C$99e=cc.TiledMap).StaggerAxis,C$99e=C$99e.StaggerIndex,C$99a=C$99o=0,this._odd_even=this._staggerIndex===C$99e.STAGGERINDEX_ODD?1:-1,this._staggerAxis===C$99s.STAGGERAXIS_X?(this._diffX1=(C$99c-this._hexSideLength)/2,this._diffY1=0,C$99a=C$99i*(C$99r+.5),C$99o=(C$99c+this._hexSideLength)*Math.floor(C$99n/2)+C$99c*(C$99n%2)):(this._diffX1=0,this._diffY1=(C$99i-this._hexSideLength)/2,C$99o=C$99c*(C$99n+.5),C$99a=(C$99i+this._hexSideLength)*Math.floor(C$99r/2)+C$99i*(C$99r%2)),this.node.setContentSize(C$99o,C$99a)):this._layerOrientation===cc.TiledMap.Orientation.ISO?this.node.setContentSize(.5*C$99c*(C$99e=C$99n+C$99r),.5*C$99i*C$99e):this.node.setContentSize(C$99n*C$99c,C$99r*C$99i),this._offset=cc.v2(C$99t.offset.x,-C$99t.offset.y),this._useAutomaticVertexZ=!1,this._vertexZvalue=0,this._syncAnchorPoint(),this._prepareToRender()},_prepareToRender:function(){this._updateVertices(),this._traverseAllGrid(),this._updateAllUserNode(),this._activateMaterial()},_activateMaterial:function(){var C$99t=this._tilesetIndexArr;if(0!==C$99t.length){for(var C$99e=this._texIdToMatIndex={},C$99i=this._textures,C$99n=C$99t.length,C$99r=0;C$99r<C$99n;C$99r++){var C$99s=C$99t[C$99r],C$99o=C$99i[C$99s],C$99a=(C$99a=this._materials[C$99r])||C$99_.getBuiltinMaterial("2d-sprite");(C$99a=C$99u.default.create(C$99a,this)).define("CC_USE_MODEL",!0),C$99a.setProperty("texture",C$99o),this._materials[C$99r]=C$99a,C$99e[C$99s]=C$99r}this._materials.length=C$99n,this.markForRender(!0)}else this.disableRender()}});cc.TiledLayer=C$99e.exports=C$99t},{"../core/assets/material/CCMaterial":53,"../core/assets/material/material-variant":60,"../core/components/CCRenderComponent":89,"../core/renderer/render-flow":221,"../core/value-types":279}],338:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCTMXXMLParser"),C$99t("./CCTiledMapAsset"),C$99t("./CCTiledLayer"),C$99t("./CCTiledTile"),C$99t("./CCTiledObjectGroup");var C$99t=cc.Enum({ORTHO:0,HEX:1,ISO:2}),C$99n=cc.Enum({NONE:0,MAP:1,LAYER:2,OBJECTGROUP:3,OBJECT:4,TILE:5}),C$99r=cc.Enum({HORIZONTAL:2147483648,VERTICAL:1073741824,DIAGONAL:536870912,FLIPPED_ALL:4026531840,FLIPPED_MASK:268435455}),C$99s=cc.Enum({STAGGERAXIS_X:0,STAGGERAXIS_Y:1}),C$99o=cc.Enum({STAGGERINDEX_ODD:0,STAGGERINDEX_EVEN:1}),C$99a=cc.Enum({RightDown:0,RightUp:1,LeftDown:2,LeftUp:3}),C$99c=cc.Enum({RECT:0,ELLIPSE:1,POLYGON:2,POLYLINE:3,IMAGE:4,TEXT:5}),C$99t=cc.Class({name:"cc.TiledMap",extends:cc.Component,editor:!1,ctor:function(){this._texGrids=[],this._textures=[],this._tilesets=[],this._animations=[],this._imageLayers=[],this._layers=[],this._groups=[],this._images=[],this._properties=[],this._tileProperties=[],this._mapSize=cc.size(0,0),this._tileSize=cc.size(0,0)},statics:{Orientation:C$99t,Property:C$99n,TileFlag:C$99r,StaggerAxis:C$99s,StaggerIndex:C$99o,TMXObjectType:C$99c,RenderOrder:C$99a},properties:{_tmxFile:{default:null,type:cc.TiledMapAsset},tmxAsset:{get:function(){return this._tmxFile},set:function(C$99t,C$99e){this._tmxFile!==C$99t&&(this._tmxFile=C$99t,this._applyFile())},type:cc.TiledMapAsset}},getMapSize:function(){return this._mapSize},getTileSize:function(){return this._tileSize},getMapOrientation:function(){return this._mapOrientation},getObjectGroups:function(){return this._groups},getObjectGroup:function(C$99t){for(var C$99e=this._groups,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r&&C$99r.getGroupName()===C$99t)return C$99r}return null},enableCulling:function(C$99t){for(var C$99e=this._layers,C$99i=0;C$99i<C$99e.length;++C$99i)C$99e[C$99i].enableCulling(C$99t)},getProperties:function(){return this._properties},getLayers:function(){return this._layers},getLayer:function(C$99t){for(var C$99e=this._layers,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r&&C$99r.getLayerName()===C$99t)return C$99r}return null},_changeLayer:function(C$99t,C$99e){for(var C$99i=this._layers,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++){var C$99s=C$99i[C$99n];if(C$99s&&C$99s.getLayerName()===C$99t)return void(C$99i[C$99n]=C$99e)}},getProperty:function(C$99t){return this._properties[C$99t.toString()]},getPropertiesForGID:function(C$99t){return this._tileProperties[C$99t]},__preload:function(){this._tmxFile&&this._applyFile()},onEnable:function(){this.node.on(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},onDisable:function(){this.node.off(cc.Node.EventType.ANCHOR_CHANGED,this._syncAnchorPoint,this)},_applyFile:function(){var C$99t=this._tmxFile;if(C$99t){for(var C$99e=C$99t.textures,C$99i=C$99t.textureNames,C$99h=C$99t.textureSizes,C$99n={},C$99r={},C$99s=0;C$99s<C$99e.length;++C$99s){var C$99o=C$99i[C$99s];C$99n[C$99o]=C$99e[C$99s],C$99r[C$99o]=C$99h[C$99s]}for(var C$99u={},C$99e=C$99t.imageLayerTextures,C$99i=C$99t.imageLayerTextureNames,C$99a=0;C$99a<C$99e.length;++C$99a)C$99u[C$99i[C$99a]]=C$99e[C$99a];for(var C$99c=C$99t.tsxFileNames,C$99_=C$99t.tsxFiles,C$99d={},C$99l=0;C$99l<C$99c.length;++C$99l)0<C$99c[C$99l].length&&(C$99d[C$99c[C$99l]]=C$99_[C$99l].text);var C$99t=new cc.TMXMapInfo(C$99t.tmxXmlStr,C$99d,C$99n,C$99r,C$99u),C$99f=C$99t.getTilesets();C$99f&&0!==C$99f.length||cc.logID(7241),this._buildWithMapInfo(C$99t)}else this._releaseMapInfo()},_releaseMapInfo:function(){for(var C$99t=this._layers,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)C$99t[C$99e].node.removeFromParent(!0),C$99t[C$99e].node.destroy();C$99t.length=0;for(var C$99n=this._groups,C$99r=0,C$99s=C$99n.length;C$99r<C$99s;C$99r++)C$99n[C$99r].node.removeFromParent(!0),C$99n[C$99r].node.destroy();C$99n.length=0;for(var C$99o=this._images,C$99a=0,C$99c=C$99o.length;C$99a<C$99c;C$99a++)C$99o[C$99a].removeFromParent(!0),C$99o[C$99a].destroy();C$99o.length=0},_syncAnchorPoint:function(){for(var C$99t=this.node.getAnchorPoint(),C$99e=this.node.width*C$99t.x,C$99i=this.node.height*(1-C$99t.y),C$99n=0,C$99r=this._layers.length;C$99n<C$99r;C$99n++)this._layers[C$99n].node.setAnchorPoint(C$99t);for(C$99n=0,C$99r=this._groups.length;C$99n<C$99r;C$99n++){var C$99s=this._groups[C$99n],C$99o=C$99s.node;C$99o.anchorX=.5,C$99o.anchorY=.5,C$99o.x=C$99s._offset.x-C$99e+C$99o.width*C$99o.anchorX,C$99o.y=C$99s._offset.y+C$99i-C$99o.height*C$99o.anchorY}for(C$99n=0,C$99r=this._images.length;C$99n<C$99r;C$99n++){var C$99a=this._images[C$99n];C$99a.anchorX=.5,C$99a.anchorY=.5,C$99a.x=C$99a._offset.x-C$99e+C$99a.width*C$99a.anchorX,C$99a.y=C$99a._offset.y+C$99i-C$99a.height*C$99a.anchorY}},_fillAniGrids:function(C$99t,C$99e){for(var C$99i in C$99e){C$99i=C$99e[C$99i];if(C$99i)for(var C$99n=C$99i.frames,C$99r=0;C$99r<C$99n.length;C$99r++){var C$99s=C$99n[C$99r];C$99s.grid=C$99t[C$99s.tileid]}}},_buildLayerAndGroup:function(){for(var C$99t=this._tilesets,C$99e=this._texGrids,C$99h=this._animations,C$99i=C$99e.length=0,C$99u=C$99t.length;C$99i<C$99u;++C$99i){var C$99_=C$99t[C$99i];C$99_&&cc.TiledMap.fillTextureGrids(C$99_,C$99e,C$99i)}this._fillAniGrids(C$99e,C$99h);for(var C$99n=this._layers,C$99d=this._groups,C$99f=this._images,C$99r={},C$99p=0,C$99m=C$99n.length;C$99p<C$99m;C$99p++)C$99r[C$99n[C$99p].node._name]=!0;for(var C$99y=0,C$99g=C$99d.length;C$99y<C$99g;C$99y++)C$99r[C$99d[C$99y].node._name]=!0;for(var C$99v=0,C$99x=C$99f.length;C$99v<C$99x;C$99v++)C$99r[C$99f[C$99v]._name]=!0;var C$99n=this._layers=[],C$99d=this._groups=[],C$99f=this._images=[],C$99b=this._mapInfo,C$99A=this.node,C$99s=C$99b.getAllChildren(),C$99C=this._textures,C$99S=0,C$99T=0;if(C$99s&&0<C$99s.length)for(var C$99o=0,C$99w=C$99s.length;C$99o<C$99w;C$99o++){var C$99E,C$99a=C$99s[C$99o],C$99c=C$99a.name,C$99l=this.node.getChildByName(C$99c);C$99r[C$99c]=!1,C$99l||((C$99l=new cc.Node).name=C$99c,C$99A.addChild(C$99l)),C$99l.setSiblingIndex(C$99o),C$99l.active=C$99a.visible,C$99a instanceof cc.TMXLayerInfo?((C$99c=(C$99c=C$99l.getComponent(cc.TiledLayer))||C$99l.addComponent(cc.TiledLayer))._init(C$99a,C$99b,C$99t,C$99C,C$99e),C$99a.ownTiles=!1,C$99n.push(C$99c)):C$99a instanceof cc.TMXObjectGroupInfo?((C$99c=(C$99c=C$99l.getComponent(cc.TiledObjectGroup))||C$99l.addComponent(cc.TiledObjectGroup))._init(C$99a,C$99b,C$99e),C$99d.push(C$99c)):C$99a instanceof cc.TMXImageLayerInfo&&(C$99c=C$99a.sourceImage,C$99l.opacity=C$99a.opacity,C$99l.layerInfo=C$99a,C$99l._offset=cc.v2(C$99a.offset.x,-C$99a.offset.y),(C$99E=(C$99a=(C$99a=C$99l.getComponent(cc.Sprite))||C$99l.addComponent(cc.Sprite)).spriteFrame||new cc.SpriteFrame).setTexture(C$99c),C$99a.spriteFrame=C$99E,C$99l.width=C$99c.width,C$99l.height=C$99c.height,C$99f.push(C$99l)),C$99S=Math.max(C$99S,C$99l.width),C$99T=Math.max(C$99T,C$99l.height)}for(var C$99M=C$99A.children,C$99I=0,C$99B=C$99M.length;C$99I<C$99B;C$99I++){var C$99R=C$99M[C$99I];C$99r[C$99R._name]&&C$99R.destroy()}this.node.width=C$99S,this.node.height=C$99T,this._syncAnchorPoint()},_buildWithMapInfo:function(C$99t){this._mapInfo=C$99t,this._mapSize=C$99t.getMapSize(),this._tileSize=C$99t.getTileSize(),this._mapOrientation=C$99t.orientation,this._properties=C$99t.properties,this._tileProperties=C$99t.getTileProperties(),this._imageLayers=C$99t.getImageLayers(),this._animations=C$99t.getTileAnimations(),this._tilesets=C$99t.getTilesets();for(var C$99e=this._tilesets,C$99i=[],C$99n=this._textures.length=0,C$99r=C$99e.length;C$99n<C$99r;++C$99n){var C$99s=C$99e[C$99n];C$99s&&C$99s.sourceImage&&(this._textures[C$99n]=C$99s.sourceImage,C$99i.push(C$99s.sourceImage))}for(var C$99o=0;C$99o<this._imageLayers.length;C$99o++){var C$99a=this._imageLayers[C$99o];C$99a&&C$99a.sourceImage&&C$99i.push(C$99a.sourceImage)}cc.TiledMap.loadAllTextures(C$99i,function(){this._buildLayerAndGroup()}.bind(this))},update:function(C$99t){var C$99e,C$99i=this._animations,C$99n=this._texGrids;for(C$99e in C$99i){var C$99r=C$99i[C$99e],C$99s=C$99r.frames,C$99o=C$99s[C$99r.frameIdx];C$99r.dt+=C$99t,C$99o.duration<C$99r.dt&&(C$99r.dt=0,C$99r.frameIdx++,C$99r.frameIdx>=C$99s.length&&(C$99r.frameIdx=0),C$99o=C$99s[C$99r.frameIdx]),C$99n[C$99e]=C$99o.grid}}});cc.TiledMap=C$99e.exports=C$99t,cc.TiledMap.loadAllTextures=function(C$99t,C$99e){var C$99i=C$99t.length;if(0!==C$99i)for(var C$99n=0,C$99r=function(){C$99i<=++C$99n&&C$99e()},C$99s=0;C$99s<C$99i;C$99s++){var C$99o=C$99t[C$99s];C$99o.loaded?C$99r():C$99o.once("load",function(){C$99r()})}else C$99e()},cc.TiledMap.fillTextureGrids=function(C$99t,C$99e,C$99h){for(var C$99i=C$99t.sourceImage,C$99u=(C$99t.imageSize.width&&C$99t.imageSize.height||(C$99t.imageSize.width=C$99i.width,C$99t.imageSize.height=C$99i.height),C$99t._tileSize.width),C$99_=C$99t._tileSize.height,C$99n=C$99i.width,C$99r=C$99i.height,C$99i=C$99t.spacing,C$99s=C$99t.margin,C$99d=Math.floor((C$99n-2*C$99s+C$99i)/(C$99u+C$99i)),C$99s=Math.floor((C$99r-2*C$99s+C$99i)/(C$99_+C$99i))*C$99d,C$99o=C$99t.firstGid,C$99a=null,C$99c=!!C$99e[C$99o],C$99l=cc.macro.FIX_ARTIFACTS_BY_STRECHING_TEXEL_TMX?.5:0,C$99f=C$99t.firstGid+(C$99s=C$99s<=0?1:C$99s);C$99o<C$99f&&((C$99c=!(C$99c&&!C$99e[C$99o])&&C$99c)||!C$99e[C$99o]);++C$99o)C$99t.rectForGID(C$99o,C$99a={texId:C$99h,tileset:C$99t,x:0,y:0,width:C$99u,height:C$99_,t:0,l:0,r:0,b:0,gid:C$99o}),C$99a.x+=C$99l,C$99a.y+=C$99l,C$99a.width-=2*C$99l,C$99a.height-=2*C$99l,C$99a.t=C$99a.y/C$99r,C$99a.l=C$99a.x/C$99n,C$99a.r=(C$99a.x+C$99a.width)/C$99n,C$99a.b=(C$99a.y+C$99a.height)/C$99r,C$99e[C$99o]=C$99a},cc.js.obsolete(cc.TiledMap.prototype,"cc.TiledMap.tmxFile","tmxAsset",!0),cc.js.get(cc.TiledMap.prototype,"mapLoaded",function(){return cc.errorID(7203),[]},!1)},{"./CCTMXXMLParser":336,"./CCTiledLayer":337,"./CCTiledMapAsset":339,"./CCTiledObjectGroup":341,"./CCTiledTile":342}],339:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.TiledMapAsset",extends:cc.Asset,properties:{tmxXmlStr:"",textures:{default:[],type:[cc.Texture2D]},textureNames:[cc.String],textureSizes:{default:[],type:[cc.Size]},imageLayerTextures:{default:[],type:[cc.Texture2D]},imageLayerTextureNames:[cc.String],tsxFiles:[cc.TextAsset],tsxFileNames:[cc.String]},statics:{preventDeferredLoadDependents:!0},createNode:!1});cc.TiledMapAsset=C$99n,C$99e.exports=C$99n},{}],340:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=(C$99t=C$99t("../renderer/core/input-assembler"))&&C$99t.__esModule?C$99t:{default:C$99t};C$99t=cc.Class({name:"cc.TiledMapRenderDataList",ctor:function(){this._dataList=[],this._offset=0},_pushRenderData:function(){var C$99t={};C$99t.ia=new C$99n.default,C$99t.nodesRenderList=[],this._dataList.push(C$99t)},popRenderData:function(C$99t){this._offset>=this._dataList.length&&this._pushRenderData();var C$99e=this._dataList[this._offset],C$99i=(C$99e.nodesRenderList.length=0,C$99e.ia);return C$99i._vertexBuffer=C$99t._vb,C$99i._indexBuffer=C$99t._ib,C$99i._start=C$99t.indiceOffset,C$99i._count=0,this._offset++,C$99e},pushNodesList:function(C$99t,C$99e){C$99t.nodesRenderList.push(C$99e)},reset:function(){this._offset=0}});cc.TiledMapRenderDataList=C$99e.exports=C$99t},{"../renderer/core/input-assembler":302}],341:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.TiledObjectGroup",extends:cc.Component,getPositionOffset:function(){return this._positionOffset},getProperties:function(){this._properties},getGroupName:function(){return this._groupName},getProperty:function(C$99t){return this._properties[C$99t.toString()]},getObject:function(C$99t){for(var C$99e=0,C$99i=this._objects.length;C$99e<C$99i;C$99e++){var C$99n=this._objects[C$99e];if(C$99n&&C$99n.name===C$99t)return C$99n}return null},getObjects:function(){return this._objects},_init:function(C$99h,C$99t,C$99u){for(var C$99e=cc.TiledMap,C$99_=C$99e.TMXObjectType,C$99d=C$99e.Orientation,C$99f=C$99e.StaggerAxis,C$99e=C$99e.TileFlag,C$99p=C$99e.FLIPPED_MASK,C$99m=C$99e.HORIZONTAL,C$99y=C$99e.VERTICAL,C$99i=(this._groupName=C$99h.name,this._positionOffset=C$99h.offset,this._mapInfo=C$99t,this._properties=C$99h.getProperties(),this._offset=cc.v2(C$99h.offset.x,-C$99h.offset.y),this._opacity=C$99h._opacity,C$99t._mapSize),C$99n=C$99t._tileSize,C$99e=0,C$99g=0,C$99v=(C$99t.orientation===C$99d.HEX?C$99t.getStaggerAxis()===C$99f.STAGGERAXIS_X?(C$99g=C$99n.height*(C$99i.height+.5),C$99e=(C$99n.width+C$99t.getHexSideLength())*Math.floor(C$99i.width/2)+C$99n.width*(C$99i.width%2)):(C$99e=C$99n.width*(C$99i.width+.5),C$99g=(C$99n.height+C$99t.getHexSideLength())*Math.floor(C$99i.height/2)+C$99n.height*(C$99i.height%2)):C$99g=C$99t.orientation===C$99d.ISO?(C$99f=C$99i.width+C$99i.height,C$99e=.5*C$99n.width*C$99f,.5*C$99n.height*C$99f):(C$99e=C$99i.width*C$99n.width,C$99i.height*C$99n.height),this.node.setContentSize(C$99e,C$99g),C$99e*this.node.anchorX),C$99x=C$99g*(1-this.node.anchorY),C$99b=C$99h._objects,C$99A={},C$99C=0,C$99S=C$99b.length;C$99C<C$99S;C$99C++){var C$99T,C$99r,C$99s,C$99w,C$99o,C$99E,C$99M,C$99I,C$99a,C$99c=C$99b[C$99C],C$99l=C$99c.type,C$99B=(C$99c.offset=cc.v2(C$99c.x,C$99c.y),C$99c.points||C$99c.polylinePoints);if(C$99B)for(var C$99R=0;C$99R<C$99B.length;C$99R++)C$99B[C$99R].y*=-1;C$99d.ISO!==C$99t.orientation?C$99c.y=C$99g-C$99c.y:(C$99T=C$99c.x/C$99n.height,C$99r=C$99c.y/C$99n.height,C$99c.x=.5*C$99n.width*(C$99i.height+C$99T-C$99r),C$99c.y=.5*C$99n.height*(C$99i.width+C$99i.height-C$99T-C$99r)),C$99l===C$99_.TEXT&&(C$99A[C$99T="text"+C$99c.id]=!0,(C$99r=(C$99r=this.node.getChildByName(C$99T))||new cc.Node).anchorX=0,C$99r.anchorY=1,C$99r.angle=-C$99c.rotation,C$99r.x=C$99c.x-C$99v,C$99r.y=C$99c.y-C$99x,C$99r.name=C$99T,C$99r.parent=this.node,C$99r.color=C$99c.color,C$99r.opacity=this._opacity,C$99r.setSiblingIndex(C$99C),(C$99s=(C$99s=C$99r.getComponent(cc.Label))||C$99r.addComponent(cc.Label)).overflow=cc.Label.Overflow.SHRINK,C$99s.lineHeight=C$99c.height,C$99s.string=C$99c.text,C$99s.horizontalAlign=C$99c.halign,C$99s.verticalAlign=C$99c.valign,C$99s.fontSize=C$99c.pixelsize,C$99r.width=C$99c.width,C$99r.height=C$99c.height),C$99l!==C$99_.IMAGE||(C$99l=C$99u[((C$99s=C$99c.gid)&C$99p)>>>0])&&(C$99a=C$99l.tileset,C$99A[C$99w="img"+C$99c.id]=!0,C$99o=this.node.getChildByName(C$99w),C$99E=C$99c.width||C$99l.width,C$99M=C$99c.height||C$99l.height,C$99I=C$99a.tileOffset.x,C$99a=C$99a.tileOffset.y,C$99o instanceof cc.PrivateNode&&(C$99o.removeFromParent(),C$99o.destroy(),C$99o=null),C$99o=C$99o||new cc.Node,C$99d.ISO==C$99t.orientation?C$99o.anchorX=.5+C$99I/C$99E:C$99o.anchorX=C$99I/C$99E,C$99o.anchorY=C$99a/C$99M,C$99o.angle=-C$99c.rotation,C$99o.x=C$99c.x-C$99v,C$99o.y=C$99c.y-C$99x,C$99o.name=C$99w,C$99o.parent=this.node,C$99o.opacity=this._opacity,C$99o.setSiblingIndex(C$99C),C$99a=(C$99a=(C$99I=(C$99I=C$99o.getComponent(cc.Sprite))||C$99o.addComponent(cc.Sprite)).spriteFrame)||new cc.SpriteFrame,(C$99s&C$99m)>>>0?C$99a.setFlipX(!0):C$99a.setFlipX(!1),(C$99s&C$99y)>>>0?C$99a.setFlipY(!0):C$99a.setFlipY(!1),C$99a.setTexture(C$99l.tileset.sourceImage,cc.rect(C$99l)),C$99I.spriteFrame=C$99a,C$99I.setVertsDirty(),C$99o.width=C$99E,C$99o.height=C$99M)}this._objects=C$99b;for(var C$99P=this.node.children,C$99D=/^(?:img|text)\d+$/,C$99L=0,C$99V=C$99P.length;C$99L<C$99V;C$99L++){var C$99O=C$99P[C$99L],C$99F=C$99O._name;C$99D.test(C$99F)&&!C$99A[C$99F]&&C$99O.destroy()}}});cc.TiledObjectGroup=C$99e.exports=C$99n},{}],342:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=cc.Class({name:"cc.TiledTile",extends:cc.Component,editor:!1,ctor:function(){this._layer=null},properties:{_x:0,_y:0,x:{get:function(){return this._x},set:function(C$99t){C$99t!==this._x&&(this._layer&&this._layer._isInvalidPosition(C$99t,this._y)?cc.warn("Invalid x, the valid value is between [%s] ~ [%s]",0,this._layer._layerSize.width):(this._resetTile(),this._x=C$99t,this._updateInfo()))},type:cc.Integer},y:{get:function(){return this._y},set:function(C$99t){C$99t!==this._y&&(this._layer&&this._layer._isInvalidPosition(this._x,C$99t)?cc.warn("Invalid y, the valid value is between [%s] ~ [%s]",0,this._layer._layerSize.height):(this._resetTile(),this._y=C$99t,this._updateInfo()))},type:cc.Integer},gid:{get:function(){return this._layer?this._layer.getTileGIDAt(this._x,this._y):0},set:function(C$99t){this._layer&&this._layer.setTileGIDAt(C$99t,this._x,this._y)},type:cc.Integer}},onEnable:function(){var C$99t=this.node.parent;this._layer=C$99t.getComponent(cc.TiledLayer),this._resetTile(),this._updateInfo()},onDisable:function(){this._resetTile()},_resetTile:function(){this._layer&&this._layer.getTiledTileAt(this._x,this._y)===this&&this._layer.setTiledTileAt(this._x,this._y,null)},_updateInfo:function(){var C$99t,C$99e;this._layer&&(C$99t=this._x,C$99e=this._y,this._layer.getTiledTileAt(C$99t,C$99e)?cc.warn("There is already a TiledTile at [%s, %s]",C$99t,C$99e):(this.node.setPosition(this._layer.getPositionAt(C$99t,C$99e)),this._layer.setTiledTileAt(C$99t,C$99e,this)))}});cc.TiledTile=C$99e.exports=C$99n},{}],343:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./CCTiledMap"),C$99t("./CCTiledMapRenderDataList"),C$99t("./tiledmap-buffer"),C$99t("./tmx-layer-assembler")},{"./CCTiledMap":338,"./CCTiledMapRenderDataList":340,"./tiledmap-buffer":344,"./tmx-layer-assembler":345}],344:[function(C$99t,C$99e,C$99i){"use strict";C$99t=cc.Class({name:"cc.TiledMapBuffer",extends:C$99t("../core/renderer/webgl/quad-buffer"),_updateOffset:function(){var C$99t=this._offsetInfo;C$99t.vertexOffset=this.vertexOffset,C$99t.indiceOffset=this.indiceOffset,C$99t.byteOffset=this.byteOffset},adjust:function(C$99t,C$99e){this.vertexOffset+=C$99t,this.indiceOffset+=C$99e,this.indiceStart=this.indiceOffset,this.byteOffset=this.byteOffset+C$99t*this._vertexBytes,this._dirty=!0}});cc.TiledMapBuffer=C$99e.exports=C$99t},{"../core/renderer/webgl/quad-buffer":249}],345:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99n=C$99t("../core/renderer/assembler"))&&C$99n.__esModule?C$99n:{default:C$99n},C$99d=C$99t("../core/value-types");function C$99r(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99o=C$99t("./CCTiledLayer"),C$99a=C$99t("./CCTiledMap"),C$99V=C$99a.TileFlag,C$99O=C$99V.FLIPPED_MASK,C$99c=C$99t("../core/renderer/"),C$99l=C$99t("../core/renderer/webgl/vertex-format").vfmtPosUvColor,C$99F=parseInt(10922.5),C$99f=C$99a.RenderOrder,C$99h=C$99t("../core/renderer/render-flow"),C$99p=cc.mat4(),C$99m=cc.v3(),C$99y={row:0,col:0},C$99N={x:0,y:0},C$99w={x:0,y:0},C$99E={x:0,y:0},C$99k={x:0,y:0},C$99M=null,C$99G=null,C$99z=0,C$99I=0,C$99U=0,C$99W=0,C$99g=null,C$99B=null,C$99R=null,C$99P=null,C$99H=null,C$99D=null,C$99L=null,C$99j=null;function C$99v(C$99t){C$99t._updateLocalMatrix(),C$99d.Mat4.mul(C$99t._worldMatrix,C$99g,C$99t._matrix),C$99t._renderFlag&=~(C$99h.FLAG_TRANSFORM|C$99h.FLAG_BREAK_FLOW),C$99h.visitRootNode(C$99t),C$99t._renderFlag|=C$99h.FLAG_BREAK_FLOW}function C$99X(){0!==C$99G._count&&(C$99B.material=C$99M.material,C$99B.node=C$99D.node,C$99B._flushIA(C$99M.ia),C$99F<=C$99z?(C$99P.uploadData(),C$99P.switchBuffer(),C$99L=C$99P._vData,C$99j=C$99P._uintVData,C$99M=C$99R.popRenderData(C$99P),C$99G=C$99M.ia,C$99z=C$99I=0):(C$99M=C$99R.popRenderData(C$99P),C$99G=C$99M.ia),C$99M.material=C$99H)}function C$99Y(C$99t,C$99e){var C$99i=C$99D._getNodesByRowCol(C$99t,C$99e);if(C$99i&&0!=C$99i.count){var C$99n=C$99i.list,C$99r=0,C$99s=0;for(C$99X(),C$99B.worldMatDirty++;C$99r<C$99i.count;){var C$99o=C$99n[C$99s];C$99s++,C$99o&&(C$99v(C$99o.node),C$99r!==C$99s&&((C$99n[C$99r]=C$99o)._index=C$99r),C$99r++)}C$99n.length=C$99r,C$99B.worldMatDirty--,C$99R.pushNodesList(C$99M,C$99n),C$99B._flush(),C$99B.node=C$99D.node}}C$99u=C$99n.default,C$99a=C$99u,(C$99t=C$99_).prototype=Object.create(C$99a.prototype),(C$99t.prototype.constructor=C$99t).__proto__=C$99a,C$99r(C$99_),(C$99t=C$99_.prototype).updateRenderData=function(C$99t){C$99t._renderDataList||(C$99t._buffer=new cc.TiledMapBuffer(C$99c._handle,C$99l),C$99t._renderDataList=new cc.TiledMapRenderDataList)},C$99t.fillBuffers=function(C$99t,C$99e){if(0!==C$99t._vertices.length){C$99t._updateCulling();var C$99i,C$99n,C$99h=C$99t.node;if(C$99U=C$99t._leftDownToCenterX,C$99W=C$99t._leftDownToCenterY,C$99g=C$99h._worldMatrix,C$99B=C$99e,C$99R=(C$99D=C$99t)._renderDataList,C$99P=C$99t._buffer,C$99t._isCullingDirty()||C$99t._isUserNodeDirty()||C$99t._hasAnimation()||C$99t._hasTiledNode()){C$99P.reset();var C$99r=((C$99n=C$99t._enableCulling?(C$99i=(C$99r=C$99t._cullingRect).leftDown,C$99r.rightTop):(C$99i=C$99y,C$99t._rightTop)).row-C$99i.row+1)*(C$99n.col-C$99i.col+1);switch(C$99F<C$99r&&(C$99r=C$99F),C$99P.request(4*C$99r,6*C$99r),C$99t._renderOrder){case C$99f.RightDown:this.traverseGrids(C$99i,C$99n,-1,1);break;case C$99f.LeftDown:this.traverseGrids(C$99i,C$99n,-1,-1);break;case C$99f.RightUp:this.traverseGrids(C$99i,C$99n,1,1);break;case C$99f.LeftUp:this.traverseGrids(C$99i,C$99n,1,-1)}C$99t._setCullingDirty(!1),C$99t._setUserNodeDirty(!1)}else for(var C$99s,C$99o,C$99a,C$99c=0;C$99c<C$99R._offset;C$99c++){if(0<(C$99o=(C$99s=C$99R._dataList[C$99c]).nodesRenderList).length){C$99e.worldMatDirty++;for(var C$99l=0;C$99l<C$99o.length;C$99l++)if(C$99a=C$99o[C$99l])for(var C$99u=0;C$99u<C$99a.length;C$99u++){var C$99_=C$99a[C$99u];C$99_&&C$99v(C$99_.node)}C$99e.worldMatDirty--,C$99e._flush()}0<C$99s.ia._count&&(C$99e.material=C$99s.material,C$99e.node=C$99h,C$99e._flushIA(C$99s.ia))}C$99j=C$99L=C$99D=C$99H=C$99P=C$99R=C$99B=C$99g=C$99G=C$99M=null}},C$99t.traverseGrids=function(C$99t,C$99e,C$99h,C$99u){if(C$99R.reset(),!(C$99e.row<0||C$99e.col<0)){C$99M=C$99R.popRenderData(C$99P),C$99G=C$99M.ia,C$99L=C$99P._vData,C$99j=C$99P._uintVData,C$99I=C$99z=0,C$99H=null;for(var C$99i,C$99n,C$99_,C$99r,C$99s,C$99d,C$99o,C$99f,C$99a,C$99p,C$99m,C$99c,C$99l,C$99y=C$99D.node._color._val,C$99g=C$99D._tiledTiles,C$99v=C$99D._texGrids,C$99x=C$99D._tiles,C$99b=C$99D._texIdToMatIndex,C$99A=C$99D._materials,C$99C=C$99D._vertices,C$99S=-1,C$99T=-1==C$99h?(C$99r=C$99e.row,C$99t.row):(C$99r=C$99t.row,C$99e.row);0<=(C$99T-C$99r)*C$99h;C$99r+=C$99h)for(C$99i=C$99C[C$99r],C$99m=0==(C$99p=C$99D._getNodesCountByRow(C$99r))&&null!=C$99i,C$99_=1==C$99u?(C$99n=C$99m&&C$99t.col<C$99i.minCol?C$99i.minCol:C$99t.col,C$99m&&C$99e.col>C$99i.maxCol?C$99i.maxCol:C$99e.col):(C$99n=C$99m&&C$99e.col>C$99i.maxCol?C$99i.maxCol:C$99e.col,C$99m&&C$99t.col<C$99i.minCol?C$99i.minCol:C$99t.col);0<=(C$99_-C$99n)*C$99u;C$99n+=C$99u)(C$99c=C$99i&&C$99i[C$99n])?(C$99s=C$99v[((C$99d=C$99x[C$99c.index])&C$99O)>>>0])&&(C$99S!==C$99s.texId&&(-1!==C$99S&&C$99X(),C$99a=C$99b[C$99S=C$99s.texId],C$99H=C$99A[C$99a],C$99M.material=C$99H),C$99H&&(C$99a=C$99c.left-C$99U,C$99o=C$99c.bottom-C$99W,C$99f=C$99a+(C$99l=C$99s.tileset._tileSize).width,C$99l=C$99o+C$99l.height,(C$99c=C$99g[C$99c.index])?this.fillByTiledNode(C$99c.node,C$99L,C$99j,C$99a,C$99f,C$99l,C$99o):(C$99L[C$99I]=C$99a,C$99L[C$99I+1]=C$99l,C$99j[C$99I+4]=C$99y,C$99L[C$99I+5]=C$99a,C$99L[C$99I+6]=C$99o,C$99j[C$99I+9]=C$99y,C$99L[C$99I+10]=C$99f,C$99L[C$99I+11]=C$99l,C$99j[C$99I+14]=C$99y,C$99L[C$99I+15]=C$99f,C$99L[C$99I+16]=C$99o,C$99j[C$99I+19]=C$99y),C$99c=C$99s,C$99l=C$99d,C$99N.x=C$99c.l,C$99N.y=C$99c.t,C$99w.x=C$99c.r,C$99w.y=C$99c.t,C$99E.x=C$99c.l,C$99E.y=C$99c.b,C$99k.x=C$99c.r,C$99k.y=C$99c.b,C$99c=null,(C$99l&C$99V.DIAGONAL)>>>0&&(C$99c=C$99w,C$99w=C$99E,C$99E=C$99c),(C$99l&C$99V.HORIZONTAL)>>>0&&(C$99c=C$99N,C$99N=C$99w,C$99w=C$99c,C$99c=C$99E,C$99E=C$99k,C$99k=C$99c),(C$99l&C$99V.VERTICAL)>>>0&&(C$99c=C$99N,C$99N=C$99E,C$99E=C$99c,C$99c=C$99w,C$99w=C$99k,C$99k=C$99c),C$99L[C$99I+2]=C$99N.x,C$99L[C$99I+3]=C$99N.y,C$99L[C$99I+7]=C$99E.x,C$99L[C$99I+8]=C$99E.y,C$99L[C$99I+12]=C$99w.x,C$99L[C$99I+13]=C$99w.y,C$99L[C$99I+17]=C$99k.x,C$99L[C$99I+18]=C$99k.y,C$99I+=20,C$99P.adjust(4,6),C$99G._count+=6,C$99z++,0<C$99p&&C$99Y(C$99r,C$99n),C$99F<=C$99z&&C$99X())):0<C$99p&&C$99Y(C$99r,C$99n);C$99P.uploadData(),0<C$99G._count&&(C$99B.material=C$99M.material,C$99B.node=C$99D.node,C$99B._flushIA(C$99M.ia))}},C$99t.fillByTiledNode=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){C$99t._updateLocalMatrix(),C$99d.Mat4.copy(C$99p,C$99t._matrix),C$99d.Vec3.set(C$99m,-(C$99n+C$99U),-(C$99o+C$99W),0),C$99d.Mat4.transform(C$99p,C$99p,C$99m);var C$99a=C$99p.m,C$99c=C$99a[0],C$99l=C$99a[1],C$99h=C$99a[4],C$99u=C$99a[5],C$99_=C$99a[12],C$99a=C$99a[13],C$99t=C$99t._color._val;C$99e[C$99I]=C$99n*C$99c+C$99s*C$99h+C$99_,C$99e[C$99I+1]=C$99n*C$99l+C$99s*C$99u+C$99a,C$99i[C$99I+4]=C$99t,C$99e[C$99I+5]=C$99n*C$99c+C$99o*C$99h+C$99_,C$99e[C$99I+6]=C$99n*C$99l+C$99o*C$99u+C$99a,C$99i[C$99I+9]=C$99t,C$99e[C$99I+10]=C$99r*C$99c+C$99s*C$99h+C$99_,C$99e[C$99I+11]=C$99r*C$99l+C$99s*C$99u+C$99a,C$99i[C$99I+14]=C$99t,C$99e[C$99I+15]=C$99r*C$99c+C$99o*C$99h+C$99_,C$99e[C$99I+16]=C$99r*C$99l+C$99o*C$99u+C$99a,C$99i[C$99I+19]=C$99t};var C$99u,C$99a=C$99_;function C$99_(){return C$99u.apply(this,arguments)||this}C$99i.default=C$99a,C$99n.default.register(C$99o,C$99a),C$99e.exports=C$99i.default},{"../core/renderer/":220,"../core/renderer/assembler":217,"../core/renderer/render-flow":221,"../core/renderer/webgl/vertex-format":252,"../core/value-types":279,"./CCTiledLayer":337,"./CCTiledMap":338}],346:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./video-player-impl"),C$99r=C$99n.EventType,C$99s=cc.Enum({REMOTE:0,LOCAL:1}),C$99t=cc.Class({name:"cc.VideoPlayer",extends:cc.Component,editor:!1,properties:{_resourceType:C$99s.REMOTE,resourceType:{tooltip:!1,type:C$99s,set:function(C$99t){this._resourceType=C$99t,this._updateVideoSource()},get:function(){return this._resourceType}},_remoteURL:"",remoteURL:{tooltip:!1,type:cc.String,set:function(C$99t){this._remoteURL=C$99t,this._updateVideoSource()},get:function(){return this._remoteURL}},_clip:{default:null,type:cc.Asset},clip:{tooltip:!1,get:function(){return this._clip},set:function(C$99t){this._clip=C$99t,this._updateVideoSource()},type:cc.Asset},currentTime:{tooltip:!1,type:cc.Float,set:function(C$99t){this._impl&&this._impl.seekTo(C$99t)},get:function(){return this._impl?this._currentStatus===C$99r.NONE||this._currentStatus===C$99r.STOPPED||this._currentStatus===C$99r.META_LOADED||this._currentStatus===C$99r.READY_TO_PLAY?0:this._currentStatus===C$99r.COMPLETED?this._impl.duration():this._impl.currentTime():-1}},_volume:1,volume:{get:function(){return this._volume},set:function(C$99t){this._volume=C$99t,this.isPlaying()&&!this._mute&&this._syncVolume()},range:[0,1],type:cc.Float,tooltip:!1},_mute:!1,mute:{get:function(){return this._mute},set:function(C$99t){this._mute=C$99t,this._syncVolume()},tooltip:!1},keepAspectRatio:{tooltip:!1,default:!0,type:cc.Boolean,notify:function(){this._impl&&this._impl.setKeepAspectRatioEnabled(this.keepAspectRatio)}},_isFullscreen:{default:!1,formerlySerializedAs:"_N$isFullscreen"},isFullscreen:{get:function(){return this._isFullscreen=this._impl&&this._impl.isFullScreenEnabled(),this._isFullscreen},set:function(C$99t){this._isFullscreen=C$99t,this._impl&&this._impl.setFullScreenEnabled(C$99t)},animatable:!1,tooltip:!1},_stayOnBottom:!1,stayOnBottom:{get:function(){return this._stayOnBottom},set:function(C$99t){this._stayOnBottom=C$99t,this._impl&&this._impl.setStayOnBottom(C$99t)},animatable:!1,tooltip:!1},videoPlayerEvent:{default:[],type:cc.Component.EventHandler}},statics:{EventType:C$99r,ResourceType:C$99s,Impl:C$99n},ctor:function(){this._impl=new C$99n,this._currentStatus=C$99r.NONE},_syncVolume:function(){var C$99t,C$99e=this._impl;C$99e&&(C$99t=this._mute?0:this._volume,C$99e.setVolume(C$99t))},_updateVideoSource:function(){var C$99t="";this.resourceType===C$99s.REMOTE?C$99t=this.remoteURL:this._clip&&(C$99t=this._clip.nativeUrl||""),C$99t&&cc.loader.md5Pipe&&(C$99t=cc.loader.md5Pipe.transformURL(C$99t)),this._impl.setURL(C$99t,this._mute||0===this._volume),this._impl.setKeepAspectRatioEnabled(this.keepAspectRatio)},onLoad:function(){var C$99t=this._impl;C$99t&&(C$99t.createDomElementIfNeeded(this._mute||0===this._volume),C$99t.setStayOnBottom(this._stayOnBottom),this._updateVideoSource(),C$99t.seekTo(this.currentTime),C$99t.setFullScreenEnabled(this._isFullscreen),this.pause(),C$99t.setEventListener(C$99r.PLAYING,this.onPlaying.bind(this)),C$99t.setEventListener(C$99r.PAUSED,this.onPasued.bind(this)),C$99t.setEventListener(C$99r.STOPPED,this.onStopped.bind(this)),C$99t.setEventListener(C$99r.COMPLETED,this.onCompleted.bind(this)),C$99t.setEventListener(C$99r.META_LOADED,this.onMetaLoaded.bind(this)),C$99t.setEventListener(C$99r.CLICKED,this.onClicked.bind(this)),C$99t.setEventListener(C$99r.READY_TO_PLAY,this.onReadyToPlay.bind(this)))},onRestore:function(){this._impl||(this._impl=new C$99n)},onEnable:function(){this._impl&&this._impl.enable()},onDisable:function(){this._impl&&this._impl.disable()},onDestroy:function(){this._impl&&(this._impl.destroy(),this._impl=null)},update:function(C$99t){this._impl&&this._impl.updateMatrix(this.node)},onReadyToPlay:function(){this._currentStatus=C$99r.READY_TO_PLAY,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$99r.READY_TO_PLAY),this.node.emit("ready-to-play",this)},onMetaLoaded:function(){this._currentStatus=C$99r.META_LOADED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$99r.META_LOADED),this.node.emit("meta-loaded",this)},onClicked:function(){this._currentStatus=C$99r.CLICKED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$99r.CLICKED),this.node.emit("clicked",this)},onPlaying:function(){this._currentStatus=C$99r.PLAYING,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$99r.PLAYING),this.node.emit("playing",this)},onPasued:function(){this._currentStatus=C$99r.PAUSED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$99r.PAUSED),this.node.emit("paused",this)},onStopped:function(){this._currentStatus=C$99r.STOPPED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$99r.STOPPED),this.node.emit("stopped",this)},onCompleted:function(){this._currentStatus=C$99r.COMPLETED,cc.Component.EventHandler.emitEvents(this.videoPlayerEvent,this,C$99r.COMPLETED),this.node.emit("completed",this)},play:function(){this._impl&&(this._syncVolume(),this._impl.play())},resume:function(){this._impl&&(this._syncVolume(),this._impl.resume())},pause:function(){this._impl&&this._impl.pause()},stop:function(){this._impl&&this._impl.stop()},getDuration:function(){return this._impl?this._impl.duration():-1},isPlaying:function(){return!!this._impl&&this._impl.isPlaying()}});cc.VideoPlayer=C$99e.exports=C$99t},{"./video-player-impl":347}],347:[function(C$99t,C$99e,C$99o){"use strict";var C$99i=C$99t("../core/platform/utils"),C$99_=C$99t("../core/platform/CCSys"),C$99n=C$99t("../core/platform/CCMacro"),C$99r=1,C$99s=4,C$99d=cc.mat4(),C$99f=cc.Class({name:"VideoPlayerImpl",ctor:function(){this._EventList={},this._video=null,this._url="",this._waitingFullscreen=!1,this._fullScreenEnabled=!1,this._stayOnBottom=!1,this._loadedmeta=!1,this._loaded=!1,this._visible=!1,this._playing=!1,this._ignorePause=!1,this._forceUpdate=!1,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this.__eventListeners={}},_bindEvent:function(){var C$99t=this._video,C$99e=this,C$99i=this.__eventListeners;C$99i.loadedmetadata=function(){C$99e._loadedmeta=!0,C$99e._forceUpdate=!0,C$99e._waitingFullscreen&&(C$99e._waitingFullscreen=!1,C$99e._toggleFullscreen(!0)),C$99e._dispatchEvent(C$99f.EventType.META_LOADED)},C$99i.ended=function(){C$99e._video===C$99t&&(C$99e._playing=!1,C$99e._dispatchEvent(C$99f.EventType.COMPLETED))},C$99i.play=function(){C$99e._video===C$99t&&(C$99e._playing=!0,C$99e._updateVisibility(),C$99e._dispatchEvent(C$99f.EventType.PLAYING))},C$99i.pause=function(){C$99e._video===C$99t&&(C$99e._playing=!1,C$99e._ignorePause||C$99e._dispatchEvent(C$99f.EventType.PAUSED))},C$99i.click=function(){C$99e._dispatchEvent(C$99f.EventType.CLICKED)},C$99t.addEventListener("loadedmetadata",C$99i.loadedmetadata),C$99t.addEventListener("ended",C$99i.ended),C$99t.addEventListener("play",C$99i.play),C$99t.addEventListener("pause",C$99i.pause),C$99t.addEventListener("click",C$99i.click),C$99i.onCanPlay=function(){var C$99t;C$99e._loaded||C$99e._playing||((C$99t=C$99e._video).readyState!==C$99s&&C$99t.readyState!==C$99r||(C$99t.currentTime=0,C$99e._loaded=!0,C$99e._forceUpdate=!0,C$99e._dispatchEvent(C$99f.EventType.READY_TO_PLAY),C$99e._updateVisibility()))},C$99t.addEventListener("canplay",C$99i.onCanPlay),C$99t.addEventListener("canplaythrough",C$99i.onCanPlay),C$99t.addEventListener("suspend",C$99i.onCanPlay)},_updateVisibility:function(){var C$99t=this._video;C$99t&&(this._visible?C$99t.style.visibility="visible":(C$99t.style.visibility="hidden",C$99t.pause(),this._playing=!1))},_updateSize:function(C$99t,C$99e){var C$99i=this._video;C$99i&&(C$99i.style.width=C$99t+"px",C$99i.style.height=C$99e+"px")},_createDom:function(C$99t){var C$99e=document.createElement("video");C$99e.style.position="absolute",C$99e.style.bottom="0px",C$99e.style.left="0px",C$99e.style["z-index"]=this._stayOnBottom?C$99n.MIN_ZINDEX:0,C$99e.className="cocosVideo",C$99e.setAttribute("preload","auto"),C$99e.setAttribute("webkit-playsinline",""),C$99e.setAttribute("x5-playsinline",""),C$99e.setAttribute("playsinline",""),C$99t&&C$99e.setAttribute("muted",""),this._video=C$99e,cc.game.container.appendChild(C$99e)},createDomElementIfNeeded:function(C$99t){this._video||this._createDom(C$99t)},removeDom:function(){var C$99t,C$99e=this._video;C$99e&&(C$99i.contains(cc.game.container,C$99e)&&cc.game.container.removeChild(C$99e),C$99t=this.__eventListeners,C$99e.removeEventListener("loadedmetadata",C$99t.loadedmetadata),C$99e.removeEventListener("ended",C$99t.ended),C$99e.removeEventListener("play",C$99t.play),C$99e.removeEventListener("pause",C$99t.pause),C$99e.removeEventListener("click",C$99t.click),C$99e.removeEventListener("canplay",C$99t.onCanPlay),C$99e.removeEventListener("canplaythrough",C$99t.onCanPlay),C$99e.removeEventListener("suspend",C$99t.onCanPlay),C$99t.loadedmetadata=null,C$99t.ended=null,C$99t.play=null,C$99t.pause=null,C$99t.click=null,C$99t.onCanPlay=null),this._video=null,this._url=""},setURL:function(C$99t,C$99e){var C$99i,C$99n;if(this._url!==C$99t){this.removeDom(),this._url=C$99t,this.createDomElementIfNeeded(C$99e),this._bindEvent();for(var C$99r=this._video,C$99s=(C$99r.style.visibility="hidden",this._loaded=!1,this._playing=!1,this._loadedmeta=!1,(C$99i=document.createElement("source")).src=C$99t,C$99r.appendChild(C$99i),C$99n=cc.path.extname(C$99t),C$99f._polyfill),C$99o=0;C$99o<C$99s.canPlayType.length;C$99o++)C$99n!==C$99s.canPlayType[C$99o]&&((C$99i=document.createElement("source")).src=C$99t.replace(C$99n,C$99s.canPlayType[C$99o]),C$99r.appendChild(C$99i))}},getURL:function(){return this._url},play:function(){var C$99t=this._video;C$99t&&this._visible&&!this._playing&&(C$99f._polyfill.autoplayAfterOperation?setTimeout(function(){C$99t.play()},20):C$99t.play())},pause:function(){var C$99t=this._video;this._playing&&C$99t&&C$99t.pause()},resume:function(){this.play()},stop:function(){var C$99t=this._video;C$99t&&this._visible&&(this._ignorePause=!0,C$99t.currentTime=0,C$99t.pause(),setTimeout(function(){this._dispatchEvent(C$99f.EventType.STOPPED),this._ignorePause=!1}.bind(this),0))},setVolume:function(C$99t){var C$99e=this._video;C$99e&&(C$99e.volume=C$99t)},seekTo:function(C$99e){var C$99i=this._video;C$99i&&(this._loaded?C$99i.currentTime=C$99e:C$99i.addEventListener(C$99f._polyfill.event,function C$99t(){C$99i.currentTime=C$99e,C$99i.removeEventListener(C$99f._polyfill.event,C$99t)}),C$99f._polyfill.autoplayAfterOperation&&this.isPlaying()&&setTimeout(function(){C$99i.play()},20))},isPlaying:function(){var C$99t=this._video;return C$99f._polyfill.autoplayAfterOperation&&this._playing&&setTimeout(function(){C$99t.play()},20),this._playing},duration:function(){var C$99t=this._video,C$99e=-1;return C$99t&&(C$99e=C$99t.duration)<=0&&cc.logID(7702),C$99e},currentTime:function(){var C$99t=this._video;return C$99t?C$99t.currentTime:-1},setKeepAspectRatioEnabled:function(){cc.logID(7700)},isKeepAspectRatioEnabled:function(){return!0},_toggleFullscreen:function(C$99t){var C$99i=this,C$99n=this._video;C$99n&&(C$99t?(C$99_.browserType===C$99_.BROWSER_TYPE_IE&&(C$99n.style.transform=""),cc.screen.requestFullScreen(C$99n,function(C$99t){var C$99e=C$99_.browserType===C$99_.BROWSER_TYPE_IE?document.msFullscreenElement:document.fullscreenElement;C$99i._fullScreenEnabled=C$99e===C$99n},function(C$99t){C$99i._fullScreenEnabled=!1})):cc.screen.fullScreen()&&cc.screen.exitFullScreen(C$99n))},setStayOnBottom:function(C$99t){this._stayOnBottom=C$99t,this._video&&(this._video.style["z-index"]=C$99t?C$99n.MIN_ZINDEX:0)},setFullScreenEnabled:function(C$99t){!this._loadedmeta&&C$99t?this._waitingFullscreen=!0:this._toggleFullscreen(C$99t)},isFullScreenEnabled:function(){return this._fullScreenEnabled},setEventListener:function(C$99t,C$99e){this._EventList[C$99t]=C$99e},removeEventListener:function(C$99t){this._EventList[C$99t]=null},_dispatchEvent:function(C$99t){C$99t=this._EventList[C$99t];C$99t&&C$99t.call(this,this,this._video.src)},onPlayEvent:function(){this._EventList[C$99f.EventType.PLAYING].call(this,this,this._video.src)},enable:function(){var C$99t=C$99f.elements;-1===C$99t.indexOf(this)&&C$99t.push(this),this.setVisible(!0)},disable:function(){var C$99t=C$99f.elements,C$99e=C$99t.indexOf(this);-1!==C$99e&&C$99t.splice(C$99e,1),this.setVisible(!1)},destroy:function(){this.disable(),this.removeDom()},setVisible:function(C$99t){this._visible!==C$99t&&(this._visible=!!C$99t,this._updateVisibility())},updateMatrix:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99h,C$99o,C$99u,C$99a,C$99c,C$99l;this._video&&this._visible&&!this._fullScreenEnabled&&(C$99t.getWorldMatrix(C$99d),(C$99e=cc.Camera._findRendererCamera(C$99t))&&C$99e.worldMatrixToScreen(C$99d,C$99d,cc.game.canvas.width,cc.game.canvas.height),C$99e=C$99d.m,!this._forceUpdate&&this._m00===C$99e[0]&&this._m01===C$99e[1]&&this._m04===C$99e[4]&&this._m05===C$99e[5]&&this._m12===C$99e[12]&&this._m13===C$99e[13]&&this._w===C$99t._contentSize.width&&this._h===C$99t._contentSize.height||(this._m00=C$99e[0],this._m01=C$99e[1],this._m04=C$99e[4],this._m05=C$99e[5],this._m12=C$99e[12],this._m13=C$99e[13],this._w=C$99t._contentSize.width,this._h=C$99t._contentSize.height,C$99n=C$99i=1/cc.view._devicePixelRatio,C$99a=cc.game.container,C$99r=C$99e[0]*C$99i,C$99s=C$99e[1],C$99h=C$99e[4],C$99o=C$99e[5]*C$99n,C$99u=C$99a&&C$99a.style.paddingLeft?parseInt(C$99a.style.paddingLeft):0,C$99a=C$99a&&C$99a.style.paddingBottom?parseInt(C$99a.style.paddingBottom):0,C$99f._polyfill.zoomInvalid?(this._updateSize(this._w*C$99r,this._h*C$99o),C$99o=C$99r=1,C$99c=this._w*C$99i,C$99l=this._h*C$99n):(C$99c=this._w*C$99i,C$99l=this._h*C$99n,this._updateSize(this._w,this._h)),C$99c=C$99c*C$99e[0]*C$99t._anchorPoint.x,C$99l=C$99l*C$99e[5]*C$99t._anchorPoint.y,C$99t="matrix("+C$99r+","+-C$99s+","+-C$99h+","+C$99o+","+(C$99e[12]*C$99i-C$99c+C$99u)+","+-(C$99e[13]*C$99n-C$99l+C$99a)+")",this._video.style.transform=C$99t,this._video.style["-webkit-transform"]=C$99t,this._video.style["transform-origin"]="0px 100% 0px",this._video.style["-webkit-transform-origin"]="0px 100% 0px",C$99_.browserType!==C$99_.BROWSER_TYPE_IE&&(this._forceUpdate=!1)))}}),C$99t=(C$99f.EventType={NONE:-1,PLAYING:0,PAUSED:1,STOPPED:2,COMPLETED:3,META_LOADED:4,CLICKED:5,READY_TO_PLAY:6},C$99f.elements=[],C$99f.pauseElements=[],cc.game.on(cc.game.EVENT_HIDE,function(){for(var C$99t,C$99e=C$99f.elements,C$99i=0;C$99i<C$99e.length;C$99i++)(C$99t=C$99e[C$99i]).isPlaying()&&(C$99t.pause(),C$99f.pauseElements.push(C$99t))}),cc.game.on(cc.game.EVENT_SHOW,function(){for(var C$99t=C$99f.pauseElements,C$99e=C$99t.pop();C$99e;)C$99e.play(),C$99e=C$99t.pop()}),C$99f._polyfill={devicePixelRatio:!1,event:"canplay",canPlayType:[]},document.createElement("video")),C$99t=(C$99t.canPlayType&&(C$99t.canPlayType("video/ogg")&&(C$99f._polyfill.canPlayType.push(".ogg"),C$99f._polyfill.canPlayType.push(".ogv")),C$99t.canPlayType("video/mp4")&&C$99f._polyfill.canPlayType.push(".mp4"),C$99t.canPlayType("video/webm")&&C$99f._polyfill.canPlayType.push(".webm")),C$99_.browserType===C$99_.BROWSER_TYPE_FIREFOX&&(C$99f._polyfill.autoplayAfterOperation=!0),C$99_.OS_ANDROID!==C$99_.os||C$99_.browserType!==C$99_.BROWSER_TYPE_SOUGOU&&C$99_.browserType!==C$99_.BROWSER_TYPE_360||(C$99f._polyfill.zoomInvalid=!0),document.createElement("style"));C$99t.innerHTML=".cocosVideo:-moz-full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:-webkit-full-screen{transform:matrix(1,0,0,1,0,0) !important;}",document.head.appendChild(C$99t),C$99e.exports=C$99f},{"../core/platform/CCMacro":194,"../core/platform/CCSys":198,"../core/platform/utils":213}],348:[function(C$99t,C$99e,C$99i){"use strict";var C$99t=C$99t("./webview-impl"),C$99n=C$99t.EventType;function C$99r(){}var C$99s=cc.Class({name:"cc.WebView",extends:cc.Component,editor:!1,properties:{_useOriginalSize:!0,_url:"",url:{type:cc.String,tooltip:!1,get:function(){return this._url},set:function(C$99t){this._url=C$99t;var C$99e=this._impl;C$99e&&C$99e.loadURL(C$99t)}},webviewEvents:{default:[],type:cc.Component.EventHandler}},statics:{EventType:C$99n,Impl:C$99t},ctor:function(){this._impl=new C$99s.Impl},onRestore:function(){this._impl||(this._impl=new C$99s.Impl)},onEnable:function(){var C$99t=this._impl;C$99t.createDomElementIfNeeded(this.node.width,this.node.height),C$99t.setEventListener(C$99n.LOADED,this._onWebViewLoaded.bind(this)),C$99t.setEventListener(C$99n.LOADING,this._onWebViewLoading.bind(this)),C$99t.setEventListener(C$99n.ERROR,this._onWebViewLoadError.bind(this)),C$99t.loadURL(this._url),C$99t.setVisible(!0)},onDisable:function(){var C$99t=this._impl;C$99t.setVisible(!1),C$99t.setEventListener(C$99n.LOADED,C$99r),C$99t.setEventListener(C$99n.LOADING,C$99r),C$99t.setEventListener(C$99n.ERROR,C$99r)},onDestroy:function(){this._impl&&(this._impl.destroy(),this._impl=null)},update:function(C$99t){this._impl&&this._impl.updateMatrix(this.node)},_onWebViewLoaded:function(){cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$99n.LOADED),this.node.emit("loaded",this)},_onWebViewLoading:function(){return cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$99n.LOADING),this.node.emit("loading",this),!0},_onWebViewLoadError:function(){cc.Component.EventHandler.emitEvents(this.webviewEvents,this,C$99n.ERROR),this.node.emit("error",this)},setJavascriptInterfaceScheme:function(C$99t){this._impl&&this._impl.setJavascriptInterfaceScheme(C$99t)},setOnJSCallback:function(C$99t){this._impl&&this._impl.setOnJSCallback(C$99t)},evaluateJS:function(C$99t){this._impl&&this._impl.evaluateJS(C$99t)}});cc.WebView=C$99e.exports=C$99s},{"./webview-impl":349}],349:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("../core/platform/utils"),C$99t=C$99t("../core/platform/CCSys"),C$99_=cc.mat4(),C$99r=cc.Class({name:"WebViewImpl",ctor:function(){this._EventList={},this._visible=!1,this._parent=null,this._div=null,this._iframe=null,this._listener=null,this._forceUpdate=!1,this._m00=0,this._m01=0,this._m04=0,this._m05=0,this._m12=0,this._m13=0,this._w=0,this._h=0,this.__eventListeners={}},_updateVisibility:function(){var C$99t;this._div&&(C$99t=this._div,this._visible?C$99t.style.visibility="visible":C$99t.style.visibility="hidden")},_updateSize:function(C$99t,C$99e){var C$99i=this._div;C$99i&&(C$99i.style.width=C$99t+"px",C$99i.style.height=C$99e+"px")},_initEvent:function(){var C$99t,C$99e,C$99i=this._iframe;C$99i&&(C$99t=this.__eventListeners,C$99e=this,C$99t.load=function(){C$99e._forceUpdate=!0,C$99e._dispatchEvent(C$99r.EventType.LOADED)},C$99t.error=function(){C$99e._dispatchEvent(C$99r.EventType.ERROR)},C$99i.addEventListener("load",C$99t.load),C$99i.addEventListener("error",C$99t.error))},_initStyle:function(){var C$99t;this._div&&((C$99t=this._div).style.position="absolute",C$99t.style.bottom="0px",C$99t.style.left="0px")},_setOpacity:function(C$99t){var C$99e=this._iframe;C$99e&&C$99e.style&&(C$99e.style.opacity=C$99t/255)},_createDom:function(C$99t,C$99e){C$99r._polyfill.enableDiv?(this._div=document.createElement("div"),this._div.style["-webkit-overflow"]="auto",this._div.style["-webkit-overflow-scrolling"]="touch",this._iframe=document.createElement("iframe"),this._div.appendChild(this._iframe),this._iframe.style.width="100%",this._iframe.style.height="100%"):this._div=this._iframe=document.createElement("iframe"),C$99r._polyfill.enableBG&&(this._div.style.background="#FFF"),this._div.style.background="#FFF",this._div.style.height=C$99e+"px",this._div.style.width=C$99t+"px",this._div.style.overflow="scroll",this._iframe.style.border="none",cc.game.container.appendChild(this._div),this._updateVisibility()},_createNativeControl:function(C$99t,C$99e){this._createDom(C$99t,C$99e),this._initStyle(),this._initEvent()},createDomElementIfNeeded:function(C$99t,C$99e){this._div?this._updateSize(C$99t,C$99e):this._createNativeControl(C$99t,C$99e)},removeDom:function(){var C$99t,C$99e=this._div,C$99e=(C$99e&&(C$99n.contains(cc.game.container,C$99e)&&cc.game.container.removeChild(C$99e),this._div=null),this._iframe);C$99e&&(C$99t=this.__eventListeners,C$99e.removeEventListener("load",C$99t.load),C$99e.removeEventListener("error",C$99t.error),C$99t.load=null,C$99t.error=null,this._iframe=null)},setOnJSCallback:function(C$99t){},setJavascriptInterfaceScheme:function(C$99t){},loadData:function(C$99t,C$99e,C$99i,C$99n){},loadHTMLString:function(C$99t,C$99e){},loadURL:function(C$99t){var C$99e,C$99i=this._iframe;C$99i&&(C$99i.src=C$99t,C$99e=this,C$99i.addEventListener("load",function C$99t(){C$99e._loaded=!0,C$99e._updateVisibility(),C$99i.removeEventListener("load",C$99t)}),this._dispatchEvent(C$99r.EventType.LOADING))},stopLoading:function(){cc.logID(7800)},reload:function(){var C$99t=this._iframe;!C$99t||(C$99t=C$99t.contentWindow)&&C$99t.location&&C$99t.location.reload()},canGoBack:function(){return cc.logID(7801),!0},canGoForward:function(){return cc.logID(7802),!0},goBack:function(){try{if(C$99r._polyfill.closeHistory)return cc.logID(7803);var C$99t,C$99e=this._iframe;!C$99e||(C$99t=C$99e.contentWindow)&&C$99t.location&&C$99t.history.back.call(C$99t)}catch(C$99t){cc.log(C$99t)}},goForward:function(){try{if(C$99r._polyfill.closeHistory)return cc.logID(7804);var C$99t,C$99e=this._iframe;!C$99e||(C$99t=C$99e.contentWindow)&&C$99t.location&&C$99t.history.forward.call(C$99t)}catch(C$99t){cc.log(C$99t)}},evaluateJS:function(C$99t){var C$99e=this._iframe;if(C$99e){C$99e=C$99e.contentWindow;try{C$99e.eval(C$99t),this._dispatchEvent(C$99r.EventType.JS_EVALUATED)}catch(C$99t){console.error(C$99t)}}},setScalesPageToFit:function(){cc.logID(7805)},setEventListener:function(C$99t,C$99e){this._EventList[C$99t]=C$99e},removeEventListener:function(C$99t){this._EventList[C$99t]=null},_dispatchEvent:function(C$99t){C$99t=this._EventList[C$99t];C$99t&&C$99t.call(this,this,this._iframe.src)},_createRenderCmd:function(){return new C$99r.RenderCmd(this)},destroy:function(){this.removeDom()},setVisible:function(C$99t){this._visible!==C$99t&&(this._visible=!!C$99t,this._updateVisibility())},updateMatrix:function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99h,C$99u,C$99o,C$99a,C$99c,C$99l;this._div&&this._visible&&(C$99t.getWorldMatrix(C$99_),(C$99e=cc.Camera._findRendererCamera(C$99t))&&C$99e.worldMatrixToScreen(C$99_,C$99_,cc.game.canvas.width,cc.game.canvas.height),C$99e=C$99_.m,!this._forceUpdate&&this._m00===C$99e[0]&&this._m01===C$99e[1]&&this._m04===C$99e[4]&&this._m05===C$99e[5]&&this._m12===C$99e[12]&&this._m13===C$99e[13]&&this._w===C$99t._contentSize.width&&this._h===C$99t._contentSize.height||(this._m00=C$99e[0],this._m01=C$99e[1],this._m04=C$99e[4],this._m05=C$99e[5],this._m12=C$99e[12],this._m13=C$99e[13],this._w=C$99t._contentSize.width,this._h=C$99t._contentSize.height,C$99n=C$99i=1/cc.view._devicePixelRatio,C$99o=cc.game.container,C$99l=C$99e[0]*C$99i,C$99r=C$99e[1],C$99s=C$99e[4],C$99h=C$99e[5]*C$99n,C$99u=C$99o&&C$99o.style.paddingLeft?parseInt(C$99o.style.paddingLeft):0,C$99o=C$99o&&C$99o.style.paddingBottom?parseInt(C$99o.style.paddingBottom):0,this._updateSize(this._w,this._h),C$99a=this._w*C$99i,C$99c=this._h*C$99n,C$99a=C$99a*C$99e[0]*C$99t._anchorPoint.x,C$99c=C$99c*C$99e[5]*C$99t._anchorPoint.y,C$99l="matrix("+C$99l+","+-C$99r+","+-C$99s+","+C$99h+","+(C$99e[12]*C$99i-C$99a+C$99u)+","+-(C$99e[13]*C$99n-C$99c+C$99o)+")",this._div.style.transform=C$99l,this._div.style["-webkit-transform"]=C$99l,this._div.style["transform-origin"]="0px 100% 0px",this._div.style["-webkit-transform-origin"]="0px 100% 0px",this._setOpacity(C$99t.opacity),this._forceUpdate=!1))}}),C$99s=(C$99r.EventType={LOADING:0,LOADED:1,ERROR:2,JS_EVALUATED:3},C$99r._polyfill={devicePixelRatio:!1,enableDiv:!1});C$99t.os===C$99t.OS_IOS&&(C$99s.enableDiv=!0),C$99t.isMobile?C$99t.browserType===C$99t.BROWSER_TYPE_FIREFOX&&(C$99s.enableBG=!0):C$99t.browserType===C$99t.BROWSER_TYPE_IE&&(C$99s.closeHistory=!0),C$99e.exports=C$99r},{"../core/platform/CCSys":198,"../core/platform/utils":213}],350:[function(C$99t,C$99e,C$99i){"use strict";C$99t("./cocos2d/core"),C$99t("./cocos2d/animation"),C$99t("./cocos2d/particle"),C$99t("./cocos2d/tilemap"),C$99t("./cocos2d/videoplayer/CCVideoPlayer"),C$99t("./cocos2d/webview/CCWebView"),C$99t("./cocos2d/core/components/CCStudioComponent"),C$99t("./extensions/ccpool/CCNodePool"),C$99t("./cocos2d/actions"),C$99t("./extensions/spine"),C$99t("./extensions/dragonbones"),C$99t("./cocos2d/deprecated")},{"./cocos2d/actions":8,"./cocos2d/animation":17,"./cocos2d/core":135,"./cocos2d/core/components/CCStudioComponent":95,"./cocos2d/deprecated":291,"./cocos2d/particle":297,"./cocos2d/particle/CCParticleAsset":294,"./cocos2d/tilemap":343,"./cocos2d/tilemap/CCTiledMapAsset":339,"./cocos2d/videoplayer/CCVideoPlayer":346,"./cocos2d/webview/CCWebView":348,"./extensions/ccpool/CCNodePool":351,"./extensions/dragonbones":void 0,"./extensions/spine":354}],351:[function(C$99t,C$99e,C$99i){"use strict";cc.NodePool=function(C$99t){this.poolHandlerComp=C$99t,this._pool=[]},cc.NodePool.prototype={constructor:cc.NodePool,size:function(){return this._pool.length},clear:function(){for(var C$99t=this._pool.length,C$99e=0;C$99e<C$99t;++C$99e)this._pool[C$99e].destroy();this._pool.length=0},put:function(C$99t){var C$99e;C$99t&&-1===this._pool.indexOf(C$99t)&&(C$99t.removeFromParent(!1),(C$99e=this.poolHandlerComp?C$99t.getComponent(this.poolHandlerComp):null)&&C$99e.unuse&&C$99e.unuse(),this._pool.push(C$99t))},get:function(){var C$99t=this._pool.length-1;if(C$99t<0)return null;var C$99e=this._pool[C$99t],C$99t=(this._pool.length=C$99t,this.poolHandlerComp?C$99e.getComponent(this.poolHandlerComp):null);return C$99t&&C$99t.reuse&&C$99t.reuse.apply(C$99t,arguments),C$99e}},C$99e.exports=cc.NodePool},{}],352:[function(C$99t,C$99e,C$99r){"use strict";var C$99d=(C$99n=C$99t("../../cocos2d/core/value-types/mat4"))&&C$99n.__esModule?C$99n:{default:C$99n};function C$99i(){}function C$99c(C$99t){Object.defineProperty(C$99t,"_worldMatDirty",{get:function(){return!0},set:function(C$99t){}}),C$99t._calculWorldMatrix=C$99i,C$99t._mulMat=C$99i}var C$99f=C$99t("../../cocos2d/core/renderer/render-flow").FLAG_TRANSFORM,C$99l="ATTACHED_NODE_TREE",C$99h="ATTACHED_NODE:",C$99p=new C$99d.default,C$99n=cc.Class({name:"sp.AttachUtil",ctor:function(){this._inited=!1,this._skeleton=null,this._skeletonNode=null,this._skeletonComp=null,this._attachedRootNode=null,this._attachedNodeArray=[],this._boneIndexToNode={}},init:function(C$99t){this._inited=!0,this._skeleton=C$99t._skeleton,this._skeletonNode=C$99t.node,this._skeletonComp=C$99t},reset:function(){this._inited=!1,this._skeleton=null,this._skeletonNode=null,this._skeletonComp=null},_prepareAttachNode:function(){var C$99t;if(this._skeleton)return C$99t=this._skeletonNode.getChildByName(C$99l),C$99t&&C$99t.isValid||(C$99t=new cc.Node(C$99l),C$99c(C$99t),this._skeletonNode.addChild(C$99t)),this._skeletonComp.isAnimationCached()&&this._skeletonComp._frameCache&&this._skeletonComp._frameCache.enableCacheAttachedInfo(),this._attachedRootNode=C$99t},_buildBoneAttachedNode:function(C$99t,C$99e){var C$99i=C$99h+C$99t.data.name,C$99i=new cc.Node(C$99i);return this._buildBoneRelation(C$99i,C$99t,C$99e),C$99i},_buildBoneRelation:function(C$99t,C$99e,C$99i){C$99c(C$99t),C$99t._bone=C$99e,C$99t._boneIndex=C$99i,this._attachedNodeArray.push(C$99t),this._boneIndexToNode[C$99i]=C$99t},getAttachedRootNode:function(){return this._attachedRootNode},getAttachedNodes:function(C$99t){var C$99e=this._attachedNodeArray,C$99i=[];if(!this._inited)return C$99i;for(var C$99n=0,C$99r=C$99e.length;C$99n<C$99r;C$99n++){var C$99s=C$99e[C$99n];C$99s&&C$99s.isValid&&C$99s.name===C$99h+C$99t&&C$99i.push(C$99s)}return C$99i},_rebuildNodeArray:function(){for(var C$99t=this._boneIndexToNode={},C$99e=this._attachedNodeArray,C$99i=this._attachedNodeArray=[],C$99n=0,C$99r=C$99e.length;C$99n<C$99r;C$99n++){var C$99s=C$99e[C$99n];C$99s&&C$99s.isValid&&!C$99s._toRemove&&(C$99i.push(C$99s),C$99t[C$99s._boneIndex]=C$99s)}},_sortNodeArray:function(){this._attachedNodeArray.sort(function(C$99t,C$99e){return C$99t._boneIndex<C$99e._boneIndex?-1:1})},_getNodeByBoneIndex:function(C$99t){C$99t=this._boneIndexToNode[C$99t];return C$99t&&C$99t.isValid?C$99t:null},destroyAttachedNodes:function(C$99t){if(this._inited){for(var C$99e=this._attachedNodeArray,C$99i=function C$99t(C$99e){for(var C$99i=C$99e.children,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++){var C$99s=C$99i[C$99n];C$99s&&C$99t(C$99s)}C$99e._toRemove=!0},C$99n=0,C$99r=C$99e.length;C$99n<C$99r;C$99n++){var C$99s=C$99e[C$99n];C$99s&&C$99s.isValid&&C$99s.name.split(C$99h)[1]===C$99t&&(C$99i(C$99s),C$99s.removeFromParent(!0),C$99s.destroy(),C$99e[C$99n]=null)}this._rebuildNodeArray()}},generateAttachedNodes:function(C$99t){var C$99e=[];if(!this._inited)return C$99e;var C$99n=this._prepareAttachNode();if(!C$99n)return C$99e;for(var C$99i=[],C$99r=this._skeleton.bones,C$99s=0,C$99o=C$99r.length;C$99s<C$99o;C$99s++){var C$99a=C$99r[C$99s];C$99a.data.name==C$99t&&C$99i.push(C$99a)}for(var C$99c=function(C$99t){if(C$99t){var C$99e=C$99t.data;if(C$99i=this._getNodeByBoneIndex(C$99e.index))return C$99i;var C$99i=this._buildBoneAttachedNode(C$99t,C$99e.index),C$99e=C$99c(C$99t.parent)||C$99n;return C$99i.parent=C$99e,C$99i}}.bind(this),C$99l=0,C$99h=C$99i.length;C$99l<C$99h;C$99l++){var C$99u=C$99c(C$99i[C$99l]);C$99e.push(C$99u)}return this._sortNodeArray(),C$99e},destroyAllAttachedNodes:function(){var C$99t;this._attachedRootNode=null,this._attachedNodeArray.length=0,this._boneIndexToNode={},!this._inited||(C$99t=this._skeletonNode.getChildByName(C$99l))&&(C$99t.removeFromParent(!0),C$99t.destroy())},generateAllAttachedNodes:function(){if(this._inited){this._boneIndexToNode={},this._attachedNodeArray.length=0;var C$99t=this._prepareAttachNode();if(C$99t){for(var C$99e=this._skeleton.bones,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r,C$99s=C$99e[C$99i],C$99o=C$99s.data,C$99a=null;(C$99a=C$99s.parent?(C$99r=C$99s.parent.data.index,this._boneIndexToNode[C$99r]):C$99t)&&((C$99r=C$99a.getChildByName(C$99h+C$99o.name))&&C$99r.isValid?this._buildBoneRelation(C$99r,C$99s,C$99o.index):(C$99r=this._buildBoneAttachedNode(C$99s,C$99o.index),C$99a.addChild(C$99r)))}return C$99t}}},_hasAttachedNode:function(){return!!this._inited&&!!this._skeletonNode.getChildByName(C$99l)},_associateAttachedNode:function(){if(this._inited){var C$99t=this._skeletonNode.getChildByName(C$99l);if(C$99t&&C$99t.isValid){this._attachedRootNode=C$99t,this._boneIndexToNode={},this._attachedNodeArray.length=0,C$99c(C$99t);this._skeletonComp.isAnimationCached()&&this._skeletonComp._frameCache&&this._skeletonComp._frameCache.enableCacheAttachedInfo();for(var C$99e=this._skeleton.bones,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r,C$99s=C$99e[C$99i],C$99o=C$99s.data,C$99a=null;!(C$99a=C$99s.parent?(C$99r=C$99s.parent.data.index,this._boneIndexToNode[C$99r]):C$99t)||(C$99r=C$99a.getChildByName(C$99h+C$99o.name))&&C$99r.isValid&&this._buildBoneRelation(C$99r,C$99s,C$99o.index)}}}},_syncAttachedNode:function(){if(this._inited){var C$99t=this._attachedRootNode,C$99e=this._attachedNodeArray;if(!C$99t||!C$99t.isValid)return this._attachedRootNode=null,void(C$99e.length=0);var C$99i,C$99h=this._skeletonNode._worldMatrix;C$99d.default.copy(C$99t._worldMatrix,C$99h),C$99t._renderFlag&=~C$99f;if(C$99i=this._skeletonComp.isAnimationCached()?this._skeletonComp._curFrame&&this._skeletonComp._curFrame.boneInfos:this._skeleton.bones){for(var C$99n,C$99r,C$99s,C$99u=this._skeletonNode._mulMat,C$99o=!1,C$99a=0,C$99_=C$99e.length;C$99a<C$99_;C$99a++){var C$99c,C$99l=C$99e[C$99a];C$99l&&C$99l.isValid?(C$99c=C$99i[C$99l._boneIndex])?(C$99n=C$99l._worldMatrix,C$99r=C$99t._worldMatrix,C$99c=C$99c,C$99s=void 0,(C$99s=C$99p.m)[0]=C$99c.a,C$99s[1]=C$99c.c,C$99s[4]=C$99c.b,C$99s[5]=C$99c.d,C$99s[12]=C$99c.worldX,C$99s[13]=C$99c.worldY,C$99u(C$99n,C$99r,C$99p),C$99l._renderFlag&=~C$99f):(C$99l.removeFromParent(!0),C$99l.destroy(),C$99o=!(C$99e[C$99a]=null)):C$99o=!(C$99e[C$99a]=null)}C$99o&&this._rebuildNodeArray()}}}});C$99e.exports=sp.AttachUtil=C$99n},{"../../cocos2d/core/renderer/render-flow":221,"../../cocos2d/core/value-types/mat4":281}],353:[function(C$99t,C$99e,C$99h){"use strict";var C$99n=C$99t("./track-entry-listeners"),C$99i=C$99t("../../cocos2d/core/components/CCRenderComponent"),C$99r=C$99t("./lib/spine"),C$99s=C$99t("../../cocos2d/core/graphics/graphics"),C$99o=C$99t("../../cocos2d/core/renderer/render-flow").FLAG_POST_RENDER,C$99a=C$99t("./skeleton-cache"),C$99c=C$99t("./AttachUtil"),C$99t=cc.Enum({default:-1}),C$99u=cc.Enum({"<None>":0}),C$99l=cc.Enum({REALTIME:0,SHARED_CACHE:1,PRIVATE_CACHE:2});sp.Skeleton=cc.Class({name:"sp.Skeleton",extends:C$99i,editor:!1,statics:{AnimationCacheMode:C$99l},properties:{paused:{default:!1,visible:!1},skeletonData:{default:null,type:sp.SkeletonData,notify:function(){this.defaultSkin="",this.defaultAnimation="",this._updateSkeletonData()},tooltip:!1},defaultSkin:{default:"",visible:!1},defaultAnimation:{default:"",visible:!1},animation:{get:function(){if(this.isAnimationCached())return this._animationName;var C$99t=this.getCurrent(0);return C$99t&&C$99t.animation.name||""},set:function(C$99t){(this.defaultAnimation=C$99t)?this.setAnimation(0,C$99t,this.loop):this.isAnimationCached()||(this.clearTrack(0),this.setToSetupPose())},visible:!1},_defaultSkinIndex:{get:function(){if(this.skeletonData){var C$99t=this.skeletonData.getSkinsEnum();if(C$99t)if(""===this.defaultSkin){if(C$99t.hasOwnProperty(0))return this._defaultSkinIndex=0}else{C$99t=C$99t[this.defaultSkin];if(void 0!==C$99t)return C$99t}}return 0},set:function(C$99t){if(!(C$99e=this.skeletonData?this.skeletonData.getSkinsEnum():C$99e))return cc.errorID("",this.name);var C$99e=C$99e[C$99t];void 0!==C$99e?(this.defaultSkin=C$99e,this.setSkin(this.defaultSkin)):cc.errorID(7501,this.name)},type:C$99t,visible:!0,displayName:"Default Skin",tooltip:!1},_animationIndex:{get:function(){var C$99t=this.animation;if(this.skeletonData&&C$99t){var C$99e=this.skeletonData.getAnimsEnum();if(C$99e){C$99e=C$99e[C$99t];if(void 0!==C$99e)return C$99e}}return 0},set:function(C$99t){if(0!==C$99t){if(!(C$99e=this.skeletonData?this.skeletonData.getAnimsEnum():C$99e))return cc.errorID(7502,this.name);var C$99e=C$99e[C$99t];void 0!==C$99e?this.animation=C$99e:cc.errorID(7503,this.name)}else this.animation=""},type:C$99u,visible:!0,displayName:"Animation",tooltip:!1},_preCacheMode:-1,_cacheMode:C$99l.REALTIME,_defaultCacheMode:{default:0,type:C$99l,notify:function(){this.setAnimationCacheMode(this._defaultCacheMode)},editorOnly:!0,visible:!0,animatable:!1,displayName:"Animation Cache Mode",tooltip:!1},loop:{default:!0,tooltip:!1},premultipliedAlpha:{default:!0,tooltip:!1},timeScale:{default:1,tooltip:!1},debugSlots:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},debugBones:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},debugMesh:{default:!1,editorOnly:!0,tooltip:!1,notify:function(){this._updateDebugDraw()}},useTint:{default:!1,tooltip:!1,notify:function(){this._updateUseTint()}},enableBatch:{default:!1,notify:function(){this._updateBatch()},tooltip:!1},_accTime:0,_playCount:0,_frameCache:null,_curFrame:null,_skeletonCache:null,_animationName:"",_animationQueue:[],_headAniInfo:null,_playTimes:0,_isAniComplete:!0},ctor:function(){this._effectDelegate=null,this._skeleton=null,this._rootBone=null,this._listener=null,this._materialCache={},this._debugRenderer=null,this._startSlotIndex=-1,this._endSlotIndex=-1,this._startEntry={animation:{name:""},trackIndex:0},this._endEntry={animation:{name:""},trackIndex:0},this.attachUtil=new C$99c},_getDefaultMaterial:function(){return cc.Material.getBuiltinMaterial("2d-spine")},_updateMaterial:function(){var C$99t=this.useTint||this.isAnimationCached()&&!0,C$99e=this.getMaterial(0);C$99e&&(C$99e.define("USE_TINT",C$99t),C$99e.define("CC_USE_MODEL",!this.enableBatch)),this._materialCache={}},disableRender:function(){this._super(),this.node._renderFlag&=~C$99o},markForRender:function(C$99t){this._super(C$99t),C$99t?this.node._renderFlag|=C$99o:this.node._renderFlag&=~C$99o},_updateUseTint:function(){var C$99t,C$99e=this.getMaterial(0);C$99e&&(C$99t=this.useTint||this.isAnimationCached()&&!0,C$99e.define("USE_TINT",C$99t)),this._materialCache={}},_updateBatch:function(){var C$99t=this.getMaterial(0);C$99t&&C$99t.define("CC_USE_MODEL",!this.enableBatch),this._materialCache={}},_validateRender:function(){var C$99t=this.skeletonData;C$99t&&C$99t.isTexturesLoaded()?this._super():this.disableRender()},setSkeletonData:function(C$99t){var C$99e;null!=C$99t.width&&null!=C$99t.height&&this.node.setContentSize(C$99t.width,C$99t.height),this._cacheMode===C$99l.SHARED_CACHE?this._skeletonCache=C$99a.sharedCache:this._cacheMode===C$99l.PRIVATE_CACHE&&(this._skeletonCache=new C$99a,this._skeletonCache.enablePrivateMode()),this.isAnimationCached()?((this.debugBones||this.debugSlots)&&cc.warn("Debug bones or slots is invalid in cached mode"),C$99e=this._skeletonCache.getSkeletonCache(this.skeletonData._uuid,C$99t),this._skeleton=C$99e.skeleton,this._clipper=C$99e.clipper):(this._skeleton=new C$99r.Skeleton(C$99t),this._clipper=new C$99r.SkeletonClipping),this._rootBone=this._skeleton.getRootBone(),this.markForRender(!0)},setSlotsRange:function(C$99t,C$99e){this.isAnimationCached()?cc.warn("Slots visible range can not be modified in cached mode."):(this._startSlotIndex=C$99t,this._endSlotIndex=C$99e)},setAnimationStateData:function(C$99t){this.isAnimationCached()?cc.warn("'setAnimationStateData' interface can not be invoked in cached mode."):(C$99t=new C$99r.AnimationState(C$99t),this._listener&&(this._state&&this._state.removeListener(this._listener),C$99t.addListener(this._listener)),this._state=C$99t)},__preload:function(){this._super();for(var C$99t=this.node.children,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e];C$99n&&"DEBUG_DRAW_NODE"===C$99n._name&&C$99n.destroy()}this._updateSkeletonData(),this._updateDebugDraw(),this._updateUseTint(),this._updateBatch()},setAnimationCacheMode:function(C$99t){this._preCacheMode!==C$99t&&(this._cacheMode=C$99t,this._updateSkeletonData(),this._updateUseTint())},isAnimationCached:function(){return this._cacheMode!==C$99l.REALTIME},update:function(C$99t){if(!this.paused)if(C$99t*=this.timeScale*sp.timeScale,this.isAnimationCached()){var C$99e;if(this._isAniComplete)return 0!==this._animationQueue.length||this._headAniInfo?(this._headAniInfo||(this._headAniInfo=this._animationQueue.shift()),this._accTime+=C$99t,void(this._accTime>this._headAniInfo.delay&&(C$99e=this._headAniInfo,this._headAniInfo=null,this.setAnimation(0,C$99e.animationName,C$99e.loop)))):void((C$99e=this._frameCache)&&C$99e.isInvalid()&&(C$99e.updateToFrame(),C$99e=C$99e.frames,this._curFrame=C$99e[C$99e.length-1]));this._updateCache(C$99t)}else this._updateRealtime(C$99t)},_emitCacheCompleteEvent:function(){this._listener&&(this._endEntry.animation.name=this._animationName,this._listener.complete&&this._listener.complete(this._endEntry),this._listener.end&&this._listener.end(this._endEntry))},_updateCache:function(C$99t){var C$99e=this._frameCache;if(C$99e.isInited()){var C$99i=C$99e.frames,C$99n=C$99a.FrameTime,C$99t=(0==this._accTime&&0==this._playCount&&(this._startEntry.animation.name=this._animationName,this._listener&&this._listener.start&&this._listener.start(this._startEntry)),this._accTime+=C$99t,Math.floor(this._accTime/C$99n));if(C$99e.isCompleted||C$99e.updateToFrame(C$99t),C$99e.isCompleted&&C$99t>=C$99i.length){if(this._playCount++,0<this._playTimes&&this._playCount>=this._playTimes)return this._curFrame=C$99i[C$99i.length-1],this._accTime=0,this._playCount=0,this._isAniComplete=!0,void this._emitCacheCompleteEvent();C$99t=this._accTime=0,this._emitCacheCompleteEvent()}this._curFrame=C$99i[C$99t]}},_updateRealtime:function(C$99t){var C$99e=this._skeleton,C$99i=this._state;C$99e&&(C$99e.update(C$99t),C$99i&&(C$99i.update(C$99t),C$99i.apply(C$99e)))},setVertexEffectDelegate:function(C$99t){this._effectDelegate=C$99t},updateWorldTransform:function(){this.isAnimationCached()&&this._skeleton&&this._skeleton.updateWorldTransform()},setToSetupPose:function(){this._skeleton&&this._skeleton.setToSetupPose()},setBonesToSetupPose:function(){this._skeleton&&this._skeleton.setBonesToSetupPose()},setSlotsToSetupPose:function(){this._skeleton&&this._skeleton.setSlotsToSetupPose()},updateAnimationCache:function(C$99t){var C$99e;this.isAnimationCached()&&(C$99e=this.skeletonData._uuid,this._skeletonCache&&this._skeletonCache.updateAnimationCache(C$99e,C$99t))},invalidAnimationCache:function(){this.isAnimationCached()&&this._skeletonCache&&this._skeletonCache.invalidAnimationCache(this.skeletonData._uuid)},findBone:function(C$99t){return this._skeleton?this._skeleton.findBone(C$99t):null},findSlot:function(C$99t){return this._skeleton?this._skeleton.findSlot(C$99t):null},setSkin:function(C$99t){this._skeleton&&(this._skeleton.setSkinByName(C$99t),this._skeleton.setSlotsToSetupPose()),this.invalidAnimationCache()},getAttachment:function(C$99t,C$99e){return this._skeleton?this._skeleton.getAttachmentByName(C$99t,C$99e):null},setAttachment:function(C$99t,C$99e){this._skeleton&&this._skeleton.setAttachment(C$99t,C$99e),this.invalidAnimationCache()},getTextureAtlas:function(C$99t){return C$99t.region},setMix:function(C$99t,C$99e,C$99i){this._state&&this._state.data.setMix(C$99t,C$99e,C$99i)},setAnimation:function(C$99t,C$99e,C$99i){if(this._playTimes=C$99i?0:1,this._animationName=C$99e,this.isAnimationCached()){if(0!==C$99t&&cc.warn("Track index can not greater than 0 in cached mode."),!this._skeletonCache)return null;var C$99n=this._skeletonCache.getAnimationCache(this.skeletonData._uuid,C$99e);(C$99n=C$99n||this._skeletonCache.initAnimationCache(this.skeletonData._uuid,C$99e))&&(this._isAniComplete=!1,this._accTime=0,this._playCount=0,this._frameCache=C$99n,this.attachUtil._hasAttachedNode()&&this._frameCache.enableCacheAttachedInfo(),this._frameCache.updateToFrame(0),this._curFrame=this._frameCache.frames[0])}else if(this._skeleton){C$99n=this._skeleton.data.findAnimation(C$99e);if(!C$99n)return cc.logID(7509,C$99e),null;C$99e=this._state.setAnimationWith(C$99t,C$99n,C$99i);return this._state.apply(this._skeleton),C$99e}return null},addAnimation:function(C$99t,C$99e,C$99i,C$99n){var C$99r;if(C$99n=C$99n||0,this.isAnimationCached())0!==C$99t&&cc.warn("Track index can not greater than 0 in cached mode."),this._animationQueue.push({animationName:C$99e,loop:C$99i,delay:C$99n});else if(this._skeleton)return(C$99r=this._skeleton.data.findAnimation(C$99e))?this._state.addAnimationWith(C$99t,C$99r,C$99i,C$99n):(cc.logID(7510,C$99e),null);return null},findAnimation:function(C$99t){return this._skeleton?this._skeleton.data.findAnimation(C$99t):null},getCurrent:function(C$99t){if(this.isAnimationCached())cc.warn("'getCurrent' interface can not be invoked in cached mode.");else if(this._state)return this._state.getCurrent(C$99t);return null},clearTracks:function(){this.isAnimationCached()?cc.warn("'clearTracks' interface can not be invoked in cached mode."):this._state&&this._state.clearTracks()},clearTrack:function(C$99t){this.isAnimationCached()?cc.warn("'clearTrack' interface can not be invoked in cached mode."):this._state&&this._state.clearTrack(C$99t)},setStartListener:function(C$99t){this._ensureListener(),this._listener.start=C$99t},setInterruptListener:function(C$99t){this._ensureListener(),this._listener.interrupt=C$99t},setEndListener:function(C$99t){this._ensureListener(),this._listener.end=C$99t},setDisposeListener:function(C$99t){this._ensureListener(),this._listener.dispose=C$99t},setCompleteListener:function(C$99t){this._ensureListener(),this._listener.complete=C$99t},setEventListener:function(C$99t){this._ensureListener(),this._listener.event=C$99t},setTrackStartListener:function(C$99t,C$99e){C$99n.getListeners(C$99t).start=C$99e},setTrackInterruptListener:function(C$99t,C$99e){C$99n.getListeners(C$99t).interrupt=C$99e},setTrackEndListener:function(C$99t,C$99e){C$99n.getListeners(C$99t).end=C$99e},setTrackDisposeListener:function(C$99t,C$99e){C$99n.getListeners(C$99t).dispose=C$99e},setTrackCompleteListener:function(C$99t,C$99i){C$99n.getListeners(C$99t).complete=function(C$99t){var C$99e=Math.floor(C$99t.trackTime/C$99t.animationEnd);C$99i(C$99t,C$99e)}},setTrackEventListener:function(C$99t,C$99e){C$99n.getListeners(C$99t).event=C$99e},getState:function(){return this._state},_updateAnimEnum:!1,_updateSkinEnum:!1,_ensureListener:function(){this._listener||(this._listener=new C$99n,this._state&&this._state.addListener(this._listener))},_updateSkeletonData:function(){if(this.skeletonData){var C$99t=this.skeletonData.getRuntimeData();if(C$99t){try{this.setSkeletonData(C$99t),this.isAnimationCached()||this.setAnimationStateData(new C$99r.AnimationStateData(this._skeleton.data)),this.defaultSkin&&this.setSkin(this.defaultSkin)}catch(C$99t){cc.warn(C$99t)}this.attachUtil.init(this),this.attachUtil._associateAttachedNode(),this._preCacheMode=this._cacheMode,this.animation=this.defaultAnimation}else this.disableRender()}else this.disableRender()},_refreshInspector:function(){this._updateAnimEnum(),this._updateSkinEnum(),Editor.Utils.refreshSelectedInspector("node",this.node.uuid)},_updateDebugDraw:function(){var C$99t;this.debugBones||this.debugSlots?(this._debugRenderer||((C$99t=new cc.PrivateNode).name="DEBUG_DRAW_NODE",(C$99t=C$99t.addComponent(C$99s)).lineWidth=1,C$99t.strokeColor=cc.color(255,0,0,255),this._debugRenderer=C$99t),this._debugRenderer.node.parent=this.node,this.isAnimationCached()&&cc.warn("Debug bones or slots is invalid in cached mode")):this._debugRenderer&&(this._debugRenderer.node.parent=null)}}),C$99e.exports=sp.Skeleton},{"../../cocos2d/core/components/CCRenderComponent":89,"../../cocos2d/core/graphics/graphics":131,"../../cocos2d/core/renderer/render-flow":221,"./AttachUtil":352,"./lib/spine":355,"./skeleton-cache":356,"./track-entry-listeners":360}],354:[function(C$99t,C$99e,C$99i){"use strict";var C$99n="undefined"==typeof window?global:window;C$99n.spine=C$99t("./lib/spine"),C$99n.sp={},sp._timeScale=1,Object.defineProperty(sp,"timeScale",{get:function(){return this._timeScale},set:function(C$99t){this._timeScale=C$99t},configurable:!0}),sp.ATTACHMENT_TYPE={REGION:0,BOUNDING_BOX:1,MESH:2,SKINNED_MESH:3},sp.AnimationEventType=cc.Enum({START:0,INTERRUPT:1,END:2,DISPOSE:3,COMPLETE:4,EVENT:5}),sp.spine=C$99n.spine,C$99t("./skeleton-texture"),C$99t("./skeleton-data"),C$99t("./vertex-effect-delegate"),C$99t("./Skeleton"),C$99t("./spine-assembler")},{"./Skeleton":353,"./lib/spine":355,"./skeleton-data":357,"./skeleton-texture":358,"./spine-assembler":359,"./vertex-effect-delegate":361}],355:[function(C$99s,C$99o,C$99a){"use strict";C$99c=function(C$99t,C$99e){return(C$99c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$99t,C$99e){C$99t.__proto__=C$99e}||function(C$99t,C$99e){for(var C$99i in C$99e)C$99e.hasOwnProperty(C$99i)&&(C$99t[C$99i]=C$99e[C$99i])})(C$99t,C$99e)};var C$99c,C$99l,C$99h,C$99d,C$99f,C$99p,C$99m,C$99y,C$99g,C$99v,C$99x,C$99b,C$99A,C$99C,C$99S,C$99T,C$99u,C$99w,C$99E,C$99M,C$99I,C$99B,C$99R,C$99P,C$99t,C$99D,C$99V=function(C$99t,C$99e){function C$99i(){this.constructor=C$99t}C$99c(C$99t,C$99e),C$99t.prototype=null===C$99e?Object.create(C$99e):(C$99i.prototype=C$99e.prototype,new C$99i)};function C$99L(C$99t){C$99t=C$99d.call(this,C$99t,0,!1)||this;return C$99t.bones=new Array,C$99t.bendDirection=1,C$99t.compress=!1,C$99t.stretch=!1,C$99t.uniform=!1,C$99t.mix=1,C$99t.softness=0,C$99t}function C$99O(C$99t){C$99t=C$99f.call(this,C$99t,0,!1)||this;return C$99t.bones=new Array,C$99t}!function(C$99N){C$99i.prototype.hasTimeline=function(C$99t){return 1==this.timelineIds[C$99t]},C$99i.prototype.apply=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){if(null==C$99t)throw new Error("skeleton cannot be null.");C$99n&&0!=this.duration&&(C$99i%=this.duration,0<C$99e&&(C$99e%=this.duration));for(var C$99c=this.timelines,C$99l=0,C$99h=C$99c.length;C$99l<C$99h;C$99l++)C$99c[C$99l].apply(C$99t,C$99e,C$99i,C$99r,C$99s,C$99o,C$99a)},C$99i.binarySearch=function(C$99t,C$99e,C$99i){var C$99n=0,C$99r=C$99t.length/(C$99i=void 0===C$99i?1:C$99i)-2;if(0==C$99r)return C$99i;for(var C$99s=C$99r>>>1;;){if(C$99t[(C$99s+1)*C$99i]<=C$99e?C$99n=C$99s+1:C$99r=C$99s,C$99n==C$99r)return(C$99n+1)*C$99i;C$99s=C$99n+C$99r>>>1}},C$99i.linearSearch=function(C$99t,C$99e,C$99i){for(var C$99n=0,C$99r=C$99t.length-C$99i;C$99n<=C$99r;C$99n+=C$99i)if(C$99t[C$99n]>C$99e)return C$99n;return-1};var C$99k,C$99y,C$99e,C$99G=C$99i;function C$99i(C$99t,C$99e,C$99i){if(null==C$99t)throw new Error("name cannot be null.");if(null==C$99e)throw new Error("timelines cannot be null.");this.name=C$99t,this.timelines=C$99e,this.timelineIds=[];for(var C$99n=0;C$99n<C$99e.length;C$99n++)this.timelineIds[C$99e[C$99n].getPropertyId()]=!0;this.duration=C$99i}C$99N.Animation=C$99G,(C$99t=C$99k=C$99N.MixBlend||(C$99N.MixBlend={}))[C$99t.setup=0]="setup",C$99t[C$99t.first=1]="first",C$99t[C$99t.replace=2]="replace",C$99t[C$99t.add=3]="add",(C$99t=C$99y=C$99N.MixDirection||(C$99N.MixDirection={}))[C$99t.mixIn=0]="mixIn",C$99t[C$99t.mixOut=1]="mixOut",(C$99t=C$99e=C$99N.TimelineType||(C$99N.TimelineType={}))[C$99t.rotate=0]="rotate",C$99t[C$99t.translate=1]="translate",C$99t[C$99t.scale=2]="scale",C$99t[C$99t.shear=3]="shear",C$99t[C$99t.attachment=4]="attachment",C$99t[C$99t.color=5]="color",C$99t[C$99t.deform=6]="deform",C$99t[C$99t.event=7]="event",C$99t[C$99t.drawOrder=8]="drawOrder",C$99t[C$99t.ikConstraint=9]="ikConstraint",C$99t[C$99t.transformConstraint=10]="transformConstraint",C$99t[C$99t.pathConstraintPosition=11]="pathConstraintPosition",C$99t[C$99t.pathConstraintSpacing=12]="pathConstraintSpacing",C$99t[C$99t.pathConstraintMix=13]="pathConstraintMix",C$99t[C$99t.twoColor=14]="twoColor";C$99g.prototype.getFrameCount=function(){return this.curves.length/C$99g.BEZIER_SIZE+1},C$99g.prototype.setLinear=function(C$99t){this.curves[C$99t*C$99g.BEZIER_SIZE]=C$99g.LINEAR},C$99g.prototype.setStepped=function(C$99t){this.curves[C$99t*C$99g.BEZIER_SIZE]=C$99g.STEPPED},C$99g.prototype.getCurveType=function(C$99t){C$99t*=C$99g.BEZIER_SIZE;if(C$99t==this.curves.length)return C$99g.LINEAR;C$99t=this.curves[C$99t];return C$99t==C$99g.LINEAR?C$99g.LINEAR:C$99t==C$99g.STEPPED?C$99g.STEPPED:C$99g.BEZIER},C$99g.prototype.setCurve=function(C$99h,C$99t,C$99e,C$99i,C$99n){for(var C$99u=.03*(2*-C$99t+C$99i),C$99_=.03*(2*-C$99e+C$99n),C$99r=.006*(3*(C$99t-C$99i)+1),C$99s=.006*(3*(C$99e-C$99n)+1),C$99d=2*C$99u+C$99r,C$99f=2*C$99_+C$99s,C$99o=.3*C$99t+C$99u+.16666667*C$99r,C$99a=.3*C$99e+C$99_+.16666667*C$99s,C$99c=C$99h*C$99g.BEZIER_SIZE,C$99l=this.curves,C$99p=(C$99l[C$99c++]=C$99g.BEZIER,C$99o),C$99m=C$99a,C$99y=C$99c+C$99g.BEZIER_SIZE-1;C$99c<C$99y;C$99c+=2)C$99l[C$99c]=C$99p,C$99l[C$99c+1]=C$99m,C$99o+=C$99d,C$99a+=C$99f,C$99d+=C$99r,C$99f+=C$99s,C$99p+=C$99o,C$99m+=C$99a},C$99g.prototype.getCurvePercent=function(C$99t,C$99e){C$99e=C$99N.MathUtils.clamp(C$99e,0,1);var C$99i=this.curves,C$99n=C$99t*C$99g.BEZIER_SIZE,C$99t=C$99i[C$99n];if(C$99t==C$99g.LINEAR)return C$99e;if(C$99t==C$99g.STEPPED)return 0;for(var C$99r,C$99s,C$99o=0,C$99a=++C$99n,C$99c=C$99n+C$99g.BEZIER_SIZE-1;C$99n<C$99c;C$99n+=2)if(C$99e<=(C$99o=C$99i[C$99n]))return C$99s=C$99r=void 0,(C$99s=C$99n==C$99a?C$99r=0:(C$99r=C$99i[C$99n-2],C$99i[C$99n-1]))+(C$99i[C$99n+1]-C$99s)*(C$99e-C$99r)/(C$99o-C$99r);C$99t=C$99i[C$99n-1];return C$99t+(1-C$99t)*(C$99e-C$99o)/(1-C$99o)},C$99g.LINEAR=0,C$99g.STEPPED=1,C$99g.BEZIER=2,C$99g.BEZIER_SIZE=19;var C$99t=C$99g;function C$99g(C$99t){if(C$99t<=0)throw new Error("frameCount must be > 0: "+C$99t);this.curves=C$99N.Utils.newFloatArray((C$99t-1)*C$99g.BEZIER_SIZE)}C$99N.CurveTimeline=C$99t;C$99V(C$99v,C$99n=C$99t),C$99v.prototype.getPropertyId=function(){return(C$99e.rotate<<24)+this.boneIndex},C$99v.prototype.setFrame=function(C$99t,C$99e,C$99i){this.frames[C$99t<<=1]=C$99e,this.frames[C$99t+C$99v.ROTATION]=C$99i},C$99v.prototype.apply=function(C$99t,C$99h,C$99e,C$99u,C$99i,C$99n,C$99_){var C$99r=this.frames,C$99s=C$99t.bones[this.boneIndex];if(C$99s.active)if(C$99e<C$99r[0])switch(C$99n){case C$99k.setup:return void(C$99s.rotation=C$99s.data.rotation);case C$99k.first:var C$99o=C$99s.data.rotation-C$99s.rotation;C$99s.rotation+=(C$99o-360*(16384-(16384.499999999996-C$99o/360|0)))*C$99i}else if(C$99e>=C$99r[C$99r.length-C$99v.ENTRIES]){var C$99a=C$99r[C$99r.length+C$99v.PREV_ROTATION];switch(C$99n){case C$99k.setup:C$99s.rotation=C$99s.data.rotation+C$99a*C$99i;break;case C$99k.first:case C$99k.replace:C$99a=(C$99a+=C$99s.data.rotation-C$99s.rotation)-360*(16384-(16384.499999999996-C$99a/360|0));case C$99k.add:C$99s.rotation+=C$99a*C$99i}}else{var C$99t=C$99G.binarySearch(C$99r,C$99e,C$99v.ENTRIES),C$99c=C$99r[C$99t+C$99v.PREV_ROTATION],C$99d=C$99r[C$99t],C$99e=this.getCurvePercent((C$99t>>1)-1,1-(C$99e-C$99d)/(C$99r[C$99t+C$99v.PREV_TIME]-C$99d)),C$99l=C$99c+((C$99l=C$99r[C$99t+C$99v.ROTATION]-C$99c)-360*(16384-(16384.499999999996-C$99l/360|0)))*C$99e;switch(C$99n){case C$99k.setup:C$99s.rotation=C$99s.data.rotation+(C$99l-360*(16384-(16384.499999999996-C$99l/360|0)))*C$99i;break;case C$99k.first:case C$99k.replace:C$99l+=C$99s.data.rotation-C$99s.rotation;case C$99k.add:C$99s.rotation+=(C$99l-360*(16384-(16384.499999999996-C$99l/360|0)))*C$99i}}},C$99v.ENTRIES=2,C$99v.PREV_TIME=-2,C$99v.PREV_ROTATION=-1,C$99v.ROTATION=1;var C$99n,C$99r=C$99v;function C$99v(C$99t){var C$99e=C$99n.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t<<1),C$99e}C$99N.RotateTimeline=C$99r;C$99V(C$99_,C$99s=C$99t),C$99_.prototype.getPropertyId=function(){return(C$99e.translate<<24)+this.boneIndex},C$99_.prototype.setFrame=function(C$99t,C$99e,C$99i,C$99n){this.frames[C$99t*=C$99_.ENTRIES]=C$99e,this.frames[C$99t+C$99_.X]=C$99i,this.frames[C$99t+C$99_.Y]=C$99n},C$99_.prototype.apply=function(C$99t,C$99l,C$99e,C$99h,C$99i,C$99n,C$99u){var C$99r=this.frames,C$99s=C$99t.bones[this.boneIndex];if(C$99s.active)if(C$99e<C$99r[0])switch(C$99n){case C$99k.setup:return C$99s.x=C$99s.data.x,void(C$99s.y=C$99s.data.y);case C$99k.first:C$99s.x+=(C$99s.data.x-C$99s.x)*C$99i,C$99s.y+=(C$99s.data.y-C$99s.y)*C$99i}else{var C$99o,C$99a=0,C$99c=0;switch(C$99e>=C$99r[C$99r.length-C$99_.ENTRIES]?(C$99a=C$99r[C$99r.length+C$99_.PREV_X],C$99c=C$99r[C$99r.length+C$99_.PREV_Y]):(C$99a=C$99r[(C$99t=C$99G.binarySearch(C$99r,C$99e,C$99_.ENTRIES))+C$99_.PREV_X],C$99c=C$99r[C$99t+C$99_.PREV_Y],C$99o=C$99r[C$99t],C$99e=this.getCurvePercent(C$99t/C$99_.ENTRIES-1,1-(C$99e-C$99o)/(C$99r[C$99t+C$99_.PREV_TIME]-C$99o)),C$99a+=(C$99r[C$99t+C$99_.X]-C$99a)*C$99e,C$99c+=(C$99r[C$99t+C$99_.Y]-C$99c)*C$99e),C$99n){case C$99k.setup:C$99s.x=C$99s.data.x+C$99a*C$99i,C$99s.y=C$99s.data.y+C$99c*C$99i;break;case C$99k.first:case C$99k.replace:C$99s.x+=(C$99s.data.x+C$99a-C$99s.x)*C$99i,C$99s.y+=(C$99s.data.y+C$99c-C$99s.y)*C$99i;break;case C$99k.add:C$99s.x+=C$99a*C$99i,C$99s.y+=C$99c*C$99i}}},C$99_.ENTRIES=3,C$99_.PREV_TIME=-3,C$99_.PREV_X=-2,C$99_.PREV_Y=-1,C$99_.X=1,C$99_.Y=2;var C$99s,C$99r=C$99_;function C$99_(C$99t){var C$99e=C$99s.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t*C$99_.ENTRIES),C$99e}C$99N.TranslateTimeline=C$99r;C$99V(C$99x,C$99o=C$99r),C$99x.prototype.getPropertyId=function(){return(C$99e.scale<<24)+this.boneIndex},C$99x.prototype.apply=function(C$99t,C$99h,C$99e,C$99u,C$99i,C$99n,C$99_){var C$99r=this.frames,C$99s=C$99t.bones[this.boneIndex];if(C$99s.active)if(C$99e<C$99r[0])switch(C$99n){case C$99k.setup:return C$99s.scaleX=C$99s.data.scaleX,void(C$99s.scaleY=C$99s.data.scaleY);case C$99k.first:C$99s.scaleX+=(C$99s.data.scaleX-C$99s.scaleX)*C$99i,C$99s.scaleY+=(C$99s.data.scaleY-C$99s.scaleY)*C$99i}else{var C$99d,C$99o=0,C$99a=0;if(C$99a=C$99e>=C$99r[C$99r.length-C$99x.ENTRIES]?(C$99o=C$99r[C$99r.length+C$99x.PREV_X]*C$99s.data.scaleX,C$99r[C$99r.length+C$99x.PREV_Y]*C$99s.data.scaleY):(C$99o=C$99r[(C$99t=C$99G.binarySearch(C$99r,C$99e,C$99x.ENTRIES))+C$99x.PREV_X],C$99a=C$99r[C$99t+C$99x.PREV_Y],C$99d=C$99r[C$99t],C$99e=this.getCurvePercent(C$99t/C$99x.ENTRIES-1,1-(C$99e-C$99d)/(C$99r[C$99t+C$99x.PREV_TIME]-C$99d)),C$99o=(C$99o+(C$99r[C$99t+C$99x.X]-C$99o)*C$99e)*C$99s.data.scaleX,(C$99a+(C$99r[C$99t+C$99x.Y]-C$99a)*C$99e)*C$99s.data.scaleY),1==C$99i)C$99n==C$99k.add?(C$99s.scaleX+=C$99o-C$99s.data.scaleX,C$99s.scaleY+=C$99a-C$99s.data.scaleY):(C$99s.scaleX=C$99o,C$99s.scaleY=C$99a);else{var C$99c=0,C$99l=0;if(C$99_==C$99y.mixOut)switch(C$99n){case C$99k.setup:C$99c=C$99s.data.scaleX,C$99l=C$99s.data.scaleY,C$99s.scaleX=C$99c+(Math.abs(C$99o)*C$99N.MathUtils.signum(C$99c)-C$99c)*C$99i,C$99s.scaleY=C$99l+(Math.abs(C$99a)*C$99N.MathUtils.signum(C$99l)-C$99l)*C$99i;break;case C$99k.first:case C$99k.replace:C$99c=C$99s.scaleX,C$99l=C$99s.scaleY,C$99s.scaleX=C$99c+(Math.abs(C$99o)*C$99N.MathUtils.signum(C$99c)-C$99c)*C$99i,C$99s.scaleY=C$99l+(Math.abs(C$99a)*C$99N.MathUtils.signum(C$99l)-C$99l)*C$99i;break;case C$99k.add:C$99c=C$99s.scaleX,C$99l=C$99s.scaleY,C$99s.scaleX=C$99c+(Math.abs(C$99o)*C$99N.MathUtils.signum(C$99c)-C$99s.data.scaleX)*C$99i,C$99s.scaleY=C$99l+(Math.abs(C$99a)*C$99N.MathUtils.signum(C$99l)-C$99s.data.scaleY)*C$99i}else switch(C$99n){case C$99k.setup:C$99c=Math.abs(C$99s.data.scaleX)*C$99N.MathUtils.signum(C$99o),C$99l=Math.abs(C$99s.data.scaleY)*C$99N.MathUtils.signum(C$99a),C$99s.scaleX=C$99c+(C$99o-C$99c)*C$99i,C$99s.scaleY=C$99l+(C$99a-C$99l)*C$99i;break;case C$99k.first:case C$99k.replace:C$99c=Math.abs(C$99s.scaleX)*C$99N.MathUtils.signum(C$99o),C$99l=Math.abs(C$99s.scaleY)*C$99N.MathUtils.signum(C$99a),C$99s.scaleX=C$99c+(C$99o-C$99c)*C$99i,C$99s.scaleY=C$99l+(C$99a-C$99l)*C$99i;break;case C$99k.add:C$99c=C$99N.MathUtils.signum(C$99o),C$99l=C$99N.MathUtils.signum(C$99a),C$99s.scaleX=Math.abs(C$99s.scaleX)*C$99c+(C$99o-Math.abs(C$99s.data.scaleX)*C$99c)*C$99i,C$99s.scaleY=Math.abs(C$99s.scaleY)*C$99l+(C$99a-Math.abs(C$99s.data.scaleY)*C$99l)*C$99i}}}};var C$99o,C$99a=C$99x;function C$99x(C$99t){return C$99o.call(this,C$99t)||this}C$99N.ScaleTimeline=C$99a;C$99V(C$99A,C$99c=C$99r),C$99A.prototype.getPropertyId=function(){return(C$99e.shear<<24)+this.boneIndex},C$99A.prototype.apply=function(C$99t,C$99l,C$99e,C$99h,C$99i,C$99n,C$99u){var C$99r=this.frames,C$99s=C$99t.bones[this.boneIndex];if(C$99s.active)if(C$99e<C$99r[0])switch(C$99n){case C$99k.setup:return C$99s.shearX=C$99s.data.shearX,void(C$99s.shearY=C$99s.data.shearY);case C$99k.first:C$99s.shearX+=(C$99s.data.shearX-C$99s.shearX)*C$99i,C$99s.shearY+=(C$99s.data.shearY-C$99s.shearY)*C$99i}else{var C$99o,C$99a=0,C$99c=0;switch(C$99e>=C$99r[C$99r.length-C$99A.ENTRIES]?(C$99a=C$99r[C$99r.length+C$99A.PREV_X],C$99c=C$99r[C$99r.length+C$99A.PREV_Y]):(C$99a=C$99r[(C$99t=C$99G.binarySearch(C$99r,C$99e,C$99A.ENTRIES))+C$99A.PREV_X],C$99c=C$99r[C$99t+C$99A.PREV_Y],C$99o=C$99r[C$99t],C$99e=this.getCurvePercent(C$99t/C$99A.ENTRIES-1,1-(C$99e-C$99o)/(C$99r[C$99t+C$99A.PREV_TIME]-C$99o)),C$99a+=(C$99r[C$99t+C$99A.X]-C$99a)*C$99e,C$99c+=(C$99r[C$99t+C$99A.Y]-C$99c)*C$99e),C$99n){case C$99k.setup:C$99s.shearX=C$99s.data.shearX+C$99a*C$99i,C$99s.shearY=C$99s.data.shearY+C$99c*C$99i;break;case C$99k.first:case C$99k.replace:C$99s.shearX+=(C$99s.data.shearX+C$99a-C$99s.shearX)*C$99i,C$99s.shearY+=(C$99s.data.shearY+C$99c-C$99s.shearY)*C$99i;break;case C$99k.add:C$99s.shearX+=C$99a*C$99i,C$99s.shearY+=C$99c*C$99i}}};var C$99c,C$99a=C$99A;function C$99A(C$99t){return C$99c.call(this,C$99t)||this}C$99N.ShearTimeline=C$99a;C$99V(C$99m,C$99l=C$99t),C$99m.prototype.getPropertyId=function(){return(C$99e.color<<24)+this.slotIndex},C$99m.prototype.setFrame=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this.frames[C$99t*=C$99m.ENTRIES]=C$99e,this.frames[C$99t+C$99m.R]=C$99i,this.frames[C$99t+C$99m.G]=C$99n,this.frames[C$99t+C$99m.B]=C$99r,this.frames[C$99t+C$99m.A]=C$99s},C$99m.prototype.apply=function(C$99t,C$99h,C$99e,C$99u,C$99i,C$99_,C$99d){var C$99n=C$99t.slots[this.slotIndex];if(C$99n.bone.active){C$99t=this.frames;if(C$99e<C$99t[0])switch(C$99_){case C$99k.setup:return void C$99n.color.setFromColor(C$99n.data.color);case C$99k.first:var C$99r=C$99n.color,C$99f=C$99n.data.color;C$99r.add((C$99f.r-C$99r.r)*C$99i,(C$99f.g-C$99r.g)*C$99i,(C$99f.b-C$99r.b)*C$99i,(C$99f.a-C$99r.a)*C$99i)}else{var C$99s,C$99p,C$99o=0,C$99a=0,C$99c=0,C$99l=0;C$99e>=C$99t[C$99t.length-C$99m.ENTRIES]?(C$99o=C$99t[(C$99s=C$99t.length)+C$99m.PREV_R],C$99a=C$99t[C$99s+C$99m.PREV_G],C$99c=C$99t[C$99s+C$99m.PREV_B],C$99l=C$99t[C$99s+C$99m.PREV_A]):(C$99o=C$99t[(C$99s=C$99G.binarySearch(C$99t,C$99e,C$99m.ENTRIES))+C$99m.PREV_R],C$99a=C$99t[C$99s+C$99m.PREV_G],C$99c=C$99t[C$99s+C$99m.PREV_B],C$99l=C$99t[C$99s+C$99m.PREV_A],C$99p=C$99t[C$99s],C$99e=this.getCurvePercent(C$99s/C$99m.ENTRIES-1,1-(C$99e-C$99p)/(C$99t[C$99s+C$99m.PREV_TIME]-C$99p)),C$99o+=(C$99t[C$99s+C$99m.R]-C$99o)*C$99e,C$99a+=(C$99t[C$99s+C$99m.G]-C$99a)*C$99e,C$99c+=(C$99t[C$99s+C$99m.B]-C$99c)*C$99e,C$99l+=(C$99t[C$99s+C$99m.A]-C$99l)*C$99e),1==C$99i?C$99n.color.set(C$99o,C$99a,C$99c,C$99l):(C$99r=C$99n.color,C$99_==C$99k.setup&&C$99r.setFromColor(C$99n.data.color),C$99r.add((C$99o-C$99r.r)*C$99i,(C$99a-C$99r.g)*C$99i,(C$99c-C$99r.b)*C$99i,(C$99l-C$99r.a)*C$99i))}}},C$99m.ENTRIES=5,C$99m.PREV_TIME=-5,C$99m.PREV_R=-4,C$99m.PREV_G=-3,C$99m.PREV_B=-2,C$99m.PREV_A=-1,C$99m.R=1,C$99m.G=2,C$99m.B=3,C$99m.A=4;var C$99l,C$99r=C$99m;function C$99m(C$99t){var C$99e=C$99l.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t*C$99m.ENTRIES),C$99e}C$99N.ColorTimeline=C$99r;C$99V(C$99b,C$99h=C$99t),C$99b.prototype.getPropertyId=function(){return(C$99e.twoColor<<24)+this.slotIndex},C$99b.prototype.setFrame=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c){this.frames[C$99t*=C$99b.ENTRIES]=C$99e,this.frames[C$99t+C$99b.R]=C$99i,this.frames[C$99t+C$99b.G]=C$99n,this.frames[C$99t+C$99b.B]=C$99r,this.frames[C$99t+C$99b.A]=C$99s,this.frames[C$99t+C$99b.R2]=C$99o,this.frames[C$99t+C$99b.G2]=C$99a,this.frames[C$99t+C$99b.B2]=C$99c},C$99b.prototype.apply=function(C$99t,C$99h,C$99e,C$99u,C$99i,C$99_,C$99d){var C$99n=C$99t.slots[this.slotIndex];if(C$99n.bone.active){C$99t=this.frames;if(C$99e<C$99t[0])switch(C$99_){case C$99k.setup:return C$99n.color.setFromColor(C$99n.data.color),void C$99n.darkColor.setFromColor(C$99n.data.darkColor);case C$99k.first:var C$99r=C$99n.color,C$99s=C$99n.darkColor,C$99f=C$99n.data.color,C$99p=C$99n.data.darkColor;C$99r.add((C$99f.r-C$99r.r)*C$99i,(C$99f.g-C$99r.g)*C$99i,(C$99f.b-C$99r.b)*C$99i,(C$99f.a-C$99r.a)*C$99i),C$99s.add((C$99p.r-C$99s.r)*C$99i,(C$99p.g-C$99s.g)*C$99i,(C$99p.b-C$99s.b)*C$99i,0)}else{var C$99o,C$99m,C$99a=0,C$99c=0,C$99l=0,C$99y=0,C$99g=0,C$99v=0,C$99x=0;C$99e>=C$99t[C$99t.length-C$99b.ENTRIES]?(C$99a=C$99t[(C$99o=C$99t.length)+C$99b.PREV_R],C$99c=C$99t[C$99o+C$99b.PREV_G],C$99l=C$99t[C$99o+C$99b.PREV_B],C$99y=C$99t[C$99o+C$99b.PREV_A],C$99g=C$99t[C$99o+C$99b.PREV_R2],C$99v=C$99t[C$99o+C$99b.PREV_G2],C$99x=C$99t[C$99o+C$99b.PREV_B2]):(C$99a=C$99t[(C$99o=C$99G.binarySearch(C$99t,C$99e,C$99b.ENTRIES))+C$99b.PREV_R],C$99c=C$99t[C$99o+C$99b.PREV_G],C$99l=C$99t[C$99o+C$99b.PREV_B],C$99y=C$99t[C$99o+C$99b.PREV_A],C$99g=C$99t[C$99o+C$99b.PREV_R2],C$99v=C$99t[C$99o+C$99b.PREV_G2],C$99x=C$99t[C$99o+C$99b.PREV_B2],C$99m=C$99t[C$99o],C$99e=this.getCurvePercent(C$99o/C$99b.ENTRIES-1,1-(C$99e-C$99m)/(C$99t[C$99o+C$99b.PREV_TIME]-C$99m)),C$99a+=(C$99t[C$99o+C$99b.R]-C$99a)*C$99e,C$99c+=(C$99t[C$99o+C$99b.G]-C$99c)*C$99e,C$99l+=(C$99t[C$99o+C$99b.B]-C$99l)*C$99e,C$99y+=(C$99t[C$99o+C$99b.A]-C$99y)*C$99e,C$99g+=(C$99t[C$99o+C$99b.R2]-C$99g)*C$99e,C$99v+=(C$99t[C$99o+C$99b.G2]-C$99v)*C$99e,C$99x+=(C$99t[C$99o+C$99b.B2]-C$99x)*C$99e),1==C$99i?(C$99n.color.set(C$99a,C$99c,C$99l,C$99y),C$99n.darkColor.set(C$99g,C$99v,C$99x,1)):(C$99r=C$99n.color,C$99s=C$99n.darkColor,C$99_==C$99k.setup&&(C$99r.setFromColor(C$99n.data.color),C$99s.setFromColor(C$99n.data.darkColor)),C$99r.add((C$99a-C$99r.r)*C$99i,(C$99c-C$99r.g)*C$99i,(C$99l-C$99r.b)*C$99i,(C$99y-C$99r.a)*C$99i),C$99s.add((C$99g-C$99s.r)*C$99i,(C$99v-C$99s.g)*C$99i,(C$99x-C$99s.b)*C$99i,0))}}},C$99b.ENTRIES=8,C$99b.PREV_TIME=-8,C$99b.PREV_R=-7,C$99b.PREV_G=-6,C$99b.PREV_B=-5,C$99b.PREV_A=-4,C$99b.PREV_R2=-3,C$99b.PREV_G2=-2,C$99b.PREV_B2=-1,C$99b.R=1,C$99b.G=2,C$99b.B=3,C$99b.A=4,C$99b.R2=5,C$99b.G2=6,C$99b.B2=7;var C$99h,C$99a=C$99b;function C$99b(C$99t){var C$99e=C$99h.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t*C$99b.ENTRIES),C$99e}function C$99u(C$99t){this.frames=C$99N.Utils.newFloatArray(C$99t),this.attachmentNames=new Array(C$99t)}C$99N.TwoColorTimeline=C$99a,C$99u.prototype.getPropertyId=function(){return(C$99e.attachment<<24)+this.slotIndex},C$99u.prototype.getFrameCount=function(){return this.frames.length},C$99u.prototype.setFrame=function(C$99t,C$99e,C$99i){this.frames[C$99t]=C$99e,this.attachmentNames[C$99t]=C$99i},C$99u.prototype.apply=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){var C$99a=C$99t.slots[this.slotIndex];if(C$99a.bone.active){if(C$99o==C$99y.mixOut&&C$99s==C$99k.setup)return C$99o=C$99a.data.attachmentName,void C$99a.setAttachment(null==C$99o?null:C$99t.getAttachment(this.slotIndex,C$99o));C$99o=this.frames;C$99i<C$99o[0]?C$99s!=C$99k.setup&&C$99s!=C$99k.first||(C$99s=C$99a.data.attachmentName,C$99a.setAttachment(null==C$99s?null:C$99t.getAttachment(this.slotIndex,C$99s))):(C$99a=0,C$99a=C$99i>=C$99o[C$99o.length-1]?C$99o.length-1:C$99G.binarySearch(C$99o,C$99i,1)-1,C$99s=this.attachmentNames[C$99a],C$99t.slots[this.slotIndex].setAttachment(null==C$99s?null:C$99t.getAttachment(this.slotIndex,C$99s)))}},C$99N.AttachmentTimeline=C$99u;var C$99C,C$99S=null,C$99r=(C$99V(C$99T,C$99C=C$99t),C$99T.prototype.getPropertyId=function(){return(C$99e.deform<<27)+ +this.attachment.id+this.slotIndex},C$99T.prototype.setFrame=function(C$99t,C$99e,C$99i){this.frames[C$99t]=C$99e,this.frameVertices[C$99t]=C$99i},C$99T.prototype.apply=function(C$99t,C$99h,C$99u,C$99_,C$99e,C$99d,C$99f){C$99t=C$99t.slots[this.slotIndex];if(C$99t.bone.active){var C$99i=C$99t.getAttachment();if(C$99i instanceof C$99N.VertexAttachment&&C$99i.deformAttachment==this.attachment){var C$99p=C$99t.deform,C$99t=(0==C$99p.length&&(C$99d=C$99k.setup),this.frameVertices),C$99n=C$99t[0].length,C$99m=this.frames;if(C$99u<C$99m[0]){var C$99r=C$99i;switch(C$99d){case C$99k.setup:return void(C$99p.length=0);case C$99k.first:if(1==C$99e){C$99p.length=0;break}var C$99y=C$99N.Utils.setArraySize(C$99p,C$99n);if(null==C$99r.bones)for(var C$99g=C$99r.vertices,C$99s=0;C$99s<C$99n;C$99s++)C$99y[C$99s]+=(C$99g[C$99s]-C$99y[C$99s])*C$99e;else{C$99e=1-C$99e;for(C$99s=0;C$99s<C$99n;C$99s++)C$99y[C$99s]*=C$99e}}}else{var C$99o=C$99N.Utils.setArraySize(C$99p,C$99n);if(C$99u>=C$99m[C$99m.length-1]){var C$99a=C$99t[C$99m.length-1];if(1==C$99e)if(C$99d==C$99k.add)if(null==(C$99r=C$99i).bones)for(var C$99g=C$99r.vertices,C$99v=0;C$99v<C$99n;C$99v++)C$99o[C$99v]+=C$99a[C$99v]-C$99g[C$99v];else for(var C$99x=0;C$99x<C$99n;C$99x++)C$99o[C$99x]+=C$99a[C$99x];else C$99N.Utils.arrayCopy(C$99a,0,C$99o,0,C$99n);else switch(C$99d){case C$99k.setup:if(null==C$99i.bones)for(var C$99g=C$99i.vertices,C$99b=0;C$99b<C$99n;C$99b++){var C$99A=C$99g[C$99b];C$99o[C$99b]=C$99A+(C$99a[C$99b]-C$99A)*C$99e}else for(var C$99C=0;C$99C<C$99n;C$99C++)C$99o[C$99C]=C$99a[C$99C]*C$99e;break;case C$99k.first:case C$99k.replace:for(var C$99S=0;C$99S<C$99n;C$99S++)C$99o[C$99S]+=(C$99a[C$99S]-C$99o[C$99S])*C$99e;case C$99k.add:if(null==(C$99r=C$99i).bones)for(var C$99g=C$99r.vertices,C$99T=0;C$99T<C$99n;C$99T++)C$99o[C$99T]+=(C$99a[C$99T]-C$99g[C$99T])*C$99e;else for(var C$99w=0;C$99w<C$99n;C$99w++)C$99o[C$99w]+=C$99a[C$99w]*C$99e}}else{var C$99E=C$99G.binarySearch(C$99m,C$99u),C$99c=C$99t[C$99E-1],C$99M=C$99t[C$99E],C$99t=C$99m[C$99E],C$99I=this.getCurvePercent(C$99E-1,1-(C$99u-C$99t)/(C$99m[C$99E-1]-C$99t));if(1==C$99e)if(C$99d==C$99k.add)if(null==(C$99r=C$99i).bones)for(var C$99g=C$99r.vertices,C$99B=0;C$99B<C$99n;C$99B++){var C$99l=C$99c[C$99B];C$99o[C$99B]+=C$99l+(C$99M[C$99B]-C$99l)*C$99I-C$99g[C$99B]}else for(var C$99R=0;C$99R<C$99n;C$99R++){C$99l=C$99c[C$99R];C$99o[C$99R]+=C$99l+(C$99M[C$99R]-C$99l)*C$99I}else for(var C$99P=0;C$99P<C$99n;C$99P++){C$99l=C$99c[C$99P];C$99o[C$99P]=C$99l+(C$99M[C$99P]-C$99l)*C$99I}else switch(C$99d){case C$99k.setup:if(null==C$99i.bones)for(var C$99g=C$99i.vertices,C$99D=0;C$99D<C$99n;C$99D++){C$99l=C$99c[C$99D],C$99A=C$99g[C$99D];C$99o[C$99D]=C$99A+(C$99l+(C$99M[C$99D]-C$99l)*C$99I-C$99A)*C$99e}else for(var C$99L=0;C$99L<C$99n;C$99L++){C$99l=C$99c[C$99L];C$99o[C$99L]=(C$99l+(C$99M[C$99L]-C$99l)*C$99I)*C$99e}break;case C$99k.first:case C$99k.replace:for(var C$99V=0;C$99V<C$99n;C$99V++){C$99l=C$99c[C$99V];C$99o[C$99V]+=(C$99l+(C$99M[C$99V]-C$99l)*C$99I-C$99o[C$99V])*C$99e}break;case C$99k.add:if(null==(C$99r=C$99i).bones)for(var C$99g=C$99r.vertices,C$99O=0;C$99O<C$99n;C$99O++){C$99l=C$99c[C$99O];C$99o[C$99O]+=(C$99l+(C$99M[C$99O]-C$99l)*C$99I-C$99g[C$99O])*C$99e}else for(var C$99F=0;C$99F<C$99n;C$99F++){C$99l=C$99c[C$99F];C$99o[C$99F]+=(C$99l+(C$99M[C$99F]-C$99l)*C$99I)*C$99e}}}}}}},C$99T);function C$99T(C$99t){var C$99e=C$99C.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t),C$99e.frameVertices=new Array(C$99t),null==C$99S&&(C$99S=C$99N.Utils.newFloatArray(64)),C$99e}function C$99w(C$99t){this.frames=C$99N.Utils.newFloatArray(C$99t),this.events=new Array(C$99t)}function C$99E(C$99t){this.frames=C$99N.Utils.newFloatArray(C$99t),this.drawOrders=new Array(C$99t)}C$99N.DeformTimeline=C$99r,C$99w.prototype.getPropertyId=function(){return C$99e.event<<24},C$99w.prototype.getFrameCount=function(){return this.frames.length},C$99w.prototype.setFrame=function(C$99t,C$99e){this.frames[C$99t]=C$99e.time,this.events[C$99t]=C$99e},C$99w.prototype.apply=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){if(null!=C$99n){var C$99a=this.frames,C$99c=this.frames.length;if(C$99i<C$99e)this.apply(C$99t,C$99e,Number.MAX_VALUE,C$99n,C$99r,C$99s,C$99o),C$99e=-1;else if(C$99e>=C$99a[C$99c-1])return;if(!(C$99i<C$99a[0])){var C$99l=0;if(C$99e<C$99a[0])C$99l=0;else for(var C$99h=C$99a[C$99l=C$99G.binarySearch(C$99a,C$99e)];0<C$99l&&C$99a[C$99l-1]==C$99h;)C$99l--;for(;C$99l<C$99c&&C$99i>=C$99a[C$99l];C$99l++)C$99n.push(this.events[C$99l])}}},C$99N.EventTimeline=C$99w,C$99E.prototype.getPropertyId=function(){return C$99e.drawOrder<<24},C$99E.prototype.getFrameCount=function(){return this.frames.length},C$99E.prototype.setFrame=function(C$99t,C$99e,C$99i){this.frames[C$99t]=C$99e,this.drawOrders[C$99t]=C$99i},C$99E.prototype.apply=function(C$99t,C$99l,C$99e,C$99h,C$99u,C$99i,C$99n){var C$99r=C$99t.drawOrder,C$99s=C$99t.slots;if(C$99n!=C$99y.mixOut||C$99i!=C$99k.setup){C$99n=this.frames;if(C$99e<C$99n[0])C$99i!=C$99k.setup&&C$99i!=C$99k.first||C$99N.Utils.arrayCopy(C$99t.slots,0,C$99t.drawOrder,0,C$99t.slots.length);else{var C$99i=C$99e>=C$99n[C$99n.length-1]?C$99n.length-1:C$99G.binarySearch(C$99n,C$99e)-1,C$99o=this.drawOrders[C$99i];if(null==C$99o)C$99N.Utils.arrayCopy(C$99s,0,C$99r,0,C$99s.length);else for(var C$99a=0,C$99c=C$99o.length;C$99a<C$99c;C$99a++)C$99r[C$99a]=C$99s[C$99o[C$99a]]}}else C$99N.Utils.arrayCopy(C$99t.slots,0,C$99t.drawOrder,0,C$99t.slots.length)},C$99N.DrawOrderTimeline=C$99E;C$99V(C$99d,C$99M=C$99t),C$99d.prototype.getPropertyId=function(){return(C$99e.ikConstraint<<24)+this.ikConstraintIndex},C$99d.prototype.setFrame=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){this.frames[C$99t*=C$99d.ENTRIES]=C$99e,this.frames[C$99t+C$99d.MIX]=C$99i,this.frames[C$99t+C$99d.SOFTNESS]=C$99n,this.frames[C$99t+C$99d.BEND_DIRECTION]=C$99r,this.frames[C$99t+C$99d.COMPRESS]=C$99s?1:0,this.frames[C$99t+C$99d.STRETCH]=C$99o?1:0},C$99d.prototype.apply=function(C$99t,C$99h,C$99e,C$99u,C$99i,C$99n,C$99r){var C$99s,C$99o,C$99a,C$99c=this.frames,C$99l=C$99t.ikConstraints[this.ikConstraintIndex];if(C$99l.active)if(C$99e<C$99c[0])switch(C$99n){case C$99k.setup:return C$99l.mix=C$99l.data.mix,C$99l.softness=C$99l.data.softness,C$99l.bendDirection=C$99l.data.bendDirection,C$99l.compress=C$99l.data.compress,void(C$99l.stretch=C$99l.data.stretch);case C$99k.first:C$99l.mix+=(C$99l.data.mix-C$99l.mix)*C$99i,C$99l.softness+=(C$99l.data.softness-C$99l.softness)*C$99i,C$99l.bendDirection=C$99l.data.bendDirection,C$99l.compress=C$99l.data.compress,C$99l.stretch=C$99l.data.stretch}else C$99e>=C$99c[C$99c.length-C$99d.ENTRIES]?C$99n==C$99k.setup?(C$99l.mix=C$99l.data.mix+(C$99c[C$99c.length+C$99d.PREV_MIX]-C$99l.data.mix)*C$99i,C$99l.softness=C$99l.data.softness+(C$99c[C$99c.length+C$99d.PREV_SOFTNESS]-C$99l.data.softness)*C$99i,C$99r==C$99y.mixOut?(C$99l.bendDirection=C$99l.data.bendDirection,C$99l.compress=C$99l.data.compress,C$99l.stretch=C$99l.data.stretch):(C$99l.bendDirection=C$99c[C$99c.length+C$99d.PREV_BEND_DIRECTION],C$99l.compress=0!=C$99c[C$99c.length+C$99d.PREV_COMPRESS],C$99l.stretch=0!=C$99c[C$99c.length+C$99d.PREV_STRETCH])):(C$99l.mix+=(C$99c[C$99c.length+C$99d.PREV_MIX]-C$99l.mix)*C$99i,C$99l.softness+=(C$99c[C$99c.length+C$99d.PREV_SOFTNESS]-C$99l.softness)*C$99i,C$99r==C$99y.mixIn&&(C$99l.bendDirection=C$99c[C$99c.length+C$99d.PREV_BEND_DIRECTION],C$99l.compress=0!=C$99c[C$99c.length+C$99d.PREV_COMPRESS],C$99l.stretch=0!=C$99c[C$99c.length+C$99d.PREV_STRETCH])):(C$99s=C$99c[(C$99t=C$99G.binarySearch(C$99c,C$99e,C$99d.ENTRIES))+C$99d.PREV_MIX],C$99o=C$99c[C$99t+C$99d.PREV_SOFTNESS],C$99a=C$99c[C$99t],C$99e=this.getCurvePercent(C$99t/C$99d.ENTRIES-1,1-(C$99e-C$99a)/(C$99c[C$99t+C$99d.PREV_TIME]-C$99a)),C$99n==C$99k.setup?(C$99l.mix=C$99l.data.mix+(C$99s+(C$99c[C$99t+C$99d.MIX]-C$99s)*C$99e-C$99l.data.mix)*C$99i,C$99l.softness=C$99l.data.softness+(C$99o+(C$99c[C$99t+C$99d.SOFTNESS]-C$99o)*C$99e-C$99l.data.softness)*C$99i,C$99r==C$99y.mixOut?(C$99l.bendDirection=C$99l.data.bendDirection,C$99l.compress=C$99l.data.compress,C$99l.stretch=C$99l.data.stretch):(C$99l.bendDirection=C$99c[C$99t+C$99d.PREV_BEND_DIRECTION],C$99l.compress=0!=C$99c[C$99t+C$99d.PREV_COMPRESS],C$99l.stretch=0!=C$99c[C$99t+C$99d.PREV_STRETCH])):(C$99l.mix+=(C$99s+(C$99c[C$99t+C$99d.MIX]-C$99s)*C$99e-C$99l.mix)*C$99i,C$99l.softness+=(C$99o+(C$99c[C$99t+C$99d.SOFTNESS]-C$99o)*C$99e-C$99l.softness)*C$99i,C$99r==C$99y.mixIn&&(C$99l.bendDirection=C$99c[C$99t+C$99d.PREV_BEND_DIRECTION],C$99l.compress=0!=C$99c[C$99t+C$99d.PREV_COMPRESS],C$99l.stretch=0!=C$99c[C$99t+C$99d.PREV_STRETCH])))},C$99d.ENTRIES=6,C$99d.PREV_TIME=-6,C$99d.PREV_MIX=-5,C$99d.PREV_SOFTNESS=-4,C$99d.PREV_BEND_DIRECTION=-3,C$99d.PREV_COMPRESS=-2,C$99d.PREV_STRETCH=-1,C$99d.MIX=1,C$99d.SOFTNESS=2,C$99d.BEND_DIRECTION=3,C$99d.COMPRESS=4,C$99d.STRETCH=5;var C$99M,C$99a=C$99d;function C$99d(C$99t){var C$99e=C$99M.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t*C$99d.ENTRIES),C$99e}C$99N.IkConstraintTimeline=C$99a;C$99V(C$99p,C$99I=C$99t),C$99p.prototype.getPropertyId=function(){return(C$99e.transformConstraint<<24)+this.transformConstraintIndex},C$99p.prototype.setFrame=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this.frames[C$99t*=C$99p.ENTRIES]=C$99e,this.frames[C$99t+C$99p.ROTATE]=C$99i,this.frames[C$99t+C$99p.TRANSLATE]=C$99n,this.frames[C$99t+C$99p.SCALE]=C$99r,this.frames[C$99t+C$99p.SHEAR]=C$99s},C$99p.prototype.apply=function(C$99t,C$99h,C$99e,C$99u,C$99i,C$99_,C$99d){var C$99n=this.frames,C$99r=C$99t.transformConstraints[this.transformConstraintIndex];if(C$99r.active)if(C$99e<C$99n[0]){var C$99s=C$99r.data;switch(C$99_){case C$99k.setup:return C$99r.rotateMix=C$99s.rotateMix,C$99r.translateMix=C$99s.translateMix,C$99r.scaleMix=C$99s.scaleMix,void(C$99r.shearMix=C$99s.shearMix);case C$99k.first:C$99r.rotateMix+=(C$99s.rotateMix-C$99r.rotateMix)*C$99i,C$99r.translateMix+=(C$99s.translateMix-C$99r.translateMix)*C$99i,C$99r.scaleMix+=(C$99s.scaleMix-C$99r.scaleMix)*C$99i,C$99r.shearMix+=(C$99s.shearMix-C$99r.shearMix)*C$99i}}else{var C$99o,C$99f,C$99t=0,C$99a=0,C$99c=0,C$99l=0;C$99e>=C$99n[C$99n.length-C$99p.ENTRIES]?(C$99t=C$99n[(C$99o=C$99n.length)+C$99p.PREV_ROTATE],C$99a=C$99n[C$99o+C$99p.PREV_TRANSLATE],C$99c=C$99n[C$99o+C$99p.PREV_SCALE],C$99l=C$99n[C$99o+C$99p.PREV_SHEAR]):(C$99t=C$99n[(C$99o=C$99G.binarySearch(C$99n,C$99e,C$99p.ENTRIES))+C$99p.PREV_ROTATE],C$99a=C$99n[C$99o+C$99p.PREV_TRANSLATE],C$99c=C$99n[C$99o+C$99p.PREV_SCALE],C$99l=C$99n[C$99o+C$99p.PREV_SHEAR],C$99f=C$99n[C$99o],C$99e=this.getCurvePercent(C$99o/C$99p.ENTRIES-1,1-(C$99e-C$99f)/(C$99n[C$99o+C$99p.PREV_TIME]-C$99f)),C$99t+=(C$99n[C$99o+C$99p.ROTATE]-C$99t)*C$99e,C$99a+=(C$99n[C$99o+C$99p.TRANSLATE]-C$99a)*C$99e,C$99c+=(C$99n[C$99o+C$99p.SCALE]-C$99c)*C$99e,C$99l+=(C$99n[C$99o+C$99p.SHEAR]-C$99l)*C$99e),C$99_==C$99k.setup?(C$99s=C$99r.data,C$99r.rotateMix=C$99s.rotateMix+(C$99t-C$99s.rotateMix)*C$99i,C$99r.translateMix=C$99s.translateMix+(C$99a-C$99s.translateMix)*C$99i,C$99r.scaleMix=C$99s.scaleMix+(C$99c-C$99s.scaleMix)*C$99i,C$99r.shearMix=C$99s.shearMix+(C$99l-C$99s.shearMix)*C$99i):(C$99r.rotateMix+=(C$99t-C$99r.rotateMix)*C$99i,C$99r.translateMix+=(C$99a-C$99r.translateMix)*C$99i,C$99r.scaleMix+=(C$99c-C$99r.scaleMix)*C$99i,C$99r.shearMix+=(C$99l-C$99r.shearMix)*C$99i)}},C$99p.ENTRIES=5,C$99p.PREV_TIME=-5,C$99p.PREV_ROTATE=-4,C$99p.PREV_TRANSLATE=-3,C$99p.PREV_SCALE=-2,C$99p.PREV_SHEAR=-1,C$99p.ROTATE=1,C$99p.TRANSLATE=2,C$99p.SCALE=3,C$99p.SHEAR=4;var C$99I,C$99r=C$99p;function C$99p(C$99t){var C$99e=C$99I.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t*C$99p.ENTRIES),C$99e}C$99N.TransformConstraintTimeline=C$99r;C$99V(C$99R,C$99B=C$99t),C$99R.prototype.getPropertyId=function(){return(C$99e.pathConstraintPosition<<24)+this.pathConstraintIndex},C$99R.prototype.setFrame=function(C$99t,C$99e,C$99i){this.frames[C$99t*=C$99R.ENTRIES]=C$99e,this.frames[C$99t+C$99R.VALUE]=C$99i},C$99R.prototype.apply=function(C$99t,C$99e,C$99i,C$99l,C$99n,C$99r,C$99h){var C$99s=this.frames,C$99o=C$99t.pathConstraints[this.pathConstraintIndex];if(C$99o.active)if(C$99i<C$99s[0])switch(C$99r){case C$99k.setup:return void(C$99o.position=C$99o.data.position);case C$99k.first:C$99o.position+=(C$99o.data.position-C$99o.position)*C$99n}else{var C$99a,C$99c,C$99t=0;C$99i>=C$99s[C$99s.length-C$99R.ENTRIES]?C$99t=C$99s[C$99s.length+C$99R.PREV_VALUE]:(C$99t=C$99s[(C$99a=C$99G.binarySearch(C$99s,C$99i,C$99R.ENTRIES))+C$99R.PREV_VALUE],C$99c=C$99s[C$99a],C$99i=this.getCurvePercent(C$99a/C$99R.ENTRIES-1,1-(C$99i-C$99c)/(C$99s[C$99a+C$99R.PREV_TIME]-C$99c)),C$99t+=(C$99s[C$99a+C$99R.VALUE]-C$99t)*C$99i),C$99r==C$99k.setup?C$99o.position=C$99o.data.position+(C$99t-C$99o.data.position)*C$99n:C$99o.position+=(C$99t-C$99o.position)*C$99n}},C$99R.ENTRIES=2,C$99R.PREV_TIME=-2,C$99R.PREV_VALUE=-1,C$99R.VALUE=1;var C$99B,C$99a=C$99R;function C$99R(C$99t){var C$99e=C$99B.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t*C$99R.ENTRIES),C$99e}C$99N.PathConstraintPositionTimeline=C$99a;C$99V(C$99D,C$99P=C$99a),C$99D.prototype.getPropertyId=function(){return(C$99e.pathConstraintSpacing<<24)+this.pathConstraintIndex},C$99D.prototype.apply=function(C$99t,C$99e,C$99i,C$99l,C$99n,C$99r,C$99h){var C$99s=this.frames,C$99o=C$99t.pathConstraints[this.pathConstraintIndex];if(C$99o.active)if(C$99i<C$99s[0])switch(C$99r){case C$99k.setup:return void(C$99o.spacing=C$99o.data.spacing);case C$99k.first:C$99o.spacing+=(C$99o.data.spacing-C$99o.spacing)*C$99n}else{var C$99a,C$99c,C$99t=0;C$99i>=C$99s[C$99s.length-C$99D.ENTRIES]?C$99t=C$99s[C$99s.length+C$99D.PREV_VALUE]:(C$99t=C$99s[(C$99a=C$99G.binarySearch(C$99s,C$99i,C$99D.ENTRIES))+C$99D.PREV_VALUE],C$99c=C$99s[C$99a],C$99i=this.getCurvePercent(C$99a/C$99D.ENTRIES-1,1-(C$99i-C$99c)/(C$99s[C$99a+C$99D.PREV_TIME]-C$99c)),C$99t+=(C$99s[C$99a+C$99D.VALUE]-C$99t)*C$99i),C$99r==C$99k.setup?C$99o.spacing=C$99o.data.spacing+(C$99t-C$99o.data.spacing)*C$99n:C$99o.spacing+=(C$99t-C$99o.spacing)*C$99n}};var C$99P,C$99r=C$99D;function C$99D(C$99t){return C$99P.call(this,C$99t)||this}C$99N.PathConstraintSpacingTimeline=C$99r;C$99V(C$99f,C$99L=C$99t),C$99f.prototype.getPropertyId=function(){return(C$99e.pathConstraintMix<<24)+this.pathConstraintIndex},C$99f.prototype.setFrame=function(C$99t,C$99e,C$99i,C$99n){this.frames[C$99t*=C$99f.ENTRIES]=C$99e,this.frames[C$99t+C$99f.ROTATE]=C$99i,this.frames[C$99t+C$99f.TRANSLATE]=C$99n},C$99f.prototype.apply=function(C$99t,C$99l,C$99e,C$99h,C$99i,C$99n,C$99u){var C$99r=this.frames,C$99s=C$99t.pathConstraints[this.pathConstraintIndex];if(C$99s.active)if(C$99e<C$99r[0])switch(C$99n){case C$99k.setup:return C$99s.rotateMix=C$99s.data.rotateMix,void(C$99s.translateMix=C$99s.data.translateMix);case C$99k.first:C$99s.rotateMix+=(C$99s.data.rotateMix-C$99s.rotateMix)*C$99i,C$99s.translateMix+=(C$99s.data.translateMix-C$99s.translateMix)*C$99i}else{var C$99o,C$99a,C$99t=0,C$99c=0;C$99e>=C$99r[C$99r.length-C$99f.ENTRIES]?(C$99t=C$99r[C$99r.length+C$99f.PREV_ROTATE],C$99c=C$99r[C$99r.length+C$99f.PREV_TRANSLATE]):(C$99t=C$99r[(C$99o=C$99G.binarySearch(C$99r,C$99e,C$99f.ENTRIES))+C$99f.PREV_ROTATE],C$99c=C$99r[C$99o+C$99f.PREV_TRANSLATE],C$99a=C$99r[C$99o],C$99e=this.getCurvePercent(C$99o/C$99f.ENTRIES-1,1-(C$99e-C$99a)/(C$99r[C$99o+C$99f.PREV_TIME]-C$99a)),C$99t+=(C$99r[C$99o+C$99f.ROTATE]-C$99t)*C$99e,C$99c+=(C$99r[C$99o+C$99f.TRANSLATE]-C$99c)*C$99e),C$99n==C$99k.setup?(C$99s.rotateMix=C$99s.data.rotateMix+(C$99t-C$99s.data.rotateMix)*C$99i,C$99s.translateMix=C$99s.data.translateMix+(C$99c-C$99s.data.translateMix)*C$99i):(C$99s.rotateMix+=(C$99t-C$99s.rotateMix)*C$99i,C$99s.translateMix+=(C$99c-C$99s.translateMix)*C$99i)}},C$99f.ENTRIES=3,C$99f.PREV_TIME=-3,C$99f.PREV_ROTATE=-2,C$99f.PREV_TRANSLATE=-1,C$99f.ROTATE=1,C$99f.TRANSLATE=2;var C$99L,C$99a=C$99f;function C$99f(C$99t){var C$99e=C$99L.call(this,C$99t)||this;return C$99e.frames=C$99N.Utils.newFloatArray(C$99t*C$99f.ENTRIES),C$99e}C$99N.PathConstraintMixTimeline=C$99a}(C$99t=C$99t||{}),function(C$99S){C$99T.prototype.update=function(C$99t){C$99t*=this.timeScale;for(var C$99e=this.tracks,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(null!=C$99r){C$99r.animationLast=C$99r.nextAnimationLast,C$99r.trackLast=C$99r.nextTrackLast;var C$99s=C$99t*C$99r.timeScale;if(0<C$99r.delay){if(C$99r.delay-=C$99s,0<C$99r.delay)continue;C$99s=-C$99r.delay,C$99r.delay=0}var C$99o=C$99r.next;if(null!=C$99o){var C$99a=C$99r.trackLast-C$99o.delay;if(0<=C$99a){for(C$99o.delay=0,C$99o.trackTime+=0==C$99r.timeScale?0:(C$99a/C$99r.timeScale+C$99t)*C$99o.timeScale,C$99r.trackTime+=C$99s,this.setCurrent(C$99i,C$99o,!0);null!=C$99o.mixingFrom;)C$99o.mixTime+=C$99t,C$99o=C$99o.mixingFrom;continue}}else if(C$99r.trackLast>=C$99r.trackEnd&&null==C$99r.mixingFrom){C$99e[C$99i]=null,this.queue.end(C$99r),this.disposeNext(C$99r);continue}if(null!=C$99r.mixingFrom&&this.updateMixingFrom(C$99r,C$99t)){var C$99c=C$99r.mixingFrom;for((C$99r.mixingFrom=null)!=C$99c&&(C$99c.mixingTo=null);null!=C$99c;)this.queue.end(C$99c),C$99c=C$99c.mixingFrom}C$99r.trackTime+=C$99s}}this.queue.drain()},C$99T.prototype.updateMixingFrom=function(C$99t,C$99e){var C$99i=C$99t.mixingFrom;if(null==C$99i)return!0;var C$99n=this.updateMixingFrom(C$99i,C$99e);return C$99i.animationLast=C$99i.nextAnimationLast,C$99i.trackLast=C$99i.nextTrackLast,0<C$99t.mixTime&&C$99t.mixTime>=C$99t.mixDuration?(0!=C$99i.totalAlpha&&0!=C$99t.mixDuration||(C$99t.mixingFrom=C$99i.mixingFrom,null!=C$99i.mixingFrom&&(C$99i.mixingFrom.mixingTo=C$99t),C$99t.interruptAlpha=C$99i.interruptAlpha,this.queue.end(C$99i)),C$99n):(C$99i.trackTime+=C$99e*C$99i.timeScale,C$99t.mixTime+=C$99e,!1)},C$99T.prototype.apply=function(C$99t){if(null==C$99t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var C$99e=this.events,C$99h=this.tracks,C$99u=!1,C$99i=0,C$99_=C$99h.length;C$99i<C$99_;C$99i++){var C$99n=C$99h[C$99i];if(!(null==C$99n||0<C$99n.delay)){var C$99u=!0,C$99r=0==C$99i?C$99S.MixBlend.first:C$99n.mixBlend,C$99s=C$99n.alpha,C$99d=(null!=C$99n.mixingFrom?C$99s*=this.applyMixingFrom(C$99n,C$99t,C$99r):C$99n.trackTime>=C$99n.trackEnd&&null==C$99n.next&&(C$99s=0),C$99n.animationLast),C$99o=C$99n.getAnimationTime(),C$99a=C$99n.animation.timelines.length,C$99f=C$99n.animation.timelines;if(0==C$99i&&1==C$99s||C$99r==C$99S.MixBlend.add)for(var C$99c=0;C$99c<C$99a;C$99c++)C$99S.Utils.webkit602BugfixHelper(C$99s,C$99r),C$99f[C$99c].apply(C$99t,C$99d,C$99o,C$99e,C$99s,C$99r,C$99S.MixDirection.mixIn);else for(var C$99p=C$99n.timelineMode,C$99m=0==C$99n.timelinesRotation.length,C$99y=(C$99m&&C$99S.Utils.setArraySize(C$99n.timelinesRotation,C$99a<<1,null),C$99n.timelinesRotation),C$99c=0;C$99c<C$99a;C$99c++){var C$99l=C$99f[C$99c],C$99g=(C$99p[C$99c]&C$99T.NOT_LAST-1)==C$99T.SUBSEQUENT?C$99r:C$99S.MixBlend.setup;C$99l instanceof C$99S.RotateTimeline?this.applyRotateTimeline(C$99l,C$99t,C$99o,C$99s,C$99g,C$99y,C$99c<<1,C$99m):(C$99S.Utils.webkit602BugfixHelper(C$99s,C$99r),C$99l.apply(C$99t,C$99d,C$99o,C$99e,C$99s,C$99g,C$99S.MixDirection.mixIn))}this.queueEvents(C$99n,C$99o),C$99e.length=0,C$99n.nextAnimationLast=C$99o,C$99n.nextTrackLast=C$99n.trackTime}}return this.queue.drain(),C$99u},C$99T.prototype.applyMixingFrom=function(C$99t,C$99e,C$99i){var C$99n=C$99t.mixingFrom,C$99r=(null!=C$99n.mixingFrom&&this.applyMixingFrom(C$99n,C$99e,C$99i),0),C$99h=(0==C$99t.mixDuration?(C$99r=1,C$99i==C$99S.MixBlend.first&&(C$99i=C$99S.MixBlend.setup)):(1<(C$99r=C$99t.mixTime/C$99t.mixDuration)&&(C$99r=1),C$99i!=C$99S.MixBlend.first&&(C$99i=C$99n.mixBlend)),C$99r<C$99n.eventThreshold?this.events:null),C$99u=C$99r<C$99n.attachmentThreshold,C$99_=C$99r<C$99n.drawOrderThreshold,C$99d=C$99n.animationLast,C$99s=C$99n.getAnimationTime(),C$99f=C$99n.animation.timelines.length,C$99p=C$99n.animation.timelines,C$99m=C$99n.alpha*C$99t.interruptAlpha,C$99y=C$99m*(1-C$99r);if(C$99i==C$99S.MixBlend.add)for(var C$99o=0;C$99o<C$99f;C$99o++)C$99p[C$99o].apply(C$99e,C$99d,C$99s,C$99h,C$99y,C$99i,C$99S.MixDirection.mixOut);else for(var C$99g=C$99n.timelineMode,C$99v=C$99n.timelineHoldMix,C$99x=0==C$99n.timelinesRotation.length,C$99b=(C$99x&&C$99S.Utils.setArraySize(C$99n.timelinesRotation,C$99f<<1,null),C$99n.timelinesRotation),C$99o=C$99n.totalAlpha=0;C$99o<C$99f;C$99o++){var C$99a=C$99p[C$99o],C$99A=C$99S.MixDirection.mixOut,C$99c=void 0,C$99l=0;switch(C$99g[C$99o]&C$99T.NOT_LAST-1){case C$99T.SUBSEQUENT:if(C$99c=C$99i,!C$99u&&C$99a instanceof C$99S.AttachmentTimeline){if((C$99g[C$99o]&C$99T.NOT_LAST)==C$99T.NOT_LAST)continue;C$99c=C$99S.MixBlend.setup}if(!C$99_&&C$99a instanceof C$99S.DrawOrderTimeline)continue;C$99l=C$99y;break;case C$99T.FIRST:C$99c=C$99S.MixBlend.setup,C$99l=C$99y;break;case C$99T.HOLD:C$99c=C$99S.MixBlend.setup,C$99l=C$99m;break;default:var C$99c=C$99S.MixBlend.setup,C$99C=C$99v[C$99o],C$99l=C$99m*Math.max(0,1-C$99C.mixTime/C$99C.mixDuration)}C$99n.totalAlpha+=C$99l,C$99a instanceof C$99S.RotateTimeline?this.applyRotateTimeline(C$99a,C$99e,C$99s,C$99l,C$99c,C$99b,C$99o<<1,C$99x):(C$99S.Utils.webkit602BugfixHelper(C$99l,C$99i),C$99c==C$99S.MixBlend.setup&&(C$99a instanceof C$99S.AttachmentTimeline?!C$99u&&(C$99g[C$99o]&C$99T.NOT_LAST)!=C$99T.NOT_LAST||(C$99A=C$99S.MixDirection.mixIn):C$99a instanceof C$99S.DrawOrderTimeline&&C$99_&&(C$99A=C$99S.MixDirection.mixIn)),C$99a.apply(C$99e,C$99d,C$99s,C$99h,C$99l,C$99c,C$99A))}return 0<C$99t.mixDuration&&this.queueEvents(C$99n,C$99s),this.events.length=0,C$99n.nextAnimationLast=C$99s,C$99n.nextTrackLast=C$99n.trackTime,C$99r},C$99T.prototype.applyRotateTimeline=function(C$99h,C$99u,C$99t,C$99_,C$99d,C$99e,C$99i,C$99f){if(C$99f&&(C$99e[C$99i]=0),1!=C$99_){var C$99n=C$99h,C$99r=C$99n.frames,C$99s=C$99u.bones[C$99n.boneIndex];if(C$99s.active){var C$99p=0,C$99o=0;if(C$99t<C$99r[0])switch(C$99d){case C$99S.MixBlend.setup:C$99s.rotation=C$99s.data.rotation;default:return;case C$99S.MixBlend.first:C$99p=C$99s.rotation,C$99o=C$99s.data.rotation}else{C$99p=(C$99d==C$99S.MixBlend.setup?C$99s.data:C$99s).rotation;C$99t>=C$99r[C$99r.length-C$99S.RotateTimeline.ENTRIES]?C$99o=C$99s.data.rotation+C$99r[C$99r.length+C$99S.RotateTimeline.PREV_ROTATION]:(C$99c=C$99r[(C$99a=C$99S.Animation.binarySearch(C$99r,C$99t,C$99S.RotateTimeline.ENTRIES))+C$99S.RotateTimeline.PREV_ROTATION],C$99l=C$99r[C$99a],C$99n=C$99n.getCurvePercent((C$99a>>1)-1,1-(C$99t-C$99l)/(C$99r[C$99a+C$99S.RotateTimeline.PREV_TIME]-C$99l)),C$99o=C$99r[C$99a+C$99S.RotateTimeline.ROTATION]-C$99c,C$99o=C$99c+(C$99o-=360*(16384-(16384.499999999996-C$99o/360|0)))*C$99n+C$99s.data.rotation,C$99o-=360*(16384-(16384.499999999996-C$99o/360|0)))}var C$99a,C$99c,C$99l=0,C$99r=C$99o-C$99p;0==(C$99r-=360*(16384-(16384.499999999996-C$99r/360|0)))?C$99l=C$99e[C$99i]:(C$99c=C$99a=0,C$99c=C$99f?(C$99a=0,C$99r):(C$99a=C$99e[C$99i],C$99e[C$99i+1]),C$99n=0<C$99r,C$99f=0<=C$99a,C$99S.MathUtils.signum(C$99c)!=C$99S.MathUtils.signum(C$99r)&&Math.abs(C$99c)<=90&&(180<Math.abs(C$99a)&&(C$99a+=360*C$99S.MathUtils.signum(C$99a)),C$99f=C$99n),C$99l=C$99r+C$99a-C$99a%360,C$99f!=C$99n&&(C$99l+=360*C$99S.MathUtils.signum(C$99a)),C$99e[C$99i]=C$99l),C$99e[C$99i+1]=C$99r,C$99s.rotation=(C$99p+=C$99l*C$99_)-360*(16384-(16384.499999999996-C$99p/360|0))}}else C$99h.apply(C$99u,0,C$99t,null,1,C$99d,C$99S.MixDirection.mixIn)},C$99T.prototype.queueEvents=function(C$99t,C$99e){for(var C$99i=C$99t.animationStart,C$99n=C$99t.animationEnd,C$99r=C$99n-C$99i,C$99s=C$99t.trackLast%C$99r,C$99o=this.events,C$99a=0,C$99c=C$99o.length;C$99a<C$99c;C$99a++){var C$99l=C$99o[C$99a];if(C$99l.time<C$99s)break;C$99l.time>C$99n||this.queue.event(C$99t,C$99l)}for((C$99t.loop?0==C$99r||C$99s>C$99t.trackTime%C$99r:C$99n<=C$99e&&C$99t.animationLast<C$99n)&&this.queue.complete(C$99t);C$99a<C$99c;C$99a++)C$99o[C$99a].time<C$99i||this.queue.event(C$99t,C$99o[C$99a])},C$99T.prototype.clearTracks=function(){var C$99t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var C$99e=0,C$99i=this.tracks.length;C$99e<C$99i;C$99e++)this.clearTrack(C$99e);this.tracks.length=0,this.queue.drainDisabled=C$99t,this.queue.drain()},C$99T.prototype.clearTrack=function(C$99t){if(!(C$99t>=this.tracks.length)){C$99t=this.tracks[C$99t];if(null!=C$99t){this.queue.end(C$99t),this.disposeNext(C$99t);for(var C$99e=C$99t;;){var C$99i=C$99e.mixingFrom;if(null==C$99i)break;this.queue.end(C$99i),C$99e.mixingFrom=null,C$99e.mixingTo=null,C$99e=C$99i}this.tracks[C$99t.trackIndex]=null,this.queue.drain()}}},C$99T.prototype.setCurrent=function(C$99t,C$99e,C$99i){var C$99n=this.expandToIndex(C$99t);this.tracks[C$99t]=C$99e,null!=C$99n&&(C$99i&&this.queue.interrupt(C$99n),((C$99e.mixingFrom=C$99n).mixingTo=C$99e).mixTime=0,null!=C$99n.mixingFrom&&0<C$99n.mixDuration&&(C$99e.interruptAlpha*=Math.min(1,C$99n.mixTime/C$99n.mixDuration)),C$99n.timelinesRotation.length=0),this.queue.start(C$99e)},C$99T.prototype.setAnimation=function(C$99t,C$99e,C$99i){var C$99n=this.data.skeletonData.findAnimation(C$99e);if(null==C$99n)throw new Error("Animation not found: "+C$99e);return this.setAnimationWith(C$99t,C$99n,C$99i)},C$99T.prototype.setAnimationWith=function(C$99t,C$99e,C$99i){if(null==C$99e)throw new Error("animation cannot be null.");var C$99n=!0,C$99r=this.expandToIndex(C$99t),C$99e=(null!=C$99r&&(-1==C$99r.nextTrackLast?(this.tracks[C$99t]=C$99r.mixingFrom,this.queue.interrupt(C$99r),this.queue.end(C$99r),this.disposeNext(C$99r),C$99r=C$99r.mixingFrom,C$99n=!1):this.disposeNext(C$99r)),this.trackEntry(C$99t,C$99e,C$99i,C$99r));return this.setCurrent(C$99t,C$99e,C$99n),this.queue.drain(),C$99e},C$99T.prototype.addAnimation=function(C$99t,C$99e,C$99i,C$99n){var C$99r=this.data.skeletonData.findAnimation(C$99e);if(null==C$99r)throw new Error("Animation not found: "+C$99e);return this.addAnimationWith(C$99t,C$99r,C$99i,C$99n)},C$99T.prototype.addAnimationWith=function(C$99t,C$99e,C$99i,C$99n){if(null==C$99e)throw new Error("animation cannot be null.");var C$99r=this.expandToIndex(C$99t);if(null!=C$99r)for(;null!=C$99r.next;)C$99r=C$99r.next;C$99i=this.trackEntry(C$99t,C$99e,C$99i,C$99r);return null==C$99r?(this.setCurrent(C$99t,C$99i,!0),this.queue.drain()):(C$99r.next=C$99i,C$99n<=0&&(0!=(C$99t=C$99r.animationEnd-C$99r.animationStart)?(C$99r.loop?C$99n+=C$99t*(1+(C$99r.trackTime/C$99t|0)):C$99n+=Math.max(C$99t,C$99r.trackTime),C$99n-=this.data.getMix(C$99r.animation,C$99e)):C$99n=C$99r.trackTime)),C$99i.delay=C$99n,C$99i},C$99T.prototype.setEmptyAnimation=function(C$99t,C$99e){C$99t=this.setAnimationWith(C$99t,C$99T.emptyAnimation,!1);return C$99t.mixDuration=C$99e,C$99t.trackEnd=C$99e,C$99t},C$99T.prototype.addEmptyAnimation=function(C$99t,C$99e,C$99i){C$99i<=0&&(C$99i-=C$99e);C$99t=this.addAnimationWith(C$99t,C$99T.emptyAnimation,!1,C$99i);return C$99t.mixDuration=C$99e,C$99t.trackEnd=C$99e,C$99t},C$99T.prototype.setEmptyAnimations=function(C$99t){var C$99e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var C$99i=0,C$99n=this.tracks.length;C$99i<C$99n;C$99i++){var C$99r=this.tracks[C$99i];null!=C$99r&&this.setEmptyAnimation(C$99r.trackIndex,C$99t)}this.queue.drainDisabled=C$99e,this.queue.drain()},C$99T.prototype.expandToIndex=function(C$99t){return C$99t<this.tracks.length?this.tracks[C$99t]:(C$99S.Utils.ensureArrayCapacity(this.tracks,C$99t+1,null),this.tracks.length=C$99t+1,null)},C$99T.prototype.trackEntry=function(C$99t,C$99e,C$99i,C$99n){var C$99r=this.trackEntryPool.obtain();return C$99r.trackIndex=C$99t,C$99r.animation=C$99e,C$99r.loop=C$99i,C$99r.holdPrevious=!1,C$99r.eventThreshold=0,C$99r.attachmentThreshold=0,C$99r.drawOrderThreshold=0,C$99r.animationStart=0,C$99r.animationEnd=C$99e.duration,C$99r.animationLast=-1,C$99r.nextAnimationLast=-1,C$99r.delay=0,C$99r.trackTime=0,C$99r.trackLast=-1,C$99r.nextTrackLast=-1,C$99r.trackEnd=Number.MAX_VALUE,C$99r.timeScale=1,C$99r.alpha=1,C$99r.interruptAlpha=1,C$99r.mixTime=0,C$99r.mixDuration=null==C$99n?0:this.data.getMix(C$99n.animation,C$99e),C$99r},C$99T.prototype.disposeNext=function(C$99t){for(var C$99e=C$99t.next;null!=C$99e;)this.queue.dispose(C$99e),C$99e=C$99e.next;C$99t.next=null},C$99T.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var C$99t=0,C$99e=this.tracks.length;C$99t<C$99e;C$99t++)if(null!=(C$99i=this.tracks[C$99t])){for(;null!=C$99i.mixingFrom;)C$99i=C$99i.mixingFrom;for(;null!=C$99i.mixingFrom&&C$99i.mixBlend==C$99S.MixBlend.add||this.computeHold(C$99i),null!=(C$99i=C$99i.mixingTo););}this.propertyIDs.clear();for(C$99t=this.tracks.length-1;0<=C$99t;C$99t--)for(var C$99i=this.tracks[C$99t];null!=C$99i;)this.computeNotLast(C$99i),C$99i=C$99i.mixingFrom},C$99T.prototype.computeHold=function(C$99t){var C$99e=C$99t.mixingTo,C$99i=C$99t.animation.timelines,C$99n=C$99t.animation.timelines.length,C$99r=C$99S.Utils.setArraySize(C$99t.timelineMode,C$99n),C$99h=(C$99t.timelineHoldMix.length=0,C$99S.Utils.setArraySize(C$99t.timelineHoldMix,C$99n)),C$99s=this.propertyIDs;if(null!=C$99e&&C$99e.holdPrevious)for(var C$99o=0;C$99o<C$99n;C$99o++)C$99s.add(C$99i[C$99o].getPropertyId()),C$99r[C$99o]=C$99T.HOLD;else C$99t:for(C$99o=0;C$99o<C$99n;C$99o++){var C$99a=C$99i[C$99o],C$99c=C$99a.getPropertyId();if(C$99s.add(C$99c))if(null==C$99e||C$99a instanceof C$99S.AttachmentTimeline||C$99a instanceof C$99S.DrawOrderTimeline||C$99a instanceof C$99S.EventTimeline||!C$99e.animation.hasTimeline(C$99c))C$99r[C$99o]=C$99T.FIRST;else{for(var C$99l=C$99e.mixingTo;null!=C$99l;C$99l=C$99l.mixingTo)if(!C$99l.animation.hasTimeline(C$99c)){if(0<C$99t.mixDuration){C$99r[C$99o]=C$99T.HOLD_MIX,C$99h[C$99o]=C$99l;continue C$99t}break}C$99r[C$99o]=C$99T.HOLD}else C$99r[C$99o]=C$99T.SUBSEQUENT}},C$99T.prototype.computeNotLast=function(C$99t){for(var C$99e,C$99i=C$99t.animation.timelines,C$99n=C$99t.animation.timelines.length,C$99r=C$99t.timelineMode,C$99s=this.propertyIDs,C$99o=0;C$99o<C$99n;C$99o++)C$99i[C$99o]instanceof C$99S.AttachmentTimeline&&(C$99e=C$99i[C$99o],C$99s.add(C$99e.slotIndex)||(C$99r[C$99o]|=C$99T.NOT_LAST))},C$99T.prototype.getCurrent=function(C$99t){return C$99t>=this.tracks.length?null:this.tracks[C$99t]},C$99T.prototype.addListener=function(C$99t){if(null==C$99t)throw new Error("listener cannot be null.");this.listeners.push(C$99t)},C$99T.prototype.removeListener=function(C$99t){C$99t=this.listeners.indexOf(C$99t);0<=C$99t&&this.listeners.splice(C$99t,1)},C$99T.prototype.clearListeners=function(){this.listeners.length=0},C$99T.prototype.clearListenerNotifications=function(){this.queue.clear()},C$99T.emptyAnimation=new C$99S.Animation("<empty>",[],0),C$99T.SUBSEQUENT=0,C$99T.FIRST=1,C$99T.HOLD=2,C$99T.HOLD_MIX=3,C$99T.NOT_LAST=4;var C$99t=C$99T;function C$99T(C$99t){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new C$99n(this),this.propertyIDs=new C$99S.IntSet,this.animationsChanged=!1,this.trackEntryPool=new C$99S.Pool(function(){return new C$99e}),this.data=C$99t}C$99S.AnimationState=C$99t;C$99i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},C$99i.prototype.getAnimationTime=function(){var C$99t;return this.loop?0==(C$99t=this.animationEnd-this.animationStart)?this.animationStart:this.trackTime%C$99t+this.animationStart:Math.min(this.trackTime+this.animationStart,this.animationEnd)},C$99i.prototype.setAnimationLast=function(C$99t){this.animationLast=C$99t,this.nextAnimationLast=C$99t},C$99i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},C$99i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0};var C$99e=C$99i;function C$99i(){this.mixBlend=C$99S.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}C$99S.TrackEntry=C$99e;C$99r.prototype.start=function(C$99t){this.objects.push(C$99a.start),this.objects.push(C$99t),this.animState.animationsChanged=!0},C$99r.prototype.interrupt=function(C$99t){this.objects.push(C$99a.interrupt),this.objects.push(C$99t)},C$99r.prototype.end=function(C$99t){this.objects.push(C$99a.end),this.objects.push(C$99t),this.animState.animationsChanged=!0},C$99r.prototype.dispose=function(C$99t){this.objects.push(C$99a.dispose),this.objects.push(C$99t)},C$99r.prototype.complete=function(C$99t){this.objects.push(C$99a.complete),this.objects.push(C$99t)},C$99r.prototype.event=function(C$99t,C$99e){this.objects.push(C$99a.event),this.objects.push(C$99t),this.objects.push(C$99e)},C$99r.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var C$99t=this.objects,C$99e=this.animState.listeners,C$99i=0;C$99i<C$99t.length;C$99i+=2){var C$99n=C$99t[C$99i],C$99r=C$99t[C$99i+1];switch(C$99n){case C$99a.start:null!=C$99r.listener&&C$99r.listener.start&&C$99r.listener.start(C$99r);for(var C$99s=0;C$99s<C$99e.length;C$99s++)C$99e[C$99s].start&&C$99e[C$99s].start(C$99r);break;case C$99a.interrupt:null!=C$99r.listener&&C$99r.listener.interrupt&&C$99r.listener.interrupt(C$99r);for(C$99s=0;C$99s<C$99e.length;C$99s++)C$99e[C$99s].interrupt&&C$99e[C$99s].interrupt(C$99r);break;case C$99a.end:null!=C$99r.listener&&C$99r.listener.end&&C$99r.listener.end(C$99r);for(C$99s=0;C$99s<C$99e.length;C$99s++)C$99e[C$99s].end&&C$99e[C$99s].end(C$99r);case C$99a.dispose:null!=C$99r.listener&&C$99r.listener.dispose&&C$99r.listener.dispose(C$99r);for(C$99s=0;C$99s<C$99e.length;C$99s++)C$99e[C$99s].dispose&&C$99e[C$99s].dispose(C$99r);this.animState.trackEntryPool.free(C$99r);break;case C$99a.complete:null!=C$99r.listener&&C$99r.listener.complete&&C$99r.listener.complete(C$99r);for(C$99s=0;C$99s<C$99e.length;C$99s++)C$99e[C$99s].complete&&C$99e[C$99s].complete(C$99r);break;case C$99a.event:var C$99o=C$99t[2+C$99i++];null!=C$99r.listener&&C$99r.listener.event&&C$99r.listener.event(C$99r,C$99o);for(C$99s=0;C$99s<C$99e.length;C$99s++)C$99e[C$99s].event&&C$99e[C$99s].event(C$99r,C$99o)}}this.clear(),this.drainDisabled=!1}},C$99r.prototype.clear=function(){this.objects.length=0};var C$99a,C$99n=C$99r;function C$99r(C$99t){this.objects=[],this.drainDisabled=!1,this.animState=C$99t}function C$99s(){}C$99S.EventQueue=C$99n,(C$99t=C$99a=C$99S.EventType||(C$99S.EventType={}))[C$99t.start=0]="start",C$99t[C$99t.interrupt=1]="interrupt",C$99t[C$99t.end=2]="end",C$99t[C$99t.dispose=3]="dispose",C$99t[C$99t.complete=4]="complete",C$99t[C$99t.event=5]="event",C$99s.prototype.start=function(C$99t){},C$99s.prototype.interrupt=function(C$99t){},C$99s.prototype.end=function(C$99t){},C$99s.prototype.dispose=function(C$99t){},C$99s.prototype.complete=function(C$99t){},C$99s.prototype.event=function(C$99t,C$99e){},C$99S.AnimationStateAdapter=C$99s}(C$99t=C$99t||{}),function(C$99t){function C$99e(C$99t){if(this.animationToMixTime={},this.defaultMix=0,null==C$99t)throw new Error("skeletonData cannot be null.");this.skeletonData=C$99t}C$99e.prototype.setMix=function(C$99t,C$99e,C$99i){var C$99n=this.skeletonData.findAnimation(C$99t);if(null==C$99n)throw new Error("Animation not found: "+C$99t);C$99t=this.skeletonData.findAnimation(C$99e);if(null==C$99t)throw new Error("Animation not found: "+C$99e);this.setMixWith(C$99n,C$99t,C$99i)},C$99e.prototype.setMixWith=function(C$99t,C$99e,C$99i){if(null==C$99t)throw new Error("from cannot be null.");if(null==C$99e)throw new Error("to cannot be null.");C$99t=C$99t.name+"."+C$99e.name;this.animationToMixTime[C$99t]=C$99i},C$99e.prototype.getMix=function(C$99t,C$99e){C$99t=C$99t.name+"."+C$99e.name,C$99e=this.animationToMixTime[C$99t];return void 0===C$99e?this.defaultMix:C$99e},C$99t.AnimationStateData=C$99e}(C$99t=C$99t||{}),function(C$99_){function C$99t(C$99t,C$99e){void 0===C$99e&&(C$99e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=C$99t,this.pathPrefix=C$99e}C$99t.downloadText=function(C$99t,C$99e,C$99i){var C$99n=new XMLHttpRequest;C$99n.open("GET",C$99t,!0),C$99n.onload=function(){200==C$99n.status?C$99e(C$99n.responseText):C$99i(C$99n.status,C$99n.responseText)},C$99n.onerror=function(){C$99i(C$99n.status,C$99n.responseText)},C$99n.send()},C$99t.downloadBinary=function(C$99t,C$99e,C$99i){var C$99n=new XMLHttpRequest;C$99n.open("GET",C$99t,!0),C$99n.responseType="arraybuffer",C$99n.onload=function(){200==C$99n.status?C$99e(new Uint8Array(C$99n.response)):C$99i(C$99n.status,C$99n.responseText)},C$99n.onerror=function(){C$99i(C$99n.status,C$99n.responseText)},C$99n.send()},C$99t.prototype.loadBinary=function(C$99i,C$99e,C$99n){var C$99r=this;void 0===C$99e&&(C$99e=null),void 0===C$99n&&(C$99n=null),C$99i=this.pathPrefix+C$99i,this.toLoad++,C$99t.downloadBinary(C$99i,function(C$99t){C$99r.assets[C$99i]=C$99t,C$99e&&C$99e(C$99i,C$99t),C$99r.toLoad--,C$99r.loaded++},function(C$99t,C$99e){C$99r.errors[C$99i]="Couldn't load binary "+C$99i+": status "+status+", "+C$99e,C$99n&&C$99n(C$99i,"Couldn't load binary "+C$99i+": status "+status+", "+C$99e),C$99r.toLoad--,C$99r.loaded++})},C$99t.prototype.loadText=function(C$99i,C$99e,C$99n){var C$99r=this;void 0===C$99e&&(C$99e=null),void 0===C$99n&&(C$99n=null),C$99i=this.pathPrefix+C$99i,this.toLoad++,C$99t.downloadText(C$99i,function(C$99t){C$99r.assets[C$99i]=C$99t,C$99e&&C$99e(C$99i,C$99t),C$99r.toLoad--,C$99r.loaded++},function(C$99t,C$99e){C$99r.errors[C$99i]="Couldn't load text "+C$99i+": status "+status+", "+C$99e,C$99n&&C$99n(C$99i,"Couldn't load text "+C$99i+": status "+status+", "+C$99e),C$99r.toLoad--,C$99r.loaded++})},C$99t.prototype.loadTexture=function(C$99i,C$99n,C$99e){var C$99r=this,C$99s=(void 0===C$99n&&(C$99n=null),void 0===C$99e&&(C$99e=null),C$99i=this.pathPrefix+C$99i,this.toLoad++,new Image);C$99s.crossOrigin="anonymous",C$99s.onload=function(C$99t){var C$99e=C$99r.textureLoader(C$99s);C$99r.assets[C$99i]=C$99e,C$99r.toLoad--,C$99r.loaded++,C$99n&&C$99n(C$99i,C$99s)},C$99s.onerror=function(C$99t){C$99r.errors[C$99i]="Couldn't load image "+C$99i,C$99r.toLoad--,C$99r.loaded++,C$99e&&C$99e(C$99i,"Couldn't load image "+C$99i)},C$99s.src=C$99i},C$99t.prototype.loadTextureData=function(C$99i,C$99t,C$99n,C$99e){var C$99r=this,C$99s=(void 0===C$99n&&(C$99n=null),void 0===C$99e&&(C$99e=null),C$99i=this.pathPrefix+C$99i,this.toLoad++,new Image);C$99s.onload=function(C$99t){var C$99e=C$99r.textureLoader(C$99s);C$99r.assets[C$99i]=C$99e,C$99r.toLoad--,C$99r.loaded++,C$99n&&C$99n(C$99i,C$99s)},C$99s.onerror=function(C$99t){C$99r.errors[C$99i]="Couldn't load image "+C$99i,C$99r.toLoad--,C$99r.loaded++,C$99e&&C$99e(C$99i,"Couldn't load image "+C$99i)},C$99s.src=C$99t},C$99t.prototype.loadTextureAtlas=function(C$99a,C$99c,C$99l){var C$99h=this,C$99u=(void 0===C$99c&&(C$99c=null),void 0===C$99l&&(C$99l=null),0<=C$99a.lastIndexOf("/")?C$99a.substring(0,C$99a.lastIndexOf("/")):"");C$99a=this.pathPrefix+C$99a,this.toLoad++,C$99t.downloadText(C$99a,function(C$99r){var C$99s={count:0},C$99o=new Array;try{new C$99_.TextureAtlas(C$99r,function(C$99t){C$99o.push(C$99u+"/"+C$99t);C$99t=document.createElement("img");return C$99t.width=16,C$99t.height=16,new C$99_.FakeTexture(C$99t)})}catch(C$99t){var C$99e=C$99t;return C$99h.errors[C$99a]="Couldn't load texture atlas "+C$99a+": "+C$99e.message,C$99l&&C$99l(C$99a,"Couldn't load texture atlas "+C$99a+": "+C$99e.message),C$99h.toLoad--,void C$99h.loaded++}for(var C$99t=0,C$99i=C$99o;C$99t<C$99i.length;C$99t++)!function(C$99t){var C$99n=!1;C$99h.loadTexture(C$99t,function(C$99e,C$99t){if(C$99s.count++,C$99s.count==C$99o.length)if(C$99n)C$99h.errors[C$99a]="Couldn't load texture atlas page "+C$99e+"} of atlas "+C$99a,C$99l&&C$99l(C$99a,"Couldn't load texture atlas page "+C$99e+" of atlas "+C$99a),C$99h.toLoad--,C$99h.loaded++;else try{var C$99i=new C$99_.TextureAtlas(C$99r,function(C$99t){return C$99h.get(C$99u+"/"+C$99t)});C$99h.assets[C$99a]=C$99i,C$99c&&C$99c(C$99a,C$99i),C$99h.toLoad--,C$99h.loaded++}catch(C$99t){C$99e=C$99t;C$99h.errors[C$99a]="Couldn't load texture atlas "+C$99a+": "+C$99e.message,C$99l&&C$99l(C$99a,"Couldn't load texture atlas "+C$99a+": "+C$99e.message),C$99h.toLoad--,C$99h.loaded++}},function(C$99t,C$99e){C$99n=!0,C$99s.count++,C$99s.count==C$99o.length&&(C$99h.errors[C$99a]="Couldn't load texture atlas page "+C$99t+"} of atlas "+C$99a,C$99l&&C$99l(C$99a,"Couldn't load texture atlas page "+C$99t+" of atlas "+C$99a),C$99h.toLoad--,C$99h.loaded++)})}(C$99i[C$99t])},function(C$99t,C$99e){C$99h.errors[C$99a]="Couldn't load texture atlas "+C$99a+": status "+status+", "+C$99e,C$99l&&C$99l(C$99a,"Couldn't load texture atlas "+C$99a+": status "+status+", "+C$99e),C$99h.toLoad--,C$99h.loaded++})},C$99t.prototype.get=function(C$99t){return C$99t=this.pathPrefix+C$99t,this.assets[C$99t]},C$99t.prototype.remove=function(C$99t){C$99t=this.pathPrefix+C$99t;var C$99e=this.assets[C$99t];C$99e.dispose&&C$99e.dispose(),this.assets[C$99t]=null},C$99t.prototype.removeAll=function(){for(var C$99t in this.assets){C$99t=this.assets[C$99t];C$99t.dispose&&C$99t.dispose()}this.assets={}},C$99t.prototype.isLoadingComplete=function(){return 0==this.toLoad},C$99t.prototype.getToLoad=function(){return this.toLoad},C$99t.prototype.getLoaded=function(){return this.loaded},C$99t.prototype.dispose=function(){this.removeAll()},C$99t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},C$99t.prototype.getErrors=function(){return this.errors},C$99_.AssetManager=C$99t}(C$99t=C$99t||{}),function(C$99n){function C$99t(C$99t){this.atlas=C$99t}C$99t.prototype.newRegionAttachment=function(C$99t,C$99e,C$99i){C$99i=this.atlas.findRegion(C$99i);if(null==C$99i)return null;C$99i.renderObject=C$99i;C$99e=new C$99n.RegionAttachment(C$99e);return C$99e.setRegion(C$99i),C$99e},C$99t.prototype.newMeshAttachment=function(C$99t,C$99e,C$99i){C$99i=this.atlas.findRegion(C$99i);if(null==C$99i)return null;C$99i.renderObject=C$99i;C$99e=new C$99n.MeshAttachment(C$99e);return C$99e.region=C$99i,C$99e},C$99t.prototype.newBoundingBoxAttachment=function(C$99t,C$99e){return new C$99n.BoundingBoxAttachment(C$99e)},C$99t.prototype.newPathAttachment=function(C$99t,C$99e){return new C$99n.PathAttachment(C$99e)},C$99t.prototype.newPointAttachment=function(C$99t,C$99e){return new C$99n.PointAttachment(C$99e)},C$99t.prototype.newClippingAttachment=function(C$99t,C$99e){return new C$99n.ClippingAttachment(C$99e)},C$99n.AtlasAttachmentLoader=C$99t}(C$99t=C$99t||{}),(C$99e=(C$99e=C$99t=C$99t||{}).BlendMode||(C$99e.BlendMode={}))[C$99e.Normal=0]="Normal",C$99e[C$99e.Additive=1]="Additive",C$99e[C$99e.Multiply=2]="Multiply",C$99e[C$99e.Screen=3]="Screen",function(C$99T){function C$99t(C$99t,C$99e,C$99i){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==C$99t)throw new Error("data cannot be null.");if(null==C$99e)throw new Error("skeleton cannot be null.");this.data=C$99t,this.skeleton=C$99e,this.parent=C$99i,this.setToSetupPose()}C$99t.prototype.isActive=function(){return this.active},C$99t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},C$99t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},C$99t.prototype.updateWorldTransformWith=function(C$99h,C$99u,C$99t,C$99e,C$99i,C$99n,C$99_){this.ax=C$99h,this.ay=C$99u,this.arotation=C$99t,this.ascaleX=C$99e,this.ascaleY=C$99i,this.ashearX=C$99n,this.ashearY=C$99_,this.appliedValid=!0;var C$99d,C$99f,C$99p,C$99m=this.parent;if(null==C$99m)return C$99y=C$99t+90+C$99_,C$99f=(C$99d=this.skeleton).scaleX,C$99p=C$99d.scaleY,this.a=C$99T.MathUtils.cosDeg(C$99t+C$99n)*C$99e*C$99f,this.b=C$99T.MathUtils.cosDeg(C$99y)*C$99i*C$99f,this.c=C$99T.MathUtils.sinDeg(C$99t+C$99n)*C$99e*C$99p,this.d=C$99T.MathUtils.sinDeg(C$99y)*C$99i*C$99p,this.worldX=C$99h*C$99f+C$99d.x,void(this.worldY=C$99u*C$99p+C$99d.y);var C$99r=C$99m.a,C$99s=C$99m.b,C$99o=C$99m.c,C$99a=C$99m.d;switch(this.worldX=C$99r*C$99h+C$99s*C$99u+C$99m.worldX,this.worldY=C$99o*C$99h+C$99a*C$99u+C$99m.worldY,this.data.transformMode){case C$99T.TransformMode.Normal:var C$99y=C$99t+90+C$99_,C$99g=C$99T.MathUtils.cosDeg(C$99t+C$99n)*C$99e,C$99v=C$99T.MathUtils.cosDeg(C$99y)*C$99i,C$99x=C$99T.MathUtils.sinDeg(C$99t+C$99n)*C$99e,C$99b=C$99T.MathUtils.sinDeg(C$99y)*C$99i;return this.a=C$99r*C$99g+C$99s*C$99x,this.b=C$99r*C$99v+C$99s*C$99b,this.c=C$99o*C$99g+C$99a*C$99x,void(this.d=C$99o*C$99v+C$99a*C$99b);case C$99T.TransformMode.OnlyTranslation:C$99y=C$99t+90+C$99_;this.a=C$99T.MathUtils.cosDeg(C$99t+C$99n)*C$99e,this.b=C$99T.MathUtils.cosDeg(C$99y)*C$99i,this.c=C$99T.MathUtils.sinDeg(C$99t+C$99n)*C$99e,this.d=C$99T.MathUtils.sinDeg(C$99y)*C$99i;break;case C$99T.TransformMode.NoRotationOrReflection:var C$99A=0,C$99c=C$99t+C$99n-(C$99A=1e-4<(C$99l=C$99r*C$99r+C$99o*C$99o)?(C$99s=C$99o*(C$99l=Math.abs(C$99r*C$99a-C$99s*C$99o)/C$99l),C$99a=C$99r*C$99l,Math.atan2(C$99o,C$99r)*C$99T.MathUtils.radDeg):(C$99o=C$99r=0,90-Math.atan2(C$99a,C$99s)*C$99T.MathUtils.radDeg)),C$99A=C$99t+C$99_-C$99A+90,C$99g=C$99T.MathUtils.cosDeg(C$99c)*C$99e,C$99v=C$99T.MathUtils.cosDeg(C$99A)*C$99i,C$99x=C$99T.MathUtils.sinDeg(C$99c)*C$99e,C$99b=C$99T.MathUtils.sinDeg(C$99A)*C$99i;this.a=C$99r*C$99g-C$99s*C$99x,this.b=C$99r*C$99v-C$99s*C$99b,this.c=C$99o*C$99g+C$99a*C$99x,this.d=C$99o*C$99v+C$99a*C$99b;break;case C$99T.TransformMode.NoScale:case C$99T.TransformMode.NoScaleOrReflection:var C$99l,C$99c=C$99T.MathUtils.cosDeg(C$99t),C$99A=C$99T.MathUtils.sinDeg(C$99t),C$99C=(C$99r*C$99c+C$99s*C$99A)/this.skeleton.scaleX,C$99c=(C$99o*C$99c+C$99a*C$99A)/this.skeleton.scaleY,C$99A=(C$99C*=C$99l=1e-5<(C$99l=Math.sqrt(C$99C*C$99C+C$99c*C$99c))?1/C$99l:C$99l,C$99c*=C$99l,C$99l=Math.sqrt(C$99C*C$99C+C$99c*C$99c),this.data.transformMode==C$99T.TransformMode.NoScale&&C$99r*C$99a-C$99s*C$99o<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(C$99l=-C$99l),Math.PI/2+Math.atan2(C$99c,C$99C)),C$99S=Math.cos(C$99A)*C$99l,C$99A=Math.sin(C$99A)*C$99l,C$99g=C$99T.MathUtils.cosDeg(C$99n)*C$99e,C$99v=C$99T.MathUtils.cosDeg(90+C$99_)*C$99i,C$99x=C$99T.MathUtils.sinDeg(C$99n)*C$99e,C$99b=C$99T.MathUtils.sinDeg(90+C$99_)*C$99i;this.a=C$99C*C$99g+C$99S*C$99x,this.b=C$99C*C$99v+C$99S*C$99b,this.c=C$99c*C$99g+C$99A*C$99x,this.d=C$99c*C$99v+C$99A*C$99b}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},C$99t.prototype.setToSetupPose=function(){var C$99t=this.data;this.x=C$99t.x,this.y=C$99t.y,this.rotation=C$99t.rotation,this.scaleX=C$99t.scaleX,this.scaleY=C$99t.scaleY,this.shearX=C$99t.shearX,this.shearY=C$99t.shearY},C$99t.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*C$99T.MathUtils.radDeg},C$99t.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*C$99T.MathUtils.radDeg},C$99t.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},C$99t.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},C$99t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var C$99t=this.parent;if(null==C$99t)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*C$99T.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*C$99T.MathUtils.radDeg);var C$99e=C$99t.a,C$99i=C$99t.b,C$99n=C$99t.c,C$99r=C$99t.d,C$99s=1/(C$99e*C$99r-C$99i*C$99n),C$99o=this.worldX-C$99t.worldX,C$99t=this.worldY-C$99t.worldY,C$99t=(this.ax=C$99o*C$99r*C$99s-C$99t*C$99i*C$99s,this.ay=C$99t*C$99e*C$99s-C$99o*C$99n*C$99s,C$99s*C$99r),C$99o=C$99s*C$99e,C$99r=C$99s*C$99i,C$99e=C$99s*C$99n,C$99i=C$99t*this.a-C$99r*this.c,C$99s=C$99t*this.b-C$99r*this.d,C$99n=C$99o*this.c-C$99e*this.a,C$99t=C$99o*this.d-C$99e*this.b;this.ashearX=0,this.ascaleX=Math.sqrt(C$99i*C$99i+C$99n*C$99n),1e-4<this.ascaleX?(this.ascaleY=(C$99r=C$99i*C$99t-C$99s*C$99n)/this.ascaleX,this.ashearY=Math.atan2(C$99i*C$99s+C$99n*C$99t,C$99r)*C$99T.MathUtils.radDeg,this.arotation=Math.atan2(C$99n,C$99i)*C$99T.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(C$99s*C$99s+C$99t*C$99t),this.ashearY=0,this.arotation=90-Math.atan2(C$99t,C$99s)*C$99T.MathUtils.radDeg)},C$99t.prototype.worldToLocal=function(C$99t){var C$99e=this.a,C$99i=this.b,C$99n=this.c,C$99r=this.d,C$99s=1/(C$99e*C$99r-C$99i*C$99n),C$99o=C$99t.x-this.worldX,C$99a=C$99t.y-this.worldY;return C$99t.x=C$99o*C$99r*C$99s-C$99a*C$99i*C$99s,C$99t.y=C$99a*C$99e*C$99s-C$99o*C$99n*C$99s,C$99t},C$99t.prototype.localToWorld=function(C$99t){var C$99e=C$99t.x,C$99i=C$99t.y;return C$99t.x=C$99e*this.a+C$99i*this.b+this.worldX,C$99t.y=C$99e*this.c+C$99i*this.d+this.worldY,C$99t},C$99t.prototype.worldToLocalRotation=function(C$99t){var C$99e=C$99T.MathUtils.sinDeg(C$99t),C$99t=C$99T.MathUtils.cosDeg(C$99t);return Math.atan2(this.a*C$99e-this.c*C$99t,this.d*C$99t-this.b*C$99e)*C$99T.MathUtils.radDeg+this.rotation-this.shearX},C$99t.prototype.localToWorldRotation=function(C$99t){C$99t-=this.rotation-this.shearX;var C$99e=C$99T.MathUtils.sinDeg(C$99t),C$99t=C$99T.MathUtils.cosDeg(C$99t);return Math.atan2(C$99t*this.c+C$99e*this.d,C$99t*this.a+C$99e*this.b)*C$99T.MathUtils.radDeg},C$99t.prototype.rotateWorld=function(C$99t){var C$99e=this.a,C$99i=this.b,C$99n=this.c,C$99r=this.d,C$99s=C$99T.MathUtils.cosDeg(C$99t),C$99t=C$99T.MathUtils.sinDeg(C$99t);this.a=C$99s*C$99e-C$99t*C$99n,this.b=C$99s*C$99i-C$99t*C$99r,this.c=C$99t*C$99e+C$99s*C$99n,this.d=C$99t*C$99i+C$99s*C$99r,this.appliedValid=!1},C$99T.Bone=C$99t}(C$99t=C$99t||{}),(C$99l=C$99t=C$99t||{}).BoneData=function(C$99t,C$99e,C$99i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=C$99h.Normal,this.skinRequired=!1,this.color=new C$99l.Color,C$99t<0)throw new Error("index must be >= 0.");if(null==C$99e)throw new Error("name cannot be null.");this.index=C$99t,this.name=C$99e,this.parent=C$99i},(C$99e=C$99h=C$99l.TransformMode||(C$99l.TransformMode={}))[C$99e.Normal=0]="Normal",C$99e[C$99e.OnlyTranslation=1]="OnlyTranslation",C$99e[C$99e.NoRotationOrReflection=2]="NoRotationOrReflection",C$99e[C$99e.NoScale=3]="NoScale",C$99e[C$99e.NoScaleOrReflection=4]="NoScaleOrReflection",(C$99t||(C$99t={})).ConstraintData=function(C$99t,C$99e,C$99i){this.name=C$99t,this.order=C$99e,this.skinRequired=C$99i},(C$99t||(C$99t={})).Event=function(C$99t,C$99e){if(null==C$99e)throw new Error("data cannot be null.");this.time=C$99t,this.data=C$99e},(C$99t||(C$99t={})).EventData=function(C$99t){this.name=C$99t},function(C$99q){function C$99t(C$99t,C$99e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==C$99t)throw new Error("data cannot be null.");if(null==C$99e)throw new Error("skeleton cannot be null.");this.data=C$99t,this.mix=C$99t.mix,this.softness=C$99t.softness,this.bendDirection=C$99t.bendDirection,this.compress=C$99t.compress,this.stretch=C$99t.stretch,this.bones=new Array;for(var C$99i=0;C$99i<C$99t.bones.length;C$99i++)this.bones.push(C$99e.findBone(C$99t.bones[C$99i].name));this.target=C$99e.findBone(C$99t.target.name)}C$99t.prototype.isActive=function(){return this.active},C$99t.prototype.apply=function(){this.update()},C$99t.prototype.update=function(){var C$99t=this.target,C$99e=this.bones;switch(C$99e.length){case 1:this.apply1(C$99e[0],C$99t.worldX,C$99t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(C$99e[0],C$99e[1],C$99t.worldX,C$99t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},C$99t.prototype.apply1=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99h,C$99s){C$99t.appliedValid||C$99t.updateAppliedTransform();var C$99o,C$99a=C$99t.parent,C$99c=1/(C$99a.a*C$99a.d-C$99a.b*C$99a.c),C$99e=C$99e-C$99a.worldX,C$99i=C$99i-C$99a.worldY,C$99l=(C$99e*C$99a.d-C$99i*C$99a.b)*C$99c-C$99t.ax,C$99i=(C$99i*C$99a.a-C$99e*C$99a.c)*C$99c-C$99t.ay,C$99e=Math.atan2(C$99i,C$99l)*C$99q.MathUtils.radDeg-C$99t.ashearX-C$99t.arotation,C$99a=(C$99t.ascaleX<0&&(C$99e+=180),180<C$99e?C$99e-=360:C$99e<-180&&(C$99e+=360),C$99t.ascaleX),C$99c=C$99t.ascaleY;(C$99n||C$99r)&&(C$99o=C$99t.data.length*C$99a,C$99l=Math.sqrt(C$99l*C$99l+C$99i*C$99i),(C$99n&&C$99l<C$99o||C$99r&&C$99o<C$99l&&1e-4<C$99o)&&(C$99a*=C$99i=(C$99l/C$99o-1)*C$99s+1,C$99h&&(C$99c*=C$99i))),C$99t.updateWorldTransformWith(C$99t.ax,C$99t.ay,C$99t.arotation+C$99e*C$99s,C$99a,C$99c,C$99t.ashearX,C$99t.ashearY)},C$99t.prototype.apply2=function(C$99t,C$99e,C$99h,C$99u,C$99_,C$99d,C$99f,C$99p){if(0!=C$99p){C$99t.appliedValid||C$99t.updateAppliedTransform(),C$99e.appliedValid||C$99e.updateAppliedTransform();var C$99m,C$99y=C$99t.ax,C$99g=C$99t.ay,C$99v=C$99t.ascaleX,C$99x=C$99v,C$99b=C$99t.ascaleY,C$99A=C$99e.ascaleX,C$99C=0,C$99S=0,C$99T=0,C$99T=C$99v<0?(C$99v=-C$99v,C$99C=180,-1):(C$99C=0,1),C$99S=(C$99b<0&&(C$99b=-C$99b,C$99T=-C$99T),C$99A<0?(C$99A=-C$99A,180):0),C$99w=C$99e.ax,C$99E=0,C$99M=0,C$99I=0,C$99i=C$99t.a,C$99n=C$99t.b,C$99r=C$99t.c,C$99B=C$99t.d,C$99R=Math.abs(C$99v-C$99b)<=1e-4,C$99I=C$99R?(C$99M=C$99i*C$99w+C$99n*(C$99E=C$99e.ay)+C$99t.worldX,C$99r*C$99w+C$99B*C$99E+C$99t.worldY):(C$99E=0,C$99M=C$99i*C$99w+C$99t.worldX,C$99r*C$99w+C$99t.worldY),C$99s=C$99t.parent,C$99P=(C$99i=C$99s.a,C$99n=C$99s.b,C$99r=C$99s.c,1/(C$99i*(C$99B=C$99s.d)-C$99n*C$99r)),C$99D=C$99M-C$99s.worldX,C$99o=C$99I-C$99s.worldY,C$99M=(C$99D*C$99B-C$99o*C$99n)*C$99P-C$99y,C$99I=(C$99o*C$99i-C$99D*C$99r)*C$99P-C$99g,C$99a=Math.sqrt(C$99M*C$99M+C$99I*C$99I),C$99L=C$99e.data.length*C$99A;if(C$99a<1e-4)return this.apply1(C$99t,C$99h,C$99u,!1,C$99d,!1,C$99p),void C$99e.updateWorldTransformWith(C$99w,C$99E,0,C$99e.ascaleX,C$99e.ascaleY,C$99e.ashearX,C$99e.ashearY);var C$99V=((C$99D=C$99h-C$99s.worldX)*C$99B-(C$99o=C$99u-C$99s.worldY)*C$99n)*C$99P-C$99y,C$99O=(C$99o*C$99i-C$99D*C$99r)*C$99P-C$99g,C$99F=C$99V*C$99V+C$99O*C$99O;0!=C$99f&&(C$99f*=C$99v*(C$99A+1)/2,0<(C$99I=(C$99M=Math.sqrt(C$99F))-C$99a-C$99L*C$99v+C$99f)&&(C$99F=(C$99V-=(C$99h=(C$99I-C$99f*(1-(C$99h=Math.min(1,C$99I/(2*C$99f))-1)*C$99h))/C$99M)*C$99V)*C$99V+(C$99O-=C$99h*C$99O)*C$99O));C$99t:if(C$99R){var C$99c=(C$99F-C$99a*C$99a-(C$99L*=C$99v)*C$99L)/(2*C$99a*C$99L);C$99c<-1?C$99c=-1:1<C$99c&&(C$99c=1,C$99d&&(C$99x*=(Math.sqrt(C$99F)/(C$99a+C$99L)-1)*C$99p+1)),C$99m=Math.acos(C$99c)*C$99_,C$99i=C$99a+C$99L*C$99c,C$99n=C$99L*Math.sin(C$99m),C$99Y=Math.atan2(C$99O*C$99i-C$99V*C$99n,C$99V*C$99i+C$99O*C$99n)}else{var C$99N=(C$99i=C$99v*C$99L)*C$99i,C$99k=(C$99n=C$99b*C$99L)*C$99n,C$99G=Math.atan2(C$99O,C$99V),C$99c=-2*C$99k*C$99a,C$99z=C$99k-C$99N;if(0<=(C$99B=C$99c*C$99c-4*C$99z*(C$99r=C$99k*C$99a*C$99a+C$99N*C$99F-C$99N*C$99k))){var C$99l=Math.sqrt(C$99B),C$99c=(C$99l=-(C$99c+(C$99l=C$99c<0?-C$99l:C$99l))/2)/C$99z,C$99z=C$99r/C$99l,C$99l=Math.abs(C$99c)<Math.abs(C$99z)?C$99c:C$99z;if(C$99l*C$99l<=C$99F){C$99o=Math.sqrt(C$99F-C$99l*C$99l)*C$99_,C$99Y=C$99G-Math.atan2(C$99o,C$99l),C$99m=Math.atan2(C$99o/C$99b,(C$99l-C$99a)/C$99v);break C$99t}}var C$99c=C$99q.MathUtils.PI,C$99z=C$99a-C$99i,C$99l=C$99z*C$99z,C$99U=0,C$99W=0,C$99H=C$99a+C$99i,C$99j=C$99H*C$99H,C$99X=0;-1<=(C$99r=-C$99i*C$99a/(C$99N-C$99k))&&C$99r<=1&&(C$99r=Math.acos(C$99r),(C$99B=(C$99D=C$99i*Math.cos(C$99r)+C$99a)*C$99D+(C$99o=C$99n*Math.sin(C$99r))*C$99o)<C$99l&&(C$99c=C$99r,C$99l=C$99B,C$99z=C$99D,C$99U=C$99o),C$99j<C$99B&&(C$99W=C$99r,C$99j=C$99B,C$99H=C$99D,C$99X=C$99o)),C$99m=C$99F<=(C$99l+C$99j)/2?(C$99Y=C$99G-Math.atan2(C$99U*C$99_,C$99z),C$99c*C$99_):(C$99Y=C$99G-Math.atan2(C$99X*C$99_,C$99H),C$99W*C$99_)}var C$99Y,C$99u=Math.atan2(C$99E,C$99w)*C$99T,C$99s=C$99t.arotation;180<(C$99Y=(C$99Y-C$99u)*C$99q.MathUtils.radDeg+C$99C-C$99s)?C$99Y-=360:C$99Y<-180&&(C$99Y+=360),C$99t.updateWorldTransformWith(C$99y,C$99g,C$99s+C$99Y*C$99p,C$99x,C$99t.ascaleY,0,0),C$99s=C$99e.arotation,180<(C$99m=((C$99m+C$99u)*C$99q.MathUtils.radDeg-C$99e.ashearX)*C$99T+C$99S-C$99s)?C$99m-=360:C$99m<-180&&(C$99m+=360),C$99e.updateWorldTransformWith(C$99w,C$99E,C$99s+C$99m*C$99p,C$99e.ascaleX,C$99e.ascaleY,C$99e.ashearX,C$99e.ashearY)}else C$99e.updateWorldTransform()},C$99q.IkConstraint=C$99t}(C$99t=C$99t||{}),C$99e=C$99t=C$99t||{},C$99d=C$99e.ConstraintData,C$99V(C$99L,C$99d),C$99e.IkConstraintData=C$99L,function(C$99q){function C$99J(C$99t,C$99e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==C$99t)throw new Error("data cannot be null.");if(null==C$99e)throw new Error("skeleton cannot be null.");this.data=C$99t,this.bones=new Array;for(var C$99i=0,C$99n=C$99t.bones.length;C$99i<C$99n;C$99i++)this.bones.push(C$99e.findBone(C$99t.bones[C$99i].name));this.target=C$99e.findSlot(C$99t.target.name),this.position=C$99t.position,this.spacing=C$99t.spacing,this.rotateMix=C$99t.rotateMix,this.translateMix=C$99t.translateMix}C$99J.prototype.isActive=function(){return this.active},C$99J.prototype.apply=function(){this.update()},C$99J.prototype.update=function(){var C$99h=this.target.getAttachment();if(C$99h instanceof C$99q.PathAttachment){var C$99u=this.rotateMix,C$99_=this.translateMix,C$99d=0<C$99u;if(0<C$99_||C$99d){var C$99f=this.data,C$99p=C$99f.spacingMode==C$99q.SpacingMode.Percent,C$99m=C$99f.rotateMode,C$99y=C$99m==C$99q.RotateMode.Tangent,C$99g=C$99m==C$99q.RotateMode.ChainScale,C$99v=this.bones.length,C$99x=C$99y?C$99v:C$99v+1,C$99b=this.bones,C$99A=C$99q.Utils.setArraySize(this.spaces,C$99x),C$99C=null,C$99S=this.spacing;if(C$99g||!C$99p){C$99g&&(C$99C=C$99q.Utils.setArraySize(this.lengths,C$99v));for(var C$99T=C$99f.spacingMode==C$99q.SpacingMode.Length,C$99t=0,C$99w=C$99x-1;C$99t<C$99w;){var C$99E,C$99e=(C$99i=C$99b[C$99t]).data.length;C$99e<C$99J.epsilon?(C$99g&&(C$99C[C$99t]=0),C$99A[++C$99t]=0):C$99p?(C$99g&&(C$99r=C$99e*C$99i.a,C$99s=C$99e*C$99i.c,C$99E=Math.sqrt(C$99r*C$99r+C$99s*C$99s),C$99C[C$99t]=C$99E),C$99A[++C$99t]=C$99S):(C$99r=C$99e*C$99i.a,C$99s=C$99e*C$99i.c,C$99E=Math.sqrt(C$99r*C$99r+C$99s*C$99s),C$99g&&(C$99C[C$99t]=C$99E),C$99A[++C$99t]=(C$99T?C$99e+C$99S:C$99S)*C$99E/C$99e)}}else for(C$99t=1;C$99t<C$99x;C$99t++)C$99A[C$99t]=C$99S;var C$99M=this.computeWorldPositions(C$99h,C$99x,C$99y,C$99f.positionMode==C$99q.PositionMode.Percent,C$99p),C$99I=C$99M[0],C$99B=C$99M[1],C$99R=C$99f.offsetRotation,C$99P=!1;0==C$99R?C$99P=C$99m==C$99q.RotateMode.Chain:(C$99P=!1,C$99R*=0<(C$99n=this.target.bone).a*C$99n.d-C$99n.b*C$99n.c?C$99q.MathUtils.degRad:-C$99q.MathUtils.degRad);for(var C$99i,C$99t=0,C$99n=3;C$99t<C$99v;C$99t++,C$99n+=3){(C$99i=C$99b[C$99t]).worldX+=(C$99I-C$99i.worldX)*C$99_,C$99i.worldY+=(C$99B-C$99i.worldY)*C$99_;var C$99r,C$99s,C$99o,C$99D,C$99L,C$99V,C$99a,C$99c,C$99O,C$99l,C$99F=(C$99r=C$99M[C$99n])-C$99I,C$99N=(C$99s=C$99M[C$99n+1])-C$99B;!C$99g||0!=(C$99o=C$99C[C$99t])&&(C$99o=(Math.sqrt(C$99F*C$99F+C$99N*C$99N)/C$99o-1)*C$99u+1,C$99i.a*=C$99o,C$99i.c*=C$99o),C$99I=C$99r,C$99B=C$99s,C$99d&&(C$99o=C$99i.a,C$99D=C$99i.b,C$99L=C$99i.c,C$99V=C$99i.d,C$99c=C$99a=C$99l=0,C$99l=C$99y?C$99M[C$99n-1]:0==C$99A[C$99t+1]?C$99M[C$99n+2]:Math.atan2(C$99N,C$99F),C$99l-=Math.atan2(C$99L,C$99o),C$99P?(C$99a=Math.cos(C$99l),C$99c=Math.sin(C$99l),C$99I+=((C$99O=C$99i.data.length)*(C$99a*C$99o-C$99c*C$99L)-C$99F)*C$99u,C$99B+=(C$99O*(C$99c*C$99o+C$99a*C$99L)-C$99N)*C$99u):C$99l+=C$99R,C$99l>C$99q.MathUtils.PI?C$99l-=C$99q.MathUtils.PI2:C$99l<-C$99q.MathUtils.PI&&(C$99l+=C$99q.MathUtils.PI2),C$99l*=C$99u,C$99a=Math.cos(C$99l),C$99c=Math.sin(C$99l),C$99i.a=C$99a*C$99o-C$99c*C$99L,C$99i.b=C$99a*C$99D-C$99c*C$99V,C$99i.c=C$99c*C$99o+C$99a*C$99L,C$99i.d=C$99c*C$99D+C$99a*C$99V),C$99i.appliedValid=!1}}}},C$99J.prototype.computeWorldPositions=function(C$99t,C$99h,C$99u,C$99_,C$99d){var C$99f=this.target,C$99p=this.position,C$99m=this.spaces,C$99y=C$99q.Utils.setArraySize(this.positions,3*C$99h+2),C$99e=null,C$99g=C$99t.closed,C$99i=C$99t.worldVerticesLength,C$99v=C$99i/6,C$99x=C$99J.NONE;if(!C$99t.constantSpeed){var C$99b=C$99t.lengths,C$99A=C$99b[C$99v-=C$99g?1:2];if(C$99_&&(C$99p*=C$99A),C$99d)for(var C$99n=1;C$99n<C$99h;C$99n++)C$99m[C$99n]*=C$99A;for(var C$99e=C$99q.Utils.setArraySize(this.world,8),C$99n=0,C$99C=0,C$99r=0;C$99n<C$99h;C$99n++,C$99C+=3){var C$99s=C$99p+=C$99H=C$99m[C$99n];if(C$99g)(C$99s%=C$99A)<0&&(C$99s+=C$99A),C$99r=0;else{if(C$99s<0){C$99x!=C$99J.BEFORE&&(C$99x=C$99J.BEFORE,C$99t.computeWorldVertices(C$99f,2,4,C$99e,0,2)),this.addBeforePosition(C$99s,C$99e,0,C$99y,C$99C);continue}if(C$99A<C$99s){C$99x!=C$99J.AFTER&&(C$99x=C$99J.AFTER,C$99t.computeWorldVertices(C$99f,C$99i-6,4,C$99e,0,2)),this.addAfterPosition(C$99s-C$99A,C$99e,0,C$99y,C$99C);continue}}for(;;C$99r++){var C$99S=C$99b[C$99r];if(!(C$99S<C$99s)){0==C$99r?C$99s/=C$99S:C$99s=(C$99s-(C$99X=C$99b[C$99r-1]))/(C$99S-C$99X);break}}C$99r!=C$99x&&(C$99x=C$99r,C$99g&&C$99r==C$99v?(C$99t.computeWorldVertices(C$99f,C$99i-4,4,C$99e,0,2),C$99t.computeWorldVertices(C$99f,0,4,C$99e,4,2)):C$99t.computeWorldVertices(C$99f,6*C$99r+2,8,C$99e,0,2)),this.addCurvePosition(C$99s,C$99e[0],C$99e[1],C$99e[2],C$99e[3],C$99e[4],C$99e[5],C$99e[6],C$99e[7],C$99y,C$99C,C$99u||0<C$99n&&0==C$99H)}return C$99y}C$99g?(C$99e=C$99q.Utils.setArraySize(this.world,C$99i+=2),C$99t.computeWorldVertices(C$99f,2,C$99i-4,C$99e,0,2),C$99t.computeWorldVertices(C$99f,0,2,C$99e,C$99i-4,2),C$99e[C$99i-2]=C$99e[0],C$99e[C$99i-1]=C$99e[1]):(C$99v--,C$99e=C$99q.Utils.setArraySize(this.world,C$99i-=4),C$99t.computeWorldVertices(C$99f,2,C$99i,C$99e,0,2));for(var C$99T=C$99q.Utils.setArraySize(this.curves,C$99v),C$99o=0,C$99w=C$99e[0],C$99E=C$99e[1],C$99M=0,C$99I=0,C$99B=0,C$99R=0,C$99P=0,C$99D=0,C$99L=0,C$99V=0,C$99O=0,C$99F=0,C$99N=0,C$99k=0,C$99a=0,C$99c=0,C$99n=0,C$99G=2;C$99n<C$99v;C$99n++,C$99G+=6)C$99M=C$99e[C$99G],C$99I=C$99e[C$99G+1],C$99B=C$99e[C$99G+2],C$99R=C$99e[C$99G+3],C$99N=2*(C$99L=.1875*(C$99w-2*C$99M+C$99B))+(C$99O=.09375*(3*(C$99M-C$99B)-C$99w+(C$99P=C$99e[C$99G+4]))),C$99k=2*(C$99V=.1875*(C$99E-2*C$99I+C$99R))+(C$99F=.09375*(3*(C$99I-C$99R)-C$99E+(C$99D=C$99e[C$99G+5]))),C$99a=.75*(C$99M-C$99w)+C$99L+.16666667*C$99O,C$99c=.75*(C$99I-C$99E)+C$99V+.16666667*C$99F,C$99o+=Math.sqrt(C$99a*C$99a+C$99c*C$99c),C$99a+=C$99N,C$99c+=C$99k,C$99N+=C$99O,C$99k+=C$99F,C$99o+=Math.sqrt(C$99a*C$99a+C$99c*C$99c),C$99a+=C$99N,C$99c+=C$99k,C$99o+=Math.sqrt(C$99a*C$99a+C$99c*C$99c),C$99a+=C$99N+C$99O,C$99c+=C$99k+C$99F,C$99o+=Math.sqrt(C$99a*C$99a+C$99c*C$99c),C$99T[C$99n]=C$99o,C$99w=C$99P,C$99E=C$99D;if(C$99p*=C$99_?C$99o:C$99o/C$99t.lengths[C$99v-1],C$99d)for(C$99n=1;C$99n<C$99h;C$99n++)C$99m[C$99n]*=C$99o;for(var C$99z=this.segments,C$99U=0,C$99n=0,C$99C=0,C$99r=0,C$99W=0;C$99n<C$99h;C$99n++,C$99C+=3){var C$99H,C$99s=C$99p+=C$99H=C$99m[C$99n];if(C$99g)(C$99s%=C$99o)<0&&(C$99s+=C$99o),C$99r=0;else{if(C$99s<0){this.addBeforePosition(C$99s,C$99e,0,C$99y,C$99C);continue}if(C$99o<C$99s){this.addAfterPosition(C$99s-C$99o,C$99e,C$99i-4,C$99y,C$99C);continue}}for(;;C$99r++){var C$99j=C$99T[C$99r];if(!(C$99j<C$99s)){0==C$99r?C$99s/=C$99j:C$99s=(C$99s-(C$99X=C$99T[C$99r-1]))/(C$99j-C$99X);break}}if(C$99r!=C$99x){var C$99x=C$99r,C$99l=6*C$99r,C$99w=C$99e[C$99l],C$99E=C$99e[C$99l+1],C$99M=C$99e[C$99l+2],C$99I=C$99e[C$99l+3],C$99B=C$99e[C$99l+4],C$99R=C$99e[C$99l+5],C$99N=2*(C$99L=.03*(C$99w-2*C$99M+C$99B))+(C$99O=.006*(3*(C$99M-C$99B)-C$99w+(C$99P=C$99e[C$99l+6]))),C$99k=2*(C$99V=.03*(C$99E-2*C$99I+C$99R))+(C$99F=.006*(3*(C$99I-C$99R)-C$99E+(C$99D=C$99e[C$99l+7]))),C$99a=.3*(C$99M-C$99w)+C$99L+.16666667*C$99O,C$99c=.3*(C$99I-C$99E)+C$99V+.16666667*C$99F,C$99U=Math.sqrt(C$99a*C$99a+C$99c*C$99c);for(C$99z[0]=C$99U,C$99l=1;C$99l<8;C$99l++)C$99a+=C$99N,C$99c+=C$99k,C$99N+=C$99O,C$99k+=C$99F,C$99U+=Math.sqrt(C$99a*C$99a+C$99c*C$99c),C$99z[C$99l]=C$99U;C$99a+=C$99N,C$99c+=C$99k,C$99U+=Math.sqrt(C$99a*C$99a+C$99c*C$99c),C$99z[8]=C$99U,C$99a+=C$99N+C$99O,C$99c+=C$99k+C$99F,C$99U+=Math.sqrt(C$99a*C$99a+C$99c*C$99c),C$99z[9]=C$99U,C$99W=0}for(C$99s*=C$99U;;C$99W++){var C$99X,C$99Y=C$99z[C$99W];if(!(C$99Y<C$99s)){0==C$99W?C$99s/=C$99Y:C$99s=C$99W+(C$99s-(C$99X=C$99z[C$99W-1]))/(C$99Y-C$99X);break}}this.addCurvePosition(.1*C$99s,C$99w,C$99E,C$99M,C$99I,C$99B,C$99R,C$99P,C$99D,C$99y,C$99C,C$99u||0<C$99n&&0==C$99H)}return C$99y},C$99J.prototype.addBeforePosition=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99e[C$99i],C$99o=C$99e[C$99i+1],C$99a=C$99e[C$99i+2]-C$99s,C$99e=C$99e[C$99i+3]-C$99o,C$99i=Math.atan2(C$99e,C$99a);C$99n[C$99r]=C$99s+C$99t*Math.cos(C$99i),C$99n[C$99r+1]=C$99o+C$99t*Math.sin(C$99i),C$99n[C$99r+2]=C$99i},C$99J.prototype.addAfterPosition=function(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=C$99e[C$99i+2],C$99o=C$99e[C$99i+3],C$99a=C$99s-C$99e[C$99i],C$99e=C$99o-C$99e[C$99i+1],C$99i=Math.atan2(C$99e,C$99a);C$99n[C$99r]=C$99s+C$99t*Math.cos(C$99i),C$99n[C$99r+1]=C$99o+C$99t*Math.sin(C$99i),C$99n[C$99r+2]=C$99i},C$99J.prototype.addCurvePosition=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99h,C$99u,C$99_,C$99d,C$99s,C$99o,C$99f){if(0==C$99t||isNaN(C$99t))return C$99s[C$99o]=C$99e,C$99s[C$99o+1]=C$99i,void(C$99s[C$99o+2]=Math.atan2(C$99r-C$99i,C$99n-C$99e));var C$99p=C$99t*C$99t,C$99m=C$99p*C$99t,C$99a=1-C$99t,C$99y=C$99a*C$99a,C$99c=C$99y*C$99a,C$99g=C$99a*C$99t,C$99l=3*C$99g,C$99a=C$99a*C$99l,C$99l=C$99l*C$99t,C$99_=C$99e*C$99c+C$99n*C$99a+C$99h*C$99l+C$99_*C$99m,C$99c=C$99i*C$99c+C$99r*C$99a+C$99u*C$99l+C$99d*C$99m;C$99s[C$99o]=C$99_,C$99s[C$99o+1]=C$99c,C$99f&&(C$99s[C$99o+2]=C$99t<.001?Math.atan2(C$99r-C$99i,C$99n-C$99e):Math.atan2(C$99c-(C$99i*C$99y+C$99r*C$99g*2+C$99u*C$99p),C$99_-(C$99e*C$99y+C$99n*C$99g*2+C$99h*C$99p)))},C$99J.NONE=-1,C$99J.BEFORE=-2,C$99J.AFTER=-3,C$99J.epsilon=1e-5,C$99q.PathConstraint=C$99J}(C$99t=C$99t||{}),C$99e=C$99t=C$99t||{},C$99f=C$99e.ConstraintData,C$99V(C$99O,C$99f),C$99n=C$99O,C$99e.PathConstraintData=C$99n,(C$99n=C$99e.PositionMode||(C$99e.PositionMode={}))[C$99n.Fixed=0]="Fixed",C$99n[C$99n.Percent=1]="Percent",(C$99n=C$99e.SpacingMode||(C$99e.SpacingMode={}))[C$99n.Length=0]="Length",C$99n[C$99n.Fixed=1]="Fixed",C$99n[C$99n.Percent=2]="Percent",(C$99n=C$99e.RotateMode||(C$99e.RotateMode={}))[C$99n.Tangent=0]="Tangent",C$99n[C$99n.Chain=1]="Chain",C$99n[C$99n.ChainScale=2]="ChainScale",function(C$99t){C$99e.prototype.loaded=function(){var C$99t,C$99e=0;for(C$99t in this.assets)C$99e++;return C$99e};var C$99r=C$99e;function C$99e(C$99t){this.toLoad=new Array,this.assets={},this.clientId=C$99t}function C$99i(C$99t){void 0===C$99t&&(C$99t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=C$99t}C$99i.prototype.queueAsset=function(C$99t,C$99e,C$99i){var C$99n=this.clientAssets[C$99t];return null==C$99n&&(C$99n=new C$99r(C$99t),this.clientAssets[C$99t]=C$99n),null!==C$99e&&(C$99n.textureLoader=C$99e),C$99n.toLoad.push(C$99i),this.queuedAssets[C$99i]!==C$99i&&(this.queuedAssets[C$99i]=C$99i,!0)},C$99i.prototype.loadText=function(C$99t,C$99e){var C$99i,C$99n=this;C$99e=this.pathPrefix+C$99e,this.queueAsset(C$99t,null,C$99e)&&((C$99i=new XMLHttpRequest).onreadystatechange=function(){C$99i.readyState==XMLHttpRequest.DONE&&(200<=C$99i.status&&C$99i.status<300?C$99n.rawAssets[C$99e]=C$99i.responseText:C$99n.errors[C$99e]="Couldn't load text "+C$99e+": status "+C$99i.status+", "+C$99i.responseText)},C$99i.open("GET",C$99e,!0),C$99i.send())},C$99i.prototype.loadJson=function(C$99t,C$99e){var C$99i,C$99n=this;C$99e=this.pathPrefix+C$99e,this.queueAsset(C$99t,null,C$99e)&&((C$99i=new XMLHttpRequest).onreadystatechange=function(){C$99i.readyState==XMLHttpRequest.DONE&&(200<=C$99i.status&&C$99i.status<300?C$99n.rawAssets[C$99e]=JSON.parse(C$99i.responseText):C$99n.errors[C$99e]="Couldn't load text "+C$99e+": status "+C$99i.status+", "+C$99i.responseText)},C$99i.open("GET",C$99e,!0),C$99i.send())},C$99i.prototype.loadTexture=function(C$99t,C$99e,C$99i){var C$99n,C$99r=this;C$99i=this.pathPrefix+C$99i,this.queueAsset(C$99t,C$99e,C$99i)&&((C$99n=new Image).src=C$99i,C$99n.crossOrigin="anonymous",C$99n.onload=function(C$99t){C$99r.rawAssets[C$99i]=C$99n},C$99n.onerror=function(C$99t){C$99r.errors[C$99i]="Couldn't load image "+C$99i})},C$99i.prototype.get=function(C$99t,C$99e){C$99e=this.pathPrefix+C$99e;C$99t=this.clientAssets[C$99t];return null==C$99t||C$99t.assets[C$99e]},C$99i.prototype.updateClientAssets=function(C$99t){for(var C$99e=0;C$99e<C$99t.toLoad.length;C$99e++){var C$99i=C$99t.toLoad[C$99e],C$99n=C$99t.assets[C$99i];null!=C$99n||null!=(C$99n=this.rawAssets[C$99i])&&(C$99n instanceof HTMLImageElement?C$99t.assets[C$99i]=C$99t.textureLoader(C$99n):C$99t.assets[C$99i]=C$99n)}},C$99i.prototype.isLoadingComplete=function(C$99t){C$99t=this.clientAssets[C$99t];return null==C$99t||(this.updateClientAssets(C$99t),C$99t.toLoad.length==C$99t.loaded())},C$99i.prototype.dispose=function(){},C$99i.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},C$99i.prototype.getErrors=function(){return this.errors},C$99t.SharedAssetManager=C$99i}(C$99t=C$99t||{}),function(C$99g){function C$99t(C$99t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==C$99t)throw new Error("data cannot be null.");this.data=C$99t,this.bones=new Array;for(var C$99e=0;C$99e<C$99t.bones.length;C$99e++){var C$99i,C$99n=C$99t.bones[C$99e],C$99r=void 0;null==C$99n.parent?C$99r=new C$99g.Bone(C$99n,this,null):(C$99i=this.bones[C$99n.parent.index],C$99r=new C$99g.Bone(C$99n,this,C$99i),C$99i.children.push(C$99r)),this.bones.push(C$99r)}this.slots=new Array,this.drawOrder=new Array;for(C$99e=0;C$99e<C$99t.slots.length;C$99e++){var C$99s=C$99t.slots[C$99e],C$99r=this.bones[C$99s.boneData.index],C$99s=new C$99g.Slot(C$99s,C$99r);this.slots.push(C$99s),this.drawOrder.push(C$99s)}this.ikConstraints=new Array;for(C$99e=0;C$99e<C$99t.ikConstraints.length;C$99e++){var C$99o=C$99t.ikConstraints[C$99e];this.ikConstraints.push(new C$99g.IkConstraint(C$99o,this))}this.transformConstraints=new Array;for(C$99e=0;C$99e<C$99t.transformConstraints.length;C$99e++){var C$99a=C$99t.transformConstraints[C$99e];this.transformConstraints.push(new C$99g.TransformConstraint(C$99a,this))}this.pathConstraints=new Array;for(C$99e=0;C$99e<C$99t.pathConstraints.length;C$99e++){var C$99c=C$99t.pathConstraints[C$99e];this.pathConstraints.push(new C$99g.PathConstraint(C$99c,this))}this.color=new C$99g.Color(1,1,1,1),this.updateCache()}C$99t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var C$99t=this.bones,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)(C$99n=C$99t[C$99e]).sorted=C$99n.data.skinRequired,C$99n.active=!C$99n.sorted;if(null!=this.skin)for(var C$99h=this.skin.bones,C$99e=0,C$99i=this.skin.bones.length;C$99e<C$99i;C$99e++)for(var C$99n=this.bones[C$99h[C$99e].index];C$99n.sorted=!1,C$99n.active=!0,null!=(C$99n=C$99n.parent););var C$99r=this.ikConstraints,C$99s=this.transformConstraints,C$99o=this.pathConstraints,C$99a=C$99r.length,C$99u=C$99s.length,C$99_=C$99o.length,C$99d=C$99a+C$99u+C$99_;C$99t:for(C$99e=0;C$99e<C$99d;C$99e++){for(var C$99c=0;C$99c<C$99a;C$99c++)if((C$99l=C$99r[C$99c]).data.order==C$99e){this.sortIkConstraint(C$99l);continue C$99t}for(C$99c=0;C$99c<C$99u;C$99c++)if((C$99l=C$99s[C$99c]).data.order==C$99e){this.sortTransformConstraint(C$99l);continue C$99t}for(var C$99l,C$99c=0;C$99c<C$99_;C$99c++)if((C$99l=C$99o[C$99c]).data.order==C$99e){this.sortPathConstraint(C$99l);continue C$99t}}for(C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)this.sortBone(C$99t[C$99e])},C$99t.prototype.sortIkConstraint=function(C$99t){var C$99e,C$99i,C$99n;C$99t.active=C$99t.target.isActive()&&(!C$99t.data.skinRequired||null!=this.skin&&C$99g.Utils.contains(this.skin.constraints,C$99t.data,!0)),C$99t.active&&(C$99e=C$99t.target,this.sortBone(C$99e),C$99i=(C$99e=C$99t.bones)[0],this.sortBone(C$99i),1<C$99e.length&&(C$99n=C$99e[C$99e.length-1],-1<this._updateCache.indexOf(C$99n)||this.updateCacheReset.push(C$99n)),this._updateCache.push(C$99t),this.sortReset(C$99i.children),C$99e[C$99e.length-1].sorted=!0)},C$99t.prototype.sortPathConstraint=function(C$99t){if(C$99t.active=C$99t.target.bone.isActive()&&(!C$99t.data.skinRequired||null!=this.skin&&C$99g.Utils.contains(this.skin.constraints,C$99t.data,!0)),C$99t.active){var C$99e=C$99t.target,C$99i=C$99e.data.index,C$99n=C$99e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,C$99i,C$99n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,C$99i,C$99n);for(var C$99r=0,C$99s=this.data.skins.length;C$99r<C$99s;C$99r++)this.sortPathConstraintAttachment(this.data.skins[C$99r],C$99i,C$99n);for(var C$99e=C$99e.getAttachment(),C$99o=(C$99e instanceof C$99g.PathAttachment&&this.sortPathConstraintAttachmentWith(C$99e,C$99n),C$99t.bones),C$99a=C$99o.length,C$99r=0;C$99r<C$99a;C$99r++)this.sortBone(C$99o[C$99r]);this._updateCache.push(C$99t);for(C$99r=0;C$99r<C$99a;C$99r++)this.sortReset(C$99o[C$99r].children);for(C$99r=0;C$99r<C$99a;C$99r++)C$99o[C$99r].sorted=!0}},C$99t.prototype.sortTransformConstraint=function(C$99t){if(C$99t.active=C$99t.target.isActive()&&(!C$99t.data.skinRequired||null!=this.skin&&C$99g.Utils.contains(this.skin.constraints,C$99t.data,!0)),C$99t.active){this.sortBone(C$99t.target);var C$99e=C$99t.bones,C$99i=C$99e.length;if(C$99t.data.local)for(var C$99n=0;C$99n<C$99i;C$99n++){var C$99r=C$99e[C$99n];this.sortBone(C$99r.parent),-1<this._updateCache.indexOf(C$99r)||this.updateCacheReset.push(C$99r)}else for(C$99n=0;C$99n<C$99i;C$99n++)this.sortBone(C$99e[C$99n]);this._updateCache.push(C$99t);for(var C$99s=0;C$99s<C$99i;C$99s++)this.sortReset(C$99e[C$99s].children);for(C$99s=0;C$99s<C$99i;C$99s++)C$99e[C$99s].sorted=!0}},C$99t.prototype.sortPathConstraintAttachment=function(C$99t,C$99e,C$99i){var C$99n=C$99t.attachments[C$99e];if(C$99n)for(var C$99r in C$99n)this.sortPathConstraintAttachmentWith(C$99n[C$99r],C$99i)},C$99t.prototype.sortPathConstraintAttachmentWith=function(C$99t,C$99e){if(C$99t instanceof C$99g.PathAttachment){var C$99i=C$99t.bones;if(null==C$99i)this.sortBone(C$99e);else for(var C$99n=this.bones,C$99r=0;C$99r<C$99i.length;)for(var C$99s=C$99i[C$99r++],C$99o=C$99r+C$99s;C$99r<C$99o;C$99r++){var C$99a=C$99i[C$99r];this.sortBone(C$99n[C$99a])}}},C$99t.prototype.sortBone=function(C$99t){var C$99e;C$99t.sorted||(null!=(C$99e=C$99t.parent)&&this.sortBone(C$99e),C$99t.sorted=!0,this._updateCache.push(C$99t))},C$99t.prototype.sortReset=function(C$99t){for(var C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e];C$99n.active&&(C$99n.sorted&&this.sortReset(C$99n.children),C$99n.sorted=!1)}},C$99t.prototype.updateWorldTransform=function(){for(var C$99t=this.updateCacheReset,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++){var C$99n=C$99t[C$99e];C$99n.ax=C$99n.x,C$99n.ay=C$99n.y,C$99n.arotation=C$99n.rotation,C$99n.ascaleX=C$99n.scaleX,C$99n.ascaleY=C$99n.scaleY,C$99n.ashearX=C$99n.shearX,C$99n.ashearY=C$99n.shearY,C$99n.appliedValid=!0}for(var C$99r=this._updateCache,C$99e=0,C$99i=C$99r.length;C$99e<C$99i;C$99e++)C$99r[C$99e].update()},C$99t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},C$99t.prototype.setBonesToSetupPose=function(){for(var C$99t=this.bones,C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)C$99t[C$99e].setToSetupPose();for(var C$99n=this.ikConstraints,C$99e=0,C$99i=C$99n.length;C$99e<C$99i;C$99e++)(C$99a=C$99n[C$99e]).mix=C$99a.data.mix,C$99a.softness=C$99a.data.softness,C$99a.bendDirection=C$99a.data.bendDirection,C$99a.compress=C$99a.data.compress,C$99a.stretch=C$99a.data.stretch;for(var C$99r=this.transformConstraints,C$99e=0,C$99i=C$99r.length;C$99e<C$99i;C$99e++){var C$99s=(C$99a=C$99r[C$99e]).data;C$99a.rotateMix=C$99s.rotateMix,C$99a.translateMix=C$99s.translateMix,C$99a.scaleMix=C$99s.scaleMix,C$99a.shearMix=C$99s.shearMix}for(var C$99o=this.pathConstraints,C$99e=0,C$99i=C$99o.length;C$99e<C$99i;C$99e++){var C$99a,C$99s=(C$99a=C$99o[C$99e]).data;C$99a.position=C$99s.position,C$99a.spacing=C$99s.spacing,C$99a.rotateMix=C$99s.rotateMix,C$99a.translateMix=C$99s.translateMix}},C$99t.prototype.setSlotsToSetupPose=function(){var C$99t=this.slots;C$99g.Utils.arrayCopy(C$99t,0,this.drawOrder,0,C$99t.length);for(var C$99e=0,C$99i=C$99t.length;C$99e<C$99i;C$99e++)C$99t[C$99e].setToSetupPose()},C$99t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},C$99t.prototype.findBone=function(C$99t){if(null==C$99t)throw new Error("boneName cannot be null.");for(var C$99e=this.bones,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.data.name==C$99t)return C$99r}return null},C$99t.prototype.findBoneIndex=function(C$99t){if(null==C$99t)throw new Error("boneName cannot be null.");for(var C$99e=this.bones,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i].data.name==C$99t)return C$99i;return-1},C$99t.prototype.findSlot=function(C$99t){if(null==C$99t)throw new Error("slotName cannot be null.");for(var C$99e=this.slots,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.data.name==C$99t)return C$99r}return null},C$99t.prototype.findSlotIndex=function(C$99t){if(null==C$99t)throw new Error("slotName cannot be null.");for(var C$99e=this.slots,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i].data.name==C$99t)return C$99i;return-1},C$99t.prototype.setSkinByName=function(C$99t){var C$99e=this.data.findSkin(C$99t);if(null==C$99e)throw new Error("Skin not found: "+C$99t);this.setSkin(C$99e)},C$99t.prototype.setSkin=function(C$99t){if(C$99t!=this.skin){if(null!=C$99t)if(null!=this.skin)C$99t.attachAll(this,this.skin);else for(var C$99e=this.slots,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i],C$99s=C$99r.data.attachmentName;null==C$99s||null!=(C$99s=C$99t.getAttachment(C$99i,C$99s))&&C$99r.setAttachment(C$99s)}this.skin=C$99t,this.updateCache()}},C$99t.prototype.getAttachmentByName=function(C$99t,C$99e){return this.getAttachment(this.data.findSlotIndex(C$99t),C$99e)},C$99t.prototype.getAttachment=function(C$99t,C$99e){if(null==C$99e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var C$99i=this.skin.getAttachment(C$99t,C$99e);if(null!=C$99i)return C$99i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(C$99t,C$99e):null},C$99t.prototype.setAttachment=function(C$99t,C$99e){if(null==C$99t)throw new Error("slotName cannot be null.");for(var C$99i=this.slots,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++){var C$99s=C$99i[C$99n];if(C$99s.data.name==C$99t){var C$99o=null;if(null!=C$99e&&null==(C$99o=this.getAttachment(C$99n,C$99e)))throw new Error("Attachment not found: "+C$99e+", for slot: "+C$99t);return void C$99s.setAttachment(C$99o)}}throw new Error("Slot not found: "+C$99t)},C$99t.prototype.findIkConstraint=function(C$99t){if(null==C$99t)throw new Error("constraintName cannot be null.");for(var C$99e=this.ikConstraints,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.data.name==C$99t)return C$99r}return null},C$99t.prototype.findTransformConstraint=function(C$99t){if(null==C$99t)throw new Error("constraintName cannot be null.");for(var C$99e=this.transformConstraints,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.data.name==C$99t)return C$99r}return null},C$99t.prototype.findPathConstraint=function(C$99t){if(null==C$99t)throw new Error("constraintName cannot be null.");for(var C$99e=this.pathConstraints,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.data.name==C$99t)return C$99r}return null},C$99t.prototype.getBounds=function(C$99t,C$99h,C$99e){if(void 0===C$99e&&(C$99e=new Array(2)),null==C$99t)throw new Error("offset cannot be null.");if(null==C$99h)throw new Error("size cannot be null.");for(var C$99u=this.drawOrder,C$99i=Number.POSITIVE_INFINITY,C$99n=Number.POSITIVE_INFINITY,C$99_=Number.NEGATIVE_INFINITY,C$99d=Number.NEGATIVE_INFINITY,C$99r=0,C$99f=C$99u.length;C$99r<C$99f;C$99r++){var C$99s=C$99u[C$99r];if(C$99s.bone.active){var C$99o=0,C$99a=null,C$99c=C$99s.getAttachment();if(C$99c instanceof C$99g.RegionAttachment?(C$99a=C$99g.Utils.setArraySize(C$99e,C$99o=8,0),C$99c.computeWorldVertices(C$99s.bone,C$99a,0,2)):C$99c instanceof C$99g.MeshAttachment&&(C$99o=(C$99c=C$99c).worldVerticesLength,C$99a=C$99g.Utils.setArraySize(C$99e,C$99o,0),C$99c.computeWorldVertices(C$99s,0,C$99o,C$99a,0,2)),null!=C$99a)for(var C$99l=0,C$99p=C$99a.length;C$99l<C$99p;C$99l+=2)var C$99m=C$99a[C$99l],C$99y=C$99a[C$99l+1],C$99i=Math.min(C$99i,C$99m),C$99n=Math.min(C$99n,C$99y),C$99_=Math.max(C$99_,C$99m),C$99d=Math.max(C$99d,C$99y)}}C$99t.set(C$99i,C$99n),C$99h.set(C$99_-C$99i,C$99d-C$99n)},C$99t.prototype.update=function(C$99t){this.time+=C$99t},C$99g.Skeleton=C$99t}(C$99t=C$99t||{});var C$99H=C$99t=C$99t||{},C$99e=(C$99j.prototype.readSkeletonData=function(C$99h){for(var C$99t=this.scale,C$99e=new C$99H.SkeletonData,C$99i=(C$99e.name="",new C$99F(C$99h)),C$99u=(C$99e.hash=C$99i.readString(),C$99e.version=C$99i.readString(),C$99e.x=C$99i.readFloat(),C$99e.y=C$99i.readFloat(),C$99e.width=C$99i.readFloat(),C$99e.height=C$99i.readFloat(),C$99i.readBoolean()),C$99n=(C$99u&&(C$99e.fps=C$99i.readFloat(),C$99e.imagesPath=C$99i.readString(),C$99e.audioPath=C$99i.readString()),0),C$99n=C$99i.readInt(!0),C$99r=0;C$99r<C$99n;C$99r++)C$99i.strings.push(C$99i.readString());C$99n=C$99i.readInt(!0);for(C$99r=0;C$99r<C$99n;C$99r++){var C$99_=C$99i.readString(),C$99d=0==C$99r?null:C$99e.bones[C$99i.readInt(!0)];(C$99s=new C$99H.BoneData(C$99r,C$99_,C$99d)).rotation=C$99i.readFloat(),C$99s.x=C$99i.readFloat()*C$99t,C$99s.y=C$99i.readFloat()*C$99t,C$99s.scaleX=C$99i.readFloat(),C$99s.scaleY=C$99i.readFloat(),C$99s.shearX=C$99i.readFloat(),C$99s.shearY=C$99i.readFloat(),C$99s.length=C$99i.readFloat()*C$99t,C$99s.transformMode=C$99j.TransformModeValues[C$99i.readInt(!0)],C$99s.skinRequired=C$99i.readBoolean(),C$99u&&C$99H.Color.rgba8888ToColor(C$99s.color,C$99i.readInt32()),C$99e.bones.push(C$99s)}C$99n=C$99i.readInt(!0);for(C$99r=0;C$99r<C$99n;C$99r++){var C$99f=C$99i.readString(),C$99p=C$99e.bones[C$99i.readInt(!0)],C$99s=new C$99H.SlotData(C$99r,C$99f,C$99p),C$99f=(C$99H.Color.rgba8888ToColor(C$99s.color,C$99i.readInt32()),C$99i.readInt32());-1!=C$99f&&C$99H.Color.rgb888ToColor(C$99s.darkColor=new C$99H.Color,C$99f),C$99s.attachmentName=C$99i.readStringRef(),C$99s.blendMode=C$99j.BlendModeValues[C$99i.readInt(!0)],C$99e.slots.push(C$99s)}C$99n=C$99i.readInt(!0);for(var C$99r=0,C$99o=void 0;C$99r<C$99n;C$99r++){(C$99s=new C$99H.IkConstraintData(C$99i.readString())).order=C$99i.readInt(!0),C$99s.skinRequired=C$99i.readBoolean(),C$99o=C$99i.readInt(!0);for(var C$99a=0;C$99a<C$99o;C$99a++)C$99s.bones.push(C$99e.bones[C$99i.readInt(!0)]);C$99s.target=C$99e.bones[C$99i.readInt(!0)],C$99s.mix=C$99i.readFloat(),C$99s.softness=C$99i.readFloat()*C$99t,C$99s.bendDirection=C$99i.readByte(),C$99s.compress=C$99i.readBoolean(),C$99s.stretch=C$99i.readBoolean(),C$99s.uniform=C$99i.readBoolean(),C$99e.ikConstraints.push(C$99s)}C$99n=C$99i.readInt(!0);for(C$99r=0,C$99o=void 0;C$99r<C$99n;C$99r++){(C$99s=new C$99H.TransformConstraintData(C$99i.readString())).order=C$99i.readInt(!0),C$99s.skinRequired=C$99i.readBoolean(),C$99o=C$99i.readInt(!0);for(C$99a=0;C$99a<C$99o;C$99a++)C$99s.bones.push(C$99e.bones[C$99i.readInt(!0)]);C$99s.target=C$99e.bones[C$99i.readInt(!0)],C$99s.local=C$99i.readBoolean(),C$99s.relative=C$99i.readBoolean(),C$99s.offsetRotation=C$99i.readFloat(),C$99s.offsetX=C$99i.readFloat()*C$99t,C$99s.offsetY=C$99i.readFloat()*C$99t,C$99s.offsetScaleX=C$99i.readFloat(),C$99s.offsetScaleY=C$99i.readFloat(),C$99s.offsetShearY=C$99i.readFloat(),C$99s.rotateMix=C$99i.readFloat(),C$99s.translateMix=C$99i.readFloat(),C$99s.scaleMix=C$99i.readFloat(),C$99s.shearMix=C$99i.readFloat(),C$99e.transformConstraints.push(C$99s)}C$99n=C$99i.readInt(!0);for(C$99r=0,C$99o=void 0;C$99r<C$99n;C$99r++){(C$99s=new C$99H.PathConstraintData(C$99i.readString())).order=C$99i.readInt(!0),C$99s.skinRequired=C$99i.readBoolean(),C$99o=C$99i.readInt(!0);for(C$99a=0;C$99a<C$99o;C$99a++)C$99s.bones.push(C$99e.bones[C$99i.readInt(!0)]);C$99s.target=C$99e.slots[C$99i.readInt(!0)],C$99s.positionMode=C$99j.PositionModeValues[C$99i.readInt(!0)],C$99s.spacingMode=C$99j.SpacingModeValues[C$99i.readInt(!0)],C$99s.rotateMode=C$99j.RotateModeValues[C$99i.readInt(!0)],C$99s.offsetRotation=C$99i.readFloat(),C$99s.position=C$99i.readFloat(),C$99s.positionMode==C$99H.PositionMode.Fixed&&(C$99s.position*=C$99t),C$99s.spacing=C$99i.readFloat(),C$99s.spacingMode!=C$99H.SpacingMode.Length&&C$99s.spacingMode!=C$99H.SpacingMode.Fixed||(C$99s.spacing*=C$99t),C$99s.rotateMix=C$99i.readFloat(),C$99s.translateMix=C$99i.readFloat(),C$99e.pathConstraints.push(C$99s)}var C$99h=this.readSkin(C$99i,C$99e,!0,C$99u),C$99r=(null!=C$99h&&(C$99e.defaultSkin=C$99h,C$99e.skins.push(C$99h)),C$99e.skins.length);for(C$99H.Utils.setArraySize(C$99e.skins,C$99n=C$99r+C$99i.readInt(!0));C$99r<C$99n;C$99r++)C$99e.skins[C$99r]=this.readSkin(C$99i,C$99e,!1,C$99u);C$99n=this.linkedMeshes.length;for(C$99r=0;C$99r<C$99n;C$99r++){var C$99c=this.linkedMeshes[C$99r],C$99l=null==C$99c.skin?C$99e.defaultSkin:C$99e.findSkin(C$99c.skin);if(null==C$99l)throw new Error("Skin not found: "+C$99c.skin);C$99l=C$99l.getAttachment(C$99c.slotIndex,C$99c.parent);if(null==C$99l)throw new Error("Parent mesh not found: "+C$99c.parent);C$99c.mesh.deformAttachment=C$99c.inheritDeform?C$99l:C$99c.mesh,C$99c.mesh.setParentMesh(C$99l),C$99c.mesh.updateUVs()}this.linkedMeshes.length=0,C$99n=C$99i.readInt(!0);for(C$99r=0;C$99r<C$99n;C$99r++)(C$99s=new C$99H.EventData(C$99i.readStringRef())).intValue=C$99i.readInt(!1),C$99s.floatValue=C$99i.readFloat(),C$99s.stringValue=C$99i.readString(),C$99s.audioPath=C$99i.readString(),null!=C$99s.audioPath&&(C$99s.volume=C$99i.readFloat(),C$99s.balance=C$99i.readFloat()),C$99e.events.push(C$99s);C$99n=C$99i.readInt(!0);for(C$99r=0;C$99r<C$99n;C$99r++)C$99e.animations.push(this.readAnimation(C$99i,C$99i.readString(),C$99e));return C$99e},C$99j.prototype.readSkin=function(C$99t,C$99e,C$99h,C$99u){var C$99i=null,C$99n=0;if(C$99h){if(0==(C$99n=C$99t.readInt(!0)))return null;C$99i=new C$99H.Skin("default")}else{(C$99i=new C$99H.Skin(C$99t.readStringRef())).bones.length=C$99t.readInt(!0);for(var C$99r=0,C$99s=C$99i.bones.length;C$99r<C$99s;C$99r++)C$99i.bones[C$99r]=C$99e.bones[C$99t.readInt(!0)];for(C$99r=0,C$99s=C$99t.readInt(!0);C$99r<C$99s;C$99r++)C$99i.constraints.push(C$99e.ikConstraints[C$99t.readInt(!0)]);for(C$99r=0,C$99s=C$99t.readInt(!0);C$99r<C$99s;C$99r++)C$99i.constraints.push(C$99e.transformConstraints[C$99t.readInt(!0)]);for(C$99r=0,C$99s=C$99t.readInt(!0);C$99r<C$99s;C$99r++)C$99i.constraints.push(C$99e.pathConstraints[C$99t.readInt(!0)]);C$99n=C$99t.readInt(!0)}for(C$99r=0;C$99r<C$99n;C$99r++)for(var C$99o=C$99t.readInt(!0),C$99a=0,C$99_=C$99t.readInt(!0);C$99a<C$99_;C$99a++){var C$99c=C$99t.readStringRef(),C$99l=this.readAttachment(C$99t,C$99e,C$99i,C$99o,C$99c,C$99u);null!=C$99l&&C$99i.setAttachment(C$99o,C$99c,C$99l)}return C$99i},C$99j.prototype.readAttachment=function(C$99t,C$99h,C$99u,C$99_,C$99d,C$99e){var C$99i=this.scale,C$99n=C$99t.readStringRef(),C$99d=(null==C$99n&&(C$99n=C$99d),C$99t.readByte());switch(C$99j.AttachmentTypeValues[C$99d]){case C$99H.AttachmentType.Region:var C$99r=C$99t.readStringRef(),C$99f=C$99t.readFloat(),C$99p=C$99t.readFloat(),C$99m=C$99t.readFloat(),C$99y=C$99t.readFloat(),C$99s=C$99t.readFloat(),C$99g=C$99t.readFloat(),C$99o=C$99t.readFloat(),C$99v=C$99t.readInt32(),C$99a=(null==C$99r&&(C$99r=C$99n),this.attachmentLoader.newRegionAttachment(C$99u,C$99n,C$99r));return null==C$99a?null:(C$99a.path=C$99r,C$99a.x=C$99p*C$99i,C$99a.y=C$99m*C$99i,C$99a.scaleX=C$99y,C$99a.scaleY=C$99s,C$99a.rotation=C$99f,C$99a.width=C$99g*C$99i,C$99a.height=C$99o*C$99i,C$99H.Color.rgba8888ToColor(C$99a.color,C$99v),C$99a.updateOffset(),C$99a);case C$99H.AttachmentType.BoundingBox:var C$99c=C$99t.readInt(!0),C$99x=this.readVertices(C$99t,C$99c),C$99v=C$99e?C$99t.readInt32():0,C$99y=this.attachmentLoader.newBoundingBoxAttachment(C$99u,C$99n);return null==C$99y?null:(C$99y.worldVerticesLength=C$99c<<1,C$99y.vertices=C$99x.vertices,C$99y.bones=C$99x.bones,C$99e&&C$99H.Color.rgba8888ToColor(C$99y.color,C$99v),C$99y);case C$99H.AttachmentType.Mesh:var C$99r=C$99t.readStringRef(),C$99v=C$99t.readInt32(),C$99c=C$99t.readInt(!0),C$99s=this.readFloatArray(C$99t,C$99c<<1,1),C$99a=this.readShortArray(C$99t),C$99x=this.readVertices(C$99t,C$99c),C$99y=C$99t.readInt(!0),C$99b=null,C$99g=0,C$99o=0;return C$99e&&(C$99b=this.readShortArray(C$99t),C$99g=C$99t.readFloat(),C$99o=C$99t.readFloat()),null==C$99r&&(C$99r=C$99n),null==(C$99l=this.attachmentLoader.newMeshAttachment(C$99u,C$99n,C$99r))?null:(C$99l.path=C$99r,C$99H.Color.rgba8888ToColor(C$99l.color,C$99v),C$99l.bones=C$99x.bones,C$99l.vertices=C$99x.vertices,C$99l.worldVerticesLength=C$99c<<1,C$99l.triangles=C$99a,C$99l.regionUVs=C$99s,C$99l.updateUVs(),C$99l.hullLength=C$99y<<1,C$99e&&(C$99l.edges=C$99b,C$99l.width=C$99g*C$99i,C$99l.height=C$99o*C$99i),C$99l);case C$99H.AttachmentType.LinkedMesh:var C$99l,C$99r=C$99t.readStringRef(),C$99v=C$99t.readInt32(),C$99a=C$99t.readStringRef(),C$99s=C$99t.readStringRef(),C$99y=C$99t.readBoolean(),C$99g=0,C$99o=0;return C$99e&&(C$99g=C$99t.readFloat(),C$99o=C$99t.readFloat()),null==C$99r&&(C$99r=C$99n),null==(C$99l=this.attachmentLoader.newMeshAttachment(C$99u,C$99n,C$99r))?null:(C$99l.path=C$99r,C$99H.Color.rgba8888ToColor(C$99l.color,C$99v),C$99e&&(C$99l.width=C$99g*C$99i,C$99l.height=C$99o*C$99i),this.linkedMeshes.push(new C$99k(C$99l,C$99a,C$99_,C$99s,C$99y)),C$99l);case C$99H.AttachmentType.Path:for(var C$99b=C$99t.readBoolean(),C$99g=C$99t.readBoolean(),C$99c=C$99t.readInt(!0),C$99x=this.readVertices(C$99t,C$99c),C$99A=C$99H.Utils.newArray(C$99c/3,0),C$99C=0,C$99S=C$99A.length;C$99C<C$99S;C$99C++)C$99A[C$99C]=C$99t.readFloat()*C$99i;C$99v=C$99e?C$99t.readInt32():0;return null==(C$99r=this.attachmentLoader.newPathAttachment(C$99u,C$99n))?null:(C$99r.closed=C$99b,C$99r.constantSpeed=C$99g,C$99r.worldVerticesLength=C$99c<<1,C$99r.vertices=C$99x.vertices,C$99r.bones=C$99x.bones,C$99r.lengths=C$99A,C$99e&&C$99H.Color.rgba8888ToColor(C$99r.color,C$99v),C$99r);case C$99H.AttachmentType.Point:C$99f=C$99t.readFloat(),C$99p=C$99t.readFloat(),C$99m=C$99t.readFloat(),C$99v=C$99e?C$99t.readInt32():0,C$99o=this.attachmentLoader.newPointAttachment(C$99u,C$99n);return null==C$99o?null:(C$99o.x=C$99p*C$99i,C$99o.y=C$99m*C$99i,C$99o.rotation=C$99f,C$99e&&C$99H.Color.rgba8888ToColor(C$99o.color,C$99v),C$99o);case C$99H.AttachmentType.Clipping:C$99a=C$99t.readInt(!0),C$99c=C$99t.readInt(!0),C$99x=this.readVertices(C$99t,C$99c),C$99v=C$99e?C$99t.readInt32():0,C$99s=this.attachmentLoader.newClippingAttachment(C$99u,C$99n);return null==C$99s?null:(C$99s.endSlot=C$99h.slots[C$99a],C$99s.worldVerticesLength=C$99c<<1,C$99s.vertices=C$99x.vertices,C$99s.bones=C$99x.bones,C$99e&&C$99H.Color.rgba8888ToColor(C$99s.color,C$99v),C$99s)}return null},C$99j.prototype.readVertices=function(C$99t,C$99e){var C$99i=C$99e<<1,C$99n=new C$99G,C$99r=this.scale;if(!C$99t.readBoolean())return C$99n.vertices=this.readFloatArray(C$99t,C$99i,C$99r),C$99n;for(var C$99s=new Array,C$99o=new Array,C$99a=0;C$99a<C$99e;C$99a++){var C$99c=C$99t.readInt(!0);C$99o.push(C$99c);for(var C$99l=0;C$99l<C$99c;C$99l++)C$99o.push(C$99t.readInt(!0)),C$99s.push(C$99t.readFloat()*C$99r),C$99s.push(C$99t.readFloat()*C$99r),C$99s.push(C$99t.readFloat())}return C$99n.vertices=C$99H.Utils.toFloatArray(C$99s),C$99n.bones=C$99o,C$99n},C$99j.prototype.readFloatArray=function(C$99t,C$99e,C$99i){var C$99n=new Array(C$99e);if(1==C$99i)for(var C$99r=0;C$99r<C$99e;C$99r++)C$99n[C$99r]=C$99t.readFloat();else for(C$99r=0;C$99r<C$99e;C$99r++)C$99n[C$99r]=C$99t.readFloat()*C$99i;return C$99n},C$99j.prototype.readShortArray=function(C$99t){for(var C$99e=C$99t.readInt(!0),C$99i=new Array(C$99e),C$99n=0;C$99n<C$99e;C$99n++)C$99i[C$99n]=C$99t.readShort();return C$99i},C$99j.prototype.readAnimation=function(C$99t,C$99h,C$99u){for(var C$99e=new Array,C$99_=this.scale,C$99i=0,C$99d=new C$99H.Color,C$99f=new C$99H.Color,C$99n=0,C$99r=C$99t.readInt(!0);C$99n<C$99r;C$99n++)for(var C$99p=C$99t.readInt(!0),C$99s=0,C$99m=C$99t.readInt(!0);C$99s<C$99m;C$99s++){var C$99y=C$99t.readByte(),C$99o=C$99t.readInt(!0);switch(C$99y){case C$99j.SLOT_ATTACHMENT:(C$99c=new C$99H.AttachmentTimeline(C$99o)).slotIndex=C$99p;for(var C$99a=0;C$99a<C$99o;C$99a++)C$99c.setFrame(C$99a,C$99t.readFloat(),C$99t.readStringRef());C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[C$99o-1]);break;case C$99j.SLOT_COLOR:(C$99c=new C$99H.ColorTimeline(C$99o)).slotIndex=C$99p;for(C$99a=0;C$99a<C$99o;C$99a++){var C$99g=C$99t.readFloat();C$99H.Color.rgba8888ToColor(C$99d,C$99t.readInt32()),C$99c.setFrame(C$99a,C$99g,C$99d.r,C$99d.g,C$99d.b,C$99d.a),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c)}C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.ColorTimeline.ENTRIES]);break;case C$99j.SLOT_TWO_COLOR:(C$99c=new C$99H.TwoColorTimeline(C$99o)).slotIndex=C$99p;for(C$99a=0;C$99a<C$99o;C$99a++){C$99g=C$99t.readFloat();C$99H.Color.rgba8888ToColor(C$99d,C$99t.readInt32()),C$99H.Color.rgb888ToColor(C$99f,C$99t.readInt32()),C$99c.setFrame(C$99a,C$99g,C$99d.r,C$99d.g,C$99d.b,C$99d.a,C$99f.r,C$99f.g,C$99f.b),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c)}C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.TwoColorTimeline.ENTRIES])}}for(C$99n=0,C$99r=C$99t.readInt(!0);C$99n<C$99r;C$99n++)for(var C$99v=C$99t.readInt(!0),C$99s=0,C$99m=C$99t.readInt(!0);C$99s<C$99m;C$99s++){C$99y=C$99t.readByte(),C$99o=C$99t.readInt(!0);switch(C$99y){case C$99j.BONE_ROTATE:(C$99c=new C$99H.RotateTimeline(C$99o)).boneIndex=C$99v;for(C$99a=0;C$99a<C$99o;C$99a++)C$99c.setFrame(C$99a,C$99t.readFloat(),C$99t.readFloat()),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c);C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.RotateTimeline.ENTRIES]);break;case C$99j.BONE_TRANSLATE:case C$99j.BONE_SCALE:case C$99j.BONE_SHEAR:var C$99c=void 0,C$99x=1;C$99y==C$99j.BONE_SCALE?C$99c=new C$99H.ScaleTimeline(C$99o):C$99y==C$99j.BONE_SHEAR?C$99c=new C$99H.ShearTimeline(C$99o):(C$99c=new C$99H.TranslateTimeline(C$99o),C$99x=C$99_),C$99c.boneIndex=C$99v;for(C$99a=0;C$99a<C$99o;C$99a++)C$99c.setFrame(C$99a,C$99t.readFloat(),C$99t.readFloat()*C$99x,C$99t.readFloat()*C$99x),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c);C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.TranslateTimeline.ENTRIES])}}for(C$99n=0,C$99r=C$99t.readInt(!0);C$99n<C$99r;C$99n++){var C$99b=C$99t.readInt(!0),C$99o=C$99t.readInt(!0);(C$99c=new C$99H.IkConstraintTimeline(C$99o)).ikConstraintIndex=C$99b;for(C$99a=0;C$99a<C$99o;C$99a++)C$99c.setFrame(C$99a,C$99t.readFloat(),C$99t.readFloat(),C$99t.readFloat()*C$99_,C$99t.readByte(),C$99t.readBoolean(),C$99t.readBoolean()),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c);C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.IkConstraintTimeline.ENTRIES])}for(C$99n=0,C$99r=C$99t.readInt(!0);C$99n<C$99r;C$99n++){C$99b=C$99t.readInt(!0),C$99o=C$99t.readInt(!0);(C$99c=new C$99H.TransformConstraintTimeline(C$99o)).transformConstraintIndex=C$99b;for(C$99a=0;C$99a<C$99o;C$99a++)C$99c.setFrame(C$99a,C$99t.readFloat(),C$99t.readFloat(),C$99t.readFloat(),C$99t.readFloat(),C$99t.readFloat()),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c);C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.TransformConstraintTimeline.ENTRIES])}for(C$99n=0,C$99r=C$99t.readInt(!0);C$99n<C$99r;C$99n++)for(var C$99b=C$99t.readInt(!0),C$99A=C$99u.pathConstraints[C$99b],C$99s=0,C$99m=C$99t.readInt(!0);C$99s<C$99m;C$99s++){C$99y=C$99t.readByte(),C$99o=C$99t.readInt(!0);switch(C$99y){case C$99j.PATH_POSITION:case C$99j.PATH_SPACING:var C$99c=void 0,C$99x=1;C$99y==C$99j.PATH_SPACING?(C$99c=new C$99H.PathConstraintSpacingTimeline(C$99o),C$99A.spacingMode!=C$99H.SpacingMode.Length&&C$99A.spacingMode!=C$99H.SpacingMode.Fixed||(C$99x=C$99_)):(C$99c=new C$99H.PathConstraintPositionTimeline(C$99o),C$99A.positionMode==C$99H.PositionMode.Fixed&&(C$99x=C$99_)),C$99c.pathConstraintIndex=C$99b;for(C$99a=0;C$99a<C$99o;C$99a++)C$99c.setFrame(C$99a,C$99t.readFloat(),C$99t.readFloat()*C$99x),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c);C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.PathConstraintPositionTimeline.ENTRIES]);break;case C$99j.PATH_MIX:(C$99c=new C$99H.PathConstraintMixTimeline(C$99o)).pathConstraintIndex=C$99b;for(C$99a=0;C$99a<C$99o;C$99a++)C$99c.setFrame(C$99a,C$99t.readFloat(),C$99t.readFloat(),C$99t.readFloat()),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c);C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[(C$99o-1)*C$99H.PathConstraintMixTimeline.ENTRIES])}}for(C$99n=0,C$99r=C$99t.readInt(!0);C$99n<C$99r;C$99n++)for(var C$99C=C$99u.skins[C$99t.readInt(!0)],C$99s=0,C$99m=C$99t.readInt(!0);C$99s<C$99m;C$99s++)for(var C$99p=C$99t.readInt(!0),C$99S=0,C$99T=C$99t.readInt(!0);C$99S<C$99T;C$99S++){var C$99w=C$99C.getAttachment(C$99p,C$99t.readStringRef()),C$99E=null!=C$99w.bones,C$99M=C$99w.vertices,C$99I=C$99E?C$99M.length/3*2:C$99M.length,C$99o=C$99t.readInt(!0);(C$99c=new C$99H.DeformTimeline(C$99o)).slotIndex=C$99p,C$99c.attachment=C$99w;for(C$99a=0;C$99a<C$99o;C$99a++){var C$99g=C$99t.readFloat(),C$99B=void 0,C$99R=C$99t.readInt(!0);if(0==C$99R)C$99B=C$99E?C$99H.Utils.newFloatArray(C$99I):C$99M;else{var C$99B=C$99H.Utils.newFloatArray(C$99I),C$99P=C$99t.readInt(!0);if(C$99R+=C$99P,1==C$99_)for(var C$99l=C$99P;C$99l<C$99R;C$99l++)C$99B[C$99l]=C$99t.readFloat();else for(C$99l=C$99P;C$99l<C$99R;C$99l++)C$99B[C$99l]=C$99t.readFloat()*C$99_;if(!C$99E)for(var C$99l=0,C$99D=C$99B.length;C$99l<C$99D;C$99l++)C$99B[C$99l]+=C$99M[C$99l]}C$99c.setFrame(C$99a,C$99g,C$99B),C$99a<C$99o-1&&this.readCurve(C$99t,C$99a,C$99c)}C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[C$99o-1])}var C$99L=C$99t.readInt(!0);if(0<C$99L){for(var C$99c=new C$99H.DrawOrderTimeline(C$99L),C$99V=C$99u.slots.length,C$99n=0;C$99n<C$99L;C$99n++){for(var C$99g=C$99t.readFloat(),C$99O=C$99t.readInt(!0),C$99F=C$99H.Utils.newArray(C$99V,0),C$99s=C$99V-1;0<=C$99s;C$99s--)C$99F[C$99s]=-1;for(var C$99N=C$99H.Utils.newArray(C$99V-C$99O,0),C$99k=0,C$99G=0,C$99s=0;C$99s<C$99O;C$99s++){for(C$99p=C$99t.readInt(!0);C$99k!=C$99p;)C$99N[C$99G++]=C$99k++;C$99F[C$99k+C$99t.readInt(!0)]=C$99k++}for(;C$99k<C$99V;)C$99N[C$99G++]=C$99k++;for(C$99s=C$99V-1;0<=C$99s;C$99s--)-1==C$99F[C$99s]&&(C$99F[C$99s]=C$99N[--C$99G]);C$99c.setFrame(C$99n,C$99g,C$99F)}C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[C$99L-1])}var C$99z=C$99t.readInt(!0);if(0<C$99z){for(C$99c=new C$99H.EventTimeline(C$99z),C$99n=0;C$99n<C$99z;C$99n++){var C$99g=C$99t.readFloat(),C$99U=C$99u.events[C$99t.readInt(!0)],C$99W=new C$99H.Event(C$99g,C$99U);C$99W.intValue=C$99t.readInt(!1),C$99W.floatValue=C$99t.readFloat(),C$99W.stringValue=C$99t.readBoolean()?C$99t.readString():C$99U.stringValue,null!=C$99W.data.audioPath&&(C$99W.volume=C$99t.readFloat(),C$99W.balance=C$99t.readFloat()),C$99c.setFrame(C$99n,C$99W)}C$99e.push(C$99c),C$99i=Math.max(C$99i,C$99c.frames[C$99z-1])}return new C$99H.Animation(C$99h,C$99e,C$99i)},C$99j.prototype.readCurve=function(C$99t,C$99e,C$99i){switch(C$99t.readByte()){case C$99j.CURVE_STEPPED:C$99i.setStepped(C$99e);break;case C$99j.CURVE_BEZIER:this.setCurve(C$99i,C$99e,C$99t.readFloat(),C$99t.readFloat(),C$99t.readFloat(),C$99t.readFloat())}},C$99j.prototype.setCurve=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){C$99t.setCurve(C$99e,C$99i,C$99n,C$99r,C$99s)},C$99j.AttachmentTypeValues=[0,1,2,3,4,5,6],C$99j.TransformModeValues=[C$99H.TransformMode.Normal,C$99H.TransformMode.OnlyTranslation,C$99H.TransformMode.NoRotationOrReflection,C$99H.TransformMode.NoScale,C$99H.TransformMode.NoScaleOrReflection],C$99j.PositionModeValues=[C$99H.PositionMode.Fixed,C$99H.PositionMode.Percent],C$99j.SpacingModeValues=[C$99H.SpacingMode.Length,C$99H.SpacingMode.Fixed,C$99H.SpacingMode.Percent],C$99j.RotateModeValues=[C$99H.RotateMode.Tangent,C$99H.RotateMode.Chain,C$99H.RotateMode.ChainScale],C$99j.BlendModeValues=[C$99H.BlendMode.Normal,C$99H.BlendMode.Additive,C$99H.BlendMode.Multiply,C$99H.BlendMode.Screen],C$99j.BONE_ROTATE=0,C$99j.BONE_TRANSLATE=1,C$99j.BONE_SCALE=2,C$99j.BONE_SHEAR=3,C$99j.SLOT_ATTACHMENT=0,C$99j.SLOT_COLOR=1,C$99j.SLOT_TWO_COLOR=2,C$99j.PATH_POSITION=0,C$99j.PATH_SPACING=1,C$99j.PATH_MIX=2,C$99j.CURVE_LINEAR=0,C$99j.CURVE_STEPPED=1,C$99j.CURVE_BEZIER=2,C$99j);function C$99j(C$99t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=C$99t}C$99H.SkeletonBinary=C$99e,C$99N.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},C$99N.prototype.readShort=function(){var C$99t=this.buffer.getInt16(this.index);return this.index+=2,C$99t},C$99N.prototype.readInt32=function(){var C$99t=this.buffer.getInt32(this.index);return this.index+=4,C$99t},C$99N.prototype.readInt=function(C$99t){var C$99e=this.readByte(),C$99i=127&C$99e;return 0!=(128&C$99e)&&(C$99i|=(127&(C$99e=this.readByte()))<<7,0!=(128&C$99e)&&(C$99i|=(127&(C$99e=this.readByte()))<<14,0!=(128&C$99e)&&(C$99i|=(127&(C$99e=this.readByte()))<<21,0!=(128&C$99e)&&(C$99i|=(127&this.readByte())<<28)))),C$99t?C$99i:C$99i>>>1^-(1&C$99i)},C$99N.prototype.readStringRef=function(){var C$99t=this.readInt(!0);return 0==C$99t?null:this.strings[C$99t-1]},C$99N.prototype.readString=function(){var C$99t=this.readInt(!0);switch(C$99t){case 0:return null;case 1:return""}C$99t--;for(var C$99e="",C$99i=0;C$99i<C$99t;){var C$99n=this.readByte();switch(C$99n>>4){case 12:case 13:C$99e+=String.fromCharCode((31&C$99n)<<6|63&this.readByte()),C$99i+=2;break;case 14:C$99e+=String.fromCharCode((15&C$99n)<<12|(63&this.readByte())<<6|63&this.readByte()),C$99i+=3;break;default:C$99e+=String.fromCharCode(C$99n),C$99i++}}return C$99e},C$99N.prototype.readFloat=function(){var C$99t=this.buffer.getFloat32(this.index);return this.index+=4,C$99t},C$99N.prototype.readBoolean=function(){return 0!=this.readByte()};var C$99F=C$99N;function C$99N(C$99t,C$99e,C$99i,C$99n){void 0===C$99e&&(C$99e=new Array),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=new DataView(C$99t.buffer)),this.strings=C$99e,this.index=C$99i,this.buffer=C$99n}var C$99k=function(C$99t,C$99e,C$99i,C$99n,C$99r){this.mesh=C$99t,this.skin=C$99e,this.slotIndex=C$99i,this.parent=C$99n,this.inheritDeform=C$99r},C$99G=function(C$99t,C$99e){void 0===C$99e&&(C$99e=null),this.bones=C$99t=void 0===C$99t?null:C$99t,this.vertices=C$99e};function C$99i(C$99t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==C$99t)throw new Error("name cannot be null.");this.name=C$99t}!function(C$99u){function C$99t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new C$99u.Pool(function(){return C$99u.Utils.newFloatArray(16)})}C$99t.prototype.update=function(C$99t,C$99e){if(null==C$99t)throw new Error("skeleton cannot be null.");var C$99i=this.boundingBoxes,C$99n=this.polygons,C$99r=this.polygonPool,C$99s=C$99t.slots,C$99h=C$99s.length;C$99i.length=0,C$99r.freeAll(C$99n);for(var C$99o=C$99n.length=0;C$99o<C$99h;C$99o++){var C$99a,C$99c,C$99l=C$99s[C$99o];C$99l.bone.active&&((C$99a=C$99l.getAttachment())instanceof C$99u.BoundingBoxAttachment&&(C$99i.push(C$99a=C$99a),(C$99c=C$99r.obtain()).length!=C$99a.worldVerticesLength&&(C$99c=C$99u.Utils.newFloatArray(C$99a.worldVerticesLength)),C$99n.push(C$99c),C$99a.computeWorldVertices(C$99l,0,C$99a.worldVerticesLength,C$99c,0,2)))}C$99e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},C$99t.prototype.aabbCompute=function(){for(var C$99t=Number.POSITIVE_INFINITY,C$99e=Number.POSITIVE_INFINITY,C$99i=Number.NEGATIVE_INFINITY,C$99n=Number.NEGATIVE_INFINITY,C$99r=this.polygons,C$99s=0,C$99h=C$99r.length;C$99s<C$99h;C$99s++)for(var C$99o=C$99r[C$99s],C$99a=C$99o,C$99c=0,C$99u=C$99o.length;C$99c<C$99u;C$99c+=2)var C$99l=C$99a[C$99c],C$99_=C$99a[C$99c+1],C$99t=Math.min(C$99t,C$99l),C$99e=Math.min(C$99e,C$99_),C$99i=Math.max(C$99i,C$99l),C$99n=Math.max(C$99n,C$99_);this.minX=C$99t,this.minY=C$99e,this.maxX=C$99i,this.maxY=C$99n},C$99t.prototype.aabbContainsPoint=function(C$99t,C$99e){return C$99t>=this.minX&&C$99t<=this.maxX&&C$99e>=this.minY&&C$99e<=this.maxY},C$99t.prototype.aabbIntersectsSegment=function(C$99t,C$99e,C$99i,C$99n){var C$99r=this.minX,C$99s=this.minY,C$99o=this.maxX,C$99a=this.maxY;if(C$99t<=C$99r&&C$99i<=C$99r||C$99e<=C$99s&&C$99n<=C$99s||C$99o<=C$99t&&C$99o<=C$99i||C$99a<=C$99e&&C$99a<=C$99n)return!1;C$99n=(C$99n-C$99e)/(C$99i-C$99t),C$99i=C$99n*(C$99r-C$99t)+C$99e;if(C$99s<C$99i&&C$99i<C$99a)return!0;if(C$99s<(C$99i=C$99n*(C$99o-C$99t)+C$99e)&&C$99i<C$99a)return!0;C$99i=(C$99s-C$99e)/C$99n+C$99t;return C$99r<C$99i&&C$99i<C$99o||C$99r<(C$99i=(C$99a-C$99e)/C$99n+C$99t)&&C$99i<C$99o},C$99t.prototype.aabbIntersectsSkeleton=function(C$99t){return this.minX<C$99t.maxX&&this.maxX>C$99t.minX&&this.minY<C$99t.maxY&&this.maxY>C$99t.minY},C$99t.prototype.containsPoint=function(C$99t,C$99e){for(var C$99i=this.polygons,C$99n=0,C$99r=C$99i.length;C$99n<C$99r;C$99n++)if(this.containsPointPolygon(C$99i[C$99n],C$99t,C$99e))return this.boundingBoxes[C$99n];return null},C$99t.prototype.containsPointPolygon=function(C$99t,C$99h,C$99e){for(var C$99i=C$99t,C$99n=C$99t.length,C$99r=C$99n-2,C$99s=!1,C$99o=0;C$99o<C$99n;C$99o+=2){var C$99a,C$99c=C$99i[C$99o+1],C$99l=C$99i[C$99r+1];!(C$99c<C$99e&&C$99e<=C$99l||C$99l<C$99e&&C$99e<=C$99c)||(C$99a=C$99i[C$99o])+(C$99e-C$99c)/(C$99l-C$99c)*(C$99i[C$99r]-C$99a)<C$99h&&(C$99s=!C$99s),C$99r=C$99o}return C$99s},C$99t.prototype.intersectsSegment=function(C$99t,C$99e,C$99i,C$99n){for(var C$99r=this.polygons,C$99s=0,C$99o=C$99r.length;C$99s<C$99o;C$99s++)if(this.intersectsSegmentPolygon(C$99r[C$99s],C$99t,C$99e,C$99i,C$99n))return this.boundingBoxes[C$99s];return null},C$99t.prototype.intersectsSegmentPolygon=function(C$99h,C$99t,C$99e,C$99i,C$99n){for(var C$99r=C$99h,C$99u=C$99h.length,C$99_=C$99t-C$99i,C$99d=C$99e-C$99n,C$99f=C$99t*C$99n-C$99e*C$99i,C$99s=C$99r[C$99u-2],C$99o=C$99r[C$99u-1],C$99p=0;C$99p<C$99u;C$99p+=2){var C$99a=C$99r[C$99p],C$99c=C$99r[C$99p+1],C$99m=C$99s*C$99c-C$99o*C$99a,C$99l=C$99s-C$99a,C$99y=C$99o-C$99c,C$99g=C$99_*C$99y-C$99d*C$99l,C$99l=(C$99f*C$99l-C$99_*C$99m)/C$99g;if((C$99s<=C$99l&&C$99l<=C$99a||C$99a<=C$99l&&C$99l<=C$99s)&&(C$99t<=C$99l&&C$99l<=C$99i||C$99i<=C$99l&&C$99l<=C$99t)){C$99l=(C$99f*C$99y-C$99d*C$99m)/C$99g;if((C$99o<=C$99l&&C$99l<=C$99c||C$99c<=C$99l&&C$99l<=C$99o)&&(C$99e<=C$99l&&C$99l<=C$99n||C$99n<=C$99l&&C$99l<=C$99e))return!0}C$99s=C$99a,C$99o=C$99c}return!1},C$99t.prototype.getPolygon=function(C$99t){if(null==C$99t)throw new Error("boundingBox cannot be null.");C$99t=this.boundingBoxes.indexOf(C$99t);return-1==C$99t?null:this.polygons[C$99t]},C$99t.prototype.getWidth=function(){return this.maxX-this.minX},C$99t.prototype.getHeight=function(){return this.maxY-this.minY},C$99u.SkeletonBounds=C$99t}(C$99t=C$99t||{}),function(C$99Q){function C$99c(){this.triangulator=new C$99Q.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}C$99c.prototype.clipStart=function(C$99t,C$99e){if(null!=this.clipAttachment)return 0;for(var C$99i=(this.clipAttachment=C$99e).worldVerticesLength,C$99n=C$99Q.Utils.setArraySize(this.clippingPolygon,C$99i),C$99e=(C$99e.computeWorldVertices(C$99t,0,C$99i,C$99n,0,2),this.clippingPolygon),C$99r=(C$99c.makeClockwise(C$99e),this.clippingPolygons=this.triangulator.decompose(C$99e,this.triangulator.triangulate(C$99e))),C$99s=0,C$99o=C$99r.length;C$99s<C$99o;C$99s++){var C$99a=C$99r[C$99s];C$99c.makeClockwise(C$99a),C$99a.push(C$99a[0]),C$99a.push(C$99a[1])}return C$99r.length},C$99c.prototype.clipEndWithSlot=function(C$99t){null!=this.clipAttachment&&this.clipAttachment.endSlot==C$99t.data&&this.clipEnd()},C$99c.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},C$99c.prototype.isClipping=function(){return null!=this.clipAttachment},C$99c.prototype.clipTriangles=function(C$99t,C$99h,C$99u,C$99_,C$99e,C$99i,C$99n,C$99d,C$99f,C$99p,C$99m,C$99y){var C$99g=this.clipOutput,C$99v=this.clippedVertices,C$99x=this.clippedTriangles,C$99b=this.clippingPolygons,C$99A=this.clippingPolygons.length,C$99C=C$99d?12:8,C$99r=0;C$99p=C$99p||0,C$99m=C$99m||0,C$99y=C$99y||0,C$99v.length=0,C$99x.length=0;C$99t:for(var C$99S=C$99p,C$99T=C$99p+C$99_;C$99S<C$99T;C$99S+=3)for(var C$99w=C$99u[C$99S]*C$99f,C$99E=C$99w+C$99m,C$99M=C$99w+C$99y,C$99I=C$99t[C$99E],C$99B=C$99t[C$99E+1],C$99R=C$99e[C$99M],C$99P=C$99e[C$99M+1],C$99D=C$99t[C$99E=(C$99w=C$99u[C$99S+1]*C$99f)+C$99m],C$99L=C$99t[C$99E+1],C$99V=C$99e[C$99M=C$99w+C$99y],C$99O=C$99e[C$99M+1],C$99F=C$99t[C$99E=(C$99w=C$99u[C$99S+2]*C$99f)+C$99m],C$99s=C$99t[C$99E+1],C$99N=C$99e[C$99M=C$99w+C$99y],C$99k=C$99e[C$99M+1],C$99G=0;C$99G<C$99A;C$99G++){var C$99o=C$99v.length;if(!this.clip(C$99I,C$99B,C$99D,C$99L,C$99F,C$99s,C$99b[C$99G],C$99g)){(C$99a=C$99Q.Utils.setArraySize(C$99v,C$99o+3*C$99C))[C$99o]=C$99I,C$99a[C$99o+1]=C$99B,C$99a[C$99o+2]=C$99i.r,C$99a[C$99o+3]=C$99i.g,C$99a[C$99o+4]=C$99i.b,C$99a[C$99o+5]=C$99i.a,C$99d?(C$99a[C$99o+6]=C$99R,C$99a[C$99o+7]=C$99P,C$99a[C$99o+8]=C$99n.r,C$99a[C$99o+9]=C$99n.g,C$99a[C$99o+10]=C$99n.b,C$99a[C$99o+11]=C$99n.a,C$99a[C$99o+12]=C$99D,C$99a[C$99o+13]=C$99L,C$99a[C$99o+14]=C$99i.r,C$99a[C$99o+15]=C$99i.g,C$99a[C$99o+16]=C$99i.b,C$99a[C$99o+17]=C$99i.a,C$99a[C$99o+18]=C$99V,C$99a[C$99o+19]=C$99O,C$99a[C$99o+20]=C$99n.r,C$99a[C$99o+21]=C$99n.g,C$99a[C$99o+22]=C$99n.b,C$99a[C$99o+23]=C$99n.a,C$99a[C$99o+24]=C$99F,C$99a[C$99o+25]=C$99s,C$99a[C$99o+26]=C$99i.r,C$99a[C$99o+27]=C$99i.g,C$99a[C$99o+28]=C$99i.b,C$99a[C$99o+29]=C$99i.a,C$99a[C$99o+30]=C$99N,C$99a[C$99o+31]=C$99k,C$99a[C$99o+32]=C$99n.r,C$99a[C$99o+33]=C$99n.g,C$99a[C$99o+34]=C$99n.b,C$99a[C$99o+35]=C$99n.a):(C$99a[C$99o+6]=C$99R,C$99a[C$99o+7]=C$99P,C$99a[C$99o+8]=C$99D,C$99a[C$99o+9]=C$99L,C$99a[C$99o+10]=C$99i.r,C$99a[C$99o+11]=C$99i.g,C$99a[C$99o+12]=C$99i.b,C$99a[C$99o+13]=C$99i.a,C$99a[C$99o+14]=C$99V,C$99a[C$99o+15]=C$99O,C$99a[C$99o+16]=C$99F,C$99a[C$99o+17]=C$99s,C$99a[C$99o+18]=C$99i.r,C$99a[C$99o+19]=C$99i.g,C$99a[C$99o+20]=C$99i.b,C$99a[C$99o+21]=C$99i.a,C$99a[C$99o+22]=C$99N,C$99a[C$99o+23]=C$99k),C$99o=C$99x.length,(C$99K=C$99Q.Utils.setArraySize(C$99x,C$99o+3))[C$99o]=C$99r,C$99K[C$99o+1]=C$99r+1,C$99K[C$99o+2]=C$99r+2,C$99r+=3;continue C$99t}var C$99z=C$99g.length;if(0!=C$99z){for(var C$99U=C$99L-C$99s,C$99W=C$99F-C$99D,C$99H=C$99I-C$99F,C$99j=C$99s-C$99B,C$99X=1/(C$99U*C$99H+C$99W*(C$99B-C$99s)),C$99Y=C$99z>>1,C$99q=this.clipOutput,C$99a=C$99Q.Utils.setArraySize(C$99v,C$99o+C$99Y*C$99C),C$99c=0;C$99c<C$99z;C$99c+=2){var C$99l=C$99q[C$99c],C$99J=C$99q[C$99c+1],C$99l=(C$99a[C$99o]=C$99l,C$99a[C$99o+1]=C$99J,C$99a[C$99o+2]=C$99i.r,C$99a[C$99o+3]=C$99i.g,C$99a[C$99o+4]=C$99i.b,C$99a[C$99o+5]=C$99i.a,C$99l-C$99F),C$99J=C$99J-C$99s,C$99Z=(C$99U*C$99l+C$99W*C$99J)*C$99X,C$99l=(C$99j*C$99l+C$99H*C$99J)*C$99X,C$99J=1-C$99Z-C$99l;C$99a[C$99o+6]=C$99R*C$99Z+C$99V*C$99l+C$99N*C$99J,C$99a[C$99o+7]=C$99P*C$99Z+C$99O*C$99l+C$99k*C$99J,C$99d&&(C$99a[C$99o+8]=C$99n.r,C$99a[C$99o+9]=C$99n.g,C$99a[C$99o+10]=C$99n.b,C$99a[C$99o+11]=C$99n.a),C$99o+=C$99C}var C$99o=C$99x.length,C$99K=C$99Q.Utils.setArraySize(C$99x,C$99o+3*(C$99Y-2));C$99Y--;for(C$99c=1;C$99c<C$99Y;C$99c++)C$99K[C$99o]=C$99r,C$99K[C$99o+1]=C$99r+C$99c,C$99K[C$99o+2]=C$99r+C$99c+1,C$99o+=3;C$99r+=1+C$99Y}}},C$99c.prototype.clip=function(C$99h,C$99u,C$99_,C$99d,C$99f,C$99p,C$99m,C$99t){for(var C$99e=C$99t,C$99y=!1,C$99i=null,C$99g=(2<=C$99m.length%4?(C$99i=C$99t,C$99t=this.scratch):C$99i=this.scratch,C$99i.length=0,C$99i.push(C$99h),C$99i.push(C$99u),C$99i.push(C$99_),C$99i.push(C$99d),C$99i.push(C$99f),C$99i.push(C$99p),C$99i.push(C$99h),C$99i.push(C$99u),C$99t.length=0,C$99m),C$99v=C$99m.length-4,C$99n=0;;C$99n+=2){for(var C$99r=C$99g[C$99n],C$99s=C$99g[C$99n+1],C$99o=C$99g[C$99n+2],C$99a=C$99g[C$99n+3],C$99x=C$99r-C$99o,C$99b=C$99s-C$99a,C$99A=C$99i,C$99C=C$99i.length-2,C$99S=C$99t.length,C$99c=0;C$99c<C$99C;C$99c+=2){var C$99l=C$99A[C$99c],C$99T=C$99A[C$99c+1],C$99w=C$99A[C$99c+2],C$99E=C$99A[C$99c+3],C$99M=0<C$99x*(C$99E-C$99a)-C$99b*(C$99w-C$99o);if(0<C$99x*(C$99T-C$99a)-C$99b*(C$99l-C$99o)){if(C$99M){C$99t.push(C$99w),C$99t.push(C$99E);continue}var C$99I,C$99B,C$99R,C$99P=(C$99I=C$99E-C$99T)*(C$99o-C$99r)-(C$99B=C$99w-C$99l)*(C$99a-C$99s);1e-6<Math.abs(C$99P)?(C$99t.push(C$99r+(C$99o-C$99r)*(C$99R=(C$99B*(C$99s-C$99T)-C$99I*(C$99r-C$99l))/C$99P)),C$99t.push(C$99s+(C$99a-C$99s)*C$99R)):(C$99t.push(C$99r),C$99t.push(C$99s))}else C$99M&&(C$99P=(C$99I=C$99E-C$99T)*(C$99o-C$99r)-(C$99B=C$99w-C$99l)*(C$99a-C$99s),1e-6<Math.abs(C$99P)?(C$99t.push(C$99r+(C$99o-C$99r)*(C$99R=(C$99B*(C$99s-C$99T)-C$99I*(C$99r-C$99l))/C$99P)),C$99t.push(C$99s+(C$99a-C$99s)*C$99R)):(C$99t.push(C$99r),C$99t.push(C$99s)),C$99t.push(C$99w),C$99t.push(C$99E));C$99y=!0}if(C$99S==C$99t.length)return!(C$99e.length=0);if(C$99t.push(C$99t[0]),C$99t.push(C$99t[1]),C$99n==C$99v)break;C$99S=C$99t;(C$99t=C$99i).length=0,C$99i=C$99S}if(C$99e!=C$99t)for(var C$99n=C$99e.length=0,C$99D=C$99t.length-2;C$99n<C$99D;C$99n++)C$99e[C$99n]=C$99t[C$99n];else C$99e.length=C$99e.length-2;return C$99y},C$99c.makeClockwise=function(C$99t){for(var C$99e,C$99i,C$99n,C$99r=C$99t,C$99t=C$99t.length,C$99s=C$99r[C$99t-2]*C$99r[1]-C$99r[0]*C$99r[C$99t-1],C$99o=0,C$99a=C$99t-3;C$99o<C$99a;C$99o+=2)C$99e=C$99r[C$99o],C$99i=C$99r[C$99o+1],C$99n=C$99r[C$99o+2],C$99s+=C$99e*C$99r[C$99o+3]-C$99n*C$99i;if(!(C$99s<0))for(var C$99o=0,C$99c=C$99t-2,C$99a=C$99t>>1;C$99o<C$99a;C$99o+=2){var C$99h=C$99r[C$99o],C$99u=C$99r[C$99o+1],C$99l=C$99c-C$99o;C$99r[C$99o]=C$99r[C$99l],C$99r[C$99o+1]=C$99r[1+C$99l],C$99r[C$99l]=C$99h,C$99r[1+C$99l]=C$99u}},C$99Q.SkeletonClipping=C$99c}(C$99t=C$99t||{}),function(C$99t){function C$99e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}C$99e.prototype.findBone=function(C$99t){if(null==C$99t)throw new Error("boneName cannot be null.");for(var C$99e=this.bones,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findBoneIndex=function(C$99t){if(null==C$99t)throw new Error("boneName cannot be null.");for(var C$99e=this.bones,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i].name==C$99t)return C$99i;return-1},C$99e.prototype.findSlot=function(C$99t){if(null==C$99t)throw new Error("slotName cannot be null.");for(var C$99e=this.slots,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findSlotIndex=function(C$99t){if(null==C$99t)throw new Error("slotName cannot be null.");for(var C$99e=this.slots,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i].name==C$99t)return C$99i;return-1},C$99e.prototype.findSkin=function(C$99t){if(null==C$99t)throw new Error("skinName cannot be null.");for(var C$99e=this.skins,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findEvent=function(C$99t){if(null==C$99t)throw new Error("eventDataName cannot be null.");for(var C$99e=this.events,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findAnimation=function(C$99t){if(null==C$99t)throw new Error("animationName cannot be null.");for(var C$99e=this.animations,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findIkConstraint=function(C$99t){if(null==C$99t)throw new Error("constraintName cannot be null.");for(var C$99e=this.ikConstraints,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findTransformConstraint=function(C$99t){if(null==C$99t)throw new Error("constraintName cannot be null.");for(var C$99e=this.transformConstraints,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findPathConstraint=function(C$99t){if(null==C$99t)throw new Error("constraintName cannot be null.");for(var C$99e=this.pathConstraints,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++){var C$99r=C$99e[C$99i];if(C$99r.name==C$99t)return C$99r}return null},C$99e.prototype.findPathConstraintIndex=function(C$99t){if(null==C$99t)throw new Error("pathConstraintName cannot be null.");for(var C$99e=this.pathConstraints,C$99i=0,C$99n=C$99e.length;C$99i<C$99n;C$99i++)if(C$99e[C$99i].name==C$99t)return C$99i;return-1},C$99t.SkeletonData=C$99e}(C$99t=C$99t||{}),function(C$99et){function C$99L(C$99t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=C$99t}C$99L.prototype.readSkeletonData=function(C$99t){var C$99h=this.scale,C$99e=new C$99et.SkeletonData,C$99i="string"==typeof C$99t?JSON.parse(C$99t):C$99t,C$99t=C$99i.skeleton;if(null!=C$99t&&(C$99e.hash=C$99t.hash,C$99e.version=C$99t.spine,C$99e.x=C$99t.x,C$99e.y=C$99t.y,C$99e.width=C$99t.width,C$99e.height=C$99t.height,C$99e.fps=C$99t.fps,C$99e.imagesPath=C$99t.images),C$99i.bones)for(var C$99n=0;C$99n<C$99i.bones.length;C$99n++){var C$99r=C$99i.bones[C$99n],C$99u=null,C$99_=this.getValue(C$99r,"parent",null);if(null!=C$99_&&null==(C$99u=C$99e.findBone(C$99_)))throw new Error("Parent bone not found: "+C$99_);(C$99o=new C$99et.BoneData(C$99e.bones.length,C$99r.name,C$99u)).length=this.getValue(C$99r,"length",0)*C$99h,C$99o.x=this.getValue(C$99r,"x",0)*C$99h,C$99o.y=this.getValue(C$99r,"y",0)*C$99h,C$99o.rotation=this.getValue(C$99r,"rotation",0),C$99o.scaleX=this.getValue(C$99r,"scaleX",1),C$99o.scaleY=this.getValue(C$99r,"scaleY",1),C$99o.shearX=this.getValue(C$99r,"shearX",0),C$99o.shearY=this.getValue(C$99r,"shearY",0),C$99o.transformMode=C$99L.transformModeFromString(this.getValue(C$99r,"transform","normal")),C$99o.skinRequired=this.getValue(C$99r,"skin",!1),C$99e.bones.push(C$99o)}if(C$99i.slots)for(C$99n=0;C$99n<C$99i.slots.length;C$99n++){var C$99d=(C$99C=C$99i.slots[C$99n]).name,C$99s=C$99C.bone,C$99f=C$99e.findBone(C$99s);if(null==C$99f)throw new Error("Slot bone not found: "+C$99s);var C$99o=new C$99et.SlotData(C$99e.slots.length,C$99d,C$99f),C$99f=this.getValue(C$99C,"color",null),C$99f=(null!=C$99f&&C$99o.color.setFromString(C$99f),this.getValue(C$99C,"dark",null));null!=C$99f&&(C$99o.darkColor=new C$99et.Color(1,1,1,1),C$99o.darkColor.setFromString(C$99f)),C$99o.attachmentName=this.getValue(C$99C,"attachment",null),C$99o.blendMode=C$99L.blendModeFromString(this.getValue(C$99C,"blend","normal")),C$99e.slots.push(C$99o)}if(C$99i.ik)for(C$99n=0;C$99n<C$99i.ik.length;C$99n++){var C$99a=C$99i.ik[C$99n];(C$99o=new C$99et.IkConstraintData(C$99a.name)).order=this.getValue(C$99a,"order",0),C$99o.skinRequired=this.getValue(C$99a,"skin",!1);for(var C$99p=0;C$99p<C$99a.bones.length;C$99p++){C$99s=C$99a.bones[C$99p];if(null==(C$99x=C$99e.findBone(C$99s)))throw new Error("IK bone not found: "+C$99s);C$99o.bones.push(C$99x)}var C$99m=C$99a.target;if(C$99o.target=C$99e.findBone(C$99m),null==C$99o.target)throw new Error("IK target bone not found: "+C$99m);C$99o.mix=this.getValue(C$99a,"mix",1),C$99o.softness=this.getValue(C$99a,"softness",0)*C$99h,C$99o.bendDirection=this.getValue(C$99a,"bendPositive",!0)?1:-1,C$99o.compress=this.getValue(C$99a,"compress",!1),C$99o.stretch=this.getValue(C$99a,"stretch",!1),C$99o.uniform=this.getValue(C$99a,"uniform",!1),C$99e.ikConstraints.push(C$99o)}if(C$99i.transform)for(C$99n=0;C$99n<C$99i.transform.length;C$99n++){C$99a=C$99i.transform[C$99n];(C$99o=new C$99et.TransformConstraintData(C$99a.name)).order=this.getValue(C$99a,"order",0),C$99o.skinRequired=this.getValue(C$99a,"skin",!1);for(C$99p=0;C$99p<C$99a.bones.length;C$99p++){C$99s=C$99a.bones[C$99p];if(null==(C$99x=C$99e.findBone(C$99s)))throw new Error("Transform constraint bone not found: "+C$99s);C$99o.bones.push(C$99x)}C$99m=C$99a.target;if(C$99o.target=C$99e.findBone(C$99m),null==C$99o.target)throw new Error("Transform constraint target bone not found: "+C$99m);C$99o.local=this.getValue(C$99a,"local",!1),C$99o.relative=this.getValue(C$99a,"relative",!1),C$99o.offsetRotation=this.getValue(C$99a,"rotation",0),C$99o.offsetX=this.getValue(C$99a,"x",0)*C$99h,C$99o.offsetY=this.getValue(C$99a,"y",0)*C$99h,C$99o.offsetScaleX=this.getValue(C$99a,"scaleX",0),C$99o.offsetScaleY=this.getValue(C$99a,"scaleY",0),C$99o.offsetShearY=this.getValue(C$99a,"shearY",0),C$99o.rotateMix=this.getValue(C$99a,"rotateMix",1),C$99o.translateMix=this.getValue(C$99a,"translateMix",1),C$99o.scaleMix=this.getValue(C$99a,"scaleMix",1),C$99o.shearMix=this.getValue(C$99a,"shearMix",1),C$99e.transformConstraints.push(C$99o)}if(C$99i.path)for(C$99n=0;C$99n<C$99i.path.length;C$99n++){C$99a=C$99i.path[C$99n];(C$99o=new C$99et.PathConstraintData(C$99a.name)).order=this.getValue(C$99a,"order",0),C$99o.skinRequired=this.getValue(C$99a,"skin",!1);for(C$99p=0;C$99p<C$99a.bones.length;C$99p++){C$99s=C$99a.bones[C$99p];if(null==(C$99x=C$99e.findBone(C$99s)))throw new Error("Transform constraint bone not found: "+C$99s);C$99o.bones.push(C$99x)}C$99m=C$99a.target;if(C$99o.target=C$99e.findSlot(C$99m),null==C$99o.target)throw new Error("Path target slot not found: "+C$99m);C$99o.positionMode=C$99L.positionModeFromString(this.getValue(C$99a,"positionMode","percent")),C$99o.spacingMode=C$99L.spacingModeFromString(this.getValue(C$99a,"spacingMode","length")),C$99o.rotateMode=C$99L.rotateModeFromString(this.getValue(C$99a,"rotateMode","tangent")),C$99o.offsetRotation=this.getValue(C$99a,"rotation",0),C$99o.position=this.getValue(C$99a,"position",0),C$99o.positionMode==C$99et.PositionMode.Fixed&&(C$99o.position*=C$99h),C$99o.spacing=this.getValue(C$99a,"spacing",0),C$99o.spacingMode!=C$99et.SpacingMode.Length&&C$99o.spacingMode!=C$99et.SpacingMode.Fixed||(C$99o.spacing*=C$99h),C$99o.rotateMix=this.getValue(C$99a,"rotateMix",1),C$99o.translateMix=this.getValue(C$99a,"translateMix",1),C$99e.pathConstraints.push(C$99o)}if(C$99i.skins){var C$99y=C$99i.skins;if(!(C$99y instanceof Array)){var C$99g,C$99v=[];for(C$99g in C$99y)C$99v.push({name:C$99g,attachments:C$99y[C$99g]});C$99y=C$99v}for(C$99n=0;C$99n<C$99y.length;C$99n++){var C$99x,C$99b,C$99c=C$99y[C$99n],C$99A=new C$99et.Skin(C$99c.name);if(C$99c.bones)for(var C$99l=0;C$99l<C$99c.bones.length;C$99l++){if(null==(C$99x=C$99e.findBone(C$99c.bones[C$99l])))throw new Error("Skin bone not found: "+C$99c.bones[C$99n]);C$99A.bones.push(C$99x)}if(C$99c.ik)for(C$99l=0;C$99l<C$99c.ik.length;C$99l++){if(null==(C$99b=C$99e.findIkConstraint(C$99c.ik[C$99l])))throw new Error("Skin IK constraint not found: "+C$99c.ik[C$99n]);C$99A.constraints.push(C$99b)}if(C$99c.transform)for(C$99l=0;C$99l<C$99c.transform.length;C$99l++){if(null==(C$99b=C$99e.findTransformConstraint(C$99c.transform[C$99l])))throw new Error("Skin transform constraint not found: "+C$99c.transform[C$99n]);C$99A.constraints.push(C$99b)}if(C$99c.path)for(C$99l=0;C$99l<C$99c.path.length;C$99l++){if(null==(C$99b=C$99e.findPathConstraint(C$99c.path[C$99l])))throw new Error("Skin path constraint not found: "+C$99c.path[C$99n]);C$99A.constraints.push(C$99b)}for(C$99d in C$99c.attachments){var C$99C,C$99S,C$99T=C$99e.findSlot(C$99d);if(null==C$99T)throw new Error("Slot not found: "+C$99d);for(C$99S in C$99C=C$99c.attachments[C$99d]){var C$99w=this.readAttachment(C$99C[C$99S],C$99A,C$99T.index,C$99S,C$99e);null!=C$99w&&C$99A.setAttachment(C$99T.index,C$99S,C$99w)}}C$99e.skins.push(C$99A),"default"==C$99A.name&&(C$99e.defaultSkin=C$99A)}}for(var C$99n=0,C$99E=this.linkedMeshes.length;C$99n<C$99E;C$99n++){var C$99M=this.linkedMeshes[C$99n];if(null==(C$99A=null==C$99M.skin?C$99e.defaultSkin:C$99e.findSkin(C$99M.skin)))throw new Error("Skin not found: "+C$99M.skin);var C$99I=C$99A.getAttachment(C$99M.slotIndex,C$99M.parent);if(null==C$99I)throw new Error("Parent mesh not found: "+C$99M.parent);C$99M.mesh.deformAttachment=C$99M.inheritDeform?C$99I:C$99M.mesh,C$99M.mesh.setParentMesh(C$99I),C$99M.mesh.updateUVs()}if(this.linkedMeshes.length=0,C$99i.events)for(var C$99B in C$99i.events){var C$99R=C$99i.events[C$99B];(C$99o=new C$99et.EventData(C$99B)).intValue=this.getValue(C$99R,"int",0),C$99o.floatValue=this.getValue(C$99R,"float",0),C$99o.stringValue=this.getValue(C$99R,"string",""),C$99o.audioPath=this.getValue(C$99R,"audio",null),null!=C$99o.audioPath&&(C$99o.volume=this.getValue(C$99R,"volume",1),C$99o.balance=this.getValue(C$99R,"balance",0)),C$99e.events.push(C$99o)}if(C$99i.animations)for(var C$99P in C$99i.animations){var C$99D=C$99i.animations[C$99P];this.readAnimation(C$99D,C$99P,C$99e)}return C$99e},C$99L.prototype.readAttachment=function(C$99t,C$99e,C$99h,C$99i,C$99u){var C$99n=this.scale;switch(C$99i=this.getValue(C$99t,"name",C$99i),this.getValue(C$99t,"type","region")){case"region":var C$99r=this.getValue(C$99t,"path",C$99i),C$99s=this.attachmentLoader.newRegionAttachment(C$99e,C$99i,C$99r);return null==C$99s?null:(C$99s.path=C$99r,C$99s.x=this.getValue(C$99t,"x",0)*C$99n,C$99s.y=this.getValue(C$99t,"y",0)*C$99n,C$99s.scaleX=this.getValue(C$99t,"scaleX",1),C$99s.scaleY=this.getValue(C$99t,"scaleY",1),C$99s.rotation=this.getValue(C$99t,"rotation",0),C$99s.width=C$99t.width*C$99n,C$99s.height=C$99t.height*C$99n,null!=(C$99l=this.getValue(C$99t,"color",null))&&C$99s.color.setFromString(C$99l),C$99s.updateOffset(),C$99s);case"boundingbox":C$99s=this.attachmentLoader.newBoundingBoxAttachment(C$99e,C$99i);return null==C$99s?null:(this.readVertices(C$99t,C$99s,C$99t.vertexCount<<1),null!=(C$99l=this.getValue(C$99t,"color",null))&&C$99s.color.setFromString(C$99l),C$99s);case"mesh":case"linkedmesh":var C$99r=this.getValue(C$99t,"path",C$99i),C$99s=this.attachmentLoader.newMeshAttachment(C$99e,C$99i,C$99r);if(null==C$99s)return null;C$99s.path=C$99r;null!=(C$99l=this.getValue(C$99t,"color",null))&&C$99s.color.setFromString(C$99l),C$99s.width=this.getValue(C$99t,"width",0)*C$99n,C$99s.height=this.getValue(C$99t,"height",0)*C$99n;var C$99o=this.getValue(C$99t,"parent",null);if(null!=C$99o)return this.linkedMeshes.push(new C$99d(C$99s,this.getValue(C$99t,"skin",null),C$99h,C$99o,this.getValue(C$99t,"deform",!0))),C$99s;C$99o=C$99t.uvs;return this.readVertices(C$99t,C$99s,C$99o.length),C$99s.triangles=C$99t.triangles,C$99s.regionUVs=C$99o,C$99s.updateUVs(),C$99s.edges=this.getValue(C$99t,"edges",null),C$99s.hullLength=2*this.getValue(C$99t,"hull",0),C$99s;case"path":if(null==(C$99r=this.attachmentLoader.newPathAttachment(C$99e,C$99i)))return null;C$99r.closed=this.getValue(C$99t,"closed",!1),C$99r.constantSpeed=this.getValue(C$99t,"constantSpeed",!0);for(var C$99a=C$99t.vertexCount,C$99_=(this.readVertices(C$99t,C$99r,C$99a<<1),C$99et.Utils.newArray(C$99a/3,0)),C$99c=0;C$99c<C$99t.lengths.length;C$99c++)C$99_[C$99c]=C$99t.lengths[C$99c]*C$99n;return C$99r.lengths=C$99_,null!=(C$99l=this.getValue(C$99t,"color",null))&&C$99r.color.setFromString(C$99l),C$99r;case"point":C$99o=this.attachmentLoader.newPointAttachment(C$99e,C$99i);return null==C$99o?null:(C$99o.x=this.getValue(C$99t,"x",0)*C$99n,C$99o.y=this.getValue(C$99t,"y",0)*C$99n,C$99o.rotation=this.getValue(C$99t,"rotation",0),null!=(C$99l=this.getValue(C$99t,"color",null))&&C$99o.color.setFromString(C$99l),C$99o);case"clipping":C$99s=this.attachmentLoader.newClippingAttachment(C$99e,C$99i);if(null==C$99s)return null;C$99r=this.getValue(C$99t,"end",null);if(null!=C$99r){C$99o=C$99u.findSlot(C$99r);if(null==C$99o)throw new Error("Clipping end slot not found: "+C$99r);C$99s.endSlot=C$99o}var C$99l,C$99a=C$99t.vertexCount;return this.readVertices(C$99t,C$99s,C$99a<<1),null!=(C$99l=this.getValue(C$99t,"color",null))&&C$99s.color.setFromString(C$99l),C$99s}return null},C$99L.prototype.readVertices=function(C$99h,C$99t,C$99e){var C$99i=this.scale,C$99n=(C$99t.worldVerticesLength=C$99e,C$99h.vertices);if(C$99e!=C$99n.length){for(var C$99r=new Array,C$99s=new Array,C$99o=0,C$99a=C$99n.length;C$99o<C$99a;){var C$99c=C$99n[C$99o++];C$99s.push(C$99c);for(var C$99u=C$99o+4*C$99c;C$99o<C$99u;C$99o+=4)C$99s.push(C$99n[C$99o]),C$99r.push(C$99n[C$99o+1]*C$99i),C$99r.push(C$99n[C$99o+2]*C$99i),C$99r.push(C$99n[C$99o+3])}C$99t.bones=C$99s,C$99t.vertices=C$99et.Utils.toFloatArray(C$99r)}else{var C$99l=C$99et.Utils.toFloatArray(C$99n);if(1!=C$99i)for(var C$99o=0,C$99a=C$99n.length;C$99o<C$99a;C$99o++)C$99l[C$99o]*=C$99i;C$99t.vertices=C$99l}},C$99L.prototype.readAnimation=function(C$99t,C$99h,C$99e){var C$99u=this.scale,C$99i=new Array,C$99n=0;if(C$99t.slots)for(var C$99_ in C$99t.slots){var C$99d=C$99t.slots[C$99_];if(-1==(C$99Z=C$99e.findSlotIndex(C$99_)))throw new Error("Slot not found: "+C$99_);for(C$99l in C$99d){var C$99r=C$99d[C$99l];if("attachment"==C$99l){(C$99c=new C$99et.AttachmentTimeline(C$99r.length)).slotIndex=C$99Z;for(var C$99s=0,C$99o=0;C$99o<C$99r.length;C$99o++){var C$99a=C$99r[C$99o];C$99c.setFrame(C$99s++,this.getValue(C$99a,"time",0),C$99a.name)}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[C$99c.getFrameCount()-1])}else if("color"==C$99l){for(C$99s=((C$99c=new C$99et.ColorTimeline(C$99r.length)).slotIndex=C$99Z,0),C$99o=0;C$99o<C$99r.length;C$99o++){var C$99a=C$99r[C$99o],C$99f=new C$99et.Color;C$99f.setFromString(C$99a.color),C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),C$99f.r,C$99f.g,C$99f.b,C$99f.a),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.ColorTimeline.ENTRIES])}else{if("twoColor"!=C$99l)throw new Error("Invalid timeline type for a slot: "+C$99l+" ("+C$99_+")");for(C$99s=((C$99c=new C$99et.TwoColorTimeline(C$99r.length)).slotIndex=C$99Z,0),C$99o=0;C$99o<C$99r.length;C$99o++){var C$99a=C$99r[C$99o],C$99p=new C$99et.Color,C$99m=new C$99et.Color;C$99p.setFromString(C$99a.light),C$99m.setFromString(C$99a.dark),C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),C$99p.r,C$99p.g,C$99p.b,C$99p.a,C$99m.r,C$99m.g,C$99m.b),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.TwoColorTimeline.ENTRIES])}}}if(C$99t.bones)for(var C$99y in C$99t.bones){var C$99g=C$99t.bones[C$99y],C$99v=C$99e.findBoneIndex(C$99y);if(-1==C$99v)throw new Error("Bone not found: "+C$99y);for(C$99l in C$99g){C$99r=C$99g[C$99l];if("rotate"===C$99l){for(C$99s=((C$99c=new C$99et.RotateTimeline(C$99r.length)).boneIndex=C$99v,0),C$99o=0;C$99o<C$99r.length;C$99o++){C$99a=C$99r[C$99o];C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),this.getValue(C$99a,"angle",0)),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.RotateTimeline.ENTRIES])}else{if("translate"!==C$99l&&"scale"!==C$99l&&"shear"!==C$99l)throw new Error("Invalid timeline type for a bone: "+C$99l+" ("+C$99y+")");for(var C$99c=null,C$99x=1,C$99b=0,C$99s=("scale"===C$99l?(C$99c=new C$99et.ScaleTimeline(C$99r.length),C$99b=1):"shear"===C$99l?C$99c=new C$99et.ShearTimeline(C$99r.length):(C$99c=new C$99et.TranslateTimeline(C$99r.length),C$99x=C$99u),C$99c.boneIndex=C$99v,0),C$99o=0;C$99o<C$99r.length;C$99o++){var C$99a=C$99r[C$99o],C$99A=this.getValue(C$99a,"x",C$99b),C$99C=this.getValue(C$99a,"y",C$99b);C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),C$99A*C$99x,C$99C*C$99x),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.TranslateTimeline.ENTRIES])}}}if(C$99t.ik)for(var C$99S in C$99t.ik){for(var C$99T=C$99t.ik[C$99S],C$99w=C$99e.findIkConstraint(C$99S),C$99s=((C$99c=new C$99et.IkConstraintTimeline(C$99T.length)).ikConstraintIndex=C$99e.ikConstraints.indexOf(C$99w),0),C$99o=0;C$99o<C$99T.length;C$99o++){C$99a=C$99T[C$99o];C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),this.getValue(C$99a,"mix",1),this.getValue(C$99a,"softness",0)*C$99u,this.getValue(C$99a,"bendPositive",!0)?1:-1,this.getValue(C$99a,"compress",!1),this.getValue(C$99a,"stretch",!1)),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.IkConstraintTimeline.ENTRIES])}if(C$99t.transform)for(var C$99S in C$99t.transform){for(C$99T=C$99t.transform[C$99S],C$99w=C$99e.findTransformConstraint(C$99S),C$99s=((C$99c=new C$99et.TransformConstraintTimeline(C$99T.length)).transformConstraintIndex=C$99e.transformConstraints.indexOf(C$99w),0),C$99o=0;C$99o<C$99T.length;C$99o++){C$99a=C$99T[C$99o];C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),this.getValue(C$99a,"rotateMix",1),this.getValue(C$99a,"translateMix",1),this.getValue(C$99a,"scaleMix",1),this.getValue(C$99a,"shearMix",1)),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.TransformConstraintTimeline.ENTRIES])}var C$99E=C$99t.path||C$99t.paths;if(C$99E)for(var C$99S in C$99E){var C$99T=C$99E[C$99S],C$99M=C$99e.findPathConstraintIndex(C$99S);if(-1==C$99M)throw new Error("Path constraint not found: "+C$99S);var C$99I=C$99e.pathConstraints[C$99M];for(C$99l in C$99T){C$99r=C$99T[C$99l];if("position"===C$99l||"spacing"===C$99l){for(C$99c=null,C$99x=1,C$99s=("spacing"===C$99l?(C$99c=new C$99et.PathConstraintSpacingTimeline(C$99r.length),C$99I.spacingMode!=C$99et.SpacingMode.Length&&C$99I.spacingMode!=C$99et.SpacingMode.Fixed||(C$99x=C$99u)):(C$99c=new C$99et.PathConstraintPositionTimeline(C$99r.length),C$99I.positionMode==C$99et.PositionMode.Fixed&&(C$99x=C$99u)),C$99c.pathConstraintIndex=C$99M,0),C$99o=0;C$99o<C$99r.length;C$99o++){C$99a=C$99r[C$99o];C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),this.getValue(C$99a,C$99l,0)*C$99x),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===C$99l){for(C$99s=((C$99c=new C$99et.PathConstraintMixTimeline(C$99r.length)).pathConstraintIndex=C$99M,0),C$99o=0;C$99o<C$99r.length;C$99o++){C$99a=C$99r[C$99o];C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),this.getValue(C$99a,"rotateMix",1),this.getValue(C$99a,"translateMix",1)),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[(C$99c.getFrameCount()-1)*C$99et.PathConstraintMixTimeline.ENTRIES])}}}if(C$99t.deform)for(var C$99B in C$99t.deform){var C$99R=C$99t.deform[C$99B],C$99P=C$99e.findSkin(C$99B);if(null==C$99P)throw new Error("Skin not found: "+C$99B);for(C$99_ in C$99R){var C$99l,C$99d=C$99R[C$99_];if(-1==(C$99Z=C$99e.findSlotIndex(C$99_)))throw new Error("Slot not found: "+C$99d.name);for(C$99l in C$99d){var C$99r=C$99d[C$99l],C$99D=C$99P.getAttachment(C$99Z,C$99l);if(null!=C$99D){for(var C$99L=null!=C$99D.bones,C$99V=C$99D.vertices,C$99O=C$99L?C$99V.length/3*2:C$99V.length,C$99s=((C$99c=new C$99et.DeformTimeline(C$99r.length)).slotIndex=C$99Z,C$99c.attachment=C$99D,0),C$99F=0;C$99F<C$99r.length;C$99F++){var C$99a=C$99r[C$99F],C$99N=void 0,C$99k=this.getValue(C$99a,"vertices",null);if(null==C$99k)C$99N=C$99L?C$99et.Utils.newFloatArray(C$99O):C$99V;else{var C$99N=C$99et.Utils.newFloatArray(C$99O),C$99G=this.getValue(C$99a,"offset",0);if(C$99et.Utils.arrayCopy(C$99k,0,C$99N,C$99G,C$99k.length),1!=C$99u)for(var C$99z=(C$99o=C$99G)+C$99k.length;C$99o<C$99z;C$99o++)C$99N[C$99o]*=C$99u;if(!C$99L)for(C$99o=0;C$99o<C$99O;C$99o++)C$99N[C$99o]+=C$99V[C$99o]}C$99c.setFrame(C$99s,this.getValue(C$99a,"time",0),C$99N),this.readCurve(C$99a,C$99c,C$99s),C$99s++}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[C$99c.getFrameCount()-1])}}}}var C$99U=C$99t.drawOrder;if(null!=(C$99U=null==C$99U?C$99t.draworder:C$99U)){for(var C$99c=new C$99et.DrawOrderTimeline(C$99U.length),C$99W=C$99e.slots.length,C$99s=0,C$99F=0;C$99F<C$99U.length;C$99F++){var C$99H=C$99U[C$99F],C$99j=null,C$99X=this.getValue(C$99H,"offsets",null);if(null!=C$99X){for(var C$99j=C$99et.Utils.newArray(C$99W,-1),C$99Y=C$99et.Utils.newArray(C$99W-C$99X.length,0),C$99q=0,C$99J=0,C$99o=0;C$99o<C$99X.length;C$99o++){var C$99Z,C$99K=C$99X[C$99o];if(-1==(C$99Z=C$99e.findSlotIndex(C$99K.slot)))throw new Error("Slot not found: "+C$99K.slot);for(;C$99q!=C$99Z;)C$99Y[C$99J++]=C$99q++;C$99j[C$99q+C$99K.offset]=C$99q++}for(;C$99q<C$99W;)C$99Y[C$99J++]=C$99q++;for(C$99o=C$99W-1;0<=C$99o;C$99o--)-1==C$99j[C$99o]&&(C$99j[C$99o]=C$99Y[--C$99J])}C$99c.setFrame(C$99s++,this.getValue(C$99H,"time",0),C$99j)}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[C$99c.getFrameCount()-1])}if(C$99t.events){for(C$99c=new C$99et.EventTimeline(C$99t.events.length),C$99s=0,C$99o=0;C$99o<C$99t.events.length;C$99o++){var C$99Q=C$99t.events[C$99o],C$99$=C$99e.findEvent(C$99Q.name);if(null==C$99$)throw new Error("Event not found: "+C$99Q.name);var C$99tt=new C$99et.Event(C$99et.Utils.toSinglePrecision(this.getValue(C$99Q,"time",0)),C$99$);C$99tt.intValue=this.getValue(C$99Q,"int",C$99$.intValue),C$99tt.floatValue=this.getValue(C$99Q,"float",C$99$.floatValue),C$99tt.stringValue=this.getValue(C$99Q,"string",C$99$.stringValue),null!=C$99tt.data.audioPath&&(C$99tt.volume=this.getValue(C$99Q,"volume",1),C$99tt.balance=this.getValue(C$99Q,"balance",0)),C$99c.setFrame(C$99s++,C$99tt)}C$99i.push(C$99c),C$99n=Math.max(C$99n,C$99c.frames[C$99c.getFrameCount()-1])}if(isNaN(C$99n))throw new Error("Error while parsing animation, duration is NaN");C$99e.animations.push(new C$99et.Animation(C$99h,C$99i,C$99n))},C$99L.prototype.readCurve=function(C$99t,C$99e,C$99i){var C$99n=C$99t.curve;C$99n&&("stepped"==C$99n?C$99e.setStepped(C$99i):"[object Array]"===Object.prototype.toString.call(C$99n)?C$99e.setCurve(C$99i,C$99n[0],C$99n[1],C$99n[2],C$99n[3]):C$99e.setCurve(C$99i,C$99n,this.getValue(C$99t,"c2",0),this.getValue(C$99t,"c3",1),this.getValue(C$99t,"c4",1)))},C$99L.prototype.getValue=function(C$99t,C$99e,C$99i){return void 0!==C$99t[C$99e]?C$99t[C$99e]:C$99i},C$99L.blendModeFromString=function(C$99t){if("normal"==(C$99t=C$99t.toLowerCase()))return C$99et.BlendMode.Normal;if("additive"==C$99t)return C$99et.BlendMode.Additive;if("multiply"==C$99t)return C$99et.BlendMode.Multiply;if("screen"==C$99t)return C$99et.BlendMode.Screen;throw new Error("Unknown blend mode: "+C$99t)},C$99L.positionModeFromString=function(C$99t){if("fixed"==(C$99t=C$99t.toLowerCase()))return C$99et.PositionMode.Fixed;if("percent"==C$99t)return C$99et.PositionMode.Percent;throw new Error("Unknown position mode: "+C$99t)},C$99L.spacingModeFromString=function(C$99t){if("length"==(C$99t=C$99t.toLowerCase()))return C$99et.SpacingMode.Length;if("fixed"==C$99t)return C$99et.SpacingMode.Fixed;if("percent"==C$99t)return C$99et.SpacingMode.Percent;throw new Error("Unknown position mode: "+C$99t)},C$99L.rotateModeFromString=function(C$99t){if("tangent"==(C$99t=C$99t.toLowerCase()))return C$99et.RotateMode.Tangent;if("chain"==C$99t)return C$99et.RotateMode.Chain;if("chainscale"==C$99t)return C$99et.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+C$99t)},C$99L.transformModeFromString=function(C$99t){if("normal"==(C$99t=C$99t.toLowerCase()))return C$99et.TransformMode.Normal;if("onlytranslation"==C$99t)return C$99et.TransformMode.OnlyTranslation;if("norotationorreflection"==C$99t)return C$99et.TransformMode.NoRotationOrReflection;if("noscale"==C$99t)return C$99et.TransformMode.NoScale;if("noscaleorreflection"==C$99t)return C$99et.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+C$99t)},C$99et.SkeletonJson=C$99L;var C$99d=function(C$99t,C$99e,C$99i,C$99n,C$99r){this.mesh=C$99t,this.skin=C$99e,this.slotIndex=C$99i,this.parent=C$99n,this.inheritDeform=C$99r}}(C$99t=C$99t||{}),C$99p=C$99t=C$99t||{},C$99m=function(C$99t,C$99e,C$99i){this.slotIndex=C$99t,this.name=C$99e,this.attachment=C$99i},C$99p.SkinEntry=C$99m,C$99i.prototype.setAttachment=function(C$99t,C$99e,C$99i){if(null==C$99i)throw new Error("attachment cannot be null.");var C$99n=this.attachments;C$99t>=C$99n.length&&(C$99n.length=C$99t+1),C$99n[C$99t]||(C$99n[C$99t]={}),C$99n[C$99t][C$99e]=C$99i},C$99i.prototype.addSkin=function(C$99t){for(var C$99e=0;C$99e<C$99t.bones.length;C$99e++){for(var C$99i=C$99t.bones[C$99e],C$99n=!1,C$99r=0;C$99r<this.bones.length;C$99r++)if(this.bones[C$99r]==C$99i){C$99n=!0;break}C$99n||this.bones.push(C$99i)}for(C$99e=0;C$99e<C$99t.constraints.length;C$99e++){for(var C$99s=C$99t.constraints[C$99e],C$99n=!1,C$99r=0;C$99r<this.constraints.length;C$99r++)if(this.constraints[C$99r]==C$99s){C$99n=!0;break}C$99n||this.constraints.push(C$99s)}for(var C$99o=C$99t.getAttachments(),C$99e=0;C$99e<C$99o.length;C$99e++){var C$99a=C$99o[C$99e];this.setAttachment(C$99a.slotIndex,C$99a.name,C$99a.attachment)}},C$99i.prototype.copySkin=function(C$99t){for(var C$99e=0;C$99e<C$99t.bones.length;C$99e++){for(var C$99i=C$99t.bones[C$99e],C$99n=!1,C$99r=0;C$99r<this.bones.length;C$99r++)if(this.bones[C$99r]==C$99i){C$99n=!0;break}C$99n||this.bones.push(C$99i)}for(C$99e=0;C$99e<C$99t.constraints.length;C$99e++){for(var C$99s=C$99t.constraints[C$99e],C$99n=!1,C$99r=0;C$99r<this.constraints.length;C$99r++)if(this.constraints[C$99r]==C$99s){C$99n=!0;break}C$99n||this.constraints.push(C$99s)}for(var C$99o=C$99t.getAttachments(),C$99e=0;C$99e<C$99o.length;C$99e++){var C$99a=C$99o[C$99e];null!=C$99a.attachment&&(C$99a.attachment instanceof C$99p.MeshAttachment?C$99a.attachment=C$99a.attachment.newLinkedMesh():C$99a.attachment=C$99a.attachment.copy(),this.setAttachment(C$99a.slotIndex,C$99a.name,C$99a.attachment))}},C$99i.prototype.getAttachment=function(C$99t,C$99e){C$99t=this.attachments[C$99t];return C$99t?C$99t[C$99e]:null},C$99i.prototype.removeAttachment=function(C$99t,C$99e){C$99t=this.attachments[C$99t];C$99t&&(C$99t[C$99e]=null)},C$99i.prototype.getAttachments=function(){for(var C$99t=new Array,C$99e=0;C$99e<this.attachments.length;C$99e++){var C$99i=this.attachments[C$99e];if(C$99i)for(var C$99n in C$99i){var C$99r=C$99i[C$99n];C$99r&&C$99t.push(new C$99m(C$99e,C$99n,C$99r))}}return C$99t},C$99i.prototype.getAttachmentsForSlot=function(C$99t,C$99e){var C$99i=this.attachments[C$99t];if(C$99i)for(var C$99n in C$99i){var C$99r=C$99i[C$99n];C$99r&&C$99e.push(new C$99m(C$99t,C$99n,C$99r))}},C$99i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},C$99i.prototype.attachAll=function(C$99t,C$99e){for(var C$99i=0,C$99n=0;C$99n<C$99t.slots.length;C$99n++){var C$99r=C$99t.slots[C$99n],C$99s=C$99r.getAttachment();if(C$99s&&C$99i<C$99e.attachments.length){var C$99o,C$99a=C$99e.attachments[C$99i];for(C$99o in C$99a)if(C$99s==C$99a[C$99o]){var C$99c=this.getAttachment(C$99i,C$99o);null!=C$99c&&C$99r.setAttachment(C$99c);break}}C$99i++}},C$99p.Skin=C$99i,function(C$99i){function C$99t(C$99t,C$99e){if(this.deform=new Array,null==C$99t)throw new Error("data cannot be null.");if(null==C$99e)throw new Error("bone cannot be null.");this.data=C$99t,this.bone=C$99e,this.color=new C$99i.Color,this.darkColor=null==C$99t.darkColor?null:new C$99i.Color,this.setToSetupPose()}C$99t.prototype.getSkeleton=function(){return this.bone.skeleton},C$99t.prototype.getAttachment=function(){return this.attachment},C$99t.prototype.setAttachment=function(C$99t){this.attachment!=C$99t&&(this.attachment=C$99t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},C$99t.prototype.setAttachmentTime=function(C$99t){this.attachmentTime=this.bone.skeleton.time-C$99t},C$99t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},C$99t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},C$99i.Slot=C$99t}(C$99t=C$99t||{}),(C$99y=C$99t=C$99t||{}).SlotData=function(C$99t,C$99e,C$99i){if(this.color=new C$99y.Color(1,1,1,1),C$99t<0)throw new Error("index must be >= 0.");if(null==C$99e)throw new Error("name cannot be null.");if(null==C$99i)throw new Error("boneData cannot be null.");this.index=C$99t,this.name=C$99e,this.boneData=C$99i};var C$99n=C$99t=C$99t||{};C$99W.prototype.getImage=function(){return this._image},C$99W.filterFromString=function(C$99t){switch(C$99t.toLowerCase()){case"nearest":return C$99z.Nearest;case"linear":return C$99z.Linear;case"mipmap":return C$99z.MipMap;case"mipmapnearestnearest":return C$99z.MipMapNearestNearest;case"mipmaplinearnearest":return C$99z.MipMapLinearNearest;case"mipmapnearestlinear":return C$99z.MipMapNearestLinear;case"mipmaplinearlinear":return C$99z.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+C$99t)}},C$99W.wrapFromString=function(C$99t){switch(C$99t.toLowerCase()){case"mirroredtepeat":return C$99U.MirroredRepeat;case"clamptoedge":return C$99U.ClampToEdge;case"repeat":return C$99U.Repeat;default:throw new Error("Unknown texture wrap "+C$99t)}};var C$99z,C$99U,C$99e=C$99W;function C$99W(C$99t){this._image=C$99t}C$99n.Texture=C$99e,(C$99r=C$99z=C$99n.TextureFilter||(C$99n.TextureFilter={}))[C$99r.Nearest=9728]="Nearest",C$99r[C$99r.Linear=9729]="Linear",C$99r[C$99r.MipMap=9987]="MipMap",C$99r[C$99r.MipMapNearestNearest=9984]="MipMapNearestNearest",C$99r[C$99r.MipMapLinearNearest=9985]="MipMapLinearNearest",C$99r[C$99r.MipMapNearestLinear=9986]="MipMapNearestLinear",C$99r[C$99r.MipMapLinearLinear=9987]="MipMapLinearLinear",(C$99r=C$99U=C$99n.TextureWrap||(C$99n.TextureWrap={}))[C$99r.MirroredRepeat=33648]="MirroredRepeat",C$99r[C$99r.ClampToEdge=33071]="ClampToEdge",C$99r[C$99r.Repeat=10497]="Repeat",C$99n.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},C$99V(C$99Y,C$99X=C$99e),C$99Y.prototype.setFilters=function(C$99t,C$99e){},C$99Y.prototype.setWraps=function(C$99t,C$99e){},C$99Y.prototype.dispose=function(){};var C$99X,C$99r=C$99Y;function C$99Y(){return null!==C$99X&&C$99X.apply(this,arguments)||this}function C$99q(C$99t){C$99t=C$99g.call(this,C$99t,0,!1)||this;return C$99t.bones=new Array,C$99t.rotateMix=0,C$99t.translateMix=0,C$99t.scaleMix=0,C$99t.shearMix=0,C$99t.offsetRotation=0,C$99t.offsetX=0,C$99t.offsetY=0,C$99t.offsetScaleX=0,C$99t.offsetScaleY=0,C$99t.offsetShearY=0,C$99t.relative=!1,C$99t.local=!1,C$99t}function C$99J(C$99t){if(null==C$99t)throw new Error("name cannot be null.");this.name=C$99t}function C$99Z(C$99t){C$99t=C$99b.call(this,C$99t)||this;return C$99t.id=(65535&C$99Z.nextID++)<<11,C$99t.worldVerticesLength=0,C$99t.deformAttachment=C$99t}function C$99K(C$99t){C$99t=C$99C.call(this,C$99t)||this;return C$99t.color=new C$99A.Color(1,1,1,1),C$99t}function C$99Q(C$99t){C$99t=C$99T.call(this,C$99t)||this;return C$99t.color=new C$99S.Color(.2275,.2275,.8078,1),C$99t}function C$99$(C$99t){C$99t=C$99w.call(this,C$99t)||this;return C$99t.color=new C$99u.Color(1,1,1,1),C$99t.tempColor=new C$99u.Color(0,0,0,0),C$99t}function C$99tt(C$99t){C$99t=C$99M.call(this,C$99t)||this;return C$99t.closed=!1,C$99t.constantSpeed=!1,C$99t.color=new C$99E.Color(1,1,1,1),C$99t}function C$99et(C$99t){C$99t=C$99B.call(this,C$99t)||this;return C$99t.color=new C$99I.Color(.38,.94,0,1),C$99t}function C$99_(C$99t){C$99t=C$99P.call(this,C$99t)||this;return C$99t.x=0,C$99t.y=0,C$99t.scaleX=1,C$99t.scaleY=1,C$99t.rotation=0,C$99t.width=0,C$99t.height=0,C$99t.color=new C$99R.Color(1,1,1,1),C$99t.offset=C$99R.Utils.newFloatArray(8),C$99t.uvs=C$99R.Utils.newFloatArray(8),C$99t.tempColor=new C$99R.Color(1,1,1,1),C$99t}function C$99it(C$99t,C$99e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=C$99t,this.interpolation=C$99e}C$99n.FakeTexture=C$99r,function(C$99u){function C$99t(C$99t,C$99e){this.pages=new Array,this.regions=new Array,this.load(C$99t,C$99e)}C$99t.prototype.load=function(C$99h,C$99t){if(null==C$99t)throw new Error("textureLoader cannot be null.");for(var C$99e=new C$99_(C$99h),C$99i=new Array(4),C$99n=null;;){var C$99r,C$99s,C$99o,C$99a,C$99c,C$99l=C$99e.readLine();if(null==C$99l)break;0==(C$99l=C$99l.trim()).length?C$99n=null:C$99n?((C$99r=new C$99f).name=C$99l,C$99r.page=C$99n,"true"==(C$99c=C$99e.readValue()).toLocaleLowerCase()?C$99r.degrees=90:"false"==C$99c.toLocaleLowerCase()?C$99r.degrees=0:C$99r.degrees=parseFloat(C$99c),C$99r.rotate=90==C$99r.degrees,C$99e.readTuple(C$99i),C$99c=parseInt(C$99i[0]),C$99s=parseInt(C$99i[1]),C$99e.readTuple(C$99i),C$99o=parseInt(C$99i[0]),C$99a=parseInt(C$99i[1]),C$99r.u=C$99c/C$99n.width,C$99r.v=C$99s/C$99n.height,C$99r.rotate?(C$99r.u2=(C$99c+C$99a)/C$99n.width,C$99r.v2=(C$99s+C$99o)/C$99n.height):(C$99r.u2=(C$99c+C$99o)/C$99n.width,C$99r.v2=(C$99s+C$99a)/C$99n.height),C$99r.x=C$99c,C$99r.y=C$99s,C$99r.width=Math.abs(C$99o),C$99r.height=Math.abs(C$99a),4==C$99e.readTuple(C$99i)&&4==C$99e.readTuple(C$99i)&&C$99e.readTuple(C$99i),C$99r.originalWidth=parseInt(C$99i[0]),C$99r.originalHeight=parseInt(C$99i[1]),C$99e.readTuple(C$99i),C$99r.offsetX=parseInt(C$99i[0]),C$99r.offsetY=parseInt(C$99i[1]),C$99r.index=parseInt(C$99e.readValue()),C$99r.texture=C$99n.texture,this.regions.push(C$99r)):((C$99n=new C$99d).name=C$99l,2==C$99e.readTuple(C$99i)&&(C$99n.width=parseInt(C$99i[0]),C$99n.height=parseInt(C$99i[1]),C$99e.readTuple(C$99i)),C$99e.readTuple(C$99i),C$99n.minFilter=C$99u.Texture.filterFromString(C$99i[0]),C$99n.magFilter=C$99u.Texture.filterFromString(C$99i[1]),C$99c=C$99e.readValue(),C$99n.uWrap=C$99u.TextureWrap.ClampToEdge,C$99n.vWrap=C$99u.TextureWrap.ClampToEdge,"x"==C$99c?C$99n.uWrap=C$99u.TextureWrap.Repeat:"y"==C$99c?C$99n.vWrap=C$99u.TextureWrap.Repeat:"xy"==C$99c&&(C$99n.uWrap=C$99n.vWrap=C$99u.TextureWrap.Repeat),C$99n.texture=C$99t(C$99l),C$99n.texture.setFilters(C$99n.minFilter,C$99n.magFilter),C$99n.texture.setWraps(C$99n.uWrap,C$99n.vWrap),C$99n.width=C$99n.texture.getImage().width,C$99n.height=C$99n.texture.getImage().height,this.pages.push(C$99n))}},C$99t.prototype.findRegion=function(C$99t){for(var C$99e=0;C$99e<this.regions.length;C$99e++)if(this.regions[C$99e].name==C$99t)return this.regions[C$99e];return null},C$99t.prototype.dispose=function(){for(var C$99t=0;C$99t<this.pages.length;C$99t++)this.pages[C$99t].texture.dispose()},C$99u.TextureAtlas=C$99t;C$99e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},C$99e.prototype.readValue=function(){var C$99t=this.readLine(),C$99e=C$99t.indexOf(":");if(-1==C$99e)throw new Error("Invalid line: "+C$99t);return C$99t.substring(C$99e+1).trim()},C$99e.prototype.readTuple=function(C$99t){var C$99e=this.readLine(),C$99i=C$99e.indexOf(":");if(-1==C$99i)throw new Error("Invalid line: "+C$99e);for(var C$99n=0,C$99r=C$99i+1;C$99n<3;C$99n++){var C$99s=C$99e.indexOf(",",C$99r);if(-1==C$99s)break;C$99t[C$99n]=C$99e.substr(C$99r,C$99s-C$99r).trim(),C$99r=C$99s+1}return C$99t[C$99n]=C$99e.substring(C$99r).trim(),C$99n+1};var C$99_=C$99e;function C$99e(C$99t){this.index=0,this.lines=C$99t.split(/\r\n|\r|\n/)}var C$99i,C$99d=function(){},C$99f=(C$99u.TextureAtlasPage=C$99d,C$99i=C$99u.TextureRegion,C$99V(C$99n,C$99i),C$99n);function C$99n(){return null!==C$99i&&C$99i.apply(this,arguments)||this}C$99u.TextureAtlasRegion=C$99f}(C$99t=C$99t||{}),function(C$99T){function C$99t(C$99t,C$99e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new C$99T.Vector2,this.active=!1,null==C$99t)throw new Error("data cannot be null.");if(null==C$99e)throw new Error("skeleton cannot be null.");this.data=C$99t,this.rotateMix=C$99t.rotateMix,this.translateMix=C$99t.translateMix,this.scaleMix=C$99t.scaleMix,this.shearMix=C$99t.shearMix,this.bones=new Array;for(var C$99i=0;C$99i<C$99t.bones.length;C$99i++)this.bones.push(C$99e.findBone(C$99t.bones[C$99i].name));this.target=C$99e.findBone(C$99t.target.name)}C$99t.prototype.isActive=function(){return this.active},C$99t.prototype.apply=function(){this.update()},C$99t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},C$99t.prototype.applyAbsoluteWorld=function(){for(var C$99h=this.rotateMix,C$99u=this.translateMix,C$99_=this.scaleMix,C$99d=this.shearMix,C$99t=this.target,C$99e=C$99t.a,C$99f=C$99t.b,C$99p=C$99t.c,C$99m=C$99t.d,C$99y=0<C$99e*C$99m-C$99f*C$99p?C$99T.MathUtils.degRad:-C$99T.MathUtils.degRad,C$99g=this.data.offsetRotation*C$99y,C$99v=this.data.offsetShearY*C$99y,C$99x=this.bones,C$99b=0,C$99A=C$99x.length;C$99b<C$99A;C$99b++){var C$99C,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l=C$99x[C$99b],C$99S=!1;0!=C$99h&&(C$99i=C$99l.a,C$99r=C$99l.b,C$99n=C$99l.c,C$99s=C$99l.d,(C$99a=Math.atan2(C$99p,C$99e)-Math.atan2(C$99n,C$99i)+C$99g)>C$99T.MathUtils.PI?C$99a-=C$99T.MathUtils.PI2:C$99a<-C$99T.MathUtils.PI&&(C$99a+=C$99T.MathUtils.PI2),C$99a*=C$99h,C$99C=Math.cos(C$99a),C$99o=Math.sin(C$99a),C$99l.a=C$99C*C$99i-C$99o*C$99n,C$99l.b=C$99C*C$99r-C$99o*C$99s,C$99l.c=C$99o*C$99i+C$99C*C$99n,C$99l.d=C$99o*C$99r+C$99C*C$99s,C$99S=!0),0!=C$99u&&(C$99i=this.temp,C$99t.localToWorld(C$99i.set(this.data.offsetX,this.data.offsetY)),C$99l.worldX+=(C$99i.x-C$99l.worldX)*C$99u,C$99l.worldY+=(C$99i.y-C$99l.worldY)*C$99u,C$99S=!0),0<C$99_&&(C$99c=Math.sqrt(C$99l.a*C$99l.a+C$99l.c*C$99l.c),C$99n=Math.sqrt(C$99e*C$99e+C$99p*C$99p),1e-5<C$99c&&(C$99c=(C$99c+(C$99n-C$99c+this.data.offsetScaleX)*C$99_)/C$99c),C$99l.a*=C$99c,C$99l.c*=C$99c,C$99c=Math.sqrt(C$99l.b*C$99l.b+C$99l.d*C$99l.d),C$99n=Math.sqrt(C$99f*C$99f+C$99m*C$99m),1e-5<C$99c&&(C$99c=(C$99c+(C$99n-C$99c+this.data.offsetScaleY)*C$99_)/C$99c),C$99l.b*=C$99c,C$99l.d*=C$99c,C$99S=!0),0<C$99d&&(C$99r=C$99l.b,C$99s=C$99l.d,C$99o=Math.atan2(C$99s,C$99r),(C$99a=Math.atan2(C$99m,C$99f)-Math.atan2(C$99p,C$99e)-(C$99o-Math.atan2(C$99l.c,C$99l.a)))>C$99T.MathUtils.PI?C$99a-=C$99T.MathUtils.PI2:C$99a<-C$99T.MathUtils.PI&&(C$99a+=C$99T.MathUtils.PI2),C$99a=C$99o+(C$99a+C$99v)*C$99d,C$99c=Math.sqrt(C$99r*C$99r+C$99s*C$99s),C$99l.b=Math.cos(C$99a)*C$99c,C$99l.d=Math.sin(C$99a)*C$99c,C$99S=!0),C$99S&&(C$99l.appliedValid=!1)}},C$99t.prototype.applyRelativeWorld=function(){for(var C$99h=this.rotateMix,C$99u=this.translateMix,C$99_=this.scaleMix,C$99d=this.shearMix,C$99t=this.target,C$99e=C$99t.a,C$99f=C$99t.b,C$99i=C$99t.c,C$99p=C$99t.d,C$99m=0<C$99e*C$99p-C$99f*C$99i?C$99T.MathUtils.degRad:-C$99T.MathUtils.degRad,C$99y=this.data.offsetRotation*C$99m,C$99g=this.data.offsetShearY*C$99m,C$99v=this.bones,C$99x=0,C$99b=C$99v.length;C$99x<C$99b;C$99x++){var C$99A,C$99n,C$99C,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l=C$99v[C$99x],C$99S=!1;0!=C$99h&&(C$99r=C$99l.a,C$99o=C$99l.b,C$99A=C$99l.c,C$99a=C$99l.d,(C$99s=Math.atan2(C$99i,C$99e)+C$99y)>C$99T.MathUtils.PI?C$99s-=C$99T.MathUtils.PI2:C$99s<-C$99T.MathUtils.PI&&(C$99s+=C$99T.MathUtils.PI2),C$99s*=C$99h,C$99n=Math.cos(C$99s),C$99C=Math.sin(C$99s),C$99l.a=C$99n*C$99r-C$99C*C$99A,C$99l.b=C$99n*C$99o-C$99C*C$99a,C$99l.c=C$99C*C$99r+C$99n*C$99A,C$99l.d=C$99C*C$99o+C$99n*C$99a,C$99S=!0),0!=C$99u&&(C$99r=this.temp,C$99t.localToWorld(C$99r.set(this.data.offsetX,this.data.offsetY)),C$99l.worldX+=C$99r.x*C$99u,C$99l.worldY+=C$99r.y*C$99u,C$99S=!0),0<C$99_&&(C$99c=(Math.sqrt(C$99e*C$99e+C$99i*C$99i)-1+this.data.offsetScaleX)*C$99_+1,C$99l.a*=C$99c,C$99l.c*=C$99c,C$99c=(Math.sqrt(C$99f*C$99f+C$99p*C$99p)-1+this.data.offsetScaleY)*C$99_+1,C$99l.b*=C$99c,C$99l.d*=C$99c,C$99S=!0),0<C$99d&&((C$99s=Math.atan2(C$99p,C$99f)-Math.atan2(C$99i,C$99e))>C$99T.MathUtils.PI?C$99s-=C$99T.MathUtils.PI2:C$99s<-C$99T.MathUtils.PI&&(C$99s+=C$99T.MathUtils.PI2),C$99o=C$99l.b,C$99a=C$99l.d,C$99s=Math.atan2(C$99a,C$99o)+(C$99s-C$99T.MathUtils.PI/2+C$99g)*C$99d,C$99c=Math.sqrt(C$99o*C$99o+C$99a*C$99a),C$99l.b=Math.cos(C$99s)*C$99c,C$99l.d=Math.sin(C$99s)*C$99c,C$99S=!0),C$99S&&(C$99l.appliedValid=!1)}},C$99t.prototype.applyAbsoluteLocal=function(){for(var C$99h=this.rotateMix,C$99t=this.translateMix,C$99e=this.scaleMix,C$99u=this.shearMix,C$99i=this.target,C$99_=(C$99i.appliedValid||C$99i.updateAppliedTransform(),this.bones),C$99n=0,C$99d=C$99_.length;C$99n<C$99d;C$99n++){var C$99r,C$99s=C$99_[C$99n],C$99o=(C$99s.appliedValid||C$99s.updateAppliedTransform(),C$99s.arotation),C$99a=(0!=C$99h&&(C$99r=C$99i.arotation-C$99o+this.data.offsetRotation,C$99o+=(C$99r-=360*(16384-(16384.499999999996-C$99r/360|0)))*C$99h),C$99s.ax),C$99f=C$99s.ay,C$99c=(0!=C$99t&&(C$99a+=(C$99i.ax-C$99a+this.data.offsetX)*C$99t,C$99f+=(C$99i.ay-C$99f+this.data.offsetY)*C$99t),C$99s.ascaleX),C$99l=C$99s.ascaleY,C$99p=(0!=C$99e&&(1e-5<C$99c&&(C$99c=(C$99c+(C$99i.ascaleX-C$99c+this.data.offsetScaleX)*C$99e)/C$99c),1e-5<C$99l&&(C$99l=(C$99l+(C$99i.ascaleY-C$99l+this.data.offsetScaleY)*C$99e)/C$99l)),C$99s.ashearY);0!=C$99u&&(C$99r=C$99i.ashearY-C$99p+this.data.offsetShearY,C$99r-=360*(16384-(16384.499999999996-C$99r/360|0)),C$99s.shearY+=C$99r*C$99u),C$99s.updateWorldTransformWith(C$99a,C$99f,C$99o,C$99c,C$99l,C$99s.ashearX,C$99p)}},C$99t.prototype.applyRelativeLocal=function(){for(var C$99t=this.rotateMix,C$99e=this.translateMix,C$99i=this.scaleMix,C$99n=this.shearMix,C$99r=this.target,C$99s=(C$99r.appliedValid||C$99r.updateAppliedTransform(),this.bones),C$99o=0,C$99h=C$99s.length;C$99o<C$99h;C$99o++){var C$99a=C$99s[C$99o],C$99u=(C$99a.appliedValid||C$99a.updateAppliedTransform(),C$99a.arotation),C$99_=(0!=C$99t&&(C$99u+=(C$99r.arotation+this.data.offsetRotation)*C$99t),C$99a.ax),C$99d=C$99a.ay,C$99c=(0!=C$99e&&(C$99_+=(C$99r.ax+this.data.offsetX)*C$99e,C$99d+=(C$99r.ay+this.data.offsetY)*C$99e),C$99a.ascaleX),C$99l=C$99a.ascaleY,C$99f=(0!=C$99i&&(1e-5<C$99c&&(C$99c*=(C$99r.ascaleX-1+this.data.offsetScaleX)*C$99i+1),1e-5<C$99l&&(C$99l*=(C$99r.ascaleY-1+this.data.offsetScaleY)*C$99i+1)),C$99a.ashearY);0!=C$99n&&(C$99f+=(C$99r.ashearY+this.data.offsetShearY)*C$99n),C$99a.updateWorldTransformWith(C$99_,C$99d,C$99u,C$99c,C$99l,C$99a.ashearX,C$99f)}},C$99T.TransformConstraint=C$99t}(C$99t=C$99t||{}),C$99e=C$99t=C$99t||{},C$99g=C$99e.ConstraintData,C$99V(C$99q,C$99g),C$99e.TransformConstraintData=C$99q,function(C$99t){function C$99z(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new C$99t.Pool(function(){return new Array}),this.polygonIndicesPool=new C$99t.Pool(function(){return new Array})}C$99z.prototype.triangulate=function(C$99h){for(var C$99t=C$99h,C$99e=C$99h.length>>1,C$99i=this.indicesArray,C$99n=C$99i.length=0;C$99n<C$99e;C$99n++)C$99i[C$99n]=C$99n;for(var C$99r=this.isConcaveArray,C$99n=C$99r.length=0,C$99u=C$99e;C$99n<C$99u;++C$99n)C$99r[C$99n]=C$99z.isConcave(C$99n,C$99e,C$99t,C$99i);var C$99s=this.triangles;for(C$99s.length=0;3<C$99e;){for(var C$99o=C$99e-1,C$99n=0,C$99a=1;;){C$99t:if(!C$99r[C$99n]){for(var C$99_=C$99i[C$99o]<<1,C$99d=C$99i[C$99n]<<1,C$99f=C$99i[C$99a]<<1,C$99p=C$99t[C$99_],C$99m=C$99t[1+C$99_],C$99y=C$99t[C$99d],C$99g=C$99t[1+C$99d],C$99v=C$99t[C$99f],C$99x=C$99t[1+C$99f],C$99c=(C$99a+1)%C$99e;C$99c!=C$99o;C$99c=(C$99c+1)%C$99e)if(C$99r[C$99c]){var C$99l=C$99i[C$99c]<<1,C$99b=C$99t[C$99l],C$99l=C$99t[1+C$99l];if(C$99z.positiveArea(C$99v,C$99x,C$99p,C$99m,C$99b,C$99l)&&C$99z.positiveArea(C$99p,C$99m,C$99y,C$99g,C$99b,C$99l)&&C$99z.positiveArea(C$99y,C$99g,C$99v,C$99x,C$99b,C$99l))break C$99t}break}if(0==C$99a){for(;C$99r[C$99n]&&0<--C$99n;);break}C$99o=C$99n,C$99a=((C$99n=C$99a)+1)%C$99e}C$99s.push(C$99i[(C$99e+C$99n-1)%C$99e]),C$99s.push(C$99i[C$99n]),C$99s.push(C$99i[(C$99n+1)%C$99e]),C$99i.splice(C$99n,1),C$99r.splice(C$99n,1);var C$99A=(--C$99e+C$99n-1)%C$99e,C$99C=C$99n==C$99e?0:C$99n;C$99r[C$99A]=C$99z.isConcave(C$99A,C$99e,C$99t,C$99i),C$99r[C$99C]=C$99z.isConcave(C$99C,C$99e,C$99t,C$99i)}return 3==C$99e&&(C$99s.push(C$99i[2]),C$99s.push(C$99i[0]),C$99s.push(C$99i[1])),C$99s},C$99z.prototype.decompose=function(C$99h,C$99u){for(var C$99t=C$99h,C$99e=this.convexPolygons,C$99i=(this.polygonPool.freeAll(C$99e),C$99e.length=0,this.convexPolygonsIndices),C$99n=(this.polygonIndicesPool.freeAll(C$99i),C$99i.length=0,this.polygonIndicesPool.obtain()),C$99r=(C$99n.length=0,this.polygonPool.obtain()),C$99_=-1,C$99d=C$99r.length=0,C$99s=0,C$99f=C$99u.length;C$99s<C$99f;C$99s+=3){var C$99p=C$99u[C$99s]<<1,C$99m=C$99u[C$99s+1]<<1,C$99y=C$99u[C$99s+2]<<1,C$99g=C$99t[C$99p],C$99v=C$99t[1+C$99p],C$99x=C$99t[C$99m],C$99b=C$99t[1+C$99m],C$99o=C$99t[C$99y],C$99a=C$99t[1+C$99y],C$99A=!1;C$99_==C$99p&&(C$99c=C$99r.length-4,C$99M=C$99z.winding(C$99r[C$99c],C$99r[C$99c+1],C$99r[C$99c+2],C$99r[C$99c+3],C$99o,C$99a),C$99I=C$99z.winding(C$99o,C$99a,C$99r[0],C$99r[1],C$99r[2],C$99r[3]),C$99M==C$99d&&C$99I==C$99d&&(C$99r.push(C$99o),C$99r.push(C$99a),C$99n.push(C$99y),C$99A=!0)),C$99A||(0<C$99r.length?(C$99e.push(C$99r),C$99i.push(C$99n)):(this.polygonPool.free(C$99r),this.polygonIndicesPool.free(C$99n)),(C$99r=this.polygonPool.obtain()).length=0,C$99r.push(C$99g),C$99r.push(C$99v),C$99r.push(C$99x),C$99r.push(C$99b),C$99r.push(C$99o),C$99r.push(C$99a),(C$99n=this.polygonIndicesPool.obtain()).length=0,C$99n.push(C$99p),C$99n.push(C$99m),C$99n.push(C$99y),C$99d=C$99z.winding(C$99g,C$99v,C$99x,C$99b,C$99o,C$99a),C$99_=C$99p)}0<C$99r.length&&(C$99e.push(C$99r),C$99i.push(C$99n));for(C$99s=0,C$99f=C$99e.length;C$99s<C$99f;C$99s++)if(0!=(C$99n=C$99i[C$99s]).length)for(var C$99c,C$99C,C$99S,C$99T,C$99w,C$99E,C$99M,C$99I,C$99B=C$99n[0],C$99R=C$99n[C$99n.length-1],C$99P=(C$99r=C$99e[C$99s])[C$99c=C$99r.length-4],C$99D=C$99r[C$99c+1],C$99L=C$99r[C$99c+2],C$99V=C$99r[C$99c+3],C$99O=C$99r[0],C$99F=C$99r[1],C$99N=C$99r[2],C$99k=C$99r[3],C$99G=C$99z.winding(C$99P,C$99D,C$99L,C$99V,C$99O,C$99F),C$99l=0;C$99l<C$99f;C$99l++)C$99l!=C$99s&&(3==(C$99C=C$99i[C$99l]).length&&(C$99S=C$99C[0],C$99T=C$99C[1],C$99w=C$99C[2],C$99o=(C$99E=C$99e[C$99l])[C$99E.length-2],C$99a=C$99E[C$99E.length-1],C$99S==C$99B&&C$99T==C$99R&&(C$99M=C$99z.winding(C$99P,C$99D,C$99L,C$99V,C$99o,C$99a),C$99I=C$99z.winding(C$99o,C$99a,C$99O,C$99F,C$99N,C$99k),C$99M==C$99G&&C$99I==C$99G&&(C$99E.length=0,C$99C.length=0,C$99r.push(C$99o),C$99r.push(C$99a),C$99n.push(C$99w),C$99P=C$99L,C$99D=C$99V,C$99L=C$99o,C$99V=C$99a,C$99l=0))));for(C$99s=C$99e.length-1;0<=C$99s;C$99s--)0==(C$99r=C$99e[C$99s]).length&&(C$99e.splice(C$99s,1),this.polygonPool.free(C$99r),C$99n=C$99i[C$99s],C$99i.splice(C$99s,1),this.polygonIndicesPool.free(C$99n));return C$99e},C$99z.isConcave=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99n[(C$99e+C$99t-1)%C$99e]<<1,C$99s=C$99n[C$99t]<<1,C$99n=C$99n[(C$99t+1)%C$99e]<<1;return!this.positiveArea(C$99i[C$99r],C$99i[1+C$99r],C$99i[C$99s],C$99i[1+C$99s],C$99i[C$99n],C$99i[1+C$99n])},C$99z.positiveArea=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){return 0<=C$99t*(C$99s-C$99n)+C$99i*(C$99e-C$99s)+C$99r*(C$99n-C$99e)},C$99z.winding=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){C$99i-=C$99t,C$99n-=C$99e;return 0<=C$99r*C$99n-C$99s*C$99i+C$99i*C$99e-C$99t*C$99n?1:-1},C$99t.Triangulator=C$99z}(C$99t=C$99t||{}),function(C$99t){function C$99e(){this.array=new Array}function C$99i(C$99t,C$99e,C$99i,C$99n){void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),void 0===C$99n&&(C$99n=0),this.r=C$99t=void 0===C$99t?0:C$99t,this.g=C$99e,this.b=C$99i,this.a=C$99n}function C$99n(){}C$99e.prototype.add=function(C$99t){var C$99e=this.contains(C$99t);return this.array[0|C$99t]=0|C$99t,!C$99e},C$99e.prototype.contains=function(C$99t){return null!=this.array[0|C$99t]},C$99e.prototype.remove=function(C$99t){this.array[0|C$99t]=void 0},C$99e.prototype.clear=function(){this.array.length=0},C$99t.IntSet=C$99e,C$99i.prototype.set=function(C$99t,C$99e,C$99i,C$99n){return this.r=C$99t,this.g=C$99e,this.b=C$99i,this.a=C$99n,this.clamp(),this},C$99i.prototype.setFromColor=function(C$99t){return this.r=C$99t.r,this.g=C$99t.g,this.b=C$99t.b,this.a=C$99t.a,this},C$99i.prototype.setFromString=function(C$99t){return C$99t="#"==C$99t.charAt(0)?C$99t.substr(1):C$99t,this.r=parseInt(C$99t.substr(0,2),16)/255,this.g=parseInt(C$99t.substr(2,2),16)/255,this.b=parseInt(C$99t.substr(4,2),16)/255,this.a=(8!=C$99t.length?255:parseInt(C$99t.substr(6,2),16))/255,this},C$99i.prototype.add=function(C$99t,C$99e,C$99i,C$99n){return this.r+=C$99t,this.g+=C$99e,this.b+=C$99i,this.a+=C$99n,this.clamp(),this},C$99i.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},C$99i.rgba8888ToColor=function(C$99t,C$99e){C$99t.r=((4278190080&C$99e)>>>24)/255,C$99t.g=((16711680&C$99e)>>>16)/255,C$99t.b=((65280&C$99e)>>>8)/255,C$99t.a=(255&C$99e)/255},C$99i.rgb888ToColor=function(C$99t,C$99e){C$99t.r=((16711680&C$99e)>>>16)/255,C$99t.g=((65280&C$99e)>>>8)/255,C$99t.b=(255&C$99e)/255},C$99i.WHITE=new C$99i(1,1,1,1),C$99i.RED=new C$99i(1,0,0,1),C$99i.GREEN=new C$99i(0,1,0,1),C$99i.BLUE=new C$99i(0,0,1,1),C$99i.MAGENTA=new C$99i(1,0,1,1),C$99t.Color=C$99i,C$99n.clamp=function(C$99t,C$99e,C$99i){return C$99t<C$99e?C$99e:C$99i<C$99t?C$99i:C$99t},C$99n.cosDeg=function(C$99t){return Math.cos(C$99t*C$99n.degRad)},C$99n.sinDeg=function(C$99t){return Math.sin(C$99t*C$99n.degRad)},C$99n.signum=function(C$99t){return 0<C$99t?1:C$99t<0?-1:0},C$99n.toInt=function(C$99t){return 0<C$99t?Math.floor(C$99t):Math.ceil(C$99t)},C$99n.cbrt=function(C$99t){var C$99e=Math.pow(Math.abs(C$99t),1/3);return C$99t<0?-C$99e:C$99e},C$99n.randomTriangular=function(C$99t,C$99e){return C$99n.randomTriangularWith(C$99t,C$99e,.5*(C$99t+C$99e))},C$99n.randomTriangularWith=function(C$99t,C$99e,C$99i){var C$99n=Math.random(),C$99r=C$99e-C$99t;return C$99n<=(C$99i-C$99t)/C$99r?C$99t+Math.sqrt(C$99n*C$99r*(C$99i-C$99t)):C$99e-Math.sqrt((1-C$99n)*C$99r*(C$99e-C$99i))},C$99n.PI2=2*(C$99n.PI=3.1415927),C$99n.radDeg=C$99n.radiansToDegrees=180/C$99n.PI,C$99n.degRad=C$99n.degreesToRadians=C$99n.PI/180,C$99t.MathUtils=C$99n;C$99h.prototype.apply=function(C$99t,C$99e,C$99i){return C$99t+(C$99e-C$99t)*this.applyInternal(C$99i)};var C$99r=C$99h;function C$99h(){}C$99t.Interpolation=C$99r;C$99V(C$99s,C$99u=C$99r),C$99s.prototype.applyInternal=function(C$99t){return C$99t<=.5?Math.pow(2*C$99t,this.power)/2:Math.pow(2*(C$99t-1),this.power)/(this.power%2==0?-2:2)+1};var C$99u,C$99r=C$99s;function C$99s(C$99t){var C$99e=C$99u.call(this)||this;return C$99e.power=2,C$99e.power=C$99t,C$99e}C$99t.Pow=C$99r;C$99V(C$99d,C$99_=C$99r),C$99d.prototype.applyInternal=function(C$99t){return Math.pow(C$99t-1,this.power)*(this.power%2==0?-1:1)+1};var C$99_,C$99r=C$99d;function C$99d(C$99t){return C$99_.call(this,C$99t)||this}function C$99o(){}function C$99f(){}function C$99a(C$99t){this.items=new Array,this.instantiator=C$99t}function C$99c(C$99t,C$99e){void 0===C$99e&&(C$99e=0),this.x=C$99t=void 0===C$99t?0:C$99t,this.y=C$99e}function C$99p(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function C$99l(C$99t){void 0===C$99t&&(C$99t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(C$99t)}C$99t.PowOut=C$99r,C$99o.arrayCopy=function(C$99t,C$99e,C$99i,C$99n,C$99r){for(var C$99s=C$99e,C$99o=C$99n;C$99s<C$99e+C$99r;C$99s++,C$99o++)C$99i[C$99o]=C$99t[C$99s]},C$99o.setArraySize=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=0);var C$99n=C$99t.length;if(C$99n==C$99e)return C$99t;if(C$99n<(C$99t.length=C$99e))for(var C$99r=C$99n;C$99r<C$99e;C$99r++)C$99t[C$99r]=C$99i;return C$99t},C$99o.ensureArrayCapacity=function(C$99t,C$99e,C$99i){return void 0===C$99i&&(C$99i=0),C$99t.length>=C$99e?C$99t:C$99o.setArraySize(C$99t,C$99e,C$99i)},C$99o.newArray=function(C$99t,C$99e){for(var C$99i=new Array(C$99t),C$99n=0;C$99n<C$99t;C$99n++)C$99i[C$99n]=C$99e;return C$99i},C$99o.newFloatArray=function(C$99t){if(C$99o.SUPPORTS_TYPED_ARRAYS)return new Float32Array(C$99t);for(var C$99e=new Array(C$99t),C$99i=0;C$99i<C$99e.length;C$99i++)C$99e[C$99i]=0;return C$99e},C$99o.newShortArray=function(C$99t){if(C$99o.SUPPORTS_TYPED_ARRAYS)return new Int16Array(C$99t);for(var C$99e=new Array(C$99t),C$99i=0;C$99i<C$99e.length;C$99i++)C$99e[C$99i]=0;return C$99e},C$99o.toFloatArray=function(C$99t){return C$99o.SUPPORTS_TYPED_ARRAYS?new Float32Array(C$99t):C$99t},C$99o.toSinglePrecision=function(C$99t){return C$99o.SUPPORTS_TYPED_ARRAYS?Math.fround(C$99t):C$99t},C$99o.webkit602BugfixHelper=function(C$99t,C$99e){},C$99o.contains=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=!0);for(var C$99n=0;C$99n<C$99t.length;C$99n++)if(C$99t[C$99n]==C$99e)return!0;return!1},C$99o.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,C$99t.Utils=C$99o,C$99f.logBones=function(C$99t){for(var C$99e=0;C$99e<C$99t.bones.length;C$99e++){var C$99i=C$99t.bones[C$99e];console.log(C$99i.data.name+", "+C$99i.a+", "+C$99i.b+", "+C$99i.c+", "+C$99i.d+", "+C$99i.worldX+", "+C$99i.worldY)}},C$99t.DebugUtils=C$99f,C$99a.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},C$99a.prototype.free=function(C$99t){C$99t.reset&&C$99t.reset(),this.items.push(C$99t)},C$99a.prototype.freeAll=function(C$99t){for(var C$99e=0;C$99e<C$99t.length;C$99e++)C$99t[C$99e].reset&&C$99t[C$99e].reset(),this.items[C$99e]=C$99t[C$99e]},C$99a.prototype.clear=function(){this.items.length=0},C$99t.Pool=C$99a,C$99c.prototype.set=function(C$99t,C$99e){return this.x=C$99t,this.y=C$99e,this},C$99c.prototype.length=function(){var C$99t=this.x,C$99e=this.y;return Math.sqrt(C$99t*C$99t+C$99e*C$99e)},C$99c.prototype.normalize=function(){var C$99t=this.length();return 0!=C$99t&&(this.x/=C$99t,this.y/=C$99t),this},C$99t.Vector2=C$99c,C$99p.prototype.update=function(){var C$99t=Date.now()/1e3;this.delta=C$99t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=C$99t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},C$99t.TimeKeeper=C$99p,C$99l.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},C$99l.prototype.addValue=function(C$99t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=C$99t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},C$99l.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var C$99t=0,C$99e=0;C$99e<this.values.length;C$99e++)C$99t+=this.values[C$99e];this.mean=C$99t/this.values.length,this.dirty=!1}return this.mean}return 0},C$99t.WindowedMean=C$99l}(C$99t=C$99t||{}),Math.fround||(Math.fround=(C$99v=new Float32Array(1),function(C$99t){return C$99v[0]=C$99t,C$99v[0]})),(C$99x=C$99t=C$99t||{}).Attachment=C$99J,C$99V(C$99Z,C$99b=C$99J),C$99Z.prototype.computeWorldVertices=function(C$99h,C$99u,C$99_,C$99t,C$99d,C$99f){C$99_=C$99d+(C$99_>>1)*C$99f;var C$99p=C$99h.bone.skeleton,C$99m=C$99h.deform,C$99e=this.vertices,C$99i=this.bones;if(null!=C$99i){for(var C$99n=0,C$99y=0,C$99g=0;C$99g<C$99u;C$99g+=2)C$99n+=(C$99r=C$99i[C$99n])+1,C$99y+=C$99r;var C$99v=C$99p.bones;if(0==C$99m.length)for(C$99c=C$99d,C$99l=3*C$99y;C$99c<C$99_;C$99c+=C$99f){var C$99x=0,C$99b=0,C$99r=C$99i[C$99n++];for(C$99r+=C$99n;C$99n<C$99r;C$99n++,C$99l+=3){var C$99s=C$99v[C$99i[C$99n]],C$99o=C$99e[C$99l],C$99a=C$99e[C$99l+1],C$99A=C$99e[C$99l+2];C$99x+=(C$99o*C$99s.a+C$99a*C$99s.b+C$99s.worldX)*C$99A,C$99b+=(C$99o*C$99s.c+C$99a*C$99s.d+C$99s.worldY)*C$99A}C$99t[C$99c]=C$99x,C$99t[C$99c+1]=C$99b}else for(var C$99C=C$99m,C$99c=C$99d,C$99l=3*C$99y,C$99S=C$99y<<1;C$99c<C$99_;C$99c+=C$99f){C$99x=0,C$99b=0,C$99r=C$99i[C$99n++];for(C$99r+=C$99n;C$99n<C$99r;C$99n++,C$99l+=3,C$99S+=2){C$99s=C$99v[C$99i[C$99n]],C$99o=C$99e[C$99l]+C$99C[C$99S],C$99a=C$99e[C$99l+1]+C$99C[C$99S+1],C$99A=C$99e[C$99l+2];C$99x+=(C$99o*C$99s.a+C$99a*C$99s.b+C$99s.worldX)*C$99A,C$99b+=(C$99o*C$99s.c+C$99a*C$99s.d+C$99s.worldY)*C$99A}C$99t[C$99c]=C$99x,C$99t[C$99c+1]=C$99b}}else{0<C$99m.length&&(C$99e=C$99m);for(var C$99s,C$99T=(C$99s=C$99h.bone).worldX,C$99w=C$99s.worldY,C$99E=C$99s.a,C$99l=C$99s.b,C$99M=C$99s.c,C$99I=C$99s.d,C$99B=C$99u,C$99c=C$99d;C$99c<C$99_;C$99B+=2,C$99c+=C$99f){var C$99o=C$99e[C$99B],C$99a=C$99e[C$99B+1];C$99t[C$99c]=C$99o*C$99E+C$99a*C$99l+C$99T,C$99t[C$99c+1]=C$99o*C$99M+C$99a*C$99I+C$99w}}},C$99Z.prototype.copyTo=function(C$99t){null!=this.bones?(C$99t.bones=new Array(this.bones.length),C$99x.Utils.arrayCopy(this.bones,0,C$99t.bones,0,this.bones.length)):C$99t.bones=null,null!=this.vertices?(C$99t.vertices=C$99x.Utils.newFloatArray(this.vertices.length),C$99x.Utils.arrayCopy(this.vertices,0,C$99t.vertices,0,this.vertices.length)):C$99t.vertices=null,C$99t.worldVerticesLength=this.worldVerticesLength,C$99t.deformAttachment=this.deformAttachment},C$99Z.nextID=0,C$99x.VertexAttachment=C$99Z,(C$99n=(C$99n=C$99t=C$99t||{}).AttachmentType||(C$99n.AttachmentType={}))[C$99n.Region=0]="Region",C$99n[C$99n.BoundingBox=1]="BoundingBox",C$99n[C$99n.Mesh=2]="Mesh",C$99n[C$99n.LinkedMesh=3]="LinkedMesh",C$99n[C$99n.Path=4]="Path",C$99n[C$99n.Point=5]="Point",C$99n[C$99n.Clipping=6]="Clipping",C$99A=C$99t=C$99t||{},C$99C=C$99A.VertexAttachment,C$99V(C$99K,C$99C),C$99K.prototype.copy=function(){var C$99t=new C$99K(name);return this.copyTo(C$99t),C$99t.color.setFromColor(this.color),C$99t},C$99A.BoundingBoxAttachment=C$99K,C$99S=C$99t=C$99t||{},C$99T=C$99S.VertexAttachment,C$99V(C$99Q,C$99T),C$99Q.prototype.copy=function(){var C$99t=new C$99Q(name);return this.copyTo(C$99t),C$99t.endSlot=this.endSlot,C$99t.color.setFromColor(this.color),C$99t},C$99S.ClippingAttachment=C$99Q,C$99u=C$99t=C$99t||{},C$99w=C$99u.VertexAttachment,C$99V(C$99$,C$99w),C$99$.prototype.updateUVs=function(){var C$99t=this.regionUVs,C$99e=(null!=this.uvs&&this.uvs.length==C$99t.length||(this.uvs=C$99u.Utils.newFloatArray(C$99t.length)),this.uvs),C$99h=this.uvs.length,C$99i=this.region.u,C$99n=this.region.v,C$99r=0,C$99s=0;if(this.region instanceof C$99u.TextureAtlasRegion){var C$99o=this.region,C$99a=C$99o.texture.getImage().width,C$99c=C$99o.texture.getImage().height;switch(C$99o.degrees){case 90:C$99i-=(C$99o.originalHeight-C$99o.offsetY-C$99o.height)/C$99a,C$99n-=(C$99o.originalWidth-C$99o.offsetX-C$99o.width)/C$99c;for(var C$99r=C$99o.originalHeight/C$99a,C$99s=C$99o.originalWidth/C$99c,C$99l=0;C$99l<C$99h;C$99l+=2)C$99e[C$99l]=C$99i+C$99t[C$99l+1]*C$99r,C$99e[C$99l+1]=C$99n+(1-C$99t[C$99l])*C$99s;return;case 180:C$99i-=(C$99o.originalWidth-C$99o.offsetX-C$99o.width)/C$99a,C$99n-=C$99o.offsetY/C$99c,C$99r=C$99o.originalWidth/C$99a,C$99s=C$99o.originalHeight/C$99c;for(C$99l=0;C$99l<C$99h;C$99l+=2)C$99e[C$99l]=C$99i+(1-C$99t[C$99l])*C$99r,C$99e[C$99l+1]=C$99n+(1-C$99t[C$99l+1])*C$99s;return;case 270:C$99i-=C$99o.offsetY/C$99a,C$99n-=C$99o.offsetX/C$99c,C$99r=C$99o.originalHeight/C$99a,C$99s=C$99o.originalWidth/C$99c;for(C$99l=0;C$99l<C$99h;C$99l+=2)C$99e[C$99l]=C$99i+(1-C$99t[C$99l+1])*C$99r,C$99e[C$99l+1]=C$99n+C$99t[C$99l]*C$99s;return}C$99i-=C$99o.offsetX/C$99a,C$99n-=(C$99o.originalHeight-C$99o.offsetY-C$99o.height)/C$99c,C$99r=C$99o.originalWidth/C$99a,C$99s=C$99o.originalHeight/C$99c}else null==this.region?(C$99i=C$99n=0,C$99r=C$99s=1):(C$99r=this.region.u2-C$99i,C$99s=this.region.v2-C$99n);for(C$99l=0;C$99l<C$99h;C$99l+=2)C$99e[C$99l]=C$99i+C$99t[C$99l]*C$99r,C$99e[C$99l+1]=C$99n+C$99t[C$99l+1]*C$99s},C$99$.prototype.getParentMesh=function(){return this.parentMesh},C$99$.prototype.setParentMesh=function(C$99t){null!=(this.parentMesh=C$99t)&&(this.bones=C$99t.bones,this.vertices=C$99t.vertices,this.worldVerticesLength=C$99t.worldVerticesLength,this.regionUVs=C$99t.regionUVs,this.triangles=C$99t.triangles,this.hullLength=C$99t.hullLength,this.worldVerticesLength=C$99t.worldVerticesLength)},C$99$.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var C$99t=new C$99$(this.name);return C$99t.region=this.region,C$99t.path=this.path,C$99t.color.setFromColor(this.color),this.copyTo(C$99t),C$99t.regionUVs=new Array(this.regionUVs.length),C$99u.Utils.arrayCopy(this.regionUVs,0,C$99t.regionUVs,0,this.regionUVs.length),C$99t.uvs=new Array(this.uvs.length),C$99u.Utils.arrayCopy(this.uvs,0,C$99t.uvs,0,this.uvs.length),C$99t.triangles=new Array(this.triangles.length),C$99u.Utils.arrayCopy(this.triangles,0,C$99t.triangles,0,this.triangles.length),C$99t.hullLength=this.hullLength,null!=this.edges&&(C$99t.edges=new Array(this.edges.length),C$99u.Utils.arrayCopy(this.edges,0,C$99t.edges,0,this.edges.length)),C$99t.width=this.width,C$99t.height=this.height,C$99t},C$99$.prototype.newLinkedMesh=function(){var C$99t=new C$99$(this.name);return C$99t.region=this.region,C$99t.path=this.path,C$99t.color.setFromColor(this.color),C$99t.deformAttachment=this.deformAttachment,C$99t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),C$99t.updateUVs(),C$99t},C$99u.MeshAttachment=C$99$,C$99E=C$99t=C$99t||{},C$99M=C$99E.VertexAttachment,C$99V(C$99tt,C$99M),C$99tt.prototype.copy=function(){var C$99t=new C$99tt(name);return this.copyTo(C$99t),C$99t.lengths=new Array(this.lengths.length),C$99E.Utils.arrayCopy(this.lengths,0,C$99t.lengths,0,this.lengths.length),C$99t.closed=closed,C$99t.constantSpeed=this.constantSpeed,C$99t.color.setFromColor(this.color),C$99t},C$99E.PathAttachment=C$99tt,C$99I=C$99t=C$99t||{},C$99B=C$99I.VertexAttachment,C$99V(C$99et,C$99B),C$99et.prototype.computeWorldPosition=function(C$99t,C$99e){return C$99e.x=this.x*C$99t.a+this.y*C$99t.b+C$99t.worldX,C$99e.y=this.x*C$99t.c+this.y*C$99t.d+C$99t.worldY,C$99e},C$99et.prototype.computeWorldRotation=function(C$99t){var C$99e=C$99I.MathUtils.cosDeg(this.rotation),C$99i=C$99I.MathUtils.sinDeg(this.rotation),C$99n=C$99e*C$99t.a+C$99i*C$99t.b,C$99e=C$99e*C$99t.c+C$99i*C$99t.d;return Math.atan2(C$99e,C$99n)*C$99I.MathUtils.radDeg},C$99et.prototype.copy=function(){var C$99t=new C$99et(name);return C$99t.x=this.x,C$99t.y=this.y,C$99t.rotation=this.rotation,C$99t.color.setFromColor(this.color),C$99t},C$99I.PointAttachment=C$99et,C$99R=C$99t=C$99t||{},C$99P=C$99R.Attachment,C$99V(C$99_,C$99P),C$99_.prototype.updateOffset=function(){var C$99t=this.width/this.region.originalWidth*this.scaleX,C$99e=this.height/this.region.originalHeight*this.scaleY,C$99i=-this.width/2*this.scaleX+this.region.offsetX*C$99t,C$99n=-this.height/2*this.scaleY+this.region.offsetY*C$99e,C$99t=C$99i+this.region.width*C$99t,C$99e=C$99n+this.region.height*C$99e,C$99r=this.rotation*Math.PI/180,C$99s=Math.cos(C$99r),C$99r=Math.sin(C$99r),C$99o=C$99i*C$99s+this.x,C$99i=C$99i*C$99r,C$99a=C$99n*C$99s+this.y,C$99n=C$99n*C$99r,C$99c=C$99t*C$99s+this.x,C$99t=C$99t*C$99r,C$99s=C$99e*C$99s+this.y,C$99e=C$99e*C$99r,C$99r=this.offset;C$99r[C$99_.OX1]=C$99o-C$99n,C$99r[C$99_.OY1]=C$99a+C$99i,C$99r[C$99_.OX2]=C$99o-C$99e,C$99r[C$99_.OY2]=C$99s+C$99i,C$99r[C$99_.OX3]=C$99c-C$99e,C$99r[C$99_.OY3]=C$99s+C$99t,C$99r[C$99_.OX4]=C$99c-C$99n,C$99r[C$99_.OY4]=C$99a+C$99t},C$99_.prototype.setRegion=function(C$99t){this.region=C$99t;var C$99e=this.uvs;C$99t.rotate?(C$99e[2]=C$99t.u,C$99e[3]=C$99t.v2,C$99e[4]=C$99t.u,C$99e[5]=C$99t.v,C$99e[6]=C$99t.u2,C$99e[7]=C$99t.v,C$99e[0]=C$99t.u2,C$99e[1]=C$99t.v2):(C$99e[0]=C$99t.u,C$99e[1]=C$99t.v2,C$99e[2]=C$99t.u,C$99e[3]=C$99t.v,C$99e[4]=C$99t.u2,C$99e[5]=C$99t.v,C$99e[6]=C$99t.u2,C$99e[7]=C$99t.v2)},C$99_.prototype.computeWorldVertices=function(C$99t,C$99e,C$99i,C$99h){var C$99n=this.offset,C$99r=C$99t.worldX,C$99s=C$99t.worldY,C$99o=C$99t.a,C$99a=C$99t.b,C$99u=C$99t.c,C$99t=C$99t.d,C$99c=C$99n[C$99_.OX1],C$99l=C$99n[C$99_.OY1];C$99e[C$99i]=C$99c*C$99o+C$99l*C$99a+C$99r,C$99e[C$99i+1]=C$99c*C$99u+C$99l*C$99t+C$99s,C$99c=C$99n[C$99_.OX2],C$99l=C$99n[C$99_.OY2],C$99e[C$99i+=C$99h]=C$99c*C$99o+C$99l*C$99a+C$99r,C$99e[C$99i+1]=C$99c*C$99u+C$99l*C$99t+C$99s,C$99c=C$99n[C$99_.OX3],C$99l=C$99n[C$99_.OY3],C$99e[C$99i+=C$99h]=C$99c*C$99o+C$99l*C$99a+C$99r,C$99e[C$99i+1]=C$99c*C$99u+C$99l*C$99t+C$99s,C$99c=C$99n[C$99_.OX4],C$99l=C$99n[C$99_.OY4],C$99e[C$99i+=C$99h]=C$99c*C$99o+C$99l*C$99a+C$99r,C$99e[C$99i+1]=C$99c*C$99u+C$99l*C$99t+C$99s},C$99_.prototype.copy=function(){var C$99t=new C$99_(name);return C$99t.region=this.region,C$99t.rendererObject=this.rendererObject,C$99t.path=this.path,C$99t.x=this.x,C$99t.y=this.y,C$99t.scaleX=this.scaleX,C$99t.scaleY=this.scaleY,C$99t.rotation=this.rotation,C$99t.width=this.width,C$99t.height=this.height,C$99R.Utils.arrayCopy(this.uvs,0,C$99t.uvs,0,8),C$99R.Utils.arrayCopy(this.offset,0,C$99t.offset,0,8),C$99t.color.setFromColor(this.color),C$99t},C$99_.OX1=0,C$99_.OY1=1,C$99_.OX2=2,C$99_.OY2=3,C$99_.OX3=4,C$99_.OY3=5,C$99_.OX4=6,C$99_.OY4=7,C$99_.X1=0,C$99_.Y1=1,C$99_.C1R=2,C$99_.C1G=3,C$99_.C1B=4,C$99_.C1A=5,C$99_.U1=6,C$99_.V1=7,C$99_.X2=8,C$99_.Y2=9,C$99_.C2R=10,C$99_.C2G=11,C$99_.C2B=12,C$99_.C2A=13,C$99_.U2=14,C$99_.V2=15,C$99_.X3=16,C$99_.Y3=17,C$99_.C3R=18,C$99_.C3G=19,C$99_.C3B=20,C$99_.C3A=21,C$99_.U3=22,C$99_.V3=23,C$99_.X4=24,C$99_.Y4=25,C$99_.C4R=26,C$99_.C4G=27,C$99_.C4B=28,C$99_.C4A=29,C$99_.U4=30,C$99_.V4=31,C$99R.RegionAttachment=C$99_,function(C$99r){function C$99t(C$99t,C$99e){this.jitterX=0,this.jitterY=0,this.jitterX=C$99t,this.jitterY=C$99e}C$99t.prototype.begin=function(C$99t){},C$99t.prototype.transform=function(C$99t,C$99e,C$99i,C$99n){C$99t.x+=C$99r.MathUtils.randomTriangular(-this.jitterX,this.jitterY),C$99t.y+=C$99r.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},C$99t.prototype.end=function(){},C$99r.JitterEffect=C$99t}(C$99t=C$99t||{}),C$99D=C$99t=C$99t||{},C$99it.prototype.begin=function(C$99t){this.worldX=C$99t.x+this.centerX,this.worldY=C$99t.y+this.centerY},C$99it.prototype.transform=function(C$99t,C$99e,C$99i,C$99n){var C$99r=this.angle*C$99D.MathUtils.degreesToRadians,C$99s=C$99t.x-this.worldX,C$99o=C$99t.y-this.worldY,C$99a=Math.sqrt(C$99s*C$99s+C$99o*C$99o);C$99a<this.radius&&(C$99r=this.interpolation.apply(0,C$99r,(this.radius-C$99a)/this.radius),C$99a=Math.cos(C$99r),C$99r=Math.sin(C$99r),C$99t.x=C$99a*C$99s-C$99r*C$99o+this.worldX,C$99t.y=C$99r*C$99s+C$99a*C$99o+this.worldY)},C$99it.prototype.end=function(){},C$99it.interpolation=new C$99D.PowOut(2),C$99D.SwirlEffect=C$99it,C$99o.exports=C$99t},{}],356:[function(C$99t,C$99e,C$99i){"use strict";var C$99y,C$99g,C$99v,C$99x,C$99b,C$99A,C$99o=C$99t("./track-entry-listeners"),C$99I=C$99t("./lib/spine"),C$99B=[],C$99F=[],C$99N=0,C$99R=0,C$99P=0,C$99k=null,C$99G=null,C$99D=0,C$99z=0,C$99L=0,C$99C=0,C$99S=null,C$99T=null,C$99V=0,C$99O=0,C$99p=new C$99I.Color(1,1,1,1),C$99m=new C$99I.Color(1,1,1,1),C$99U=[0,1,2,2,3,0],C$99s=cc.Class({ctor:function(){this._privateMode=!1,this._inited=!1,this._invalid=!0,this._enableCacheAttachedInfo=!1,this.frames=[],this.totalTime=0,this._frameIdx=-1,this.isCompleted=!1,this._skeletonInfo=null,this._animationName=null,this._tempSegments=null,this._tempColors=null,this._tempBoneInfos=null},init:function(C$99t,C$99e){this._inited=!0,this._animationName=C$99e,this._skeletonInfo=C$99t},clear:function(){this._inited=!1;for(var C$99t=0,C$99e=this.frames.length;C$99t<C$99e;C$99t++)this.frames[C$99t].segments.length=0;this.invalidAllFrame()},bind:function(C$99t){var C$99e=function(C$99t){C$99t&&C$99t.animation.name===this._animationName&&(this.isCompleted=!0)}.bind(this);C$99t.complete=C$99e},unbind:function(C$99t){C$99t.complete=null},begin:function(){var C$99t,C$99e,C$99i,C$99n;this._invalid&&((C$99n=(C$99t=this._skeletonInfo).curAnimationCache)&&C$99n!==this&&(this._privateMode?C$99n.invalidAllFrame():C$99n.updateToFrame()),C$99n=C$99t.skeleton,C$99e=C$99t.listener,C$99i=C$99t.state,C$99n=C$99n.data.findAnimation(this._animationName),C$99i.setAnimationWith(0,C$99n,!1),this.bind(C$99e),(C$99t.curAnimationCache=this)._frameIdx=-1,this.isCompleted=!1,this.totalTime=0,this._invalid=!1)},end:function(){this._needToUpdate()||(this._skeletonInfo.curAnimationCache=null,this.frames.length=this._frameIdx+1,this.isCompleted=!0,this.unbind(this._skeletonInfo.listener))},_needToUpdate:function(C$99t){return!this.isCompleted&&this.totalTime<30&&(null==C$99t||this._frameIdx<C$99t)},updateToFrame:function(C$99t){if(this._inited&&(this.begin(),this._needToUpdate(C$99t))){for(var C$99e=this._skeletonInfo,C$99i=C$99e.skeleton,C$99n=C$99e.clipper,C$99r=C$99e.state;C$99i.update(1/60),C$99r.update(1/60),C$99r.apply(C$99i),C$99i.updateWorldTransform(),this._frameIdx++,this._updateFrame(C$99i,C$99n,this._frameIdx),this.totalTime+=1/60,this._needToUpdate(C$99t););this.end()}},isInited:function(){return this._inited},isInvalid:function(){return this._invalid},invalidAllFrame:function(){this.isCompleted=!1,this._invalid=!0},updateAllFrame:function(){this.invalidAllFrame(),this.updateToFrame()},enableCacheAttachedInfo:function(){this._enableCacheAttachedInfo||(this._enableCacheAttachedInfo=!0,this.invalidAllFrame())},_updateFrame:function(C$99t,C$99e,C$99i){C$99C=C$99L=C$99z=C$99D=C$99R=C$99N=C$99P=0,C$99T=C$99S=C$99G=C$99k=null,this.frames[C$99i]=this.frames[C$99i]||{segments:[],colors:[],boneInfos:[],vertices:null,uintVert:null,indices:null};var C$99i=this.frames[C$99i],C$99n=this._tempSegments=C$99i.segments,C$99h=this._tempColors=C$99i.colors,C$99u=this._tempBoneInfos=C$99i.boneInfos,C$99t=(this._traverseSkeleton(C$99t,C$99e),0<C$99C&&(C$99h[C$99C-1].vfOffset=C$99P),C$99h.length=C$99C,C$99u.length=C$99N,C$99L-1);if(0<=C$99t&&(0<C$99z?((C$99e=C$99n[C$99t]).indexCount=C$99z,C$99e.vfCount=6*C$99D,C$99e.vertexCount=C$99D,C$99n.length=C$99L):C$99n.length=C$99L-1),0!=C$99n.length){var C$99r=C$99i.vertices,C$99s=C$99i.uintVert;(!C$99r||C$99r.length<C$99P)&&(C$99r=C$99i.vertices=new Float32Array(C$99P),C$99s=C$99i.uintVert=new Uint32Array(C$99r.buffer));for(var C$99o=0,C$99a=0;C$99o<C$99P;)C$99r[C$99o++]=C$99B[C$99a++],C$99r[C$99o++]=C$99B[C$99a++],C$99r[C$99o++]=C$99B[C$99a++],C$99r[C$99o++]=C$99B[C$99a++],C$99s[C$99o++]=C$99B[C$99a++],C$99s[C$99o++]=C$99B[C$99a++];var C$99c=C$99i.indices;(!C$99c||C$99c.length<C$99R)&&(C$99c=C$99i.indices=new Uint16Array(C$99R));for(var C$99l=0;C$99l<C$99R;C$99l++)C$99c[C$99l]=C$99F[C$99l];C$99i.vertices=C$99r,C$99i.uintVert=C$99s,C$99i.indices=C$99c}},fillVertices:function(C$99t,C$99e,C$99i,C$99n,C$99r){if(C$99x=C$99i.a*C$99e.a*C$99t.a*255,C$99y=C$99e.r*C$99t.r*255,C$99g=C$99e.g*C$99t.g*255,C$99v=C$99e.b*C$99t.b*255,C$99p.r=C$99y*C$99i.r,C$99p.g=C$99g*C$99i.g,C$99p.b=C$99v*C$99i.b,C$99p.a=C$99x,null==C$99r.darkColor?C$99m.set(0,0,0,1):(C$99m.r=C$99r.darkColor.r*C$99y,C$99m.g=C$99r.darkColor.g*C$99g,C$99m.b=C$99r.darkColor.b*C$99v),C$99m.a=0,C$99b=(C$99p.a<<24>>>0)+(C$99p.b<<16)+(C$99p.g<<8)+C$99p.r,C$99A=(C$99m.a<<24>>>0)+(C$99m.b<<16)+(C$99m.g<<8)+C$99m.r,C$99S===C$99b&&C$99T===C$99A||(C$99e=this._tempColors,C$99S=C$99b,C$99T=C$99A,0<C$99C&&(C$99e[C$99C-1].vfOffset=C$99P),C$99e[C$99C++]={fr:C$99p.r,fg:C$99p.g,fb:C$99p.b,fa:C$99p.a,dr:C$99m.r,dg:C$99m.g,db:C$99m.b,da:C$99m.a,vfOffset:0}),C$99n.isClipping()){C$99n.clipTriangles(C$99B,C$99V,C$99F,C$99O,C$99B,C$99p,C$99m,!0,6,C$99R,C$99P,C$99P+2);var C$99s=C$99n.clippedVertices,C$99o=C$99n.clippedTriangles;C$99O=C$99o.length,C$99V=C$99s.length/12*6;for(var C$99h=0,C$99u=C$99R,C$99_=C$99o.length;C$99h<C$99_;)C$99F[C$99u++]=C$99o[C$99h++];for(var C$99a=0,C$99d=C$99s.length,C$99c=C$99P;C$99a<C$99d;C$99a+=12,C$99c+=6)C$99B[C$99c]=C$99s[C$99a],C$99B[C$99c+1]=C$99s[C$99a+1],C$99B[C$99c+2]=C$99s[C$99a+6],C$99B[C$99c+3]=C$99s[C$99a+7],C$99B[C$99c+4]=C$99b,C$99B[C$99c+5]=C$99A}else for(var C$99l=C$99P,C$99f=C$99P+C$99V;C$99l<C$99f;C$99l+=6)C$99B[C$99l+4]=C$99b,C$99B[C$99l+5]=C$99A},_traverseSkeleton:function(C$99t,C$99e){var C$99i,C$99n,C$99h,C$99u,C$99r,C$99s,C$99o,C$99a,C$99_=this._tempSegments,C$99d=this._tempBoneInfos,C$99f=C$99t.color,C$99p=C$99t.bones;if(this._enableCacheAttachedInfo)for(var C$99m=0,C$99y=C$99p.length;C$99m<C$99y;C$99m++,C$99N++){var C$99c=C$99p[C$99m],C$99l=C$99d[C$99N];(C$99l=C$99l||(C$99d[C$99N]={})).a=C$99c.a,C$99l.b=C$99c.b,C$99l.c=C$99c.c,C$99l.d=C$99c.d,C$99l.worldX=C$99c.worldX,C$99l.worldY=C$99c.worldY}for(var C$99g=0,C$99v=C$99t.drawOrder.length;C$99g<C$99v;C$99g++)if(C$99a=C$99t.drawOrder[C$99g],C$99O=C$99V=0,C$99i=C$99a.getAttachment())if(C$99h=C$99i instanceof C$99I.RegionAttachment,C$99u=C$99i instanceof C$99I.MeshAttachment,C$99i instanceof C$99I.ClippingAttachment)C$99e.clipStart(C$99a,C$99i);else if(C$99h||C$99u)if(C$99r=C$99i.region.texture._texture)if(C$99o=C$99a.data.blendMode,C$99k===C$99r.url&&C$99G===C$99o||(C$99k=C$99r.url,C$99G=C$99o,0<=(C$99s=C$99L-1)&&(0<C$99z?((C$99s=C$99_[C$99s]).indexCount=C$99z,C$99s.vertexCount=C$99D,C$99s.vfCount=6*C$99D):C$99L--),C$99_[C$99L]={tex:C$99r,blendMode:C$99o,indexCount:0,vertexCount:0,vfCount:0},C$99L++,C$99D=C$99z=0),C$99h?(C$99n=C$99U,C$99V=24,C$99O=6,C$99i.computeWorldVertices(C$99a.bone,C$99B,C$99P,6)):C$99u&&(C$99n=C$99i.triangles,C$99V=6*(C$99i.worldVerticesLength>>1),C$99O=C$99n.length,C$99i.computeWorldVertices(C$99a,0,C$99i.worldVerticesLength,C$99B,C$99P,6)),0!=C$99V&&0!=C$99O){for(var C$99x=0,C$99b=C$99R,C$99A=C$99n.length;C$99x<C$99A;)C$99F[C$99b++]=C$99n[C$99x++];for(var C$99C=C$99i.uvs,C$99S=C$99P,C$99T=C$99P+C$99V,C$99w=0;C$99S<C$99T;C$99S+=6,C$99w+=2)C$99B[C$99S+2]=C$99C[C$99w],C$99B[C$99S+3]=C$99C[C$99w+1];if(C$99s=C$99i.color,C$99r=C$99a.color,this.fillVertices(C$99f,C$99s,C$99r,C$99e,C$99a),0<C$99O){for(var C$99E=C$99R,C$99M=C$99R+C$99O;C$99E<C$99M;C$99E++)C$99F[C$99E]+=C$99D;C$99R+=C$99O,C$99P+=C$99V,C$99z+=C$99O,C$99D+=C$99V/6}C$99e.clipEndWithSlot(C$99a)}else C$99e.clipEndWithSlot(C$99a);else C$99e.clipEndWithSlot(C$99a);else C$99e.clipEndWithSlot(C$99a);else C$99e.clipEndWithSlot(C$99a);C$99e.clipEnd()}}),C$99t=cc.Class({ctor:function(){this._privateMode=!1,this._animationPool={},this._skeletonCache={}},enablePrivateMode:function(){this._privateMode=!0},clear:function(){this._animationPool={},this._skeletonCache={}},removeSkeleton:function(C$99t){var C$99e=this._skeletonCache[C$99t];if(C$99e){var C$99i,C$99n=C$99e.animationsCache;for(C$99i in C$99n){var C$99r=C$99n[C$99i];C$99r&&(this._animationPool[C$99t+"#"+C$99i]=C$99r).clear()}delete this._skeletonCache[C$99t]}},getSkeletonCache:function(C$99t,C$99e){var C$99i,C$99n,C$99r,C$99s=this._skeletonCache[C$99t];return C$99s||(C$99e=new C$99I.Skeleton(C$99e),C$99i=new C$99I.SkeletonClipping,C$99n=new C$99I.AnimationStateData(C$99e.data),C$99n=new C$99I.AnimationState(C$99n),C$99r=new C$99o,C$99n.addListener(C$99r),this._skeletonCache[C$99t]=C$99s={skeleton:C$99e,clipper:C$99i,state:C$99n,listener:C$99r,animationsCache:{},curAnimationCache:null}),C$99s},getAnimationCache:function(C$99t,C$99e){C$99t=this._skeletonCache[C$99t];return C$99t?C$99t.animationsCache[C$99e]:null},invalidAnimationCache:function(C$99t){C$99t=this._skeletonCache[C$99t];if(C$99t&&C$99t.skeleton){var C$99e,C$99i=C$99t.animationsCache;for(C$99e in C$99i)C$99i[C$99e].invalidAllFrame()}},initAnimationCache:function(C$99t,C$99e){if(!C$99e)return null;var C$99i=this._skeletonCache[C$99t],C$99n=C$99i&&C$99i.skeleton;if(!C$99n)return null;if(!C$99n.data.findAnimation(C$99e))return null;var C$99n=C$99i.animationsCache,C$99r=C$99n[C$99e];return C$99r||((C$99r=this._animationPool[C$99t=C$99t+"#"+C$99e])?delete this._animationPool[C$99t]:(C$99r=new C$99s)._privateMode=this._privateMode,C$99r.init(C$99i,C$99e),C$99n[C$99e]=C$99r),C$99r},updateAnimationCache:function(C$99t,C$99e){if(C$99e){C$99e=this.initAnimationCache(C$99t,C$99e);if(!C$99e)return null;C$99e.updateAllFrame()}else{C$99e=this._skeletonCache[C$99t];if(C$99e&&C$99e.skeleton){var C$99i,C$99n=C$99e.animationsCache;for(C$99i in C$99n)C$99n[C$99i].updateAllFrame()}}}});C$99t.FrameTime=1/60,C$99t.sharedCache=new C$99t,C$99e.exports=C$99t},{"./lib/spine":355,"./track-entry-listeners":360}],357:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./skeleton-cache").sharedCache,C$99t=cc.Class({name:"sp.SkeletonData",extends:cc.Asset,ctor:function(){this.reset()},properties:{_skeletonJson:null,skeletonJsonStr:{get:function(){return this._skeletonJson?JSON.stringify(this._skeletonJson):""}},skeletonJson:{get:function(){return this._skeletonJson},set:function(C$99t){this.reset(),this._skeletonJson="string"==typeof C$99t?JSON.parse(C$99t):C$99t,!this._uuid&&C$99t.skeleton&&(this._uuid=C$99t.skeleton.hash)}},_atlasText:"",atlasText:{get:function(){return this._atlasText},set:function(C$99t){this._atlasText=C$99t,this.reset()}},textures:{default:[],type:[cc.Texture2D]},textureNames:{default:[],type:[cc.String]},scale:1,_nativeAsset:{get:function(){return this._buffer},set:function(C$99t){this._buffer=C$99t.buffer||C$99t,this.reset()},override:!0}},statics:{preventDeferredLoadDependents:!0},createNode:!1,reset:function(){this._skeletonCache=null,this._atlasCache=null},ensureTexturesLoaded:function(C$99t,C$99e){var C$99i=this.textures,C$99n=C$99i.length;if(0!=C$99n)for(var C$99r=0,C$99s=function(){C$99n<=++C$99r&&(C$99t&&C$99t.call(C$99e,!0),C$99t=null)},C$99o=0;C$99o<C$99n;C$99o++){var C$99a=C$99i[C$99o];C$99a.loaded?C$99s():C$99a.once("load",C$99s)}else C$99t.call(C$99e,!1)},isTexturesLoaded:function(){for(var C$99t=this.textures,C$99e=C$99t.length,C$99i=0;C$99i<C$99e;C$99i++)if(!C$99t[C$99i].loaded)return!1;return!0},getRuntimeData:function(C$99t){if(this._skeletonCache)return this._skeletonCache;if(!(this.textures&&0<this.textures.length)&&this.textureNames&&0<this.textureNames.length)return C$99t||cc.errorID(7507,this.name),null;C$99t=this._getAtlas(C$99t);if(!C$99t)return null;var C$99e=new sp.spine.AtlasAttachmentLoader(C$99t),C$99i=null,C$99n=null,C$99i=this.skeletonJson?(C$99n=new sp.spine.SkeletonJson(C$99e),this.skeletonJson):(C$99n=new sp.spine.SkeletonBinary(C$99e),new Uint8Array(this._nativeAsset));return C$99n.scale=this.scale,this._skeletonCache=C$99n.readSkeletonData(C$99i),C$99t.dispose(),this._skeletonCache},getSkinsEnum:!1,getAnimsEnum:!1,_getTexture:function(C$99t){for(var C$99e,C$99i,C$99n=this.textureNames,C$99r=0;C$99r<C$99n.length;C$99r++)if(C$99n[C$99r]===C$99t)return C$99e=this.textures[C$99r],(C$99i=new sp.SkeletonTexture({width:C$99e.width,height:C$99e.height})).setRealTexture(C$99e),C$99i;return cc.errorID(7506,C$99t),null},_getAtlas:function(C$99t){return this._atlasCache||(this.atlasText?this._atlasCache=new sp.spine.TextureAtlas(this.atlasText,this._getTexture.bind(this)):(C$99t||cc.errorID(7508,this.name),null))},destroy:function(){C$99n.removeSkeleton(this._uuid),this._super()}});sp.SkeletonData=C$99e.exports=C$99t},{"./skeleton-cache":356}],358:[function(C$99t,C$99e,C$99i){"use strict";sp.SkeletonTexture=cc.Class({name:"sp.SkeletonTexture",extends:sp.spine.Texture,_texture:null,_material:null,setRealTexture:function(C$99t){this._texture=C$99t},getRealTexture:function(){return this._texture},setFilters:function(C$99t,C$99e){this._texture&&this._texture.setFilters(C$99t,C$99e)},setWraps:function(C$99t,C$99e){this._texture&&this._texture.setWrapMode(C$99t,C$99e)},dispose:function(){}})},{}],359:[function(C$99t,C$99e,C$99i){"use strict";C$99i.__esModule=!0,C$99i.default=void 0;var C$99n=(C$99n=C$99t("../../cocos2d/core/renderer/assembler"))&&C$99n.__esModule?C$99n:{default:C$99n};function C$99r(C$99i){return function(){var C$99t,C$99e=C$99s(C$99i),C$99e=(C$99t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C$99t){return!1}}()?(C$99t=C$99s(this).constructor,Reflect.construct(C$99e,arguments,C$99t)):C$99e.apply(this,arguments),this);if(!C$99t||"object"!=typeof C$99t&&"function"!=typeof C$99t){if(void 0===C$99e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C$99e}return C$99t}}function C$99s(C$99t){return(C$99s=Object.setPrototypeOf?Object.getPrototypeOf:function(C$99t){return C$99t.__proto__||Object.getPrototypeOf(C$99t)})(C$99t)}var C$99b,C$99A,C$99W,C$99H,C$99O,C$99j,C$99X,C$99Y,C$99C,C$99S,C$99T,C$99w,C$99I,C$99B,C$99o,C$99F,C$99q,C$99R,C$99P,C$99E,C$99M,C$99D,C$99J,C$99Z,C$99K,C$99Q,C$99$,C$99tt,C$99et,C$99it,C$99nt,C$99rt,C$99a,C$99c,C$99l,C$99h,C$99u,C$99_,C$99d,C$99N,C$99k,C$99st,C$99ot,C$99L,C$99V,C$99f=C$99t("./Skeleton"),C$99at=C$99t("./lib/spine"),C$99p=C$99t("../../cocos2d/core/renderer/render-flow"),C$99t=C$99t("../../cocos2d/core/renderer/webgl/vertex-format"),C$99m=C$99t.vfmtPosUvColor,C$99y=C$99t.vfmtPosUvTwoColor,C$99g=cc.gfx,C$99ct=0,C$99lt=[0,1,2,2,3,0],C$99ht=cc.color(0,0,255,255),C$99ut=cc.color(255,0,0,255),C$99_t=cc.color(0,255,0,255),C$99dt=cc.color(255,255,0,255),C$99v=null,C$99x=null,C$99ft=null,C$99pt=null,C$99v=new C$99at.Color(1,1,1,1),C$99x=new C$99at.Color(1,1,1,1),C$99ft=new C$99at.Vector2,C$99pt=new C$99at.Vector2,C$99G=0,C$99z=0,C$99mt=0,C$99U=0,C$99yt=0;function C$99gt(C$99t,C$99e){var C$99i,C$99n;switch(C$99e){case C$99at.BlendMode.Additive:C$99i=C$99b?cc.macro.ONE:cc.macro.SRC_ALPHA,C$99n=cc.macro.ONE;break;case C$99at.BlendMode.Multiply:C$99i=cc.macro.DST_COLOR,C$99n=cc.macro.ONE_MINUS_SRC_ALPHA;break;case C$99at.BlendMode.Screen:C$99i=cc.macro.ONE,C$99n=cc.macro.ONE_MINUS_SRC_COLOR;break;default:C$99at.BlendMode.Normal;C$99i=C$99b?cc.macro.ONE:cc.macro.SRC_ALPHA,C$99n=cc.macro.ONE_MINUS_SRC_ALPHA}var C$99e=!C$99N.enableBatch,C$99r=C$99N._materials[0];if(!C$99r)return null;var C$99s=C$99t.getId()+C$99i+C$99n+C$99O+C$99e,C$99o=C$99N._materialCache,C$99a=C$99o[C$99s];return C$99a||(C$99o.baseMaterial?C$99a=cc.MaterialVariant.create(C$99r):C$99o.baseMaterial=C$99a=C$99r,C$99a.define("CC_USE_MODEL",C$99e),C$99a.define("USE_TINT",C$99O),C$99a.setProperty("texture",C$99t),C$99a.setBlend(!0,C$99g.BLEND_FUNC_ADD,C$99i,C$99n,C$99g.BLEND_FUNC_ADD,C$99i,C$99n),C$99o[C$99s]=C$99a),C$99a}function C$99vt(C$99t){C$99u=C$99t.fa*C$99w,C$99a=C$99C*(C$99A=C$99b?C$99u/255:1),C$99c=C$99S*C$99A,C$99l=C$99T*C$99A,C$99h=C$99t.fr*C$99a,C$99d=C$99t.fg*C$99c,C$99_=C$99t.fb*C$99l,C$99I=(C$99u<<24>>>0)+(C$99_<<16)+(C$99d<<8)+C$99h,C$99u=C$99t.dr*C$99a,C$99_=C$99t.dg*C$99c,C$99d=C$99t.db*C$99l,C$99B=((C$99b?255:0)<<24>>>0)+(C$99d<<16)+(C$99_<<8)+C$99u}function C$99xt(C$99t){return(C$99t.a<<24>>>0)+(C$99t.b<<16)+(C$99t.g<<8)+C$99t.r}C$99bt=C$99n.default,C$99t=C$99bt,(C$99At=C$99Ct).prototype=Object.create(C$99t.prototype),(C$99At.prototype.constructor=C$99At).__proto__=C$99t,C$99r(C$99Ct),(C$99At=C$99Ct.prototype).updateRenderData=function(C$99t){C$99t.isAnimationCached()||(C$99t=C$99t._skeleton)&&C$99t.updateWorldTransform()},C$99At.fillVertices=function(C$99t,C$99h,C$99e,C$99u,C$99_){var C$99i=C$99k._vData,C$99d=C$99k._iData,C$99n=C$99k._uintVData;if(C$99v.a=C$99e.a*C$99h.a*C$99t.a*C$99w*255,C$99A=C$99b?C$99v.a:255,C$99E=C$99C*C$99h.r*C$99t.r*C$99A,C$99M=C$99S*C$99h.g*C$99t.g*C$99A,C$99D=C$99T*C$99h.b*C$99t.b*C$99A,C$99v.r=C$99E*C$99e.r,C$99v.g=C$99M*C$99e.g,C$99v.b=C$99D*C$99e.b,null==C$99_.darkColor?C$99x.set(0,0,0,1):(C$99x.r=C$99_.darkColor.r*C$99E,C$99x.g=C$99_.darkColor.g*C$99M,C$99x.b=C$99_.darkColor.b*C$99D),C$99x.a=C$99b?255:0,C$99u.isClipping()){var C$99h=C$99i.subarray(C$99z+2),C$99r=(C$99u.clipTriangles(C$99i.subarray(C$99z),C$99G,C$99d.subarray(C$99yt),C$99U,C$99h,C$99v,C$99x,C$99O,C$99F),new Float32Array(C$99u.clippedVertices)),C$99t=C$99u.clippedTriangles;if(C$99U=C$99t.length,C$99G=C$99r.length/C$99q*C$99F,C$99e=C$99k.request(C$99G/C$99F,C$99U),C$99yt=C$99e.indiceOffset,C$99mt=C$99e.vertexOffset,C$99z=C$99e.byteOffset>>2,C$99i=C$99k._vData,C$99d=C$99k._iData,C$99n=C$99k._uintVData,C$99d.set(C$99t,C$99yt),C$99V)for(var C$99s=0,C$99f=C$99r.length,C$99o=C$99z;C$99s<C$99f;C$99s+=C$99q,C$99o+=C$99F)C$99ft.x=C$99r[C$99s],C$99ft.y=C$99r[C$99s+1],C$99v.set(C$99r[C$99s+2],C$99r[C$99s+3],C$99r[C$99s+4],C$99r[C$99s+5]),C$99pt.x=C$99r[C$99s+6],C$99pt.y=C$99r[C$99s+7],C$99O?C$99x.set(C$99r[C$99s+8],C$99r[C$99s+9],C$99r[C$99s+10],C$99r[C$99s+11]):C$99x.set(0,0,0,0),C$99V.transform(C$99ft,C$99pt,C$99v,C$99x),C$99i[C$99o]=C$99ft.x,C$99i[C$99o+1]=C$99ft.y,C$99i[C$99o+2]=C$99pt.x,C$99i[C$99o+3]=C$99pt.y,C$99n[C$99o+4]=C$99xt(C$99v),C$99O&&(C$99n[C$99o+5]=C$99xt(C$99x));else for(var C$99a=0,C$99p=C$99r.length,C$99c=C$99z;C$99a<C$99p;C$99a+=C$99q,C$99c+=C$99F)C$99i[C$99c]=C$99r[C$99a],C$99i[C$99c+1]=C$99r[C$99a+1],C$99i[C$99c+2]=C$99r[C$99a+6],C$99i[C$99c+3]=C$99r[C$99a+7],C$99I=(C$99r[C$99a+5]<<24>>>0)+(C$99r[C$99a+4]<<16)+(C$99r[C$99a+3]<<8)+C$99r[C$99a+2],C$99n[C$99c+4]=C$99I,C$99O&&(C$99B=(C$99r[C$99a+11]<<24>>>0)+(C$99r[C$99a+10]<<16)+(C$99r[C$99a+9]<<8)+C$99r[C$99a+8],C$99n[C$99c+5]=C$99B)}else if(C$99V)for(var C$99l=C$99z,C$99m=C$99z+C$99G;C$99l<C$99m;C$99l+=C$99F)C$99ft.x=C$99i[C$99l],C$99ft.y=C$99i[C$99l+1],C$99pt.x=C$99i[C$99l+2],C$99pt.y=C$99i[C$99l+3],C$99V.transform(C$99ft,C$99pt,C$99v,C$99x),C$99i[C$99l]=C$99ft.x,C$99i[C$99l+1]=C$99ft.y,C$99i[C$99l+2]=C$99pt.x,C$99i[C$99l+3]=C$99pt.y,C$99n[C$99l+4]=C$99xt(C$99v),C$99O&&(C$99n[C$99l+5]=C$99xt(C$99x));else{C$99I=C$99xt(C$99v),C$99B=C$99xt(C$99x);for(var C$99y=C$99z,C$99g=C$99z+C$99G;C$99y<C$99g;C$99y+=C$99F)C$99n[C$99y+4]=C$99I,C$99O&&(C$99n[C$99y+5]=C$99B)}},C$99At.realTimeTraverse=function(C$99h){var C$99t,C$99u,C$99e,C$99i,C$99_,C$99n,C$99r,C$99s,C$99d=C$99N._skeleton,C$99f=C$99d.color,C$99o=C$99N._debugRenderer,C$99a=C$99N._clipper,C$99p=null;C$99W=C$99N._startSlotIndex,C$99H=C$99N._endSlotIndex,C$99J=-1==C$99W?!0:!1,C$99j=C$99N.debugSlots,C$99X=C$99N.debugBones,C$99Y=C$99N.debugMesh,C$99o&&(C$99X||C$99j||C$99Y)&&(C$99o.clear(),C$99o.lineWidth=2),C$99q=C$99O?12:8;for(var C$99m=C$99yt=C$99U=C$99mt=C$99z=C$99G=0,C$99y=C$99d.drawOrder.length;C$99m<C$99y;C$99m++)if(C$99r=C$99d.drawOrder[C$99m],C$99J=0<=C$99W&&C$99W==C$99r.data.index?!0:C$99J)if(0<=C$99H&&C$99H==C$99r.data.index&&(C$99J=!1),C$99U=C$99G=0,C$99s=C$99r.getAttachment())if(C$99i=C$99s instanceof C$99at.RegionAttachment,C$99_=C$99s instanceof C$99at.MeshAttachment,C$99s instanceof C$99at.ClippingAttachment)C$99a.clipStart(C$99r,C$99s);else if(C$99i||C$99_)if(C$99p=C$99gt(C$99s.region.texture._texture,C$99r.data.blendMode)){if(!C$99Z&&C$99p.getHash()===C$99st.material.getHash()||(C$99Z=!1,C$99st._flush(),C$99st.node=C$99ot,C$99st.material=C$99p),C$99i){if(C$99e=C$99lt,C$99G=4*C$99F,C$99U=6,C$99n=C$99k.request(4,6),C$99yt=C$99n.indiceOffset,C$99mt=C$99n.vertexOffset,C$99z=C$99n.byteOffset>>2,C$99t=C$99k._vData,C$99u=C$99k._iData,C$99s.computeWorldVertices(C$99r.bone,C$99t,C$99z,C$99F),C$99o&&C$99j){C$99o.strokeColor=C$99ht,C$99o.moveTo(C$99t[C$99z],C$99t[C$99z+1]);for(var C$99g=C$99z+C$99F,C$99v=C$99z+C$99G;C$99g<C$99v;C$99g+=C$99F)C$99o.lineTo(C$99t[C$99g],C$99t[C$99g+1]);C$99o.close(),C$99o.stroke()}}else if(C$99_&&(C$99e=C$99s.triangles,C$99G=(C$99s.worldVerticesLength>>1)*C$99F,C$99U=C$99e.length,C$99n=C$99k.request(C$99G/C$99F,C$99U),C$99yt=C$99n.indiceOffset,C$99mt=C$99n.vertexOffset,C$99z=C$99n.byteOffset>>2,C$99t=C$99k._vData,C$99u=C$99k._iData,C$99s.computeWorldVertices(C$99r,0,C$99s.worldVerticesLength,C$99t,C$99z,C$99F),C$99o&&C$99Y)){C$99o.strokeColor=C$99dt;for(var C$99x=0,C$99b=C$99e.length;C$99x<C$99b;C$99x+=3){var C$99A=C$99e[C$99x]*C$99F+C$99z,C$99C=C$99e[C$99x+1]*C$99F+C$99z,C$99S=C$99e[C$99x+2]*C$99F+C$99z;C$99o.moveTo(C$99t[C$99A],C$99t[C$99A+1]),C$99o.lineTo(C$99t[C$99C],C$99t[C$99C+1]),C$99o.lineTo(C$99t[C$99S],C$99t[C$99S+1]),C$99o.close(),C$99o.stroke()}}if(0!=C$99G&&0!=C$99U){C$99u.set(C$99e,C$99yt);for(var C$99T=C$99s.uvs,C$99w=C$99z,C$99E=C$99z+C$99G,C$99M=0;C$99w<C$99E;C$99w+=C$99F,C$99M+=2)C$99t[C$99w+2]=C$99T[C$99M],C$99t[C$99w+3]=C$99T[C$99M+1];if(C$99i=C$99s.color,C$99_=C$99r.color,this.fillVertices(C$99f,C$99i,C$99_,C$99a,C$99r),0<C$99U){for(var C$99I=C$99yt,C$99B=C$99yt+C$99U;C$99I<C$99B;C$99I++)C$99u[C$99I]+=C$99mt;if(C$99h){C$99s=C$99h.m,C$99$=C$99s[0],C$99tt=C$99s[4],C$99et=C$99s[12],C$99it=C$99s[1],C$99nt=C$99s[5],C$99rt=C$99s[13];for(var C$99c=C$99z,C$99R=C$99z+C$99G;C$99c<C$99R;C$99c+=C$99F)C$99K=C$99t[C$99c],C$99Q=C$99t[C$99c+1],C$99t[C$99c]=C$99K*C$99$+C$99Q*C$99tt+C$99et,C$99t[C$99c+1]=C$99K*C$99it+C$99Q*C$99nt+C$99rt}C$99k.adjust(C$99G/C$99F,C$99U)}C$99a.clipEndWithSlot(C$99r)}else C$99a.clipEndWithSlot(C$99r)}else C$99a.clipEndWithSlot(C$99r);else C$99a.clipEndWithSlot(C$99r);else C$99a.clipEndWithSlot(C$99r);else C$99a.clipEndWithSlot(C$99r);if(C$99a.clipEnd(),C$99o&&C$99X){C$99o.strokeColor=C$99ut,C$99o.fillColor=C$99ht;for(var C$99P=0,C$99D=C$99d.bones.length;C$99P<C$99D;C$99P++){var C$99l,C$99L=(C$99l=C$99d.bones[C$99P]).data.length*C$99l.a+C$99l.worldX,C$99V=C$99l.data.length*C$99l.c+C$99l.worldY;C$99o.moveTo(C$99l.worldX,C$99l.worldY),C$99o.lineTo(C$99L,C$99V),C$99o.stroke(),C$99o.circle(C$99l.worldX,C$99l.worldY,1.5*Math.PI),C$99o.fill(),0===C$99P&&(C$99o.fillColor=C$99_t)}}},C$99At.cacheTraverse=function(C$99t){var C$99e=C$99N._curFrame;if(C$99e){var C$99h=C$99e.segments;if(0!=C$99h.length){var C$99u=C$99e.vertices,C$99_=C$99e.indices,C$99i=0,C$99d=0;C$99t&&(C$99t=C$99t.m,C$99$=C$99t[0],C$99it=C$99t[1],C$99tt=C$99t[4],C$99nt=C$99t[5],C$99et=C$99t[12],C$99rt=C$99t[13]);var C$99f=16&C$99ct,C$99p=C$99f&&(1===C$99$&&0===C$99it&&0===C$99tt&&1===C$99nt),C$99m=0,C$99y=C$99e.colors,C$99n=C$99y[C$99m++],C$99g=C$99n.vfOffset;C$99vt(C$99n);for(var C$99v=0,C$99x=C$99h.length;C$99v<C$99x;C$99v++){var C$99r,C$99s=C$99h[C$99v];if(C$99r=C$99gt(C$99s.tex,C$99s.blendMode)){!C$99Z&&C$99r.getHash()===C$99st.material.getHash()||(C$99Z=!1,C$99st._flush(),C$99st.node=C$99ot,C$99st.material=C$99r),C$99R=C$99s.vertexCount,C$99U=C$99s.indexCount,C$99r=C$99k.request(C$99R,C$99U),C$99yt=C$99r.indiceOffset,C$99mt=C$99r.vertexOffset,C$99P=C$99r.byteOffset>>2;for(var C$99o=C$99k._vData,C$99b=C$99k._iData,C$99A=C$99k._uintVData,C$99C=C$99yt,C$99S=C$99yt+C$99U;C$99C<C$99S;C$99C++)C$99b[C$99C]=C$99mt+C$99_[C$99d++];if(C$99r=C$99s.vfCount,C$99o.set(C$99u.subarray(C$99i,C$99i+C$99r),C$99P),C$99i+=C$99r,C$99p)for(var C$99a=C$99P,C$99T=C$99P+C$99r;C$99a<C$99T;C$99a+=6)C$99o[C$99a]+=C$99et,C$99o[C$99a+1]+=C$99rt;else if(C$99f)for(var C$99c=C$99P,C$99w=C$99P+C$99r;C$99c<C$99w;C$99c+=6)C$99K=C$99o[C$99c],C$99Q=C$99o[C$99c+1],C$99o[C$99c]=C$99K*C$99$+C$99Q*C$99tt+C$99et,C$99o[C$99c+1]=C$99K*C$99it+C$99Q*C$99nt+C$99rt;if(C$99k.adjust(C$99R,C$99U),C$99L)for(var C$99E=C$99i-C$99r,C$99l=4+C$99P,C$99M=4+C$99P+C$99r;C$99l<C$99M;C$99l+=6,C$99E+=6)C$99g<=C$99E&&(C$99vt(C$99n=C$99y[C$99m++]),C$99g=C$99n.vfOffset),C$99A[C$99l]=C$99I,C$99A[C$99l+1]=C$99B}}}}},C$99At.fillBuffers=function(C$99t,C$99e){var C$99i=C$99t.node;C$99i._renderFlag|=C$99p.FLAG_UPDATE_RENDER_DATA,C$99t._skeleton&&(C$99i=C$99i._color,C$99C=C$99i.r/255,C$99S=C$99i.g/255,C$99T=C$99i.b/255,C$99w=C$99i.a/255,C$99O=C$99t.useTint||C$99t.isAnimationCached(),C$99o=C$99O?C$99y:C$99m,C$99F=C$99O?6:5,C$99ot=C$99t.node,C$99k=C$99e.getBuffer("spine",C$99o),C$99st=C$99e,C$99Z=!0,C$99b=(C$99N=C$99t).premultipliedAlpha,C$99ct=0,C$99L=!(C$99A=1),C$99V=C$99t._effectDelegate&&C$99t._effectDelegate._vertexEffect,4294967295===C$99i._val&&!C$99b||(C$99L=!0),C$99i=void(C$99O&&(C$99ct|=1)),C$99N.enableBatch&&(C$99i=C$99ot._worldMatrix,C$99Z=!1,C$99ct|=16),C$99t.isAnimationCached()?this.cacheTraverse(C$99i):(C$99V&&C$99V.begin(C$99t._skeleton),this.realTimeTraverse(C$99i),C$99V&&C$99V.end()),C$99e.worldMatDirty++,C$99t.attachUtil._syncAttachedNode(),C$99N=C$99st=C$99k=C$99ot=void 0,C$99V=null)},C$99At.postFillBuffers=function(C$99t,C$99e){C$99e.worldMatDirty--};var C$99bt,C$99At,C$99t=C$99Ct;function C$99Ct(){return C$99bt.apply(this,arguments)||this}C$99i.default=C$99t,C$99n.default.register(C$99f,C$99t),C$99e.exports=C$99i.default},{"../../cocos2d/core/renderer/assembler":217,"../../cocos2d/core/renderer/render-flow":221,"../../cocos2d/core/renderer/webgl/vertex-format":252,"./Skeleton":353,"./lib/spine":355}],360:[function(C$99t,C$99e,C$99i){"use strict";function C$99n(){this.start=null,this.end=null,this.complete=null,this.event=null,this.interrupt=null,this.dispose=null}C$99n.getListeners=function(C$99t){return C$99t.listener||(C$99t.listener=new C$99n),C$99t.listener},C$99e.exports=C$99n},{}],361:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=C$99t("./lib/spine");sp.VertexEffectDelegate=cc.Class({name:"sp.VertexEffectDelegate",ctor:function(){this._vertexEffect=null,this._interpolation=null,this._effectType="none"},clear:function(){this._vertexEffect=null,this._interpolation=null,this._effectType="none"},initJitter:function(C$99t,C$99e){return this._effectType="jitter",this._vertexEffect=new C$99n.JitterEffect(C$99t,C$99e),this._vertexEffect},initSwirlWithPow:function(C$99t,C$99e){return this._interpolation=new C$99n.Pow(C$99e),this._vertexEffect=new C$99n.SwirlEffect(C$99t,this._interpolation),this._vertexEffect},initSwirlWithPowOut:function(C$99t,C$99e){return this._interpolation=new C$99n.PowOut(C$99e),this._vertexEffect=new C$99n.SwirlEffect(C$99t,this._interpolation),this._vertexEffect},getJitterVertexEffect:function(){return this._vertexEffect},getSwirlVertexEffect:function(){return this._vertexEffect},getVertexEffect:function(){return this._vertexEffect},getEffectType:function(){return this._effectType}}),C$99e.exports=sp.VertexEffectDelegate},{"./lib/spine":355}],362:[function(C$99t,C$99e,C$99i){"use strict";var C$99n;C$99n=function(C$99H){function C$99f(C$99t,C$99e){return void 0!==C$99t?C$99t:C$99e}var C$99P=1e37,C$99M=1e-5,C$99g=C$99M*C$99M,C$99m=3.14159265359,C$99I=2/180*C$99m,C$99p=8/180*C$99m,C$99T=.5*C$99m,C$99w=C$99T*C$99T,C$99t=2/180*C$99m;C$99n.prototype.toString=function(){return this.major+"."+this.minor+"."+this.revision};var C$99i=C$99n;function C$99n(C$99t,C$99e,C$99i){void 0===C$99t&&(C$99t=0),void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),this.major=0,this.minor=0,this.revision=0,this.major=C$99t,this.minor=C$99e,this.revision=C$99i}var C$99s=new C$99i(2,3,2);function C$99c(C$99t,C$99e){for(var C$99i=[],C$99n=0;C$99n<C$99t;++C$99n)C$99i.push(C$99e(C$99n));return C$99i}function C$99h(C$99t,C$99e){void 0===C$99e&&(C$99e=0);for(var C$99i=[],C$99n=0;C$99n<C$99t;++C$99n)C$99i.push(C$99e);return C$99i}var C$99D=Math.abs,C$99L=Math.min,C$99V=Math.max;function C$99O(C$99t,C$99e,C$99i){return C$99t<C$99e?C$99e:C$99i<C$99t?C$99i:C$99t}var C$99o=isFinite;function C$99_(C$99t){return C$99t*C$99t}function C$99A(C$99t){return 1/Math.sqrt(C$99t)}var C$99Y=Math.sqrt,C$99a=Math.pow;var C$99l=Math.cos,C$99u=Math.sin,C$99d=Math.acos,C$99y=Math.asin,C$99v=Math.atan2;C$99e.prototype.Clone=function(){return new C$99e(this.x,this.y)},C$99e.prototype.SetZero=function(){return this.x=0,this.y=0,this},C$99e.prototype.Set=function(C$99t,C$99e){return this.x=C$99t,this.y=C$99e,this},C$99e.prototype.Copy=function(C$99t){return this.x=C$99t.x,this.y=C$99t.y,this},C$99e.prototype.SelfAdd=function(C$99t){return this.x+=C$99t.x,this.y+=C$99t.y,this},C$99e.prototype.SelfAddXY=function(C$99t,C$99e){return this.x+=C$99t,this.y+=C$99e,this},C$99e.prototype.SelfSub=function(C$99t){return this.x-=C$99t.x,this.y-=C$99t.y,this},C$99e.prototype.SelfSubXY=function(C$99t,C$99e){return this.x-=C$99t,this.y-=C$99e,this},C$99e.prototype.SelfMul=function(C$99t){return this.x*=C$99t,this.y*=C$99t,this},C$99e.prototype.SelfMulAdd=function(C$99t,C$99e){return this.x+=C$99t*C$99e.x,this.y+=C$99t*C$99e.y,this},C$99e.prototype.SelfMulSub=function(C$99t,C$99e){return this.x-=C$99t*C$99e.x,this.y-=C$99t*C$99e.y,this},C$99e.prototype.Dot=function(C$99t){return this.x*C$99t.x+this.y*C$99t.y},C$99e.prototype.Cross=function(C$99t){return this.x*C$99t.y-this.y*C$99t.x},C$99e.prototype.Length=function(){var C$99t=this.x,C$99e=this.y;return Math.sqrt(C$99t*C$99t+C$99e*C$99e)},C$99e.prototype.LengthSquared=function(){var C$99t=this.x,C$99e=this.y;return C$99t*C$99t+C$99e*C$99e},C$99e.prototype.Normalize=function(){var C$99t,C$99e=this.Length();return C$99M<=C$99e&&(this.x*=C$99t=1/C$99e,this.y*=C$99t),C$99e},C$99e.prototype.SelfNormalize=function(){var C$99t=this.Length();return C$99M<=C$99t&&(this.x*=C$99t=1/C$99t,this.y*=C$99t),this},C$99e.prototype.SelfRotate=function(C$99t){var C$99e=Math.cos(C$99t),C$99t=Math.sin(C$99t),C$99i=this.x;return this.x=C$99e*C$99i-C$99t*this.y,this.y=C$99t*C$99i+C$99e*this.y,this},C$99e.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)},C$99e.prototype.SelfCrossVS=function(C$99t){var C$99e=this.x;return this.x=C$99t*this.y,this.y=-C$99t*C$99e,this},C$99e.prototype.SelfCrossSV=function(C$99t){var C$99e=this.x;return this.x=-C$99t*this.y,this.y=C$99t*C$99e,this},C$99e.prototype.SelfMinV=function(C$99t){return this.x=C$99L(this.x,C$99t.x),this.y=C$99L(this.y,C$99t.y),this},C$99e.prototype.SelfMaxV=function(C$99t){return this.x=C$99V(this.x,C$99t.x),this.y=C$99V(this.y,C$99t.y),this},C$99e.prototype.SelfAbs=function(){return this.x=C$99D(this.x),this.y=C$99D(this.y),this},C$99e.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this},C$99e.prototype.SelfSkew=function(){var C$99t=this.x;return this.x=-this.y,this.y=C$99t,this},C$99e.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99e})},C$99e.AbsV=function(C$99t,C$99e){return C$99e.x=C$99D(C$99t.x),C$99e.y=C$99D(C$99t.y),C$99e},C$99e.MinV=function(C$99t,C$99e,C$99i){return C$99i.x=C$99L(C$99t.x,C$99e.x),C$99i.y=C$99L(C$99t.y,C$99e.y),C$99i},C$99e.MaxV=function(C$99t,C$99e,C$99i){return C$99i.x=C$99V(C$99t.x,C$99e.x),C$99i.y=C$99V(C$99t.y,C$99e.y),C$99i},C$99e.ClampV=function(C$99t,C$99e,C$99i,C$99n){return C$99n.x=C$99O(C$99t.x,C$99e.x,C$99i.x),C$99n.y=C$99O(C$99t.y,C$99e.y,C$99i.y),C$99n},C$99e.RotateV=function(C$99t,C$99e,C$99i){var C$99n=C$99t.x,C$99t=C$99t.y,C$99r=Math.cos(C$99e),C$99e=Math.sin(C$99e);return C$99i.x=C$99r*C$99n-C$99e*C$99t,C$99i.y=C$99e*C$99n+C$99r*C$99t,C$99i},C$99e.DotVV=function(C$99t,C$99e){return C$99t.x*C$99e.x+C$99t.y*C$99e.y},C$99e.CrossVV=function(C$99t,C$99e){return C$99t.x*C$99e.y-C$99t.y*C$99e.x},C$99e.CrossVS=function(C$99t,C$99e,C$99i){var C$99n=C$99t.x;return C$99i.x=C$99e*C$99t.y,C$99i.y=-C$99e*C$99n,C$99i},C$99e.CrossVOne=function(C$99t,C$99e){var C$99i=C$99t.x;return C$99e.x=C$99t.y,C$99e.y=-C$99i,C$99e},C$99e.CrossSV=function(C$99t,C$99e,C$99i){var C$99n=C$99e.x;return C$99i.x=-C$99t*C$99e.y,C$99i.y=C$99t*C$99n,C$99i},C$99e.CrossOneV=function(C$99t,C$99e){var C$99i=C$99t.x;return C$99e.x=-C$99t.y,C$99e.y=C$99i,C$99e},C$99e.AddVV=function(C$99t,C$99e,C$99i){return C$99i.x=C$99t.x+C$99e.x,C$99i.y=C$99t.y+C$99e.y,C$99i},C$99e.SubVV=function(C$99t,C$99e,C$99i){return C$99i.x=C$99t.x-C$99e.x,C$99i.y=C$99t.y-C$99e.y,C$99i},C$99e.MulSV=function(C$99t,C$99e,C$99i){return C$99i.x=C$99e.x*C$99t,C$99i.y=C$99e.y*C$99t,C$99i},C$99e.MulVS=function(C$99t,C$99e,C$99i){return C$99i.x=C$99t.x*C$99e,C$99i.y=C$99t.y*C$99e,C$99i},C$99e.AddVMulSV=function(C$99t,C$99e,C$99i,C$99n){return C$99n.x=C$99t.x+C$99e*C$99i.x,C$99n.y=C$99t.y+C$99e*C$99i.y,C$99n},C$99e.SubVMulSV=function(C$99t,C$99e,C$99i,C$99n){return C$99n.x=C$99t.x-C$99e*C$99i.x,C$99n.y=C$99t.y-C$99e*C$99i.y,C$99n},C$99e.AddVCrossSV=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99i.x;return C$99n.x=C$99t.x-C$99e*C$99i.y,C$99n.y=C$99t.y+C$99e*C$99r,C$99n},C$99e.MidVV=function(C$99t,C$99e,C$99i){return C$99i.x=.5*(C$99t.x+C$99e.x),C$99i.y=.5*(C$99t.y+C$99e.y),C$99i},C$99e.ExtVV=function(C$99t,C$99e,C$99i){return C$99i.x=.5*(C$99e.x-C$99t.x),C$99i.y=.5*(C$99e.y-C$99t.y),C$99i},C$99e.IsEqualToV=function(C$99t,C$99e){return C$99t.x===C$99e.x&&C$99t.y===C$99e.y},C$99e.DistanceVV=function(C$99t,C$99e){var C$99i=C$99t.x-C$99e.x,C$99t=C$99t.y-C$99e.y;return Math.sqrt(C$99i*C$99i+C$99t*C$99t)},C$99e.DistanceSquaredVV=function(C$99t,C$99e){var C$99i=C$99t.x-C$99e.x,C$99t=C$99t.y-C$99e.y;return C$99i*C$99i+C$99t*C$99t},C$99e.NegV=function(C$99t,C$99e){return C$99e.x=-C$99t.x,C$99e.y=-C$99t.y,C$99e},C$99e.ZERO=new C$99e(0,0),C$99e.UNITX=new C$99e(1,0),C$99e.UNITY=new C$99e(0,1),C$99e.s_t0=new C$99e,C$99e.s_t1=new C$99e,C$99e.s_t2=new C$99e,C$99e.s_t3=new C$99e;var C$99j=C$99e;function C$99e(C$99t,C$99e){void 0===C$99e&&(C$99e=0),this.x=C$99t=void 0===C$99t?0:C$99t,this.y=C$99e}var C$99x=new C$99j(0,0),C$99b=(C$99C.prototype.Clone=function(){return new C$99C(this.x,this.y,this.z)},C$99C.prototype.SetZero=function(){return this.x=0,this.y=0,this.z=0,this},C$99C.prototype.SetXYZ=function(C$99t,C$99e,C$99i){return this.x=C$99t,this.y=C$99e,this.z=C$99i,this},C$99C.prototype.Copy=function(C$99t){return this.x=C$99t.x,this.y=C$99t.y,this.z=C$99t.z,this},C$99C.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},C$99C.prototype.SelfAdd=function(C$99t){return this.x+=C$99t.x,this.y+=C$99t.y,this.z+=C$99t.z,this},C$99C.prototype.SelfAddXYZ=function(C$99t,C$99e,C$99i){return this.x+=C$99t,this.y+=C$99e,this.z+=C$99i,this},C$99C.prototype.SelfSub=function(C$99t){return this.x-=C$99t.x,this.y-=C$99t.y,this.z-=C$99t.z,this},C$99C.prototype.SelfSubXYZ=function(C$99t,C$99e,C$99i){return this.x-=C$99t,this.y-=C$99e,this.z-=C$99i,this},C$99C.prototype.SelfMul=function(C$99t){return this.x*=C$99t,this.y*=C$99t,this.z*=C$99t,this},C$99C.DotV3V3=function(C$99t,C$99e){return C$99t.x*C$99e.x+C$99t.y*C$99e.y+C$99t.z*C$99e.z},C$99C.CrossV3V3=function(C$99t,C$99e,C$99i){var C$99n=C$99t.x,C$99r=C$99t.y,C$99t=C$99t.z,C$99s=C$99e.x,C$99o=C$99e.y,C$99e=C$99e.z;return C$99i.x=C$99r*C$99e-C$99t*C$99o,C$99i.y=C$99t*C$99s-C$99n*C$99e,C$99i.z=C$99n*C$99o-C$99r*C$99s,C$99i},C$99C.ZERO=new C$99C(0,0,0),C$99C.s_t0=new C$99C,C$99C);function C$99C(C$99t,C$99e,C$99i){void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=0),this.x=C$99t=void 0===C$99t?0:C$99t,this.y=C$99e,this.z=C$99i}C$99N.prototype.Clone=function(){return(new C$99N).Copy(this)},C$99N.FromVV=function(C$99t,C$99e){return(new C$99N).SetVV(C$99t,C$99e)},C$99N.FromSSSS=function(C$99t,C$99e,C$99i,C$99n){return(new C$99N).SetSSSS(C$99t,C$99e,C$99i,C$99n)},C$99N.FromAngle=function(C$99t){return(new C$99N).SetAngle(C$99t)},C$99N.prototype.SetSSSS=function(C$99t,C$99e,C$99i,C$99n){return this.ex.Set(C$99t,C$99i),this.ey.Set(C$99e,C$99n),this},C$99N.prototype.SetVV=function(C$99t,C$99e){return this.ex.Copy(C$99t),this.ey.Copy(C$99e),this},C$99N.prototype.SetAngle=function(C$99t){var C$99e=Math.cos(C$99t),C$99t=Math.sin(C$99t);return this.ex.Set(C$99e,C$99t),this.ey.Set(-C$99t,C$99e),this},C$99N.prototype.Copy=function(C$99t){return this.ex.Copy(C$99t.ex),this.ey.Copy(C$99t.ey),this},C$99N.prototype.SetIdentity=function(){return this.ex.Set(1,0),this.ey.Set(0,1),this},C$99N.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this},C$99N.prototype.GetAngle=function(){return Math.atan2(this.ex.y,this.ex.x)},C$99N.prototype.GetInverse=function(C$99t){var C$99e=this.ex.x,C$99i=this.ey.x,C$99n=this.ex.y,C$99r=this.ey.y,C$99s=C$99e*C$99r-C$99i*C$99n;return C$99t.ex.x=(C$99s=0!==C$99s?1/C$99s:C$99s)*C$99r,C$99t.ey.x=-C$99s*C$99i,C$99t.ex.y=-C$99s*C$99n,C$99t.ey.y=C$99s*C$99e,C$99t},C$99N.prototype.Solve=function(C$99t,C$99e,C$99i){var C$99n=this.ex.x,C$99r=this.ey.x,C$99s=this.ex.y,C$99o=this.ey.y,C$99a=C$99n*C$99o-C$99r*C$99s;return C$99i.x=(C$99a=0!==C$99a?1/C$99a:C$99a)*(C$99o*C$99t-C$99r*C$99e),C$99i.y=C$99a*(C$99n*C$99e-C$99s*C$99t),C$99i},C$99N.prototype.SelfAbs=function(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this},C$99N.prototype.SelfInv=function(){return this.GetInverse(this),this},C$99N.prototype.SelfAddM=function(C$99t){return this.ex.SelfAdd(C$99t.ex),this.ey.SelfAdd(C$99t.ey),this},C$99N.prototype.SelfSubM=function(C$99t){return this.ex.SelfSub(C$99t.ex),this.ey.SelfSub(C$99t.ey),this},C$99N.AbsM=function(C$99t,C$99e){var C$99i=C$99t.ex,C$99t=C$99t.ey;return C$99e.ex.x=C$99D(C$99i.x),C$99e.ex.y=C$99D(C$99i.y),C$99e.ey.x=C$99D(C$99t.x),C$99e.ey.y=C$99D(C$99t.y),C$99e},C$99N.MulMV=function(C$99t,C$99e,C$99i){var C$99n=C$99t.ex,C$99t=C$99t.ey,C$99r=C$99e.x,C$99e=C$99e.y;return C$99i.x=C$99n.x*C$99r+C$99t.x*C$99e,C$99i.y=C$99n.y*C$99r+C$99t.y*C$99e,C$99i},C$99N.MulTMV=function(C$99t,C$99e,C$99i){var C$99n=C$99t.ex,C$99t=C$99t.ey,C$99r=C$99e.x,C$99e=C$99e.y;return C$99i.x=C$99n.x*C$99r+C$99n.y*C$99e,C$99i.y=C$99t.x*C$99r+C$99t.y*C$99e,C$99i},C$99N.AddMM=function(C$99t,C$99e,C$99i){var C$99n=C$99t.ex,C$99t=C$99t.ey,C$99r=C$99e.ex,C$99e=C$99e.ey;return C$99i.ex.x=C$99n.x+C$99r.x,C$99i.ex.y=C$99n.y+C$99r.y,C$99i.ey.x=C$99t.x+C$99e.x,C$99i.ey.y=C$99t.y+C$99e.y,C$99i},C$99N.MulMM=function(C$99t,C$99e,C$99i){var C$99n=C$99t.ex.x,C$99r=C$99t.ex.y,C$99s=C$99t.ey.x,C$99t=C$99t.ey.y,C$99o=C$99e.ex.x,C$99a=C$99e.ex.y,C$99c=C$99e.ey.x,C$99e=C$99e.ey.y;return C$99i.ex.x=C$99n*C$99o+C$99s*C$99a,C$99i.ex.y=C$99r*C$99o+C$99t*C$99a,C$99i.ey.x=C$99n*C$99c+C$99s*C$99e,C$99i.ey.y=C$99r*C$99c+C$99t*C$99e,C$99i},C$99N.MulTMM=function(C$99t,C$99e,C$99i){var C$99n=C$99t.ex.x,C$99r=C$99t.ex.y,C$99s=C$99t.ey.x,C$99t=C$99t.ey.y,C$99o=C$99e.ex.x,C$99a=C$99e.ex.y,C$99c=C$99e.ey.x,C$99e=C$99e.ey.y;return C$99i.ex.x=C$99n*C$99o+C$99r*C$99a,C$99i.ex.y=C$99s*C$99o+C$99t*C$99a,C$99i.ey.x=C$99n*C$99c+C$99r*C$99e,C$99i.ey.y=C$99s*C$99c+C$99t*C$99e,C$99i},C$99N.IDENTITY=new C$99N;var C$99F=C$99N;function C$99N(){this.ex=new C$99j(1,0),this.ey=new C$99j(0,1)}C$99G.prototype.Clone=function(){return(new C$99G).Copy(this)},C$99G.prototype.SetVVV=function(C$99t,C$99e,C$99i){return this.ex.Copy(C$99t),this.ey.Copy(C$99e),this.ez.Copy(C$99i),this},C$99G.prototype.Copy=function(C$99t){return this.ex.Copy(C$99t.ex),this.ey.Copy(C$99t.ey),this.ez.Copy(C$99t.ez),this},C$99G.prototype.SetIdentity=function(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this},C$99G.prototype.SetZero=function(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this},C$99G.prototype.SelfAddM=function(C$99t){return this.ex.SelfAdd(C$99t.ex),this.ey.SelfAdd(C$99t.ey),this.ez.SelfAdd(C$99t.ez),this},C$99G.prototype.Solve33=function(C$99t,C$99e,C$99i,C$99h){var C$99u=this.ex.x,C$99_=this.ex.y,C$99d=this.ex.z,C$99n=this.ey.x,C$99r=this.ey.y,C$99s=this.ey.z,C$99o=this.ez.x,C$99a=this.ez.y,C$99c=this.ez.z,C$99l=C$99u*(C$99r*C$99c-C$99s*C$99a)+C$99_*(C$99s*C$99o-C$99n*C$99c)+C$99d*(C$99n*C$99a-C$99r*C$99o);return C$99h.x=(C$99l=0!==C$99l?1/C$99l:C$99l)*(C$99t*(C$99r*C$99c-C$99s*C$99a)+C$99e*(C$99s*C$99o-C$99n*C$99c)+C$99i*(C$99n*C$99a-C$99r*C$99o)),C$99h.y=C$99l*(C$99u*(C$99e*C$99c-C$99i*C$99a)+C$99_*(C$99i*C$99o-C$99t*C$99c)+C$99d*(C$99t*C$99a-C$99e*C$99o)),C$99h.z=C$99l*(C$99u*(C$99r*C$99i-C$99s*C$99e)+C$99_*(C$99s*C$99t-C$99n*C$99i)+C$99d*(C$99n*C$99e-C$99r*C$99t)),C$99h},C$99G.prototype.Solve22=function(C$99t,C$99e,C$99i){var C$99n=this.ex.x,C$99r=this.ey.x,C$99s=this.ex.y,C$99o=this.ey.y,C$99a=C$99n*C$99o-C$99r*C$99s;return C$99i.x=(C$99a=0!==C$99a?1/C$99a:C$99a)*(C$99o*C$99t-C$99r*C$99e),C$99i.y=C$99a*(C$99n*C$99e-C$99s*C$99t),C$99i},C$99G.prototype.GetInverse22=function(C$99t){var C$99e=this.ex.x,C$99i=this.ey.x,C$99n=this.ex.y,C$99r=this.ey.y,C$99s=C$99e*C$99r-C$99i*C$99n;C$99t.ex.x=(C$99s=0!==C$99s?1/C$99s:C$99s)*C$99r,C$99t.ey.x=-C$99s*C$99i,C$99t.ex.z=0,C$99t.ex.y=-C$99s*C$99n,C$99t.ey.y=C$99s*C$99e,C$99t.ey.z=0,C$99t.ez.x=0,C$99t.ez.y=0,C$99t.ez.z=0},C$99G.prototype.GetSymInverse33=function(C$99t){var C$99e=C$99b.DotV3V3(this.ex,C$99b.CrossV3V3(this.ey,this.ez,C$99b.s_t0)),C$99i=this.ex.x,C$99n=this.ey.x,C$99r=this.ez.x,C$99s=this.ey.y,C$99o=this.ez.y,C$99a=this.ez.z;C$99t.ex.x=(C$99e=0!==C$99e?1/C$99e:C$99e)*(C$99s*C$99a-C$99o*C$99o),C$99t.ex.y=C$99e*(C$99r*C$99o-C$99n*C$99a),C$99t.ex.z=C$99e*(C$99n*C$99o-C$99r*C$99s),C$99t.ey.x=C$99t.ex.y,C$99t.ey.y=C$99e*(C$99i*C$99a-C$99r*C$99r),C$99t.ey.z=C$99e*(C$99r*C$99n-C$99i*C$99o),C$99t.ez.x=C$99t.ex.z,C$99t.ez.y=C$99t.ey.z,C$99t.ez.z=C$99e*(C$99i*C$99s-C$99n*C$99n)},C$99G.MulM33V3=function(C$99t,C$99e,C$99i){var C$99n=C$99e.x,C$99r=C$99e.y,C$99e=C$99e.z;return C$99i.x=C$99t.ex.x*C$99n+C$99t.ey.x*C$99r+C$99t.ez.x*C$99e,C$99i.y=C$99t.ex.y*C$99n+C$99t.ey.y*C$99r+C$99t.ez.y*C$99e,C$99i.z=C$99t.ex.z*C$99n+C$99t.ey.z*C$99r+C$99t.ez.z*C$99e,C$99i},C$99G.MulM33XYZ=function(C$99t,C$99e,C$99i,C$99n,C$99r){return C$99r.x=C$99t.ex.x*C$99e+C$99t.ey.x*C$99i+C$99t.ez.x*C$99n,C$99r.y=C$99t.ex.y*C$99e+C$99t.ey.y*C$99i+C$99t.ez.y*C$99n,C$99r.z=C$99t.ex.z*C$99e+C$99t.ey.z*C$99i+C$99t.ez.z*C$99n,C$99r},C$99G.MulM33V2=function(C$99t,C$99e,C$99i){var C$99n=C$99e.x,C$99e=C$99e.y;return C$99i.x=C$99t.ex.x*C$99n+C$99t.ey.x*C$99e,C$99i.y=C$99t.ex.y*C$99n+C$99t.ey.y*C$99e,C$99i},C$99G.MulM33XY=function(C$99t,C$99e,C$99i,C$99n){return C$99n.x=C$99t.ex.x*C$99e+C$99t.ey.x*C$99i,C$99n.y=C$99t.ex.y*C$99e+C$99t.ey.y*C$99i,C$99n},C$99G.IDENTITY=new C$99G;var C$99k=C$99G;function C$99G(){this.ex=new C$99b(1,0,0),this.ey=new C$99b(0,1,0),this.ez=new C$99b(0,0,1)}C$99z.prototype.Clone=function(){return(new C$99z).Copy(this)},C$99z.prototype.Copy=function(C$99t){return this.s=C$99t.s,this.c=C$99t.c,this},C$99z.prototype.SetAngle=function(C$99t){return this.s=Math.sin(C$99t),this.c=Math.cos(C$99t),this},C$99z.prototype.SetIdentity=function(){return this.s=0,this.c=1,this},C$99z.prototype.GetAngle=function(){return Math.atan2(this.s,this.c)},C$99z.prototype.GetXAxis=function(C$99t){return C$99t.x=this.c,C$99t.y=this.s,C$99t},C$99z.prototype.GetYAxis=function(C$99t){return C$99t.x=-this.s,C$99t.y=this.c,C$99t},C$99z.MulRR=function(C$99t,C$99e,C$99i){var C$99n=C$99t.c,C$99t=C$99t.s,C$99r=C$99e.c,C$99e=C$99e.s;return C$99i.s=C$99t*C$99r+C$99n*C$99e,C$99i.c=C$99n*C$99r-C$99t*C$99e,C$99i},C$99z.MulTRR=function(C$99t,C$99e,C$99i){var C$99n=C$99t.c,C$99t=C$99t.s,C$99r=C$99e.c,C$99e=C$99e.s;return C$99i.s=C$99n*C$99e-C$99t*C$99r,C$99i.c=C$99n*C$99r+C$99t*C$99e,C$99i},C$99z.MulRV=function(C$99t,C$99e,C$99i){var C$99n=C$99t.c,C$99t=C$99t.s,C$99r=C$99e.x,C$99e=C$99e.y;return C$99i.x=C$99n*C$99r-C$99t*C$99e,C$99i.y=C$99t*C$99r+C$99n*C$99e,C$99i},C$99z.MulTRV=function(C$99t,C$99e,C$99i){var C$99n=C$99t.c,C$99t=C$99t.s,C$99r=C$99e.x,C$99e=C$99e.y;return C$99i.x=C$99n*C$99r+C$99t*C$99e,C$99i.y=-C$99t*C$99r+C$99n*C$99e,C$99i},C$99z.IDENTITY=new C$99z;var C$99B=C$99z;function C$99z(C$99t){void 0===C$99t&&(C$99t=0),this.s=0,this.c=1,C$99t&&(this.s=Math.sin(C$99t),this.c=Math.cos(C$99t))}C$99U.prototype.Clone=function(){return(new C$99U).Copy(this)},C$99U.prototype.Copy=function(C$99t){return this.p.Copy(C$99t.p),this.q.Copy(C$99t.q),this},C$99U.prototype.SetIdentity=function(){return this.p.SetZero(),this.q.SetIdentity(),this},C$99U.prototype.SetPositionRotation=function(C$99t,C$99e){return this.p.Copy(C$99t),this.q.Copy(C$99e),this},C$99U.prototype.SetPositionAngle=function(C$99t,C$99e){return this.p.Copy(C$99t),this.q.SetAngle(C$99e),this},C$99U.prototype.SetPosition=function(C$99t){return this.p.Copy(C$99t),this},C$99U.prototype.SetPositionXY=function(C$99t,C$99e){return this.p.Set(C$99t,C$99e),this},C$99U.prototype.SetRotation=function(C$99t){return this.q.Copy(C$99t),this},C$99U.prototype.SetRotationAngle=function(C$99t){return this.q.SetAngle(C$99t),this},C$99U.prototype.GetPosition=function(){return this.p},C$99U.prototype.GetRotation=function(){return this.q},C$99U.prototype.GetRotationAngle=function(){return this.q.GetAngle()},C$99U.prototype.GetAngle=function(){return this.q.GetAngle()},C$99U.MulXV=function(C$99t,C$99e,C$99i){var C$99n=C$99t.q.c,C$99r=C$99t.q.s,C$99s=C$99e.x,C$99e=C$99e.y;return C$99i.x=C$99n*C$99s-C$99r*C$99e+C$99t.p.x,C$99i.y=C$99r*C$99s+C$99n*C$99e+C$99t.p.y,C$99i},C$99U.MulTXV=function(C$99t,C$99e,C$99i){var C$99n=C$99t.q.c,C$99r=C$99t.q.s,C$99s=C$99e.x-C$99t.p.x,C$99e=C$99e.y-C$99t.p.y;return C$99i.x=C$99n*C$99s+C$99r*C$99e,C$99i.y=-C$99r*C$99s+C$99n*C$99e,C$99i},C$99U.MulXX=function(C$99t,C$99e,C$99i){return C$99B.MulRR(C$99t.q,C$99e.q,C$99i.q),C$99j.AddVV(C$99B.MulRV(C$99t.q,C$99e.p,C$99i.p),C$99t.p,C$99i.p),C$99i},C$99U.MulTXX=function(C$99t,C$99e,C$99i){return C$99B.MulTRR(C$99t.q,C$99e.q,C$99i.q),C$99B.MulTRV(C$99t.q,C$99j.SubVV(C$99e.p,C$99t.p,C$99i.p),C$99i.p),C$99i},C$99U.IDENTITY=new C$99U;var C$99R=C$99U;function C$99U(){this.p=new C$99j,this.q=new C$99B}C$99q.prototype.Clone=function(){return(new C$99q).Copy(this)},C$99q.prototype.Copy=function(C$99t){return this.localCenter.Copy(C$99t.localCenter),this.c0.Copy(C$99t.c0),this.c.Copy(C$99t.c),this.a0=C$99t.a0,this.a=C$99t.a,this.alpha0=C$99t.alpha0,this},C$99q.prototype.GetTransform=function(C$99t,C$99e){var C$99i=1-C$99e,C$99i=(C$99t.p.x=C$99i*this.c0.x+C$99e*this.c.x,C$99t.p.y=C$99i*this.c0.y+C$99e*this.c.y,C$99i*this.a0+C$99e*this.a);return C$99t.q.SetAngle(C$99i),C$99t.p.SelfSub(C$99B.MulRV(C$99t.q,this.localCenter,C$99j.s_t0)),C$99t},C$99q.prototype.Advance=function(C$99t){var C$99e=(C$99t-this.alpha0)/(1-this.alpha0),C$99i=1-C$99e;this.c0.x=C$99i*this.c0.x+C$99e*this.c.x,this.c0.y=C$99i*this.c0.y+C$99e*this.c.y,this.a0=C$99i*this.a0+C$99e*this.a,this.alpha0=C$99t},C$99q.prototype.Normalize=function(){var C$99t=6.28318530718*Math.floor(this.a0/6.28318530718);this.a0-=C$99t,this.a-=C$99t};var C$99W=C$99q;function C$99q(){this.localCenter=new C$99j,this.c0=new C$99j,this.c=new C$99j,this.a0=0,this.a=0,this.alpha0=0}C$99Z.prototype.Clone=function(){return(new C$99Z).Copy(this)},C$99Z.prototype.Copy=function(C$99t){return this.r=C$99t.r,this.g=C$99t.g,this.b=C$99t.b,this.a=C$99t.a,this},C$99Z.prototype.IsEqual=function(C$99t){return this.r===C$99t.r&&this.g===C$99t.g&&this.b===C$99t.b&&this.a===C$99t.a},C$99Z.prototype.IsZero=function(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a},C$99Z.prototype.Set=function(C$99t,C$99e,C$99i,C$99n){void 0===C$99n&&(C$99n=this.a),this.SetRGBA(C$99t,C$99e,C$99i,C$99n)},C$99Z.prototype.SetByteRGB=function(C$99t,C$99e,C$99i){return this.r=C$99t/255,this.g=C$99e/255,this.b=C$99i/255,this},C$99Z.prototype.SetByteRGBA=function(C$99t,C$99e,C$99i,C$99n){return this.r=C$99t/255,this.g=C$99e/255,this.b=C$99i/255,this.a=C$99n/255,this},C$99Z.prototype.SetRGB=function(C$99t,C$99e,C$99i){return this.r=C$99t,this.g=C$99e,this.b=C$99i,this},C$99Z.prototype.SetRGBA=function(C$99t,C$99e,C$99i,C$99n){return this.r=C$99t,this.g=C$99e,this.b=C$99i,this.a=C$99n,this},C$99Z.prototype.SelfAdd=function(C$99t){return this.r+=C$99t.r,this.g+=C$99t.g,this.b+=C$99t.b,this.a+=C$99t.a,this},C$99Z.prototype.Add=function(C$99t,C$99e){return C$99e.r=this.r+C$99t.r,C$99e.g=this.g+C$99t.g,C$99e.b=this.b+C$99t.b,C$99e.a=this.a+C$99t.a,C$99e},C$99Z.prototype.SelfSub=function(C$99t){return this.r-=C$99t.r,this.g-=C$99t.g,this.b-=C$99t.b,this.a-=C$99t.a,this},C$99Z.prototype.Sub=function(C$99t,C$99e){return C$99e.r=this.r-C$99t.r,C$99e.g=this.g-C$99t.g,C$99e.b=this.b-C$99t.b,C$99e.a=this.a-C$99t.a,C$99e},C$99Z.prototype.SelfMul=function(C$99t){return this.r*=C$99t,this.g*=C$99t,this.b*=C$99t,this.a*=C$99t,this},C$99Z.prototype.Mul=function(C$99t,C$99e){return C$99e.r=this.r*C$99t,C$99e.g=this.g*C$99t,C$99e.b=this.b*C$99t,C$99e.a=this.a*C$99t,C$99e},C$99Z.prototype.Mix=function(C$99t,C$99e){C$99Z.MixColors(this,C$99t,C$99e)},C$99Z.MixColors=function(C$99t,C$99e,C$99i){var C$99n=C$99i*(C$99e.r-C$99t.r),C$99r=C$99i*(C$99e.g-C$99t.g),C$99s=C$99i*(C$99e.b-C$99t.b),C$99i=C$99i*(C$99e.a-C$99t.a);C$99t.r+=C$99n,C$99t.g+=C$99r,C$99t.b+=C$99s,C$99t.a+=C$99i,C$99e.r-=C$99n,C$99e.g-=C$99r,C$99e.b-=C$99s,C$99e.a-=C$99i},C$99Z.prototype.MakeStyleString=function(C$99t){return void 0===C$99t&&(C$99t=this.a),C$99Z.MakeStyleString(this.r,this.g,this.b,C$99t)},C$99Z.MakeStyleString=function(C$99t,C$99e,C$99i,C$99n){return C$99t*=255,C$99e*=255,C$99i*=255,(C$99n=void 0===C$99n?1:C$99n)<1?"rgba("+C$99t+","+C$99e+","+C$99i+","+C$99n+")":"rgb("+C$99t+","+C$99e+","+C$99i+")"},C$99Z.ZERO=new C$99Z(0,0,0,0),C$99Z.RED=new C$99Z(1,0,0),C$99Z.GREEN=new C$99Z(0,1,0),C$99Z.BLUE=new C$99Z(0,0,1);var C$99J=C$99Z;function C$99Z(C$99t,C$99e,C$99i,C$99n){void 0===C$99e&&(C$99e=.5),void 0===C$99i&&(C$99i=.5),void 0===C$99n&&(C$99n=1),this.r=C$99t=void 0===C$99t?.5:C$99t,this.g=C$99e,this.b=C$99i,this.a=C$99n}(C$99K=C$99H.b2DrawFlags||(C$99H.b2DrawFlags={}))[C$99K.e_none=0]="e_none",C$99K[C$99K.e_shapeBit=1]="e_shapeBit",C$99K[C$99K.e_jointBit=2]="e_jointBit",C$99K[C$99K.e_aabbBit=4]="e_aabbBit",C$99K[C$99K.e_pairBit=8]="e_pairBit",C$99K[C$99K.e_centerOfMassBit=16]="e_centerOfMassBit",C$99K[C$99K.e_particleBit=32]="e_particleBit",C$99K[C$99K.e_controllerBit=64]="e_controllerBit",C$99K[C$99K.e_all=63]="e_all";C$99Q.prototype.SetFlags=function(C$99t){this.m_drawFlags=C$99t},C$99Q.prototype.GetFlags=function(){return this.m_drawFlags},C$99Q.prototype.AppendFlags=function(C$99t){this.m_drawFlags|=C$99t},C$99Q.prototype.ClearFlags=function(C$99t){this.m_drawFlags&=~C$99t};var C$99K=C$99Q;function C$99Q(){this.m_drawFlags=0}C$99tt.prototype.Reset=function(){return this.m_start=Date.now(),this},C$99tt.prototype.GetMilliseconds=function(){return Date.now()-this.m_start};var C$99$=C$99tt;function C$99tt(){this.m_start=Date.now()}C$99it.prototype.GetCount=function(){return this.m_count},C$99it.prototype.GetMinCount=function(){return this.m_min_count},C$99it.prototype.GetMaxCount=function(){return this.m_max_count},C$99it.prototype.ResetCount=function(){var C$99t=this.m_count;return this.m_count=0,C$99t},C$99it.prototype.ResetMinCount=function(){this.m_min_count=0},C$99it.prototype.ResetMaxCount=function(){this.m_max_count=0},C$99it.prototype.Increment=function(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)},C$99it.prototype.Decrement=function(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)};var C$99et=C$99it;function C$99it(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}C$99rt.prototype.Reset=function(){return this.m_count=0,this},C$99rt.prototype.Push=function(C$99t){this.m_stack[this.m_count]=C$99t,this.m_count++},C$99rt.prototype.Pop=function(){this.m_count--;var C$99t=this.m_stack[this.m_count];if((this.m_stack[this.m_count]=null)===C$99t)throw new Error;return C$99t},C$99rt.prototype.GetCount=function(){return this.m_count};var C$99nt=C$99rt;function C$99rt(C$99t){this.m_stack=[],this.m_count=0,this.m_stack=C$99c(C$99t,function(C$99t){return null}),this.m_count=0}function C$99st(){}function C$99ot(){}C$99ct.prototype.Copy=function(C$99t){return C$99t.m_vertices===C$99t.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(C$99t.m_buffer[0]),this.m_buffer[1].Copy(C$99t.m_buffer[1])):this.m_vertices=C$99t.m_vertices,this.m_count=C$99t.m_count,this.m_radius=C$99t.m_radius,this},C$99ct.prototype.Reset=function(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this},C$99ct.prototype.SetShape=function(C$99t,C$99e){C$99t.SetupDistanceProxy(this,C$99e)},C$99ct.prototype.SetVerticesRadius=function(C$99t,C$99e,C$99i){this.m_vertices=C$99t,this.m_count=C$99e,this.m_radius=C$99i},C$99ct.prototype.GetSupport=function(C$99t){for(var C$99e=0,C$99i=C$99j.DotVV(this.m_vertices[0],C$99t),C$99n=1;C$99n<this.m_count;++C$99n){var C$99r=C$99j.DotVV(this.m_vertices[C$99n],C$99t);C$99i<C$99r&&(C$99e=C$99n,C$99i=C$99r)}return C$99e},C$99ct.prototype.GetSupportVertex=function(C$99t){for(var C$99e=0,C$99i=C$99j.DotVV(this.m_vertices[0],C$99t),C$99n=1;C$99n<this.m_count;++C$99n){var C$99r=C$99j.DotVV(this.m_vertices[C$99n],C$99t);C$99i<C$99r&&(C$99e=C$99n,C$99i=C$99r)}return this.m_vertices[C$99e]},C$99ct.prototype.GetVertexCount=function(){return this.m_count},C$99ct.prototype.GetVertex=function(C$99t){return this.m_vertices[C$99t]};var C$99at=C$99ct;function C$99ct(){this.m_buffer=C$99j.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}C$99ht.prototype.Reset=function(){return this.metric=0,this.count=0,this};var C$99lt=C$99ht;function C$99ht(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}C$99_t.prototype.Reset=function(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this};var C$99ut=C$99_t;function C$99_t(){this.proxyA=new C$99at,this.proxyB=new C$99at,this.transformA=new C$99R,this.transformB=new C$99R,this.useRadii=!1}C$99ft.prototype.Reset=function(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this};var C$99dt=C$99ft;function C$99ft(){this.pointA=new C$99j,this.pointB=new C$99j,this.distance=0,this.iterations=0}function C$99pt(){this.proxyA=new C$99at,this.proxyB=new C$99at,this.transformA=new C$99R,this.transformB=new C$99R,this.translationB=new C$99j}function C$99mt(){this.point=new C$99j,this.normal=new C$99j,this.lambda=0,this.iterations=0}C$99H.b2_gjkCalls=0,C$99H.b2_gjkIters=0,C$99H.b2_gjkMaxIters=0;C$99gt.prototype.Copy=function(C$99t){return this.wA.Copy(C$99t.wA),this.wB.Copy(C$99t.wB),this.w.Copy(C$99t.w),this.a=C$99t.a,this.indexA=C$99t.indexA,this.indexB=C$99t.indexB,this};var C$99yt=C$99gt;function C$99gt(){this.wA=new C$99j,this.wB=new C$99j,this.w=new C$99j,this.a=0,this.indexA=0,this.indexB=0}C$99xt.prototype.ReadCache=function(C$99t,C$99e,C$99i,C$99n,C$99h){this.m_count=C$99t.count;for(var C$99r,C$99s,C$99u=this.m_vertices,C$99o=0;C$99o<this.m_count;++C$99o){(C$99a=C$99u[C$99o]).indexA=C$99t.indexA[C$99o],C$99a.indexB=C$99t.indexB[C$99o];var C$99a,C$99c=C$99e.GetVertex(C$99a.indexA),C$99l=C$99n.GetVertex(C$99a.indexB);C$99R.MulXV(C$99i,C$99c,C$99a.wA),C$99R.MulXV(C$99h,C$99l,C$99a.wB),C$99j.SubVV(C$99a.wB,C$99a.wA,C$99a.w),C$99a.a=0}1<this.m_count&&(C$99r=C$99t.metric,((C$99s=this.GetMetric())<.5*C$99r||2*C$99r<C$99s||C$99s<C$99M)&&(this.m_count=0)),0===this.m_count&&((C$99a=C$99u[0]).indexA=0,C$99a.indexB=0,C$99c=C$99e.GetVertex(0),C$99l=C$99n.GetVertex(0),C$99R.MulXV(C$99i,C$99c,C$99a.wA),C$99R.MulXV(C$99h,C$99l,C$99a.wB),C$99j.SubVV(C$99a.wB,C$99a.wA,C$99a.w),C$99a.a=1,this.m_count=1)},C$99xt.prototype.WriteCache=function(C$99t){C$99t.metric=this.GetMetric(),C$99t.count=this.m_count;for(var C$99e=this.m_vertices,C$99i=0;C$99i<this.m_count;++C$99i)C$99t.indexA[C$99i]=C$99e[C$99i].indexA,C$99t.indexB[C$99i]=C$99e[C$99i].indexB},C$99xt.prototype.GetSearchDirection=function(C$99t){switch(this.m_count){case 1:return C$99j.NegV(this.m_v1.w,C$99t);case 2:var C$99e=C$99j.SubVV(this.m_v2.w,this.m_v1.w,C$99t);return 0<C$99j.CrossVV(C$99e,C$99j.NegV(this.m_v1.w,C$99j.s_t0))?C$99j.CrossOneV(C$99e,C$99t):C$99j.CrossVOne(C$99e,C$99t);default:return C$99t.SetZero()}},C$99xt.prototype.GetClosestPoint=function(C$99t){switch(this.m_count){case 0:return C$99t.SetZero();case 1:return C$99t.Copy(this.m_v1.w);case 2:return C$99t.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return C$99t.SetZero()}},C$99xt.prototype.GetWitnessPoints=function(C$99t,C$99e){switch(this.m_count){case 0:break;case 1:C$99t.Copy(this.m_v1.wA),C$99e.Copy(this.m_v1.wB);break;case 2:C$99t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,C$99t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,C$99e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,C$99e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:C$99e.x=C$99t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,C$99e.y=C$99t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}},C$99xt.prototype.GetMetric=function(){switch(this.m_count){case 0:case 1:return 0;case 2:return C$99j.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return C$99j.CrossVV(C$99j.SubVV(this.m_v2.w,this.m_v1.w,C$99j.s_t0),C$99j.SubVV(this.m_v3.w,this.m_v1.w,C$99j.s_t1));default:return 0}},C$99xt.prototype.Solve2=function(){var C$99t=this.m_v1.w,C$99e=this.m_v2.w,C$99i=C$99j.SubVV(C$99e,C$99t,C$99xt.s_e12),C$99t=-C$99j.DotVV(C$99t,C$99i);if(C$99t<=0)return this.m_v1.a=1,void(this.m_count=1);C$99e=C$99j.DotVV(C$99e,C$99i);if(C$99e<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);C$99i=1/(C$99e+C$99t);this.m_v1.a=C$99e*C$99i,this.m_v2.a=C$99t*C$99i,this.m_count=2},C$99xt.prototype.Solve3=function(){var C$99t=this.m_v1.w,C$99e=this.m_v2.w,C$99i=this.m_v3.w,C$99n=C$99j.SubVV(C$99e,C$99t,C$99xt.s_e12),C$99r=C$99j.DotVV(C$99t,C$99n),C$99s=C$99j.DotVV(C$99e,C$99n),C$99r=-C$99r,C$99o=C$99j.SubVV(C$99i,C$99t,C$99xt.s_e13),C$99a=C$99j.DotVV(C$99t,C$99o),C$99h=C$99j.DotVV(C$99i,C$99o),C$99a=-C$99a,C$99c=C$99j.SubVV(C$99i,C$99e,C$99xt.s_e23),C$99l=C$99j.DotVV(C$99e,C$99c),C$99c=C$99j.DotVV(C$99i,C$99c),C$99l=-C$99l,C$99n=C$99j.CrossVV(C$99n,C$99o),C$99o=C$99n*C$99j.CrossVV(C$99e,C$99i),C$99i=C$99n*C$99j.CrossVV(C$99i,C$99t),C$99n=C$99n*C$99j.CrossVV(C$99t,C$99e);if(C$99r<=0&&C$99a<=0)return this.m_v1.a=1,void(this.m_count=1);if(0<C$99s&&0<C$99r&&C$99n<=0)return this.m_v1.a=C$99s*(C$99t=1/(C$99s+C$99r)),this.m_v2.a=C$99r*C$99t,void(this.m_count=2);if(0<C$99h&&0<C$99a&&C$99i<=0)return this.m_v1.a=C$99h*(C$99e=1/(C$99h+C$99a)),this.m_v3.a=C$99a*C$99e,this.m_count=2,void this.m_v2.Copy(this.m_v3);if(C$99s<=0&&C$99l<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(C$99h<=0&&C$99c<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(0<C$99c&&0<C$99l&&C$99o<=0)return this.m_v2.a=C$99c*(C$99r=1/(C$99c+C$99l)),this.m_v3.a=C$99l*C$99r,this.m_count=2,void this.m_v1.Copy(this.m_v3);C$99t=1/(C$99o+C$99i+C$99n);this.m_v1.a=C$99o*C$99t,this.m_v2.a=C$99i*C$99t,this.m_v3.a=C$99n*C$99t,this.m_count=3},C$99xt.s_e12=new C$99j,C$99xt.s_e13=new C$99j,C$99xt.s_e23=new C$99j;var C$99vt=C$99xt;function C$99xt(){this.m_v1=new C$99yt,this.m_v2=new C$99yt,this.m_v3=new C$99yt,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}var C$99bt=new C$99vt,C$99At=[0,0,0],C$99Ct=[0,0,0],C$99St=new C$99j,C$99Tt=new C$99j,C$99wt=new C$99j,C$99Et=new C$99j,C$99Mt=new C$99j;function C$99It(C$99t,C$99e,C$99i){++C$99H.b2_gjkCalls;for(var C$99n,C$99r=C$99i.proxyA,C$99s=C$99i.proxyB,C$99h=C$99i.transformA,C$99u=C$99i.transformB,C$99o=C$99bt,C$99_=(C$99o.ReadCache(C$99e,C$99r,C$99h,C$99s,C$99u),C$99o.m_vertices),C$99d=C$99At,C$99f=C$99Ct,C$99a=0;C$99a<20;){for(var C$99p=C$99o.m_count,C$99c=0;C$99c<C$99p;++C$99c)C$99d[C$99c]=C$99_[C$99c].indexA,C$99f[C$99c]=C$99_[C$99c].indexB;switch(C$99o.m_count){case 1:break;case 2:C$99o.Solve2();break;case 3:C$99o.Solve3()}if(3===C$99o.m_count)break;var C$99m=C$99o.GetSearchDirection(C$99Tt);if(C$99m.LengthSquared()<C$99g)break;for(var C$99l=C$99_[C$99o.m_count],C$99y=(C$99l.indexA=C$99r.GetSupport(C$99B.MulTRV(C$99h.q,C$99j.NegV(C$99m,C$99j.s_t0),C$99Et)),C$99R.MulXV(C$99h,C$99r.GetVertex(C$99l.indexA),C$99l.wA),C$99l.indexB=C$99s.GetSupport(C$99B.MulTRV(C$99u.q,C$99m,C$99Mt)),C$99R.MulXV(C$99u,C$99s.GetVertex(C$99l.indexB),C$99l.wB),C$99j.SubVV(C$99l.wB,C$99l.wA,C$99l.w),++C$99a,++C$99H.b2_gjkIters,!1),C$99c=0;C$99c<C$99p;++C$99c)if(C$99l.indexA===C$99d[C$99c]&&C$99l.indexB===C$99f[C$99c]){C$99y=!0;break}if(C$99y)break;++C$99o.m_count}C$99H.b2_gjkMaxIters=C$99V(C$99H.b2_gjkMaxIters,C$99a),C$99o.GetWitnessPoints(C$99t.pointA,C$99t.pointB),C$99t.distance=C$99j.DistanceVV(C$99t.pointA,C$99t.pointB),C$99t.iterations=C$99a,C$99o.WriteCache(C$99e),C$99i.useRadii&&(C$99e=C$99r.m_radius,C$99i=C$99s.m_radius,C$99t.distance>C$99e+C$99i&&C$99t.distance>C$99M?(C$99t.distance-=C$99e+C$99i,(C$99n=C$99j.SubVV(C$99t.pointB,C$99t.pointA,C$99wt)).Normalize(),C$99t.pointA.SelfMulAdd(C$99e,C$99n),C$99t.pointB.SelfMulSub(C$99i,C$99n)):(C$99e=C$99j.MidVV(C$99t.pointA,C$99t.pointB,C$99St),C$99t.pointA.Copy(C$99e),C$99t.pointB.Copy(C$99e),C$99t.distance=0))}var C$99Bt=new C$99j,C$99Rt=new C$99vt,C$99Pt=new C$99j,C$99Dt=new C$99j,C$99Lt=new C$99j,C$99Vt=new C$99j,C$99Ot=new C$99j,C$99Ft=new C$99j;(C$99Xt=C$99H.b2ContactFeatureType||(C$99H.b2ContactFeatureType={}))[C$99Xt.e_vertex=0]="e_vertex",C$99Xt[C$99Xt.e_face=1]="e_face";Object.defineProperty(C$99kt.prototype,"key",{get:function(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key},set:function(C$99t){this._key=C$99t,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255},enumerable:!0,configurable:!0}),Object.defineProperty(C$99kt.prototype,"indexA",{get:function(){return this._indexA},set:function(C$99t){this._indexA=C$99t,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(C$99kt.prototype,"indexB",{get:function(){return this._indexB},set:function(C$99t){this._indexB=C$99t,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(C$99kt.prototype,"typeA",{get:function(){return this._typeA},set:function(C$99t){this._typeA=C$99t,this._key_invalid=!0},enumerable:!0,configurable:!0}),Object.defineProperty(C$99kt.prototype,"typeB",{get:function(){return this._typeB},set:function(C$99t){this._typeB=C$99t,this._key_invalid=!0},enumerable:!0,configurable:!0});var C$99Nt=C$99kt;function C$99kt(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}C$99zt.prototype.Copy=function(C$99t){return this.key=C$99t.key,this},C$99zt.prototype.Clone=function(){return(new C$99zt).Copy(this)},Object.defineProperty(C$99zt.prototype,"key",{get:function(){return this.cf.key},set:function(C$99t){this.cf.key=C$99t},enumerable:!0,configurable:!0});var C$99Gt=C$99zt;function C$99zt(){this.cf=new C$99Nt}C$99Wt.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99Wt})},C$99Wt.prototype.Reset=function(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0},C$99Wt.prototype.Copy=function(C$99t){return this.localPoint.Copy(C$99t.localPoint),this.normalImpulse=C$99t.normalImpulse,this.tangentImpulse=C$99t.tangentImpulse,this.id.Copy(C$99t.id),this};var C$99Ut=C$99Wt;function C$99Wt(){this.localPoint=new C$99j,this.normalImpulse=0,this.tangentImpulse=0,this.id=new C$99Gt}(C$99Xt=C$99H.b2ManifoldType||(C$99H.b2ManifoldType={}))[C$99Xt.e_unknown=-1]="e_unknown",C$99Xt[C$99Xt.e_circles=0]="e_circles",C$99Xt[C$99Xt.e_faceA=1]="e_faceA",C$99Xt[C$99Xt.e_faceB=2]="e_faceB";C$99jt.prototype.Reset=function(){for(var C$99t=0;C$99t<2;++C$99t)this.points[C$99t].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=C$99H.b2ManifoldType.e_unknown,this.pointCount=0},C$99jt.prototype.Copy=function(C$99t){this.pointCount=C$99t.pointCount;for(var C$99e=0;C$99e<2;++C$99e)this.points[C$99e].Copy(C$99t.points[C$99e]);return this.localNormal.Copy(C$99t.localNormal),this.localPoint.Copy(C$99t.localPoint),this.type=C$99t.type,this},C$99jt.prototype.Clone=function(){return(new C$99jt).Copy(this)};var C$99Ht=C$99jt;function C$99jt(){this.points=C$99Ut.MakeArray(2),this.localNormal=new C$99j,this.localPoint=new C$99j,this.type=C$99H.b2ManifoldType.e_unknown,this.pointCount=0}C$99Yt.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n,C$99r){if(0!==C$99t.pointCount)switch(C$99t.type){case C$99H.b2ManifoldType.e_circles:this.normal.Set(1,0);var C$99s=C$99R.MulXV(C$99e,C$99t.localPoint,C$99Yt.Initialize_s_pointA),C$99h=C$99R.MulXV(C$99n,C$99t.points[0].localPoint,C$99Yt.Initialize_s_pointB),C$99o=(C$99j.DistanceSquaredVV(C$99s,C$99h)>C$99g&&C$99j.SubVV(C$99h,C$99s,this.normal).SelfNormalize(),C$99j.AddVMulSV(C$99s,C$99i,this.normal,C$99Yt.Initialize_s_cA)),C$99a=C$99j.SubVMulSV(C$99h,C$99r,this.normal,C$99Yt.Initialize_s_cB);C$99j.MidVV(C$99o,C$99a,this.points[0]),this.separations[0]=C$99j.DotVV(C$99j.SubVV(C$99a,C$99o,C$99j.s_t0),this.normal);break;case C$99H.b2ManifoldType.e_faceA:C$99B.MulRV(C$99e.q,C$99t.localNormal,this.normal);for(var C$99u=C$99R.MulXV(C$99e,C$99t.localPoint,C$99Yt.Initialize_s_planePoint),C$99c=0;C$99c<C$99t.pointCount;++C$99c){var C$99l=C$99R.MulXV(C$99n,C$99t.points[C$99c].localPoint,C$99Yt.Initialize_s_clipPoint),C$99_=C$99i-C$99j.DotVV(C$99j.SubVV(C$99l,C$99u,C$99j.s_t0),this.normal),C$99o=C$99j.AddVMulSV(C$99l,C$99_,this.normal,C$99Yt.Initialize_s_cA),C$99a=C$99j.SubVMulSV(C$99l,C$99r,this.normal,C$99Yt.Initialize_s_cB);C$99j.MidVV(C$99o,C$99a,this.points[C$99c]),this.separations[C$99c]=C$99j.DotVV(C$99j.SubVV(C$99a,C$99o,C$99j.s_t0),this.normal)}break;case C$99H.b2ManifoldType.e_faceB:C$99B.MulRV(C$99n.q,C$99t.localNormal,this.normal);for(C$99u=C$99R.MulXV(C$99n,C$99t.localPoint,C$99Yt.Initialize_s_planePoint),C$99c=0;C$99c<C$99t.pointCount;++C$99c){C$99l=C$99R.MulXV(C$99e,C$99t.points[C$99c].localPoint,C$99Yt.Initialize_s_clipPoint),C$99_=C$99r-C$99j.DotVV(C$99j.SubVV(C$99l,C$99u,C$99j.s_t0),this.normal),C$99a=C$99j.AddVMulSV(C$99l,C$99_,this.normal,C$99Yt.Initialize_s_cB),C$99o=C$99j.SubVMulSV(C$99l,C$99i,this.normal,C$99Yt.Initialize_s_cA);C$99j.MidVV(C$99o,C$99a,this.points[C$99c]),this.separations[C$99c]=C$99j.DotVV(C$99j.SubVV(C$99o,C$99a,C$99j.s_t0),this.normal)}this.normal.SelfNeg()}},C$99Yt.Initialize_s_pointA=new C$99j,C$99Yt.Initialize_s_pointB=new C$99j,C$99Yt.Initialize_s_cA=new C$99j,C$99Yt.Initialize_s_cB=new C$99j,C$99Yt.Initialize_s_planePoint=new C$99j,C$99Yt.Initialize_s_clipPoint=new C$99j;var C$99Xt=C$99Yt;function C$99Yt(){this.normal=new C$99j,this.points=C$99j.MakeArray(2),this.separations=C$99h(2)}(C$99qt=C$99H.b2PointState||(C$99H.b2PointState={}))[C$99qt.b2_nullState=0]="b2_nullState",C$99qt[C$99qt.b2_addState=1]="b2_addState",C$99qt[C$99qt.b2_persistState=2]="b2_persistState",C$99qt[C$99qt.b2_removeState=3]="b2_removeState";C$99Jt.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99Jt})},C$99Jt.prototype.Copy=function(C$99t){return this.v.Copy(C$99t.v),this.id.Copy(C$99t.id),this};var C$99qt=C$99Jt;function C$99Jt(){this.v=new C$99j,this.id=new C$99Gt}C$99Kt.prototype.Copy=function(C$99t){return this.p1.Copy(C$99t.p1),this.p2.Copy(C$99t.p2),this.maxFraction=C$99t.maxFraction,this};var C$99Zt=C$99Kt;function C$99Kt(){this.p1=new C$99j,this.p2=new C$99j,this.maxFraction=1}C$99$t.prototype.Copy=function(C$99t){return this.normal.Copy(C$99t.normal),this.fraction=C$99t.fraction,this};var C$99Qt=C$99$t;function C$99$t(){this.normal=new C$99j,this.fraction=0}C$99ee.prototype.Copy=function(C$99t){return this.lowerBound.Copy(C$99t.lowerBound),this.upperBound.Copy(C$99t.upperBound),this},C$99ee.prototype.IsValid=function(){var C$99t=this.upperBound.x-this.lowerBound.x,C$99e=this.upperBound.y-this.lowerBound.y;return 0<=C$99t&&0<=C$99e&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},C$99ee.prototype.GetCenter=function(){return C$99j.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)},C$99ee.prototype.GetExtents=function(){return C$99j.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)},C$99ee.prototype.GetPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))},C$99ee.prototype.Combine1=function(C$99t){return this.lowerBound.x=C$99L(this.lowerBound.x,C$99t.lowerBound.x),this.lowerBound.y=C$99L(this.lowerBound.y,C$99t.lowerBound.y),this.upperBound.x=C$99V(this.upperBound.x,C$99t.upperBound.x),this.upperBound.y=C$99V(this.upperBound.y,C$99t.upperBound.y),this},C$99ee.prototype.Combine2=function(C$99t,C$99e){return this.lowerBound.x=C$99L(C$99t.lowerBound.x,C$99e.lowerBound.x),this.lowerBound.y=C$99L(C$99t.lowerBound.y,C$99e.lowerBound.y),this.upperBound.x=C$99V(C$99t.upperBound.x,C$99e.upperBound.x),this.upperBound.y=C$99V(C$99t.upperBound.y,C$99e.upperBound.y),this},C$99ee.Combine=function(C$99t,C$99e,C$99i){return C$99i.Combine2(C$99t,C$99e),C$99i},C$99ee.prototype.Contains=function(C$99t){return this.lowerBound.x<=C$99t.lowerBound.x&&this.lowerBound.y<=C$99t.lowerBound.y&&C$99t.upperBound.x<=this.upperBound.x&&C$99t.upperBound.y<=this.upperBound.y},C$99ee.prototype.RayCast=function(C$99h,C$99t){var C$99e=-C$99P,C$99i=C$99P,C$99n=C$99t.p1.x,C$99r=C$99t.p1.y,C$99u=C$99t.p2.x-C$99t.p1.x,C$99_=C$99t.p2.y-C$99t.p1.y,C$99d=C$99D(C$99u),C$99f=C$99D(C$99_),C$99s=C$99h.normal;if(C$99d<C$99M){if(C$99n<this.lowerBound.x||this.upperBound.x<C$99n)return!1}else{var C$99o=1/C$99u,C$99a=(this.lowerBound.x-C$99n)*C$99o,C$99c=-1;if((C$99l=(this.upperBound.x-C$99n)*C$99o)<C$99a&&(C$99p=C$99a,C$99a=C$99l,C$99l=C$99p,C$99c=1),C$99e<C$99a&&(C$99s.x=C$99c,C$99s.y=0,C$99e=C$99a),(C$99i=C$99L(C$99i,C$99l))<C$99e)return!1}if(C$99f<C$99M){if(C$99r<this.lowerBound.y||this.upperBound.y<C$99r)return!1}else{var C$99l,C$99p,C$99o=1/C$99_,C$99a=(this.lowerBound.y-C$99r)*C$99o,C$99c=-1;if((C$99l=(this.upperBound.y-C$99r)*C$99o)<C$99a&&(C$99p=C$99a,C$99a=C$99l,C$99l=C$99p,C$99c=1),C$99e<C$99a&&(C$99s.x=0,C$99s.y=C$99c,C$99e=C$99a),(C$99i=C$99L(C$99i,C$99l))<C$99e)return!1}return!(C$99e<0||C$99t.maxFraction<C$99e)&&(C$99h.fraction=C$99e,!0)},C$99ee.prototype.TestContain=function(C$99t){return!(C$99t.x<this.lowerBound.x||this.upperBound.x<C$99t.x)&&!(C$99t.y<this.lowerBound.y||this.upperBound.y<C$99t.y)},C$99ee.prototype.TestOverlap=function(C$99t){var C$99e=C$99t.lowerBound.x-this.upperBound.x,C$99i=C$99t.lowerBound.y-this.upperBound.y,C$99n=this.lowerBound.x-C$99t.upperBound.x,C$99t=this.lowerBound.y-C$99t.upperBound.y;return!(0<C$99e||0<C$99i)&&!(0<C$99n||0<C$99t)};var C$99te=C$99ee;function C$99ee(){this.lowerBound=new C$99j,this.upperBound=new C$99j,this.m_cache_center=new C$99j,this.m_cache_extent=new C$99j}function C$99ie(C$99t,C$99e){var C$99i=C$99e.lowerBound.x-C$99t.upperBound.x,C$99n=C$99e.lowerBound.y-C$99t.upperBound.y,C$99r=C$99t.lowerBound.x-C$99e.upperBound.x,C$99t=C$99t.lowerBound.y-C$99e.upperBound.y;return!(0<C$99i||0<C$99n)&&!(0<C$99r||0<C$99t)}function C$99ne(C$99t,C$99e,C$99i,C$99n,C$99r){var C$99s=0,C$99o=C$99e[0],C$99e=C$99e[1],C$99a=C$99j.DotVV(C$99i,C$99o.v)-C$99n,C$99i=C$99j.DotVV(C$99i,C$99e.v)-C$99n;return C$99a<=0&&C$99t[C$99s++].Copy(C$99o),C$99i<=0&&C$99t[C$99s++].Copy(C$99e),C$99a*C$99i<0&&((C$99n=C$99t[C$99s].v).x=C$99o.v.x+(C$99a=C$99a/(C$99a-C$99i))*(C$99e.v.x-C$99o.v.x),C$99n.y=C$99o.v.y+C$99a*(C$99e.v.y-C$99o.v.y),(C$99i=C$99t[C$99s].id).cf.indexA=C$99r,C$99i.cf.indexB=C$99o.id.cf.indexB,C$99i.cf.typeA=C$99H.b2ContactFeatureType.e_vertex,C$99i.cf.typeB=C$99H.b2ContactFeatureType.e_face,++C$99s),C$99s}var C$99re=new C$99ut,C$99se=new C$99lt,C$99oe=new C$99dt;function C$99ae(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){var C$99o=C$99re.Reset(),C$99t=(C$99o.proxyA.SetShape(C$99t,C$99e),C$99o.proxyB.SetShape(C$99i,C$99n),C$99o.transformA.Copy(C$99r),C$99o.transformB.Copy(C$99s),C$99o.useRadii=!0,C$99se.Reset()),C$99e=(C$99t.count=0,C$99oe.Reset());return C$99It(C$99e,C$99t,C$99o),C$99e.distance<10*C$99M}function C$99ce(C$99t){if(null===C$99t)throw new Error;return C$99t}C$99he.prototype.IsLeaf=function(){return null===this.child1};var C$99le=C$99he;function C$99he(C$99t){void 0===C$99t&&(C$99t=0),this.m_id=0,this.aabb=new C$99te,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=C$99t}C$99_e.prototype.Query=function(C$99t,C$99e){if(null!==this.m_root){var C$99i=this.m_stack.Reset();for(C$99i.Push(this.m_root);0<C$99i.GetCount();){var C$99n=C$99i.Pop();if(C$99n.aabb.TestOverlap(C$99t))if(C$99n.IsLeaf()){if(!C$99e(C$99n))return}else C$99i.Push(C$99ce(C$99n.child1)),C$99i.Push(C$99ce(C$99n.child2))}}},C$99_e.prototype.QueryPoint=function(C$99t,C$99e){if(null!==this.m_root){var C$99i=this.m_stack.Reset();for(C$99i.Push(this.m_root);0<C$99i.GetCount();){var C$99n=C$99i.Pop();if(C$99n.aabb.TestContain(C$99t))if(C$99n.IsLeaf()){if(!C$99e(C$99n))return}else C$99i.Push(C$99ce(C$99n.child1)),C$99i.Push(C$99ce(C$99n.child2))}}},C$99_e.prototype.RayCast=function(C$99t,C$99h){if(null!==this.m_root){var C$99e=C$99t.p1,C$99i=C$99t.p2,C$99u=C$99j.SubVV(C$99i,C$99e,C$99_e.s_r),C$99_=(C$99u.Normalize(),C$99j.CrossOneV(C$99u,C$99_e.s_v)),C$99d=C$99j.AbsV(C$99_,C$99_e.s_abs_v),C$99n=C$99t.maxFraction,C$99r=C$99_e.s_segmentAABB,C$99s=C$99e.x+C$99n*(C$99i.x-C$99e.x),C$99o=C$99e.y+C$99n*(C$99i.y-C$99e.y),C$99a=(C$99r.lowerBound.x=C$99L(C$99e.x,C$99s),C$99r.lowerBound.y=C$99L(C$99e.y,C$99o),C$99r.upperBound.x=C$99V(C$99e.x,C$99s),C$99r.upperBound.y=C$99V(C$99e.y,C$99o),this.m_stack.Reset());for(C$99a.Push(this.m_root);0<C$99a.GetCount();){var C$99c=C$99a.Pop();if(C$99ie(C$99c.aabb,C$99r)){var C$99l=C$99c.aabb.GetCenter(),C$99f=C$99c.aabb.GetExtents();if(!(0<C$99D(C$99j.DotVV(C$99_,C$99j.SubVV(C$99e,C$99l,C$99j.s_t0)))-C$99j.DotVV(C$99d,C$99f)))if(C$99c.IsLeaf()){C$99l=C$99_e.s_subInput,C$99f=(C$99l.p1.Copy(C$99t.p1),C$99l.p2.Copy(C$99t.p2),C$99l.maxFraction=C$99n,C$99h(C$99l,C$99c));if(0===C$99f)return;0<C$99f&&(C$99s=C$99e.x+(C$99n=C$99f)*(C$99i.x-C$99e.x),C$99o=C$99e.y+C$99n*(C$99i.y-C$99e.y),C$99r.lowerBound.x=C$99L(C$99e.x,C$99s),C$99r.lowerBound.y=C$99L(C$99e.y,C$99o),C$99r.upperBound.x=C$99V(C$99e.x,C$99s),C$99r.upperBound.y=C$99V(C$99e.y,C$99o))}else C$99a.Push(C$99ce(C$99c.child1)),C$99a.Push(C$99ce(C$99c.child2))}}}},C$99_e.prototype.AllocateNode=function(){var C$99t;return this.m_freeList?(C$99t=this.m_freeList,this.m_freeList=C$99t.parent,C$99t.parent=null,C$99t.child1=null,C$99t.child2=null,C$99t.height=0,delete C$99t.userData,C$99t):new C$99le(C$99_e.s_node_id++)},C$99_e.prototype.FreeNode=function(C$99t){C$99t.parent=this.m_freeList,C$99t.child1=null,C$99t.child2=null,C$99t.height=-1,delete C$99t.userData,this.m_freeList=C$99t},C$99_e.prototype.CreateProxy=function(C$99t,C$99e){var C$99i=this.AllocateNode();return C$99i.aabb.lowerBound.x=C$99t.lowerBound.x-.1,C$99i.aabb.lowerBound.y=C$99t.lowerBound.y-.1,C$99i.aabb.upperBound.x=C$99t.upperBound.x+.1,C$99i.aabb.upperBound.y=C$99t.upperBound.y+.1,C$99i.userData=C$99e,C$99i.height=0,this.InsertLeaf(C$99i),C$99i},C$99_e.prototype.DestroyProxy=function(C$99t){this.RemoveLeaf(C$99t),this.FreeNode(C$99t)},C$99_e.prototype.MoveProxy=function(C$99t,C$99e,C$99i){if(C$99t.aabb.Contains(C$99e))return!1;this.RemoveLeaf(C$99t);var C$99n=.1+2*(0<C$99i.x?C$99i.x:-C$99i.x),C$99i=.1+2*(0<C$99i.y?C$99i.y:-C$99i.y);return C$99t.aabb.lowerBound.x=C$99e.lowerBound.x-C$99n,C$99t.aabb.lowerBound.y=C$99e.lowerBound.y-C$99i,C$99t.aabb.upperBound.x=C$99e.upperBound.x+C$99n,C$99t.aabb.upperBound.y=C$99e.upperBound.y+C$99i,this.InsertLeaf(C$99t),!0},C$99_e.prototype.InsertLeaf=function(C$99t){if(++this.m_insertionCount,null===this.m_root)return this.m_root=C$99t,void(this.m_root.parent=null);for(var C$99e=C$99t.aabb,C$99i=this.m_root;!C$99i.IsLeaf();){var C$99n=C$99ce(C$99i.child1),C$99r=C$99ce(C$99i.child2),C$99h=C$99i.aabb.GetPerimeter(),C$99s=C$99_e.s_combinedAABB,C$99s=(C$99s.Combine2(C$99i.aabb,C$99e),C$99s.GetPerimeter()),C$99u=2*C$99s,C$99s=2*(C$99s-C$99h),C$99h=void 0,C$99o=C$99_e.s_aabb,C$99_=void 0,C$99h=C$99n.IsLeaf()?(C$99o.Combine2(C$99e,C$99n.aabb),C$99o.GetPerimeter()+C$99s):(C$99o.Combine2(C$99e,C$99n.aabb),C$99_=C$99n.aabb.GetPerimeter(),C$99o.GetPerimeter()-C$99_+C$99s),C$99d=void 0,C$99d=C$99r.IsLeaf()?(C$99o.Combine2(C$99e,C$99r.aabb),C$99o.GetPerimeter()+C$99s):(C$99o.Combine2(C$99e,C$99r.aabb),C$99_=C$99r.aabb.GetPerimeter(),C$99o.GetPerimeter()-C$99_+C$99s);if(C$99u<C$99h&&C$99u<C$99d)break;C$99i=C$99h<C$99d?C$99n:C$99r}for(var C$99a=C$99i,C$99f=C$99a.parent,C$99c=this.AllocateNode(),C$99l=(C$99c.parent=C$99f,delete C$99c.userData,C$99c.aabb.Combine2(C$99e,C$99a.aabb),C$99c.height=C$99a.height+1,C$99f?(C$99f.child1===C$99a?C$99f.child1=C$99c:C$99f.child2=C$99c,C$99c.child1=C$99a,C$99c.child2=C$99t,C$99a.parent=C$99c,C$99t.parent=C$99c):(C$99c.child1=C$99a,C$99c.child2=C$99t,C$99a.parent=C$99c,C$99t.parent=C$99c,this.m_root=C$99c),C$99t.parent);null!==C$99l;){C$99n=C$99ce((C$99l=this.Balance(C$99l)).child1),C$99r=C$99ce(C$99l.child2);C$99l.height=1+C$99V(C$99n.height,C$99r.height),C$99l.aabb.Combine2(C$99n.aabb,C$99r.aabb),C$99l=C$99l.parent}},C$99_e.prototype.RemoveLeaf=function(C$99t){if(C$99t!==this.m_root){var C$99e=C$99ce(C$99t.parent),C$99i=C$99e&&C$99e.parent,C$99t=C$99e.child1===C$99t?C$99ce(C$99e.child2):C$99ce(C$99e.child1);if(C$99i){C$99i.child1===C$99e?C$99i.child1=C$99t:C$99i.child2=C$99t,C$99t.parent=C$99i,this.FreeNode(C$99e);for(var C$99n=C$99i;C$99n;){var C$99r=C$99ce((C$99n=this.Balance(C$99n)).child1),C$99s=C$99ce(C$99n.child2);C$99n.aabb.Combine2(C$99r.aabb,C$99s.aabb),C$99n.height=1+C$99V(C$99r.height,C$99s.height),C$99n=C$99n.parent}}else(this.m_root=C$99t).parent=null,this.FreeNode(C$99e)}else this.m_root=null},C$99_e.prototype.Balance=function(C$99t){if(C$99t.IsLeaf()||C$99t.height<2)return C$99t;var C$99e,C$99i,C$99n=C$99ce(C$99t.child1),C$99r=C$99ce(C$99t.child2),C$99s=C$99r.height-C$99n.height;return 1<C$99s?(C$99e=C$99ce(C$99r.child1),C$99i=C$99ce(C$99r.child2),C$99r.child1=C$99t,C$99r.parent=C$99t.parent,null!==(C$99t.parent=C$99r).parent?C$99r.parent.child1===C$99t?C$99r.parent.child1=C$99r:C$99r.parent.child2=C$99r:this.m_root=C$99r,C$99e.height>C$99i.height?(C$99r.child2=C$99e,((C$99t.child2=C$99i).parent=C$99t).aabb.Combine2(C$99n.aabb,C$99i.aabb),C$99r.aabb.Combine2(C$99t.aabb,C$99e.aabb),C$99t.height=1+C$99V(C$99n.height,C$99i.height),C$99r.height=1+C$99V(C$99t.height,C$99e.height)):(C$99r.child2=C$99i,((C$99t.child2=C$99e).parent=C$99t).aabb.Combine2(C$99n.aabb,C$99e.aabb),C$99r.aabb.Combine2(C$99t.aabb,C$99i.aabb),C$99t.height=1+C$99V(C$99n.height,C$99e.height),C$99r.height=1+C$99V(C$99t.height,C$99i.height)),C$99r):C$99s<-1?(C$99e=C$99ce(C$99n.child1),C$99i=C$99ce(C$99n.child2),C$99n.child1=C$99t,C$99n.parent=C$99t.parent,null!==(C$99t.parent=C$99n).parent?C$99n.parent.child1===C$99t?C$99n.parent.child1=C$99n:C$99n.parent.child2=C$99n:this.m_root=C$99n,C$99e.height>C$99i.height?(C$99n.child2=C$99e,((C$99t.child1=C$99i).parent=C$99t).aabb.Combine2(C$99r.aabb,C$99i.aabb),C$99n.aabb.Combine2(C$99t.aabb,C$99e.aabb),C$99t.height=1+C$99V(C$99r.height,C$99i.height),C$99n.height=1+C$99V(C$99t.height,C$99e.height)):(C$99n.child2=C$99i,((C$99t.child1=C$99e).parent=C$99t).aabb.Combine2(C$99r.aabb,C$99e.aabb),C$99n.aabb.Combine2(C$99t.aabb,C$99i.aabb),C$99t.height=1+C$99V(C$99r.height,C$99e.height),C$99n.height=1+C$99V(C$99t.height,C$99i.height)),C$99n):C$99t},C$99_e.prototype.GetHeight=function(){return null===this.m_root?0:this.m_root.height},C$99_e.GetAreaNode=function(C$99t){if(null===C$99t)return 0;if(C$99t.IsLeaf())return 0;var C$99e=C$99t.aabb.GetPerimeter();return(C$99e+=C$99_e.GetAreaNode(C$99t.child1))+C$99_e.GetAreaNode(C$99t.child2)},C$99_e.prototype.GetAreaRatio=function(){if(null===this.m_root)return 0;var C$99t=this.m_root.aabb.GetPerimeter();return C$99_e.GetAreaNode(this.m_root)/C$99t},C$99_e.prototype.ComputeHeightNode=function(C$99t){if(!C$99t||C$99t.IsLeaf())return 0;var C$99e=this.ComputeHeightNode(C$99t.child1),C$99t=this.ComputeHeightNode(C$99t.child2);return 1+C$99V(C$99e,C$99t)},C$99_e.prototype.ComputeHeight=function(){return this.ComputeHeightNode(this.m_root)},C$99_e.prototype.ValidateStructure=function(C$99t){var C$99e;null!==C$99t&&(this.m_root,(C$99t=C$99t).IsLeaf()||(C$99e=C$99ce(C$99t.child1),C$99t=C$99ce(C$99t.child2),this.ValidateStructure(C$99e),this.ValidateStructure(C$99t)))},C$99_e.prototype.ValidateMetrics=function(C$99t){var C$99e;null!==C$99t&&((C$99t=C$99t).IsLeaf()||(C$99e=C$99ce(C$99t.child1),C$99t=C$99ce(C$99t.child2),C$99_e.s_aabb.Combine2(C$99e.aabb,C$99t.aabb),this.ValidateMetrics(C$99e),this.ValidateMetrics(C$99t)))},C$99_e.prototype.Validate=function(){},C$99_e.GetMaxBalanceNode=function(C$99t,C$99e){if(null===C$99t)return C$99e;if(C$99t.height<=1)return C$99e;var C$99i=C$99ce(C$99t.child1),C$99t=C$99ce(C$99t.child2),C$99t=C$99D(C$99t.height-C$99i.height);return C$99V(C$99e,C$99t)},C$99_e.prototype.GetMaxBalance=function(){return C$99_e.GetMaxBalanceNode(this.m_root,0)},C$99_e.prototype.RebuildBottomUp=function(){this.Validate()},C$99_e.ShiftOriginNode=function(C$99t,C$99e){var C$99i,C$99n;null!==C$99t&&(C$99t.height<=1||(C$99i=C$99t.child1,C$99n=C$99t.child2,C$99_e.ShiftOriginNode(C$99i,C$99e),C$99_e.ShiftOriginNode(C$99n,C$99e),C$99t.aabb.lowerBound.SelfSub(C$99e),C$99t.aabb.upperBound.SelfSub(C$99e)))},C$99_e.prototype.ShiftOrigin=function(C$99t){C$99_e.ShiftOriginNode(this.m_root,C$99t)},C$99_e.s_r=new C$99j,C$99_e.s_v=new C$99j,C$99_e.s_abs_v=new C$99j,C$99_e.s_segmentAABB=new C$99te,C$99_e.s_subInput=new C$99Zt,C$99_e.s_combinedAABB=new C$99te,C$99_e.s_aabb=new C$99te,C$99_e.s_node_id=0;var C$99ue=C$99_e;function C$99_e(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0,this.m_stack=new C$99nt(256)}var C$99de=function(C$99t,C$99e){this.proxyA=C$99t,this.proxyB=C$99e},C$99fe=(C$99pe.prototype.CreateProxy=function(C$99t,C$99e){C$99t=this.m_tree.CreateProxy(C$99t,C$99e);return++this.m_proxyCount,this.BufferMove(C$99t),C$99t},C$99pe.prototype.DestroyProxy=function(C$99t){this.UnBufferMove(C$99t),--this.m_proxyCount,this.m_tree.DestroyProxy(C$99t)},C$99pe.prototype.MoveProxy=function(C$99t,C$99e,C$99i){this.m_tree.MoveProxy(C$99t,C$99e,C$99i)&&this.BufferMove(C$99t)},C$99pe.prototype.TouchProxy=function(C$99t){this.BufferMove(C$99t)},C$99pe.prototype.GetProxyCount=function(){return this.m_proxyCount},C$99pe.prototype.UpdatePairs=function(C$99t){for(var C$99r=this,C$99e=(this.m_pairCount=0,this),C$99i=0;C$99i<this.m_moveCount;++C$99i)!function(C$99t){var C$99n=C$99e.m_moveBuffer[C$99t];if(null===C$99n)return;C$99t=C$99n.aabb;C$99e.m_tree.Query(C$99t,function(C$99t){if(C$99t.m_id===C$99n.m_id)return!0;var C$99e,C$99i,C$99t=C$99t.m_id<C$99n.m_id?(C$99e=C$99t,C$99n):(C$99e=C$99n,C$99t);return C$99r.m_pairCount===C$99r.m_pairBuffer.length?C$99r.m_pairBuffer[C$99r.m_pairCount]=new C$99de(C$99e,C$99t):((C$99i=C$99r.m_pairBuffer[C$99r.m_pairCount]).proxyA=C$99e,C$99i.proxyB=C$99t),++C$99r.m_pairCount,!0})}(C$99i);this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(C$99me);for(var C$99n=0;C$99n<this.m_pairCount;){var C$99s=this.m_pairBuffer[C$99n],C$99o=C$99s.proxyA.userData,C$99a=C$99s.proxyB.userData;for(C$99o&&C$99a&&C$99t(C$99o,C$99a),++C$99n;C$99n<this.m_pairCount;){var C$99c=this.m_pairBuffer[C$99n];if(C$99c.proxyA.m_id!==C$99s.proxyA.m_id||C$99c.proxyB.m_id!==C$99s.proxyB.m_id)break;++C$99n}}},C$99pe.prototype.Query=function(C$99t,C$99e){this.m_tree.Query(C$99t,C$99e)},C$99pe.prototype.QueryPoint=function(C$99t,C$99e){this.m_tree.QueryPoint(C$99t,C$99e)},C$99pe.prototype.RayCast=function(C$99t,C$99e){this.m_tree.RayCast(C$99t,C$99e)},C$99pe.prototype.GetTreeHeight=function(){return this.m_tree.GetHeight()},C$99pe.prototype.GetTreeBalance=function(){return this.m_tree.GetMaxBalance()},C$99pe.prototype.GetTreeQuality=function(){return this.m_tree.GetAreaRatio()},C$99pe.prototype.ShiftOrigin=function(C$99t){this.m_tree.ShiftOrigin(C$99t)},C$99pe.prototype.BufferMove=function(C$99t){this.m_moveBuffer[this.m_moveCount]=C$99t,++this.m_moveCount},C$99pe.prototype.UnBufferMove=function(C$99t){C$99t=this.m_moveBuffer.indexOf(C$99t);this.m_moveBuffer[C$99t]=null},C$99pe);function C$99pe(){this.m_tree=new C$99ue,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}function C$99me(C$99t,C$99e){return C$99t.proxyA.m_id===C$99e.proxyA.m_id?C$99t.proxyB.m_id-C$99e.proxyB.m_id:C$99t.proxyA.m_id-C$99e.proxyA.m_id}C$99H.b2_toiTime=0,C$99H.b2_toiMaxTime=0,C$99H.b2_toiCalls=0,C$99H.b2_toiIters=0,C$99H.b2_toiMaxIters=0,C$99H.b2_toiRootIters=0,C$99H.b2_toiMaxRootIters=0;var C$99ye=new C$99R,C$99ge=new C$99R,C$99ve=new C$99j,C$99xe=new C$99j,C$99be=new C$99j,C$99Ae=new C$99j,C$99Ce=new C$99j,C$99Se=function(){this.proxyA=new C$99at,this.proxyB=new C$99at,this.sweepA=new C$99W,this.sweepB=new C$99W,this.tMax=0},C$99Te=((C$99Te=C$99H.b2TOIOutputState||(C$99H.b2TOIOutputState={}))[C$99Te.e_unknown=0]="e_unknown",C$99Te[C$99Te.e_failed=1]="e_failed",C$99Te[C$99Te.e_overlapped=2]="e_overlapped",C$99Te[C$99Te.e_touching=3]="e_touching",C$99Te[C$99Te.e_separated=4]="e_separated",function(){this.state=C$99H.b2TOIOutputState.e_unknown,this.t=0}),C$99we=((C$99we=C$99H.b2SeparationFunctionType||(C$99H.b2SeparationFunctionType={}))[C$99we.e_unknown=-1]="e_unknown",C$99we[C$99we.e_points=0]="e_points",C$99we[C$99we.e_faceA=1]="e_faceA",C$99we[C$99we.e_faceB=2]="e_faceB",C$99Ee.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s){this.m_proxyA=C$99e,this.m_proxyB=C$99n;var C$99o,C$99e=C$99t.count,C$99n=(this.m_sweepA.Copy(C$99i),this.m_sweepB.Copy(C$99r),C$99ye),C$99i=C$99ge;if(this.m_sweepA.GetTransform(C$99n,C$99s),this.m_sweepB.GetTransform(C$99i,C$99s),1===C$99e)return this.m_type=C$99H.b2SeparationFunctionType.e_points,C$99o=this.m_proxyA.GetVertex(C$99t.indexA[0]),C$99u=this.m_proxyB.GetVertex(C$99t.indexB[0]),C$99c=C$99R.MulXV(C$99n,C$99o,C$99ve),C$99l=C$99R.MulXV(C$99i,C$99u,C$99xe),C$99j.SubVV(C$99l,C$99c,this.m_axis),C$99a=this.m_axis.Normalize(),this.m_localPoint.SetZero(),C$99a;if(C$99t.indexA[0]===C$99t.indexA[1])return this.m_type=C$99H.b2SeparationFunctionType.e_faceB,C$99r=this.m_proxyB.GetVertex(C$99t.indexB[0]),C$99s=this.m_proxyB.GetVertex(C$99t.indexB[1]),C$99j.CrossVOne(C$99j.SubVV(C$99s,C$99r,C$99j.s_t0),this.m_axis).SelfNormalize(),C$99h=C$99B.MulRV(C$99i.q,this.m_axis,C$99be),C$99j.MidVV(C$99r,C$99s,this.m_localPoint),C$99l=C$99R.MulXV(C$99i,this.m_localPoint,C$99xe),C$99o=this.m_proxyA.GetVertex(C$99t.indexA[0]),C$99c=C$99R.MulXV(C$99n,C$99o,C$99ve),(C$99a=C$99j.DotVV(C$99j.SubVV(C$99c,C$99l,C$99j.s_t0),C$99h))<0&&(this.m_axis.SelfNeg(),C$99a=-C$99a),C$99a;this.m_type=C$99H.b2SeparationFunctionType.e_faceA;var C$99a,C$99e=this.m_proxyA.GetVertex(C$99t.indexA[0]),C$99r=this.m_proxyA.GetVertex(C$99t.indexA[1]),C$99h=(C$99j.CrossVOne(C$99j.SubVV(C$99r,C$99e,C$99j.s_t0),this.m_axis).SelfNormalize(),C$99B.MulRV(C$99n.q,this.m_axis,C$99be)),C$99c=(C$99j.MidVV(C$99e,C$99r,this.m_localPoint),C$99R.MulXV(C$99n,this.m_localPoint,C$99ve)),C$99u=this.m_proxyB.GetVertex(C$99t.indexB[0]),C$99l=C$99R.MulXV(C$99i,C$99u,C$99xe);return(C$99a=C$99j.DotVV(C$99j.SubVV(C$99l,C$99c,C$99j.s_t0),C$99h))<0&&(this.m_axis.SelfNeg(),C$99a=-C$99a),C$99a},C$99Ee.prototype.FindMinSeparation=function(C$99t,C$99e,C$99i){var C$99n=C$99ye,C$99r=C$99ge;switch(this.m_sweepA.GetTransform(C$99n,C$99i),this.m_sweepB.GetTransform(C$99r,C$99i),this.m_type){case C$99H.b2SeparationFunctionType.e_points:var C$99s=C$99B.MulTRV(C$99n.q,this.m_axis,C$99Ae),C$99h=C$99B.MulTRV(C$99r.q,C$99j.NegV(this.m_axis,C$99j.s_t0),C$99Ce),C$99o=(C$99t[0]=this.m_proxyA.GetSupport(C$99s),C$99e[0]=this.m_proxyB.GetSupport(C$99h),this.m_proxyA.GetVertex(C$99t[0])),C$99u=this.m_proxyB.GetVertex(C$99e[0]),C$99a=C$99R.MulXV(C$99n,C$99o,C$99ve),C$99c=C$99R.MulXV(C$99r,C$99u,C$99xe);return C$99j.DotVV(C$99j.SubVV(C$99c,C$99a,C$99j.s_t0),this.m_axis);case C$99H.b2SeparationFunctionType.e_faceA:var C$99l=C$99B.MulRV(C$99n.q,this.m_axis,C$99be),C$99a=C$99R.MulXV(C$99n,this.m_localPoint,C$99ve),C$99h=C$99B.MulTRV(C$99r.q,C$99j.NegV(C$99l,C$99j.s_t0),C$99Ce),C$99u=(C$99t[0]=-1,C$99e[0]=this.m_proxyB.GetSupport(C$99h),this.m_proxyB.GetVertex(C$99e[0])),C$99c=C$99R.MulXV(C$99r,C$99u,C$99xe);return C$99j.DotVV(C$99j.SubVV(C$99c,C$99a,C$99j.s_t0),C$99l);case C$99H.b2SeparationFunctionType.e_faceB:C$99l=C$99B.MulRV(C$99r.q,this.m_axis,C$99be),C$99c=C$99R.MulXV(C$99r,this.m_localPoint,C$99xe),C$99s=C$99B.MulTRV(C$99n.q,C$99j.NegV(C$99l,C$99j.s_t0),C$99Ae),C$99o=(C$99e[0]=-1,C$99t[0]=this.m_proxyA.GetSupport(C$99s),this.m_proxyA.GetVertex(C$99t[0])),C$99a=C$99R.MulXV(C$99n,C$99o,C$99ve);return C$99j.DotVV(C$99j.SubVV(C$99a,C$99c,C$99j.s_t0),C$99l);default:return C$99t[0]=-1,C$99e[0]=-1,0}},C$99Ee.prototype.Evaluate=function(C$99t,C$99e,C$99i){var C$99n=C$99ye,C$99r=C$99ge;switch(this.m_sweepA.GetTransform(C$99n,C$99i),this.m_sweepB.GetTransform(C$99r,C$99i),this.m_type){case C$99H.b2SeparationFunctionType.e_points:var C$99s=this.m_proxyA.GetVertex(C$99t),C$99o=this.m_proxyB.GetVertex(C$99e),C$99a=C$99R.MulXV(C$99n,C$99s,C$99ve),C$99c=C$99R.MulXV(C$99r,C$99o,C$99xe);return C$99j.DotVV(C$99j.SubVV(C$99c,C$99a,C$99j.s_t0),this.m_axis);case C$99H.b2SeparationFunctionType.e_faceA:var C$99l=C$99B.MulRV(C$99n.q,this.m_axis,C$99be),C$99a=C$99R.MulXV(C$99n,this.m_localPoint,C$99ve),C$99o=this.m_proxyB.GetVertex(C$99e),C$99c=C$99R.MulXV(C$99r,C$99o,C$99xe);return C$99j.DotVV(C$99j.SubVV(C$99c,C$99a,C$99j.s_t0),C$99l);case C$99H.b2SeparationFunctionType.e_faceB:C$99l=C$99B.MulRV(C$99r.q,this.m_axis,C$99be),C$99c=C$99R.MulXV(C$99r,this.m_localPoint,C$99xe),C$99s=this.m_proxyA.GetVertex(C$99t),C$99a=C$99R.MulXV(C$99n,C$99s,C$99ve);return C$99j.DotVV(C$99j.SubVV(C$99a,C$99c,C$99j.s_t0),C$99l);default:return 0}},C$99Ee);function C$99Ee(){this.m_sweepA=new C$99W,this.m_sweepB=new C$99W,this.m_type=C$99H.b2SeparationFunctionType.e_unknown,this.m_localPoint=new C$99j,this.m_axis=new C$99j}var C$99Me=new C$99$,C$99Ie=new C$99lt,C$99Be=new C$99ut,C$99Re=new C$99dt,C$99Pe=new C$99we,C$99De=[0],C$99Le=[0],C$99Ve=new C$99W,C$99Oe=new C$99W;function C$99Fe(C$99t,C$99e){var C$99h=C$99Me.Reset(),C$99u=(++C$99H.b2_toiCalls,C$99t.state=C$99H.b2TOIOutputState.e_unknown,C$99t.t=C$99e.tMax,C$99e.proxyA),C$99_=C$99e.proxyB,C$99d=C$99Ve.Copy(C$99e.sweepA),C$99f=C$99Oe.Copy(C$99e.sweepB),C$99p=(C$99d.Normalize(),C$99f.Normalize(),C$99e.tMax),C$99i=C$99u.m_radius+C$99_.m_radius,C$99n=C$99V(.008,C$99i-.024),C$99r=0,C$99m=0,C$99y=C$99Ie,C$99s=(C$99y.count=0,C$99Be);for(C$99s.proxyA.Copy(C$99e.proxyA),C$99s.proxyB.Copy(C$99e.proxyB),C$99s.useRadii=!1;;){var C$99o=C$99ye,C$99g=C$99ge,C$99o=(C$99d.GetTransform(C$99o,C$99r),C$99f.GetTransform(C$99g,C$99r),C$99s.transformA.Copy(C$99o),C$99s.transformB.Copy(C$99g),C$99Re);if(C$99It(C$99o,C$99y,C$99s),C$99o.distance<=0){C$99t.state=C$99H.b2TOIOutputState.e_overlapped,C$99t.t=0;break}if(C$99o.distance<C$99n+.002){C$99t.state=C$99H.b2TOIOutputState.e_touching,C$99t.t=C$99r;break}for(var C$99a=C$99Pe,C$99c=(C$99a.Initialize(C$99y,C$99u,C$99d,C$99_,C$99f,C$99r),!1),C$99v=C$99p,C$99x=0;;){var C$99b=C$99De,C$99A=C$99Le,C$99C=C$99a.FindMinSeparation(C$99b,C$99A,C$99v);if(C$99n+.002<C$99C){C$99t.state=C$99H.b2TOIOutputState.e_separated,C$99t.t=C$99p,C$99c=!0;break}if(C$99n-.002<C$99C){C$99r=C$99v;break}var C$99l=C$99a.Evaluate(C$99b[0],C$99A[0],C$99r);if(C$99l<C$99n-.002){C$99t.state=C$99H.b2TOIOutputState.e_failed,C$99t.t=C$99r,C$99c=!0;break}if(C$99l<=C$99n+.002){C$99t.state=C$99H.b2TOIOutputState.e_touching,C$99t.t=C$99r,C$99c=!0;break}for(var C$99S=0,C$99T=C$99r,C$99w=C$99v;;){var C$99E=1&C$99S?C$99T+(C$99n-C$99l)*(C$99w-C$99T)/(C$99C-C$99l):.5*(C$99T+C$99w),C$99M=(++C$99S,++C$99H.b2_toiRootIters,C$99a.Evaluate(C$99b[0],C$99A[0],C$99E));if(C$99D(C$99M-C$99n)<.002){C$99v=C$99E;break}if(C$99n<C$99M?(C$99T=C$99E,C$99l=C$99M):(C$99w=C$99E,C$99C=C$99M),50===C$99S)break}if(C$99H.b2_toiMaxRootIters=C$99V(C$99H.b2_toiMaxRootIters,C$99S),8===++C$99x)break}if(++C$99m,++C$99H.b2_toiIters,C$99c)break;if(20===C$99m){C$99t.state=C$99H.b2TOIOutputState.e_failed,C$99t.t=C$99r;break}}C$99H.b2_toiMaxIters=C$99V(C$99H.b2_toiMaxIters,C$99m);C$99i=C$99h.GetMilliseconds();C$99H.b2_toiMaxTime=C$99V(C$99H.b2_toiMaxTime,C$99i),C$99H.b2_toiTime+=C$99i}var C$99Ne=new C$99j,C$99ke=new C$99j;function C$99Ge(C$99t,C$99e,C$99i,C$99n,C$99r){C$99t.pointCount=0;C$99i=C$99R.MulXV(C$99i,C$99e.m_p,C$99Ne),C$99r=C$99R.MulXV(C$99r,C$99n.m_p,C$99ke),C$99i=C$99j.DistanceSquaredVV(C$99i,C$99r),C$99r=C$99e.m_radius+C$99n.m_radius;C$99r*C$99r<C$99i||(C$99t.type=C$99H.b2ManifoldType.e_circles,C$99t.localPoint.Copy(C$99e.m_p),C$99t.localNormal.SetZero(),C$99t.pointCount=1,C$99t.points[0].localPoint.Copy(C$99n.m_p),C$99t.points[0].id.key=0)}var C$99ze=new C$99j,C$99Ue=new C$99j,C$99We=new C$99j;function C$99He(C$99t,C$99e,C$99i,C$99n,C$99r){C$99t.pointCount=0;for(var C$99r=C$99R.MulXV(C$99r,C$99n.m_p,C$99ze),C$99s=C$99R.MulTXV(C$99i,C$99r,C$99Ue),C$99h=0,C$99u=-C$99P,C$99o=C$99e.m_radius+C$99n.m_radius,C$99_=C$99e.m_count,C$99d=C$99e.m_vertices,C$99a=C$99e.m_normals,C$99c=0;C$99c<C$99_;++C$99c){var C$99f=C$99j.DotVV(C$99a[C$99c],C$99j.SubVV(C$99s,C$99d[C$99c],C$99j.s_t0));if(C$99o<C$99f)return;C$99u<C$99f&&(C$99u=C$99f,C$99h=C$99c)}C$99i=C$99h,C$99r=C$99d[C$99i],C$99e=C$99d[(C$99i+1)%C$99_];if(C$99u<C$99M)return C$99t.pointCount=1,C$99t.type=C$99H.b2ManifoldType.e_faceA,C$99t.localNormal.Copy(C$99a[C$99h]),C$99j.MidVV(C$99r,C$99e,C$99t.localPoint),C$99t.points[0].localPoint.Copy(C$99n.m_p),void(C$99t.points[0].id.key=0);var C$99l=C$99j.DotVV(C$99j.SubVV(C$99s,C$99r,C$99j.s_t0),C$99j.SubVV(C$99e,C$99r,C$99j.s_t1)),C$99p=C$99j.DotVV(C$99j.SubVV(C$99s,C$99e,C$99j.s_t0),C$99j.SubVV(C$99r,C$99e,C$99j.s_t1));C$99l<=0?C$99j.DistanceSquaredVV(C$99s,C$99r)>C$99o*C$99o||(C$99t.pointCount=1,C$99t.type=C$99H.b2ManifoldType.e_faceA,C$99j.SubVV(C$99s,C$99r,C$99t.localNormal).SelfNormalize(),C$99t.localPoint.Copy(C$99r),C$99t.points[0].localPoint.Copy(C$99n.m_p),C$99t.points[0].id.key=0):C$99p<=0?C$99j.DistanceSquaredVV(C$99s,C$99e)>C$99o*C$99o||(C$99t.pointCount=1,C$99t.type=C$99H.b2ManifoldType.e_faceA,C$99j.SubVV(C$99s,C$99e,C$99t.localNormal).SelfNormalize(),C$99t.localPoint.Copy(C$99e),C$99t.points[0].localPoint.Copy(C$99n.m_p),C$99t.points[0].id.key=0):(C$99l=C$99j.MidVV(C$99r,C$99e,C$99We),C$99o<C$99j.DotVV(C$99j.SubVV(C$99s,C$99l,C$99j.s_t1),C$99a[C$99i])||(C$99t.pointCount=1,C$99t.type=C$99H.b2ManifoldType.e_faceA,C$99t.localNormal.Copy(C$99a[C$99i]).SelfNormalize(),C$99t.localPoint.Copy(C$99l),C$99t.points[0].localPoint.Copy(C$99n.m_p),C$99t.points[0].id.key=0))}var C$99je=new C$99j,C$99Xe=new C$99j,C$99Ye=new C$99j,C$99qe=new C$99j;function C$99Je(C$99t,C$99e,C$99i,C$99n,C$99r){for(var C$99h=C$99t.m_vertices,C$99t=C$99t.m_normals,C$99u=C$99n.m_count,C$99s=C$99n.m_vertices,C$99n=C$99B.MulRV(C$99e.q,C$99t[C$99i],C$99je),C$99_=C$99B.MulTRV(C$99r.q,C$99n,C$99Xe),C$99o=0,C$99a=C$99P,C$99c=0;C$99c<C$99u;++C$99c){var C$99l=C$99j.DotVV(C$99s[C$99c],C$99_);C$99l<C$99a&&(C$99a=C$99l,C$99o=C$99c)}C$99t=C$99R.MulXV(C$99e,C$99h[C$99i],C$99Ye),C$99e=C$99R.MulXV(C$99r,C$99s[C$99o],C$99qe);return C$99j.DotVV(C$99j.SubVV(C$99e,C$99t,C$99j.s_t0),C$99n)}var C$99Ze=new C$99j,C$99Ke=new C$99j;function C$99Qe(C$99h,C$99t,C$99e,C$99i,C$99n){for(var C$99r=C$99t.m_count,C$99u=C$99t.m_normals,C$99_=C$99j.SubVV(C$99R.MulXV(C$99n,C$99i.m_centroid,C$99j.s_t0),C$99R.MulXV(C$99e,C$99t.m_centroid,C$99j.s_t1),C$99Ze),C$99d=C$99B.MulTRV(C$99e.q,C$99_,C$99Ke),C$99s=0,C$99f=-C$99P,C$99o=0;C$99o<C$99r;++C$99o){var C$99p=C$99j.DotVV(C$99u[C$99o],C$99d);C$99f<C$99p&&(C$99f=C$99p,C$99s=C$99o)}var C$99a=C$99Je(C$99t,C$99e,C$99s,C$99i,C$99n),C$99_=(C$99s+C$99r-1)%C$99r,C$99m=C$99Je(C$99t,C$99e,C$99_,C$99i,C$99n),C$99y=(C$99s+1)%C$99r,C$99g=C$99Je(C$99t,C$99e,C$99y,C$99i,C$99n),C$99c=0,C$99l=0,C$99v=0;if(C$99a<C$99m&&C$99g<C$99m)C$99v=-1,C$99c=C$99_,C$99l=C$99m;else{if(!(C$99a<C$99g))return C$99h[0]=C$99s,C$99a;C$99v=1,C$99c=C$99y,C$99l=C$99g}for(;;){if(!(C$99l<(C$99a=C$99Je(C$99t,C$99e,C$99s=-1===C$99v?(C$99c+C$99r-1)%C$99r:(C$99c+1)%C$99r,C$99i,C$99n))))break;C$99c=C$99s,C$99l=C$99a}return C$99h[0]=C$99c,C$99l}var C$99$e=new C$99j;var C$99ti=C$99qt.MakeArray(2),C$99ei=C$99qt.MakeArray(2),C$99ii=C$99qt.MakeArray(2),C$99ni=[0],C$99ri=[0],C$99si=new C$99j,C$99oi=new C$99j,C$99ai=new C$99j,C$99ci=new C$99j,C$99li=new C$99j,C$99hi=new C$99j,C$99ui=new C$99j,C$99_i=new C$99j;function C$99di(C$99t,C$99e,C$99i,C$99n,C$99r){C$99t.pointCount=0;var C$99h=C$99e.m_radius+C$99n.m_radius,C$99u=C$99ni,C$99_=(C$99u[0]=0,C$99Qe(C$99u,C$99e,C$99i,C$99n,C$99r));if(!(C$99h<C$99_)){var C$99s=C$99ri,C$99o=(C$99s[0]=0,C$99Qe(C$99s,C$99n,C$99r,C$99e,C$99i));if(!(C$99h<C$99o)){for(var C$99d,C$99f,C$99p=0,C$99m=0,C$99m=.98*C$99_+.001<C$99o?(C$99d=C$99n,C$99a=C$99e,C$99w=C$99r,C$99f=C$99i,C$99p=C$99s[0],C$99t.type=C$99H.b2ManifoldType.e_faceB,1):(C$99d=C$99e,C$99a=C$99n,C$99w=C$99i,C$99f=C$99r,C$99p=C$99u[0],C$99t.type=C$99H.b2ManifoldType.e_faceA,0),C$99_=C$99ti,C$99o=C$99_,C$99s=C$99w,C$99e=C$99p,C$99n=C$99a,C$99i=C$99f,C$99r=(C$99r=C$99d).m_normals,C$99y=C$99n.m_count,C$99u=C$99n.m_vertices,C$99g=C$99n.m_normals,C$99v=C$99B.MulTRV(C$99i.q,C$99B.MulRV(C$99s.q,C$99r[C$99e],C$99j.s_t0),C$99$e),C$99x=0,C$99b=C$99P,C$99A=0;C$99A<C$99y;++C$99A){var C$99C=C$99j.DotVV(C$99v,C$99g[C$99A]);C$99C<C$99b&&(C$99b=C$99C,C$99x=C$99A)}C$99s=((C$99n=C$99x)+1)%C$99y,C$99r=C$99o[0],C$99R.MulXV(C$99i,C$99u[C$99n],C$99r.v),(C$99r=C$99r.id.cf).indexA=C$99e,C$99r.indexB=C$99n,C$99r.typeA=C$99H.b2ContactFeatureType.e_face,C$99r.typeB=C$99H.b2ContactFeatureType.e_vertex,C$99n=C$99o[1],C$99R.MulXV(C$99i,C$99u[C$99s],C$99n.v),(C$99r=C$99n.id.cf).indexA=C$99e,C$99r.indexB=C$99s,C$99r.typeA=C$99H.b2ContactFeatureType.e_face,C$99r.typeB=C$99H.b2ContactFeatureType.e_vertex;var C$99a=C$99d.m_count,C$99o=C$99d.m_vertices,C$99i=C$99p,C$99u=(C$99p+1)%C$99a,C$99n=C$99o[C$99i],C$99e=C$99o[C$99u],C$99s=C$99j.SubVV(C$99e,C$99n,C$99si),C$99r=(C$99s.Normalize(),C$99j.CrossVOne(C$99s,C$99oi)),C$99p=C$99j.MidVV(C$99n,C$99e,C$99ai),C$99a=C$99B.MulRV(C$99w.q,C$99s,C$99li),C$99S=C$99j.CrossVOne(C$99a,C$99ci),C$99o=C$99R.MulXV(C$99w,C$99n,C$99ui),C$99s=C$99R.MulXV(C$99w,C$99e,C$99_i),C$99T=C$99j.DotVV(C$99S,C$99o),C$99n=-C$99j.DotVV(C$99a,C$99o)+C$99h,C$99w=C$99j.DotVV(C$99a,C$99s)+C$99h,C$99e=C$99ei,C$99E=C$99ii,C$99o=C$99ne(C$99e,C$99_,C$99j.NegV(C$99a,C$99hi),C$99n,C$99i);if(!(C$99o<2||C$99ne(C$99E,C$99e,C$99a,C$99w,C$99u)<2)){C$99t.localNormal.Copy(C$99r),C$99t.localPoint.Copy(C$99p);for(var C$99M=0,C$99I=0;C$99I<2;++C$99I){var C$99c,C$99l=C$99E[C$99I];C$99j.DotVV(C$99S,C$99l.v)-C$99T<=C$99h&&(C$99c=C$99t.points[C$99M],C$99R.MulTXV(C$99f,C$99l.v,C$99c.localPoint),C$99c.id.Copy(C$99l.id),C$99m&&(C$99l=C$99c.id.cf,C$99c.id.cf.indexA=C$99l.indexB,C$99c.id.cf.indexB=C$99l.indexA,C$99c.id.cf.typeA=C$99l.typeB,C$99c.id.cf.typeB=C$99l.typeA),++C$99M)}C$99t.pointCount=C$99M}}}}var C$99fi=new C$99j,C$99pi=new C$99j,C$99mi=new C$99j,C$99yi=new C$99j,C$99gi=new C$99j,C$99vi=new C$99j,C$99xi=new C$99j,C$99bi=new C$99Gt;function C$99Ai(C$99t,C$99e,C$99i,C$99h,C$99n){C$99t.pointCount=0;var C$99i=C$99R.MulTXV(C$99i,C$99R.MulXV(C$99n,C$99h.m_p,C$99j.s_t0),C$99fi),C$99n=C$99e.m_vertex1,C$99r=C$99e.m_vertex2,C$99s=C$99j.SubVV(C$99r,C$99n,C$99pi),C$99u=C$99j.DotVV(C$99s,C$99j.SubVV(C$99r,C$99i,C$99j.s_t0)),C$99_=C$99j.DotVV(C$99s,C$99j.SubVV(C$99i,C$99n,C$99j.s_t0)),C$99d=C$99e.m_radius+C$99h.m_radius,C$99o=C$99bi;if(C$99o.cf.indexB=0,C$99o.cf.typeB=C$99H.b2ContactFeatureType.e_vertex,C$99_<=0){var C$99a=C$99n,C$99c=C$99j.SubVV(C$99i,C$99a,C$99mi);if(C$99d*C$99d<C$99j.DotVV(C$99c,C$99c))return;if(C$99e.m_hasVertex0){var C$99c=C$99e.m_vertex0,C$99l=C$99n,C$99c=C$99j.SubVV(C$99l,C$99c,C$99yi);if(0<C$99j.DotVV(C$99c,C$99j.SubVV(C$99l,C$99i,C$99j.s_t0)))return}return C$99o.cf.indexA=0,C$99o.cf.typeA=C$99H.b2ContactFeatureType.e_vertex,C$99t.pointCount=1,C$99t.type=C$99H.b2ManifoldType.e_circles,C$99t.localNormal.SetZero(),C$99t.localPoint.Copy(C$99a),C$99t.points[0].id.Copy(C$99o),void C$99t.points[0].localPoint.Copy(C$99h.m_p)}if(C$99u<=0){C$99c=C$99r,C$99l=C$99j.SubVV(C$99i,C$99c,C$99mi);if(C$99d*C$99d<C$99j.DotVV(C$99l,C$99l))return;if(C$99e.m_hasVertex3){C$99a=C$99e.m_vertex3,C$99l=C$99r,C$99e=C$99j.SubVV(C$99a,C$99l,C$99gi);if(0<C$99j.DotVV(C$99e,C$99j.SubVV(C$99i,C$99l,C$99j.s_t0)))return}return C$99o.cf.indexA=1,C$99o.cf.typeA=C$99H.b2ContactFeatureType.e_vertex,C$99t.pointCount=1,C$99t.type=C$99H.b2ManifoldType.e_circles,C$99t.localNormal.SetZero(),C$99t.localPoint.Copy(C$99c),C$99t.points[0].id.Copy(C$99o),void C$99t.points[0].localPoint.Copy(C$99h.m_p)}C$99a=C$99j.DotVV(C$99s,C$99s),C$99e=C$99vi,C$99e.x=1/C$99a*(C$99u*C$99n.x+C$99_*C$99r.x),C$99e.y=1/C$99a*(C$99u*C$99n.y+C$99_*C$99r.y),C$99l=C$99j.SubVV(C$99i,C$99e,C$99mi);C$99d*C$99d<C$99j.DotVV(C$99l,C$99l)||(C$99c=C$99xi.Set(-C$99s.y,C$99s.x),C$99j.DotVV(C$99c,C$99j.SubVV(C$99i,C$99n,C$99j.s_t0))<0&&C$99c.Set(-C$99c.x,-C$99c.y),C$99c.Normalize(),C$99o.cf.indexA=0,C$99o.cf.typeA=C$99H.b2ContactFeatureType.e_face,C$99t.pointCount=1,C$99t.type=C$99H.b2ManifoldType.e_faceA,C$99t.localNormal.Copy(C$99c),C$99t.localPoint.Copy(C$99n),C$99t.points[0].id.Copy(C$99o),C$99t.points[0].localPoint.Copy(C$99h.m_p))}var C$99Ci=function(){this.type=0,this.index=0,this.separation=0},C$99Si=function(){this.vertices=C$99j.MakeArray(8),this.normals=C$99j.MakeArray(8),this.count=0},C$99Ti=function(){this.i1=0,this.i2=0,this.v1=new C$99j,this.v2=new C$99j,this.normal=new C$99j,this.sideNormal1=new C$99j,this.sideOffset1=0,this.sideNormal2=new C$99j,this.sideOffset2=0};function C$99wi(){this.m_polygonB=new C$99Si,this.m_xf=new C$99R,this.m_centroidB=new C$99j,this.m_v0=new C$99j,this.m_v1=new C$99j,this.m_v2=new C$99j,this.m_v3=new C$99j,this.m_normal0=new C$99j,this.m_normal1=new C$99j,this.m_normal2=new C$99j,this.m_normal=new C$99j,this.m_type1=0,this.m_type2=0,this.m_lowerLimit=new C$99j,this.m_upperLimit=new C$99j,this.m_radius=0,this.m_front=!1}C$99wi.prototype.Collide=function(C$99t,C$99h,C$99e,C$99u,C$99_){C$99R.MulTXX(C$99e,C$99_,this.m_xf),C$99R.MulXV(this.m_xf,C$99u.m_centroid,this.m_centroidB),this.m_v0.Copy(C$99h.m_vertex0),this.m_v1.Copy(C$99h.m_vertex1),this.m_v2.Copy(C$99h.m_vertex2),this.m_v3.Copy(C$99h.m_vertex3);var C$99e=C$99h.m_hasVertex0,C$99_=C$99h.m_hasVertex3,C$99i=C$99j.SubVV(this.m_v2,this.m_v1,C$99wi.s_edge1),C$99n=(C$99i.Normalize(),this.m_normal1.Set(C$99i.y,-C$99i.x),C$99j.DotVV(this.m_normal1,C$99j.SubVV(this.m_centroidB,this.m_v1,C$99j.s_t0))),C$99r=0,C$99d=0,C$99f=!1,C$99p=!1;C$99e&&((C$99o=C$99j.SubVV(this.m_v1,this.m_v0,C$99wi.s_edge0)).Normalize(),this.m_normal0.Set(C$99o.y,-C$99o.x),C$99f=0<=C$99j.CrossVV(C$99o,C$99i),C$99r=C$99j.DotVV(this.m_normal0,C$99j.SubVV(this.m_centroidB,this.m_v0,C$99j.s_t0))),C$99_&&((C$99o=C$99j.SubVV(this.m_v3,this.m_v2,C$99wi.s_edge2)).Normalize(),this.m_normal2.Set(C$99o.y,-C$99o.x),C$99p=0<C$99j.CrossVV(C$99i,C$99o),C$99d=C$99j.DotVV(this.m_normal2,C$99j.SubVV(this.m_centroidB,this.m_v2,C$99j.s_t0))),C$99e&&C$99_?C$99f&&C$99p?(this.m_front=0<=C$99r||0<=C$99n||0<=C$99d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):C$99f?(this.m_front=0<=C$99r||0<=C$99n&&0<=C$99d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):C$99p?(this.m_front=0<=C$99d||0<=C$99r&&0<=C$99n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=0<=C$99r&&0<=C$99n&&0<=C$99d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):C$99e?C$99f?(this.m_front=0<=C$99r||0<=C$99n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1)),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_front=0<=C$99r&&0<=C$99n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):C$99_?C$99p?(this.m_front=0<=C$99n||0<=C$99d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=0<=C$99n&&0<=C$99d,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),this.m_upperLimit.Copy(this.m_normal1)):(this.m_front=0<=C$99n,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=C$99u.m_count;for(var C$99s=0;C$99s<C$99u.m_count;++C$99s)C$99R.MulXV(this.m_xf,C$99u.m_vertices[C$99s],this.m_polygonB.vertices[C$99s]),C$99B.MulRV(this.m_xf.q,C$99u.m_normals[C$99s],this.m_polygonB.normals[C$99s]);this.m_radius=C$99u.m_radius+C$99h.m_radius,C$99t.pointCount=0;C$99i=this.ComputeEdgeSeparation(C$99wi.s_edgeAxis);if(0!==C$99i.type&&!(C$99i.separation>this.m_radius)){var C$99o=this.ComputePolygonSeparation(C$99wi.s_polygonAxis);if(!(0!==C$99o.type&&C$99o.separation>this.m_radius)){var C$99m=0!==C$99o.type&&C$99o.separation>.98*C$99i.separation+.001?C$99o:C$99i,C$99e=C$99wi.s_ie,C$99a=C$99wi.s_rf;if(1===C$99m.type){C$99t.type=C$99H.b2ManifoldType.e_faceA;for(var C$99y=0,C$99g=C$99j.DotVV(this.m_normal,this.m_polygonB.normals[0]),C$99s=1;C$99s<this.m_polygonB.count;++C$99s){var C$99v=C$99j.DotVV(this.m_normal,this.m_polygonB.normals[C$99s]);C$99v<C$99g&&(C$99g=C$99v,C$99y=C$99s)}var C$99c,C$99l,C$99f=C$99y,C$99r=(C$99f+1)%this.m_polygonB.count;(C$99c=C$99e[0]).v.Copy(this.m_polygonB.vertices[C$99f]),C$99c.id.cf.indexA=0,C$99c.id.cf.indexB=C$99f,C$99c.id.cf.typeA=C$99H.b2ContactFeatureType.e_face,C$99c.id.cf.typeB=C$99H.b2ContactFeatureType.e_vertex,(C$99l=C$99e[1]).v.Copy(this.m_polygonB.vertices[C$99r]),C$99l.id.cf.indexA=0,C$99l.id.cf.indexB=C$99r,C$99l.id.cf.typeA=C$99H.b2ContactFeatureType.e_face,C$99l.id.cf.typeB=C$99H.b2ContactFeatureType.e_vertex,this.m_front?(C$99a.i1=0,C$99a.i2=1,C$99a.v1.Copy(this.m_v1),C$99a.v2.Copy(this.m_v2),C$99a.normal.Copy(this.m_normal1)):(C$99a.i1=1,C$99a.i2=0,C$99a.v1.Copy(this.m_v2),C$99a.v2.Copy(this.m_v1),C$99a.normal.Copy(this.m_normal1).SelfNeg())}else C$99t.type=C$99H.b2ManifoldType.e_faceB,(C$99c=C$99e[0]).v.Copy(this.m_v1),C$99c.id.cf.indexA=0,C$99c.id.cf.indexB=C$99m.index,C$99c.id.cf.typeA=C$99H.b2ContactFeatureType.e_vertex,C$99c.id.cf.typeB=C$99H.b2ContactFeatureType.e_face,(C$99l=C$99e[1]).v.Copy(this.m_v2),C$99l.id.cf.indexA=0,C$99l.id.cf.indexB=C$99m.index,C$99l.id.cf.typeA=C$99H.b2ContactFeatureType.e_vertex,C$99l.id.cf.typeB=C$99H.b2ContactFeatureType.e_face,C$99a.i1=C$99m.index,C$99a.i2=(C$99a.i1+1)%this.m_polygonB.count,C$99a.v1.Copy(this.m_polygonB.vertices[C$99a.i1]),C$99a.v2.Copy(this.m_polygonB.vertices[C$99a.i2]),C$99a.normal.Copy(this.m_polygonB.normals[C$99a.i1]);C$99a.sideNormal1.Set(C$99a.normal.y,-C$99a.normal.x),C$99a.sideNormal2.Copy(C$99a.sideNormal1).SelfNeg(),C$99a.sideOffset1=C$99j.DotVV(C$99a.sideNormal1,C$99a.v1),C$99a.sideOffset2=C$99j.DotVV(C$99a.sideNormal2,C$99a.v2);var C$99_=C$99wi.s_clipPoints1,C$99x=C$99wi.s_clipPoints2,C$99p=C$99ne(C$99_,C$99e,C$99a.sideNormal1,C$99a.sideOffset1,C$99a.i1);if(!(C$99p<2||C$99ne(C$99x,C$99_,C$99a.sideNormal2,C$99a.sideOffset2,C$99a.i2)<2)){1===C$99m.type?(C$99t.localNormal.Copy(C$99a.normal),C$99t.localPoint.Copy(C$99a.v1)):(C$99t.localNormal.Copy(C$99u.m_normals[C$99a.i1]),C$99t.localPoint.Copy(C$99u.m_vertices[C$99a.i1]));for(var C$99b=0,C$99s=0;C$99s<2;++C$99s){var C$99A;C$99j.DotVV(C$99a.normal,C$99j.SubVV(C$99x[C$99s].v,C$99a.v1,C$99j.s_t0))<=this.m_radius&&(C$99A=C$99t.points[C$99b],1===C$99m.type?(C$99R.MulTXV(this.m_xf,C$99x[C$99s].v,C$99A.localPoint),C$99A.id=C$99x[C$99s].id):(C$99A.localPoint.Copy(C$99x[C$99s].v),C$99A.id.cf.typeA=C$99x[C$99s].id.cf.typeB,C$99A.id.cf.typeB=C$99x[C$99s].id.cf.typeA,C$99A.id.cf.indexA=C$99x[C$99s].id.cf.indexB,C$99A.id.cf.indexB=C$99x[C$99s].id.cf.indexA),++C$99b)}C$99t.pointCount=C$99b}}}},C$99wi.prototype.ComputeEdgeSeparation=function(C$99t){var C$99e=C$99t;C$99e.type=1,C$99e.index=this.m_front?0:1,C$99e.separation=C$99P;for(var C$99i=0;C$99i<this.m_polygonB.count;++C$99i){var C$99n=C$99j.DotVV(this.m_normal,C$99j.SubVV(this.m_polygonB.vertices[C$99i],this.m_v1,C$99j.s_t0));C$99n<C$99e.separation&&(C$99e.separation=C$99n)}return C$99e},C$99wi.prototype.ComputePolygonSeparation=function(C$99t){for(var C$99e=C$99t,C$99i=(C$99e.type=0,C$99e.index=-1,C$99e.separation=-C$99P,C$99wi.s_perp.Set(-this.m_normal.y,this.m_normal.x)),C$99n=0;C$99n<this.m_polygonB.count;++C$99n){var C$99r=C$99j.NegV(this.m_polygonB.normals[C$99n],C$99wi.s_n),C$99s=C$99j.DotVV(C$99r,C$99j.SubVV(this.m_polygonB.vertices[C$99n],this.m_v1,C$99j.s_t0)),C$99o=C$99j.DotVV(C$99r,C$99j.SubVV(this.m_polygonB.vertices[C$99n],this.m_v2,C$99j.s_t0)),C$99s=C$99L(C$99s,C$99o);if(C$99s>this.m_radius)return C$99e.type=2,C$99e.index=C$99n,C$99e.separation=C$99s,C$99e;if(0<=C$99j.DotVV(C$99r,C$99i)){if(C$99j.DotVV(C$99j.SubVV(C$99r,this.m_upperLimit,C$99j.s_t0),this.m_normal)<-C$99I)continue}else if(C$99j.DotVV(C$99j.SubVV(C$99r,this.m_lowerLimit,C$99j.s_t0),this.m_normal)<-C$99I)continue;C$99s>C$99e.separation&&(C$99e.type=2,C$99e.index=C$99n,C$99e.separation=C$99s)}return C$99e},C$99wi.s_edge1=new C$99j,C$99wi.s_edge0=new C$99j,C$99wi.s_edge2=new C$99j,C$99wi.s_ie=C$99qt.MakeArray(2),C$99wi.s_rf=new C$99Ti,C$99wi.s_clipPoints1=C$99qt.MakeArray(2),C$99wi.s_clipPoints2=C$99qt.MakeArray(2),C$99wi.s_edgeAxis=new C$99Ci,C$99wi.s_polygonAxis=new C$99Ci,C$99wi.s_n=new C$99j,C$99wi.s_perp=new C$99j;var C$99Ei=new C$99wi;function C$99Mi(C$99t,C$99e,C$99i,C$99n,C$99r){C$99Ei.Collide(C$99t,C$99e,C$99i,C$99n,C$99r)}var C$99Ii=function(){this.mass=0,this.center=new C$99j(0,0),this.I=0},C$99Bi=((C$99Ti=C$99H.b2ShapeType||(C$99H.b2ShapeType={}))[C$99Ti.e_unknown=-1]="e_unknown",C$99Ti[C$99Ti.e_circleShape=0]="e_circleShape",C$99Ti[C$99Ti.e_edgeShape=1]="e_edgeShape",C$99Ti[C$99Ti.e_polygonShape=2]="e_polygonShape",C$99Ti[C$99Ti.e_chainShape=3]="e_chainShape",C$99Ti[C$99Ti.e_shapeTypeCount=4]="e_shapeTypeCount",C$99Ri.prototype.Copy=function(C$99t){return this.m_radius=C$99t.m_radius,this},C$99Ri.prototype.GetType=function(){return this.m_type},C$99Ri);function C$99Ri(C$99t,C$99e){this.m_type=C$99H.b2ShapeType.e_unknown,this.m_radius=0,this.m_type=C$99t,this.m_radius=C$99e}var C$99Pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$99t,C$99e){C$99t.__proto__=C$99e}||function(C$99t,C$99e){for(var C$99i in C$99e)C$99e.hasOwnProperty(C$99i)&&(C$99t[C$99i]=C$99e[C$99i])};function C$99Di(C$99t,C$99e){function C$99i(){this.constructor=C$99t}C$99Pi(C$99t,C$99e),C$99t.prototype=null===C$99e?Object.create(C$99e):(C$99i.prototype=C$99e.prototype,new C$99i)}C$99Di(C$99Vi,C$99Li=C$99Bi),C$99Vi.prototype.Set=function(C$99t,C$99e){return void 0===C$99e&&(C$99e=this.m_radius),this.m_p.Copy(C$99t),this.m_radius=C$99e,this},C$99Vi.prototype.Clone=function(){return(new C$99Vi).Copy(this)},C$99Vi.prototype.Copy=function(C$99t){return C$99Li.prototype.Copy.call(this,C$99t),this.m_p.Copy(C$99t.m_p),this},C$99Vi.prototype.GetChildCount=function(){return 1},C$99Vi.prototype.TestPoint=function(C$99t,C$99e){C$99t=C$99R.MulXV(C$99t,this.m_p,C$99Vi.TestPoint_s_center),C$99e=C$99j.SubVV(C$99e,C$99t,C$99Vi.TestPoint_s_d);return C$99j.DotVV(C$99e,C$99e)<=C$99_(this.m_radius)},C$99Vi.prototype.ComputeDistance=function(C$99t,C$99e,C$99i,C$99n){C$99t=C$99R.MulXV(C$99t,this.m_p,C$99Vi.ComputeDistance_s_center);return C$99j.SubVV(C$99e,C$99t,C$99i),C$99i.Normalize()-this.m_radius},C$99Vi.prototype.RayCast=function(C$99t,C$99e,C$99i,C$99n){var C$99i=C$99R.MulXV(C$99i,this.m_p,C$99Vi.RayCast_s_position),C$99i=C$99j.SubVV(C$99e.p1,C$99i,C$99Vi.RayCast_s_s),C$99r=C$99j.DotVV(C$99i,C$99i)-C$99_(this.m_radius),C$99s=C$99j.SubVV(C$99e.p2,C$99e.p1,C$99Vi.RayCast_s_r),C$99o=C$99j.DotVV(C$99i,C$99s),C$99a=C$99j.DotVV(C$99s,C$99s),C$99r=C$99o*C$99o-C$99a*C$99r;if(C$99r<0||C$99a<C$99M)return!1;C$99o=-(C$99o+C$99Y(C$99r));return 0<=C$99o&&C$99o<=C$99e.maxFraction*C$99a&&(C$99t.fraction=C$99o/=C$99a,C$99j.AddVMulSV(C$99i,C$99o,C$99s,C$99t.normal).SelfNormalize(),!0)},C$99Vi.prototype.ComputeAABB=function(C$99t,C$99e,C$99i){C$99e=C$99R.MulXV(C$99e,this.m_p,C$99Vi.ComputeAABB_s_p);C$99t.lowerBound.Set(C$99e.x-this.m_radius,C$99e.y-this.m_radius),C$99t.upperBound.Set(C$99e.x+this.m_radius,C$99e.y+this.m_radius)},C$99Vi.prototype.ComputeMass=function(C$99t,C$99e){var C$99i=C$99_(this.m_radius);C$99t.mass=C$99e*C$99m*C$99i,C$99t.center.Copy(this.m_p),C$99t.I=C$99t.mass*(.5*C$99i+C$99j.DotVV(this.m_p,this.m_p))},C$99Vi.prototype.SetupDistanceProxy=function(C$99t,C$99e){C$99t.m_vertices=C$99t.m_buffer,C$99t.m_vertices[0].Copy(this.m_p),C$99t.m_count=1,C$99t.m_radius=this.m_radius},C$99Vi.prototype.ComputeSubmergedArea=function(C$99t,C$99e,C$99i,C$99n){C$99i=C$99R.MulXV(C$99i,this.m_p,new C$99j),C$99e=-(C$99j.DotVV(C$99t,C$99i)-C$99e);if(C$99e<-this.m_radius+C$99M)return 0;if(C$99e>this.m_radius)return C$99n.Copy(C$99i),C$99m*this.m_radius*this.m_radius;var C$99r=this.m_radius*this.m_radius,C$99s=C$99e*C$99e,C$99e=C$99r*(C$99y(C$99e/this.m_radius)+C$99m/2)+C$99e*C$99Y(C$99r-C$99s),C$99r=-2/3*C$99a(C$99r-C$99s,1.5)/C$99e;return C$99n.x=C$99i.x+C$99t.x*C$99r,C$99n.y=C$99i.y+C$99t.y*C$99r,C$99e},C$99Vi.prototype.Dump=function(C$99t){C$99t("    const shape: b2CircleShape = new b2CircleShape();\n"),C$99t("    shape.m_radius = %.15f;\n",this.m_radius),C$99t("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)},C$99Vi.TestPoint_s_center=new C$99j,C$99Vi.TestPoint_s_d=new C$99j,C$99Vi.ComputeDistance_s_center=new C$99j,C$99Vi.RayCast_s_position=new C$99j,C$99Vi.RayCast_s_s=new C$99j,C$99Vi.RayCast_s_r=new C$99j,C$99Vi.ComputeAABB_s_p=new C$99j;var C$99Li,C$99Ci=C$99Vi;function C$99Vi(C$99t){C$99t=C$99Li.call(this,C$99H.b2ShapeType.e_circleShape,C$99t=void 0===C$99t?0:C$99t)||this;return C$99t.m_p=new C$99j,C$99t}C$99Di(C$99S,C$99Oi=C$99Bi),C$99S.prototype.Clone=function(){return(new C$99S).Copy(this)},C$99S.prototype.Copy=function(C$99t){C$99Oi.prototype.Copy.call(this,C$99t),this.m_centroid.Copy(C$99t.m_centroid),this.m_count=C$99t.m_count,this.m_vertices=C$99j.MakeArray(this.m_count),this.m_normals=C$99j.MakeArray(this.m_count);for(var C$99e=0;C$99e<this.m_count;++C$99e)this.m_vertices[C$99e].Copy(C$99t.m_vertices[C$99e]),this.m_normals[C$99e].Copy(C$99t.m_normals[C$99e]);return this},C$99S.prototype.GetChildCount=function(){return 1},C$99S.prototype.Set=function(C$99h,C$99t,C$99u){if(void 0===C$99u&&(C$99u=0),(C$99t=void 0===C$99t?C$99h.length:C$99t)<3)return this.SetAsBox(1,1);for(var C$99e=C$99L(C$99t,8),C$99i=C$99S.Set_s_ps,C$99_=0,C$99n=0;C$99n<C$99e;++C$99n){for(var C$99r=C$99h[C$99u+C$99n],C$99d=!0,C$99s=0;C$99s<C$99_;++C$99s)if(C$99j.DistanceSquaredVV(C$99r,C$99i[C$99s])<16e-6){C$99d=!1;break}C$99d&&C$99i[C$99_++].Copy(C$99r)}if((C$99e=C$99_)<3)return this.SetAsBox(1,1);for(var C$99o=0,C$99f=C$99i[0].x,C$99n=1;C$99n<C$99e;++C$99n){var C$99p=C$99i[C$99n].x;(C$99f<C$99p||C$99p===C$99f&&C$99i[C$99n].y<C$99i[C$99o].y)&&(C$99o=C$99n,C$99f=C$99p)}for(var C$99a=C$99S.Set_s_hull,C$99c=0,C$99m=C$99o;;){C$99a[C$99c]=C$99m;for(var C$99y,C$99g,C$99l=0,C$99s=1;C$99s<C$99e;++C$99s)C$99l!==C$99m?(C$99y=C$99j.SubVV(C$99i[C$99l],C$99i[C$99a[C$99c]],C$99S.Set_s_r),C$99r=C$99j.SubVV(C$99i[C$99s],C$99i[C$99a[C$99c]],C$99S.Set_s_v),(C$99g=C$99j.CrossVV(C$99y,C$99r))<0&&(C$99l=C$99s),0===C$99g&&C$99r.LengthSquared()>C$99y.LengthSquared()&&(C$99l=C$99s)):C$99l=C$99s;if(++C$99c,(C$99m=C$99l)===C$99o)break}this.m_count=C$99c,this.m_vertices=C$99j.MakeArray(this.m_count),this.m_normals=C$99j.MakeArray(this.m_count);for(C$99n=0;C$99n<C$99c;++C$99n)this.m_vertices[C$99n].Copy(C$99i[C$99a[C$99n]]);for(C$99n=0;C$99n<C$99c;++C$99n){var C$99v=this.m_vertices[C$99n],C$99x=this.m_vertices[(C$99n+1)%C$99c],C$99x=C$99j.SubVV(C$99x,C$99v,C$99j.s_t0);C$99j.CrossVOne(C$99x,this.m_normals[C$99n]).SelfNormalize()}return C$99S.ComputeCentroid(this.m_vertices,C$99c,this.m_centroid),this},C$99S.prototype.SetAsArray=function(C$99t,C$99e){return void 0===C$99e&&(C$99e=C$99t.length),this.Set(C$99t,C$99e)},C$99S.prototype.SetAsBox=function(C$99t,C$99e,C$99i,C$99n){if(void 0===C$99n&&(C$99n=0),this.m_count=4,this.m_vertices=C$99j.MakeArray(this.m_count),this.m_normals=C$99j.MakeArray(this.m_count),this.m_vertices[0].Set(-C$99t,-C$99e),this.m_vertices[1].Set(C$99t,-C$99e),this.m_vertices[2].Set(C$99t,C$99e),this.m_vertices[3].Set(-C$99t,C$99e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),C$99i){this.m_centroid.Copy(C$99i);var C$99r=new C$99R;C$99r.SetPosition(C$99i),C$99r.SetRotationAngle(C$99n);for(var C$99s=0;C$99s<this.m_count;++C$99s)C$99R.MulXV(C$99r,this.m_vertices[C$99s],this.m_vertices[C$99s]),C$99B.MulRV(C$99r.q,this.m_normals[C$99s],this.m_normals[C$99s])}return this},C$99S.prototype.TestPoint=function(C$99t,C$99e){for(var C$99i=C$99R.MulTXV(C$99t,C$99e,C$99S.TestPoint_s_pLocal),C$99n=0;C$99n<this.m_count;++C$99n)if(0<C$99j.DotVV(this.m_normals[C$99n],C$99j.SubVV(C$99i,this.m_vertices[C$99n],C$99j.s_t0)))return!1;return!0},C$99S.prototype.ComputeDistance=function(C$99t,C$99h,C$99e,C$99u){for(var C$99i=C$99R.MulTXV(C$99t,C$99h,C$99S.ComputeDistance_s_pLocal),C$99n=-C$99P,C$99r=C$99S.ComputeDistance_s_normalForMaxDistance.Copy(C$99i),C$99s=0;C$99s<this.m_count;++C$99s){var C$99o=C$99j.DotVV(this.m_normals[C$99s],C$99j.SubVV(C$99i,this.m_vertices[C$99s],C$99j.s_t0));C$99n<C$99o&&(C$99n=C$99o,C$99r.Copy(this.m_normals[C$99s]))}if(0<C$99n){for(var C$99a=C$99S.ComputeDistance_s_minDistance.Copy(C$99r),C$99c=C$99n*C$99n,C$99s=0;C$99s<this.m_count;++C$99s){var C$99l=C$99j.SubVV(C$99i,this.m_vertices[C$99s],C$99S.ComputeDistance_s_distance),C$99_=C$99l.LengthSquared();C$99_<C$99c&&(C$99a.Copy(C$99l),C$99c=C$99_)}return C$99B.MulRV(C$99t.q,C$99a,C$99e),C$99e.Normalize(),Math.sqrt(C$99c)}return C$99B.MulRV(C$99t.q,C$99r,C$99e),C$99n},C$99S.prototype.RayCast=function(C$99t,C$99e,C$99i,C$99h){for(var C$99n=C$99R.MulTXV(C$99i,C$99e.p1,C$99S.RayCast_s_p1),C$99u=C$99R.MulTXV(C$99i,C$99e.p2,C$99S.RayCast_s_p2),C$99_=C$99j.SubVV(C$99u,C$99n,C$99S.RayCast_s_d),C$99r=0,C$99s=C$99e.maxFraction,C$99o=-1,C$99a=0;C$99a<this.m_count;++C$99a){var C$99c=C$99j.DotVV(this.m_normals[C$99a],C$99j.SubVV(this.m_vertices[C$99a],C$99n,C$99j.s_t0)),C$99l=C$99j.DotVV(this.m_normals[C$99a],C$99_);if(0===C$99l){if(C$99c<0)return!1}else C$99l<0&&C$99c<C$99r*C$99l?(C$99r=C$99c/C$99l,C$99o=C$99a):0<C$99l&&C$99c<C$99s*C$99l&&(C$99s=C$99c/C$99l);if(C$99s<C$99r)return!1}return 0<=C$99o&&(C$99t.fraction=C$99r,C$99B.MulRV(C$99i.q,this.m_normals[C$99o],C$99t.normal),!0)},C$99S.prototype.ComputeAABB=function(C$99t,C$99e,C$99i){for(var C$99n=C$99R.MulXV(C$99e,this.m_vertices[0],C$99t.lowerBound),C$99r=C$99t.upperBound.Copy(C$99n),C$99s=0;C$99s<this.m_count;++C$99s){var C$99o=C$99R.MulXV(C$99e,this.m_vertices[C$99s],C$99S.ComputeAABB_s_v);C$99j.MinV(C$99o,C$99n,C$99n),C$99j.MaxV(C$99o,C$99r,C$99r)}C$99t=this.m_radius;C$99n.SelfSubXY(C$99t,C$99t),C$99r.SelfAddXY(C$99t,C$99t)},C$99S.prototype.ComputeMass=function(C$99t,C$99e){for(var C$99i=C$99S.ComputeMass_s_center.SetZero(),C$99n=0,C$99h=0,C$99r=C$99S.ComputeMass_s_s.SetZero(),C$99s=0;C$99s<this.m_count;++C$99s)C$99r.SelfAdd(this.m_vertices[C$99s]);C$99r.SelfMul(1/this.m_count);for(C$99s=0;C$99s<this.m_count;++C$99s){var C$99o=C$99j.SubVV(this.m_vertices[C$99s],C$99r,C$99S.ComputeMass_s_e1),C$99a=C$99j.SubVV(this.m_vertices[(C$99s+1)%this.m_count],C$99r,C$99S.ComputeMass_s_e2),C$99u=C$99j.CrossVV(C$99o,C$99a),C$99c=.5*C$99u,C$99c=(C$99n+=C$99c,C$99i.SelfAdd(C$99j.MulSV(1/3*C$99c,C$99j.AddVV(C$99o,C$99a,C$99j.s_t0),C$99j.s_t1)),C$99o.x),C$99o=C$99o.y,C$99l=C$99a.x,C$99a=C$99a.y;C$99h+=1/3*.25*C$99u*(C$99c*C$99c+C$99l*C$99c+C$99l*C$99l+(C$99o*C$99o+C$99a*C$99o+C$99a*C$99a))}C$99t.mass=C$99e*C$99n,C$99i.SelfMul(1/C$99n),C$99j.AddVV(C$99i,C$99r,C$99t.center),C$99t.I=C$99e*C$99h,C$99t.I+=C$99t.mass*(C$99j.DotVV(C$99t.center,C$99t.center)-C$99j.DotVV(C$99i,C$99i))},C$99S.prototype.Validate=function(){for(var C$99t=0;C$99t<this.m_count;++C$99t)for(var C$99e=C$99t,C$99i=(C$99t+1)%this.m_count,C$99n=this.m_vertices[C$99e],C$99r=C$99j.SubVV(this.m_vertices[C$99i],C$99n,C$99S.Validate_s_e),C$99s=0;C$99s<this.m_count;++C$99s)if(C$99s!==C$99e&&C$99s!==C$99i){var C$99o=C$99j.SubVV(this.m_vertices[C$99s],C$99n,C$99S.Validate_s_v);if(C$99j.CrossVV(C$99r,C$99o)<0)return!1}return!0},C$99S.prototype.SetupDistanceProxy=function(C$99t,C$99e){C$99t.m_vertices=this.m_vertices,C$99t.m_count=this.m_count,C$99t.m_radius=this.m_radius},C$99S.prototype.ComputeSubmergedArea=function(C$99t,C$99e,C$99h,C$99u){for(var C$99_,C$99d=C$99B.MulTRV(C$99h.q,C$99t,C$99S.ComputeSubmergedArea_s_normalL),C$99f=C$99e-C$99j.DotVV(C$99t,C$99h.p),C$99i=C$99S.ComputeSubmergedArea_s_depths,C$99p=0,C$99n=-1,C$99r=-1,C$99m=!1,C$99s=0;C$99s<this.m_count;++C$99s){C$99i[C$99s]=C$99j.DotVV(C$99d,this.m_vertices[C$99s])-C$99f;var C$99y=C$99i[C$99s]<-C$99M;0<C$99s&&(C$99y?C$99m||(C$99n=C$99s-1,C$99p++):C$99m&&(C$99r=C$99s-1,C$99p++)),C$99m=C$99y}switch(C$99p){case 0:return C$99m?(this.ComputeMass(C$99_=C$99S.ComputeSubmergedArea_s_md,1),C$99R.MulXV(C$99h,C$99_.center,C$99u),C$99_.mass):0;case 1:-1===C$99n?C$99n=this.m_count-1:C$99r=this.m_count-1}for(var C$99e=(C$99n+1)%this.m_count,C$99o=(C$99r+1)%this.m_count,C$99t=(0-C$99i[C$99n])/(C$99i[C$99e]-C$99i[C$99n]),C$99g=(0-C$99i[C$99r])/(C$99i[C$99o]-C$99i[C$99r]),C$99a=C$99S.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[C$99n].x*(1-C$99t)+this.m_vertices[C$99e].x*C$99t,this.m_vertices[C$99n].y*(1-C$99t)+this.m_vertices[C$99e].y*C$99t),C$99v=C$99S.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[C$99r].x*(1-C$99g)+this.m_vertices[C$99o].x*C$99g,this.m_vertices[C$99r].y*(1-C$99g)+this.m_vertices[C$99o].y*C$99g),C$99x=0,C$99b=C$99S.ComputeSubmergedArea_s_center.SetZero(),C$99c=this.m_vertices[C$99e],C$99A=C$99e;C$99A!==C$99o;){var C$99l=(C$99A=(C$99A+1)%this.m_count)===C$99o?C$99v:this.m_vertices[C$99A],C$99C=.5*((C$99c.x-C$99a.x)*(C$99l.y-C$99a.y)-(C$99c.y-C$99a.y)*(C$99l.x-C$99a.x));C$99x+=C$99C,C$99b.x+=C$99C*(C$99a.x+C$99c.x+C$99l.x)/3,C$99b.y+=C$99C*(C$99a.y+C$99c.y+C$99l.y)/3,C$99c=C$99l}return C$99b.SelfMul(1/C$99x),C$99R.MulXV(C$99h,C$99b,C$99u),C$99x},C$99S.prototype.Dump=function(C$99t){C$99t("    const shape: b2PolygonShape = new b2PolygonShape();\n"),C$99t("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",8);for(var C$99e=0;C$99e<this.m_count;++C$99e)C$99t("    vs[%d].Set(%.15f, %.15f);\n",C$99e,this.m_vertices[C$99e].x,this.m_vertices[C$99e].y);C$99t("    shape.Set(vs, %d);\n",this.m_count)},C$99S.ComputeCentroid=function(C$99t,C$99e,C$99i){for(var C$99n=C$99i,C$99r=(C$99n.SetZero(),0),C$99h=C$99S.ComputeCentroid_s_pRef.SetZero(),C$99s=0;C$99s<C$99e;++C$99s){var C$99o=C$99h,C$99a=C$99t[C$99s],C$99c=C$99t[(C$99s+1)%C$99e],C$99l=C$99j.SubVV(C$99a,C$99o,C$99S.ComputeCentroid_s_e1),C$99u=C$99j.SubVV(C$99c,C$99o,C$99S.ComputeCentroid_s_e2),C$99l=.5*C$99j.CrossVV(C$99l,C$99u);C$99r+=C$99l,C$99n.x+=1/3*C$99l*(C$99o.x+C$99a.x+C$99c.x),C$99n.y+=1/3*C$99l*(C$99o.y+C$99a.y+C$99c.y)}return C$99n.SelfMul(1/C$99r),C$99n},C$99S.Set_s_ps=C$99j.MakeArray(8),C$99S.Set_s_hull=C$99h(8),C$99S.Set_s_r=new C$99j,C$99S.Set_s_v=new C$99j,C$99S.TestPoint_s_pLocal=new C$99j,C$99S.ComputeDistance_s_pLocal=new C$99j,C$99S.ComputeDistance_s_normalForMaxDistance=new C$99j,C$99S.ComputeDistance_s_minDistance=new C$99j,C$99S.ComputeDistance_s_distance=new C$99j,C$99S.RayCast_s_p1=new C$99j,C$99S.RayCast_s_p2=new C$99j,C$99S.RayCast_s_d=new C$99j,C$99S.ComputeAABB_s_v=new C$99j,C$99S.ComputeMass_s_center=new C$99j,C$99S.ComputeMass_s_s=new C$99j,C$99S.ComputeMass_s_e1=new C$99j,C$99S.ComputeMass_s_e2=new C$99j,C$99S.Validate_s_e=new C$99j,C$99S.Validate_s_v=new C$99j,C$99S.ComputeSubmergedArea_s_normalL=new C$99j,C$99S.ComputeSubmergedArea_s_depths=C$99h(8),C$99S.ComputeSubmergedArea_s_md=new C$99Ii,C$99S.ComputeSubmergedArea_s_intoVec=new C$99j,C$99S.ComputeSubmergedArea_s_outoVec=new C$99j,C$99S.ComputeSubmergedArea_s_center=new C$99j,C$99S.ComputeCentroid_s_pRef=new C$99j,C$99S.ComputeCentroid_s_e1=new C$99j,C$99S.ComputeCentroid_s_e2=new C$99j;var C$99Oi,C$99Ti=C$99S;function C$99S(){var C$99t=C$99Oi.call(this,C$99H.b2ShapeType.e_polygonShape,.016)||this;return C$99t.m_centroid=new C$99j(0,0),C$99t.m_vertices=[],C$99t.m_normals=[],C$99t.m_count=0,C$99t}C$99Di(C$99ki,C$99Fi=C$99Bi),C$99ki.prototype.Set=function(C$99t,C$99e){return this.m_vertex1.Copy(C$99t),this.m_vertex2.Copy(C$99e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},C$99ki.prototype.Clone=function(){return(new C$99ki).Copy(this)},C$99ki.prototype.Copy=function(C$99t){return C$99Fi.prototype.Copy.call(this,C$99t),this.m_vertex1.Copy(C$99t.m_vertex1),this.m_vertex2.Copy(C$99t.m_vertex2),this.m_vertex0.Copy(C$99t.m_vertex0),this.m_vertex3.Copy(C$99t.m_vertex3),this.m_hasVertex0=C$99t.m_hasVertex0,this.m_hasVertex3=C$99t.m_hasVertex3,this},C$99ki.prototype.GetChildCount=function(){return 1},C$99ki.prototype.TestPoint=function(C$99t,C$99e){return!1},C$99ki.prototype.ComputeDistance=function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s=C$99R.MulXV(C$99t,this.m_vertex1,C$99ki.ComputeDistance_s_v1),C$99t=C$99R.MulXV(C$99t,this.m_vertex2,C$99ki.ComputeDistance_s_v2),C$99o=C$99j.SubVV(C$99e,C$99s,C$99ki.ComputeDistance_s_d),C$99s=C$99j.SubVV(C$99t,C$99s,C$99ki.ComputeDistance_s_s),C$99a=C$99j.DotVV(C$99o,C$99s);return 0<C$99a&&((C$99r=C$99j.DotVV(C$99s,C$99s))<C$99a?C$99j.SubVV(C$99e,C$99t,C$99o):C$99o.SelfMulSub(C$99a/C$99r,C$99s)),C$99i.Copy(C$99o),C$99i.Normalize()},C$99ki.prototype.RayCast=function(C$99t,C$99e,C$99i,C$99l){var C$99n=C$99R.MulTXV(C$99i,C$99e.p1,C$99ki.RayCast_s_p1),C$99r=C$99R.MulTXV(C$99i,C$99e.p2,C$99ki.RayCast_s_p2),C$99r=C$99j.SubVV(C$99r,C$99n,C$99ki.RayCast_s_d),C$99s=this.m_vertex1,C$99o=this.m_vertex2,C$99a=C$99j.SubVV(C$99o,C$99s,C$99ki.RayCast_s_e),C$99a=C$99t.normal.Set(C$99a.y,-C$99a.x).SelfNormalize(),C$99c=C$99j.DotVV(C$99a,C$99j.SubVV(C$99s,C$99n,C$99j.s_t0)),C$99a=C$99j.DotVV(C$99a,C$99r);if(0===C$99a)return!1;C$99a=C$99c/C$99a;if(C$99a<0||C$99e.maxFraction<C$99a)return!1;C$99e=C$99j.AddVMulSV(C$99n,C$99a,C$99r,C$99ki.RayCast_s_q),C$99n=C$99j.SubVV(C$99o,C$99s,C$99ki.RayCast_s_r),C$99r=C$99j.DotVV(C$99n,C$99n);if(0===C$99r)return!1;C$99o=C$99j.DotVV(C$99j.SubVV(C$99e,C$99s,C$99j.s_t0),C$99n)/C$99r;return!(C$99o<0||1<C$99o)&&(C$99t.fraction=C$99a,C$99B.MulRV(C$99i.q,C$99t.normal,C$99t.normal),0<C$99c&&C$99t.normal.SelfNeg(),!0)},C$99ki.prototype.ComputeAABB=function(C$99t,C$99e,C$99i){var C$99n=C$99R.MulXV(C$99e,this.m_vertex1,C$99ki.ComputeAABB_s_v1),C$99e=C$99R.MulXV(C$99e,this.m_vertex2,C$99ki.ComputeAABB_s_v2),C$99n=(C$99j.MinV(C$99n,C$99e,C$99t.lowerBound),C$99j.MaxV(C$99n,C$99e,C$99t.upperBound),this.m_radius);C$99t.lowerBound.SelfSubXY(C$99n,C$99n),C$99t.upperBound.SelfAddXY(C$99n,C$99n)},C$99ki.prototype.ComputeMass=function(C$99t,C$99e){C$99t.mass=0,C$99j.MidVV(this.m_vertex1,this.m_vertex2,C$99t.center),C$99t.I=0},C$99ki.prototype.SetupDistanceProxy=function(C$99t,C$99e){C$99t.m_vertices=C$99t.m_buffer,C$99t.m_vertices[0].Copy(this.m_vertex1),C$99t.m_vertices[1].Copy(this.m_vertex2),C$99t.m_count=2,C$99t.m_radius=this.m_radius},C$99ki.prototype.ComputeSubmergedArea=function(C$99t,C$99e,C$99i,C$99n){return C$99n.SetZero(),0},C$99ki.prototype.Dump=function(C$99t){C$99t("    const shape: b2EdgeShape = new b2EdgeShape();\n"),C$99t("    shape.m_radius = %.15f;\n",this.m_radius),C$99t("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),C$99t("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),C$99t("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),C$99t("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),C$99t("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),C$99t("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)},C$99ki.ComputeDistance_s_v1=new C$99j,C$99ki.ComputeDistance_s_v2=new C$99j,C$99ki.ComputeDistance_s_d=new C$99j,C$99ki.ComputeDistance_s_s=new C$99j,C$99ki.RayCast_s_p1=new C$99j,C$99ki.RayCast_s_p2=new C$99j,C$99ki.RayCast_s_d=new C$99j,C$99ki.RayCast_s_e=new C$99j,C$99ki.RayCast_s_q=new C$99j,C$99ki.RayCast_s_r=new C$99j,C$99ki.ComputeAABB_s_v1=new C$99j,C$99ki.ComputeAABB_s_v2=new C$99j;var C$99Fi,C$99Ni=C$99ki;function C$99ki(){var C$99t=C$99Fi.call(this,C$99H.b2ShapeType.e_edgeShape,.016)||this;return C$99t.m_vertex1=new C$99j,C$99t.m_vertex2=new C$99j,C$99t.m_vertex0=new C$99j,C$99t.m_vertex3=new C$99j,C$99t.m_hasVertex0=!1,C$99t.m_hasVertex3=!1,C$99t}C$99Di(C$99Ui,C$99Gi=C$99Bi),C$99Ui.prototype.CreateLoop=function(C$99t,C$99e,C$99i){if(void 0===C$99i&&(C$99i=0),(C$99e=void 0===C$99e?C$99t.length:C$99e)<3)return this;this.m_count=C$99e+1,this.m_vertices=C$99j.MakeArray(this.m_count);for(var C$99n=0;C$99n<C$99e;++C$99n)this.m_vertices[C$99n].Copy(C$99t[C$99i+C$99n]);return this.m_vertices[C$99e].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},C$99Ui.prototype.CreateChain=function(C$99t,C$99e,C$99i){void 0===C$99e&&(C$99e=C$99t.length),void 0===C$99i&&(C$99i=0),this.m_count=C$99e,this.m_vertices=C$99j.MakeArray(C$99e);for(var C$99n=0;C$99n<C$99e;++C$99n)this.m_vertices[C$99n].Copy(C$99t[C$99i+C$99n]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this},C$99Ui.prototype.SetPrevVertex=function(C$99t){return this.m_prevVertex.Copy(C$99t),this.m_hasPrevVertex=!0,this},C$99Ui.prototype.SetNextVertex=function(C$99t){return this.m_nextVertex.Copy(C$99t),this.m_hasNextVertex=!0,this},C$99Ui.prototype.Clone=function(){return(new C$99Ui).Copy(this)},C$99Ui.prototype.Copy=function(C$99t){return C$99Gi.prototype.Copy.call(this,C$99t),this.CreateChain(C$99t.m_vertices,C$99t.m_count),this.m_prevVertex.Copy(C$99t.m_prevVertex),this.m_nextVertex.Copy(C$99t.m_nextVertex),this.m_hasPrevVertex=C$99t.m_hasPrevVertex,this.m_hasNextVertex=C$99t.m_hasNextVertex,this},C$99Ui.prototype.GetChildCount=function(){return this.m_count-1},C$99Ui.prototype.GetChildEdge=function(C$99t,C$99e){C$99t.m_type=C$99H.b2ShapeType.e_edgeShape,C$99t.m_radius=this.m_radius,C$99t.m_vertex1.Copy(this.m_vertices[C$99e]),C$99t.m_vertex2.Copy(this.m_vertices[C$99e+1]),0<C$99e?(C$99t.m_vertex0.Copy(this.m_vertices[C$99e-1]),C$99t.m_hasVertex0=!0):(C$99t.m_vertex0.Copy(this.m_prevVertex),C$99t.m_hasVertex0=this.m_hasPrevVertex),C$99e<this.m_count-2?(C$99t.m_vertex3.Copy(this.m_vertices[C$99e+2]),C$99t.m_hasVertex3=!0):(C$99t.m_vertex3.Copy(this.m_nextVertex),C$99t.m_hasVertex3=this.m_hasNextVertex)},C$99Ui.prototype.TestPoint=function(C$99t,C$99e){return!1},C$99Ui.prototype.ComputeDistance=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99Ui.ComputeDistance_s_edgeShape;return this.GetChildEdge(C$99r,C$99n),C$99r.ComputeDistance(C$99t,C$99e,C$99i,0)},C$99Ui.prototype.RayCast=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99Ui.RayCast_s_edgeShape;return C$99r.m_vertex1.Copy(this.m_vertices[C$99n]),C$99r.m_vertex2.Copy(this.m_vertices[(C$99n+1)%this.m_count]),C$99r.RayCast(C$99t,C$99e,C$99i,0)},C$99Ui.prototype.ComputeAABB=function(C$99t,C$99e,C$99i){var C$99n=this.m_vertices[C$99i],C$99i=this.m_vertices[(C$99i+1)%this.m_count],C$99n=C$99R.MulXV(C$99e,C$99n,C$99Ui.ComputeAABB_s_v1),C$99e=C$99R.MulXV(C$99e,C$99i,C$99Ui.ComputeAABB_s_v2);C$99j.MinV(C$99n,C$99e,C$99t.lowerBound),C$99j.MaxV(C$99n,C$99e,C$99t.upperBound)},C$99Ui.prototype.ComputeMass=function(C$99t,C$99e){C$99t.mass=0,C$99t.center.SetZero(),C$99t.I=0},C$99Ui.prototype.SetupDistanceProxy=function(C$99t,C$99e){C$99t.m_vertices=C$99t.m_buffer,C$99t.m_vertices[0].Copy(this.m_vertices[C$99e]),C$99e+1<this.m_count?C$99t.m_vertices[1].Copy(this.m_vertices[C$99e+1]):C$99t.m_vertices[1].Copy(this.m_vertices[0]),C$99t.m_count=2,C$99t.m_radius=this.m_radius},C$99Ui.prototype.ComputeSubmergedArea=function(C$99t,C$99e,C$99i,C$99n){return C$99n.SetZero(),0},C$99Ui.prototype.Dump=function(C$99t){C$99t("    const shape: b2ChainShape = new b2ChainShape();\n"),C$99t("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",8);for(var C$99e=0;C$99e<this.m_count;++C$99e)C$99t("    vs[%d].Set(%.15f, %.15f);\n",C$99e,this.m_vertices[C$99e].x,this.m_vertices[C$99e].y);C$99t("    shape.CreateChain(vs, %d);\n",this.m_count),C$99t("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),C$99t("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),C$99t("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),C$99t("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")},C$99Ui.ComputeDistance_s_edgeShape=new C$99Ni,C$99Ui.RayCast_s_edgeShape=new C$99Ni,C$99Ui.ComputeAABB_s_v1=new C$99j,C$99Ui.ComputeAABB_s_v2=new C$99j;var C$99Gi,C$99zi=C$99Ui;function C$99Ui(){var C$99t=C$99Gi.call(this,C$99H.b2ShapeType.e_chainShape,.016)||this;return C$99t.m_vertices=[],C$99t.m_count=0,C$99t.m_prevVertex=new C$99j,C$99t.m_nextVertex=new C$99j,C$99t.m_hasPrevVertex=!1,C$99t.m_hasNextVertex=!1,C$99t}C$99Hi.prototype.Clone=function(){return(new C$99Hi).Copy(this)},C$99Hi.prototype.Copy=function(C$99t){return this.categoryBits=C$99t.categoryBits,this.maskBits=C$99t.maskBits,this.groupIndex=C$99t.groupIndex||0,this},C$99Hi.DEFAULT=new C$99Hi;var C$99Wi=C$99Hi;function C$99Hi(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}var C$99ji=function(){this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new C$99Wi},C$99Xi=function(C$99t){this.aabb=new C$99te,this.childIndex=0,this.fixture=C$99t},C$99Yi=(C$99qi.prototype.GetType=function(){return this.m_shape.GetType()},C$99qi.prototype.GetShape=function(){return this.m_shape},C$99qi.prototype.SetSensor=function(C$99t){C$99t!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=C$99t)},C$99qi.prototype.IsSensor=function(){return this.m_isSensor},C$99qi.prototype.SetFilterData=function(C$99t){this.m_filter.Copy(C$99t),this.Refilter()},C$99qi.prototype.GetFilterData=function(){return this.m_filter},C$99qi.prototype.Refilter=function(){for(var C$99t=this.m_body.GetContactList();C$99t;){var C$99e=C$99t.contact,C$99i=C$99e.GetFixtureA(),C$99n=C$99e.GetFixtureB();C$99i!==this&&C$99n!==this||C$99e.FlagForFiltering(),C$99t=C$99t.next}var C$99r=this.m_body.GetWorld();if(null!==C$99r)for(var C$99s=C$99r.m_contactManager.m_broadPhase,C$99o=0;C$99o<this.m_proxyCount;++C$99o)C$99s.TouchProxy(this.m_proxies[C$99o].treeNode)},C$99qi.prototype.GetBody=function(){return this.m_body},C$99qi.prototype.GetNext=function(){return this.m_next},C$99qi.prototype.GetUserData=function(){return this.m_userData},C$99qi.prototype.SetUserData=function(C$99t){this.m_userData=C$99t},C$99qi.prototype.TestPoint=function(C$99t){return this.m_shape.TestPoint(this.m_body.GetTransform(),C$99t)},C$99qi.prototype.ComputeDistance=function(C$99t,C$99e,C$99i){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),C$99t,C$99e,C$99i)},C$99qi.prototype.RayCast=function(C$99t,C$99e,C$99i){return this.m_shape.RayCast(C$99t,C$99e,this.m_body.GetTransform(),C$99i)},C$99qi.prototype.GetMassData=function(C$99t){return void 0===C$99t&&(C$99t=new C$99Ii),this.m_shape.ComputeMass(C$99t,this.m_density),C$99t},C$99qi.prototype.SetDensity=function(C$99t){this.m_density=C$99t},C$99qi.prototype.GetDensity=function(){return this.m_density},C$99qi.prototype.GetFriction=function(){return this.m_friction},C$99qi.prototype.SetFriction=function(C$99t){this.m_friction=C$99t},C$99qi.prototype.GetRestitution=function(){return this.m_restitution},C$99qi.prototype.SetRestitution=function(C$99t){this.m_restitution=C$99t},C$99qi.prototype.GetAABB=function(C$99t){return this.m_proxies[C$99t].aabb},C$99qi.prototype.Dump=function(C$99t,C$99e){C$99t("    const fd: b2FixtureDef = new b2FixtureDef();\n"),C$99t("    fd.friction = %.15f;\n",this.m_friction),C$99t("    fd.restitution = %.15f;\n",this.m_restitution),C$99t("    fd.density = %.15f;\n",this.m_density),C$99t("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),C$99t("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),C$99t("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),C$99t("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(C$99t),C$99t("\n"),C$99t("    fd.shape = shape;\n"),C$99t("\n"),C$99t("    bodies[%d].CreateFixture(fd);\n",C$99e)},C$99qi.prototype.Create=function(C$99t){var C$99e=this;this.m_userData=C$99t.userData,this.m_friction=C$99f(C$99t.friction,.2),this.m_restitution=C$99f(C$99t.restitution,0),this.m_next=null,this.m_filter.Copy(C$99f(C$99t.filter,C$99Wi.DEFAULT)),this.m_isSensor=C$99f(C$99t.isSensor,!1),this.m_proxies=C$99c(this.m_shape.GetChildCount(),function(C$99t){return new C$99Xi(C$99e)}),this.m_proxyCount=0,this.m_density=C$99f(C$99t.density,0)},C$99qi.prototype.Destroy=function(){},C$99qi.prototype.CreateProxies=function(C$99t){var C$99e=this.m_body.m_world.m_contactManager.m_broadPhase;this.m_proxyCount=this.m_shape.GetChildCount();for(var C$99i=0;C$99i<this.m_proxyCount;++C$99i){var C$99n=this.m_proxies[C$99i]=new C$99Xi(this);this.m_shape.ComputeAABB(C$99n.aabb,C$99t,C$99i),C$99n.treeNode=C$99e.CreateProxy(C$99n.aabb,C$99n),C$99n.childIndex=C$99i}},C$99qi.prototype.DestroyProxies=function(){for(var C$99t=this.m_body.m_world.m_contactManager.m_broadPhase,C$99e=0;C$99e<this.m_proxyCount;++C$99e){var C$99i=this.m_proxies[C$99e];delete C$99i.treeNode.userData,C$99t.DestroyProxy(C$99i.treeNode),delete C$99i.treeNode}this.m_proxyCount=0},C$99qi.prototype.TouchProxies=function(){for(var C$99t=this.m_body.m_world.m_contactManager.m_broadPhase,C$99e=this.m_proxyCount,C$99i=0;C$99i<C$99e;++C$99i)C$99t.TouchProxy(this.m_proxies[C$99i].treeNode)},C$99qi.prototype.Synchronize=function(C$99t,C$99e){if(0!==this.m_proxyCount)for(var C$99i=this.m_body.m_world.m_contactManager.m_broadPhase,C$99n=0;C$99n<this.m_proxyCount;++C$99n){var C$99r=this.m_proxies[C$99n],C$99s=C$99qi.Synchronize_s_aabb1,C$99o=C$99qi.Synchronize_s_aabb2,C$99s=(this.m_shape.ComputeAABB(C$99s,C$99t,C$99n),this.m_shape.ComputeAABB(C$99o,C$99e,C$99n),C$99r.aabb.Combine2(C$99s,C$99o),C$99j.SubVV(C$99e.p,C$99t.p,C$99qi.Synchronize_s_displacement));C$99i.MoveProxy(C$99r.treeNode,C$99r.aabb,C$99s)}},C$99qi.Synchronize_s_aabb1=new C$99te,C$99qi.Synchronize_s_aabb2=new C$99te,C$99qi.Synchronize_s_displacement=new C$99j,C$99qi);function C$99qi(C$99t,C$99e){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=[],this.m_proxyCount=0,this.m_filter=new C$99Wi,this.m_isSensor=!1,this.m_userData=null,this.m_body=C$99e,this.m_shape=C$99t.shape.Clone()}(C$99Ki=C$99H.b2BodyType||(C$99H.b2BodyType={}))[C$99Ki.b2_unknown=-1]="b2_unknown",C$99Ki[C$99Ki.b2_staticBody=0]="b2_staticBody",C$99Ki[C$99Ki.b2_kinematicBody=1]="b2_kinematicBody",C$99Ki[C$99Ki.b2_dynamicBody=2]="b2_dynamicBody";function C$99Ji(){this.type=C$99H.b2BodyType.b2_staticBody,this.position=new C$99j(0,0),this.angle=0,this.linearVelocity=new C$99j(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}C$99r.prototype.CreateFixture=function(C$99t,C$99e){return void 0===C$99e&&(C$99e=0),C$99t instanceof C$99Bi?this.CreateFixtureShapeDensity(C$99t,C$99e):this.CreateFixtureDef(C$99t)},C$99r.prototype.CreateFixtureDef=function(C$99t){if(this.m_world.IsLocked())throw new Error;var C$99e=new C$99Yi(C$99t,this);return C$99e.Create(C$99t),this.m_activeFlag&&C$99e.CreateProxies(this.m_xf),C$99e.m_next=this.m_fixtureList,this.m_fixtureList=C$99e,++this.m_fixtureCount,0<C$99e.m_density&&this.ResetMassData(),this.m_world.m_newFixture=!0,C$99e},C$99r.prototype.CreateFixtureShapeDensity=function(C$99t,C$99e){void 0===C$99e&&(C$99e=0);var C$99i=C$99r.CreateFixtureShapeDensity_s_def;return C$99i.shape=C$99t,C$99i.density=C$99e,this.CreateFixtureDef(C$99i)},C$99r.prototype.DestroyFixture=function(C$99t){if(this.m_world.IsLocked())throw new Error;for(var C$99e=this.m_fixtureList,C$99i=null;null!==C$99e;){if(C$99e===C$99t){C$99i?C$99i.m_next=C$99t.m_next:this.m_fixtureList=C$99t.m_next;break}C$99e=(C$99i=C$99e).m_next}for(var C$99n=this.m_contactList;C$99n;){var C$99r=C$99n.contact,C$99n=C$99n.next,C$99s=C$99r.GetFixtureA(),C$99o=C$99r.GetFixtureB();C$99t!==C$99s&&C$99t!==C$99o||this.m_world.m_contactManager.Destroy(C$99r)}this.m_activeFlag&&C$99t.DestroyProxies(),C$99t.m_next=null,C$99t.Destroy(),--this.m_fixtureCount,this.ResetMassData()},C$99r.prototype.SetTransformVec=function(C$99t,C$99e){this.SetTransformXY(C$99t.x,C$99t.y,C$99e)},C$99r.prototype.SetTransformXY=function(C$99t,C$99e,C$99i){if(this.m_world.IsLocked())throw new Error;this.m_xf.q.SetAngle(C$99i),this.m_xf.p.Set(C$99t,C$99e),this.m_xf0.Copy(this.m_xf),C$99R.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=C$99i,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=C$99i;for(var C$99n=this.m_fixtureList;C$99n;C$99n=C$99n.m_next)C$99n.Synchronize(this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},C$99r.prototype.SetTransform=function(C$99t){this.SetTransformVec(C$99t.p,C$99t.GetAngle())},C$99r.prototype.GetTransform=function(){return this.m_xf},C$99r.prototype.GetPosition=function(){return this.m_xf.p},C$99r.prototype.SetPosition=function(C$99t){this.SetTransformVec(C$99t,this.GetAngle())},C$99r.prototype.SetPositionXY=function(C$99t,C$99e){this.SetTransformXY(C$99t,C$99e,this.GetAngle())},C$99r.prototype.GetAngle=function(){return this.m_sweep.a},C$99r.prototype.SetAngle=function(C$99t){this.SetTransformVec(this.GetPosition(),C$99t)},C$99r.prototype.GetWorldCenter=function(){return this.m_sweep.c},C$99r.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},C$99r.prototype.SetLinearVelocity=function(C$99t){this.m_type!==C$99H.b2BodyType.b2_staticBody&&(0<C$99j.DotVV(C$99t,C$99t)&&this.SetAwake(!0),this.m_linearVelocity.Copy(C$99t))},C$99r.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},C$99r.prototype.SetAngularVelocity=function(C$99t){this.m_type!==C$99H.b2BodyType.b2_staticBody&&(0<C$99t*C$99t&&this.SetAwake(!0),this.m_angularVelocity=C$99t)},C$99r.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},C$99r.prototype.GetDefinition=function(C$99t){return C$99t.type=this.GetType(),C$99t.allowSleep=this.m_autoSleepFlag,C$99t.angle=this.GetAngle(),C$99t.angularDamping=this.m_angularDamping,C$99t.gravityScale=this.m_gravityScale,C$99t.angularVelocity=this.m_angularVelocity,C$99t.fixedRotation=this.m_fixedRotationFlag,C$99t.bullet=this.m_bulletFlag,C$99t.awake=this.m_awakeFlag,C$99t.linearDamping=this.m_linearDamping,C$99t.linearVelocity.Copy(this.GetLinearVelocity()),C$99t.position.Copy(this.GetPosition()),C$99t.userData=this.GetUserData(),C$99t},C$99r.prototype.ApplyForce=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=!0),this.m_type===C$99H.b2BodyType.b2_dynamicBody&&(C$99i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=C$99t.x,this.m_force.y+=C$99t.y,this.m_torque+=(C$99e.x-this.m_sweep.c.x)*C$99t.y-(C$99e.y-this.m_sweep.c.y)*C$99t.x))},C$99r.prototype.ApplyForceToCenter=function(C$99t,C$99e){void 0===C$99e&&(C$99e=!0),this.m_type===C$99H.b2BodyType.b2_dynamicBody&&(C$99e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=C$99t.x,this.m_force.y+=C$99t.y))},C$99r.prototype.ApplyTorque=function(C$99t,C$99e){void 0===C$99e&&(C$99e=!0),this.m_type===C$99H.b2BodyType.b2_dynamicBody&&(C$99e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=C$99t))},C$99r.prototype.ApplyLinearImpulse=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=!0),this.m_type===C$99H.b2BodyType.b2_dynamicBody&&(C$99i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*C$99t.x,this.m_linearVelocity.y+=this.m_invMass*C$99t.y,this.m_angularVelocity+=this.m_invI*((C$99e.x-this.m_sweep.c.x)*C$99t.y-(C$99e.y-this.m_sweep.c.y)*C$99t.x)))},C$99r.prototype.ApplyLinearImpulseToCenter=function(C$99t,C$99e){void 0===C$99e&&(C$99e=!0),this.m_type===C$99H.b2BodyType.b2_dynamicBody&&(C$99e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*C$99t.x,this.m_linearVelocity.y+=this.m_invMass*C$99t.y))},C$99r.prototype.ApplyAngularImpulse=function(C$99t,C$99e){void 0===C$99e&&(C$99e=!0),this.m_type===C$99H.b2BodyType.b2_dynamicBody&&(C$99e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*C$99t))},C$99r.prototype.GetMass=function(){return this.m_mass},C$99r.prototype.GetInertia=function(){return this.m_I+this.m_mass*C$99j.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)},C$99r.prototype.GetMassData=function(C$99t){return C$99t.mass=this.m_mass,C$99t.I=this.m_I+this.m_mass*C$99j.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),C$99t.center.Copy(this.m_sweep.localCenter),C$99t},C$99r.prototype.SetMassData=function(C$99t){if(this.m_world.IsLocked())throw new Error;var C$99e;this.m_type===C$99H.b2BodyType.b2_dynamicBody&&(this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=C$99t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,0<C$99t.I&&!this.m_fixedRotationFlag&&(this.m_I=C$99t.I-this.m_mass*C$99j.DotVV(C$99t.center,C$99t.center),this.m_invI=1/this.m_I),C$99e=C$99r.SetMassData_s_oldCenter.Copy(this.m_sweep.c),this.m_sweep.localCenter.Copy(C$99t.center),C$99R.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),C$99j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$99j.SubVV(this.m_sweep.c,C$99e,C$99j.s_t0),this.m_linearVelocity))},C$99r.prototype.ResetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===C$99H.b2BodyType.b2_staticBody||this.m_type===C$99H.b2BodyType.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);for(var C$99t,C$99e=C$99r.ResetMassData_s_localCenter.SetZero(),C$99i=this.m_fixtureList;C$99i;C$99i=C$99i.m_next)0!==C$99i.m_density&&(C$99t=C$99i.GetMassData(C$99r.ResetMassData_s_massData),this.m_mass+=C$99t.mass,C$99e.x+=C$99t.center.x*C$99t.mass,C$99e.y+=C$99t.center.y*C$99t.mass,this.m_I+=C$99t.I);0<this.m_mass?(this.m_invMass=1/this.m_mass,C$99e.x*=this.m_invMass,C$99e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),0<this.m_I&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*C$99j.DotVV(C$99e,C$99e),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var C$99n=C$99r.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(C$99e),C$99R.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),C$99j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$99j.SubVV(this.m_sweep.c,C$99n,C$99j.s_t0),this.m_linearVelocity)},C$99r.prototype.GetWorldPoint=function(C$99t,C$99e){return C$99R.MulXV(this.m_xf,C$99t,C$99e)},C$99r.prototype.GetWorldVector=function(C$99t,C$99e){return C$99B.MulRV(this.m_xf.q,C$99t,C$99e)},C$99r.prototype.GetLocalPoint=function(C$99t,C$99e){return C$99R.MulTXV(this.m_xf,C$99t,C$99e)},C$99r.prototype.GetLocalVector=function(C$99t,C$99e){return C$99B.MulTRV(this.m_xf.q,C$99t,C$99e)},C$99r.prototype.GetLinearVelocityFromWorldPoint=function(C$99t,C$99e){return C$99j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$99j.SubVV(C$99t,this.m_sweep.c,C$99j.s_t0),C$99e)},C$99r.prototype.GetLinearVelocityFromLocalPoint=function(C$99t,C$99e){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(C$99t,C$99e),C$99e)},C$99r.prototype.GetLinearDamping=function(){return this.m_linearDamping},C$99r.prototype.SetLinearDamping=function(C$99t){this.m_linearDamping=C$99t},C$99r.prototype.GetAngularDamping=function(){return this.m_angularDamping},C$99r.prototype.SetAngularDamping=function(C$99t){this.m_angularDamping=C$99t},C$99r.prototype.GetGravityScale=function(){return this.m_gravityScale},C$99r.prototype.SetGravityScale=function(C$99t){this.m_gravityScale=C$99t},C$99r.prototype.SetType=function(C$99t){if(this.m_world.IsLocked())throw new Error;if(this.m_type!==C$99t){this.m_type=C$99t,this.ResetMassData(),this.m_type===C$99H.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var C$99e=this.m_contactList;C$99e;){var C$99i=C$99e,C$99e=C$99e.next;this.m_world.m_contactManager.Destroy(C$99i.contact)}this.m_contactList=null;for(var C$99n=this.m_fixtureList;C$99n;C$99n=C$99n.m_next)C$99n.TouchProxies()}},C$99r.prototype.GetType=function(){return this.m_type},C$99r.prototype.SetBullet=function(C$99t){this.m_bulletFlag=C$99t},C$99r.prototype.IsBullet=function(){return this.m_bulletFlag},C$99r.prototype.SetSleepingAllowed=function(C$99t){(this.m_autoSleepFlag=C$99t)||this.SetAwake(!0)},C$99r.prototype.IsSleepingAllowed=function(){return this.m_autoSleepFlag},C$99r.prototype.SetAwake=function(C$99t){C$99t?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},C$99r.prototype.IsAwake=function(){return this.m_awakeFlag},C$99r.prototype.SetActive=function(C$99t){if(this.m_world.IsLocked())throw new Error;if(C$99t!==this.IsActive())if(this.m_activeFlag=C$99t)for(var C$99e=this.m_fixtureList;C$99e;C$99e=C$99e.m_next)C$99e.CreateProxies(this.m_xf);else{for(C$99e=this.m_fixtureList;C$99e;C$99e=C$99e.m_next)C$99e.DestroyProxies();for(var C$99i=this.m_contactList;C$99i;){var C$99n=C$99i,C$99i=C$99i.next;this.m_world.m_contactManager.Destroy(C$99n.contact)}this.m_contactList=null}},C$99r.prototype.IsActive=function(){return this.m_activeFlag},C$99r.prototype.SetFixedRotation=function(C$99t){this.m_fixedRotationFlag!==C$99t&&(this.m_fixedRotationFlag=C$99t,this.m_angularVelocity=0,this.ResetMassData())},C$99r.prototype.IsFixedRotation=function(){return this.m_fixedRotationFlag},C$99r.prototype.GetFixtureList=function(){return this.m_fixtureList},C$99r.prototype.GetJointList=function(){return this.m_jointList},C$99r.prototype.GetContactList=function(){return this.m_contactList},C$99r.prototype.GetNext=function(){return this.m_next},C$99r.prototype.GetUserData=function(){return this.m_userData},C$99r.prototype.SetUserData=function(C$99t){this.m_userData=C$99t},C$99r.prototype.GetWorld=function(){return this.m_world},C$99r.prototype.Dump=function(C$99t){var C$99e=this.m_islandIndex,C$99i=(C$99t("{\n"),C$99t("  const bd: b2BodyDef = new b2BodyDef();\n"),"");switch(this.m_type){case C$99H.b2BodyType.b2_staticBody:C$99i="b2BodyType.b2_staticBody";break;case C$99H.b2BodyType.b2_kinematicBody:C$99i="b2BodyType.b2_kinematicBody";break;case C$99H.b2BodyType.b2_dynamicBody:C$99i="b2BodyType.b2_dynamicBody"}C$99t("  bd.type = %s;\n",C$99i),C$99t("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),C$99t("  bd.angle = %.15f;\n",this.m_sweep.a),C$99t("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),C$99t("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),C$99t("  bd.linearDamping = %.15f;\n",this.m_linearDamping),C$99t("  bd.angularDamping = %.15f;\n",this.m_angularDamping),C$99t("  bd.allowSleep = %s;\n",this.m_autoSleepFlag?"true":"false"),C$99t("  bd.awake = %s;\n",this.m_awakeFlag?"true":"false"),C$99t("  bd.fixedRotation = %s;\n",this.m_fixedRotationFlag?"true":"false"),C$99t("  bd.bullet = %s;\n",this.m_bulletFlag?"true":"false"),C$99t("  bd.active = %s;\n",this.m_activeFlag?"true":"false"),C$99t("  bd.gravityScale = %.15f;\n",this.m_gravityScale),C$99t("\n"),C$99t("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),C$99t("\n");for(var C$99n=this.m_fixtureList;C$99n;C$99n=C$99n.m_next)C$99t("  {\n"),C$99n.Dump(C$99t,C$99e),C$99t("  }\n");C$99t("}\n")},C$99r.prototype.SynchronizeFixtures=function(){var C$99t=C$99r.SynchronizeFixtures_s_xf1;C$99t.q.SetAngle(this.m_sweep.a0),C$99B.MulRV(C$99t.q,this.m_sweep.localCenter,C$99t.p),C$99j.SubVV(this.m_sweep.c0,C$99t.p,C$99t.p);for(var C$99e=this.m_fixtureList;C$99e;C$99e=C$99e.m_next)C$99e.Synchronize(C$99t,this.m_xf)},C$99r.prototype.SynchronizeTransform=function(){this.m_xf.q.SetAngle(this.m_sweep.a),C$99B.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),C$99j.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},C$99r.prototype.ShouldCollide=function(C$99t){return(this.m_type!==C$99H.b2BodyType.b2_staticBody||C$99t.m_type!==C$99H.b2BodyType.b2_staticBody)&&this.ShouldCollideConnected(C$99t)},C$99r.prototype.ShouldCollideConnected=function(C$99t){for(var C$99e=this.m_jointList;C$99e;C$99e=C$99e.next)if(C$99e.other===C$99t&&!C$99e.joint.m_collideConnected)return!1;return!0},C$99r.prototype.Advance=function(C$99t){this.m_sweep.Advance(C$99t),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),C$99B.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),C$99j.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)},C$99r.prototype.GetControllerList=function(){return this.m_controllerList},C$99r.prototype.GetControllerCount=function(){return this.m_controllerCount},C$99r.CreateFixtureShapeDensity_s_def=new C$99ji,C$99r.SetMassData_s_oldCenter=new C$99j,C$99r.ResetMassData_s_localCenter=new C$99j,C$99r.ResetMassData_s_oldCenter=new C$99j,C$99r.ResetMassData_s_massData=new C$99Ii,C$99r.SynchronizeFixtures_s_xf1=new C$99R;var C$99Zi=C$99r;function C$99r(C$99t,C$99e){this.m_type=C$99H.b2BodyType.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new C$99R,this.m_xf0=new C$99R,this.m_sweep=new C$99W,this.m_linearVelocity=new C$99j,this.m_angularVelocity=0,this.m_force=new C$99j,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,this.m_bulletFlag=C$99f(C$99t.bullet,!1),this.m_fixedRotationFlag=C$99f(C$99t.fixedRotation,!1),this.m_autoSleepFlag=C$99f(C$99t.allowSleep,!0),this.m_awakeFlag=C$99f(C$99t.awake,!0),this.m_activeFlag=C$99f(C$99t.active,!0),this.m_world=C$99e,this.m_xf.p.Copy(C$99f(C$99t.position,C$99j.ZERO)),this.m_xf.q.SetAngle(C$99f(C$99t.angle,0)),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(C$99f(C$99t.linearVelocity,C$99j.ZERO)),this.m_angularVelocity=C$99f(C$99t.angularVelocity,0),this.m_linearDamping=C$99f(C$99t.linearDamping,0),this.m_angularDamping=C$99f(C$99t.angularDamping,0),this.m_gravityScale=C$99f(C$99t.gravityScale,1),this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=C$99f(C$99t.type,C$99H.b2BodyType.b2_staticBody),C$99t.type===C$99H.b2BodyType.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=C$99t.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}(C$99Ki=C$99H.b2JointType||(C$99H.b2JointType={}))[C$99Ki.e_unknownJoint=0]="e_unknownJoint",C$99Ki[C$99Ki.e_revoluteJoint=1]="e_revoluteJoint",C$99Ki[C$99Ki.e_prismaticJoint=2]="e_prismaticJoint",C$99Ki[C$99Ki.e_distanceJoint=3]="e_distanceJoint",C$99Ki[C$99Ki.e_pulleyJoint=4]="e_pulleyJoint",C$99Ki[C$99Ki.e_mouseJoint=5]="e_mouseJoint",C$99Ki[C$99Ki.e_gearJoint=6]="e_gearJoint",C$99Ki[C$99Ki.e_wheelJoint=7]="e_wheelJoint",C$99Ki[C$99Ki.e_weldJoint=8]="e_weldJoint",C$99Ki[C$99Ki.e_frictionJoint=9]="e_frictionJoint",C$99Ki[C$99Ki.e_ropeJoint=10]="e_ropeJoint",C$99Ki[C$99Ki.e_motorJoint=11]="e_motorJoint",C$99Ki[C$99Ki.e_areaJoint=12]="e_areaJoint",(C$99Ki=C$99H.b2LimitState||(C$99H.b2LimitState={}))[C$99Ki.e_inactiveLimit=0]="e_inactiveLimit",C$99Ki[C$99Ki.e_atLowerLimit=1]="e_atLowerLimit",C$99Ki[C$99Ki.e_atUpperLimit=2]="e_atUpperLimit",C$99Ki[C$99Ki.e_equalLimits=3]="e_equalLimits";C$99Qi.prototype.SetZero=function(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this},C$99Qi.prototype.Set=function(C$99t,C$99e,C$99i){return this.linear.Copy(C$99t),this.angularA=C$99e,this.angularB=C$99i,this};var C$99Ki=C$99Qi;function C$99Qi(){this.linear=new C$99j,this.angularA=0,this.angularB=0}function C$99$i(C$99t){this.type=C$99H.b2JointType.e_unknownJoint,this.userData=null,this.collideConnected=!1,this.type=C$99t}var C$99tn=function(C$99t,C$99e){this.prev=null,this.next=null,this.joint=C$99t,this.other=C$99e},C$99en=(C$99in.prototype.GetType=function(){return this.m_type},C$99in.prototype.GetBodyA=function(){return this.m_bodyA},C$99in.prototype.GetBodyB=function(){return this.m_bodyB},C$99in.prototype.GetNext=function(){return this.m_next},C$99in.prototype.GetUserData=function(){return this.m_userData},C$99in.prototype.SetUserData=function(C$99t){this.m_userData=C$99t},C$99in.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},C$99in.prototype.GetCollideConnected=function(){return this.m_collideConnected},C$99in.prototype.Dump=function(C$99t){C$99t("// Dump is not supported for this joint type.\n")},C$99in.prototype.ShiftOrigin=function(C$99t){},C$99in);function C$99in(C$99t){this.m_type=C$99H.b2JointType.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=C$99t.type,this.m_edgeA=new C$99tn(this,C$99t.bodyB),this.m_edgeB=new C$99tn(this,C$99t.bodyA),this.m_bodyA=C$99t.bodyA,this.m_bodyB=C$99t.bodyB,this.m_collideConnected=C$99f(C$99t.collideConnected,!1),this.m_userData=C$99t.userData}C$99Di(C$99sn,C$99nn=C$99$i),C$99sn.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n){this.bodyA=C$99t,this.bodyB=C$99e,this.bodyA.GetLocalPoint(C$99i,this.localAnchorA),this.bodyB.GetLocalPoint(C$99n,this.localAnchorB),this.length=C$99j.DistanceVV(C$99i,C$99n),this.frequencyHz=0,this.dampingRatio=0};var C$99nn,C$99rn=C$99sn;function C$99sn(){var C$99t=C$99nn.call(this,C$99H.b2JointType.e_distanceJoint)||this;return C$99t.localAnchorA=new C$99j,C$99t.localAnchorB=new C$99j,C$99t.length=1,C$99t.frequencyHz=0,C$99t.dampingRatio=0,C$99t}C$99Di(C$99cn,C$99on=C$99en),C$99cn.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99cn.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99cn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e.x=C$99t*this.m_impulse*this.m_u.x,C$99e.y=C$99t*this.m_impulse*this.m_u.y,C$99e},C$99cn.prototype.GetReactionTorque=function(C$99t){return 0},C$99cn.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$99cn.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$99cn.prototype.SetLength=function(C$99t){this.m_length=C$99t},C$99cn.prototype.Length=function(){return this.m_length},C$99cn.prototype.SetFrequency=function(C$99t){this.m_frequencyHz=C$99t},C$99cn.prototype.GetFrequency=function(){return this.m_frequencyHz},C$99cn.prototype.SetDampingRatio=function(C$99t){this.m_dampingRatio=C$99t},C$99cn.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$99cn.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.length = %.15f;\n",this.m_length),C$99t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$99t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99cn.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e,C$99i=C$99t.positions[this.m_indexA].c,C$99n=C$99t.positions[this.m_indexA].a,C$99r=C$99t.velocities[this.m_indexA].v,C$99s=C$99t.velocities[this.m_indexA].w,C$99o=C$99t.positions[this.m_indexB].c,C$99a=C$99t.positions[this.m_indexB].a,C$99c=C$99t.velocities[this.m_indexB].v,C$99l=C$99t.velocities[this.m_indexB].w,C$99n=this.m_qA.SetAngle(C$99n),C$99a=this.m_qB.SetAngle(C$99a),C$99n=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99n,this.m_lalcA,this.m_rA),C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99a,this.m_lalcB,this.m_rB),this.m_u.x=C$99o.x+this.m_rB.x-C$99i.x-this.m_rA.x,this.m_u.y=C$99o.y+this.m_rB.y-C$99i.y-this.m_rA.y,this.m_u.Length()),C$99a=(.008<C$99n?this.m_u.SelfMul(1/C$99n):this.m_u.SetZero(),C$99j.CrossVV(this.m_rA,this.m_u)),C$99o=C$99j.CrossVV(this.m_rB,this.m_u),C$99i=this.m_invMassA+this.m_invIA*C$99a*C$99a+this.m_invMassB+this.m_invIB*C$99o*C$99o;this.m_mass=0!==C$99i?1/C$99i:0,0<this.m_frequencyHz?(C$99a=C$99n-this.m_length,C$99o=2*C$99m*this.m_frequencyHz,C$99n=2*this.m_mass*this.m_dampingRatio*C$99o,C$99o=this.m_mass*C$99o*C$99o,C$99e=C$99t.step.dt,this.m_gamma=C$99e*(C$99n+C$99e*C$99o),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=C$99a*C$99e*C$99o*this.m_gamma,C$99i+=this.m_gamma,this.m_mass=0!==C$99i?1/C$99i:0):(this.m_gamma=0,this.m_bias=0),C$99t.step.warmStarting?(this.m_impulse*=C$99t.step.dtRatio,C$99n=C$99j.MulSV(this.m_impulse,this.m_u,C$99cn.InitVelocityConstraints_s_P),C$99r.SelfMulSub(this.m_invMassA,C$99n),C$99s-=this.m_invIA*C$99j.CrossVV(this.m_rA,C$99n),C$99c.SelfMulAdd(this.m_invMassB,C$99n),C$99l+=this.m_invIB*C$99j.CrossVV(this.m_rB,C$99n)):this.m_impulse=0,C$99t.velocities[this.m_indexA].w=C$99s,C$99t.velocities[this.m_indexB].w=C$99l},C$99cn.prototype.SolveVelocityConstraints=function(C$99t){var C$99e=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99s=C$99j.AddVCrossSV(C$99e,C$99i,this.m_rA,C$99cn.SolveVelocityConstraints_s_vpA),C$99o=C$99j.AddVCrossSV(C$99n,C$99r,this.m_rB,C$99cn.SolveVelocityConstraints_s_vpB),C$99o=C$99j.DotVV(this.m_u,C$99j.SubVV(C$99o,C$99s,C$99j.s_t0)),C$99s=-this.m_mass*(C$99o+this.m_bias+this.m_gamma*this.m_impulse),C$99o=(this.m_impulse+=C$99s,C$99j.MulSV(C$99s,this.m_u,C$99cn.SolveVelocityConstraints_s_P));C$99e.SelfMulSub(this.m_invMassA,C$99o),C$99i-=this.m_invIA*C$99j.CrossVV(this.m_rA,C$99o),C$99n.SelfMulAdd(this.m_invMassB,C$99o),C$99r+=this.m_invIB*C$99j.CrossVV(this.m_rB,C$99o),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r},C$99cn.prototype.SolvePositionConstraints=function(C$99t){if(0<this.m_frequencyHz)return!0;var C$99e=C$99t.positions[this.m_indexA].c,C$99i=C$99t.positions[this.m_indexA].a,C$99n=C$99t.positions[this.m_indexB].c,C$99r=C$99t.positions[this.m_indexB].a,C$99s=this.m_qA.SetAngle(C$99i),C$99o=this.m_qB.SetAngle(C$99r),C$99s=C$99B.MulRV(C$99s,this.m_lalcA,this.m_rA),C$99o=C$99B.MulRV(C$99o,this.m_lalcB,this.m_rB),C$99a=this.m_u;C$99a.x=C$99n.x+C$99o.x-C$99e.x-C$99s.x,C$99a.y=C$99n.y+C$99o.y-C$99e.y-C$99s.y;var C$99c=C$99O(this.m_u.Normalize()-this.m_length,-.2,.2),C$99l=-this.m_mass*C$99c,C$99l=C$99j.MulSV(C$99l,C$99a,C$99cn.SolvePositionConstraints_s_P);return C$99e.SelfMulSub(this.m_invMassA,C$99l),C$99i-=this.m_invIA*C$99j.CrossVV(C$99s,C$99l),C$99n.SelfMulAdd(this.m_invMassB,C$99l),C$99r+=this.m_invIB*C$99j.CrossVV(C$99o,C$99l),C$99t.positions[this.m_indexA].a=C$99i,C$99t.positions[this.m_indexB].a=C$99r,C$99D(C$99c)<.008},C$99cn.InitVelocityConstraints_s_P=new C$99j,C$99cn.SolveVelocityConstraints_s_vpA=new C$99j,C$99cn.SolveVelocityConstraints_s_vpB=new C$99j,C$99cn.SolveVelocityConstraints_s_P=new C$99j,C$99cn.SolvePositionConstraints_s_P=new C$99j;var C$99on,C$99an=C$99cn;function C$99cn(C$99t){var C$99e=C$99on.call(this,C$99t)||this;return C$99e.m_frequencyHz=0,C$99e.m_dampingRatio=0,C$99e.m_bias=0,C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_gamma=0,C$99e.m_impulse=0,C$99e.m_length=0,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_u=new C$99j,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_mass=0,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_frequencyHz=C$99f(C$99t.frequencyHz,0),C$99e.m_dampingRatio=C$99f(C$99t.dampingRatio,0),C$99e.m_localAnchorA.Copy(C$99t.localAnchorA),C$99e.m_localAnchorB.Copy(C$99t.localAnchorB),C$99e.m_length=C$99t.length,C$99e}C$99Di(C$99un,C$99ln=C$99$i),C$99un.prototype.AddBody=function(C$99t){this.bodies.push(C$99t),1===this.bodies.length?this.bodyA=C$99t:2===this.bodies.length&&(this.bodyB=C$99t)};var C$99ln,C$99hn=C$99un;function C$99un(){var C$99t=C$99ln.call(this,C$99H.b2JointType.e_areaJoint)||this;return C$99t.bodies=[],C$99t.frequencyHz=0,C$99t.dampingRatio=0,C$99t}C$99Di(C$99fn,C$99_n=C$99en),C$99fn.prototype.GetAnchorA=function(C$99t){return C$99t},C$99fn.prototype.GetAnchorB=function(C$99t){return C$99t},C$99fn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e},C$99fn.prototype.GetReactionTorque=function(C$99t){return 0},C$99fn.prototype.SetFrequency=function(C$99t){this.m_frequencyHz=C$99t;for(var C$99e=0;C$99e<this.m_joints.length;++C$99e)this.m_joints[C$99e].SetFrequency(C$99t)},C$99fn.prototype.GetFrequency=function(){return this.m_frequencyHz},C$99fn.prototype.SetDampingRatio=function(C$99t){this.m_dampingRatio=C$99t;for(var C$99e=0;C$99e<this.m_joints.length;++C$99e)this.m_joints[C$99e].SetDampingRatio(C$99t)},C$99fn.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$99fn.prototype.Dump=function(C$99t){C$99t("Area joint dumping is not supported.\n")},C$99fn.prototype.InitVelocityConstraints=function(C$99t){for(var C$99e=0;C$99e<this.m_bodies.length;++C$99e){var C$99i=this.m_bodies[(C$99e+this.m_bodies.length-1)%this.m_bodies.length],C$99n=this.m_bodies[(C$99e+1)%this.m_bodies.length],C$99i=C$99t.positions[C$99i.m_islandIndex].c,C$99n=C$99t.positions[C$99n.m_islandIndex].c,C$99r=this.m_deltas[C$99e];C$99j.SubVV(C$99n,C$99i,C$99r)}if(C$99t.step.warmStarting){this.m_impulse*=C$99t.step.dtRatio;for(C$99e=0;C$99e<this.m_bodies.length;++C$99e){var C$99s=this.m_bodies[C$99e],C$99o=C$99t.velocities[C$99s.m_islandIndex].v,C$99r=this.m_deltas[C$99e];C$99o.x+=C$99s.m_invMass*C$99r.y*.5*this.m_impulse,C$99o.y+=C$99s.m_invMass*-C$99r.x*.5*this.m_impulse}}else this.m_impulse=0},C$99fn.prototype.SolveVelocityConstraints=function(C$99t){for(var C$99e=0,C$99i=0,C$99n=0;C$99n<this.m_bodies.length;++C$99n){var C$99r=this.m_bodies[C$99n],C$99s=C$99t.velocities[C$99r.m_islandIndex].v;C$99e+=(C$99a=this.m_deltas[C$99n]).LengthSquared()/C$99r.GetMass(),C$99i+=C$99j.CrossVV(C$99s,C$99a)}var C$99o=-2*C$99i/C$99e;this.m_impulse+=C$99o;for(C$99n=0;C$99n<this.m_bodies.length;++C$99n){var C$99r=this.m_bodies[C$99n],C$99s=C$99t.velocities[C$99r.m_islandIndex].v,C$99a=this.m_deltas[C$99n];C$99s.x+=C$99r.m_invMass*C$99a.y*.5*C$99o,C$99s.y+=C$99r.m_invMass*-C$99a.x*.5*C$99o}},C$99fn.prototype.SolvePositionConstraints=function(C$99t){for(var C$99e=0,C$99i=0,C$99n=0;C$99n<this.m_bodies.length;++C$99n){var C$99r=this.m_bodies[C$99n],C$99s=this.m_bodies[(C$99n+1)%this.m_bodies.length],C$99o=C$99t.positions[C$99r.m_islandIndex].c,C$99s=C$99t.positions[C$99s.m_islandIndex].c,C$99a=(C$99c=C$99j.SubVV(C$99s,C$99o,this.m_delta)).Length();C$99a<C$99M&&(C$99a=1),this.m_normals[C$99n].x=C$99c.y/C$99a,this.m_normals[C$99n].y=-C$99c.x/C$99a,C$99e+=C$99a,C$99i+=C$99j.CrossVV(C$99o,C$99s)}for(var C$99h=.5*(this.m_targetArea-(C$99i*=.5))/C$99e,C$99u=!0,C$99n=0;C$99n<this.m_bodies.length;++C$99n){var C$99c,C$99r=this.m_bodies[C$99n],C$99o=C$99t.positions[C$99r.m_islandIndex].c,C$99l=(C$99n+1)%this.m_bodies.length,C$99l=((C$99c=C$99j.AddVV(this.m_normals[C$99n],this.m_normals[C$99l],this.m_delta)).SelfMul(C$99h),C$99c.LengthSquared());C$99l>C$99_(.2)&&C$99c.SelfMul(.2/C$99Y(C$99l)),64e-6<C$99l&&(C$99u=!1),C$99o.x+=C$99c.x,C$99o.y+=C$99c.y}return C$99u};var C$99_n,C$99dn=C$99fn;function C$99fn(C$99t){var C$99e=C$99_n.call(this,C$99t)||this,C$99i=(C$99e.m_frequencyHz=0,C$99e.m_dampingRatio=0,C$99e.m_impulse=0,C$99e.m_targetArea=0,C$99e.m_bodies=C$99t.bodies,C$99e.m_frequencyHz=C$99f(C$99t.frequencyHz,0),C$99e.m_dampingRatio=C$99f(C$99t.dampingRatio,0),C$99e.m_targetLengths=C$99h(C$99t.bodies.length),C$99e.m_normals=C$99j.MakeArray(C$99t.bodies.length),C$99e.m_joints=[],C$99e.m_deltas=C$99j.MakeArray(C$99t.bodies.length),C$99e.m_delta=new C$99j,new C$99rn);C$99i.frequencyHz=C$99e.m_frequencyHz,C$99i.dampingRatio=C$99e.m_dampingRatio;for(var C$99n=C$99e.m_targetArea=0;C$99n<C$99e.m_bodies.length;++C$99n){var C$99r=C$99e.m_bodies[C$99n],C$99s=C$99e.m_bodies[(C$99n+1)%C$99e.m_bodies.length],C$99o=C$99r.GetWorldCenter(),C$99a=C$99s.GetWorldCenter();C$99e.m_targetLengths[C$99n]=C$99j.DistanceVV(C$99o,C$99a),C$99e.m_targetArea+=C$99j.CrossVV(C$99o,C$99a),C$99i.Initialize(C$99r,C$99s,C$99o,C$99a),C$99e.m_joints[C$99n]=C$99r.GetWorld().CreateJoint(C$99i)}return C$99e.m_targetArea*=.5,C$99e}C$99Di(C$99yn,C$99pn=C$99$i),C$99yn.prototype.Initialize=function(C$99t,C$99e,C$99i){this.bodyA=C$99t,this.bodyB=C$99e,this.bodyA.GetLocalPoint(C$99i,this.localAnchorA),this.bodyB.GetLocalPoint(C$99i,this.localAnchorB)};var C$99pn,C$99mn=C$99yn;function C$99yn(){var C$99t=C$99pn.call(this,C$99H.b2JointType.e_frictionJoint)||this;return C$99t.localAnchorA=new C$99j,C$99t.localAnchorB=new C$99j,C$99t.maxForce=0,C$99t.maxTorque=0,C$99t}C$99Di(C$99xn,C$99gn=C$99en),C$99xn.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e=C$99t.positions[this.m_indexA].a,C$99h=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.positions[this.m_indexB].a,C$99u=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99e=this.m_qA.SetAngle(C$99e),C$99n=this.m_qB.SetAngle(C$99n),C$99e=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99e,this.m_lalcA,this.m_rA)),C$99n=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99n,this.m_lalcB,this.m_rB)),C$99s=this.m_invMassA,C$99o=this.m_invMassB,C$99a=this.m_invIA,C$99c=this.m_invIB,C$99l=this.m_K;C$99l.ex.x=C$99s+C$99o+C$99a*C$99e.y*C$99e.y+C$99c*C$99n.y*C$99n.y,C$99l.ex.y=-C$99a*C$99e.x*C$99e.y-C$99c*C$99n.x*C$99n.y,C$99l.ey.x=C$99l.ex.y,C$99l.ey.y=C$99s+C$99o+C$99a*C$99e.x*C$99e.x+C$99c*C$99n.x*C$99n.x,C$99l.GetInverse(this.m_linearMass),this.m_angularMass=C$99a+C$99c,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),C$99t.step.warmStarting?(this.m_linearImpulse.SelfMul(C$99t.step.dtRatio),this.m_angularImpulse*=C$99t.step.dtRatio,C$99e=this.m_linearImpulse,C$99h.SelfMulSub(C$99s,C$99e),C$99i-=C$99a*(C$99j.CrossVV(this.m_rA,C$99e)+this.m_angularImpulse),C$99u.SelfMulAdd(C$99o,C$99e),C$99r+=C$99c*(C$99j.CrossVV(this.m_rB,C$99e)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r},C$99xn.prototype.SolveVelocityConstraints=function(C$99t){var C$99e=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99h=this.m_invMassA,C$99u=this.m_invMassB,C$99s=this.m_invIA,C$99o=this.m_invIB,C$99_=C$99t.step.dt,C$99a=-this.m_angularMass*(C$99r-C$99i),C$99c=this.m_angularImpulse,C$99l=C$99_*this.m_maxTorque,C$99c=(this.m_angularImpulse=C$99O(this.m_angularImpulse+C$99a,-C$99l,C$99l),C$99i-=C$99s*(C$99a=this.m_angularImpulse-C$99c),C$99j.SubVV(C$99j.AddVCrossSV(C$99n,C$99r+=C$99o*C$99a,this.m_rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99e,C$99i,this.m_rA,C$99j.s_t1),C$99xn.SolveVelocityConstraints_s_Cdot_v2)),C$99a=C$99F.MulMV(this.m_linearMass,C$99c,C$99xn.SolveVelocityConstraints_s_impulseV).SelfNeg(),C$99c=C$99xn.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse),C$99l=(this.m_linearImpulse.SelfAdd(C$99a),C$99_*this.m_maxForce);this.m_linearImpulse.LengthSquared()>C$99l*C$99l&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(C$99l)),C$99j.SubVV(this.m_linearImpulse,C$99c,C$99a),C$99e.SelfMulSub(C$99h,C$99a),C$99i-=C$99s*C$99j.CrossVV(this.m_rA,C$99a),C$99n.SelfMulAdd(C$99u,C$99a),C$99r+=C$99o*C$99j.CrossVV(this.m_rB,C$99a),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r},C$99xn.prototype.SolvePositionConstraints=function(C$99t){return!0},C$99xn.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99xn.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99xn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e.x=C$99t*this.m_linearImpulse.x,C$99e.y=C$99t*this.m_linearImpulse.y,C$99e},C$99xn.prototype.GetReactionTorque=function(C$99t){return C$99t*this.m_angularImpulse},C$99xn.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$99xn.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$99xn.prototype.SetMaxForce=function(C$99t){this.m_maxForce=C$99t},C$99xn.prototype.GetMaxForce=function(){return this.m_maxForce},C$99xn.prototype.SetMaxTorque=function(C$99t){this.m_maxTorque=C$99t},C$99xn.prototype.GetMaxTorque=function(){return this.m_maxTorque},C$99xn.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.maxForce = %.15f;\n",this.m_maxForce),C$99t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99xn.SolveVelocityConstraints_s_Cdot_v2=new C$99j,C$99xn.SolveVelocityConstraints_s_impulseV=new C$99j,C$99xn.SolveVelocityConstraints_s_oldImpulseV=new C$99j;var C$99gn,C$99vn=C$99xn;function C$99xn(C$99t){var C$99e=C$99gn.call(this,C$99t)||this;return C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_linearImpulse=new C$99j,C$99e.m_angularImpulse=0,C$99e.m_maxForce=0,C$99e.m_maxTorque=0,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_linearMass=new C$99F,C$99e.m_angularMass=0,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_K=new C$99F,C$99e.m_localAnchorA.Copy(C$99t.localAnchorA),C$99e.m_localAnchorB.Copy(C$99t.localAnchorB),C$99e.m_linearImpulse.SetZero(),C$99e.m_maxForce=C$99f(C$99t.maxForce,0),C$99e.m_maxTorque=C$99f(C$99t.maxTorque,0),C$99e.m_linearMass.SetZero(),C$99e}C$99Di(C$99Cn,C$99bn=C$99$i);var C$99bn,C$99An=C$99Cn;function C$99Cn(){var C$99t=C$99bn.call(this,C$99H.b2JointType.e_gearJoint)||this;return C$99t.ratio=1,C$99t}C$99Di(C$99wn,C$99Sn=C$99en),C$99wn.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var C$99e,C$99i=C$99t.positions[this.m_indexA].a,C$99h=C$99t.velocities[this.m_indexA].v,C$99n=C$99t.velocities[this.m_indexA].w,C$99r=C$99t.positions[this.m_indexB].a,C$99u=C$99t.velocities[this.m_indexB].v,C$99s=C$99t.velocities[this.m_indexB].w,C$99o=C$99t.positions[this.m_indexC].a,C$99_=C$99t.velocities[this.m_indexC].v,C$99a=C$99t.velocities[this.m_indexC].w,C$99c=C$99t.positions[this.m_indexD].a,C$99d=C$99t.velocities[this.m_indexD].v,C$99l=C$99t.velocities[this.m_indexD].w,C$99i=this.m_qA.SetAngle(C$99i),C$99r=this.m_qB.SetAngle(C$99r),C$99o=this.m_qC.SetAngle(C$99o),C$99c=this.m_qD.SetAngle(C$99c);this.m_mass=0,this.m_typeA===C$99H.b2JointType.e_revoluteJoint?(this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC):(C$99e=C$99B.MulRV(C$99o,this.m_localAxisC,C$99wn.InitVelocityConstraints_s_u),C$99j.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC),C$99o=C$99B.MulRV(C$99o,this.m_lalcC,C$99wn.InitVelocityConstraints_s_rC),C$99j.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA),C$99i=C$99B.MulRV(C$99i,this.m_lalcA,C$99wn.InitVelocityConstraints_s_rA),this.m_JvAC.Copy(C$99e),this.m_JwC=C$99j.CrossVV(C$99o,C$99e),this.m_JwA=C$99j.CrossVV(C$99i,C$99e),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA),this.m_typeB===C$99H.b2JointType.e_revoluteJoint?(this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD)):(C$99e=C$99B.MulRV(C$99c,this.m_localAxisD,C$99wn.InitVelocityConstraints_s_u),C$99j.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD),C$99o=C$99B.MulRV(C$99c,this.m_lalcD,C$99wn.InitVelocityConstraints_s_rD),C$99j.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB),C$99i=C$99B.MulRV(C$99r,this.m_lalcB,C$99wn.InitVelocityConstraints_s_rB),C$99j.MulSV(this.m_ratio,C$99e,this.m_JvBD),this.m_JwD=this.m_ratio*C$99j.CrossVV(C$99o,C$99e),this.m_JwB=this.m_ratio*C$99j.CrossVV(C$99i,C$99e),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB),this.m_mass=0<this.m_mass?1/this.m_mass:0,C$99t.step.warmStarting?(C$99h.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),C$99n+=this.m_iA*this.m_impulse*this.m_JwA,C$99u.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),C$99s+=this.m_iB*this.m_impulse*this.m_JwB,C$99_.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),C$99a-=this.m_iC*this.m_impulse*this.m_JwC,C$99d.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),C$99l-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,C$99t.velocities[this.m_indexA].w=C$99n,C$99t.velocities[this.m_indexB].w=C$99s,C$99t.velocities[this.m_indexC].w=C$99a,C$99t.velocities[this.m_indexD].w=C$99l},C$99wn.prototype.SolveVelocityConstraints=function(C$99t){var C$99e=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99s=C$99t.velocities[this.m_indexC].v,C$99o=C$99t.velocities[this.m_indexC].w,C$99a=C$99t.velocities[this.m_indexD].v,C$99c=C$99t.velocities[this.m_indexD].w,C$99l=C$99j.DotVV(this.m_JvAC,C$99j.SubVV(C$99e,C$99s,C$99j.s_t0))+C$99j.DotVV(this.m_JvBD,C$99j.SubVV(C$99n,C$99a,C$99j.s_t0)),C$99l=(C$99l+=this.m_JwA*C$99i-this.m_JwC*C$99o+(this.m_JwB*C$99r-this.m_JwD*C$99c),-this.m_mass*C$99l);this.m_impulse+=C$99l,C$99e.SelfMulAdd(this.m_mA*C$99l,this.m_JvAC),C$99i+=this.m_iA*C$99l*this.m_JwA,C$99n.SelfMulAdd(this.m_mB*C$99l,this.m_JvBD),C$99r+=this.m_iB*C$99l*this.m_JwB,C$99s.SelfMulSub(this.m_mC*C$99l,this.m_JvAC),C$99o-=this.m_iC*C$99l*this.m_JwC,C$99a.SelfMulSub(this.m_mD*C$99l,this.m_JvBD),C$99c-=this.m_iD*C$99l*this.m_JwD,C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r,C$99t.velocities[this.m_indexC].w=C$99o,C$99t.velocities[this.m_indexD].w=C$99c},C$99wn.prototype.SolvePositionConstraints=function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99h=C$99t.positions[this.m_indexA].c,C$99u=C$99t.positions[this.m_indexA].a,C$99_=C$99t.positions[this.m_indexB].c,C$99d=C$99t.positions[this.m_indexB].a,C$99f=C$99t.positions[this.m_indexC].c,C$99p=C$99t.positions[this.m_indexC].a,C$99m=C$99t.positions[this.m_indexD].c,C$99y=C$99t.positions[this.m_indexD].a,C$99o=this.m_qA.SetAngle(C$99u),C$99g=this.m_qB.SetAngle(C$99d),C$99a=this.m_qC.SetAngle(C$99p),C$99v=this.m_qD.SetAngle(C$99y),C$99x=this.m_JvAC,C$99b=this.m_JvBD,C$99c=0,C$99v=(C$99o=this.m_typeA===C$99H.b2JointType.e_revoluteJoint?(C$99x.SetZero(),C$99n=C$99e=1,C$99c+=this.m_iA+this.m_iC,C$99u-C$99p-this.m_referenceAngleA):(C$99s=C$99B.MulRV(C$99a,this.m_localAxisC,C$99wn.SolvePositionConstraints_s_u),C$99l=C$99B.MulRV(C$99a,this.m_lalcC,C$99wn.SolvePositionConstraints_s_rC),C$99o=C$99B.MulRV(C$99o,this.m_lalcA,C$99wn.SolvePositionConstraints_s_rA),C$99x.Copy(C$99s),C$99n=C$99j.CrossVV(C$99l,C$99s),C$99e=C$99j.CrossVV(C$99o,C$99s),C$99c+=this.m_mC+this.m_mA+this.m_iC*C$99n*C$99n+this.m_iA*C$99e*C$99e,C$99l=this.m_lalcC,C$99a=C$99B.MulTRV(C$99a,C$99j.AddVV(C$99o,C$99j.SubVV(C$99h,C$99f,C$99j.s_t0),C$99j.s_t0),C$99j.s_t0),C$99j.DotVV(C$99j.SubVV(C$99a,C$99l,C$99j.s_t0),this.m_localAxisC)),C$99s=this.m_typeB===C$99H.b2JointType.e_revoluteJoint?(C$99b.SetZero(),C$99i=this.m_ratio,C$99r=this.m_ratio,C$99c+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),C$99d-C$99y-this.m_referenceAngleB):(C$99s=C$99B.MulRV(C$99v,this.m_localAxisD,C$99wn.SolvePositionConstraints_s_u),C$99a=C$99B.MulRV(C$99v,this.m_lalcD,C$99wn.SolvePositionConstraints_s_rD),C$99l=C$99B.MulRV(C$99g,this.m_lalcB,C$99wn.SolvePositionConstraints_s_rB),C$99j.MulSV(this.m_ratio,C$99s,C$99b),C$99r=this.m_ratio*C$99j.CrossVV(C$99a,C$99s),C$99i=this.m_ratio*C$99j.CrossVV(C$99l,C$99s),C$99c+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*C$99r*C$99r+this.m_iB*C$99i*C$99i,C$99g=this.m_lalcD,C$99a=C$99B.MulTRV(C$99v,C$99j.AddVV(C$99l,C$99j.SubVV(C$99_,C$99m,C$99j.s_t0),C$99j.s_t0),C$99j.s_t0),C$99j.DotVV(C$99j.SubVV(C$99a,C$99g,C$99j.s_t0),this.m_localAxisD)),C$99o+this.m_ratio*C$99s-this.m_constant),C$99l=0<C$99c?-C$99v/C$99c:0;return C$99h.SelfMulAdd(this.m_mA*C$99l,C$99x),C$99u+=this.m_iA*C$99l*C$99e,C$99_.SelfMulAdd(this.m_mB*C$99l,C$99b),C$99d+=this.m_iB*C$99l*C$99i,C$99f.SelfMulSub(this.m_mC*C$99l,C$99x),C$99p-=this.m_iC*C$99l*C$99n,C$99m.SelfMulSub(this.m_mD*C$99l,C$99b),C$99y-=this.m_iD*C$99l*C$99r,C$99t.positions[this.m_indexA].a=C$99u,C$99t.positions[this.m_indexB].a=C$99d,C$99t.positions[this.m_indexC].a=C$99p,C$99t.positions[this.m_indexD].a=C$99y,!0},C$99wn.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99wn.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99wn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99j.MulSV(C$99t*this.m_impulse,this.m_JvAC,C$99e)},C$99wn.prototype.GetReactionTorque=function(C$99t){return C$99t*this.m_impulse*this.m_JwA},C$99wn.prototype.GetJoint1=function(){return this.m_joint1},C$99wn.prototype.GetJoint2=function(){return this.m_joint2},C$99wn.prototype.GetRatio=function(){return this.m_ratio},C$99wn.prototype.SetRatio=function(C$99t){this.m_ratio=C$99t},C$99wn.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex,C$99n=this.m_joint1.m_index,C$99r=this.m_joint2.m_index;C$99t("  const jd: b2GearJointDef = new b2GearJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.joint1 = joints[%d];\n",C$99n),C$99t("  jd.joint2 = joints[%d];\n",C$99r),C$99t("  jd.ratio = %.15f;\n",this.m_ratio),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99wn.InitVelocityConstraints_s_u=new C$99j,C$99wn.InitVelocityConstraints_s_rA=new C$99j,C$99wn.InitVelocityConstraints_s_rB=new C$99j,C$99wn.InitVelocityConstraints_s_rC=new C$99j,C$99wn.InitVelocityConstraints_s_rD=new C$99j,C$99wn.SolvePositionConstraints_s_u=new C$99j,C$99wn.SolvePositionConstraints_s_rA=new C$99j,C$99wn.SolvePositionConstraints_s_rB=new C$99j,C$99wn.SolvePositionConstraints_s_rC=new C$99j,C$99wn.SolvePositionConstraints_s_rD=new C$99j;var C$99Sn,C$99Tn=C$99wn;function C$99wn(C$99t){var C$99e,C$99i,C$99n=C$99Sn.call(this,C$99t)||this,C$99r=(C$99n.m_typeA=C$99H.b2JointType.e_unknownJoint,C$99n.m_typeB=C$99H.b2JointType.e_unknownJoint,C$99n.m_localAnchorA=new C$99j,C$99n.m_localAnchorB=new C$99j,C$99n.m_localAnchorC=new C$99j,C$99n.m_localAnchorD=new C$99j,C$99n.m_localAxisC=new C$99j,C$99n.m_localAxisD=new C$99j,C$99n.m_referenceAngleA=0,C$99n.m_referenceAngleB=0,C$99n.m_constant=0,C$99n.m_ratio=0,C$99n.m_impulse=0,C$99n.m_indexA=0,C$99n.m_indexB=0,C$99n.m_indexC=0,C$99n.m_indexD=0,C$99n.m_lcA=new C$99j,C$99n.m_lcB=new C$99j,C$99n.m_lcC=new C$99j,C$99n.m_lcD=new C$99j,C$99n.m_mA=0,C$99n.m_mB=0,C$99n.m_mC=0,C$99n.m_mD=0,C$99n.m_iA=0,C$99n.m_iB=0,C$99n.m_iC=0,C$99n.m_iD=0,C$99n.m_JvAC=new C$99j,C$99n.m_JvBD=new C$99j,C$99n.m_JwA=0,C$99n.m_JwB=0,C$99n.m_JwC=0,C$99n.m_JwD=0,C$99n.m_mass=0,C$99n.m_qA=new C$99B,C$99n.m_qB=new C$99B,C$99n.m_qC=new C$99B,C$99n.m_qD=new C$99B,C$99n.m_lalcA=new C$99j,C$99n.m_lalcB=new C$99j,C$99n.m_lalcC=new C$99j,C$99n.m_lalcD=new C$99j,C$99n.m_joint1=C$99t.joint1,C$99n.m_joint2=C$99t.joint2,C$99n.m_typeA=C$99n.m_joint1.GetType(),C$99n.m_typeB=C$99n.m_joint2.GetType(),C$99n.m_bodyC=C$99n.m_joint1.GetBodyA(),C$99n.m_bodyA=C$99n.m_joint1.GetBodyB(),C$99n.m_bodyA.m_xf),C$99s=C$99n.m_bodyA.m_sweep.a,C$99o=C$99n.m_bodyC.m_xf,C$99a=C$99n.m_bodyC.m_sweep.a,C$99o=(C$99r=C$99n.m_typeA===C$99H.b2JointType.e_revoluteJoint?(C$99i=C$99t.joint1,C$99n.m_localAnchorC.Copy(C$99i.m_localAnchorA),C$99n.m_localAnchorA.Copy(C$99i.m_localAnchorB),C$99n.m_referenceAngleA=C$99i.m_referenceAngle,C$99n.m_localAxisC.SetZero(),C$99s-C$99a-C$99n.m_referenceAngleA):(C$99e=C$99t.joint1,C$99n.m_localAnchorC.Copy(C$99e.m_localAnchorA),C$99n.m_localAnchorA.Copy(C$99e.m_localAnchorB),C$99n.m_referenceAngleA=C$99e.m_referenceAngle,C$99n.m_localAxisC.Copy(C$99e.m_localXAxisA),C$99s=C$99n.m_localAnchorC,C$99a=C$99B.MulTRV(C$99o.q,C$99j.AddVV(C$99B.MulRV(C$99r.q,C$99n.m_localAnchorA,C$99j.s_t0),C$99j.SubVV(C$99r.p,C$99o.p,C$99j.s_t1),C$99j.s_t0),C$99j.s_t0),C$99j.DotVV(C$99j.SubVV(C$99a,C$99s,C$99j.s_t0),C$99n.m_localAxisC)),C$99n.m_bodyD=C$99n.m_joint2.GetBodyA(),C$99n.m_bodyB=C$99n.m_joint2.GetBodyB(),C$99n.m_bodyB.m_xf),C$99a=C$99n.m_bodyB.m_sweep.a,C$99s=C$99n.m_bodyD.m_xf,C$99c=C$99n.m_bodyD.m_sweep.a;return C$99c=C$99n.m_typeB===C$99H.b2JointType.e_revoluteJoint?(C$99i=C$99t.joint2,C$99n.m_localAnchorD.Copy(C$99i.m_localAnchorA),C$99n.m_localAnchorB.Copy(C$99i.m_localAnchorB),C$99n.m_referenceAngleB=C$99i.m_referenceAngle,C$99n.m_localAxisD.SetZero(),C$99a-C$99c-C$99n.m_referenceAngleB):(C$99e=C$99t.joint2,C$99n.m_localAnchorD.Copy(C$99e.m_localAnchorA),C$99n.m_localAnchorB.Copy(C$99e.m_localAnchorB),C$99n.m_referenceAngleB=C$99e.m_referenceAngle,C$99n.m_localAxisD.Copy(C$99e.m_localXAxisA),C$99i=C$99n.m_localAnchorD,C$99a=C$99B.MulTRV(C$99s.q,C$99j.AddVV(C$99B.MulRV(C$99o.q,C$99n.m_localAnchorB,C$99j.s_t0),C$99j.SubVV(C$99o.p,C$99s.p,C$99j.s_t1),C$99j.s_t0),C$99j.s_t0),C$99j.DotVV(C$99j.SubVV(C$99a,C$99i,C$99j.s_t0),C$99n.m_localAxisD)),C$99n.m_ratio=C$99f(C$99t.ratio,1),C$99n.m_constant=C$99r+C$99n.m_ratio*C$99c,C$99n.m_impulse=0,C$99n}C$99Di(C$99In,C$99En=C$99$i),C$99In.prototype.Initialize=function(C$99t,C$99e){this.bodyA=C$99t,this.bodyB=C$99e,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);C$99t=this.bodyA.GetAngle(),C$99e=this.bodyB.GetAngle();this.angularOffset=C$99e-C$99t};var C$99En,C$99Mn=C$99In;function C$99In(){var C$99t=C$99En.call(this,C$99H.b2JointType.e_motorJoint)||this;return C$99t.linearOffset=new C$99j(0,0),C$99t.angularOffset=0,C$99t.maxForce=1,C$99t.maxTorque=1,C$99t.correctionFactor=.3,C$99t}C$99Di(C$99Pn,C$99Bn=C$99en),C$99Pn.prototype.GetAnchorA=function(C$99t){var C$99e=this.m_bodyA.GetPosition();return C$99t.x=C$99e.x,C$99t.y=C$99e.y,C$99t},C$99Pn.prototype.GetAnchorB=function(C$99t){var C$99e=this.m_bodyB.GetPosition();return C$99t.x=C$99e.x,C$99t.y=C$99e.y,C$99t},C$99Pn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99j.MulSV(C$99t,this.m_linearImpulse,C$99e)},C$99Pn.prototype.GetReactionTorque=function(C$99t){return C$99t*this.m_angularImpulse},C$99Pn.prototype.SetLinearOffset=function(C$99t){C$99j.IsEqualToV(C$99t,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(C$99t))},C$99Pn.prototype.GetLinearOffset=function(){return this.m_linearOffset},C$99Pn.prototype.SetAngularOffset=function(C$99t){C$99t!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=C$99t)},C$99Pn.prototype.GetAngularOffset=function(){return this.m_angularOffset},C$99Pn.prototype.SetMaxForce=function(C$99t){this.m_maxForce=C$99t},C$99Pn.prototype.GetMaxForce=function(){return this.m_maxForce},C$99Pn.prototype.SetMaxTorque=function(C$99t){this.m_maxTorque=C$99t},C$99Pn.prototype.GetMaxTorque=function(){return this.m_maxTorque},C$99Pn.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99h=C$99t.positions[this.m_indexA].c,C$99e=C$99t.positions[this.m_indexA].a,C$99u=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99_=C$99t.positions[this.m_indexB].c,C$99d=C$99t.positions[this.m_indexB].a,C$99f=C$99t.velocities[this.m_indexB].v,C$99p=C$99t.velocities[this.m_indexB].w,C$99n=this.m_qA.SetAngle(C$99e),C$99r=this.m_qB.SetAngle(C$99d),C$99n=C$99B.MulRV(C$99n,C$99j.SubVV(this.m_linearOffset,this.m_localCenterA,C$99j.s_t0),this.m_rA),C$99r=C$99B.MulRV(C$99r,C$99j.NegV(this.m_localCenterB,C$99j.s_t0),this.m_rB),C$99s=this.m_invMassA,C$99o=this.m_invMassB,C$99a=this.m_invIA,C$99c=this.m_invIB,C$99l=this.m_K;C$99l.ex.x=C$99s+C$99o+C$99a*C$99n.y*C$99n.y+C$99c*C$99r.y*C$99r.y,C$99l.ex.y=-C$99a*C$99n.x*C$99n.y-C$99c*C$99r.x*C$99r.y,C$99l.ey.x=C$99l.ex.y,C$99l.ey.y=C$99s+C$99o+C$99a*C$99n.x*C$99n.x+C$99c*C$99r.x*C$99r.x,C$99l.GetInverse(this.m_linearMass),this.m_angularMass=C$99a+C$99c,0<this.m_angularMass&&(this.m_angularMass=1/this.m_angularMass),C$99j.SubVV(C$99j.AddVV(C$99_,C$99r,C$99j.s_t0),C$99j.AddVV(C$99h,C$99n,C$99j.s_t1),this.m_linearError),this.m_angularError=C$99d-C$99e-this.m_angularOffset,C$99t.step.warmStarting?(this.m_linearImpulse.SelfMul(C$99t.step.dtRatio),this.m_angularImpulse*=C$99t.step.dtRatio,C$99l=this.m_linearImpulse,C$99u.SelfMulSub(C$99s,C$99l),C$99i-=C$99a*(C$99j.CrossVV(C$99n,C$99l)+this.m_angularImpulse),C$99f.SelfMulAdd(C$99o,C$99l),C$99p+=C$99c*(C$99j.CrossVV(C$99r,C$99l)+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99p},C$99Pn.prototype.SolveVelocityConstraints=function(C$99t){var C$99e=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99h=this.m_invMassA,C$99u=this.m_invMassB,C$99s=this.m_invIA,C$99_=this.m_invIB,C$99d=C$99t.step.dt,C$99o=C$99t.step.inv_dt,C$99a=C$99r-C$99i+C$99o*this.m_correctionFactor*this.m_angularError,C$99a=-this.m_angularMass*C$99a,C$99c=this.m_angularImpulse,C$99l=C$99d*this.m_maxTorque,C$99c=(this.m_angularImpulse=C$99O(this.m_angularImpulse+C$99a,-C$99l,C$99l),C$99i-=C$99s*(C$99a=this.m_angularImpulse-C$99c),this.m_rA),C$99f=this.m_rB,C$99a=C$99j.AddVV(C$99j.SubVV(C$99j.AddVV(C$99n,C$99j.CrossSV(C$99r+=C$99_*C$99a,C$99f,C$99j.s_t0),C$99j.s_t0),C$99j.AddVV(C$99e,C$99j.CrossSV(C$99i,C$99c,C$99j.s_t1),C$99j.s_t1),C$99j.s_t2),C$99j.MulSV(C$99o*this.m_correctionFactor,this.m_linearError,C$99j.s_t3),C$99Pn.SolveVelocityConstraints_s_Cdot_v2),C$99o=C$99F.MulMV(this.m_linearMass,C$99a,C$99Pn.SolveVelocityConstraints_s_impulse_v2).SelfNeg(),C$99a=C$99Pn.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse),C$99l=(this.m_linearImpulse.SelfAdd(C$99o),C$99d*this.m_maxForce);this.m_linearImpulse.LengthSquared()>C$99l*C$99l&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(C$99l)),C$99j.SubVV(this.m_linearImpulse,C$99a,C$99o),C$99e.SelfMulSub(C$99h,C$99o),C$99i-=C$99s*C$99j.CrossVV(C$99c,C$99o),C$99n.SelfMulAdd(C$99u,C$99o),C$99r+=C$99_*C$99j.CrossVV(C$99f,C$99o),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r},C$99Pn.prototype.SolvePositionConstraints=function(C$99t){return!0},C$99Pn.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),C$99t("  jd.angularOffset = %.15f;\n",this.m_angularOffset),C$99t("  jd.maxForce = %.15f;\n",this.m_maxForce),C$99t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),C$99t("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99Pn.SolveVelocityConstraints_s_Cdot_v2=new C$99j,C$99Pn.SolveVelocityConstraints_s_impulse_v2=new C$99j,C$99Pn.SolveVelocityConstraints_s_oldImpulse_v2=new C$99j;var C$99Bn,C$99Rn=C$99Pn;function C$99Pn(C$99t){var C$99e=C$99Bn.call(this,C$99t)||this;return C$99e.m_linearOffset=new C$99j,C$99e.m_angularOffset=0,C$99e.m_linearImpulse=new C$99j,C$99e.m_angularImpulse=0,C$99e.m_maxForce=0,C$99e.m_maxTorque=0,C$99e.m_correctionFactor=.3,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_linearError=new C$99j,C$99e.m_angularError=0,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_linearMass=new C$99F,C$99e.m_angularMass=0,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_K=new C$99F,C$99e.m_linearOffset.Copy(C$99f(C$99t.linearOffset,C$99j.ZERO)),C$99e.m_linearImpulse.SetZero(),C$99e.m_maxForce=C$99f(C$99t.maxForce,0),C$99e.m_maxTorque=C$99f(C$99t.maxTorque,0),C$99e.m_correctionFactor=C$99f(C$99t.correctionFactor,.3),C$99e}C$99Di(C$99Vn,C$99Dn=C$99$i);var C$99Dn,C$99Ln=C$99Vn;function C$99Vn(){var C$99t=C$99Dn.call(this,C$99H.b2JointType.e_mouseJoint)||this;return C$99t.target=new C$99j,C$99t.maxForce=0,C$99t.frequencyHz=5,C$99t.dampingRatio=.7,C$99t}C$99Di(C$99Nn,C$99On=C$99en),C$99Nn.prototype.SetTarget=function(C$99t){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(C$99t)},C$99Nn.prototype.GetTarget=function(){return this.m_targetA},C$99Nn.prototype.SetMaxForce=function(C$99t){this.m_maxForce=C$99t},C$99Nn.prototype.GetMaxForce=function(){return this.m_maxForce},C$99Nn.prototype.SetFrequency=function(C$99t){this.m_frequencyHz=C$99t},C$99Nn.prototype.GetFrequency=function(){return this.m_frequencyHz},C$99Nn.prototype.SetDampingRatio=function(C$99t){this.m_dampingRatio=C$99t},C$99Nn.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$99Nn.prototype.InitVelocityConstraints=function(C$99t){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var C$99e=C$99t.positions[this.m_indexB].c,C$99i=C$99t.positions[this.m_indexB].a,C$99n=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99i=this.m_qB.SetAngle(C$99i),C$99s=this.m_bodyB.GetMass(),C$99o=2*C$99m*this.m_frequencyHz,C$99a=2*C$99s*this.m_dampingRatio*C$99o,C$99s=C$99s*(C$99o*C$99o),C$99o=C$99t.step.dt,C$99a=(this.m_gamma=C$99o*(C$99a+C$99o*C$99s),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=C$99o*C$99s*this.m_gamma,C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99i,this.m_lalcB,this.m_rB),this.m_K);C$99a.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,C$99a.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,C$99a.ey.x=C$99a.ex.y,C$99a.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,C$99a.GetInverse(this.m_mass),this.m_C.x=C$99e.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=C$99e.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),C$99r*=.98,C$99t.step.warmStarting?(this.m_impulse.SelfMul(C$99t.step.dtRatio),C$99n.x+=this.m_invMassB*this.m_impulse.x,C$99n.y+=this.m_invMassB*this.m_impulse.y,C$99r+=this.m_invIB*C$99j.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),C$99t.velocities[this.m_indexB].w=C$99r},C$99Nn.prototype.SolveVelocityConstraints=function(C$99t){var C$99e=C$99t.velocities[this.m_indexB].v,C$99i=C$99t.velocities[this.m_indexB].w,C$99n=C$99j.AddVCrossSV(C$99e,C$99i,this.m_rB,C$99Nn.SolveVelocityConstraints_s_Cdot),C$99n=C$99F.MulMV(this.m_mass,C$99j.AddVV(C$99n,C$99j.AddVV(this.m_C,C$99j.MulSV(this.m_gamma,this.m_impulse,C$99j.s_t0),C$99j.s_t0),C$99j.s_t0).SelfNeg(),C$99Nn.SolveVelocityConstraints_s_impulse),C$99r=C$99Nn.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse),C$99s=(this.m_impulse.SelfAdd(C$99n),C$99t.step.dt*this.m_maxForce);this.m_impulse.LengthSquared()>C$99s*C$99s&&this.m_impulse.SelfMul(C$99s/this.m_impulse.Length()),C$99j.SubVV(this.m_impulse,C$99r,C$99n),C$99e.SelfMulAdd(this.m_invMassB,C$99n),C$99i+=this.m_invIB*C$99j.CrossVV(this.m_rB,C$99n),C$99t.velocities[this.m_indexB].w=C$99i},C$99Nn.prototype.SolvePositionConstraints=function(C$99t){return!0},C$99Nn.prototype.GetAnchorA=function(C$99t){return C$99t.x=this.m_targetA.x,C$99t.y=this.m_targetA.y,C$99t},C$99Nn.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99Nn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99j.MulSV(C$99t,this.m_impulse,C$99e)},C$99Nn.prototype.GetReactionTorque=function(C$99t){return 0},C$99Nn.prototype.Dump=function(C$99t){C$99t("Mouse joint dumping is not supported.\n")},C$99Nn.prototype.ShiftOrigin=function(C$99t){this.m_targetA.SelfSub(C$99t)},C$99Nn.SolveVelocityConstraints_s_Cdot=new C$99j,C$99Nn.SolveVelocityConstraints_s_impulse=new C$99j,C$99Nn.SolveVelocityConstraints_s_oldImpulse=new C$99j;var C$99On,C$99Fn=C$99Nn;function C$99Nn(C$99t){var C$99e=C$99On.call(this,C$99t)||this;return C$99e.m_localAnchorB=new C$99j,C$99e.m_targetA=new C$99j,C$99e.m_frequencyHz=0,C$99e.m_dampingRatio=0,C$99e.m_beta=0,C$99e.m_impulse=new C$99j,C$99e.m_maxForce=0,C$99e.m_gamma=0,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_rB=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassB=0,C$99e.m_invIB=0,C$99e.m_mass=new C$99F,C$99e.m_C=new C$99j,C$99e.m_qB=new C$99B,C$99e.m_lalcB=new C$99j,C$99e.m_K=new C$99F,C$99e.m_targetA.Copy(C$99f(C$99t.target,C$99j.ZERO)),C$99R.MulTXV(C$99e.m_bodyB.GetTransform(),C$99e.m_targetA,C$99e.m_localAnchorB),C$99e.m_maxForce=C$99f(C$99t.maxForce,0),C$99e.m_impulse.SetZero(),C$99e.m_frequencyHz=C$99f(C$99t.frequencyHz,0),C$99e.m_dampingRatio=C$99f(C$99t.dampingRatio,0),C$99e.m_beta=0,C$99e.m_gamma=0,C$99e}C$99Di(C$99zn,C$99kn=C$99$i),C$99zn.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n){this.bodyA=C$99t,this.bodyB=C$99e,this.bodyA.GetLocalPoint(C$99i,this.localAnchorA),this.bodyB.GetLocalPoint(C$99i,this.localAnchorB),this.bodyA.GetLocalVector(C$99n,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$99kn,C$99Gn=C$99zn;function C$99zn(){var C$99t=C$99kn.call(this,C$99H.b2JointType.e_prismaticJoint)||this;return C$99t.localAnchorA=new C$99j,C$99t.localAnchorB=new C$99j,C$99t.localAxisA=new C$99j(1,0),C$99t.referenceAngle=0,C$99t.enableLimit=!1,C$99t.lowerTranslation=0,C$99t.upperTranslation=0,C$99t.enableMotor=!1,C$99t.maxMotorForce=0,C$99t.motorSpeed=0,C$99t}C$99Di(C$99Hn,C$99Un=C$99en),C$99Hn.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e=C$99t.positions[this.m_indexA].c,C$99i=C$99t.positions[this.m_indexA].a,C$99h=C$99t.velocities[this.m_indexA].v,C$99n=C$99t.velocities[this.m_indexA].w,C$99r=C$99t.positions[this.m_indexB].c,C$99s=C$99t.positions[this.m_indexB].a,C$99u=C$99t.velocities[this.m_indexB].v,C$99_=C$99t.velocities[this.m_indexB].w,C$99i=this.m_qA.SetAngle(C$99i),C$99s=this.m_qB.SetAngle(C$99s),C$99o=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99i,this.m_lalcA,this.m_rA)),C$99s=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99s,this.m_lalcB,this.m_rB)),C$99r=C$99j.AddVV(C$99j.SubVV(C$99r,C$99e,C$99j.s_t0),C$99j.SubVV(C$99s,C$99o,C$99j.s_t1),C$99Hn.InitVelocityConstraints_s_d),C$99e=this.m_invMassA,C$99a=this.m_invMassB,C$99c=this.m_invIA,C$99l=this.m_invIB;C$99B.MulRV(C$99i,this.m_localXAxisA,this.m_axis),this.m_a1=C$99j.CrossVV(C$99j.AddVV(C$99r,C$99o,C$99j.s_t0),this.m_axis),this.m_a2=C$99j.CrossVV(C$99s,this.m_axis),this.m_motorMass=C$99e+C$99a+C$99c*this.m_a1*this.m_a1+C$99l*this.m_a2*this.m_a2,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),C$99B.MulRV(C$99i,this.m_localYAxisA,this.m_perp),this.m_s1=C$99j.CrossVV(C$99j.AddVV(C$99r,C$99o,C$99j.s_t0),this.m_perp),this.m_s2=C$99j.CrossVV(C$99s,this.m_perp),this.m_K.ex.x=C$99e+C$99a+C$99c*this.m_s1*this.m_s1+C$99l*this.m_s2*this.m_s2,this.m_K.ex.y=C$99c*this.m_s1+C$99l*this.m_s2,this.m_K.ex.z=C$99c*this.m_s1*this.m_a1+C$99l*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=C$99c+C$99l,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=C$99c*this.m_a1+C$99l*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=C$99e+C$99a+C$99c*this.m_a1*this.m_a1+C$99l*this.m_a2*this.m_a2,this.m_enableLimit?(C$99i=C$99j.DotVV(this.m_axis,C$99r),C$99D(this.m_upperTranslation-this.m_lowerTranslation)<.016?this.m_limitState=C$99H.b2LimitState.e_equalLimits:C$99i<=this.m_lowerTranslation?this.m_limitState!==C$99H.b2LimitState.e_atLowerLimit&&(this.m_limitState=C$99H.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):C$99i>=this.m_upperTranslation?this.m_limitState!==C$99H.b2LimitState.e_atUpperLimit&&(this.m_limitState=C$99H.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=C$99H.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):(this.m_limitState=C$99H.b2LimitState.e_inactiveLimit,this.m_impulse.z=0),this.m_enableMotor||(this.m_motorImpulse=0),C$99t.step.warmStarting?(this.m_impulse.SelfMul(C$99t.step.dtRatio),this.m_motorImpulse*=C$99t.step.dtRatio,C$99o=C$99j.AddVV(C$99j.MulSV(this.m_impulse.x,this.m_perp,C$99j.s_t0),C$99j.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,C$99j.s_t1),C$99Hn.InitVelocityConstraints_s_P),C$99s=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,C$99r=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,C$99h.SelfMulSub(C$99e,C$99o),C$99n-=C$99c*C$99s,C$99u.SelfMulAdd(C$99a,C$99o),C$99_+=C$99l*C$99r):(this.m_impulse.SetZero(),this.m_motorImpulse=0),C$99t.velocities[this.m_indexA].w=C$99n,C$99t.velocities[this.m_indexB].w=C$99_},C$99Hn.prototype.SolveVelocityConstraints=function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99h=C$99t.velocities[this.m_indexA].v,C$99c=C$99t.velocities[this.m_indexA].w,C$99u=C$99t.velocities[this.m_indexB].v,C$99l=C$99t.velocities[this.m_indexB].w,C$99_=this.m_invMassA,C$99d=this.m_invMassB,C$99f=this.m_invIA,C$99p=this.m_invIB,C$99m=(this.m_enableMotor&&this.m_limitState!==C$99H.b2LimitState.e_equalLimits&&(C$99a=C$99j.DotVV(this.m_axis,C$99j.SubVV(C$99u,C$99h,C$99j.s_t0))+this.m_a2*C$99l-this.m_a1*C$99c,C$99a=this.m_motorMass*(this.m_motorSpeed-C$99a),C$99o=this.m_motorImpulse,C$99s=C$99t.step.dt*this.m_maxMotorForce,this.m_motorImpulse=C$99O(this.m_motorImpulse+C$99a,-C$99s,C$99s),C$99a=this.m_motorImpulse-C$99o,C$99s=C$99j.MulSV(C$99a,this.m_axis,C$99Hn.SolveVelocityConstraints_s_P),C$99o=C$99a*this.m_a1,C$99a=C$99a*this.m_a2,C$99h.SelfMulSub(C$99_,C$99s),C$99c-=C$99f*C$99o,C$99u.SelfMulAdd(C$99d,C$99s),C$99l+=C$99p*C$99a),C$99j.DotVV(this.m_perp,C$99j.SubVV(C$99u,C$99h,C$99j.s_t0))+this.m_s2*C$99l-this.m_s1*C$99c),C$99y=C$99l-C$99c;C$99a=this.m_enableLimit&&this.m_limitState!==C$99H.b2LimitState.e_inactiveLimit?(C$99i=C$99j.DotVV(this.m_axis,C$99j.SubVV(C$99u,C$99h,C$99j.s_t0))+this.m_a2*C$99l-this.m_a1*C$99c,C$99e=C$99Hn.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),C$99i=this.m_K.Solve33(-C$99m,-C$99y,-C$99i,C$99Hn.SolveVelocityConstraints_s_df3),this.m_impulse.SelfAdd(C$99i),this.m_limitState===C$99H.b2LimitState.e_atLowerLimit?this.m_impulse.z=C$99V(this.m_impulse.z,0):this.m_limitState===C$99H.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=C$99L(this.m_impulse.z,0)),C$99n=-C$99m-(this.m_impulse.z-C$99e.z)*this.m_K.ez.x,C$99r=-C$99y-(this.m_impulse.z-C$99e.z)*this.m_K.ez.y,(C$99n=this.m_K.Solve22(C$99n,C$99r,C$99Hn.SolveVelocityConstraints_s_f2r)).x+=C$99e.x,C$99n.y+=C$99e.y,this.m_impulse.x=C$99n.x,this.m_impulse.y=C$99n.y,C$99i.x=this.m_impulse.x-C$99e.x,C$99i.y=this.m_impulse.y-C$99e.y,C$99i.z=this.m_impulse.z-C$99e.z,C$99s=C$99j.AddVV(C$99j.MulSV(C$99i.x,this.m_perp,C$99j.s_t0),C$99j.MulSV(C$99i.z,this.m_axis,C$99j.s_t1),C$99Hn.SolveVelocityConstraints_s_P),C$99o=C$99i.x*this.m_s1+C$99i.y+C$99i.z*this.m_a1,C$99i.x*this.m_s2+C$99i.y+C$99i.z*this.m_a2):(C$99r=this.m_K.Solve22(-C$99m,-C$99y,C$99Hn.SolveVelocityConstraints_s_df2),this.m_impulse.x+=C$99r.x,this.m_impulse.y+=C$99r.y,C$99s=C$99j.MulSV(C$99r.x,this.m_perp,C$99Hn.SolveVelocityConstraints_s_P),C$99o=C$99r.x*this.m_s1+C$99r.y,C$99r.x*this.m_s2+C$99r.y),C$99h.SelfMulSub(C$99_,C$99s),C$99c-=C$99f*C$99o,C$99u.SelfMulAdd(C$99d,C$99s),C$99l+=C$99p*C$99a,C$99t.velocities[this.m_indexA].w=C$99c,C$99t.velocities[this.m_indexB].w=C$99l},C$99Hn.prototype.SolvePositionConstraints=function(C$99t){var C$99h,C$99u,C$99_,C$99d=C$99t.positions[this.m_indexA].c,C$99f=C$99t.positions[this.m_indexA].a,C$99p=C$99t.positions[this.m_indexB].c,C$99m=C$99t.positions[this.m_indexB].a,C$99e=this.m_qA.SetAngle(C$99f),C$99i=this.m_qB.SetAngle(C$99m),C$99y=this.m_invMassA,C$99g=this.m_invMassB,C$99n=this.m_invIA,C$99r=this.m_invIB,C$99s=C$99B.MulRV(C$99e,this.m_lalcA,this.m_rA),C$99i=C$99B.MulRV(C$99i,this.m_lalcB,this.m_rB),C$99o=C$99j.SubVV(C$99j.AddVV(C$99p,C$99i,C$99j.s_t0),C$99j.AddVV(C$99d,C$99s,C$99j.s_t1),C$99Hn.SolvePositionConstraints_s_d),C$99v=C$99B.MulRV(C$99e,this.m_localXAxisA,this.m_axis),C$99x=C$99j.CrossVV(C$99j.AddVV(C$99o,C$99s,C$99j.s_t0),C$99v),C$99b=C$99j.CrossVV(C$99i,C$99v),C$99e=C$99B.MulRV(C$99e,this.m_localYAxisA,this.m_perp),C$99s=C$99j.CrossVV(C$99j.AddVV(C$99o,C$99s,C$99j.s_t0),C$99e),C$99i=C$99j.CrossVV(C$99i,C$99e),C$99a=C$99Hn.SolvePositionConstraints_s_impulse,C$99A=C$99j.DotVV(C$99e,C$99o),C$99C=C$99m-C$99f-this.m_referenceAngle,C$99c=C$99D(C$99A),C$99S=C$99D(C$99C),C$99l=!1,C$99T=0,C$99l=(this.m_enableLimit&&(C$99o=C$99j.DotVV(C$99v,C$99o),C$99D(this.m_upperTranslation-this.m_lowerTranslation)<.016?(C$99T=C$99O(C$99o,-.2,.2),C$99c=C$99V(C$99c,C$99D(C$99o)),C$99l=!0):C$99o<=this.m_lowerTranslation?(C$99T=C$99O(C$99o-this.m_lowerTranslation+.008,-.2,0),C$99c=C$99V(C$99c,this.m_lowerTranslation-C$99o),C$99l=!0):C$99o>=this.m_upperTranslation&&(C$99T=C$99O(C$99o-this.m_upperTranslation-.008,0,.2),C$99c=C$99V(C$99c,C$99o-this.m_upperTranslation),C$99l=!0)),C$99l?(0===(C$99u=C$99n+C$99r)&&(C$99u=1),C$99o=C$99n*C$99x+C$99r*C$99b,C$99l=C$99y+C$99g+C$99n*C$99x*C$99x+C$99r*C$99b*C$99b,(C$99w=this.m_K3).ex.SetXYZ(C$99y+C$99g+C$99n*C$99s*C$99s+C$99r*C$99i*C$99i,C$99h=C$99n*C$99s+C$99r*C$99i,C$99_=C$99n*C$99s*C$99x+C$99r*C$99i*C$99b),C$99w.ey.SetXYZ(C$99h,C$99u,C$99o),C$99w.ez.SetXYZ(C$99_,C$99o,C$99l),C$99a=C$99w.Solve33(-C$99A,-C$99C,-C$99T,C$99a)):(0===(C$99u=C$99n+C$99r)&&(C$99u=1),(C$99_=this.m_K2).ex.Set(C$99y+C$99g+C$99n*C$99s*C$99s+C$99r*C$99i*C$99i,C$99h=C$99n*C$99s+C$99r*C$99i),C$99_.ey.Set(C$99h,C$99u),C$99o=C$99_.Solve(-C$99A,-C$99C,C$99Hn.SolvePositionConstraints_s_impulse1),C$99a.x=C$99o.x,C$99a.y=C$99o.y,C$99a.z=0),C$99j.AddVV(C$99j.MulSV(C$99a.x,C$99e,C$99j.s_t0),C$99j.MulSV(C$99a.z,C$99v,C$99j.s_t1),C$99Hn.SolvePositionConstraints_s_P)),C$99w=C$99a.x*C$99s+C$99a.y+C$99a.z*C$99x,C$99T=C$99a.x*C$99i+C$99a.y+C$99a.z*C$99b;return C$99d.SelfMulSub(C$99y,C$99l),C$99f-=C$99n*C$99w,C$99p.SelfMulAdd(C$99g,C$99l),C$99m+=C$99r*C$99T,C$99t.positions[this.m_indexA].a=C$99f,C$99t.positions[this.m_indexB].a=C$99m,C$99c<=.008&&C$99S<=C$99I},C$99Hn.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99Hn.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99Hn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e.x=C$99t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),C$99e.y=C$99t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y),C$99e},C$99Hn.prototype.GetReactionTorque=function(C$99t){return C$99t*this.m_impulse.y},C$99Hn.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$99Hn.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$99Hn.prototype.GetLocalAxisA=function(){return this.m_localXAxisA},C$99Hn.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},C$99Hn.prototype.GetJointTranslation=function(){var C$99t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99Hn.GetJointTranslation_s_pA),C$99e=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99Hn.GetJointTranslation_s_pB),C$99e=C$99j.SubVV(C$99e,C$99t,C$99Hn.GetJointTranslation_s_d),C$99t=this.m_bodyA.GetWorldVector(this.m_localXAxisA,C$99Hn.GetJointTranslation_s_axis);return C$99j.DotVV(C$99e,C$99t)},C$99Hn.prototype.GetJointSpeed=function(){var C$99t=this.m_bodyA,C$99e=this.m_bodyB,C$99i=(C$99j.SubVV(this.m_localAnchorA,C$99t.m_sweep.localCenter,this.m_lalcA),C$99B.MulRV(C$99t.m_xf.q,this.m_lalcA,this.m_rA)),C$99n=(C$99j.SubVV(this.m_localAnchorB,C$99e.m_sweep.localCenter,this.m_lalcB),C$99B.MulRV(C$99e.m_xf.q,this.m_lalcB,this.m_rB)),C$99r=C$99j.AddVV(C$99t.m_sweep.c,C$99i,C$99j.s_t0),C$99s=C$99j.AddVV(C$99e.m_sweep.c,C$99n,C$99j.s_t1),C$99s=C$99j.SubVV(C$99s,C$99r,C$99j.s_t2),C$99r=C$99t.GetWorldVector(this.m_localXAxisA,this.m_axis),C$99o=C$99t.m_linearVelocity,C$99a=C$99e.m_linearVelocity,C$99t=C$99t.m_angularVelocity,C$99e=C$99e.m_angularVelocity;return C$99j.DotVV(C$99s,C$99j.CrossSV(C$99t,C$99r,C$99j.s_t0))+C$99j.DotVV(C$99r,C$99j.SubVV(C$99j.AddVCrossSV(C$99a,C$99e,C$99n,C$99j.s_t0),C$99j.AddVCrossSV(C$99o,C$99t,C$99i,C$99j.s_t1),C$99j.s_t0))},C$99Hn.prototype.IsLimitEnabled=function(){return this.m_enableLimit},C$99Hn.prototype.EnableLimit=function(C$99t){C$99t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=C$99t,this.m_impulse.z=0)},C$99Hn.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},C$99Hn.prototype.GetUpperLimit=function(){return this.m_upperTranslation},C$99Hn.prototype.SetLimits=function(C$99t,C$99e){C$99t===this.m_lowerTranslation&&C$99e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=C$99t,this.m_upperTranslation=C$99e,this.m_impulse.z=0)},C$99Hn.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C$99Hn.prototype.EnableMotor=function(C$99t){C$99t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$99t)},C$99Hn.prototype.SetMotorSpeed=function(C$99t){C$99t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$99t)},C$99Hn.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C$99Hn.prototype.SetMaxMotorForce=function(C$99t){C$99t!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=C$99t)},C$99Hn.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},C$99Hn.prototype.GetMotorForce=function(C$99t){return C$99t*this.m_motorImpulse},C$99Hn.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),C$99t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$99t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),C$99t("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),C$99t("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),C$99t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$99t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$99t("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99Hn.InitVelocityConstraints_s_d=new C$99j,C$99Hn.InitVelocityConstraints_s_P=new C$99j,C$99Hn.SolveVelocityConstraints_s_P=new C$99j,C$99Hn.SolveVelocityConstraints_s_f2r=new C$99j,C$99Hn.SolveVelocityConstraints_s_f1=new C$99b,C$99Hn.SolveVelocityConstraints_s_df3=new C$99b,C$99Hn.SolveVelocityConstraints_s_df2=new C$99j,C$99Hn.SolvePositionConstraints_s_d=new C$99j,C$99Hn.SolvePositionConstraints_s_impulse=new C$99b,C$99Hn.SolvePositionConstraints_s_impulse1=new C$99j,C$99Hn.SolvePositionConstraints_s_P=new C$99j,C$99Hn.GetJointTranslation_s_pA=new C$99j,C$99Hn.GetJointTranslation_s_pB=new C$99j,C$99Hn.GetJointTranslation_s_d=new C$99j,C$99Hn.GetJointTranslation_s_axis=new C$99j;var C$99Un,C$99Wn=C$99Hn;function C$99Hn(C$99t){var C$99e=C$99Un.call(this,C$99t)||this;return C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_localXAxisA=new C$99j,C$99e.m_localYAxisA=new C$99j,C$99e.m_referenceAngle=0,C$99e.m_impulse=new C$99b(0,0,0),C$99e.m_motorImpulse=0,C$99e.m_lowerTranslation=0,C$99e.m_upperTranslation=0,C$99e.m_maxMotorForce=0,C$99e.m_motorSpeed=0,C$99e.m_enableLimit=!1,C$99e.m_enableMotor=!1,C$99e.m_limitState=C$99H.b2LimitState.e_inactiveLimit,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_axis=new C$99j(0,0),C$99e.m_perp=new C$99j(0,0),C$99e.m_s1=0,C$99e.m_s2=0,C$99e.m_a1=0,C$99e.m_a2=0,C$99e.m_K=new C$99k,C$99e.m_K3=new C$99k,C$99e.m_K2=new C$99F,C$99e.m_motorMass=0,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localAnchorA.Copy(C$99f(C$99t.localAnchorA,C$99j.ZERO)),C$99e.m_localAnchorB.Copy(C$99f(C$99t.localAnchorB,C$99j.ZERO)),C$99e.m_localXAxisA.Copy(C$99f(C$99t.localAxisA,new C$99j(1,0))).SelfNormalize(),C$99j.CrossOneV(C$99e.m_localXAxisA,C$99e.m_localYAxisA),C$99e.m_referenceAngle=C$99f(C$99t.referenceAngle,0),C$99e.m_lowerTranslation=C$99f(C$99t.lowerTranslation,0),C$99e.m_upperTranslation=C$99f(C$99t.upperTranslation,0),C$99e.m_maxMotorForce=C$99f(C$99t.maxMotorForce,0),C$99e.m_motorSpeed=C$99f(C$99t.motorSpeed,0),C$99e.m_enableLimit=C$99f(C$99t.enableLimit,!1),C$99e.m_enableMotor=C$99f(C$99t.enableMotor,!1),C$99e}C$99Di(C$99Yn,C$99jn=C$99$i),C$99Yn.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){this.bodyA=C$99t,this.bodyB=C$99e,this.groundAnchorA.Copy(C$99i),this.groundAnchorB.Copy(C$99n),this.bodyA.GetLocalPoint(C$99r,this.localAnchorA),this.bodyB.GetLocalPoint(C$99s,this.localAnchorB),this.lengthA=C$99j.DistanceVV(C$99r,C$99i),this.lengthB=C$99j.DistanceVV(C$99s,C$99n),this.ratio=C$99o};var C$99jn,C$99Xn=C$99Yn;function C$99Yn(){var C$99t=C$99jn.call(this,C$99H.b2JointType.e_pulleyJoint)||this;return C$99t.groundAnchorA=new C$99j(-1,1),C$99t.groundAnchorB=new C$99j(1,1),C$99t.localAnchorA=new C$99j(-1,0),C$99t.localAnchorB=new C$99j(1,0),C$99t.lengthA=0,C$99t.lengthB=0,C$99t.ratio=1,C$99t.collideConnected=!0,C$99t}C$99Di(C$99Zn,C$99qn=C$99en),C$99Zn.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e=C$99t.positions[this.m_indexA].c,C$99i=C$99t.positions[this.m_indexA].a,C$99n=C$99t.velocities[this.m_indexA].v,C$99r=C$99t.velocities[this.m_indexA].w,C$99s=C$99t.positions[this.m_indexB].c,C$99o=C$99t.positions[this.m_indexB].a,C$99a=C$99t.velocities[this.m_indexB].v,C$99c=C$99t.velocities[this.m_indexB].w,C$99i=this.m_qA.SetAngle(C$99i),C$99o=this.m_qB.SetAngle(C$99o),C$99i=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99i,this.m_lalcA,this.m_rA),C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99o,this.m_lalcB,this.m_rB),this.m_uA.Copy(C$99e).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(C$99s).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB),this.m_uA.Length()),C$99o=this.m_uB.Length(),C$99e=(.08<C$99i?this.m_uA.SelfMul(1/C$99i):this.m_uA.SetZero(),.08<C$99o?this.m_uB.SelfMul(1/C$99o):this.m_uB.SetZero(),C$99j.CrossVV(this.m_rA,this.m_uA)),C$99s=C$99j.CrossVV(this.m_rB,this.m_uB),C$99i=this.m_invMassA+this.m_invIA*C$99e*C$99e,C$99o=this.m_invMassB+this.m_invIB*C$99s*C$99s;this.m_mass=C$99i+this.m_ratio*this.m_ratio*C$99o,0<this.m_mass&&(this.m_mass=1/this.m_mass),C$99t.step.warmStarting?(this.m_impulse*=C$99t.step.dtRatio,C$99e=C$99j.MulSV(-this.m_impulse,this.m_uA,C$99Zn.InitVelocityConstraints_s_PA),C$99s=C$99j.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,C$99Zn.InitVelocityConstraints_s_PB),C$99n.SelfMulAdd(this.m_invMassA,C$99e),C$99r+=this.m_invIA*C$99j.CrossVV(this.m_rA,C$99e),C$99a.SelfMulAdd(this.m_invMassB,C$99s),C$99c+=this.m_invIB*C$99j.CrossVV(this.m_rB,C$99s)):this.m_impulse=0,C$99t.velocities[this.m_indexA].w=C$99r,C$99t.velocities[this.m_indexB].w=C$99c},C$99Zn.prototype.SolveVelocityConstraints=function(C$99t){var C$99e=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99s=C$99j.AddVCrossSV(C$99e,C$99i,this.m_rA,C$99Zn.SolveVelocityConstraints_s_vpA),C$99o=C$99j.AddVCrossSV(C$99n,C$99r,this.m_rB,C$99Zn.SolveVelocityConstraints_s_vpB),C$99s=-C$99j.DotVV(this.m_uA,C$99s)-this.m_ratio*C$99j.DotVV(this.m_uB,C$99o),C$99o=-this.m_mass*C$99s,C$99s=(this.m_impulse+=C$99o,C$99j.MulSV(-C$99o,this.m_uA,C$99Zn.SolveVelocityConstraints_s_PA)),C$99o=C$99j.MulSV(-this.m_ratio*C$99o,this.m_uB,C$99Zn.SolveVelocityConstraints_s_PB);C$99e.SelfMulAdd(this.m_invMassA,C$99s),C$99i+=this.m_invIA*C$99j.CrossVV(this.m_rA,C$99s),C$99n.SelfMulAdd(this.m_invMassB,C$99o),C$99r+=this.m_invIB*C$99j.CrossVV(this.m_rB,C$99o),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r},C$99Zn.prototype.SolvePositionConstraints=function(C$99t){var C$99h=C$99t.positions[this.m_indexA].c,C$99e=C$99t.positions[this.m_indexA].a,C$99u=C$99t.positions[this.m_indexB].c,C$99_=C$99t.positions[this.m_indexB].a,C$99i=this.m_qA.SetAngle(C$99e),C$99n=this.m_qB.SetAngle(C$99_),C$99i=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99i,this.m_lalcA,this.m_rA)),C$99n=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99n,this.m_lalcB,this.m_rB)),C$99r=this.m_uA.Copy(C$99h).SelfAdd(C$99i).SelfSub(this.m_groundAnchorA),C$99s=this.m_uB.Copy(C$99u).SelfAdd(C$99n).SelfSub(this.m_groundAnchorB),C$99o=C$99r.Length(),C$99a=C$99s.Length(),C$99c=(.08<C$99o?C$99r.SelfMul(1/C$99o):C$99r.SetZero(),.08<C$99a?C$99s.SelfMul(1/C$99a):C$99s.SetZero(),C$99j.CrossVV(C$99i,C$99r)),C$99l=C$99j.CrossVV(C$99n,C$99s),C$99c=this.m_invMassA+this.m_invIA*C$99c*C$99c,C$99l=this.m_invMassB+this.m_invIB*C$99l*C$99l,C$99c=C$99c+this.m_ratio*this.m_ratio*C$99l,C$99l=(0<C$99c&&(C$99c=1/C$99c),this.m_constant-C$99o-this.m_ratio*C$99a),C$99o=C$99D(C$99l),C$99a=-C$99c*C$99l,C$99c=C$99j.MulSV(-C$99a,C$99r,C$99Zn.SolvePositionConstraints_s_PA),C$99l=C$99j.MulSV(-this.m_ratio*C$99a,C$99s,C$99Zn.SolvePositionConstraints_s_PB);return C$99h.SelfMulAdd(this.m_invMassA,C$99c),C$99e+=this.m_invIA*C$99j.CrossVV(C$99i,C$99c),C$99u.SelfMulAdd(this.m_invMassB,C$99l),C$99_+=this.m_invIB*C$99j.CrossVV(C$99n,C$99l),C$99t.positions[this.m_indexA].a=C$99e,C$99t.positions[this.m_indexB].a=C$99_,C$99o<.008},C$99Zn.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99Zn.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99Zn.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e.x=C$99t*this.m_impulse*this.m_uB.x,C$99e.y=C$99t*this.m_impulse*this.m_uB.y,C$99e},C$99Zn.prototype.GetReactionTorque=function(C$99t){return 0},C$99Zn.prototype.GetGroundAnchorA=function(){return this.m_groundAnchorA},C$99Zn.prototype.GetGroundAnchorB=function(){return this.m_groundAnchorB},C$99Zn.prototype.GetLengthA=function(){return this.m_lengthA},C$99Zn.prototype.GetLengthB=function(){return this.m_lengthB},C$99Zn.prototype.GetRatio=function(){return this.m_ratio},C$99Zn.prototype.GetCurrentLengthA=function(){var C$99t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99Zn.GetCurrentLengthA_s_p),C$99e=this.m_groundAnchorA;return C$99j.DistanceVV(C$99t,C$99e)},C$99Zn.prototype.GetCurrentLengthB=function(){var C$99t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99Zn.GetCurrentLengthB_s_p),C$99e=this.m_groundAnchorB;return C$99j.DistanceVV(C$99t,C$99e)},C$99Zn.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),C$99t("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.lengthA = %.15f;\n",this.m_lengthA),C$99t("  jd.lengthB = %.15f;\n",this.m_lengthB),C$99t("  jd.ratio = %.15f;\n",this.m_ratio),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99Zn.prototype.ShiftOrigin=function(C$99t){this.m_groundAnchorA.SelfSub(C$99t),this.m_groundAnchorB.SelfSub(C$99t)},C$99Zn.InitVelocityConstraints_s_PA=new C$99j,C$99Zn.InitVelocityConstraints_s_PB=new C$99j,C$99Zn.SolveVelocityConstraints_s_vpA=new C$99j,C$99Zn.SolveVelocityConstraints_s_vpB=new C$99j,C$99Zn.SolveVelocityConstraints_s_PA=new C$99j,C$99Zn.SolveVelocityConstraints_s_PB=new C$99j,C$99Zn.SolvePositionConstraints_s_PA=new C$99j,C$99Zn.SolvePositionConstraints_s_PB=new C$99j,C$99Zn.GetCurrentLengthA_s_p=new C$99j,C$99Zn.GetCurrentLengthB_s_p=new C$99j;var C$99qn,C$99Jn=C$99Zn;function C$99Zn(C$99t){var C$99e=C$99qn.call(this,C$99t)||this;return C$99e.m_groundAnchorA=new C$99j,C$99e.m_groundAnchorB=new C$99j,C$99e.m_lengthA=0,C$99e.m_lengthB=0,C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_constant=0,C$99e.m_ratio=0,C$99e.m_impulse=0,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_uA=new C$99j,C$99e.m_uB=new C$99j,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_mass=0,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_groundAnchorA.Copy(C$99f(C$99t.groundAnchorA,new C$99j(-1,1))),C$99e.m_groundAnchorB.Copy(C$99f(C$99t.groundAnchorB,new C$99j(1,0))),C$99e.m_localAnchorA.Copy(C$99f(C$99t.localAnchorA,new C$99j(-1,0))),C$99e.m_localAnchorB.Copy(C$99f(C$99t.localAnchorB,new C$99j(1,0))),C$99e.m_lengthA=C$99f(C$99t.lengthA,0),C$99e.m_lengthB=C$99f(C$99t.lengthB,0),C$99e.m_ratio=C$99f(C$99t.ratio,1),C$99e.m_constant=C$99f(C$99t.lengthA,0)+C$99e.m_ratio*C$99f(C$99t.lengthB,0),C$99e.m_impulse=0,C$99e}C$99Di(C$99$n,C$99Kn=C$99$i),C$99$n.prototype.Initialize=function(C$99t,C$99e,C$99i){this.bodyA=C$99t,this.bodyB=C$99e,this.bodyA.GetLocalPoint(C$99i,this.localAnchorA),this.bodyB.GetLocalPoint(C$99i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$99Kn,C$99Qn=C$99$n;function C$99$n(){var C$99t=C$99Kn.call(this,C$99H.b2JointType.e_revoluteJoint)||this;return C$99t.localAnchorA=new C$99j(0,0),C$99t.localAnchorB=new C$99j(0,0),C$99t.referenceAngle=0,C$99t.enableLimit=!1,C$99t.lowerAngle=0,C$99t.upperAngle=0,C$99t.enableMotor=!1,C$99t.motorSpeed=0,C$99t.maxMotorTorque=0,C$99t}C$99Di(C$99ir,C$99tr=C$99en),C$99ir.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e=C$99t.positions[this.m_indexA].a,C$99h=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.positions[this.m_indexB].a,C$99u=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99s=this.m_qA.SetAngle(C$99e),C$99o=this.m_qB.SetAngle(C$99n),C$99s=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99s,this.m_lalcA,this.m_rA),C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99o,this.m_lalcB,this.m_rB),this.m_invMassA),C$99o=this.m_invMassB,C$99a=this.m_invIA,C$99c=this.m_invIB,C$99l=C$99a+C$99c===0;this.m_mass.ex.x=C$99s+C$99o+this.m_rA.y*this.m_rA.y*C$99a+this.m_rB.y*this.m_rB.y*C$99c,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*C$99a-this.m_rB.y*this.m_rB.x*C$99c,this.m_mass.ez.x=-this.m_rA.y*C$99a-this.m_rB.y*C$99c,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=C$99s+C$99o+this.m_rA.x*this.m_rA.x*C$99a+this.m_rB.x*this.m_rB.x*C$99c,this.m_mass.ez.y=this.m_rA.x*C$99a+this.m_rB.x*C$99c,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=C$99a+C$99c,this.m_motorMass=C$99a+C$99c,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!C$99l||(this.m_motorImpulse=0),this.m_enableLimit&&!C$99l?(C$99l=C$99n-C$99e-this.m_referenceAngle,C$99D(this.m_upperAngle-this.m_lowerAngle)<2*C$99I?this.m_limitState=C$99H.b2LimitState.e_equalLimits:C$99l<=this.m_lowerAngle?(this.m_limitState!==C$99H.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=C$99H.b2LimitState.e_atLowerLimit):C$99l>=this.m_upperAngle?(this.m_limitState!==C$99H.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=C$99H.b2LimitState.e_atUpperLimit):(this.m_limitState=C$99H.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=C$99H.b2LimitState.e_inactiveLimit,C$99t.step.warmStarting?(this.m_impulse.SelfMul(C$99t.step.dtRatio),this.m_motorImpulse*=C$99t.step.dtRatio,C$99n=C$99ir.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y),C$99h.SelfMulSub(C$99s,C$99n),C$99i-=C$99a*(C$99j.CrossVV(this.m_rA,C$99n)+this.m_motorImpulse+this.m_impulse.z),C$99u.SelfMulAdd(C$99o,C$99n),C$99r+=C$99c*(C$99j.CrossVV(this.m_rB,C$99n)+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r},C$99ir.prototype.SolveVelocityConstraints=function(C$99t){var C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99h=C$99t.velocities[this.m_indexA].v,C$99a=C$99t.velocities[this.m_indexA].w,C$99u=C$99t.velocities[this.m_indexB].v,C$99c=C$99t.velocities[this.m_indexB].w,C$99_=this.m_invMassA,C$99d=this.m_invMassB,C$99f=this.m_invIA,C$99p=this.m_invIB,C$99l=C$99f+C$99p===0;this.m_enableMotor&&this.m_limitState!==C$99H.b2LimitState.e_equalLimits&&!C$99l&&(C$99s=C$99c-C$99a-this.m_motorSpeed,C$99s=-this.m_motorMass*C$99s,C$99e=this.m_motorImpulse,C$99o=C$99t.step.dt*this.m_maxMotorTorque,this.m_motorImpulse=C$99O(this.m_motorImpulse+C$99s,-C$99o,C$99o),C$99a-=C$99f*(C$99s=this.m_motorImpulse-C$99e),C$99c+=C$99p*C$99s),this.m_enableLimit&&this.m_limitState!==C$99H.b2LimitState.e_inactiveLimit&&!C$99l?(C$99o=C$99j.SubVV(C$99j.AddVCrossSV(C$99u,C$99c,this.m_rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99h,C$99a,this.m_rA,C$99j.s_t1),C$99ir.SolveVelocityConstraints_s_Cdot1),C$99e=this.m_mass.Solve33(C$99o.x,C$99o.y,C$99c-C$99a,C$99ir.SolveVelocityConstraints_s_impulse_v3).SelfNeg(),this.m_limitState===C$99H.b2LimitState.e_equalLimits?this.m_impulse.SelfAdd(C$99e):this.m_limitState===C$99H.b2LimitState.e_atLowerLimit?this.m_impulse.z+C$99e.z<0?(C$99i=-C$99o.x+this.m_impulse.z*this.m_mass.ez.x,C$99n=-C$99o.y+this.m_impulse.z*this.m_mass.ez.y,C$99r=this.m_mass.Solve22(C$99i,C$99n,C$99ir.SolveVelocityConstraints_s_reduced_v2),C$99e.x=C$99r.x,C$99e.y=C$99r.y,C$99e.z=-this.m_impulse.z,this.m_impulse.x+=C$99r.x,this.m_impulse.y+=C$99r.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(C$99e):this.m_limitState===C$99H.b2LimitState.e_atUpperLimit&&(0<this.m_impulse.z+C$99e.z?(C$99i=-C$99o.x+this.m_impulse.z*this.m_mass.ez.x,C$99n=-C$99o.y+this.m_impulse.z*this.m_mass.ez.y,C$99r=this.m_mass.Solve22(C$99i,C$99n,C$99ir.SolveVelocityConstraints_s_reduced_v2),C$99e.x=C$99r.x,C$99e.y=C$99r.y,C$99e.z=-this.m_impulse.z,this.m_impulse.x+=C$99r.x,this.m_impulse.y+=C$99r.y,this.m_impulse.z=0):this.m_impulse.SelfAdd(C$99e)),C$99s=C$99ir.SolveVelocityConstraints_s_P.Set(C$99e.x,C$99e.y),C$99h.SelfMulSub(C$99_,C$99s),C$99a-=C$99f*(C$99j.CrossVV(this.m_rA,C$99s)+C$99e.z),C$99u.SelfMulAdd(C$99d,C$99s),C$99c+=C$99p*(C$99j.CrossVV(this.m_rB,C$99s)+C$99e.z)):(C$99l=C$99j.SubVV(C$99j.AddVCrossSV(C$99u,C$99c,this.m_rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99h,C$99a,this.m_rA,C$99j.s_t1),C$99ir.SolveVelocityConstraints_s_Cdot_v2),C$99o=this.m_mass.Solve22(-C$99l.x,-C$99l.y,C$99ir.SolveVelocityConstraints_s_impulse_v2),this.m_impulse.x+=C$99o.x,this.m_impulse.y+=C$99o.y,C$99h.SelfMulSub(C$99_,C$99o),C$99a-=C$99f*C$99j.CrossVV(this.m_rA,C$99o),C$99u.SelfMulAdd(C$99d,C$99o),C$99c+=C$99p*C$99j.CrossVV(this.m_rB,C$99o)),C$99t.velocities[this.m_indexA].w=C$99a,C$99t.velocities[this.m_indexB].w=C$99c},C$99ir.prototype.SolvePositionConstraints=function(C$99t){var C$99h=C$99t.positions[this.m_indexA].c,C$99e=C$99t.positions[this.m_indexA].a,C$99u=C$99t.positions[this.m_indexB].c,C$99i=C$99t.positions[this.m_indexB].a,C$99_=this.m_qA.SetAngle(C$99e),C$99n=this.m_qB.SetAngle(C$99i),C$99r=0,C$99s=this.m_invIA+this.m_invIB===0,C$99s=(this.m_enableLimit&&this.m_limitState!==C$99H.b2LimitState.e_inactiveLimit&&!C$99s&&(C$99s=C$99i-C$99e-this.m_referenceAngle,C$99a=0,this.m_limitState===C$99H.b2LimitState.e_equalLimits?(C$99o=C$99O(C$99s-this.m_lowerAngle,-C$99p,C$99p),C$99a=-this.m_motorMass*C$99o,C$99r=C$99D(C$99o)):this.m_limitState===C$99H.b2LimitState.e_atLowerLimit?(C$99r=-(C$99o=C$99s-this.m_lowerAngle),C$99o=C$99O(C$99o+C$99I,-C$99p,0),C$99a=-this.m_motorMass*C$99o):this.m_limitState===C$99H.b2LimitState.e_atUpperLimit&&(C$99o=C$99O((C$99r=C$99o=C$99s-this.m_upperAngle)-C$99I,0,C$99p),C$99a=-this.m_motorMass*C$99o),C$99e-=this.m_invIA*C$99a,C$99i+=this.m_invIB*C$99a),C$99_.SetAngle(C$99e),C$99n.SetAngle(C$99i),C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99_,this.m_lalcA,this.m_rA)),C$99o=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99n,this.m_lalcB,this.m_rB)),C$99a=C$99j.SubVV(C$99j.AddVV(C$99u,C$99o,C$99j.s_t0),C$99j.AddVV(C$99h,C$99s,C$99j.s_t1),C$99ir.SolvePositionConstraints_s_C_v2),C$99_=C$99a.Length(),C$99n=this.m_invMassA,C$99d=this.m_invMassB,C$99c=this.m_invIA,C$99f=this.m_invIB,C$99l=this.m_K,C$99l=(C$99l.ex.x=C$99n+C$99d+C$99c*C$99s.y*C$99s.y+C$99f*C$99o.y*C$99o.y,C$99l.ex.y=-C$99c*C$99s.x*C$99s.y-C$99f*C$99o.x*C$99o.y,C$99l.ey.x=C$99l.ex.y,C$99l.ey.y=C$99n+C$99d+C$99c*C$99s.x*C$99s.x+C$99f*C$99o.x*C$99o.x,C$99l.Solve(C$99a.x,C$99a.y,C$99ir.SolvePositionConstraints_s_impulse).SelfNeg());return C$99h.SelfMulSub(C$99n,C$99l),C$99e-=C$99c*C$99j.CrossVV(C$99s,C$99l),C$99u.SelfMulAdd(C$99d,C$99l),C$99i+=C$99f*C$99j.CrossVV(C$99o,C$99l),C$99t.positions[this.m_indexA].a=C$99e,C$99t.positions[this.m_indexB].a=C$99i,C$99_<=.008&&C$99r<=C$99I},C$99ir.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99ir.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99ir.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e.x=C$99t*this.m_impulse.x,C$99e.y=C$99t*this.m_impulse.y,C$99e},C$99ir.prototype.GetReactionTorque=function(C$99t){return C$99t*this.m_impulse.z},C$99ir.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$99ir.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$99ir.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},C$99ir.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},C$99ir.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},C$99ir.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C$99ir.prototype.EnableMotor=function(C$99t){C$99t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$99t)},C$99ir.prototype.GetMotorTorque=function(C$99t){return C$99t*this.m_motorImpulse},C$99ir.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C$99ir.prototype.SetMaxMotorTorque=function(C$99t){C$99t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=C$99t)},C$99ir.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},C$99ir.prototype.IsLimitEnabled=function(){return this.m_enableLimit},C$99ir.prototype.EnableLimit=function(C$99t){C$99t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=C$99t,this.m_impulse.z=0)},C$99ir.prototype.GetLowerLimit=function(){return this.m_lowerAngle},C$99ir.prototype.GetUpperLimit=function(){return this.m_upperAngle},C$99ir.prototype.SetLimits=function(C$99t,C$99e){C$99t===this.m_lowerAngle&&C$99e===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=C$99t,this.m_upperAngle=C$99e)},C$99ir.prototype.SetMotorSpeed=function(C$99t){C$99t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$99t)},C$99ir.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$99t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),C$99t("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),C$99t("  jd.upperAngle = %.15f;\n",this.m_upperAngle),C$99t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$99t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$99t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99ir.InitVelocityConstraints_s_P=new C$99j,C$99ir.SolveVelocityConstraints_s_P=new C$99j,C$99ir.SolveVelocityConstraints_s_Cdot_v2=new C$99j,C$99ir.SolveVelocityConstraints_s_Cdot1=new C$99j,C$99ir.SolveVelocityConstraints_s_impulse_v3=new C$99b,C$99ir.SolveVelocityConstraints_s_reduced_v2=new C$99j,C$99ir.SolveVelocityConstraints_s_impulse_v2=new C$99j,C$99ir.SolvePositionConstraints_s_C_v2=new C$99j,C$99ir.SolvePositionConstraints_s_impulse=new C$99j;var C$99tr,C$99er=C$99ir;function C$99ir(C$99t){var C$99e=C$99tr.call(this,C$99t)||this;return C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_impulse=new C$99b,C$99e.m_motorImpulse=0,C$99e.m_enableMotor=!1,C$99e.m_maxMotorTorque=0,C$99e.m_motorSpeed=0,C$99e.m_enableLimit=!1,C$99e.m_referenceAngle=0,C$99e.m_lowerAngle=0,C$99e.m_upperAngle=0,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_mass=new C$99k,C$99e.m_motorMass=0,C$99e.m_limitState=C$99H.b2LimitState.e_inactiveLimit,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_K=new C$99F,C$99e.m_localAnchorA.Copy(C$99f(C$99t.localAnchorA,C$99j.ZERO)),C$99e.m_localAnchorB.Copy(C$99f(C$99t.localAnchorB,C$99j.ZERO)),C$99e.m_referenceAngle=C$99f(C$99t.referenceAngle,0),C$99e.m_impulse.SetZero(),C$99e.m_motorImpulse=0,C$99e.m_lowerAngle=C$99f(C$99t.lowerAngle,0),C$99e.m_upperAngle=C$99f(C$99t.upperAngle,0),C$99e.m_maxMotorTorque=C$99f(C$99t.maxMotorTorque,0),C$99e.m_motorSpeed=C$99f(C$99t.motorSpeed,0),C$99e.m_enableLimit=C$99f(C$99t.enableLimit,!1),C$99e.m_enableMotor=C$99f(C$99t.enableMotor,!1),C$99e.m_limitState=C$99H.b2LimitState.e_inactiveLimit,C$99e}C$99Di(C$99sr,C$99nr=C$99$i);var C$99nr,C$99rr=C$99sr;function C$99sr(){var C$99t=C$99nr.call(this,C$99H.b2JointType.e_ropeJoint)||this;return C$99t.localAnchorA=new C$99j(-1,0),C$99t.localAnchorB=new C$99j(1,0),C$99t.maxLength=0,C$99t}C$99Di(C$99cr,C$99or=C$99en),C$99cr.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e=C$99t.positions[this.m_indexA].c,C$99i=C$99t.positions[this.m_indexA].a,C$99n=C$99t.velocities[this.m_indexA].v,C$99r=C$99t.velocities[this.m_indexA].w,C$99s=C$99t.positions[this.m_indexB].c,C$99o=C$99t.positions[this.m_indexB].a,C$99a=C$99t.velocities[this.m_indexB].v,C$99c=C$99t.velocities[this.m_indexB].w,C$99i=this.m_qA.SetAngle(C$99i),C$99o=this.m_qB.SetAngle(C$99o),C$99i=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99i,this.m_lalcA,this.m_rA),C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99o,this.m_lalcB,this.m_rB),this.m_u.Copy(C$99s).SelfAdd(this.m_rB).SelfSub(C$99e).SelfSub(this.m_rA),this.m_length=this.m_u.Length(),this.m_length-this.m_maxLength);if(this.m_state=0<C$99i?C$99H.b2LimitState.e_atUpperLimit:C$99H.b2LimitState.e_inactiveLimit,!(.008<this.m_length))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);C$99o=C$99j.CrossVV(this.m_rA,this.m_u),C$99s=C$99j.CrossVV(this.m_rB,this.m_u),C$99e=this.m_invMassA+this.m_invIA*C$99o*C$99o+this.m_invMassB+this.m_invIB*C$99s*C$99s;this.m_mass=0!==C$99e?1/C$99e:0,C$99t.step.warmStarting?(this.m_impulse*=C$99t.step.dtRatio,C$99i=C$99j.MulSV(this.m_impulse,this.m_u,C$99cr.InitVelocityConstraints_s_P),C$99n.SelfMulSub(this.m_invMassA,C$99i),C$99r-=this.m_invIA*C$99j.CrossVV(this.m_rA,C$99i),C$99a.SelfMulAdd(this.m_invMassB,C$99i),C$99c+=this.m_invIB*C$99j.CrossVV(this.m_rB,C$99i)):this.m_impulse=0,C$99t.velocities[this.m_indexA].w=C$99r,C$99t.velocities[this.m_indexB].w=C$99c},C$99cr.prototype.SolveVelocityConstraints=function(C$99t){var C$99e=C$99t.velocities[this.m_indexA].v,C$99i=C$99t.velocities[this.m_indexA].w,C$99n=C$99t.velocities[this.m_indexB].v,C$99r=C$99t.velocities[this.m_indexB].w,C$99s=C$99j.AddVCrossSV(C$99e,C$99i,this.m_rA,C$99cr.SolveVelocityConstraints_s_vpA),C$99o=C$99j.AddVCrossSV(C$99n,C$99r,this.m_rB,C$99cr.SolveVelocityConstraints_s_vpB),C$99a=this.m_length-this.m_maxLength,C$99o=C$99j.DotVV(this.m_u,C$99j.SubVV(C$99o,C$99s,C$99j.s_t0)),C$99s=(C$99a<0&&(C$99o+=C$99t.step.inv_dt*C$99a),-this.m_mass*C$99o),C$99a=this.m_impulse,C$99o=(this.m_impulse=C$99L(0,this.m_impulse+C$99s),C$99s=this.m_impulse-C$99a,C$99j.MulSV(C$99s,this.m_u,C$99cr.SolveVelocityConstraints_s_P));C$99e.SelfMulSub(this.m_invMassA,C$99o),C$99i-=this.m_invIA*C$99j.CrossVV(this.m_rA,C$99o),C$99n.SelfMulAdd(this.m_invMassB,C$99o),C$99r+=this.m_invIB*C$99j.CrossVV(this.m_rB,C$99o),C$99t.velocities[this.m_indexA].w=C$99i,C$99t.velocities[this.m_indexB].w=C$99r},C$99cr.prototype.SolvePositionConstraints=function(C$99t){var C$99e=C$99t.positions[this.m_indexA].c,C$99i=C$99t.positions[this.m_indexA].a,C$99n=C$99t.positions[this.m_indexB].c,C$99r=C$99t.positions[this.m_indexB].a,C$99s=this.m_qA.SetAngle(C$99i),C$99o=this.m_qB.SetAngle(C$99r),C$99s=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99s,this.m_lalcA,this.m_rA)),C$99o=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99o,this.m_lalcB,this.m_rB)),C$99a=this.m_u.Copy(C$99n).SelfAdd(C$99o).SelfSub(C$99e).SelfSub(C$99s),C$99c=C$99a.Normalize(),C$99l=C$99O(C$99c-this.m_maxLength,0,.2),C$99l=-this.m_mass*C$99l,C$99l=C$99j.MulSV(C$99l,C$99a,C$99cr.SolvePositionConstraints_s_P);return C$99e.SelfMulSub(this.m_invMassA,C$99l),C$99i-=this.m_invIA*C$99j.CrossVV(C$99s,C$99l),C$99n.SelfMulAdd(this.m_invMassB,C$99l),C$99r+=this.m_invIB*C$99j.CrossVV(C$99o,C$99l),C$99t.positions[this.m_indexA].a=C$99i,C$99t.positions[this.m_indexB].a=C$99r,C$99c-this.m_maxLength<.008},C$99cr.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99cr.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99cr.prototype.GetReactionForce=function(C$99t,C$99e){return C$99j.MulSV(C$99t*this.m_impulse,this.m_u,C$99e)},C$99cr.prototype.GetReactionTorque=function(C$99t){return 0},C$99cr.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$99cr.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$99cr.prototype.SetMaxLength=function(C$99t){this.m_maxLength=C$99t},C$99cr.prototype.GetMaxLength=function(){return this.m_maxLength},C$99cr.prototype.GetLimitState=function(){return this.m_state},C$99cr.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.maxLength = %.15f;\n",this.m_maxLength),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99cr.InitVelocityConstraints_s_P=new C$99j,C$99cr.SolveVelocityConstraints_s_vpA=new C$99j,C$99cr.SolveVelocityConstraints_s_vpB=new C$99j,C$99cr.SolveVelocityConstraints_s_P=new C$99j,C$99cr.SolvePositionConstraints_s_P=new C$99j;var C$99or,C$99ar=C$99cr;function C$99cr(C$99t){var C$99e=C$99or.call(this,C$99t)||this;return C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_maxLength=0,C$99e.m_length=0,C$99e.m_impulse=0,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_u=new C$99j,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_mass=0,C$99e.m_state=C$99H.b2LimitState.e_inactiveLimit,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_localAnchorA.Copy(C$99f(C$99t.localAnchorA,new C$99j(-1,0))),C$99e.m_localAnchorB.Copy(C$99f(C$99t.localAnchorB,new C$99j(1,0))),C$99e.m_maxLength=C$99f(C$99t.maxLength,0),C$99e}C$99Di(C$99ur,C$99lr=C$99$i),C$99ur.prototype.Initialize=function(C$99t,C$99e,C$99i){this.bodyA=C$99t,this.bodyB=C$99e,this.bodyA.GetLocalPoint(C$99i,this.localAnchorA),this.bodyB.GetLocalPoint(C$99i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};var C$99lr,C$99hr=C$99ur;function C$99ur(){var C$99t=C$99lr.call(this,C$99H.b2JointType.e_weldJoint)||this;return C$99t.localAnchorA=new C$99j,C$99t.localAnchorB=new C$99j,C$99t.referenceAngle=0,C$99t.frequencyHz=0,C$99t.dampingRatio=0,C$99t}C$99Di(C$99fr,C$99_r=C$99en),C$99fr.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e,C$99i,C$99n,C$99r,C$99s=C$99t.positions[this.m_indexA].a,C$99h=C$99t.velocities[this.m_indexA].v,C$99u=C$99t.velocities[this.m_indexA].w,C$99o=C$99t.positions[this.m_indexB].a,C$99_=C$99t.velocities[this.m_indexB].v,C$99d=C$99t.velocities[this.m_indexB].w,C$99f=this.m_qA.SetAngle(C$99s),C$99p=this.m_qB.SetAngle(C$99o),C$99f=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99f,this.m_lalcA,this.m_rA),C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99p,this.m_lalcB,this.m_rB),this.m_invMassA),C$99p=this.m_invMassB,C$99a=this.m_invIA,C$99c=this.m_invIB,C$99l=this.m_K;C$99l.ex.x=C$99f+C$99p+this.m_rA.y*this.m_rA.y*C$99a+this.m_rB.y*this.m_rB.y*C$99c,C$99l.ey.x=-this.m_rA.y*this.m_rA.x*C$99a-this.m_rB.y*this.m_rB.x*C$99c,C$99l.ez.x=-this.m_rA.y*C$99a-this.m_rB.y*C$99c,C$99l.ex.y=C$99l.ey.x,C$99l.ey.y=C$99f+C$99p+this.m_rA.x*this.m_rA.x*C$99a+this.m_rB.x*this.m_rB.x*C$99c,C$99l.ez.y=this.m_rA.x*C$99a+this.m_rB.x*C$99c,C$99l.ex.z=C$99l.ez.x,C$99l.ey.z=C$99l.ez.y,C$99l.ez.z=C$99a+C$99c,0<this.m_frequencyHz?(C$99l.GetInverse22(this.m_mass),C$99o=C$99o-C$99s-this.m_referenceAngle,C$99s=2*C$99m*this.m_frequencyHz,C$99i=2*(C$99r=0<(C$99e=C$99a+C$99c)?1/C$99e:0)*this.m_dampingRatio*C$99s,C$99n=C$99t.step.dt,this.m_gamma=C$99n*(C$99i+C$99n*(C$99i=C$99r*C$99s*C$99s)),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=C$99o*C$99n*C$99i*this.m_gamma,C$99e+=this.m_gamma,this.m_mass.ez.z=0!==C$99e?1/C$99e:0):(C$99l.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0),C$99t.step.warmStarting?(this.m_impulse.SelfMul(C$99t.step.dtRatio),C$99r=C$99fr.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y),C$99h.SelfMulSub(C$99f,C$99r),C$99u-=C$99a*(C$99j.CrossVV(this.m_rA,C$99r)+this.m_impulse.z),C$99_.SelfMulAdd(C$99p,C$99r),C$99d+=C$99c*(C$99j.CrossVV(this.m_rB,C$99r)+this.m_impulse.z)):this.m_impulse.SetZero(),C$99t.velocities[this.m_indexA].w=C$99u,C$99t.velocities[this.m_indexB].w=C$99d},C$99fr.prototype.SolveVelocityConstraints=function(C$99t){var C$99e,C$99i,C$99n=C$99t.velocities[this.m_indexA].v,C$99r=C$99t.velocities[this.m_indexA].w,C$99s=C$99t.velocities[this.m_indexB].v,C$99o=C$99t.velocities[this.m_indexB].w,C$99a=this.m_invMassA,C$99h=this.m_invMassB,C$99c=this.m_invIA,C$99l=this.m_invIB;0<this.m_frequencyHz?(C$99e=-this.m_mass.ez.z*(C$99o-C$99r+this.m_bias+this.m_gamma*this.m_impulse.z),this.m_impulse.z+=C$99e,C$99r-=C$99c*C$99e,C$99e=C$99j.SubVV(C$99j.AddVCrossSV(C$99s,C$99o+=C$99l*C$99e,this.m_rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99n,C$99r,this.m_rA,C$99j.s_t1),C$99fr.SolveVelocityConstraints_s_Cdot1),C$99i=C$99k.MulM33XY(this.m_mass,C$99e.x,C$99e.y,C$99fr.SolveVelocityConstraints_s_impulse1).SelfNeg(),this.m_impulse.x+=C$99i.x,this.m_impulse.y+=C$99i.y,C$99n.SelfMulSub(C$99a,C$99i=C$99i),C$99r-=C$99c*C$99j.CrossVV(this.m_rA,C$99i),C$99s.SelfMulAdd(C$99h,C$99i),C$99o+=C$99l*C$99j.CrossVV(this.m_rB,C$99i)):(C$99e=C$99j.SubVV(C$99j.AddVCrossSV(C$99s,C$99o,this.m_rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99n,C$99r,this.m_rA,C$99j.s_t1),C$99fr.SolveVelocityConstraints_s_Cdot1),C$99e=C$99k.MulM33XYZ(this.m_mass,C$99e.x,C$99e.y,C$99o-C$99r,C$99fr.SolveVelocityConstraints_s_impulse).SelfNeg(),this.m_impulse.SelfAdd(C$99e),C$99i=C$99fr.SolveVelocityConstraints_s_P.Set(C$99e.x,C$99e.y),C$99n.SelfMulSub(C$99a,C$99i),C$99r-=C$99c*(C$99j.CrossVV(this.m_rA,C$99i)+C$99e.z),C$99s.SelfMulAdd(C$99h,C$99i),C$99o+=C$99l*(C$99j.CrossVV(this.m_rB,C$99i)+C$99e.z)),C$99t.velocities[this.m_indexA].w=C$99r,C$99t.velocities[this.m_indexB].w=C$99o},C$99fr.prototype.SolvePositionConstraints=function(C$99t){var C$99h,C$99u,C$99e,C$99i,C$99_=C$99t.positions[this.m_indexA].c,C$99n=C$99t.positions[this.m_indexA].a,C$99d=C$99t.positions[this.m_indexB].c,C$99r=C$99t.positions[this.m_indexB].a,C$99s=this.m_qA.SetAngle(C$99n),C$99o=this.m_qB.SetAngle(C$99r),C$99f=this.m_invMassA,C$99p=this.m_invMassB,C$99a=this.m_invIA,C$99c=this.m_invIB,C$99s=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99s,this.m_lalcA,this.m_rA)),C$99o=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99o,this.m_lalcB,this.m_rB)),C$99l=this.m_K;return C$99l.ex.x=C$99f+C$99p+C$99s.y*C$99s.y*C$99a+C$99o.y*C$99o.y*C$99c,C$99l.ey.x=-C$99s.y*C$99s.x*C$99a-C$99o.y*C$99o.x*C$99c,C$99l.ez.x=-C$99s.y*C$99a-C$99o.y*C$99c,C$99l.ex.y=C$99l.ey.x,C$99l.ey.y=C$99f+C$99p+C$99s.x*C$99s.x*C$99a+C$99o.x*C$99o.x*C$99c,C$99l.ez.y=C$99s.x*C$99a+C$99o.x*C$99c,C$99l.ex.z=C$99l.ez.x,C$99l.ey.z=C$99l.ez.y,C$99l.ez.z=C$99a+C$99c,0<this.m_frequencyHz?(C$99h=(C$99e=C$99j.SubVV(C$99j.AddVV(C$99d,C$99o,C$99j.s_t0),C$99j.AddVV(C$99_,C$99s,C$99j.s_t1),C$99fr.SolvePositionConstraints_s_C1)).Length(),C$99u=0,C$99i=C$99l.Solve22(C$99e.x,C$99e.y,C$99fr.SolvePositionConstraints_s_P).SelfNeg(),C$99_.SelfMulSub(C$99f,C$99i),C$99n-=C$99a*C$99j.CrossVV(C$99s,C$99i),C$99d.SelfMulAdd(C$99p,C$99i),C$99r+=C$99c*C$99j.CrossVV(C$99o,C$99i)):(C$99e=C$99j.SubVV(C$99j.AddVV(C$99d,C$99o,C$99j.s_t0),C$99j.AddVV(C$99_,C$99s,C$99j.s_t1),C$99fr.SolvePositionConstraints_s_C1),C$99o=C$99r-C$99n-this.m_referenceAngle,C$99h=C$99e.Length(),C$99u=C$99D(C$99o),C$99s=C$99l.Solve33(C$99e.x,C$99e.y,C$99o,C$99fr.SolvePositionConstraints_s_impulse).SelfNeg(),C$99i=C$99fr.SolvePositionConstraints_s_P.Set(C$99s.x,C$99s.y),C$99_.SelfMulSub(C$99f,C$99i),C$99n-=C$99a*(C$99j.CrossVV(this.m_rA,C$99i)+C$99s.z),C$99d.SelfMulAdd(C$99p,C$99i),C$99r+=C$99c*(C$99j.CrossVV(this.m_rB,C$99i)+C$99s.z)),C$99t.positions[this.m_indexA].a=C$99n,C$99t.positions[this.m_indexB].a=C$99r,C$99h<=.008&&C$99u<=C$99I},C$99fr.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99fr.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99fr.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e.x=C$99t*this.m_impulse.x,C$99e.y=C$99t*this.m_impulse.y,C$99e},C$99fr.prototype.GetReactionTorque=function(C$99t){return C$99t*this.m_impulse.z},C$99fr.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$99fr.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$99fr.prototype.GetReferenceAngle=function(){return this.m_referenceAngle},C$99fr.prototype.SetFrequency=function(C$99t){this.m_frequencyHz=C$99t},C$99fr.prototype.GetFrequency=function(){return this.m_frequencyHz},C$99fr.prototype.SetDampingRatio=function(C$99t){this.m_dampingRatio=C$99t},C$99fr.prototype.GetDampingRatio=function(){return this.m_dampingRatio},C$99fr.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),C$99t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$99t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99fr.InitVelocityConstraints_s_P=new C$99j,C$99fr.SolveVelocityConstraints_s_Cdot1=new C$99j,C$99fr.SolveVelocityConstraints_s_impulse1=new C$99j,C$99fr.SolveVelocityConstraints_s_impulse=new C$99b,C$99fr.SolveVelocityConstraints_s_P=new C$99j,C$99fr.SolvePositionConstraints_s_C1=new C$99j,C$99fr.SolvePositionConstraints_s_P=new C$99j,C$99fr.SolvePositionConstraints_s_impulse=new C$99b;var C$99_r,C$99dr=C$99fr;function C$99fr(C$99t){var C$99e=C$99_r.call(this,C$99t)||this;return C$99e.m_frequencyHz=0,C$99e.m_dampingRatio=0,C$99e.m_bias=0,C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_referenceAngle=0,C$99e.m_gamma=0,C$99e.m_impulse=new C$99b(0,0,0),C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_mass=new C$99k,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_K=new C$99k,C$99e.m_frequencyHz=C$99f(C$99t.frequencyHz,0),C$99e.m_dampingRatio=C$99f(C$99t.dampingRatio,0),C$99e.m_localAnchorA.Copy(C$99f(C$99t.localAnchorA,C$99j.ZERO)),C$99e.m_localAnchorB.Copy(C$99f(C$99t.localAnchorB,C$99j.ZERO)),C$99e.m_referenceAngle=C$99f(C$99t.referenceAngle,0),C$99e.m_impulse.SetZero(),C$99e}C$99Di(C$99yr,C$99pr=C$99$i),C$99yr.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n){this.bodyA=C$99t,this.bodyB=C$99e,this.bodyA.GetLocalPoint(C$99i,this.localAnchorA),this.bodyB.GetLocalPoint(C$99i,this.localAnchorB),this.bodyA.GetLocalVector(C$99n,this.localAxisA)};var C$99pr,C$99mr=C$99yr;function C$99yr(){var C$99t=C$99pr.call(this,C$99H.b2JointType.e_wheelJoint)||this;return C$99t.localAnchorA=new C$99j(0,0),C$99t.localAnchorB=new C$99j(0,0),C$99t.localAxisA=new C$99j(1,0),C$99t.enableMotor=!1,C$99t.maxMotorTorque=0,C$99t.motorSpeed=0,C$99t.frequencyHz=2,C$99t.dampingRatio=.7,C$99t}C$99Di(C$99xr,C$99gr=C$99en),C$99xr.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C$99xr.prototype.GetMaxMotorTorque=function(){return this.m_maxMotorTorque},C$99xr.prototype.SetSpringFrequencyHz=function(C$99t){this.m_frequencyHz=C$99t},C$99xr.prototype.GetSpringFrequencyHz=function(){return this.m_frequencyHz},C$99xr.prototype.SetSpringDampingRatio=function(C$99t){this.m_dampingRatio=C$99t},C$99xr.prototype.GetSpringDampingRatio=function(){return this.m_dampingRatio},C$99xr.prototype.InitVelocityConstraints=function(C$99t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var C$99e=this.m_invMassA,C$99i=this.m_invMassB,C$99n=this.m_invIA,C$99r=this.m_invIB,C$99s=C$99t.positions[this.m_indexA].c,C$99o=C$99t.positions[this.m_indexA].a,C$99h=C$99t.velocities[this.m_indexA].v,C$99u=C$99t.velocities[this.m_indexA].w,C$99a=C$99t.positions[this.m_indexB].c,C$99c=C$99t.positions[this.m_indexB].a,C$99_=C$99t.velocities[this.m_indexB].v,C$99d=C$99t.velocities[this.m_indexB].w,C$99o=this.m_qA.SetAngle(C$99o),C$99c=this.m_qB.SetAngle(C$99c),C$99l=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99o,this.m_lalcA,this.m_rA)),C$99c=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99c,this.m_lalcB,this.m_rB)),C$99a=C$99j.SubVV(C$99j.AddVV(C$99a,C$99c,C$99j.s_t0),C$99j.AddVV(C$99s,C$99l,C$99j.s_t1),C$99xr.InitVelocityConstraints_s_d);C$99B.MulRV(C$99o,this.m_localYAxisA,this.m_ay),this.m_sAy=C$99j.CrossVV(C$99j.AddVV(C$99a,C$99l,C$99j.s_t0),this.m_ay),this.m_sBy=C$99j.CrossVV(C$99c,this.m_ay),this.m_mass=C$99e+C$99i+C$99n*this.m_sAy*this.m_sAy+C$99r*this.m_sBy*this.m_sBy,0<this.m_mass&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,(this.m_gamma=0)<this.m_frequencyHz?(C$99B.MulRV(C$99o,this.m_localXAxisA,this.m_ax),this.m_sAx=C$99j.CrossVV(C$99j.AddVV(C$99a,C$99l,C$99j.s_t0),this.m_ax),this.m_sBx=C$99j.CrossVV(C$99c,this.m_ax),0<(C$99s=C$99e+C$99i+C$99n*this.m_sAx*this.m_sAx+C$99r*this.m_sBx*this.m_sBx)&&(this.m_springMass=1/C$99s,C$99o=C$99j.DotVV(C$99a,this.m_ax),C$99l=2*C$99m*this.m_frequencyHz,C$99c=2*this.m_springMass*this.m_dampingRatio*C$99l,C$99e=this.m_springMass*C$99l*C$99l,C$99i=C$99t.step.dt,this.m_gamma=C$99i*(C$99c+C$99i*C$99e),0<this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_bias=C$99o*C$99i*C$99e*this.m_gamma,this.m_springMass=C$99s+this.m_gamma,0<this.m_springMass&&(this.m_springMass=1/this.m_springMass))):this.m_springImpulse=0,this.m_enableMotor?(this.m_motorMass=C$99n+C$99r,0<this.m_motorMass&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),C$99t.step.warmStarting?(this.m_impulse*=C$99t.step.dtRatio,this.m_springImpulse*=C$99t.step.dtRatio,this.m_motorImpulse*=C$99t.step.dtRatio,C$99a=C$99j.AddVV(C$99j.MulSV(this.m_impulse,this.m_ay,C$99j.s_t0),C$99j.MulSV(this.m_springImpulse,this.m_ax,C$99j.s_t1),C$99xr.InitVelocityConstraints_s_P),C$99l=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,C$99c=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse,C$99h.SelfMulSub(this.m_invMassA,C$99a),C$99u-=this.m_invIA*C$99l,C$99_.SelfMulAdd(this.m_invMassB,C$99a),C$99d+=this.m_invIB*C$99c):(this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0),C$99t.velocities[this.m_indexA].w=C$99u,C$99t.velocities[this.m_indexB].w=C$99d},C$99xr.prototype.SolveVelocityConstraints=function(C$99t){var C$99h=this.m_invMassA,C$99u=this.m_invMassB,C$99e=this.m_invIA,C$99i=this.m_invIB,C$99n=C$99t.velocities[this.m_indexA].v,C$99r=C$99t.velocities[this.m_indexA].w,C$99s=C$99t.velocities[this.m_indexB].v,C$99o=C$99t.velocities[this.m_indexB].w,C$99a=C$99j.DotVV(this.m_ax,C$99j.SubVV(C$99s,C$99n,C$99j.s_t0))+this.m_sBx*C$99o-this.m_sAx*C$99r,C$99c=-this.m_springMass*(C$99a+this.m_bias+this.m_gamma*this.m_springImpulse),C$99l=(this.m_springImpulse+=C$99c,C$99j.MulSV(C$99c,this.m_ax,C$99xr.SolveVelocityConstraints_s_P)),C$99_=C$99c*this.m_sAx,C$99d=C$99c*this.m_sBx,C$99a=(C$99n.SelfMulSub(C$99h,C$99l),C$99r-=C$99e*C$99_,C$99s.SelfMulAdd(C$99u,C$99l),(C$99o+=C$99i*C$99d)-C$99r-this.m_motorSpeed),C$99c=-this.m_motorMass*C$99a,C$99f=this.m_motorImpulse,C$99p=C$99t.step.dt*this.m_maxMotorTorque,C$99a=(this.m_motorImpulse=C$99O(this.m_motorImpulse+C$99c,-C$99p,C$99p),C$99r-=C$99e*(C$99c=this.m_motorImpulse-C$99f),C$99o+=C$99i*C$99c,C$99j.DotVV(this.m_ay,C$99j.SubVV(C$99s,C$99n,C$99j.s_t0))+this.m_sBy*C$99o-this.m_sAy*C$99r),C$99c=-this.m_mass*C$99a,C$99l=(this.m_impulse+=C$99c,C$99j.MulSV(C$99c,this.m_ay,C$99xr.SolveVelocityConstraints_s_P)),C$99_=C$99c*this.m_sAy,C$99d=C$99c*this.m_sBy;C$99n.SelfMulSub(C$99h,C$99l),C$99r-=C$99e*C$99_,C$99s.SelfMulAdd(C$99u,C$99l),C$99o+=C$99i*C$99d,C$99t.velocities[this.m_indexA].w=C$99r,C$99t.velocities[this.m_indexB].w=C$99o},C$99xr.prototype.SolvePositionConstraints=function(C$99t){var C$99e=C$99t.positions[this.m_indexA].c,C$99i=C$99t.positions[this.m_indexA].a,C$99n=C$99t.positions[this.m_indexB].c,C$99r=C$99t.positions[this.m_indexB].a,C$99s=this.m_qA.SetAngle(C$99i),C$99o=this.m_qB.SetAngle(C$99r),C$99a=(C$99j.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),C$99B.MulRV(C$99s,this.m_lalcA,this.m_rA)),C$99o=(C$99j.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),C$99B.MulRV(C$99o,this.m_lalcB,this.m_rB)),C$99c=C$99j.AddVV(C$99j.SubVV(C$99n,C$99e,C$99j.s_t0),C$99j.SubVV(C$99o,C$99a,C$99j.s_t1),C$99xr.SolvePositionConstraints_s_d),C$99s=C$99B.MulRV(C$99s,this.m_localYAxisA,this.m_ay),C$99a=C$99j.CrossVV(C$99j.AddVV(C$99c,C$99a,C$99j.s_t0),C$99s),C$99o=C$99j.CrossVV(C$99o,C$99s),C$99c=C$99j.DotVV(C$99c,this.m_ay),C$99l=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy,C$99l=0!==C$99l?-C$99c/C$99l:0,C$99s=C$99j.MulSV(C$99l,C$99s,C$99xr.SolvePositionConstraints_s_P),C$99a=C$99l*C$99a,C$99l=C$99l*C$99o;return C$99e.SelfMulSub(this.m_invMassA,C$99s),C$99i-=this.m_invIA*C$99a,C$99n.SelfMulAdd(this.m_invMassB,C$99s),C$99r+=this.m_invIB*C$99l,C$99t.positions[this.m_indexA].a=C$99i,C$99t.positions[this.m_indexB].a=C$99r,C$99D(C$99c)<=.008},C$99xr.prototype.GetDefinition=function(C$99t){return C$99t},C$99xr.prototype.GetAnchorA=function(C$99t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,C$99t)},C$99xr.prototype.GetAnchorB=function(C$99t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,C$99t)},C$99xr.prototype.GetReactionForce=function(C$99t,C$99e){return C$99e.x=C$99t*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),C$99e.y=C$99t*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),C$99e},C$99xr.prototype.GetReactionTorque=function(C$99t){return C$99t*this.m_motorImpulse},C$99xr.prototype.GetLocalAnchorA=function(){return this.m_localAnchorA},C$99xr.prototype.GetLocalAnchorB=function(){return this.m_localAnchorB},C$99xr.prototype.GetLocalAxisA=function(){return this.m_localXAxisA},C$99xr.prototype.GetJointTranslation=function(){return this.GetPrismaticJointTranslation()},C$99xr.prototype.GetJointLinearSpeed=function(){return this.GetPrismaticJointSpeed()},C$99xr.prototype.GetJointAngle=function(){return this.GetRevoluteJointAngle()},C$99xr.prototype.GetJointAngularSpeed=function(){return this.GetRevoluteJointSpeed()},C$99xr.prototype.GetPrismaticJointTranslation=function(){var C$99t=this.m_bodyA,C$99e=this.m_bodyB,C$99i=C$99t.GetWorldPoint(this.m_localAnchorA,new C$99j),C$99e=C$99e.GetWorldPoint(this.m_localAnchorB,new C$99j),C$99e=C$99j.SubVV(C$99e,C$99i,new C$99j),C$99i=C$99t.GetWorldVector(this.m_localXAxisA,new C$99j);return C$99j.DotVV(C$99e,C$99i)},C$99xr.prototype.GetPrismaticJointSpeed=function(){var C$99t=this.m_bodyA,C$99e=this.m_bodyB,C$99i=(C$99j.SubVV(this.m_localAnchorA,C$99t.m_sweep.localCenter,this.m_lalcA),C$99B.MulRV(C$99t.m_xf.q,this.m_lalcA,this.m_rA)),C$99n=(C$99j.SubVV(this.m_localAnchorB,C$99e.m_sweep.localCenter,this.m_lalcB),C$99B.MulRV(C$99e.m_xf.q,this.m_lalcB,this.m_rB)),C$99r=C$99j.AddVV(C$99t.m_sweep.c,C$99i,C$99j.s_t0),C$99s=C$99j.AddVV(C$99e.m_sweep.c,C$99n,C$99j.s_t1),C$99s=C$99j.SubVV(C$99s,C$99r,C$99j.s_t2),C$99r=C$99t.GetWorldVector(this.m_localXAxisA,new C$99j),C$99o=C$99t.m_linearVelocity,C$99a=C$99e.m_linearVelocity,C$99t=C$99t.m_angularVelocity,C$99e=C$99e.m_angularVelocity;return C$99j.DotVV(C$99s,C$99j.CrossSV(C$99t,C$99r,C$99j.s_t0))+C$99j.DotVV(C$99r,C$99j.SubVV(C$99j.AddVCrossSV(C$99a,C$99e,C$99n,C$99j.s_t0),C$99j.AddVCrossSV(C$99o,C$99t,C$99i,C$99j.s_t1),C$99j.s_t0))},C$99xr.prototype.GetRevoluteJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a},C$99xr.prototype.GetRevoluteJointSpeed=function(){var C$99t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-C$99t},C$99xr.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C$99xr.prototype.EnableMotor=function(C$99t){C$99t!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=C$99t)},C$99xr.prototype.SetMotorSpeed=function(C$99t){C$99t!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=C$99t)},C$99xr.prototype.SetMaxMotorTorque=function(C$99t){C$99t!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=C$99t)},C$99xr.prototype.GetMotorTorque=function(C$99t){return C$99t*this.m_motorImpulse},C$99xr.prototype.Dump=function(C$99t){var C$99e=this.m_bodyA.m_islandIndex,C$99i=this.m_bodyB.m_islandIndex;C$99t("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"),C$99t("  jd.bodyA = bodies[%d];\n",C$99e),C$99t("  jd.bodyB = bodies[%d];\n",C$99i),C$99t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),C$99t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),C$99t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),C$99t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),C$99t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),C$99t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),C$99t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),C$99t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),C$99t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),C$99t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)},C$99xr.InitVelocityConstraints_s_d=new C$99j,C$99xr.InitVelocityConstraints_s_P=new C$99j,C$99xr.SolveVelocityConstraints_s_P=new C$99j,C$99xr.SolvePositionConstraints_s_d=new C$99j,C$99xr.SolvePositionConstraints_s_P=new C$99j;var C$99gr,C$99vr=C$99xr;function C$99xr(C$99t){var C$99e=C$99gr.call(this,C$99t)||this;return C$99e.m_frequencyHz=0,C$99e.m_dampingRatio=0,C$99e.m_localAnchorA=new C$99j,C$99e.m_localAnchorB=new C$99j,C$99e.m_localXAxisA=new C$99j,C$99e.m_localYAxisA=new C$99j,C$99e.m_impulse=0,C$99e.m_motorImpulse=0,C$99e.m_springImpulse=0,C$99e.m_maxMotorTorque=0,C$99e.m_motorSpeed=0,C$99e.m_enableMotor=!1,C$99e.m_indexA=0,C$99e.m_indexB=0,C$99e.m_localCenterA=new C$99j,C$99e.m_localCenterB=new C$99j,C$99e.m_invMassA=0,C$99e.m_invMassB=0,C$99e.m_invIA=0,C$99e.m_invIB=0,C$99e.m_ax=new C$99j,C$99e.m_ay=new C$99j,C$99e.m_sAx=0,C$99e.m_sBx=0,C$99e.m_sAy=0,C$99e.m_sBy=0,C$99e.m_mass=0,C$99e.m_motorMass=0,C$99e.m_springMass=0,C$99e.m_bias=0,C$99e.m_gamma=0,C$99e.m_qA=new C$99B,C$99e.m_qB=new C$99B,C$99e.m_lalcA=new C$99j,C$99e.m_lalcB=new C$99j,C$99e.m_rA=new C$99j,C$99e.m_rB=new C$99j,C$99e.m_frequencyHz=C$99f(C$99t.frequencyHz,2),C$99e.m_dampingRatio=C$99f(C$99t.dampingRatio,.7),C$99e.m_localAnchorA.Copy(C$99f(C$99t.localAnchorA,C$99j.ZERO)),C$99e.m_localAnchorB.Copy(C$99f(C$99t.localAnchorB,C$99j.ZERO)),C$99e.m_localXAxisA.Copy(C$99f(C$99t.localAxisA,C$99j.UNITX)),C$99j.CrossOneV(C$99e.m_localXAxisA,C$99e.m_localYAxisA),C$99e.m_maxMotorTorque=C$99f(C$99t.maxMotorTorque,0),C$99e.m_motorSpeed=C$99f(C$99t.motorSpeed,0),C$99e.m_enableMotor=C$99f(C$99t.enableMotor,!1),C$99e.m_ax.SetZero(),C$99e.m_ay.SetZero(),C$99e}function C$99br(C$99t,C$99e){return C$99Y(C$99t*C$99e)}function C$99Ar(C$99t,C$99e){return C$99e<C$99t?C$99t:C$99e}var C$99Cr=function(C$99t){this.prev=null,this.next=null,this.contact=C$99t},C$99Sr=(C$99Tr.prototype.GetManifold=function(){return this.m_manifold},C$99Tr.prototype.GetWorldManifold=function(C$99t){var C$99e=this.m_fixtureA.GetBody(),C$99i=this.m_fixtureB.GetBody(),C$99n=this.m_fixtureA.GetShape(),C$99r=this.m_fixtureB.GetShape();C$99t.Initialize(this.m_manifold,C$99e.GetTransform(),C$99n.m_radius,C$99i.GetTransform(),C$99r.m_radius)},C$99Tr.prototype.IsTouching=function(){return this.m_touchingFlag},C$99Tr.prototype.SetEnabled=function(C$99t){this.m_enabledFlag=C$99t},C$99Tr.prototype.IsEnabled=function(){return this.m_enabledFlag},C$99Tr.prototype.GetNext=function(){return this.m_next},C$99Tr.prototype.GetFixtureA=function(){return this.m_fixtureA},C$99Tr.prototype.GetChildIndexA=function(){return this.m_indexA},C$99Tr.prototype.GetFixtureB=function(){return this.m_fixtureB},C$99Tr.prototype.GetChildIndexB=function(){return this.m_indexB},C$99Tr.prototype.FlagForFiltering=function(){this.m_filterFlag=!0},C$99Tr.prototype.SetFriction=function(C$99t){this.m_friction=C$99t},C$99Tr.prototype.GetFriction=function(){return this.m_friction},C$99Tr.prototype.ResetFriction=function(){this.m_friction=C$99br(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},C$99Tr.prototype.SetRestitution=function(C$99t){this.m_restitution=C$99t},C$99Tr.prototype.GetRestitution=function(){return this.m_restitution},C$99Tr.prototype.ResetRestitution=function(){this.m_restitution=C$99Ar(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},C$99Tr.prototype.SetTangentSpeed=function(C$99t){this.m_tangentSpeed=C$99t},C$99Tr.prototype.GetTangentSpeed=function(){return this.m_tangentSpeed},C$99Tr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=C$99t,this.m_fixtureB=C$99i,this.m_indexA=C$99e,this.m_indexB=C$99n,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,delete this.m_nodeA.contact,this.m_nodeA.prev=null,this.m_nodeA.next=null,delete this.m_nodeA.other,delete this.m_nodeB.contact,this.m_nodeB.prev=null,this.m_nodeB.next=null,delete this.m_nodeB.other,this.m_toiCount=0,this.m_friction=C$99br(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=C$99Ar(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},C$99Tr.prototype.Update=function(C$99t){var C$99e=this.m_oldManifold,C$99e=(this.m_oldManifold=this.m_manifold,this.m_manifold=C$99e,!(this.m_enabledFlag=!0)),C$99i=this.m_touchingFlag,C$99n=this.m_fixtureA.IsSensor(),C$99r=this.m_fixtureB.IsSensor(),C$99n=C$99n||C$99r,C$99r=this.m_fixtureA.GetBody(),C$99s=this.m_fixtureB.GetBody(),C$99h=C$99r.GetTransform(),C$99u=C$99s.GetTransform();if(C$99n){var C$99_=this.m_fixtureA.GetShape(),C$99d=this.m_fixtureB.GetShape(),C$99e=C$99ae(C$99_,this.m_indexA,C$99d,this.m_indexB,C$99h,C$99u);this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,C$99h,C$99u),C$99e=0<this.m_manifold.pointCount;for(var C$99o=0;C$99o<this.m_manifold.pointCount;++C$99o)for(var C$99a=this.m_manifold.points[C$99o],C$99f=(C$99a.normalImpulse=0,C$99a.tangentImpulse=0,C$99a.id),C$99c=0;C$99c<this.m_oldManifold.pointCount;++C$99c){var C$99l=this.m_oldManifold.points[C$99c];if(C$99l.id.key===C$99f.key){C$99a.normalImpulse=C$99l.normalImpulse,C$99a.tangentImpulse=C$99l.tangentImpulse;break}}C$99e!==C$99i&&(C$99r.SetAwake(!0),C$99s.SetAwake(!0))}this.m_touchingFlag=C$99e,!C$99i&&C$99e&&C$99t&&C$99t.BeginContact(this),C$99i&&!C$99e&&C$99t&&C$99t.EndContact(this),!C$99n&&C$99e&&C$99t&&C$99t.PreSolve(this,this.m_oldManifold)},C$99Tr.prototype.ComputeTOI=function(C$99t,C$99e){var C$99i=C$99Tr.ComputeTOI_s_input,C$99t=(C$99i.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),C$99i.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),C$99i.sweepA.Copy(C$99t),C$99i.sweepB.Copy(C$99e),C$99i.tMax=.008,C$99Tr.ComputeTOI_s_output);return C$99Fe(C$99t,C$99i),C$99t.t},C$99Tr.ComputeTOI_s_input=new C$99Se,C$99Tr.ComputeTOI_s_output=new C$99Te,C$99Tr);function C$99Tr(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_indexA=0,this.m_indexB=0,this.m_manifold=new C$99Ht,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new C$99Ht,this.m_nodeA=new C$99Cr(this),this.m_nodeB=new C$99Cr(this)}C$99Di(C$99Mr,C$99wr=C$99Sr),C$99Mr.Create=function(C$99t){return new C$99Mr},C$99Mr.Destroy=function(C$99t,C$99e){},C$99Mr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){C$99wr.prototype.Reset.call(this,C$99t,C$99e,C$99i,C$99n)},C$99Mr.prototype.Evaluate=function(C$99t,C$99e,C$99i){C$99Ge(C$99t,this.m_fixtureA.GetShape(),C$99e,this.m_fixtureB.GetShape(),C$99i)};var C$99wr,C$99Er=C$99Mr;function C$99Mr(){return C$99wr.call(this)||this}C$99Di(C$99Rr,C$99Ir=C$99Sr),C$99Rr.Create=function(C$99t){return new C$99Rr},C$99Rr.Destroy=function(C$99t,C$99e){},C$99Rr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){C$99Ir.prototype.Reset.call(this,C$99t,C$99e,C$99i,C$99n)},C$99Rr.prototype.Evaluate=function(C$99t,C$99e,C$99i){C$99di(C$99t,this.m_fixtureA.GetShape(),C$99e,this.m_fixtureB.GetShape(),C$99i)};var C$99Ir,C$99Br=C$99Rr;function C$99Rr(){return C$99Ir.call(this)||this}C$99Di(C$99Lr,C$99Pr=C$99Sr),C$99Lr.Create=function(C$99t){return new C$99Lr},C$99Lr.Destroy=function(C$99t,C$99e){},C$99Lr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){C$99Pr.prototype.Reset.call(this,C$99t,C$99e,C$99i,C$99n)},C$99Lr.prototype.Evaluate=function(C$99t,C$99e,C$99i){C$99He(C$99t,this.m_fixtureA.GetShape(),C$99e,this.m_fixtureB.GetShape(),C$99i)};var C$99Pr,C$99Dr=C$99Lr;function C$99Lr(){return C$99Pr.call(this)||this}C$99Di(C$99Fr,C$99Vr=C$99Sr),C$99Fr.Create=function(C$99t){return new C$99Fr},C$99Fr.Destroy=function(C$99t,C$99e){},C$99Fr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){C$99Vr.prototype.Reset.call(this,C$99t,C$99e,C$99i,C$99n)},C$99Fr.prototype.Evaluate=function(C$99t,C$99e,C$99i){C$99Ai(C$99t,this.m_fixtureA.GetShape(),C$99e,this.m_fixtureB.GetShape(),C$99i)};var C$99Vr,C$99Or=C$99Fr;function C$99Fr(){return C$99Vr.call(this)||this}C$99Di(C$99Gr,C$99Nr=C$99Sr),C$99Gr.Create=function(C$99t){return new C$99Gr},C$99Gr.Destroy=function(C$99t,C$99e){},C$99Gr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){C$99Nr.prototype.Reset.call(this,C$99t,C$99e,C$99i,C$99n)},C$99Gr.prototype.Evaluate=function(C$99t,C$99e,C$99i){C$99Mi(C$99t,this.m_fixtureA.GetShape(),C$99e,this.m_fixtureB.GetShape(),C$99i)};var C$99Nr,C$99kr=C$99Gr;function C$99Gr(){return C$99Nr.call(this)||this}C$99Di(C$99Wr,C$99zr=C$99Sr),C$99Wr.Create=function(C$99t){return new C$99Wr},C$99Wr.Destroy=function(C$99t,C$99e){},C$99Wr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){C$99zr.prototype.Reset.call(this,C$99t,C$99e,C$99i,C$99n)},C$99Wr.prototype.Evaluate=function(C$99t,C$99e,C$99i){var C$99n=this.m_fixtureA.GetShape(),C$99r=this.m_fixtureB.GetShape(),C$99s=C$99Wr.Evaluate_s_edge;C$99n.GetChildEdge(C$99s,this.m_indexA),C$99Ai(C$99t,C$99s,C$99e,C$99r,C$99i)},C$99Wr.Evaluate_s_edge=new C$99Ni;var C$99zr,C$99Ur=C$99Wr;function C$99Wr(){return C$99zr.call(this)||this}C$99Di(C$99Xr,C$99Hr=C$99Sr),C$99Xr.Create=function(C$99t){return new C$99Xr},C$99Xr.Destroy=function(C$99t,C$99e){},C$99Xr.prototype.Reset=function(C$99t,C$99e,C$99i,C$99n){C$99Hr.prototype.Reset.call(this,C$99t,C$99e,C$99i,C$99n)},C$99Xr.prototype.Evaluate=function(C$99t,C$99e,C$99i){var C$99n=this.m_fixtureA.GetShape(),C$99r=this.m_fixtureB.GetShape(),C$99s=C$99Xr.Evaluate_s_edge;C$99n.GetChildEdge(C$99s,this.m_indexA),C$99Mi(C$99t,C$99s,C$99e,C$99r,C$99i)},C$99Xr.Evaluate_s_edge=new C$99Ni;var C$99Hr,C$99jr=C$99Xr;function C$99Xr(){return C$99Hr.call(this)||this}var C$99Yr=function(){this.createFcn=null,this.destroyFcn=null,this.primary=!1},C$99qr=(C$99Jr.prototype.AddType=function(C$99e,C$99t,C$99i,C$99n){var C$99r=this,C$99s=C$99c(256,function(C$99t){return C$99e(C$99r.m_allocator)});function C$99o(C$99t){return C$99s.pop()||C$99e(C$99t)}function C$99a(C$99t,C$99e){C$99s.push(C$99t)}this.m_registers[C$99i][C$99n].createFcn=C$99o,this.m_registers[C$99i][C$99n].destroyFcn=C$99a,this.m_registers[C$99i][C$99n].primary=!0,C$99i!==C$99n&&(this.m_registers[C$99n][C$99i].createFcn=C$99o,this.m_registers[C$99n][C$99i].destroyFcn=C$99a,this.m_registers[C$99n][C$99i].primary=!1)},C$99Jr.prototype.InitializeRegisters=function(){this.m_registers=[];for(var C$99t=0;C$99t<C$99H.b2ShapeType.e_shapeTypeCount;C$99t++){this.m_registers[C$99t]=[];for(var C$99e=0;C$99e<C$99H.b2ShapeType.e_shapeTypeCount;C$99e++)this.m_registers[C$99t][C$99e]=new C$99Yr}this.AddType(C$99Er.Create,C$99Er.Destroy,C$99H.b2ShapeType.e_circleShape,C$99H.b2ShapeType.e_circleShape),this.AddType(C$99Dr.Create,C$99Dr.Destroy,C$99H.b2ShapeType.e_polygonShape,C$99H.b2ShapeType.e_circleShape),this.AddType(C$99Br.Create,C$99Br.Destroy,C$99H.b2ShapeType.e_polygonShape,C$99H.b2ShapeType.e_polygonShape),this.AddType(C$99Or.Create,C$99Or.Destroy,C$99H.b2ShapeType.e_edgeShape,C$99H.b2ShapeType.e_circleShape),this.AddType(C$99kr.Create,C$99kr.Destroy,C$99H.b2ShapeType.e_edgeShape,C$99H.b2ShapeType.e_polygonShape),this.AddType(C$99Ur.Create,C$99Ur.Destroy,C$99H.b2ShapeType.e_chainShape,C$99H.b2ShapeType.e_circleShape),this.AddType(C$99jr.Create,C$99jr.Destroy,C$99H.b2ShapeType.e_chainShape,C$99H.b2ShapeType.e_polygonShape)},C$99Jr.prototype.Create=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99t.GetType(),C$99s=C$99i.GetType(),C$99r=this.m_registers[C$99r][C$99s];return C$99r.createFcn?(C$99s=C$99r.createFcn(this.m_allocator),C$99r.primary?C$99s.Reset(C$99t,C$99e,C$99i,C$99n):C$99s.Reset(C$99i,C$99n,C$99t,C$99e),C$99s):null},C$99Jr.prototype.Destroy=function(C$99t){var C$99e=C$99t.m_fixtureA,C$99i=C$99t.m_fixtureB,C$99e=(0<C$99t.m_manifold.pointCount&&!C$99e.IsSensor()&&!C$99i.IsSensor()&&(C$99e.GetBody().SetAwake(!0),C$99i.GetBody().SetAwake(!0)),C$99e.GetType()),C$99i=C$99i.GetType(),C$99e=this.m_registers[C$99e][C$99i];C$99e.destroyFcn&&C$99e.destroyFcn(C$99t,this.m_allocator)},C$99Jr);function C$99Jr(C$99t){this.m_allocator=null,this.m_allocator=C$99t,this.InitializeRegisters()}C$99Kr.prototype.SayGoodbyeJoint=function(C$99t){},C$99Kr.prototype.SayGoodbyeFixture=function(C$99t){},C$99Kr.prototype.SayGoodbyeParticleGroup=function(C$99t){},C$99Kr.prototype.SayGoodbyeParticle=function(C$99t,C$99e){};var C$99Zr=C$99Kr;function C$99Kr(){}C$99$r.prototype.ShouldCollide=function(C$99t,C$99e){var C$99i=C$99t.GetBody(),C$99n=C$99e.GetBody();if(C$99n.GetType()===C$99H.b2BodyType.b2_staticBody&&C$99i.GetType()===C$99H.b2BodyType.b2_staticBody)return!1;if(!C$99n.ShouldCollideConnected(C$99i))return!1;C$99n=C$99t.GetFilterData(),C$99i=C$99e.GetFilterData();return C$99n.groupIndex===C$99i.groupIndex&&0!==C$99n.groupIndex?0<C$99n.groupIndex:0!=(C$99n.maskBits&C$99i.categoryBits)&&0!=(C$99n.categoryBits&C$99i.maskBits)},C$99$r.prototype.ShouldCollideFixtureParticle=function(C$99t,C$99e,C$99i){return!0},C$99$r.prototype.ShouldCollideParticleParticle=function(C$99t,C$99e,C$99i){return!0},C$99$r.b2_defaultFilter=new C$99$r;var C$99Qr=C$99$r;function C$99$r(){}var C$99ts=function(){this.normalImpulses=C$99h(2),this.tangentImpulses=C$99h(2),this.count=0},C$99es=(C$99is.prototype.BeginContact=function(C$99t){},C$99is.prototype.EndContact=function(C$99t){},C$99is.prototype.BeginContactFixtureParticle=function(C$99t,C$99e){},C$99is.prototype.EndContactFixtureParticle=function(C$99t,C$99e){},C$99is.prototype.BeginContactParticleParticle=function(C$99t,C$99e){},C$99is.prototype.EndContactParticleParticle=function(C$99t,C$99e){},C$99is.prototype.PreSolve=function(C$99t,C$99e){},C$99is.prototype.PostSolve=function(C$99t,C$99e){},C$99is.b2_defaultListener=new C$99is,C$99is);function C$99is(){}C$99rs.prototype.ReportFixture=function(C$99t){return!0},C$99rs.prototype.ReportParticle=function(C$99t,C$99e){return!1},C$99rs.prototype.ShouldQueryParticleSystem=function(C$99t){return!0};var C$99ns=C$99rs;function C$99rs(){}C$99os.prototype.ReportFixture=function(C$99t,C$99e,C$99i,C$99n){return C$99n},C$99os.prototype.ReportParticle=function(C$99t,C$99e,C$99i,C$99n,C$99r){return 0},C$99os.prototype.ShouldQueryParticleSystem=function(C$99t){return!0};var C$99ss=C$99os;function C$99os(){}C$99cs.prototype.AddPair=function(C$99t,C$99e){var C$99i=C$99t.fixture,C$99n=C$99e.fixture,C$99r=C$99t.childIndex,C$99s=C$99e.childIndex,C$99o=C$99i.GetBody(),C$99t=C$99n.GetBody();if(C$99o!==C$99t){for(var C$99a=C$99t.GetContactList();C$99a;){if(C$99a.other===C$99o){var C$99c=C$99a.contact.GetFixtureA(),C$99l=C$99a.contact.GetFixtureB(),C$99h=C$99a.contact.GetChildIndexA(),C$99u=C$99a.contact.GetChildIndexB();if(C$99c===C$99i&&C$99l===C$99n&&C$99h===C$99r&&C$99u===C$99s)return;if(C$99c===C$99n&&C$99l===C$99i&&C$99h===C$99s&&C$99u===C$99r)return}C$99a=C$99a.next}this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(C$99i,C$99n)||null!==(C$99e=this.m_contactFactory.Create(C$99i,C$99r,C$99n,C$99s))&&(C$99i=C$99e.GetFixtureA(),C$99n=C$99e.GetFixtureB(),C$99r=C$99e.GetChildIndexA(),C$99s=C$99e.GetChildIndexB(),C$99o=C$99i.m_body,C$99t=C$99n.m_body,C$99e.m_prev=null,C$99e.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=C$99e),((this.m_contactList=C$99e).m_nodeA.contact=C$99e).m_nodeA.other=C$99t,C$99e.m_nodeA.prev=null,C$99e.m_nodeA.next=C$99o.m_contactList,null!==C$99o.m_contactList&&(C$99o.m_contactList.prev=C$99e.m_nodeA),C$99o.m_contactList=C$99e.m_nodeA,(C$99e.m_nodeB.contact=C$99e).m_nodeB.other=C$99o,C$99e.m_nodeB.prev=null,C$99e.m_nodeB.next=C$99t.m_contactList,null!==C$99t.m_contactList&&(C$99t.m_contactList.prev=C$99e.m_nodeB),C$99t.m_contactList=C$99e.m_nodeB,C$99i.IsSensor()||C$99n.IsSensor()||(C$99o.SetAwake(!0),C$99t.SetAwake(!0)),++this.m_contactCount)}},C$99cs.prototype.FindNewContacts=function(){var C$99i=this;this.m_broadPhase.UpdatePairs(function(C$99t,C$99e){C$99i.AddPair(C$99t,C$99e)})},C$99cs.prototype.Destroy=function(C$99t){var C$99e=C$99t.GetFixtureA(),C$99i=C$99t.GetFixtureB(),C$99e=C$99e.GetBody(),C$99i=C$99i.GetBody();this.m_contactListener&&C$99t.IsTouching()&&this.m_contactListener.EndContact(C$99t),C$99t.m_prev&&(C$99t.m_prev.m_next=C$99t.m_next),C$99t.m_next&&(C$99t.m_next.m_prev=C$99t.m_prev),C$99t===this.m_contactList&&(this.m_contactList=C$99t.m_next),C$99t.m_nodeA.prev&&(C$99t.m_nodeA.prev.next=C$99t.m_nodeA.next),C$99t.m_nodeA.next&&(C$99t.m_nodeA.next.prev=C$99t.m_nodeA.prev),C$99t.m_nodeA===C$99e.m_contactList&&(C$99e.m_contactList=C$99t.m_nodeA.next),C$99t.m_nodeB.prev&&(C$99t.m_nodeB.prev.next=C$99t.m_nodeB.next),C$99t.m_nodeB.next&&(C$99t.m_nodeB.next.prev=C$99t.m_nodeB.prev),C$99t.m_nodeB===C$99i.m_contactList&&(C$99i.m_contactList=C$99t.m_nodeB.next),this.m_contactFactory.Destroy(C$99t),--this.m_contactCount},C$99cs.prototype.Collide=function(){for(var C$99t=this.m_contactList;C$99t;){var C$99e=C$99t.GetFixtureA(),C$99i=C$99t.GetFixtureB(),C$99n=C$99t.GetChildIndexA(),C$99r=C$99t.GetChildIndexB(),C$99s=C$99e.GetBody(),C$99o=C$99i.GetBody();if(C$99t.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(C$99e,C$99i)){C$99t=(C$99a=C$99t).m_next;this.Destroy(C$99a);continue}C$99t.m_filterFlag=!1}var C$99a,C$99s=C$99s.IsAwake()&&C$99s.m_type!==C$99H.b2BodyType.b2_staticBody,C$99o=C$99o.IsAwake()&&C$99o.m_type!==C$99H.b2BodyType.b2_staticBody;C$99s||C$99o?(C$99s=C$99e.m_proxies[C$99n].treeNode,C$99o=C$99i.m_proxies[C$99r].treeNode,C$99ie(C$99s.aabb,C$99o.aabb)?(C$99t.Update(this.m_contactListener),C$99t=C$99t.m_next):(C$99t=(C$99a=C$99t).m_next,this.Destroy(C$99a))):C$99t=C$99t.m_next}};var C$99as=C$99cs;function C$99cs(){this.m_broadPhase=new C$99fe,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=C$99Qr.b2_defaultFilter,this.m_contactListener=C$99es.b2_defaultListener,this.m_allocator=null,this.m_contactFactory=new C$99qr(this.m_allocator)}C$99hs.prototype.Reset=function(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this};var C$99ls=C$99hs;function C$99hs(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}C$99_s.prototype.Copy=function(C$99t){return this.dt=C$99t.dt,this.inv_dt=C$99t.inv_dt,this.dtRatio=C$99t.dtRatio,this.positionIterations=C$99t.positionIterations,this.velocityIterations=C$99t.velocityIterations,this.particleIterations=C$99t.particleIterations,this.warmStarting=C$99t.warmStarting,this};var C$99us=C$99_s;function C$99_s(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}C$99fs.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99fs})};var C$99ds=C$99fs;function C$99fs(){this.c=new C$99j,this.a=0}C$99ms.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99ms})};var C$99ps=C$99ms;function C$99ms(){this.v=new C$99j,this.w=0}var C$99ys=function(){this.step=new C$99us},C$99gs=(C$99vs.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99vs})},C$99vs);function C$99vs(){this.rA=new C$99j,this.rB=new C$99j,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}C$99bs.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99bs})};var C$99xs=C$99bs;function C$99bs(){this.points=C$99gs.MakeArray(2),this.normal=new C$99j,this.tangent=new C$99j,this.normalMass=new C$99F,this.K=new C$99F,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}C$99Cs.MakeArray=function(C$99t){return C$99c(C$99t,function(C$99t){return new C$99Cs})};var C$99As=C$99Cs;function C$99Cs(){this.localPoints=C$99j.MakeArray(2),this.localNormal=new C$99j,this.localPoint=new C$99j,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new C$99j,this.localCenterB=new C$99j,this.invIA=0,this.invIB=0,this.type=C$99H.b2ManifoldType.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}var C$99Ss=function(){this.step=new C$99us,this.count=0,this.allocator=null},C$99Ts=(C$99ws.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99ws.Initialize_s_pointA,C$99s=C$99ws.Initialize_s_pointB,C$99o=C$99ws.Initialize_s_planePoint,C$99a=C$99ws.Initialize_s_clipPoint;switch(C$99t.type){case C$99H.b2ManifoldType.e_circles:C$99R.MulXV(C$99e,C$99t.localPoint,C$99r),C$99R.MulXV(C$99i,C$99t.localPoints[0],C$99s),C$99j.SubVV(C$99s,C$99r,this.normal).SelfNormalize(),C$99j.MidVV(C$99r,C$99s,this.point),this.separation=C$99j.DotVV(C$99j.SubVV(C$99s,C$99r,C$99j.s_t0),this.normal)-C$99t.radiusA-C$99t.radiusB;break;case C$99H.b2ManifoldType.e_faceA:C$99B.MulRV(C$99e.q,C$99t.localNormal,this.normal),C$99R.MulXV(C$99e,C$99t.localPoint,C$99o),C$99R.MulXV(C$99i,C$99t.localPoints[C$99n],C$99a),this.separation=C$99j.DotVV(C$99j.SubVV(C$99a,C$99o,C$99j.s_t0),this.normal)-C$99t.radiusA-C$99t.radiusB,this.point.Copy(C$99a);break;case C$99H.b2ManifoldType.e_faceB:C$99B.MulRV(C$99i.q,C$99t.localNormal,this.normal),C$99R.MulXV(C$99i,C$99t.localPoint,C$99o),C$99R.MulXV(C$99e,C$99t.localPoints[C$99n],C$99a),this.separation=C$99j.DotVV(C$99j.SubVV(C$99a,C$99o,C$99j.s_t0),this.normal)-C$99t.radiusA-C$99t.radiusB,this.point.Copy(C$99a),this.normal.SelfNeg()}},C$99ws.Initialize_s_pointA=new C$99j,C$99ws.Initialize_s_pointB=new C$99j,C$99ws.Initialize_s_planePoint=new C$99j,C$99ws.Initialize_s_clipPoint=new C$99j,C$99ws);function C$99ws(){this.normal=new C$99j,this.point=new C$99j,this.separation=0}C$99Ms.prototype.Initialize=function(C$99t){if(this.m_step.Copy(C$99t.step),this.m_allocator=C$99t.allocator,this.m_count=C$99t.count,this.m_positionConstraints.length<this.m_count)for(var C$99h=C$99V(2*this.m_positionConstraints.length,this.m_count);this.m_positionConstraints.length<C$99h;)this.m_positionConstraints[this.m_positionConstraints.length]=new C$99As;if(this.m_velocityConstraints.length<this.m_count)for(C$99h=C$99V(2*this.m_velocityConstraints.length,this.m_count);this.m_velocityConstraints.length<C$99h;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new C$99xs;this.m_positions=C$99t.positions,this.m_velocities=C$99t.velocities,this.m_contacts=C$99t.contacts;for(var C$99e=0;C$99e<this.m_count;++C$99e){var C$99i=this.m_contacts[C$99e],C$99n=C$99i.m_fixtureA,C$99r=C$99i.m_fixtureB,C$99u=C$99n.GetShape(),C$99_=C$99r.GetShape(),C$99u=C$99u.m_radius,C$99_=C$99_.m_radius,C$99n=C$99n.GetBody(),C$99r=C$99r.GetBody(),C$99s=C$99i.GetManifold(),C$99d=C$99s.pointCount,C$99o=this.m_velocityConstraints[C$99e],C$99a=(C$99o.friction=C$99i.m_friction,C$99o.restitution=C$99i.m_restitution,C$99o.tangentSpeed=C$99i.m_tangentSpeed,C$99o.indexA=C$99n.m_islandIndex,C$99o.indexB=C$99r.m_islandIndex,C$99o.invMassA=C$99n.m_invMass,C$99o.invMassB=C$99r.m_invMass,C$99o.invIA=C$99n.m_invI,C$99o.invIB=C$99r.m_invI,C$99o.contactIndex=C$99e,C$99o.pointCount=C$99d,C$99o.K.SetZero(),C$99o.normalMass.SetZero(),this.m_positionConstraints[C$99e]);C$99a.indexA=C$99n.m_islandIndex,C$99a.indexB=C$99r.m_islandIndex,C$99a.invMassA=C$99n.m_invMass,C$99a.invMassB=C$99r.m_invMass,C$99a.localCenterA.Copy(C$99n.m_sweep.localCenter),C$99a.localCenterB.Copy(C$99r.m_sweep.localCenter),C$99a.invIA=C$99n.m_invI,C$99a.invIB=C$99r.m_invI,C$99a.localNormal.Copy(C$99s.localNormal),C$99a.localPoint.Copy(C$99s.localPoint),C$99a.pointCount=C$99d,C$99a.radiusA=C$99u,C$99a.radiusB=C$99_,C$99a.type=C$99s.type;for(var C$99c=0;C$99c<C$99d;++C$99c){var C$99f=C$99s.points[C$99c],C$99l=C$99o.points[C$99c];this.m_step.warmStarting?(C$99l.normalImpulse=this.m_step.dtRatio*C$99f.normalImpulse,C$99l.tangentImpulse=this.m_step.dtRatio*C$99f.tangentImpulse):(C$99l.normalImpulse=0,C$99l.tangentImpulse=0),C$99l.rA.SetZero(),C$99l.rB.SetZero(),C$99l.normalMass=0,C$99l.tangentMass=0,C$99l.velocityBias=0,C$99a.localPoints[C$99c].Copy(C$99f.localPoint)}}return this},C$99Ms.prototype.InitializeVelocityConstraints=function(){for(var C$99t=C$99Ms.InitializeVelocityConstraints_s_xfA,C$99e=C$99Ms.InitializeVelocityConstraints_s_xfB,C$99i=C$99Ms.InitializeVelocityConstraints_s_worldManifold,C$99h=0;C$99h<this.m_count;++C$99h){for(var C$99n=this.m_velocityConstraints[C$99h],C$99r=this.m_positionConstraints[C$99h],C$99u=C$99r.radiusA,C$99_=C$99r.radiusB,C$99d=this.m_contacts[C$99n.contactIndex].GetManifold(),C$99s=C$99n.indexA,C$99f=C$99n.indexB,C$99p=C$99n.invMassA,C$99m=C$99n.invMassB,C$99y=C$99n.invIA,C$99g=C$99n.invIB,C$99v=C$99r.localCenterA,C$99r=C$99r.localCenterB,C$99x=this.m_positions[C$99s].c,C$99b=this.m_positions[C$99s].a,C$99A=this.m_velocities[C$99s].v,C$99C=this.m_velocities[C$99s].w,C$99S=this.m_positions[C$99f].c,C$99s=this.m_positions[C$99f].a,C$99T=this.m_velocities[C$99f].v,C$99w=this.m_velocities[C$99f].w,C$99E=(C$99t.q.SetAngle(C$99b),C$99e.q.SetAngle(C$99s),C$99j.SubVV(C$99x,C$99B.MulRV(C$99t.q,C$99v,C$99j.s_t0),C$99t.p),C$99j.SubVV(C$99S,C$99B.MulRV(C$99e.q,C$99r,C$99j.s_t0),C$99e.p),C$99i.Initialize(C$99d,C$99t,C$99u,C$99e,C$99_),C$99n.normal.Copy(C$99i.normal),C$99j.CrossVOne(C$99n.normal,C$99n.tangent),C$99n.pointCount),C$99o=0;C$99o<C$99E;++C$99o){var C$99a=C$99n.points[C$99o],C$99c=(C$99j.SubVV(C$99i.points[C$99o],C$99x,C$99a.rA),C$99j.SubVV(C$99i.points[C$99o],C$99S,C$99a.rB),C$99j.CrossVV(C$99a.rA,C$99n.normal)),C$99l=C$99j.CrossVV(C$99a.rB,C$99n.normal),C$99c=C$99p+C$99m+C$99y*C$99c*C$99c+C$99g*C$99l*C$99l,C$99l=(C$99a.normalMass=0<C$99c?1/C$99c:0,C$99n.tangent),C$99c=C$99j.CrossVV(C$99a.rA,C$99l),C$99l=C$99j.CrossVV(C$99a.rB,C$99l),C$99c=C$99p+C$99m+C$99y*C$99c*C$99c+C$99g*C$99l*C$99l,C$99l=(C$99a.tangentMass=0<C$99c?1/C$99c:0,C$99a.velocityBias=0,C$99j.DotVV(C$99n.normal,C$99j.SubVV(C$99j.AddVCrossSV(C$99T,C$99w,C$99a.rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99A,C$99C,C$99a.rA,C$99j.s_t1),C$99j.s_t0)));C$99l<-1&&(C$99a.velocityBias+=-C$99n.restitution*C$99l)}C$99n.pointCount}},C$99Ms.prototype.WarmStart=function(){for(var C$99t=C$99Ms.WarmStart_s_P,C$99e=0;C$99e<this.m_count;++C$99e){for(var C$99i=this.m_velocityConstraints[C$99e],C$99n=C$99i.indexA,C$99r=C$99i.indexB,C$99s=C$99i.invMassA,C$99h=C$99i.invIA,C$99u=C$99i.invMassB,C$99_=C$99i.invIB,C$99d=C$99i.pointCount,C$99f=this.m_velocities[C$99n].v,C$99o=this.m_velocities[C$99n].w,C$99p=this.m_velocities[C$99r].v,C$99a=this.m_velocities[C$99r].w,C$99m=C$99i.normal,C$99y=C$99i.tangent,C$99c=0;C$99c<C$99d;++C$99c){var C$99l=C$99i.points[C$99c];C$99j.AddVV(C$99j.MulSV(C$99l.normalImpulse,C$99m,C$99j.s_t0),C$99j.MulSV(C$99l.tangentImpulse,C$99y,C$99j.s_t1),C$99t),C$99o-=C$99h*C$99j.CrossVV(C$99l.rA,C$99t),C$99f.SelfMulSub(C$99s,C$99t),C$99a+=C$99_*C$99j.CrossVV(C$99l.rB,C$99t),C$99p.SelfMulAdd(C$99u,C$99t)}this.m_velocities[C$99n].w=C$99o,this.m_velocities[C$99r].w=C$99a}},C$99Ms.prototype.SolveVelocityConstraints=function(){for(var C$99t=C$99Ms.SolveVelocityConstraints_s_dv,C$99e=C$99Ms.SolveVelocityConstraints_s_P,C$99h=0;C$99h<this.m_count;++C$99h){for(var C$99i=this.m_velocityConstraints[C$99h],C$99u=C$99i.indexA,C$99_=C$99i.indexB,C$99d=C$99i.invMassA,C$99f=C$99i.invIA,C$99p=C$99i.invMassB,C$99m=C$99i.invIB,C$99y=C$99i.pointCount,C$99n=this.m_velocities[C$99u].v,C$99r=this.m_velocities[C$99u].w,C$99s=this.m_velocities[C$99_].v,C$99o=this.m_velocities[C$99_].w,C$99g=C$99i.normal,C$99v=C$99i.tangent,C$99x=C$99i.friction,C$99a=0;C$99a<C$99y;++C$99a){var C$99c=C$99i.points[C$99a],C$99b=(C$99j.SubVV(C$99j.AddVCrossSV(C$99s,C$99o,C$99c.rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99n,C$99r,C$99c.rA,C$99j.s_t1),C$99t),C$99j.DotVV(C$99t,C$99v)-C$99i.tangentSpeed),C$99l=C$99c.tangentMass*-C$99b,C$99b=C$99x*C$99c.normalImpulse;C$99l=(C$99A=C$99O(C$99c.tangentImpulse+C$99l,-C$99b,C$99b))-C$99c.tangentImpulse,C$99c.tangentImpulse=C$99A,C$99j.MulSV(C$99l,C$99v,C$99e),C$99n.SelfMulSub(C$99d,C$99e),C$99r-=C$99f*C$99j.CrossVV(C$99c.rA,C$99e),C$99s.SelfMulAdd(C$99p,C$99e),C$99o+=C$99m*C$99j.CrossVV(C$99c.rB,C$99e)}C$99i.pointCount;for(C$99a=0;C$99a<C$99y;++C$99a){var C$99A,C$99c=C$99i.points[C$99a],C$99C=(C$99j.SubVV(C$99j.AddVCrossSV(C$99s,C$99o,C$99c.rB,C$99j.s_t0),C$99j.AddVCrossSV(C$99n,C$99r,C$99c.rA,C$99j.s_t1),C$99t),C$99j.DotVV(C$99t,C$99g)),C$99l=-C$99c.normalMass*(C$99C-C$99c.velocityBias);C$99l=(C$99A=C$99V(C$99c.normalImpulse+C$99l,0))-C$99c.normalImpulse,C$99c.normalImpulse=C$99A,C$99j.MulSV(C$99l,C$99g,C$99e),C$99n.SelfMulSub(C$99d,C$99e),C$99r-=C$99f*C$99j.CrossVV(C$99c.rA,C$99e),C$99s.SelfMulAdd(C$99p,C$99e),C$99o+=C$99m*C$99j.CrossVV(C$99c.rB,C$99e)}this.m_velocities[C$99u].w=C$99r,this.m_velocities[C$99_].w=C$99o}},C$99Ms.prototype.StoreImpulses=function(){for(var C$99t=0;C$99t<this.m_count;++C$99t)for(var C$99e=this.m_velocityConstraints[C$99t],C$99i=this.m_contacts[C$99e.contactIndex].GetManifold(),C$99n=0;C$99n<C$99e.pointCount;++C$99n)C$99i.points[C$99n].normalImpulse=C$99e.points[C$99n].normalImpulse,C$99i.points[C$99n].tangentImpulse=C$99e.points[C$99n].tangentImpulse},C$99Ms.prototype.SolvePositionConstraints=function(){for(var C$99t=C$99Ms.SolvePositionConstraints_s_xfA,C$99e=C$99Ms.SolvePositionConstraints_s_xfB,C$99i=C$99Ms.SolvePositionConstraints_s_psm,C$99n=C$99Ms.SolvePositionConstraints_s_rA,C$99r=C$99Ms.SolvePositionConstraints_s_rB,C$99s=C$99Ms.SolvePositionConstraints_s_P,C$99o=0,C$99a=0;C$99a<this.m_count;++C$99a){for(var C$99c=this.m_positionConstraints[C$99a],C$99h=C$99c.indexA,C$99u=C$99c.indexB,C$99_=C$99c.localCenterA,C$99d=C$99c.invMassA,C$99f=C$99c.invIA,C$99p=C$99c.localCenterB,C$99m=C$99c.invMassB,C$99y=C$99c.invIB,C$99g=C$99c.pointCount,C$99v=this.m_positions[C$99h].c,C$99x=this.m_positions[C$99h].a,C$99b=this.m_positions[C$99u].c,C$99A=this.m_positions[C$99u].a,C$99C=0;C$99C<C$99g;++C$99C){C$99t.q.SetAngle(C$99x),C$99e.q.SetAngle(C$99A),C$99j.SubVV(C$99v,C$99B.MulRV(C$99t.q,C$99_,C$99j.s_t0),C$99t.p),C$99j.SubVV(C$99b,C$99B.MulRV(C$99e.q,C$99p,C$99j.s_t0),C$99e.p),C$99i.Initialize(C$99c,C$99t,C$99e,C$99C);var C$99S=C$99i.normal,C$99T=C$99i.point,C$99l=C$99i.separation,C$99T=(C$99j.SubVV(C$99T,C$99v,C$99n),C$99j.SubVV(C$99T,C$99b,C$99r),C$99o=C$99L(C$99o,C$99l),C$99O(.2*(C$99l+.008),-.2,0)),C$99l=C$99j.CrossVV(C$99n,C$99S),C$99w=C$99j.CrossVV(C$99r,C$99S),C$99l=C$99d+C$99m+C$99f*C$99l*C$99l+C$99y*C$99w*C$99w;C$99j.MulSV(0<C$99l?-C$99T/C$99l:0,C$99S,C$99s),C$99v.SelfMulSub(C$99d,C$99s),C$99x-=C$99f*C$99j.CrossVV(C$99n,C$99s),C$99b.SelfMulAdd(C$99m,C$99s),C$99A+=C$99y*C$99j.CrossVV(C$99r,C$99s)}this.m_positions[C$99h].a=C$99x,this.m_positions[C$99u].a=C$99A}return-.024<C$99o},C$99Ms.prototype.SolveTOIPositionConstraints=function(C$99h,C$99u){for(var C$99t=C$99Ms.SolveTOIPositionConstraints_s_xfA,C$99e=C$99Ms.SolveTOIPositionConstraints_s_xfB,C$99i=C$99Ms.SolveTOIPositionConstraints_s_psm,C$99n=C$99Ms.SolveTOIPositionConstraints_s_rA,C$99r=C$99Ms.SolveTOIPositionConstraints_s_rB,C$99s=C$99Ms.SolveTOIPositionConstraints_s_P,C$99_=0,C$99d=0;C$99d<this.m_count;++C$99d){for(var C$99o=this.m_positionConstraints[C$99d],C$99a=C$99o.indexA,C$99c=C$99o.indexB,C$99f=C$99o.localCenterA,C$99p=C$99o.localCenterB,C$99m=C$99o.pointCount,C$99y=0,C$99g=0,C$99v=(C$99a!==C$99h&&C$99a!==C$99u||(C$99y=C$99o.invMassA,C$99g=C$99o.invIA),0),C$99x=0,C$99b=(C$99c!==C$99h&&C$99c!==C$99u||(C$99v=C$99o.invMassB,C$99x=C$99o.invIB),this.m_positions[C$99a].c),C$99A=this.m_positions[C$99a].a,C$99C=this.m_positions[C$99c].c,C$99S=this.m_positions[C$99c].a,C$99T=0;C$99T<C$99m;++C$99T){C$99t.q.SetAngle(C$99A),C$99e.q.SetAngle(C$99S),C$99j.SubVV(C$99b,C$99B.MulRV(C$99t.q,C$99f,C$99j.s_t0),C$99t.p),C$99j.SubVV(C$99C,C$99B.MulRV(C$99e.q,C$99p,C$99j.s_t0),C$99e.p),C$99i.Initialize(C$99o,C$99t,C$99e,C$99T);var C$99w=C$99i.normal,C$99E=C$99i.point,C$99l=C$99i.separation,C$99E=(C$99j.SubVV(C$99E,C$99b,C$99n),C$99j.SubVV(C$99E,C$99C,C$99r),C$99_=C$99L(C$99_,C$99l),C$99O(.75*(C$99l+.008),-.2,0)),C$99l=C$99j.CrossVV(C$99n,C$99w),C$99M=C$99j.CrossVV(C$99r,C$99w),C$99l=C$99y+C$99v+C$99g*C$99l*C$99l+C$99x*C$99M*C$99M;C$99j.MulSV(0<C$99l?-C$99E/C$99l:0,C$99w,C$99s),C$99b.SelfMulSub(C$99y,C$99s),C$99A-=C$99g*C$99j.CrossVV(C$99n,C$99s),C$99C.SelfMulAdd(C$99v,C$99s),C$99S+=C$99x*C$99j.CrossVV(C$99r,C$99s)}this.m_positions[C$99a].a=C$99A,this.m_positions[C$99c].a=C$99S}return-.012<=C$99_},C$99Ms.InitializeVelocityConstraints_s_xfA=new C$99R,C$99Ms.InitializeVelocityConstraints_s_xfB=new C$99R,C$99Ms.InitializeVelocityConstraints_s_worldManifold=new C$99Xt,C$99Ms.WarmStart_s_P=new C$99j,C$99Ms.SolveVelocityConstraints_s_dv=new C$99j,C$99Ms.SolveVelocityConstraints_s_dv1=new C$99j,C$99Ms.SolveVelocityConstraints_s_dv2=new C$99j,C$99Ms.SolveVelocityConstraints_s_P=new C$99j,C$99Ms.SolveVelocityConstraints_s_a=new C$99j,C$99Ms.SolveVelocityConstraints_s_b=new C$99j,C$99Ms.SolveVelocityConstraints_s_x=new C$99j,C$99Ms.SolveVelocityConstraints_s_d=new C$99j,C$99Ms.SolveVelocityConstraints_s_P1=new C$99j,C$99Ms.SolveVelocityConstraints_s_P2=new C$99j,C$99Ms.SolveVelocityConstraints_s_P1P2=new C$99j,C$99Ms.SolvePositionConstraints_s_xfA=new C$99R,C$99Ms.SolvePositionConstraints_s_xfB=new C$99R,C$99Ms.SolvePositionConstraints_s_psm=new C$99Ts,C$99Ms.SolvePositionConstraints_s_rA=new C$99j,C$99Ms.SolvePositionConstraints_s_rB=new C$99j,C$99Ms.SolvePositionConstraints_s_P=new C$99j,C$99Ms.SolveTOIPositionConstraints_s_xfA=new C$99R,C$99Ms.SolveTOIPositionConstraints_s_xfB=new C$99R,C$99Ms.SolveTOIPositionConstraints_s_psm=new C$99Ts,C$99Ms.SolveTOIPositionConstraints_s_rA=new C$99j,C$99Ms.SolveTOIPositionConstraints_s_rB=new C$99j,C$99Ms.SolveTOIPositionConstraints_s_P=new C$99j;var C$99Es=C$99Ms;function C$99Ms(){this.m_step=new C$99us,this.m_allocator=null,this.m_positionConstraints=C$99As.MakeArray(1024),this.m_velocityConstraints=C$99xs.MakeArray(1024),this.m_count=0}C$99Bs.prototype.Initialize=function(C$99t,C$99e,C$99i,C$99n,C$99r){if(this.m_bodyCapacity=C$99t,this.m_contactCapacity=C$99e,this.m_jointCapacity=C$99i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=C$99n,this.m_listener=C$99r,this.m_positions.length<C$99t)for(var C$99s=C$99V(2*this.m_positions.length,C$99t);this.m_positions.length<C$99s;)this.m_positions[this.m_positions.length]=new C$99ds;if(this.m_velocities.length<C$99t)for(C$99s=C$99V(2*this.m_velocities.length,C$99t);this.m_velocities.length<C$99s;)this.m_velocities[this.m_velocities.length]=new C$99ps},C$99Bs.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},C$99Bs.prototype.AddBody=function(C$99t){C$99t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=C$99t},C$99Bs.prototype.AddContact=function(C$99t){this.m_contacts[this.m_contactCount++]=C$99t},C$99Bs.prototype.AddJoint=function(C$99t){this.m_joints[this.m_jointCount++]=C$99t},C$99Bs.prototype.Solve=function(C$99h,C$99t,C$99u,C$99_){for(var C$99e=C$99Bs.s_timer.Reset(),C$99i=C$99t.dt,C$99n=0;C$99n<this.m_bodyCount;++C$99n){var C$99r=this.m_bodies[C$99n],C$99d=(this.m_positions[C$99n].c.Copy(C$99r.m_sweep.c),C$99r.m_sweep.a),C$99s=this.m_velocities[C$99n].v.Copy(C$99r.m_linearVelocity),C$99o=C$99r.m_angularVelocity;C$99r.m_sweep.c0.Copy(C$99r.m_sweep.c),C$99r.m_sweep.a0=C$99r.m_sweep.a,C$99r.m_type===C$99H.b2BodyType.b2_dynamicBody&&(C$99s.x+=C$99i*(C$99r.m_gravityScale*C$99u.x+C$99r.m_invMass*C$99r.m_force.x),C$99s.y+=C$99i*(C$99r.m_gravityScale*C$99u.y+C$99r.m_invMass*C$99r.m_force.y),C$99o+=C$99i*C$99r.m_invI*C$99r.m_torque,C$99s.SelfMul(1/(1+C$99i*C$99r.m_linearDamping)),C$99o*=1/(1+C$99i*C$99r.m_angularDamping)),this.m_positions[C$99n].a=C$99d,this.m_velocities[C$99n].w=C$99o}C$99e.Reset();var C$99a=C$99Bs.s_solverData,C$99c=(C$99a.step.Copy(C$99t),C$99a.positions=this.m_positions,C$99a.velocities=this.m_velocities,C$99Bs.s_contactSolverDef),C$99l=(C$99c.step.Copy(C$99t),C$99c.contacts=this.m_contacts,C$99c.count=this.m_contactCount,C$99c.positions=this.m_positions,C$99c.velocities=this.m_velocities,C$99c.allocator=this.m_allocator,C$99Bs.s_contactSolver.Initialize(C$99c));C$99l.InitializeVelocityConstraints(),C$99t.warmStarting&&C$99l.WarmStart();for(C$99n=0;C$99n<this.m_jointCount;++C$99n)this.m_joints[C$99n].InitVelocityConstraints(C$99a);C$99h.solveInit=C$99e.GetMilliseconds(),C$99e.Reset();for(C$99n=0;C$99n<C$99t.velocityIterations;++C$99n){for(var C$99f=0;C$99f<this.m_jointCount;++C$99f)this.m_joints[C$99f].SolveVelocityConstraints(C$99a);C$99l.SolveVelocityConstraints()}C$99l.StoreImpulses(),C$99h.solveVelocity=C$99e.GetMilliseconds();for(C$99n=0;C$99n<this.m_bodyCount;++C$99n){var C$99p,C$99m=this.m_positions[C$99n].c,C$99d=this.m_positions[C$99n].a,C$99s=this.m_velocities[C$99n].v,C$99o=this.m_velocities[C$99n].w,C$99y=C$99j.MulSV(C$99i,C$99s,C$99Bs.s_translation),C$99y=(4<C$99j.DotVV(C$99y,C$99y)&&(C$99p=2/C$99y.Length(),C$99s.SelfMul(C$99p)),C$99i*C$99o);C$99w<C$99y*C$99y&&(C$99o*=C$99p=C$99T/C$99D(C$99y)),C$99m.x+=C$99i*C$99s.x,C$99m.y+=C$99i*C$99s.y,C$99d+=C$99i*C$99o,this.m_positions[C$99n].a=C$99d,this.m_velocities[C$99n].w=C$99o}C$99e.Reset();for(var C$99g=!1,C$99n=0;C$99n<C$99t.positionIterations;++C$99n){for(var C$99v=C$99l.SolvePositionConstraints(),C$99x=!0,C$99f=0;C$99f<this.m_jointCount;++C$99f)var C$99b=this.m_joints[C$99f].SolvePositionConstraints(C$99a),C$99x=C$99x&&C$99b;if(C$99v&&C$99x){C$99g=!0;break}}for(C$99n=0;C$99n<this.m_bodyCount;++C$99n){var C$99A=this.m_bodies[C$99n];C$99A.m_sweep.c.Copy(this.m_positions[C$99n].c),C$99A.m_sweep.a=this.m_positions[C$99n].a,C$99A.m_linearVelocity.Copy(this.m_velocities[C$99n].v),C$99A.m_angularVelocity=this.m_velocities[C$99n].w,C$99A.SynchronizeTransform()}if(C$99h.solvePosition=C$99e.GetMilliseconds(),this.Report(C$99l.m_velocityConstraints),C$99_){for(var C$99C=C$99P,C$99n=0;C$99n<this.m_bodyCount;++C$99n)(C$99r=this.m_bodies[C$99n]).GetType()!==C$99H.b2BodyType.b2_staticBody&&(C$99C=!C$99r.m_autoSleepFlag||.0012184696791469947<C$99r.m_angularVelocity*C$99r.m_angularVelocity||1e-4<C$99j.DotVV(C$99r.m_linearVelocity,C$99r.m_linearVelocity)?C$99r.m_sleepTime=0:(C$99r.m_sleepTime+=C$99i,C$99L(C$99C,C$99r.m_sleepTime)));if(.5<=C$99C&&C$99g)for(C$99n=0;C$99n<this.m_bodyCount;++C$99n)(C$99r=this.m_bodies[C$99n]).SetAwake(!1)}},C$99Bs.prototype.SolveTOI=function(C$99t,C$99e,C$99i){for(var C$99n=0;C$99n<this.m_bodyCount;++C$99n){var C$99r=this.m_bodies[C$99n];this.m_positions[C$99n].c.Copy(C$99r.m_sweep.c),this.m_positions[C$99n].a=C$99r.m_sweep.a,this.m_velocities[C$99n].v.Copy(C$99r.m_linearVelocity),this.m_velocities[C$99n].w=C$99r.m_angularVelocity}for(var C$99s=C$99Bs.s_contactSolverDef,C$99o=(C$99s.contacts=this.m_contacts,C$99s.count=this.m_contactCount,C$99s.allocator=this.m_allocator,C$99s.step.Copy(C$99t),C$99s.positions=this.m_positions,C$99s.velocities=this.m_velocities,C$99Bs.s_contactSolver.Initialize(C$99s)),C$99n=0;C$99n<C$99t.positionIterations&&!C$99o.SolveTOIPositionConstraints(C$99e,C$99i);++C$99n);this.m_bodies[C$99e].m_sweep.c0.Copy(this.m_positions[C$99e].c),this.m_bodies[C$99e].m_sweep.a0=this.m_positions[C$99e].a,this.m_bodies[C$99i].m_sweep.c0.Copy(this.m_positions[C$99i].c),this.m_bodies[C$99i].m_sweep.a0=this.m_positions[C$99i].a,C$99o.InitializeVelocityConstraints();for(C$99n=0;C$99n<C$99t.velocityIterations;++C$99n)C$99o.SolveVelocityConstraints();for(var C$99a=C$99t.dt,C$99n=0;C$99n<this.m_bodyCount;++C$99n){var C$99h,C$99u=this.m_positions[C$99n].c,C$99_=this.m_positions[C$99n].a,C$99d=this.m_velocities[C$99n].v,C$99c=this.m_velocities[C$99n].w,C$99l=C$99j.MulSV(C$99a,C$99d,C$99Bs.s_translation),C$99l=(4<C$99j.DotVV(C$99l,C$99l)&&(C$99h=2/C$99l.Length(),C$99d.SelfMul(C$99h)),C$99a*C$99c),C$99l=(C$99w<C$99l*C$99l&&(C$99c*=C$99h=C$99T/C$99D(C$99l)),C$99u.SelfMulAdd(C$99a,C$99d),C$99_+=C$99a*C$99c,this.m_positions[C$99n].a=C$99_,this.m_velocities[C$99n].w=C$99c,this.m_bodies[C$99n]);C$99l.m_sweep.c.Copy(C$99u),C$99l.m_sweep.a=C$99_,C$99l.m_linearVelocity.Copy(C$99d),C$99l.m_angularVelocity=C$99c,C$99l.SynchronizeTransform()}this.Report(C$99o.m_velocityConstraints)},C$99Bs.prototype.Report=function(C$99t){if(null!==this.m_listener)for(var C$99e=0;C$99e<this.m_contactCount;++C$99e){var C$99i=this.m_contacts[C$99e];if(C$99i){var C$99n=C$99t[C$99e],C$99r=C$99Bs.s_impulse;C$99r.count=C$99n.pointCount;for(var C$99s=0;C$99s<C$99n.pointCount;++C$99s)C$99r.normalImpulses[C$99s]=C$99n.points[C$99s].normalImpulse,C$99r.tangentImpulses[C$99s]=C$99n.points[C$99s].tangentImpulse;this.m_listener.PostSolve(C$99i,C$99r)}}},C$99Bs.s_timer=new C$99$,C$99Bs.s_solverData=new C$99ys,C$99Bs.s_contactSolverDef=new C$99Ss,C$99Bs.s_contactSolver=new C$99Es,C$99Bs.s_translation=new C$99j,C$99Bs.s_impulse=new C$99ts;var C$99Is=C$99Bs;function C$99Bs(){this.m_allocator=null,this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=C$99ds.MakeArray(1024),this.m_velocities=C$99ps.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}(C$99Us=C$99H.b2ParticleFlag||(C$99H.b2ParticleFlag={}))[C$99Us.b2_waterParticle=0]="b2_waterParticle",C$99Us[C$99Us.b2_zombieParticle=2]="b2_zombieParticle",C$99Us[C$99Us.b2_wallParticle=4]="b2_wallParticle",C$99Us[C$99Us.b2_springParticle=8]="b2_springParticle",C$99Us[C$99Us.b2_elasticParticle=16]="b2_elasticParticle",C$99Us[C$99Us.b2_viscousParticle=32]="b2_viscousParticle",C$99Us[C$99Us.b2_powderParticle=64]="b2_powderParticle",C$99Us[C$99Us.b2_tensileParticle=128]="b2_tensileParticle",C$99Us[C$99Us.b2_colorMixingParticle=256]="b2_colorMixingParticle",C$99Us[C$99Us.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",C$99Us[C$99Us.b2_barrierParticle=1024]="b2_barrierParticle",C$99Us[C$99Us.b2_staticPressureParticle=2048]="b2_staticPressureParticle",C$99Us[C$99Us.b2_reactiveParticle=4096]="b2_reactiveParticle",C$99Us[C$99Us.b2_repulsiveParticle=8192]="b2_repulsiveParticle",C$99Us[C$99Us.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",C$99Us[C$99Us.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",C$99Us[C$99Us.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",C$99Us[C$99Us.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle";var C$99Rs=function(){this.flags=0,this.position=new C$99j,this.velocity=new C$99j,this.color=new C$99J(0,0,0,0),this.lifetime=0,this.userData=null,this.group=null};function C$99Ps(C$99t,C$99e,C$99i){return C$99O(Math.ceil(Math.sqrt(C$99t/(.01*C$99e))*C$99i),1,8)}C$99Ls.prototype.GetIndex=function(){return this.m_index},C$99Ls.prototype.SetIndex=function(C$99t){this.m_index=C$99t};var C$99Ds=C$99Ls;function C$99Ls(){this.m_index=-1}(C$99Us=C$99H.b2ParticleGroupFlag||(C$99H.b2ParticleGroupFlag={}))[C$99Us.b2_solidParticleGroup=1]="b2_solidParticleGroup",C$99Us[C$99Us.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",C$99Us[C$99Us.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",C$99Us[C$99Us.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",C$99Us[C$99Us.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",C$99Us[C$99Us.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask";var C$99Vs=function(){this.flags=0,this.groupFlags=0,this.position=new C$99j,this.angle=0,this.linearVelocity=new C$99j,this.angularVelocity=0,this.color=new C$99J,this.strength=1,this.shapeCount=0,this.stride=0,this.particleCount=0,this.lifetime=0,this.userData=null,this.group=null},C$99Os=(C$99Fs.prototype.GetNext=function(){return this.m_next},C$99Fs.prototype.GetParticleSystem=function(){return this.m_system},C$99Fs.prototype.GetParticleCount=function(){return this.m_lastIndex-this.m_firstIndex},C$99Fs.prototype.GetBufferIndex=function(){return this.m_firstIndex},C$99Fs.prototype.ContainsParticle=function(C$99t){return this.m_firstIndex<=C$99t&&C$99t<this.m_lastIndex},C$99Fs.prototype.GetAllParticleFlags=function(){if(!this.m_system.m_flagsBuffer.data)throw new Error;for(var C$99t=0,C$99e=this.m_firstIndex;C$99e<this.m_lastIndex;C$99e++)C$99t|=this.m_system.m_flagsBuffer.data[C$99e];return C$99t},C$99Fs.prototype.GetGroupFlags=function(){return this.m_groupFlags},C$99Fs.prototype.SetGroupFlags=function(C$99t){C$99t|=this.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,C$99t)},C$99Fs.prototype.GetMass=function(){return this.UpdateStatistics(),this.m_mass},C$99Fs.prototype.GetInertia=function(){return this.UpdateStatistics(),this.m_inertia},C$99Fs.prototype.GetCenter=function(){return this.UpdateStatistics(),this.m_center},C$99Fs.prototype.GetLinearVelocity=function(){return this.UpdateStatistics(),this.m_linearVelocity},C$99Fs.prototype.GetAngularVelocity=function(){return this.UpdateStatistics(),this.m_angularVelocity},C$99Fs.prototype.GetTransform=function(){return this.m_transform},C$99Fs.prototype.GetPosition=function(){return this.m_transform.p},C$99Fs.prototype.GetAngle=function(){return this.m_transform.q.GetAngle()},C$99Fs.prototype.GetLinearVelocityFromWorldPoint=function(C$99t,C$99e){var C$99i=C$99Fs.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),C$99j.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,C$99j.SubVV(C$99t,this.m_center,C$99i),C$99e)},C$99Fs.prototype.GetUserData=function(){return this.m_userData},C$99Fs.prototype.SetUserData=function(C$99t){this.m_userData=C$99t},C$99Fs.prototype.ApplyForce=function(C$99t){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,C$99t)},C$99Fs.prototype.ApplyLinearImpulse=function(C$99t){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,C$99t)},C$99Fs.prototype.DestroyParticles=function(C$99t){if(this.m_system.m_world.IsLocked())throw new Error;for(var C$99e=this.m_firstIndex;C$99e<this.m_lastIndex;C$99e++)this.m_system.DestroyParticle(C$99e,C$99t)},C$99Fs.prototype.UpdateStatistics=function(){if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;var C$99t=new C$99j,C$99e=new C$99j;if(this.m_timestamp!==this.m_system.m_timestamp){var C$99i=this.m_system.GetParticleMass();this.m_mass=C$99i*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(var C$99n,C$99r=this.m_firstIndex;C$99r<this.m_lastIndex;C$99r++)this.m_center.SelfMulAdd(C$99i,this.m_system.m_positionBuffer.data[C$99r]),this.m_linearVelocity.SelfMulAdd(C$99i,this.m_system.m_velocityBuffer.data[C$99r]);0<this.m_mass&&(C$99n=1/this.m_mass,this.m_center.SelfMul(C$99n),this.m_linearVelocity.SelfMul(C$99n)),this.m_inertia=0,this.m_angularVelocity=0;for(C$99r=this.m_firstIndex;C$99r<this.m_lastIndex;C$99r++)C$99j.SubVV(this.m_system.m_positionBuffer.data[C$99r],this.m_center,C$99t),C$99j.SubVV(this.m_system.m_velocityBuffer.data[C$99r],this.m_linearVelocity,C$99e),this.m_inertia+=C$99i*C$99j.DotVV(C$99t,C$99t),this.m_angularVelocity+=C$99i*C$99j.CrossVV(C$99t,C$99e);0<this.m_inertia&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}},C$99Fs.GetLinearVelocityFromWorldPoint_s_t0=new C$99j,C$99Fs);function C$99Fs(C$99t){this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new C$99j,this.m_linearVelocity=new C$99j,this.m_angularVelocity=0,this.m_transform=new C$99R,this.m_userData=null,this.m_system=C$99t}C$99ks.prototype.Push=function(C$99t){if(this.m_back>=this.m_capacity){for(var C$99e=this.m_front;C$99e<this.m_back;C$99e++)this.m_buffer[C$99e-this.m_front]=this.m_buffer[C$99e];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(0<this.m_capacity?(this.m_buffer.concat(C$99c(this.m_capacity,function(C$99t){return null})),this.m_capacity*=2):(this.m_buffer.concat(C$99c(1,function(C$99t){return null})),this.m_capacity=1))}this.m_buffer[this.m_back]=C$99t,this.m_back++},C$99ks.prototype.Pop=function(){this.m_buffer[this.m_front]=null,this.m_front++},C$99ks.prototype.Empty=function(){return this.m_front===this.m_back},C$99ks.prototype.Front=function(){var C$99t=this.m_buffer[this.m_front];if(!C$99t)throw new Error;return C$99t};var C$99Ns=C$99ks;function C$99ks(C$99t){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=C$99c(C$99t,function(C$99t){return null}),this.m_capacity=C$99t}C$99zs.prototype.AddGenerator=function(C$99t,C$99e,C$99i){var C$99n=this.m_generatorBuffer[this.m_generatorCount++];C$99n.center.Copy(C$99t),C$99n.tag=C$99e,C$99n.necessary=C$99i},C$99zs.prototype.Generate=function(C$99h,C$99u){for(var C$99_=1/C$99h,C$99t=new C$99j(+C$99P,+C$99P),C$99d=new C$99j(-C$99P,-C$99P),C$99f=0,C$99e=0;C$99e<this.m_generatorCount;C$99e++)(C$99o=this.m_generatorBuffer[C$99e]).necessary&&(C$99j.MinV(C$99t,C$99o.center,C$99t),C$99j.MaxV(C$99d,C$99o.center,C$99d),++C$99f);if(0===C$99f)return this.m_countX=0,void(this.m_countY=0);C$99t.x-=C$99u,C$99t.y-=C$99u,C$99d.x+=C$99u,C$99d.y+=C$99u,this.m_countX=1+Math.floor(C$99_*(C$99d.x-C$99t.x)),this.m_countY=1+Math.floor(C$99_*(C$99d.y-C$99t.y)),this.m_diagram=[];for(var C$99i=new C$99Ns(4*this.m_countX*this.m_countY),C$99e=0;C$99e<this.m_generatorCount;C$99e++){(C$99o=this.m_generatorBuffer[C$99e]).center.SelfSub(C$99t).SelfMul(C$99_);var C$99n=Math.floor(C$99o.center.x),C$99r=Math.floor(C$99o.center.y);0<=C$99n&&0<=C$99r&&C$99n<this.m_countX&&C$99r<this.m_countY&&C$99i.Push(new C$99zs.Task(C$99n,C$99r,C$99n+C$99r*this.m_countX,C$99o))}for(;!C$99i.Empty();){var C$99n=(C$99a=C$99i.Front()).m_x,C$99r=C$99a.m_y,C$99s=C$99a.m_i,C$99o=C$99a.m_generator;C$99i.Pop(),this.m_diagram[C$99s]||(this.m_diagram[C$99s]=C$99o,0<C$99n&&C$99i.Push(new C$99zs.Task(C$99n-1,C$99r,C$99s-1,C$99o)),0<C$99r&&C$99i.Push(new C$99zs.Task(C$99n,C$99r-1,C$99s-this.m_countX,C$99o)),C$99n<this.m_countX-1&&C$99i.Push(new C$99zs.Task(C$99n+1,C$99r,C$99s+1,C$99o)),C$99r<this.m_countY-1&&C$99i.Push(new C$99zs.Task(C$99n,C$99r+1,C$99s+this.m_countX,C$99o)))}for(C$99r=0;C$99r<this.m_countY;C$99r++)for(C$99n=0;C$99n<this.m_countX-1;C$99n++){C$99s=C$99n+C$99r*this.m_countX;(C$99c=this.m_diagram[C$99s])!==(C$99l=this.m_diagram[C$99s+1])&&(C$99i.Push(new C$99zs.Task(C$99n,C$99r,C$99s,C$99l)),C$99i.Push(new C$99zs.Task(C$99n+1,C$99r,C$99s+1,C$99c)))}for(C$99r=0;C$99r<this.m_countY-1;C$99r++)for(C$99n=0;C$99n<this.m_countX;C$99n++){C$99s=C$99n+C$99r*this.m_countX;(C$99c=this.m_diagram[C$99s])!==(C$99l=this.m_diagram[C$99s+this.m_countX])&&(C$99i.Push(new C$99zs.Task(C$99n,C$99r,C$99s,C$99l)),C$99i.Push(new C$99zs.Task(C$99n,C$99r+1,C$99s+this.m_countX,C$99c)))}for(;!C$99i.Empty();){var C$99a,C$99c,C$99l,C$99p,C$99m,C$99y,C$99n=(C$99a=C$99i.Front()).m_x,C$99r=C$99a.m_y,C$99s=C$99a.m_i,C$99e=C$99a.m_generator;C$99i.Pop(),(C$99c=this.m_diagram[C$99s])!==(C$99l=C$99e)&&(C$99p=C$99c.center.x-C$99n,C$99m=C$99c.center.y-C$99r,(C$99y=C$99l.center.x-C$99n)*C$99y+(C$99y=C$99l.center.y-C$99r)*C$99y<C$99p*C$99p+C$99m*C$99m&&(this.m_diagram[C$99s]=C$99l,0<C$99n&&C$99i.Push(new C$99zs.Task(C$99n-1,C$99r,C$99s-1,C$99l)),0<C$99r&&C$99i.Push(new C$99zs.Task(C$99n,C$99r-1,C$99s-this.m_countX,C$99l)),C$99n<this.m_countX-1&&C$99i.Push(new C$99zs.Task(C$99n+1,C$99r,C$99s+1,C$99l)),C$99r<this.m_countY-1&&C$99i.Push(new C$99zs.Task(C$99n,C$99r+1,C$99s+this.m_countX,C$99l))))}},C$99zs.prototype.GetNodes=function(C$99t){for(var C$99e=0;C$99e<this.m_countY-1;C$99e++)for(var C$99i=0;C$99i<this.m_countX-1;C$99i++){var C$99n=C$99i+C$99e*this.m_countX,C$99r=this.m_diagram[C$99n],C$99s=this.m_diagram[C$99n+1],C$99o=this.m_diagram[C$99n+this.m_countX],C$99n=this.m_diagram[C$99n+1+this.m_countX];C$99s!==C$99o&&(C$99r!==C$99s&&C$99r!==C$99o&&(C$99r.necessary||C$99s.necessary||C$99o.necessary)&&C$99t(C$99r.tag,C$99s.tag,C$99o.tag),C$99n!==C$99s&&C$99n!==C$99o&&(C$99r.necessary||C$99s.necessary||C$99o.necessary)&&C$99t(C$99s.tag,C$99n.tag,C$99o.tag))}};var C$99Gs=C$99zs;function C$99zs(C$99t){this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=[],this.m_generatorBuffer=C$99c(C$99t,function(C$99t){return new C$99zs.Generator}),this.m_generatorCapacity=C$99t}var C$99Us=C$99Gs=C$99zs||{};function C$99Ws(C$99t,C$99e,C$99i,C$99n){this.m_x=C$99t,this.m_y=C$99e,this.m_i=C$99i,this.m_generator=C$99n}function C$99Hs(C$99t,C$99e,C$99i){var C$99n=C$99t[C$99e];C$99t[C$99e]=C$99t[C$99i],C$99t[C$99i]=C$99n}function C$99js(C$99t,C$99e){return C$99t<C$99e}function C$99Xs(C$99t,C$99e,C$99i,C$99n){void 0===C$99e&&(C$99e=0),void 0===C$99i&&(C$99i=C$99t.length-C$99e),void 0===C$99n&&(C$99n=C$99js);for(var C$99r=C$99e,C$99s=[],C$99o=0;;){for(;C$99r+1<C$99i;C$99i++){var C$99a=C$99t[C$99r+Math.floor(Math.random()*(C$99i-C$99r))];C$99s[C$99o++]=C$99i;for(var C$99c=C$99r-1;;){for(;C$99n(C$99t[++C$99c],C$99a););for(;C$99n(C$99a,C$99t[--C$99i]););if(C$99i<=C$99c)break;C$99Hs(C$99t,C$99c,C$99i)}}if(0===C$99o)break;C$99r=C$99i,C$99i=C$99s[--C$99o]}return C$99t}function C$99Ys(C$99t,C$99e,C$99i,C$99n){return C$99Xs(C$99t,C$99e=void 0===C$99e?0:C$99e,C$99i=void 0===C$99i?C$99t.length-C$99e:C$99i,C$99n=void 0===C$99n?C$99js:C$99n)}function C$99qs(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=C$99t.length);for(var C$99n=0,C$99r=0;C$99r<C$99i;++C$99r)C$99e(C$99t[C$99r])||(C$99r!==C$99n?C$99Hs(C$99t,C$99n++,C$99r):++C$99n);return C$99n}function C$99Js(C$99t,C$99e,C$99i,C$99n,C$99r){void 0===C$99r&&(C$99r=C$99js);for(var C$99s=C$99i-C$99e;0<C$99s;){var C$99o=Math.floor(C$99s/2),C$99a=C$99e+C$99o;C$99r(C$99t[C$99a],C$99n)?(C$99e=++C$99a,C$99s-=C$99o+1):C$99s=C$99o}return C$99e}function C$99Zs(C$99t,C$99e,C$99i,C$99n,C$99r){void 0===C$99r&&(C$99r=C$99js);for(var C$99s=C$99i-C$99e;0<C$99s;){var C$99o=Math.floor(C$99s/2),C$99a=C$99e+C$99o;C$99r(C$99n,C$99t[C$99a])?C$99s=C$99o:(C$99e=++C$99a,C$99s-=C$99o+1)}return C$99e}function C$99Ks(C$99t,C$99e,C$99i,C$99n){for(var C$99r=C$99i;C$99e!==C$99r;)C$99Hs(C$99t,C$99e++,C$99r++),C$99r===C$99n?C$99r=C$99i:C$99e===C$99i&&(C$99i=C$99r)}C$99Us.Generator=function(){this.center=new C$99j,this.tag=0,this.necessary=!1},C$99Us.Task=C$99Ws;C$99$s.prototype.Append=function(){return this.count>=this.capacity&&this.Grow(),this.count++},C$99$s.prototype.Reserve=function(C$99t){if(!(this.capacity>=C$99t)){for(var C$99e=this.capacity;C$99e<C$99t;++C$99e)this.data[C$99e]=this.allocator();this.capacity=C$99t}},C$99$s.prototype.Grow=function(){var C$99t=this.capacity?2*this.capacity:256;this.Reserve(C$99t)},C$99$s.prototype.Free=function(){0!==this.data.length&&(this.data=[],this.capacity=0,this.count=0)},C$99$s.prototype.Shorten=function(C$99t){},C$99$s.prototype.Data=function(){return this.data},C$99$s.prototype.GetCount=function(){return this.count},C$99$s.prototype.SetCount=function(C$99t){this.count=C$99t},C$99$s.prototype.GetCapacity=function(){return this.capacity},C$99$s.prototype.RemoveIf=function(C$99t){this.count=C$99qs(this.data,C$99t,this.count)},C$99$s.prototype.Unique=function(C$99t){this.count=function(C$99t,C$99e,C$99i,C$99n){if(C$99e===C$99i)return C$99i;for(var C$99r=C$99e;++C$99e!==C$99i;)C$99n(C$99t[C$99r],C$99t[C$99e])||C$99Hs(C$99t,++C$99r,C$99e);return++C$99r}(this.data,0,this.count,C$99t)};var C$99Qs=C$99$s;function C$99$s(C$99t){this.data=[],this.count=0,this.capacity=0,this.allocator=C$99t}C$99Di(C$99io,C$99to=C$99ns),C$99io.prototype.ShouldQueryParticleSystem=function(C$99t){return!1},C$99io.prototype.ReportFixture=function(C$99t){if(C$99t.IsSensor())return!0;for(var C$99e=C$99t.GetShape().GetChildCount(),C$99i=0;C$99i<C$99e;C$99i++)for(var C$99n,C$99r=C$99t.GetAABB(C$99i),C$99s=this.m_system.GetInsideBoundsEnumerator(C$99r);0<=(C$99n=C$99s.GetNext());)this.ReportFixtureAndParticle(C$99t,C$99i,C$99n);return!0},C$99io.prototype.ReportParticle=function(C$99t,C$99e){return!1},C$99io.prototype.ReportFixtureAndParticle=function(C$99t,C$99e,C$99i){};var C$99to,C$99eo=C$99io;function C$99io(C$99t){var C$99e=C$99to.call(this)||this;return C$99e.m_system=C$99t,C$99e}C$99ro.prototype.SetIndices=function(C$99t,C$99e){this.indexA=C$99t,this.indexB=C$99e},C$99ro.prototype.SetWeight=function(C$99t){this.weight=C$99t},C$99ro.prototype.SetNormal=function(C$99t){this.normal.Copy(C$99t)},C$99ro.prototype.SetFlags=function(C$99t){this.flags=C$99t},C$99ro.prototype.GetIndexA=function(){return this.indexA},C$99ro.prototype.GetIndexB=function(){return this.indexB},C$99ro.prototype.GetWeight=function(){return this.weight},C$99ro.prototype.GetNormal=function(){return this.normal},C$99ro.prototype.GetFlags=function(){return this.flags},C$99ro.prototype.IsEqual=function(C$99t){return this.indexA===C$99t.indexA&&this.indexB===C$99t.indexB&&this.flags===C$99t.flags&&this.weight===C$99t.weight&&this.normal.x===C$99t.normal.x&&this.normal.y===C$99t.normal.y},C$99ro.prototype.IsNotEqual=function(C$99t){return!this.IsEqual(C$99t)},C$99ro.prototype.ApproximatelyEqual=function(C$99t){return this.indexA===C$99t.indexA&&this.indexB===C$99t.indexB&&this.flags===C$99t.flags&&C$99D(this.weight-C$99t.weight)<.01&&C$99j.DistanceSquaredVV(this.normal,C$99t.normal)<1e-4};var C$99no=C$99ro;function C$99ro(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new C$99j,this.flags=0}var C$99so=function(){this.index=0,this.weight=0,this.normal=new C$99j,this.mass=0},C$99oo=function(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0},C$99ao=function(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new C$99j(0,0),this.pb=new C$99j(0,0),this.pc=new C$99j(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0},C$99co=(C$99lo.prototype.Copy=function(C$99t){return this.strictContactCheck=C$99t.strictContactCheck,this.density=C$99t.density,this.gravityScale=C$99t.gravityScale,this.radius=C$99t.radius,this.maxCount=C$99t.maxCount,this.pressureStrength=C$99t.pressureStrength,this.dampingStrength=C$99t.dampingStrength,this.elasticStrength=C$99t.elasticStrength,this.springStrength=C$99t.springStrength,this.viscousStrength=C$99t.viscousStrength,this.surfaceTensionPressureStrength=C$99t.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=C$99t.surfaceTensionNormalStrength,this.repulsiveStrength=C$99t.repulsiveStrength,this.powderStrength=C$99t.powderStrength,this.ejectionStrength=C$99t.ejectionStrength,this.staticPressureStrength=C$99t.staticPressureStrength,this.staticPressureRelaxation=C$99t.staticPressureRelaxation,this.staticPressureIterations=C$99t.staticPressureIterations,this.colorMixingStrength=C$99t.colorMixingStrength,this.destroyByAge=C$99t.destroyByAge,this.lifetimeGranularity=C$99t.lifetimeGranularity,this},C$99lo.prototype.Clone=function(){return(new C$99lo).Copy(this)},C$99lo);function C$99lo(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}function C$99X(C$99t,C$99e){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new C$99X.UserOverridableBuffer,this.m_flagsBuffer=new C$99X.UserOverridableBuffer,this.m_positionBuffer=new C$99X.UserOverridableBuffer,this.m_velocityBuffer=new C$99X.UserOverridableBuffer,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new C$99X.UserOverridableBuffer,this.m_groupBuffer=[],this.m_userDataBuffer=new C$99X.UserOverridableBuffer,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new C$99X.UserOverridableBuffer,this.m_bodyContactCountBuffer=new C$99X.UserOverridableBuffer,this.m_consecutiveContactStepsBuffer=new C$99X.UserOverridableBuffer,this.m_stuckParticleBuffer=new C$99Qs(function(){return 0}),this.m_proxyBuffer=new C$99Qs(function(){return new C$99X.Proxy}),this.m_contactBuffer=new C$99Qs(function(){return new C$99no}),this.m_bodyContactBuffer=new C$99Qs(function(){return new C$99so}),this.m_pairBuffer=new C$99Qs(function(){return new C$99oo}),this.m_triadBuffer=new C$99Qs(function(){return new C$99ao}),this.m_expirationTimeBuffer=new C$99X.UserOverridableBuffer,this.m_indexByExpirationTimeBuffer=new C$99X.UserOverridableBuffer,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new C$99co,this.m_prev=null,this.m_next=null,this.SetStrictContactCheck(C$99t.strictContactCheck),this.SetDensity(C$99t.density),this.SetGravityScale(C$99t.gravityScale),this.SetRadius(C$99t.radius),this.SetMaxParticleCount(C$99t.maxCount),this.m_def=C$99t.Clone(),this.m_world=C$99e,this.SetDestructionByAge(this.m_def.destroyByAge)}C$99H.b2ParticleSystem=(C$99X.computeTag=function(C$99t,C$99e){return(C$99e+C$99X.yOffset>>>0<<C$99X.yShift)+(C$99X.xScale*C$99t+C$99X.xOffset>>>0)>>>0},C$99X.computeRelativeTag=function(C$99t,C$99e,C$99i){return C$99t+(C$99i<<C$99X.yShift)+(C$99e<<C$99X.xShift)>>>0},C$99X.prototype.Drop=function(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)},C$99X.prototype.CreateParticle=function(C$99t){if(this.m_world.IsLocked())throw new Error;if(this.m_count>=this.m_internalAllocatedCapacity&&(C$99e=this.m_count?2*this.m_count:256,this.ReallocateInternalAllocatedBuffers(C$99e)),this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return-1;this.DestroyOldestParticle(0,!1),this.SolveZombie()}var C$99e=this.m_count++;if(!this.m_flagsBuffer.data)throw new Error;if(this.m_flagsBuffer.data[C$99e]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$99e]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$99e]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$99e]=0),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;this.m_positionBuffer.data[C$99e]=(this.m_positionBuffer.data[C$99e]||new C$99j).Copy(C$99f(C$99t.position,C$99j.ZERO)),this.m_velocityBuffer.data[C$99e]=(this.m_velocityBuffer.data[C$99e]||new C$99j).Copy(C$99f(C$99t.velocity,C$99j.ZERO)),this.m_weightBuffer[C$99e]=0,this.m_forceBuffer[C$99e]=(this.m_forceBuffer[C$99e]||new C$99j).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$99e]=0),this.m_depthBuffer&&(this.m_depthBuffer[C$99e]=0);var C$99i=(new C$99J).Copy(C$99f(C$99t.color,C$99J.ZERO)),C$99i=(!this.m_colorBuffer.data&&C$99i.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[C$99e]=(this.m_colorBuffer.data[C$99e]||new C$99J).Copy(C$99i)),(this.m_userDataBuffer.data||C$99t.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[C$99e]=C$99t.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[C$99e]=null),this.m_proxyBuffer.data[this.m_proxyBuffer.Append()]),C$99n=C$99f(C$99t.lifetime,0),C$99r=0<C$99n;if(this.m_expirationTimeBuffer.data||C$99r){if(this.SetParticleLifetime(C$99e,C$99r?C$99n:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_indexByExpirationTimeBuffer.data[C$99e]=C$99e}C$99i.index=C$99e;C$99r=C$99f(C$99t.group,null);return(this.m_groupBuffer[C$99e]=C$99r)&&(C$99r.m_firstIndex<C$99r.m_lastIndex?this.RotateBuffer(C$99r.m_firstIndex,C$99r.m_lastIndex,C$99e):C$99r.m_firstIndex=C$99e,C$99r.m_lastIndex=1+C$99e),this.SetParticleFlags(C$99e,C$99f(C$99t.flags,0)),C$99e},C$99X.prototype.GetParticleHandleFromIndex=function(C$99t){this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);var C$99e=this.m_handleIndexBuffer.data[C$99t];return C$99e||((C$99e=new C$99Ds).SetIndex(C$99t),this.m_handleIndexBuffer.data[C$99t]=C$99e)},C$99X.prototype.DestroyParticle=function(C$99t,C$99e){if(void 0===C$99e&&(C$99e=!1),!this.m_flagsBuffer.data)throw new Error;var C$99i=C$99H.b2ParticleFlag.b2_zombieParticle;C$99e&&(C$99i|=C$99H.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(C$99t,this.m_flagsBuffer.data[C$99t]|C$99i)},C$99X.prototype.DestroyOldestParticle=function(C$99t,C$99e){void 0===C$99e&&(C$99e=!1);var C$99i=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;if(!this.m_expirationTimeBuffer.data)throw new Error;C$99i=this.m_indexByExpirationTimeBuffer.data[C$99i-(C$99t+1)],C$99t=this.m_indexByExpirationTimeBuffer.data[C$99t];this.DestroyParticle(0<this.m_expirationTimeBuffer.data[C$99i]?C$99i:C$99t,C$99e)},C$99X.prototype.DestroyParticlesInShape=function(C$99t,C$99e,C$99i){void 0===C$99i&&(C$99i=!1);var C$99n=C$99X.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked())throw new Error;C$99i=new C$99X.DestroyParticlesInShapeCallback(this,C$99t,C$99e,C$99i);return C$99t.ComputeAABB(C$99n,C$99e,0),this.m_world.QueryAABB(C$99i,C$99n),C$99i.Destroyed()},C$99X.prototype.CreateParticleGroup=function(C$99t){var C$99e=C$99X.CreateParticleGroup_s_transform;if(this.m_world.IsLocked())throw new Error;var C$99i=C$99e,C$99e=(C$99i.SetPositionAngle(C$99f(C$99t.position,C$99j.ZERO),C$99f(C$99t.angle,0)),this.m_count);if(C$99t.shape&&this.CreateParticlesWithShapeForGroup(C$99t.shape,C$99t,C$99i),C$99t.shapes&&this.CreateParticlesWithShapesForGroup(C$99t.shapes,C$99f(C$99t.shapeCount,C$99t.shapes.length),C$99t,C$99i),C$99t.positionData)for(var C$99n=C$99f(C$99t.particleCount,C$99t.positionData.length),C$99r=0;C$99r<C$99n;C$99r++){var C$99s=C$99t.positionData[C$99r];this.CreateParticleForGroup(C$99t,C$99i,C$99s)}var C$99o=this.m_count,C$99a=new C$99Os(this);C$99a.m_firstIndex=C$99e,C$99a.m_lastIndex=C$99o,C$99a.m_strength=C$99f(C$99t.strength,1),C$99a.m_userData=C$99t.userData,C$99a.m_transform.Copy(C$99i),C$99a.m_prev=null,C$99a.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=C$99a),this.m_groupList=C$99a,++this.m_groupCount;for(C$99r=C$99e;C$99r<C$99o;C$99r++)this.m_groupBuffer[C$99r]=C$99a;this.SetGroupFlags(C$99a,C$99f(C$99t.groupFlags,0));var C$99c=new C$99X.ConnectionFilter;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(C$99e,C$99o,C$99c),C$99t.group&&(this.JoinParticleGroups(C$99t.group,C$99a),C$99a=C$99t.group),C$99a},C$99X.prototype.JoinParticleGroups=function(C$99t,C$99e){if(this.m_world.IsLocked())throw new Error;this.RotateBuffer(C$99e.m_firstIndex,C$99e.m_lastIndex,this.m_count),this.RotateBuffer(C$99t.m_firstIndex,C$99t.m_lastIndex,C$99e.m_firstIndex);var C$99i=new C$99X.JoinParticleGroupsFilter(C$99e.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(C$99t.m_firstIndex,C$99e.m_lastIndex,C$99i);for(var C$99n=C$99e.m_firstIndex;C$99n<C$99e.m_lastIndex;C$99n++)this.m_groupBuffer[C$99n]=C$99t;C$99i=C$99t.m_groupFlags|C$99e.m_groupFlags;this.SetGroupFlags(C$99t,C$99i),C$99t.m_lastIndex=C$99e.m_lastIndex,C$99e.m_firstIndex=C$99e.m_lastIndex,this.DestroyParticleGroup(C$99e)},C$99X.prototype.SplitParticleGroup=function(C$99t){this.UpdateContacts(!0);var C$99e=C$99c(C$99t.GetParticleCount(),function(C$99t){return new C$99X.ParticleListNode}),C$99i=(C$99X.InitializeParticleLists(C$99t,C$99e),this.MergeParticleListsInContact(C$99t,C$99e),C$99X.FindLongestParticleList(C$99t,C$99e));this.MergeZombieParticleListNodes(C$99t,C$99e,C$99i),this.CreateParticleGroupsFromParticleList(C$99t,C$99e,C$99i),this.UpdatePairsAndTriadsWithParticleList(C$99t,C$99e)},C$99X.prototype.GetParticleGroupList=function(){return this.m_groupList},C$99X.prototype.GetParticleGroupCount=function(){return this.m_groupCount},C$99X.prototype.GetParticleCount=function(){return this.m_count},C$99X.prototype.GetMaxParticleCount=function(){return this.m_def.maxCount},C$99X.prototype.SetMaxParticleCount=function(C$99t){this.m_def.maxCount=C$99t},C$99X.prototype.GetAllParticleFlags=function(){return this.m_allParticleFlags},C$99X.prototype.GetAllGroupFlags=function(){return this.m_allGroupFlags},C$99X.prototype.SetPaused=function(C$99t){this.m_paused=C$99t},C$99X.prototype.GetPaused=function(){return this.m_paused},C$99X.prototype.SetDensity=function(C$99t){this.m_def.density=C$99t,this.m_inverseDensity=1/this.m_def.density},C$99X.prototype.GetDensity=function(){return this.m_def.density},C$99X.prototype.SetGravityScale=function(C$99t){this.m_def.gravityScale=C$99t},C$99X.prototype.GetGravityScale=function(){return this.m_def.gravityScale},C$99X.prototype.SetDamping=function(C$99t){this.m_def.dampingStrength=C$99t},C$99X.prototype.GetDamping=function(){return this.m_def.dampingStrength},C$99X.prototype.SetStaticPressureIterations=function(C$99t){this.m_def.staticPressureIterations=C$99t},C$99X.prototype.GetStaticPressureIterations=function(){return this.m_def.staticPressureIterations},C$99X.prototype.SetRadius=function(C$99t){this.m_particleDiameter=2*C$99t,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter},C$99X.prototype.GetRadius=function(){return this.m_particleDiameter/2},C$99X.prototype.GetPositionBuffer=function(){if(!this.m_positionBuffer.data)throw new Error;return this.m_positionBuffer.data},C$99X.prototype.GetVelocityBuffer=function(){if(!this.m_velocityBuffer.data)throw new Error;return this.m_velocityBuffer.data},C$99X.prototype.GetColorBuffer=function(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data},C$99X.prototype.GetGroupBuffer=function(){return this.m_groupBuffer},C$99X.prototype.GetWeightBuffer=function(){return this.m_weightBuffer},C$99X.prototype.GetUserDataBuffer=function(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data},C$99X.prototype.GetFlagsBuffer=function(){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data},C$99X.prototype.SetParticleFlags=function(C$99t,C$99e){if(!this.m_flagsBuffer.data)throw new Error;this.m_flagsBuffer.data[C$99t]&~C$99e&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&C$99e&&(C$99e&C$99H.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),C$99e&C$99H.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=C$99e),this.m_flagsBuffer.data[C$99t]=C$99e},C$99X.prototype.GetParticleFlags=function(C$99t){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data[C$99t]},C$99X.prototype.SetFlagsBuffer=function(C$99t,C$99e){this.SetUserOverridableBuffer(this.m_flagsBuffer,C$99t,C$99e)},C$99X.prototype.SetPositionBuffer=function(C$99t,C$99e){this.SetUserOverridableBuffer(this.m_positionBuffer,C$99t,C$99e)},C$99X.prototype.SetVelocityBuffer=function(C$99t,C$99e){this.SetUserOverridableBuffer(this.m_velocityBuffer,C$99t,C$99e)},C$99X.prototype.SetColorBuffer=function(C$99t,C$99e){this.SetUserOverridableBuffer(this.m_colorBuffer,C$99t,C$99e)},C$99X.prototype.SetUserDataBuffer=function(C$99t,C$99e){this.SetUserOverridableBuffer(this.m_userDataBuffer,C$99t,C$99e)},C$99X.prototype.GetContacts=function(){return this.m_contactBuffer.data},C$99X.prototype.GetContactCount=function(){return this.m_contactBuffer.count},C$99X.prototype.GetBodyContacts=function(){return this.m_bodyContactBuffer.data},C$99X.prototype.GetBodyContactCount=function(){return this.m_bodyContactBuffer.count},C$99X.prototype.GetPairs=function(){return this.m_pairBuffer.data},C$99X.prototype.GetPairCount=function(){return this.m_pairBuffer.count},C$99X.prototype.GetTriads=function(){return this.m_triadBuffer.data},C$99X.prototype.GetTriadCount=function(){return this.m_triadBuffer.count},C$99X.prototype.SetStuckThreshold=function(C$99t){0<(this.m_stuckThreshold=C$99t)&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))},C$99X.prototype.GetStuckCandidates=function(){return this.m_stuckParticleBuffer.Data()},C$99X.prototype.GetStuckCandidateCount=function(){return this.m_stuckParticleBuffer.GetCount()},C$99X.prototype.ComputeCollisionEnergy=function(){if(!this.m_velocityBuffer.data)throw new Error;for(var C$99t=C$99X.ComputeCollisionEnergy_s_v,C$99e=this.m_velocityBuffer.data,C$99i=0,C$99n=0;C$99n<this.m_contactBuffer.count;C$99n++){var C$99r=this.m_contactBuffer.data[C$99n],C$99s=C$99r.indexA,C$99o=C$99r.indexB,C$99r=C$99r.normal,C$99o=C$99j.SubVV(C$99e[C$99o],C$99e[C$99s],C$99t),C$99s=C$99j.DotVV(C$99o,C$99r);C$99s<0&&(C$99i+=C$99s*C$99s)}return.5*this.GetParticleMass()*C$99i},C$99X.prototype.SetStrictContactCheck=function(C$99t){this.m_def.strictContactCheck=C$99t},C$99X.prototype.GetStrictContactCheck=function(){return this.m_def.strictContactCheck},C$99X.prototype.SetParticleLifetime=function(C$99t,C$99e){var C$99i=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),C$99i)for(var C$99n=this.GetParticleCount(),C$99r=0;C$99r<C$99n;++C$99r)this.m_indexByExpirationTimeBuffer.data[C$99r]=C$99r;C$99i=C$99e/this.m_def.lifetimeGranularity,C$99e=0<C$99i?this.GetQuantizedTimeElapsed()+C$99i:C$99i;C$99e!==this.m_expirationTimeBuffer.data[C$99t]&&(this.m_expirationTimeBuffer.data[C$99t]=C$99e,this.m_expirationTimeBufferRequiresSorting=!0)},C$99X.prototype.GetParticleLifetime=function(C$99t){return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[C$99t])},C$99X.prototype.SetDestructionByAge=function(C$99t){C$99t&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=C$99t},C$99X.prototype.GetDestructionByAge=function(){return this.m_def.destroyByAge},C$99X.prototype.GetExpirationTimeBuffer=function(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data},C$99X.prototype.ExpirationTimeToLifetime=function(C$99t){return(0<C$99t?C$99t-this.GetQuantizedTimeElapsed():C$99t)*this.m_def.lifetimeGranularity},C$99X.prototype.GetIndexByExpirationTimeBuffer=function(){if(this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),!this.m_indexByExpirationTimeBuffer.data)throw new Error;return this.m_indexByExpirationTimeBuffer.data},C$99X.prototype.ParticleApplyLinearImpulse=function(C$99t,C$99e){this.ApplyLinearImpulse(C$99t,C$99t+1,C$99e)},C$99X.prototype.ApplyLinearImpulse=function(C$99t,C$99e,C$99i){if(!this.m_velocityBuffer.data)throw new Error;for(var C$99n=this.m_velocityBuffer.data,C$99r=(C$99e-C$99t)*this.GetParticleMass(),C$99s=(new C$99j).Copy(C$99i).SelfMul(1/C$99r),C$99o=C$99t;C$99o<C$99e;C$99o++)C$99n[C$99o].SelfAdd(C$99s)},C$99X.IsSignificantForce=function(C$99t){return 0!==C$99t.x||0!==C$99t.y},C$99X.prototype.ParticleApplyForce=function(C$99t,C$99e){if(!this.m_flagsBuffer.data)throw new Error;C$99X.IsSignificantForce(C$99e)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[C$99t])&&(this.PrepareForceBuffer(),this.m_forceBuffer[C$99t].SelfAdd(C$99e))},C$99X.prototype.ApplyForce=function(C$99t,C$99e,C$99i){var C$99n=(new C$99j).Copy(C$99i).SelfMul(1/(C$99e-C$99t));if(C$99X.IsSignificantForce(C$99n)){this.PrepareForceBuffer();for(var C$99r=C$99t;C$99r<C$99e;C$99r++)this.m_forceBuffer[C$99r].SelfAdd(C$99n)}},C$99X.prototype.GetNext=function(){return this.m_next},C$99X.prototype.QueryAABB=function(C$99t,C$99e){if(0!==this.m_proxyBuffer.count){var C$99i=this.m_proxyBuffer.count,C$99n=C$99Js(this.m_proxyBuffer.data,0,C$99i,C$99X.computeTag(this.m_inverseDiameter*C$99e.lowerBound.x,this.m_inverseDiameter*C$99e.lowerBound.y),C$99X.Proxy.CompareProxyTag),C$99r=C$99Zs(this.m_proxyBuffer.data,C$99n,C$99i,C$99X.computeTag(this.m_inverseDiameter*C$99e.upperBound.x,this.m_inverseDiameter*C$99e.upperBound.y),C$99X.Proxy.CompareTagProxy);if(!this.m_positionBuffer.data)throw new Error;for(var C$99s=this.m_positionBuffer.data,C$99o=C$99n;C$99o<C$99r;++C$99o){var C$99a=this.m_proxyBuffer.data[C$99o].index,C$99c=C$99s[C$99a];if(C$99e.lowerBound.x<C$99c.x&&C$99c.x<C$99e.upperBound.x&&C$99e.lowerBound.y<C$99c.y&&C$99c.y<C$99e.upperBound.y&&!C$99t.ReportParticle(this,C$99a))break}}},C$99X.prototype.QueryShapeAABB=function(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99X.QueryShapeAABB_s_aabb;C$99e.ComputeAABB(C$99r,C$99i,C$99n=void 0===C$99n?0:C$99n),this.QueryAABB(C$99t,C$99r)},C$99X.prototype.QueryPointAABB=function(C$99t,C$99e,C$99i){var C$99n=C$99X.QueryPointAABB_s_aabb;C$99n.lowerBound.Set(C$99e.x-(C$99i=void 0===C$99i?.008:C$99i),C$99e.y-C$99i),C$99n.upperBound.Set(C$99e.x+C$99i,C$99e.y+C$99i),this.QueryAABB(C$99t,C$99n)},C$99X.prototype.RayCast=function(C$99h,C$99t,C$99e){var C$99i=C$99X.RayCast_s_aabb,C$99u=C$99X.RayCast_s_p,C$99_=C$99X.RayCast_s_v,C$99d=C$99X.RayCast_s_n,C$99f=C$99X.RayCast_s_point;if(0!==this.m_proxyBuffer.count){if(!this.m_positionBuffer.data)throw new Error;for(var C$99n,C$99p=this.m_positionBuffer.data,C$99r=(C$99j.MinV(C$99t,C$99e,C$99i.lowerBound),C$99j.MaxV(C$99t,C$99e,C$99i.upperBound),1),C$99s=C$99j.SubVV(C$99e,C$99t,C$99_),C$99m=C$99j.DotVV(C$99s,C$99s),C$99y=this.GetInsideBoundsEnumerator(C$99i);0<=(C$99n=C$99y.GetNext());){var C$99o=C$99j.SubVV(C$99t,C$99p[C$99n],C$99u),C$99a=C$99j.DotVV(C$99o,C$99s),C$99c=C$99a*C$99a-C$99m*(C$99j.DotVV(C$99o,C$99o)-this.m_squaredDiameter);if(0<=C$99c){var C$99c=C$99Y(C$99c),C$99l=(-C$99a-C$99c)/C$99m;if(!(C$99r<C$99l)&&!(C$99l<0&&((C$99l=(-C$99a+C$99c)/C$99m)<0||C$99r<C$99l))){C$99a=C$99j.AddVMulSV(C$99o,C$99l,C$99s,C$99d),C$99c=(C$99a.Normalize(),C$99h.ReportParticle(this,C$99n,C$99j.AddVMulSV(C$99t,C$99l,C$99s,C$99f),C$99a,C$99l));if((C$99r=C$99L(C$99r,C$99c))<=0)break}}}}},C$99X.prototype.ComputeAABB=function(C$99t){var C$99e=this.GetParticleCount();if(C$99t.lowerBound.x=+C$99P,C$99t.lowerBound.y=+C$99P,C$99t.upperBound.x=-C$99P,C$99t.upperBound.y=-C$99P,!this.m_positionBuffer.data)throw new Error;for(var C$99i=this.m_positionBuffer.data,C$99n=0;C$99n<C$99e;C$99n++){var C$99r=C$99i[C$99n];C$99j.MinV(C$99t.lowerBound,C$99r,C$99t.lowerBound),C$99j.MaxV(C$99t.upperBound,C$99r,C$99t.upperBound)}C$99t.lowerBound.x-=this.m_particleDiameter,C$99t.lowerBound.y-=this.m_particleDiameter,C$99t.upperBound.x+=this.m_particleDiameter,C$99t.upperBound.y+=this.m_particleDiameter},C$99X.prototype.FreeBuffer=function(C$99t,C$99e){null!==C$99t&&(C$99t.length=0)},C$99X.prototype.FreeUserOverridableBuffer=function(C$99t){0===C$99t.userSuppliedCapacity&&this.FreeBuffer(C$99t.data,this.m_internalAllocatedCapacity)},C$99X.prototype.ReallocateBuffer3=function(C$99t,C$99e,C$99i){if(C$99i<=C$99e)throw new Error;C$99e=C$99t?C$99t.slice():[];return C$99e.length=C$99i,C$99e},C$99X.prototype.ReallocateBuffer5=function(C$99t,C$99e,C$99i,C$99n,C$99r){if(C$99n<=C$99i)throw new Error;if(C$99e&&!(C$99n<=C$99e))throw new Error;return C$99t=C$99r&&!C$99t||C$99e?C$99t:this.ReallocateBuffer3(C$99t,C$99i,C$99n)},C$99X.prototype.ReallocateBuffer4=function(C$99t,C$99e,C$99i,C$99n){return this.ReallocateBuffer5(C$99t.data,C$99t.userSuppliedCapacity,C$99e,C$99i,C$99n)},C$99X.prototype.RequestBuffer=function(C$99t){return C$99t||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(256),(C$99t=[]).length=this.m_internalAllocatedCapacity),C$99t},C$99X.prototype.ReallocateHandleBuffers=function(C$99t){this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,C$99t,!0)},C$99X.prototype.ReallocateInternalAllocatedBuffers=function(C$99t){function C$99e(C$99t,C$99e){return C$99e&&C$99e<C$99t?C$99e:C$99t}var C$99i;C$99t=C$99e(C$99t,this.m_def.maxCount),C$99t=C$99e(C$99t,this.m_flagsBuffer.userSuppliedCapacity),C$99t=C$99e(C$99t,this.m_positionBuffer.userSuppliedCapacity),C$99t=C$99e(C$99t,this.m_velocityBuffer.userSuppliedCapacity),C$99t=C$99e(C$99t,this.m_colorBuffer.userSuppliedCapacity),C$99t=C$99e(C$99t,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<C$99t&&(this.ReallocateHandleBuffers(C$99t),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,C$99t,!1),C$99i=0<this.m_stuckThreshold,this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,C$99t,C$99i),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,C$99t,C$99i),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,C$99t,C$99i),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,C$99t,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,C$99t,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,C$99t,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,C$99t,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,C$99t,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,C$99t,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,C$99t,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,C$99t,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,C$99t,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,C$99t,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,C$99t,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,C$99t,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,C$99t,!1),this.m_internalAllocatedCapacity=C$99t)},C$99X.prototype.CreateParticleForGroup=function(C$99t,C$99e,C$99i){var C$99n=new C$99Rs;C$99n.flags=C$99f(C$99t.flags,0),C$99R.MulXV(C$99e,C$99i,C$99n.position),C$99j.AddVV(C$99f(C$99t.linearVelocity,C$99j.ZERO),C$99j.CrossSV(C$99f(C$99t.angularVelocity,0),C$99j.SubVV(C$99n.position,C$99f(C$99t.position,C$99j.ZERO),C$99j.s_t0),C$99j.s_t0),C$99n.velocity),C$99n.color.Copy(C$99f(C$99t.color,C$99J.ZERO)),C$99n.lifetime=C$99f(C$99t.lifetime,0),C$99n.userData=C$99t.userData,this.CreateParticle(C$99n)},C$99X.prototype.CreateParticlesStrokeShapeForGroup=function(C$99t,C$99e,C$99i){for(var C$99n=C$99X.CreateParticlesStrokeShapeForGroup_s_edge,C$99h=C$99X.CreateParticlesStrokeShapeForGroup_s_d,C$99u=C$99X.CreateParticlesStrokeShapeForGroup_s_p,C$99r=C$99f(C$99e.stride,0),C$99s=(0===C$99r&&(C$99r=this.GetParticleStride()),0),C$99_=C$99t.GetChildCount(),C$99o=0;C$99o<C$99_;C$99o++){for(var C$99a=null,C$99c=(C$99t.GetType()===C$99H.b2ShapeType.e_edgeShape?C$99a=C$99t:C$99t.GetChildEdge(C$99a=C$99n,C$99o),C$99j.SubVV(C$99a.m_vertex2,C$99a.m_vertex1,C$99h)),C$99l=C$99c.Length();C$99s<C$99l;){var C$99d=C$99j.AddVMulSV(C$99a.m_vertex1,C$99s/C$99l,C$99c,C$99u);this.CreateParticleForGroup(C$99e,C$99i,C$99d),C$99s+=C$99r}C$99s-=C$99l}},C$99X.prototype.CreateParticlesFillShapeForGroup=function(C$99t,C$99e,C$99i){var C$99n=C$99X.CreateParticlesFillShapeForGroup_s_aabb,C$99h=C$99X.CreateParticlesFillShapeForGroup_s_p,C$99r=C$99f(C$99e.stride,0),C$99s=(0===C$99r&&(C$99r=this.GetParticleStride()),C$99R.IDENTITY),C$99o=C$99n;C$99t.ComputeAABB(C$99o,C$99s,0);for(var C$99a=Math.floor(C$99o.lowerBound.y/C$99r)*C$99r;C$99a<C$99o.upperBound.y;C$99a+=C$99r)for(var C$99c=Math.floor(C$99o.lowerBound.x/C$99r)*C$99r;C$99c<C$99o.upperBound.x;C$99c+=C$99r){var C$99l=C$99h.Set(C$99c,C$99a);C$99t.TestPoint(C$99s,C$99l)&&this.CreateParticleForGroup(C$99e,C$99i,C$99l)}},C$99X.prototype.CreateParticlesWithShapeForGroup=function(C$99t,C$99e,C$99i){switch(C$99t.GetType()){case C$99H.b2ShapeType.e_edgeShape:case C$99H.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(C$99t,C$99e,C$99i);break;case C$99H.b2ShapeType.e_polygonShape:case C$99H.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(C$99t,C$99e,C$99i)}},C$99X.prototype.CreateParticlesWithShapesForGroup=function(C$99t,C$99e,C$99i,C$99n){C$99t=new C$99X.CompositeShape(C$99t,C$99e);this.CreateParticlesFillShapeForGroup(C$99t,C$99i,C$99n)},C$99X.prototype.CloneParticle=function(C$99t,C$99e){var C$99i=new C$99Rs;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;C$99i.flags=this.m_flagsBuffer.data[C$99t],C$99i.position.Copy(this.m_positionBuffer.data[C$99t]),C$99i.velocity.Copy(this.m_velocityBuffer.data[C$99t]),this.m_colorBuffer.data&&C$99i.color.Copy(this.m_colorBuffer.data[C$99t]),this.m_userDataBuffer.data&&(C$99i.userData=this.m_userDataBuffer.data[C$99t]),C$99i.group=C$99e;C$99e=this.CreateParticle(C$99i);return this.m_handleIndexBuffer.data&&((C$99i=this.m_handleIndexBuffer.data[C$99t])&&C$99i.SetIndex(C$99e),this.m_handleIndexBuffer.data[C$99e]=C$99i,this.m_handleIndexBuffer.data[C$99t]=null),this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$99e]=this.m_lastBodyContactStepBuffer.data[C$99t]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$99e]=this.m_bodyContactCountBuffer.data[C$99t]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$99e]=this.m_consecutiveContactStepsBuffer.data[C$99t]),this.m_hasForce&&this.m_forceBuffer[C$99e].Copy(this.m_forceBuffer[C$99t]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$99e]=this.m_staticPressureBuffer[C$99t]),this.m_depthBuffer&&(this.m_depthBuffer[C$99e]=this.m_depthBuffer[C$99t]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[C$99e]=this.m_expirationTimeBuffer.data[C$99t]),C$99e},C$99X.prototype.DestroyParticlesInGroup=function(C$99t,C$99e){void 0===C$99e&&(C$99e=!1);for(var C$99i=C$99t.m_firstIndex;C$99i<C$99t.m_lastIndex;C$99i++)this.DestroyParticle(C$99i,C$99e)},C$99X.prototype.DestroyParticleGroup=function(C$99t){this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(C$99t),this.SetGroupFlags(C$99t,0);for(var C$99e=C$99t.m_firstIndex;C$99e<C$99t.m_lastIndex;C$99e++)this.m_groupBuffer[C$99e]=null;C$99t.m_prev&&(C$99t.m_prev.m_next=C$99t.m_next),C$99t.m_next&&(C$99t.m_next.m_prev=C$99t.m_prev),C$99t===this.m_groupList&&(this.m_groupList=C$99t.m_next),--this.m_groupCount},C$99X.ParticleCanBeConnected=function(C$99t,C$99e){return 0!=(C$99t&(C$99H.b2ParticleFlag.b2_wallParticle|C$99H.b2ParticleFlag.b2_springParticle|C$99H.b2ParticleFlag.b2_elasticParticle))||null!==C$99e&&0!=(C$99e.GetGroupFlags()&C$99H.b2ParticleGroupFlag.b2_rigidParticleGroup)},C$99X.prototype.UpdatePairsAndTriads=function(C$99t,C$99e,C$99m){var C$99v=C$99X.UpdatePairsAndTriads_s_dab,C$99x=C$99X.UpdatePairsAndTriads_s_dbc,C$99b=C$99X.UpdatePairsAndTriads_s_dca;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99y=this.m_positionBuffer.data,C$99i=0,C$99n=C$99t;C$99n<C$99e;C$99n++)C$99i|=this.m_flagsBuffer.data[C$99n];if(C$99i&C$99X.k_pairFlags)for(var C$99a=0;C$99a<this.m_contactBuffer.count;C$99a++){var C$99c=this.m_contactBuffer.data[C$99a],C$99r=C$99c.indexA,C$99s=C$99c.indexB,C$99o=this.m_flagsBuffer.data[C$99r],C$99l=this.m_flagsBuffer.data[C$99s],C$99h=this.m_groupBuffer[C$99r],C$99u=this.m_groupBuffer[C$99s];C$99t<=C$99r&&C$99r<C$99e&&C$99t<=C$99s&&C$99s<C$99e&&!((C$99o|C$99l)&C$99H.b2ParticleFlag.b2_zombieParticle)&&(C$99o|C$99l)&C$99X.k_pairFlags&&(C$99m.IsNecessary(C$99r)||C$99m.IsNecessary(C$99s))&&C$99X.ParticleCanBeConnected(C$99o,C$99h)&&C$99X.ParticleCanBeConnected(C$99l,C$99u)&&C$99m.ShouldCreatePair(C$99r,C$99s)&&((C$99o=this.m_pairBuffer.data[this.m_pairBuffer.Append()]).indexA=C$99r,C$99o.indexB=C$99s,C$99o.flags=C$99c.flags,C$99o.strength=C$99L(C$99h?C$99h.m_strength:1,C$99u?C$99u.m_strength:1),C$99o.distance=C$99j.DistanceVV(C$99y[C$99r],C$99y[C$99s])),C$99Ys(this.m_pairBuffer.data,0,this.m_pairBuffer.count,C$99X.ComparePairIndices),this.m_pairBuffer.Unique(C$99X.MatchPairIndices)}if(C$99i&C$99X.k_triadFlags){for(var C$99_=new C$99Gs(C$99e-C$99t),C$99n=C$99t;C$99n<C$99e;C$99n++){var C$99d=this.m_flagsBuffer.data[C$99n],C$99f=this.m_groupBuffer[C$99n];C$99d&C$99H.b2ParticleFlag.b2_zombieParticle||!C$99X.ParticleCanBeConnected(C$99d,C$99f)||C$99_.AddGenerator(C$99y[C$99n],C$99n,C$99m.IsNecessary(C$99n))}var C$99p=this.GetParticleStride(),C$99g=(C$99_.Generate(C$99p/2,2*C$99p),this);C$99_.GetNodes(function(C$99t,C$99e,C$99i){if(!C$99g.m_flagsBuffer.data)throw new Error;var C$99n,C$99r,C$99s,C$99o,C$99a,C$99h,C$99c,C$99u,C$99_,C$99l,C$99d=C$99g.m_flagsBuffer.data[C$99t],C$99f=C$99g.m_flagsBuffer.data[C$99e],C$99p=C$99g.m_flagsBuffer.data[C$99i];(C$99d|C$99f|C$99p)&C$99X.k_triadFlags&&C$99m.ShouldCreateTriad(C$99t,C$99e,C$99i)&&(C$99n=C$99y[C$99t],C$99r=C$99y[C$99e],C$99s=C$99y[C$99i],C$99o=C$99j.SubVV(C$99n,C$99r,C$99v),C$99a=C$99j.SubVV(C$99r,C$99s,C$99x),C$99h=C$99j.SubVV(C$99s,C$99n,C$99b),C$99c=4*C$99g.m_squaredDiameter,C$99j.DotVV(C$99o,C$99o)>C$99c||C$99j.DotVV(C$99a,C$99a)>C$99c||C$99j.DotVV(C$99h,C$99h)>C$99c||(C$99c=C$99g.m_groupBuffer[C$99t],C$99u=C$99g.m_groupBuffer[C$99e],C$99_=C$99g.m_groupBuffer[C$99i],(C$99l=C$99g.m_triadBuffer.data[C$99g.m_triadBuffer.Append()]).indexA=C$99t,C$99l.indexB=C$99e,C$99l.indexC=C$99i,C$99l.flags=C$99d|C$99f|C$99p,C$99l.strength=C$99L(C$99L(C$99c?C$99c.m_strength:1,C$99u?C$99u.m_strength:1),C$99_?C$99_.m_strength:1),C$99t=(C$99n.x+C$99r.x+C$99s.x)/3,C$99e=(C$99n.y+C$99r.y+C$99s.y)/3,C$99l.pa.x=C$99n.x-C$99t,C$99l.pa.y=C$99n.y-C$99e,C$99l.pb.x=C$99r.x-C$99t,C$99l.pb.y=C$99r.y-C$99e,C$99l.pc.x=C$99s.x-C$99t,C$99l.pc.y=C$99s.y-C$99e,C$99l.ka=-C$99j.DotVV(C$99h,C$99o),C$99l.kb=-C$99j.DotVV(C$99o,C$99a),C$99l.kc=-C$99j.DotVV(C$99a,C$99h),C$99l.s=C$99j.CrossVV(C$99n,C$99r)+C$99j.CrossVV(C$99r,C$99s)+C$99j.CrossVV(C$99s,C$99n)))}),C$99Ys(this.m_triadBuffer.data,0,this.m_triadBuffer.count,C$99X.CompareTriadIndices),this.m_triadBuffer.Unique(C$99X.MatchTriadIndices)}},C$99X.prototype.UpdatePairsAndTriadsWithReactiveParticles=function(){var C$99t=new C$99X.ReactiveFilter(this.m_flagsBuffer);if(this.UpdatePairsAndTriads(0,this.m_count,C$99t),!this.m_flagsBuffer.data)throw new Error;for(var C$99e=0;C$99e<this.m_count;C$99e++)this.m_flagsBuffer.data[C$99e]&=~C$99H.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~C$99H.b2ParticleFlag.b2_reactiveParticle},C$99X.ComparePairIndices=function(C$99t,C$99e){var C$99i=C$99t.indexA-C$99e.indexA;return 0!=C$99i?C$99i<0:C$99t.indexB<C$99e.indexB},C$99X.MatchPairIndices=function(C$99t,C$99e){return C$99t.indexA===C$99e.indexA&&C$99t.indexB===C$99e.indexB},C$99X.CompareTriadIndices=function(C$99t,C$99e){var C$99i=C$99t.indexA-C$99e.indexA;if(0!=C$99i)return C$99i<0;C$99i=C$99t.indexB-C$99e.indexB;return 0!=C$99i?C$99i<0:C$99t.indexC<C$99e.indexC},C$99X.MatchTriadIndices=function(C$99t,C$99e){return C$99t.indexA===C$99e.indexA&&C$99t.indexB===C$99e.indexB&&C$99t.indexC===C$99e.indexC},C$99X.InitializeParticleLists=function(C$99t,C$99e){for(var C$99i=C$99t.GetBufferIndex(),C$99n=C$99t.GetParticleCount(),C$99r=0;C$99r<C$99n;C$99r++){var C$99s=C$99e[C$99r];(C$99s.list=C$99s).next=null,C$99s.count=1,C$99s.index=C$99r+C$99i}},C$99X.prototype.MergeParticleListsInContact=function(C$99t,C$99e){for(var C$99i=C$99t.GetBufferIndex(),C$99n=0;C$99n<this.m_contactBuffer.count;C$99n++){var C$99r,C$99s=this.m_contactBuffer.data[C$99n],C$99o=C$99s.indexA,C$99s=C$99s.indexB;C$99t.ContainsParticle(C$99o)&&C$99t.ContainsParticle(C$99s)&&((C$99o=C$99e[C$99o-C$99i].list)!==(C$99s=C$99e[C$99s-C$99i].list)&&(C$99o.count<C$99s.count&&(C$99r=C$99o,C$99o=C$99s,C$99s=C$99r),C$99X.MergeParticleLists(C$99o,C$99s)))}},C$99X.MergeParticleLists=function(C$99t,C$99e){for(var C$99i=C$99e;;){C$99i.list=C$99t;var C$99n=C$99i.next;if(!C$99n){C$99i.next=C$99t.next;break}C$99i=C$99n}C$99t.next=C$99e,C$99t.count+=C$99e.count,C$99e.count=0},C$99X.FindLongestParticleList=function(C$99t,C$99e){for(var C$99i=C$99t.GetParticleCount(),C$99n=C$99e[0],C$99r=0;C$99r<C$99i;C$99r++){var C$99s=C$99e[C$99r];C$99n.count<C$99s.count&&(C$99n=C$99s)}return C$99n},C$99X.prototype.MergeZombieParticleListNodes=function(C$99t,C$99e,C$99i){if(!this.m_flagsBuffer.data)throw new Error;for(var C$99n=C$99t.GetParticleCount(),C$99r=0;C$99r<C$99n;C$99r++){var C$99s=C$99e[C$99r];C$99s!==C$99i&&this.m_flagsBuffer.data[C$99s.index]&C$99H.b2ParticleFlag.b2_zombieParticle&&C$99X.MergeParticleListAndNode(C$99i,C$99s)}},C$99X.MergeParticleListAndNode=function(C$99t,C$99e){C$99e.list=C$99t,C$99e.next=C$99t.next,C$99t.next=C$99e,C$99t.count++,C$99e.count=0},C$99X.prototype.CreateParticleGroupsFromParticleList=function(C$99t,C$99e,C$99i){if(!this.m_flagsBuffer.data)throw new Error;var C$99n=C$99t.GetParticleCount(),C$99r=new C$99Vs;C$99r.groupFlags=C$99t.GetGroupFlags(),C$99r.userData=C$99t.GetUserData();for(var C$99s=0;C$99s<C$99n;C$99s++){var C$99o=C$99e[C$99s];if(C$99o.count&&C$99o!==C$99i)for(var C$99a=this.CreateParticleGroup(C$99r),C$99c=C$99o;C$99c;C$99c=C$99c.next){var C$99l=C$99c.index,C$99h=this.CloneParticle(C$99l,C$99a);this.m_flagsBuffer.data[C$99l]|=C$99H.b2ParticleFlag.b2_zombieParticle,C$99c.index=C$99h}}},C$99X.prototype.UpdatePairsAndTriadsWithParticleList=function(C$99t,C$99e){for(var C$99i=C$99t.GetBufferIndex(),C$99n=0;C$99n<this.m_pairBuffer.count;C$99n++){var C$99r=this.m_pairBuffer.data[C$99n],C$99s=C$99r.indexA,C$99o=C$99r.indexB;C$99t.ContainsParticle(C$99s)&&(C$99r.indexA=C$99e[C$99s-C$99i].index),C$99t.ContainsParticle(C$99o)&&(C$99r.indexB=C$99e[C$99o-C$99i].index)}for(C$99n=0;C$99n<this.m_triadBuffer.count;C$99n++){var C$99a=this.m_triadBuffer.data[C$99n],C$99s=C$99a.indexA,C$99o=C$99a.indexB,C$99c=C$99a.indexC;C$99t.ContainsParticle(C$99s)&&(C$99a.indexA=C$99e[C$99s-C$99i].index),C$99t.ContainsParticle(C$99o)&&(C$99a.indexB=C$99e[C$99o-C$99i].index),C$99t.ContainsParticle(C$99c)&&(C$99a.indexC=C$99e[C$99c-C$99i].index)}},C$99X.prototype.ComputeDepth=function(){for(var C$99h=[],C$99u=0,C$99t=0;C$99t<this.m_contactBuffer.count;C$99t++){var C$99e=(C$99a=this.m_contactBuffer.data[C$99t]).indexA,C$99i=C$99a.indexB,C$99_=this.m_groupBuffer[C$99e],C$99d=this.m_groupBuffer[C$99i];C$99_&&C$99_===C$99d&&C$99_.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(C$99h[C$99u++]=C$99a)}for(var C$99f=[],C$99p=0,C$99n=this.m_groupList;C$99n;C$99n=C$99n.GetNext())if(C$99n.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth){C$99f[C$99p++]=C$99n,this.SetGroupFlags(C$99n,C$99n.m_groupFlags&~C$99H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);for(var C$99r=C$99n.m_firstIndex;C$99r<C$99n.m_lastIndex;C$99r++)this.m_accumulationBuffer[C$99r]=0}for(C$99t=0;C$99t<C$99u;C$99t++){var C$99e=(C$99a=C$99h[C$99t]).indexA,C$99i=C$99a.indexB,C$99s=C$99a.weight;this.m_accumulationBuffer[C$99e]+=C$99s,this.m_accumulationBuffer[C$99i]+=C$99s}for(C$99r=0;C$99r<C$99p;C$99r++)for(var C$99o=(C$99n=C$99f[C$99r]).m_firstIndex;C$99o<C$99n.m_lastIndex;C$99o++){C$99s=this.m_accumulationBuffer[C$99o];this.m_depthBuffer[C$99o]=C$99s<.8?0:C$99P}for(var C$99m=C$99Y(this.m_count)>>0,C$99y=0;C$99y<C$99m;C$99y++){for(var C$99g=!1,C$99t=0;C$99t<C$99u;C$99t++){var C$99a,C$99e=(C$99a=C$99h[C$99t]).indexA,C$99i=C$99a.indexB,C$99c=1-C$99a.weight,C$99v=this.m_depthBuffer[C$99e],C$99x=this.m_depthBuffer[C$99i],C$99b=C$99x+C$99c,C$99c=C$99v+C$99c;C$99b<C$99v&&(this.m_depthBuffer[C$99e]=C$99b,C$99g=!0),C$99c<C$99x&&(this.m_depthBuffer[C$99i]=C$99c,C$99g=!0)}if(!C$99g)break}for(C$99r=0;C$99r<C$99p;C$99r++)for(var C$99l=(C$99n=C$99f[C$99r]).m_firstIndex;C$99l<C$99n.m_lastIndex;C$99l++)this.m_depthBuffer[C$99l]<C$99P?this.m_depthBuffer[C$99l]*=this.m_particleDiameter:this.m_depthBuffer[C$99l]=0},C$99X.prototype.GetInsideBoundsEnumerator=function(C$99t){var C$99e=C$99X.computeTag(this.m_inverseDiameter*C$99t.lowerBound.x-1,this.m_inverseDiameter*C$99t.lowerBound.y-1),C$99t=C$99X.computeTag(this.m_inverseDiameter*C$99t.upperBound.x+1,this.m_inverseDiameter*C$99t.upperBound.y+1),C$99i=this.m_proxyBuffer.count,C$99n=C$99Js(this.m_proxyBuffer.data,0,C$99i,C$99e,C$99X.Proxy.CompareProxyTag),C$99i=C$99Zs(this.m_proxyBuffer.data,0,C$99i,C$99t,C$99X.Proxy.CompareTagProxy);return new C$99X.InsideBoundsEnumerator(this,C$99e,C$99t,C$99n,C$99i)},C$99X.prototype.UpdateAllParticleFlags=function(){if(!this.m_flagsBuffer.data)throw new Error;for(var C$99t=this.m_allParticleFlags=0;C$99t<this.m_count;C$99t++)this.m_allParticleFlags|=this.m_flagsBuffer.data[C$99t];this.m_needsUpdateAllParticleFlags=!1},C$99X.prototype.UpdateAllGroupFlags=function(){this.m_allGroupFlags=0;for(var C$99t=this.m_groupList;C$99t;C$99t=C$99t.GetNext())this.m_allGroupFlags|=C$99t.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1},C$99X.prototype.AddContact=function(C$99t,C$99e,C$99i){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;var C$99n,C$99r,C$99s=C$99X.AddContact_s_d,C$99o=this.m_positionBuffer.data,C$99o=C$99j.SubVV(C$99o[C$99e],C$99o[C$99t],C$99s),C$99s=C$99j.DotVV(C$99o,C$99o);C$99s<this.m_squaredDiameter&&(C$99n=C$99A(C$99s),isFinite(C$99n)||(C$99n=198177537e11),(C$99r=this.m_contactBuffer.data[this.m_contactBuffer.Append()]).indexA=C$99t,C$99r.indexB=C$99e,C$99r.flags=this.m_flagsBuffer.data[C$99t]|this.m_flagsBuffer.data[C$99e],C$99r.weight=1-C$99s*C$99n*this.m_inverseDiameter,C$99j.MulSV(C$99n,C$99o,C$99r.normal))},C$99X.prototype.FindContacts_Reference=function(C$99t){for(var C$99e=this.m_proxyBuffer.count,C$99i=this.m_contactBuffer.count=0,C$99n=0;C$99i<C$99e;C$99i++){for(var C$99r=C$99X.computeRelativeTag(this.m_proxyBuffer.data[C$99i].tag,1,0),C$99s=C$99i+1;C$99s<C$99e&&!(C$99r<this.m_proxyBuffer.data[C$99s].tag);C$99s++)this.AddContact(this.m_proxyBuffer.data[C$99i].index,this.m_proxyBuffer.data[C$99s].index,this.m_contactBuffer);for(var C$99o=C$99X.computeRelativeTag(this.m_proxyBuffer.data[C$99i].tag,-1,1);C$99n<C$99e&&!(C$99o<=this.m_proxyBuffer.data[C$99n].tag);C$99n++);for(var C$99a=C$99X.computeRelativeTag(this.m_proxyBuffer.data[C$99i].tag,1,1),C$99s=C$99n;C$99s<C$99e&&!(C$99a<this.m_proxyBuffer.data[C$99s].tag);C$99s++)this.AddContact(this.m_proxyBuffer.data[C$99i].index,this.m_proxyBuffer.data[C$99s].index,this.m_contactBuffer)}},C$99X.prototype.FindContacts=function(C$99t){this.FindContacts_Reference(C$99t)},C$99X.prototype.UpdateProxies_Reference=function(C$99t){if(!this.m_positionBuffer.data)throw new Error;for(var C$99e=this.m_positionBuffer.data,C$99i=this.m_inverseDiameter,C$99n=0;C$99n<this.m_proxyBuffer.count;++C$99n){var C$99r=this.m_proxyBuffer.data[C$99n],C$99s=C$99e[C$99r.index];C$99r.tag=C$99X.computeTag(C$99i*C$99s.x,C$99i*C$99s.y)}},C$99X.prototype.UpdateProxies=function(C$99t){this.UpdateProxies_Reference(C$99t)},C$99X.prototype.SortProxies=function(C$99t){C$99Xs(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,C$99X.Proxy.CompareProxyProxy)},C$99X.prototype.FilterContacts=function(C$99t){var C$99e,C$99i=this.GetParticleContactFilter();null!==C$99i&&(C$99e=this).m_contactBuffer.RemoveIf(function(C$99t){return 0!=(C$99t.flags&C$99H.b2ParticleFlag.b2_particleContactFilterParticle)&&!C$99i.ShouldCollideParticleParticle(C$99e,C$99t.indexA,C$99t.indexB)})},C$99X.prototype.NotifyContactListenerPreContact=function(C$99t){if(null!==this.GetParticleContactListener())throw C$99t.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error},C$99X.prototype.NotifyContactListenerPostContact=function(C$99t){var C$99e=this.GetParticleContactListener();if(null!==C$99e){for(var C$99i=0;C$99i<this.m_contactBuffer.count;++C$99i){var C$99n=this.m_contactBuffer.data[C$99i];C$99e.BeginContactParticleParticle(this,C$99n)}throw new Error}},C$99X.b2ParticleContactIsZombie=function(C$99t){return(C$99t.flags&C$99H.b2ParticleFlag.b2_zombieParticle)===C$99H.b2ParticleFlag.b2_zombieParticle},C$99X.prototype.UpdateContacts=function(C$99t){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);var C$99e=new C$99X.b2ParticlePairSet;this.NotifyContactListenerPreContact(C$99e),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(C$99e),C$99t&&this.m_contactBuffer.RemoveIf(C$99X.b2ParticleContactIsZombie)},C$99X.prototype.NotifyBodyContactListenerPreContact=function(C$99t){if(null!==this.GetFixtureContactListener())throw C$99t.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error},C$99X.prototype.NotifyBodyContactListenerPostContact=function(C$99t){var C$99e=this.GetFixtureContactListener();if(null!==C$99e){for(var C$99i=0;C$99i<this.m_bodyContactBuffer.count;C$99i++){var C$99n=this.m_bodyContactBuffer.data[C$99i];C$99e.BeginContactFixtureParticle(this,C$99n)}throw new Error}},C$99X.prototype.UpdateBodyContacts=function(){var C$99t=C$99X.UpdateBodyContacts_s_aabb,C$99e=new C$99X.FixtureParticleSet;if(this.NotifyBodyContactListenerPreContact(C$99e),0<this.m_stuckThreshold){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;for(var C$99i=this.GetParticleCount(),C$99n=0;C$99n<C$99i;C$99n++)this.m_bodyContactCountBuffer.data[C$99n]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[C$99n]+1&&(this.m_consecutiveContactStepsBuffer.data[C$99n]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);this.ComputeAABB(C$99t);var C$99r=new C$99X.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter());this.m_world.QueryAABB(C$99r,C$99t),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(C$99e)},C$99X.prototype.Solve=function(C$99t){var C$99e=C$99X.Solve_s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(C$99t),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<C$99t.particleIterations;this.m_iterationIndex++){++this.m_timestamp;var C$99i=C$99e.Copy(C$99t);if(C$99i.dt/=C$99t.particleIterations,C$99i.inv_dt*=C$99t.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&C$99H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(C$99i),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(C$99i),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(C$99i),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(C$99i),this.m_allGroupFlags&C$99H.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(C$99i),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(C$99i),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(C$99i),this.SolvePressure(C$99i),this.SolveDamping(C$99i),this.m_allParticleFlags&C$99X.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(C$99i),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_springParticle&&this.SolveSpring(C$99i),this.LimitVelocity(C$99i),this.m_allGroupFlags&C$99H.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(C$99i),this.SolveCollision(C$99i),this.m_allGroupFlags&C$99H.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(C$99i),this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_wallParticle&&this.SolveWall(),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99n=0;C$99n<this.m_count;C$99n++)this.m_positionBuffer.data[C$99n].SelfMulAdd(C$99i.dt,this.m_velocityBuffer.data[C$99n])}},C$99X.prototype.SolveCollision=function(C$99t){var C$99e=C$99X.SolveCollision_s_aabb;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;var C$99i=this.m_positionBuffer.data,C$99n=this.m_velocityBuffer.data,C$99r=C$99e;C$99r.lowerBound.x=+C$99P,C$99r.lowerBound.y=+C$99P,C$99r.upperBound.x=-C$99P,C$99r.upperBound.y=-C$99P;for(var C$99s=0;C$99s<this.m_count;C$99s++){var C$99o=C$99n[C$99s],C$99a=C$99i[C$99s],C$99c=C$99a.x+C$99t.dt*C$99o.x,C$99o=C$99a.y+C$99t.dt*C$99o.y;C$99r.lowerBound.x=C$99L(C$99r.lowerBound.x,C$99L(C$99a.x,C$99c)),C$99r.lowerBound.y=C$99L(C$99r.lowerBound.y,C$99L(C$99a.y,C$99o)),C$99r.upperBound.x=C$99V(C$99r.upperBound.x,C$99V(C$99a.x,C$99c)),C$99r.upperBound.y=C$99V(C$99r.upperBound.y,C$99V(C$99a.y,C$99o))}C$99e=new C$99X.SolveCollisionCallback(this,C$99t);this.m_world.QueryAABB(C$99e,C$99r)},C$99X.prototype.LimitVelocity=function(C$99t){if(!this.m_velocityBuffer.data)throw new Error;for(var C$99e=this.m_velocityBuffer.data,C$99i=this.GetCriticalVelocitySquared(C$99t),C$99n=0;C$99n<this.m_count;C$99n++){var C$99r=C$99e[C$99n],C$99s=C$99j.DotVV(C$99r,C$99r);C$99i<C$99s&&C$99r.SelfMul(C$99Y(C$99i/C$99s))}},C$99X.prototype.SolveGravity=function(C$99t){if(!this.m_velocityBuffer.data)throw new Error;for(var C$99e=C$99X.SolveGravity_s_gravity,C$99i=this.m_velocityBuffer.data,C$99n=C$99j.MulSV(C$99t.dt*this.m_def.gravityScale,this.m_world.GetGravity(),C$99e),C$99r=0;C$99r<this.m_count;C$99r++)C$99i[C$99r].SelfAdd(C$99n)},C$99X.prototype.SolveBarrier=function(C$99h){var C$99u=C$99X.SolveBarrier_s_aabb,C$99_=C$99X.SolveBarrier_s_va,C$99d=C$99X.SolveBarrier_s_vb,C$99f=C$99X.SolveBarrier_s_pba,C$99p=C$99X.SolveBarrier_s_vba,C$99m=C$99X.SolveBarrier_s_vc,C$99y=C$99X.SolveBarrier_s_pca,C$99g=C$99X.SolveBarrier_s_vca,C$99v=C$99X.SolveBarrier_s_qba,C$99x=C$99X.SolveBarrier_s_qca,C$99b=C$99X.SolveBarrier_s_dv,C$99A=C$99X.SolveBarrier_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99C=this.m_positionBuffer.data,C$99S=this.m_velocityBuffer.data,C$99T=0;C$99T<this.m_count;C$99T++)0!=(this.m_flagsBuffer.data[C$99T]&C$99X.k_barrierWallFlags)&&C$99S[C$99T].SetZero();for(var C$99w=2.5*C$99h.dt,C$99E=this.GetParticleMass(),C$99M=0;C$99M<this.m_pairBuffer.count;C$99M++){var C$99t=this.m_pairBuffer.data[C$99M];if(C$99t.flags&C$99H.b2ParticleFlag.b2_barrierParticle)for(var C$99I,C$99B=C$99t.indexA,C$99t=C$99t.indexB,C$99R=C$99C[C$99B],C$99P=C$99C[C$99t],C$99D=C$99u,C$99L=(C$99j.MinV(C$99R,C$99P,C$99D.lowerBound),C$99j.MaxV(C$99R,C$99P,C$99D.upperBound),this.m_groupBuffer[C$99B]),C$99V=this.m_groupBuffer[C$99t],C$99O=this.GetLinearVelocity(C$99L,C$99B,C$99R,C$99_),C$99B=this.GetLinearVelocity(C$99V,C$99t,C$99P,C$99d),C$99F=C$99j.SubVV(C$99P,C$99R,C$99f),C$99e=C$99j.SubVV(C$99B,C$99O,C$99p),C$99N=this.GetInsideBoundsEnumerator(C$99D);0<=(C$99I=C$99N.GetNext());){var C$99k=C$99C[C$99I],C$99i=this.m_groupBuffer[C$99I];if(C$99L!==C$99i&&C$99V!==C$99i){var C$99G=this.GetLinearVelocity(C$99i,C$99I,C$99k,C$99m),C$99z=C$99j.SubVV(C$99k,C$99R,C$99y),C$99U=C$99j.SubVV(C$99G,C$99O,C$99g),C$99n=C$99j.CrossVV(C$99e,C$99U),C$99r=C$99j.CrossVV(C$99F,C$99U)-C$99j.CrossVV(C$99z,C$99e),C$99s=C$99j.CrossVV(C$99F,C$99z),C$99o=void 0,C$99a=void 0,C$99c=C$99v,C$99W=C$99x;if(0===C$99n){if(0==C$99r)continue;if(!(0<=(C$99a=-C$99s/C$99r)&&C$99a<C$99w))continue;if(C$99j.AddVMulSV(C$99F,C$99a,C$99e,C$99c),C$99j.AddVMulSV(C$99z,C$99a,C$99U,C$99W),!(0<=(C$99o=C$99j.DotVV(C$99c,C$99W)/C$99j.DotVV(C$99c,C$99c))&&C$99o<=1))continue}else{C$99s=C$99r*C$99r-4*C$99s*C$99n;if(C$99s<0)continue;var C$99s=C$99Y(C$99s),C$99l=(-C$99r-C$99s)/(2*C$99n),C$99r=(-C$99r+C$99s)/(2*C$99n);if(C$99r<C$99l&&(C$99s=C$99l,C$99l=C$99r,C$99r=C$99s),C$99a=C$99l,C$99j.AddVMulSV(C$99F,C$99a,C$99e,C$99c),C$99j.AddVMulSV(C$99z,C$99a,C$99U,C$99W),C$99o=C$99j.DotVV(C$99c,C$99W)/C$99j.DotVV(C$99c,C$99c),!(0<=C$99a&&C$99a<C$99w&&0<=C$99o&&C$99o<=1)){if(!(0<=(C$99a=C$99r)&&C$99a<C$99w))continue;if(C$99j.AddVMulSV(C$99F,C$99a,C$99e,C$99c),C$99j.AddVMulSV(C$99z,C$99a,C$99U,C$99W),!(0<=(C$99o=C$99j.DotVV(C$99c,C$99W)/C$99j.DotVV(C$99c,C$99c))&&C$99o<=1))continue}}C$99n=C$99b,C$99s=(C$99n.x=C$99O.x+C$99o*C$99e.x-C$99G.x,C$99n.y=C$99O.y+C$99o*C$99e.y-C$99G.y,C$99j.MulSV(C$99E,C$99n,C$99A));C$99i&&this.IsRigidGroup(C$99i)?(C$99l=C$99i.GetMass(),C$99r=C$99i.GetInertia(),0<C$99l&&C$99i.m_linearVelocity.SelfMulAdd(1/C$99l,C$99s),0<C$99r&&(C$99i.m_angularVelocity+=C$99j.CrossVV(C$99j.SubVV(C$99k,C$99i.GetCenter(),C$99j.s_t0),C$99s)/C$99r)):C$99S[C$99I].SelfAdd(C$99n),this.ParticleApplyForce(C$99I,C$99s.SelfMul(-C$99h.inv_dt))}}}},C$99X.prototype.SolveStaticPressure=function(C$99t){if(!this.m_flagsBuffer.data)throw new Error;this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);for(var C$99t=this.GetCriticalPressure(C$99t),C$99e=this.m_def.staticPressureStrength*C$99t,C$99h=.25*C$99t,C$99u=this.m_def.staticPressureRelaxation,C$99i=0;C$99i<this.m_def.staticPressureIterations;C$99i++){for(var C$99n=0;C$99n<this.m_count;C$99n++)this.m_accumulationBuffer[C$99n]=0;for(var C$99r=0;C$99r<this.m_contactBuffer.count;C$99r++){var C$99s,C$99o,C$99a=this.m_contactBuffer.data[C$99r];C$99a.flags&C$99H.b2ParticleFlag.b2_staticPressureParticle&&(C$99s=C$99a.indexA,C$99o=C$99a.indexB,C$99l=C$99a.weight,this.m_accumulationBuffer[C$99s]+=C$99l*this.m_staticPressureBuffer[C$99o],this.m_accumulationBuffer[C$99o]+=C$99l*this.m_staticPressureBuffer[C$99s])}for(C$99n=0;C$99n<this.m_count;C$99n++){var C$99c,C$99l=this.m_weightBuffer[C$99n];this.m_flagsBuffer.data[C$99n]&C$99H.b2ParticleFlag.b2_staticPressureParticle?(C$99c=this.m_accumulationBuffer[C$99n],this.m_staticPressureBuffer[C$99n]=C$99O((C$99c+C$99e*(C$99l-1))/(C$99l+C$99u),0,C$99h)):this.m_staticPressureBuffer[C$99n]=0}}},C$99X.prototype.ComputeWeight=function(){for(var C$99t=0;C$99t<this.m_count;C$99t++)this.m_weightBuffer[C$99t]=0;for(C$99t=0;C$99t<this.m_bodyContactBuffer.count;C$99t++){var C$99e=(C$99n=this.m_bodyContactBuffer.data[C$99t]).index,C$99i=C$99n.weight;this.m_weightBuffer[C$99e]+=C$99i}for(C$99t=0;C$99t<this.m_contactBuffer.count;C$99t++){var C$99n,C$99e=(C$99n=this.m_contactBuffer.data[C$99t]).indexA,C$99r=C$99n.indexB,C$99i=C$99n.weight;this.m_weightBuffer[C$99e]+=C$99i,this.m_weightBuffer[C$99r]+=C$99i}},C$99X.prototype.SolvePressure=function(C$99t){var C$99h=C$99X.SolvePressure_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99u=this.m_positionBuffer.data,C$99e=this.m_velocityBuffer.data,C$99_=this.GetCriticalPressure(C$99t),C$99d=this.m_def.pressureStrength*C$99_,C$99f=.25*C$99_,C$99i=0;C$99i<this.m_count;C$99i++){var C$99n=this.m_weightBuffer[C$99i],C$99r=C$99d*C$99V(0,C$99n-1);this.m_accumulationBuffer[C$99i]=C$99L(C$99r,C$99f)}if(this.m_allParticleFlags&C$99X.k_noPressureFlags)for(C$99i=0;C$99i<this.m_count;C$99i++)this.m_flagsBuffer.data[C$99i]&C$99X.k_noPressureFlags&&(this.m_accumulationBuffer[C$99i]=0);if(this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_staticPressureParticle)for(C$99i=0;C$99i<this.m_count;C$99i++)this.m_flagsBuffer.data[C$99i]&C$99H.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[C$99i]+=this.m_staticPressureBuffer[C$99i]);for(var C$99p=C$99t.dt/(this.m_def.density*this.m_particleDiameter),C$99m=this.GetParticleInvMass(),C$99s=0;C$99s<this.m_bodyContactBuffer.count;C$99s++){var C$99o=(C$99l=this.m_bodyContactBuffer.data[C$99s]).index,C$99a=C$99l.body,C$99n=C$99l.weight,C$99y=C$99l.mass,C$99g=C$99l.normal,C$99v=C$99u[C$99o],C$99r=this.m_accumulationBuffer[C$99o]+C$99d*C$99n,C$99c=C$99j.MulSV(C$99p*C$99n*C$99y*C$99r,C$99g,C$99h);C$99e[C$99o].SelfMulSub(C$99m,C$99c),C$99a.ApplyLinearImpulse(C$99c,C$99v,!0)}for(C$99s=0;C$99s<this.m_contactBuffer.count;C$99s++){var C$99l,C$99o=(C$99l=this.m_contactBuffer.data[C$99s]).indexA,C$99a=C$99l.indexB,C$99n=C$99l.weight,C$99g=C$99l.normal,C$99r=this.m_accumulationBuffer[C$99o]+this.m_accumulationBuffer[C$99a],C$99c=C$99j.MulSV(C$99p*C$99n*C$99r,C$99g,C$99h);C$99e[C$99o].SelfSub(C$99c),C$99e[C$99a].SelfAdd(C$99c)}},C$99X.prototype.SolveDamping=function(C$99h){var C$99t=C$99X.SolveDamping_s_v,C$99u=C$99X.SolveDamping_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99_=this.m_positionBuffer.data,C$99e=this.m_velocityBuffer.data,C$99d=this.m_def.dampingStrength,C$99f=1/this.GetCriticalVelocity(C$99h),C$99p=this.GetParticleInvMass(),C$99i=0;C$99i<this.m_bodyContactBuffer.count;C$99i++){var C$99n=(C$99o=this.m_bodyContactBuffer.data[C$99i]).index,C$99r=C$99o.body,C$99m=C$99o.weight,C$99y=C$99o.mass,C$99s=C$99o.normal,C$99g=C$99_[C$99n],C$99v=C$99j.SubVV(C$99r.GetLinearVelocityFromWorldPoint(C$99g,C$99j.s_t0),C$99e[C$99n],C$99t);(C$99a=C$99j.DotVV(C$99v,C$99s))<0&&(C$99c=C$99V(C$99d*C$99m,C$99L(-C$99f*C$99a,.5)),C$99l=C$99j.MulSV(C$99c*C$99y*C$99a,C$99s,C$99u),C$99e[C$99n].SelfMulAdd(C$99p,C$99l),C$99r.ApplyLinearImpulse(C$99l.SelfNeg(),C$99g,!0))}for(C$99i=0;C$99i<this.m_contactBuffer.count;C$99i++){var C$99o,C$99a,C$99c,C$99l,C$99n=(C$99o=this.m_contactBuffer.data[C$99i]).indexA,C$99r=C$99o.indexB,C$99m=C$99o.weight,C$99s=C$99o.normal,C$99v=C$99j.SubVV(C$99e[C$99r],C$99e[C$99n],C$99t);(C$99a=C$99j.DotVV(C$99v,C$99s))<0&&(C$99c=C$99V(C$99d*C$99m,C$99L(-C$99f*C$99a,.5)),C$99l=C$99j.MulSV(C$99c*C$99a,C$99s,C$99u),C$99e[C$99n].SelfAdd(C$99l),C$99e[C$99r].SelfSub(C$99l))}},C$99X.prototype.SolveRigidDamping=function(){var C$99h=C$99X.SolveRigidDamping_s_t0,C$99u=C$99X.SolveRigidDamping_s_t1,C$99_=C$99X.SolveRigidDamping_s_p,C$99d=C$99X.SolveRigidDamping_s_v,C$99t=[0],C$99e=[0],C$99i=[0],C$99f=[0],C$99p=[0],C$99m=[0];if(!this.m_positionBuffer.data)throw new Error;for(var C$99y=this.m_positionBuffer.data,C$99g=this.m_def.dampingStrength,C$99n=0;C$99n<this.m_bodyContactBuffer.count;C$99n++){var C$99r=(C$99s=this.m_bodyContactBuffer.data[C$99n]).index;(C$99l=this.m_groupBuffer[C$99r])&&this.IsRigidGroup(C$99l)&&(C$99a=C$99s.body,C$99c=C$99s.normal,C$99A=C$99s.weight,C$99o=C$99y[C$99r],C$99v=C$99j.SubVV(C$99a.GetLinearVelocityFromWorldPoint(C$99o,C$99h),C$99l.GetLinearVelocityFromWorldPoint(C$99o,C$99u),C$99d),(C$99x=C$99j.DotVV(C$99v,C$99c))<0&&(this.InitDampingParameterWithRigidGroupOrParticle(C$99t,C$99e,C$99i,!0,C$99l,C$99r,C$99o,C$99c),this.InitDampingParameter(C$99f,C$99p,C$99m,C$99a.GetMass(),C$99a.GetInertia()-C$99a.GetMass()*C$99a.GetLocalCenter().LengthSquared(),C$99a.GetWorldCenter(),C$99o,C$99c),C$99b=C$99g*C$99L(C$99A,1)*this.ComputeDampingImpulse(C$99t[0],C$99e[0],C$99i[0],C$99f[0],C$99p[0],C$99m[0],C$99x),this.ApplyDamping(C$99t[0],C$99e[0],C$99i[0],!0,C$99l,C$99r,C$99b,C$99c),C$99a.ApplyLinearImpulse(C$99j.MulSV(-C$99b,C$99c,C$99j.s_t0),C$99o,!0)))}for(C$99n=0;C$99n<this.m_contactBuffer.count;C$99n++){var C$99s,C$99o,C$99v,C$99x,C$99b,C$99r=(C$99s=this.m_contactBuffer.data[C$99n]).indexA,C$99a=C$99s.indexB,C$99c=C$99s.normal,C$99A=C$99s.weight,C$99l=this.m_groupBuffer[C$99r],C$99C=this.m_groupBuffer[C$99a],C$99S=this.IsRigidGroup(C$99l),C$99T=this.IsRigidGroup(C$99C);C$99l!==C$99C&&(C$99S||C$99T)&&(C$99o=C$99j.MidVV(C$99y[C$99r],C$99y[C$99a],C$99_),C$99v=C$99j.SubVV(this.GetLinearVelocity(C$99C,C$99a,C$99o,C$99h),this.GetLinearVelocity(C$99l,C$99r,C$99o,C$99u),C$99d),(C$99x=C$99j.DotVV(C$99v,C$99c))<0&&(this.InitDampingParameterWithRigidGroupOrParticle(C$99t,C$99e,C$99i,C$99S,C$99l,C$99r,C$99o,C$99c),this.InitDampingParameterWithRigidGroupOrParticle(C$99f,C$99p,C$99m,C$99T,C$99C,C$99a,C$99o,C$99c),C$99b=C$99g*C$99A*this.ComputeDampingImpulse(C$99t[0],C$99e[0],C$99i[0],C$99f[0],C$99p[0],C$99m[0],C$99x),this.ApplyDamping(C$99t[0],C$99e[0],C$99i[0],C$99S,C$99l,C$99r,C$99b,C$99c),this.ApplyDamping(C$99f[0],C$99p[0],C$99m[0],C$99T,C$99C,C$99a,-C$99b,C$99c)))}},C$99X.prototype.SolveExtraDamping=function(){var C$99t=C$99X.SolveExtraDamping_s_v,C$99e=C$99X.SolveExtraDamping_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99i=this.m_velocityBuffer.data,C$99h=this.m_positionBuffer.data,C$99u=this.GetParticleInvMass(),C$99n=0;C$99n<this.m_bodyContactBuffer.count;C$99n++){var C$99r,C$99s,C$99o,C$99a,C$99c=this.m_bodyContactBuffer.data[C$99n],C$99l=C$99c.index;this.m_flagsBuffer.data[C$99l]&C$99X.k_extraDampingFlags&&(C$99r=C$99c.body,C$99a=C$99c.mass,C$99c=C$99c.normal,C$99s=C$99h[C$99l],C$99o=C$99j.SubVV(C$99r.GetLinearVelocityFromWorldPoint(C$99s,C$99j.s_t0),C$99i[C$99l],C$99t),(C$99o=C$99j.DotVV(C$99o,C$99c))<0&&(C$99a=C$99j.MulSV(.5*C$99a*C$99o,C$99c,C$99e),C$99i[C$99l].SelfMulAdd(C$99u,C$99a),C$99r.ApplyLinearImpulse(C$99a.SelfNeg(),C$99s,!0)))}},C$99X.prototype.SolveWall=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99t=this.m_velocityBuffer.data,C$99e=0;C$99e<this.m_count;C$99e++)this.m_flagsBuffer.data[C$99e]&C$99H.b2ParticleFlag.b2_wallParticle&&C$99t[C$99e].SetZero()},C$99X.prototype.SolveRigid=function(C$99t){var C$99e=C$99X.SolveRigid_s_position,C$99i=C$99X.SolveRigid_s_rotation,C$99n=C$99X.SolveRigid_s_transform,C$99r=C$99X.SolveRigid_s_velocityTransform;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99h=this.m_positionBuffer.data,C$99u=this.m_velocityBuffer.data,C$99s=this.m_groupList;C$99s;C$99s=C$99s.GetNext())if(C$99s.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_rigidParticleGroup){C$99s.UpdateStatistics();var C$99o=C$99i,C$99_=(C$99o.SetAngle(C$99t.dt*C$99s.m_angularVelocity),C$99j.AddVV(C$99s.m_center,C$99j.SubVV(C$99j.MulSV(C$99t.dt,C$99s.m_linearVelocity,C$99j.s_t0),C$99B.MulRV(C$99o,C$99s.m_center,C$99j.s_t1),C$99j.s_t0),C$99e)),C$99a=C$99n,C$99c=(C$99a.SetPositionRotation(C$99_,C$99o),C$99R.MulXX(C$99a,C$99s.m_transform,C$99s.m_transform),C$99r);C$99c.p.x=C$99t.inv_dt*C$99a.p.x,C$99c.p.y=C$99t.inv_dt*C$99a.p.y,C$99c.q.s=C$99t.inv_dt*C$99a.q.s,C$99c.q.c=C$99t.inv_dt*(C$99a.q.c-1);for(var C$99l=C$99s.m_firstIndex;C$99l<C$99s.m_lastIndex;C$99l++)C$99R.MulXV(C$99c,C$99h[C$99l],C$99u[C$99l])}},C$99X.prototype.SolveElastic=function(C$99h){var C$99u=C$99X.SolveElastic_s_pa,C$99_=C$99X.SolveElastic_s_pb,C$99d=C$99X.SolveElastic_s_pc,C$99f=C$99X.SolveElastic_s_r,C$99t=C$99X.SolveElastic_s_t0;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99p=this.m_positionBuffer.data,C$99m=this.m_velocityBuffer.data,C$99y=C$99h.inv_dt*this.m_def.elasticStrength,C$99g=0;C$99g<this.m_triadBuffer.count;C$99g++){var C$99v,C$99x,C$99b,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l=this.m_triadBuffer.data[C$99g];C$99l.flags&C$99H.b2ParticleFlag.b2_elasticParticle&&(C$99r=C$99l.indexA,C$99s=C$99l.indexB,C$99o=C$99l.indexC,C$99v=C$99l.pa,C$99x=C$99l.pb,C$99b=C$99l.pc,C$99e=C$99u.Copy(C$99p[C$99r]),C$99i=C$99_.Copy(C$99p[C$99s]),C$99n=C$99d.Copy(C$99p[C$99o]),C$99r=C$99m[C$99r],C$99s=C$99m[C$99s],C$99o=C$99m[C$99o],C$99e.SelfMulAdd(C$99h.dt,C$99r),C$99i.SelfMulAdd(C$99h.dt,C$99s),C$99n.SelfMulAdd(C$99h.dt,C$99o),C$99a=(C$99e.x+C$99i.x+C$99n.x)/3,C$99c=(C$99e.y+C$99i.y+C$99n.y)/3,C$99e.x-=C$99a,C$99e.y-=C$99c,C$99i.x-=C$99a,C$99i.y-=C$99c,C$99n.x-=C$99a,C$99n.y-=C$99c,(C$99a=C$99f).s=C$99j.CrossVV(C$99v,C$99e)+C$99j.CrossVV(C$99x,C$99i)+C$99j.CrossVV(C$99b,C$99n),C$99a.c=C$99j.DotVV(C$99v,C$99e)+C$99j.DotVV(C$99x,C$99i)+C$99j.DotVV(C$99b,C$99n),C$99c=C$99A(C$99a.s*C$99a.s+C$99a.c*C$99a.c),isFinite(C$99c)||(C$99c=198177537e11),C$99a.s*=C$99c,C$99a.c*=C$99c,C$99c=C$99y*C$99l.strength,C$99B.MulRV(C$99a,C$99v,C$99t),C$99j.SubVV(C$99t,C$99e,C$99t),C$99j.MulSV(C$99c,C$99t,C$99t),C$99r.SelfAdd(C$99t),C$99B.MulRV(C$99a,C$99x,C$99t),C$99j.SubVV(C$99t,C$99i,C$99t),C$99j.MulSV(C$99c,C$99t,C$99t),C$99s.SelfAdd(C$99t),C$99B.MulRV(C$99a,C$99b,C$99t),C$99j.SubVV(C$99t,C$99n,C$99t),C$99j.MulSV(C$99c,C$99t,C$99t),C$99o.SelfAdd(C$99t))}},C$99X.prototype.SolveSpring=function(C$99t){var C$99h=C$99X.SolveSpring_s_pa,C$99u=C$99X.SolveSpring_s_pb,C$99_=C$99X.SolveSpring_s_d,C$99d=C$99X.SolveSpring_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99e=this.m_positionBuffer.data,C$99i=this.m_velocityBuffer.data,C$99f=C$99t.inv_dt*this.m_def.springStrength,C$99n=0;C$99n<this.m_pairBuffer.count;C$99n++){var C$99r,C$99s,C$99o,C$99a,C$99c,C$99l=this.m_pairBuffer.data[C$99n];C$99l.flags&C$99H.b2ParticleFlag.b2_springParticle&&(C$99r=C$99l.indexA,C$99s=C$99l.indexB,C$99a=C$99h.Copy(C$99e[C$99r]),C$99o=C$99u.Copy(C$99e[C$99s]),C$99r=C$99i[C$99r],C$99s=C$99i[C$99s],C$99a.SelfMulAdd(C$99t.dt,C$99r),C$99o.SelfMulAdd(C$99t.dt,C$99s),C$99o=C$99j.SubVV(C$99o,C$99a,C$99_),C$99a=C$99l.distance,C$99c=C$99o.Length(),C$99l=C$99f*C$99l.strength,C$99l=C$99j.MulSV(C$99l*(C$99a-C$99c)/C$99c,C$99o,C$99d),C$99r.SelfSub(C$99l),C$99s.SelfAdd(C$99l))}},C$99X.prototype.SolveTensile=function(C$99t){var C$99h=C$99X.SolveTensile_s_weightedNormal,C$99u=C$99X.SolveTensile_s_s,C$99_=C$99X.SolveTensile_s_f;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99d=this.m_velocityBuffer.data,C$99e=0;C$99e<this.m_count;C$99e++)this.m_accumulation2Buffer[C$99e]=new C$99j,this.m_accumulation2Buffer[C$99e].SetZero();for(var C$99f,C$99i=0;C$99i<this.m_contactBuffer.count;C$99i++)(C$99n=this.m_contactBuffer.data[C$99i]).flags&C$99H.b2ParticleFlag.b2_tensileParticle&&(C$99r=C$99n.indexA,C$99s=C$99n.indexB,C$99o=C$99n.weight,C$99a=C$99n.normal,C$99f=C$99j.MulSV((1-C$99o)*C$99o,C$99a,C$99h),this.m_accumulation2Buffer[C$99r].SelfSub(C$99f),this.m_accumulation2Buffer[C$99s].SelfAdd(C$99f));for(var C$99n,C$99r,C$99s,C$99o,C$99a,C$99c,C$99l,C$99t=this.GetCriticalVelocity(C$99t),C$99p=this.m_def.surfaceTensionPressureStrength*C$99t,C$99m=this.m_def.surfaceTensionNormalStrength*C$99t,C$99y=.5*C$99t,C$99i=0;C$99i<this.m_contactBuffer.count;C$99i++)(C$99n=this.m_contactBuffer.data[C$99i]).flags&C$99H.b2ParticleFlag.b2_tensileParticle&&(C$99r=C$99n.indexA,C$99s=C$99n.indexB,C$99o=C$99n.weight,C$99a=C$99n.normal,C$99c=this.m_weightBuffer[C$99r]+this.m_weightBuffer[C$99s],C$99l=C$99j.SubVV(this.m_accumulation2Buffer[C$99s],this.m_accumulation2Buffer[C$99r],C$99u),C$99c=C$99L(C$99p*(C$99c-2)+C$99m*C$99j.DotVV(C$99l,C$99a),C$99y)*C$99o,C$99l=C$99j.MulSV(C$99c,C$99a,C$99_),C$99d[C$99r].SelfSub(C$99l),C$99d[C$99s].SelfAdd(C$99l))},C$99X.prototype.SolveViscous=function(){var C$99t=C$99X.SolveViscous_s_v,C$99h=C$99X.SolveViscous_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99u=this.m_positionBuffer.data,C$99e=this.m_velocityBuffer.data,C$99_=this.m_def.viscousStrength,C$99d=this.GetParticleInvMass(),C$99i=0;C$99i<this.m_bodyContactBuffer.count;C$99i++){var C$99f,C$99n,C$99r=(C$99s=this.m_bodyContactBuffer.data[C$99i]).index;this.m_flagsBuffer.data[C$99r]&C$99H.b2ParticleFlag.b2_viscousParticle&&(C$99o=C$99s.body,C$99a=C$99s.weight,C$99f=C$99s.mass,C$99n=C$99u[C$99r],C$99c=C$99j.SubVV(C$99o.GetLinearVelocityFromWorldPoint(C$99n,C$99j.s_t0),C$99e[C$99r],C$99t),C$99l=C$99j.MulSV(C$99_*C$99f*C$99a,C$99c,C$99h),C$99e[C$99r].SelfMulAdd(C$99d,C$99l),C$99o.ApplyLinearImpulse(C$99l.SelfNeg(),C$99n,!0))}for(var C$99s,C$99o,C$99a,C$99c,C$99l,C$99i=0;C$99i<this.m_contactBuffer.count;C$99i++)(C$99s=this.m_contactBuffer.data[C$99i]).flags&C$99H.b2ParticleFlag.b2_viscousParticle&&(C$99r=C$99s.indexA,C$99o=C$99s.indexB,C$99a=C$99s.weight,C$99c=C$99j.SubVV(C$99e[C$99o],C$99e[C$99r],C$99t),C$99l=C$99j.MulSV(C$99_*C$99a,C$99c,C$99h),C$99e[C$99r].SelfAdd(C$99l),C$99e[C$99o].SelfSub(C$99l))},C$99X.prototype.SolveRepulsive=function(C$99t){var C$99e=C$99X.SolveRepulsive_s_f;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99i=this.m_velocityBuffer.data,C$99n=this.m_def.repulsiveStrength*this.GetCriticalVelocity(C$99t),C$99r=0;C$99r<this.m_contactBuffer.count;C$99r++){var C$99s,C$99o,C$99a,C$99c=this.m_contactBuffer.data[C$99r];C$99c.flags&C$99H.b2ParticleFlag.b2_repulsiveParticle&&(C$99s=C$99c.indexA,C$99o=C$99c.indexB,this.m_groupBuffer[C$99s]!==this.m_groupBuffer[C$99o]&&(C$99a=C$99c.weight,C$99c=C$99c.normal,C$99a=C$99j.MulSV(C$99n*C$99a,C$99c,C$99e),C$99i[C$99s].SelfSub(C$99a),C$99i[C$99o].SelfAdd(C$99a)))}},C$99X.prototype.SolvePowder=function(C$99h){var C$99t=C$99X.SolvePowder_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99u=this.m_positionBuffer.data,C$99e=this.m_velocityBuffer.data,C$99i=this.m_def.powderStrength*this.GetCriticalVelocity(C$99h),C$99_=this.GetParticleInvMass(),C$99n=0;C$99n<this.m_bodyContactBuffer.count;C$99n++){var C$99d,C$99f,C$99r=(C$99s=this.m_bodyContactBuffer.data[C$99n]).index;this.m_flagsBuffer.data[C$99r]&C$99H.b2ParticleFlag.b2_powderParticle&&.25<(C$99o=C$99s.weight)&&(C$99a=C$99s.body,C$99d=C$99s.mass,C$99f=C$99u[C$99r],C$99c=C$99s.normal,C$99l=C$99j.MulSV(C$99i*C$99d*(C$99o-.25),C$99c,C$99t),C$99e[C$99r].SelfMulSub(C$99_,C$99l),C$99a.ApplyLinearImpulse(C$99l,C$99f,!0))}for(var C$99s,C$99o,C$99a,C$99c,C$99l,C$99n=0;C$99n<this.m_contactBuffer.count;C$99n++)(C$99s=this.m_contactBuffer.data[C$99n]).flags&C$99H.b2ParticleFlag.b2_powderParticle&&.25<(C$99o=C$99s.weight)&&(C$99r=C$99s.indexA,C$99a=C$99s.indexB,C$99c=C$99s.normal,C$99l=C$99j.MulSV(C$99i*(C$99o-.25),C$99c,C$99t),C$99e[C$99r].SelfSub(C$99l),C$99e[C$99a].SelfAdd(C$99l))},C$99X.prototype.SolveSolid=function(C$99t){var C$99e=C$99X.SolveSolid_s_f;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99i=this.m_velocityBuffer.data,C$99n=(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer),C$99t.inv_dt*this.m_def.ejectionStrength),C$99r=0;C$99r<this.m_contactBuffer.count;C$99r++){var C$99s,C$99o,C$99a=this.m_contactBuffer.data[C$99r],C$99c=C$99a.indexA,C$99l=C$99a.indexB;this.m_groupBuffer[C$99c]!==this.m_groupBuffer[C$99l]&&(C$99s=C$99a.weight,C$99a=C$99a.normal,C$99o=this.m_depthBuffer[C$99c]+this.m_depthBuffer[C$99l],C$99o=C$99j.MulSV(C$99n*C$99o*C$99s,C$99a,C$99e),C$99i[C$99c].SelfSub(C$99o),C$99i[C$99l].SelfAdd(C$99o))}},C$99X.prototype.SolveForce=function(C$99t){if(!this.m_velocityBuffer.data)throw new Error;for(var C$99e=this.m_velocityBuffer.data,C$99i=C$99t.dt*this.GetParticleInvMass(),C$99n=0;C$99n<this.m_count;C$99n++)C$99e[C$99n].SelfMulAdd(C$99i,this.m_forceBuffer[C$99n]);this.m_hasForce=!1},C$99X.prototype.SolveColorMixing=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_colorBuffer.data)throw new Error;var C$99t=.5*this.m_def.colorMixingStrength;if(C$99t)for(var C$99e=0;C$99e<this.m_contactBuffer.count;C$99e++){var C$99i=this.m_contactBuffer.data[C$99e],C$99n=C$99i.indexA,C$99i=C$99i.indexB;this.m_flagsBuffer.data[C$99n]&this.m_flagsBuffer.data[C$99i]&C$99H.b2ParticleFlag.b2_colorMixingParticle&&(C$99n=this.m_colorBuffer.data[C$99n],C$99i=this.m_colorBuffer.data[C$99i],C$99J.MixColors(C$99n,C$99i,C$99t))}},C$99X.prototype.SolveZombie=function(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(var C$99t=0,C$99e=[],C$99i=0;C$99i<this.m_count;C$99i++)C$99e[C$99i]=-1;for(var C$99h=0,C$99i=0;C$99i<this.m_count;C$99i++){var C$99u,C$99n,C$99_=this.m_flagsBuffer.data[C$99i];C$99_&C$99H.b2ParticleFlag.b2_zombieParticle?(C$99u=this.m_world.m_destructionListener,C$99_&C$99H.b2ParticleFlag.b2_destructionListenerParticle&&C$99u&&C$99u.SayGoodbyeParticle(this,C$99i),this.m_handleIndexBuffer.data&&(C$99n=this.m_handleIndexBuffer.data[C$99i])&&(C$99n.SetIndex(-1),this.m_handleIndexBuffer.data[C$99i]=null),C$99e[C$99i]=-1):(C$99i!==(C$99e[C$99i]=C$99t)&&(this.m_handleIndexBuffer.data&&((C$99n=this.m_handleIndexBuffer.data[C$99i])&&C$99n.SetIndex(C$99t),this.m_handleIndexBuffer.data[C$99t]=C$99n),this.m_flagsBuffer.data[C$99t]=this.m_flagsBuffer.data[C$99i],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[C$99t]=this.m_lastBodyContactStepBuffer.data[C$99i]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[C$99t]=this.m_bodyContactCountBuffer.data[C$99i]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[C$99t]=this.m_consecutiveContactStepsBuffer.data[C$99i]),this.m_positionBuffer.data[C$99t].Copy(this.m_positionBuffer.data[C$99i]),this.m_velocityBuffer.data[C$99t].Copy(this.m_velocityBuffer.data[C$99i]),this.m_groupBuffer[C$99t]=this.m_groupBuffer[C$99i],this.m_hasForce&&this.m_forceBuffer[C$99t].Copy(this.m_forceBuffer[C$99i]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[C$99t]=this.m_staticPressureBuffer[C$99i]),this.m_depthBuffer&&(this.m_depthBuffer[C$99t]=this.m_depthBuffer[C$99i]),this.m_colorBuffer.data&&this.m_colorBuffer.data[C$99t].Copy(this.m_colorBuffer.data[C$99i]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[C$99t]=this.m_userDataBuffer.data[C$99i]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[C$99t]=this.m_expirationTimeBuffer.data[C$99i])),C$99t++,C$99h|=C$99_)}for(var C$99d=function(C$99t){return C$99t.index<0},C$99f=function(C$99t){return C$99t.indexA<0||C$99t.indexB<0},C$99p=function(C$99t){return C$99t.index<0},C$99m=function(C$99t){return C$99t.indexA<0||C$99t.indexB<0},C$99y=function(C$99t){return C$99t.indexA<0||C$99t.indexB<0||C$99t.indexC<0},C$99r=0;C$99r<this.m_proxyBuffer.count;C$99r++){var C$99g=this.m_proxyBuffer.data[C$99r];C$99g.index=C$99e[C$99g.index]}this.m_proxyBuffer.RemoveIf(C$99d);for(C$99r=0;C$99r<this.m_contactBuffer.count;C$99r++)(C$99s=this.m_contactBuffer.data[C$99r]).indexA=C$99e[C$99s.indexA],C$99s.indexB=C$99e[C$99s.indexB];this.m_contactBuffer.RemoveIf(C$99f);for(var C$99s,C$99r=0;C$99r<this.m_bodyContactBuffer.count;C$99r++)(C$99s=this.m_bodyContactBuffer.data[C$99r]).index=C$99e[C$99s.index];this.m_bodyContactBuffer.RemoveIf(C$99p);for(C$99r=0;C$99r<this.m_pairBuffer.count;C$99r++){var C$99o=this.m_pairBuffer.data[C$99r];C$99o.indexA=C$99e[C$99o.indexA],C$99o.indexB=C$99e[C$99o.indexB]}this.m_pairBuffer.RemoveIf(C$99m);for(C$99r=0;C$99r<this.m_triadBuffer.count;C$99r++){var C$99a=this.m_triadBuffer.data[C$99r];C$99a.indexA=C$99e[C$99a.indexA],C$99a.indexB=C$99e[C$99a.indexB],C$99a.indexC=C$99e[C$99a.indexC]}if(this.m_triadBuffer.RemoveIf(C$99y),this.m_indexByExpirationTimeBuffer.data)for(var C$99v=0,C$99x=0;C$99x<this.m_count;C$99x++){var C$99b=C$99e[this.m_indexByExpirationTimeBuffer.data[C$99x]];-1!==C$99b&&(this.m_indexByExpirationTimeBuffer.data[C$99v++]=C$99b)}for(var C$99c=this.m_groupList;C$99c;C$99c=C$99c.GetNext()){for(var C$99l=C$99t,C$99A=0,C$99C=!1,C$99i=C$99c.m_firstIndex;C$99i<C$99c.m_lastIndex;C$99i++){var C$99S=C$99e[C$99i];0<=C$99S?(C$99l=C$99L(C$99l,C$99S),C$99A=C$99V(C$99A,C$99S+1)):C$99C=!0}C$99l<C$99A?(C$99c.m_firstIndex=C$99l,C$99c.m_lastIndex=C$99A,C$99C&&C$99c.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(C$99c,C$99c.m_groupFlags|C$99H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(C$99c.m_firstIndex=0,C$99c.m_lastIndex=0,C$99c.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(C$99c,C$99c.m_groupFlags|C$99H.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=C$99t,this.m_allParticleFlags=C$99h,this.m_needsUpdateAllParticleFlags=!1;for(C$99c=this.m_groupList;C$99c;){var C$99T=C$99c.GetNext();C$99c.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(C$99c),C$99c=C$99T}},C$99X.prototype.SolveLifetimes=function(C$99t){if(!this.m_expirationTimeBuffer.data)throw new Error;if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_timeElapsed=this.LifetimeToExpirationTime(C$99t.dt);var C$99e=this.GetQuantizedTimeElapsed(),C$99n=this.m_expirationTimeBuffer.data,C$99i=this.m_indexByExpirationTimeBuffer.data,C$99t=this.GetParticleCount();this.m_expirationTimeBufferRequiresSorting&&(C$99Xs(C$99i,0,C$99t,function(C$99t,C$99e){var C$99t=C$99n[C$99t],C$99e=C$99n[C$99e],C$99i=C$99t<=0;return C$99i==C$99e<=0?C$99e<C$99t:C$99i}),this.m_expirationTimeBufferRequiresSorting=!1);for(var C$99r=C$99t-1;0<=C$99r;--C$99r){var C$99s=C$99i[C$99r],C$99o=C$99n[C$99s];if(C$99e<C$99o||C$99o<=0)break;this.DestroyParticle(C$99s)}},C$99X.prototype.RotateBuffer=function(C$99e,C$99i,C$99n){if(C$99e!==C$99i&&C$99i!==C$99n){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;if(C$99Ks(this.m_flagsBuffer.data,C$99e,C$99i,C$99n),this.m_lastBodyContactStepBuffer.data&&C$99Ks(this.m_lastBodyContactStepBuffer.data,C$99e,C$99i,C$99n),this.m_bodyContactCountBuffer.data&&C$99Ks(this.m_bodyContactCountBuffer.data,C$99e,C$99i,C$99n),this.m_consecutiveContactStepsBuffer.data&&C$99Ks(this.m_consecutiveContactStepsBuffer.data,C$99e,C$99i,C$99n),C$99Ks(this.m_positionBuffer.data,C$99e,C$99i,C$99n),C$99Ks(this.m_velocityBuffer.data,C$99e,C$99i,C$99n),C$99Ks(this.m_groupBuffer,C$99e,C$99i,C$99n),this.m_hasForce&&C$99Ks(this.m_forceBuffer,C$99e,C$99i,C$99n),this.m_staticPressureBuffer&&C$99Ks(this.m_staticPressureBuffer,C$99e,C$99i,C$99n),this.m_depthBuffer&&C$99Ks(this.m_depthBuffer,C$99e,C$99i,C$99n),this.m_colorBuffer.data&&C$99Ks(this.m_colorBuffer.data,C$99e,C$99i,C$99n),this.m_userDataBuffer.data&&C$99Ks(this.m_userDataBuffer.data,C$99e,C$99i,C$99n),this.m_handleIndexBuffer.data){C$99Ks(this.m_handleIndexBuffer.data,C$99e,C$99i,C$99n);for(var C$99t=C$99e;C$99t<C$99n;++C$99t){var C$99h=this.m_handleIndexBuffer.data[C$99t];C$99h&&C$99h.SetIndex(C$99l(C$99h.GetIndex()))}}if(this.m_expirationTimeBuffer.data){C$99Ks(this.m_expirationTimeBuffer.data,C$99e,C$99i,C$99n);var C$99u=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;for(var C$99_=this.m_indexByExpirationTimeBuffer.data,C$99t=0;C$99t<C$99u;++C$99t)C$99_[C$99t]=C$99l(C$99_[C$99t])}for(var C$99r=0;C$99r<this.m_proxyBuffer.count;C$99r++){var C$99d=this.m_proxyBuffer.data[C$99r];C$99d.index=C$99l(C$99d.index)}for(C$99r=0;C$99r<this.m_contactBuffer.count;C$99r++)(C$99s=this.m_contactBuffer.data[C$99r]).indexA=C$99l(C$99s.indexA),C$99s.indexB=C$99l(C$99s.indexB);for(var C$99s,C$99r=0;C$99r<this.m_bodyContactBuffer.count;C$99r++)(C$99s=this.m_bodyContactBuffer.data[C$99r]).index=C$99l(C$99s.index);for(C$99r=0;C$99r<this.m_pairBuffer.count;C$99r++){var C$99o=this.m_pairBuffer.data[C$99r];C$99o.indexA=C$99l(C$99o.indexA),C$99o.indexB=C$99l(C$99o.indexB)}for(C$99r=0;C$99r<this.m_triadBuffer.count;C$99r++){var C$99a=this.m_triadBuffer.data[C$99r];C$99a.indexA=C$99l(C$99a.indexA),C$99a.indexB=C$99l(C$99a.indexB),C$99a.indexC=C$99l(C$99a.indexC)}for(var C$99c=this.m_groupList;C$99c;C$99c=C$99c.GetNext())C$99c.m_firstIndex=C$99l(C$99c.m_firstIndex),C$99c.m_lastIndex=C$99l(C$99c.m_lastIndex-1)+1}function C$99l(C$99t){return C$99t<C$99e?C$99t:C$99t<C$99i?C$99t+C$99n-C$99i:C$99t<C$99n?C$99t+C$99e-C$99i:C$99t}},C$99X.prototype.GetCriticalVelocity=function(C$99t){return this.m_particleDiameter*C$99t.inv_dt},C$99X.prototype.GetCriticalVelocitySquared=function(C$99t){C$99t=this.GetCriticalVelocity(C$99t);return C$99t*C$99t},C$99X.prototype.GetCriticalPressure=function(C$99t){return this.m_def.density*this.GetCriticalVelocitySquared(C$99t)},C$99X.prototype.GetParticleStride=function(){return.75*this.m_particleDiameter},C$99X.prototype.GetParticleMass=function(){var C$99t=this.GetParticleStride();return this.m_def.density*C$99t*C$99t},C$99X.prototype.GetParticleInvMass=function(){var C$99t=this.m_inverseDiameter*(1/.75);return this.m_inverseDensity*C$99t*C$99t},C$99X.prototype.GetFixtureContactFilter=function(){return this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},C$99X.prototype.GetParticleContactFilter=function(){return this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null},C$99X.prototype.GetFixtureContactListener=function(){return this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},C$99X.prototype.GetParticleContactListener=function(){return this.m_allParticleFlags&C$99H.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null},C$99X.prototype.SetUserOverridableBuffer=function(C$99t,C$99e,C$99i){C$99t.data=C$99e,C$99t.userSuppliedCapacity=C$99i},C$99X.prototype.SetGroupFlags=function(C$99t,C$99e){var C$99i=C$99t.m_groupFlags;(C$99i^C$99e)&C$99H.b2ParticleGroupFlag.b2_solidParticleGroup&&(C$99e|=C$99H.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),C$99i&~C$99e&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&C$99e&&(C$99e&C$99H.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=C$99e),C$99t.m_groupFlags=C$99e},C$99X.BodyContactCompare=function(C$99t,C$99e){return C$99t.index===C$99e.index?C$99t.weight>C$99e.weight:C$99t.index<C$99e.index},C$99X.prototype.RemoveSpuriousBodyContacts=function(){C$99Xs(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,C$99X.BodyContactCompare);var C$99s=C$99X.RemoveSpuriousBodyContacts_s_n,C$99o=C$99X.RemoveSpuriousBodyContacts_s_pos,C$99a=C$99X.RemoveSpuriousBodyContacts_s_normal,C$99c=this,C$99l=-1,C$99h=0;this.m_bodyContactBuffer.count=C$99qs(this.m_bodyContactBuffer.data,function(C$99t){if(C$99t.index!==C$99l&&(C$99h=0,C$99l=C$99t.index),3<C$99h++)return!0;var C$99e=C$99s.Copy(C$99t.normal);if(C$99e.SelfMul(C$99c.m_particleDiameter*(1-C$99t.weight)),!C$99c.m_positionBuffer.data)throw new Error;var C$99i=C$99j.AddVV(C$99c.m_positionBuffer.data[C$99t.index],C$99e,C$99o);if(C$99t.fixture.TestPoint(C$99i))return!1;for(var C$99n=C$99t.fixture.GetShape().GetChildCount(),C$99r=0;C$99r<C$99n;C$99r++)if(C$99t.fixture.ComputeDistance(C$99i,C$99a,C$99r)<.008)return!1;return!0},this.m_bodyContactBuffer.count)},C$99X.prototype.DetectStuckParticle=function(C$99t){if(!(this.m_stuckThreshold<=0)){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;++this.m_bodyContactCountBuffer.data[C$99t],2===this.m_bodyContactCountBuffer.data[C$99t]&&(++this.m_consecutiveContactStepsBuffer.data[C$99t],this.m_consecutiveContactStepsBuffer.data[C$99t]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=C$99t)),this.m_lastBodyContactStepBuffer.data[C$99t]=this.m_timestamp}},C$99X.prototype.ValidateParticleIndex=function(C$99t){return 0<=C$99t&&C$99t<this.GetParticleCount()&&-1!==C$99t},C$99X.prototype.GetQuantizedTimeElapsed=function(){return Math.floor(this.m_timeElapsed/4294967296)},C$99X.prototype.LifetimeToExpirationTime=function(C$99t){return this.m_timeElapsed+Math.floor(C$99t/this.m_def.lifetimeGranularity*4294967296)},C$99X.prototype.ForceCanBeApplied=function(C$99t){return!(C$99t&C$99H.b2ParticleFlag.b2_wallParticle)},C$99X.prototype.PrepareForceBuffer=function(){if(!this.m_hasForce){for(var C$99t=0;C$99t<this.m_count;C$99t++)this.m_forceBuffer[C$99t].SetZero();this.m_hasForce=!0}},C$99X.prototype.IsRigidGroup=function(C$99t){return null!==C$99t&&0!=(C$99t.m_groupFlags&C$99H.b2ParticleGroupFlag.b2_rigidParticleGroup)},C$99X.prototype.GetLinearVelocity=function(C$99t,C$99e,C$99i,C$99n){if(C$99t&&this.IsRigidGroup(C$99t))return C$99t.GetLinearVelocityFromWorldPoint(C$99i,C$99n);if(!this.m_velocityBuffer.data)throw new Error;return C$99n.Copy(this.m_velocityBuffer.data[C$99e])},C$99X.prototype.InitDampingParameter=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){C$99t[0]=0<C$99n?1/C$99n:0,C$99e[0]=0<C$99r?1/C$99r:0,C$99i[0]=C$99j.CrossVV(C$99j.SubVV(C$99o,C$99s,C$99j.s_t0),C$99a)},C$99X.prototype.InitDampingParameterWithRigidGroupOrParticle=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){if(C$99r&&C$99n)this.InitDampingParameter(C$99t,C$99e,C$99i,C$99r.GetMass(),C$99r.GetInertia(),C$99r.GetCenter(),C$99o,C$99a);else{if(!this.m_flagsBuffer.data)throw new Error;C$99n=this.m_flagsBuffer.data[C$99s];this.InitDampingParameter(C$99t,C$99e,C$99i,C$99n&C$99H.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,C$99o,C$99o,C$99a)}},C$99X.prototype.ComputeDampingImpulse=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o){C$99t=C$99t+C$99e*C$99i*C$99i+C$99n+C$99r*C$99s*C$99s;return 0<C$99t?C$99o/C$99t:0},C$99X.prototype.ApplyDamping=function(C$99t,C$99e,C$99i,C$99n,C$99r,C$99s,C$99o,C$99a){if(C$99r&&C$99n)C$99r.m_linearVelocity.SelfMulAdd(C$99o*C$99t,C$99a),C$99r.m_angularVelocity+=C$99o*C$99i*C$99e;else{if(!this.m_velocityBuffer.data)throw new Error;this.m_velocityBuffer.data[C$99s].SelfMulAdd(C$99o*C$99t,C$99a)}},C$99X.xTruncBits=12,C$99X.yTruncBits=12,C$99X.tagBits=32,C$99X.yOffset=1<<C$99X.yTruncBits-1,C$99X.yShift=C$99X.tagBits-C$99X.yTruncBits,C$99X.xShift=C$99X.tagBits-C$99X.yTruncBits-C$99X.xTruncBits,C$99X.xScale=1<<C$99X.xShift,C$99X.xOffset=C$99X.xScale*(1<<C$99X.xTruncBits-1),C$99X.yMask=(1<<C$99X.yTruncBits)-1<<C$99X.yShift,C$99X.xMask=~C$99X.yMask,C$99X.DestroyParticlesInShape_s_aabb=new C$99te,C$99X.CreateParticleGroup_s_transform=new C$99R,C$99X.ComputeCollisionEnergy_s_v=new C$99j,C$99X.QueryShapeAABB_s_aabb=new C$99te,C$99X.QueryPointAABB_s_aabb=new C$99te,C$99X.RayCast_s_aabb=new C$99te,C$99X.RayCast_s_p=new C$99j,C$99X.RayCast_s_v=new C$99j,C$99X.RayCast_s_n=new C$99j,C$99X.RayCast_s_point=new C$99j,C$99X.k_pairFlags=C$99H.b2ParticleFlag.b2_springParticle,C$99X.k_triadFlags=C$99H.b2ParticleFlag.b2_elasticParticle,C$99X.k_noPressureFlags=C$99H.b2ParticleFlag.b2_powderParticle|C$99H.b2ParticleFlag.b2_tensileParticle,C$99X.k_extraDampingFlags=C$99H.b2ParticleFlag.b2_staticPressureParticle,C$99X.k_barrierWallFlags=C$99H.b2ParticleFlag.b2_barrierParticle|C$99H.b2ParticleFlag.b2_wallParticle,C$99X.CreateParticlesStrokeShapeForGroup_s_edge=new C$99Ni,C$99X.CreateParticlesStrokeShapeForGroup_s_d=new C$99j,C$99X.CreateParticlesStrokeShapeForGroup_s_p=new C$99j,C$99X.CreateParticlesFillShapeForGroup_s_aabb=new C$99te,C$99X.CreateParticlesFillShapeForGroup_s_p=new C$99j,C$99X.UpdatePairsAndTriads_s_dab=new C$99j,C$99X.UpdatePairsAndTriads_s_dbc=new C$99j,C$99X.UpdatePairsAndTriads_s_dca=new C$99j,C$99X.AddContact_s_d=new C$99j,C$99X.UpdateBodyContacts_s_aabb=new C$99te,C$99X.Solve_s_subStep=new C$99us,C$99X.SolveCollision_s_aabb=new C$99te,C$99X.SolveGravity_s_gravity=new C$99j,C$99X.SolveBarrier_s_aabb=new C$99te,C$99X.SolveBarrier_s_va=new C$99j,C$99X.SolveBarrier_s_vb=new C$99j,C$99X.SolveBarrier_s_pba=new C$99j,C$99X.SolveBarrier_s_vba=new C$99j,C$99X.SolveBarrier_s_vc=new C$99j,C$99X.SolveBarrier_s_pca=new C$99j,C$99X.SolveBarrier_s_vca=new C$99j,C$99X.SolveBarrier_s_qba=new C$99j,C$99X.SolveBarrier_s_qca=new C$99j,C$99X.SolveBarrier_s_dv=new C$99j,C$99X.SolveBarrier_s_f=new C$99j,C$99X.SolvePressure_s_f=new C$99j,C$99X.SolveDamping_s_v=new C$99j,C$99X.SolveDamping_s_f=new C$99j,C$99X.SolveRigidDamping_s_t0=new C$99j,C$99X.SolveRigidDamping_s_t1=new C$99j,C$99X.SolveRigidDamping_s_p=new C$99j,C$99X.SolveRigidDamping_s_v=new C$99j,C$99X.SolveExtraDamping_s_v=new C$99j,C$99X.SolveExtraDamping_s_f=new C$99j,C$99X.SolveRigid_s_position=new C$99j,C$99X.SolveRigid_s_rotation=new C$99B,C$99X.SolveRigid_s_transform=new C$99R,C$99X.SolveRigid_s_velocityTransform=new C$99R,C$99X.SolveElastic_s_pa=new C$99j,C$99X.SolveElastic_s_pb=new C$99j,C$99X.SolveElastic_s_pc=new C$99j,C$99X.SolveElastic_s_r=new C$99B,C$99X.SolveElastic_s_t0=new C$99j,C$99X.SolveSpring_s_pa=new C$99j,C$99X.SolveSpring_s_pb=new C$99j,C$99X.SolveSpring_s_d=new C$99j,C$99X.SolveSpring_s_f=new C$99j,C$99X.SolveTensile_s_weightedNormal=new C$99j,C$99X.SolveTensile_s_s=new C$99j,C$99X.SolveTensile_s_f=new C$99j,C$99X.SolveViscous_s_v=new C$99j,C$99X.SolveViscous_s_f=new C$99j,C$99X.SolveRepulsive_s_f=new C$99j,C$99X.SolvePowder_s_f=new C$99j,C$99X.SolveSolid_s_f=new C$99j,C$99X.RemoveSpuriousBodyContacts_s_n=new C$99j,C$99X.RemoveSpuriousBodyContacts_s_pos=new C$99j,C$99X.RemoveSpuriousBodyContacts_s_normal=new C$99j,C$99X),function(C$99_){C$99_.UserOverridableBuffer=function(){this.data=null,this.userSuppliedCapacity=0},C$99e.CompareProxyProxy=function(C$99t,C$99e){return C$99t.tag<C$99e.tag},C$99e.CompareTagProxy=function(C$99t,C$99e){return C$99t<C$99e.tag},C$99e.CompareProxyTag=function(C$99t,C$99e){return C$99t.tag<C$99e};var C$99t=C$99e;function C$99e(){this.index=-1,this.tag=0}function C$99l(C$99t,C$99e,C$99i,C$99n,C$99r){this.m_system=C$99t,this.m_xLower=(C$99e&C$99_.xMask)>>>0,this.m_xUpper=(C$99i&C$99_.xMask)>>>0,this.m_yLower=(C$99e&C$99_.yMask)>>>0,this.m_yUpper=(C$99i&C$99_.yMask)>>>0,this.m_first=C$99n,this.m_last=C$99r}C$99_.Proxy=C$99t,C$99l.prototype.GetNext=function(){for(;this.m_first<this.m_last;){var C$99t=(this.m_system.m_proxyBuffer.data[this.m_first].tag&C$99_.xMask)>>>0;if(C$99t>=this.m_xLower&&C$99t<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return-1},C$99_.InsideBoundsEnumerator=C$99l;C$99_.ParticleListNode=function(){this.next=null,this.count=0,this.index=0},C$99i.prototype.Allocate=function(C$99t,C$99e){return C$99e},C$99i.prototype.Clear=function(){},C$99i.prototype.GetCount=function(){return 0},C$99i.prototype.Invalidate=function(C$99t){},C$99i.prototype.GetValidBuffer=function(){return[]},C$99i.prototype.GetBuffer=function(){return[]},C$99i.prototype.SetCount=function(C$99t){};C$99t=C$99i;function C$99i(){}C$99_.FixedSetAllocator=C$99t;C$99_.FixtureParticle=function(C$99t,C$99e){this.second=-1,this.first=C$99t,this.second=C$99e},C$99Di(C$99n,C$99h=C$99_.FixedSetAllocator),C$99n.prototype.Initialize=function(C$99t,C$99e){},C$99n.prototype.Find=function(C$99t){return-1};var C$99h,C$99t=C$99n;function C$99n(){return null!==C$99h&&C$99h.apply(this,arguments)||this}C$99_.FixtureParticleSet=C$99t;C$99_.ParticlePair=function(C$99t,C$99e){this.first=-1,this.second=-1,this.first=C$99t,this.second=C$99e},C$99Di(C$99r,C$99u=C$99_.FixedSetAllocator),C$99r.prototype.Initialize=function(C$99t,C$99e){},C$99r.prototype.Find=function(C$99t){return-1};var C$99u,C$99t=C$99r;function C$99r(){return null!==C$99u&&C$99u.apply(this,arguments)||this}function C$99d(){}C$99_.b2ParticlePairSet=C$99t,C$99d.prototype.IsNecessary=function(C$99t){return!0},C$99d.prototype.ShouldCreatePair=function(C$99t,C$99e){return!0},C$99d.prototype.ShouldCreateTriad=function(C$99t,C$99e,C$99i){return!0},C$99_.ConnectionFilter=C$99d;C$99Di(C$99s,C$99f=C$99ns),C$99s.prototype.ReportFixture=function(C$99t){return!1},C$99s.prototype.ReportParticle=function(C$99t,C$99e){if(C$99t!==this.m_system)return!1;if(!this.m_system.m_positionBuffer.data)throw new Error;return this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[C$99e])&&(this.m_system.DestroyParticle(C$99e,this.m_callDestructionListener),this.m_destroyed++),!0},C$99s.prototype.Destroyed=function(){return this.m_destroyed};var C$99f,C$99t=C$99s;function C$99s(C$99t,C$99e,C$99i,C$99n){var C$99r=C$99f.call(this)||this;return C$99r.m_callDestructionListener=!1,C$99r.m_destroyed=0,C$99r.m_system=C$99t,C$99r.m_shape=C$99e,C$99r.m_xf=C$99i,C$99r.m_callDestructionListener=C$99n,C$99r.m_destroyed=0,C$99r}C$99_.DestroyParticlesInShapeCallback=C$99t;C$99Di(C$99m,C$99p=C$99_.ConnectionFilter),C$99m.prototype.ShouldCreatePair=function(C$99t,C$99e){return C$99t<this.m_threshold&&this.m_threshold<=C$99e||C$99e<this.m_threshold&&this.m_threshold<=C$99t},C$99m.prototype.ShouldCreateTriad=function(C$99t,C$99e,C$99i){return(C$99t<this.m_threshold||C$99e<this.m_threshold||C$99i<this.m_threshold)&&(this.m_threshold<=C$99t||this.m_threshold<=C$99e||this.m_threshold<=C$99i)};var C$99p,C$99t=C$99m;function C$99m(C$99t){var C$99e=C$99p.call(this)||this;return C$99e.m_threshold=0,C$99e.m_threshold=C$99t,C$99e}C$99_.JoinParticleGroupsFilter=C$99t;C$99Di(C$99o,C$99y=C$99Bi),C$99o.prototype.Clone=function(){throw new Error},C$99o.prototype.GetChildCount=function(){return 1},C$99o.prototype.TestPoint=function(C$99t,C$99e){for(var C$99i=0;C$99i<this.m_shapeCount;C$99i++)if(this.m_shapes[C$99i].TestPoint(C$99t,C$99e))return!0;return!1},C$99o.prototype.ComputeDistance=function(C$99t,C$99e,C$99i,C$99n){return 0},C$99o.prototype.RayCast=function(C$99t,C$99e,C$99i,C$99n){return!1},C$99o.prototype.ComputeAABB=function(C$99t,C$99e,C$99i){var C$99n=new C$99te;C$99t.lowerBound.x=+C$99P,C$99t.lowerBound.y=+C$99P,C$99t.upperBound.x=-C$99P,C$99t.upperBound.y=-C$99P;for(var C$99r=0;C$99r<this.m_shapeCount;C$99r++)for(var C$99s=this.m_shapes[C$99r].GetChildCount(),C$99o=0;C$99o<C$99s;C$99o++){var C$99a=C$99n;this.m_shapes[C$99r].ComputeAABB(C$99a,C$99e,C$99o),C$99t.Combine1(C$99a)}},C$99o.prototype.ComputeMass=function(C$99t,C$99e){},C$99o.prototype.SetupDistanceProxy=function(C$99t,C$99e){},C$99o.prototype.ComputeSubmergedArea=function(C$99t,C$99e,C$99i,C$99n){return 0},C$99o.prototype.Dump=function(C$99t){};var C$99y,C$99t=C$99o;function C$99o(C$99t,C$99e){void 0===C$99e&&(C$99e=C$99t.length);var C$99i=C$99y.call(this,C$99H.b2ShapeType.e_unknown,0)||this;return C$99i.m_shapeCount=0,C$99i.m_shapes=C$99t,C$99i.m_shapeCount=C$99e,C$99i}C$99_.CompositeShape=C$99t;C$99Di(C$99v,C$99g=C$99_.ConnectionFilter),C$99v.prototype.IsNecessary=function(C$99t){if(!this.m_flagsBuffer.data)throw new Error;return 0!=(this.m_flagsBuffer.data[C$99t]&C$99H.b2ParticleFlag.b2_reactiveParticle)};var C$99g,C$99t=C$99v;function C$99v(C$99t){var C$99e=C$99g.call(this)||this;return C$99e.m_flagsBuffer=C$99t,C$99e}C$99_.ReactiveFilter=C$99t;C$99Di(C$99a,C$99x=C$99eo),C$99a.prototype.ShouldCollideFixtureParticle=function(C$99t,C$99e,C$99i){if(this.m_contactFilter&&this.m_system.GetFlagsBuffer()[C$99i]&C$99H.b2ParticleFlag.b2_fixtureContactFilterParticle)return this.m_contactFilter.ShouldCollideFixtureParticle(C$99t,this.m_system,C$99i);return!0},C$99a.prototype.ReportFixtureAndParticle=function(C$99t,C$99e,C$99i){var C$99n=C$99_.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n,C$99r=C$99_.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp;if(!this.m_system.m_flagsBuffer.data)throw new Error;if(!this.m_system.m_positionBuffer.data)throw new Error;var C$99s,C$99h,C$99o,C$99a,C$99c,C$99l=this.m_system.m_positionBuffer.data[C$99i],C$99e=C$99t.ComputeDistance(C$99l,C$99n,C$99e);C$99e<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(C$99t,this.m_system,C$99i)&&(C$99a=(C$99s=C$99t.GetBody()).GetWorldCenter(),C$99h=0<(C$99o=C$99s.GetMass())?1/C$99o:0,C$99o=0<(C$99o=C$99s.GetInertia()-C$99o*C$99s.GetLocalCenter().LengthSquared())?1/C$99o:0,C$99c=this.m_system.m_flagsBuffer.data[C$99i]&C$99H.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),C$99l=C$99j.SubVV(C$99l,C$99a,C$99r),C$99r=C$99c+C$99h+C$99o*(C$99a=C$99j.CrossVV(C$99l,C$99n))*C$99a,(C$99c=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()]).index=C$99i,C$99c.body=C$99s,C$99c.fixture=C$99t,C$99c.weight=1-C$99e*this.m_system.m_inverseDiameter,C$99c.normal.Copy(C$99n.SelfNeg()),C$99c.mass=0<C$99r?1/C$99r:0,this.m_system.DetectStuckParticle(C$99i))},C$99a.ReportFixtureAndParticle_s_n=new C$99j,C$99a.ReportFixtureAndParticle_s_rp=new C$99j;var C$99x,C$99t=C$99a;function C$99a(C$99t,C$99e){C$99t=C$99x.call(this,C$99t)||this;return C$99t.m_contactFilter=C$99e,C$99t}C$99_.UpdateBodyContactsCallback=C$99t;C$99Di(C$99c,C$99b=C$99eo),C$99c.prototype.ReportFixtureAndParticle=function(C$99t,C$99e,C$99i){var C$99n=C$99_.SolveCollisionCallback.ReportFixtureAndParticle_s_p1,C$99r=C$99_.SolveCollisionCallback.ReportFixtureAndParticle_s_output,C$99s=C$99_.SolveCollisionCallback.ReportFixtureAndParticle_s_input,C$99o=C$99_.SolveCollisionCallback.ReportFixtureAndParticle_s_p,C$99h=C$99_.SolveCollisionCallback.ReportFixtureAndParticle_s_v,C$99u=C$99_.SolveCollisionCallback.ReportFixtureAndParticle_s_f,C$99a=C$99t.GetBody();if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;var C$99c=this.m_system.m_positionBuffer.data[C$99i],C$99l=this.m_system.m_velocityBuffer.data[C$99i];0===this.m_system.m_iterationIndex?(C$99n=C$99R.MulTXV(C$99a.m_xf0,C$99c,C$99n),C$99t.GetShape().GetType()===C$99H.b2ShapeType.e_circleShape&&(C$99n.SelfSub(C$99a.GetLocalCenter()),C$99B.MulRV(C$99a.m_xf0.q,C$99n,C$99n),C$99B.MulTRV(C$99a.m_xf.q,C$99n,C$99n),C$99n.SelfAdd(C$99a.GetLocalCenter())),C$99R.MulXV(C$99a.m_xf,C$99n,C$99s.p1)):C$99s.p1.Copy(C$99c),C$99j.AddVMulSV(C$99c,this.m_step.dt,C$99l,C$99s.p2),C$99s.maxFraction=1,C$99t.RayCast(C$99r,C$99s,C$99e)&&(C$99a=C$99r.normal,(C$99n=C$99o).x=(1-C$99r.fraction)*C$99s.p1.x+C$99r.fraction*C$99s.p2.x+.008*C$99a.x,C$99n.y=(1-C$99r.fraction)*C$99s.p1.y+C$99r.fraction*C$99s.p2.y+.008*C$99a.y,(C$99t=C$99h).x=this.m_step.inv_dt*(C$99n.x-C$99c.x),C$99t.y=this.m_step.inv_dt*(C$99n.y-C$99c.y),this.m_system.m_velocityBuffer.data[C$99i].Copy(C$99t),(C$99e=C$99u).x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(C$99l.x-C$99t.x),C$99e.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(C$99l.y-C$99t.y),this.m_system.ParticleApplyForce(C$99i,C$99e))},C$99c.prototype.ReportParticle=function(C$99t,C$99e){return!1},C$99c.ReportFixtureAndParticle_s_p1=new C$99j,C$99c.ReportFixtureAndParticle_s_output=new C$99Qt,C$99c.ReportFixtureAndParticle_s_input=new C$99Zt,C$99c.ReportFixtureAndParticle_s_p=new C$99j,C$99c.ReportFixtureAndParticle_s_v=new C$99j,C$99c.ReportFixtureAndParticle_s_f=new C$99j;var C$99b,C$99t=C$99c;function C$99c(C$99t,C$99e){C$99t=C$99b.call(this,C$99t)||this;return C$99t.m_step=C$99e,C$99t}C$99_.SolveCollisionCallback=C$99t}(C$99H.b2ParticleSystem||(C$99H.b2ParticleSystem={}));C$99E.prototype.SetDestructionListener=function(C$99t){this.m_destructionListener=C$99t},C$99E.prototype.SetContactFilter=function(C$99t){this.m_contactManager.m_contactFilter=C$99t},C$99E.prototype.SetContactListener=function(C$99t){this.m_contactManager.m_contactListener=C$99t},C$99E.prototype.SetDebugDraw=function(C$99t){this.m_debugDraw=C$99t},C$99E.prototype.CreateBody=function(C$99t){if(void 0===C$99t&&(C$99t={}),this.IsLocked())throw new Error;C$99t=new C$99Zi(C$99t,this);return C$99t.m_prev=null,C$99t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=C$99t),this.m_bodyList=C$99t,++this.m_bodyCount,C$99t},C$99E.prototype.DestroyBody=function(C$99t){if(this.IsLocked())throw new Error;for(var C$99e=C$99t.m_jointList;C$99e;){var C$99i=C$99e,C$99e=C$99e.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(C$99i.joint),this.DestroyJoint(C$99i.joint),C$99t.m_jointList=C$99e}C$99t.m_jointList=null;for(var C$99n=C$99t.m_controllerList;C$99n;){var C$99r=C$99n,C$99n=C$99n.nextController;C$99r.controller.RemoveBody(C$99t)}for(var C$99s=C$99t.m_contactList;C$99s;){var C$99o=C$99s,C$99s=C$99s.next;this.m_contactManager.Destroy(C$99o.contact)}C$99t.m_contactList=null;for(var C$99a=C$99t.m_fixtureList;C$99a;){var C$99c=C$99a,C$99a=C$99a.m_next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(C$99c),C$99c.DestroyProxies(),C$99c.Destroy(),C$99t.m_fixtureList=C$99a,--C$99t.m_fixtureCount}C$99t.m_fixtureList=null,C$99t.m_fixtureCount=0,C$99t.m_prev&&(C$99t.m_prev.m_next=C$99t.m_next),C$99t.m_next&&(C$99t.m_next.m_prev=C$99t.m_prev),C$99t===this.m_bodyList&&(this.m_bodyList=C$99t.m_next),--this.m_bodyCount},C$99E._Joint_Create=function(C$99t,C$99e){switch(C$99t.type){case C$99H.b2JointType.e_distanceJoint:return new C$99an(C$99t);case C$99H.b2JointType.e_mouseJoint:return new C$99Fn(C$99t);case C$99H.b2JointType.e_prismaticJoint:return new C$99Wn(C$99t);case C$99H.b2JointType.e_revoluteJoint:return new C$99er(C$99t);case C$99H.b2JointType.e_pulleyJoint:return new C$99Jn(C$99t);case C$99H.b2JointType.e_gearJoint:return new C$99Tn(C$99t);case C$99H.b2JointType.e_wheelJoint:return new C$99vr(C$99t);case C$99H.b2JointType.e_weldJoint:return new C$99dr(C$99t);case C$99H.b2JointType.e_frictionJoint:return new C$99vn(C$99t);case C$99H.b2JointType.e_ropeJoint:return new C$99ar(C$99t);case C$99H.b2JointType.e_motorJoint:return new C$99Rn(C$99t);case C$99H.b2JointType.e_areaJoint:return new C$99dn(C$99t)}throw new Error},C$99E._Joint_Destroy=function(C$99t,C$99e){},C$99E.prototype.CreateJoint=function(C$99t){if(this.IsLocked())throw new Error;var C$99e=C$99E._Joint_Create(C$99t,null),C$99i=(C$99e.m_prev=null,C$99e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=C$99e),this.m_jointList=C$99e,++this.m_jointCount,C$99e.m_edgeA.prev=null,C$99e.m_edgeA.next=C$99e.m_bodyA.m_jointList,C$99e.m_bodyA.m_jointList&&(C$99e.m_bodyA.m_jointList.prev=C$99e.m_edgeA),C$99e.m_bodyA.m_jointList=C$99e.m_edgeA,C$99e.m_edgeB.prev=null,C$99e.m_edgeB.next=C$99e.m_bodyB.m_jointList,C$99e.m_bodyB.m_jointList&&(C$99e.m_bodyB.m_jointList.prev=C$99e.m_edgeB),C$99e.m_bodyB.m_jointList=C$99e.m_edgeB,C$99t.bodyA),C$99n=C$99t.bodyB;if(!C$99t.collideConnected)for(var C$99r=C$99n.GetContactList();C$99r;)C$99r.other===C$99i&&C$99r.contact.FlagForFiltering(),C$99r=C$99r.next;return C$99e},C$99E.prototype.DestroyJoint=function(C$99t){if(this.IsLocked())throw new Error;var C$99e=C$99t.m_collideConnected,C$99i=(C$99t.m_prev&&(C$99t.m_prev.m_next=C$99t.m_next),C$99t.m_next&&(C$99t.m_next.m_prev=C$99t.m_prev),C$99t===this.m_jointList&&(this.m_jointList=C$99t.m_next),C$99t.m_bodyA),C$99n=C$99t.m_bodyB;if(C$99i.SetAwake(!0),C$99n.SetAwake(!0),C$99t.m_edgeA.prev&&(C$99t.m_edgeA.prev.next=C$99t.m_edgeA.next),C$99t.m_edgeA.next&&(C$99t.m_edgeA.next.prev=C$99t.m_edgeA.prev),C$99t.m_edgeA===C$99i.m_jointList&&(C$99i.m_jointList=C$99t.m_edgeA.next),C$99t.m_edgeA.prev=null,C$99t.m_edgeA.next=null,C$99t.m_edgeB.prev&&(C$99t.m_edgeB.prev.next=C$99t.m_edgeB.next),C$99t.m_edgeB.next&&(C$99t.m_edgeB.next.prev=C$99t.m_edgeB.prev),C$99t.m_edgeB===C$99n.m_jointList&&(C$99n.m_jointList=C$99t.m_edgeB.next),C$99t.m_edgeB.prev=null,C$99t.m_edgeB.next=null,C$99E._Joint_Destroy(C$99t,null),--this.m_jointCount,!C$99e)for(var C$99r=C$99n.GetContactList();C$99r;)C$99r.other===C$99i&&C$99r.contact.FlagForFiltering(),C$99r=C$99r.next},C$99E.prototype.CreateParticleSystem=function(C$99t){if(this.IsLocked())throw new Error;C$99t=new C$99H.b2ParticleSystem(C$99t,this);return C$99t.m_prev=null,C$99t.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=C$99t),this.m_particleSystemList=C$99t},C$99E.prototype.DestroyParticleSystem=function(C$99t){if(this.IsLocked())throw new Error;C$99t.m_prev&&(C$99t.m_prev.m_next=C$99t.m_next),C$99t.m_next&&(C$99t.m_next.m_prev=C$99t.m_prev),C$99t===this.m_particleSystemList&&(this.m_particleSystemList=C$99t.m_next)},C$99E.prototype.CalculateReasonableParticleIterations=function(C$99t){return null===this.m_particleSystemList?1:C$99Ps(this.m_gravity.Length(),function(C$99t){for(var C$99e=C$99P,C$99i=C$99t.GetParticleSystemList();null!==C$99i;C$99i=C$99i.m_next)C$99e=C$99L(C$99e,C$99i.GetRadius());return C$99e}(this),C$99t)},C$99E.prototype.Step=function(C$99t,C$99e,C$99i,C$99n){void 0===C$99n&&(C$99n=this.CalculateReasonableParticleIterations(C$99t));var C$99r=C$99E.Step_s_stepTimer.Reset(),C$99s=(this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0,C$99E.Step_s_step),C$99e=(C$99s.dt=C$99t,C$99s.velocityIterations=C$99e,C$99s.positionIterations=C$99i,C$99s.particleIterations=C$99n,C$99s.inv_dt=0<C$99t?1/C$99t:0,C$99s.dtRatio=this.m_inv_dt0*C$99t,C$99s.warmStarting=this.m_warmStarting,C$99E.Step_s_timer.Reset());if(this.m_contactManager.Collide(),this.m_profile.collide=C$99e.GetMilliseconds(),this.m_stepComplete&&0<C$99s.dt){for(var C$99i=C$99E.Step_s_timer.Reset(),C$99o=this.m_particleSystemList;C$99o;C$99o=C$99o.m_next)C$99o.Solve(C$99s);this.Solve(C$99s),this.m_profile.solve=C$99i.GetMilliseconds()}this.m_continuousPhysics&&0<C$99s.dt&&(C$99n=C$99E.Step_s_timer.Reset(),this.SolveTOI(C$99s),this.m_profile.solveTOI=C$99n.GetMilliseconds()),0<C$99s.dt&&(this.m_inv_dt0=C$99s.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=C$99r.GetMilliseconds()},C$99E.prototype.ClearForces=function(){for(var C$99t=this.m_bodyList;C$99t;C$99t=C$99t.m_next)C$99t.m_force.SetZero(),C$99t.m_torque=0},C$99E.prototype.DrawParticleSystem=function(C$99t){var C$99e,C$99i,C$99n;null===this.m_debugDraw||(C$99e=C$99t.GetParticleCount())&&(C$99i=C$99t.GetRadius(),C$99n=C$99t.GetPositionBuffer(),C$99t.m_colorBuffer.data?(C$99t=C$99t.GetColorBuffer(),this.m_debugDraw.DrawParticles(C$99n,C$99i,C$99t,C$99e)):this.m_debugDraw.DrawParticles(C$99n,C$99i,null,C$99e))},C$99E.prototype.DrawDebugData=function(){if(null!==this.m_debugDraw){var C$99t=this.m_debugDraw.GetFlags(),C$99e=C$99E.DrawDebugData_s_color.SetRGB(0,0,0);if(C$99t&C$99H.b2DrawFlags.e_shapeBit)for(var C$99i=this.m_bodyList;C$99i;C$99i=C$99i.m_next){var C$99n=C$99i.m_xf;this.m_debugDraw.PushTransform(C$99n);for(var C$99r=C$99i.GetFixtureList();C$99r;C$99r=C$99r.m_next)C$99i.IsActive()?C$99i.GetType()===C$99H.b2BodyType.b2_staticBody?C$99e.SetRGB(.5,.9,.5):C$99i.GetType()===C$99H.b2BodyType.b2_kinematicBody?C$99e.SetRGB(.5,.5,.9):C$99i.IsAwake()?C$99e.SetRGB(.9,.7,.7):C$99e.SetRGB(.6,.6,.6):C$99e.SetRGB(.5,.5,.3),this.DrawShape(C$99r,C$99e);this.m_debugDraw.PopTransform(C$99n)}if(C$99t&C$99H.b2DrawFlags.e_particleBit)for(var C$99s=this.m_particleSystemList;C$99s;C$99s=C$99s.m_next)this.DrawParticleSystem(C$99s);if(C$99t&C$99H.b2DrawFlags.e_jointBit)for(var C$99o=this.m_jointList;C$99o;C$99o=C$99o.m_next)this.DrawJoint(C$99o);if(C$99t&C$99H.b2DrawFlags.e_aabbBit){C$99e.SetRGB(.9,.3,.9);for(var C$99a=C$99E.DrawDebugData_s_vs,C$99i=this.m_bodyList;C$99i;C$99i=C$99i.m_next)if(C$99i.IsActive())for(C$99r=C$99i.GetFixtureList();C$99r;C$99r=C$99r.m_next)for(var C$99h=0;C$99h<C$99r.m_proxyCount;++C$99h){var C$99c=C$99r.m_proxies[C$99h].treeNode.aabb;C$99a[0].Set(C$99c.lowerBound.x,C$99c.lowerBound.y),C$99a[1].Set(C$99c.upperBound.x,C$99c.lowerBound.y),C$99a[2].Set(C$99c.upperBound.x,C$99c.upperBound.y),C$99a[3].Set(C$99c.lowerBound.x,C$99c.upperBound.y),this.m_debugDraw.DrawPolygon(C$99a,4,C$99e)}}if(C$99t&C$99H.b2DrawFlags.e_centerOfMassBit)for(C$99i=this.m_bodyList;C$99i;C$99i=C$99i.m_next)(C$99n=C$99E.DrawDebugData_s_xf).q.Copy(C$99i.m_xf.q),C$99n.p.Copy(C$99i.GetWorldCenter()),this.m_debugDraw.DrawTransform(C$99n);if(C$99t&C$99H.b2DrawFlags.e_controllerBit)for(var C$99l=this.m_controllerList;C$99l;C$99l=C$99l.m_next)C$99l.Draw(this.m_debugDraw)}},C$99E.prototype.QueryAABB=function(C$99e,C$99t,C$99i){if(this.m_contactManager.m_broadPhase.Query(C$99t,function(C$99t){C$99t=C$99t.userData.fixture;return C$99e?C$99e.ReportFixture(C$99t):!C$99i||C$99i(C$99t)}),C$99e instanceof C$99ns)for(var C$99n=this.m_particleSystemList;C$99n;C$99n=C$99n.m_next)C$99e.ShouldQueryParticleSystem(C$99n)&&C$99n.QueryAABB(C$99e,C$99t)},C$99E.prototype.QueryAllAABB=function(C$99t,C$99e){return void 0===C$99e&&(C$99e=[]),this.QueryAABB(null,C$99t,function(C$99t){return C$99e.push(C$99t),!0}),C$99e},C$99E.prototype.QueryPointAABB=function(C$99e,C$99t,C$99i){if(this.m_contactManager.m_broadPhase.QueryPoint(C$99t,function(C$99t){C$99t=C$99t.userData.fixture;return C$99e?C$99e.ReportFixture(C$99t):!C$99i||C$99i(C$99t)}),C$99e instanceof C$99ns)for(var C$99n=this.m_particleSystemList;C$99n;C$99n=C$99n.m_next)C$99e.ShouldQueryParticleSystem(C$99n)&&C$99n.QueryPointAABB(C$99e,C$99t)},C$99E.prototype.QueryAllPointAABB=function(C$99t,C$99e){return void 0===C$99e&&(C$99e=[]),this.QueryPointAABB(null,C$99t,function(C$99t){return C$99e.push(C$99t),!0}),C$99e},C$99E.prototype.QueryFixtureShape=function(C$99i,C$99n,C$99r,C$99s,C$99o){var C$99t=C$99E.QueryFixtureShape_s_aabb;if(C$99n.ComputeAABB(C$99t,C$99s,C$99r),this.m_contactManager.m_broadPhase.Query(C$99t,function(C$99t){var C$99t=C$99t.userData,C$99e=C$99t.fixture;if(C$99ae(C$99n,C$99r,C$99e.GetShape(),C$99t.childIndex,C$99s,C$99e.GetBody().GetTransform())){if(C$99i)return C$99i.ReportFixture(C$99e);if(C$99o)return C$99o(C$99e)}return!0}),C$99i instanceof C$99ns)for(var C$99e=this.m_particleSystemList;C$99e;C$99e=C$99e.m_next)C$99i.ShouldQueryParticleSystem(C$99e)&&C$99e.QueryAABB(C$99i,C$99t)},C$99E.prototype.QueryAllFixtureShape=function(C$99t,C$99e,C$99i,C$99n){return void 0===C$99n&&(C$99n=[]),this.QueryFixtureShape(null,C$99t,C$99e,C$99i,function(C$99t){return C$99n.push(C$99t),!0}),C$99n},C$99E.prototype.QueryFixturePoint=function(C$99e,C$99i,C$99n){if(this.m_contactManager.m_broadPhase.QueryPoint(C$99i,function(C$99t){C$99t=C$99t.userData.fixture;if(C$99t.TestPoint(C$99i)){if(C$99e)return C$99e.ReportFixture(C$99t);if(C$99n)return C$99n(C$99t)}return!0}),C$99e)for(var C$99t=this.m_particleSystemList;C$99t;C$99t=C$99t.m_next)C$99e.ShouldQueryParticleSystem(C$99t)&&C$99t.QueryPointAABB(C$99e,C$99i)},C$99E.prototype.QueryAllFixturePoint=function(C$99t,C$99e){return void 0===C$99e&&(C$99e=[]),this.QueryFixturePoint(null,C$99t,function(C$99t){return C$99e.push(C$99t),!0}),C$99e},C$99E.prototype.RayCast=function(C$99s,C$99o,C$99a,C$99c){var C$99t=C$99E.RayCast_s_input;if(C$99t.maxFraction=1,C$99t.p1.Copy(C$99o),C$99t.p2.Copy(C$99a),this.m_contactManager.m_broadPhase.RayCast(C$99t,function(C$99t,C$99e){var C$99e=C$99e.userData,C$99i=C$99e.fixture,C$99e=C$99e.childIndex,C$99n=C$99E.RayCast_s_output;if(C$99i.RayCast(C$99n,C$99t,C$99e)){var C$99e=C$99n.fraction,C$99r=C$99E.RayCast_s_point;if(C$99r.Set((1-C$99e)*C$99o.x+C$99e*C$99a.x,(1-C$99e)*C$99o.y+C$99e*C$99a.y),C$99s)return C$99s.ReportFixture(C$99i,C$99r,C$99n.normal,C$99e);if(C$99c)return C$99c(C$99i,C$99r,C$99n.normal,C$99e)}return C$99t.maxFraction}),C$99s)for(var C$99e=this.m_particleSystemList;C$99e;C$99e=C$99e.m_next)C$99s.ShouldQueryParticleSystem(C$99e)&&C$99e.RayCast(C$99s,C$99o,C$99a)},C$99E.prototype.RayCastOne=function(C$99t,C$99e){var C$99r=null,C$99s=1;return this.RayCast(null,C$99t,C$99e,function(C$99t,C$99e,C$99i,C$99n){return C$99n<C$99s&&(C$99s=C$99n,C$99r=C$99t),C$99s}),C$99r},C$99E.prototype.RayCastAll=function(C$99t,C$99e,C$99r){return void 0===C$99r&&(C$99r=[]),this.RayCast(null,C$99t,C$99e,function(C$99t,C$99e,C$99i,C$99n){return C$99r.push(C$99t),1}),C$99r},C$99E.prototype.GetBodyList=function(){return this.m_bodyList},C$99E.prototype.GetJointList=function(){return this.m_jointList},C$99E.prototype.GetParticleSystemList=function(){return this.m_particleSystemList},C$99E.prototype.GetContactList=function(){return this.m_contactManager.m_contactList},C$99E.prototype.SetAllowSleeping=function(C$99t){if(C$99t!==this.m_allowSleep&&(this.m_allowSleep=C$99t,!this.m_allowSleep))for(var C$99e=this.m_bodyList;C$99e;C$99e=C$99e.m_next)C$99e.SetAwake(!0)},C$99E.prototype.GetAllowSleeping=function(){return this.m_allowSleep},C$99E.prototype.SetWarmStarting=function(C$99t){this.m_warmStarting=C$99t},C$99E.prototype.GetWarmStarting=function(){return this.m_warmStarting},C$99E.prototype.SetContinuousPhysics=function(C$99t){this.m_continuousPhysics=C$99t},C$99E.prototype.GetContinuousPhysics=function(){return this.m_continuousPhysics},C$99E.prototype.SetSubStepping=function(C$99t){this.m_subStepping=C$99t},C$99E.prototype.GetSubStepping=function(){return this.m_subStepping},C$99E.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},C$99E.prototype.GetBodyCount=function(){return this.m_bodyCount},C$99E.prototype.GetJointCount=function(){return this.m_jointCount},C$99E.prototype.GetContactCount=function(){return this.m_contactManager.m_contactCount},C$99E.prototype.GetTreeHeight=function(){return this.m_contactManager.m_broadPhase.GetTreeHeight()},C$99E.prototype.GetTreeBalance=function(){return this.m_contactManager.m_broadPhase.GetTreeBalance()},C$99E.prototype.GetTreeQuality=function(){return this.m_contactManager.m_broadPhase.GetTreeQuality()},C$99E.prototype.SetGravity=function(C$99t,C$99e){if(void 0===C$99e&&(C$99e=!0),!C$99j.IsEqualToV(this.m_gravity,C$99t)&&(this.m_gravity.Copy(C$99t),C$99e))for(var C$99i=this.m_bodyList;C$99i;C$99i=C$99i.m_next)C$99i.SetAwake(!0)},C$99E.prototype.GetGravity=function(){return this.m_gravity},C$99E.prototype.IsLocked=function(){return this.m_locked},C$99E.prototype.SetAutoClearForces=function(C$99t){this.m_clearForces=C$99t},C$99E.prototype.GetAutoClearForces=function(){return this.m_clearForces},C$99E.prototype.ShiftOrigin=function(C$99t){if(this.IsLocked())throw new Error;for(var C$99e=this.m_bodyList;C$99e;C$99e=C$99e.m_next)C$99e.m_xf.p.SelfSub(C$99t),C$99e.m_sweep.c0.SelfSub(C$99t),C$99e.m_sweep.c.SelfSub(C$99t);for(var C$99i=this.m_jointList;C$99i;C$99i=C$99i.m_next)C$99i.ShiftOrigin(C$99t);this.m_contactManager.m_broadPhase.ShiftOrigin(C$99t)},C$99E.prototype.GetContactManager=function(){return this.m_contactManager},C$99E.prototype.GetProfile=function(){return this.m_profile},C$99E.prototype.Dump=function(C$99t){if(!this.m_locked){C$99t("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),C$99t("this.m_world.SetGravity(g);\n"),C$99t("const bodies: b2Body[] = [];\n"),C$99t("const joints: b2Joint[] = [];\n");for(var C$99e=0,C$99i=this.m_bodyList;C$99i;C$99i=C$99i.m_next)C$99i.m_islandIndex=C$99e,C$99i.Dump(C$99t),++C$99e;for(var C$99e=0,C$99n=this.m_jointList;C$99n;C$99n=C$99n.m_next)C$99n.m_index=C$99e,++C$99e;for(C$99n=this.m_jointList;C$99n;C$99n=C$99n.m_next)C$99n.m_type!==C$99H.b2JointType.e_gearJoint&&(C$99t("{\n"),C$99n.Dump(C$99t),C$99t("}\n"));for(C$99n=this.m_jointList;C$99n;C$99n=C$99n.m_next)C$99n.m_type===C$99H.b2JointType.e_gearJoint&&(C$99t("{\n"),C$99n.Dump(C$99t),C$99t("}\n"))}},C$99E.prototype.DrawJoint=function(C$99t){if(null!==this.m_debugDraw){var C$99e=C$99t.GetBodyA(),C$99i=C$99t.GetBodyB(),C$99e=C$99e.m_xf,C$99i=C$99i.m_xf,C$99n=C$99e.p,C$99r=C$99i.p,C$99s=C$99t.GetAnchorA(C$99E.DrawJoint_s_p1),C$99o=C$99t.GetAnchorB(C$99E.DrawJoint_s_p2),C$99a=C$99E.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(C$99t.m_type){case C$99H.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(C$99s,C$99o,C$99a);break;case C$99H.b2JointType.e_pulleyJoint:var C$99c=C$99t,C$99l=C$99c.GetGroundAnchorA(),C$99c=C$99c.GetGroundAnchorB();this.m_debugDraw.DrawSegment(C$99l,C$99s,C$99a),this.m_debugDraw.DrawSegment(C$99c,C$99o,C$99a),this.m_debugDraw.DrawSegment(C$99l,C$99c,C$99a);break;case C$99H.b2JointType.e_mouseJoint:C$99l=C$99E.DrawJoint_s_c;C$99l.Set(0,1,0),this.m_debugDraw.DrawPoint(C$99s,4,C$99l),this.m_debugDraw.DrawPoint(C$99o,4,C$99l),C$99l.Set(.8,.8,.8),this.m_debugDraw.DrawSegment(C$99s,C$99o,C$99l);break;default:this.m_debugDraw.DrawSegment(C$99n,C$99s,C$99a),this.m_debugDraw.DrawSegment(C$99s,C$99o,C$99a),this.m_debugDraw.DrawSegment(C$99r,C$99o,C$99a)}}},C$99E.prototype.DrawShape=function(C$99t,C$99e){if(null!==this.m_debugDraw){var C$99i=C$99t.GetShape();switch(C$99i.m_type){case C$99H.b2ShapeType.e_circleShape:var C$99n=C$99i.m_p,C$99r=C$99i.m_radius,C$99s=C$99j.UNITX;this.m_debugDraw.DrawSolidCircle(C$99n,C$99r,C$99s,C$99e);break;case C$99H.b2ShapeType.e_edgeShape:var C$99o=C$99i.m_vertex1,C$99a=C$99i.m_vertex2;this.m_debugDraw.DrawSegment(C$99o,C$99a,C$99e);break;case C$99H.b2ShapeType.e_chainShape:var C$99n=C$99i,C$99h=C$99n.m_count,C$99c=C$99n.m_vertices,C$99r=C$99E.DrawShape_s_ghostColor.SetRGBA(.75*C$99e.r,.75*C$99e.g,.75*C$99e.b,C$99e.a),C$99o=C$99c[0];this.m_debugDraw.DrawPoint(C$99o,4,C$99e),C$99n.m_hasPrevVertex&&(C$99s=C$99n.m_prevVertex,this.m_debugDraw.DrawSegment(C$99s,C$99o,C$99r),this.m_debugDraw.DrawCircle(C$99s,.1,C$99r));for(var C$99l=1;C$99l<C$99h;++C$99l){C$99a=C$99c[C$99l];this.m_debugDraw.DrawSegment(C$99o,C$99a,C$99e),this.m_debugDraw.DrawPoint(C$99a,4,C$99e),C$99o=C$99a}C$99n.m_hasNextVertex&&(C$99s=C$99n.m_nextVertex,this.m_debugDraw.DrawSegment(C$99s,C$99o,C$99r),this.m_debugDraw.DrawCircle(C$99s,.1,C$99r));break;case C$99H.b2ShapeType.e_polygonShape:C$99n=C$99i.m_count,C$99c=C$99i.m_vertices;this.m_debugDraw.DrawSolidPolygon(C$99c,C$99n,C$99e)}}},C$99E.prototype.Solve=function(C$99h){for(var C$99t=this.m_bodyList;C$99t;C$99t=C$99t.m_next)C$99t.m_xf0.Copy(C$99t.m_xf);for(var C$99u=this.m_controllerList;C$99u;C$99u=C$99u.m_next)C$99u.Step(C$99h);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;var C$99e=this.m_island;C$99e.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(C$99t=this.m_bodyList;C$99t;C$99t=C$99t.m_next)C$99t.m_islandFlag=!1;for(var C$99_=this.m_contactManager.m_contactList;C$99_;C$99_=C$99_.m_next)C$99_.m_islandFlag=!1;for(var C$99d=this.m_jointList;C$99d;C$99d=C$99d.m_next)C$99d.m_islandFlag=!1;for(var C$99i=this.s_stack,C$99n=this.m_bodyList;C$99n;C$99n=C$99n.m_next)if(!C$99n.m_islandFlag&&C$99n.IsAwake()&&C$99n.IsActive()&&C$99n.GetType()!==C$99H.b2BodyType.b2_staticBody){C$99e.Clear();var C$99r=0;for((C$99i[C$99r++]=C$99n).m_islandFlag=!0;0<C$99r;){if(!(C$99t=C$99i[--C$99r]))throw new Error;if(C$99e.AddBody(C$99t),C$99t.m_awakeFlag=!0,C$99t.GetType()!==C$99H.b2BodyType.b2_staticBody){for(var C$99s=C$99t.m_contactList;C$99s;C$99s=C$99s.next){var C$99o=C$99s.contact;if(!C$99o.m_islandFlag&&(C$99o.IsEnabled()&&C$99o.IsTouching())){var C$99f=C$99o.m_fixtureA.m_isSensor,C$99p=C$99o.m_fixtureB.m_isSensor;if(!C$99f&&!C$99p){if(C$99e.AddContact(C$99o),C$99o.m_islandFlag=!0,!(C$99a=C$99s.other))throw new Error;C$99a.m_islandFlag||((C$99i[C$99r++]=C$99a).m_islandFlag=!0)}}}for(var C$99a,C$99c=C$99t.m_jointList;C$99c;C$99c=C$99c.next)C$99c.joint.m_islandFlag||(C$99a=C$99c.other).IsActive()&&(C$99e.AddJoint(C$99c.joint),C$99c.joint.m_islandFlag=!0,C$99a.m_islandFlag||((C$99i[C$99r++]=C$99a).m_islandFlag=!0))}}var C$99m=new C$99ls;C$99e.Solve(C$99m,C$99h,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=C$99m.solveInit,this.m_profile.solveVelocity+=C$99m.solveVelocity,this.m_profile.solvePosition+=C$99m.solvePosition;for(var C$99l=0;C$99l<C$99e.m_bodyCount;++C$99l)(C$99t=C$99e.m_bodies[C$99l]).GetType()===C$99H.b2BodyType.b2_staticBody&&(C$99t.m_islandFlag=!1)}for(C$99l=0;C$99l<C$99i.length&&C$99i[C$99l];++C$99l)C$99i[C$99l]=null;for(var C$99y=new C$99$,C$99t=this.m_bodyList;C$99t;C$99t=C$99t.m_next)C$99t.m_islandFlag&&C$99t.GetType()!==C$99H.b2BodyType.b2_staticBody&&C$99t.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=C$99y.GetMilliseconds()},C$99E.prototype.SolveTOI=function(C$99h){var C$99t=this.m_island;if(C$99t.Initialize(64,32,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(var C$99u=this.m_bodyList;C$99u;C$99u=C$99u.m_next)C$99u.m_islandFlag=!1,C$99u.m_sweep.alpha0=0;for(var C$99e=this.m_contactManager.m_contactList;C$99e;C$99e=C$99e.m_next)C$99e.m_toiFlag=!1,C$99e.m_islandFlag=!1,C$99e.m_toiCount=0,C$99e.m_toi=1}for(;;){for(var C$99i=null,C$99_=1,C$99e=this.m_contactManager.m_contactList;C$99e;C$99e=C$99e.m_next)if(C$99e.IsEnabled()&&!(8<C$99e.m_toiCount)){var C$99d=1;if(C$99e.m_toiFlag)C$99d=C$99e.m_toi;else{var C$99f=C$99e.GetFixtureA(),C$99p=C$99e.GetFixtureB();if(C$99f.IsSensor()||C$99p.IsSensor())continue;var C$99n=C$99f.GetBody(),C$99m=C$99p.GetBody(),C$99r=C$99n.m_type,C$99y=C$99m.m_type,C$99g=C$99n.IsAwake()&&C$99r!==C$99H.b2BodyType.b2_staticBody,C$99s=C$99m.IsAwake()&&C$99y!==C$99H.b2BodyType.b2_staticBody;if(!C$99g&&!C$99s)continue;C$99g=C$99n.IsBullet()||C$99r!==C$99H.b2BodyType.b2_dynamicBody,C$99s=C$99m.IsBullet()||C$99y!==C$99H.b2BodyType.b2_dynamicBody;if(!C$99g&&!C$99s)continue;C$99r=C$99n.m_sweep.alpha0,C$99y=(C$99n.m_sweep.alpha0<C$99m.m_sweep.alpha0?(C$99r=C$99m.m_sweep.alpha0,C$99n.m_sweep.Advance(C$99r)):C$99m.m_sweep.alpha0<C$99n.m_sweep.alpha0&&(C$99r=C$99n.m_sweep.alpha0,C$99m.m_sweep.Advance(C$99r)),C$99e.GetChildIndexA()),C$99g=C$99e.GetChildIndexB(),C$99s=C$99E.SolveTOI_s_toi_input,C$99f=(C$99s.proxyA.SetShape(C$99f.GetShape(),C$99y),C$99s.proxyB.SetShape(C$99p.GetShape(),C$99g),C$99s.sweepA.Copy(C$99n.m_sweep),C$99s.sweepB.Copy(C$99m.m_sweep),C$99s.tMax=1,C$99E.SolveTOI_s_toi_output),C$99y=(C$99Fe(C$99f,C$99s),C$99f.t),C$99d=C$99f.state===C$99H.b2TOIOutputState.e_touching?C$99L(C$99r+(1-C$99r)*C$99y,1):1;C$99e.m_toi=C$99d,C$99e.m_toiFlag=!0}C$99d<C$99_&&(C$99i=C$99e,C$99_=C$99d)}if(null===C$99i||1-10*C$99M<C$99_){this.m_stepComplete=!0;break}var C$99v=C$99i.GetFixtureA(),C$99x=C$99i.GetFixtureB(),C$99o=C$99v.GetBody(),C$99a=C$99x.GetBody(),C$99v=C$99E.SolveTOI_s_backup1.Copy(C$99o.m_sweep),C$99x=C$99E.SolveTOI_s_backup2.Copy(C$99a.m_sweep);if(C$99o.Advance(C$99_),C$99a.Advance(C$99_),C$99i.Update(this.m_contactManager.m_contactListener),C$99i.m_toiFlag=!1,++C$99i.m_toiCount,C$99i.IsEnabled()&&C$99i.IsTouching()){C$99o.SetAwake(!0),C$99a.SetAwake(!0),C$99t.Clear(),C$99t.AddBody(C$99o),C$99t.AddBody(C$99a),C$99t.AddContact(C$99i),C$99o.m_islandFlag=!0,C$99a.m_islandFlag=!0,C$99i.m_islandFlag=!0;for(var C$99b=0;C$99b<2;++C$99b)if((C$99w=0===C$99b?C$99o:C$99a).m_type===C$99H.b2BodyType.b2_dynamicBody)for(var C$99c=C$99w.m_contactList;C$99c&&C$99t.m_bodyCount!==C$99t.m_bodyCapacity&&C$99t.m_contactCount!==C$99t.m_contactCapacity;C$99c=C$99c.next){var C$99l,C$99A,C$99C,C$99S=C$99c.contact;C$99S.m_islandFlag||((C$99l=C$99c.other).m_type!==C$99H.b2BodyType.b2_dynamicBody||C$99w.IsBullet()||C$99l.IsBullet())&&(C$99C=C$99S.m_fixtureA.m_isSensor,C$99A=C$99S.m_fixtureB.m_isSensor,C$99C||C$99A||(C$99C=C$99E.SolveTOI_s_backup.Copy(C$99l.m_sweep),C$99l.m_islandFlag||C$99l.Advance(C$99_),C$99S.Update(this.m_contactManager.m_contactListener),C$99S.IsEnabled()&&C$99S.IsTouching()?(C$99S.m_islandFlag=!0,C$99t.AddContact(C$99S),C$99l.m_islandFlag||(C$99l.m_islandFlag=!0,C$99l.m_type!==C$99H.b2BodyType.b2_staticBody&&C$99l.SetAwake(!0),C$99t.AddBody(C$99l))):(C$99l.m_sweep.Copy(C$99C),C$99l.SynchronizeTransform())))}var C$99T=C$99E.SolveTOI_s_subStep;C$99T.dt=(1-C$99_)*C$99h.dt,C$99T.inv_dt=1/C$99T.dt,C$99T.dtRatio=1,C$99T.positionIterations=20,C$99T.velocityIterations=C$99h.velocityIterations,C$99T.particleIterations=C$99h.particleIterations,C$99T.warmStarting=!1,C$99t.SolveTOI(C$99T,C$99o.m_islandIndex,C$99a.m_islandIndex);for(var C$99w,C$99b=0;C$99b<C$99t.m_bodyCount;++C$99b)if((C$99w=C$99t.m_bodies[C$99b]).m_islandFlag=!1,C$99w.m_type===C$99H.b2BodyType.b2_dynamicBody){C$99w.SynchronizeFixtures();for(C$99c=C$99w.m_contactList;C$99c;C$99c=C$99c.next)C$99c.contact.m_toiFlag=!1,C$99c.contact.m_islandFlag=!1}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}else C$99i.SetEnabled(!1),C$99o.m_sweep.Copy(C$99v),C$99a.m_sweep.Copy(C$99x),C$99o.SynchronizeTransform(),C$99a.SynchronizeTransform()}},C$99E.prototype.AddController=function(C$99t){return C$99t.m_next=this.m_controllerList,C$99t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=C$99t),this.m_controllerList=C$99t,++this.m_controllerCount,C$99t},C$99E.prototype.RemoveController=function(C$99t){return C$99t.m_prev&&(C$99t.m_prev.m_next=C$99t.m_next),C$99t.m_next&&(C$99t.m_next.m_prev=C$99t.m_prev),this.m_controllerList===C$99t&&(this.m_controllerList=C$99t.m_next),--this.m_controllerCount,C$99t.m_prev=null,C$99t.m_next=null,C$99t},C$99E.Step_s_step=new C$99us,C$99E.Step_s_stepTimer=new C$99$,C$99E.Step_s_timer=new C$99$,C$99E.DrawDebugData_s_color=new C$99J(0,0,0),C$99E.DrawDebugData_s_vs=C$99j.MakeArray(4),C$99E.DrawDebugData_s_xf=new C$99R,C$99E.QueryFixtureShape_s_aabb=new C$99te,C$99E.RayCast_s_input=new C$99Zt,C$99E.RayCast_s_output=new C$99Qt,C$99E.RayCast_s_point=new C$99j,C$99E.DrawJoint_s_p1=new C$99j,C$99E.DrawJoint_s_p2=new C$99j,C$99E.DrawJoint_s_color=new C$99J(.5,.8,.8),C$99E.DrawJoint_s_c=new C$99J,C$99E.DrawShape_s_ghostColor=new C$99J,C$99E.SolveTOI_s_subStep=new C$99us,C$99E.SolveTOI_s_backup=new C$99W,C$99E.SolveTOI_s_backup1=new C$99W,C$99E.SolveTOI_s_backup2=new C$99W,C$99E.SolveTOI_s_toi_input=new C$99Se,C$99E.SolveTOI_s_toi_output=new C$99Te;C$99Us=C$99E;function C$99E(C$99t){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new C$99as,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new C$99j,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new C$99ls,this.m_island=new C$99Is,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(C$99t)}var C$99ho=function(C$99t,C$99e){this.prevBody=null,this.nextBody=null,this.prevController=null,this.nextController=null,this.controller=C$99t,this.body=C$99e},C$99uo=(C$99_o.prototype.GetNext=function(){return this.m_next},C$99_o.prototype.GetPrev=function(){return this.m_prev},C$99_o.prototype.GetBodyList=function(){return this.m_bodyList},C$99_o.prototype.AddBody=function(C$99t){var C$99e=new C$99ho(this,C$99t);C$99e.nextBody=this.m_bodyList,C$99e.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=C$99e),this.m_bodyList=C$99e,++this.m_bodyCount,C$99e.nextController=C$99t.m_controllerList,C$99e.prevController=null,C$99t.m_controllerList&&(C$99t.m_controllerList.prevController=C$99e),C$99t.m_controllerList=C$99e,++C$99t.m_controllerCount},C$99_o.prototype.RemoveBody=function(C$99t){if(this.m_bodyCount<=0)throw new Error;for(var C$99e=this.m_bodyList;C$99e&&C$99e.body!==C$99t;)C$99e=C$99e.nextBody;if(null===C$99e)throw new Error;C$99e.prevBody&&(C$99e.prevBody.nextBody=C$99e.nextBody),C$99e.nextBody&&(C$99e.nextBody.prevBody=C$99e.prevBody),this.m_bodyList===C$99e&&(this.m_bodyList=C$99e.nextBody),--this.m_bodyCount,C$99e.nextController&&(C$99e.nextController.prevController=C$99e.prevController),C$99e.prevController&&(C$99e.prevController.nextController=C$99e.nextController),C$99t.m_controllerList===C$99e&&(C$99t.m_controllerList=C$99e.nextController),--C$99t.m_controllerCount},C$99_o.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0},C$99_o);function C$99_o(){this.m_bodyList=null,this.m_bodyCount=0,this.m_prev=null,this.m_next=null}C$99Di(C$99po,C$99do=C$99uo),C$99po.prototype.Step=function(C$99h){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());for(var C$99t=this.m_bodyList;C$99t;C$99t=C$99t.nextBody){var C$99e=C$99t.body;if(C$99e.IsAwake()){for(var C$99i,C$99n=new C$99j,C$99r=new C$99j,C$99s=0,C$99o=0,C$99a=C$99e.GetFixtureList();C$99a;C$99a=C$99a.m_next){var C$99u,C$99c=new C$99j,C$99l=C$99a.GetShape().ComputeSubmergedArea(this.normal,this.offset,C$99e.GetTransform(),C$99c);C$99s+=C$99l,C$99n.x+=C$99l*C$99c.x,C$99n.y+=C$99l*C$99c.y;C$99o+=C$99l*(C$99u=this.useDensity?C$99a.GetDensity():1),C$99r.x+=C$99l*C$99c.x*C$99u,C$99r.y+=C$99l*C$99c.y*C$99u}C$99n.x/=C$99s,C$99n.y/=C$99s,C$99r.x/=C$99o,C$99r.y/=C$99o,C$99s<C$99M||((C$99i=this.gravity.Clone().SelfNeg()).SelfMul(this.density*C$99s),C$99e.ApplyForce(C$99i,C$99r),(C$99i=C$99e.GetLinearVelocityFromWorldPoint(C$99n,new C$99j)).SelfSub(this.velocity),C$99i.SelfMul(-this.linearDrag*C$99s),C$99e.ApplyForce(C$99i,C$99n),C$99e.ApplyTorque(-C$99e.GetInertia()/C$99e.GetMass()*C$99s*C$99e.GetAngularVelocity()*this.angularDrag))}}}},C$99po.prototype.Draw=function(C$99t){var C$99e=new C$99j,C$99i=new C$99j,C$99n=(C$99e.x=this.normal.x*this.offset+100*this.normal.y,C$99e.y=this.normal.y*this.offset-100*this.normal.x,C$99i.x=this.normal.x*this.offset-100*this.normal.y,C$99i.y=this.normal.y*this.offset+100*this.normal.x,new C$99J(0,0,.8));C$99t.DrawSegment(C$99e,C$99i,C$99n)};var C$99do,C$99fo=C$99po;function C$99po(){var C$99t=null!==C$99do&&C$99do.apply(this,arguments)||this;return C$99t.normal=new C$99j(0,1),C$99t.offset=0,C$99t.density=0,C$99t.velocity=new C$99j(0,0),C$99t.linearDrag=0,C$99t.angularDrag=0,C$99t.useDensity=!1,C$99t.useWorldGravity=!0,C$99t.gravity=new C$99j(0,0),C$99t}C$99Di(C$99go,C$99mo=C$99uo),C$99go.prototype.Step=function(C$99t){for(var C$99e=C$99j.MulSV(C$99t.dt,this.A,C$99go.Step_s_dtA),C$99i=this.m_bodyList;C$99i;C$99i=C$99i.nextBody){var C$99n=C$99i.body;C$99n.IsAwake()&&C$99n.SetLinearVelocity(C$99j.AddVV(C$99n.GetLinearVelocity(),C$99e,C$99j.s_t0))}},C$99go.prototype.Draw=function(C$99t){},C$99go.Step_s_dtA=new C$99j;var C$99mo,C$99yo=C$99go;function C$99go(){var C$99t=null!==C$99mo&&C$99mo.apply(this,arguments)||this;return C$99t.A=new C$99j(0,0),C$99t}C$99Di(C$99bo,C$99vo=C$99uo),C$99bo.prototype.Step=function(C$99t){for(var C$99e=this.m_bodyList;C$99e;C$99e=C$99e.nextBody){var C$99i=C$99e.body;C$99i.IsAwake()&&C$99i.ApplyForce(this.F,C$99i.GetWorldCenter())}},C$99bo.prototype.Draw=function(C$99t){};var C$99vo,C$99xo=C$99bo;function C$99bo(){var C$99t=null!==C$99vo&&C$99vo.apply(this,arguments)||this;return C$99t.F=new C$99j(0,0),C$99t}C$99Di(C$99So,C$99Ao=C$99uo),C$99So.prototype.Step=function(C$99h){if(this.invSqr)for(var C$99t=this.m_bodyList;C$99t;C$99t=C$99t.nextBody)for(var C$99e=(C$99r=C$99t.body).GetWorldCenter(),C$99u=C$99r.GetMass(),C$99i=this.m_bodyList;C$99i&&C$99i!==C$99t;C$99i=C$99i.nextBody){var C$99n=(C$99s=C$99i.body).GetWorldCenter(),C$99_=C$99s.GetMass();(C$99c=(C$99o=C$99n.x-C$99e.x)*C$99o+(C$99a=C$99n.y-C$99e.y)*C$99a)<C$99M||((C$99l=C$99So.Step_s_f.Set(C$99o,C$99a)).SelfMul(this.G/C$99c/C$99Y(C$99c)*C$99u*C$99_),C$99r.IsAwake()&&C$99r.ApplyForce(C$99l,C$99e),C$99s.IsAwake()&&C$99s.ApplyForce(C$99l.SelfMul(-1),C$99n))}else for(C$99t=this.m_bodyList;C$99t;C$99t=C$99t.nextBody)for(var C$99r,C$99e=(C$99r=C$99t.body).GetWorldCenter(),C$99u=C$99r.GetMass(),C$99i=this.m_bodyList;C$99i&&C$99i!==C$99t;C$99i=C$99i.nextBody){var C$99s,C$99o,C$99a,C$99c,C$99l,C$99n=(C$99s=C$99i.body).GetWorldCenter(),C$99_=C$99s.GetMass();(C$99c=(C$99o=C$99n.x-C$99e.x)*C$99o+(C$99a=C$99n.y-C$99e.y)*C$99a)<C$99M||((C$99l=C$99So.Step_s_f.Set(C$99o,C$99a)).SelfMul(this.G/C$99c*C$99u*C$99_),C$99r.IsAwake()&&C$99r.ApplyForce(C$99l,C$99e),C$99s.IsAwake()&&C$99s.ApplyForce(C$99l.SelfMul(-1),C$99n))}},C$99So.prototype.Draw=function(C$99t){},C$99So.Step_s_f=new C$99j;var C$99Ao,C$99Co=C$99So;function C$99So(){var C$99t=null!==C$99Ao&&C$99Ao.apply(this,arguments)||this;return C$99t.G=1,C$99t.invSqr=!0,C$99t}C$99Di(C$99Eo,C$99To=C$99uo),C$99Eo.prototype.Step=function(C$99t){var C$99e=C$99t.dt;if(!(C$99e<=C$99M)){C$99e>this.maxTimestep&&0<this.maxTimestep&&(C$99e=this.maxTimestep);for(var C$99i=this.m_bodyList;C$99i;C$99i=C$99i.nextBody){var C$99n,C$99r=C$99i.body;C$99r.IsAwake()&&(C$99n=C$99r.GetWorldVector(C$99F.MulMV(this.T,C$99r.GetLocalVector(C$99r.GetLinearVelocity(),C$99j.s_t0),C$99j.s_t1),C$99Eo.Step_s_damping),C$99r.SetLinearVelocity(C$99j.AddVV(C$99r.GetLinearVelocity(),C$99j.MulSV(C$99e,C$99n,C$99j.s_t0),C$99j.s_t1)))}}},C$99Eo.prototype.Draw=function(C$99t){},C$99Eo.prototype.SetAxisAligned=function(C$99t,C$99e){this.T.ex.x=-C$99t,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-C$99e,this.maxTimestep=0<C$99t||0<C$99e?1/C$99V(C$99t,C$99e):0},C$99Eo.Step_s_damping=new C$99j;var C$99To,C$99wo=C$99Eo;function C$99Eo(){var C$99t=null!==C$99To&&C$99To.apply(this,arguments)||this;return C$99t.T=new C$99F,C$99t.maxTimestep=0,C$99t}function C$99Mo(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new C$99j(0,0),this.damping=.1,this.k2=.9,this.k3=.1}C$99Bo.prototype.GetVertexCount=function(){return this.m_count},C$99Bo.prototype.GetVertices=function(){return this.m_ps},C$99Bo.prototype.Initialize=function(C$99t){this.m_count=C$99t.count,this.m_ps=C$99j.MakeArray(this.m_count),this.m_p0s=C$99j.MakeArray(this.m_count),this.m_vs=C$99j.MakeArray(this.m_count),this.m_ims=C$99h(this.m_count);for(var C$99e=0;C$99e<this.m_count;++C$99e){this.m_ps[C$99e].Copy(C$99t.vertices[C$99e]),this.m_p0s[C$99e].Copy(C$99t.vertices[C$99e]),this.m_vs[C$99e].SetZero();var C$99i=C$99t.masses[C$99e];this.m_ims[C$99e]=0<C$99i?1/C$99i:0}var C$99n=this.m_count-1,C$99r=this.m_count-2;this.m_Ls=C$99h(C$99n),this.m_as=C$99h(C$99r);for(C$99e=0;C$99e<C$99n;++C$99e){var C$99s=this.m_ps[C$99e],C$99o=this.m_ps[C$99e+1];this.m_Ls[C$99e]=C$99j.DistanceVV(C$99s,C$99o)}for(C$99e=0;C$99e<C$99r;++C$99e){var C$99s=this.m_ps[C$99e],C$99o=this.m_ps[C$99e+1],C$99a=this.m_ps[C$99e+2],C$99c=C$99j.SubVV(C$99o,C$99s,C$99j.s_t0),C$99a=C$99j.SubVV(C$99a,C$99o,C$99j.s_t1),C$99l=C$99j.CrossVV(C$99c,C$99a),C$99c=C$99j.DotVV(C$99c,C$99a);this.m_as[C$99e]=C$99v(C$99l,C$99c)}this.m_gravity.Copy(C$99t.gravity),this.m_damping=C$99t.damping,this.m_k2=C$99t.k2,this.m_k3=C$99t.k3},C$99Bo.prototype.Step=function(C$99t,C$99e){if(0!==C$99t){for(var C$99i=Math.exp(-C$99t*this.m_damping),C$99n=0;C$99n<this.m_count;++C$99n)this.m_p0s[C$99n].Copy(this.m_ps[C$99n]),0<this.m_ims[C$99n]&&this.m_vs[C$99n].SelfMulAdd(C$99t,this.m_gravity),this.m_vs[C$99n].SelfMul(C$99i),this.m_ps[C$99n].SelfMulAdd(C$99t,this.m_vs[C$99n]);for(C$99n=0;C$99n<C$99e;++C$99n)this.SolveC2(),this.SolveC3(),this.SolveC2();for(var C$99r=1/C$99t,C$99n=0;C$99n<this.m_count;++C$99n)C$99j.MulSV(C$99r,C$99j.SubVV(this.m_ps[C$99n],this.m_p0s[C$99n],C$99j.s_t0),this.m_vs[C$99n])}},C$99Bo.prototype.SolveC2=function(){for(var C$99t=this.m_count-1,C$99e=0;C$99e<C$99t;++C$99e){var C$99i,C$99n=this.m_ps[C$99e],C$99r=this.m_ps[C$99e+1],C$99s=C$99j.SubVV(C$99r,C$99n,C$99Bo.s_d),C$99o=C$99s.Normalize(),C$99a=this.m_ims[C$99e],C$99c=this.m_ims[C$99e+1];C$99a+C$99c!==0&&(C$99i=C$99c/(C$99a+C$99c),C$99n.SelfMulSub(this.m_k2*(C$99a/(C$99a+C$99c))*(this.m_Ls[C$99e]-C$99o),C$99s),C$99r.SelfMulAdd(this.m_k2*C$99i*(this.m_Ls[C$99e]-C$99o),C$99s))}},C$99Bo.prototype.SetAngle=function(C$99t){for(var C$99e=this.m_count-2,C$99i=0;C$99i<C$99e;++C$99i)this.m_as[C$99i]=C$99t},C$99Bo.prototype.SolveC3=function(){for(var C$99h=this.m_count-2,C$99t=0;C$99t<C$99h;++C$99t){var C$99u=this.m_ps[C$99t],C$99e=this.m_ps[C$99t+1],C$99_=this.m_ps[C$99t+2],C$99d=this.m_ims[C$99t],C$99f=this.m_ims[C$99t+1],C$99p=this.m_ims[C$99t+2],C$99i=C$99j.SubVV(C$99e,C$99u,C$99Bo.s_d1),C$99n=C$99j.SubVV(C$99_,C$99e,C$99Bo.s_d2),C$99r=C$99i.LengthSquared(),C$99s=C$99n.LengthSquared();if(C$99r*C$99s!=0){var C$99o=C$99j.CrossVV(C$99i,C$99n),C$99a=C$99j.DotVV(C$99i,C$99n),C$99c=C$99v(C$99o,C$99a),C$99o=C$99j.MulSV(-1/C$99r,C$99i.SelfSkew(),C$99Bo.s_Jd1),C$99a=C$99j.MulSV(1/C$99s,C$99n.SelfSkew(),C$99Bo.s_Jd2),C$99r=C$99j.NegV(C$99o,C$99Bo.s_J1),C$99i=C$99j.SubVV(C$99o,C$99a,C$99Bo.s_J2),C$99s=C$99a;if(0!=(C$99n=C$99d*C$99j.DotVV(C$99r,C$99r)+C$99f*C$99j.DotVV(C$99i,C$99i)+C$99p*C$99j.DotVV(C$99s,C$99s))){for(var C$99n=1/C$99n,C$99l=C$99c-this.m_as[C$99t];C$99m<C$99l;)C$99l=(C$99c-=2*C$99m)-this.m_as[C$99t];for(;C$99l<-C$99m;)C$99l=(C$99c+=2*C$99m)-this.m_as[C$99t];C$99o=-this.m_k3*C$99n*C$99l;C$99u.SelfMulAdd(C$99d*C$99o,C$99r),C$99e.SelfMulAdd(C$99f*C$99o,C$99i),C$99_.SelfMulAdd(C$99p*C$99o,C$99s)}}}},C$99Bo.prototype.Draw=function(C$99t){for(var C$99e=new C$99J(.4,.5,.7),C$99i=0;C$99i<this.m_count-1;++C$99i)C$99t.DrawSegment(this.m_ps[C$99i],this.m_ps[C$99i+1],C$99e)},C$99Bo.s_d=new C$99j,C$99Bo.s_d1=new C$99j,C$99Bo.s_d2=new C$99j,C$99Bo.s_Jd1=new C$99j,C$99Bo.s_Jd2=new C$99j,C$99Bo.s_J1=new C$99j,C$99Bo.s_J2=new C$99j;var C$99Io=C$99Bo;function C$99Bo(){this.m_count=0,this.m_ps=[],this.m_p0s=[],this.m_vs=[],this.m_ims=[],this.m_Ls=[],this.m_as=[],this.m_gravity=new C$99j,this.m_damping=0,this.m_k2=1,this.m_k3=.1}C$99H.b2Assert=function(C$99t){for(var C$99e=[],C$99i=1;C$99i<arguments.length;C$99i++)C$99e[C$99i-1]=arguments[C$99i];if(!C$99t)throw new(Error.bind.apply(Error,[void 0].concat(C$99e)))},C$99H.b2Maybe=C$99f,C$99H.b2_maxFloat=C$99P,C$99H.b2_epsilon=C$99M,C$99H.b2_epsilon_sq=C$99g,C$99H.b2_pi=C$99m,C$99H.b2_maxManifoldPoints=2,C$99H.b2_maxPolygonVertices=8,C$99H.b2_aabbExtension=.1,C$99H.b2_aabbMultiplier=2,C$99H.b2_linearSlop=.008,C$99H.b2_angularSlop=C$99I,C$99H.b2_polygonRadius=.016,C$99H.b2_maxSubSteps=8,C$99H.b2_maxTOIContacts=32,C$99H.b2_velocityThreshold=1,C$99H.b2_maxLinearCorrection=.2,C$99H.b2_maxAngularCorrection=C$99p,C$99H.b2_maxTranslation=2,C$99H.b2_maxTranslationSquared=4,C$99H.b2_maxRotation=C$99T,C$99H.b2_maxRotationSquared=C$99w,C$99H.b2_baumgarte=.2,C$99H.b2_toiBaumgarte=.75,C$99H.b2_invalidParticleIndex=-1,C$99H.b2_maxParticleIndex=2147483647,C$99H.b2_particleStride=.75,C$99H.b2_minParticleWeight=1,C$99H.b2_maxParticlePressure=.25,C$99H.b2_maxParticleForce=.5,C$99H.b2_maxTriadDistance=2,C$99H.b2_maxTriadDistanceSquared=4,C$99H.b2_minParticleSystemBufferCapacity=256,C$99H.b2_barrierCollisionTime=2.5,C$99H.b2_timeToSleep=.5,C$99H.b2_linearSleepTolerance=.01,C$99H.b2_angularSleepTolerance=C$99t,C$99H.b2Alloc=function(C$99t){return null},C$99H.b2Free=function(C$99t){},C$99H.b2Log=function(C$99t){for(var C$99e=[],C$99i=1;C$99i<arguments.length;C$99i++)C$99e[C$99i-1]=arguments[C$99i]},C$99H.b2Version=C$99i,C$99H.b2_version=C$99s,C$99H.b2_branch="master",C$99H.b2_commit="fbf51801d80fc389d43dc46524520e89043b6faf",C$99H.b2ParseInt=function(C$99t){return parseInt(C$99t,10)},C$99H.b2ParseUInt=function(C$99t){return Math.abs(parseInt(C$99t,10))},C$99H.b2MakeArray=C$99c,C$99H.b2MakeNullArray=function(C$99t){for(var C$99e=[],C$99i=0;C$99i<C$99t;++C$99i)C$99e.push(null);return C$99e},C$99H.b2MakeNumberArray=C$99h,C$99H.b2_pi_over_180=.017453292519944444,C$99H.b2_180_over_pi=57.29577951307855,C$99H.b2_two_pi=6.28318530718,C$99H.b2Abs=C$99D,C$99H.b2Min=C$99L,C$99H.b2Max=C$99V,C$99H.b2Clamp=C$99O,C$99H.b2Swap=function(C$99t,C$99e){var C$99i=C$99t[0];C$99t[0]=C$99e[0],C$99e[0]=C$99i},C$99H.b2IsValid=C$99o,C$99H.b2Sq=C$99_,C$99H.b2InvSqrt=C$99A,C$99H.b2Sqrt=C$99Y,C$99H.b2Pow=C$99a,C$99H.b2DegToRad=function(C$99t){return.017453292519944444*C$99t},C$99H.b2RadToDeg=function(C$99t){return 57.29577951307855*C$99t},C$99H.b2Cos=C$99l,C$99H.b2Sin=C$99u,C$99H.b2Acos=C$99d,C$99H.b2Asin=C$99y,C$99H.b2Atan2=C$99v,C$99H.b2NextPowerOfTwo=function(C$99t){return(C$99t=(C$99t=(C$99t=(C$99t=(C$99t|=C$99t>>1&2147483647)|C$99t>>2&1073741823)|C$99t>>4&268435455)|C$99t>>8&16777215)|C$99t>>16&65535)+1},C$99H.b2IsPowerOfTwo=function(C$99t){return 0<C$99t&&0==(C$99t&C$99t-1)},C$99H.b2Random=function(){return 2*Math.random()-1},C$99H.b2RandomRange=function(C$99t,C$99e){return(C$99e-C$99t)*Math.random()+C$99t},C$99H.b2Vec2=C$99j,C$99H.b2Vec2_zero=C$99x,C$99H.b2Vec3=C$99b,C$99H.b2Mat22=C$99F,C$99H.b2Mat33=C$99k,C$99H.b2Rot=C$99B,C$99H.b2Transform=C$99R,C$99H.b2Sweep=C$99W,C$99H.b2Color=C$99J,C$99H.b2Draw=C$99K,C$99H.b2Timer=C$99$,C$99H.b2Counter=C$99et,C$99H.b2GrowableStack=C$99nt,C$99H.b2BlockAllocator=C$99st,C$99H.b2StackAllocator=C$99ot,C$99H.b2ContactFeature=C$99Nt,C$99H.b2ContactID=C$99Gt,C$99H.b2ManifoldPoint=C$99Ut,C$99H.b2Manifold=C$99Ht,C$99H.b2WorldManifold=C$99Xt,C$99H.b2GetPointStates=function(C$99t,C$99e,C$99i,C$99n){for(var C$99r=0;C$99r<C$99i.pointCount;++C$99r){var C$99s=C$99i.points[C$99r].id.key;C$99t[C$99r]=C$99H.b2PointState.b2_removeState;for(var C$99o=0,C$99a=C$99n.pointCount;C$99o<C$99a;++C$99o)if(C$99n.points[C$99o].id.key===C$99s){C$99t[C$99r]=C$99H.b2PointState.b2_persistState;break}}for(;C$99r<2;++C$99r)C$99t[C$99r]=C$99H.b2PointState.b2_nullState;for(C$99r=0;C$99r<C$99n.pointCount;++C$99r){C$99s=C$99n.points[C$99r].id.key;C$99e[C$99r]=C$99H.b2PointState.b2_addState;for(C$99o=0,C$99a=C$99i.pointCount;C$99o<C$99a;++C$99o)if(C$99i.points[C$99o].id.key===C$99s){C$99e[C$99r]=C$99H.b2PointState.b2_persistState;break}}for(;C$99r<2;++C$99r)C$99e[C$99r]=C$99H.b2PointState.b2_nullState},C$99H.b2ClipVertex=C$99qt,C$99H.b2RayCastInput=C$99Zt,C$99H.b2RayCastOutput=C$99Qt,C$99H.b2AABB=C$99te,C$99H.b2TestOverlapAABB=C$99ie,C$99H.b2ClipSegmentToLine=C$99ne,C$99H.b2TestOverlapShape=C$99ae,C$99H.b2DistanceProxy=C$99at,C$99H.b2SimplexCache=C$99lt,C$99H.b2DistanceInput=C$99ut,C$99H.b2DistanceOutput=C$99dt,C$99H.b2ShapeCastInput=C$99pt,C$99H.b2ShapeCastOutput=C$99mt,C$99H.b2_gjk_reset=function(){C$99H.b2_gjkCalls=0,C$99H.b2_gjkIters=0,C$99H.b2_gjkMaxIters=0},C$99H.b2SimplexVertex=C$99yt,C$99H.b2Simplex=C$99vt,C$99H.b2Distance=C$99It,C$99H.b2ShapeCast=function(C$99t,C$99e){C$99t.iterations=0,C$99t.lambda=1,C$99t.normal.SetZero(),C$99t.point.SetZero();for(var C$99i=C$99e.proxyA,C$99n=C$99e.proxyB,C$99h=C$99V(C$99i.m_radius,.016)+C$99V(C$99n.m_radius,.016),C$99r=C$99e.transformA,C$99s=C$99e.transformB,C$99o=C$99e.translationB,C$99u=C$99Bt.Set(0,0),C$99_=0,C$99a=C$99Rt,C$99d=(C$99a.m_count=0,C$99a.m_vertices),C$99f=C$99i.GetSupport(C$99B.MulTRV(C$99r.q,C$99j.NegV(C$99o,C$99j.s_t1),C$99j.s_t0)),C$99p=C$99R.MulXV(C$99r,C$99i.GetVertex(C$99f),C$99Pt),C$99m=C$99n.GetSupport(C$99B.MulTRV(C$99s.q,C$99o,C$99j.s_t0)),C$99y=C$99R.MulXV(C$99s,C$99n.GetVertex(C$99m),C$99Dt),C$99c=C$99j.SubVV(C$99p,C$99y,C$99Lt),C$99g=C$99V(.016,C$99h-.016),C$99v=0;C$99v<20&&.004<C$99D(C$99c.Length()-C$99g);){C$99t.iterations+=1;var C$99f=C$99i.GetSupport(C$99B.MulTRV(C$99r.q,C$99j.NegV(C$99c,C$99j.s_t1),C$99j.s_t0)),C$99p=C$99R.MulXV(C$99r,C$99i.GetVertex(C$99f),C$99Pt),C$99m=C$99n.GetSupport(C$99B.MulTRV(C$99s.q,C$99c,C$99j.s_t0)),C$99y=C$99R.MulXV(C$99s,C$99n.GetVertex(C$99m),C$99Dt),C$99l=C$99j.SubVV(C$99p,C$99y,C$99Vt),C$99l=(C$99c.Normalize(),C$99j.DotVV(C$99c,C$99l)),C$99x=C$99j.DotVV(C$99c,C$99o);if(C$99_*C$99x<C$99l-C$99g){if(C$99x<=0)return!1;if(1<(C$99_=(C$99l-C$99g)/C$99x))return!1;C$99u.Copy(C$99c).SelfNeg(),C$99a.m_count=0}C$99l=C$99d[C$99a.m_count];switch(C$99l.indexA=C$99m,C$99l.wA.Copy(C$99y).SelfMulAdd(C$99_,C$99o),C$99l.indexB=C$99f,C$99l.wB.Copy(C$99p),C$99l.w.Copy(C$99l.wB).SelfSub(C$99l.wA),C$99l.a=1,C$99a.m_count+=1,C$99a.m_count){case 1:break;case 2:C$99a.Solve2();break;case 3:C$99a.Solve3()}if(3===C$99a.m_count)return!1;C$99a.GetClosestPoint(C$99c),++C$99v}return C$99a.GetWitnessPoints(C$99Ot,C$99Ft),0<C$99c.LengthSquared()&&(C$99u.Copy(C$99c).SelfNeg(),C$99u.Normalize()),C$99t.normal.Copy(C$99u),C$99t.lambda=C$99_,C$99t.iterations=C$99v,!0},C$99H.b2Pair=C$99de,C$99H.b2BroadPhase=C$99fe,C$99H.b2PairLessThan=C$99me,C$99H.b2TreeNode=C$99le,C$99H.b2DynamicTree=C$99ue,C$99H.b2_toi_reset=function(){C$99H.b2_toiTime=0,C$99H.b2_toiMaxTime=0,C$99H.b2_toiCalls=0,C$99H.b2_toiIters=0,C$99H.b2_toiMaxIters=0,C$99H.b2_toiRootIters=0,C$99H.b2_toiMaxRootIters=0},C$99H.b2TOIInput=C$99Se,C$99H.b2TOIOutput=C$99Te,C$99H.b2SeparationFunction=C$99we,C$99H.b2TimeOfImpact=C$99Fe,C$99H.b2CollideCircles=C$99Ge,C$99H.b2CollidePolygonAndCircle=C$99He,C$99H.b2CollidePolygons=C$99di,C$99H.b2CollideEdgeAndCircle=C$99Ai,C$99H.b2CollideEdgeAndPolygon=C$99Mi,C$99H.b2MassData=C$99Ii,C$99H.b2Shape=C$99Bi,C$99H.b2CircleShape=C$99Ci,C$99H.b2PolygonShape=C$99Ti,C$99H.b2EdgeShape=C$99Ni,C$99H.b2ChainShape=C$99zi,C$99H.b2Filter=C$99Wi,C$99H.b2FixtureDef=C$99ji,C$99H.b2FixtureProxy=C$99Xi,C$99H.b2Fixture=C$99Yi,C$99H.b2BodyDef=C$99Ji,C$99H.b2Body=C$99Zi,C$99H.b2World=C$99Us,C$99H.b2DestructionListener=C$99Zr,C$99H.b2ContactFilter=C$99Qr,C$99H.b2ContactImpulse=C$99ts,C$99H.b2ContactListener=C$99es,C$99H.b2QueryCallback=C$99ns,C$99H.b2RayCastCallback=C$99ss,C$99H.b2Island=C$99Is,C$99H.b2Profile=C$99ls,C$99H.b2TimeStep=C$99us,C$99H.b2Position=C$99ds,C$99H.b2Velocity=C$99ps,C$99H.b2SolverData=C$99ys,C$99H.b2ContactManager=C$99as,C$99H.b2MixFriction=C$99br,C$99H.b2MixRestitution=C$99Ar,C$99H.b2ContactEdge=C$99Cr,C$99H.b2Contact=C$99Sr,C$99H.b2ContactRegister=C$99Yr,C$99H.b2ContactFactory=C$99qr,C$99H.g_blockSolve=!1,C$99H.b2VelocityConstraintPoint=C$99gs,C$99H.b2ContactVelocityConstraint=C$99xs,C$99H.b2ContactPositionConstraint=C$99As,C$99H.b2ContactSolverDef=C$99Ss,C$99H.b2PositionSolverManifold=C$99Ts,C$99H.b2ContactSolver=C$99Es,C$99H.b2CircleContact=C$99Er,C$99H.b2PolygonContact=C$99Br,C$99H.b2PolygonAndCircleContact=C$99Dr,C$99H.b2EdgeAndCircleContact=C$99Or,C$99H.b2EdgeAndPolygonContact=C$99kr,C$99H.b2ChainAndCircleContact=C$99Ur,C$99H.b2ChainAndPolygonContact=C$99jr,C$99H.b2Jacobian=C$99Ki,C$99H.b2JointEdge=C$99tn,C$99H.b2JointDef=C$99$i,C$99H.b2Joint=C$99en,C$99H.b2AreaJointDef=C$99hn,C$99H.b2AreaJoint=C$99dn,C$99H.b2DistanceJointDef=C$99rn,C$99H.b2DistanceJoint=C$99an,C$99H.b2FrictionJointDef=C$99mn,C$99H.b2FrictionJoint=C$99vn,C$99H.b2GearJointDef=C$99An,C$99H.b2GearJoint=C$99Tn,C$99H.b2MotorJointDef=C$99Mn,C$99H.b2MotorJoint=C$99Rn,C$99H.b2MouseJointDef=C$99Ln,C$99H.b2MouseJoint=C$99Fn,C$99H.b2PrismaticJointDef=C$99Gn,C$99H.b2PrismaticJoint=C$99Wn,C$99H.b2_minPulleyLength=2,C$99H.b2PulleyJointDef=C$99Xn,C$99H.b2PulleyJoint=C$99Jn,C$99H.b2RevoluteJointDef=C$99Qn,C$99H.b2RevoluteJoint=C$99er,C$99H.b2RopeJointDef=C$99rr,C$99H.b2RopeJoint=C$99ar,C$99H.b2WeldJointDef=C$99hr,C$99H.b2WeldJoint=C$99dr,C$99H.b2WheelJointDef=C$99mr,C$99H.b2WheelJoint=C$99vr,C$99H.b2ControllerEdge=C$99ho,C$99H.b2Controller=C$99uo,C$99H.b2BuoyancyController=C$99fo,C$99H.b2ConstantAccelController=C$99yo,C$99H.b2ConstantForceController=C$99xo,C$99H.b2GravityController=C$99Co,C$99H.b2TensorDampingController=C$99wo,C$99H.b2ParticleDef=C$99Rs,C$99H.b2CalculateParticleIterations=C$99Ps,C$99H.b2ParticleHandle=C$99Ds,C$99H.b2ParticleGroupDef=C$99Vs,C$99H.b2ParticleGroup=C$99Os,C$99H.b2GrowableBuffer=C$99Qs,C$99H.b2FixtureParticleQueryCallback=C$99eo,C$99H.b2ParticleContact=C$99no,C$99H.b2ParticleBodyContact=C$99so,C$99H.b2ParticlePair=C$99oo,C$99H.b2ParticleTriad=C$99ao,C$99H.b2ParticleSystemDef=C$99co,C$99H.b2RopeDef=C$99Mo,C$99H.b2Rope=C$99Io,Object.defineProperty(C$99H,"__esModule",{value:!0})},"object"==typeof C$99i&&void 0!==C$99e?C$99n(C$99i):"function"==typeof define&&define.amd?define(["exports"],C$99n):C$99n((void 0).box2d={})},{}],363:[function(C$99t,C$99e,C$99i){"use strict";var C$99n="undefined"==typeof window?global:window;C$99n.cc=C$99n.cc||{},cc.internal=cc.internal||{},C$99t("./predefine"),C$99t("./polyfill/string"),C$99t("./polyfill/misc"),C$99t("./polyfill/array"),C$99t("./polyfill/object"),C$99t("./polyfill/array-buffer"),C$99t("./polyfill/number"),C$99t("./polyfill/typescript"),C$99t("./cocos2d/core/predefine"),C$99t("./cocos2d"),C$99t("./extends"),C$99e.exports=C$99n.cc},{"./cocos2d":292,"./cocos2d/core/predefine":214,"./extends":350,"./package":void 0,"./polyfill/array":365,"./polyfill/array-buffer":364,"./polyfill/misc":366,"./polyfill/number":367,"./polyfill/object":368,"./polyfill/string":369,"./polyfill/typescript":370,"./predefine":371}],364:[function(C$99t,C$99e,C$99i){"use strict";var C$99n;ArrayBuffer.isView||(C$99n=Object.getPrototypeOf(Int8Array),ArrayBuffer.isView="function"==typeof C$99n?function(C$99t){return C$99t instanceof C$99n}:function(C$99t){if("object"!=typeof C$99t)return!1;C$99t=C$99t.constructor;return C$99t===Float32Array||C$99t===Uint8Array||C$99t===Uint32Array||C$99t===Int8Array})},{}],365:[function(C$99t,C$99e,C$99i){"use strict";Array.isArray||(Array.isArray=function(C$99t){return"[object Array]"===Object.prototype.toString.call(C$99t)}),Array.prototype.find||(Array.prototype.find=function(C$99t){for(var C$99e=this.length,C$99i=0;C$99i<C$99e;C$99i++){var C$99n=this[C$99i];if(C$99t.call(this,C$99n,C$99i,this))return C$99n}}),Array.prototype.includes||(Array.prototype.includes=function(C$99t){return-1!==this.indexOf(C$99t)})},{}],366:[function(C$99t,C$99e,C$99i){"use strict";var C$99n,C$99r;Math.sign||(Math.sign=function(C$99t){return 0===(C$99t=+C$99t)||isNaN(C$99t)?C$99t:0<C$99t?1:-1}),Math.log2||(Math.log2=function(C$99t){return Math.log(C$99t)*Math.LOG2E}),Number.isInteger||(Number.isInteger=function(C$99t){return"number"==typeof C$99t&&isFinite(C$99t)&&Math.floor(C$99t)===C$99t}),console.time||(C$99n=window.performance||Date,C$99r=Object.create(null),console.time=function(C$99t){C$99r[C$99t]=C$99n.now()},console.timeEnd=function(C$99t){var C$99e=C$99r[C$99t],C$99e=C$99n.now()-C$99e;console.log(C$99t+": "+C$99e+"ms")})},{}],367:[function(C$99t,C$99e,C$99i){"use strict";Number.parseFloat=Number.parseFloat||parseFloat,Number.parseInt=Number.parseInt||parseInt},{}],368:[function(C$99t,C$99e,C$99i){"use strict";Object.assign||(Object.assign=function(C$99t,C$99e){return cc.js.mixin(C$99t,C$99e)}),Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(C$99t){var C$99e={},C$99i=Object.getOwnPropertyNames(C$99t);Object.getOwnPropertySymbols&&(C$99i=C$99i.concat(Object.getOwnPropertySymbols(C$99t)));for(var C$99n=0;C$99n<C$99i.length;++C$99n){var C$99r=C$99i[C$99n];C$99e[C$99r]=Object.getOwnPropertyDescriptor(C$99t,C$99r)}return C$99e})},{}],369:[function(C$99t,C$99e,C$99i){"use strict";String.prototype.startsWith||(String.prototype.startsWith=function(C$99t,C$99e){return this.lastIndexOf(C$99t,C$99e=C$99e||0)===C$99e}),String.prototype.endsWith||(String.prototype.endsWith=function(C$99t,C$99e){(void 0===C$99e||C$99e>this.length)&&(C$99e=this.length),C$99e-=C$99t.length;C$99t=this.indexOf(C$99t,C$99e);return-1!==C$99t&&C$99t===C$99e}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")})},{}],370:[function(C$99t,C$99e,C$99i){"use strict";var C$99n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C$99t,C$99e){C$99t.__proto__=C$99e}||function(C$99t,C$99e){for(var C$99i in C$99e)C$99e.hasOwnProperty(C$99i)&&(C$99t[C$99i]=C$99e[C$99i])};window.__extends=function(C$99t,C$99e){function C$99i(){this.constructor=C$99t}C$99n(C$99t,C$99e),C$99t.prototype=null===C$99e?Object.create(C$99e):(C$99i.prototype=C$99e.prototype,new C$99i)},window.__assign=Object.assign||function(C$99t){for(var C$99e,C$99i=1,C$99n=arguments.length;C$99i<C$99n;C$99i++)for(var C$99r in C$99e=arguments[C$99i])Object.prototype.hasOwnProperty.call(C$99e,C$99r)&&(C$99t[C$99r]=C$99e[C$99r]);return C$99t},window.__rest=function(C$99t,C$99e){var C$99i={};for(C$99r in C$99t)Object.prototype.hasOwnProperty.call(C$99t,C$99r)&&C$99e.indexOf(C$99r)<0&&(C$99i[C$99r]=C$99t[C$99r]);if(null!=C$99t&&"function"==typeof Object.getOwnPropertySymbols)for(var C$99n=0,C$99r=Object.getOwnPropertySymbols(C$99t);C$99n<C$99r.length;C$99n++)C$99e.indexOf(C$99r[C$99n])<0&&(C$99i[C$99r[C$99n]]=C$99t[C$99r[C$99n]]);return C$99i},window.__decorate=function(C$99t,C$99e,C$99i,C$99n){var C$99r,C$99s=arguments.length,C$99o=C$99s<3?C$99e:null===C$99n?C$99n=Object.getOwnPropertyDescriptor(C$99e,C$99i):C$99n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)C$99o=Reflect.decorate(C$99t,C$99e,C$99i,C$99n);else for(var C$99a=C$99t.length-1;0<=C$99a;C$99a--)(C$99r=C$99t[C$99a])&&(C$99o=(C$99s<3?C$99r(C$99o):3<C$99s?C$99r(C$99e,C$99i,C$99o):C$99r(C$99e,C$99i))||C$99o);return 3<C$99s&&C$99o&&Object.defineProperty(C$99e,C$99i,C$99o),C$99o},window.__param=function(C$99i,C$99n){return function(C$99t,C$99e){C$99n(C$99t,C$99e,C$99i)}},window.__metadata=function(C$99t,C$99e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(C$99t,C$99e)},window.__awaiter=function(C$99s,C$99o,C$99a,C$99c){return new(C$99a=C$99a||Promise)(function(C$99t,C$99e){function C$99i(C$99t){try{C$99r(C$99c.next(C$99t))}catch(C$99t){C$99e(C$99t)}}function C$99n(C$99t){try{C$99r(C$99c.throw(C$99t))}catch(C$99t){C$99e(C$99t)}}function C$99r(C$99e){C$99e.done?C$99t(C$99e.value):new C$99a(function(C$99t){C$99t(C$99e.value)}).then(C$99i,C$99n)}C$99r((C$99c=C$99c.apply(C$99s,C$99o||[])).next())})},window.__generator=function(C$99n,C$99r){var C$99s,C$99o,C$99a,C$99c={label:0,sent:function(){if(1&C$99a[0])throw C$99a[1];return C$99a[1]},trys:[],ops:[]},C$99t={next:C$99e(0),throw:C$99e(1),return:C$99e(2)};return"function"==typeof Symbol&&(C$99t[Symbol.iterator]=function(){return this}),C$99t;function C$99e(C$99i){return function(C$99t){var C$99e=[C$99i,C$99t];if(C$99s)throw new TypeError("Generator is already executing.");for(;C$99c;)try{if(C$99s=1,C$99o&&(C$99a=2&C$99e[0]?C$99o.return:C$99e[0]?C$99o.throw||((C$99a=C$99o.return)&&C$99a.call(C$99o),0):C$99o.next)&&!(C$99a=C$99a.call(C$99o,C$99e[1])).done)return C$99a;switch(C$99o=0,(C$99e=C$99a?[2&C$99e[0],C$99a.value]:C$99e)[0]){case 0:case 1:C$99a=C$99e;break;case 4:return C$99c.label++,{value:C$99e[1],done:!1};case 5:C$99c.label++,C$99o=C$99e[1],C$99e=[0];continue;case 7:C$99e=C$99c.ops.pop(),C$99c.trys.pop();continue;default:if(!(C$99a=0<(C$99a=C$99c.trys).length&&C$99a[C$99a.length-1])&&(6===C$99e[0]||2===C$99e[0])){C$99c=0;continue}if(3===C$99e[0]&&(!C$99a||C$99e[1]>C$99a[0]&&C$99e[1]<C$99a[3])){C$99c.label=C$99e[1];break}if(6===C$99e[0]&&C$99c.label<C$99a[1]){C$99c.label=C$99a[1],C$99a=C$99e;break}if(C$99a&&C$99c.label<C$99a[2]){C$99c.label=C$99a[2],C$99c.ops.push(C$99e);break}C$99a[2]&&C$99c.ops.pop(),C$99c.trys.pop();continue}C$99e=C$99r.call(C$99n,C$99c)}catch(C$99t){C$99e=[6,C$99t],C$99o=0}finally{C$99s=C$99a=0}if(5&C$99e[0])throw C$99e[1];return{value:C$99e[0]?C$99e[1]:void 0,done:!0}}}},window.__exportStar=function(C$99t,C$99e){for(var C$99i in C$99t)C$99e.hasOwnProperty(C$99i)||(C$99e[C$99i]=C$99t[C$99i])},window.__values=function(C$99t){var C$99e="function"==typeof Symbol&&C$99t[Symbol.iterator],C$99i=0;return C$99e?C$99e.call(C$99t):{next:function(){return{value:(C$99t=C$99t&&C$99i>=C$99t.length?void 0:C$99t)&&C$99t[C$99i++],done:!C$99t}}}},window.__read=function(C$99t,C$99e){var C$99i="function"==typeof Symbol&&C$99t[Symbol.iterator];if(!C$99i)return C$99t;var C$99n,C$99r,C$99s=C$99i.call(C$99t),C$99o=[];try{for(;(void 0===C$99e||0<C$99e--)&&!(C$99n=C$99s.next()).done;)C$99o.push(C$99n.value)}catch(C$99t){C$99r={error:C$99t}}finally{try{C$99n&&!C$99n.done&&(C$99i=C$99s.return)&&C$99i.call(C$99s)}finally{if(C$99r)throw C$99r.error}}return C$99o},window.__spread=function(){for(var C$99t=[],C$99e=0;C$99e<arguments.length;C$99e++)C$99t=C$99t.concat(__read(arguments[C$99e]));return C$99t},window.__await=function(C$99t){return this instanceof __await?(this.v=C$99t,this):new __await(C$99t)},window.__asyncGenerator=function(C$99t,C$99e,C$99i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C$99r=C$99i.apply(C$99t,C$99e||[]),C$99s=[],C$99o={};return C$99n("next"),C$99n("throw"),C$99n("return"),C$99o[Symbol.asyncIterator]=function(){return this},C$99o;function C$99n(C$99n){C$99r[C$99n]&&(C$99o[C$99n]=function(C$99i){return new Promise(function(C$99t,C$99e){1<C$99s.push([C$99n,C$99i,C$99t,C$99e])||C$99a(C$99n,C$99i)})})}function C$99a(C$99t,C$99e){try{(C$99i=C$99r[C$99t](C$99e)).value instanceof __await?Promise.resolve(C$99i.value.v).then(C$99c,C$99h):C$99l(C$99s[0][2],C$99i)}catch(C$99t){C$99l(C$99s[0][3],C$99t)}var C$99i}function C$99c(C$99t){C$99a("next",C$99t)}function C$99h(C$99t){C$99a("throw",C$99t)}function C$99l(C$99t,C$99e){C$99t(C$99e),C$99s.shift(),C$99s.length&&C$99a(C$99s[0][0],C$99s[0][1])}},window.__asyncDelegator=function(C$99n){var C$99r,C$99t={};return C$99e("next"),C$99e("throw",function(C$99t){throw C$99t}),C$99e("return"),C$99t[Symbol.iterator]=function(){return this},C$99t;function C$99e(C$99e,C$99i){C$99t[C$99e]=C$99n[C$99e]?function(C$99t){return(C$99r=!C$99r)?{value:__await(C$99n[C$99e](C$99t)),done:"return"===C$99e}:C$99i?C$99i(C$99t):C$99t}:C$99i}},window.__asyncValues=function(C$99o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C$99t,C$99e=C$99o[Symbol.asyncIterator];return C$99e?C$99e.call(C$99o):(C$99o="function"==typeof __values?__values(C$99o):C$99o[Symbol.iterator](),C$99t={},C$99i("next"),C$99i("throw"),C$99i("return"),C$99t[Symbol.asyncIterator]=function(){return this},C$99t);function C$99i(C$99s){C$99t[C$99s]=C$99o[C$99s]&&function(C$99r){return new Promise(function(C$99t,C$99e){var C$99i,C$99n;C$99r=C$99o[C$99s](C$99r),C$99i=C$99t,C$99t=C$99e,C$99n=C$99r.done,C$99e=C$99r.value,Promise.resolve(C$99e).then(function(C$99t){C$99i({value:C$99t,done:C$99n})},C$99t)})}}},window.__makeTemplateObject=function(C$99t,C$99e){return Object.defineProperty?Object.defineProperty(C$99t,"raw",{value:C$99e}):C$99t.raw=C$99e,C$99t},window.__importStar=function(C$99t){if(C$99t&&C$99t.__esModule)return C$99t;var C$99e={};if(null!=C$99t)for(var C$99i in C$99t)Object.hasOwnProperty.call(C$99t,C$99i)&&(C$99e[C$99i]=C$99t[C$99i]);return C$99e.default=C$99t,C$99e},window.__importDefault=function(C$99t){return C$99t&&C$99t.__esModule?C$99t:{default:C$99t}}},{}],371:[function(C$99t,C$99e,C$99i){"use strict";var C$99n="undefined"==typeof window?global:window;function C$99r(C$99e,C$99i){void 0===C$99n[C$99e]&&Object.defineProperty(C$99n,C$99e,{get:function(){var C$99t;return"CC_WECHATGAMESUB"===C$99e?C$99t="cc.sys.platform === cc.sys.WECHAT_GAME_SUB":"CC_WECHATGAME"===C$99e?C$99t="cc.sys.platform === cc.sys.WECHAT_GAME":"CC_QQPLAY"===C$99e&&(C$99t="cc.sys.platform === cc.sys.QQ_PLAY"),cc.warnID(1400,C$99e,C$99t),C$99i}})}function C$99s(C$99t){return"object"==typeof C$99n[C$99t]}C$99a=!(C$99o="CC_BUILD"),void 0===C$99n[C$99o]&&(C$99n[C$99o]=C$99a),C$99n.CC_BUILD=!0,C$99n.CC_DEV=!1,C$99n.CC_DEBUG=!0,C$99n.CC_JSB=!1,C$99n.CC_NATIVERENDERER=!1,C$99n.CC_SUPPORT_JIT=!1,C$99n.CC_PHYSICS_BUILTIN=!1,C$99n.CC_PHYSICS_CANNON=!1,C$99n.CC_EDITOR=!1,C$99n.CC_PREVIEW=!1,C$99n.CC_TEST=!1,C$99n.CC_RUNTIME=!1,C$99n.CC_JSB=!1;var C$99o=!(!C$99s("wx")||!wx.getSharedCanvas),C$99a=!(!C$99s("wx")||!wx.getSystemInfoSync&&!wx.getSharedCanvas),C$99c=C$99s("bk");C$99r("CC_WECHATGAMESUB",C$99o),C$99r("CC_WECHATGAME",C$99a),C$99r("CC_QQPLAY",C$99c);C$99n.CocosEngine=cc.ENGINE_VERSION="2.3.3"},{}]},{},[363]);